# StackOverflow 问答 13710000-13710999

# php - Cassandra 列按 UTF8 编码字符串排序

> ID：13710001
> 
> 赞同：1
> 
> 时间：2012-12-04T18:58:34.887
> 
> 标签：php, cassandra

我不确定这是否是特定问题，`Cassandra`或者这也可以属于，`PHP`所以我很抱歉标记`PHP`。

所以基本上我按列名对一些长行列进行排序，如下所示：

```
2012-01-01_aa_99999  |  2012-01-01_aaa  |  2012-01-12_aaaaa 
```

所以这是我希望它工作的方式，但我不明白它实际上是如何订购这些字符串的。

我不清楚的是第一个字符串`2012-01-01_aa_99999`似乎比其余两个大得多，我担心在某些时候它可能会忽略字符串的第一部分，即**日期**并将一些字符串放在不应该的地方属于。

在我的情况下，这些字符串由很多部分组成，所以我真的很关心这个，所以基本上我需要一些解释这个排序是如何在内部发生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:06:58.947

> 我不明白它实际上是如何订购这些字符串的。

您提供的字符串似乎是按[字典顺序排列](http://en.wikipedia.org/wiki/Lexicographical_order)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T21:56:35.437

我有同样的问题，因为我想构建一个具有易于理解的排序能力的复合主键索引。事实证明，Cassandra 似乎使用[逐字节二进制比较](https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/marshal/UTF8Type.java)来比较 UTF-8 字符串……从逻辑角度来看，这确实是一个完全损坏的排序功能。例如，如果您在字符串中混合了 ASCII 和 Kanji 字符，那么您的排序顺序实际上是随机的。但是，只要知道这种排序顺序，就可以围绕它设计您的使用模式。

当然，这可以很容易地修复，并且几乎只需对代码进行单行更改即可修补“真正的”排序功能。当然，这将需要一些额外的 CPU 时间。

# c - execvp/fork——如何捕捉不成功的执行？

> ID：13710003
> 
> 赞同：6
> 
> 时间：2012-12-04T18:58:37.280
> 
> 标签：c, exec, fork, execvp

现在我正在编写一个必须执行子进程的 C 程序。我不会同时执行多个子进程或任何事情，所以这相当简单。我肯定成功地执行了内置的 shell 程序（即 cat 和 echo 之类的东西），但我还需要能够判断这些程序之一何时无法成功执行。我正在尝试使用以下简化代码：

```
int returnStatus; // The return status of the child process.
pid_t pid = fork();

if (pid == -1) // error with forking.
{
   // Not really important for this question.
}
else if (pid == 0) // We're in the child process.
{
   execvp(programName, programNameAndCommandsArray); // vars declared above fork().

   // If this code executes the execution has failed.
   exit(127); // This exit code was taken from a exec tutorial -- why 127?
}
else // We're in the parent process.
{
   wait(&returnStatus); // Wait for the child process to exit.

   if (returnStatus == -1) // The child process execution failed.
   {
      // Log an error of execution.
   }
} 
```

例如，如果我尝试执行 rm fileThatDoesntExist.txt，我想认为这是一个失败，因为该文件不存在。我怎样才能做到这一点？此外，虽然该 execvp() 调用成功执行了内置的 shell 程序，但它不会执行可执行文件当前目录中的程序（即运行此代码的程序）；为了让它在当前目录中运行程序，我还需要做些什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T19:08:08.930

这是一个非常优雅的解决方案的经典问题。在分叉之前，在父级中创建一个`pipe`。之后`fork`，父级应关闭管道的写入端，并阻止尝试`read`从读取端。孩子应该关闭阅读端并使用`fcntl`为写作端设置 close-on-exec 标志。

现在，如果孩子调用`execvp`成功，管道的写入端将关闭，没有数据，并且`read`在父中将返回0。如果`execvp`在子中失败，则将错误代码写入管道，并且`read`在父中将返回非零，已阅读父级处理的错误代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:07:28.610

[`wait(2)`](http://linux.die.net/man/2/wait)为您提供的不仅仅是子进程的退出状态。为了得到真正的退出状态，你需要通过`WIFEXITED()`宏来测试孩子是否正常退出（而不是通过信号等异常退出），然后使用`WEXITSTATUS()`宏来获取真正的退出状态：

```
wait(&status);
if(WIFEXITED(status))
{
    if(WEXITSTATUS(status) == 0)
    {
        // Program succeeded
    }
    else
    {
        // Program failed but exited normally
    }
}
else
{
    // Program exited abnormally
} 
```

为了`execvp(3)`在当前目录中运行程序，您要么需要将当前目录添加到您的`$PATH`环境中（通常不是一个好主意），要么将完整路径传递给它，例如使用`./myprogram`而不是`myprogram`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:05:30.053

在故障检测方面，如果 exec() 函数将当前进程替换为新进程，则当前进程消失；执行的程序是否决定它被要求做的事情是成功还是失败并不重要。但是，fork 之前的父进程可以发现子进程的退出代码，该代码可能具有命令成功/失败信息。

在查找可执行文件方面， execvp() 复制了 shell 的操作，搜索当前路径。如果在工作目录中找不到可执行文件，则该目录可能不在搜索路径中（或者文件实际上不是可执行文件）。您可以尝试通过完整路径名指定它们。

如果你只是想运行一个命令并等待结果，你可能想使用 system() 函数来为你处理这个，而不是用 fork/exec 自己构建它。

# javascript - 类中的 javascript 私有成员会导致巨大的内存开销吗？

> ID：13710011
> 
> 赞同：11
> 
> 时间：2012-12-04T18:59:26.103
> 
> 标签：javascript

在 JavaScript 中，对象的字段总是“公共的”：

```
function Test() {
  this.x_ = 15;
}
Test.prototype = {
  getPublicX: function() {
    return this.x_;
  }
};
new Test().getPublicX();       // using the getter
new Test().x_;                 // bypassing the getter 
```

但是您可以通过使用局部变量并使用闭包作为吸气剂来模拟“私有”字段：

```
function Test() {
  var x = 15;
  this.getPrivateX = function() {
    return x;
  };
}
new Test().getPrivateX();       // using the getter
// ... no way to access x directly: it's a local variable out of scope 
```

一个区别是，对于“公共”方法，每个实例的 getter 都是同一个函数对象：

```
console.assert(t1.getPublicX === t2.getPublicX); 
```

而对于“私有”方法，每个实例的 getter 都是一个不同的函数对象：

```
console.assert(t1.getPrivateX != t2.getPrivateX); 
```

我很好奇这种方法的内存使用情况。由于每个实例都有一个单独`getPrivateX`的 ，如果我创建 10k 个实例，这会导致巨大的内存开销吗？

创建具有私有和公共成员的类实例的性能测试：

[Jsperf](http://jsperf.com/private-public-member)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T19:25:21.560

当然，它会产生内存开销。在公共情况下，您的函数属于`prototype`不属于实例，这意味着只有一个实例，除非您专门为特定对象提供该函数自己的实例。在私有情况下，该函数属于实例，这意味着您需要执行内存管理。

我的意思是：

```
var t1 = new Test();
t1.getPublicX = function () {
    return true;
}

var t2 = new Test();

t1.getPublicX(); // Returns true
t2.getPublicX(); // Returns 15 
```

因此，您也可能与公共成员陷入同样的​​境地。一般来说，您的问题的答案是：***是的，在实例化大量对象时会产生内存开销。***

我还应该补充一点， and in 的概念`public`与`private`in`javascript`完全不同`C++`。在`C++`私有中封装了成员，只能从类中访问，`javascript`您仍然可以从任何地方访问该成员。

在运行一个简短的测试之后，开销实际上是微不足道的。该选项卡比没有它的情况下多 40mb（加载了谷歌），如下面的屏幕截图所示：

![在此处输入图像描述](../Images/939acbb77d409fa41c3f1a7bd90ffd80.png)

[链接到全尺寸图像。](http://tinypic.com/r/9kv2q1/6)

# php - 如何在 php 文件中执行 makefile

> ID：13710016
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:59:38.580
> 
> 标签：php

有没有办法在 php 文件中执行 makefile？我努力了：

> `exec('cmd /c "C:\\Program Files\\Microsoft Visual Studio\\VC98\\Bin\\nmake.exe" -f E:\\dev\\temp.mak > process.out 2> process.err < /dev/null &');`

但我不认为 makefile 可以这样运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:05:34.577

尝试不同的方法，在 PHP 目录的同一位置创建一个 Windows 批处理文件；

```
cd C:\"Program Files"\"Microsoft Visual Studio"\VC98\Bin
nmake.exe -f E:\dev\temp.mak > process.out 2> process.err 
```

*将 Zids 评论纳入其中：*

*如果您不使用 PHP，您将如何从命令行执行它？– 摆脱*

*如果上述方法不起作用。通过从 Windows 命令提示符运行该 exe 在线搜索该 exe 的使用情况，然后相应地更改 .batch 文件。**

将此保存为`.batch`文件，然后从您的 PHP 尝试运行

```
exec ("filename.bat", $output); 
```

然后

在简单的 foreach 循环中查看 exec 命令执行的输出

```
foreach ($output AS $OutputStr)
{
echo $OutputStr."<br>";
} 
```

应该有一些输出，来自我将使用的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:07:57.520

为什么不这样做：

```
$make = escapeshellarg("C:\Program Files\Microsoft Visual Studio\VC98\Bin\nmake.exe");
$path = escapeshellarg("E:\dev\temp.mak");
exec("start /B {$make} -f {$path} > process.out 2> process.err"); 
```

*   `start /B`将在后台执行您的程序

*   `> process.out`将标准输出重定向到“process.out”文件

*   `2> process.err`将错误输出重定向到“process.err”文件

在这个例子中，`process.out`每次`process.err`运行都会被擦除`make`。为避免这种行为，只需将`>`符号替换为`>>`, 文件将被附加。

# sql - 三表SQL Select语法错误

> ID：13710019
> 
> 赞同：0
> 
> 时间：2012-12-04T18:59:43.750
> 
> 标签：sql, select, syntax-error

```
SELECT Surname
FROM Worker
WHERE NOT EXISTS
(
SELECT *
FROM Project, Works_at
WHERE NOT EXISTS
(
SELECT *
FROM Works_at
WHERE Works_at.WorkerId =Worker.Id
AND Works_at.PNum = Project.PNumber
)
); 
```

或者

```
SELECT Surname
FROM Worker
WHERE NOT EXISTS (
SELECT *
FROM Works_at
WHERE Id = WorkerId
); 
```

当我运行查询时，它说“SELECT”附近有语法错误会出现什么问题？第一个选择所有项目中的工人作品。第二个选择工人不在任何项目中工作。提前致谢

表是

> 工人 = {Name, Surname, Id, Salary, DptNum}
> 
> 部门 = {DptName, DptNumber}
> 
> Works_at = {WorkerId，PNum，小时}
> 
> Project={PName, PNumber, DptNum} 和
> 
> Works_at(WorkerId) → Worker(Id)
> 
> Works_at(Pnum) → Projekt(PNumber)
> 
> 项目(DptNum) → 部门(DptNumber)
> 
> 工人(DptNum) → 部门(DptNumber)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:05:52.980

NOT IN 子选择对性能很不利。您最好使用 LEFT-JOIN 并测试 NULL（即：没有匹配项）

```
SELECT 
      W.Surname
   FROM 
      Worker W
         LEFT JOIN Works_At WA
            on W.ID = WA.WorkerID
            LEFT JOIN Project P
               on WA.PNum = P.PNumber
   WHERE
      P.PNumber IS NULL 
```

这应该为您提供与项目无关的人员列表。这是基于有可能在地点工作，但没有分配项目。如果桌子上的作品没有记录，那么它会更简单

```
SELECT 
      W.Surname
   FROM 
      Worker W
         LEFT JOIN Works_At WA
            on W.ID = WA.WorkerID
   WHERE
      WA.WorkerID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:07:46.210

您无法访问 Works_at.PNum = Project.PNumber，因为项目表不适用于该子查询。

# java - 避免实现未使用的 Listener 方法

> ID：13710028
> 
> 赞同：1
> 
> 时间：2012-12-04T19:00:10.283
> 
> 标签：java, android, inheritance, listener

我正在开发一个 Android 应用程序，并使用[本](http://blog.chrisblunt.com/android-map-view-double-taps-and-overlay-markers/)教程来实现在我的地图上捕获双击事件。但我认为是一个更普遍的问题。因此，为了获得有关特定事件的通知，我必须实现很多侦听器。这些有很多我永远不会使用的方法，所以这些只是“污染”我的代码。是的，我可以使用侦听器适配器类，但我也必须从其他超类继承，不幸的是，Java 中不支持多重继承。另外，在这种情况下我不能使用委托，因为我的 Activity 类也必须是监听器（至少我认为）。那么，在 Java 中有什么方法可以实现使用的方法，并以某种方式摆脱其他方法？

这是描述问题的示例代码：

```
// ...

public class MainActivity extends MapActivity implements OnItemSelectedListener, OnGestureListener, OnDoubleTapListener {

    // ... my methods

    public boolean onDoubleTap(MotionEvent e) {
        // actually this method is used by me only
    }

    // ... lots of other implemented listener methods what I do not use
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:04:57.810

不可以。一旦一个接口被实现，它的所有方法都必须被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-09T22:40:14.937

是的，使用**Java 8**，您可以使用***default***来有效地忽略未使用/不需要的方法。

这是一个将 OnDoubleTapListener 扩展为只关心 onDoubleTap() 方法的示例

```
interface OnDoubleTapOnlyListener extends GestureDetector.OnDoubleTapListener
{
    default boolean onSingleTapConfirmed(MotionEvent e) { return false; }

    boolean onDoubleTap(MotionEvent e);

    default boolean onDoubleTapEvent(MotionEvent e) { return false; }
} 
```

然后你可以只实现 onDoubleTap 而其他的将被忽略。

**不幸**的是，Android 尚不支持开箱即用的 Java 8。然而，这并非不可能，您可以通过 Retrolambda [https://github.com/orfjackal/retrolambda使用 Java 8](https://github.com/orfjackal/retrolambda)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:26:15.233

我认为您可能需要重新考虑一下设计。

您的应用程序显然需要响应各种事件，这些事件是由需要不同侦听器的机制生成的，但您只关心触发器的子集。

我要做的是实现 MyAppEventTriggerQueue （它可以在内部使用 [http://developer.android.com/reference/java/util/concurrent/ConcurrentLinkedQueue.html](http://developer.android.com/reference/java/util/concurrent/ConcurrentLinkedQueue.html)）。

1.  该对象必须有一个工作线程来侦听队列更改并触发您的自定义回调。

2.  MapActivity 和 SimpleGestureListener 等所有不同的侦听器将填充共享队列，您的 MyAppEventTriggerQueue 将通过触发您的自定义事件来响应该队列。

这样你就可以从各种接口和实现中解脱出来，抽象出除了你需要的事件之外的所有东西。

这是一个多一点的工作，但它最终应该是一个更清洁的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-26T11:35:46.467

您可以使用抽象类：

```
 abstract  class DoubleTapListener implements   GestureDetector.OnDoubleTapListener {
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        return false;
    }

    @Override
    abstract public boolean onDoubleTap(MotionEvent e);

    @Override
    public boolean onDoubleTapEvent(MotionEvent e) {
        return false;
    }

}
public class MainActivity extends DoubleTapListener{

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        return false;
    }
} 
```

# objective-c - 如何删除 tableView 周围的突出显示

> ID：13710030
> 
> 赞同：-3
> 
> 时间：2012-12-04T19:00:13.873
> 
> 标签：objective-c, macos, cocoa

我有一个带有 tableView 的窗口。表格总是在边框周围突出显示，就好像它是一个“活动”文本区域。我找不到关闭此功能的设置。帮助！（我仍然希望表格中的选定项目具有突出显示。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:20:46.250

我明白了 - 我将“滚动视图”的焦点环设置为无，而不是表视图。是的，伙计们，我正在学习！

# java - 将列表存储到另一个列表

> ID：13710033
> 
> 赞同：0
> 
> 时间：2012-12-04T19:00:22.790
> 
> 标签：java

如果我有以下列表声明：

```
List< Integer> b = new ArrayList< Integer>(); 
```

和

```
List< HashSet < Integer>> c = new ArrayList< HashSet< Integer>>(); 
```

我想知道我将如何添加`b`到`c`？

我试过`c.add(b);` 了，但这不起作用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:03:20.760

您已声明`c`为*集合*列表（特别是“哈希集”），而不是列表*列表*；所以给它添加一个列表是没有意义的。如果你想`c`成为一个列表*列表*，你可以写：

```
List<List<Integer>> c = new ArrayList<List<Integer>>();

c.add(b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:03:45.930

您不能将整数添加`HashSet`到整数列表中。它们是两种不同的数据类型。如果您有一个`HashSet`整数而不是整数列表，那么您将能够将它们添加到您的列表中。

像这样：

```
HashSet< Integer> b = new HashSet< Integer>();
List< HashSet < Integer>> c = new ArrayList< HashSet< Integer>>();
c.add(b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:04:39.977

您正在使用泛型并定义`b`它将是一个列表，`Integers`并且`c`将是一个`HashSet`包含 s的列表`Integers`，所以不，您不能添加`b`到`c`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T19:04:40.123

是的，因为第一个整数列表第二个整数哈希集列表有 ywo 变体，

*   像这样将第一个列表中的所有值添加到第二个列表的第一个值

> ```
> HashSet<Integer> hs = new HashSet();
> hs.addAll(b);
> c.add(hs); 
> ```

*   为第一个列表中的每个值创建新的 HashSet 实例，并从第一个列表中放置一个值，对于此解决方案，使用循环遍历第一个列表

> ```
>  for (Integer value: b){
>      c.add(new HashSet<Integer>(){{add(value);}};);
> 
> } 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T19:07:24.907

您可以先创建 a`HashSet`并从中设置元素`b`，然后将 HashSet 添加到`c`如下：

```
 List< Integer> b = new ArrayList< Integer>();
    List< HashSet < Integer>> c = new ArrayList< HashSet< Integer>>();
    HashSet < Integer> b1= new HashSet<Integer>();
    b1.addAll(b);
    c.add(b1); 
```

# jsf - 如何在多台机器上刷新dataTable组件？

> ID：13710047
> 
> 赞同：0
> 
> 时间：2012-12-04T19:01:45.607
> 
> 标签：jsf, jakarta-ee, datatable, primefaces

我在许多 pc 上刷新数据表 [primefaces 模块] 时遇到问题。我一直在使用官方网站上的示例：

[http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionSingle.jsf](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionSingle.jsf)

表的代码是这样开始的：

```
<p:dataTable id="table" var="things" value="#{tableBean.beans}" paginator="true" rows="10" selectionMode="single" ....  > 
```

对于按钮：

```
 <p:commandButton value="Ajax Submit" update="table" id="ajax" actionListener="#{tableBean.savePerson}" ajax="true"> 
```

插座代码：

```
<p:socket onMessage="handleMessage" channel="/updater" /> 
```

“听众”的代码：

```
PushContext pushContext = PushContextFactory.getDefault().getPushContext();
pushContext.push("/updater", forBeingUpdated); 
```

上面的代码并不完整，只是片段。我想得到的是这样的东西：http: [//www.primefaces.org/showcase-labs/push/counter.jsf](http://www.primefaces.org/showcase-labs/push/counter.jsf) 所以，你可以看到点击计数器按钮使它在许多机器上增加。在我的情况下，我想向表中添加行[这件事已经完成]我无法让它在许多机器上动态刷新，如果我在一个 [pc] 上添加几条记录，我必须在另一个上点击刷新去看他们。我已经尝试过这个网站的技巧：[http](http://blog.primefaces.org/?p=2119) ://blog.primefaces.org/?p=2119但它根本没有用。欢迎任何想法:)。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T12:35:42.043

Primefaces 4 改进了这个 PrimePush 功能。

如果您只想从 Push Event 更新组件，请尝试使用此代码段（取自 Primefaces 4 User Guide）

> 如果您想在广播时更新组件和/或调用支持 bean 中的侦听器，您可以使用可选的*消息*ajax 行为来实现相同的功能，但需要额外的请求。

代码片段看起来像这样：

```
<p:socket channel="/updater">
    <p:ajax event="message" listener="#{tableBean.refreshTable}" update="form:table"  />
</p:socket> 
```

希望这可以帮助！

# javascript - 使用javascript在带有ID的tr中插入td

> ID：13710048
> 
> 赞同：1
> 
> 时间：2012-12-04T19:01:47.937
> 
> 标签：javascript

我必须在 tr 中插入一个 td，它有一个使用 javascript 的 ID。有人可以帮助我或指导我正确的方向。对不起，这可能很简单，但我对 javascript 很陌生。

```
<html>
 <head>
  <script type="text/javascript">
   function insertText ()
   {
       //function to insert any text on the tr with id "tr1"
   }
  </script>
 </head>
 <body onload="javascript:insertText()">
  <table>
   <tr id="tr1">
    </tr>`
  </table>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:03:30.090

```
function insertText ()
{
    var td = document.getElementById('tr1').insertCell(0);
    td.innerHTML = "Some Text";
} 
```

[insertCell](https://developer.mozilla.org/en-US/docs/DOM/tableRow.insertCell)（和[insertRow](https://developer.mozilla.org/en-US/docs/DOM/table.insertRow) ）的主要优点是它们允许您指定要插入新单元格（或行）的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:04:27.507

试试这个：

```
function insertText ()
{    
    var el = document.createElement('td');
    el.innerHTML = 'Hello World';
    document.getElementById("tr1").appendChild(el);
} 
```

# android - sysfillrect.c 和 cfbfillrect.c 有什么区别？

> ID：13710050
> 
> 赞同：1
> 
> 时间：2012-12-04T19:01:49.817
> 
> 标签：android, linux, linux-kernel, framebuffer

Linux 内核中有两种通用填充矩形的实现。似乎差异很小，所以为什么我两者都有？

这同样适用，`copyarea`并且`imageblit`有一个`cfb`和一个`sys fb`版本，为什么呢？

# alloy - 在 Alloy 的连通图中建模随机故障

> ID：13710054
> 
> 赞同：3
> 
> 时间：2012-12-04T19:02:05.130
> 
> 标签：alloy, model-checking

是否可以对合金中的随机故障进行建模？

例如，我目前有一个连通图，它以不同的时间步长将数据传递给它的邻居。我想要做的是找出一些允许模型随机终止链接的方法，并且在这样做的过程中，仍然设法实现其目标（确保所有节点的数据状态都设置为 On）。

```
open util/ordering[Time]

enum Datum{Off, On} // A simple representation of the state of each node

sig Time{state:Node->one Datum} // at each time we have a network state

abstract sig Node{
  neighbours:set Node 
}
fact { 
  neighbours = ~neighbours   -- symmetric
  no iden & neighbours          -- no loops
  all n : Node | Node in n.*neighbours -- connected
  --  all n : Node | (Node - n) in n.neighbours -- comp. connected
}
fact start{// At the start exactly one node has the datum
  one n:Node|first.state[n]=On
}

fact simple_change{ // in one time step all neighbours of On nodes become on
  all t:Time-last |
    let t_on = t.state.On |
    next[t].state.On = t_on+t_on.neighbours
}

run {} for 5 Time, 10 Node 
```

我试图建模的软件处理不确定性。基本上，节点之间的链接可能会失败，并且软件会沿着另一条路径重新路由。我想在合金中尝试做的是在某些时间步长（最好是随机的）有一些链接到“死”的设施。在最重要的事实中，我有能力使图完全连接，因此，如果一个链接死掉，另一个可能会弥补这一缺陷（因为 simple_change 将 Datum 的状态切换为 On所有连接的邻居）。

* * *

**编辑：**

所以，我按照建议做了并遇到了以下错误：![类型错误](../Images/920815e8cf321142138d9f404f1279a2.png)
我很困惑，因为我认为邻居和节点仍然是集合？

这是我更新的代码：

```
open util/ordering[Time]
open util/relation

enum Datum{Off, On} // A simple representation of the state of each node

sig Time{
  neighbours : Node->Node,
  state:Node->one Datum         // at each time we have a network state
}{
  symmetric[neighbours, Node]
}
abstract sig Node{
  neighbours:set Node
}

fact { 
  neighbours = ~neighbours   -- symmetric
  no iden & neighbours          -- no loops
--  all n : Node | (Node - n) in n.neighbours -- comp. connected
  all n : Node | Node in n.*neighbours -- connected
}

// At the start exactly one node has the datum
fact start{
  one n:Node|first.state[n]=On
}

// in one time step all neighbours of On nodes become on
fact simple_change{ 
  all t:Time-last |
    let t_on = t.state.On |
    next[t].state.On = t_on+t_on.neighbours

  all t:Time-last | next[t].neighbours in t.neighbours
  all t:Time-last | lone t.neighbours - next[t].neighbours
}

run {} for 10 Time, 3 Node 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:10:32.557

将邻居的定义移到 Time 中：

```
sig Time {neighbours : Node->Node, ....} 
```

您将需要重新表达关于每个时间点的邻居的对称性等事实。这很容易通过在 Time 签名的不变部分中完成：

```
sig Time {
  neighbours : Node->Node,
  ...
}{
  symmetric[neighbours, Node],
  ....
} 
```

（我确实建议使用`open util/relation`来加载有用的定义，例如`symmetric`.）

然后可以通过添加一个事实来复杂化时间步`simple_change`，例如

```
next[t].neighbours in t.neighbours 
```

可以扔掉任意多的弧线。

如果您想限制在每个步骤中丢弃多少弧线，您可以添加进一步的事实，例如

```
lone t.neighbours - next[t].neighbours 
```

这将处置限制为最多一个弧。

# filesystems - 你如何计算文件系统中的文件松弛？

> ID：13710063
> 
> 赞同：2
> 
> 时间：2012-12-04T19:02:32.197
> 
> 标签：filesystems

你如何计算文件松弛？

例如：

文件系统：FAT 16 驱动器大小：1.6 GB 集群：32kB

创建一个大小为 150,000 字节的文本文件。那么如何计算文件松弛度呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:22:38.780

FileSize / 簇大小（以字节为单位）= # 需要的簇。

如果 (FileSize modulo cluster size in bytes <> 0)，则需要添加 1 个额外的集群。

“文件松弛”=（需要的集群 * 1024）- FileSize

因此，对于您的示例：

```
32 * 1024 = 32768

150000 / 32768 = 4 clusters
150000 mod 32768 = 18928 = 1 additional cluster
4 + 1 clusters needed = 5 clusters needed
5 * 32768 = 163840 - 150000 file size = 13840 slack bytes 
```

请注意，即使磁盘驱动器的大小为 1KB = 1000 字节，集群大小也是基于每 KB 1024 字节，因此您需要在计算中使用它。

# svn - 同一分支上的两个修订之间的 svn checkout

> ID：13710068
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:02:50.803
> 
> 标签：svn, svn-export

有没有办法在两个修订之间导出到物理目录？

通过这种方式，预期的结果是只有文件，在指定的版本之间发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:05:54.343

您只能查看个别修订。您可能想要做的是仅导出在 2 个修订之间更改的文件。伪代码：

```
svn diff --summarize -rSTART:END
for each item
   svn export URL_TO_ITEM LOCAL_PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:07:33.300

顺便说一句：这些是我为完成此任务而采取的步骤：

1.  svn diff --summarize -r START:END Branch_URL > c:\diff.txt
2.  通过脚本更改 diff.txt 以仅获取已修改和添加的文件，并更改 Windows 路径的斜杠。
3.  对 $file 中的每个 $line 执行 svn checkout

虽然在 svn 中没有直接的方法（我认为它应该有），但这是一个建议的解决方法。

谢谢。

# filemerge - 使用 Filemerge 如何查看下部窗格。有结果的那个？

> ID：13710071
> 
> 赞同：3
> 
> 时间：2012-12-04T19:03:00.217
> 
> 标签：filemerge

您知道，您进行了全新安装，底部的窗格消失了。我喜欢那个窗格。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T19:05:05.257

![在此处输入图像描述](../Images/baf3ffadae21ea59e6674aa513ad11a3.png)

看到那个小点。单击它，您可以将窗口拉到视图中。现在生活好多了。

# php - 在 magento 中调用 CMS 块中的属性

> ID：13710077
> 
> 赞同：2
> 
> 时间：2012-12-04T19:03:39.180
> 
> 标签：php, magento, block

所以我在这个模板中有一个 cms 块，它位于每个产品列表的一侧。

我在 CMS 块中有这段代码：

```
{{block type="core/template" name="some_unique_name" template="myfolder/my_dynamic_php_content.phtml"}} 
```

这在 my_dynamic_php_content.phtml 中：

```
<?php echo $_product->getData('product_brand'); ?> 
```

我得到了错误：

> 在第 1 行的 /home/magento/public_html/shorepowerinc.com/app/design/frontend/fortis/default/template/myfolder/my_dynamic_php_content.phtml 中的非对象上调用成员函数 getData()

我是新手，所以如果有人能解释这里发生了什么，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:13:40.187

这里缺少两件事；

1）您需要为当前产品加载模型，并且

2) 显示属性时使用了错误的语法。

要在您的块中加载当前产品模型，请将其添加到`my_dynamic_php_content.phtml`模板的顶部；

```
<?php       
   $_prodID = Mage::registry('current_product')->getId();
   $_product = Mage::getModel('catalog/product')->load($_prodID );
?> 
```

然后输出模板中的属性；

```
<?php echo $_product->getProduct_brand() ?> 
```

（注意使用的是驼峰式，但如果您在设置属性时使用了下划线，请保留下划线）。

**编辑**

上面的答案将起作用，但下划线将由处理，`Varien_Object::_underscore()`流行的约定是使用 $_product->getData('product_brand') 或 $_product->getProductBrand()。感谢 Ben Marks 在下面的评论中提供此信息。

# java - why is the totalpay not adding up correctly?

> ID：13710080
> 
> 赞同：1
> 
> 时间：2012-12-04T19:03:43.337
> 
> 标签：java, if-statement, numbers, double

I have the user enter their location. and based on their location there is a pay difference. the if statements doesn't change the variable "pay" can someone help me?

```
import java.util.HashMap;
import javax.swing.*;

public class TimeSheet {

    public static void main(String[] args) {

        String loc;
        String[] startday = new String[7];
        String[] endday = new String[7];
        int x = 0;
        int y = 0;
        int num = 1;
        int location;
        double starttime;
        double endtime;
        double hour = 0;
        double total = 0;
        double pay = 0;
        double totalpay;

        loc = JOptionPane.showInputDialog(null, "Enter your Work Location");
        location = Integer.parseInt(loc);

        if (location == 100 && location < 200 ) {
            pay = 10.00;
        }
        else if (location == 200 && location < 300) {
            pay = 7.50;
        }
        else if (location == 300 && location < 400) {
            pay = 9.25;
        }
        else if (location == 400 && location < 500) {
            pay = 13.50;
        }
        else if (location == 500 && location < 600) {
            pay = 8.00;
        }

        HashMap<String, Double> map = new HashMap<String, Double>();
        map.put("1",9.0);
        map.put("2",9.5);
        map.put("3",10.0);
        map.put("4",10.5);
        map.put("5",11.0);
        map.put("6",11.5);
        map.put("7",12.0);
        map.put("8",12.5);
        map.put("A",13.0);
        map.put("B",13.5);
        map.put("C",14.0);
        map.put("D",14.5);
        map.put("E",15.0);
        map.put("F",15.5);
        map.put("G",16.0);
        map.put("H",16.5);
        map.put("I",17.0);

        while (x < 7 && y < 7) {

            startday[x] = JOptionPane.showInputDialog(null, "Enter Day "+num+" 's Starting code");
            endday[y] = JOptionPane.showInputDialog(null, "Enter Day "+num+" 's Ending code");

            starttime = map.get(startday[x]);
            endtime = map.get(endday[y]);

            hour = endtime - starttime;
            total = total + hour;
            totalpay = total*pay;

            JOptionPane.showMessageDialog(null, "total hour" + total);
            JOptionPane.showMessageDialog(null, "total pay for the week is " + totalpay);

            x++;
            y++;
            num++;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:05:45.310

your conditions are like:

```
else if (location == 200 && location < 300) { 
```

translate to english

if location is exactly 200 and less than 300.

You probably want to change it to

if location is greater or equals than 200 and less than 300.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:07:42.410

This might be why your if-block is not working as expected:

```
if (location == 100 && location < 200 ) {
    pay = 10.00;
}
else if (location == 200 && location < 300) {
    pay = 7.50;
}
else if (location == 300 && location < 400) {
    pay = 9.25;
}
else if (location == 400 && location < 500) {
    pay = 13.50;
}
else if (location == 500 && location < 600) {
    pay = 8.00;
} 
```

Depending on exactly how you are defining the location system, it should be either:

```
if (location < 100 ) {
    // Do something with pay here
    pay = 0.00;
}
else if (location < 200 ) {
    pay = 10.00;
}
else if (location < 300) {
    pay = 7.50;
}
else if (location < 400) {
    pay = 9.25;
}
else if (location < 500) {
    pay = 13.50;
}
else if (location < 600) {
    pay = 8.00;
}
else {
    // You should probably have some error-handling here
    // as fail-safe default for defensive programming
} 
```

Or

```
if (location == 100) {
    pay = 10.00;
}
else if (location == 200) {
    pay = 7.50;
}
else if (location == 300) {
    pay = 9.25;
}
else if (location == 400) {
    pay = 13.50;
}
else if (location == 500) {
    pay = 8.00;
}
else {
    // You should probably have some error-handling here
    // as fail-safe default for defensive programming
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:08:38.797

A simple Programmer 101 error -- you used AND when you should have used OR. Any value not 100, 200,300,400, 500 will fail because you want it to be 100 AND <200 etc. See below:

```
if (location == 100 || location < 200 ) {     
    pay = 10.00;
}
else if (location == 200 || location < 300) { 
    pay = 7.50;
}
else if (location == 300 || location < 400) {
    pay = 9.25;
}
else if (location == 400 || location < 500) {
    pay = 13.50;
}
else if (location == 500 || location < 600) {
    pay = 8.00;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:05:44.830

Your `if` conditions look really odd. Did you mean to say `>=` rather than `==`?

```
if (location == 100 && location < 200 ) {
             ^^ should this be >= ? 
```

By the way, half of these checks are unnecessary:

```
 if (location < 100) {
    }
    else if (location < 200 ) {
        pay = 10.00;
    }
    else if (location < 300) {
        pay = 7.50;
    }
    else if (location < 400) {
        pay = 9.25;
    }
    else if (location < 500) {
        pay = 13.50;
    }
    else if (location < 600) {
        pay = 8.00;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T19:12:48.167

All your if statements contain && such as the following: (location == 100 **&&** location < 200). Those should be replaced with **||**.

&& = AND operator
|| = OR operator

See the following changes bellow:

```
if (location == 100 || location < 200 ) {
    pay = 10.00;
}
else if (location == 200 || location < 300) {
    pay = 7.50;
}
else if (location == 300 || location < 400) {
    pay = 9.25;
}
else if (location == 400 || location < 500) {
    pay = 13.50;
}
else if (location == 500 || location < 600) {
    pay = 8.00;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T19:24:44.143

You don't really need the if-else mess for this. A Map of locations would clean it up quite a bit.

```
Map<String, Double> locMap = new HashMap<String, Double>();
locMap.put("100", 7.77);
locMap.put("500", 5.55);

pay = locMap.get(locStringFromInput); 
```

# cmake - 与警告链接，然后是未定义的引用

> ID：13710089
> 
> 赞同：0
> 
> 时间：2012-12-04T19:04:50.947
> 
> 标签：cmake

我正在尝试使用 Cmake 编译应用程序。

几乎在状态结束时：100%

我有：

```
/../lib/gcc/arm-linux-gnueabi/4.5.2/../../../../arm-none-linux-gnueabi/bin/ld: warning: libIMGegl.so, needed by /arm-linux-gnueabi/lib/libEGL.so, not found (try using -rpath or -rpath-link) 
```

然后很多消息

```
undefined reference to 'something' 
```

我在哪里可以添加 -rpath 或 -rpath-link

这是我的 CMAKE 标志：

```
set(CMAKE_C_FLAGS "-O2 -mcpu=cortex-a9 -mfpu=vfp -mfloat-abi=softfp -g -mtune=xscale -msoft-float -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -fomit-frame-pointer -fno-strict-aliasing ${CMAKE_ARM_LINUX_FLAGS}" CACHE INTERNAL "") 
```

# c - ISO C 标准定义了两类符合要求的实现

> ID：13710101
> 
> 赞同：7
> 
> 时间：2012-12-04T19:05:36.677
> 
> 标签：c, gcc

我阅读[了](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc.pdf)有关 GCC 的官方手册。有时我在翻译文本时遇到问题。在第六页（第 2.1 章）我无法理解这样的文本片段：

> ISO C 标准定义（在第 4 节中）两类符合要求的实现。符合要求的托管实现支持整个标准，包括所有图书馆设施；一个符合要求的独立实现只需要提供某些库设施：那些在`<float.h>`、`<limits.h>`、`<stdarg.h>`和 `<stddef.h>`; 自 AMD1 以来，还有那些在`<iso646.h>`; 从 C99 开始，还有`<stdbool.h>`和中的那些`<stdint.h>`；从 C11 开始，还有那些在 `<stdalign.h>`和 。此外，C99 中添加的复杂类型对于独立实现不是必需的。该标准还为程序定义了两个环境，一个独立环境，所有实现都需要，并且可能没有独立实现所需的库设施，其中程序启动和终止的处理是实现定义的，以及托管环境，它不是必需的，其中提供了所有库设施，并且通过函数`int main (void)`或`int main (int, char *[])`. 操作系统内核将是一个独立的环境；使用操作系统设施的程序通常在托管实现中。

我不确定我是否理解正确...

我将改写我的理解方式：

1.  存在 ISO C 标准的两种实现：完整（称为符合托管的实现）和轻型（称为符合独立的实现）。
2.  存在两个环境（针对每个标准的实现）：托管环境（针对完整标准）和独立环境（针对轻标准）。

轻型版本用于操作系统开发。完整版本适用于可在操作系统中运行的程序。

而且我不理解有关`main`功能的短语。

我要求向我解释这段文字。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T19:22:47.940

两者兼而有之。

该标准定义了两个运行时环境。一个拥有所有的语言，加上标准运行时库的一小部分，加上额外的实现定义的东西。这是一个*独立的环境*，并且（如您所料）用于在裸机（例如操作系统内核）上进行编程。

另一个更复杂的环境包括上述所有设施以及所有标准运行时库。那是一个*托管环境*，用于应用程序编程。

现在，一个*实现*只*需要*包括独立环境的设施。如果仅此而已，则称为*独立实现*。用于深度嵌入式微控制器的交叉编译器通常是独立的实现，因为许多标准 C 运行时没有意义或太大而无法容纳。

实施托管环境是可选的；如果实现提供了托管环境，则称为*托管实现*。托管实现*还*必须提供独立环境，即只有独立实现的功能可用的编译模式。（这种模式通常用于编译诸如 C 运行时本身之类的东西，其中大部分只是更多的 C。）

`main`最后， (`int main(void)`和`int main(int, char **)`)的标准签名是*托管*环境的一部分。独立环境也可以使用这些签名，但它也可以将签名定义为`main`它喜欢的任何内容（`void main(void)`很常见）或为入口点使用不同的名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T20:06:16.373

C11 4/6：

> 两种形式的一致性实现是托管的和独立的。符合要求的托管实现应接受任何严格符合要求的程序。符合标准的独立实现应接受任何严格符合标准的程序，其中库条款（第 7 条）中指定的功能的使用仅限于标准头文件的内容`<float.h>, <iso646.h>, <limits.h>, <stdalign.h>, <stdarg.h>, <stdbool.h>, <stddef.h>, <stdint.h>, and <stdnoreturn.h>`。

首先请注意，在 C 标准的上下文中，“实现”意味着“C 编译器的实现”，仅此而已。

正如您在问题中正确陈述的那样，独立实现是一个系统的编译器，该系统不打算在它下面有一个操作系统。换句话说，独立的实现编译器生成的程序要么是在“裸机”CPU 上运行的嵌入式应用程序，要么是本身就是操作系统的程序。托管实现是一种编译器，适用于在操作系统之上运行的应用程序。

独立应用程序的编译器只需要提供上述头文件。其余的头文件（例如 stdio.h）在标准的“第 7 条”中定义，但它们对于独立实现不是强制性的。

但是请注意，托管或独立实现都不是强制性的，例如复数库：C11 7.3.1：

> “定义宏 _ _STDC_NO_COMPLEX_ _ 的实现不需要提供这个头文件，也不需要支持它的任何工具。”

此外，独立和托管两种不同的执行环境允许 main() 使用不同的语法，更多信息可以在[这里](https://stackoverflow.com/questions/5296163/why-is-the-type-of-the-main-function-in-c-and-c-left-to-the-user-to-define/5296593#5296593)找到。程序员之间一个非常普遍的误解是 C 中唯一允许的形式是`int main()`，这仅在托管环境中是正确的。

例如，一个独立的程序可以从一个未复位的中断服务程序开始。从那里它可以调用一个`void main()`函数，或者它可以完全调用一些其他函数：它是实现定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:11:10.350

这意味着在启动时执行 main() 函数不需要独立的环境。例如，它可能正在寻找 _main() 代替（确切的名称和签名由实现定义）。

# sql - SQL历史表设计

> ID：13710103
> 
> 赞同：22
> 
> 时间：2012-12-04T19:05:44.063
> 
> 标签：sql, database, database-design

我需要设计一个历史表来跟踪编辑时在特定记录上更改的多个值。

**示例：**
向用户显示一个页面来编辑记录。

职务：先生
姓名：Joe
电话：555-1234
出生日期：1900-10-10

如果用户更改了这些值中的任何一个，我需要跟踪旧值并记录新值。

我想过使用这样的表格：

**历史**
---------------

id
modifiedUser
modifiedDate
tableName
recordId
oldValue
newValue

这样做的一个问题是每次编辑都会有多个条目。我正在考虑用另一张桌子对它们进行分组，但您仍然遇到同样的问题。

我也在考虑在历史表中保留该行的副本，但这似乎也没有效率。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T19:43:25.310

我建议对于您要跟踪历史记录的每个表，您有第二个具有相同格式的表（即 tblCustomer 和 tblCustomer_History） - 加上一个日期列。

每当进行编辑时，您都会将旧记录与日期/时间一起插入历史记录表。这很容易做到，只需要很少的代码更改（通常只是一个触发器）

这样做的好处是使您的“真实”表尽可能小，但可以为您提供所有更改的完整历史记录。

但是，最终取决于您希望如何*使用*这些数据。如果仅用于审计目的，则此方法很简单，除了额外的磁盘空间之外几乎没有缺点，并且对您的主系统影响很小或没有影响。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-04T19:26:53.190

您应该定义您感兴趣的效率类型：您可以具有存储空间效率，记录历史所需的工作效率（交易成本），或以特定方式查询记录历史的时间效率.

我注意到您在建议的历史表中有一个表名，这意味着打算记录多个表的历史，这将排除在您的历史表中存储记录的精确副本的选项，除非所有表您正在跟踪的将始终具有相同的结构。

如果您分别处理列，即每个历史记录只记录一个列值，则必须设计一种能够准确表示您将遇到的每个列值的多态数据类型。

如果存储空间的效率是您主要关心的问题，那么我会将历史记录分成多个表。这意味着将新的列值表链接到编辑事件表和列定义表。编辑事件表将记录用户和时间戳，列定义表将记录表、列和数据类型。正如@njk 所指出的，您不需要旧的列值，因为您始终可以查询以前的编辑以获取旧值。这种方法有望节省空间的主要原因是假设，一般来说，用户将编辑可用字段的一小部分。

如果查询效率是您主要关心的问题，我将为您正在跟踪的每个表设置一个历史表，并为每个历史表添加一个用户和时间戳字段。这在编辑的交易成本方面也应该是有效的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T19:06:56.170

您不需要在历史表中记录新旧值。只需记录最新的值、作者和日期。然后，您可以根据记录的日期获取一些最近`user_id`的记录。如果您要处理大量数据，这可能不是最好的方法。

**用户**（id，user_id，日期时间，作者，...）

样本数据

```
id user_id datetime author user_title user_name user_tele ...
1 1 2012-11-05 11:05 鲍勃
2 1 2012-11-07 14:54 蒂姆
3 1 2012-11-12 10:18 鲍勃
```

# windows-phone-7 - 简单的 MediaElement 类示例

> ID：13710111
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:15.060
> 
> 标签：windows-phone-7

我试图学习[MediaElement 类](http://msdn.microsoft.com/en-us/library/ms611595%28v=vs.95%29.aspx)..所以我找到了一个例子，但是当我运行它时它不起作用（视频不播放）......有人可以告诉我为什么吗？

屏幕：

![在此处输入图像描述](../Images/8dd2a0616abab0b9ac02c78f44529b24.png)

XAML：

```
<phone:PhoneApplicationPage 
x:Class="Player.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="339"/>
        <RowDefinition Height="429*"/>
    </Grid.RowDefinitions>

    <MediaElement Height="238" HorizontalAlignment="Left" Margin="12,12,0,0" 
                  Name="mediaElement1" VerticalAlignment="Top" Width="424" 
                  Source="/video/Wildlife.wmv" AutoPlay="True" />
    <Button Content="Play" Height="81" HorizontalAlignment="Left" Margin="12,258,0,0" 
            Name="PlayButton" VerticalAlignment="Top" Width="134" Click="PlayButton_Click" />
    <Button Content="Pause" Height="81" HorizontalAlignment="Left" Margin="152,258,0,0"
            Name="PauseButton" VerticalAlignment="Top" Width="124" Click="PauseButton_Click" />
    <Button Content="Stop" Height="81" HorizontalAlignment="Right" Margin="0,258,65,0" 
            Name="StopButton" VerticalAlignment="Top" Width="133" Click="StopButton_Click" />
</Grid> 
```

CS：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace Player
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void PlayButton_Click(object sender, RoutedEventArgs e)
        {
            mediaElement1.Play();
        }

        private void PauseButton_Click(object sender, RoutedEventArgs e)
        {
            mediaElement1.Pause();
        }

        private void StopButton_Click(object sender, RoutedEventArgs e)
        {
            mediaElement1.Stop();
        }
    }
} 
```

编辑：在@Igor Kulman 建议之后添加了两个事件......

```
private void mediaElement1_MediaOpened(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Opened");
    }

    private void mediaElement1_MediaFailed(object sender, ExceptionRoutedEventArgs e)
    {
        MessageBox.Show("Failed");
    } 
```

并且消息框在 3-5 秒延迟后返回`Failed`那么我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:11:45.010

您是否将 wmv 文件的构建操作设置为`Content`而不是`Resource`？如果是，请尝试连接到 MediaElement 的 MediaOpened 和 MediaFailed 事件，以查看文件是否已加载或失败（并查看预期以确定原因）

# c# - 如何公开类库引用的类库，然后将其作为项目引用包含在 Visual Studio 中？

> ID：13710117
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:37.307
> 
> 标签：c#, visual-studio-2010, api, reference, include

我正在开发我的第一个具有多个项目的 Visual Studio 2010 解决方案。我发现自己有一些项目参考混乱。

我正在尝试创建一个向客户端公开方法的 API 项目。这个 API 引用了一个包含我的业务模型的项目。我希望其他项目能够引用 API dll 并访问这些业务模型。目前，在我测试 API 的测试项目中，我必须分别引用 API 项目和业务模型项目。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:45:45.590

如果您想将 N 层模型合并到您的应用程序中，通过该模型业务模型仅暴露给单个层，您将不得不在 API 级别创建负责与业务层交互然后进行通信的方法和对象将此信息返回给您的测试或希望插入您的 API 的任何其他项目/人员。

如果您试图在您的业务模型和其他项目之间创建一个抽象级别，那么您肯定不想将您的业务模型逻辑直接暴露给所有内容。有点违背了目的。

[关于多层架构](http://en.wikipedia.org/wiki/Multitier_architecture)的Wikipedia 文章可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:52:05.853

> 目前，在我测试 API 的测试项目中，我必须分别引用 API 项目和业务模型项目

这是正常的，如果您的“API”项目从您的“业务模型”项目中公开类型，则需要同时引用两者。

# jquery - 如何基于 .each 增加 jQuery 值

> ID：13710119
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:48.530
> 
> 标签：jquery

我有一个片段：

```
 $(document).ready(function(){
    $('.imgtlist').each(function(index) {
        $('#slide_box').attr('width', + 135);
    });
}); 
```

本质上，在加载时，计算具有类的节点数`.imgtlist`并将 135 添加到`#slide_box`.

我是否需要为每个循环定义一个 var，然后根据 var 的数量增加`.imgtlist`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:09:55.017

尝试这个：

```
$("#slide_box").width($("#slide_box").width() + 135 * $(".imgtlist").length); 
```

这会将`#slide_box`' 的宽度增加 135 *`.imgtlist`元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:13:29.980

如果您将函数作为参数传递，它将获取旧的`width`作为参数。

```
$('#slide_box').width(function(i, width) {
    return width+ 135 * $(".imgtlist").length;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:10:56.163

这个片段应该在不遍历子元素的情况下完成它。

你也可以使用`width()`你父元素的方法，这样你就不用去搜索width属性了。

```
$(document).ready(function(){
  $('#slide_box').width($('.imgtlist').length * 135);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:11:58.793

不要认为你需要 each 语句。为什么不试试

```
var number = $('.imgtlist').length * 135;

$('#slide_box').attr('width', number); 
```

这将为您提供项目数量并将其乘以 135，这将是您在 eachstatement 中的数字。然后你只应用 attr 一次。

# c# - 整个 windows 屏幕变灰

> ID：13710121
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:53.230
> 
> 标签：c#, winforms

我目前正在开发一个 Windows 窗体应用程序（C# Visual Studio）。

*   按下按钮时是否可以使整个窗口屏幕变灰？
*   我怎样才能解决这个问题？
*   是否也可以将整个屏幕变灰，但在中间留一个非灰色空间用于显示一些文本的消息框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:20:20.757

回答您的问题：

*   按下按钮时是否可以使整个窗口屏幕变灰？ ***您可以在整个窗口上放置一个类似面板的控件并将其隐藏。然后在按钮事件中使其可见。将面板的背景设置为灰色并改变透明度以调整它，直到它下方的窗口可见性看起来正确。这将强制窗口进入“模式模式”，没有任何出路。因此，您最好也有撤消此操作的逻辑。***
*   我怎样才能解决这个问题？ ***确保您有一些事件，例如事件的完成或查询以隐藏控件，否则用户将永远不会再次回到您的应用程序。***
*   是否也可以将整个屏幕变灰，但在中间留一个非灰色空间用于显示一些文本的消息框？ ***这更复杂，老实说，我没有玩过 WinForm 已经有一段时间了——而是为桌面做 WPF。您可能可以使用剪辑，但您必须对如何使用进行大量研究。使用谷歌——它可以成为你最好的朋友。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T14:26:35.433

最简单的方法：使用 XAML 弹出窗口，如下所述

```
<Popup x:Name="pop" IsOpen="False" >

</Popup> 
```

有关更多详细信息，请访问以下链接。[http://www.c-sharpcorner.com/UploadFile/mahesh/using-xaml-popup-in-wpf/](http://www.c-sharpcorner.com/UploadFile/mahesh/using-xaml-popup-in-wpf/)

在此之后为显示弹出窗口的事件模糊事件处理程序上的主网格，设置不透明度，如下面的 C# 代码所示

```
if (pop.IsOpen == false)    
{    
pop.IsOpen = true;    
grdMain.Opacity = 0.4;    
}    
else    
{    
pop.isopen=false;    
} 
```

# asp.net - ASP.Net 页面模板和在渲染页面中使用 asp 标签

> ID：13710123
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:55.273
> 
> 标签：asp.net, templates, warnings

我想在 ASP.Net 中使用页面模板（Visual Studio 2012 with .Net 4.0）。

基本页面发出包含正文、html、表单和其他标记的基本模板。这意味着渲染的页面只有正文部分的内容。模板添加页眉和页脚。虽然我还没有完成设计，但我正在查看[此处](http://www.codeproject.com/Articles/2915/ASP-NET-Page-Templates-Using-Inheritance)记录的概念。（是的，我知道编码实践是不提供指向页面的链接，这可能会消失，但我不想绕开这个问题。）

每页的部分是：

```
<%@ Page language="c#" Codebehind="AdvancedPageInheritance.aspx.cs" AutoEventWireup="true" Inherits="PageInheritanceSample.AdvancedPageInheritance" %> 
```

第一行之后的任何内容都是身体的一部分。

如果我将控件拖放到表单上，VS2012 会发出如下代码：

```
<asp:CheckBox ID="CheckBox2" runat="server" OnCheckedChanged="CheckBox1_CheckedChanged" />
<asp:Button ID="Button2" runat="server" Text="Button" /> 
```

VS2012 自动发出警告“无法识别的标记前缀或设备过滤器‘asp’。”

一种想法是简单地以编程方式添加正文内容，但那是一个页面。我宁愿使用图形用户界面。

我怎样才能避免警告？有没有更好的方法来做模板？那位作者在 10 年前写了这篇文章，所以从那时起情况可能会发生变化。警告是可以理解的，但有错误，因为有一个表单、正文和 html 标签，只是不直接可见。

（我刚刚通过在 Vs2012 中捕捉到一个短语并对其进行了一些研究来回答我的问题。Master Pages 就是答案。显然，微软一定是在 VS2008 或 VS2010 中添加了这一点。我将离开这篇文章，因为其他人，比如我，可能不知道“母版页”的概念，可能会像我一样研究页面模板。我希望这篇文章能说明其他人的时间。谷歌应该希望能在 ASP.Net 和页面模板上有所作为。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:10:09.347

理想情况下，您将使用`MasterPage`来布置您的主模板。

然后，您的`Content`页面将具有适当的`<asp:Content />`控件，您可以在其中添加内容。要添加内容页，您需要在 Visual Studio 中添加一个新的“Web 窗体”项，并通过选中“选择母版页”复选框，您可以选择内容页应使用的母版页。

[有关母版页的教程，](http://www.asp.net/web-forms/tutorials/master-pages)请参见此处

然后，您将使用`BasePage`for 站点范围的代码；例如，大多数页面都需要逻辑的任何东西。您的`Content`页面将继承此`BasePage`

作为旁注，关于您的“无法识别的标签前缀或设备过滤器'asp'”，请参阅[VS2012](https://stackoverflow.com/questions/12809653/unrecognized-tag-prefix-or-device-filter-asp-in-vs2012)中的此页面无法识别的标签前缀或设备过滤器'asp'。信息

# php - Magento 随机致命错误

> ID：13710126
> 
> 赞同：0
> 
> 时间：2012-12-04T19:06:58.757
> 
> 标签：php, wordpress, magento, hosting, cpanel

我有一个基于农场的 VPS apache 服务器。

最近我遇到了内存限制错误，我决定通过在 PHP 配置的 WHM 面板中将其更改为 256MB 来增加内存限制的数量。在我按下“保存”按钮后，我的网站（以及我的服务器中的其他 wordpress 网站）到处都是随机致命错误和我网站上的 500 个内部服务器错误：http: [//amadeus-trade.ru](http://amadeus-trade.ru)

我可以登录后台，但是，当我尝试转到系统 - > 配置时，我收到此错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webmaster@amadeus-trade.ru 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误

当我尝试添加产品时，出现此错误：

> 致命错误：第 2423 行 /home/amadeus/public_html/app/code/core/Zend/Date.php 中的内存不足（分配 19922944）（试图分配 1245184 字节）

这个错误总是从一个文件跳到另一个文件，看起来像这个方案：

> 致命错误：第 xxxx 行 /home/amadeus/public_html/xxx/xxxx/xxx/xx/xx.php 中的内存不足（已分配 xxxxxxxx）（试图分配 xxxxxxx 字节）

现在，它是全新安装。到目前为止（直到 12 年 11 月 12 日）该网站运行良好，没有出现任何问题。

托管公司的团队说这是magento中的代码问题，但我肯定问题出在服务器上！我的 WHM 版本由团队在 01.11.12 更新到 v11.30

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:31:21.650

查看您的错误消息

```
Fatal error: Out of memory (allocated 19922944) (tried to allocate 1245184 bytes) 
in /home/amadeus/public_html/app/code/core/Zend/Date.php on line 2423 
```

PHP 告诉您它试图分配 1,245,184 字节的内存，但这超出了允许的限制。它还告诉您当前分配了 19,922,944 个字节。

1,245,184 字节是 1,216 千字节 (KB)，即 1.1875 兆字节 (MB)。

19,922,944 字节是 19,456 千字节 (KB)，大约是 19 兆字节 (MB)。

这意味着两件事之一。

*   PHP 认为它只允许分配大约 19 MB 的内存

*   运行 PHP 的操作系统内存不足

检查您的运行时`php.ini`设置以确保您的内存更改卡住（使用调用该`phpinfo`函数的单个页面来执行此操作）。另外，请确保它是`256M`，而不是`256MB`。后者将无法被 PHP 识别，并且会发生“奇怪的事情”（包括超低内存限制）。

也就是说，我的猜测是后者。当我的 PHP 版本超过`memory_limit`ini 中设置的限制时，我得到一个稍微不同的错误。

```
PHP Fatal error:  Allowed memory size of 262144 bytes exhausted (tried to allocate 10493952 bytes) 
```

PHP告诉我它的**允许**限制已被违反。你的错误

```
Fatal error: Out of memory 
```

说 PHP 在那个时间点实际上已经用尽了服务器可用的所有内存。

除此之外，您主机的响应表明缺乏 Magento 特定知识 - 任何能够运行该系统的主机都能够向您提供我刚刚所做的信息。我会首先询问他们单个 PHP 请求的最大内存限制是多少。最后，我会转向宣传 Magento 功能并因此享有盛誉的 VPS 主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:46:47.847

会不会是256M比原来设定的低了？正如您已经知道的那样，Magento 至少需要（得到这个）256mb 的内存，建议使用 512，对于更大的应用程序当然更多。

运行`phpinfo()`命令并查看`memory_limit`属性设置为什么。如果可以，请使用 your`.htaccess`将限制更改为更合理的水平：

```
php_value memory_limit 512M 
```

但是，我必须说，您的托管服务提供商很有可能会不赞成更改此设置（如果他们不允许您这样做`.htaccess`）。

# java - ConstraintViolationException：无法插入对象

> ID：13710127
> 
> 赞同：0
> 
> 时间：2012-12-04T19:07:02.540
> 
> 标签：java, orm

我正在实现一个银行应用程序，并且在我的数据库中有三个表（用户、帐户和帐户活动）：

![数据库模式片段](../Images/9d720dc0e24767c3039d4b862b11b85a.png)

`Account`和类的实现`AccountActivity`如下所示：

```
@MappedSuperclass public abstract class AbstractDomain implements Serializable {

    @Id @GeneratedValue
    private long id = NEW_ID;

    public static long NEW_ID = -1;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id; 
    }

    public boolean isNew() {

        return id==NEW_ID;
    }
}

@Table(name="ACCOUNT_ACTIVITY") 
@Entity
public class AccountActivity extends AbstractDomain {
    @Column(name="NAME")
    private String Name;

    @Column(name="XDATE")
    private Date Date;

    @Column(name="VALUE")
    private double Value;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="ACCOUNTID")
    private Account ACCOUNT;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="OTHERACCOUNTID")
    private Account OTHERACCOUNT;

    public String getName() {
        return Name;
    }

    // ...
} 
```

和：

```
@Table(name="ACCOUNT") 
@Entity
public class Account extends AbstractDomain {
    @Column(name="NAME")
    private String Name;

    @Column(name="XDATE")
    private Date Date;

    @Column(name="VALUE")
    private double Value;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="USERID")
    private User USER;

    @OneToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)
    private List<AccountActivity> AccountActivity = new ArrayList<AccountActivity>();

    // ...
} 
```

要将新帐户存储在我的数据库中，我使用以下命令：

```
public Account storeAccount(Account ac) {
    User x = ac.getUser();
    x = em.merge(x);
    ac = em.merge(ac);
    return ac;
} 
```

它可以将新帐户存储在我的数据库中。我想实现这样的功能，即当将帐户活动信息添加到已保存的帐户时，该帐户将被更新，并且使用以下代码将添加的信息（帐户活动）级联到 AccountActivity 表：

```
@OneToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)
private List<AccountActivity> AccountActivity = new ArrayList<AccountActivity>(); 
```

当我测试这段代码时，我得到了错误：

> java.sql.SQLException：违反完整性约束 - 没有父 FK670B7D019607336A 表：语句中的 ACCOUNT_ACTIVITY

有人可以帮我解决这个问题吗？

*更新*

我用这段junit代码进行测试：

```
public void testAddAccountActivities() {

    User user = dummyPersistedUser();
    User user2 = dummyPersistedUser();

    Account account = getTestUtils().dummyEmptyAccount(user);
    Account account2 = getTestUtils().dummyEmptyAccount(user2);

    account=accountManager.storeAccount(account);
    account2=accountManager.storeAccount(account2);

    getTestUtils().fillAccounts(account, account2);

    accountManager.storeAccount(account);
    accountManager.storeAccount(account2);

    assertEquals(2,accountManager.getAccount4Name(account.getName()).getAccountActivity().size());
    assertEquals(2,accountManager.getAccount4Name(account2.getName()).getAccountActivity().size());

} 
```

其中`fillAccounts(account, account2)`只插入一些应添加到图表中的 AccountActivities。：

```
AccountActivity aa = new AccountActivity();
    aa.setDate(new Date());
    aa.setName("test activity");
    aa.setAccount(a1);
    aa.setValue(value);
    aa.setOtherAccount(a2);
    account.addAccountActivity(aa) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:52:59.857

```
@OneToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)
@JoinColumn(name ="accountid") // you have several references from AccountActivity to Account. You need to specify the join column in this case.
private List<AccountActivity> AccountActivity = new ArrayList<AccountActivity>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T19:21:26.683

作为第一个观察，我认为您不应该将变量名称与类相同。因此，您可以编写私有列表 <AccountActivity> accountActivity 之类的东西，而不是这个私有列表 <AccountActivity> AccountActivity。

# javascript - Jquery用淡出和淡入效果替换身体背景图像

> ID：13710128
> 
> 赞同：3
> 
> 时间：2012-12-04T19:07:12.323
> 
> 标签：javascript, jquery, fadeout

我只想用淡入淡出改变身体的背景图像，并用淡入淡出替换第二个图像。
但我收到以下错误：

```
Uncaught TypeError: Object url(file:///C:/Users/.../p1bg_cutted.png) has no method 'fadeOut' 
```

```
 $('body').css("background-image").fadeOut('slow',function(){
    $("body").css("background-image",
    "url(Images/son_componentler/p2bg_cutted.png)").fadeIn('slow')

 }); 
```

我可以在没有淡入/淡出的情况下更改图像，但我想在这种情况下我犯了一个语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:12:51.163

您的代码失败，因为`$('body').css("background-image")`返回一个字符串——CSS 背景图像属性的值；不是 jQuery 对象。

其次，您的代码将淡入/淡出整个正文。背景图像本身不能褪色。

我建议您使用`img`定位在内容后面并将其淡化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:29:57.577

而不是淡出身体然后淡入。您可以通过淡入覆盖整个屏幕的遮罩 div 来获得完全相同的效果，更改身体的背景图像，然后淡出遮罩 div。像这样的东西：

**HTML** - 在 HTML 中的任何位置添加此行

```
<div id="mask" style="position: absolute; top: 0; left: 0; background: black; display: none;"​​​​​​​​​​​​​​​​​​​​​​&gt;</div>​ 
```

**JavaScript**

```
$('#mask').css({height: $(window).height(), width: $(window).width()})
          .fadeIn('slow', function(){
              $('body').css('background-image', 'url(Images/son_componentler/p2bg_cutted.png)');
              $('#mask').fadeOut('slow');
          });​​​​​ 
```

[**在此处查看一个工作示例**](http://jsfiddle.net/2kFdj/)

* * *

**更新**

在我的一个项目中，我想将所有内容都淡化为黑色，然后用我原始代码所做的不同图像返回。如果您想保持内容可见，则无需进行太多更改。只需在背景中有一个 div 与您的图像。然后仅在您的背景图像上应用遮罩技术。

**HTML**

```
<div id="img" style="position: absolute; z-index: -99; top: 0; left: 0;"></div>
<div id="mask" style="position: absolute; z-index: -98; top: 0; left: 0; background: white; display: none;"></div> 
```

**JavaScript**

```
$('#mask').css({height: $(window).height(), width: $(window).width()})
          .fadeIn('slow', function(){
              $('#img').css('background-image', 'url(http://www.jsfiddle.net/img/logo.png)');
              $('#mask').fadeOut('slow');
          }); 
```

[**在此处查看一个工作示例**](http://jsfiddle.net/2kFdj/2/)

# c# - 在 MVC4 中显示和错误，我必须实现一些接口，但我已经完成了

> ID：13710131
> 
> 赞同：11
> 
> 时间：2012-12-04T19:07:25.980
> 
> 标签：c#, asp.net-mvc, inheritance, multilingual, interface-implementation

我正在尝试创建自己的过滤器属性以支持多语言。这个想法很简单。URL 代表语言。

*   *http://host.ext/ **en** /rest_of_the_url* 将以英文打开，并且
*   *http://host.ext/ **hy** /rest_of_the_url* 将以亚美尼亚语打开。

问题是在运行时它说 MultilingualActionFilterAttribute

这是错误文本“给定的过滤器实例必须实现以下一个或多个过滤器接口：IAuthorizationFilter、IActionFilter、IResultFilter、IExceptionFilter。”

在这里，我将其用作全局过滤器。

```
namespace TIKSN.STOZE.WebApp
{
    public class FilterConfig
    {
        public static void RegisterGlobalFilters(System.Web.Mvc.GlobalFilterCollection filters)
        {
            filters.Add(new TIKSN.STOZE.Common.MultilingualActionFilterAttribute());
            filters.Add(new System.Web.Mvc.HandleErrorAttribute());
        }
    }
} 
```

我在这里定义它。

```
namespace TIKSN.STOZE.Common
{
    public class MultilingualActionFilterAttribute : System.Web.Mvc.ActionFilterAttribute
    {
        public override void OnActionExecuting(System.Web.Mvc.ActionExecutingContext filterContext)
        {
            string language = System.Convert.ToString(filterContext.RouteData.Values["language"]);

            System.Diagnostics.Debug.Print("Requested language is '{0}'", language);
            language = Helper.PickUpSupportedLanguage(language);
            System.Diagnostics.Debug.Print("Supported language is '{0}'", language);

            if (language == string.Empty)
            {
                filterContext.HttpContext.Response.RedirectToRoutePermanent(new { language = Common.Properties.Settings.Default.DefaultLanguageCode });
            }

            language = Helper.TryToPickUpSupportedLanguage(language);

            System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture(language);
            System.Threading.Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.GetCultureInfo(language);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-04T19:31:14.170

如果您使用的是 web api，那么问题可能是因为实现了错误的接口，正如在命名空间和命名空间`IActionFilter`中定义的那样。`System.Web.Http.Filters``System.Web.Mvc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-22T16:36:37.213

问题是我更新到 MVC 5，所以我也必须更新*web.config*文件。看[这里](http://www.asp.net/mvc/tutorials/mvc-5/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-13T11:34:50.887

这个有效：

请将您的过滤器添加到 webApiconfig 而不是过滤器配置文件。

来自 A. Murray：

[https://stackoverflow.com/a/32518692/4853768](https://stackoverflow.com/a/32518692/4853768)

# java - Android 资源转为 Raw

> ID：13710143
> 
> 赞同：0
> 
> 时间：2012-12-04T19:08:05.683
> 
> 标签：java, android

我正在尝试本地化我的应用程序，以便它同时显示西班牙语和英语。我已经解决了大部分本地化问题，但有一个例外。我有一个 .xml 文件，其中列出了我想移动到 res/raw 文件夹的应用程序问题，以便我可以添加语言环境并让应用程序翻译。

在大多数情况下，这很容易，因为我已经能够使用 (getResources().getString(R.string."") 从 /res 调用大多数字符串但是我在为当前参数进行此调用时遇到了困难。

我的 xml 位于 res/raw/"".xml

我现在正在使用资产管理器来获取问题的 .xml

```
 public static List<Question> readQuestions(AssetManager assetManager){

    ArrayList<Question> questionArrayList = new ArrayList<Question>();
    try{
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(assetManager.open("questions.xml"));
        doc.getDocumentElement().normalize();
        NodeList nodeLst = doc.getElementsByTagName("question");
        for(int s=0; s<nodeLst.getLength(); s++){ 
```

有人知道我可以调用原始文件夹以获取.xml吗？

编辑：：：

我正在尝试将代码用于输入流，但在上下文中出现错误，提示无法解析符号“上下文”

```
 public static List<Question> readQuestions(AssetManager assetManager){

    ArrayList<Question> questionArrayList = new ArrayList<Question>();
    try{
        InputStream in = context.getResources().openRawResource(R.raw.questions);
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();

        Document doc = builder.parse(in);

        NodeList nodeLst = doc.getElementsByTagName("question"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:22:32.770

获取 res/raw/questions.xml 的 InputStream

```
InputStream in = context.getResources().openRawResource(R.raw.questions); 
```

这个答案假设你有一个上下文。如果您不熟悉在 Android 中获取和使用 Context，我强烈建议您花时间真正理解它。否则，您在 Android 编程中不会走得太远。

StackOverflow 上有很多答案已经在讨论上下文。这是一个[什么是Android上的“上下文”？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

# postgresql - 原子计数器 Postgres vs MongoDB

> ID：13710149
> 
> 赞同：1
> 
> 时间：2012-12-04T19:08:29.453
> 
> 标签：postgresql, mongodb

我正在构建一个非常大的计数器系统。需要明确的是，系统正在计算域在数据流中出现的次数（大小约为 50 到 1 亿个元素）。

系统将单独处理每个元素并发出数据库请求以增加该域的计数器及其处理日期。这是结构：

```
stats_table (or collection)
-----------
id
domain (string)
date   (date, YYYY-MM-DD)
count  (integer) 
```

我最初的想法是使用 MongoDB，因为它们具有原子计数器功能。然而，当我想得更多时，我认为 Postgres 更新已经自动发生（至少这是[这个问题](https://stackoverflow.com/questions/3821468/sql-atomic-increment-and-locking-strategies-is-this-safe)让我相信的）。

我的问题是：在这里使用一个数据库比另一个数据库有什么好处吗？假设我每天要处理大约 500 万个域，我需要在这里考虑哪些关键事项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:25:57.130

Postgres 中的所有单个操作都自动包装在事务中，并且 MongoDB 中单个文档的所有操作都是原子的。在这种情况下，原子性并不是优先选择一个数据库而不是另一个数据库的真正理由。

虽然单个计数可能会变得相当高，但如果您只存储聚合计数而不是计数的每个实例，那么记录的总数应该不会太大。即使您正在跟踪数百万个域，Mongo 或 Postgres 也同样可以正常工作。

MongoDB 是记录事件的一个很好的解决方案，但如果你想对正在收集的分析数据进行大量有趣的关系分析，我发现 Postgres 更可取。为了在 Mongo 中有效地做到这一点，通常需要高度的非规范化，所以我会更多地考虑你计划在未来如何使用这些数据。

# android - 尝试调用 wcf Web 服务时出现 XMLPullParserException

> ID：13710155
> 
> 赞同：0
> 
> 时间：2012-12-04T19:09:01.923
> 
> 标签：android, wcf, ksoap2, xmlpullparser

我在连接到我的 Web 服务时遇到问题。我遵循了一些教程，尤其是[http://drclawx.wordpress.com/2011/06/24/77/](http://drclawx.wordpress.com/2011/06/24/77/)并创建了一个简单的 Wcf Hello World Web 服务。我已经下载了网站上推荐的 ksoap2 jar，但我遇到了一些问题。我已经下载了几个更高的版本，但我可以开始工作的是 2.5.8 版。当我调用自己的 Web 服务时，我得到了 XMLPullParserException。我的 Web 服务将用于检查登录凭据，它有一个名为“UploadLogin”的方法，它接受用户名和密码。以下是我的代码

```
private class webService extends AsyncTask<String, Void, Void> {

    final String METHOD_NAME = "UploadLogin";
    final String NAMESPACE = "http://tempuri.org/";     
    final String URL = "http://10.0.2.2:52762/UploadService.svc";
    final String SOAP_ACTION = "http://tempuri.org/IUploadService/UploadLogin";

    // For the web service method: public String getLocations(String inputLocation))
    @Override
    protected Void doInBackground(String... entry) {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("username", "a");
        request.addProperty("password", "a");
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);

            Object response = (Object) envelope.getResponse();
            System.out.println("Login - " + response.toString());
        } 
        catch (Exception exception) {
            exception.printStackTrace();   
        }

        return null;
    } 
} 
```

我得到的错误如下。有人可以帮助或建议我如何解决这个问题。

```
12-04 18:50:44.317: W/System.err(1704): org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT 
12-04 18:50:44.317: W/System.err(1704): --uuid:e537e5f2...@3:13 in java.io.InputStreamReader@41325c88) 
12-04 18:50:44.326: W/System.err(1704):     at org.kxml2.io.KXmlParser.next(KXmlParser.java:426)
12-04 18:50:44.336: W/System.err(1704):     at org.kxml2.io.KXmlParser.next(KXmlParser.java:310)
12-04 18:50:44.336: W/System.err(1704):     at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:2029)
12-04 18:50:44.346: W/System.err(1704):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
12-04 18:50:44.356: W/System.err(1704):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:96)
12-04 18:50:44.356: W/System.err(1704):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:189)
12-04 18:50:44.366: W/System.err(1704):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
12-04 18:50:44.376: W/System.err(1704):     at prometric.myitemwriter.ViewItemBankActivity$ws_MIR.doInBackground(ViewItemBankActivity.java:538)
12-04 18:50:44.376: W/System.err(1704):     at prometric.myitemwriter.ViewItemBankActivity$ws_MIR.doInBackground(ViewItemBankActivity.java:1)
12-04 18:50:44.396: W/System.err(1704):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-04 18:50:44.426: W/System.err(1704):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-04 18:50:44.436: W/System.err(1704):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-04 18:50:44.516: W/System.err(1704):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-04 18:50:44.516: W/System.err(1704):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-04 18:50:44.526: W/System.err(1704):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-04 18:50:44.536: W/System.err(1704):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T06:53:38.100

```
Instead of using kSOAP library, you can do it with built-in apache classes like HttpClient, HttpGet, HttpPost, etc.

For example: You want to send below JSON object:

{
   "email":"test@test.com",
   "password":"test"
}
then you can set your request object by using setEntity():

final String body = String.format("{\"email\":\"%s\",\"password\":\"%s\"}", s1, s2);

HttpClient client = new DefaultHttpClient();
HttpPost postMethod = new HttpPost(webServiceUrl);
postMethod.setEntity(new StringEntity(body, "utf-8")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:48:00.983

对于任何感兴趣的人，我收到此错误的原因是因为 messageEncoding 使用的是 MTOM，所以我将其更改为 Text 并且它可以工作 - messageEncoding="Text"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-12T19:04:05.030

在我的情况下，由于缺少所需的方法参数而发生错误：

```
 request.addProperty("cpf", "111111111"); 
```

# c++ - wchar_t 是否保证与任何整数类型不同？

> ID：13710157
> 
> 赞同：5
> 
> 时间：2012-12-04T19:09:04.373
> 
> 标签：c++, c++11, wchar-t

在我的系统上， wchar_t 和 int 是具有相同属性的不同类型：

```
#include <type_traits>
sizeof(wchar_t) == sizeof(int) == 4
std::is_signed<wchar_t> == std::is_signed<int> == std::true_type
std::is_same<wchar_t, int> == std::false_type 
```

相反，`ptrdiff_t`and`long int`是相同的类型（相同的属性，并且`is_same`为真）。

这种独特性是否`wchar_t`得到保证？在所有系统上`wchar_t`过载是否安全？`int`除了 int 之外，是否有任何属性可以区分`wchar_t`和相应的 int 属性`is_same`？

（系统信息：我对一般情况感兴趣，但到目前为止我的测试是在运行 g++ 4.8.0 和 Apple clang++ 4.1 的 OS X 机器上进行的，两者都使用 -std=c++11。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T19:11:34.470

是的，`wchar_t`保证是一个独特的类型（§3.9.1/5）：

> Type`wchar_t`是一种独特的类型，其值可以表示支持的语言环境 (22.3.1) 中指定的最大扩展字符集的所有成员的不同代码。

所以是的，在所有系统上过载都是安全`wchar_t`的`int`。

但是，`wchar_t`也保证与另一个整数类型（即其*基础类型*）具有相同的大小、符号和对齐要求。这不一定`int`，但在你的情况下似乎是。这`wchar_t`可能是使用其中一种整数类型实现的，但就您而言，它们被视为完全不同的类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T19:12:44.457

是的，对于 C++11，wchar_t 是它自己的类型，与其他类型不同，但正如您所观察到的，它也将具有与其他类型相同的范围、符号等（§3.9.1/3 ):

> wchar_t 类型是一种不同类型，其值可以表示支持的语言环境 (22.3.1) 中指定的最大扩展字符集的所有成员的不同代码。wchar_t 类型应具有与称为其基础类型的其他整数类型之一相同的大小、符号和对齐要求 (3.11)。

# java - Google App Engine 拆分前端和后端

> ID：13710162
> 
> 赞同：0
> 
> 时间：2012-12-04T19:09:15.857
> 
> 标签：java, google-app-engine, maven-gae-plugin

根据 Google App Engine 的形状，我的应用可能需要很长时间才能启动：

`Caused by: com.google.apphosting.api.DeadlineExceededException: This request (d872b776bcbbfd27) started at 2012/12/04 17:35:28.861 UTC and was still executing at 2012/12/04 17:36:28.348 UTC`

该应用程序包含一个前端和各种后端，整个应用程序似乎每个实例都启动一次，而且许多过滤器、安全性等无论如何都不会在后端使用。

是否可以拆分应用程序并分别部署前端和后端？我将如何在我的开发服务器上运行这个基于 maven 的应用程序？

只有模糊的文档 - 我可以在 Google App Engine 文档中找到最接近的文档：
[https ://developers.google.com/appengine/docs/java/backends/overview](https://developers.google.com/appengine/docs/java/backends/overview)
`You can place your backends in a separate application root directory if you want to avoid sharing code or handlers, ...`

关于开发环境，`net.kindleit.maven-gae-plugin`它的配置参数`backend`和/或`backendDir`.

有人可以提供更多关于是否/如何实现这一点的详细信息吗？

谢谢，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:42:23.687

您可以上传应用的多个版本。每个版本都可以完全独立于另一个版本，尽管所有版本共享相同的数据存储。例如，您通常不能在一个运行时中混合使用 Java/Python/Go。但是，您可以在 Python 中拥有一个版本，而在 Java 中拥有另一个版本。

您的默认版本可在 .appspot.com 上访问。您的其他版本可在 ..appspot.com 访问

你需要做的是：

```
1\. clone your current app
2\. change the version for your lean version
3\. deploy lean version
4\. modify the main version to access backends at <instance>.<backend-name>.<lean-version>.<appid>.appspot.com
5\. deploy main version 
```

不过，管理共享源可能是另一个问题，您可能希望使用软链接。

# c# - 使用 C# 驱动程序更新由父级和嵌套 Id 过滤的 mongo 文档

> ID：13710163
> 
> 赞同：1
> 
> 时间：2012-12-04T19:09:16.257
> 
> 标签：c#, mongodb

首先，对不起我的英语；）

我有下一个类代表一个可以拥有许多电子邮件帐户的人，并且每个帐户都有其各自的电子邮件

```
public class Person
{
    public string Id { get; set; }
    public string Name { get; set; }
    public EmailAccount[] Accounts { get; set; }
}

public class EmailAccount
{
    public string Id { get; set; }
    public string Name { get; set; }
    public Message[] Messages { get; set; }
}

public class Message
{
    public string Date { get; set; }
    public string Content { get; set; }
} 
```

我需要替换特定电子邮件帐户的消息，但我需要先按人员 ID 和帐户 ID 进行选择，如何使用 Mongodb c# 驱动程序执行此操作，我做了这样的事情但没有成功：

```
var collection = _mongoDatabase.GetCollection<Person>("Person");
var query = Query.EQ("Person._id", "20");

var bsonMessages = BsonDocumentWrapper.CreateMultiple(new[]
{
    new Message(DateTime.Now.ToString(CultureInfo.InvariantCulture), "Test 55"),
    new Message(DateTime.Now.ToString(CultureInfo.InvariantCulture), "Test 66")
});

var messageArray = new BsonArray(bsonMessages);

var update = Update.Set("Accounts.$.Messages", messageArray);
collection.Update(query, update, UpdateFlags.Upsert); 
```

如您所见，我按其 ID 过滤此人，但我不知道如何添加第二个过滤器以按其 ID 选择一个帐户

我很感激任何帮助；）

# android - 路径重叠

> ID：13710165
> 
> 赞同：1
> 
> 时间：2012-12-04T19:09:25.797
> 
> 标签：android, 2d, android-canvas

我正在制作一个应用程序来绘制您遵循 GPS 的路径，因为需要画线宽（用 40 笔画绘制），而不是典型的细线，问题是我需要在同一个站点上花费 2 倍或以某种方式与另一条路径重叠。起初，他使用线条（canvas.drawline）连接点并划出 setAlpha 半透明线，您可以判断线条何时重叠，但在 GPS 数据线上如此粗壮的数据线不会被视为连续体，我已经使用 Path 解决了，但是我失去了让它们仍然使用拨号 setAlpha 重叠的能力，有一些属性或 Paint Path 让我逃脱了吗？

# iphone - 无法提供账户进行测试时，如何将需要登录的应用提交到 AppStore？

> ID：13710166
> 
> 赞同：0
> 
> 时间：2012-12-04T19:09:37.293
> 
> 标签：iphone, ios, app-store

我知道在提交应用程序以供审核时，需要一个可以完全访问所有功能的帐户。我的应用程序的用户实际上是大学教师和学生。实际上这个应用程序只是我为 iPhone 用户开发的第三方应用程序，因为我大学的原始网站和官方网站运行非常糟糕，有时甚至在 Safari 上失败。显然我无权访问数据库来创建测试帐户。另外，认证服务器只对我校内的用户开放（服务器的IP地址是本地网络的虚拟地址。）即使我提供了我自己的帐户，他们仍然无法登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:11:27.823

你不能。如果他们无法登录，Apple 将不会审查需要登录的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:36:20.940

构建与应用程序交互的测试服务器与真实客户端服务器完全相同，除了在客户端安全网络之外可见（并且仅包含虚拟数据集，没有实际的私有或专有数据），在其上创建测试帐户，测试你的应用程序反对，然后使用测试服务器上的工作测试帐户将应用程序提交给 Apple。

# google-maps-api-3 - 将 containsLocation 与 Fusiontable 点图层和绘制的多边形一起使用

> ID：13710167
> 
> 赞同：0
> 
> 时间：2012-12-04T19:09:38.503
> 
> 标签：google-maps-api-3

我希望能够从 fusiontable 图层中选择所有点，这些点位于 google maps api 3 中绘制的多边形内。

我知道在 Google Maps API v3 中有几何库中的 containsLocation 方法，但我不知道如何从 fusiontable 图层中提取纬度/经度并制作一个循环来扫描图层中的所有标记。

如果您能提供帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:45:16.343

[您可以使用FusionTables API v1](https://developers.google.com/fusiontables/docs/v1/getting_started)从 FusionTable 中提取数据。

[从 FusionTable 中提取 kml“点”并将其显示为标记的示例](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=14.620282&lng=-90.504716&zoom=12&type=m&tablequery=SELECT%20%20geometry,%20name,%20description%20FROM&tableid=1npi-QWwoZ6LP_9wwHiwiG2omzMm6R9Qoj5aMjkM)

# mysql - 密钥规范中使用的 BLOB/TEXT 列 'bestilling' 没有密钥长度

> ID：13710170
> 
> 赞同：11
> 
> 时间：2012-12-04T19:09:46.413
> 
> 标签：mysql, text, key, longtext

我正在尝试建立一个订单系统，但我现在被卡住了。现在在 mysql 表中，我在名为“bestillinger”的列中使用 varchar(255)，但它只能存储 255 个字符。所以我搜索了一下，并记得我可以使用长文本或只使用文本，但现在当我尝试这样做时，我收到一条错误消息：

```
#1170 - BLOB/TEXT column 'bestilling' used in key specification without a key length 
```

我曾尝试在这里和谷歌搜索，但没有运气。

我的 MySQL 表是：

```
CREATE TABLE IF NOT EXISTS `bestillinger` (
  `id` int(11) NOT NULL,
  `bestilling` TEXT NOT NULL PRIMARY KEY,
  `accepted` varchar(255) DEFAULT NULL,
  UNIQUE KEY `id_bestilling` (`id`,`bestilling`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我使用 UNIQUE KEY 因为我在我的 PHP 部分中使用“ON DUPLICATE KEY UPDATE”。但不要介意。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T19:24:00.790

您不能将文本设置为主键。Mysql 只能索引一些字符，并且键入的文本可能太大而无法索引。

看看这里：

*   [http://www.mydigitallife.info/mysql-error-1170-42000-blobtext-column-used-in-key-specification-without-a-key-length/](http://www.mydigitallife.info/mysql-error-1170-42000-blobtext-column-used-in-key-specification-without-a-key-length/)

*   [MySQL错误：没有密钥长度的密钥规范](https://stackoverflow.com/questions/1827063/mysql-error-key-specification-without-a-key-length)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T22:08:03.733

根据您上面的定义，以及下面这个答案中的冗长独白，我建议进行以下修订：

```
CREATE TABLE IF NOT EXISTS `bestillinger` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `bestilling` TEXT NOT NULL,
  `hashcode` CHAR(32) AS (MD5(bestilling)),  
  `accepted` VARCHAR(255) DEFAULT NULL,
  UNIQUE KEY `id_bestilling` (hashcode,bestilling(333))
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

[特定于 MySQL](http://dev.mysql.com/doc/refman/5.7/en/create-index.html)，单列索引键的默认最大长度为**1000 字节**（[InnoDB 表为 767 字节](http://dev.mysql.com/doc/refman/5.7/en/column-indexes.html)，除非您设置了 innodb_large_prefix ）。相同的长度限制适用于任何索引键前缀（CHAR、VARCHAR、TEXT 的前 N ​​个字符或 BINARY、VARBINARY、BLOB 的前 N ​​个字节）。注意字符与字节的区别；假设一个 UTF-8 字符集和每个字符最多 3 个字节，您可能会在 TEXT 或 VARCHAR 列上使用超过**333 个字符的列前缀索引来达到此限制。**在实践中，333 对我来说往往是一个很好的最大值。

[同样，在 SQL Server](https://technet.microsoft.com/en-us/library/ms191241(v=sql.105).aspx)中，所有索引键列的最大总大小限制为 900 字节。

但这仅使用 TEXT 的第一个字符作为密钥，显然即将发生冲突。

在接受的答案中，建议是使用[FULLTEXT index](http://dev.mysql.com/doc/refman/5.7/en/fulltext-search.html)。FULLTEXT 索引是专门为文本搜索而设计的，它对 INSERT/DELETE 的性能不太好，因为它在列记录的词汇表上维护一个 N-gram 并存储结果向量。如果每个操作都在 where 子句中使用文本搜索功能，这将起作用……但不适用于唯一索引。在“id”上还定义了一个主键和一个唯一键，这似乎是多余的，或者我错过了意图。

相反，我建议使用计算哈希。您正确地指出有可能（生日悖论）会与哈希发生冲突，因此仅 UNIQUE 索引是不够的。如上所述，我们将把它与列前缀索引结合起来，让我们相信唯一性。

我收集您的 ID 列的目的是允许从其他表中正确引用外键。完全正确，但那将是该表更有用的主键。同样， int(11) 指的是列的显示宽度，而不是基础值。我也在 'id' 上放了一个未签名的 auto_increment，以阐明它对更多受众的作用。

这将我们带到了上面提出的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T10:59:43.033

用这个

```
CREATE TABLE IF NOT EXISTS `bestillinger` (
  `id` int(11) NOT NULL,
  `bestilling` TEXT NOT NULL PRIMARY KEY,
  `accepted` varchar(255) DEFAULT NULL,
  UNIQUE KEY `id_bestilling` (`id`,`bestilling`(767))
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

**767**是 mysql 在处理 blob/文本索引时的限制

参考：[http ://dev.mysql.com/doc/refman/5.7/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.7/en/innodb-restrictions.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-07T12:24:22.933

我认为下面的例子将最好地解释这个问题。

我遇到了问题，因为我试图将文本字段设置为 UNIQUE。我通过将电子邮件（TEXT）的数据类型更改为电子邮件（VARCHAR（254））解决了这个问题。

```
mysql> desc users;
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| id          | int(11)     | NO   | PRI | NULL    | auto_increment |
| fname       | varchar(50) | NO   |     | NULL    |                |
| lname       | varchar(50) | NO   |     | NULL    |                |
| uname       | varchar(20) | NO   |     | NULL    |                |
| email       | text        | NO   |     | NULL    |                |
| contact     | bigint(12)  | NO   |     | NULL    |                |
| profile_pic | text        | NO   |     | NULL    |                |
| password    | varchar(20) | NO   |     | admin   |                |
+-------------+-------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> ALTER TABLE users ADD UNIQUE(email);
ERROR 1170 (42000): BLOB/TEXT column 'email' used in key specification without a key length
mysql> 
mysql> ALTER  TABLE users MODIFY email VARCHAR(254);
Query OK, 9 rows affected (0.02 sec)
Records: 9  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE users ADD UNIQUE(email);
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc users;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| fname       | varchar(50)  | NO   |     | NULL    |                |
| lname       | varchar(50)  | NO   |     | NULL    |                |
| uname       | varchar(20)  | NO   |     | NULL    |                |
| email       | varchar(254) | YES  | UNI | NULL    |                |
| contact     | bigint(12)   | NO   |     | NULL    |                |
| profile_pic | text         | NO   |     | NULL    |                |
| password    | varchar(20)  | NO   |     | admin   |                |
+-------------+--------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-10T17:55:40.977

![截屏](../Images/607450c21a89de9f5da184c3e68f211c.png)

尝试使用***varchar中的所有******列***长度。由于大小，不应允许使用文本。

# codeigniter - 调用 codeigniters 控制器功能不起作用

> ID：13710174
> 
> 赞同：0
> 
> 时间：2012-12-04T19:09:57.130
> 
> 标签：codeigniter, jquery

我正在使用 $.post() 从视图中调用控制器函数（尽管我知道它的不好做法），并且在该函数中我正在加载视图并且它不起作用。

这是 HTML 代码：`<li id='files' class="active" >My Files</a></li>`

这是 JS 代码：

```
$("#files").click(function()
        {
        alert('hi2');  //just for checking

        var loadUrl = "/Fast-Docs/index.php/Docs/updatefiles";

        $.post(  
            loadUrl,  
            {un:"<?php echo $username?>"});  
        }); 
```

这是控制器中的功能：

```
public function updatefiles()
{
    $this->load->model('DocsModel');
    $un=$this->input->post('un');
    $files=$this->DocsModel->getAllFiles($un);  
    $data['files']=$files;
    $this->load->view('files',$data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:37:29.873

您需要在 ajax 调用之后实际显示您的代码，即

```
$.post(  
    loadUrl,  
    {un:"<?php echo $username?>"}  
}); 
```

变成

```
$.post(  
    loadUrl,  
    {un:"<?php echo $username?>"},
    function(data) {

        $("#yourDiv").html(data);
    }
}); 
```

# installation - 最终安装文件夹调试

> ID：13710179
> 
> 赞同：0
> 
> 时间：2012-12-04T19:10:23.833
> 
> 标签：installation, environment

当我安装我的成品时，它运行良好，直到最后一个操作完成（一个“保存”工作的按钮）。

程序弹出这个错误：

> 您的应用程序中发生了未处理的异常。如果您单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将关闭。
> 
> 找不到路径的一部分 'C:\Program Files (x86)\ATR\Save A Job\obj\Release\42\ATR\BackupProgram\Backup.xml

出于某种原因，程序在错误的位置寻找`backup.xml`文件。（以及看似添加的文件夹）

我在程序中调用`backup.xml`文件的方式是：

```
(System.Environment.SpecialFolder.ProgramFile sX86 & "\ATR\Save A Job\Backup.xml") 
```

这可能是错误的方式，但对我来说很有意义。
我假设文件位置的完整路径如下：

```
C:\Program Files (x86)\ATR\Save A Job\backup.xml 
```

但是，它在错误的地方寻找它（从错误中可以明显看出）

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:35:35.623

搞定了伙计们。这是安装文件夹的权限。我的用户设置为“仅读/写”...一旦我将其切换到完全控制，一切正常

# java - Java - 将文本文件读入数据库

> ID：13710180
> 
> 赞同：0
> 
> 时间：2012-12-04T19:10:31.530
> 
> 标签：java, jdbc, file-io

我有一个列出一堆教科书的文本文件（它是一个 8mb 的 .txt 文件！！）我应该编写脚本来读取文件并将信息写入我们设置的数据库。每本书都是数据库中的一行。文本文件如下所示：

Book_Title：这里的一些标题
ISBN：一些 ISBN

...................
Book_Title：标题
（等等......）

每本书由句点分隔，“键：值”对是冒号前的数据库列名和冒号后要存储的值。我应该如何阅读信息？我尝试使用扫描仪并说分隔符是“：”，但是有一个字段“Updated_On：... at 10:30:28”..还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:06:29.903

我希望下面的伪代码足够简单。8Mb 并不多，所以这一切都可以在内存中完成。

1.  将文件读入字符串
2.  拆分记录分隔符上的字符串，在您的情况下是“........”。
3.  遍历记录数组，在“\n”上拆分记录数组中的每个元素，这将为记录数组中的每个元素生成连接的名称/值对数组。
4.  遍历连接的名称/值对的数组并拆分每个“：”，这将生成名称和值的分隔数组。

它会占用大量内存，例如 O(3N)，但是对于几个 gigs 下的文件，它应该可以很好地工作。

要将文件读入字符串，您可以使用 Apache Commons、FileUtils。 [FileUtils JavaDoc](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/FileUtils.html)

# perl - Perl 脚本在子程序中调用子程序？

> ID：13710181
> 
> 赞同：0
> 
> 时间：2012-12-04T19:10:34.930
> 
> 标签：perl, formatting, output

嗨所以我创建了以下脚本用于输出到 wiki 页面。问题是我不确定如何格式化我的输出。这是我的代码：

```
 #!/usr/bin/perl
use strict;
use warnings;
use POSIX qw/strftime/;
#use warnings;
my $TOTALIOS = 'totalios';
my $READP = 'readpe';
my $CACHEP = 'cachehit';
my $CKBSEC = 'currentkb';
my $MKBSEC = 'maximumkb';
my $CIOSEC = 'currentio';
my $MIOSEC = 'maxio';
my $DATESTORE = 'dates.sec';
my $DATECMD = strftime "%m/%d/%y", localtime;
my $TIOS = 'Tios';
my $READp = 'readp';
my $CACHEp = 'cachep';
my $CKBsec = 'ckbsec';
my $MKBsec = 'mkbsec';
my $CIOsec = 'ciosec';
my $MIOsec = 'miosec';
my ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR) = &mysubinput;
sub mysubinput
{
    print "Enter the number for the datastore: \n";
        my $STORENUM = <STDIN>;
        chomp($STORENUM);
        print "Enter the name for the datastore e.g: DataStore or ServerStore: \n";
        my $STORENAME = <STDIN>;
        chomp($STORENAME);
        print "Enter the data store image prefix e.g. datastore or serverstore: \n";
        my $IMGPREFIX = <STDIN>;
        chomp($IMGPREFIX);
        print "Enter the month MM: \n";
        my $MONTH = <STDIN>;
        chomp($MONTH);
        print "Enter the day DD: \n";
        my $DAY = <STDIN>;
        chomp($DAY);
        print "Enter the Year YYYY: \n";
        my $YEAR = <STDIN>;
        chomp($YEAR);
    return ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR);
#   print "$STORENUM $STORENAME $IMGPREFIX $MONTH $DAY $YEAR\n";
#   print "Not a very interesting routine\n";
#   print "This does the same thing every time\n";
#   print "$TOTALIOS\n";
#   print "Enter the number for the datastore: \n";
#   $line = <STDIN>;
#   chomp($line);
#   print "$line\n";
#   print "$DATECMD\n";
}
sub writedate 
{
    print "! $DATECMD\n";   
}    

sub writesections(mysubinput())
{

    print "| [[File:$STORENAME-$STORENUM-$TIOS-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$READp-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CACHEp-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CKBsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$MKBsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CIOsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$MIOsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
}   

sub writepage
{
    &mysubinput;
    print "Go back to [[MD3000i-Perf]] \n";
    print "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center \n";
    print "|-\n";
    print "! [[DataStore-1]]\n";
    print "! [[DataStore-2]]\n";
    print "! [[DataStore-3]]\n";
    print "! [[DataStore-4]]\n";
    print "! [[DataStore-5]]\n";
    print "! [[DataStore-6]]\n";
    print "! [[DataStore-7]]\n";
    print "! [[DataStore-8]]\n";
    print "! [[DataStore-9]]\n";
    print "|-\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "| [[File:disk.png |60px]]\n";
    print "|}\n";
    print "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center\n";
    print "|-\n";
    &writedate;
    print " |-\n";
    &writesections;
    print " |-}\n";
}
#&mysubinput;
&writepage;
#&mysubinput;
#&writesections; 
```

使用这种方法，事情似乎奏效了。但是，我的输入不是 100% 正确的。我必须输入所有数据两次，然后程序才能吐出一些东西......

```
Enter the number for the datastore:
1
Enter the name for the datastore e.g: DataStore or ServerStore:
DataStore
Enter the data store image prefix e.g. datastore or serverstore:
datastore
Enter the month MM:
12
Enter the day DD:
03
Enter the Year YYYY:
2012
Enter the number for the datastore:
1
Enter the name for the datastore e.g: DataStore or ServerStore:
DataStore
Enter the data store image prefix e.g. datastore or serverstore:
datastore
Enter the month MM:
12
Enter the day DD:
03
Enter the Year YYYY:
2012
Go back to [[MD3000i-Perf]]
{| border=1 cellspacing=5 cellpadding=2 style=text-align: center
|-
! [[DataStore-1]]
! [[DataStore-2]]
! [[DataStore-3]]
! [[DataStore-4]]
! [[DataStore-5]]
! [[DataStore-6]]
! [[DataStore-7]]
! [[DataStore-8]]
! [[DataStore-9]]
|-
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
| [[File:disk.png |60px]]
|}
{| border=1 cellspacing=5 cellpadding=2 style=text-align: center
|-
! 12/04/12
        |-
| [[File:DataStore-1-Tios-12-03-2012.png| 100px]]
| [[File:DataStore-1-readp-12-03-2012.png| 100px]]
| [[File:DataStore-1-cachep-12-03-2012.png| 100px]]
| [[File:DataStore-1-ckbsec-12-03-2012.png| 100px]]
| [[File:DataStore-1-mkbsec-12-03-2012.png| 100px]]
| [[File:DataStore-1-ciosec-12-03-2012.png| 100px]]
| [[File:DataStore-1-miosec-12-03-2012.png| 100px]]
        |-} 
```

将此变量添加到“我的”后，现在似乎一切正常

```
my ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR) = &mysubinput; 
```

第二部分是添加 return ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR)；

现在我的问题是如何将子写入部分的输出放入文件中，例如 datastore.wk？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:31:40.387

如果您已启用`use strict`并`use warnings`启用，您会看到如下消息

```
Global symbol "$STORENAME" requires explicit package name 
```

可以帮助您调试程序。

问题是您在其中声明的变量`mysubinput`是该子例程的*本地*变量，并且在子例程返回时将被丢弃。就`writesections`这些变量而言，这些变量从未被声明过，程序也无法编译。

取消注释这些`use`语句，并在使用它们的第一个子例程之前添加 、 、 、 和 的声明，并从子例程中的`$DAY`这些`$MONTH`变量`$STORENAME`中`$STORENUM`删除。然后它们将可以在文件的其余部分中访问，并且您的程序应该可以工作。`$YEAR``my`

顺便说一句，调用子程序`&mysubinput`确实是一种非常古老的风格。你应该`mysubinput()`自始至终使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:34:26.223

永远不要评论这一`use strict`行:)

它会提醒您，您的`writesections`sub 无权访问在`mysubinput`!范围内声明的变量。

我建议你先了解[私有变量](http://perldoc.perl.org/perlsub.html#Private-Variables-via-my%28%29)。要共享您的变量，您应该共享`return`它们。按照你的逻辑：

```
sub mysubinput
{
    ...
    return ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR);
}

my ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR) = mysubinput();
writesections($STORENAME, $STORENUM, $MONTH, $DAY, $YEAR); 
```

但是，如果您希望扩展您的 Perl 脚本，那么迟早您将不得不学习面向对象编程。那么，[Moose 框架](http://perldoc.perl.org/perlootut.html#Moose)就是你的朋友。

# vmware - VMware PowerCLI 命令/脚本查看 VM 是否可以在资源池中运行？

> ID：13710184
> 
> 赞同：0
> 
> 时间：2012-12-04T19:10:52.293
> 
> 标签：vmware, powercli

是否有 PowerCLI 脚本或一系列命令可用于确定 VM 资源池是否有足够的可用资源来启动 VM 而不会触发 vSphere 错误？

出于性能测试的原因，我们使用具有最大 RAM 和 CPU 的资源池。池中的每个 VM 都有一个用于 CPU 和 RAM 的预留集。测试自动化将在测试时尝试在池中启动尽可能多的 VM。当启动 VM 将超过允许的资源量时，CLI 将返回错误。发生这种情况时，vSphere 控制台上会显示错误“资源不足”。而不是不断启动虚拟机、失败并产生错误 - 有没有办法检查是否有足够的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:24:30.607

不确定 CPU 使用情况，但您可以在内存上使用 PowercLI get-stat 并围绕它建立一些逻辑。快速示例：

```
connect-viserver my_vc

$active = (get-stat -entity (get-cluster cluster_name | get-resourcepool Low) -stat mem.active.average -maxsamples 1 -realtime).Value
$granted = (get-stat -entity (get-cluster cluster_name | get-resourcepool Low) -stat mem.granted.average -maxsamples 1 -realtime).Value

$active
$granted

$pctused = ($active / $granted)*100
$pctused

# 4445929
# 31797248
# 13.9821188299063 
```

我想你可以在构建之前运行它并在条件语句中使用 $pctused 例如 if ($pctused -lt 98) { # build } else { # stop gracefully }

# asp.net - 使用 urlrewriting 时，IsPostBack 总是返回 false

> ID：13710185
> 
> 赞同：0
> 
> 时间：2012-12-04T19:10:51.320
> 
> 标签：asp.net, url-rewriting

我创建了一个非常小的网络应用程序。我想使用干净的 url，但如果我使用 urlrewriting 我无法访问 PageMethods。我正在尝试从 JavaScript 文件访问 PageMethods，但 isPostBack 返回 false 并且它只是刷新页面。

如果我不使用 urlrewriting 它可以完美地工作并将我想要的任何内容写入 writeHere div。

可能是什么问题？

这是调用js函数的**ANCHOR**

```
Test <a href="#" onclick = "testjs('test');">HERE</a>. 
<div id = "writeHere"></div> 
```

这是调用 PageMethods的**JS FUNCTION**

```
function testjs(test) {
document.getElementById("writeHere").innerHTML = "";

PageMethods.messi(test,CallSuccess,CallFailed);

function CallSuccess(res) {
    document.getElementById("writeHere").innerHTML = res.toString();
}

function CallFailed(res) {
   document.getElementById('writeHere').innerHTML = "ERROR";
   }
} 
```

这里是aspx文件的**MESSI METHOD**

```
[System.Web.Services.WebMethod]
public static string messi(string test)
{
    return test; 
} 
```

最后这是**重写规则**

```
<rewriter>
<rewrite url="~/(.+).aspx" to="~/uso/$1.aspx" processing ="stop"/>
</rewriter> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:44:27.557

不确定您使用的是什么重写引擎，请确保查询字符串也被传递到重写的 URL。如果`PageMethods.messi`使用 GET 动词发送请求，则通知它是回发的参数在查询字符串中。

# jquery - 如何使具有相同类的子元素只出现一次

> ID：13710188
> 
> 赞同：0
> 
> 时间：2012-12-04T19:11:01.383
> 
> 标签：jquery, class, parent

我的问题是我有一个父元素，在这种情况下是一个由类定义的 div，没有 id。

使用菜单，我可以调用一个创建父 div 副本的函数，我可以彼此独立地四处移动。

我将此代码添加到创建父 div 的函数中。

```
function makeSmallBlockdiv() {
    $("#canvas").append('<div class="SmallBlock">SMALL BLOCK 350X300</div>')
    $(".SmallBlock").draggable({
        containment: "#canvas",
        scroll: false,
        grid: [10, 10]
    }, {
        cursor: "move",
        cursorAt: {
            top: 300,
            left: 175
        }
    })
    $(".Smallblock").append('<div class="article_title"></div>')
    $(".Smallblock").append('<div class="article_Image"><img style="width: 100%;" src="<? echo $image ?>"></div>')
    $(".Smallblock").append('<div class="font14"><? echo substr($article_text, 0, 200) ?></div>')
}​ 
```

我知道 php 代码行不通，但这不是问题；我用文本和有效的图像目标替换了它，没有任何运气

问题是子 div 传播到我创建的所有父母。所以，我最终在第二个父节点中有两组子节点，在第三个父节点中有三组子节点，依此类推......

有没有办法让子节点只保留一个类定义并让它们只填充创建它们的父节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:22:53.807

我认为您需要的是以下内容：

```
var smallBlock = $('<div class="SmallBlock">SMALL BLOCK 350X300</div>').appendTo("#canvas");
smallBlock.draggable({
        containment: "#canvas",
        scroll: false,
        grid: [10, 10]
    }, {
        cursor: "move",
        cursorAt: {
            top: 300,
            left: 175
        }
    })
    smallBlock.append('<div class="article_title"></div>')
    smallBlock.append('<div class="article_Image"><img style="width: 100%;" src="<? echo $image ?>"></div>')
    smallBlock.append('<div class="font14"><? echo substr($article_text, 0, 200) ?></div>') 
```

这只会将孩子添加到新创建的`SmallBlock`div 中。

# ios - iOS 配置：如何丢弃不需要的应用程序 ID 和配置文件？

> ID：13710189
> 
> 赞同：1
> 
> 时间：2012-12-04T19:11:05.627
> 
> 标签：ios, provisioning-profile, app-id

因此，我的应用程序 ID 和配置文件列表非常混乱，需要进行一些认真的剔除。

如何丢弃旧的不需要的应用程序 ID 和配置文件？

谢谢，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:49:05.160

可悲的是，没有办法删除应用程序 ID。我不知道为什么苹果会阻止这一点。

不过，您可以删除配置文件。转到配置屏幕，检查您要删除的那些，然后单击`Remove Selected`按钮。

**更新**：

2013 年 4 月 7 日 - Apple 对配置门户网站进行了重大更改。您现在可以删除大多数应用程序 ID。但由于某种原因，并非所有应用程序 ID 都可以删除。在我自己的情况下，我有三个无法删除的应用程序 ID。不过，我能够删除其他几个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:49:13.317

您可以在 iOS 配置门户中删除配置文件。您无法删除应用 ID。

# java - JSP - 从查询中检索行名

> ID：13710204
> 
> 赞同：0
> 
> 时间：2012-12-04T19:11:56.020
> 
> 标签：java, jsp

我正在尝试从查询中检索行名以将其与 java 字符串进行比较。有什么办法吗？

```
 <sql:query var="result" dataSource="jdbc/affablebean">
                SELECT * FROM parking
    </sql:query>
    <table border="1">
        <!-- column headers -->
        <tr>
            <c:forEach var="columnName" items="${result.columnNames}">
                <th><c:out value="${columnName}"/></th>
            </c:forEach>
        </tr>
        <!-- column data -->
        <c:forEach var="row" items="${result.rowsByIndex}">
            <tr>
                <c:forEach var="column" items="${row}">
                    <%
                    String check = (String)session.getAttribute("id");
                    **String check2 = ??????** //want ${row}
                    out.print(check+"<br>");
                    out.print(check2);
                        if(check == check2){
                    %>
                    <td><c:out value="${column}"/></td>
                    <%
                                   }
                    %>
                </c:forEach>
            </tr>
        </c:forEach>
    </table> 
```

到目前为止，我能够让 if 语句正常工作。唯一的问题是我不知道如何检索 check2 以将其与 check1 进行比较

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:19:49.830

从我在获取 ResultSetMetaData 的代码中看到的内容丢失了。

请加：

ResultSetMetaData rsMetaData = result.getMetaData();

# login - 詹金斯“无效的登录信息”

> ID：13710214
> 
> 赞同：2
> 
> 时间：2012-12-04T19:12:21.803
> 
> 标签：login, ssh, jenkins

我已将 Jenkins 设置为使用 Unix 用户/组数据库安全性，但除了运行 Jenkins 服务的用户之外，我无法使用我创建的任何用户登录。通过 ssh 或 su 在服务器上登录可以工作，但是当我尝试使用 Jenkins 界面时，它会给出“无效登录信息”消息。

根据我的阅读，我需要以 root 身份运行 jenkins，或者让启动 Jenkins 的用户访问我的影子文件。对我来说，这些都不是可行的选择。还有其他解决方法吗？

经过更多试验后，我发现让启动 Jenkins 的用户能够读取影子文件是不够的。我需要为影子文件的所有用户设置读取权限，以便能够使用其他帐户登录。此外，我尝试将 passwd 中的每个用户添加到影子组，但这也不起作用，所以我不确定 Jenkins 正在尝试访问影子文件，就像我尝试登录时一样。

詹金斯日志：

```
4-Dec-2012 11:05:28 AM hudson.security.AuthenticationProcessingFilter2 onUnsuccessfulAuthentication
INFO: Login attempt failed
org.acegisecurity.BadCredentialsException: pam_authenticate failed : Authentication failure; nested exception is org.jvnet.libpam.PAMException: pam_authenticate failed : Authentication failure
        at hudson.security.PAMSecurityRealm.authenticate(PAMSecurityRealm.java:78)
        at hudson.security.AbstractPasswordBasedSecurityRealm$Authenticator.retrieveUser(AbstractPasswordBasedSecurityRealm.java:137)
        at org.acegisecurity.providers.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:119)
        at org.acegisecurity.providers.ProviderManager.doAuthentication(ProviderManager.java:195)
        at org.acegisecurity.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:45)
        at org.acegisecurity.ui.webapp.AuthenticationProcessingFilter.attemptAuthentication(AuthenticationProcessingFilter.java:71)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:252)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:63)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
        at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
        at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)
Caused by: org.jvnet.libpam.PAMException: pam_authenticate failed : Authentication failure
        at org.jvnet.libpam.PAM.check(PAM.java:106)
        at org.jvnet.libpam.PAM.authenticate(PAM.java:124)
        at hudson.security.PAMSecurityRealm.authenticate(PAMSecurityRealm.java:73)
        ... 34 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T10:33:48.650

根据[Hudson failed to use unix user/group to do authentication](https://stackoverflow.com/questions/4666305/hudson-fails-to-use-unix-user-group-to-do-authentication)，你必须做两件事

*   确保运行 jenkins 的用户对 /etc/shadow 具有读取权限
*   在某些情况下，服务名称不能是随机的。特定于平台。

2个想法：

*   使用“测试”按钮验证读取访问权限
*   尝试根据您的平台将您的服务名称更改为“ssh”或“sshd”

您可能想用您的发现编辑[https://wiki.jenkins-ci.org/display/JENKINS/PAM+Authentication+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/PAM+Authentication+Plugin)！

# r - BH对data.frame中不同列的多次校正

> ID：13710229
> 
> 赞同：1
> 
> 时间：2012-12-04T19:12:52.973
> 
> 标签：r

我有一个带有 id 字段和三个不同且不相关的 p 值的 data.frame。我想在每列应用 benjamini-hochberg 校正。我一直在使用`p.adjust`as 函数`p.adjust(data[,2], "BH")`，但我遇到了麻烦，因为我必须在应用更正之前对每一列进行排序，之后我会丢失 id 信息。我的数据看起来像：

```
id  p1  p2  p3
1   ENSG00000179094 1.000000e+00    1.000000e+00    1.000000e+00
2   ENSG00000164306 1.000000e+00    1.000000e+00    1.000000e+00
3   ENSG00000147180 1.000000e+00    8.778847e-02    1.000000e+00
4   ENSG00000172932 4.370119e-01    1.766703e-04    1.000000e+00
5   ENSG00000137252 1.000000e+00    2.562124e-02    1.000000e+00
6   ENSG00000144644 1.654108e-02    1.000000e+00    1.000000e+00
7   ENSG00000197273 3.316301e-01    5.341301e-01    1.000000e+00
8   ENSG00000169221 1.000000e+00    1.000000e+00    1.000000e+00
9   ENSG00000108309 8.689368e-01    2.350522e-03    1.000000e+00
10  ENSG00000172382 1.000000e+00    9.028471e-01    2.697276e-02
11  ENSG00000099937 1.000000e+00    1.000000e+00    9.988716e-01
12  ENSG00000259431 1.000000e+00    1.000000e+00    7.268023e-01
... 
```

有没有最简单的方法或包来做到这一点而不会丢失 id 的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:16:02.523

您可以使用**numcolwise**，仅将函数应用于 data.frame 的数字列。

```
library(plyr) 
 cbind(dat$id,numcolwise(p.adjust)(dat))
             dat$id       p1          p2        p3
1  ENSG00000179094 1.000000 1.000000000 1.0000000
2  ENSG00000164306 1.000000 1.000000000 1.0000000
3  ENSG00000147180 1.000000 0.790096230 1.0000000
4  ENSG00000172932 1.000000 0.002120044 1.0000000
5  ENSG00000137252 1.000000 0.256212400 1.0000000
6  ENSG00000144644 0.198493 1.000000000 1.0000000
7  ENSG00000197273 1.000000 1.000000000 1.0000000
8  ENSG00000169221 1.000000 1.000000000 1.0000000
9  ENSG00000108309 1.000000 0.025855742 1.0000000
10 ENSG00000172382 1.000000 1.000000000 0.3236731
11 ENSG00000099937 1.000000 1.000000000 1.0000000
12 ENSG00000259431 1.000000 1.000000000 1.0000000 
```

要使用其他参数：

```
cbind(dat$id,numcolwise(p.adjust)(dat, method = 'bonferroni', n = 20)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:58:35.137

为什么不：

```
dat2 <- dat  # only needed if you want to protect original data.
dat2[2:4] <- lapply(dat2[2:4], p.adjust, method="BH") 
```

# sql-server-2008 - ExecuteScalar：连接属性尚未初始化

> ID：13710234
> 
> 赞同：6
> 
> 时间：2012-12-04T19:13:15.367
> 
> 标签：sql-server-2008, c#-4.0

为了运行`executeScalar`，我在 Internet 上尝试了很多建议，但我得到了错误`ExecuteScalar: Connection property has not been initialized`。我的`INSERT`查询工作正常，问题出在`executeScalar`.

```
conn.Open();
SqlCommand cmd = new SqlCommand(
    "INSERT INTO Products (Product_Name,Product_BarCode,Product_CP,Product_SP,
                           Product_Countainer,Product_Pcs,Product_MFGDate,
                           Product_ExpiryDate,Product_Grade)
     Values ('" + Name.Text + "','" + BarCode.Text + "','" + CostP.Value + "','" + 
             SellingP.Value + "','" + Countainer.Value + "','" + Pcs.Value + "','" + 
             MfgDate.Value + "','" + ExpDate.Value + "','" + Grade.SelectedItem + "')", 
     conn);
cmd.ExecuteNonQuery();
conn.Close(); 
```

```
conn.Open();
cmd.Connection = conn;
cmd = new SqlCommand("SELECT SUM(Product_CP) FROM Products AS Amount");
Amount = (double)cmd.ExecuteScalar();
MessageBox.Show(Amount.ToString());
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T19:16:42.077

```
cmd = new SqlCommand(...); 
```

正如错误明确指出的那样，此命令没有连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T09:41:58.237

如果您使用 DBCommand 而不是 SQLCommand，这将无法解决问题，因为 DBCommand 是一个抽象类并且无法实例化..

对我有用的解决方案是：我在必须使用的地方使用 command.executeScalar()：DbCommand.executeScalar (command) // 效果很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T21:24:56.027

这`cmd.Connection = conn;`

应该在声明之后

```
cmd = new SqlCommand("SELECT SUM(Product_CP) FROM Products AS Amount");
cmd.Connection = conn; 
```

# objective-c - 核心图形在一行中绘制带边框的矩形

> ID：13710235
> 
> 赞同：6
> 
> 时间：2012-12-04T19:13:24.663
> 
> 标签：objective-c, ios, core-graphics

如何在一行中绘制一个带边框的矩形？

有单独的方法，例如：

```
CGContextStrokeRect(context, someRectangle); 
```

和

```
CGContextFillRect(context, someRectangle); 
```

但是有什么东西可以合二为一吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T19:30:09.040

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPathRef path = CGPathCreateWithRect(rect, NULL);
    [[UIColor redColor] setFill];
    [[UIColor greenColor] setStroke];
    CGContextAddPath(context, path);
    CGContextDrawPath(context, kCGPathFillStroke);
    CGPathRelease(path);
} 
```

虽然，我不能说它比中风和填写单独的电话更冗长......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T19:44:59.900

如果您只是想节省行空间，则可以定义自己的方法来进行两次调用并将其放在实用程序类中。

```
void strokeAndFill(CGContextRef c, CGRect rect)
{
    CGContextFillRect(c, rect);
    CGContextStrokeRect(c, rect);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T19:17:32.650

如果您事先设置填充和描边颜色，CGContextDrawPath 就可以完成。

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetStrokeColor(context, a);
CGContextSetFillColor(context, b);
CGContextDrawPath(context, rect) 
```

# c++ - 如何在 Qt 项目中使用预编译头文件

> ID：13710243
> 
> 赞同：7
> 
> 时间：2012-12-04T19:14:17.603
> 
> 标签：c++, visual-studio-2010, qt, precompiled-headers

我的 IDE：Visual Studio 2010，我使用 VS 的 Qt 插件，Qt 版本。4.8.1

我在尝试在我的 Qt 项目中**创建预编译头文件（pch）**时遇到了这个**问题。**

 ***我在非 Qt 项目中创建 pch 的常用方法是：*

1.  创建标题；
2.  包含将在头文件中预编译的文件；
3.  对于项目状态中的每个源文件，它的属性中是否会使用 pch；
4.  对于pch的项目状态创建中的一个源文件；
5.  在所有源文件中包含 pch。

由于Qt 项目**的这些操作失败**了，我决定应该将由于 pch 发生的事情包含在 MOC 生成的所有文件中。

我在 QtAssistant 中阅读了关于预编译头文件的文章并做了以下事情：

1.  创建头文件；

2.  对于项目集选项中的所有 .cpp 文件，使用 pch 和一个创建

3.  转换为qmake生成的项目

4.  我跑了 qmake -project

5.  我修改了生成的 .pro 文件，这里是：

    模板 = 应用目标 = DEPENDPATH += 。GeneratedFiles INCLUDEPATH += 。PRECOMPILED_HEADER = StdAfx.h QT += 网络

    # 输入

    HEADERS += server.h StdAfx.h Forms += server.ui SOURCES += main.cpp server.cpp StdAfx.h.cpp RESOURCES += server.qrc

6.  我跑了 qmake

7.  打开 .pro 文件并尝试构建它并得到错误：

    错误 2 错误 C1083：无法打开包含文件：'StdAfx.h'：没有这样的文件或目录

我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T07:01:44.040

创建您的预编译头文件并包含所需的头文件。

pch.hpp：

```
// precompiled headers

// add C includes here

#ifdef __cplusplus
// add C++ includes here

#include <iostream>
#include <QtGui>

#endif // __cplusplus 
```

然后在您的 .pro 文件中：

```
CONFIG += precompile_header
PRECOMPILED_HEADER = pch.hpp
HEADERS += pch.hpp 
```

Qmake 现在将自动为编译器设置正确的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:43:12.467

我找到了解决方案。
为了在项目中使用预编译头文件，唯一需要做的就是**在 .pro 文件中包含以下语句：**

```
CONFIG += nameOfPrecompiledHeader.h
PRECOMPILED_HEADER = nameOfPrecompiledHeader.h
win32-msvc* {
PRECOMPILED_SOURCE = nameOfFileInWhichCreateOptionWillBeSet.cpp /* other .cpp files will be with use option*/
} 
```

在 .pro 修改和运行 qmake 之后，所有 .cpp 文件将被设置为使用 pch 和一个用于它的创建（nameOfFileInWhichCreateOptionWillBeSet）和 .pch 将被生成**

# grid - 具有大型数据集的 Kendo UI 网格

> ID：13710246
> 
> 赞同：2
> 
> 时间：2012-12-04T19:14:26.363
> 
> 标签：grid, kendo-ui

我正在尝试 Kendo UI，并且正在使用为学习目的提供的示例。假设我正在使用包含数十万个元素的大型数据源。如果我正在使用分页并且页面大小为 10，我真的希望能够从网页中仅获取 10 个元素，并且如果 Kendo UI 能够知道实际上元素的数量要大得多，但是我们只显示 10 个。

这是我目前拥有的：

```
 var initGrid = true;
        var grid2Data;

        function getDataSource()
        {
            return grid2Data.Data;
        }

        var grid;
        function getPageIndex()
        {
            if (!(grid)) {
                return 0;
            }
            return grid.pager.page() - 1;
        }

        function getPageSize() {
            if (!(grid)) {
                return 10;
            }
            return grid.pager.pageSize();
        }

        function getFilters() {
            if (!(grid)) {
                return "";
            }
            return grid.dataSource.filter();
        }

        function getSorts() {
            if (!(grid)) {
                return "";
            }
            return grid.dataSource.sort();
        }

        function getParams() {
            return getPageSize();
        }

        function postTest() {
            if (initGrid) {
                $.post('myurl' + getParams(), function (data) {
                    grid2Data = data;
                    $("#grid").kendoGrid({
                        dataBound: onDataBound,
                        dataSource: {
                            data: getDataSource(),
                            schema: {
                                model: {
                                    fields: {
                                        Email: { type: "string" },
                                        FullName: { type: "string" },
                                        LogCreateDate: { type: "date" },
                                        RoleName: { type: "string" },
                                        UserName: { type: "string" }
                                    }
                                }
                            },
                            pageSize: 10
                        },
                        height: 300,
                        scrollable: false,
                        sortable: true,
                        filterable: true,
                        pageable: {
                            input: true,
                            numeric: false
                        },
                        columns: [
                        {
                            field: "Email",
                            title: "Email",
                            width: 100
                        },
                        {
                            field: "FullName",
                            title: "Full Name",
                            width: 100
                        },
                        {
                            field: "LogCreateDate",
                            title: "Created",
                            template: '#= kendo.toString(LogCreateDate,"MM/dd/yyyy") #'
                        },
                        {
                            field: "RoleName",
                            title: "Role",
                            width: 50
                        },
                        {
                            field: "UserName",
                            width: 100
                        }
                    ]
                    });
                    grid = $("#grid").data("kendoGrid");
                });
            }
            else {
            }
            initGrid = false;
        }

        $(document).ready(function () {
            postTest();
        }); 
```

我的问题是网格显示这是 10 中的元素 1-10，它是第一页。我希望网格向我显示我给出的页面索引和项目数。如何设置网格的元素数量和页面索引？这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:30:00.837

当您在 中选择`serverPaging`时，`DataSource`将其设置为`true`。您在服务器中接收有关页码 ( `page`)、页面大小 ( `pageSize`)、要跳过的记录数 ( ) 的信息...（在[http:](http://docs.kendoui.com/api/framework/datasource)`skip` //docs.kendoui.c​​om/api/framework/datasource 中查找 serverPaging ）作为交换，您不仅应该返回包含该页面数据的数组，还应该返回总行数。然后在函数中实现访问记录数。即假设您返回以下对象作为结果：`schema.total`

```
{
    rows: [ 
        { id: 1, col1: "col1.1", col2: "col1.2" },
        { id: 2, col1: "col2.1", col2: "col2.2" },
        { id: 3, col1: "col3.1", col2: "col3.2" }
    ],
    totalRows : 1000
} 
```

然后你可以实现`schema.total`为：

```
schema: {
    total: function (response) {
        return response.totalRows;
    }
} 
```

`response`从服务器接收到的对象在哪里。

**注意：**实际上在这种情况下定义`schema`为：

```
schema: {
    total: "totalRows";
    }
} 
```

由于`total`直接存储在`totalRows`字段中。

查看[http://demos.kendoui.c​​om/web/grid/remote-data.html](http://demos.kendoui.com/web/grid/remote-data.html)以获取示例。

# c# - 在 stacktrace/callstack 中获取参数值

> ID：13710247
> 
> 赞同：1
> 
> 时间：2012-12-04T19:14:26.980
> 
> 标签：c#, visual-studio

为什么当我们在 Visual Studio 中查看“调用堆栈”窗口时，我们可以看到参数的值，但是却无法使用 say 以编程方式获取它们`StackTrace.GetFrame(i)`？这似乎不公平。

还是有可能，我只是不知道怎么做？

# android - “public void onDestroy()”和“protected void onDestroy()”之间的区别？

> ID：13710252
> 
> 赞同：6
> 
> 时间：2012-12-04T19:14:49.390
> 
> 标签：android, private, void, protected, code-cleanup

这是我的代码的一部分：

```
package com.admobsdk_dfp_handler;

import com.google.ads.*;
import com.google.ads.doubleclick.*;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.widget.RelativeLayout;

public class AdMobSDK_DFP_Handler extends Activity {
    private DfpAdView adView;
    private static final String adUnitId = "/7732/test_portal7/android_app1_test_portal7/top_banner_non_sdk_application_android_app1_test_portal7";
    private Handler handler = new Handler();
    private Runnable runnable = new Runnable() {

        public void run() {
            adView.loadAd(new AdRequest());
            handler.postDelayed(this, 5000);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ad_mob_sdk__dfp__handler);

        adView = new DfpAdView(this, AdSize.BANNER, adUnitId);

        RelativeLayout layout = (RelativeLayout) findViewById(R.id.mainLayout);

        layout.addView(adView);

        adView.loadAd(new AdRequest());

    };

    @Override
    protected void onPause() {
        handler.removeCallbacks(runnable);
        super.onPause();
    }

    @Override
    protected void onResume() {
        handler.postDelayed(runnable, 5000);
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        handler.removeCallbacks(runnable);
        super.onDestroy();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_ad_mob_sdk__dfp__handler,
                menu);
        return true;
    }

} 
```

**protected** void onDestroy() 用于清理程序。但是，我看到了一些示例项目，它们通常使用**public** void onDestroy() 来进行清理。

据我所知，在Java中，可以在包中访问**受保护**的方法，而可以在任何地方访问**公共方法。**但是通常一个类都有自己的onDestroy()，那么是不是意味着任何一个都可以使用？？在它们之间进行选择时我需要注意什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T19:18:53.963

在公共和受保护之间，功能没有区别。唯一的区别是，使用 public，您将能够`onDestroy()`从任何类调用活动的实例。使用受保护的，您只能在同一包中的同一类或子类中调用。我`onDestroy()`认为公开它没有多大意义。这实际上可能是不好的做法。

换句话说，除非你有非常特殊的理由让更多类可以访问它，否则只使用protected。

我认为您看到的公共实现只是一个错误/没有必要。如果您想测试，只需将其更改回受保护。如果没有编译器错误，则没有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:26:13.763

Activity中的定义`onDestroy`是`protected onDestroy()`。在您的 Activity 子类中，您可以编写`protected onDestroy`or`public onDestroy`并且编译器不会抱怨。更传统地接受的编程实践是编写`protected onDestroy`，最大限度地减少该方法的暴露。但是，写入`public onDestroy`极不可能导致错误。所以人们不假思索地把它放进去，然后忘记它。至少，这就是我所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-05T06:50:07.263

onDestroy() 是活动的生命周期方法之一。要创建自己的活动，您应该扩展活动类。

在 android 的活动类中，所有生命周期方法都受到保护，因为 java 的最佳实践建议仅在派生类中对这些生命周期方法进行访问限制。

即使您使用 public onDestroy() 也不会产生任何问题，但根据推荐的最佳实践，我们应该对其进行保护。

要获得清晰的理解，请查看以下链接。 [https://www.baeldung.com/java-protected-access-modifier](https://www.baeldung.com/java-protected-access-modifier)

# sql - 一年做一个简单的支点

> ID：13710254
> 
> 赞同：1
> 
> 时间：2012-12-04T19:14:59.987
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我有一张桌子：

```
+----+-------+------+
| id | times | year |
+----+-------+------+
|  5 |     2 | 2008 |
|  6 |    76 | 2008 |
|  2 |    43 | 2009 |
|  4 |     5 | 2009 |
|  1 |     3 | 2010 |
|  9 |     6 | 2010 |
|  7 |   444 | 2011 |
|  8 |     3 | 2011 |
|  3 |    65 | 2012 |
+----+-------+------+ 
```

我想从这个表中创建一个枢轴，`times`每个桶`year`：

```
+--------+------+------+------+------+------+
|        | 2008 | 2009 | 2010 | 2011 | 2012 |
+--------+------+------+------+------+------+
| 0      |      |      |      |      |      |
| 1-30   |    1 |    1 |    2 |    1 |      |
| 31-60  |      |    1 |      |      |      |
| 61-90  |    1 |      |      |      |    1 |
| 91-120 |      |      |      |      |      |
| 121+   |      |      |      |    1 |      |
+--------+------+------+------+------+------+ 
```

我如何开始用 sql 解决这个挑战？非常感谢您的指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:47:17.113

您可以为此使用 sql server[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能。如果您知道年份的所有值以及存储桶，则可以对查询进行硬编码：

```
select *
from
(
  select 
    case 
      when times = 0 then '0' 
      when times >= 1 and times <=30 then '1-30'
      when times >= 31 and times <=60 then '31-60'  
      when times >= 61 and times <=90 then '61-90' 
      when times >= 91 and times <=120 then '91-120' 
      else '121+' end bucket,
    year
  from yourtable
) src
pivot
(
  count(year)
  for year in ([2008], [2009], [2010], [2011], [2012])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/15b4b/1)

如果您无权访问该`PIVOT`函数，则可以将聚合函数与 a 一起使用`CASE`：

```
select bucket,
  sum(case when year = 2008 then 1 else 0 end) [2008],
  sum(case when year = 2009 then 1 else 0 end) [2009],
  sum(case when year = 2010 then 1 else 0 end) [2010],
  sum(case when year = 2011 then 1 else 0 end) [2011],
  sum(case when year = 2012 then 1 else 0 end) [2012]
from
(
  select 
    case 
      when times = 0 then '0' 
      when times >= 1 and times <=30 then '1-30' 
      when times >= 31 and times <=60 then '31-60'  
      when times >= 61 and times <=90 then '61-90' 
      when times >= 91 and times <=120 then '91-120' 
      else '121+' end bucket,
    year
  from yourtable
) src
group by bucket 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/18bf3/4)

如果您需要列出所有存储桶，那么您将希望将存储桶范围存储在表中或使用`CTE`查询，那么您可以使用以下内容：

```
;with buckets(startbucket, endbucket, rnk) as
(
  select 0, 0, 1 
  union all
  select 1, 30, 2
  union all
  select 31, 60, 3
  union all
  select 61, 90, 4
  union all
  select 91, 120, 5
  union all
  select 121, null, 6
)
select 
  case when startbucket = 0 then '0'
    when endbucket is null then cast(startbucket as varchar(50)) + '+'
    else cast(startbucket as varchar(50)) + '-'+cast(endbucket as varchar(50)) end buckets,
  [2008], [2009], [2010], [2011], [2012]
from
(
  select rnk,
    year, 
    startbucket, 
    endbucket
  from buckets b
  left join yourtable t
    on t.times >= b.startbucket and t.times <= coalesce(b.endbucket, 100000)
) src
pivot
(
  count(year)
  for year in ([2008], [2009], [2010], [2011], [2012])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/18bf3/41)

结果：

```
| BUCKETS | 2008 | 2009 | 2010 | 2011 | 2012 |
----------------------------------------------
|       0 |    0 |    0 |    0 |    0 |    0 |
|    1-30 |    1 |    1 |    2 |    1 |    0 |
|   31-60 |    0 |    1 |    0 |    0 |    0 |
|   61-90 |    1 |    0 |    0 |    0 |    1 |
|  91-120 |    0 |    0 |    0 |    0 |    0 |
|    121+ |    0 |    0 |    0 |    1 |    0 | 
```

如果您需要转置已知数量的值（年），上述方法将非常有用。如果您有一个未知号码，那么您将需要实现动态 sql，类似于以下内容：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(year) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'with buckets(startbucket, endbucket, rnk) as
              (
                select 0, 0, 1 
                union all
                select 1, 30, 2
                union all
                select 31, 60, 3
                union all
                select 61, 90, 4
                union all
                select 91, 120, 5
                union all
                select 121, null, 6
              )
              select 
                case when startbucket = 0 then ''0''
                  when endbucket is null then cast(startbucket as varchar(50)) + ''+''
                  else cast(startbucket as varchar(50)) + ''-''+cast(endbucket as varchar(50)) end buckets,
                '+@cols+'
              from
              (
                select rnk,
                  year, 
                  startbucket, endbucket
                from buckets b
                left join yourtable t
                  on t.times >= b.startbucket and t.times <= coalesce(b.endbucket, 100000)
              ) src
              pivot
              (
                count(year)
                for year in ('+@cols+')
              ) piv;'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/18bf3/42)

静态（硬编码）版本和动态版本的结果相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:57:03.503

该死！Bluefeet 打败了我。[我的尝试](http://sqlfiddle.com/#!3/a1df5/1/0)类似，但使用表来配置存储桶。

```
CREATE TABLE Bucket
(
    id int,
    minbound int,
    maxbound int
)

INSERT INTO Bucket VALUES(1, 0, 30)
                    ,(2, 31, 60)
                    ,(3, 61, 90)
                    ,(4, 91, 120)
                    ,(5, 121, null) 
```

然后可以像这样计算 CTE 中每条记录的存储桶......

```
;WITH RecordBucket
AS
(
    SELECT
        r.*,
        b.id as bucketid
    FROM
        Record r
        INNER JOIN Bucket b ON r.times BETWEEN b.minbound and ISNULL(b.maxbound, 20000000)
) 
```

...并外部连接回存储桶以进行最终查询，以允许包含排序和空存储桶：

```
select 
    b.id as BucketId, 
    CASE
        WHEN b.maxbound IS NULL THEN CONVERT(VARCHAR(16), b.minbound) + '+'
        ELSE CONVERT(VARCHAR(16), b.minbound) + ' - ' + CONVERT(VARCHAR(16), b.maxbound)
    END as BucketName,
    [2008],[2009],[2010],[2011] 
from 
    Bucket b
    LEFT JOIN
    (
        SELECT
            bucketid,
            times,
            year
        from
            RecordBucket
    ) rb 
    pivot (count(times) for year in ([2008],[2009],[2010],[2011])) 
    as pvt ON b.id = pvt.bucketid
order by
    bucketid 
```

# python - Matplotlib 轴调整大小以适应文本

> ID：13710259
> 
> 赞同：3
> 
> 时间：2012-12-04T19:15:08.437
> 
> 标签：python, matplotlib, plot

我一直在尝试使用 matplotlib 生成这样的条形图

![1](../Images/7ef461968aafa18981621dcc16f68793.png)

但是，请注意，黑色条上方的数字超过了顶部轴线。我尝试使用`ax.relim()`, `ax.autoscale()`, `ax.autoscale_view()`, 来纠正这个问题，但没有成功。

我的问题是：有没有一种方法可以干净地获得轴大小来解释 ax.text 显示的文本的大小，而无需手动计算文本+矩形的高度并适当地手动调整大小？

我正在使用 Python 2.7.3 和 Matplotlib 1.3.x

编辑：

使用从某些渲染器黑客获得的文本大小信息手动调整窗口大小可以解决此问题。代码如下：

```
#!/usr/bin/env python

import matplotlib.pyplot as plt

categoryList = ['F', 'L', 'M', 'T', 'W']
categoryColors = {'C': 'y', 'B': 'r', 'F': 'g', 'M': 'b', 'L': 'm', 'T': 'c', 'W': 'k'}
categoryNames = {'C': 'foo1', 'B': 'foo2', 'F': 'foo3', 'M': 'foo4', 'L': 'foo5', 'T': 'foo6', 'W': 'foo7'}
timeList = [60, 165, 60, 10, 570]
fig = plt.figure()
ax = fig.add_subplot(111)
width = 0.35

legendColors = []
legendNames = []
texts = [] 
for ind in range(len(categoryList)):
    category = categoryList[ind]
    rects = ax.bar([ind],timeList[ind],width,color=categoryColors[category],align="center")
    legendColors.append(rects[0])
    legendNames.append(categoryNames[category])

    # Add the text for the number on top of the bar
    for rect in rects:
        texts.append(ax.text(rect.get_x()+rect.get_width()/2,1.05*rect.get_height(),'%d' % timeList[ind],
                    ha='center',va='bottom'))
# The x axis indices
ind = range(0,len(categoryList))

ax.set_ylabel("Time (Minutes)")
ax.set_xlabel("Category")
ax.set_xticks(ind)
ax.set_xticklabels(categoryList)
lgd = ax.legend(legendColors,legendNames,bbox_to_anchor=(1.0, 1.0), loc=2, borderaxespad=0.3)

# Epic hacks for getting renderer
fig.savefig('foo.png',bbox_extra_artists=(lgd,),bbox_inches='tight')
renderer = fig.axes[0].get_renderer_cache()

window_bbox_list = [t.get_window_extent(renderer) for t in texts]
data_bbox_list = [window_bbox.transformed(ax.transData.inverted()) for window_bbox in window_bbox_list]
data_coords_list = [data_bbox.extents for data_bbox in data_bbox_list]
height_list = [coordEntry[-1] for coordEntry in data_coords_list]
max_height = max(height_list)
fig.axes[0].set_ylim(top=max_height*1.05)
fig.savefig('foo.png',bbox_extra_artists=(lgd,),bbox_inches='tight') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:26:37.257

好吧，我真的不认为有一个干净和自动的方式，因为文本是一个对象，它的生命几乎独立于你绘制它的轴。事实上，在你绘制整个图形之前，它没有实际的尺寸......

该方法是跟踪您在图中添加的所有文本，例如：

```
texts = []
for your_element in your_cycle:
    do something
    t = ax.text(your_text_params)
    texts.append(t) 
```

那么您需要找到文本的最高到达点。为此，您必须提取窗口坐标信息并将其转换为数据坐标。在你这样做之前你必须画你的图，否则文本尚未确定（如果有人知道更好，请纠正我）。

```
plt.draw()
window_bbox = [t.get_window_extent()  for t in texts]
data_bbox =   [ b.transformed(ax.transData.inverted()) for b in window_bbox ]
data_coords = [ b.extents for b in data_bbox ] 
```

在获得坐标范围后，我们提取每个框的最大值和其中的最大值，然后将边界设置为略大于

```
max_height = [ e[-1] for e in data_coords ]
top = max(max_height)
ax.set_ylim(ymax=top*1.05) 
```

# c# - 在 ASP.NET MVC 4 架构注意事项中上传和处理 CSV 文件

> ID：13710260
> 
> 赞同：8
> 
> 时间：2012-12-04T19:15:19.997
> 
> 标签：c#, asp.net-mvc, file-upload

我正在开发一个导入和处理 CSV 文件的 ASP.NET MVC 4 应用程序。我正在使用标准表单和控制器进行上传。以下是我目前正在做的事情的概述：

**控制器逻辑**

```
public ActionResult ImportRecords(HttpPostedFileBase importFile){

    var fp = Path.Combine(HttpContext.Server.MapPath("~/ImportUploads"), Path.GetFileName(uploadFile.FileName));
    uploadFile.SaveAs(fp);

    var fileIn = new FileInfo(fp);
    var reader = fileIn.OpenText();
     var tfp = new TextFieldParser(reader) {TextFieldType = FieldType.Delimited, Delimiters = new[] {","}};
    while(!tfp.EndOfData){
        //Parse records into domain object and save to database
    }
    ...
} 
```

**HTML**

```
@using (Html.BeginForm("ImportRecords", "Import", FormMethod.Post, new { @id = "upldFrm", @enctype = "multipart/form-data" }))
{
    <input id="uploadFile" name="uploadFile" type="file" />
    <input id="subButton" type="submit" value="UploadFile" title="Upload File" />
} 
```

导入文件可能包含大量记录（平均 40K+）并且可能需要相当长的时间才能完成。对于每个处理的文件，我宁愿没有用户坐在导入屏幕上超过 5 分钟。我曾考虑添加一个控制台应用程序来监视新文件的上传文件夹，并在添加新内容时进行处理，但我想在开始我的旅程之前看看我从社区收到了什么输入。

有没有更有效的方法来处理这个操作？

有没有办法执行此操作，允许用户继续他/她的快乐方式，然后在处理完成时通知用户？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T21:09:09.733

我遇到的问题的解决方案有点复杂，但与 IFrame 修复类似。结果是一个处理处理的弹出窗口，允许用户在整个站点中继续导航。

该文件被提交到服务器（UploadCSV 控制器），返回一个成功页面，其中包含一些 JavaScript 来处理处理的初始启动。当用户单击“开始处理”时，会打开一个新窗口（ImportProcessing/Index），该窗口加载初始状态（启动检索状态更新的间隔循环），然后调用“StartProcessing”操作，启动加工过程。

我正在使用的“FileProcessor”类位于 ImportProcessing 控制器内的静态字典变量中；允许基于键的状态结果。FileProcessor 会在操作完成或遇到错误后立即移除。

**上传控制器：**

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult UploadCSV(HttpPostedFileBase uploadFile)
        {
            var filePath = string.Empty;
            if (uploadFile.ContentLength <= 0)
            {
                return View();
            }
                filePath  = Path.Combine(Server.MapPath(this.UploadPath), "DeptartmentName",Path.GetFileName(uploadFile.FileName));
            if (new FileInfo(filePath).Exists)
            {
                ViewBag.ErrorMessage =
                    "The file currently exists on the server.  Please rename the file you are trying to upload, delete the file from the server," +
                    "or contact IT if you are unsure of what to do.";
                return View();
            }
            else
            {
                uploadFile.SaveAs(filePath);
                return RedirectToAction("UploadSuccess", new {fileName = uploadFile.FileName, processType = "sonar"});
            }
        }

 [HttpGet]
        public ActionResult UploadSuccess(string fileName, string processType)
        {
            ViewBag.FileName = fileName;
            ViewBag.PType = processType;
            return View();
        } 
```

**上传成功 HTML：**

```
@{
    ViewBag.Title = "UploadSuccess";
}

<h2>File was uploaded successfully</h2>
<p>Your file was uploaded to the server and is now ready to be processed.  To begin processing this file, click the "Process File" button below.
</p>
<button id="beginProcess" >Process File</button>
<script type="text/javascript">
    $(function () {
        $("#beginProcess").click(BeginProcess);
        function BeginProcess() {
            window.open("/SomeController/ImportProcessing/Index?fileName=@ViewBag.FileName&type=@ViewBag.PType", "ProcessStatusWin", "width=400, height=250, status=0, toolbar=0,  scrollbars=0, resizable=0");
            window.location = "/Department/Import/Index";
        }
    });
</script> 
```

一旦打开这个新窗口，文件处理就开始了。从自定义 FileProcessing 类中检索更新。

**导入处理控制器：**

```
 public ActionResult Index(string fileName, string type)
        {
            ViewBag.File = fileName;
            ViewBag.PType = type;
            switch (type)
            {
                case "somematch":
                    if (!_fileProcessors.ContainsKey(fileName)) _fileProcessors.Add(fileName, new SonarCsvProcessor(Path.Combine(Server.MapPath(this.UploadPath), "DepartmentName", fileName), true));
                    break;
                default:
                    break;
            }
            return PartialView();
        } 
```

**进口加工指数：**

```
@{
    ViewBag.Title = "File Processing Status";
}
@Scripts.Render("~/Scripts/jquery-1.8.2.js")

<div id="StatusWrapper">
    <div id="statusWrap"></div>
</div>
<script type="text/javascript">
    $(function () {
        $.ajax({
            url: "GetStatusPage",
            data: { fileName: "@ViewBag.File" },
            type: "GET",
            success: StartStatusProcess,
            error: function () {
                $("#statusWrap").html("<h3>Unable to load status checker</h3>");
            }
        });
        function StartStatusProcess(result) {
            $("#statusWrap").html(result);
            $.ajax({
                url: "StartProcessing",
                data: { fileName: "@ViewBag.File" },
                type: "GET",
                success: function (data) {
                    var messag = 'Processing complete!\n Added ' + data.CurrentRecord + ' of ' + data.TotalRecords + " records in " + data.ElapsedTime + " seconds";
                    $("#statusWrap #message").html(messag);
                    $("#statusWrap #progressBar").attr({ value: 100, max: 100 });
                    setTimeout(function () {
                        window.close();
                    }, 5000);
                },
                error: function (xhr, status) {
                    alert("Error processing file");
                }
            });
        }
    });
</script> 
```

**最后是状态检查器 html：**

```
@{
    ViewBag.Title = "GetStatusPage";
}
<h2>Current Processing Status</h2>
    <h5>Processing: @ViewBag.File</h5>
    <h5>Updated: <span id="processUpdated"></span></h5>
    <span id="message"></span>
    <br />
    <progress id="progressBar"></progress>
<script type="text/javascript">
    $(function () {
        var checker = undefined;
        GetStatus();
        function GetStatus() {
            if (checker == undefined) {
                checker = setInterval(GetStatus, 3000);
            }
            $.ajax({
                url: "GetStatus?fileName=@ViewBag.File",
                type: "GET",
                success: function (result) {
                    result = result || {
                        Available: false,
                        Status: {
                            TotalRecords: -1,
                            CurrentRecord: -1,
                            ElapsedTime: -1,
                            Message: "No status data returned"
                        }
                    };
                    if (result.Available == true) {
                        $("#progressBar").attr({ max: result.Status.TotalRecords, value: result.Status.CurrentRecord });
                        $("#processUpdated").text(result.Status.Updated);
                        $("#message").text(result.Status.Message);
                    } else {
                        clearInterval(checker);
                    }

                },
                error: function () {
                    $("#statusWrap").html("<h3>Unable to load status checker</h3>");
                    clearInterval(checker);
                }
            });
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:29:51.877

只是一个想法，但您可以线程处理您的 CSV 文件，并在完成该任务后调用另一个方法，该方法基本上在客户端提供模式对话框或某种 javascript 警报，让用户知道处理已完成。

```
Task.Factory.StartNew(() => ProcessCsvFile(fp)).ContinueWith((x) => NotifyUser()); 
```

或类似的规定。我认为最终你会想要查看某种线程，因为当某种服务器端处理发生时，用户被困在屏幕上肯定是没有意义的。

# c# - DrawImage（）'sprite'没有出现

> ID：13710261
> 
> 赞同：1
> 
> 时间：2012-12-04T19:15:23.137
> 
> 标签：c#, graphics, drawimage

我正在尝试使用由字母表中的字母组成的自定义构建的 .PNG 文件来为我的游戏提供一些漂亮的文本图形。但是，由于我的 WinForms 游戏的核心功能使用最少的图形工作（我设置了一个计时器来触发一个小动画例程，当用户输入他们已经尝试过的单词时，它会淡出单词“Guessed” - 这已经完成使用 DrawString())。现在我正试图开始`DrawImage(Image, dstRect, srcRect, Unit)`工作，并且我将它设置为在表单加载时运行。

```
 private void DrawLetters()
    {

        // Create image.
        Graphics letters = this.CreateGraphics();
        Image newImage = Image.FromFile(strPath + "Letter_Map.png");

        // Create rectangle for displaying image.
        Rectangle destRect = new Rectangle(25, 25, 80, 80);

        // Create rectangle for source image.
        Rectangle srcRect = new Rectangle(0, 0, 833, 833);
        GraphicsUnit units = GraphicsUnit.Pixel;

        // Draw image to screen.
        letters.DrawImage(newImage, destRect, srcRect, units);
    } 
```

这实际上是来自 MSDN 网站的逐字记录。我的表单现在填充了一组标签，以向用户显示游戏所需的字母网格。是它们被绘制覆盖了自定义矩形吗？我想最终用图像替换它们。我理解 srcRect 是 (x, y, width, height) 所以我给了它'spritesheet'的全尺寸。对于 dstRect 我只希望它在大约 25x、25y 开始的表单上放置一个 80x80px 的块。

为了它，我创建了一个空白表单并`DrawLetters()`在该表单加载事件期间调用了我的函数（我将该函数复制到该表单的代码中）。不过，我什么也没看到，所以我开始有点困惑。我可能需要一些关于绘图如何与屏幕上绘制的表单和控件一起工作的教育。

**编辑**这个[https://stackoverflow.com/questions/837423/render-a-section-of-an-image-to-a-bitmap-c-sharp-winforms](https://stackoverflow.com/questions/837423/render-a-section-of-an-image-to-a-bitmap-c-sharp-winforms "问题在这里")是我最初的动力，但是这个用户有一个工作XNA 的知识，似乎正在尝试将其与 WinForms 结合起来。我相信，对于我试图“美化”的简单文本游戏来说，XNA 将是矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:38:02.153

您需要覆盖表单 OnPaintMethod 以访问表单 Graphics 对象，然后您可以使用该对象在表单上显示图像。

如果要显示图像的一部分，则需要使用[不同的 DrawImage 重载](http://msdn.microsoft.com/en-us/library/ms142041.aspx)，如下所示：

```
public partial class DrawImageDemo : Form
{
    public DrawImageDemo()
    {
        InitializeComponent();
    }

    private Image _sprites;
    public Image Sprites
    {
        get
        {
            if (_sprites == null)
            {
                _sprites = Image.FromFile("test.jpg");
            }
            return _sprites;
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        // The forms graphics object
        Graphics g = e.Graphics;

        // Portion of original image to display
        Rectangle region = new Rectangle(0, 0, 80, 80);

        g.DrawImage(Sprites, 25, 25, region, GraphicsUnit.Pixel);

        base.OnPaint(e);
    }

} 
```

# java - java的内存值

> ID：13710262
> 
> 赞同：2
> 
> 时间：2012-12-04T19:15:25.173
> 
> 标签：java, memory, unsafe, memory-address, dword

我刚刚写了一些访问内存的代码。我用 CheatEngine 检查了地址（在代码中），然后用 打印了它`System.out`，它是不同的。我知道这是一个长值，但在十六进制中，值 2 是 00000002（这是 CheatEngine 中的结果），我用 java 得到 844287491178496。这是为什么？如何将值从地址转换为`int`？更重要的是，我刚刚用 java 从内存中读取的 long 值是多少？这是我的代码：

```
import java.lang.reflect.Field;
import sun.misc.Unsafe;
public class Memory2 {
    public static void main(String args[]){
        Unsafe unsafe = getUnsafe();
        long address = 0x002005C;
    unsafe.getAddress(address);
    System.out.println(unsafe.getAddress(address));
}

public static Unsafe getUnsafe() {
try {
        Field f = Unsafe.class.getDeclaredField("theUnsafe");
            f.setAccessible(true);
        return (Unsafe)f.get(null);
    } catch (Exception e) {}
        return null;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:34:29.117

java中的long是8个字节，*不是*dword；您来自 CheatEngine 的值似乎是四个字节。我认为差异可能仅此而已。0000000200000000 十六进制是 8589934592；您使用 CheatEngine 检查的四个字节之外的字节可能解释了 Java 显示的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:46:26.503

[来自sun.misc.Unsafe](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/sun/misc/Unsafe.java)的来源

```
/**
 * Fetches a native pointer from a given memory address.  If the address is
 * zero, or does not point into a block obtained from {@link
 * #allocateMemory}, the results are undefined.
 *
 * <p> If the native pointer is less than 64 bits wide, it is extended as
 * an unsigned number to a Java long.  The pointer may be indexed by any
 * given byte offset, simply by adding that offset (as a simple integer) to
 * the long representing the pointer.  The number of bytes actually read
 * from the target address maybe determined by consulting {@link
 * #addressSize}.
 *
 * @see #allocateMemory
 */
 public native long getAddress(long address); 
```

简而言之，它将在 32 位 JVM 上读取 32 位（作为无符号值），在 64 位 JVM 上读取 64 位。

注意：大多数 64 位 JVM 将使用 32 位引用来表示典型的堆大小。

# c++ - 使用数组调用函数

> ID：13710271
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:16:17.797
> 
> 标签：c++, arrays, function

试图在函数中传递数组。总和返回为 0

```
/

void CalcAvg(int tests[], int numTests, float& avg)

{

    int sum=0;
    for (int i = 0; i < numTests; i++)
    {
        sum = sum + tests[i];
    }
avg = (float)sum/numTests;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:28:17.310

```
void CalcAvg(int tests[], int numTests, float& avg) 
```

此函数中的总和是在本地声明的。您需要更改函数以将 main 中的总和作为参考，例如平均值。

```
void CalcAvg(int tests[], int numTests, float& avg, int& sum) 
```

或者更改 CalcAvg 函数以返回总和，如下所示。

```
int CalcAvg(int tests[], int numTests, float& avg)
{
  int sum=0;
  for (int i = 0; i < numTests; i++)
  {
      sum = sum + tests[i];
  }
  avg = (float)sum/numTests;
  return sum;
} 
```

然后在你的主要集合中等于`CalcAvg`

```
int main(){
    ...
    sum = CalcAvg (tests, 6, avg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:27:09.603

您需要将`sum`您计算为总和的值分配给变量`CalcAvg`（我更改了您的`CalcAvg`函数以返回总和）

```
#include <iostream>
using namespace std;
//prototype (fixed to return the sum)
int CalcAvg(int tests[], int numTests, float& avg);

int main ()
{

    int tests[6]; //array declaration
    float avg;
    int sum=0;

    //input test scores
    cout<<"Enter"<<6<<"test scores:"<<endl;
    for (int i=0; i<6; i++)
    {
        cout<<"enter Test"<<i+1<<":";
        cin>>tests[i];
    }

    //2.print first test score

    cout<<tests[0]<<endl;

    //3.print the last test score

    cout<<tests[5]<<endl;

    //4.print all test scores

    for(int i=0; i<6; i++)
    {
        cout<<tests[i]<<endl;
    }

    //7\. Calculate Sum & Avg using function

    sum = CalcAvg (tests, 6, avg);

    cout<<"Your sum is"<<sum<<" and your average is "<<avg<<endl;

return 0;
}

int CalcAvg(int tests[], int numTests, float& avg)

{

    int sum=0;
    for (int i = 0; i < numTests; i++)
    {
        sum = sum + tests[i];
    }
avg = (float)sum/numTests;
return sum;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T19:29:48.430

这看起来像是“范围”的问题

请注意，`sum`in CalcAvg 与 in main 是分开的`sum`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:32:32.657

首先我必须问你为什么使用`cout<<"Enter"<<6<<"test scores:"<<endl;`insted of`cout<<"Enter 6 test scores:"<<endl;`

你在一个函数中减少了总和。ic c++ 它在函数中创建变量，并在函数结束时销毁。您是否认为`sum`您在主函数中声明的内容是通过 CalcAvg 函数更改的。为此，`sum`如果您想更改在 main() 中声明的值，您应该在函数中重新运行一个指针。

或使用 return 语句在 CalcAvg 函数中返回总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T19:43:13.650

请参阅此示例以了解如何使用指针更改函数的值。

```
main(){
  int x=5;      
  change(&x);
  cout<<x;
  }

void change(int *p){
   *p=10;
  } 
```

# mysql - 需要：如果 UPDATE 不更改表中的值，则更新时的 mysql 当前时间戳

> ID：13710276
> 
> 赞同：3
> 
> 时间：2012-12-04T19:16:26.673
> 
> 标签：mysql, timestamp

我有一个包含 3 列的数据库：

ID / 价格 / last_updated

“last_updated”列有..

*   作为**类型**：时间戳
*   作为**标准**：CURRENT_TIMESTAMP
*   作为**属性**：更新时的当前时间戳
*   作为**额外**：更新时的当前时间戳

当我运行 mysql_query(UPDATE...) 来更改价格时，有些价格不会改变。但是，在这些情况下，last_updated 值与之前保持不变（在这种情况下为：0000-00-00 00:00:00，因为记录没有更改）。

所以我猜，如果新值与当前值不同，UPDATE 只会“更新”。

即使在执行 mysql_query(UPDATE...) 后值没有更改，如何将当前时间戳放入表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:24:29.777

在您的查询中，始终`last_updated`使用更新字段`NOW()`。像这样：

```
UPDATE table SET price = ?, last_updated = NOW() WHERE id = ?? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:18:33.550

试试这个 ：

```
ALTER TABLE myTable 
MODIFY last_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

对于一次性修复，在现有表上：

```
update myTable set last_updated=now() where last_updated='0000-00-00 00:00:00' 
```

# bootstrapper - 引导程序先决条件未显示

> ID：13710282
> 
> 赞同：1
> 
> 时间：2012-12-04T19:16:59.513
> 
> 标签：bootstrapper, prerequisites

我对 Bootstrapper 先决条件有疑问（使用 Bootstrapper Manifest Generator 并手动完成......）。我想将 Visual Power Packs 3.0 和 Microsoft Sync 2.1 打包在一个包中，因此它只与设置一起出现在一个文件夹中，例如 (FinalApp_Prerequisites)。问题在于，仅检测到 2 个可执行文件中的一个，而不是两者。

这是我的 Product.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<Product ProductCode="FinalApp.Prerequisites" xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper">
  <PackageFiles CopyAllPackageFiles="true">
    <PackageFile Name="synchronization-v2.1-x64-esn.msi" PublicKey="3082010A0282010100BD3089FB4572A8536B9E894F0023C0BED41D3DB1594038F373918226E696120053D91C820E3CCE1DBBBDF7428D97D4FC381AE4B9F9E3ECD36103BFA0D3D6754D5C46A9ED5EF0D2E2695B1A73EAB31C8D04CD2944A064592F1E985D6EC7AB18398265C4A7BCAB758819EA87971426B37F2676A4D4383984E3B326D518F92BE9D2C9165A5421F2978D878629FEF4492CE68BF8043F7DCDCD9692860D7103E2D0FE0C4235FFD7B83FDD8E450A7DF6D74BAD5BF076721D77237D8935C41C5DB250034B476D07A75588980680A681AD544ED881D6FABF42C031BE550D99D553491230EBE5A5887C5EC47A5A148708B43769A0EB32248C08EBF9D414BAE0FCCDEAA4150203010001" />
    <PackageFile Name="visualbasicpowerpacks3setup.exe" PublicKey="3082010A0282010100A2DB0A8DCFC2C1499BCDAA3A34AD23596BDB6CBE2122B794C8EAAEBFC6D526C232118BBCDA5D2CFB36561E152BAE8F0DDD14A36E284C7F163F41AC8D40B146880DD98194AD9706D05744765CEAF1FC0EE27F74A333CB74E5EFE361A17E03B745FFD53E12D5B0CA5E0DD07BF2B7130DFC606A2885758CB7ADBC85E817B490BEF516B6625DED11DF3AEE215B8BAF8073C345E3958977609BE7AD77C1378D33142F13DB62C9AE1AA94F9867ADD420393071E08D6746E2C61CF40D5074412FE805246A216B49B092C4B239C742A56D5C184AAB8FD78E833E780A47D8A4B28423C3E2F27B66B14A74BD26414B9C6114604E30C882F3D00B707CEE554D77D2085576810203010001" />
  </PackageFiles>
  <Commands Reboot="Defer">
    <Command PackageFile="synchronization-v2.1-x64-esn.msi">
      <ExitCodes>
        <DefaultExitCode Result="Fail" String="Anunexpectedexitcodewasr" FormatMessageFromSystem="true" />
      </ExitCodes>
    </Command>
    <Command PackageFile="visualbasicpowerpacks3setup.exe">
      <ExitCodes>
        <DefaultExitCode Result="Fail" String="Anunexpectedexitcodewasr" FormatMessageFromSystem="true" />
      </ExitCodes>
    </Command>
  </Commands>
</Product> 
```

这是我的 Package.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Package Name="DisplayName" Culture="Culture" xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper">
  <Strings>
    <String Name="Culture">en</String>
    <String Name="DisplayName">FinalApp Prerequisites (Microsoft Synchronizer Framework 2.1 & Microsoft Visual Basic Power Packs 3.0)</String>
    <String Name="Anunexpectedexitcodewasr">An unexpected exit code was returned from the installer. The installation failed.</String>
  </Strings>
</Package> 
```

我究竟做错了什么？还是我不能将 2 个可执行文件放在一起作为先决条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:48:55.010

这两个命令只有一个默认的退出代码，它是失败的。因此，当引导程序运行时，它总是会检测到第一个安装失败，因此第二个将不再运行。例如，您可以定义 exitcode 0 表示成功：

```
<Command PackageFile="visualbasicpowerpacks3setup.exe">
  <ExitCodes>
    <ExitCode Value="0" Result="Success"/>
    <DefaultExitCode Result="Fail" String="Anunexpectedexitcodewasr" FormatMessageFromSystem="true" />
  </ExitCodes>
</Command> 
```

# css - 很少有跨度会发疯

> ID：13710283
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:17:05.213
> 
> 标签：css, html

我的网站上的跨度很少，我正试图让它们在我想要的地方继续，但目前进展不顺利。

我的 HTML 代码：

```
<span class="forumname"><a href="./forum1.aspx">מה שבראש</a></span><br />
<span class="forumname"><a href="./forum2.aspx">מה שבלב</a></span><br />
<span class="forumname"><a href="./forum3.aspx">תמונות הגולשים</a></span><br />
<span class="forumname"><a href="./forum4.aspx">סקרים</a></span><br />
<span class="forumname"><a href="./forum5.aspx">אקטואליה</a></span><br />
<span class="forumname"><a href="./forum8.aspx">יהדות ותורה</a></span><br />
<span class="forumname"><a href="./forum9.aspx">אתאיזם</a></span><br />
<span class="forumname"><a href="./forum10.aspx">צבא וביטחון</a></span><br /> 
```

CSS 中的论坛名称类：

```
.forumname {
color: black;
text-decoration: none;
font-family: Arial;
font-size: 14px;
position: relative;
top: 77px;
left: 720px;
font-weight: bold;
margin-top: 80px; } 
```

这是结果：

![结果](../Images/281932816664cf3f15ac2450ce761f1e.png)

如何对齐所有跨度，以便它们都可以从右侧的相同位置开始？请帮帮我，我什么都试过了，我快疯了！我尝试添加方向：rtl; 到 span 类，float: 左右；但没有成功。

提前谢谢你，Iliya Vaitzman。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:21:05.120

只需`text-align: right`在父元素上设置文本 - [**DEMO**](http://jsfiddle.net/fbLPz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:34:27.213

那真的需要一个列表，跨度只是绝对错误的方法...... [http://jsfiddle.net/calder12/xUSdv/1/](http://jsfiddle.net/calder12/xUSdv/1/)

```
<ul>
<li><a href="./forum1.aspx">מה שבראש</a></li>
<li><a href="./forum2.aspx">מה שבלב</a></li>
<li><a href="./forum3.aspx">תמונות הגולשים</a></li>
<li><a href="./forum4.aspx">סקרים</a></li>
<li><a href="./forum5.aspx">אקטואליה</a></li>
<li><a href="./forum8.aspx">יהדות ותורה</a></li>
<li><a href="./forum9.aspx">אתאיזם</a></li>
<li><a href="./forum10.aspx">צבא וביטחון</a></li>
</ul>

li a{
color: black;
font-family: Arial;
font-size: 14px;
position: relative;
font-weight: bold;
margin-top: 80px;}
li{ list-style-type:disc;
margin-right:100px;}
ul{ 
text-align:right;} 
```

# path - JavaFx2.x：扩展路径

> ID：13710286
> 
> 赞同：1
> 
> 时间：2012-12-04T19:17:13.833
> 
> 标签：path, javafx-2, super

下面的代码执行手绘，我的问题是这个类在 Linux 下编译，但在 WindowsXP 中出现错误。

![在此处输入图像描述](../Images/4269fe1aa033c5155bf1c5e486516988.png)

这是代码

```
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.control.ContextMenu;
import javafx.scene.control.MenuItem;
import javafx.scene.input.ContextMenuEvent;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;
import javafx.scene.input.MouseEvent;
import javafx.scene.paint.Color;
import javafx.scene.shape.Path;
import javafx.scene.shape.PathElement;

public class Freehand {
private Group               group ;
private FreeHandDrawPath    freehandDraw;

public Freehand(ObservableList<PathElement> _initFreehand) {

            this.freehandDraw = new FreeHandDrawPath(_initFreehand);        
    this.group = new Group();
    group.getChildren().add(freehandDraw);

            group.addEventHandler(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
                @Override
                public void handle(final KeyEvent keyEvent) {

                    if (keyEvent.getCode() == KeyCode.DELETE ) {
                        group.getChildren().removeAll(freehandDraw);
                    }                        
                }
            });
}
class FreeHandDrawPath extends Path {            
        double x, y;
        final ContextMenu contextMenu = new ContextMenu();            
        final MenuItem itemDelete = new MenuItem("Delete");

        FreeHandDrawPath (ObservableList<PathElement> _initFreehand) {
                  super(_initFreehand);          

            setStroke(Color.BLACK);

            itemDelete.setOnAction(new EventHandler<ActionEvent>() {
            @Override
                public void handle(ActionEvent e) {
                    group.getChildren().removeAll(freehandDraw);
                    //System.out.println("Delete");
                }
            });

            contextMenu.getItems().addAll(itemDelete);

            this.addEventHandler(MouseEvent.MOUSE_ENTERED, new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {                            
                            // just to show that the line is selected
                            x = event.getX();
                            y = event.getY();
            setStroke(Color.RED);
                            setStrokeWidth(getStrokeWidth()+4);                                
                            group.requestFocus();
            event.consume();
        }
    });
            this.addEventHandler(MouseEvent.MOUSE_EXITED, new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {                                
                            setStroke(Color.BLACK);
                            setStrokeWidth(getStrokeWidth()-4);
            event.consume();
        }
    });                

            this.addEventHandler(MouseEvent.MOUSE_PRESSED, new EventHandler<MouseEvent>() {                                                         
                    @Override
        public void handle(MouseEvent event) {                            

                        if (event.isSecondaryButtonDown()){                                                                
                            setOnContextMenuRequested(
                                    new EventHandler<ContextMenuEvent>() {
                                        @Override
                                        public void handle(ContextMenuEvent event) {
                                            //contextMenu.show(l, Side.RIGHT, 0, 0);
                                            contextMenu.show((Path) event.getSource(), event.getScreenX() + 1, event.getScreenY());
                                            //System.out.println("Hello World!");
                                        }
                            });
                        }
                        event.consume();
        }                      
    });                
        }
    }

    public Node view() {
    return group ;
}    
} 
```

为什么我会收到这样的错误？

谢谢。

# asp.net - 在代码隐藏文件中使用 VB.Net 编码填充 ASP.Net DropDownList

> ID：13710292
> 
> 赞同：4
> 
> 时间：2012-12-04T19:17:49.373
> 
> 标签：asp.net, vb.net, populate, html-select

我们在 ASP.Net / VB.Net Web 表单的标记中有一个 DropDownList。

我们希望使用从 DataSet 设计器创建的 DataSet 中的数据填充 DropDownList，但我们在代码隐藏文件中使用的编码未使用 FindControl 找到 DropDownList ID。

你能检查我的编码并让我知道我还需要做什么来填充 DropDownList 吗？

DropDownList 的标记：

```
<% '-- DetailsView (Grid) for details of the GridView -- %>
<% '---------------------------------------------------- %>
<asp:DetailsView 
    ID="DetailsView" 
    runat="server" 
    AutoGenerateRows="False" 
    Height="50px" 
    Width="207px" 
    DataSourceID="SqlDataSourceDetails"
    DataKeyNames="ID"
    OnItemCommand="DetailsViewDetails_ItemCommand"
    OnDataBound="DetailsView_DataBound">

<Fields>

<asp:TemplateField HeaderText="Class:" SortExpression="ClassID">

     <EditItemTemplate>
          <asp:DropDownList ID="DropDownListClass" Runat="server"> </asp:DropDownList>

          <asp:RequiredFieldValidator ID="RequiredFieldValidatorEditDropDownListClass" runat="server" 
              ControlToValidate="DropDownListClass" 
              ErrorMessage="Please select a class." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
              SetFocusOnError="True" Display="Dynamic">
          </asp:RequiredFieldValidator>
      </EditItemTemplate>

      <ItemTemplate>
          <asp:Literal ID="LiteralClass" runat="server" 
              Text='<%# FormatAsMixedCase(Eval("ClassName").ToString())%>' />
      </ItemTemplate>

      <ItemStyle ForeColor="Blue" />
 </asp:TemplateField>

 </Fields> 
```

在代码隐藏文件中编码：

```
Protected Sub DetailsView_DataBound(sender As Object, e As EventArgs)

    Dim theClassesTableAdapter As New DataSetClassesTableAdapters.ClassesTableAdapter
    Dim ddlTheDropDownList = DirectCast(FindControl("DropDownListClass"), DropDownList)

    ddlTheDropDownList.DataSource = theClassesTableAdapter.GetDataByAllClasses
    ddlTheDropDownList.DataTextField = "ClassName"
    ddlTheDropDownList.DataValueField = "ClassID"
    ddlTheDropDownList.SelectedValue = "ClassID"
    ddlTheDropDownList.DataBind()
End Sub 
```

DetailsView 的 DataSouce 的标记：

```
<% '-- Datasources -- %>
<% '----------------- %>
<asp:SqlDataSource 
    ID="SqlDataSourceDetails" 
    runat="server" 

    ConnectionString="<%$ ConnectionStrings:Knowledge Academy %>" 

    DeleteCommand=
        "DELETE FROM [TeacherSchedule] 
          WHERE [ID] = @ID" 

    InsertCommand=
        "INSERT INTO [TeacherSchedule] 
            ([DayOfWeek], 
             [Grade],
             [StartTime],
             [EndTime],
             [ClassID]) 
        VALUES (@DayOfWeek, 
                @Grade, 
                @StartTime, 
                @EndTime,
                @ClassID)" 

    SelectCommand=
        "SELECT        TeacherSchedule.ID, TeacherSchedule.Grade, TeacherSchedule.StartTime, TeacherSchedule.EndTime, TeacherSchedule.TeacherID, TeacherSchedule.ClassID, 
                     TeacherSchedule.DayOfWeek, Classes.ClassName, Teachers.Forename,  Teachers.Surname
           FROM            TeacherSchedule INNER JOIN
                     Classes ON TeacherSchedule.ID = Classes.ID INNER JOIN
                     Teachers ON TeacherSchedule.ID = Teachers.ID
          WHERE (TeacherSchedule.ID = @ID)" 

    UpdateCommand=
        "UPDATE [TeacherSchedule] 
            SET [DayOfWeek] = @DayOfWeek, 
                [Grade] = @Grade, 
                [StartTime] = @StartTime,
                [EndTime] = @EndTime,
                [ClassID] = @ClassID
            WHERE [ID] = @ID">

    <DeleteParameters>
        <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>

    <InsertParameters>
        <asp:Parameter Name="DayOfWeek" Type="String" />
        <asp:Parameter Name="Grade" Type="String" />
        <asp:Parameter Name="StartTime" Type="String" />
        <asp:Parameter Name="EndTime" Type="String" />
        <asp:Parameter Name="ClassID" Type="Int32" />
    </InsertParameters>

    <SelectParameters>
        <asp:ControlParameter ControlID="GridViewSummary" Name="ID" PropertyName="SelectedValue" Type="Int32" />
    </SelectParameters>

    <UpdateParameters>
        <asp:Parameter Name="DayOfWeek" Type="String" />
        <asp:Parameter Name="Grade" Type="String" />
        <asp:Parameter Name="StartTime" Type="String" />
        <asp:Parameter Name="EndTime" Type="String" />
        <asp:Parameter Name="ClassID" Type="Int32" />
        <asp:Parameter Name="ID" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T08:47:16.430

尝试在 DropDownList_Init 事件处理程序中填充您的 DropDownList。

标记：

```
<asp:DropDownList ID="ddlTheDropDownList" runat="server" OnInit="ddlTheDropDownList_Init"> 
```

后面的代码应该是这样的，我更习惯 C# 但我希望你明白这一点：

```
Protected Sub ddlTheDropDownList_Init(sender As Object, e As EventArgs)
    Dim ddl As DropDownList
    ddl = sender As DropDownList
    ddl.Datasource = theClassesTableAdapter.GetDataByAllClasses
    ddl.DataTextField = "ClassName"
    ddl.DataValueField = "ClassID"
    ddl.SelectedValue = "ClassID"
    ddl.DataBind()
End Sub 
```

# java - 带有安装程序的 java 桌面应用程序

> ID：13710302
> 
> 赞同：-3
> 
> 时间：2012-12-04T19:18:32.130
> 
> 标签：java, swing, javafx

我是java桌面应用程序开发的新手我想开发一个桌面应用程序，具有以下要求的windows、mac os和linux安装程序将它连接到远程应用程序服务器（jboss7/websphere8）和数据库服务器以及我想要的本地数据存储将 javaFX 用于 gui

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:21:48.723

我认为[Netbeans](http://netbeans.org/kb/articles/javase-deploy.html)是您的答案。

# iphone - AVAudioPlayer 不适用于 iPhone 5

> ID：13710304
> 
> 赞同：3
> 
> 时间：2012-12-04T19:18:48.223
> 
> 标签：iphone, ios, ios6, avaudioplayer, iphone-5

有没有人在使用 iPhone 5 时遇到过 AVAudioPlayer 的问题？我的代码在 iPhone 4、iPhone 4S 和 iPad（第 3 代）上正常运行，但现在随机无法在 iPhone 5 上运行。我看到了这个问题，但没有人解决实际问题：

[AVAudioPlayer 在 iPhone 5 中不起作用](https://stackoverflow.com/questions/13558407/avaudioplayer-is-not-working-in-iphone-5)

```
NSURL *soundURL = [self urlForAlarmSong:songKey];    
NSError *err;
self.audioAlert = [[[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&err] autorelease];

[self.audioAlert prepareToPlay];
currentVolume=[MPMusicPlayerController applicationMusicPlayer].volume;
[[MPMusicPlayerController applicationMusicPlayer] setVolume:1.0];

[self.audioAlert play]; 
```

audioAlert 是一个 AVAudioPlayer，我在我的标题中声明了（保留，非原子）。err 变量每次都为空，即使它不在 iPhone 5 上播放也是如此。这段代码每次在 iPhone 4、iPhone 4S 和 iPad（第 3 代）上都能完美运行。

有没有人有任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:54:14.287

```
 -(void)viewDidLoad

  {

  NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"click2"         ofType:@"mp3"]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
    if(error)
    {
        NSLog(@"error in audio player:%@",[error localizedDescription]);
    }
    else

    {

     audioPlayer.delegate=self;

     [audioPlayer prepareToPlay];
    }

   } 
```

在按钮动作上，

```
-(IBAction)SoundButton:(id)sender

     {

       [audioPlayer play];

     } 
```

在您的 .h 文件中，不要忘记导入

```
 #import  AVFoundation/AVFoundation.h 
```

并添加一个委托 `AVAudioPlayerDelegate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:41:08.317

确保设备的声音开关没有处于“静音”状态并且音量足够高。

看起来很明显，但它可以节省数小时的压力。

# parameters - 在 Lightswitch 中设置参数的默认值

> ID：13710308
> 
> 赞同：1
> 
> 时间：2012-12-04T19:19:09.017
> 
> 标签：parameters, visual-studio-lightswitch

我正在尝试为 Lightswitch 中的多值参数设置默认值，但没有运气。

例如，我有一个硬件清单。“硬件”表具有 ('active', bool) 和 ('company_id',int) 字段。Company_id 是 Company 表的外键，其中包含可供选择的公司列表。

我想根据这两个字段过滤我的 Lightswitch 屏幕，但是当屏幕第一次加载时，我希望它默认为主要公司，用于活动硬件。

我已经为我的“活动”参数创建了本地属性，并将其添加到屏幕上。设置公司参数的下拉列表需要：

*   添加数据项（作为查询，从我的数据源中选择名为 Companies 的表）
*   添加数据项（作为公司类型的本地属性，名为 SelectedCompany）
*   将查询参数绑定到 SelectedCompanies.company_id 属性
*   将 SelectedCompanies 添加到屏幕

然后我在代码中指定了默认值：

```
partial void Screen1_Created()
    {
        // Write your code here.
        SelectedCompanies.company_id = 2;
        selected_active_property = true;
    } 
```

这适用于布尔值的“活动”参数，但是 SelectedCompanies 行给出了一个智能感知错误：

> 无法将属性或索引器“LightswitchApplication.company.company_id”分配给 - 它是只读的

以前有没有人为这种类型的参数设置过默认值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:00:25.203

在 LightSwitch 中，不能直接设置外键。您必须从表中检索实体，并将该实体分配给实体属性。

因此，在您的情况下，它将是：

```
partial void Screen1_Created()
{
    SelectedCompany = this.DataWorkspace.ApplicationData.Companies_SingleOrDefault(2);
    selected_active_property = true;
} 
```

# asp.net-mvc-4 - 连接到 ASP.NET MVC4 Web API 项目中的现有数据库

> ID：13710310
> 
> 赞同：1
> 
> 时间：2012-12-04T19:19:31.490
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET web api 框架构建一个 web api。我已经看过一些关于如何开始的教程，但我还没有找到使用现有的 SQL Server 数据库。我已经启动并运行了数据库，还在 VS 中添加了到数据库资源管理器的数据连接，但我不知道如何将数据库连接到我的项目，所以我可以开始将它用作我的存储库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:27:47.320

将以下内容放入您的应用程序 web.config 文件中，并将“yourConnectionString”替换为实际的连接字符串。

```
<configuration>
       <connectionStrings>
           <add name="DbConnection" connectionString="yourConnectionString" />
       </connectionStrings>
</configuration> 
```

在代码中使用`System.Configuration.ConfigurationManager.ConnectionStrings["DbConnection"].ConnectionString`来获取它的值。您可能需要在项目中引用“System.Configuration”程序集。

# c# - dbcontext 上的实体框架选择子句

> ID：13710313
> 
> 赞同：3
> 
> 时间：2012-12-04T19:19:45.020
> 
> 标签：c#, entity-framework

是否可以在 dbcontext.set 上有一个 select 子句。我有以下代码返回数据库表中人员的所有共同保险并选择所有列。

```
public IQueryable<Person> GetPeople()
{
    return DbContext.Set<Person>();                
} 
```

我只想选择用户名和电子邮件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T19:22:20.720

```
var projection = GetPeople().Select(p => new {p.Username, p.Email}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:47:24.020

在您的示例和 Jason 的示例中，您应该知道您正在传递上下文感知对象这一事实。对数据的进一步操作可能会导致对数据库的意外命中。此外，当您执行 DbContext.Set() 之类的函数时，您正在执行 EF 中最慢的数据库调用形式。对于最快和最有效的数据库调用，您将执行以下操作：

```
 public List<GetPersonResult> GetPeople()
 {
       return (from p in dbContext.People
              select new GetPersonResult
              {
                   UserName = p.Username,
                   EmailAddress = p.Email
              }).ToList();
 }

 public class GetPersonResult
 {
       public string UserName{get;set;}
       public string EmailAddress{get;set;}
 } 
```

原始 SQL 是 EF 使用的最快形式。几乎与原始 ADO.NET 一样快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T09:52:55.730

这里：

```
public IQueryable<Person> GetPeople()
{
    return DbContext.Set<Person>().Select(per => new {per.UserName, per.Email})                
} 
```

并且您想过滤结果，例如添加一些重载：

```
public IQueryable<Person> GetPeople()
{
    return DbContext.Set<Person>().Select(per => new {per.UserName, per.Email})                
}

public IQueryable<Person> GetPeople(int cityId)
{
    return DbContext.Set<Person>().Where(p => p.CityID == cityId)
               .Select(per => new {per.UserName, per.Email})                
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T11:09:24.440

如果要检索对象 person ：

在“Person”类中添加构造函数

```
 public Person(string UserName, string EmailAddress){
      This.UserName = UserName;
      This.EmailAddress = EmailAddress;} 
```

并修改此方法

```
public IQueryable<Person> GetPeople()
{
    return DbContext.Set<Person>()
                    .Select(per => new Person(per.UserName, per.Email));                 
} 
```

# routes - 如何在 Strophe 中路由群聊消息

> ID：13710314
> 
> 赞同：2
> 
> 时间：2012-12-04T19:19:48.147
> 
> 标签：routes, xmpp, ejabberd, strophe

我收到一条看起来像这样的消息...

```
<message 
    from='pinza@some.com' 
    to='tulyar@some.com' 
    type='groupchat' 
    xmlns='jabber:message:group_chat_test'>

    <body>Here is my message.</body>
</message> 
```

在我的 routes.js 文件中，我试图根据正文内容以外的其他内容来路由消息 - 具体来说，我想根据自定义命名空间来路由它（所以我可以有不同的群聊消息类型，由不同的控制器）所以我试试这个......

```
bind.query('message[type="groupchat"][xmlns="jabber:message:group_chat_test"]')
  .to(SD.Messenger.Room, "groupchat_test"); 
```

但是消息进入以太而不是到达 group_chat_test 控制器。我们用 <iq> 做类似的事情，但它似乎不适用于群聊消息。

我错过了什么吗？我应该能够以这种方式查询群聊消息吗？我还有其他方法可以做到吗？

仅供参考，我目前的解决方法是这个黑客......

```
bind.query('message[type="groupchat"]').to(SD.Messenger.Room, "all_groupchat_msgs"); 
```

在 controllers.js 中使用这个

```
SD.Messenger.Room.prototype.all_groupchat_msgs = function() {
   // test the body of the incoming stanza and 
   // based on it's contents do different things...
}; 
```

（使用 Ejabberd、Bosh、Stroph）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:39:10.010

您不能更改主要 XMPP 节消息、iq 和存在的名称空间。您只能在这些子元素上拥有自定义命名空间。

当您的 IQ 工作时，您可能在其中一个子元素中拥有自定义命名空间。

例子：

```
<iq type='get' id='1' to='user@server.com/resource'>
   <query xmlns='my-custom-ns'>
      payload
   </query>
</iq>

<message type='groupchat' to='room@muc.server.com'>
   <x xmlns='my-custom-ns'>
      payload
   </x>
</message> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:30:05.473

这是有效的方法...添加自定义属性...

```
<message 
    from='pinza@some.com' 
    to='tulyar@some.com' 
    type='groupchat' 
    custom_subtype='my_custom_type'>

    <body>Here is my message.</body>
</message> 
```

创建一个在该自定义属性上归档的路由

```
bind.query('message[type="groupchat"][custom_subtype="my_custom_type"]')
  .to(Room, "controller_for_my_custom_type"); 
```

# youtube - 是否有 API 可以从公共/私人 YouTube 播放列表中检索随机视频？

> ID：13710317
> 
> 赞同：0
> 
> 时间：2012-12-04T19:19:56.343
> 
> 标签：youtube, youtube-api, playlist

这个问题应该是不言自明的。我想以 XML/JSON 格式返回它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:53:17.503

AFAIK 没有；但是编写一个从标准播放列表提要中执行此操作的函数应该不难。例如，在 Python 中，您可以执行以下操作：

```
from lxml import etree
from random import choice
import urllib2

ATOM='{http://www.w3.org/2005/Atom}'
feed=etree.fromstring(urllib2.urlopen("[feedURL]").read())
entries=feed.findall(ATOM+'entry')
random_vid=choice(entries)
links=random_vid.findall(ATOM+'link')
for link in links:
 if link.get('rel')=='alternate':
  vid_url=link.get('href')

print vid_url 
```

无论您使用哪种语言，都应该能够以同样快的速度完成它。

# ios - 无尽的跑步游戏使用什么公式来设置玩家的速度？

> ID：13710324
> 
> 赞同：0
> 
> 时间：2012-12-04T19:20:43.747
> 
> 标签：ios, game-physics, 2d-games

我正在制作一个没完没了的跑步游戏（例如 canabalt、temple run、Jetpack Joyride），并且我正在努力让它的“感觉”正确。到目前为止，我使用以下等式来设置速度：

```
speed = (time+500)*(.05+(time/300)) 
```

除了反复试验之外，还有什么技巧可以让你感觉增加恰到好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:34:55.290

好吧，我在我的一个游戏中做了类似的事情，但我并没有不断地提高速度，我每分钟增加一次，或者一旦玩家达到一定数量的分数。像这样：

```
- (void)setTravelTimeTo:(NSNumber*)targetTime
{
    if (maxTravelTime > targetTime.floatValue)
    {
        maxTravelTime -= 0.1f;
        [self performSelector:@selector(setTravelTimeTo:) withObject:targetTime afterDelay:2];
    }
} 
```

时间在哪里`maxTravelTime`，或者在你的情况下速度在哪里。只需修改它以满足您的需求。在这种情况下，行程时间是移动平台穿过整个屏幕所需的时间。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:45:51.447

一般来说，你会在前进的过程中积累速度和位置。所以像

```
a = <some function of current speed (drag), player actions, and terrain>
v = v + a*deltaTime
x = x + v*deltaTime 
```

DeltaTime 只是自上次计算以来的时间——可能是最后一帧。这意味着 v 最多应该与时间成线性关系（而不是公式中的二次方）。位置最多是二次方。“a”的计算应确保当 v 接近某个最大速度（可能取决于级别）时，“a”变为零。

# python - Python 中的子字符串。内存中的副本？

> ID：13710329
> 
> 赞同：3
> 
> 时间：2012-12-04T19:20:47.937
> 
> 标签：python, regex, string, immutability

假设我在 Python 中有一个字符串`my_string`，并且我根据以下内容对其进行标记`some_pattern`：

```
match.re.search(some_pattern, my_string)
string_1 = match.group(1)
string_2 = match.group(2)
.... 
```

`string_1`子字符串的和`string_2`（“深”）副本是否在内存中`my_string`或对内存中相同位置的引用？为 ?中的字符的完整副本执行`string_1`并分配内存？`string_2``my_string`

请注意，我**不是在询问**字符串的不变性。如果`my_string`很*长*，我想知道通过标记我的字符串对**内存的影响是什么。**

我不需要确切知道重用了多少内存，但是知道字符串的标记化是否最终会复制内存肯定会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:38:07.037

通过查看 Python 2.7.3 源代码，获取字符串切片会复制字符数据：

`Objects/stringobject.c`：

`string_slice()`调用以下函数`PyString_FromStringAndSize()`：

```
/* Inline PyObject_NewVar */
op = (PyStringObject *)PyObject_MALLOC(PyStringObject_SIZE + size);
if (op == NULL)
    return PyErr_NoMemory();
PyObject_INIT_VAR(op, &PyString_Type, size);
op->ob_shash = -1;
op->ob_sstate = SSTATE_NOT_INTERNED;
if (str != NULL)
    Py_MEMCPY(op->ob_sval, str, size);
op->ob_sval[size] = '\0'; 
```

这里，`str`是指向字符数据的指针，`size`是长度。注意 malloc 和 memcpy。

不同的 Python 实现（以及不同版本的 CPython）可能表现不同。例如，Jython 可能使用[`java.lang.String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)，它不会进行复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:22:53.190

字符串在 python 中是不可变的，因此子字符串只是新对象。

```
In [7]: str="foobar"

In [8]: id(str)
Out[8]: 140976032

In [10]: id(str[:4])
Out[10]: 141060224 
```

返回的子字符串对象与原始字符串对象相同的唯一情况是`string==substring`：

```
In [16]: foo="foobar"

In [17]: id(foo)
Out[17]: 140976032

In [18]: id(foo[:])
Out[18]: 140976032

In [19]: foo="foobar"*10000   # huge string

In [20]: id(foo)
Out[20]: 141606344

In [21]: id(foo[:])
Out[21]: 141606344 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:23:02.510

Python 字符串是不可变的，因此在这种情况下区别没有多大意义，但它们是副本。您无能为力，`string_1`也`string_2`不会影响`my_string`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:40:22.787

不确定它有多大帮助甚至回答你的问题，但你可以使用`finditer`然后只根据需要对原始字符串进行切片......

```
>>> import re
>>> string = 'abcdefhijkl'
>>> matches = list(re.finditer('.' , string))
>>> dir(matches[0])
['__class__', '__copy__', '__deepcopy__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'end', 'endpos', 'expand', 'group', 'groupdict', 'groups', 'lastgroup', 'lastindex', 'pos', 're', 'regs', 'span', 'start', 'string']
>>> matches[0].span()
(0, 1) 
```

然后从那里去...

# java - 方法调用中的构造函数定义

> ID：13710331
> 
> 赞同：2
> 
> 时间：2012-12-04T19:20:51.867
> 
> 标签：java, constructor

所以我一直在关注这个教程，发现了一些我觉得很困惑的东西。

```
ITexture backgroundTexture = new BitmapTexture(this.getTextureManager(), new IInputStreamOpener() {
        @Override
        public InputStream open() throws IOException {
            return getAssets().open("gfx/background.png");
        }
    }); 
```

现在我不认为自己是 java 专家或任何东西，但我也不是一个完整的新手，而且我从未见过这种事情，这意味着调用时的构造函数定义。至少在我看来，这根本不像 java。问题是，动态定义构造函数的特定方式是否有名称，以便我可以了解更多信息，因为老实说我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:22:17.560

它是匿名类的[匿名](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.5)[类构造函数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.5.1)，是创建子类的简写方式。[这是关于匿名类的 Oracle 教程](https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)。

# javascript - 如果没有找到匹配的值，jQuery-ui 自动完成显示所有值

> ID：13710334
> 
> 赞同：2
> 
> 时间：2012-12-04T19:21:22.610
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

是否可以使用 jQuery 自动完成功能，以便如果有可用的“来源：”值，但它们与您输入的内容不匹配，那么只需一次显示所有来源？

IE，给定以下代码，如果我输入“菠萝”，你如何显示所有编程语言而不是一个都不显示？

```
<script>
$(function() {
    var availableTags = [
        "JavaScript",
        "Perl",
        "PHP",
        "Python",
        "Ruby"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});
</script>
<input type="text" id="tags" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T19:34:58.707

将该[`source`](http://api.jqueryui.com/autocomplete/#option-source)属性与自定义函数一起使用。下面显示的自定义函数模仿自动完成的原始行为，在可用标签内搜索键入的文本作为子字符串。如果未找到匹配项，则返回所有可用标签。

```
$(function() {
    var availableTags = [
        "JavaScript",
        "Perl",
        "PHP",
        "Python",
        "Ruby"
    ];
    $("#tags").autocomplete({
        source: function(request, response) {
            var term = request.term.toLowerCase();
            var matchingTags = $.grep(availableTags, function(tag) {
                return tag.toLowerCase().indexOf(term) >= 0;
            });
            response(matchingTags.length ? matchingTags : availableTags);
        }
    });
});​ 
```

# [演示在这里](http://jsfiddle.net/salman/xP9ua/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:22:31.227

只需编写一个自定义`source`回调。

例如：

```
source: function(req, res){
    res(['w00t', 'yay']);
} 
```

[见文档](http://api.jqueryui.com/autocomplete/#option-source)

在您的情况下（伪代码）：

```
source: function(req, res){
     //find `req` in array
     if not found:
     res(availableTags);
     else:
     res({subset of availableTags});
} 
```

# c# - 如何克服 OutOfMemoryException 从 API 中提取大型 xml 文档？

> ID：13710337
> 
> 赞同：4
> 
> 时间：2012-12-04T19:21:31.143
> 
> 标签：c#, .net, out-of-memory

我正在从 API 中提取 1M+ 条记录。拉动工作正常，但是在尝试`ReadToEnd`进入字符串变量时出现内存不足异常。

这是代码：

```
 XDocument xmlDoc = new XDocument();

        HttpWebRequest client = (HttpWebRequest)WebRequest.Create(uri);
        client.Timeout = 2100000;//35 minutes
        WebResponse apiResponse = client.GetResponse();

        Stream receivedStream = apiResponse.GetResponseStream();
        StreamReader reader = new StreamReader(receivedStream);

        string s = reader.ReadToEnd(); 
```

堆栈跟踪：

```
at System.Text.StringBuilder.ToString()
at System.IO.StreamReader.ReadToEnd()
at MyApplication.DataBuilder.getDataFromAPICall(String uri) in
    c:\Users\RDESLONDE\Documents\Projects\MyApplication\MyApplication\DataBuilder.cs:line 578
at MyApplication.DataBuilder.GetDataFromAPIAsXDoc(String uri) in
c:\Users\RDESLONDE\Documents\Projects\MyApplication\MyApplication\DataBuilder.cs:line 543 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:10:59.923

听起来您的文件对于您的环境来说太大了。为大文件加载 DOM 可能会出现问题，尤其是在使用 win32 平台时（您尚未说明是否是这种情况）。

您可以将 XmlReader 的速度和内存效率与 XElement/Xnode 等的便利性结合起来，并使用 XStreamingElement 来保存处理后的转换内容。这对于大文件来说内存效率更高

下面是一个伪代码示例：

```
 // use a XStreamingElement for writing
    var st = new XStreamingElement("root"); 
    using(var xr = new XmlTextReader(stream))
    {
        while (xr.Read())
        {
            // whatever you're interested in
            if (xr.NodeType == XmlNodeType.Element) 
            {
                var node = XNode.ReadFrom(xr) as XElement;
                if (node != null)
                {
                    ProcessNode(node);
                    st.Add(node);
                }
            }

        }
    }
    st.Save(outstream); // or st.WriteTo(xmlwriter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T23:18:51.650

[当内存是一个问题时， XMLReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)是要走的路。它也是最快的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:24:38.717

不幸的是，您没有显示您的代码，但听起来整个文件正在加载到内存中。这就是你需要避免的。

如果您可以使用流来处理文件而不将整个内容加载到内存中，则最好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T07:14:45.847

```
class MyXmlDocument : IDisposable
    {

        private bool _disposed = false;
        private XmlDocument _xmldoc;

        public XmlDocument xmldoc
        {
            get { return _xmldoc; }

        }
        public MyXmlDocument()
        {

            _xmldoc = new XmlDocument();

        }

        ~MyXmlDocument()
        {
            this.Dispose();
        }

        // Public implementation of Dispose pattern callable by consumers.
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);

        }

        // Protected implementation of Dispose pattern.
        protected virtual void Dispose(bool disposing)
        {
            if (_disposed)
            {
                return;
            }

            if (disposing)
            {
                // TODO: dispose managed state (managed objects).
                this._xmldoc = null;
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }

            // TODO: free unmanaged resources (unmanaged objects) and override a finalizer below.
            // TODO: set large fields to null.

            _disposed = true;
        }

    } 
```

您可以使用它，然后您可以编写如下代码

```
Using(MyXmlDocument doc = new MyXmlDocument())
{
  doc.xmldoc = xmldoc.Load(new StreamReader(file));

} 
```

# mysql - 表连接多个 group_concat

> ID：13710340
> 
> 赞同：5
> 
> 时间：2012-12-04T19:21:46.573
> 
> 标签：mysql, group-by, group-concat

我在使用 group_concat 加入表时遇到问题。这是详细信息。

表订单：

```
item_cd    order_id    descs            quantity    status   seq_no
 1           100       coca-cola         2           A         232
 2           100       pizza             1           A         233  
 3           101       cheeseburger      5           A         234
 4           102       pepsi             4           A         235
 4 
```

表指令：

```
item_cd    instruction  
  3         more cheese  
  3         less vegetable 
```

取消项目表：

```
 quantity  seq_no  
    1       234
    1       234
    1       235 
```

现在我想要实现的是这样的：

```
item_cd    descs         quantity    instructions                   cancelled_item  
 1         coca-cola         2       -                                  -
 2         pizza             1       -                                  -
 3         cheeseburger      2       more cheese, less vegetable       1,1
 4         pepsi             4       -                                  1 
```

这是我当前的查询：

```
SELECT 
    ord.item_cd, 
    ord.order_id, 
    ord.descs, 
    ord.quantity,  
    GROUP_CONCAT(x.quantity) as cancelled,  
    GROUP_CONCAT(i.instruction) as instruct  
FROM table_orders ord
LEFT JOIN cancelled_item_table x ON ord.seq_no = x.seq_no
LEFT JOIN table_instructions i ON ord.item_cd = i.item_cd    
WHERE ord.status = 'A'
GROUP BY ord.order_id 
```

这是输出：

```
item_cd    descs         quantity    instructions                   cancelled_item  
 1         coca-cola         2       -                                  1
 2         pizza             1       -                                  1
 3         cheeseburger      2       more cheese, more cheese,  
                                     less vegetable, less vegetable    1,1,1,1
 4         pepsi             4       -                                  1 
```

如果您注意到，芝士汉堡有 2 个取消的项目和 2 条指令，但输出是 4，看起来像是在相乘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:15:10.150

由于与`cancelled_item_table`行相乘的联接，您必须联接到已经分组的子查询，如下所示：

```
SELECT
  ord.item_cd,
  ord.order_id,
  ord.descs,
  ord.quantity - coalesce(x.tot,0) as quantity,
  GROUP_CONCAT(i.instruction) as instruct,
  x.cancelled
FROM
  table_orders ord LEFT JOIN table_instructions i
  ON ord.item_cd = i.item_cd LEFT JOIN
  (select seq_no, count(*) as tot, GROUP_CONCAT(quantity) as cancelled
   from cancelled_item_table
   group by seq_no) x ON ord.seq_no = x.seq_no
WHERE ord.status = 'A'
GROUP BY ord.item_cd, ord.order_id, ord.descs, quantity 
```

# c# - 动态初始化数组的 System.IndexOutOfRangeException

> ID：13710348
> 
> 赞同：0
> 
> 时间：2012-12-04T19:22:16.017
> 
> 标签：c#, arrays

```
var objTypeIndex = from u in context.sistema_DocType_Index where u.docTypeId == id select u.indexId;
indexIds = objTypeIndex.ToList();
int count = indexIds.Count();

string[] names = new string[] {};
int i = 0;                    

foreach (int indexId in indexIds)
{
    //resgata nome do indice e armazena em um array
    string strIndiceID = indexId.ToString();
    int indiceID = Convert.ToInt32(strIndiceID);
    var objIndexName = from u in context.sistema_Indexes where u.id == indiceID select u.idName;
    name = 

    names[i] = objIndexName.First();

    i++;
} 
```

最后一行上方的这一行：names[i] = objIndexName.First();

给出以下错误：

```
System.IndexOutOfRangeException: Index was outside the bounds of the array. 
```

我知道那是什么意思..我只是不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:23:44.393

看这里：

```
string[] names = new string[] {}; 
```

您已经创建了一个*空*数组。您不能将*任何*元素放入该数组中。`i`此语句没有任何价值：

```
names[i] = objIndexName.First(); 
```

目前尚不清楚您要做什么，但也许您想要`List<string>`构建（使用`Add`）而不是数组？或者你可以用一个 LINQ 查询来完成整个事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:27:31.657

代替

```
string[] names = new string[] {}; 
```

经过

```
var names = new List<string>(); 
```

而不是

```
names[i] = objIndexName.First(); 
```

采用

```
names.Add(objIndexName.First()); 
```

然后，您将能够得到您的数组，如下所示：

```
var nameArray = names.ToArray(); 
```

# java - 我可以使用 IBM Social Business Toolkit 来使用 Office365 服务吗？

> ID：13710354
> 
> 赞同：0
> 
> 时间：2012-12-04T19:22:37.680
> 
> 标签：java, oauth, ibm-sbt

我玩过 Google OAuth java 库，但实际上我想在 Connections 环境中使用 Office365 内容。

我的问题是，如何使用新的 IBM SBT SDK 实现以下问题中描述的代码？

[如何将变量从 SPAppToken 映射到 AuthorizationCodeTokenRequest](https://stackoverflow.com/questions/13544723/how-to-map-variable-from-spapptoken-into-authorizationcodetokenrequest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:09:20.717

没有理由你不能使用 sbt/Endpoint 和配置来使用任何 REST 服务，但是我不确定你是否需要做除此之外的任何事情（安全方面），这可能需要更多的工作。

它适用于基本吗？

# java - Apache Axis 中的抢先式身份验证方法？

> ID：13710363
> 
> 赞同：2
> 
> 时间：2012-12-04T19:23:25.833
> 
> 标签：java, authentication, ws-security, axis

我*有点*理解我正在使用 Apache Axis 1.4 来查询 Web 服务。

我得到了一个 WSDL 文件，它生成了一个`XXXXImplServiceLocator`类，该类扩展[`org.apache.axis.client.Service`](http://ws.apache.org/axis/java/apiDocs/org/apache/axis/client/Service.html)并实现了一个生成的扩展接口[`javax.xml.rpc.Service`](http://docs.oracle.com/javaee/1.4/api/javax/xml/rpc/Service.html)。

我的“业务代码”`getXXXXImplPort(URL)`在新`XXXXImplServiceLocator`实例上调用该方法，然后调用：

```
((Stub) port).setTimeout(timeout);
((Stub) port).setUsername(username);
((Stub) port).setPassword(password); 
```

`Stub`是[`org.apache.axis.client.Stub`](http://ws.apache.org/axis/java/apiDocs/org/apache/axis/client/Stub.html)。

设置这些参数后，我只需调用一些`getYYY()`方法，该方法表示对远程服务公开的服务之一的查询，并将结果返回给我一个“域”对象。

**问题**是我必须对这项服务使用抢先式身份验证。我已经尝试通过soapUI进行查询，除非我设置了抢占式身份验证模式，否则我不会有任何结果。

我试过谷歌搜索如何设置该模式，但一无所获。他们所说的只是[使用 Apache HttpClient 的抢先式身份验证](https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4)，它可以很好地“嵌入”或由 Axis 使用，但我真的不知道如何混合使用。

我拥有的唯一与之交互的代码`ServiceLocator`是初始设置，然后只是查询。

**如何设置该抢先式身份验证模式？**我错过了什么吗？我不明白什么以至于我无法解决这个问题？

闻起来像一个非常微不足道的问题，但也许我不太了解这一点的事实阻止了我解决这个问题。

提前谢谢，是的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T00:12:26.933

要强制 Apache Axis 使用抢先式身份验证，请设置用户名和密码，如下所示：

```
import org.apache.axis.client.Call;
import org.apache.axis.client.Stub;
....
....
((Stub) client)._setProperty(Call.USERNAME_PROPERTY, "username");
((Stub) client)._setProperty(Call.PASSWORD_PROPERTY, "password"); 
```

也就是说，如果您仍想使用 Apache HttpClient 作为传输，您可以通过在 Axis 客户端配置文件中设置以下内容来实现，在我的例子中是`client_config.wsdd`：

```
<deployment xmlns="http://xml.apache.org/axis/wsdd/"
    xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
.....
.....
<!-- use CommonsHTTPSender instead of the default HTTPSender -->
<!-- <transport name="http" pivot="java:org.apache.axis.transport.http.HTTPSender" /> -->
<transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender" />
.....
.....
</deployment> 
```

[我从这里](https://stackoverflow.com/a/9466327/399435)得到了上述内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:04:24.180

您可以使用[Apache Rampart](http://axis.apache.org/axis2/java/rampart/)模块来实现[WS Security](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wss)。它在服务级别插入，将处理 WS-Security 的所有内容，如用户名/令牌、X.509 身份验证等。

它不是微不足道的，但也不是那么困难。我们在这里使用 WSS 让 Axis 服务器与 Oracle SOA 服务器通信。

# vim - VimL：检查函数是否存在

> ID：13710364
> 
> 赞同：27
> 
> 时间：2012-12-04T19:23:32.303
> 
> 标签：vim, vim-plugin

现在我正在清理我的`.vimrc`文件以确保它在大多数系统上兼容。

在我的状态栏中，我使用了另一个插件设置的函数，[这个插件](https://github.com/taq/vim-git-branch-info)`GitBranchInfoString()`引入的函数。

我想做的是检查是否设置了此功能，然后才将其添加到状态行。它将在它自己的行中，所以我只需要检查它。

完成此任务的最简单方法是什么？

感谢你的帮助！

编辑：

我有以下内容：

```
if exists('*GitBranchInfoString')
    let &stl.='%{GitBranchInfoString()}'
endif 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-04T19:25:00.177

采用

```
if exists("*GitBranchInfoString")
    " do stuff here
endif 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-10T00:11:57.963

作为替代方案，您也可以使用正则表达式来确定手头的插件是否在您的`runtimepath`:

```
if &rtp =~ 'plugin-name'
    ...
endif 
```

这样做的好处是它适用于目录中只有 vimscript 代码的插件`autoload`，而在最初解析 .vimrc 时无法检测到这些插件，因为在函数调用时加载了自动加载片段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-25T18:59:02.973

当前选择的答案对我不起作用（使用 Vim 7.4 / Ubuntu）。我相信那是因为：

> .vimrc 是在加载任何插件之前获取的

正如@ZyX 在评论中指出的那样。

我的首选方法是**检查插件文件是否存在**。我发现这比在外部文件中编写单独的函数更干净。

```
if !empty(glob("path/to/plugin.vim"))
   echo "File exists."
endif 
```

# android - 来自AsyncTask的多个TextView的Android setText

> ID：13710369
> 
> 赞同：-2
> 
> 时间：2012-12-04T19:23:53.850
> 
> 标签：android, android-asynctask

我使用了[vogella website](http://www.vogella.com/articles/AndroidPerformance/article.html#concurrency_asynchtask)`AsyncTask`中的示例，我用它创建了一个类文件。我正在调用它来更新邮政编码，它正在工作。`Activity A``TextView`

我想知道如何调用它`AsyncTask`来`Activity B`更新另一个邮政编码`TextView`。

所以`AsyncTask`1、2调用不同`Activities`，更新不同`TextViews`。

我必须做点什么`onPostExecute()`，对吧？一些示例代码，非常感谢。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:34:02.203

您可以（我猜）在实例化 TextView 时将其传递给 AsyncTask。

所有没有打开 IDE 的情况，如果语法关闭，我们深表歉意......

```
public class ExampleTask extends AsyncTask<Void, Void, Void> {
    private TextView targetTextView;

    public ExampleTask(TextView target) {
     targetTextView = target;
    }

    @Override
    protected String doInBackground(Void... orSomething) {
      //do work and get a value I guess
    }

    @Override
    protected void onPostExecute(String result) {
      targetTextView.setText(result);
    }
  } 
```

然后你会这样称呼：

```
ExampleTask task = new ExampleTask(theTextViewToUpdate);
task.execute(); 
```

您需要注意您实例化的任务对象的范围，因为对 TextView 的引用最终可能会从您的活动中泄漏内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:33:12.063

**这里我不好，但你可以试试**

可以为不同的活动重用 AsyncTask。为此，您必须从不同的活动中获取不同的参数。在 AsyncTask 类中启动一个带有 case 参数（在其他活动中描述）的构造函数，该参数将决定它是由 Activity A 或 B 或 C 调用的。现在使用 switch case 语句并继续前进。

# yii - Yii CSqlDataProvider->getData 作为浮点数？

> ID：13710378
> 
> 赞同：2
> 
> 时间：2012-12-04T19:24:38.320
> 
> 标签：yii

我正在尝试检索 SQL 命令以用作另一个组件的输入参数，该组件会将值从该查询转换为 JSON 编码数组。问题是 column1 是一个字符串，而 column2 是一个 FLOAT 字段。

查询示例：

```
 SELECT col1, col2
    FROM tableA 
```

考虑**col1**是 VARCHAR 而**col2**是 FLOAT 字段。

如何运行 CSqlDataProvider->getData() 并将数组设置为：

```
 array(
      'col1' => 'value1_as_string',
      'col2' => value2_as_float_or_number  
    ); 
```

我可以设法运行查询，但是 CSqlDataProvider->getData 返回一个数组数组，并且所有值都默认转换为 STRING。

如何使用 CSqlDataProvider->getData() 获得一个混合了字符串和数字的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:48:58.897

如果您想将此值设为 Float，则应使用 (float)$value 或 floatval($value) 进行转换，但也许您应该编写自己的

```
YourSQLProvider extends CSqlDataProvider {

   protected function fetchData(){
    $data =  parent::fetchData();

    //...parse $data ...

    return $parsedData;
   }    
} 
```

# java - 数组引用不正确？JUnit 不能正常工作？

> ID：13710383
> 
> 赞同：1
> 
> 时间：2012-12-04T19:24:50.130
> 
> 标签：java, arrays, junit, pass-by-reference, pass-by-value

我正在尝试使用给定数字移动数组中的所有值。例如数组 {1,2,3,4,5} 具有 1 个移位必须变为 {5,1,2,3,4}。这是用 JUnit 测试的。

JUnit 测试是这样的：

```
 @Test    
    public void shift1(){
        double[] row = {1.0,2.0,3.0,4.0,5.0};
        int amount= 1;
        ArrayOperations.shift(row, amount);
        Assert.assertEquals(5.0, row [0]);
        Assert.assertEquals(1.0, row [1]);
        Assert.assertEquals(2.0, row [2]);
        Assert.assertEquals(3.0, row [3]);
        Assert.assertEquals(4.0, row [4]);      
    } 
```

我的方法是这样的：

```
public static void shift(double[] row, int amount) {
    double[] newRow= new double[row.length];
    for (int i = 0; i < newRow.length; i++) {
        newRow[(i + amount) % row.length] = row[i];
    }

    row= newRow;
} 
```

现在这个测试因任何未知原因而失败。我在编程课上遇到了这个问题，甚至我的老师也没有找到原因。当我调试它时，**数组被正确修改，**导致 {5,1,2,3,4}。但是**JUnit**失败了……但是这段代码**可以工作**：

```
public static void shift(double[] row, int amount) {
    double[] newRow= new double[row.length];
    for (int i = 0; i < newRow.length; i++) {
        newRow[(i + amount) % row.length] = row[i];
    }

    for (int i = 0; i < newRow.length; i++) {
        row[i] = newRow[i];            
    }
} 
```

有谁知道为什么？`row= newRow;`是正确的吗？甚至调试器都说它已正确更改...那么为什么第一个实现的测试失败，而第二个实现却没有呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:27:18.473

> 现在这个测试因任何未知原因而失败

不，它不起作用，因为您对 Java 中参数的工作方式感到困惑。这与 JUnit 或数组无关。它与参数有关。

> `row= newRow;`是正确的吗？

不，这不对。这只是设置*参数*的值，它只是方法中的一个局部变量。它对调用者的变量没有*任何*作用，这是您所期望的。

一个更简单的例子：

```
String x = "foo";
method(x);
System.out.println(x); // Still prints foo...

...
static void method(String p) {
    p = "bar";
} 
```

Java 中的所有参数都是*按值*传递的……尽管您需要了解对于引用类型，这些值是引用（而不是对象）。

我建议您找到一本好的 Java 教程或书籍，并阅读更多关于参数传递的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:37:48.257

在 java 中，数组作为值传递，因此在**内部****完成的任何更改都不会反映在 Test 中`row``shift``shift1`**。您需要将更新后的数组作为返回值并将其分配回原始数组：

```
 public static double[] shift(double[] row, int amount) {
    double[] newRow= new double[row.length];
    for (int i = 0; i < newRow.length; i++) {
        newRow[(i + amount) % row.length] = row[i];
    }
    return newRow;
  }

  @Test
  public void shift1(){
        double[] row = {1.0,2.0,3.0,4.0,5.0};
        int amount= 1;
        row = ArrayOperations.shift(row, amount);
        Assert.assertEquals(5.0, row [0]);
        Assert.assertEquals(1.0, row [1]);
        Assert.assertEquals(2.0, row [2]);
        Assert.assertEquals(3.0, row [3]);
        Assert.assertEquals(4.0, row [4]);      
    } 
```

# windows-phone - 在 Windows Phone 8 应用程序中启用 JavaScript

> ID：13710388
> 
> 赞同：3
> 
> 时间：2012-12-04T19:25:08.480
> 
> 标签：windows-phone, windows-phone-8

如何在 Windows Phone HTML5 应用程序中启用 JavaScript？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:36:14.273

创建新的 WP8 HTML5 项目后，打开 MainPage.xaml 并设置`IsScriptEnabled="True"`为`<WebBrowser />`控件。

```
<phone:WebBrowser x:Name="Browser"
                  IsScriptEnabled="True"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch"
                  Loaded="Browser_Loaded"
                  NavigationFailed="Browser_NavigationFailed" /> 
```

记住：权力越大，责任越大。

# anchor - 如何在 div 中创建锚点？

> ID：13710394
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:25:44.047
> 
> 标签：anchor

我正在寻找一种不需要 JavaScript、jQuery 或任何太高级的解决方案；主要是 HTML/CSS，因为这些是我被限制使用的。

我的想法是在一个 div ID 中包含两个较小的 div 类的布局。每个盒子都有自己的内容并并排放置。我想要完成的是在一个 div 中创建一个锚链接，将其内容更改为其他内容。

例如，框 1 默认显示“abc”作为其内容，而框 2 显示“def”。当您单击框 1 中的锚链接时，内容将更改为 123 - 不会影响框 2 中的内容或将其与锚一起向下移动。

希望这是有道理的。没有可编辑/工作的代码，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:27:58.543

您可以使用`:target`选择器隐藏 div，并在 URL 哈希中显示带有 ID 的元素：

```
div.MyBox {
    display: none;
}
div.MyBox:target {
    display: block;
} 
```

单击`<a>`指向的标签`#someId`将显示该元素。

# jsp - 使用标签无法使用 jsp:useBean 解析会话

> ID：13710400
> 
> 赞同：1
> 
> 时间：2012-12-04T19:26:14.917
> 
> 标签：jsp, session

我正在使用 jsp 标签清理一些旧代码。现在我创建了一个使用页脚标签和页眉标签的模板标签。我将页眉和页脚代码移出`index.jsp`适当的位置，并清除了所有错误，除了一个错误：

```
]] Root cause of ServletException.
weblogic.servlet.jsp.CompilationException: Failed to compile JSP /home/index.jsp
index.jsp:197:2: session cannot be resolved
<jsp:useBean id="myPojo" scope="session" class="my.pojo.MyPojo"/>

 ^---------^

    at weblogic.servlet.jsp.JavelinxJSPStub.reportCompilationErrorIfNeccessary(JavelinxJSPStub.java:226)
    at weblogic.servlet.jsp.JavelinxJSPStub.compilePage(JavelinxJSPStub.java:162)
    at weblogic.servlet.jsp.JspStub.prepareServlet(JspStub.java:246)
    at weblogic.servlet.jsp.JspStub.prepareServlet(JspStub.java:191)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:235)
    Truncated. see log file for complete stacktrace 
```

如果我将范围更改为 request ( `<jsp:useBean id="myPojo" scope="request" class="my.pojo.MyPojo"/>`)，一切正常。然而，改变不同 bean 的范围并不是现在可以完成的事情。

在搜索此解决方案时，很多人在 `<%@ page session="false"%>`位于页面上时提到了此错误，但我的页面都没有。我检查了所有内容并尝试设置`session`为`true`，但这也没有做任何事情。只是为了检查我的理智，我删除了标签并且事情再次起作用，所以问题似乎与会话范围 bean 和标签的组合有关。

我做了一些更多的测试，如果我`<jsp:useBean id="myPojo" scope="session" class="my.pojo.MyPojo"/>`从它`index.jsp`移到`template.tag`它也可以。

**模板标签**

```
<%-- template.tag -->
<%@ tag description="Base template" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib prefix="t" tagdir="/WEB-INF/tags" %>
<!DOCTYPE html>
<html:html>
  <head>
    <!-- css includes -->
  </head>
  <body>
    <t:header renderTabs="${renderTabs}"/>
    <jsp:doBody/>
    <t:footer/>
    <!-- javascript includes -->
  </body>
</html:html> 
```

**header.tag**

```
<%-- header.tag -->
<%@ tag description="Header" pageEncoding="UTF-8" %>
<%@ attribute name="renderTabs" required="true" type="java.lang.Boolean" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<div> 
```

**页脚标签**

```
<%-- footer.tag -->
<%@ tag description="Footer" pageEncoding="UTF-8" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<div>
  <!-- render contact information -->
</div> 
```

**索引.jsp**

```
<%-- index.jsp -->
<%@ page contentType="text/html" errorPage="/common/errors/error.jsp"%>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="t" tagdir="/WEB-INF/tags" %>
<t:template>
  <jsp:body>
    <jsp:useBean id="myPojo" scope="session" class="my.pojo.MyPojo"/>
    <!-- other code -->
  </jsp:body>
</t:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-03T16:26:59.053

我遇到过这种情况，它也发生`scope="application"`过。

这似乎是 Weblogic 的错误/限制（从 12.2.1.3.0 开始存在）。至少，它不会发生在 Tomcat 中。

# javascript - JavaScript 表格导出到 excel

> ID：13710405
> 
> 赞同：0
> 
> 时间：2012-12-04T19:26:19.353
> 
> 标签：javascript, ajax, excel, export

我找到了一种将 HTML 表导出到 Excel 的方法，但是在将 JavaScript 表导出从网站导出到 Excel 时遇到问题。请帮我找到一种方法，将此表导出到 Excel。

页面，我需要信息的地方：

[www.jalgpall.ee/players.php?year=2012&team=84&player=28469&b=ML](http://www.jalgpall.ee/players.php?year=2012&team=84&player=28469&b=ML)

本页javascript表函数示例：

```
JavaScript: function showPlayers() {
    xmlhttp = GetXmlHttpObject();
    if (xmlhttp == null) {
        alert("Your browser dosen't support AJAX");
        return;
    }
    var url = "db/getplayergame.php?reg=ellermaasoft";
    url = url + "&player=" + document.getElementById("customers").value;
    url = url + "&sid=" + Math.random();
    url = url + "&year=" + document.getElementById("year").value;
    if (document.getElementById('tabber').tabber) {
        url = url + "&page=" + document.getElementById('tabber').tabber.activetab;
    }
    else url = url + "&page=0";
    xmlhttp.onreadystatechange = stateChanged;
    xmlhttp.open("GET", url, true);
    xmlhttp.send(null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:57:02.253

我自己找到了答案。

javascript函数从页面获取信息：

[http://www.jalgpall.ee/db/getplayergame.php?reg=ellermaasoft&player=28469&&sid=0.1&year=2012&page=0](http://www.jalgpall.ee/db/getplayergame.php?reg=ellermaasoft&player=28469&&sid=0.1&year=2012&page=0)

从这个页面我可以直接将数据导出到 Excel，使用 Excel->Data->Export Data from Web

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T13:09:15.993

这是使用[Kendo UI 库](http://docs.telerik.com/kendo-ui/api/javascript/ooxml/workbook)的代码：

```
function save_table_to_excel(id_of_table){
//get the table
    var table = $(id_of_table)[0];

    var workbook = {
        creator: "The programmer",
        sheets:[]
    };

//build the header
    var columns=[];
    var cells=[];
    var row = table.rows[0];
    for (var j = 0, col; col = row.cells[j]; j++) {
        columns.push({ autoWidth: true });
        cells.push({ value: col.textContent })
    }
    excelRows =[
        {
            cells: cells
        }
    ];

//put the content
    for (var i = 1, row; row = table.rows[i]; i++) {
        cells=[];
        for (var j = 0, col; col = row.cells[j]; j++) {
            cells.push({ value: col.textContent })
        }
        excelRows.push({ cells: cells });
    }

//export to Excel
    sheet={
        title: id_of_table,
        columns: columns,
        freezePane: { colSplit: 2, rowSplit: 1 },
//      filter: { from: 0, to: 7 },
    };
    sheet.rows=excelRows;
    workbook.sheets.push(sheet);
    var dataURL = new kendo.ooxml.Workbook(workbook).toDataURL();
    // save the workbook
    kendo.saveAs({
        dataURI: dataURL,
        fileName: kendo.toString(new Date(), 'yyyy.MM.dd')+id_of_table+".xlsx"
    });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T15:47:42.503

您还可以使用包[fs-browsers](https://www.npmjs.com/package/fs-browsers)。
它为 xls 文件提供了简单易用的导出方法。
它是这样的：

```
import { exportFile, EXCEL_FILE } from 'fs-browsers';
const result_table = [
        ["1", "January", "2016"],
        ["2", "February", "2016"],
        ["3", "March", "2016"],
        ["4", "April", "2016"],
    ];
const headings = ["Day", "Month", "Year"];
exportFile(result_table, { type: EXCEL_FILE, headings: headings });
```

# r - 使用 r 和 solve.QP 进行投资组合优化

> ID：13710407
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:26:30.970
> 
> 标签：r, optimization, finance, portfolio

我正在尝试使用 r 为我的投资组合优化类解决二次规划问题。我想将我的答案与书中的答案进行比较。
这是问题所在： `min: t(c)%*%x + .5*t(x)%*%BigC%*%x
st: -x <=0, i=1...5
and: sum(x)=1`

这是我的代码：

```
A = matrix( c( 1,1,1,1,1, -1,0,0,0,0, 0,-1,0,0,0, 0,0,-1,0,0, 0,0,0,-1,0, 0,0,0,0,-1), ncol=5, byrow=T)
b = matrix( c( 1,0,0,0,0,0), ncol=1)
c = matrix( c( 1,-2,3,-4,5), ncol=1)
BigC = matrix( c( 1,0,0,0,0,  0,2,0,0,0,  0,0,3,0,0,  0,0,0,4,0,  0,0,0,0,5), ncol=5, byrow=T)
x0 = matrix( c( 0.2,0.2,0.2,0.2,0.2), ncol=1)
n = 5
m = 5
q = 1
solve.QP( Dmat=BigC, dvec=t(c), Amat=t(A), bvec=t(b), meq=1) 
```

但它会引发以下错误：

```
Error in solve.QP(Dmat = BigC, dvec = t(c), Amat = t(A), bvec = t(b),  : 
  constraints are inconsistent, no solution! 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:30:51.597

文档`?solve.QP`提到

> 具有约束 A^T b >= b_0 的 min(-d^T b + 1/2 b^TD b) 形式的问题。

所以你至少有两件事错了：

*   `A`用于表达您的`x_i >= 0`约束的标志
*   `dvec`应该`-t(c)`

我们还要提一下

*   在未来，重要的是你提到你正在使用这个`quadprog`包，
*   `solve.QP`采用向量，因此您无需创建矩阵并转置它们，
*   您应该避免命名变量`c`，因为它是 R 中常用函数的名称，
*   您的某些代码未使用，因此与问题无关，
*   方便的`diag`功能。

考虑到所有这些，这就是您要寻找的：

```
library(quadprog)

A    <- rbind(rep(1, 5), diag(5))
b    <- c( 1,0,0,0,0,0)
tc   <- c( 1,-2,3,-4,5)
BigC <- diag(1:5)

solve.QP(Dmat = BigC, dvec = -tc, Amat = t(A), bvec = b, meq = 1) 
```

# javascript - JSON Javascript Onclick 加载器

> ID：13710408
> 
> 赞同：0
> 
> 时间：2012-12-04T19:26:41.927
> 
> 标签：javascript, ajax, json

我有一个小脚本读出一个 JSON 提要并用 HTML 写下来。现在我希望我的脚本只显示 5 个元素并使用前进按钮加载接下来的 5 个元素，或者使用后退按钮显示最后 5 个元素有没有可能这样做？只要给我一些指示，我就可以开始研究构建这样的功能。

我的代码到现在，只是为了向你们展示：

```
<script type="text/javascript">
$(function()
{
$(document).ready(function()
{
$.getJSON("json_data2.php",function(data)
{
$.each(data.posts, function(i,data)
{
var div_data =
"<div ><a href='"+data.url+"'>"+data.title+"</a></div>";
$(div_data).appendTo("#test");
});
}
);
return false;
});
});
</script>

<div id="test"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:10:28.403

听起来您正在尝试实现分页。通常这最好在服务器端完成。在您的情况下，这将是 json_data2.php。您可以让 json_data2.php 读取 2 个查询字符串，例如 startPosition 和 amount。所以 startPosition 可以根据传递的数字偏移项目列表。然后 amount 会告诉 json_data2.php 要返回多少项目。然后每次单击下一个或上一个时，startPosition 将递增或递减。

所以

json_data2.php?startPosition=0&amount=5 将返回前 5 个结果

然后

json_data2.php?startPositon=5&amount=5 将返回接下来的 5 个结果。

# jsf-2 - JSF2.0多语言复合组件

> ID：13710409
> 
> 赞同：1
> 
> 时间：2012-12-04T19:26:48.277
> 
> 标签：jsf-2, localization, composite-component

要使复合组件国际化，您必须将一个与组件本身具有**完全相同名称的***.properties*文件放在同一文件夹中。

 **在 xhtml 中，您可以通过 ${cc.resourceBundleMap.key} 访问这些翻译。

直到现在，一切都很好，对我有用。当我为其他语言添加更多*.properties文件时，问题就开始了。*无论我的计算机在哪个本地，选择的语言都是默认语言（component.properties）。

这似乎是一个反复出现的问题，因为 Ziletka 在[如何本地化 JSF 2 复合组件](https://stackoverflow.com/questions/7817888/how-to-localize-jsf-2-composite-components)中也报告了相同的问题，但仍未得到答复。

我尝试了各种可能性：

*   没有默认*的 .properties*文件

    ```
    component_fr.properties
    component_fr_CA.properties
    component_fr_FR.properties
    component_en.properties
    component_en_CA.properties
    component_en_US.properties 
    ```

    但它导致：

    ```
    javax.el.ELException: [...] /resources/component/component.xhtml default="${cc.resourceBundleMap.key}":    java.lang.NullPointerException 
    ```

*   带有默认的*.properties*文件和语言规范

    ```
    component.properties
    component_fr.properties
    component_en.properties 
    ```

    仅加载默认值。

*   带有默认的*.properties*文件以及语言和国家/地区规范

    ```
    component.properties
    component_fr_CA.properties
    component_fr_FR.properties
    component_en_CA.properties
    component_en_US.properties 
    ```

    再说一遍：只加载默认值。

我很想避免不得不依赖支持 bean 来提供翻译，并且不能相信它不受支持。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:55:12.203

这个功能很久以前就在 MyFaces Core 中实现了。请参阅：[MYFACES-3308](https://issues.apache.org/jira/browse/MYFACES-3308)。完成的测试用例可以在[这里找到](http://svn.apache.org/repos/asf/myfaces/core/trunk/impl/src/test/resources/org/apache/myfaces/view/facelets/tag/composite/localized/)

应用于复合组件的语言环境取决于从 UIViewRoot.getLocale() 检索到的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T16:46:45.823

显然问题仍然存在，其根源在`javax.faces.component.UIComponent`类中，特别是在`findComponentResourceBundleLocaleMatch`方法中。截图如下

```
 private Resource findComponentResourceBundleLocaleMatch(FacesContext context, 
        String resourceName, String libraryName) {
    Resource result = null;
    ResourceBundle resourceBundle = null;
    int i;
    if (-1 != (i = resourceName.lastIndexOf("."))) {
        resourceName = resourceName.substring(0, i) +
                ".properties"; //THE PROBLEM IS HERE
        if (null != context) {
            result = context.getApplication().getResourceHandler().
                    createResource(resourceName, libraryName);
            InputStream propertiesInputStream = null;
            try {
                propertiesInputStream = result.getInputStream();
                resourceBundle = new PropertyResourceBundle(propertiesInputStream);
            } catch (IOException ex) {
                Logger.getLogger(UIComponent.class.getName()).log(Level.SEVERE, null, ex);
            } finally{
                if(null != propertiesInputStream){
                    try{
                        propertiesInputStream.close();
                    } catch(IOException ioe){
                        if (LOGGER.isLoggable(Level.SEVERE)) {
                            LOGGER.log(Level.SEVERE, null, ioe);
                        }
                    }
                }
            }
        }
    }
    result = (null != resourceBundle) ? result : null;

    return result;
} 
```

您可以在带有“问题在这里”的注释的行中看到它。正是在它寻找要加载的属性文件时，它不尊重任何语言和/或国家代码。它总是加载一个默认资源。

**可能的解决方案** “有问题的”方法是从`getResourceBundleMap`同一类的另一个方法调用的，并且您感兴趣的部分代码用注释标记（第 1000 行）

```
// Step 2: if this is a composite component, look for a 
 // ResourceBundle as a Resource 
```

这并不奇怪，因为您需要一个复合组件。因此解决方案是为您的复合组件定义一个支持组件类并重新定义`resourceBundleMap`加载。您可能会在下面找到仅尊重语言的实现，这意味着它适用于 componentName _en .properties 和 componentName _de .properties 之类的文件，**但**不适用于 componentName **_en_US** .properties之类的**文件**

 ****您的 .properties 文件应与组件定义位于同一目录中

```
testComponent.properties
testComponent_de.properties
testComponent_en.properties
testComponent_fr.properties 
```

在您的组件中`testComponent.xhtml`指定`componentType`属性中的定义类。

```
<cc:interface componentType="test.component">
    ....
</cc:interface> 
```

该组件可能如下所示。我主要使用原始代码进行了几次更改。这个想法是覆盖有问题的方法，并使用代码尝试首先读取指定语言的属性文件，如果找不到，则读取默认的。

```
 @FacesComponent("test.component")
public class TestComponent extends UINamingContainer {

    private static final String PROPERTIES_EXT = ".properties";

    private Logger LOGGER = <use one you like>;

    private Map<String, String> resourceBundleMap = null;

    @Override
    public Map<String, String> getResourceBundleMap() {
        ResourceBundle resourceBundle = null;
        if (null == resourceBundleMap) {
            FacesContext context = FacesContext.getCurrentInstance();
            UIViewRoot root = context.getViewRoot();
            Locale currentLocale = null;
            if (null != context) {
                if (null != root) {
                    currentLocale = root.getLocale();
                }
            }
            if (null == currentLocale) {
                currentLocale = Locale.getDefault();
            }

            if (this.getAttributes().containsKey(Resource.COMPONENT_RESOURCE_KEY)) {
                Resource ccResource = (Resource)
                        this.getAttributes().get(Resource.COMPONENT_RESOURCE_KEY);
                if (null != ccResource) {
                    InputStream propertiesInputStream = null;
                    try {
                        propertiesInputStream = ccResource.getInputStream();
                        resourceBundle = findComponentResourceBundleLocaleMatch(ccResource.getResourceName(),
                                ccResource.getLibraryName(), currentLocale.getLanguage());
                    } catch (IOException ex) {
                        LOGGER.error(null, ex);
                    } finally {
                        if (null != propertiesInputStream) {
                            try {
                                propertiesInputStream.close();
                            } catch (IOException ioe) {
                                LOGGER.error(null, ioe);
                            }
                        }
                    }
                }
            }

            if (null != resourceBundle) {
                final ResourceBundle bundle = resourceBundle;
                resourceBundleMap =
                        new Map() {
                            // this is an immutable Map

                            public String toString() {
                                StringBuffer sb = new StringBuffer();
                                Iterator<Map.Entry<String, Object>> entries =
                                        this.entrySet().iterator();
                                Map.Entry<String, Object> cur;
                                while (entries.hasNext()) {
                                    cur = entries.next();
                                    sb.append(cur.getKey()).append(": ").append(cur.getValue()).append('\n');
                                }

                                return sb.toString();
                            }

                            // Do not need to implement for immutable Map
                            public void clear() {
                                throw new UnsupportedOperationException();
                            }

                            public boolean containsKey(Object key) {
                                boolean result = false;
                                if (null != key) {
                                    result = (null != bundle.getObject(key.toString()));
                                }
                                return result;
                            }

                            public boolean containsValue(Object value) {
                                Enumeration<String> keys = bundle.getKeys();
                                boolean result = false;
                                while (keys.hasMoreElements()) {
                                    Object curObj = bundle.getObject(keys.nextElement());
                                    if ((curObj == value) ||
                                            ((null != curObj) && curObj.equals(value))) {
                                        result = true;
                                        break;
                                    }
                                }
                                return result;
                            }

                            public Set<Map.Entry<String, Object>> entrySet() {
                                HashMap<String, Object> mappings = new HashMap<String, Object>();
                                Enumeration<String> keys = bundle.getKeys();
                                while (keys.hasMoreElements()) {
                                    String key = keys.nextElement();
                                    Object value = bundle.getObject(key);
                                    mappings.put(key, value);
                                }
                                return mappings.entrySet();
                            }

                            @Override
                            public boolean equals(Object obj) {
                                return !((obj == null) || !(obj instanceof Map))
                                        && entrySet().equals(((Map) obj).entrySet());

                            }

                            public Object get(Object key) {
                                if (null == key) {
                                    return null;
                                }
                                try {
                                    return bundle.getObject(key.toString());
                                } catch (MissingResourceException e) {
                                    return "???" + key + "???";
                                }
                            }

                            public int hashCode() {
                                return bundle.hashCode();
                            }

                            public boolean isEmpty() {
                                Enumeration<String> keys = bundle.getKeys();
                                return !keys.hasMoreElements();
                            }

                            public Set keySet() {
                                Set<String> keySet = new HashSet<String>();
                                Enumeration<String> keys = bundle.getKeys();
                                while (keys.hasMoreElements()) {
                                    keySet.add(keys.nextElement());
                                }
                                return keySet;
                            }

                            // Do not need to implement for immutable Map
                            public Object put(Object k, Object v) {
                                throw new UnsupportedOperationException();
                            }

                            // Do not need to implement for immutable Map
                            public void putAll(Map t) {
                                throw new UnsupportedOperationException();
                            }

                            // Do not need to implement for immutable Map
                            public Object remove(Object k) {
                                throw new UnsupportedOperationException();
                            }

                            public int size() {
                                int result = 0;
                                Enumeration<String> keys = bundle.getKeys();
                                while (keys.hasMoreElements()) {
                                    keys.nextElement();
                                    result++;
                                }
                                return result;
                            }

                            public java.util.Collection values() {
                                ArrayList<Object> result = new ArrayList<Object>();
                                Enumeration<String> keys = bundle.getKeys();
                                while (keys.hasMoreElements()) {
                                    result.add(
                                            bundle.getObject(keys.nextElement()));
                                }
                                return result;
                            }
                        };

            }

            if (null == resourceBundleMap) {
                resourceBundleMap = Collections.EMPTY_MAP;
            }
        }
        return resourceBundleMap;
    }

    private ResourceBundle findComponentResourceBundleLocaleMatch(String resourceName, String libraryName, String lng) {
        FacesContext context = FacesContext.getCurrentInstance();
        ResourceBundle resourceBundle = null;
        int i;
        if (-1 != (i = resourceName.lastIndexOf("."))) {
            if (null != context) {
                InputStream propertiesInputStream = null;
                try {
                    propertiesInputStream = getResourceInputStream(context, resourceName.substring(0, i), libraryName, lng);
                    resourceBundle = new PropertyResourceBundle(propertiesInputStream);
                } catch (IOException ex) {
                    LOGGER.error(null, ex);
                } finally {
                    if (null != propertiesInputStream) {
                        try {
                            propertiesInputStream.close();
                        } catch (IOException ioe) {
                            LOGGER.error(null, ioe);
                        }
                    }
                }
            }
        }
        return resourceBundle;
    }

    private InputStream getResourceInputStream(FacesContext context, final String resourceName, String libraryName, String lng) throws IOException {
        InputStream propertiesInputStream = null;
        propertiesInputStream = getPropertiesResourceInputStream(context, String.format("%s_%s%s", resourceName, lng, PROPERTIES_EXT), libraryName);
        if (null == propertiesInputStream) {
            propertiesInputStream = getPropertiesResourceInputStream(context, resourceName + PROPERTIES_EXT, libraryName);
        }
        return propertiesInputStream;
    }

    private InputStream getPropertiesResourceInputStream(FacesContext context, final String resourceName, String libraryName) throws IOException {
        Resource result = context.getApplication().getResourceHandler().createResource(resourceName, libraryName);
        if (null == result) {
            return null;
        }
        return result.getInputStream();
    }

} 
```

完毕。

然而，这显然是 Mojarra 中的一个错误，我希望它会很快得到修复。仔细查看与复合组件相关的代码会发现，组件的默认 .properties 文件被读取了两次，我想这也不是一个好主意，但这是另一回事。

PS。如果您愿意，您也可以轻松地调整 te 代码以尊重国家/地区代码。******

# syntax-highlighting - 是否有基于 Github 语法高亮的 Sublime Text 2 配色方案？

> ID：13710414
> 
> 赞同：6
> 
> 时间：2012-12-04T19:27:05.213
> 
> 标签：syntax-highlighting, sublimetext2, color-scheme

我[为 GVim 找到了这个](http://www.vim.org/scripts/script.php?script_id=2855)，但我想为 Sublime Text 2 找到一个。

![在此处输入图像描述](../Images/dc119eef0180dcd570f727d98477f564.png)

（这对谷歌来说是一件非常困难的事情，因为有很多 ST2 配色方案都*托管*在 Github 上。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T00:14:57.810

[Dayle Rees 的配色方案](https://github.com/daylerees/colour-schemes)包括以 Github 为主题的配色方案；整套 41 种方案可通过非英国绰号“Dayle Rees Color Schemes”下的[Package Control获得。](http://wbond.net/sublime_packages/package_control)

![Dayle Rees 的 Github 配色方案](../Images/e642a1f6b3569e90a3cdf7e63078a38d.png) 截图中的字体是优秀的（而且免费的！）[Adobe Source Code Pro](https://blogs.adobe.com/typblography/2012/09/source-code-pro.html)（[下载](http://sourceforge.net/projects/sourcecodepro.adobe/)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:58:27.470

[sbecker 的GitHub TextMate 主题](https://github.com/sbecker/github_editor_theme)（与 Sublime Text 2 兼容）。

# asp.net - 将身份验证从 ASP 站点转移到 JSP

> ID：13710425
> 
> 赞同：0
> 
> 时间：2012-12-04T19:28:10.963
> 
> 标签：asp.net, jsp, authentication, transfer

我有一个 asp.net 站点，它使用与另一个 JSP 站点相同的数据库。JSP 站点做一些报告，asp 站点用于数据输入。我需要的是，一旦用户登录到 asp.net 站点并单击其中一个常见的 id，我想将他们带到 jsp 站点以显示报告，而无需他们再次登录。jsp 站点的用户名和密码与 asp 完全相同，因为它们使用相同的用户表。JSP 站点已有 3-4 年的历史，我对此完全没有经验。因此，如果有人可以在这里帮助我。

这是登录 JSP 站点的响应头和请求头：

```
**Response Headers**
Content-Length  0
Content-Type    text/html
Date    Wed, 05 Dec 2012 15:20:49 GMT
Location    http://www.something.something.htm?action=0
Server  Apache-Coyote/1.1
Request Headersview source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Cookie  JSESSIONID=523454ADB2B7C19D29BD68DB55D30146
Host    www.something.something.com
Proxy-Connection    keep-alive
Referer http://www.something.login.htm
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
Request Headers From Upload Stream
Content-Length  41
Content-Type    application/x-www-form-urlencoded 
```

请求标头仅包含 mode=0 的用户名和密码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:33:00.573

当有人单击 jsp 站点的链接时...我会将用户发送到中间页面...其中有一个表单，其中包含用户名和密码作为隐藏字段。将表单的动作设置为jsp的表单（用于登录）。并使用 javascript 自动提交表单。

# c# - 在 MVC 应用程序中获取工作单元和存储库模式时遇到问题

> ID：13710429
> 
> 赞同：1
> 
> 时间：2012-12-04T19:28:44.983
> 
> 标签：c#, asp.net-mvc, entity-framework, repository-pattern, unit-of-work

我有一个绑定到 NewUserViewModel 的视图，该视图已发布到控制器的此方法。

```
 [HttpPost]
    public ActionResult NewUser(NewUserViewModel newUser)
    {
        var user = new User();
        user.Id = newUser.Id;
        user.Email = newUser.Email;
        //more mapping hidden for brevity

        //here is where the trouble starts
        _userService.AddNewUser(user);

        return RedirectToAction("Users");
    } 
```

_userService 位于一个私有字段中，该字段在控制器构造函数中实例化，如下所示

```
 private IUserService _userService;

    public ControllerName()
    {
        _userService = new UserService();
    } 
```

_userService 上的 AddNewUser 方法如下所示。

```
 public void AddNewUser(User newUser)
        {
        using (var uow = new UnitOfWorkUser(new Context()))
        {
            using (var _userRepo = new UserRepository(uow))
            {
                _userRepo.InsertOrUpdate(newUser);
                uow.Save();
            }
        }
    } 
```

UserRepository 的构造函数如下所示。

```
 private Context _context;

    public UserRepository(UnitOfWorkUser unitOfWork)
    {
        _context = unitOfWork.Context;
    } 
```

而unitOfWork看起来像这样。

```
 public class UnitOfWorkUser :IDisposable, IUnitOfWork
{
    private readonly Context _context;

    public UnitOfWorkUser(Context context = null)
    {
       _context = context ?? new Context();
    }

    public int Save()
    {
        return _context.SaveChanges();
    }

    internal Context Context
    {
        get { return _context; }
    }

    public void Dispose()
    {
        _context.Dispose();
    }
} 
```

_userRepo 上的 InsertOrUpdate 方法看起来像这样。

```
 public virtual void InsertOrUpdate(User user)
    {
        if (user.Id == default(int))
        {
            _context.Users.Add(user);
        }
        else
        {
            _context.Entry(user).State = System.Data.EntityState.Modified;
        }
    } 
```

当我到达 _context.Users.Add(user); 在上面的方法中我得到这个错误

一个实体对象不能被多个 IEntityChangeTracker 实例引用。

我认为通过在 UserRepository 的构造函数中传递带有 UnitOfWork 对象的上下文，我将避免这些错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:38:01.013

This looks very wrong to me. The purpose of unit work pattern is to consolidate all your "work" in one object. There is several issue with the following code:

1.  Looks like you are disposing the DBContext Twice

2.  Since you only need dbcontext, you shouldn't only pass dbcontext to the repository instead of UOW object

3.  You might want to have a internal reference to the UserRepository. It should be used to group your Repositories and ensure they all share the same EF context instance. A sample will look like UnitOfWorkUser.UserRepo.Save(newUser)

    ```
     using (var uow = new UnitOfWorkUser(new Context()))
        {
            using (var _userRepo = new UserRepository(uow))
            {
                _userRepo.InsertOrUpdate(newUser);
                uow.Save();
            }
        } 
    ```

Here is an example on how you use UOW,

[http://www.mattdurrant.com/ef-code-first-with-the-repository-and-unit-of-work-patterns/](http://www.mattdurrant.com/ef-code-first-with-the-repository-and-unit-of-work-patterns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:33:50.467

在 asp.net mvc 中使用 UOW 有更好的方法，你不会在上下文中考虑实体生命周期的许多方面，所以我建议阅读[这篇文章](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

# version-control - vc-state 的多文件版本

> ID：13710433
> 
> 赞同：0
> 
> 时间：2012-12-04T19:29:12.430
> 
> 标签：version-control, emacs, elisp, visual-c++

你们有没有人写过 Emacs-Lisp 黑客的多文件版本`vc-state`？对于多文件，我的意思是一种签名

```
vc-multi-state (file-list) 
```

它返回由 . 返回的元素的列表`vc-state`。仅映射`vc-state`文件名列表的简单实现是不够的，因为这在列表中花费了太多文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:48:38.447

有`(vc-call-backend backend 'dir-status dir callback)`和`(vc-call-backend backend 'dir-status-files dir files default callback)`

# android - 在广播接收器中启动 Activity 以获取结果？

> ID：13710434
> 
> 赞同：3
> 
> 时间：2012-12-04T19:29:14.377
> 
> 标签：android, android-intent, broadcastreceiver

我已经设法让一个活动从我的方法开始`onReceive()`，但我真的需要做一个`startActivityForResult();`.

有什么办法可以做到这一点吗？

附带说明一下，我如何让我的应用程序成为“相机”应用程序，就像当应用程序开始拍照时会出现的那样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:41:55.200

关于广播接收器需要了解的重要一点是，您不应该在其中添加长时间运行的进程，因为大约 5 秒后您的应用程序将崩溃。

在你的情况下，最好的办法是从你的广播接收器意图其他活动，并从那个活动使用`startActivityForResult()`，获取图片并从那里继续......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:33:23.053

`startActivityForResult`只能从 an 调用，`Activity`因为它是在`Activity`类中定义的并且需要活动实例。

您只能`startAcivity()`从广播接收器调用，因为`onRecieve()`您只能访问通用`context`对象并且它没有`startActivityForResult`在类中定义的方法..

# algorithm - 这个特殊的 CNF 叫什么？

> ID：13710435
> 
> 赞同：1
> 
> 时间：2012-12-04T19:29:18.087
> 
> 标签：algorithm, complexity-theory, boolean-logic

假设您有一个布尔可满足性的实例，其中 CNF 中给出的公式。此外，每个子句仅包含正面文字或负面文字。例如：

```
(a || b) && (!a || !c || !d) && (b || d) 
```

这样的布尔公式有特殊的名称吗？与标准 CNF 公式相比，是否有更快的方法来测试此类公式的可满足性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-09T19:15:57.530

一类 CNF，使得每个子句要么是肯定的，要么是否定的，也就是说，没有同时包含肯定和否定文字的子句，被称为“单调 CNF”，例如 Hans Kleine Buening 在他的命题逻辑一书中. 最近一篇关于单调 CNF 的论文是 [https://arxiv.org/abs/1603.07881](https://arxiv.org/abs/1603.07881) “Monotone 3-Sat-4 is NP-complete” 通过标准技术不难看出，单调 3-SAT（所有条款都是正或负，所有子句的长度（最多）3）是 NP 完全的，上面的论文通过展示每个变量最多出现四次的情况下的 NP 完全性来改进这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T17:20:25.807

它被称为[布尔可满足性问题](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)或简称 SAT。尽管存在针对特殊情况的多项式解决方案（请参阅[2SAT](http://en.wikipedia.org/wiki/2SAT)），但一般问题是 NP 完全的（这意味着它没有所谓的快速解决方案）。

# grails - 使用石英的 grails 服务

> ID：13710436
> 
> 赞同：1
> 
> 时间：2012-12-04T19:29:19.780
> 
> 标签：grails, quartz-scheduler

我在 Grails 中编写了一个应用程序，但我在使用石英时遇到了一些问题。我想从数据库中获取用户，然后再获取他的服务器。如果有任何服务器，我想在每个服务器上检查 PING 命令，但我收到如下消息：

> 工作运行外壳 ^ 549 | 跑 。. 在 org.quartz.simpl.SimpleThreadPool$WorkerThread
> 由 IllegalStateException 引起：未找到线程绑定请求：您是指实际 Web 请求之外的请求属性，还是在原始接收线程之外处理请求？如果您实际上是在 Web 请求中操作并且仍然收到此消息，则您的代码可能在 DispatcherServlet/DispatcherPortlet 之外运行：在这种情况下，请使用 RequestContextListener 或 RequestContextFilter 来公开当前请求。->> 131 | org.springframework.web.context.request.RequestContextHolder 中的 currentRequestAttributes"

这是我的代码：

```
 def execute() {
     pingService.checkPing()
 }

 def checkPing = {
     User user = User.findByLogin(session.user.login) //get user
     def hostsToPing = importFromDB()
     if (!hostsToPing.isEmpty()) {
         hostsToPing.each {host ->
             doPing(host)
         }
     } else {
         //something else
     }
 }

 def importFromDB = {
     User user = User.findByLogin(session.user.login)
     def hostsList = Host.findAllByUser(user)
     hostsList
 }

 def doPing(Host host) {
     println "InetAdress: " + InetAddress.getByName(host.hostAdress)
     println "InetAdress is Rea: " + InetAddress.getLocalHost().isReachable(1000)
 } 
```

当是这样的时候就不存在这个问题：

```
def doPing(Host host) {
    println "InetAdress: " + InetAddress.getByName("www.google.com")
    println "InetAdress is Reachable : " + InetAddress.getLocalHost().isReachable(1000)
} 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:24:47.343

那是因为你指的是`session.user.login`。`session`在`Job`, 期间没有。想象一下，当没有用户登录时，工作就开始了——那你指的是什么用户？

因此，要么检查每个用户，`User.list()`要么制作一个带有用户队列的单例 bean。

# wpf - 具有固定页眉和页脚的richtextbox 打印

> ID：13710440
> 
> 赞同：2
> 
> 时间：2012-12-04T19:29:38.760
> 
> 标签：wpf, printing, header, richtextbox, fixed

地狱大家，

我需要提供像字母打印这样的工具。对于字母格式，我使用 Richtextbox 创建不同的格式（模板）。现在我需要使用 header 打印这种格式。Heder 信息将始终更改，并且页面的标题高度应该固定。对于标题信息显示，我还拿了一个 Richtextbox。现在我想在打印之前合并这两个 Richtext 框信息。但是如果我合并文本框信息，我无法维护固定的标题。

建议我，有什么方法可以更好地处理这个问题。

# java - 为什么我的 JList 在更新时消失了？

> ID：13710441
> 
> 赞同：1
> 
> 时间：2012-12-04T19:29:45.420
> 
> 标签：java, multithreading, swing

作为序言，我意识到这可能是一个事件调度线程问题。我只是不确定问题到底出在哪里。

我有一个使用 AbstractListModel 查询对象并将结果显示为列表的 JList：

```
public class View {

    public View(final Person person) {
        JList list = new JList(new AbstractListModel() {

            @Override
            public Object getElementAt(int index) {
                return person.getSibling(index);
            }

            @Override
            public int getSize() {
                return person.getNumSiblings();
            }

        });
 } 
```

最初，JList 看起来不错 - 它显示了所有“Person”都自动构建的同级。但是，当我在代码的另一个区域中使用 person.addSibling(...) 之类的东西时，JList 会变为空白。

这是 EDT 问题吗？（似乎在更新 Person 之后不再调用 AbstractListModel 的方法。）

如果是这样，我应该在哪里添加 SwingWorker 代码 - 在 AbstractListModel 内部还是在 person.addSibling(...) 内部？

谢谢！

编辑：

我正在附加一个简单的可运行版本：

```
import java.awt.Dimension;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        final Person person = new Person();

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    JFrame frame = new JFrame();
                    frame.setPreferredSize(new Dimension(1024, 768));
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);

                    JPanel panel = new JPanel();
                    frame.setContentPane(panel);

                    JList list = new JList(new AbstractListModel() {

                        @Override
                        public Object getElementAt(int index) {
                            return person.getSibling(index);
                        }

                        @Override
                        public int getSize() {
                            return person.getNumSiblings();
                        }

                    });
                    panel.add(list);
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);

                    person.addSibling("Bob");
                } catch (Throwable ex) {
                    ex.printStackTrace();
                }
            }
        });

    }

    private static class Person {

        List<String> siblings = new ArrayList<String>();

        public Person() {
            siblings.add("Janice");
        }

        public void addSibling(String sibling) {
            siblings.add(sibling);
        }

        public Object getSibling(int index) {
            return siblings.get(index);
        }

        public int getNumSiblings() {
            return siblings.size();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:04:26.817

这与 EDT 或线程无关。当模型的数据核心发生变化时，您不会调用模型的任何通知方法，`fireXXXX(...)`这会搞砸它。我建议你解决这个问题。[AbstractListModel API](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractListModel.html)将显示在从列表中添加或删除数据时可用的方法。

**编辑 1**
此外，您的模型应该在一个扩展`AbstractListModel<String>`并具有`addSibling(String sib)` 方法的非匿名类中。您应该将兄弟姐妹添加到模型而不是 Person 对象。

**编辑 2**例如，

```
import java.util.List;

import javax.swing.AbstractListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Test {

   public static void main(String[] args) {
      final Person person = new Person();
      final SibListModel listModel = new SibListModel(person);

      SwingUtilities.invokeLater(new Runnable() {
         @Override
         public void run() {
            try {
               JFrame frame = new JFrame();
               frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
               JPanel panel = new JPanel();
               frame.setContentPane(panel);

               JList<String> list = new JList<String>(listModel);
               panel.add(new JScrollPane(list));
               frame.pack();
               frame.setLocationRelativeTo(null);
               frame.setVisible(true);

               // person.addSibling("Bob");
               listModel.addSibling("Bob");
            } catch (Throwable ex) {
               ex.printStackTrace();
            }
         }
      });

   }

   private static class SibListModel extends AbstractListModel<String> {
      private Person person;

      public SibListModel(Person person) {
         this.person = person;
      }

      @Override
      public String getElementAt(int index) {
         return person.getSibling(index);
      }

      @Override
      public int getSize() {
         return person.getNumSiblings();
      }

      public void addSibling(String sib) {
         person.addSibling(sib);
         fireIntervalAdded(this, person.getNumSiblings() - 1, person.getNumSiblings());
      }
   }

   private static class Person {

      List<String> siblings = new ArrayList<String>();

      public Person() {
         siblings.add("Janice");
      }

      public void addSibling(String sibling) {
         siblings.add(sibling);
      }

      public String getSibling(int index) {
         return siblings.get(index);
      }

      public int getNumSiblings() {
         return siblings.size();
      }

   }

} 
```

# ruby-on-rails - Rails - 恶意用户覆盖用户名

> ID：13710445
> 
> 赞同：2
> 
> 时间：2012-12-04T19:29:51.837
> 
> 标签：ruby-on-rails, forms, security, attributes

想象一下，您有一个用户模型，其中包含用户名和其他几个属性。用户只能在唱歌时设置用户名，而不能在稍后编辑他的个人资料时设置。

尽管如此， :user_name 属性需要通过用户模型中的 attr_accessible 访问注册表单。

这让我想知道恶意用户是否可以更改允许他编辑个人资料的表单，并将输入名称更改为 user_name，从而实际上在提交时更改它。

我对此是否正确，即恶意用户可以这样做还是 Ruby 会以某种方式发现表单已更改？如果这是一个安全问题，我如何始终在我的更新方法中重置用户名？是否有一种区分可访问和可访问但不可编辑的属性的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:35:33.417

不，由于 Rails 的 CSRF 对策，这是不可能的。请参阅[本指南](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。

您的应用程序控制器中应该有以下行：

```
protect_from_forgery :secret => "123456789012345678901234567890..." 
```

另请参阅以下文章以获取有关[XSS](http://guides.rubyonrails.org/security.html#cross-site-scripting-xss)的更多信息，该文章详细描述了可能采取的措施和应对措施。

始终`sanitize()`输入。

# ios - 设置 ViewController 大小

> ID：13710446
> 
> 赞同：0
> 
> 时间：2012-12-04T19:29:55.450
> 
> 标签：ios, xcode

我有一个视图控制器，我从中调用第二个具有一定大小的小型视图控制器。然后从第二个开始，如果用户想要，他可以调用相机，全屏，但问题是当它被关闭时，2 viewcontroller 会改变大小。为什么？我该如何预防？

# .net - 如何在 PowerShell 中删除点源脚本？

> ID：13710453
> 
> 赞同：7
> 
> 时间：2012-12-04T19:30:19.443
> 
> 标签：.net, powershell

如果我有点来源：

```
. "\foo-bar.ps1" 
```

如何查看获取所有点源脚本的列表以及如何从点源脚本中删除“foo-bar/ps1”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T19:49:09.883

据我所知，您无法删除点源脚本。这就是 PowerShell 2.0 中引入模块的原因。请参阅[About_Modules](http://technet.microsoft.com/en-us/library/hh847804.aspx)

您可以将“foo-bar.ps1”转换为模块。一个模块可以被导入（Import-Module）和移除（Remove-Module）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T21:58:57.107

我同意@JPBlanc 的观点，即您一般不能删除点源脚本*，*但根据您自己的编码约定，您可能可以*在实践*中执行此操作。

**首先是关于为什么你不能这样做**的一些观察：

(1) PowerShell 没有将点源脚本作为单独实体的概念。一旦你点源它，它的内容就会成为你当前上下文的一部分，就像你在提示符下手动键入每一行一样。因此你不能删除它，因为它实际上并不存在:-)

(2) 出于与 (1) 相同的原因，您不能列出点源脚本。

**现在，无论如何该怎么做：**

但是，根据您的点源脚本的内容和约定，您也许可以做您想做的事情。例如，如果脚本只定义了三个函数——调用这些函数`func-a`、、`func-b`和`func-c`——那么您*可以*同时**列出**和**删除**这些函数。

**列出**同化函数：

```
Get-ChildItem function:func-* 
```

**删除**同化函数：

```
Remove-Item function:func-* 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T13:49:57.960

如果您知道点源文件的路径，则可以删除源函数：

```
Get-ChildItem function: | 
Where-Object {$_.ScriptBlock.File -eq $path} | 
Remove-Item 
```

# database - 当一个网站太多，sqlite 无法处理？

> ID：13710455
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:30:31.880
> 
> 标签：database, sqlite, web

我很好奇，您如何判断 sqlite 何时不足以处理公共网站的数据，并且您意识到是时候使用 MySQL 或更强大的东西了？我怎么知道 sqlite 就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:13:43.630

[http://www.sqlite.org/whentouse.html](http://www.sqlite.org/whentouse.html)

在标题下检查这里：

'另一个 RDBMS 可能工作得更好的情况'

# android - 在android开发中洗牌并将它们分配给用户和计算机

> ID：13710458
> 
> 赞同：0
> 
> 时间：2012-12-04T19:30:37.917
> 
> 标签：android

我正在 android 开发中创建一个基本的顶级王牌应用程序。我只需要6张使用数据库制作的顶级王牌。我已经有了这个代码并成功地创建了卡片。

我被困在这一点上

当用户选择“玩”时，您应该将数据库中的一半牌随机分配给人类玩家，将一半的牌分配给计算机。

并且想知道是否有人对如何做到这一点有任何想法？谢谢大家。

**更新**

我试过这样做

```
ArrayList<Integer> cards = new ArrayList<Integer>();
for(int i=1;i<=6;i++)
{
this.cards.add(i);
}
Collections.shuffle(this.cards); 
```

洗牌，但我不确定如何分配计算机和使用卡片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:22:05.713

我不确定你在这里的目标是什么，但这样的事情会做吗（在你洗牌之后）：

```
ArrayList<Integer> playerCards = new ArrayList<Integer>(cards.subList(0,2));    
ArrayList<Integer> computerCards = new ArrayList<Integer>(cards.subList(3,5)); 
```

当然，你应该到处使用变量而不是常量，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:43:27.580

我不是一个安卓程序员，但很久以前我意识到处理洗牌的方法是将卡片存储在一个数组中，或者按照它们的自然顺序而不是洗牌顺序存储卡片——对于普通扑克牌，2 黑桃到 A - 黑桃，然后 2-clubs 到 A-clubs 等等。然后，不是从洗好的牌堆中按顺序发牌，而是从未洗牌的牌堆中随机抽牌来发牌。你的卡片元素需要一个“使用过的”设置或值，这样它们就不会被重复使用或使用两次。节省大量时间进行洗牌。在你的情况下，你需要抽三张牌，然后其他人得到剩下的。

# arrays - 将 (Float) ArrayList 中的值保存到 Bundle

> ID：13710459
> 
> 赞同：1
> 
> 时间：2012-12-04T19:30:39.850
> 
> 标签：arrays, arraylist, floating-point, integer, bundle

我正在使用 Surfaceview 编写游戏，并且有一个关于将数据保存到 Bundle 中的问题。

最初，我有一个数组列表，它存储只会上下移动的精灵的 Y 坐标（以整数的形式）。声明为：

```
static ArrayList<Integer> ycoordinates = new ArrayList<Integer>(); 
```

我使用以下方法将它们保存到一个 Bundle 中：

```
myBundle.putIntegerArrayList("myycoordinates", ycoordinates); 
```

并使用以下方法恢复它们：

```
ycoordinates.addAll(savedState.getIntegerArrayList("ycoordinates")); 
```

这一切都很完美。但是，我不得不更改整个坐标系，使其基于 Delta 时间，以允许我的精灵在不同屏幕上以均匀的速度移动。这又是完美的工作。

但是，由于这种更改，我现在必须将这些值存储为浮点数而不是整数。

所以，我声明为：

```
static ArrayList<Float> ycoordinates = new ArrayList<Float>(); 
```

这就是背景，现在我的问题是，如何存储和恢复浮点数组列表中的值？似乎没有“putFloatArrayList”或“getFloatArrayList”。

（我使用了 Arraylist 而不是 Array，因为精灵的数量需要是动态的）。

任何帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:31:39.540

我编写了几个简单的方法来在 List 和 float[] 之间进行转换。您可以使用 Bundle`putFloatArray()`和`getFloatArray`float[]。

```
import java.util.ArrayList;
import java.util.List;

public class Test {
  public static void main(String[] args){
    List<Float> in = new ArrayList<Float>();
    in.add(3.0f);
    in.add(1f);
    in.add((float)Math.PI);
    List<Float>out = toList(toArray(in));
    System.out.println(out);
  }

  public static float[] toArray(List<Float> in){
    float[] result = new float[in.size()];
    for(int i=0; i<result.length; i++){
      result[i] = in.get(i);
    }
    return result;
  }

  public static List<Float> toList(float[] in){
    List<Float> result = new ArrayList<Float>(in.length);
    for(float f : in){
      result.add(f);
    }
    return result;
  }

} 
```

# javascript - 如何在 Photoshop JavaScript API 中加载图层透明度并另存为路径？

> ID：13710461
> 
> 赞同：2
> 
> 时间：2012-12-04T19:30:49.077
> 
> 标签：javascript, api, save, transparency, photoshop

我对 javascripting 很陌生，正在尝试在 Photoshop 中处理大量图层，以将每个图层的加载选择输出为 ai 路径。

我遇到的问题是了解 selection.load 的通道参数。

在 Photoshop 中，负载选择的下拉菜单将通道名称显示为“layer_7 Transparency”。但是通过这个似乎不起作用。

```
 for(a=2;a<=AD.layers.length;a++){
    AD.layers[a-2].visible = 0;
    AD.layers[a-1].visible = 1;

    if((checkArray[a-1]!= 1)&&(checkArray[a-1]!= 2)){ 

        var channel = AD.channels.getByName(AD.layers[a-1].name+" Transparency");
        AD.selection.load(channel, SelectionType.REPLACE, false);

        AD.selection.makeWorkPath(1.0)

        newAIFile = new File(tempFolder+"/"+AD.layers[a-1].name+".ai");
        AD.exportDocument(newaiFile , ExportType.ILLUSTRATORPATHS , exportOptions)

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T18:24:17.710

在脚本中，集合中的第一层是最后添加的层。它位于`Document.artLayers`集合中的索引 0 处。

```
// Get a reference to the first layer in the document
var layerRef:Layer = app.activeDocument.layers.index(0);

// Get a reference to a layer by name
var baseLayer:Layer = app.activeDocument.artLayers.getByName("Background"); 
```

因为图层集可以嵌套，您可能必须向下钻取包含的图层集才能到达特定图层或图层集：

```
app.activeDocument.layerSets.index(0).layerSets.index(0); 
```

**参考**

*   [脚本 Photoshop：使用图层](http://cssdk.host.adobe.com/sdk/1.0/docs/WebHelp/app_notes/ps_doc_model.htm#Working_with_layers)

# python - 如何将python文件拆分为python和html文件

> ID：13710462
> 
> 赞同：0
> 
> 时间：2012-12-04T19:30:53.833
> 
> 标签：python, html, google-app-engine, datastore

我正在尝试将 python 文件制作成 python 和 html 文件。我拥有的代码基本上来自 python 留言簿示例，但我希望有一个 html 文件为使用浏览器提供服务。我现在的代码可以使用，但是当我在底部添加 javascript 时出现错误此代码位于 ceemee11111.appspot.com

```
import cgi
import datetime
import urllib
import webapp2

from google.appengine.ext import db
from google.appengine.api import users

class Greeting(db.Model):
  """Models an individual Guestbook entry with an author, content, and date."""
  author = db.StringProperty()
  content = db.StringProperty(multiline=True)
  content2 = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
  """Constructs a Datastore key for a Guestbook entity with guestbook_name."""
  return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.out.write('<html><body>')
    guestbook_name=self.request.get('guestbook_name')

    greetings = db.GqlQuery("SELECT * "
                        "FROM Greeting "
                        "WHERE ANCESTOR IS :1 "
                        "ORDER BY date DESC LIMIT 3",
                        guestbook_key(guestbook_name))

    self.response.out.write("""
      <form action="/sign?%s" method="post">
        <div id="container" style="width:800px">

        <div id="header" style="background-color:#FFA500;">
        <h1 style="margin-bttom:0;">Main Title</h1></div>

        <div id="Con0" style="background-color:#FFD700;
   height:200px;width:200px;float:left;">
         <b>Menu</b><br>
         HTML<br>
         CSS<br>
         <p id="demo1"></p><br>
         JavaScript</div>

       <div id="content" style="background-color:#EEEEEE;height:200px;width:600px;float:left;">
Content goes here</div>
      </div>
      <button onclick="myFunction()">Try it</button>
      </form>
    </body>
  </html>""") 

self.response.out.write("""
      <form action="/sign?%s" method="post">
       <div id="dataImput"
        <div><textarea name="content" rows="1" cols="10"></textarea></div>
        <div><textarea name="content2" rows="1" cols="10"></textarea></div>
        <div><input type="submit" value="Sign Guestbook"></div>
      </div>
      </form>
      <hr>
      <form>Guestbook name: <input value="%s" name="guestbook_name">
      <input type="submit" value="switch"></form>
    </body>
  </html>""" % (urllib.urlencode({'guestbook_name': guestbook_name}),
                      cgi.escape(guestbook_name)))

class Guestbook(webapp2.RequestHandler):
  def post(self):
    # We set the same parent key on the 'Greeting' to ensure each greeting is in
    # the same entity group. Queries across the single entity group will be
    # consistent. However, the write rate to a single entity group should
    # be limited to ~1/second.
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
      greeting.author = users.get_current_user().nickname()

greeting.content = self.request.get('content')
greeting.content2 = self.request.get('content2')
greeting.put()
self.redirect('/?' + urllib.urlencode({'guestbook_name': guestbook_name}))

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True)

#<script>
#function myFunction()
#{
#document.getElementById("demo1").innerHTML="test";
#} 
```

感谢您的时间。担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:44:25.600

我认为您的代码将真正受益于将 HTML 与 Python 代码分开。

您可以通过编写 html 模板并使用 jinja2（google appengine 附带）来生成 html。这里有关于如何做到这一点的[说明](http://forums.udacity.com/questions/6009973/how-to-use-the-jinja2-template-engine-with-appengine#cs253)。JavaScript 将进入 HTML 模板，而不是 Python 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:43:21.733

鉴于您显然在使用 GAE，[此处](https://developers.google.com/appengine/docs/python/gettingstarted/templates)概述了您要执行的操作。

首先，将您的 html 移动到单独的文件中。我们将从奇怪的自由浮动的 html 开始`self.response.out.write`：

```
"""
      <form action="/sign?%s" method="post">
       <div id="dataImput"
        <div><textarea name="content" rows="1" cols="10"></textarea></div>
        <div><textarea name="content2" rows="1" cols="10"></textarea></div>
        <div><input type="submit" value="Sign Guestbook"></div>
      </div>
      </form>
      <hr>
      <form>Guestbook name: <input value="%s" name="guestbook_name">
      <input type="submit" value="switch"></form>
    </body>
  </html>""" % (urllib.urlencode({'guestbook_name': guestbook_name}),
                      cgi.escape(guestbook_name)) 
```

这属于一个单独的文件，我们将调用`myhtml.html`. 其次，我们将使用 Django 模板系统而不是`%s`Python 字符串格式化。所以首先，我们将`%s`用 包围的模板友好字段替换`{{ }}`，给我们：

```
"""
      <form action="/sign?{{ guestbook_name }}" method="post">
       <div id="dataImput"
        <div><textarea name="content" rows="1" cols="10"></textarea></div>
        <div><textarea name="content2" rows="1" cols="10"></textarea></div>
        <div><input type="submit" value="Sign Guestbook"></div>
      </div>
      </form>
      <hr>
      <form>Guestbook name: <input value="{{ guestbook_name|escape }}" name="guestbook_name">
      <input type="submit" value="switch"></form>
    </body>
  </html>""" 
```

请注意，我们能够使用`escape` [模板过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#built-in-filter-reference)（在 之后出现`|`）来转义我们从中获取的值`guestbook_name`。

最后，我们加载 html 并将我们需要的参数传递给它：

```
self.response.out.write(template.render('myhtml.html', {'guestbook_name': guestbook_name})) 
```

# asp.net-mvc - 使用 RhinoMocks 和 NUnit 测试模拟的 EF 上下文、上下文和工作单元

> ID：13710464
> 
> 赞同：1
> 
> 时间：2012-12-04T19:30:58.993
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, unit-of-work, rhino-mocks-3.5

我在模拟我的代码以使我能够测试我的 MVC 控制器时遇到了真正的问题。

我的存储库实现了以下接口

```
public interface IEntityRepository<T>
{
    IQueryable<T> All { get; }
    IQueryable<T> AllIncluding(params Expression<Func<T, object>>[] includeProperties);
    void Delete(int id);
    T Find(int id);
    void InsertOrUpdate(T entity);
    void InsertOrUpdateGraph(T entity);
} 
```

像这样

```
public interface IMonkeyRepository : IEntityRepository<Monkey>
{
} 
```

我的 EF 上下文实现了以下接口

```
public interface IMonkeyContext
{
    IDbSet<Monkey> Monkeys { get; set; }
    DbEntityEntry Entry(object entity);
    IEnumerable<DbEntityValidationResult> GetValidationErrors();
    int SaveChanges();
} 
```

我的工作单元接口是这样定义的

```
public interface IUnitOfWork<TContext> : IDisposable
{
    TContext Context { get; }
    int Save();
} 
```

并实施

```
public class MonkeyUnitOfWork : IUnitOfWork<IMonkeyContext>
{

    private readonly IMonkeyContext context;
    private bool disposed;
    public MonkeyUnitOfWork(IMonkeyContext context)
    {
        this.context = context;
    }
    public IMonkeyContext Context
    {
        get
        {
            return this.context;
        }
    }
    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    public int Save()
    {
        var ret = this.context.SaveChanges();
        return ret;
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                ((DbContext)this.context).Dispose();
            }
        }

        this.disposed = true;
    }
} 
```

我有一个我想测试的创建动作的 MonkeyController。我被定义

```
 if (this.ModelState.IsValid)
        {
            this.repo.InsertOrUpdate(Mapper.Map<MonkeyModel, Monkey>(monkey));
            this.uow.Save();
            return this.RedirectToAction(MVC.Monkey.Index());
        }

        return this.View(monkey); 
```

在我的单元测试中，我使用 RhinoMocks 并定义了测试

```
[TestFixture]
public class MonkeyControllerTests
{
    MockRepository mocks = null;

    private IMonkeyRepository monkeyRepository;

    private IMonkeyContext context;

    private MonkeyUnitOfWork unitOfWork;       

    private MonkeyController controller;

    [SetUp]
    public virtual void SetUp()
    {
        TestHelpers.SetupAutoMap();

        this.monkeyRepository = this.Mocks.StrictMultiMock<IMonkeyRepository>(typeof(IEntityRepository<Monkey>));

        this.context = this.Mocks.StrictMock<IMonkeyContext>();

        this.unitOfWork = new MonkeyUnitOfWork(this.context);

        this.controller = new MonkeyController(this.MonkeyRepository, this.unitOfWork);
    }

    [TearDown]
    public virtual void TearDown()
    {
        if (this.mocks != null)
        {
            try
            {
                this.mocks.ReplayAll();
                this.mocks.VerifyAll();
            }
            finally
            {
                this.mocks = null;
            }
        }
    }

    public MockRepository Mocks
    {
        get
        {
            if (mocks == null)
                mocks = new MockRepository();
            return mocks;
        }
    }

    [Test]
    public void MonkeyCreateShouldShouldDoSomeStuff()
    {
        var monkeyModel = ViewModelTestHelpers.CreateSingleMonkey();
        var monkey = Mapper.Map<MonkeyModel, Monkey>(monkeyModel);

        this.monkeyRepository.Expect(action => action.InsertOrUpdate(monkey));

        this.context.Expect(action => action.SaveChanges()).Return(1);
        var result = (RedirectToRouteResult)this.controller.Create(monkeyModel);

        Assert.AreEqual(MVC.Monnkey.ActionNames.Index, result.RouteValues["action"]);
    }
} 
```

当我运行测试时，我会收到以下错误

以前的方法 'IMonkeyContext.SaveChanges();' 需要返回值或抛出异常。

或者它抱怨 IEntityRepository.InsertOrUpdate 预期 1 实际 0

我已经尝试了很多演员表和咒语来让它发挥作用，但我很难过。有谁知道如何正确模拟这些对象？或者如果我从根本上错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:50:06.200

好吧，这似乎是一个小学生的错误

RhinoMocks 说 IEntityRepository.InsertOrUpdate 没有被调用时是正确的。

我在测试中从视图模型映射到模型的代码行

```
var monkey = Mapper.Map<MonkeyModel, Monkey>(monkeyModel); 
```

然后在期望中使用它

```
this.monkeyRepository.Expect(action => action.InsertOrUpdate(monkey)); 
```

当然是告诉 Rhino 应该用这个猴子的确切实例来调用该函数。

该函数当然是在动作中以以下方式调用的

```
this.repo.InsertOrUpdate(Mapper.Map<MonkeyModel, Monkey>(monkey)); 
```

不是同一个例子。

我现在已经转移到 aaa 语法并将测试代码更改为

```
this.monkeyRepository.Stub(r => r.InsertOrUpdate(Arg<Monkey>.Is.Anything)); 
```

并断言

```
this.monkeyRepository.AssertWasCalled(r => r.InsertOrUpdate(Arg<Monkey>.Is.Anything)); 
```

我现在要去羞愧地低下头。

# iphone - 使用音频队列或音频单元的 VoIP 功能

> ID：13710467
> 
> 赞同：2
> 
> 时间：2012-12-04T19:31:10.693
> 
> 标签：iphone, voip, audioqueueservices

你能告诉我这是怎么做到的吗？在一台设备上录制音频并在另一台设备上播放（VoIP）？

我被困在这里：我在此功能中的一台设备上获取输入语音数据

```
void AQRecorder::MyInputBufferHandler(  void *                              inUserData,
                                        AudioQueueRef                       inAQ,
                                        AudioQueueBufferRef                 inBuffer,
                                        const AudioTimeStamp *              inStartTime,
                                        UInt32                              inNumPackets,
                                        const AudioStreamPacketDescription* inPacketDesc)
{
    AQRecorder *aqr = (AQRecorder *)inUserData;
    try {
        if (inNumPackets > 0) {
            // write packets to file
            XThrowIfError(AudioFileWritePackets(aqr->mRecordFile, FALSE, inBuffer->mAudioDataByteSize,
                                             inPacketDesc, aqr->mRecordPacket, &inNumPackets, inBuffer->mAudioData),
                       "AudioFileWritePackets failed");
            //inData = inBuffer->mAudioData;
            aqr->mRecordPacket += inNumPackets;
            aqr->updateIndata(inBuffer);
        }

        // if we're not stopping, re-enqueue the buffe so that it gets filled again
        if (aqr->IsRunning())
            XThrowIfError(AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL), "AudioQueueEnqueueBuffer failed");
    } catch (CAXException e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
    }
} 
```

我正在将数据包发送到 UDP：

```
void AQRecorder::updateIndata(AudioQueueBufferRef inBuffer)
{
    SpeakHereAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSData *audioBytes = [NSData dataWithBytes:inBuffer->mAudioData 
                                        length:inBuffer->mAudioDataByteSize];
    NSLog(@"bytes: %d", [audioBytes length]);
    [appDelegate.udpSocket sendData:audioBytes 
                             toHost:appDelegate.host
                               port:appDelegate.port
                        withTimeout:-1
                                tag:1];
} 
```

＆我正在以 NSData 的形式接收另一端的数据，但不知道如何玩，你能帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:07:57.483

您需要一个像 CARingBuffer 这样的环形缓冲区来存储接收到的音频数据，并像 Audio Unit Render Callback 方法一样从缓冲区中读取数据。由于读写操作是异步的，而且速度不同，所以很难确定环形缓冲区应该多长。所以你也可以使用临时文件来存储接收到的数据，总是将日期写到文件的末尾，然后从头部读取。

# python - 接受用户输入以导航到目录

> ID：13710471
> 
> 赞同：0
> 
> 时间：2012-12-04T19:31:30.167
> 
> 标签：python

那么如何让python接受用户输入，以便它可以导航到用户给它的文件目录。文件名将`ede.html`始终相同，但取决于每个用户，文件的目录会不断变化。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:33:31.270

您像这样更改目录

```
import os
os.chdir('../dir') 
```

至于用户输入，您可以尝试使用模块`raw_input`中的方法获取并检查其有效性。`os.path`

# javascript - Sproutcore：LabelView 中未显示文本

> ID：13710472
> 
> 赞同：0
> 
> 时间：2012-12-04T19:31:37.093
> 
> 标签：javascript, label, sproutcore

以下`LabelView`是定义的地方。无论是什么被设置，因为它的值也显示在点击它的警告框中。但是，只有警报框显示输出。：

```
 outputView: SC.LabelView.design({
          layout: { width: 500, height: 18 }, 
          valueBinding: SC.Binding.oneWay('Tree.categoriesControllerList.selection.content'),
          click: function(){ 
             alert(Tree.categoriesControllerList.getPath('selection.firstObject.content'))
          }}) 
```

由于`value`某种原因未设置标签的 。给出的值为`viewUpdate`，定义如下：

```
viewUpdate: function(){         
          if (this.didChangeFor('selectionDidChange', selection')&&this.getPath('selection.firstObject.notes')==null){
                    return this.getPath('selection.firstObject.content')
            }
        }.property() 
```

我确定这将返回正确的值，因为每当我单击标签时，它的值都会按照指示出现在警报框中。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:47:21.393

我认为您只是忘记了值绑定中的“firstObject”：

```
valueBinding: SC.Binding.oneWay('Tree.categoriesControllerList.selection.firstObject.content'), 
```

# html - 下拉菜单不显示子列表

> ID：13710478
> 
> 赞同：0
> 
> 时间：2012-12-04T19:32:43.583
> 
> 标签：html, css

我正在创建一个[新的下拉菜单](http://lwis.net/free-css-drop-down-menu/lwis.celebrity.horizontal.html)，但似乎无法使嵌套的 uls 可见。

[这是测试页面](http://www.inside-guides.co.uk/brentwood/pages/about-us.html)，您可以将鼠标悬停在“事件”部分上，但它不起作用。

这是html：

```
<div class="menu clearfix">
      <ul class="menu dropdown dropdown-linear dropdown-columnar">
        <li class="community"><a class="events_link" href="/events/index.html">Events</a>
            <ul>
            <li><a href="./">Menu Subitem #1</a></li>
            <li><a href="./">Menu Subitem #2</a></li>
            <li><a href="./">Menu Subitem #3</a></li>
            <li><a href="./">Menu Subitem #4</a></li>
        </ul>
        </li>
    </ul>
  </div> 
```

这是嵌套 ul 的 CSS：

```
ul.dropdown,
ul.dropdown li,
ul.dropdown ul {
 list-style: none;
 margin: 0;
 padding: 0;
}

ul.dropdown {
 position: relative;
 z-index: 597;
 float: left;
}

ul.dropdown li {
 float: left;
 min-height: 1px;
 line-height: 1.3em;
 vertical-align: middle;
}

ul.dropdown li.hover,
ul.dropdown li:hover {
 position: relative;
 z-index: 599;
 cursor: default;
}

ul.dropdown ul {
 visibility: hidden;
 position: absolute;
 top: 100%;
 left: 0;
 z-index: 598;
 width: 100%;
}

ul.dropdown ul li {
 float: none;
}

ul.dropdown ul ul {
 top: 1px;
 left: 99%;
}

ul.dropdown li:hover > ul {
 visibility: visible;
} 
```

我没有发布所有内容，因为有很多内容，但是如果您需要更多内容，请告诉我，或者请检查员查看其余内容。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:48:55.050

也许是因为您没有添加 width ti li 元素？尝试：

```
width:100px; 
```

请看这个[http://jsfiddle.net/brightlycolor/ktxHm/11/](http://jsfiddle.net/brightlycolor/ktxHm/11/)这很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:06:15.457

您需要删除/更改`overflow:hidden`from `header-wrapper`。它使子内容（您的菜单）被隐藏，因为它们在技术上是溢出内容。

# html - 如何从 jquery UI 选项卡导航中打开包含 .html 文件的 fancybox

> ID：13710480
> 
> 赞同：0
> 
> 时间：2012-12-04T19:32:49.467
> 
> 标签：html, fancybox, jquery-ui-tabs

我有一组用于顶部导航的 jquery 选项卡（选项卡只是文本链接，而不是“图形”选项卡）。当您单击链接时，我希望打开一个包含外部 html 文件的花式框。这没有发生。没有花哨的盒子正在推出。下面是我的代码。你们能不能让我知道我做错了什么以及如何解决？我很难弄清楚。谢谢。

**脚本**：

```
<link rel="stylesheet" href="../css/jquery.fancybox.css" type="text/css"  />
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script language="javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script language="javascript" src="../js/fancybox/jquery.fancybox.js"></script> 
```

HTML：

```
<script type="text/javascript">
$(document).ready(function() {

    $("#lesson-tabs").tabs();

    $(".tabs-content").fancybox({

                'type':'iframe',
                'maxWidth'  : 580,
                'maxHeight' : 390,
                'fitToView' : false, 
                'width'     : 500,
                'height'    : 300,
                'autoSize'  : false
    });

});
    </script>

<div class="overhide" id="lesson-tabs">
        <ul>
          <li>
               <span class="fun2learn-add" ></span>
               <a href="lessons/addition1.html" class="first-class2 tabs-content" >Addition</a>
           </li>
           <li>
               <span class="fun2learn-subtract" ></span>
               <a href="lessons/subtraction1.html" class="first-class2 tabs-content">Subtraction</a>
           </li>
    </ul>
</div> 
```

**幻想盒的课程/addition1.html 代码：**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Just try it!</title>
<style>
div {font-family:Arial, Helvetica, sans-serif;font-size:16px;}
.blkstyle {display:block;}
input[type=submit] {margin-top:10px;}
</style>
</head>

<body>
<div>
<p>If you have 14 apples, Justin has 12 and Mary gives you 7 more apples, but only gives Justin 3 apples, how many apples would you and Justin have altogether?</p>
<form>
<span class="blkstyle"><input type="radio" name="apples" /><label>24</label></span>
<span class="blkstyle"><input type="radio" name="apples" /><label>42</label></span>
<span class="blkstyle"><input type="radio" name="apples" /><label>36</label></span>
<span class="blkstyle"><input type="radio" name="apples" /><label>16</label></span>
<input type="submit" value="Answer" />
</form>

</div>
</body>
</html> 
```

**幻想盒的课程/减法1.html代码：**

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset="utf-8">
    <title>Just try it!</title>
    <style>
    div {font-family:Arial, Helvetica, sans-serif;font-size:16px;}
    .blkstyle {display:block;}
    input[type=submit] {margin-top:10px;}
    </style>
    </head>

    <body>
    <div>
        <p>Jamie has 38 lives left in play for his new video game.  
        He loses 6 lives on level Nine and 5 lives on level Twelve.  
        He hasn't gained anymore lives until level Twenty, where he gets 4 more, 
        but loses 1 life in play.  How many lives does Jamie have left in play?</p>
        <form>
            <span class="blkstyle"><input type="radio" name="apples"  /><label >26</label></span>
            <span class="blkstyle"><input type="radio" name="apples" /><label>30</label></span>
            <span class="blkstyle"><input type="radio" name="apples" /><label>22</label></span>
            <span class="blkstyle"><input type="radio" name="apples" /><label>16</label></span>
            <input type="submit" value="Answer" class="blkstyle"/>
        </form>

    </div>
</body>
</html> 
```

![在此处输入图像描述](../Images/293f19b4b8858b976f2675b88697497a.png)

# android - Android项目不能在不同的开发环境中工作

> ID：13710488
> 
> 赞同：0
> 
> 时间：2012-12-04T19:33:29.353
> 
> 标签：android, eclipse, development-environment, adt

我有一个 Android 项目，可以在具有 Eclipse Indigo 64 位和 ADT 版本 15 的计算机上正常工作。在另一台计算机上，我安装了 Eclipse Indigo 32 位和新的 ADT，并且同一个项目不起作用，并说找不到主要活动类. 我解压缩了apk和.dex文件，并且该类存在。

新版本的 ADT 是否会产生此错误？这个项目的清单是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:25:40.693

最后的问题是，旧版本的 ADT`Project > Properties > Java Build Path`不需要标记需要放入 APK 的库。在新版本中，必须标记此库。

# ruby-on-rails - Rails：为您的单元测试预先制作模型实例（用于 DRY 目的）？

> ID：13710489
> 
> 赞同：0
> 
> 时间：2012-12-04T19:33:29.803
> 
> 标签：ruby-on-rails

我第一次在我的`User`模型中尝试自己进行测试，我意识到对于每个测试我都有一个针对`user = User.create(:name => "something", :age => 3, :gender => "m")`. 是否有 before_filter 或类似的测试，这样我就不必为每个测试创建一个用户？或者以某种方式将它放在全局命名空间中，以便在任何地方都可以访问它？

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "user is created" do
    user = User.create(:name => "Edmund", :age => 3, :gender => "m")
    assert_equal user, User.find_by_name("Edmund")
    assert_equal 3, User.count
  end

  test "user has sent messages" do
    user = User.create(:name => "Edmund", :age => 3, :gender => "m")
    2.times do 
      user.sent_messages.create(:sender_id => user.id)
    end
    assert_equal 2, user.sent_messages.count
  end

  test "user has received messages" do
    user = User.create(:name => "Edmund", :age => 3, :gender => "m")
    2.times do
      user.received_messages.create(:receiver_id => user.id)
    end
    assert_equal 2, user.received_messages.count
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:01:09.273

是的，您可以为您的测试定义一个设置方法，该方法将在每次测试之前运行。如果您在那里定义一个全局变量，那么它可以在所有测试用例中访问。

前任：

```
class UserTest < ActiveSupport::TestCase

  setup do
    @user = User.create(:name => "Edmund", :age => 3, :gender => "m")
  end

  test "user has sent messages" do
    2.times do 
      @user.sent_messages.create(:sender_id => user.id)
    end
    assert_equal 2, @user.sent_messages.count
  end

end 
```

# algorithm - 如果我知道每个项目的成本，可以生产多少项目

> ID：13710493
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:33:41.943
> 
> 标签：algorithm

假设我有两个`X, Y`众所周知的资源。接下来我有 n 个项目，其中每个项目都由它的成本来描述：`x, y`. 如何判断我可以生产多少件商品（最多）？我将不胜感激任何可以帮助我确定的伪代码或 c/c++ 算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:41:53.687

您可以使用具有 3D 空间而不是 2D 空间的背包变体来解决它。

在这里，每个项目的“利润”为 1，您尝试将其最大化。权重是每个项目的对 (x,y)。

3D 背包的想法是一样的，但在递归步骤中有一个额外的维度。[该线程](https://stackoverflow.com/q/13404173/572670)准确地讨论了这个问题。

该问题的 DP 解决方案的递归公式（假设整数 x，y）是（取自引用问题的答案）：

```
f(item,cost1,cost2) = max {
               f(item-1,cost1,cost2), 
               f(item,cost1-firstCost[i],cost2-secondCost[i]) + profit[i]
                          } 
```

* * *

让我们用你的例子来做：

```
X = 3 Y = 6; item1 = (3,3), item2 = (1,3), item3 = (2,2).

f(3,3,6) = max { f(2,3,6) , f(2,1,4) + 1} 
         = max { max { f(1,3,6), f(1,2,3) + 1 } , max { f(1,1,4) , f(1,-1,2) + 1 } + 1 }
         = max { max { max { f(0,3,6) , f(0,0,3) + 1} , max { f(0,2,3), f(0,-1,0) + 1} +1 },
                 max { max { f(0,1,4), f(0,-2,1) + 1 } , -infinity } +1 } 
         = max { max { max { 0, 1}, max { 0,-infinity} + 1 }, 
                 max { max { 0, -infinity } , -infinity } + 1 }
         = max { max { 1,0 } + 1 }, max { 0, -infinity } + 1 }
         = max { 2,1} = 2 
```

# oracle - pl/sql 中的动态表名

> ID：13710499
> 
> 赞同：1
> 
> 时间：2012-12-04T19:34:06.410
> 
> 标签：oracle, plsql, dynamic-sql

我需要从表 Table_A 中选择列，但是还有另一个表具有相同的模式 Table_B。查询应动态确定来自表。例如。如果 Table_A 有更多行，则使用 Table_A，否则使用 Table_B。

查询类似这样的内容 select employee,salary,id from ( *condition to count rows and select the table* )table;

这是否可能不使用游标和立即执行？？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:45:25.450

通常，您会为这类事情使用动态 SQL。这将涉及使用`DBMS_SQL`包`EXECUTE IMMEDIATE`或执行`OPEN <<cursor>> FOR <<SQL statement string>>`.

如果您真的想使用静态 SQL，您可以查询两个表并只返回一组结果。我无法想象这种情况会真正有意义，但你当然可以做到

创建一个`FOO`和一个`FOO2`表。 `FOO2`从两排到一排`FOO`

```
SQL> create table foo( col1 number );

Table created.

SQL> create table foo2( col1 number );

Table created.

SQL> insert into foo values( 1 );

1 row created.

SQL> insert into foo2 values( 1 );

1 row created.

SQL> insert into foo2 values( 2 );

1 row created. 
```

运行查询。这将返回所有数据`FOO2`

```
SQL> ed
Wrote file afiedt.buf

  1  select col1
  2    from (select the_union.*,
  3                 max(cnt) over () max_cnt
  4            from (select col1, count(*) over () cnt from foo
  5                  union all
  6                  select col1, count(*) over () from foo2) the_union)
  7*  where cnt = max_cnt
SQL> /

      COL1
----------
         1
         2 
```

将更多行插入`FOO`. 现在相同的查询将返回所有数据`FOO`

```
SQL> insert into foo values( 3 );

1 row created.

SQL> insert into foo values( 5 );

1 row created.

SQL> commit;

Commit complete.

SQL> select col1
  2    from (select the_union.*,
  3                 max(cnt) over () max_cnt
  4            from (select col1, count(*) over () cnt from foo
  5                  union all
  6                  select col1, count(*) over () from foo2) the_union)
  7   where cnt = max_cnt;

      COL1
----------
         1
         3
         5 
```

但是，正如我所说，我无法理解这样做实际上有意义的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:09:34.547

我完全猜测您真正想要做什么，但我认为您想使用同义词。我猜当您应该使用 TableA 与 TableB 时，会触发某种事件。创建一个指向 TableA 的同义词“my_table”并让您的视图从“my_table”中选择。然后，每当您希望视图指向 TableB 时，只需将同义词切换为指向 TableB，您无需对视图执行任何操作。

有关更多信息，[请阅读概念指南中的同义词](http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#CNCPT711)。

# dynamics-crm-2011 - 使用 RetrieveMultipleRequest 检索每个的相关实体

> ID：13710503
> 
> 赞同：11
> 
> 时间：2012-12-04T19:34:11.637
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试从 CRM 中检索实体列表，但我希望每个实体都具有相关实体。到目前为止，我有以下代码：

```
FilterExpression filterExpression = new FilterExpression();
ConditionExpression condition = new ConditionExpression(Constants.ModifiedOnAttribute, ConditionOperator.GreaterEqual, lastSync);
filterExpression.AddCondition(condition);

QueryExpression query = new QueryExpression()
{
     EntityName = entityName,
     ColumnSet = new ColumnSet(attributesMetadata.Select(att => att.Name).ToArray<string>()),
     Criteria = filterExpression,
     Distinct = false,
     NoLock = true
};

RetrieveMultipleRequest multipleRequest = new RetrieveMultipleRequest();
multipleRequest.Query = queryExpression;

RetrieveMultipleResponse response = (RetrieveMultipleResponse)proxy.Execute(multipleRequest); 
```

在变量响应中，我可以看到 EntityCollection 属性，但在内部，相关实体总是为空。

![相关实体计数为 0](../Images/d557640c5402d49da31676f260894748.png)

我想知道是否可以使用 RetrieveMultipleRequest 检索给定实体的集合以及相关实体，而不是使用 RetrieveRequest 逐个检索。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T20:05:23.947

一种检索相关实体数据的方法 - 将 LinkEntities 添加到您的查询中。下面的示例将使您了解如何进行此操作：

```
LinkEntity linkEntity = new LinkEntity("email", "new_emails", "activityid", "new_relatedemail", JoinOperator.Inner);
linkEntity.Columns.AddColumn("versionnumber");
linkEntity.Columns.AddColumn("new_emailsid");
linkEntity.EntityAlias = "related";

query = new QueryExpression("email");
query.ColumnSet.AddColumn("activityid");
query.ColumnSet.AddColumn("versionnumber");
query.Criteria.AddCondition("modifiedon", ConditionOperator.NotNull);
query.LinkEntities.Add(linkEntity); 
```

然后您可以使用上面指定的 EntityAlias 访问相关实体的属性：

```
foreach (Entity entity in entities.Entities)
{
    if ((long)(entity["related.versionnumber"] as AliasedValue).Value > 0)
    {
        stop = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T21:18:38.760

`RetrieveMultipleRequest`用于返回特定类型实体的多个实例。我已经使用 C# 中的 CRM SDK 花了一年时间，但我发现无法在单个查询中填充这些相关的实体集合。这基本上给你留下了两个选择：

1.  按照 SergeyS 的建议使用 AliasedValue。请记住，在查询 1:Many 关系时，请注意您可能会为同一个父实体返回多个结果。这是我大部分时间使用的。

2.  对您要访问的每个关系执行第二次查询。如果您可以根据第一个`IN`查询的结果在第二个查询中使用语句，而不是为第一个查询的每个结果执行单独的查询，您可能会获得更好的性能。

下面是一些伪代码来显示差异。

```
var contacts = GetContacts();

// One Request to get the cars for the contacts
var cars = GetCarsWhereContactIdIn(contacts.Select( c => c.new_ContactId));

foreach(var c in contacts){
    c.new_Cars.AddRange(cars.where(car => car.new_contactId = c.ContactId));
}

// Verses
var contacts = GetContacts();

foreach(var c in contacts){
    // One Request for each contact
    c.new_Cars.AddRange(GetCarsForContact(c.ContactId));
} 
```

# android - Android 自定义组件在运行时工作正常，但在设计时不起作用

> ID：13710504
> 
> 赞同：4
> 
> 时间：2012-12-04T19:34:12.323
> 
> 标签：android, xml, layout, custom-component

我正在迈出 Android 开发的第一步。与此同时，我正在尝试创建一个稍后将在 Activity 上使用的自定义组件（用于测试目的）。

这是 ClearableEditText.java 的代码：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;

public class ClearableEditText extends LinearLayout {

    private EditText textField;
    private Button button;

    public ClearableEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        LayoutInflater.from(this.getContext()).inflate(R.layout.clearable_text,  this);

        setupViewItems();
    }

    private void setupViewItems() {
        // TODO Auto-generated constructor stub

        this.textField = (EditText) findViewById(R.id.editText1);
        this.button = (Button) findViewById(R.id.button1);

        this.textField.setText("Hello World 123");
    }    
} 
```

这是它的布局 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"        
        android:text="Button" />

</LinearLayout> 
```

这是将集成组件的活动的 XML 布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SegundaActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/ativity2_text" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <com.example.aplicacaoteste.ClearableEditText
        android:id="@+id/newComponent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        android:ems="10" >
    </com.example.aplicacaoteste.ClearableEditText>

</RelativeLayout> 
```

当我运行该应用程序时，该组件工作正常。尽管如此，一旦我切换到我的 Activity 的图形布局，我就会收到以下错误消息：

```
java.lang.NullPointerException
Exception details are logged in Window > Show View > Error Log

java.lang.NullPointerException
    at com.example.aplicacaoteste.ClearableEditText.setupViewItems(ClearableEditText.java:36)
    at com.example.aplicacaoteste.ClearableEditText.onFinishInflate(ClearableEditText.java:26)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:754)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:749)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372) 
```

我不知道这里发生了什么。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T09:30:53.410

This source code has working perfectly. This my source code

```
package com.testapplication.customtools;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;

public class ClearableEditText  extends LinearLayout{

    private EditText textField;
    private Button button;

    public ClearableEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        LayoutInflater.from(this.getContext()).inflate(R.layout.clearable_text,  this);

        setupViewItems();
    }

    private void setupViewItems() {
        // TODO Auto-generated constructor stub

        this.textField = (EditText) findViewById(R.id.editText1);
        this.button = (Button) findViewById(R.id.button1);

        this.textField.setText("Hello World 123");
    }    
} 
```

This is my Main activity xml Files

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SegundaActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="test" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <com.testapplication.customtools.ClearableEditText
        android:id="@+id/newComponent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        android:ems="10" >
    </com.testapplication.customtools.ClearableEditText>

</RelativeLayout> 
```

I am not getting any exception. check your package name

# java - 使用 JSTL 和 JSP 将字符串转换为整数

> ID：13710512
> 
> 赞同：0
> 
> 时间：2012-12-04T19:34:36.523
> 
> 标签：java, jsp, jstl

我正在使用 x:forEach 循环通过 XML 对象来提取数据

在 x:forEach 中，我使用 x:set 来选择我想要的值。

```
<x:forEach var="data" select="$path/">
    <x:set var="dataPoint" select="string($data//cell[8]/text())" /> ... 
```

如您所见，我正在选择指定节点中的文本，然后将其转换为字符串。dataPoint 变量实际上是数字，我需要对它们做某些事情，例如排序和提取最小和最大数量。

问题是我正在尝试形成一个整数数组，而我的编译器抱怨我无法将 Object 转换为 int。

错误是：“类型不匹配：无法从 Object 转换为 int”

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:15:22.313

解决方案：

我将对象转换为字符串，然后从字符串转换为整数：

```
Integer.parseInt(StringVar); 
```

# python - 比较列表以查找 python 中的常见元素

> ID：13710517
> 
> 赞同：3
> 
> 时间：2012-12-04T19:34:58.520
> 
> 标签：python

> **可能重复：**
> [Python - 两个列表的交集](https://stackoverflow.com/questions/642763/python-intersection-of-two-lists)

我正在尝试比较两个列表，以找出它们共有的元素数量。

我遇到的主要问题是当任一列表包含重复元素时，例如

```
A = [1,1,1,1]   and  
B = [1,1,2,3] 
```

使用代码

```
n = 0
for x in A:
   if x in B:
      n += 1
print n 
```

给我的输出是`n = 4`，从技术上讲，A 的所有元素都在 B 中

我想得到输出`n = 2`，最好不使用集合，无论如何我可以调整我的代码，或者一种新的思考问题的方式来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:05:50.243

尚不完全清楚您的规范是什么，但如果您想要`A`出现在 中的元素数量`B`，不考虑顺序，但考虑多重性，请使用[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> A = [1,1,1,1]
>>> B = [1,1,2,3]
>>> C = Counter(A) & Counter(B)
>>> sum(C.itervalues())
2
>>> list(C.elements())
[1, 1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:11:10.607

`O(n logn)`这是一种不使用集合的有效 ( ) 方法：

```
def count_common(a, b):
  ret = 0
  a = sorted(a)
  b = sorted(b)
  i = j = 0
  while i < len(a) and j < len(b):
    c = cmp(a[i], b[j])
    if c == 0:
      ret += 1
    if c <= 0:
      i += 1
    if c >= 0:
      j += 1
  return ret

print count_common([1,1,1,1], [1,1,2,3]) 
```

如果您的列表总是排序的，就像在您的示例中一样，您可以放弃这两个`sorted()`电话。这将给出一个`O(n)`算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:50:17.140

这是一种完全不同的思考问题的方式。

想象一下，我有两个词，`"hello"`和`"world"`。为了找到共同的元素，我可以遍历`"hello"`，给我`['h', 'e', 'l', 'l', 'o']`. 对于列表中的每个元素，我将从第二个`list(word)`.

1.  `'h'`在吗`['w', 'o', 'r', 'l', 'd']`？不。
2.  `'e'`在吗`['w', 'o', 'r', 'l', 'd']`？不。
3.  `'l'`在吗`['w', 'o', 'r', 'l', 'd']`？是的！
4.  把它从`"world"`，给我`['w', 'o', 'r', 'd']`。
5.  `'l'`在`['w', 'o', 'r', 'd']`？_ 不。
6.  `'o'`在吗`['w', 'o', 'r', 'd']`？
7.  是的！删除它`['w', 'o', 'r', 'd']`，给我`['w', 'r', 'd']`

将原始对象的长度（确保您保留了一个副本）与新生成的对象的长度进行比较，您会看到差异为 2，表示 2 个常见字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:43:42.003

所以你想让程序检查两个列表中相同索引处的元素是否相等？那将非常简单：只需遍历两个数组的长度（我认为应该具有相同的长度），例如使用变量 i，然后通过 A.index(i) 和 B 比较每个数组。 index(i) 函数。如果你愿意，我可以发布代码。

如果这不是您想要做的，请务必让您的问题更清楚。

# c - 我无法理解结构指针和 XOR 的这种行为

> ID：13710518
> 
> 赞同：4
> 
> 时间：2012-12-04T19:35:02.577
> 
> 标签：c, pointers, struct, xor

我第一次使用结构指针，我似乎无法理解这里发生的事情。我的测试应用了 xor 的基本属性，即 x ^ y ^ y = x，但不是在 C 中？

下面的代码在我的主程序中，并准确地恢复了“test”的所有字母（我继续在屏幕上打印，但我省略了很多垃圾，以保持这个问题简短（er））。结构“aes”指的是这个定义：

```
typedef uint32_t word;

struct aes {

word iv[4];
word key[8];
word state[4];
word schedule[56];

}; 
```

正如上下文可能暗示的那样，封装项目是一个 AES 实现（我试图通过尝试新技术来加速我目前的实现）。

在我的测试中， make_string 和 make_state 工作可靠，即使在有问题的函数中，但为了参考：

```
void make_string (word in[], char out[]) {

for (int i = 0; i < 4; i++) {

    out[(i * 4) + 0] = (char) (in[i] >> 24);
    out[(i * 4) + 1] = (char) (in[i] >> 16);
    out[(i * 4) + 2] = (char) (in[i] >>  8);
    out[(i * 4) + 3] = (char) (in[i]      );

}

}

void make_state(word out[], char in[]) {

for (int i = 0; i < 4; i++) {

    out[i] =    (word) (in[(i * 4) + 0] << 24) ^
                (word) (in[(i * 4) + 1] << 16) ^
                (word) (in[(i * 4) + 2] <<  8) ^
                (word) (in[(i * 4) + 3]      );

}

} 
```

无论如何，这是可以工作的块。这是我试图通过将其存放在一个函数中来模块化的功能：

```
char test[16] = {
    'a', 'b', 'c', 'd',
    'e', 'f', 'g', 'h',
    'i', 'j', 'k', 'l',
    'm', 'n', 'o', 'p'
};

aes cipher;

struct aes * work;

work = &cipher;

make_state(work->state, test);

work->state[0] ^= 0xbc6378cd;
work->state[0] ^= 0xbc6378cd;

make_string(work->state, test); 
```

虽然这段代码有效，但通过将其传递给函数来做同样的事情不会：

```
void encipher_block (struct aes * work, char in[]) {

    make_state(work->state, in);

    work->state[0] ^= 0xff00cd00;

    make_string(work->state, in);

}

void decipher_block (struct aes * work, char in[]) {

    make_state(work->state, in);

    work->state[0] ^= 0xff00cd00;

    make_string(work->state, in);

} 
```

然而，通过删除 encipher 和 decipher 中的 make_state 和 make_string 调用，它可以按预期工作！

```
make_state(work->state, test);

encipher_block(&cipher, test);
decipher_block(&cipher, test);

make_string(work->state, test); 
```

所以澄清一下，我没有问题！我只是想了解这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:04:52.283

更改`char`为`unsigned char`。`char`可能已签名，并且可能在您的系统上，这在转换为其他整数类型和移位时会导致问题。

在 中的表达式`(char) (in[i] >> 24)`中`make_string`，一个无符号的 32 位整数被转换为一个有符号的 8 位整数（在您的 C 实现中）。此表达式可以将值转换为 a`char`中不可表示的 a `char`，特别是从 128 到 255 的值。根据 C 2011 6.3.1.3 3，结果是实现定义的或引发实现定义的信号。

在表达式`(word) (in[(i * 4) + 3] )`中`make_state`，`in[…]`是 a `char`，它是一个有符号的 8 位整数（在您的 C 实现中）。根据 C 2011 6.3.1.1 2 中定义的通常整数提升，这`char`将转换为。如果为负，则结果为负。然后，当它转换为无符号的 a 时，其效果是符号位被复制到高 24 位中。例如，如果值为 -166 (0x90)，则结果将为，但您想要。`int``char``int``word``char``0xffffff90``0x00000090`

在整个代码中更改`char`为。`unsigned char`

此外， in `make_state`,`in[(i * 4) + 0]`应该`word`在左移之前强制转换。这是因为它将以 开头，在班次之前`unsigned char`提升为。`int`如果它的高位设置了某个值，例如 0x80，则将其左移 24 位会产生一个无法在 中表示的值`int`，例如 0x80000000。根据 C 2011 6.5.7 4，行为未定义。

这在大多数 C 实现中都不是问题；二进制补码通常用于有符号整数，结果将根据需要换行。此外，我希望这是编译器开发人员设计的模型情况，因为它是一种非常常见的代码结构。但是，为了提高便携性，casting to`word`会避免溢出的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:48:13.583

该`make_state()`函数覆盖第一个参数中传递的数组。如果你把`encipher_block()`and`decipher_block()`身体内联，你会得到这个：

```
/* encipher_block inline */
make_state(work->state, in);
work->state[0] ^= 0xff00cd00;
make_string(work->state, in);

/* decipher_block inline */
make_state(work->state, in);    /* <-- Here's the problem */
work->state[0] ^= 0xff00cd00;
make_string(work->state, in); 
```

# php - PHP下载不适用于来自数据库的路径

> ID：13710519
> 
> 赞同：1
> 
> 时间：2012-12-04T19:35:15.357
> 
> 标签：php, download, content-type, content-disposition

我有一个简单的表单，当回传时，它会调用一个函数来启动下载。路径和文件名是从数据库中提取的，然后我使用标题开始下载。我的下载代码是：

```
//START DOWNLOAD
header('Content-type: "application/octet-stream"');
header('Content-Disposition: attachment; filename="'.$FILE_PATH.$FILE_NAME.'"');
header("Content-Transfer-Encoding: binary");
header("Connection: close") 
```

在上面的示例中，$FILE_PATH 变量是 /downloads/software/，$FILE_NAME 变量是 client-installer.exe。所以，我期望的是一个名为 client-installer.exe（大约 70MB）的文件被下载到客户端。相反，我得到一个名为 _downloads_software_client-installer.exe 的文件，大小约为 10KB。

我想也许我需要对文件路径/名称进行urlencode，但这也不能解决问题。所以我想也许我的标题有问题但似乎找不到它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:42:45.100

文件名标头仅表示应该调用的文件。它必须只包含一个文件名，而不是一个路径。服务器硬盘上的内部路径与客户端无关，也不感兴趣。您的服务器必须在响应中输出实际的文件数据，客户端无法从给定路径的服务器中获取它。

见[`readfile`](http://php.net/readfile)。

# android - 列表视图中的标题

> ID：13710520
> 
> 赞同：0
> 
> 时间：2012-12-04T19:35:17.460
> 
> 标签：android, listview

我想在我的列表视图中添加一个标题，但它正在强制关闭。我正在尝试将标题放在列表视图的顶部。因此，当我创建此列表视图时，我将操作这些代码：

```
lv = getListView();

        LayoutInflater inflater = getLayoutInflater();
        ViewGroup header = (ViewGroup)inflater.inflate(R.layout.header, lv, false);
        lv.addHeaderView(header, null, false); 
```

这是我的 header.xml ：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#DCDCDC"
    android:orientation="vertical" >

    <requestFocus />

    <ImageView
        android:id="@+id/imageButton2"
        android:layout_width="fill_parent"
        android:layout_height="52dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/header"
        android:src="@drawable/list_header" />

     <ImageButton
        android:id="@+id/imageButtonSearch"
        android:layout_width="60dip"
        android:layout_height="45dip"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/header"
        android:src="@drawable/search" 
        android:background="@android:color/transparent" 
        />

    <ImageView
        android:id="@+id/imageButton3"
        android:layout_width="150dip"
        android:layout_height="50dip"
        android:layout_alignBottom="@+id/imageButton2"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/header"
        android:src="@drawable/titel" />

    </RelativeLayout> 
```

这是我的日志：

```
12-04 19:31:30.478: E/AndroidRuntime(372): FATAL EXCEPTION: main
12-04 19:31:30.478: E/AndroidRuntime(372): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.laurenswuyts.find.it/com.laurenswuyts.find.it.AndroidListViewActivity}: java.lang.IllegalStateException: Cannot add header view to list -- setAdapter has already been called.
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.os.Looper.loop(Looper.java:130)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-04 19:31:30.478: E/AndroidRuntime(372):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 19:31:30.478: E/AndroidRuntime(372):  at java.lang.reflect.Method.invoke(Method.java:507)
12-04 19:31:30.478: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-04 19:31:30.478: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-04 19:31:30.478: E/AndroidRuntime(372):  at dalvik.system.NativeStart.main(Native Method)
12-04 19:31:30.478: E/AndroidRuntime(372): Caused by: java.lang.IllegalStateException: Cannot add header view to list -- setAdapter has already been called.
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.widget.ListView.addHeaderView(ListView.java:279)
12-04 19:31:30.478: E/AndroidRuntime(372):  at com.laurenswuyts.find.it.AndroidListViewActivity.onCreate(AndroidListViewActivity.java:80)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-04 19:31:30.478: E/AndroidRuntime(372):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-04 19:31:30.478: E/AndroidRuntime(372):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:59:07.153

我认为，您只需要在 setAdapter() 之前添加 headerView，您可以在文档中阅读它 - [addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)。

ListView 将所有页眉和页脚保存在特殊适配器中，该适配器包装了您的适配器（来自 setAdapter）。WrapperAdapter 将仅在 setAdapter 之前添加页脚或页眉时创建。这就是为什么您在尝试在 setAdapter 之后添加任何标头时捕获错误的原因。

如果我匆忙下结论，你能提供更多的代码吗？

# signalr - 如何使用 signalR 转换 ASP.Net Web API 的日期格式？

> ID：13710521
> 
> 赞同：0
> 
> 时间：2012-12-04T19:35:28.613
> 
> 标签：signalr, asp.net-web-api

我已经实现了 asp.net web api 和信号器，以便将数据推送到客户端。

有效负载包括通过 Asp.Net Web API 中的 signalR 将 DateTime 值推送到浏览器。

问题是当在浏览器上接收数据时，我得到 iso 格式的日期，即 2012-12-04T19:30:18，但我想要 microsoftdate 格式的数据，即“\date(...)”

为此，我尝试在 asp.net web api 的 global.asax 中的 application_start 事件中进行以下操作：

```
 var json =config.Formatters.JsonFormatter;
        json.SerializerSettings.DateFormatHandling = Newtonsoft.Json.DateFormatHandling.MicrosoftDateFormat; 
```

但仍将日期设为“2012-12-04T19:30:18”。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T23:30:36.460

从 SignalR 1.0 开始，您可以在应用程序开始时注册自己的 JsonNetSerializer，并使用如下自定义设置：

```
using System;
using System.Web;
using Microsoft.AspNet.SignalR;
using Newtonsoft.Json;

namespace MyApp
{
    public class Global : HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            var settings = new JsonSerializerSettings();
            settings.DateFormatHandling = DateFormatHandling.MicrosoftDateFormat;
            var serializer = new JsonNetSerializer(settings);

            GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:20:11.190

我没有完全遵循您遇到的问题，但我假设您正在尝试将当前的 DateTime 从服务器传递到客户端并读取它？

如果是这样，您可以通过以下方式发送/解析（无需任何序列化更改）： [SignalR datetime format](https://stackoverflow.com/questions/13365294/signalr-datetime-format/13366276)

这是读取 DateTIme 的 JavaScript 方式。

# magento - 将参数添加到 Paypal 交易

> ID：13710522
> 
> 赞同：0
> 
> 时间：2012-12-04T19:35:30.690
> 
> 标签：magento, post, paypal

当客户进行贝宝交易时，我如何为他们的购买添加参数？商品和价格都很好，但我在结帐时有一个额外的字段，在通过贝宝购买时没有被捕获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:02:04.140

您是否使用托管按钮？如果是这样，您不能直接添加自己的数据。它必须在按钮管理器中完成，并且在那里非常有限，因为您不能将动态变量用作值。

使用非托管按钮代码，您可以添加一个名为“自定义”的参数，并将您想要的任何内容放在那里，最多 256 个字符。这也将作为名为“custom”的 POST 变量返回 IPN。

如果您不确定您的按钮是否已托管，请查看他们提供给您的 HTML 以粘贴到您的页面中。如果它有一个 hosts_button_id 你知道它是托管的。

# java - Java，小程序：如何在 init() 完成工作之前阻止paint() 的激活

> ID：13710524
> 
> 赞同：0
> 
> 时间：2012-12-04T19:35:31.050
> 
> 标签：java, methods, applet

我发现该方法`paint()`在激活后一段时间（不能立即发生，可以吗？）`init()`，而不是在它完成后调用。我有一些在该方法中创建`init()`和绘制的对象。`paint()`但是绘图在对象初始化之前开始。这会导致异常，这些异常会自动处理。但这也会导致对象在第一次激活后不会被绘制`paint()`- 它们需要重新绘制才能显示出来。

我能够以`paint()`无限循环阻止方法的工作，放置在方法的开头，直到`init()`完成它的工作才停止（我猜`init()`并`paint()`在单独的线程中运行）。但是一位受雇的 Java 程序员告诉我，这不是一个优雅的解决方案——我应该尝试做一些不同的事情（那个人没有告诉我该怎么做，他没有使用小程序，我猜，他从来没有遇到过这种情况问题，这就是我在这里问的原因）。

如何确保该`paint()`方法在完成工作之前不会激活`init()`，以及如何以优雅的方式实现它（在这种情况下应该是什么意思......）？

编辑：

我正在使用 Dr. Java - 出于某种原因，它在两台不同的计算机上运行小程序的方式不同：一台运行 Win XP 的非常旧的笔记本电脑（7 岁）和一台运行 Win XP 的 2 岁台式电脑7\. 我犯了一个错误，不使用浏览器进行测试...

在桌面上使用 Dr. Java 进行测试时不会出现此问题。在浏览器上运行小程序时不会出现问题。它只发生在笔记本电脑上安装的编辑器上。我猜问题出在在“旧技术”上运行的代码编辑器中，而不是在代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:06:40.917

简短的回答是你不能。正如您所怀疑的，Init 和paint 被两个不同的线程调用。

我想到的最优雅的解决方案是

1.  检查paint方法中的空值
2.  在 init 方法中使用 EventQueue.invokeLater 并将初始化代码放入其中，完成后调用 repaint

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:15:52.577

```
public void init() {
   // do my initing...
   inited = true;
   repaint();
}

public void paint(Graphics g) {
   if (!inited) {
      return;
   }

   // do my painting...
} 
```

# ruby-on-rails - Ruby/Rails：如何插入带有 user_id 的 post_id？

> ID：13710526
> 
> 赞同：0
> 
> 时间：2012-12-04T19:35:40.280
> 
> 标签：ruby-on-rails, syntax, comments, belongs-to, posts

我读[了这篇文章](https://stackoverflow.com/questions/3911890/rails-belongs-to-many-models)，它对第一步很有帮助，现在我在第二步。我需要控制器和表单方面的帮助。

假设这是我的模型：

```
User
 has_many :posts
 has_many :comments

Post
 belongs_to :user
 has_many :comments

Comment
 belongs_to :user
 belongs_to :post 
```

这些是我的桌子：

```
User
 id

Post
 id
 user_id

Comment
 id
 user_id
 post_id 
```

在最初的帖子中，用户 ID 会自动添加到内容中，方法是将其添加到控制器的创建部分：

@post = current_user.post.build(params[:post])

如果评论同时属于用户和帖子，我如何让它自动添加 post_id 以及 user_id？目前，我似乎只能通过这样做来插入 user_id：

current_user.comments.build(params[:comment])

我是新来的铁路。我认为最好的方法不是使该字段可访问并在表单中添加一个隐藏字段，难道没有另一种方法吗？

这些是我更新的路线：

```
 users GET    /users(.:format)                                           users#index
                        POST   /users(.:format)                                           users#create
               new_user GET    /users/new(.:format)                                       users#new
              edit_user GET    /users/:id/edit(.:format)                                  users#edit
                   user GET    /users/:id(.:format)                                       users#show
                        PUT    /users/:id(.:format)                                       users#update
                        DELETE /users/:id(.:format)                                       users#destroy
               sessions POST   /sessions(.:format)                                        sessions#create
            new_session GET    /sessions/new(.:format)                                    sessions#new
                session DELETE /sessions/:id(.:format)                                    sessions#destroy
   Post_comments GET    /posts/:Post_id/comments(.:format)          comments#index
                        POST   /posts/:Post_id/comments(.:format)          comments#create
 new_Post_Comment GET    /posts/:Post_id/comments/new(.:format)      comments#new
edit_Post_Comment GET    /posts/:Post_id/comments/:id/edit(.:format) comments#edit
     Post_Comment GET    /posts/:Post_id/comments/:id(.:format)      comments#show
                        PUT    /posts/:Post_id/comments/:id(.:format)      comments#update
                        DELETE /posts/:Post_id/comments/:id(.:format)      comments#destroy
          posts GET    /posts(.:format)                                   posts#index
                        POST   /posts(.:format)                                   posts#create
       new_Post GET    /posts/new(.:format)                               posts#new
      edit_Post GET    /posts/:id/edit(.:format)                          posts#edit
           Post GET    /posts/:id(.:format)                               posts#show
                        PUT    /posts/:id(.:format)                               posts#update
                        DELETE /posts/:id(.:format)                               posts#destroy
                   root        /                                                          static_pages#home
                 signup        /signup(.:format)                                          users#new
                 signin        /signin(.:format)                                          sessions#new
                signout DELETE /signout(.:format)                                         sessions#destroy
                  start        /start(.:format)                                           posts#new 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:43:52.323

[Ryan Bates 在此处](http://railscasts.com/episodes/154-polymorphic-association-revised)的 railscasts 中介绍了我发现的最佳评论方式

```
class Comment < ActiveRecord::Base
  attr_accessible :content
  belongs_to :commentable, polymorphic: true
end

class Post < ActiveRecord::Base
  attr_accessible :content, :name
  has_many :comments, as: :commentable
end 
```

您可以在实际在控制器中构建评论时传递 current_user，或者将其作为隐藏字段传递，您可以使用一些不同的选项。

编辑路线：啊，这就是为什么，你的评论和你的帖子根本没有相互联系。在你`resources :post`改变它的路线中

```
resources :post do 
  resources :comments 
end 
```

如果您正在这样做，您需要将评论与帖子相关联如果您正在这样`Post.comments.build` 做`current_user.comments.build`，您需要在您的路线中执行此操作

```
resources :user do
  resources :comments
end 
```

# fullcalendar - 如何在 fullCalendar 中仅显示营业时间？

> ID：13710528
> 
> 赞同：7
> 
> 时间：2012-12-04T19:35:46.163
> 
> 标签：fullcalendar

我正在使用 jQuery [fullCalendar](http://arshaw.com/fullcalendar/)。客户只想在日历中查看他们的营业时间。那可能吗？如何？

示例：营业时间为上午 9 点至下午 1 点和下午 3 点至晚上 10 点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T23:12:23.500

minTime和[maxTime选项](http://arshaw.com/fullcalendar/docs/agenda/minTime/)[可](http://arshaw.com/fullcalendar/docs/agenda/maxTime/)让您设置第一个和最后一个小时。我不认为你可以有一个在中间休息的日历。

也许您可以创建一个称为午餐的重复事件，并将其颜色与您的实际事件不同

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-09T13:09:19.643

在当前的 fullcallendar 版本 ( `5.x`) 上，`maxTime`以及[重命名](https://fullcalendar.io/docs/upgrading-from-v4#date-rendering)为 和的`minTime`选项。`slotMaxTime``slotMinTime`

隐藏**大部分**工作时间 - 即夜间和/或非工作日：

1.  根据您的`businessHours`规范计算一些值

```
const workSpec = [
  {
    daysOfWeek: [1, 2, 3, 4],
    startTime: '08:00',
    endTime: '18:00'
  }
  {
    daysOfWeek: [5],
    startTime: '09:00',
    endTime: '14:00'
  }
]

/*
 * calculate the following:
 * - minimum "opening time"
 * - maximum "opening time"
 * - working days
 * - non-working days
 */
const workMin = workSpec.map(item => item.startTime).sort().shift()
const workMax = workSpec.map(item => item.endTime).sort().pop()
const workDays = [...new Set(workSpec.flatMap(item => item.daysOfWeek))]
const hideDays = [...Array(7).keys()].filter(day => !workDays.includes(day)) 
```

2.  在相关属性上使用计算值 - 即`@fullcalendar/react`：

```
<FullCalendar
  //...
  businessHours={workSpec}
  slotMinTime={workMin}
  slotMaxTime={workMax}
  hiddenDays={hideDays}
  //...
/> 
```

* * *

> **免责声明**：这是一个快速n-dirty的过程。可能会进行重构以提高性能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T19:21:54.907

fullcalendar 有更新，可让您申请营业时间

[http://fullcalendar.io/docs/display/businessHours/](http://fullcalendar.io/docs/display/businessHours/)

但是，我认为这不会让您在一天之内休息一下……在这里

[在 Fullcalendar 上为每一天应用不同的时间段和范围](https://stackoverflow.com/questions/26829039/apply-different-timeslots-and-ranges-for-each-day-on-fullcalendar/26949336#26949336)

您会在类似的问题上找到我的方法，我使用 Javascript 来防止选择特定时期，并且使用 css 我突出显示了我不想被选择的区域..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T16:49:47.697

要完全隐藏所需的行（非营业时间/休息时间），您必须在 fullcalendar.js 中修改以下方法：

```
// Generates the HTML for the horizontal "slats" that run width-wise. Has a time axis on a side. Depends on RTL.
renderSlatRowHtml: function() {...} 
```

然后避免输入添加html代码的while子句：

```
while (slotTime < this.maxTime) {...} 
```

你可以在那个 while 中添加一个 if 子句，或者甚至更多地输入一个配置参数来检查那个 while 迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T14:28:25.147

据我所知，隐藏休息时间仍然是不可能的，但是第 2 版现在已经有了`minTime`，`maxTime`你可以用它来隐藏非工作时间。

此处的文档：http: [//fullcalendar.io/docs/agenda/minTime/](http://fullcalendar.io/docs/agenda/minTime/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-16T12:23:30.960

使用 selectConstraint 和 eventConstraint 选项来防止在非工作时间发生点击事件（来自完整日历 2.2 版本）。就我而言，我使用了 selectConstraint: "businessHours" [https://fullcalendar.io/docs/selection/selectConstraint/](https://fullcalendar.io/docs/selection/selectConstraint/) [https://fullcalendar.io/docs/event_ui/eventConstraint/](https://fullcalendar.io/docs/event_ui/eventConstraint/)

# sql - 将当前单价在 $5.00 和 $10.00 之间的所有行的 products 表中的单价提高 5%

> ID：13710533
> 
> 赞同：2
> 
> 时间：2012-12-04T19:36:24.340
> 
> 标签：sql, between

好的，所以我正在做一些功课，这是我正在努力解决的问题：

使用 UPDATE 语句，在 products 表中为当前 unit_price 介于 $5.00 和 $10.00 之间的所有行创建 unit_price 5%。

我对此的回答是：

```
UPDATE      products
SET         unit_price = unit_price*1.05
WHERE       unit_price BETWEEN 5.00 AND 10.00;
GO 
```

但我收到此错误消息：

将 varchar 值“reorder_level”转换为数据类型 int 时转换失败。

这没有任何意义，因为列 'reorder_level' 已经是 int 并且与此 sql 语句无关。我写的语句不正确吗？帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T23:58:29.747

尝试这个：

```
     更新 t1
    SET t1.unit_price = t2.unit_price*1.05
    FROM products AS t1 INNER JOIN products AS t2 ON t1.productid = t2.productid
    WHERE t1.unit_price 介于 5.00 和 10.00 之间；
    去

```

# javascript - 用 jQuery 动画扩展图片推别人

> ID：13710534
> 
> 赞同：2
> 
> 时间：2012-12-04T19:36:26.573
> 
> 标签：javascript, jquery, css, html

我在一个电子商务网站上工作，我的客户希望产品图像可以在类别页面上悬停时展开。

产品图片以`<li>`s 的形式组织在 a 中`<ul>`，我将它们设置为每行有 4 个，使其看起来像一个网格。它只是一个大`<ul>`的。

我用 jQuery 动画图片向下扩展并显示整个图像（图像的大小为 185 x 380，但在悬停之前，您会看到它被裁剪为 185 x 185）但是当它展开时，它会将另一个`<li>`s 推到一边变得一团糟。

`<li>`如何在不推动任何周围元素的情况下扩展我的图像。

这是我的jQuery代码

```
<script type="text/javascript">
  $(document).ready(function(){
    $(".item").hover(function() {
      $(this).find('.image').stop().animate({height: "380px"}, 'slow');
      $(this).find('.product-info').fadeIn();
    },
    function() {
      $(this).find('.image').stop().animate({height: "185px"}, 'slow');
      $(this).find('.product-info').fadeOut();
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:58:55.967

我会设置 li 元素的宽度和高度，当你在其中设置 img 动画时，li 元素会保持原位。

```
#list li {
    width: 50px;
    height: 50px;
} 
```

有关完整示例，请参见小提琴：http: [//jsfiddle.net/rP4aU/](http://jsfiddle.net/rP4aU/)

# javascript - 如何将一个数组的值设置为另一个数组？

> ID：13710536
> 
> 赞同：0
> 
> 时间：2012-12-04T19:36:41.687
> 
> 标签：javascript, arrays, loops, equality

> **可能重复：**
> [在javascript中按值复制数组](https://stackoverflow.com/questions/7486085/copying-array-by-value-in-javascript)

我是 javascript 的初学者，所以我非常感谢任何帮助或建议。我正在尝试获取我使用输入数组收集的值（由用户在文档中放入表单）以将它们设置为单词数组。所以，我想等`inputs[0] = words[0]`。`inputs[1] = words[1]`我想通过将单词设置为一个空数组，然后等于输入的索引值，我可以实现这一点，但它不起作用。单词一直显示为“未定义”。

```
function goMad() { 
    var words = [];
    var inputs = document.getElementsByTagName("input"); 
    for (var i = 0; i < inputs.length - 1; i++) { 
        inputs[i].value = words;
    }

    var story = words[0] + "! he said " + words[1] + " as he jumped into his convertible " + words[2] + " and drove off with his " + words[3] + " wife.";
    document.getElementById("story").innerHTML = story;

    console.log(words[0]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:39:01.020

而不是这一行：

```
inputs[i].value = words; 
```

您可以使用：

```
words.push(inputs[i].value); 
```

这会将提供的值添加到`words`数组中。请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)。

正如**@pimvdb**和**@Shmiddty**所指出的，您也可以使用以下内容。这与使用的行为完全相同`push`：

```
words[i] = inputs[i].value; 
```

# linux - 在 Linux 中与 scilab 进行串行通信

> ID：13710539
> 
> 赞同：0
> 
> 时间：2012-12-04T19:36:59.577
> 
> 标签：linux, serial-port, communication, scilab

您能否提供一些在 Linux 中与 scilab 进行串行通信的示例。当我发出命令时：

```
h=openserial(1,"9600,n,8,1"); 
```

我收到以下错误：

```
-->h=openserial(1,"9600,n,8,1");
!--error 999 
TCL_EvalStr,  at line 1
bad option "-mode": should be one of -blocking, -buffering, -buffersize, -encoding, -eofchar, or -translation
while executing
"fconfigure file114 -mode 9600,n,8,1"
at line      27 of function openserial called by :  
h=openserial(1,"9600,n,8,1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:24:40.897

与例如 Arduino 设备的简单串行通信只需要指定为 openserial 中的第二个参数的波特率。似乎字符串参数（n？）中的其他变量搞砸了。

Scilab 5.4 示例，带有串行工具箱，用于 com 端口 3 和波特率 9600。尝试读取串行之前有 5 秒延迟。

```
h = openserial(3,"9600");
xpause(5000000);
data = readserial(h);
closeserial(h); 
```

连同您的 arduino 设备上的一些串行垃圾邮件代码，您应该在 Scilab 中每次运行时收到一串数据。

Arduino 设备上的串行示例代码：

```
int cc=0;

void setup(){
   Serial.begin(9600); 
}

void loop(){
  Serial.println(cc);
  if (cc<10){
  cc++;
  }
  else{
  cc=0;
  }
  delay(100);
} 
```

# wpf - 如何设置 WPF 控件的 PREFERRED 大小

> ID：13710540
> 
> 赞同：6
> 
> 时间：2012-12-04T19:37:01.840
> 
> 标签：wpf, datagrid

有没有办法设置 WPF 控件的**首选**大小而不设置其最大大小？

我通常将我的所有 WPF 控件设置为具有自动高度和宽度，并将对齐设置为拉伸。这在很多情况下都很有效。默认情况下，我的窗口大小合理。如果用户拉伸窗口，多余的空间会去我认为应该的地方。

当我将 DataGridTextColumn 的宽度设置为“*”时，这打破了。现在突然间，我的桌子的首选尺寸比我的屏幕大几倍！我的窗口的初始大小正是我的屏幕大小。

当然，我可以设置我的表（或我的列）的 MaxWidth，但我不想这样做。**最大**宽度在无穷大时很好 。

我尝试将 Width 属性更改为固定数量的像素。这似乎改变了**最大**宽度。即使我在表格中设置了 Horizo​​ntalContentAlignment="Stretch"，表格仍居中且宽度不会改变。

有没有解决的办法？我大部分时间都喜欢自动调整大小。而且我喜欢将列的宽度设置为“*”。有没有办法让它们一起工作？

好像有什么地方我找不到。在某些时候，容器必须询问我的桌子它想要什么尺寸。这个答案可能会被忽略或调整，但桌子必须回答这个问题。似乎我应该能够更改该值，而无需更改最大尺寸。（似乎如果我说“伸展”并且有额外的空间，我的桌子应该伸展。）

谢谢你。

# python - python中递归方法的AttributeError

> ID：13710546
> 
> 赞同：3
> 
> 时间：2012-12-04T19:37:45.683
> 
> 标签：python, exception, methods, recursion, attributeerror

我有一个python递归方法的问题，代码是这样的：

```
class NodeTree(object):
    def __init__(self, name, children):
        self.name = name
        self.children = children

    def count(self):
        # 1 + i children's nodes
        count = 1
        for c in self.children:
            count += c.count()
        return count

def create_tree(d):
    N = NodeTree(d['name'], d['children'])
    print N.count()

d1 = {'name':'musica', 'children':[{'name':'rock', 'children':[{'name':'origini','children':[]},
                                                               {'name':'rock&roll','children':[]},
                                                               {'name':'hard rock', 'children':[]}]},
                                   {'name':'jazz', 'children':[{'name':'origini', 'children':[{'name':'1900', 'children':[]}]},
                                                               {'name':'ragtime', 'children':[]}, {'name':'swing', 'children':[]}]}]}
tree = create_tree(d1) 
```

错误是这样的：

```
count += c.count()
AttributeError: 'dict' object has no attribute 'count' 
```

我尝试了任何方法，但它不起作用。

无论如何，有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:45:42.763

那是因为 Python 字典没有`count`方法。

如果我们逐行检查您的代码实际在做什么，将会有所帮助。

```
    定义计数（自我）：
        # 1 + i 个子节点
        计数 = 1
        for c in self.children: ## self.children 是一个字典列表，所以每个 c 都是一个字典
            count += c.count() ## 我们得到了 c 的 .count()——这是一个字典
        返回计数

```

这是因为我们将 d1['children'] 作为 self.children 传递，这是一个字典列表：`[<dict>, <dict>, <dict>, ... ]`。

而不是`count()`，您应该做的是调用`len`字典，以获取它拥有的键数，从而变为：

```
 for c in self.children:
        count += len(c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:23:14.100

好吧，这一次，该`create_tree`函数不会递归地构建树。因此，您只需在零级上添加一个节点，子节点只是字典。

下面的（修改过的）代码（虽然快速输入和草率）应该对树进行递归构建。没有检查您的`count`代码，但假设它是正确的，它应该可以工作。

```
class NodeTree(object):
    def __init__(self, name, children):
        self.name = name
        self.children = children

    def count(self):
        # 1 + i children's nodes
        count = 1
        for c in self.children:
            count += c.count()
        return count

def deep_create_tree(d):
    if len(d["children"]) > 0:
        chlds = []
        for i in d["children"]:
            chlds.append(deep_create_tree(i))
    else:
        chlds = []
    n = NodeTree(d["name"], chlds)
    return n

d1 = {'name':'musica', 'children':[{'name':'rock', 'children':[{'name':'origini','children':[]},{'name':'rock&roll','children':[]},{'name':'hard rock', 'children':[]}]},{'name':'jazz', 'children':[{'name':'origini', 'children':[{'name':'1900', 'children':[]}]},{'name':'ragtime', 'children':[]}, {'name':'swing', 'children':[]}]}]}

def scan_tree(tr):
    print tr.name, tr.count()
    for i in tr.children:
        scan_tree(i)

tr = deep_create_tree(d1)
scan_tree(tr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:07:28.347

The best (and the only desirable) way is to have a recursive creation of your node tree. This can be done in two different ways, either make your `NodeTree.__init__()` recursively init all of the children (which again recursively init all of their children, etc) or you can make your `create_tree()` function recursive.

I'd personally use recursive `__init__()`, but it's your call.

* * *

Recursive `__init__()` for creating tree structure:

```
def __init__(self, name, children=[]):
    self.name = name
    self.children = []
    for c in children:
        self.children.append(
            self.__class__(c['name'], c['children'])) 
```

This way `self.children` will contain other `NodeTree`s instead of `dict`s. Also you no longer need to declare empty children list, instead of:

```
d2 = {'name':'sterile', 'children':[]} 
```

do

```
d2 = {'name':'sterile'} 
```

And the initializer will automatically set children to `[]`

* * *

If you want to use a recursive `create_tree()` function, it's also possible, and not a bad idea either. However you will still have to edit the `__init__()` -method, it no longer takes children as parameter. Or as I did here, it does, but you hardly ever use it.

```
# NodeTree
def __init__(self, name, children=None):
    self.name = name
    if children:
        self.children = children

def create_tree(d):
    N = NodeTree(d['name'])
    for c in d['children']:
        N.children.append(create_tree(c))
    return N 
```

This will have basically the same results.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:43:29.273

`d['children']`是 a `list of dict`，正如您在`d1`dict 中看到的那样。

现在，当您迭代您的`children`, in 时`NodeTree`，这基本上是`d['children']`唯一的，您将获得`dictionary`每个元素：-

```
for c in self.children:  // c is a `dict` type here
    count += c.count()   // there is not attribute as `count` for a `dict`. 
```

因此你得到了那个错误。

# excel - 如何在excel中将点固定为小数点分隔符

> ID：13710548
> 
> 赞同：0
> 
> 时间：2012-12-04T19:37:47.180
> 
> 标签：excel, vba

有一个小问题，但我无法解决。也许有人可以帮助我。很受好评。
我的小数分隔符的区域设置是“。” （点）。
我有一个 excel 文件，其中包含一些列中的小数位。在更新 excel 模板中的数据时，我关闭了用户系统设置，然后应用 DOT 作为分隔符。在将其转换为文本文件时，它显示逗号“，”作为小数分隔符。我正在使用以下代码关闭用户设置

> 使用应用程序
> StrDecimal = .DecimalSeparator
> StrThousand = .ThousandsSeparator

```
.DecimalSeparator = "."  
.ThousandsSeparator = "'" 
.UseSystemSeparators = False  
End With 
```

需要检查小数分隔符是否不等于“。” 那么我们需要强制使用“。” aS 小数分隔符。

请帮助如何通过使用 VBA 或使用 Datavalidation 来实现这一点
非常感谢您提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:53:33.673

因此，您已经获得了数据并将其写入文本文件。假设您的数据在一个数组中，我将遍历数组并在将数据转换为字符串后转换数据，就像这样。

```
Sub ChangeDecimalSeperator()
    Dim vData As Variant, ii As Integer, jj As Integer

    vData = ActiveSheet.Range("A1:B2")
    For ii = LBound(vData, 1) To UBound(vData, 1)
        For jj = LBound(vData) To UBound(vData, 2)
            'Only convert if it's a number
            If VBA.IsNumeric(vData(ii, jj)) Then
                'You can also specify the format using VBA.Format$() here, ie force the decimal places
                vData(ii, jj) = ReplaceCharacter(VBA.CStr(vData(ii, jj)), ".", ",")
            End If
        Next jj
    Next ii

    'Now output vData to your textfile

End Sub

Function ReplaceCharacter(sForString As String, sReplacingCharacter As String, sWithCharacter As String) As String
    Dim sStringPrevious As String

    'While there is a character that we still need replacing left, keep going. If we can't find one, we're done
    Do
        sStringPrevious = sForString
        sForString = VBA.Replace(sForString, sReplacingCharacter, sWithCharacter)
    Loop Until sStringPrevious = sForString

    ReplaceCharacter = sForString
End Function 
```

# visual-studio-2008 - 是否可以在 CMFCToolbar 中的 CMFCToolBarComboBoxButton 上添加自定义工具提示？

> ID：13710551
> 
> 赞同：1
> 
> 时间：2012-12-04T19:37:50.190
> 
> 标签：visual-studio-2008, mfc, tooltip, mfc-feature-pack

是否可以在 CMFCToolbar 的 CMFCToolBarComboBoxButton 上添加自定义工具提示？

我现在可以使用资源文件中定义的“默认”工具提示文本，但我找不到能够动态更改工具栏中组合框上的工具提示文本的方法。

资源 ：

```
IDR_TOOLBAR1 TOOLBAR 16, 15
BEGIN
  BUTTON      ID_BUTTON32771
  BUTTON      ID_BUTTON32772
  BUTTON      ID_BUTTON32773
END

STRINGTABLE
BEGIN
  ID_BUTTON32771 "Button 1\nButton 1"
  ID_BUTTON32772 "Button 2\nButton 2"
  ID_BUTTON32773 "Button 3\nButton 3"
END 
```

工具栏创建正常，显示良好；我用 OnToolbarReset 中的 CMFCToolBarComboBoxButtoncsCombo “替换”按钮（ AFX_WM_RESETTOOLBAR 的处理程序）

```
LRESULT CMainFrame::OnToolbarReset(WPARAM wp,LPARAM)
{
  UINT uiToolBarId = (UINT) wp;
  if (uiToolBarId == IDR_TOOLBAR1 )
  {
    CMFCToolBarComboBoxButtoncsCombo(ID_BUTTON32772, GetCmdMgr()->GetCmdImage(ID_BUTTON32772, FALSE), CBS_DROPDOWNLIST);

    m_MyToolbar.ReplaceButton(ID_BUTTON32772, csCombo);
    m_MyToolbar.AddItem( _T("un") );
    m_MyToolbar.AddItem( _T("deux") );
    m_MyToolbar.AddItem( _T("trois") );

  }

  return 0;
} 
```

这工作正常，按钮被组合框替换，并显示默认的工具提示文本。

现在，我希望能够动态更改工具提示文本。

我试图在主框架（甚至在我的派生工具栏类）中处理 TTN_NEEDTEXT（以及 TTN_NEEDTEXTA 和 TTN_NEEDTEXTW），但工具栏没有调用它。

我尝试派生自己的 CMFCToolBarComboBoxButton 类并覆盖我可以找到的 2 个虚拟方法，它们应该符合我的预期：

```
class MyComboBox : public CMFCToolBarComboBoxButton
{
public:
  MyComboBox ();
  MyComboBox (UINT uiID, int iImage, DWORD dwStyle = CBS_DROPDOWNLIST, int iWidth = 0);

  virtual BOOL OnGetCustomToolTipText(CString& );
  virtual BOOL OnUpdateToolTip(CWnd* , int , CToolTipCtrl& , CString& );

  virtual ~MyComboBox ();
  DECLARE_SERIAL(MyComboBox )

}; 
```

和

```
IMPLEMENT_SERIAL(MyComboBox , CMFCToolBarComboBoxButton,0)

MyComboBox ::MyComboBox (UINT uiID, int iImage, DWORD dwStyle , int iWidth  ) : CMFCToolBarComboBoxButton(uiID, iImage,dwStyle, iWidth )
{

}

MyComboBox ::MyComboBox ()
{

}

MyComboBox ::~MyComboBox ()
{
}

BOOL MyComboBox ::OnGetCustomToolTipText(CString& strToolTip) 
{ 
    strToolTip = "bonjour";
    return TRUE;
}

BOOL MyComboBox ::OnUpdateToolTip(CWnd* /*pWndParent*/, int /*iButtonIndex*/, CToolTipCtrl& /*wndToolTip*/, CString& str) 
{ 
  str = "allo";
  return TRUE; 
} 
```

永远不会调用 2 个虚拟方法；好吧，它们在打开应用程序和关闭应用程序时被调用；但当用户将鼠标移动/悬停在工具栏中的组合框顶部时，应用程序正常运行时永远不会。

我尝试查看工具提示管理器（CTooltipManager）并通过调用或不调用 InitTooltipManager 来启用或不启用工具提示管理器。

（我很快用 VS2012 尝试了这个，我得到了相同的“不工作”结果）。

我是否缺少一些步骤才能做到这一点？

谢谢。

最大限度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-14T10:21:44.180

任何在这里寻找答案的人我都是这样做的。制作了一个扩展类 CMFCToolBarEx 并编写了如下函数

```
 BOOL CMFCToolBarEx::OnNeedTipText(UINT /*id*/, NMHDR* pNMH, LRESULT* /*pResult*/)
{
    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMH;
    CString strTip = _T("");

    CPoint point;
    ::GetCursorPos(&point);
    ScreenToClient(&point);
    INT_PTR nHit = ((CMFCToolBar*)this)->HitTest(point);

    if(nHit == -1)
        return FALSE;

    CMFCToolBarButton* pButton = GetButton((int)nHit);
    strTip = pButton->m_strText;
    _tcscpy(pTTT->lpszText , strTip.GetBuffer(0));

    return TRUE;
} 
```

和消息图`ON_NOTIFY_EX_RANGE(TTN_NEEDTEXT, 0, 0xFFFF, &CMFCToolBarEx::OnNeedTipText)`

这是您自己添加按钮而不是通过 InsertButton 函数添加资源的时候。它对我来说很好，除了没有显示描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-18T07:59:17.117

```
virtual BOOL GetToolbarButtonToolTipText(CMFCToolBarButton*/*pButton*/, CString&/*strTTText*/);
virtual void GetMessageString(UINT nID, CString& rMessage) const; 
```

是为 CMFCToolBar 和 CMFCToolBarButton 做的方法

编辑：您需要在 MainFrame 中覆盖 GetMessageString。对于每个 id 你给出一个描述：

```
void CMainFrame::GetMessageString(UINT nID, CString& rMessage) const 
{
    switch (nID)
    {
        case 1:
        rMessage = "Hello World";
        break;
    }
} 
```

它显示 id 为 1 的按钮的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-14T12:49:13.200

如果我了解您的问题，我相信您可以从 CMFCToolBar 派生并覆盖

```
virtual BOOL OnUserToolTip(CMFCToolBarButton* pButton, CString& strTTText) const 
```

按需控制工具提示。

# c++ - 函数返回错误值

> ID：13710553
> 
> 赞同：1
> 
> 时间：2012-12-04T19:37:57.633
> 
> 标签：c++, string, function, recursion, return

这是一个使用递归将字符串转换为 int
的程序 当它应该输出 1234 时，代码总是输出 17
，当我向该数字添加一个数字时，它会向该输出添加 1，
例如，如果它应该输出 12345 它输出 18

```
#include <cstdlib>
#include <iostream>

using namespace std;

int convertToInteger(string numberStr)
{
    if (numberStr.size()==0)  return result;
    convertToInteger (numberStr);
}

int main(int argc, char *argv[])
{
    string numberStr("1234");
    cout << numberInt << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:40:54.480

你错过了一个`return`before `convertToInt (numberStr)`;

# visual-studio-2008 - 如何在没有 Nuget 的情况下安装 ServiceStack？

> ID：13710558
> 
> 赞同：4
> 
> 时间：2012-12-04T19:38:06.850
> 
> 标签：visual-studio-2008, nuget, servicestack

我有 Visual Studio 2008，我想尝试使用 ServiceStack 来制作 REST Web API。问题是，Nuget 一般不能安装在 VS2008 上。我有一个带有 ServiceStack 二进制文件的 zip，但我完全迷路了——我只是不知道把它们放在哪里以及我可能还需要做什么。我是 ServiceStack 的新手，5 年多没接触过 VS。在我研究 ServiceStack 之前，我不知道 Nuget。

或者，ServiceStack 是否适用于我可以使用 Nuget 安装的 Visual Studio Express 版本？我读过 Express 不支持扩展，所以我猜不。让我知道我是否错了。

或者，如何让 Nuget 在 VS2008 上运行？我找到了一个谈论它的网页，但它的说明掩盖了一些我一定不知道的关键步骤。我敢肯定，如果我了解这一切是如何运作的，那一切都会有意义，但我现在不明白。我是新手，需要所有相关的细节。

或者......好吧，还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:02:16.257

通常，我们还会在 ServiceStack 项目[/downloads](https://github.com/ServiceStack/ServiceStack/downloads)中发布已部署的构建。目前最新版本是**v3.9.28**，这是 NuGet 上的版本。

ServiceStack 上的**/downloads**包含大部分项目 .dll，但没有特定的提供程序，例如用于替代 RDBMS 的 OrmLite 提供程序。

对于这些，获取它们的最佳位置是部署在 NuGet 上的 NuGet zip 包。即要在 OSX/Linux 中获取 OrmLite MySQL 提供程序（或使用 Windows 的 gnu 工具），您可以这样做：

```
wget -O ServiceStack.OrmLite.MySql.zip \
  http://packages.nuget.org/api/v1/package/ServiceStack.OrmLite.MySql/3.9.28

unzip ServiceStack.OrmLite.MySql.zip 'lib/*' 
```

这将解压缩本地`lib/`文件夹中的dll。

# infragistics - Infragistics UltraDockManager：将窗格重置回原始位置/停靠状态

> ID：13710559
> 
> 赞同：0
> 
> 时间：2012-12-04T19:38:11.970
> 
> 标签：infragistics

我们要求允许用户自定义（定位/调整大小）他们认为合适的窗格。我们还要求用户能够将窗格重置回原始（首次运行）状态。我在 ultradockmanager 中看不到任何允许您重置为原始状态的内容。有什么建议吗？

（使用 NetAdvantage 12.2 Win CLR4x）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:08:16.703

我不确定这是否可以帮助你，但我把这里作为答案。
如果这不能解决您的问题，请告诉我。

UltraDockManager 有两个方法调用`LoadFromXml`，`SaveAsXml`保存和加载控件的布局。

您可以在表单启动时使用 SaveAsXml 将初始布局保存在某处，并在需要时调用 LoadFromXml 以将布局重置为初始状态。

因此，例如，保存您的布局

```
string userDataFolder=Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
string fileToSave=Path.Combine(userDataFolder, "MyAppDataFolder", "currentLayout.xml");
ultraDockManager1.SaveAsXML(fileToSave); 
```

并用于重置布局

```
string userDataFolder=Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
string fileToLoad=Path.Combine(userDataFolder, "MyAppDataFolder", "currentLayout.xml");
ultraDockManager1.LoadFromXML(fileToLoad); 
```

当然，我想您在`ApplicationData`为当前用户存储应用程序特定数据的文件夹中有一个应用程序文件夹（MyAppDataFolder）。

# javascript - Javascript 时钟与原子钟同步

> ID：13710561
> 
> 赞同：0
> 
> 时间：2012-12-04T19:38:14.897
> 
> 标签：javascript, clock

> **可能重复：**
> [将客户端 javascript 时钟与服务器日期同步的最佳方法](https://stackoverflow.com/questions/1638337/the-best-way-to-synchronize-client-side-javascript-clock-with-server-date)

我想制作与外部服务器同步的javascript时钟 - 与原子时钟服务器。怎么做？

# java - 如何在java中显示二维表

> ID：13710562
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:38:13.680
> 
> 标签：java

我尝试显示一个二维表，但由于某种原因我不能，我看不出我写错了什么。

这是我的代码（我在 vim 中工作）：

```
 int [][] tab = new int [5][5];

            for (int i= 0; i<tab.length ; i++){
                    for (int j =0; j<tab[i].length; j++){
                            tab[j][i]=i;
                            System.out.println("" + tab[j][i]);
                    }
                    System.out.println("");
            }
    } 
```

这段代码的结果是：

0

0

0

0

1

1

1

1

2

2

2

2

3

3

3

3

4

4

4

4

而且我要：

0 0 0 0

1 1 1 1

2 2 2 2

3 3 3 3

4 4 4 4

有人可以帮我弄这个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:39:18.070

在内部循环中，替换： -

```
System.out.println("" + tab[j][i]); 
```

和： -

```
System.out.print(" " + tab[j][i]); 
```

因为您想继续在同一行打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:55:18.520

问题是`System.out.println("" + tab[j][i]);`

在输出中打印一整行，如果您更改

`System.out.println("" + tab[j][i]);`

和

`System.out.print(tab[j][i] + " ");`

添加一个空格，您将在该行中打印字符串，但它不会中断并从新行开始。试试@Rohit Jain 的帖子，这是一个正确的解决方案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:56:32.720

您需要更改代码

```
int [][] tab = new int [5][5];
for (int i= 0; i<tab.length ; i++){
    for (int j =0; j<tab[i].length; j++){
        tab[i][j]=i;
        System.out.print( tab[i][j]+" ");
    }
    System.out.println("");
} 
```

导致您的外部循环为每一行运行，内部循环为每一列运行。所以你必须使用 tab[i][j]（约定是 tab[row][col]）来使代码没有错误。在你的情况下，你有相等的行和列。但是当它们不同时可能会出现问题。

# java - 在pop3中重复消息

> ID：13710563
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:38:23.810
> 
> 标签：java, sockets, pop3

当我做我的实验室项目（“pop3 邮件客户端”）时，我在服务器回答中发现了一些神秘的东西——消息重复了两次，例如：

```
S: Subject: Test 1
S: From: *** *** <***@gmail.com>
S: To: ***@mail.ru
S: Content-Type: multipart/alternative; boundary=***
S: X-Spam: Not detected
S: X-Mras: Ok
S: X-Mru-Authenticated-Sender: ***@gmail.com
S: 
S: --04***********************49
S: Content-Type: text/plain; charset=ISO-8859-1
S: 
S: Hello
S: 
S: --04***********************49
S: Content-Type: text/html; charset=ISO-8859-1
S: 
S: Hello
S: 
S: --047d7b10c7979b168d04d00bd749--
S: 
S: . 
```

这是正常的吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:03:23.567

这很正常。注意消息的类型：`multipart/alternative`。

`multipart/alternative`MIME 类型包含多个正文，每个正文通常是其他格式的消息正文。在这种情况下，发件人的邮件客户端包括邮件正文的 HTML 和纯文本版本。接收者将选择最合适的格式并显示该版本的消息。

# php - AES_DECRYPT 返回“数组”而不是解密数据

> ID：13710565
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:38:32.093
> 
> 标签：php, mysqli, aes, encryption

我正在尝试在 MySQL 中使用 AES_DECRYPT 来解密成功加密的 SSN。在输出中，我得到了“数组”这个词，而不是来自该字段的实际数据。我的 PHP 和 MySQL 知识有点生疏，所以我确信这是我忽略的一些愚蠢的事情。任何帮助，将不胜感激。

输出：
verify_name other_names ssn dob
：测试：测试：数组：测试

代码：
`$key="88b871WZ3SntWK67rN3l2J1SvMqsOjyk";
$SQLstring = "SELECT * FROM applications";
$QueryResult = @mysql_query($SQLstring, $conn) or die("Query Problem - "
. mysql_error($conn) . " - Error Number - "
. mysql_errno($conn));
echo "verify_name other_names ssn dob";

$num_result = mysql_num_rows($QueryResult);
for ($i = 0; $i < $num_result; $i++)

{
$row = mysql_fetch_array($QueryResult);
$SQLstring2 = "SELECT AES_DECRYPT(ssn,'$key') FROM applications WHERE name='" . $row["name"] . "'";
$QueryResult2 = @mysql_query($SQLstring2, $conn) or die("Query Problem - "
. mysql_error($conn) . " - Error Number - " . mysql_errno($conn));
$num_result2 = mysql_num_rows($QueryResult2);
for ($j = 0; $j < $num_result; $j++){
$ssndecrypt = mysql_fetch_array($QueryResult2);

echo $ssndecrypt[0];
} echo $row["verify_name"];
echo $row["other_names"];
echo $ssndecrypt;
echo $row["dob"];` 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:40:57.903

这是因为您将结果作为数组获取。

```
$ssndecrypt = mysql_fetch_array($QueryResult2);
...
echo $ssndecrypt; 
```

它正在回响`Array`，因为您从不重新分配`$ssndecrypt`变量。

然而，问题的核心似乎是您不必要地使查询复杂化。当您可以这样做时，没有理由两次查询表：

```
SELECT verify_name,
       other_names,
       dob,
       AES_DECRYPT(ssn,'$key') AS ssn
  FROM applications 
```

这大大简化了代码：

```
$stmt = "SELECT verify_name, other_names, dob, AES_DECRYPT(ssn,'$key') AS ssn FROM applications";
$result = @mysql_query($stmt, $conn) or die("Query Problem - " . mysql_error($conn) . " - Error Number - " . mysql_errno($conn));
echo "verify_name other_names ssn dob";
while ($row = mysql_fetch_assoc($result))
{
    echo $row["verify_name"];
    echo $row["other_names"];
    echo $row["ssn"];
    echo $row["dob"];
} 
```

* * *

但是，理想情况下，您应该使用[PDO](http://php.net/manual/book.pdo.php)而不是`mysql_*`函数：

```
try {
    $dbh = new PDO('mysql:host=localhost;dbname=mydb', $user, $pass);
    foreach($dbh->query("SELECT verify_name, other_names, dob, AES_DECRYPT(ssn,'$key') AS ssn FROM applications") as $row) {
        echo $row["verify_name"];
        echo $row["other_names"];
        echo $row["ssn"];
        echo $row["dob"];
    }
    $dbh = null;
} catch (PDOException $e) { die("ERROR: " . $e->getMessage()); } 
```

# java - 基于wireshark网络sniifer分析java.io.IOException

> ID：13710567
> 
> 赞同：0
> 
> 时间：2012-12-04T19:38:46.803
> 
> 标签：java, tcp, wireshark

我有一个客户正在获得

```
java.io.IOException: End of message stream 
```

当连接抛出异常时，客户端wireshark 提交了以下消息，这些消息均以灰色突出显示。

高亮表示：**tcp.flags & 0x02 || tcp.flags.fin == 1**

```
297 2012-11-30 14:36:49.926004309   10.17.31.1  192.175.217.57  TCP 64  synchronet-db > zymed-zpp [FIN, ACK] Seq=5476 Ack=5648 Win=64688 Len=0

301 2012-11-30 14:36:57.932469330   192.175.217.57  10.17.31.1  TCP 66  pda-gate > synchronet-db [SYN] Seq=0 Win=65535 Len=0 MSS=1380 SACK_PERM=1
302 2012-11-30 14:36:57.932663669   10.17.31.1  192.175.217.57  TCP 66  synchronet-db > pda-gate [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1460 SACK_PERM=1
305 2012-11-30 14:36:58.277517580   10.17.31.1  192.175.217.57  TCP 64  synchronet-db > pda-gate [FIN, ACK] Seq=1 Ack=88 Win=64860 Len=0

309 2012-11-30 14:37:08.276802200   192.175.217.57  10.17.31.1  TCP 66  esnm-zoning > synchronet-db [SYN] Seq=0 Win=65535 Len=0 MSS=1380 SACK_PERM=1
310 2012-11-30 14:37:08.276975480   10.17.31.1  192.175.217.57  TCP 66  synchronet-db > esnm-zoning [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1460 SACK_PERM=1
313 2012-11-30 14:37:08.594186629   10.17.31.1  192.175.217.57  TCP 64  synchronet-db > esnm-zoning [FIN, ACK] Seq=1 Ack=88 Win=64860 Len=0
315 2012-11-30 14:37:08.594592509   192.175.217.57  10.17.31.1  TCP 64  esnm-zoning > synchronet-db [FIN, ACK] Seq=88 Ack=2 Win=65535 Len=0

317 2012-11-30 14:37:18.588553260   192.175.217.57  10.17.31.1  TCP 66  nirp > synchronet-db [SYN] Seq=0 Win=65535 Len=0 MSS=1380 SACK_PERM=1
318 2012-11-30 14:37:18.588744940   10.17.31.1  192.175.217.57  TCP 66  synchronet-db > nirp [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1460 SACK_PERM=1
321 2012-11-30 14:37:18.906341549   10.17.31.1  192.175.217.57  TCP 64  synchronet-db > nirp [FIN, ACK] Seq=1 Ack=88 Win=64860 Len=0
323 2012-11-30 14:37:18.906758749   192.175.217.57  10.17.31.1  TCP 64  nirp > synchronet-db [FIN, ACK] Seq=88 Ack=2 Win=65535 Len=0 
```

知道什么可能导致异常吗？这只是网络问题还是应用程序的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:59:37.603

引发异常的类期望的数据多于 FIN 到达时收到的数据。这不是网络问题，而是应用协议问题。

# jquery - jquery mobile 1.2.0 中的可折叠 div 的样式未更新

> ID：13710572
> 
> 赞同：0
> 
> 时间：2012-12-04T19:39:05.667
> 
> 标签：jquery, jquery-mobile

可折叠 div 的样式未更新。我正在使用最新的 jquery-mobile 1.2.0 版本。我的代码如下。请就缺少的内容提出建议

HTML

```
<div data-role="page" id="eventDetails">
<div data-role="content">
<div data-role="collapsible-set" class="collapsibleSetClass">
    <div data-role="collapsible" data-content-theme="b" class="collapsibleClass">
    </div>
</div>

</div><!-- /content -->
</div> 
```

使用的javascript：

```
 $(document).bind("mobileinit", function(){
        $.mobile.changePage.defaults.changeHash = false;
        $.mobile.collapsibleset.prototype.options.initSelector = ".collpasibleSetClass";
        initEvents();
    });

var initEvents = function(){
 $.mobile.changePage( "#eventDetails", { transition: "slide"} );
 var $description = $('.collapsibleClass');
 $description.html('');
 var $title = $('<h3/>').append(eventObj.eventTitle);
 var $eventDetails = $('<p/>').append(eventObj.eventDescription);
 $description.append($title).append($eventDetails);
 $('.collapsibleSetClass').collapsibleset("refresh");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:32:07.347

您正在尝试刷新尚未初始化的小部件。您调用事件处理程序，该处理程序在初始化任何内容之前触发`initEvents()`。`mobileinit`

所以很可能你真正需要做的就是删除刷新可折叠小部件的行，jQuery Mobile 将自动初始化它们：

```
var initEvents = function(){
 $.mobile.changePage( "#eventDetails", { transition: "slide"} );
 var $description = $('.collapsibleClass');
 $description.html('');
 var $title = $('<h3/>').append(eventObj.eventTitle);
 var $eventDetails = $('<p/>').append(eventObj.eventDescription);
 $description.append($title).append($eventDetails);
 //$('.collapsibleSetClass').collapsibleset("refresh");
} 
```

另请注意，您必须在页面的 HTML 之后包含所有 JS，否则您选择的 HTML 元素将不可用。我建议使用`pageinit`第一页而不是`mobileinit`因为这个原因。

# css - 如何在悬停时向图像添加渐变（黑色到灰色/上下）？

> ID：13710573
> 
> 赞同：0
> 
> 时间：2012-12-04T19:39:07.540
> 
> 标签：css

与此接近，但由于某种原因它失去了渐变。我认为这与 z-index 有关，但不确定。当我放置一个找不到的图像文件时，当您将鼠标悬停时，您会看到渐变。

```
<style>
.border_overlay:hover {

/* Image Dimensions */
width:160px;
height:160px;

/* Moves overlay over Image */
position:relative;
z-index:1;
margin-bottom:-160px;

/* SVG fallback(Opera 11.10-, IE9) */
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDAsMCwwLDEpOyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYmEoMTI4LDEyOCwxMjgsMSk7IiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IGZpbGw9InVybCgjZ3JhZGllbnQpIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIiAvPjwvc3ZnPg==);

/* Opera 11.10+ */
background: -o-linear-gradient(top, rgba(0,0,0,1), rgba(128,128,128,1));

/* Firefox 3.6+ */
background: -moz-linear-gradient(top, rgba(0,0,0,1), rgba(128,128,128,1));

/* Chrome 7+ & Safari 5.03+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0, rgba(0,0,0,1)), color-stop(1, rgba(128,128,128,1)));

/* IE5.5 - IE7 */
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#FF000000,EndColorStr=#FF808080);

/* IE8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#FF000000,EndColorStr=#FF808080)"

/* Border width and color */
    border:1px solid black;

/* Border Opacity */
opacity:0.3;
.filter:alpha(opacity=30);
-ms-filter: 'alpha (opacity=30)';
}

</style>

<img class="border_overlay" src="https://www.google.com/images/srpr/logo3w.png" width=160 height=160 alt="Image"> 
```

# applet - 如何使用 JDeveloper 部署小程序？

> ID：13710578
> 
> 赞同：0
> 
> 时间：2012-12-04T19:39:20.673
> 
> 标签：applet, weblogic, jdeveloper

我有一个在 JDeveloper 11g R1 中创建的简单小程序，部署到 Weblogic 服务器 10.3。此小程序具有 ojdbc6.jar 的依赖项。我正在部署为战争文件。

当我部署并浏览到小程序加载的 html 页面时，但出现以下异常：

```
java.lang.NoClassDefFoundError: oracle/jdbc/pool/OracleDataSource 
```

当我展开 .war 文件时，我可以在 WEB-INF/lib 文件夹中看到 ojdbc6.jar。

小程序页面的HTML如下：

```
<HTML>
<HEAD>
<TITLE>
Title
</TITLE>
</HEAD>
<BODY>
<APPLET CODE="com.test.Applet" ARCHIVE="ojdbc6.jar" HEIGHT="800" WIDTH="625" ALIGN="bottom">This browser does not support Applets.</APPLET>
</BODY>
</HTML> 
```

有没有办法让 JDeveloper 进行部署，以便服务器实际上可以访问我的依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:14:53.797

如果您使用的是小程序，则 JDBC jar 需要包含在小程序 JAR 中，而不是 Web 项目 WAR 中。

# user-interface - jRadioButton 的 isSelected 方法不起作用

> ID：13710581
> 
> 赞同：0
> 
> 时间：2012-12-04T19:39:50.080
> 
> 标签：user-interface, jradiobutton

我的单选按钮的 isSelected 方法不起作用，即使我在运行程序时选择它们，我是 java gui 编码的新手，所以请据此解释，我正在发布整个 gui 的类代码。我正在使用 eclipse秋千设计师

```
 public class gui {

private JFrame frame;
private final ButtonGroup buttonGroup = new ButtonGroup();

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                gui window = new gui();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 * @throws FileNotFoundException 
 */
public gui() throws FileNotFoundException {
    initialize();
}

/**
 * Initialize the contents of the frame.
 * @throws FileNotFoundException 
 */
private void initialize() throws FileNotFoundException {
    FileReader reader=new FileReader("C:\\Users\\kkj\\workspace\\javaproject\\src\\Database.txt");
    Scanner in=new Scanner(reader);
    BList Restaurant=new BList();
    BList ATM=new BList();
    BList Hospital=new BList();
    BList Hotels=new BList();
    BList Petrol=new BList();
    final Llist locations=new Llist();
    System.out.println("Loading");

    while(in.hasNextLine())

    {
        BNode bnode=new BNode();
        bnode.name=in.nextLine();
        //System.out.println(bnode.name);
        String type=in.nextLine();
        bnode.loc=in.nextLine();
        if(type.equals("Restaurant"))
        {
            Restaurant.insert(bnode);

        }
        if(type.equals("ATM"))
        {
            ATM.insert(bnode);

        }
        if(type.equals("Hospital"))
        {
            Hospital.insert(bnode);

        }
        if(type.equals("Hotels"))
        {
            Hotels.insert(bnode);

        }
        if(type.equals("Petrol"))
        {
            Petrol.insert(bnode);

        }

    }
    FileReader reader2=new FileReader("C:\\Users\\kkj\\workspace\\javaproject\\src\\locations.txt");
    Scanner inL=new Scanner(reader2);
    int s=0;

    while(inL.hasNextLine())
    {
        LNode loc=new LNode();
        loc.Name=inL.nextLine();
        loc.dist=s++;
        BNode temp;
        temp=Restaurant.head;
        while(temp.next!=null)
            {   if(temp.loc.equals(loc.Name))
                {loc.rest=temp;break;}
                temp=temp.next;
            }

        temp=Hospital.head;
        while(temp.next!=null)
        {   if(temp.loc.equals(loc.Name))
            {loc.Hospital=temp;break;}
            temp=temp.next;
        }

        temp=Hotels.head;
        while(temp.next!=null)
        {   if(temp.loc.equals(loc.Name))
            {loc.Hotels=temp;break;}
            temp=temp.next;
        }
        //loc.hotels=temp;
        temp=ATM.head;
        while(temp.next!=null)
        {   if(temp.loc.equals(loc.Name))
            {loc.ATM=temp;break;}
            temp=temp.next;
        }

        locations.insert(loc);
    }

    System.out.println("Loaded");
    System.out.println(">>>>>>>>>>>Restaurants<<<<<<<<<<<<");
    Restaurant.disp();
    System.out.println(">>>>>>>>>>>Hotels<<<<<<<<<<<<");
    Hotels.disp();
    System.out.println(">>>>>>>>>>>Hospital<<<<<<<<<<<<");
    Hospital.disp();
    System.out.println(">>>>>>>>>>>ATM's<<<<<<<<<<<<");
    ATM.disp();
    System.out.println(">>>>>>>>>>>Locations<<<<<<<<<<<<");
    locations.disp();

    final String curr="Bsk";
    String locin;
    final String typein="Hospital";
    frame = new JFrame();
    frame.setBounds(100, 100, 450, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    JRadioButton rdbtnBsk = new JRadioButton("Bsk");
    buttonGroup.add(rdbtnBsk);
    rdbtnBsk.setBounds(26, 35, 109, 23);
    frame.getContentPane().add(rdbtnBsk);

    JRadioButton rdbtnKoramangala = new JRadioButton("Koramangala");
    buttonGroup.add(rdbtnKoramangala);
    rdbtnKoramangala.setBounds(26, 72, 109, 23);
    frame.getContentPane().add(rdbtnKoramangala);

    JRadioButton rdbtnMgRoad = new JRadioButton("MG Road");
    buttonGroup.add(rdbtnMgRoad);
    rdbtnMgRoad.setBounds(26, 125, 109, 23);
    frame.getContentPane().add(rdbtnMgRoad);
    if(rdbtnBsk.isSelected())
        {
            locin="Bsk";
        }
    if(rdbtnKoramangala.isSelected())
    {
        locin="Koramangala";
    }
    if(rdbtnMgRoad.isSelected())
    {
        locin="MG Road";
    }
    else System.exit(2);
    final String locinn=locin;

    JButton btnOutput = new JButton("output");
    btnOutput.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) 
        {
            Output out1=new Output();
            System.out.println(">>>>>>>>>>>"+typein+" in "+locinn+"<<<<<<<<<<<<");
            out1.display(locations, locinn, typein,curr);
        }
    });
    btnOutput.setBounds(182, 193, 89, 23);
    frame.getContentPane().add(btnOutput);

        }
private class SwingAction extends AbstractAction {
    public SwingAction() {
        putValue(NAME, "SwingAction");
        putValue(SHORT_DESCRIPTION, "Some short description");
    }
    public void actionPerformed(ActionEvent e) {
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T02:41:57.487

我也是 Java 编程的新手，但这可能有用，它对我有用。

将整个 if/else 块放在“输出”按钮的 actionPerformed() 方法中，如下所示：

```
JButton btnOutput = new JButton("output");
btnOutput.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) 
    {  if(rdbtnBsk.isSelected())
       {
         locin="Bsk";
       }
       else if(rdbtnKoramangala.isSelected())
       {
         locin="Koramangala";
       }
       else if(rdbtnMgRoad.isSelected())
       {
         locin="MG Road";
       }

       final String locinn=locin;
       Output out1=new Output();
       System.out.println(">>>>>>>>>>>"+typein+" in "+locinn+"<<<<<<<<<<<<");
       out1.display(locations, locinn, typein,curr);
    }
});
btnOutput.setBounds(182, 193, 89, 23);
frame.getContentPane().add(btnOutput);

    } 
```

# android - 显示资产图像并将其存储在 SD 卡中的方法

> ID：13710583
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:00.367
> 
> 标签：android, webview, imageview

我正在创建一个壁纸应用程序，因此我将一些图像放在资产文件夹中。我需要在按钮单击时一张一张地显示此图像并将其存储在 SD 卡中。
**我做了什么**：我使用 ImageView 和 WebView 来显示图像。首先，当我使用 WebView 时，我坚持设置图像大小，因为它显示得太小，我需要根据设备窗口大小显示这些图像。
我使用以下代码，但没有帮助调整屏幕上的图像

```
myWebView.loadUrl("file:///android_asset/image.html");
    WebSettings settings = myWebView.getSettings();
    settings.setUseWideViewPort(true);
    settings.setLoadWithOverviewMode(true); 
```

我也设置`<src img="someimage.jpg" width=""100%">`了，但对我没有帮助。

然后我使用 ImageView 显示图像并能够使用以下代码至少以适当的大小显示图像。

```
InputStream ims = getAssets().open("31072011234.jpg");
        // load image as Drawable
        Drawable d = Drawable.createFromStream(ims, null);
        // set image to ImageView
        imageView.setImageDrawable(d); 
```

**我的问题是**
在屏幕 imageview 或 webview 上显示图像的好方法是什么？当我不知道这些图像的名称并将其存储在 SD 卡中时，如何以数组形式拍摄所有照片 给我一些提示或参考。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:36:48.250

您不需要将图像放在`assets`文件夹中，您可以`res/drawable`用来存储图像并以`resource`.

使用下面的代码，您可以从 drawable 访问图像，而无需知道图像文件的名称。

```
Class resources = R.drawable.class;
    Field[] fields = resources.getFields();
    String[] imageName = new String[fields.length];     
    int index = 0;
    for( Field field : fields )
    {
        imageName[index] = field.getName();
        index++;
    }

    int result = getResources().getIdentifier(imageName[10], "drawable", "com.example.name"); 
```

并使用下面的代码，您可以将图像保存到 SD 卡。

```
File file = new File(extStorageDirectory, "filename.PNG");
 outStream = new FileOutputStream(file);
 bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
 outStream.flush();
 outStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:59:48.737

显示图像的最佳方式是`ImageView`（这就是为什么它被称为**图像**视图），我建议您将图像添加到`res/drawable`文件夹中并使用以下方法显示图像：

```
imageView.setImageResource(R.id.some_image); 
```

可以使用以下方法将资源保存到 sdcard：

```
Bitmap bm = BitmapFactory.decodeResource( getResources(), R.id.some_image);
String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
File file = new File(extStorageDirectory, "someimage.PNG");
outStream = new FileOutputStream(file);
bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
outStream.flush();
outStream.close(); 
```

# c# - RenderSection 和 Web Helper 有什么区别

> ID：13710584
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:04.270
> 
> 标签：c#, asp.net, .net, razor

`RenderSection`和`RenderPage`Web Helper 有什么区别？

*   我用过的列表项`RenderPage`，它需要2个参数；`object`磁盘上文件的名称，以及要传递到该页面的 s 数组。
*   我用过`RenderSection`，我相信它只需要 1 个参数；的名称`section`。
*   我也使用过 Web Helpers。这就是我感到困惑的地方。使用 Helpers，您几乎可以使用`RenderBody`, 和`RenderSection`.

这是我感到困惑的地方：

部分文件：

```
@section footer {
   <p>Copyright 2012 blah. Most rights reserved.</p>
} 
```

帮助文件：

```
@helper header {
   <p>Copyright 2012 blah. Most rights reserved.</p>
} 
```

CSHTML 文件：

```
...
<body>
   @MyHelpers.header()
   @RenderBody()
   @RenderSection("footer", required: true)
</body>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:41:44.327

`RenderSection()`并`RenderBody()`允许您在布局页面和内容页面之间进行通信。
您在布局页面中调用这些方法，它们会从内容页面返回内容。

相比之下，助手只能在定义它们的文件中调用。（或者，对于全局助手，可以从任何地方调用）

# ios - 在 TableViewController 的底部放置一个 UIDatePicker

> ID：13710587
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:08.300
> 
> 标签：ios, storyboard, uidatepicker

是否有可能直接在情节提要中将 UIDatePicker 放置在屏幕底部？![在此处输入图像描述](../Images/5275a100a3d9e32caf4e2cc20737ba6f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:41:49.897

You just need an outer view controller in which you would add the date picker view at the bottom and just above that add your table view controller's tableview.

# c++ - 为什么我的交易没有回滚？Qt Mysql odbc 驱动程序

> ID：13710588
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:15.293
> 
> 标签：c++, mysql, qt, odbc, qtsql

我正在使用 Qt 4.8.3 和 MySQL ODBC 3.51 驱动程序。当我的事务由于第二个表中的重复唯一 ID 而失败时，第一个表中的插入不会回滚。任何人都可以发现错误吗？

```
struct Property  //see OMG's Property Service
{
    std::string name;
    boost::any value;
    Property();
    Property(const std::string &inName, const boost::any &inValue):name(inName),value(inValue){}

};

Property myFunction(QSqlDatabase &db, int amount)
{
    assert(db.driver()->hasFeature(QSqlDriver::Transactions) == true);
    db.transaction();
    QSqlQuery query(db);
    Property ret("MyPropertyTag",0);
    try{
        query.exec("LOCK TABLES table1 WRITE, table2 WRITE");
        if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); }
        for(int i=0;i<amount;i++)
        {
            query.exec("INSERT INTO table1 (someUniqueValue, newestId, Created) VALUES ('"+QString::number(i)+"', '1', NOW())");
            if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); }
            query.exec("SELECT id FROM table1 WHERE someUniqueValue = '"+QString::number(i)+"'");
            if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); }
            if(query.next() == false)   { throw std::exception("no result for insert id"); }
            auto Id1 = query.value(0).toString();

            query.exec("INSERT INTO table2 (table1_id, Changed, Created) VALUES ('"+Id1+"', NOW(), NOW())");
            if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); }
            query.exec("SELECT Id, table1_id FROM table2 ORDER BY Id DESC LIMIT 1");
            if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); } //lets say this throws
            if(query.next() == false || query.value(1).toString() != Id1)   { throw std::exception("no result for inserted id"); }
            auto Id2 = query.value(0).toString();

            query.exec("UPDATE table1 SET newestId = '"+Id2+"' WHERE Id = '"+Id1+"'");
            if(query.lastError().isValid()) { throw std::exception(query.lastError().text().toAscii()); }
        }
        db.commit();
        ret.value = amount;
    } catch(std::exception &e) {
        query.finish();
        db.rollback();
        ret.value = std::string("error:") + e.what();
    }
    query.exec("UNLOCK TABLES");
    query.finish();
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:20:36.510

您的表可能是 Myisam，将它们更改为 Innodb 以允许事务。

要更改 AutoCommit（我不确定是否有必要），您可以这样尝试：

```
mysql> SET autocommit=0;
Query OK, 0 rows affected (0.00 sec) 
```

但这仅适用于当前连接，如果您需要应用于所有需要更改数据库变量的数据库。

# java - apache fop 无法获取写入正确字节的 pdf

> ID：13710589
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:17.140
> 
> 标签：java, apache-fop, websphere-portal

我正在尝试生成`pdf`下载文件。`xml`我有以下代码可以从和生成 pdf `xsl-fo`。谁能指出我的代码中缺少的内容。当我打开 pdf 时，它显示已损坏，如果我使用`notepad++`all is see`[B@4bf24bf2`在文件中打开该文件。

```
public void generatePDF(ResourceRequest resourceRequest, ResourceResponse resourceResponse) throws IOException {

        PortletContext portletContext = resourceRequest.getPortletSession().getPortletContext();

        URL url = portletContext.getResource("/WEB-INF/xsd/xsl-fo.xsl");

        File xsltfile = new File(url.getPath());

        StreamSource source = new StreamSource(new File(portletContext.getResource("/WEB-INF/xsd/service.xml").getPath()));

        StreamSource transformSource = new StreamSource(xsltfile);

        // Construct FopFactory
        FopFactory fopFactory = FopFactory.newInstance();

        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();

        // Create ByteArrayOutputStream
        ByteArrayOutputStream outStream = new ByteArrayOutputStream();

        // Setup JAXP using identity transformer
        TransformerFactory tfactory = TransformerFactory.newInstance();             
        Transformer xslfoTransformer;

        try {           

            xslfoTransformer = tfactory.newTransformer(transformSource); // identity transformer            

            Fop fop;

            try {

                // Construct fop with desired output format
                fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, outStream);

                Result res = new SAXResult(fop.getDefaultHandler());

                try {
                    xslfoTransformer.transform(source, res);

                    byte[] pdfBytes = outStream.toByteArray();
                    resourceResponse.setContentLength(pdfBytes.length);
                    resourceResponse.setContentType("application/pdf");
                    resourceResponse.addProperty("Content-Disposition", "attachment;filename=fleetevents.pdf");                 
                    resourceResponse.getWriter().print(pdfBytes);
                    resourceResponse.getWriter().flush();

                } catch (TransformerException exception ) {
                    logger.log(Level.SEVERE, exception.getMessage(), exception);

                }

            } catch (FOPException fopException) {
                logger.log(Level.SEVERE, fopException.getMessage(), fopException);

            }
        }  catch(TransformerConfigurationException exception) {
            logger.log(Level.SEVERE, exception.getMessage(), exception);

        } catch(TransformerFactoryConfigurationError  exception) {
            logger.log(Level.SEVERE, exception.getMessage(), exception);

        } 

    } 
```

我的示例 xml

```
<?xml version="1.0" encoding="iso-8859-1"?>
<services>
    <service>
        <serviceId>11111</serviceId>
        <openDate>2012-02-16</openDate>
        <closeDate>2012-02-16</closeDate>
        <orderStatus>Status2</orderStatus>
        <description>INSPECT MACHINE</description>
        <repairCost>$266.76</repairCost>
    </service>
    <service>
        <serviceId>11111</serviceId>
        <openDate>2012-02-16</openDate>
        <closeDate>2012-02-16</closeDate>
        <orderStatus>Status1</orderStatus>
        <description>INSPECT MACHINE</description>
        <repairCost>$266.76</repairCost>
    </service>
</services> 
```

和我的示例 xsf-fo.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:fo="http://www.w3.org/1999/XSL/Format">
<xsl:output encoding="iso-8859-1" />
<xsl:template match ="services">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
        <fo:layout-master-set>
            <fo:simple-page-master master-name="service">
                <fo:region-body></fo:region-body>
            </fo:simple-page-master>
        </fo:layout-master-set>

        <fo:page-sequence master-reference="service">
            <fo:flow flow-name="xsl-region-body">
                <fo:block>
                    <fo:table>
                        <fo:table-body>
                            <fo:table-row>
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Service Id</fo:block>
                                </fo:table-cell>
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Open Date</fo:block>
                                </fo:table-cell>
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Close Date</fo:block>
                                </fo:table-cell>                                    
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Order Status</fo:block>
                                </fo:table-cell>                                    
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Description</fo:block>
                                </fo:table-cell>
                                <fo:table-cell border="solid 1px black" 
                                text-align="center" font-weight="bold">
                                    <fo:block>Repair Cost</fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <xsl:for-each select="./service">
                                <fo:table-row>
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="serviceId" /></fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="openDate" /></fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="closeDate" /></fo:block>
                                    </fo:table-cell>                                
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="orderStatus" /></fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="description" /></fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px bold" text-align="center">
                                        <fo:block><xsl:value-of select="repairCost" /></fo:block>
                                    </fo:table-cell>
                                </fo:table-row>
                            </xsl:for-each>
                        </fo:table-body>
                    </fo:table>
                </fo:block>
            </fo:flow>
        </fo:page-sequence>
    </fo:root>
</xsl:template>
</xsl:stylesheet> 
```

**更新**

我想我明白了，我需要使用`resourceResponse.getPortletOutputStream().write(pdfBytes); resourceResponse.getPortletOutputStream().flush();`而不是`resourceResponse.getWriter().print(pdfBytes); resourceResponse.getWriter().flush();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:24:17.590

查看 getWriter() 与 getPortletOutputStream() 的定义，似乎 getWriter 将返回一个仅将文本写入响应的 PrintWriter。

而 PortletOutputStream 将写入二进制数据。由于您的 xml 中有很多特殊字符，我猜想 Printwriter 无法完成这项工作而 PortletOutputStream 成功： [http ://portals.apache.org/pluto/portlet-2.0-apidocs/javax/portlet/ MimeResponse.html](http://portals.apache.org/pluto/portlet-2.0-apidocs/javax/portlet/MimeResponse.html)

# vb.net - 域内或域外用户

> ID：13710591
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:23.890
> 
> 标签：vb.net, wcf, http

我有以下要求。我有许多用户从我的域内（内部网和 VPN）或从公共互联网的域外登录到我的系统。我想知道用户从哪里登录并分别路由它们。（将它们绑定到 WCF 服务上的特定端点）我尝试使用“环境”变量。但是我想解决一种特殊情况。即使从外部网络登录，拥有在域中注册的笔记本电脑的人也始终显示“正在域中”。我该如何解决这个问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:12:30.733

我不确定你是否可以可靠地做到这一点。我认为最好的做法是拥有一个内部服务器和一个外部服务器（或至少两个独立的应用程序，一个可从本地 Intranet 访问，一个可从 Internet 访问。在内部访问应用程序时，公司内部 DNS 将路由到应用程序的内部版本。外部将路由到应用程序的外部版本。

这里有类似的问题，

[如何检测机器是否加入域（在 C# 中）？](https://stackoverflow.com/questions/926227/how-to-detect-if-machine-is-joined-to-domain-in-c)

和这里

[在 asp.net 中检测用户域](https://stackoverflow.com/questions/3264699/detecting-a-users-domain-in-asp-net)

# templates - 在 umbraco 模板中分配/调用页面

> ID：13710592
> 
> 赞同：2
> 
> 时间：2012-12-04T19:40:24.903
> 
> 标签：templates, master-pages, umbraco

我有一个页面，有 3 个部分......左上、左下和右列。它使用主模板中的母版页......我如何调用三个不同的页面来适应这三个部分......现在我对左上部分进行了编码，但我应该能够从 umbraco 编辑所有这三个部分而无需更改任何代码...基本上我创建了三个页面，以便我可以将它们插入到各个部分，但我不知道如何从模板中调用它们。

我在所有三个部分都试过这个......但它只允许我编辑一个部分

```
<umbraco:item id="Item1" runat="server" field="bodyText"></umbraco:item> 
```

有没有办法，我可以使用“mypage”来调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:49:24.103

我使用主宏执行此操作，该宏使用 DynamicNode 作为参数调用剃刀脚本。

```
foreach(DynamicNode child in Model.GetChildrenAsList)
{
     @RenderPage("script name here", new DynamicNode(child.id)) // this lets the next script us Model too
} 
```

为了获得脚本名称，我创建了一个静态类，将`.NodeTypeAlias`与常量列表进行比较并返回脚本路径。这样，当您更改树中的某些内容时，它会在加载时以不同的方式调用它。

例如，您可以根据需要添加任意数量的参数，以便使用 css 或结构。

希望这可以帮助。

# ios6 - iOS5.1 上的 setBackButtonBackgroundImage 磨损行为

> ID：13710593
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:29.277
> 
> 标签：ios6, uibarbuttonitem, back-button, ios5.1, uiappearance

我在 ios5.1 和 ios6.0 上有两种不同的行为

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:offBackButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

![在 iOS 6.0 上一切正常](../Images/e5433de748f436deeb12697fc190bd96.png) 在 iOS 6.0 上

![在 iOS5.1 上？？？](../Images/ab5ec01b9407e7fc52e32598cd45dfbc.png) 在 iOS 5.1 上？？？

有什么我做得不好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:05:03.893

您需要指定一个可拉伸`UIImage`的，`UIEdgeInsets`如下所示：

```
UIImage *normalStateImage = [[UIImage imageNamed:@"image"] resizableImageWithCapInsets:UIEdgeInsetsMake(10.0, 10.0, 10.0, 10.0)];
UIImage *pressedStateImage = [[UIImage imageNamed:@"image-pressed"] resizableImageWithCapInsets:UIEdgeInsetsMake(10.0, 10.0, 10.0, 10.0)];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:normalStateImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:pressedStateImage forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

iOS 6.x 足够聪明地确定图像大小并根据它进行拉伸。

# c++ - 无法更改按钮位置

> ID：13710596
> 
> 赞同：0
> 
> 时间：2012-12-04T19:40:39.287
> 
> 标签：c++, windows, winapi

在 C++ 应用程序中，我使用 CreateWindowEx 创建了一个按钮，然后尝试使用 SetWindowPos 更改其位置，但该按钮没有出现在我想要的位置。

有趣的是，当我调整窗口大小时（使用鼠标，不是以编程方式），我可以在一瞬间看到一个与按钮应该出现的按钮大小相同的空白轮廓。这一定是因为我还调用了 SetWindowPos 来响应窗口大小调整事件。但是，实际按钮保持在同一位置。我会发布截图，但由于某种原因，剪影从未出现在截图中。

这是更改 X 位置的代码（更改 Y 位置的代码几乎相同）：

```
HRESULT Control::put_Left(float left)
{
    RECT windowRect;
    ::GetWindowRect(m_hWnd, &windowRect);

    if (m_isTopLevel)
    {
        BOOL bResult = ::SetWindowPos(
            m_hWnd,
            nullptr,
            static_cast<int>(DesktopDpi::GetInstance().DipsToPixelsX(left)),
            windowRect.top,
            0,
            0,
            SWP_NOSIZE | SWP_NOZORDER | SWP_NOREPOSITION
            );

        if (!bResult)
            return HRESULT_FROM_WIN32(::GetLastError());
    }
    else
    {
        // NOTE: for a button this is the code that will execute, because a
        // button is not a top-level window

        HWND hWndParent = ::GetParent(m_hWnd);
        if (hWndParent == nullptr)
            return HRESULT_FROM_WIN32(::GetLastError());

        POINT parentPos = {0, 0};
        if (!::ClientToScreen(hWndParent, &parentPos))
            return E_FAIL;

        BOOL bResult = ::SetWindowPos(
            m_hWnd,
            nullptr,
            static_cast<int>(DesktopDpi::GetInstance().DipsToPixelsX(left)),
            windowRect.top - parentPos.y,
            0,
            0,
            SWP_NOSIZE | SWP_NOZORDER | SWP_NOREPOSITION
            );

        if (!bResult)
            return HRESULT_FROM_WIN32(::GetLastError());
    }

    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:11:09.617

您确定按钮的父级在处理时不会将其移回旧位置`WM_SIZE`吗？从你的描述来看，确实很像。

# sapui5 - 为什么这个 sap.ui.table.DataTable 是空的？

> ID：13710597
> 
> 赞同：1
> 
> 时间：2012-12-04T19:40:45.377
> 
> 标签：sapui5

我正在尝试使用新的 SAPUI5 开发工具包做一些事情。我找到了一些我想尝试的代码，但碰巧**我的表总是空**的。我试图自己弄清楚，但我做不到。这是我的代码：

```
var oTable = new sap.ui.table.DataTable();
oTable.setTitle("My Table");
oTable.addColumn(new sap.ui.table.Column({
  label: new sap.ui.commons.Label({text: "Agency Name"}),
  template: new sap.ui.commons.TextView().bindProperty("text", "NAME"),
  sortProperty: "NAME"
}));

// More Columns...
oTable.addColumn(new sap.ui.table.Column({
  label: new sap.ui.commons.Label({text: "Currency"}),
  template: new sap.ui.commons.TextField().bindProperty("value", "CURRENCY"),
  sortProperty: "CURRENCY",
}));

var uri = "http://gw.esworkplace.sap.com/sap/opu/sdata/iwfnd/RMTSAMPLEFLIGHT";
var user = "GW@ESW";
var pw = "ESW4GW";
var oModel = new sap.ui.model.odata.ODataModel(uri,false,user,pw);
oTable.setModel(oModel);
oTable.bindRows("TravelagencyCollection");
oTable.placeAt("dataTable"); 
```

我在 Eclipse 和网络服务器上尝试了这段代码，两者都具有相同的空表结果。我找到了在带有标志的 chrome 中运行它的提示， `--disable-web-security`但仍然没有任何反应。我究竟做错了什么？

* * *

感谢您的提示。没有标志，我得到一个 401 代码。有了标志，我得到了 200 GET OK，但桌子仍然是空的。

还有`new sap.ui.commons.TextView({ text: '{key}' })`，我得到一张空桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T12:30:09.017

可能有几个原因

*   您正在发出跨域 ajax 请求并且服务器拒绝它以解决它尝试使用代理并在本地使用 tomcat 服务器或将您的 sapui5 代码放在 ABAP 服务器上
*   oTable.bindRows("TravelagencyCollection"); 可能会产生错误的请求，因此请改用**oTable.bindRows("/TravelagencyCollection");**
*   如果上述两种情况都没有抛出任何错误，请尝试通过谷歌开发者工具（网络）检查来自 NW 的数据是否发送给您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-30T12:26:58.497

代替

```
oTable.bindRows("TravelagencyCollection"); 
```

经过

```
oTable.bindRows("*/*TravelagencyCollection"); 
```

# html - 显示ppt错误

> ID：13710602
> 
> 赞同：0
> 
> 时间：2012-12-04T19:41:04.313
> 
> 标签：html, powerpoint

嗨，我有一个问题，我有这个按钮的代码，应该显示一个 .pptx，它的代码在 chrome 中有效，但在 IE8 中无效，它让我尝试下载一个 zip...请帮助！

```
<button onclick="location.href=('EDTUserManual.pptx');" onmouseover="document.body.style.cursor='hand';" onmouseout="document.body.style.cursor='default';" style="background:url(images/midpattern.gif); background:repeat; border:#036"><font color="#FFFFFF" size="1"><strong>User Manual</strong></font></button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:18:09.237

尝试为您的按钮添加一个值。像这样：

```
 value="submit" 
```

# maven - Tycho：父 POM 需要列出我的功能中包含的插件吗？

> ID：13710605
> 
> 赞同：0
> 
> 时间：2012-12-04T19:41:14.783
> 
> 标签：maven, tycho

我正在从使用 Buckminster 构建 Eclipse 产品过渡到 Tycho。我已经对我的插件和功能进行了 mavenized 并且有一个问题：

我创建了一个带有 POM 的父功能，该 POM 引用了我的功能和插件。我不知道我这样做是否正确，但我发现我需要将所有功能和插件添加为模块。因此，如果我有`pluginA`,`pluginB`并且`feature1`包括`pluginA`and `pluginB`，我将所有三个添加到父 POM。这对我来说有点奇怪，因为在 Buckminster 中我必须只引用`feature1`它，它会根据`feature.xml`文件获取它的依赖关系。

我在我的 Tycho 构建中做错了什么，或者这是它应该如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:14:42.487

Tycho 构建由 Maven 驱动，即 Maven 首先确定哪些模块应该是构建反应器的一部分，然后 Tycho 构建模块。因此，您需要一个[聚合器 POM](http://maven.apache.org/pom.html#Aggregation)，它告诉 Maven 要构建的工件列表。

# c# - 使用随机生成的测试输入进行测试

> ID：13710606
> 
> 赞同：-2
> 
> 时间：2012-12-04T19:41:17.387
> 
> 标签：c#, testing

我创建了一个生成随机数的函数。我计划使用这些随机数作为我的程序的输入，以测试不同的输入。

我怎样才能做到这一点？

这是我想测试的程序。

```
public void Debit(double amount)
{
    if (m_frozen)
    {
        throw new Exception("Account frozen");
    }

    if (amount > m_balance)
    {
        throw new ArgumentOutOfRangeException("amount");
    }

    if (amount < 0)
    {
        throw new ArgumentOutOfRangeException("amount");
    }

    m_balance += amount;
} 
```

这是生成随机数的函数：

```
using System;
namespace Csharp.RandomExample
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = 0; i <= 100; i++)
            {
                Console.WriteLine(GenerateRandomNumber());
            }

            Console.ReadLine();
        }

        static int GenerateRandomNumber()
        {
            Random randomNumber = new Random();
            return randomNumber.Next();
        }
    }
} 
```

此函数生成的数字必须用作两个变量（金额和余额）的测试输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:54:09.673

如果我理解正确，您只需将 GenerateRandomNumber() 方法的返回值传递给您的 Debit() 方法

```
 for (int i = 0; i <= 100; i++)
 {
    Debit((double)GenerateRandomNumber());
 } 
```

刚刚注意到对您原始帖子的编辑。在您的代码中不清楚设置 m_amount 和 m_balance 的位置，但您可以使用 GenerateRandomNumber() 方法的结果来设置它们。

```
for (int i = 0; i <= 100; i++)
{
     int testNumber = GenerateRandomNumber();
     m_Amount = m_Balance = testNumber;
     Debit(doubleValueYouWantToTest);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:54:16.467

问题是您`Random`在`GenerateRandomNumber`. `Random`根据系统时间播种，并且它使用的值仅每几毫秒更新一次。您每隔几毫秒就要求一个以上的值。

您应该创建一个实例，`Random`然后`Next`重复调用该实例。在你的情况下，你可以`private static Random randomNumber = new Random()`在方法之前做一个，它会解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:31:33.943

为测试创建随机输入并不是增加代码覆盖率的好方法。事实上，在任何单元测试中使用随机值都不是一个好习惯，但可能有些与线程有关。

在您的情况下，只需几个简单的测试即可轻松实现 100% 的代码覆盖率。

1.  账户被冻结（余额和金额无关紧要）
2.  金额 > 余额
3.  金额 = 余额（极端情况）
4.  金额<余额
5.  金额 = 0（极端情况）
6.  金额 < 0

如果您使用随机输入，则永远无法保证您测试了所有路径。

# css - 有什么方法可以创建“自动”宽度的列结构？

> ID：13710607
> 
> 赞同：0
> 
> 时间：2012-12-04T19:41:19.080
> 
> 标签：css, html

我有一个站点，它的顶层有 4 个中心列，在 960 网格像素舞台上的宽度都相等。如果在 URL 中添加某个查询字符串，则列数（当然包括里面的内容）可以缩减到 1（永远不会小于 1 永远不会大于 4）。

例如：

> www.site.com

将显示所有 4 列。即将：

> www.site.com?col=3

将站点，但完全没有第四列。这个想法还在继续。我正在努力解决的是，在存在查询字符串（由 PHP 管理）的情况下，是否可以允许其他列“自动”更正它们的宽度以保持页面的整个宽度。

所以：

*   如果 4 列，所有列都是 220px，每边有 10px 边距。
*   如果 3 列，所有列都是 300px，每边有 10px 边距
*   如果 2 列，所有列都是 460px，每边有 10px 边距
*   IF 1 列，它是 940px，每边有 10px 边距

我想实现这一点，但如果可能的话，我希望在一个通用的 CSS 类中动态地实现这一点。

## 更新

似乎一致的答案是使用基于液体的格式（我假设但由于当前项目的构建希望可能存在我可能没有意识到的黑客攻击）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:16:22.567

[灵活](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)的盒子模型是这里的方法。请参阅此[代码笔](http://codepen.io/boennemann/pen/kejHA)以查看它的实际效果。如果您不想支持 IE < 10，您[可以使用它（前缀）](http://caniuse.com/#feat=flexbox)。

CSS：

```
.wrapper {
  display: box; //this property needs prefixes
  width: 960px;
  height: 100px;
  margin: 10px;
  background: red;
}

.box {
  box-flex: 1; //this property needs prefixes
  height: 100px;
  background: green;
  margin: 0 10px;
} 
```

HTML：

```
<div class="wrapper">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>  
  <div class="box"></div>  
</div>

<div class="wrapper">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>  
</div>

<div class="wrapper">
  <div class="box"></div>
  <div class="box"></div>
</div>

<div class="wrapper">
  <div class="box"></div>
</div> 
```

# javascript - 数组没有被函数填充

> ID：13710608
> 
> 赞同：0
> 
> 时间：2012-12-04T19:41:19.397
> 
> 标签：javascript

有人可以向我解释为什么数组（定义在函数之外）没有被函数填充。所以我可以将它用于其他功能

我的代码：

```
var points = [];
var eilutes = [];
var query = connection.query('SELECT * FROM ping', function(err, eilutes){

    //if (err) throw err;

    for (var i in eilutes){
        points.push(eilutes[i]);
    }
    console.log(points[1]);  //// Result is returned
    console.log(eilutes[1]); //// Result is returned
});
console.log(points[1]); //// promts: undefined
console.log(eilutes[1]); //// promts: undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:54:30.397

因为查询是异步的，所以匿名函数中的代码不会在它所属的任何函数中调用。

# javascript - Chrome for Android 的错误 clientX 和 clientY 行为的解决方法是什么？

> ID：13710610
> 
> 赞同：25
> 
> 时间：2012-12-04T19:41:36.030
> 
> 标签：javascript, android, google-chrome, touch, dom-events

在 Android 版本 16 和 18（至少）的 Chrome 中，存在一个错误报告的`clientX`错误`clientY`。如果页面被滚动，则 的值`clientX/Y`至少对于`touchstart`事件是不正确的，尽管不是`click`事件。这里有一个错误：

[https://code.google.com/p/chromium/issues/detail?id=117754](https://code.google.com/p/chromium/issues/detail?id=117754)

其中包含此示例，您可以自己尝试：http: [//www.apprisant.com/tab/cd.html](http://www.apprisant.com/tab/cd.html)

我在这里用画布做了一个类似的例子：http: [//codepen.io/simonsarris/full/dJcvn](http://codepen.io/simonsarris/full/dJcvn)

这些示例适用于其他移动浏览器（包括普通的旧 Android 浏览器），但 Android 版 Chrome 在滚动时似乎在（至少某些）触摸事件上破坏了 clientX/Y。

有趣的是，clientX 和 clientY 在`click`事件中并没有像在`touchstart`.

**我的问题是，让 clientX 和 clientY 跨浏览器一致工作的最佳解决方法是什么？**似乎抵消`window.scrollX`并将`window.scrollY`“解决”问题，但一个好的解决方法需要：

1.  确定浏览器是否受到影响，最好不要让用户做任何事情，也不要求助于检查 userAgent（因此不要对特定浏览器版本做出任何假设）。换句话说，**我们如何判断哪些浏览器对`clientX`和有错误的值`clientY`？**
2.  仅在需要解决的那些浏览器上可靠地解决问题（大概只有 Chrome for Android 和它的特定版本，因为未来的版本可能会很好），看起来，抵消`window.scrollX/Y`是这里唯一需要做的事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T15:23:31.890

只需使用`e.pageY - window.scrollY`代替`e.clientY`（或`X`相应地）。

`e.pageY`将为您提供事件发生的位置，偏移`window.scrollY`量将“删除由于滚动而出现在屏幕外的空白区域”。您可以有条件地检查`e.pageY - window.scrollY === e.clientY`，但由于解决方法为您提供了正确的值，并且您必须计算它以检查它，这将是违反直觉的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:13:39.953

我会先检查一下

`<meta name="viewport" content="width=device-width, initial-scale=1">`

用来。这解决了移动浏览器应用程序中的许多位置问题，尤其是 Android。不确定它是否会帮助您解决特定问题，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:34:27.200

您可以在画布上订阅`touchstart`事件并使用`.offset()`and`e.pageX`来获取画布内的位置。

```
$('#my-canvas').on('touchstart', function (startEvent) {
    var offset = $(this).offset();

    $(this).on('touchmove', function (moveEvent) {
        var pos = {
            x: moveEvent.pageX - offset.left,
            y: moveEvent.pageY - offset.top
        }
    });
}); 
```

# javascript - 如何在同一页面中多次重用 JavaScript 函数？

> ID：13710613
> 
> 赞同：1
> 
> 时间：2012-12-04T19:41:44.657
> 
> 标签：javascript, jquery, function

我有以下代码：

Javascript：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
 <script type="text/javascript">
 $(function() {
 var transition = 'slow';
 var target = $('#somediv');
 target.delay(5000).fadeIn();
 });
 </script> 
```

HTML：

```
 <div id="somediv">Some Content</div>
 <div id="second_div">Some second content</div>
 <div id="third_div">Some third content</div> 
```

如您所见，上面的函数可以与#somediv 一起使用，但是如何为#second_div 和#third_div 重用相同的函数？

我是 Javascript 新手，所以如果这是一个愚蠢的问题，请原谅我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:44:23.150

```
<script type="text/javascript">
 $(function(){
    fade($("#yourElement"), 5000)
 });

 function fade(element, delay) {
     var transition = 'slow';
     var target = element;
     target.delay(delay).fadeIn();
 }
</script> 
```

然后你可以将对象本身传递到任何你想要的地方，比如：

```
fade($("#yourOtherElement"), 1000); 
```

请注意，您可以传递不同的时间延迟，或者甚至可以选择设置默认时间延迟：

```
function fade(element, delay) {
    if(typeof delay === 'undefined') delay = 5000;

     var transition = 'slow';
     var target = element;
     target.delay(delay).fadeIn();
 } 
```

然后，如果您想使用默认时间延迟，只需传递第一个参数：

```
fade($("#yourOtherElement")); //will have 5000ms as delay time 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:44:20.520

[使用参数：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)

```
function stuff(idstr) {
   var transition = 'slow';
   var target = $('#'+idstr);
   target.delay(5000).fadeIn();
};

$(function() {
   stuff('somediv');
   stuff('second_div');
   stuff('third_div');
}); 
```

如果要更改时间延迟，请为该数字传递第二个参数：

```
function stuff(idstr, del) {
   var transition = 'slow';
   var target = $('#'+idstr);
   target.delay(del).fadeIn();
};

$(function() {
   stuff('somediv',5000);
   stuff('second_div',2000);
   stuff('third_div',3000);
}); 
```

[http://jsfiddle.net/mblase75/cnH7d/](http://jsfiddle.net/mblase75/cnH7d/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:47:00.603

```
function fade(selector){
    var target = $(selector);
    target.delay(5000).fadeIn();
} 
```

`fade('#div1') , fade('#div2')`您可以将任何 jquery 选择器作为输入传递给此函数以淡化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T19:44:25.353

将其作为参数传入：

```
<script type="text/javascript">
    function divFunc(divId, timeDelay) {
        var transition = 'slow';
        var target = $("#" + divId);
        target.delay(timeDelay).fadeIn();
    }
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T19:44:47.677

如果你有一个包含 div，你可以像这样制作一个 jquery 选择器来获取所有 3 个 div

```
 <div id="somediv">Some Content</div>
  <div id="second_div">Some second content</div>
  <div id="third_div">Some third content</div> 
```

js：

```
$(function() {
 var transition = 'slow';
 var target1 = $('#somediv');
 var target2 = $('#second_div');
 var target3 = $('#third_div');
 target1.delay(5000).fadeIn();
 target2.delay(target2Time).fadeIn();
 target3.delay(target3Time).fadeIn();
 }); 
```

# javascript - 使用 JavaScript 清除浏览器中事件的 UNDO 历史记录？

> ID：13710614
> 
> 赞同：1
> 
> 时间：2012-12-04T19:41:47.140
> 
> 标签：javascript, undo, undo-redo

我有一个用 Javascript 编写的 CodeMirror 实例，它充当代码编辑器。我为用户选择的过程加载代码..当用户选择一个过程然后另一个我只是将值设置为该过程的代码。当我这样做并且用户单击 CTRL+Z 或右键单击时，撤消它会返回上一个过程。当我调用设置值时，我需要清除撤消历史记录..找不到如何做到这一点已经看遍了..有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:46:38.017

clearHistory() 怎么样。这个对我有用。当用户选择一个过程时调用它。

```
editor.clearHistory() 
```

或者您可以通过在 codemirror 配置中使用“undoDepth”来完全禁用撤消功能

```
undoDepth : 0 , 
```

# javascript - 用 JavaScript 编译 CoffeeScript

> ID：13710619
> 
> 赞同：0
> 
> 时间：2012-12-04T19:41:55.047
> 
> 标签：javascript, coffeescript

有没有办法使用 JavaScript 将 CoffeeScript 编译为 JavaScript 代码？用户将 CoffeeScript 代码写入文本区域（或 codemirror 编辑器..），我想将咖啡代码编译为 js 并执行它。

我知道如何使用 php 或其他服务器端语言将咖啡编译为 js，但我想在客户端进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:55:15.603

转到[CoffeeScript 站点](http://jashkenas.github.com/coffee-script/)并阅读“文本/coffeescript 脚本标签”段落。

> 事实上，上面运行“Try CoffeeScript”的一点点胶水脚本，以及菜单的 jQuery，就是以这种方式实现的。查看源代码并查看页面底部以查看示例。包含该脚本还可以让您访问 CoffeeScript.compile()，这样您就可以打开 Firebug 并尝试编译一些字符串。

不要忘记`bare`选项，否则编译的代码将被包装

```
CoffeeScript.compile('alert "hello"', { bare: 'on' }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:53:51.207

[这个](http://js2coffee.org/)名为 js2coffee 的项目看起来正是你所需要的

# android - Android捕获视频错误

> ID：13710620
> 
> 赞同：0
> 
> 时间：2012-12-04T19:42:06.907
> 
> 标签：android, android-camera

我需要从相机捕获视频并将其保存到存储卡，我正在使用[谷歌教程](http://developer.android.com/guide/topics/media/camera.html#capture-video)，但调用时仍然出现错误

```
mRecorder.setCamera(mCamera); // 4.b.1 step from tutorial 
```

我尝试将其放入`try`并查看异常

```
try {
    mRecorder.setCamera(mCamera);
} catch(Exception e) {
    Log.d("MyVideoRecord", "Error setting the camera: " + e.getMessage());
    System.out.println("CameraPreview::record() - setCamera() thrown an exception");
    System.out.println("Exception: "+e.getMessage());
    System.out.println("Exception: "+e.getLocalizedMessage());
    System.out.println("Exception: "+e.toString());
    e.printStackTrace();

    return false;
} 
```

LogCat 输出

```
D/MyVideoRecord(2681): Error setting the camera: null
I/System.out(2681): CameraPreview::record() - setCamera() thrown an exception
I/System.out(2681): Exception: null
I/System.out(2681): Exception: null
I/System.out(2681): Exception: java.lang.NullPointerException
W/System.err(2681): java.lang.NullPointerException
W/System.err(2681):     at com.example.myvideorecord.CameraPreview.record(CameraPreview.java:101)
W/System.err(2681):     at com.example.myvideorecord.MainActivity.onOptionsItemSelected(MainActivity.java:104)
W/System.err(2681):     at android.app.Activity.onMenuItemSelected(Activity.java:2502)
W/System.err(2681):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:969)
W/System.err(2681):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
W/System.err(2681):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
W/System.err(2681):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
W/System.err(2681):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
W/System.err(2681):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
W/System.err(2681):     at android.view.View$PerformClick.run(View.java:14263)
W/System.err(2681):     at android.os.Handler.handleCallback(Handler.java:605)
W/System.err(2681):     at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err(2681):     at android.os.Looper.loop(Looper.java:137)
W/System.err(2681):     at android.app.ActivityThread.main(ActivityThread.java:4441)
W/System.err(2681):     at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(2681):     at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err(2681):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/System.err(2681):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/System.err(2681):     at dalvik.system.NativeStart.main(Native Method)
D/dalvikvm(2681): Debugger has detached; object registry had 425 entries 
```

看起来**mCamera**指针从日志中为空，但我不认为是这种情况，因为我之前已经解锁**了 mCamera**而没有错误。我查看了[文档](http://developer.android.com/reference/android/media/MediaRecorder.html#setCamera%28android.hardware.Camera%29)，但没有任何关于`setCamera()`返回错误或抛出异常的消息。我在清单中设置了`CAMERA`,`WRITE_EXTERNAL_STORAGE`和权限。`RECORD_AUDIO`我不知道是什么可能导致问题或如何追踪它。有人可以帮我吗？

非常感谢 ！:)

* * *

这是我的所有代码：

**CameraPreview.java**

我已经实现`record()`（这就是发生错误的地方）和`stopRecord()`方法。其余文件来自谷歌教程。

```
package com.example.myvideorecord;

import java.io.File;
import java.io.IOException;

import android.content.Context;
import android.hardware.Camera;
import android.media.CamcorderProfile;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Environment;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

//http://developer.android.com/guide/topics/media/camera.html#capture-video
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
        private SurfaceHolder mHolder;
        private Camera mCamera;
        private boolean recording;
        private MediaRecorder mRecorder;

        public CameraPreview(Context context, Camera camera) {
            super(context);
            System.out.println("CameraPreview() - Started");
            mCamera = camera;
            recording = false;

            // Install a SurfaceHolder.Callback so we get notified when the
            // underlying surface is created and destroyed.
            mHolder = getHolder();
            mHolder.addCallback(this);
            // deprecated setting, but required on Android versions prior to 3.0
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

            System.out.println("CameraPreview() - Ended");
        }

        public void surfaceCreated(SurfaceHolder holder) {
            System.out.println("CameraPreview::surfaceCreated() - Started");
            // The Surface has been created, now tell the camera where to draw the preview.
            try {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            } catch (IOException e) {
                Log.d("MyVideoRecord", "Error setting camera preview: " + e.getMessage());
            }

            System.out.println("CameraPreview::surfaceCreated() - Ended");
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            System.out.println("CameraPreview::surfaceDestroyed()");
            // empty. Take care of releasing the Camera preview in your activity.
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
            System.out.println("CameraPreview::surfaceChanged() - Started");

            // If your preview can change or rotate, take care of those events here.
            // Make sure to stop the preview before resizing or reformatting it.

            if (mHolder.getSurface() == null){
              // preview surface does not exist
              return;
            }

            // stop preview before making changes
            try {
                mCamera.stopPreview();
            } catch (Exception e){
              // ignore: tried to stop a non-existent preview
            }

            // set preview size and make any resize, rotate or
            // reformatting changes here

            // start preview with new settings
            try {
                mCamera.setPreviewDisplay(mHolder);
                mCamera.startPreview();

            } catch (Exception e){
                Log.d("MyVideoRecord", "Error starting camera preview: " + e.getMessage());
            }

            System.out.println("CameraPreview::surfaceChanged() - Ended");
        }

        public boolean record()
        {
            // if already recording, return
            if( recording ) return false;

            // We are recording
            recording = true;
            // log start of the method
            System.out.println("CameraPreview::record() - Method start");

            //mCamera.stopPreview();
            mCamera.unlock();

            // 
            // !!! THIS IS WHERE ERROR OCCURS !!!
            //
            //
            try {
                mRecorder.setCamera(mCamera);
            } catch(Exception e) {
                Log.d("MyVideoRecord", "Error setting the camera: " + e.getMessage());
                System.out.println("CameraPreview::record() - setCamera() thrown an exception");
                System.out.println("Exception: "+e.getMessage());
                System.out.println("Exception: "+e.getLocalizedMessage());
                System.out.println("Exception: "+e.toString());
                e.printStackTrace();

                return false;
            }

            // Set media recorder properties            
            mRecorder.setAudioSamplingRate(MediaRecorder.AudioSource.CAMCORDER);
            mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            mRecorder.setProfile( CamcorderProfile.get( CamcorderProfile.QUALITY_LOW ) );
            //mRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());
            mRecorder.setOutputFile("/sdcard/MVR_video");

            // probably not needed
            //mRecorder.setPreviewDisplay());

            // Prepare media recorder
            try {
                mRecorder.prepare();
            } catch (Exception e) {
                Log.d("MyVideoRecord", "Error preparing media recorder: " + e.getMessage());
                System.out.println("CameraPreview::record() - prepare() thrown an exception");

                return false;
            }

            mRecorder.start();

            System.out.println("CameraPreview::record() - Method returning TRUE");
            return true;
        }

        public void stopRecord() {
            System.out.println("CameraPreview::stopRecord() - Method start");

            if(recording)
            {
                mRecorder.stop();
                mRecorder.release();
                mCamera.lock();
            }
        }    
    } 
```

**MainActivity.java**

```
package com.example.myvideorecord;

import android.app.Activity;
import android.content.SharedPreferences;
import android.hardware.Camera;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.FrameLayout;

// http://developer.android.com/reference/android/app/Activity.html
public class MainActivity extends Activity {
    private Camera mCamera;
    private CameraPreview mPreview;
    private Camera.Parameters parameters;
    private FrameLayout preview;
    private SharedPreferences preferences;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera_preview);               

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Get parameters of camera (not neccessary now)
        parameters = getCameraParameters(mCamera);
        parameters.getFocusMode();

        // get preview reference
        preview = (FrameLayout) findViewById(R.id.camera_preview);

        mPreview = new CameraPreview(this, mCamera);

        preferences = getPreferences(MODE_PRIVATE);
    }

    @Override
    public void onStart() {
        super.onStart();

        // Create our Preview view and set it as the content of our activity.        

        System.out.println("MainActivity::onCreate() - adding view to preview");
        preview.addView(mPreview);
        System.out.println("MainActivity::onCreate() - view added");
    }
    @Override
    public void onStop() {
        super.onStop();     
        System.out.println("MainActivity::onStop() - Method start");

        // here shoud go something like
        // preview.stop
        preview.removeView(mPreview);
        mPreview.stopRecord();
    }

    @Override
    public void onPause() {
        super.onPause();

        // Save all needed information
        //preferences.edit();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        System.out.println("MainActivity::onDestroy() - Method start");

        mCamera.stopPreview();
        releaseCameraInstance(mCamera);
    } 

    /*
     * 
     *  MENU 
     * 
     * */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        System.out.println("MainActivity::onCreateOptionsMenu() - Method start");

        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        System.out.println("MainActivity::onOptionsItemSelected() - Method start");

        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_settings:
                return true;
            case R.id.menu_quit:
                this.finish();
                return true;
            case R.id.menu_record:
                mPreview.record();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    /*
     * 
     *  Camera handling
     * 
     * */
    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera c = null;
        try {
            c = Camera.open(); // attempt to get a Camera instance
        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
            System.out.println("getCameraInstance() - excepction");
        }

        System.out.println("getCameraInstance() - returning camera");
        return c; // returns null if camera is unavailable
    }

    public static Camera.Parameters getCameraParameters(Camera c)
    {
        System.out.println("getCameraParameters() - getting parameters of camera");
        Camera.Parameters par;
        par = c.getParameters();

        System.out.println("getCameraParameters() - returning parameters of camera");
        return par;
    }

    /* release camera object and log it */
    public static void releaseCameraInstance(Camera c){
        System.out.println("releaseCameraInstance() - camera released");
        c.release();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:59:47.147

你`mRecorder`是空的，因为你从来没有初始化它。在构造函数中初始化它以及相机和其他东西；）

```
mRecorder = new MediaRecorder(); 
```

# c# - 在哪里停止使用 async /await 关键字？

> ID：13710625
> 
> 赞同：4
> 
> 时间：2012-12-04T19:42:15.700
> 
> 标签：c#, .net, multithreading

我的 DB2/400 有一个简单的心跳方法：

```
public bool CheckConnection()
        {
            try
            {
                using (OleDbConnection db = new OleDbConnection( this.conString ))
                {
                    OleDbCommand cmd = new OleDbCommand();
                    cmd.CommandText = "select 1 from sysibm.sysdummy1";
                    cmd.Connection = db;
                    db.Open();
                    cmd.ExecuteReader();
                    db.Close();
                    return true;
                }
            }
            catch (Exception)
            {
                return false;
            }
        } 
```

我想在我的应用程序运行时使用它，当然我不想保留表单其余部分的执行。

我的主要方法是：

```
public FrmMain()
    {
        InitializeComponent();
        PrepareFormTexts();
        PrepareFormData();
        PrepareStateClass();
        CheckDbConnection();
        //Initialize Data Access for AS400
        Dal = JDE8Dal.Instance;
        Dal.conString = Properties.Settings.Default.conAS400;
        //Initialize Icons
        picCon.Image = Properties.Resources.ledGreen;
        picStatus.Image = Properties.Resources.ledGreen;
        // Load recording from file if they exist
        PrepareRecordings(AppState.DataFileName,'|');
    } 
```

CheckDbConnection 方法：

```
 private async Task<bool> CheckDbConnection()
    {
        return await Task.Factory .StartNew(() => Dal.CheckConnection());
    } 
```

我认为它运行良好，但我收到警告

> 警告 1 由于不等待此调用，因此在调用完成之前继续执行当前方法。考虑将“等待”运算符应用于调用结果。

我应该忽略它吗？我应该将异步放在主要方法中吗？

**更新：**在下面讨论之后，我发现由于我使用 .NET 4.0 的异步包，我不能真正使我的 dal 方法成为非阻塞的。我唯一能做的就是使用 async/await + task.factory.startnew 以使我的应用程序在 dal 在后台工作时保持工作。

下面的代码：

```
public FrmMain()
    {
        InitializeComponent();
        Load += FormLoadInit;
    }

    private async void FormLoadInit(object sender, EventArgs e)
    {
        PrepareFormTexts();
        PrepareFormData();
        PrepareStateClass();
        txtLot.Select();
        //Initialize Data Access for AS400
        Dal = JDE8Dal.Instance;
        Dal.conString = Properties.Settings.Default.conAS400;
        // Load recording from file if they exist
        PrepareRecordings(AppState.DataFileName, '|');
        bool cn = await Task.Factory.StartNew(() => Dal.CheckConnection());
        //Initialize Icons
        picCon.Image = cn ? Resources.ledGreen : Resources.ledRed;
        picStatus.Image = Properties.Resources.ledGreen;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:49:32.883

警告告诉您的是，您正在有效地触发然后忘记此异步任务。你从来没有真正使用过操作的结果，你甚至不会存储它`Task`本身以允许任何未来的代码依赖它的结果（甚至知道它何时完成）。

这不会破坏任何东西，但也不是很有帮助。您也可以不调用该方法。现在，在您的情况下，这只是一个虚拟列表，因此您需要问自己要测试什么。您想在表单上显示一些虚拟值作为概念证明吗？如果是这样，您的代码将需要进行一些更改才能到达那里。

要实际使用查询的结果，您将需要`await`它，并且您不能在构造函数中执行此操作。您需要将代码移动到`Form Load`事件处理程序并将处理程序标记为`async`以便您可以`await`在其中使用。

您遇到的另一个问题是，要创建异步方法，您将启动一个将在线程池中运行的新任务，然后让它执行阻塞方法。使用 async/await 模型的主要优点是您不需要这样做。您应该使用直接为您提供 a`Task<T>`作为其返回值且不会阻塞的数据库查询方法。然后，您可以`await`处理这些任务（或仅返回它们），以便您的应用程序在等待时没有线程被阻塞。

您的`CheckConnection`方法应如下所示：

```
public async Task<bool> CheckConnection()
{
    try
    {
        using (OleDbConnection db = new OleDbConnection(this.conString))
        {
            OleDbCommand cmd = new OleDbCommand();
            cmd.CommandText = "select 1 from sysibm.sysdummy1";
            cmd.Connection = db;
            db.Open();
            await cmd.ExecuteReaderAsync();
            return true;
        }
    }
    catch (Exception)
    {
        return false;
    }
} 
```

`CheckDbConnection`那么就不需要存在了。不需要包装`CheckConnection`a`Task`因为它已经返回了一个任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:50:21.073

构造函数不能是异步的（至少我每次尝试时总是会遇到编译器错误。但是事件处理程序可以是。我认为大多数初始化代码无论如何都属于 Form.Load 处理程序。

```
public FrmMain()
{
    InitializeComponent();
    Load+=OnLoaded;
}

private async void Onloaded(object sender, EventArgs args)
{
    PrepareFormTexts();
    PrepareFormData();
    PrepareStateClass();
    await CheckDbConnection();
    //Initialize Data Access for AS400
    Dal = JDE8Dal.Instance;
    Dal.conString = Properties.Settings.Default.conAS400;
    //Initialize Icons
    picCon.Image = Properties.Resources.ledGreen;
    picStatus.Image = Properties.Resources.ledGreen;
    // Load recording from file if they exist
    PrepareRecordings(AppState.DataFileName,'|');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:56:22.173

```
public FrmMain()
{
    InitializeComponent();
    PrepareFormTexts();
    PrepareFormData();
    PrepareStateClass();
    Task delayTask = CheckDbConnection();
    //Initialize Data Access for AS400
    Dal = JDE8Dal.Instance;
    Dal.conString = Properties.Settings.Default.conAS400;
    //Initialize Icons
    picCon.Image = Properties.Resources.ledGreen;
    picStatus.Image = Properties.Resources.ledGreen;
    // Load recording from file if they exist
    PrepareRecordings(AppState.DataFileName,'|');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:52:46.043

为了完成您的范围，也许您应该考虑[Reactive Extensions Framework](http://msdn.microsoft.com/en-us/data/gg577610)。以下是基于您的问题示例的示例实现。您需要将标签添加到表单（`label1`和`label2`）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

//get Reactive Extensions and reference them in your project.
//Reactive Extensions for .NET (Rx .NET) http://msdn.microsoft.com/en-us/data/gg577610
using System.Reactive.Linq;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Load += Form1_Load;
        }

        async void Form1_Load(object sender, EventArgs e)
        {
            //do independent stuff
            PrepareSomeStuff();

            //notify the DB checking
            label1.Text = "Checking DB";

            //declare an IObservable
            IObservable<bool> startAsync = Observable.Start<bool>(() => CheckConnection()).FirstAsync<bool>();

            //do some other independent stuff
            PrepareSomeOtherStuff();

            //wait for the IObservable to return data
            bool isDbReady = await startAsync;
            label1.Text = "Ready";
        }

        private void PrepareSomeOtherStuff()
        {
            //do some other stuff
            label2.Text += "\r\nDo some other stuff";
        }

        private void PrepareSomeStuff()
        {
            //do stuff
            label2.Text = "Do stuff";
        }

        private bool CheckConnection()
        {
            //do stufff
            System.Threading.Thread.Sleep(5000);
            return true;
        }
    }
} 
```

# algorithm - O(n^2) 与 O (n(logn)^2)

> ID：13710629
> 
> 赞同：16
> 
> 时间：2012-12-04T19:42:28.163
> 
> 标签：algorithm, math, data-structures, big-o, time-complexity

是时间复杂度`O(n^2)`还是`O (n(logn)^2)`更好？

我知道当我们简化它时，它变成

```
O(n) vs O((logn)^2) 
```

和`logn`< `n`，但是呢`logn^2`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T19:48:03.780

****对于n**小于 0.49的值，**n**仅小于**( *log* n) ^(2 ...)****

 ****所以一般来说**（*log* n）²**对于大**n**更好......

但是由于这些***O* (something)** -notations 总是忽略常数因素，在你的情况下，可能无法确定哪种算法更好......

这是一个图表：

![在此处输入图像描述](../Images/dd2f87ff12bb2903ffa7946abe54a036.png)

（蓝线是**n**，绿线是**( *log* n) ²**）

**请注意， n**的小值的差异如何并没有那么大，并且可能很容易被未包含在 Big-O 表示法中的常数因子相形见绌。

但是对于大**n**，**( *log* n) ²**胜出：

![在此处输入图像描述](../Images/9bb886b345eaddcbd9198a34087b9362.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-04T19:46:08.493

**对每个常数`k`渐近`log(n)^k < n`。**

**证明**很简单，对等式两边都做log，你得到：

```
log(log(n))*k < log(n) 
```

渐近地很容易看出，这是正确的。

* * *

语义注释：假设这里`log(n)^k == log(n) * log(n) * ... * log(n) (k times)`而不是`log(log(log(...log(n)))..) (k times)`有时也使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T19:54:36.470

```
O(n^2) vs. O(n*log(n)^2)
<=> O(n) vs. O(log(n)^2) (divide by n)
<=> O(sqrt(n)) vs. O(log(n)) (square root)
<=> polynomial vs. logarithmic 
```

对数获胜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:47:58.227

`(logn)^2`也是 < `n`.

举个例子：

```
 n = 5
 log n = 0.6989....
 (log n)^ 2 = 0.4885.. 
```

可以看到，(long n)^2 进一步缩小了。

即使您采用更大的 n 值，例如 100,000,000 ，那么

```
 log n = 9
   (log n)^ 2 = 81 
```

这远远小于`n`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T19:48:43.720

(Log n)^2 更好，因为如果您通过 exp m 对 n 进行变量更改，则 m^2 优于 exp m

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T19:47:30.640

O(n(logn)^2) 对于大 n 更好（更快）！

从双方获取日志：

对数(n^2)=2对数(n)

对数(n(logn)^2)=对数(n)+2对数(对数(n))=对数(n)+2对数(对数(n))

lim n--> 无穷大 [(Log(n)+2log(Log(n)))/2log(n)/]=0.5（使用 l'Hôpital 规则）（http://en.wikipedia.org/wiki/ L'H%C3%B4pital's_rule)]****

# python - 如果在 Python 中为 None，是否有返回默认值的简写？

> ID：13710631
> 
> 赞同：287
> 
> 时间：2012-12-04T19:42:31.810
> 
> 标签：python

在 C# 中，我可以说`x ?? ""`，如果 x 不为 null，它将给我 x，如果 x 为 null，则给我空字符串。我发现它对处理数据库很有用。

如果 Python 在变量中找到 None 有没有办法返回默认值？

* * *

## 回答 #1

> 赞同：452
> 
> 时间：2012-12-04T19:44:39.500

您可以使用`or`运算符：

```
return x or "default" 
```

请注意，`"default"`如果`x`是任何虚假值，这也会返回，包括空列表、0、空字符串，甚至`datetime.time(0)`（午夜）。

* * *

## 回答 #2

> 赞同：186
> 
> 时间：2012-12-04T19:45:01.433

```
return "default" if x is None else x 
```

试试上面的。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-12-04T19:43:26.363

您可以使用[条件表达式](https://docs.python.org/2/reference/expressions.html#conditional-expressions)：

```
x if x is not None else some_value 
```

例子：

```
In [22]: x = None

In [23]: print x if x is not None else "foo"
foo

In [24]: x = "bar"

In [25]: print x if x is not None else "foo"
bar 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-04T19:44:27.973

你有三元语法`x if x else ''`- 这就是你所追求的吗？

# python - Python删除空格

> ID：13710634
> 
> 赞同：1
> 
> 时间：2012-12-04T19:42:49.393
> 
> 标签：python

我正在使用一个 csv 文件，我正在遍历每一行并使每一列具有不同的标题。

```
for i in csvreader:
    1 = i[0]
    2 = i[1] 
```

等等

但是，第 2 列在“文本”列中的文本之后有空格。我需要删除文本后的空格。我需要“文本”，末尾没有空格。

我知道我可以将它从 Excel 中的 CSV 中删除，但我需要使用 Python 来执行此操作，我不想打开 CSV 文件并使用它。

我试过`replace`and `strip`，但我无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:43:44.733

使用[`strip()`](http://docs.python.org/2/library/stdtypes.html#str.strip)（或`lstrip()`或`rstrip()`）：

```
col2 = i[1].strip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:51:05.720

只需使用：

```
with open('some.csv') as fin:
    csvin = csv.reader(fin):
    for row in csvin:
        cols = [col.strip() for col in row]
        pass # whatever 
```

# .htaccess - htaccess 不工作 - 简单的重写规则在我的网站上什么也没做

> ID：13710635
> 
> 赞同：2
> 
> 时间：2012-12-04T19:42:51.707
> 
> 标签：.htaccess, mod-rewrite

我知道这些重写规则问题遍布 StackOverflow - 我已经阅读了所有这些问题。我已经在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)上测试了我的 htaccess 代码，它恢复正常工作。但在我的网站上它不起作用。

这是代码（目前在 /new/ 文件夹下的站点上）：

```
Options +FollowSymLinks

RewriteEngine On 
RewriteBase /new

RewriteCond %{REQUEST_URI} !\.php$ [NC]
RewriteCond %{REQUEST_URI} [^/]$
RewriteRule ^(.*)$ $1.php 
```

这是网站： [http ://strattonindustrial.com/new/property/page](http://strattonindustrial.com/new/property/page)

我希望**/page/**在后台重定向到**/page.php**，但在 URL 中显示 /page/，但它给了我一个 404 页面，所以没有重定向发生。我基本上是在尝试从文件名中删除“.php”并使其对 SEO 友好。

此外，我已经打电话给 Godaddy 并检查以确保 mod_rewrite 已加载并打开。他们找不到任何不起作用的东西。所以它一定与我的代码有关，但对于我的一生，我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:49:23.863

这是您需要的代码：

```
RewriteEngine On
RewriteOptions inherit
Options +FollowSymlinks

RewriteBase /new

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_FILENAME}.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:03:02.600

我终于明白了！！！！从 StackOverflow 上的这个答案（最后一个答案）：[godaddy mod_rewrite not working on subfolder](https://stackoverflow.com/questions/10569400/godaddy-mod-rewrite-not-working-on-subfolder)

显然，对于godaddy（也许是其他人），您必须添加：

```
Options -Multiviews 
```

到 .htaccess 页面的顶部以使其工作。现在它就像一个魅力。

# php - 在本地变量之前设置 $_SESSION 的奇怪 PHP 变量行为

> ID：13710637
> 
> 赞同：2
> 
> 时间：2012-12-04T19:42:54.293
> 
> 标签：php, mysql, arrays, session-variables

我正在一个使用简单用户登录系统的小型电子商务网站上工作。

我正在通过将数据库中的 id 设置为 $_SESSION var 来进行测试，这样我就可以跟踪其他一些东西。

有一个奇怪的问题，如果在我进行比较之前设置了 $_SESSION 变量，PHP 没有为变量设置正确的值，我很想知道原因。

此 IF 语句显示已注释掉的会话 var，但这是最初放置的位置。在这个位置，IF 返回 false（即使我将 var 转换为 INT），并且令牌值仅返回第一个数字。

```
$stmt = $db->prepare("select id, token, confirmed from customers where email = ?");
$stmt->execute(array($email));
$customerId = $stmt->fetchAll();    
$customerId = $customerId[0];

if (!empty($customerId))
{
    //$_SESSION['customerId'] = $customerId['id'];

    if ($customerId['confirmed'] == 0)
    {
        $sendConfirm = 1;
        $uuid = $customerId['token'];

        echo $sendConfirm."/".$customerId['token'];
    }
} 
```

我知道这听起来很疯狂，但是如果我将会话变量移到 IF 下或将其删除，一切都会按预期工作。这是 PHP 5.4。

谁能想到会发生这种情况的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:23:45.940

我认为问题是会话变量与局部变量具有相同的名称。

我以前也遇到过这种情况，我感受到了你的痛苦。

# google-sheets - 谷歌电子表格 - 不计算带空格的数字

> ID：13710638
> 
> 赞同：3
> 
> 时间：2012-12-04T19:42:55.687
> 
> 标签：google-sheets

我正在尝试计算两个单元格，其中一个单元格包含这样的数字：1 250。

如果数字是这样写的，而不是 1250，那么我无法让电子表格对其进行任何计算。谷歌突然不再将其视为合法数字。

为什么不直接输入 1250 而不是 1 250？好吧，我从 html 导入函数中获取单元格值。

关于如何解决这个问题的任何好的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:50:00.910

尝试这样的事情：

```
=Substitute(A2," ","") 
```

在这个公式中，A2 是一个单元格。您正在该单元格中找到任何空格，然后将其替换为“非空格”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:50:10.247

在公式中使用之前，请使用替换函数来转换您的数字。例如，假设您想将 F8 乘以 2，但 F8 可能包含空格。然后你会这样做：

```
 =substitute(F8, " ","") * 2 
```

# python - Python正则表达式，匹配太多

> ID：13710639
> 
> 赞同：2
> 
> 时间：2012-12-04T19:43:01.440
> 
> 标签：python, html, regex

嗨，我有一个正则表达式
`<a href="(.+?)" class="nextpostslink">`

此正则表达式适用于以下 html
`'> <span class='pages'>Page 1 of 12</span><span class='current'>1</span><a href='http://cinemassacre.com/category/avgn/page/2/' class='page larger'>2</a><a href='http://cinemassacre.com/category/avgn/page/3/' class='page larger'>3</a><a href='http://cinemassacre.com/category/avgn/page/4/' class='page larger'>4</a><a href='http://cinemassacre.com/category/avgn/page/5/' class='page larger'>5</a><a href="http://cinemassacre.com/category/avgn/page/2/" class="nextpostslink">&raquo;</a><span class='extend'>...</span><a href='http://cinemassacre.com/category/avgn/page/12/' class='last'>Last &raquo;</a> </div> </div>`

我试图提取的部分是下一页的网址
`<a href="http://cinemassacre.com/category/avgn/page/2/" class="nextpostslink">`

但是当我在这个 HTML 块上运行这个正则表达式时
`'> <span class='pages'>Page 2 of 12</span><a href="http://cinemassacre.com/category/avgn/" class="previouspostslink">&laquo;</a><a href='http://cinemassacre.com/category/avgn/' class='page smaller'>1</a><span class='current'>2</span><a href='http://cinemassacre.com/category/avgn/page/3/' class='page larger'>3</a><a href='http://cinemassacre.com/category/avgn/page/4/' class='page larger'>4</a><a href='http://cinemassacre.com/category/avgn/page/5/' class='page larger'>5</a><a href="http://cinemassacre.com/category/avgn/page/3/" class="nextpostslink">&raquo;</a><span class='extend'>...</span><a href='http://cinemassacre.com/category/avgn/page/12/' class='last'>Last &raquo;</a> </div>
</div>`

它提取从第一个`<a href="`到`" class="nextpostslink">`
为什么会发生这种情况的所有内容？我认为 (.+?) 是非贪婪的，所以它应该提取最少的数量。
哪个应该是`<a href="http://cinemassacre.com/category/avgn/page/3/" class="nextpostslink">`

我使用的完整python代码是
`match=re.compile('<a href="(.+?)" class="nextpostslink">', re.DOTALL).findall(pagenav)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:49:38.470

据我了解，贪婪从正则表达式的开头开始起作用——即，它找到`<a href="`，然后非贪婪让它停在第**一个** `" class="nextpostslink">`而不是**最后**一个，就像贪婪版本一样。

你最好在这里使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)：

```
from bs4 import BeautifulSoup as BS
soup = BS(html)
print soup.find("a", "nextpostslink").attrs['href']
# returns u'http://cinemassacre.com/category/avgn/page/2/' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:47:06.287

从某种意义上说，比赛的开始总是很贪婪。这是因为引擎尝试在您的主题字符串中从左到右进行匹配。遇到第一个`<a href="`，这很好，然后引擎继续并消耗所有内容，`.+?`直到匹配完成（由于 ，它会尽快停止`.+?`）。但它并没有尝试尽可能向右开始比赛，因为比赛很好。因此，您可以说 using`?`使比赛*结束*不贪心（取比赛的第一个可能结束），但比赛的*开始*将始终是贪心的（无论您如何，比赛将始终从最左边的可能位置开始试着让它变得不贪心）。

这就是为什么通常有更好的替代不贪婪重复的方法：从重复中排除分隔符：

```
<a href="([^"]*)" class="nextpostslink"> 
```

这永远不会超过结束`"`，因此无需担心属性或标签之外的任何内容都会成为匹配的一部分。

无论如何，让我补充[一点，您不应该使用正则表达式来解析 HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)如果`'`使用而不是`"`（如给定示例中的第二个锚标记）怎么办？如果您的属性之间有多个空格怎么办？如果有更多的属性而不仅仅是`href`and`class`怎么办？如果`class`属性列在`href`属性之前怎么办？

jdotjdot 的答案有一个很好的例子，说明如何在 Python 中以正确的方式做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:47:11.010

> 它从第一个中提取所有内容 为什么会发生这种情况？我认为 (.+?) 是非贪婪的，所以它应该提取最少的量

它是非贪婪的。但是，您有一个强制性的`class="nextpostslink">`正则表达式这一事实会迫使引擎匹配所有内容，直到找到`class="nextpostslink">`.

# xcode - 在 Xcode Interface Builder 中对场景进行排序

> ID：13710641
> 
> 赞同：11
> 
> 时间：2012-12-04T19:43:21.043
> 
> 标签：xcode, interface-builder, storyboard

所以我不知道该怎么称呼它，但它在 Xcode 的 Storyboard Editor 中左侧的那个栏显示了所有不同的场景。我喜欢使用故事板，但我对它们最大的不满是场景以完全随机的方式组织在该列表中。每次我向情节提要添加一个新的视图控制器时，它都会被插入到列表中看似随机的位置。在场景列表中，附近的两个视图根本不在附近。

所以我的问题是：是否可以重新排序该视图中的场景，或者强制进行某种排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T23:04:34.490

您可以修改 Storyboard 的 xml 版本（“打开方式”->“源代码”）。不性感但有效

# java - 内容从 JPanel 的 vCenter 开始

> ID：13710646
> 
> 赞同：0
> 
> 时间：2012-12-04T19:43:36.263
> 
> 标签：java, swing, gridbaglayout

我一直在研究 Oxygen 插件的视图，但无法让我的 GridBagLayout 从顶部开始。目前，当您向 JPanel 添加内容时，它在 div 中垂直居中，如下图所示。

![问题截图](../Images/45c9a1b2adfe1df9e9e69593212c8f4b.png)

```
// swing imports
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JCheckBox;
import javax.swing.JButton;
import javax.swing.JScrollPane;
// awt imports
import java.awt.Color;
import java.awt.Insets;
import java.awt.BorderLayout;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class DBPediaPanel extends JPanel {

    private JScrollPane scrollPane;
    private JPanel scrollContent;
    private JButton btnAcceptAll;
    private int currentRow = 0;

    public DBPediaPanel() {
        this.setLayout(new BorderLayout());
        this.setBackground(Color.BLACK);

        this.add(getScrollPane(), BorderLayout.CENTER);

        btnAcceptAll = new JButton("Add Row");
        btnAcceptAll.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                addStringToList("row " + currentRow);
                System.out.println("test");
            }
        });
        this.add(btnAcceptAll, BorderLayout.SOUTH);
    }

    private JScrollPane getScrollPane() {
        scrollContent = new JPanel(new GridBagLayout());;

        scrollPane = new JScrollPane(scrollContent);
        return scrollPane;
    }

    private GridBagConstraints createGbc(int x, int y) {
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = x;
        gbc.gridy = y;
        gbc.gridwidth = 1;
        gbc.gridheight = 1;

        gbc.anchor = (x == 0) ? GridBagConstraints.FIRST_LINE_START : GridBagConstraints.FIRST_LINE_START;
        gbc.fill = (x == 0) ? GridBagConstraints.BOTH : GridBagConstraints.HORIZONTAL;

        gbc.insets = (y == 0) ? new Insets(3, 5, 3, 5) : new Insets(0, 5, 3, 5);
        gbc.weightx = (x == 0) ? 0.1 : 1.0;
        gbc.weighty = 0.0;

        return gbc;
    }

    public void addStringToList(String str) {
        System.out.println("in addStringToList");
        System.out.println("attempting to add " + str + " to the list");

        GridBagConstraints gbc = createGbc(0, currentRow);
        scrollContent.add(new JCheckBox(), gbc);

        gbc = createGbc(1, currentRow);
        scrollContent.add(new JTextField(str), gbc);

        // revalidate and repaint the scrollContent to ensure it gets added to the view

        scrollContent.layout();
        scrollContent.revalidate();
        scrollContent.repaint();

        currentRow++;
    }

} 
```

谢谢您的帮助。我几乎有它，但它似乎并不尊重`gbc.anchor = GridBagConstraints.FIRST_LINE_START`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:58:33.290

`GridBagLayout`默认情况下，lays 不是围绕容器中心的组件

最常见的解决方案是将填充组件（例如 a `JLabel`）放在最后一个位置并将其设置`weightx/y`为 1。在您的情况下，我会将其放在最后一行

# java - 升级到 Java 7 后编译错误：包 sun.security.pkcs11 不存在

> ID：13710647
> 
> 赞同：8
> 
> 时间：2012-12-04T19:43:39.630
> 
> 标签：java, security, pkcs#11

我刚刚从 Java 6 升级到 Java 7 SDK，现在在我的 ant 构建中出现以下错误：

错误：包 sun.security.pkcs11 不存在
Provider p = new sun.security.pkcs11.SunPKCS11(is);

我正在运行 Windows 7 64 位。如果我切换回 Java 6，我可以编译得很好，但这不再是一种选择。我没有太多运气在网上找到解决方案。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:53:20.380

您必须将您的应用程序转换为使用不受限制的 API。当你做了这样的事情时，编译器会非常严格地警告你——这是面对这些警告继续进行的结果。

了解[为什么开发人员不应该编写调用“sun”包的程序](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T06:04:32.183

该 API 尚未由 oracle [oracle bug](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196276)发布，tom 和 yassering 的答案都是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T05:21:17.380

我遇到了同样的问题，我通过安装 32 位 JDK 而不是 64 位来解决它，并确保它可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-13T05:40:13.543

由于 Windows 64 位不支持 sunPKCS11，我假设您仅将 Windows 64 位用于构建环境，并且您的运行时可能是 linux 或其他受支持的环境。

如果上述情况属实，那么为了使构建工作，将 sunpkcs11.jar 从 32 位 jdk 复制并复制到 jre\lib\ext 下的 64 位 jdk。这对我有用。

或者，或者等待其固定的 jdk8。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-06-17T07:15:03.990

我有同样的错误。

```
Only a type can be imported. sun.security.pkcs11.wrapper.CK_AES_CTR_PARAMS resolves to a package 
```

我安装了带有 jdk 7x64 的 Windows 7 x64，然后用 jdk 7x32 替换。我还确保我的 JAVA_HOME 设置为新的 jdk 安装。当我运行我的应用程序时，我遇到了同样的问题。

# c - C：分叉和信号

> ID：13710650
> 
> 赞同：1
> 
> 时间：2012-12-04T19:43:50.460
> 
> 标签：c

我想要做的是创建一个持续 5 秒的父进程。`SIGUSR1`我也希望它每秒发送一个信号。在这个信号上，我希望孩子做点什么。

到目前为止，我放在一起的代码是：

```
void alarmHandler(int sig) {
    printf("\nalarm called\n");
    exit(0);
}

void childHandler(int sig) {
    printf("child called");
    signal(SIGUSR1, childHandler);
}

int main() {
    pid_t val;

    if((val = fork())) { //parinte
        signal(SIGALRM, alarmHandler);
        printf("parent");
        alarm(5);
        while(1) {
            kill(val, SIGUSR1);
            sleep(1);
        }
    }else { 
        signal(SIGUSR1, childHandler);
        printf("child");
    }

    return 0;
} 
```

我得到的是：

```
child
parent
alarm called 
```

我想要的是：

```
child 
parent
child called
child called
child called
child called
child called
alarm called 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:49:52.977

你的父母有`while`循环。孩子会做以下事情：

```
signal(SIGUSR1, childHandler);
printf("child"); 
```

然后退出。

如果它`SIGUSR`在退出之前收到，这也将被执行

```
printf("child called");
signal(SIGUSR1, childHandler); 
```

因此，您有一个[竞争条件](http://en.wikipedia.org/wiki/Race_condition)，因为打印了*被调用的孩子*的数量。

只需在`while (1) {}`后面放一个`printf("child");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T21:21:45.660

在原代码的基础上，添加两个块：

*   冲洗 printf：`setbuf(stdout, NULL);`
*   让孩子继续奔跑：`while (1) pause();`

代码清单如下：

```
 #include "stdio.h"
    #include "stdlib.h"
    #include <signal.h>

    /* For a real-world program, printing from a signal handler is not very safe.
     * A signal handler should do as little as it can, preferably only setting a flag here or there.
     * And the flag should be declared `volatile`.
     * Real-world example:
     *   I once worked on a system that used an Access database as a back end,
     *   and under certain circumstances a printf() call in a signal handler would write to the .mdb file instead of stdout,
     *   hosing the database beyond repair.
     */
    void alarmHandler(int sig)
    {
        printf("\nparent signal alarm handler: times up\n");
        exit(0);
    }

    void childHandler(int sig)
    {
        printf("\nchild signal handler\n");
        // The old style should install the handler again.
        signal(SIGUSR1, childHandler);
    }

    int main()
    {
        pid_t val;

        signal(SIGALRM, alarmHandler);
        // If not set this, we cann't the child's output.
        // The stdout stream is buffered, so will only display what's in the buffer after it reaches a newline (or when it's told to).
        setbuf(stdout, NULL);
        if ((val = fork())) { //parinte
            printf("\nparent\n");
            // @Note that there is only one alarm clock per process.
            // the alarm() function will return a value if another alarm has been previously set.
            //
            // sets a timer that generates the SIGALARM signal when times up.
            // If we ignore or don’t catch this signal, the process is terminated.
            alarm(5);
            while(1) {
                sleep(1);
                kill(val, SIGUSR1);
            }
            printf("\nparent exit\n");
        } else {
            signal(SIGUSR1, childHandler);
            printf("\nchild\n");
            while (1)
                pause(); // The pause() function suspends the process until a signal is caught.
            printf("\nchild exit\n");
        }

        return 0;
    } 
```

和输出：

```
parent
child
child signal handler
child signal handler
child signal handler
child signal handler
parent signal alarm handler: times up 
```

# windows-phone-7 - Sideload 将 Windows 7 应用程序更新到 Windows 8 Phone XAP

> ID：13710652
> 
> 赞同：0
> 
> 时间：2012-12-04T19:43:56.653
> 
> 标签：windows-phone-7, windows-phone-8, sideloading

我已将 Windows Phone 7 条形码扫描应用程序升级到 Windows 8 Phone 应用程序，并将该应用程序部署到我的 Windows 8 Phone。包是.xap。如何将此应用程序侧载到另一部手机？我将此应用程序用于商业目的，它不会在 Windows 应用商店中提供。

Zune 从未连接到我的 Win8 手机，我无法使用 Win7 手机应用程序部署工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:38:20.490

就像您为 WP7 使用 Windows Phone 7 部署工具一样，只需为 WP8 使用 Windows Phone 8 部署工具。它位于文件夹中：

> C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Tools\XAP 部署

当然，前提是您拥有开发人员解锁的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:24:38.010

我们可以通过使用设备 ID 来限制我们的应用程序在特定设备上运行吗？意味着应用程序只能在注册的设备上运行

# jquery - JQuery如何覆盖父点击上的默认复选框点击事件？

> ID：13710654
> 
> 赞同：0
> 
> 时间：2012-12-04T19:44:01.343
> 
> 标签：jquery, asp.net-mvc-3

我已经在 div 的父行上设置了单击事件，以便在单击时选中子复选框。问题是，当您单击实际复选框时，父单击会覆盖复选框单击事件，从而阻止复选框检查。

除了更改整个解决方案以使复选框不再是父 div 的子项之外，我不确定如何解决此问题？表格行是动态生成的，所以有一个可变数量。

```
function SelectChildCheckBox(element) {
    var $chkBox = $(element).children().find("input:checkbox:first"),
        value = $chkBox.attr("checked");
    $chkBox.attr("checked", !value);

    if (!$chkBox.attr("checked")) {
        $(element).attr("class", "dg_row");
    }
    else {
        $(element).attr("class", "dg_row_sel");
    }
} 
```

我在这里创建了一个示例：http: [//jsfiddle.net/6sStE/3/](http://jsfiddle.net/6sStE/3/)

**更新：**

我能够通过在实际复选框中添加一个 onmouseup 事件来解决这个问题。这可能不是最优雅的解决方案，因此如果您有替代方案，请随时发布。谢谢！

```
$.OnMouseUpChkBoxEvent = function(element) {
    var $chkBox = $(element)
    value = $chkBox.attr("checked");
    $chkBox.attr("checked", !value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:39:50.750

使用 jQuery删除`Inline events`并关联它..

使用`.prop()` 代替`.attr()`

```
$(document).ready(function() {
    $('.dg_row').on('mousedown', function(e) {
        var $element = $(this);
        var $chkBox = $element.children().find("input:checkbox:first");
        var value = $chkBox.prop("checked");
        $chkBox.prop("checked", !value);
        if ($chkBox.is(":checked")) {
            $element.addClass('dg_row_sel');
        }
        else {
            $element.removeClass('dg_row_sel');
        }
        if (e.target.tagName === 'INPUT') {
            $chkBox.prop("checked", value);
        }
    });

}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/6sStE/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:28:30.513

你可以试试这个

```
$(document).ready(function () {
    $('.dg_row').click(function(){
        var cb=$(this).find("input:checkbox:first");
        $(this).toggleClass("dg_row_sel dg_row");
        var cls=$(this).attr('class');
        if(cls=='dg_row_sel') cb.attr('checked', 'checked');
        else cb.removeAttr('checked');
    });
});​ 
```

从 div中删除内联事件`onmousedown="$.SelectChild(this);"`，并考虑升级`jQuery version`.

[**示例**](http://jsfiddle.net/6sStE/4/)。

# iphone - iOS 保存/保留数据的位置 didReceiveMemoryWarning（等效于 Android Bundle onSaveInstanceState）

> ID：13710655
> 
> 赞同：0
> 
> 时间：2012-12-04T19:44:02.640
> 
> 标签：iphone, ios, memory, bundle, didreceivememorywarning

我的问题很简单。我什么时候收到内存警告，我应该在哪里保存或保留数据或状态以便检索`viewDidLoad()`？

例如，我有一个带有 TextField 的视图，用户写了一封电子邮件，然后它对另一个应用程序执行了某些操作，我的应用程序收到了内存警告，我用它来处理它`didReceiveMemoryWarning`（也许那时，视图将被卸载）。那么，我在哪里保存“电子邮件”以便设置到 TextFiel 中`viewDidLoad()`？我应该用 Core Data 保存它吗？SQL？

当我使用Android并且SO要删除一个View时，该方法`OnSaveInstaceState`被调用并且我可以将数据保存到一个Bundle中，iOS中有没有类似的对象？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:15:51.647

对于这样简单的事情，您可以将其保存在 NSUserDefaults 中：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[[NSUserDefaults standardUserDefaults] setObject:textField.text forKey:@"email"]; 
```

# regex - .htaccess 找到特定路径时重定向

> ID：13710656
> 
> 赞同：1
> 
> 时间：2012-12-04T19:44:03.543
> 
> 标签：regex, apache, .htaccess, mod-rewrite

过去几天我一直在努力为我写一个合适的解决方案，`.htaccess`以便我可以重定向`(http://www.)domain.com/path/anotherpath`到`https://www2.domain.com/path/anotherpath`.

我已设法使其工作如下：

```
RewriteCond %{THE_REQUEST} www\.domain\.com\path\anotherpath
RewriteRule (.*) https://www2.domain.com/path/anotherpath [R=301,L] 
```

但是，当我需要重定向属于更深层次的页面时，此解决方案似乎不起作用，例如：domain.com/path/anotherpath/level1/level2（level1 和 level2 是动态的）。现在它仅在检测到特定的完整 url 时才会重定向。

如果不在我的 htaccess 中定义完整的 url，我怎样才能使这项工作？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:31:07.063

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.(domain\.com)$ [NC]
RewriteRule ^(shop)(/.*|)$ http://www2.%1/$1$2 [R=301,L] 
```

# jquery - jquery.validate 因多个选择输入而失败

> ID：13710657
> 
> 赞同：0
> 
> 时间：2012-12-04T19:44:06.683
> 
> 标签：jquery, validation

可能是一个新手问题，但我还是会问。有一个我正在处理的多页表单，需要验证多个页面上的多个字段。现在我只在第一页上工作并验证帐号、出生日期（分为 3 个选择框）和 SSN。我在 JQuery 1.8 中使用 jquery.validate 脚本，由于某种原因，当我尝试验证选择的月份、日期和年份时，它失败了。具有三个 html 选择的任何原因都会导致 jquery.validate 脚本失败。仅供参考，这是 bassistance 的 jquery.validate 脚本：

```
<script type="text/javascript" src="jqueryBase/jquery-1.8.3.js"></script>
<script src="jqueryBase/jquery.validate.js"></script>
<script src="jqueryBase/jquery.maskedinput.min.js"></script>

<script type="text/javascript">
$.validator.setDefaults({
    submitHandler: function() { alert("submitted!"); }
});

$().ready(function() {
$("#accountNumber").mask("9999-9999-9999-9999");
   $("#ssn").mask("999-99-9999");

    // validate signup form on keyup and submit
    $("#accountInformation").validate({
        rules: {
            firstname: "required",
            lastname: "required",
            accountNumber: {
                required: true,
                maxlength: 16
            },
            ssn: {
                required: true,
                minlength: 9
            },
            month: {
                required: true,
            },
            day: {
                required: true,
            },
            year: {
                required: true,
            },

        },
        messages: {
            accountNumber: "Please enter your Account Number",
            month: {
                required: "Please select the month you were born",
            },
            password: {
                required: "Please select the day you were born",
            },
            confirm_password: {
                required: "Please select the year you were born",
            },
            ssn: {
                required: "Please enter your Social Security Number",
            },
        }
    });

});
</script>
`<div id="main">`

`<p>Step 1 - Account Information</p>`

`<form class="cmxform" id="accountInformation" method="post" action="page2.html">`
`<fieldset>`
    `<p>`
        `<label for="accountNumber">Account Number</label>`
        `<input id="accountNumber" name="accountNumber" placeholder="XXXXXXXXXXXXXXXX" type="tel" size="32" />`
    `</p>`
 <label for="dob">Date of Birth</label>
<table class="tabless">
  <tr>
    <td><select name="month" data-theme="e">
        <option selected="" value="Default">Month</option>
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="November">November</option>
        <option value="Decemeber">December</option>
      </select></td>
    <td><select name="day">
        <option selected="" value="Default">Day</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
      </select></td>
    <td><select name="year">
        <option selected="" value="Default">Year</option>
        <option value="">1944</option>
        <option value="">1945</option>
        <option value="">1946</option>
        <option value="">1947</option>
        <option value="">1948</option>
        <option value="">1949</option>
        <option value="">1950</option>
        <option value="">1951</option>
        <option value="">1952</option>
        <option value="">1953</option>
        <option value="">1954</option>
        <option value="">1955</option>
        <option value="">1956</option>
        <option value="">1957</option>
        <option value="">1958</option>
        <option value="">1959</option>
        <option value="">1960</option>
        <option value="">1961</option>
        <option value="">1962</option>
        <option value="">1963</option>
        <option value="">1964</option>
        <option value="">1965</option>
        <option value="">1966</option>
        <option value="">1967</option>
        <option value="">1968</option>
        <option value="">1969</option>
        <option value="">1970</option>
        <option value="">1971</option>
        <option value="">1972</option>
        <option value="">1973</option>
        <option value="">1974</option>
        <option value="">1975</option>
        <option value="">1976</option>
        <option value="">1977</option>
        <option value="">1978</option>
        <option value="">1979</option>
        <option value="">1980</option>
        <option value="">1981</option>
        <option value="">1982</option>
        <option value="">1983</option>
        <option value="">1984</option>
        <option value="">1985</option>
        <option value="">1986</option>
        <option value="">1987</option>
        <option value="">1988</option>
        <option value="">1989</option>
        <option value="">1990</option>
        <option value="">1991</option>
        <option value="">1992</option>
        <option value="">1993</option>
        <option value="">1994</option>
        <option value="">1995</option>
        <option value="">1996</option>
        <option value="">1997</option>
        <option value="">1998</option>
        <option value="">1999</option>
        <option value="">2000</option>
        <option value="">2001</option>
        <option value="">2002</option>
        <option value="">2003</option>
        <option value="">2004</option>
        <option value="">2005</option>
        <option value="">2006</option>
        <option value="">2007</option>
        <option value="">2008</option>
        <option value="">2009</option>
        <option value="">2010</option>
        <option value="">2011</option>
      </select></td>
  </tr>
</table>

    <p>
    <label for="accountNumber">Social Security Number</label>
<input type="tel" id="ssn" name="ssn" maxlength="9" placeholder="XXX-XX-XXXX" size="32" />
    </p>

    <p>
        <input class="submit" type="submit" value="Submit"/>
    </p>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:13:12.353

1.  为所有年份选项添加值
2.  将各自选择中的“Day”、“Month”和“Year”的值更改为空，一个空字符串，因此验证知道用户没有选择一个值。

[小提琴](http://jsfiddle.net/F4eaf/1/)_`testing`

# r - 使用 R 的时间序列分解

> ID：13710661
> 
> 赞同：3
> 
> 时间：2012-12-04T19:44:20.910
> 
> 标签：r, time-series, forecasting, stl-decomposition

我正在使用`R`with`forecast package`来构建一些时间序列模型。现在，我正在使用该`tbats`函数处理多季节性数据。

当绘制拟合模型时，我得到一个带有时间序列分量的图。我的问题是，该组件到底是什么`slope`意思？（我在文档中找不到它）。

代码：

```
fit <- tbats(co2, use.trend= TRUE, use.box.cox = TRUE, seasonal.periods = c(12))
plot(fit) 
```

谢谢！![在此处输入图像描述](../Images/22a792fceee31be60ea060e20cb439d4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-17T19:55:39.503

斜率 m 表示趋势。您可能想使用 R 中的[stl](http://www.r-bloggers.com/seasonal-trend-decomposition-in-r/)或[分解](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/decompose.html)函数来推导斜率和季节。

分解的一般方程是 x(t)=s(t)+m(t)+e(t)，其中 t 是时间，m 是斜率或趋势，s 是季节，e 是残差的误差项。

季节性是周期性波动，趋势是给定时间内的一般方向

# java - 如何仅将唯一值放入数组中？

> ID：13710668
> 
> 赞同：2
> 
> 时间：2012-12-04T19:44:46.287
> 
> 标签：java, arrays, duplicates

```
node_marked_array.add(strings[0]);

for (int i = 0; i < strings.length; i++) {
    for (int a = 0; a < strings2.length; a = a + 2) {
        if (node_marked_array.get(i).equals(strings2[a])) {
            if (!node_marked_array.get(i).equals(strings2[a + 1])) {
                //    System.out.println("marked node: " + node_marked_array.get(i) + "=" + strings2[a] + ", added node " + strings2[a+1]);
                node_marked_array.add(strings2[a + 1]);
            }
        }
    }
} 
```

我有一个名为元素的数组`strings2`，每个元素是：

> `1, 2, 1, 3, 2, 3, 2, 4, 3, 2, 5, 5, 2,`

并且我的代码应该通过数组，如果它与例如数组中称为`strings`:的任何元素匹配，则`{1,2,3,4,5}`与`strings2`每个偶数元素的元素匹配。它检查`i+1`上面数组的元素以查看该元素是否已经添加到标记的数组中，如果没有，则添加它。但是，即使使用

```
if (!node_marked_array.get(i).equals(strings2[a + 1])) 
```

> 输出：`1 2 3 3 4 2 5 2 5 5`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T19:49:43.147

使用[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html). 数组是此问题的错误数据类型。

它包含一个[`.toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28%29)方法，该方法将在您构建集合**后**返回一个数组，如果这是您需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T19:52:42.413

使用[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html). 从您的代码开始：

```
HashSet<String> noDuplicate = new HashSet<String>();
for(int i=0;i<strings.length;i++)
{
  for(int a=0;a<strings2.length;a++)
  {
    if(strings[i].equals(strings2[a]))
    {
      noDuplicate.add(strings[i]);
    }
  }
}

// And then if you need an array:
String[] noDupArray = new String[noDuplicate.size()];
noDuplicate.toArray(noDupArray); 
```

# android - 如何在 android 4.0 及更高版本中创建“我”联系人

> ID：13710670
> 
> 赞同：0
> 
> 时间：2012-12-04T19:44:45.967
> 
> 标签：android, android-contacts, android-syncadapter

在我的 Android 4.0 及更高版本的同步适配器中，我想创建一个“我”帐户，如 Google+ 和 HaxSync 已成功创建。

整天谷歌搜索，我找不到任何方法来识别这个特定的联系人。是否有记录的方式来创建该条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:49:48.340

这肯定只用于 Google+，我想 HaxSync 也是这样做的。

该 ID 称为您的“个人资料”。请参阅 [“用户配置文件”](http://developer.android.com/guide/topics/providers/contacts-provider.html#UserProfile)。你应该避免改变它。

# php - 关闭调用文件后如何执行一些脚本？

> ID：13710677
> 
> 赞同：0
> 
> 时间：2012-12-04T19:45:07.120
> 
> 标签：php

If`operations.php`执行一些操作并通过`caller.php`这种方式调用：

```
$call_URL = "http://localhost/operations.php";
$call = file_get_contents($call_URL); 
```

说，到时间结束`operations.php`还没有执行操作。关闭或使用函数重定向`caller.php`后它会继续工作吗？如果在那之后我需要它工作怎么办？也许 cURL 会有所帮助？`caller.php``header()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:48:03.580

被调用文件*将*在调用者结束时结束。`file_get_contents`阻塞，直到它收到来自 的完整响应`operations.php`。

如果您需要在后台完成工作，请使用 cron 作业或队列/工作者系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:48:52.410

即使连接被中断，你也可以说 PHP 继续`true`执行[`ignore_user_abort()`](http://php.net/manual/en/function.ignore-user-abort.php)。

# bash - OS X 删除所有奇数文件

> ID：13710680
> 
> 赞同：0
> 
> 时间：2012-12-04T19:45:14.720
> 
> 标签：bash, osx-mountain-lion

我正在编辑一个应用程序，因为文件太大，他们将 360 视图的 12,000 个文件的帧速率减半。我尝试了其他线程中列出的内容，但得到“bash：意外标记附近的语法错误`"' "bash: syntax error near unexpected token`（'

例如对于 (*1.jpg *3.jpg *5.jpg *7.jpg *9.jpg) 中的 %F，请移动 "%%F" "temp\"

或者

for /f "eol=: delims=" %F in ('dir /b /ad *.jpg^|findstr /irc:"[13579].jpg$"') 移动 "%F" "temp"

有人知道解决方法吗？有 25 个子文件夹，理想情况下，我只想将文件移动到具有相同目录结构的另一个目录，这样如果他们改变主意，我可以轻松地重新组合它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:05:10.910

您尝试的命令似乎不是`bash`语法 - 它们看起来更像 Windows 命令外壳的东西。

试试这个：

```
mv -i */*[13579].jpg temp/. 
```

`mv -i`将要求您确认是否尝试覆盖文件（如果两个子目录具有相同名称的文件）。`*/*[13579].jpg`表示任何子目录中以奇数结尾后跟“.jpg”的所有文件，并且`temp/.`是目标目录。

# php - PHP 编写 XML - 文件未保存

> ID：13710682
> 
> 赞同：0
> 
> 时间：2012-12-04T19:45:18.137
> 
> 标签：php, xml

我的一个类中有一个 php 函数，它只是创建一个包含所有对象的 XML 文件。这是代码：

```
function writeXML(){
        //LOAD PROFILE
        //print "Profiles: <br>";
        //$pro = new Profile();

        $profileArray = $this->getAll();

        //var_dump($profileArray);
        //CHECK TO SEE IF THE XML FILE EXISTS IN THE LIBRARY/CONFIGURATION
        if(file_exists($_SESSION['ini'][rootPath] . "v/p.xml")){
            unlink($_SESSION['ini'][rootPath] . "v/p.xml");
        }

        //CREATE XML FILE
        //CREATE ROOT NODE
        $doc = new DOMDocument("1.0");
        $doc->formatOutput = true;

        //CREATE ROOT NODE
        print "Creating nodes";
        $root = $doc->createElement("profiles");
        $root = $doc->appendChild($root);

        //ADD NODES
        //print "<br>Creating children";
        foreach($profileArray as $member){
                    //AS WE CYCLE THROUGH THE ARRAY GET THE ARRAY OF OBJECT PARAMETERS
                    $memberArray = $member->toArray();

                    //var_dump($memberArray);

            //CREATE MEMBER NODE TO ROOT
            $person = $doc->createElement("profile");
            $person = $root->appendChild($person);

            //CREATE CHILD NODES FOR MEMBER
                        /*
                         * ID IS NOT NEEDED FOR IOS APP
            $id = $doc->createElement("ID");
            $id = $person->appendChild($id);

            $idValue = $doc->createTextNode($member->get_id());
            $idValue = $id->appendChild($idValue);
            */

            $lastName = $doc->createElement("lastName");
            $lastName = $person->appendChild($lastName);

            //$lastNameValue = $doc->createTextNode($member->get_lname());
                        $lastNameValue = $doc->createTextNode($memberArray['lastName']);
            $lastNameValue = $lastName->appendChild($lastNameValue);

            $firstName = $doc->createElement("firstName");
            $firstName = $person->appendChild($firstName);

            $firstNameValue = $doc->createTextNode($memberArray['firstName']);
                        //$firstNameValue = $doc->createTextNode($member->get_fname());
            $firstNameValue = $firstName->appendChild($firstNameValue);

                        $mobile = $doc->createElement("mobile");
            $mobile = $person->appendChild($mobile);

                        $mobileValue = $doc->createTextNode($memberArray['mobile']);
                        //$mobileValue = $doc->createTextNode($member->get_mobile());
            $mobileValue = $mobile->appendChild($mobileValue);

                        $phone = $doc->createElement("phone");
            $phone = $person->appendChild($phone);

            $phoneValue = $doc->createTextNode($memberArray['phone']);
                        //$phoneValue = $doc->createTextNode($member->get_phone());
            $phoneValue = $phone->appendChild($phoneValue);

            $email = $doc->createElement("email");
            $email = $person->appendChild($email);

            $emailValue = $doc->createTextNode($memberArray['email']);
                        //$emailValue = $doc->createTextNode($member->get_email());
            $emailValue = $email->appendChild($emailValue);

            $altEmail = $doc->createElement("altEmail");
            $altEmail = $person->appendChild($altEmail);

            $altEmailValue = $doc->createTextNode($memberArray['altEmail']);
                        //$altEmailValue = $doc->createTextNode($member->get_altemail());
            $altEmailValue = $altEmail->appendChild($altEmailValue);

            $street = $doc->createElement("address");
            $street = $person->appendChild($street);

            $streetValue = $doc->createTextNode($memberArray['street']);
                        //$streetValue = $doc->createTextNode($member->get_street());
            $streetValue = $street->appendChild($streetValue);

            $city = $doc->createElement("city");
            $city = $person->appendChild($city);

            $cityValue = $doc->createTextNode($memberArray['city']);
                        //$cityValue = $doc->createTextNode($member->get_city());
            $cityValue = $city->appendChild($cityValue);

            $state = $doc->createElement("state");
            $state = $person->appendChild($state);

            $stateValue = $doc->createTextNode($memberArray['state']);
                        //$stateValue = $doc->createTextNode($member->get_state());
            $stateValue = $state->appendChild($stateValue);

            $zip = $doc->createElement("zip");
            $zip = $person->appendChild($zip);

            $zipValue = $doc->createTextNode($memberArray['zip']);
                        //$zipValue = $doc->createTextNode($member->get_zip());
            $zipValue = $zip->appendChild($zipValue);

                        $image = $doc->createElement("image");
                        $image = $person->appendChild($image);

                        $imageValue = $doc->createTextNode($memberArray['image']);
                        $imageValue = $image->appendChild($imageValue);

            $titles = $doc->createElement("title");
            $titles = $person->appendChild($titles);

                        $titlesValue = $doc->createTextNode($memberArray['title']);
            //$titlesValue = $doc->createTextNode($member->get_field5());
            $titlesvalue = $titles->appendChild($titlesValue);

                        $group = $doc->createElement("group");
                        $group = $person->appendChild($group);

                        $groupValue = $doc->createTextNode($memberArray['group']);
                        $groupVAlue = $person->appendChild($groupValue);
        }
        print "<br>Saving XML<br><br>";
        $xml_string = $doc->saveXML();
        print "XML<br>";
        print $xml_string;
                print "<br>";
                print "Path: " . $_SESSION['ini']['rootPath'] . "public_html/v/p.xml";

        //if($doc->save($_SESSION['ini']['htmlPath'] . "v/p.xml")) return true;
                //else return false;
                print "Bytes: " . $doc->save($_SESSION['ini']['rootPath'] . "public_html/v/p.xml");

    } 
```

我真的需要另一双眼睛来`saveXML`完成，甚至吐出`$xml_string`屏幕。但是，`$doc->save`根本没有显示任何内容。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:53:30.453

如果您想将 xml 保存到您需要使用的文件中`save`，而不是`saveXML`.

您是否将文件名传递给保存？保存将是这样的：

```
$filename=$_SESSION['ini'][rootPath] . "v/p.xml";
$doc->save($filename); 
```

其他问题：`$_SESSION['ini'][rootPath]`你确定它是否已设置？

# html - HTML 5 谷歌发布者链接验证错误

> ID：13710689
> 
> 赞同：8
> 
> 时间：2012-12-04T19:45:50.983
> 
> 标签：html, validation, google-plus

HTML 5 谷歌发布者链接验证错误：

```
 Error: Bad value publisher for attribute rel on element link: Not an absolute IRI. The string publisher is not a registered keyword or absolute URL.

From line 13, column 1; to line 13, column 75

</script>↩&lt;link href="https://plus.google.com/my publisher id" rel="publisher"> ↩&lt;/he

Syntax of absolute IRI:
    An absolute URL. For example: http://example.org/hello, but not /hello. Spaces should be escaped as %20\. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T00:43:20.917

你试试这个：

```
<link rel="author" href="https://plus.google.com/PUBLISERID?rel=publisher"> 
```

通过 HTML5 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T13:20:48.560

如果您正在使用：

```
<link rel="author" href="https://plus.google.com/PUBLISERID?rel=publisher" /> 
```

Google 找不到发布者链接！

更好的解决方案是：

```
<a href="https://plus.google.com/PUBID?rel=publisher" rel="publisher">Google Page</a> 
```

通过 HTML5 验证！

# android - 最初需要双击才能完成操作

> ID：13710690
> 
> 赞同：-2
> 
> 时间：2012-12-04T19:45:51.927
> 
> 标签：android, user-interface, checkbox, double-click

我编写了一个非常简单的 CheckBox 示例代码。您可以结帐代码@svn checkout [http://my-android-ui-examples.googlecode.com/svn/trunk/my-android-ui-examples-read-only](http://my-android-ui-examples.googlecode.com/svn/trunk/)

项目名称是：CheckBoxExample 但是在真正的 android 手机中干净构建和部署之后，我看到的是：

第一次我必须单击两次才能完成操作。下一次之后，只需单击一下即可完成所需的工作。

你能否让我知道这可能是什么原因。

关于 Sudipta Deb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:58:52.830

您应该使用 an`onCheckedChangeListener`来正确监听`CheckBox`更改。

我重写了您的活动以实现这些并正确设置`onClick`您的按钮。删除 XML 文件中的 onClick 声明

```
public class MainActivity extends Activity implements OnCheckedChangeListener
{

    private CheckBox chkAndroid, chkIphone, chkWindows;
    private Button button;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        chkAndroid = (CheckBox) findViewById(R.id.checkBox_android);
        chkAndroid.setOnCheckedChangeListener(this);
        chkIphone = (CheckBox) findViewById(R.id.checkBox_ios);
        chkIphone.setOnCheckedChangeListener(this);
        chkWindows = (CheckBox) findViewById(R.id.checkBox_windows);
        chkWindows.setOnCheckedChangeListener(this);
        button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                // TODO Auto-generated method stub
                StringBuffer string = new StringBuffer();
                string.append("Iphone checked: ").append(chkIphone.isChecked());
                string.append("\nAndroid checked: ").append(chkAndroid.isChecked());
                string.append("\nWindows checked: ").append(chkWindows.isChecked());
                Toast.makeText(getApplicationContext(), string.toString(), Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if (buttonView == chkAndroid) {
            // do whatever.. you aren't doing anything currently
        } else if (buttonView == chkIphone && isChecked) {
            displaySuggestion();
        } else if (buttonView == chkWindows && isChecked) {
            displaySuggestion();
        }

    }

    private void displaySuggestion()
    {
        Toast.makeText(getApplicationContext(), "Try android", Toast.LENGTH_SHORT).show();
    }
} 
```

# ios - iOS UIView 子类 - 从类方法中显示/删除（如 UIAlertView）

> ID：13710692
> 
> 赞同：2
> 
> 时间：2012-12-04T19:45:54.710
> 
> 标签：ios, uiview, subclass

我想要一个可以在多个视图控制器上显示的自定义视图。我想像 UIAlertView 一样设置它，在其中初始化它，然后调用 [myView show] 将其添加到当前视图控制器。想知道如何将自定义 uiview 直接从它的类添加到当前视图控制器中。视图也会在设定的时间后自行关闭（基本上自定义视图是图像的动画，在淡出之前显示一些统计信息）。

从类方法 [myView show] 调用将取代必须初始化视图，然后调用 [self.view addSubview:myView]。

直接从其类中显示/删除自定义视图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:09:47.893

我对 jsd 采取了不同的策略，将其添加到视图中。也许窗户更好。但是当我尝试它时，这段代码似乎做了想要的事情：

```
@implementation EWView

+ (void)show:(UIView *)superView {
    EWView *instantView = [[EWView alloc]initWithFrame:CGRectMake(20, 20, 50, 50)];
    instantView.backgroundColor = [UIColor greenColor];
    [superView addSubview:instantView];
    int64_t delayInSeconds = 4.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [instantView removeFromSuperview];
    });
}

@end 
```

我从 UIViewController 调用它

```
[EWView show:self.view]; 
```

只有在块尚未完成执行时，视图才会继续存在。当块完成时，EWView 将被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:55:57.863

UIAlertView 和朋友将自己添加到 UIWindow 的视图中，而不是当前视图控制器的视图。这就是你应该做的。

如果您知道它们总是会在某个预定时间淡出，您可以制作一个块来执行删除并使用 dispatch_after()。请参阅[如何在延迟后触发块，例如 -performSelector:withObject:afterDelay:?](https://stackoverflow.com/questions/4139219/how-do-you-trigger-a-block-after-a-delay-like-performselectorwithobjectafter)

# selenium - JUnit 测试失败，因为某些属性未读取

> ID：13710699
> 
> 赞同：2
> 
> 时间：2012-12-04T19:46:13.727
> 
> 标签：selenium, junit, jenkins

我有一个用 Junit 编写的硒测试，我正在通过 Jenkins 工作运行。测试从 Eclipse 和我的本地命令行 (Win7) 执行得很好。只有当我通过 Jenkins 执行测试时，测试才会失败。

当我通过 Jenkins 作业运行测试时，一些测试失败了。经过一番调查，我发现一些在运行时从属性文件中读取的属性正在被成功读取，而另一些则没有。在读取的 30 个属性中，有 9 个会失败，并设置为 null 以执行测试，这会导致测试失败。

我只从一个属性文件中读取。如果我更改其中一个失败的常量以读取不同的属性，它会正常读取。这让我觉得属性文件有问题，但我已经看过了，它看起来很好。

这是我用来读取属性文件的代码片段：

> 属性 uiStrings = new Properties(); ...
> 
> InputStream isStrings = LandingPage.class.getResourceAsStream("/locale_" + locale); uiStrings.load(isStrings); ...
> 
> BROWSE_PANEL_TEXT = uiStrings.getProperty("browse_panel_text");
> HOME_BUTTON_TITLE = uiStrings.getProperty("home_button_title");

在上面，BROWSE_PANEL_TEXT 未定义，而 HOME_BUTTON_TITLE 按预期设置。属性在单独的文件中定义如下：

> browse_panel_text=浏览
> 
> home_button_title=主页

据我所知，用于定义属性字符串的语法在失败和成功读取之间是相同的。读取文件的语法也是相同的。我难住了。

我在 Win7 机器上开发测试，测试在 Mac 上执行。

提前致谢。R

# f# - 嵌套布尔测试的 F# 计算表达式？

> ID：13710700
> 
> 赞同：4
> 
> 时间：2012-12-04T19:46:14.123
> 
> 标签：f#, monads, maybe, computation-expression

我认为我对 F# monads（工作流）有足够的了解，我在我的代码中看到了一些地方实现它们是有意义的。

例如，我有一个具有多个嵌套 if/then 的函数，即只要数据一路通过某些“测试”，该函数就应该继续。

我熟悉“可能”单子，但在我见过的所有示例中，它都被编码为对`let!`绑定进行操作，而我没有这样做。我希望有人可以为我提供一个为嵌套布尔测试而不是`let`绑定量身定制的“可能”工作流程示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:57:42.150

您可以在不定义新单子的情况下完成此操作。只需定义

```
let test b = if b then Some () else None 
```

您现在可以使用`maybe`：

```
maybe {
    do! test (1 > 0)
    printfn "1"
    do! test (2 > 3)
    printfn "2"

    return ()
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T19:56:12.167

我提供了一个有条件的工作流程来应对[类似的问题](https://stackoverflow.com/q/11976652/162396)。我复制到这里，供参考。

```
module Condition =
  type ConditionBuilder() =
    member x.Bind(v, f) = if v then f() else false
    member x.Return(v) = v
  let condition = ConditionBuilder()

open Condition

let eval() =
  condition {
    // do some work
    do! conditionA
    // do some work
    do! conditionB
    // do some work
    do! conditionC
    return true
  } 
```

正如您在我[之前回答](https://stackoverflow.com/a/11977444/162396)的评论中看到的那样，并不是每个人都是粉丝。但这仍然很有趣。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T22:31:32.523

两个很好的答案，丹尼尔和埃里克。

Daniels 的回答让我想到了一个我之前真正见过的解决方案，Tomas Petricek 的[工作流](http://tomasp.net/blog/imperative-i-return.aspx)[实现`imperative`](http://tomasp.net/blog/imperative-i-return.aspx)。我决定这样做，因为它提供了最好的可读性并且在非布尔上下文中也很有用。

谢谢大家。

# c# - 如何通过 URL 将值作为参数值传递

> ID：13710703
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:46:17.420
> 
> 标签：c#, asp.net, url, c#-4.0

在我的网站 (www.mysite.com) 上，我有结帐，它重定向到外部网站 (www.checkoutsite.com)，然后在付款后将 POST 请求发送回我的网站。在 url 我传递结帐所需的所有信息，但我还需要传递我自己的数据，因为它具有“UserData” url 参数

所以，我的网站将用户重定向到 url：http://checkoutsite.com/payment/?AppLogin=MyLogin&AppPass=MyPass&UserData=[这里应该是我的数据]

我需要在“UserData”参数中传递不同的 key=value 值，然后在我这边阅读。

在 ASP.NET 中最好的方法是什么，我的意思是如何将 key=value 值打包到一个字符串中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T21:52:09.030

好的，我创建了 Dictionary 并对其进行序列化/反序列化，就像这里描述的那样：

[http://blogs.msdn.com/b/rakkimk/archive/2009/01/30/asp-net-json-serialization-and-deserialization.aspx](http://blogs.msdn.com/b/rakkimk/archive/2009/01/30/asp-net-json-serialization-and-deserialization.aspx)

它解决了一个问题。

# apache - 使用 % 将重定向规则写入 .htaccess

> ID：13710704
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:46:22.957
> 
> 标签：apache, .htaccess, redirect

我正在尝试编写一个 RewriteRule 以便我可以重定向一个像

```
http://example.com/cont.php?fdsfsd=fdsfsd 
```

到带有字符 %3 的参数的 url，例如：

```
http://example.com/another.php?var=ntvpz2hrzm0&cof=FORID%3dsa 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:46:14.087

在 % 前面加一个反斜杠

```
RewriteRule cont.php another.php?var=ntvpz2hrzm0&cof=FORID\%3dsa [R=301,NE,L] 
```

NE 标志也可能是必要的，以防止以后的进程试图转义 % 符号。

# jquery - 自定义不显眼的验证器中断日期类型验证器

> ID：13710706
> 
> 赞同：0
> 
> 时间：2012-12-04T19:46:37.347
> 
> 标签：jquery, datetime, jquery-validate, unobtrusive-validation

涉及：[带有参数的 ASP.NET MVC 3 客户端验证](https://stackoverflow.com/questions/4784943/asp-net-mvc-3-client-side-validation-with-parameters)

我构建了一个自定义验证属性，允许我检查相对日期（例如模型值小于或等于今天）。

验证器正确实现了该`GetClientValidationRules`方法，并且视图中**发出的 HTML5**对我来说看起来是正确的：

```
<div class="editor-label">
    <label for="Date">Date</label>
</div>
<div class="editor-field">
    <input class="text-box single-line" data-val="true" data-val-date="The field Date must be a date." data-val-relativedate="Date must be less than or equal to 12/04/2012" data-val-relativedate-referencedate="12/04/2012 00:00:00" data-val-relativedate-relativityoperator="lessThanOrEqual" data-val-required="The Date field is required." id="Date" name="Date" type="date" value="" />
    <span class="field-validation-valid" data-valmsg-for="Date" data-valmsg-replace="true"></span>
</div> 
```

下一步是定义一个自定义的**jQuery Unobtrusive Validator**适配器和方法：

```
// Validation Method: Relative Date
// Note: method name value does NOT need to match the HTML5 metadata built by the server model annotation attribute.
$.validator.addMethod("validateRelativeDate", function (value, element, params) {
    // "element" is the actual HTML element we are validating, and is unneeded here.
    // "value" is the value of the HTML element
    var toValidate = DateUtilities.convert(value);
    // "params" is a JSON collection of those values provided by the adapter.
    var referenceDate = params["referencedate"];
    var relativityOperator = params["relativityoperator"];

    if (relativityOperator != "lessThan" && relativityOperator != "lessThanOrEqual" || relativityOperator != "greaterThan" && relativityOperator != "greaterThanOrEqual")
        return false; // "Invalid relativity operator (ex. '<', '<=', '>', or '>=').");

    var toReference = referenceDate == null ? new Date() : referenceDate;

    var relativity = DateUtilities.compare(toValidate, toReference);

    switch(relativityOperator) {
        case "lessThan":
            if (relativity >= 0) return false; //"Date must be lesser than " + toReference);
        break;
        case "lessThanOrEqual":
            if (relativity > 0) return false; //"Date must be less than or equal to " + toReference);
        break;
        case "greaterThan":
            if (relativity <= 0) return false; //"Date must be greater than " + toReference);
        break;
        case "greaterThanOrEqual":
            if (relativity < 0) return false; //"Date must be greater than or equal to " + toReference);
        break;
    }

    return true;

});

// note: adapter name must match HTML metadata built by the server model annotation attribute
$.validator.unobtrusive.adapters.add("relativedate", ["referencedate", "relativityoperator"], function (options) {
    options.rules["relativedate"] = options.params;
    options.messages["relativedate"] = options.message;
}); 
```

### 症状

日期验证已损坏。必需的似乎工作正常。但是，每当我在此字段中键入任何值时，日期类型验证器都会触发并生成消息“日期字段必须是日期”。输入的任何日期值都会发生这种情况。

### 问题

我的验证规则有什么问题，它 (1) 不起作用，并且 (2) 破坏了 Date 类型验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:44:45.180

与大多数调试经验一样，症状与正在发生的事情无关。必需和日期类型验证均成功。故障是在适配器中引起的。

### 解释

使用浏览器脚本调试器我发现它在这一行失败：

```
// jQuery.validate.js, line 530
result = $.validator.methods[method].call( this, val, element, rule.parameters ); 
```

这是 jQuery 循环通过规则及其相关方法进行验证的地方。

`method`then 等于`"relativedate"`（在 HTML5 中吐出的元数据值），因此该`call`属性引发了异常。我以不同的方式命名了我的方法`$.validator.addMethod("validateRelativeDate", /*...*/)`，并且文档说它不必匹配这个元数据值......那么为什么会发生这种情况？

是适配器。我知道适配器名称必须与 HTML5 元数据相同，这是两者之间的紧密耦合 -`"relativedate"`如下所示。

// 注意：适配器名称必须匹配服务器模型注释属性构建的 HTML 元数据 $.validator.unobtrusive.adapters.add("relativedate", ["referencedate", "relativityoperator"], function (options) { options.rules[ "relativedate"] = options.params; options.messages["relativedate"] = options.message; });

`rules`为和添加数组值的两行`messages`是罪魁祸首。显然，这些值需要是用于验证的方法的名称，而不是适配器/元数据的名称。

### 解决方案

更改这两行以匹配验证方法名称，解决了所有问题：

```
options.rules["validateRelativeDate"] = options.params;
options.messages["validateRelativeDate"] = options.message; 
```

### 借口，借口……

我研究的所有示例，甚至我引用的示例，所有这些值都是相等的，因此从未讨论过这个细节。但最终这意味着我是一个有点缺乏智慧的程序员，没有意识到这是它使 HTML5 废话“适应”验证方法的唯一方法。

希望这可以帮助某人或节省他们的时间。

# javascript - 如何在 Backbone.Marionette 视图中最轻松地呈现 i18n 文本和模型属性（使用 Handlebars 模板）

> ID：13710708
> 
> 赞同：4
> 
> 时间：2012-12-04T19:46:45.437
> 
> 标签：javascript, jquery, backbone.js, marionette

当模板中显示的数据是国际化文本或模型属性时，渲染模板是小菜一碟，但是当在一个模板中同时渲染这两者时，我似乎找不到一个干净的解决方案。

作为参考，我通过 Require.js 的 i18n 插件使用 i18n。

假设我有一个简单的模板：

```
<h3>{{displayText.load}} #{{id}}</h3>

<h4 id="loading-load-data">{{displayText.loadingLoadData}}...</h4> 
```

`displayText`对象代表 i18n 文本，而项目`id`代表 Backbone 模型属性。

在视图上使用 Backbone 的`template`属性，我可以执行以下操作以使用 i18n 文本呈现模板，但没有模型属性数据：

```
return Backbone.Marionette.ItemView.extend({
    template: function () {
        var compiledTemplate = Handlebars.compileClean(template);

        // localizedText represents the i18n localization object, using the Require.js i18n plugin
        return compiledTemplate(localizedText);
    },
    // some more View properties and methods
}); 
```

但是，一旦我还想显示模型数据，这将不再有效，主要是因为`this`在模板属性中未定义（所以我无法引用`this.model.attributes`），而且似乎我不得不退回到覆盖该`render()`方法，通过模板的 i18n 对象和模型属性，如下所示：

```
return Backbone.Marionette.ItemView.extend({
    template: Handlebars.compileClean(template),
    render: function() {
        var templateParams = _.extend({}, this.model.attributes, localizedText),
            renderedTemplate = this.template(templateParams);

        this.$el.html(renderedTemplate);

        this.bindUIElements();
        this.delegateEvents();

        return this;
    }
}); 
```

我真的很想保留 Marionette 的默认处理方式`render()`，只使用模板属性来呈现 i18n 文本和模型数据。这可能吗？

**奖励**：假设我必须覆盖`render()`，我注意到在这样做时，`this.ui`Marionette Views 上提供的属性不再将每个项目包装为 jQuery 对象。这意味着：

```
this.ui.loadingNotification.show(); 
```

停止运行，抛出`Uncaught TypeError: Object #loading-load-data has no method 'show'`. 为什么会这样，我怎样才能恢复正确的`this.ui`jQuery 包装功能？

**编辑**：解决了**奖金**；只需在方法中进行`this.bindUIElements()`调用`render()`以将元素正确绑定到`ui`哈希。请参见`render()`上面的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:03:11.243

**已解决**：所以答案非常简单。事实证明，您可以将参数传递给 template: 用作函数时的属性，并且此参数表示与该视图/模板关联的模型：

```
template: function (model) {
    var templateParams = _.extend({}, model, localizedText),
        renderedTemplate = Handlebars.compileClean(template);

    return renderedTemplate(templateParams);
}, 
```

`render()`然后不再需要覆盖该方法，i18n 文本和模型数据都可以按预期呈现到模板中。

# netbeans - Netbeans 监视变量

> ID：13710710
> 
> 赞同：3
> 
> 时间：2012-12-04T19:46:57.440
> 
> 标签：netbeans, netbeans-7

当我在 Netbeans 中运行我的 Java 项目时，我试图找到一个变量在哪里改变了它的值。它从假变为真，这不应该发生。有几个类可能会改变变量，我需要准确地找到哪一个以及在哪里。

我想为正在更改的变量添加一个监视，这样当我运行调试器时，我可以单步执行并准确查看它何时更改，但我不知道如何正确执行此操作。

我打开了启动变量更改过程的类（更改发生在我更改屏幕上的选项卡时）并为`this.toolbar.deletebutton.isEnabled()`. 当调试器进入另一个类时，该变量在手表中不再可用，它仍在被编辑，但它不是同一个东西，并且随着程序的运行而改变很多次。

那么如何制作一个手表，在程序运行时跟踪整个类的变量？

# java - 为 Reversi/Othello 游戏创建 negamax/minimax 节点

> ID：13710713
> 
> 赞同：0
> 
> 时间：2012-12-04T19:47:06.067
> 
> 标签：java, artificial-intelligence, nodes

我为黑白棋游戏编写 AI 播放器，我决定用 NegaMax 或 MiniMax 来做。伪代码：

```
function negamax(node, depth, α, β, color)
    if node is a terminal node or depth = 0
        return color * the heuristic value of node
    else
        foreach child of node
            val := -negamax(child, depth-1, -β, -α, -color)
            {the following if statement constitutes alpha-beta pruning}
            if val≥β
                return val
            if val≥α
                α:=val
        return α 
```

但是我需要将节点发送到这个函数，我怎样才能创建这个节点？就像创建具有所有可能移动状态的节点，然后为每个可能的节点移动创建子节点？

如果您可以帮助了解 α、β 值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:00:00.030

节点可能意味着表示单个状态。在游戏中，这是棋盘的状态（对于奥赛罗来说，棋子的位置，它是谁的移动等等）。通常在使用 alpha/beta 剪枝的游戏中，生成所有下一个状态是可能的，但生成所有可能位置的所有状态是不可能的。

如果您使用的是 Java，那么 Node 对象可能有一个方法 getChildren() 来从该状态生成所有可能的移动，它们本身就是 Node 对象。

至于 α、β 值，这些值在 Integer.MIN_VALUE 和 Integer.MAX_VALUE 处初始化

# html - 套接字 IO - 新会话触发断开连接

> ID：13710714
> 
> 赞同：3
> 
> 时间：2012-12-04T19:47:09.780
> 
> 标签：html, node.js, websocket, socket.io

我使用 SocketIO 从 HTML5 Web 应用程序与 NodeJS 服务器通信。在使用 SocketIO (io.connect) 建立的第一个连接完成后，如果我打开一个新选项卡并触发新的登录，例如在应用程序的另一个模块中，它会打开一个与 SocketIO 的新连接。一旦第二个连接成功，第一个 websocket 连接就会关闭（我收到一个“断开连接”事件）。

您知道 SocketIO 库中是否存在阻止服务器与同一台计算机建立多个连接的东西？

如果第一个连接是用 Chrome 建立的，第二个是用 Firefox 建立的，那么行为是相同的。

但是，如果我使用 Safari，这两个连接都会保持活动状态。

很奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:51:08.280

我们最近在使用 Chrome 作为主浏览器的 OSX 计算机上遇到了这个问题，并尝试用 Firefox 打开第二个 websocket。该问题与之前未被接受为 websocket 例外的无效证书有关。如果异常被接受并且已经连接到套接字，这会导致 chrome 浏览器断开连接。一旦 Firefox 接受了无效证书的例外，两个连接都会保留。当然，在存在有效证书的生产环境中，不应出现此问题。

# python - 遍历字典时获取元素数

> ID：13710718
> 
> 赞同：0
> 
> 时间：2012-12-04T19:47:20.217
> 
> 标签：python, dictionary, iterator

假设我有一本像这样的字典：

```
>>> dict = {}
>>> dict[123] = "test1"
>>> dict[456] = "test2"
>>> dict[789] = "test3" 
```

我像这样循环遍历它：

```
>>> for bit in dict.keys():
     print bit 
```

如何确定正在处理哪个元素？我想得到一个输出

```
0
1
2 
```

我怎样才能得到这个？

请指教！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:48:57.033

你可以使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)：

```
d = {...}
for i, bit in enumerate(d):
    print i, bit 
```

但是，请记住，`dict`它不能保证其键的任何特定顺序，因此索引可能没有意义。还有其他类，例如[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)确实保证其键的特定顺序，因此您可能需要使用它们。

另外，不要调用你的变量`dict`，因为这会影响[内置](http://docs.python.org/2/library/functions.html#func-dict)的。

# stack - 低端 ARM (Coretex M0+) 能否运行足够的堆栈来使用 USB wifi 加密狗？

> ID：13710725
> 
> 赞同：0
> 
> 时间：2012-12-04T19:47:33.010
> 
> 标签：stack, arm, wifi, driver

我目前使用成熟的 wifi 模块（如 Roaving 网络 RN-174 或 LS 研究 TiWi 模块 (http://www.lsr.com/wireless-products/tiwi-sl)）与低功率微控制器接口。

然而，低端 ARM（如 Cortex M0+）正在变得非常节能，如果我可以使用更多商业 wifi 加密狗（如[http://www.trendnet.com/products/proddetail.asp? prod=195_TEW-648UBM](http://www.trendnet.com/products/proddetail.asp?prod=195_TEW-648UBM)）并可能受益于额外的节能（我使用的 wifi 模块通常具有 ARM 处理器来运行堆栈和协议的其他部分）。

通常，这些都需要一个运行 LINUX 的处理器和完整的驱动程序实现；我想知道是否存在低端 ARM 驱动 USB wifi 加密狗的驱动程序/堆栈？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:18:30.993

我不知道有任何带有 USB 主机的 M0 或 M0+ 芯片，但它在某些 M3 上可用，例如 NXP 的 LPC17xx 系列。[mbed 模块](http://mbed.org/)中使用了 LPC1768 ，并且有一些可用的 USB 主机实现，包括用于 3G（不是 WiFi）[Vodafone 加密狗](http://mbed.org/users/mbed_official/code/VodafoneUSBModem/)的库。还有一个用于 NXP 芯片的通用 USB 库 - [nxpUSBlib](http://www.lpcware.com/content/project/nxpusblib)。

根据加密狗的不同，有时它可能不仅提供 USB 接口，还提供普通的 UART。在少数情况下，可以在对加密狗进行少量修改后访问 UART 串​​行接口。如果你有这样的接口，你根本就不需要 USB，而且 UART 几乎可以在任何 ARM 上使用，无论多么低端。

请注意，获得 USB 或 UART 连接只是工作的一半——您仍然需要了解如何配置和连接您的特定加密狗。如果它使用 USB CDC/ACM 和 AT 命令之类的标准协议，那很好，但不能保证。有时您必须对专有驱动程序进行逆向工程才能发现神奇的价值。某些模块需要在启动时将固件发送给它们，因此您必须将固件映像存储在某处。虽然如果它有一个 Linux 驱动程序，它很有可能可以工作。

# c++ - 从 QThread 在循环中发出信号

> ID：13710729
> 
> 赞同：2
> 
> 时间：2012-12-04T19:47:49.077
> 
> 标签：c++, multithreading, qt, qthread

我正在开发一种视频播放器，但在实现“播放”功能时遇到问题，其中帧以特定时间间隔显示。

使用按钮或滑块跳过帧可以正常工作，但以下代码不能。此外，它似乎阻塞了 GUI 线程并且只显示最后一帧。

```
void Player::play()
{
    for(int i = currentFrame_; i < replay_->getHeader().numberOfFrames; ++i)
    {
        setFrame(i);    // load and send frame i
        msleep(33);     // wait 33 ms
    }
}

void Player::setFrame(int frameNumber)
{
    currentFrame_ = frameNumber;
    replay_->setCurrentFrame(currentFrame_);    // load currentFrame into buffer
    updateFrame();                              // send it to the GUI to be shown
}

void Player::updateFrame()
{
    ReplayFrame colorFrame;

    colorFrame = replay_->getColorFrame();
    emit colorFrameEvent(static_cast<unsigned char *>(colorFrame.getData()));    // this is connected to MainWindow::showFrame(unsigned char *)
} 
```

请注意，以下代码可以正常工作：

```
// In main window, called upon loading a replay
QObject::connect(ui->sliderFrames, SIGNAL(valueChanged(int)), kp, SLOT(setFrame(int))); 
```

所以移动滑块实际上确实会显示相应的帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:43:20.673

好吧，这当然正在发生……你在 GUI 线程上处于一个紧密的循环中，在循环结束之前永远不会控制消息泵！:-)

之后可能会在您的小部件上同步调用某种更新功能`updateFrame()`，并且您可以观看播放...但是 GUI 仍然会冻结您可能想要按下的按钮*（例如“暂停”）*。

考虑改用计时器，以便 GUI 线程可以在帧之间运行消息泵：

[http://doc.qt.digia.com/qt/qtimer.html](http://doc.qt.digia.com/qt/qtimer.html)

# c++ - 将伪代码转换为 C++

> ID：13710737
> 
> 赞同：1
> 
> 时间：2012-12-04T19:48:34.053
> 
> 标签：c++, pseudocode, markov

我正在尝试了解马尔可夫决策问题，并获得了值迭代算法，但我很困惑如何将它们转换为实际的 C++ 代码。主要是发生求和等的部分。这是算法：

```
function VALUE-ITERATION(P;R) returns a utility matrix
    inputs: P, a transition-probability matrix
            R, a reward matrix
    local variables: U, utility matrix, initially identical to R
                     U', utility matrix, initially identical toR
    repeat
         U <- U'
         for each state i do
             U'(s_i) <-  R(s_i) + max_a Summation_j P^a_ij*U(s_j)
         end
    until max_(s_i) |U(s_i) - U'(s_i)| < e
return U 
```

这对我来说就像象形文字，有没有更简单的算法对我有更大的帮助？或者有人可以为我愚蠢吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:33:50.967

我很容易找到这篇文章：[马尔可夫决策问题的价值迭代和策略迭代算法 [PDF 文件]](http://www.ics.uci.edu/~csp/r42a-mdp_report.pdf)。它更多地解释了正在发生的事情。

从概念上讲，您有一个可以处于多种状态的系统，从一种状态到另一种状态的转换获得奖励，以及有时会导致状态转换的操作。基本思想是不断迭代，直到你得到一个不变的效用矩阵。这就是最终测试所`max_(s_i) | U(s_i) - U'(s_i)| < e`要寻找的。（这里，`e`是 epsilon 的缩写，一个很小的数字，可能应该是一个额外的输入。）

对于每次迭代，您都希望对每个状态采取最佳行动。最好的行动是产生最大回报的行动，按概率加权。就是这样`max_a Summation_j P^a_ij*U(s_j)`做的：找到产生最佳奖励的行动，按概率加权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:12:50.400

我可以翻译点点滴滴，但你的代码中有很多信息只能在上下文中有意义，我们无法知道那个上下文。
~~此外，似乎在此过程中丢失了一些格式，因为 P^a_ij 看起来像是在某个点 P 的 a_i 乘以 j 的幂。~~大卫似乎知道如何解释这个疯狂的部分。
条件循环也用于`|`奇怪的伪代码，但我从字面上理解。

```
utility_matrix VALUE_ITERATION(const probability_matrix& P,
                               const reward_matrix& R)
{
    utility_matrix U(R);
    utility_matrix UP(R);
    do {
        U = UP;
        for(int s_i : ????) //for each state in what?
            UP[s_i] = R[s_i] + ???? //max_a Summation_j P^a_ij*U(s_j)
    while(max(s_i) ???? std::abs(U[s_i] - UP[s_i])<e);
    return U;
} 
```

正如 akira 所说，可以理解的部分很简单，如果你不能做到这些，你可能需要在解决这个问题之前了解更多关于 C++ 的知识。

根据您的评论，我发现 C 代码看起来与您的算法[在这里](http://michaelfromgalway.wordpress.com/)模糊相似。（第 62-76 行）

# php - 停止 .htaccess 发送重定向 (302) 标头

> ID：13710738
> 
> 赞同：0
> 
> 时间：2012-12-04T19:48:42.290
> 
> 标签：php, .htaccess, redirect, curl, http-headers

我正在创建一个 API，并且正在使用外部客户端测试 CRUD 功能。

为了能够跳过URL 中的*index.php*，并且只使用 '.../producer/id' 等，我更改了 .htaccess 文件*（见下文）*中的重定向，该文件可以接受除了 201 之外没有其他标头代码的事实- 创建的可以从服务器发送出去。如果我尝试发送任何其他代码，它会自动变为以下代码：

```
HTTP/1.1 302 Found Date: Tue, 04 Dec 2012 19:42:10 GMT Server: Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 X-Powered-By: PHP/5.3.1 Location: /producers/ Content-Length: 565 Content-Type: application/json 
```

例如下面的 php 代码。如果我添加一个“！” 在 $result 之前，这样语句就会变为 false，else 语句中的标头应该被发送出去，这不会发生。同样，这个 302 标头被发送出去。如果我保持原样发送 201 标头，就像它应该发送的那样。

为什么会这样？

**php:**

```
if ($result) {
    header('HTTP/1.1 201 Created');
        header('Location: /producers/' . $id);
}
else {
    header('HTTP/1.1 500 Internal Server Error');
    header('Location: /producers/' . $id
} 
```

**.ht 访问：**

```
<IfModule mod_rewrite.c>
   RewriteEngine On

    # Allow images and statics to be addressable
    RewriteCond $1 !\.(gif|jpe?g|png|css|js)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # You have to manually change to our username or directory where our controller index is host

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:10:58.317

位置：总是触发一个重定向，它总是一个 3xx 状态码。

如果要输出任何其他代码，请将其附加到其他标头，并且不要发送位置：

```
if ($result) {
    header('HTTP/1.1 201 Created', 201);
} elseif ($errors) {
    header('Location: /theform.php'); // 301 by default
} else {
    header('HTTP/1.1 500 Internal Server Error', 500);
} 
```

# javascript - 搜索包含多个对象和数组的对象的最佳方法

> ID：13710764
> 
> 赞同：0
> 
> 时间：2012-12-04T19:50:19.000
> 
> 标签：javascript, arrays, sorting, object

我已经尝试了几种使用 indexOf 和 if (x in y) 的方法，这些方法似乎都没有完全符合我的要求。

我需要遍历几个对象并根据对象找到特定的数字/时间戳/日期。这是我的对象控制台的屏幕截图。

有什么想法吗？ ![在此处输入图像描述](../Images/016216bae3aa86ca0257df765effb64c.png)

特别是当我第一次获取数据时，我从 API 响应中提取所有时间戳（发布在日期/时间）。使用该时间戳数组，我试图从所有响应中找到最新发布的对象。

以下是更多屏幕截图：

推特`created_at`时间戳 ![Twitter created_at 时间戳](../Images/a051c14a9078115fdeed116fa95c43bb.png)

棒棒哒`timestamp` ![Tumblr 时间戳](../Images/0315a8d5110064eb4b5cd97684c0d0b7.png)

和我的日期数组 ![在此处输入图像描述](../Images/df13f858f5de66927b708e07b214374f.png)

我的代码用来提取信息并对其进行排序。

```
//AJAX CALLS
$.when(
    //Bitter Syndrome
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "http://api.tumblr.com/v2/blog/"+bittersymdrome_tumblr+"/posts/?api_key="+tumblr_apiKey,
        success: function(data){
            delete data.meta; delete data.response.blog;
            blogs.content.push(data);
        }
    }),

    //moundsMusic Tumblr
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "http://api.tumblr.com/v2/blog/"+moundsmusic_tumblr+"/posts/?api_key="+tumblr_apiKey,
        success: function(data){
            delete data.meta; delete data.response.blog;
            blogs.content.push(data);
        }
    }),

    //GateWayDrugSTL Tumblr
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "http://api.tumblr.com/v2/blog/"+gatewaydrug_tumblr+"/posts/?api_key="+tumblr_apiKey,
        success: function(data){
            delete data.meta; delete data.response.blog;
            blogs.content.push(data);
        }
    }),

    //GateWayDrugSTL Twitter
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "http://api.twitter.com/1/statuses/user_timeline.json?user_id="+gatewaydrug_twitter,
        success: function(data){
            blogs.content.push( data );
            /*var time = data[0].created_at;
            gwdtwDate = Date.parse(time)/1000;*/
        }
    })
).done( function(){
    //Get and Sort Dates most recent first.
    for(var i=0;i<blogs.content.length;i++){
        if(!blogs.content[i].length){
            for(var e=0; e<blogs.content[i].response.posts.length; e++){
                blogs.dates.push(blogs.content[i].response.posts[e].timestamp);
            }
        } else {
            for (var e = 0; e<blogs.content[i].length; e++){
                var time = blogs.content[i][e].created_at;
                gatewaydrug_twitter_date = Date.parse(time)/1000;
                blogs.dates.push(gatewaydrug_twitter_date);
            }
        }
    }
    blogs.dates.sort(function(a,b){return b-a});
    console.log( blogs );

    for(var i=0,len=blogs.dates.length; i<len;i++){

    }
}); 
```

[这](http://thehivestl.com/test/)是一个测试服务器的实时链接，您可以在浏览器控制台中查看该对象：http: [//thehivestl.com/test/](http://thehivestl.com/test/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:52:47.213

不要在同一个数组中混合不同的对象类型，而是先规范化它们。此外，您不需要使用全局`blogs`变量，而是正确使用 Deferreds。

```
function handleTumblrResponse(data) {
    delete data.meta;          // actually, you don't
    delete data.response.blog; // need those
    var resultdates = [];
    for (var e=0; e<data.response.posts.length; e++)
        resultdates.push(data.response.posts[e].timestamp);
    return resultdates;
}
function handleTwitterResponse(data) {
    var resultdates = [];
    for (var e = 0; e<data.length; e++){
        var timesting = data[e].created_at;
        var date = Date.parse(time)/1000;
        resultdates.push(date);
    }
    return resultdates;
}
$.when(
    // those get… functions are the plain ajax calls, no success handlers
    getBitterSyndromeAjax().then(handleTumblrResponse),
    getMoundsMusicTumblr().then(handleTumblrResponse),
    getGateWayDrugSTLTumblr().then(handleTumblrResponse),
    getGateWayDrugSTLTwitter().then(handleTwitterResponse)
).done(function(bitterSyndrom, moundsMusic, drugsTumb, drugsTwit) {
    // concat the four arrays to one
    var dates = Array.prototype.concat.apply([], arguments);
    dates.sort(function(a,b){return b-a});
    // do something with the timestamps
}); 
```

顺便说一句，我很确定 Date.parse 无法处理那种奇怪的 Twitter 格式。相反，使用

```
function fromDateString(str) {
    var res = str.match(/(\S{3})\s(\d{2})\s(\d+):(\d+):(\d+)\s(?:([+-])(\d\d)(\d\d)\s)?(\d{4})/);
    if (res == null)
        return NaN; // or something that indicates it was not a DateString
    var time = Date.UTC(
      +res[9],
      {"Jan":0,"Feb":1,"Mar":2, …, "Dec":11}[res[1]] || -1,
      +res[2],
      +res[3],
      +res[4],
      +res[5], 
    );
    if (res[6] && res[7] && res[8]) {
        var dir = res[6] == "+" ? -1 : 1,
            h = parseInt(res[7], 10),
            m = parseInt(res[8], 10);
        time += dir * (h*60+m) * 60000;
    }
    return time;
} 
```

# java - NSOpenPanel 挂起 java 应用程序

> ID：13710767
> 
> 赞同：1
> 
> 时间：2012-12-04T19:50:21.980
> 
> 标签：java, macos, cocoa, java-native-interface

我有一个`Swing`应用程序并进行`JNI`方法调用以打开`NSOpenPanel`. 在某些计算机上（不幸的是，我没有发现它们之间的相似之处）它完全挂起应用程序。在大多数计算机上它都能正常工作。如果代码将应用程序挂在特定的 Mac 上，它会在每次执行时都挂起。

这是我打开 NSOpenPanel 的方法：

```
JNF_COCOA_ENTER(env);    
// My helper Obj-c object to make a selector call
OpenFileObject *openFile = [[OpenFileObject alloc] init];    
if ([NSThread isMainThread])
    [openFile showOpenFileDialog];
else
    [JNFRunLoop performOnMainThread:@selector(showOpenFileDialog) on:openFile withObject:nullptr waitUntilDone:TRUE];
// ...Handles results    
JNF_COCOA_EXIT(env); 
```

这是`showOpenFileDialog`方法：

```
NSOpenPanel *panel = [NSOpenPanel openPanel];
[panel setCanChooseFiles:canChooseFiles];
[panel setCanChooseDirectories:canChooseFolders];
[panel setAllowsMultipleSelection:allowMultiSelection];
[panel setAllowedFileTypes:fileTypes];
[panel setTitle:dialogTitle];

if ([panel runModal] == NSFileHandlingPanelOKButton)
    urls = [[panel URLs] copy];
else
    urls = nullptr; 
```

这是一个挂起报告：[https ://gist.github.com/4207956](https://gist.github.com/4207956)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:04:25.907

首先，我怀疑这与您的问题有什么关系，但我会警惕使用`nullptr`and`TRUE`作为参数来`performOnMainThread:...`代替我会做：

`[JNFRunLoop performOnMainThread:@selector(showOpenFileDialog) on:openFile withObject:nil waitUntilDone:YES];`

只是为了安全起见。

从堆栈跟踪中，假设所有堆栈都是一个大堆栈，并且您只是将其分开以添加有关您的辅助对象方法调用的注释，看起来所采用的代码路径是`[NSThread isMainThread]`返回 NO 的路径。这一定意味着它在后台线程上（`__NSThreadPerformPerform`然后正在投标`JNFRunLoop`）。

堆栈永远不会离开 . 的初始化路径`NSOpenPanel`，并且不知何故，在底部深处，它再次访问运行循环的东西。在我看来，似乎发生了某种僵局。

如果`JNFRunLoop`在另一个线程中等待该`showOpenFileDialog`方法的执行以在主运行循环上完成，并且其中的某些`openPanel`内容试图等待同一运行循环中的内容，则可能会导致死锁。

我不熟悉 Java 和 Cocoa 之间的集成，但是是否有某种方法可以避免在非主线程上执行第一段代码？

或者，您可以尝试使用：

`[openFile performSelectorOnMainThread:@selector(showOpenFileDialog) withObject:nil waitUntilDone:YES];`

在非主线程路径中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T16:45:23.477

我找到了罪魁祸首。问题是由于另一个应用程序起诉了 MacOS 的 Accessibility API。当显示模式对话框时，Java 主框架不响应所需的本机辅​​助功能 API 调用，这会挂起整个应用程序。避免本机模式对话框，解决了这个问题。

例如，对于 NSOpenPanel，我们应该更改`[panel runModal]`为`[panel beginSheetModalForWindow]`. 这解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T03:36:55.823

这个问题可能有更好的解决方案。

死锁是由两个线程相互等待引起的：AppKit 主线程和 AWT 事件线程。调用本机方法的 Java 代码正在 AWT 事件线程上运行。本机方法在等待创建 NSOpenPanel 的代码在 AppKit 主线程上执行时阻塞 AWT 事件线程。同时，其他事件可能会在 AppKit 主线程上处理，如果这些事件涉及 AWT 窗口，则可能会向上调用 Java。由于 Java 更喜欢使用 AWT 在其 UI 上进行操作，因此向上调用可能会在 AWT 事件队列上发布一个事件并阻塞等待该事件被处理。但是只要 AWT 事件线程在您的本机方法中被阻塞，就永远不会处理该事件。因此，陷入僵局。

解决方案是运行从新 Java 线程调用本机方法的 Java 代码，以便阻止此后台线程而不是 AWT 事件线程。如果您的代码必须在需要此计算结果的 AWT 事件线程上运行，请让它创建一个 java.awt.SecondaryLoop 并运行该循环，同时等待调用您的本机方法的线程接收结果。SecondaryLoop 将处理由 upcalls 发布的事件，从而允许 AppKit 主线程继续工作，并最终创建您的 NSOpenPanel。SecondaryLoop 的 javadoc 有一个如何执行此操作的示例。

# r - gsub 名字 姓氏到 FL

> ID：13710768
> 
> 赞同：2
> 
> 时间：2012-12-04T19:50:23.880
> 
> 标签：r, gsub

我想将一系列名称更改为简单的首字母，

假设我有两个名称`c("Ben Franklin", "Millard Fillmore")`，我想将它们子集`c("BF", "MF")`化为 ，我已经阅读了帮助文件，`?gsub`但我无法弄清楚。这里有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:56:32.880

拆分字符串`" "`，然后将`substr`函数应用于每个组件并使用粘贴折叠结果

```
> x <- c("Ben Franklin", "Millard Fillmore")
> sapply(strsplit(x, " "), function(x) paste(substr(x, 1, 1), collapse=""))
[1] "BF" "MF" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:24:28.070

这将删除所有不是大写字母的内容：

```
> s <- c("Ben Franklin", "Millard Fillmore")
> gsub("[^A-Z]", "", s)
[1] "BF" "MF" 
```

如果您根据评论有诸如“Allan McCormick”之类的字符串，则这是一个更复杂的正则表达式：

```
s <- c("Ben Franklin", "Millard Fillmore", "Allen McCormick")
gsub("(.)\\S* *", "\\1", s)
[1] "BF" "MF" "AM" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:57:52.480

只用 gsub

```
 gsub(pattern='(.)(.*)[[:space:]](.)(.*)','\\1\\3',c("Ben Franklin", "Millard Fillmore"))

 "BF" "MF" 
```

# python - 如何使用 pymongo 更新值？

> ID：13710770
> 
> 赞同：75
> 
> 时间：2012-12-04T19:50:32.813
> 
> 标签：python, mongodb, pymongo

我有一个这种形式的 mongodb 集合：

```
{id=ObjectId(....),key={dictionary of values}}
where dictionary of values is {'a':'1','b':'2'.....} 
```

设值字典为`'d'`。我需要更新`'d'`. 即我想更改`'a':'1'`为`'a':'2'` 我如何在 pymongo 中执行此操作？

代码是这样的：

```
productData is a collection in mongoDB
for p in productData.find():
     for k,v in p.iteritems():
         value=v['a']
         value=value+1
         v['a']=value 
```

现在在 productData 中反映新值。

这是我尝试过的，它引入了一个新的键值对而不是更新

```
for p in productData.find():
    for k,v in p.iteritems():
         value=v['a']
         value=value+1
         v['a']=value
         productData.update({'_id':mongoId},{"$set":{'d.a':'100'}},upsert=False) 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-12-04T20:11:47.307

如果要将文档的值设置为任意值，可以使用 $set 语法。如果属性已存在于文档中，这将更新值，如果不存在，则创建它。如果您需要像您描述的那样在字典中设置单个值，您可以使用点符号来访问子值。

如果 p 是检索到的对象：

```
existing = p['d']['a'] 
```

***对于 pymongo 版本 < 3.0***

```
db.ProductData.update({
  '_id': p['_id']
},{
  '$set': {
    'd.a': existing + 1
  }
}, upsert=False, multi=False) 
```

***对于 pymongo 版本 >= 3.0***

```
db.ProductData.update_one({
  '_id': p['_id']
},{
  '$set': {
    'd.a': existing + 1
  }
}, upsert=False) 
```

但是，如果您只需要增加该值，则当多个请求可能同时运行时，这种方法可能会引入问题。相反，您应该使用 $inc 语法：

***对于 < 3.0 的 pymongo 版本：***

```
db.ProductData.update({
  '_id': p['_id']
},{
  '$inc': {
    'd.a': 1
  }
}, upsert=False, multi=False) 
```

***对于 pymongo 版本 >= 3.0：***

```
db.ProductData.update_one({
  '_id': p['_id']
},{
  '$inc': {
    'd.a': 1
  }
}, upsert=False) 
```

这确保您的增量将始终发生。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-29T04:19:59.607

使用我的 pymongo 版本：3.2.2 我做了以下事情

```
from bson.objectid import ObjectId
import pymongo

client = pymongo.MongoClient("localhost", 27017)
db = client.mydbname

db.ProductData.update_one({
  '_id': ObjectId(p['_id']['$oid'])
},{
  '$set': {
    'd.a': existing + 1
  }
}, upsert=False) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-05T15:30:05.140

我最近做了一些事情，希望对你有帮助。我有一个字典列表，想为一些现有文档添加一个值。

```
for item in my_list:
    my_collection.update({"_id" : item[key] }, {"$set" : {"New_col_name" :item[value]}}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-05T16:14:56.673

在 Python 中，运算符（例如，`$set`）应该用引号引起来：

```
db.ProductData.update(
    {'fromAddress': 'http://localhost:7000/'},
    {'$set': {'fromAddress': 'http://localhost:5000/'}},
    {'multi': True}
) 
```

# ffmpeg - FFMPEG 错误 AVI 到 FFV1

> ID：13710774
> 
> 赞同：0
> 
> 时间：2012-12-04T19:50:44.943
> 
> 标签：ffmpeg, transcoding

使用 FFMPEG 进行转码时遇到以下错误。据我所知，我不应该再输入参数或任何东西。我尝试添加标志“-coder 1”，这给了我一个文件，但视频是一个实心的绿色块。

这是我的命令：

```
ffmpeg -i Glueck_Newsreel.avi -vcodec ffv1 -acodec pcm_s16le mp0001.mkv 
```

这是输出

```
ffmpeg version 0.10.4 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jul 21 2012 10:40:08 with gcc 4.4.6 20110731 (Red Hat 4.4.6-3)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic' --enable-bzlib --disable-crystalhd --enable-gnutls --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopenjpeg --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libx264 --enable-libxvid --enable-x11grab --enable-avfilter --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      51\. 35.100 / 51\. 35.100
  libavcodec     53\. 61.100 / 53\. 61.100
  libavformat    53\. 32.100 / 53\. 32.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 61.100 /  2\. 61.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  6.100 /  0\.  6.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, avi, from 'Glueck_Newsreel.avi':
  Duration: 00:09:45.11, start: 0.000000, bitrate: 226508 kb/s
    Stream #0:0: Video: v210 (v210 / 0x30313276), yuv422p10le, 720x486, 29.97 fps, 29.97 tbr, 29.97 tbn, 29.97 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 48000 Hz, 2 channels, s16, 1536 kb/s
File 'mp0001.mkv' already exists. Overwrite ? [y/N] y
w:720 h:486 pixfmt:yuv422p10le tb:1/1000000 sar:0/1 sws_param:
[ffv1 @ 0x13c8340] bits_per_raw_sample of more than 8 needs -coder 1 currently
Output #0, matroska, to 'mp0001.mkv':
    Stream #0:0: Video: ffv1, yuv422p10le, 720x486, q=2-31, 200 kb/s, 90k tbn, 29.97 tbc
    Stream #0:1: Audio: none, 48000 Hz, 2 channels, s16, 128 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (v210 -> ffv1)
  Stream #0:1 -> #0:1 (pcm_s16le -> pcm_s16le)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:33:44.490

感谢您包含控制台输出。重要的信息是：

```
[ffv1 @ 0x13c8340] bits_per_raw_sample of more than 8 needs -coder 1 currently 
```

这意味着您必须添加`-coder 1`为输出选项。但是，最近 ffv1 进行了大量[工作](http://git.videolan.org/?p=ffmpeg.git;a=history;f=libavcodec/ffv1.c)和[更新](http://git.videolan.org/?p=ffmpeg.git;a=history;f=libavcodec/ffv1enc.c)，因此您可能想要使用更新的 ffmpeg。

# excel-2010 - 不使用偏移量的 Excel/Powerpoint 动态条形图

> ID：13710776
> 
> 赞同：0
> 
> 时间：2012-12-04T19:50:47.660
> 
> 标签：excel-2010, bar-chart

如何让 Excel 或 PowerPoint 堆叠条形图不显示 #N/As？我有这样的数据

日期销售网

12 年 1 月 1.5 .5

2 月 12 日 2.6 1.5

# 啦〜啦〜啦

# 啦〜啦〜啦

我有 N?As 在数据范围内，因为它们可能会在某个时候获取数据，因此是动态的。我不想使用偏移量，因为它在 Powerpoint 中创建的图表中效果不佳。有超过 125 张幻灯片和 100 多张图表，因此手动更改并不好。我在 Powerpoint 中创建图表，然后在图表后面添加指向数据页面的链接。更新很好，但是在断开所有这些链接之后（我有一个宏），命名范围的偏移量将不会更新，因为公式需要一个工作表名称（如 Sheet1！），但 Powerpoint 将其称为“Microsoft PowerPoint 中的图表” .

我希望我已经解释得够多了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:04:01.603

由于我无法使用偏移量或命名范围来获得良好效果，因此我创建了这个 PPT 宏来重置数据中的数据范围 1) 任何不绘制图表的数据行的 x 轴值为零而不是 #N /A 2) 在数据表的 F1 中必须计算图表的行数，使用 countif not = 0 3) 命名图表，我使用 StackedBar1 运行宏

如果有人有更简单的解决方案，请告诉我。

```
Sub C_SetSourceData_StackedBar()
Dim s As Slide
Dim shp As Shape

For Each s In ActivePresentation.Slides   'moves through all slides in presentation
For Each shp In s.Shapes                  'moves through each shape on slide
    If shp.Name = "StackedBar1" Then      ' stacked bar chart that needs source data updated is named this

        Set c = shp.Chart                 'set c to the chart object

        Dim data As ChartData
        Set data = c.ChartData             'sets data to the chartdata behind the chart
        data.Activate                       'need to activate the chartdat(excel sheet)

            'in cell F1 the formula =countif(A1:A50,"<>0")  this counts the rows that are not zero
        x = data.Workbook.Worksheets(1).Range("F1").Value  'gets the last row number of data not zero
        Let rng = "Sheet1!$A$1:$E$" & x                    ' creates the source range as a string

       c.SetSourceData (rng)                               ' Sets the new source data range

        data.Workbook.Close                                 ' Close the chartdata workbook
    End If
Next shp
Next s
End Sub 
```

# ruby-on-rails - 在 rspec 测试中无法将符号转换为整数

> ID：13710778
> 
> 赞同：1
> 
> 时间：2012-12-04T19:50:54.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

我正在编写一个简单的测试来检查我的控制器是否工作，但是我的测试不断返回

```
3) PasswordResetsController for checking update succeeds 
 Failure/Error: put :update, id: @user.password_reset_token
 TypeError:
   can't convert Symbol into Integer
 # ./app/controllers/password_resets_controller.rb:23:in `update'
 # ./spec/controllers/password_resets_controller_spec.rb:52:in `block (3 levels) in 
 <top (required)>' 
```

我的测试如下...

```
describe PasswordResetsController do

before do
  @user = FactoryGirl.create( :user )
end

context "for checking update succeeds" do
  before do
    @user.password_reset_token = "gB5KGF-3hC4RNHCK5niz9A"
    @user.password_reset_sent_at = Time.zone.now
    @user.save!(validate: false) 
    put :update, id: @user.password_reset_token
  end

  it { should assign_to(:user) }      
  it { should respond_with(:redirect) }
  it { should redirect_to(signin_path) }
  it { should set_the_flash.to("Password has been reset.")}

end

end 
```

这是我的模型的链接[https://github.com/thejourneydude/template/blob/master/app/models/user.rb](https://github.com/thejourneydude/template/blob/master/app/models/user.rb)

编辑：看来问题出在我的控制器上。在我的本地服务器上，我返回

```
TypeError in PasswordResetsController#update

can't convert Symbol into String

Rails.root: /home/jason/ror/template
Application Trace | Framework Trace | Full Trace

app/controllers/password_resets_controller.rb:19:in `update' 
```

我的控制器代码中的更新操作是..

```
def update
  @user = User.find_by_password_reset_token!(params[:id])
  if @user.password_reset_sent_at && @user.password_reset_sent_at > 2.hours.ago
    redirect_to new_password_reset_path, flash: { error: "Password reset has expired" }
  elsif @user.update_attributes(params[:user])
    redirect_to root_url, flash: { success: "Password has been reset." }
  else 
    render :edit, flash: { error: "Hmm.. something went wrong. Let's try that again." }
  end
end 
```

我的代码有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:27:30.127

如果更改此行会发生什么：

```
redirect_to new_password_reset_path, flash[:error] = "Password reset has expired" 
```

到：

```
redirect_to new_password_reset_path, flash: { error: "Password reset has expired" } 
```

?

我的猜测是你应该不能调用`flash[:error] =`，`redirect_to`因为 Ruby 中的赋值返回被赋值的值。 `redirect_to`需要哈希作为第二个参数，但它被称为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:18:57.587

你没有传递 :user 参数，所以也许这一行会给你一个错误：

```
elsif @user.update_attributes(params[:user]) 
```

尝试做：

```
before do
  put :update, :id => @user.password_reset_token, :user => valid_user_attributes
end 
```

将 valid_user_attributes 设置为您想要的更新，例如 { 'email' => 'new_email@xx' }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:03:59.163

尝试将 id: 更改为 :id，如下所示：

```
before do
   put :update, :id => @user.password_reset_token
 end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T04:32:58.597

你真的在用`describe "tests controller"`吗？如果是这样，您可以尝试将其更改为`describe TestsController`或`describe UsersController`（以适当的为准），以便 RSpec 知道正在测试的控制器。

否则，您可以从异常消息中发布完整的回溯吗？

# html - 具有不同控件的单选选择器 HTML Jquery Mobile

> ID：13710779
> 
> 赞同：0
> 
> 时间：2012-12-04T19:50:57.097
> 
> 标签：html, jquery-mobile

如何创建 html 以对标签以外的不同控件进行单选选择？我想选择一个下拉列表或一组文本输入。

我正在寻找一种在下拉列表前添加单选按钮和在文本输入前添加单选按钮的方法。所以我可以判断用户是想通过下拉菜单输入数据还是通过文本框输入数据

我不确定如何为此设置标记？

![在此处输入图像描述](../Images/198af705751b0a26ef6696203442bbad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:08:01.903

这是我提到的另一个例子：http: [//jsfiddle.net/pQfDm/5/](http://jsfiddle.net/pQfDm/5/)

**HTML**

```
<html>
    <head>
        <title>Radio Selectors</title>
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-role="header">
                <h2>Header Bar</h2>
            </div>
            <div data-role="content">
                <form>
                    <div class="ui-grid-a">
                        <div class="ui-block-a" style="width: 15%; padding-right: 10px">
                            <fieldset data-role="controlgroup">
                                <input type="radio" name="radio-choice" id="radio-choice-1" />
                                <label for="radio-choice-1" data-iconpos="notext">Choice 1</label>
                            </fieldset>
                        </div>
                        <div class="ui-block-b" style="width: 85%">
                            <input type="text">
                        </div>
                    </div>
                    <div class="ui-grid-a">
                        <div class="ui-block-a" style="width: 15%; padding-right: 10px">
                            <fieldset data-role="controlgroup">
                                <input type="radio" name="radio-choice" id="radio-choice-2" />
                                <label for="radio-choice-2" data-iconpos="notext">Choice 2</label>
                            </fieldset>
                        </div>
                        <div class="ui-block-b" style="width: 85%">
                            <select name="select-choice-0" id="select-choice-0" data-theme="b">
                                <option value="standard">Standard: 7 day</option>
                                <option value="rush">Rush: 3 days</option>
                                <option value="express">Express: next day</option>
                                <option value="overnight">Overnight</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div data-role="footer">
                <h4>Page Footer</h4>
            </div>
        </div>
    </body>
</html> 
```

**查询**

```
$(document).ready(function() {
    $("input[name='radio-choice']").click(function() {
        $("input[name='radio-choice']").each(function() {
            $(this).removeAttr("checked");
        });
        $(this).attr("checked", "checked");
        $("input[type='radio']").checkboxradio("refresh");
    });
}); 
```

您可以添加到 JQuery 以在选中/未选中 Radio 时启用/禁用元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:17:49.053

看看这个例子：http: [//jsfiddle.net/Twisty/pQfDm/](http://jsfiddle.net/Twisty/pQfDm/)

布局网格可以在这里为您提供帮助：

```
<html>
    <head>
        <title>Radio Selectors</title>
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-role="header">
                <h2>Header Bar</h2>
            </div>
            <div data-role="content">
                <form>
                    <div class="ui-grid-a">
                        <div class="ui-block-a" style="width: 15%; padding-right: 10px">
                            <fieldset data-role="controlgroup">
                                <input type="radio" name="radio-choice" id="radio-choice-1" />
                                <label for="radio-choice-1" data-iconpos="notext">Choice 1</label>
                            </fieldset>
                        </div>
                        <div class="ui-block-b" style="width: 85%">
                            <input type="text">
                        </div>
                    </div>
                    <div class="ui-grid-a">
                        <div class="ui-block-a" style="width: 15%; padding-right: 10px">
                            <fieldset data-role="controlgroup">
                                <input type="radio" name="radio-choice" id="radio-choice-1" />
                                <label for="radio-choice-1" data-iconpos="notext">Choice 1</label>
                            </fieldset>
                        </div>
                        <div class="ui-block-b" style="width: 85%">
                            <select name="select-choice-0" id="select-choice-0" data-theme="b">
                                <option value="standard">Standard: 7 day</option>
                                <option value="rush">Rush: 3 days</option>
                                <option value="express">Express: next day</option>
                                <option value="overnight">Overnight</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div data-role="footer">
                <h4>Page Footer</h4>
            </div>
        </div>
    </body>
</html> 
```

# asp.net-mvc - 保存具有相关列表数据的域模型

> ID：13710781
> 
> 赞同：0
> 
> 时间：2012-12-04T19:51:08.170
> 
> 标签：asp.net-mvc, domain-driven-design

我有这个实体：

```
public class Task
{
     public int Id {get;set;}
     public string Title {get;set;}
     public List<User> Users{get;set;}
} 
```

假设在我的操作中，我从我的视图中获得了一个任务和一个带有用户 ID 的列表，那么用相关数据保存这个对象的正确方法是什么：

```
public ActionResult Save(Task task, List<int> users)
{
     _repository.Save(task, users) //should I do it?
}

//or it?
public ActionResult Save(Task task, List<int> users)
{
     task.Users = _userRepository.GetAllUsers(users);
     _repository.Save();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:22:21.097

了解存储库中发生的情况可能会有所帮助，但通常，存储库不应调用实体上的任何类型的行为。它应该只负责持久性和重构。一个典型的工作流程如下：

1.  实体由 ID 加载。
2.  在传递了所需参数的实体上调用行为。
3.  更改已提交 - 通过在存储库上的显式保存或通过提交环境事务和工作单元。

此代码可以直接在 MVC 控制器中，也可以在控制器引用的应用程序服务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:46:50.687

问题不清楚，但我会做以下事情。如果您比较这两位代码，第一位将对其他人更具可读性，并且它封装了用户不需要知道的所有设置工作。

但是，我不会将其命名为“保存”，它不够具体。

```
_repository.Save(task, users) 
```

# javascript - 仅在上午 9:00 - 11:00 之间显示图像的 Javascript 或 JQuery 代码？

> ID：13710784
> 
> 赞同：-1
> 
> 时间：2012-12-04T19:51:21.390
> 
> 标签：javascript, time

根据用户的当地时间，我需要一个 Javascript 或 JQuery 代码，以便仅在每天上午 9:00 至上午 11:00 之间在网页上显示图像。

换句话说，基于时间的显示 div javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:57:12.553

很简单，通过[`Date.getHours()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)，检查它是否在 9 和 11 之间。

```
// Current local hour via new Date().getHours();
var h = new Date().getHours();
if (h >= 9 && h < 11) {
  yourElement.style.display = 'block';
}
else {
  yourElement.style.display = 'none';
} 
```

或 jQuery：

```
if (h >= 9 && h < 11) {
  $(yourSelector).show();
}
else {
  $(yourSelector).hide();
} 
```

# facebook - Facebook IOS SDK 错误：+[FBSession activeSession]：无法识别的选择器发送到类 0xbfc94'

> ID：13710787
> 
> 赞同：1
> 
> 时间：2012-12-04T19:51:46.023
> 
> 标签：facebook, facebook-ios-sdk

我试图让人们使用 Facebook 登录。

我收到以下错误：

```
* Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[FBSession activeSession]: unrecognized selector sent to class 0xbfc94' 
```

不知道为什么。

我按照这里的说明操作： [https ://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

将 Facebook SDK 集成到我的应用程序中。

我究竟做错了什么？

# ios - UIActionSheet showFromRect 自动旋转

> ID：13710789
> 
> 赞同：6
> 
> 时间：2012-12-04T19:51:56.867
> 
> 标签：ios, ios5

我正在展示`UIActionSheet`这样的：

```
-(void)accessoryPressed:(id)sender{
    //Omitted unnecessary objects

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:titleString delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Upload", nil];
    //actionSheet.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    actionSheet.tag = ((UIButton*)sender).tag;
    [actionSheet showFromRect:[(UIButton*)sender frame] inView:[(UIButton*)sender superview] animated:YES];
} 
```

`sender`对象`UIButton`嵌入在 a的`UITableViewCell`附件视图中的位置。

问题是当 iPad 旋转时，操作表没有调整大小（我不希望它实际调整大小，但我希望它位于正确的 X、Y 中）我尝试将 AutoResizingMask 设置为 FlexibleLeft 和 FlexibleTop 但它没有似乎改变了。

**有没有人知道如何让 actionSheet 指向`accessoryView`自动旋转后？**

这是它的样子：

旋转前- ![旋转前](../Images/1940e3fa4704a5c943981f330d744933.png)

旋转后 - ![在此处输入图像描述](../Images/5ddf02b0046436e55e9b2e82f240a6df.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:59:50.980

很遗憾`UIKit`没有为我们妥善处理这个问题。在我自己的应用程序中，我通过`didRotateFromInterfaceOrientation:`在视图控制器中实现该方法来处理此问题，并使用更新的视图框架再次重新显示任何弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T20:56:46.520

我对此的解决方案是对@rmaddy 的广义变体。这有点复杂，但如果您想要一个通用的解决方案来获取轮换回调，这可能会有所帮助。我有一个主容器视图控制器（如果需要，可以将其视为 UINavigationController 的子类），我在其中实现：

```
- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
{
    [[SMRotation session] viewControllerWillRotate];
}

- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;
{
    [[SMRotation session] viewControllerDidRotate];
} 
```

在我需要它的类（通常是非视图控制器类）中，我注册了回调。例如，

```
[[SMRotation session].willRotate addTarget:popTip withSelector:@selector(willRotateHelp)];
[[SMRotation session].didRotate addTarget:popTip withSelector:@selector(didRotateHelp)]; 
```

SMRotation 类如下：

```
//
//  SMRotation.h
//  Petunia
//
//  Created by Christopher Prince on 5/10/15.
//  Copyright (c) 2015 Spastic Muffin, LLC. All rights reserved.
//

// The reason for this class is because I don't, in general, appear to be able to get willRotate notifications from iOS. UIDevice only seems to support didRotate notifications.

#import <Foundation/Foundation.h>
#import "NSObject+TargetsAndSelectors.h"

@interface SMRotation : NSObject

+ (instancetype) session;

// Call these back from the same named methods in your main view controller.
- (void) viewControllerWillRotate;
- (void) viewControllerDidRotate;

// Use these in other classes to get rotation callbacks. There are no parameters passed to the callbacks.
@property (nonatomic, strong, readonly) NSObject<TargetsAndSelectors> *willRotate;
@property (nonatomic, strong, readonly) NSObject<TargetsAndSelectors> *didRotate;

@end 
```

和

```
//
//  SMRotation.m
//  Petunia
//
//  Created by Christopher Prince on 5/10/15.
//  Copyright (c) 2015 Spastic Muffin, LLC. All rights reserved.
//

#import "SMRotation.h"

@interface SMRotation()
@property (nonatomic, strong) NSObject<TargetsAndSelectors> *willRotate;
@property (nonatomic, strong) NSObject<TargetsAndSelectors> *didRotate;
@end

@implementation SMRotation

+ (instancetype) session;
{
    static SMRotation* s_sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        s_sharedInstance = [self new];
        [s_sharedInstance setup];
    });

    return s_sharedInstance;
}

- (void) setup;
{
    self.willRotate = [NSObject new];
    [self.willRotate resetTargets];
    self.didRotate = [NSObject new];
    [self.didRotate resetTargets];
}

- (void) viewControllerWillRotate;
{
    [self.willRotate forEachTargetInCallbacksDo:^(id target, SEL selector, NSMutableDictionary *dict) {
        [target performVoidReturnSelector:selector];
    }];
}

- (void) viewControllerDidRotate;
{
    [self.didRotate forEachTargetInCallbacksDo:^(id target, SEL selector, NSMutableDictionary *dict) {
        [target performVoidReturnSelector:selector];
    }];
}

@end 
```

TargetsAndSelectors 类别如下：

```
//
//  NSObject+TargetsAndSelectors.h
//  Petunia
//
//  Created by Christopher Prince on 5/11/15.
//  Copyright (c) 2015 Spastic Muffin, LLC. All rights reserved.
//

#import <Foundation/Foundation.h>

// Allow an object to have a collection of target's, and selectors that can be called as needed.

@protocol TargetsAndSelectors <NSObject>

// The only reason I have made all of these optional is to avoid the compiler complaining. I'm using this protocol just to document the fact that I'm making these methods available (through the NSObject (TargetsAndSelectors) category) in a particular class.
@optional

// Clear all target/selector's. This method must be called *before* any call to addTarget or to other methods of this category, for a particular instance.
- (void) resetTargets;

/**
 *  Add/remove a callback.
 *
 *  @param target Target object.
 *  @param selector Method to call on the target object.
 *
 *  @return Dictionary that was just added to the callbacks property for this target and selector.
 */
- (NSMutableDictionary *) addTarget: (id) target withSelector: (SEL) selector;
- (void) removeTarget: (id) target withSelector: (SEL) selector;

/**
 *  Convenience method to enable calling each of the callbacks in sequence.
 */
- (void) forEachTargetInCallbacksDo: (void (^)(id target, SEL selector, NSMutableDictionary *dict)) block;

// Elements are NSMutableDictionary's, with keys:
// Value of this is a target (id) embedded in a WeakRef object, so that if the target is deallocated, we don't retain a reference that object.
#define TARGETS_KEY_WEAK_TARGET @"weakTarget"
// Value of this is formatted as an NSString
#define TARGETS_KEY_SELECTOR @"selector"
@property (nonatomic, strong, readonly) NSArray *callbacks;

@end

@interface NSObject (TargetsAndSelectors)<TargetsAndSelectors>
@end 
```

和

```
//
//  NSObject+TargetsAndSelectors.m
//  Petunia
//
//  Created by Christopher Prince on 5/11/15.
//  Copyright (c) 2015 Spastic Muffin, LLC. All rights reserved.
//

#import "NSObject+TargetsAndSelectors.h"
#import <objc/runtime.h>
#import "WeakRef.h"

@implementation NSObject (TargetsAndSelectors)

static char kCallbacksKey;

- (void) setCallbacks:(NSArray *)callbacks
{
    objc_setAssociatedObject(self, &kCallbacksKey, callbacks, OBJC_ASSOCIATION_RETAIN);
}

- (NSArray *) callbacks
{
    NSArray *theCallbacks = (NSArray *) objc_getAssociatedObject(self, &kCallbacksKey);
    return theCallbacks;
}

- (void) resetTargets
{
    self.callbacks = [NSMutableArray new];
}

- (NSMutableArray *) mutableCallbacks
{
    NSMutableArray *mutableCallbacks = (NSMutableArray *) self.callbacks;
    return mutableCallbacks;
}

- (NSMutableDictionary *) addTarget: (id) target withSelector: (SEL) selector;
{
    WeakRef *weakTarget = [WeakRef toObj:target];

    NSMutableDictionary *dict = [@{TARGETS_KEY_WEAK_TARGET: weakTarget,
                                   TARGETS_KEY_SELECTOR: NSStringFromSelector(selector)} mutableCopy];
    [[self mutableCallbacks] addObject:dict];
    return dict;
}

- (void) removeTarget: (id) target withSelector: (SEL) selector;
{
    NSString *stringSelector = NSStringFromSelector(selector);
    NSDictionary *dictToRemove = nil;

    for (NSDictionary *dict in [self mutableCallbacks]) {
        NSString *dictSelectorString = dict[TARGETS_KEY_SELECTOR];
        WeakRef *weakTarget = dict[TARGETS_KEY_WEAK_TARGET];
        if (weakTarget.obj == target && [dictSelectorString isEqualToString:stringSelector]) {
            dictToRemove = dict;
            break;
        }
    }

    if (dictToRemove) {
        [[self mutableCallbacks] removeObject:dictToRemove];
    }
}

- (void) forEachTargetInCallbacksDo: (void (^)(id target, SEL selector, NSMutableDictionary *dict)) block;
{
    // 5/10/15; Making a copy of the callbacks array in case one of the callbacks calls removeTarget above.
    NSArray *copyOfCallbacks = [self.callbacks copy];

    for (NSMutableDictionary *dict in copyOfCallbacks) {
        NSString *dictSelectorString = dict[TARGETS_KEY_SELECTOR];
        SEL selector = NSSelectorFromString(dictSelectorString);

        WeakRef *weakTarget = dict[TARGETS_KEY_WEAK_TARGET];

        // Going to just skip by any target that is nil, i.e., has been deallocated. A better idea would be to remove that target from the array...
        if (weakTarget.obj) {
            block(weakTarget.obj, selector, dict);
        }
    }
}

@end 
```

最后，WeakRef 是：

```
//
//  WeakRef.h
//  Petunia
//
//  Created by Christopher Prince on 9/1/14.
//  Copyright (c) 2014 Spastic Muffin, LLC. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface WeakRef : NSObject

+ (instancetype) toObj: (id) obj;
+ (id) from: (WeakRef *) weakRef;

@property (nonatomic, weak) id obj;

@end 
```

和

```
//
//  WeakRef.m
//  Petunia
//
//  Created by Christopher Prince on 9/1/14.
//  Copyright (c) 2014 Spastic Muffin, LLC. All rights reserved.
//

#import "WeakRef.h"

@implementation WeakRef

+ (instancetype) toObj: (id) obj;
{
    WeakRef *result = [WeakRef new];
    result.obj = obj;
    return result;
}

+ (id) from: (WeakRef *) weakRef;
{
    return weakRef.obj;
}

@end 
```

猜猜其中一些应该放在Github上......

# opengl - 多个视口干扰

> ID：13710791
> 
> 赞同：1
> 
> 时间：2012-12-04T19:52:13.900
> 
> 标签：opengl, viewport

如何实现 2 个视口之间的清晰分离？

我有 2 个视口，一个需要全屏长度，另一个需要小于或等于屏幕尺寸的四分之一（我希望它是地图）。问题是他们一直在干扰，我从大视口中看到了小视口的内容。

这是`display()`我正在使用的功能：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glEnable(GL_LIGHTING);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glViewport(0,0,newWidth,newHeight);
gluPerspective(45,(float)newWidth/(float)newHeight,0.2,500);
//setup view
glMatrixMode(GL_MODELVIEW);

glLoadIdentity();

camera.render(crntMode, radiusNew);

//ground
glColor3f(0.5,0.5,0.5);
draw_ground(50,50,2,2,-2);
...
...
...
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glViewport(newWidth / 2, newHeight / 2, newWidth / 2, newHeight / 2);
gluPerspective(45,(float)newWidth/(float)newHeight,0.2,500);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

camera.render(mini_map, radiusNew);

//ground
glColor3f(0.5,0.5,0.5);
draw_ground(50,50,2,2,-2);
...
...
...
//swap buffers
glutSwapBuffers(); 
```

![两个视口摄像机都在跟随角色，一个是第三人称视角，另一个是自顶向上。 可能更难看到，但小地图视口的背景干扰了大视口（大视口几乎充当了小地图的背景）。 有时大视口会覆盖小视口。](../Images/771f2309ae46cd6d55ed21a5cbea39f6.png)

两个视口摄像机都在跟随角色，一个是第三人称视角，另一个是自顶向上。可能更难看到，但小地图视口的背景干扰了大视口（大视口几乎充当了小地图的背景）。有时大视口会覆盖小视口。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T20:30:09.677

视口不是迷你窗口。视口只不过是主窗口中进行渲染的位置。所有渲染仍然发生在同一个帧缓冲区中。出现问题是因为两个视口都使用相同的深度缓冲区。OpenGL 不知道您希望较大场景中的深度影响较小场景中的渲染。对于 OpenGL，这只是一个场景、一个帧缓冲区。

有很多方法可以纠正这个问题，所有方法都有不同的性能影响/OpenGL 要求：

1.  清除渲染两个场景之间的深度缓冲区`glClear(GL_DEPTH_BUFFER_BIT);`。这是最简单的，但在性能方面成本最高。为了完整起见，我仅在此处列出；你应该改用：

2.  先画出你的大场景。然后将视口设置为较小的场景。关闭深度测试，但保持`glDepthMask`开启。然后绘制一个屏幕对齐的四边形，其 Z 为 -1，其中四边形的范围在 X 和 Y 中为 [-1, 1]。对于投影矩阵和模型视图矩阵，矩阵应该是恒等的。这将有效地清除场景一部分的深度。

    绘制四边形后不要忘记打开深度测试。如果需要，也不要忘记修复您的矩阵。这仅在您绘制到新视口的每个像素时才有效（除非您将四边形的颜色设置为预期的背景颜色）。

3.  先画出你的大场景。然后使用[`glScissor`将剪刀框设置](http://www.opengl.org/wiki/GLAPI/glScissor)为较小的场景，并使用`glEnable(GL_SCISSOR_TEST)`启用剪刀。之后，使用 清除深度缓冲区`glClear(GL_DEPTH_BUFFER_BIT)`。然后禁用剪刀测试并渲染较小的场景。

    这就像#2，除了你不必绘制一个屏幕对齐的四边形。`glClear`启用剪刀测试时尊重剪刀框，因此它只会清除剪刀区域。

    我将其作为替代方案而不是建议的机制提供，因为 OpenGL 实现可能会导致`glClear`行为`glScissor`错误。这应该是首选机制。

4.  使用[深度范围](http://www.opengl.org/wiki/GLAPI/glDepthRange)。这可能会影响您的场景质量，但它可能是最快的（注意：除非您有真正的理由关心，否则您不应该关心。也就是说，只有在分析表明性能存在问题时才这样做）。对于您的主要场景，请使用`glDepthRange(0.1, 1.0)`; 对于您的小场景，请使用`glDepthRange(0.0, 0.1)`.

    这实际上意味着小场景的所有深度值都将在大场景的所有深度值之前。但是，这也意味着您的大场景的深度精度会降低，因此 z-fighting 可能很明显。

    您可以随意移动`0.1`；您可以用 0.5 将范围分成两半，但我个人建议不要这样做。小场景不太重要，z-fighting 在较小的分辨率下不太重要。所以你应该对最重要的场景给予更高的精度。

5.  将小场景渲染[到 FBO 并将其 blit 到屏幕上](http://www.opengl.org/wiki/Framebuffer_Object)。这是最简单的推理。只需创建一些渲染缓冲区，一个用于颜色，一个用于深度。将它们粘贴在帧缓冲区对象中。在那里渲染你的小场景。然后使用[`glBlitFramebuffer`](http://www.opengl.org/wiki/GLAPI/glBlitFramebuffer)将其绘制到默认帧缓冲区中您想要的位置。

还有其他方法，例如使用模板测试，但这些是您可以依赖的方法。

# ruby-on-rails - 如何查找/修复：ArgumentError：UTF-8 中的无效字节序列？

> ID：13710794
> 
> 赞同：0
> 
> 时间：2012-12-04T19:52:23.787
> 
> 标签：ruby-on-rails, ruby, string

我有一个读取客户提供的大型数据文件的应用程序。它与几个完美配合，但在我今天收到的一个文件中，它失败了：

```
ArgumentError: invalid byte sequence in UTF-8 
```

我正在使用 String.match 来查找正则表达式模式。

当我查看文件时，似乎没有什么与有效的文件不同。

建议？

编辑：用户名中似乎有一个“xE9”字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:39:33.243

感谢@muistooshort 的帮助，我以 ISO 模式打开文件，然后逐行读取，转换为 UTF-8。

```
myfile = File.open( 'thefile.txt', 'r:iso8859-1' )
  while rawline = myfile.gets
  line = rawline.force_encoding( 'utf-8' )
  # proceed...
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-17T18:18:00.863

一个说明解决方案的小工作：

```
task :reencode, [:filename] => [:environment] do |t, args|
  myfile = File.open( args[:filename], 'r:iso8859-1' )
  outfile = File.open( args[:filename] + ".out", "w+" )
  while rawline = myfile.gets
    line = rawline.force_encoding( 'utf-8' )
    outfile.write line
  end 
  outfile.close
end 
```

# javascript - 在 javascript 中求和 Float32Array

> ID：13710798
> 
> 赞同：-2
> 
> 时间：2012-12-04T19:52:48.033
> 
> 标签：javascript, arrays

有可能吗？如果可以，怎么做？

我想将多个 float32Arrays 加到一个 float32array 中。

我知道这听起来是一个愚蠢的问题，但事实证明手动执行此操作需要一些时间。

有没有可能让它比这更快？

recBuffers 是一个 float32Array 缓冲区数组，长度约为 6594048

```
function mergeBuffers(recBuffers, recLength){

  var result = new Float32Array(recLength);
  var offset = 0

  for (var i=0; i<recBuffers.length; i++){  
      for (var j=0; j<recBuffers[i].length; j++){
        result[j] += recBuffers[i][j];
      } 
  }
  return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:57:13.540

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Float32Array)：

> 建立后，您可以使用对象的方法或使用标准数组索引语法（即使用括号表示法）引用数组中的元素。

给定两个 float32Arrays`a`和`b`，您可以这样做：

```
var c = new Float32Array(Math.min(a.length, b.length));
for (var i=c.length; i-->0;) c[i] = a[i]+b[i]; 
```

# css - HTML5 进度条 - 浏览器加载大图片

> ID：13710803
> 
> 赞同：0
> 
> 时间：2012-12-04T19:53:16.127
> 
> 标签：css, html, progress-bar

我使用 HTML5 和 CSS 创建了一个大文件图片的幻灯片页面。问题是它们需要大约一分钟才能加载。如果图像尚未完全加载，则幻灯片放映将不会转到下一张幻灯片。

我想添加一个用户在后台加载时看到的进度条。

这是代码的基础：

[http://tutorialzine.com/2010/09/html5-canvas-slideshow-jquery/](http://tutorialzine.com/2010/09/html5-canvas-slideshow-jquery/)

有什么建议么？

我的 JavaScript 知识非常有限，这就是为什么我试图找到 HTML5 和 CSS3 答案的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:14:25.097

一个想法 - 如果你想避免 JS，然后用 css3 将图像旋转到一边，然后裁剪它，使它看起来像一个进度条（你甚至可以添加 CSS 过滤器来使它成为一种颜色）。

当它加载时（由于 CSS 旋转，从左到右而不是从上到下），它看起来像一个“进度”栏。

在没有 JS 的情况下加载它时没有真正的提示方式。

# bash - 如何用 Bash 中另一个变量的值替换变量中的占位符或单词？

> ID：13710806
> 
> 赞同：35
> 
> 时间：2012-12-04T19:53:22.003
> 
> 标签：bash, shell, replace

我正在尝试编写一个简单的 Bash 脚本。我有一个简单的“模板”变量：

```
template = "my*appserver" 
```

然后我有一个函数 ( `get_env()`)，它返回值`dev`、`qa`或`live`。我想调用`get_env`然后用' 的返回值将`template`变量替换为字符串，然后用星号将其换出。`get_env`所以：

```
# Returns "dev"
server = get_env

# Prints "mydevappserver"
template = string_replace(server, template) 
```

或者：

```
# This time, it returns "live"
server = get_env

# Prints "myliveappserver"
template = string_replace(server, template) 
```

我应该用什么来代替这个`string_replace()`函数来完成绑定？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-04T20:16:14.703

Bash 可以自己进行字符串替换：

```
template='my*appserver'
server='live'
template="${template/\*/$server}" 
```

有关字符串替换的更多详细信息，请参阅[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/string-manipulation.html)。

所以对于 bash 函数：

```
function string_replace {
    echo "${1/\*/$2}"
} 
```

并使用：

```
template=$(string_replace "$template" "$server") 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-04T19:57:07.377

例如，可以通过 sed 来实现 bash 脚本中的字符串替换：

```
template=$(echo $template | sed 's/old_string/new_string/g') 
```

这将在模板变量中将 old_string 替换为 new_string。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-04T20:51:28.300

正如没有人提到它，这是一个很酷的可能性，使用`printf`. 占位符必须是`%s`虽然，而不是`*`。

```
# use %s as the place-holder
template="my%sappserver"

# replace the place-holder by 'whatever-you-like':
server="whatever-you-like"
printf -v template "$template" "$server" 
```

完毕！

如果您想要一个函数来做到这一点（并注意所有其他提到函数的解决方案如何使用丑陋的子外壳）：

```
#!/bin/bash

# This wonderful function should be called thus:
# string_replace "replacement string" "$placeholder_string" variable_name
string_replace() {
    printf -v $3 "$2" "$1"
}

# How to use it:
template="my%sappserver"
server="whatever-you-like"

string_replace "$server" "$template" destination_variable

echo "$destination_variable" 
```

完成（再次）！

希望您喜欢它……现在，根据您的需要调整它！

**评论。**似乎这种方法使用`printf`比 bash 的字符串替换稍快。而且这里根本没有 subshel​​l！哇，这是西方最好的方法。

**有趣的。**如果你喜欢有趣的东西，你可以把`string_replace`上面的函数写成

```
string_replace() {
    printf -v "$@"
}

# but then, use as:
string_replace destination_variable "$template" "$server" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T19:59:55.383

是的，要么像其他人所说的那样'sed'，要么从你的模板开始，使用 2 个单独的变量并即时构建。例如

```
templateprefix="my"
templatesuffix="appserver"

server=get_env

template=${templateprefix}${server}${templatesuffix} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-19T07:57:01.377

根据`@Spencer Rathbun`响应，这也可以通过以下方式完成：

```
 function string_replace {
        #DOC: "${string/match/replace}"
        string=$1
        echo "${string/$2/$3}"
    }

    template='my__patternReplacing__appserver'
    match='__patternReplacing__'
    replace='live'

    template=$(string_replace "$template" "$match" "$replace") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-07T03:50:24.807

我需要做这样的事情，但我需要 sed 并且 replace 子句需要包含一个变量。我结束了这个。

其中变量名是 $puttyline

```
sed "s/\(\[remote .origin.\]\)/\1\n$puttyline/" 
```

因此 sed 搜索`[remote "origin"]`并记住匹配项，并在其后插入一行，其中包含变量中的任何内容`$puttyline`。

但是，如果 $puttyline 包含任何 sed 会响应的特殊字符，例如 \ 或 $，这可能会变得很难看。您必须先通过再次调用 sed 来逃避它们，或者......在 bash 中做一些更聪明的事情，我对 bash 太蹩脚了，不知道。例如，要对所有反斜杠进行双重转义：

```
sed 's/\\/\\\\/g' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T18:09:43.163

这是一个将其包装起来的 bash 脚本

### 例子：

```
$ search_and_replace.sh "test me out" "test me" ez
ez out 
```

### search_and_replace.sh

```
#!/bin/bash
function show_help()
{
  echo ""
  echo "usage: SUBJECT SEARCH_FOR REPLACE_WITH"
  echo ""
  echo "e.g. "
  echo ""
  echo "test t a                     => aesa"
  echo "'test me out' 'test me' ez   => ez out"
  echo ""

  exit
}

if [ "$1" == "help" ]
then
  show_help
  exit
fi
if [ -z "$3" ]
then
  show_help
  exit
fi

SUBJECT=$1
SEARCH_FOR=$2
REPLACE_WITH=$3

echo "$SUBJECT" | sed -e "s/$SEARCH_FOR/$REPLACE_WITH/g" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-17T14:24:17.060

网上有很多帖子，但对我来说效果很好的帖子如下。

有两种方法可以实现这一点，如果你想用文件中的另一个字符串替换一个字符串（我的旧字符串是特殊字符:)，那么使用这个：

```
sed -i '/oldtext:/c\newtext: Rahul'  ./printName.txt 
```

其次，如果你想搜索一个字符串，然后用你的变量替换它，那么这样做：

```
#here im concatinating two key + value(myvariable).
firstkey="oldtext: old"

key="newtext: "

value=$(cat ./variableStoredHere.txt)

key+=$value 
```

以下命令的结果将是 oldtext: old

```
echo $firstkey 
```

以下命令的结果将是 newtext: Rahul

```
echo $key 

sed -i "s/$firstkey/$key/g" ./printName.txt 
```

# c - IRC 客户端 while 循环和 scanf()

> ID：13710809
> 
> 赞同：0
> 
> 时间：2012-12-04T19:53:42.563
> 
> 标签：c, loops, while-loop, scanf, irc

这是我在这里的第一个问题。所以，我试图在 C 中创建 IRC 客户端。来自服务器的所有信息都进入缓冲区，并通过 while 循环将所有内容打印到终端。

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char \
    *bot_owner = "Arbarbarabas",
    *nick = "Abuditaragas",
    *serv = "irc.omnitel.net",
    *chan = "#any";

int main() {
    int ret;
    char buf[512];
    char msg[100];
    pid_t pid;
#ifdef _WIN32
    SOCKET sock;
    struct WSAData* wd = (struct WSAData*)malloc(sizeof(struct WSAData));
    ret = WSAStartup(MAKEWORD(2, 0), wd);
    free(wd);
    if (ret) { puts("Error loading Windows Socket API"); return 1; }
#else
    int sock;
#endif
    struct addrinfo hints, *ai;
    memset(&hints, 0, sizeof(struct addrinfo));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;
    if (ret = getaddrinfo(serv, "6667", &hints, &ai)) {
        puts(gai_strerror(ret));
        return 1;
    }
    sock = socket(ai->ai_family, ai->ai_socktype, ai->ai_protocol);
    if (ret = connect(sock, ai->ai_addr, ai->ai_addrlen)) {
        puts(gai_strerror(ret));
        return 1;
    }
    freeaddrinfo(ai);
    sprintf(buf, "USER %s 0 * :%s\r\n", nick, bot_owner);
    send(sock, buf, strlen(buf), 0);
    sprintf(buf, "NICK %s\r\n", nick);
    send(sock, buf, strlen(buf), 0);

    while(1){

        scanf("+inute %s", msg);
        sprintf(buf, "PRIVMSG %s :Someone just spoke to me! %s \r\n", chan, msg);
        send(sock, buf, strlen(buf), 0);

            while (recv(sock, buf, 512, 0) > 0) {
                fputs(buf, stdout);
                if (!strncmp(buf, "PING ", 5)) {
                    buf[1] = 'O';
                    send(sock, buf, strlen(buf), 0);
                    sprintf(buf, "PRIVMSG %s :Asked me PING :O \r\n", chan);
                    send(sock, buf, strlen(buf), 0);
                }
                    if (buf[0] != ':') continue;
                    if (!strncmp(strchr(buf, ' ') + 1, "001", 3)) {
                    sprintf(buf, "MODE %s +B\r\nJOIN %s\r\n", nick, chan);
                    send(sock, buf, strlen(buf), 0);
                } else if (!strncmp(strchr(buf, ' ') + 1, "PRIVMSG", 7)) {
                    if (strncmp(strchr(buf + 1, ':') + 1, nick, strlen(nick))) continue;
                    sprintf(buf, "PRIVMSG %s :Someone just spoke to me!\r\n", chan);
                    send(sock, buf, strlen(buf), 0);
                }
            }
    }

    WSACleanup();

    close(sock);
    return 0;
} 
```

我应该怎么做才能不停止while循环并同时写消息？

编辑：添加了整个代码。

# ios - CommonCrypto 在 IPA 存档中的工作方式与在调试器中不同

> ID：13710810
> 
> 赞同：3
> 
> 时间：2012-12-04T19:53:43.780
> 
> 标签：ios, xcode, cryptography, commoncrypto

我一直在把头发拉出来。我在我的 iOS 应用程序中使用 CommonCrypto 来加密数据，然后我将这些数据发送到解密它的 Windows 服务器。这在我的 iPhone 5 (iOS 6)、iPad 3 (iOS 6) 和模拟器 (Mac OS X 10.8.2) 上的 Xcode (最新版本) 开发环境中完美运行。

我用来加密的非常简单的代码是这样的：

```
 CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES128, // oorspronkelijk 256
                                      keyPtr /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted); 
```

同样，当我从 Xcode 调试时，这很有效。

但是当我构建 IPA（存档文件，即 Apple 为 App Store 审查的文件）并将加密数据发送到 Windows 服务器时，服务器报告“填充无效”。两者之间没有代码差异！

我怀疑 CommonCrypto 在这两种构建模式中有些不同，但我不知道那会是什么。我尝试从 Apple 的开源站点获取 CommonCrypto 库并构建它，目的是将其编译到我的代码中，但我未能成功构建它。

有没有其他人遇到过这个问题？我在这里缺少一些编译器选项吗？

*** 编辑 ***

我找到了导致问题的标志：如果我将“优化级别”设置为“最小/最快”、“最快”、“更快”或“最快” - 它会失败。但是如果我将它设置为“无”，它就可以工作。所以优化中的某些东西导致加密被破坏！

# python - 当前导数字为零时，在python中添加数字的递归函数失败

> ID：13710812
> 
> 赞同：2
> 
> 时间：2012-12-04T19:53:48.067
> 
> 标签：python, recursion

我正在尝试创建一个递归函数，将数字中的所有数字相加。这是我想出的：

```
def sumOfDigits(num):
    num=str(num)
    if len(num)==0:
        return 0
    elif len(num)==1:
        return int(num)
    elif len(num)>1:
        return int(num[0]) + int(num[-1]) + int(sumOfDigits(num[1:-1])) 
```

这似乎适用于几乎任何数字：

```
sumOfDigits(999999999)
>>>81
sumOfDigits(1234)
>>>10
sumOfDigits(111)
>>>3
sumOfDigits(1)
>>>1
sumOfDigits(0)
>>>0 
```

如果数字以“0”开头，就会发生奇怪的事情

```
sumOfDigits(012)
>>>1
sumOfDigits(0123)
>>>11
sumOfDigits(00010)
>>>8 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T19:55:32.047

**在 Python 2 中，以零开头的整数文字是[octal](http://docs.python.org/2/reference/lexical_analysis.html#integer-and-long-integer-literals)**。

举个例子：

```
In [46]: 012
Out[46]: 10

In [47]: 0123
Out[47]: 83

In [48]: 0010
Out[48]: 8 
```

由于您的函数以十进制为基础工作，因此它正在正确地完成它的工作。:)

顺便说一句，对于这个问题，您既不需要字符串操作也不需要递归。由于其他人已经提出了非递归解决方案，这里有一个不使用字符串操作的递归解决方案：

```
def sumOfDigits(n):
   return 0 if n == 0 else sumOfDigits(n // 10) + n % 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:59:40.470

老实说，有一个更简单的方法来完成这件事。

```
sum(map(int, str(num))) 
```

请注意，这并没有解决上面明智地指出的八进制字符串问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:15:36.297

Numbers stats`0`被视为八进制数。

八进制`00010`值为 8 。

有关更多信息，请参阅帖子[二进制数？](https://stackoverflow.com/questions/4485550/binary-numbers).

以 开头的 Python 数字`0`将不起作用。对于八进制数，您必须指定`Oo`将其转换为八进制数。

# algorithm - 计算当前 lat/long/alt + 在 x、y、z 上移动的对象的 lat/long/alt 值

> ID：13710817
> 
> 赞同：0
> 
> 时间：2012-12-04T19:54:04.777
> 
> 标签：algorithm, geometry, coordinates

我以为在 Google 上搜索时会有很多结果，但事实证明，在大多数情况下，就像在 stackoverflow 上一样，问题非常具体，包括 Google 地图、一些 GIS 或椭圆形的现实世界。

就我而言，

*   **我有一个具有 lat、long 和 alt 值的对象**，其中 lat 和 long 是以度为单位的浮点数，而 alt 是作为十进制值的浮点数，表示与球体中心的距离。所以没有分钟（10°30' 是 10,5）。
*   对象在**所有 3 个轴 x、y 和 z**上移动，其中移动相对于其当前位置
*   我**需要计算新的 lat、long 和 alt 值**

没有多想，我首先是这样实现的：

只需将 z 运动添加到 alt，然后计算虚拟球体的周长以获得每单位（米）的度数。有了这个，我首先计算了新的纬度，然后再计算了新的。我知道一个接一个地计算一个值是错误的，但只要我的“对象世界”中的所有计算都以相同的方式完成，整体行为就可以了。我考虑了一些事情，比如当对象绕整个球体旋转时，long 值不会改变，并且绕球体绕半圈在 x 轴上与在 y 轴上不同（x 轴：-180 到 180，y-轴-90到90）和类似的东西，它工作。

但后来我意识到我没有考虑到我计算赤道上每米的度数，也没有考虑其他纬度值。那时我知道事情更复杂，我开始在网上搜索。但是我没有找到适合我需要的算法。现在我确信这已经做过很多次了，所以我在这里问是否有人以前处理过这个话题并且可以指出一个很好的实现:)。

我发现的是这样的：

*   将纬度/经度转换为墨卡托投影的算法
*   用于计算两个纬度/经度值对的距离的半正弦公式
*   其他用途的其他配方师

这对我没有帮助。

对我帮助最大的是：[计算距离另一个纬度/经度点有米远的纬度和经度](https://stackoverflow.com/questions/5857523/calculate-latitude-and-longitude-having-meters-distance-from-another-latitude-lo)

但我想我还没有完全理解它。

*   弧度的课程是什么？（关于我有 x 和 y 运动）
*   外推法不考虑高度/地球半径？

**如果有人可以帮助我，那就太棒了！**

（旁注：我在 Erlang 中实现这个，但这没关系，任何一种算法都会有帮助）

* * *

**更新**

我实现了上面提到的功能以及下面答案中的功能。测试时我得到了错误的值，可能是因为我在实现中犯了错误或计算了错误的测试数据。让我们来看看：

**实施1：**

```
% My own implementation that only works on the equator so far. Simple calculations as mentioned above. 
```

测试（在赤道上）没问题。

**实施2：**

```
% @doc calculates new lat+long+alt values for old values + movement vector
% https://stackoverflow.com/questions/5857523/calculate-latitude-and-longitude-having-meters-distance-from-another-latitude-lo
calc_position2(LastCurrLat, LastCurrLong, LastCurrAlt, MoveX, MoveY, MoveZ) ->
    % first the new altitude
    NewCurrAlt = LastCurrAlt + MoveZ,

    % original algorithm: http://williams.best.vwh.net/avform.htm#LL
    % lat=asin(sin(lat1)*cos(d)+cos(lat1)*sin(d)*cos(tc))
    % dlon=atan2(sin(tc)*sin(d)*cos(lat1),cos(d)-sin(lat1)*sin(lat))
    % lon=mod(lon1+dlon +pi,2*pi)-pi
    % where:
    % lat1, lon1    - start point in radians
    % d             - distance in radians
    % tc            - course in radians

    % -> for the found implementation to work some value conversions are needed
    CourseDeg = calc_course(MoveX, MoveY),
    CourseRad = deg_to_rad(CourseDeg), % todo: cleanup: in course the calculated values are rad anyway, converting to deg is just an extra calculation
    Distance = calc_distance(MoveX, MoveY),
    DistanceDeg = calc_degrees_per_meter_at_equator(NewCurrAlt) * Distance,
    DistanceRad = deg_to_rad(DistanceDeg),
    Lat1Rad = deg_to_rad(LastCurrLat),
    Lon1Rad = deg_to_rad(LastCurrLong),

    LatRad = math:asin(math:sin(Lat1Rad) * math:cos(DistanceRad) + math:cos(Lat1Rad) * math:sin(DistanceRad) * math:cos(CourseRad)),
    Dlon = math:atan2(math:sin(CourseRad) * math:sin(DistanceRad) * math:cos(Lat1Rad), math:cos(DistanceRad) - math:sin(Lat1Rad) * math:sin(LatRad)),
    LonRad = remainder((Lon1Rad + Dlon + math:pi()), (2 * math:pi())) - math:pi(),

    NewCurrLat = rad_to_deg(LatRad),
    NewCurrLong = rad_to_deg(LonRad),

    {NewCurrLat, NewCurrLong, NewCurrAlt}.

% some trigonometry
% returns angle between adjacent and hypotenuse, with MoveX as adjacent and MoveY as opposite
calc_course(MoveX, MoveY) ->
    case MoveX > 0 of
        true ->
            case MoveY > 0 of
                true ->
                    % tan(alpha) = opposite / adjacent
                    % arc tan to get the alpha
                    % erlang returns radians -> convert to degrees
                    Deg = rad_to_deg(math:atan(MoveY / MoveX));
                false ->
                    Temp = 360 - rad_to_deg(math:atan((MoveY * -1) / MoveX)),
                    case Temp == 360 of
                        true ->
                            Deg = 0.0;
                        false ->
                            Deg = Temp
                    end
            end;
        false ->
            % attention! MoveX not > 0 -> can be 0 -> div by zero
            case MoveX == 0 of
                true ->
                    case MoveY > 0 of
                        true ->
                            Deg = 90.0;
                        false ->
                            case MoveY == 0 of
                                true ->
                                    Deg = 0.0;
                                false ->
                                    Deg = 270.0
                            end
                    end;
                false -> % MoveX < 0
                    case MoveY > 0 of
                        true ->
                            Deg = 180 - rad_to_deg(math:atan(MoveY / (MoveX * -1)));
                        false ->
                            Deg = 180 + rad_to_deg(math:atan((MoveY * -1) / (MoveX * -1)))
                    end
            end
    end,
    Deg.

rad_to_deg(X) ->
    X * 180 / math:pi().
deg_to_rad(X) ->
    X * math:pi() / 180.

% distance = hypetenuse in Pythagorean theorem
calc_distance(MoveX, MoveY) ->
    math:sqrt(math:pow(MoveX,2) + math:pow(MoveY,2)).

calc_degrees_per_meter_at_equator(Alt) ->
    Circumference = 2 * math:pi() * Alt,
    360 / Circumference.

% erlang rem only operates with integers
% https://stackoverflow.com/questions/9297424/stdremainder-in-erlang
remainder(A, B) ->
    A_div_B = A / B,
    N = round(A_div_B),

    case (abs(N - A_div_B) == 0.5) of
    true ->
        A_div_B_Trunc = trunc(A_div_B),

        New_N = case ((abs(A_div_B_Trunc) rem 2) == 0) of
        true -> A_div_B_Trunc;
        false ->
            case (A_div_B >= 0) of
            true -> A_div_B_Trunc + 1;
            false -> A_div_B_Trunc - 1
            end
        end,
        A - New_N * B;
    false ->
        A - N * B
    end. 
```

测试：对象在**纬度/经度/**高度（10°、10°、6371000m）。无运动（0m,0m,0m）。预期的：

```
{1.000000e+001,1.000000e+001,6.371000e+006} 
```

但返回：

```
{1.000000e+001,-3.500000e+002,6.371000e+006} 
```

360度低于预期...

物体在 (0°,10°,6371000m)，移动 (10m,0m,0m)。预期的：

```
{0.000000e+000,1.000009e+001,6.371000e+006} 
```

不确定是否只是没有显示某些数字。应该是像 10.000089932160591 这样的经度。无论如何 - 返回：

```
{8.993216e-005,-3.500000e+002,6.371000e+006} 
```

虽然我们现在要搬家，但经度值还是一样？虽然我们没有在 Y 轴上移动，但纬度值发生了变化？

相同的位置，现在向东移动 5,000,000m 呢？

```
{0.000000e+000,5.496608e+001,6.371000e+006} % expected
{4.496608e+001,-3.500000e+002,6.371000e+006} % returned 
```

**实施3：**

```
calc_position3(LastCurrLat, LastCurrLong, LastCurrAlt, MoveX, MoveY, MoveZ) ->
    {CurrX, CurrY, CurrZ} = spherical_to_cartesian(LastCurrLat, LastCurrLong, LastCurrAlt),
    NewX = CurrX + MoveX,
    NewY = CurrY + MoveY,
    NewZ = CurrZ + MoveZ,
    {NewCurrLat, NewCurrLong, NewCurrAlt} = cartesian_to_spherical(NewX, NewY, NewZ),
    {NewCurrLat, NewCurrLong, NewCurrAlt}.

spherical_to_cartesian(Lat, Lon, Alt) ->
    X = Alt * math:cos(Lat) * math:cos(Lon),
    Y = Alt * math:cos(Lat) * math:sin(Lon),
    Z = Alt * math:sin(Lat),
    {X, Y, Z}.

cartesian_to_spherical(X, Y, Z) ->
    R = math:sqrt(math:pow(X,2) + math:pow(Y,2)),
    Alt = math:sqrt(math:pow(X,2) + math:pow(Y,2) + math:pow(Z,2)),
    Lat = math:asin(Z / Alt),
    case R > 0 of
        true ->
            Lon = math:acos(X / R);
        false -> % actually: if R == 0, but it can never be negative (see above)
            Lon = 0
    end,
    {Lat, Lon, Alt}. 
```

类似上面的测试：

物体在 (10°,10°,6371000m)，没有移动

```
{1.000000e+001,1.000000e+001,6.371000e+006} % expected
{-5.752220e-001,5.752220e-001,6.371000e+006} % returned 
```

在 (0°,10°,6371000m)，移动 (10m,0m,0m)

```
{0.000000e+000,1.000009e+001,6.371000e+006} % expected
{0.000000e+000,2.566370e+000,6.370992e+006} % returned 
```

在 (0°,10°,6371000m)，移动 (5000000m,0m,0m)

```
{0.000000e+000,5.496608e+001,6.371000e+006} % expected
{0.000000e+000,1.670216e+000,3.483159e+006} % returned 
```

所以：我错过了一些 rad 到 deg 的转换或类似的东西吗？

PS：对不起语法高亮不好，但是Erlang似乎不可用，所以我拿了Shellscript。使它更具可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:42:08.920

让我们假设：

*   赤道在xy平面
*   纬度 0，经度 0，高度 > 0 在 +x 轴上
*   两极位于经度 0

有了这些假设，要从球形 (lat, lng, alt) 转换为笛卡尔 (x, y, z)：

```
x = alt * cos(lat) * cos(lng)
y = alt * cos(lat) * sin(lng)
z = alt * sin(lat) 
```

要从笛卡尔 (x, y, z) 转换为球形 (lat, lng, alt)：

```
r = sqrt(x*x + y*y)
alt = sqrt(x*x + y*y + z*z)
lat = arcsin(z / alt)
       / arccos(x / r) if r > 0
lng = -|
       \ 0 if r == 0 
```

然后按照@Peter的建议：

```
(lat, lng, alt) = toSpherical(movement + toCartesian(lat, lng, alt)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:02:39.720

从您对评论的回答中，我终于有了足够的信息：

您已在地理纬度、经度（等于或类似于 WGS84 纬度/经度）和高度值中给出了对象的位置。高度是从地球中心测量的。

```
latitude : [-90 , 90] geographical latitude in decimal degrees, 90° is Northpole<br>
longitude: [-180, 180] longitude in decimal degrees, 0° is Greenwhich
altitude: [0 , INF ] in meters from center of earth. 
```

所以这些坐标被定义为**Spherical coordinate**，但要注意顺时针与逆时针（见下文）

此外，您还给出了一个以米为单位的运动矢量 (dx,dy,dz)，它定义了从当前位置的相对运动。
这些向量被定义为笛卡尔向量。

您的应用程序既不是导航，也不是飞行控制，它更多的是在游戏领域。

对于计算，您必须知道 x,y,z Achsis 的相关位置。您应该使用与[ECEF](http://en.wikipedia.org/wiki/ECEF)相同的轴对齐方式。

您需要执行以下步骤：

您首先必须知道地理学位不是数学学位：有时重要的是要知道数学学位是逆时针方向的，而地理学位是顺时针测量的。
之后，您的坐标必须转换为弧度。

将球坐标转换为笛卡尔空间。（球形到笛卡尔变换：参见[http://en.wikipedia.org/wiki/Spherical_coordinate_system](http://en.wikipedia.org/wiki/Spherical_coordinate_system)）但使用 Math.atan2() 而不是 atan()。

（您可以使用[http://www.random-science-tools.com/maths/coordinate-converter.htm](http://www.random-science-tools.com/maths/coordinate-converter.htm)检查您的代码）检查 Ted Hopp 的回答中是否也使用了这种转换。

转换后，您在笛卡尔 x,y,z 空间中有一个坐标，单位 = 1m。

接下来是笛卡尔运动矢量：确保或转换它，以便您具有正确的轴对齐方式，dx 对应于您的 x，-dx 对应于 -x，并且也对应于 y,dy,z,dz。

然后将点添加到 dx：

```
p2.x = p.x + dx;
p2.y = p.y + dy;
p2.z = p.z + dz; 
```

然后重新转换回球坐标，如 Wiki 链接或 Ted Hopp 所示。

您在评论中提供的另一个链接（到 stackoverflow）进行其他类型的转换，它们不适用于您的问题。

我推荐一个特殊的测试用例：将球点设置为经度 = 179.9999999 然后加上 100m，结果应该是 -180.0000xx + 逗号后面的东西（两架喷气式战斗机在穿越基准限制时因这个问题坠毁）

# ios - 我无法在 iOS 中使用 push segue

> ID：13710820
> 
> 赞同：4
> 
> 时间：2012-12-04T19:54:13.593
> 
> 标签：ios, uibutton, uistoryboardsegue

我很新，但我不明白我做错了什么。

简化到极致，我`UIViewController`嵌入了一个 `UINavigationController`. 控制器包含一个`UIButton`.

这通过 push segue`UIButton`连接到第二个。`UIViewController`

所以当我按下按钮时，它应该继续到第二个`UIViewController`并给我一个返回按钮来返回，对吗？没有。

有什么建议么？我敢肯定这是显而易见的，但我很困惑。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:34:16.077

如果可以的话，从头开始，看看它是否有效。

1.  制作一个新的视图控制器

2.  单击以选择新的视图控制器，转到“编辑器”，然后“嵌入”，然后选择一个导航控制器。

3.  在第一个视图控制器上放置一个 UIButton

4.  制作第二个视图控制器

5.  Control + 将 UIButton 从第一个视图控制器拖到第二个视图控制器上，然后从选项中选择“推送”

应该这样做！搏一搏。

# r - R以指定格式打印缺失值

> ID：13710824
> 
> 赞同：1
> 
> 时间：2012-12-04T19:54:34.263
> 
> 标签：r

我`format`用来创建可读的平面表`ftable`是不够的。需要注意的是，在使用该`prop.table`函数计算列频率时，`NA`会打印值，因为`NA`这会导致混乱和可读性低。

如何修改如下代码以使用空格或句点打印`NA`或值？`NaN`我考虑使用该`sub`函数，但我认为如果列名包含这些字符值，它会很混乱并且容易出错。

```
x <- sample(c(1, 2, 3), 100, replace=TRUE)
y <- sample(factor(c(1, 2), levels=1:3), 100, replace=TRUE)
t <- table(x,y)
p <- prop.table(t, margin=2)
o <- structure(
  paste(format(t), '(', format(round(100*p)), '%)'),
  dim=dim(t),
  dimnames=dimnames(t)
) 
```

这是给出的示例输出：

```
> o
   y
x   1             2             3            
  1 "20 (  38 %)" "21 (  44 %)" " 0 ( NaN %)"
  2 "20 (  38 %)" "16 (  33 %)" " 0 ( NaN %)"
  3 "12 (  23 %)" "11 (  23 %)" " 0 ( NaN %)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:15:25.147

```
x <- sample(c(1, 2, 3), 100, replace=TRUE)
 y <- sample(factor(c(1, 2), levels=1:3), 100, replace=TRUE)
 t <- table(x,y)
 p <- prop.table(t, margin=2)
 p <- round(100*p,digits=0)
 p[is.na(p) ] <- " "
 o <- structure(
    paste(format(t), '(', format(p), '%)'),
    dim=dim(t),
    dimnames=dimnames(t)
  )
 o
#-------------------------
   y
x   1            2            3           
  1 "17 ( 34 %)" "14 ( 28 %)" " 0 (    %)"
  2 "15 ( 30 %)" "17 ( 34 %)" " 0 (    %)"
  3 "18 ( 36 %)" "19 ( 38 %)" " 0 (    %)" 
```

用您想要的任何字符串替换空白 (" ")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:39:51.517

一种简单的方法是解析行和列（如果您的数据不大）：

```
no_row=nrow(o)
no_col=ncol(o)

for(rows in 1:no_row){
  for(cols in 1:no_col){
    o[rows,cols]<-sub(pattern = "NaN", replacement = "0",  x = o[rows,cols])
    }
} 
```

但是当然有更简单的更好的方法来做到这一点。:) 上面的代码输出是：

```
> o
   y
x   1             2             3          
  1 "17 (  31 %)" "13 (  29 %)" " 0 ( 0 %)"
  2 "16 (  29 %)" "21 (  47 %)" " 0 ( 0 %)"
  3 "22 (  40 %)" "11 (  24 %)" " 0 ( 0 %)" 
```

希望它会有所帮助！

# php - 有一个图像，当单击 mySQL 查询的变量时发送信息

> ID：13710825
> 
> 赞同：1
> 
> 时间：2012-12-04T19:54:34.753
> 
> 标签：php, html, mysql

当单击将进行 mySQL 查询的 php 文件时，我想让图片发送与该图像相关的特定值。

例如，假设我有一个动物图片的 HTML 页面，当单击特定的动物图片（比如猫的图片）时，它会将其作为要分配给变量的值发送，然后将其放入 MySQL 查询中将从包含猫、狗、马等的动物数据库中提取不同品种的猫。

因此，在 HTML 页面中，animals.html，我正在使用以下代码创建图像：

```
//animals.html
<form action="animalQuery.php" method="get"> <input type="image" src="Cat.jpg" name="cats" width="350" height="225">
<form action="animalQuery.php" method="get"> <input type="image" src="Dog.jpg" name="dogs" width="350" height="225"> 
```

单击 Cat.jpg 图像时，我想将值“cats”发送给 $animal 变量，这样它基本上使下面的 $stmt 等同于“select * from Animals whereberries = 'cats';”，即一个工作查询。

```
//animalQuery.php
$animal=$_GET["cats"]; 
$stmt="select * from Animals where breeds =  $animal;"; 
```

如果我用“cats”或“dogs”的值硬编码 $stmt 来代替变量 $animal，它就可以工作，所以我知道 Query 有效。我只是无法弄清楚单击时如何让图像将我想要的特定值发送到该变量 $animal。一旦我弄清楚这一点，我应该能够弄清楚如何在单击多个图像之一时将单个变量 $animal 设置为某个值，以便一个变量适用于所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:19:57.233

为什么要为如此简单的事情提供完整的表格？

```
<a href="animalQuery.php?animal=cat"><img src="..." /></a>
<a href="animalQuery.php?animal=dog"><img src="..." /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:14:12.230

在表单中，为按钮指定相同的名称，并捕获 PHP 中的值。你可以这样做：

```
<form action="animalQuery.php" method="get"> 
 <input type="image" src="Cat.jpg" name="animal" value="Cat" width="350" height="225">
 <input type="image" src="Dog.jpg" name="animal" value="Dog" width="350" height="225">
</form>

<?php 
//Set the possible values
$animals = array( "Cat", "Dog");
//Check if the form is submitted and set the value if the value exists
$animal = isset( $_GET['animal']) && 
          in_array( $_GET['animal'], $animals)? $_GET['animal'] : "Not chosen"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:20:17.050

解决您的问题的另一种方法可能是用链接替换您的输入。例如：

```
<a href="animalQuery.php?animal=cats"><img src="Cat.jpg" width="350" height="225" /></a>
<a href="animalQuery.php?animal=dogs"><img src="Dog.jpg" width="350" height="225" /></a> 
```

然后，您可以更新 animalQuery.php 以像这样工作：

```
$animal=$_GET['animal']; 
```

您可以在此页面上看到一个示例：

[https://stackoverflow.com/tags](https://stackoverflow.com/tags)

您会看到每个标签都是一个链接，而不是输入字段：

```
<a href="/questions/tagged/c%23" class="post-tag" title="show questions tagged 'c#'" rel="tag">c#</a>
...
<a href="/questions/tagged/java" class="post-tag" title="show questions tagged 'java'" rel="tag">java</a>
...
<a href="/questions/tagged/php" class="post-tag" title="show questions tagged 'php'" rel="tag">php</a> 
```

最后，您应该查看 MySQLi 或 PDO 库以编写 SQL。如果有人要访问此页面：`animalQuery.php?animal=cats UNION SELECT * FROM information_schema.tables`，那么他们可能会入侵您的网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T20:25:44.593

不久前我遇到了类似的问题，它的出现是因为某些浏览器将图像坐标作为值发送，而不是您指定的实际值。解决该特定问题（如果必须使用图像输入）的最简单方法是包含隐藏值。

```
<form action="animalQuery.php" method="GET">
    <input type="hidden" name="animal" value="cat" />
    <input type="image" src="Cat.jpg" />
</form> 
```

然后检索`animalQuery.php`文件中的值。

```
<?php
$animal = $_GET['animal'];
$stmt = "select * from Animals where breeds = '$animal';";
?> 
```

# objective-c - 使用 parsekit 进行简单的标记解析

> ID：13710827
> 
> 赞同：1
> 
> 时间：2012-12-04T19:54:36.743
> 
> 标签：objective-c, ios, parsekit

我正在尝试解析一小部分 HTML 标记。

```
PKSequence *parrser = [PKSequence sequence];
[parrser add:[PKSymbol symbolWithString:@"<title>"]];   
PKWord *word = [PKWord word];
[word setAssembler:self selector:@selector(workOnWordAssembly:)];
[parrser add:word];
[parrser add:[PKSymbol symbolWithString:@"</title>"]];

PKAssembly *result = [parrser bestMatchFor:[PKTokenAssembly assemblyWithString:@"<title>teeest</title>"]];

-(void)workOnWordAssembly:(PKAssembly *)a {
        NSLog(@"We entered this");
} 
```

但`workOnWordAssembly`没有被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:09:20.453

[ParseKit](http://parsekit.com)的开发者在这里。确保您[在谷歌代码上使用主干头](https://code.google.com/p/parsekit/)。

1.  汇编器回调[现在有两个参数](https://stackoverflow.com/a/9647734/34934)。
2.  默认情况下，字符串`<title>`不会被标记为单个符号标记。那将是一个`<`符号令牌、一个`title`单词令牌和一个`>`符号令牌。但是，您可以配置该行为。

请阅读[ParseKit](http://parsekit.com)上的文档，尤其是[标记化文档](http://parsekit.com/tokenization.html)，以了解 ParseKit 中的标记化是如何工作的。

* * *

这是完成上述基本任务所缺少的。但是，我不确定这是完成现实世界任务的最佳方法。我认为阅读上面提到的文档将有助于解释这一点。

```
PKTokenizer *t = [PKTokenizer tokenizerWithString:@"<title>foobar</title>"];
[t.symbolState add:@"<title>"];
[t.symbolState add:@"</title>"];

PKAssembly *a = [PKTokenAssembly assemblyWithTokenizer:t];

PKSequence *p = [PKSequence sequence];

[p add:[PKSymbol symbolWithString:@"<title>"]]; 

PKWord *word = [PKWord word];
[word setAssembler:self selector:@selector(parser:didMatchWord:)];
[p add:word];

[p add:[PKSymbol symbolWithString:@"</title>"]];

PKAssembly *result = [p bestMatchFor:a]; 
```

* * *

```
-(void)parser:(PKParser *)p didMatchWord:(PKAssembly *)a {
        NSLog(@"%s %@", __PRETTY_FUNCTION__, a);
} 
```

# javascript - 强制两个 Onclick 触发器仅触发一次事件

> ID：13710829
> 
> 赞同：0
> 
> 时间：2012-12-04T19:54:42.740
> 
> 标签：javascript, function, events, onclick, toggle

我有一个包含三个过滤级别的过滤器菜单，我想设置如下：

单击第一级的一个选项 > 第二级滑出 单击第二级的一个选项 > 选项三滑出

我目前遇到的问题是一个级别中的所有项目都是 onClick 事件的“触发器”......并且更改级别选项会导致下一个级别菜单滑回我需要它坐一次的位置它出来了。

在这里查看：http: [//jsfiddle.net/RevConcept/JW5Mm/1/](http://jsfiddle.net/RevConcept/JW5Mm/1/)

这是我的代码（注意，onClick 事件现在仅设置为第一级触发第二级）...

HTML

```
<div id="options" class="combo-filters">

                <div class="option-combo location">
                  <ul class="filter option-set group " data-filter-group="location"> 
                    <li class="hidden"><a href="#filter-location-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-location-exterior" data-filter-value=".exterior" class="trigger">exterior</a>

                      <li><a href="#filter-location-interior" data-filter-value=".interior" class="trigger">interior</a>
                  </ul>
                </div>

                <div class="option-combo illumination">
                  <ul class="filter option-set group toggle" data-filter-group="illumination"> 
                    <li class="hidden"><a href="#filter-illumination-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-illumination-illuminated" data-filter-value=".illuminated">illuminated</a>

                      <li><a href="#filter-illumination-non-illuminated" data-filter-value=".non-illuminated">non-illuminated</a>

                  </ul>
                </div>

                <div class="option-combo mount">
                  <ul class="filter option-set group " data-filter-group="mount"> 
                    <li class="hidden"><a href="#filter-mount-any" data-filter-value="" class="selected">any</a>

                      <li><a href="#filter-mount-wall" data-filter-value=".wall">wall</a>

                      <li><a href="#filter-mount-ground" data-filter-value=".ground">ground</a>

                  </ul>
                </div>

            </div><!--end options--> 
```

CSS

```
header nav ul.toggle {
display:none; 
```

}

JavaScript

```
$(".trigger").one('click', function(){
    $(".toggle").slideToggle('fast'); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:56:50.073

您将需要回调中的一个变量来确定它是否被调用，如果它已经被调用过一次，则返回。

# javascript - 现场通知系统

> ID：13710830
> 
> 赞同：0
> 
> 时间：2012-12-04T19:55:03.810
> 
> 标签：javascript, codeigniter, mootools

我的任务是构建一个日历和议程库（我正在开发 CodeIgniter 框架），它显示一个日历并且用户可以在该日历上设置事件。这些事件将有一个电子邮件通知系统，并且当用户浏览该站点时，一个弹出窗口。

我的问题是当用户在网站上时如何处理通知部分。这封电子邮件是我已经决定通过每 x 分钟运行一次的 cronjob 来完成的，并检查是否需要发送通知电子邮件。

现场通知是另一回事。我将如何处理这个？我只是不能每 x 秒向服务器发出一个 ajax 请求，因为这会给系统带来不可接受的负载。（当然，当最终通知用户时，必须提出请求，将用户设置为数据库上的“remined”）。我不能只依赖用户的日期时间，因为他可能在世界任何地方，而且时间会有所不同。如何检查是否必须通知用户事件，避免向服务器重复请求？将不胜感激任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:18:13.420

易于扩展的通知系统使用 websockets，如今它已经覆盖了大多数用户，甚至在移动设备上也是如此。不幸的是，您需要一个支持 websocket 的服务器——节点、glassfish 等等——这不能通过标准的 PHP 部署（mod_php 或 fcgi）来完成。服务器事件（所谓的*服务器推送*）是在生成时发送的，所以一旦你有了 websocket 客户端-服务器对，发送提醒就像发送电子邮件一样。

实际上事情更复杂，因为很可能用户不会在提醒应该弹出的确切时间在线。我建议每次用户点击一个页面时都会刷新一个通知图标。这样，您的日历系统（假设是一个 cronjob）将简单地更新数据库中用户行的标志，并且当您构建页面时，您已经知道是否有提醒（比如说，在接下来的 60 分钟内），并且相应地选择图标。此时，您有两个选择：

1.  将提醒与每个请求一起发送给客户端（这可能会浪费带宽，但我不认为 JSON 编码的事件列表如此重量级）
2.  按需异步下载提醒，即仅当用户点击通知图标时

此方案允许您重用 PHP 环境和代码，并且不需要其他主机用于 websocket 服务器。我认为这是最好的解决方案，即使这不能满足您对服务器在正确时间触发的真正*弹出提醒的要求。*顺便说一句，如果您在每个请求中发送事件，您的 javascript 可以在需要时弹出 - 您可以使用`setTimeout()`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:33:33.263

我可以看到`setTimeout`用于执行此操作。假设用户`$minutesTilDue`在提醒到期前几分钟访问了您的页面。假设 jQuery/PHP：

```
$(function(){
    setTimeout(function(){
       showEventReminder(<?php json_encode($event) ?>);
    }, <?php echo $minutesTilDue ?> * 60 * 1000);
}); 
```

没什么花哨的，但取决于你的要求......

干杯

# c# - C# 使用项目中的每个命名空间

> ID：13710831
> 
> 赞同：1
> 
> 时间：2012-12-04T19:55:04.840
> 
> 标签：c#, namespaces, using

在我的每个 .cs 文件中，我都有大量的“使用”行，包括其他命名空间，例如：

```
using Game.Models.Main;
using Game.Models.DataStore;
using Game.Manager.MapManager;
using Game.Network.Player; 
```

如果在每个新的 .cs 文件的开头，我在代码中包含所有现有命名空间的“使用”语句怎么办？有什么缺点吗？喜欢表演还是我想不到的东西？

我为什么要这样做：在 Eclipse 中，您可以按 Ctrl+Space，您将看到以键入的字符开头的定义列表。但是，在 Visual Studio 中，只有当您键入的类位于“使用”命名空间中时，您才能看到这一点。因此，当您编写一个新类时，您必须完整输入所有其他类的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:58:15.397

它可能会减慢 Visual Studio 的智能感知，但对于已编译的产品，它不会因为多余的 using 语句而影响生成的二进制文件。

如果要删除多余的 using 语句，则可以右键单击 using 语句，然后转到“重构”>“排序和删除”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T20:01:17.963

没有太大的缺点，除非您曾经在不同的命名空间（例如`Color`在[System.Drawing.Color](http://msdn.microsoft.com/en-us/library/system.drawing.color%28v=vs.110%29.aspx)和[System.Windows.Media.Color](http://msdn.microsoft.com/en-us/library/system.windows.media.color%28v=VS.95%29.aspx)中）有同名的类，而不是添加所有命名空间可能导致编译错误或完全改变行为编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:02:55.200

通常你只想包含你正在使用的命名空间。这样可以避免命名冲突和程序员混淆。

就 IntelliSense 而言，如果您想要来自另一个命名空间的内容，只需开始在命名空间中输入，IntelliSense 将列出命名空间，因此您可以深入了解您正在寻找的内容。

# ruby-on-rails-3 - 在视图中使用延迟作业/resque 的队列长度

> ID：13710833
> 
> 赞同：1
> 
> 时间：2012-12-04T19:55:11.753
> 
> 标签：ruby-on-rails-3, queue, delayed-job, resque

有没有办法显示或使用其中一个宝石的队列长度`delayed job`或`resque`我在 rails 3 中的一个视图？

我想实现类似的东西`"you are number X in line, please wait"`

假设我有很多工作（例如发送大量电子邮件），并且队列中只要有东西就不会为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:37:19.687

不确定delayed_job，但你的resque可以得到关于的信息

resque 队列中消息的长度提供您知道队列名称

这里如何

```
require "rubygems"
require "redis"
require 'redis/namespace'
redis = Redis.new
namespace ||= :resque

@redis = Redis::Namespace.new(namespace, :redis => redis)
puts @redis.llen "queue:[my queue name]" 
```

`llen`是redis命令来设置列表的长度，例如`.length` 和`.count`数组`ruby`

希望这有帮助

# android - Mobiscroll 的问题 - 方向更改和访问地址栏会导致某些移动浏览器崩溃

> ID：13710834
> 
> 赞同：1
> 
> 时间：2012-12-04T19:55:12.147
> 
> 标签：android, jquery, asp.net-mvc, jquery-mobile, mobiscroll

原始标题但帖子太长：“ASP.NET MVC 4、Razor、JQuery、JQueryMobile，Mobiscroll 的问题 - 方向更改和访问地址栏会导致某些移动浏览器崩溃。更改滚动条的宽度和高度在某些手机上不起作用。”

崩溃问题发生在 Android 2.1 上。它不会发生在 iPhone、HTC EVO 4G LTE 或其他 HTC 上。

更改滚动条的宽度和高度不适用于 HTC。如果我更改为横向，则滚动条的大小与纵向的大小相同。如果我把它改回纵向，那么滚动条的大小应该是横向的。

这是 JQuery/Mobiscroll 代码：

```
 function createDatePicker(selector){
        if($("#input_date_1").scroller('isDisabled') != 'undefined'){
            var scrollWidth = ($("div[id='main_content']").width())  / 4;
            var scrollHeight = scrollWidth / 2.5;
            $("#input_" + selector).scroller({
                    preset: 'date',
                    minDate: new Date(2000, 0, 1),
                    maxDate: new Date(2020, 11, 31),
                    theme: 'android',
                    display: 'inline',
                    mode: 'scroller',
                    dateOrder: 'mmddyy',
                    width: scrollWidth,
                    height: scrollHeight,
                    onChange: function (valueText, inst) {
                        var lbl = $("#lbl_" + selector);
                        var date = $("#input_" + selector).scroller('getDate');
                        lbl.text(date.toDateString());
                    }
                });
        }

  function setDatePickerWidthAndHeight(){ 
        var scrollWidth = ($("div[id='main_content']").width())  / 4;
        var scrollHeight = scrollWidth / 2.5;
        var selectorBase1 = "date_1";

         $("#input_" + selectorBase1).eq(0).scroller('option', 'width', scrollWidth);
         $("#input_" + selectorBase1).eq(0).scroller('option', 'height', scrollHeight);
    }

  $(function () {
        createDatePicker('date_1');

        $(window).bind('orientationchange', function (event) {
            setTimeout(setDatePickerWidthAndHeight(),100);
        });
    }); 
```

我将这些脚本包含在页面底部呈现的@section scripts {} 中（不确定这是否相关）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:17:16.973

事实证明，问题在于较旧的 Android 手机不喜欢上面写的 resize 事件……而较新的手机不喜欢orientationchange 事件。此链接上的代码使一切正常运行：

[http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)

这是我使用它的方式：

```
//
// usage:
//$(window).smartresize(function () {
//    // code that takes it easy...
//});
//http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/
(function ($, sr) {

    // debouncing function from John Hann
    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
    var debounce = function (func, threshold, execAsap) {
        var timeout;

        return function debounced() {
            var obj = this, args = arguments;
            function delayed() {
                if (!execAsap)
                    func.apply(obj, args);
                timeout = null;
            };

            if (timeout)
                clearTimeout(timeout);
            else if (execAsap)
                func.apply(obj, args);

            timeout = setTimeout(delayed, threshold || 100);
        };
    }
    // smartresize 
    jQuery.fn[sr] = function (fn, threshold, execAsap) { return fn ? this.bind('resize', debounce(fn, threshold, execAsap)) : this.trigger(sr); };

})(jQuery, 'smartresize');

  $(function () {
        createDatePicker('date_1');

         $(window).smartresize(function () {
                setDatePickerWidthAndHeight();
            }, 200);
    }); 
```

我在这篇文章的答案中找到了链接：[jquery 中的 window.resize 多次触发](https://stackoverflow.com/questions/6658517/window-resize-in-jquery-firing-multiple-times)

谢谢！

# r - 使用ggplot2隐藏比例时如何保持绘图大小？

> ID：13710842
> 
> 赞同：3
> 
> 时间：2012-12-04T19:55:33.333
> 
> 标签：r, ggplot2

我正在使用 ggplot2 绘制散点图。当我隐藏刻度时，情节自动因为大一点而变大。例如：

```
ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) + geom_point()

ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) +
geom_point() +
theme(axis.title.x = element_blank(),
      axis.title.y = element_blank(),
      legend.position = "none") 
```

第二个更大。我怎样才能避免它？我只想隐藏比例和标签，但将情节保留为第一个，因为我想将两者结合起来，一个有比例，一个没有，但保持情节大小相同。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:24:25.527

棘手但有效。**白色轴**

```
ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) + geom_point()

+ theme (axis.title.x = element_text(family = "sans", face = "bold"))
ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) +
  geom_point() +
  theme(axis.title.x = element_text(family = "sans", face = "bold",colour='white'))+
  theme(axis.title.y = element_text(family = "sans", face = "bold",colour='white')) 
```

# 编辑：一般解决方案

```
p1 <- ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) + geom_point()

p2 <- ggplot(data = iris, geom = 'blank', aes(y = Petal.Width, x = Petal.Length)) +
  geom_point() +
  theme(axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        legend.position = "none")

gA <- ggplot_gtable(ggplot_build(p1))
gB <- ggplot_gtable(ggplot_build(p2))
gA$widths  <- gB$widths
gA$heights <- gB$heights

plot(gA)
plot(gB) 
```

# c++ - 获取 ActiveX 窗口句柄

> ID：13710847
> 
> 赞同：2
> 
> 时间：2012-12-04T19:56:02.567
> 
> 标签：c++, com, activex, atl

我已按照此[链接](http://support.microsoft.com/kb/150204)获取 ActiveX 控件的窗口句柄

来自微软网站的示例代码

```
// The following code should return the actual parent window of the ActiveX control.
HWND CMyOleControl::GetActualParent()
{
   HWND hwndParent = 0;

   // Get the window associated with the in-place site object,
   // which is connected to this ActiveX control.
   if (m_pInPlaceSite != NULL)
       m_pInPlaceSite->GetWindow(&hwndParent);

   return hwndParent;     // Return the in-place site window handle.
} 
```

但就我而言，我不断发现“m_pInPlaceSite”始终为 NULL。我正在尝试在我的控件 FinalConstruct 中运行此代码。我还需要为 m_pInPlaceSite 赋予一个值吗？还是我需要 Query 来获取值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:26:14.667

`FinalConstruct`太早了。在 FinalConstruct 中，您的类刚刚创建并且尚未初始化。没有“到位”的站点，根本没有站点。

您的控件将由其所有者调用，将为其提供站点，然后激活 - 只有这样您才有可能`m_pInPlaceSite`可用。

# ruby - 覆盖 <=> 和 equ? 在 Ruby 中使用不同的设置

> ID：13710848
> 
> 赞同：0
> 
> 时间：2012-12-04T19:56:10.157
> 
> 标签：ruby

**摘要**：我正在尝试找出一种存储、排序和平均相关数据的好方法，这些数据在从文件中读取后分组到对象中。我有两个相关的问题：

`<=>`1）覆盖以不同的顺序对对象进行排序同时还覆盖`equ?`说它们相等是一种可接受的做法吗？

2) 有没有办法检查哈希，`has_key?`其中`has_key?`读取多个参数以执行和检查哈希？

**详情**：

我正在从文本文件中读取大量数据，我想对它进行排序，并排除最高和最低值，并计算平均值。为了使这个问题更具体，我的输入集由以下字符串组成：

`field1 field2 field3 value1 value2`

（注意它更复杂，但我已经进行了解析以提取这些值）。

最初我创建了一个类，如：

```
class data
  def initialize
    @field1
    @field2
    @field3
    @value1
    @value2
  end
end 
```

我还重新定义了比较运算符`<=>`，以便它首先在`field1`then`field2`和 finally上排序`field3`。这使我可以打印出按我想要的顺序排序的所有数据。

但是现在我想做的是在所有字段都相同时将不同的值平均在一起。我还希望能够在进行平均之前对条目进行排序并删除最高和最低值。`field1` `field2`那就是我希望能够`field3`将相同的条目分组。`value1`然后通过删除最高和最低条目对这些分组条目进行排序，然后将剩余结果平均在一起。

我的一个想法是扩展类定义以包含一个存储`value1`和`value2`. 然后我会将对象插入哈希表中，如果哈希存在，则向对象添加新值。但我不确定如何或是否可以使用多个字符串来检查哈希是否具有特定键。

我假设我可以覆盖`hash`and`equ?`运算符，以便具有相同值的对象`field1` `field2`和`field3`散列到相同的位置。我不确定的一件事是说对象与 相等`equ?`但用`<=>`.

或者，也许 Ruby 有一种更简单的方法来解决我正在处理的问题，而我想到的解决方案比它需要的更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:09:09.480

```
#define: Hash#has_keys?
class Hash
    def has_keys? *args
        args.all?{|k| self.keys.include? k } unless self.keys.empty?
        # returns true if hash has all keys
        # returns false otherwise
        # returns nil if the hash is empty?
    end
end 
```

不太确定其余的。

# java - 只需一个参数即可放置 Rest web 服务

> ID：13710851
> 
> 赞同：2
> 
> 时间：2012-12-04T19:56:19.210
> 
> 标签：java, web-services, rest, jersey, put

我将 Java 和 Jersey 用于我的 REST Web 服务。我想要`put`一种只接受一个整数值的方法。从这个整数值，我可以使用业务逻辑来更新我的数据库。通常我会从我的 PUT 传递一个自定义[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)，因为它们通常包含不止一条信息。为一个值创建自定义 DTO 似乎有点浪费。是否可以将此变量作为带有 PUT 的 @PathParam 传递

我试过了

```
@PUT
@Path("apple/{pearId}")
public void doStuff(@PathParam("pearId") Integer pearId) {...} 
```

但是如果我通过，这不起作用

```
http://myurl/apple/123 
```

我尝试使用 REST 客户端来放置它，但最终得到一个`HTTP Status 403`

我可以将变量作为 PUT @PathParam 传递吗？

谢谢

**更新：有关错误的更多详细信息**

错误来自 REST 客户端

```
HTTP Status 403 -
type Status report
message
   descriptionAccess to the specified resource () has been forbidden 
```

我现在将添加日志记录，看看我是否真的进入了该方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:40:56.180

您绝对可以将 @PathParam 与 PUT 一起使用。HTTP 403 表示[禁止](http://en.wikipedia.org/wiki/HTTP_403)。这个错误可能不是来自泽西岛。该错误来自哪里？你的代码会抛出这个错误吗？

# jquery - JQuery UI：如何在不加载 jqueryui.css 的情况下让选定的选项卡更改颜色

> ID：13710858
> 
> 赞同：2
> 
> 时间：2012-12-04T19:56:46.327
> 
> 标签：jquery, jquery-ui, jquery-tabs

我是 jQuery 新手，所以对于一些琐碎的问题，我深表歉意。

我正在尝试编写一个简单的选项卡式网页。除了选定的选项卡不会更改为选定的选项卡颜色/文本外，一切正常。我有一个用于控制活动/选定选项卡的 CSS。它适用于悬停（选项卡更改为悬停颜色）。但是在单击选项卡后，它会返回到未选择的颜色。

我没有使用默认的 jqueryui.css，因为我正在尝试自己构建和学习东西。但在这里我很难过。我尝试将 .ui-tabs-selected 和 .ui-state-active 的各种变体添加到我的 css 中，但无济于事。

使用 chrome 中的代码检查器，我看到 jquery 应用了样式 ui-state-active 和 ui-tabs-selected。但是如何在 css 中指定它们被激活呢？

谢谢！

以下是代码片段：

html:

```
<html>
<head>
    <title>Patient Records Dashboard</title>
<link rel="stylesheet" type="text/css" href="css/tabs2.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/tables.css" media="screen">

</head>
<body>
  <div id="tabbed_box_1" class="tabbed_box">
   <div class="tabbed_area">
     <h4>My title</h4>
       <div id="tabs">
        <ul class="tabs">
           <li><a href="#tab1" >A</a></li>
           <li><a href="#tab2" >B</a></li>
           <li><a href="#tab3" >C</a></li>
           <li><a href="#tab4" >D</a></li>
        </ul>
                <div id="tab1_content" class="content">
                   <p>This is the text for tab 1</p>
                </div>
                <div id="tab2_content" class="content">
                    <p>This is the text for tab 2</p>
                </div>

                <div  id="tab3_content" class="content">
                     <p>This is the text for tab 3</p>
                </div>

                <div  id="tab4_content" class="content">
                    <p>This is the text for tab 4</p>
                </div>
        </div>
   </div>    <!- End of tabbed_area->
</div> <!– End of tabbed_box_1 –&gt;
<script type="text/javascript" src="js/jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript" ></script>
<script type="text/javascript">

    $(document).ready(function() {
        $("#tabs").tabs();
    });

</script>
</body>
</html> 
```

CSS：

```
body {
    background-color:#687f93;
    margin:40px;
}

#tabbed_box {
    margin: 0px auto 0px auto;
    width:300px;
}

.tabbed_box h4 {
    font-family:Arial, Helvetica, sans-serif;
    font-size:23px;
    color:#ffffff;
    letter-spacing:-1px;
    margin-bottom:10px;
}
.tabbed_box h4 small {
    color:#e3e9ec;
    font-weight:normal;
    font-size:9px;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    text-transform:uppercase;
    position:relative;
    top:-4px;
    left:6px;
    letter-spacing:0px;
}

.tabbed_area {
    border:1px solid #494e52;
    background-color:#748593;
    padding:8px;
}

ul.tabs {
    margin:0px; padding:0px;
}
ul.tabs li {
    list-style:none;
    display:inline;
}

ul.tabs li a {
    background-color:#464c54;
    color:#ffebb5;
    padding:8px 14px 8px 14px;
    text-decoration:none;
    font-size:9px;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-weight:bold;
    text-transform:uppercase;
    border:1px solid #464c54;
    background-image:url(../images/tab_off.jpg);
    background-repeat:repeat-x;
    background-position:bottom;
}
ul.tabs li a:hover {
    background-position: -420px -31px;
    color:#fff;
    background-color:#2f343a;
    border-color:#2f343a;
}
ul.tabs li a.current, ul.tabs li a.current:hover, ul.tabs li.current a, .ui-tabs-nav li.ui-state-active, .ui-state-active, .ui-tabs-selected {
    background-color:#ffffff;
    color:#282e32;
    border:1px solid #464c54;
    border-bottom: 1px solid #ffffff;
    background-image:url(../images/tab_on.jpg);
    background-repeat:repeat-x;
    background-position: -420px -62px;
}

.content {
    background-color:#ffffff;
    padding:10px;
    border:1px solid #464c54;
    background-image:url(../images/content_bottom.jpg);
    background-repeat:repeat-x;
    background-position:bottom;
}      

ul.tabs {
    margin:0px; padding:0px;
    margin-top:5px;
    margin-bottom:6px;
}

.content ul {
    margin:0px;
    padding:0px 20px 0px 20px;
}
.content ul li {
    list-style:none;
    border-bottom:1px solid #d6dde0;
    padding-top:15px;
    padding-bottom:15px;
    font-size:13px;
}
.content ul li a {
    text-decoration:none;
    color:#3e4346;
}
.content ul li a small {
    color:#8b959c;
    font-size:9px;
    text-transform:uppercase;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    position:relative;
    left:4px;
    top:0px;
}
.content ul li:last-child {
    border-bottom:none;
}

.ui-tabs-hide { display:none; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:30:04.190

添加到 CSS

```
ul.tabs li.ui-state-active,ul.tabs li.ui-tabs-selected { your styling }
ul.tabs li.ui-tabs-active a, ul.tabs li.ui-tabs-selected a{ your styling } 
```

在 HTML 更改中

```
id="tab1_content" to id="tab1"
id="tab2_content" to id="tab2"
id="tab3_content" to id="tab3"
id="tab4_content" to id="tab4" 
```

在您的 CSS 代码中，所有样式都应用于`a`>> `ul.tabs li a`but`ui-state-active`并且`ui-tabs-selected`您应用于`li`, not的样式`a`。这就是你看不到它的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T17:04:15.263

就我而言（jquery 1.10.2），这是有效的：

```
.ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { your code} 
```

# javascript - 以下JS语法有什么区别？

> ID：13710860
> 
> 赞同：7
> 
> 时间：2012-12-04T19:56:50.307
> 
> 标签：javascript

以下是定义 BW.Timer 的两种方法。有人能告诉我有什么区别吗？我不确定第一个是否有效，但如果它有效，那么使用`myfunc=(function(){}())`语法有什么不同？

```
BW.Timer = (function () {
    return {
        Add: function (o) {
            alert(o);
        },
        Remove: function (o) {
            alert(o);
        }
    };
} ()); 
```

和...

```
BW.Timer = function () {
    return {
        Add: function (o) {
            alert(o);
        },
        Remove: function (o) {
            alert(o);
        }
    };
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T20:00:36.673

第一个是立即调用函数的返回值。第二个是功能。它基本上归结为这些之间的区别：

```
var f = (function() { return 0; })();

var f = function() { return 0; }; 
```

由于第一个函数被立即调用，0 的值被赋予变量`f`。第一个`f`不是函数。但是，`f`我们必须调用第二个才能获取值：

```
f(); // 0 
```

因此，在您的示例中，第一个`BW.Timer`是对象文字本身，第二个是返回对象文字的函数。您必须调用该函数才能访问该对象：

```
BW.Timer().Add(x); 
```

## 那为什么要用第一个呢？

您可能会问自己为什么要使用类似`a = (function() { return {}; })()`而不是 的语法`a = {}`，但这是有充分理由的。与常规函数不同，IIFE（立即调用函数表达式）允许模拟静态变量（通过单个实例保持其值的变量）。例如：

```
var module = (function() {
    var x = 0;

    return {   get: function()  { return x },
               set: function(n) { x = n }
    };

})(); 
```

[以上是模块模式](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)的教科书示例。由于该函数被立即调用，因此变量`x`被实例化并且返回值（对象）被赋予给`module`. `x`除了使用为我们提供的`get`和`set`方法外，我们别无他法。因此，`x`是静态的，这意味着每次使用时都不会覆盖其变量`module`。

```
module.set(5);

module.get(); // 5 
```

另一方面，让我们看一个`module`声明为函数的示例：

```
// assume module was made as a function

module().set(5);

module().get(); // 0 
```

当我们调用变量时`module()`，`x`每次都会被覆盖。所以我们在每次调用时有效地使用`module`and的不同实例。`x``module`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:02:06.013

差别比较大。

在第一种情况下，在`BW.Timer`第一次遇到时执行，即分配给的静态版本`BW.Timer`。在这种情况下，`BW.Timer.Add(1)`可以使用。每个调用都`BW.Timer`将是同一个对象。

在第二种情况下，`BW.Timer`第一次遇到时不执行，而是必须调用的函数引用`BW.Timer()`。要`Add`使用，必须是这种情况`BW.Timer().Add(1)`。此外，您可以发出`var timer = new BM.Timer();`. 的每个实例在`BW.Timer()`这里都是唯一的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T20:01:48.083

在第一个示例`BW.Timer`中引用了一个自执行函数返回的对象，而在第二个示例中它引用了一个函数对象，换句话说，它是一个可以执行的函数`BW.Timer()`。

# tsql - 在相同数据上连接多个表并返回所有行

> ID：13710862
> 
> 赞同：3
> 
> 时间：2012-12-04T19:56:58.730
> 
> 标签：tsql, join

## 更新：

我最初使用 FULL OUTER JOIN 的尝试没有正常工作。我已经更新了问题以反映真正的问题。很抱歉提出了一个经典的[XY 问题](http://www.perlmonks.org/index.pl?node_id=542341)。

* * *

我正在尝试在一个查询中从多个表中检索数据集，该查询按数据的年、月分组。

最终结果应如下所示：

```
| 年份 | 月 | Col1 | Col2 | Col3 |
|------+-------+------+------+------|
| 2012 | 11 | 231 | - | - |
| 2012 | 12 | 第534章 12 | 13 |
| 2013 | 1 | - | 22 | 14 |

```

来自如下所示的数据：

**表格1：**

```
| 年份 | 月 | 数据 |
|------+--------+------|
| 2012 | 11 | 231 |
| 2012 | 12 | 第534章

```

**表 2：**

```
| 年份 | 月 | 数据 |
|------+--------+------|
| 2012 | 12 | 12 |
| 2013 | 1 | 22 |

```

**表3：**

```
| 年份 | 月 | 数据 |
|------+--------+------|
| 2012 | 12 | 13 |
| 2013 | 1 | 14 |

```

我尝试使用`FULL OUTER JOIN`，但这并不完全有效，因为在我的`SELECT`子句中，因为无论我从哪个表中选择“年”和“月”，都有空值。

```
SELECT 
 Collase(t1.year,t2.year,t3.year)
,Collese(t1.month,t2.month,t3.month)
,t1.data as col1
,t2.data as col2
,t3.data as col3
From t1
FULL OUTER JOIN t2
on t1.year = t2.year and t1.month = t2.month
FULL OUTER JOIN t3
on t1.year = t3.year and t1.month = t3.month 
```

结果是这样的（太混乱了，无法准确重复我使用此演示数据会得到的结果）：

```
| 年份 | 月 | Col1 | Col2 | Col3 |
|------+-------+------+------+------|
| 2012 | 11 | 231 | - | - |
| 2012 | 12 | 第534章 12 | 13 |
| 2013 | 1 | - | 22 | |
| - | 1 | - | - | 14 |

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:45:15.237

如果您的数据允许（不是 100 列），这通常是一种干净的方法：

```
select year, month, sum(col1) as col1, sum(col2) as col2, sum(col3) as col3
from (
    SELECT t1.year, t1.month, t1.data as col1, 0 as col2, 0 as col3
    From t1
    union all 
    SELECT t2.year, t2.month, 0 as col1, t2.data as col2, 0 as col3
    From t2
    union all 
    SELECT t3.year, t3.month, 0 as col1, 0 as col2, t3.data as col3
    From t3
) as data
group by year, month 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:36:29.720

您可以从所有表中导出完整的年月列表，而不是将每个表连接到该列表（使用左连接）：

```
SELECT 
  f.Year,
  f.Month,
  t1.data AS col1,
  t2.data AS col2,
  t3.data AS col3
FROM (
  SELECT Year, Month FROM t1
  UNION
  SELECT Year, Month FROM t2
  UNION
  SELECT Year, Month FROM t3
) f
LEFT JOIN t1 ON f.year = t1.year and f.month = t1.month
LEFT JOIN t2 ON f.year = t2.year and f.month = t2.month
LEFT JOIN t3 ON f.year = t3.year and f.month = t3.month
; 
```

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/a5935/1)看到此查询的现场演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:47:42.940

也许您正在寻找[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)关键字？它接受一个列列表并返回第一个不是 NULL 的列，如果所有参数都为空，则返回 NULL。在你的例子中，你会做这样的事情。

```
SELECT COALESCE(t1.data, t2.data) 
```

在这种情况下，您仍然需要连接表。它只会减少案例陈述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T22:43:10.980

如果您使用的是 SQL Server 2005 或更高版本，您还可以尝试以下 PIVOT 解决方案：

```
SELECT 
  Year,
  Month,
  Col1,
  Col2,
  Col3
FROM (
  SELECT Year, Month, 'Col1' AS Col, Data FROM t1
  UNION ALL
  SELECT Year, Month, 'Col2' AS Col, Data FROM t2
  UNION ALL
  SELECT Year, Month, 'Col3' AS Col, Data FROM t3
) f
PIVOT (
  SUM(Data) FOR Col IN (Col1, Col2, Col3)
) p
; 
```

可以[在 SQL Fiddle](http://sqlfiddle.com/#!3/a5935/2)测试和使用此查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:15:34.587

如果您要从任一 tabloe 中查找非空值，那么您也必须添加 `t1.dat IS NOT NULL`。我希望我能理解你的问题。

```
CREATE VIEW joined_SALES
AS SELECT t1.year, t1.month, t1.data , t2.data 
FROM table1 t1, table2 t2
WHERE
    t1.year = t2.year 
    and    t1.month = t2.month
    and    t1.dat IS NOT NULL
GROUP BY t1.year, t1.month; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T21:24:02.513

这可能是一种更好的方法，特别是如果您要在返回数据之前对其进行处理。基本上，您正在将数据来自的表转换为 typeId。

```
declare @temp table 
([year] int,
[month] int,
typeId int,
data decimal)

insert into @temp
SELECT t1.year, t1.month, 1,  sum(t1.data)
From t1
group by t1.year, t1.month

insert into @temp
SELECT t2.year, t2.month, 2,  sum(t2.data)
From t2
group by t1.year, t1.month

insert into @temp
SELECT t3.year, t3.month, 3,  sum(t3.data)
group by t1.year, t1.month

select t.year, t.month, 
sum(case when t.typeId = 1 then t.data end) as col1, 
sum(case when t.typeId = 2 then t.data end) as col2, 
sum(case when t.typeId = 3 then t.data end) as col3 
from @temp t
group by t.year, t.month 
```

# php - 在 PHP 中从一维数组创建二维矩阵的最有效方法

> ID：13710866
> 
> 赞同：2
> 
> 时间：2012-12-04T19:57:06.623
> 
> 标签：php, arrays, multidimensional-array

给定一个字符串数组，例如 $a：

```
$a = array("zero", "one", "cat"); 
```

我正在寻找创建数组 $b，用来自 $a 的值填充“沿对角线”：

```
$b[0] = ["zero", "-", "-"]
$b[1] = ["-", "one", "-"]
$b[3] = ["-", "-", "cat"] 
```

到目前为止，我有：

```
function matrix($m, $n, $value) {
  return array_fill(0, $m, array_fill(0, $n, $value));
} // create a matrix (m,n) of $value

$a = array("zero", "one", "cat");  
$b = matrix(count($a),count($a),"'-'");  // create $b, filled with '-'

for($i = 0; $i < count($a); $i++){
  $b[$i][$i] = $a[$i];
} // fill matrix b with strings from a, along the diagonal

print_r($b); 
```

在实践中，$a 会非常大，所以我正在寻找一种使服务器瘫痪的可能性最小的方法。

（如果您像我 8 岁一样解释您的版本，则非常感谢。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:14:00.687

在我看来，“不会让服务器陷入瘫痪”的方法将避免函数调用并且也不会使用递归，即使两者在代码方面看起来都更简洁。无论哪种方式，这都是一个相当简单的问题。

首先，我们创建破折号数组：

```
$dashes = array_fill(0, count($a), array_fill(0, count($a), '-')); 
```

您可能会注意到基于尺寸的模式：

```
0,0    1,0    2,0
0,1    1,1    2,1
0,2    1,2    2,2 
```

具体来说，X 和 Y 坐标沿对角线匹配。这很方便，因为我们只需要知道一个或另一个就可以知道要插入到 dashes 数组中的插槽。项目的索引`$a`符合以下条件之一（和两者）：

```
foreach ($a as $num => $item) {
   $dashes[$num][$num] = $item;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:20:43.660

我不知道是否更有效（你必须用 来衡量它`microtime()`）。

使用[Array Fill](http://php.net/manual/en/function.array-fill.php)可能更容易编写或理解：

```
$a = array("zero", "one", "cat");
$elements=count($a);
//we create the matrix and fill it with "-"
$matrix=array_fill(0,$elements,array_fill(0,$elements,"-");)
//now we have a matrix $elements x $elements (in this case will be 3x3) filled by "-"
// -  -  -
// -  -  -
// -  -  - 
```

现在我们把数字

```
for($i = 0; $i < $elements; $i++){
  $matrix[$i][$i] = $a[$i];
} 
```

# c - 使用 scanf() 的字符输入问题

> ID：13710867
> 
> 赞同：3
> 
> 时间：2012-12-04T19:57:10.763
> 
> 标签：c, input, linked-list

我正在尝试将字符输入到链表中，其中字符可以是“A”、“a”、“G”、“g”、“T”、“t”、“C”或“c”。

我还不熟悉C，我知道我在这里搞砸了一些东西：

```
do{
  printf ("\nEnter a new nucleotide: \n");
  scanf("%c",&newChar);
          /* Checking */
  if(newChar == 'A' ||
     newChar == 'a' || 
     newChar == 'G' || 
     newChar == 'g' || 
     newChar == 'T' || 
     newChar == 't' || 
     newChar == 'C' || 
     newChar == 'c' )
  {
    AddToSequence(newChar);
    size++;
  } else {
    printf ("\nBad Element");
  }
}while(newChar != 'x'); 
```

newChar 用垃圾值初始化，在本例中为“q”。

输入“x”退出循环，输入任何可接受的值调用 AddToSequence()，任何不可接受的值都会收到警告。

由于某种原因，无论 newChar 中的值是什么，它都会跳转到 else。它还将直接跳过 scanf 而不等待用户输入，并且每次循环时执行两个循环。谁能告诉我哪里出错了？

完整程序：

```
#include<stdio.h>
#include<stdlib.h>

/*Structure declaration for the node*/
struct node{
   char nucleotide;
   struct node *point;
}*start;

/* Adds a nucleotide to the chain. Creates a new linked list if no chain exists exists.*/
void AddToSequence(char nucleotide){
  struct node *loc, *first;
  //Dynamic memory is been allocated for a node
  first=(struct node*)malloc(sizeof(struct node));
  first->nucleotide=nucleotide;
  first->point=NULL;
  if(start==NULL){
    /*If list is empty*/
    start=first;
  }else{
    /*Element inserted at the end*/
    loc=start;
    while(loc->point!=NULL){
      loc=loc->point;
      loc->point=first;
    }
  }
}

/* Display elements */
void Display(){
  struct node *loc;
  if(start == NULL){
    printf ("\n\nList is empty");
    return;
  }
  loc=start;
  printf("\n\nList is : ");
  while(loc!=NULL){
    printf ("%c", loc->nucleotide);
    loc=loc->point;
  }
  printf ("\n");
}

/* Finds and displays percentage of the chain made up of each nucleotide. */
void Percentage(int size){
  struct node *loc;
  if(start == NULL){
    printf ("\n\nList is empty");
    return;
  }
  loc=start;
  printf("\n\nList is : ");
  int A = 0, G =0, T =0, C = 0;
  double Adouble = 0, Gdouble =0, Tdouble=0, Cdouble=0;
  while(loc!=NULL){
    if(loc->nucleotide=='A' || 'a'){A++;}
    if(loc->nucleotide=='G' || 'g'){G++;}
    if(loc->nucleotide=='T' || 't'){T++;}
    if(loc->nucleotide=='C' || 'c'){C++;}    
    loc=loc->point;   
  }
  printf ("\n"); 

  /* Convert to double for percentages as int loses precision */
  Adouble =A;
  Gdouble =G;
  Tdouble =T;
  Cdouble =C; 
  Adouble =(Adouble/size)*100;
  Gdouble =(Gdouble/size)*100;
  Tdouble =(Tdouble/size)*100;
  Cdouble =(Cdouble/size)*100; 
  printf("\nA: %f", Adouble);
  printf("\nG: %f", Gdouble);
  printf("\nT: %f", Tdouble);
  printf("\nC: %f", Cdouble); 
}

/* There be dragons beyond here */
int main(){
  int navigate, size =0;
  char newChar = 'q';
  do{ /* Menu */
    printf("\n 1\. Create / Extend Sequence\n");
    printf("\n 2\. Display Sequence\n");
    printf("\n 3\. Count \n");
    printf("\n 0\. Exit \n");
    printf("\nPlease select an option (0 to 3)\n");
    scanf("%d",&navigate);  
    switch (navigate){
      case 0: /* Exit */
        break;
      case 1: /* Add nucleotides */
        do{
          printf ("\nEnter a new nucleotide: \n");
          scanf("%c",&newChar);
          /* Some error checking */
          if(newChar == 'A' || newChar == 'a' || newChar == 'G' || newChar == 'g' || newChar == 'T' || newChar == 't' || newChar == 'C' || newChar == 'c' ){
            AddToSequence(newChar);
            size++;
          } else {
            printf ("\nBad Element");
          }
        }while(newChar != 'x');
        break;
      case 2:
        Display();
        break;
      case 3:
        Percentage(size);
        break;
      default:
        printf ("\n\nBad choice. Please select another.\n");
    }
  } while (navigate !=0); 
  return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T19:59:24.943

你不处理换行符。说明`%c`符不会跳过空格。尝试：

```
scanf(" %c", &newChar);
    /* ^ <-- Makes `scanf` eat the newline. */ 
```

或者也许添加一个明确的测试。

```
scanf(...);
if (newChar == '\n')
    continue; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T20:00:35.483

添加空间以`"%c"`捕捉换行符。空格字符用于捕捉空格字符、制表符、换行符

```
scanf("%c ",&newChar); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T20:00:09.227

你要离开`'\n'`on `stdin`：

```
scanf("%d",&navigate);  
getchar(); // consume the newline character
...
scanf("%c",&newChar);
getchar(); // consume the newline character 
```

或者由于您已经在使用`scanf()`，您可以告诉 scanf 本身来处理换行符：

```
scanf("%d\n", &navigate);
....
scanf("%c\n",&newChar); 
```

更好的是，您可以通过在格式说明符后添加一个空格来使其保持打开状态：

```
scanf("%d ", &navigate);
....
scanf("%c ",&newChar); 
```

以防万一用户想要执行以下操作：`2<tab key><enter key>`

不管你如何处理它，关键是你需要使用换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T18:29:30.543

利用

```
newChar=getche(); 
```

这是一个非标准函数，它从键盘获取字符，回显到屏幕。

# file - 按公共字段合并多个文件 - Unix

> ID：13710876
> 
> 赞同：1
> 
> 时间：2012-12-04T19:57:46.190
> 
> 标签：file, merge

我有数百个文件，每个文件有两列：

例如 ：

文件1.txt

```
ID Value1
1   40
2   30
3   70 
```

文件2.txt

```
ID Value2
1   50
2   70 
3   20 
```

以此类推，直到

文件 150.txt

```
ID Value150
1   98
2   52
3   71 
```

如何根据第一列（常见）合并这些文件。我的输出应该是

```
ID Value1 Value2...........Value150
1   40     50                98
2   30     70                52
3   70     20                71 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:19:57.260

1.  使用**剪切和粘贴组合**解决三个或更多文件的文件合并问题。cd 到该文件夹​​仅包含 file1、file2、file3、... file150：

    ```
    i=0
    cut -f 1 file1 > delim   ## use first column as delimiter
    for file in file*
    do
            i=$(($i+1))  ## for adding count to distinguish files from original ones
            cut -f 2 $file > ${file}__${i}.temp
    done
    paste -d\\t delim file*__*.temp > output 
    ```

2.  另一种解决方案是使用**join**逐步合并两个文件。

    ```
    join -j 1 test1 test2  | join -j 1 test3 - | join -j 1 test4 - 
    ```

# firefox - 在 IE8 和 Firefox 中左键单击文本输入

> ID：13710878
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:01.417
> 
> 标签：firefox, internet-explorer-8, textinput

这似乎是一个愚蠢的问题，因为它与编程没有任何关系，所以我期待一些愚蠢的答案。但这让我发疯。

我在 FF 中开发，但我被迫在 IE8 中进行测试，因为这是这里唯一官方支持的浏览器（比我必须支持 IE6 时更好！！！）。

在测试中，我必须一遍又一遍地填写相同的表格。在 FF 中，这要快得多，因为我只需在文本输入框中左键单击并获取旧值列表。在 IE8 中，我似乎总是要从头开始。似乎保留旧值的唯一输入是用户名。

IE8中是否有一些我没有打开的功能？我想在腕管进入之前使用它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:59:27.467

不，没有。这就是为什么较新的浏览器更好。

为什么不预先填充您的表单以进行测试。

# c - 将慢速 IO 委托给部分使其在 OpenMP 中变慢

> ID：13710880
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:07.573
> 
> 标签：c, parallel-processing, openmp, fread

我正在尝试使用 OpenMP（和 C）并行化我的应用程序，并希望从 I/O 部分开始。最初，读取和计算部分是连续的，每个大约需要 3 秒。

```
int *mask, width, height
Picture *pic;

pic = readFile("some big file");   // 3 secs
mask = computeMask(width, height); // 3 secs 
```

使用 OpenMP：

```
#pragma parallel default(none) shared(pic, mask, width, height)
{
 #pragma sections
 {
  #pragma section
  {
   pic = readFile("some big file");
  }
  #pragma section
  {
   mask = computeMask(width, height);
  }
 }
} 
```

但是现在总时间大约是 10 秒（实际上是花在 I/O 任务上）。

在我开始指责 RAM 上的并发访问造成了瓶颈之前。我很想知道这里是否有什么问题。

# google-closure-compiler - 如何使用 Google Closure Compiler 构建一个文件？

> ID：13710882
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:08.947
> 
> 标签：google-closure-compiler, google-closure-library

这个问题比标题所暗示的要复杂一些，所以请允许我详细说明。我有一个分为两个存储库的项目。两者都使用 Google Closure 进行依赖管理和编译。我需要将项目 A 的编译版本交付给项目 B。项目 B 进行高级优化，因此项目 A 只能是空格。问题是我找不到一种方法来满足我对编译 A 的所有要求，它们是：

*   它必须按依赖排序
*   不能有`goog`基本代码，即`var goog=goog||{}...`
*   同样，不能有 goog.provides 或 goog.requires
*   它必须是纯空格编译的

到目前为止，我已经尝试过：

*   Closurebuilder.py
    *   优点：只能是空格
    *   问题：有基本代码；得到重复的命名空间问题
*   编译器.jar
    *   问题：纯空格模式保留 goog.provides 和 requires in
    *   问题：项目 A 的任何优化都会破坏项目 B

有没有人做过类似的设置工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:42:05.420

我通过从closurebuilder.py 中获取依赖项并简单地将它们按顺序连接到一个文件中来解决它。它被运送到一个构建的 repo，B 可以通过 npm 获取它，并通过一个闭包脚本运行（adv. 优化它并将其拆分为模块）。

# c# - 使用 DbContext 集 () 而不是在上下文中公开

> ID：13710883
> 
> 赞同：35
> 
> 时间：2012-12-04T19:58:12.087
> 
> 标签：c#, .net, entity-framework, ef-code-first, dbcontext

执行以下操作时是否有任何差异：

```
public class UsersContext : DbContext
{
    public DbSet<User> Users { get; set; }
} 
```

与使用`Set<T>`上下文的方法相比：

```
public class UsersContext : DbContext
{
}

var db = new UsersContext();
var users = db.Set<User>(); 
```

这些有效地做同样的事情，给我一组用户，但是除了你没有通过属性公开集合之外，还有什么大的区别吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T20:16:44.657

为方便起见，添加了该`Users`属性，因此您无需记住所有表是什么以及对应的类是什么，您可以使用 Intellisense 来查看上下文旨在与之交互的所有表。最终结果在功能上等同于使用`Set<T>`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T20:03:43.603

使用 Code-First 迁移时，前一种方法会为您带来好处，因为会自动检测到新实体。否则，我很确定它们是等价的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T20:08:51.233

这就是我设置通用 dbSet 的方式，效果很好

```
DbContext context = new MyContext();
DbSet<T> dbSet = context.Set<T>(); 
```

它是更明确的东西的通用版本，例如

```
DbContext context = new MyContext();
DbSet<User> dbSet = context.Set<User>(); 
```

无论哪种方式，它们都是相同的（什么时候`T`）`User`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-17T12:53:31.443

一个区别是 Set 方法采用任何类型，包括非实体，它不会抛出异常，只返回该类型的空集。所以如果你输入了错误的类名，你可能会搞砸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-05T13:11:27.800

我认为有一些区别。让我使用问题中的示例。假设我想做一个基于 User.FirstName 和 User.LastName 的 Any （用户表有更多字段）

方法1：`UsersContext.Users.Any(u => u.FirstName.ToLower() == userObj.FirstName && u.LastName.ToLower() == userObj.LastName);`

方法2：`(UsersContext.Set(typeof(User)) as IQueryable<User>).Any(u => u.FirstName.ToLower() == userObj.FirstName && u.LastName.ToLower() == userObj.LastName);`

我在 sql profiler 中检查了 Method1 中触发的查询是：

```
 exec sp_executesql N'SELECT 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM [dbo].[User] AS [Extent1]
    WHERE (((LOWER([Extent1].[FirstName])) = (LOWER(@p__linq__0))) AND ((LOWER([Extent1].[LastName])) = @p__linq__1)
)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
    1 AS [C1]
    FROM [dbo].[User] AS [Extent2]
    WHERE (((LOWER([Extent2].[FirstName])) = (LOWER(@p__linq__0))) AND ([Extent2].[LastName] = @p__linq__1)
)) THEN cast(0 as bit) END AS [C1]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]',@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',@p__linq__0=N'jack',@p__linq__1=N'saw' 
```

从方法2：

```
 SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[Email] AS [Email], 
.......other fields......
FROM [dbo].[Users] AS [Extent1] 
```

该表有 40000 条记录，方法 1 大约需要 20 毫秒，而方法 2 大约需要 3500 毫秒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T20:03:49.327

我认为这两种方法之间没有这样的区别，除了因为方法的通用性`Set<User>()`更适合实现像模式这样的数据访问模式。`Repository``Set<T>()`

# reactiveui - ReactiveUI，Version=3.2.0.0 程序集引用问题

> ID：13710884
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:13.297
> 
> 标签：reactiveui

我正在使用 ReactiveUI 3.2。当我运行我的应用程序（基于 WPF）时，我看到以下日志消息，而应用程序似乎按预期运行（包括一些预期的 ReactiveUI 基本功能）：

# 调用程序集：ReactiveUI，Version=3.2.0.0，Culture=neutral，PublicKeyToken=null。

LOG：此绑定在默认加载上下文中开始。LOG：未找到应用程序配置文件。LOG：使用主机配置文件： LOG：使用来自 C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config 的机器配置文件。日志：后策略参考：System.Reactive.Windows.Threading，版本=1.1.11111.0，文化=中性，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/WorkspaceSVSource ... N/ZemaxAll /AppFx/trunk/Src/AppFxTestApp/bin/Debug/System.Reactive.Windows.Threading.DLL。日志：正在尝试下载新的 URL 文件：///C:/WorkspaceSVN/AppFx/trunk/Src/AppFxTestApp/bin/Debug/System.Reactive.Windows.Threading/System.Reactive.Windows.Threading.DLL。日志：正在尝试下载新的 URL 文件：///C:/WorkspaceSVN/AppFx/trunk/Src/AppFxTestApp/bin/Debug/System.Reactive.Windows.Threading.EXE。日志：

错误记录器：*** WPF Rx.NET DLL 引用未添加 - 使用事件循环 *** 错误记录器：添加对 System.Reactive.Windows.Threading.dll 的引用，如果您使用 WPF / SL4 / WP7 错误记录器：或考虑明确设置RxApp.DeferredScheduler 如果没有

当我实际添加对 System.Reactive.Windows.Threading.dll 的引用时，日志消息不会显示，但所有 ReactiveUI 订阅都停止工作。有任何想法吗？ReactiveUI 工作所需的额外参考的完整列表是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:49:43.073

升级到 ReactiveUI v4.1 时似乎没有这样的问题。感谢 ReaciveUI 团队！

# ruby-on-rails-3 - 如何将 params 参数传递给 rspec 控制器测试？

> ID：13710889
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:21.303
> 
> 标签：ruby-on-rails-3, rspec, ruby-on-rails-3.2, params

我有以下 rspec 测试：

```
def valid_attributes
  { "product_id" => "1" }
end

describe "POST create" do
  describe "with valid params" do
    it "creates a new LineItem" do
      expect {
        post :create, {:line_item => valid_attributes}, valid_session #my valid_session is blank
      }.to change(LineItem, :count).by(1)
    end 
```

失败并出现此错误：

```
1) LineItemsController POST create with valid params redirects to the created line_item
   Failure/Error: post :create, {:line_item => valid_attributes}, valid_session
   ActiveRecord::RecordNotFound:
     Couldn't find Product without an ID
     # ./app/controllers/line_items_controller.rb:44:in `create'
     # ./spec/controllers/line_items_controller_spec.rb:87:in `block (4 levels) in <top (required)>' 
```

这是我的控制器的创建操作：

```
def create
  @cart = current_cart
  product = Product.find(params[:product_id])
  @line_item = @cart.line_items.build(:product => product)

  respond_to do |format|
    if @line_item.save
      format.html { redirect_to @line_item.cart, notice: 'Line item was successfully created.' }
      format.json { render json: @line_item.cart, status: :created, location: @line_item }
    else
      format.html { render action: "new" }
      format.json { render json: @line_item.errors, status: :unprocessable_entity }
    end
  end
end 
```

如您所见，我的操作需要来自请求`params`对象的 product_id。 **我应该如何将此 product_id 用于我的 rspec 测试？**

我试过把这个`before`声明：

```
before(:each) do
    ApplicationController.any_instance.stub(:product).and_return(@product = mock('product'))
  end 
```

. . . 但它什么也没改变。我在某处遗漏了一些 rspec 概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:02:14.147

试试这样：

```
describe "POST create" do
   describe "with valid params" do
      it "creates a new LineItem" do
         expect {
            post :create, :product_id => 1
         }.to change(LineItem, :count).by(1)
      end 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:12:55.010

我最终通过使用夹具解决了我的问题，而不是按照另一个答案中的建议尝试模拟解决方案。

这样做的原因是控制器执行查询以从数据库中获取信息：`product = Product.find(params[:product_id])`我发现基于夹具的解决方案比使用模拟解决我的问题更快，而且我无法弄清楚如何快速存根查询（固定装置还有助于对控制器进行另一项测试，因此无论如何它最终都会有所帮助。

以供参考：

我在测试顶部用这条线引用了我的夹具：`fixtures :products`

我将测试更改为：

```
describe "POST create" do
  describe "with valid params" do
    it "creates a new LineItem" do
      expect {
          post :create, :product_id => products(:one).id
       }.to change(LineItem, :count).by(1)
    end 
```

这是我的夹具文件 products.yml：

```
one:
    name: FirstProduct
    price: 1.23

two:
    name: SecondProduct
    price: 4.56 
```

# asp.net - 具有多个 HiddenFields 的 ASP.Net 中继器

> ID：13710890
> 
> 赞同：1
> 
> 时间：2012-12-04T19:58:23.737
> 
> 标签：asp.net, datarepeater, hiddenfield

我目前正在尝试使用中继器。有一个字段有一个链接按钮、一个单选列表和几个隐藏字段。

```
<asp:RadioButtonList ID="radList" runat="server"></asp:RadioButtonList>
<asp:LinkButton ID="lbtnAdd" runat="server" Text="Add"></asp:LinkButton>
<asp:HiddenField ID="hdnLogNum" runat="server" Value='<%#DataBinder.Eval(Container.DataItem, "LogNumber") %>' />
<asp:HiddenField ID="hdnStationID" runat="server" Value='<%#DataBinder.Eval(Container.DataItem, "StationID") %>' /> 
```

如果我编辑代码以便只有一个隐藏字段，则链接按钮将正常执行。如果我保留第二个隐藏字段，我会收到错误消息...

Sys.WebForms.PageRequestManagerServerErrorException.....服务器返回的状态码是：500

任何建议表示赞赏。

# box-api - 通过 box api 将组添加到共同所有者角色并作为查看者上传者进行协作

> ID：13710891
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:31.660
> 
> 标签：box-api

我们想利用 box 来为我们的企业协作应用程序存储文档。

因此，我们的应用程序对每个空间都有 2 个角色：管理员和成员

这个想法是：

*   在应用程序拥有的框中的通用帐户下为每个空间创建一个文件夹
*   创建一组相应的框组（ourapp-spacename-admins 和 ourapp-spacename-members）
*   将 -admins 组分配为文件夹的共同所有者
*   将 -members 组分配为查看者/上传者

从那时起，唯一需要的操作就是管理对组的更改。

除了为组分配适当的角色外，所有这些似乎都可以通过 API 实现。据我所知，API 只允许个人添加到协作角色。是这样吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T18:19:40.327

上周晚些时候，Box 提供了 API，可让您将群组协作到文件夹中

您执行此操作的方式与将用户协作到文件夹上的方式相同

```
curl https://api.box.com/2.0/collaborations \
-H "Authorization: Bearer ACCESS_TOKEN" \
-d '{"item": { "id": "FOLDER_ID", "type": "folder"}, "accessible_by": { "id": "GROUP_ID"}, "role": "editor"}' \
-X POST 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:54:12.090

遗憾的是，目前 V2 API 中没有与 Groups 交互的功能；但是，我们计划在未来几个月的某个时间添加它。

# ruby-on-rails-3 - 状态机 - 记录转换的最佳实践是什么？

> ID：13710895
> 
> 赞同：0
> 
> 时间：2012-12-04T19:58:47.173
> 
> 标签：ruby-on-rails-3, state-machine

我正在使用 state_machine gem，我想存储每个状态转换。

是否只是创建一个名为 MyClassTransition 的新模型，带有一个 transition:string from_state:state ？并在过渡时的新表中添加新记录？

是否有更好的做法来存储这些转换？我需要一种日志...

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:25:33.103

与其自己发明这个，不如看看像papertrail这样的东西。这是我们用来记录所有更改的工具，它允许您回滚。

Railscasts 上有一个很棒的教程：

[http://asciicasts.com/episodes/255-undo-with-papertrail](http://asciicasts.com/episodes/255-undo-with-papertrail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T09:05:28.060

You might also want to have a look at this: [https://github.com/wvanbergen/state_machine-audit_trail](https://github.com/wvanbergen/state_machine-audit_trail)

Unlike Papertrail, it only log the state attribute and doesn't support rollback/undo/revert. If you don't need a rollback, it's more simpler.

And sometimes you're using before/after_transition callbacks that affect other models, you can't leverage Papertrail's rollback system.

# javascript - html5，从组中的对象拖动开始

> ID：13710896
> 
> 赞同：5
> 
> 时间：2012-12-04T19:58:46.947
> 
> 标签：javascript, html, kineticjs

[更新的工作小提琴](http://jsfiddle.net/zoutepopcorn/YXJpH/7/)

**原始问题**

我想知道为什么我无法从这段代码中的圆圈中收到带有“dragstart”的消息......

拖动时我无法收到“圆圈”消息。我尝试了一些来自[http://www.html5canvastutorials.com](http://www.html5canvastutorials.com)的工作代码。在此代码中：[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)，它正在工作。

jsfiddle：http: [//jsfiddle.net/zoutepopcorn/YXJpH/](http://jsfiddle.net/zoutepopcorn/YXJpH/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>

    <style>
          body {
            margin: 0px;
            padding: 0px;
          }
        </style>
    </head>

    <body>

    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.1.2.js"></script>
    <script src="setting.js"></script>
    <script src="imgStyle.js"></script>
    <script>
        var stage;
        var layer;
        setupStage();

        function setupStage() {
            stage = new Kinetic.Stage({
                  container: "container",
                  width: 800,
                  height: 800
                });
            layer = new Kinetic.Layer();
            messageLayer = new Kinetic.Layer();
            stage.add(messageLayer);
        }

    function writeMessage(messageLayer, message) {
            var context = messageLayer.getContext();
            messageLayer.clear();
            context.font = "18pt Calibri";
            context.fillStyle = "black";
            context.fillText(message, 10, 25);
    }

        function drawImage(imageObj) {
            var darthVaderImg = new Kinetic.Image({
              image: imageObj,
              x: 100,   
              y: 100,   
              width: 200,
              height: 137,
              draggable: true
            });
            var group = new Kinetic.Group({ draggable: true });
            group.add(darthVaderImg);

            var circle = new Kinetic.Circle({ x: 105, y: 105, radius: 10, fill: 'red', stroke: 'black', name: 'circle', strokeWidth: 4, draggable: true });

            group.add(circle)
            group.on("dragstart", function() { writeMessage(messageLayer, "group"); } );
            circle.on("dragstart", function() { writeMessage(messageLayer, "circle");  // <--- does not work in the GROUP!!! } );
            layer.add(group);
            stage.add(layer);
            stage.add(messageLayer);
            stage.draw();
        }

         var imageObj = new Image();
          imageObj.onload = function() {
            drawImage(imageObj);
          };
          imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:46:28.783

您看不到来自圈子的消息，因为圈子是组的一部分，因此，在组或圈子上只能识别事件“dragstart”之一，当您尝试移动圈子时，该事件会被组识别因为圆圈是该组的一部分。您可能可以在与“dragstart”关联的函数中添加一个检查，以检查所选对象是否为“圆圈”并显示您的消息。

# c - 从文件中读取短值并将它们存储到 int 缓冲区中

> ID：13710902
> 
> 赞同：1
> 
> 时间：2012-12-04T19:59:26.073
> 
> 标签：c, types

这可能已经讨论过了，但我找不到任何相关的话题。

我想`short`从文件中读取值并将它们存储在`int`使用`fread`. 所以基本上我想这样做：

```
 int *data; //int buffer
  data = (int *) malloc(1000 * sizeof(int));
  fread(data, sizeof(short), 1000, infile); //infile is organized in 2-byte chunks 
```

数据以 2 字节块 ( `short`) 的形式存储在文件中。但是当我读取这些数据时，我想将它们放入`int`缓冲区。`short`如果不从缓冲区复制到缓冲区，我怎么能做到这一点`int`？`fread`获取`void`指针，所以它不关心缓冲区的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:04:28.460

该`fread`函数不知道类型，这是正确的。这就是为什么它无法读取原始字节并对其进行转换，它只是将它们按原样放入提供的缓冲区中。如您所知，`short`在大多数平台上，a 是两个字节，`int`而是四个。因此，这将行不通，因为`fread`对此一无所知。

您可以一次读取一个短内容，将其放入`int`缓冲区，或者读取到一个临时`short`缓冲区，然后循环并将值逐个复制到`int`缓冲区中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:08:20.920

Naja，你必须这样做“从一个短缓冲区复制到一个 int 缓冲区”，因为如果你只是将你的 infile 读入数据，它只会从你的文件中逐字节复制到称为数据的内存中，从而将 2 个短裤写入一个诠释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:21:07.977

1）如果实际值是文本格式而不是二进制格式，则可以使用`fscanf`with并且此方法有效。`%hu`

```
unsigned short a
fp = fopen("myfile","r");
while(fscanf(fp,"%hu",&a))
{
    // put a in the array of unsigned short
} 
```

2）如果实际值是二进制格式，您可以使用`fscanf`with并且此方法有效。`%c`

```
unsigned short a;
char b,c;
fp = fopen("myfile","r");
while(fscanf(fp,"%c",&b) && fscanf(fp,"%c",&c))
{
    a = (unsigned short) b;
    a = a << 8;
    a+= (unsigned short) c;
    // put a in the array of unsigned short
} 
```

# java - 绘制二叉树（AVL 和红黑树）

> ID：13710905
> 
> 赞同：0
> 
> 时间：2012-12-04T19:59:38.190
> 
> 标签：java, data-structures, binary-tree, avl-tree, red-black-tree

我不明白如何做到这一点，有人可以帮忙。

我需要将以下键插入到空的 AVL 树中，并在每次插入后显示树。键应视为字符串而不是月份。例如，Jul < Jun. DEC, JAN, APR, MAR, JUL, AUG, OCT, SEP, FEB, NOV, MAY, JUN

我需要绘制的第二棵树处理红黑树。我需要将以下键插入到一个空的红黑树中，并在每次插入后显示树。键应视为字符串而不是月份。例如，Jul < Jun. DEC, JAN, APR, MAR, JUL, AUG, OCT, SEP, FEB, NOV, MAY, JUN

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:06:20.167

我喜欢AT&T 的[graphviz](http://www.graphviz.org/)和 dotty。它可以为您提供一种快速渲染树木的简单方法。在你的类中添加一个方法来渲染每一步的点输出，你就会拥有它。

[这里](http://www.loria.fr/~szathmar/off/projects/java/GraphVizAPI/index.php)有一些不错的 Java 类可以让您轻松使用 graphviz 。

或者只使用笔和纸。

听起来您真正的问题不是渲染，而是底层数据结构的行为。最好先解决这个问题。

# c# - 更改所有者并删除所有权限后，文档在“我的云端硬盘”中仍然可见

> ID：13710910
> 
> 赞同：3
> 
> 时间：2012-12-04T19:59:53.367
> 
> 标签：c#, google-drive-api, google-api-dotnet-client

我在 C# 中使用 Google Drive API 来复制、更改所有者和删除文档的所有权限，我是这样做的：

```
File file = User1DriveService.Files.Copy(fileWithTitleChanged, OriginalFile.Id).Fetch()

//new owner permission
Permission newOwnerPermission = new Permission();
newOwnerPermission.Value = User2Email;
newOwnerPermission.Type = "user";
newOwnerPermission.Role = "owner";
newOwnerPermission.WithLink = false;
User1DriveService.Permissions.Insert(newOwnerPermission, file.Id).Fetch();

//remove all permissions, using User2 DriveService
permissionList = User2DriveService.Permissions.List(file.Id).Fetch();

foreach (Permission CurrentPermission in permissionList.Items)
{
    User2DriveService.Permissions.Delete(file.Id, CurrentPermission.Id).Fetch();
}

//update name and folder for User2
File FileCopyProperties = new File();
FileCopyProperties.Parents = newParentReferenceList; //folder in User2 drive
FileCopyProperties.Title = NewFileTitle;
User2DriveService.Files.Update(FileCopyProperties, file.Id).Fetch(); 
```

一切正常，除了**User1**仍然在他的云端硬盘中看到该文档。并非总是立即出现，但它总是最终显示出来，有时会在处理后几个小时。此外，我使用 API 对那些复制的文档运行了一个虚假的用户权限插入/删除，这些文档从 User1 Drive 中消失，但几个小时后又重新出现。我什至无法使用来自 User1 的 API 访问这些文档。当我从 User1 中单击这些文档时，它说我无权访问并需要请求它。

在 User2 方面一切都很好。

这不是浏览器缓存问题，因为我已清除所有内容并多次更改浏览器，甚至计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:25:15.320

这听起来像是一个一致性问题。您可能期望强一致性，但请注意最终一致性。

如[https://developers.google.com/storage/docs/developer-guide#consistency](https://developers.google.com/storage/docs/developer-guide#consistency)所述，列表操作最终是一致的，而 ACL 是强一致的。换句话说：权限工作正常，而列表稍后更新。

# tfs - TFS 构建控制器：“无法加载文件或程序集 'Microsoft.WindowsAzure.StorageClient，版本 = 1.7.0.0”

> ID：13710916
> 
> 赞同：4
> 
> 时间：2012-12-04T20:00:09.570
> 
> 标签：tfs, msbuild, tfsbuild

如您所知，您的 TFS Preivew 不支持 Azure SDK 1.8，因此我们使用 On-permises TFS 构建控制器来构建我们的项目。

在 Azure 持续集成部署构建期间，我们收到此错误

```
========================================
Exception Message: Could not load file or assembly 'Microsoft.WindowsAzure.StorageClient, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
======================================== 
```

我们已使用 nuget 将存储库更新到 2.0 版，但我们仍然收到此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T21:19:28.900

我从 TFS 支持收到了这个解决方案。自从升级到 TFS 2013 以来，这不起作用。

要修复程序集加载错误，您需要复制

“C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-06\bin\Microsoft.WindowsAzure.StorageClient.dll”

到

C:\Program Files\Microsoft Team Foundation Server 12.0\Tools

在构建机器上并重新启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:08:24.383

打开详细或诊断日志记录详细度以确定是否`Microsoft.WindowsAzure.StorageClient`缺少其依赖项或其中一个依赖项。如果您能够在本地编译，则可以将程序集安装在本地 GAC 中，但不能安装在构建服务器上。

![TFS 日志记录详细程度](../Images/c6d54ef0d33f10fe64f5fecc756331a7.png)

# php - codeigniter 用户访问设计

> ID：13710917
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:00:20.960
> 
> 标签：php, security, codeigniter, user-controls

我正在尝试使用 codeigniter 创建一个涉及用户限制区域的简单网站，

并且想知道如何设计我的登录控制器，以便在每个页面上加载一个控制器，**检查该用户是否被允许进入该页面/是否允许执行该功能。**

问题：

1.  我如何在每个页面上自动加载此登录功能。
2.  检查是否允许用户执行此功能的正确**安全逻辑是什么？**注意到我有 3 种不同的用户类型，1.admin 2.secretary 3.worker 那么我如何将功能分配给那里的所有者？“管理员应该能够将访问权限分配给其他 2 种类型”

我已经完成了我的项目，但我对此登录用户访问控制的经验为 0，因此任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:07:23.117

你应该看看“MY_Controller”。基本上，您创建一个名为 MY_Controller.php 的文件并将其放在 application/core (http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

在这个文件中放置一个名为 MY_Controller 的类，它扩展了 CI_Controller

```
class MY_Controller extends CI_Controller {
    public function __construct() {
        parent::__construct();
        //check if your user is logged in here
    }
} 
```

在调用任何其他控制器方法之前，将首先调用上面的构造。因此，您可以检查用户是否已登录，如果没有，则重定向到您的登录表单。

有很多不同的身份验证库可能会帮助您解决第二个问题。看看这些，它们可能会对你有所帮助（不记得我脑海中的任何东西，但我知道你有选择）。

# iphone - 为推送通知购买服务器

> ID：13710924
> 
> 赞同：0
> 
> 时间：2012-12-04T20:00:42.187
> 
> 标签：iphone, ios

由于我问的另一个问题的结果：[推送或本地通知提醒用户在保存的数据和远程数据之间进行更改](https://stackoverflow.com/questions/13683219/push-or-local-notifications-alerting-user-to-change-between-saved-and-remote-dat) 我决定正面处理推送通知。但是，我真的不知道在购买服务器时从哪里开始。一旦我开始学习教程等，我应该可以相对不受挑战地跟随，但我不想购买不能运行后台进程、安装 SSL 证书和在某些端口上建立传出 TLS 连接的服务器（那些是一个教程的要求）。谁能推荐一家以相对便宜的价格提供服务器的公司，因为我不想在上面花费大量资金，并且有正确的推送通知规范。我住在英国，但由于我正在将应用程序本地化几个国家，是否值得在另一个国家/地区使用服务器？

无论如何，任何帮助将不胜感激。
问候，
迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:28:38.017

我会考虑使用像 Urban Airship 这样的服务来启动。[https://go.urbanairship.com/accounts/register/](https://go.urbanairship.com/accounts/register/)

在您每月进行超过 100 万次推送之前，它都是免费的，并且将为您省去设置服务器的麻烦。

# javascript - 移动到覆盖元素时防止悬停意图看到鼠标离开

> ID：13710926
> 
> 赞同：0
> 
> 时间：2012-12-04T20:00:55.483
> 
> 标签：javascript, jquery, jquery-hover, hoverintent

这个答案：

[当元素被覆盖时取消 mouseout 事件](https://stackoverflow.com/questions/6334654/cancelling-mouseout-event-when-element-is-overlaid)

接近某个地方，但并不是我真正想要的，因为它有点扭转我的问题。

我正在制作一个类似于 Facebook 图片查看器的图片库。

图像被加载到一个绝对定位的位置`div`，该位置在屏幕上居中，并以 z-index 值浮动在主页上方。

图像的左右是绝对定位的小`div`元素，`z-index`比图像高1。这些`div`元素是单击图库的左右箭头。

图像加载时箭头被隐藏，但是当用户将鼠标移到图像上时，箭头应该淡入，然后如果它们再次移开，它们就会淡出......就像 Facebook 查看器一样。

我正在使用`hoverIntent`它来实现这一点，并且效果很好。

但是...当用户将他/她的鼠标移动到箭头 div 中时，`hoverIntent`将其视为`mouseleave`下方图像上的一个事件并隐藏箭头...

所以......我需要的是能够`hoverIntent`忽略箭头div。

我使用的代码`hoverIntent`非常直接：

```
 function showArrows() {
            $('.imgNav').fadeIn(500);
        };
        function hideArrows() {
            $('.imgNav').fadeOut(500);
        };
        $(img).hoverIntent(showArrows, hideArrows); 
```

显然`img`是 jQuery 图像对象并且`.imgNav`是箭头的类名。

**编辑：**

我在这里创建了一个：http `fiddle`: [//jsfiddle.net/jhartnoll/cE6gu/](http://jsfiddle.net/jhartnoll/cE6gu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:35:32.217

使用您的小提琴示例，更改

```
$('.enlarged').hoverIntent(showArrows, hideArrows); 
```

到

```
$('.imgViewer').hoverIntent(showArrows, hideArrows); 
```

为我做了诀窍[http://jsfiddle.net/cE6gu/4/](http://jsfiddle.net/cE6gu/4/)

请注意，在 hoverintent 网站上，它说它旨在忽略子元素（[此处](http://cherne.net/brian/resources/jquery.hoverIntent.html)），因此您只需要确保在包含所有这些 div 的父元素上调用 hoverintent。

# javascript - 无法在 Backbone 和 RequireJS 应用程序中解析 _

> ID：13710929
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:01:07.947
> 
> 标签：javascript, backbone.js, requirejs

我对 Backbone 和 RequireJS 比较陌生，所以请多多包涵。在我的收藏中执行以下操作时出现错误： `_.range(0,10)`. 它给了我这个错误：

未捕获的类型错误：无法调用未定义的方法“范围”

加载我的收藏时，不知何故“_”没有得到解决。下面是我的收藏：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'collections/feed',
  'text!/static/templates/shared/display_item.html'
], function($, _, Backbone, FeedCollection, DisplayItem){
  debugger;   // Added this to test the value of _
  var FeedView = Backbone.View.extend({
    el: '#below-nav',
    initialize: function () {
      this.feedCollection = new FeedCollection();
    },
    feed_row: '<div class="feed-row row">',
    feed_span8: '<div class="feed-column-wide span8">',
    feed_span4: '<div class="feed-column span4">',
    render: function () {
      this.loadResults();
    },
    loadResults: function () {
      var that = this;
      // we are starting a new load of results so set isLoading to true
      this.isLoading = true;

      this.feedCollection.fetch({
        success: function (articles) {
          var display_items = [];

          // This line below is the problem...._ is undefined
          var index_list = _.range(0, articles.length, 3);

          _.each(articles, function(article, index, list) {
            if(_.contain(index_list, index)) {
              var $feed_row = $(that.feed_row),
                    $feed_span8 = $(that.feed_span8),
                    $feed_span4 = $(that.feed_span4);

              $feed_span8.append(_.template(DisplayItem, {article: articles[index]}));
              $feed_span4.append(_.template(DisplayItem, {article: articles[index+1]}));
              $feed_span4.append(_.template(DisplayItem, {article: articles[index+2]}));
              $feed_row.append($feed_span8, $feed_span4);
              $(that.el).append($feed_row);
            }
          });
        }
      });
    }
  });
  return FeedView;
}); 
```

我添加了调试器行，以便我可以测试所有参数的值。一切都很好，除了_。这可能是我的 config.js 文件有问题吗？

```
require.config({

  // Set base url for paths to reference
  baseUrl: 'static/js',

  // Initialize the application with the main application file.
  deps: ['main'],
  paths: {
    jquery: 'libs/jquery/jquery.min',
    require: 'libs/require/require.min',
    bootstrap: 'libs/bootstrap/bootstrap.min',
    text: 'libs/plugins/text',
    underscore: 'libs/underscore/underscore',
    backbone: 'libs/backbone/backbone',
    json: 'libs/json/json2',
    base: 'libs/base/base'
  },
  shim: {
    'backbone': {
      // These script dependencies should be loaded first before loading
      // backbone
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
    },
    'bootstrap': {
      deps: ['jquery'],
      exports: 'Bootstrap'
    }
  }
}) 
```

非常感谢您的帮助。由于这个错误，我的头在旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:20:59.213

根据我正在从事的项目，您还需要一个用于下划线的垫片。下划线不是“导出”的，所以请改用：

```
shim: {
    'backbone': {
      // These script dependencies should be loaded first before loading
      // backbone
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
    },
    'bootstrap': {
      deps: ['jquery'],
      exports: 'Bootstrap'
    },
    'underscore': {
      exports: '_'
    }
  } 
```

似乎这也可能是[使用 RequireJS 加载主干和下划线](https://stackoverflow.com/questions/8131265/loading-backbone-and-underscore-using-requirejs?rq=1)的“重复”问题——列表中的一两个答案提到了这个设置。

# sweave - 无法在 swaeve 中解析“未定义的控制序列”（使用 \Sexpr{}）

> ID：13710931
> 
> 赞同：1
> 
> 时间：2012-12-04T20:01:10.037
> 
> 标签：sweave, rstudio

我很难找到解决我遇到的基本错误的方法。

我试图使用 .Rnw 文档，因为它默认在 RStudio 中创建来报告一些结果。我不得不承认我是 Sweave 的新手。但是，我用来`\Sexpr{}`表示在一个块中定义的一些数字。它不起作用并返回错误“未定义的控制序列”。于是我尝试了官方介绍中给出的例子：

```
 <<echo=FALSE>>=
x <- 2
y <- 3
(z <- x + y)
@ 
```

但是，使用`$z=\Sexpr{z}$`("Undefined control sequence")时出现相同的错误

我认为我的文件从根本上是错误的，但我不知道是什么。这是我的整个文件：

```
\documentclass{report}
\usepackage[noae]{Sweave}
\usepackage{graphicx, verbatim}
\setlength{\textwidth}{6.5in} 
\setlength{\textheight}{9in}
\setlength{\oddsidemargin}{0in} 
\setlength{\evensidemargin}{0in}
\setlength{\topmargin}{-1.5cm}

\begin{document}
\SweaveOpts{concordance=TRUE}

\begin{center}
\textbf{Data}
\end {center}

\section*{Questionnaires}

\subsection*{Stress}

<<echo=FALSE>>=
x <- 2
y <- 3
(z <- x + y)
@
Defining $z$ as above we get $z=\Sexpr{z}$.

\end{document} 
```

# ruby - 要求语句在 bash 的 ruby 中不起作用

> ID：13710934
> 
> 赞同：1
> 
> 时间：2012-12-04T20:01:15.210
> 
> 标签：ruby, bash, shell, require

我正在尝试让 ttscoff 的 TaskPaper 到 Markdown ruby​​ 脚本[https://gist.github.com/511174](https://gist.github.com/511174)工作。但是，我使用 rvm，这似乎带来了一些挑战。

`-rjcode`是一个不再需要的 Unicode 标志，而 -Ku 是另一个我可以忽略的编码标志。

我找到了将 rvm 作为函数添加到您的脚本的说明，但脚本在命中`require ftools`.

我补充的是：

```
#!/usr/bin/env bash
# TaskPaper to Markdown converter
# Usage: tp2md.rb filename.taskpaper > output.md
# Load RVM into a shell session *as a function*

# Load RVM into a shell session *as a function*
if [[ -s "$HOME/.rvm/scripts/rvm" ]] ; then
  # First try to load from a user install
  source "$HOME/.rvm/scripts/rvm"
elif [[ -s "/usr/local/rvm/scripts/rvm" ]] ; then
  # Then try to load from a root install
  source "/usr/local/rvm/scripts/rvm"
else
  printf "ERROR: An RVM installation was not found.\n"
fi

# Configure ruby and gemset
rvm ruby-1.9.2-p290@global

ruby <<-rb
  puts "Hello!"
rb 
```

`Hello!`输出正常，但之后我收到以下错误：

```
require: command not found
infile: command not found
prevlevel: command not found
begin: command not found
syntax error near unexpected token `('
`    file = File.new(infile, "r")' 
```

我的问题似乎与 gem 没有被拉入有关。我已经卸载了 ftools 并重新安装了 rvm，但仍然没有骰子。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T22:46:54.653

您告诉 ruby​​ 加载“b”库。

`-r library Causes Ruby to load the library using require. It is useful when using -n or -p.`

这应该有效。

```
ruby -r ftools <<rb
  puts "Hello!"
rb 
```

# java - Ant 和 Junit 所有测试均失败

> ID：13710936
> 
> 赞同：0
> 
> 时间：2012-12-04T20:01:21.437
> 
> 标签：java, ant, junit

我需要使用 ant 来测试我在 Java 中开发的项目。我不能让蚂蚁正常工作。我还没有真正理解如何为 ant 设置路径来正确测试项目需要哪些文件。

期待哪种类型的文件？源还是二进制？

我正在使用这个 ant 文件来运行测试：

```
<project name="acmetelecom" default="compile">

<property name="src" location="src/acme/com/acmetelecom" />
<property name="src" location="src/acme/com/acmetelecom" />
<property name="fit" location="fit" />
<property name="bin" location="bin" />
<property name="lib" location="lib" />
<property name="report" location="report" />
<property name="junit.report" location="report/junit" />
<property name="fit.report" location="report/fit" />
<path id="lib.classpath">
    <fileset dir="${lib}">
        <include name="**/*.jar" />
    <include name="*" />
    </fileset>
</path>
<path id="test.classpath">
    <path refid="lib.classpath" />
<pathelement location="lib/junit/junit-4.4.jar" />
    <pathelement location="lib/junit/junit-4.4-src.jar" />
    <pathelement location="${bin}" />
</path>

<target name="compile">
    <mkdir dir="${bin}" />
    <javac srcdir="${src}" destdir="${bin}">
        <classpath refid="lib.classpath" />
    </javac>
</target>

<target name="junit" depends="compile">
    <mkdir dir="${junit.report}" />
    <junit printsummary="yes" fork="yes" haltonfailure="no">
        <classpath refid="test.classpath" />
        <formatter type="plain" />
        <batchtest fork="yes" todir="${junit.report}">
            <fileset dir="bin/com/acmetelecom">
                <include name="**/*Test.class" />
            </fileset>
        </batchtest>
    </junit>
</target>
<target name="fit" depends="compile">
    <mkdir dir="${fit.report}" />
    <java classname="fitlibrary.runner.FolderRunner" fork="yes"
            failonerror="yes">
        <classpath refid="test.classpath" />
        <arg value="${fit}" />
        <arg value="${fit.report}" />
    </java>
    <echo>Please see the FIT report page for more details</echo>
</target>
<target name="clean">
    <delete dir="${bin}" />
    <delete dir="${report}" />
</target>
</project> 
```

我看不出我做错了什么！测试与源代码位于同一目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:33:28.990

Ant 脚本的根节点是`project`标签。我建议从简单的[例子](http://ant.apache.org/manual/index.html) 开始......比如让你的Java源代码编译，然后添加junit等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:23:08.717

您正在将 .class 文件写入 ${bin}。尝试在批处理测试的文件集中将其作为参数。无论如何都不需要提供包目录路径。* */* .class 将检查所有目录。

```
 <batchtest fork="yes" todir="${junit.report}">
        <fileset dir="${bin}">
            <include name="**/*Test.class" />
        </fileset>
    </batchtest> 
```

# asp.net-mvc-4 - 针对 AD 的 MVC4 表单身份验证

> ID：13710938
> 
> 赞同：2
> 
> 时间：2012-12-04T20:01:25.910
> 
> 标签：asp.net-mvc-4, forms-authentication

我正在尝试设置一个 Intranet MVC 应用程序，该应用程序通过表单身份验证对我们公司的 AD 进行身份验证；我们确实希望用户必须登录。发布到登录操作时出现以下异常：“要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例。” 还有其他人有这个问题吗？

网络配置：

```
<connectionStrings>
  <add name="ADConnectionString" connectionString="LDAP://example.domain.com/DC=example,DC=domain,DC=com"/>
</connectionStrings>
<appSettings>
  <add key="enableSimpleMembership" value="false" />
</appSettings>
<system.web>
<authentication mode="Forms">
  <forms name=".ADAuthCookie" loginUrl="~/Account/Login" timeout="45" slidingExpiration="false" protection="All"/>
</authentication>
<membership defaultProvider="ADMembershipProvider">
  <providers>
    <clear/>
    <add name="ADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnectionString" attributeMapUsername="sAMAccountName"/>
  </providers>
</membership> 
```

帐户控制器：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        //The call to WebSecurity.Login is what throws
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T19:12:35.327

在 VS2010 中创建了一个 MVC3 站点并让它与 ActiveDirectoryMembershipProvider 一起工作。然后将 MVC4 AccountController 更改为使用旧的 System.Web.Security 而不是 WebMatrix.WebData.WebSecurity。

从：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
        return RedirectToLocal(returnUrl);
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
    return View(model);
} 
```

到：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {

        if (ModelState.IsValid && Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            return RedirectToLocal(returnUrl);
        }
        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T18:32:19.583

我的登录工作正常。是我的注销不起作用。无论如何，我将 WebSecurity.Logout() 更改为 FormsAuthentication.SignOut() 并且有效。

# php - 需要将wordpress设置为根域

> ID：13710939
> 
> 赞同：-2
> 
> 时间：2012-12-04T20:01:28.137
> 
> 标签：php, wordpress, .htaccess

我在一个实时网站上安装了一个 wordpress，目前要访问它，用户需要

类型：[http://mydomain.com/wp](http://mydomain.com/wp)，如何更改它使其位于[http://mydomain.com](http://mydomain.com)下？

1.  我知道我可以复制根目录下的文件 - 这需要更改数据库吗？在哪里？
2.  使用 .htaccess 文件会更好吗？如果是的话，你能发布一个示例文件吗？

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:06:44.030

在 wordpress 法典中：[移动 Wordpress（当您的域或 URL 更改时）](http://codex.wordpress.org/Moving_WordPress#When_Your_Domain_Name_or_URLs_Change "移动 WordPress")

# symfony - 如果模式为 /，则导入捆绑路由会导致重定向

> ID：13710943
> 
> 赞同：0
> 
> 时间：2012-12-04T20:01:49.360
> 
> 标签：symfony, symfony-2.1

**应用程序/配置/路由.yml**

```
NelmioApiDocBundle:
resource: "@NelmioApiDocBundle/Resources/config/routing.yml"
prefix:   /api/doc 
```

**供应商/nelmio/api-doc-bundle/Nelmio/ApiDocBundle/Resources/config/routing.yml**

```
nelmio_api_doc_index:
    pattern: /
    defaults: { _controller: NelmioApiDocBundle:ApiDoc:index }
    requirements:
        _method: GET 
```

访问 mydomain.com/api/doc 时，上述设置以重定向循环结束

如果我在导入路由的模式中添加任何内容，即`pattern: /test`页面按预期加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:18:57.323

这是由于我的 .htaccess 文件试图删除尾部斜杠，从而导致重定向循环。

```
#remove trailing slash
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

# php - 在 javascript 文件中使用 php 获取数据

> ID：13710944
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:01:51.920
> 
> 标签：php, javascript, jquery, html, css

> **可能重复：**
> [从 JavaScript 回显 PHP 变量？](https://stackoverflow.com/questions/1998457/echo-php-variable-from-javascript)
> [如何将 PHP 变量获取到 AJAX？](https://stackoverflow.com/questions/12762609/how-can-i-get-a-php-variable-to-ajax)

我正在尝试使用 php 从我的数据库中获取一些数据，并将其放入 javascript 变量中。使用 JQuery 最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:04:01.417

这对我来说是最简单的，其中 $var 是 PHP 中的数组，在 Javascript 中设置为变量“a”：

```
<script type="text/javascript">
var a = <?php echo json_encode($var); ?>;

</script> 
```

# javascript - Highcharts 显示多列时出现问题

> ID：13710945
> 
> 赞同：2
> 
> 时间：2012-12-04T20:02:01.467
> 
> 标签：javascript, graphics, highcharts

我正在尝试使用 highchart 显示 100 个（或更多）列，但列却很薄。柱子那么近。

我想要这样的东西：

[http://lygodactylus-williamsi.galaxyfighter.de/haltung/klima.php](http://lygodactylus-williamsi.galaxyfighter.de/haltung/klima.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:31:34.437

如果您调试您提供的代码并查看它们的图表选项，您会看到没有提供任何自定义图表的选项。唯一的想法是他们的图表没有太多的列，这就是它不薄的原因。

您可以通过执行以下操作来查看选项。

*   在 temp_morogoro.php 的第 176 行创建断点。
*   刷新页面。
*   当它在断点处停止时，运行以下脚本。 `console.log(JSON.stringify(options))`
*   然后你可以在你的控制台上看到他们的图表选项。

或者，您可以使用`dataGrouping`自定义要显示的列数。
看看下面的演示。

[没有 dataGrouping](http://jsfiddle.net/B7rGw/)
[有 dataGrouping](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/column/)

# android - 带有滚动视图的android自定义对话框将按钮推离屏幕

> ID：13710947
> 
> 赞同：10
> 
> 时间：2012-12-04T20:02:03.913
> 
> 标签：android, layout

我有一个布局如下的自定义对话框：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/mylayout">
   <LinearLayout
       android:id="@+id/title"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical">
       <TextView ... />
       <TextView .../>
    </LinearLayout>
    <ScrollView
       android:id="@+id/scrollView"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:layout_below="@+id/title">
       <LinearLayout ...>
           <TextView ...
              android:text="lots of text........" />
           <TextView .../>
       </LinearLayout>
     </ScrollView
  <RelativeLayout ...
     android:layout_below="@+id/scrollView">
     <Button ...>
     <Button ...>
  </RelativeLayout>
</RelativeLayout> 
```

我的问题是滚动视图是当滚动视图中有太多文本时，下面的按钮会被推到对话框之外。我已经能够通过使用android：layout_alignParentBottom =“true”将包含按钮的RelativeLayout锚定到底部来防止它，但是当滚动视图中的文本较少时，我会将整个对话框拉伸到屏幕底部并且我不想要那个。

我怎样才能得到这样的布局：

```
[SOME TEXT]
[Scrollable region]
[Buttons] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T20:09:43.510

尝试`LinearLayout`代替`RelativeLayout`将按钮放在单独的布局中并在按钮布局上施加权重。

```
LinearLayout - top level start, android:layout_weight="0"
LinearLayout with TextViews embeded, android:layout_weight="1"
LinearLayout with ScrollView embeded, android:layout_weight="1"
LinearLayout with Buttons embeded, android:layout_weight="1"
LinearLayout - top level finish, android:layout_weight="0" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-10T05:13:17.977

尽管这个问题有点老了，但这对我来说是有帮助的。希望这可能对其他人有所帮助，因为我花了很长时间才找到踪迹。

```
alertDialogBuilder.setMessage(null); 
```

# function - Lua 错误：需要字符串，结果为零

> ID：13710948
> 
> 赞同：2
> 
> 时间：2012-12-04T20:02:02.853
> 
> 标签：function, console, lua, null

我需要脚本方面的帮助。我几乎尝试了所有方法，但我无法弄清楚问题所在。我想`look.lua`检查是否`str = str.."\nIt's "..getPokemonAge(thing.uid).." old."` 返回为零，然后忽略它并继续执行脚本。

这是我在控制台上遇到的错误：

```
[04/12/2012 20:43:42] [Error - CreatureScript Interface] 
[04/12/2012 20:43:42] data/creaturescripts/scripts/look.lua:onLook
[04/12/2012 20:43:42] Description: 
[04/12/2012 20:43:42] data/lib/011-string.lua:16: bad argument #1 to 'find' (string expected, got nil)
[04/12/2012 20:43:42] stack traceback:
[04/12/2012 20:43:42]   [C]: in function 'find'
[04/12/2012 20:43:42]   data/lib/011-string.lua:16: in function '(for generator)'
[04/12/2012 20:43:42]   data/lib/011-string.lua:16: in function 'explode'
[04/12/2012 20:43:42]   data/lib/age system.lua:2: in function 'getPokemonYears'
[04/12/2012 20:43:42]   data/lib/age system.lua:42: in function 'getPokemonAge'
[04/12/2012 20:43:42]   data/creaturescripts/scripts/look.lua:32: in function <data/creaturescripts/scripts/look.lua:1> 
```

011-string.lua

```
local i, pos, tmp, t = 0, 1, "", {}
        for s, e in function() return string.find(str, sep, pos) end do
            tmp = str:sub(pos, s - 1):trim()
            table.insert(t, tmp)
            pos = e + 1

            i = i + 1

        end 
```

看.lua

```
str = str.."\nIt's "..getPokemonAge(thing.uid).." old." 
```

年龄系统.lua

```
function getPokemonYears(pokeball)
local data = string.explode(getItemAttribute(pokeball, "pokeballinfo"), "/")
-- data[1] = dia, data[2] = mes, data[3] = ano
local yearnow = math.floor(tonumber(os.date("%Y")))
local monthnow = math.floor(tonumber(os.date("%m")))
local daynow = math.floor(tonumber(os.date("%d")))
local ano = math.floor(tonumber(data[3]))
local mes = math.floor(tonumber(data[2]))
local dia = math.floor(tonumber(data[1]))
local years = 0
if yearnow == ano then years = monthnow-mes end
if yearnow > ano then years = (12-mes) + monthnow end
return years
end

function getPokemonMonths(pokeball)
local data = string.explode(getItemAttribute(pokeball, "pokeballinfo"), "/")
local yearnow = math.floor(tonumber(os.date("%Y")))
local monthnow = math.floor(tonumber(os.date("%m")))
local daynow = math.floor(tonumber(os.date("%d")))
local ano = math.floor(tonumber(data[3]))
local mes = math.floor(tonumber(data[2]))
local dia = math.floor(tonumber(data[1]))

if (yearnow == ano) and (monthnow==mes) and (daynow<dia+2.5) then months = 0 end
if (yearnow == ano) and (monthnow==mes) and (daynow>dia+2.5) then months = (daynow-dia)/2.5 end
if (yearnow == ano) and (monthnow>mes) then months = math.floor((30-dia)/2.5) + daynow/2.5 end
if (yearnow > ano) then
days = math.floor(monthnow*30+daynow)
months = math.floor(days/2.5)
end
if tostring(months):len() > 3 then months2 = tonumber(string.sub(tostring(months), 1, 3))
else months2 = months end
return months
end

function getPokemonAge(pokeball)
return ""..getPokemonYears(pokeball).." year, "..getPokemonMonths(pokeball).." months"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:45:12.560

我想我终于明白了你的问题，所以我会改写我的理解方式，你可以判断这是否是你想要的。

据我了解，您知道您的功能`getPokemonAge`有时会导致错误。其他几个人指出，这个错误来自于`getItemAttribute(pokeball, "pokeballinfo")`返回`nil`。

现在我认为您希望程序在生成文本时返回文本，但忽略可能发生的任何错误并`nil`在出现错误时返回。

这可以通过 pcall 完成（[看这里](http://www.lua.org/manual/5.1/manual.html#pdf-pcall)）。

在我对你的 getPokemonAge-Function 的部分重写中，我`getPokemonAgeInternal`用 pcall 调用（这是你的原始函数）。然后我只是检查结果并返回`nil`错误。

```
function getPokemonAgeInternal(pokeball)

    return ""..getPokemonYears(pokeball).." year, "..getPokemonMonths(pokeball).." months"
end

function getPokenmonAge(pokeball)
    success, value = pcall( getPokemonAgeInternal, pokeball )
    if ( success )
    then
        return value
    else
        return nil
    end
end 
```

如果您想保护它免受错误的影响，您可以将类似的代码应用于您的`getPokemonYears`-Function。

如果您的错误总是来自于`getItemAttribute(pokeball, "pokeballinfo")`，那么`nil`您不应该使用 pcall，而只需检查该条件并返回 nil if `getItemAttribute(pokeball, "pokeballinfo") == nil`。

# php - Codeigniter 搜索查询无法正常工作

> ID：13710950
> 
> 赞同：-1
> 
> 时间：2012-12-04T20:02:08.890
> 
> 标签：php, codeigniter

基本上通过显示一个表单来工作，用户可以在其中输入 2 个变量 $no 和 $first 但我只能在输入两个字段时让它显示结果。我需要它工作，所以当我输入 1 个变量时，它会显示结果。

我以为我可以使用某种 OR 语句，但我不确定如何实现它。任何帮助将不胜感激，如果它不够清楚，我对codeigniter还很陌生，我深表歉意。

控制器

```
public function query()

{

$no = $this->input->post('no');
$first = $this->input->post('first');
$this->load->model("test");
     $data['query']=$this->test->query($no,$first);
    $this->load->view('query',$data);

} 
```

模型

```
function query($no, $first)
{

 return $query = $this->db->get_where('table', array('no' => $no,
 'first' => $first ))->result();

} 
```

看法

```
 <?php foreach($query as $row): ?>
<tr> 
<td><?php echo $row->no; ?></td>
<td><?php echo $row->date; ?></td>
<td><?php echo $row->first; ?></td>

</tr>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:27:49.340

您可以尝试先准备 where 子句

```
function query($no = "", $first = "")
{
 $response = array();
 if($first != "" || $no != ""){
  $where = "";
  if($no == "") $where = 'first = '.$first;
  if($first == "") $where = 'no = '.$no;
  if($first != "" && $no != "") $where = 'no = '.$no.' AND first = '.$first;
  $fetch = $this->db->where($where)->from('table')->get();
  if($fetch->num_rows() > 0) $response = $fetch->result_array();
 }
 return $response;
} 
```

希望我能得到你想要的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:34:26.983

```
function query($no = '%', $first = '%')
{
$this->db->where("'no' = $no OR 'first' = $first");
$query = $this->db->get('table');
if($query->num_rows() >= 0)
{
    $return $query->result();
}
} 
```

如果您将通配符作为默认值提供值，则可以为空（实际上两者都可以为空以返回所有结果），然后只需在双引号内构建整个 where 语句。

如果您不想在字符串为空的情况下返回所有结果，那么您实际上不必提供通配符，但是您应该在某处检查空结果或不返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:08:50.697

你需要分开你的`WHERE`论点：

```
function query($no, $first)
{
     $this->db->select();
     $this->db->from('table');
     $this->db->where('no', $no);

     if (!empty($first))
     {
         $this->db->or_where('first', $first); // or use `and_where`
     }
     return $query = $this->db->get()->result();
} 
```

来源：[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# c# - SQL Server 2012 DateTime 格式与我的应用程序不匹配

> ID：13710951
> 
> 赞同：0
> 
> 时间：2012-12-04T20:02:11.363
> 
> 标签：c#, sql-server, datetime, sql-server-2012

在我的 SQL Server 中，我有这种日期格式：`dd-mm-yyyy`，并且我有一些与这种格式匹配的日期。但是当我在我的应用程序中使用 datagridview 时，它会解析为`mm-dd-yyyy`but show `dd-mm-yyyy`。因此，如果我`05.12.2012`的数据库中有，它认为 05 是月份，所以它显示为`12.05.2012`.

我试过用

```
Application.CurrentCulture = new CultureInfo("tr-TR"); 
```

但它没有用。

我应该更改我的应用程序的解析格式，而不是显示格式。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:50:29.883

您还可以从您的应用程序以 sql 中相同的日期格式发送您的日期。

使用文化将日期转换为 sql 格式。

这对我有用，因为我们在一个应用程序中使用不同的文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:23:38.707

您应该参考[“SET DATEFORMAT”](http://msdn.microsoft.com/en-en/library/ms189491.aspx)命令来设置日期的格式。但是，我认为您的问题出在其他地方。您应该能够在 c# 中将日期列作为日期时间值访问。通常数据是以它的本机格式传递的，所以你不应该遇到像你描述的那样的问题。

# java - 使用带有 java 泛型方法参数的 getter

> ID：13710954
> 
> 赞同：5
> 
> 时间：2012-12-04T20:02:14.383
> 
> 标签：java, generics, type-inference

我有一个采用泛型参数类型的方法。我的场景是这个方法将被不同的参数类型调用。

```
class something{
    public void someMethod(){
        List<A> listA = ....; //Class A have a field String Id;
        List<B> listB = ....; //Class B haave a field String Id;

        testMethod(listA);
        testMethod(listB);
    }

    private <T> void testMethod( List<T> list ){
            for( T event : list ){
                //TODO (something like): event.getId();
            }
        }
} 
```

在上面的代码中，所有参数都是一个`List<someObjectType>`. 所有对象类型都有一个公共字段，需要使用 getter 来获取其值。现在由于方法定义是通用的，我该如何实现呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T20:16:00.583

拥有`A`并`B`实现具有方法的通用接口`getID`：

```
interface SomeInterface {
    String getID();
} 
```

那么你可以有：

```
private <T extends SomeInterface> void testMethod(List<T> list) {
    for (T event : list) {
        // now you can use `event.getID()` here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:15:37.520

使用 T 扩展您的公共类/接口来定义您的方法`BaseType`：

```
private <T extends BaseType> void testMethod( List<T> list ){
   for( T event : list ){
       //TODO (something like): event.getId();
   }
} 
```

### 例子：

```
public void someMethod() {
    List<Integer> listA = Arrays.asList( new Integer[] {1, 4, 9} );
    List<Double> listB = Arrays.asList( new Double[] {1.5, 4.2, 9.3} );;
    testMethod(listA);
    testMethod(listB);
}

private <T extends Number> void testMethod( List<T> list ){
    for( T event : list ) {
        // Note intValue() method is being called here which is provided
        // in the base class Number that is being extended by T
        System.out.println(event.intValue());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:12:07.040

创建这样一个没有限制类型的泛型方法是没有意义的。由于 T 不受任何类型的限制，因此您不能在列表内的对象上使用特定接口。因此，如果您希望 testMethod 获取任何类型的对象列表，则应`List<?>`改为使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T22:20:54.800

正如其他答案所说，您需要通过某个接口绑定类型参数。但是对于您使用它的目的，您实际上并不需要`T`：

```
private void testMethod(List<? extends SomeInterface> list) {
    for (SomeInterface event : list) {
        // now you can use `event.getID()` here
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T20:04:41.217

这是无法做到的。您不能在方法中以相同的方式处理具有不兼容接口的两个不同列表，除非您使用`instanceof`，即

```
public void testMethod(List<? extends Object> list) {
  if(list.get(0) == null) return;
  if(list.get(0) instanceof A) {
    // Do the A stuff
  } else {
    // Do the B stuff
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T20:06:35.723

我不知道我是否真的明白你想要什么。但是，如果您知道，您会将例如 Strings 存储到您的 List 中并想要使用该`toUpperCase()`方法，那么直接转换它怎么样？

# php - php页面和xcode项目之间的数据传输

> ID：13710958
> 
> 赞同：0
> 
> 时间：2012-12-04T20:02:30.897
> 
> 标签：php, xcode

我正在尝试在我的网站上创建的 php 页面和我编写的 xcode 项目中的 NSData 对象之间传输数据。php页面非常简单：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
        <head>
             <title>Mon MEGA BLOG</title>
             <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
         </head>
         <style type="text/css">
    form
         {
             text-align:center;
         }
    </style>

    <body>

<?php 'Bonjour'; ?>

</body>
</html> 
```

我希望将“Bonjour”转移到我的数据对象中。从此时起，通过 $_GET 方法发送特定对象是毫无疑问的（尽管它已经在下面的代码中准备好了）。我只想用 echo 函数测试我的 php 页面的响应。我的xcode项目去：

```
if(![loginText.text isEqualToString:@""] && ![passwordText.text isEqualToString:@""])
    {
        //1\. creation de la request
        NSMutableString *string = [[NSMutableString alloc] initWithCapacity:200];
        NSString *string01 = @"http://attheshop.fr/index.php?prof=&pass="; 

        [string appendFormat:string01];
      NSString *string02 = loginText.text;
      NSString *string03 = passwordText.text;

        [string insertString:string03 atIndex:41];
        [string insertString:string02 atIndex:36];

        request01 =[NSURLRequest requestWithURL:[NSURL URLWithString:string]cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

        NSLog(@"%@", string);
        //2.creation de la connection et start loading data

       NSURLConnection *connection01 = [[NSURLConnection alloc] initWithRequest:request01 delegate:self];

       if(connection01)
       {
        //3.Create NSMutableData to receive data
        receivedData = [NSMutableData data];
           NSLog(@"Voici ce que contient le message %@", receivedData.description); 
        }

    } 
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it // has enough information to create the NSURLResponse.
    // It can be called multiple times, for example in the case of a // redirect, so each time we reset the data.
    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    // Append the new data to receivedData. // receivedData is an instance variable declared elsewhere. 
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    // release the connection, and the data object 
    // inform the user 

    NSLog(@"Connection failed! Error - %@ %@",[error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);

    //set an alert
    UIAlertView *alert01 = [[UIAlertView alloc] initWithTitle:@"Probleme de connexion" message:@"La connexion a échoué" delegate:self cancelButtonTitle:@"Recommençer" otherButtonTitles:nil];
    alert01.alertViewStyle = UIAlertViewStyleDefault;
    [alert01 show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    // do something with the data // receivedData is declared as a method instance elsewhere 

    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    //6.Mettre les informations téléchargées dans un objet data envoyé à home.

    NSData *response = [NSURLConnection sendSynchronousRequest:request01 returningResponse:nil error:nil];
    //NSLog(@"response %@", response.description);

    NSString *get = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    NSLog(@"get %@", get.description);

    NSString *string04 = @"error";
    NSPredicate *errorTest = [NSPredicate predicateWithFormat:@"SELF CONTAINS %@", string04];
    BOOL defError = [errorTest evaluateWithObject:get];

    NSLog(@"%i",defError);

    if (!defError) 
    {
        //Si pas d'erreur, on lance le segue
        [self performSegueWithIdentifier:@"loginMainSegue" sender:self];
    }

    //5.Si mauvais login ou password message alerte erreur

    if (defError) 
    {
        UIAlertView *alert02 = [[UIAlertView alloc] initWithTitle:@"Erreur" message:@"Votre login ou votre password est erroné" delegate:self cancelButtonTitle:@"Recommençer" otherButtonTitles:nil];
        alert02.alertViewStyle = UIAlertViewStyleDefault;
        [alert02 show];        
    }

} 
```

最后，我的输出屏幕给出了以下结果： - receivedData.description = nothing（我想要“Bonjour”） - get.description = 完整的 php 页面，表明交换发生了。

你能帮忙看看我的代码出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:07:12.397

简单地调用`<?php 'Bonjour' ?>`不会显示任何你需要`echo`的字符串。

例如

```
<?php echo 'Bonjour'; ?> 
```

或使用新的 php 语法

```
<?='Bonjour'?> 
```

# android - Android 多点触控和 getActionMasked()

> ID：13710967
> 
> 赞同：9
> 
> 时间：2012-12-04T20:03:14.847
> 
> 标签：android, multi-touch, mask

我有一些关于触摸事件屏蔽的小问题。我在这里和其他地方读过很多东西，但对部分内容仍然有些困惑。

1)`event.getActionMasked()`相同`event.getAction() & MotionEvent.ACTION_MASK`（它们似乎在三星 S2 和 HTC Desire 上）

2）以上两个命令是否会提供所有信息，并且比`event.getAction()`单独提供更多信息，或者它是否不同。

3）我写了一段代码，它简单地说明了在哪里触摸以及使用哪个pointerId，或者指针是否未使用（目前仅针对两次触摸编写）。它似乎在上面提到的设备上正常工作，但是我知道如果没有完全正确，某些设备的行为会非常不同。因此，我想知道以下内容是否正确并且会在所有设备上运行。

```
boolean pointer0down=false, pointer1down=false;
String st="", str0 ="", str1 ="";

public boolean onTouchEvent( MotionEvent event )
{

  if (event.getActionMasked()==MotionEvent.ACTION_UP
        ||event.getActionMasked()==MotionEvent.ACTION_POINTER_UP
        ||event.getActionMasked()==MotionEvent.ACTION_CANCEL)
   {
     if (event.getPointerId((event.getActionIndex()& MotionEvent.ACTION_MASK))==0)
        pointer0down=false;
     if (event.getPointerId((event.getActionIndex()& MotionEvent.ACTION_MASK))==1)
        pointer1down=false;
   }

  if (event.getActionMasked()==MotionEvent.ACTION_DOWN
    ||event.getActionMasked()==MotionEvent.ACTION_POINTER_DOWN)
  {
    if (event.getPointerId((event.getActionIndex()& MotionEvent.ACTION_MASK))==0)
       pointer0down=true;
    if (event.getPointerId((event.getActionIndex()& MotionEvent.ACTION_MASK))==1)
       pointer1down=true;
   }

 if (pointer0down)
    str0="\tx: " + event.getX(0) + "\ty: "+event.getY(0);
 else
    str0="\tNot down";

 if (pointer1down )
    str1="\tx: " + event.getX(1) + "\ty: "+event.getY(1);
 else
    str1="\tNot down";

 st="pointer0:"+str0+"\npointer1:"+str1;

    return true;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T03:11:47.770

**一些背景 -**

从 getAction 返回的整数是一个压缩整数，它对动作代码（例如 ACTION_DOWN）和指针索引（例如哪个手指）进行编码。

对于单点触摸，由于只涉及一根手指，因此不需要存储指针索引，因此该值只是动作代码。因此，做类似的事情是安全的`getAction() == ACTION_DOWN`

对于多点触控，这种比较是不正确的，因为您在打包整数中有额外的指针索引。您可以通过做提取动作代码`getAction() & ACTION_MASK`并通过做提取指针索引`getAction() & ACTION_POINTER_INDEX_MASK`

**现在回答你的问题 -**

1：是的。将**getActionMasked**视为提取操作代码位的辅助方法。要提取指针索引，您有等效的**getActionIndex**辅助方法。这两种方法都适用于单点或多点触控，因此它们是“最安全的”。

2：如上所述，getAction 还为多点触控编码指针索引

3：您的代码中存在错误。`event.getPointerId((event.getActionIndex() & MotionEvent.ACTION_MASK))`在技​​术上是不正确的。相反，你应该做**`event.getPointerId(event.getActionIndex())`**. 您**非常幸运**，因为 getActionIndex 上的逻辑和运算符不正确，结果是 2 个字节，而掩码本身就是 2 个字节（0xff）:)

# servicestack - 在 ServiceStack 中不使用 cookie 进行身份验证

> ID：13710973
> 
> 赞同：3
> 
> 时间：2012-12-04T20:03:30.323
> 
> 标签：servicestack

我正在使用 ServiceStack 编写基于 REST 的服务，但作为身份验证的一部分，我需要授权跨域，但无法跨域读取 cookie，因此即使我的 JSON POST 到身份验证服务成功并且返回 SetCookie 结果，它永远不会看到该 cookie，因为它看不到它。

问题是，有没有其他方法可以解决这个问题，也许我可以通过请求标头或其他方式提供相同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:09:27.090

如果客户端和接收方都允许，您可以在跨域请求中传递 cookie。在此处查看此[链接](http://www.html5rocks.com/en/tutorials/cors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:34:52.540

您可以在 Ajax 请求中使用[HTTP BasicAuth](http://en.wikipedia.org/wiki/Basic_access_authentication) HTTP 标头，服务器需要[启用 BasicAuthProvider()](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/AppHost.cs#L178)，例如：

```
Plugins.Add(new AuthFeature(
    () => new CustomUserSession(), //Use your own typed Custom UserSession type
    new IAuthProvider[] {
        new BasicAuthProvider(), //Sign-in with Basic Auth
        //... other providers
    })); 
```

尽管请注意 BasicAuth 只是您的用户名/密码的 Base64 编码版本，因此理想情况下这应该通过 SSL 发生。

有关如何[使用 jQuery 添加 BasicAuth 标头](https://stackoverflow.com/questions/5507234/how-to-use-basic-auth-and-jquery-and-ajax)的信息，请参阅此答案。

# c# - 与字符串匹配后如何读取和提取双引号内的特定句子

> ID：13710978
> 
> 赞同：2
> 
> 时间：2012-12-04T20:03:59.367
> 
> 标签：c#, c#-4.0

我有一个包含大量数据的文件。在那个文件里面有一个词描述。我只想在该描述之后阅读双引号内的一行。例如：描述：“转换规范的字符值无效”。

首先，我想搜索单词描述。然后我需要阅读“强制转换规范的字符值无效”这一行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:10:02.087

```
var data = @"key:""desc""
key2: ""d2""
key2: ""d2""";

var keyValues = Regex
  .Matches(data, @"^(?<key>.*?): *""(?<value>.*)""", RegexOptions.Multiline)
  .Cast<Match>()
  .Select(m => new{
                   key = m.Groups["key"].Value, 
                   value = m.Groups["value"].Value});

foreach(var kv in keyValues)
{
    Console.WriteLine("{0} : {1}", kv.key, kv.value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:06:29.967

使用正则表达式，在这种情况下 Regex.Match 应该可以很好地工作。

```
using System.Text.RegularExpressions;
...
public static readonly REGEX_QUOTEFINDER = @"{0}\s*""(?<QUOTE>([^""]+))""";
public static string ReadQuotedString(string blob, string key)
{
    return Regex.Match(
        blob, 
        string.Format(REGEX_QUOTE, Regex.Escape(key))
    ).Groups["QUOTE"].Value;
}
...
string result = ReadQuotedString(File.ReadAllText("c:/test.txt"), ":Description:"); 
```

像上面这样的东西可能会奏效。

# wordpress - 创建可以在 Wordpress 中设置的主题可访问变量

> ID：13710979
> 
> 赞同：1
> 
> 时间：2012-12-04T20:04:00.113
> 
> 标签：wordpress

我被要求在 wordpress 网站上创建一个拨号盘。客户希望能够更新仪表的值。

我有两个选择 - 我可以创建一些与 wordpress 并排的东西，他们可以在其中更新值，或者我可以将它作为 wordpress 的一部分，但我不确定如何做到这一点或它有多容易。

基本上我只需要一个经过身份验证的用户可以更新值的屏幕。然后我需要能够从其中一个主题文件（特别是静态首页主题文件）中读取该值并显示它。

我对 PHP 很满意，但对 wordpress 不熟悉 - 有没有简单的方法可以做到这一点，或者单独做会更有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:18:47.440

实际上应该很容易——WordPress 提供了与数据库交互所需的核心。

这是我几年前构建的主题的一些示例代码。不仅如此，显然您必须在某个时候创建​​表。但是一旦到位，全局 $wpdb 就是您的网关。

```
function update_game($player, $field, $data)
{
    global $wpdb;

    $table = $wpdb->prefix . "gameplay";
    $where = "tex_id=" . ($player);

    $sql = "UPDATE $table SET " .$field. "='" .$data. "' WHERE $where";

    $wpdb->query( $sql );

} //End update_game 
```

或者，对于一个字段，您可以使用“选项”。例如

```
function clear_game()
{
    update_option('tex_deal','w');
    update_option('tex_dealer','0');
    update_option('tex_actor','0');
    update_option('tex_candeal','0');
    update_option( 'tex_flopImg' , '' );
    update_option( 'tex_turnImg' , '' );
    update_option( 'tex_riverImg' , '' );
    update_option( 'tex_pot' , '0' );
    update_option( 'tex_bigbet' , '0' );

}//end clear_game 
```

`update_option()`is/was in /wp-includes/function.php （我认为它仍然存在......已经有一段时间了）并且您需要`add_option`事先调用 -`get_option()`将返回当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:27:28.157

我之前遇到过一些类似的情况，我发现在管理员的 UX 方面最好的是使用“仪表板小部件”，他们可以在其中更新值。您可以查看[http://codex.wordpress.org/Dashboard_Widgets_API上的文档](http://codex.wordpress.org/Dashboard_Widgets_API)

然后，您可以使用[Options API](http://codex.wordpress.org/Options_API)来更新和检索给定的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:44:07.317

Codex 中的文章[Creating Options Page](http://codex.wordpress.org/Creating_Options_Pages)已过时，但有两个链接指向两位伟大开发人员撰写的文章：

*   [使用注册设置处理 WordPress 2.8 中的插件选项](http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/)，作者：Ozh

    > 在即将到来的 WordPress 2.8 中有一个有趣的功能集，旨在帮助作者管理他们的插件自定义选项。简而言之：将您的选项列入白名单，定义您希望如何验证它们，然后依靠 API 为您处理所有事情。

*   [WordPress 设置 API 教程](http://ottopress.com/2009/wordpress-settings-api-tutorial/)，作者 Otto

    > 在编写 Simple Facebook Connect 插件时，我研究了 Settings API 的工作原理。它对 WordPress 来说相对较新（在 2.7 版中引入），而且我读过的很多东西都说它更容易使用。
    > 它更容易使用，因为它几乎自动为您提供了美好和安全的东西。不会混淆随机数或任何类似的东西。但是，使用起来稍微困难一些，因为它的好的文档很少。特别是对于最常见的情况：制作自己的设置页面。

请注意，您不仅限于“选项页面”，还有[更多](http://codex.wordpress.org/Administration_Menus)。[然后，使用Options API](http://codex.wordpress.org/Options_API)检索前端中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:25:20.357

您还可以使用高级自定义字段插件下拉式“选项页面”。

它使您无需编写代码即可编辑选项页面。另外，在完成开发后，您仍然可以将所有字段导出到 php。

[插件链接](http://www.advancedcustomfields.com/add-ons/options-page/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T18:36:49.650

这是这个问题的最佳答案。创建可在 Admin 上访问的表单。这里有功能代码的链接：

*   [https://premium.wpmudev.org/blog/company-info-global-variables/](https://premium.wpmudev.org/blog/company-info-global-variables/)

这些变量可以作为 WordPress 设置访问。

# android - Android - Facebook SDK 3 - 仅限墙贴

> ID：13710981
> 
> 赞同：1
> 
> 时间：2012-12-04T20:04:01.603
> 
> 标签：android, facebook, facebook-wall

我是 Facebook SDK (3) 的新手，并且已成功编译并运行 HelloFacebookSample。现在我只想发布一个墙贴，所以我试图删除所有不必要的东西，只有发布状态功能

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    postStatusUpdateButton = (Button) findViewById(R.id.postStatusUpdateButton);
    postStatusUpdateButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            onClickPostStatusUpdate();
        }
    });
}

private void onClickPostStatusUpdate() {
    performPublish(PendingAction.POST_STATUS_UPDATE);
}

private void performPublish(PendingAction action) {
    Session session = Session.getActiveSession();
    if (session != null) {
        pendingAction = action;
        if (hasPublishPermission()) {
            // We can do the action right away.
            handlePendingAction();
        } else {
            // We need to reauthorize, then complete the action when we get called back.
             Session.ReauthorizeRequest reauthRequest = new Session.ReauthorizeRequest(this, PERMISSIONS).
                        setRequestCode(REAUTHORIZE_ACTIVITY).
                        setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            session.reauthorizeForPublish(reauthRequest);
        }
    }
} 
```

但是在 performPublish 会话上为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:54:19.113

我自己遇到了这个问题。Session 为空，因为用户未登录；用户必须在调用 reauthorizeRequest 或发送请求之前登录。

一种方法是确保用户单击 LoginButton 并成功登录；如果他们在尝试发布状态更新时没有登录（会话为空），那么您应该显示一个 AlertDialog 告诉他们登录——或者更好的是，打开登录对话框。

LoginButton 是一个很好的便利工具，但不幸的是，Facebook 只是让您选择完全按原样使用 LoginButton 或从头开始编写所有内容。但是在 Eclipse 中打开 LoginButton 可以看到重要的代码：

```
Session currentSession = sessionTracker.getSession();
                if (currentSession == null || currentSession.getState().isClosed()) {
                    sessionTracker.setSession(null);
                    Session session = new Session.Builder(context).setApplicationId(applicationId).build();
                    Session.setActiveSession(session);
                    currentSession = session;
                }
                if (!currentSession.isOpened()) {
                    Session.OpenRequest openRequest = null;
                    if (parentFragment != null) {
                        openRequest = new Session.OpenRequest(parentFragment);
                    } else if (context instanceof Activity) {
                        openRequest = new Session.OpenRequest((Activity)context);
                    }

                    if (openRequest != null) {
                        openRequest.setPermissions(permissions);
                        openRequest.setLoginBehavior(loginBehavior);

                        if (SessionAuthorizationType.PUBLISH.equals(authorizationType)) {
                            currentSession.openForPublish(openRequest);
                        } else {
                            currentSession.openForRead(openRequest);
                        }
                    }
                } 
```

这是登录代码（即调出登录屏幕以便用户登录）。您可以自己使用 SessionTracker，但我认为 Facebook 可能并不意味着人们使用它（它不在 SDK 文档中，并且包是 com.facebook.internal，暗示他们不希望开发人员使用它）- - 但您可以根据需要调整代码。

# node.js - Node.js express，handlebars - 获取数组的元素

> ID：13710984
> 
> 赞同：2
> 
> 时间：2012-12-04T20:04:05.143
> 
> 标签：node.js, handlebars.js

我有一个这样的数组：

```
var arr = ["element1","element2"]; 
```

我想在车把文件中获取它的元素。

我用谷歌搜索没有结果，我发现的唯一解决方案是：

```
{{#each files}}
<a href="/"{{path}}"">{{title}}</a>
{{/each}} 
```

但这对我不利，因为我想实现一个目录中的所有文件都可以下载。

我在服务器端尝试的代码：

```
app.get('/download',function(req,res){
var items;
fs.readdir('./download',function(err,files){
        items = files;
});

res.render('download',{
    files:items
});
}); 
```

而且我不知道如何在客户端进行迭代以使数组中的所有元素都可下载。

在客户方面，我有一个包含链接的无序列表。问题是，我不知道如何实现这一目标。

客户端的代码：

```
<div id="container">
            <div class="highlight">
                <img src="img/highlight.png"></img>
                <p>A Click to download</p>
            </div>
            <ul>
                <li class="RoundedAll"><a href="/">Back</a></li>
            </ul>
            <br />
            <ul>
                <!-- What should I put here? -->
            </ul>
        </div> 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:55:02.513

首先，让我们假设你`files:items`是一个看起来像这样的把手阵列。

```
{ files:['filenameOne.ext', 'filenameTwo.ext', 'filenameThree.exe'] }; 
```

现在，当您在响应中编写了此内容并且您想要循环遍历 handlebars.js 中的数组时，这就是您的 HTML 应该是什么样子，使用您的代码。

```
<div id="container">
    <div class="highlight">
        <img src="img/highlight.png"></img>
        <p>A Click to download</p>
    </div>
    <ul>
        <li class="RoundedAll"><a href="/">Back</a></li>
    </ul>
    <br />
    <ul>
        {{#each files}}
        <li>{{this}}</li>
        {{/each}}
    </ul>
</div> 
```

将`<li>{{this}}</li>`包含列表中包含的文件名。然后访问它，您必须创建一个`<a>`链接到控制器的链接，`app.get('/getActualFile', function(){ //serve the file here });`然后将获取的文件写入响应中。

希望这可以为您指明正确的方向，并且在把手中使用迭代器更加明显。

我自己不喜欢车把，但那是因为我不完全习惯它。我自己更喜欢 Node.js 的这种模板语言，[http ://paularmstrong.github.com/swig/](http://paularmstrong.github.com/swig/)

它具有更“清晰”的语法，但考虑到您可以自定义 Handlebars 的不同方式，它可能比 Handlebars 更糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T12:07:12.173

为了使这项工作按照您的编码方式进行，您需要一个键：值对。

```
var arr = {path: "element1", title: "element2"}; 
```

以下：

```
var arr = {path: "downloads/mynewdownload", title: "My New Download"};

{{#each arr}}
     <a href="/{{path}}">{{title}}</a>
{{/each}} 
```

会产生：

```
 <div id="container">
        <div class="highlight">
            <img src="img/highlight.png"></img>
            <p>A Click to download</p>
        </div>
        <ul>
            <li class="RoundedAll"><a href="/downloads/mynewdownload">My New Download</a></li>
        </ul>
        <br />
    </div> 
```

如果您有多个键值对，它们可以存储在一个数组中并以相同的方式访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T08:47:13.310

尝试这个：

```
<ul>
{{#each people}}
   <li>{{this}}</li>
{{/each}}
</ul> 
```

# json - 实体框架：Linq to Json - 检索集合的集合

> ID：13710989
> 
> 赞同：0
> 
> 时间：2012-12-04T20:04:36.103
> 
> 标签：json, linq, entity-framework-4

我有 3 个实体：1\. 一个数据库 2\. 哪个数据库有一个集合的表 3\. 哪个表有一个集合的列

启用延迟加载时 = false

如何返回一个包含每个数据库的 json 字符串，以及一个包含相应表的数组，每个表都有一个包含相应列的数组？

**更新：**

我已经能够返回以下 Json 脚本，但代价是禁用某些类的实例：

![在此处输入图像描述](../Images/0588ac26b770776a27da016e48488acf.png)

这就是我正在寻找的回报。但是，我必须在各个类中列出列与表的关系，以及表与数据库的关系，我不想这样做。

**我确实首先尝试了对外部类的 [ScriptIgnore] 注释，但这没有用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:22:35.050

澄清这些是自定义创建的对象，我相信您正在寻找使用反射。具体来说，调用 Object.GetType() 返回的[PropertyInfo](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)类将为您提供所需的内容。如果您有一个包含表子对象和列孙对象的数据库对象的对象图，您应该遍历该图，在每个对象上调用 GetType() 以获取有关名称和类型的信息（如果需要）。

反射不是快速和高效的，但它应该得到你需要的东西。

如果您引用的对象来自数据库技术：

查看[Context.MetaDataWorkspace](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.metadataworkspace.aspx)。具体看.GetItems()。 [这](http://www.scip.be/index.php?Page=ArticlesNET24)是一个很好的示例/演示，向您展示如何做到这一点。查看“EntityTypes”和“EntityTypes and Properties”部分。

摘录代码：

```
var query = from meta in context.MetadataWorkspace.GetItems(DataSpace.CSpace)
        where meta.BuiltInTypeKind == BuiltInTypeKind.EntityType
        select (meta as EntityType).Name; 
```

这将为您提供表和列的列表。您将无法从实体上下文中获取给定 SQL 服务器上的数据库列表，该实体上下文只知道添加到其中的项目并且您不将数据库添加到上下文中。

我还刚刚注意到您要求您能够以 JSON 格式返回它；使用上面的结果集，您应该能够遍历并手动构建 JSON 或构建可序列化为 JSON 的对象。

# python - 尝试绘图时出现python matplotlib错误：找不到matplotlib.gif

> ID：13710991
> 
> 赞同：2
> 
> 时间：2012-12-04T20:04:49.227
> 
> 标签：python, windows, eclipse, matplotlib, pydev

我在 Win7 32 位（Python 版本是 2.7.3）上使用 PyDev 和 Eclipse。我还安装了 Scipy 和 Matplotlib。现在，我要做的是将绘制的数据保存为 pdf 文件。这是一个代码示例，尽管它与我的问题并不相关：

```
import scipy as sp
import matplotlib.pyplot as plt
from scipy.io import loadmat

fname = "calc.mat"
data = loadmat(fname)
train_acc, test_acc = data['train'], data['test']
# plot results
fig = plt.figure(1,figsize=(12,4))
fig.clf()

# plot the error
ax1 = fig.add_subplot(1,2,1)
ax1.boxplot(sp.hstack((train_acc, test_acc)))
plt.savefig('bcc.pdf') 
```

代码非常简单：从 mat 文件加载一些数据，创建一个绘图并将其存储为图像。现在，当尝试在 Eclipse 中执行代码时，出现以下错误：

```
 File "C:\Users\Kseniya\workspace\BrainComputerInterfacing\src\bci.py", line 223, in test2
 fig = plt.figure(1,figsize=(12,4))
 File "C:\Programme\Python27\lib\site-packages\matplotlib\pyplot.py", line 343, in figure
**kwargs)
 File "C:\Programme\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 79, in new_figure_manager
return new_figure_manager_given_figure(num, figure)
 File "C:\Programme\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 96, in new_figure_manager_given_figure
icon_img = Tk.PhotoImage(file=icon_fname)
 File "C:\Programme\Python27\lib\lib-tk\Tkinter.py", line 3244, in __init__
Image.__init__(self, 'photo', name, cnf, master, **kw)
 File "C:\Programme\Python27\lib\lib-tk\Tkinter.py", line 3200, in __init__
self.tk.call(('image', 'create', imgtype, name,) + options)
_tkinter.TclError: couldn't open "C:\Programme\Python27\lib\site-packages\matplotlib\mpl-data\images\matplotlib.gif": no such file or directory 
```

似乎找不到或无法打开文件 matplotlib.gif，尽管它存在。如果我从控制台运行脚本，我不会收到任何错误，并且脚本会在没有任何错误的情况下终止，从而正确创建图像文件。所以，这似乎是一个 PyDev 错误。有谁知道如何解决它？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:58:38.137

您已经在 Windows 的 Program files 文件夹下安装了 Python，这可能会导致这样的问题，即一个程序抱怨丢失的文件，而另一个程序则在那里向您显示该文件。

发生这种情况是因为 Windows 中的 UAC 系统试图在不完全拒绝写入访问的情况下保护文件夹免受写入。相反，它在某些情况下会将写入重定向到所谓的虚拟化文件夹。

将 Python 安装到默认位置 C:\Python27 可避免此问题。

# java - 说一个类不能被重用是什么意思？（具体来说，Java FX 2 任务）

> ID：13710997
> 
> 赞同：1
> 
> 时间：2012-12-04T20:05:29.820
> 
> 标签：java, javafx-2

“任务是一次性的类，不能重复使用。” [来自 Java FX 2 的 javadocs](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)

说一个类不能被重用是什么意思？如果我创建它的一个实例，我肯定可以一次又一次地使用它 - 如下所示？

```
 Task<Integer> task = new Task<Integer>() { // task example in javadocs
         @Override protected Integer call() throws Exception {
             int iterations;
             for (iterations = 0; iterations < 100000; iterations++) {
                 if (isCancelled()) {
                     break;
                 }
                 System.out.println("Iteration " + iterations);
             }
             return iterations;
         }
     };

for(int i=0; i<5; i++) { // reusing the task 5 times
       Thread th = new Thread(task);
         th.setDaemon(true);
         th.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:18:23.580

这正是你想的那样。Task 的实例只能使用一次。这可能是实际实现的限制，或者向您保证放入任务中的代码只会被调用一次。即使它让您忽略该规定，您也可能不应该这样做。

您链接的文档表明您应该将[Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)用作可重用的类似任务的对象。似乎 Service 有一个方法 createTask() 可以根据需要创建其任务实例。也许有更多 Java FX 2 经验的人可以对此进行扩展。