# StackOverflow 问答 13094000-13094999

# compiler-construction - 在字节码编译器中计算跳转地址的智能解决方案？

> ID：13094001
> 
> 赞同：7
> 
> 时间：2012-10-26T20:29:53.507
> 
> 标签：compiler-construction, bytecode

假设我正在实现一个字节码编译器，类似于 Lua's/Python's... 等等。

我正在遍历 AST，生成字节码指令，然后我遇到了一个循环`break`内部：`if-else``while`

```
while (cond1)
    if (cond2)
        ...
    else
        break 
```

（我尝试写出等效的字节码，但看起来并没有太大帮助。）

关键是，该示例中至少有 4 条“跳转”指令，我想找到一个优雅的解决方案来在编译 AST 时填写跳转地址……我不知道`while`循环的跳转地址或者`break`直到我完全“编译”了内部语句之后。

1.  伪代码解决方案将是理想的
2.  解决方案不应该取决于我是在实现基于寄存器还是基于堆栈的字节码编译器（我正在使用两者）

我还没看龙书呢。

如果我递归地编译 AST，当我到达`break`任意数量的循环和`if-else`块中的语句时，编译器应该如何知道要跳转到哪个空标签？我猜测递归 AST 行走函数外部的某种类型的标签名称堆栈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:55:56.590

你需要的原理叫做“backpatching”：前向跳转填写一个dummy值，生成语句体的代码，然后返回，最后用真值替换dummy值。

例如

```
# start of codegen for 'while'
L1:
  [evaluate cond1]
  jne L2   # forward reference: use a dummy value for now

# start of codegen for 'if ... else'
L3:
  [evaluate cond2]
  jne L4   # another forward reference: use a dummy value for now
  [code in 'if' branch]
  j L5     # another forward reference: use a dummy value for now
L4:
  [code in 'else' branch before 'break']
  j L2
  [code in 'else' branch after 'break']
L5:   # end of 'if ... else'
  # now go back and fill in references to L4, L5 inside the 'if ... else' block
  # end of codegen for 'if ... else'

  # codegen for 'while' continues...
  j L1   # loop
L2:   # end of 'while' loop
  # now go back and fill in references to L2 inside the 'while' block
  # end of codegen for 'while' 
```

* * *

关于您的编辑：

> 如果我递归地编译 AST，当我到达`break`任意数量的循环和`if-else`块中的语句时，编译器应该如何知道要跳转到哪个空标签？我猜测递归 AST 行走函数外部的某种类型的标签名称堆栈。

实现`break`语句的跳转目标是最内层循环的结束；是的，您可以使用显式的外部堆栈来跟踪它。

但是，如果你有一个递归 AST 遍历函数，你已经有一个*隐式*堆栈——递归函数调用的调用帧——所以你可能也不需要一个显式堆栈。

例如在

```
...
while (outer)
    ...
    if (outer_done)
        break
    ...

    while (inner)
        ...
        if (inner_done)
            break
        ...
    [break from inner 'while' ends up here]

    ...
    if (outer_done_2)
        break
    ...
[break from outer 'while' ends up here]
... 
```

内循环的整个代码生成`while`发生在外`while`循环主体的 AST 的递归遍历中。在这个递归调用中，您只需要关心内部循环，而不是外部循环。

所以，你需要做的就是：

*   在开始处理 a 时保存任何当前的回补状态`while`
*   开始一个新的空列表以跟踪`break`出现在此正文中的任何内容`while`
*   处理正文（这可能会导致递归调用）
*   应用背贴
*   然后在退出之前恢复以前的状态。

例如有点像这样：

```
codegen for while:
    save previous break backpatch list
    initialise break backpatch list as empty
    perform codegen for evaluating condition
    perform codegen for body statements
    apply backpatches
    restore previous break backpatch list 
```

当前的`break`backpatch 列表必须是传递给所有 codegen 函数的某个状态的一部分（codegen for`break`需要附加到它）。但是保存的列表可以作为`while`codegen 函数的局部变量进行跟踪。

# asp.net - 遍历列表以插入 SQLite 表

> ID：13094007
> 
> 赞同：0
> 
> 时间：2012-10-26T20:30:13.730
> 
> 标签：asp.net, sqlite

我正在使用对 Web 服务的 AJAX 调用检索服务调用列表。我需要遍历 Web 服务返回的每个服务调用并将其插入到 SQLite 表中。我正在努力解决循环中的时间问题。例如，如果有两个服务调用，两行将插入到表中，但都是来自第二个调用的数据。我尝试移动我的变量声明和值分配，如果它们在事务中，那么所有字段都返回未定义。在事务和所有行之外插入作为最后一条记录。

```
$.ajax({
    type: "POST",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    url: "MyService.asmx/GetCalls",
    data: '{ user:"' +  user +'"}',
    success: function (data) {
        saveCalls(data.d);
    },
    error: function (xhr) {
        var err = eval("(" + xhr.responseText + ")");
        alert("Retrieve Calls: " + err.Message);
    }
});

function saveCalls(result) {
   var insertString = "Insert Into Calls Values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

   var call, po, adrsCode, status, dispDate, dispTime, desc, customer, address, city, state, zip, phone, equipment, tracking, srvType, statDesc;

   $.each(result, function () {
       call = this.CallNumber;
       po = this.PoNumber;
       adrsCode = this.AdrsCode;
       status = this.Status;
       dispDate = this.DispatchedDate;
       dispTime = this.DispatchedTime;
       desc = this.Description;
       customer = this.Customer;
       address = this.Address;
       city = this.City;
       state = this.State;
       zip = this.Zip;
       phone = this.Phone;
       equipment = this.Equipment;
       tracking = this.Tracking;
       srvType = this.SrvType;
       statDesc = this.StatDesc;
       db.transaction(function (tx) {

          tx.executeSql(insertString, [call, po, adrsCode, status, dispDate, dispTime, desc, customer, address,
            city, state, zip, phone, equipment, tracking, srvType, statDesc],
            onSqlSuccess, onSqlError);

    });
}); 
```

}

编辑：适用于有同样问题的人的代码：

```
function saveCalls(result) {
   var insertString = "Insert Into Calls(CallNumber, PoNumber, AdrsCode, SrvStat, DispatchDate, DispatchTime, SvcDescription, CustNmbr, Address, "
            + "City, State, Zip, Phone, Equipment, Tracking, SrvType, StatDesc) ";

   $.each(result, function () {

       insertString = insertString + "Select '{0}' as CallNumber,'{1}' as PoNumber,'{2}' as AdrsCode,'{3}' as SrvStat,'{4}' as DispatchDate,'{5}' as DispatchTime,'{6}' as SvcDescription,'{7}' as CustNmbr,'{8}' as Address,'{9}' as City,'{10}' as State,'{11}' as Zip,'{12}' as Phone,'{13}' as Equipment,'{14}' as Tracking,'{15}' as SrvType,'{16}' as StatDesc Union "
                    .format(this.CallNumber, this.PoNumber, this.AdrsCode, this.Status, this.DispatchedDate, this.DispatchedTime,
                        this.Description, this.Customer, this.Address, this.City, this.State, this.Zip, this.Phone, this.Equipment, 
                        this.Tracking, this.SrvType, this.StatDesc);

   });

   db.transaction(function(tx) {
      tx.executeSql(insertString.substring(0, insertString.length - 6), [],
        onSqlSuccess, onSqlError);
   }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:04:50.827

对于遇到相同问题的任何人，请参阅添加到原始帖子的附加代码。

# html - 不同国家/地区的 jquery cookie 链接

> ID：13094017
> 
> 赞同：0
> 
> 时间：2012-10-26T20:30:52.067
> 
> 标签：html, css, jquery-ui, jquery

我正在尝试在 jquery 中做 cookie 的东西，但它没有得到实现，你们能解决我的问题吗

**html代码**

```
<a rel="en_CA" class="selectorCountries marginUnitedStates locale-link" href="http://www.teslamotors.com/en_CA">united states</a>
<a rel="en_US" class="selectorCountries marginSecondCountry locale-link" href="http://www.teslamotors.com/en_CA">canada</a>
<a rel="en_BE" class="selectorCountries marginCanadaFrench locale-link" href="http://www.teslamotors.com/en_BE">canada(french)</a> 
```

我在下面提供我的 js 代码

[http://jsfiddle.net/SSMX4/76/](http://jsfiddle.net/SSMX4/76/)

当我单击弹出窗口中的不同国家/地区链接时，它的行为应类似于此站点

[http://www.teslamotors.com/it_CH](http://www.teslamotors.com/it_CH)

```
 $('.locale-link').click(function(){
        var desired_locale = $(this).attr('rel');
        createCookie('desired-locale',desired_locale,360);
        createCookie('buy_flow_locale',desired_locale,360);
        closeSelector('disappear');
    })

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    });

function checkCookie(){
        var cookie_locale = readCookie('desired-locale');
        var show_blip_count = readCookie('show_blip_count');
        var tesla_locale = 'en_US'; //default to US
        var path = window.location.pathname;
        // debug.log("path = " + path);
        var parsed_url = parseURL(window.location.href);
        var path_array = parsed_url.segments;
        var path_length = path_array.length
        var locale_path_index = -1;
        var locale_in_path = false;
        var locales = ['en_AT', 'en_AU', 'en_BE', 'en_CA',
                        'en_CH', 'de_DE', 'en_DK', 'en_GB',
                        'en_HK', 'en_EU', 'jp', 'nl_NL',
                        'en_US', 'it_IT', 'fr_FR', 'no_NO']
        // see if we are on a locale path
        $.each(locales, function(index, value){
            locale_path_index = $.inArray(value, path_array);
            if (locale_path_index != -1) {
                tesla_locale = value == 'jp' ? 'ja_JP':value;
                locale_in_path = true;
            } 
        });
        // debug.log('tesla_locale = ' + tesla_locale);
        cookie_locale = (cookie_locale == null || cookie_locale == 'null') ? false:cookie_locale;
        // Only do the js redirect on the static homepage.
        if ((path_length == 1) && (locale_in_path || path == '/')) {
            debug.log("path in redirect section = " + path);
            if (cookie_locale && (cookie_locale != tesla_locale)) {
                // debug.log('Redirecting to cookie_locale...');
                var path_base = '';
                switch (cookie_locale){
                    case 'en_US':
                        path_base = path_length > 1 ? path_base:'/';                    
                        break;
                    case 'ja_JP':
                        path_base = '/jp'
                        break;
                    default:
                        path_base = '/' + cookie_locale;
                }
                path_array = locale_in_path != -1 ? path_array.slice(locale_in_path):path_array;
                path_array.unshift(path_base);
                window.location.href = path_array.join('/');
            }
        }
        // only do the ajax call if we don't have a cookie
        if (!cookie_locale) {
            // debug.log('doing the cookie check for locale...')
            cookie_locale = 'null';
            var get_data = {cookie:cookie_locale, page:path, t_locale:tesla_locale};
            var query_country_string = parsed_url.query != '' ? parsed_url.query.split('='):false;
            var query_country = query_country_string ? (query_country_string.slice(0,1) == '?country' ? query_country_string.slice(-1):false):false;
            if (query_country) {
                get_data.query_country = query_country;
            }
            $.ajax({
                url:'/check_locale',
                data:get_data,
                cache: false,
                dataType: "json",
                success: function(data){
                            var ip_locale = data.locale;
                            var market = data.market;
                            var new_locale_link = $('#locale_pop #locale_link');
                            if (data.show_blip && show_blip_count < 3) {
                                setTimeout(function(){
                                    $('#locale_msg').text(data.locale_msg);
                                    $('#locale_welcome').text(data.locale_welcome);
                                    new_locale_link[0].href = data.new_path;
                                    new_locale_link.text(data.locale_link);
                                    new_locale_link.attr('rel', data.locale);
                                    if (!new_locale_link.hasClass(data.locale)) {
                                        new_locale_link.addClass(data.locale);
                                    }
                                    $('#locale_pop').slideDown('slow', function(){
                                        var hide_blip = setTimeout(function(){
                                            $('#locale_pop').slideUp('slow', function(){
                                                        var show_blip_count = readCookie('show_blip_count');
                                                        if (!show_blip_count) {
                                                            createCookie('show_blip_count',1,360);
                                                        }
                                                        else if (show_blip_count < 3 ) {
                                                            var b_count = show_blip_count;
                                                            b_count ++; 
                                                            eraseCookie('show_blip_count');
                                                            createCookie('show_blip_count',b_count,360);
                                                        }
                                                });
                                            },10000);
                                        $('#locale_pop').hover(function(){
                                            clearTimeout(hide_blip);
                                            },function(){
                                                setTimeout(function(){$('#locale_pop').slideUp();},10000);
                                            });
                                    });
                                },1000);
                            }
                        }
            });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:38:22.467

这将对您有很大帮助！

[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)

我经常用这个。非常简单易学。内置所有必要的 cookie 功能，并允许您使用少量代码来创建 cookie、删除它们、使它们过期等。

如果您对如何使用有任何疑问，请告诉我（尽管 DOCS 有相当数量的说明）。

# c# - 取消装箱冻结 Winforms ComboBox

> ID：13094025
> 
> 赞同：2
> 
> 时间：2012-10-26T20:31:23.303
> 
> 标签：c#, winforms, combobox, selecteditem, unboxing

这里非常具体和奇怪的问题，谷歌和其他人无法给我答案。

我有一个带有两个组合框的表单，我们会说 A 和 B。在 A 中选择一个项目会从数据库中提取一些信息，将其放入 Dictionary，然后使用 BindingSource 将其放入 B。当用户从 B 中选择某些内容时，返回值已设置，仅此而已。

问题出在 ComboBox B 上。在其 SelectedIndexChanged 处理程序中，尝试将其 SelectedItem 拆箱会导致 ComboBox “冻结”，因此它不再显示来自 ListBox B 的新选择的结果，并且长列表在向上/向下滚动时不会刷新。但是，如果您记得数据的位置，ComboBox 仍然有效

B 的 SelectedIndexChanged 处理程序：

```
private void comboBox2_SelectedIndexChanged_1(object sender, EventArgs e)
{
    if (dataSourceSelect)
        return;
    else
    {
        ComboBox comboBox = (ComboBox)sender;

        var dummy = comboBox2.SelectedItem;
        // System.Collections.Generic.KeyValuePair<int, string> dummy2 =
        //     (System.Collections.Generic.KeyValuePair<int, string>)dummy;
    }
} 
```

有两个虚拟变量表明不是 SelectedItem 属性导致了问题，只有拆箱。

使用这个确切的代码可以让 ComboBox 正常工作，但它无法返回数据。启用注释掉的行可以让它返回值，但会阻止它刷新。

此代码不会显示两件事：

1.  即使您将注释行放入，一切正常，直到您从 ComboBox A 进行第二次选择。换句话说，如果您从 ComboBox A 中选择*一次*，ComboBox B 将根据您的输入刷新。但是如果从 A 中的选择*发生变化*，B 会冻结显示的最后一个值，并且滚动时长列表不再更新。

2.  填充 ComboBox A 和 B 的代码几乎相同，它们的单击处理程序也是如此，但 A 始终可以正常工作，而当您从 A 中进行第二次选择时，B 会冻结。

我只能从理论上推测其原因，但我的猜测是拆箱使用了一些临时内存位置，该位置讨厌被触摸两次。根据 A 的选择填充 B 的代码也可能存在一些问题，但是当取消装箱被注释掉时它工作正常这一事实减少了这种怀疑。

据我所知，我需要执行以下操作之一：

1.  以另一种方式访问​​ SelectedItem
2.  无需拆箱即可访问 SelectedItem 中的数据
3.  找到一种完全避免拆箱的方法

为格式化道歉，StackOverflow 似乎忽略了我试图使其更具可读性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:43:31.440

非常感谢 Thomas Levesque ( [https://stackoverflow.com/users/98713/thomas-levesque](https://stackoverflow.com/users/98713/thomas-levesque) ) 建议检查评论中的异常。

由于我想在 A 中进行新选择后将一个包含不同信息的新字典分配给 ComboBox B，因此我首先将其 B 的 DataSource 设置为 null（在 A 的 SelectedIndexChanged 事件中）。这触发了 B 的 SelectedIndexChanged 事件，该事件试图访问空列表的 SelectedItem，抛出 NullReferenceError，导致错误和冻结。

有两种方法可以避免这种情况：

1.  在尝试拆箱值之前检查 B 的 SelectedItem 是否为空
2.  使用其他代码阻止 SelectedIndexChanged 事件访问 B 的 SelectedItem

# c++ - “下标需要数组或指针类型”？和功能？

> ID：13094030
> 
> 赞同：0
> 
> 时间：2012-10-26T20:31:59.287
> 
> 标签：c++, arrays, function

我是 C++ 的初学者，在尝试创建函数来执行每个任务时遇到了很多麻烦。我想我可以在主函数中处理每个任务，但我不知道如何将它们分解为单独的函数（例如：我不知道如何打破 .txt 文件的读取并将其显示为单独的函数。）

此外，对于“分数”，我不断收到一条错误消息，上面写着“下标需要数组或指针类型”，但我不知道这是什么意思。

注意：我还没有完全完成程序，所以曲线、显示曲线和平均曲线还没有制作函数，我稍后会做。

```
//this program reads data from a .txt file, displays the scores, finds the average score, finds the highest score, and displays the curve

#include <iostream>
#include <fstream>

using namespace std;

//function prototypes

void readscores (int); // read exam scores into an array from examscores.txt
void displayscores (int); // display scores in row of four scores
double average (const double scores [], int); //??? calculate average score and display
double maxscore (const double[], int); // find max and display
double curve (const double []); //find the "curve" based on the highest scores
double displaycurve (const double []);// display curves in rows of four
double averagecurve (const double []); //calculate the average curved score and display

int main ()
{
    const int array_size = 30; //array size
    double scores[array_size];//array of 30 elements
    int count = 0;
    ifstream inputfile;

    //open file
    inputfile.open("ExamScores.txt");

    //read scores
    while (count < array_size && inputfile >> scores[count])
        count ++;
    //display scores
    cout << "The numbers are:";
    for (count = 0; count < array_size; count++)
        displayscores(scores[count]);

    //calculate the average
    cout << "The average is:";
    average (scores, array_size);

    //find the max score and display

    cout << "The maximum score is:";
    maxscore (scores, array_size);

    return 0;
}

void displayscores (int num)
{
    cout << num << " ";
    }

double average (const double scores, int array_size)
{double total = 0;
    double average;

    for (int count = 0; count < array_size; count ++)
total += scores[count];
    average = total /array_size;
}

double maxscore (const double scores, int array_size)
{double max;

max = scores [0];

for (int count = 1; count < array_size; count++)
{if (scores[count] > max)
max  = scores[count];
}
return max;
} 
```

这些是 .txt 文件中的数字或分数：

```
67 64 83 81 72 75 85 81 56 88 71 80 90 58 78 74 84 64 72 69 78 87 84 72 83 68 62 88 70 75 
```

如果我的编码完全错误，我深表歉意，因为教授不喜欢解释他在教什么，而且这个学期已经完成了一半，所以我仍在努力围绕基本概念进行思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:39:12.743

您已在前向声明中正确指定了参数：

```
double average ( double scores[], int array_size); 
```

但是在实现中，您省略了“[]”，因此该函数不知道它正在获取一个数组。

改变：

```
double average ( double scores, int array_size) 
```

至：

```
double average ( double scores[], int array_size) 
```

同样在其他应该采用数组参数的函数上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:35:18.253

```
const double scores 
```

是一个`double`变量。然而你正在尝试做：

```
max = scores[0]; 
```

被`[0]`称为“下标”，`scores`如果它不是数组或指针，它对于标量类型（如 ）没有任何意义。

您的`maxscrore()`函数可能应该使用以下签名：

```
double maxscore (const double scores[], int array_size) 
```

对于您犯相同错误的所有其他功能也是如此。

# spring - Hibernate 4、JPA 2 和 HSQL，无法通过 ID 查询

> ID：13094031
> 
> 赞同：0
> 
> 时间：2012-10-26T20:32:02.217
> 
> 标签：spring, hibernate, jpa-2.0, hsqldb

我有一个名为 Service 的域对象，其中包含一个 id 字段：

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE)
@Column(name = "id", nullable = false)
private Integer id;

@Column(name = "type")
private Service.ServiceTypes serviceType; 
```

在我的 DAO 实现中，我可以通过 serviceType 轻松查询：

```
@Override
    public Set<Service> queryDatabaseByServiceType(ServiceTypes serviceType) {
        logger.debug("Querying the database by service type " + serviceType.toString());
        return new HashSet<Service>(super.entityManager.createQuery("from Service s where s.type = :serviceType").setParameter("serviceType", serviceType).getResultList());
    } 
```

当我复制并通过该方法并尝试对“id”运行查询时，我得到零结果。

```
@Override
    public Service queryDatabaseByServiceId(int id) {
List<Service> results = super.entityManager.createQuery("from Service s where s.id = :id").setParameter("id", id).getResultList();
return results.get(0); 
```

总是什么都不返回......我已经尝试过一百万种不同的方式......

```
CriteriaBuilder builder = super.entityManager.getCriteriaBuilder();
CriteriaQuery<Service> criteria = builder.createQuery(Service.class);
Root<Service> s1 = criteria.from(Service.class);
TypedQuery<Service> query = super.entityManager.createQuery(
    criteria.select(s1).where(builder.equal(s1.get("id"), id)));
Service service = query.getSingleResult();
return service; 
```

依然没有。我不确定为什么我可以查询其他列但不能查询 ID。我已经验证了我传入的 ID 是有效的，没有任何效果。

有任何想法吗？

编辑：这是我尝试查询的其他方法：

```
Service ser = super.entityManager.find(Service.class, new Integer(1));

List z1 = super.entityManager.createQuery("select s.id from Service s").getResultList();

List results1 = super.entityManager.createQuery("SELECT s FROM Service s WHERE id = 1").getResultList();

List<Service> results = super.entityManager.createQuery("from Service as s where s.id = :id").setParameter("id", new Integer(1)).getResultList(); 
```

我尝试将我的域对象中的字段更改为“idx”而不是“id”，我尝试将列名更改为“service_id”，认为它用于 id 字段的内容和我的对象之间可能存在一些内部冲突，但仍然没有。如前所述和评论中所述，通过任何其他字段进行查询都可以正常工作，并且我可以轻松获得显示 ID 的结果：

```
return new HashSet<Service>(super.entityManager.createQuery("from Service s where s.type = :serviceType").setParameter("serviceType", serviceType).getResultList()); 
```

生成一个填充列表，当转换为 json 时，我在浏览器中看到了这个：

```
{"services":[{"id":2,"serviceType":"x",..... 
```

对于所有这些不同类型的查询，以下是日志输出：

```
DEBUG: service.impl.ServiceServiceImpl - Querying the database by service id 2
Hibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=?
TRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 1
INFO : service.impl.ServiceServiceImpl - results list from id query: 0
Hibernate: select service0_.service_id as service1_0_0_, service0_.description as descript2_0_0_, service0_.name as name0_0_, service0_.type as type0_0_, service0_.tmodel as tmodel0_0_, service0_.uddi_id as uddi6_0_0_, service0_.url as url0_0_, service0_.version as version0_0_ from services service0_ where service0_.service_id=?
TRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 1
Hibernate: select service0_.service_id as col_0_0_ from services service0_
INFO : service.impl.ServiceServiceImpl - z1 count: 0
Hibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=1
INFO : service.impl.ServiceServiceImpl - results1 from id query: 0
Hibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=2
INFO : service.impl.ServiceServiceImpl - results2 from id query: 0
Hibernate: select service0_.service_id as service1_0_0_, service0_.description as descript2_0_0_, service0_.name as name0_0_, service0_.type as type0_0_, service0_.tmodel as tmodel0_0_, service0_.uddi_id as uddi6_0_0_, service0_.url as url0_0_, service0_.version as version0_0_ from services service0_ where service0_.service_id=?
TRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T07:13:17.307

我们项目中使用的是JPA2，但是没有这种问题，不如把“public Service queryDatabaseByServiceId(int id){”id类型改成Integer，在我看来，在hibernate Integer会是更好的选择。让我知道发生了什么。另一件事是更改 log4j 以打印 sql 以及检查它的参数值。

```
<logger name="org.hibernate.type">
    <level value="trace"></level>
</logger>
<logger name="org.hibernate.sql">
    <level value="trace"></level>
</logger> 
```

# tsql - 删除重复的日期期间

> ID：13094034
> 
> 赞同：2
> 
> 时间：2012-10-26T20:32:23.143
> 
> 标签：tsql, date, duplicates, duplicate-removal

我正在编写脚本以从具有数百万行的数据库中获取数据，并且遇到了周期间隙的问题。我们已经决定，小于 10 天的间隔根本不应被视为间隔。因此，应该删除这些空白（参见下面的示例。粗体日期构成“真实”感兴趣的时期）

*   ID InDate OutDate
*   1 **2008-10-10** 2009-02-05
*   1 2009-02-08 **2009-05-13**
*   1 2011-01-01 2011-05-20
*   2 2007-03-17 2008-10-19
*   2 **2009-05-30** 2010-10-12
*   2 2010-10-14 **2010-12-31**

因此，出现了几个问题。第一个问题是确定哪些 Outdates 和 Indates 彼此接近，以便将其转换为一个时期。下一个问题是将 Outdate 从较高的行号移动到较低的行号（即在表上）。最后一个问题是识别并删除现在重复的行。

我试图解决下面的问题。表#t4a 解决了前两个问题。表#t4aa 中的策略是通过在新（虚拟）变量中标记有问题的重复行来消除重复，并在稍后阶段消除所有此类值（1:s）。但是，它不起作用！所有行都标有 0，即使是那些应该标有 1 的行。有什么建议吗？

--此临时表测量间隙并创建一个新变量 OutDate2，在间隙很小（小于 11 天）的情况下，该变量在行上写入下一个 Outdate，而不是原始值。

```
WITH C AS (SELECT Id, InDate, OutDate, ROW_NUMBER() OVER (PARTITION BY Id ORDER BY InDate) Rownum FROM #t4 t4)  
SELECT cur.Rownum, cur.Id, cur.InDate CurInDate, cur.OutDate, nxt.InDate NxtInDate, DATEDIFF(day, cur.OutDate, nxt.InDate) Number_of_days,   
  CASE WHEN DATEDIFF(day, cur.OutDate, nxt.InDate)<11 AND DATEDIFF(day, cur.OutDate, nxt.InDate)>0 THEN nxt.OutDate ELSE cur.OutDate END AS OutDate2  
INTO #t4a  
FROM C cur  
LEFT OUTER JOIN C nxt ON (nxt.rownum=cur.rownum+1 AND nxt.Id=cur.Id) 
```

--此临时表创建一个虚拟表，用于标识行的重叠，以便在以后的临时表中消除这些行。正是这张桌子不起作用。

```
WITH C AS (SELECT Id, InDate, OutDate, ROW_NUMBER() OVER (PARTITION BY Id ORDER BY InDate) rownum FROM #t4a)  
SELECT cur.Id, cur.InDate, nxt.OutDate2,   
  CASE WHEN cur.OutDate2 < nxt.InDate THEN 1.0 ELSE 0.0
  END AS Overlap  
INTO #t4aa  
FROM C cur  
LEFT OUTER JOIN C nxt on (cur.rownum=nxt.rownum+1 AND cur.Id=nxt.Id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:12:49.977

这是一种概念性的，但可能会给你一些想法

```
WITH C AS 
(SELECT Id, InDate, OutDate, ROW_NUMBER() OVER (PARTITION BY Id ORDER BY InDate) Rownum FROM #t4 t4) 

    select Cgood.* 
    from c 
    join C as Cgood 
      on Cgood.ID = C1.ID 
     and Cgood.Rownum = C.Rownum + 1
     and DATEDIFF(day, C.OutDate, nxt.InDate)>=11
    group by Cgood.* 
    union 
    select Cgood.*
    from c  
    join C as Cgood 
      on Cgood.ID = C1.ID 
     and Cgood.Rownum = 1 
     and C.Rownum = 2 
     and DATEDIFF(day, C.OutDate, nxt.InDate)>=11
    group by Cgood.* 
    union
    select cMerge.ID, c.Indate, cMerge.OutDate
    from c
    join C as cMerge 
      on cMerge.ID = C1.ID 
     and cMerge.Rownum = C.Rownum + 1
     and DATEDIFF(day, C.OutDate, cMerge.InDate) < 11
    group by cMerge.ID, c.Indate, cMerge.OutDate
    union
    select cMerge.ID, c.Indate, cMerge.OutDate
    from c
    join C as cMerge 
      on cMerge.ID = C1.ID 
     and cMerge.Rownum = 1 
     and C.Rownum = 2
     and DATEDIFF(day, C.OutDate, cMerge.InDate) < 11
    group b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:04:55.640

我昨天解决了我自己的问题。我摆脱了最后一个临时表，并在第一个临时表中创建了虚拟变量。解决方案的核心是向后和向前连接。

```
WITH C AS (SELECT Id, InDate, OutDate, ROW_NUMBER() OVER (PARTITION BY Id ORDER BY InDate) Rownum FROM #t4 t4)  
SELECT cur.Rownum, cur.Id, cur.InDate CurInDate, cur.OutDate, nxt.InDate NxtInDate, DATEDIFF(day, cur.OutDate, nxt.InDate) Number_of_days,  
CASE  
WHEN DATEDIFF(day, prv.OutDate, cur.InDate)<11  
AND DATEDIFF(day, prv.OutDate, cur.InDate)>0  
THEN 1.0  
ELSE 0.0  
END AS Overlap,      
CASE  
WHEN DATEDIFF(day, cur.OutDate, nxt.InDate)<11  
AND DATEDIFF(day, cur.OutDate, nxt.InDate)>0  
THEN nxt.OutDate  
ELSE cur.OutDate  
END AS OutDate2  
INTO #t4a  
FROM C cur  
LEFT OUTER JOIN C prv ON (prv.rownum=cur.rownum-1 AND prv.Id=cur.Id)  
LEFT OUTER JOIN C nxt ON (nxt.rownum=cur.rownum+1 AND nxt.Id=cur.Id) 
```

# html - 网站无法识别 img alt 标签

> ID：13094037
> 
> 赞同：0
> 
> 时间：2012-10-26T20:32:28.720
> 
> 标签：html, image, validation, alt

[验证](http://validator.w3.org/check?uri=http://zoparealty.com/&charset=%28detect%20automatically%29&doctype=HTML5&group=0&user-agent=W3C_Validator/1.3)站点时，我收到以下错误附加到多个图像：

一个 img 元素必须有一个 alt 属性，除非在某些情况下。有关详细信息，请参阅有关为图像提供替代文本的指南。

尽管我在代码中包含了 alt 标签，但还是会出现这种情况：

```
<nav>
        <ul>
            <li><a href="index.php?page_id=7"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/about.png" alt="about%20Z" /></a>
                <ul class="about">
                    <li><a href="index.php?page_id=35">ZR</a> |</li>
                    <li><a href="index.php?page_id=38"> RA</a> |</li>
                    <li><a href="index.php?page_id=40"> WM + SB</a> |</li>
                    <li><a href="index.php?page_id=42"> ZV</a></li>
                </ul><!-- end subs -->
            <li><a href="index.php?page_id=16"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/blog.png" alt="ZB" /></a></li>
            <li><a href="index.php?page_id=13"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/share.png" alt="swZ" /></a></li>
            <li><a href="index.php?page_id=9"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/contact.png" alt="cZ" /></a></li>
            <li><a href="http://www.thezopateam.com/"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/properties.png" alt="ZP" /></a>
                <ul class="properties">
                    <li><a href="http://www.thezopateam.com/">Buying</a> |</li>
                    <li><a href="index.php?page_id=46"> Selling</a></li>
                </ul><!-- end subs -->
            <li><a href="index.php?page_id=11"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/gallery.png" alt="Zg" /></a></li>
        </ul>
    </nav> 
```

有什么想法可能导致这种情况/如何补救？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:41:28.137

在您的代码中，您似乎首先在内部缺少该`alt`属性`<img>``<a>`

```
<li>
   <a href="index.php?page_id=7">
      <img src="<?php bloginfo('url'); ?>"> <!-- Missing Alt Attribute -->
      <img src="<?php echo get_template_directory_uri(); ?>/img/about.png" alt="about%20Z" />
   </a>
... 
```

大约有 6 个`<img>`标签没有`alt`属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:35:46.790

如果您选中“选项”下的“显示源”，然后单击重新验证，您将能够准确看到这些问题的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:43:19.513

每个`<img>`标签都必须有一个`alt`属性。验证器应该准确地告诉您哪些图像（哪些行）缺少`alt`属性。Alt 属性为那些看不到/解析图像的人提供了图像的上下文（想想谷歌）。

很难确定（因为您提供的是 PHP，而不是 HTML），但看起来这些中的每一个`<img src="<?php bloginfo('url'); ?>">`都缺少`alt`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T20:48:26.567

这些错误与缺少 alt 标签无关（因为它们在那里），而是由我的 php.ini 中的错误触发。修复了错误，页面验证。

# blackberry - 波纹模拟器支持cookies

> ID：13094043
> 
> 赞同：1
> 
> 时间：2012-10-26T20:33:02.853
> 
> 标签：blackberry, blackberry-simulator, blackberry-webworks

我正在研究 Blackberry Webworks Ripple Emulator。我的应用程序涉及存储 cookie，并且无法在模拟器上运行。但它适用于设备。

我不确定 Ripple 模拟器是否适用于 cookie。

请确认。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T20:21:58.960

是的，Ripple 确实支持 cookie。但是，这取决于您在 Chrome 浏览器中建立的任何安全设置。因此，如果您将 cookie 缓存设置设置为“不接受”，那么 Ripple 也不会。你的情况可能是这样吗？

尝试在 Ripple 中加载此 URL 并创建一个 cookie（来自底部的示例部分）：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# facebook - Spring social ConnectController /connect/facebook 给出 404 错误

> ID：13094047
> 
> 赞同：3
> 
> 时间：2012-10-26T20:33:20.217
> 
> 标签：facebook, spring, spring-mvc, spring-social

我正在尝试让 facebook 登录与 spring social 一起使用。 **我在 facebook 上创建了一个应用程序。**

**调度程序 Servlet**

```
 <servlet-mapping>
    <servlet-name>ABC</servlet-name>
    <url-pattern>*.cs</url-pattern>
    </servlet-mapping> 
```

**配置了xmls**

```
<servlet-mapping>
<servlet-name>ABC</servlet-name>
<url-pattern>*.cs</url-pattern>
</servlet-mapping>

<!-- Configure a connection repository through which account-to-provider connections will be stored --> 
<beans:bean id="connectionRepository" class="org.springframework.social.connect.jdbc.JdbcConnectionRepository">
<beans:constructor-arg ref="dataSource" />
<beans:constructor-arg ref="textEncryptor" />
</beans:bean>

<!-- Configure a Facebook service provider -->
<beans:bean class="org.springframework.social.facebook.connect.FacebookServiceProvider">
<beans:constructor-arg index="0" value="564846465216" />
<beans:constructor-arg index="1" value="f4554iojfjh9iu7km54f54pok5ok4" />
<beans:constructor-arg index="2" ref="connectionRepository" />
</beans:bean>

<beans:bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" factory-method="noOpText" />

<beans:bean class="org.springframework.social.web.connect.ConnectController">
<beans:constructor-arg index="0" value="http://localhost:8080/CitySpanks/" />
</beans:bean> 
```

**我指的是这个链接** [http://static.springsource.org/spring-social/docs/1.0.0.M2/reference/html/connecting.html](http://static.springsource.org/spring-social/docs/1.0.0.M2/reference/html/connecting.html)

**在我的jsp中**

```
<a href="<c:url value="connect/facebook" />">Connect to Facebook</a> 
```

有什么我想念的吗？？？单击上面的链接时，我不断收到 404 错误。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T03:49:53.010

我不确定您在项目中的位置，但我认为以下内容可能很容易被忽略...

如果您查看[spring-social-showcase](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-sec/src/main/webapp/WEB-INF/views/connect)的示例项目，您会注意到在

```
spring-social-showcase-sec/src/main/webapp/WEB-INF/views/connect 
```

存在以下页面：status.jsp、facebookConnect.jsp、facebookConnected.jsp。

在示例项目中，当请求以下（左）时，它将解析 .jsp 的以下（右）：

```
"connect/facebook" => Connected => "connect/facebookConnected.jsp"
"connect/facebook" => Not Connected => "connect/facebookConnect.jsp"
"connect"          => "connect/status.jsp" 
```

这在此处记录：[4.3.1 显示连接页面](http://static.springsource.org/spring-social/docs/1.0.x/reference/htmlsingle/#connect-controller-flow-1)

因此，要让该示例在您的代码中运行，您必须创建与上面的 .jsp 相同的目录结构“WEB-INF/views/connect/”。否则将找不到它们，因此找不到 404。我相信这是由`ConnectController`课程在幕后解决的，如上面链接的文档中所述。

* * *

但是，您可能希望从使用 spring-social-samples 中的 web.xml 配置开始，一旦掌握了窍门，就从那里开始。

```
<!-- Processes application requests -->
<servlet>
  <servlet-name>appServlet</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value></param-value>
  </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>appServlet</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:24:01.643

DispatcherServlet 映射到 *.cs，但 JSP 中的链接是 /connect/facebook（相对于应用程序根目录）。该 URL 不以 .cs 结尾，因此没有匹配项并且 DispatcherServlet 永远不会参与其中。

尽管您仍然可以将 DispatcherServlet 映射到任意 URL 模式，但自 Spring 3.0 以来的“最佳实践”是将其简单地映射到“/”，以允许它响应各种 URL，包括那些用于 RESTful API 的 URL。

当然，这也意味着 DispatcherServlet 将响应对图像、样式表、javascript 和其他资源的请求，这可能不是您想要的。并被创建来解决这个问题。[有关详细信息，请参阅此处](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-static-resources)和[此处](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler)的参考文档。

# asp.net - 菜单控件 .ascx 标签访问

> ID：13094055
> 
> 赞同：1
> 
> 时间：2012-10-26T20:34:20.043
> 
> 标签：asp.net, vb.net

我有多个网页使用的控件。在这个控件中，我正在运行一个存储过程来获取用户的权限级别。然后我将它存储在一个不可见的标签中。在加载此菜单控件的页面中，根据权限级别会发生不同的事情，主要是启用/禁用按钮。我的问题是我可以从它所在页面的 VB 访问我在菜单控件 (.ascx) 中放置的标签吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:05:31.743

有几种方法。说你的标签是这样的：

```
<asp:Label ID="lblPermission" runat="server" Text="Label"></asp:Label> 
```

1：您可以获取标签的VALUE like。

```
Public ReadOnly Property Permission As String
     Get
         Return lblPermission.Text
     End Get
 End Property 
```

2：获取标签本身，如：

```
 Public ReadOnly Property LblPermission As Label
     Get
         Return lblPermission
     End Get
 End Property 
```

3：找到UC里面的lable（下面是MyMenuUC1）就是菜单usercontrol的id：

```
Dim lblPermission As Label = CType(MyMenuUC1.FindControl("lblPermission"),Label) 
```

4：像这样抓取字符串：

```
Dim permission As String = CType(MyMenuUC1.FindControl("lblPermission"),Label).Text 
```

# java - 在 3D 条形图中设置多种颜色 - JFreeChart

> ID：13094063
> 
> 赞同：1
> 
> 时间：2012-10-26T20:35:07.137
> 
> 标签：java, jfreechart

我是 JFreeChart 库的新手。我目前正在使用 3D 条形图，我想知道是否可以让每个生成的 3D 条具有不同的颜色？它们目前都是黄色的，如下所示。

有什么我可以覆盖来改变颜色的吗？

谢谢。

***代码：***

```
import java.awt.Dimension;
import javax.swing.JPanel;
import org.jfree.chart.*;
import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.CategoryLabelPositions;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.chart.renderer.category.CategoryItemRenderer;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class jfree extends ApplicationFrame
{
    {
        // set a theme using the new shadow generator feature available in
        // 1.0.14 - for backwards compatibility it is not enabled by default
        ChartFactory.setChartTheme(StandardChartTheme.createDarknessTheme());
    }

    public jfree(String s)
    {
        super(s);
        JPanel jpanel = createDemoPanel();
        jpanel.setPreferredSize(new Dimension(500, 270));
        setContentPane(jpanel);
    }

    private static CategoryDataset createDataset()
    {
        DefaultCategoryDataset defaultcategorydataset = new DefaultCategoryDataset();
                    defaultcategorydataset.addValue(25D, "Series 1", "Pipe Stricking");
                    defaultcategorydataset.addValue(17D, "Series 1", "Lost Circulation");
                    defaultcategorydataset.addValue(34D, "Series 1", "Hole Deviation");
                    defaultcategorydataset.addValue(12D, "Series 1", "Kick Blowout");
                    defaultcategorydataset.addValue(54D, "Series 1", "Formation Change");
                    defaultcategorydataset.addValue(10D, "Series 1", "Borehole Instability");
                    defaultcategorydataset.addValue(19D, "Series 1", "Cavings/Pack-offs");
        return defaultcategorydataset;
    }

    private static JFreeChart createChart(CategoryDataset categorydataset)
    {
        JFreeChart jfreechart = ChartFactory.createBarChart3D("IPS", "", "Value", categorydataset, PlotOrientation.VERTICAL, false, false, false);
                    CategoryPlot categoryplot = (CategoryPlot)jfreechart.getPlot();
                    CategoryAxis categoryaxis = categoryplot.getDomainAxis();
                    categoryaxis.setCategoryLabelPositions(CategoryLabelPositions.createUpRotationLabelPositions(0.2D));
                    CategoryItemRenderer categoryitemrenderer = categoryplot.getRenderer();
                    categoryitemrenderer.setBaseItemLabelsVisible(true);
                    BarRenderer barrenderer = (BarRenderer)categoryitemrenderer;
                    barrenderer.setItemMargin(200D);
        return jfreechart;
    }

    public static JPanel createDemoPanel()
    {
        JFreeChart jfreechart = createChart(createDataset());
        return new ChartPanel(jfreechart);
    }

    public static void main(String args[])
    {
        jfree jfree = new jfree("3D Bar Chart Demo 3");
        jfree.pack();
        RefineryUtilities.centerFrameOnScreen(jfree);
        jfree.setVisible(true);
    }
} 
```

![JFree3DBarChart](../Images/652236407e6d05686375a8efc9b33a40.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:25:36.450

所有的条都是相同的颜色，因为它们都属于同一个系列，由 中的`rowKey`参数标识`addValue()`。改变颜色的两种常见方法包括：

*   调用`setSeriesPaint()`，如[源码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/BarChartDemo1.html#line.65)所示。[`BarChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/BarChartDemo1.html)

*   覆盖以定义自定义配色方案，如此[处](https://stackoverflow.com/a/3006785/230513)`getItemPaint()`所示。

# python - 如何在 GAE 中配置后端

> ID：13094068
> 
> 赞同：2
> 
> 时间：2012-10-26T20:35:28.077
> 
> 标签：python, google-app-engine, backend

我似乎缺少一些基本的东西。我将一个 backends.yaml 文件添加到我的应用程序在我的开发环境中所在的目录中。该文件包含以下内容：

```
backends:
- name: reporting
  class: B8
  options: dynamic public 
```

我部署并且管理控制台说我没有配置任何后端。我尝试像这样使用 appcfg.py：

```
appcfg.py backends ~/work/google/myappfolder list 
```

它说：

```
No backends configured for app: {my app name}. 
```

[文档](https://developers.google.com/appengine/docs/python/backends/overview)说：

```
appcfg backends <dir> list
Lists all the backends configured for the app specified in dir/app.yaml. 
```

是`app.yaml`错字吗？还是我的问题是我应该在 app.yaml 中添加一些东西？我在其他任何地方都没有找到任何提及。

此外，一些文档说您必须手动启动所有后端，但其他部分说“动态”后端不需要从命令行启动——它们是自动启动的。它是哪一个？

亚历克斯在评论中回答了这个问题。以下是关键要点：

1.  你必须做`appcfg.py backends dir update`才能让事情顺利进行
2.  每次更新代码时都必须**再次执行此操作（单击启动程序中的部署按钮不会更新您的后端！）**
3.  文档中的 app.yaml 是错字
4.  您不需要从命令行启动动态后端；它们确实会自动启动
5.  日志在调试后端问题时无用；不要假设日志中缺少信息表明任何事情
6.  如果提供多个​​选项，请用逗号分隔它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:08:08.923

您是否真的通过命令行启动了后端？

```
 appcfg backends <dir> start <backend> 
```

> 将后端状态设置为 START，允许其接收 HTTP 请求。驻留后端立即启动。**在第一个用户请求到达之前，动态后端不会启动**。如果后端已经启动，则无效。

所以是的，您确实需要这样做，然后它才能像您一样在动态实例上服务。

[https://developers.google.com/appengine/docs/python/backends/overview#Commands](https://developers.google.com/appengine/docs/python/backends/overview#Commands)

另外，您是否通过`--backends`启用后端支持`dev_appserver.py`？

# javascript - 如何使用 jQuery 选择孩子和自我？

> ID：13094072
> 
> 赞同：2
> 
> 时间：2012-10-26T20:35:39.497
> 
> 标签：javascript, jquery

我想知道在 jQuery 中查找元素的子元素的最佳方法是什么，但还要在“查找”中包含父元素。

这是我简化的基本 HTML 设置：

```
<div id="container">
    <form id="form1"> <!-- form 1 content --> </form>
    <form id="form2"> <!-- form 2 content --> </form>
</div> 
```

我想要这样的功能......

```
function getForms ($container) 
{
    // Option 1
    var $allForms = $container.find('form').andSelf().filter('form');

    // Option 2
    var $allForms = $container.find('form');
    if ($container.is('form')) $allForms.add($container);

    // Should return all the forms in the container if passed $('#container')
    // Or return just one form if passed $('#form1')
    return $allForms;
} 
```

我相当确定选项 1 或 2 都会起作用。有谁知道上面哪个选项更有效？还有其他更优雅或更高效的选择吗？

**编辑：我对选项 2 中的***.is()* 不满意，因为当容器中有多个 jQuery 对象时它不起作用。所以我想出了这样的事情：

```
// Option 3
function getContainerElements ($container, selector) {
    return $container.find(selector).add($container.filter(selector));
} 
```

我没有对其进行过多测试，但我认为它适用于所有一般情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:08:12.397

根据 JSPerf 测试，选项 2 更好（在 Linux 上的 Chrome 中测试）

如果您想在不同的浏览器中尝试，您可以在此处查看结果和测试：http: [//jsperf.com/children-and-self](http://jsperf.com/children-and-self)

注意：我已更新此测试以使用 div 而不是表单（因为其他表单中的表单不起作用：[表单中的表单，可以吗？](https://stackoverflow.com/questions/3430214/form-inside-a-form-is-that-alright)）并且我们想测试应该添加父级以获得根据以下评论的实际性能影响

![在此处输入图像描述](../Images/f886cf72252e4a6d9587e690cd602791.png)

**编辑**

根据评论中的要求添加了第三个选项性能

# java - java中的拆分括号表达式

> ID：13094075
> 
> 赞同：0
> 
> 时间：2012-10-26T20:35:47.200
> 
> 标签：java, expression

我需要将表达式（字符串）分成几部分，并从它的组件中调用一个递归函数。表达式类似于： (a or b), or ((a and b) or c), or ((a and b) or (c or d)) （或者任何其他表达式，不管它有多少个括号. 运算符 and, or 代表两个函数（ Reunion 和 Intersection ）。

对于“（（a和b）或（c或d））”，我必须调用Union（F（“（a和b”）），F（“（c或d）”））。F ( "(a and b)" ) 将是 Intersection("a","b") ... 等等。

我设法拆分了两个组件的表达式（“a 和 b”），但我无法处理更大的表达式。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:55:15.570

你的问题的答案在于自动理论。它关于语法和语言分类。

它是这样的。有正则文法，它们可以被正则表达式引擎覆盖，其实现是一个众所周知的java正则表达式包。

问题是您描述的语言不是常规语言。所以，你不能在这里使用正则表达式引擎，它只是不够强大。它属于可以用上下文无关语法描述的上下文无关语言（比常规语言组更广泛）。

如果你想了解这方面的理论背景，欢迎阅读维基百科的以下文章：）

[正则语法](http://en.wikipedia.org/wiki/Regular_grammar)

[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)

在任何情况下，您至少可以按照建议使用某种递归解析器，或者作为最低限度来查看“下推自动机”。

自动机是一种可以解析语法的技术。对于常规语法，它足以构建一个常规自动机，对于解决上下文无关语法，您应该构建一个下推自动机。

再次对于理论背景和示例，请参见[以下](http://en.wikipedia.org/wiki/Pushdown_automaton)文章

希望这可以帮助

# c# - C# Web 应用线程

> ID：13094076
> 
> 赞同：1
> 
> 时间：2012-10-26T20:36:05.643
> 
> 标签：c#, asp.net, .net, multithreading

我有麻烦了。在我的网络应用程序中，我有一个代码在按钮的 Click 事件上创建一个线程以执行数据密集型任务，如下所示：

```
protected void button_Click(object sender, EventArgs e)
{
    // Show loader image
    loader.Show();

    // Creating the thread
    System.Threading.ParameterizedThreadStart ts = new System.Threading.ParameterizedThreadStart(RunThread);
    Thread t = new Thread(ts);
    t.Name = "BackgroundThread";
    t.Priority = ThreadPriority.AboveNormal;
    t.Start(HttpContext.Current);
}
private void RunThread(object state)
{
    // Setting the current thread property as the background thread
    CurrentThread = Thread.CurrentThread;

    if (IsThreadRunning(CurrentThread))
    {
        CurrentThread.Join(TimeSpan.FromMinutes(6d));
    }

    // DO SOME HEAVY STUFF
} 
```

在按钮中单击我显示加载程序。问题是：即使在**BackgroundThread中调用****Join**， Page_Load 事件也会被频繁调用，从而使页面刷新。换句话说，当**RunThread**没有完成时， Page_Load 被调用了。我可以防止这种情况发生吗？

 ******OBS：我想做的是：在数据密集型线程运行时显示加载器，而不需要在页面上进行重复刷新。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:10:05.710

从网页检查长时间运行的任务状态而不进行轮询（不时进行回发）的唯一方法是使用 Web Sockets，但我很确定使用它对于此类任务来说会是很大的开销。

我会使用 ajax 请求来防止整个页面重新加载。

似乎您需要阅读有关整个 Web 请求和响应过程的更多信息。****

# jquery - 在向导控件上使用 JQuery 启用和禁用按钮

> ID：13094079
> 
> 赞同：0
> 
> 时间：2012-10-26T20:36:18.777
> 
> 标签：jquery, wizard-control

我在我的 asp.net 向导控件的最后一步尝试启用和禁用两个按钮时遇到问题。

我想要实现的是当用户单击向导控件上的完成按钮时，用户会看到 javascript 确认弹出框，并且当用户选择确认时：

1）它禁用了向导控件上的完成按钮 2）它使我的用户控件上的一个按钮变为启用状态

尽管我付出了所有努力，但我仍在努力让它发挥作用。

这是我在完成按钮上尝试做的一个片段

```
 var answer = confirm("Click confirm if you wish to repeat steps and then click the repeat button on the screen");

   if (answer == true)
   {
    $("input[type=submit][id=*btnFinish]").click(function()
       {
         $("input[type=submit][id=*btnFinish]"].atr('disabled',true);
       });
   } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:42:46.580

你有一个拼写错误

```
$("input[type=submit][id=*btnFinish]"].attr('disabled',true);
 ----------------------------------------^ 
```

虽然你应该使用 .prop 如果使用 jQuery 1.6+

```
$("input[type=submit][id=*btnFinish]"].prop('disabled',true);
$("input[type=submit][id=*btnFinish]"].prop('disabled',false); 
```

您可以删除它周围的点击功能 - 因为

> 当用户选择确认时： - 禁用/启用

只需使用您已经开始的 if/else 语句

```
if (answer){// <-- if they clicked ok

}else{

] 
```

# powershell - Powershell 在管道中的参数中使用表达式：“移动项目：不支持给定路径的格式。”

> ID：13094081
> 
> 赞同：1
> 
> 时间：2012-10-26T20:36:27.073
> 
> 标签：powershell

我在使用 Move-Item 轰炸的 powershell 脚本中有以下代码：不支持给定路径的格式。我似乎无法弄清楚我做错了什么。

```
 $computer = gc env:computername

 write-host "Moving archives `r`n"
 gci -Path $logdir -Recurse -Include *.7z |  ForEach-Object {  
 mi -Path $_.FullName -Destination \\storage\logs\iis\$computer\$_.Directory.Name\ -force -WhatIf
 } 
```

任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T22:00:06.013

如果要在`$_`cmdlet 参数参数的表达式中使用管道对象，则参数必须首先支持管道绑定，其次，您必须将参数放在脚本块中，例如：

```
ls *.txt | mi -Destination {"\\storage\logs\iis\$computer\$($_.Directory.Name)"} -force -WhatIf 
```

# java - 如何仅使用嵌套的 for 循环和 Java 中的 System.out.println 来显示乘法表？

> ID：13094085
> 
> 赞同：0
> 
> 时间：2012-10-26T20:36:40.530
> 
> 标签：java, string, loops, for-loop, nested

```
public static void main (String [] args)
{       
    int q, r, s, t, u, v, w, x, y, z;

    for (q=1; q<=10; q++)
    { 
        System.out.print("\t" + q);
    }
    System.out.println();
    for (r=2; r<=20; r += 2)
    {
        System.out.print("\t" + r);
    }
    System.out.println();
    for (s=3; s<=30; s += 3)
    {
        System.out.print("\t" + s);
    }
    System.out.println();
    for (t=4; t<=40; t += 4)
    {
        System.out.print("\t" + t);
    }
    System.out.println();
    for (u=5; u<=50; u += 5)
    {
        System.out.print("\t" + u);
    }
    System.out.println();
    for (v=6; v<=60; v += 6)
    {
        System.out.print("\t" + v);
    }
    System.out.println();
    for (w=7; w<=70; w += 7)
    {
        System.out.print("\t" + w);
    }
    System.out.println();
    for (x=8; x<=80; x += 8)
    {
        System.out.print("\t" + x);
    }
    System.out.println();
    for (y=9; y<=90; y += 9)
    {
        System.out.print("\t" + y);
    }
    System.out.println();
    for (z=10; z<=100; z += 10)
    {
        System.out.print("\t" + z);
    }

} 
```

尽管这个程序看起来很荒谬，但它以所需的格式显示了一个乘法表。作为一个菜鸟（如您所见）并尝试学习这些嵌套循环非常令人困惑，尤其是当教程说这个乘法表采用相同的确切格式时，可以只使用嵌套的 for 循环和 System.out 来编写。印刷厂 本教程没有一点帮助，并且给出了嵌套 for 循环的相当简单的用法，现在我看不出它如何适用于简化这个程序......但它说它可以做到，所以它可以做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:42:35.490

这是您将在任何初学者书籍中学到的内容：

```
for (int i=1;i<=10;i++){
  for (int j=1;j<=10;j++)
     System.out.print("\t"+i*j);
  System.out.println(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:40:41.453

这可以使用数组按预期工作

```
public static void main(String[] args) {
int[][] array = new int[11][11];
for (int i=1; i<array.length; i++) {
for (int j=1; j<array[i].length; j++) {
array[i][j] = i*j;
System.out.print(" " + array[i][j]);
}
System.out.println("");
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:41:40.510

你的意思是这样的： -

```
 for (int i = 1; i <= 10; i++) {
        for (int j = i; j <= 10 * i; j += i) {
            System.out.print(j + " ");
        }
        System.out.println();
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:33:08.260

这是我对漂亮打印的看法（单个单元格右/左对齐）：

```
private static void printMultiplicationTable(int m, int n) {
    int[][] arr = new int[m][n];
    int[] maxes = new int[n];

    for (int i = 1; i <= m; i++) {
        for (int j = i, k = 1; j <= n * i; j += i) {
            arr[i-1][k-1] = j;
            if ((maxes[k-1]+"").length() < (j+"").length()) {
                maxes[k-1] = (j+"").length();
            }
            k++;
        }
   }

    for(int i=0; i<arr.length; i++) {
        for(int j=0; j<arr[i].length; j++)
            System.out.print(adjust(arr[i][j], maxes[j], true) + " ");
        System.out.println();
    }
}

private static String adjust(int n, int tot, boolean rightJustify) {
    StringBuffer buff = new StringBuffer();

    for(int i=1; i<=tot - (n + "").length(); i++) {
        buff.append(" ");
    }

    if (rightJustify) {
        buff.append(n);
        return buff.toString();
    } else {
        return n + buff.toString();
    }
} 
```

# c++ - 在 C 和 C++ 中没有定义的 main 函数

> ID：13094090
> 
> 赞同：5
> 
> 时间：2012-10-26T20:37:20.327
> 
> 标签：c++, c

为什么这段代码在 C 中编译成功并且在 C++ 中会给你一个错误？

```
int main; 
```

它在托管环境中是否符合标准？你能引用标准吗？

我已经用 gcc 对其进行了测试。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T20:44:04.243

> 为什么这段代码在 C 中编译成功并且在 C++ 中会给你一个错误？

由于 C++ 名称修改。基本上，在所有实际实现中，链接器都会查找一个名为（或它的变体，我在 Apple 平台上看到过）的**符号**- 在 C 中，它可以是函数*或命名的外部存储变量*- 关键是通常C 实现（编译器、工具链）在链接器级别不区分变量和函数，这就是为什么提供一个符号，无论是变量还是函数，命名**似乎就足够了**。事实上，在托管环境中，根据标准，生成的程序（可执行文件）将不符合要求，因为在那里，需要实现该**功能**。`main``_main``main()` *`main``main()` **`main()`***

 *****在 C++ 中，通常使用名称修饰（为了实现 C++ 的功能，例如函数重载），这意味着编译器根据其类型在可执行文件中以不同的方式命名生成的符号，如果它是一个函数，变量、*具有不同签名的函数*以及其他情况。所以链接器基本上不会找到预期`int main(int, char *[])`函数对应的符号，会发出错误信息。

> 是否符合标准？

不定义`main()`函数不是（见第一部分）。据我所知，`main`与主函数一起命名的变量是有效的 C++，但这*肯定是不好的做法。*

> 你能引用标准吗？

是的，请（强调我的）：

> C++ 98，第 3.6.1 段：
> 
> 一个程序**应包含**一个名为 的全局函数`main()`，它是程序的指定开始。是否需要*独立环境*中的程序来定义功能是*实现*定义的。*`main()`*
> 
>  *C99，第 5.1.2.2.1 段
> 
> 5.1.2.2.1 程序启动
> 
> 1 程序启动时调用的函数名为main。实现没有声明这个函数的原型。一世*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T20:40:49.127

来自[ISO/IEC 14882:1998(E)](http://www-d0.fnal.gov/~dladams/cxx_standard.pd)（又名 C++98），*3.6.1 主要功能*：

> 实现不应预定义主要功能。该功能不得重载。它应该 2 具有 int 类型的返回类型，否则它的类型是实现定义的。所有实现都应允许以下两种 main 定义： `int main() { /* ... */ }` 和 `int main(int argc, char* argv[]) { /* ... */ }` 在后一种形式中，argc 应是从程序运行的环境传递给程序的参数数量。如果 argc 不为零，则这些参数应通过 argv[0] 提供
> argv[argc-1] 作为指向空终止多字节字符串 (NTMBS) (17.3.2.1.3.2) 的初始字符的指针，并且 argv[0] 应是指向 NTMBS 的初始字符的指针，该名称表示用于调用程序或“”。argc 的值应为非负数。argv[argc] 的值应为 0。 [注意：建议在
> argv 之后添加任何其他（可选）参数。]

* * *

> 函数 main 不得在程序中使用（3.2）。main 的链接（3.5）是 3 实现定义的。将 main 声明为 inline 或 static 的程序是格式错误的。名称 main 没有保留。[示例：成员函数、类和枚举可以称为 main，其他命名空间中的实体也可以。]

* * *

`int main;`不符合上述规定（“所有实现都应允许以下两种 main 定义”，“函数 main 不得在程序中使用（3.2）”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:39:08.080

是的，它是有效的。

它声明了一个名为 的整数`main`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T21:04:22.323

我想，我找到了一个。这不是一个解决方案，但要记住如果你使用

`gcc -Wall -Werror <file.c>`

您将收到警告被视为错误：

```
main is usually a function name 
```

所以最好编译，`-Wall`这样你也可以看到所有的警告******

# jms - 如何使用 HTTP 端点启动 mule 流以从 JMS 队列中读取消息

> ID：13094092
> 
> 赞同：2
> 
> 时间：2012-10-26T20:37:33.783
> 
> 标签：jms, esb, mule, flow

我基本上有两个流程：

1.  HTTP 入站端点接收批处理 XML，拆分为单独的部分并将其暂存到 JMS 队列。
2.  从 JMS 队列中读取暂存的 XML 并处理消息。

我需要使用 Rest 调用（即）控制上面的流程 2 的执行，流程 2 应该仅在收到 HTTP 入站调用时运行。我正在使用 Mule 版本 3.2.2

以下是流程：

```
 <flow name="flow-stage-input">
           <http:inbound-endpoint   host="localhost" 
                        port=   "8082" 
                        path=   "test/order"
                        exchange-pattern=   "request-response"
                                    >

           </http:inbound-endpoint>
          <object-to-string-transformer></object-to-string-transformer>
          <splitter evaluator="xpath" expression="//Test/TestNode" enableCorrelation="ALWAYS"/>
          <custom-transformer class="org.testing.transformers.DocumentToString"></custom-transformer>

          <pooled-component>
                <spring-object bean="receiver"></spring-object>
          </pooled-component>

          <!-- DECIDE SUCCESS OR FAILURE --> 
          <choice>
                <when expression="//Test/TestNode" evaluator="xpath">
            <jms:outbound-endpoint queue="stagingQueue" exchange-pattern="one-way" connector-ref="jmsConnector" />
            </when>
            <otherwise>
                <logger message="Skipped staging message due to errors" level="ERROR" /> 
            </otherwise>
          </choice>
          <collection-aggregator></collection-aggregator>
          <custom-transformer class="org.testing.transformers.ListOfStringsToString"></custom-transformer>
          <!-- RESPONSE SENT BACK TO CALLER -->
        </flow>

        <flow name="flow-process-jms-input" > 
           <jms:inbound-endpoint  queue="stagingQueue" exchange-pattern="one-way" connector-ref="jmsConnector" />
           <pooled-component>
            <spring-object bean="processor"></spring-object>
           </pooled-component>
           <!-- DECIDE SUCCESS OR FAILURE  -->
           <choice>
                 <when expression="//ErrorCondition/Path" evaluator="xpath">
                <jms:outbound-endpoint queue="errorQueue" exchange-pattern="one-way" connector-ref="jmsConnector" />
             </when>
             <otherwise>
                <logger message="Message processed successfully" level="ERROR" /> 
             </otherwise>
           </choice>
         </flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:44:59.653

在流程 2 中使用 Groovy 脚本从队列中请求一条 JMS 消息，使用：

```
muleContext.client.request("jms://stagingQueue", 0) 
```

如果队列为空，这将返回`null`，否则会返回包含 JMS 消息的 Mule 消息。

# android - CommonsGuy EndlessAdapter 中的 java.lang.IllegalStateException

> ID：13094094
> 
> 赞同：2
> 
> 时间：2012-10-26T20:37:47.083
> 
> 标签：android, android-listview, listadapter, commonsware-cwac

我正在将[commonsguy / cwac-endless](https://github.com/commonsguy/cwac-endless) EndlessAdapter 集成到我的一个应用程序中，效果非常好！感谢 CommonsWare 先生 :)

但我越来越`java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification`。

**注意：** *此异常仅在我使用时发生`endlessAdapter.setRunInBackground(false);`，基本上是当我希望自己的实现`AsyncTask`来缓存数据时（在EndlessAdapter 类`AsyncTask`的方法中执行）。`cacheInBackground()`*

**重新创建此 IllegalStateException 的步骤：**

步骤 1) 运行作为演示提供的`EndlessAdapterCustomTaskFragment` [示例](https://github.com/commonsguy/cwac-endless/blob/master/demo/src/com/commonsware/cwac/endless/demo/EndlessAdapterCustomTaskFragment.java)`EndlessAdapter`

步骤 2) 向下滚动 ListView，以便看到进度视图。

步骤 3) 单击进度视图。现在，一旦在加载数据时单击进度视图，应用程序将被强制关闭`java.lang.IllegalStateException`。

**为了克服这个问题，我重写了以下`EndlessAdapter`类方法，它确实有效；）**

```
 @Override
    public boolean areAllItemsEnabled() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isEnabled(int position) {
        // TODO Auto-generated method stub
        return getItem(position) != null;
    } 
```

**我很想知道以下内容：**

1）为什么`EndlessAdapter`只有当我想要我自己的实现`AsyncTask`来缓存数据时，实现才会抛出异常，即`endlessAdapter.setRunInBackground(false);`在`endlessAdapter.setRunInBackground(true);`没有自定义实现的情况下使用`AsyncTask`

`ListView`2）点击item和`getCount()`method有一定的关系，`ListView`因为它只有在点击ListView的进度条时才会产生Exception。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T07:01:42.173

感谢您为此问题提供可重现的测试用例。我进行了两项更改以`EndlessAdapter`尝试解决该问题，包括合并您上面概述的`areAllItemsEnabled()`/ fix 的变体。`isEnabled()`这已提交并标记为 v1.2。如果并且当您迁移到库的 v1.2 时，您将需要删除自己对`areAllItemsEnabled()`和的覆盖`isEnabled()`。

> 为什么只有当我希望自己的 AsyncTask 实现缓存数据时 EndlessAdapter 实现才会引发异常，即 endlessAdapter.setRunInBackground(false); 但不是在使用 neverAdapter.setRunInBackground(true); 没有 AsyncTask 的自定义实现

异常通过 提供给您`onException()`，您可以覆盖它。这是为了确保您在主应用程序线程上获得异常，即使异常可能是由`EndlessAdapter`.

> 点击ListView项和ListView的getCount()方法有一定的关系，因为只有在点击ListView的进度条时才会产生异常。

这是在实施中`ListView`。

# html - WP7 IE - CSS 模式弹出窗口：点击/点击通过覆盖 div 并触发应该不可见的链接

> ID：13094097
> 
> 赞同：1
> 
> 时间：2012-10-26T20:38:03.417
> 
> 标签：html, css, internet-explorer, windows-phone-7

我正在制作一个针对移动设备的基于 HTML/CSS 和 jQuery 的文件管理器。其中一部分涉及使用基于 CSS= 的模式对话框进行各种文件操作（复制、删除等）。

我实现了这样的模态对话框行为：

```
<div id="overlay">
     <div id="modalBoxControls"><a href="#" id="modalBoxClose">[close]</a></div>
     <div id="modalBox">
          <div id="modalBoxContent"></div>
     </div>
</div> 
```

CSS是：

```
#overlay {
 position: fixed;
 left: 0px;
 top: 0px;
 width:100%;
 height:100%;
 text-align:center;
 z-index: 1000;
 background: ([semi-transparent png]);
 display: none;
}
#modalBox {
width: 80%;
background-color: #fff;
margin: 0px auto;
opacity: 1;
} 
```

我使用 jQuery通过调用元素来显示`.fadeIn()`和隐藏它。`.fadeOut()``overlay`

到目前为止一切顺利 - 这在我的开发机器上的所有浏览器中都很好用。

然而，在我的 WP7（Samsung Omnia 7）上进行测试时，发生了一件相当奇怪的事情。模态对话框显示正常，它后面的页面被涂黑。但是点击（或点击）会通过`#overlay`并激活它后面的任何东西，即使它完全覆盖了后面的所有东西并且它的 z-index 是 1000。

我还使用 Nick Stakenburg 的著名“Lightview”插件（一段经过良好测试和改进的代码）对此进行了测试，并在 WP7 上的 IE 上发现了相同的行为。

所以看起来这可能是浏览器本身的错误。

有谁知道任何解决方案？

**编辑 - 带有问题示例的 jsFiddle**

所以，在你的 WP7 设备中检查一下，看看即使文件顶部有覆盖层，仍然可以点击文件：http: [//jsfiddle.net/michaelbromley/CHU76/](http://jsfiddle.net/michaelbromley/CHU76/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:37:17.027

如果通过“激活它背后的任何东西”意味着像文本输入这样的输入控件，那么我遇到了同样的问题。老实说，我不知道一个好的解决方案。我的解决方法是在显示弹出窗口期间禁用输入控件，然后通过删除禁用属性重新激活它们。该问题似乎与 jqmobile 无关，但应该是一般行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:15:00.453

好的，看来这个问题可能没有“适当”的解决方案（嘿，24 小时是很长的时间！），所以我想出了自己的破解解决方案：

我在打开模式对话框时，同时将覆盖层“后面”的所有元素（即链接和其他任何会错误地响应点击/点击的元素）的“可见性”CSS 属性设置为“隐藏”（通过使用jQuery 的`.css()`函数）。这意味着页面布局不受影响，并且现在没有任何内容可供单击。

正如我所说，这有点像 hack，并不适合遇到这个问题的每个人。但是，它对我来说效果很好。

jsFiddle 中的代码：http: [//jsfiddle.net/michaelbromley/CHU76/1/](http://jsfiddle.net/michaelbromley/CHU76/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T09:57:42.640

是的，这显然是 Window Phone 7 中的一个错误，甚至在 Windows Phone 10 中都没有修复。我会将这个错误报告给 Microsoft，希望它会得到修复。

# sql-server - SQL Server：多个输出子句

> ID：13094099
> 
> 赞同：7
> 
> 时间：2012-10-26T20:38:42.200
> 
> 标签：sql-server, output-clause

我有两张桌子，`Table_1`和`Table_2`。

`Table_1`有列`PK`(autoincrementing `int`) 和`Value`( `nchar(10)`)。

`Table_2`有`FK`( `int`)、`Key`( `nchar(10)`) 和`Value`( `nchar(10)`)。

也就是说，`Table_1`是一个数据表，`Table_2`是一个键值对存储，其中的一行`Table_1`可能对应于 0、1 个或多个键和值`Table_2`。

我想编写代码，以编程方式构建一个查询，该`Table_1`查询`Table_2`使用`Table_1`.

我可以用一行轻松完成：

```
INSERT INTO Table_1 ([Value])
OUTPUT INSERTED.PK, 'Test1Key', 'Test1Val' INTO Table_2 (FK, [Key], [Value])
VALUES ('Test') 
```

但是 SQL 似乎不喜欢拥有多行的想法。这失败了：

```
INSERT INTO Table_1 ([Value])
OUTPUT INSERTED.PK, 'Test1Key', 'Test1Val' INTO Table_2 (FK, [Key], [Value])
OUTPUT INSERTED.PK, 'Test2Key', 'Test2Val' INTO Table_2 (FK, [Key], [Value])
OUTPUT INSERTED.PK, 'Test3Key', 'Test3Val' INTO Table_2 (FK, [Key], [Value])
VALUES ('Test') 
```

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:07:22.060

我不得不将代码放在答案中，在评论中它看起来很丑......

```
CREATE TABLE #Tmp(PK int, value nchar(10))

INSERT INTO Table_1 ([Value])
OUTPUT INSERTED.PK, inserted.[Value] INTO #Tmp
SELECT 'Test'

INSERT INTO Table_2 (FK, [Key], Value)
SELECT PK, 'Test1Key', 'Test1Val' FROM #Tmp
UNION ALL SELECT PK, 'Test2Key', 'Test2Val' FROM #Tmp
UNION ALL SELECT PK, 'Test3Key', 'Test3Val' FROM #Tmp 
```

顺便说一句，如果没有一些丑陋的黑客攻击，SQL Server 不会让你在一个查询中完成所有操作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:41:46.633

尝试将值放入参数中，然后使用 3或 1语句`INSERTED.PK`插入表 2 。`INSERT..VALUES``INSERT..SELECT`

# ios - KineticJS 回收内存

> ID：13094100
> 
> 赞同：2
> 
> 时间：2012-10-26T20:38:55.070
> 
> 标签：ios, kineticjs

我一直在使用 KineticJS 构建一个 iOS 应用程序（UIWebView）。我创建了一个简单的示例应用程序，只是为了了解内存利用率。我创建了一个舞台，向其中添加了 100 层，每层添加了一条线。为阶段和层分配的内存量约为每层 6 Mb 或 600 Mb。然后，我添加了代码以删除 setInterval 函数中的每一层，然后调用 stage.reset() 来确定。在分析中，内存利用率并没有降低。

我检查了我的代码以确保我没有保留对图层的引用。在一项测试中，我还取消了对阶段的引用，但分配的内存值没有改变。这可能是一个错误还是有其他方法可以使用 KineticJS 回收内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:21:13.103

对于许多浏览器来说，这是一个“垃圾收集”问题。基本上，只是取消引用不会释放内存。您必须依靠浏览器来识别何时释放一些内存。我在某些 Android 浏览器上遇到了同样的问题。基本上，我刚刚安装了最新的 Firefox 浏览器，它运行得更好。抱歉，我无法提供更多帮助。

# ios - 删除 UIImagePickerController 中的旋转图标？

> ID：13094110
> 
> 赞同：0
> 
> 时间：2012-10-26T20:39:38.160
> 
> 标签：ios, ios6

是否可以删除在前后摄像头之间切换的 UIImagePickerController 中的小旋转图标？这适用于不会进入 Apple Store 的应用程序，并且仅在一台设备上。有什么我能做的吗？我看到我可以做到这一点，但它也删除了录制按钮。

```
cameraUI.showsCameraControls = NO; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:56:33.657

不幸的是，没有直接的方法可以关闭 1 个特定的相机控制。

您可以做的是执行以下操作：

```
// Create a view that recreates the camera control functions you need.
// Your view will need to be able to set the following properties on camera UI
// cameraCaptureMode, cameraFlashMode (NOT cameraDevice, which is the control you want to disappear)

UIView* customOverlay = [..way to create your custom overlay..];
cameraUI.showsCameraControls = NO;
cameraUI.cameraOverlayView = customOverlay; 
```

如果您需要知道如何创建自定义叠加层，则可能值得提出另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:58:01.013

当涉及到 showCameraControls 时，它的全部或全部。您需要将 showsCameraControls 设置为 NO 并创建自己的 cameraOverlay 视图，或者使用 AVFoundation 滚动您自己的相机，您需要再次创建自己的相机控件。

# shopify - 在 Shopify 上的订单中，跟踪号未提交履行

> ID：13094111
> 
> 赞同：0
> 
> 时间：2012-10-26T20:39:38.873
> 
> 标签：shopify

在一些中间件的履行周期上工作并开始自动履行订单后，我注意到没有一个订单有与履行相关的透视跟踪号。我有以下 PHP 代码提交履行请求：

```
$options = array(CURLOPT_URL => 'https://'.$this->config->item('api_key').':'.$this->config->item('api_pass').'@'.$this->config->item('api_domain').'/admin/orders/'.$order['order_id'].'/fulfillments.json',
            CURLOPT_HEADER => true,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_POST => true,
            CURLOPT_MAXREDIRS => 3,
            CURLOPT_SSL_VERIFYPEER => true,
            CURLOPT_SSL_VERIFYHOST => 2,
            CURLOPT_USERAGENT => 'HAC',
            CURLOPT_CONNECTTIMEOUT =>30,
            CURLOPT_TIMEOUT => 30,
            CURLOPT_POSTFIELDS => $fulfill_json
            );
        if($send == true){
            $ch = curl_init();
            curl_setopt_array($ch, $options);
            $response = curl_exec($ch);
            $response_header = curl_getinfo($ch, CURLINFO_HTTP_CODE);
            curl_close($ch);
            if($response_header == 201){
                //success

            }else{
                //error

            }
        } 
```

这是我发送的 $fulfill_json 示例：

```
{"fulfilment":{"tracking_number":"1Z6V66666666666666","notify_customer":true,"line_items":[{"id":111111111}]}}

{"fulfilment":{"tracking_number":"1Z6V66666666666666","notify_customer":true,"line_items":[{"id":111111111},{"id":111111111},{"id":111111111}]}} 
```

对我来说，它看起来像是正确提交的 JSON，不确定它是否还有其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:00:28.963

我要尝试更改的第一件事是您的拼写：

**履行** 不 **履行**

# c# - 根据行设置 DataGridView 单元格编辑器

> ID：13094116
> 
> 赞同：1
> 
> 时间：2012-10-26T20:39:59.077
> 
> 标签：c#, winforms, datagridview

有没有办法让同一列中的不同单元格以不同的方式显示/编辑数据？

我正在尝试使用数据网格让用户为 XML 文件中指定的参数输入值。这将相当简单，除了一些参数是字符串，一些是整数，还有一些是布尔值。

虽然我可以只使用带有单元格验证事件的文本框来强制用户输入符合参数标准的值，但我认为将文本框单元格用于字符串参数，将复选框单元格用于布尔值会更加用户友好参数，以及整数参数的数字上下单元格（我制作的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T01:13:39.257

检查这些可能的解决方案（它们都非常相似）：

1.  [如何在 DataGridView 控件的同一列中托管不同的控件](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/63ddb457-f769-44db-87cc-9e88e74929e8/)

2.  [Windows 窗体 DataGridView 控件在同一列中有不同的控件类型](https://stackoverflow.com/questions/986233/windows-forms-datagridview-control-have-different-control-types-in-the-same-colu)

3.  [一列的 DataGridview 单元格不能有不同的类型](https://stackoverflow.com/questions/7055918/datagridview-cells-of-one-column-cant-have-different-type)

根据评论，第一个看起来像一个工作样本。

# javascript - jQuery AJAX 调用未触发正确的回调

> ID：13094121
> 
> 赞同：1
> 
> 时间：2012-10-26T20:40:28.967
> 
> 标签：javascript, jquery, ajax

我有一个 AJAX 调用，它应该为我期望的每个 HTTP 返回代码触发一个指定的回调。但是，由于某种原因，当我发送 HTTP 代码 100（名为“Continue”）时，jQuery 会执行 HTTP 代码 200（名为“OK”）的回调。为什么它执行错误的回调？

```
var event_properties =
{
    // ... filled in properties.
};
var ajax_post =
{
    "data": event_properties,
    "type": "POST",
    "dataType": "json",
    "statusCode": { 100: get_reservation_configuration, 200: reservation_creation_success_callback }
};
jQuery.ajax("/create_reservation/", ajax_post).fail(reservation_creation_failure_callback); 
```

而且，顺便说一句，我是否使用了 jQuery 中已弃用的任何内容？我尽量不这样做，但文档有点不清楚。

# php - 在 Heroku 上使用带有 CakePHP 的 hstore 会导致 PDOException

> ID：13094123
> 
> 赞同：0
> 
> 时间：2012-10-26T20:40:34.523
> 
> 标签：php, cakephp, heroku, hstore

我正在尝试在启用了 hstore 引擎的 Heroku Postgres DB 上存储数据。在 Heroku 的网站上一切正常。困扰我的是我后端的 PHP。我使用[POMM 转换器](https://github.com/chanmix51/Pomm/blob/master/Pomm/Converter/PgHStore.php)

这就是我基本上在我的控制器中使用的：

```
$this->loadModel('Channel');
$pgHStore = new PgHStore();
$data = $pgHStore->toPg(array('channel_id' => 1, 'title' => 'Test'));
$this->Channel->save(array('name' => 'test', 'attributes' => $data)); 
```

它只是抛出一个 PDOException：

```
[PDOException] SQLSTATE[XX000]: Internal error: 7 ERROR:  Syntax error near '$' at position
LINE 1: ..."channel" ("name", "attributes") VALUES ('test', '($hst$"ch...
                                                            ^ 
```

有没有人用 PHP 和 PDO 完成过这个？我确定！但是怎么做？我错在哪里？

# cordova - Phonegap（或cordova）和requirejs

> ID：13094126
> 
> 赞同：0
> 
> 时间：2012-10-26T20:40:49.000
> 
> 标签：cordova, requirejs, require

我尝试将 cordova.js 或 phonegap.js（使用 phonegapbuild）作为 AMD 模块加载到 require.config 中的 main.js 中，如下所示：

```
cordova: 'cordova.js' 
```

我应该将它包含在 shim 中吗？

那你怎么测试呢？你可以使用 navigator.getPicture 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:27:10.113

尝试使用 requireJS 加载科尔多瓦时遇到问题。

似乎它不适用于cordova 2.2.0（可能还有其他版本）。

你可以阅读[我关于这个问题的帖子](https://stackoverflow.com/questions/13233301/cordova-2-2-0-on-ios-requirejs-wont-load-cordova-correctly)。

希望这可以帮助！

# sql-server - 本地 IIS Web 服务器无法连接到 SQL Server

> ID：13094128
> 
> 赞同：0
> 
> 时间：2012-10-26T20:40:50.213
> 
> 标签：sql-server, visual-studio, iis

当我使用本地 IIS Web 服务器时，我的 ASP.NET MVC 应用程序无法连接到 SQL Server。数据库在另一台服务器上。但是，如果我使用 Visual Studio 开发服务器，它就可以正常工作。

有人知道我缺少什么设置吗？我的 Web.config 是否应该有所改变？是的，在 SQL Server 上启用了 TCP/IP。

这是我得到的错误 -

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

这是我的连接字符串-

```
connectionString="
SERVER=servername;
Initial Catalog=dbname;
User ID=userid;
Password=passwd" 
providerName="System.Data.SqlClient" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:30:17.570

我认为您需要使用 IP 地址来连接远程数据库，例如连接字符串中的 SERVER=59.230.212.12。尝试在安装 IIS 的管理工作室中连接数据库。然后在连接字符串中使用相同的设置。

# c# - 通过 Html Dropdownfor MVC3/实体框架使用子表数据填充 DB

> ID：13094129
> 
> 赞同：0
> 
> 时间：2012-10-26T20:40:51.763
> 
> 标签：c#, asp.net-mvc-3, frameworks, entity

我正在尝试使用创建操作方法填充我的数据库。我表单上的两个字段是下拉菜单。下拉列表链接到两个单独的子表，这些子表最终将通过 create 方法发布在我的主父表上。我很难让这些下拉列表填充正确的数据。

我的模型：

```
public class County
{

[Key]
public string CountyName { get; set; }
}

public class Contact
{
[Key]
public int ContactId { get; set; }
public string ContactName { get; set; }

 public class InspectionInfo
{
    [Key]
    public int InspectionId { get; set; }

    //[Required]
    public Contact Contact { get; set; }

    //[Required]

    public County County { get; set; } 
```

我的控制器：

```
 //
    // GET: /Inspection1/Create
    public ActionResult Create()
    {

        var model = new InspectionInfo
        {

            Submitted = DateTime.Now,
            //Contact = new Contact()
        };

        ViewBag.CountyName = new SelectList(db.Counties,"CountyName", "CountyName");
       ViewBag.Contactname = new SelectList(db.Contacts, "ContactName", "ContactName");     

        return View(model);
    }

    //
    // POST: /Inspection1/Create

    [HttpPost]
    public ActionResult Create(InspectionInfo inspectioninfo)
    {
            if (ModelState.IsValid)
        {
            db.InspectionInfos.Add(inspectioninfo);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(inspectioninfo);
    } 
```

我的观点：

```
 @using (Html.BeginForm()) {
 @Html.ValidationSummary(true)
 <fieldset>
 <div class="editor-label">

        @Html.LabelFor(model => model.County )
    </div>

    <div class="editor-field">
        @Html.DropDownListFor(m=>m.County.CountyName,(IEnumerable<SelectListItem>)ViewBag.CountyName)
        @Html.ValidationMessageFor(model => model.County)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Contact)
    </div>
    <div class="editor-field">

 @Html.DropDownListFor(m=>m.Contact.ContactName,  (IEnumerable<SelectListItem>)ViewBag.ContactName)
        @Html.ValidationMessageFor(model => model.Contact)
    </div> 
```

目前，在休息期间检查字段值时，我继续收到 ContactName 的“1”。

此外，我收到 CountyName 的例外情况：

{"违反 PRIMARY KEY 约束 'PK_dbo.Counties'。无法在对象 'dbo.Counties' 中插入重复键。\r\n语句已终止。"}

任何帮助在这里将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:09:47.497

那么有两个问题。正如你所说，你的下拉人口可能是错误的。当您说`DropDownListFor`时，它要求您作为模型属性的第一个参数，在您的情况下，它只是您的`County`. 其次，我不确定是否`IEnumerable<SelectListItem>)ViewBag.CountyName`有效，请尝试`(SelectList)ViewBag.CountyName`. 并且，如果可能，请将您的**id**用作 ValueMembers，除非您真的是您使用的唯一值。

其次，当您存储数据时，您需要附加两个实体`County`，`Contact`否则上下文会认为这些是您的实体并尝试添加它们，这会导致 PRIMARY KEY Violation。

* * *

因此，让我们修改您的代码，如下所示：

控制器：

```
// Use the entity id here...
ViewBag.CountyName = new SelectList(db.Counties,"CountyId", "CountyName"); 
```

页：

```
@Html.DropDownListFor(m=>m.County.CountyName,(SelectList)ViewBag.CountyName) 
```

在您的控制器上：

```
[HttpPost]
    public ActionResult Create(InspectionInfo inspectioninfo)
    {
            if (ModelState.IsValid)
        {
            db.InspectionInfos.Add(inspectioninfo);
            db.Contact.Attach(inspectioninfo.Contact);
            db.County.Attach(inspectioninfo.County);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(inspectioninfo);
    } 
```

玩一下这个，它应该可以工作。

# windows - Windows 批处理文件语法

> ID：13094130
> 
> 赞同：0
> 
> 时间：2012-10-26T20:40:54.293
> 
> 标签：windows, windows-7, batch-file

以下 Windows 7 批处理文件脚本返回错误：

```
@ECHO OFF

if exist C:\Program Files (x86)\ E1\P45V goto WIN7

ren /s /c "c:\Program Files\ E1\P45V\P45Login.bmp" "c:\Program Files\E1\P45V\P45Login_OLD.bmp"
copy "\\locattion14\temp\E1\P45Login.bmp" "c:\Program Files\ E1\P45V\P45Login.bmp"

goto END

:WIN7

ren /s /c "c:\Program Files (x86)\ E1\P45V\P45Login.bmp" "c:\Program Files (x86)\E1\P45V\P45Login_OLD.bmp"
copy "\\locattion14\temp\E1\P45Login.bmp" "c:\Program Files (x86)\ E1\P45V\P45Login.bmp"

:END 
```

> 命令的语法不正确

使用 PSTOOL 将更改推送到计算机，并在更正语法错误时添加列表。

期望的结果：

如果 pc 是 XP 机器，将 P45login.bmp 文件重命名为相同的 name_OLD.bmp，然后将文件从位置 14 复制到指定的目录中。

如果 PC 是 Win 7 机器，请跳过第一部分，转到第二部分，然后提交相同的更改。

关闭会话。

我已经移动了引号，添加/减去了开关，但遇到了同样的错误。

当然，这只是我没有理解的简单语法特殊性。

希望有人能看看，看到我失踪的明显，并指出我正确的方向，。

感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:03:38.620

你的`ren`语法是错误的。`ren`不支持任何开关，并且*rename_to*需要只是名称，而不是完整路径。在此处查看完整详细信息：[http ://technet.microsoft.com/en-us/library/cc754276%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc754276%28v=ws.10%29.aspx)

另外：
-`if exists`需要在路径周围加上引号
- 您同时使用`\ E1\`或`\E1\`（带或不带空格）。虽然两者都*可能*有效，但我会仔细检查这是否不是错误。
- 如果上面的路径实际上不同，您需要使用`move`(with full paths) 而不是`ren`.

# c# - 在服务器上执行 powershell .ps1 文件并查看结果 C# asp.net

> ID：13094132
> 
> 赞同：1
> 
> 时间：2012-10-26T20:40:56.800
> 
> 标签：c#, asp.net, powershell, command-line, scripting

我正在尝试使用 C# asp.net 网页在我的服务器上执行 .ps1 PowerShell 文件。该脚本采用一个参数，并且我已通过使用服务器上的命令提示符验证它是否有效。运行后，我需要在网页上显示结果。

目前，我正在使用：

```
protected void btnClickCmdLine(object sender, EventArgs e)
{
    lblResults.Text = "Please wait...";
    try
    {
        string tempGETCMD = null;
        Process CMDprocess = new Process();
        System.Diagnostics.ProcessStartInfo StartInfo = new System.Diagnostics.ProcessStartInfo();
        StartInfo.FileName = "cmd"; //starts cmd window
        StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        StartInfo.CreateNoWindow = true;
        StartInfo.RedirectStandardInput = true;
        StartInfo.RedirectStandardOutput = true;
        StartInfo.UseShellExecute = false; //required to redirect
        CMDprocess.StartInfo = StartInfo;
        CMDprocess.Start();
        lblResults.Text = "Starting....";
        System.IO.StreamReader SR = CMDprocess.StandardOutput;
        System.IO.StreamWriter SW = CMDprocess.StandardInput;
        SW.WriteLine("@echo on");

        SW.WriteLine("cd C:\\Tools\\PowerShell\\");

       SW.WriteLine("powershell .\\poweron.ps1 **parameter**");

        SW.WriteLine("exit"); //exits command prompt window
        tempGETCMD = SR.ReadToEnd(); //returns results of the command window
        lblResults.Text = tempGETCMD;
        SW.Close();
        SR.Close();
    }
    catch (Exception ex)
    {
        lblErrorMEssage.Text = ex.ToString();
        showError();
    }
} 
```

但是，如果我包含调用 powershell 的行，它甚至不会显示初始的“请稍候..”。它最终会超时，即使我增加了 ScriptManager 上的 AsyncPostBackTimeout。谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-22T13:25:10.660

有点过时了；但是，对于那些寻找类似解决方案的人来说，我不会创建一个 cmd 并将 powershell 传递给它，而是利用[System.Management.Automation](http://msdn.microsoft.com/en-us/library/system.management.automation(v=vs.85).aspx)命名空间并在没有 cmd 中间人的情况下创建一个 PowerShell 控制台对象服务器端。您可以将命令或 .ps1 文件传递​​给**AddScript()**函数（两者都带有参数）以供执行。比必须调用 powershell.exe 的单独 shell 要干净得多。

确保应用程序池具有适当的身份，并且该主体具有执行 PowerShell 命令和/或脚本所需的适当权限级别。此外，请确保您已通过**Set-ExecutionPolicy**将执行策略配置为适当的级别（不受限制/或远程签名，除非您正在签名），以防您仍然要执行 .ps1 文件服务器端。

下面是一些启动代码，它们正在执行由 TextBox Web 表单提交的命令，就好像它是使用这些对象的 PowerShell 控制台一样 - 应该说明该方法：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Management.Automation;
using System.Text;

namespace PowerShellExecution
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void ExecuteCode_Click(object sender, EventArgs e)
        {
            // Clean the Result TextBox
            ResultBox.Text = string.Empty;

            // Initialize PowerShell engine
            var shell = PowerShell.Create();

            // Add the script to the PowerShell object
            shell.Commands.AddScript(Input.Text);

            // Execute the script
            var results = shell.Invoke();

            // display results, with BaseObject converted to string
            // Note : use |out-string for console-like output
            if (results.Count > 0)
            {
                // We use a string builder ton create our result text
                var builder = new StringBuilder();

                foreach (var psObject in results)
                {
                    // Convert the Base Object to a string and append it to the string builder.
                    // Add \r\n for line breaks
                    builder.Append(psObject.BaseObject.ToString() + "\r\n");
                }

                // Encode the string in HTML (prevent security issue with 'dangerous' caracters like < >
                ResultBox.Text = Server.HtmlEncode(builder.ToString());
            }
        }
    }
} 
```

这是为您撰写的一篇文章，涵盖了如何使用 Visual Studio 从头到尾创建页面并完成此操作，[http](http://grokgarble.com/blog/?p=142) ://grokgarble.com/blog/?p=142 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:01:59.300

我认为您不能像这样直接从 aspx 页面运行 powershell 脚本，因为它可能与安全原因有关。为了运行和捕获输出：

1.  [创建一个远程运行空间： http](http://social.msdn.microsoft.com/Forums/hu/sharepointgeneralprevious/thread/88b11fe3-c218-49a3-ac4b-d1a04939980c) ://social.msdn.microsoft.com/Forums/hu/sharepointgeneralprevious/thread/88b11fe3-c218-49a3-ac4b-d1a04939980c [http://msdn.microsoft.com/en-us/library/ windows/桌面/ee706560%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706560%28v=vs.85%29.aspx)

2.  PSHost： [在 Pipeline.Invoke 抛出后在 C# 中捕获 Powershell 输出](https://stackoverflow.com/questions/1233640/capturing-powershell-output-in-c-sharp-after-pipeline-invoke-throws)

# 1对我来说效果很好。

顺便说一句，标签没有更新，因为事件没有完成。您可能需要在等待 powershell 时使用 ajax 来显示标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:13:37.060

当我尝试这个时，我发现标准输入需要刷新或关闭`SR.ReadToEnd()`才能完成。尝试这个：

```
 lblResults.Text = "Please wait...";
    try
    {
        string tempGETCMD = null;
        Process CMDprocess = new Process();
        System.Diagnostics.ProcessStartInfo StartInfo = new System.Diagnostics.ProcessStartInfo();
        StartInfo.FileName = "cmd"; //starts cmd window
        StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        StartInfo.CreateNoWindow = true;
        StartInfo.RedirectStandardInput = true;
        StartInfo.RedirectStandardOutput = true;
        StartInfo.UseShellExecute = false; //required to redirect
        CMDprocess.StartInfo = StartInfo;
        CMDprocess.Start();
        lblResults.Text = "Starting....";
        using (System.IO.StreamReader SR = CMDprocess.StandardOutput)
        {
            using (System.IO.StreamWriter SW = CMDprocess.StandardInput)
            {
                SW.WriteLine("@echo on");
                SW.WriteLine("cd C:\\Tools\\PowerShell\\");
                SW.WriteLine("powershell .\\poweron.ps1 **parameter**");
                SW.WriteLine("exit"); //exits command prompt window
            }
            tempGETCMD = SR.ReadToEnd(); //returns results of the command window
        }
        lblResults.Text = tempGETCMD;
    }
    catch (Exception ex)
    {
        lblErrorMessage.Text = ex.ToString();
        showError();
    }
} 
```

# spring - 如何“捕获”由 ** 匹配的路径部分

> ID：13094133
> 
> 赞同：2
> 
> 时间：2012-10-26T20:41:07.140
> 
> 标签：spring

我有一个看起来像的@RequestMapping：

```
@RequestMapping("/foo/{bar}/blah/**")
public void handleRequest(@PathVariable String bar, @PathVariable String remainder) { 
```

如何配置以使剩余部分获得与“**”匹配的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:50:11.577

虽然 Spring 确实支持 Ant 样式的路径模式，但它们没有提供返回捕获内容的方法。

不过不要害怕，因为这是你可以自己计算的。你可以定义你的控制器方法来接收[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)对象。从那里，您可以通过调用[`getRequestURI()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)请求对象来访问 URI。

这将需要一些`String`处理，但这听起来更像是编写更有趣的代码。

# java - 迭代器 hasNext 意味着列表永远不会为空

> ID：13094134
> 
> 赞同：2
> 
> 时间：2012-10-26T20:41:10.283
> 
> 标签：java, iterator

我只是有一个关于迭代器的快速问题。

我目前想从两个对象列表中删除重复的项目。

我现在设置它的方式是，只要第二个列表（需要从第一个列表中删除的对象列表）有项目，执行合并的循环将继续运行。

我一直在使用该`hasNext()`功能来检查是否还有物品，但我认为这可能存在小问题。

当迭代器指向列表中的最后一项并调用`hasNext()`时，它将返回 false，因为在最后一项之后没有任何内容。这意味着该项目不会从第一个列表中删除。真的吗？

这是代码：

```
for (Iterator<Card> discardItr = discard.iterator(); discardItr.hasNext();)
{
    Card tempDiscard = discardItr.next();

    Iterator<Card> mixedItr = mixedHand.iterator();
    while (mixedItr.hasNext())
    {
        if (tempDiscard.equals(mixedItr.next()))
        {
            discardItr.remove();
            mixedItr.remove();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:08:36.177

An`Iterator`将遍历整个列表，即使您调用`iterator#remove`. 例如运行

```
public class IteratorDemo {
  public static void main( String[] args ) {
    List<String> list = new ArrayList<>(  );
    list.addAll( Arrays.asList("first", "second", "third" ) );
    Iterator<String> iterator = list.iterator();
    while ( iterator.hasNext() ) {
      String next = iterator.next();
      System.out.println(next);
      iterator.remove();
    }
  }
} 
```

产生以下输出

```
first
second
third 
```

所以你的代码会起作用（你当然会通过尝试发现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:52:22.900

如果你的数据集很小，你可以使用`Set`代替`List`，你可以使用下面的代码，它更简单，更干净，但需要更多的内存：

```
Set<Card> discardCopy = new HashSet<Card>(discard);
Set<Card> mixedCopy = new HashSet<Card>(mixedHand);
mixedHand.removeAll(discardCopy);
discard.removeAll(mixedCopy); 
```

# objective-c - MKNetworkKit - POST 总是返回“操作无法完成”

> ID：13094137
> 
> 赞同：0
> 
> 时间：2012-10-26T20:41:15.617
> 
> 标签：objective-c, ios, mknetworkkit

我正在尝试使用 MKNetworkKit 从我的 iOS 应用程序与 WCF 服务通信。即使 URL 有效，我似乎总是收到 404 错误。如果我使用 GET 而不是 POST，则操作完成（但我需要将其发布）。此外，即使我提供有效的参数，我也会遇到同样的问题。

```
 MKNetworkOperation *op = [engine operationWithURLString:@"http://store.mystore.com/svc/InControl.svc"
                                                  params:nil                                                    
                                              httpMethod:@"POST"]; 
```

在将上述操作排入队列后，我总是会调用一个错误块。转储到控制台的错误是`[The operation couldn’t be completed. (NSURLErrorDomain error 404.)]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:04:37.887

如果错误码为 404，请检查端点是否正确。尽管 HTTP 不区分大小写，但我相信 WCF 不是。所以检查它是 InControl 还是 inControl 或 inControl。

# javascript - 使div平滑展开

> ID：13094141
> 
> 赞同：8
> 
> 时间：2012-10-26T20:41:29.580
> 
> 标签：javascript

我正在使用 Javascript 来扩展 div，但是当内容被扩展时，它非常突然，充其量也非常不吸引人。我想知道是否有办法让这个 div 扩展得更慢，更多的是视觉扩展，然后是 BLAM。现在我完成了。

```
<script language="javascript"> 
function toggle_profile() {
    var ele = document.getElementById("toggleProfile");
    var text = document.getElementById("displayProfile");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "View Profile";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "Hide Profile";
    }
} 
                        </script>

                      <a id="displayProfile" href="javascript:toggle_profile();">View Profile</a></p>
                      <br />
                  <div id="toggleProfile" style="display: none"> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T20:46:18.263

诀窍是在 Javascript 中添加和删除类...并像这样附加 CSS3 过渡：

```
div {
    -webkit-transition: height .25s ease;
       -moz-transition: height .25s ease;
            transition: height .25s ease;
} 
```

这会将您可以控制速度的过渡应用到所有 div。当然，您可以选择将其应用于自己的 DOM 元素。

然后我要使用的两个 jquery 函数是

```
$("#object").addClass("removeThis"); //hide
$("#object").removeClass("removeThis"); //show 
```

但正如指出的那样，您可能不会使用 jQuery！所以在这里！

```
document.getElementById("object").className = "";
document.getElementById("object").className = "removeThis"; 
```

其中“#object”是您要定位的对象，“.removeThis”是您在 dom 标记中的 class 属性中添加和删除的类。这是它在 css 中的样子。

```
#object {
    height: 200px;
    /* ignoring other CSS */
}

.removeThis {
    height: 0;
} 
```

假设您希望它上下滑动。另一个技巧是使用不透明度，或 display: none 和 display: block。而是随便玩。我希望这有帮助！

自 2012 年以来编辑：由于您使用的是 JavaScript，因此您要求在主线程上完成工作，您可以通过在变换上制作动画来利用合成器线程。也就是说，如果您可以弄清楚如何摆脱对高度样式属性的动画处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:44:49.460

重新发明轮子真的没有意义。您可以使用 Jquery 的滑动切换非常轻松地做到这一点。这是页面：[http ://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T17:10:30.797

`overflow:hidden`我认为最好的技巧是在除法中使用 CSS属性。这将隐藏超出 div 高度或宽度的内容。然后，您可以通过平滑的 CSS 过渡轻松增加和减少分割的高度。

你可以[在这里阅读教程](http://www.hklabs.org/articles/smooth_expand_collapse_division_without_jquery)

# .net - 如何获取当前 Windows 用户的 *network* 身份，而不是他们的交互式登录身份？

> ID：13094142
> 
> 赞同：4
> 
> 时间：2012-10-26T20:41:33.987
> 
> 标签：.net, windows, winapi, windows-identity

**问题**：

什么是 .NET（或 p/invoke 到非托管 Windows API）方法调用以获取用于连接到 SSPI 身份验证的网络服务（如 SQL Server ）的当前进程的**网络标识？**

* * *

我想到的特定用例是可以在未加入域的机器上工作并用于`runas /noprofile /netonly /USER:DOMAIN\username`启动使用该`DOMAIN\username`身份进行网络身份验证的进程，而不是使用本地`MACHINE\username`登录身份。

`DOMAIN\username`我想要给我传递给`RUNAS`这里的身份的方法调用。

谢谢！

* * *

需要明确的是，我*不是*在寻找方法调用来获取当前用户的本地登录身份（可能与网络身份不同）。这*排除* `System.Security.Principal.WindowsIdentity.GetCurrent().Name`并且`Environment.UserName`可能`System.Threading.Thread.CurrentPrincipal.Identity.Name`被接受的答案。我会否决任何错误地表明其中任何一个是解决方案的答案，除非我在这里被证明是错误的。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:29:50.683

这会打印出站连接的用户（格式为“user@domain”）。它是 C++。

```
CredHandle credHandle;
TimeStamp timeStamp;
SECURITY_STATUS status = AcquireCredentialsHandle(0, L"Negotiate", SECPKG_CRED_OUTBOUND, 0, 0, 0, 0, &credHandle, &timeStamp);
if (status == SEC_E_OK)
{
    SecPkgCredentials_Names names;
    status = QueryCredentialsAttributes(&credHandle, SECPKG_CRED_ATTR_NAMES, &names);
    if (status == SEC_E_OK)
    {
        wprintf(L"%s\n", names.sUserName);
        status = FreeContextBuffer(names.sUserName);
    }
    status = FreeCredentialsHandle(&credHandle);
} 
```

其他一些信息：我猜`runas`是使用带有 LOGON_NETCREDENTIALS_ONLY 标志的 CreateProcessWithLogonW 。这将基于现有登录会话创建一个新的登录会话，其中隐藏了网络凭据。GetTokenInformation 和 LsaGetLogonSessionData 返回有关原始用户的信息，而不是网络用户的信息。Windows 必须知道网络用户的一点是 SSPI，以便它可以将用户名和域发送到远程服务器。因此上面的代码。

# java - Junit如何在理论结束时执行一段代码？

> ID：13094146
> 
> 赞同：2
> 
> 时间：2012-10-26T20:41:48.053
> 
> 标签：java, junit

在执行所有@DataPoints 后，我有一组要执行的语句。

那么有没有一种方法可以在运行所有数据点结束时执行。

我的代码如下

```
@RunWith(Theories.class) 
public class Apple{

   @Datapoints
   ----------------
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:47:48.217

您可以`@AfterClass`在所有理论都执行后运行。

```
@RunWith(Theories.class)
public class TheoryTest {
  @DataPoints
  public static Long[] data() {
    return new Long[] { Long.valueOf(3), Long.valueOf(4) };
  }

  @Theory
  public void test1(Long input) {
    System.out.println("test1 input=" + input);
  }

  @AfterClass
  public static void afterClass() {
    System.out.println("afterClass");
  }
} 
```

生产

```
test1 input=3
test1 input=4
afterClass 
```

# svn - 排除目录时如何`svn diff`？

> ID：13094148
> 
> 赞同：1
> 
> 时间：2012-10-26T20:41:53.610
> 
> 标签：svn, unix

我正在尝试在 SVN 中特定文件夹的两个修订版之间生成差异。但是，一个子目录有很多我不希望包含在差异中的混乱和不相关的更改。关于我如何做到这一点的任何想法？

我想也许我可以尝试这样的事情？

```
C:\>svn diff -r 58:64 `svn ls http://svn-server/svn/my-app/branches/prototype | grep -v 'doc/'` 
```

但这似乎不起作用：

```
svn: E155007: 'C:\cygwin\home\myusername\.gitignore' is not a working copy 
```

.gitignore 是返回的文件之一`svn ls http://svn-server/svn/my-app/branches/prototype | grep -v 'doc/'`：

```
C:\>svn ls http://svn-server/svn/my-app/branches/prototype | grep -v 'doc/'
.gitignore
.project
.rspec
.rvmrc
Gemfile
Gemfile.lock
README.rdoc
Rakefile
app/
config/
config.ru
db/
features/
lib/
log/
public/
script/
spec/
test/
vendor/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:14:49.717

我建议您将 CD 放入该文件夹的本地工作副本，然后再次尝试该命令。那么“svn diff”应该能够理解“svn ls”输出的本地路径。

# sql-server-2008-r2 - 我必须通过哪些方式将表和数据从 SQL Server 导入到 SQL Azure？

> ID：13094149
> 
> 赞同：1
> 
> 时间：2012-10-26T20:41:57.360
> 
> 标签：sql-server-2008-r2, azure-sql-database, azure-data-sync

我正在寻找将数据从 SQL Server 导入 SQL Azure 的最简单方法。

我想在本地工作，有没有办法让我的本地数据库一直同步到 SQL Azure？

问题是每次我将本地数据库中的表添加到 SQL Azure 时，我都不想更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T00:50:47.957

我强烈推荐使用 SQL 数据库迁移向导：[http](http://sqlazuremw.codeplex.com/) ://sqlazuremw.codeplex.com/它是迄今为止我用过的最好的免费工具。SSMS 和 VS 内置工具简单易用。我认为 Red-Gate 工具现在也可以很好地与 SQL Azure 配合使用——但我还没有机会使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T23:24:28.193

您看过 SQL 数据同步吗？今天刚刚发布了一个新的 10 月更新。

[http://msdn.microsoft.com/en-us/library/hh456371](http://msdn.microsoft.com/en-us/library/hh456371)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T23:31:47.143

[Microsoft SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx) ( **SSDT** ) 由 Microsoft 开发，可让您轻松将 DB 部署到 Azure。

这是一个详细的解释：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj156163.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj156163.aspx)或[http://blogs.msdn.com/b/ssdt/archive/2012/04/19/migrating -a-database-to-sql-azure-using-ssdt.aspx](http://blogs.msdn.com/b/ssdt/archive/2012/04/19/migrating-a-database-to-sql-azure-using-ssdt.aspx)

以下是如何自动化发布过程：[http ://www.anujchaudhary.com/2012/08/sqlpackageexe-automating-ssdt-deployment.html](http://www.anujchaudhary.com/2012/08/sqlpackageexe-automating-ssdt-deployment.html)

查看：[SQL Server 数据工具团队博客](http://blogs.msdn.com/b/ssdt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T23:36:47.720

迁移数据库有几种方法，我建议您使用生成脚本向导来完成。

以下是要遵循的步骤

[http://msdn.microsoft.com/en-us/library/windowsazure/ee621790.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee621790.aspx)

还有其他工具，例如 Microsoft Sync Framework。

在这里你会找到更多关于它的信息

[http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx)

# java - 在java中将字符串验证为ISO 8601周数？

> ID：13094150
> 
> 赞同：0
> 
> 时间：2012-10-26T20:41:59.277
> 
> 标签：java, date

我有一个字符串，有没有一种简单的方法来验证该字符串是否代表 Java 中的 ISO 8601 周数？

```
String s="2012-W43-5" 
```

这代表 2012 年第 43 周的第 5 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:46:36.933

只需检查是否[`SimpleDateFormat#parse()`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)不抛出`ParseException`.

```
String string = "2012-W43-5";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-'W'w-u");
sdf.setLenient(false);
Date date = sdf.parse(string); 
```

请注意，这[`setLenient(false)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)使它变得不宽松，这意味着溢出的值不会翻转。

# ruby-on-rails - 使用 :include_blank 删除 rails 关系

> ID：13094152
> 
> 赞同：0
> 
> 时间：2012-10-26T20:42:15.627
> 
> 标签：ruby-on-rails

我希望能够选择一个空白对象并将其发布，以便我可以清除导轨关系。默认情况下，当您在 :include_blank 条目上选择 POST 时，不会发布任何内容，因此不会删除旧关系。所以我试图在数组中添加一个 0 id 空白项。

原来的：

```
<%= select_f f,:config_template_id, @operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id), :id, :name, {:include_blank => true}, { :label => f.object.template_kind } %> 
```

矿：

```
<%= select_f f,:config_template_id, @operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id).collect { |c| [c.name, c.id]}.insert(0, ['', 0]) %> 
```

我收到了“错误数量的参数（3 比 5）”错误，但无法弄清楚我错过了什么。任何指针？（我也无法在网络上的任何地方找到 select_f，我认为谷歌忽略了 _ 所以搜索是一种开放式的方式......对于 rails 3，我应该使用其他东西吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:23:31.337

您已经省略了传递给原始代码块的第 3、4、5 和 6 个参数。不管`select_f`是什么，它至少需要 5 个参数。在原始文件中，您将以下内容传递给`select_f` *（为清楚起见，每行一个参数）*

```
f,
:config_template_id, 
@operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id), 
:id, 
:name, 
{:include_blank => true}, 
{ :label => f.object.template_kind } 
```

在您的新*（中断）*通话中，您只是通过

```
f, 
:config_template_id, 
@operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id).collect { |c| [c.name, c.id]}.insert(0, ['', 0]) 
```

使用您的第一个方法调用，只需替换第三个参数。

```
f,
:config_template_id, 
@operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id).collect { |c| [c.name, c.id]}.insert(0, ['', 0])
:id, 
:name, 
{:include_blank => true}, 
{ :label => f.object.template_kind } 
```

最后，如果您不想`:include_blank => true`传递 ，但仍然想要标签，只需将`nil`or传递`{}`给第 5 个参数

```
f,
:config_template_id, 
@operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id).collect { |c| [c.name, c.id]}.insert(0, ['', 0])
:id, 
:name, 
nil,
{ :label => f.object.template_kind } 
```

并且完全在一条线上：

```
<%= select_f f, :config_template_id, @operatingsystem.config_templates.where(:template_kind_id => f.object.template_kind_id).collect { |c| [c.name, c.id]}.insert(0, ['', 0]), :id, :name, nil, { :label => f.object.template_kind } %> 
```

我不能保证这行得通，因为我不知道 API 的`select_f`位置或者您是否自己创建了它。但是，这应该会推动您朝着正确的方向前进。

# javascript - Javascript Regex 用特定约束替换特定字符串

> ID：13094153
> 
> 赞同：-1
> 
> 时间：2012-10-26T20:42:16.163
> 
> 标签：javascript, regex, replace

我有一个这样的字符串：`{{q:6}}`

我需要能够制作一个正则表达式来接受它并将其变成这样：“这里的问题”

Regex 需要忽略`{{q:`，并且对于从 0 到 100 的任何数字都需要为 [0-9]。

```
var final_value = value.replace(/^{{q:([0-9]+)$}}/g, 'question'); 
```

在这种情况下使用它^，但这不起作用。有什么想法吗？

提前致谢！

编辑：最终工作答案：

```
value.replace(/\{\{q:([0-9]+)\}\}/g, question); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:46:03.770

`$`标志需要在之后`}}`

```
"{{q:6}}".replace(/^{{q:([0-9]+)}}$/g, 'question');// <= yields "question" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:47:32.663

```
String final_value = "{{q:6}}\n{{q:39}}".replaceAll("\\{\\{q:([0-9]+)\\}\\}", "Question: $1");
System.out.println(final_value); 
```

这是java，一般的答案是：`"/\{\{q:([0-9]+)\}\}/g"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:46:02.680

你需要逃避你的`{`and `}`。

此外，如果您想限制从 0 到 100（含），那么您需要更改：

```
[0-9]+ 
```

它将接受任何数字字符串，例如：

```
[1]?\d?\d 
```

哪个会接受`1`或不接受，一个数字（或不接受），然后是一个数字。

编辑：还有@ruakh 对您的`$`应用位置的评论。

# android - 来自 Android 的 ASP .Net Web 服务消耗品

> ID：13094158
> 
> 赞同：0
> 
> 时间：2012-10-26T20:42:51.007
> 
> 标签：android, asp.net, web-services, image

我需要在 ASP .Net 中开发一个基于 Web 服务的应用程序，该应用程序将从各种平台（最显着的是 .Net 和 Android）中使用。一种方法需要接受图像并将它们存储在服务器中。如果仅从 .Net 使用该应用程序，则该方法将具有以下签名：

```
void AddImage(Image img); 
```

但是，既然 Android 和 Java 显然不会知道 Image 类，那么在这种情况下我应该选择什么方法呢？将图像作为字节数组传递更好还是应该使用其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:55:00.820

在 android 中，您可以将该图像转换为 base 64 字符串，然后可以传递给 web 服务，

```
 String encodedImage = Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

在这种情况下，您的方法将如下所示

```
 void AddImage(String img); 
```

# shader - three.js - 着色器纹理未出现（闪烁）

> ID：13094161
> 
> 赞同：3
> 
> 时间：2012-10-26T20:43:01.653
> 
> 标签：shader, three.js, uniform

我搜索了所有论坛，但没有找到其他人遇到这个问题......我在球体上使用着色器来 1）创建内部发光和 2）应用地球纹理。当我这样做时 - 内部发光出现，但纹理没有。在我的控制台中输入：uniforms.texture1.texture.image.src - 我收到了纹理的正确源位置：*http://localhost:8091/media/world.jpg"

似乎我的着色器知道纹理，但没有显示它。当我在场景中添加一个具有纹理的新对象（比如说一个立方体）时 - 我的球体突然假设我的新立方体对象的纹理。如果我在场景中添加两个新对象（假设一个带有木盒纹理的盒子和一个带有星形纹理的天空盒）——我的球体试图同时假设木盒纹理和星星纹理——从而导致闪烁效果（两者都不是我想要的纹理）。

我的代码如下：

```
 var Shaders = {
         'earth' : {
  uniforms: {
    'texture': { type: 't', value: THREE.ImageUtils.loadTexture( "media/world.jpg" ) }
  },
  vertexShader: [
    'varying vec3 vNormal;',
    'varying vec2 vUv;',
    'void main(void) {',
    'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
      'vNormal = normalize( normalMatrix * normal );',
      'vUv = uv;',
    '}'
  ].join('\n'),
  fragmentShader: [
    'uniform sampler2D texture;',
    'varying vec3 vNormal;',
    'varying vec2 vUv;',
    'void main(void) {',
        'vec3 diffuse = texture2D( texture, vUv ).xyz;',
        'float intensity = 1.05 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) );',
        'vec3 atmosphere = vec3( 1.0, 1.0, 1.0 ) * pow( intensity, 3.0 );',
        'gl_FragColor = vec4(diffuse + atmosphere, 1.0);',
    '}'
  ].join('\n')
} 
```

};

在我初始化所有内容时（在我设置好灯光、相机、场景等之后） - 我使用以下内容创建了我的球体：

```
var geometry = new THREE.SphereGeometry(250, 40, 40)

var shader = Shaders['earth'];
uniforms = THREE.UniformsUtils.clone(shader.uniforms);

material = new THREE.ShaderMaterial({

      uniforms: uniforms,
      vertexShader: shader.vertexShader,
      fragmentShader: shader.fragmentShader

    });

mesh = new THREE.Mesh(
new THREE.SphereGeometry(250, 40, 40), material);
mesh.matrixAutoUpdate = false;
scene.add(mesh); 
```

我也尝试将此代码放在我的html头中（当然不带引号），但这并没有改变任何东西......任何帮助将不胜感激。我正在使用 r51 of three.js 并且还尝试了 r52。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:02:13.467

纹理现在分配不同：

```
{ type: "t", value: 0, texture: map } => { type: "t", value: map } 
```

请参阅three.js Wiki 上的迁移文档：[https](https://github.com/mrdoob/three.js/wiki/Migration) ://github.com/mrdoob/three.js/wiki/Migration 。

当前版本现在是 r.52。保持最新状态是个好主意。

编辑：另外，在这种情况下，不要克隆你`uniforms`的，只需像这样分配它们：

```
uniforms = shader.uniforms; 
```

# fullcalendar - 使用 FullCalendar 从 Google 日历中获取事件数据

> ID：13094163
> 
> 赞同：0
> 
> 时间：2012-10-26T20:43:12.060
> 
> 标签：fullcalendar

几个小时以来，我一直在尝试使用 FullCalendar 从 Google 日历中获取事件数据。我希望数据位于一个对象中，这样我就可以在页面上显示的完整日历之外使用它，但我似乎无法正确处理。

这是我的代码：

```
$(document).ready(function() {

    $('#calendar').fullCalendar({
    events: 'https://www.google.com/calendar/feeds/wrchapin%40gmail.com/public/basic',
    });

    var events = $('#calendar').fullCalendar( 'clientEvents' );
    console.log(events.length);
}); 
```

日历显示在页面上，但控制台显示长度为 0。这是怎么回事？我是否不正确地使用了 clientEvents 方法？

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T04:26:40.583

这里的问题是调用获取`clientEvents`事件发生在日历加载事件之前。这就是事件数组为空的原因。

`loading`您可以通过使用日历的回调轻松解决此问题。看看这个小提琴：http: [//jsfiddle.net/100thGear/gt8F9/](http://jsfiddle.net/100thGear/gt8F9/)

让我知道这是否有帮助！

# linux - 在 bash 中打印文件夹名称

> ID：13094165
> 
> 赞同：1
> 
> 时间：2012-10-26T20:43:20.277
> 
> 标签：linux, bash

这段 bash 代码在存在许多文件夹时没有显示文件夹名称。

```
#!/bin/bash

for file in .; do
  if [  -d $file ]; then 
    echo $file
  fi
done 
```

输出只是`.` 你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:46:17.313

它读取`.`为大小为 1 的数组并为您打印。改用这样的东西：

```
for file in `ls`; do
  if [  -d $file ]; then 
    echo $file
  fi
done 
```

# ios - 你如何在 iOS 应用程序中绘制曲线路径，类似于它们在寻宝地图上显示的路径

> ID：13094166
> 
> 赞同：1
> 
> 时间：2012-10-26T20:43:24.273
> 
> 标签：ios

如何绘制一条通过 iOS 应用程序中的一组点的曲线路径（类似于下面显示的路径）。

![在此处输入图像描述](../Images/523848fb850faa2899afe415a2d8ee7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:47:50.320

`UIBazierPath`

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)

您创建它，添加点以创建曲线，设置所需的虚线，然后使用`- (void)stroke`它来绘制它。

# java - 使用计数循环打印

> ID：13094168
> 
> 赞同：0
> 
> 时间：2012-10-26T20:43:47.690
> 
> 标签：java

我正在阅读一个文件并打印出该文件。我正在做的是计算不匹配的括号。我的代码可以正常工作并正确计算大括号。但问题是该格式只会在行首打印计数，而不是在大括号后面。我只需要在有支架时打印计数。无论如何将打印语句格式化到行尾？检查我的“\n”语句在哪里。我想知道是否有一个不是换行符而是附加到行尾的地方。

```
 if (brace == '{')
                {
                    count++;
                    System.out.print("\n" + count);
                }
                else if (brace == '}')
                {
                    count = count;
                    System.out.print("\n" + count);
                    count--;
                    if (count < 0)
                    {
                    count = 0;
                    }
                }

            }
                System.out.println(inputLine); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:48:37.420

此行不执行任何操作，将其删除：

```
count = count; 
```

要在大括号后面打印计数，请将打印语句更改为：

```
System.out.print(count + "\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:10:14.937

放置打印源代码行的语句：

```
System.out.println(inputLine); 
```

在顶部，在打印大括号计数之前。您也可以考虑使用`print`代替，`println`以便将大括号计数打印在它旁边，而不是在新行上。

# java - 如何捕获登录名并将视图限制为仅用户提交的记录

> ID：13094180
> 
> 赞同：1
> 
> 时间：2012-10-26T20:44:40.277
> 
> 标签：java, spring-mvc, spring-roo

我正在使用 Spring Roo 和 Spring MVC。

我已经设置 Spring Security 以使用 MySQL 数据库并使用标准模式、表用户、表权限进行身份验证。

我所拥有的是一个网络应用程序，用于接受我们在现场的销售人员的订单。他们只需填写表格并将其提交到数据库。

ROO 生成的 MVC 页面可以很好地启动，但我需要进行一些更改，但我不知道具体该怎么做。我刚刚开始学习java。

我需要的是我们的销售订单表单捕获用户名，提交的记录将用他们的用户名标记，然后过滤视图，以便销售人员只能看到他们自己提交的记录。

我还想在表单底部实现手写笔签名捕获。我试图弄清楚如何使用[http://thomasjbradley.ca/lab/signature-pad/#howto](http://thomasjbradley.ca/lab/signature-pad/#howto)但我迷失了在哪里放置代码。我假设在 src\main\views\salesorders\create.jspx 我知道这部分与我的原始帖子无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:55:57.793

您将需要在您的数据库中保存订单表格的表。该表的一个重要部分是每一行都需要包含一种映射回提交它的用户的方法。这很可能最容易使用作为用户表外键的列来实现。

当需要为特定用户获取表单时，您将需要查询订单表单表并使用`WHERE`将行限制为仅当前用户的子句。

至于您的第二个问题，您可能更值得在 stackoverflow 上提出另一个问题，因为它根本与原始问题无关。

# excel - Google Docs 多条件计数公式

> ID：13094185
> 
> 赞同：0
> 
> 时间：2012-10-26T20:45:03.003
> 
> 标签：excel, google-docs, formula

我想创建一个 Google Docs 公式，该公式将计算和求和，其中一个单词出现在列中的次数。即我在 Sheet1 - A 列和 Sheet2 - A1 列中有值，我想计算（总和）Google **OR** Yahoo **OR** Ask 出现在 Sheet1-A 列中的次数（参见示例）。如何做到这一点？谢谢！

![在此处输入图像描述](../Images/380fb1d734b8a676b740c9a9a0963ed7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:24:23.453

此公式应适用于 Google 文档或 Excel

`=sum(countif(sheet1!A:A,{"Ask","Yahoo","Google"}))`

# android - Android：单例 DefaultHttpClient 不会保持会话

> ID：13094187
> 
> 赞同：5
> 
> 时间：2012-10-26T20:45:08.157
> 
> 标签：android

我在我的 Android 应用程序中使用 DefaultHttpClient 的单例实例，以便与我的网站的会话在登录后在多个活动中保持身份验证。

这是 DefaultHttpClient 的单例类：

```
public class Client {
  private static DefaultHttpClient instance = null;
  //handler for current response in UI thread after receiving it in AsyncTask
  private static HttpResponse currentResponse = null;

  //I also tried this without "synchronized"
  public synchronized static DefaultHttpClient getInstance()
  {
  if(instance == null)
    {
      instance = new DefaultHttpClient();
    }
    return instance;
  }
  public static void setCurrentResponse(HttpResponse response)
  {
    currentResponse = response;
  }
  public static HttpResponse getCurrentResponse()
  {
    return currentResponse;
  }
} 
```

每次使用 Client.getInstance() 在 AsyncTask 中使用客户端时，我都会调用客户端。

我努力了：

```
ClientInstance = Client.getInstance();
Client.setCurrentResponse(ClientInstance.execute(HttpPost to execute)); 
```

我努力了：

```
Client.setCurrentResponse(Client.getInstance().execute(HttpPost to execute)); 
```

以及我通过搜索找到的许多其他方法。

我也尝试过使用 CookeStore 和 HttpContext，它们会产生相同的结果。

当我从响应中获取实体时，在实体上使用 consumeContent() 也不能解决问题。

我发现的所有内容都表明，使用 DefaultHttpClient 的单例实例允许它维持其会话，但每次我执行帖子以执行我的网站要求用户登录的操作时，我得到的响应正文显示指示未设置“user_id”会话变量的错误（因此用户未登录）。我已经彻底搜索了 Google 和 Stack Overflow，但无济于事。有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T21:39:18.333

Sorry for the question, guys.

After almost losing my sanity, I looked my php code over one more time. It turns out the problem was on my webpage - I was not allowing the php to call session_start() when receiving the mobile HttpPost. Who knows, maybe my question/answer will help somebody else.

# rest - 如何使用 MOXy 请求 XMLElements 的子集？

> ID：13094195
> 
> 赞同：1
> 
> 时间：2012-10-26T20:46:09.453
> 
> 标签：rest, jaxb, moxy

如果“选择器”随请求一起提交，我有一个 RESTful 服务只需要返回几个 XmlElements。URL 将采用以下形式：

```
/merchants/{merchantId}/profile?selectors=<field1|field2|....|fieldN> 
```

选择器是可选的，到目前为止，我已经实现了在没有指定选择器的情况下返回全套元素的服务`{merchantId}`。现在我试图弄清楚如何添加这个附加功能。我确定这已包含在文档中，但我找不到在哪里。任何 RTFM 指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:16:22.437

[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)当前不提供一种机制来选择性地指示每个编组操作中包含哪些字段/属性。这听起来像是一个有趣的用例。如果您可以使用以下链接将其作为增强请求输入，我将不胜感激：

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

下面是一个示例，说明如何通过利用[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)在值为 null 时不会编组元素 `XmlAdapter`的事实来使用有状态来实现此用例（请参阅： [http ://blog.bdoughan.com](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html) [/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)）。[](http://jcp.org/en/jsr/detail?id=222)

 ****场适配器**

由于我们要利用有状态的 XmlAdapters，我们将需要每个字段一个。由于我们所有的 XmlAdapter 都将执行相同的逻辑，我们可以创建一个其他人可以扩展的超类。

```
package forum13094195;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class FieldAdapter<T> extends XmlAdapter<T, T> {

    private boolean include;

    public FieldAdapter() {
        this.include = true;
    }

    public FieldAdapter(boolean include) {
        this.include = include;
    }

    @Override
    public T marshal(T value) throws Exception {
        if(include) {
            return value;
        }
        return null;
    }

    @Override
    public T unmarshal(T value) throws Exception {
        return value;
    }

} 
```

**Field1适配器**

```
package forum13094195;

public class Field1Adapter extends FieldAdapter<String> {
    public Field1Adapter() {}

    public Field1Adapter(boolean include) {
        super(include);
    }
} 
```

**Field2适配器**

```
package forum13094195;

public class Field2Adapter extends FieldAdapter<Integer>{
    public Field2Adapter() {}

    public Field2Adapter(boolean include) {
        super(include);
    }
} 
```

**Field3适配器**

```
package forum13094195;

public class Field3Adapter extends FieldAdapter<String> {
    public Field3Adapter() {}

    public Field3Adapter(boolean include) {
        super(include);
    }
} 
```

**商人**

`@XmlJavaTypeAdapter`注释用于在字段/属性上指定一个`XmlAdapter`。

```
package forum13094195;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Merchant {

    @XmlJavaTypeAdapter(Field1Adapter.class)
    String field1;

    @XmlJavaTypeAdapter(Field2Adapter.class)
    int field2;

    @XmlJavaTypeAdapter(Field3Adapter.class)
    String field3;

} 
```

**演示**

下面的演示代码演示了如何`XmlAdapter`在`Marshaller`.

```
package forum13094195;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Merchant.class);

        Merchant merchant = new Merchant();
        merchant.field1 = "A";
        merchant.field2 = 2;
        merchant.field3 = "C";

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(merchant, System.out);

        marshaller.setAdapter(new Field1Adapter(false));
        marshaller.setAdapter(new Field2Adapter(false));
        marshaller.setAdapter(new Field3Adapter(true));
        marshaller.marshal(merchant, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。默认情况下，整个对象被编组。编组的第二个文档不包含我们排除的字段。

```
<?xml version="1.0" encoding="UTF-8"?>
<merchant>
   <field1>A</field1>
   <field2>2</field2>
   <field3>C</field3>
</merchant> 
```

```
<?xml version="1.0" encoding="UTF-8"?>
<merchant>
   <field3>C</field3>
</merchant> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T18:14:12.357

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

在 EclipseLink 2.5.0 中，我们发布了一个名为 Object Graphs 的新功能，它使您能够编组/解组映射字段/属性的子集。

```
 // Create the Object Graph
    ObjectGraph subset = JAXBHelper.getJAXBContext(jc).createObjectGraph(Merchant.class);
    subset.addAttributeNodes("field1", "field1", "fieldN");

    // Output XML - Based on Object Graph
    marshaller.setProperty(MarshallerProperties.OBJECT_GRAPH, subset);
    marshaller.marshal(customer, System.out); 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/03/moxys-object-graphs-partial-models-on.html](http://blog.bdoughan.com/2013/03/moxys-object-graphs-partial-models-on.html)**

# macos - 阻塞主线程的状态项（NSMenu 阻止 NSSpeechRecognizer 检测声音）

> ID：13094198
> 
> 赞同：1
> 
> 时间：2012-10-26T20:46:21.207
> 
> 标签：macos, menu, speech-recognition, speech, speech-to-text

我有一个`NSMenu`下一个`NSStatusItem`。我也有一个`NSSpeechRecognizer`。打开时`NSMenu`，语音识别器无法正常工作。它会不断显示它正在接收声音，直到我关闭菜单。即使菜单打开，我也需要它来正确检测声音。

即使菜单打开，如何让语音识别器检测声音？它是否需要成为“第一响应者”并优先于菜单？

我试过设置`[speechRecognizer setListensInForegroundOnly: NO]`，*还是*不行。

如果您不明白，我很乐意提供澄清。

这里有一些[类似的](https://stackoverflow.com/questions/2808016/how-does-apple-update-the-airport-menu-while-it-is-open-how-to-change-nsmenu-w) [情况](https://stackoverflow.com/questions/10881122/main-thread-runloop-gets-blocked-on-opening-nsmenu)，但我还没有完全理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:00:09.550

问题很可能是菜单正在运行模式运行循环，只要它处于打开状态（用于跟踪鼠标等......），这会阻止`NSSpeechRecognizer`' 正常运行的能力。

您可以通过调出菜单然后暂停进入调试器来确认这一点。你可能会看到两个运行循环；运行模态循环的堆栈的外部，正常，一个和一个更深。

一般来说，从用户交互的角度来看，这是一件奇怪的事情。弹出菜单的全部意义在于向用户提供一些命令，这些命令将在选择相应的菜单项*后执行。*

如果你真的需要“点击这个东西并识别声音”，我会推荐一个按钮，它可能会弹出一些 UI，然后在不使用菜单的情况下与语音识别器交互？

# nuget - 您可以通过 nuget 包部署数据而不部署程序集吗？

> ID：13094204
> 
> 赞同：3
> 
> 时间：2012-10-26T20:46:41.083
> 
> 标签：nuget

是否可以使用 nuget 而不是 dll 来部署测试数据？

我们有一些较大的测试数据文件，我不想保留在我们的 git 存储库中，我想知道我们是否可以通过将它们包含在构建期间安装的 nuget 包中来在构建期间将它们部署到测试项目中。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:39:28.633

是的，但是，如果不了解有关您的项目结构的更多细节，很难准确地告诉您您将如何做到这一点。

如果您只想将数据文件复制到测试项目的目录中，只需将文件放在 NuGet 包中的内容文件夹中，它就会自动将它们复制到您的项目中，方式与复制 DLL。如果这就是你所需要的，你可以在几分钟内创建一个这样的包。

如果您需要将测试数据文件部署到项目目录之外的目录，或操作文件名或内容，您也可以这样做。我通常会创建一个工具包来执行此操作。

我将要复制的文件放入包中的工具目录中，然后创建一个简单的 init.ps1 或 install.ps1 脚本来执行所需的任何复制和文件操作任务。

如果您对从头开始创建包的前景感到害怕，您可能会发现 NuGet 包资源管理器很有帮助。您可以创建一个内容文件夹并将要部署的内容拖到其中：

[http://npe.codeplex.com/](http://npe.codeplex.com/)

# python - 将jinja2过滤器应用于块？

> ID：13094205
> 
> 赞同：13
> 
> 时间：2012-10-26T20:46:42.510
> 
> 标签：python, templates, jinja2

是否可以将 jinja2 过滤器应用于`{% block ... %}`构造？我希望做的是类似的事情：

```
{% block content|upper %}
here is some content that will be rendered in upper case
{% endblock %} 
```

...但这不起作用；上面的示例将导致错误。有没有其他方法可以在 jinja2 过滤器中包装一大块模板文本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T20:59:26.807

您可以使用[**过滤器**部分](http://jinja.pocoo.org/docs/templates/#id7)：

```
{% block content %}
    {% filter upper %}
        Here is some content that will be rendered in upper case.
    {% endfilter %}
{% endblock %} 
```

# jsf - 如何修复“目标无法访问，标识符 'bean' 解析为 null”？

> ID：13094209
> 
> 赞同：1
> 
> 时间：2012-10-26T20:47:18.193
> 
> 标签：jsf, primefaces, cdi, codi, view-scope

我正在使用 JSF 2.1.7 和 Primefaces 3.2、CDI 和 Apache MyFaces CODI 来访问 @ViewScoped。

一切工作正常，但是当我通过 ui:param 将 bean 传递到另一个页面，然后尝试通过 ap:ajax 请求专门使用该 bean 时，我收到消息，“目标无法访问，标识符 'bean' 解析为无效的”

```
<ui:include src="page.xhtml">
   <ui:param name="bean" value="#{formBean}" />
</ui:include> 
```

然后在 page.xhtml 我尝试这样做。

```
<p:gmap zoom="15" type="HYBRID" model="#{bean.simpleModel}">
   <p:ajax event="markerDrag" listener="#{bean.onMarkerDrag}" />
</p:gmap> 
```

对 bean.simpleModel 的第一次调用正确解析。对 bean.onMarkerDrag 的 ajax 调用没有。

我对formBean 的声明是@Named("formBean"), @ViewScoped。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:05:52.380

我只是有同样的问题。就我而言，我使用了

```
<p:commandButton value="Edit" icon="ui-icon-pencil" actionListener="#{bean.edit}" /> 
```

在包含的模板中`<ui:include>`并得到相同的错误消息。

有趣的是，以下替代方案确实有效：

```
actionListener="#{bean.edit()}"
action="#{bean.edit}"
action="#{bean.edit()}" 
```

也许你应该试试

```
<p:ajax event="markerDrag" listener="#{bean.onMarkerDrag()}" /> 
```

即在您的方法表达式中添加括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:57:32.107

那是行不通的，因为它违反了@ViewScoped 的规则

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:25:12.297

@ViewScoped 对 CDI 来说很棘手，它不完全兼容。考虑尝试使用@SessionScoped。

如果它有效，请尝试使用 @ViewAccessScoped（因为您使用 Codi）。该范围基本上使 ViewScope 适应 CDI 使用。

仍然存在问题或已经在使用它？然后尝试@SessionScope 并报告发生的情况。

# mysql - pt-query-digest 没有结果和“0 总数，1 个唯一”。知道如何解决吗？

> ID：13094210
> 
> 赞同：2
> 
> 时间：2012-10-26T20:47:22.010
> 
> 标签：mysql, mysql-slow-query-log, pt-query-digest

对于我们的一些日志，percona 工具包 pt-query-digest 工具工作正常，但对于其他日志，我们得到以下输出：

```
# Files: /.../mysqld_slow.log
# Overall: 0 total, 1 unique, 0 QPS, 0x concurrency ______________________
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Query size        18.19M  18.19M  18.19M  18.19M  18.19M       0  18.19M

# Profile
# Rank       Query ID   Response time Calls      R/Call     Apdx V/M   Ite
# ========== ========== ========== ========== ========== ==== ===== ======
$ 
```

有人知道我的日志文件有什么问题吗？它似乎是有效的，具有以下前 10 行：

```
Sep 28 00:00:37 gcdb-master mysqld_slow_log: SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 576 LIMIT 1;
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # Query_time: 0.041188  Lock_time: 0.000046 Rows_sent: 1  Rows_examined: 46418
Sep 28 00:00:37 gcdb-master mysqld_slow_log: SET timestamp=1348790434;
Sep 28 00:00:37 gcdb-master mysqld_slow_log: SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 286358 LIMIT 1;
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # Query_time: 0.030769  Lock_time: 0.000050 Rows_sent: 1  Rows_examined: 46583
Sep 28 00:00:37 gcdb-master mysqld_slow_log: SET timestamp=1348790434;
Sep 28 00:00:37 gcdb-master mysqld_slow_log: SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 286679 LIMIT 1;
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
Sep 28 00:00:37 gcdb-master mysqld_slow_log: # Query_time: 0.594351  Lock_time: 0.000038 Rows_sent: 12  Rows_examined: 342673 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:07:10.270

我对您的示例输出进行了一些测试，我怀疑您的文件**无效**。该文件是通过剪切每行的类似 syslog 的部分从您的文件中获得的，并在第一次查询之前补充了两个缺失的 #description-lines，似乎可以工作

```
# User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
# Query_time: 0.041188  Lock_time: 0.000046 Rows_sent: 1  Rows_examined: 46418
SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 576 LIMIT 1;
# User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
# Query_time: 0.041188  Lock_time: 0.000046 Rows_sent: 1  Rows_examined: 46418
SET timestamp=1348790434;
SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 286358 LIMIT 1;
# User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
# Query_time: 0.030769  Lock_time: 0.000050 Rows_sent: 1  Rows_examined: 46583
SET timestamp=1348790434;
SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 286679 LIMIT 1;
# User@Host: db_one[db_one] @ ip-127.0.0.1.ec2.internal [127.0.0.1]
# Query_time: 0.594351  Lock_time: 0.000038 Rows_sent: 12  Rows_examined: 342673 
```

和同一个文件一样，我删除了第一行，以便从 #description 行开始，然后输出：

```
# 240ms user time, 20ms system time, 24.59M rss, 87.74M vsz
# Current date: Fri Nov  2 22:03:02 2012
# Hostname: mintaka
# Files: orig.log
# Overall: 3 total, 1 unique, 0 QPS, 0x concurrency ______________________
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time          113ms    31ms    41ms    38ms    40ms     5ms    40ms
# Lock time          142us    46us    50us    47us    49us     2us    44us
# Rows sent              3       1       1       1       1       0       1
# Rows examine     136.15k  45.33k  45.49k  45.38k  44.45k    0.00  44.45k
# Query size           234      76      79      78   76.28    1.50   76.28

# Profile
# Rank Query ID           Response time Calls R/Call Apdx V/M   Item
# ==== ================== ============= ===== ====== ==== ===== ==========
#    1 0x0C756AF10BC44B0D 0.1131 100.0%     3 0.0377 1.00  0.00 SELECT companies

# Query 1: 0 QPS, 0x concurrency, ID 0x0C756AF10BC44B0D at byte 226 ______
# This item is included in the report because it matches --limit.
# Scores: Apdex = 1.00 [1.0]*, V/M = 0.00
# Query_time sparkline: |    ^   |
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count        100       3
# Exec time    100   113ms    31ms    41ms    38ms    40ms     5ms    40ms
# Lock time    100   142us    46us    50us    47us    49us     2us    44us
# Rows sent    100       3       1       1       1       1       0       1
# Rows examine 100 136.15k  45.33k  45.49k  45.38k  44.45k    0.00  44.45k
# Query size   100     234      76      79      78   76.28    1.50   76.28
# String:
# Hosts        ip-127.0.0.1.ec2.internal
# Users        db_one
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'companies'\G
#    SHOW CREATE TABLE `companies`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT  `companies`.* FROM `companies`  WHERE `companies`.`id` = 286358 LIMIT 1\G 
```

所以我猜这个问题与日志文件格式*和*可能的轮换有关（例如，文件被截断，导致最初的#description 丢失）。

此外，我还研究了 Percona 实用程序代码。默认解析器（慢日志）搜索#Time 行以获取时间戳，我在我的慢日志中找到，但在您的日志中不存在。这不会影响阅读*本身*，但可能会扭曲结果。

它还用作输入记录分隔符，因此 syslog 格式对于默认的*slowlog*`";\n#"`是明确的“否” 。其他的似乎也不适用于 syslog+slowlog 格式。`--type`

 *我尝试更改输入记录分隔符并添加 hack 以删除每行的 syslog 部分，结果*似乎*有效，但我担心**它不起作用，**因为已知慢日志上的结果不一致。

恐怕最简单的做法是切断文件的开头，然后切断每行的开头，然后再将其提供给实用程序：

```
sed -e '/.*: #/,$b' -e 'd' < slow.log \
| cut -d' ' -f6- \
| pt-query-digest - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:40:19.267

该工具似乎永远不应该有这样的输出，因此您可以考虑[提交错误报告](https://bugs.launchpad.net/percona-toolkit)。

该错误可能与您的日志文件有关，也可能不存在。您可以尝试将日志文件拆分为几个较小的文件并查看是否可以解析这些文件——这至少可以缩小错误的来源。如果所有较小的文件都被正确解析，则可能是与缺乏资源或`pt-query-digest`因占用过多资源而被杀死有关的问题。*

# c++ - AC例程将浮点数舍入到n个有效数字？

> ID：13094224
> 
> 赞同：11
> 
> 时间：2012-10-26T20:48:48.263
> 
> 标签：c++, c, floating-point

假设我有一个`float`. 我想将它四舍五入到一定数量的有效数字。

就我而言`n=6`。

所以说浮动是`f=1.23456999;`

`round(f,6)`会给`1.23457`

`f=123456.0001` 会给`123456`

有人知道这样的套路吗？

它适用于网站： http: [//ostermiller.org/calc/significant_figures.html](http://ostermiller.org/calc/significant_figures.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T21:01:50.523

将数字乘以合适的比例因子，将所有有效数字移到小数点左侧。然后取整，最后逆运算：

```
#include <math.h>

double round_to_digits(double value, int digits)
{
    if (value == 0.0) // otherwise it will return 'nan' due to the log10() of zero
        return 0.0;

    double factor = pow(10.0, digits - ceil(log10(fabs(value))));
    return round(value * factor) / factor;   
} 
```

测试：http: [//ideone.com/fH5ebt](http://ideone.com/fH5ebt)

但是正如@PascalCuoq 指出的那样：四舍五入的值可能不能完全表示为浮点值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T21:02:29.890

```
#include <stdio.h> 
#include <string.h>
#include <stdlib.h>

char *Round(float f, int d)
{
    char buf[16];
    sprintf(buf, "%.*g", d, f);
    return strdup(buf);
}

int main(void)
{
    char *r = Round(1.23456999, 6);
    printf("%s\n", r);
    free(r);
} 
```

输出是：

> 1.23457

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T21:00:37.383

像这样的东西应该工作：

```
double round_to_n_digits(double x, int n)
{ 
    double scale = pow(10.0, ceil(log10(fabs(x))) + n);

    return round(x * scale) / scale;
} 
```

或者，您可以只使用`sprintf`/`atof`转换为字符串并再次返回：

```
double round_to_n_digits(double x, int n)
{ 
    char buff[32];

    sprintf(buff, "%.*g", n, x);

    return atof(buff);
} 
```

上述两个功能的测试代码：http: [//ideone.com/oMzQZZ](http://ideone.com/oMzQZZ)

* * *

请注意，在某些情况下可能会观察到不正确的舍入，例如[@clearScreen](https://stackoverflow.com/users/2190313/clearscreen)在下面的评论中指出，13127.15 舍入为 13127.1 而不是 13127.2。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T21:43:37.860

这应该有效（浮点精度给出的噪声除外）：

```
#include <stdio.h>
#include <math.h>

double dround(double a, int ndigits);

double dround(double a, int ndigits) {

  int    exp_base10 = round(log10(a));
  double man_base10 = a*pow(10.0,-exp_base10);
  double factor     = pow(10.0,-ndigits+1);  
  double truncated_man_base10 = man_base10 - fmod(man_base10,factor);
  double rounded_remainder    = fmod(man_base10,factor)/factor;

  rounded_remainder = rounded_remainder > 0.5 ? 1.0*factor : 0.0;

  return (truncated_man_base10 + rounded_remainder)*pow(10.0,exp_base10) ;
}

int main() {

  double a = 1.23456999;
  double b = 123456.0001;

  printf("%12.12f\n",dround(a,6));
  printf("%12.12f\n",dround(b,6));

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-26T20:50:45.203

如果要将浮点数打印到字符串，请使用 simple [`sprintf()`](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)。要将其输出到控制台，您可以使用[`printf()`](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)：

```
printf("My float is %.6f", myfloat); 
```

这将输出带有 6 位小数的浮点数。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-07-20T22:50:46.283

> 打印到 16 位有效数字。

```
double x = -1932970.8299999994;
char buff[100];
snprintf(buff, sizeof(buff), "%.16g", x);
std::string buffAsStdStr = buff;

std::cout << std::endl << buffAsStdStr ; 
```

# android - 如何设置 ActionBar Sherlock Tab？

> ID：13094225
> 
> 赞同：0
> 
> 时间：2012-10-26T20:48:52.280
> 
> 标签：android, tabs, actionbarsherlock

由于设计原因，我正在将我的应用程序选项卡（API 7）切换到操作栏 Sherlock 中使用的选项卡，但我不知道如何设置它。

我以前是这样的：

```
 tabH = (TabHost) findViewById(R.id.tabhost);

    tabH.setup();

    TabSpec espec = tabH.newTabSpec("tabONE");
    espec.setContent(R.id.tbhot);
    espec.setIndicator("A");
    tabH.addTab(espec);

    espec = tabH.newTabSpec("tabTWO");
    espec.setContent(R.id.tbrecente);
    espec.setIndicator("B");
    tabH.addTab(espec);

    espec = tabH.newTabSpec("tabTHREE");
    espec.setContent(R.id.tbcreate);
    espec.setIndicator("C");
    tabH.addTab(espec); 
```

现在这就是我正在做的事情：

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    for (int i = 1; i <= 3; i++) {
        ActionBar.Tab tab = getSupportActionBar().newTab();
        if (i == 1)
            tab.setText("A");
        else if(i == 2)
            tab.setText("B");
        else if (i == 3)
            tab.setText("C");
        tab.setTabListener(this);
        getSupportActionBar().addTab(tab);
    } 
```

那行得通，但我不知道如何设置内容，所以所有选项卡都有相同的内容。我该怎么做？

此外，我的另一个选项卡位于布局的底部。是否也可以将这个设置在底部？我相信如果我可以在新标签中设置TabHost，它也会在底部，所以问题是，如何在这里设置tabhost？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:07:35.793

我通常使用片段作为内容。您必须实现 ActionBar.TabListener 并在那里调整您的内容，但这很容易。您可以在开头添加所有片段并显示/隐藏它们，或替换当前片段。

# ruby-on-rails-3 - has_many的Rails验证计数限制：通过

> ID：13094227
> 
> 赞同：3
> 
> 时间：2012-10-26T20:48:58.223
> 
> 标签：ruby-on-rails-3, count, limit, has-many-through, custom-validators

我有以下模型：团队、成员、分配、角色

Team 模型有_many 成员。每个成员通过分配有_many 角色。角色分配是队长和跑步者。我还使用 Member 模型安装了 devise 和 CanCan。

我需要做的是限制每个团队最多有 1 名队长和 5 名跑步者。

我找到了这个[例子](https://stackoverflow.com/questions/9932445/rails-accepts-nested-attributes-count-validation)，它似乎在一些定制后工作，但在更新（'teams/1/members/4/edit'）。它不适用于创建（'teams/1/members/new'）。但是我的其他验证（验证 :role_ids, :presence => true ）确实适用于更新和创建。任何帮助，将不胜感激。

**更新：**我发现这个[例子](https://stackoverflow.com/questions/1270663/validate-max-amount-af-associated-objects)似乎与我的问题相似，但我似乎无法让它适用于我的应用程序。

问题的根源似乎在于在验证之前和期间如何执行计数（或大小）。

例如：

更新记录时...它检查团队中有多少跑步者并返回计数。（即 5）然后，当我选择要添加到成员的角色时，它会从数据库中获取已知计数（即 5）并添加建议的更改（即 1），然后运行验证检查。(Team.find(self.team_id).members.runner.count > 5) 这很好用，因为它返回的值是 6 和 6 > 5，所以建议的更新会在不保存的情况下失败并给出错误。

**但是**当我尝试在团队中创建新成员时......它会检查团队中有多少跑步者并返回计数。（即 5）然后，当我选择要添加到成员的角色时，它会从数据库中获取已知计数（即 5），然后运行验证检查**而不**考虑建议的更改。这不起作用，因为它返回值 5 known runner 和 5 = 5 因此建议的更新通过并且新成员和角色被保存到数据库中而没有错误。

会员型号：

```
class Member < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :password, :password_confirmation, :remember_me
  attr_accessible :age, :email, :first_name, :last_name, :sex, :shirt_size, :team_id, :assignments_attributes, :role_ids
  belongs_to :team
  has_many :assignments, :dependent => :destroy
  has_many :roles, through: :assignments
    accepts_nested_attributes_for :assignments

  scope :runner, joins(:roles).where('roles.title = ?', "Runner")
  scope :captain, joins(:roles).where('roles.title = ?', "Captain")

  validate :validate_runner_count
  validate :validate_captain_count
  validates :role_ids, :presence => true

  def validate_runner_count
     if Team.find(self.team_id).members.runner.count > 5
       errors.add(:role_id, 'Error - Max runner limit reached')
     end
  end

  def validate_captain_count
     if Team.find(self.team_id).members.captain.count > 1
       errors.add(:role_id, 'Error - Max captain limit reached')
     end
  end

  def has_role?(role_sym)
    roles.any? { |r| r.title.underscore.to_sym == role_sym }
  end

end 
```

成员控制器：

```
class MembersController < ApplicationController
  load_and_authorize_resource :team
  load_and_authorize_resource :member, :through => :team

  before_filter :get_team
  before_filter :initialize_check_boxes, :only => [:create, :update]

  def get_team
    @team = Team.find(params[:team_id])
  end

  def index
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @members }
    end
  end

  def show
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @member }
    end
  end

  def new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @member }
    end
  end

  def edit

  end

  def create
    respond_to do |format|
      if @member.save
        format.html { redirect_to [@team, @member], notice: 'Member was successfully created.' }
        format.json { render json: [@team, @member], status: :created, location: [@team, @member] }
      else
        format.html { render action: "new" }
        format.json { render json: @member.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    respond_to do |format|
      if @member.update_attributes(params[:member])
        format.html { redirect_to [@team, @member], notice: 'Member was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @member.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @member.destroy

    respond_to do |format|
      format.html { redirect_to team_members_url }
      format.json { head :no_content }
    end
  end

  # Allow empty checkboxes
  # http://railscasts.com/episodes/17-habtm-checkboxes
  def initialize_check_boxes 
    params[:member][:role_ids] ||= [] 
  end

end 
```

_形成部分

```
<%= form_for [@team, @member], :html => { :class => 'form-horizontal' } do |f| %>

  #...

  # testing the count...
    <ul>
    <li>Captain - <%= Team.find(@member.team_id).members.captain.size %></li>
    <li>Runner - <%= Team.find(@member.team_id).members.runner.size %></li>
    <li>Driver - <%= Team.find(@member.team_id).members.driver.size %></li>
    </ul>

    <div class="control-group">
      <div class="controls">
      <%= f.fields_for :roles do %>
      <%= hidden_field_tag "member[role_ids][]", nil %>
        <% Role.all.each do |role| %>
          <%= check_box_tag "member[role_ids][]", role.id, @member.role_ids.include?(role.id), id: dom_id(role) %>
          <%= label_tag dom_id(role), role.title %>
        <% end %>
      <% end %>
     </div> 
    </div>

  #...
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:25:23.373

尝试

```
class Member < ActiveRecord::Base
  ...

  def validate_runner_count
     if self.team.members.runner.count > 5
       errors.add(:role_id, 'Error - Max runner limit reached')
     end
  end

  def validate_captain_count
     if self.team.members.captain.count > 1
       errors.add(:role_id, 'Error - Max captain limit reached')
     end
  end
end 
```

# c++ - 向类添加新功能

> ID：13094229
> 
> 赞同：0
> 
> 时间：2012-10-26T20:49:02.147
> 
> 标签：c++, qt, class, overriding, derived-class

我正在研究 Qt4 库，我想为我项目中**的所有子项添加一些功能。`QWidget`**我需要`mousePressEvent`覆盖所有小部件。显然，我不需要在我使用的每个特定小部件中覆盖它（我使用**了许多**小部件，并且我遵循 DRY 规则），而是创建了一个`Foo`类：

```
class Foo : public QWidget
{
    Q_OBJECT
    protected:

        /* implementation is just a test */
        virtual void mousePressEvent(QMouseEvent*) { this->move(0,0);  }
}; 
```

并从中派生出我的按钮：

```
class FooButton : public QPushButton , public Foo
{

    public:
        FooButton (QWidget* parent) : QPushButton(parent) { };

}; 
```

但该事件似乎没有被覆盖......我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:00:14.053

对于 mousePressEvent 访问，尝试 QObject::installEventFilter()。

[http://doc.qt.digia.com/stable/qobject.html](http://doc.qt.digia.com/stable/qobject.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:53:34.570

您现在从 QWidget 继承了两次。这是有问题的（参见[钻石问题](http://www.programmerinterview.com/index.php/c-cplusplus/diamond-problem)）。

相反，删除您的`Foo`类并将您的自定义鼠标按下事件处理程序移动到您的`FooButton`类：

```
class FooButton : public QPushButton
{
    Q_OBJECT
protected:

    /* implementation is just a test */
    virtual void mousePressEvent(QMouseEvent*) { this->move(0,0);  }

public:
    FooButton (QWidget* parent) : QPushButton(parent) { };

}; 
```

如果这不适合您的应用程序的设计，请尝试使用虚拟继承。也就是改成`Foo`：

```
class Foo : public virtual QWidget 
```

如果这没有帮助，您应该遵循其他答案的建议并安装事件处理程序。

[（您可以在其Wikipedia 文章](http://en.wikipedia.org/wiki/Virtual_inheritance)中阅读有关虚拟继承的信息。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:01:40.690

我怀疑问题是你从`QWidget`两次继承，一次通过`QPushButton`，一次通过 Foo。

从你提出问题的方式来看，我假设你想对不同类型的小部件执行此操作，因此不希望将 QPushButton、QLabel、QCheckBox 等子类化。如果不是这种情况，那么你应该使用 Nikos 的答案。

如果没有，您最好的选择可能是使用[事件过滤器](http://qt-project.org/doc/qt-4.8/qobject.html#eventFilter)。

```
class MousePressFilter : public QObject {
Q_OBJECT
    public:
        MousePressFilter(QObject *parent) : QObject(parent) { }

    protected:
        bool eventFilter(QObject *watched, QEvent *event) {
            QWidget *widget = dynamic_cast<QWidget*>(watched);
            widget->move(0,0);
            return false;
        }
}; 
```

然后在你的 Foo 类构造函数中：

```
class Foo {
    Foo() {
        installEventFilter( new MousePressFilter(this) );
    }
}; 
```

# ruby-on-rails - bcrypt-ruby gem Gem::Installer::ExtensionBuildError:

> ID：13094232
> 
> 赞同：0
> 
> 时间：2012-10-26T20:49:09.543
> 
> 标签：ruby-on-rails, gem, bcrypt-ruby

再会。我正在尝试建立由其他人从事的项目。
当我运行`bundle install`它时崩溃并出现错误

```
Installing bcrypt-ruby (3.0.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:36:in `<main>'

Gem files will remain installed in /home/halfros/.bundler/tmp/9279/gems/bcrypt-ruby-3.0.1 for inspection.
Results logged to /home/halfros/.bundler/tmp/9279/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out
An error occurred while installing bcrypt-ruby (3.0.1), and Bundler cannot continue.
Make sure that `gem install bcrypt-ruby -v '3.0.1'` succeeds before bundling. 
```

**sudo gem install bcrypt-ruby -v '3.0.1'**

```
$ sudo gem install bcrypt-ruby -v '3.0.1'
Building native extensions.  This could take a while...
ERROR:  Error installing bcrypt-ruby:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:36:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/bcrypt-ruby-3.0.1 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out 
```

试过了 - 没有变化。
[http://rorguide.blogspot.com/2011/02/bundle-install-on-linux-giving-error.html](http://rorguide.blogspot.com/2011/02/bundle-install-on-linux-giving-error.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:33:10.337

看起来 ruby​​ 开发库没有安装。

看起来您正在使用全局 ruby​​/gems 安装，因此最简单的解决方法是安装`ruby1.9-dev`软件包（或类似的东西），然后再试一次。

或者，您可以使用 rvm，此问题将自行解决： [https ://rvm.io/](https://rvm.io/)

# css - Flex 百分比宽度不起作用

> ID：13094234
> 
> 赞同：0
> 
> 时间：2012-10-26T20:49:12.210
> 
> 标签：css, apache-flex, flex3

我有一个尺寸为 600 X 400 的 TitleWindow。这里有一堆 VBox，我想占据它们所在标题窗口宽度的 80% 左右。但他们似乎没有注册 percent-width 属性。这就是其中一个 VBox 的样子

```
 <mx:VBox  styleName="vboxes">
.vboxes
        {
            cornerRadius:4;
            border-style:solid;
            percent-width:80;
            padding-left:5px;
            padding-right:5px;
            padding-bottom:5px;
            padding-top:5px;
        } 
```

其他 CSS 属性，例如border-style 和corner-radius 似乎注册得很好，但是 percent-width 属性失败了。另一方面，在这种情况下，即使是宽度样式属性也会失败。

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:36:17.137

并非每个 Flex 属性都可以通过 CSS 获得。事实上，我想说的不是更多。据我所知，您不能通过 CSS 为任何组件设置组件的尺寸。您还为有效的属性名称使用了错误的属性名称。

请在[此处查看 VBox 样式的 Adob​​e LiveDocs 文档。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/containers/VBox.html#commonStyleSummary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:49:52.993

坏消息，宽度/高度，percentWidth/percentHeight 不是 CSS 属性，而是 Flex 3 中的属性。

好消息，Flex 支持自定义 CSS，这意味着您可以定义自己的样式。这意味着您需要覆盖`styleChanged`您的方法`VBox`，例如：

```
override public function styleChanged(styleProp:String):void
{
    super.styleChanged(styleProp);

    if (styleProp == "percentWidth")
    {
        var val:Number = getStyle("percentWidth") as Number;
        //set percent width logic goes here
    }
} 
```

# ruby - Ruby 中的#tap 方法危险吗？

> ID：13094237
> 
> 赞同：3
> 
> 时间：2012-10-26T20:49:26.880
> 
> 标签：ruby, piping

方法如何`tap`并发工作？如果我这样做，我是否必须害怕：

```
some_object.tap { |o|
  # time-consuming operation 1
}.tap { |o|
  # time-consuming operation 2
} 
```

那，在现在或将来，Ruby 会尝试同时执行这些操作吗？你知道，`#tap`听起来很危险。

是否保证`#tap`块按顺序执行（当然，除非在块内做了一些不寻常的事情）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T20:55:50.787

Tap 不会同时执行该块，而是按顺序执行。所以你不必担心并发问题，因为不存在并发问题。

这里的来源`tap`：

```
VALUE
rb_obj_tap(VALUE obj)
{
    rb_yield(obj);
    return obj;
} 
```

所以你可以看到它首先调用了块（`yield`），然后才返回原始对象。不存在并发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T20:55:20.860

你没有什么可担心的。

Ruby 执行将是顺序的，除非您明确地使其并行（例如创建线程）。

# php - mysql从2个表中选择一个值

> ID：13094239
> 
> 赞同：0
> 
> 时间：2012-10-26T20:49:27.527
> 
> 标签：php, mysql, sql

我有 2 张桌子：

```
users

user_id | user_name  | user_avatar 
```

和

```
events

event_id | event_name | event_avatar 
```

我需要一个查询，它将选择一个数组中的所有头像，然后，我想将它们全部回显，作为照片库。

谁能帮帮我？

我试过了

```
SELECT e.event_avatar , u.user_avatar as img FROM events e ,users u ORDER BY e.id DESC LIMIT 0, 17" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:52:31.163

对于 SQL 位，您似乎想要一个联合：

```
Select
  event_avatar
From
  events
Union All
Select
  user_avatar
From
  users 
```

# python - 在Python中，装饰两个同名的方法来区分它们

> ID：13094242
> 
> 赞同：2
> 
> 时间：2012-10-26T20:50:08.660
> 
> 标签：python, decorator, metaclass

我正在编写一个框架，供了解一些 Python 的人使用。我已经确定了一些语法，对我和他们来说使用这样的东西是有意义的，其中 Base 是实现框架的 Base 类。

```
class A(Base):
    @decorator1
    @decorator2
    @decorator3
    def f(self):
        pass

    @decorator4
    def f(self):
        pass

    @decorator5
    def g(self)
        pass 
```

我所有的框架都是通过 Base 的元类实现的。此设置适合我的用例，因为所有这些用户定义的类都有丰富的继承图。我希望用户实现一些方法，或者只是将其保留为`pass`. 用户在这里提供的大部分信息都在装饰器中。这使我可以避免其他解决方案，用户必须进行猴子补丁，提供结构较少的字典，以及类似的事情。

我的问题是`f`用户定义了两次（有充分的理由），这应该由我的框架处理。不幸的是，当它到达元类的`__new__`方法时，属性字典只包含一个 key `f`。我的想法是使用另一个装饰器，例如`@duplicate`让用户表示正在发生这种情况，并且两者`f`的包装方式不同，因此它们不会相互覆盖。像这样的东西可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:54:18.970

您应该使用命名空间来区分不同`f`的 s。

听从“Python 之禅”的建议：

> 命名空间是一个很棒的想法——让我们做更多的事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:54:46.003

是的，您可以，但只能使用丑陋的 hack，并且只能使用*新*名称存储函数。

您必须使用该[`sys._getframe()`函数](http://docs.python.org/library/sys.html#sys._getframe)来检索调用框架的本地命名空间。该本地命名空间是构造中的类，将项目添加到该命名空间意味着它们最终将出现在传递给您的元类的类字典中。

以下检索该命名空间：

```
callframe = sys._getframe(1)
namespace = callframe.f_locals 
```

`namespace`是一个类似字典的对象，就像`locals()`. 您现在可以在该命名空间（类似或类似）中存储*一些*`__function_definitions__`内容，以添加对函数的额外引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:54:51.600

你可能在想 Java——方法重载和参数签名——但这是 Python，你不能这样做。第二个 f() 将覆盖第一个 f()，最后你只得到一个 f()。命名空间是一个字典，你不能有重复的键。

# delphi - TCPServer 上的 Indy10 死锁

> ID：13094245
> 
> 赞同：1
> 
> 时间：2012-10-26T20:50:32.897
> 
> 标签：delphi, indy

要将有关处理状态的信息写入 tcpserver.onexecute(..) 函数内的 GUI，我使用了以下命令序列

```
ExecuteDUMMYCommand(Global_Send_Record);

BitMap_PaintImageProcess;

TThread.Synchronize(nil, BitMap_PaintImageProcess); 
```

该代码在某些机器上运行良好，但在少数机器上却失败了。代码执行在 TThread.Synchronize 命令处停止。我猜在这些机器上，函数调用被困在死锁中 有机会找出背后的真正问题吗？

程序 BitMap_PaintImageProcess ，在这里我创建了一个 Bitmap 并做了很多绘画的东西，但似乎这段代码从未执行过？

* * *

我试图解释很长的代码并简化为要点，关键的线程问题隐藏在处理我的 Bitmapprocessingclass 中的位图中。这个类是在我的 ServerMainForm 的 GUIProcessing 过程中访问的，它也有 INDY TCP Server 组件。

```
 {---------------   CLASS DEFINITION   -----------------------------}

   TBitMapProcessingClass = class()
        FBitmap : TBitmap;
        FList : TListOfSomething;

        procedure ProcessTheBitmap(....);
        ......   
        (many many functions);
        procedure Init;
        procedure Free;
        Procedure Create;
   end;

   TMainform = class(TForm)

      MyServer : TIdTCPServer;
      aBitMaoProcessingClass : TBitMaoProcessingClass;
      procedure BitMap_PaintImageProcess;
      procedure BitMap_ListProcess;

      .....
      end;       

{-------------------------   Implemantation ------------------------------}

procedure TMainform.IndyTCPServer.Onexecute()
begin

   .......

   ExecuteDUMMYCommand(Global_Send_Record);

   BitMap_PaintImageProcess;

   TThread.Synchronize(nil, BitMap_PaintImageProcess);

   .......

end;

procedure TMainform.BitMap_PaintImageProcess;
   begin

      DoSomeServerVCLStuff(....);

      aBitMapProcessingClass.ProcessTheBitmap;

      DoSomeServerVCLStuff(....);

  end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T10:30:25.413

关于发布的代码：

```
procedure TMainform.IndyTCPServer.Onexecute()
begin
   .......
   ExecuteDUMMYCommand(Global_Send_Record);
   BitMap_PaintImageProcess; //-> You do VCL stuff in the context of Indy's thread!
   TThread.Synchronize(nil, BitMap_PaintImageProcess);
end; 
```

在`BitMap_PaintImageProcess()`你打电话`DoSomeServerVCLStuff(....)`。不要忘记 OnExecute 是从 Indy 的线程针对当前上下文触发的。即你从另一个不是线程安全的线程（其他来自主线程）修改 VCL。

关于你的评论：

> ...但是在这里，我的复杂 TBitmap 处理类必须在我的服务器处于活动状态的整个过程中都处于活动状态...

如果您只有一个（全局）实例用于图像处理，那么如果另一个客户端连接，而您仍在处理旧连接（想想 Parallel :)）会发生什么？您的图像处理类应该为每个新的连接/上下文单独实例化。对于 GUI 更新，您可以使用 TIdNotify 后代。

一个可能的解决方案：

```
type 
{ tIdNotify Stuff }
TVclProc= procedure(imgClass: tMyImageProcessingClass) of object;

tIdNotifyDescendant = (tIdNotify)
  protected
    fImgClass: tMyImageProcessingClass;
    fProc: TVclProc;
    procedure DoNotify; override;
  public
    class procedure updateVcl(imgClass: tMyImageProcessingClass; vclProc: TVclProc);
end;

procedure tIdNotifyDescendant.DoNotify;
begin
 inherited DoNotify;
 FProc(fImgClass);
end;

class procedure tIdNotifyDescendant.updateVcl(imgClass: tMyImageProcessingClass; vclProc: TVclProc);
begin
 with Create do
 begin
   fImgClass := imgClass;
   fProc := vclProc;
   Notify;
 end;
end;

{ Indy stuff & other logic }

procedure TForm1.IdTCPServer1Connect(AContext: TIdContext);
begin
  //  Create your instance when the client connects
  AContext.Data := tMyImageProcessingClass.Create;
end;

procedure TForm1.IdTCPServer1Disconnect(AContext: TIdContext);
begin
  //  Do cleanup
  if assinged(AContext.Data) then
    (AContext.Data as tMyImageProcessingClass).Free // Casting just for clarity
end;

procedure TForm1.IdTCPServer1Execute(AContext: TIdContext);
var
  imgProcClass: tMyImageProcessingClass;
begin
  imgProcClass := acontext.Data as tMyImageProcessingClass;
  //  Do image processing
  //  Notify GUI for the progress:
  tIdNotifyDescendant.updateVcl(AContext.data as tMyImageProcessingClass);
end; 
```

提示：如果您进行 JPEG 处理并使用 Draw() 方法，请记住：[TJPEGImage.Draw() 不是线程安全的](http://qc.embarcadero.com/wc/qcmain.aspx?d=55871)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:49:18.073

不知道 BitMap_PaintImageProcess() 实际上做了什么，我有几个假设：

*   在 TThread.Synchronize 调用中，您尝试从 socket/idContext 读取一些数据，但数据尚不可用。这将阻塞主线程，直到数据可用。但是负责从底层套接字缓冲区读取的 Indy 线程当前被 OnExecute 事件中的 TThread.Synchronize 调用阻塞，即发生死锁；
*   在 TThread.Synchronize 调用中，您使用 Application.ProcessMessages （一个常见错误）；
*   在 OnExecute 事件中，您输入一个临界区。然后在 TThread.Synchronize 调用期间，您尝试再次进入相同的临界区；
*   在 onExecute 事件中修改 GUI。因为 onExecute 不是线程安全的，从 Indy 的线程访问 VCL/FM 可能会导致不可预知的结果，包括随机死锁（很难找到）。

我建议使用 MadExcept / Eurekalog。他们都有检查主线程是否“冻结”的选项。当这种情况发生时（在死锁期间），它们会向您显示当前的调用堆栈。有了调用堆栈，您就可以找出导致死锁的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T10:19:17.860

我在我的 BitmapProcessingclass 和现有类的线程安全扩展的想法上添加了更多细节......我需要在其他应用程序中未更改的现有类......我需要在我的应用程序中使用 indy 服务器进行扩展。只有一个客户端连接到一台服务器，或者他必须查询服务器的状态

```
 type TBmpNotify = class(TIdNotify)
   protected
     FBMP: MyImageProcessingClass;

     procedure DoNotify; override;
   public
     constructor Create(aBMP: MyImageProcessingClass);
       function SetImageView(LL, UR: TPoint): Boolean;
              procedure PaintBitMap;
      function InitBitMap(x, y: Integer;
         PixelFormat: TPixelFormat = pf24bit): Boolean;
      destructor free;
   end;

   implementation

   { TBmpNotify }

   constructor TBmpNotify.Create(aBMP: MyImageProcessingClass);
   begin
       //   indise this class  I also create
       //   class.TBitmap
       //   class.TList
       //   much more stuff ....
       FBmp := MyImageProcessingClass.Create;
   end;

   procedure TBmpNotify.DoNotify;
   begin
     inherited;

   end;

   destructor TBmpNotify.free;
   begin

       FBmp.Free;

       inherited;
   end;

   function TBmpNotify.InitBitMap(x, y: Integer;
     PixelFormat: TPixelFormat): Boolean;
   begin
       //   Write values to the List
       //   also modify TBitmap
       //   execution time of this function ~ 5 min
       FBmp.InitBitMap(x,y,PixelFormat)
   end;

   procedure TBmpNotify.PaintBitMap;
   begin
       //   much TBitmap, bitmap.canvas .... is used
       //   execution time of this function ~ 1  min
      FBmp.PaintBitMap;
   end;

   function TBmpNotify.SetImageView(LL, UR: TPoint): Boolean;
   begin
      //  this function takes about 1 min
      FBmp.SetImageView(LL, UR);
   end;

   end. 
```

# bash - 如何获得重音字母以实际在 bash 上工作？

> ID：13094248
> 
> 赞同：32
> 
> 时间：2012-10-26T20:51:14.827
> 
> 标签：bash, cygwin, non-ascii-characters

我在 cygwin 上的 bash 安装不能正确处理重音字母。我尝试添加

```
set input-meta on    # to accept 8-bit characters
set output-meta on   # to show 8-bit characters
set convert-meta on  # to show it as character, not the octal representation 
```

到我的输入 rc，但这还不能正常工作。确实，如果我输入

```
$ echo ù 
```

然后在我按回车之前它会自动更改为

```
$ echo \303 
```

虽然输出是正确的，但我得到了

```
$ echo \303
ù 
```

对于任何其他重音字母，我得到相同的结果。通常虽然我使用非意大利语键盘，并且我`autohotkey`习惯用带重音字母的撇号替换字母。在这种情况下，重音字母被替换为 a `\302`，并且它们根据字母打印垃圾：为 a 打印 a `3y`，`ù`为`¢`an打印 a ，`ò`其他任何内容都没有。

我怎样才能让这一切变得有意义？

编辑：我的语言环境设置、cygwin 版本和终端如下

```
$ uname -a
CYGWIN_NT-6.1-WOW64 ferdi-Asus 1.7.17(0.262/5/3) 2012-10-19 14:39 i686 Cygwin
$ locale
LANG=it_IT.UTF-8
LC_CTYPE="it_IT.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="it_IT.UTF-8"
LC_COLLATE="it_IT.UTF-8"
LC_MONETARY="it_IT.UTF-8"
LC_MESSAGES="it_IT.UTF-8"
LC_ALL=
$ tty
/dev/pty1 
```

我只需单击 Cygwin 终端链接即可调用它。它重定向到

```
C:\cygwin\bin\mintty.exe -i /Cygwin-Terminal.ico - 
```

autohotkey 脚本的相关部分如下

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.
...
::avra'::avrà
::avro'::avrò
... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T14:08:09.030

`Cygwin`要通过使用在 bash 上获得重音字母，`Mintty 1.1.2`只需执行以下操作：

1.  转到**菜单**（如果您没有看到任何菜单，请右键单击终端）。
2.  单击**选项**...。
3.  单击**文本**。
4.  **将语言环境**更改为`C`.
5.  **将字符集**更改为`ISO-8859-1 (Western European)`。

![在 Mintty 1.1.2 中更改语言环境和字符集](../Images/dd80ec02c0960c3467a10d9383b6f2bc.png)

然后测试它：

![在 Mintty 1.1.2 中回显重音字母](../Images/687da55f75c499102d0fa6cc89201309.png)

# vb.net - Visual Basic 中的“System.*”文件？

> ID：13094249
> 
> 赞同：0
> 
> 时间：2012-10-26T20:51:16.997
> 
> 标签：vb.net

这些文件是如何排列的，我在哪里可以找到有关它们的更多信息？

这是我正在使用的 Visual Studio 的最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:54:05.987

不同的系统程序集存在于[全局程序集缓存](http://en.wikipedia.org/wiki/Global_Assembly_Cache)(GAC) 中。

您通常不需要直接访问这些文件 - 请参阅如何：使用MSDN 上[的添加引用对话框添加或删除引用。](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)

GAC 中的程序集将出现在对话框的 .NET 选项卡上。

要在类中直接使用命名空间（因此您不需要完全限定它），请使用[`Imports`语句](http://msdn.microsoft.com/en-us/library/7f38zh8x.aspx).

# php - Swiftmailer 使用 setReturnPath

> ID：13094250
> 
> 赞同：0
> 
> 时间：2012-10-26T20:51:19.900
> 
> 标签：php, smtp, html-email, swiftmailer

我可以使用下面的代码成功地通过 Amazon SES 发送电子邮件，但我正在尝试设置返回路径，但它不起作用。当我使用 ->setReturnPath('bounce@example.com') 时，电子邮件根本不会发送。任何人都可以解释为什么，或者知道如何让它工作吗？任何帮助都会很棒！

这是最新的 swiftmailer (4.2.2)

```
require_once 'lib/swift_required.php';
require_once 'classes/Swift/Transport/AWSTransport.php';
require_once 'classes/Swift/AWSTransport.php';
require_once 'classes/Swift/AWSInputByteStream.php';

define( 'AWSAccessKeyId', 'XXXXX' );
define( 'AWSSecretKey', 'XXXXX' );

//Create the Transport
$transport = Swift_AWSTransport::newInstance( AWSAccessKeyId, AWSSecretKey );
$transport->setDebug( true ); // Print's the response from AWS for debugging.

//Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance( $transport );

//Create the message
$message = Swift_Message::newInstance()
->setSubject( 'Sample Subject' )
->setFrom( array( 'test@example.com' ) )
->setTo( array( 'to@someone.com' ) )
->setBody( $message_body, 'text/html' )
->addPart( "Please use a HTML compatible web browser to view this email.", 'text/plain' );

$mailer->send( $message ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-12T15:33:10.497

你可以使用这个 Swiftmailer 函数：

```
$message = Swift_Message::newInstance();
$headers = $message->getHeaders();
$headers->addPathHeader('Your-Header-Name', 'person@example.org'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:35:14.097

我刚刚用类似的代码尝试过它，它确实有效。swiftmailer 现在升级到 4.3.0 版，所以它可能会在其中修复。否则，我的代码中唯一的区别是我没有您拥有的 addPart() 。

另外，您检查过您的 php 错误日志吗？:-)

# android - 有没有办法在运行时将布局添加到 Android 应用程序？

> ID：13094251
> 
> 赞同：2
> 
> 时间：2012-10-26T20:51:21.373
> 
> 标签：android, android-layout

我想创建一个应用程序，我可以随着时间的推移向其中添加布局。例如，该应用程序附带一组已知的布局，但可以下载新的主题包，而无需分发新的 apk。我不希望这些存储在布局目录中——只要我有办法加载它们，它们就可以存储在应用程序可以访问的任何地方。

如果我要将它们与 LayoutInflator 一起使用，看起来需要将布局编译成二进制形式。那么有没有办法在分发之前编译它们？我真的宁愿不必为这些编写解释器，因为我确信它会慢一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:00:57.517

这个布局文件通过 LayoutInflater 在另一个布局中。

假设，您想在主布局中添加此布局。因此，通过 mainlayout.add(view) 在主布局中采用线性布局和主布局中的列表布局，这里的视图是 LayoutInflater viw。

例子 ：

```
private View view;
    view = getLayoutInflater().inflate(R.layout.image_sub_layout,null);
     topicLinearLayout.addView(view); // main Layout Linear layout 
```

谢谢。

# html - 在图像元素中显示 .ico

> ID：13094257
> 
> 赞同：21
> 
> 时间：2012-10-26T20:52:11.283
> 
> 标签：html, image, internet-explorer, ico

我正在尝试在图像元素中显示 .ico，`<img>`但在 Internet Explorer 中它不起作用/显示。这是我的代码：

```
<img src="images.ico" > 
```

有人如何让它出现在所有浏览器中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T20:59:23.297

在 img 标签中显示 ico 文件并不能保证在所有浏览器中都有效（我不推荐它）。如果要在 Web 上显示 ico 文件，请将其转换为另一种格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-09T01:52:27.690

You can always put the base64 representation of an icon in the `src` attribute. It will look like this:

```
<img src="data:image/x-icon;base64,..."> 
```

where `...` will be the base64 representation.

If you need a tool for conversion from icon to base64, you can use [Base64.Guru encoder](https://base64.guru/converter/encode/image/ico) for example.

Here is the snippet with [Google favicon](https://www.google.com/favicon.ico) encoded in the base64 representation:

```
<img src="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///zD9/f2W/f392P39/fn9/f35/f391/39/ZT+/v4uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/v7+Cf39/Zn///////////////////////////////////////////39/ZX///8IAAAAAAAAAAAAAAAA/v7+Cf39/cH/////+v35/7TZp/92ul3/WKs6/1iqOv9yuFn/rNWd//j79v///////f39v////wgAAAAAAAAAAP39/Zn/////7PXp/3G3WP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP+Or1j//vDo///////9/f2VAAAAAP///zD/////+vz5/3G3V/9TqDT/WKo6/6LQkf/U6cz/1urO/6rUm/+Zo0r/8IZB//adZ////v7///////7+/i79/f2Y/////4nWzf9Lqkj/Vqo4/9Xqzv///////////////////////ebY//SHRv/0hUL//NjD///////9/f2U/f392v////8sxPH/Ebzt/43RsP/////////////////////////////////4roL/9IVC//i1jf///////f391/39/fr/////Cr37/wW8+/+16/7/////////////////9IVC//SFQv/0hUL/9IVC//SFQv/3pnX///////39/fn9/f36/////wu++/8FvPv/tuz+//////////////////SFQv/0hUL/9IVC//SFQv/0hUL/96p7///////9/f35/f392/////81yfz/CrL5/2uk9v///////////////////////////////////////////////////////f392P39/Zn/////ks/7/zdS7P84Rur/0NT6///////////////////////9/f////////////////////////39/Zb+/v4y//////n5/v9WYu3/NUPq/ztJ6/+VnPT/z9L6/9HU+v+WnfT/Ul7t/+Hj/P////////////////////8wAAAAAP39/Z3/////6Or9/1hj7v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v9sdvD////////////9/f2YAAAAAAAAAAD///8K/f39w//////5+f7/paz2/11p7v88Suv/Okfq/1pm7v+iqfX/+fn+///////9/f3B/v7+CQAAAAAAAAAAAAAAAP///wr9/f2d///////////////////////////////////////////9/f2Z/v7+CQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/jL9/f2Z/f392/39/fr9/f36/f392v39/Zj///8wAAAAAAAAAAAAAAAAAAAAAPAPAADAAwAAgAEAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAACAAQAAwAMAAPAPAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/g3+/v5X/f39mf39/cj9/f3q/f39+f39/fn9/f3q/f39yP39/Zn+/v5W////DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/iT9/f2c/f399f/////////////////////////////////////////////////////9/f31/f39mv7+/iMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/gn9/f2K/f39+////////////////////////////////////////////////////////////////////////////f39+v39/Yf///8IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+/v4k/f390v////////////////////////////////////////////////////////////////////////////////////////////////39/dD///8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////MP39/er//////////////////////////+r05v+v16H/gsBs/2WxSf9Wqjj/Vqk3/2OwRv99vWX/pdKV/97u2P////////////////////////////39/ej+/v4vAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/iT9/f3q/////////////////////+v15/+Pxnv/VKk2/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/36+Z//d7tf///////////////////////39/ej///8iAAAAAAAAAAAAAAAAAAAAAAAAAAD///8K/f390//////////////////////E4bn/XKw+/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1apN/+x0pv///////////////////////39/dD///8IAAAAAAAAAAAAAAAAAAAAAP39/Yv/////////////////////sdij/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9TqDT/YKU1/8qOPv/5wZ////////////////////////39/YcAAAAAAAAAAAAAAAD+/v4l/f39+////////////////8Lgt/9TqDT/U6g0/1OoNP9TqDT/U6g0/1OoNP9utlT/n86N/7faqv+426v/pdKV/3u8ZP9UqDX/U6g0/3egN//jiUH/9IVC//SFQv/82MP//////////////////f39+v7+/iMAAAAAAAAAAP39/Z3////////////////q9Ob/W6w+/1OoNP9TqDT/U6g0/1OoNP9nskz/zOXC/////////////////////////////////+Dv2v+osWP/8YVC//SFQv/0hUL/9IVC//WQVP/++fb//////////////////f39mgAAAAD+/v4O/f399v///////////////4LHj/9TqDT/U6g0/1OoNP9TqDT/dblc//L58P/////////////////////////////////////////////8+v/3p3f/9IVC//SFQv/0hUL/9IVC//rIqf/////////////////9/f31////DP7+/ln////////////////f9v7/Cbz2/zOwhv9TqDT/U6g0/2KwRv/v9+z///////////////////////////////////////////////////////738//1kFT/9IVC//SFQv/0hUL/9plg///////////////////////+/v5W/f39nP///////////////4jf/f8FvPv/Bbz7/yG1s/9QqDz/vN2w//////////////////////////////////////////////////////////////////rHqP/0hUL/9IVC//SFQv/0hUL//vDn//////////////////39/Zn9/f3L////////////////R878/wW8+/8FvPv/Bbz7/y7C5P/7/fr//////////////////////////////////////////////////////////////////ere//SFQv/0hUL/9IVC//SFQv/718H//////////////////f39yP39/ez///////////////8cwvv/Bbz7/wW8+/8FvPv/WNL8///////////////////////////////////////0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//rIqv/////////////////9/f3q/f39+v///////////////we9+/8FvPv/Bbz7/wW8+/993P3///////////////////////////////////////SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/+cGf//////////////////39/fn9/f36////////////////B737/wW8+/8FvPv/Bbz7/33c/f//////////////////////////////////////9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/6xaX//////////////////f39+f39/e3///////////////8cwvv/Bbz7/wW8+/8FvPv/WdP8///////////////////////////////////////0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//vVv//////////////////9/f3q/f39y////////////////0bN/P8FvPv/Bbz7/wW8+/8hrvn/+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////39/cj9/f2c////////////////ht/9/wW8+/8FvPv/FZP1/zRJ6/+zuPf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////f39mf7+/lr////////////////d9v7/B7n7/yB38f81Q+r/NUPq/0hV7P/u8P3////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v5X////D/39/ff///////////////9tkPT/NUPq/zVD6v81Q+r/NUPq/2Fs7//y8v7////////////////////////////////////////////09f7//////////////////////////////////////////////////f399f7+/g0AAAAA/f39n////////////////+Tm/P89Suv/NUPq/zVD6v81Q+r/NUPq/1Bc7f/IzPn/////////////////////////////////x8v5/0xY7P+MlPP////////////////////////////////////////////9/f2cAAAAAAAAAAD+/v4n/f39/P///////////////7W69/81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v9ZZe7/k5v0/6609/+vtff/lJv0/1pm7v81Q+r/NUPq/zVD6v+GjvL//v7//////////////////////////////f39+/7+/iQAAAAAAAAAAAAAAAD9/f2N/////////////////////6Cn9f81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v+BivL////////////////////////////9/f2KAAAAAAAAAAAAAAAAAAAAAP7+/gv9/f3V/////////////////////7W69/8+S+v/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/P0zr/7q/+P///////////////////////f390v7+/gkAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/ib9/f3r/////////////////////+Xn/P94gfH/NkTq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NUPq/zVD6v81Q+r/NkTq/3Z/8f/l5/z///////////////////////39/er+/v4kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/jL9/f3r///////////////////////////k5vz/nqX1/2p08P9IVez/OEbq/zdF6v9GU+z/aHLv/5qh9f/i5Pz////////////////////////////9/f3q////MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/ib9/f3V/////////////////////////////////////////////////////////////////////////////////////////////////f390v7+/iQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wr9/f2N/f39/P///////////////////////////////////////////////////////////////////////////f39+/39/Yv+/v4JAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+/v4n/f39n/39/ff//////////////////////////////////////////////////////f399v39/Z3+/v4lAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/v7+Dv7+/lr9/f2c/f39y/39/e39/f36/f39+v39/ez9/f3L/f39nP7+/ln+/v4OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/AA///AAD//AAAP/gAAB/wAAAP4AAAB8AAAAPAAAADgAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAABgAAAAcAAAAPAAAAD4AAAB/AAAA/4AAAf/AAAP/8AAP//wAP/">
```

If you ever need to convert an image to base64 by yourself using JavaScript, here are some good examples how to do it: [How to convert image into base64 string using javascript](https://stackoverflow.com/a/20285053/11559570).

# php - PHP / MySQL 论坛发帖顺序

> ID：13094263
> 
> 赞同：-1
> 
> 时间：2012-10-26T20:52:39.193
> 
> 标签：php, mysql, forum

我有一张桌子叫`cf_posts`

```
ID pk
user INT
subject VARCHAR
body TEXT
datetime TIMESTAMP
parent INT
category INT
mod INT 
```

当帖子提交到论坛时，默认父级为 0，当帖子作为回复提交时，其父级为原始帖子的 ID。

我怎样才能使论坛主页的默认视图排序为最近更新的帖子（包括最新回复）将位于堆的“顶部”，并按日期顺序工作？PHP/MySQL 查询是什么？

我看到的唯一解决方法是单独的主题和回复表，但如果可能的话，我想远离这种方法。

我尝试过但失败的一种解决方法是 GROUP BY parent。但这将所有没有回复的主题组合在一起。

我还没有尝试过的另一个想法是使原始帖子的父 ID 与帖子 ID 匹配，而不是在输出中包含匹配的 ID 和父 ID。

我期待听到你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:01:53.083

```
SELECT mainPost.subject, lastPost.datetime
FROM cf_posts cfp, 
(
 SELECT * 
 FROM cf_posts subPost
 WHERE subPost.parent = mainPost
 ORDER BY subPost.datetime DESC
 LIMIT 1
)lastPost
WHERE mainPost.parent IS NULL 
```

这是简要完成的，因此可能存在一些语法问题，但我认为这应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:06:46.610

您可以执行以下操作：查询您需要的每个单独的事物，因此可能对每个主题进行查询，然后您可以使用 UNION 将所有这些内容捆绑在一起以获得一个列表。现在保留订单的技巧如下。对于每个单独的查询，在返回的结果中附加一个名为 sort 的列，并将该列的每个实例设置为更高的 int 值，然后您可以保证最终结果正确排序。去查看 UNION 的 select 语句，以更好地理解我在说什么。

# blogger - 在博客上实现 Facepile 应用程序

> ID：13094264
> 
> 赞同：1
> 
> 时间：2012-10-26T20:52:48.663
> 
> 标签：blogger, facebook-social-plugins

我试图在我的博客上实现 Facepile 应用程序。但它不起作用！

使用的代码是：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=MY-APP-ID";
fjs.parentNode.insertBefore(js, fjs);`enter code here`
}(document, 'script', 'facebook-jssdk'));</script> 
```

和

```
<div class="fb-facepile" data-href="http://schooloffour.blogspot.in/" data-action="&lt;fb:facepile href=&quot;http://zhen.myfbse.com/rb-roastchicken.html&quot;  action=&quot;og_recipebox:planning_to_make&quot; width=&quot;300&quot; max_rows=&quot;1&quot;&gt;&lt;/fb:facepile&gt;" data-max-rows="1" data-width="300"></div> 
```

之后立即添加了面罩：`<data:post.body/>`

保存模板代码时显示的错误是：**解析 XML 时出错，第 634 行，第 62 列：对实体“appId”的引用必须以“;”结尾 分隔符。**

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:16:56.647

data-action 属性的值是错误的。facepile的正常格式是

```
<div class="fb-facepile" data-href="www.imdb.com/title/tt0117500/" data-action="video.watches" data-max-rows="1" data-width="300"></div> 
```

使用这个[http://developers.facebook.com/docs/reference/plugins/facepile/](http://developers.facebook.com/docs/reference/plugins/facepile/)来获得 100% 运行的代码。填写网址和操作，然后单击“获取代码”按钮。它以 HTML5、XFBML、IFRAME 或 URL 编写代码。选择你喜欢的任何人。

# asp.net - 单站多库，数据库切换

> ID：13094265
> 
> 赞同：3
> 
> 时间：2012-10-26T20:52:54.957
> 
> 标签：asp.net, entity-framework

我为我公司的产品数据库创建了一个内容管理系统 (CMS)。CMS 基于 asp.net 脚手架，混合了许多自定义页面和操作。我们目前有 7 种产品，所有产品都共享相同的数据库架构（实体框架模型优先），并且都在 CMS 中完美运行。问题是每次我们获得新产品时，我们必须克隆 CMS 并更改连接字符串`app.config`以指向正确的数据库，以便使用新数据库。虽然这很有效，但维护起来变得很麻烦，并且随着我们获得更多产品，我们将彻底失败。

我想做的是有一个集中的登陆页面，用户被引导登录，然后根据他们的选择提供连接和编辑特定产品的选项。我们的想法是，我们将拥有一个 CMS 站点，该站点能够根据用户在数据库之间切换。将所有产品数据库组合到单个主产品数据库中不是一种选择。

我不知道从哪里开始实现这个目标，或者这是否是实现我要维护一个 CMS 的目标的正确计划，我正在寻找一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:32:20.150

假设您的数据库结构相同，您可以在获得实体上下文实例的任何地方使用工厂方法，并将逻辑放入其中以获取正确的连接字符串（或者如果您可以使用命名约定，则计算它）。例如，这样的事情可能会起作用：

```
 public static MyDatabaseEntities CreateEntityContext(string productName)
    {
        string connectionString = null;
        switch (productName.Trim().ToLower())
        {
            case "apples":
                connectionString = ConfigurationManager.ConnectionStrings["MyDatabase_Apples"].ConnectionString;
                break;
            case "pears":
                connectionString = ConfigurationManager.ConnectionStrings["MyDatabase_Pears"].ConnectionString;
                break;
            default:
                connectionString = ConfigurationManager.ConnectionStrings["MyDatabase"].ConnectionString;
                break;
        }
        return new MyDatabaseEntities(connectionString);
    } 
```

然后在需要传递您在登录页面上计算的产品名称的 CRM 数据上下文实例的任何地方使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:10:48.583

为用户到数据库的映射创建另一个数据库。结构将是这样的：

```
database UserMap 

    table Users
       username (composite primary key)
       dbID (composite primary key, foreign key to "Databases" table)

    table Databases
       dbID (primary key)
       connectionString 
```

然后，

1.  填充表“数据库”中的数据库列表
2.  执行 SQL 工作以将其他网站的用户复制到此“UserMap”数据库​​中
3.  在每个 CMS 数据库中编写一个触发器，以在用户在各自的 CMS 中创建或删除时添加或删除用户，以便更新“UserMap”数据库
4.  修改 CMS 上的代码以使用这个单一数据库来查找应使用的连接字符串。

这将允许您依赖单个数据库进行查找，并以托管方式在它们之间切换。它需要一些前期工作，但在触发器出现后，您无需再做任何事情。

# html - @font-face css 不工作

> ID：13094270
> 
> 赞同：1
> 
> 时间：2012-10-26T20:53:05.833
> 
> 标签：html, css, font-face

我在使用@font-face 声明时遇到了问题，我希望有人能告诉我问题出在哪里。

这是我的@font-face CSS：

```
@font-face {
font-family: 'MuseoSlab500';
src: url('fonts/Museo_Slab_500-webfont.eot');
src: url('fonts/Museo_Slab_500-webfont.eot?iefix') format('eot'),
     url('fonts/Museo_Slab_500-webfont.woff') format('woff'),
     url('fonts/Museo_Slab_500-webfont.ttf') format('truetype'),
     url('fonts/Museo_Slab_500-webfont.svg#webfontyumMOUTD') format('svg');
font-weight: normal;
font-style: normal; 
```

我的字体文件都在我网站根目录下的一个名为“fonts”的文件夹中。样式表和 html 文件（它是一个单页站点）位于根目录中。我正在查看@font-face，它看起来与我之前的声明没有什么不同，但由于某种原因，这个声明不起作用。谁能告诉我这是为什么？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:04:09.323

我总是将我的网络字体文件夹放在我的 CSS 文件夹中，如下所示：

```
@font-face{ 
    font-family: 'CartoGothicStd-Bold';
    src: url('@font-face/CartoStd-Bold.eot');
    src: url('@font-face/CartoStd-Bold.eot?#iefix') format('embedded-opentype'),
         url('@font-face/CartoStd-Bold.woff') format('woff'),
         url('@font-face/CartoStd-Bold.ttf') format('truetype'),
         url('@font-face/CartoStd-Bold.svg#webfont') format('svg');
} 
```

我的文件夹名为@font-face。试一试......看看你的字体是否正常工作。

我刚刚注意到你不见了`}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T10:49:04.327

尝试使用 .otf 文件而不是 .ttf

我也遇到过这个问题。我通过替换为 .otf 文件使其工作。

# hibernate - 具有数据库生成时间戳的休眠复合键

> ID：13094272
> 
> 赞同：1
> 
> 时间：2012-10-26T20:53:21.043
> 
> 标签：hibernate

我在使用 Hibernate 3.3 和注释保存具有复合主键的对象时遇到问题。

我的密钥由用户的唯一 ID 和数据库生成时间戳组成。

如何使用注释映射此键？我使用了一些逆向工程工具，但是当我尝试保存实体时遇到了问题。

例子：

```
@Entity
@Table(name = "ACTIVITY_LOG", schema = "WEB")
public class ActivityLog implements java.io.Serializable {

    // Fields

    private ActivityLogId id;
    private SearchAuditRecord searchAuditRecord;

    // Constructors

         .....

    // Property accessors
    @EmbeddedId
    @AttributeOverrides({
        @AttributeOverride(name = "identifier", column = @Column(name = "IDENTIFIER", nullable = false, length = 11)),
        @AttributeOverride(name = "createTimestamp", column = @Column(name = "CREATE_TIMESTAMP", insertable=false, updatable=false, nullable = false, length = 26)) })
    public ActivityLogId getId() {
    return this.id;
    }

    public void setId(ActivityLogId id) {
    this.id = id;
    }

    .....

}

@Embeddable
public class ActivityLogId implements java.io.Serializable {

    // Fields

    private String identifier;
    private Date createTimestamp;

    // Constructors

    /** default constructor */
public ActivityLogId() {
    }

    /** full constructor */
    public ActivityLogId(String hrmisIdentifier, Date createTimestamp) {
    this.identifier = identifier;
    this.createTimestamp = createTimestamp;
}

// Property accessors

    @Column(name = "IDENTIFIER", nullable = false, length = 11)
    public String getIdentifier() {
        return this.identifier;
    }

    public void setIdentifier(String identifier) {
        this.identifier = identifier;
    }

    @Column(name = "CREATE_TIMESTAMP",insertable= false, updatable= false,  nullable = false, length = 26)
    public Date getCreateTimestamp() {
        return this.createTimestamp;
    }

    public void setCreateTimestamp(Timestamp createTimestamp) {
        this.createTimestamp = createTimestamp;
    }

} 
```

我想我需要告诉 Hibernate ActivityLogID.createTimestamp 正在由数据库创建......但我不确定如何。

就目前而言，当我尝试保存这些对象时，我得到：

```
org.hibernate.exception.ConstraintViolationException: 
could not insert: [ca.gc.rcmp.persistence.ActivityLog]........ 
Caused by: com.ibm.db2.jcc.am.fo: DB2 SQL Error: SQLCODE=-407, SQLSTATE=23502, SQLERRMC= , DRIVER=3.57.82 
```

这告诉我我不能将 null 放入 Not-null 列。CreateTimestamp 是我的实体中唯一为空的字段。

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:29:22.450

查看休眠文档的**[“生成的属性”](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-generated)**部分。根据您的用例使用 ALWAYS 或 INSERT 进行注释

```
@Generated(GenerationTime.INSERT) 
```

# javascript - 显示内联块 li 元素时 Chrome 中的错误

> ID：13094276
> 
> 赞同：3
> 
> 时间：2012-10-26T20:53:47.607
> 
> 标签：javascript, jquery, google-chrome, cross-browser, css

我对网络编码很陌生，在尝试创建带有下拉菜单的基于 jQuery 的菜单栏时，我偶然发现了浏览器之间的一些巨大差异。下面你可以看到，虽然 FF 和 Safari 是相同的，但 IE 实际上表现良好， Opera 还可以，Chrome 完全错误。据我所知，我拥有所有最新版本。

![在不同的浏览器中会发生什么](../Images/456b52f427b988b50720b8d2a2252442.png)

我从这里删除了代码并将其粘贴到：（不想让我正确链接）所以：jsfiddle.net/2hCR2/

以防万一，不需要支持旧版本的 IE (6-7)。

现在我主要关心的是定位方面。非常感谢任何帮助！

****编辑：** 继续使用 chrome 开发人员工具后，我意识到当我手动设置第一个列表（裤子/T 恤）时，`display:block`它会按预期显示（就像图像中的 FF 和 Safari）所以看来这更像是一个没有正确更新 DOM 的 javascript/jQuery 问题（？）。我还注意到，当我输入代码是 JSFiddle 并在 Chrome 中运行脚本时，它会产生相同的错误，但是当我在 FF 中运行 JSFiddle（完全相同的小提琴链接）时，它会正确呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:04:15.770

它不会在 Chrome Canary（版本 24）中发生，但在稳定版（版本 22）中会发生。显然这是一个已修复的错误。

您可以等待一两个月，以便所有 Chrome 用户都得到修复，或者只`.show()`使用`.show(0)`.

# xcode - Xcode 识别什么 GLSL 文件扩展名？

> ID：13094279
> 
> 赞同：4
> 
> 时间：2012-10-26T20:54:11.430
> 
> 标签：xcode, glsl, file-extension

注意：这个问题专门针对 Xcode。还有其他关于 GLSL 文件扩展名的问题，例如：[GLSL 着色器的正确文件扩展名是什么？](https://stackoverflow.com/questions/6432838/what-is-the-correct-file-extension-for-glsl-shaders)

我一直在使用`.glsl`GLSL 代码文件，但我也尝试过这些：、、、、和`.glslv`-但在创建/添加文件到我的文件后`.glslf,` `.vsh`，我总是必须手动将文件类型设置为“OpenGL 着色语言源”项目。`.fsh``.vert``.frag`

a) 是否有 Xcode 会自动识别为 GLSL 源的扩展？

或者...

b) 有没有办法告诉 Xcode 将我选择的扩展名与 GLSL 源文件类型相关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T01:42:40.660

我有理由相信您的 (a) 问题的答案是否定的。我查看了文档类型并在 Xcode 4.5.1 的 Info.plist 中导出了 UTI 声明。它列出了片段着色器的 4 个扩展，与 UTI org.khronos.glsl.fragment-shader 相关联：.fs、.fsh、.frag、.fragment。顶点着色器和几何着色器也有类似的扩展。但是，如果我将具有这 4 个片段着色器扩展中的任何一个的文件添加到项目中，Xcode 只会将其归类为通用源代码。

我敢打赌，(b) 的答案也是否定的，但我无法证明这一点。

# android - Android 方法未定义

> ID：13094283
> 
> 赞同：1
> 
> 时间：2012-10-26T20:54:36.810
> 
> 标签：android, eclipse, android-intent

请，我有一个问题，我正在编写我的应用程序并将类似的代码用于其他活动并且工作正常，但在这里我遇到了一些我不知道的错误。

*   未为 Object 类型定义 onCreate(Bundle) 方法
    *   对于类型 SessionActivity，方法 findViewById(int) 未定义
    *   断点：SessionActivity [line: 22] - onCreate(Bundle)
*   未为类型 new View.OnClickListener(){} 定义方法 getApplicationContext()
*   未为类型 new View.OnClickListener(){} 定义方法 startActivity(Intent)

布局

* * *

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="center_horizontal">

    <!--  Sample Dashboard screen with Two buttons -->

    <!--  Button to create nueva transaccion -->
    <Button android:id="@+id/btnTransaccion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Nueva transaccion"
        android:layout_marginTop="25dip"/>

    <!--  Button to create cerrar sesion -->
    <Button android:id="@+id/btncerrarsesion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Cerrar Sesion"
        android:layout_marginTop="25dip"/>

</LinearLayout> 
```

* * *

SessionActivity.java

* * *

```
package com.felipe.tesis;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView.FindListener;
import android.widget.Button;

public class SesionActivity {

    Button btnNTransaccion;
    Button btnCloseSesion;

     public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.sesion_iniciada);

            //Buttons
            btnNTransaccion = (Button) findViewById(R.id.btnTransaccion);
            btnCloseSesion = (Button) findViewById(R.id.btncerrarsesion);

            btnNTransaccion.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    // Launching All products Activity
                    Intent i = new Intent(getApplicationContext(), TransaccionActivity.class);
                    startActivity(i);

                }
            });
     }
} 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:56:15.267

您只是忘记扩展 Activity 类。

改变这个：

```
public class SesionActivity { 
```

对此：

```
public class SesionActivity extends Activity { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:56:11.443

您的主类不扩展`Activity`。您正在访问的方法（`onCreate`、`startActivity`等）可以在[类`Activity`中](http://developer.android.com/reference/android/app/Activity.html)找到。

它应该是：

```
public class SesionActivity extends Activity { 
```

# c# - 将 DataRow 中的值与对象字典进行比较

> ID：13094288
> 
> 赞同：0
> 
> 时间：2012-10-26T20:55:02.123
> 
> 标签：c#, equality

我正在编写数据库测试实用程序代码，它将 DataRow 值与作为字典提供的预期值（columnName，expectedColumnValue）进行比较。

它适用于许多类型，但对于字节和短，我必须添加将值转换为 Int32 的转换代码。

两个问题：

1.  你有想法如何使这段代码更好，即如何避免转换？对于小数和浮点数，它似乎可以工作，因为它们被明确声明为小数/浮点值。Long 也可以正常工作。

2.  如果没有其他方法，除了短和字节之外还有其他类型我需要担心吗？

演示代码如下：

```
 var table = new DataTable();
            table.Columns.Add(new DataColumn("CarrierId", typeof(byte)));
            table.Columns.Add(new DataColumn("NotationId", typeof(short)));

            var row = table.NewRow();
            row[0] = 5;
            row[1] = 123;

            table.Rows.Add(row);

            var expected = new Dictionary<string, object>
            {
                {"CarrierId", 5},
                {"NotationId", 123},
            };

            foreach (var entry in expected)
            {
                var value = row[entry.Key];
                var expectedValue = entry.Value;

                if (value is short || value is byte)
                    value = Convert.ToInt32(value);

                Console.WriteLine();
                Console.WriteLine(String.Format("Not converted: {0}", row[entry.Key].Equals(entry.Value)));
                Console.WriteLine(String.Format("Converted (if applicable): {0}", value.Equals(expectedValue)));

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:59:32.157

将预期类型中的值添加到字典中，然后在比较时不再需要进行转换：

```
var expected = new Dictionary<string, object>
{
    { "CarrierId", (byte)5 },
    { "NotationId", (short)123 },
}; 
```

* * *

当您`int`将由常量表达式（在编译时已知）给出的数字分配给`byte`变量时，C# 会自动将其转换为`byte`.

```
byte b = 5; // Stores a byte 
```

但是，当您将其分配给`object`变量时，C# 并不知道您将来会将其用作 a`byte`并且默认情况下会威胁它`int`。

```
object o = 5; // Stores an int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:18:16.550

除了 Olivier Jacot-Descombes 的回答之外，您还可以尝试以下代码：

```
object o = 5;
var v = o;
if (v is short)
   MessageBox.Show("short");
else if (v is byte)
   MessageBox.Show("byte");
else if (v is int)
   MessageBox.Show("int"); 
```

每当您将`integer`文字分配给 an 时，`object`它本质上是 int ，因此`var`将是`int`。因此，我建议您使用从数据库转换为类型的方法，反之亦然。

# ms-access - 用于过滤子表单数据表的未绑定文本框

> ID：13094293
> 
> 赞同：0
> 
> 时间：2012-10-26T20:55:34.930
> 
> 标签：ms-access

我有一个嵌入了子表单数据表的 Microsoft Access (2010) 表单。我的目标是在每个数据表列上方有一个未绑定的文本框，允许用户键入文本来过滤该列。

数据表列之一，供应商，显示基于 tblVendor 表的供应商名称列表。它通过对用户不可见的 VendorID 列绑定到数据表。

我使用以下代码，但它似乎只查询 VendorID 列上的数据表。我想查询文本。例如，我希望用户输入“Microsoft”，而不是“21”（Microsoft 的 VendorID）。

```
Private Sub TxtVendorSearch_Change()

Dim str1 As String

str1 = "[VendorID] LIKE '*" & Me.TxtVendorSearch & "*'"

Me!subOrderDS1.Form.Filter = str1
Me!subOrderDS1.Form.FilterOn = True 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:15:20.253

如果还没有这样做，只需在子表单的查询中包含（必要时通过加入）[供应商]-名称。然后，您可以只查询`[Vendor] LIKE ...`而不是`[VendorID]`.
要使其实时，您还必须使用`Me.TxtVendorSearch.Text`，因为文本框的值不会立即与可见文本同步。

# javascript - 如何从 Javascript 中的按钮单击调用原始表单

> ID：13094294
> 
> 赞同：2
> 
> 时间：2012-10-26T20:55:40.663
> 
> 标签：javascript, forms, element

在第二个表单替换原始表单后，我试图通过按钮返回原始表单。对 JS 来说很新，但我对它应该如何工作有很好的理解。这是我的例子：

```
<!DOCTYPE html>
<html>
<center>
<head>
<title>Test2</title>
<script>
    function formReset()
    {
        document.getElementById("table").innerHTML = "???";
    }
    function nextPage()
    {
        if (document.getElementById("1").checked == true){
            document.getElementById("main").innerHTML = document.getElementById("test1").innerHTML;}
            else
        if (document.getElementById("2").checked == true){
            document.getElementById("main").innerHTML = document.getElementById("test2").innerHTML;}
            else
        if (document.getElementById("3").checked == true){
            document.getElementById("main").innerHTML = document.getElementById("test3").innerHTML;}
        return true;
    }
</script>
</head>
    <body>
     <h1>This is a test of the radio buttons</h1>
     <br />
     <div name="table" id="table">
    <form name="main" id="main">
        <input type="radio" name="grp1" id="1">1<br>
        <input type="radio" name="grp1" id="2">2<br>
        <input type="radio" name="grp1" id="3">3<br>
        <br />
        <input type="button" name="button" value="Next" onClick="nextPage()">
    </form>
</div>
<br />
<div name="test1" id="test1" style="display:none">
    <h2>You chose<br />1</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="test2" id="test2" style="display:none">
    <h2>You chose<br />2</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="test3" id="test3" style="display:none">
    <h2>You chose<br />3</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
</body>
</center>
</html> 
```

当问号显示时，那是我需要显示原始表单(id="main") 的时候。

我期望： document.getElementById("table").innerHTML = document.getElementById("main").innerHTML; 工作，但它没有。任何帮助将不胜感激，因为我几天来一直在寻找解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:34:34.470

请试试这个

```
<!DOCTYPE html>
<html>
<center>
<head>
<title>Test2</title>
<script>
    function formReset()
    {
        document.getElementById("final").innerHTML ="";
        document.getElementById("normal").style.display = 'block';
    }
    function nextPage()
    {
        if (document.getElementById("1").checked == true){
            document.getElementById("final").innerHTML = document.getElementById("test1").innerHTML;
            document.getElementById("normal").style.display = 'none';
            }
            else
        if (document.getElementById("2").checked == true){
            document.getElementById("final").innerHTML = document.getElementById("test2").innerHTML;
            document.getElementById("normal").style.display = 'none';
            }
            else
        if (document.getElementById("3").checked == true){
            document.getElementById("final").innerHTML = document.getElementById("test3").innerHTML;
            document.getElementById("normal").style.display = 'none';
            }
        return true;
    }
</script>
</head>
    <body>
     <h1>This is a test of the radio buttons</h1>
     <br />
     <div name="table" id="table">
    <form name="main" id="main">
        <div id="final"></div>
        <div id="normal">
        <input type="radio" name="grp1" id="1">1<br>
        <input type="radio" name="grp1" id="2">2<br>
        <input type="radio" name="grp1" id="3">3<br>
        <br />
        <input type="button" name="button" value="Next" onClick="nextPage()">
        </div>
    </form>
</div>
<br />
<div name="test1" id="test1" style="display:none">
    <h2>You chose<br />1</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="test2" id="test2" style="display:none">
    <h2>You chose<br />2</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="test3" id="test3" style="display:none">
    <h2>You chose<br />3</h2>
    <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
</body>
</center>
</html> 
```

# asp.net-mvc - “@model”在混合 WebForm/MVC 站点中的剃须刀页面上不起作用

> ID：13094295
> 
> 赞同：1
> 
> 时间：2012-10-26T20:55:44.860
> 
> 标签：asp.net-mvc

我正在将 MVC 集成到我们当前的 .Net WebForms 站点中。我在设置时使用这些链接作为指导。[Hanselman - 集成 MVC](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)和[blog.falafel](http://blog.falafel.com/Blogs/BasemEmara/basem-emara/2012/09/27/integrating-asp.net-mvc-4-into-existing-web-forms-applications)。

该网站正常工作，我可以导航到 .aspx 页面和控制器/操作没问题。但是当我尝试将@model 添加到剃须刀页面时，@model 似乎没有注册，Visual Studios 将其视为 HTML5 项目。

例外：

{“c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\a3be471e\a209a63\App_Web_index.cshtml.a8d08dba.d7uqhlro.0.cs(30): 错误 CS1514: { 预期” } System.Exception {System.Web.HttpCompileException}

我添加了所有适当的参考资料，并多次浏览了这两个网站。

我添加的参考文献列表 -

```
Microsoft.Csharp
System.ComponentModel.Data
System.Web.Mvc
System.Web.Razor
System.Web.WebPages
System.Net.Http
System.Web.Optimization
System.Web.Http
System.Web.Http.WebHost
Newtonsoft.Json 
```

Web.config 添加

```
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation>

<system.web>
  <pages>
    <namespaces>
      <add namespace="System.Web.Helpers" />
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="System.Web.WebPages"/>
   </namespaces>
  </pages>
</system.web>

<configuration>
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

# linux - 使用标准 linux 命令的分段错误

> ID：13094296
> 
> 赞同：4
> 
> 时间：2012-10-26T20:55:46.420
> 
> 标签：linux, ubuntu, command-line, segmentation-fault

有史以来第一次，我在 Ubuntu 中运行标准 Linux 命令时遇到问题。例如，当我尝试使用 VI（例如`vi /path/to/file`）编辑文件时，我得到一个分段错误错误。类似的命令`curl -I http://some.domain.com`，等等。在 curl 的情况下，我使用 gdb 读取核心转储并得到以下内容：

```
提示>> gdb -c core-curl-11-0-0-4954-1351282891
GNU gdb (GDB) 红帽企业 Linux (7.2-50.el6)
版权所有 (C) 2010 Free Software Foundation, Inc.
许可 GPLv3+：GNU GPL 版本 3 或更高版本
这是免费软件：您可以自由更改和重新分发它。
在法律允许的范围内，不提供任何保证。输入“显示复制”
和“显示保修”了解详情。
这个 GDB 被配置为“x86_64-redhat-linux-gnu”。
有关错误报告说明，请参阅：
.
[新线程4954]
核心是由`/usr/bin/curl http://alfred.conviocloud.com' 生成的。
程序以信号 11 终止，分段错误。
#0 0x00007feedbb74721 在?? ()

```

我最近在我的电脑中放入了 4GB 内存，我想知道这是否是问题所在。也就是说，我 100% 确定我使用了正确的型号，并且我的计算机可以支持升级。

非常感谢调试和解决此问题的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T23:15:53.327

很可能是硬件——[尝试 bitwizard——Sig11 问题。](http://www.bitwizard.nl/sig11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T00:06:09.763

几件事要尝试：

*) 检查您是否进行了重大升级。如果你这样做了，那可能是导致它的原因。
*) 删除并重新安装 vim 或任何其他简单的实用程序。看看他们是否失败。如果它们失败，请使用 ldd 查看它们链接到的内容。查看是否有任何库具有最近的时间戳。
*) 查看 gdb 中的错误堆栈。它会告诉您它在哪里进行了核心转储以及在哪个库中。
*) 从 cd 重新启动并查看 vi 或任何实用程序是否失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T23:57:03.400

一种可能是您在 shell 中设置的某些环境变量严重影响了您尝试运行的程序。如果您可以通过标准 Linux 命令（例如 vi）可靠地生成核心转储，那么请尝试在未定义任何内容的 shell 中运行该命令。要创建一个定义了最少变量集的 shell，请照常打开终端，然后输入：

```
env -i bash --norc 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-04T05:01:59.710

我有`sudo apt-get install vim`，然后你的问题发生了`reboot`。

做`sudo apt-get autoremove vim`。就在这之后，`vi file`变成了正常的增益。（但是之前存在的一些问题`apt-get install vim`又出现了）

所以，再做`sudo apt-get install vim`一次`reboot`。那就没有了`Segmentation fault`。

# php - AJAX 显示图像

> ID：13094302
> 
> 赞同：1
> 
> 时间：2012-10-26T20:56:13.863
> 
> 标签：php, html, ajax, jquery

我有一个页面显示用户是否已付款。如果他们还没有付款，我需要给他们看一张大红色的图片`X`并显示一个付款按钮，如果他们已经付款，则显示一个大的绿色支票。我知道如何为 php 脚本编写代码，让我们调用它`pay.php`，但我需要解决主页 ajax 的逻辑。所以我在想这样的事情：

```
<div id="payment">
    <div id="image"></div>
    <div id="pay_text></div>
</div>

<script>
$(document).ready(function(e) {
    if(<?php echo $is_logged_in; ?>) {
        $('#payment').load(function() {
            $.ajax({
                data: $this.serialize(), // get the form data
                type: "POST", // GET or POST
                url: "Scripts/pay.php", // the file to call
                complete: function(data) {
                    if(data=="Yes") {
                        $('#image') //do some jquery to make the correct image display here
                        $('#pay_text').text("Yah you paid");
                    } else {
                        $('#image') //do some jquery to make the correct image display here
                        $('#pay_text').text("Sorry you didn't pay");
                    }
                }
            });
        }
    }
});
</script> 
```

所以基本上脚本会回显`yes`或`no`. 而且我只想在用户登录后评估此负载（我需要查看该特定用户是否付费）。那么我的逻辑是写的还是我的路要走？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:45:35.080

您可能不应该使用`load`这种方式，并且确实不需要它。

您的 PHP 变量`$is_logged_in`当然必须`true`在 ajax 函数运行之前，并且返回`true`or`false`通常是使用代码的方式，而不是返回`yes`or `no`，如果`data`是，`true`或者`false`您可以将其粘贴在 if 语句中，没有模糊！

至于用ajax函数发送表单数据，是什么形式？什么是`$this`？

您必须确定用户是否在服务器端付费，并且您实际上并不需要来自客户端的任何数据来执行此操作，您需要做的就是检查您的数据库或您正在使用的任何东西查看该用户是否付款，然后返回`true`或`false`。

```
<script type="text/javascript">
    $(document).ready(function() {
        if(<?php echo $is_logged_in; ?>) {
            $.ajax({
                type: "POST",
                url: "scripts/pay.php"
            }).done(function(data) {
                if (data) {
                    $('#image').css('background', 'url(/yes.png)');
                    $('#pay_text').text("Yah you paid");
                }else{
                    $('#image').css('background', 'url(/no.png)');
                    $('#pay_text').text("Sorry you didn't pay");
                }
            });
        }
    });
</script>​​​​​​​​​ 
```

# javascript - 如何在 Backbone.js 中设置视图的 id？

> ID：13094306
> 
> 赞同：17
> 
> 时间：2012-10-26T20:56:34.690
> 
> 标签：javascript, jquery, model-view-controller, backbone.js

在 Backbone.js 中，当我创建视图时，我可以初始化其元素的“类”属性，如下所示：

```
var newView = Backbone.View.extend({
    className: 'foo'
}); 
```

是否有类似的方式以类似的方式设置“id”属性？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-26T21:00:18.243

```
var newView = Backbone.View.extend({
    id: 'foo1',  // or
    tagName: 'foo2', // or ..
    className: 'foo3' // 
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T21:01:39.977

您可以使用现有的 id 属性。这是文档中的相关部分：

> elview.el 所有视图始终都有一个 DOM 元素（el 属性），无论它们是否已经被插入到页面中。以这种方式，可以随时渲染视图，并一次性插入到 DOM 中，以便在尽可能少的重排和重绘的情况下获得高性能的 UI 渲染。**this.el 是从视图的 tagName、className、id 和 attributes 属性（如果指定）创建的。**如果不是，el 是一个空的 div。

此外，如果对您更有效，您可以绑定到 HTML 中已经存在的现有元素。

# html - 跨浏览器导航 CSS

> ID：13094307
> 
> 赞同：1
> 
> 时间：2012-10-26T20:56:40.747
> 
> 标签：html, css, cross-browser

我正在尝试为我的网站构建一个简单的纯 CSS 导航栏。这是它在现代浏览器中运行良好：

![现代浏览器中的导航](../Images/789bd37eb6c7b05a3997c73d2ffd90aa.png)

这是我的 CSS：

```
#nav{
    width:496px;
    height:45px;
    float:right;
    background-color:#bee199;
    -moz-border-radius:3px;
    -webkit-border-radius:3px;
    border-radius:3px;
    margin-top:5px;
    border:1px solid #a09f9f;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}
    #nav ul{
        list-style:none;
        text-align:center;
    }
    #nav ul .last{
        padding-right:0px;
        border-right:none;
    }
    #nav ul li.navsep{
        width:1px;
        height:44px;
        background-color:#a09f9f;
        padding:0;
        margin-right:10px;
    }
        #nav ul li{
            width:auto;
            height:44px;
            display: -moz-inline-stack;
            display:inline-block;
            padding-right:10px;
            margin-bottom:-16px;
        }
            #nav ul li a{
                font-family:Helvetica, Arial, sans-serif;
                font-size:20px;
                font-weight:400;
                text-decoration:none;
                color:#434342;
            } 
```

HTML：

```
<div id="nav">
            <ul>
                <li><a href="principles.html" title="principles">Principles</a></li>
                <li class="navsep"><span></span></li>
                <li><a href="#edit" title="Our Services">Our services</a></li>
                <li class="navsep"><span></span></li>
                <li><a href="recent.html" title="Recent work">Recent work</a></li>
                <li class="navsep"><span></span></li>
                <li class="last"><a href="#edit" title="Contact Us">Contact</a></li>
            </ul>
</div> 
```

我的问题之一是使用负边距，我真的不想使用它们。但是每次我尝试使用传统方法时，文本都不会垂直居中，它看起来像这样：

这也发生在较旧的浏览器上。

谢谢你的时间！如果您需要更多信息，请询问！:)

![破碎的导航](../Images/ccb476d686550c697231b5e34ac05ccb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:02:31.877

1.  省略`<li class="navsep">`并使用边框。

2.  在元素上使用 lineheight `li`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:58:32.273

而不是使用负边距使用行高，在您的情况下，`#nav ul li {height: 44px; line-height: 44px;}`这将使您的文本垂直居中

# uploadify - 防止 Uploadify 异步上传多个文件

> ID：13094316
> 
> 赞同：0
> 
> 时间：2012-10-26T20:57:25.163
> 
> 标签：uploadify

是否可以防止uploadify异步上传多个文件？理想情况下，我希望它自动设置为 true，并且它从第一个文件到最后一个文件一个接一个地工作。

我遇到了一个问题，我将文件存储在 Sitecore 媒体库中，它正在创建文件的重复路径，而不是将两个文件放在一个路径下。

我已经尝试添加`'async': false`到我传递给uploadify调用的配置中，但那里没有骰子（没想到会起作用）。

我查看了uploadify 论坛，那里似乎没有答案。任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:23:57.700

所以虽然我找不到让它不异步上传的方法，但我确实发现你可以使用这个设置限制uploadify可以同时上传的文件数量：simUploadLimit。所以我所做的只是将它设置为一个，这解决了我的问题。

# javascript - 如何使用 Javascript 在文本节点中添加标签

> ID：13094317
> 
> 赞同：-1
> 
> 时间：2012-10-26T20:57:45.990
> 
> 标签：javascript, html, xml, tags, nodes

这可能非常容易/显而易见。我正在写一个 Chrome 扩展。我的 Javascript 从任何站点捕获文本节点并将部分文本更改为其他内容。我想通过更改颜色（添加标签）来标记更改的文本。

```
return "<font color = \"FF0000\">"+a+"</font>" 
```

结果：

```
<font color = "FF0000">SomeText</font> 
```

但我当然想要的是**SomeText**将显示为红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:19:21.167

我建议您在 chrome 扩展中使用 CSS。所以我的解决方案将涉及给 DOM 元素（对于您的实例可能是一个段落或一个跨度）一个类。将样式属性放在 HTML 标记中不是很好的约定。

```
<p class="red">SomeText</p> 
```

在你的 CSS 文件中

```
.red {
    color: #ff0000 /* I actually love this color */
} 
```

**那么这是如何使用 JavaScript 的呢？**

您可以向元素添加类，而不是将样式直接添加到 HTML 标记中。

```
document.getElementByTagName("p").className = "red"; 
```

或者，如果您想定位特定 ID

```
document.getElementById("object").className = "red"; 
```

该文本将是红色的。而且由于您可以将红色类添加到 DOM 中任何对象的任何类属性中，因此您的代码看起来会比到处乱扔样式更干净。

我希望这能够帮到你。如果不是，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:46:27.907

```
function newText(tag, text, style) {
    var element = document.createElement(tag);              //this creates an empty node of the type specified
    element.appendChild(document.createTextNode(text));     //this creates a new text node and inserts it into our empty node
    if (style) element.setAttribute('style', style);        //this sets the style in inline CSS (warning, this needs different syntax in IE)
    return element;                                         //this returns a DOM object
} 
```

This will return a DOM object, and you will need to append it to another node.

```
var myText = newText('p', 'This is some text!', 'color: red;');
document.getElementById('myTextBox').appendChild(myText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:03:13.267

您需要在样式表中添加颜色...例如`<input type="text" style="color:red" value="sometext"/>`。

# javascript - jQuery如何在表ID中选择th

> ID：13094319
> 
> 赞同：-4
> 
> 时间：2012-10-26T20:58:13.363
> 
> 标签：javascript, jquery

如何`<th>`使用 jQuery 选择器从以下代码中仅选择 s？谢谢！

```
<table id='tab1'>
  <tbody>
    <tr>
      <th>col1</th>
      <th>col2</th>
    </tr>
    <tr>
      ...
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:58:59.840

使用以下内容：

```
$("#tab1 th") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:59:40.963

```
var th = $( '#tab1 th' ); 
```

或者

```
var th = $( 'th', '#tab1' ); 
```

# python - 如何在 Django 中覆盖 ModelForm 的“类型”属性？

> ID：13094320
> 
> 赞同：7
> 
> 时间：2012-10-26T20:58:17.197
> 
> 标签：python, django, html, django-widget

具体来说，我想以表单呈现日期小部件，但我希望它“成为”HTML5（所以我可以忘记 javascript 或其他任何东西，并信任 Chrome、Opera 和 Safari 来显示日期选择器）。

请不要使用javascript解决方案，我已经在网上找到了。

这是我的代码片段，但它仍然将表单字段*thedate*的类型属性作为“文本”。

```
#models.py

class MyModel(models.Model):
    user = models.ForeignKey(User)
    thedate = models.DateField()

#forms.py

class MyModelForm(ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'thedate': TextInput(attrs={'type': 'date'}),
        } 
```

任何人都可以阐明一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T21:08:51.583

## 使用 django-html5

1.  安装[django-html5](https://github.com/rhec/django-html5/blob/master/html5/forms/widgets.py)：`pip install django-html5`

2.  在forms.py中，`import html5.forms.widgets as html5_widgets`

3.  放`widgets['thedate'] = html5_widgets.DateInput`

我没有亲自测试它，因为我刚刚发现了诀窍，但多亏了你，我可能会使用它：D

## 只需覆盖 input_type

您也可以制作自己的小部件，想法如下：

```
from django import forms

class Html5DateInput(forms.DateInput):
    input_type = 'date' 
```

详情请参阅`django/forms/widgets.py`；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-09T05:13:06.130

这是一个简单的：

将此代码放在 form.py 的任何位置

```
forms.DateInput.input_type="date"
forms.DateTimeInput.input_type="datetime-local" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T22:37:07.650

这是基本上jpic的解决方案的代码片段，也是我在这里寻找答案后使用的-->

```
class EmailTextInput(django.forms.widgets.TextInput):
    """Subclass TextInput since there's no direct way to override its type attribute"""
    input_type ='email'

class MyModelForm(ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'thedate': EmailTextInput()
        } 
```

# session - 会话化网络日志，获取上一个和下一个域

> ID：13094321
> 
> 赞同：0
> 
> 时间：2012-10-26T20:58:31.477
> 
> 标签：session, hadoop, amazon-web-services, apache-pig, elastic-map-reduce

我们有一大堆网络日志数据。我们需要对它进行会话化，并为每个会话生成上一个域和下一个域。我正在通过 AWS EMR 上的交互式作业流程进行测试。

现在，我可以在此处使用以下代码获取数据会话：http: [//goo.gl/L52Wf](http://goo.gl/L52Wf)。熟悉编译和使用 UDF 需要做一些工作，但我已经做到了。

这是输入文件的标题行和第一行（制表符分隔）：

```
ID  Date    Rule code   Project UID respondent_uid  Type    Tab ID  URL domain  URL path    Duration    Exit cause  Details
11111111    2012-09-25T11:21:20.000Z    20120914_START_USTEST   20120914_TESTSITE_US_TR test6_EN_9  PAGE_VIEWED FF1348568479042 http://www.google.fr        11  OTHER 
```

这是来自`SESSIONS`关系的元组（获取关系的步骤如下所示）：

```
(2012-09-27 04:42:20.000,11999603,20120914_URL_ALL,20120914_TESTSITE_US_TR,2082810875_US_9,PAGE_VIEWED,CH17,http://hotmail.com,_news/2012/09/26/14113684,28,WINDOW_DEACTIVATED,,3019222a-5c4d-4767-a82e-2b4df5d9db6d) 
```

这大致就是我现在正在运行的测试数据会话：

```
register s3://TestBucket/Sessionize.jar

define Sessionize datafu.pig.sessions.Sessionize('30m');

A = load 's3://TestBucket/party2.gz' USING PigStorage() as (id: chararray, data_date: chararray, rule_code: chararray, project_uid: chararray, respondent_uid: chararray, type: chararray, tab_id: chararray, url_domain: chararray, url_path: chararray, duration: chararray, exit_cause: chararray, details: chararray);

B = foreach A generate $1, $0, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11;

C = filter B by id neq 'ID';

VIEWS = group C by (respondent_uid, url_domain);

SESSIONS = foreach VIEWS { VISITS = order C by data_date; generate FLATTEN(Sessionize(VISITS)) as (data_date: chararray, id: chararray, rule_code: chararray, project_uid: chararray, respondent_uid: chararray, type: chararray, tab_id: chararray, url_domain: chararray, url_path: chararray, duration: chararray, exit_cause: chararray, details: chararray, session_id); } 
```

（B处的步骤是将日期移动到第一个位置。C处的步骤是过滤掉文件头）

从这里开始，我迷失了正确的方向。

我可以迭代我与猪脚本的`SESSIONS`关系`foreach`并获取下一个和上一个域吗？编写自定义 UDF 并将`SESSIONS`关系传递给它会更好吗？（编写我自己的 UDF 将是一次冒险！..）

任何建议将不胜感激。即使有人可以建议**不要**做的事情，也可能同样有帮助，所以我不会浪费时间研究垃圾方法。我对 Hadoop 和 pig 脚本还很陌生，所以这绝对不是我的强项之一（但..）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:08:43.273

如果有人可以改进下面的解决方案，我一点也不感到惊讶，但是，**它适用**于我的情况。我使用 sessionize UDF（在我的问题中提到）作为编写以下 UDF 的参考。

```
import java.io.IOException;
import java.util.ArrayList;
import org.apache.pig.Accumulator;
import org.apache.pig.EvalFunc;
import org.apache.pig.data.BagFactory;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.DataType;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;
import org.apache.pig.impl.logicalLayer.FrontendException;
import org.apache.pig.impl.logicalLayer.schema.Schema;

public class PreviousNext extends EvalFunc<DataBag> implements Accumulator<DataBag>
{

    private DataBag outputBag;
    private String previous;
    private String next;

    public PreviousNext()
    {
        cleanup();
    }

    @Override
    public DataBag exec(Tuple input) throws IOException 
    {   
        accumulate(input);
        DataBag outputBag = getValue();
        cleanup();

        return outputBag;
    }

    @Override
    public void accumulate(Tuple input) throws IOException 
    {
        ArrayList<String> domains = new ArrayList<String>();

        DataBag d = (DataBag)input.get(0);

        //put all domains into ArrayList to allow for
        //accessing specific indexes
        for(Tuple t : d)
        {
            domains.add((String)t.get(2));
        }

        //add empty string for "next domain" value for last iteration
        domains.add("");

        int i = 0;

        previous = "";

        for(Tuple t : d)
        {   
            next = domains.get(i+1);

            Tuple t_new = TupleFactory.getInstance().newTuple(t.getAll());

            t_new.append(previous);
            t_new.append(next);

            outputBag.add(t_new);

            //current domain is previous for next iteration
            previous = domains.get(i);

            i++;
        }

    }

    @Override
    public void cleanup() 
    {
        this.outputBag = BagFactory.getInstance().newDefaultBag();

    }

    @Override
    public DataBag getValue() 
    {
        return outputBag;
    }

    @Override
    public Schema outputSchema(Schema input)
      {
        try 
        {
          Schema.FieldSchema inputFieldSchema = input.getField(0);

          if (inputFieldSchema.type != DataType.BAG)
          {
            throw new RuntimeException("Expected a BAG as input");
          }

          Schema inputBagSchema = inputFieldSchema.schema;

          if (inputBagSchema.getField(0).type != DataType.TUPLE)
          {
            throw new RuntimeException(String.format("Expected input bag to contain a TUPLE, but instead found %s", DataType.findTypeName(inputBagSchema.getField(0).type)));
          }

          Schema inputTupleSchema = inputBagSchema.getField(0).schema;

          Schema outputTupleSchema = inputTupleSchema.clone();

          outputTupleSchema.add(new Schema.FieldSchema("previous_domain", DataType.CHARARRAY));

          outputTupleSchema.add(new Schema.FieldSchema("next_domain", DataType.CHARARRAY));

          return new Schema(new Schema.FieldSchema(getSchemaName(this.getClass().getName().toLowerCase(), input),outputTupleSchema,DataType.BAG));
        }
        catch (CloneNotSupportedException e) 
        {
          throw new RuntimeException(e);
        }

        catch (FrontendException e) 
        {
          throw new RuntimeException(e);
        }
      }

} 
```

# php - 在不重新编译的情况下启用 php sysvshm 扩展

> ID：13094323
> 
> 赞同：1
> 
> 时间：2012-10-26T20:58:45.657
> 
> 标签：php, php-extension

我正在使用共享主机。PHP 是用`--disable-sysvshm`. 运行脚本时出现以下错误：

`Fatal error: Call to undefined function shm_attach() in ...`

有没有办法在不重新编译php的情况下启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:04:30.847

有，但作为普通用户，你不能这样做。您需要管理员权限。

如果你有 root 访问权限，那么你的包管理器应该有可用的扩展，如果它没有内置到 PHP 中。对于 SuSE，它看起来像一个`php-sysvshm`包可以做到这一点。如果没有包，你仍然需要重建，但它是可行的。

如果您没有构建 PHP 或安装软件包所需的访问权限，您将无法构建或安装，更不用说加载扩展（这几乎是您无需替换您的即可添加功能的唯一方法）现有的 PHP）。在这种情况下，您需要与您的网络主机商交谈，看看他们是否会为您安装它。如果他们不会，那就差不多了。

# r - 从 ls() 结果中隐藏函数名称 - 更快地找到变量名称

> ID：13094324
> 
> 赞同：4
> 
> 时间：2012-10-26T20:58:52.883
> 
> 标签：r

当我们定义了几十个函数时——可能是为了开发一个新的包——很难通过`ls()`命令从众多函数名中找出一个特定变量的名称。

在大多数情况下，我们不是在寻找函数名称——我们已经知道它们存在——但我们想找到我们分配给变量的名称。

任何解决它的想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T21:12:40.147

如果您想要一个函数来执行此操作，您需要在`ls()`查看的环境中进行一些操作。在正常使用中，下面的实现将通过在函数的父框架中列出对象来工作，如果在顶层调用。

```
lsnofun <- function(name = parent.frame()) {
    obj <- ls(name = name)
    obj[!sapply(obj, function(x) is.function(get(x)))]
}

> ls()
[1] "bar"           "crossvalidate" "df"           
[4] "f1"            "f2"            "foo"          
[7] "lsnofun"       "prod"         
> lsnofun()
[1] "crossvalidate" "df"            "f1"           
[4] "f2"            "foo"           "prod" 
```

我写了这个，所以你可以传入`name`参数，`ls()`如果你需要在一系列嵌套函数调用中调用这种方式。

还要注意，当我们测试它们是否是函数时，我们需要`get()`命名的对象。`ls()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T21:08:13.247

所以也许

```
ls()[!ls()%in%lsf.str()] 
```

Josh O'Brien 的建议是使用

```
setdiff(ls(), lsf.str()) 
```

该函数，经过一些转换和检查，调用

```
x[match(x, y, 0L) == 0L] 
```

这与我最初建议的非常接近，但在 function 中很好地打包了`setdiff`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T21:33:57.463

与其对全局环境中的对象进行排序并尝试将数据对象与函数分开，不如将函数存储在不同的环境中以便`ls()`不列出它们（默认情况下它只列出全局环境中的东西）。但是它们仍然可以访问，并且可以根据需要列出。

最好的方法是制作一个包含函数的包。这并不像有时看起来那么难，只是`package.skeleton`用来开始。

另一种选择是使用该`save`函数将所有函数保存到文件中，从全局环境中删除它们，然后使用该`attach`函数将此文件（以及所有函数）附加到搜索路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T21:04:57.610

所以你只想要变量名，而不是函数？这将做到这一点。

```
ls()[!sapply(ls(), function(x) is.function(get(x)))] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T21:17:45.567

以下函数`lsos`之前发布在 stackoverflow ([链接](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session)) - 它根据它们的大小对加载到 R 会话中的对象进行了很好的排序。函数的输出包含对象的类，您可以随后对其进行过滤以获取非函数对象。

```
source("lsos.R")

A <- 1
B <- 1
C <- 1
D <- 1
E <- 1
F <- function(x) print(x)

L <- lsos(n=Inf)
L[L$Type != "function",] 
```

这将返回：

```
> lsos(n=Inf)
         Type Size Rows Columns
lsos function 5184   NA      NA
F    function 1280   NA      NA
A     numeric   48    1      NA
B     numeric   48    1      NA
C     numeric   48    1      NA
D     numeric   48    1      NA
E     numeric   48    1      NA 
```

或者，使用过滤器，`F`不返回函数：

```
> L[L$Type != "function",]
     Type Size Rows Columns
A numeric   48    1      NA
B numeric   48    1      NA
C numeric   48    1      NA
D numeric   48    1      NA
E numeric   48    1      NA 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T21:20:50.757

我将此功能保留在我的`.rprofile`. 我不经常使用它，但是当我的全局环境中有多个环境、函数和对象时，它会很棒。显然不如 BenBarnes 的解决方案那么优雅，但我永远不必记住语法，并且可以`lsa()`根据需要调用。这也允许我列出特定的环境。例如`lsa(e)`

```
lsa <- function(envir = .GlobalEnv) {
    obj_type <- function(x) {
        class(get(x))
    }
    lis <- data.frame(sapply(ls(envir = envir), obj_type))
    lis$object_name <- rownames(lis)
    names(lis)[1] <- "class"
    names(lis)[2] <- "object"
    return(unrowname(lis))
} 
```

# vba - Excel VBA：如何将代码变成一个完整的工具栏工具？

> ID：13094329
> 
> 赞同：1
> 
> 时间：2012-10-26T20:59:22.413
> 
> 标签：vba, button, excel, add-in, toolbar

> **可能重复：**
> [VBA 控制功能区？](https://stackoverflow.com/questions/12005621/vba-control-over-the-ribbon)

又到了业余时间，我需要一些帮助。

所以我写了大约五段真正漂亮的代码来为我执行大量的任务。我已经决定它们很有用，我想在未来使用它们更多，我想将它们发送给我的一些同事。

问题：我必须将我制作的模块导入到每个项目中，这没什么大不了的，但我希望它们更容易获得。

目标：我想在 Excel 工具栏功能区上制作一个工具栏，并为我制作的五个模块中的每一个模块提供一个按钮，所以我所要做的就是单击该按钮，它会将所述模块设置为关闭运行.

我将如何开始做这样的任务？非常感谢您的意见！！

# ios - IOS显示facebook墙和图像

> ID：13094333
> 
> 赞同：1
> 
> 时间：2012-10-26T20:59:31.253
> 
> 标签：ios, xcode, facebook, photo, facebook-wall

我正在为我附近最喜欢的咖啡馆制作一个应用程序。我想在应用程序中显示咖啡馆的图像和墙贴。我是 ios 开发的新手。当我在网上搜索时，每个人都在谈论发布图片和墙上的物品。但我只想展示帖子和相册/图片。任何人都可以帮助我提供某种教程或其他东西。

# ruby-on-rails - url_for 不使用 default_url_options[:host] 值

> ID：13094336
> 
> 赞同：5
> 
> 时间：2012-10-26T20:59:43.283
> 
> 标签：ruby-on-rails, actionmailer

我有一个包含几个不同链接的 ActionMailer 视图。我现在在 localhost:3000 上运行它，所以我已经`setup_mail.rb`在 app/initializers 中调用的文件中设置了它（如此处所示[）](http://railscasts.com/episodes/206-action-mailer-in-rails-3?view=asciicast)：

```
ActionMailer::Base.default_url_options[:host] = "localhost:3000" 
```

当我`url_for`在视图中使用时，它似乎并没有拉取这个值。如果我然后添加`:host => "localhost:3000"`到每个`url_for`标签，它们就可以正常工作。但如果不包括在内，它们就无法工作。

我还有另一个标签 ，`project_url`它看起来是：指向指定项目的链接。这个函数，包括主机值，只需`project_url(@project)`. 为什么一个可以工作，而另一个不行？

从我读过的所有内容中，`default_url_options[:host]`在初始化程序中设置 应该允许我省略标记`:host`中的值。`url_for`显然，仅添加该值并不是世界上最糟糕的事情，但这似乎没有必要，这意味着当我最终将项目托管在某个地方时，我将不得不经历并在整个地方更改该值。但更糟糕的是，这是我不明白的事情。我去这里的时候还在学习，所以我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:48:35.410

[文档](http://api.rubyonrails.org/classes/ActionMailer/Base.html#label-Generating+URLs)对此非常清楚

> 当你决定为你的邮件设置一个默认的 :host 时，你需要确保在使用 url_for 时使用 :only_path => false 选项。由于 url_for 视图助手在 :host 选项未明确提供时默认生成相对 URL，因此传递 :only_path => false 将确保生成绝对 URL。

您可以创建自己的助手来使用而不是`url_for`强制`:only_path`成为`false`

```
def your_url_for(options = {})
  options.reverse_merge! only_path: false
  url_for(options)
end 
```

您也可以使用猴子补丁导轨将其强制为默认设置，但这取决于您:)

这一切都将是除了添加

```
config.action_mailer.default_url_options = { host: "YOUR HOST" } 
```

至`config/application.rb`或等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:18:32.150

默认情况下，选项似乎`:only_path`是 false 。这就是为什么您需要 `[:host]`为每个标签显式提供或设置`url_for`适用于所有标签的默认选项的原因。这是设置默认主机的方法：

将此代码放在您的应用程序控制器中，它应该可以工作。

```
helper_method :url_for
def default_url_options(options)
  { host: 'localhost:3000' }
end 
```

有关更多详细信息，请检查[set url_for defaults](http://lucastej.blogspot.in/2008/01/ruby-on-rails-how-to-set-urlfor.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T21:17:27.943

而不是篡改初始化后不应该更改的全局默认设置，您可以简单地`default_url_options`在您的邮件中定义一个方法，就像您可以在控制器中那样：

```
class UserMailer < ActionMailer::Base
  def default_url_options
    { host: Tenant.current(true).host }
  end

  def confirm(user)
    @user = user
    mail(to: @user.email, subject: t(".subject_confirm"))
  end
end 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-26T21:19:15.753

您在 ActionMailer::Base 中设置默认值，但似乎希望它重置 ActionController::Base 的默认值。

邮件视图中的 <%= link_to %> 不一定知道它在邮件视图中的事实。

# iis-7 - Silverlight 5 和 Ria 服务故障排除 [Web-Services-AuthenticationService.svc 不存在]

> ID：13094337
> 
> 赞同：2
> 
> 时间：2012-10-26T20:59:44.643
> 
> 标签：iis-7, wcf-ria-services, silverlight-5.0

我有两个使用 Ria 服务的 Silverlight 5 项目的不同版本。两者都在本地工作。旧版本 (A) 在部署到 ISS7 时有效。新版本（B）没有。版本 B 的用户/密码身份验证失败并出现以下错误：

*   `Load operation failed for query 'Login'. the remote server returned an error: NotFound.`

过去一周参考各种 SO 和 MSDN 帖子，我尝试了许多故障排除技术。[按照此处](http://forums.silverlight.net/t/186739.aspx/1/10)的建议将错误日志记录添加到 web.config 会导致记录以下内容：

*   `The service '/ClientBin/MyApp-Web-Services-AuthenticationService.svc' does not exist.`

研究导致找到[这个论坛帖子](http://forums.silverlight.net/t/218547.aspx/2/10#)，该帖子建议使用它正在寻找的名称/路径创建一个虚拟 .svc 文件。结果：

*   `The service '/ClientBin/DBCRM-Web-Services-AuthenticationService.svc' cannot be activated due to an exception during compilation. The exception message is: The ending bracket '&gt;' for the 'ServiceHost' directive is missing in the '.svc' file..`

上述错误的详细信息并不重要，因为它是我提供的空白 .svc 文件。它只是证实了该项目确实依赖于它的事实

这是踢球者......工作版本也不包含此文件，但它**不会**引发异常。

搜索任何关于需要该服务的参考都出人意料地在两种解决方案中都出现了结果。这两个`MyApp.Web.g.cs`文件是相同的（运行 CSDiff）并且都包含以下行：

*   `public AuthenticationContext() : this(new WebDomainClient<IAuthenticationServiceContract>(new Uri("DBCRM-Web-Services-AuthenticationService.svc", UriKind.Relative))) { }`

两者都具有相同的包/部署设置。我正在部署到文件系统，然后将文件复制到主机服务器上的 IIS。

问题：

1.  要求此 .svc 文件的设置在哪里？它显然在版本 A 中不需要，但在版本 B 中。同样，文件`MyApp.Web.g.cs`是对它的唯一引用，并且它在两个版本中都存在。

2.  `MyApp.Web.g.cs`是一个生成的文件。Visual Studio 2010 中的哪些服务会创建此文件？另外，我可以修改它以不包括对相关`.svc`文件的调用吗？

我将开始将这两个解决方案合并在一起，以查看 .svc 文件在什么时候变得必要。在此期间的任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:34:50.417

WCF Ria Services 注册一个 HttpModule 以管理 wcf ria 服务调用。当请求到达服务器时，该模块读取 url 并了解要实例化哪个服务以及调用哪个方法。所以你没有找到任何 .svc 文件是绝对正常的
不要乱用 .g.cs 你的问题不在这里。
看看你的 web.config 文件，你应该找到这样的行

```
<system.web>
    <httpModules>
      <add name="DomainServiceModule" type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>
...
</system.web> 
```

和这个

```
 <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
          <add name="DomainServiceModule" preCondition="managedHandler" type="System.ServiceModel.DomainServices.Hosting.DomainServiceHttpModule, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </modules>
...
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:39:24.840

除了如上所述确保 Web.Config 中存在“DomainServiceModule”条目外，另一件事是 RIA 需要启用 ASP .NET 兼容模式。这是 Microsoft 的 RIA 部署指南的链接：

[http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx)

在“配置 Web 服务器”部分的第三段中，它指出您的 Web.Config 文件中需要以下内容：

<system.serviceModel> ... <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" /> ... </system.serviceModel>

如果缺少此内容，您将获得问题中描述的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T19:57:06.153

在您执行任何这些操作之前，请确保`bin`实际部署了包含您的实际代码的常规文件夹。

我正在使用 MSDEPLOY 部署到新服务器，但它没有部署 bin 文件夹。没有它，你将无处可去！

# sql - 从多个组的记录组中选择最近一个月的记录

> ID：13094338
> 
> 赞同：2
> 
> 时间：2012-10-26T20:59:49.873
> 
> 标签：sql, group-by, max, cascading

如果生成/生成了 PSR，我有一个表，每个月都会为每个项目状态报告 (PSR) 生成一条记录。从单个表中，我需要获取每个 PSR 的最新记录。

这给了我正在寻找的 PSR 列表：

```
SELECT Max(Main.PSRMonth) AS MaxOfPSRMonth, Main.PE, Main.Loc, Main.EWO
FROM Main
GROUP BY Main.PE, Main.Loc, Main.EWO
ORDER BY Main.PE, Main.Loc, Main.EWO;

Table:Main 
Primary Key is PSRMonth + PE + EWO + LOC 
```

`FROM Main`现在，我需要基于上述选择的所有字段。我想用一个 SQL 语句来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:04:13.463

> 根据上面的选择，我需要来自 Main 的所有字段。

然后试试这个：

```
SELECT m1.*
FROM Main m1
INNER JOIN 
(
    SELECT 
      Max(PSRMonth) AS MaxOfPSRMonth, 
      PE, 
      Loc, 
      EWO
    FROM Main 
    GROUP BY PE, Loc, EWO 
) m2 ON  m1.PE = m2.PE AND m1.Loc = m2.Loc AND m1.EWO = m2.EWO 
     AND m1.PSRMonth = m2.MaxOfPSRMonth
ORDER BY m1.PE, M1.Loc, M1.EWO; 
```

# javascript - 使用 Javascript 从 h1 标记动态更改页面标题

> ID：13094340
> 
> 赞同：1
> 
> 时间：2012-10-26T21:00:06.080
> 
> 标签：javascript, page-title

首先，感谢您花时间阅读这个问题。Stack Overflow 有多么棒的社区 :)

我需要根据该页面上 h1 元素中包含的文本更改页面的标题标签。

我一直在四处寻找，我找到了“document.title”Javascript 函数。我一直在玩它，试图从我的具有“Category-H1”类的 h1 元素中提取文本。

```
<script type="text/javascript">
    document.title = document.getElementsByClassName("Category-H1");
</script> 
```

但是，它只是将页面标题设置为“[object HTMLCollection]”，据我所知，这是一个空值。JS 最好是这样做吗？我知道我的代码被劫持了，有什么提示吗？

提前致谢！- 亚历克斯

**编辑**

我被告知该行代码返回一个集合对象而不是一个字符串。它指向了一个代码示例：

```
setTimeout(function () { document.title = "iFinity User Profile - " + document.getElementById("test").outerText; }, 1000); 
```

但是，此代码会生成“iFinity 用户配置文件 - 未定义”的页面标题。我将该页面上的 h1 元素设置为“test”的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:04:54.383

您快到了。

`[object HTMLCollection]`不是空值——它是 html 元素集合的字符串表示形式。您想选择第一个，然后从中获取内部 html。

```
document.getElementsByClassName("Category-H1")[0].innerHTML 
```

此外，请确保在加载文档后执行此操作。您可以通过在文档末尾添加脚本来执行此操作，或者让它在`onload`正文事件上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:01:43.893

这应该有效：

```
document.title = document.getElementsByClassName("Category-H1")[0].innerHTML; 
```

该`getElementsByClassName()`函数返回一个元素集合 ( `[object HTMLCollection]`，因此您需要从中获取一个元素，我假设是第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T18:49:23.910

更好的解决方案可能如下：

```
<script type="text/javascript">
document.title = document.getElementsByTagName("H1")[0].innerHTML
</script>
```

这样可以避免设置 h1 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-12T18:11:00.170

这非常接近，但我发现 - 无论如何都使用 Firefox，当您使用 getElementsByTagName("H1") 时，它会为您提供一个您已识别的数组。但是，使用以下方法效果更好：

```
<script type="text/javascript">
    document.title = document.getElementsByTagName("H1").item(0).innerHTML;
</script> 
```

请注意在获取元素后添加 .item(0).innerHTML 而不是 [0].innerHTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-17T17:23:18.613

我不知道你是否有这方面的经验，但最近似乎非常流行的另一种替代方法是使用 jQuery。与前面的讨论一样，下面的代码假设您有兴趣获取“H1”标签或“Category-H1”类的第一个实例。这一点很重要，因为除非您以“ID”属性为目标，否则您将获得一组项目。

此代码还假定您已经直接从您的网站或通过引用 CDN 实现了对 jQuery 库的包含。

```
<script type="text/javascript">
    $(document).ready(function () {
        document.title = $("H1")[0].innerText;
    });
</script> 
```

$(document).ready 仅在文档​​对象模型 (DOM) 完成加载之后，并且在浏览器的渲染引擎显示页面之前才会调用它的封闭函数。

函数内部的内容将抓取“H1”标签的第一个实例的内部文本，并将该文本值分配给文档头部的标题标签。

我希望这会增加另一层帮助。

# java - Java如何从类类型中设置向量类型

> ID：13094341
> 
> 赞同：2
> 
> 时间：2012-10-26T21:00:09.287
> 
> 标签：java, vector

我在下面有这段代码（正在反序列化一个类）：

```
....
Type type = field.getGenericType();
if (type instanceof ParameterizedType) {
    ParameterizedType ptype = (ParameterizedType) type;
if(c.getSimpleName().equals("Vector")){
    Class pta = (Class) ptype.getActualTypeArguments()[0];
    Vector<what to put here> v = (Vector)field.get(obj);
    if(v == null){
        v = new Vector<what to put here>();
        field.set(obj, v);
    }
.... 
```

我的问题是如何更改 Vector 以获取某种类型的数据，仅从知道它之前使用的类名（即 pta var）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T21:03:14.960

泛型是在编译时解析的，因此无法按照您列出的方式执行此操作。只需使用`Vector<Object>`或`Vector`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:09:29.403

使用`Vector`代替`Vector<what to put here>`将起作用。无论如何，在运行时使用[通用擦除](http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html)逻辑，并且您的向量将不再具有指定的类型。

关于您与原始类型相关的评论，请注意您甚至无法将原始类型插入`Vector`. 来自[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html)：“Vector 类实现了一个可增长的对象数组”。当您添加基元时，[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)用于将它们转换为它们的对象对应部分。

# android - 在android上保持应用程序状态

> ID：13094346
> 
> 赞同：4
> 
> 时间：2012-10-26T21:00:22.437
> 
> 标签：android

我无法保存我的应用程序的状态/单例。

当应用程序启动时，会显示一个加载屏幕（活动），并使用来自 web 服务调用的值初始化一个单例（请注意，网络访问不能在主线程上运行）。

创建单例后，我打开我的主要活动。请注意，构建布局需要来自单例的值。

现在假设应用程序进入后台并在那里被杀死（例如，因为内存不足）。当应用程序被杀死时，我的单例实例被删除。当我切换回我的应用程序时，它会尝试重新创建主要活动。正如我之前提到的，构建布局需要来自单例的值，因此这会导致 NullPointerException（当我尝试访问单例的成员时，因为它不再存在）。

我可以以某种方式告诉android在应用程序被杀死后开始第一个加载活动吗？如果我可以在重新创建布局之前刷新单例，那就太好了，但这似乎是一个问题，因为网络调用不能在主线程上，因此在刷新完成之前不会阻塞。我假设我可以在所有活动 onStop 中保存单例并在 onCreate 方法中重新创建它，但这似乎有点太不可预测并且可能会导致状态不一致......

另一种方法可能是始终在 onStop 上完成我的活动，但这会导致丢失用户最后在哪个选项卡上等等，即使应用程序没有被杀死，所以这不是一个好的选择。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:39:09.570

为什么不直接使用 SharedPreferences 而不是单例？

每当您想保存一些全局状态时，请将其提交给首选项。每当您想读取全局状态时，请从首选项中读取它。

然后，您根本不必担心应用程序的生命周期，因为无论手机在做什么，您的数据都将始终被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:06:16.853

对于类似的事情，我使用了一个伪单点对象作为[应用程序](http://developer.android.com/reference/android/app/Application.html)类。该对象将在开始时创建，并将在内存中。但请注意，如果其他应用程序需要内存，系统将终止该应用程序。然而，即使所有活动都暂时终止，此对象也是持久的。

要使用它，您需要在您的 android 清单中声明它，如下所示：

```
<application android:label="@string/app_name"
             android:icon="@drawable/icon"
             android:description="@string/desc"
             android:name=".MySingeltonClass"
             ... 
```

这是一个代码示例：

```
public abstract class MySingeltonClass extends Application {
    // ...

    public void informClientOnline() {
        clientOnline=true;
        Log.v(LOG_TAG, "Client is online!");
    }

    public void informClientShutdown() {
        clientOnline=false;
        Log.v(LOG_TAG, "Client is going offline. Waiting for restart...");
        Timer t=new Timer("shutdowntimer", false);
        t.schedule(new TimerTask() {
            @Override
            public void run() {
                if(!clientOnline) {
                    Log.v(LOG_TAG, "Client has not restartet! Shutting down framework.");
                    shutdown();
                    System.exit(0);
                }
            }
        }, 5000);
    }
} 
```

这两个函数的调用方式如下：

```
((MySingeltonClass)getApplicationContext()).informClientOnline(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:14:23.713

[`onSaveInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)在 Activity 被调用时，您可以保存您的 Singleton 。您需要做的就是使其实现[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)（它是 Android 自己的序列化形式），然后您可以将其放入`outState` `Bundle`其中，您可以根据需要在 Activity 中或Activity 中`onSaveInstanceState()`检索它。`onCreate()``onRestoreInstanceState()`

我为您提供了一个示例：

```
public class TestActivity extends Activity {

    private MySingleton singleton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(savedInstanceState.containsKey("singleton")) {
            singleton = savedInstanceState.getParcelable("singleton");
        } else {
            singleton = MySingleton.getInstance(5);
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putParcelable("singleton", singleton);
    }

    public static class MySingleton implements Parcelable {

        private static MySingleton instance;
        private int myData;

        private MySingleton(int data) {
            myData = data;
        }

        public static MySingleton getInstance(int initdata) {
            if(instance == null) {
                instance = new MySingleton(initdata);
            }

            return instance;
        }

        public static final Parcelable.Creator<MySingleton> CREATOR = new Creator<TestActivity.MySingleton>() {

            @Override
            public MySingleton[] newArray(int size) {
                return new MySingleton[size];
            }

            @Override
            public MySingleton createFromParcel(Parcel source) {
                return new MySingleton(source.readInt());
            }
        };

        @Override
        public int describeContents() {
            return 0;
        }

        @Override
        public void writeToParcel(Parcel parcel, int flags) {
            parcel.writeInt(myData);
        }

    }

} 
```

# objective-c - 在 CocoaTouch 中精确测量时间间隔

> ID：13094353
> 
> 赞同：0
> 
> 时间：2012-10-26T21:01:14.083
> 
> 标签：objective-c, cocoa-touch, time, intervals

我有一个类，它必须具有某种时间戳的属性，表示创建此类实例的时刻。然后当有这个类的多个对象时，我需要找到创建这些对象之间的时间间隔。通常的间隔将达到 10 秒，所以我需要至少 1 秒的精度，但像 0.1-0.001 秒这样的精度会好得多。

使用此属性的最佳选择是什么？

据我所知，NSDate 的精度高达 1 秒。我相信我需要一些与 CFTimeInterval 相关的东西。我已经将它用于 CADisplayLink 的视图动画。它为屏幕更新的每个时刻提供了 CFTimeInterval 值，我可以很容易地计算出两个 CFTimeInterval 之间的时间间隔。但是我如何在任何时候为这个 CFTimeInterval 赋值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:38:10.520

正如 Matthias Bauch 的评论所表明的那样，NSDate 将起作用。您也可以只使用 CFTimeIntervals ：

```
CFTimeInterval currentTime = CFAbsoluteTimeGetCurrent(); 
```

请注意，此函数和 NSDate 均基于绝对参考日期（在本例中为 2000 年 1 月 1 日）。这意味着如果在您的应用程序运行时更改系统时钟，则在时钟更改之前获得的值将无法正确地与之后获得的值进行比较。

# ios - 将图片添加到 UIScrollView - 使用数组的滑动切换效果

> ID：13094355
> 
> 赞同：0
> 
> 时间：2012-10-26T21:01:16.007
> 
> 标签：ios, arrays, uiscrollview, slideshow

我在这个网站上看过很多帖子，在谷歌上也看过很多帖子，我坚持我确信这很容易。我是 iOS 新手，我很可能读错了其他帖子。我正在尝试用我自己的逻辑和尝试来学习和编写我自己的代码，所以我的代码看起来与我发现的其他代码有很大不同......这就是为什么它不起作用我确定！

我正在尝试使用从右向左滑动来显示图片，但我希望将下一张图片拉过来并滑入到位，而不是我在[这里](https://stackoverflow.com/questions/13015111/loading-array-from-folder-of-images-xcode)完成的即时切换。基于许多建议，我正在尝试使用 UIScrollView。我无法加载任何内容，并且应用程序在 loadImages 的最后一行崩溃。我已经调试过，但似乎无法弄清楚为什么它没有显示 subView。

这是我的viewDidLoad：

```
 [super viewDidLoad];
// Do any additional setup after loading the view.
i = 0;
//add UIPanGestureRecognizer
UIPanGestureRecognizer *aPan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(loadImages)];
[aPan setMaximumNumberOfTouches:1];
[aPan setMinimumNumberOfTouches:1];
[self.view addGestureRecognizer:aPan];

_PhotoBundle = [[NSBundle mainBundle] pathsForResourcesOfType:@".jpg"inDirectory:@"Otter_Images"];

_PhotoArray = [[NSMutableArray alloc] initWithCapacity:_PhotoBundle.count];
for (NSString* path in _PhotoBundle)
{
    [_PhotoArray addObject:[UIImage imageWithContentsOfFile:path]];
}

[self loadImages]; 
```

这是我的加载图像：

```
-(void)loadImages 
```

{ NSLog(@"在 loadImages");

```
_currentImage = [_PhotoArray objectAtIndex:i];
_nextImage = [_PhotoArray objectAtIndex:i + 1];
_prevImage = [_PhotoArray objectAtIndex:i -1];
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
[scrollView setScrollEnabled:YES];
[scrollView setClipsToBounds:YES];

if (i <= _PhotoArray.count)
{
    [scrollView addSubview:_currentImage]; ////crash!!!!
}
else
{
    _currentImage = [_PhotoArray objectAtIndex:0];
    [scrollView addSubview:_currentImage]; /// Crash!!!!
}

NSLog(@"end of loadImages"); 
```

}

在加载一张图片之前，我已经停止了功能。然后，我将添加幻灯片的功能......我希望我正在接近这个权利。

非常感谢您的帮助！！

编辑：

这是我在 .m 中设置 ImageViews 的界面：

```
@interface ScrollViewViewController ()

@property (nonatomic, retain) NSArray *PhotoBundle;
@property (nonatomic, retain) NSMutableArray *PhotoArray;
@property (nonatomic, retain) UIImageView *currentImage;
@property (nonatomic, retain) UIImageView *nextImage;
@property (nonatomic, retain) UIImageView *prevImage;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:29:08.810

您正在将`UIImage`对象添加为子视图。你不能这样做。您必须`UIImageView`先做一个 - 只有 UIView 子类可以添加为子视图。

制作图像视图很简单——你可以`alloc/initWithImage:`传入你的图像对象。您需要调整每个图像视图的框架，否则它们将相互重叠。

此外，如果您使用滚动视图，则不需要平移手势识别器。滚动视图会为您处理这个问题。

# file - 如何将桌面快捷方式（到他们机器上的本地 html 文件）发送给各种用户并让它工作并保留自定义图标？

> ID：13094356
> 
> 赞同：1
> 
> 时间：2012-10-26T21:01:16.157
> 
> 标签：file, icons, local, desktop-shortcut

我创建了一个简单的应用程序，它是一个生成报价的 HTML 页面。客户希望它在某些机器上而不是在他们的 Intranet 上的任何位置。所以我有一个包含 html 页面和一个 javascript 文件和自定义图标的文件夹。我想向他们发送此文件夹的 zip 文件，其中包含已使用自定义图标创建的快捷方式文件（即在我发送的文件夹内）。

1.  该链接未在文件夹中启动索引文件

2.  快捷方式保留我机器上的图标和文件位置。

3.  为什么我不能将快捷方式目标从“C:\Users\xxxxx\Desktop\Current Projects\app\desktop\FOLDER\index.html”编辑为“FOLDER\index.html”？？？？？？

4.  与 #3 相同，但快捷方式 START IN

为什么我不能只使用 %USERPROFILE%\Desktop\FOLDER\index.html ???

# rabbitmq - RabbitMQ 内存使用量攀升并阻塞调用……为什么？

> ID：13094361
> 
> 赞同：1
> 
> 时间：2012-10-26T21:01:44.550
> 
> 标签：rabbitmq

我正在使用 RabbitMQ 处理应用程序日志（安装 Windows Server 2008）。应用程序向交易所发送消息。我有一个专用队列，可以将消息转发给它。然后，我有一个 Windows 服务连接到该队列，将消息拉出，并将它们持久保存到 DB。我有 n 个客户端实时连接到交换机以锁定流，因此一次有 n 个连接。其中一些客户端可能不会在代码中关闭（）它们的连接。许多客户端具有长时间运行的连接。

当消息从队列中拉出时，它们会自动确认，因此队列中没有任何未确认的消息。然而，我看到兔子的记忆随着时间的推移而增长。它在第一次打开时从 32K 左右开始，然后慢慢上升，直到超过阈值并阻止传入连接。

我有 .NET 和 Java 客户端——但都是自动确认的。

阅读文档时，我没有看到任何关于 Rabbit 如何使用内存的描述——即我不明白为什么内存会随着时间的推移而膨胀。消息被删除和确认，在我看来这意味着 Rabbit 将不再持有它，因此可以释放相关的内存，从而导致稳定的内存使用配置文件。

我看不出在 Rabbit 中摆弄记忆拨盘会有什么帮助——使用率会随着时间的推移而上升：最终我会超过它。

我的猜测是，我的客户做错了什么导致内存随着时间的推移而增长，但我想不出为什么会这样。

```
 why does Rabbit memory usage creep up when no messages are kept on any queues? 

 what coding practices could cause the RabbitMQ server to 
 retain (and grow) memory? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:23:52.187

您是否有可能将其他队列绑定到交易所？检查交换下的 Rabbit 管理页面，单击您的交换，并检查绑定到它的队列。可能是您的一个客户在声明交换时无意中将未命名（系统随机命名）队列绑定到交换，并且消息在那里堆积。

要检查的另一件事是 QoS 设置 - 如果您将 QoS 设置为默认值（无限），那么 Rabbit 将立即向任何客户端发送消息，无论它们已经持有多少消息。这会导致大量的记账，比如哪个客户端在服务器上有哪个消息，以及客户端上有一个大缓冲区。

确保将您的 QoS 预取限制设置为更合理的值，例如 100。这样，如果您有 1M 条消息并且只有 1 个客户端预取为 100，Rabbit 将只向客户端发送 100 条消息并保留其他 999900在服务器上的磁盘上，并且不会使用几乎一样多的内存。

这是我的应用程序内存膨胀的一个重要原因，现在我已经解决了预取问题，一切都很好。

# jquery - 使用 jQuery 更改锚链接

> ID：13094363
> 
> 赞同：0
> 
> 时间：2012-10-26T21:01:50.673
> 
> 标签：jquery, html

我想使用 jQuery 更改某个页面上的锚链接。

如何将锚链接更改为类似`#`或的内容`javascript:void(0)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:03:13.700

要更改一个链接，

```
<a href="http://www.google.com" id="link">One Link</a>

$('#link')[0].href = '#'; 
```

纯javascript：

```
document.getElementById('link').href = '#' 
```

更改多个链接，

```
<a href="http://www.google.com" class="links">One Link</a>
<a href="http://www.yahoo.com" class="links">One Link</a>
<a href="http://www.hotmail.com" class="links">One Link</a>

$('a.links').each(function () {
   this.href = '#';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:03:22.253

```
<!-- HTML -->
<a href="http://stackoverflow.com/" class="mylink">Link</a>

// JavaScript
$("a.mylink").prop("href", "#"); 
```

# sql - 在 postgresql 表中创建插入、更新规则

> ID：13094365
> 
> 赞同：0
> 
> 时间：2012-10-26T21:01:55.220
> 
> 标签：sql, postgresql

我正在尝试创建一个带有插入和更新规则的 postgresql 表，使用户可以自动插入信息或更新数据库表上的现有信息。当我尝试在数据库中运行 SQL 查询以创建表时，我不断收到此错误。我尝试按照 PostgreSQL 9.1 中的文档步骤进行操作。它不断给我一个主键的表达式错误，说明我需要重新编写它。请有人可以看看这个脚本并帮助我。感谢您最宝贵的贡献！

> 这是我的 SQL 脚本

```
 CREATE TABLE fieldtally1
  (fieldtally1_id serial NOT NULL,
  pipeno character varying,
  wthick real,
  heatno1 character varying(32),
  pipeno2 character varying(32),
  heatno2 character varying(32),
  Djointno character varying(32),
  ContractorNo character varying(32),
  measuredlength double precision,
  serialno character varying(32),
  CoatingType character varying(32),
  coatingno character varying(32),
  mnfcno character varying(32),
  FactoryLength double precision,
  pipeod_in numeric,
  pipeod_mm numeric,
  pipeweight double precision,
  pipegrade numeric,
  loadtally numeric,
  dateweilded date,
  datereceived date,
  dataenteredby character varying(50),
  deliveryno character varying(50),
  manufacturer character varying(50),
  Remarks character varying(100),
  ManualUser character varying(100),
  log_when timestamp,
  CONSTRAINT fieldtally1_pkey PRIMARY KEY (fieldtally1_id, pipeno)
  );
  Create rule fieldtally1_ins as on INSERT to fieldtally1
  Do Instead
  Insert into fieldtally1 values (
                New.pipeno,
                New.wthick,
                New.heatno1,
                New.pipeno2,
                New.heatno2,
                New.Djointno,
                New.ContractorNo,
                New.measuredlength,
                New.serialno,
                New.coatingtype,
                New.coatingno,
                New.mnfcno,
                New.factorylength,
                New.pipeod_in,
                New.pipeod_mm,
                New.pipeweight,
                New.pipegrade,
                New.ManualUser, 
                current_timestamp
                );

CREATE RULE fieldtally1_upd AS ON UPDATE TO fieldtally1
    DO INSTEAD
    UPDATE fieldtally1
    SET PIPENO = New.pipeno,
    wthick = New.wthick,
    heatno1 = New.heatno1,
    pipeno2 = New.pipeno2,
    heatno2 = New.heatno2,
    Djointno = New.Djointno,
    ContractorNo = New.ContractorNo,
    measuredlength = New.measuredlength,
    New.serialno = New.serialno,
    coatingtype = New.coatingtype,
    coatingno = New.coatingno,
    mnfcno = New.mnfcno,
    factorylength = New.factorylength,
    pipeod_in = New.pipeod_in,
    pipeod_mm = New.pipeod_mm,
    pipeweight = New.pipeweight,
    pipegrade =  New.pipegrade,
    ManualUser = New.ManualUser 
    WHERE pipeno = OLD.pipeno;      

CREATE RULE fieldtally1_del AS ON DELETE TO fieldtally1
    DO INSTEAD
    DELETE FROM fieldtally1
     WHERE pipeno = OLD.pipeno; 
```

> 这是我运行脚本时遇到的错误
> 
> > 注意：CREATE TABLE 将为串行列“fieldtally1.fieldtally1_id”创建隐式序列“fieldtally1_fieldtally1_id_seq”注意：CREATE TABLE / PRIMARY KEY 将为表“fieldtally1”创建隐式索引“fieldtally1_pkey”错误：列“fieldtally1_id”是整数类型，但表达式是字符类型不同的第 34 行：New.pipeno，^ 提示：您将需要重写或强制转换表达式。
> 
> ***********错误******* **********
> 
>  *****错误：列“fieldtally1_id”是整数类型，但表达式是字符类型不同 SQL 状态：42804 提示：您需要重写或强制转换表达式。字符：1024*****

 ****** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:15:04.490

如果您的插入与列不完全匹配，则需要指定它们。您的更新包括“新”。在序列号的左侧：这适用于[http://sqlfiddle.com/#!1/c9ef3/1/0](http://sqlfiddle.com/#!1/c9ef3/1/0)

```
CREATE TABLE fieldtally
(fieldtally_id serial NOT NULL primary key,
  pipeno character varying,
  wthick real,
  heatno1 character varying(32),
  pipeno2 character varying(32),
  heatno2 character varying(32),
  Djointno character varying(32),
  ContractorNo character varying(32),
  measuredlength double precision,
  serialno character varying(32),
  CoatingType character varying(32),
  coatingno character varying(32),
  mnfcno character varying(32),
  FactoryLength double precision,
  pipeod_in numeric,
  pipeod_mm numeric,
  pipeweight double precision,
  pipegrade numeric,
  loadtally numeric,
  dateweilded date,
  datereceived date,
  dataenteredby character varying(50),
  deliveryno character varying(50),
  manufacturer character varying(50),
  Remarks character varying(100),
  ManualUser text,
  log_when timestamp
  );
  Create rule fieldtally_ins as on INSERT to fieldtally
  Do Instead
  Insert into fieldtally (pipeno, wthick, heatno1, pipeno2, heatno2, djointno, contractorno, measuredlength, serialno, coatingtype, coatingno,
                         mnfcno, factorylength, pipeod_in, pipeod_mm, pipeweight, pipegrade, manualuser, log_when) values (
                New.pipeno,
                New.wthick,
                New.heatno1,
                New.pipeno2,
                New.heatno2,
                New.Djointno,
                New.ContractorNo,
                New.measuredlength,
                New.serialno,
                New.coatingtype,
                New.coatingno,
                New.mnfcno,
                New.factorylength,
                New.pipeod_in,
                New.pipeod_mm,
                New.pipeweight,
                New.pipegrade,
                New.ManualUser, 
                current_timestamp
                );

CREATE RULE fieldtally_upd AS ON UPDATE TO fieldtally
    DO INSTEAD
    UPDATE fieldtally
    SET PIPENO = New.pipeno,
    wthick = New.wthick,
    heatno1 = New.heatno1,
    pipeno2 = New.pipeno2,
    heatno2 = New.heatno2,
    Djointno = New.Djointno,
    ContractorNo = New.ContractorNo,
    measuredlength = New.measuredlength,
    serialno = New.serialno,
    coatingtype = New.coatingtype,
    coatingno = New.coatingno,
    mnfcno = New.mnfcno,
    factorylength = New.factorylength,
    pipeod_in = New.pipeod_in,
    pipeod_mm = New.pipeod_mm,
    pipeweight = New.pipeweight,
    pipegrade =  New.pipegrade,
    ManualUser = New.ManualUser 
    WHERE pipeno = OLD.pipeno;      

CREATE RULE fieldtally_del AS ON DELETE TO fieldtally
    DO INSTEAD
    DELETE FROM fieldtally
     WHERE pipeno = OLD.pipeno; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-26T21:10:33.563

用户 GO - 所以 sql 在最后一次执行之前不会检查验证

```
CREATE TABLE fieldtally
    (fieldtally_id serial NOT NULL primary key,
      pipeno character varying,
      wthick real,
      heatno1 character varying(32),
      pipeno2 character varying(32),
      heatno2 character varying(32),
      Djointno character varying(32),
      ContractorNo character varying(32),
      measuredlength double precision,
      serialno character varying(32),
      CoatingType character varying(32),
      coatingno character varying(32),
      mnfcno character varying(32),
      FactoryLength double precision,
      pipeod_in numeric,
      pipeod_mm numeric,
      pipeweight double precision,
      pipegrade numeric,
      loadtally numeric,
      dateweilded date,
      datereceived date,
      dataenteredby character varying(50),
      deliveryno character varying(50),
      manufacturer character varying(50),
      Remarks character varying(100),
      ManualUser text,
      log_when timestamp
      );
GO
      Create rule fieldtally_ins as on INSERT to fieldtally
      Do Instead
      Insert into fieldtally values (
                    New.pipeno,
                    New.wthick,
                    New.heatno1,
                    New.pipeno2,
                    New.heatno2,
                    New.Djointno,
                    New.ContractorNo,
                    New.measuredlength,
                    New.serialno,
                    New.coatingtype,
                    New.coatingno,
                    New.mnfcno,
                    New.factorylength,
                    New.pipeod_in,
                    New.pipeod_mm,
                    New.pipeweight,
                    New.pipegrade,
                    New.ManualUser, 
                    current_timestamp
                    );
GO
        CREATE RULE fieldtally_upd AS ON UPDATE TO fieldtally
            DO INSTEAD
            UPDATE fieldtally
            SET PIPENO = New.pipeno,
            wthick = New.wthick,
            heatno1 = New.heatno1,
            pipeno2 = New.pipeno2,
            heatno2 = New.heatno2,
            Djointno = New.Djointno,
            ContractorNo = New.ContractorNo,
            measuredlength = New.measuredlength,
            New.serialno = New.serialno,
            coatingtype = New.coatingtype,
            coatingno = New.coatingno,
            mnfcno = New.mnfcno,
            factorylength = New.factorylength,
            pipeod_in = New.pipeod_in,
            pipeod_mm = New.pipeod_mm,
            pipeweight = New.pipeweight,
            pipegrade =  New.pipegrade,
            ManualUser = New.ManualUser 
            WHERE pipeno = OLD.pipeno;      
    GO
        CREATE RULE fieldtally_del AS ON DELETE TO fieldtally
            DO INSTEAD
            DELETE FROM fieldtally
             WHERE pipeno = OLD.pipeno; 
```*****

# javascript - for循环的范围问题

> ID：13094367
> 
> 赞同：1
> 
> 时间：2012-10-26T21:02:01.403
> 
> 标签：javascript, scope

这对我来说真的不是问题。我只想知道如何正确地做到这一点，而不是解决方法。好吧，如果我们使用`for()`和一些延迟事件，则只考虑最后一个值。

**测试**：http: [//jsfiddle.net/39dQV/](http://jsfiddle.net/39dQV/)

```
// Using only i (does not work)
for(var i=0; i<10; i++) {
    setTimeout(function() {
        test1.textContent = i;
    }, i * 1000);
}

// Private scope to i (does not work either)
for(var i=0; i<10; i++) {
    var x = i;

    setTimeout(function() {
        test2.textContent = x;
    }, i * 1000);
}

// Callback scope (workaround)
function set_textContent(i) {
    setTimeout(function() {
        test3.textContent = i;
    }, i * 1000);
};

for(var i=0; i<10; i++) {
    set_textContent(i);
}​ 
```

我需要做什么才能使其正常工作，即：考虑 的当前值`i`，而不是按时间更改的最后一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:11:40.980

您的解决方案并不是真正的“解决方法”，它是最好的方法：

```
for(var i=0; i<10; i++) {
    setTimeout(function() {
        test1.textContent = i;
    }, i * 1000);
} 
```

不能工作！i 在本地范围内，在执行函数时不再定义。

```
for(var i=0; i<10; i++) {
    var x = i;

    setTimeout(function() {
        test2.textContent = x;
    }, i * 1000);
} 
```

同样的情况，x 在循环中是本地的。

您需要一个自己的变量范围。定义这种范围的唯一方法是将超时函数的定义封装在闭包或函数中，就像您在第三种方式中所做的那样。

我会这样写：

```
for(var i=0; i<10; i++) {
    ( function( i ) {
        setTimeout(function() {
            test1.textContent = i;
        }, i * 1000);
    } ( i ) };
} 
```

闭包定义了它自己的范围，所以 i 的值被存储了。

欲了解更深入的信息，请参阅：[http](http://www.javascriptenlightenment.com/) ://www.javascriptenlightenment.com/ （我喜欢它）

# wordpress - Magento Fishpig Wordpress 模块，与产品相关的博客文章

> ID：13094368
> 
> 赞同：1
> 
> 时间：2012-10-26T21:02:03.300
> 
> 标签：wordpress, magento, fishpig

在 Magento 管理部分，当我尝试将产品与 wordpress 帖子相关联时，会显示前端页面而不是带有 wordpress 帖子的 gridview，我使用的是完全集成和数据库分离。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:49:03.807

我遇到过同样的问题。这是由于 Wordpress 和 Magento 在两个独立的数据库中造成的。我通过在与 Magento 相同的数据库中重新安装 Wordpress 然后重新安装扩展来修复它。（请注意，之后您必须更改扩展设置。）

# vb.net - LINQ vb.net 不是 IsDBNull

> ID：13094369
> 
> 赞同：0
> 
> 时间：2012-10-26T21:02:06.470
> 
> 标签：vb.net, linq, dbnull

我有以下查询应该过滤掉给定组字段中的空值，但不幸的是，当源数据集在该字段中包含空值时返回一个空对象：

```
Dim SelectQuery = From q1 In loadedData.data.AsEnumerable
                  Order By q1(aGroupField)
                  Where Not IsDBNull(q1(aGroupField)) 
                        AndAlso q1(aGroupField) <> ""
                  Select New With {.groupField = q1(aGroupField)} 
```

# c++ - 从稀疏矩阵中提取一个块作为另一个稀疏矩阵

> ID：13094372
> 
> 赞同：5
> 
> 时间：2012-10-26T21:02:13.730
> 
> 标签：c++, matrix, sparse-matrix, eigen

如何从`Eigen::SparseMatrix<double>`. 似乎没有我用于密集的方法。

```
‘class Eigen::SparseMatrix<double>’ has no member named ‘topLeftCorner’
‘class Eigen::SparseMatrix<double>’ has no member named ‘block’ 
```

有一种方法可以将块提取为`Eigen::SparseMatrix<double>`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:50:18.220

我做了这个函数来从一个`Eigen::SparseMatrix<double,ColMaior>`

```
typedef Triplet<double> Tri;
SparseMatrix<double> sparseBlock(SparseMatrix<double,ColMajor> M,
        int ibegin, int jbegin, int icount, int jcount){
        //only for ColMajor Sparse Matrix
    assert(ibegin+icount <= M.rows());
    assert(jbegin+jcount <= M.cols());
    int Mj,Mi,i,j,currOuterIndex,nextOuterIndex;
    vector<Tri> tripletList;
    tripletList.reserve(M.nonZeros());

    for(j=0; j<jcount; j++){
        Mj=j+jbegin;
        currOuterIndex = M.outerIndexPtr()[Mj];
        nextOuterIndex = M.outerIndexPtr()[Mj+1];

        for(int a = currOuterIndex; a<nextOuterIndex; a++){
            Mi=M.innerIndexPtr()[a];

            if(Mi < ibegin) continue;
            if(Mi >= ibegin + icount) break;

            i=Mi-ibegin;    
            tripletList.push_back(Tri(i,j,M.valuePtr()[a]));
        }
    }
    SparseMatrix<double> matS(icount,jcount);
    matS.setFromTriplets(tripletList.begin(), tripletList.end());
    return matS;
} 
```

如果子矩阵位于四个角落之一，则这些：

```
SparseMatrix<double> sparseTopLeftBlock(SparseMatrix<double> M,
        int icount, int jcount){
    return sparseBlock(M,0,0,icount,jcount);
}
SparseMatrix<double> sparseTopRightBlock(SparseMatrix<double> M,
        int icount, int jcount){
    return sparseBlock(M,0,M.cols()-jcount,icount,jcount);
}
SparseMatrix<double> sparseBottomLeftBlock(SparseMatrix<double> M,
        int icount, int jcount){
    return sparseBlock(M,M.rows()-icount,0,icount,jcount);
}
SparseMatrix<double> sparseBottomRightBlock(SparseMatrix<double> M,
        int icount, int jcount){
    return sparseBlock(M,M.rows()-icount,M.cols()-jcount,icount,jcount);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-29T14:25:35.533

这现在在`Eigen 3.2.2` [Docs](http://eigen.tuxfamily.org/dox/group__SparseQuickRefPage.html)中得到支持（尽管早期版本可能也支持它）。

```
#include <iostream>
#include <Eigen/Dense>
#include <Eigen/Sparse>

using namespace Eigen;

int main()
{
  MatrixXd silly(6, 3);

  silly << 0, 1, 2,
           0, 3, 0,
           2, 0, 0,
           3, 2, 1,
           0, 1, 0,
           2, 0, 0;

  SparseMatrix<double, RowMajor> sparse_silly = silly.sparseView();

  std::cout <<"Whole Matrix" << std::endl;
  std::cout << sparse_silly << std::endl;

  std::cout << "block of matrix" << std::endl;
  std::cout << sparse_silly.block(1,1,3,2) << std::endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T16:28:30.793

[稀疏矩阵中](http://eigen.tuxfamily.org/dox/group__SparseQuickRefPage.html)的子矩阵有非常稀疏的支持（抱歉，没有双关语）。实际上，您只能访问一组连续的行为主的行和列的主列。其原因不是矩阵可能为空，而是索引方案比密集矩阵复杂一些。使用密集矩阵，您只需要一个额外的步幅数即可支持子矩阵支持。

# assembly - 组装中的蛇，使用什么数据结构？

> ID：13094373
> 
> 赞同：-5
> 
> 时间：2012-10-26T21:02:14.713
> 
> 标签：assembly, data-structures, nibble

我对组装完全陌生，不管你信不信，我们的第一个任务是在组装中创建蛇。我应该如何存放蛇？我应该将它放在堆栈中，还是应该将它放入某个寄存器中？我已经对这种“可怕的”语言进行了大约 3 天的研究，但无法找到一个好的开始方式。我可能会在 c++ 中使用某种链接列表，但不幸的是这不是 c++。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-03T07:35:25.790

**可以使用一对 x,y 坐标来跟踪蛇的头部。当然，您需要头部的当前方向。** （尾巴需要的不仅仅是 x,y 对，可能 x,y 对的循环缓冲区是最好的选择。那么您实际上不需要将尾巴 x,y 与历史缓冲区分开。）

**正如@Daniel 的回答所解释的那样，当头部移动时，查看您将要绘制的下一个像素会告诉您蛇吃什么：什么都没有，苹果、墙或它自己。**

（如果您对视频 RAM 具有有效的读取访问权限，则可以简单地读取像素而不是保留影子板阵列。但是大多数现代系统*没有*有效的视频 RAM 读取访问权限；在典型的 x86 VGA 内存上，无法通过写入缓存-结合。但是如果你假装你正在为一个真正的 8086 写，VGA RAM 在 ISA 总线的另一端，所以这也很慢。但是 8086 没有任何缓存。一些甚至更早的系统可能有视频 RAM主内存的一部分，IDK。）

另一种选择是搜索苹果方块和蛇方块的列表，但这比检查一个数组条目要多得多。编写游戏（或其他实时软件）的一个关键因素是对*最坏情况的*性能设置严格的上限。当有很多带有蛇的方格，并且步时间很短（蛇移动速度很快）时，您不希望游戏变得笨拙并且由于搜索时间过长而使某些步长比其他步长。那很快就无法播放了。

**`rows * cols`因此，您可能需要一个字节数组（您对其进行 2D 索引），您可以在其中存储诸如`0`空、`1`墙等**代码。如果您使用调色板视频模式，您可以使用与视频 RAM 中的像素相同的代码，如果您直接在 VRAM 中绘图，或者使用现代视频 API、屏幕缓冲区或 OpenGL 纹理。否则，您的状态数组中只有代码，屏幕缓冲区中只有 24 位或 32 位像素。

为了简化索引，您可以使存储格式使用 2 行步长的幂，即使板宽不是。因此，每行的末尾可能会有填充列。但这可能会浪费大量内存，通常您只需要相对于当前位置进行索引（例如，下一列左/右的 +-1 字节，或 +-row_stride 以使下一行向下/向上。）

头/尾 x,y 坐标*可以*只是指向平板数组的单个索引或指针，但我们还需要实际的 x,y 坐标来单独绘制图形。

* * *

**在每一步之后，您还需要在尾部清除一个正方形**（除非蛇仍在从最近的苹果中生长；您需要一个向下计数器来计算有多少未决的生长）。我们知道在哪里将屏幕画回黑色，因为我们有尾巴 x,y。

**但是我们如何*更新*尾部 x,y 以便*下一步*将遵循头部所走的实际路径？** 您可能希望通过查看尾巴周围的方块，您可以找出哪个是下一个最古老的。我们可以通过一个例子来证明情况并非如此，两条不同的轨迹导致相同的棋盘位置具有相同的 Head 和 Tail。玩家可以通过水平或垂直之字形来创建此棋盘布局。

```
 H123        H167          H is the head, T is the tail
    654         258            snake segments are 1..8 in order of moves.
    78T         34T 
```

**如果没有 1..8 的历史，所有的方格都只是“蛇”，没有算法可以明确地决定尾部在擦除后应该向哪个方向移动**。（即使是一个可以查看整个电路板的慢速算法。）

对于仅查看尾部周围的 8 个方格的合理算法，还有其他模棱两可的情况，例如

```
 54               H12          # defeating a "local" algorithm
    T321H              34
                       T5 
```

**所以我们必须以某种方式记录历史。** 我认为最好和最简单的选择是：

# 使用[循环缓冲区作为](https://en.wikipedia.org/wiki/Circular_buffer)(x,y) 对的队列来记录蛇的路径

您的蛇将在内存地址中爬行，与蛇在屏幕上爬行的方式非常相似，因此这种数据结构导致简单的实现是一种适当的而不是巧合（每一步要做的工作很少。）

这个缓冲区的大小将设置我们可以支持的最大蛇长度，此时我们正在重用缓冲区条目来在读取尾部*后立即记录头部。*您可以使其大于行 * 列，因此如果您愿意，游戏不会施加实际限制。

**这可能是许多真正的经典贪吃蛇游戏都具有最大贪吃蛇长度的技术原因**。（除了游戏方面的原因。）由于您的游戏是唯一在 CPU 上运行的东西，因此没有理由不总是使用相同大小的循环缓冲区，即静态分配尽可能大的内存。然后，您将永远不会因为在成长或其他任何事情后复制游戏而结结巴巴。

您可以编写类似于此 C 的 asm：

```
typedef struct xy {uint8_t x, y;} xy_t;
static const unsigned max_snakelen = 512;
struct xy snakepath[max_snakelen];
// uint16_t []  board array offsets is great if we don't also need x,y for graphics

enum board_entry { SQUARE_EMPTY=0, SQUARE_APPLE, SQUARE_SNAKE, SQUARE_WALL };
static const unsigned rows = 40;
static const unsigned cols = 80;   // including walls
board_entry board[rows * cols];  // we'll do 2D indexing manually because asm has to

static inline unsigned dir_to_board_byte_offset(enum cur_direction) { ... }
 // top bit maps to +- rows, or bottom bit to +- 1
static inline xy_t dir_to_xy_offset(enum directions  cur_direction) { ... }
 // map 0..3 to  {+1, 0}, {-1,0}, {0,+1}, {0,-1} in some order.

void step(enum directions cur_direction)
{
    static unsigned tailidx = 0;  // maybe kept in a register
    static unsigned headidx = 5;  // and arrange for the initial snake to be in the buffer somehow

    if (!growth)    // tail stays still while snake grows
        --growth;
        xy_t tail = snakepath[tailidx++];      // movzx edx, byte [snakepath + rbx*2] // movzx ecx, byte [snakepath + rbx*2 + 1]
        tailidx &= max_snakelen - 1;   // wrap the circular buffer idx.  AND ebx, MAX_SNAKELEN - 1

        board[tail.y * cols + tail.x] = SQUARE_EMPTY;   // imul stuff
        // and update graphics
    }

    // Most of the registers used for the above stuff are dead now, and can be reused below

    // Tail segments disappear *before* the head moves: snake can be head-to-tail
    // and go full Ouroboros without crashing.

    xy_t headxy = snakepath[headidx++];  // or track head separately, maybe in a reg so we can more quickly  like our function arg.
    headidx &= max_snakelen - 1;

    headxy += dir_to_xy_offset(cur_direction);  // maybe use a 16-bit add to do both components in parallel, except that `-1` will carry into the upper element.  So that only works with SIMD `paddb` or something. 
    // pretend that's a C++ overload and do the component adds separately

    enum board_entry headtype = board[headxy.y * cols + headxy.x];
    if (headtype != SQUARE_EMPTY) {
       apple or death;
    }

    board[headxy.y * cols + headxy.x] = SQUARE_SNAKE;
 // ADD NEW HEAD to circular buffer
    snakepath[headidx] = headxy;                   // mov [snakepath + 2*rbx], ax
    // and draw graphics for head, using its x,y.
} 
```

这只是为了给你一个大致的想法，它非常笨重而且不是很好的 C 风格。（并且不*打算*这样做。）我知道并非所有内容都已宣布。在等待按键和计时器事件的事件循环的 asm 版本中，您在寄存器中保留多少状态取决于您。您调用的函数必须保存/恢复 regs，但是如果您使用标准调用约定并且无论如何都这样做，那么让最外层循环将其状态保持在 regs 中并没有什么害处。

乘法过去很慢，因此您可以考虑在蛇结构中保留 x、y*和*一维数组索引或实际指针。但是现代 CPU 通常具有快速乘法器。（就像 3 周期延迟完全流水线，在 Intel 自 Core 2 左右，而非流水线 8086 上超过 100）。

特别是在 16 位机器上，在多条指令中嵌入绝对地址不会占用很多代码字节。它在 32 位代码中变得更糟。x86-64 可以在 Linux 上的位置相关代码中使用 32 位绝对地址，但仍然允许`[snakepath + rbx*2]`像

根据您的目标 ISA，您可能会在寄存器中保留更多或更少的指针。

* * *

**另一种方法是记录玩家每次转身的时间**。但在最坏的情况下，玩家每步转一次，所以你仍然需要与蛇的长度一样多的缓冲区条目。（或者如果你有更少，你有*非常*不受欢迎的游戏玩法：玩家可能意外地无法转身，因为他们过去转身太多，并且令人沮丧地死去。）

每个条目至少需要与 x,y 对一样多的空间，并且需要更多的工作来解码。（在每一个转弯处只记录一对 x,y 可以提供足够的信息来通过查看尾部 x,y 与最后一个转弯来重建路径。）

**但是，前一个方向 + 长度实际上可能更紧凑：每条记录 1 个字节**。如果将位打包到位域中，方向需要 2 位，我们可以选择尽早创建新条目以将长度保持在 6 位，即使板比 63 = 2 ⁶ -1 方格更宽或更高。所以每个条目可以很容易地成为 1 个字节。`dir = x & 3`（用和解码`len = x >> 2`）。

您可以通过减少尾部条目的长度直到达到 0 来使用这种 dir+len 格式（这意味着尾部到了转弯处，并且应该开始查看下一个缓冲区条目）。为了提高效率，您将保持当前正在处理的文件未打包，或者您将使用`sub byte [rsi], 4`并检查进位（以检测当您递减时长度是否已经为零，并使其包装）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-02T18:47:20.647

我希望 6 年后不再是问题，但就我而言，我基于像素。例如，有一个像素被指定为蛇的头部。我总是保存它的位置（x 轴和 y 轴），并在循环中检查是否在蛇的方向上有任何绘制的像素：

*   如果它是黑色的——我什么也没做，继续移动蛇。黑色是背景。

*   如果它是红色的——我知道这条蛇会吃掉一个苹果。

*   如果它是蓝色的，我就知道蛇要撞墙了，以此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T07:22:01.273

> 我应该如何存放蛇？我应该将它放在堆栈中，还是应该将它放入某个寄存器中？

假设您谈论的是 Snake 动画/游戏，答案可能都不是。您很可能使用二维数组来表示“屏幕”上的细胞，并将蛇的身体表示为给定“颜色”的细胞。

我可能会首先找出用 C 或 C++ 实现代码的**最简单**方法……而不使用任何数据结构库……然后在汇编程序中重新编码算法。

# c++ - 如果我想将 tr1 无序映射用于自定义类型，如何避免在我的标头中包含哈希函数 impl？

> ID：13094377
> 
> 赞同：1
> 
> 时间：2012-10-26T21:02:25.717
> 
> 标签：c++, tr1

我需要散列四种不同事物的组合，包括 20 个字节，因此我定义了这个：

```
struct holder
{
  char a;
  uint16_t b;
  uint64_t c;
  char d[9];
} __attribute((__packed__)); 
```

然后我可以加载上述之一并将其传递给哈希函数。所以我希望我的班级`Foo`有一个`std::tr1::unordered_map<holder, int> map`. 但是为了在 的头文件中声明它`Foo`，我需要在我的类型中包含 的定义、`holder`模板特化，并因此包含完整的哈希函数。有没有办法不在标题中包含所有这些代码，但仍然给我的班级这个哈希图？`std::tr1``hash`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:05:28.047

只需在头文件中*声明*函数，然后在 cpp 文件中*定义它。*

这看起来像：

```
// Header
namespace std { namespace tr1

// Define specialization
template<>
struct hash<holder>: unary_function<holder, size_t> {
    // Declare member
    size_t operator()(holder const&) const;
};

} }

// Source

// Define member
std::size_t std::tr1::hash<holder>::operator()(holder const&) const
{ /* implementation */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:16:51.967

holder 的 hash 特化可以在你的 header 中，但实现不是必须的。为了以一种易于理解的方式执行此操作，它（专业化）可以简单地调用您在 cpp 文件中定义的持有人的沼泽标准函数。

# linux - 在目录中使用 awk 拆分文件夹名称

> ID：13094380
> 
> 赞同：0
> 
> 时间：2012-10-26T21:02:29.493
> 
> 标签：linux, bash, awk

使用此模板的工作目录中有一些目录

```
cas-2-32
sat-4-64  
... 
```

我想遍历目录名称并获取文件夹名称的第二部分和第三部分。我写了这个脚本。身体显示我想做什么。但是 awk 命令似乎是错误的

```
#!/bin/bash
for file in `ls`; do
  if [  -d $file ]; then 
    arg2=`awk -F "-" '{print $2}' $file`
    echo $arg2
    arg3=`awk -F "-" '{print $3}' $file`
    echo $arg3
  fi
done 
```

但它说

```
 awk: cmd. line:1: fatal: cannot open file `cas-2-32' for reading (Invalid argument) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:08:24.010

awk 需要一个文件名作为输入。既然你说`cas-2-32`etc 是目录，awk 出于同样的原因失败。

使用 echo 将目录名称提供给 awk：

```
#!/bin/bash
for file in `ls`; do
  if [  -d $file ]; then 
    arg2=$(echo $file | awk -F "-" '{print $2}')
    echo $arg2
    arg3=$(echo $file | awk -F "-" '{print $3}')
    echo $arg3
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T00:03:44.317

简单命令：ls | awk '{ FS="-"; print $2" "$3 }' 如果你想要每一行中的值，只需在 awk 的打印中添加 "\n" 而不是空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T02:55:01.137

像这样执行时

```
awk -F "-" '{print $2}' $file 
```

`awk`将`$file`'s 的值视为要解析的文件，而不是解析`$file`'s 的值本身。

最小的解决方法是使用一个[here-string](http://www.gnu.org/software/bash/manual/bashref.html#Here-Strings)，它可以将变量的值输入到命令的标准输入中：

```
awk -F "-" '{print $2}' <<< $file 
```

* * *

`ls`顺便说一句，如果您只想要当前目录中的文件列表，则不需要，请`*`改用，即

```
for file in *; do 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T05:05:37.567

单程：

```
#!/bin/bash
for file in *; do
  if [ -d $file ]; then
    tmp="${file#*-}"
    arg2="${tmp%-*}"
    arg3="${tmp#*-}"
    echo "$arg2"
    echo "$arg3"
  fi
done 
```

另一个：

```
#!/bin/bash
IFS="-"
for file in *; do
  if [ -d $file ]; then
    set -- $file
    arg2="$2"
    arg3="$3"
    echo "$arg2"
    echo "$arg3"
  fi
done 
```

# c++ - 使用 c 预处理器自动生成函数转发器

> ID：13094383
> 
> 赞同：1
> 
> 时间：2012-10-26T21:02:38.010
> 
> 标签：c++, c, c-preprocessor

我需要编写一个宏来自动生成一个将所有参数转发给另一个（成员）函数的函数。

如果您需要知道我为什么需要它，我需要简化编写 JNI 胶水。我将省略我需要以这种方式完成的其他原因，我只是提到我不能使用 boost（虽然，我可能会撕掉所需的部分并将从 boost 转换为我自己的宏）；我还检查了其他一些库（jace 等），但没有找到任何适合我需要的东西。

简而言之，这是一个 JNI 函数的示例：

```
class TestClass
{
    void nativeTest(JNIEnv *, jobject, jint, jboolean)
    {
        ...
    }

    static TestClass* getPeer(JNIEnv *, jobject obj)
    {
        ...
    }
}

JNIEXPORT void JNICALL Java_com_noname_media_TestClass_nativeTest(
    JNIEnv *env, jobject obj, jint i, jboolean b
)
{
    TestClass* peer = TestClass::getPeer(env, obj, i, b);
    if(peer)
        return peer->nativeTest(env, obj, i, b);
    return;
} 
```

现在，我想编写一些`JNI_FUNCTION`宏来自动生成所有 Java_com_noname_media_TestClass_nativeTest。经过一番思考，我想我可以这样做：

```
#define JNI_FUNCTION(functionName, functionReturn, functionArgs) \
JNIEXPORT functionReturn JNICALL                                 \
  Java_com_noname_media_TestClass##functionName(**WTF**)         \
{
        TestClass* peer = TestClass::getPeer(**WTF**);
        if(peer)
            return peer->functionName(**WTF**);
        return;
} 
```

然后，要使用`JNI_FUNCTION`我可以做这样的事情：

```
JNI_FUNCTION(nativeTest, void, (JNIEnv *, jobject, jint, jboolean)); 
```

问题是我不知道如何“破解”函数参数，因为我需要为列表中的每个条目添加自动编号的参数名称`functionArgs`。

其他陷阱：返回类型可以是某种类型或 void，但对于 void 情况，我可能会分开`JNI_VOID_FUNCTION`，以防使用常规方式无法轻松完成。在我的例子中，所有 jni 函数在列表中总是至少有两个 args `functionArgs`，例如它不能是空列表`()`。我不必将 functionArgs 用作包含多个参数的单个参数，我也可以这样：

```
#define JNI_FUNCTION(functionName, functionReturn, ...) 
```

无论如何工作......也许我需要某种宏来允许我在某个位置提取一些宏，例如 ARG_1(...) 等，但到目前为止我无法将它全部包装在我的大脑中如何做到这一点.

PS。我记得一些关于使用 c 预处理器的超酷示例，在 SO 中有很好的解释，但现在找不到它们，如果你把它加了书签，也许我只需要查看它们。

**编辑：** 基本上，诀窍是为每个参数添加自动编号的名称，然后将它们按原样传递给成员函数。我需要这样做的原因是因为除此之外，我还使用预处理器完成了其他一些自动生成。简而言之，这个宏实际上会用在一组类似的宏中（有点像在 ATL/WTL 中）：

```
JNI_TABLE_BEGIN(ClassName)
  JNI_FUNCTION(native1, void, (JNIEnv *, jobject, jint))
  JNI_FUNCTION(native2, void, (JNIEnv *, jobject, jint))
  JNI_FUNCTION(native3, jint, (JNIEnv *, jobject))
JNI_TABLE_END() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:09:59.430

这是使用 Boost.Preprocessor [Sequences](http://www.boost.org/doc/libs/1_51_0/libs/preprocessor/doc/data/sequences.html)的解决方案：

```
#include <boost/preprocessor/cat.hpp>
#include <boost/preprocessor/seq/size.hpp>
#include <boost/preprocessor/seq/enum.hpp>
#include <boost/preprocessor/list/append.hpp>
#include <boost/preprocessor/seq/for_each_i.hpp>
#include <boost/preprocessor/control/expr_if.hpp>
#include <boost/preprocessor/comparison/equal.hpp>
#include <boost/preprocessor/facilities/expand.hpp>

#define RET_TYPE_void 1)(1
#define IS_NOT_VOID(type) BOOST_PP_EQUAL(BOOST_PP_SEQ_SIZE((BOOST_PP_CAT(RET_TYPE_,type))),1)

#define JNI_PARAMS(r, data, i, elem) (elem p##i)
#define JNI_ARGS_PASS(r, data, i, elem) (p##i)

#define JNI_FUNCTION(functionName, functionReturn, PARAMS ) \
JNIEXPORT functionReturn JNICALL \
    Java_com_noname_media_TestClass##functionName(BOOST_PP_SEQ_ENUM(BOOST_PP_SEQ_FOR_EACH_I(JNI_PARAMS,_,PARAMS)))  \
{ \
    TestClass* peer = TestClass::getPeer(BOOST_PP_SEQ_ENUM(BOOST_PP_SEQ_FOR_EACH_I(JNI_ARGS_PASS,_,PARAMS))); \
    if(peer) \
        BOOST_PP_EXPR_IF(IS_NOT_VOID(functionReturn),return) peer->functionName(BOOST_PP_SEQ_ENUM(BOOST_PP_SEQ_FOR_EACH_I(JNI_ARGS_PASS,_,PARAMS))); \
    BOOST_PP_EXPR_IF(IS_NOT_VOID(functionReturn),return functionReturn();) \
} \
/**/

JNI_FUNCTION(nativeTest, void, (jobject)(jint)(jboolean)) 
```

扩展为：

```
JNIEXPORT void JNICALL
Java_com_noname_media_TestClassnativeTest(jobject p0, jint p1, jboolean p2)
{
    TestClass* peer = TestClass::getPeer(p0, p1, p2);
    if(peer)
        peer->nativeTest(p0, p1, p2);
} 
```

因此，您的示例将变为：

```
#define JNI_TABLE_BEGIN(name) class name { public:
#define JNI_TABLE_END() };

JNI_TABLE_BEGIN(ClassName)
  JNI_FUNCTION(native1, void, (JNIEnv *)(jobject)(jint) )
  JNI_FUNCTION(native2, void, (JNIEnv *)(jobject)(jint) )
  JNI_FUNCTION(native3, jint, (JNIEnv *)(jobject) )
JNI_TABLE_END() 
```

它扩展到：

```
class ClassName
{
public:
    JNIEXPORT void JNICALL
    Java_com_noname_media_TestClassnative1(JNIEnv * p0, jobject p1, jint p2)
    {
        TestClass* peer = TestClass::getPeer(p0, p1, p2);
        if(peer)
            peer->native1(p0, p1, p2);
    }
    JNIEXPORT void JNICALL
    Java_com_noname_media_TestClassnative2(JNIEnv * p0, jobject p1, jint p2)
    {
        TestClass* peer = TestClass::getPeer(p0, p1, p2);
        if(peer)
            peer->native2(p0, p1, p2);
    }
    JNIEXPORT jint JNICALL
    Java_com_noname_media_TestClassnative3(JNIEnv * p0, jobject p1)
    {
        TestClass* peer = TestClass::getPeer(p0, p1);
        if(peer)
            return peer->native3(p0, p1);
        return jint();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:01:19.497

到目前为止，我有一个可能适合作为解决方案的想法。浏览 SO 答案，我[找到了一个关于如何计算参数数量的示例](http://groups.google.com/group/comp.std.c/browse_thread/thread/77ee8c8f92e4a3fb/346fc464319b1ee5?pli=1)。使用这个宏，我可以连接 args 的数量`functionArgs`并调用一些预定义的宏，例如。`JNI_FUNCTION_5`在 args 列表中需要 5 个 args。我所需要的只是能够从**VA_ARGS**列表中提取一些参数。一些宏，如 __VA_ARG_N(num)。

这是一种从 中提取一些论点的方法`__VA_ARGS__`：

```
#define ARG_REST(arg, ...) __VA_ARGS__
#define ARG0(arg0, ...) arg0
#define ARG1(...) ARG0(ARG_REST(__VA_ARGS__))
#define ARG2(...) ARG1(ARG_REST(__VA_ARGS__))
... etc. 
```

然后我写了一个特殊的宏来生成列表参数类型对，或者只生成参数。

所以，最终，我设法做到了：

```
JNI_FUNCTION(void, nativeSetOrientation, (JNIEnv *, jobject, jint, jboolean));
JNI_FUNCTION(void, nativeStartRecording, (JNIEnv *, jobject, jstring, jint)); 
```

**唯一可以解决的问题是为 void 添加特殊处理`returnType`**，如下所示：

```
 if(peer)
        IS_NOT_VOID(returnType, return) peer->functionName(**WTF**);
    IS_NOT_VOID(returnType, return returnType();) 
```

IS_NOT_VOID 应该有这个动作的地方：

```
#define IS_NOT_VOID(type, expr) if(type == void) expr 
```

那是

```
IS_NOT_VOID(void, return void();) -> expands to nothing
IS_NOT_VOID(int, return int();) -> expands to return int(); 
```

知道如何正确地做到这一点吗？除了迭代所有可能的类型并为所有可以传递给 JNI 函数的类型创建 30 个定义的明显解决方案。像这样的东西：

```
#define _IF_NOT_VOID(type, expr) _IF_NOT_VOID##type(expr)
#define _IF_NOT_VOIDvoid(expr) //void type...
#define _IF_NOT_VOIDjboolean(expr) expr
#define _IF_NOT_VOIDjbyte(expr) expr
#define _IF_NOT_VOIDjchar(expr) expr 
```

# javascript - 将输入与数组对匹配

> ID：13094384
> 
> 赞同：0
> 
> 时间：2012-10-26T21:02:47.217
> 
> 标签：javascript

我正在尝试创建一个脚本，该脚本会根据输入的值自动显示价格。

我的价格折扣可能是：

```
1 item or more = "£5";
5 items or more = "£30";
10 items or more = "£55"; 
```

因此，当用户在输入框中输入“7”时，价格显示为`£30*7`。

我知道如何做到这一点的唯一方法是为每种情况制作一个 if else 语句，但我猜有一个更简单的方法？

这是我的伪代码：

```
<script>

function calc() {
var amountVar = document.getElementById('amount').value;

var discount = new Array();
discount[1] = "£5";
discount[5] = "£30";
discount[10] = "£55";

match = discount where amountVar matches key or more;

document.getElementById('price').innerHTML = match;
}

</script>

<input onkeyup="calc();" id="amount">
<br>
Price: <p id="price"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:14:16.633

`if/else`您可以将它们全部放在一个数组中，而不是一个，然后`for`循环遍历该数组，直到找到匹配的折扣。这有几个优点，主要的一个是在不编写新代码的情况下编辑折扣数组很简单。

```
// array must be sorted by qty
var discounts = [{qty:1, discount:5}, {qty:5, discount:30}, {qty:10, discount:55}];

function calcPrice (qty) {
    qty = +qty;

    if (qty > 0)
    {
      // look through the array from the end and find first matching discount
      for (var i = discounts.length; i--;) {
          if (qty >= discounts[i].qty) {
              return discounts[i].discount;
          }
      }
    }

    return 0;
} 
```

# iis - IIS 搜索引擎优化和具有动态图像的规范 URL

> ID：13094385
> 
> 赞同：0
> 
> 时间：2012-10-26T21:02:52.933
> 
> 标签：iis, seo, dynamic-image-generation, canonical-link

我的动态图像生成器出现以下错误。它可以有任何类型的宽度或高度，但 SEO 抱怨它，因为它需要一个规范的 URL。如何使用不是页面的动态图像执行此操作？

```
The page with URL "http://localhost/assets/images/99?w=125" can also be accessed by using URL "http://localhost/assets/images/99?w=100".
Search engines identify unique pages by using URLs.  When a single page can be accessed by using any one of multiple URLs, a search engine assumes that there are multiple unique pages. Use a single URL to reference a page to prevent dilution of page relevance. You can prevent dilution by following a standard URL format. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:29:15.073

`canonical`URL 也可以在 HTTP 标头中指定。参见[RFC 6596](https://www.rfc-editor.org/rfc/rfc6596#section-4)，第 4 节：

> 或者，在[[RFC5988] 第 5 节](https://www.rfc-editor.org/rfc/rfc5988#section-5)中指定的 HTTP 标头字段中：
> 
> `Link: <http://www.example.com/page.php?item=purse>; rel="canonical"`

# css - 滑块/图像超出文档流

> ID：13094396
> 
> 赞同：0
> 
> 时间：2012-10-26T21:03:54.513
> 
> 标签：css

我试图将侧边栏浮动到左侧，将滑块浮动到右侧，但是，我的图像不在文档流中。

基本上我要做的是当用户调整浏览器窗口的大小时，图像会缩小（这就是我使用 max-width: 100% 的原因）。

**在 Chrome 中查看以查看问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:47:27.353

您可以尝试将`width : 100%`其用于您的**主要**课程，如下所示。

```
.main {
position: relative;
float: right;
max-width: 600px;
margin: 0;
width: 100%;
} 
```

**编辑：**

您已经编辑了您的标记设计。您在文章 div 之外添加了一个新的内容 div。

**编辑**

```
#page-wrap {
max-width: 960px;
min-height: 100%;
height: auto !important;
padding-bottom: 40px;
margin: 0 auto;
position: relative;
}

#sidebar {
position: absolute;
width: 300px;
left: 0;
top: 130px;
}

.content {
max-width: 600px;
position: absolute;
left: 360px;
top: 130px;
right: 0;
} 
```

如果您以这种方式更改类，则在调整浏览器大小时，将调整图像大小。

您可以查看有关此问题的简单演示。

[http://jsfiddle.net/qCQ9H/2/](http://jsfiddle.net/qCQ9H/2/)

# java - 所有子类（泛型？）的一种构建器方法实现

> ID：13094400
> 
> 赞同：0
> 
> 时间：2012-10-26T21:04:06.737
> 
> 标签：java, generics, visitor-pattern, builder-pattern

我的困境在于创建一种遵循构建器模式的方法，该方法设置一个变量并返回自身，但我有一个由其他访问者实现实现并扩展`Visitor`的接口。`BasicVisitor`

此外，我有一个`Visitable`接口，该接口由其实现`SampleVisitable`并具有保留所有访问者历史记录的方法。

* * *

所以问题是我只想在访问者的历史记录中保留`SampleVisitable`访问者是否“重要”的完整参考，因为主机`Visitor.clean()`在访问者访问之前调用，这会清除上次访问的所有数据，但我想要“重要”访客的数据留在历史中。

这是我迄今为止的实施：

```
public interface Visitor {
    public void visit( Visitable visitable );

    public Visitor clone();

    public <V extends Visitor> V important();

    public boolean isImportant();
} 
```

这是该`SampleVisitable`课程的一个片段：

```
public void accept( Visitor visitor ) {
    visitor.clean();
    visitor.visit( this );
    addToHistory( visitor ); // only adds if visitor.isImportant() == true
} 
```

然后我有`BasicVisitor`哪个实现了该`important()`方法。现在我不想`important()`每次都重写该方法，但是通过我的实现，我必须这样做，因为如果其他访问者使用该`important()`方法，则会出现“无法从 BasicVisitor 转换为 [OtherVisitor]”形式的错误不覆盖它：

```
OtherVisitor otherVisitor = new OtherVisitor().important(); // cannot convert from BasicVisitor to OtherVisitor error. 
```

做这个的最好方式是什么？我需要让这个特性实现一次，并且可供所有其他子类使用，而不需要它们覆盖它。谢谢！

**编辑：**

哇，抽象类正是我想要的！我做了更多研究，发现这篇关于[接口和抽象类之间差异](https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)的帖子，我希望它可以帮助其他人寻找答案。

发布此答案后，我意识到在这种情况下我不必使用构建器模式，我可以创建一个`setImportant( boolean isImportant )`并且基本上可以满足我的需要，但我很高兴我还是问了，因为这就是我需要另一个设计问题。

**编辑2：**

`important()`在尝试了抽象类之后，我的主要问题仍然存在，我仍然需要重写`Visitor`.

伊利亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:10:28.813

请试试这个。如果您使用一个`abstract`类，那么您实现的方法将可用于所有子类。

```
public abstract class Visitor {
    public abstract void visit( Visitable visitable );

    public abstract Visitor clone();

    public abstract <V extends Visitor> V important();

    public boolean isImportant() {
        //logic to store important visitors
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:54:07.457

`abstract class`正如@sunleo 在他的回答中提到的那样，我能够使用 来解决这个问题，并将`important()`构建器函数更改为设置器`setImportant( boolean isImportant )`和泛型。

所以现在我有以下实现：

```
public abstract class Visitor<T> implements Cloneable  {
    private boolean important = false;
    private Graphable host;

    @Override
    public Visitor<T> clone() {
        try {
            return ( Visitor<T> ) super.clone();
        }
        catch( CloneNotSupportedException exception ) {
            log.info( exception, exception );        
        }
        return null;
    }

    public Graphable getHost() {
        return host;
    }

    public boolean isImportant() {
        return important;
    }

    public void setHost( Graphable host ) {
        this.host = host;
    }

    public void setImportant( boolean isImportant ) {
        important = isImportant;
    }

    public void visit( Graphable graphable ) {
        if( graphable instanceof Node ) {
            visit( ( Node ) graphable );
        }
        else if ( graphable instanceof Edge ) {
            visit( ( Edge ) graphable );
        }
    }

    public abstract void clean();

    public abstract void visit( Edge edge );

    public abstract void visit( Node node );
} 
```

由于`Visitor`是可克隆的，因此可以轻松制作副本以保留在我的历史记录中。

# c# - 在 C# windows 应用程序中替换 excel 单元格值

> ID：13094404
> 
> 赞同：0
> 
> 时间：2012-10-26T21:04:22.863
> 
> 标签：c#, vb.net, excel, replace, find

我有一个 excel 模板，其中我们有不同的预定义字段，例如 CustomerName、CompanyName、Address 等。所有这些都在单个单元格中，这个单元格被命名为“客户”，同样我们有另一个名为“发件人”的单元格，其中包含与发件人详细信息。我的工作是找到客户和发件人单元格并将它们包含的值替换为实际值，例如我需要找到“客户”单元格并将客户名称替换为实际名称“约翰”，将 ComanyName 替换为“XYZ”等等对于其他领域，同样的任务也适用于 Sender Cell。

我正在使用 Microsoft.Office.Interop.Excel 来执行此任务，如下所示。

xlWorkSheet.Cells.Replace（“客户名称”，“约翰”，Excel.XlLookAt.xlPart，missingValue，missingValue，missingValue，missingValue，missingValue）；

xlWorkSheet.Cells.Replace（“公司名称”，“XYZ”，Excel.XlLookAt.xlPart，missingValue，missingValue，missingValue，missingValue，missingValue）；

问题是单个单元格中的所有这些字段，我需要找到不同的字段并替换它们的值，如果字段值不是然后将剩余的字段向上移动以填充空白空间。

请提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:09:13.790

我会将数据拉入字符串，进行字符串操作，然后将其设置回单元格值...

```
Dim StrToReplace as string = xlWorkSheet.Range("Customer").value

StrToReplace = StrToReplace.replace("CustomerName", "John")
StrToReplace = StrToReplace.replace("CompanyName", "XYZ")
... etc

xlWorkSheet.Range("Customer").value = StrToReplace 
```

您可以通过不在多行上重复 StrToReplace.replace 来提高效率，例如：

```
StrToReplace = StrToReplace.replace("CustomerName", "John").replace("CompanyName", "XYZ") 
```

或者，也许使用字符串生成器，但这至少应该为您指明解决当前问题的正确方向。

希望这可以帮助

# php - 无法从 ckeditor jquery 插件中检索数据

> ID：13094407
> 
> 赞同：1
> 
> 时间：2012-10-26T21:04:28.577
> 
> 标签：php, javascript, jquery, html, ckeditor

在过去的几个小时里，我试图简单地将在 ckeditor (textarea) 中输入的数据 (text/html) 发布到 PHP 文件中。

他们的 API 声称数据会自动在表单提交中发布数据，但事实并非如此，它什么也不返回。

编辑：这是真正的代码：

```
 <?php
    require("fns.php");
    // grab tab content from database
    $tab = array();
    $query ="SELECT * FROM tabs";
    $db_conn = db_connect();
    $results = mysql_query($query,$db_conn);
    while($row = mysql_fetch_array($results))
    {
    $tab[]= $row;
    }

// form validation
if($_POST['btnSave'])
{
    // grab selected tab ID
    $tabId = $_POST['tabId'];
    $title = $_POST['txtTitle'];
    $content = $_POST['ckeditor'];

    // all fields required
    if(isset($tabId) && isset($title) && isset($content))
    {   
        // update recorde where id = tabId
        $query = "UPDATE tabs SET title = '$title', content = '$content' WHERE id = $tabId";
        if($content !== "")
        {
            if(mysql_query($query,$db_conn))
            {
                $message = "<h3 style='color:#003300;'>Changes Saved!</h3><br /><p>".$content."</p>";
                header("Location:testtabs.php");
            }
        }
        else
        {
            $message ="<h3 style='color: #950000;'>Content cannot be blank!</h3>";
        }
    }
} 
```

?>

```
 <!-- in head section -->
      <script type="text/javascript">  
    $(document).ready(function() {
    // inflate ckeditor
    $('#ckeditor').ckeditor();
    //track selected tab
    var currentId = -1; 
        // Tab initialization
        var $tabs = $('#tabs').tabs({
         select: function(event, ui){
        /*
        ui.index: zero based index selected tab 
        ui.tab: anchor element of the selected tab
        ui.panel: element containing the content for the selected tab
        */

        // get current tab ID for php script
        var currentId = ui.index + 1;
        $("#tabId").val(currentId);
        var tabName = $(ui.tab).text();
        var content = $(ui.panel).html();
        // swap title
        $( '#title' ).val( tabName );
        // swap content
        $("#ckeditor").val(content);
    }   
}); 
```

});

```
 <body>
    <?php  echo $message; ?>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1"><?php echo $tab[0]['title'];?></a></li>
        <li><a href="#tabs-2"><?php echo $tab[1]['title'];?></a></li>
        <li><a href="#tabs-3"><?php echo $tab[2]['title'];?></a></li>
    </ul>
    <div id="tabs-1">
        <div class="content"> 
               <?php echo $tab[0]['content'];  ?>
        </div>
    </div>
    <div id="tabs-2">
        <div class="content"> 
               <?php echo $tab[1]['content'];  ?>
        </div>
    </div>
    <div id="tabs-3">
        <div class="content"> 
               <?php echo $tab[2]['content'];  ?>
        </div>
    </div>
</div>

<?php 
    if (isset($_SESSION['valid_user']) && ($_SESSION['account_type'] == 'ADMIN')) 
    {
        // display editor with tab 1 content
        ?>
        <table id="tab-editor">
            <form action = 'testtabs.php' method ='post'>
            <input type="hidden" id="tabId" name ="tabId" value="-1"/>
                <tr><td>Title: <input type='text' name='txtTitle' id='title' value='<?php echo $tab[0]['title'];?>'/></td></tr>
                <tr><td>Tab Content:</td></tr><tr><td> <textarea name='ckeditor' id='ckeditor' class='tab-editor'><?php //echo $tab[0]['content'];?></textarea></td></tr>
                <tr><td><input type='submit' name='btnSave' value='Save Changes' /></td>
            </form>
        </table>
        <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:58:56.043

恢复到传统的 ckeditor javascript，现在可以正常工作了...

```
 CKEDITOR.replace( 'ckeditor' );
    // Tab initialization
// Tab initialization
var $tabs = $('#tabs').tabs({
    select: function(event, ui){
        /*
        ui.index: zero based index selected tab 
        ui.tab: anchor element of the selected tab
        ui.panel: element containing the content for the selected tab
        */

        // get current tab ID for php script
        var currentId = ui.index + 1;
        $("#tabId").val(currentId);
        var tabName = $(ui.tab).text();
        var content = $(ui.panel).html();
        // swap title
        $( '#title' ).val( tabName );
        // swap content
        CKEDITOR.instances['ckeditor'].setData(content);

    }   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:30:57.280

CKEditor 使用文本区域的内容从文本区域（甚至可能来自其他元素，我不知道）创建一个 CKEditor 的实例来填充编辑器。无论如何，当您使用 jQuery 时：

```
$('#ckeditor').val("Initial text (test)"); 
```

您将文本放入 textarea 标记中。创建 CKEditor 实例后，您需要使用 CKEditor 方法来获取数据： [http ://docs.cksource.com/ckeditor_api/](http://docs.cksource.com/ckeditor_api/)

具体来说，我认为您将需要：

[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#getData](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#getData)

PS：对不起我的英语不好

**编辑：**没有看到编辑，对不起

# objective-c - 带有点符号的objective-c中的内联类型转换

> ID：13094412
> 
> 赞同：4
> 
> 时间：2012-10-26T21:04:47.213
> 
> 标签：objective-c, xcode

这个问题纯属好奇。

在 Xcode 中，为什么会这样：

```
if (view.class == [UITextView class]) {
    UITextView *tview = (UITextView *)view;
    tview.textColor = [UIColor colorWithRed:0.020 green:0.549 blue:0.961 alpha:1.];
} 
```

但以下导致错误消息`Property 'textColor' not found on object of type 'UIView *'`：

```
if (view.class == [UITextView class]) {
    (UITextView *)view.textColor = [UIColor colorWithRed:0.020 green:0.549 blue:0.961 alpha:1.];
} 
```

直观地说，这些应该完成完全相同的事情。

但是，如果我将内联强制转换括在括号中，它就可以正常工作：

```
if (view.class == [UITextView class]) {
    ((UITextView *)view).textColor = [UIColor colorWithRed:0.020 green:0.549 blue:0.961 alpha:1.];
} 
```

我怀疑它只是与 C 如何处理操作顺序有关，但我很想听听解释。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T21:15:01.633

```
if (view.class == [UITextView class]) {
    (UITextView *)view.textColor = [UIColor colorWithRed:0.020 green:0.549 blue:0.961 alpha:1.];
} 
```

由于优先顺序，`(UITextView*)`将作为 的结果的强制转换`view.textColor`，含义`.textColor`将`UIView*`在它被强制转换为之前的第一个访问`UITextView*`

```
if (view.class == [UITextView class]) {
    ((UITextView *)view).textColor = [UIColor colorWithRed:0.020 green:0.549 blue:0.961 alpha:1.];
} 
```

在这种情况下，额外的括号将通知编译器需要先计算子表达式，然后再计算表达式的其余部分。因此，这正在`view`成为一个`UITextView*`. 该表达式的副作用是一个`UITextView*`实例，这意味着`.textColor`可以在它所针对的实例上找到该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T18:59:55.833

我对我的模型使用了相同的方法，封装到每个实体的**类型转换辅助函数中。**

```
// Cast an `entity` to a `user`.
TPUser *user(TPEntity *entity)
{ return ([entity isKindOfClass:[TPUser class]]) ? (TPUser*)entity : nil; } 
```

所以像这样使用是安全的......

```
someUI.text = user(entity).name; 
```

...因为它`nil`在投射失败时返回。

* * *

对于这种情况，它类似于：

```
UITextField *textField(UIView *view)
{ return ([view isKindOfClass:[UITextField class]]) ? (UITextField*)view : nil; } 
```

# jakarta-ee - 在 Java EE 企业应用程序中放置业务逻辑的位置

> ID：13094417
> 
> 赞同：2
> 
> 时间：2012-10-26T21:05:08.803
> 
> 标签：jakarta-ee, ejb, ejb-3.0, java-ee-6, business-logic

创建企业 Java EE 应用程序时，必须将部分业务逻辑（如消息传递 (MDB)）放入 EJB 模块中。但是，有些 EJB 可以放置在 EJB 模块或 Web 模块中。我知道分离模块允许将 Web 层和业务层部署在不同的机器上。因此，我会将我的`@Stateful`购物车 EJB 放在 web 模块中。但是，我想不出一个可以应用于每个业务逻辑的标准标准，以决定将 EJB 放在哪里来封装它们。对此是否有指导方针、标准或推荐做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:57:47.747

这是我到目前为止所发现的。

EJB 模块应该包含大型企业应用程序的业务逻辑核心。另一方面，Web 模块包含一个成熟的 Web 应用程序，该应用程序应该利用 EJB 模块提供的业务引擎。通常这些模块分布在不同的服务器上，用于较大的应用程序，并且除了 Web 应用程序之外，还有客户端应用程序（例如 Swing/JFX 桌面应用程序）需要使用驻留在 EJB 模块中的核心业务逻辑提供的服务。

换句话说，如果出现以下情况，可以将业务逻辑放在单独的 EJB 模块中：

1.  它旨在供多个 Web 或桌面应用程序使用，或
2.  扩展考虑可能会迫使核心业务逻辑由单独的服务器处理

在其他情况下，可以将他的 EJB 放在 Web 模块中，并将整个内容打包为 WAR 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:22:03.810

正如您在最后一句话中所说，这正是我的建议：对 JEE6 应用程序使用 WAR 包装，因为在大多数情况下您不需要 EAR。

如果您需要在多个应用程序之间共享业务逻辑，则可以将其部署为单独的模块。但是出于扩展的原因，通常不需要这样的事情，因为您也可以相应地确定运行 WAR 的应用程序服务器的大小。

# php - 将真/假变量传递给函数php

> ID：13094418
> 
> 赞同：-4
> 
> 时间：2012-10-26T21:05:09.440
> 
> 标签：php, function, arguments

试图绕过这个

```
function any_name($div,$width = false){

   if($width){

      $add_style =' style="width:1000px;"';

   }else{
      $add_style ='';
    }

   html ='<div id="'.$div.'"'.$add_style.'>';
   html .= "</div>';

}

any_name('div1');// should print <div id="div1"></div>
any_name('div2',$width = true);// should print <div id="div2" style="width:1000px;"></div> 
```

第二个函数调用打印

```
1
<div id="div2"></div> 
```

我究竟做错了什么 ？

感谢您提供任何帮助！

**！资助真正的问题**，我的函数还有 2 个参数 **函数 ($div,arg2,arg3,$width) $width 在错误的位置，因此导致 1**

对困惑感到抱歉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:08:34.713

在这两个函数调用中，`$width`都是假的。如果您需要`true`第二次发送，您必须这样做，

```
 any_name('div1');
 any_name('div2', true); 
```

此外，该行`html .= "</div>';`必须是`html .= "</div>";`，您缺少结束引号`"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:15:06.253

```
function any_name($div, $width = false) {

    if ($width) {
        $add_style =' style="width:1000px;"';
    }
    else {
        $add_style ='';
    }

   $html ='<div id="'.$div.'"'.$add_style.'>';
   $html .= '</div>';
   return $html;

}

echo any_name('div1');// should print <div id="div1"></div>
echo any_name('div2', true);// should print <div id="div2" style="width:1000px;"></div> 
```

# ruby - 在返回值变量名称中使用输入名称

> ID：13094420
> 
> 赞同：3
> 
> 时间：2012-10-26T21:05:24.147
> 
> 标签：ruby

我试图让这个简单的方法返回一个与其输入名称相关的值。例如，如果我给方法“people_array”，它应该返回“people_array_of_arrays”。

如果我在 IRB 中使用该方法，我会得到类似的结果：

```
people_array = ["George\tMichael", "Kim\tKardashian", "Kanyne\tWest"]
=> ["George\tMichael", "Kim\tKardashian", "Kanyne\tWest"]
make_array_of_arrays(people_array)
=> people_array_of_arrays
people_array
=> ["George\tMichael", "Kim\tKardashian", "Kanyne\tWest"]
people_array_of_arrays
=> [["George", "Micahel"], ["Kim", "Kardashian"], ["Kayne", "West"]] 
```

到目前为止，我已经写了这个，但还没有弄清楚如何返回一个命名良好的数组数组。我能想到的只是字符串插值，但这并不是我所需要的。

```
def make_array_of_arrays(array)
    formatted_array = []
    array.each do |feed|
        mini_array = feed.split("\t")
        formatted_array.push(mini_array)
    end
    #{array}_of_arrays = formatted_array
end 
```

我看到有一个方法 variablize，但它返回的实例变量并不是我想要的。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:37:05.077

我不认为这很容易做到。假设您能够在方法定义中以某种方式定义局部变量。但是该局部变量的范围仅限于方法定义。所以当你离开方法定义的那一刻，局部变量名就消失了。因此，为了做到这一点，您必须以某种方式获取`binding`方法定义之外的环境信息，并在其中定义一个局部变量。我不知道这是否可能。

使用实例变量，事情变得更容易使用`instance_variable_set`，但我不确定如何完全实现它。首先，获取原始变量的名称很棘手。

而你试图做的不是正确的方法。你应该考虑不同的方法。

* * *

我认为您能做的最好的事情是使用实例变量而不是局部变量，并明确给出变量的名称而不是数组本身：

```
def make_array_of_arrays(variable_name)
  array = instance_variable_get("@#{variable_name}")
  # Your code here
  instance_variable_set("@#{variable_name}_of_arrays", formatted_array)
end

@people_array = ["George\tMichael", "Kim\tKardashian", "Kanyne\tWest"]
make_array_of_arrays(:people_array)
@people_array_of_arrays
#=> [["George", "Micahel"], ["Kim", "Kardashian"], ["Kayne", "West"]] 
```

* * *

[这](http://onestepback.org/index.cgi/Tech/Ruby/RubyBindings.rdoc)也可能有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:58:43.373

这里最大的问题是没有访问变量名称的好方法。

除了这一点并在 Sean Vieira 的基础上，你可以做一些 eval 魔法来得到这个：

```
def make_array_of_arrays(array, array_name)
    new_array = array.map { |feed| feed.split("\t") }

    eval("def #{array_name}_of_arrays; return #{new_array}; end")
end 
```

这基本上为您的 *_of_arrays 行创建了一个函数，该函数返回您正在寻找的数组。

如果您能找到一种方法来获取变量的名称，那么您将拥有所需的一切。并不是说我真的正式认可这种方法。我一辈子都想不通你为什么要这么做。这是非常单一的，并且对于查看该代码块的任何人都会感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T21:16:07.190

不需要元编程（除非我误解了你的问题）。只需返回您的格式化数组：

```
def make_array_of_arrays(array)
    formatted_array = []
    array.each do |feed|
        mini_array = feed.split("\t")
        formatted_array.push(mini_array)
    end
   formatted_array
end 
```

然后您可以将返回值分配给您想要的任何名称：

```
people_array_of_arrays = make_array_of_arrays(people_array) 
```

**注意**，您可以使用`map`来简化您的`make_array_of_arrays`方法：

```
def make_array_of_arrays(array)
    array.map do |feed|
        feed.split("\t")
    end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T22:05:26.590

这既不容易也不可取。

将 Ruby 对象想象成人们（你和我）通过电话进行交流（电话号码是 object_id）。想象一下，我在名称（变量）“sTeEnSlAg”以及“steenslg”下的电话号码列表中。然后你给我打电话问“请给我你在我手机上注册的名字，后缀为“_of_arrays”。

你认为我回答的礼貌版本是什么？

# python - python迭代器的接口是什么？

> ID：13094421
> 
> 赞同：5
> 
> 时间：2012-10-26T21:05:25.100
> 
> 标签：python, interface, iterator

> **可能的重复：**
> [构建一个基本的 Python 迭代器](https://stackoverflow.com/questions/19151/build-a-basic-python-iterator)

定义迭代器所需的方法是什么？例如，在下面的`Infinity`迭代器上，它的方法是否足够？是否有其他定义迭代器的标准或事实上的标准方法？

```
class Infinity(object):
    def __init__(self):
        self.current = 0

    def __iter__(self):
        return self

    def next(self):
        self.current += 1
        return self.current 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T21:07:47.420

你所拥有的对于 Python 2.x 来说已经足够了，但是在 Python 3.x 中你需要定义函数`__next__`而不是`next`，参见[PEP 3114](http://www.python.org/dev/peps/pep-3114/)。

如果您需要与 2.x 和 3.x 兼容的代码，请同时包含两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:07:16.830

根据[词汇表](http://docs.python.org/glossary.html#term-iterator)，迭代器是具有`next()`方法和`__iter__()`方法的任何对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:08:56.483

[第 4.5 节 - 迭代器类型](https://docs.python.org/3/library/stdtypes.html#typeiter)

您需要为您的容器定义：

```
container.__iter__() #-> returns iterator 
```

对于您的迭代器，您必须定义：

```
iterator.__iter__() #-> returns self
iterator.__next__() #-> returns next item
iterator.next() #(for Python2 compatibility) -> returns self.__next__() 
```

# python - D3.js 前端和 Python 后端之间的双向流？/ 网站中的交互式图表

> ID：13094426
> 
> 赞同：9
> 
> 时间：2012-10-26T21:05:34.423
> 
> 标签：python, d3.js

所以这有点类似于

[在网络上获取 Python 脚本输出的最简单方法是什么？](https://stackoverflow.com/questions/731470/whats-easiest-way-to-get-python-script-output-on-the-web) 和 [Matplotlib：Web 服务器上的交互式绘图](https://stackoverflow.com/questions/3354883/matplotlib-interactive-plot-on-a-web-server)

但是没有一个使用 d3.js，我认为它们没有达到相同水平的交互性。

所以我是 d3.js 的新手，坦率地说，我不知道在这种情况下我应该从哪里开始。

项目流程：

1.  在前端询问用户名。将此发送到后端 python
2.  获取深度为 x 的图形数据（对象 + 边），其中 x 是通过 Python 调用第 3 方网站 API 与起始节点的距离
3.  对数据运行一些机器学习（python）
4.  在 d3.js 循环中显示图形 + 一些数字（可能在右下角）：
5.  有一个交互式 d3.js 图表，这样如果我单击一个节点，它将以该节点为起始节点重做计算
6.  让 d3.js 显示每个节点的部分文本（前 10 个字符？），然后在鼠标悬停时显示全文。

(7) 奖励更新可嵌入图片？喜欢那些个人资料签名吗？

问题：我将如何实现这种双向通信？我应该从哪里开始？有没有更好的方法可以做到这一点？

旁注：我打算使用 Google App Engine 来做这个项目，但我不知道这是否能让你将它用作“虚拟机”。

谢谢！

编辑：这看起来很像[前端集成的后端 JS 中的 Python](https://stackoverflow.com/questions/12497626/python-at-backend-js-at-frontend-integration)，但我什至不知道从哪里开始，我认为由于他的项目，他们建议使用更多面向艺术的工具。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T21:18:59.560

听起来您需要用 Python 编写一个使用并返回[JSON](http://www.json.org/)的 Web 服务。我不确定数据是来自客户端还是服务器，所以对于这个例子，我假设它来自客户端。

1.  将您的图形数据以 JSON 格式发布到您的网络服务
2.  做处理服务器端
3.  将表示处理结果的 JSON 返回给客户端
4.  用 d3.js 渲染它
5.  客户端上的用户交互创建新的或修改的数据结构
6.  返回步骤 1

也许您的服务器端 Web 服务方法如下所示（这是基于[web.py](http://webpy.org/)的伪代码）：

```
import simplejson

class ml(object):

    def POST(self,data=None):
        # turn the JSON string into a Python data structure
        d = simplejson.loads(data)
        # do stuff
        results = alter_data(d)
        web.header('Content-Type','application/json')
        # send JSON back to the client
        return simplejson.dumps(results) 
```

您的客户端代码可能看起来像这样（同样，只是一个粗略的草图）。此示例假定您使用 jQuery 来执行 AJAX 操作。

```
function render(data,textStatus) {
    d3
      .select('svg')
      .selectAll('circle')
      .data(data)
      .enter()
      .append('circle')
      .on('click',function() {
          $.getJSON(
              'your_webservice_url',
              // POST an updated data structure to your service
              { 'data' : alter_data(data) },
              // Call the render method again when new data is received
              render);
       });
} 
```

d3.js'[`enter`](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)和[`exit`](https://github.com/mbostock/d3/wiki/Selections#wiki-exit)方法使更新数据的可视化表示非常容易。我建议阅读这些文档。

[这个例子](http://mbostock.github.com/d3/ex/force.html)可能会给你一些关于如何用 JSON 表示你的图形数据以及如何渲染它的想法。

查看该[`on`](https://github.com/mbostock/d3/wiki/Selections#wiki-on)方法，了解单击节点时如何触发对 Web 服务的 POST。

我将跳过真正具体的内容，例如使用 d3.js 显示文本。我相信您可以通过[阅读 d3.js 文档](https://github.com/mbostock/d3/wiki)来弄清楚如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T12:06:44.460

这是一个迟到的答案，我刚刚偶然发现了这个 python 包：[Bokeh](http://bokeh.pydata.org/en/latest/index.html)

为了满足您要求的第 1-6 点，您似乎几乎*只*需要编写 python 代码，这对于不习惯编写 java 脚本的人来说是一个加分项。

但是这个包还是很新的，可能有一些我目前还不知道的限制。

# windows-8 - 将可见框架引用传递给设置弹出按钮

> ID：13094430
> 
> 赞同：0
> 
> 时间：2012-10-26T21:06:04.987
> 
> 标签：windows-8

在我的 Windows 8 应用程序中，我有一个弹出窗口，当单击超级按钮栏上的链接时会显示该弹出窗口。如何将当前应用程序可见框架传递给弹出窗口？我想根据他们调用魅力栏的位置并打开设置来显示和做不同的事情。

要创建我的设置弹出窗口，我执行以下操作：

```
void onCommandsRequested(SettingsPane settingsPane, SettingsPaneCommandsRequestedEventArgs eventArgs)
{
    UICommandInvokedHandler handler = new UICommandInvokedHandler(onSettingsCommand);

    SettingsCommand generalCommand = new SettingsCommand("SettingId", "Setting", handler);
    eventArgs.Request.ApplicationCommands.Add(generalCommand);

}

void onSettingsCommand(IUICommand command)
{
    // Create a SettingsFlyout the same dimenssions as the Popup.
    MyApp.Common.LayoutAwarePage mypane = new SettingsFlyout;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:34:22.960

我认为您可以将当前帧传递`DataContext`给弹出窗口。

```
var popup = new Popup();
popup.DataContext = this; 
```

# python - Python初学者递归

> ID：13094440
> 
> 赞同：2
> 
> 时间：2012-10-26T21:07:17.313
> 
> 标签：python, recursion

我正在尝试获得一个简单的函数，它需要 n 并打印

```
If n > 0:
    print((n*'*')+(n*'!'), end=' ') 
```

并试图以递归方式获得相同的解决方案。我是递归的初学者，经常得到“更高层次的思考”，但我无法理解必须遵循的代码。

我的基本情况是，当 n 为 0 时，它什么也不打印。当 n 大于 1 时，它将打印 n 份 * + n 份！

```
def repeat(n):
    if n <= 0:
        pass
    else:
        repeat(n-1)
        print((n*'*')+(n*'!'), end=' ') 
```

现在它打印 n，然后连续打印 n-1 直到 0。我尝试将它分成两个打印语句并使用多个递归......但它变成了一个混乱的模式。

我也不允许使用循环。这个让我发疯；除了简单的一行语句之外，我还提出了几种解决方案，但没有一个使用递归。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:24:32.523

如果您构建并返回一个字符串并在函数外部打印它会更简单，如下所示：

```
def printPattern(n):
    if n <= 0:
        return ''
    return '*' + printPattern(n-1) + '!' 
```

或作为单行：

```
def printPattern(n):
    return '*' + printPattern(n-1) + '!' if n > 0 else '' 
```

无论哪种方式，这都有效：

```
print printPattern(5)
> *****!!!!! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:23:48.197

假设你有一个解决方案`n - 1`。前置`*`和附加`!`.

```
def repeat(n):
    if n > 0:
        print("*", end=" ")
        repeat(n - 1)
        print("!", end=" ") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:27:05.550

以下是您想要的。

```
def repeat(n):
  def stars(n):
    return '*'+stars(n-1)+'!' if n > 0 else ''
  print stars(n) 
```

例如，`repeat(5)`打印`*****!!!!!`和`repeat(8)`打印 `********!!!!!!!!`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:18:00.060

我实际上不知道你在问什么......如果有更有效或更好的方法来做到这一点？这将非常明显：

```
def repeat(n):
    if n >= 0:
        print((n*'*')+(n*'!'), end=' ')
        return repeat(n-1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T21:18:34.317

`n<=0`我会在这里使用两个字符串，并在使用`return`而不是在函数内部打印时返回这两个字符串的连接字符串：

```
def repeat(n, strs1="", strs2=""):     # The Default value of strings is ""

    if n <= 0:
        return strs1 + strs2   # if n<=0 then concatenate the two strings and return them
    else:
        strs1 += "*"          # Add * to strs1
        strs2 += "!"          # Add ! to strs2
        return repeat(n-1, strs1, strs2)  # Pass n-1, as well as the two strings to a recursive call

print(repeat(5))
print(repeat(3)) 
```

**输出：**

```
*****!!!!!
***!!! 
```

# php - 当shell是csh时，如何将php exec stderr重定向到输出数组？

> ID：13094447
> 
> 赞同：-1
> 
> 时间：2012-10-26T21:07:46.677
> 
> 标签：php, freebsd, csh

> **可能重复：**
> [如何从 csh 脚本重定向标准输出和标准错误](https://stackoverflow.com/questions/1849358/how-to-redirect-stdout-and-stderr-from-csh-script)

当服务器的执行 shell 是 sh 或 bash 时，我已经这样做了很多次：

```
exec('dostuff 2>&1', $output, $return); 
```

但现在我的服务器在 FreeBSD 上，而 Apache 执行 shell 是 csh。我一直在这样做：

```
exec('dostuff |& cat', $output, $return); 
```

我不确定这是正确的还是最佳的。有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:16:20.463

使用[`proc_open`()](http://www.php.net/manual/en/function.proc-open.php)从 stderr 获取输出。

# javascript - JPEG 不会在 IE8 中显示（但它是 RGB）

> ID：13094463
> 
> 赞同：0
> 
> 时间：2012-10-26T21:08:42.133
> 
> 标签：javascript, internet-explorer-8, jpeg

我有一个包含我的投资组合的页面。我想向人们展示当时的两个项目，旁边有一张照片。在我的项目下，有一个“加载更多”按钮。
一切都在 IE9、Firefox 和 Chrome 中运行，但在 IE8 中不可用（也许 IE7 也是如此）。
参见示例：链接已删除

项目的 JPEG 文件不会在 ie8 中加载，但其他图像会。真奇怪。JPEG 的格式是 RGB。连一个`.png`都行不通。

代码是：

```
<script type="text/javascript">
   $(window).load(function() {
$(".projecten").slice(0, 2).show(); // select the first five
$("#load").click(function(e){ // click event for load more
    e.preventDefault();
    $(".projecten:hidden").slice(0, 2).show(); // select next 5 hidden divs and show them
    if($(".projecten:hidden").length == 0){ // check if any hidden divs still exist
        alert("Alle projecten zijn nu geladen."); // alert if there are none left
    }
});
   });
</script>

<style type"text/css">
.projecten { 
display:none;
z-index:5;
}
</style>

<h1>Projecten</h1><br>
            <p>Some text</p><br>

  <div class="projecten"><div id="inhoud"><table width="924" border="0" cellspacing="0" cellpadding="0" align="left">
    <tr>
    <td width="210" style="text-align:left;vertical-align:top"><img src="Figuren/Projecten/Parallelweg 2e fase.jpg" width="210" height="297" longdesc="Parallelweg 2e fase"></td>
    <td width="35"></td>
    <td style="text-align:left;vertical-align:top"><b>Parallelweg 's-Hertogenbosch 2e fase </b>
        <i>text.... </i><br>text......
      </td>
      </tr>
     </table>
</div>
     </div> 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:24:05.370

从图像文件名中删除空格。您网站上文件名中没有空格的图像对我来说似乎很好。

改变：

```
<img src="Figuren/Projecten/Parallelweg 2e fase.jpg" width="210" height="297" longdesc="Parallelweg 2e fase"> 
```

到：

```
<img src="Figuren/Projecten/Parallelweg%202e%20fase.jpg" width="210" height="297" longdesc="Parallelweg 2e fase" /> 
```

另请参阅我通过在标签末尾添加正斜杠来关闭`<img />`标签。

或者您可以将空格全部丢弃，并用下划线 ( `_`) 或连字符 ( `-`) 之类的其他内容替换它们：

```
<img src="Figuren/Projecten/Parallelweg-2e-fase.jpg" width="210" height="297" longdesc="Parallelweg 2e fase" /> 
```

这将要求您更改服务器上的文件名，以便正确引用它。

# javascript - Javascript：如何根据在文本框中输入的国家名称显示国家代码

> ID：13094469
> 
> 赞同：1
> 
> 时间：2012-10-26T21:08:56.883
> 
> 标签：javascript, textbox

我想创建一个带有文本框的网页。当在文本框中键入国家名称时，文本框下方的区域应显示该国家的拨号代码以及国家名称。例如，如果有人在文本框中键入“England”，文本框下方的某处应显示为“Country:England Code+44”，或者如果有人在文本框中输入“India”，例如“Country:India”应显示代码：+91"。

这可以在 html 中使用 javascript 但不使用任何数据库，即纯粹使用 javascript 来完成吗？我的意思是 javascript 应该根据 javascript 本身中的一些预定义规则将在文本框中输入的国家名称与拨号代码相匹配，并显示国家名称和代码。

请帮助我处理 html 代码和 javascript。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:48:22.970

您可以在下面看到页面上的 javascript 解决方案。在实践中，这不是最好的方法。然而，这只是一个快速的想法......

## 代码示例

```
<html>
<head>
  <title>Test</title>
</head>

<body onload="document.getElementById('myedit').value=''">

  <input type="text" id="myedit" onchange="editChange()" onkeyup="editChange()" />
  <div id="result">&nbsp;</div>

  <script type="text/javascript">
  <!--
  // list of codes
  var cCode = new Array();
  cCode[0] = '+44';
  cCode[1] = '+1';
  cCode[2] = '+381';
  cCode[3] = '+20';
  // ... etc ...

  // list of countries
  var cName = new Array();
  cName[0] = 'England';
  cName[1] = 'USA';
  cName[2] = 'Serbia';
  cName[3] = 'Egypt';
  // ... etc ...

  function editChange() {
    obj = document.getElementById('myedit');
    s = obj.value.toLowerCase();
    res = '';
    for (i=0; i<cName.length; i++) {
      s2 = cName[i].toLowerCase().substr(0, s.length);
      if (s2 == s && s != '') res += 'Country: <b>' + cName[i] + '</b>, dialing code: <b>' + cCode[i] + '</b><br />';
      }
    document.getElementById('result').innerHTML = res == '' ? '<i>no result found!</i>' : res;
    }
  -->
  </script>

</body>
</html> 
```

## 预览

![在此处输入图像描述](../Images/b42480479171e5e4f9d934633a91fe91.png)

修改它以满足您的需求。

甚至具有相同结果的更简单版本将是：

```
 // country,code (w/ no '+' prefix)
  var cCode = new Array();
  cCode[0] = 'England,44';
  cCode[1] = 'USA,1';
  cCode[2] = 'Serbia,381';
  cCode[3] = 'Egypt,20';
  // ... more countries & dialing codes ...

  function editChange() {
    obj = document.getElementById('myedit');
    s = obj.value.toLowerCase();
    res = '';
    for (i=0; i<cCode.length; i++) {
      s2 = cCode[i].toLowerCase().substr(0, s.length);
      if (s2 == s && s != '') {
        sp = cCode[i].split(',');
        res += 'Country: <b>' + sp[0] + '</b>, dialing code: <b>+' + sp[1] + '</b><br />';
        }
      }
    document.getElementById('result').innerHTML = res == '' ? '<i>no result found!</i>' : res;
    } 
```

## 示例 #2

考虑这段代码

```
 // country,code (w/ no '+' prefix),image-name,target url
  var cCode = new Array();
  cCode[0] = 'United Kingdom,44,gbr.png,uk.html';
  cCode[1] = 'United States,1,usa.png,usa.html';
  cCode[2] = 'Serbia,381,srb.png,serbia.html';
  cCode[3] = 'Egypt,20,egy.png,egypt.html';
  cCode[4] = 'Sudan,249,sud.png,sudan.html';
  cCode[5] = 'Senegal,221,sen.png,senegal.html';
  cCode[6] = 'Somalia,252,som.png,somalia.html';

  // ... more countries & dialing codes ...
  var flagsDirectory = 'flags/'; // ends with slash

  function editChange() {
    obj = document.getElementById('myedit');
    s = obj.value.toLowerCase();
    res = '';
    for (i=0; i<cCode.length; i++) {
      s2 = cCode[i].toLowerCase().substr(0, s.length);
      if (s2 == s && s != '') {
        sp = cCode[i].split(',');
        res += '<tr><td width="35"><img src="'+flagsDirectory+sp[2]+'" width="32" height="32" border="0" /></td><td><a href="'+sp[3]+'" style="color:blue;text-decoration:none;"">'+sp[0]+' (+'+sp[1]+')</a></td></tr>';
        }
      }
    if (res != '') {
      res = '<table style="font-family:arial,tahoma;font-size:12px;color:#000000">'+res+'</table>';
      }
    document.getElementById('result').innerHTML = res == '' ? '&nbsp;' : res;
    } 
```

**注意：**我`flags`在脚本的目录中创建了 dir 并在其中放置了一些标志用于测试目的。

## 预览 #2

![在此处输入图像描述](../Images/fb1e2f567c776ea0b08739e65684e58e.png)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:15:06.830

使用 AJAX 的自动完成功能。这是一个例子：

```
http://jqueryui.com/autocomplete/#remote-jsonp 
```

并在此站点上使用 Bootstrap：

```
http://stackoverflow.com/questions/9232748/twitter-bootstrap-typeahead-ajax-example 
```

以及更深入的 jQuery UI 解释：

```
http://net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:15:15.540

答案是：是的，它可以用 JavaScript 来完成。

现在您需要考虑将这些信息存储在哪里。

你应该谷歌：JSON 对象并学会写一个。如果您担心它的呈现方式，则必须查找一些 HTML 和 CSS。当您获得一些代码时，我们将帮助您对其进行微调 :)

希望这可以帮助。

# c# - 当文件存在时，为什么我会收到 FileNotFoundException？

> ID：13094484
> 
> 赞同：0
> 
> 时间：2012-10-26T21:10:27.513
> 
> 标签：c#, asp.net, streamreader, filenotfoundexception

我正在尝试将文件保存到服务器，然后加载到阅读器中以供下载。但是，我得到一个*FileNotFoundExeption*。我保存到完全相同的路径，手动打开目录并可以在那里看到文件。但是，读取它会导致异常。这是我第一次尝试他的 - 我做错了什么吗？

```
try 
{
    using (StreamReader reader = new 
           StreamReader(HttpContext.Current.Server.MapPath(@"~/Downloads/data.text"))) 
    {
       // do something
    }
}
catch (Exception) 
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:24:32.937

仔细检查文件名！在您的一条评论中，您使用了文件名 data.txt 而不是名称 data.text。我想这只是你的代码中的一个错字。

# eclipse - maven eclipse:eclipse - 如何将某些依赖项作为 jar 文件

> ID：13094493
> 
> 赞同：0
> 
> 时间：2012-10-26T21:11:15.947
> 
> 标签：eclipse, maven

我确实有一个多模块项目，其中一个在工作区中引用了很少的其他项目。当我执行 maven eclipse:eclipse 时，它​​会生成 .classpath，其中包含对依赖项目的引用作为文件夹名称（如下所示）。

我知道要生成所有依赖项目以在类路径中作为 jar 文件使用，我们必须使用“useProjectReferences”。但是，我需要 child-project1 的类路径条目可用作 m2_repo 中 jar 文件的路径，并将 child-project2 的类路径条目保留为对文件夹的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:29:06.250

对您引用的项目进行全新安装。右键单击您的父项目-> 属性-> maven，取消选中“从工作区引用项目”。看看这是否有效。

# objective-c - 创建 NSString 或 NSArray 是否昂贵？

> ID：13094494
> 
> 赞同：1
> 
> 时间：2012-10-26T21:11:25.137
> 
> 标签：objective-c

我正在努力优化我的 TableViews 的性能，并且想知道在`cellForRowAtIndexPath`. 当然，另一种选择是将对象创建为 ivar，并在每次加载新单元格时设置它。

哪个更好，为每个单元格创建一个新对象，或为每个单元格重置相同的对象？

注意：我正在使用这些对象来做许多不同的事情，例如，我正在创建一个字符串来检查我从服务器下载的文本的长度，然后再将其传递到单元格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:17:22.850

创建简单的字符串和数组不会影响表的性能。创建*视图*很昂贵，绘制它们也很昂贵 - 这些是您需要优化以获得良好滚动的区域。

确定使用时间分析器和核心动画 FPS 仪器对仪器进行分析。这将突出显示代码中的热点，或者为您提供 60fps 的滚动率*，在这种情况下，您的工作就完成了！

**在设备上，当然*

# memory - 如何将 libc.a 对象放在 GCC LD 脚本的特定输出部分？

> ID：13094498
> 
> 赞同：1
> 
> 时间：2012-10-26T21:11:51.373
> 
> 标签：memory, static-libraries, ld, libc, map-files

我正在尝试将 libc 等函数`memcpy`放在`memset`内存的特定部分中。我试着这样做：

```
.section1
{
    /path/to/libc.a
    otherobj.o
}
.section2
{
    *(.text)
}

.section3
{
    *(.data .bss)
} 
```

使用 gcc 的 ld 工具和这个脚本和 -map 选项，我检查了生成的映射文件，发现它`memcpy`和其他符号仍然出现在第 2 节和第 3 节中。

# 解决方法：

最后，我只是将 lib 文件提取到它的目标文件集合中，并将它们分别放在我喜欢的位置。

# regex - 用于搜索和替换多个 html 文件中的多行的 Perl 脚本

> ID：13094500
> 
> 赞同：-1
> 
> 时间：2012-10-26T21:12:08.363
> 
> 标签：regex, perl

我在一个文件夹中有很多 html 文件。我需要以某种方式`<div id="user-info" ...>...</div>`从所有这些中删除 a 。据我所知，我需要为此使用 Perl 脚本，但我不知道 Perl 会这样做。有人可以帮我拿吗？

以下是“坏”代码的样子：

```
<div id="user-info" class="logged-in">
    <a class="icon icon-key-delete" href="https://test.dev/login.php?0,logout=1">Log Out</a>
    <a class="icon icon-user-edit" href="https://test.dev/control.php">Control Center</a>

</div> <!-- end of div id=user-info --> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:27:00.443

使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)：

```
for { glob '*.html' } {
    open :F html (.) ;
    delete //div[@id="user-info" and @class="logged-in"] ;
    save :b ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:27:39.480

`perl -0777 -i.withdiv -pe 's{<div[^>]+?id="user-info"[^>]*>.*?</div>}{}gsmi;' test.html`

`-0777`意味着什么都不分割，所以在整个文件中啜饮（而不是逐行，默认为 -p

`-i.withdiv`意味着更改文件，保留扩展名为 .withdiv 的原始文件（-p 的默认设置是仅打印）。

`-p`表示逐行传递（除了我们是 slurping）传递的代码（见 -e）

`-e`期望代码运行。

`man perlrun`或`perldoc perlrun`了解更多信息。

**这是另一种解决方案**，对于了解jquery的人来说会稍微熟悉一些，因为语法是*相似*的。这使用 Mojolicious`ojo`模块将 html 内容加载到 Mojo::DOM 对象中，对其进行转换，然后打印转换后的版本：

`perl -Mojo -MFile::Slurp -E 'for (@ARGV) { say x(scalar(read_file $_))->at("#user-info")->replace("")->root; }' test.html test2.html test*.html`

直接替换内容：

`perl -Mojo -MFile::Slurp -E 'for (@ARGV) { write_file( $_, x(scalar(read_file $_))->at("#user-info")->replace("")->root ); }' test.html`

注意，这不仅会**删除**div，还会根据 Mojo 的 Mojo::DOM 模块重新编写内容，因此标签属性的顺序可能不同。具体来说，我看到`<div id="user-info2" class="logged-in">`重写为`<div class="logged-in" id="user-info2">`.

Mojolicious 至少需要 perl 5.10，但在那之后就没有非核心要求了。

# ios - 更新分发证书后无法使用分发条款配置文件进行代码签名

> ID：13094506
> 
> 赞同：0
> 
> 时间：2012-10-26T21:12:34.480
> 
> 标签：ios, xcode, ios-provisioning, provisioning-profile

我最近更新了我的分发证书并将其添加到我的笔记本电脑中。我重新创建了一个使用新证书的分发配置文件并将其添加到 Xcode。唯一的问题是它现在找不到正确的分发配置文件。例如，App ID 为 18FH128DBH.ApplicationName，此处设置的 bundle ID 为 18FH128DBH.ApplicationName。但是，如果我尝试查找配置文件，它只会显示：

ApplicationName - 捆绑标识符 ('ApplicationName') 配置文件与捆绑标识符'18FH128DBH.ApplicationName 不匹配

因此，我删除了捆绑种子 ID，它找到了正确的配置文件进行签名。我可以从那里成功构建。但是，当我尝试提交到 App Store 时，我收到一条错误消息，指出“捆绑标识符“应用程序名称”与之前的捆绑标识符“18FH128DBH.ApplicationName”不同。不知道如何纠正这个问题；我已经为此工作了几个小时，但无济于事。

关于这是为什么的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:30:57.577

这些说明可能有点过时，但我过去也遇到过类似的问题，并为自己写了下来。我认为问题在于钥匙串“失控”。我不能保证这会奏效，因为老实说，我不确定是什么导致了问题，但这在过去对我有用。祝你好运！

启动 XCode Open Window Organizer 从您的设备中删除所有配置文件 删除“开发”下的所有配置文件 登录开发者网站 点击“证书”并撤销您的证书 在本地桌面上启动“钥匙串访问”。选择“登录”钥匙串 删除所有开发人员证书 删除所有公钥/私钥 关闭并重新启动“钥匙串访问” 返回开发人员门户并申请新证书（按照说明进行操作） 上传并批准 CSR 后确保新证书与适当的配置文件相关联。下载并安装新证书 打开 XCode -> 组织者并将您的设备添加到团队配置门户返回开发人员门户并下载并安装配置文件。您现在应该可以开始构建并安装到您的设备了。

# c# - 将 WebBrowser 的主体调整为 UserControl

> ID：13094508
> 
> 赞同：0
> 
> 时间：2012-10-26T21:12:38.537
> 
> 标签：c#, .net, wpf, user-controls, webbrowser-control

我正在开发一个屏幕，这个屏幕我有一个网格。在这个网格中，我有一个 UserControl WebBrowser。我正在使用这个组件来显示 XML 格式并突出显示语法（用颜色）。要显示的文本是通过 Binding 完成的，因此该组件是一个 UserControl，就像对接受 Binding 的相同修改所做的那样（因为原始不接受通过 Binding 的内容）。但是我遇到了以下问题：当用户在某个点调整程序的屏幕大小时，WebBrowser 的主体超出了网格的边界，使得屏幕在网格的底部很奇怪。我用其他组件测试过，没有出现这个问题。

看我的用户控件：

```
<UserControl x: Class = "Geraes.Library.Core.GUI.WPF.Controls.XmlBrowserControl" 
xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns: x = "http://schemas.microsoft.com/winfx/2006/xaml"
x: Name = "thisControl">
   <Grid Margin="0,0,0,0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
     <WebBrowser Name="WebBrowser" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
   </ Grid>
</ UserControl> 
```

在这里，我如何使用它：

```
<ct:XmlBrowserControl XmlDoc="{Binding ContentString}" Grid.Row="1" /> 
```

同样，我不明白为什么会发生这种情况，因为其他组件在这个网格中也能正常工作。

另一件事：我们正在使用 WebBrowser，因为到目前为止，它是显示 XML 格式和语法颜色的最佳组件。但是，如果您知道另一个比它更好且易于使用的产品，我会接受建议。欢迎任何帮助。

最好的问候，古斯塔沃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:50:43.677

我在使用 webbrowser 控件时遇到了类似的问题，最后我改用了[awesomium](http://awesomium.com/)并且发现它更好用。

我想调整 webbrowser（或 webcontrol）内容的大小以适应没有滚动条的内容，这样我就可以使用包含元素的滚动条（在我的例子中是网格）。我还从自定义控件开始，但随后切换到将绑定源添加为附加属性，并在内容加载后设置大小和可见性。我的情况是我使用你本地化存储的 html 字符串，但你可以使用 uri 代替

```
using System;
using System.Windows;
using Awesomium.Windows.Controls;
using Awesomium.Core;

namespace utilities
{

    public class WebBrowserHelper {

        public static readonly DependencyProperty BodyProperty =
            DependencyProperty.RegisterAttached("Body", typeof (string), typeof(WebBrowserHelper), new PropertyMetadata(OnBodyChanged));

        public static string GetBody(DependencyObject dependencyObject) {
            return (string) dependencyObject.GetValue(BodyProperty);
        }

        public static void SetBody(DependencyObject dependencyObject, string body) {
            dependencyObject.SetValue(BodyProperty, body);
        }

        private static void ScrollDataReceivedDelegate(object sender, ScrollDataEventArgs e)
        {
            var webControl = (Awesomium.Windows.Controls.WebControl) sender;
            webControl.Height = e.ScrollData.ContentHeight;
            webControl.Width = e.ScrollData.ContentWidth;
            webControl.Visibility = Visibility.Visible;
        }

        private static void OnBodyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
            var webControl = (Awesomium.Windows.Controls.WebControl) d;
            webControl.LoadHTML((string)e.NewValue);
            webControl.ScrollDataReceived += new ScrollDataReceivedEventHandler(ScrollDataReceivedDelegate);
            webControl.LoadCompleted += delegate {
                webControl.RequestScrollData();
            };
        }
    }
} 
```

和命名空间：

```
xmlns:utilities="clr-namespace:utilities;assembly=utilities"
xmlns:awesome="clr-namespace:Awesomium.Windows.Controls;assembly=Awesomium.Windows.Controls" 
```

和 xaml：

```
<awesome:WebControl 
    HorizontalAlignment="Left" 
    Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}, Path=ActualWidth}" 
    Height="1" 
    utilities:WebBrowserHelper.Body="{Binding html}" 
    Visibility="Collapsed" /> 
```

# java - Java中的通用“过滤器”

> ID：13094510
> 
> 赞同：1
> 
> 时间：2012-10-26T21:12:41.717
> 
> 标签：java, generics, sorting, rowfilter

我正在尝试基于通用范围实现各种数据类别的通用过滤器。在第一次迭代中，这是针对 JTable，我们知道列的名称和列中的数据类别。在这种情况下，过滤器视图如下所示：

ColumnTitle comboBox: is/is not comboBox: =, >, < , textBox min, textBox max

其中表列可能是 XML 构建器中指定的 String、double、int 等，并且可能有多行这些列要根据其他列进行过滤。[显然其中许多存在于世界上。]

我想基本上通过使用如下所示的`Range`类将其与 RowFilters 联系起来：

```
public class Range<T extends Comparable<? super T>> {

T low;
T high;

public Range(T aLow, T aHigh) {
    low = aLow;
    high = aHigh;
}

public boolean includes(T value) {
    boolean result = true;
    if ((getLow() != null) && (getLow().compareTo(value) > 0)) {
         return false;
    }

    if ((getHigh() != null) && (getHigh().compareTo(value) < 0)) {
         return false;
    }

    return true;
}

public T getLow() {
    return low;
}

public void setLow(T low) {
    this.low = low;
}

public T getHigh() {
    return high;
}

public void setHigh(T high) {
    this.high = high;
}

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("Range = ").append(low).append(" to ").append(high);
    return sb.toString();
}
} 
```

我的想法是本质上（不是下面的真实代码）构建以下列表：

```
class Filter { 
    Range<?> range;
    String name;
    Class<?> filterClass;
} 
```

在单个过滤器视图（或控制器）中进行类比较，然后将它们转换为`RowFilter`需要应用它们的时间。

我正在使用的代码库有 100 条语句，我完全厌恶这些语句，例如： `if (bob instanceof Person)`...

为了避免这种情况，我遇到了泛型和类转换的问题。

这是泛型类型擦除不可避免的问题吗？如果是这样，是否有一些体面的解决方法可以避免课堂测试分散在各处？

不幸的是，我不能： - 使用 Guava 或 Java 以外的任何东西（甚至 6 个）。- 重做基于 XML 的整个表构建器。- 使用数据库

一定有很多应用程序有一个表或数据库并且在代码编译时不知道数据描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:36:49.090

`TableModel`您可以使用以下级别过滤事物，而不是编写一堆过滤器代码[`TableRowSorter`](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableRowSorter.html)

> 使用 TableModel 提供排序和过滤的 RowSorter 实现。

[`RowFilter`](http://docs.oracle.com/javase/6/docs/api/javax/swing/RowFilter.html)并按照您的描述实现一个泛型。

擦除不应该​​进入它，而不是要求以`Comparable`适合最终用户排序的方式实现事物（这可能需要对区域设置敏感），我会`Comparator<? super T>`取而代之并让该排序值。这样，您也可以`null`始终如一地处理 s 。

# responsive-design - 使骨架网格系统更宽

> ID：13094513
> 
> 赞同：4
> 
> 时间：2012-10-26T21:13:11.070
> 
> 标签：responsive-design, skeleton-css-boilerplate

我很好奇那里是否有人曾经将骨架网格系统转换为具有更宽的最大宽度。这些天 960 像素有点小，我希望能接近 1100 像素。

如果有人以前这样做过或有任何开始更改的提示，那将是惊人的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-23T03:11:33.687

在骨架.css 文件中，在 Grid 部分更改

```
.container {
    max-width: 960px;
} 
```

至

```
.container {
    max-width: 1200px;
} 
```

或您喜欢的任何尺寸。这是最简单的解决方案，适用于我的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T14:58:57.213

两种选择：

*   [1200px](https://github.com/polikin/GetSkeleton1200)（Nicolas Poliquin，最后更新于 2013 年 5 月）
*   [1280px](http://webdesign.tutsplus.com/tutorials/complete-websites/building-a-responsive-layout-with-skeleton-widescreen/)（Ian Yates，2012 年 6 月，还包括没有嵌套的流体选项）

它们都只是用另一组 CSS 扩展了 bog 标准 960 网格，用于更大的浏览器尺寸。

就我个人而言，我可能会选择 1200，因为它与 960 具有相同的[因素](https://stackoverflow.com/a/7415835/188926)并满足我的强迫症:)

这里有一些关于[流体布局](http://webdesign.tutsplus.com/articles/general/life-beyond-960px-designing-for-large-screens/)的思考。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-10T12:38:12.947

有一个 sass 版本，允许您选择容器宽度、列数、断点和列边距。 [https://github.com/lazerwalker/Skeleton-SASS/](https://github.com/lazerwalker/Skeleton-SASS/)

# android - 在 android 上记录由 Open GL ES 生成的帧

> ID：13094518
> 
> 赞同：8
> 
> 时间：2012-10-26T21:13:42.783
> 
> 标签：android, opengl-es-2.0

我正在从相机捕获帧并通过 OpenGL ES 2.0 实时渲染它们。现在我想将它们与音频一起录制到电影文件中。在 iPhone 上，我有 AVAssetWriter 负责录制，给我 30fps。我在安卓上有哪些选择？我尝试搜索但找不到任何东西。

更新：对于那些想知道我想要做什么的人，请参阅这个应用程序：[https ://play.google.com/store/apps/details?id=com.androidillusion.videocamillusion&hl=en](https://play.google.com/store/apps/details?id=com.androidillusion.videocamillusion&hl=en)

这是我发现的唯一可以执行 30FPS 视频渲染/录制的应用程序。我的目标是试图弄清楚它是如何完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T22:03:15.810

一旦您从相机捕获帧并使用 OpenGL 渲染它们，我假设您的内存中已经有了这些帧，并且您不需要使用 OpenGL 来回读渲染的图像。

您可以使用[FFmpeg](http://ffmpeg.org/trac/ffmpeg/wiki/MingwCompilationGuide) 或[libtheora](http://www.theora.org/downloads)库将您的音频/视频流交织到一个文件中。两者都可以为 Android 编译并且对 NDK 友好。

这两个库都有很多教程。

对于 Theora，您可以使用 GLES 2 着色器将帧转换为 YUV 颜色。

**PS**如果您需要从 OpenGL ES 中读取一些内容 - 只需使用`glReadPixels()`并继续使用这些视频编码库。

# asp.net-mvc - Juice UI Datepicker 不记得分配给 Html.TextBoxFor 控件的 ID

> ID：13094523
> 
> 赞同：0
> 
> 时间：2012-10-26T21:14:28.293
> 
> 标签：asp.net-mvc, juice-ui

我正在尝试将 JuiceUI datetimepicker 挂接到日期文本框输入字段上。但是，即使我已经为 Html.TextboxFor(c => Model.Birthday) 控件分配了一个 ID，但由于某种原因 JuiceUI 没有看到这个 ID，并且我收到以下错误：

*值不能为空。参数名称：Targetcontrol 为空。*

```
<%=Html.TextBoxFor(c => Model.BIRTHDATE, new { id = "txtBirthday"}) %>
<Juice:Datepicker ID="dpBirthday" runat="server" TargetControlId = "BIRTHDATE" /> 
```

当我在 IE 中运行开发者工具时，会显示 id：

```
<input name="BIRTHDATE" class="text-box single-line" id = "BIRTHDATE" type="text" data-val-required="The BIRTHDATE field is required." data-val="true" value=""/> 
```

Juice UI 的 datepicker 没有看到我想要连接的控件的 ID 是否有原因？我应该使用其他东西来附加一个简单的 jQuery 日期选择器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:34:47.577

有一个包含 MVC 支持的 JuiceUI 待发布版本（此版本的源代码在 github 上，虽然我不确定为什么它还没有发布）。看起来您正在尝试将 mvc 与 webforms 控件混合使用？这不太可能奏效，因为 Web 表单控件依赖于底层页面结构。

# c++ - 迭代 Boost fusion::vector

> ID：13094535
> 
> 赞同：1
> 
> 时间：2012-10-26T21:15:26.630
> 
> 标签：c++, boost, iterator, boost-fusion

我正在尝试使用以下方法迭代 boost::fusion 向量：

```
typedef typename fusion::result_of::begin<T>::type t_iter;
  std::cout << distance(begin(t), end(t)) << std::endl;
  for(t_iter it = begin(t); it != end(t); next(it)){
    std::cout<<deref(it)<<std::endl;
  } 
```

distance cout 语句给了我一个有限的长度 (2)，但是循环似乎无限期地运行。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:20:00.557

你不能像这样迭代一个*Fusion*向量，每个迭代器的类型可能与前一个不同（通常是）。我想这就是你的代码中没有的原因`it = next(it)`，它会产生编译错误。

您可以将`boost::fusion::for_each`其与将每个元素打印到标准输出的函数对象一起使用：

```
struct print
{
    template< typename T >
    void operator()( T& v ) const
    {
        std::cout << v;
    }
};

...

boost::fusion::for_each( t, print() ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:25:33.177

`fusion`是一个很棒的库，你现在应该知道它在很多方面与你在日常 C++ 程序中使用的不同，它结合了编译时元编程的力量和运行时，因为你现在应该没有那种类型可以处理一个`fusion`容器中的所有物品。这意味着什么？这意味着这`result_of::begin<T>::type`并不总是匹配的，`next(it)`因此您不能像那样使用`fusion`迭代器`for`。

The obvious problem in your code is that you ignore return value of `next` and it will cause your code to run forever but you can't use it in `it = next(it)`, since their type may vary!!

So what you should do?? You should use `boost::fusion::for_each` for that purpose

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:20:38.840

`next`实际上并不推进迭代器，它只是返回下一个。

这可以在文档中看到，因为该函数`next`接受一个常量参数，这意味着它实际上不可能修改迭代器：

```
template<
    typename I
    >
typename result_of::next<I>::type next(I const& i);
                                         ^^^^^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:17:40.340

问题是在循环内你正在[取消引用](http://www.boost.org/doc/libs/1_35_0/libs/fusion/doc/html/fusion/iterator/functions/deref.html)你的迭代器。当你申请`next`它时，它没有任何意义，这就是你的循环永远运行的原因。

# sparql - 如何始终按名称查询 dbpedia 以获取编程语言？

> ID：13094536
> 
> 赞同：3
> 
> 时间：2012-10-26T21:16:04.803
> 
> 标签：sparql, dbpedia

似乎没有一致的方法来根据名称查询编程语言。例子：

```
http://dbpedia.org/page/D_(programming_language)
rdfs:label "D (programming language)"@en
dbpprop:name "D programming language"
owl:sameAs freebase:"D (programming language)"
foaf:name "D programming language" 
```

对比

```
http://dbpedia.org/page/C++
rdfs:label "C++"@en
dbpprop:name "C++"
owl:samwAs freebase:"C++"
foaf:name "C++" 
```

由于“编程语言”、“（编程语言）”、“编程语言”、“（编程语言”或“”是否是 dbpedia 中编程语言名称的一部分没有标准约定，我不知道如何一致按名称搜索。

我想创建某种 SPARQL 查询，为“D”返回[http://dbpedia.org/page/D_(programming_language](http://dbpedia.org/page/D_(programming_language) )，为“C++”返回 http://dbpedia.org/page/C++，但[我](http://dbpedia.org/page/C++)不知道该怎么做。

除非编程语言的各种三元组中至少有一个使用一致的命名约定，否则我将不得不通过首先查询 name + " (programming_language)" 来破解它，然后回退到 name + "(programming language", name + “编程语言”找不到结果。但我想要一个更健壮的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T23:35:59.720

您当然可以使用基本的子字符串匹配或正则表达式进行匹配，例如像这样查找“C++”的匹配项：

```
SELECT DISTINCT ?pl ?label
WHERE { 
    ?pl a dbpedia-owl:ProgrammingLanguage ;
        rdfs:label ?label .
    FILTER(langMatches(lang(?label), "en"))
    FILTER(regex(str(?label), "C\\+\\+")) 
} 
```

当然，对于像“D”这样的编程语言名称，上述内容将是有问题的，因为您会得到几个匹配项（“D”、“Dylan”、“MAD”等）。在这些情况下，您可能希望对结果进行一些巧妙的后处理，例如标记返回的标签并查看您的输入字符串是否作为独立单词出现。

SPARQL 中的正则表达式匹配是出了名的昂贵（就评估时间而言），但由于您将它与特定类别的类型约束结合起来，DBPedia 端点应该能够很好地处理这种查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:04:00.233

我会用

```
SELECT distinct ?pl ?label
WHERE { 
  ?pl a dbpedia-owl:ProgrammingLanguage ;
      rdfs:label ?label.
  ?label bif:contains "'C++'" .
  filter (str (?label) like '%C++%')
  filter (lang(?label)="en")
} 
```

`?label bif:contains "'C++'"`会在一定程度上过滤，更具体地说是针对 C++、C、Objective-C 等，因为 ++ 将被视为噪声并从实际搜索模式中排除。之后你有 C 并且需要两个加号，所以`filter (str (?label) like '%C++%')`会比正则表达式更快地检查它们。根据口味添加`filter (lang(?label)="en")`或不添加`filter (langmatches(lang(?label),"en"))`任何语言检查。

# syntax-highlighting - 如何重新初始化highlight.js？

> ID：13094541
> 
> 赞同：21
> 
> 时间：2012-10-26T21:16:32.987
> 
> 标签：syntax-highlighting

我的网站正在动态生成一些内容，所以我必须在加载之后以某种方式再次启动[highlight.js插件。](http://softwaremaniacs.org/soft/highlight/en/)

此代码用于启动荧光笔：

```
hljs.initHighlightingOnLoad(); 
```

我试图做类似`hljs.initHighlighting();`的事情再次这样做，但它不起作用。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-02-02T12:04:43.693

您必须先将调用设置为 false：

```
hljs.initHighlighting.called = false;
hljs.initHighlighting(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T17:21:34.393

您可以像这样重新初始化所有代码块。

```
$(document).ready(function() {
   $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
}); 
```

或者如果你有一个 ID 为 myBlock 的 div，你可以这样做。

```
$(document).ready(function() {
   $('#myBlock').each(function(i, e) {hljs.highlightBlock(e)});
}); 
```

# regex - 如何用替换和替换在vim中注释掉几行

> ID：13094544
> 
> 赞同：0
> 
> 时间：2012-10-26T21:16:56.123
> 
> 标签：regex, vim

假设我有一堆线

```
 echo "<br/>";
    echo "<pre>";
    error_log("whatever");
    echo "</pre>";
    echo "<br/>"; 
```

我想把它们注释掉，我可以运行这个命令

> s/^/#

但它将 # 符号放在行首而不是第一个单词的前面，所以它看起来像下面的行

```
#    echo "<br/>";
#    echo "<pre>";
#    error_log("whatever");
#    echo "</pre>";
#    echo "<br/>"; 
```

我怎样才能让它看起来更像下面的代码

```
 #echo "<br/>";
    #echo "<pre>";
    #error_log("whatever");
    #echo "</pre>";
    #echo "<br/>"; 
```

什么是正确的reg ex？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:20:27.093

有很多方法。这是一个：

```
:'<,'>s/^\s*/\0# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T05:46:01.870

另一个：

1.  直观地选择所有行`V<motion>`

2.  用于在每一行`:normal`执行*正常*`:'<,'>norm I#`模式命令， .

范围是自动添加的，所以完整的序列是`V4j:norm I#`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:19:15.077

您应该能够使用以下内容：

```
s/^[ \t]*/&#/ 
```

此正则表达式匹配行首的任何制表符或空格，然后替换为整个匹配 ( `&`) 后跟`#`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T21:20:19.883

我要做的一件事是转到行首 (`^`​​ )，点击`Ctrl+v`，然后输入行号，然后输入`gg`，然后执行`Shift-I`，输入`#`并按`ESC`。我确信有更好的方法，但它似乎对我有用:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T05:50:51.247

另一个：

1.  用 启动宏`qx`。

2.  在该行的第一个可打印字符之前插入一个 octothorpe，返回*正常*模式并向下一行`I#<Esc>j`

3.  停止录制`q`。

4.  使用执行宏`x`时间`5@x`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T09:04:11.683

对于评论输入和输出，我会依赖插件；许多是可配置的，并为多种编程语言提供多种样式的注释，所有这些都具有简短的映射。[NERD_Commenter](http://www.vim.org/scripts/script.php?script_id=1218)和[tComment](http://www.vim.org/scripts/script.php?script_id=1173)是两个流行的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T21:20:10.620

你可以这样做：

```
s/^\([\s\t]*\)/\1#/ 
```

这会将所有空间和制表符转换为变量并在符号`\1`之前恢复它们`#`

# jquery - 如何通过 .change 触发器传递 html 元素引用

> ID：13094546
> 
> 赞同：1
> 
> 时间：2012-10-26T21:17:15.337
> 
> 标签：jquery, parameter-passing, onchange, eventtrigger

我有一个名为 showStuff() 的函数，我想在初始化期间调用一次，然后在选择字段更改时再调用一次。我需要将类或 id 名称传递给函数，但这不起作用：

```
$('.filterChange').change($('#htmlElement'), showStuff); 
```

我究竟做错了什么？解决方法是在更改时调用通用函数，然后从那里调用 showStuff() 但我不明白为什么更改触发器不起作用。.bind 触发器也有同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:20:57.620

下面是如何将数据传递给事件的基本知识：

```
function greet(event) { alert("Hello "+event.data.name); }
$("button").on("click", { name: "Karl" }, greet);
$("button").on("click", { name: "Addy" }, greet); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T21:24:01.633

您应该将其作为 Map 传递，因为这是公认的语法。

```
$('.filterChange').change({'myelement': $('#htmlElement')}, showStuff);

function showStuff(e) {
   $(e.data.myelement.show());
} 
```

* * *

我认为你想要的是一个简单的内部函数，如下所示，

```
$('.filterChange').change(function () {
   showStuff($('#htmlElement'));
}).change(); //trigger during init or simply call showStuff($('#htmlElement')) 
```

# google-app-engine - Google App Engine 在部署时丢失 CSS

> ID：13094554
> 
> 赞同：2
> 
> 时间：2012-10-26T21:17:46.720
> 
> 标签：google-app-engine, python-2.7

当我将我的应用程序部署到 Google App 引擎时，不再找到 CSS。该应用程序在本地主机中很好。我不确定为什么会这样。应用引擎是否更改了文件结构？我在日志中收到以下错误：

```
2012-10-26 14:04:37.727 Static file referenced by handler not found:
stylesheets/main.css 
```

这是我的 app.yaml

```
application: vipermonkeyswhofly
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /.*
  script: vipermonkeyswhofly.app

libraries:
- name: jinja2
  version: 2.6 
```

我的 index.html 有这个网址：

> ```
> <link rel="stylesheet"  type="text/css"  href="/stylesheets/main.css" />   </head 
> ```

感谢您提供的任何帮助。我敢肯定，我错过了一些显而易见的事情，但到目前为止我一直没有意识到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:56:05.423

检查文件系统上的文件夹和文件是否也是小写。(/stylesheets/main.css) 如果您使用的是 Windows，那么它似乎不区分大小写，但生产环境是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:30:19.503

另一件值得注意的事情是 main.css 仅在标题为“使用静态文件”的部分中创建，该部分位于“使用 JSP”之后。因此，如果您喜欢我并在每个部分之后进行部署，您将看到此错误，直到您创建 main.css 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T11:54:30.387

另外值得注意的是，在您的`app.yaml`文件中，如果您有以下映射：

```
# static directories #
- url: /css
  static_dir: css

- url: /img
  static_dir: img

- url: /js
  static_dir: js 
```

您的 HTML 文件需要像这样引用它们（注意文件路径中的前导 /）：

```
<link href="/css/style.css" rel="stylesheet"/> 
```

# mysql - MYSQL查询表并替换结果通配符？

> ID：13094557
> 
> 赞同：0
> 
> 时间：2012-10-26T21:17:50.217
> 
> 标签：mysql

是否可以替换单元格中的部分数据。例如，如果我在单元格中有以下 URL，www.website.com/p=1113，我是否可以替换 www.website.com 但保留 p=1113？最终结果为 www.newwebsite.com/p=1113

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:22:31.350

要替换`website`为`newwebsite`，您可能需要使用`REPLACE()`以下方法：

```
 SELECT REPLACE('www.website.com/p=1113', 'website', 'newwebsite'); 
```

这将导致：

```
 www.newwebsite.com/p=1113 
```

# algorithm - 计算（非抢占式）FCFS 队列中的等待时间和周转时间

> ID：13094558
> 
> 赞同：6
> 
> 时间：2012-10-26T21:17:51.147
> 
> 标签：algorithm, operating-system, queue, scheduler

我有6个过程如下：

```
-- P0 --
  arrival time = 0 
  burst time = 10  

-- P1 --
  arrival time = 110 
  burst time = 210  

-- P2 --
  arrival time = 130 
  burst time = 70  

-- P3 --
  arrival time = 130 
  burst time = 70

-- P4 --
  arrival time = 130 
  burst time = 90

-- P5 --
  arrival time = 130 
  burst time = 50 
```

如何计算每个流程的等待时间和周转时间？系统应该是非抢占式的（进程在完成之前获取 CPU）。另外：该系统中有 4 个逻辑处理器。

假设 systemTime 是当前系统的正常运行时间，到达时间是相对的。即：到达时间为 0 表示进程在系统启动时开始；到达时间为 130 表示进程在系统启动 130 个单位后启动。

这是正确的：`waitingTime = (systemTime - arrivalTime)`？

我认为这是`systemTime - arrivalTime`该进程在 fcfs 队列中等待使用 CPU 的时间（或者这是错误的吗？）

对于周转时间，我在想：`turnaroundTime = burstTime + waitingTime`，因为等待时间和突发时间应该是完成该过程的总时间。虽然我不知道我的直觉是否正确。

任何和所有的读数将不胜感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T21:24:25.190

对于非抢占式系统，

```
waitingTime = startTime - arrivalTime

turnaroundTime = burstTime + waitingTime = finishTime- arrivalTime 
```

*startTime* = 进程开始执行的时间

*finishTime* = 进程完成执行的时间

`timeElapsed`您可以在 system( )中跟踪当前经过的时间。一开始将所有处理器分配给一个进程，然后执行直到最短的进程执行完毕。然后将这个空闲的处理器分配给队列中的下一个进程。这样做直到队列为空*并且*所有进程都执行完毕。此外，每当一个进程开始执行时，记录它的`startTime`，当完成时，记录它的`finishTime`（都与 相同`timeElapsed`）。这样你就可以计算出你需要什么。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-03-22T05:42:09.403

```
wt = tt - cpu tm.
Tt = cpu tm + wt. 
```

哪里`wt`是等待时间，哪里是`tt`周转时间。Cpu时间也称为突发时间。

# c# - 垃圾收集烦恼 - 如何让 Obj 的 Ptr 保持 Obj 活着？C＃

> ID：13094560
> 
> 赞同：0
> 
> 时间：2012-10-26T21:17:59.137
> 
> 标签：c#, pointers, garbage-collection

我习惯了 C 和指针的使用。我知道你可以用 C# 中的指针做很多事情，但是垃圾收集越来越烦人。是否可以创建指向对象的指针，并以某种方式将指针链接到对象，这样只要指针还活着，对象就不会被清理？有什么谎言

```
unsafe void* Function1 () {
 SomeStruct s = new SomeStruct();
 void* ptr = (void*) &s;
 return ptr;
}

main() {
  void* p = Function1();
  p->field = 3;
} 
```

当我尝试这样做时，对象很好，并且指针在 Function1 中工作，但是一旦函数退出，尽管指针有效，对象就被销毁了。就垃圾收集器而言，如果有某种方法可以将两者联系起来，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:23:51.570

假设您的类型`SomeStruct`名称不是很糟糕，实际上是 a `struct`，那么您正在堆栈上为它分配内存。

当您从该方法返回时，分配该结构的堆栈帧被删除，因此在该方法之外该结构根本不再存在。您无法阻止垃圾收集器将其删除，因为不是垃圾收集器将其删除。它是从执行此操作的方法返回的。

请注意，`struct`C# 中的 a 与 C 中的 a 是不同的概念`struct`。在 C# 中，结构始终是值类型，而在 C 中，它可以是值类型或引用类型，具体取决于您如何使用它。

如果要保留该值，则可以将其装箱以将其保留在堆上。您返回对装箱值的引用，而不是指针，因为垃圾收集器不关心指针，只关心引用：

```
object Function1 () {
  SomeStruct s = new SomeStruct();
  // box the value:
  object o = s;
  return o;
}

main() {
  object p = Function1();
  // unbox the value:
  SomeStruct s = ((SomeStruct)p);
  s.field = 3;
} 
```

您当然可以传递结构而不是将其放在堆上：

```
SomeStruct Function1 () {
  return new SomeStruct();
}

main() {
  SomeStruct p = Function1();
  p.field = 3;
} 
```

如果您确实需要将 存储`struct`在堆上，那么您应该考虑将其`class`改为 a ，然后它会自动结束在堆上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:22:50.353

假设`SomeStruct`实际上`struct`不是值类型，并且在您的特定情况下它是在堆栈上分配的。请注意，`struct`在 C 和`struct`C# 中具有不同的含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:24:06.920

引用计数并停止分配被垃圾收集直到不再使用的指针是`reference`. 使用引用，您根本不可能需要指针或`unsafe`代码。

C# 不是 C，所以要小心尝试编写 C 代码 - 你需要学习 C# 并意识到尽管它们明显相似，但语言之间存在一些非常大的差异。

# cloudbees - 应用程序中的 Cloudbees 实例可以直接通信吗？

> ID：13094562
> 
> 赞同：1
> 
> 时间：2012-10-26T21:18:28.883
> 
> 标签：cloudbees

我正在寻找在云中构建一个基于 Akka 的应用程序，用于我正在引导的车库初创公司；根据应用程序的性质，它是半状态的，尽可能多地缓存在 RAM 中以提高性能。（它可以容忍定期关闭和重新启动，但我们希望主要通过 Actors 内的缓存信息进行操作。）

该架构是为服务器集群设计的，必要时在它们之间进行通信，以便节点 A 上的用户会话可以在适当时查询节点 B 上的中间件 Actor。所以我的问题是，这在 CloudBees 中有多难？

我从[这个页面](http://wiki.cloudbees.com/bin/view/RUN/Akka)的理解是，还没有自动目录服务来管理这种集群内通信，但我可能可以忍受——更糟糕的是，我应该能够通过数据库管理发现，每个节点在它出现时注册自己并打开与其他节点的多对多通信。

不过，我想检查的是，这种沟通是直截了当的。每个节点是否有一个可靠的本地 IP，它可以通过广告让其他人联系它，这至少在应用程序运行期间是稳定的？或者节点是否有另一种/更好的方式将其地址通告给运行此应用程序的其他节点？

（我假设一个应用程序的节点都共享同一个数据库实例。）

此处的任何指导将不胜感激。我想尽快选择一个托管服务提供商，并继续返回 CloudBees 作为最有前途的选项......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:18:05.490

目前对实例之间的通信没有限制 - 诀窍在于发现成员资格。很快就会发布一个 API，可以让您跟踪成员资格 - 但目前，以下可能有效：

*   要获取端口，请查看 $PWD/.genapp/ports 中的文件名（因为应用程序可以有多个端口） - （例如 System.getenv("PWD") + ".genapp/ports" - 列出其中的文件目录 - 通常只有 1 - 文件名是端口）。还有其他方法——例如 JVM 应用程序上的“sun.java.command”系统属性。
*   主机名可以通过通常的方式获得（例如 InetAddress.getLocalHost().getHostName()）：这个主机名将是私有名称 - 即它将解析为私有 IP - 有利于节点到节点的通信。
*   公共 IP/主机名：执行 HTTP 获取（从服务器）到以下 URL：（ `http://instance-data/latest/meta-data/public-hostname`当然只会返回服务器端的公共 IP）。

（见[http://developer-blog.cloudbees.com/2012/11/finding-port-or-address-of-your.html](http://developer-blog.cloudbees.com/2012/11/finding-port-or-address-of-your.html)）

然后，正如您所说，您可以在启动时向数据库注册适当的端口/私有主机名，然后在每个节点上读取它以“播种”集群（akka 不必了解所有成员 - 只需足够的种子）我认为一个 2 阶段启动：1：注册主机/端口，2，寻找其他成员，将它们作为种子成员添加到本地 Akka 配置中（可能需要定期做一段时间，因为其他节点启动 -以确保其播种足够）

从我在这里阅读 Akka 设置：http: [//doc.akka.io/docs/akka/snapshot/scala/remoting.html](http://doc.akka.io/docs/akka/snapshot/scala/remoting.html)

看起来您可以指定端口 - 所以如果可能的话，我会将其设置为 app_port 环境变量 - 这意味着每个节点都可以通过私有主机名与该端口进行通信。但是，http 流量也将被路由到它——akka 也可以处理这个问题——或者它是否需要一个用于 akka 的离散端口和另一个用于任何 http 接口的端口？

# python - 为什么每次尝试运行 Python 程序时 Eclipse 都会要求我“构建”？

> ID：13094567
> 
> 赞同：3
> 
> 时间：2012-10-26T21:18:55.200
> 
> 标签：python, eclipse, build, ant, pydev

我是编程和使用 pydev 在 Eclipse 中运行我的 python 的新手。我正在使用 Eclipse EE 和 Python 2.7.3 我要运行的代码在这里：

```
def evaluate_poly(poly, x):

        sumPoly = 0

        for i in range(0,len(poly)):
            #calculate each term and add to sum.
            sumPoly = sumPoly+(poly[i]*x**i)
        return sumPoly

def compute_deriv(poly):

    derivTerm = ()

    #create a new tuple by adding a new term each iteration, assign to derivTerm each time.
    for i in range(0,len(poly)):
    #i is the exponent, poly[i] is the coefficient,
    #coefficient of the derivative is the product of the two.
        derivTerm = derivTerm + (poly[i]*i,)
    return derivTerm

def compute_root(poly, x_0, epsilon):

    #define root to make code simpler.
    root = evaluate_poly(poly,x_0)
    iterations = 0

    #until root (evaluate_poly) is within our error range of 0...
    while (root > epsilon) or (root < -epsilon):
    #...apply newton's method, calculate new root, and count iterations.
        x_0 = (x_0 - ((root)/(evaluate_poly(compute_deriv(poly),x_0))))
        root = evaluate_poly(poly,x_0)
        iterations = iterations + 1
    return (x_0,iterations)

print compute_root((4.0,3.0,2.0),0.1,0.0001) 
```

每次我尝试运行这个 Eclipse 时，都会要求我进行 ant build。当我单击确定时，没有任何反应。这只发生在我在函数内部运行函数时，看起来非常基本的代码不是问题。出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:27:08.440

如果你只有函数，python 不会做任何事情。它不会无缘无故地运行任意函数。如果你想打印一些东西，你需要调用你的一个函数。最好的方法是将其添加到代码的底部：

```
if __name__ == '__main__':
    evaluate_poly([1, 2, 3], 4) 
```

# nosql - NoSql vs BigTable (comparison of client API's)

> ID：13094568
> 
> 赞同：0
> 
> 时间：2012-10-26T21:18:56.300
> 
> 标签：nosql, bigtable

This might sound like a dumb question but I am recently learning about a Big Table.

Would someone please tell me the advantage of using Big Table over NoSql databases. I eventually see both of them as semi-structured data storage. Some people mention that Big Table has much more simple interface as compared to a NoSql database but I don't quite understand how. Also is there a way I can try out API's of Big Table ??

Also , does Big Table have web interfaces , if yes can I get links to it as well ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:35:16.573

BigTable is Google's system to store large documents of data. It doesn't generates relations between documents as it doesn't benefit the architecture of Google's applications. This philosophy of "Unrelated" data-instances are the basic idea of [NoSQL](http://en.wikipedia.org/wiki/NoSQL). So long story short, BigTable is NoSQL as NoSQl is the theoretical idea ( just like RDBMS is the basic theory of MySQL,MSSQL and others ).

An approach of bigtable has been made and gave birth to [hadoop](http://hadoop.apache.org/). It is widely used by many industries.An other related implementation is [storm](http://storm-project.net/) which tries to operates faster when it comes to serve real time data.

Regarding [NoSQL databases](http://nosql-database.org/) you should take a good look at [hbase](http://hbase.apache.org/), [cassandra](http://cassandra.apache.org/) and if you are coming from the RDBMS world [MongoDB](http://www.mongodb.org/) would be the best choice to start realizing the use of NoSQL.

Mind to take a good look at the Google's notes regarding [BigTable](http://research.google.com/archive/bigtable.html).

Cheers!

# sql - 没有找到时找到下一个结果？

> ID：13094576
> 
> 赞同：2
> 
> 时间：2012-10-26T21:19:35.720
> 
> 标签：sql, sql-server, common-table-expression

我正在尝试使用 CTE 遍历层次结构，它在一种情况下工作正常，但在另一种情况下却不行，这就是我卡住的地方。

给定查询；

```
;WITH BOMcte (ID, Code, BomName , ProductID, ProductCode, ProductName , ParentAssemblyID )
AS
(
    SELECT   b.id,
             b.code,
             b.name,
             p.id,
             p.default_code,
             p.name_template,
             b.bom_id
    FROM mrp_bom AS b
    INNER JOIN product_product p on b .product_id = p.id    
    WHERE b. bom_id IS NULL 
    and b.id = @AssemblyID 
    UNION ALL
    SELECT   b.id,
             b.code,
             b.name,
             p.id,
             p.default_code,
             p.name_template,
             b.bom_id
    FROM mrp_bom AS b
    INNER JOIN product_product p on b .product_id = p.ID    
    INNER JOIN BOMcte AS cte ON b.bom_id = cte.ID    
)
SELECT BoM.* FROM BOMcte BoM 
```

该查询的工作方式与我预期的一样，因为 BoM 向下钻取到 bom_id 列上的子 bom。

在代码（来自 OpenERP）中，当未找到子 BoM 时，（无 bom_id）根据 product_id 搜索子产品：

```
sids = bom_obj.search(cr, uid, [('bom_id','=',False),('product_id','=',bom.product_id.id)]) 
```

我想知道是否有一种方法可以用来在 SQL 中完成同样的事情。一旦 CTE 不返回行，请检查 product_id 和 null bom_id。我曾考虑过另一个递归成员，但我认为这不是我想要的。

我知道我的问题可能不是很清楚，但是有什么建议吗？

SQL Fiddle 示例数据：http://sqlfiddle.com/#!3/b9052/ [1](http://sqlfiddle.com/#!3/b9052/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:37:56.167

按照 HABO 的建议尝试以下操作`on b.bom_id = cte.ID or ( b.bom_id is NULL and b.product_id = cte.product_id )`并且您已经尝试过的原因不起作用是因为它永远不会在逻辑上终止。

但是，您确实有一个终止表达式，即在找不到孩子时执行一次。最简单的方法是添加一个 UNION 来检查以确保 BOMcte 中的一行没有孩子

```
WHERE NOT EXISTS (SELECT * FROM BOMcte bc WHERE b.id =  bc.PARENTASSEMBLYID) 
```

完整的 SQL

```
;WITH BOMcte (ID, Code, BomName , ProductID, ProductCode, ProductName , ParentAssemblyID )
AS
(
    SELECT   b.id,
             b.code,
             b.name,
             p.id,
             p.default_code,
             p.name_template,
             b.bom_id

    FROM mrp_bom AS b
    INNER JOIN product_product p on b .product_id = p.id    
    WHERE b. bom_id IS NULL 
    and b.id = @AssemblyID 
    UNION ALL
    SELECT   b.id,
             b.code,
             b.name,
             p.id,
             p.default_code,
             p.name_template,
             b.bom_id
    FROM mrp_bom AS b
    INNER JOIN product_product p on b .product_id = p.ID    
    INNER JOIN BOMcte AS cte ON b.bom_id = cte.ID    
)
SELECT * FROM BOMcte
UNION 

SELECT   b.id,
             b.code,
             b.name,
             p.id,
             p.default_code,
             p.name_template,
             b.bom_id

    FROM mrp_bom AS b
    INNER JOIN product_product p on b.product_id = p.id 
    WHERE NOT EXISTS (SELECT * FROM BOMcte bc WHERE b.id =  bc.PARENTASSEMBLYID) 
```

[SQL 演示](http://sqlfiddle.com/#!3/b9052/31)

注意：可以使用递增的 LEVEL 值对 CTE 中的终止表达式进行编码，如[MSDN 文章中](http://msdn.microsoft.com/en-us/library/ms186243%28v=SQL.105%29.aspx)关于递归查询的那些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T01:05:28.730

我有点不清楚您要做什么，但是对于您的最终加入，这样的事情可能会做到：

```
on b.bom_id = cte.ID or ( b.bom_id is NULL and b.product_id = cte.product_id ) 
```

# meteor - 如何操纵流星中的注册过程？

> ID：13094585
> 
> 赞同：3
> 
> 时间：2012-10-26T21:20:22.930
> 
> 标签：meteor

我刚开始玩流星。它看起来棒极了。我想将注册过程从accounts-ui自定义为：

1.  让用户在注册时输入其他数据（他们的生日）
2.  在他们注册后，向他们展示另一个模式/页面，让他们输入更多数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:10:41.367

或者您应该使用“meteor add accounts-password”然后您可以使用 Accounts.api 进行自己的注册过程。

[http://docs.meteor.com/#accounts_createuser](http://docs.meteor.com/#accounts_createuser)

根据需要制作表单，然后使用任何方式将表单数据传递给

```
Accounts.createUser(options, [callback]) 
```

就像是

```
var options = {
    username: $('#input-username').val(),
    password: $('#input-password').val(),
    profiles: {
        birthday: $('#input-birthday').val
    }
};
Accounts.createUser(options) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T12:23:02.113

如果您使用 Accounts.createUser，您可以像这样在配置文件下存储其他数据。

```
Meteor.methods({
'createUser': function(firstname, lastname, username, twitter, email, password, role){
    Accounts.createUser({

        email: email,
        password: password,
        username: username,
        profile: {
            firstname: firstname,
            lastname: lastname,
            twitter: twitter,
            birthdate: birthdate
        }
    }); 
}, 
```

如果您想要第二个表单，您可以将用户路由到它。

```
Template.registerUser.events({
    'submit form': function(event){
        event.preventDefault();
        var firstname = event.target.firstnam.value;
        ...

        Meteor.call('createUser', clubName, capacity, description, homepage);
        Router.go('userInfoStep2');
    }
}); 
```

我想你也可以在 routfile 中进行重定向。

这是一个简单的解决方案，不会处理用户在中间中断注册过程的情况。但也许其他人可以提供帮助？

# c++ - 返回一个向量作为参数

> ID：13094591
> 
> 赞同：0
> 
> 时间：2012-10-26T21:20:54.860
> 
> 标签：c++, vector, reference

我有这些功能：

```
vector<int> foo1() {
    vector<int> v;
    return v;
}

void foo2( vector<int>& parameter ) {
    // Do something
}

void foo3( vector<int> par ) {
    foo2( par );
}
...
foo2(foo1());   // Doesn't work (1)
foo3(foo1());   // Works (2) 
```

有没有办法保持函数 foo2 原样，因为它是将向量作为参数传递的最佳方式，并且可能重载它以使（1）工作？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:40:19.017

通过引用传递通常用于“输出参数”，用于向调用者返回值的参数：

```
void bar(int &i, int &j);

int i, j;
bar(i, j); // sets i and j
// use i and j values here 
```

C++ 碰巧不允许将临时对象绑定到非常量左值。所以这不起作用：

```
bar(1,2); 
```

但是，需要允许在不复制临时变量的情况下传递它们，并且在 C++11 之前，通过允许临时变量绑定到*const*左值引用来满足这一需求。这是一个特殊规则，它仍然可以防止错误地使用临时参数作为输出参数，但可以避免复制。

由于您使用向量作为输入参数而不是输出参数，这将是避免复制的适当方法：

```
void foo2(vector<int> const &parameter) {
    // Do something
} 
```

如果“做某事”代码最终确实复制了向量，那么最好这样做：

```
void foo2(vector<int> parameter) {
    // Do something
} 
```

因为这允许编译器在调用的特定情况下为您优化复制`foo2`，也许会消除复制。

# java - 关于应用程序日志级别的建议

> ID：13094593
> 
> 赞同：4
> 
> 时间：2012-10-26T21:20:57.953
> 
> 标签：java, logging, maintenance, error-logging

我目前正在一个大型项目中工作，其中有很多相互通信的应用程序。

我和我的团队通过必要的错误修复和更改请求来管理和调整系统中的应用程序。该系统被大量使用，应用程序使用大量日志记录。

典型例子：

**消息客户端**

```
public void save(final Message message) {
   logger.info("Trying to save message: {}", message);

   boolean result = false;
   try {         
     result = messageService.save(message);
   } catch (final MessageStoreException e) {          
      logger.warn("Unable to save message {}", message, e);
      throw e;
   } catch (final Exception e) {
      logger.error("Unknown error when trying to save message!", e);
   }

   if (!result) {
      logger.warn("Could not save the message!");
   }
} 
```

**消息服务**

```
public boolean save(final Message message) throws MessageStoreException {  
   if (message == null) {
      throw new IllegalArgumentException("message!");
   } 

   final boolean result = messageStore.store(message);
   if (result) {
      logger.info("Stored: {}", message.getId());
   } else {
      logger.warn("Unable to store: {}", message.getId());
   }

   return result; 
} 
```

**注意：**我知道示例代码没有最好的错误处理，但这就是它在我们管理的许多应用程序中的样子。

当然，这使得日志文件非常大。

我想在生产环境中打开日志级别`info`和日志级别`warn`，并且只保留`error`级别，以便日志文件只包含需要注意的意外错误，而不是其他。

其他开发人员不喜欢这个想法，因为他们在查看日志文件以查找错误和错误时不知道如何遵循“应用程序流程”。

我理解这些论点，我觉得我需要社区的一些意见。

那么，这里的最佳实践是什么？我们应该在生产环境中使用 info/warn 日志级别还是应该只使用错误日志记录？或者两者兼而有之？

谢谢！

**更新：**应用程序在多台服务器上运行，我们目前将所有内容记录到文件中（通常每个应用程序有一个日志文件，带有[RollingFileAppender](http://logback.qos.ch/manual/appenders.html#RollingFileAppender)）。开始记录到数据库的工作量很大，所以这不是一个选项。

**结论：** 日志记录并非完全无关紧要。我们不会关闭信息和警告级别（这是一个非常激烈的操作），而是就像@jgauffin 所说的那样，检查并分析打印“不必要”日志消息的应用程序的业务规则。

结案！感谢大家的大力投入和良好的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:27:11.890

> 我想在生产环境中关闭日志级别信息和日志级别警告，并且只保留错误级别，以便日志文件只包含需要注意的意外错误而没有其他内容。
> 
> 其他开发人员不喜欢这个想法，因为他们在查看日志文件以查找错误和错误时不知道如何遵循“应用程序流程”。

这是一个典型的问题。让我们分析一下日志：

```
final boolean result = messageStore.store(message);
   if (result) {
      logger.info("Stored: {}", message.getId());
   } else {
      logger.warn("Unable to store: {}", message.getId());
   } 
```

这确实是一个问题，因为团队似乎不确定是否可以存储消息是否是域规则。我很可能会说，无法存储消息确实应该是一个异常（因此应该抛出一个异常）。但是话又说回来，我对域/业务规则一无所知。

然而，像这样的日志记录通常表明业务规则不清楚。因此，一个更好的解决方案可能是让团队分析为什么日志记录如此繁重。应用程序是否需要大量维护？那么最好删除日志记录和更多错误检查（如验证方法参数）而不是切换日志级别。

团队表示，如果没有日志记录，他们就无法遵循流程，这表明同样的事情：不检查参数，因此错误被引入深层而不是应用程序的早期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:44:53.777

您是否考虑过将不同的内容记录到不同的日志中。一个日志中的事务数据，您可以在其中跟踪事务并将错误记录到另一个日志中。这将允许您跟踪消息的状态并拥有一个日志，可以轻松查看是否出现问题。

与具有访问日志和错误日志的 Web 服务器进行比较。我同意你的团队的观点，除非你有其他方法来遵循流程，否则你不能在生产中禁用这些消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:58:57.860

您可以登录到数据库。（设置一个像样的日志框架应该不难。）

从那里您可以根据级别和年龄删除条目。**更新：**首先您记录所有内容（如果您愿意，包括调试）。比如说，一周后，您删除了 DEBUG 消息。一个月后，您删除 INFO 消息。此时，您已经拥有了现在存储在文件中的所有内容。

*奖励：*当怀疑有错误时，您暂时暂停删除。

之后，也许，在一年之后，你删除了其余的。

通过这种方式，您应该能够满足这两个需求：所需的空间和保存的信息。这可以根据需要进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T13:00:53.863

我使用过的大多数安装都在生产中启用了信息、警告和错误日志记录。我们希望在系统启动时看到一堆信息级别的日志记录，之后就很少了。我们希望在正常操作期间不会看到错误或警告日志记录 - 如果有的话，那是因为存在需要调查的问题。

不过，您似乎正在做比这更多的信息记录。您可以考虑更改其中的一些以调试日志记录，然后将其禁用，或者将其写入单独的日志文件以显示错误和警告。

但是，拥有大型日志文件是否有问题？你的磁盘用完了吗？您是否难以在其中找到有用的信息？如果没有，那就让事情保持原样。如果您的问题是寻找有用的信息，那么我将集中精力寻找处理大型日志文件的方法，而不是试图使它们更小。详细日志中的信息在各种方面都非常有用，并且没有根本原因认为大小应该是一个问题。

我现在工作的地方，我们正朝着将越来越多的东西放在我们的日志中。目前正在通过监控系统处理的事情（处理的消息计数、数据库查询的时间等）正在转移到日志中。然后，我们只需将所有日志发送到中央[logstash](http://logstash.net/)实例，这样我们就可以轻松搜索和分析它们。我们甚至可以从日志流中生成指标和警报，而不必在应用程序中进行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T06:27:02.197

对于生产环境，最好为记录器级别`TRACE`和`ERROR`.

在`TRACE`日志文件中，您可以识别不需要的消息，删除这些消息。

# c++ - Voltdb + gwan 与 C++

> ID：13094594
> 
> 赞同：1
> 
> 时间：2012-10-26T21:21:02.477
> 
> 标签：c++, g-wan, voltdb

我已经决定像我的应用服务器一样使用 GWAN，我希望使用 voltdb 来存储数据。有没有人一起用过的？

我将用 C++ 开发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:53:06.077

我在 VoltDB 工作。我们不知道有人尝试过这个，但我们最近在我们的论坛上遇到了类似的问题：http: [//community.voltdb.com/node/1862](http://community.voltdb.com/node/1862)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:53:16.263

在最近在 SFO 博览会上展示的[在线游戏演示](http://gwan.com/blog/20121001.html)`ORACLE Open World`中，我们没有使用`voltDB`，而是使用`ORACLE noSQL`Java（分布式）KV 存储。

由于我们使用 G-WAN 作为`100 millions of records`实时更新的数据库缓存加速器（在单个服务器上），我想这种体验与您的情况相关，因为 voltDB 不处理这种 TPS 速率。

你对你的项目说得很少，所以我将描述我们在演示中所做的事情：C servlet 创建了工作线程。一些用于更新机器人的位置（方向、方向、速度），另一些用于将修改推送到基于 Java 的远程 noSQL KV 存储。

这使得同一个 servlet 可以实时回复发送新位置的人类玩家并查询附近所有机器人的列表（也是并行化的）。

这是因为 G-WAN 同时支持 C 和 Java servlet：C 为缓存提供了紧凑的数据结构（1 亿条记录消耗大量 RAM），Java 允许 G-WAN 与 noSQL DB 通信.

我不知道你的应用程序会做什么，但至少你有一个使用 G-WAN 和（巨大的）数据库的例子，它必须实时做出反应。

G-WAN 支持 C 和 C++ servlet，因此您可以使用自己喜欢的 C++ 库。

# c++ - Boost Spirit计算器示例运行

> ID：13094598
> 
> 赞同：1
> 
> 时间：2012-10-26T21:21:17.543
> 
> 标签：c++, boost, compiler-construction, grammar, boost-spirit

我是一个精神初学者，现在正在研究它。我在[这个](http://www.boost.org/doc/libs/1_46_1/libs/spirit/example/qi/calc6/)例子中，一个简单的计算器。我成功编译并运行了程序。运行它说的程序时，键入一些语句，然后键入 . 编译和运行这些语句。我在不同的运行中键入以下内容，并在每行之后键入 a 。（时期）。

```
2
2;
2*2
2*2;
x=2
x=2; 
```

但它们都不起作用。每次它说“解析失败。”。缺少什么，或者这个例子有什么问题。示例程序的语法在[这里](http://www.boost.org/doc/libs/1_46_1/libs/spirit/example/qi/calc6/calc6b.hpp)。请注意，我知道我没有使用最新的精神，我使用的是 1.46.1 版本，这是 Ubuntu 12.04 中的默认版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T09:05:59.457

您似乎错过了程序解析语句而不是裸表达式的事实，请参见[http://www.boost.org/doc/libs/1_46_1/libs/spirit/example/qi/calc6/calc6c.hpp](http://www.boost.org/doc/libs/1_46_1/libs/spirit/example/qi/calc6/calc6c.hpp)

所以试试这个：

```
var y; 
var x = 6; 
y = 3 * x; 
```

输出：

```
-------------------------
Parsing succeeded
-------------------------
Results------------------

    x: 6
    y: 18
-------------------------

Bye... :-) 
```

希望有帮助。并***考虑升级 boost*** - 在 Debian/Ubuntus 上从源代码安装它非常简单。

# wordpress - 将 wordpress 用户更改为管理员

> ID：13094601
> 
> 赞同：6
> 
> 时间：2012-10-26T21:21:29.747
> 
> 标签：wordpress

我正在尝试设置生产 Wordpress 博客的本地副本。在生产中，我是用户但不是管理员，所以我试图将自己更改为本地管理员。我按照[这篇](http://www.dnawebagency.com/how-to-add-an-admin-user-to-the-wordpress-database)博文中的说明使自己成为管理员，因此我执行了以下 SQL 查询：

```
INSERT INTO usermeta(user_id,meta_key,meta_value) VALUES(376, 'wp_capabilities', 'a:1:{s:13:"administrator";b:1;}');
INSERT INTO usermeta(user_id,meta_key,meta_value) VALUES(376, 'wp_user_level', 10); 
```

然后我清除了浏览器 cookie 并再次登录，但是当我尝试导航到时，`http://localhost/wp-admin`仍然收到“您没有足够的权限访问此页面”。我什至删除了我的 APC 缓存文件并重新加载 Nginx 和 PHP-FPM，这也没有改变任何东西。有谁知道还有什么可以尝试的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T00:27:48.357

要设置`capabilities`和`user_level`您的`meta_key`值需要匹配您的数据库前缀。默认情况下，这是`wp_`（导致`wp_capabilities`and `wp_user_level`）但是在您的情况下会有所不同，因为您没有前缀。正确的`capabilities`值为`a:1:{s:13:"administrator";s:1:"1";}`。

```
-- delete any existing values for this user
DELETE FROM usermeta WHERE user_id=376 AND (meta_key LIKE '%capabilities' OR meta_key LIKE '%user_level')
-- insert the capabilities and user_level for user_id 376
INSERT INTO usermeta(user_id,meta_key,meta_value) VALUES(376, 'capabilities', 'a:1:{s:13:"administrator";s:1:"1";}');
INSERT INTO usermeta(user_id,meta_key,meta_value) VALUES(376, 'user_level', 10); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-10T22:55:25.640

以下是如何使用 MySQL 语句将用户分配给 WordPress 中的管理员角色：

```
-- Look at the field called "id" in the result set
---
select * from wp_users
where user_login = 'WORDPRESS_USERNAME_GOES_HERE';

-- Substitute the above "id" value in the "user_id" field below.
-- This is an integer value so do not use quotes around it
-- For example if the above "id" is the value 10 then the resulting line would be: where user_id = 10
-- 
update wp_usermeta
set meta_value = 'a:1:{s:13:"administrator";s:1:"1";}'
where user_id = USER_ID_GOES_HERE
and meta_key = 'wp_capabilities';

-- Lastly execute this statement remembering to substitute the same "id" value
update wp_usermeta
set meta_value = '10'
where user_id = USER_ID_GOES_HERE
and meta_key = 'wp_user_level'; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T21:41:27.120

如果您已经有了用户名和密码，那么您只需将功能和角色更新到数据库中。

转到 wp_user 表并从那里找到您的 ID，即在我的情况下为 2。然后转到 wp_usermeta 并查找 meta_key = wp_capabilities 和 user_id - 2。编辑该行并将 meta_value 更改为

```
a:1:{s:13:"administrator";s:1:"1";}. 
```

再次选择 meta_key = wp_user_level 和 user_id = 2。编辑该行并将 meta_value 更改为 10。不要更改 user_id 不是您自己的其他行。

请参阅我的 wp_users 表。 ![寻找身份证](../Images/1e10f874e42ad8b37b6a3c53edeb9fec.png)

请参阅我的 wp_usermeta 表。 ![寻找能力和角色](../Images/da75d8f9d5d98fa9b4051cb09b2fd22c.png)

将触发两个查询，如下所示：

```
UPDATE `wp_usermeta` SET `meta_value` = '10' WHERE `wp_usermeta`.`umeta_id` =27;

UPDATE `wp_usermeta` SET `meta_value` = 'a:1:{s:13:"administrator";s:1:"1";}' WHERE `wp_usermeta`.`umeta_id` =26; 
```

# c - MinGW 不输出可执行文件或目标文件

> ID：13094602
> 
> 赞同：0
> 
> 时间：2012-10-26T21:21:34.313
> 
> 标签：c, mingw

我刚刚开始使用 MinGW，但遇到了一个问题，即它没有输出可执行文件或目标文件，或者其他任何东西。修复了一些错误后，一切编译正常，但没有输出可执行文件。当我第一次安装 MinGW 时，我在一个简单的 hello world 程序上对其进行了测试，一切正常，但我正在尝试编写一个基本的 Windows 应用程序，但它不工作。我以前使用过 gcc，但只是简单地说，我对此一无所知。

```
C:\Users\Cole\Dev\Hello Windows\>gcc win_main.c -o win_main 
```

这是 win_main.c 文件：

```
#include <windows.h>
#include <stdio.h>

/*
 * Global Variables
 */
HWND g_hwnd = NULL;
HINSTANCE g_hinst = NULL;

/*
 * Forward Declarations
 */
LRESULT CALLBACK win_proc(HWND h_wnd, UINT message, WPARAM w_param, LPARAM l_param);
HRESULT init_window(HINSTANCE h_instance, int cmd_show);

/*
 * Main entry point to the application.
 */
int WINAPI WinMain(HINSTANCE h_instance, HINSTANCE h_previnstance, LPSTR cmd_line, int cmd_show) {

    if(FAILED(init_window(h_instance, cmd_show)))
        return -1;

    MSG msg = {0};
    while(GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int)msg.wParam;
}

/*
 * Register window class and create the window.
 */
HRESULT init_window(HINSTANCE h_instance, int cmd_show) {

    /* Register window class. */
    WNDCLASSEX wcx;
    wcx.cbSize = sizeof(WNDCLASSEX);
    wcx.style = CS_VREDRAW | CS_HREDRAW;
    wcx.lpfnWndProc = win_proc;
    wcx.cbClsExtra = 0;
    wcx.cbWndExtra = 0;
    wcx.hInstance = h_instance;
    wcx.hIcon = NULL;
    wcx.hIconSm = NULL;
    wcx.hCursor = LoadCursor(NULL, IDC_ARROW);
    wcx.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);
    wcx.lpszMenuName = NULL;
    wcx.lpszClassName = "BasicWindowClass";

    if(!RegisterClassEx(&wcx)) {
        printf("Failed to register window class.\n");
        return E_FAIL;
    }

    /* Create the window. */
    g_hinst = h_instance;
    RECT rc = {0, 0, 640, 480};
    AdjustWindowRect(&rc, WS_OVERLAPPEDWINDOW, FALSE);
    g_hwnd = CreateWindow("BasicWindowClass", "Windows Application", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 
        rc.right - rc.left, rc.bottom - rc.top, NULL, NULL, g_hinst, NULL);

    if(g_hwnd == NULL) {
        printf("Failed to create the window.\n");
        return E_FAIL;
    }

    ShowWindow(g_hwnd, cmd_show);

    return S_OK;
}

LRESULT CALLBACK win_proc(HWND h_wnd, UINT message, WPARAM w_param, LPARAM l_param) {

    PAINTSTRUCT ps;
    HDC hdc;

    switch(message) {
        case WM_PAINT:
            hdc = BeginPaint(h_wnd, &ps);
            EndPaint(h_wnd, &ps);
            break;

        case WM_DESTROY:
            PostQuitMessage(0);
            break;

        default:
            return DefWindowProc(h_wnd, message, w_param, l_param);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:33:56.887

您应该添加 -mwindows `gcc -mwindows win_main.c -o win_main`。我猜您的第一个程序使用“主”函数作为入口点...

# c# - 为什么我在 DataSet 上收到 NullReferenceException？

> ID：13094603
> 
> 赞同：1
> 
> 时间：2012-10-26T21:21:36.980
> 
> 标签：c#, asp.net, database, dataset, icollection

我正在为我的 ShoppingCart 需要的每个项目从 Northwind 数据库打开一个数据库查询。它是从桌子上拿走`ProductID`的。在我从数据库中取出两列以将数据保存到. 然后我比较以确保用户输入的数量小于数据库中库存的列单位。`UnitsInStock``Products``DataTabel ds`

`theCart.Values`是 ICollections 的一部分。

**我遇到错误：来自我的异常消息：“连接到数据库时出现问题：对象引用未设置为对象的实例。”**

这是代码。

```
DataSet ds = new DataSet();
        OleDbConnection conn = new OleDbConnection((string)Application["DBConnectionString"]);
        foreach (OrderItem item in theCart.Values)
        {
            string selectionString =
            "SELECT Products.ProductID, Products.UnitsInStock " +
                "FROM Products" +
                "WHERE Products.ProductID = " + item.ProductID + ";";
            try
            {
                OleDbCommand cm = new OleDbCommand(selectionString, conn);
                OleDbDataAdapter da = new OleDbDataAdapter();
                da.SelectCommand = cm;
                da.Fill(ds);
                da.Dispose();
                 if (ds.Tables["Products"].Columns.Count != 0 &&
            ds.Tables["Products"].Rows.Count != 0)
            {
                for (int index = 0; index < ds.Tables["Products"].Rows.Count; index++)
                {
                    if (item.ProductID == int.Parse(ds.Tables["Products"].Rows[index][indexOfProductID].ToString()))
                    {
                        if (item.QuantityOrdered > int.Parse(ds.Tables["Products"].Rows[index][indexOfUnitsInStock].ToString()))
                        {
                            hasStock = false;
                            int inStock = int.Parse(ds.Tables["Products"].Rows[index][indexOfUnitsInStock].ToString());
                            txtUnderstockedItems.Text += "Sorry we do not have enough stock of item: " + item.ProductName +
                                "<br> Currently, " + item.ProductName + " (ID:" + item.ProductID + ") has " + inStock + " in stock.";
                        }
                        else
                        {//can output how many items in stock here. 
                            hasStock = true;
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                txtUnderstockedItems.Text = "There was a problem connecting to the database: " + ex.Message;
            }
            finally
            {

                conn.Close();
            }

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:29:57.463

行或列很可能为空。在 if 语句之前检查 ds 。发生这种情况的一个常见原因是 Products 表没有返回任何内容。您无法获取不存在的对象的属性，因此异常。您应该进行`!= null`比较而不是检查计数。如果长度为零，则循环内的代码将永远不会执行，但您不会崩溃或任何事情。

`if (ds.Tables["Products"].Columns != null && ds.Tables["Products"].Rows != null)`

请注意，如果您的行数为零，这不会导致任何问题，但是您可能需要循环中的一些逻辑来检查您计划访问的列是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:32:53.297

[`DataTableCollection.Item`](http://msdn.microsoft.com/en-us/library/58st33fb.aspx)如果没有具有指定表名的表，则返回 null。

如果命令未返回任何行，则不会将表添加到 DataSet，并且不会引发异常。所以我假设 DataSet 中没有表，因为没有返回行。

我会改为手动初始化一个`DatatTable`，并使用它的重载`Fill`需要一个`DataTable`.

```
Dim table = new DataTable("Products")
da.Fill(table) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:34:17.813

您正在尝试从数据集中获取具有硬编码名称的表，以了解您在数据库中看到的内容，我刚刚对类似模式进行了测试，看起来就像您创建`Dataset`并从数据库中填充它时所做的那样，表名不是从数据库中复制的。正如蒂姆建议的那样，您应该检查`ds.Table[0]`

# java - 这在 Java 中是什么意思？

> ID：13094607
> 
> 赞同：0
> 
> 时间：2012-10-26T21:21:53.413
> 
> 标签：java, loops, foreach

以下代码在 Java 中做了什么：

```
for(JCheckBox check : Devices.selectedDevices) 
```

我只是想能够理解这一点并成为一个更好的开发者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:22:22.270

这在java中称为[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)（或）增强的for循环。

这意味着对于 selectedDevices 数组（或）集合中的每个 JCheckbox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:24:00.163

它是[For-Each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环，它与

```
for (Iterator<JCheckBox> i = Devices.selectedDevices.iterator(); i.hasNext(); ) 
```

例子：

```
// Returns the sum of the elements of a
 int sum(int[] a) {
    int result = 0;
    for (int i : a)
        result += i;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:26:36.360

复制`Devices.selectedDevices`, in`JCheckBox check`和 process 的每个元素。

是这样读的：`for each JCheckBox check in Devices.selectedDevices, do...`。

# php - 从 URL 上传内容

> ID：13094609
> 
> 赞同：1
> 
> 时间：2012-10-26T21:22:14.800
> 
> 标签：php, ffmpeg

我正在为某人构建一个视频转换器。我只需要知道，当有人将 URL 粘贴到视频时，我如何将该视频下载到服务器？这里的任何东西都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:25:02.467

如果您想在 php 中使用它，请尝试 curl：

```
function curl_download($Url){

    // is cURL installed yet?
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }

    // OK cool - then let's create a new cURL resource handle
    $ch = curl_init();

    // Now set some options (most are optional)

    // Set URL to download
    curl_setopt($ch, CURLOPT_URL, $Url);

    // Set a referer
    curl_setopt($ch, CURLOPT_REFERER, "http://www.example.org/yay.htm");

    // User agent
    curl_setopt($ch, CURLOPT_USERAGENT, "MozillaXYZ/1.0");

    // Include header in result? (0 = yes, 1 = no)
    curl_setopt($ch, CURLOPT_HEADER, 0);

    // Should cURL return or print out the data? (true = return, false = print)
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Timeout in seconds
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);

    // Download the given URL, and return output
    $output = curl_exec($ch);

    // Close the cURL resource, and free system resources
    curl_close($ch);

    return $output;
} 
```

[[来源]](http://www.jonasjohn.de/snippets/php/curl-example.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:28:15.897

什么样的视频？如果您有实际的视频源，那么这是您最好的选择： [download-file-to-server-from-url](https://stackoverflow.com/questions/3938534/download-file-to-server-from-url)

如果您不这样做，那么您很可能必须编写自己的视频开膛手，例如[http://keepvid.com](http://keepvid.com)

# shell - 使用 ssh 查找命令

> ID：13094617
> 
> 赞同：0
> 
> 时间：2012-10-26T21:22:38.337
> 
> 标签：shell

下面的示例显示了我需要在本地查找中运行良好的文件搜索和输出类型的方式。

```
> find /DBBACKMEUP/ -not -name "localhost*" -type f -name "*2012-10-26*" -exec du -b {} \; | awk '{print $2 "\t" $1}' | awk -F'/' '{print $NF}'

monitor_2012-10-26_22h00m.11.29.135.Friday.sql.gz   119601
test_2012-10-26_22h00m.10.135.Friday.sql.gz 530
status_2012-10-26_22h00m.1.29.135.Friday.sql.gz 944 
```

但我需要在许多服务器上打印相同的命令。所以我计划像这样执行。

```
>ssh root@192.168.87.80 "find /DBBACKMEUP/ -not -name "localhost*" -type f -name "*2012-10-26*" -exec du -b {} \; | awk '{print $2 "\t" $1}' | awk -F'/' '{print $NF}'" 
```

当然，这给出了一个空白输出。有什么方法可以在 shell 中解析这样的搜索字符串并通过 ssh 获得我想要的输出？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:30:50.697

看起来你的 ssh 命令有很多引号和双引号，这可能是你问题的根源（没有双关语）。我建议你创建一个 shell 脚本来运行你想要的 find 命令，他们将它的副本放在每台服务器上。之后，只需使用 ssh 执行该 shell 脚本，而不是尝试传入复杂的命令。

**编辑：** 我想我误解了；如果我错了，请纠正我。您是否正在寻找一种方法来创建将在 IP 地址范围内运行命令的循环？如果是这样，这里有一个建议 - 创建一个这样的 shell 脚本：

```
#!/bin/bash
for ((C=0; C<255; C++)) ; do
  for ((D=0; D<255; D++)) ; do
    IP="192.168.$C.$D"
    ssh root@$IP "find /DBBACKMEUP/ -not -name "localhost*" -type f -name "*2012-10-26*" -exec du -b {} \; | awk '{print "\$"2 \"\\t\" "\$"1}' | awk -F'/' '{print "\$"NF}'"
  done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:46:45.733

每个服务器？？那一定是 749 台服务器——你的选择对勤奋的人来说很好。我的方法很适合懒惰的鹅；）只是试了一下；）

```
ssh root@192.168.47.203 "find /DBBACKMEUP/ -not -name "localhost*" -type f -name "*2012-10-26*" -exec du -b {} \; | awk '{print "\$"2 \"\\t\" "\$"1}' | awk -F'/' '{print "\$"NF}'"

Tel_Avaya_Log_2012-10-26_22h00m.105.23.Friday.sql.gz    2119
test_2012-10-26_22h00m.10.25.Friday.sql.gz  529
OBD_2012-10-26_22h00m.103.2.203.Friday.sql.gz   914 
```

# c# - Entity Framework 5 逆向工程和 [Key] 属性

> ID：13094626
> 
> 赞同：1
> 
> 时间：2012-10-26T21:23:27.230
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-4.1

我正在使用 Entity Framework Power Tools beta 2 对数据库进行逆向工程，现在，创建的 POCO 在定义中没有 [Key]，但使用 Fluent 的映射具有 this.HasKey(t => t.EntityId);

我在一个单独的项目中拥有 POCO，并且在 MVC 4 应用程序中引用了它。当我尝试添加控制器时，它说实体没有定义键。确切的消息是：

**System.Data.Entity.EdmEntityType：EntityType：“计算机”没有定义键。定义此 EntityType 的键。**

如果是强制的，为什么逆向工程过程不添加 [Key] 属性？或者这不是强制性的，我错过了什么？

提前致谢。吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:29:05.743

问题出在数据库的 connectionString 上。现在我设置了 connectionStrings.config 文件，它可以工作了。

注意：努力使用逆向工程，但在运行时它再次失败，抱怨 [Key] \tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Computer' has no key defined。定义此 EntityType 的键。

# java - 如何在 Android 应用程序中获取所有具有 Internet 权限的应用程序？

> ID：13094631
> 
> 赞同：0
> 
> 时间：2012-10-26T21:23:31.363
> 
> 标签：java, android, wifi

如何在 Android 中获取所有具有 Internet 权限的应用程序？我怎样才能做到这一点？任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:28:08.893

[`PackageManager.GET_PERMISSIONS`](http://developer.android.com/reference/android/content/pm/PackageManager.html#GET_PERMISSIONS)您需要使用该标志遍历所有已安装的应用程序。然后，您可以检查 Internet 权限是否在返回值中。

示例代码（基于[此答案](https://stackoverflow.com/a/3280756/1438733)）：

```
PackageManager p = context.getPackageManager(); 
final List<PackageInfo> apps = p.getInstalledPackages(PackageManager.GET_PERMISSIONS);
for (PackageInfo pkg : apps) {
    for (String permission : pkg.requestedPermissions) {
        // Check if permission is the internet permission
    }
} 
```

# javascript - 添加具有多个参数的事件侦听器并稍后将其删除

> ID：13094638
> 
> 赞同：1
> 
> 时间：2012-10-26T21:23:53.847
> 
> 标签：javascript, event-listener

这似乎是一个非常受欢迎的问题，尽管我似乎没有找到任何相关的答案。

我附加了一个事件监听，例如：

```
window.addEventListener('scroll', fnName, false); 
```

问题是 fnName 需要几个参数，所以我尝试了

```
window.addEventListener('scroll', (function( e ){
   return fnName(e, some, param )
}()), false) 
```

但后来`window.removeEventListener`不再工作了，所以我尝试了：

```
window.removeEventListener('scroll', (function( e ){
   return fnName(e, some, param )
}()), false) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:28:21.180

每次你声明一个匿名函数时，它都会创建一个新的函数实例。如果要删除现有函数，则需要保留函数实例的副本。

```
var temp = function () {
    fnName(e, some, param);
};
window.addEventListener('scroll', temp, false);
//elsewhere,
window.removeEventListener('scroll', temp, false); 
```

* * *

我还应该注意，使用

```
(function (e){
     return fnName(e, some, param)
}()); 
```

`fnName`立即调用`undefined`作为第一个参数。我怀疑那是你的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:29:16.280

您拥有的是一个自初始化功能：

```
(function() { alert("a") })(); 
```

您可能会注意到此代码警报`"a"`。

然后在您的函数中初始化`fnName`. 你要做的是：

```
window.addEventListener('scroll', function( event ) {
   fnName(event, some, param );
}, false); 
```

当滚动事件被发出时，您然后`fnName`使用您的自定义参数初始化。

* * *

正如所指出的，如果您想再次删除处理程序，您将需要一个命名函数：

```
function myFn( event ) {
   fnName(event, some, param );
}

window.addEventListener('scroll', myFn, false); // Add event listener
window.removeEventListener('scroll', myFn, false); // Remove event listener 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:27:15.597

```
window.addEventListener('scroll', (function( e ){
   return fnName(e, some, param )
}), false) 
```

只需删除`()`以避免定义后直接执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:44:23.510

因为我在 AMD 模块架构中，并且我试图将事件处理程序维护为私有方法，所以我想出了这个解决方案：

```
define(function(){

 var fnNmae = function( e ) {
   // i can now access fnName.param
 };

 return { 
   init : function() {
    fnName.param = {
      one : 1,
      two : 2
    }

   window.addEventListener('scroll', fnName, false);
   }

}) 
```

# java - 创建一个映射/缓存，它将使用默认构造函数生成的对象作为新键

> ID：13094641
> 
> 赞同：0
> 
> 时间：2012-10-26T21:23:59.723
> 
> 标签：java, map, guava

我正在计算按属性分组的统计数据。对于这个属性的每个类别（以`String`s 给出），我得到我想要聚合的值。

为此，我需要一个从类别到`DescriptiveStatistics`（由 提供`org.apache.commons.math.stat.descriptive`）的映射。在这张地图中，我必须检查是否已经为给定的类别`DescriptiveStatistics`创建了相应的类别。**这个检查，以及新的创建`DescriptiveStatistics`，应该由地图来完成。**

我测试了 Apache 的`LazyMap`，但非通用性导致我使用 Guava 的`LoadingCache`. 这些方面的东西对我有用：

```
LoadingCache<String, DescriptiveStatistics> groupedStats =
        CacheBuilder.newBuilder()
        .build(new CacheLoader<String, DescriptiveStatistics>() {
            @Override
            public DescriptiveStatistics load(String key) {
                return new DescriptiveStatistics();
            }
        }); 
```

有没有更“罗嗦”的解决方案？一个不需要我为了实例化对象而投入匿名类的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T00:17:14.037

您的原始代码正是 Guava 团队希望您编写的代码。

我们倾向于避免反思（当然，在 中除外`com.google.common.reflect`）。它往往很脆弱并且失去了编译时检查的好处——如果一个特定的类没有*公共*的无参数构造函数，并且你使用`clazz.newInstance()`了 ，那么直到运行时你才会发现它。编写直接实现可能会花费您一两行代码，但我们认为这样做的好处是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:08:36.017

我希望少罗嗦的解决方案创建一个用于缓存的类。

作为某人设计 API 不能总是让每个人都开心。Guava 缓存非常灵活且适应性强。并且额外的几行代码应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:16:54.963

这是我减少用户代码中冗长的想法：一个`Creator<T>`按照它说的做的类。

```
LoadingCache<String, SummaryStatistics> groupedStats =
    CacheBuilder.newBuilder().build(
        CacheLoader.from(Creators.of(SummaryStatistics.class))); 
```

我想知道这样的野兽是否存在；我在实现的类中找不到它`Supplier<T>`。这是一个可能的实现，同一个包中的所有类：

```
import com.google.common.base.Supplier;

public class Creator<T> implements Supplier<T> {

    private Class<T> class1;

    Creator(Class<T> class1) {
        this.class1 = class1;
    }

    @Override
    public T get() {
        try {
            return class1.newInstance();
        } catch (Exception e) {
            throw new RuntimeException(
                    "Cannot instantiate object of type "
                        + class1.getCanonicalName(),
                    e);
        }
    }

}

public class Creators {
    public static <T> Creator<T> of(Class<T> class1) {
        return new Creator<T>(class1);
    }
} 
```

当然，这可以推广到使用带参数的构造函数。

# android - Google Play 过滤器问题：此应用程序可用于超过 0 台设备

> ID：13094650
> 
> 赞同：5
> 
> 时间：2012-10-26T21:24:33.780
> 
> 标签：android, manifest, device

我遇到了与其他几个 stackoverflow 用户看到的相同的问题 - “支持的设备：0”或“此应用程序可用于 0 多个设备”。

这是一个已在 Google Play 中运行超过 6 个月的应用程序，我正在尝试发布更新。它以前支持超过 1,000 台设备，现在支持 0 - 我在 Google Play 中再也找不到它了。我在更新期间没有更改清单（版本号除外），所以我看不出它为什么会出现问题。

我已经研究了在 stackoverflow 上找到的其他解决方案：

1.  我已经更新了我的 Android SDK 和 Eclipse
2.  我已确认 /src 文件夹中没有 JAR 文件
3.  APK 已激活

根据以下 manifest.xml 文件，是否有人对可能出现的问题有任何建议？

提前谢谢了！

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="*****"
    android:versionCode="10"
    android:sharedUserId="*****"
    android:installLocation="preferExternal"
    android:versionName="1.10" >
    <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:anyDensity="true"/>  

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK"/>

<uses-configuration android:reqTouchScreen="finger"/>

<uses-feature android:name="android.hardware.touchscreen.multitouch"
               android:required="false" />

<uses-feature android:name="android.hardware.touchscreen"
               android:required="true" />

    <application
        android:name="*****" 
        android:icon="@drawable/icon"
        android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"   
        android:label="@string/app_name" >
        <activity
            android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"        
            android:label="@string/app_name"
            android:name=".SplashScreen">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

      <activity android:name=".GameActivity" 
          android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>

        <activity android:name=".SettingActivity" android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>
        <activity android:name="ChoosePuzzle" android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>

         <activity android:name=".HelpScreen" android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>
         <activity android:name=".Shop"  android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>         

        <activity android:name=".HomeScreen"  android:screenOrientation ="portrait" android:launchMode="singleTop"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>   

       <meta-data android:name="com.mobclix.APPLICATION_ID"
             android:value="*****"/>

        <activity android:name="com.mobclix.android.sdk.MobclixBrowserActivity" android:screenOrientation ="portrait"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"/>
        <activity android:name=".ChoosePuzzleScreen" android:screenOrientation ="portrait" android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity>
        <activity android:name=".ChooseBatchScreen" android:screenOrientation ="portrait" android:theme="@android:style/Theme.NoTitleBar.Fullscreen"  ></activity>    
        <activity android:name=".WebViewActivity" android:screenOrientation ="portrait" android:theme="@android:style/Theme.NoTitleBar.Fullscreen"  ></activity>

<activity android:name="com.openfeint.internal.ui.IntroFlow"
  android:label="IntroFlow"
  android:configChanges="orientation|keyboardHidden"
  android:theme="@style/OFNestedWindow"/> <activity
  android:name="com.openfeint.api.ui.Dashboard"
  android:label="Dashboard"
  android:configChanges="orientation|keyboardHidden"
  android:theme="@style/OFNestedWindow"/>
<activity android:name="com.openfeint.internal.ui.Settings"
  android:label="Settings"
  android:configChanges="orientation|keyboardHidden"
  android:theme="@style/OFNestedWindow"/>
<activity android:name="com.openfeint.internal.ui.NativeBrowser"
  android:label="NativeBrowser"
  android:configChanges="orientation|keyboardHidden"
  android:theme="@style/OFNestedWindow"/>           

        <activity android:name="com.facebook.android.FacebookActivity"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden"
            android:screenOrientation="portrait">
        </activity>
        <activity
            android:name="com.facebook.android.GraphExplorer"
            android:windowSoftInputMode="stateHidden"
            android:screenOrientation="portrait" />

        <activity android:name="com.facebook.android.IntentUriHandler">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:scheme="fbgraphex" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.facebook.android.Places"
            android:screenOrientation="portrait" />
     </application>
</manifest> 
```

编辑：我也运行 aapt 进行测试，结果如下：

```
package: name='*****' versionCode='8' versionName='1.8'
sdkVersion:'8'
targetSdkVersion:'8'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.GET_ACCOUNTS'
uses-permission:'android.permission.READ_PHONE_STATE'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.WAKE_LOCK'
uses-configuration: reqTouchScreen='3'
uses-feature-not-required:'android.hardware.touchscreen.multitouch'
uses-feature:'android.hardware.touchscreen'
application-label:'*****'
application-icon-120:'res/drawable-hdpi/icon.png'
application-icon-160:'res/drawable-hdpi/icon.png'
application-icon-240:'res/drawable-hdpi/icon.png'
application-icon-320:'res/drawable-hdpi/icon.png'
application: label='*****' icon='res/drawable-hdpi/icon.png'
launchable-activity: name='*****.SplashScreen'  label='*****' icon=''
uses-feature:'android.hardware.screen.portrait'
main
other-activities
supports-screens: 'small' 'normal' 'large'
supports-any-density: 'true'
locales: '--_--'
densities: '120' '160' '240' '320' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:33:12.867

更改 android:targetSdkVersion="8"

# c# - 将列表从 jQuery 传递到服务

> ID：13094651
> 
> 赞同：4
> 
> 时间：2012-10-26T21:24:49.160
> 
> 标签：c#, .net, asp.net-web-api

我确定我已经在另一个解决方案中做到了这一点，但我似乎找不到任何解决方案来再次这样做，并想知道是否有人可以帮助我......

这是我的 WebAPI 代码：

```
public class WebController : ApiController
{
        public void Get(string telephone, string postcode, List<Client> clients)
        {

        }
} 
```

并且，从 jQuery 调用它：

```
 function Client(name, age) {
            this.Name = name;
            this.Age = age;
    }

    var Clients = [];
    Clients.push(new Client("Chris", 27));

    $.ajax({
        url: "/api/Web/",
        data: { telephone: "999", postcode: "xxx xxx", clients: Clients }
    }); 
```

但是“客户”对象总是返回为空。我也试过`JSON.stringify(Clients)`了，结果是一样的。谁能看到我在这里遗漏的任何明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:33:49.090

Web API 中的操作参数绑定与 ASP.NET MVC 中的不同（您可以[在本文中](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)了解更多信息）：

*   “简单”类型（字符串、整数等）从 URI 绑定
*   “复杂”类型从请求正文绑定

如果您不想遵循约定，则需要使用`[FromBody]`or`[FromUri]`属性标记参数，具体取决于您要绑定它们的位置。

在您的情况下，因为您使用的是 GET 请求，您需要标记您的`clients`参数`[FromUri]`以正确绑定：

```
public class WebController : ApiController
{
    public void Get(string telephone, 
                    string postcode, 
                    [FromUri]List<Client> clients)
    {

    }
} 
```

# python-sphinx - 在 Sphinx 中包含另一个页面的 ToC

> ID：13094652
> 
> 赞同：10
> 
> 时间：2012-10-26T21:24:59.367
> 
> 标签：python-sphinx, toctree

我在 plugins/index.html 有以下页面：

```
Plugin Development
==================

.. toctree::
   :hidden:

   basics/index
   advanced/index

The Basics
----------

- :doc:`basics/gettingstarted`
- :doc:`basics/resources`
- :doc:`basics/i18n`

Advanced Topics
---------------

- :doc:`advanced/models`
- :doc:`advanced/controllers`
- :doc:`advanced/services` 
```

plugin/basics/index.html 和 plugins/advanced/index.html 包含它们自己的目录树，它们链接到 plugins/index.html 中列出的相同子页面。所以我想知道的是，有没有办法只包括那些子目录树，而不是像我一样手动列出子页面？

我意识到我可以从目录树中删除 :hidden: 标志，但关键是我想将基本/高级主题保留在单独的列表中，并带有它们自己的标题、介绍段落等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T01:44:05.327

您可以像这样列出整个目录内容（或这些指令的各种组合）：

```
.. toctree::
  :glob:
  :titlesonly:
  :maxdepth: 2

  ** 
```

或者我也认为这样（未经测试）：

```
.. toctree::
  :glob:
  :titlesonly:
  :maxdepth: 2

  *
  basics/*
  advanced/* 
```

但是，我发现手动列出内容通常是最好的方法。虽然自动生成的 TOC 很好，但它们在格式方面没有给您太多空间（例如，创建子标题和更改页面顺序等）。

在我们的文档中，我所做的与您在最初的问题中所做的几乎相同。

# wordpress - Wordpress 永久链接重定向规则

> ID：13094656
> 
> 赞同：0
> 
> 时间：2012-10-26T21:25:09.460
> 
> 标签：wordpress, .htaccess, redirect, permalinks

遇到一点关于 Wordpress 永久链接重定向的问题，我希望能得到一些帮助。

以前，我在博客文章中使用了以下永久链接结构：

```
/blog/%year%/%monthnum%/ %day%/%postname%/ 
```

我最近将其更改为：

```
/blog/%postname%/ 
```

问题是，我使用旧格式构建的旧链接现在都不起作用了！

我知道可以编写一个通用的 .htaccess 301 重定向规则，但除了知道这是可能的之外，我实际上并不知道该怎么做。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:52:17.990

这将从 url 中删除任何数字/数字/数字/格式

```
RewriteRule ^blog/([0-9]+/){3}(.*) /blog/$2 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:26:49.960

WordPress 应该默认识别旧的永久链接。你应该试着再打`Dashboard > Settings > Permalinks > Save changes`一次。

如果它不起作用，您要求的正则表达式将是这样的，从 URL 中删除 4 个数字、一个斜杠、2 个数字、另一个斜杠、2 个数字和一个最后一个斜杠：

```
RewriteEngine On
RewriteRule ^blog/[0-9]{4}/[0-9]{2}/[0-9]{2}/(.*)$ http://example.com/blog/$1 
```

# ios - SLComposeViewController Facebook 发布为 iOS 而不是 Facebook 应用程序标识符

> ID：13094661
> 
> 赞同：1
> 
> 时间：2012-10-26T21:25:54.673
> 
> 标签：ios, facebook, slcomposeviewcontroller

我目前正在为未来的 iOS 游戏添加 Facebook 社交功能的原型。我一直在开发的功能之一是使用新的原生 Facebook Composer 发布游戏链接，然后跟踪帖子并为每个喜欢帖子的人提供玩家硬币。发布后，我得到他们的提要并查找具有匹配应用程序 ID 的帖子。如果我不使用新的原生 Facebook Composer（旧式对话框，或者只是没有对话框的直接帖子），我已经让该部分正常工作。

我遇到的问题是在使用新的 SLComposeViewController 时，帖子似乎来自应用程序“iOS”id“213546525407071”，而不是我的应用程序的 id。

有没有办法更改属性应用程序，以便它使用我的应用程序 ID 而不是 iOS？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T23:05:42.530

就是这样`SLComposeViewController`工作的。如果您想指定自己的应用程序，则必须设计自己的 UI 并`FBRequestConnection`从 Facebook SDK 中使用，如此[处](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)所述。

# asp.net-mvc-3 - 更改视图模型后没有视图更新

> ID：13094663
> 
> 赞同：0
> 
> 时间：2012-10-26T21:26:18.137
> 
> 标签：asp.net-mvc-3, razor, asp.net-ajax

找不到问题所在，也无法在任何地方找到答案。我的问题是视图模型更改 bean 后我的视图没有更新

视图模型：

```
public class OrderView
{
    public Customer Customer { get; set; }
    public Order Order { get; set; }
}
public class Order
{
    public int OrderId { get; set; }
    public int CustomerId { get; set; }
    public List<string> DomenNames { get; set; }
}
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Telephone { get; set; }
    public string Email { get; set; }
} 
```

控制器：

```
private OrderView ov;
public ActionResult Index()
{
    return View(ov);
}

[HttpPost]
public ActionResult Index(OrderView model, FormCollection collection) {            
    return View("done");
}
public ActionResult BlankEditorRow(OrderView model) {
    ov = model;
    ov.Order.DomenNames.Add("");
    return View("Index",ov) ;
} 
```

看法：

```
@using (Html.BeginForm("Index","Order",FormMethod.Post, new {id = "createOrder"})) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Order</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Order.DomenNames)
    </div>

    @for(int i = 0; i < Model.Order.DomenNames.Count; i++) {
        <div> 
            @Html.EditorFor(item => item.Order.DomenNames[i])
        </div>
    }

    <button type="button" id="b1" onclick="setallert()" >Click me</button>
 ... 
```

和脚本：

```
<script type="text/javascript">
    function setallert() {
        $.ajax({
            url: "Order/BlankEditorRow",
            data: $('#createOrder').serialize(),
            cache: false,
            success: function (data) {
                ...?
            }
        });
    };    
</script> 
```

将模型传递给控制器​​很好，在通过视图进行调试时，我可以看到模型已更改，但在某些情况下，视图中什么也没有发生。看起来旧模型已经到位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:34:05.557

我已经解决了我的问题。我发布我的解决方案以防有人需要它：

控制器：

```
public ActionResult BlankEditorRow(OrderView model) {
    model.Order.DomenNames.Add("");
    return PartialView("Index", model) ;
} 
```

看法：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Order.DomenNames)
</div>
<div id="tt">
    @{Html.RenderPartial("OrderDN", this.Model);}
</div>
<button type="button" id="addBtn">Click me</button> 
```

脚本：

```
$("#addBtn").click(function () {
    $.get('@Url.Action("BlankEditorRow", "Order")', $('#createOrder').serialize(), function (res) {
        document.getElementById("tt").innerHTML = res;
    });
}) 
```

我希望它对某人有用

# excel - Excel VBA：用于数据处理的宏运行时间越长越慢

> ID：13094664
> 
> 赞同：4
> 
> 时间：2012-10-26T21:26:21.570
> 
> 标签：excel, vba, optimization, large-data

我正在使用 32 位 Excel 2010 中的 QuantlibXl 库分析大量历史财务数据。我的典型工作表包含长达 100 万行的长列经验数据。我的宏通常需要从上到下遍历每一行，并执行一些 Quantlib 典型的财务分析工作，例如重新评估证券，这需要在每一行中创建 Quantlib 对象。分析内容作为公式包含在单元格中。

因此，一开始我尝试只选择顶行中带有公式的单元格，然后通过将右下角拖动到工作表底部来填充它们。在这里，处理时间随着所涉及的行数呈指数增长。

所以我想我必须编写一个宏来一次处理较小的行块。该宏基本上会一次只填充顶行 100 行。这和一些优化（如下所述）当然极大地提高了速度，但处理时间仍然呈指数增长。

问题是，尽管我尝试优化我的宏，但它们运行的​​时间越长，它们就会变得越来越慢。我在状态栏中跟踪已处理的行，例如，如果在启动宏时每分钟处理 2000 行（计算非常复杂），它的速度在整个运行时不断降低，例如每分钟只有 100 行60,000 行后的分钟。在那种节奏下，它永远不会看到工作表的结尾。所以事实上，在某些时候，最好中止它并从它停止的地方重新启动它。我还拆分了文件，让它们同时在不同的计算机上运行，​​这在管理方面很麻烦。

我已经实现了大量的优化： - 屏幕更新和自动计算已关闭。- 我一次只对正在处理的行执行计算。- 垃圾收集：Quantlib 对象在不再使用后立即被删除。我认为是他们吃掉了所有的空闲内存导致了减速。- 到目前为止，我已将相关结果（单元格）写入文本文件并删除不再需要的行。同样，宏在开始时非常快，如果在 70,000 行之后它不再变慢，它会在几个小时内运行到结束。事实上，我曾希望在运行时看到速度提高，因为行被删除并且工作表缩小，但这并没有发生。所以我只是不停地停止这个过程 60,000 行并重新启动它，

我想弄清楚是什么原因导致 Excel 无法线性处理大量数据并需要重新启动，以及如何避免这种行为。如果有人遇到类似的麻烦并找到解决方法，我会很高兴听到它。

**编辑：** 每次我通过重新开始来停止该过程以再次加快速度时，我注意到我必须重新启动 Excel，否则它会像以前一样恢复缓慢。我目前的假设是，在某些时候数据没有被正确清理。如果是这种情况，您的解决方案将使我更进一步。Quantlib 库有一个方法来查看有多少对象仍然驻留在内存中，称为 ohRepositoryObjectCount()。我在每次计算后调用 ohRepositoryDe​​leteAllObjects() 函数，并且按照其他方法有效地删除了它们，但可能仍然存在一些未被检测到的泄漏。

**EDIT2：**我现在确信存在内存泄漏，因为经过长时间的批处理，任务管理器显示 3 或 4 个 Excel 进程一起消耗了大约 1.5 GB 的内存。退出 Excel 时，它会崩溃（并显示一条类似于“Excel 不再工作”的消息），并且进程仍然存在，因此我必须手动终止它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:22:04.987

如果我的假设是正确的，那么您的行就是您所有证券的列表；并且彼此不相关；你不用计算它们。如果正确，请执行以下操作：

1.  在单独的工作表上，布局所有数据列（输入和输出）以表示一行。
2.  从“源”工作表中复制并粘贴一行数据的值。
3.  从源表中删除所有计算并将其放入此处。
4.  将值复制并粘贴回源工作表。

将 #2 到 #4 放入宏中并循环遍历您的数据。

这就是我的回答，以下只是评论。如果我这样做：

1.  我的“源”数据将在数据库中。我确信我要探索的证券之间存在关系。
2.  为了便于阅读，我会将行元素转换为计算表上的一列。
3.  为了便于阅读，我将跨多个列和部分分解计算。

# java - JProgressBar 不会更新

> ID：13094666
> 
> 赞同：2
> 
> 时间：2012-10-26T21:26:48.677
> 
> 标签：java, swing, jprogressbar

我正在尝试在这个问题的投票答案中找到的代码：[Download file using java apache commons?](https://stackoverflow.com/questions/4698534/download-file-using-java-apache-commons)

是一个下载应用，稍微看一下，（我对JFrames和ActionEvents不太熟悉）

下载.java

```
package main;

public class Download extends JFrame implements Runnable{

    public static int total;
    public static int done;

    private static class ProgressListener implements ActionListener{

        @Override
        public void actionPerformed(ActionEvent e) {

            done = (int)((DownloadCountingOutputStream) e.getSource()).getByteCount();
            jbar.repaint();
            DownloadCountingOutputStream.parent.draw((int)((DownloadCountingOutputStream) e.getSource()).getByteCount());//redraw
            DownloadCountingOutputStream.parent.repaint();
        }
    }

    public static JProgressBar jbar = new JProgressBar(); 

    public void draw(int downloaded){System.out.println("downloaded: "+downloaded+ " Total: "+total);

        if (downloaded== 0){

        Container cont = new Container();       
        setDefaultCloseOperation(3);
        setSize(600, 450);
        setResizable(false);
        setVisible(true);

        cont.add(jbar);     
        jbar.setBounds(40, 50, 500, 50);                
        jbar.setMaximum(total);//The total value of bytes to download
        //jbar.setValue(50);
        add(cont);

        jbar.setVisible(true);  
        }

        jbar.setValue(downloaded);      
            //This should update the value of the progress Bar
    }

    public void run() {

        URL dl = null;
        File fl = null;
        OutputStream os = null;
        InputStream is = null;
        ProgressListener progressListener = new ProgressListener();

        draw(done);

        try {
            fl = new File(System.getProperty("user.home").replace("\\", "/") + "/Desktop/afile.rar");
            dl = new URL("https://dl.dropbox.com/u/48076798/afile.rar");
            os = new FileOutputStream(fl);
            is = dl.openStream();

            total = Integer.parseInt(dl.openConnection().getHeaderField("Content-Length"));

            String total = dl.openConnection().getHeaderField("Content-Length");

            DownloadCountingOutputStream dcount = new DownloadCountingOutputStream(os);
            dcount.setListener(progressListener);
            dcount.setParent(this);

            IOUtils.copy(is, dcount);

        } catch (Exception e) {
            System.out.println(e);
        } finally {
            if (os != null) { 
                try {
                    os.close();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
            }
            if (is != null) { 
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
            }
        }
    }

} 
```

下载CountingOutputStream.java

```
package main;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.io.OutputStream;

import org.apache.commons.io.output.CountingOutputStream;

public class DownloadCountingOutputStream extends CountingOutputStream {

    private ActionListener listener = null;
    public static Download parent;

    public DownloadCountingOutputStream(OutputStream out) {
        super(out);
    }

    public void setListener(ActionListener listener) {
        this.listener = listener;
    }

    public void setParent(Download o){

        parent = o;
    }

    @Override
    protected void afterWrite(int n) throws IOException {
        super.afterWrite(n);
        if (listener != null) {
            listener.actionPerformed(new ActionEvent(this, 0, null));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T00:11:29.163

从您提供的代码示例中很难判断...

此问题的主要原因是尝试更新 UI，同时阻止事件调度线程 (EDT)。

切勿在 EDT 中执行任何长时间运行或阻塞的操作，因为这将阻止重绘请求被执行，这一点很重要。

有关更多信息，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

下面的示例演示了使用`SwingWorker`提供与 UI 重新同步的进度更新的

```
public class TestProgress {

    public static void main(String[] args) {
        new TestProgress();
    }

    public TestProgress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                ProgressPane progressPane = new ProgressPane();
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(progressPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                progressPane.doWork();
            }
        });
    }

    public class ProgressPane extends JPanel {

        private JProgressBar progressBar;

        public ProgressPane() {

            setLayout(new GridBagLayout());
            progressBar = new JProgressBar();

            add(progressBar);

        }

        public void doWork() {

            Worker worker = new Worker();
            worker.addPropertyChangeListener(new PropertyChangeListener() {
                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    if ("progress".equals(evt.getPropertyName())) {
                        progressBar.setValue((Integer) evt.getNewValue());
                    }
                }
            });

            worker.execute();

        }
    }

    public class Worker extends SwingWorker<Object, Object> {

        @Override
        protected Object doInBackground() throws Exception {

            for (int index = 0; index < 1000; index++) {
                int progress = Math.round(((float) index / 1000f) * 100f);
                setProgress(progress);

                Thread.sleep(10);
            }

            return null;
        }
    }
} 
```

# routing - 添加模块的果园问题

> ID：13094670
> 
> 赞同：0
> 
> 时间：2012-10-26T21:27:03.220
> 
> 标签：routing, orchardcms

我有另一个关于果园的问题。我创建了新模块 - HelloWorld（如在 Orchard 网站教程中） 我做的一件事是我将我的项目移到 Orchard 之外，并在其中添加了这个模块项目创建了新的解决方案。我将构建后设置为通过 robocopy 将我的项目复制到 Orchard.Web\Modules：

```
 robocopy "$(ProjectDir)..\$(ProjectName)" "$(ProjectDir)..\..\Orchard\src\Orchard.Web\Modules\HelloWorld" /XO /NJH /E

  if errorlevel 4 goto Fail
  if errorlevel 0 goto End

  :Fail
  echo FILECOPY for $(ProjectName) FAILED
  exit 1
  :End
  echo FILECOPY for $(ProjectName) COMPLETED OK
  exit 0 
```

复制我的模块后，我尝试使用我的模块访问页面并获得 404 响应。

在 Routes.cs 我有

```
public IEnumerable<RouteDescriptor> GetRoutes()
    {
        return new[]
            {
                new RouteDescriptor
                    {
                        Priority = 20,
                        Route =
                            new Route(
                            "HelloWorld",
                            new RouteValueDictionary
                                {
                                    { "area", "HelloWorld" }, { "controller", "Home" }, { "action", "Index" } 
                                },
                            new RouteValueDictionary(),
                            new RouteValueDictionary { { "area", "HelloWorld" } },
                            new MvcRouteHandler())
                    }
            };
    } 
```

在 Orchard.Web\Modules\HelloWorld 中打开 Routes.cs 并进行任何更改（例如：添加空间或更改注释）并保存 Routes.cs 后，我的模块开始工作。有谁知道为什么我的模块在将其复制到 Modules 文件夹后无法正常工作？

# ios - iOS 上的 GMail 应用程序使用什么来编辑 HTML 电子邮件？

> ID：13094672
> 
> 赞同：0
> 
> 时间：2012-10-26T21:27:05.547
> 
> 标签：ios, cocoa-touch, uiwebview

根据我的阅读，UIWebView 不支持编辑，但 iPhone 上的 GMail 应用程序确实允许您回复 HTML 电子邮件，并且您可以在这样做的同时编辑 HTML，而不仅仅是在其上方放置一个文本字段。

**有没有人知道GMail是如何做到这一点的？** 或者更好的是，参与该项目的任何人都能够给我一些提示而不会遇到麻烦？

即使使用 WebKit 之类的东西来呈现 HTML，看起来你仍然需要做大量的工作来模仿普通文本字段（UITextView 或 UITextField）的许多行为。

编辑：想确保清楚我说的是实际的 GMail 应用程序，您可以从 App Store 安装该应用程序。不是通过内置邮件应用程序的 GMail POP3/IMAP。显然，内置的邮件应用程序可以访问比我的或 GMail 之类的第 3 方应用程序更多的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T02:50:23.453

`UIWebView`确实支持编辑，从 iOS 5 开始，通过设置`contentEditable`为`true`. 有关富文本编辑器实现的示例，请参阅[富文本编辑：简单入门。](http://ios-blog.co.uk/tutorials/rich-text-editing-a-simple-start-part-1/)

还有一个[DTRichTextEditor 库](http://www.cocoanetics.com/parts/dtrichtexteditor/)，我可以在最近的项目中使用它后推荐它。它支持嵌入式图像支持、视频和链接等。

# sql - 使用 SQL 语句填充 Grails 选择框时遇到问题

> ID：13094675
> 
> 赞同：1
> 
> 时间：2012-10-26T21:27:14.783
> 
> 标签：sql, grails, select

我正在尝试使用从 SQL 返回的一些行填充 grails 选择，但由于某种原因它无法正常工作。我有以下代码：

控制器：

```
import groovy.sql.Sql

class ClinicalRequirementsController {

static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

def dataSource //injection of dataSource 

def create() {

     def db = new Sql(dataSource)

     def terms = db.rows("""SELECT stvterm_code
     FROM stvterm
     WHERE stvterm_fa_proc_yr = (SELECT stvterm_fa_proc_yr
     FROM stvterm, current_term
     WHERE stvterm_code = current_term.cur_term)
     ORDER BY stvterm_code ASC""")

     [terms: terms]

     db.close()

     [clinicalRequirementsInstance: new ClinicalRequirements(params)]
   }
} 
```

普惠制选择：

```
<g:select name="insuranceSemesterVerified" from="${terms}" required=""   value="${clinicalRequirementsInstance?.insuranceSemesterVerified}" valueMessagePrefix="clinicalRequirements.insuranceSemesterVerified"/> 
```

我很困惑。希望有人可以指出我出了什么问题。我已经在别处验证了针对数据库的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:13:40.603

控制器只返回最后一行（除非你`return`在某处放了一条语句），所以把你的最后一行改成这样：

```
[clinicalRequirementsInstance: new ClinicalRequirements(params), terms: terms] 
```

# linq - 无法从查询中推断出类型参数

> ID：13094677
> 
> 赞同：2
> 
> 时间：2012-10-26T21:27:19.757
> 
> 标签：linq, linq-to-entities

我的 linq 查询有效，我在 linqpad 中进行了测试，得到了结果。当我尝试使用 EntityVM ViewModel 时，错误发生在最后一步。我真的不明白这个错误信息是什么意思。有人可以向我解释一下，并告诉我如何解决它。谢谢你。

**错误消息：“无法从查询中推断类型参数”**

```
 var entityVersions = EntityVersionRepository.Get().Where(x => x.Entity.ClientId == clientId);

        var groups = from ev in entityVersions
                     group ev by ev.EntityId
                         into g
                         select g.OrderByDescending(x => x.TaxYear).FirstOrDefault();

        var result = from g in groups
                     select (en => new EntityVM
                                       {
                                           Name = en.EntityName,
                                           Id = en.EntityId  
                                       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:39:41.537

看起来可能是因为您实际上并未评估`groups`查询（通过调用`.ToList()`或类似的方式）。尝试先评估`groups`：

```
var groups = (from ev in entityVersions
                 group ev by ev.EntityId
                     into g
                     select g.OrderByDescending(x => x.TaxYear).FirstOrDefault())
             .ToList(); 
```

如果这是问题所在，那么它可能是为什么在从查询返回具体类型时不应使用 var 的主要示例。如果您更改`var groups`为`List<Group> groups`，则该代码甚至不会编译，因此您会立即知道您没有实际评估该属性（它会返回 an `IQueryable<Group>`）。

# python - 扩展Python，如何处理枚举

> ID：13094678
> 
> 赞同：1
> 
> 时间：2012-10-26T21:27:22.287
> 
> 标签：python

我正在使用扩展的 python 概念编写一个包装程序，我不确定如何处理枚举。基本上我有 ac 函数，其中一个输入是枚举。我应该使用什么格式选项？

```
typedef enum
{
    ISOUTPUT = 'W',
    ISINPUT = 'R'
} myenum;

int func1( i int, b myenum) 
```

我的包装程序：

```
static PyObject *Wrapper_func1(PyObject *self, PyObject *args)
{
    int x, result;
    myenum y;    
    PyArg_ParseTuple(args,"iC",x,y);
    result= func1(x, y);
    return Py_BuildValue("i",result);   
} 
```

在python脚本中

```
import mymodule

x= mymodule.func1(1,'R') --- giving attribute error, when I debugged I found it is giving segment violation, 
```

BT：

```
#0  convertsimple (arg=0x73e960, p_format=0x7fffffffd348,
    p_va=<value optimized out>, flags=0,
    msgbuf=0x7fffffffd1b0 "\310V\266\252\252*", bufsize=256,
    freelist=0x7fffffffd330) at Python/getargs.c:684
#1  0x000000000048e30f in convertitem (freelist=<value optimized out>,
    bufsize=<value optimized out>, msgbuf=<value optimized out>,
    levels=<value optimized out>, flags=<value optimized out>,
    p_va=<value optimized out>, p_format=<value optimized out>, arg=0x73e960)
    at Python/getargs.c:499
#2  vgetargs1 (freelist=<value optimized out>, bufsize=<value optimized out>,
    msgbuf=<value optimized out>, levels=<value optimized out>,
    flags=<value optimized out>, p_va=<value optimized out>,
    p_format=<value optimized out>, arg=0x73e960) at Python/getargs.c:330
#3  0x000000000048ea68 in PyArg_ParseTuple (args=0x73e960, format=0x0)
    at Python/getargs.c:102 
```

# c# - BeginInvoke() 偶尔会中断 (System.InvalidOperationException) 并在阅读器关闭时尝试调用 Read 无效

> ID：13094682
> 
> 赞同：2
> 
> 时间：2012-10-26T21:27:49.103
> 
> 标签：c#, winforms, sqldatasource, dataadapter, begininvoke

在以下代码片段中，`AddRow()`从非 UI 线程调用：

```
 public partial class Form1 : Form
  {
    public delegate void InvokeDelegate();

    ...
    SqlConnection mSqlConnection = new SqlConnection("Data Source=" + Environment.MachineName + "\\SQLEXPRESS; Initial Catalog=orderDB; Integrated Security=TRUE; MultipleActiveResultSets=True;");

    DataSet mDataSet = new DataSet();
    SqlDataAdapter mSqlDataAdapter = new SqlDataAdapter();

    ...
    private void UpdateGridView()
    {
      if (mSqlConnection.State == ConnectionState.Closed)
        mSqlConnection.Open();

      mSqlDataAdapter.SelectCommand = new SqlCommand("SELECT * FROM customerTable", mSqlConnection);
      mDataSet.Clear();
      mSqlDataAdapter.Fill(mDataSet);
      dataGridView1.DataSource = mDataSet.Tables[0];

      if (mSqlConnection.State == ConnectionState.Open)
        mSqlConnection.Close();
    }

    public void AddRow(int field1, int field2, int field3)
    {
      mSqlDataAdapter.InsertCommand = new SqlCommand("INSERT INTO customerTable VALUES(@field1, @field2, @field3)", mSqlConnection);

      mSqlDataAdapter.InsertCommand.Parameters.Add("@field1", SqlDbType.Int).Value = field1;
      mSqlDataAdapter.InsertCommand.Parameters.Add("@field2", SqlDbType.Int).Value = field2;
      mSqlDataAdapter.InsertCommand.Parameters.Add("@field3", SqlDbType.Int).Value = field3;

      mSqlConnection.Open();
      mSqlDataAdapter.InsertCommand.ExecuteNonQuery();
      dataGridView1.BeginInvoke(new InvokeDelegate(UpdateGridView)); // UpdateGridView() won't work from a non-UI thread
      mSqlConnection.Close();

    }
} 
```

在不得不`AddRow()`从非 UI 线程调用之前，我`UpdateGridView()`被直接调用并且它完美地工作。但是现在`AddRow()`不再保证从 UI 线程调用，所以我将直接调用替换为`dataGridView1.BeginInvoke()`.

一旦我这样做了，我的基于表单的应用程序开始`System.InvalidOperationException`每隔几次`AddRow()`调用就抛出一个，中断`mSqlDataAdapter.Fill(mDataSet);`语句（**！**）并带有以下消息：

> 阅读器关闭时调用 Read 的尝试无效

我的问题是为什么？

1.  什么读者？数据适配器的？SqlConnection 的？DataGridView 的数据源？
2.  我正在处理`BeginInvoke()`mSqlConnection 的*Open()*和*Close()*周围，如果 mSqlConnection 没有打开，我什至会打开它（再次！），那么我为什么会收到这个“关闭”错误？
3.  解决这个问题的正确方法是什么？（即从非 UI 线程更新 DataGridView）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:08:35.903

这个问题肯定是由于比赛条件。

从 UpdateGridView 中删除这两行，因为它不是关闭连接的正确位置。

```
 if (mSqlConnection.State == ConnectionState.Open)
    mSqlConnection.Close(); 
```

使用[IAsyncResult](http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx)检索等待句柄并等待线程完成 GridUpdate。

```
 IAsyncResult Result = dataGridView1.BeginInvoke(new InvokeDelegate(UpdateGridView));
 Result.AsyncWaitHandle.WaitOne();
 mSqlConnection.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:45:22.537

我认为您有种族问题，请在您的线程中查看这部分代码：

```
 dataGridView1.BeginInvoke(new InvokeDelegate(UpdateGridView)); 
 mConnection.Close(); 
```

BeginInvoke 将在这样的事情方便控制时运行委托。因此，您从线程中调用它，它会启动您在 UI 线程中的填充，该线程可以持续很长时间（您正在从表中获取所有内容），并且在它获取数据时，调用关闭单独线程中的连接会关闭它。你提到它只是有时发生，在大多数情况下，线程会关闭连接，你会在`UpdateGridView()`方法中重新打开它，但有时，你会在线程关闭连接之前开始填充数据集。您应该同步打开和关闭连接。

切换这两个应该可以解决您的问题，但您每次都会建立两个连接：

```
mConnection.Close();
dataGridView1.BeginInvoke(new InvokeDelegate(UpdateGridView)); 
```

# c# - 从子控件移动到父控件时，MouseLeave 不会触发

> ID：13094684
> 
> 赞同：0
> 
> 时间：2012-10-26T21:28:05.023
> 
> 标签：c#, winforms, user-controls

我有一个 UserControl 监听它自己的 MouseLeave 以改变它的背景颜色和它的一些孩子的可见性。应该失去可见性的孩子也听他们自己的 MouseLeave 以改变他们的背景颜色。

一切正常的场景是这样的：

1.  将鼠标移动到 UserControl。
2.  将鼠标移至子级。
3.  将鼠标移出 Child 进入 UserControl。

有问题的情况是这样的：

1.  将鼠标移动到 UserControl。
2.  将鼠标移至子级。
3.  将鼠标移出 Child，而不是移入 UserControl，而是直接移出。

这种情况一直发生，因为 Child 位于 UserControl 的最边缘。请注意，不仅 UserControl 的 MouseLeave 不会触发，Child 的 MouseLeave 也不会触发。

在这种情况下，为了查明鼠标是否真的离开了该区域，我必须听其他控件的 MouseEnter，然后通知 UserControl 和 Child，但我真的想避免这种解决方案，因为它很丑陋而不是 OOPish .

此外，Child 必须位于 UserControl 的最边缘，并且不能移动。

谁能想到一个巧妙的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T22:31:57.513

我的测试表明这是一个可行的解决方案。只需要一个自定义用户控件。

```
 public class MyPanel : Panel
    {
        protected override void OnControlAdded(ControlEventArgs e)
        {
            e.Control.MouseLeave += DidMouseReallyLeave; 
            base.OnControlAdded(e);
        }
        protected override void OnMouseLeave(EventArgs e)
        {
            DidMouseReallyLeave(this, e);
        }
        private void DidMouseReallyLeave(object sender, EventArgs e)
        {
            if (this.ClientRectangle.Contains(this.PointToClient(Control.MousePosition)))
                return;
            base.OnMouseLeave(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:18:06.927

我以前见过同样的行为。您的 .NET 版本是最新的吗？确保您使用的是最新的服务包。

你见过[Application.AddMessageFilter](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx)事件吗？我在[这里的答案](https://stackoverflow.com/questions/1161280/parent-control-mouse-enter-leave-events-with-child-controls)中使用它来捕获鼠标消息并更智能地处理它们。它可能在这里派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:51:13.440

这不是 MouseLeave 应该表现的方式。即使鼠标光标完全移动了您的应用程序窗口，您也应该得到 MouseLeave 事件。

我猜你没有在 MouseLeave 处理程序中调用基本方法。

无论如何，在 MouseEnter 上，您可以设置一个每 0.25 秒触发一次的计时器，并在其中检查鼠标是否仍在控件上方。如果不是，请终止计时器并更改控件的颜色。

# python - 如何从numpy中不同长度的唯一数组组成频率列表

> ID：13094688
> 
> 赞同：1
> 
> 时间：2012-10-26T21:28:27.853
> 
> 标签：python, arrays, numpy, unique

我有一个不同长度的numpy数组列表，其中一些重复，如下所示：

```
import numpy as np

multi = [np.array([1, 2, 3]),
      np.array([1, 2]),
      np.array([1, 2, 3, 4]),
      np.array([1, 2, 3]),
      np.array([1, 2])] 
```

从这个列表中，我想要一个唯一数组的计数（如序列上的直方图）。

由于 numpy 数组不可散列，因此我通过将数组转换为其字符串表示形式并将其用作与[此方法](http://www.python-forum.org/pythonforum/viewtopic.php?f=3&t=15997)`itertools.groupby`类似的分组键来执行此操作，

```
import itertools

sorted_strings = sorted([str(p) for p in multi])
groups = [(k, len(list(g))) for k, g in itertools.groupby(sorted_strings)]
print(groups) 
```

输出是：

```
[('[1 2 3 4]', 1), ('[1 2 3]', 2), ('[1 2]', 2)] 
```

这是正确的，但我想知道是否有更优雅的解决方案，或者是否有比数组列表更好的方法来存储这些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:07:18.073

您可以使用[`collections.Counter`](http://docs.python.org/release/3.1.5/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> 
>>> Counter(map(tuple, multi)).most_common()
[((1, 2), 2), ((1, 2, 3), 2), ((1, 2, 3, 4), 1)] 
```

* * *

为了最不常见：

```
>>> Counter(map(tuple, multi)).most_common()[::-1]
[((1, 2, 3, 4), 1), ((1, 2, 3), 2), ((1, 2), 2)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:53:10.907

如果你遇到了一个没有定义的 Python 版本`collections.Counter`，你可以使用你链接到的方法：

```
 base = sorted(tuple(m) for m in multi)
 G=[(k,len(list(g))) for (k,g) in itertools.groupby(base)] 
```

您基本上将每个数组转换为一个元组（请注意，`Counter`基于 - 的方法依赖于相同的方法）。

请注意，您可能希望确保您的数组已排序，因此`np.array([2,1])`和`np.array([1,2])`被认为是等效的：

```
 base = sorted(tuple(sorted(m)) for m in multi) 
```

# r - 从环境中删除 NULL 对象

> ID：13094689
> 
> 赞同：5
> 
> 时间：2012-10-26T21:28:35.690
> 
> 标签：r, quantmod

我有一个 xts 或`NULL`. 我想`NULL`从环境中删除所有内容。有没有我可以使用的功能`eapply`来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T21:44:01.743

```
rm(
  list=names(
    which(
      sapply(globalenv(),is.null) # or .GlobalEnv
      )
    )
  ) 
```

如果不是全局环境，可以使用`envir`switch in`rm`并将环境名称包裹在`getenv()`调用`sapply`中

# c++ - 制表符（\t）有多少个空格？

> ID：13094690
> 
> 赞同：21
> 
> 时间：2012-10-26T21:28:40.623
> 
> 标签：c++, c, printf

我想实现一个文本绘制功能。但我不确定它是如何`\t`工作的，这意味着我不知道我应该打印多少个空格`\t`。

我想出了以下算法：

a) 每个`\t`最多代表一个`NUMBER_OF_SPACES_FOR_TAB`空格。b) 如果`\t`出现在最后一行的相应位置，`\t`则此行应与`\t`最后一行对齐。

例子：

```
printf("a\t\tb\n");
printf("\t\tc\n"); 
```

应该打印：

```
a11112222b
34444c 
```

在哪里：

1.Number`i`代表`\t`at位置的空格`i`

2.`NUMBER_OF_SPACES_FOR_TAB == 4`

有人知道标准算法吗？提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-26T21:32:17.140

一个制表符应该前进到下一个*制表位*。从历史上看，制表位是每 8 个字符，尽管现在常用较小的值，并且大多数编辑器都可以配置。

我希望您的输出如下所示：

```
123456789
a       b
        c 
```

该算法是从零开始列计数，然后为每个字符输出增加它。当您到达一个制表符时，输出`n-(c%n)`空格，其中`c`是列号（从零开始）并且`n`是制表符间距。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-26T21:33:17.243

想象一个标尺，每 8 个空格就有一个制表位。制表符将使文本与下一个制表位对齐。

```
 0       8       16      24      32      40
                                |.......|.......|.......|.......|.......|
printf("\tbar\n");              \t      bar
printf("foo\tbar\n");           foo\t   bar
printf("longerfoo\tbar");       longerfoo\t     bar 
```

要计算下一个制表位的位置，请使用当前的`column`.

```
nextTabStop = (column + 8) / 8 * 8 
```

该`/ 8 * 8`部分有效地将结果截断为最接近的 8 倍数。例如，如果您在第 11 列，则 (11 + 8) 为 19，19 / 8 为 2，2 * 8 为 16。所以下一个选项卡第 11 列的停靠点位于第 16 列。

在文本编辑器中，您可以将制表位配置为更小的间隔，例如每 4 个空格。如果您要模拟终端上的选项卡的外观，您应该坚持每个选项卡有 8 个空格。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-26T21:35:00.037

制表符转移到下一个制表位。默认情况下，每 8 个空格就有一个。但是在大多数 shell 中，您可以轻松地将其编辑为您想要的任意数量的空格（linux 中的配置文件首选项，在 vim 中设置 tabstop）。

# c++ - 编译错误：“错误 MSB3774：找不到 SDK“Microsoft.VCLibs，版本=11.0””

> ID：13094694
> 
> 赞同：0
> 
> 时间：2012-10-26T21:29:05.723
> 
> 标签：c++, windows-8, direct3d

我正在尝试在[http://msdn.microsoft.com/en-us/library/windows/apps/hh780567.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780567.aspx)开始 Direct3D 教程。

我创建了我的新项目，教程的第一部分在[http://msdn.microsoft.com/en-us/library/windows/apps/hh780569.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780569.aspx)说你可以继续构建它，但是当我建立我得到以下错误。

`error MSB3774: Could not find SDK "Microsoft.VCLibs, Version=11.0"`

我环顾四周，发现了一些关于该错误的信息，但没有什么能帮助我真正让它工作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:27:05.120

显然有几种方法可以看到这个问题。一种是，如果您在安装 Visual Studio 2012 后从 Windows 7 升级到 Windows 8。这在[KB2738090](http://support.microsoft.com/kb/2738090)中进行了描述，“在升级到 Visual Studio 2012 并从 Windows 7 升级到Windows 8"（很贴切，不是吗）。答：修复您的 VS 2012 安装。

另一种方法是，如果您安装了 Visual Studio 2012 Update 1，并且某些星号汇合会导致某些核心库被卸载。如果您的`%Program Files%\Microsoft SDKs\Windows\v8.0\extensionsdks\microsoft.vclibs`目录丢失了，您可能会像我一样发现，无论对 VS 或 Windows SDK 进行多少修复、删除和替换，都无法将其恢复。

一点点侦查使我找到了几个似乎阻止重新安装核心库的注册表项：

`HKLM\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\11.0\VC\Libraries\Core\ArchNeutral\PaddedVersion`

`HKLM\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\11.0\VC\Libraries\Core\x86\PaddedVersion`

当我将这两个 REG_SZ 值设置为“0”而不是“51106”，然后重新安装 VS 2012 更新 1 时，核心库的扩展 SDK 返回，我可以再次构建 C++ Windows Store 应用程序。

也许这会帮助那些在搜索了这个明显罕见的问题后登陆这里的其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:48:44.287

我认为您的 SDK 已损坏。尝试进行 SDK 修复，这很可能会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T13:26:41.387

这种类型的错误通常意味着您可能正在尝试构建而没有在构建配置中指定架构或选择与您的设置不兼容的架构。

尝试在 Build->Configuration Manager 中将架构设置为“any”以外的其他内容。

# php - PHP在单独的线程中发送POST请求并忘记

> ID：13094698
> 
> 赞同：8
> 
> 时间：2012-10-26T21:29:13.563
> 
> 标签：php, multithreading, curl, asynchronous

我的应用程序处理预订，并且在处理过程中，我希望它将预订详细信息发送给我的应用程序的任何一个进行预订的合作伙伴，这样他们就可以存储对预订的参考，**并且**不会阻止我的应用程序必须执行的其他处理。

我已经考虑过如何向合作伙伴发送消息，我的解决方案是向正在预订的合作伙伴发送 cURL POST 请求*（除了回答我的问题，也许有人有比这更好的解决方案？）*。

每个合作伙伴都有一个特定的 URL，他们将设置该 URL 以接收此 POST 请求并存储我们发送给他们的预订信息。

**问题：** 如果我们尝试发送这个 POST 请求并且他们的网络服务器速度很慢或很慢，那么我们可能会等待不必要的长时间才能得到响应，这反过来会延迟使用我们服务的实际用户的预订确认。

**理想的解决方案：** 我想在另一个线程中发送这个 PHP cURL 请求，这样我们就可以继续我们愉快的方式并确认预订。如果在另一个线程中有延迟，这不会阻止我们。

我考虑过的其他解决方案是：

*   调用外部脚本（例如用 python 编写）来发送这个请求。我读过使用**exec()**可能会占用大量资源。我们有很多预订，所以我们会发送很多这样的预订帖子。所以理想情况下，我们需要一些资源良知。
*   使用套接字。我不熟悉这些配置，我担心我们的套接字服务器会宕机。这也感觉像是一项维护任务。也许我错了？
*   使用像[Pusher](http://pusher.com/)这样的服务，它实际上是一个套接字服务。缺点是如果听众错过了一条消息，他们将永远不会再得到它。例如，合作伙伴会错过存储该预订。

很高兴能得到一些关于我在这里想要完成的工作的反馈，特别是来自那些需要针对我所处的相同情况的解决方案的人。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:27:36.437

所以本质上你是在用 PHP 创建一个其他客户端使用的 API。这是我的建议：

1.  让您的客户通过 POST/GET 方法向您发出请求；而不是您作为 API 服务器尝试将数据推送到您的客户端。这是更好的方法，因为它可以让您摆脱客户端服务器关闭、缓慢或其他问题。因此，当他们向您发送请求时，这意味着他们完全有能力处理响应。

2.  使用 HTTP 持久连接：在 apache`keep-alive`中将其值设置为高，因此客户端可以重用现有连接，从而减少延迟。

3.  对于 php 中的多处理，请查看 [Getting into multiprocessing](http://www.tuxradar.com/practicalphp/16/1/3)。基本上，有一个`pcntl_fork()`功能可以让你分叉一个进程并为多处理创建新的子进程。

4.  基于redis或类似的东西实现一个后台作业队列。想法是所有长时间运行的作业都被放入后台作业队列中，然后为每个任务生成一个工作人员，因此这些作业通过多处理执行。[使用 Redis 和 Solo 的 PHP Workers](http://www.justincarmony.com/blog/2012/01/10/php-workers-with-redis-solo/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:24:34.270

让一个单独的脚本通过 cron 运行怎么样？
获得最终确认可能需要更大的延迟（只能每分钟发送外部请求），但允许用户界面操作仅将信息存储在队列中并继续，然后计划任务稍后可以处理它.
队列处理器将能够检查来自外部服务的有效响应，并在必要时重试，而无需占用用户界面。

为了更及时的处理，您可以创建一个守护进程来检查队列中要处理的条目，其延迟比使用 cron 可能的延迟更小。PEAR 有一个[System_Daemon 包](http://pear.php.net/package/System_Daemon)，可以帮助在 PHP 中创建守护程序。

# python - 如何修补 shutil.move 以测试某些方法

> ID：13094701
> 
> 赞同：3
> 
> 时间：2012-10-26T21:29:24.910
> 
> 标签：python, testing, mocking, monkeypatching

我需要测试一种可以移动文件的方法。我不希望文件移动操作实际发生，我只需要知道被测方法正确调用`shutil.move`

什么是最好的修补方法，`shutil.move`以便该方法可以在不执行实际文件操作的情况下调用它？

我是这样做的，但是很丑，我想使用模拟库来做到这一点：

```
 real_move = ftp2email.shutil.move
    move_operations = []
    def fake_move(src, dst):
        move_operations.append((src, dst))
    ftp2email.shutil.move = fake_move

    msg_id = '/path/to/message.xml'
    self.ch.mark_message(msg_id)
    self.assertEqual(move_operations,
                        [('/path/to/message.xml', '/path/to/archived/message.xml')])

    ftp2email.shutil.move = real_move 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:51:13.883

您可以尝试使用[mox](https://code.google.com/p/pymox/wiki/MoxDocumentation)，它可以做那种事情。

来自[mox 食谱](https://code.google.com/p/pymox/wiki/MoxRecipes)。

```
def testFoo(self):
    self.mox.StubOutWithMock(module_to_mock, 'FunctionToMock')
    module_to_mock.FunctionToMock().AndReturn(foo)

    self.mox.ReplayAll()
    ...
    self.mox.VerifyAll() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:26:30.823

我已经使用[Mock 库解决了它](http://pypi.python.org/pypi/mock)

```
@mock.patch('%s.ftp2email.shutil.move' % __name__)
def test_mark_message(self, move_mock):

    self.ch.mark_message('/path/to/message.xml')
    move_mock.assert_called_with('/path/to/message.xml',
                                 '/path/to/archived/message.xml') 
```

这只是一种方法，我也可以使用“with 语句”或调用模拟方法 start 和 stop 来完成。

# git - git clone 静默失败

> ID：13094702
> 
> 赞同：3
> 
> 时间：2012-10-26T21:29:29.870
> 
> 标签：git, github, git-clone

更准确地说，我相信“git clone”会成功，但会立即删除我生成的本地 repo 中的所有文件。可以在[此处](https://stackoverflow.com/questions/10361322/git-status-for-cloned-repository-shows-file-deleted)找到类似的问题，但我想不出一种方法可以将我对这个问题的扭曲作为答案，所以我来了。

以下是我的场景细节的概要：

我在 github 上有一个存储库。我可以像任何人期望的那样在 Ubuntu 12.04 上使用 git 克隆这个存储库。当我尝试克隆 wiki 时出现问题（github 可以通过[https://github.com/<owner>/<repository>.wiki.git](https://github.com/<owner>/<repository>.wiki.git)访问它）。我生成的本地副本是空的。运行“git status”后，我注意到 repo 的内容在克隆后立即被某个实体删除。

在分支主

要提交的更改：

（使用“git reset HEAD ...”取消暂存）

已删除：<文件名>

...对于我的 wiki 中的所有其他页面，依此类推。

“git branch -a” 为我和另一个人返回相同的东西：

*掌握

遥控器/原点/头 -> 原点/主

遥控器/原点/主控

**更新 1**

确实，我不知道暂存区和工作目录之间的区别，但这似乎不是问题。另一方面，它可能揭示了更多的错误。

我忘了提到，当我第一次克隆存储库时，我收到消息“无法统计 <long_filename>：文件名太长”

当我运行“git reset”时，所有的删除都列在“reset after unstaged changes:”下。奇怪的是 <long_filename> 被列为合并而不是删除。尽管如此，重置后我克隆到的目录中仍然看不到任何文件。

**更新 2**

我可以使用克隆文件夹中的 gitk 查看所有应该存在的 wiki 条目，但我很确定这些文件在我的文件系统的任何地方都没有以原始格式存在，否则“find / -name <filename> 2> /dev/null" 应该返回一些有用的输出。

**更新 3**

显然我的一个文件名太长了，git 无法管理。克隆后再次检查 repo 得到了所有文件，但那个文件： `error: unable to create file <filename>.md (File name too long)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-28T21:11:53.497

请注意，除了静默失败之外，如果在克隆*之前*创建的空文件夹（而不是由克隆创建）也将被删除。

在您的情况下，失败是因为文件名太长。
但是，更一般地说，`git clone $there $her`即使 here 目录存在，只要它是一个空目录，也允许使用“e”，但是该命令在操作失败时错误地删除了它。
该部分已通过 Git 2.16.x/2.17（2018 年第一季度）修复

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 d45420c](https://github.com/git/git/commit/d45420c1c8612f085f1901c33ff6f0ccfbb72d3b)、[提交 f9e377a](https://github.com/git/git/commit/f9e377adc0b1ed06e35d2c77a6c9f2687c5b950b)、[提交 8486b84](https://github.com/git/git/commit/8486b84f0ea4d7f943fdbe81050553d69d198742)、[提交 a4c4efd](https://github.com/git/git/commit/a4c4efd25159a8b308f9e204bc87e37b963bc2ae)（2018 年 1 月 2 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 addd37c](https://github.com/git/git/commit/addd37cd64e109eb0224e522869962519224cc78))^(中，2018 年 1 月 23 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `clone`: 不要清理我们没有创建的目录

> 曾几何时，`git-clone`会拒绝写入不是它自己创建的目录。因此，失败克隆的清理例程可以完全删除 git 和 worktree 目录。
> 
> 在[55892d2](https://github.com/git/git/commit/55892d23981917aefdb387ad7d0429f90cbd446a)（允许克隆到现有的空目录，2009-01-11，Git v1.6.2-rc0）中，我们学会了写入现有目录。这意味着这样做：
> 
> ```
> mkdir foo
> git clone will-fail foo 
> ```
> 
> 最终删除`foo`.
> 这不是一个巨大的灾难，因为根据定义`foo`必须是空的。
> 但这有点令人困惑；我们应该保留我们找到的文件系统。

* * *

" [`git clone --separate-git-dir=$elsewhere`](https://github.com/git/git/blob/f175e9b845a41f1a5135222d4d3b8aa9161b499a/Documentation/git-clone.txt#L287)" ^(( [man](https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---separate-git-dirltgitdirgt) ))用于踩踏现有目录的内容，当Git 2.29 (Q4 2020) 不是空目录`$elsewhere`时，该目录被教导失败。`$elsewhere`

请参阅[Ben Wijen ( ) 的](https://github.com/bwijen)[提交 dfaa209](https://github.com/git/git/commit/dfaa209a79a831e8ff4f6b8e14a8b0c35b4f6b6e)（2020 年 7 月 10 日[）](https://github.com/bwijen)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 f175e9b](https://github.com/git/git/commit/f175e9b845a41f1a5135222d4d3b8aa9161b499a))^(中，2020 年 7 月 30 日）)[`bwijen`](https://github.com/bwijen)
^([`gitster`](https://github.com/gitster))

> ## [`git clone`](https://github.com/git/git/commit/dfaa209a79a831e8ff4f6b8e14a8b0c35b4f6b6e): 不要克隆到非空目录
> 
> ^(签字人：Ben Wijen)

> 当使用^（^([man](https://git-scm.com/docs/git-clone))^）并且已经存在时，它的内容被破坏了。[`git clone`](https://github.com/git/git/blob/dfaa209a79a831e8ff4f6b8e14a8b0c35b4f6b6e/Documentation/git-clone.txt)`--separate-git-dir realgitdir``realgitdir`
> 
> 因此，请确保我们不会克隆到现有的非空目录中。
> 
> 当[d45420c1](https://github.com/git/git/commit/d45420c1c8612f085f1901c33ff6f0ccfbb72d3b)（“ `clone`：不要清理我们没有创建的目录”，2018-01-02，Git v2.17.0-rc0 --[批次 #1](https://github.com/git/git/commit/5be1f00a9a701532232f57958efab4be8c959a29)中列出的[合并](https://github.com/git/git/commit/addd37cd64e109eb0224e522869962519224cc78)）在克隆失败后收紧清理程序时空目录，它假定给定的现有目录是一个空目录，因此可以保留该目录，同时运行旨在删除其中所有内容的清理过程（因为无论如何都不会有任何内容）。 检查并确保即使克隆到现有存储库中也是空的。
> `$GIT_DIR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:17:36.293

在 OSX Mountain Lion 上，我遇到了错误

```
error: Untracked working tree file '.DS_Store' would be overwritten by merge. 
```

显然，创建我的 OSX 查找器的令人讨厌的 .DS_Store 文件位于我试图克隆的远程存储库中。这是因为我最初在更新主计算机上的 .gitignore 文件之前推送了项目。

在 git 克隆到我的辅助计算机之前从远程存储库中删除 .DS_Store 为我解决了这个问题。这是我从我的主计算机上做的：

```
$   git rm .DS_Store 
$   git commit -m "removed .DS_Store"
$   git push 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:38:43.220

`git checkout .`应该丢弃自上次提交以来的所有本地更改，将您恢复到干净状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T00:56:28.417

您可能不熟悉暂存区和工作目录之间的区别。

如果所有文件都显示为已删除，这仅意味着您的暂存区和工作目录之间存在差异；具体来说; 这些文件位于暂存区域，但不在您的工作目录中。

做吧`git reset`。

# ios - iTunes 商店 - 在 1 个市场发布应用程序然后扩展

> ID：13094703
> 
> 赞同：1
> 
> 时间：2012-10-26T21:29:33.677
> 
> 标签：ios, itunes-store

如果我只在美国发布我的应用程序，然后在以后扩展并发布到更多市场，我的应用程序在发布时会出现在新市场的最近发布列表中吗？

谢谢！

# python - 在 python 3 中运行 django webapp

> ID：13094709
> 
> 赞同：1
> 
> 时间：2012-10-26T21:30:22.243
> 
> 标签：python, django, python-3.x, virtualenv, pip

我在 macosx 机器的 virtualenv 中使用 python 3.3，当我在解压 django 1.5 并运行以下命令后安装 django 1.5 alpha 版本时

```
pip install -e Django-1.5a1 
```

当我运行 pip freeze 时，它​​看起来像安装了 django

以下是输出

```
Django==1.5a1 
Pygments==1.5
South==0.7.6
bpython==0.11
distribute==0.6.28
django-debug-toolbar==0.9.4
django-extensions==1.0.0
ipython==0.13.1
logilab-astng==0.24.1
logilab-common==0.58.1
pylint==0.26.0 
```

显然 django 已安装但是当我运行以下命令时 import django 似乎不起作用

```
import django 
```

在 virtualenv 内的 python shell 中，输出是

```
No module named import django 
```

这个设置有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:04:42.710

看起来 pip 不适用于安装此版本，我使用了 setup.py ，现在一切似乎都正常了。

# mfc - 如何在 RichEdit 控件中抑制超链接周围的尖括号

> ID：13094710
> 
> 赞同：1
> 
> 时间：2012-10-26T21:30:22.007
> 
> 标签：mfc, rtf, richedit

我正在使用在运行时从资源中的 RTF 文件`CRichEditCtrl::StreamIn`初始化控件的内容。`RichEdit20W`文件中的 RTF 文本：

…… `blah {\field{\*\fldinst{HYPERLINK "www.foo.com/bar"}}{\fldrslt{\ul\cf1 www.foo.com/bar}}}\f0\fs24 blah`_

我注意到 Win XP 和 Win 7 之间的行为差​​异（不确定 Vista）：

在**Win XP**中（显示的链接没有任何格式或括号）：

> ... 等等 www.foo.com/bar 等等...

在**Win 7**中（链接显示为蓝色，带有下划线，并用尖括号括起来）：

> ... 等等 <www.foo.com/bar> 等等...

如果我将同一文档加载到 WordPad 或 MS Word 中，则会显示链接（蓝色下划线文本），*但没有周围的括号*。

我认为写字板在幕后使用相同的控件，因此必须有某种方法来抑制这种行为。有谁知道如何关闭这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:22:48.910

如果找到解决方案，请分享。我也面临同样的问题。

我编辑了我的 rtf 以删除超链接标签，并将 URL 保持为普通文本并设置`EM_AUTOURLDETECT`为 true。Richeedit 识别了 URL 和超链接，并`EN_LINK`在`WM_NOTIFY`.

虽然可能不是实际问题的解决方案。

# github-api - github api 获取拉取请求的数量

> ID：13094712
> 
> 赞同：18
> 
> 时间：2012-10-26T21:30:27.937
> 
> 标签：github-api

通过 GitHub API，是否可以在不下载与拉取请求本身相关的所有额外数据的情况下获取存储库的打开拉取请求的数量？

例如，当您获得存储库列表时，对于每个存储库，您都可以看到未解决问题的数量。开放拉取请求是否有类似的属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-31T21:36:45.470

您还可以查看搜索 api [https://developer.github.com/v3/search/#search-issues](https://developer.github.com/v3/search/#search-issues)。看起来你可以过滤类型，也可能关闭或关闭:)

正如[codea](https://stackoverflow.com/users/1832488/codea)在评论中所建议的那样：

```
https://api.github.com/search/issues?q=+type:pr+user:StackExchange&sort=created&order=asc 
```

# python - 获取属性错误： 没有属性

> ID：13094713
> 
> 赞同：16
> 
> 时间：2012-10-26T21:30:30.933
> 
> 标签：python, attributeerror

我正在模块 mod1 的类中创建一个方法，并按如下方式调用它：

```
class blahblah:
   def foobar(self, bvar, **dvar)
       ////
       return dvar 
```

并将其称为：

```
obj1 = mod1.blahblah()
dvar1 = obj1.foobar(True, **somedictionary) 
```

它抛出一个`Attribute error: blahblah has no attribute named foobar`

你能帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-26T22:14:12.803

您描述的错误类型可能只是由不匹配的缩进引起的。如果该方法位于类的最底部，将其在类中向上移动一点，问题就会变得明显。

当 python 解释器遇到不匹配的缩进时（比如你开始在文件底部使用空格缩进的制表符），解释器不会总是抛出错误；它可以简单地忽略文件的其余部分。我今天在更新一些旧代码时遇到了这个问题，其中原始作者使用了不同的空白字符（恰好与我的 Geany 选项卡匹配），它让我陷入了一个比我想承认的更长的循环。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-12T23:28:43.733

非常老的问题，但我引用 @Jacquot 的评论，因为它解决了我的问题（我在 ipython 中使用 %autoreload ）。

`For what it's worth, it can also happen when using the %autoreload magic command in jupyter notebook, when you modify some methods in your module code (ipython.org/ipython-doc/3/config/extensions/…)`

特别是，我解决了重新运行正在导入我的课程的单元的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-17T23:19:42.427

我遇到了同样的问题，对我来说，它发生在我移动类文件时，但我在旧文件夹中留下了一个 .pyo 文件，python 仍在读取该 .pyo 文件，而不是读取移动的 .py 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-18T16:32:25.990

面临同样的问题，直到我意识到我已经用相同的名称命名了两个文件中的类 - 非常愚蠢！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-01T13:35:25.163

老问题，但对于那些面临这个问题并且没有其他答案可以帮助你的人来说，这可能会有所帮助。我正在使用**Pickle**保存一个包含一些数据的整个类，然后再次加载这个类实例，但是我在****init****上添加了一些类方法和属性，这就是解释器找不到我的类中描述的新属性的原因（它在泡菜对象中加载“旧”类）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-16T17:31:46.227

当我遇到这个问题时，我立即开始检查不平衡的缩进、制表符等......一切似乎都是正确的，但错误仍然出现。我走开，回来，又看了看，DUH...，我发现我有一个错字。而不是`__init__()`，我输入了`__inti__()`。因此，首先检查所有构造函数的语法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-29T19:56:05.947

就我而言，我只是将 ClassName 添加到方法调用中，它开始工作：

错误的：

```
import Clases.Class_filename as LWD
articles=LWD.method_name(parameters) 
```

更正：

```
import Clases.ClassName as LWD
articles=LWD.ClassName.method_name(parameters) 
```

Classes/Class_filename.py 包含如下内容：

```
class ClassName :
    def method_name(parameters):
     .... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-04T23:44:55.537

对于使用 VSCode 的 Jupyter 笔记本，对我有用的是在更改导入文件后重新启动 VSCode。

# wpf - 使用 Artefact 为堆栈面板设置动画

> ID：13094714
> 
> 赞同：1
> 
> 时间：2012-10-26T21:30:32.010
> 
> 标签：wpf, animation, stackpanel, codeplex

我正在尝试使用 Artefact Animator 使动画工作：[Codeplex 上的 Artefact](http://artefactanimator.codeplex.com/)

相关的 XAML：

```
 <Button x:Name="adminButton"
       Content="Admin Console"
       HorizontalAlignment="Left"
       Margin="25,215,0,0"
       VerticalAlignment="Top"
       Width="98"
       Click="adminPanelCall"/> 
```

和：

```
 <StackPanel x:Name="adminPanel"
       Width="300"
       Background="#FFD4D4D4"
       Margin="750,0,0,0" /> 
```

在我后面的代码中：

```
private void adminPanelCall(object sender, RoutedEventArgs e)
    {
        ArtefactAnimator.AddEase(adminPanel, Margin.Left, 500, 1, AnimationTransitions.CubicEaseInOut, 0);
    } 
```

我正在引用 WPF .dll 并确保包含“使用 Artefact.Animation;” 我猜我试图动画的属性不正确？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:10:32.660

您可以使用 AnimationTypes 类中的预定义常量来告诉您要为哪个属性设置动画：

```
ArtefactAnimator.AddEase(adminPanel, AnimationTypes.MarginLeft, 500, 1, AnimationTransitions.CubicEaseInOut, 0); 
```

# c - 这在 C 中意味着什么？AB->CD->Func(参数)

> ID：13094715
> 
> 赞同：0
> 
> 时间：2012-10-26T21:30:33.117
> 
> 标签：c

好的，让我再解释一下。我在结构中有一个指向结构`AB`类型`struct1`的指针，还有一个指向另一个称为`CD`type的结构的指针，`struct2`并且定义`struct2`有一些函数原型，包括`Func(param)`. 如果有人可以帮助我了解一点，我将非常感激。

* * *

是的，代码是针对微控制器中的 USB 主机的，我没有添加代码，因为它可以解决问题，但在这里，

电话是：

```
void USBHOST_Process(USB_OTG_CORE_HANDLE *pdev , USBH_HOST *phost){
    ...
    if (phost->usr_cb->UserInput() == USBH_USR_RESP_OK){
    ...
    }
    ...
}

typedef struct _Host_TypeDef
{
  HOST_State            gState;       /*  Host State Machine Value */
  HOST_State            gStateBkp;    /* backup of previous State machine value */
  ENUM_State            EnumState;    /* Enumeration state Machine */
  CMD_State             RequestState;       
  USBH_Ctrl_TypeDef     Control;

  USBH_Device_TypeDef   device_prop; 

  USBH_Class_cb_TypeDef               *class_cb;  
  USBH_Usr_cb_TypeDef                 *usr_cb;

} USBH_HOST, *pUSBH_HOST;

typedef struct _USBH_USR_PROP
{
  void (*Init)(void);       /* HostLibInitialized */
  void (*DeInit)(void);       /* HostLibInitialized */  
  void (*DeviceAttached)(void);           /* DeviceAttached */
  void (*ResetDevice)(void);
  void (*DeviceDisconnected)(void); 
  void (*OverCurrentDetected)(void);  
  void (*DeviceSpeedDetected)(uint8_t DeviceSpeed);          /* DeviceSpeed */
  void (*DeviceDescAvailable)(void *);    /* DeviceDescriptor is available */
  void (*DeviceAddressAssigned)(void);  /* Address is assigned to USB Device */
  void (*ConfigurationDescAvailable)(USBH_CfgDesc_TypeDef *,
                                     USBH_InterfaceDesc_TypeDef *,
                                     USBH_EpDesc_TypeDef *); 
  /* Configuration Descriptor available */
  void (*ManufacturerString)(void *);     /* ManufacturerString*/
  void (*ProductString)(void *);          /* ProductString*/
  void (*SerialNumString)(void *);        /* SerialNubString*/
  void (*EnumerationDone)(void);           /* Enumeration finished */
  USBH_USR_Status (*UserInput)(void);
  int  (*UserApplication) (void);
  void (*DeviceNotSupported)(void); /* Device is not supported*/
  void (*UnrecoveredError)(void);

}
USBH_Usr_cb_TypeDef; 
```

现在我明白了它的作用，但是我找不到 UserInput(void) 的定义，我找不到它的作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:37:23.297

你所说的“一些函数原型，包括`Func(param)`”是一个[*函数指针*](http://en.wikipedia.org/wiki/Function_pointer#Example_in_C)。您可以调用指针指向的函数，就好像指针表示该函数的名称一样。最里面的结构已经设置了一个指向某个函数的指针；您的代码片段通过其指针调用该函数。

这是一个简短的示例，说明了它是如何工作的（[也在 ideone 上](http://ideone.com/unbrOx)）：

```
#include <stdio.h>

typedef struct {
    void (*func)(int);  
} with_fp;

void test(int n) {
    printf("Test %d\n", n);
}

int main(void) {
    with_fp s = {.func = test};
    with_fp *ptr = &s;
    ptr->func(123);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:31:58.697

它使用这些参数调用`Func()`结构的函数。`struct2`

函数`Func()`是指向函数的指针，是构成函数的指令开始的指针（内存地址）。

请参阅[C 中的函数指针如何工作？](https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work)解释。

指针是一个变量，必须在用于调用之前设置。

# c++ - 在容器中存储 boost::function 对象

> ID：13094720
> 
> 赞同：4
> 
> 时间：2012-10-26T21:30:53.347
> 
> 标签：c++, boost, boost-function

我有一个向量`KeyCallback`：

```
typedef boost::function<void (const KeyEvent&)> KeyCallback 
```

我用它来存储按下键盘按钮时的所有侦听器。我可以添加它们并将事件发送到所有回调`for_each`，但我不知道如何`KeyCallback`从我的向量中实际删除特定签名。

例如我想要这样的东西：

```
void InputManager::UnregisterCallback(KeyCallback callback) {
  mKeyCallbacks.erase(std::find(mKeyCallbacks.begin(), mKeyCallbacks.end(), callback));
} 
```

根据`boost::function`文档（参见[此处](http://www.boost.org/doc/libs/1_51_0/doc/html/function/faq.html#id1564716)），没有比较函数对象之类的东西，这可以解释我的上述问题。那我卡住了吗？有什么好办法吗？

（我阅读了有关`boost::signals`回调机制的信息，但它显然很慢，我希望回调可能每帧触发几次。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T00:08:25.053

# 方法#1：

[http://www.boost.org/doc/libs/1_51_0/doc/html/function/tutorial.html#id1546064](http://www.boost.org/doc/libs/1_51_0/doc/html/function/tutorial.html#id1546064)

> 函数对象包装器可以通过 == 或 != 与可以存储在包装器中的任何函数对象进行比较。

因此，解决方案之一是为 UnregisterCallback 的参数定义特殊类型（也支持类型擦除）。这是基于事实，您可以将 boost::function 与 functor/function 进行比较 - 结果您仍然会有 boost::function 的向量，仅在需要执行比较的地方才需要新类型，例如 UnregisterCallback：

[**现场演示**](http://ideone.com/uvnCoh)

```
#include <boost/scoped_ptr.hpp>
#include <boost/function.hpp>
#include <algorithm>
#include <iostream>
#include <typeinfo>
#include <ostream>
#include <vector>
#include <string>

using namespace std;
using namespace boost;

typedef int KeyEvent;
typedef function<void (const KeyEvent &)> KeyCallback;

struct AbstractCallback
{
    virtual bool equals(const KeyCallback &f) const=0;
    virtual ~AbstractCallback(){}
};

template<typename Callback>
struct ConcreteCallback : AbstractCallback
{
    const Callback &callback;
    explicit ConcreteCallback(const Callback &p_callback) : callback(p_callback) {}
    virtual bool equals(const KeyCallback &f) const
    {
        return callback == f;
    }
};

struct KeyCallbackChecker
{
    scoped_ptr<AbstractCallback> func;
public:
    template<typename Func>
    KeyCallbackChecker(const Func &f) : func(new ConcreteCallback<Func>(f)) {}
    friend bool operator==(const KeyCallback &lhs,const KeyCallbackChecker &rhs)
    {
        return rhs.func->equals(lhs);
    }
    friend bool operator==(const KeyCallbackChecker &lhs,const KeyCallback &rhs)
    {
        return rhs==lhs;
    }
};

void func1(const KeyEvent &)
{
    cout << "func1" << endl;
}

void func3(const KeyEvent &)
{
    cout << "func3" << endl;
}

class func2
{
    int data;
public:
    explicit func2(int n) : data(n) {}
    friend bool operator==(const func2 &lhs,const func2 &rhs)
    {
        return lhs.data==rhs.data;
    }
    void operator()(const KeyEvent &)
    {
        cout << "func2, data=" << data << endl;
    }
};

struct Caller
{
    template<typename F> void operator()(F f)
    {
        f(1);
    }
};

class Callbacks
{
    vector<KeyCallback> v;
public:
    void register_callback(const KeyCallback &callback)
    {
        v.push_back(callback);
    }
    void unregister_callback(const KeyCallbackChecker &callback)
    {
        vector<KeyCallback>::iterator it=find(v.begin(),v.end(),callback);
        if(it!=v.end())
            v.erase(it);
    }
    void call_all()
    {
        for_each(v.begin(),v.end(),Caller());
        cout << string(16,'_') << endl;
    }
};

int main(int argc,char *argv[])
{
    Callbacks cb;
    cb.register_callback(func1);
    cb.register_callback(func2(1));
    cb.register_callback(func2(2));
    cb.register_callback(func3);
    cb.call_all();

    cb.unregister_callback(func2(2));
    cb.call_all();
    cb.unregister_callback(func1);
    cb.call_all();

return 0;
} 
```

输出是：

```
func1
func2, data=1
func2, data=2
func3
________________
func1
func2, data=1
func3
________________
func2, data=1
func3
________________ 
```

**优点**：

*   我们仍然使用 boost::function 在向量中注册和存储
*   函子对象应该只有在需要将其传递给 unregister_callback 时才定义比较
*   它可以很容易地概括 - 只需添加一个模板参数，而不是使用 typedefed KeyCallback。因此，可以很容易地在其他地方使用，用于其他类型的回调。

**缺点**：

*   如果用户已经将回调包装到 boost::function - 它不能与 unregister_callback 一起使用，因为它需要可以与 boost::function 进行比较的东西（例如，函数指针，或具有定义比较的函子）

* * *

* * *

# 方法#2：

另一种方法是实现自定义 boost::function-like 解决方案，它只接受可比较的回调。

[**现场演示**](http://ideone.com/CpJJXX)

```
#include <boost/shared_ptr.hpp>
#include <algorithm>
#include <iostream>
#include <typeinfo>
#include <ostream>
#include <vector>

using namespace std;
using namespace boost;

typedef int KeyEvent;
typedef void (*func_type)(const KeyEvent &);

struct AbstractCallback
{
    virtual void operator()(const KeyEvent &p)=0;
    virtual bool compare_to(const std::type_info &rhs_type,const void *rhs) const=0;
    virtual bool compare_to(const std::type_info &rhs_type,const func_type *rhs) const=0;
    virtual bool equals(const AbstractCallback &rhs) const=0;
};

template<typename Callback>
struct ConcreteCallback : AbstractCallback
{
    Callback callback;
    ConcreteCallback(Callback p_callback) : callback(p_callback) {}
    void operator()(const KeyEvent &p)
    {
        callback(p);
    }
    bool compare_to(const std::type_info &rhs_type,const void *rhs) const
    {
        return (typeid(Callback)==rhs_type) &&
            ( *static_cast<const Callback*>(rhs) == callback );
    }
    bool compare_to(const std::type_info &rhs_type,const func_type *rhs) const
    {
        return false;
    }
    bool equals(const AbstractCallback &rhs) const
    {
        return rhs.compare_to(typeid(Callback),&callback);
    }
};

template<>
struct ConcreteCallback<func_type> : AbstractCallback
{
    func_type callback;
    ConcreteCallback(func_type p_callback) : callback(p_callback) {}
    void operator()(const KeyEvent &p)
    {
        callback(p);
    }
    bool compare_to(const std::type_info &rhs_type,const void *rhs) const
    {
        return false;
    }
    bool compare_to(const std::type_info &rhs_type,const func_type *rhs) const
    {
        return *rhs == callback;
    }
    bool equals(const AbstractCallback &rhs) const
    {
        return rhs.compare_to(typeid(func_type),&callback);
    }
};

struct KeyCallback
{
    shared_ptr<AbstractCallback> func;
public:
    template<typename Func>
    KeyCallback(Func f) : func(new ConcreteCallback<Func>(f)) {}
    friend bool operator==(const KeyCallback &lhs,const KeyCallback &rhs)
    {
        return lhs.func->equals(*rhs.func);
    }
    void operator()(const KeyEvent &p)
    {
        (*func)(p);
    }
};

void func1(const KeyEvent &)
{
    cout << "func1" << endl;
}

void func3(const KeyEvent &)
{
    cout << "func3" << endl;
}

class func2
{
    int data;
public:
    func2(int n) : data(n) {}
    friend bool operator==(const func2 &lhs,const func2 &rhs)
    {
        return lhs.data==rhs.data;
    }
    void operator()(const KeyEvent &)
    {
        cout << "func2, data=" << data << endl;
    }
};

struct Caller
{
    template<typename F>
    void operator()(F f)
    {
        f(1);
    }
};

int main(int argc,char *argv[])
{
    vector<KeyCallback> v;

    v.push_back(KeyCallback(func1));
    v.push_back(KeyCallback(func1));
    v.push_back(KeyCallback(func1));

    v.push_back(KeyCallback(func2(1)));
    v.push_back(KeyCallback(func2(1)));

    v.push_back(KeyCallback(func2(2)));
    v.push_back(KeyCallback(func2(2)));
    v.push_back(KeyCallback(func2(2)));
    v.push_back(KeyCallback(func2(2)));

    v.push_back(KeyCallback(func3));

    for_each(v.begin(),v.end(),Caller());

    cout << count(v.begin(),v.end(),KeyCallback(func1)) << endl;
    cout << count(v.begin(),v.end(),KeyCallback(func2(1))) << endl;
    cout << count(v.begin(),v.end(),KeyCallback(func2(2))) << endl;
    cout << count(v.begin(),v.end(),KeyCallback(func3)) << endl;
    return 0;
} 
```

输出是：

```
func1
func1
func1
func2, data=1
func2, data=1
func2, data=2
func2, data=2
func2, data=2
func2, data=2
func3
3
2
4
1 
```

**优点**：

*   我们在注册/注销回调中使用相同的类型。用户可以将他的函数和仿函数存储在外包装到 KeyCallback - 并将 KeyCallback 传递给我们的 unregister_callback。
*   不依赖于 boost::function

**缺点**：

*   Functor 对象必须具有定义的比较，即使它不与 unregister_callback 一起使用
*   如果用户已经将回调包装到 boost::function - 它不能转换为我们的 KeyCallback，因为它需要定义的比较。
*   如果您在其他地方需要类似的功能，使用不同类型的回调 - 那么我们的 boost::function-like 类应该被改进（采用不同的和多个参数等），或者我们可以提取和修改 boost::funciton 本身。

* * *

* * *

# 方法#3：

在这里，我们正在创建从 std/boost ::function 继承的新类

[**现场演示**](http://ideone.com/sclqx2)

```
#include <type_traits>
#include <functional>
#include <algorithm>
#include <stdexcept>
#include <iostream>
#include <typeinfo>
#include <utility>
#include <ostream>
#include <vector>
#include <string>

using namespace std;

// _____________________________Implementation__________________________________________

#define USE_VARIADIC_TEMPLATES 0

template<typename Callback,typename Function>
bool func_compare(const Function &lhs,const Function &rhs)
{
    typedef typename conditional<is_function<Callback>::value,typename add_pointer<Callback>::type,Callback>::type request_type;
    if (const request_type* lhs_internal = lhs.template target<request_type>())
        if (const request_type* rhs_internal = rhs.template target<request_type>())
            return *rhs_internal == *lhs_internal;
    return false;
}

#if USE_VARIADIC_TEMPLATES
    #define FUNC_SIG_TYPES typename ...Args
    #define FUNC_SIG_TYPES_PASS Args...
#else
    #define FUNC_SIG_TYPES typename function_signature
    #define FUNC_SIG_TYPES_PASS function_signature
#endif

template<FUNC_SIG_TYPES>
struct function_comparable: function<FUNC_SIG_TYPES_PASS>
{
    typedef function<FUNC_SIG_TYPES_PASS> Function;
    bool (*type_holder)(const Function &,const Function &);
public:
    function_comparable(){}
    template<typename Func>
    function_comparable(Func f_)
        : Function(f_), type_holder(func_compare<Func,Function>)
    {
    }
    template<typename Func>
    function_comparable &operator=(Func f_)
    {
        Function::operator=(f_);
        type_holder=func_compare<Func,Function>;
        return *this;
    }
    friend bool operator==(const Function &lhs,const function_comparable &rhs)
    {
        return rhs.type_holder(lhs,rhs);
    }
    friend bool operator==(const function_comparable &lhs,const Function &rhs)
    {
        return rhs==lhs;
    }
    friend void swap(function_comparable &lhs,function_comparable &rhs)// noexcept
    {
        lhs.swap(rhs);
        lhs.type_holder.swap(rhs.type_holder);
    }
};

// ________________________________Example______________________________________________

typedef void (function_signature)();

void func1()
{
    cout << "func1" << endl;
}

void func3()
{
    cout << "func3" << endl;
}

class func2
{
    int data;
public:
    explicit func2(int n) : data(n) {}
    friend bool operator==(const func2 &lhs,const func2 &rhs)
    {
        return lhs.data==rhs.data;
    }
    void operator()()
    {
        cout << "func2, data=" << data << endl;
    }
};
struct Caller
{
    template<typename Func>
    void operator()(Func f)
    {
        f();
    }
};
class Callbacks
{
    vector<function<function_signature>> v;
public:
    void register_callback_comparator(function_comparable<function_signature> callback)
    {
        v.push_back(callback);
    }
    void register_callback(function<function_signature> callback)
    {
        v.push_back(callback);
    }
    void unregister_callback(function_comparable<function_signature> callback)
    {
        auto it=find(v.begin(),v.end(),callback);
        if(it!=v.end())
            v.erase(it);
        else
            throw runtime_error("not found");
    }
    void call_all()
    {
        for_each(v.begin(),v.end(),Caller());
        cout << string(16,'_') << endl;
    }
};

int main()
{
    Callbacks cb;
    function_comparable<function_signature> f;
    f=func1;
    cb.register_callback_comparator(f);

    cb.register_callback(func2(1));
    cb.register_callback(func2(2));
    cb.register_callback(func3);
    cb.call_all();

    cb.unregister_callback(func2(2));
    cb.call_all();
    cb.unregister_callback(func1);
    cb.call_all();
} 
```

输出是：

```
func1
func2, data=1
func2, data=2
func3
________________
func1
func2, data=1
func3
________________
func2, data=1
func3
________________ 
```

**优点**：

*   我们可以在注册/注销回调中使用相同的类型。用户可以将他的函数和仿函数存储在外包装到 KeyCallback - 并将 KeyCallback 传递给我们的 unregister_callback。此外，在这个版本中，我们可以使用普通的 boost::function 作为注册函数的参数。
*   我们仍然可以使用 boost::function 在向量中注册和存储
*   当我们使用 boost::function 进行注册时，函子对象应该只有在需要将其传递给 unregister_callback 时才定义比较。
*   它是通用的——因此，可以很容易地在其他地方使用，用于其他类型的回调。
*   这个版本基于普通函数指针而不是分配+抽象类（vptr）。因此，它少了一个错误，更易于管理。

**缺点**：

*   如果用户已经将回调包装到 boost::function - 它不能与 unregister_callback 一起使用，因为它需要可以与 boost::function 进行比较的东西（例如，函数指针，或具有定义比较的函子）

* * *

* * *

**编辑：**

> 太棒了，我现在正在尝试#1，但我不太明白为什么当我们应用自己的 == 运算符时它会起作用？

boost::function[可以与](http://www.boost.org/doc/libs/1_51_0/doc/html/function/tutorial.html#id1546064)函数或仿函数进行比较，但不能与另一个 boost::function 进行比较：

```
#include <boost/function.hpp>

void f1(){}
void f2(){}

int main()
{
    boost::function<void ()> bf1(f1),bf2(f2);
    bf1 == f1; // Works OK
    //bf1 == bf2; - COMPILE ERROR
    return 0;
} 
```

在我们的#1 方法中，我们进行类似于“bf1 == f1;”的比较。KeyCallbackChecker 捕获函子/函数并在 ConcreteCallback::equals 中执行此类比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T01:40:01.860

我不确定我是否正确理解了您的问题。我的理解是你有一个`KeyCallback`函数对象的向量。他们每个人都有相同的签名`void (const KeyEvent &)`。通常，您为某个`KeyEvent`对象调用它们中的每一个。并且您想从向量中删除这些对象中的一个或多个。

如果我是对的，那么实际的问题是您如何识别某个`KeyCallback`对象？这是一种解决方案：使用指针。

如果一个`KeyCallback`对象是一个函数指针，那么没有两个函数可以有相同的地址。如果它是一个类对象`operator()`，那么每个具体对象都有一个唯一的地址。因此以下代码有效。但它不再使用向量，而是使用`map`. 而且您需要使用`for`循环而不是`for_each`.

```
#include <iostream>
#include <map>
#include <boost/function.hpp>

typedef int KeyEvent;
typedef boost::function<void (const KeyEvent &)> KeyCallback;

void func1 (const KeyEvent &x)
{
    std::cout << "Call func1 with " << x << std::endl;
}

void func2 (const KeyEvent &x)
{
    std::cout << "Call func2 with " << x << std::endl;
}

class func3
{
    public :

    void operator() (const KeyEvent &x) const
    {
        std::cout << "Call func3 with " << x << std::endl;
    }
};

class func4
{
    public :

    func4 () : data_(0) {}
    func4 (int d) : data_(d) {}

    void operator() (const KeyEvent &x) const
    {
        std::cout << "Call func4(" << data_ << ") with " << x << std::endl;
    }

    private :

    int data_;
};

template <typename T>
long ptol (T *p)
{
    void *vp = (void *) p;
    return reinterpret_cast<long>(vp);
}

int main()
{
    func3 f30;
    func4 f40;
    func4 f41(1);
    func4 f42(2);
    std::map<long, KeyCallback> callback;
    callback[ptol(&func1)] = func1;
    callback[ptol(&func2)] = func2;
    callback[ptol(&f30)] = f30;
    callback[ptol(&f40)] = f40;
    callback[ptol(&f41)] = f41;
    callback[ptol(&f42)] = f42;

    for (std::map<long, KeyCallback>::const_iterator m = callback.begin(); m != callback.end(); ++m)
        m->second(1);

    std::cout << "ERASE func1 and f41" << std::endl;

    callback.erase(ptol(&func1));
    callback.erase(ptol(&f41));

    for (std::map<long, KeyCallback>::const_iterator m = callback.begin(); m != callback.end(); ++m)
        m->second(1);

    return 0;
} 
```

这是输出

```
Call func1 with 1
Call func2 with 1
Call func4(2) with 1
Call func4(1) with 1
Call func4(0) with 1
Call func3 with 1
ERASE func1 and f41
Call func2 with 1
Call func4(2) with 1
Call func4(0) with 1
Call func3 with 1 
```

缺点是

*   您不能按特定顺序调用它们。
*   像`f40`...这样的对象`f42`必须在插入之外创建。您不能使用`insert`动态插入函数对象`map`，例如 callback.insert(std::make_pair(address, func4(5))); 除非您自己分配和管理一个唯一的`address`，因为您不能获取临时对象的地址。
*   这个例子工作是所有`f40`有`f42`唯一地址的。我们添加它们时它们都存在，因此它们不能有重复的地址。但是如果说我动态创建`f42`，添加它，`delete`它，创建另一个`func4`对象，然后添加它。新`func4`对象可能使用了旧`f42`的内存位置，因此地址不再唯一，新的插入将替换新的。

但是，我认为您可以为每个回调提供比其地址更好的唯一密钥。

# java - Java 获取剪贴板的字节数

> ID：13094723
> 
> 赞同：1
> 
> 时间：2012-10-26T21:30:57.620
> 
> 标签：java, string, byte, clipboard

所以我想获取用户剪贴板的实际字节。我找不到这样做的方法，我发现的只是如何将剪贴板作为字符串获取。

要将剪贴板作为字符串获取，我必须执行以下操作：

```
String data = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor); 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:33:26.643

获得剪贴板的字符串表示后，您可以通过[String#getBytes()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28%29)获取字节。

```
byte[] clipboardBytes = clipboardString.getBytes(); 
```

# c# - 将两行从 VB.NET 转换为 C#

> ID：13094726
> 
> 赞同：1
> 
> 时间：2012-10-26T21:31:37.760
> 
> 标签：c#, vb.net

我似乎无法正确地将以下内容从 VB.NET 转换为 C#--

```
iKeyChar = Asc(mid(g_Key, i, 1))
iStringChar = Asc(mid(strCryptThis,i,1)) 
```

这是我转换后的 C# 代码，它似乎没有输出等效值——

```
iKeyChar = Convert.ToInt32(g_Key.Substring(i, 1));
iStringChar = Convert.ToInt32(strCryptThis.Substring(i, 1)); 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T21:33:23.477

那是因为`Mid`是从一开始，而`Substring`从零开始。试试这种方式：

```
iKeyChar = (int)Convert.ToChar(g_Key.Substring(i-1, 1));
iStringChar = (int)Convert.ToChar(strCryptThis.Substring(i-1, 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:37:16.637

问题在于 ASCII 位。请参阅此处：[http](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/13fec271-9a97-4b71-ab28-4911ff3ecca0) ://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/13fec271-9a97-4b71-ab28-4911ff3ecca0和此处：[C# 中 VB 的 Asc() 和 Chr() 函数的等价物是什么?](https://stackoverflow.com/questions/721201/whats-the-equivalent-of-vbs-asc-and-chr-functions-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:41:02.260

Simply access the desired char by its index withing the string and cast it to `int`:

```
iKeyChar = (int)g_Key[i - 1];
iStringChar = (int)strCryptThis[i - 1]; 
```

Note that index of the string characters is zero based (as System Down said in his post).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:36:53.363

尝试这个：

```
 int iKeyChar = Convert.ToChar(g_key.Substring(i, 1));
        int iStringChar = Convert.ToChar(strCryptThis.Substring(i, 1)); 
```

# c++ - 二十一点创建动态甲板CO OOP

> ID：13094727
> 
> 赞同：2
> 
> 时间：2012-10-26T21:31:41.770
> 
> 标签：c++, oop, blackjack

我的教授给我们布置了这个作业，但是我不知道如何做第一步。我不是要求任何人做作业，只是请有人帮我解决第一个问题

1.  动态创建甲板

这个问题基于两个文件（他提供）

“卡.h”

```
//*********************************************************
//  CLASS DECLARATION
//*********************************************************
class Card
{   
    //*****************************************************
    //  Public Members         
    //*****************************************************
   public: 
    // Exception classes
    class NotInitalized {};

    // Enumeration for Suit
    enum Suit { Clubs, Diamonds, Hearts, Spades, 
               UNKNOWN };

    // Enumeration for Card Name
       enum CardName { Ace, Two, Three, Four, Five, Six,
                    Seven, Eight, Nine, Ten, Jack, 
                    Queen, King, UNKNOWN };

    // constructors
//*****************************************************
// Card
//  
// Create uninitialized card.  Must be initialized with 
//  'setCard()' before use.
//*****************************************************
    Card();    // card is not initialized
//*****************************************************
// Card
//  
// Create a card based its ordinal position.
//     cards are ordered by suit first in the order 
//     Clubs, Diamonds, Hearts and Spades, and within 
//     the suit they are ordered Act thru King.
//******************************************************
    Card(int); // number between 1-52

//******************************************************
// Card
//  
// Create a card with the given name and suit.
//*******************************************************
       Card(Suit, CardName);

    // methods
    //*******************************************************
    // setCard
    //  
    //  Set the Suit and Name of the card
    //*******************************************************
        void setCard(Suit, CardName);

    //*******************************************************
    // getSuit
    //  
    //  returns the element of the Suit enumeration 
    // representing the suit of the card
    //*******************************************************
    int      getSuit();

    //*******************************************************
    // getCardName
    //  
    //  returns the element of the CardName enumeration 
    //  representing the card
    //*******************************************************
    int    getCardName();

    //*******************************************************
    // getCardValue
    //  
    //  returns face value of card.  For Ace -1 is the value.
    //*******************************************************
    int         getCardValue();

     //*****************************************************
     // toString
     // 
     // return the string representation of the card. 
     //    e.g.,"Ace of Spades"
     //*****************************************************
       string      toString();

//************************************************
//  Private Members    
//************************************************
private:
    // the Card’s suit (uses Suit enum)
    Suit      suit = Suit::UNKNOWN; 

    // the Card’s name (uses CardName enum)
    CardName  name = CardName::UNKNOWN; 
}; 
```

第二类是甲板类。此类代表标准扑克牌中的 52 张牌。在内部，卡片组中的卡片应保存在 Card 对象数组中。还应该有一个并行的卡片指针数组，可以存储每次洗牌后卡片的顺序。

创建 Deck 对象时，它会创建 52 张牌并将它们洗牌。如果牌组在重新洗牌之前用完牌，则 dealCard() 方法应抛出 DeckEmpty 异常。

因为这个类创建了卡片对象，所以它应该有一个析构函数，当 Deck 被删除时，它会删除所有相关的卡片对象。

下面是 Deck 类的类声明。

```
//*********************************************************
//  CLASS DECLARATION
//*********************************************************
#include “Card.h”
class Deck
{
//*****************************************************
// Public Members         
//*****************************************************
public: 
    // Exception classes
    class DeckEmpty {};

    // Constructors/Destructors
    Deck(); // creates the cards and sorts them
   ~Deck(); // frees all the cards

    // Methods
    //****************************************************
    // dealCard
    //
    // return the next available card in the shuffled deck
    //****************************************************
    Card      dealCard();

    //****************************************************
    // shuffle
    //
    // shuffle the cards
    //****************************************************
    Void      shuffle();      // shuffle the deck

    //****************************************************
    // getCardCount
    //
    // return the number of unused cards in the shuffled 
    //     deck
    //****************************************************
       int       getCardCount(); // how many cards left

    //****************************************************
    // toString
    //
    // return a newline (\n) delimited list of the shuffled 
    //    cards 
    //*****************************************************
    string    toString();

//*****************************************************
// Private Members    
//*****************************************************
private:
    // array to hold unshuffled cards
       Card      cards[DECK_SIZE];

    // array to hold shuffled cards
    Card*     shuffledCards[DECK_SIZE];

    // index of next card to deal from shuffled cards
       int       nextCardIndex;    
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:39:16.510

> 我的教授给我们布置了这个作业，但是我不知道如何做第一步。我不是要求任何人做作业，只是请有人帮我解决第一个问题
> 
> 1.  动态创建甲板

这是答案：

```
Deck* obj = new Deck(); 
```

你可以在上面看到的是新的表达方式。[http://en.cppreference.com/w/cpp/language/new](http://en.cppreference.com/w/cpp/language/new) 使用这个表达式可以动态创建新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:40:51.077

这对我来说也没有任何意义。特别是关于平行排列的洗牌的一点不清楚。并且因为它创建 Card 对象而需要析构函数的说法是不正确的。也许他的意思是它动态创建 Card 对象，但首先不是他说的，其次我看不出有必要。我想你应该和你的教授谈谈。

然而，第一步非常容易。

'1。动态创建甲板'

```
Deck *my_deck = new Deck; 
```

解决了。

为什么你必须动态创建一个套牌是另一个问题，但这就是他要求你做的。

我完全不确定你的教授知道他在说什么。

# css - 试图阻止 div 在调整大小时改变高度位置

> ID：13094730
> 
> 赞同：0
> 
> 时间：2012-10-26T21:31:58.310
> 
> 标签：css, html, height, zurb-foundation

我正在用我自己的自定义媒体查询尝试 zurb 基础响应式设计框架。我的网站[在这里](http://www.austin.kitson.org/update/wordpress-1/)存在用户名：anders 密码：reading61 现在我的问题是当我在 1200px 和 768px 之间调整网站大小时，带有文本**技能**的 div 会上下移动，并且前一个 div 之间的距离不一致，什么我希望它一直有大约 20 px 左右的距离，我尝试过绝对位置但是会破坏宽度，因为列与前一个 div 不同，因为它基于 zurbs css。希望这不会令人困惑。

这是我的CSS

```
/* Artfully masterminded by ZURB  */

/* -------------------------------------------------- 
   Table of Contents
-----------------------------------------------------
:: Shared Styles
:: Page Name 1
:: Page Name 2
*/

/* -----------------------------------------
   Shared Styles
----------------------------------------- */
body{
    background-color: #ffffff;

}
.rounded{
    -moz-border-radius: 15px;
    -webkit-border-radius: 10px;
    -khtml-border-radius: 20px;
    border-radius: 10px;
    list-style-type: none;
    float:left;
    padding: 5px;
    margin-right: 10px;
    background: -webkit-gradient(linear, left top, left bottom, from(#f0eeed), to(#b9b5af));
    background: -moz-linear-gradient(top,  #f0eeed,  #b9b5af);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0eeed', endColorstr='#b9b5af');
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    box-shadow: 0 1px 2px rgba(0,0,0,.2);
}
.rounded a{
    color: #000000;
    font-weight: bold;
}
/* -----------------------------------------
   home.php
----------------------------------------- */
#logoNav div{
    float: left;
}
.logo{margin-right: 10px; margin-top: 10px; }
.logoLarge{margin-top: 20px;}
.mainContent{
    padding-top: 20px;
}
.plus {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -khtml-border-radius: 10px;
    border-radius: 10px;
    list-style-type: none;
    float:left;
    padding: 11px;
    margin-right: 10px;
    background: -webkit-gradient(linear, left top, left bottom, from(#f0eeed), to(#b9b5af));
    background: -moz-linear-gradient(top,  #f0eeed,  #b9b5af);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0eeed', endColorstr='#b9b5af');
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    box-shadow: 0 1px 2px rgba(0,0,0,.2);
}
.more{
    padding-top: 10px;
    display:block;
}
#profilePic img{
    border: solid 5px #765745;
    padding: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -khtml-border-radius: 10px;
    border-radius: 10px;
    margin-top: 30px;
}
.mainContent p{font-size: 24px;}
.mainMore{
    margin-top:-150px;
}
/* -----------------------------------------
   Page Name 1
----------------------------------------- */
/* Smartphones (portrait and landscape) */
@media only screen 
and (min-width : 0px) 
and (max-width : 767px) {
#header{margin-top: 10px;}
#profilePic{display: none;}
.logoLarge{display:none;}
.mainContent p{font-size: 14px;}
.mainContent {margin-top: -22px;}
.mainMore{display:none;}
}
@media only screen 
and (max-width: 1200px) 
and (min-width: 768px) {
.main{font-size:28px; margin-top: 110px; margin-left: 10px;}
#mainNav{margin-left: 20px;}
.logo{display:none;}
.noMore{display:none;}
.mainMore{
    position: absolute;
}
#mainMore{height:fixed;}
.mainContent p{font-size: 14px;}

}
@media only screen 
and (min-width: 1201px) {
.main{font-size:28px; margin-top: 110px; margin-left: 10px;}
#mainNav{margin-left: 20px;}
.logo{display:none;}
.noMore{display:none;}
.rounded{
    border-radius:0px;
    padding: 10px;
    margin-right: 10px;
    background: none;
    box-shadow: none;
}

}

/* -----------------------------------------
   Page Name 2
----------------------------------------- */ 
```

这是我的 html/php

```
<?php
/*
Template Name:Home Page
*/
?>
<?php get_header(); ?>
<div class="row mainContent">
    <div class="seven columns mainContent">
        <?php 
        $page_id = 2; // 123 should be replaced with a specific Page's id from your site, which you can find by mousing over the link to edit that Page on the Manage Pages admin page. The id will be      embedded in the query string of the URL, e.g. page.php?action=edit&post=123.

        $page_data = get_page( $page_id ); // You must pass in a variable to the get_page function. If you pass in a value (e.g. get_page ( 123 ); ), WordPress will generate an error. By default, this will return an object.

        echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. Origin from: http://wordpress.org/support/topic/get_pagepost-and-no-paragraphs-problem
?>
    <p class="noMore"><a href="http://localhost:8888/austin.kitson.orgWP/more"><span class="plus">+</span><span class="more">more..</span></a></p>
    </div>
    <div id="profilePic" class="five columns">
        <img src="<?php bloginfo('template_directory'); ?>/images/austin.jpg" title="austin kitson" />
    </div>
</div><!--row ends-->
<div class="row">
    <div id="mainMore" class="seven columns mainContent mainMore">
        <?php 
        $page_id = 33; // 123 should be replaced with a specific Page's id from your site, which you can find by mousing over the link to edit that Page on the Manage Pages admin page. The id will be         embedded in the query string of the URL, e.g. page.php?action=edit&post=123.

        $page_data = get_page( $page_id ); // You must pass in a variable to the get_page function. If you pass in a value (e.g. get_page ( 123 ); ), WordPress will generate an error. By default, this will return an object.

        echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. Origin from: http://wordpress.org/support/topic/get_pagepost-and-no-paragraphs-problem
?>
    </div>
</div><!--row ends-->
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:42:04.853

我最终只是将图像位置设置为绝对位置。

# regex - 用正则表达式匹配并替换一位数字？

> ID：13094732
> 
> 赞同：0
> 
> 时间：2012-10-26T21:32:03.723
> 
> 标签：regex

我正在寻找一种在整数和连字符字符串中添加任何单个数字的方法。例如

“-0-2-3---12-0---10-”**变为**“-00-02-03---12-00---10-”

或者

“-12-14-7-8-”**变成**“-12-13-07-08-”

我试过使用 \d{1} 和破折号的组合，但它似乎没有捕获所有正确的部分。任何帮助将不胜感激。如果正则表达式太复杂而无法做到这一点，请碰巧编写某种遍历器。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:45:04.103

如果正则表达式引擎支持环视断言，那么这是一种方法：

```
s/(?<!\d)(?=\d(?!\d))/0/g 
```

如果正则表达式引擎不支持后向断言（例如 JavaScript），则：

```
s/(^|[^\d])(?=\d(!\d))/$10/g 
```

如果正则表达式引擎根本不支持环视断言，那么：

```
s/(^|[^\d])(\d)([^\d])/$10$2$3/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:35:17.950

我会使用类似的东西

```
s/-\([0-9]\)-/-0\1-/g 
```

这不适用于相邻的单个数字，但如果您运行两次，所有数字都会被捕获：

```
Alejandra:~$cat tmp.txt 
-12-14-7-8-2-13-1-5-3-4-7-
Alejandra:~$sed "s/-\([0-9]\)-/-0\1-/g" tmp.txt | sed "s/-\([0-9]\)-/-0\1-/g"
-12-14-07-08-02-13-01-05-03-04-07- 
```

# servlets - 如何以编程方式找到 WebLogic 的 servlet.jar 的位置（在 Windows 上）

> ID：13094737
> 
> 赞同：1
> 
> 时间：2012-10-26T21:32:21.303
> 
> 标签：servlets, websphere, weblogic

在我们的示例代码安装程序中，我们希望找到 WebLogic 的 servlet.jar 文件（如果已安装）的位置，以便我们可以在构建脚本中对其进行更新。如果它在类路径中，这是微不足道的。但是许多开发人员并没有把它放在他们的类路径中。

WebSphere 也有同样的问题。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:45:44.567

我猜你不会找到两者的 servlet.jar。两台服务器都是成熟的 Java EE 服务器。对于 websphere，您可以在某处找到服务器 api（不知道确切位置）。如果您有 RAD，它应该向您显示它正在使用的运行时库。看看那些库。你可能会在那里找到你正在寻找的东西。

# php - 修复位置图像滚动问题

> ID：13094739
> 
> 赞同：1
> 
> 时间：2012-10-26T21:32:35.160
> 
> 标签：php, jquery, css, image, wordpress

我有一个站点，它使用固定位置、旋转和缩放图像作为链接到外部站点的标题。图像比容器 div 更宽。一切都很好，除了当您滚动页面时，由于位置固定，导航会越过标题中的图像顶部。我想知道是否有清除固定元素或阻止导航滚动幻灯片的方法？这是该网站的链接：http: [//www.ginkandgasoline.net/](http://www.ginkandgasoline.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:42:01.087

the slideshow images have a "position:fixed"... therefore everything is working like it should. to solve your scrolling-problem, just remove this...

# visual-studio-2012 - 使用 TFS 2012 RTM 更改 Scrum 模板的默认 Sprint 休息日

> ID：13094741
> 
> 赞同：4
> 
> 时间：2012-10-26T21:33:07.407
> 
> 标签：visual-studio-2012, tfs, scrum

我安装了 Microsoft Team Foundation Server 2012 RTM，然后在我的 TFS 中`d:\Program Files\Microsoft Team Foundation Server 11.0\`创建项目。`Redemption`

如何将scrum模板的默认冲刺天数更改为`Thursday`和`Friday`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:07:00.867

[http://msdn.microsoft.com/en-us/library/hh500408.aspx](http://msdn.microsoft.com/en-us/library/hh500408.aspx)

**导出通用配置**

```
witadmin exportcommonprocessconfig /collection:CollectionURL /p:ProjectName /f:"DirectoryPath\CommonConfiguration.xml" 
```

**编辑通用配置**

```
<Weekends>
  <DayOfWeek>Saturday</DayOfWeek>
  <DayOfWeek>Sunday</DayOfWeek>
</Weekends> 
```

**导入常用配置**

```
witadmin importcommonprocessconfig /collection:CollectionURL /p:ProjectName /f:"DirectoryPath\CommonConfiguration.xml" 
```

如果您想让它成为您创建的其他团队项目的默认设置，您需要导出整个流程模板，对其进行更新和更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T13:29:38.583

可以在这里找到解决方案[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2792800-burndown-chart-should-exclude-non-work-days](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2792800-burndown-chart-should-exclude-non-work-days)

在您的 tfs 服务器的 web 环境中，转到右上角的齿轮。根据您的身份验证，您可以看到设置选项卡，如果单击它，您将看到列出的日期前面的复选框。默认仅启用工作日。

# macos - git-svn：在 Mac 上，使用 git svn dcommit 时出现“错误：git-svn 死于信号 6”

> ID：13094744
> 
> 赞同：2
> 
> 时间：2012-10-26T21:33:13.563
> 
> 标签：macos, git, svn

我在 Mac OS X 10.8 上使用 git 1.8（来自 MacPorts）。svn 版本 1.7.7。我有一个最近从 svn1.6 升级到 svn 1.7 的远程仓库。运行“git svn dcommit”时。我在它中间得到了一个断言：

```
R   Demos/myProject/Mac/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Base.prefab => Demos/myProject/UnityProject/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Base.prefab
    R   Demos/myProject/Mac/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Chunks.prefab => Demos/myProject/UnityProject/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Chunks.prefab
    R   Demos/myProject/Mac/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Crazysparks.prefab => Demos/myProject/UnityProject/Assets/Frameworks/Detonator/Prefab Examples/Detonator-Crazysparks.prefab
Assertion failed: (svn_uri_is_canonical(child_uri, NULL)), function uri_skip_ancestor, file subversion/libsvn_subr/dirent_uri.c, line 1519.
error: git-svn died of signal 6 
```

我在某处读到了关于路径中有空格会导致 svn1.7 抱怨的信息，但它没有解释为什么它在遇到的第一个有空格的路径下没有失败，见上文。

我还尝试了这个技巧 [git-svn 在 OSX 上死于信号 10，](https://stackoverflow.com/questions/3503219/git-svn-died-of-signal-10-on-osx) 希望 lib 版本不匹配可能是错误，但它没有用。

我急于检查一些东西，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:27:49.450

有一阵子了。我终于找到了解决这个问题的方法：

拥有一个纯 svn 工作副本，手动合并我的 git 存储库中的所有更改，并直接通过 svn 提交我的所有更改。

然后返回我的 git svn 工作副本，运行“git svn rebase”。如果添加了文件，我需要先从 git svn 工作副本中删除现有文件以避免出现错误：

```
Aborting
could not detach HEAD
rebase refs/remotes/git-svn: command returned error: 1 
```

变基成功后，我停止收到信号 6 错误。

希望 git 团队能尽快修复这个崩溃。

# css - 使用 html5 选择器时未应用 CSS 样式。浏览器在渲染 CSS 方面是否发生了一些变化？

> ID：13094754
> 
> 赞同：1
> 
> 时间：2012-10-26T21:33:48.400
> 
> 标签：css, html, internet-explorer, internet-explorer-8, browser-support

我最近在使用 IE8 时遇到了令人沮丧的情况。这是最奇怪的事情。我以前工作的代码停止工作。`header`当我在我的外部 CSS 样式表中使用 HTML5 标记（例如、和仅举几例）时，似乎正在发生这种情况`footer`，与它们对应的 CSS 选择器一起使用。问题是：***突然之间，CSS 样式不再应用于我的标记。***就像我根本没有样式表一样。`article``nav`

 *我已经确保我没有收到任何 404 错误以及 JavaScript 错误。

我还检查了`DOCTYPE`以确保我的 HTML 文档处于标准模式，并且浏览器甚至声明是这种情况。

另外，据我所知，即使浏览器不一定将 HTML5 标签视为特殊的（就像大多数现代浏览器一样），它也不会篡改它们，并且它们仍然应该能够在 CSS 样式表中使用他们各自的选择器。

至少这是我从另一个 Stackoverflow 帖子中得到的印象： [https ://stackoverflow.com/a/7801476/295019](https://stackoverflow.com/a/7801476/295019)

是一直如此，还是我一直都错了。

我想我应该能够在我的代码中使用 HTML5 标签，或者如果我的代码失败了，那么使用它有什么意义。考虑到很多人都在使用 IE8（即我的客户仍然要求他们的页面在上面工作），所以建立在 IE8 上运行的网站符合我的最大利益。

在这一点上，我还应该说明我在 Mac 上工作并在带有 IE8 的 VirtualBox 上运行的 Windows 7 的虚拟机版本上进行测试。也许这与我的问题有关。但是，我已经多次重新启动我的机器，希望它能正常工作。我还确保安装了 Flash 并且安装没有损坏（据我所知）。

有谁知道发生了什么？或者遇到过类似的问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:40:16.807

不幸的是，您对 IE8 与 HTML5 元素一起工作的印象是不正确的。IE8 不能与`<section>`或之类的元素一起正常工作`<header>`。在页面中使用这些元素会导致 IE8 出现重大问题。

不过，好消息是，有一个简单的方法可以解决这个问题。

修复是一个名为[html5Shiv](http://code.google.com/p/html5shiv/)的脚本。

这个脚本使用了一些 Javascript hack 来使 HTML5 元素在旧版本的 IE 中工作。（也就是说，它只是阻止他们破坏页面——它显然没有添加新的 HTML5 功能，所以不要指望`<canvas>`突然爆发！）

只需将此脚本添加到页面顶部即可。

另一种选择是名为[Modernizr](http://modernizr.com/)的脚本。这包括 html5Shiv 功能，还添加了另一层兼容性检查，如果您尝试创建一个现代站点但仍支持旧浏览器，这将非常有用。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:38:23.080

这可能会帮助你：

```
<!--[if lt IE 9]>
<script>
document.createElement('header');
document.createElement('nav');
document.createElement('section');
document.createElement('article');
document.createElement('aside');
document.createElement('footer');
document.createElement('hgroup');
</script>
<![endif]--> 
```

[http://www.nickyeoman.com/blog/html/118-html5-tags-in-ie8](http://www.nickyeoman.com/blog/html/118-html5-tags-in-ie8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T21:40:25.323

IE8 不支持 HTML5 标记。如果您想摆脱头痛，我建议您使用 javascrip 库来使旧浏览器支持您的新 html 代码。像modernizr [http://modernizr.com/](http://modernizr.com/)*

# android - eclipse 并不总是正确编译我的发布 apk

> ID：13094757
> 
> 赞同：0
> 
> 时间：2012-10-26T21:33:56.887
> 
> 标签：android, eclipse

有时当我导出我的 APK 以提交到 google play 时。我使用 adb 上传到我的设备，应用程序立即崩溃。我再次导出，无需代码或任何其他修改，编译后的 APK 工作正常。这是随机发生的，因为我必须编译并检查 eclipse 是否正确编译了 APK。尝试查找我在清单文件中设置的应用程序类时，它总是崩溃。

最近，一件新的事情开始发生。应用程序启动，但 apk 编译不正确。其中一个类不存在，当需要使用它时，我的应用程序就会崩溃。这也是随机的，可以通过重新编译 APK 来修复。现在这是一个大问题，因为我不能相信 APK 已经正确编译了，即使它运行了。

可能是什么问题？为什么日食会这样？运行调试时，一切都很好，并且编译正确。我的主要项目依赖于大约 5 个库项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:57:45.360

如果您使用 Proguard，它可能会破坏您库中的某些类。例如，如果您仅在 中引用一个类`AndroidManifest.xml`，Proguard 可能看不到该引用，并且可能会删除看似未使用的类。库项目的文档应该解决这个问题，但一般方法在[Proguard 文档](http://developer.android.com/tools/help/proguard.html#configuring)中描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:37:16.290

可能是 IDE 或 ADT 插件的错误。更新两者并重试一次。

# javascript - 将 3 个点击功能合并到 1 个 jquery

> ID：13094760
> 
> 赞同：3
> 
> 时间：2012-10-26T21:34:12.367
> 
> 标签：javascript, jquery, javascript-events

我有一个充满 MapIcon 的数组，每个数组都包含一个名称和一个图像。

该数组称为 mapIcon。

我们有这三个函数在单独定义每个实例时起作用，但是当我尝试将它变成一个函数来确定用户点击哪个图像时，我遇到了一个问题。

```
mapIcon[0].click(function(){
    var selectedMap = ($('<img src="img/' + maps[0].image + '">'));
    gameplayScreen.append(selectedMap);
    mapSelectScreen.fadeOut(500, function() {
        gameplayScreen.fadeIn(500);
        gameplayScreen.show();
    });
});

mapIcon[1].click(function(){
    var selectedMap = ($('<img src="img/' + maps[1].image + '">'));
    gameplayScreen.append(selectedMap);
    mapSelectScreen.fadeOut(500, function() {
        gameplayScreen.fadeIn(500);
        gameplayScreen.show();
    });
});

mapIcon[2].click(function(){
    var selectedMap = ($('<img src="img/' + maps[2].image + '">'));
    gameplayScreen.append(selectedMap);
    mapSelectScreen.fadeOut(500, function() {
        gameplayScreen.fadeIn(500);
        gameplayScreen.show();
    });
});

gameplayScreen.click(function() {
    gameplayScreen.fadeOut(500, function() {
        mapSelectScreen.fadeIn(500);
        mapSelectScreen.show();
        gameplayScreen.empty();
    });
}); 
```

我想点击地图，然后让它把我带到游戏画面，然后再次点击把我带回来，就像这些功能一样。

我认为它与使用 for 循环并通过它进行迭代以进行点击 a'la 有关`mapIcon[i].click(function(){/*foo*/})`，但我无法让它工作。

我猜它不喜欢为`.click`. 有任何想法吗？这是目前对多合一功能的尝试。

```
for (i=0; i< mapIcon.length; i++){
    mapIcon[i].click(function(){
    var selectedMap = ($('<img src="img/' + mapIcon[i].image + '">'));
            gameplayScreen.append(selectedMap);
            mapSelectScreen.fadeOut(500, function() {
                gameplayScreen.fadeIn(500);
                gameplayScreen.show();
                console.log(mapIcon[i].name);
            });
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:40:54.773

Try

```
for (i=0; i< mapIcon.length; i++){
    (function(){
      var item = mapIcon[i];
      item.click(function(){
            var selectedMap = ($('<img src="img/' + item.image + '">'));
            gameplayScreen.append(selectedMap);
            mapSelectScreen.fadeOut(500, function() {
                gameplayScreen.fadeIn(500);
                gameplayScreen.show();
                console.log(item.name);
            });
        });
    })();
} 
```

It should clear the [scope issues](https://stackoverflow.com/questions/10131647/binding-listeners-inside-of-a-for-loop-variable-scope-miscomprehension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:08:55.260

尝试单独定义您的处理程序，然后分配它：

```
$(document).ready(function () {
    'use strict';
    var i = 0,
        switchMap = function switchMap(e) {
            var selectedMap = $('<img />').attr({
                'src': 'img/' + this.image,
                'alt': this.name
            });
            gameplayScreen.append(selectedMap);
            mapSelectScreen.fadeOut(500, function () {
                gameplayScreen.fadeIn(500);
                gameplayScreen.show();
            });
        };
    for (i = 0; i < mapIcon.length; i += 1) {
        mapIcon[i].click(switchMap);
    }
    gameplayScreen.click(function () {
        gameplayScreen.fadeOut(500, function () {
            mapSelectScreen.fadeIn(500);
            mapSelectScreen.show();
            gameplayScreen.empty();
        });
    });
}); 
```

# php - 根据需要加载字体的 PHP 脚本

> ID：13094765
> 
> 赞同：1
> 
> 时间：2012-10-26T21:34:27.493
> 
> 标签：php, webfonts, reduction, load-time

我正在寻找一种“按需”添加字体的方法。

在我构建这个特定站点时，我最初选择了 4 种 Google API 字体。现在它已经长大了，我想将字体选择增加到 9 个选项。

我试图找出一种方法来通过 PHP 完成这项工作，但我是一名设计师，所以我的 php 是“嗯”。

这是我所知道的 php 的“草稿”。

有人想快速帮助我吗？

```
<?php //This is in an External PHP Command Page
$aladin = "Aladin";
$cardo = "Cardo:400,400italic";
$crimson = "Crimson+Text:700italic";
$euphoria = "Euphoria+Script";
$josefin = "Josefin+Slab:400,700";
$philosopher = "Philosopher:400,400italic";
$redressed = "Redressed";
$rouge = "Rouge+Script";
$vollkorn = "Vollkorn:400,400italic,700";

//Factory Presets
$all = "$aladin, $cardo, $crimson, $euphoria, $josefin, $philosopher, $redressed, $rouge, $vollkorn";
$main = "$cardo, $crimson, $philosopher,";

    function insertFonts ($fonts) {
        echo '<link href=\"//fonts.googleapis.com/css?family=';
        echo $fonts;
        echo '\' rel="stylesheet" type="text/css" />';  
        };
?> 
```

然后在网页中。

```
<?php //This goes inside the <head> of X page
insertFonts($main); // OR insertFonts($aladin, $redressed, $euphoria); as needed
?> 
```

此外，链接标签需要一个 | 在字体名称之间......我不知道该怎么做。google 提供的所有格式为 <link href='http://fonts.googleapis.com/css?family=Cardo:400,400italic|Crimson+Text:700italic|Euphoria+Script|Philosopher:400,400italic|Vollkorn :400,400italic,700|Josefin+Slab:400,700|Redressed|Aladin|Rouge+Script' rel='stylesheet' type='text/css' >

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:50:36.370

```
function insertFonts($f){
    $output = '';
    $fonts = array(
        'aladin'        =>  "Aladin",
        'cardo'         =>  "Cardo:400,400italic",
        'crimson'       =>  "Crimson+Text",
        'euphoria'      =>  "Euphoria+Script",
        'josefin'       =>  "Josefin+Slab, serif",
        'philosopher'   =>  "Philosopher, italic",
        'redressed'     =>  "Redressed, cursive",
        'rouge'         =>  "Rouge+Script, cursive",
        'vollkorn'      =>  "Vollkorn, serif"
    );

foreach ($f as $val) {
    if(array_key_exists($val, $fonts)){
        if(strlen($output)>0) $output .="|";
        $output .="$fonts[$val]";
    }
}
return strlen($output)>0 ? "<link href=\"//fonts.googleapis.com/css?family=$output\" rel='stylesheet' type='text/css' />" : '';
}

// Usage
echo insertFonts(array('cardo','josefin')); 
```

但是，如果您想单独加载每种字体，请以这种方式更改方法：

```
foreach ($f as $val) {
    if(array_key_exists($val, $fonts)){
        $output .="<link href=\"//fonts.googleapis.com/css?family=$fonts[$val]\" rel='stylesheet' type='text/css' />\n";
    }
}

return $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:49:10.777

```
<?php
header('Content-Type: text/plain'); // this is just for the example

$fonts = array();
$fonts['aladin'] = "Aladin";
$fonts['cardo'] = "Cardo:400,400italic";
$fonts['crimson'] = "Crimson+Text:700italic";
$fonts['euphoria'] = "Euphoria+Script";
$fonts['josefin'] = "Josefin+Slab:400,700";
$fonts['philosopher'] = "Philosopher:400,400italic";
$fonts['redressed'] = "Redressed";
$fonts['rouge'] = "Rouge+Script";
$fonts['vollkorn'] = "Vollkorn:400,400italic,700";

//Factory Presets
$all = implode('|', $fonts);
$main = implode('|', array($fonts['cardo'], $fonts['crimson'], $fonts['philosopher']));

function insertFonts ($fonts) {
    echo '<link href="//fonts.googleapis.com/css?family='.$fonts.'" rel="stylesheet" type="text/css" />'.PHP_EOL;
};

insertFonts($all); // <link href="//fonts.googleapis.com/css?family=Aladin|Cardo:400,400italic|Crimson+Text:700italic|Euphoria+Script|Josefin+Slab:400,700|Philosopher:400,400italic|Redressed|Rouge+Script|Vollkorn:400,400italic,700" rel="stylesheet" type="text/css" />
insertFonts($main); // <link href="//fonts.googleapis.com/css?family=Cardo:400,400italic|Crimson+Text:700italic|Philosopher:400,400italic" rel="stylesheet" type="text/css" />

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:49:32.583

试试这个

```
// These are the keys of the array in the `insertFonts` function
// Here only as an example
$which = 'cardo,crimson,philosopher';

function insertFonts ($which = 'all') 
{
    $fonts = array(
        'alladin'     => "Aladin",
        'cardo'       => "Cardo:400,400italic",
        'crimson'     => "Crimson+Text",
        'euphoria'    => "Euphoria+Script",
        'josefin'     => "Josefin+Slab, serif",
        'philosopher' => "Philosopher, italic",
        'redressed'   => "Redressed, cursive",
        'rouge'       => "Rouge+Script, cursive",
        'vollkorn'    => "Vollkorn, serif",
    );

    // $which can be either all (or ommitted) or contain
    // the keys of the fonts defined in the $fonts array above
    $final_fonts = array();
    if ($which == 'all')
    {
        $final_fonts = $fonts;
    }
    else
    {
        $keys = explode(',', $which);
        if (is_array($keys)) 
        {
            foreach ($keys as $item) 
            {
                if (array_key_exists($item, $fonts)
                {
                    $final_fonts[$item] = $fonts[$item];
                }
            }
        }
    }

    if (count($final_fonts) > 0)
    {
        $font_line = implode("|", $final_fonts);
        $output    = '<link href="//fonts.googleapis.com/css?family='
                   . $font_line 
                   . ' rel="stylesheet" type="text/css" />'; 
        echo $output;
    }
}; 
```

以上允许您为页面设置不同的字体集，并且不仅限于主要/全部。您所要做的就是在函数中传递您想要包含的字体的不同键，用逗号分隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T22:29:53.987

感谢所有的回复！这是我使用的代码（基于Hashem Qolami提供的答案）

```
<?php 
function insertFonts($f){
$output = '';
$fonts = array(
    'aladin'        =>  "Aladin",
    'cardo'         =>  "Cardo:400,400italic",
    'crimson'       =>  "Crimson+Text:700italic",
    'euphoria'      =>  "Euphoria+Script",
    'josefin'       =>  "Josefin+Slab:400,700",
    'philosopher'   =>  "Philosopher:400,400italic",
    'redressed'     =>  "Redressed",
    'rouge'         =>  "Rouge+Script",
    'vollkorn'      =>  "Vollkorn:400,400italic,700",
    'main'          =>  "Cardo:400,400italic|Crimson+Text:700italic|Philosopher:400,400italic",
    'cursives'      =>  "Euphoria+Script|Redressed|Rouge+Script"
);

foreach ($f as $val) {
    if(strlen($output)>0) $output .="|";
    $output .="$fonts[$val]";
}
return "<link href=\"//fonts.googleapis.com/css?family=$output\" rel='stylesheet' type='text/css' />";
}

// Usage
echo insertFonts(array('main', 'cursives', 'vollkorn', 'aladin', 'josefin'));
?> 
```

这是一个方便的小代码片段，所以我想发布一个没有原始帖子错误的“完成”版本。这有助于为慢速网速（如 3G 移动浏览器）加载时间。从现在开始，这颗宝石将出现在我的所有网站中:)

你可以在这里看到结果：[http ://www.creativedesigninfluence.com/phptest/font-test2.php](http://www.creativedesigninfluence.com/phptest/font-test2.php)

再次感谢！

# c++ - 比较运算符值 C++

> ID：13094768
> 
> 赞同：3
> 
> 时间：2012-10-26T21:34:51.973
> 
> 标签：c++, c, boolean, operator-keyword

我们都知道 C++（虽然不是超集）几乎是从 C 派生的。

在 C++ 中，运算符 <、<=、>、>=、== 和 != 都有布尔返回值。但是，在 C 中，相同的运算符返回 1 或 0，因为 C 中没有“布尔”类型。

由于除 0 之外的所有整数值都被视为“真”，而 0 为“假”，我想知道：

C++ 是否仍将运算符的返回值限制为 1 与 0，或者这些运算符之一的“真”是否返回任何 1 字节值，只要它不是 0？

我想知道，因为使用这些返回值作为显式 1 或 0 在不分支的按位运算中很有用。

作为一个可怕的例子，采取以下措施：

```
bool timesTwo;
int value;

//...

if(timesTwo)
    value << 1;

//vs

value << (int) timesTwo; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T21:37:37.090

> > C++ 是否仍将运算符的返回值限制为 1 与 0，或者这些运算符之一的“真”是否返回任何 1 字节值，只要它不是 0？

比较运算符，假设它们没有被重载，只会返回`true`and `false`。

`int(true)`始终为 1。

`int(false)`始终为 0。

所以，

```
int one(1), two(2);
assert( (one<two) == 1 );
assert( (two<one) == 0 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:52:20.433

实际上，`bool`在表达式中使用时会自动转换为 C++ 中的整数（如果为真，则为 0，如果为假），无需强制转换。

```
value << (int) timesTwo; 
```

这种情况是不必要的：如果 `timesTwo` 为真，那么

您可以直接在没有 casr 的情况下进行：

```
value<<timesTwo; 
```

这相当于：

```
value<<1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:48:57.960

该类型`bool`有两个值：`false`和`true`。您可以将其视为整数，在这种情况下，`false`将转换为 0 并`true`转换为 1。这就是它的全部内容。

C 风格的布尔类型，其中 0 被视为假，非零被视为真，当有人天真地做类似`#define FALSE 0`and的事情时会导致问题`#define TRUE !FALSE`。这实际上定义`TRUE`为 1，并且类似的比较`if (f() == TRUE)`可能会神秘地失败。正确的测试是`if (f() != FALSE)`. 当然，对于真正的布尔类型，这不是问题，因为不为假的值总是相同的。

# java - Java Swing 面板布局

> ID：13094771
> 
> 赞同：3
> 
> 时间：2012-10-26T21:35:04.753
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我正在为大学做一个 Java 项目，该项目涉及我们设置 TCP 服务器和客户端。我有这部分工作，现在要为我的项目添加更多感觉，我想添加一个 GUI。

我们还没有开始学习 Java 中的 GUI。但是我想尝试，因为我认为这将是一个有用的练习。我有一个非常基本的 GUI 设置和适当的 ActionListener 按钮设置。我的下一个问题是定位我的面板，使它们在框架上看起来整洁......

目前，我将所有组件都放在一个面板中，如下所示：

```
public ClientGUI(){

    //Initialise Frame
    frame = new JFrame("TCP Client");

    //Initialise Panel 1 & Components
    p1 = new JPanel();

    //Set Layout
    p1.setLayout(new GridLayout(1,2));

    //Label 1 - For TextArea
    l1 = new JLabel("Chat Log");
    p1.add(l1);

    //TextArea - To display conversation
    t1 = new JTextArea(10,10);
    p1.add(t1);

    //Label 2 - For TextField
    l2 = new JLabel("Message");
    p1.add(l2);

    //Message Box - For user input
    t2 = new JTextField(10);
    p1.add(t2);

    //Button 1 - To send message
    b1 = new JButton("Send");
    p1.add(b1);

    //Add panels to frame
    frame.add(p1);

    //Frame properties...
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400,400);
    frame.setVisible(true);

    //Add Event listener to button
    b1.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ev){
            //do something
            t1.setText(t2.getText());
        }
    }); 
```

我希望它看起来像下面的粗线框。

![所需布局](../Images/2443c2009206407dddb5ba327701dba6.png)

我将不胜感激任何人可能有的任何反馈！非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:43:17.893

您想要的是**BoxLayout**，它以列或行的形式提供 UI 元素。然后您可以将它们嵌套在另一个内部，例如将一个水平框布局面板作为另一个垂直的元素（有点像嵌套的 HTML 表格）。因此，您的所有元素都将进入顶级垂直 BoxLayout 并且具有 JLabel2 和 JTextField 的行将是嵌套在顶级垂直布局中的自己的水平 BoxLayout。 [这](http://zetcode.com/tutorials/javaswingtutorial/swinglayoutmanagement/)是一个关于布局管理器的相当不错的教程，它包括 BoxLayout。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T22:11:11.613

有很多不同的方式，也有很多不同`LayoutManager`的使用方法。在这里阅读更多关于它们的信息：

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

这是我制作的一个示例，它使用[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)：

![在此处输入图像描述](../Images/ed516f078864810b051a61f7f76e74ba.png)

```
//necessary imports
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class Test {

    /**
     * Default constructor for Test.class
     */
    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        /**
         * Set look and feel of app
         */
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            // If Nimbus is not available, you can set the GUI to another look and feel.
        }
        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {

        JFrame jFrame = new JFrame("Chat Test");
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setResizable(false);

        //Initialise Panel 1 & Components
        JPanel p1 = new JPanel(new GridBagLayout());
        JPanel p2 = new JPanel(new GridBagLayout());
        //Label 1 - For TextArea
        JLabel l1 = new JLabel("Chat Log");
        //TextArea - To display conversation
        final JTextArea t1 = new JTextArea(10, 10);
        JScrollPane pane = new JScrollPane(t1);
        //Label 2 - For TextField
        JLabel l2 = new JLabel("Message");
        //Message Box - For user input
        final JTextField t2 = new JTextField(10);
        //Button 1 - To send message
        JButton b1 = new JButton("Send");

        GridBagConstraints gc = new GridBagConstraints();

        gc.fill = GridBagConstraints.HORIZONTAL;
        gc.weightx = 1;
        gc.gridx = 0;
        gc.gridy = 0;
        p1.add(l1, gc);

        gc.gridx = 0;
        gc.gridy = 1;
        p1.add(pane, gc);

        GridBagConstraints gc2 = new GridBagConstraints();
        gc2.fill = GridBagConstraints.HORIZONTAL;
        gc2.weightx = 1;
        gc2.gridx = 0;
        gc2.gridy = 0;
        gc2.ipadx = 10;
        p2.add(l2, gc2);

        gc2.gridx = 1;
        gc2.gridy = 0;
        p2.add(t2, gc2);

        gc2.gridx = 1;
        gc2.gridy = 1;
        p2.add(b1, gc2);

        b1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ev) {
                //do something
                t1.setText(t2.getText());
            }
        });

        jFrame.add(p1, BorderLayout.CENTER);
        jFrame.add(p2, BorderLayout.SOUTH);

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        jFrame.pack();
        jFrame.setVisible(true);
    }
} 
```

# django - 无法在 Django 1.4.2 中创建项目

> ID：13094773
> 
> 赞同：0
> 
> 时间：2012-10-26T21:35:15.403
> 
> 标签：django

所以我是 Django 的新手，我正在阅读教程。我试过

```
django-admin.py startproject mysite 
```

和

```
python django-admin.py startproject mysite 
```

但只有一个记事本弹出以下内容：

```
#!C:\Python27\python.exe
from django.core import management

if __name__ == "__main__":
    management.execute_from_command_line() 
```

而且我仍然无法创建“mysite”目录。我已经将其添加`C:\Python27\Lib\site-packages\django\bin`到我的路径中，但无济于事。似乎是什么问题？我正在使用 Django 1.4.2、Python 2.7 和 Windows Vista。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:44:09.607

您的 .py 文件设置为使用记事本打开。这是您需要做的：

右键单击任何以扩展名 .py 结尾的 python 文件单击属性在“打开方式”部分中，您应该能够看到记事本。单击此旁边的更改按钮。单击“浏览”并找到您的 python.exe 可执行文件，很可能在 c:\pythonxx\ 目录中，然后单击“打开”然后“确定”这应该设置您，或者您可以随时返回以进行澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:45:14.307

无论文件关联如何（因为目前这只是我的猜测），您都可以调用绝对路径来运行它：

```
python C:\Python27\Scripts\django-admin.py startproject mysite 
```

这应该会创建您的项目，并且从那里，您可以在项目目录中工作。

您应该确保添加`C:\Python27\Scripts`到您的 PATH。您不需要添加 django 的 bin。

# javascript - 按自定义数据属性值查找元素

> ID：13094777
> 
> 赞同：0
> 
> 时间：2012-10-26T21:35:26.357
> 
> 标签：javascript, jquery, jquery-ui

我想知道是否有一种方法可以根据其数据属性值使用带有 jQ​​uery（+ jQuery UI lib）的 javascript 来选择一个项目（div、span、whatever ..）。例如，假设我有：

```
<div class="b">Hi</div> 
```

然后我为它分配一些数据：

```
$('.b').data('myKey', 1234); 
```

然后，我想找到一个满足条件 myKey = 1234 的 div（或多个 div）。例如，像这样：

```
var resultingElement = $('.b:data(myKey=1234)'); 
```

默认情况下可以吗，还是我必须自己实现这种选择器？不，我不想为此使用 HTML5 的可见 data-* 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:43:32.950

您可以创建一个自定义伪选择器来简化操作：http: [//jsfiddle.net/g2xKB/1/](http://jsfiddle.net/g2xKB/1/)。

```
$.expr.pseudos.data = $.expr.createPseudo(function(args) {
    var items = args.split(",");  // the arguments (key, value)

    $.each(items, function(i, item) {
        item = item.trim();
        var isString = /^['"]|['"]$/.test(item);
        item = item.replace(/^['"]|['"]$/g, "");  // remove quotes

        if(!isString) {
            item = +item;  // if no quotes, it's a number
        }

        items[i] = item;
    });

    return function(elem) {
        return $.data(elem, items[0]) === items[1];
    }
}); 
```

然后，您可以按如下方式使用它：

```
$(".b:data('myKey', 1234)").css("color", "red"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:41:27.483

试试这个

```
 $("div.b").filter(function() { 
          return $.data(this, "myKey") == 1234; 
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:38:59.957

```
var resultingElement = $('.b[data-myKey=1234]'); 
```

我不确定 100% 肯定，但我认为数据属性中的驼峰式选择器在某些时候存在问题。

# jquery - 检查列是否已排序

> ID：13094779
> 
> 赞同：0
> 
> 时间：2012-10-26T21:36:05.800
> 
> 标签：jquery, d3.js

我正在使用以下代码使用标题行作为触发器对表中的列进行排序。

```
var tr = d3.selectAll("tbody tr");  
d3.selectAll("thead th").data(forsort).on("click", function(k) {  
    tr.sort(function(a,b){  
        return a[k] - b[k]; });  
}); 
```

问题是，有相当多的单元格具有相同的值。当我第一次单击对表格进行排序时，它会执行预期的操作。但是，如果我再次单击它，它将重新排列那些具有相同值单元格（来自用于排序的列）的行。

我想知道是否有办法检查列是否已经排序，如果为真，则不允许重复排序。也欢迎任何替代解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:38:25.000

这是一个想法：

```
var tr = d3.selectAll("tbody tr");  
lastSort = null;
d3.selectAll("thead th").data(forsort).on("click", function(k) { 
    if(lastSort != k){
        tr.sort(function(a,b){  
            return a[k] - b[k]; 
        });
        lastSort = k;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:44:52.367

只需跟踪您最后对表格进行排序的方式，并忽略对同一标题的重复点击。

或者，如果用户再次单击标题，您可能希望反转排序，这是可排序列表的一种相当常见的行为。然后，您将跟踪最后排序的列和方向。

# java - Google 云端硬盘未解决的导入

> ID：13094781
> 
> 赞同：9
> 
> 时间：2012-10-26T21:36:24.327
> 
> 标签：java, android, google-drive-api

我正在尝试为 Google Drive 集成编译 Stephen Wylie 的示例代码：

```
package com.googledrive.googledriveapp;
// For Google Drive / Play Services
// Version 1.1 - Added new comments & removed dead code
// Stephen Wylie - 10/20/2012
import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.Activity;

import com.google.android.gms.auth.GoogleAuthException;
import com.google.android.gms.auth.GoogleAuthUtil;
import com.google.android.gms.auth.UserRecoverableAuthException;
import com.google.android.gms.common.AccountPicker;
import com.google.api.client.auth.oauth2.BearerToken;
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.json.JsonHttpRequest;
import com.google.api.client.http.json.JsonHttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.DriveRequest;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;

public class MainActivity extends Activity {

    private Button btn_drive;
    private Context ctx = this;
    private Activity a = this;

    public void onCreate(Bundle savedInstanceState) {

        /*
         * Etc... (Other application logic belonging in onCreate)
         */
            btn_drive.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                chooseAccount();
            }
            });
    }

    public void chooseAccount() {
        Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[]{"com.google"}, false, null, null, null, null);
        startActivityForResult(intent, CHOOSE_ACCOUNT);
    }

    // Fetch the access token asynchronously.
    void getAndUseAuthTokenInAsyncTask(Account account) {
        AsyncTask<Account, String, String> task = new AsyncTask<Account, String, String>() {
            ProgressDialog progressDlg;
            AsyncTask<Account, String, String> me = this;

            @Override
            protected void onPreExecute() {
                progressDlg = new ProgressDialog(ctx, ProgressDialog.STYLE_SPINNER);
                progressDlg.setMax(100);
                progressDlg.setTitle("Validating...");
                progressDlg.setMessage("Verifying the login data you entered...\n\nThis action will time out after 10 seconds.");
                progressDlg.setCancelable(false);
                progressDlg.setIndeterminate(false);
                progressDlg.setOnCancelListener(new android.content.DialogInterface.OnCancelListener() {
                    public void onCancel(DialogInterface d) {
                        progressDlg.dismiss();
                        me.cancel(true);
                    }
                });
                progressDlg.show();
            }

            @Override
            protected String doInBackground(Account... params) {
                return getAccessToken(params[0]);
            }

            @Override
            protected void onPostExecute(String s) {
                if (s == null) {
                    // Wait for the extra intent
                } else {
                    MyApp.accountName = s;
                    getDriveFiles();
                }
                progressDlg.dismiss();
            }
        };
        task.execute(account);
    }

    /**
     * Fetches the token from a particular Google account chosen by the user.  DO NOT RUN THIS DIRECTLY.  It must be run asynchronously inside an AsyncTask.
     * @param activity
     * @param account
     * @return
     */
    private String getAccessToken(Account account) {
        try {
            return GoogleAuthUtil.getToken(ctx, account.name, "oauth2:" + DriveScopes.DRIVE_READONLY);  // IMPORTANT: DriveScopes must be changed depending on what level of access you want
        } catch (UserRecoverableAuthException e) {
            // Start the Approval Screen intent, if not run from an Activity, add the Intent.FLAG_ACTIVITY_NEW_TASK flag.
            a.startActivityForResult(e.getIntent(), REQUEST_TOKEN);
            e.printStackTrace();
            return null;
        } catch (GoogleAuthException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    private Drive getDriveService() {
        HttpTransport ht = AndroidHttp.newCompatibleTransport();             // Makes a transport compatible with both Android 2.2- and 2.3+
        JacksonFactory jf = new JacksonFactory();                            // You need a JSON parser to help you out with the API response
        Credential credential = new Credential(BearerToken.authorizationHeaderAccessMethod()).setAccessToken(MyApp.accountName);
        HttpRequestFactory rf = ht.createRequestFactory(credential);
        Drive.Builder b = new Drive.Builder(ht, jf, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setOauthToken(MyApp.accountName);
            }
        });
        return b.build();
    }

    /**
     * Obtains a list of all files on the signed-in user's Google Drive account.
     */
    private void getDriveFiles() {
        Drive service = getDriveService();
        Log.d("SiteTrack", "FUNCTION getDriveFiles()");
        Files.List request;
        try {
            request = service.files().list(); // .setQ("mimeType=\"text/plain\"");
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
        do {
            FileList files;
            try {
                Log.d("SiteTrack", request.toString());
                files = request.execute();
            } catch (IOException e) {
                e.printStackTrace();
                Log.d("SiteTrack", "Exception");
                return;
            }
            List<File> fileList = files.getItems();
            Log.d("SiteTrack", "Files found: " + files.getItems().size());
            for (File f : fileList) {
                String fileId = f.getId();
                String title = f.getTitle();
                Log.d("SiteTrack", "File " + fileId + ": " + title);
            }
            request.setPageToken(files.getNextPageToken());
        } while (request.getPageToken() != null && request.getPageToken().length() >= 0);
    }

    protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
        if (requestCode == CHOOSE_ACCOUNT && resultCode == RESULT_OK) {
            MyApp.accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            GoogleAccountManager gam = new GoogleAccountManager(this);
            getAndUseAuthTokenInAsyncTask(gam.getAccountByName(MyApp.accountName));
            Log.d("SiteTrack", "CHOOSE_ACCOUNT");
        } else if (requestCode == REQUEST_TOKEN && resultCode == RESULT_OK) {
            MyApp.accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            Log.d("SiteTrack", "REQUEST_TOKEN");
        }
    }   
} 
```

但是，我在所有 com.google 导入中都收到“无法解决”错误。我有 Google APIs 16 并将其设置为我的项目构建目标。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T22:56:19.840

要处理与 Drive 相关的导入，您需要一些来自[Google Drive SDK](https://code.google.com/p/google-drive-sdk-samples/source/browse/#hg%2Fjava%2Fwar%2FWEB-INF%2Flib)的 jar 。有一些大的，因此您可能需要单独添加它们以适合您的应用程序。

如果这不能解决`com.google.android.gms.*`导入问题，则需要安装 Google Play Services 附加组件（从 SDK 管理器中的 Extras -> Google Play Services）并且`google-play-services.jar`需要将其[添加到您的构建路径](https://developers.google.com/android/google-play-services/#downloading)中。

**编辑**：

在这种情况下，需要以下罐子：

1.  google-api-services-drive-v2-rev1-1.7.2-beta.jar
2.  google-http-client-1.10.3-beta.jar
3.  google-http-client-android2-1.10.3-beta.jar
4.  google-oauth-client-1.10.1-beta.jar
5.  google-api-client-android2-1.10.3-beta.jar
6.  google-api-client-1.10.3-beta.jar

如果您使用的是 Eclipse 的 Google 插件，[此处](https://developers.google.com/drive/quickstart-android#step_3_create_and_configure_an_android_project)概述了创建启用驱动器的项目的步骤。

# php - Facebook PHP SDK：如何在登录时重定向到不同的页面？

> ID：13094783
> 
> 赞同：0
> 
> 时间：2012-10-26T21:36:40.493
> 
> 标签：php, facebook, api, sdk

> **可能重复：**
> [如何设置 facebook 返回 url](https://stackoverflow.com/questions/5167157/how-to-set-facebook-return-url)

我目前正在尝试使用 Facebook 的官方 PHP SDK。有什么方法可以配置它，以便一旦用户登录/接受 Facebook 中的应用程序，Facebook 就会重定向回不同的 URL？

我查看了网络和 SDK 参考，但在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:45:08.673

您不能只重定向到 Facebook 应用程序设置中给出的 URL 吗？您可以让从 Facebook 重定向到此页面的所有用户再次重定向到另一个 URL。

例子：`example.com -> facebook.com/authorize_app/whatever -> example.com/redirect -> stackoverflow.com/?param=[fb-access-token]`

您可以将访问令牌作为参数传递，以便也能够访问登录页面上的 facebook 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:44:53.937

查看 PHP sdk 中的 getLoginUrl() 函数，它允许您设置传递给[登录](https://developers.facebook.com/docs/concepts/login/)进程的 redirect_uri 参数 - 这可以是您的应用程序拥有的任何 URL，尽管该 URL 需要准备好接受`code`并交换它用于完成登录流程的 access_token

您显然也可以在登录完成后重定向它们，但我假设您正在谈论它们作为流程的一部分被带到的 URL

# python - 如何使用 NoseGAE 和 GAEtestbed 为单元测试设置用户？

> ID：13094791
> 
> 赞同：1
> 
> 时间：2012-10-26T21:37:48.913
> 
> 标签：python, google-app-engine, nose

为了测试我的 Google App Engine 应用程序，我使用了 nosegae 和 gaetestbed。这似乎涵盖了很多基础。我现在想创建一个测试，其中 users.get_current_user() 返回我选择的假用户。理想情况下，我可以将其从测试更改为独立测试。

[https://developers.google.com/appengine/docs/python/tools/localunittesting](https://developers.google.com/appengine/docs/python/tools/localunittesting)的文档介绍了 google.appengine.ext.testbed 可以做到这一点。Google App Engine 上的线程在[使用 testbed 时设置了一个用户，](https://stackoverflow.com/questions/6229773/google-app-engine-set-up-a-user-when-using-testbed)显示了一种方法。

我遇到问题的部分是弄清楚如何将 google.appengine.ext.testbed 与 nosegae 和 gaetestbed 结合起来。似乎nosegae 和gaetestbed 已经为我设置了存根等等。而且我知道 gaetestbed 正在处理一些事情，比如在测试之间为我清除测试数据存储。他们是否设置了一个我应该找到并调用 setup_env() 的测试平台对象？或者我应该创建自己的测试平台对象？或者这会与 nosgae 和/或 gaetestbed 冲突吗？或者也许有一种内置于nosegae和gaetestbed中的方法可以帮助我做这种事情？到目前为止，我一直在搜索文档和网络，但无济于事。

任何人都知道进行此类测试的最简单/最干净的方法是什么？

# java - Java 错误 - 初始化、语法

> ID：13094797
> 
> 赞同：1
> 
> 时间：2012-10-26T21:38:49.783
> 
> 标签：java

我正在尝试创建一个程序来计算有关蝴蝶种群的不同数据。我的主要问题是我不断收到我的`potentialPopulation`方程式错误，我将我的值平方`ratioFactor`。错误是我正在平方的值“可能尚未初始化”。我知道我需要将 设置`ratioFactor`为一个值，但是在输入输入之前该值是未知的。另外，我是初学者，所以如果有人看到任何其他错误，我将非常感谢任何帮助。谢谢

```
// This program calculates butterfly population estimates
//   Inputs  : males,   estimated number of male butterflies
//             females, estimated number of female butterflies
//   Outputs : total butterflies, sex ratio, variance
// Written by: Charlie
//   Modified: Oct 26, 2012 by Daniel Kellogg
//

import java.util.Scanner;
import java.text.DecimalFormat;
public class Hwk7 {
    public static void main (String[] args) {
            int males, females;

            int totalButterflies, sexRatio, ratioVariance, genderDifferences, matingPairs, growthFactor, ratioFactor, potentialPopulation, x;

            Scanner stdin = new Scanner(System.in);

            System.out.println("\nButterfly Estimator\n");
            System.out.print("Enter the estimated males population: ");
            males = stdin.nextInt();
            System.out.print("Enter the estimated females population: ");
            females = stdin.nextInt();

            totalButterflies  = males + females;
            sexRatio          = males / females;
            ratioVariance     = males % females;
            genderDifferences = males - females;
            matingPairs       = males * females;
            growthFactor      = (int)(Math.sqrt(matingPairs));

            if (sexRatio != 0){
                    ratioFactor       = growthFactor / sexRatio;

             if (sexRatio == 0){
                   ratioFactor = (int)(Math.sqrt(ratioVariance));
            }
            ratioFactor = x;
            potentialPopulation = x^2;

            System.out.println("\nTotal Butterflies: " + totalButterflies );
            System.out.println("Sex Ratio        : " + sexRatio );
            System.out.println("Variance         : " + ratioVariance );
            System.out.println("Gender Differences: " + genderDifferences );
            System.out.println("Possible Mating Pairs: " + matingPairs );
            DecimalFormat oneDigit = new DecimalFormat("#.000");
            System.out.println("Growth Factor: " + growthFactor + oneDigit.format(growthFactor));
            DecimalFormat twoDigit = new DecimalFormat("#.0");
            System.out.println("Ratio Factor: " + ratioFactor + twoDigit.format(ratioFactor));
            DecimalFormat threeDigit = new DecimalFormat("##0");
            System.out.println("Potential Population: " + potentialPopulation + threeDigit.format(potentialPopulation));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:00:38.543

关于编写代码，您可以获得的第一条最佳建议是让每个函数只做一件事。我在下面重构了您的类，将您的关键功能分解为它们自己的特定方法。然后，当您对每种方法都有问题时，您可以使用该方法解决问题。

另请注意，在您的 sexRatio 零除数情况下，您将获得`ratioVariance`从未设置的变量 ( ) 的 sqrt，或要求输入。然后您立即将 ratioFactor 重置为 x - 一个从未设置过的神秘变量。

```
import java.util.Scanner;
import java.text.DecimalFormat;
public class Hwk7 {
    private Scanner stdin = new Scanner(System.in);//This needs to be used throughout your class

    //Do these defaults make sense?
    private int males = 0;
    private int females = 0;

    private int totalButterflies  = 0;
    private double sexRatio       = 0;
    private int ratioVariance     = 0;
    private int genderDifferences = 0;
    private int matingPairs       = 0;
    private double growthFactor   = 0;
    private int potentialPopulation = 0;

    public static double getInput(String message, int input) {
        System.out.print(message);
        input = stdin.nextInt();
    }

    public static void main (String[] args) {
        Hwk7 hw = new Hwk7();
        hw.run();
    }

    public void run() {
        System.out.println("\nButterfly Estimator\n");

        getInput("Enter the estimated males population: ", males);
        getInput("Enter the estimated females population: ", females);

        calculateResults();
        printResults();
    }

    public void calculateResults() {
        totalButterflies  = males + females;
        sexRatio          = males / females;
        ratioVariance     = males % females;
        genderDifferences = males - females;
        matingPairs       = males * females;
        growthFactor      = (int)(Math.sqrt(matingPairs));
        ratioFactor       = calculateRatioFactor(growthFactor, sexRatio);
        potentialPopulation = x^2;//where are you getting x from!?
    }

    //Note in your original implementation you calculate this and then immediately
    //change it to the value 'x'! This is clearly wrong.
    public static double calculateRatioFactor(int growthFactor, int sexRatio) {
        if (sexRatio == 0) {
            return Math.sqrt(RATIOVARIANCE);//Ratio variance is never set!
        } else {
            return growthFactor / sexRatio;
        }
    }

    public static void printResults(int males, int females) {
       System.out.println("\nTotal Butterflies: " + totalButterflies );
       System.out.println("Sex Ratio        : " + sexRatio );
       System.out.println("Variance         : " + ratioVariance );
       System.out.println("Gender Differences: " + genderDifferences );
       System.out.println("Possible Mating Pairs: " + matingPairs );
       DecimalFormat oneDigit = new DecimalFormat("#.000");
       System.out.println("Growth Factor: " + growthFactor + oneDigit.format(growthFactor));
       DecimalFormat twoDigit = new DecimalFormat("#.0");
       System.out.println("Ratio Factor: " + ratioFactor + twoDigit.format(ratioFactor));
       DecimalFormat threeDigit = new DecimalFormat("##0");
       System.out.println("Potential Population: " + potentialPopulation + threeDigit.format(potentialPopulation));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:41:38.997

Your variable `x` is never initialized and you are using it

```
 ratioFactor = x;
 potentialPopulation = x ^ 2; 
```

I thing what you want to do is

```
 x= ratioFactor ; 
```

# http-headers - “display_errors”和 Parse Errors 之间的交互：仍然生成 HTTP 500

> ID：13094798
> 
> 赞同：2
> 
> 时间：2012-10-26T21:38:57.670
> 
> 标签：http-headers, php

我有非常简单的测试用例，带有结束标签，额外`a`的目的：

```
<?php echo 'test'; a?> 
```

而且，没有结束标签，故意没有结束标签：

```
<?php echo 'test'; a 
```

什么时候`display_errors = On`：

*   带有结束标签 => 测试 注意：使用未定义的常量 a - 在第 3 行的 test.php 中假定为“a”

*   没有结束标记 => 解析错误：语法错误，第 3 行 test.php 中的意外 $end

什么时候`display_errors = Off`：

*   带有结束标签 => 测试

*   没有结束标签 => HTTP 500

为什么我收到 HTTP 500 错误？为什么输出（错误消息除外）依赖于 display_errors 选项？我认为它只确定是否会打印错误。这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:51:10.147

原因如下：

当 PHP 看到结束`?>`标记时，它会添加一个隐式分号。这允许这样的语法：

```
<?php echo "something" ?> 
```

为什么这很重要？

因为这意味着当你有结束标签时，你的流浪`a`实际上被视为`a;`.

这种差异足以让 PHP 尝试解析它。它无法识别它，因此它猜测它是一个未知常数，并且您会收到您看到的通知消息。

如果没有结束标记，也没有分号，PHP 会看到未终止的代码行。这是一个语法错误；PHP根本无法解析它，所以它放弃了。

希望能解释差异。

（在旁注中，整个未知常量所以我会假设一个字符串是 PHP 最严重的错误之一。它的存在是出于历史原因，但我真的希望他们在某个时候弃用它未来；它使代码对由小错字引起的可怕错误敞开大门）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:45:45.357

如果没有结束标记，php 解释器将无法确定脚本的结束位置（因此以解析器错误结束）。

但是随着关闭它，它会将“a”解析为常量。但是没有常量 'a'，所以它会认为它是一个字符串，解析器会返回这个字符串值。由于没有变量接收它，它只会被丢弃。（可能解析器只会删除这个 a，因为它不会影响应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:02:51.023

我有不同的结果。正如 OP 所说，没有结束标签的代码不会对我造成 500 错误。

```
<?php
error_reporting(0);
ini_set('display_errors', 0);
echo 'test'; a 
```

相反，我得到：

`Parse error: syntax error, unexpected $end in /my-path/test/index.php on line 4`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:56:01.133

这是PHP的解析器和语法的粗俗。

PHP 允许您在 T_CLOSE_TAG 之前省略分号，所以当 PHP 解析器看到这个时：

```
a?> 
```

它假设您的意思是：

```
a; ?> 
```

然后它将[未定义的常量](http://www.php.net/manual/en/language.constants.syntax.php) `a`强制转换为字符串并发出`E_NOTICE`. （这是 PHP 的一个可怕的错误特性。）所以这实际上等同于：

```
'a'; ?> 
```

由于这不是致命错误，并且此表达式没有副作用，因此程序正常执行。

但是，如果省略结束标记，则会出现语法错误，因为没有任何东西表示表达式的结束。语法错误是致命`500 Internal Server Error`的，响应也是如此。

该`display_errors`设置仅影响错误是否打印到响应中（即，您是否看到`notice`和`parse error`消息。）

# ruby-on-rails - Strange Timestamp issues using aws s3 with rails

> ID：13094804
> 
> 赞同：1
> 
> 时间：2012-10-26T21:39:20.770
> 
> 标签：ruby-on-rails, amazon-web-services, fog, dragonfly-gem

I am using Dragonfly (https://github.com/markevans/dragonfly) for some image manipulation on a project and that uses fog as a data storage engine. I recently started getting weird Amazon errors on requests. The main errors are

```
AWS authentication requires a valid Date or x-amz-date header 
```

and

```
The difference between the request time and the current time is too large. 
```

This works fine on all my other machines, just on one development machine. Its running Mac OSX with Ruby 1.9 and Rails 3.0.10, the timestamps is fine on the machine. The header seems to be coming in as epoch time for some reason...

Full errors:

```
Excon::Errors::Forbidden (Expected(200) <=> Actual(403 Forbidden)
  request => {:connect_timeout=>60, 
  :headers=>{"Date"=>"Wed, 31 Dec 1969 23:59:59 +0000", "Authorization"=>"AWS AUTHKEY", "Host"=>"my-development.s3.amazonaws.com:443"}, :instrumentor_name=>"excon", :mock=>false, :nonblock=>true, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/Users/temp/.rvm/gems/ruby-1.9.2-p180/gems/excon-0.16.2/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"my-development.s3.amazonaws.com", :path=>"/", :port=>"443", :query=>{}, :scheme=>"https", :expects=>200, :idempotent=>true, :method=>"GET", :response_block=>#<Proc:0x007fe4c3cc51f0@/Users/temp/.rvm/gems/ruby-1.9.2-p180/gems/fog-1.5.0/lib/fog/core/connection.rb:16 (lambda)>}
  response => #<Excon::Response:0x007fe4c3c77a18 @body="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error><Code>AccessDenied</Code><Message>AWS authentication requires a valid Date or x-amz-date header</Message><RequestId>AF3S5E9BAA514F1</RequestId><HostId>SOMETHING</HostId></Error>", @headers={"x-amz-request-id"=>"AF3S5E9BAA514F1", "x-amz-id-2"=>"SOMETHING", "Content-Type"=>"application/xml", "Transfer-Encoding"=>"chunked", "Date"=>"Thu, 25 Oct 2012 19:03:39 GMT", "Server"=>"AmazonS3"}, @status=403>):

ERROR Excon::Errors::Forbidden: Expected([200, 206]) <=> Actual(403 Forbidden)   request => {:connect_timeout=>60, 
:headers=>{"Date"=>"Thu, 01 Jan 1970 00:00:01 +0000", "Authorization"=>"AWS AUTHKEY", "Host"=>"my-development.s3.amazonaws.com:443"}, :instrumentor_name=>"excon", :mock=>false, :nonblock=>true, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/Users/temp/.rvm/gems/ruby-1.9.2-p180/gems/excon-0.16.2/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"my-development.s3.amazonaws.com", :path=>"/2012%2F10%2F18%2F19%2F32%2F28%2F836%2Fdragonfly20121018_47202_2lm4t0", :port=>"443", :query=>nil, :scheme=>"https", :expects=>[200, 206], :idempotent=>true, :method=>"GET"}   response =>
#<Excon::Response:0x007fd11e048ea8 @body="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error><Code>RequestTimeTooSkewed</Code><Message>The difference between the request time and the current time is too large.</Message><MaxAllowedSkewMilliseconds>900000</MaxAllowedSkewMilliseconds><RequestId>85D12B885D8B4DBE</RequestId><HostId></HostId><RequestTime>Thu, 01 Jan 1970 00:00:01
+0000</RequestTime><ServerTime>2012-10-26T21:19:18Z</ServerTime></Error>", @headers={"x-amz-request-id"=>"85D12B885D8B4DBE", "x-amz-id-2"=>"SOMETHING", "Content-Type"=>"application/xml", "Transfer-Encoding"=>"chunked", "Date"=>"Fri, 26 Oct 2012 21:19:16 GMT", "Server"=>"AmazonS3"}, @status=403> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T11:17:42.087

[http://www.bucketexplorer.com/documentation/amazon-s3--difference-between-requesttime-currenttime-too-large.html](http://www.bucketexplorer.com/documentation/amazon-s3--difference-between-requesttime-currenttime-too-large.html)

只需将您的机器本地时间更改为 UTC 时间或服务器时间。

它可以帮助我解决上述错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:35:01.630

不知道为什么，我没有改变任何东西，我什至没有重新启动我的应用程序，但它今天开始工作。

# apache - Apache load balance

> ID：13094825
> 
> 赞同：27
> 
> 时间：2012-10-26T21:41:39.147
> 
> 标签：apache

4, I tried configuring load balancer in apache web server but unsuccessfully.
In my httpd.conf

```
LoadModule proxy_module modules/mod_proxy.so

<VirtualHost mysuperwebapp.com:80>
    ServerName mysuperwebapp.com
    <Location /balancer-manager>
        SetHandler balancer-manager
        Order Deny,Allow
        Deny from all
        Allow from .mysuperwebapp.com
    </Location>
    <Proxy balancer://mycluster>
        BalancerMember http://localhost:9999
        BalancerMember http://localhost:9998 status=+H
    </Proxy>
    <Proxy *>
        Order Allow,Deny
        Allow From All
    </Proxy>
    ProxyPreserveHost On
    ProxyPass /balancer-manager !
    ProxyPass / balancer://mycluster/
    ProxyPassReverse / http://localhost:9999/
    ProxyPassReverse / http://localhost:9998/
</VirtualHost> 
```

When I start the apache service, it said that

```
AH00526: Syntax error on line 184 of /Users/aptos/Documents/workspace/Webserver/conf/httpd.conf:
BalancerMember Can't find 'byrequests' lb method 
```

Can somebody show me where I did incorrectly? Thank you very much.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-30T13:35:03.680

就我而言，我在**`ProxyPass Can't find 'byrequests' lb method`**使用`proxy_balancer_module`模块时遇到了错误

错误是由于我错过了在 httpd.conf 中所需模块下方取消注释的事实

`LoadModule lbmethod_byrequests_module modules/mod_lbmethod_byrequests.so`

*和*

`LoadModule slotmem_shm_module modules/mod_slotmem_shm.so`

在 httpd.conf 文件中取消对上面默认注释的模块条目的注释解决了我的问题。

*（使用 Apache 2.4.3）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-05T17:51:34.560

您需要加载 mod_proxy_balancer。在支持它的发行版上，最好的方法是使用 a2enmod：

```
sudo a2enmod proxy_balancer 
```

它为您完成所有工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-21T22:33:13.633

在 Apache 2.2 上，您将需要这些库：

```
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T07:30:25.000

您需要在`/etc/httpd/conf/httpd.conf`文件中启用以下模块。

```
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T19:40:09.833

答案是包括

```
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so 
```

或者对于 IBM WebSPhere

```
LoadModule proxy_balancer_module modules/WebSphereCE/mod_proxy_balancer.so 
```

# c++ - 类中 typedef 结构的奇怪行为

> ID：13094826
> 
> 赞同：3
> 
> 时间：2012-10-26T21:41:40.940
> 
> 标签：c++

我对`typedef struct`类和函数的构造有奇怪的行为。不同之处在于，在第一种情况下，所有定义都是在类定义期间执行的。另一种情况——在函数定义期间。看我的代码。

```
class C
{
public:
    //struct xStruct;
    typedef struct xStruct* xPtr;
    typedef struct xStruct {xPtr F;} xStructR;
    typedef struct { xPtr First; } xPtr_Type;
    void F(void **Var)
    {
        xPtr Ptr = 0;
        ((xPtr_Type*)Var)->First = Ptr->F; //errors
    }
};

void Fu()
{
    typedef struct qxStruct* qxPtr;
    typedef struct qxStruct {qxPtr qF;} qxStructR;
    typedef struct { qxPtr qFirst; } qxPtr_Type;
    qxPtr qPtr = 0;
    void **qVar = 0;
    ((qxPtr_Type*)qVar)->qFirst = qPtr->qF;
} 
```

在使用 MS 编译器（cl.exe）编译期间，我有两个错误：

```
error C2027: use of undefined type 'xStruct'
error C2227: left of '->F' must point to class/struct/union 
```

如果我取消注释`struct xStruct`声明我的代码有效。但我不明白为什么类似的代码在`Fu`没有`struct xStruct`声明的情况下可以正常工作？似乎编译器在类定义期间有更严格的代码分析算法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:00:27.827

我看到一个区别：

在`class C`编译器中，将第一次出现的`struct xStruct`视为来自全局命名空间。第二个来自`class C`命名空间 - 这就是分配期间出现错误的原因。

```
class C
{
public:
    //struct xStruct;
    typedef struct xStruct* xPtr; 
    //      ^^^^^^^^^^^^^^  forward declaration of global type ::xStruct
    typedef struct xStruct {xPtr F;} xStructR;
    //      ^^^^^^^^^^^^^^^^^^^^^^^^  definition of local type C::xStruct
    typedef struct { xPtr First; } xPtr_Type;
    //                    ^^^^^ pointer to ::xStruct not C::xStruct
    void F(void **Var)
    {
       xPtr Ptr = 0;
       //   ^^^ pointer to global incomplete type
       ((xPtr_Type*)Var)->First = Ptr->F; //errors
       //                         ^^^^^^ using of ::xStruct which is incomplete
    } 
```

在全局函数示例中，两个定义都来自全局命名空间，所以没有问题。

为了证明这一点，我扩展了你的例子 - 现在它编译没有问题：

```
class C
{
public:
    //struct xStruct;
    typedef struct xStruct* xPtr;
    typedef struct xStruct {xPtr F;} xStructR;
    typedef struct { xPtr First; } xPtr_Type;
    void F(void **Var);
};

struct xStruct {
  ::xStruct* F;    
};
void C::F(void **Var)
{
    xPtr Ptr = 0;
    ((xPtr_Type*)Var)->First = Ptr->F; //no errors
} 
```

# r - How to reproduce smoothScatter's outlier plotting in ggplot?

> ID：13094827
> 
> 赞同：14
> 
> 时间：2012-10-26T21:41:48.153
> 
> 标签：r, ggplot2, scatter-plot, smooth

I am trying to get something like what the `smoothScatter` function does, only in ggplot. I have figured out everything except for plotting the N most sparse points. Can anyone help me with this?

```
library(grDevices)
library(ggplot2)

# Make two new devices
dev.new()
dev1 <- dev.cur()
dev.new()
dev2 <- dev.cur()

# Make some data that needs to be plotted on log scales
mydata <- data.frame(x=exp(rnorm(10000)), y=exp(rnorm(10000)))

# Plot the smoothScatter version
dev.set(dev1)
with(mydata, smoothScatter(log10(y)~log10(x)))

# Plot the ggplot version
dev.set(dev2)
ggplot(mydata) + aes(x=x, y=y) + scale_x_log10() + scale_y_log10() + 
  stat_density2d(geom="tile", aes(fill=..density..^0.25), contour=FALSE) +
  scale_fill_gradientn(colours = colorRampPalette(c("white", blues9))(256)) 
```

Notice how in the base graphics version, the 100 most "sparse" points are plotted over the smoothed density plot. Sparseness is defined by the value of the kernel density estimate at the point's coordinate, and importantly, the kernel density estimate is calculated *after* the log transform (or whatever other coordinate transform). I can plot *all* points by adding `+ geom_point(size=0.5)`, but I only want the sparse ones.

Is there any way to accomplish this with ggplot? There are really two parts to this. The first is to figure out what the outliers are *after* coordinate transforms, and the second is to plot only those points.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-26T12:02:00.873

这是一种解决方法！Is 不适用于密度最小的 n 点，但会绘制密度 ^ 0.25 小于 x 的所有点。

它实际上绘制了`stat_density2d()`图层，然后是`geom_point(`，然后是`stat_density2d()`，使用 alpha 在最后一层的中间创建一个透明的“洞”，其中密度^0.25 高于（在这种情况下）0.4。

显然，运行三个地块会对性能造成影响。

```
# Plot the ggplot version
ggplot(mydata) + aes(x=x, y=y) + scale_x_log10() + scale_y_log10() + 
  stat_density2d(geom="tile", aes(fill=..density..^0.25, alpha=1), contour=FALSE) + 
  geom_point(size=0.5) +
  stat_density2d(geom="tile", aes(fill=..density..^0.25,     alpha=ifelse(..density..^0.25<0.4,0,1)), contour=FALSE) + 
  scale_fill_gradientn(colours = colorRampPalette(c("white", blues9))(256)) 
```

![在此处输入图像描述](../Images/20ac0101972fafa7824f453193d82516.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-02T22:55:41.153

这是一种首先计算数据中每个（双变量）观察值的稀疏性的解决方案（或分别*在*应用您选择的转换之后）。

让我们首先根据从 计算的密度计算每个观测值的最可能的密度值，`KernSmooth::bkde2D`为了方便起见，如果没有提供，则调用它`grDevices:::.smoothScatterCalcDensity`来进行适当的猜测。`binwidth`此功能对于[其他问题](https://stackoverflow.com/questions/39039073/using-pseudocolour-in-ggplot2-scatter-plot-to-indicate-density)也很有用。

```
densVals <- function(x, y = NULL, nbin = 128, bandwidth, range.x) {
  dat <- cbind(x, y)
  # limit dat to strictly finite values
  sel <- is.finite(x) & is.finite(y)
  dat.sel <- dat[sel, ]
  # density map with arbitrary graining along x and y
  map   <- grDevices:::.smoothScatterCalcDensity(dat.sel, nbin, bandwidth)
  map.x <- findInterval(dat.sel[, 1], map$x1)
  map.y <- findInterval(dat.sel[, 2], map$x2)
  # weighted mean of the fitted density map according to how close x and y are
  # to the arbitrary grain of the map
  den <- mapply(function(x, y) weighted.mean(x = c(
    map$fhat[x, y], map$fhat[x + 1, y + 1],
    map$fhat[x + 1, y], map$fhat[x, y + 1]), w = 1 / c(
    map$x1[x] + map$x2[y], map$x1[x + 1] + map$x2[y + 1],
    map$x1[x + 1] + map$x2[y], map$x1[x] + map$x2[y + 1])),
    map.x, map.y)
  # replace missing density estimates with NaN
  res <- rep(NaN, length(sel))
  res[sel] <- den
  res
} 
```

我使用加权平均值作为“真实”密度值的（线性）近似值。可能，一个简单的查找也可以。

这是实际的计算。

```
mydata <- data.frame(x = exp(rnorm(10000)), y = exp(rnorm(10000)))
# the transformation applied will affect the local density estimate
mydata$point_density <- densVals(log10(mydata$x), log10(mydata$y)) 
```

现在，让我们来绘制。（以特洛伊的回答为基础。）

```
library(ggplot2)

ggplot(mydata, aes(x = x, y = y)) +
  stat_density2d(geom = "raster", aes(fill = ..density.. ^ 0.25), contour = FALSE) +
  scale_x_log10() + scale_y_log10() +
  scale_fill_gradientn(colours = colorRampPalette(c("white", blues9))(256)) +
  # select only the 100 sparesest points
  geom_point(data = dplyr::top_n(mydata, 100, -point_density), size = .5) 
```

[（最终情节）](https://i.stack.imgur.com/xYu3o.png) ——对不起，还不允许嵌入图像。

不需要过度绘图。:)

# python - Strange loop behavior in Python

> ID：13094829
> 
> 赞同：1
> 
> 时间：2012-10-26T21:41:57.700
> 
> 标签：python

The code:

```
total = 0

for number in xrange(10000):
    divisors = 0
    divisors2 = 0

    for dividend in xrange(1, number/2):
        if number % dividend == 0:
            divisors = divisors + dividend

    for dividend2 in xrange(1, divisors/2):
        if divisors % dividend2 == 0:
            divisors2 = divisors2 + dividend2

    if number == divisors2:
        total = total + number + divisors

print total 
```

The code is supposed to generate amicable numbers(i.e. number that total number of divisors less than itself equal another number that's total number of divisors equal the original number, see [Project Euler, problem 21](http://projecteuler.net/problem=21)) under 10,000 and add them as it finds them. It's generating 48, which is way too low.

The program ran a lot faster than I expected it to: I'm running through a lot of numbers and I know for a fact that this isn't a very fast way to get the proper divisors, so I suspected something was up with the loop, either that Python was just stopping unexpectedly, or was running the loops out of order. If I put a command to print divisors before the beginning of the next loop, it goes on forever, and tends to print long lines of the same number. Something strange is definitely going on here. I googled "strange loop behavior", and searched here, to no avail. I also checked [here].[2](http://docs.python.org/tutorial/controlflow.html)

What's going on and what should I do about it?

Thank you in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:17:11.763

这里有几个问题：

它应该是

```
total = total + number 
```

而且，range(1,x) 只运行到 x-1。因此，您需要指定 range(1, n/2 + 1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:59:23.317

```
xrange(1, n) 
```

给你从`1 ... n-1`. 要从中获取数字`1 ... n`，您需要这样做`xrange(1, n+1)`。您在代码中犯了两次这个错误。

您也没有检查`a != b`原始问题中的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:35:00.817

Your algorithm's broken. Let's take the amicable number given in the example, 284, and run it through your code:

```
number = 284
divisors = divisors2 = 0

for dividend in range(1, number/2): #goes through all the numbers (1, 2, ..., 141)
    if not number % dividend: divisors += dividend 

#divisors = 78

for dividend2 in range(1, divisors/2): #goes through all the numbers (1, 2, ..., 38)
    if not divisors % dividend2: divisors2 += dividend2

#divisors2 = 51

if number == divisors2:
    #number != divisors2, because 284 != 51
    #the amicable number never gets added to your sum 
```

# php - Cannot understand the syntax inside Smarty foreach loop

> ID：13094832
> 
> 赞同：0
> 
> 时间：2012-10-26T21:42:12.653
> 
> 标签：php, smarty

In existing codebase, I found a line of

```
 {foreach from=$app_list item=app name=apps}
       {item table=application sid=$app.APPLICATION_SID}
   {/foreach} 
```

I cannot find explanations to the line {item ... } in documentation, nor find where `application` and `sid` are defined.

Can anyone explain what this line is doing? Without this line, the list of app names cannot be displayed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:59:00.820

检查调用此函数的代码。最有可能`application`并且`$app`正在那里设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:55:21.927

它绝对看起来像一个自定义函数。有两种可能：

1.  包含一个定义自定义函数的模板。寻找字符串`{function item`或`{function name=item`

2.  它也可以是一个用 PHP 编写的 smarty 扩展。查找名为`function.item.php`. 它可能在 Smarty 的`plugins`目录中，也可能在您的源代码树中的某个位置。您可以尝试查看您的项目用于 Smarty 的设置代码，并查看是否调用了 Smarty 方法`setPluginsDir()`或`addPluginsDir()`方法。如果您使用的是旧版本的 Smarty，请查找对`->plugins_dir`.

# java - Java：在方法的参数中添加语句

> ID：13094833
> 
> 赞同：0
> 
> 时间：2012-10-26T21:42:17.860
> 
> 标签：java, methods

我正在查看这段代码，无法理解 .add 语句在做什么（fromCity）和（toCity）只是字符串？

```
getDestinations(fromCity).add(toCity); 
```

方法：

```
public ArrayList<String> getDestinations(String fromCity) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:43:10.100

`getDestinations(fromCity)`返回一个`ArrayList`

`add`方法是向其添加元素的数组列表方法。

换句话说：

```
ArrayLisst<String> destList = getDestinations(fromCity);
destList.add(toCity); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:43:31.890

它将字符串添加`toCity`到`ArrayList<String>`返回的`getDestinations(fromCity)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T21:47:12.360

这被称为`chaining of method calls`。您正在对前一个方法的返回值调用下一个方法。

因此，该`getDestinations()`方法返回您 a `ArrayList`，现在您不是存储您的返回值，而是在方法调用上调用 的`add`方法`ArrayList`。

```
getDestinations(fromCity).add(toCity); 
```

这相当于： -

```
ArrayList<String> list = getDestination(fromCity) // returns `ArrayList - list`
list.add(toCity) // invoke `add` method on returned arraylist. 
```

同样**，您可以将方法调用链接**到任何 lavel：-

```
meth1(parameter1).meth2(param3).meth3(param3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T21:43:15.777

`.add()`不附加到，`fromCity`而是附加到方法调用`getDestinations(fromCity)`。
从方法声明中您可以看到它`getDestinations(String fromCity)`返回一个[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，并且它们有一个[`add()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28E%29)方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T21:46:26.190

请检查

```
public ArrayList<String> getDestinations(String fromCity) 
```

****-返回一个可以有一组字符串的ArrayList *****

 **```
getDestinations(fromCity).add(toCity); 
```

**---这里调用getdestination它返回arraylist并添加一个String(fromcity)到arraylist****

# mysql - Storing metadata about a numeric value field

> ID：13094834
> 
> 赞同：0
> 
> 时间：2012-10-26T21:42:20.447
> 
> 标签：mysql, metadata, field, numeric

I am trying to solve a simple problem. We have a bunch of numeric fields (lab result values). I would like the users to be able to indicate some common scenarios about the fields:

*   Data not available ("no data")
*   Data not readable ("illegible")
*   Unkown. etc.

I can definitely create a sidecar field that goes with each field and storing a "null" in the original field which would indicate that the numeric value should be obtained from the sidecar field. This solution still enables me to perform numeric value operations on the field, and if needed, I can look in to the sidecar field to find out why the data was missing (null).

I would like to know how you might go about solving this problem, and what are the best ways to address metadata issues like this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:50:44.073

真的，我认为你已经掌握了这种情况的最佳选择。如果您需要跟踪此元数据的 2 或 3 个以上的选项，您可能需要考虑创建一个单独的表来存储描述，以便为将来的代码省去麻烦。

```
TABLE lab_results
  id INT PK
  ...
  meta INT NULL
  meta_reason_id INT NULL

TABLE meta_reasons
  id INT PK
  desc VARCHAR 
```

# django - How to use Tastypie to wrap internal functions

> ID：13094835
> 
> 赞同：2
> 
> 时间：2012-10-26T21:42:19.643
> 
> 标签：django, api, rest, tastypie

I have a Django web application, which allows users to do stop/start/install_pkg on a remote server over HTTP from UI. Django web app has start / stop / install_pkg functions already implemented which basically creates the appropriate URL and calls the HTTP url with params.

My goal is to use the same internal functions when user does a REST call like the following:

```
1\. https://api/v1/server/<server_name>/start/?api_key=<api_key>&params=<params>
2\. https://api/v1/server/<server_name>/stop/?api_key=<api_key>&params=<params>
3\. https://api/v1/server/<server_name>/install_pkg/?api_key=<api_key>&params=<params> 
```

And return JSON response to the caller containing remote server response object.

So far I have used Tastypie library to expose read-only access to model data of the Django web app over REST.

Tastypie tutorial on [Non ORM resource](https://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html?highlight=non%20orm) shows how to interact with non ORM resources by overriding 9 methods of Tastypie. But given my limited knowledge and understanding I am unclear about how to use Tastypie for my case. Am I missing anything here?

## EDITED: (29 Oct 2012)

To clarify further - Django web app has ORM entry for each of the remote servers in but this information is static info about a particular remote server like (name, ip, domain, ...) since it is created at the time of registering the remote server to Django web app.

The web service call from the Django web app to the remote server fetches the most current state of the remote server like (app_state, pkg_installed_list, ...) and this data is not getting stored anywhere in my Djnago web app. It is rendered as it is in UI.

Thus a GET on Django web app about the remote server essentially returns the static info.

Thanks,

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T02:42:33.853

一种方法是只跟踪服务器资源，并将 start/stop/install_pkg 实现为自定义端点。

您将在 Tastypie 下实现服务器资源，以便使用常规的基于 ORM 的资源为每个服务器提供端点。这实现了对资源的标准 REST 操作，GET 来读取服务器信息，POST 来创建新的，如果你说你有管理员用户需要添加另一个服务器来管理它的服务，PUT/PATCH 来更新现有的服务器。

然后，您将通过以下方式扩展 ServerResource 以包含其他端点：

1.  用于[`prepend_urls`](http://django-tastypie.readthedocs.org/en/latest/resources.html#Resource.prepend_urls)定义 3 个自定义端点（start、stop、install_pkg）
2.  在 ServerResource 下的函数中实现每个端点，注意考虑安全性、限制操作（您希望在它们上调用 GET 或 POST 吗？）

* * *

另一种方法是将 ServiceResource 创建为非 ORM 资源，它将与服务器资源有多对多的关系。这是更棘手但可以说是更清洁的设计。

您的 ServiceResource 将有 2 个自定义端点，就像在前面的场景（启动/停止）中一样，但是要在服务器上安装服务，您需要将 PUT/PATCH 发送到要与该服务关联的 ServerResource。

如需更具体的答案，请说明更具体的问题。

* * *

有关如何进行的一些可靠细节，请参阅 Tastypie 食谱：

此[搜索示例](http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#adding-search-functionality)使用`override_urls`您要在 0.9.11 中使用的内容，并且与`prepend_urls`尚未发布的 0.9.12 具有相似的行为。根据您使用的版本，您需要创建 3 个自定义端点：

```
 def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/%start%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('start'), name="api_start"),
            url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/%stop%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('stop'), name="api_stop"),
            url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/%install_pkg%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('install_pkg'), name="api_install_pkg"),
        ] 
```

然后，您需要定义类似于 ServerResource 上的搜索示例的 3 个处理程序。我会给你一个 start 函数的起点。这是一个同步操作的例子。如果您希望它是异步的，您将需要更多，但这是一个起点。

```
from tastypie.http import Http

def start(self, request, **kwargs):
    self.method_check(request, allowed=['post'])
    self.is_authenticated(request)
    self.throttle_check(request)

    try:
        output = function_that_starts_server(kwargs['pk'])
    except FailedException as failure:
        return self.create_response(request, { 'status' : 'failure', 'reason' : failure }, Http

    self.log_throttled_access(request)
    return self.create_response(request, { 'status' : 'success', 'log' : output }) 
```

# typo3 - TYPO3 Extbase: access $BE_USER

> ID：13094837
> 
> 赞同：0
> 
> 时间：2012-10-26T21:42:55.603
> 
> 标签：typo3, extbase

How can I access the $BE_USER variable inside my Extbase controller on the front-end? I just want to know the back-end user ID which is logged in.

[http://typo3.org/documentation/document-library/core-documentation/doc_core_api/4.1.0/view/3/6/](http://typo3.org/documentation/document-library/core-documentation/doc_core_api/4.1.0/view/3/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T02:37:57.480

`$GLOBALS['BE_USER']`...您仍然处于正常的`TYPO3`后端上下文中，并且可以访问任何全局变量。只要确保您只读取您真正处于后端模式的数组/对象即可。

# jquery - 基于列表的复选框检查

> ID：13094839
> 
> 赞同：0
> 
> 时间：2012-10-26T21:43:00.760
> 
> 标签：jquery, checkbox, angularjs

我正在使用 angularjs v0.9 来实现我的会员测试系统...

目前，我有两个控制器...

```
var selected = []
function Ctrl1(){
    checkCheckboxesByIds(selected );
    //users will select a list of values from checkboxes..
    $('#renewlist input:checked').each(function() {
    selected.push($(this).attr('value'));
    });    
}

function Ctrl2(){
//call an api function with "selected"
} 
```

但是，在 Ctrl2 的 html 中，如果用户错误地选择了一个复选框，它可以让用户选择返回到上一个。

我用谷歌搜索并找到了这个功能

```
function checkCheckboxesByIds(ids) {
 $.each(ids, function(i, id) {
    $('#member-' + id).attr('checked', 'checked'); 
 });
} 
```

但是，这仅在 75% 的情况下有效。如果我反复单击后退和前进，有时会无法选中复选框...

无论如何我可以让它更万无一失吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:10:34.537

正如@wirey 提到的

我真的应该使用 .prop('checked', true) 来设置选中的属性。

```
function checkCheckboxesByIds(ids) {
 $.each(ids, function(i, id) {
    $('#member-' + id).prop('checked',true); 
 });
} 
```

它仍然不是万无一失的，因为我第六次提交并返回，复选框不会被选中。但这对我的目的来说已经足够了。

谢谢你。

# uml - UML 图，识别用于生成一些的工具[图片附加]

> ID：13094840
> 
> 赞同：1
> 
> 时间：2012-10-26T21:43:05.217
> 
> 标签：uml, identification

您知道生成这些 UML 图的软件是什么吗？我需要生成完全相同的。我原以为它可能是 eUML2，但我检查了最新版本，并且可以选择创建类似的东西。但是，在以前的版本中可能是可能的。

![http://mk74.host.cs.st-andrews.ac.uk/diagram1.jpg](../Images/6a55619b3efc35368277d93a06bc4c4e.png) ![http://mk74.host.cs.st-andrews.ac.uk/diagram2.jpg](../Images/69d202f3807dfc6a8311627ff77fdd6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:25:10.940

问题解决了。它是由macromedia 徒手创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:47:01.840

you can use Gliffy ([http://www.gliffy.com/uses/uml-software/](http://www.gliffy.com/uses/uml-software/)) to get very similar ones

A similar question: [What's the best UML diagramming tool?](https://stackoverflow.com/questions/15376/whats-the-best-uml-diagramming-tool)

# python - 检查查询是否在 App Engine 中返回任何内容？

> ID：13094844
> 
> 赞同：1
> 
> 时间：2012-10-26T21:43:17.017
> 
> 标签：python, google-app-engine

我有这个代码：

```
 q = db.GqlQuery("SELECT * FROM UserData WHERE user_id = :1", current_user.user_id())
    user_data = q.get()

    if not user_data:
        logging.error('a')
        user_data = UserData(user_id = current_user.user_id(),
                             primary_email = current_email
                             )
        user_data.put()
    else:
        logging.error(pprint.pprint(user_data)) 
```

它正在记录“无”，因为它正在运行其他。“如果不是user_data”不应该捕获“无”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:12:54.563

您看到的输出与我在本地控制台中看到的不同（我从您提供的代码中填补了一些空白）：

```
from google.appengine.ext import db

class UserData(db.Model):
  user_id = db.StringProperty()

u = UserData()
u.user_id = "Foo"
u.put()

q = db.GqlQuery("SELECT * FROM UserData WHERE user_id = :1", "Bar")
user_data = q.get()

if not user_data:
  print "Not"
else:
  print "Is" 
```

这打印：

```
Not 
```

也许您的代码的其他部分产生了意想不到的副作用？

# c++ - 用于组合容器和自定义逻辑的 C++ 技术/库？

> ID：13094853
> 
> 赞同：1
> 
> 时间：2012-10-26T21:43:54.753
> 
> 标签：c++, boost, stl, policy-based-design

我需要偶尔延迟处理一个对象。然而，持有对象的线程不能延迟。

一个自然的解决方案是让一个单独的线程等待这些对象。当一个对象变得可用时，第二个线程将根据需要延迟并处理该对象。第二个线程将在信号量上休眠。当主线程有一个对象需要延迟处理时，它会将对象放入一个队列并发出信号量。

虽然这可行，但另一个程序员（或我）可能会忘记在对对象进行排队时发出信号量。我希望强制执行。

因此，我可能会创建自己的容器，它基于标准容器，但添加了回调（可能使用基于策略的设计）和内部信号量。当一个项目被添加到容器中时，它将强制运行回调函数。

但是这个功能看起来非常有用，而且非常受欢迎，我敢打赌，有人已经写了这个，可能比我在这里提出的设计更好，并解决了诸如重入之类的毛茸茸的细节。是否存在用于此的库？或者，是否有一种众所周知的技术可以获取此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:20:15.387

我为此使用了私有继承以及`using`声明：

```
struct myVec : private std::vector<int> {
 // Stuff that works the same
 using std::vector<int>::push_back;
 using std::vector<int>::erase;
 using std::vector<int>::iterator;

 // Stuff that works differently:
 void erase(std::vector<int>::iterator it) { ... }
}; 
```

不要使用来自标准容器的公共继承，这一点很重要。您最终*将*编写与切片和非虚拟析构函数相关的错误。

# ruby-on-rails - Michael Hartl Rails 教程 - 清单 11.36（AJAX 取消关注）错误

> ID：13094855
> 
> 赞同：0
> 
> 时间：2012-10-26T21:44:02.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在Michael Hartl 的精湛教程的[清单 11.36](http://ruby.railstutorial.org/chapters/following-users#sec-a_working_follow_button_with_ajax)中，将取消关注表单更改为使用 AJAX，但是当我单击“取消关注”按钮时，我不断收到以下错误：

```
ActionView::Template::Error (undefined method `model_name' for NilClass:Class): 
```

然而，这种形式确实有效。如果我单击“取消关注”，我将取消关注当前显示的用户。所以看起来表单声明中的@user在表单提交时是有效的：

```
<%= form_for(current_user.relationships.find_by_followed_id(@user),
         html: { method: :delete },
         remote: true) do |f| %> 
```

但是当“关注”表单尝试加载时，它可能不再可用？

我已经尽力追查这个问题，但我无法弄清楚，而且我还没有看到其他人发布同样的问题。

有什么线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:50:45.393

我不确定，但如果异步调用有效并且以下用户引用已成功从数据库中删除，则引用的@user 指向 nil 导致此引用刚刚被删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:57:26.223

您是否在关系控制器中定义了以下操作？

```
def destroy
    @user = Relationship.find(params[:id]).followed
    current_user.unfollow!(@user)
    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:59:17.573

啊……愚蠢的错误。

我也将 app/views/relationships/create.js.erb 的代码复制到了 app/views/relationships/destroy.js.erb 中。复制粘贴错误。

很抱歉误报。谢谢你的时间。

# jenkins - Jenkins如何隐藏系统级控制台输出

> ID：13094861
> 
> 赞同：1
> 
> 时间：2012-10-26T21:44:40.270
> 
> 标签：jenkins

是否可以隐藏 Jenkins 写入构建日志的所有 .bat 文件魔法？

我得到的是：

```
[release] $ cmd /c call C:\Users\Jenkins\AppData\...8991397464.bat

c:\Jenkins\jobs\release>python -u my_python.py 
...job output...
c:\Jenkins\jobs\release>exit 0 
Finished: SUCCESS 
```

但我想看到的只是：

```
...job output...
Finished: SUCCESS 
```

我在任何地方都找不到 Jenkins 中的任何构建详细设置。一旦您的工作稳定运行，能够关闭调试信息会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:20:21.833

`echo off`您可以通过在执行 windows bath 命令对话框的开头添加来摆脱大部分，但不是全部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-21T18:15:13.147

或者您可以简单地将控制台输出重定向 ('>') 到临时日志文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T03:38:45.817

这不是您可以通过任何 xml 文件更改的内容。从 Jenkins 构建 ( [Launcher.java](https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/Launcher.java) ) 中调用构建任务命令。防止这些命令显示在作业的控制台输出中的一种简单方法是[日志文件过滤器](https://plugins.jenkins.io/log-file-filter)。为此，我目前在我的 Jenkins 实例中使用它（使用 Jenkins 版本 2.176.3）。安装后转到管理 Jenkins > 配置系统。查找*日志文件过滤器全局配置*，输入 . *cmd /c 调用。*作为您的正则*表达式*并将*替换*保留为空。 [![在此处输入图像描述](../Images/89dac2313b9ac538520a51290ddf6c08.png)](https://i.stack.imgur.com/MoJd2.png)

# jquery - 将第 3 方 jQuery 代码添加到我们的 Rails RTF 文本框

> ID：13094867
> 
> 赞同：0
> 
> 时间：2012-10-26T21:45:18.010
> 
> 标签：jquery, ruby-on-rails-3, forms

我正在将第 3 方功能添加到现有的 Rails 应用程序中。第 3 方给了我一段代码，我应该把它放到我的代码库中，但我不知道应该在哪里发布。

发布的是我应该添加到我的代码库中的第 3 方：

```
<script src="http://serviceweareusing.com/js/version-latest?cid=ourcompany"></script>
<script>
$("#textbox").featureBox('init',{rte:true,userid:'<ENTER CURRENT USERNAME>'});
</script> 
```

发布的是我的应用程序中用于表单的现有代码。

**_post_form.html.erb**

```
<div class="create-post-row">
    <label>Body</label>                     
    <textarea id="textbox">
        <%= @post.body %>
    </textarea>
    <%= form.hidden_field :body, :id => 'body_hidden_input' %>
    <%= errors_for_field :body %>
</div> 
```

这个应该贴在哪里？它是放在单独的 .js 文件中还是我可以将它直接粘贴到嵌入式 ruby​​ 中？任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:56:54.923

在 /app/assets/javascripts 文件夹中创建一个 .js 文件。

确保您的“application.js”文件具有**//= require_tree 。**在末尾。

# c# - 在 C# 中以特定速度生成随机文本文件

> ID：13094875
> 
> 赞同：1
> 
> 时间：2012-10-26T21:45:51.943
> 
> 标签：c#, performance, random, generator, rate

我创建了一个 C# 控制台应用程序，它使用随机创建的字符串连续创建文本文件。时间（以分钟为单位）作为应用程序的输入，它运行该分钟数以生成连续的文本文件。我了解生成的数据量会因处理器速度和其他配置而异。我的机器能够在 1 分钟内生成总共 25 mb 的文本格式数据。

现在，我的问题是，如果通过我的代码作为应用程序的另一个输入，我可以控制每分钟生成的数据速率吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:54:29.353

如果你在一分钟内只能生成 25MB，而且它只是随机字符串，那么你还有其他事情要考虑——你应该很容易在一分钟内完成比这更多的数量级。

但就控制而言，我能想到的唯一方法是手动保持计时器运行，并跟踪你在多少时间内写了多少，在你前进的时候自动计算你的速度——然后睡觉一旦您计算出您的行驶速度与您想要行驶的速度，必要时适当地进行。

它不会是完美的，但你应该能够做出最好的猜测，并根据过去的表现不断调整你的睡眠时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:08:34.527

```
var start = DateTime.Now;
int bytesSaved=0;
double desiredSpeed = (25*1024*1024)/60;

while(true)
{
  int latency = bytesSaved/(DateTime.Now-start).TotalSeconds - desiredSpeed;
  if(latency>0) 
    {          
      Thread.Sleep(100);
      continue;
    }

  bytesSaved +=SaveDataChunk(latency);     

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:52:05.957

是的。你可以做两件事之一；如果您想控制数据的 mb，则让用户传入一个 int，您可以使用它来控制写入文件的字符串的长度。另一种选择是使用睡眠。您可以让用户传入一个睡眠值，然后您可以在每次写入之间睡眠这段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:58:12.537

您可以设置一个计时器并每 N 秒创建一个文件。

# java - 在 java 源文件中查找标识符

> ID：13094876
> 
> 赞同：-1
> 
> 时间：2012-10-26T21:45:53.127
> 
> 标签：java

我有以下任务：

编写一个程序，读取 Java 源文件并生成文件中所有标识符的索引。对于每个标识符，打印它出现的所有行。调用 in.useDelimiter("[^A-Za-z0-9_]+")。然后每次调用 next 返回一个仅由字母、数字和下划线组成的字符串。

我的计划是创建一个示例 .java 文件，并逐行读取它。我不确定标识符是什么意思，或者哪个类提到了 useDelimiter 方法。谁能让我走上正轨？谢谢。我会使用 homework 标签，但它说它正在被删除。

这是我到目前为止所拥有的。我可以让它打印出文件中的所有标识符，但是我怎样才能找出标识符所在的行号呢？

```
 public static void main(String[] args) {
    System.out.println("Enter the path to your JAVA source file: ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String pathToFile = null;
    try {
        pathToFile = br.readLine();
        File f = new File(pathToFile);
        Scanner s = new Scanner(f);
        s.useDelimiter("[^A-Za-z0-9_]+");
        while (s.hasNext()) {                     
            String identifier = s.next();
            System.out.println(identifier);
        }
    } catch (IOException ioe) {
        System.out.println("Unable to locate file. Program will exit.\n"
                           + ioe.toString());
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:33:39.383

I suggest to use:

*   [java.io.StreamTokenizer](http://docs.oracle.com/javase/7/docs/api/java/io/StreamTokenizer.html) to filter comments
*   [java.util.regex.Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html) to filter the token which matches [*A-Za-z][a-zA-Z0-9*]*

# php - PHP 表单搞砸了链接

> ID：13094877
> 
> 赞同：1
> 
> 时间：2012-10-26T21:45:55.380
> 
> 标签：php, forms, post, hyperlink, href

我正在尝试制作一个在线系统，人们可以在其中从系统内发送线索 html 电子邮件......

除了在富文本编辑器中添加链接时，我的一切都正常工作，并且源代码中的一切看起来都很好，但是当我查看收件箱中的电子邮件时，链接不起作用并已更改为：

> x-msg://30/%22http://example.com/%22

我不明白...

我认为这是 html post 功能的问题，因为我通过`$_POST`方法提交它并使用 html 表单...当我在下一页上回显语句时，链接是*`http://workwithmandy.co/%22http://phobes.com/%22`*，这很奇怪，因为网站的根目录系统已开启*`http://workwithmandy.co/`*。

关于为什么会这样的任何想法？

**这是表格：**

```
<form action="<?php echo $editFormAction; ?>" method="POST" name="form" id="sendemailform">
          <fieldset>
          <div class="emailtablecontainer">
          <table width="525" border="0" cellspacing="10">
  <tr>
    <td><label>To:</label></td>
    <td><select data-placeholder="Select Lead(s) To Email..." multiple="true" class="chzn-container-multi" name="selectleads"style="width:500px;">
            <?php
do {  
?>
            <option value="<?php echo $row_rsAllLeads['Email']?>"><?php echo $row_rsAllLeads['FullName']?></option>
            <?php
} while ($row_rsAllLeads = mysql_fetch_assoc($rsAllLeads));
  $rows = mysql_num_rows($rsAllLeads);
  if($rows > 0) {
      mysql_data_seek($rsAllLeads, 0);
      $row_rsAllLeads = mysql_fetch_assoc($rsAllLeads);
  }
?>
          </select></td>
  </tr>
  <tr>
    <td><label>Subject:</label></td>
    <td><input class="inputs" name="subjectfield" type="text"></td>
  </tr>
  <tr>
    <td><label>Message:</label></td>
    <td><textarea id="sendemailtextarea" name="messagefield"></textarea></td>
    <script>
    CKEDITOR.replace( 'sendemailtextarea',
    {
        toolbar : 'SendEmailToolbar'
    });
    </script>
  </tr>
</table>
</div>
<input class="submitemailbuttonsprite submitemailbutton1" name="submitemail" type="submit" value="Send Email(s)">
          </fieldset>
          <input type="hidden" name="MM_insert" value="form">
          </form> 
```

**这是实际的 PHP 代码：**

```
<?php
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
    echo $_POST['messagefield'];
 $to = $_POST['selectleads'];
 $subject = $_POST['subjectfield'];
 $body = $_POST['messagefield'];
 $headers = "MIME-Version: 1.0\r\n"; 
 $headers .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
 $headers .= "From: " . $row_rs_CurrentUser['FirstName'] . " " . $row_rs_CurrentUser['LastName'] . " <" . $row_rs_CurrentUser['Email'] . ">";
 if (mail($to, $subject, $body, $headers)) {
  } else {
   echo("<p>Message delivery failed...</p>");
  }
}
?> 
```

**提交表单后完整生成的 HTML 代码：**

```
<p>
    <a href=\"http://www.amazon.com\">Hello</a></p>

<!doctype html>
<html><head>
<meta name="viewport" content="width = 1300">
<meta charset="UTF-8">
<title>Back Office | Home</title>
<link rel="stylesheet" type="text/css" href="../chosen/chosen.css">
<script src="../chosen/jquery.js"></script>
<script src="../chosen/chosen.jquery.js"></script>
<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
<script>
jQuery(document).ready(function(){
  jQuery(".chzn-container-multi").chosen();
});
</script>
<link rel="stylesheet" type="text/css" href="../Style Sheets/styles.css"/>
<style type="text/css">
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
</style>
</head>

<body>
<div align="center">
  <div class="wrapper">
    <div class="welcome">
    <strong>Welcome, Alex | </strong><a href="/BackOffice/Home.php?doLogout=true">Logout</a>
    </div>
    <div class="header">
    </div>
    <!--end header-->
    <div class="content_wrapper">
      <div class="main_content">
        <div class="sidebar">
          <div class="sidebar_main">
            <div class="menu_holder">
              <h1>Control Panel</h1>
              <ul class="menu_items">
                <li class="menu-1"><a href="Home.php">Home</a></li>
                <li class="menu-2"><a href="Manage Leads.php" class="current">Manage Leads</a></li>
                <li class="menu-3"><a href="Manage Autoresponses.php">Manage Autoresponses</a></li>
                <li class="menu-4"><a href="My NMVT.php">My NMVT</a></li>
                <li class="menu-5"><a href="Home.php">Lead Capture Settings</a></li>
                <li class="menu-6"><a href="Home.php">Appointments</a></li>
                <li class="menu-7"><a href="Home.php">Resources</a></li>
                <li class="menu-8"><a href="Home.php">Referral System</a></li>
                <li class="menu-9"><a href="Home.php">My Account</a></li>
                <li class="menu-10"><a href="Contact Support.php">Contact Support</a></li>
              </ul>
            </div>
          </div>
        </div>
        <!--end sidebar-->
        <div class="content">
          <div class="content_container">
          <div class="page_container">
          <div class="content_page_header">
          <span>Send Email</span>
          </div>
          <div class="box_container">
          <form action="/BackOffice/Send Email.php?" method="POST" enctype="application/x-www-form-urlencoded" name="form" id="sendemailform">
          <fieldset>
          <div class="emailtablecontainer">
          <table width="525" border="0" cellspacing="10">
  <tr>
    <td><label>To:</label></td>
    <td><select data-placeholder="Select Lead(s) To Email..." multiple="true" class="chzn-container-multi" name="selectleads"style="width:500px;">
                        <option value="acorso@gmail.com">Alex Corso</option>
                        <option value="Praesent.luctus.Curabitur@velturpis.edu">Aline Church</option>
                        <option value="tincidunt.Donec@necante.com">Ariana Gay</option>
                        <option value="aburks@gmail.com">Artie Burkinshaw</option>
                        <option value="daaghewi@gmail.com">asdfqphgp</option>
                        <option value="Nulla@Nuncac.ca">Avram Robbins</option>
                        <option value="auctor.nunc@Maurisvestibulumneque.ca">Bethany Church</option>
                        <option value="luctus@ettristiquepellentesque.ca">Byron Jordan</option>
                        <option value="nascetur@velarcueu.ca">Camille Hughes</option>
                        <option value="posuere.vulputate@orci.com">Cecilia Glenn</option>
                        <option value="fringilla@Aliquamtinciduntnunc.edu">Chancellor Henry</option>
                        <option value="in@estNuncullamcorper.edu">Charity Osborn</option>
                        <option value="blandit@Crasdolor.ca">Cheryl Koch</option>
                        <option value="Ut@sapiengravidanon.edu">Claire Kirby</option>
                        <option value="tristique@pharetra.ca">Clinton Mccall</option>
                        <option value="iaculis@Vestibulumaccumsan.ca">Colleen Craft</option>
                        <option value="kraft323@gmail.com">Connor Kraft</option>
                        <option value="posuere.cubilia.Curae;@etmagnis.edu">Courtney Cole</option>
                        <option value="Praesent@nonvestibulumnec.com">Cyrus Reed</option>
                        <option value="augue.ut@nibhlacinia.org">Dane Love</option>
                        <option value="turpis@felis.org">Danielle Sandoval</option>
                        <option value="webb@gmail.com">Darius Web</option>
                        <option value="dcallihan@yahoo.com">Dennis Callihan</option>
                        <option value="asdgq@hand.com">dgwertq</option>
                        <option value="luctus.ipsum@ullamcorpermagna.ca">Dolan Powers</option>
                        <option value="Etiam.imperdiet.dictum@ascelerisquesed.org">Dominique Higgins</option>
                        <option value="mauris.elit.dictum@enimnislelementum.edu">Echo Michael</option>
                        <option value="ipsum.Suspendisse.sagittis@tellus.org">Edan Pacheco</option>
                        <option value="risus.Nunc@ligulaeu.ca">Evangeline Eaton</option>
                        <option value="massa.Mauris@turpisNullaaliquet.com">Fallon Dyer</option>
                        <option value="elit.a.feugiat@etmagnis.com">Ferris Velez</option>
                        <option value="Email@gnail.com">Full Namehshs</option>
                        <option value="id@elementumsemvitae.ca">Gail Goodwin</option>
                        <option value="venenatis@massa.org">Gareth Austin</option>
                        <option value="Duis@volutpatNullafacilisis.com">Geoffrey Caldwell</option>
                        <option value="posuere.enim@Phasellusdolor.ca">Geoffrey Pollard</option>
                        <option value="gmandel@gmail.com">Gregory Mandel</option>
                        <option value="Morbi@nislMaecenasmalesuada.edu">Griffith Bradley</option>
                        <option value="Maecenas@Phasellus.edu">Halee Mann</option>
                        <option value="lorem@fames.com">Hannah Booth</option>
                        <option value="magna@vulputatemauris.edu">Haviva Hobbs</option>
                        <option value="nunc@sitamet.org">Hermione Barton</option>
                        <option value="Aenean@odio.ca">Illiana Vasquez</option>
                        <option value="Curabitur.ut@mifelisadipiscing.edu">Imelda Madden</option>
                        <option value="dictum.eleifend.nunc@Duissit.org">Inez Newton</option>
                        <option value="iparks@gmail.com">Isaiah Parks</option>
                        <option value="dui.Fusce@dui.ca">Jaden Joyner</option>
                        <option value="ac.libero.nec@augue.org">Jakeem Walters</option>
                        <option value="jmishoe@gmail.com">James Mishoe</option>
                        <option value="purus.ac.tellus@in.edu">Jana Edwards</option>
                        <option value="eu.nibh@posuere.edu">Jenette Smith</option>
                        <option value="jcasablanca@gmail.com">John Casablanca</option>
                        <option value="Nunc@Crasvulputate.org">Joseph Morris</option>
                        <option value="enim.consequat@lectusquismassa.edu">Kameko Weaver</option>
                        <option value="Proin.vel@maurisanunc.edu">Kane Newman</option>
                        <option value="in.aliquet.lobortis@luctusipsumleo.ca">Karleigh Henry</option>
                        <option value="cursus.vestibulum@enimsit.com">Keith Arnold</option>
                        <option value="mus@sodales.ca">Kenyon Salas</option>
                        <option value="tortor.dictum.eu@acturpis.org">Kessie Strong</option>
                        <option value="Donec.luctus.aliquet@metusAliquam.com">Kiara Santiago</option>
                        <option value="Suspendisse.sagittis.Nullam@euismodest.ca">Kiona Cabrera</option>
                        <option value="nisi.sem@Donecporttitor.com">Knox Roberts</option>
                        <option value="enim.sit@idblandit.ca">Lacota Ortiz</option>
                        <option value="in@venenatis.com">Laith Roach</option>
                        <option value="sollicitudin.adipiscing.ligula@luctusvulputate.com">Lani Berry</option>
                        <option value="vitae@loremsitamet.com">Linda Parker</option>
                        <option value="loisg@gmail.com">Lois Griffin</option>
                        <option value="facilisis.eget.ipsum@ipsum.org">Lucas Mason</option>
                        <option value="ligula.tortor.dictum@aliquet.com">Macey Snider</option>
                        <option value="Duis.gravida@iaculislacus.edu">Magee Ramirez</option>
                        <option value="euismod.urna@etultricesposuere.org">Mariko Barton</option>
                        <option value="mfulps@gmail.com">Marshawn Fulps</option>
                        <option value="ornare.elit.elit@magnaa.com">Maryam Andrews</option>
                        <option value="libero@pharetranibhAliquam.org">Megan Stewart</option>
                        <option value="pede.blandit.congue@Cras.org">Melinda Stokes</option>
                        <option value="feugiat.nec.diam@auctor.ca">Natalie Humphrey</option>
                        <option value="ultrices.Duis.volutpat@egettinciduntdui.com">Nathan Mcmahon</option>
                        <option value="orci.quis.lectus@Integerurna.org">Nathaniel Mcleod</option>
                        <option value="ipsum.Donec@erat.edu">Noel Munoz</option>
                        <option value="Etiam@Donectincidunt.org">Ocean Foley</option>
                        <option value="est@velitQuisque.edu">Pamela Morton</option>
                        <option value="rutrum@faucibusorci.edu">Pearl Tate</option>
                        <option value="placerat@variusultricesmauris.edu">Perry Medina</option>
                        <option value="pgriffin@gmail.com">Peter Griffin</option>
                        <option value="ipsum@ridiculus.com">Philip Hatfield</option>
                        <option value="pstuff88@gmail.com">Philip Stuff</option>
                        <option value="Morbi.metus@Inscelerisque.com">Plato Hatfield</option>
                        <option value="tempor.erat@loremeget.edu">Quintessa Stephens</option>
                        <option value="adipiscing.elit.Curabitur@Integer.com">Rama Huber</option>
                        <option value="eu@Phasellusin.ca">Rana Whitfield</option>
                        <option value="Nunc@etcommodo.org">Randall Barnett</option>
                        <option value="rdemi@gmail.com">Rashiki Demisola</option>
                        <option value="nunc@variusultrices.ca">Ray Scott</option>
                        <option value="adipiscing.elit.Etiam@cursusnonegestas.edu">Roary Stout</option>
                        <option value="auctor.velit@nuncQuisque.ca">Ross Frost</option>
                        <option value="rwhitworth@inbox.com">Rubyona Whitworth</option>
                        <option value="asgawehgiasdo@gmail.com">Sahwod Adams</option>
                        <option value="mattis@Phasellus.com">Shaine Goodman</option>
                        <option value="sdhageng@gmail.com">Sharod Enlingson</option>
                        <option value="shadams@gmail.com">Shenequa Adams</option>
                        <option value="et@aliquamarcuAliquam.org">Sophia Green</option>
                        <option value="Maecenas@Morbi.ca">Stella Knight</option>
                        <option value="lorem@arcu.com">Tate Good</option>
                        <option value="in@vehiculaetrutrum.edu">Teagan Dudley</option>
                        <option value="lacus.vestibulum@pede.ca">Vaughan Huff</option>
                        <option value="Vestibulum.ut@enimnectempus.ca">Whoopi Ratliff</option>
                        <option value="et@mi.com">Xander Monroe</option>
                        <option value="et.magnis.dis@sapiengravidanon.com">Xanthus Williams</option>
                        <option value="sagittis.Nullam.vitae@atrisusNunc.edu">Xavier Wilkinson</option>
                        <option value="rhoncus.Nullam.velit@nonduinec.com">Zenaida Day</option>
                        <option value="adfg@gmail.com">zzzzzza</option>
                      </select></td>
  </tr>
  <tr>
    <td><label>Subject:</label></td>
    <td><input class="inputs" name="subjectfield" type="text"></td>
  </tr>
  <tr>
    <td><label>Message:</label></td>
    <td><textarea id="sendemailtextarea" name="messagefield"></textarea></td>
    <script>
    CKEDITOR.replace( 'sendemailtextarea',
    {
        toolbar : 'SendEmailToolbar'
    });
    </script>
  </tr>
</table>
</div>
<input class="submitemailbuttonsprite submitemailbutton1" name="submitemail" type="submit" value="Send Email(s)">
          </fieldset>
          <input type="hidden" name="MM_insert" value="form">
          </form>
          </div>
          <div class="content_page_footer">
          </div>
          <!--end content_container-->
        </div>
        <!--end content-->
      </div>
      <!--end main_content-->
    </div>
    <!--end content_wrapper-->
  </div>
  <!--end wrapper-->
  <div class="footer">
    <div class="text_wrapper">
      <p>Copyright © 2012 PROCapture LLC</p>
      <p>Privacy Policy  |  Terms And Conditions</p>
    </div>
    </div>
</div>
</div>
</div>
</body>
</html> 
```

# css - 在 SCSS 中抽象变量

> ID：13094884
> 
> 赞同：1
> 
> 时间：2012-10-26T21:46:49.547
> 
> 标签：css, sass

我有一个父 SCSS 文件正在导入我的其他 CSS 文件：

```
@import 'variables.css';
@import 'helpers.css';
@import 'layout.css'; 
```

我有三个 scss 文件：variables.css.scss;helper.css.scss & layout.css.scss。

在变量中，我定义了在整个站点中使用的颜色、字体和大小。问题是我假设只要先导入这些变量，其他文档就可以使用这些变量，但是我遇到了`Undefined Variable`错误。

我想我只是流程错误。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:37:10.810

如果您可以将额外的文件作为中间人，您可以这样做。

_master.css.scss：

```
@import 'variables.css';
@import 'helpers.css';
@import 'layout.css'; 
```

网站.css.scss：

```
@import '_master.css'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:10:32.083

问题是您如何命名 scss 文件。您导入文件的方式使 SASS 认为您正在使用 @import CSS 规则[https://developer.mozilla.org/en-US/docs/CSS/@import](https://developer.mozilla.org/en-US/docs/CSS/@import) 仅使用 scss 扩展名重命名这些文件，删除“.css”，并像这样导入它们

```
@import 'variables.scss';
@import 'helpers.scss';
@import 'layout.scss'; 
```

或者你甚至可以完全跳过扩展

```
@import 'variables';
@import 'helpers';
@import 'layout'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:54:31.750

如果您希望变量在其他文件中可用，您还需要在其中包含该 css。所以基本上 layout.css.scss 和 helper.css.scss 需要有`@import 'variables.css'`

# java - What is wrong with this Java code

> ID：13094885
> 
> 赞同：-5
> 
> 时间：2012-10-26T21:46:54.910
> 
> 标签：java

This is my add method for my Josephus class in which I am supposed to be using a Circular Linked List. I am getting null pointer exceptions in a few areas in my class but it is all because of this method. Can anyone see any OBVIOUS mistakes from looking at this code?

```
/** Inserts the specified element in the list at the
     last position
     @param dataItem the element to add
   */
 // Complexity O(1)
 @SuppressWarnings({ "unchecked" })
public void add(E dataItem) {
    Node <E> node = new Node <E> (dataItem,null,null);
    if (count == 0){ // list is empty
        head = node.previous= node;  
    }

    else {
       head.previous.next = node;
       node.previous = head.previous;
       head.previous = node;
    }
    count++; 
    } 
```

Full code: [http://pastebin.com/k4Hmbqmw](http://pastebin.com/k4Hmbqmw)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T21:49:11.207

是的，您需要`else`用花括号将您的部分括起来：

```
public void add(E dataItem) {
    Node <E> node = new Node <E> (dataItem, null, null);
    if (count == 0) { // list is empty
        head = node.previous= node ;  
    } else {
       (head.previous).next = node;
       node.previous = head.previous;
       head.previous = node;
    }
    count++;
} 
```

否则，每次都会执行最后三行，而不仅仅是最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:49:28.843

if/else 块周围没有花括号

# mumps - 如何解决“%GDE-I-WRITEERROR, 由于写入失败无法退出。失败原因: 13,GDEPUT+48^GDEPUT,%SYSTEM-E-ENO13, Permission denied”

> ID：13094889
> 
> 赞同：1
> 
> 时间：2012-10-26T21:47:13.007
> 
> 标签：mumps

[我根据http://sourceforge.net/projects/sanchez-gtm](http://sourceforge.net/projects/sanchez-gtm)的最新 GT.M 发行版`6.0-000_linux_i686_pro.tar.gz`的说明安装了。

在安装之前，我设置`$gtm_log`然后经历了安装。之后我设置`$gtm_dist`并添加到我设置的 PATH`$gtmroutines`

我从父目录启动了 gtm，并试图创建默认的全局目录。

```
GTM>d ^GDE
%GDE-I-GDUSEDEFS, Using defaults for Global Directory
/usr/lib/mumps.gld 
```

使用退出命令时出现此错误：

```
GDE> exit
%GDE-I-VERIFY, Verification OK

%GDE-I-GDCREATE, Creating Global Directory file
/usr/lib/mumps.gld
%GDE-I-WRITEERROR, Cannot exit because of write failure.  Reason for failure:    
13,GDEPUT+48^GDEPUT,%SYSTEM-E-ENO13, Permission denied 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:20:30.277

您应该`$gtmgbldir`在创建默认全局目录之前进行设置。

例如，`export gtmgbldir="~/mumps.gld"`将导致在用户的主目录中创建全局目录（默认情况下还包括数据库文件），这可能比在`/usr/lib/`.

您还应该查看该文件`$gtm_dist/gtmprofile`。它可以用来创建一个非常适合学习的默认环境，但它也是一个很好的信息来源，可以了解哪些环境变量需要/可以定义为什么效果。

# java - "A Java Exception has occurred"

> ID：13094890
> 
> 赞同：0
> 
> 时间：2012-10-26T21:47:13.843
> 
> 标签：java, eclipse, netbeans

So I'm trying to run my pacman project as a jar(also tried runnable) and I just get the error message you see in the title. It runs perfectly fine in eclipse/netbeans, but whilst cleaning/building i see the warnings: Note: C:\Users\Lucas\Documents\Eclipse\PackMan\src\game\packman\GameData.java uses unchecked or unsafe operations. Note: Recompile with -Xlint:unchecked for details.

The main class is correct and assigned. Does anybody know what I'm doing wrong? Here is my GameData class

```
public class GameData {

int mazeNo;
CopyOnWriteArrayList<Position> pills;
CopyOnWriteArrayList<Position> powerPills;
public MoverInfo packman;
public GhostInfo[] ghostInfos = new GhostInfo[4];
public int score;

Maze[] mazes;
boolean dead = false;
boolean win = false;

public GameData() {
    mazes = new Maze[4];
    // load mazes information
    for (int m=0; m<4; m++) {
        mazes[m] = new Maze(m);
    }
    setMaze(mazeNo);
}

private void setMaze(int m) {
    packman = new MoverInfo(mazes[m].packmanPos);
    for (int g=0; g<4; g++) {
        ghostInfos[g] = new GhostInfo(mazes[m].ghostPos);
    }
    pills = new CopyOnWriteArrayList((List<Position>)(mazes[m].pills.clone()));
    powerPills = new CopyOnWriteArrayList((List<Position>)(mazes[m].powerPills.clone()));
}

public void movePackMan(int reqDir) {
    if (move(reqDir, packman)) {
        packman.curDir = reqDir;
    } else {
        move(packman.curDir, packman);
    }

}

private int wrap(int value, int incre, int max) {
    return (value+max+incre)%max;
}

private boolean move(int reqDir, MoverInfo info) {
    // current position of packman is (row, column)
    int row = info.pos.row;
    int column = info.pos.column;
    int rows = mazes[mazeNo].rows;
    int columns = mazes[mazeNo].columns;
    int nrow = wrap(row, MoverInfo.DROW[reqDir], rows);
    int ncol = wrap(column, MoverInfo.DCOL[reqDir], columns);
    if (mazes[mazeNo].charAt(nrow, ncol) != '0') {
        info.pos.row = nrow;
        info.pos.column = ncol;
        return true;
    }
    return false;
}
public void update() {
    if (pills.contains(packman.pos)) {
        pills.remove(packman.pos);
        score += 5;
    } else if (powerPills.contains(packman.pos)) {
        powerPills.remove(packman.pos);
        score += 50;
        for (GhostInfo g:ghostInfos) {
            g.edibleCountDown = 500;
        }
    }
    for (GhostInfo g:ghostInfos) {
        if (g.edibleCountDown > 0) {
            if (touching(g.pos, packman.pos)) {
                // eat the ghost and reset
                score += 100;
                g.curDir = g.reqDir = MoverInfo.LEFT;
                g.pos.row = mazes[mazeNo].ghostPos.row;
                g.pos.column = mazes[mazeNo].ghostPos.column;
                g.edibleCountDown = 0;
            }
            g.edibleCountDown--;
        } else {
            if (touching(g.pos, packman.pos)) {
                dead = true;
            }
        }
    }
    // level is cleared
    if (pills.isEmpty() && powerPills.isEmpty()) {
        mazeNo++;
        if (mazeNo < 4) {
            setMaze(mazeNo);
        } else if (mazeNo == 5) {
            win = true;
        } else {
            // game over
            dead = true;
        }
    }
}
private boolean touching(Position a, Position b) {
    return Math.abs(a.row-b.row) + Math.abs(a.column-b.column) < 3;
}

public void moveGhosts(int[] reqDirs) {
    for (int i=0; i<4; i++) {
        GhostInfo info = ghostInfos[i];
        info.reqDir = reqDirs[i];
        if (move(info.reqDir, info)) {
            info.curDir = info.reqDir;
        } else {
            move(info.curDir, info);
        }
    }
}
public int getWidth() {
    return mazes[mazeNo].width;
}
public int getHeight() {
    return mazes[mazeNo].height;
}

public List<Integer> getPossibleDirs(Position pos) {
    List<Integer> list = new ArrayList<>();
    for (int d=0; d<4;d++) {
        Position npos = getNextPositionInDir(pos, d);
        if (mazes[mazeNo].charAt(npos.row, npos.column) != '0') {
            list.add(d);
        }
    }
    return list;
}

private Position getNextPositionInDir(Position pos, int d) {
    int nrow = wrap(pos.row, MoverInfo.DROW[d], mazes[mazeNo].rows);
    int ncol = wrap(pos.column, MoverInfo.DCOL[d], mazes[mazeNo].columns);
    return new Position(nrow, ncol);
} 
```

}

# facebook - java facebook api - 用于从用户帐户中删除应用程序的回调功能

> ID：13094896
> 
> 赞同：0
> 
> 时间：2012-10-26T21:47:53.320
> 
> 标签：facebook

当用户从他/她的帐户中删除应用程序时，是否有任何 facebook API 可以调用我的服务器？

我希望当用户从他/她的帐户中删除我的 Facebook 应用程序时通知我的应用程序。

我只是想知道facebook是否提供这种功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:54:48.800

Facebook 提供此功能。

转到[http://developers.facebook.com/apps](http://developers.facebook.com/apps)
编辑您的应用程序
转到设置 > 高级在身份验证面板中
查找。`Deauthorise Callback URL:`

# c - fwrite pid_t 不工作

> ID：13094897
> 
> 赞同：0
> 
> 时间：2012-10-26T21:47:57.657
> 
> 标签：c, fwrite

我有以下代码：

```
...
printf("Started %d", pid);
FILE * fh;
fh = fopen("run/source.pid", "wb");
fwrite(&pid, sizeof(int), 1, fh);
fclose(fh); 
```

然而，写的 pid 文件写的是行话，而不是整数，虽然 pid_t 只是一个，但我什至为第二个参数`int`做绑定，但我遇到了类似的问题。`sizeof(pid_t)`

有任何想法吗？我在这里先向您的帮助表示感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:27:58.497

好吧，我不太了解这个问题（上下文太少），但问题可能是您在文本编辑器、终端等中看到该文件。

fwrite() 写入原始数据，例如，假设您有一个 pid 编号，比如说 12，然后您使用 fwrite 写入该编号，如下所示：

```
fwrite(&pid, sizeof(int), 1, file); 
```

fwrite() 会将一个 32 位整数写入文件`file`，也就是说，根据您的处理器类型，一个字节序列如下所示：`00 00 00 12`

然而

fprintf() 将写入一个字节序列：`49 50`（ASCII 字符平台无关）在所有终端或文本编辑器中可见。

希望这可以帮助。

# c++ - 类函数/变量是否必须在使用前声明？

> ID：13094898
> 
> 赞同：22
> 
> 时间：2012-10-26T21:48:19.403
> 
> 标签：c++, class, function, variables, prototype

所以我在学习课程时，偶然发现了一些我觉得很尴尬的东西。

```
class Nebla 
{
    public:
        int test()
        {
            printout();
            return x;
        }

        void printout()
        {
            printout2();
        }

    private:
        int x,y;
        void printout2()
        {
            cout<<"Testing my class";
        }
}; 
```

我发现在一个类中我可以在声明它们之前使用函数（原型它们）

> 你可以看到我在 decleration 之前`printout()`使用过。`printout2()`

我也可以在声明变量之前使用它们

> 你可以看到我做到了`return x`；在声明 x 之前。

为什么我可以在声明之前在类中使用函数和变量，但在类之外使用函数和变量，如果这样做会出错？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-26T22:11:56.530

好问题; 我多年来一直依赖该功能而没有考虑它。我翻阅了几本 C++ 书籍以找到答案，包括 Stroustrup 的*The C++ Programming Language*和*The Annotated C++ Reference Manual*，但没有人承认或解释其中的区别。但是，我想我可以通过它推理。

我相信，您的示例有效的原因是您的正文`test`并`printout`没有真正出现在您的文件中。编码

```
class MyClass {
  void someFun() {
    x = 5;
  }
  int x;
}; 
```

...这似乎违反了在使用变量之前必须声明变量的规则，实际上相当于：

```
class MyClass {
  void someFun();
  int x;
};

void MyClass::someFun() {
  x = 5;
} 
```

一旦我们像这样重写它，很明显你定义中的东西`MyClass`实际上是一个*声明*列表。这些可以按任何顺序排列。`x`在它被宣布之前，你不会依赖它。我知道这是真的，因为如果您要像这样重写示例，

```
void MyClass::someFun() {
  x = 5;
}

class MyClass {
  void someFun();
  int x;
}; 
```

...它将不再编译！所以类定义首先出现（及其完整的成员列表），然后您的方法可以使用任何成员，而无需考虑它们在类中声明的顺序。

最后一个难题是 C++ 禁止在类定义之外声明任何类成员，因此一旦编译器处理了您的类定义，它就会知道类成员的完整列表。*这在 Stroustrup 的注释 C++ 参考手册*的 p.170 中有说明：“*成员列表*定义了类的完整成员集。不能在其他地方添加任何成员。”

感谢您让我对此进行调查；我今天学了些新东西。:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-26T22:19:08.007

为了清楚起见，这是 C++ 标准所要求的，而不仅仅是几个编译器处理类定义的方式。

N3242 3.3.7：

> 类中声明的名称的潜在范围不仅包括名称声明点之后的声明区域，还包括所有函数体、非静态数据成员的*大括号或等号初始化器*以及其中的默认参数类（包括嵌套类中的此类内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T23:35:29.580

除了 Philip 的好评之外，Stroustrup在*The Design and Evolution of C++中对**Name Lookup Rules*给出了很好的解释。这在“6.3 说明”中进行了描述。在 6.3.1.1, *"The ARM Name Lookup Rules"*中，他提到了*ARM*中定义的 2 条规则：

 ***[1]类型重定义规则：一个类型名称在一个类中被使用后不能被重定义。

[2] 重写规则：分析内联定义的成员函数，就好像它们是在类声明结束后立即定义的一样。

因此，在您的情况下，它将应用重写规则（正如菲利普推断的那样），这就是您可以转发引用这些类成员的原因。

这本书可能主要具有历史意义（写于 94 年），但我认为这些规则在今天同样适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:50:15.517

您能够这样做的原因是，当您调用`test`,`printout`或`printout2`时，它们已经被创建了。如果在执行之前在任意函数*之外*调用该函数，则会出现错误。

将类成员函数视为与类其余部分的评估流程异步。这不适用于独立函数，但您可以访问尚未实例化的数据成员。我不完全确定为什么我们能够做到这一点，但我认为这与类对象的实例化有关。***

# c# - ajax 函数中的输入字段未更新

> ID：13094902
> 
> 赞同：0
> 
> 时间：2012-10-26T21:48:37.207
> 
> 标签：c#, jquery, ajax

我将尝试以最佳方式解释我面临的问题

我有一个视图，里面有一个局部视图，它基本上显示一个输入字段和一个按钮。这个局部视图看起来像这样

```
<fieldset>
    @Html.HiddenFor(model => model.AuctionId)
    @Html.HiddenFor(model => model.AuctionEventId)
     <div class="lotdetail-maxbid-row">
        @Html.TextBoxFor(model => model.Amount, new { @class = "radius2 text-box single-line valid" })
        @Html.ValidationMessageFor(model => model.Amount)
    </div>
    <input type="submit" id="autobidButton" value="Increase Max bid" class="btn btn-level2 btn-maxbid @disableButton" />
</fieldset> 
```

在这个局部视图中，我把这个脚本

```
<script type="text/javascript">
$(document).ready(function () {
    $('#autobidButton').click(function () {
        $.ajax({
            url: "/Lot/AutobidConfirmationPartial",
            data: {
                amount: $("#Amount").val(),
                auctionEventId: $("#AuctionEventId").val(),
                auctionId: $("#AuctionId").val()
            },
            success: function (result) {
                $("#autobidConfirmation").empty().append(result);
            },
            type: "POST"
        });
        return false;
    });
});
</script> 
```

旨在加载结果，这是父页面中 div 中的部分视图。

问题是数量始终为 0（默认值），并且在调用脚本内的函数时永远不会更新。

知道该做什么或看什么吗？

谢谢，

更新：这是生成的 html 和控制器方法

```
<fieldset>
   <input id="AuctionId" type="hidden" value="3" name="AuctionId">
   <input id="AuctionEventId" type="hidden" value="1" name="AuctionEventId">
   <div class="lotdetail-maxbid-row">
      <input id="Amount" class="radius2 text-box single-line valid" type="text" value="0" name="Amount">
   </div>
  <input id="autobidButton" class="btn btn-level2 btn-maxbid " type="submit" value="Increase Max bid">
</fieldset>

public ActionResult AutobidConfirmationPartial(int auctionEventId, int auctionId, decimal amount)
    {
        var incorrectAmount = false;
        var correctedAmount = amount;
        if (!CheckMaxBidFitsIncrementTier(amount, auctionEventId))
        {
            incorrectAmount = true;
            correctedAmount = CalculateNextBidAmountForWrongMaxAmount(amount, auctionEventId); ;
        }

        var model = new BidOnAuctionViewModel
        {
            AuctionEventId = auctionEventId,
            AuctionId = auctionId,
            Amount = correctedAmount,
            IncorrectAmount = incorrectAmount,
        };
        //TotalPriceBreakdown(ref model, null);
        return PartialView("BidConfirmationPartial", model);
} 
```

# map - 如何使用 d3 创建世界的 choropleth？

> ID：13094907
> 
> 赞同：12
> 
> 时间：2012-10-26T21:49:02.443
> 
> 标签：map, d3.js

[本教程](http://mbostock.github.com/d3/ex/choropleth.html)是使用 d3 创建 choropleths 的一个很好的介绍，但它的数据是以美国为中心的。我在哪里可以获得世界地图的相应数据？

我确定它在某个地方的文档中，但我找不到它。[这](https://github.com/mbostock/d3/wiki/Geo-Projections)是我找到的最接近的，但那里的一张世界地图明确表示不建议将其用于 choropleths。还，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T04:31:42.907

**注意：这个答案是为 d3 的第 2 版编写的。第 3 版现已发布，它具有很棒的新功能，可以创建更好的几何分割并解决下面提到的填充问题。此外，用于设置投影的界面_*可能*_在 V3 中已更改（不确定我还没有尝试过）。**

有一个适用于整个世界的 json 文件，您可以将其等效为 us-states.json coropleth（使用 Albers 等面积投影）——假设您了解（并且可以接受）Albers 投影的事实世界地图看起来像[这样](http://mathworld.wolfram.com/AlbersEqual-AreaConicProjection.html)，这并不是大多数人识别世界地图的方式。

首先，您需要[整个世界的 json 数据，这与](https://raw.github.com/mbostock/d3/master/examples/data/world-countries.json)[世界墨卡托投影示例](http://bl.ocks.org/2869760)使用的数据相同。

然后您需要使用自定义的 Albers 投影来渲染世界 json 数据：

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>Mercator Projection</title>

<style>
  path {
    fill: #ccc;
    stroke: #fff;
  }
</style>

<svg width="960" height="500"></svg>

<script src="http://d3js.org/d3.v2.js?2.9.1"></script>
<script type="text/javascript">
  d3.json("world-countries.json", function(collection) {
    d3.select("svg").selectAll("path")
        .data(collection.features)
      .enter().append("path")
        .attr("d", d3.geo.path().projection(
          d3.geo.albers()
            .parallels([10, 80])
            .origin([0,40])
            .translate([500,250])
            .scale(100)
        ));
  });
</script> 
```

`origin()`, `parallels()`, `translate()`, 和`scale()`值可以调整以获得不同的结果。

南极洲有一个问题，由于这种投影的性质，它会“翻转”并且不是封闭的形状，因此它的填充覆盖了整个世界。您要么必须将其从 json 中删除，要么不对其应用填充。

同样由于某种原因，当我尝试此操作时，巴西（以及其他几个）没有正确渲染。不知道为什么。您必须检查 svg 和数据才能找出原因。

# jquery - 如何使用 twitter bootstrap 和 zf2 action？

> ID：13094911
> 
> 赞同：1
> 
> 时间：2012-10-26T21:49:13.503
> 
> 标签：jquery, twitter-bootstrap, zend-framework2

我有一个来自数据库的一些表数据的视图，我需要添加带有弹出对话框的按钮以在表单中编辑它，该按钮：

```
<a class="btn" data-toggle="modal" href="<?php
  echo $this->url('admin', array(
      'action' => 'manage',
      'controller' => 'settings-api',
      'id' => $formdata['id'])); ?>"
  data-target="#edit_modal">Edit</a> 
```

弹出容器：

```
<div class="modal hide fade" id="edit_modal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Edit form</h3>
    </div>
    <div class="modal-body">
    </div>
</div> 
```

在控制器动作中，我有这样的事情：

```
if ($this->request->isXmlHttpRequest()) 
    $view->setTerminal(true); 

$id = $this->getEvent()->getRouteMatch()->getParam('id');
$form->setData($data[$id]);
return $view->setVariables(array('form' => $form)); 
```

当我点击按钮时，我有一个弹出窗口，萤火虫告诉我，我有一个我需要的带有 id 的 GET 操作，但是如果我在没有 postig 数据的情况下关闭弹出窗口并再次点击另一个带有另一个 id 的按钮，我没有请求不再采取行动，我刚刚弹出旧数据
有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:50:17.830

我从远程服务器使用了 jquery，当我下载它并从我的服务器本地连接它时，它可以工作，但为什么它与 romote 一起工作？如果我想设置它仍然有效

```
$form->setData($apiClient[$this->getEvent()->getRouteMatch()->getParam('id')]);
return $view->setVariables(array('form' => $form)); 
```

只是与`var_dump($form);`

# php - Mysql从table1中选择其中row1等于php中table2中的row1？

> ID：13094912
> 
> 赞同：1
> 
> 时间：2012-10-26T21:49:16.673
> 
> 标签：php, html, mysql

好的，所以我似乎无法让它工作，但这是我不想做的。我有两张

这样的桌子

```
Table1
----------
Row1 
```

和这个

```
Table2
----------
Row2 
```

我想从 Table1 中获取数据，其中 Row2 等于“thisvalue”，在 php 中。知道我应该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:50:19.723

你把桌子连在一起

```
SELECT table1.* FROM table1 t1 JOIN table2 t2 ON t1.row1 = t2.row2 
```

如果您只想要具有特定 rw2 值的行，则可以在 WHERE 子句中指定

```
SELECT table1.* FROM table1 t1 JOIN table2 t2 ON t1.row1 = t2.row2 where t2.row='your value' 
```

# ruby-on-rails - Select attributes from #create

> ID：13094915
> 
> 赞同：1
> 
> 时间：2012-10-26T21:49:45.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

I'm creating an object:

```
artist = Artist.create(:name => "Jbeebs",
                       :genre => "bestmusicever", 
                       :plays => "toomany") 
```

I would like the variable `artist` to only have the `name` and `genre` attributes so I can return `artist.name` and `artist.genre`, but nothing else.

Is there something like select for creates?

I have an array of artists and would like to return only name and genre of each when I'm outputting JSON.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:03:58.713

You can do this by overloading the `to_json` method in `Artist`

```
def to_json(options = {})
  { name: name, genre: genre }.to_json(options)
end 
```

When you cast the method to JSON, it will appear as a JSON object without `:plays` included.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:06:57.303

When you output the json, just parse through your artists and create a new object to convert to json:

```
json_array = []
artists.collect{|artist| json_array << {name: artist.name, genre: artist.genre}}
json_array.to_json 
```

Otherwise if you always want artists output in json with just those two attributes, use Deefour's answer.

# facebook - 时间线上的 Facebook 帖子

> ID：13094917
> 
> 赞同：0
> 
> 时间：2012-10-26T21:50:04.817
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

Twitter 有一个非常简单的 API，用于鼓励用户根据网络意图发布推文。[看这里。](http://www.google.com/url?sa=t&rct=j&q=twitter%20web%20intents&source=web&cd=1&cad=rja&ved=0CBwQFjAA&url=https%3A%2F%2Fdev.twitter.com%2Fdocs%2Fintents&ei=NwSLUObaBeeU2wXdtoHQDA&usg=AFQjCNFx079zUtc2W9dp-zScnF6Pw_N-hA)

Facebook 有类似的吗？如果是这样，它是什么？我基本上需要的是让用户能够将消息从我的网站发布到他们的时间线或朋友的时间线，而 facebook 本身会处理登录身份验证的东西。所以用例是：1）用户点击帖子链接，恰好在他的浏览器上登录到FB，FB将他们带到他们的时间线，文本已经粘贴到他们的状态更新框中；或 2) 与 1 相同，但对于以前没有登录过的用户有一个中间登录步骤。

如果有人有任何想法，请告诉我！

谢谢。

# python - 将字符串列表转换为空格分隔的字符串

> ID：13094918
> 
> 赞同：8
> 
> 时间：2012-10-26T21:50:07.200
> 
> 标签：python, string, list

我使用下划线来表示未知单词的长度。如何只打印下划线而没有代表列表的括号？

基本上，如果我有一个表单列表`['_', '_', '_', '_']`，我想打印下划线而不用列表语法打印它们`"_ _ _ _"`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-26T21:51:36.930

这对你有用吗

```
>>> my_dashes = ['_', '_', '_', '_']
>>> print ''.join(my_dashes)
____
>>> print ' '.join(my_dashes)
_ _ _ _ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:07:15.230

```
In [1]: my_dashes = ['_', '_', '_', '_']

In [2]: str(my_dashes).translate(None, '[],\'')
Out[2]: '_ _ _ _' 
```

在 deletechars 字符串中添加一个额外的空格以将破折号放在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:26:17.510

前面提到的`join`解决方案（如下一行）是一个合理的解决方案：

```
print ''.join(['_', '_', '_', '_'])
____ 
```

但还要注意，您可以使用它`reduce()`来完成这项工作：

```
print reduce(lambda x,y: x+y, ['_', '_', '_', '_'])
____ 
```

之后`import operator`可以说：

```
print reduce(operator.add, ['_', '_', '_', '_'])
____ 
```

# parameters - 即时更新 Simulink Block？

> ID：13094919
> 
> 赞同：3
> 
> 时间：2012-10-26T21:50:11.723
> 
> 标签：parameters, block, simulink, on-the-fly, xpc-target

有什么方法可以*即时更改 Simulink 中*模块的参数？该模型在 xPC-Target 上编译和运行。我确实有一个子系统（实际上是很多子系统），并且想从几个 xml 文件中加载参数并填充模型（在外部触发之后）。

当前状态是连接这些值而不是使用封装参数，但模型变得庞大且难以维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:19:21.387

我知道对于独立模型，您可以通过使用 sim 函数（[http://www.mathworks.com.au/help/simulink/slref/sim.html](http://www.mathworks.com.au/help/simulink/slref/sim.html)）从 MATLAB 调用您的 simulink 模型来做到这一点我假设这会xPC-Target 也是一样的，我当然在 RTW 上看到过类似的事情。

[simulink 博客在http://blogs.mathworks.com/seth/2008/02/26/welcome/](http://blogs.mathworks.com/seth/2008/02/26/welcome/)上有很好的解释

# android - android服务生命周期延续

> ID：13094926
> 
> 赞同：2
> 
> 时间：2012-10-26T21:50:40.510
> 
> 标签：android, android-intent, broadcastreceiver

在 mainactivity 中，我有广播接收器、待定意图和警报管理器。它根据选定的时间触发（System.currentTimeMillis() + smstimeinmilliseconds）。

```
Intent intent = new Intent(this, DBBroadcastReceiver.class);
intent.putExtra("message", message);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, id, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + smstimeinmilliseconds, pendingIntent); 
```

在选定的时间，这个待处理的意图会触发广播接收器。

```
public class DBBroadcastReceiver extends BroadcastReceiver 

@Override
public void onReceive(Context context, Intent intent)
{
message = intent.getStringExtra("message");

} 
```

我可以在活动中设置消息并在警报管理器中设置时间。每件事都完美无瑕。我可以激活和停用它。但是，如果我将来设置几个警报管理器并重新启动我的手机。所有警报管理器都销毁.​​.....

请按步骤和顺序告诉我如何处理活动、广播接收器以及我是否需要服务，如果是，那么我该如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:12:57.317

您需要在启动时调用 BoradcastReceiver。

然后你需要在你的清单中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver
    android:name=".broadcasts.YourBroadcastReceiverName">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

而这个广播接收器需要重新安排所有的警报。就像是 ：

```
public class YourBroadcastReceiverName extends BroadcastReceiver {

    private AlarmManagerFacade alarmManager;

    @Override
    public void onReceive(Context context, Intent intent) {

        // Retreive data related to alarms
        Cursor cursor = context.getContentResolver().query(Alarm.CONTENT_URI, null,
                Alarm.COLUMN_ACTIVE + " = ? ",
                new String[] { String.valueOf(1) }, "");

        if (cursor.moveToFirst()) {

            // Schedule all the active alarms.
            alarmManager = new AlarmManagerFacade(context);
            do {
                // TODO : Schedule alarm according to data in cursor.
            } while (cursor.moveToNext());
        }
        cursor.close();
    }
} 
```

（此代码来自我的一个应用程序，某些对象在 Android SDK 中不可用）

为了能够重新安排所有警报，您需要将**它们存储在**某个地方。

例如，您可以编写自己的[ContentProvider](https://developer.android.com/reference/android/content/ContentProvider.html)。

*   由于[CursorAdapter](https://developer.android.com/reference/android/widget/CursorAdapter.html)小部件，它可以与其他 android 组件很好地配合使用。
*   这不是最简单的解决方案，但如果您想遵循 android 指南，这就是您要走的路。

可能还有其他更简单的替代方法来存储您的警报，例如[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)。

*   它很容易使用。
*   但是您需要设法以友好的方式存储多个警报。

最后一种选择是您可以创建一个包含信息的对象，将其序列化并将其作为文件存储在 SD 卡上。

*   它丑陋且不灵活。
*   但实施起来并不难...

如果您想仔细查看每个存储选项，可以在此处的文档中阅读：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

我希望这一切对你有所帮助。:)

# google-app-engine - 在 Eclipse Juno 中添加 FreeBase API 失败

> ID：13094929
> 
> 赞同：0
> 
> 时间：2012-10-26T21:50:50.303
> 
> 标签：google-app-engine, freebase

我有一个新的 Google App Engine 项目（1.7.3）并希望通过 GPE 工具添加 FreeBase API --> 添加 Google API。

我有一个较旧的项目，我成功下载了导致这个类路径条目的 API：

```
<classpathentry kind="con" path="com.google.gdt.eclipse.managedapis.MANAGED_API_CONTAINER/freebase-v1r10lv1.7.2-beta"/> 
```

eclipse 的 .log 告诉我：

```
MESSAGE IO error while downloading http://api-directory.googleapis.com/5935/download-apiary/freebase/v1?lang=java&dependencies=1
!STACK 0
java.io.IOException: Server returned HTTP response code: 502 for URL: http://api-directory.googleapis.com/5935/download-apiary/freebase/v1?lang=java&dependencies=1
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.URL.openStream(Unknown Source)
    at com.google.gdt.eclipse.core.jobs.DownloadRunnable.run(DownloadRunnable.java:81)
    at com.google.gdt.eclipse.managedapis.platform.ManagedApiInstallJob.run(ManagedApiInstallJob.java:190)
    at com.google.gdt.eclipse.managedapis.ui.ApiImportWizard$2.execute(ApiImportWizard.java:145)
    at org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:106) 
```

当我尝试使用浏览器访问 URL 时，也会出现 502 错误。

我尝试添加另一个 API，即书籍 API，效果很好，但我想使用 FreeBase API。我收到 API 列表中可用的首选选项和沙盒选项的错误。

# android - 我如何才能知道 Android 上的 SQLite 引擎花费了多少时间？

> ID：13094931
> 
> 赞同：2
> 
> 时间：2012-10-26T21:50:58.640
> 
> 标签：android, performance, sqlite, profiling

当我们进行一批数据库更新时，我们正在尝试追踪应用程序中的性能问题。在 Eclipse 中使用 Android DDMS Profiler 似乎只显示了在 java 代码中花费的 CPU 时间，它似乎不包括在 SQLite 引擎中花费的时间。这使得很难确定所有挂钟时间都花在了哪里。

有没有办法找出在各种 SQLite 引擎调用中花费了多少时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:24:58.020

Android 的 SQLite 包装器不公开诸如[进度回调](http://www.sqlite.org/c3ref/progress_handler.html)之类的辅助函数；您可以做的最好的事情是使用时间戳功能手动包装您的应用程序中的所有引擎调用。

# java - 如何在一个 JFrame 中切换到 JPanel？

> ID：13094932
> 
> 赞同：0
> 
> 时间：2012-10-26T21:50:59.600
> 
> 标签：java, jframe, jlabel

我正在写一个俄罗斯方块游戏。当应用程序启动带有“播放”按钮的 Jlabel 时，将打开。如何在现有 Jframe 中切换到不同的标签（Board）？

像这样它直接打开游戏。但首先我想使用 ButtonPage 类来显示一些带有按钮的欢迎屏幕，然后调用游戏。

```
 public class Tetris extends JFrame {

    public Tetris(){

        // JFrame Properties
        setSize(198, 409);  
        setResizable(false);
        setTitle("Tetris");
        setDefaultCloseOperation(EXIT_ON_CLOSE);

//        ButtonPage buttons = new ButtonPage();
//        add(buttons);
//        buttons.setOpaque(true);

        Board board = new Board(this);
        add(board);
        board.start();

    } // end of constructor 
    public static void main(String[] args){

        Tetris game = new Tetris();
        game.setLocationRelativeTo(null);        
        game.setVisible(true);        
        game.setLayout(null);
    } // end of main

} // end of class 
```

**这是 ButtonPage 类。**

```
public class ButtonPage extends JPanel implements ActionListener{

    JButton buttonPLAY = new JButton();
    JLabel backgroundImage = new JLabel();

    public ButtonPage(){  

        setLayout(null);

        ImageIcon buttonIcon = new ImageIcon(getClass().getResource("PlayButton.png"));
        ImageIcon buttonIconHover = new ImageIcon(getClass().getResource("PlayButtonHover.png"));
        ImageIcon buttonIconClicked = new ImageIcon(getClass().getResource("PlayButtonClicked.png"));
        int buttonHeight = buttonIcon.getIconHeight();
        int buttonWidth = buttonIcon.getIconWidth();

        buttonPLAY.addActionListener(this);
        buttonPLAY.setActionCommand("Play"); 
        buttonPLAY.setIcon(buttonIcon);
        buttonPLAY.setRolloverIcon(buttonIconHover);
        buttonPLAY.setPressedIcon(buttonIconClicked);
        buttonPLAY.setBorderPainted(false);        

        add(buttonPLAY);

        Dimension size2 = getSize();         
        Dimension size = buttonPLAY.getPreferredSize();
        buttonPLAY.setBounds((192 - buttonWidth)/2, 100 ,buttonWidth, buttonHeight);

    }// end of constructor

    @Override
    public void actionPerformed(ActionEvent e) {
        if ("Play".equals(e.getActionCommand())) {

        Tetris game = new Tetris();        
        // opens the window in the middle of the screen
        game.setLocationRelativeTo(null);
        // set the tetris window visible, unless its true - its invisible DUH!
        game.setVisible(true);        
        game.setLayout(null);

        }
    } // end of actionPerformed

}// end of class 
```

使用 actionPerformed 方法，我可以在新框架中打开游戏，但我不知道如何切换面板。

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:56:11.990

俄罗斯方块是从 main 中提取出来的，下面的行来自 actionPerformed()：

```
Tetris game = new Tetris(); 
```

实例化第二个俄罗斯方块，这真的是你想要的吗？

要将多个面板添加到一个框架，一次只能看到一个，请使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:56:38.497

您是否尝试过卡片布局？

[http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# ruby - 我怎样才能让这个红宝石代码抛出异常并保释？

> ID：13094937
> 
> 赞同：3
> 
> 时间：2012-10-26T21:51:30.200
> 
> 标签：ruby, exception

我希望这会引发异常并死掉：

```
begin
  if meridian != "AM" and meridian != "PM"
    rescue
    puts MESSAGE
  end
end 
```

我用谷歌搜索了很多，但似乎没有任何效果。我想要一个`if`语句在失败时抛出异常。

我看错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:59:13.687

试试这个：

```
raise "message" unless ["AM", "PM"].include? meridian 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:28:28.553

您还可以使用正则表达式：

```
raise 'message' unless meridian =~ /\A(a|p)m\z/i 
```

这与大小写无关，也适用于符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:56:27.307

恕我直言，出于可读性问题，您应该使用`fail`而不是 raise，请参阅下面的链接。

```
fail "message" unless ["AM", "PM"].include? meridian 
```

[https://github.com/bbatsov/ruby-style-guide#exceptions](https://github.com/bbatsov/ruby-style-guide#exceptions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:57:33.010

删除`begin`/ `rescue`/或替换`end`为`if``puts MESSAGE``raise "some_message_here"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T21:59:09.770

您不需要`begin`/`rescue`因为您的`if`语句没有遇到任何错误。反而：

```
 raise "message" if meridian != "AM" and meridian != "PM" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-27T23:05:44.530

这行得通

```
 MESSAGE = "Check your formatting"
      if meridian != "AM" and  meridian  != "PM"
          abort( MESSAGE )
      end 
```

# python - 如何从在 PyQt4 中保持焦点的子小部件传递菜单快捷方式？

> ID：13094938
> 
> 赞同：0
> 
> 时间：2012-10-26T21:51:34.317
> 
> 标签：python, qt4, pyqt4, qt4.8

我有一个带有菜单栏的[QMainWindow ，包括使用常用快捷方式保存、打开和退出的菜单项。](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qmainwindow.html)它创建了一个 QTableWidget，其中列出了用户可以选择的一堆不同类别（由他选择）。

如果用户单击[QTableWidget](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtablewidget.html)以更改类别，则该小部件将获得焦点。这主要是我想要的，但不幸的是，它似乎*也*窃取了菜单快捷方式，因此按下 Ctrl+S 不再触发保存。

我尝试`keyPressEvent`解决这个问题，但即使我确实让它工作，它似乎也有点过头了。没有办法将所有控制/菜单键委托给**QMainWindow**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:20:03.367

您如何创建`QMenuBar`. 这是一个对我来说很好的例子。无论焦点在表格中，保存都会继续运行：

```
class Window(QtGui.QMainWindow):

    def __init__(self):
        super(Window, self).__init__()
        self.resize(640,480)

        menuBar = self.menuBar()
        menu = menuBar.addMenu("&File")
        action = menu.addAction("&Save", self.doAction)
        action.setShortcuts(QtGui.QKeySequence.Save)

        self.view = QtGui.QTableWidget(5,5)
        self.setCentralWidget(self.view)

    def doAction(self):
        print "Save" 
```

# python - 在 Spyder 中切换到 Python 3.x

> ID：13094941
> 
> 赞同：25
> 
> 时间：2012-10-26T21:51:57.673
> 
> 标签：python, spyder

默认情况下 Spyder 使用 Python 2.7.2，我的问题是：有没有办法设置 Spyder 以便它自动使用 Python 3.x？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-12T14:19:29.193

自 2013 年 5 月结束以来，Spyder 的 v2.3.0dev1 版本适用于**Python 3.3 及更高**版本。
它处于可用状态，但存在一些小问题。希望他们能很快得到解决。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-18T20:01:14.313

要使用 Spyder for Python 3，您只需要 v2.3.0 或更高版本。

**Ubuntu 12.10 及更高版本**

您可以使用`pip3`.

```
sudo apt-get install python3-pip python3-pyqt4
sudo pip3 install spyder 
```

**Ubuntu 12.04**

Ubuntu 12.04 在存储库中没有`python3-pip`，但您可以使用`setuptools`,

```
sudo apt-get install python3-pyqt4 python3-setuptools
sudo easy_install3 pip
sudo pip3 install spyder 
```

然后，您可以从启动器（注销并登录后）或从终端输入`spyder3`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-03T09:23:55.953

**Ubuntu 16.04**

加勒特的解决方案对我不起作用。Pip 已安装，但运行“安装 spyder”命令不会使用 Python3.5 安装 spyder。我卸载了spyder。

有效的方法很简单：

```
sudo apt-get install spyder3 
```

这也将自动安装任何 Python 3.x 依赖项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-27T00:12:46.160

在提出这个问题时，Spyder 不支持 Python 3（这个答案是这样说的，给出了当时不完整的移植工作的一些细节）。

但现在不是这样了！Spyder 的最新版本应该与 Python 3 一起使用。查看其他答案以获取一些获取它的位置的链接（尽管此时它们本身可能已经过时）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-20T10:13:42.620

在 Ubuntu 14.04 上，我在官方存储库中找到了 spyder3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-24T15:18:44.407

另一种选择：使用 Anaconda 来管理您的科学软件。
有一个专门用于 Python 3.5 的安装程序 [https://www.continuum.io/downloads](https://www.continuum.io/downloads)

# osx-lion - 窗口无法进入全屏模式

> ID：13094945
> 
> 赞同：4
> 
> 时间：2012-10-26T21:52:51.650
> 
> 标签：osx-lion, fullscreen

`NSWindow`无法进入全屏并出现以下错误：

> -[_NSWindowFullScreenTransition makeAndSetupOverlayWindow] 中的断言失败，/SourceCache/AppKit/AppKit-1138.47/AppKit.subproj/NSWindowFullScreenTransition.m:696 2012-10-26 14:42:49.171 Mitel UCC[1043:f03] 无效参数不满足：_transitionedWindowBeforeContents != 无

“进入全屏”菜单选项现在也被禁用。

这在菜单选项和窗口右上角的图像中都起作用，然后突然停止工作（我们仍在编码）。注意我确实收到了`customWindowsToEnterFullScreenForWindow`委托通知（它返回 nil），但没有看到`windowDidFailToEnterFullScreen`通知。

在此先感谢您的任何建议。

# android - Android parseDouble 在应该抛出 NumberFormatException 时返回 Infinity

> ID：13094950
> 
> 赞同：3
> 
> 时间：2012-10-26T21:53:18.383
> 
> 标签：android, parsing, double

我正在尝试确定 a 是否`String`代表 a `Double`。我希望下面的代码抛出一个`NumberFormatException`：

```
String s = "type1234";

try {
    Double val = Double.parseDouble(s);
} catch (NumberFormatException e) {
    // Handle exception
    e.printStackTrace();
} 
```

相反，`val`以`Infinity`. 我在标准 JVM 中运行代码，它确实抛出了`NumberFormatException`

看起来 Android 忽略了前导字符 'typ'，然后将其解析为 e^1234，这超出了`Double`' 范围。

这是预期的行为吗？如果是这样，确定 a 是否`String`可以解析为 a的更可靠方法是`Double`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:02:34.220

如果您不信任该框架，请使用正则表达式来验证自己。这是执行此操作的一种方法的示例。

```
 // You can get much fancier than this to handle all cases, but this should handle most
    String regexDouble = "^-?\\d*(\\.\\d+)?$";
    boolean isDouble = val.matches(regexDouble); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:13:55.810

[检查字符串是否可以在 Java 中解析为 Double 的最快方法](https://stackoverflow.com/questions/8564896/fastest-way-to-check-if-a-string-can-be-parsed-to-double-in-java)

这篇文章的答案适用于android。我已经在 ICS 上进行了测试。

# forms - 在输入表单上显示浮点数

> ID：13094952
> 
> 赞同：0
> 
> 时间：2012-10-26T21:53:30.800
> 
> 标签：forms, cakephp

我对 CakePHP 游戏相当陌生，需要一些关于如何解决一个看似简单的问题的见解。在我的新工作中，我继承了一些使用该框架的内部网站，并且正在努力仅靠 Google 来解决这个问题。

我所拥有的是一个视图，它加载一个表单并用数据库中已有的数据填充它。有三个字段具有此行为并且都具有相同的问题。

这些字段在视图上声明为：

```
echo $this->Form->input('hotel_costs');
echo $this->Form->input('misc_costs'); 
```

在数据库中，它们被声明为`float`DataTypes，因此，当加载到浏览器时，有时会显示为浮点数：（15.7 变为 15.699999999...）

环顾四周，似乎有像 NumberHelper 这样的助手能够解决我的问题，但我不知道如何将功能包含在表单值中。我完全看错地方了吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:06:33.420

您可以尝试强制输入[type=text]，以便蛋糕不会尝试猜测输入类型。

```
$this->Form->input('hotel_costs', array(
   'type' => 'text'
));
$this->Form->input('misc_costs', array(
   'type' => 'text'
)); 
```

如果这仍然不起作用，请回复更多详细信息。

1.  哪个控制器操作（添加/索引/编辑）？
2.  该操作的代码
3.  `var_dump()`来自数据库的数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T22:20:18.510

它与强制输入类型为文本无关。您是说您不希望该字段中的浮点值，但您想要一个四舍五入（到小数位数）的数字吗？它必须全面适用。你有自定义视图还是烘焙视图？（我会问这些作为对您问题的评论，但我的代表不够高。）

# c# - 带有NHibernate Criteria的HAVING子句中的多个条件？

> ID：13094955
> 
> 赞同：5
> 
> 时间：2012-10-26T21:53:49.307
> 
> 标签：c#, mysql, nhibernate, nhibernate-criteria, having-clause

我正在尝试使用 NHibernate 的 Criteria API 来编写与此等效的内容：

```
select foo_id from foo_history
group by foo_id
having sum(bar_in) > 0 or sum(baz_in) > 0; 
```

使用此映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MVC"
                   namespace="MVC.Model.Things">
  <class name="MVC.Model.Things.FooHistory, MVC"
         table="foo_history">
    <id name="ID" column="foo_hist_id" type="guid"
        unsaved-value="00000000-0000-0000-0000-000000000000">
      <generator class="guid.comb" />
    </id>

    <!-- Properties -->
    <property name="BarIn" column="bar_in" type="decimal"
              precision="19" scale="4" not-null="true" />
    <property name="BazIn" column="baz_in" type="decimal"
              precision="19" scale="4" not-null="false" />

    <!-- Foreign Keys -->
    <many-to-one name="Foo" column="foo_id"
                 class="MVC.Model.Things.Foo, MVC.Model.Things"
                 not-null="true" />
  </class>
</hibernate-mapping> 
```

和这个标准代码（分离，因为它将是一个子查询）：

```
var results = DetachedCriteria.For<FooHistory>("fh")
    .SetProjection(Projections.ProjectionList()
        .Add(Projections.GroupProperty(Projections.Id()))
        .Add(Projections.Sum("fh.BarIn"))
        .Add(Projections.Sum("fh.BazIn")))
    .Add(Restrictions.Gt(Projections.Sum("fh.BarIn"), 0) ||
        Restrictions.Gt(Projections.Sum("fh.BazIn"), 0))
    .GetExecutableCriteria(session).List(); 
```

`SetProjection()`问题是在 NHibernate 生成无效 MySQL的结果之后添加条件限制：

```
SELECT this_.foo_hist_id as y0_,
       sum(this_.bar_in) as y1_,
       sum(this_.baz_in) as y2_
FROM foo_history this_
WHERE (sum(this_.bar_in) > ?p0
       or sum(this_.baz_in) > ?p1)
GROUP BY this_.foo_hist_id 
```

...使用 WHERE 而不是 HAVING。使用单个限制可以正常工作，并且一切都是正确的。我假设由于 HN-1280（“向 CreateCriteria 查询添加 HAVING 支持，修复参数顺序错误”）这是可能的，但我没有使用正确的“OR”语言（例如，`Restrictions.Disjunction()`总是创建 WHERE）。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T19:40:34.730

我遇到了这个问题，但是我认为我的解决方法不是很好，因为它不起作用，例如当您需要 ToRowCountQuery() 进行分页时。但无论如何......你可以使用这个类而不是内置的 OrExpression

```
class OrHaving : OrExpression
    {
        public OrHaving(ICriterion lhs, ICriterion rhs) : base(lhs, rhs)
        {
        }

        public override IProjection[] GetProjections()
        {
            return LeftHandSide.GetProjections().Concat(RightHandSide.GetProjections()).ToArray();
        }
    } 
```

喜欢

```
.Add(new OrHaving (Restrictions.Gt(Projections.Sum("fh.BarIn"), 0) ,
                   Restrictions.Gt(Projections.Sum("fh.BazIn"), 0))) 
```

# wso2 - WSO2 ESB：将 XML 转换为 JSON 并发送到端点

> ID：13094958
> 
> 赞同：1
> 
> 时间：2012-10-26T21:54:17.610
> 
> 标签：wso2, wso2esb, wso2carbon

我无法将传入的 SOAP Payload 转换为 JSON 并将其发送到 Endpoint。

有人这样做过吗？如果是这样，你能分享一下你是怎么做的吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:20:34.003

You can use XSLT transformation to achieve the task. Here is a [sample](http://synapse.apache.org/userguide/samples/sample158.html) which will guide you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T19:50:31.823

使用 payloadFactory 调解器。 [https://docs.wso2.com/display/ESB481/PayloadFactory+Mediator](https://docs.wso2.com/display/ESB481/PayloadFactory+Mediator)

您必须添加以下行才能将 XML 有效负载转换为 JSON

```
 <property name="messageType" value="application/json" scope="axis2" /> 
```

下面的一些示例。

```
<payloadFactory media-type="json">
        <format>
            {
            "userIdentifier": {
                "id": "$1"              
            }
            }
        </format>
        <args>
            <arg expression="get-property('uri.var.id')"></arg>
        </args>
    </payloadFactory>

<property name="messageType" value="application/json" scope="axis2" /> 
```

# .net - 在 DataGridView 中显示 SQL 结果的问题

> ID：13094959
> 
> 赞同：1
> 
> 时间：2012-10-26T21:54:20.613
> 
> 标签：.net, sql, database, vb.net, datagridview

我试图在我的应用程序的数据网格视图中显示 SQL 查询的结果。以下代码是我编写的，但它似乎与我所做的无关，我无法在表单的 datagridview 中显示任何内容。谁能指出我正确的方向？

代码：

```
 Sql = "SELECT * FROM jobList WHERE techID = " & TechScreenID & ""

    connection = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source =   C:\Users\Dave\Documents\joblist.mdb;"
    con.ConnectionString = connection
    con.Open()
    Dim adapter As New OleDbDataAdapter(Sql, connection)
    Dim results As New DataTable("result")
    adapter.Fill(results)
    con.Close()
    dgwTechStatus.DataSource = results 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:03:52.957

您需要将 datagridview 的“autogeneratecolumns”属性设置为 true，或者将特定的绑定列添加到您的 datagridview。

# mysql - 加密Mysql数据库存储在磁盘上的文件

> ID：13094965
> 
> 赞同：1
> 
> 时间：2012-10-26T21:54:51.960
> 
> 标签：mysql, encryption, database

Mysql 是否可以加密其存储的文件（数据库方案和磁盘上的数据），使得某人无法将这些文件复制到另一台机器并使用他自己安装的 Mysql`root`用户读取它们？如果没有，是否有能够通过加密保护磁盘上的数据库存储文件的 DBMS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:01:48.480

不幸的是，MySQL 本身并不支持数据文件加密。

但是，那里有第 3 种产品，例如：

[http://www.vormetric.com/products/vormetric_database_encryption_expert.html](http://www.vormetric.com/products/vormetric_database_encryption_expert.html)

老实说，如果数据库内容具有任何商业价值或包含有关个人的个人数据，您应该真正控制谁可以访问数据文件（无论是否加密）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T06:51:52.473

要使用 Windows EFS 加密：

[http://windows.microsoft.com/en-us/windows/encrypt-decrypt-folder-file#1TC=windows-7](http://windows.microsoft.com/en-us/windows/encrypt-decrypt-folder-file#1TC=windows-7)

阅读更多关于它的信息：

[http://www.petri.co.il/how_does_efs_work.htm#](http://www.petri.co.il/how_does_efs_work.htm#)

！！！不要忘记导出证书！！！

如果您使用 Windows EFS 并将 MySQL 作为服务启动，则需要执行以下操作：

*   转到服务并找到 MySQL 服务
*   停止服务
*   右键单击-> 属性-> 登录选项卡
*   检查“此帐户”
*   填写您的 Windows 帐户名称，例如。“。\用户名”
*   提供您的密码
*   启动服务

MySQL 服务现在应该可以正常启动了。

# java - 从 ObjectInputStream 读取与写入 ObjectOutputStream 不同的 byte[]

> ID：13094966
> 
> 赞同：3
> 
> 时间：2012-10-26T21:54:53.157
> 
> 标签：java, stream, bytearray, objectoutputstream, objectinputstream

我对java有一个奇怪的问题。我想（除其他外）在 ObjectOutputStream 中写入一个 byte[] 并从那里写入一个新文件。该字节数组表示从磁盘读取的另一个文件。

稍后，在写入新创建的文件后，我想从该文件中读取。但是现在从 ObjectInputStream 读取的 byte[] 与写入的不同。

这就是我的问题：为什么那个 byte[] 不同？

为了清楚起见并让每个人都可以检查，我编写了一个简短的程序，它将准确地说明我的意思：

```
import java.io.*;
import java.net.URL;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;
import java.security.MessageDigest;
import org.bouncycastle.util.encoders.Hex;

public class MyTest {

    public static void main(String[] args) throws Exception {

        // 1st step:
        // ------------------------------------------------
        byte[] data = openFile();

        // Create file to write
        FileOutputStream fos = new FileOutputStream(new File("test"));
        ObjectOutputStream oosf = new ObjectOutputStream(fos);
        // Write byte[]-length and byte[]
        oosf.writeInt(data.length);
        oosf.write(data);

        // Flush & Close
        fos.flush();
        fos.close();

        // Print hash value of saved byte[]
        try {
            final MessageDigest messageDigest = MessageDigest.getInstance("SHA-512");
            messageDigest.reset();
            System.out.println(new String(Hex.encode(messageDigest.digest(data))));
        } catch (Exception e) {
        }

        // 2nd step
        // ------------------------------------------------

        // Open just saved file
        FileInputStream fis = new FileInputStream(new File("test"));
        ObjectInputStream ois = new ObjectInputStream(fis);

        // Read the length and create a byte[]
        int length = ois.readInt();
        byte[] dataRead = new byte[length];
        // Read the byte[] itself
        ois.read(dataRead);

        // Print hash value of read byte[]
        try {
            final MessageDigest messageDigest = MessageDigest.getInstance("SHA-512");
            messageDigest.reset();
            System.out.println(new String(Hex.encode(messageDigest.digest(dataRead))));
        } catch (Exception e) {
        }

        // Both printed hash values should be the same

    }

    private static byte[] openFile() throws Exception {
        // Download a sample file which will be converted to a byte[]
        URL website = new URL("http://www.marcel-carle.de/assets/Cryptonify/Cryptonify-1.7.8.zip");
        ReadableByteChannel rbc = Channels.newChannel(website.openStream());
        FileOutputStream fos2 = new FileOutputStream("tmp");
        fos2.getChannel().transferFrom(rbc, 0, 1 << 24);
        fos2.flush();
        fos2.close();

        // Open downloaded file and convert to byte[]
        File selectedFile = new File("tmp");
        FileInputStream fis1 = new FileInputStream(selectedFile);
        byte[] data = new byte[(int) selectedFile.length()];
        fis1.read(data);
        fis1.close();

        return data;
    }
} 
```

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:03:14.217

你忽略了例外；您没有关闭正确的流；并且您假设它`read()`填充了缓冲区。使用`readFully()`. 您不是在编写对象，因此您不妨使用`DataInputStream`并`DataOutputStream`为此节省一点空间。

# jax-ws - JAXWS/OWSM：无法在任何 jar 中找到 SecurityPolicyFeature 类

> ID：13094967
> 
> 赞同：2
> 
> 时间：2012-10-26T21:54:55.987
> 
> 标签：jax-ws

我正在创建一个 JAX WS 客户端来调用 web 服务。通过企业管理器添加了一个 OWSM 安全策略 wss_username_token_service_policy。要将安全策略应用于客户端，我使用了以下代码：

```
weblogic.wsee.jws.jaxws.owsm.SecurityPolicyFeature[] securityFeature = new weblogic.wsee.jws.jaxws.owsm.SecurityPolicyFeature[] { new weblogic.wsee.jws.jaxws.owsm.SecurityPolicyFeature(
    "policy:oracle/wss_username_token_service_policy"
)}; 
```

但我无法在 weblogic.jar 中找到 SecurityPolicyFeature。weblogic.wsee.jws.jaxws.owsm 下只有一类“PolicySubjectBindingFeature”。我签入了 10.3.3、10.3.4 和 10.3.5。

你能告诉我哪个罐子里有 SecurityPolicyFeature 类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T10:55:38.600

此类在位于 $MIDDLEWARE_HOME/oracle_common/modules/ 的 ws.api_1.1.0.0.jar 中可用

问候，维克兰特·科德。

# windows - 从另一个批处理脚本调用批处理脚本

> ID：13094973
> 
> 赞同：0
> 
> 时间：2012-10-26T21:56:02.780
> 
> 标签：windows, batch-file, dos

好的，我发现了一些关于此的问题，但每个问题都说确保在第二个 bat 文件中使用`CALL`和`exit \b`或`goto eof`，但由于某种原因我没有让它工作，我都尝试过，批处理文件每次执行后都会退出第一个调用语句：

批处理文件 1 (myscript.bat):

```
:@echo off
del files
dir /B /O-D | find "test2" > tmp
dir /B /O-D | find "test3" > tmp2
CALL head 1 tmp > files
CALL head 1 tmp2 >> files 
```

头.bat：

```
@echo off

if [%1] == [] goto usage
if [%2] == [] goto usage

call :print_head %1 %2
goto :eof

REM
REM print_head
REM Prints the first non-blank %1 lines in the file %2.
REM
:print_head
setlocal EnableDelayedExpansion
set /a counter=0

for /f ^"usebackq^ eol^=^

^ delims^=^" %%a in (%2) do (
        if "!counter!"=="%1" goto :eof
        echo %%a
        set /a counter+=1
)

goto :eof

:usage
echo Usage: head.bat COUNT FILENAME 
```

执行：

> C:\Users\ots>myscript.bat
> 
> C:\Users\ots>del 文件
> 
> C:\Users\ots>dir /B /OD | 找到“test2”1>tmp
> 
> C:\Users\ots>dir /B /OD | 找到“test3”1>tmp2
> 
> C:\Users\ots>CALL head 1 tmp 1>文件
> 
> C:\用户\ots>

我怎样才能让它运行第二个“tmp2”呼叫线？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T22:21:04.520

您的代码很好，确实进行了两次调用。

问题是您在 head.bat 中将 echo 设置为 OFF，因此在第一次调用后，您的命令不会在控制台上得到回显，但这并不意味着文件没有被调用。

要验证这一点，请`@echo off`从 head.bat 中删除，您将看到第二个 CALL 命令。

# objective-c - 将 NSInteger 转换为 NSString 作为 5 位数字

> ID：13094977
> 
> 赞同：1
> 
> 时间：2012-10-26T21:56:38.997
> 
> 标签：objective-c, nsstring, nsinteger, stringwithformat

我有一个 int 并将其转换为 NSString ，如下所示：

```
NSString *myStr = [NSString stringWithFormat:@"%d",myInt]; 
```

myInt 的范围从 0 到 99999。我想要的是将 myStr 作为 5 位数字。

例如：00072 或 09856 或 00002

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T22:01:17.043

使用`%05d`格式说明符以填充零：

```
NSString *myStr = [NSString stringWithFormat:@"%05d", myInt]; 
```

[维基百科的解释。](http://en.wikipedia.org/wiki/Printf_format_string#Format_placeholders)

# html - HTML 选择样式

> ID：13094979
> 
> 赞同：1
> 
> 时间：2012-10-26T21:56:55.050
> 
> 标签：html, css, select, styles, onchange

我有这个按钮，它应该转到值中的页面，但是当我有 css 时它没有，没有它可以工作，但看起来很糟糕：

```
<form action="table.php" name="rows" method="POST">
    <select class="styledselect_pages" onchange="window.location.href = this.options[this.selectedIndex].value;">
    <option value="table.php?row=100">100</option>
    </select>
</form> 
```

这个CSS：

```
.styledselect_pages {
    background              :url(../images/table/select_number_rows.gif) left no-repeat;
    border                  :none;
    border-left             :none;
    color                   :#393939;
    cursor                  :pointer;
    display                 :block;
    font-family             :Arial;
    font-size               :12px;
    height                  :20px;
    line-height             :16px;
    margin                  :0px 0px 0px 0px;
    padding                 :4px 0 0 6px;
    text-align              :left;
    width                   :130px;
} 
```

为什么“Onchange”不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:40:40.197

无论样式如何，这都不起作用，因为默认情况下`select`只有一个`option`被选中。当您再次尝试选择它时， 中的值没有变化，`select`因此`onchange`不会触发事件。

实现这项工作的两种方法：

1.  `option`在`select`( `<option value=''>---</option>`)中添加一个虚拟对象
2.  更改`onchange`为`onblur`事件。

我更喜欢第一个选项，因为它在两者中更明智。此外，请考虑调用函数而不是使用内联 Javascript 代码。

`<select onchange='javascript:getrow(this.value);'>`

```
<script>
function getrow(no) {
    if (no!='')
        location.href = 'table.php?row='+no;
}
</script> 
```

# css - 如何将设计从流动变为固定

> ID：13094980
> 
> 赞同：0
> 
> 时间：2012-10-26T21:57:02.600
> 
> 标签：css, twitter-bootstrap, fixed

> **可能重复：**
> [twitter bootstrap，fluid vs fixed，然后添加响应式，它们是如何组合在一起的？](https://stackoverflow.com/questions/9780333/twitter-bootstrap-fluid-vs-fixed-then-add-in-responsive-how-does-it-all-fit-t)

这是我正在处理的设计的演示

[http://jsfiddle.net/U8HGz/1/show/#about](http://jsfiddle.net/U8HGz/1/show/#about)

但是这个设计是流动的..我怎样才能让这个设计成为固定的？

以下是页面的来源

```
 <html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> web page</title>

      <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">

  <style type='text/css'>
    body {
    padding-bottom: 40px;
    padding-top: 60px;
}

.sidebar-nav-fixed {
    padding: 9px 0;
    position:fixed;
    left:20px;
    top:60px;
    width:250px;
}

.row-fluid > .span-fixed-sidebar {
    margin-left: 290px;
}

  </style>

<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){

}//]]>  

</script>

</head>
<body>
  <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">

      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
      <div class="nav-collapse">
        <ul class="nav">

          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>
      </div><!--/.nav-collapse -->

    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row-fluid row">
    <div class="span3">
      <div class="well sidebar-nav-fixed">
        <ul class="nav nav-list">

          <li class="nav-header">Sidebar</li>
          <li class="active"><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li class="nav-header">Sidebar</li>

          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>

          <li class="nav-header">Sidebar</li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </div><!--/.well -->
    </div><!--/span-->

    <div class="span9 span-fixed-sidebar">
      <div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
      </div>
      <div class="row-fluid">

        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!--/span-->
        <div class="span4">
          <h2>Heading</h2>

          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!--/span-->
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>

        </div><!--/span-->
      </div><!--/row-->
      <div class="row-fluid">
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>

        </div><!--/span-->
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!--/span-->
        <div class="span4">

          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div><!--/span-->
      </div><!--/row-->
    </div><!--/span-->
  </div><!--/row-->

  <hr>

  <footer>
    <p>&copy; Company 2012</p>
  </footer>

</div><!--/.fluid-container-->

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:23:42.057

您在 HTML 中使用`container-fluid`和`row-fluid`类。
Bootstrap 文档专门解释了如何使用[默认](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)网格系统和[流体](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)网格系统；你想要默认，即`container`和`row`。

摘抄：

> 默认的 Bootstrap 网格系统使用 12 列，形成一个 940 像素宽的容器，没有启用响应功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:06:19.380

Twitter 引导程序旨在响应。如果您想更改它，您需要下载 css 并将其放在您的服务器上以便您能够修改它。之后逐步消除所有使您的网站调整大小的因素。比如百分比宽度（100% 除外）等等。

没有简单的解决方案。

# .htaccess - 将博客移至子域

> ID：13094981
> 
> 赞同：1
> 
> 时间：2012-10-26T21:57:07.910
> 
> 标签：.htaccess

所以我试图为我的困境实施一些解决方案，但它们都部分失败了。

我已将我的博客从 www.website.com/blog/ 移至 blog.website.com

blog.website.com 位于我的 Web 根目录之外的目录中

初始位置之后的所有 url 都是相同的：例如...旧站点 www.website.com/blog/wp-admin = blog.website.com/wp-admin

如果这有助于或有所作为，这是一个 wordpress 网站。

这就是我现在所拥有的。重定向主文件夹但不重定向子文件夹...

```
RewriteEngine on
RewriteBase / 

#if not already blog.website.com
RewriteCond %{HTTP_HOST} !^blog\.website\.com$ [NC] 
#if request is for blog/, go to blog.website.com
RewriteRule ^blog/$ http://blog.website.com/$1 [L,NC,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:00:23.287

你需要`(.*)`：

```
RewriteEngine on
RewriteBase / 

#if not already blog.website.com
RewriteCond %{HTTP_HOST} !^blog\.website\.com$ [NC] 
#if request is for blog/, go to blog.website.com
RewriteRule ^blog/(.*)$ http://blog.website.com/$1 [L,NC,R=301] 
```

# regex - 正则表达式仅在以字符结尾时才匹配字符串

> ID：13094985
> 
> 赞同：0
> 
> 时间：2012-10-26T21:57:42.113
> 
> 标签：regex, apache

我需要帮助创建正则表达式。以下是两个示例字符串：

```
/path/to/file.jpg
/path/to/file.type.jpg 
```

分别，我试图捕捉：

```
file.jpg
file.type.jpg 
```

但我想将这三个捕获为单独的字符串。

```
file,jpg
file,type,jpg 
```

请注意，我没有捕捉期间。我认为这样的事情可以工作（不包括新行）：

```
([a-z]+)\.
[([a-z]+)[\.]{1}]?
([a-z]{3}) 
```

指导将不胜感激。我想知道是否有另一个修改我需要使用它来正确捕获它。

顺便说一句，上面的表达式出错了:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:00:41.167

您可以使用：`"\/(?:\w+\/)+(\w+)\.?(\w+)?\.(\w+)"`作为正则表达式。

编辑：没有读到不匹配的点。

现场[演示](http://regexr.com?32jto)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:05:51.087

你必须使用： `/(\w+)(\.(\w+))?\.(\w+){3,4}\b`

然后捕获组 1、3 和 4 将是您的：file(1) type(3) 和 jpg/png whatever(4)

分开的组：

1.  `(\w+)` - 匹配单词字符 1 个或更多（相当于说：`{1, }`
2.  `(\.(\w+))?`- 匹配第 3 组并且前面有一个点，并使整个组可选 ( `?`)
3.  `(\w+)`- 作为 gr 1
4.  `(\w{3,4})\b`- 匹配 3 或 4 个单词字符 ( `{3,4}`) 并确保在这些字符之后没有其他字符（单词结尾 - `\b`- ！如果支持！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:19:45.623

这个正则表达式应该工作：

```
/(\w+)\.(\w+)(?:\.(\w+))?$/ 
```

[现场演示](http://www.rubular.com/r/qlcVUplDao)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T23:11:09.910

我建议你使用模式

```
\/([^.]+)\.?([^.]+|)\.([^.]+)$ 
```

您将有 3 个组：文件、类型（如果不存在，则为空）和扩展名

# wordpress - 如何让社交媒体图标在 WordPress 的新标签页或窗口中打开？

> ID：13094987
> 
> 赞同：1
> 
> 时间：2012-10-26T21:57:49.900
> 
> 标签：wordpress, tabs, icons, media, social

在多个网站上工作时，我发现您可以打开或关闭社交媒体图标，但它们都默认在同一个窗口中打开。有谁知道如何让它们在另一个选项卡或窗口中打开？如果是这样，我如何/在哪里进行这些更改。

在一个实例中，我使用 ShareThis 插件，在另一个实例中，我使用 Colorway WordPress 主题。我用谷歌搜索和谷歌搜索，似乎无法得到答案。

谢谢！贾克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:09:20.733

在小部件屏幕或插件设置中将有一个“在新窗口中打开链接”选项（通常是一个复选框）。

如果没有 - 不幸的是，必须使用 jQuery 之类的东西`$('a.social').attr('target', '_blank');`或在 php 中（插件 > 编辑器，或外观 > 编辑器） - 你必须找到类似`<a href="<?php get_option('facebook', 'share-this'); ?>"></a>`和 at的代码`target="_blank"`。

# php - 如何确保 php 脚本有足够的时间执行 MySQL 查询？

> ID：13094991
> 
> 赞同：0
> 
> 时间：2012-10-26T21:58:08.310
> 
> 标签：php, mysql, arrays, performance, sleep

我想给我的 php 脚本时间来检查查询。

我的周期：

1.  选择价值
2.  ---我想要（也许在这里？）一些延迟，睡眠或其他东西---
3.  MySQL SELECT 查询
4.  根据 SELECT 结果比较值

第 3 点和第 4 点理论上大约需要 2 秒。

PHP 会等到 SELECT 完成吗？

或者 php 会等待填充大数组吗？（多维，大约 250 * 5 * 2 个值..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:01:01.850

PHP 执行总是顺序的。你不需要有任何延误或睡眠。

# javascript - JS document.title 函数加载的标题标签不会更改源视图中的标题标签

> ID：13094993
> 
> 赞同：0
> 
> 时间：2012-10-26T21:58:20.030
> 
> 标签：javascript, onload

我目前在我的一些页面上运行以下 js，以动态设置从该页面上包含的 h1 标签中提取的页面上的标题标签。

`document.title = document.getElementsByClassName("Category-H1")[0].innerHTML;`

但是，当我查看页面的源代码时，它仍然显示旧的标题标签，即使在 js 更改它之后也是如此。

有人建议我可能必须添加一个“主体的 onload 事件”，不确定这是否有帮助，或者我需要运行什么 onload 事件。

还有其他想法吗？建议？谢谢 - 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:00:10.697

'源'就是......它是从服务器返回的代码。在大多数情况下，要查看加载后所做的 DOM 更改，您需要查看 Firebug 或 Chrome Inspector 中的代码。

# python - 我怎样才能打印一些东西，然后在同一行调用一个带有 print 的函数？

> ID：13094994
> 
> 赞同：3
> 
> 时间：2012-10-26T21:58:19.210
> 
> 标签：python, printing

在 Python 中，我有一个打印一些东西的函数。我想事先在同一行打印一些东西。

所以，我使用下面的代码

```
print 'The hand is', displayHand(hand)

def displayHand(hand):

    for letter in hand.keys():
        for j in range(hand[letter]):
             print letter,              # print all on the same line
    print                               # print an empty line 
```

然而，函数内的 print 被函数外的 print 调用。

如何打印开始字符串，然后调用我的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:00:06.373

重命名`displayHand`为`renderHand`并让它返回一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:08:08.137

@zmbq 提供的返回答案是显而易见且正确的，但是如果您仍然想要自己的方式，则可以使用 newer `print`，假设您使用的是 python >= 2.6

```
from __future__ import print_function
print("Something", end="") 
```

有了它，您可以在没有`\n`. 所以基本上你可以这样做：

```
print("The hand is", end="")
displayHand(hand) 
```

在函数中：

```
print("letter", end="") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:14:39.550

对于 2.x：

```
print 'The hand is', 
displayHand(hand)
print 
```

对于 3.x：

```
print('The hand is', end="")
displayHand(hand)
print() 
```

更好的方法是将“手是”的打印移到函数本身中。

# c# - 跟踪添加和删除的工作表

> ID：13094996
> 
> 赞同：4
> 
> 时间：2012-10-26T21:58:49.493
> 
> 标签：c#, excel, vsto, com-interop

我正在开发一个 Excel 插件并遇到了障碍。

我希望使用 Excel 工作簿中的工作表更新组合框。目前我可以用 foreach 循环来做到这一点。然而，这是有限的，因为它只在我运行它时拾取添加或减去的工作表。我的插件看起来很俗气，带有“刷新表格”按钮，如果可能的话，我想避免这种情况。

理想情况下，我能够将工作表对象数据绑定到组合框，这样它就可以在没有我干预的情况下即时更新。但是，我的研究表明它不支持这一点。我没有尝试过，因为直到后来我才在我的开发计算机前，但我几乎是肯定的，因为它不继承 IList 它不会作为数据源工作。

有没有人做过类似的事情？我真的很想让这件事正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T23:55:44.783

Excel.Application 对象有一个`WorkbookNewSheet`在添加新工作表时触发的事件。不幸的是，它似乎没有在移除工作表时触发的事件。

您可以将组合框更新代码放在组合框的`DropDown`事件中。它在组合框打开时触发，您的代码可以在列表可见之前更新组合框项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T00:35:54.097

我喜欢 WarrenG 对下拉事件的想法。如果这可行，那似乎很理想。否则，我建议使用工作簿的 Sheet_Activate 事件。这在创建或删除工作表时触发，至少如果它是由用户完成的。

在 C# 中，您需要实例化事件并创建处理程序。您实际上可以在 Form_Load 事件中执行此操作，以便在实例化表单时创建事件处理程序。您需要设置对 Interop.Excel 的引用，以便您的 Form.cs 代码如下所示：

因此，您的 Form_Load 事件看起来像这样：

```
using Excel = Microsoft.Office.Interop.Excel;

namespace ExcelWorkbook1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Globals.ThisWorkbook.SheetActivate +=
                new Excel.WorkbookEvents_SheetActivateEventHandler(
                ThisWorkbook_SheetActivate);
        }

        private void ThisWorkbook_SheetActivate(object Sh)
        {
            //Fill your combobox here
        }
    }
} 
```

编辑：我[在这个 MSDN 站点](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.sheetactivate%28v=vs.80%29.aspx)找到了基本代码。