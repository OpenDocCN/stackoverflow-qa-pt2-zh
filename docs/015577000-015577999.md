# StackOverflow 问答 15577000-15577999

# java - 无法在 Eclipse 中运行网络摄像头

> ID：15577002
> 
> 赞同：2
> 
> 时间：2013-03-22T18:01:11.347
> 
> 标签：java

```
import JMyron.*;
public class WebCamera {
    public WebCamera() {
        // TODO Auto-generated constructor stub
    }

    int height = 320, width = 240;
    JMyron my = new JMyron();

    void setup() {
        my.start(width, height);
        my.update();
        my.stop();
    }

    public void main(String[] args) {

        setup();
        System.out.println("Hello World");
    }

} 
```

这是我的简单程序 我所做的是下载 JMyron 库，将三个 .dll 文件导入我的 java 项目文件夹（在我的情况下为 WebCam），通过在项目菜单中添加外部罐子添加 JMyron.jar 文件，然后编写一个简单的代码。但是，项目文件夹显示一个红色感叹号，并且当我在编译后运行它时代码终止（为此我使用 ctrl + S）

显示的问题是：

> 描述 资源路径 位置 类型 在解决构建路径错误之前无法构建项目 WebCam Unknown Java Problem
> 
> 描述资源路径位置类型项目“WebCam”缺少所需的库：“C:\Users\Sony\Desktop\Habe\Habe\opencv\javac.zip”WebCam 构建路径构建路径问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:22:35.417

您是否正确添加了库？

您能否确认 JMyron 不依赖于[http://code.google.com/p/javacv/](http://code.google.com/p/javacv/)之类的 CV 库？

# javascript - JavaScript 和对象访问

> ID：15577004
> 
> 赞同：0
> 
> 时间：2013-03-22T18:01:31.813
> 
> 标签：javascript, jquery, ajax, json, object

我有这个基本的 JavaScript 代码作为我正在制作的一个迷你文件管理器项目的一部分，但不幸的是它不起作用。在`get()`函数内部，我试图访问`Content.files`数组，但似乎由于变量范围或函数内部的任何内容，它没有正确设置数组并且页面上没有任何内容。Firefox 的错误控制台什么也没给我。我该如何解决？

顺便说一句，最近我一直专注于 C# 和 PHP，如果这只是一个愚蠢的语法错误，请原谅我。谢谢！

```
<script type="text/javascript">

Page = {

currentdir: '/',
}

Content = {

files:[], folders:[],

get: function() {

    $.post('?p=myfiles&ajax', {
        dir: '/',
    }, function (data) {
        Content.files = data.files;
        Content.folders = data.folders;
    }, "json"); 
},

build: function () {

    for (var n = 0; n < Content.files.length; n++) {

        var id = Content.files[n].id;
        var name = Content.files[n].name;
        var size = Content.files[n].size;

        output = '<td>File</td><td>'+id+'</td><td><a href="?p=file-download&id='+id+'">'+name+'</a></td><td>'+((size / (1024*1024)).toFixed(2))+' MB</td>';

        $('#filetable').append('<tr>'+output+'</tr>');

    }
},

}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:15:35.503

使用您删除的评论（我猜是因为我错误删除了自己的评论），您`build`在调用`get`. 不幸的是，`get`它发出了一个异步的 AJAX 请求。这意味着，Javascript 在运行进一步的代码之前不会等待 AJAX 响应，因此`build`在发送请求后立即运行。响应将在未来的某个时候返回（从现在起不会太久），但几乎肯定不会在`build`被调用之前。这意味着不会填充这些项目。下面是一个如何提供回调的示例：

```
var Page = {   // <-- Add `var`
    currentdir: '/',
};

var Content = {   // <-- Add `var`
    files:[],
    folders:[],
    get: function (callback) {
        $.post('?p=myfiles&ajax', {
            dir: '/',
        }, function (data) {
            Content.files = data.files;
            Content.folders = data.folders;
            //if (typeof callback !== "undefined") { // <-- Might be better than below, in the special cases where some functions are "objects" in IE
            if (typeof callback === "function") {
                Function.prototype.apply.call(this, callback, arguments);
            }
        }, "json");
    },
    build: function () {
        for (var n = 0; n < Content.files.length; n++) {
            var id = Content.files[n].id;
            var name = Content.files[n].name;
            var size = Content.files[n].size;
            output = '<td>File</td><td>'+id+'</td><td><a href="?p=file-download&id='+id+'">'+name+'</a></td><td>'+((size / (1024*1024)).toFixed(2))+' MB</td>';
            $('#filetable').append('<tr>'+output+'</tr>');
        }
    }    // <-------------- Remove the comma
};

Content.get(Content.build); 
```

这样，您可以将任何函数引用传递给它，`Content.get`并且它将在 之后立即被调用，`Content.files`并且`Content.folders`从 AJAX 请求中填充。

其他一些事情 - 删除对象中`build`方法之后的逗号`Content`。此外，您可能应该使用`var`来声明`Page`and`Content`对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T18:05:50.490

`Content`尚未定义，因为您实际上正在*定义*它，但在对象范围内，您可以使用`this`. post 回调有自己的范围，但您可以`this`在更高的范围内重新分配。

```
get: function() {
    var self = this;
    $.post('?p=myfiles&ajax', {
        dir: '/',
    }, function (data) {
        self.files = data.files;
        self.folders = data.folders; 
```

[http://jsfiddle.net/ExplosionPIlls/xYByU/](http://jsfiddle.net/ExplosionPIlls/xYByU/)

同样重要的是要注意，您不知道该`$.post`方法何时完成运行，因此任何对`Content`填充的依赖都必须依赖于该请求的完成。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T18:04:57.563

您将要使用`this.files`而不是`Content.files`在对象内部。`Content`是您对正在创建的对象的引用。*也许*你可以像你正在做的那样关闭它的值，老实说我不知道​​，但它闻起来很糟糕，这就是隐式`this`变量的真正用途。*在您的对象之外*，一旦将其分配给变量`Content`，就可以正确地说`Content.files`引用该成员变量。

附带说明一下，最好将脚本包含在立即调用的匿名函数中，以免与`window`对象的其他成员发生冲突，如果您不使用`var`声明变量或创建变量，可能会发生这种情况在函数范围之外（你正在做这两个）。我会仔细阅读以更好地理解这一点[。](http://bonsaiden.github.com/JavaScript-Garden/#function)

# wcf - 从外部访问启用 AJAX 的 WCF？

> ID：15577012
> 
> 赞同：0
> 
> 时间：2013-03-22T18:01:54.007
> 
> 标签：wcf, asp.net-ajax

是否可以从外部网站访问启用 AJAX 的 WCF，即不是托管此启用 ajax 的 WCF 的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:32:16.800

当您需要跨域访问某些内容时，由于安全问题，您必须让服务器访问此信息，然后将其传递回您的客户端。

simple talk的[Chris Ullman](https://www.simple-talk.com/dotnet/asp.net/calling-cross-domain-web-services-in-ajax/)`great job`详细介绍了您的代理选项。

# c++ - 为什么在这种情况下调用复制构造函数？

> ID：15577016
> 
> 赞同：1
> 
> 时间：2013-03-22T18:02:07.747
> 
> 标签：c++

我有这两个简单的类：CreditCard 和 Account

```
 #pragma once

    #include<string>

    class CreditCard
    {
    private:
        std::string number;
        int expMonth;
        int expYear;
        int pin;
    public:

        CreditCard():number(""), expMonth(0), expYear(0), pin(0)
        {

        }

        CreditCard(std::string number, int expMonth, int expYear,int pin):number(number), expMonth(expMonth), expYear(expYear), pin(pin)
        {
            if(number.length()!=5)
            {
                throw std::invalid_argument("Card number must be 5 characters");
            }
            if(expMonth<0 || expMonth>12)
            {
                throw std::invalid_argument("Invalid expiration month");
            }
            if(expYear<2014 || expYear>2020)
            {
                throw std::invalid_argument("Invalid expiration year");
            }
            if(pin<1000 || pin>9999)
            {
                throw std::invalid_argument("PIN must be between 1000 and 9999");
            }
        }

        CreditCard(const CreditCard &creditCard):number(creditCard.number), expMonth(creditCard.expMonth), expYear(creditCard.expYear), pin(creditCard.pin)
        {

        }   

        CreditCard(CreditCard &&creditCard):number(std::move(creditCard.number)), expMonth(std::move(creditCard.expMonth)), expYear(std::move(creditCard.expYear)), pin(std::move(creditCard.pin))
        {
            creditCard.number="";
            creditCard.expMonth=0;
            creditCard.expYear=0;
            creditCard.pin=0;
        }

        CreditCard& operator = (const CreditCard &creditCard)
        {
            number=creditCard.number;
            expMonth=creditCard.expMonth;
            expYear=creditCard.expYear;
            pin=creditCard.pin;
            return *this;
        }

        CreditCard& operator = (CreditCard &&creditCard)
        {
            if(this!=&creditCard)
            {
                number=std::move(creditCard.number);
                expMonth=std::move(creditCard.expMonth);
                expYear=std::move(creditCard.expYear);
                pin=std::move(creditCard.pin);
                number=creditCard.number;
                expMonth=creditCard.expMonth;
                expYear=creditCard.expYear;
                pin=creditCard.pin;
            }
            return *this;
        }

        std::string getNumber() const
        {
            return number;
        }

        int getExpMonth() const
        {
            return expMonth;
        }

        int getExpYear() const
        {
            return expYear;
        }

        int getPin() const
        {
            return pin;
        }
    };

#pragma once

#include<string>
#include"CreditCard.h"

class Account
{
private:
    std::string number;
    float amount;
    CreditCard creditCard;
public:
    Account():number(""), amount(0), creditCard()
    {

    }

    Account(std::string number, float amount, CreditCard creditCard) : number(number), amount(amount), creditCard(creditCard)
    {

    }

    Account(const Account &account) : number(account.number), amount(account.amount), creditCard(account.creditCard)
    {

    }

    Account(Account &&account) : number(std::move(account.number)), amount(std::move(account.amount)), creditCard(std::move(creditCard))
    {

    }

    Account& operator = (const Account &account)
    {
        number=account.number;
        amount=account.amount;
        creditCard=account.creditCard;      
        return *this;
    }

    Account& operator = (Account &&account)
    {
        if(this!=&account)
        {
            number=account.number;
            amount=account.amount;
            creditCard=account.creditCard;

            account.number="";
            account.amount=0;
            account.creditCard=CreditCard("",0,0,0);
        }
        return *this;
    }

    std::string getNumber() const
    {
        return number;
    }

    float getAmount() const
    {
        return amount;
    }

    void deposit(const float &depositAmount)
    {
        amount+=depositAmount;
    }

    void withdraw(const float &withdrawAmount)
    {
        amount-=withdrawAmount;
    }
}; 
```

主要是我有这条线：

```
Account account1("x12345x",1235.2, CreditCard("12345",1,2014,1122)); 
```

怎么了：

1.  CreditCard 构造函数被调用
2.  CreditCard 移动构造函数被调用
3.  帐户构造函数被调用
4.  CreditCard 复制构造函数被调用

我不明白为什么会发生4。为什么调用复制构造函数？

PS：对这些课程的任何更正表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T18:04:41.023

> 我不明白为什么会发生4。为什么调用复制构造函数？

那是因为这条线：

```
Account(std::string number, float amount, CreditCard creditCard) 
: 
number(number), amount(amount), creditCard(creditCard)
//                              ^^^^^^^^^^^^^^^^^^^^^^
{ ... } 
```

在 的构造函数中`Account`，您将左值复制`creditCard`到成员变量`creditCard`中。这会导致调用`CreditCard`.

实际上，既然你是按价值取值，那么*移动*`creditCard`它是安全的：

 *```
Account(std::string number, float amount, CreditCard creditCard) 
: 
number(number), amount(amount), creditCard(std::move(creditCard))
//                                         ^^^^^^^^^^^^^^^^^^^^^
{ ... } 
```

这将导致调用第 4 步中的*移动*构造函数`CreditCard`而不是复制构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:05:22.813

1.  `CreditCard("12345", 1, 2014, 1122)`被构造。让我们称之为`c1`。
2.  `c1`被移到构造函数的`creditCard`参数中`Account`。
3.  开工建设`account1`。
4.  `account1.creditCard``creditCard`根据成员初始化程序列表，从构造函数参数复制构造。*

# ruby-on-rails - 升级时可以跳过 Rails 的版本吗？

> ID：15577020
> 
> 赞同：1
> 
> 时间：2013-03-22T18:02:23.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 3.2.6 应用程序，我想升级到 3.2.12。我需要去 3.2.7 然后 3.2.8 然后 3.2.9 等等吗？

或者我可以直接去 3.2.12 吗？

在这种情况下，推荐的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:07:37.733

您可以在 gemfile 中更改 rails 版本并运行您的测试。很可能您不会有任何问题，但请确保您至少测试了基本功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:06:10.643

您不需要按顺序升级 rails 版本。您可以将版本直接从 3.2.6 升级到 3.2.12

只需转到 Gemfile 并找到带有***gem 'rails', '3.2.6' 的***行，将其替换为***gem 'rails', '3.2.12'***并输入`bundle update`。

# javascript - 使用 jQuery 创建 DIV 网格

> ID：15577021
> 
> 赞同：0
> 
> 时间：2013-03-22T18:02:23.933
> 
> 标签：javascript, jquery

我需要创建一个 DIV 网格（所有 DIV 都将具有相同的尺寸）并为它们设置定义的名称、颜色、位置等。根据您的说法，哪种方法最相关/最简单/最快？

任何答案将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:10:07.457

毫无疑问，javascript 中的迭代器就像最常用和最喜欢`for(){}`的循环一样很好，并且就 jQuery 而言`.each()`是您正在寻找的。

在 jQuery 中使用 for 循环：

```
for(var i = 0; i<=10; i++){
   $('<div />').addClass('sameDiv').attr('id','div'+i).appendTo('body');
} 
```

### [看一下这个](http://jsfiddle.net/UNCMY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:39:14.207

另一个答案是正确的，但我更喜欢 jQuery 元素创建语法：

```
for (var i = 0; i <= 10; i++) {
    $('<div />', {
        'class' : 'sameDiv',
        'id'    : 'div' + i
    }).appendTo('body');
} 
```

> **小提琴：http: [//jsfiddle.net/K5ERR/](http://jsfiddle.net/K5ERR/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T18:03:47.067

使用 append 方法添加一堆 div 的迭代器（for 循环可以工作）。

如果每个都有细微的差异，请在地图或迭代器也可以访问的东西中跟踪差异。

# vba - Excel PivotField 方向错误？

> ID：15577023
> 
> 赞同：2
> 
> 时间：2013-03-22T18:02:35.947
> 
> 标签：vba, excel, excel-2010, pivot-table

我正在使用 Excel 2010 并编写一个 VBA 函数来自动格式化数据透视表中的各种指标，因为它被用户更改（以便在他们添加/删除字段时保留格式）。我正在循环通过 PivotFields 集合来执行此操作。为了更改格式，数据透视表需要在数据透视表中可见，否则会引发错误。所以我想我可以只检查 PivotField 的 Orientation 属性，只处理那些设置为 xlDataField 的 Orientation。

但是，当我运行该函数时，所有数据字段都显示 xlHidden 的方向，即使它们在数据透视表中可见。

我只是在做一个像这样的简单功能

```
Private Sub Worksheet_PivotTableUpdate(ByVal Target As PivotTable)

    Dim pt As PivotField

    For Each pt In ActiveSheet.PivotTables("PivotTable1").PivotFields

        If VBA.InStr(1, pt.Caption, "COMP", vbTextCompare) And pt.Orientation = xlDataField Then
            pt.Function = xlAverage
            pt.NumberFormat = "0.00%"
        End If

    Next pt

End Sub 
```

我什至使用以下方法检查了所有 PivotFields：

```
Debug.Print pt.Caption & " " & pt.Orientation 
```

不在页面、行或列字段中的任何内容都显示为隐藏。没有任何内容显示为数据字段。我错过了什么吗？我设置的数据字段无关紧要，没有任何东西被标记为 xlDataField。我应该尝试另一种方式吗？我尝试使用 PivotFields.Hidden 属性，但尝试访问它时出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:59:59.667

而不是循环通过`PivotFields`你应该循环通过`DataFields`哪些是`xlDataField`定向的。

如果您需要检查是否有任何之前的循环，只需测试：

```
If ActiveSheet.PivotTables(1).DataFields.Count > 0 Then 
```

如果数据方向没有任何内容，则返回 0。

**已编辑：** 还有一件事-不要忘记关闭事件，因为您的程序会导致 PT 更改再次触发该事件。所以，`Application.EnableEvents = False`从头到尾`=True`。

# ruby-on-rails - 门卫身份验证正确语法

> ID：15577024
> 
> 赞同：1
> 
> 时间：2013-03-22T18:02:36.820
> 
> 标签：ruby-on-rails, ruby, doorkeeper

在 Doorkeeper.rb 中，有一个身份验证块。我需要在其中适应这个逻辑，但我不确定如何编写它，因为 Ruby 的语法对我来说仍然是新的。

该人已登录并且他们是 current_user 或执行以下逻辑。

```
resource_owner_authenticator do

   current_user ||

   session[:after_login_redirect_to] = request.fullpath
   session[:oauth_for_client_id] = params[:client_id]
   redirect_to('/connect')   

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:07:44.107

您需要在第二部分周围有一个开始/结束块。如果存在，您希望身份验证器返回`current_user`，否则执行所有其他操作。

```
resource_owner_authenticator do
  current_user || begin
    session[:after_login_redirect_to] = request.fullpath
    session[:oauth_for_client_id] = params[:client_id]
    redirect_to('/connect')
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:10:40.243

尝试这个：

```
resource_owner_authenticator do
  unless current_user do
    session[:after_login_redirect_to] = request.fullpath
    session[:oauth_for_client_id] = params[:client_id]
    redirect_to('/connect')
  end
end 
```

# windows-7 - 从 SQL 数据库查询文件并将结果显示为 Windows 搜索

> ID：15577025
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:34.250
> 
> 标签：windows-7, windows-search, sql, c#

警告：这里是新手程序员。我得到了 SQL 数据库，其中的文件路径基于存储在其中的不同标准。我想将与所需条件关联的文件显示为 Windows 搜索结果。关于如何实现这一目标的任何指导方针？我正在用 C# 编程。

我相信这里有一些有用的东西：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff628790](http://msdn.microsoft.com/en-us/library/windows/desktop/ff628790(v=vs.85).aspx) (v=vs.85).aspx只是我不太明白。提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:14:57.720

您确实在寻找 Windows 搜索的扩展：

*   [http://technet.microsoft.com/en-us/library/cc725753%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc725753%28v=ws.10%29.aspx)

或者考虑尝试将 Windows Search 与另一个外部服务（在本例中为 SQL 数据库）联合。

*   [http://msdn.microsoft.com/en-gb/library/windows/desktop/dd940456%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd940456%28v=vs.85%29.aspx)

恐怕这些都不是一项简单的任务，并且需要大量的 Windows 系统和编程技能。

进行这种集成的最常见方法是反其道而行之。从 MS SQL Server 调用 Windows 搜索索引。当然，你也需要自己的搜索前端。

# c# - 使用 C# 运行 unix 命令

> ID：15577027
> 
> 赞同：-2
> 
> 时间：2013-03-22T18:02:46.997
> 
> 标签：c#, unix

是否可以在 Windows Forms 中使用 c# 连接到 unix 服务器并运行 shell 脚本，并在某些文本框中检索脚本的输出？

我还想使用代码远程连接桌面并在那里搜索多个文件。请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:15:34.873

要回答您的第一个问题：

通常，Unix 机器会运行某种安全 shell (SSH) 服务器，它允许您使用特定的用户名/密码进行连接并运行您的 shell 脚本。

为了从您的 Windows 窗体应用程序中运行它，您可以从[http://granados.sourceforge.net/](http://granados.sourceforge.net/)集成像 Granados 这样的软件库来连接和运行脚本，或者您可以简单地设置像 PuTTY 这样的客户端来运行脚本和将其作为外部进程生成，即：

```
Process.Start("C:\Putty\putty.exe -ssh -m C:\myScript.txt remoteUser@192.168.1.1); 
```

您可以[通过 windows 上的 putty 查看通过 ssh 编写脚本，](https://stackoverflow.com/questions/12736683/scripting-over-ssh-through-putty-on-windows)以获取有关设置脚本的更多信息。听起来你必须将 putty 的输出保存到一个文件中，然后如果你按照这个方向使用你的 WinForms 应用程序来读取它。

另一种选择是添加对像 granados 这样的库的引用，或者简单地使用 NuGet 包管理器将“ssh.net”添加到您的 winforms 应用程序。在[http://sshnet.codeplex.com/discussions/285219](http://sshnet.codeplex.com/discussions/285219)有一个示例，他们打开与服务器的连接，执行命令并使用 ssh.net 库读取结果。

对于第二个问题，这取决于远程 PC 与您的连接方式。如果它们在同一个共享网络上（例如：工作中的 Intranet），您可以在您感兴趣的机器上设置网络共享，并使用以下路径直接检查文件系统： `System.IO.File.GetAttributes(@"\\hostname\shareName\filename.txt");`

如果远程计算机实际上位于远程位置，则变得更加困难，您将需要使用远程桌面库或让远程计算机设置 FTP 服务器或类似的东西来浏览文件系统。

# search - 对产品代码进行全文搜索

> ID：15577030
> 
> 赞同：0
> 
> 时间：2013-03-22T18:02:55.313
> 
> 标签：search, solr, lucene, fuzzy-search

今天的挑战是为我商店的产品数据库创建一个搜索引擎。

很多产品都是手工制作的，很多不同的手！

所以很可能会找到“i-phone 3gs”、“iPhone4”和“i phone 5”，

我想要的是搜索“iPhone”并找到上面的三个示例产品结果。

这让我想起了“模糊搜索”。我试图开箱即用地使用它们，但没有成功。

我必须索引和搜索这种示例（文档正文中的特殊字符或空格）以检索“同义词”结果？

例如

iPhone =>“我的电话”

“特殊 40” => “特殊 40”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:41:21.017

Using Lucene, there are a couple of options I would recommend.

One would be to index product ids with a [KeywordAnalyzer](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/KeywordAnalyzer.html), and then query as you suggested, with a [fuzzy query](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Fuzzy%20Searches).

Or, you could create a custom Analyzer, in which you add a [`WordDelimiterFilter`](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/WordDelimiterFilter.html), which will create tokens at changes in case, as well as dashes and spaces (if any exist in your tokens after having been passed through the tokenizer). An important note, if you are using a StandardAnalyzer, or SimpleAnalyzer, or something similar, you will want to make sure the `WordDelimiterFilter` is applied BEFORE the [`LowercaseFilter`](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/LowerCaseFilter.html). Running it through the `LowercaseFilter` would, of course, prevent it being able to split terms based on camel casing. Another caution, you'll probably want to customize your [StopFilter](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/StopFilter.html), since "I" is a common english stopword.

In a custom analyzer, you mainly just need to override [`createComponents()`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/analysis/Analyzer.html). For example, if you wanted to add `WordDelimiterFilter` functionality into the StandardAnalyzer's set of filters:

```
@Override
protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
    Tokenizer tokenizer = new StandardTokenizer(Version.LUCENE_40,reader);
    TokenStream filter = new StandardFilter(Version.LUCENE_40,tokenizer);
    //Take a look at the WordDelimiterFactory API for other options on this filter's behavior
    filter = new WordDelimiterFilter(filter,WordDelimiterFilter.GENERATE_WORD_PARTS,null);
    filter = new LowercaseFilter(Version.LUCENE_40,filter);
    //As mentioned, create a CharArraySet of your stopwords, since the default will likely cause problems for you
    filter = new StopFilter(Version.LUCENE_40,filter,myStopWords);
    return new TokenStreamComponents(tokenizer, filter);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:58:27.657

使用 Solr，请确保浏览示例教程和相应的 schema.xml。您会看到那里有两种类型定义（我认为是 en_splitting 和 en_splitting_tight），它们显示了非常相似的用例。

具体来说，您正在查看由 LowerCaseFilter 和可能的[SynonymFilter增强的 WordDelimiterFilter。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)不过，您必须对 SynonymFilters 小心一点，尤其是当您映射到/来自多词等价时。

# c - 未声明的标识符错误

> ID：15577042
> 
> 赞同：0
> 
> 时间：2013-03-22T18:03:31.233
> 
> 标签：c, opencv, pthreads, face-detection

我在一个线程上编写了这个用于面部检测的代码，然后我将编写用于眼睛、鼻子和嘴巴的代码。

但是有一个错误是`'threadface_func' : undeclared identifier`---

我找不到它是什么。

```
 #include <iostream>
    #include "cv.h"
    #include "highgui.h"
    #include <pthread.h>

    typedef struct parameter_t{
        CvSeq * detectRect_face;
        IplImage* capturedImg;
        CvHaarClassifierCascade * pCascade_face;
        CvMemStorage * storage;

    }parameter_t;

    int main ( int argc, const char* argv[] )
    {
            CvCapture* capture = cvCaptureFromCAM(0);
            IplImage* capturedImg;
            int resCount = 1;
            char path[50];
            int flags = CV_HAAR_FIND_BIGGEST_OBJECT | CV_HAAR_DO_ROUGH_SEARCH;

            CvHaarClassifierCascade * pCascade_face;
            pthread_t threadface;

            pCascade_face = (CvHaarClassifierCascade *)cvLoad("C:/Users/Furkan/Desktop/Computer Vision/Programlar/opencv/data/haarcascades/haarcascade_frontalface_alt.xml");
            cvNamedWindow("FaceDetection");

            while (true)
            {
                CvMemStorage * storage;
                CvSeq * detectRect_face;
                capturedImg = cvQueryFrame(capture);
                storage = cvCreateMemStorage(0);

                parameter_t my_parameters;

                int k=pthread_create(&threadface,0,threadface_func,(void*)&my_parameters);

                if(k!=0)
                {
                    printf("Create thread failed! error");
                    return 1;
                }

                cvShowImage("FaceDetection", capturedImg);

                int ch = cvWaitKey(1);

                if(ch==27)
                    break;
                else 
                    if(ch == 115)
                    {
                        sprintf(path,"d:/resim%d.bmp",resCount++);
                        cvSaveImage(path,capturedImg,0);
                    }
            }

        cvDestroyWindow("FaceDetection");

        cvReleaseCapture(&capture);

        return 0;
    }

    void* threadface_func(void* parameter){

        parameter_t *p =(parameter_t*)parameter;

        p->detectRect_face=cvHaarDetectObjects(p->capturedImg,p->pCascade_face,p->storage,1.15, 3, 0,cvSize(25, 15));

        for(int i=0;i<(p->detectRect_face ? p->detectRect_face->total:0); i++ )
            {
                CvRect* r = (CvRect*)cvGetSeqElem(p->detectRect_face, i); 
                CvPoint pt1 = { r->x, r->y }; 
                CvPoint pt2 = { r->x + r->width, r->y + r->height }; 
                cvRectangle(p->capturedImg, pt1, pt2, CV_RGB(255,0,0), 1,8, 0); 

            }

        return 0;
    } 
```

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:07:12.237

在 C 中，函数必须在引用它们的位置之前声明。`threadface_func`您在 中间引用该函数`main()`，因此您必须在此之前在某处声明它。

简单的解决方法是在上面添加`main()`：

```
void* threadface_func(void* parameter); 
```

或者，您可以将整个函数移到`main()`.

# r - 将坐标输入 tkplot() 或在 plot.igraph() 中使用 tkplot 的箭头

> ID：15577043
> 
> 赞同：2
> 
> 时间：2013-03-22T18:03:36.073
> 
> 标签：r, igraph, tkplot

有没有办法可以将坐标矩阵提供给 igraph 中的 tkplot 函数？我尝试将布局参数设置为我的坐标矩阵，但它只会产生一个空白图。

我能够将坐标输入 plot.igraph() 并生成一个有向的加权边缘图，其中顶点位于我想要的位置。但是，箭头很时髦。箭头放置在边缘下方，因此如果边缘足够宽（我的一些），那么箭头至少部分隐藏。我试过改变边缘和箭头的宽度，但我的一些边缘的权重太大了。tkplot 中产生的箭头更接近我想要的。

下面的第一个图对应于用 plot.igraph 制作的不需要的箭头。第二个图是来自 tkplot 的所需箭头。

### 我不想要的箭头：

![坏箭](../Images/caaee0ca4f91be02c5845483212656b2.png)

### 我想要的箭头：

![好箭头](../Images/3544077613e8cb181bed98b2cf8838aa.png)

我需要做一个或另一个的原因是因为我需要在完全相同的位置制作更多这些图表，并且不想继续使用 tkplot 手动移动每次都有节点。我有很多，而且也不可能让它们处于与以前完全相同的位置。

希望这足够具体。这是我第一次发帖，所以请让我知道我应该包括哪些其他信息。我尝试在 R 2.15 和运行 2.11 的机器上以及 igraph 包 0.5.5 和 igraph 0.6.5 上给出 tkplot 坐标。

如果这是在某个地方，真的很抱歉浪费时间。我已经花了一段时间寻找并试图与我的研究生 PI 一起努力解决这个问题，而且我们已经陷入死胡同好几天了。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:51:02.307

不幸的是，无法修改箭头的外观，我同意这很糟糕，尤其是因为它们很丑。

为了更具建设性，您可以使用`tkplot()`绘图，您实际上可以使用一些技巧并使用内部 igraph 函数自动将它们保存到文件中。下面是一个例子。这够好吗？

```
library(igraph)
set.seed(1)
g <- graph.star(10, center=10) %u% graph.ring(9, directed=TRUE)
E(g)$width <- sample(1:10, ecount(g), replace=TRUE)
lay <- layout.auto(g)

id <- tkplot(g, layout=lay)
tkp <- igraph:::.tkplot.get(id)
tkpostscript(tkp$canvas, file="/tmp/output.eps")
tkplot.close(id) 
```

![阴谋](../Images/c0a62b1c56b5acca2bbd733ca5dcfeab.png)

# mysql - 用平均值填充表中 NULL-s 的空白

> ID：15577047
> 
> 赞同：0
> 
> 时间：2013-03-22T18:03:43.960
> 
> 标签：mysql, date, average, gaps-in-data

我有一个包含字段`(id,letter,date)`和一些数据的表：

```
1 A 2012-01-01
2 B NULL
3 C NULL
4 D 2012-01-15 
```

我想用最近的非 NULL 值的平均日期填充 NULL 值。像那样：

```
1 A 2012-01-01
2 B 2012-01-08
3 C 2012-01-08
4 D 2012-01-15 
```

或者，也许，甚至像这样：

```
1 A 2012-01-01
2 B 2012-01-08
3 C 2012-01-11
4 D 2012-01-15 
```

两种变体都很棒。有没有简单的方法在 MySQL 中实现它？

提前致谢

UPD 表非常大，大约有 700.000 条记录，并且像描述的那样大约有 50.000 个间隙。

UPD2 更干净一点：表可能是这样的：

```
1 A 2012-01-01
2 B NULL
3 C NULL
4 D 2012-01-15
5 E NULL
6 F 2012-01-17
7 G NULL
8 H NULL
9 I 2012-01-20 
```

预期的结果如下：

```
1 A 2012-01-01
2 B **2012-01-08**
3 C **2012-01-08**
4 D 2012-01-15
5 E **2012-01-16**
6 F 2012-01-17
7 G **2012-01-18**
8 H **2012-01-18**
9 I 2012-01-20 
```

（星号表示更改的值）。谢谢

UPD3 谢谢大家。但我会以另一种方式来做，用一个简单的公式计算日期：need_date = [(max(date)-min(date))/(max(id)-min(id)]*(my_ID-min(id )) + 分钟（日期）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:22:05.493

假设你有一个`T`这样的表：

```
CREATE TABLE T(
    id INT,
    time DATETIME
); 
```

以下查询将为您提供每个 NULL 记录的边界：

```
SELECT T.Id
     , MAX(T1.Time) as MinDate
     , MIN(T2.Time) as MaxDate     
  FROM T
INNER JOIN T T1 ON T1.Id < T.Id
               AND T.time IS NULL 
               AND NOT T1.time IS NULL
INNER JOIN T T2 ON T2.id > T.id
               AND T.time IS NULL
               AND NOT T2.time IS NULL
GROUP BY Id 
```

输出将是：

```
Id  MinDate     MaxDate
2   2012-01-01  2012-01-15
3   2012-01-01  2012-01-15 
```

因此，下一步将是使用此结果集中的值进行更新，以更新 NULL 值，例如......

```
UPDATE T
INNER JOIN 
(
   SELECT T.Id, MAX(T1.Time) as MinTime, MIN(T2.Time) as MaxTime
     FROM T
   INNER JOIN T T1 ON T1.id < T.id
                 AND T.time IS NULL 
                 AND NOT T1.time IS NULL
   INNER JOIN T T2 ON T2.id > T.id
                 AND T.time IS NULL
                 AND NOT T2.time IS NULL    
   GROUP BY T.ID) T3
 ON T3.id = T.id  
 SET T.time = FROM_UNIXTIME((UNIX_TIMESTAMP(T3.MinTime) + UNIX_TIMESTAMP(T3.MaxTime)) / 2)
 WHERE T.time IS NULL 
```

**[在这里工作 SQLFiddle](http://sqlfiddle.com/#!2/4918c/1/0)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:30:54.293

# 查询 #1

```
SELECT id,letter,IFNULL(date,dt) date FROM mytable,
(SELECT DATE(mindate + INTERVAL (secdiff/2) SECOND) dt
FROM (SELECT mindate,UNIX_TIMESTAMP(maxdate)
- UNIX_TIMESTAMP(mindate) secdiff
FROM (SELECT MIN(date) mindate FROM mytable) N,
(SELECT MAX(date) maxdate FROM mytable) X) AA) A; 
```

# 样本数据

```
mysql> DROP TABLE IF EXISTS mytable;
Query OK, 0 rows affected (0.00 sec)

mysql> CREATE TABLE mytable
    -> (
    ->    id int not null auto_increment,
    ->    letter char(1),
    ->    `date` date,
    ->    primary key (id)
    -> );
Query OK, 0 rows affected (0.07 sec)

mysql> INSERT INTO mytable (letter,date) VALUES
    -> ('A','2012-01-01'),('B',NULL),('C',NULL),('D','2012-01-15');
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM mytable;
+----+--------+------------+
| id | letter | date       |
+----+--------+------------+
|  1 | A      | 2012-01-01 |
|  2 | B      | NULL       |
|  3 | C      | NULL       |
|  4 | D      | 2012-01-15 |
+----+--------+------------+
4 rows in set (0.00 sec)

mysql> 
```

# 查询 #1 已执行

```
mysql> SELECT id,letter,IFNULL(date,dt) date FROM mytable,
    -> (SELECT DATE(mindate + INTERVAL (secdiff/2) SECOND) dt
    -> FROM (SELECT mindate,UNIX_TIMESTAMP(maxdate)
    -> - UNIX_TIMESTAMP(mindate) secdiff
    -> FROM (SELECT MIN(date) mindate FROM mytable) N,
    -> (SELECT MAX(date) maxdate FROM mytable) X) AA) A;
+----+--------+------------+
| id | letter | date       |
+----+--------+------------+
|  1 | A      | 2012-01-01 |
|  2 | B      | 2012-01-08 |
|  3 | C      | 2012-01-08 |
|  4 | D      | 2012-01-15 |
+----+--------+------------+
4 rows in set (0.00 sec)

mysql> 
```

# QUERY #2（更简洁的版本）

此查询使用 UNIX 时间戳的平均值。如果所有日期都为 NULL，则使用今天的日期：

```
SELECT id,letter,IFNULL(date,dt) date FROM mytable,
(
    SELECT IF(K=0,DATE(NOW()),avgdt) dt FROM
    (SELECT DATE(FROM_UNIXTIME(AVG(UNIX_TIMESTAMP(date))))
    avgdt FROM mytable) AA,
    (SELECT COUNT(date) K FROM mytable) BB
) A; 
```

# 查询 #2 已执行

```
mysql> SELECT id,letter,IFNULL(date,dt) date FROM mytable,
    -> (
    ->     SELECT IF(K=0,DATE(NOW()),avgdt) dt FROM
    ->     (SELECT DATE(FROM_UNIXTIME(AVG(UNIX_TIMESTAMP(date))))
    ->     avgdt FROM mytable) AA,
    ->     (SELECT COUNT(date) K FROM mytable) BB
    -> ) A;
+----+--------+------------+
| id | letter | date       |
+----+--------+------------+
|  1 | A      | 2012-01-01 |
|  2 | B      | 2012-01-08 |
|  3 | C      | 2012-01-08 |
|  4 | D      | 2012-01-15 |
+----+--------+------------+
4 rows in set (0.05 sec)

mysql> 
```

# 试试看 ！！！

# c# - 使用 UrlRewritingNet 将 url 更改为小写

> ID：15577051
> 
> 赞同：0
> 
> 时间：2013-03-22T18:03:47.130
> 
> 标签：c#, asp.net, seo, umbraco

我正在一个遗留的asp.net 和umbraco 网站上做一些工作。它使用 UrlRewritingNet 来设置 url 操作的规则。

我想在 UrlRewritingNet 文件中创建一个规则，将所有 url 转换为小写。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:28:47.757

似乎不是在配置行的实际字符串中执行此操作的方法。我认为您可以很容易地为此编写自己的扩展，并在处理规则时只使用 ToLower() 实际值。

[http://www.urlrewriting.net/160/en/documentation/documentation/documentation/documentation/documentation.html](http://www.urlrewriting.net/160/en/documentation/documentation/documentation/documentation/documentation.html)

# delphi - Delphi下一个ShellExecuteEx中的多个'cmd.exe'命令

> ID：15577052
> 
> 赞同：0
> 
> 时间：2013-03-22T18:03:48.123
> 
> 标签：delphi, shellexecute

我试图在一个 ShellExecuteEx 中执行多个命令。

每个命令都有自己的参数。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:10:36.260

最简单的方法是将命令写入扩展名为 .bat 的临时文件，并将该文件名传递给 ShellExecuteEx。

另一种方法是尝试使用 cmd.exe 的参数来执行此操作。这将涉及 /C、[& 或 && 运算符](http://www.robvanderwoude.com/condexec.php)和引用地狱的参数。

我的建议是过上轻松的生活，并在其中创建一个包含脚本的临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T09:31:53.607

条件执行有**3 种语法。**命令 1 和 2 您将替换为不同的命令。

**1 -**在两个命令之间放置一个 & 符号`&`，使 command2 在 command1 之后立即执行。

**2 -**在两个命令之间放置两个与号`&&`，以使 command2 仅在 command1 成功完成时才执行。

**3 -**在两个命令之间放置两个管道`||`以使 command2 仅在 command1 失败时执行。

**像这样运行：**

```
ShellExecute(Handle, nil, 'CMD',PChar(c/ **"** command1 **syntaxe** command2 **"**), nil, sw_ShowNormal); 
```

# php - mysql不允许唯一索引上的NULL

> ID：15577065
> 
> 赞同：3
> 
> 时间：2013-03-22T18:04:33.977
> 
> 标签：php, mysql, sql, oracle, mysql-workbench

我使用用户的 mysql 创建了一个表。该表的列是序列、电子邮件、日期创建和日期取消。主要是序列，我试图为电子邮件和 date_canceled 创建一个唯一索引 - 所以当电子邮件处于活动状态时（从未取消 - 意味着 date_canceled 为 NULL），不会插入另一封活动电子邮件或发生这种情况。

我知道它可以用 oracle db 完成，但使用 mysql 唯一索引允许 NULL。

任何建议如何处理？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T20:28:16.553

我对您的问题的理解是，您希望每个用户在任何时候都有一封与他们关联的活动电子邮件，同时保留用户以前邮件的历史记录。

* * *

**解决方案 1**

从 MySQL 5.7.5 开始，您可以通过创建生成的列然后对其施加唯一约束来做到这一点；[http://mysqlserverteam.com/generated-columns-in-mysql-5-7-5/](http://mysqlserverteam.com/generated-columns-in-mysql-5-7-5/)。例如

```
create table UniqueActiveEmailDemo 
(
    sequence bigint not null auto_increment primary key
  , userId bigint not null
  , email nvarchar(1024) not null
  , date_created timestamp default now()
  , date_cancelled datetime
  , single_active_mail_per_user bigint as (if(date_cancelled is null, userId, null))
);

alter table UniqueActiveEmailDemo 
add unique UK_UniqueActiveEmailDemo_SingleActiveMailPerUser 
(single_active_mail_per_user); 
```

因为 MySQL 允许在唯一约束中有多个空值，在取消记录的地方，生成列有空值；这样您就可以拥有任意数量的这些记录。但是，如果记录没有被取消，则生成的列会返回用户的 id；这受唯一约束的约束，因此如果有另一个具有相同用户 ID 的活动记录，则唯一约束将引发异常。

* * *

**解决方案 2**

Sql 小提琴：[http ://sqlfiddle.com/#!9/b54dce/2](http://sqlfiddle.com/#!9/b54dce/2)

然而，一种也适用于早期版本的更简洁的方法是简单地防止 date_cancelled 可以为空；而是在遥远的将来为尚未取消的任何项目将其设置为固定值，然后让 user_id 和 date_cancelled 的组合为空；例如

```
create table UniqueActiveEmailDemo 
(
  sequence bigint not null auto_increment primary key
  , userId bigint not null
  , email nvarchar(1024) not null
  , date_created timestamp default now()
  , date_cancelled datetime not null default '9999-12-31 23:59:59'
);

ALTER TABLE UniqueActiveEmailDemo 
ADD UNIQUE UK_UniqueActiveEmailDemo_SingleActiveMailPerUser 
(userId, date_cancelled); 
```

*   这里的一个区别是您不能在同一日期取消同一用户的两条记录；但实际上，我认为您无论如何都不会得到它。
*   这也意味着您可以拥有将来获得的记录。为避免此问题，您可以将其`9999-12-31 23:59:59`视为具有空值；即具有该值的任何记录都是活动的。
*   `active_from`您还可以通过添加日期和过滤器来解决上述问题`where now() between date_active and date_cancelled`；但是，您需要添加更多检查以确保同一用户的活动窗口不会重叠；这使事情进一步复杂化。
*   添加检查约束将防止未来值；但遗憾的是它们目前没有在 MySQL 中使用（尽管是有效的语句）。[http://dev.mysql.com/doc/refman/5.7/en/create-table.html](http://dev.mysql.com/doc/refman/5.7/en/create-table.html)

`, date_cancelled datetime not null default '9999-12-31 23:59:59' check (date_cancelled = '9999-12-31 23:59:59' or date_cancelled <= now())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:09:17.437

BDB 存储引擎将`NULL`视为唯一值，只允许单个`NULL`值。

[从文档](http://dev.mysql.com/doc/refman/4.1/en/bdb-restrictions.html)：

> 如果允许`NULL`值的列具有唯一索引，则只允许单个 `NULL`值。这与其他存储引擎不同，后者允许`NULL`唯一索引中的多个值。

如果您不想更改存储引擎以获取此行为，您的其他选择是更改表结构以将活动电子邮件和已取消电子邮件存储在不同的表中...创建触发器以强制执行此行为... 或为`active`电子邮件分配一个神奇的日期值，并且不再允许`NULL`此列中的值。

# php - 使用 Twitter 的 API 向某人发送直接消息的问题

> ID：15577071
> 
> 赞同：0
> 
> 时间：2013-03-22T18:04:52.747
> 
> 标签：php, twitter

嘿伙计们，我正在使用以下内容：

```
function confirm($x, $y)
{
    $inerlevelWatch = $x;
    $NewDirectMessage = $y;
    $directmessconect = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $currentTwitteroauth, $currentTwitteroauthsecret);
    $parameters = array('screen_name' => $inerlevelWatch, 'text' => $NewDirectMessage);
    $method = 'direct_messages/new';
    $directmessconect->post($method, $parameters);
} 
```

所以我给了`$innerlevelWatch`一个screen_name，可以说，`Joe`而不是传递给`$NewDirectMessage`=' `testing`'的新直接消息。我创建新连接只是为了在这个函数内发送消息并设置参数。设置方法，然后发帖。

问题是，它似乎并没有真正发送，我不知道为什么，所以如果你能帮我一把，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T11:43:29.990

```
`$consumerKey="your consumerKey";
$consumerSecret ="consumerSecret";
$accessToken ="accessToken ";
$accessTokenSecret ="accessTokenSecret";` 
```

// 创建对象

```
`$tweet = new TwitterOAuth($consumerKey, $consumerSecret, $accessToken,   $accessTokenSecret);` 
```

// 设置状态信息

```
`$tweetMessage="message";`
`$scrren_name='abc';`

`if(strlen($tweetMessage)<=140)
{
$tweet->post('direct_messages/new', array('screen_name' => $scrren_name,'text'=>$tweetMessage));

}` 
```

希望对你有帮助

# mysql - 如何同步两个 MySQL 表？

> ID：15577073
> 
> 赞同：15
> 
> 时间：2013-03-22T18:04:57.710
> 
> 标签：mysql, sql, synchronization

如果我在我的一台服务器上有一张表（让我们称之为`orders`），例如，命名为`local`. 我的另一台服务器也有同一张表，例如，命名为`remote`.

我的问题是，同步这两个表的最佳方法是什么？

如果本地与远程不同，我想要一个替换注册表的解决方案。如果本地表上不存在注册表，则插入注册表。

我曾尝试使用 dump 类似于此的转储命令，但没有按预期工作：

```
/usr/bin/mysqldump --defaults-file=~/my/conf.cnf --skip-opt --skip-add-locks --default-character-set=latin1 --disable-keys --no-create-db --no-create-info --dump-date --compress --quick --replace --where='date > DATE_SUB(NOW(), INTERVAL 1 DAY)' mydb orders >> /backup/myDump 
```

我怎样才能做到这一点？我怎么能做一个脚本来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T18:12:23.123

pt-table-sync 可以这样做：[http ://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html)

另请参阅提到 pt-table-sync 的[其他 SO 问题和答案。](https://stackoverflow.com/search?q=pt-table-sync)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-12T16:31:43.910

我正在解决不断同步两个表的类似问题。

在所有脚本（其中大部分都是旧的）中，我发现了这个积极开发的应用程序（看起来很有希望）

[https://github.com/mrjgreen/db-sync](https://github.com/mrjgreen/db-sync)

我会尝试一下，也许稍后我会写一个例子。

# jquery - 嵌套中继器中选定复选框的计数

> ID：15577075
> 
> 赞同：0
> 
> 时间：2013-03-22T18:05:00.063
> 
> 标签：jquery, repeater

我需要找到在 Jquery 的嵌套中继器内的选定复选框的计数。我的代码如下：

```
<asp:Repeater runat="server" ID="myRepeater" OnItemDataBound="myRepeaterBinding">
  <asp:Repeater runat="server" ID="internalRepeater" OnItemDataBound="internalRepeaterBinding">
    <input class="chkToCompare" type="checkbox" runat="server" id="xxxx" />
  </asp:Repeater>
</asp:Repeater> 
```

在我的按钮单击中，我正在编写如下函数：

```
var boxes = $('#' + '<%= myRepeater.ClientID %>').find($('.chkToCompare'));
var checkedLength = (boxes.filter(':checked').length);
alert(checkedLength); 
```

但是checkedLength总是0。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:18:51.840

ASP.NET 转发器不发出任何包装标记。除非您显式添加一个，否则呈现的 HTML 中没有任何元素的 ID 与`<%= myRepeater.ClientID %>`.

如[this Fiddle](http://jsfiddle.net/bqx9t/)所示，您的计数方法工作正常。

您只需要使用可以在 DOM 中找到的元素来包装外部中继器：

```
<div id="checkboxContainer">
    <asp:Repeater ...>
        ...
    </asp:Repeater>
</div> 
```

然后寻找：

```
var boxes = $("#checkboxContainer .chkToCompare"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:17:07.910

在具有固定 ID 的 div 中使用中继器

```
<div id="repeaterContainer"></div> 
```

在使用中继器时，您使用HTML 标签来包含标题`<thead></thead>`和`<tbody></tbody>`正文，并使用您的复选框来计算`<tbody></tbody>`标签内的中继器项目。然后在您的按钮单击事件上

```
var count=0;$("#repeaterContainer table>tbody>tr").each(function (i, elem) {
                var tr = $(this); if(tr.find("input[class=chkToCompare]").is(":checked")){count++;}}); alert(count); 
```

这应该有效。

# java - 在不循环的情况下制作数组列表的副本

> ID：15577081
> 
> 赞同：0
> 
> 时间：2013-03-22T18:05:28.487
> 
> 标签：java, arrays

我有一个使用继承的数组，我认为基本上有一个包含食物和饮料的数组，看起来像这样

```
allFoodAndDrink.add(new Food(parameters);
allFoodAndDrink.add(new Drink(parameters); 
```

所以食物和饮料都存储在名为的零食数组中，`allFoodAndDrink`但是当想要从某个开始索引到结束索引复制数组时，我被告知要使用：

```
Arrays.copyOfRange(); 
```

但是当像这样使用它时：

```
int[] drink = Arrays.copyOfRange(allFoodAndDrink, 5, 10); 
```

它吐出并出现错误，它的建议是`Arrays.copyOf()`在切换到它时将其转换为它然后吐出另一个错误以恢复到上一个

有任何想法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:12:57.777

使用[`ArrayList#subList()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#subList%28int,%20int%29)and [`ArrayList#toArray()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28T%5b%5d%29)：

```
int first = ...;
int last = ...;

Foods[] drink = new Foods[last - first];
allFoodAndDrink.subList(first, last).toArray(drink); // fill the array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:15:07.313

假设您的意思是`ArrayList`而不是数组，您可以`List`使用复制

```
allFoodAndDrink.subList(5,10); 
```

请注意，这将是一个“浅拷贝”，并且引用将指向相同的对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:08:31.587

感谢我刚刚关注的回复和示例，这就是 int 的来源，我会尝试一些并回复你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:12:51.833

你可以使用`ArrayList`'s 方法`sublist(int fromIndex, int toIndex)`。

```
ArrayList<Foods>() list = allFoodAndDrink.subList(0, allFoodAndDrink.size()-1);

Foods[] array = (Foods[]) list.toArray(); 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#subList(int, int)](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#subList%28int,%20int%29)

您可以使用-method将 an 转换`ArrayList`为数组：http: [//docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray())`toArray()`

# wpf - 使用 DataGridTextColumn 验证禁用/启用按钮

> ID：15577082
> 
> 赞同：4
> 
> 时间：2013-03-22T18:05:30.147
> 
> 标签：wpf, validation, button, datagrid, multidatatrigger

我有这个`DataGrid`：

```
<DataGrid ItemsSource="{Binding CustomerXml}" 
     Name="customersDataGrid" AutoGenerateColumns="False" DataContext="{Binding}">
     <DataGrid.Columns>
         <DataGridTextColumn Header="Name">
             <DataGridTextColumn.Binding>
                 <Binding Path="Name" ValidatesOnDataErrors="True" 
                     UpdateSourceTrigger="PropertyChanged" NotifyOnValidationError="True">
                     <Binding.ValidationRules>
                         <local:NameValidationRule/>
                     </Binding.ValidationRules>
                 </Binding>
             </DataGridTextColumn.Binding>
         </DataGridTextColumn>

         ...

     </DataGrid.Columns>          
 </DataGrid> 
```

我正在尝试按`ValidationRule`结果禁用和启用保存按钮。

```
<Button Content="Save" Name="save" Click="save_Click">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="IsEnabled" Value="false" />
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition 
                             Binding="{Binding ElementName=customersDataGrid, 
                             Path=(Validation.HasError)}" Value="false" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="IsEnabled" Value="true" />
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

但如果`ValidationResult`设置为 true 或 false，按钮仍处于禁用状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T14:02:37.130

所以我找到了解决方案：

```
 int count = 0;

    private void customersDataGrid_Error(object sender, ValidationErrorEventArgs e)
    {
        if (e.Action == ValidationErrorEventAction.Added)
        {
            save.IsEnabled = false;
            count++;
        }
        if (e.Action == ValidationErrorEventAction.Removed)
        {
            count--;
            if (count == 0) save.IsEnabled = true;
        }
    } 
```

# c# - 安装facebook c# sdk

> ID：15577097
> 
> 赞同：4
> 
> 时间：2013-03-22T18:06:57.687
> 
> 标签：c#, windows-phone-8, facebook-c#-sdk

我找不到任何其他问题......所以我一定做错了什么。我以前从未使用过 NuGet，所以我的问题很可能就在那里。

无论如何，我正在 VS2012 中制作一个 WP8 应用程序。我去了项目 > 管理 NuGet 包 > 在线 > Facebook。它是 6.4.0 版。当我点击安装时，我收到以下错误：

> 无法安装包“Facebook 6.4.0”。您正在尝试将此包安装到以“WindowsPhone,Version=v8.0”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T05:27:16.203

我遇到了同样的问题，对我来说更新 Nuget 包安装程序有效。初始版本是 2.0，后来升级到 2.5。转到工具 => 扩展和更新 => 更新 => Visual Studio 库。在那里你可以看到 Nuget 安装程序可用的更新。更新 Nuget 后，尝试安装 facebook 和 facebook 客户端包。希望这可行....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:29:51.563

您看到的错误意味着您尝试为 Nuget 安装的包与 WP7/8 项目不兼容。查看[这篇](http://www.developer.nokia.com/Community/Wiki/How_to_use_Facebook_Graph_API_in_Windows_Phone)诺基亚文章，该文章解释了如何在 WP7/8 项目中使用 Facebook Graph API 的修改版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:33:27.717

我也遇到了这个问题，但是以前的版本可以正常工作。转到工具 => 库包管理器 => 包管理器控制台并输入 Install-Package Facebook -Version 5.3.2.0 并按 Enter。

希望这会有所帮助:)

# c - 编译时需要左值错误

> ID：15577100
> 
> 赞同：0
> 
> 时间：2013-03-22T18:07:07.227
> 
> 标签：c, struct

我有一个结构

```
 typedef struct _scaffale {
     int NumeroScaffale;
     scaffali * succ;
     copia** pos;
 } scaffale; 
```

其中我有一个 struct copia 数组。错误出现在以下代码中：

```
copia** temp;
temp=scaff->pos;
(temp+controllo)=nuovo->copie; 
```

准确地说，在第三行。问题是：为什么这一行给我这个错误，而在下面的代码中我使用相同的构造是完全允许的：

```
while(i<=MAXLIBRI){
    if ((temp+i)!=NULL) {
        i=i+1;
    }
    else break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:11:26.457

`(temp+controllo)`是一个右值。我的意思是它是一个计算值，而不是放置某些东西的位置。我猜你真正的意思是`*(temp+controllo) = nuovo->copie;`，它会分配`nuovo->copie`到由`temp+controllo`.

打个比方，如果`i`是一个`int`，你可以说`i = 3`，但你不能说`(i+1) = 3`。我希望很明显为什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:12:05.017

`(temp+controllo)`是一个计算值，并且不遵循作为正确的语言规则，`l-value`这是一种奇特的说法，即“你不能把它放在赋值运算符的左边”。

# c# - 在每个用户的窗口内选择随机时间的算法

> ID：15577104
> 
> 赞同：2
> 
> 时间：2013-03-22T18:07:17.683
> 
> 标签：c#, algorithm, random

我需要每天随机选择 N 个事件，但它们之间不能太接近（M）。因此，N 个事件必须在特定窗口 (W) 内相隔至少 M。在这种情况下，我想到的窗口是 12 小时。

*   N = 事件数
*   T = 事件发生的时间 (UTC)
*   M = 他们应该分开的最小因素（小时）。
*   W = 事件的窗口（现在到现在 + 12 小时）。
*   U = 用户（可能对这个问题不重要）

我可能会弄清楚这一点，但我认为这将是一个有趣的 StackOverflow 问题，并且对人们如何解决它感兴趣。

提前致谢 ：）

**更新：将答案移至答案**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:32:24.220

试试这个：

它随机拆分可用时间（窗口计数 * 最小值），然后对时间进行排序并添加最小数量以生成最终事件数组`T[]`。

```
 static Random rnd=new Random();

    static void Main(string[] args)
    {
        double W=12;
        double M=1.0;

        int N=7;

        double S=W-(N-1)*M;
        double[] T=new double[N];

        for(int i=0; i<N; i++)
        {
            T[i]=rnd.NextDouble()*S;
        }
        Array.Sort(T);
        for(int i=0; i<N; i++)
        {
            T[i]+=M*i;
        }

        Console.WriteLine("{0,8} {1,8}", "#", "Time");
        for(int i=0; i<N; i++)
        {
            Console.WriteLine("{0,8} {1,8:F3}", i+1, T[i]);    
        }

        // With N=3, Window 12h, Min. Span = 5h
        //      #     Time
        //      1    0.468
        //      2    5.496
        //      3   10.529

        // With N=7, Window 12h, Min. Span = 1h
        //      #     Time
        //      1    0.724
        //      2    2.771
        //      3    4.020
        //      4    5.790
        //      5    7.331
        //      6    9.214
        //      7   10.673
    } 
```

作为检查，当最小时间完全覆盖时间窗口时，事件是等距的。因此，对于 12 小时窗口上的 3 个事件，最短时间为 6 小时，该算法按预期在 0.0 、6.0 和 12.0 处产生事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:06:25.330

您可以在这里使用我对我的问题的想法：[生成非连续组合](https://stackoverflow.com/questions/15421886/generating-non-consecutive-combinations)，本质上要求您只解决 M=0 的情况。

如果你想跳过描述，算法在帖子末尾给出，它没有不可预测的while循环等，并且保证是O（N log N）时间（如果不是的话，本来是O（N）用于排序步骤）。

* * *

**详细描述**

为了将一般的 M 情况简化为 M=0 的情况，我们将每个可能的组合（具有“至少 M 约束”）映射到没有“至少 M”分离约束的组合。

如果您的事件是`T1, T2, .., TN`这样的，那么您将它们映射到这样`T1 <= T2 -M, T2 <= T3 - M ...`的事件`Q1, Q2, .. QN`

```
Q1 = T1
Q2 = T2 - M
Q3 = T3 - 2M
...
QN = TN - (N-1)M. 
```

这些 Q 满足 的性质`Q1 <= Q2 <= ... <= QN`，并且映射是 1 到 1。（从`T`你可以构造`Q`，从`Q`你可以构造`T`）。

因此，您需要做的就是生成`Q`（本质上就是这种`M=0`情况），并将它们映射回`T`.

请注意，生成的窗口`Q`变为`[Now, Now+12 - (N-1)M]`

要解决这个问题，只需在您的窗口中`M=0`生成随机数并对其进行排序。`N`

* * *

**最终算法**

因此你的整个算法将是

```
Step 1) Set Window = [Start, End - (N-1)M]
Step 2) Generate N random numbers in the Window.
Step 3) Sort the numbers generated in Step 2\. Call them Q1, Q2, .. , QN
Step 4) Create Ti with the formula Ti = Qi + (i-1)M, for i = 1 to N.
Step 5) Output T1,T2,..,TN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:23:37.987

```
timeItems = new List();
int range;
double randomDouble;

for i = 1 to N
{   
   range = W/M;

   //assumes generate produces a random number between 0 and 1 (exclusive)
   randomDouble = RandomGenerator.generate() * (range); 
   T =  Math.floor(randomDouble)*M;
   timeItems.add(T);
}

return timeItems 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T18:25:56.127

如果我们假设事件是瞬时发生的（因此，可以在时间 = 窗口结束时发生，您可以执行以下操作：

```
//Using these, as defined in the question
double M;
int N;
DateTime start; //Taken from W
DateTime end; //Taken from W

//Set these up.
Random rand = new Random();
List<DateTime> times;
//This assumes that M is 
TimeSpan waitTime = new TimeSpan.FromHours(M);
int totalSeconds = ((TimeSpan)end-start).TotalSeconds;

while( times.Count < N )
{
    int seconds = rand.Next(totalSeconds);
    DateTime next = start.AddSeconds(seconds);
    bool valid = true;
    if( times.Count > 0 )
    {
        foreach( DateTime dt in times )
        {
            valid = (dt > next && ((TimeSpan)dt - next) > waitTime) ? true : false;
            if( !valid )
            {
                break;
            }
        }
    }
    if( valid )
    {
        times.Add(next);
    }
} 
```

现在，在一个 12 小时的窗口中，每个事件在下一个事件之后至少一个小时，你最好有一个小的 N - 我上面的伪代码不会检查是否有可能将 N 个事件放入 X 时间，M 小时之间每个事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T19:28:36.393

首先考虑生成*一个*事件的工作，这样还有 (n-1) 个事件要生成（每个事件需要至少相隔 M）并且总共剩下 w 时间。

时间 t 可以在 0 到 w-(n-1)m 之间。t 的平均值应为 w/(n-1)。现在，使用任何你喜欢的分布（我推荐泊松）来生成一个均值为 w/(n-1) 的随机数。如果数字大于wn-1)m，则再次生成。那会给你的。

递归调用 (offset=offset+t, w=wt, n=n-1, m=m) 生成更多数字。

```
def generate(offset, w, n, m):
    mean = w/(n-1);
    t=ininity;
    while (t> (w-(n-1)m)):
         t= poisson( w/(n-1) )
    return [t+offset] + generate(offset+t, w-t, n-1, m) 
```

我没有为角落条件和其他情况编写代码，我把它留给你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T15:00:14.660

这是我的解决方案。如果您分开的时间和 numOfEvents 冲突，您会得到一些奇怪的行为。玩弄它，看看会发生什么。

```
using System;
using System.Collections.Generic;

namespace RandomScheduler
{
    class Program
    {
        public static Random R = new Random();

        static void Main()
        {
            var now = DateTime.Now;
            var random = new Random((int)now.Ticks);
            const int windowOfHours = 12;
            const int minimumTimeApartInHours = 2;
            const int numOfEvents = 5;

            // let's start the window 8 AM
            var start = new DateTime(now.Year, now.Month, now.Day, 8, 0, 0, 0);
            // let's end 12 hours later
            var end = start.AddHours(windowOfHours);

            var prev = null as DateTime?;
            const int hoursInEachSection = windowOfHours / numOfEvents;

            var events = new List<DateTime>();

            for (var i = 0; i < numOfEvents; i++)
            {
                // if there is a previous value
                // let's at least start 2 hours later
                if (prev.HasValue)
                    start = prev.Value.AddHours(minimumTimeApartInHours);

                DateTime? @event;
                do
                {
                    // pick a random double, so we get minutes involved
                    var hoursToAdd = random.NextDouble()*hoursInEachSection;
                    // let's add the random hours to the start
                    // and we get our next event
                    @event = start.AddHours(hoursToAdd);

                // let's make sure we don't go past the window
                } while (@event > end); 

                prev = @event;
                events.Add(@event.Value);
            }

            Console.WriteLine(string.Join("\n", events));
            Console.ReadLine();
        }
    }
} 
```

# c++ - 升压程序选项中的互斥选项集

> ID：15577107
> 
> 赞同：19
> 
> 时间：2013-03-22T18:07:25.417
> 
> 标签：c++, boost-program-options, command-line-arguments

我的程序 ( `prog.exe`) 支持以下四个标志：`-P`、`-p`和。然而：`-b``-s`

*   `-b`并且`-p`必须一起指定，构成一个集合，并且具有数值，例如`-b 42`
*   `-s`不能用上面的集合指定，反之亦然
*   `-P`在这两种情况下都是强制性的

因此`prog.exe`只能作为

```
prog.exe -P -s 
```

或者

```
prog.exe -P -b -42 -p 8 
```

有没有办法在 boost 程序选项中指定上述一组互斥的命令行选项？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-20T17:14:01.037

您应该从一些教程[[1]](http://www.radmangames.com/programming/how-to-use-boost-program_options) [[2]](http://www.baptiste-wicht.com/2012/07/manage-command-line-boost-program-options/)开始了解其`boost::program_options`工作原理。

然后，您可以定义两个互斥选项，只需定义一个小函数，如[real.cpp](http://www.boost.org/doc/libs/1_55_0/libs/program_options/example/real.cpp)中所述。例如，您可以指定定义`conflicting_options()`函数的两个冲突（或依赖）选项：

```
void conflicting_options(const boost::program_options::variables_map & vm,
                         const std::string & opt1, const std::string & opt2)
{
    if (vm.count(opt1) && !vm[opt1].defaulted() &&
        vm.count(opt2) && !vm[opt2].defaulted())
    {
        throw std::logic_error(std::string("Conflicting options '") +
                               opt1 + "' and '" + opt2 + "'.");
    }
} 
```

然后打电话

```
conflicting_options (vm, "quiet", "verbose"); 
```

紧接着`boost::program_options::store()`

我仍然不明白是否可以定义两个互斥的位置选项，但这应该是另一个问题。

# php - 验证密码失败

> ID：15577108
> 
> 赞同：0
> 
> 时间：2013-03-22T18:07:28.437
> 
> 标签：php, mysql, hash, password-encryption

我浏览了这个链接[http://crackstation.net/hashing-security.htm#properhashing](http://crackstation.net/hashing-security.htm#properhashing)并使用了为 php 提供的代码。

我可以通过调用示例`create_hash($password)`中的函数来注册新用户。`PasswordHash.php`

现在我尝试通过输入新创建的密码登录，但它失败了。我称函数为`validate_password($password, $good_hash)`. 我按原样传递输入的密码，并将存储在数据库中的良好哈希密码按原样传递给此函数。它总是返回`false`。

这是代码段：

```
$validPwd = validate_password($password,$goodpassword) ;

if($validPwd == FALSE) {
   echo "invalid password. please retry.".$validPwd.$password."==".$goodpassword;
}
else {
   //..........
} 
```

知道为什么我`false`一直都喜欢吗？我看到输入的密码正确，并且通过`echo`'ing.

# php - 在 php 中为 utf_unicode_ci 准备唯一值

> ID：15577112
> 
> 赞同：0
> 
> 时间：2013-03-22T18:07:57.270
> 
> 标签：php, character-encoding, collation, unique-constraint

我需要从 PHP 中的 ISO-8859-1 编码文件中读取值，并使用 PDO 将它们写入已编码`utf8_unicode_ci`并具有唯一索引的数据库表中。有时数据缺少特殊字符，导致重复键错误。示例：数据包含“Entrainement”和“Entraînement”。有没有我可以用来避免这种情况的 PHP 字符串函数？

最好是一个转换函数，这样我就不必遍历整个数组来检查是否已经插入了一个值。

这是我正在尝试做的一个例子：

```
$values = array("Entraînement", "Entrainement");
$db = new PDO("mysql:dbname=mydb;host=localhost;charset=utf8", "user", "pw");
$db->exec("SET NAMES 'UTF-8'");
$stmt = $db->prepare("INSERT INTO mytable(myvalue) VALUES(?)");
$already_inserted = array();
foreach($values as $v) {
    $v = $v_inserted = iconv('iso-8859-1', 'utf-8', $v);
    // Do magic string conversion here
    // $v_inserted = collation_convert($v_inserted)
    if(isset($already_inserted[$v_inserted])) {
        continue;
    }
    if($stmt->execute(array($v))) {
        $already_inserted[$v_inserted] = true;
    } 
```

}

此示例应仅插入“Entraînement”并跳过“Entrainement”。

在原始程序中，我使用 Doctrine ORM 而不是 PDO，所以我可以在 SQL 中做很多事情。此外，我在整个 Latin1 范围内都有特殊字符 - 法语、德语、西班牙语等。

我无法将 DB 字段定义更改为，`utf8_bin`因为它是电子商务包的一部分 - 各种事情都可能会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:16:52.423

好吧，您绝对应该将值转换为 UTF-8 并使用 UTF-8 连接编码。否则，您的应用程序根本无法利用 UTF-8，因为您的应用程序将只能发送和接收 ISO-8859-1 包含的字符。与 Unicode ☹ 相比，这是非常非常少的数量。

* * *

这与您的问题无关*，在`unicode_ci`排序规则中，`î`被认为与`i`. 如果您需要将它们视为不同的字符，请使用其他排序规则：

```
SELECT 'î' = 'i' COLLATE 'utf8_unicode_ci'
//1

SELECT 'î' = 'i' COLLATE 'utf8_bin'
//0 
```

没有 German** 排序规则，所以我想`utf8_bin`这就是您想要的。

* * *

*只有当声明的连接编码与您发送的物理字节的编码不匹配时才会出现问题。IE 如果您使用 UTF-8 连接编码发送 ISO-8859-1 字节，如果没有错误，您将得到废话。反之亦然。

**我从您的个人资料中查找了该内容，如果您实际上需要其他语言，则可能会对此进行整理。

# ios - UIWebview 中的大页面并不总是对角滚动

> ID：15577114
> 
> 赞同：1
> 
> 时间：2013-03-22T18:08:16.060
> 
> 标签：ios, uiwebview

我在 UIWebview 中有一个页面，其主要元素比 webview 本身更高更宽。我希望能够以用户选择的任何方式平滑地“平移”页面：水平、垂直、对角线或以圆周运动滑动。

通常它可以工作，但是大约每三个手势一次，UIWebView 只在一个轴上滚动（有时是 x，有时是 y），尽管同时在​​两个轴上做手势。

问题往往发生在 webview 加载之后。在成功的二维滚动之后，它往往不会再经常发生。

有没有其他人看到这个问题或知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:44:40.360

发现它是什么。我有一个 UIScrollViewDelegate 监听 UIWebView 的 UIScrollView 来做我可能不应该做的各种其他事情。问题中的症状是为什么！

# elasticsearch - ElasticSearch：如何从头部删除索引条目？

> ID：15577120
> 
> 赞同：5
> 
> 时间：2013-03-22T18:08:45.807
> 
> 标签：elasticsearch

我想直接从 MOBZ 的 ElasticSearch 头（Web UI）中删除索引条目。

我在“任何请求”部分尝试了 DELETE 查询，内容如下：

```
{"query":{"term":{"supplier":"ABC"}}} 
```

然而，我得到的回报是：

```
{
ok: true
acknowledged: true
} 
```

并且条目不会被删除。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T09:22:10.843

您应该已经从您的帖子数据中删除了“查询”。您只需要它来进行 _search，并且应该使用 _query 入口点进行删除。在这种情况下，很明显该帖子只是一个查询，因此使其显式声明它是一个查询是重复的（实际上是无关紧要的）。

那是：

```
curl -XPOST 'localhost:9200/myindex/mydoc/_search' -d 
'{"query":{"term":{"supplier":"ABC"}}}' 
```

可以很好地进行搜索。但是要通过查询删除，如果您尝试：

```
curl -XDELETE 'localhost:9200/myindex/mydoc/_query' -d 
'{"query":{"term":{"supplier":"ABC"}}}' 
```

它不起作用（请注意 _query 入口点的更改，以及将 CURL 参数切换为删除）。您需要致电：

```
curl -XDELETE 'localhost:9200/myindex/mydoc/_query' -d 
'{"term":{"supplier":"ABC"}}' 
```

让我知道这是否有帮助。

如果您想在 HEAD 中执行此操作：

1.  放入`/stock/one/_query`“GET/PUT/POST/DELETE”下拉框旁边的任何请求文本框

2.  在下拉菜单中选择删除

3.  请求正文应该是`{"term":{"vendor":"Socks"}}`

您的问题是您使用了以下请求正文：`{"query":{"term":{"vendor":"Socks"}}}` 这对于搜索很好，但对于删除则不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:33:46.913

我会首先发出一个搜索请求，以验证您要删除的文档是否实际上是由您的查询返回的。

不可能给出明确的帮助，因为有很多事情可能会出错，但这里有一些可能的问题：

*   您没有在 ES Head 查询中指定正确的索引/类型
*   您需要在第二个输入框中指定索引和类型，而不是第一个。第一行用于主机地址，并自动添加尾部斜杠
*   您需要使用下拉菜单中的删除命令
*   您的字段分析器正在以 Term 查询找不到的方式更改字段文本。

很可能，这是最后的选择。如果您没有指定分析器，则 ES 选择的默认分析器是标准分析器，其中包括一个小写过滤器。因此，术语“ABC”从未被索引，而是“abc”被索引。

词条查询根本不分析，所以区分大小写很重要。

如果这些提示没有帮助，请发布您的地图和一些示例数据，我们可能会提供更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-24T06:05:07.567

通过 doc Id 从插件头中删除的简单方法：

1.  转到插件头中的任何请求选项卡
2.  只需`http:/localhost:9200/myindex/indextype/id`在 DELETE 下拉框上方的文本框中输入
3.  从下拉列表中选择**删除**
4.  通过单击请求按钮执行请求

这是示例图像：

![](../Images/ccafed7bc532f2e0ebe6cb8bb17e8da4.png)

# wpf - WPF绑定StringFormat中的＆符号

> ID：15577122
> 
> 赞同：2
> 
> 时间：2013-03-22T18:08:51.663
> 
> 标签：wpf, data-binding, binding, wpf-4.0

我正在尝试创建一个字符串格式，它的文字字符串包含一个 & 符号。我试过 & 和 & amp; （没有空格）但两者都会导致 VS2010 设计器出现异常。这是我正在使用的：

```
Text="{Binding Path=LearningOpportunities, StringFormat='Sharing & Learning Opportunitites:\{0\}'}" 
```

如果我使用 '&'，它会告诉我“以 & 符号开头的实体引用或序列必须以分号 ';' 结尾”。如果我使用 & amp;，它会得到一个 FormatException：“索引（从零开始）必须大于或等于零并且小于参数列表的大小。” 一段时间以来，我一直在远离 WPF 进行 Web 开发，所以我感觉有点生疏了。我怎样才能得到这个工作？

编辑：有很多关于逃避是罪魁祸首的猜测，据我所知，这都是不正确的。因此，为了解决这个问题，这就是有效和无效的方法，将 & 符号排除在等式之外：

**有效的格式：**

```
StringFormat=Sharing and learning opportunitites:\{0\}
StringFormat='Sharing and learning opportunitites:\{0\}'
StringFormat={}Sharing and learning opportunitites:{0}
StringFormat='{}Sharing and learning opportunitites:{0}'
StringFormat=Sharing and learning opportunitites:{0}
StringFormat='Sharing and learning opportunitites:{0}' 
```

**无效的格式：**

```
StringFormat=Sharing and learning opportunitites:{}{0}
StringFormat=Sharing and learning opportunitites:{{0}}  (Outputs literal "{0}") 
```

*总而言之，您可以通过在字符串开头*放置左大括号和右大括号 {} 来转义字符串中的所有大括号，或者您可以使用反斜杠转义单个大括号。令人惊讶的是，它仍然可以在没有转义大括号的情况下工作，但在 Visual Studio 中语法着色非常难看。为避免难看的语法着色，您可以在格式字符串周围使用单引号。

因此，随着转义被搁置，问题在于向格式字符串添加一个＆符号会导致异常，无论它是否被转义。转义和未转义之间的唯一区别是它给出了不同的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:15:33.940

编辑编辑：

啊哈！原来是苹果酒设计表面的血腥错误！

证明：

试试这个 XAML 行序列：

```
<StackPanel>
    <!-- should show '$YoMamma' -->
    <TextBlock Text="{Binding Path=Value, StringFormat=&#x24;{0}}"/>
    <!-- should show '%YoMamma' -->
    <TextBlock Text="{Binding Path=Value, StringFormat=&#x25;{0}}"/>
    <!-- should show '&YoMamma', but crashes the designer -->
    <!--<TextBlock Text="{Binding Path=Value, StringFormat=&#x26;{0}}"/>-->
    <!-- should show '"YoMamma', but crashes the designer -->
    <!--<TextBlock Text="{Binding Path=Value, StringFormat=&#x27;{0}}"/>-->
    <!-- should show '(YoMamma' -->
    <TextBlock Text="{Binding Path=Value, StringFormat=&#x28;{0}}"/>
    <!-- should show ')YoMamma' -->
    <TextBlock Text="{Binding Path=Value, StringFormat=&#x29;{0}}"/>

</StackPanel> 
```

我提交了一个错误报告来连接，我们看看是否有人回应： [https ://connect.microsoft.com/VisualStudio/feedback/details/782059/cider-vs2010-designer-bug-with-binding-using-escaped-字符串格式的实体](https://connect.microsoft.com/VisualStudio/feedback/details/782059/cider-vs2010-designer-bug-with-binding-using-escaped-entities-in-stringformat)

这个答案的其余部分是半没有意义的，尽管可能有用，因为“错误”在设计者身上。

这里要记住的是 XAML**是**XML，因此您需要相应地对 & 符号进行编码：

```
&amp; 
```

应该工作，以及：

```
&#38; 
```

编辑：

啊，是的 - 正如评论中反复讨论的那样，问题不在于＆符号*本身*，而在于 a 周围大括号内替换标记的“转义” `Binding`- 要解决这个问题，你实际上有三个选择：

编辑 2：呸，我认为降价可能不喜欢我的帖子（而且我在某一点上错了） - 让我们看看我是否可以拼凑一个完整的例子：

以防万一，这里还有一个 pastebin 链接：http: [//pastebin.com/yfrpvxs1](http://pastebin.com/yfrpvxs1)

假设我们有一个这样的上下文对象：

```
public class Foo : INotifyPropertyChanged
{
    private string _value;
    public string Value
    {
        get { return _value; }
        set { _value = value; FireNpc("Value"); }
    }
    private decimal _numberValue;
    public decimal NumberValue
    {
        get { return _numberValue; }
        set { _numberValue = value; FireNpc("NumberValue"); }
    }
    private DateTime _dateValue;
    public DateTime DateValue
    {
        get { return _dateValue; }
        set { _dateValue = value; FireNpc("DateValue"); }
    }
    public event PropertyChangedEventHandler PropertyChanged = delegate { };
    private void FireNpc(string name)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

还有一个窗口代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new Foo()
            {
                Value = "YoMamma", 
                DateValue = DateTime.Now, 
                NumberValue = 3.14m
            };
    }
} 
```

让我们 XAML！

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <!-- should show '#1:Foo & Bar:YoMamma' -->
        <TextBlock Text="{Binding Path=Value, StringFormat=#1:Foo &amp; Bar:{0}}"/>

        <!-- should show '#2:Foo & Bar:YoMamma' -->
        <TextBlock>
            <TextBlock.Text>
                <Binding Path="Value" StringFormat="#2:Foo &amp; Bar:{0}"/>
            </TextBlock.Text>
        </TextBlock>

        <!-- will actually show the '{' and '}', so 'Foo & Bar:{0}' -->
        <TextBlock Text="{Binding Path=Value, StringFormat=Foo &amp; Bar:{{0}}}"/>

        <!-- default 'custom' (there's a fun oxymoron) format - should be '$3.14' -->
        <TextBlock Text="{Binding Path=NumberValue, StringFormat=c}"/>

        <!-- custom 'custom' (bear with me) format -->
        <TextBlock Text="{Binding Path=DateValue, StringFormat=MM/dd/yyyy}"/>

        <!-- multi parameter formatting-->
        <TextBlock>
            <TextBlock.Text>
                <MultiBinding StringFormat="As of {2:MM/dd/yyyy}, {0} cost {1:c}">
                    <Binding Path="Value"/>
                    <Binding Path="NumberValue"/>
                    <Binding Path="DateValue"/>
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </StackPanel>
</Window> 
```

现在，借助它`MultiBinding`，我们可以做一些愚蠢的事情——让我们将它添加到我们的上下文中：

```
 // Heh...don't actually do this, naturally...
    private string _ampersandValue;
    public string AmpersandValue
    {
        get { return _ampersandValue; }
        set { _ampersandValue = value; FireNpc("AmpersandValue"); }
    }

    this.DataContext = new Foo()
        {
            Value = "YoMamma", 
            DateValue = DateTime.Now, 
            NumberValue = 3.14m,
            AmpersandValue = "&"
        }; 
```

并添加此 XAML：

```
 <!-- And a crazy-person's method, using multi parameter formatting-->
    <TextBlock>
        <TextBlock.Text>
            <MultiBinding StringFormat="{}{0} {1} {0} = {0}">
                <Binding Path="Value"/>
                <Binding Path="AmpersandValue"/>
            </MultiBinding>
        </TextBlock.Text>
    </TextBlock> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:14:15.597

您需要使用`&amp;`& 符号，并删除`\`充当转义字符的符号。您还有不需要的额外`'`字符。尝试以下操作：

```
Text="{Binding Path=LearningOpportunities, StringFormat=Sharing &amp; Learning Opportunitites:{0}}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:26:31.597

每当我想`StringFormat`在绑定中使用，并且我的格式包含额外的文本或空格时，我都会在前面放置一组额外的花括号，如下所示：

```
StringFormat={}Sharing and learning opportunitites:{0} 
```

我知道我在网上看到过使用其他方法的参考资料，但它们都曾让我失望过。我认为不同版本的 WPF 支持不同的`StringFormat`语法，因此根据您使用的版本，其他语法可能也可以，但是上面是我发现唯一一个相当普遍的语法。

此外，您还需要使用`&amp;`转义`&`字符

```
StringFormat={}Sharing &amp; learning opportunitites:{0} 
```

# c - 为什么这段代码会计算来自 linux 和 windows 文本文件的不同行数？

> ID：15577123
> 
> 赞同：1
> 
> 时间：2013-03-22T18:08:58.630
> 
> 标签：c, file-io, newline

这段代码，

```
lineCount = 1;
do{ //find the line count in the file
    c = fgetc(fp);
    if(c == '\n') lineCount++;
}
while(c != EOF);
fclose(fp); 
```

从这个文件中计算 6 行

```
5 7 9 3 2 10 1 11 6 4 14 0 12 8 13 
3 4 10 8 0 12 13 2 7 1 9 5 6 14 11 
12 14 11 8 0 7 3 5 1 6 4 13 10 9 2 
14 11 13 0 2 12 9 3 5 7 1 6 8 4 10 
0 1 8 6 5 3 11 2 7 9 4 12 10 14 13 
```

并从此文件中计算 5 行

```
39 47 37 30 7 38 17 49 11 1 29 41 25 19 10 45 23 0 32 15 2 9 4 6 21 40 20 24 5 31 34 3 33 48 44 27 14 26 28 35 16 42 46 36 12 8 22 13 18 43 
37 13 24 28 34 27 5 41 36 29 44 26 0 15 40 31 23 35 9 8 4 33 21 6 11 49 2 7 43 32 16 1 30 42 39 14 45 10 38 22 19 17 20 25 18 47 48 46 3 12 
0 49 26 20 14 12 10 3 9 23 15 37 5 32 4 42 25 46 38 45 40 19 22 1 39 29 7 41 33 13 30 35 11 6 18 31 21 28 24 36 16 43 27 34 44 17 2 8 47 48 
0 1 20 11 28 3 43 9 15 25 45 29 33 19 48 18 17 16 14 34 10 7 42 4 37 41 22 30 23 21 32 39 2 46 8 36 40 27 31 13 6 38 12 5 44 26 35 24 49 47 
15 30 18 7 34 25 43 14 38 48 40 9 33 26 28 27 21 0 20 10 47 8 11 32 12 5 36 4 46 42 6 29 13 31 23 17 39 35 19 49 24 41 44 16 37 45 2 1 22 3 
```

原因是什么？

**编辑** 我在 Windows 中创建了一个文件，在 Windows 中创建了 5 行，在 Linux 中创建了 5 行，Windows 文件计数为 5，Linux 文件计数为 6。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:40:34.603

您从 1 开始计数，并为遇到的每个换行符递增。如果一个文件有一行——一串非换行符后跟一个换行符——然后结束，则从 1 开始计数，然后将其递增一次，行数为 2。

也许您想要做的就是从 0 开始计数，为每个换行递增，并记下任何最终的非换行终止行？（这有点难。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:45:05.953

如果假设测试数据与上面发布的相同并`fp`作为文本文件打开：

我在 Linux 和 Windows 上对此进行了测试。两者都打印 6（当然，由于逻辑不正确，假设至少有 1 行）

gcc - 4.5.3

`cl`VS2010 的微软编译器。

此外，`linecount`必须从而`0`不是`1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:57:33.757

您应该*验证*这两个文件实际上只有四个换行符。在 Linux 中，使用`xxd`命令以十六进制转储文件的内容，然后计算`a`字符数（因为换行符是十六进制中的字母 'a'）：

```
$ cat foo.txt
5 7 9 3 2 10 1 11 6 4 14 0 12 8 13
3 4 10 8 0 12 13 2 7 1 9 5 6 14 11
12 14 11 8 0 7 3 5 1 6 4 13 10 9 2
14 11 13 0 2 12 9 3 5 7 1 6 8 4 10
0 1 8 6 5 3 11 2 7 9 4 12 10 14 13
$ xxd -p foo.txt
352037203920332032203130203120313120362034203134203020313220
38203133200a332034203130203820302031322031332032203720312039
20352036203134203131200a313220313420313120382030203720332035
20312036203420313320313020392032200a313420313120313320302032
20313220392033203520372031203620382034203130200a302031203820
362035203320313120322037203920342031322031302031342031330a     <- note the 'a' at the end
$ xxd -p foo.txt | grep -o a | wc -l
5 
```

您可能会发现“6 行”文件中确实有五个换行符。

# c - 字符数组后的奇怪字符

> ID：15577124
> 
> 赞同：8
> 
> 时间：2013-03-22T18:09:04.650
> 
> 标签：c, arrays, string, character, scanf

我是 C 的真正初学者，但我正在学习！

我之前偶然发现了这个问题，并决定问它的原因是什么。请解释您的答案，以便我学习。

我制作了一个程序，允许您输入 5 个字符，然后显示您编写的字符并还原它们，例如：“asdfg”-“gfdsa”。奇怪的是在输入的原始字符之后显示了一个奇怪的字符。

这是代码：

```
char str[5];
char outcome[] = "OOOOO";
int i;
int u;

printf("Enter five characters\n");

scanf("%s", str);

for(i = 4, u = 0; i >=0; u++, i--){
    outcome[i] = str[u];
}

printf("\nYou wrote: %s. The outcome is: %s.", str , outcome);

return 0; 
```

如果我输入：“asdfg”，它会显示：“asdfg♣”，这是为什么呢？

谢谢你的时间，请解释你的答案:)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T18:11:29.757

因为没有空终止符。在 C 中，“字符串”是一系列连续字节（字符），以称为空终止符 ( `'\0'`) 的标记字符结尾。您的代码从用户那里获取输入并填充所有 5 个字符，因此您的字符串没有“结束”。然后，当您打印字符串时，它将打印您的 5 个字符 ( `"asdfg"`)，并且它将继续打印堆栈上的任何垃圾，直到遇到空终止符。

```
char str[6] = {'\0'}; //5 + 1 for '\0', initialize it to an empty string
...
printf("Enter five characters\n");
scanf("%5s", str);  // limit the input to 5 characters 
```

限制格式规范的好处是，即使输入超过 5 个字符，也只有 5 个字符会存储到您的字符串中，始终为空终止符留出空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:10:22.343

你的字符串`str[5];`太短了。

它应该是

```
str[6]; 
```

当您打印它时，代码会超出该数组的范围。

您还必须为 str[] 数组设置一个空终止字符来标记数组的结尾。

```
str[5] = '\0' 
```

# spring - @Import 覆盖 Spring @PropertySource

> ID：15577125
> 
> 赞同：13
> 
> 时间：2013-03-22T18:09:07.323
> 
> 标签：spring, properties

我在类 DefaultConfig 中有一个属性`test=default`，我正在使用 @PropertySource 注释使它们可用。

```
@Configuration
@PropertySource("classpath:default.properties")
public class DefaultConfig {} 
```

然后我希望能够覆盖到`test=override`，它位于类 OverrideConfig 的不同属性文件中，所以我再次使用@PropertySource。

```
@Configuration
@Import(DefaultConfig.class)
@PropertySource("classpath:override.properties")
public class OverrideConfig {} 
```

我配置了一个测试来证明它有效。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={OverrideConfig.class})
public class TestPropertyOverride {

    @Autowired
    private Environment env;

    @Test
    public void propertyIsOverridden() {
        assertEquals("override", env.getProperty("test"));
    }

} 
```

当然不是。

`org.junit.ComparisonFailure: expected:<[override]> but was:<[default]>`

最大化调试，我可以看到发生了什么：

```
StandardEnvironment:107 - Adding [class path resource [default.properties]] PropertySource with lowest search precedence
StandardEnvironment:107 - Adding [class path resource [override.properties]] PropertySource with lowest search precedence 
```

好像倒退了。我是否犯了一个简单的错误或误解了这一点，或者您是否希望@Import-ed 配置类中的@PropertySource 定义的属性被@Import-ing 类中的@PropertySource 中定义的属性覆盖？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-28T20:54:00.263

这是[Helder Sousa](https://jira.spring.io/secure/ViewProfile.jspa?name=htmsousa)的解决方案，作为对 OP 创建[的 JIRA 问题的评论：](https://jira.spring.io/browse/SPR-10409?focusedCommentId=101393&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-101393)

> [T] spring xml 中可用的行为（一个 xml 导入另一个 xml）可以使用嵌套配置实现：
> 
> ```
> @Configuration
> @PropertySource("classpath:default.properties")
> public class DefaultConfig {} 
> ```
> 
> ```
> @Configuration
> @PropertySource("classpath:override.properties")
> public class OverrideConfig {
> 
>     @Configuration
>     @Import(DefaultConfig.class)
>     static class InnerConfiguration {}
> 
> } 
> ```
> 
> 使用此设置，属性将以正确的顺序收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T16:13:34.203

今天有了 Spring 4，你可以使用这个：

```
@TestPropertySource(value="classpath:/config/test.properties") 
```

这可用于使用并最终覆盖 junit 测试的属性：

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestPropertySource(value="classpath:/config/test.properties") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T05:47:57.753

您可以像这样强制执行属性的加载顺序：

```
@Configuration
@PropertySource(value={"classpath:default.properties","classpath:override.properties"})
public class OverrideConfig {
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-21T10:48:58.120

我有一个类似的问题，并成功地在我的自定义配置中声明了默认属性：

```
@Configuration
@Import(DefaultConfig.class)
@PropertySource({"classpath:default.properties", "classpath:override.properties"})
public class OverrideConfig {} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T11:00:26.423

我目前在 Spring 3.1 中遇到类似的情况，但我使用不同的方法来覆盖属性，因为`@PropertySource`不支持可选的属性文件：

```
@Configuration
@PropertySource("classpath:default.properties")
public class BaseConfig {

  @Inject
  private ApplicationContext context;

  @PostConstruct
  public void init() throws IOException {
    Resource runtimeProps = context.getResource("classpath:override.properties");
    if (runtimeProps.exists()) {
      MutablePropertySources sources = ((ConfigurableApplicationContext) context).getEnvironment().getPropertySources();
      sources.addFirst(new ResourcePropertySource(runtimeProps));
    }
  }
... 
```

除了正常 bean 依赖项规定的顺序之外，这似乎`@Import`不会导致任何特定的实例化顺序。`@Configuration`强制执行此类命令的一种方法是将基本`@Configuration`实例本身作为依赖项注入。你能试试：

```
@Configuration
@Import(DefaultConfig.class)
@PropertySource("classpath:override.properties")
public class OverrideConfig {

  @Inject
  private DefaultConfig defaultConfig;

  ...
} 
```

这有帮助吗？也许新的`ContextHierarchy`注释在这里也有帮助，但到目前为止我还没有尝试过这个。

# c# - 在样式中绑定 DependencyProperty

> ID：15577133
> 
> 赞同：1
> 
> 时间：2013-03-22T18:09:35.127
> 
> 标签：c#, wpf, visual-studio-2010, binding

我确信这是一件简单的事情，而且要抬头看，但我还没有运气。基本上我想设计一个 WPF Slider 的样式，这样在使用时我可以给它两个额外的字符串来显示。

新控件如下所示：

```
public class SliderPicker : Slider
{
    public string LeftLabel
    {
        get { return (string)GetValue(LeftLabelProperty); }
        set { SetValue(LeftLabelProperty, value); }
    }

    public static readonly DependencyProperty LeftLabelProperty =
        DependencyProperty.Register("LeftLabel", typeof(string), typeof(SliderPicker), new UIPropertyMetadata(String.Empty));

    public string RightLabel
    {
        get { return (string)GetValue(RightLabelProperty); }
        set { SetValue(RightLabelProperty, value); }
    }

    public static readonly DependencyProperty RightLabelProperty =
        DependencyProperty.Register("RightLabel", typeof(string), typeof(SliderPicker), new UIPropertyMetadata(String.Empty));
} 
```

像这样的风格：

```
 <Style x:Key="SlickSlider" TargetType="{x:Type Slider}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Slider}">
                    ...
                            <TextBlock Text="{TemplateBinding LeftLabel}" Grid.Row="2" HorizontalAlignment="Left" />
                            <TextBlock Text="{TemplateBinding RightLabel}" Grid.Row="2" HorizontalAlignment="Right" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

和用法：

```
<controls:SliderPicker LeftLabel="RealPreference" RightLabel="RealCoverage" Width="400" Style="{StaticResource SlickSlider}"/> 
```

这似乎不起作用。那么，如何在控件上设置DP并在模板中显示呢？我以为这就是 TemplateBinding 的用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:30:24.090

你只需要一个小的修复。更改`{x:Type Slider}`为`{x:Type controls:SliderPicker}`

您需要将自定义控件应用为样式和模板中的类型。没有它，您将尝试查找`LeftLabelProperty`和`RightLabelProperty`输入，`Slider`而不是`SliderPicker`使用模板绑定。

改变你的风格

```
<Style x:Key="SlickSlider" TargetType="{x:Type controls:SliderPicker}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:SliderPicker}">
                    ...
                            <TextBlock Text="{TemplateBinding LeftLabel}" Grid.Row="2" HorizontalAlignment="Left" />
                            <TextBlock Text="{TemplateBinding RightLabel}" Grid.Row="2" HorizontalAlignment="Right" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

已在您发布的课程中尝试过此操作，并且效果很好:)

# c++ - 嵌入 luajit 未定义的引用

> ID：15577140
> 
> 赞同：3
> 
> 时间：2013-03-22T18:10:11.723
> 
> 标签：c++, windows, lua, makefile, luajit

我没有成功尝试将 luajit 嵌入（静态）到 C++ 应用程序中。我按照 luajit 网站的步骤无济于事，用谷歌搜索了这个主题，没有得到任何相关信息，并尝试了我能想到的一切。

似乎我遇到的问题是 g++ 没有正确链接它，或者 luajit 没有正确构建。

这就是我要编译的内容：

```
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>

int main(void)
{
    lua_State *L = luaL_newstate();
    luaL_openlibs(L);
    lua_close(L);

    return 0;
} 
```

我得到的`undefined reference`错误几乎就像我根本没有链接 luajit 一样。

```
main.cpp:7: undefined reference to `luaL_newstate()'
main.cpp:9: undefined reference to `luaL_openlibs(lua_State*)'
main.cpp:10: undefined reference to `lua_close(lua_State*)' 
```

在将链接选项设置如下后，我正在尝试使用 eclipse cdt (mingw) 对其进行编译：

```
Library Paths:        D:/includes/LuaJIT-2.0.1/src
Includes (GNU G++):   D:/includes/LuaJIT-2.0.1/src
Libraries:            luajit 
```

并且 eclipse cdt 似乎正在尝试将其编译如下：

```
g++ -ID:/includes/LuaJIT-2.0.1/src -O0 -g3 -pedantic-errors -Wall -Wextra -Werror -Wconversion -c -fmessage-length=0 -Weffc++ -std=c++11 -o "source\\main.o" "..\\source\\main.cpp" 
g++ -LD:/includes/LuaJIT-2.0.1/src -o test.exe "source\\main.o" -lluajit 
```

我已经从他们的[下载页面下载](http://luajit.org/download.html)[了 LuaJIT-2.0.1 zip](http://luajit.org/download/LuaJIT-2.0.1.zip)（最新版本），并按照以下[安装指南](http://luajit.org/install.html)进行操作：

*   解压它。
*   启动了一个 cmd 并 cded 到`LuaJIT-2.0.1/src/`
*   跑`make BUILDMODE=static`了，收到了一条好`OK Successfully built LuaJIT`消息

除此之外，没有很多关于嵌入 luajit 的信息，甚至在[安装指南](http://luajit.org/install.html#embed)中也没有。

但是，对`src`文件夹进行grepping 会`luaL_newstate`在`libluajit.a`.

```
grep -r "luaL_newstate" .

./host/genminilua.lua:  lua_State *L = luaL_newstate();
./host/minilua.c:static lua_State*luaL_newstate(void){
./host/minilua.c:lua_State*L=luaL_newstate();
./lauxlib.h:LUALIB_API lua_State *(luaL_newstate) (void);
Binary file ./libluajit.a matches
./lib_aux.c:LUALIB_API lua_State *luaL_newstate(void)
./lib_aux.c:LUALIB_API lua_State *luaL_newstate(void)
./lib_aux.c:  fputs("Must use luaL_newstate() for 64 bit target\n", stderr);
Binary file ./lib_aux.o matches
./lua.h:#define lua_open()      luaL_newstate()
Binary file ./luajit.exe matches
Binary file ./luajit.o matches 
```

我正在使用：

*   明威的`g++ (rev, Built by MinGW-builds project) 4.8.0 20130314 (experimental)`
*   明威的`GNU Make 3.82.90 Built for i686-pc-msys`
*   Win8 64位

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:17:01.940

`include`将你的指令包装成`extern "C" { ... }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-06T07:10:32.750

您应该`#include "lua.hpp"`在 C++ 代码中使用，*而不是* `lua.h`.

[这在 C API 文档](http://luajit.org/ext_c_api.html)的顶部提到。

# javascript - Binding two values to an input field using knockout.js

> ID：15577144
> 
> 赞同：0
> 
> 时间：2013-03-22T18:10:36.103
> 
> 标签：javascript, data-binding, knockout.js

**Description**
I have 3 checkboxes and one input field. When a user selects the checkboxes, the values appear on the input field. However, when a user does not select any of the checkboxes, I want an alternative value to appear in the input field.

**What I have so far**
[http://jsfiddle.net/uFQdq/8/](http://jsfiddle.net/uFQdq/8/)

```
function ViewModel() {
    var self = this;  
    self.primaryClass = ko.observable("50"); 
    self.secondaryClass = ko.observable("40"); 
    self.otherClass = ko.observable("10"); 

    self.alternativeValue("200");     

    self.selectedValues = ko.observableArray([]);

    self.sum = ko.computed(function () {
        var total = 0;
        ko.utils.arrayForEach(self.selectedValues(), function (item) {
            total += parseInt(item);
        });
        return total;
    });
}

ko.applyBindings(new ViewModel()); 
```

**Issue**
The issue at hand is that NOTHING is being displayed in the input field. What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:18:51.317

It's because you've not made alternativeValue an observable:

```
self.alternativeValue = ko.observable("200"); 
```

Updated [fiddle](http://jsfiddle.net/uFQdq/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:48:21.340

I think that is what you really need: [your fiddle, revision 10](http://jsfiddle.net/uFQdq/10/).

```
<input data-bind="checked: selectedValues" type="checkbox" value="50">50</input>
<input data-bind="checked: selectedValues" type="checkbox" value="40">40</input>
<input data-bind="checked: selectedValues" type="checkbox" value="10">10</input>

<br/>
Result:
<input data-bind="value: sum" type="text"></input> 
```

* * *

```
/*You really don`t need an observables for values*/

var model = {
    selectedValues: ko.observableArray([])
}

model.sum = ko.computed(function () {
    var result = 0;

    model.selectedValues().forEach(function(value){
        result += parseInt(value, 10);
    });

    if (result === 0) {
        result = 200;
    }
    return result;
});

ko.applyBindings(model); 
```

# php - 在 PHP 中调用后台网页并在其上使用 jQuery

> ID：15577147
> 
> 赞同：0
> 
> 时间：2013-03-22T18:10:40.350
> 
> 标签：php, jquery

我有一个 HTML 页面，它有一个文本框和一个按钮......

```
<html>
    <head></head>
    <body>
        <form name = "inputdata" method ="get" action ="prc.php">
            <input type="text" name="data">
            <button id ="checkbox" type="buttton" name="submit" value="submit">Submit!</button>
        </form>
    </body>
</html> 
```

prc.php 的代码是...

```
<?php
    $data=$_GET['data'];
    echo "<html><head></head><body><div id=\"maindata\"> ";
    echo $data;
    echo "</div></body></html>";
?> 
```

我有一个 PHP 文件，它获取上一页的内容......

```
<?php
    file_get_contents("index.html");
?> 
```

但是，我想向上面的 PHP 脚本添加功能，以便它在后台获取页面内容并在其上使用一些 jQuery：

```
$('#inputdata').val('hello boss');
$('#checkButton').click(); 
```

这将使我能够在后台填写文本框并提交按钮。然后我需要使用 jQuery 从 prc.php 获取结果...

```
$('#maindata').html(); 
```

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:16:43.427

听起来您想在页面上提交表单。这应该可以通过简单地在操作字段中请求资源来实现。在您的示例中，使用名为 data 的参数请求 url prc.php ，其中包含您希望提交的数据输入数据。

```
prc.php?data=mydata 
```

# ios - 有没有办法以编程方式取消注册设备以进行推送通知？

> ID：15577152
> 
> 赞同：11
> 
> 时间：2013-03-22T18:10:54.310
> 
> 标签：ios, iphone, push-notification

只是想知道这是否真的可能。所以我可以停止所有通知，就像通知中心可以选择停止所有通知一样。

我不相信这是可能的，但想知道你会怎么想。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T19:29:49.657

[`[[UIApplication sharedApplication] unregisterForRemoteNotifications]`](https://developer.apple.com/documentation/uikit/uiapplication/1623093-unregisterforremotenotifications)应该在 Objective-C 中使用。

`UIApplication.shared.unregisterForRemoteNotifications()`在斯威夫特。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T08:24:20.787

推送通知是从您的服务器发送的......因此您应该自己实施这种方法，并在您存储活动设备的服务器上的数据库中删除或禁用该设备。

如果您仅在设备上本地禁用它们，您的服务器仍将发送消息，直到您收到反馈服务的通知......您应该检查......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-24T08:29:18.757

**对于 Swift 4 及更高版本**

```
UIApplication.shared.unregisterForRemoteNotifications() 
```

您可以在用户注销后调用此方法，以确保下一个要连接的用户将拥有唯一的设备令牌。

# python - 使用 Python 从 Google Calendar API 格式化时间

> ID：15577153
> 
> 赞同：2
> 
> 时间：2013-03-22T18:10:53.780
> 
> 标签：python, google-calendar-api, google-api-python-client

我试图获得一种易于阅读的时间格式来列出当天谷歌日历中的事件。我可以提取数据，但在将数据格式化为开始时间和结束时间的小时和分钟时遇到问题。

我想在一个易于阅读的列表中显示信息，所以我想删除日期和秒，只按顺序显示时间。我尝试了几种不同的方法，包括切片和尝试转换为日期时间，但没有成功。

```
date  = datetime.datetime.now()
tomorrow = date.today() + datetime.timedelta(days=2)
yesterday = date.today() - datetime.timedelta(days=1)
now = str
data = '{:%Y-%m-%d}'.format(date)
tdata = '{:%Y-%m-%d}'.format(tomorrow)
ydata = '{:%Y-%m-%d}'.format(yesterday)
def DateQuery(calendar_service, start_date=data,  end_date=tdata):
  print 'Date query for events on Primary Calendar: %s to %s' % (start_date, end_date,)
  query = gdata.calendar.service.CalendarEventQuery('default', 'private', 'full')
  query.start_min = start_date
  query.start_max = end_date
  feed = calendar_service.CalendarQuery(query)
  for i, an_event in enumerate(feed.entry):
    print '\'%s\'' % (an_event.title.text)
    for a_when in an_event.when:
      dstime = (a_when.start_time,)
      detime = (a_when.end_time,)
      print '\t\tEnd time:     %s' % (dstime)
      print '\t\tEnd time:     %s' % (detime) 
```

它像这样打印

结束时间：2013-03-23T04:00:00.000-05:00

我希望它是

结束时间：04:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:22:25.593

使用 dateutil 模块：

```
>>> import dateutil.parser
>>> dateutil.parser.parse('2013-03-23T04:00:00.000-05:00')
>>> dt = dateutil.parser.parse('2013-03-23T04:00:00.000-05:00')
>>> dt.strftime('%I:%M')
'04:00' 
```

如果您不想使用 dateutil，您还可以使用 strptime 的特定格式解析[字符串](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)。

# c# - 转换在使用键盘快捷键选择的文本框中选择的文本

> ID：15577157
> 
> 赞同：-6
> 
> 时间：2013-03-22T18:11:15.510
> 
> 标签：c#, textbox

我想在按下快捷方式时转换 TextBox 中选定的文本，如图所示（示例是添加标签，但可能是不同的更改）：

![在此处输入图像描述](../Images/5bb12632ede69ad44df7ed966365d8c5.png)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:17:48.607

您可以使用该`TextBox.KeyUp`事件

```
private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Control && e.KeyValue == 49)
    {
        if (textBox1.SelectionLength > 0)
        {
            textBox1.SelectedText = String.Format("<h1>{0}</h1>", textBox1.SelectedText);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:16:17.610

在文本框选定事件中，您应该处理以下指令：

1.  从文本框中获取文本
2.  将其保存到数组或类似的东西
3.  给出 HTML 标签并给出 HTML 标签内的数组
4.  再次设置为屏幕

# ruby-on-rails - Ruby on Rails 类型错误无法将 nil 转换为哈希

> ID：15577158
> 
> 赞同：0
> 
> 时间：2013-03-22T18:11:17.150
> 
> 标签：ruby-on-rails

我开始了一个新的应用程序

```
rails new doctor

rake db:migrate

rails generate controller home index

rails generate scaffold Patient age:string city:string number:string street:string 
```

之后我删除了公共索引并将路由更改为 root :to => "home#index"

```
rake db:migrate

rails server 
```

所以我的问题是我成为浏览器中的错误：

类型错误，无法将 nil 转换为哈希

我无法解释我，我的应用程序应该有什么问题！我希望有人知道答案！谢谢

```
rack (1.4.5) lib/rack/session/abstract/id.rb:28:in `merge!'
rack (1.4.5) lib/rack/session/abstract/id.rb:28:in `initialize'
rack (1.4.5) lib/rack/session/abstract/id.rb:242:in `new'
rack (1.4.5) lib/rack/session/abstract/id.rb:242:in `prepare_session'
rack (1.4.5) lib/rack/session/abstract/id.rb:209:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__759447931__call__819038987__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

# c++ - c/c++ Linux 等效于“bool DllMain()”-但我需要将失败返回给 dlopen()

> ID：15577161
> 
> 赞同：4
> 
> 时间：2013-03-22T18:11:26.790
> 
> 标签：c++, c, macos, dll, dlopen

我正在将一个 DLL 从 Windows 移植到 Linux（实际上是 OS X）。我使用这篇[StackOverflow 文章](https://stackoverflow.com/questions/12463718/linux-equivalent-of-dllmain)来进行更改。

即我已经将 Windows“bool DllMain()”移植到 Linux 方式：

```
__attribute__((constructor)) void dllLoad();

__attribute__((destructor)) void dllUnload(); 
```

...但两者都是 void 返回类型。如果构造函数中不满足条件，我需要能够执行与 Windows 相同的操作并返回 FALSE，以便 dlopen() 失败并且 .so 不加载。

如何让调用 dlopen() 失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:50:34.173

答案是不可能的。如上所述，您不能在构造函数中出错 - 无论是异常还是 exit()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-20T21:22:07.787

你需要以不同的方式处理这个问题。

如果您正在动态加载库，那么您还必须使用 GetProcAddress() 和 dlsym() 来实际使用它。dlsym() 是您前进的道路。

您可以清楚地控制插件的代码，否则您甚至无法向其中添加这些 API。因此，您在任一平台上的所有“dllmain”都需要设置一些全局“有效”状态信息。然后，您只需调用一个已知的 API，如“ModuleIsValid()”，其全部工作就是简单地读取该状态信息并返回 true/false。如果它返回 false，则关闭库并报告失败。

# wordpress - 搜索引擎可以索引 WP 页面模板中硬写的内容吗？

> ID：15577164
> 
> 赞同：-1
> 
> 时间：2013-03-22T18:11:35.337
> 
> 标签：wordpress, seo

我的客户很担心，因为他在 WordPress 仪表板中看不到他的页面内容。原因是因为每个页面的内容都是硬写在自己的页面模板中的。我对所有页面都使用了模板，因为每个页面都有一个复杂的布局，内容分散在各处，风格各异。

我的问题是：在 WP 页面模板中硬写的内容是否与诺曼页面内容一样可以被搜索引擎索引（意思是在仪表板中的页面主文本编辑器中编写）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:33:05.307

搜索引擎会看到您的网站吐出的任何内容。他们不在乎您使用我们的技术是硬编码的还是动态的。事实上，他们甚至无法分辨，因为他们看不到您服务器上的内容。

所以，不，没有区别，也没关系。

# java - Javamail A5 错误命令

> ID：15577165
> 
> 赞同：1
> 
> 时间：2013-03-22T18:11:36.837
> 
> 标签：java, jakarta-mail

我在巴西主机 (uol.com.br) 的服务器上有一个邮件帐户。此帐户用于测试，收件箱中有 7.000 条消息。当我通过 java 邮件和 setDebug(true) 连接时，消息不会返回并显示此消息：

```
03-22 14:44:07.305: I/System.out(5524): A1 OK User logged in
03-22 14:44:07.320: I/System.out(5524): A2 CAPABILITY
03-22 14:44:07.435: I/System.out(5524): * CAPABILITY IMAP4 IMAP4rev1 QUOTA UIDPLUS NO_ATOMIC_RENAME UNSELECT CHILDREN MULTIAPPEND BINARY SORT
03-22 14:44:07.435: I/System.out(5524): A2 OK Completed
03-22 14:44:07.500: I/System.out(5524): A3 LIST "" "%"
03-22 14:44:07.835: I/System.out(5524): * LIST (\HasNoChildren) "." "INBOX"
03-22 14:44:07.850: I/System.out(5524): * LIST (\HasNoChildren) "." "Quarentena"
03-22 14:44:07.870: I/System.out(5524): * LIST (\HasNoChildren) "." "Drafts"
03-22 14:44:07.885: I/System.out(5524): * LIST (\HasNoChildren) "." "Sent Messages"
03-22 14:44:07.925: I/System.out(5524): * LIST (\HasNoChildren) "." "Deleted Messages"
03-22 14:44:07.950: I/System.out(5524): A3 OK Completed (0.000 secs 6 calls)
03-22 14:44:07.990: I/System.out(5524): DEBUG: connection available -- size: 1
03-22 14:44:07.995: I/System.out(5524): A4 SELECT INBOX
03-22 14:44:08.130: I/System.out(5524): * FLAGS (\Answered \Flagged \Draft \Deleted \Seen)
03-22 14:44:08.145: I/System.out(5524): * OK [PERMANENTFLAGS (\Answered \Flagged \Draft \Deleted \Seen \*)]  
03-22 14:44:08.160: I/System.out(5524): * 7245 EXISTS
03-22 14:44:08.170: I/System.out(5524): * 1 RECENT
03-22 14:44:08.180: I/System.out(5524): * OK [UNSEEN 7243]  
03-22 14:44:08.190: I/System.out(5524): * OK [UIDVALIDITY 1208433603]  
03-22 14:44:08.235: I/System.out(5524): * OK [UIDNEXT 10125]  
03-22 14:44:08.235: I/System.out(5524): A4 OK [READ-WRITE] Completed
03-22 14:44:21.555: I/System.out(5524): A5 SEARCH UNSEEN ALL
03-22 14:44:23.910: I/System.out(5524): A5 BAD Unsupported command. 
```

这是设置标志的代码的一部分。在 gmail 中，此代码适用于收件箱文件夹中的 100 条消息

```
public Message[] getInboxMessages() {
        Message[] messages = null;
        try {

            Flags f1 = new Flags(Flags.Flag.SEEN);
            FlagTerm notseen = new FlagTerm(f1, false);

            messages = mInboxFolder.search(notseen);            

        } catch (NoSuchProviderException e) {
            Log.w(TAG, e.getMessage());

        } catch (MessagingException e) {
            Log.w(TAG, e.getMessage());
        }
        return messages;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:27:21.920

服务器坏了。它似乎没有正确支持 IMAP 协议。向服务器供应商报告错误。

如果您需要解决服务器错误，则需要避免使用该“搜索”命令。您可以获取所有消息，而只需跳过标记为 SEEN 的消息。

# html - 将文本放置在 textarea 上

> ID：15577166
> 
> 赞同：6
> 
> 时间：2013-03-22T18:11:39.707
> 
> 标签：html, css

我想在我的文本区域的右上角添加一个 div/文本。

**HTML**

```
<div id="textarea-container">
    <textarea></textarea>
    <div id="copy">copy</div>
</div> 
```

**CSS**

```
div#textarea-container {
    position: absolute;
}

div#copy {
    position: relative;
    right: 0;
} 
```

需要做哪些调整？

**jsFiddle：http:** [//jsfiddle.net/zrpgK/](http://jsfiddle.net/zrpgK/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:17:52.780

工作 jsfiddle 代码[jsfiddle](http://jsfiddle.net/zrpgK/11/)

```
div#textarea-container {
   position: relative;
   float: left;
}
div#copy {
   position: absolute;
   right: 5px;
   top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:22:55.627

尝试这个：

```
div#textarea-container {
    position: absolute;
}
div#copy {
    position: relative;
    margin-top:-40px;
    margin-right:5px;
    text-align: right;
} 
```

把它放在右边的角落。继承人的jsfiddle：http: [//jsfiddle.net/zrpgK/13/](http://jsfiddle.net/zrpgK/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:16:13.430

看到这个[jsfiddle](http://jsfiddle.net/zrpgK/12/)

你需要给你的文本区域一个宽度。这样，您就可以知道放置 div 的位置在文本区域的范围内。

```
div#textarea-container { position: relative; }
div textarea { width: 100%; }
div#copy {
    position: absolute;
    top: 0px;
    right: 0px;
} 
```

# ruby-on-rails - 在 Linux 上安装 ruby -filemagic gem 时缺少库

> ID：15577171
> 
> 赞同：20
> 
> 时间：2013-03-22T18:12:01.237
> 
> 标签：ruby-on-rails, ruby, linux, gem

我需要 gem ruby​​-filemagic 来满足我项目中的一些要求。在运行 bundle install 时，它给了我这个错误

```
*** ERROR: missing required library to compile this module
*** extconf.rb failed *** 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-11T15:22:49.090

`sudo apt-get install libmagic-dev`为我做的

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-06-26T19:37:02.773

在 OSX 上运行`brew install libmagic`之前`gem install ruby-filemagic`使我成功安装了 ruby​​-filemagic。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-10T21:23:14.713

如果您在 EC2 实例上安装 gem ruby​​-filemagic，请以 root 身份登录并使用此命令

```
yum install file file-devel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-28T11:24:41.000

如果您使用的是**alpine**发行版并且无法使用 apt-get，请尝试以下操作：

`apk add musl libmagic file file-dev imagemagick`

# django - Django 管理表功能

> ID：15577179
> 
> 赞同：0
> 
> 时间：2013-03-22T18:12:38.447
> 
> 标签：django, django-admin, datatables, mezzanine

无论如何将数据表的功能添加[到](http://www.datatables.net/) django 管理界面。我正在使用 Django + Mezzanine，对于我的项目，我们需要能够按每一列排序、分页、搜索等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:03:43.960

是的。

没有服务器端分页的最简单实现将覆盖`change_list.html`模型，以便：

*   将表格打印在`{% block result_list %}`
*   初始化数据表`{% block extrahead %}`
*   导入css`{% block extrastyle %}`

# php - 在 javascript .replace 中使用正则表达式翻译 preg_replace

> ID：15577182
> 
> 赞同：0
> 
> 时间：2013-03-22T18:12:49.330
> 
> 标签：php, javascript, regex

我需要翻译这个 php 函数： $string = preg_replace('/#([a-z0-9]+)/i', '#$1',$string); 如果可能的话，在等效的 JavaScript .replace 函数中..谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:15:29.313

JavaScript 的`replace`方法几乎相同，但它是字符串的方法而不是它自己的函数

```
$string.replace(/#([a-z0-9]+)/i, '#$1'); 
```

唯一的主要区别是 JavaScript 允许正则表达式文字语法（with `/`），因此第一个参数不应包含在引号中。

# java - 为什么 -1%26 = -1 在 Java 和 C 中，为什么在 Python 中是 25？

> ID：15577185
> 
> 赞同：4
> 
> 时间：2013-03-22T18:13:05.070
> 
> 标签：java, python, c, modulo

为什么模运算符在 C 和 Java 中不能按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:19:50.947

[维基百科](http://en.wikipedia.org/wiki/Modulo_operation#Remainder_calculation_for_the_modulo_operation)有一个很好的表格，显示了各种语言的操作标志。在 Python 中它是除数 (26) 的符号，在 Java/C 中是被除数 (-1) 的符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T18:17:13.533

Python 的 % 运算符计算数学余数，而不是模数。根据定义，余数是一个介于 0 和除数之间的数字，它不像模数那样取决于被除数的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:15:22.053

它按规定工作。

合同是这样的

```
a == (a/b) * b + (a % b) 
```

并且整数除法向零截断。因此，如果股息为负，则余数为负。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:15:14.270

不确定python但`%`java中的运算符返回除法后获得的余数。

```
-1%26 
```

分解它：

```
 26)-1(0
                0
                ---
                -1 ---> Remainder as (-1+0=-1) 
```

# video - 如何“一键”删除当前在 Media Player Classic 上播放的文件

> ID：15577188
> 
> 赞同：1
> 
> 时间：2013-03-22T17:11:47.307
> 
> 标签：video, windows-7, media-player, media

有没有办法直接从 MPC 执行此操作，或者我可以创建一个单独的程序来检测当前正在播放的文件并将其删除（我知道可以在文件当前在 MPC 中播放时删除它们）。

我没有编程windows的经验，但我在科学编程方面确实有很多经验，所以请随意详细说明...

# ipython - 为什么`ipython foo.py bar.py`只打印`foo.py`的输出？

> ID：15577189
> 
> 赞同：3
> 
> 时间：2013-03-22T18:13:25.517
> 
> 标签：ipython

IPython 0.13.1 文档说：

```
$ ipython -h
...
Usage

    ipython [subcommand] [options] [files]

    If invoked with no options, it executes all the files listed in sequence
    and exits, use -i to enter interactive mode after running the files.
... 
```

我有两个文件`foo.py`和`bar.py`.

`foo.py`：

```
print "Hi, I'm foo." 
```

`bar.py`：

```
print "Hi, I'm bar." 
```

我希望以下内容以相应的顺序打印两个文件输出。相反，我只从命令行上给出的第一个文件中获取输出。

```
$ ipython foo.py bar.py
Hi, I'm foo.

$ ipython bar.py foo.py
Hi, I'm bar. 
```

这是实现错误、文档错误还是用户误解？如果是后者，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:28:37.903

这是文档失败，[由此 Pull Request](https://github.com/ipython/ipython/pull/3073)修复。命令

```
$> ipython [-i] script.py script2.py ... 
```

行为与命令完全相同

```
$> python [-i] script.py script2.py ... 
```

其中， script.py 运行，使用`sys.argv`of `['script.py', 'script2.py', '...']`，如果`-i`指定，它在运行脚本后进入交互式会话。

# perl - '+=' 运算符的含义

> ID：15577195
> 
> 赞同：-6
> 
> 时间：2013-03-22T18:13:37.370
> 
> 标签：perl

有人可以帮助我理解 ' `+=`' 运算符在特定情况下的含义。脚本说：

```
$receipts{$weather} += $receipt;
$days{$weather}++; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T18:23:22.857

假设`$foo += $bar`，`+=`操作员执行以下操作：

```
$foo = $foo + $bar; 
```

也就是说，`$foo`增加`$bar`. 假设`$foo++`，`++`操作员执行以下操作：

```
$foo = $foo + 1; 
```

也就是说，将变量加一。

尽管如此，这些运算符也有一些隐藏的 perl 魔法。例如，`+=`and`++`运算符不会给出未初始化的警告，相应的语句会：

```
# $foo is undefined
$foo += 10;        # no warning
$foo++;            # no warning
$foo = $foo + 10   # Use of uninitialized value $foo in addition 
```

该`++`运算符还适用于字符串

```
my $foo = 'a';
$foo++;
print $foo;     # prints 'b' 
```

运算符有`++`两种形式，后增量和前增量。表达式的返回值在递增之前或之后计算：

```
$foo = 1;
print ++$foo;   # prints 2
print $foo++;   # prints 2, but $foo is now 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T18:16:13.257

它将 的值添加`$receipt`到 的值`$receipts{$weather}`并将结果存储回`$receipts{$weather}`. 它相当于：

```
$receipts{$weather} = $receipts{$weather} + $receipt 
```

但是，在某些情况下，它可能会更有效地实施。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T18:29:07.257

请参阅[perldoc perlop](http://perldoc.perl.org/perlop.html#Assignment-Operators)：

> “=”是普通的赋值运算符。
> 
> 赋值运算符的工作方式与 C 中的一样。也就是说，
> 
> ```
>  $a += 2; 
> ```
> 
> 相当于
> 
> ```
>  $a = $a + 2; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:16:05.593

例子：

这个例子：int i = 2; 我=我+4；这个例子 int i = 2; i+=4 相同；

# php - '无法确定请求哪个 URL：Stripe_Charge 实例的 ID 无效

> ID：15577196
> 
> 赞同：4
> 
> 时间：2013-03-22T18:13:39.587
> 
> 标签：php, stripe-payments

我想在网站中实施 Strip 付款流程。我试图这样做，但它看起来不起作用。我得到的错误是

致命错误：在 /home/twassist/public_html/wp-content/themes/inovado/stripe-php-1.7.15/ 中出现消息“无法确定要请求的 URL：Stripe_Charge 实例的 ID 无效：”未捕获的异常“Stripe_InvalidRequestError” lib/Stripe/ApiResource.php:46 堆栈跟踪：#0 /home/twassist/public_html/wp-content/themes/inovado/stripe-php-1.7.15/lib/Stripe/ApiResource.php(15)：Stripe_ApiResource- >instanceUrl() #1 /home/twassist/public_html/wp-content/themes/inovado/stripe-php-1.7.15/lib/Stripe/ApiResource.php(8): Stripe_ApiResource->refresh() #2 /home /twassist/public_html/wp-content/themes/inovado/stripe-php-1.7.15/lib/Stripe/Charge.php(14): Stripe_ApiResource::_scopedRetrieve('Stripe_Charge', NULL, NULL) #3 /home/ twassist/public_html/wp-content/themes/inovado/functions.php(355): Stripe_Charge::检索（NULL）＃4 /home/twassist/public_html/wp-content/themes/inovado/functions.php（361）：Strip_Code（）＃5 /home/twassist/public_html/wp-settings.php（291）：包括('/home/twassist/...') #6 /home/twassist/public_html/wp-config.php(在/home/twassist/public_html/wp-content/themes/inovado/stripe-php-1.7.15 /lib/Stripe/ApiResource.php 第 46 行

有人在这里尝试过[http://twassistant.com/hire](http://twassistant.com/hire)更改数量。

填写此详细信息 5555 5555 5555 4444 到期日期 12 / 21 名称：任何 121。

这将支付测试费用。当重定向到代码时，它会给你这个错误。

这是我在我的 php 文件中尝试的代码。

```
function Strip_Code()
{
    $stripCode = trim($_GET['stripeToken']);

    if (strlen($stripCode) > 0) {

        require_once  dirname(__FILE__).'/stripe-php-1.7.15/lib/Stripe.php';

        Stripe::setApiKey("sk_test_XXXXXXXXXXXXXXX");

        $resp = Stripe_Charge::retrieve($$stripCode);

        var_dump($resp);
    }
}

Strip_Code(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:21:15.750

可能是你有一个错字（双 $$）：

```
Stripe_Charge::retrieve($$stripCode); 
```

另外，您不应该透露您的私钥......即使它只是您的测试密钥

# jquery - 404时显示默认图像

> ID：15577198
> 
> 赞同：0
> 
> 时间：2013-03-22T18:13:40.997
> 
> 标签：jquery, html, css

我正在使用 html5 标记、jquery 和 css3 并向产品的用户显示图像。

如果产品图片未显示，我需要显示默认图片。

正在考虑是否在图像标签上设置一个 css 类以显示默认图像，但让图像标签上的 src 具有真实的产品图像。如果未找到，则显示类默认图像。

这对css是否可行，如果可以，如何？

# php - 如何设置 Yii 样板？

> ID：15577202
> 
> 赞同：5
> 
> 时间：2013-03-22T18:13:59.277
> 
> 标签：php, yii, boilerplate

我看过很多关于 Yii Boilerplate 设置的页面，例如：[http](http://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/) ://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/ 。有没有关于创建新的基本 YiiBoilerPlate 应用程序的分步说明，或者我完全错了！？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:56:38.247

只需构建您的应用程序以满足您的需求，记住将项目特定文件保存在单独的文件夹中，与基本应用程序组件（如通用扩展名）分开。我强烈推荐使用模块。例如，您可以拥有具有登录、注销、配置文件等功能的用户管理模块，并且根据具体的项目要求，只需放入更多模块。

提到的样板文件比标准的 Yii 设置更复杂。我真的不喜欢一件事，那就是mudules在前端和后端都有，根据yii philosofy，模块应该像迷你应用程序，所以从这个样板看来，应该为前端和后端构建单独的迷你应用程序。但这只是一种让你感觉更好的味道。

如果您是新手，我建议您使用标准设置，但从一开始就使用模块。模块类似于迷你应用程序，可以独立运行。通过这种方式，您可以构建您的模块组合，然后在做一些新项目时，您可以更快、更坚固地组合它。更棘手的可能是模块之间的互操作性，但那是完全不同的故事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T04:10:08.993

You should refer following article.

[http://myprogrammingtut.blogspot.in/2013/04/step-by-step-setup-yiiboilerplate.html](http://myprogrammingtut.blogspot.in/2013/04/step-by-step-setup-yiiboilerplate.html)

which worked for me :)

Hope it'll help you.

# javascript - 旧版 Internet Explorer 和 FancyBox 中的链接

> ID：15577211
> 
> 赞同：0
> 
> 时间：2013-03-22T18:14:13.403
> 
> 标签：javascript, jquery, internet-explorer, fancybox, fancybox-2

有一个使用 FancyBox 的简单示例

```
<script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            $('#fbLink1').fancybox({
                'afterLoad': function() {
                    $('#fancyboxdiv').html('<h1>Fancybox first</h1>');
                    $('#fancyboxdiv').append('<a id="fbLink2" href="#fancyboxdiv" title="fancybox 2">Fancybox second</a>');
                },
                'afterClose': function() {
                    $('#fancyboxdiv').html('');
                }
            });
            $('#fbLink2').fancybox({
                'afterLoad': function() {
                    $('#fancyboxdiv').html('<h1>Fancybox second</h1>');
                    $('#fancyboxdiv').append('<a id="fbLink1" href="#fancyboxdiv" title="fancybox 1">Fancybox first</a>');
                },
                'afterClose': function() {
                    $('#fancyboxdiv').html('');
                }
            });
        });
    })(jQuery);
</script>
<div id="fancyboxdiv" style="display: none;"></div>     
<a id="fbLink1" href="#fancyboxdiv" title="fancybox first">First</a><br />
<a id="fbLink2" href="#fancyboxdiv" title="fancybox first">Second</a><br /> 
```

在 Chrome 浏览器中它运行良好，但在 Internet Explorer 中它不起作用。如何让它在 IE8 及更低版本中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:41:17.080

首先检查[fancybox文档](http://fancyapps.com/fancybox/#support)-->FAQ选项卡--> No. 6。

这是典型的情况，在我看来，IE 是一个更好的浏览器，因为它不允许您与重复的元素进行交互（ID 应该是唯一的，并且两个元素在同一个文档`ID`中不能有相同的）`ID`

话虽如此，您正在做的是添加第二个元素，`ID`其中包含先前定义的 an ：

```
$('#fancyboxdiv').append('<a id="fbLink2" href="#fancyboxdiv" title="fancybox 2">Fancybox second</a>'); 
```

虽然其他浏览器允许您使用这种重复的 ID，但 IE 不会。

由于您已经使用它们的 ID 作为选择器为每个元素初始化了 fancybox `$('#fbLink1').fancybox();`，`$('#fbLink2').fancybox();`然后您只需要触发每个选择器（使用`onclick`）而不是添加重复的 ID，例如：

```
(function ($) {
    $(document).ready(function () {
        $('#fbLink1').fancybox({
            beforeShow: function () {
                $('#fancyboxdiv').html('<h1>Fancybox first</h1>');
                $('#fancyboxdiv').append('<a onclick="javascript:$(\'#fbLink2\').click();" href="javascript:;" title="fancybox 2">Fancybox second</a>');
            },
            afterClose: function () {
                // $('#fancyboxdiv').html('');
                $('#fancyboxdiv').empty();
            }
        });
        $('#fbLink2').fancybox({
            beforeShow: function () {
                $('#fancyboxdiv').html('<h1>Fancybox second</h1>');
                $('#fancyboxdiv').append('<a onclick="javascript:$(\'#fbLink1\').click();" href="javascript:;" title="fancybox 1">Fancybox first</a>');
            },
            afterClose: function () {
                // $('#fancyboxdiv').html('');
                $('#fancyboxdiv').empty();
            }
        });
    }); // ready
})(jQuery); 
```

这应该适用于任何浏览器（用 IE7 测试）

# c# - 在 Linq 中处理 null

> ID：15577213
> 
> 赞同：2
> 
> 时间：2013-03-22T18:14:34.653
> 
> 标签：c#, linq, null

我是 linq 的新手，这不断出现在一个空卷字段上。该文件是不可预测的，它会发生，所以我想在有异常的地方放一个 0。有什么快速简单的方法吗？

```
 var qry =
            from line in File.ReadAllLines("C:\\temp\\T.txt")
            let myRecX = line.Split(',')
            select new myRec()

            {

               price =   Convert.ToDecimal( myRecX[0].Replace("price =  ", "")) ,
               volume = Convert.ToInt32(myRecX[1].Replace("volume =", "")),
                dTime = Convert.ToDateTime( myRecX[2].Replace("timestamp =", ""))

            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:20:31.510

如果您想在传入数据为`null`、空或完全由空白字符组成时使用默认值，您可以这样做：

```
volume = string.IsNullOrWhitesplace(myRecX[1])
       ? defaultVolume // <<== You can use any constant here
       : Convert.ToInt32(myRecX[1].Replace("volume =", "")) 
```

但是，这是实现您需要的“快速而肮脏”的方式，因为每个命名参数的位置仍然是硬编码的。一种更健壮的方法是编写一个迷你解析器，它关注文件中指定的属性名称，而不是用空字符串替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:35:19.043

你可以使用这样的东西，它提供了一种表达方式来写你想要的东西：

```
static TOutput Convert<TInput, TOutput>(
    TInput value,
    params Func<TInput, TOutput>[] options)
{
    foreach (var option in options) {
        try { return option(value); }
        catch { }
    }

    throw new InvalidOperationException("No option succeeded.");
} 
```

像这样使用：

```
select new myRec()
{
   price = Convert(myRecX[0].Replace("price =  ", ""),
                   input => Convert.ToDecimal(input),
                   or => 0M),
   ...
}; 
```

函数间接和隐式数组构造可能会导致轻微的性能损失，但它为您提供了一个很好的语法，用于指定许多可能的转换，其中第一个成功的转换被采用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:45:22.140

我认为这里有一个问题超出了使用`Linq`.

一般来说，在清理文件数据之前对其进行操作是不好的做法。

*如果以下问题是关于文件名（而不是它的内容）的，那么这是理解清理输入*概念的一个很好的起点：

[C# 清理文件名](https://stackoverflow.com/questions/309485/c-sharp-sanitize-file-name)

毕竟你自己告诉你的代码缺乏对文件内容的控制，所以在调用之前：

`let myRecX = line.Split(',')`

我建议定义一个私有方法，例如：

```
string SanitizeInputLine(string input) {
  // here do whatever is needed to bring back input to 
  // a valid format in a way that subsequent calls will not
  // fail

  return input;
} 
```

应用它很简单；

`let myRecX = SanitizeInputLine(line).Split(',')`

**作为一般规则，永远不要相信输入。**

让我引用Howard/LeBlanc的[编写安全代码](https://rads.stackoverflow.com/amzn/click/com/0735617228)的第 10 章，名为 _All Input Is Evil!__ ：

> ...在数据得到验证之前，您永远不应该信任数据。不这样做会使您的应用程序易受攻击。或者，换一种说法：*所有输入都是邪恶的，除非证明不是*这样。

# animation - Appcelerator 合金视图幻灯片

> ID：15577215
> 
> 赞同：1
> 
> 时间：2013-03-22T18:14:55.363
> 
> 标签：animation, view, titanium, appcelerator, titanium-alloy

我在 Titanium 上使用 Alloy MVC 框架，并希望在视图之间制作幻灯片。当我在屏幕上滑动时，我想以从右到左或从左到右的滑动效果显示下一个/上一个视图。我正在使用这段代码：

我的 index.xml 中的一个选项卡：

```
<Tab title="Bilan" icon="KS_nav_ui.png">
    <Window title="Bilan" id="bilanTab" onSwipe="doBilanSwipe">
    </Window>
</Tab> 
```

问题视图在 bilanTab 中动态添加和填充：

```
<Alloy>
<Collection src="ReponsePossible">
<View id="questionContainer" class="container">
    <Label id="questionText" />
    <Button id="buttonNextQuestion">Question suivante</Button>
</View>
</Alloy> 
```

以及 index.js 控制器中的两个函数（此处未打印 prevQuestion 的 3 个函数）：

```
var previousQuestion;
var nextQuestion;

function doBilanSwipe(e){
    if (e.direction == 'left'){
        nextQuestion();
    }
    else if (e.direction == 'right'){
        prevQuestion();
    }
}

function nextQuestion(){
    if (questionsCurrentIndex < questions.length-1){
        questionsCurrentIndex++;
        $.previous = previousQuestion;
        $.next = Alloy.createController('question', questions.at(questionsCurrentIndex));
        nextQuestion = $.next;
        $.next.questionContainer.left = 320;
        $.bilanTab.add($.next.questionContainer);
        $.next.questionContainer.animate({left:0, duration:200});
        $.previous.questionContainer.animate({left:-320, duration:200},function(){
            $.previous = previousQuestion;
            $.next = nextQuestion;
            $.bilanTab.remove($.previous.questionContainer);
            previousQuestion = $.next;
            $.previous.destroy();
        });
    }
} 
```

我的问题是第一个动画（第一个视图向左移动）没问题，但在那之后，下一个视图只是出现而没有任何动画。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:38:55.533

已经有[`Titanium.UI.ScrollableView`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.ScrollableView)针对所有平台执行此操作的工具。

像这样在合金中使用它：

```
<Alloy>
    <Window id="win">
        <ScrollableView id="scrollableView" showPagingControl="true">
            <View id="view1" backgroundColor="#123" />
            <View id="view2" backgroundColor="#246" />
            <View id="view3" backgroundColor="#48b" />
        </ScrollableView>
    </Window>
</Alloy> 
```

您可以像这样在控制器内部动态添加视图：

```
$.scrollableView.addView(Ti.UI.createView({ // your custom attributes here}); 
```

# java - 不存在的 '。' 添加三元组 Jena ElementGroup 后导致解析错误

> ID：15577223
> 
> 赞同：1
> 
> 时间：2013-03-22T18:15:28.243
> 
> 标签：java, sparql, jena

我正在尝试根据给定查询构建一个新查询（旧查询——我无法更改）。

假设我得到一个简单有效的 SPARQL 查询，`SELECT ?s WHERE{ ?s ?p ?o }`. 假设我制作了上述查询的耶拿查询对象，并将查询模式作为 Java 中的 ElementGroup 获取，如下所示：

```
Query q = QueryFactory.create("SELECT ?s WHERE{ ?s ?p ?o }, Syntax.syntaxSPARQL_11);
ElementGroup oldQP = (ElementGroup)q.getQueryPattern(); 
```

我之前向旧查询模式添加新三元组的方式是使用以下语法：

```
Triple t = Triple.create(...);
oldQP.addTriplePattern(t); 
```

但是，当您创建新的查询对象时：

```
Query nq = q.cloneQuery();
nq.setQueryPattern(oldQP);
nq.setQuerySelectType();
nq.setQueryResultStar(false);
nq.addResultVar("s"); 
```

你最终得到一个看起来像的查询

```
SELECT ?s WHERE{
    ?s ?p ?o
    ?s2 ?p2 ?s.
} 
```

因为当您设置对象的 QueryPattern 时，它不会识别/关心第一个三元组不会以句点结尾。这会在查询运行时导致解析错误...

```
Encountered " <VAR1> "?s2 "" at line 10, column 3.
Was expecting one of:
"graph" ...
"optional" ...
"minus" ...
"bind" ...
"service" ...
"let" ...
"exists" ...
"not" ...
"filter" ...
"{" ...
"}" ...
";" ...
"," ...
"." ... 
```

因为这显然不是有效的 SPARQL。那么，如何避免这个问题呢？如果所有三元组都有关闭期，则不会出现此问题，但我似乎找不到任何方法来完成这项工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:35:13.107

我不确定我是否完全遵循您的问题

第二个查询来自哪里？您是否正在调用`toString()`新的查询对象，在这种情况下，这可能是打印查询的内部逻辑中的错误。

另外，您使用的是什么版本的 ARQ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:22:28.420

所以我似乎找到了一种解决方法/解决方案。在调试并更仔细地查看`ElementGroup`该行创建的对象之后

```
ElementGroup oldQP = (ElementGroup)q.getQueryPattern(); 
```

我注意到它包含一个 Element 对象的 ArrayList（通过 method 检索`ElementGroup.getElements()`）。在我尝试添加三元组（通过`ElementGroup.addTriplePattern(...)`方法）之前，这个列表中唯一的东西是 Type 的对象`ElementPathBlock`。好的，酷。

接下来，我尝试通过上述方法添加三元组，如下所示：

```
Triple t = Triple.create(...);
oldQP.addTriplePattern(t); 
```

我注意到这`ElementTriplesBlock`为 ElementGroup 的元素列表添加了一个新元素。看来这就是罪魁祸首。所以，我的解决方案是抓住最后一次出现的`ElementPathBlock`，并将三元组添加到该对象而不是将它们添加到 ElementGroup （从而避免将新的添加`ElementTriplesBlock`到 ArrayList ）：

```
//same as before
Query q = QueryFactory.create("SELECT ?s WHERE{ ?s ?p ?o }, Syntax.syntaxSPARQL_11);
Query nq = q.cloneQuery();
ElementGroup oldQP = (ElementGroup)q.getQueryPattern();
Triple t = Triple.create(Var.alloc("s2"), Var.alloc("p2"), Var.alloc("s));

//new
ElementPathBlock epb;
int index = -1;
for(int i=0; i<oldQP.getElements().size(); i++){
    if(oldQP.getElements().get(i) instanceof ElementPathBlock){
        //...get last index of instanceof ElementPathBlock, if exists.
        index = i;
    }
}
if(index > -1){
    //...found occurence of ElementPathBlock we will add to
    epb = (ElementPathBlock) oldQP.getElements().get(index);
}else{
    //...no occurence, so make new ElementPathBlock to add
    epb = new ElementPathBlock();
}
//add Triple(s) to epb, not to oldQP
epb.addTriple(t);
//re-add (or add for first time) ElementPathBlock to the ArrayList of Elements
if(index > -1){
    oldQP.getElements().set(index, epb);
}else{
    oldQP.getElements().add(epb);
}

//same as before
nq.setQueryPattern(oldQP);
nq.setQuerySelectType();
nq.setQueryResultStar(false);
nq.addResultVar("s"); 
```

现在查看 oldQP，经过上述操作，我们看到它的格式正确，句号放置正确：

```
{?s ?p ?o.
 ?s2 ?p2 ?s.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T19:06:11.327

下面的代码按照您的描述创建一个查询，复制它，添加一个三元组模式，打印它，然后运行这两个查询。您是对的，查询的打印形式缺少`.`通常会出现的位置。然而，正如 RobV[指出](https://stackoverflow.com/a/15577515/1281433)的那样，打印异常对查询结果没有任何影响。如果您在实际案例中得到不同的结果，您能否强调它与此不同的地方？

```
import com.hp.hpl.jena.graph.Triple;
import com.hp.hpl.jena.query.Query;
import com.hp.hpl.jena.query.QueryExecutionFactory;
import com.hp.hpl.jena.query.QueryFactory;
import com.hp.hpl.jena.query.ResultSetFormatter;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.Property;
import com.hp.hpl.jena.rdf.model.Resource;
import com.hp.hpl.jena.sparql.core.Var;
import com.hp.hpl.jena.sparql.syntax.ElementGroup;

public class AddTriplePattern {
    public static void main(String[] args) {
        // Create the original query
        final String queryString = "" +
                "select * where {\n" +
                "  ?s ?p ?o .\n" +
                "}\n" +
                "";
        final Query query = QueryFactory.create( queryString );

        // Create the new query and add `?s2 ?p2 ?o2`. Print the new query
        // before and after adding the triple pattern.  Sure enough, after 
        // the modification, the pattern is printed without a `.` between the 
        // triples.  The space between the variables is also a bit bigger.
        final Query newQuery = QueryFactory.create( query );
        System.out.println( "== before ==\n"+newQuery );
        final ElementGroup eg = (ElementGroup) newQuery.getQueryPattern();
        final Triple t = new Triple( Var.alloc( "s2"), Var.alloc( "p2" ), Var.alloc( "o2" ));
        eg.addTriplePattern( t );
        newQuery.setQueryResultStar(false);
        newQuery.addResultVar( "s2" );
        System.out.println( "== after ==\n"+newQuery );

        // Create a model with a single triple [a, a, a].
        final Model model = ModelFactory.createDefaultModel();
        final Resource a = model.createResource( "urn:ex:a" );
        model.add( a, a.as( Property.class ), a );

        // Run both the original query and the new query on the model.  Both
        // return the expected results.
        ResultSetFormatter.out( QueryExecutionFactory.create( query, model ).execSelect() );
        ResultSetFormatter.out( QueryExecutionFactory.create( newQuery, model ).execSelect() );
    }
} 
```

输出是：

```
== before ==
SELECT  *
WHERE
  { ?s ?p ?o }

== after ==
SELECT  ?s2
WHERE
  { ?s ?p ?o
    ?s2  ?p2  ?o2 .
  }

----------------------------------------
| s          | p          | o          |
========================================
| <urn:ex:a> | <urn:ex:a> | <urn:ex:a> |
----------------------------------------
--------------
| s2         |
==============
| <urn:ex:a> |
-------------- 
```

# flash - Video.js 应该在没有 Flash 插件的情况下在 IE8 中工作吗？

> ID：15577229
> 
> 赞同：1
> 
> 时间：2013-03-22T18:15:36.910
> 
> 标签：flash, video, video.js

Video.js 的主页声明如下（强调我的）：

> 无论用户使用的是最新版本的浏览器，还是 Internet Explorer 6 之类的古老版本，他们都将获得类似的 Video.js 体验，**它使用超轻量级的 Flash 播放器用于不支持 HTML5 视频的浏览器。**

这对我来说，如果我有一个没有安装 Flash 插件的 IE8 实例，这个“超轻量级 Flash 播放器”应该会显示视频。但是，情况似乎并非如此。当我去[http://videojs.com](http://videojs.com)时，我只看到一个黑框而不是视频。

我是否误解了 Video.js 的嵌入式 Flash 播放器的用途？还是发生了其他事情？

**更新**：我添加了一个屏幕截图，我收到以下无用的 JavaScript 错误：

> 消息：m`I0_1363975786212

![在此处输入图像描述](../Images/29a2b7779c22817c891cd121864257a5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T11:22:09.743

> 这对我来说，如果我有一个没有安装 Flash 插件的 IE8 实例，这个“超轻量级 Flash 播放器”应该会显示视频。

我认为您误解了该声明，并且他们在那里使用的措辞不太好。我认为“超轻量级 Flash 播放器”应该被理解为“在 Flash 中实现的超轻量级视频播放器，需要 Flash Player 插件”。

换句话说，他们提到的“超轻量级 Flash 播放器”并不是整个 Adob​​e Flash Player 插件的替代品。它是一个在 Flash 中实现的视频播放器，一个 swf 文件。这个想法是，当不支持 HTML5 视频时，如果安装了 Flash Player 插件，将使用 Flash 代替。

所以对于“Video.js 是否应该在没有 Flash 插件的情况下在 IE8 中工作？”这个问题，答案是否定的。

# html - CSS 样式 - 页面右侧在宽屏幕上溢出到右侧

> ID：15577230
> 
> 赞同：0
> 
> 时间：2013-03-22T18:15:44.373
> 
> 标签：html, css, firebug

我有一个 HTML 页面。在我的 15 英寸笔记本电脑屏幕上，它看起来还不错。但是屏幕更宽的人报告说，屏幕右侧的文字向右侧溢出。

如果我放置视图源 HTML，它会很长。所以我将链接发布到页面。请不要认为这是我在为网站做广告（如果有人抱怨，我会用 html 替换链接）。

我怀疑我需要在某个 div 中包装一些东西，但不确定。我正在用萤火虫查看它，似乎问题发生在谷歌广告之后，但我不确定。

非常感谢有关如何解决正确泄漏的建议。该网站是problemio.com

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:18:47.237

您需要在容器 div 上设置宽度或最大宽度。

对于您的站点，您有一个没有 ID 或与之关联的类的 div（位于横幅上方的那个）。尝试在那个 div 上设置一个`width: 1200px`or `max-width: 1200px`（或者你想要的任何大小）

如果您希望您的网站居中，还可以`margin: 0 auto;`在您设置宽度限制的元素上添加一个。

这是您网站的当前结构：

```
<body>
  <div class="wrapper">  <-- make this your wrapper
    <div class="banner" .....></div>
    <div id="body_container"> ..... 
```

对于您的 CSS：

```
.wrapper { 
width: 1200px;
margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:18:53.187

给你`<body/>`一个`width`或`max-width`：

```
body {
    max-width: 800px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:22:11.170

给你的网站一个这样的包装器：

```
<body>
<div class="wrapper">

......... REST OF SITE HERE ..........

</div>
</body> 
```

在包装器上定义以下内容：

```
.wrapper {
width: 100%;
max-width: 1140px; /* you cna change this to whatever px width you want */
margin: 0 auto; /* center */
} 
```

这将使您的站点居中，在 PX 中给它一个最大宽度，并让它尽可能地拉伸，直到达到该限制。

# c++ - 映射的间接迭代器 >

> ID：15577231
> 
> 赞同：2
> 
> 时间：2013-03-22T18:15:45.253
> 
> 标签：c++, boost, c++11, iterator, boost-iterators

我正在尝试实现`map<T, shared_ptr<U>>`“删除”的迭代器`shared_ptr`，即取消引用`pair<T, U&>`. 我需要这个来使我的包装器适应`map`基于范围的 for 循环。

`boost::indirect_iterator`似乎是为这种需要而设计的东西。我试过这个：

```
typedef std::map<int, std::shared_ptr<int>> M;
typedef boost::indirect_iterator<M::iterator, std::pair<int, int>> It; 
```

由于要求，这不起作用`indirect_iterator`：

**表达式 *v，其中 v 是 iterator_traits::value_type 的对象，应该是有效的表达式并且可以转换为引用。**

是否可以`boost::indirect_iterator`用于此任务？如果没有，我可以这样做`boost::iterator_adaptor`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:37:01.987

感谢@Xeo 评论，解决方案是使用 Boost.Range。我设法从 VC10 得到什么

```
#include <boost/range/adaptor/map.hpp>
#include <boost/range/adaptor/indirected.hpp>

#if defined(_MSC_VER) && _MSC_VER <= 1600 // VC10
    template< class T >
    typename std::add_rvalue_reference<T>::type declval();
#endif

class Wrapper
{
private:
    typedef std::map<T, std::shared_ptr<U>> Container;

public:
    typedef decltype(declval<Container&>() | boost::adaptors::map_values | boost::adaptors::indirected) IteratorRange;
    typedef decltype(declval<Container&>() | boost::adaptors::map_values | boost::adaptors::indirected) ConstIteratorRange;
    typedef IteratorRange::iterator Iterator;
    typedef ConstIteratorRange::const_iterator ConstIterator;

    Iterator begin()
    {
        return iteratorRange().begin();
    }

    // by analogy
    ConstIterator begin() const;
    ConstIterator cbegin() const;
    Iterator end();
    ConstIterator end() const;
    ConstIterator cend() const;

private:
    IteratorRange iteratorRange()
    {
        return container | boost::adaptors::map_values | boost::adaptors::indirected;
    }

    ConstIteratorRange iteratorRange() const;

private:
    Container container;
}; 
```

# vbscript - 使用 VBScript 英语和非英语设置用户权限

> ID：15577232
> 
> 赞同：0
> 
> 时间：2013-03-22T18:15:47.350
> 
> 标签：vbscript, localization, locale, custom-action, cacls

有很多帖子有人需要知道如何在使用 VBScript 安装时更改文件夹或文件的权限。我遇到的一个问题是他们都没有解决非英语情况的问题。

这基本上是我到目前为止所拥有的。我检查区域设置是否是特定语言，例如法语的“fr”，然后假设用户组有一个名为 Utilisateurs 的组。然后我调用 cacls 来设置我的文件夹的更改权限。这对英语和法语非常有效，但我不确定其他语言的组是什么。我目前仅限于这六个，因为我不知道其他用户组为其他语言命名的名称。

我希望能够处理所有情况，但是如果您有其他语言的已知用户组列表，这足以让我解决我当前的问题。

```
Dim nLocale
nLocale = objShell.RegRead("HKEY_USERS\.DEFAULT\Control Panel\International\LocaleName")
Dim nLocaleName, sUserGroup
nLocaleName = Left(nLocale, 2)
'MsgBox "[" & nLocaleName & "] = en" & InStr(1, nLocalName, "en", vbTextCompare)
if InStr(1, nLocaleName, "en", vbTextCompare) = 1 or nLocaleName="en" then
    sUserGroup="Users"
elseif InStr(1, nLocaleName, "fr", vbTextCompare) = 1 then
    sUserGroup="Utilisateurs"
elseif InStr(1, nLocaleName, "de", vbTextCompare) = 1 then
    sUserGroup="Benutzer"
elseif InStr(1, nLocaleName, "es", vbTextCompare) = 1 then
    sUserGroup="Usuarios"
elseif InStr(1, nLocaleName, "it", vbTextCompare) = 1 then
    sUserGroup="Utenti"
elseif InStr(1, nLocaleName, "pt", vbTextCompare) = 1 then
    sUserGroup="Usuários"
else
    MsgBox "To allow other users access to the AUDit Database you will need to give user permissions to " & strHomeFolder, (vbOKOnly + vbExclamation), "Notice of Permissions"
    return
end if

'Wscript.Echo "cacls """ & strHomeFolder & """ /e /c /g " & sUserGroup & ":C "

intRunError = objShell.Run("cacls """ & strHomeFolder & """ /e /c /G """ & sUserGroup & """:C ", 2, True) 
```

这在我运行它以及使用 Visual Studio 的安装向导在自定义操作中设置时有效。我发现了一些伪解决方案，只有在自定义操作之外执行它们才有效。它必须在我的安装的自定义操作中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:35:43.800

本地用户组有一个[众所周知的 SID](http://support.microsoft.com/kb/243330)，因此您可以像这样解析组的名称：

```
Set wmi = GetObject("winmgmts://./root/cimv2")
sUserGroup = wmi.Get("Win32_SID.SID='S-1-5-32-545'").AccountName 
```

* * *

附带说明：我**强烈**建议尽可能使用[`icacls`](http://technet.microsoft.com/en-us/library/cc753525%28v=ws.10%29.aspx)over 。`cacls`

# plugins - Sublime 文本插件的运行与文件类型无关

> ID：15577238
> 
> 赞同：0
> 
> 时间：2013-03-22T18:16:05.393
> 
> 标签：plugins, sublimetext2

我是 Sublime 文本的新手。我最近一直在安装很多插件。

我意识到的一件事是，如果分配了键盘快捷键，所有插件都将执行它们的操作，而与文件类型的类型无关。

例如：如果我有 HTML tidy 之类的插件，并且如果我有键盘快捷键，请说 CTRL+K。现在，如果我打开一个 .js 文件并按 CTRL+K，HTML Tidy 插件就会以某种方式最终执行。

这是预期的行为还是我配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:25:32.920

这是由插件的实现和相关的键绑定定义的行为。我建议为检查文件类型的插件创建一个问题或发出拉取请求。他们还可以将上下文添加到他们的键绑定中，以仅在特定范围内运行。您可以使用上下文创建用户键绑定以运行正确的命令。但是请理解，如果它与您的键绑定的上下文不匹配，它将回退到插件定义的任何内容。让我知道我是否可以澄清任何事情。

# ffmpeg - 在drawtext过滤器中正确转义文本

> ID：15577245
> 
> 赞同：1
> 
> 时间：2013-03-22T18:16:37.170
> 
> 标签：ffmpeg

根据文档`%{}:,`应该用斜杠转义。但是当我转义`%`文本时没有添加。有错误信息说`Stray % near ')'`。但这是什么意思，我该如何解决？命令和输出：

```
$ /usr/bin/ffmpeg -y -i /home/www/255871.mov -af 'aresample=async=1:min_hard_comp=0.100000' -vf 'scale=480:trunc(ow/a/2)*2,transpose=1 [in];movie=watermarks/text-box440.mov,scale=320:55 [bg];[in][bg] overlay=x=20:y=main_h-80,drawtext=fontsize=20:fix_bounds=1:fontfile=Helvetica\\:Style=bold:fontcolor=0xe6b300:text=small kitten \%\):x=30:y=h-80+ascent/2:draw=gte(t\,0)\;lt(t\,5) [out]' -pix_fmt yuv420p -r 24.39 -map_metadata -1 -movflags +faststart -f mp4 -vcodec libx264 -b:v 800k -maxrate 1100k -bufsize 2M -bt 256k -profile:vbaseline -acodec libfdk_aac -ab 64k -ar 44100 -ac 1 /tmp/kitten.mp4
ffmpeg version 1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Mar 15 2013 18:40:14 with gcc 4.4.6 (GCC) 20120305 (Red Hat 4.4.6-4)
  configuration: --enable-gpl --enable-libmp3lame --enable-libvo-aacenc --enable-libx264 --enable-version3 --enable-pthreads --enable-libfaac --enable-nonfree --enable-libfdk_a
ac --enable-fontconfig --enable-libfreetype
  libavutil      52\. 18.100 / 52\. 18.100
  libavcodec     54\. 92.100 / 54\. 92.100
  libavformat    54\. 63.104 / 54\. 63.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 42.103 /  3\. 42.103
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/www/255871.mov':
  Metadata:
    major_brand     : qt
    minor_version   : 0
    compatible_brands: qt
    creation_time   : 2012-07-17 07:42:35
    model           : iPhone 3GS
    model-rus       : iPhone 3GS
    encoder         : 4.2.1
    encoder-rus     : 4.2.1
    date            : 2012-07-17T10:42:35+0300
    date-rus        : 2012-07-17T10:42:35+0300
    make            : Apple
    make-rus        : Apple
  Duration: 00:00:09.38, start: 0.000000, bitrate: 790 kb/s
    Stream #0:0(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 480x360, 720 kb/s, 29.97 fps, 29.97 tbr, 600 tbn, 1200 tbc
    Metadata:
      rotate          : 90
      creation_time   : 2012-07-17 07:42:35
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s
    Metadata:
      creation_time   : 2012-07-17 07:42:35
      handler_name    : Core Media Data Handler
[Parsed_drawtext_5 @ 0x2ae9b00] Using "/usr/share/fonts/default/Type1/n019003l.pfb"
[libx264 @ 0x2ae7d40] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX
[libx264 @ 0x2ae7d40] profile Constrained Baseline, level 2.1
[libx264 @ 0x2ae7d40] 264 - core 130 r2274 c832fe9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2013 - http://www.videolan.org/x264.html - options: cabac=0 ref=3 deblock=1:0:0 analyse=0x1:0x111 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=24 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=abr mbtree=1 bitrate=800 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 vbv_maxrate=1100 vbv_bufsize=2000 nal_hrd=none ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to '/tmp/kitten.mp4':
  Metadata:
    encoder         : Lavf54.63.104
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 360x480, q=-1--1, 800 kb/s, 19512 tbn, 24.39 tbc
    Stream #0:1: Audio: aac ([64][0][0][0] / 0x0040), 44100 Hz, mono, s16, 64 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
  Stream #0:1 -> #0:1 (aac -> libfdk_aac)
Press [q] to stop, [?] for help
[Parsed_drawtext_5 @ 0x2ae9b00] Stray % near ')'
    Last message repeated 201 times
Stray % near ')'0.0 q=27.0 size=     480kB time=00:00:07.96 bitrate= 493.4kbits/s dup=0 drop=35
[Parsed_drawtext_5 @ 0x2ae9b00] Stray % near ')'
    Last message repeated 77 times
Starting second pass: moving header on top of the file
frame=  231 fps=0.0 q=-1.0 Lsize=    1002kB time=00:00:09.47 bitrate= 866.6kbits/s dup=0 drop=50
video:921kB audio:74kB subtitle:0 global headers:0kB muxing overhead 0.680957%
[libx264 @ 0x2ae7d40] frame I:1     Avg QP:24.43  size: 13264
[libx264 @ 0x2ae7d40] frame P:230   Avg QP:23.72  size:  4041
[libx264 @ 0x2ae7d40] mb I  I16..4: 24.8%  0.0% 75.2%
[libx264 @ 0x2ae7d40] mb P  I16..4:  2.3%  0.0%  4.8%  P16..4: 34.4% 28.8%  9.4%  0.0%  0.0%    skip:20.3%
[libx264 @ 0x2ae7d40] coded y,uvDC,uvAC intra: 62.5% 54.2% 4.4% inter: 19.6% 20.3% 0.1%
[libx264 @ 0x2ae7d40] i16 v,h,dc,p: 36% 29% 19% 16%
[libx264 @ 0x2ae7d40] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 19% 21% 20%  6%  8%  7%  7%  6%  6%
[libx264 @ 0x2ae7d40] i8c dc,h,v,p: 65% 15% 17%  3%
[libx264 @ 0x2ae7d40] ref P L0: 93.4%  4.3%  2.3%
[libx264 @ 0x2ae7d40] kb/s:796.32 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-06T11:10:39.117

找到了解决方案。此错误的原因是 ffmpeg 尝试使用 % 扩展文本以按照[文档](http://ffmpeg.org/ffmpeg-filters.html#Text-expansion)中的说明进行操作：

> %{...} 形式的序列被扩展。大括号之间的文本是一个函数名，后面可能跟以“:”分隔的参数。如果参数包含特殊字符或分隔符（':' 或 '}'），它们应该被转义。

因此，只需添加`expansion=none`到过滤器配置即可解决问题。

# android - Android 应用的公司名称

> ID：15577250
> 
> 赞同：0
> 
> 时间：2013-03-22T18:16:52.070
> 
> 标签：android, publishing

好吧...我讨厌我在这里问它...但我只是不知道还能去哪里。我只是一个希望在不久的将来发布一个安卓应用程序的独立开发者。我已经注册为 Google Play 的开发者。我还有一个网站，上面有我虚构的开发者名称。

所以......我可以简单地为我的应用程序包命名我喜欢的任何名称，然后用我编造的公司名称喷溅我的应用程序，即有一个启动屏幕显示“我的酷开发者工作室”吗？我没有税号或任何类型的实际业务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:20:18.303

我认为谷歌不会在意，除非你做错了什么（冒充某人等）。

而且我不确定您当地的税法是什么，但是在加拿大，只要做某些与所得税相关的事情，您就可以编造一个名字并在其下经营而不会大惊小怪。

我认为您当地的税收/监管情况比 Google 关心的更重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:20:40.877

你可以随心所欲。不同的国家有不同的税收影响，在美国，您需要向 IRS 报告超过一定金额的收入。但谷歌没有规定任何限制，它们比苹果宽松得多。另一方面，苹果必须让你的税务文件和合同全部生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:22:27.003

应该不是问题。企业只有在盈利时出于税收原因才需要。同样适用于应用商店和游戏。

# jquery - 使用 JQuery 更改内容

> ID：15577255
> 
> 赞同：0
> 
> 时间：2013-03-22T18:17:07.737
> 
> 标签：jquery, html

我有一个 JQuery 函数，可以根据您要查看的幻灯片更改显示的内容。您单击三个圆圈之一，然后它会发生变化，有点像幻灯片。但是，唯一的问题是您必须单击其中一个圆圈才能更改内容。我还想有一个 JQUERY 函数，它可以使所需的内容自动滑过，也许还有一些动画。如何自动化我的代码？

直播网站：[http ://www.getstatewideroofing.com](http://www.getstatewideroofing.com)

JSFIDDLE：http: [//jsfiddle.net/h5wVc/4/](http://jsfiddle.net/h5wVc/4/)

我的 JQUERY（我使用的是 1.8.2）：

```
$(document).ready(function() {
$('.circle1').click(function () {
    $('#slideshow img').replaceWith('<img src="images/roof.png"/>');
    $('#slideshow-bottom p').replaceWith('<p> Some text </p>');
});
$('.circle2').click(function () {
    $('#slideshow img').replaceWith('<img src="https://sphotos-a.xx.fbcdn.net/hphotos-
ash4/313870_456560374416571_509297138_n.jpg"/>');
    $('#slideshow-bottom p').replaceWith('<p>Some text</p>');
});
$('.circle3').click(function () {
    $('#slideshow img').replaceWith('<img src="http://i.imgur.com/1hxQNiw.jpg"/>');
    $('#slideshow-bottom p').replaceWith('<p>Some text</p>');
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:50:15.373

这是一个如何构建自动滚动功能的示例。请注意，节目不会重新开始（我已将其留给您执行）-[这](https://stackoverflow.com/questions/11797291/jquery-slideshow-next-previous)是寻求帮助的好地方。我构建的示例将自动启动幻灯片并继续到下一个项目。您需要做的是将`currentItem`（请参阅我的代码）附加到数组的末尾，以便始终有一个“下一张”幻灯片。这段代码和上面的提示应该足以让您构建您正在寻找的东西。

```
$(function() {
    setInterval(update, 2000);
});

function update() {
  var ItemToLoad = currentItem.next();
  ItemToLoad.trigger('click');
  currentItem = ItemToLoad;
} 
```

**工作示例** [http://jsfiddle.net/h5wVc/20/](http://jsfiddle.net/h5wVc/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:58:14.027

我同意这样的评论，即最好让您的幻灯片在页面上可用并使用 css / javascript 进行动画处理并相应地显示它们，实现您的问题的一种非常简单的方法是设置一个初始标记，然后使用 setInterval模拟单击组中的下一张幻灯片。就像是

```
var marker = 1;

var imgclick = function() {  
    marker = ( marker === 3 ? 1 : ++marker );
    $('.circle'+marker).click();
};

window.setInterval(imgclick,1000); 
```

调用 imgclick 之后的整数是模拟下一次点击之前的延迟，以毫秒为单位，并且循环将在第三张幻灯片后重置（尽管您可以通过使用轻松更改此设置以容纳任意数量的幻灯片

```
marker = ( marker === $("[class^=circle]").length ? 1 : ++marker ); 
```

我已经更新了你的小提琴来展示这个工作 - [http://jsfiddle.net/h5wVc/28/](http://jsfiddle.net/h5wVc/28/)

# r - 用“替代”输入的变量的标题中的粗体字

> ID：15577258
> 
> 赞同：2
> 
> 时间：2013-03-22T18:17:19.417
> 
> 标签：r

那应该很容易......如何`i`在下图中的标题中以粗体显示 (=1) （仅调整参数`main`）？

```
i <- 1
plot(0~0, main=substitute(bold("foo"~i.~"bar"), list(i.=i))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:32:22.557

这个怎么样？

```
i <- 1
plot(0~0, main=substitute(bold("foo"~i.~"bar"), list(i.=as.character(i)))) 
```

# java - 在 Apache Sling 中访问 JSTL 中的 pageContext 变量

> ID：15577260
> 
> 赞同：0
> 
> 时间：2013-03-22T18:17:39.360
> 
> 标签：java, jstl, sling, scriptlet

我在 Apache Sling 中创建了一个 JSP，我在其中使用 scriplet 来检索对象列表，然后我想使用 JSTL 对其进行迭代。但是，使用下面的代码，我在 JSTL 中看不到任何结果。我可以使用 JSTL (

重要的部分：

```
<%
    AppLinkService appLinkSvc = new AppLinkService(); 
    String userId = "sean"; //TODO get from request

    List<AppLink> links = appLinkSvc.getAppLinksFromWebService(userId);
    pageContext.setAttribute("appLinkList", links);
%>
<br/>
<br/>

<c:if test="${empty appLinkList}">
    <h1>You do not have any apps.</h1>
</c:if>
<c:if test="${not empty appLinkList}">
    <c:forEach items="${appLinkList}" var="link">
        <h3>
            <a href='<c:out value="${link.linkUrl}"/>'> 
                <c:out value="${link.appName}" /> 
            </a>
        </h3>
    </c:forEach>
</c:if> 
```

我知道我所有的导入都是正确的（我解决了所有这些错误），但现在我无法访问这些对象。我在一个简单的 Tomcat Web 应用程序中也有同样的代码（带有导入等），但我知道 Apache Sling 的情况有所不同。似乎 pageContext 在 Sling 世界中的工作方式不同。

我错过了什么？

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:30:08.653

代码对我来说看起来是正确的，应该可以正常工作。如果您的链接列表确实包含任何对象，您是否尝试过？尝试访问它

```
<h1>Size is <%= links.size()%></h1> 
```

HTH，（三）

# batch-file - 使用变量复制命令

> ID：15577261
> 
> 赞同：0
> 
> 时间：2013-03-22T18:17:39.597
> 
> 标签：batch-file

在下面的批处理脚本中，我将 PDF 文件 (my_test01) 复制到输入文件夹，然后我将等待并转到输出文件夹以复制输出文件并准备好文件名 (my_test01-ready) 以发送到另一个位置，脚本没有找到输出文件，因为期望与输入相同的文件名。

```
copy /b "%file%" "W:\IP5000_2-up\Input Folder"
TIMEOUT /T 60 /NOBREAK
W:
cd \IP5000_ING_2-up\Processed Docs on Success
copy /b "%file%" "\\10.0.238.209\Duplex\18inch_2UP_Pinless" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:14:06.423

您可以使用参数替换`-ready`在文件的基本名称和扩展名之间插入。`help call`有关详细信息，请参阅和的最后几页`help for`。

这是一个用于`call`将完全合格的路径分解为其组件的解决方案，因此您可以插入所需的内容。这对你有用吗？

```
copy /b "%file%" "W:\IP5000_2-up\Input Folder"
TIMEOUT /T 60 /NOBREAK
call :appendready "w:\IP5000_ING_2-up\Processed Docs on Success\%file%" processed
copy /b "%processed%" "\\10.0.238.209\Duplex\18inch_2UP_Pinless"

goto :EOF

:appendready <filename> <var_to_populate>
set "%~2=%~dpn1-ready%~x1" 
```

在伪代码中，`:appendready`子程序的工作方式如下：

```
set $2 = $1(drive:\path\name) + "-ready" + $1(extension) 
```

# android - android首次启动后不显示图标...？

> ID：15577264
> 
> 赞同：-4
> 
> 时间：2013-03-22T18:17:47.403
> 
> 标签：android

我有一个小问题：只要第一次完成，我可以在抽屉中显示我的应用程序的图标吗？

我发现代码（在要制作的清单中）不出现（图标不可见）：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SanvalentinoNumActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
            <!-- ICON INVISIBLE -->
            <data
                android:host="mocha"
                android:path="/RTT/reset"
                android:scheme="content" />
        </intent-filter>
    </activity>

</application> 
```

但我希望那个或我的应用程序在下载后自动加星或图标在第一次启动后变得不可见..

请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:46:16.387

保持数据库自动增加一个整数值。如果大于 0 则将其初始化为 0 执行以下代码：

```
requestWindowFeature(Window.FEATURE_LEFT_ICON);
setContentView(R.layout.main);
setFeatureDrawableResource(Window.FEATURE_LEFT_ICON,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T18:44:22.090

我解决了：PackageManager p = getPackageManager(); p.setComponentEnabledSetting(getComponentName(), PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);

# php - 在 jQuery 中连接引号 php 和 javascript 函数

> ID：15577267
> 
> 赞同：0
> 
> 时间：2013-03-22T18:17:55.310
> 
> 标签：php, jquery, ajax

```
$.ajax({
    type: "POST",
    url: <?php echo base_url().'index.php/user_management/manage_users/ViewProfile/'?>"+JSON.parse(item.UserID),
    success: function(output_string){
        $('.second_column_content_container').html(output_string);
    }
}); 
```

我希望 url 的结果用单引号或双引号括起来；例如

```
'url: <?php echo base_url().'index.php/user_management/manage_users/ViewProfile/'?>"+JSON.parse(item.UserID)' or 
"url: <?php echo base_url().'index.php/user_management/manage_users/ViewProfile/'?>"+JSON.parse(item.UserID)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:21:19.393

尝试这个

```
url: "<?php echo base_url().'index.php/user_management/manage_users/ViewProfile/'?>"+JSON.parse(item.UserID),
//---^^--here 
```

或者

```
url: "<?php echo base_url() ?>"+'index.php/user_management/manage_users/ViewProfile/'+JSON.parse(item.UserID), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:21:42.950

尝试这个：

```
$.ajax({
    type: "POST",
    url: '<?php echo base_url(); ?>'+'index.php/user_management/manage_users/ViewProfile/'+JSON.parse(item.UserID),
    success: function(output_string){
       $('.second_column_content_container').html(output_string);
    }
}); 
```

代替 php 连接`.`使用 javascript 连接`+`。

# javascript - 如何保护 socket.io 免受代码注入？

> ID：15577271
> 
> 赞同：0
> 
> 时间：2013-03-22T18:18:20.267
> 
> 标签：javascript, node.js, socket.io, serverside-javascript

所以我正在开发一个 socket.io 实时网络应用程序。我首先担心的是“如果某个心怀恶意的用户试图通过 Dev Tools 或 Firebug 注入一些代码怎么办？” 我在这里得到了我的答案。我的下一个担忧是：“如果某个心怀恶意的用户试图通过聊天和/或其他形式的字符串输入注入一些代码怎么办？” 我得出的结论是我自己无法解决这个问题。我知道我可以使用正则表达式来查找用户是否正在尝试注入代码，但是一旦代码被发送到服务器并存储到一个字符串中，它就会被执行。（例如：`var data = " *asd "; while(1);* "`; [ 其中用户发送的字符串是 * ] 之间的字符串）。所以我的问题是：**我怎样才能防止这种情况发生？**换句话说**，我如何清理用户输入？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:47:43.873

[您可以使用encodeURIComponent(userstring);](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)对用户输入进行编码。

例子：

```
var userData = encodeURIComponent(" *asd "; while(1);* "); 
```

# jquery - 使用 jquery.validationEngine 双重提交

> ID：15577279
> 
> 赞同：1
> 
> 时间：2013-03-22T18:18:49.943
> 
> 标签：jquery, jquery-validation-engine

因此，我有一个提交到数据库的表单，如果用户多次单击提交按钮，我想防止多次提交......通过一些研究，这似乎很容易完成，但是我发现的解决方案都没有我正在使用 jquery validationEngine 插件来验证表单客户端。它还在观看我在第一次单击后尝试禁用的按钮。

经过更多的谷歌搜索后，我设法想出了这个：

```
$('#speakerForm').validationEngine('attach', {
    onValidationComplete: function(form, status){
    if(status == true){
        $('input.submitbutton').attr('disabled', 'disabled').attr('value', 'Please Wait...');
        return true;
        }
    }
}); 
```

在我把我需要的东西放在那里之前，它的功能很好而且很花哨

```
$('input.submitbutton').attr('disabled', 'disabled').attr('value', 'Please Wait...'); 
```

线...

单击表单中的此行后，清除并返回页面顶部并且不提交任何数据。

我试过更换

```
onValidationComplete: 
```

和

```
onSuccess: 
```

无济于事。（并且显然摆脱了 if 语句）

任何建议将不胜感激...

也可以随意提问，因为我通常不擅长解释这些事情哈哈......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T12:56:32.557

所以经过大量的摆弄最终我发现了这个：

[防止在jQuery中重复提交表单](https://stackoverflow.com/questions/2830542/prevent-double-submission-of-forms-in-jquery)

它与验证引擎无关，但是如果您包含该插件，然后在（正常）调用验证引擎之后调用它，它似乎可以防止重复提交。

到目前为止，我只在 chrome 中对其进行了测试，但它似乎是合法的......

# html - CSS - 如何在不重叠的情况下将另一个 div 浮动到另一个上

> ID：15577280
> 
> 赞同：1
> 
> 时间：2013-03-22T18:18:50.393
> 
> 标签：html, css

嘿，我想把那个下面的 div 框放在那个上面有细节的盒子旁边，但是当我尝试定位绝对它时，我不知道为什么（我将所有三个 div 的父 div 设置为相对位置），我应该如何解决这个问题或任何其他更好的方法来做到这一点。

这是屏幕截图 - [http://www.findportugal.com/Untitled.png](http://www.findportugal.com/Untitled.png)

分区说明

```
 #user_panel - div around all the other divs ie parent div
   #user_details - div with details on top
   #user_photos - div with photo heading
   #user_current - div at the lower part 
```

CSS：

```
 #user_panel 
    { 
      color: white; 
      position: relative; 
    }
    #user_details 
    { 
      padding: 0 0 30px 0; 
    }
    #user_details table 
    { 
      padding: 30px 20px 10px 30px; 
      border: 1px solid grey; 
      margin: 0 60px 0 40px
    }
    #user_details table tbody tr td#right 
    { 
      padding: 0 0 0 100px; 
    }
    #users_title 
    { 
      padding: 20px 0 0 50px; 
    }

    div#user_photos 
    { 
       width: 850px; 
       height: 230px; 
       border: 1px solid grey; 
       margin: 50px 0 0 40px;
       padding: 0 0 20px 20px;  
    }

   #user_current 
   {
      border: 1px solid grey; 
      width: 320px; 
      position: absolute; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:21:31.330

您想要一个 div OVER 另一个 div 并且您说它不应该 OVERLAP 这是不可能的，而是减小上 div 的大小，使用`float: left;`这将使下面的 div 除了浮动 div 之外移动

也不要忘记清除浮动，否则您将花费​​另外 2 个小时来思考元素位置和背景颜色到底发生了什么

如果你想使用`position: absolute;`比 div 会重叠，所以在这种情况下，使用`position: relative;`容器元素而不是使用`position: absolute;`with `top right bottom left properties to set your element correctly`。

不要忘记`position: relative;`，否则您的绝对 div 将在您的页面中狂奔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:35:21.710

我假设你想把那个较低的 div 框放在左上角 div 框右侧的空白处，而不是实际上与另一个框重叠？如果是这样，您最好使用浮点数。

您还没有显示您的 html，所以让我们假设左上角的框的 id 为“details”，底部框的 id 为“current-pic”，屏幕截图中间的全角框为“照片”的 id。构建布局的起点将如下所示。

已编辑：*对不起，我在您用 HTML 更新问题之前写了答案。下面重写了代码以显示原始 html 中的 id。*

HTML 可以是：

```
<div id="user_details"></div>
<div id="user_current"></div>
<div id="user_photos"></div> 
```

基本布局 CSS 将类似于：

```
#user_details {
   float: left;
   width: 50%;
   box-sizing: border-box;
   /* other styling stuff like padding, etc. */
}
#user_current {
   float: right;
   width: 50%;
   box-sizing: border-box;
   /* other styling stuff like padding, etc. */
}
#user_photos {
   clear: both;
} 
```

这不考虑框内的任何内容或框之间的间距，但该`box-sizing`规则将帮助您保持布局并建立边距、填充和边框，而不会破坏它。

# javascript - 通过 Javascript 更改 svg 多边形属性

> ID：15577283
> 
> 赞同：1
> 
> 时间：2013-03-22T18:18:52.030
> 
> 标签：javascript, loops, svg, setattribute

我正在尝试缩放和转换 svg 多边形元素，具体取决于浏览器窗口的大小。计算我想要缩放和平移多少不是问题，但更改多边形对我来说是。

我希望你能帮助...

我已经分解了这个问题，以便计算多边形的数量（这没关系）：

```
function countnumberofPolygons() {
    numberofPolygons = document.getElementsByTagName("polygon").length;
    return numberofPolygons;
} 
```

和一个函数，它创建一个字符串来确定多边形的 transform="" 属性 - 可以说 transform 属性 - transform="translate(800,00) scale(1.2)"

```
function createsvgtransformattribute(){
    transformattribute = '"translate('+ translateAmount +',0) scale(' + scaleAmount + ')"';
} 
```

但是遍历它们并设置它们的属性似乎不起作用。我已经将它全部分解并重新构建了它 - 但最终得到了这个 - 这是错误的，可能以某种简单的方式......

```
function changeattributes(numberofPolygons, transformattribute){
    for (var q=0;q< numberofPolygons;q++){
        document.getElementsByTagname("polygon")[q].setAttribute("transform", transformattribute);
    }
} 
```

但即使手动插入字符串 transformattribute 的值，它也不起作用。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:41:14.350

使用 setAttribute 设置转换属性时，不要将其放在双引号中。所以你需要的是

```
transformattribute = 'translate('+ translateAmount +',0) scale(' + scaleAmount + ')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:27:49.043

在 html 中，我使用文档读取 Jquery 函数和 onresize 来调用 svgscale()。脚本中有一些奇怪的地方——比如左侧轻推——但希望它对其他人有用。

我已将图像标签中的图像转换为将图像作为背景图像的 div。然后将图像映射拉入 svg。然后此脚本使用 svg 的 transform 属性来相应地缩放和平移图像映射的多边形。

```
var winWidth;
var winHeight;

var MainImageHeight;
var MainImageWidth;

var HeightRatio;                
var imageWidth;

var leftoffset;
var ImgVsOriginal;

var offsetnudge;
var offsetnudgescaled;
var los;
var translateAmount;
var scaleAmount;

var numberofNodes;
var numberofPolygons;
var polygonArray;
var transformattribute;

function setVariables(){

                                //Browser window widths and heights
                winWidth = window.innerWidth;
                winHeight = window.innerHeight;

                                                //Widths and heights of the element with the MainImage id
                MainImageHeight =   document.getElementById('MainImage').offsetHeight;
                MainImageWidth =    document.getElementById('MainImage').offsetWidth;

                                                //Establishes the ratio between the height of the element and the background image it displays,
                                                //which has a height of 920px
                                                //The MainImage resizes the background image so the ratio is needed to scale the svg/imagemap
                HeightRatio = MainImageHeight/920;

                                                //This establishes the width of the background image as presented - the background image file is 1400px
                imageWidth = HeightRatio*1400;

                                                //The Background image is centered and covers the screen. So there is space either side of the background image
                                                //This space is worked out here, and halved to work out the left-hand side portion of the space
                leftoffset = (winWidth-imageWidth)/2;

                                                //The original imagemap was created based on an image displayed as 960px by 653px. This calculates the ratio between them.
                ImgVsOriginal = MainImageHeight/653;

                                                //The original image was based on images with a small border each side. This is a hard-adjustment for this.
                offsetnudge = 30;

                                                //Scales the offset for this border based on the background image size vs the original
                offsetnudgescaled = offsetnudge*ImgVsOriginal;

                                                //Creates an easy to type variable based on 
                //los = leftoffset + offsetnudgescaled;
                translateAmount = leftoffset + offsetnudge;
                scaleAmount = ImgVsOriginal;
                                                //Creates variable for idname
                 var idname;      
                }

function createsvgtransformattribute(){
                transformattribute = 'translate('+ translateAmount +',0) scale(' + scaleAmount + ')';
                return transformattribute;
}

function countchildNodes(){
                numberofNodes = document.getElementById("svgstuff").childNodes.length;

                }

function printnumberofnodes(){
                document.write('<span>Number of Nodes:' + numberofNodes + '</span>');
}

function countnumberofPolygons(){
                numberofPolygons = document.getElementsByTagName("polygon").length;
                return numberofPolygons;
                }

function getpolygonArray(){
                polygonArray = document.getElementsByTagName("polygon");
}

function printnumberofPolygons(){
                document.write('<span>Number of Polygons:' + numberofPolygons + '</span>');
}

function changeattributes(){
                document.getElementById('test1').innerHTML='changed';
        for(q=0; q<polygonArray.length; q++){
        //document.getElementsByTagName('polygon')[q].setAttribute("class", "blue");
        document.getElementsByTagName('polygon')[q].setAttribute("transform", transformattribute);
        }
}

function svgscale(){
                setVariables();
                getpolygonArray();
                createsvgtransformattribute(translateAmount, scaleAmount);
                changeattributes();
        } 
```

以下是一些示例多边形：

```
<div id="MainImage">
    <svg onresize="svgscale()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="position:absolute;"
    width="2000" height="2000"
    pointer-events="visible">       
        <a xlink:href="1.htm" xlink:title="1">');   
            <polygon id="p1" class="" points="736,378 680,363 680,233 736,209 736,378" transform="" fill="" >
            </polygon>
        </a>
        <a xlink:href="2.htm" xlink:title="2">
            <polygon id="p2"class="area" points="839,161,742,204,739,513,831,587,839,161" transform="" fill="">

            </polygon>
        </a>
        <a xlink:href="3.htm" xlink:title="3">');   
            <polygon id="p3" class="area" points="521,286,521,296,557,297,555,287,521,286" transform="" fill="" >

            </polygon>
        </a>
        <a xlink:href="4.htm" xlink:title="4">');   
            <polygon id="p4" class="area" points="562,218,562,240,657,242,657,219,562,218" transform="" fill="" >

            </polygon>
        </a>
        <a xlink:href="5.htm" xlink:title="5">');   
            <polygon id="p5" class="area" points="952,273,909,275,905,276,902,347,858,344,846,351,845,356,855,361,845,542,849,546,849,572,846,573,845,575,841,652,954,652,952,273" transform="" fill="" >
            </polygon>
        </a>                    

    </svg>

</div> 
```

我在多边形中放置了一些 id，以防我无法通过 TagName 循环，但它通过通过 tagname 获取多边形并通过 for 循环循环来工作。:-) #MainImage div 的 css 基本上是：

```
#MainImage {background-image: url('pix/file.jpg'); background-size: auto 100%;} 
```

# lambda - 在 Prolog 中用破折号分隔原子名称

> ID：15577286
> 
> 赞同：2
> 
> 时间：2013-03-22T18:18:58.660
> 
> 标签：lambda, prolog

```
functor([a1-b1,a2-b2,a3-b3,a4-b4]). 
```

我需要将 a 和 b 分开并构造新的两个仿函数，例如

```
functora([a1,a2,a3,a4]),
functorb([b1,b2,b3,b4]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:57:01.913

`lambda`使用此处[http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)找到的 SWI-Prolog 和模块，您可以编写：

```
:- use_module(library(lambda)).
separate(In, Out1, Out2) :-
    In =.. [_,L],
    maplist(\X^Y^Z^(X = Y-Z), L, L1, L2),
    Out1 =..[functora, L1],
    Out2 =..[functorb, L2]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:34:54.577

例如，您可以使用`=..`构造和分解仿函数（参见[此处](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.20%27,swi%28%27/doc/Manual/manipterm.html%27%29%29)）。为了分解原子，您可以使用统一：

```
sep_dash([A-B|Rest], [A|As], [B|Bs]) :- sep_dash(Rest,As,Bs).
sep_dash([],[],[]). 
```

虽然我确信有一些更聪明的方法可以做到这一点。通常，[这些](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.21%27,swi%28%27/doc/Manual/manipatom.html%27%29%29)是用于原子操作的 SWI-Prolog 内置插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:06:32.587

library( [pairs](https://www.swi-prolog.org/pldoc/doc/_SWI_/library/pairs.pl) ) 具有您需要的内置功能：

```
?- pairs_keys_values([a1-b1,a2-b2,a3-b3,a4-b4],A,B). 
```

然后您可以重用 A,B 作为新仿函数的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:17:28.817

这可能不是非常有效，但这是一个想法。

```
?- findall(A, member(A-B, [a1-b1,a2-b2,a3-b3,a4-b4]), As).
As = [a1, a2, a3, a4]. 
```

我们可以以此为基础：

```
separate(Functor, Aside, Bside) :-
    Functor =.. [Name, Arg],
    findall(A, member(A-B, Arg), As),
    findall(B, member(A-B, Arg), Bs),
    atom_concat(Name, '_a', AFunctor),
    atom_concat(Name, '_b', BFunctor),
    Aside =.. [AFunctor, As],
    Bside =.. [BFunctor, Bs]. 
```

看起来它有效：

```
?- separate(functor([a1-b1,a2-b2,a3-b3,a4-b4]), A, B).
A = functor_a([a1, a2, a3, a4]),
B = functor_b([b1, b2, b3, b4]). 
```

虽然只在一个方向上起作用。

**编辑**`findall/3`您还可以通过使用上面的@Boris 谓词来避免效率低下：

```
separate(Functor, Aside, Bside) :-
    Functor =.. [Name, Arg],
    atom_concat(Name, '_a', AFunctor),
    atom_concat(Name, '_b', BFunctor),
    sep_dash(Arg, As, Bs),
    Aside =.. [AFunctor, As],
    Bside =.. [BFunctor, Bs]. 
```

# visual-studio - 将调试版本链接到发布库：警告 LNK4204

> ID：15577287
> 
> 赞同：2
> 
> 时间：2013-03-22T18:19:08.733
> 
> 标签：visual-studio, debug-symbols, linker-warning

我正在使用 VC10（但我想这适用于 VC9、VC10 和 VC11）。*简而言之，我想编译一个发布库，发布它并允许用户在对其应用程序进行调试或发布*构建时能够链接到该库。令人讨厌的是，我不断收到 LNK4204 错误，例如：

```
mylib.lib(an_object_in_my_lib.obj) : warning LNK4204: '[PATH TO USER APPLICATION INTERMEDIATE DIRECTORY]\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info 
```

美好的。我明白这是在说什么。我最初的反应是“好吧，关掉它会很简单”。但是我找不到阻止这种情况的方法。让我吃惊的是：

1.  我在库项目设置中找不到任何选项，可以在没有调试信息的情况下进行编译（即使在发布中！）——老天，我可以发誓有办法！
2.  我在用户应用程序项目设置中找不到任何选项来指示链接器我知道没有调试信息，它应该继续执行它所告诉的操作！

有什么好的解决办法吗？据推测，想要链接到没有调试信息的库但为我正在创建的二进制文件生成调试信息的情况并不少见？链接到内核库和 crts 怎么样，肯定会发生这种情况吗？我不敢相信我以前从未发现过这个问题，这似乎很明显（你能说我很生气吗！）。

仅供参考，在人们说之前，我真的不想发布带有调试信息的发布库，因为我想尽量减少逆向工程的风险。我知道有些人会说当用户遇到错误并且您没有 pdb 信息时您会后悔，但是当我说我不在乎时请相信我。

更新：

我相信我已经解决了这个问题，但我不完全确定它为什么会起作用。肯定需要再研究一下。但简而言之，我可以（实际上需要）使用 VC9 构建。请注意，VC9 实际上为“Debug Information Format”提供了一个额外的“Disabled”选项，VC10 中并未出现该选项；这可以解释我的一些困惑。

现在“解决方案”似乎是创建库的调试版本（我很好），但保持调试信息“禁用”。当我这样做时，我没有任何抱怨。这很奇怪，因为在这两种情况下都没有调试信息（将调试链接到发布和调试到调试的情况），但是当链接到调试库时，我没有收到任何警告。到目前为止，这有点神秘。如果我有时间，我会进一步调查。也许我错过了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:05:05.950

防止警告的唯一方法是提供符号信息。如果您很聪明，您可能能够提供足够的符号信息来满足链接器的要求，但不足以提高您想象中的风险，使您的代码更容易进行逆向工程。

# arangodb - 在 Windows 上运行 arangodb (arangod.exe) 1.2.0 的命令行是什么？

> ID：15577289
> 
> 赞同：4
> 
> 时间：2013-03-22T18:19:25.663
> 
> 标签：arangodb

它需要`--server.endpoint`选择，但我给它的任何东西都不起作用。有没有人在 Windows 上运行过这个数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T08:43:58.570

我已经完成了以下操作：在 Windows 8 下将“arango64.msi”下载并安装到目录“c:\Users\fceller\ArangoDB”中。切换到该目录并执行“shellExample.bat”。这将启动服务器，您可以通过“localhost:8529”下的浏览器访问它。

至于 server.endpoint 选项：它要么支持 tcp 要么支持 unix 域套接字（可能不在 Windows 下）。对于 TCP，语法是

tcp://127.0.0.1:8529

# java - 使用网络处理控制 arduino (javascript)

> ID：15577290
> 
> 赞同：3
> 
> 时间：2013-03-22T18:19:27.127
> 
> 标签：java, web, arduino, processing

我正在尝试通过使用串行端口（串行 = USB。我不想使用以太网屏蔽，因为我正在将 USB 连接到 XBEE 设备）通过网络控制和接收来自我的 arduino 的数据。

经过研究，我似乎认为最好的方法是 javascript（PHP 似乎在从 arduino 串行读取数据方面存在问题）。

目前我正在尝试使用 Processing 与 arduino 交互。

我从一个简单的脚本开始，从 arduino 读取传感器数据，从处理 (Java) 运行时效果很好。当我尝试通过 Web 浏览器导出以查看时（通过在处理中使用 javascript），我在浏览器中看到除了传感器数据本身之外的所有内容。

我的理解（更像是猜测）是，由于某种原因，从 Web 浏览器调用时 COM 端口不会打开（可能是安全问题？）。在 PC (WIN7) 和 MAC (OSX) 上都会发生相同的现象。

帮助将不胜感激！

这是代码：（已删除评论）

```
import processing.serial.*;
Serial myPort;      
int xPos = 1;      

void setup () {

size(400, 300);        

println(Serial.list());

myPort = new Serial(this, Serial.list()[0], 9600);

myPort.bufferUntil('\n');

background(0);
}
void draw () {

}

void serialEvent (Serial myPort) {

String inString = myPort.readStringUntil('\n');

if (inString != null) {

inString = trim(inString);

float inByte = float(inString);
inByte = map(inByte, 0, 1023, 0, height);

stroke(127,34,255);
line(xPos, height, xPos, height - inByte);

if (xPos >= width) {
xPos = 0;
background(0);
}
else {

xPos++;
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:18:59.363

您是否考虑过使用[ser2net](http://sourceforge.net/projects/ser2net/)或[Windows Serial Proxy](http://wiki.micasaverde.com/index.php/Windows_Serial_Proxy)之类的东西？在机器上运行它以将串行端口代理到 TCP 端口，然后在 Javascript 中，使用 WebSockets 与之对话。

某种服务器层可能是最好的解决方案，但如果你打算在 JS 中完成这一切，我认为这是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:06:26.400

正如 Drew R 指出的那样，您可以创建一个快速的“服务器”应用程序，该应用程序通过串行读取 Arduino 数据，然后通过 HTTP 将其广播到您需要的内容。

我建议还看看[cosm](https://cosm.com/)，它可能会为你做一些工作，并为你构建的 Arduino 设备提供一个很好的 js API。也看看他们的[例子](http://cosm.github.com/cosm-js/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:38:20.393

这可能会回避问题，但听起来您需要在设备和 HTTP 服务之间实现一层分离。

您可以使用 node.js 或位于 PC 上并仲裁数据请求的东西编写基本的 HTTP 服务，这样请求就不会从浏览器直接发送到设备。

如果这确实是您正在尝试的，浏览器将严格控制客户端 JS 对硬件接口的访问是有道理的。

# c# - 递归复制所有文件和目录

> ID：15577291
> 
> 赞同：-3
> 
> 时间：2013-03-22T18:19:34.460
> 
> 标签：c#, recursion

我想找到每个扩展名为 .zzz 的文件，然后将该文件的父文件夹（及其所有内容）复制到目标目录。下面的代码有效，但它只复制第一级子目录。

```
 private void btn_submit_Click(object sender, EventArgs e)
    {
        string srcFolder = txt_src.Text;
        string destFolder = txt_dest.Text;
        foreach (string zzz in Directory.GetFiles(srcFolder, "*.zzz", SearchOption.AllDirectories))
        {
            string modulePath = Directory.GetParent(zzz).FullName;
            string moduleName = Directory.GetParent(zzz).Name;
            Directory.CreateDirectory(destFolder + "\\" + moduleName);
            foreach (string subFolders in Directory.GetDirectories(modulePath, "*", SearchOption.AllDirectories))
            {
                Directory.CreateDirectory(subFolders.Replace(modulePath, destFolder + "\\" + moduleName));
            }
            foreach (string allFiles in Directory.GetFiles(modulePath, "*.*", SearchOption.AllDirectories))
            {
                File.Copy(allFiles, allFiles.Replace(modulePath, destFolder + "\\" + moduleName), true);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:29:01.323

你可以只是递归的。我只是把这些放在一起——我可能没有完美地分析你的变量，但它会给你一个想法。

```
 private void btn_submit_Click(object sender, EventArgs e)
{
    copy_stuff(txt_src.Text, txt_dest.Text);
}

private void copy_stuff(string srcFolder, string destFolder)
{
    foreach (string zzz in Directory.GetFiles(srcFolder, "*.zzz", SearchOption.AllDirectories))
    {
        string modulePath = Directory.GetParent(zzz).FullName;
        string moduleName = Directory.GetParent(zzz).Name;
        Directory.CreateDirectory(destFolder + "\\" + moduleName);
        foreach (string subFolders in Directory.GetDirectories(modulePath, "*", SearchOption.AllDirectories))
        {
            string dest = subFolders.Replace(modulePath, destFolder + "\\" + moduleName);
            Directory.CreateDirectory(dest);
            copy_stuff(subfolders, dest);
        }
        foreach (string allFiles in Directory.GetFiles(modulePath, "*.*", SearchOption.AllDirectories))
        {
            File.Copy(allFiles, allFiles.Replace(modulePath, destFolder + "\\" + moduleName), true);
        }
    }
} 
```

# jquery - 让 jQuery 重新解析 DOM 以将动态内容公开给旧版 IE 的 Sizzle 选择器引擎

> ID：15577297
> 
> 赞同：1
> 
> 时间：2013-03-22T18:19:54.460
> 
> 标签：jquery, internet-explorer, dom, selector, sizzle

我正在处理一个大而笨重的文档，其中包含大量从 jQuery 以外的各种来源动态生成的内容。问题是 IE6 和 7 中的 jQuery 选择器没有选择其中的一些内容。

我知道[Sizzle 使用了一些令人讨厌但必要的邪恶](https://stackoverflow.com/questions/3782709/what-purpose-do-sizcache-and-sizset-serve-in-jquery)来使遗留 IE 的 DOM 可遍历。问题是，这些辅助属性是如何以及何时初始化的，如何强制它重新解析新的 DOM 以将其公开给 jQuery？

# java - 测试减号后的字符是否为数字

> ID：15577298
> 
> 赞同：-1
> 
> 时间：2013-03-22T18:20:10.807
> 
> 标签：java

我有这个字符串`9 $ -2 -`。我想测试下一个`-`是否是数字。

```
if (ch == '-') {
    if (ch != input.length() - 1) {
        char next = input.charAt(j + 1);
        if ((next >= '0' && next <= '9') || next == '.')
            temp = temp + ch;
    }
} 
```

`-`如果可能在字符串的最后一个，我找不到该怎么做

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 8
    at java.lang.String.charAt(String.java:658)
    at ParsePost.doParse(ParsePost.java:24)
    at InfixApp.main(InfixApp.java:20) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:23:03.470

什么`ch`- 输入字符串中的字符或字符的索引（位置）？第一行假设前者，第二行假设后者。也许你想要`if (j != input.length() - 1)`。

# linux - 通过代理在 Linux 中通过 SSH 客户端连接到主机

> ID：15577300
> 
> 赞同：9
> 
> 时间：2013-03-22T18:20:27.443
> 
> 标签：linux, ssh, proxy, ubuntu-12.10

我真的很挣扎。

> 我的主机 (A) 在代理/防火墙 (PF) 后面，需要连接到主机 H。

代理配置了 HTTP/FTP/SOCK 代理，我在 Web 浏览器、wget 等中配置没有问题。

但是当我使用...

```
ssh H //to connect my host 
```

我没有成功通过代理。它似乎试图直接连接而不是通过PF。

我正在使用 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:48:06.403

检查 ssh`ProxyCommand`选项的文档。您可以指定要运行的命令（例如 nc）以连接到给定的主机和端口。例如，将其添加到您的 .ssh/config 可能有助于遍历 SOCKS5 代理：

```
ProxyCommand nc -x MY_PROXY_HOST:MY_PROXY_PORT %h %p 
```

更详细的说明将取决于您的环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T18:56:55.063

有几种方法可以做到这一点。您可以使用 nc 或尝试像开瓶器这样的包装器。我将用 wrapeer 描述方式：

首先通过 apt-get 安装
corkscrew 然后您需要在**./ssh/config**文件中指定 ProxyCommand （将 example-proxy.com 和 8080 替换为您的代理主机和端口）：

```
Host *
  ProxyCommand corkscrew example-proxy.com 8080 %h %p ~/.ssh/proxyauth 
```

您的登录凭据应采用 ~/.ssh/proxyauth 格式：

```
login:password 
```

# netbeans - NetBeans 7.3 关闭 Twig 文件中的错误检查

> ID：15577302
> 
> 赞同：0
> 
> 时间：2013-03-22T18:20:30.433
> 
> 标签：netbeans, twig

如何在 NetBeans 7.3 中禁用 Twig 文件中的错误检查？

我有一个 Twig 页面，页面上有下划线 JavaScript 模板，因此整个页面都是红色的，并且随着 NetBeans 不断尝试检查错误，导航速度很慢。它们几乎都是“期望一个操作数但发现 <”。

我已经在这里搜索了其他主题，但它们都不起作用。在 NetBeans 中找不到 Twig 文件的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:10:50.360

我不特别了解 twig 插件，但总的来说这是不可能的。但是，您可以更改 twig 文件的错误颜色的颜色以匹配背景颜色。这样您就不会看到突出显示的错误。

更改下图中的**效果颜色**以匹配**背景**

![在此处输入图像描述](../Images/675c392ccdfd85e96543fd3297089803.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:20:50.373

我不确定这是否适合您（我使用 C/C++），但我发现在首选项/选项窗口 -> 编辑器选项卡 -> 突出显示中，您可以取消选中“突出显示语法错误”等。刚刚保存我的理智。

# c# - 如何从 C# 中的存储过程中获取选定的值？

> ID：15577306
> 
> 赞同：2
> 
> 时间：2013-03-22T18:20:51.540
> 
> 标签：c#, sql-server, stored-procedures

查看存储过程时，逻辑似乎是“做事”，然后是`select 1 as add_success`. 如何`add_success`在 C# 中检查该值？

### 代码

```
using (SqlConnection connection = new SqlConnection(_connectionString)) {
  using (SqlCommand command = new SqlCommand("<sprocname>", connection)) {
    command.CommandType = CommandType.StoredProcedure;
    command.Parameters.Add(<a parameter>); // x10 or so
    connection.Open();
    var result = command.ExecuteNonQuery();
    // result is always -1, despite the sproc doing everything it is supposed to do (modify a few different tables) 
```

### 存储过程

```
// Do some stuff including inserts on a few different tables, then
INSERT INTO Table (field1, field2)
VALUES (@Val1, @Val2)

SELECT 1 AS add_success 
```

它似乎做的一切都是正确的，但默认的返回`ExecuteNonQuery`是受影响的行，`-1`即使所有的操作似乎都成功完成了。

我还尝试添加一个带有名为的返回值的参数，`add_success`但这`@add_success`似乎也不起作用。

如何将值从存储过程返回到 C#？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T18:23:13.013

1.  你需要使用`command.ExecuteScalar()`.
2.  结果将是结果集中第一个表的第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:24:03.893

尝试该`SqlCommand.ExecuteScalar()`方法而不是`ExecuteNonQuery()`（[source](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)）。

# java - 如何扩展 SQLiteDatabase 类？

> ID：15577307
> 
> 赞同：4
> 
> 时间：2013-03-22T18:21:01.730
> 
> 标签：java, android, sqlite

我想扩展 SQLiteDataBase 类，以便能够覆盖一些方法（如 rawQuery、execSQL 等），目的是对查询执行时间进行一些统计。

我在数百个地方调用这些函数。因此，从基类 SQLiteDatabase 创建派生类将对我有很大帮助！

问题是：在扩展 SQLiteDataBase 时，它​​无法从超类中找到任何构造函数。

```
import android.database.sqlite.SQLiteDatabase;

public class MySQLiteDatabase extends SQLiteDatabase
{

    MySQLiteDatabase()
    {
        super(); // <<<--- can't find any visible constructor
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T18:35:07.453

> 有数百个地方我称之为这些函数。因此，从基类 SQLiteDatabase 创建派生类将对我有很大帮助！

您不能`SQLiteDatabase`像声明的那样扩展它，也不能在 java 中`final`扩展一个类。`final`

另一种方法是制作一个“包装器” `SQLiteDatabase`，它将复制`SQLiteDatabase`类及其方法并将测量逻辑插入包装器方法中：

```
public class SQLiteDatabaseWrapper {

    private SQLiteDatabase mDatabase;

    public void initDatabase() {
      //obtain the database here and assign it to mDatabase 
    }

    // replicate the SQLiteDatabase methods 
    public void execSQL(String sql) {
       //insert whatever logic you have for measurement
       // do the measurement
       mDatabase.execSQL(sql); 
    }
    // other methods from SQLiteDatabase 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:28:25.537

由于您导入 sqliteDatabase 类，因此您实际上不需要扩展它已经可供您使用。
简单定义：

```
Sqlitedatabase dbname;
dbname.execSQL(Query); 
```

或者：

```
public class MySQLiteHelper extends SQLiteOpenHelper {

  public static final String TABLE_COMMENTS = "comments";
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_COMMENT = "comment";

  private static final String DATABASE_NAME = "commments.db";
  private static final int DATABASE_VERSION = 1;

  // Database creation sql statement
  private static final String DATABASE_CREATE = "create table "
      + TABLE_COMMENTS + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_COMMENT
      + " text not null);";

  public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
    onCreate(db);
  }
} 
```

# tsql - 从 UNION 子查询中获得前 1

> ID：15577315
> 
> 赞同：1
> 
> 时间：2013-03-22T18:21:31.813
> 
> 标签：tsql

我想确定哪些表中包含最早的记录。为此，我想我可以说：

```
SELECT TOP 1 TableName FROM
( 
  SELECT CreateDate, 'Table1' as TableName FROM Table1 
  UNION
  SELECT CreateDate, 'Table2' as TableName FROM Table2
)
ORDER BY CreateDate 
```

在 SQL Server 2008R2 中，它告诉我“ORDER”附近存在语法错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:22:16.060

你需要给你的子查询一个别名：

```
SELECT TOP 1 TableName FROM
( 
  SELECT CreateDate, 'Table1' as TableName FROM Table1 
  UNION
  SELECT CreateDate, 'Table2' as TableName FROM Table2
) q
ORDER BY CreateDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:22:12.733

您还没有在子查询上定义别名，

```
SELECT TOP 1 TableName 
FROM
     ( 
         SELECT CreateDate, 'Table1' as TableName FROM Table1 
         UNION
         SELECT CreateDate, 'Table2' as TableName FROM Table2
     ) aliasName     -- <<== ADD HERE
ORDER BY CreateDate 
```

`ALIAS`为了识别子查询是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:23:37.780

```
SELECT TOP 1 TableName FROM
( 
  SELECT CreateDate, 'Table1' as TableName FROM Table1 
  UNION
  SELECT CreateDate, 'Table2' as TableName FROM Table2
) RandomName
ORDER BY CreateDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:30:16.167

所有其他人（到目前为止）都有正确的答案（您需要派生表的别名），但我也建议不要对所有 CreateDate 和 TableName 值进行 UNIONing 和排序，而是从每个表中获得最小的 CreateDate ，并在不需要消除重复时养成使用UNION ALL的习惯。所以，像这样：

```
SELECT TOP 1 TableName FROM
( 
  SELECT MIN(CreateDate) AS CreateDate, 'Table1' as TableName FROM Table1 
  UNION ALL
  SELECT MIN(CreateDate) AS CreateDate, 'Table2' as TableName FROM Table2
) x
ORDER BY CreateDate ASC 
```

# android - Leadbolt 插页式广告不显示

> ID：15577316
> 
> 赞同：2
> 
> 时间：2013-03-22T18:21:35.227
> 
> 标签：android, leadbolt

我正在尝试在我的应用游戏中使用 LeadBolt 放置一些插页式广告，但没有成功。当一轮结束时，我希望它显示插页式（如果有错误不要等待太多），等待它被用户关闭，然后继续显示结果。这是我的源代码，被无用的代码所破坏：

```
private void endGame () {
                    // I always arrive here
        loadNewAd(this, new Runnable() {
            @Override public void run() {
                showResult();
            } });
}

private void loadNewAd(final Activity act, final Runnable continuation) {
    if (cAd == null)
        cAd = new AdController(act, C.LB_SECTION_ID_INTERSTITIAL, new AdListener() { 
              public void onAdLoaded() { } 
              public void onAdClicked() { continuation.run(); } 
              public void onAdClosed() { continuation.run(); }
              public void onAdCompleted() { continuation.run(); }
              public void onAdFailed() { continuation.run(); }
              public void onAdProgress() { } 
              public void onAdAlreadyCompleted() { continuation.run(); }
              public void onAdHidden() {} // function is deprecated 
              public void onAdPaused() { continuation.run(); }
              public void onAdResumed() { } 
            });
        cAd.loadAd();
} 
```

我无法理解这段代码是否只工作了几次，或者在我不理解的某些特定条件下，无论如何只显示了几次广告，而在其余时间它永远不会到达 continuation.run()。

我也不明白何时调用 destroyAd()：我应该在每次关闭单个广告时调用它，还是在应用程序生命周期结束时调用它？

有人能帮助我吗？

谢谢你。

# iphone - iOS 崩溃：无法访问内存位置

> ID：15577317
> 
> 赞同：0
> 
> 时间：2013-03-22T18:21:36.313
> 
> 标签：iphone, crash, uikit

我在我的崩溃报告中看到了很多这样的崩溃，但我不知道是什么原因造成的。

我无法让它在本地复制。

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x70000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x3ba9f5b0 _objc_msgSend + 16
1   UIKit                               0x35a73313 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1311
2   UIKit                               0x35a8a7cf -[UITableView layoutSubviews] + 207
3   UIKit                               0x35a46803 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 259
4   QuartzCore                          0x357f0d8b -[CALayer layoutSublayers] + 215
5   QuartzCore                          0x357f0929 CA::Layer::layout_if_needed(CA::Transaction*) + 461
6   QuartzCore                          0x357f185d CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 17
7   QuartzCore                          0x357f1243 CA::Context::commit_transaction(CA::Transaction*) + 239
8   QuartzCore                          0x357f1051 CA::Transaction::commit() + 317
9   QuartzCore                          0x357f0eb1 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 61
10  CoreFoundation                      0x33c106cd __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 21
11  CoreFoundation                      0x33c0e9c1 __CFRunLoopDoObservers + 277
12  CoreFoundation                      0x33c0ed17 __CFRunLoopRun + 743
13  CoreFoundation                      0x33b81ebd _CFRunLoopRunSpecific + 357
14  CoreFoundation                      0x33b81d49 _CFRunLoopRunInMode + 105
15  GraphicsServices                    0x377362eb _GSEventRunModal + 75
16  UIKit                               0x35a97301 _UIApplicationMain + 1121
17  Our App Name                        0x00011d83 main (main.m:21) 
```

*   崩溃报告已被象征性地
*   我知道这是 UITableView 试图更新。
*   我知道这是表视图试图访问它不允许访问的内存。
*   我不知道它是什么表视图。它可以是应用程序中的任何一个。

如果您对更多调试信息有想法，那就太好了。

* * *

编辑：

这发生在生产应用程序中。我**不能**让它在调试模式下在本地重现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:28:24.570

转到 Edit Scheme > Run > Diagnostics > Enable Guard Malloc & Enable Zombie Objects

![在此处输入图像描述](../Images/9023498ac71ed9c43f4c505d0d049e5b.png)

这应该会为您提供有关下一次崩溃的更多信息！我有类似的经历，我正在使用的库在它使用的缓冲区之外进行了一些编辑。它很少坠毁，但 Guard Malloc 立即发现了它。即使崩溃只发生在 AD Hoc 发行版中，而从未发生在调试器中。如果在发送消息之前内存被释放，NSZombies 将提供帮助。但是，NSZombies 只会在它崩溃时才有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:34:40.023

结果发现动画中存在一个错误，当包含的表格视图滚动时，重复的动画没有被正确取消。自从该修复程序发布以来，还没有在崩溃报告中看到这一点。

# css - 媒体查询无法加载正确的 CSS

> ID：15577318
> 
> 赞同：0
> 
> 时间：2013-03-22T18:21:38.497
> 
> 标签：css, twitter-bootstrap, responsive-design

我刚刚阅读了文章[http://alistapart.com/article/responsive-web-design](http://alistapart.com/article/responsive-web-design) 并试图测试一些想法。我想根据浏览我网站的设备的大小加载不同的 css 文件。

我有以下代码：

```
 <link href="<?php echo base_url()?>assets/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 480px)" href="<?php echo base_url()?>assets/css/rh-mobile.css" />
    <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 1280px)" href="<?php echo base_url()?>assets/css/rh.css" /> 
```

在 rh 和 rh-mobile css 文件中，我有以下类：

```
.hero-unit {
  background: url("../img/ipod5.jpg");
  height: 4em;
  width: 15em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
} 
```

两者之间唯一不同的是正在加载的图像。移动 css 加载一个名为 ipod5.jpg 的文件，而桌面版加载另一个文件。

在 Firefox 中测试我的网站时，我注意到两个 CSS 都没有被加载。唯一正在加载的是 bootstrap.css

你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:39:44.820

如果您使用的是引导程序，为什么不使用响应式引导程序？顺便说一句，基本网址应该这样写`<?php echo base_url("assets/css/bootstrap.css")?>`

# html - 画布线与鼠标位置有偏移

> ID：15577322
> 
> 赞同：0
> 
> 时间：2013-03-22T18:21:49.390
> 
> 标签：html, canvas, offset

在 Firefox 中查看这个画布示例，笔画与鼠标位置有偏移？在铬它工作。我该如何解决？

这里有一个 js 小提琴：http: [//jsfiddle.net/wongwong/CvhMM/2/](http://jsfiddle.net/wongwong/CvhMM/2/)

```
 var canvas, context;

// Initialization sequence.
function init () {
// Find the canvas element.
canvas = document.getElementById('imageView');

// Get the 2D canvas context.
context = canvas.getContext('2d');

// Attach the mousemove event handler.
canvas.addEventListener('mousemove', ev_mousemove, false); 
}

// The mousemove event handler.
var started = false;
function ev_mousemove (ev) {
var x, y;

// Get the mouse position relative to the canvas element.
if (ev.layerX || ev.layerX == 0) { // Firefox
  x = ev.layerX;
  y = ev.layerY;
  console.log(ev.layerX);
} else if (ev.offsetX || ev.offsetX == 0) { // Opera
  x = ev.offsetX;
  y = ev.offsetY;
}

// The event handler works like a drawing pencil which tracks the mouse 
// movements. We start drawing a path made up of lines.
if (!started) {
  context.beginPath();
  context.moveTo(x, y);
  started = true;
} else {
  context.lineTo(x, y);
  context.stroke();
}
}

init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:40:29.540

您只需要考虑画布元素的偏移量

```
 // Get the mouse position relative to the canvas element.
    if (ev.layerX || ev.layerX == 0) { // Firefox
     // added -this.offsetLeft, and -this.offsetTop
      x = ev.layerX - this.offsetLeft;
      y = ev.layerY - this.offsetTop;

      console.log(ev.layerX);
    } else if (ev.offsetX || ev.offsetX == 0) { // Opera
      x = ev.offsetX;
      y = ev.offsetY;
    } 
```

**[现场演示](http://jsfiddle.net/loktar/CvhMM/3/)**

# php - 带有php的多组复选框

> ID：15577324
> 
> 赞同：0
> 
> 时间：2013-03-22T18:21:54.067
> 
> 标签：php, html

嗨，我想在 php 中使用多组复选框，并且我想检查或不检查每个数组中的所有值。我的问题是数组只包含检查值。

这是我的代码：-

```
 if($_POST['send']){
            $co = count($_POST['recomID']);
               for($i=0; $i<= $co -1 ;$i++) {
 $result = mysql_query("UPDATE `recom` SET
 `crit1` = '".$_POST['ch1'][$i] ."',
 `crit2` = '".$_POST['ch2'][$i]."',
 `crit3` = '".$_POST['ch3'][$i]."',
 `crit4` = '".$_POST['ch4'][$i]."', WHERE `id` = '".$_POST['recomID'][$i]."'");
               }
       }

 while($recomObject = mysql_fetch_object($recomResult)){

    echo '   
    <tr>
    <td>'.$recomObject->op.'</td>
    <td align="center"><input type="checkbox" value="1" name="ch1[]" /></td>
    <td align="center"><input type="checkbox" value="1" name="ch2[]" /></td>
    <td align="center"><input type="checkbox" value="1" name="ch3[]" /></td>
    <td align="center"><input type="checkbox" value="1" name="ch4[]" /></td>
    <td><input type="hidden" name="recomID[]" value="'.$recomObject->id.'"/>
    </td>
    </tr>';} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:28:53.213

我以前遇到过这种情况，我通过`checkbox`在同名之前放置一个隐藏的输入来解决。如果`checkbox`选中，则该值将覆盖隐藏。这应该适合你。

第二个`input`总是覆盖第一个。在这种情况下，如果未选中`checkboxes`则不要`POST`，这意味着隐藏输入`POST`的值为 0

PHP：

```
<?php 

if (isset($_POST['ch1'])) {
    echo '<pre>', print_r($_POST['ch1'], true), '</pre>';
    echo '<pre>', print_r($_POST['ch2'], true), '</pre>';
    echo '<pre>', print_r($_POST['ch3'], true), '</pre>';
    echo '<pre>', print_r($_POST['ch4'], true), '</pre>';
}

?> 
```

HTML：

```
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <!-- Row 1 Checkboxes -->
    <input type="hidden" value="0" name="ch1[0]" />
    <input type="checkbox" value="1" name="ch1[0]" />
    <input type="hidden" value="0" name="ch2[0]" />
    <input type="checkbox" value="1" name="ch2[0]" />
    <input type="hidden" value="0" name="ch3[0]" />
    <input type="checkbox" value="1" name="ch3[0]" />
    <input type="hidden" value="0" name="ch4[0]" />
    <input type="checkbox" value="1" name="ch4[0]" />

    <br />

    <!-- Row 2 Checkboxes -->
    <input type="hidden" value="0" name="ch1[1]" />
    <input type="checkbox" value="1" name="ch1[1]" />
    <input type="hidden" value="0" name="ch2[1]" />
    <input type="checkbox" value="1" name="ch2[1]" />
    <input type="hidden" value="0" name="ch3[1]" />
    <input type="checkbox" value="1" name="ch3[1]" />
    <input type="hidden" value="0" name="ch4[1]" />
    <input type="checkbox" value="1" name="ch4[1]" />

    <!-- And so forth... -->

    <input type="submit">
</form> 
```

* * *

```
[x] [ ] [x] [ ]
[ ] [x] [ ] [x]  [ SUBMIT ] 
```

输出：

```
Array
(
    [0] => 1
    [1] => 0
)
Array
(
    [0] => 0
    [1] => 1
)
Array
(
    [0] => 1
    [1] => 0
)
Array
(
    [0] => 0
    [1] => 1
) 
```

**编辑**

```
$i = 0;
while($recomObject = mysql_fetch_object($recomResult)){
    echo '   
        <tr>
        <td>'.$recomObject->op.'</td>
        <input type="hidden" value="0" name="ch1['.$i.']" />
        <input type="hidden" value="0" name="ch2['.$i.']" />
        <input type="hidden" value="0" name="ch3['.$i.']" />
        <input type="hidden" value="0" name="ch4['.$i.']" />
        <td align="center"><input type="checkbox" value="1" name="ch1['.$i.']" /></td>
        <td align="center"><input type="checkbox" value="1" name="ch2['.$i.']" /></td>
        <td align="center"><input type="checkbox" value="1" name="ch3['.$i.']" /></td>
        <td align="center"><input type="checkbox" value="1" name="ch4['.$i.']" /></td>
        <td><input type="hidden" name="recomID[]" value="'.$recomObject->id.'"/>
        </td>
        </tr>';
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:23:41.807

您需要为每个复选框使用**相同的名称，但值不同：**

```
<td align="center"><input type="checkbox" value="0" name="ch[]" /></td>
<td align="center"><input type="checkbox" value="1" name="ch[]" /></td>
<td align="center"><input type="checkbox" value="2" name="ch[]" /></td>
<td align="center"><input type="checkbox" value="3" name="ch[]" /></td> 
```

现在，要获得一个数组，其中每个选中的框都是 1，每个未选中的框都是 0，提交后...

```
if (isset($_POST['ch'])) { // assuming form method = post

    $max = 3 // set number of checkboxes -1

    for ($i = 0;$i <= $max;$i++)

    $ch[$i] = intval(in_array($i,$_POST['ch']));

} else $ch = array(); 
```

编辑：要为每个复选框获取 0 或 1，请执行...

```
<td align="center"><input type="checkbox" value="1" name="ch1" /></td>
<td align="center"><input type="checkbox" value="1" name="ch2" /></td>
<td align="center"><input type="checkbox" value="1" name="ch3" /></td>
<td align="center"><input type="checkbox" value="1" name="ch4" /></td> 
```

然后提交后...

```
if (isset($_POST['ch1'])) $ch1=0; else ch1=1;
... 
```

如果您有大量复选框，您将`$_POST`使用`foreach`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:01:09.030

此方法将为您提供选中/未选中状态以及 4 个数组

形式：

```
html>
<form method="post">
    <input type="hidden" name="ch1[]" value="0">
    <input type="checkbox" name="ch1[]" value="1">
    <input type="hidden" name="ch2[]" value="0">
    <input type="checkbox" name="ch2[]" value="1">
    <input type="hidden" name="ch3[]" value="0">
    <input type="checkbox" name="ch3[]" value="1">
    <input type="hidden" name="ch4[]" value="0">
    <input type="checkbox" name="ch4[]" value="1">
    <input type="submit">
</form> 
```

以下将在提交时给出 2 个数组之一（对于每个 chX）

未选中：

```
array([0] => "0") 
```

检查：

```
array([0] => "1", [1] => "0") 
```

因此，您将始终在`[0]`索引中拥有一个值。示例 PHP：

```
if(isset($_POST['ch1'][0])){ //do check anyway
  echo $_POST['ch1'][0];
} 
```

# extjs - localStorage 只在刷新页面后设置

> ID：15577325
> 
> 赞同：0
> 
> 时间：2013-03-22T18:21:56.100
> 
> 标签：extjs

我正在尝试自动登录到应用程序。所以我在登录控制器中设置了一些 localStorage 项目。

```
localStorage.setItem("session", me.sessionToken);
localStorage.setItem("loggedin", true); 
```

我的 app.js 看起来像这样

```
launch: function() {
        if(!localStorage.getItem("loggedin")){
        Ext.Viewport.add([
            { xtype: 'loginview' },
            { xtype: 'main' }
         ]);
        } else {
            Ext.Viewport.add([
            { xtype: 'main' },
            { xtype: 'loginview' }
         ]);
        }   
} 
```

这工作正常。但是我第一次登录后第一次显示 loginview 视图时，没有设置 localStorage。它说我的会话为空，我的登录为空。我必须刷新页面，然后一切就绪，我可以看到我的 localStorage 的值。

有谁知道如何修理它？

# javascript - 如何在Javascript中动态删除字符串中的多余空格？

> ID：15577335
> 
> 赞同：2
> 
> 时间：2013-03-22T18:22:39.907
> 
> 标签：javascript, string

如何在 Javascript 中删除字符串中的多余空格？

例如

我有一个字符串下面的字符串

```
var string ="how    are you today"; 
```

我想知道我可以使用什么函数或技巧来动态删除 Javascript 中字符串中的额外空间，以便我可以使用`var string ="how are you today";`..

我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:25:13.587

假设你有 `var myString ="how are you today";`

如果您只想处理空格：

`myString.replace(/ +/g, ' ');`

如果您还想替换制表符和新行：

`myString.replace(/\s+/g, ' ');`

请注意，这不会更改 myString 的值，而是返回一个删除了空格的新字符串。因此，要保存此结果，您将执行以下操作，例如：

`var fixedString = myString.replace(/ +/g, ' ');`

# php - 类的动态加载无法解决命名空间/使用

> ID：15577336
> 
> 赞同：15
> 
> 时间：2013-03-22T18:22:46.277
> 
> 标签：php, namespaces

我注意到，当我使用命名空间时，动态加载类与静态加载类的工作方式不同。因此，例如，在不使用命名空间的情况下，以下在实例化名为 的类的操作中是等效的`FooBar`：

```
$foobar = new FooBar(); 
```

和

```
$classname = "FooBar";
$foobar = new $classname; 
```

但是，如果在使用命名空间时我有一些这样的代码：

```
<?php

namespace Structure\Library;

$foobar = new UserService();
$classname = "UserService";
$barfoo = new $classname; 
```

在这种情况下，`UserService`类的完全限定名称是`Structure\Library\UserService`，如果我使用完全限定名称，它在这两种情况下都有效，但如果我只使用它的快捷方式名称，`'UserService'`它*仅*在使用静态方法实例化时才有效。有没有办法让它对两者都有效？

PS我正在为所有类使用自动加载器......但我假设问题发生*在*自动加载器之前并且正在影响传递给自动加载器的类字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-02T17:12:46.373

我认为这是一个阅读文档的案例。参见示例 3：

[http://php.net/manual/en/language.namespaces.importing.php](http://php.net/manual/en/language.namespaces.importing.php)

似乎证实了我之前的评论。

```
<?php
    namespace foo\bar;

    $classStr = "myClass";    
    $nsClass = "\\foo\\bar\\myClass";

    $x = new myClass;    // instantiates foo\bar\myClass, because of declared namespace at top of file
    $y = new $classStr;  // instantiates \myClass, ignoring declared namespace at top of file
    $z = new $nsClass    // instantiates foo\bar\myClass, because it's an absolute reference!
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T18:32:28.800

这将是我能找到的最接近的解决方案：

```
define('__NSNAME__', __NAMESPACE__.'\\');

$foobar = new UserService();
$classname = __NSNAME__."UserService";
$barfoo = new $classname; 
```

祝你好运！

**更新 1**

这可能有助于进一步阅读：[http ://www.php.net/manual/en/language.namespaces.importing.php](http://www.php.net/manual/en/language.namespaces.importing.php)

```
use My\Full\UserService as UserService; 
```

**更新 2**

这是我现在走了多远：

```
namespace Structure\Library\Home;

class UserService {

}

namespace Structure\Library;

use Structure\Library\Home\UserService as UserService;

define('UserService', __NAMESPACE__.'\\Home\\UserService', TRUE);

$foobar = new UserService();
$classname = UserService;
$barfoo = new $classname; 
```

或者这个变体以获得更大的灵活性：

```
define('Home', __NAMESPACE__.'\\Home\\', TRUE);

$foobar = new UserService();
$classname = Home.'UserService';
$barfoo = new $classname; 
```

**文档**

*   [http://www.php.net/manual/en/language.namespaces.importing.php](http://www.php.net/manual/en/language.namespaces.importing.php)
*   [http://www.php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.globalclass](http://www.php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.globalclass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T22:25:03.420

以下动态将**$barfoo**实例化为**Structure\Library\UserService**对象：

```
namespace Structure\Library;

$classname = __NAMESPACE__ . "\\" . "UserService";
$barfoo = new $classname; 
```

# geolocation - foursquare venu api有变化吗？无法查询特定商店

> ID：15577355
> 
> 赞同：0
> 
> 时间：2013-03-22T18:23:53.207
> 
> 标签：geolocation, location, foursquare, google-places-api

我一直在像这样从 Foursquare 场地 api 查询特定商店：

```
 String stores = "";
    try {
        stores = URLEncoder.encode("ULTA Nordstrom Target Costco", "utf8");
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    String placeEndPoint = "https://api.foursquare.com/v2/venues/search?ll=33.859868,-117.886133&query="+stores+"&intent=browse&radius=16093&client_id=clientid&client_secret=secret&v=20130322"; 
```

在过去 6 个月中，点击此端点已返回上述商店的列表。然而，这现在返回空。如果我只输入 1 个商店，我会收到返回结果，但是当我有几个类似上面的商店时，什么都没有返回？

使用foursquare api有什么变化吗？这是搜索多个特定商店的正确方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:11:51.260

不确定最近是否有任何变化，但您应该使用[多](https://developer.foursquare.com/docs/multi/multi)请求，而不是在一个请求中进行多个查询。

这背后的原因：这些在逻辑上应该是多个请求。您不一定会对“ULTA Nordstrom Target Costco”（例如，在 Google 上）进行一次搜索，并期望将每个关键字的不相交结果组合到您返回的一个结果集中。您会期望与您提到的*所有*关键字相关的结果。在搜索场地时，这严重限制了结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:39:34.580

Octopi 有一个很好的建议，是我要去的路线，但它没有回答这个问题。

我相信答案是肯定的，foursquare api 确实发生了变化。

# ios - iOS 6 模拟器的替代下载？

> ID：15577361
> 
> 赞同：1
> 
> 时间：2013-03-22T18:24:15.893
> 
> 标签：ios, ios-simulator

我刚刚从 App Store 安装了 Xcode 4.6.1。但是，当我尝试下载任何 Xcode->Preferences->Downloads->Components 时出现网络超时错误。我能够从 Apple 的开发者网站下载“命令行工具”（通过 Safari 下载我没有任何困难）。但是，我找不到替代的 iOS 6 模拟器下载。

iOS 6 Simulator 是否有其他下载位置？如果是这样，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:58:14.153

可能尝试在不同的连接上下载模拟器？我从未听说过这个问题，并且怀疑苹果服务器是否因下载此类内容而关闭。如果问题仍然存在，请连接到不同的网络。

# iphone - NSFetchResultController：用获取的实体及其相关实体填充 TableView

> ID：15577363
> 
> 赞同：0
> 
> 时间：2013-03-22T18:24:18.473
> 
> 标签：iphone, ios, uitableview, core-data, nsfetchedresultscontroller

我有 2 个实体。一个描述 TableView 的部分（一个月，它的名称等）。这个实体与另一个实体的一对多关系相关，另一个实体应该描述 TableView 的行。

我有点困惑如何通过 NSFetchedResultController 获取这些实体。就我现在而言，我当时只能获取一种关系。那么我应该找哪一个来正确填写表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:31:54.603

如果您使用`NSFetchedResultsController`，则获取要在表格视图中显示的对象。

要获取节，您使用`NSFetchedResultsController`'`sectionNameKeyPath`属性来指示如何从获取的对象之一中查找节名。这个关键路径是您可以传递给获取`valueForKeyPath:`的对象之一以获取节名称的东西。在你的情况下，它需要遍历一个关系回到月份实体（或任何它实际上是）来获得它的名字。例如，如果调用了关系`month`并且 Month 实体具有属性，则在创建获取的结果控制器时`name`将传递类似的东西`@"month.name"`作为参数。`sectionNameKeyPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:07:18.053

您还可以使用出色的 Sensible TableView 框架来自动获取核心数据对象并将它们显示在表格视图中。该框架还将检测实体是否有任何关系，并将自动管理它们之间的详细视图控制器。

# oracle - 在 oracle pl/sql 中如何选择嵌套类型？

> ID：15577364
> 
> 赞同：5
> 
> 时间：2013-03-22T18:24:21.620
> 
> 标签：oracle, plsql, oracle11g

我希望能够通过 rowid 删除，然后立即将要删除的数据插入审计表中。

`INSERT INTO ... SELECT CRITERIA`那时的记录太多了 `DELETE ... CRITERIA`。

我已经知道如何使用 rowid 和`INSERT INTO ... SELECT`.

内包装主体：

```
TYPE some_type IS RECORD (
   row_id    ROWID,
   full_row  table_name%ROWTYPE
);
TYPE some_type_list IS TABLE OF some_type
   INDEX BY BINARY_INTEGER;

PROCEDURE do_stuff
IS
   lc_data  SYS_REFCURSOR;
   lt_recs  some_type_list;
BEGIN
   OPEN lc_date FOR
      SELECT rowid, a.*
      FROM   table_name;
   LOOP
      FETCH lc_data
      BULK COLLECT INTO lt_recs
      LIMIT 50000;
      EXIT WHEN lt_recs.COUNT = 0;
      --
      FORALL i IN lt_recs.FIRST..lt_recs.LAST
         DELETE table_name
         WHERE  ROWID = lt_recs(i).row_id;
      --
      FORALL i IN lt_recs.FIRST..lt_recs.LAST
         INSERT INTO table_name_audit VALUES lt_recs(i).full_row;
   END LOOP;
END; 
```

如果我尝试，我会收到以下错误：

`Line: 117 Column: 25 Type: error Text: PLS-00597: expression 'LT_RECS' in the INTO list is of wrong type`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:18:38.483

11gR2 之前的 Oracle 版本限制我们将 BULK COLLECT 用于记录集合（嵌套表或 varray）。[在此处](http://docs.oracle.com/cd/A87860_01/doc/appdev.817/a77069/04_colls.htm)阅读有关 Oracle 文档的更多信息。

如果您想查看它在 11gR2 中是如何完成的，请向下滚动到此答案的**EDIT 2**部分。

另一种方法是为每一列使用单独的集合——这是一种使用最广泛的方法。在此您可以拥有：

```
/*
TYPE some_type IS RECORD (
   row_id    ROWID,
   full_row  table_name%ROWTYPE
);
TYPE some_type_list IS TABLE OF some_type
   INDEX BY BINARY_INTEGER;
-- */
CREATE TYPE t_row_id IS TABLE OF ROWID;
CREATE TYPE t_col1 IS TABLE OF table_name.col1%TYPE;
CREATE TYPE t_col2 IS TABLE OF table_name.col2%TYPE;
CREATE TYPE t_col3 IS TABLE OF table_name.col3%TYPE;
...
...
CREATE TYPE t_colN IS TABLE OF table_name.colN%TYPE;

PROCEDURE do_stuff
IS
   lc_data  SYS_REFCURSOR;
   -- lt_recs  some_type_list;
   row_id t_row_id;
   col1 t_col1;
   col2 t_col2;
   col3 t_col3;
   ...
   ...
   colN t_colN;
BEGIN
   OPEN lc_date FOR
      SELECT rowid, a.*
      FROM   table_name;
   LOOP
      FETCH lc_data
      BULK COLLECT INTO row_id, col1, col2, col3, ..., colN
      LIMIT 50000;
      EXIT WHEN lt_recs.COUNT = 0;
      --
      FORALL i IN row_id.FIRST..row_id.LAST
         DELETE table_name
         WHERE  ROWID = row_id(i);
      --
      FORALL i IN col1.FIRST..col1.LAST
         INSERT INTO table_name_audit VALUES (col1(i), col2(i), col3(i), ..., colN(i));
   END LOOP;
END; 
```

为了让您了解更改，我没有删除您程序中的许多行。

**编辑：请参阅我在上面和**[此处](http://docs.oracle.com/cd/A87860_01/doc/appdev.817/a77069/04_colls.htm)给出的 Oracle Docs 链接的“BULK COLLECT 限制”部分。

* * *

**编辑#2：**

* * *

您必须使用`CREATE TYPE ... IS OBJECT`而不是`RECORD`. 此外，您需要`SELECT`按照我在尝试时所做的方式修改语句。请参阅此处的 Oracle 文档[和](https://stackoverflow.com/questions/10213489/ora-00947-not-enough-values-while-declaring-type-globally)[此处](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/05_colls.htm)的 StackOverflow 问题以供进一步参考。

我在我的机器上尝试的代码（运行 Oracle 11g R2）如下：

-- SELECT * FROM user_objects WHERE object_type = 'TYPE'; 清屏；设置服务器输出；

```
CREATE OR REPLACE TYPE temp_t_test AS OBJECT ( -- << OBJECT, not RECORD.
  test_id  INTEGER
, test_val VARCHAR2(50)
);
/

CREATE OR REPLACE TYPE temp_tbl_test AS TABLE OF TEMP_T_TEST;
/

DECLARE
  v_test TEMP_TBL_TEST;
BEGIN
  SELECT temp_t_test(t_id, t_val) -- << Notice the syntax
  -- I'm selecting the columns as the defined OBJECT type.
  BULK COLLECT INTO v_test
    FROM (SELECT 1 AS t_id, 'ABCD' AS t_val FROM dual
          UNION ALL
          SELECT 2, 'WXYZ' FROM dual
          UNION ALL
          SELECT 3, 'PQRS' FROM dual);

  dbms_output.put_line('Bulk Collect Successful!');
END;
/ 
```

** 输出 **：

```
TYPE temp_t_test compiled
TYPE temp_tbl_test compiled
anonymous block completed
Bulk Collect Successful! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:28:50.857

老实说，我认为我根本不会采用这种方法。

一种更快的方法是执行多表插入：

1.  将表列插入审计表，可能使用直接路径（APPEND 提示）以提高效率
2.  将 rowid 插入到 on-commit-delete-rows 全局临时表中。

然后使用 DELETE .. WHERE ROWID IN (SELECT ORIGINAL_ROWID FROM MY_GLOBAL_TEMP_TAB) 对原始表执行删除

...然后提交。

我认为更快，更少的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T22:14:47.913

你试图在 11gR2 中工作 - 你在哪个版本上？

您的帖子中唯一看起来不正确的是：

```
OPEN lc_date FOR
  SELECT rowid, a.*
  FROM   table_name; 
```

应该是这个...

```
OPEN lc_data FOR
  SELECT a.rowid, a.*
  FROM   table_name a; 
```

...但这些可能只是您在清理代码以在此处发布时引入的拼写错误。

# css - 支持视网膜的 CSS 自定义光标

> ID：15577365
> 
> 赞同：10
> 
> 时间：2013-03-22T18:24:22.553
> 
> 标签：css, retina-display, custom-cursor

我找不到有关此主题的任何信息。我想要一个带有 CSS 的简单自定义光标。我现在有这个代码：

```
cursor: url('img/cursor_left.png'), auto; 
```

它显示光标，没有错。但它很模糊，因为它与视网膜显示不兼容。任何人都知道如何解决这个问题？

谢谢，安杰洛。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T18:33:51.147

我没有对此进行测试，但应该可以使用[image-set](http://www.html5rocks.com/en/mobile/high-dpi/)：

```
cursor: url('img/cursor_left.png'), auto;
cursor: -webkit-image-set(
  url('img/cursor_left.png') 1x,
  url('img/cursor_left_hi.png') 2x
), auto; 
```

# iphone - 更改 UITabBar 选项卡时关闭 DetailController？

> ID：15577366
> 
> 赞同：2
> 
> 时间：2013-03-22T18:24:26.397
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, uitabbarcontroller

我正在开发一个应用程序，其中`UINavigationController`嵌入了一个`UITabBarController`. 当点击单元格时，`UINavigationController`它`UITableView`会转换为*DetailController*。

我的问题是：我在**[TAB1]**上选择一个单元格并转换到*DetailController*。如果我选择**[TAB2]**然后返回**[TAB1]**它仍然在细节控制器上。无论如何，选择[Tab2]时**，**我可以在**[** *Tab1* ]上解除/解除详细信息控制器（即它再次显示表视图单元格）。

 **我的另一个想法是，这样做不会使 UI 处于用户离开它的状态，即在查看*DetailController*并按**[TAB2]**返回**[TAB1]**后会向用户显示`UITableView`. 如果您离开**TAB** ，应用程序恢复*DetailController*感觉更好，这就是我问的原因......

 **注意：`I present the *DetailController* via a push segue from the`UITableViewCell`.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:30:14.623

您可以实现[UITabBarControlleDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)并返回到更改选项卡时`UINavigationController`使用的根视图。`popToRootViewControllerAnimated:`

代码示例：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
    tabBarController.delegate = self;
    return YES;
}

  - (BOOL)tabBarController:(UITabBarController *)tabBarController
shouldSelectViewController:(UIViewController *)viewController
{
    UIViewController *currentController = tabBarController.selectedViewController;
    if ([currentController isKindOfClass:[UINavigationController class]])
         [(UINavigationController *)currentController popToRootViewControllerAnimated:NO];
    return YES;
} 
```****

# ruby-on-rails - devise_ldap_authenticatable + devise：可以通过 ldap 使用测试脚本进行身份验证，但不适用于 devise

> ID：15577368
> 
> 赞同：1
> 
> 时间：2013-03-22T18:24:37.560
> 
> 标签：ruby-on-rails, devise, ldap

我可以使用 net-ldap gem 网站提供的测试代码登录，但相同的登录设置不适用于 Rails 上的设计。

这是我尝试使用 devise 登录 Rails 时的服务器日志。

```
Started POST "/users/sign_in" for 127.0.0.1 at Fri Mar 22 10:53:39 -0700 2013
Processing by Devise::SessionsController#create as HTML
  Parameters: {"commit"=>"Sign in", "authenticity_token"=>"bEmEPHuI8ob+O67hy0mpgGm12KzFnBNwRuhALAJzmCg=", "user"=>{"remember_me"=>"1", "email"=>"somerandomeusername@corp.bigasscorporation.com", "password"=>"[FILTERED]"}, "utf8"=>"✓"}
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'somerandomeusername@corp.bigasscorporation.com' LIMIT 1
  LDAP: LDAP dn lookup: mail=somerandomeusername@corp.bigasscorporation.com
  LDAP: LDAP search for login: mail=somerandomeusername@corp.bigasscorporation.com
  LDAP: Authorizing user mail=somerandomeusername@corp.bigasscorporation.com,OU=Users,OU=Users_and_Groups,DC=corp,DC=bigasscorporation,DC=com
  LDAP: LDAP dn lookup: mail=somerandomeusername@corp.bigasscorporation.com
  LDAP: LDAP search for login: mail=somerandomeusername@corp.bigasscorporation.com
DEPRECATION WARNING: an empty resource was given to Devise::Strategies::LdapAuthenticatable#validate. Please ensure the resource is not nil. (called from require at script/rails:6)
Completed 401 Unauthorized in 64ms 
```

以下是有关我的环境的一些信息

红宝石 1.8.7

导轨 3.2.13

使用的宝石

*   宝石“设计”，“〜> 2.2.2”
*   gem "net-ldap", '~> 0.2.2'
*   gem "devise_ldap_authenticable", '~> 0.6.1'

LDAP 配置

配置/ldap.yml

```
authorizations: &AUTHORIZATIONS
  group_base: OU=Users,OU=Users_and_Groups,DC=corp,DC=somebigasscorporation,DC=com
  required_groups:
    - cn=Users,OU=Users_and_Groups,DC=corp,DC=somebigasscorporation,DC=com
    - OU=Users,OU=Users_and_Groups,DC=corp,DC=somebigasscorporation,DC=com
    - ["moreMembers", "cn=users,ou=groups,dc=test,dc=com"]
  require_attribute:
    objectClass: inetOrgPerson
    authorizationRole: postsAdmin

## Enviornments

development:
  host: xxx.corp.somebigasscorporation.com
  port: 3268
  attribute: mail
  base: OU=Users,OU=Users_and_Groups,DC=corp,DC=somebigasscorporation,DC=com
  # admin_user: cn=admin,dc=test,dc=com
  # admin_password: admin_password
  ssl: false
  # <<: *AUTHORIZATIONS 
```

配置/初始化程序/devise.rb

```
Devise.setup do |config|
  config.ldap_create_user = true

  ... 
```

有效的测试代码

```
require 'rubygems'
require 'net/ldap'
require 'highline/import'

ldap = Net::LDAP.new
ldap.host = "xxx.corp.bigasscorporation.com"
ldap.port = "3268"
ldap.base = "OU=Users,OU=Users_and_Groups,DC=corp,DC=bigasscorporation,DC=com"
ldap.auth "somerandomuser@corp.bigasscorporation.com", "xxxXXXyyy"

if ldap.bind
  p "Success!!"
  p ldap
  p ldap.base
  p ldap.get_operation_result
else
  p "Failed!"
  p ldap.get_operation_result
end

# => "Success!!"
#<Net::LDAP:0x007fc393a22660 @host="xxx.corp.bigasscorporation.com", @port="3268", @verbose=false, @auth={:method=>:simple, :username=>"somerandomuser@corp.bigasscorporation.com", :password=>"xxxXXXyyy"}, @base="OU=Users,OU=Users_and_Groups,DC=corp,DC=bigasscorporation,DC=com", @encryption=nil, @open_connection=nil, @result=0>
"OU=Users,OU=Users_and_Groups,DC=corp,DC=bigasscorporation,DC=com"
#<OpenStruct code=0, message="Success"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:52:27.490

我在 devise.rb 中需要这个

`config.ldap_auth_username_builder = Proc.new() {|attribute, login, ldap| "#{login}" }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T23:30:44.003

万一其他人有同样的问题，我发现`ldap_auth_username_builder`修复有一个小问题。我还尝试对 .yml 文件中的必需属性设置一些授权，并且`ldap.search`在 gem 调用方法后我遇到了很多奇怪的错误。特别是，很多调用`.try(:first)`返回 nil 的搜索。

我最终在 gem 的 lib 目录中进行了挖掘，并调整了一些代码以获得更好的日志记录。事实证明，当我添加 时`config.ldap_auth_username_builder`，我实际上是在欺骗系统，让它相信它找到了一条记录，而实际上并没有。我无法为这些记录指定属性，因为没有记录开始。如果你们正在尝试做类似的事情，比如检查组成员资格等，我建议三重检查你`attribute`在`ldap.yml`文件中的值是否设置为有效的 attr 并且你给它提供了正确的信息，所以它可以在 LDAP 端找到你需要的东西。

# parsing - 复数

> ID：15577369
> 
> 赞同：-8
> 
> 时间：2013-03-22T18:24:58.523
> 
> 标签：parsing, math, complex-numbers

我正在做一个数学项目。我需要一种允许我评估用户输入的编程语言。就像乘以 2 个复数一样：我不能使用正则表达式，因为有很多可能性（我想包括所有计算步骤。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:32:00.267

你可以使用 Scheme，它是一种很好的类似 Lisp 的语言，内置了对复数的支持。此外，由于在 Scheme 中数据是代码，因此很容易将用户输入转换为可执行代码。

[鸡计划](http://www.call-cc.org/)是一种流行的变体。

其他具有内置复数支持的流行语言是：

*   R：`i`用作虚数的后缀。`(1+2i)^2`返回`-3+4j`。
*   Python：`j`用作虚数的后缀。`(1+2j)**2`返回`(-3+4j)`。
*   Ruby：使用[`Complex`](http://www.ruby-doc.org/core-1.9.3/Complex.html)类。
*   C：包含`complex.h`并`I`用作虚数单位。另请参阅[如何在 C 中处理复数？](https://stackoverflow.com/questions/6418807/how-to-work-with-complex-numbers-in-c)

# php - 使用 PHP 发送此电子邮件表单？

> ID：15577371
> 
> 赞同：-2
> 
> 时间：2013-03-22T18:25:04.537
> 
> 标签：php, html

我有来自 HTML 模板的电子邮件表单的以下代码。我想让它发送电子邮件，因为我认为它没有，我需要添加一些 PHP 来处理表单。有关如何为此表单执行此操作的任何提示？

谢谢！

```
<!-- Email -->
<article id="email" class="panel">
    <header>

<h2>Email Me</h2>

    </header>
    <form action="#" method="post">
        <div class="5grid">
            <div class="row">
                <div class="6u">
                    <input type="text" class="text" name="name" placeholder="Name" />
                </div>
                <div class="6u">
                    <input type="text" class="text" name="email" placeholder="Email" />
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <input type="text" class="text" name="subject" placeholder="Subject" />
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <textarea name="message" placeholder="Message"></textarea>
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <input type="submit" class="button" value="Send Message" />
                </div>
            </div>
        </div>
    </form>
</article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:36:42.473

你应该阅读[http://php.net/manual/es/function.mail.php](http://php.net/manual/es/function.mail.php)

所以你得到你的数据，`$_POST`然后处理数据，使用这样的东西：

```
$message = wordwrap($message, 70, "\r\n");
mail('myMail@example.com', 'subject', $message); 
```

# c++ - 我的复制构造函数是错误的。他们应该是什么样子？

> ID：15577374
> 
> 赞同：2
> 
> 时间：2013-03-22T18:25:15.900
> 
> 标签：c++

我有这两个简单的类：CreditCard 和 Account

```
 #pragma once

    #include<string>

    class CreditCard
    {
    private:
        std::string number;
        int expMonth;
        int expYear;
        int pin;
    public:

        CreditCard():number(""), expMonth(0), expYear(0), pin(0)
        {

        }

        CreditCard(std::string number, int expMonth, int expYear,int pin):number(number), expMonth(expMonth), expYear(expYear), pin(pin)
        {
            if(number.length()!=5)
            {
                throw std::invalid_argument("Card number must be 5 characters");
            }
            if(expMonth<0 || expMonth>12)
            {
                throw std::invalid_argument("Invalid expiration month");
            }
            if(expYear<2014 || expYear>2020)
            {
                throw std::invalid_argument("Invalid expiration year");
            }
            if(pin<1000 || pin>9999)
            {
                throw std::invalid_argument("PIN must be between 1000 and 9999");
            }
        }

        CreditCard(const CreditCard &creditCard):number(creditCard.number), expMonth(creditCard.expMonth), expYear(creditCard.expYear), pin(creditCard.pin)
        {

        }   

        CreditCard(CreditCard &&creditCard):number(std::move(creditCard.number)), expMonth(std::move(creditCard.expMonth)), expYear(std::move(creditCard.expYear)), pin(std::move(creditCard.pin))
        {
            creditCard.number="";
            creditCard.expMonth=0;
            creditCard.expYear=0;
            creditCard.pin=0;
        }

        CreditCard& operator = (const CreditCard &creditCard)
        {
            number=creditCard.number;
            expMonth=creditCard.expMonth;
            expYear=creditCard.expYear;
            pin=creditCard.pin;
            return *this;
        }

        CreditCard& operator = (CreditCard &&creditCard)
        {
            if(this!=&creditCard)
            {
                number=std::move(creditCard.number);
                expMonth=std::move(creditCard.expMonth);
                expYear=std::move(creditCard.expYear);
                pin=std::move(creditCard.pin);
                number=creditCard.number;
                expMonth=creditCard.expMonth;
                expYear=creditCard.expYear;
                pin=creditCard.pin;
            }
            return *this;
        }

        std::string getNumber() const
        {
            return number;
        }

        int getExpMonth() const
        {
            return expMonth;
        }

        int getExpYear() const
        {
            return expYear;
        }

        int getPin() const
        {
            return pin;
        }
    };

#pragma once

#include<string>
#include"CreditCard.h"

class Account
{
private:
    std::string number;
    float amount;
    CreditCard creditCard;
public:
    Account():number(""), amount(0), creditCard()
    {

    }

    Account(std::string number, float amount, CreditCard creditCard) : number(number), amount(amount), creditCard(creditCard)
    {

    }

    Account(const Account &account) : number(account.number), amount(account.amount), creditCard(account.creditCard)
    {

    }

    Account(Account &&account) : number(std::move(account.number)), amount(std::move(account.amount)), creditCard(std::move(creditCard))
    {

    }

    Account& operator = (const Account &account)
    {
        number=account.number;
        amount=account.amount;
        creditCard=account.creditCard;      
        return *this;
    }

    Account& operator = (Account &&account)
    {
        if(this!=&account)
        {
            number=account.number;
            amount=account.amount;
            creditCard=account.creditCard;

            account.number="";
            account.amount=0;
            account.creditCard=CreditCard("",0,0,0);
        }
        return *this;
    }

    std::string getNumber() const
    {
        return number;
    }

    float getAmount() const
    {
        return amount;
    }

    void deposit(const float &depositAmount)
    {
        amount+=depositAmount;
    }

    void withdraw(const float &withdrawAmount)
    {
        amount-=withdrawAmount;
    }
}; 
```

因为我是初学者，所以我写的几乎所有东西都会出错。编写移动构造函数的正确方法是什么？我的 2 个移动构造函数/移动赋值运算符应该是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:27:35.910

您的构造函数不需要采取任何特殊操作，因此您可以使用构造函数合成版本：

```
CreditCard(const CreditCard& creditCard)=default;
CreditCard(CreditCard&& creditCard)=default; 
```

等等。

如果你真的想实现它们，那么这是一个手工移动复制构造函数的例子。请注意，构造函数主体中没有任何事情发生。

```
CreditCard(CreditCard&& creditCard)
: 
number(std::move(creditCard.number)), 
expMonth(std::move(creditCard.expMonth)), 
expYear(std::move(creditCard.expYear)), 
pin(std::move(creditCard.pin))
{} 
```

关于复制分配操作符，如果您关心异常安全性，您可能需要查看[复制和交换习语](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Copy-and-swap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:34:49.567

如果你的班级成员是

```
std::string number;
int expMonth;
int expYear;
int pin; 
```

并且您将复制构造函数编写为：

```
CreditCard(const CreditCard &creditCard):number(creditCard.number),
 expMonth(creditCard.expMonth), expYear(creditCard.expYear), 
 pin(creditCard.pin){} 
```

那么如果您自己没有指定编译器，这正是编译器将提供的

您只需要在某些特殊情况下编写复制构造函数，即当您必须动态分配指针并且您不希望指针仅以上述方式复制“值”时

注意：您没有提供初始化，`std::string`但我认为这不是故意的

# batch-file - findstr 被冒号弄糊涂了？

> ID：15577376
> 
> 赞同：0
> 
> 时间：2013-03-22T18:25:27.917
> 
> 标签：batch-file, findstr

如果我从 cmd.exe 运行：

```
findstr "\"A\" : \"B\"" c:\temp\sample.json

echo %errorlevel% 
```

sample.json 的内容是

```
{
    "Abad" : "B"
} 
```

错误级别显示为 0。

如果我将 ':' 替换为 '.'，我再次得到 0。但是，如果我改为使用两个 '.'：

```
findstr "\"A\" ..\"B\"" c:\temp\sample.json 
```

findstr 正确返回 1 的错误级别。 findstr 试图做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:50:18.050

实时调频。

如果字符串之间有空格，FINDSTR 会查找 string1 **OR** string2 **OR** string3...

因此，您`FINDSTR`正在寻找`"A"` **OR** `:` **OR** `"B"`

要查找包含空格的字符串，请使用 (eg)

```
 findstr /c:"\"A\" : \"B\"" 
```

# php - “To”参数在 Windows 的 MailTo 链接中不起作用

> ID：15577378
> 
> 赞同：0
> 
> 时间：2013-03-22T18:25:35.163
> 
> 标签：php, html, email, href

出于某种原因，“收件人”参数在我的 Mac 上的 Gmail 和 Outlook 中运行。但是当我在 Windows 中尝试链接时，它们在任何浏览器和任何客户端都不起作用。是什么赋予了？

现在作为一个小背景，我正在使用一些 JavaScript 构建链接。下面是我的代码。也许我做错了。奇怪的是，这只是 Windows 中的问题，不依赖于浏览器或邮件客户端。

代码：

```
<div class="customsms-model-box email-modal share-modal sms-modal">
  <div class="modal-title">Send a link via SMS</div>
  <form id="email-box">
    <div class="email-info">
      Web access on phone is required to view the full list. Standard text message rates from your carrier will apply. You will be sending this SMS message through your e-mail program. We will build everything for you. You will just have to send it.
    </div>

    <div class="mobile-carrier">
      <span class="carrier-label">Mobile carrier:&nbsp;</span>
      <select name="email_to_email">
        <option value='' selected="selected">Select one</option>
        <?php print users_carrier_options(); ?>
      </select>
    </div>

    <div class="recipient-phone">
      <span class="recipients-phone">Recipient's phone:&nbsp;</span>
      <input type="text" name="phone_number" value="" /><br>
      <span class="subnote">Enter phone number including area code. Numbers only, no other characters.</span>
    </div>

    <div class="email-buttons">
      <a href="#" class="orange-link send-mail" target="_blank">Send link</a>
      <a href="#" class="simple-link cancel close">Cancel</a>
    </div>
  </form>
</div>

<div class="email_body" ref="<?php print $list->id; ?>">Follow the URL to see my items! <?php print $smsLink; ?></div>

<div class="email_subject" ref="<?php print $list->id; ?>">SOME COMPANY SUBJECT</div>

<script>
jQuery(document).ready(function($) {
  var eBody = $('#modal-content .email_body').text();
  var eSubject = $('#modal-content .email_subject').text();
  var eTo = "";
  var eFrom = "<?php print $user->mail; ?>";
  update_email();

  $('a.send-mail').click(function() {
    if (eTo == '') {
      alert("You must enter an email address!");
      return false;
    }
  });

  //Replace this with something for the SMS carrier emailTo stuff
  $(".mobile-carrier select").change(function(){
    if ($(this).val() != '') {
      update_to(true);
    }
  });

  $(".recipient-phone input").change(function(){
    if ($(this).val() != '') {
      update_to();
    }
  });

  function update_to(calledBySelect) {
    if (calledBySelect != true) {
      calledBySelect = false;
    }

    var phone = $(".recipient-phone input").val().replace(/[^\d.]/g, ""); //Get the phone number and leave only digits

    //A little validation
    if (phone.length != 10 && !calledBySelect) {
      alert('You must put in a 10 digit phone number.');
      return false;
    }

    var carrier = $('.mobile-carrier select').val();//Gotta load the carrier domain
    eTo = phone + '@' + carrier; //Build the email to address
    update_email(); //Make sure all of this gets updated
  }

  function update_email() {
    $('.email-buttons a.send-mail').attr( 'href', 'mailto:?subject=' + encodeURIComponent(eSubject) + '&body=' + encodeURIComponent(eBody) + '&to=' + encodeURIComponent(eTo) + '&from=' + encodeURIComponent(eFrom) );
  }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:31:03.513

不要设置`to`参数，而是将电子邮件设置在最前面：

`mailto:EMAIL_ADDRESS?Subject....`

```
$('.email-buttons a.send-mail').attr( 'href', 'mailto:'+encodeURIComponent(eTo)+'?subject=' + encodeURIComponent(eSubject) + '&body=' + encodeURIComponent(eBody) + '&from=' + encodeURIComponent(eFrom) ); 
```

# java - 考虑到集合属性的表单的脏状态

> ID：15577379
> 
> 赞同：1
> 
> 时间：2013-03-22T18:25:40.657
> 
> 标签：java, zk

我有以下模型：

人

```
public class Person {
    private String name;
    private Set<Phone> phones;
    // setters and getters
} 
```

我的 ViewModel 有以下字段：

```
public class PersonViewModel {

    private Person selected;
    private Phone selectedPhone;

    // setters and getters for fields

    @Command
    public void save() {
        // basically persists selected field
    }

    // additional commands

} 
```

我的视图将创建一个类似的表单：

```
<groupbox form="@id('fx') @load(vm.selected) @save(vm.selected, before='save')"> 
```

并将在文本框中显示名称，并在列表框中显示电话。每次我选择电话时，我都会设置属性 selectedPhone。可以通过在我的视图中使用其他文本字段来编辑电话。

当我更改名称时，我的表单的脏状态会更新，这很好。当我选择电话时，我可以看到我的视图模型的属性 selectedPhone 已设置。但是当我使用绑定到 selectedPhone 的 editBox 更改电话时，我的表单的脏状态没有改变。

这是意料之中的，因为我正在更改 ViewModel 而不是表单。但是解决这个问题的方法是什么，因为当手机被改变时，就意味着人也被改变了，因为有东西要保存？

视图实现是这样的：

```
...
<groupbox form="@id('fx') @load(vm.selected) @save(vm.selected, before='save')" vflex="1">
    <textbox width="50px" value="@bind(fx.name)" />
    <listbox vflex="true" model="@load(fx.phones)" selectedItem="@bind(vm.selectedPhone)">
        <!-- shows the phone record -->
    </listbox>
    <textbox width="50px" value="@bind(vm.selectedPhone.number)" />
</groupbox>
.... 
```

当我更改名称时，它会更新表单（fx）并且它的状态是脏的。但是更改 selectedPhone.number 它不会通过表单，因此它没有被标记为脏。Phones 是一个集合，如果 fx 集合中包含的 phone 属性发生更改，如何在 GUI 中显示并将整个表单标记为脏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:25:19.137

在考虑了一下情况后，对我来说有一个简单的解决方案，
只需添加一个额外的对象，因为您的问题是您无法访问`fx`，
所以我们只是制作了一个容器，这样您就有了一个新的容器，`fx`当您更改时可以访问它你收藏的东西。

```
public class MyPersonContainer {
  private Person selected;
  private Phone selectedPhone;
  //getter/setter
} 
```

并更改您的虚拟机

```
public class PersonViewModel {
   //private Person selected;
   //private Phone selectedPhone;
   private MyPersonContainer container;
   ...
} 
```

以及你的看法

```
<groupbox form="@id('fx') @load(vm.container) @save(vm.container, before='save')">
<listbox vflex="true" model="@load(fx.selected.phones)" selectedItem="@bind(fx.selectedPhone)">
...
<textbox width="50px" value="@bind(fx.selectedPhone.number)" /> 
```

# r - 从数据框中获取值并将其添加到新数据框中

> ID：15577380
> 
> 赞同：1
> 
> 时间：2013-03-22T18:25:46.400
> 
> 标签：r

在下面的代码中，我想将`3431933`第一行第六列的值添加`my_data`到`new_data`对象中。

相反，它似乎是在添加数字`2`。你们能帮我找出我哪里出错了，或者我的基本误解可能是什么？

我的代码：

```
print(my_data);
new_data <- {};
my_row <- my_data[1,];
print(my_row[1,6]);
new_data <- rbind(new_data, c(my_row[1,6]));
print(new_data); 
```

这是我在打印输出中看到的内容：

里面有什么`my_data`：

```
 V1            V2 V3   V4   V5       V6       V7            V8
1 10705 indiv7_ACTGAC  2  270  271  3431933  3442637          <NA>
2 41094 indiv7_ACTGAC  2  886  891 10296043 10337136 10297027.1114
3 18841 indiv7_ACTGAC  2 3497 3498 41414296 41433136          <NA>
                V9
1             <NA>
2 10335630.1686849
3             <NA> 
```

打印出来的内容`my_row[1,6]`：

```
[1] 3431933
Levels: 10296043 3431933 41414296 
```

打印出来的内容`new_data`：

```
 [,1]

[1,]    2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:37:55.920

您有一个`factor`（即分类变量），您需要将其转换为数字或字符

```
#instead of: 
my_row[1,6]

# use: 
as.numeric(as.character(my_row[1,6])) 
```

* * *

你正在处理因素的事实是，当你打印出来时，它后面跟着`Levels: ....` （你也可以通过调用来检查 `is.factor()`）。

`2`您得到的数字代表变量的第二级。

# ruby-on-rails - 关联belongs_to：通过

> ID：15577382
> 
> 赞同：0
> 
> 时间：2013-03-22T18:25:49.347
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

我知道这不是任何 belongs_to :through 在 Rails 中的关联，但我该如何解决呢？

*   `User`模型有很多`Batches`
*   `Batch`模型有很多`Forecasts`

我想创建一个关联，说明 a`Forecast`属于 a `User`。但是，我知道由于 a`Forecast`已经属于 a `User`，因此不需要存储`used_id`在`Forecast`模型中。

如何在模型之间`Forecast`和`User`通过`Batch`模型创建这种关系？

**编辑**

让我更好地解释我的问题。

我有以下模型和关联：

```
User < ActiveRecord::Base
  has_many :batches
# has_many :forecasts, through: :batches
end

Batch < ActiveRecord::Base
  belongs_to :user
  has_many :forecasts
end

Forecast < ActiveRecord::Base
  belongs_to :batch
# belongs_to :user, through: :batch
end 
```

注释行是我想要做的，但我不能，因为没有`belongs_to :through`关联。

这种关系严格来说就是代码上所说的：一个用户可能有很多批次。批次是一组预测，因此一个批次可能有许多预测。由于 Batch 必须属于 User，而 Forecast 必须属于 Batch，因此 Forecast 属于 User。

我想从用户那里选择属于所有批次的所有预测。

```
current_user.forecasts 
```

我想这样做的原因是将用户的范围仅限于其自己的批次和预测。所以在控制器动作上，而不是

```
Batch.find(params[:id]) 
```

或者

```
Forecast.find(params[:id]) 
```

我会做

```
current_user.batches.find(params[:id]) 
```

或者

```
current_user.forecasts.find(params[:id]) 
```

使用 Batch 已经可以做到这一点。另一方面，预测还不属于用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:27:40.350

在 Rails 中*有* 。`has_many :through`您可以查看[Rails 指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)以了解如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:33:38.100

在您的用户模型中：

```
has_many :batches
has_many :forecasts, :through => :batches 
```

在您的批次模型中：

```
belongs_to :user
belongs_to :forecasts 
```

在您的预测模型中：

has_many :batches has_many :users, :through => :batches

最后一行只是如果您希望关系双向发展，就像一个完整的多对多关系。

# r - 在R中逐行“合并”表

> ID：15577388
> 
> 赞同：0
> 
> 时间：2013-03-22T18:26:27.187
> 
> 标签：r

我在**R**中有两个（或更多）尺寸相同的表。

```
table1 <- as.table(matrix("TOP", nrow=4, ncol=2 )) 
table2 <- as.table(matrix("BOTTOM", nrow=4, ncol=2 )) 
> table1
  A   B  
A TOP TOP
B TOP TOP
C TOP TOP
D TOP TOP
> table2
  A      B     
A BOTTOM BOTTOM
B BOTTOM BOTTOM
C BOTTOM BOTTOM
D BOTTOM BOTTOM 
```

我想将它们逐行绑定在一起。相比之下，`rbind`给了我

```
> rbind(table1,table2)
  A        B       
A "TOP"    "TOP"   
B "TOP"    "TOP"   
C "TOP"    "TOP"   
D "TOP"    "TOP"   
A "BOTTOM" "BOTTOM"
B "BOTTOM" "BOTTOM"
C "BOTTOM" "BOTTOM"
D "BOTTOM" "BOTTOM" 
```

当我想要的是

```
 > something(table1,table2, byrow=TRUE)
   A        B       
  A "TOP"    "TOP"   
  A "BOTTOM" "BOTTOM"  
  B "TOP"    "TOP"   
  B "BOTTOM" "BOTTOM"
  C ..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:31:05.290

`interleave`从“gdata”包中使用：

```
> library(gdata)
> interleave(table1, table2)
  A        B       
A "TOP"    "TOP"   
A "BOTTOM" "BOTTOM"
B "TOP"    "TOP"   
B "BOTTOM" "BOTTOM"
C "TOP"    "TOP"   
C "BOTTOM" "BOTTOM"
D "TOP"    "TOP"   
D "BOTTOM" "BOTTOM" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:48:34.387

我喜欢@Ananda 的解决方案。如果您想坚持使用基础 R：

```
t(mapply(rbind, table1, table2)) 
```

* * *

虽然尚不完全清楚最终目标是什么，但我猜您正在多次调用`table`，然后希望将它们很好地统一起来。

使用 a 可能更容易`data.table`，然后您可以简单地运行

```
myDT[..., table(<variables>), by=<someFactor>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:49:20.587

手工制作的另一种尝试：

```
stopifnot(nrow(table1)==nrow(table2))
interleaved <- rep(seq(nrow(table1)),each=2)+c(0,nrow(table1))
rbind(table1,table2)[interleaved,] 
```

# c# - MonoTouch (Xamarin) 中的简单 UIPickerView？

> ID：15577389
> 
> 赞同：15
> 
> 时间：2013-03-22T18:26:29.873
> 
> 标签：c#, ios, objective-c, xamarin.ios, uipickerview

谁能描述我如何使用 XCode 在 monotouch 中创建 UIPickerView 并用示例数据填充它？

我确实在这里查看了示例：[https](https://github.com/xamarin/monotouch-samples/blob/master/MonoCatalog-MonoDevelop/PickerViewController.xib.cs) ://github.com/xamarin/monotouch-samples/blob/master/MonoCatalog-MonoDevelop/PickerViewController.xib.cs但这并不是很有帮助，因为我正在创建我的 UIPickerView X代码。这是我到目前为止所拥有的：

```
public partial class StatusPickerPopoverView : UIViewController
{
    public StatusPickerPopoverView (IntPtr handle) : base (handle)
    {
        pickerStatus = new UIPickerView();
        pickerStatus.Model = new StatusPickerViewModel();
    }

    public StatusPickerPopoverView (): base ()
    {
    }

    public class StatusPickerViewModel : UIPickerViewModel
    {
        public override int GetComponentCount (UIPickerView picker)
        {
            return 1;
        }

        public override int GetRowsInComponent (UIPickerView picker, int component)
        {
            return 5;
        }

        public override string GetTitle (UIPickerView picker, int row, int component)
        {

            return "Component " + row.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T15:21:23.137

所以我基本上找到了答案，它比你想象的更容易！

模型必须在 ViewDidLoad 中设置，否则会崩溃......这就是它没有被正确填充的原因。请记住：在“ViewDidLoad”中设置它。

```
public partial class StatusPickerPopoverView : UIViewController
{
    public StatusPickerPopoverView (IntPtr handle) : base (handle)
    {
    }

    public override ViewDidLoad()
    {
        base.ViewDidLoad();

        pickerStatus = new UIPickerView();
        pickerStatus.Model = new StatusPickerViewModel();
    }

    public class StatusPickerViewModel : UIPickerViewModel
    {
        public override int GetComponentCount (UIPickerView picker)
        {
            return 1;
        }

        public override int GetRowsInComponent (UIPickerView picker, int component)
        {
            return 5;
        }

        public override string GetTitle (UIPickerView picker, int row, int component)
        {

            return "Component " + row.ToString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-17T06:55:59.287

**Xamarin Studio 5.10：**

```
public partial class ViewController : UIViewController
    {
        UIPickerView samplePicker;

        public ViewController (IntPtr handle) : base (handle)
        {
        }    
        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            samplePicker = new UIPickerView (new CoreGraphics.CGRect (10f, 244f, this.View.Frame.Width - 20, 250f));
            samplePicker.BackgroundColor = UIColor.LightGray;    
            samplePicker.Model = new StatusPickerViewModel ();   

        }    
        public class StatusPickerViewModel : UIPickerViewModel
        {
            public override nint GetRowsInComponent (UIPickerView pickerView, nint component)
            {
                return 5;
            }

            public override string GetTitle (UIPickerView pickerView, nint row, nint component)
            {               
                return "Title";
            }

            public override nint GetComponentCount (UIPickerView pickerView)
            {

                return 1;
            }           
        }    
        public override void ViewDidAppear (bool animated)
        {
            base.ViewDidAppear (animated);

            this.View.AddSubview (samplePicker);
        }    
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:16:54.127

我相信你想用你的 UIPickerViewModel 实例设置 UIPickerView 的 Model 属性。

```
pickerStatus.Model = new StatusPickerViewModel(); 
```

这是一个为 IList 提供 UIPickerViewModel 的要点：[https ://gist.github.com/jfoshee/5223962](https://gist.github.com/jfoshee/5223962)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-08T18:43:07.943

我创建了[一篇博](https://www.casseykeating.com/home/2017/6/7/uipickerview-xamarin-ios)文，比当前的答案更详细地介绍了它。

首先，将 UIPickerView 添加到您的 Storyboard 中。为 UIPicker 添加名称。

接下来，需要一个实现 UIPickerViewModel 的类，它设置填充它的 Pickers 模型。如果您更熟悉 Android 开发，为 Xamarin iOS 设置选取器可能看起来很奇怪，您不能只用列表填充选取器。

最后，将 UIPickerView 的模型设置为创建的类。

# excel - 如何使单元格条件为负？(Excel)

> ID：15577393
> 
> 赞同：0
> 
> 时间：2013-03-22T18:26:56.460
> 
> 标签：excel

我正在处理 Excel 工作表中的每月应计项目。我想编写一个函数或宏，使其在月份更改时变为负值。我拥有的是一个包含月份的列 (K)，以及另一个包含月份的单元格 (M18)，如果 K=M18，我希望 Amount (N) 列中的值变为负数。但是 =if($K21=$M$18,N=N*-1,"") 不起作用。我可以在旁边写另一列，比如 Q，我可以在其中写`=if($K21=$M$18, N*-1, "")`，但我真的需要 N 列本身的值是负数。有没有办法编写宏或嵌套函数来有条件地将 N 的值替换为自身的负版本？如果我必须在 Q 中计算负 N 的值，那么我可以创建第二个函数返回并使 N=Q 吗？

K_ **__** *L* **__ *M* __ *_* ___** *N* ****____***输入上个月* ****____***二月* ****__ *_*** **地点_**供应商**_金额**
二月 ***_* __ *_* ___** *1,666
二月* ****__ *_* __ *_*** *3,240
二月* ****_ *_* __ *_*** _718**********

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:39:59.477

这是一个可以解决问题的宏：

```
Sub AccrualsMacro()

Dim rngN As Range
Dim clVal As Double
Dim cl As Range
Dim makeNegative As Boolean

makeNegative = [K21] = [M18]

If makeNegative Then
    Set rngN = Range("N1", Range("N1").End(xlDown))
    For Each cl In rngN
        With cl
            clVal = .Value
            If Not clVal < 0 Then 'only apply this rule if the value is still positive
               .Value = -1 * clVal
            End If
        End With
    Next
End If

End Sub 
```****

# iis-7 - IIS 7 站点重定向到默认的 IIS 欢迎页面

> ID：15577394
> 
> 赞同：-1
> 
> 时间：2013-03-22T18:27:08.470
> 
> 标签：iis-7

我在 IIS 7 中设置了一个站点。但是，它重定向到默认页面。

我已经设置了文件夹位置的物理路径。

我错过了什么微不足道的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:31:23.940

更改默认页面的顺序可以修复它。

# ria - RIA HasSideEffects & IsComposable 属性

> ID：15577396
> 
> 赞同：2
> 
> 时间：2013-03-22T18:27:26.393
> 
> 标签：ria

有人可以解释这些属性`HasSideEffects`和`IsComposable`用途吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-12T08:44:33.510

```
IsComposable 
```

指示查询方法是否允许查询组合。当您想要返回一个包含另一个类且不实现 IEnumerable 接口的类时，您需要将查询标记为 IsComposable ex。如果你不这样做，你会得到一个错误：

> 查询操作“XXX”不能标记为可组合，因为它的返回类型“YYY”没有实现 T 的 IEnumerable。

```
HasSideEffects 
```

指示调用操作是否有副作用。您希望在调用具有大量参数的操作时使用它。HasSideEffectAttributes 强制执行一个 POST 调用，它没有像 GET 那样的限制。

# python - 一个简单的消息解码器

> ID：15577397
> 
> 赞同：-1
> 
> 时间：2013-03-22T18:27:32.283
> 
> 标签：python, python-2.7

我构建了一个简单的消息编码器和解码器。编码器将每个字母的值递减 3。例如：A 将被 D 替换，B 将变为 E。解码器则相反。有没有办法像我用编码器那样用更少的代码编写解码器？我试图这样做（我输入了代码），但它不起作用。有什么建议么？

```
import string

shift = 3 # a shift of 3 letters. for example: A would become D, B would become E...

# encoding message
encode = raw_input("Enter message to encode: ")
print "The encoded message is:",
for i in encode:
    print int(ord(i))-shift, # convert characters to numbers

print
print

#decoding message
decode = raw_input("Enter message to decode: ")
message = ""
for numStr in string.split(decode):
    asciiNum = eval(numStr) # convert digits to a number
    message = message + chr(asciiNum+shift) # append character to message and add shift

print "The decoded message is:", message

"""
#decoding message
decode = raw_input("Enter message to decode: ")
decode = int(decode)

print chr(decode+shift) # only works for one number

# doesn't work
for i in range(decode):
    print chr(decode+shift),
""" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:43:10.353

您可以使用列表推导或生成器表达式来使代码更短。

```
>>> message = 'HelloWorld'
>>> encoded = ''.join(chr(ord(letter) - 3) for letter in message)
>>> decoded = ''.join(chr(ord(letter) + 3) for letter in encoded) 
```

# python-3.x - 在 ttk.entry 中设置数据的最大长度并限制为仅整数

> ID：15577401
> 
> 赞同：2
> 
> 时间：2013-03-22T18:27:41.613
> 
> 标签：python-3.x, user-interface, tkinter, ttk, tkinter-entry

我想知道如何设置 TTK 输入字段中允许的最大字符数。我还想将条目限制为仅输入整数，似乎在网上找不到太多。无论如何，这是我的代码：

```
from tkinter import *
from tkinter import ttk

root = Tk()
root.title("Alarm Interface")
mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0, weight=1)

code = IntVar()

code_entry= ttk.Entry(mainframe, width=7, textvariable=code)
code_entry.grid(columnspan = 2, column=2, row=5, sticky=(W, E))

ttk.Button(mainframe, text="1").grid(column=1, row=1, sticky=NW)
ttk.Button(mainframe, text="2").grid(column=2, row=1, sticky=NW)
ttk.Button(mainframe, text="3").grid(column=3, row=1, sticky=NW)
ttk.Button(mainframe, text="4").grid(column=1, row=2, sticky=NW)
ttk.Button(mainframe, text="5").grid(column=2, row=2, sticky=NW)
ttk.Button(mainframe, text="6").grid(column=3, row=2, sticky=NW)
ttk.Button(mainframe, text="7").grid(column=1, row=3, sticky=NW)
ttk.Button(mainframe, text="8").grid(column=2, row=3, sticky=NW)
ttk.Button(mainframe, text="9").grid(column=3, row=3, sticky=NW)
ttk.Button(mainframe, text="Clear").grid(column=1, row=4, sticky=NW)
ttk.Button(mainframe, text="0").grid(column=2, row=4, sticky=NW)
ttk.Button(mainframe, text="Delete").grid(column=3, row=4, sticky=NW)

ttk.Label(mainframe, text="Enter Code:").grid(column=1, row=5, sticky=W)

for child in mainframe.winfo_children(): child.grid_configure(padx=5, pady=5)

root.mainloop() 
```

谢谢，想法是这是警报系统的简单界面，数字范围为0-9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:58:05.290

您想使用条目小部件的`validatecommand`和`validate`属性。这个答案中描述了如何做到这一点：[https ://stackoverflow.com/a/4140988/7432](https://stackoverflow.com/a/4140988/7432)

这是一个简单的示例，它显示了如何禁止任何不会导致 0 到 999 之间的数字的输入（但允许空字符串）：

```
import Tkinter as tk
import ttk

class ConstrainedEntry(ttk.Entry):
    def __init__(self, *args, **kwargs):
        ttk.Entry.__init__(self, *args, **kwargs)

        vcmd = (self.register(self.on_validate),"%P")
        self.configure(validate="key", validatecommand=vcmd)

    def disallow(self):
        self.bell()

    def on_validate(self, new_value):
        try:
            if new_value.strip() == "": return True
            value = int(new_value)
            if value < 0 or value > 999:
                self.disallow()
                return False
        except ValueError:
            self.disallow()
            return False

        return True

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        l = ttk.Label(self, text="Enter a number between 0 and 999:", anchor="w")
        e = ConstrainedEntry(self, width=4)
        l.pack(side="top")
        e.pack(side="top")

root = tk.Tk()
Example(root).pack(side="top", fill="both", expand=True)
root.mainloop() 
```

# c# - 拒绝访问路径“xxx”（其中“xxx”是一个文件夹）

> ID：15577404
> 
> 赞同：1
> 
> 时间：2013-03-22T18:28:12.170
> 
> 标签：c#, asp.net, iis, iis-7.5

我知道这已经被问过很多次了，但是我在没有帮助的情况下浏览了数十个类似的问题。

当我的 asp.net 4.0 应用程序尝试访问本地驱动器上的文件夹时，会显示此错误，执行以下操作：

```
XmlTextReader confReader = new XmlTextReader (filename);           
while (confReader.Read())  // <- error line
{
  // do something
} 
```

在我的 web.config 中，我有 <Identity Impersonate="true">。对于我已分配完全访问权限的文件夹：

```
everyone 
IIS APPPOOL\<custom apppoolname> 
NETWORK SERVICE 
```

调试应用程序时，我可以放置一个手表，在被指控的行之前评估这个调用：

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString(); 
```

调用显示当前用户是 IIS APPPOOL\<custom apppoolname>。

我在带有 Sp1 的 Windows 7 64 位上。我知道这可能很愚蠢，但我已经花了很多时间在这上面。

**编辑**：
问题出在变量“filename”中，它指向正确的文件夹，但对于配置问题，文件名丢失（即内容是“c:\data\”而不是“c:\data\file. xml”）。Asp.net 错误实际上令人困惑，因为我拥有访问该文件夹的所有正确权限。DJKRAZE 为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:28:18.920

这是我建议检查的内容

`where are you declaring filename..?` `Does the file even exist..?`

你有那个文件夹的权利..？您是否尝试过以管理员身份运行 VS ..？您是否为 Web 应用程序设置了虚拟目录..听起来您也有一些配置不正确，但根据初学者的代码无法真正判断这一行`System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString();` 应该产生您的`domain\\username or compuername\\username`

很高兴这`FileName`就是一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:31:27.013

IIS 要求服务器计算机中文件夹的路径具有`Anonymous`用户登录访问权限。

确保用户`Anonymous`有权访问该文件夹。

# css - @font-face css 代码错误。遗漏了什么

> ID：15577405
> 
> 赞同：0
> 
> 时间：2013-03-22T18:28:12.087
> 
> 标签：css, fonts, font-face, webfonts, font-family

我的 css 文件中有以下代码。字体在 Mac OS 上的所有浏览器中都按需要呈现，但不会在 Windows 上呈现。现在在你说它不兼容 Windows 之前，我已经在 Windows 机器上创建了一个虚拟页面，它可以在 Chrome（不是 IE）中正常运行“.woff”文件。Hover IE 可以渲染[这个页面](http://www.mediafont.com/font-5905-skia.html)。我觉得我在@font-face 中遗漏了一些重要的东西。这是我的代码：

```
@font-face { font-family: Skia; 
        src:url('./webfonts/skia.ttf') format('truetype'),
            url('./webfonts/skia.eot') format('embedded-opentype'),
            url('./webfonts/skia.woff') format('woff'),
            url('./webfonts/skia.svg');
        font-weight: lighter;
        font-style: normal;
    } 
```

“webfonts”文件夹与 css 文件所在的“styles”文件夹位于同一目录中。

```
>styles
    >'style.css'
>webfonts
    >'skia.ttf / woff / eot / svg' 
```

在`<body>`标签中，我包括`font-family:Skia, sans-serif;`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T18:33:00.637

看起来你在正确的轨道上

```
@font-face {
    font-family: "sansation";
        src: url("fonts/sansation_light.eot");
        src: url("fonts/sansation_light.eot?#iefix") format("eot"),
             url("fonts/sansation_light.ttf") format("truetype"), 
             url("fonts/sansation_light.woff") format("woff"), 
             url("fonts/sansation_light.svg") format("svg");
    font-weight: 200;
    font-style: normal;
} 
```

您确实希望包含格式，即针对旧版本的 ie 的修复，针对歌剧的 woff 和针对移动设备的 svg。这种格式通常不会让我出错！

此外，您可以放心地省略 ./，因为它与当前目录有关。您还应该包括`font-weight`and `font-style`。[查看 google webfonts 是如何做到这一点的。](http://fonts.googleapis.com/css?family=Merriweather%20Sans:400,300)

# android - 在 android 4.0 及更高版本中获取日历事件

> ID：15577410
> 
> 赞同：0
> 
> 时间：2013-03-22T18:28:28.847
> 
> 标签：android

我是android开发的新手。我正在开发日历应用程序，我需要在其中添加/删除并获取日期范围之间的所有事件。我已成功添加和删除事件，但问题是当我在日期范围之间获取日历事件时。我正在获取日历事件，但是当我转到 SPlanner 时，我可以看到这些事件没有添加到日历中，因为我已经删除了它们。我不知道我从哪里得到这些事件。请建议。这是我为获取日历事件而编写的代码：-

```
public void onGetEvent (final String fullCallbackName, String title,String startDate,String endDate) throws JSONException
    {
            try
            {
                SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
                final ArrayList<JSONObject> calEvents = new ArrayList();
                 if(calEvents.size() !=0)
                 {
                      calEvents.clear();
                 }

                ContentResolver contentResolver = getContentResolver();
                String selection = "((dtstart >= "+(dateFormat.parse(startDate).getTime())+") AND (dtend <= "+(dateFormat.parse(endDate).getTime())+"))";

                Cursor cursor = contentResolver.query(Uri.parse(getCalendarUriBase() + "events"),
                       (new String[] { "_id", "title", "dtstart","dtend","eventLocation","description"}), selection, null, null);
                Log.e("cursor.getCount before:","callbackFuncName:" +  cursor.getCount());
                while (cursor.moveToNext()) {                       
                     String _id = cursor.getString(0);
                     String displayName = cursor.getString(1);
                        Log.e("cursor.getCount before:","callbackFuncName:" +  displayName);

                     String[] separated = displayName.split(":");
                     if(separated[0]!= null && title.equals(separated[0]))
                    {
                        JSONObject dictionary =  new JSONObject();

                        String dstart = dateFormat.format(new Date(Long.parseLong(cursor.getString(2))));//cursor.getString(2);    
                        String dEnd = dateFormat.format(new Date(Long.parseLong(cursor.getString(3))));//cursor.getString(3);  
                        String eventlocation = cursor.getString(4);   
                        String description = cursor.getString(5); 
                        dictionary.put("identifier", _id);
                        dictionary.put("title", displayName);
                        dictionary.put("startDate", dstart);
                        dictionary.put("endDate", dEnd);
                        dictionary.put("venue", eventlocation);
                        dictionary.put("notes", description);
                        calEvents.add(dictionary);

                    }
                }

                if(fullCallbackName != null && !fullCallbackName.equals(""))
                {
                        runOnUiThread(new Runnable() {
                        public void run()
                        {

                            webView.loadUrl("javascript:"+fullCallbackName+" ("+calEvents+")") ; 
                        }
                    });
                }

            }
            catch(Exception e)
            {
            Log.e("string", e.toString());
            }
        }

    } 
```

获取日历数据库的代码是：-

```
private String getCalendarUriBase() {
        String calendarUriBase = null;
        Uri calendars = Uri.parse("content://calendar/calendars");
        Cursor cursor = null;
        try {
            cursor = managedQuery(calendars, null, null, null, null);
        } catch (Exception e) {
            // eat
        }

        if (cursor != null) {
            calendarUriBase = "content://calendar/";
        } else {
            calendars = Uri.parse("content://com.android.calendar/calendars");
            try {
                cursor = managedQuery(calendars, null, null, null, null);
            } catch (Exception e) {
                // eat
            }

            if (cursor != null) {
                calendarUriBase = "content://com.android.calendar/";
            }

        }
        Log.d("Sandeep",
                calendarUriBase);
       // managedCursor.close();
        return calendarUriBase;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:07:47.880

通过您的查询，您将看到已删除的事件，因为它们仍在数据库中（以便能够在下一次同步到期时同步删除）。这就是[DELETED](https://developer.android.com/reference/android/provider/CalendarContract.SyncColumns.html#DELETED)列的用途。

要查找开始日期和结束日期之间的所有事件，请使用 CalendarContract API 的[Instances](https://developer.android.com/reference/android/provider/CalendarContract.Instances.html)类，如下面的代码所示。此代码仅返回可见事件！

我写了[一篇关于 CalendarContract 内容提供者](http://www.grokkingandroid.com/androids-calendarcontract-provider/)的博文，详细介绍了这些内容和其他内容。

```
 long begin = // starting time in milliseconds; for you probably cursor.getLong(2)
   long end = // ending time in milliseconds; cursor.getLong(3)
   String[] proj = 
         new String[]{
               Instances._ID, 
               Instances.TITLE,
               Instances.BEGIN,
               Instances.END,
               Instances.EVENT_LOCATION,
               Instances.DESCRIPTION,
               Instances.EVENT_ID};
   Cursor cursor = 
         Instances.query(getContentResolver(), proj, begin, end);
   if (cursor.getCount() > 0) {
      // do your JSON thing
   } 
```

# jquery - 弹出窗口中的日期选择器不会显示

> ID：15577417
> 
> 赞同：7
> 
> 时间：2013-03-22T18:28:52.897
> 
> 标签：jquery, twitter-bootstrap, datepicker

使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)和[Bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)扩展。我无法在 popover 中显示日期选择[器](http://twitter.github.com/bootstrap/javascript.html#popovers)。

```
<a href="#" id="add-event-button" class="btn btn-small">Add an Event</a> 
```

```
$(document).ready(function () {

    $("#add-event-button").popover({
        title: "Add an Event",
        placement: 'bottom',
        content: '<input class="datepicker" type="text" />',
        html: true
    }).click(function (e) {
        e.preventDefault();
    });
}); 
```

弹出框显示得很好，并且`<input class="datepicker" type="text" />`在弹出框上下文之外显示日期选择器很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T18:43:28.257

尝试使用回调扩展 popover 函数，因为 datepicker 无法在加载时添加到不存在的元素，请尝试以下操作：

```
var tmp = $.fn.popover.Constructor.prototype.show;
$.fn.popover.Constructor.prototype.show = function () {
  tmp.call(this);
  if (this.options.callback) {
    this.options.callback();
  }
}

$("#add-event-button").popover({ 
  title: "Add an Event",
  placement: 'bottom',
  content: '<input class="datepicker" type="text" />',
  html: true, 
  callback: function() { 
    $('.datepicker').datepicker(); 
  }
}).click(function (e) {
  e.preventDefault();
}); 
```

编辑：从这里回调扩展解决方案：[使用 twitter 引导程序创建工具提示/弹出框后的回调函数？](https://stackoverflow.com/questions/14694930/callback-function-after-tooltip-popover-is-created-with-twitter-bootstrap)

# r - R tcltk，更改图标会导致死窗口

> ID：15577418
> 
> 赞同：1
> 
> 时间：2013-03-22T18:28:53.893
> 
> 标签：r

有没有人遇到过这个问题？我创建了一个小弹出 tklistbox 并更改了默认图标。但是，更改图标后，列表框有时会以半死模式弹出。见下图（左图为半死角，右图为活动图）。如果我保留默认的 TK 图标，我就没有这个问题。

谢谢！

DD

![在此处输入图像描述](../Images/8c6a04de7bb990af206bbc492e99928d.png)

# php - 如何在滑动时激活链接？

> ID：15577419
> 
> 赞同：1
> 
> 时间：2013-03-22T18:28:56.320
> 
> 标签：php, jquery, jquery-mobile

我正在编辑使用 php 的其他人的代码（我对 php 不太满意），我需要添加一个滑动功能，以便针对平板电脑进行优化。

我有一个这样的初始化函数：

```
 // swipe through pages
  $(function() {
        $.on( 'swipeleft', swipeToNextPage );
        $.on( 'swiperight', swipeToPreviousPage );
    }); 
```

已经有一个标题导航线性（sp？）通过网站，所以我只想在我的滑动功能中定位它们。

此模板中的导航栏：

```
<a class="icon-right-dir" href="<?php echo $link; ?>"></a> 
```

我可以在 swipeToNextPage 函数中触发 icon-right-dir 吗？

我该怎么做？

```
// swipe left
function swipeToNextPage(){
     // ..uhhhh
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:06:21.193

您可以使用 jQuery [trigger()](http://api.jquery.com/trigger/)触发该元素的所有指定事件处理程序。

```
function swipeToNextPage(){
  $('.icon-right-dir').trigger('click');
} 
```

# php - 在一对多关系中至少一次获得一份父母名单，包括所有孩子

> ID：15577420
> 
> 赞同：0
> 
> 时间：2013-03-22T18:28:57.073
> 
> 标签：php, algorithm

我在报告和位置之间有一对多的关系。我的目标是将我的报告列表缩小到尽可能少的包含所有代表位置的报告。

如果我将其简化为数字列表，它将如下所示，其中键是报告，数组是位置列表：

```
{
  1:[1,2],
  2:[1],
  3:[2,3],
  4:[1,3,4]
} 
```

理想的解决方案是选择报告`1 or 3`和`4`. 要么 要么`1`可以`3`选择，因为它们都包括 Location和带有 Report的`2`重复 Location 。需要选择报告，因为它是唯一带有 Location 的报告。`1``4``4``4`

效率不是主要问题。使用 PHP 缩小列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:36:40.970

NP完全性再次出现。

您要解决的问题称为[Set Cover](http://en.wikipedia.org/wiki/Set_cover_problem)，而且，果然是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)。

这意味着不太可能存在针对它的“高效”（读取，多项式时间）算法。

好消息是，有一些简单的近似算法可以给你一个不错的近似值。

请参阅[此](http://www.cs.dartmouth.edu/~ac/Teach/CS105-Winter05/Notes/wan-ba-notes.pdf)，了解“明显”的贪心算法（在每一点，选择具有最多未发现位置的报告）如何为您提供一个`log (R)`近似值，即`R`报告的数量在哪里（实际上，它甚至比这更好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:24:31.337

如果效率不是您所说的问题，我可以向您**推荐 O(2^n * k)**算法，其中**n**是列表的数量，**k**是它们的长度之和。只需使用位掩码获取所有可能的组合，并为每个组合计算它是否涵盖所有内容。

PS这是一个实现（[http://ideone.com/bAGpbL](http://ideone.com/bAGpbL)）：

```
$arr = array(
  0 => array(1,2),
  1 => array(1),
  2 => array(2,3),
  3 => array(1,3,4),
);
// It is assumed that all indexes are sequential starting from 0
$total_cover = array();
foreach($arr as $sub_arr) {
    foreach($sub_arr as $value) {
        $total_cover[$value] = true;
    }
}
$n = count($arr);
$best_cover = array_keys($arr);
for($i = 0; $i < (1 << $n); $i++) {
    $cover = array();
    $selected_list = array();
    for($j = 0; $j < $n; $j++) {
        if(($i >> $j) & 1) {
            $selected_list[] = $j;
            foreach($arr[$j] as $value) {
                $cover[$value] = true;
            }
        }
    }
    $good_cover = true;
    foreach($total_cover as $key => $value) {
        if(!isset($cover[$key])) {
            $good_cover = false;
            break;
        }
    }
    if($good_cover && count($selected_list) < count($best_cover)) {
        $best_cover = $selected_list;
    }
}
var_dump($best_cover); 
```

# python - 在 python 中应用 PMML 预测模型

> ID：15577427
> 
> 赞同：6
> 
> 时间：2013-03-22T18:29:32.277
> 
> 标签：python, machine-learning, knime, pmml

Knime 为我生成了一个[PMML](http://en.wikipedia.org/wiki/Predictive_Model_Markup_Language)模型。这时候我想把这个模型应用到一个python进程中。这样做的正确方法是什么？

更深入：我开发了一个[django 学生考勤系统](https://code.google.com/p/ghap/)。该应用程序已经非常成熟，以至于我有时间实现“我感觉很幸运”按钮来自动填写考勤表。这就是 PMML 的用武之地。Knime 生成了一个预测学生出勤率的 PMML 模型。另外，感谢 django 如此高效，让我有时间做这项伟大的工作；）

![在此处输入图像描述](../Images/9d42f58ece6994044b19e6909fe2d4d8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:13:43.760

最后，我编写了自己的代码。自由贡献或分叉它：

[https://github.com/ctrl-alt-d/lightpmmlpredictor](https://github.com/ctrl-alt-d/lightpmmlpredictor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T18:21:11.893

用于在 Python 中对 PMML 模型进行评分的 Augustus 代码位于[https://code.google.com/p/augustus/](https://code.google.com/p/augustus/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-25T02:27:55.377

您可以使用[PyPMML](https://github.com/autodeployai/pypmml)在 Python 中应用 PMML，例如：

```
from pypmml import Model

model = Model.fromFile('the/pmml/file/path')
result = model.predict(data) 
```

数据可以是 dict、json、Series 或 Pandas 的 DataFrame。

如果您在 PySpark 中使用 PMML，则可以使用[PyPMML-Spark](https://github.com/autodeployai/pypmml-spark)，例如：

```
from pypmml_spark import ScoreModel

model = ScoreModel.fromFile('the/pmml/file/path')
score_df = model.transform(df) 
```

df 是 PySpark 的 DataFrame。

有关其他 PMML 库的更多信息，请随意查看： [https ://github.com/autodeployai](https://github.com/autodeployai)

# html - 将 Kinetic JS 添加到 PDF 文件

> ID：15577428
> 
> 赞同：0
> 
> 时间：2013-03-22T18:29:33.233
> 
> 标签：html, kineticjs, pdf.js

我正在尝试使用 pdf.js 将 KineticJS 形状添加到**现有的**pdf 文件中。我遇到的问题是 KineticJS 创建了一个新画布并且不会使用由 pdf.js 创建的画布。我尝试在 KineticJS 中引用 pdf.js 画布，但这不起作用。关于如何将两者结合起来的任何想法？主要目的是为pdf提供注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:25:25.827

如果您对这个过程不太了解，您可以尝试生成 .pdf 的 Bytescout，它还包含一个挂钩，可将您的画布图像加载到您的 pdf 中。

一切都在客户端完成，因此您可以查看/编辑/查看/编辑您心中的内容。

他们在这里： [http](http://bytescout.com/products/developer/pdfgeneratorsdkjs/index.html) : //bytescout.com/products/developer/pdfgeneratorsdkjs/index.html（顺便说一句，这里没有推销——我没有以任何方式连接到bytescout！）

这是他们网站上显示嵌入式画布的示例：

```
function CreatePDF() {

    // create BytescoutPDF object instance
    var pdf = new BytescoutPDF();

    // set document properties: Title, subject, keywords, author name and creator name
    pdf.propertiesSet("Sample document title", "Sample subject", "keyword1, keyword 2, keyword3", "Document Author Name", "Document Creator Name");

    // set page size
    pdf.pageSetSize(BytescoutPDF.A4);

    // set page orientation (BytescoutPDF.PORTRAIT = portrait, BytescoutPDF.LANDSCAPE = landscape)
    pdf.pageSetOrientation(BytescoutPDF.PORTRAIT);

    // add new page
    pdf.pageAdd();

    // create temporary canvas (you can also simply get existing canvas)
    var canvas = document.createElement('canvas');
    // set width and height
    canvas.width = 320;
    canvas.height = 240;

    // get context from canvas (to draw on)
    var context = canvas.getContext("2d");

    // set white background color
    context.fillStyle = "#FFFFFF";
    // and fill the background with white color
    context.fillRect(0, 0, 320, 240);

    // draw the yellow circle
    context.strokeStyle = "#000000";
    context.fillStyle = "#FFFF00";
    context.beginPath();
    context.arc(100, 100, 50, 0, Math.PI * 2, true);
    context.closePath();
    context.stroke();
    context.fill();

    // load image from canvas into BytescoutPDF
    pdf.imageLoadFromCanvas(canvas);

    // place this image at given X, Y coordinates on the page
    pdf.imagePlace(20, 40);

    // return BytescoutPDF object instance
    return pdf;
} 
```

# iis-7 - 关闭 Webmatrix 时无法访问页面

> ID：15577429
> 
> 赞同：0
> 
> 时间：2013-03-22T18:29:36.903
> 
> 标签：iis-7, webmatrix

我有一`devserv`台安装了 Webmatrix 的服务器 ( )。在设置下，我修改了 URL，所以现在是`http://devserv:8888`. 这使我可以访问我正在处理的 2 个站点。但是，只有我打开了 Webmatrix 才有效。当我关闭它时，这些站点无法访问。顺便说一句，它们在本地也无法访问，但我给你完整的图片以防万一。

我得到的错误是`web.config`无法读取权限不足。

但是，所有域用户都有权在包含站点的文件夹上读取和执行，我检查了权限在树下。

所以问题是我做错了什么，为什么当 Webmatrix 打开时，就没有问题了。

这是 Windows 2008 R2 服务器标准，IIS 是 7.5.7600.16385

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T18:10:29.803

WebMatrix 仅在您编辑给定站点时启动 IIS Express 服务器（打开 WebMatrix）。当您关闭 WebMatrix 时，我们关闭了 IIS Express 进程。IIS Express 仅用于在开发期间使用 - 如果您希望站点继续可用，我建议在其上安装完整的 IIS，并使用 WebMatrix 发布将您的文件通过 Web Deploy 推送到服务器。

希望这会有所帮助！

# d3.js - 如何正确地使文本宽度居中图条上方的标签？

> ID：15577430
> 
> 赞同：9
> 
> 时间：2013-03-22T18:29:36.743
> 
> 标签：d3.js, coffeescript, label, bar-chart

我目前有一个图表，在每个条形上方显示相关条形值，但由于无法获取每个文本元素的宽度，我很难将值标签居中。

这就是我的图表目前的绘制方式：

![在此处输入图像描述](../Images/e011f728a25eae8ac70dab1de1867c80.png)

我需要做的就是减去每个文本元素宽度的一半，但我似乎无法使用以下 Coffeescript 这样做：

```
 #Drawing value labels   
    svg.selectAll("rect")
        .data(data)
        .enter()
        .append("text")
        .text((d)-> d.Total)
        .attr("width", x.rangeBand())
        .attr("x", (d)->
            textWidth = d3.selectAll("text").attr("width")

            x(d.Year) + (x.rangeBand() / 2) - (textWidth / 2)
        )
        .attr("y", (d)-> y(d.Total) - 5)
        .attr("font-size", "10px")
        .attr("font-family", "sans-serif")

    #Drawing bars       
    svg.selectAll("rect")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x", (d)-> x(d.Year))
        .attr("width", x.rangeBand())
        .attr("y", (d)-> y(d.Total))
        .attr("height", (d)-> height - y(d.Total)) 
```

有没有办法可以访问每个文本元素的宽度属性来设置偏移值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-26T00:32:23.110

`text-anchor`一种可能更简单的方法是使用`middle`设置`x`在条形的左侧加上条形宽度的一半：

```
svg.selectAll(".bar-label")
  .data(data)
.enter().append("text")
  .text((d)-> d.Total)
  .attr("class", "bar-label")
  .attr("text-anchor", "middle")
  .attr("x", (d)-> x(d.Year) + x.rangeBand()/2)
  .attr("y", (d)-> y(d.Total) - 5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T18:49:30.610

您可以获取文本的边界框并使用这些值应用变换以使其居中。获取边界框的示例是[here](http://bl.ocks.org/mbostock/1160929)。代码看起来像

```
.text(function(d) { return d.Total; })
.attr("x", function(d) {
   return x(d.Year) + (x.rangeBand() / 2) - (this.getBBox().width / 2);
}
... 
```

# java - 如何通过 Intent 共享多个文件？

> ID：15577438
> 
> 赞同：40
> 
> 时间：2013-03-22T18:30:21.137
> 
> 标签：java, android, android-intent

这是我的代码，但这是针对单个文件解决方案的。

我可以像下面的单个文件一样共享多个文件和上传吗？

```
Button btn = (Button)findViewById(R.id.hello);

    btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_SEND);

                String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS) + "/pic.png";
                File file = new File(path);

                MimeTypeMap type = MimeTypeMap.getSingleton();
                intent.setType(type.getMimeTypeFromExtension(MimeTypeMap.getFileExtensionFromUrl(path)));

                intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
                intent.putExtra(Intent.EXTRA_TEXT, "1111"); 
                startActivity(intent);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-22T18:38:39.687

是的，但您需要使用`Intent.ACTION_SEND_MULTIPLE`而不是`Intent.ACTION_SEND`.

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND_MULTIPLE);
intent.putExtra(Intent.EXTRA_SUBJECT, "Here are some files.");
intent.setType("image/jpeg"); /* This example is sharing jpeg images. */

ArrayList<Uri> files = new ArrayList<Uri>();

for(String path : filesToSend /* List of the files you want to send */) {
    File file = new File(path);
    Uri uri = Uri.fromFile(file);
    files.add(uri);
}

intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, files);
startActivity(intent); 
```

这绝对可以简化，但我留下了一些行，以便您可以分解所需的每个步骤。

**更新**：从 API 24 开始，共享文件 URI 将导致 FileUriExposedException。要解决这个问题，您可以将 compileSdkVersion 切换为 23 或更低，或者您可以使用[带有 FileProvider 的内容 URI](https://developer.android.com/training/secure-file-sharing/setup-sharing.html)。

**更新（更新）**：[谷歌最近宣布](https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html)，新的应用程序和应用程序更新将需要针对最新版本的 Android 之一发布到 Play 商店。也就是说，如果您计划将应用程序发布到商店，则以 API 23 或更低版本为目标不再是一个有效的选择。您必须走 FileProvider 路线。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-06T10:15:42.007

这是 Mceley 的解决方案即兴创作的小改进版本。这可以用于同时发送异构文件列表（如图像、文档和视频），例如同时上传下载的文档、图像。

```
public static void shareMultiple(List<File> files, Context context){

    ArrayList<Uri> uris = new ArrayList<>();
    for(File file: files){
        uris.add(Uri.fromFile(file));
    }
    final Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);
    intent.setType("*/*");
    intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
    context.startActivity(Intent.createChooser(intent, context.getString(R.string.ids_msg_share)));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-23T07:31:08.423

如果您**在运行 KitKat 及更高版本的设备上与其他应用程序共享文件**，则需要提供 Uri 权限。

* * *

这就是我在 KitKat 前后处理多个文件共享的方式：

```
//All my paths will temporarily be retrieve into this ArrayList
//PathModel is a simple getter/setter
ArrayList<PathModel> pathList;
//All Uri's are retrieved into this ArrayList
ArrayList<Uri> uriArrayList = null;
//This is important since we are sending multiple files
Intent sharingIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
//Used temporarily to get Uri references
Uri shareFileUri;

if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {

    //My paths are stored in SQLite, I retrieve them first
    SQLiteHelper helper = new SQLiteHelper(this);
    pathList = helper.getAllAttachments(viewholderID);
    helper.close();

    //Create new instance of the ArrayList where the Uri will be stored
    uriArrayList = new ArrayList<>();

    //Get all paths from my PathModel
    for (PathModel data : pathList) {
        //Create a new file for each path
        File mFile = new File(data.getPath());
        //No need to add Uri permissions for pre-KitKat
        shareFileUri = Uri.fromFile(mFile);
        //Add Uri's to the Array that holds the Uri's
        uriArrayList.add(shareFileUri);
    }

} else {

    //My paths are stored in SQLite, I retrieve them first
    SQLiteHelper helper = new SQLiteHelper(this);
    pathList = helper.getAllAttachments(viewholderID);
    helper.close();

    //Create new instance of the ArrayList where the Uri will be stored
    uriArrayList = new ArrayList<>();

    //Get all paths from my PathModel
    for (PathModel data : pathList) {
        //Create a new file for each path
        File mFile = new File(data.getPath());
        //Now we need to grant Uri permissions (kitKat>)
        shareFileUri = FileProvider.getUriForFile(getApplication(), getApplication().getPackageName() + ".provider", mFile);
        //Add Uri's to the Array that holds the Uri's
        uriArrayList.add(shareFileUri);
    }

    //Grant read Uri permissions to the intent
    sharingIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

}

//I know that the files which will be sent will be one of the following
sharingIntent.setType("application/pdf/*|image|video/*");
//pass the Array that holds the paths to the files
sharingIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uriArrayList);
//Start intent by creating a chooser
startActivity(Intent.createChooser(sharingIntent, "Share using")); 
```

在我的情况下，路径存储在 中`SQLite`，但路径可以来自任何地方。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-11T23:10:48.637

```
/* 
 manifest file outside the applicationTag write these permissions
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> */

    File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
                            //Get a top-level public external storage directory for placing files of a particular type. 
                            // This is where the user will typically place and manage their own files, 
                            // so you should be careful about what you put here to ensure you don't 
                            // erase their files or get in the way of their own organization...
                            // pulled from Standard directory in which to place pictures that are available to the user to the File object

                            String[] listOfPictures = pictures.list();
                            //Returns an array of strings with the file names in the directory represented by this file. The result is null if this file is not a directory.

                            Uri uri=null; 
                            ArrayList<Uri> arrayList = new ArrayList<>();
                            if (listOfPictures!=null) {
                                for (String name : listOfPictures) {
                                    uri = Uri.parse("file://" + pictures.toString() + "/" + name );
                                    arrayList.add(uri);
                                }
                                Intent intent = new Intent();
                                intent.setAction(Intent.ACTION_SEND_MULTIPLE);
                                intent.putExtra(Intent.EXTRA_STREAM, arrayList);
                                //A content: URI holding a stream of data associated with the Intent, used with ACTION_SEND to supply the data being sent.
                                intent.setType("image/*"); //any kind of images can support.
                                chooser = Intent.createChooser(intent, "Send Multiple Images");//choosers title
                                 startActivity(chooser);
                            } 
```

# sql - SQL 列引用无效

> ID：15577442
> 
> 赞同：4
> 
> 时间：2013-03-22T18:30:39.450
> 
> 标签：sql, select, group-by, jasper-reports, derby

我正在使用 Jaspersoft 的 iReport 创建一个报告，该报告将从我的维护助手 CMMS 数据库中提取数据。数据库位于本地主机上，我没有创建任何表或列。MA CMMS 负责这一点。我只想提取数据以安排在报告中。

这是我的代码：

```
SELECT * 
FROM   "tblworkordertask" 
WHERE  "dbltimespenthours" > 0 
       AND "dtmdatecompleted" BETWEEN $P{DATE_FROM} AND $P{DATE_TO}
GROUP  BY "intworkorderid" 
```

和我的错误：

> 原因：java.sql.SQLSyntaxErrorException：列引用“tblWorkOrderTask.id”无效，或者是无效表达式的一部分。对于带有 GROUP BY 的 SELECT 列表，被选择的列和表达式只能包含有效的分组表达式和有效的聚合表达式。

我不知道为什么错误是指“tblWorkOrderTask.id”，因为我没有这样的列，也没有要求该列。

如果我取出 group by 子句，它可以正常工作，但正如您所料，我会得到具有相同 WorkOrderID 的多个结果。我想按此列分组，然后统计结果。我尝试使用 SELECT DISTINCT，但随后我收到有关未选择的列的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:36:00.210

您正在选择 tblWorkOrderTask 表中的所有列。“id”列是该表中的第一列。您收到错误消息，因为您没有在选择列表中指定所有列。

此选择会起作用，但我不确定您需要从表中获取哪些信息。

```
SELECT id, intworkorderid
FROM tblWorkOrderTask 
group by id, intworkorderid 
```

[http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:41:54.497

Get rid of the GROUP BY clause -- if you're just trying to order the result, then use ORDER BY instead; but otherwise, you don't need either.

**EDIT**

As the error says, everythign in your SELECT list must be one of two things -- either 1) also listed in your GROUP BY list, or 2) an aggregated value. Here is a sample that will work:

```
SELECT intworkorderid, COUNT(*) 
FROM   "tblworkordertask" 
WHERE  "dbltimespenthours" > 0 
       AND "dtmdatecompleted" BETWEEN $P{DATE_FROM} AND $P{DATE_TO}
GROUP  BY "intworkorderid" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:08:17.800

是的 - 为了使用分组依据，您需要在选择行中具体说明。

因此，首先，决定要显示哪些字段。如果您想要所有这些，则将它们全部包含在内。

添加 COUNT() 函数以获取所选字段的计数后，您将需要添加 GROUP BY 子句。COUNT() 是一个 AGGREGATE 函数，类似于 SUM() 和 AVG()。

在 GROUP BY 子句中指定这么多字段有点违反直觉，有点痛苦，但这是必要的。FIRST GROUP BY 字段是最重要的，因为这通常是您所关心的。第一个字段可以是任何 SELECTed 字段，它不一定是第一个。

在 GROUP BY 中包含不是 COUNT() 等 AGGREGATE 函数的每个字段。

此外，如果您尝试对一组订单进行计数，您可能不需要或不需要 SELECT 中的所有字段。您可能只想指定对工作订单 ID 唯一的字段。

示例：如果您想获取这些字段的 COUNT，您将指定除 COUNT() 之外的所有 SELECTED 字段。

```
SELECT
    intWorkOrderID,
    COUNT(id),
    strDescription
FROM   tblworkordertask
WHERE  dbltimespenthours > 0 
       AND dtmdatecompleted BETWEEN $P{DATE_FROM} AND $P{DATE_TO}
GROUP BY
    intworkorderid,
    strDescription 
```

# c# - 从 ftp 地址中提取文本

> ID：15577452
> 
> 赞同：0
> 
> 时间：2013-03-22T18:31:19.767
> 
> 标签：c#, text, ftp, extract, lastindexof

我正在创建小型 FTP 客户端并遇到小问题，请您帮我解决一下。

所以我从 comboBox1.Text 中获取文本，可以说“/test/sql/it/”但是为了创建新目录，我需要提取“it”和“/test/sql/”“it”作为新目录名称和“/test/sql/”位置用于创建新文件夹。

对于第二部分，我可以使用：

```
string s = comboBox1.Text;
        s = s.Remove(s.LastIndexOf('/'));
        s = s.Remove(s.LastIndexOf('/'));
        s = s + "/";
        MessageBox.Show(s);
        //result "/test/sql/" 
```

但是如何获得第一部分“它”呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:38:11.667

试试这个，

```
string s = comboBox1.Text;
string path_s = Path.GetFileName( Path.GetDirectoryName( path ) ); 
```

对 GetDirectoryName 的内部调用将返回完整路径，而对 GetFileName() 的外部调用将返回最后一个路径组件 - 这将是文件夹名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:38:40.613

试试这个：

```
string path = "/test/sql/it/";
string[] directories = path.Split(new[] { '/' }, StringSplitOptions.RemoveEmptyEntries);
string lastDir = directories.Last(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:44:03.007

使用这个正则表达式：

```
.+(/.+/)$ 
```

这将`/it/`在第 1 组中为您提供。
如果您不想要斜杠，请改用此正则表达式：

```
.+/(.+)/$ 
```

# html - 如何告诉 IE 忽略以前收到的格式错误的 HTML 并呈现不同的 HTML？

> ID：15577463
> 
> 赞同：0
> 
> 时间：2013-03-22T18:31:55.393
> 
> 标签：html, jquery, asp.net-mvc-2

我们有一个使用 .Net 4.0 运行的 MVC.Net 2 应用程序。在某些情况下，我们视图中的嵌入代码可能会出错，将格式错误的 HTML 发送到浏览器。

如何告诉 Internet Explorer 关闭任何打开的属性和元素，以便它可以正确呈现错误消息？

为了捕获和记录嵌入代码中的错误，我将视图的 HTML 和嵌入代码包含在 try-catch 结构的 try 块中，并且只希望在记录错误后向用户显示一条简单的消息。

例子：

```
<%
try {
%>
<div id="div1">
    <label class="<%=embedded.code.that.may.err%>">mylabel</label>
    <div id="div2" class="data-style">
        <%=more.embedded.code.that.may.err%>
    </div>
</div>
<%
}
catch(Exception ex) {
    (new LogManager()).Save(ex);
%>
<div style="color:red;font-weight:bold;font-size:large;">
    Sorry, there was an error.
</div>
<%
}
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:20:52.930

不。运行容易出错的代码并将结果放入字符串变量中。把它放在 try-catch 块中。然后，如果没有错误，您可以写出整个 #div1 块，包括您已经评估的字符串，知道不会有错误。

# c# - 如何计算子字符串的出现次数？

> ID：15577464
> 
> 赞同：81
> 
> 时间：2013-03-22T18:31:56.927
> 
> 标签：c#, string

假设我有一个像这样的字符串：

```
MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com"; 
```

那么我想知道这个字符串中子字符串“OU=”出现了多少次。使用单个字符，也许有类似的东西：

```
int count = MyString.Split("OU=").Length - 1; 
```

但`Split`仅适用于`char`，不适用于`string`。

另外如何找到n次出现的位置？例如，`"OU="`字符串中 2nd 的位置？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-03-22T18:35:27.077

```
Regex.Matches(input, "OU=").Count 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-22T18:48:19.580

您可以使用以下命令找到所有事件及其位置`IndexOf`：

```
string MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com";
string stringToFind = "OU=";

List<int> positions = new List<int>();
int pos = 0;
while ((pos < MyString.Length) && (pos = MyString.IndexOf(stringToFind, pos)) != -1)
{
    positions.Add(pos);
    pos += stringToFind.Length();
}

Console.WriteLine("{0} occurrences", positions.Count);
foreach (var p in positions)
{
    Console.WriteLine(p);
} 
```

您可以从正则表达式中获得相同的结果：

```
var matches = Regex.Matches(MyString, "OU=");
Console.WriteLine("{0} occurrences", matches.Count);
foreach (var m in matches)
{
    Console.WriteLine(m.Index);
} 
```

主要区别：

*   正则表达式代码更短
*   Regex 代码分配一个集合和多个字符串。
*   可以编写 IndexOf 代码以立即输出位置，而无需创建集合。
*   很可能正则表达式代码在隔离时会更快，但如果多次使用，字符串分配的组合开销可能会导致垃圾收集器的负载更高。

如果我是在线编写这个，作为不经常使用的东西，我可能会使用正则表达式解决方案。如果我将它作为经常使用的东西放入库中，我可能会选择 IndexOf 解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-22T18:50:41.873

（剪辑模式：**开**）

您看起来正在解析 LDAP 查询！

你想解析它：

*   手动？转到“拆分和解析”
*   自动通过 Win32 调用？转到“通过 PInvoke 使用 Win32”

（剪辑模式：**关闭**）

**“拆分和解析”：**

```
var MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com";
var chunksAsKvps = MyString
    .Split(',')
    .Select(chunk => 
        { 
            var bits = chunk.Split('='); 
            return new KeyValuePair<string,string>(bits[0], bits[1]);
        });

var allOUs = chunksAsKvps
    .Where(kvp => kvp.Key.Equals("OU", StringComparison.OrdinalIgnoreCase)); 
```

**“通过 PInvoke 使用 Win32”：**

用法：

```
var parsedDn = Win32LDAP.ParseDN(str);    
var allOUs2 = parsedDn
    .Where(dn => dn.Key.Equals("OU", StringComparison.OrdinalIgnoreCase)); 
```

实用程序代码：

```
// I don't remember where I got this from, honestly...I *think* it came
// from another SO user long ago, but those details I've lost to history...
public class Win32LDAP
{
   #region Constants
   public const int ERROR_SUCCESS = 0;
   public const int ERROR_BUFFER_OVERFLOW = 111;
   #endregion Constants

   #region DN Parsing
   [DllImport("ntdsapi.dll", CharSet = CharSet.Unicode)]
   protected static extern int DsGetRdnW(
       ref IntPtr ppDN, 
       ref int pcDN, 
       out IntPtr ppKey, 
       out int pcKey, 
       out IntPtr ppVal, 
       out int pcVal
   );

   public static KeyValuePair<string, string> GetName(string distinguishedName)
   {
       IntPtr pDistinguishedName = Marshal.StringToHGlobalUni(distinguishedName);
       try
       {
           IntPtr pDN = pDistinguishedName, pKey, pVal;
           int cDN = distinguishedName.Length, cKey, cVal;

           int lastError = DsGetRdnW(ref pDN, ref cDN, out pKey, out cKey, out pVal, out cVal);

           if(lastError == ERROR_SUCCESS)
           {
               string key, value;

               if(cKey < 1)
               {
                   key = string.Empty;
               }
               else
               {
                   key = Marshal.PtrToStringUni(pKey, cKey);
               }

               if(cVal < 1)
               {
                   value = string.Empty;
               }
               else
               {
                   value = Marshal.PtrToStringUni(pVal, cVal);
               }

               return new KeyValuePair<string, string>(key, value);
           }
           else
           {
               throw new Win32Exception(lastError);
           }
       }
       finally
       {
           Marshal.FreeHGlobal(pDistinguishedName);
       }
   }

   public static IEnumerable<KeyValuePair<string, string>> ParseDN(string distinguishedName)
   {
       List<KeyValuePair<string, string>> components = new List<KeyValuePair<string, string>>();
       IntPtr pDistinguishedName = Marshal.StringToHGlobalUni(distinguishedName);
       try
       {
           IntPtr pDN = pDistinguishedName, pKey, pVal;
           int cDN = distinguishedName.Length, cKey, cVal;

           do
           {
               int lastError = DsGetRdnW(ref pDN, ref cDN, out pKey, out cKey, out pVal, out cVal);

               if(lastError == ERROR_SUCCESS)
               {
                   string key, value;

                   if(cKey < 0)
                   {
                       key = null;
                   }
                   else if(cKey == 0)
                   {
                       key = string.Empty;
                   }
                   else
                   {
                       key = Marshal.PtrToStringUni(pKey, cKey);
                   }

                   if(cVal < 0)
                   {
                       value = null;
                   }
                   else if(cVal == 0)
                   {
                       value = string.Empty;
                   }
                   else
                   {
                       value = Marshal.PtrToStringUni(pVal, cVal);
                   }

                   components.Add(new KeyValuePair<string, string>(key, value));

                   pDN = (IntPtr)(pDN.ToInt64() + UnicodeEncoding.CharSize); //skip over comma
                   cDN--;
               }
               else
               {
                   throw new Win32Exception(lastError);
               }
           } while(cDN > 0);

           return components;
       }
       finally
       {
           Marshal.FreeHGlobal(pDistinguishedName);
       }
   }

   [DllImport("ntdsapi.dll", CharSet = CharSet.Unicode)]
   protected static extern int DsQuoteRdnValueW(
       int cUnquotedRdnValueLength,
       string psUnquotedRdnValue,
       ref int pcQuotedRdnValueLength,
       IntPtr psQuotedRdnValue
   );

   public static string QuoteRDN(string rdn)
   {
       if (rdn == null) return null;

       int initialLength = rdn.Length;
       int quotedLength = 0;
       IntPtr pQuotedRDN = IntPtr.Zero;

       int lastError = DsQuoteRdnValueW(initialLength, rdn, ref quotedLength, pQuotedRDN);

       switch (lastError)
       {
           case ERROR_SUCCESS:
               {
                   return string.Empty;
               }
           case ERROR_BUFFER_OVERFLOW:
               {
                   break; //continue
               }
           default:
               {
                   throw new Win32Exception(lastError);
               }
       }

       pQuotedRDN = Marshal.AllocHGlobal(quotedLength * UnicodeEncoding.CharSize);

       try
       {
           lastError = DsQuoteRdnValueW(initialLength, rdn, ref quotedLength, pQuotedRDN);

           switch(lastError)
           {
               case ERROR_SUCCESS:
                   {
                       return Marshal.PtrToStringUni(pQuotedRDN, quotedLength);
                   }
               default:
                   {
                       throw new Win32Exception(lastError);
                   }
           }
       }
       finally
       {
           if(pQuotedRDN != IntPtr.Zero)
           {
               Marshal.FreeHGlobal(pQuotedRDN);
           }
       }
   }

   [DllImport("ntdsapi.dll", CharSet = CharSet.Unicode)]
   protected static extern int DsUnquoteRdnValueW(
       int cQuotedRdnValueLength,
       string psQuotedRdnValue,
       ref int pcUnquotedRdnValueLength,
       IntPtr psUnquotedRdnValue
   );

   public static string UnquoteRDN(string rdn)
   {
       if (rdn == null) return null;

       int initialLength = rdn.Length;
       int unquotedLength = 0;
       IntPtr pUnquotedRDN = IntPtr.Zero;

       int lastError = DsUnquoteRdnValueW(initialLength, rdn, ref unquotedLength, pUnquotedRDN);

       switch (lastError)
       {
           case ERROR_SUCCESS:
               {
                   return string.Empty;
               }
           case ERROR_BUFFER_OVERFLOW:
               {
                   break; //continue
               }
           default:
               {
                   throw new Win32Exception(lastError);
               }
       }

       pUnquotedRDN = Marshal.AllocHGlobal(unquotedLength * UnicodeEncoding.CharSize);

       try
       {
           lastError = DsUnquoteRdnValueW(initialLength, rdn, ref unquotedLength, pUnquotedRDN);

           switch(lastError)
           {
               case ERROR_SUCCESS:
                   {
                       return Marshal.PtrToStringUni(pUnquotedRDN, unquotedLength);
                   }
               default:
                   {
                       throw new Win32Exception(lastError);
                   }
           }
       }
       finally
       {
           if(pUnquotedRDN != IntPtr.Zero)
           {
               Marshal.FreeHGlobal(pUnquotedRDN);
           }
       }
   }
   #endregion DN Parsing
}

public class DNComponent
{
   public string Type { get; protected set; }
   public string EscapedValue { get; protected set; }
   public string UnescapedValue { get; protected set; }
   public string WholeComponent { get; protected set; }

   public DNComponent(string component, bool isEscaped)
   {
       string[] tokens = component.Split(new char[] { '=' }, 2);
       setup(tokens[0], tokens[1], isEscaped);
   }

   public DNComponent(string key, string value, bool isEscaped)
   {
       setup(key, value, isEscaped);
   }

   private void setup(string key, string value, bool isEscaped)
   {
       Type = key;

       if(isEscaped)
       {
           EscapedValue = value;
           UnescapedValue = Win32LDAP.UnquoteRDN(value);
       }
       else
       {
           EscapedValue = Win32LDAP.QuoteRDN(value);
           UnescapedValue = value;
       }

       WholeComponent = Type + "=" + EscapedValue;
   }

   public override bool Equals(object obj)
   {
       if (obj is DNComponent)
       {
           DNComponent dnObj = (DNComponent)obj;
           return dnObj.WholeComponent.Equals(this.WholeComponent, StringComparison.CurrentCultureIgnoreCase);
       }
       return base.Equals(obj);
   }

   public override int GetHashCode()
   {
       return WholeComponent.GetHashCode();
   }
}

public class DistinguishedName
{
   public DNComponent[] Components
   {
       get
       {
           return components.ToArray();
       }
   }

   private List<DNComponent> components;
   private string cachedDN;

   public DistinguishedName(string distinguishedName)
   {
       cachedDN = distinguishedName;
       components = new List<DNComponent>();
       foreach (KeyValuePair<string, string> kvp in Win32LDAP.ParseDN(distinguishedName))
       {
           components.Add(new DNComponent(kvp.Key, kvp.Value, true));
       }
   }

   public DistinguishedName(IEnumerable<DNComponent> dnComponents)
   {
       components = new List<DNComponent>(dnComponents);
       cachedDN = GetWholePath(",");
   }

   public bool Contains(DNComponent dnComponent)
   {
       return components.Contains(dnComponent);
   }

   public string GetDNSDomainName()
   {
       List<string> dcs = new List<string>();
       foreach (DNComponent dnc in components)
       {
           if(dnc.Type.Equals("DC", StringComparison.CurrentCultureIgnoreCase))
           {
               dcs.Add(dnc.UnescapedValue);
           }
       }
       return string.Join(".", dcs.ToArray());
   }

   public string GetDomainDN()
   {
       List<string> dcs = new List<string>();
       foreach (DNComponent dnc in components)
       {
           if(dnc.Type.Equals("DC", StringComparison.CurrentCultureIgnoreCase))
           {
               dcs.Add(dnc.WholeComponent);
           }
       }
       return string.Join(",", dcs.ToArray());
   }

   public string GetWholePath()
   {
       return GetWholePath(",");
   }

   public string GetWholePath(string separator)
   {
       List<string> parts = new List<string>();
       foreach (DNComponent component in components)
       {
           parts.Add(component.WholeComponent);
       }
       return string.Join(separator, parts.ToArray());
   }

   public DistinguishedName GetParent()
   {
       if(components.Count == 1)
       {
           return null;
       }
       List<DNComponent> tempList = new List<DNComponent>(components);
       tempList.RemoveAt(0);
       return new DistinguishedName(tempList);
   }

   public override bool Equals(object obj)
   {
       if(obj is DistinguishedName)
       {
           DistinguishedName objDN = (DistinguishedName)obj;
           if (this.Components.Length == objDN.Components.Length)
           {
               for (int i = 0; i < this.Components.Length; i++)
               {
                   if (!this.Components[i].Equals(objDN.Components[i]))
                   {
                       return false;
                   }
               }
               return true;
           }
           return false;
       }
       return base.Equals(obj);
   }

   public override int GetHashCode()
   {
       return cachedDN.GetHashCode();
   }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-14T13:43:16.900

这个扩展比正则表达式需要更少的资源。

```
public static int CountSubstring(this string text, string value)
{                  
    int count = 0, minIndex = text.IndexOf(value, 0);
    while (minIndex != -1)
    {
        minIndex = text.IndexOf(value, minIndex + value.Length);
        count++;
    }
    return count;
} 
```

用法：

```
MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com";
int count = MyString.CountSubstring("OU="); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-22T18:38:49.817

下面应该工作

```
 MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com";
  int count = Regex.Matches(MyString, "OU=").Count 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-22T18:36:06.803

```
int count = myString.Split(new []{','})
                    .Count(item => item.StartsWith(
                        "OU=", StringComparison.OrdinalIgnoreCase)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-22T19:22:01.683

以下是两个示例，说明如何获得所需的结果

```
var MyString = "OU=Level3,OU=Level2,OU=Level1,DC=domain,DC=com"; 
```

这个你会看到一个分隔的值列表，但它会让 DC 只是一个想法，表明使用 String 的拆分确实有效`

```
var split = MyString.Split(new string[] { "OU=", "," }, StringSplitOptions.RemoveEmptyEntries); 
```

这个将拆分并仅将 3 个项目返回到列表中，这样如果您不依赖计数，您可以直观地验证它返回 3 个级别的 `OU=``

```
var lstSplit = MyString.Split(new[] { ',' })
        .Where(splitItem => splitItem.StartsWith(
               "OU=", StringComparison.OrdinalIgnoreCase)).ToList(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-20T07:59:57.450

```
public static int CountOccurences(string needle, string haystack)
{
    return (haystack.Length - haystack.Replace(needle, "").Length) / needle.Length;
} 
```

将其与此处的其他答案（正则表达式之一和“IndexOf”之一）进行基准比较，工作得更快。

# database-design - Neo4j 节点权重

> ID：15577465
> 
> 赞同：0
> 
> 时间：2013-03-22T18:31:58.017
> 
> 标签：database-design, neo4j

给定一个电影数据库，是否可以根据某些演员的存在及其各自存在的电影分钟百分比来加权每个节点，只返回高于指定阈值的节点？请提供一个示例（一般）查询。

埃斯：

```
Threshold: 600 (entered dynamically, not present in DB)

Actor: Good Guy
Val: +12 (entered dynamically, not present in DB)

Actor: Bad Guy
Val: -2 (entered dynamically, not present in DB)

Movie: Nice Movie
Length: 120min
Good Guy presence: 70min
Bad Guy presence: 10min

Val: 120/70*100*(+12) + 120/10*100*(-2)
If Val > 600 then return the node 
```

另外，Neo4j 是适合这种操作的数据库，还是 Mysql 更适合这种用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:55:28.667

对于这类事情，Neo 是一个不错的选择。查看他们构建的 cineasts 示例图：http: [//www.neo4j.org/develop/example_data](http://www.neo4j.org/develop/example_data)
[http://static.springsource.org/spring-data/neo4j/docs/dev/reference/pdf/spring-data-neo4j -tutorial.pdf](http://static.springsource.org/spring-data/neo4j/docs/dev/reference/pdf/spring-data-neo4j-tutorial.pdf)

您可能希望将权重作为演员和电影之间关系的属性，而不是节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:03:44.427

这更像是一个设计问题，而不是您选择的数据库之一，但是是的，neo4j 将是一个很好的候选者，因为它是一个属性图，您可以将诸如权重之类的东西存储为节点或关系的属性。

话虽如此，您可能希望将权重放在关系而不是节点上，这样您就可以轻松搜索演员/女演员和电影，作为一种聚合。

# asp.net-mvc - 在 QA 或 Prod 期间更改 asp.net web.config 中的 httptransport 标记

> ID：15577467
> 
> 赞同：1
> 
> 时间：2013-03-22T18:32:00.733
> 
> 标签：asp.net-mvc, asp.net-mvc-4

开发上的 Web.config 调用另一个远程开发服务器上的 Web 服务，因此绑定看起来像这样

```
<binding name="XXXSoap12">
    <httpsTransport manualAddressing="false" maxBufferPoolSize="524288"
        maxReceivedMessageSize="1048576" allowCookies="false" 
        authenticationScheme="Anonymous"
        bypassProxyOnLocal="false" decompressionEnabled="true" 
        hostNameComparisonMode="StrongWildcard"
        keepAliveEnabled="true" maxBufferSize="1048576" 
        proxyAuthenticationScheme="Anonymous"
        realm="" transferMode="Buffered" 
        unsafeConnectionNtlmAuthentication="false"
        useDefaultWebProxy="true" />
</binding> 
```

我想将`httpTransport`协议/标签更改`httpsTransport`为 QA、STG 和 PROD 的协议。

我如何为此编写转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:22:34.520

在 Web.Release.config（或 Web.QA.config、Web.STG.config 或其他转换）中：

```
<binding name="XXXSoap12">

    <httpTransport xdt:Transform="Remove" />

    <httpsTransport xdt:Transform="Insert"
        manualAddressing="false" maxBufferPoolSize="524288"
        maxReceivedMessageSize="1048576" allowCookies="false" 
        authenticationScheme="Anonymous"
        bypassProxyOnLocal="false" decompressionEnabled="true"  
        hostNameComparisonMode="StrongWildcard"
        keepAliveEnabled="true" maxBufferSize="1048576" 
        proxyAuthenticationScheme="Anonymous"
        realm="" transferMode="Buffered" 
        unsafeConnectionNtlmAuthentication="false"
        useDefaultWebProxy="true" />

</binding> 
```

您还可以[阅读本文以了解有关配置转换的更多信息](http://go.microsoft.com/fwlink/?LinkId=125889)。

# pyside - exe 文件未运行（cx_Freeze + PySide）

> ID：15577469
> 
> 赞同：1
> 
> 时间：2013-03-22T18:32:01.550
> 
> 标签：pyside, cx-freeze

使用 cx_freeze 冻结我的 Python 程序后，我尝试运行创建的 exe 文件，但它没有运行。

电话簿.py

```
import  sys
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtUiTools import *

class PhoneBook:
  i=0;
  def __init__(self):
        loader = QUiLoader();       
        file = QFile("PhoneBook.ui");   
        file.open(QFile.ReadOnly);  
        self.ui = loader.load(file);    
        file.close();
        self.ui.setWindowIcon(QIcon('web.png'));
        self.ui.pushButton.clicked.connect(self.add);
        self.ui.pushButton_2.clicked.connect(self.load);

  def __del__ ( self ):
        self.ui = None;

  def add(self):
        loader1 = QUiLoader();      
        file1 = QFile("Add.ui");    
        file1.open(QFile.ReadOnly); 
        self.ui2 = loader1.load(file1); 
        file1.close();          
        self.ui2.show();
        self.ui2.pushButton.clicked.connect(self.get);

  def show(self):
        self.ui.show();

  def clear1(self):
        self.ui.lineEdit.clear();

  def get(self):

        name1 = self.ui2.lineEdit.text();
        name2 = self.ui2.lineEdit_2.text();

        f = open('data','a' );
        f.write(name1);
        f.write('#');
        f.write(name2);
        f.write('\n');
        f.close();
        self.load();
        self.ui2.close();

  def load(self):
        f = open('data', 'r');
        for i in range(0, 10):
            string = f.readline();
            l=len(string);
            print(string);
            print(l);
            for  c in range(0, l-1):
                if string[c]=="#":
                   break;
                print(c);       
                name1=string[0:c];
                name2=string[c+1:l-1]; 
                self.ui.tableWidget.setItem(i, 0, QTableWidgetItem(name1));
                self.ui.tableWidget.setItem(i, 1, QTableWidgetItem(name2));
                i =i+1;

  def sort(self):
        f=open('data', 'r');
        f.readlines().sort();

  if __name__ == '__main__':

        app = QApplication(sys.argv)
        app.setApplicationName('PhoneBook Application')

        w = PhoneBook();
        w.show();

        QObject.connect(app, SIGNAL('lastWindowClosed()'), app,SLOT('quit()'))

        sys.exit(app.exec_()) 
```

安装程序.py

```
import sys
from cx_Freeze import setup,Executable

includefiles = ['Add.ui', 'PhoneBook.ui', 'data', 'web.png']
includes = ["re"]
base = None
if sys.platform == "win32":
   base = "Win32GUI"
setup(name="PhoneBook", version="3.0",description="Test",options = {'build_exe':  {'include_files':includefiles, 'includes' : includes} 
```

是因为我使用的是 QUILoader 吗？然而，在直接执行 Python 代码时，它会显示正确的结果。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T21:27:21.720

从文档看来，您必须包括 atexit

> cxfreeze yourapp.py --target-dir dist --base-name Win32GUI --include-modules atexit,PySide.QtNetwork --icon yourapptaskgroup.ico

该站点特别提到，如果您不包含 atextit ，则安装程序将无法工作

> “atexit”必须包含在--include-modules中，否则生成的exe会失败。

[链接到知识库文章](http://qt-project.org/wiki/Packaging_PySide_applications_on_Windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-02T00:05:33.097

另一个错误原因是 cx-freeze 使用了来自 PyQt 的一些 dll。

而且 pyside 和 pyqt 中的 dll 不一样，所以如果你安装了 pyqt，我建议将**PyQt4**添加到排除项中

```
excludes=['PyQt4', 'tcl', 'tk', 'ttk', 'tkinter', 'Tkconstants', 'Tkinter', "collections.sys", "collections._weakref"] 
```

# delphi - 删除记录后SQLite3和刷新？

> ID：15577470
> 
> 赞同：0
> 
> 时间：2013-03-22T18:32:08.330
> 
> 标签：delphi, sqlite, delphi-5, zeos

两个小时的搜索和阅读，我离得不远了。

使用 D5、Zeos v6 SQLite 我有一个表格，其中的行显示在 DBGrid 中。一切都好。

我用

```
DELETE FROM tblOne WHERE Acct="FirstEntry" 
```

它会删除唯一匹配的行。一切都很好 - 但 DBGrid 显示保持不变，仍然显示刚刚删除的行。

我读到关闭和打开分配给 tblOne 的 TTable 将刷新显示（tblOne.Refresh 也会如此），这对这个测试很好，但有时我不知道它是哪个表，我所拥有的只是表名。我在 SQLite 中找不到“OPEN”、“CLOSE”或“REFRESH”命令。

那么，如何刷新 DBGird 显示以显示记录已被删除？

（编辑）我知道我可以使用

```
dbgrid1.DataSource.DataSet.Refresh; 
```

但是，如何使用 SQL 语句刷新显示？还是不可能？（编辑）

一小行代码将有助于描述该过程。

谢谢

# php - 在本地机器上使用 phpMyAdmin 上传 MySQL 数据库的问题

> ID：15577472
> 
> 赞同：1
> 
> 时间：2013-03-22T18:32:20.927
> 
> 标签：php, mysql, phpmyadmin

我能够毫无问题地远程连接到我的服务器上的 MySQL 数据库，并且可以很好地查询和截断表。但是，我**不能**上传（通过导入）数据库文件。

```
upload_max_filesize = 40M
post_max_size = 40M 
```

我还将 php.ini 文件上传到我的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:34:33.873

如果您可以毫无问题地远程连接，则不要使用 phpmyadmin 进行恢复。使用另一个不使用 php 的远程工具。

试着去`my.cnf in /etc/mysqlan`d 它说的地方

```
bind-address = 127.0.0.1 
```

将其更改为您的服务器的 IP 地址。重新启动 mySQL。这样，您应该能够使用诸如 mySQL Workbench（在他们的网站上）之类的东西进行远程连接，并上传 .sql

我建议之后将其更改回来以避免其他问题。

还要确保您的用户可以从任何地方 (%) 或至少您的家庭 IP（无论您尝试从哪里连接）访问，并且具有足够的权限来恢复数据库。（尽管如果您创建一个具有 % 访问权限的 root 用户，有时您将无法再使用 phpMyAdmin。）

使用 FTP/SSH 将文件加载到您的服务器，并使用 SSH 使用 mysql 命令恢复数据库。

# elasticsearch - Elasticsearch 中的组合非嵌套和嵌套查询

> ID：15577474
> 
> 赞同：35
> 
> 时间：2013-03-22T18:32:27.653
> 
> 标签：elasticsearch

我想使用 ES 进行图书搜索。所以我决定将作者姓名和标题（作为嵌套文档）放入索引中，如下所示：

```
curl -XPUT localhost:9200/library/search_books/1 -d'{
  "author": "one",
  "books": [
    {
      "title": "two",
    },
    {
      "title": "three",
    }
  ]
}' 
```

我没有得到的是：我需要如何构造搜索查询以在搜索“一二”时仅查找第二本书，而在搜索“二三”时一无所获，而在搜索“一”时查找所有书籍？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-22T23:47:04.037

也许是这样的？

```
{
  "query":{
    "bool":{
      "must":[
        {
          "term":{
            "author":"one"
          }
        },
        {
          "nested":{
            "path":"books",
            "query":{
              "term":{
                "books.title":"two"
              }
            }
          }
        }
      ]
    }
  }
} 
```

该查询基本上说文档必须具有`author: one`and `books.title: two`。您可以轻松地重新配置该查询。例如，如果您只想搜索作者，请删除嵌套部分。如果您想要另一本书，请更改嵌套等。

这假设您使用的是实际的[嵌套文档](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)，而不是内部对象。对于内部对象，您可以只使用完全限定的路径，而无需特殊的嵌套查询。

**Edit1**：您也许可以在索引时通过巧妙的提升来实现这一点，尽管它只是一个近似的解决方案。如果“作者”被大幅提升，它的排序将高于仅匹配标题，即使标题与查询的两个部分都匹配。然后，您可以使用 min_score 截止值来防止显示。

它只是一个松散的近似值，因为有些可能会通过。它也可能对“正确”匹配之间的一般排序产生奇怪的影响。

**Edit2：** 使用 query_string 更新以公开“单一输入”选项：

```
 {
  "query":{
    "query_string" : {
      "query" : "+author:one +books.title:two"
    }
  }
} 
```

假设您使用的是默认的“内部对象”。如果您有真正的嵌套类型，则 query_string 会变得非常复杂：

```
 {
  "query":{
    "query_string" : {
      "query" : "+author:one +BlockJoinQuery (filtered(books.title:two)->cache(_type:__books))"
    }
  }
} 
```

**巨大的免责声明**我没有测试这两个查询字符串中的任何一个，所以它们可能并不完全正确。但它们表明 Lucene 语法并不太友好。

* * *

## Edit3 - 这是我最好的主意：

仔细考虑之后，您最好的解决方案可能是索引一个连接作者和书名的特殊字段。像这样的东西：

```
{
  "author": "one",
  "books": [
    {
      "title": "two",
    },
    {
      "title": "three",
    }
  ],
  "author_book": [ "one two", "one three" ]
} 
```

然后在搜索时，您可以对 Term 进行精确匹配`author_book`：

```
{
  "query" : {
    "term" : {
      "author_book" : "one two"
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-07T14:51:16.763

我在这篇文章中找到了答案：[Fun With Elasticsearch's Children and Nested Documents](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)。嵌套文档是关键。映射：

```
{
  "book":{
    "properties": {
      "tags": { "type": "multi_field",
        "fields": {
            "tags": { "type": "string", "store":"yes", "index": "analyzed" },
            "facet": { "type": "string", "store":"yes", "index": "not_analyzed" }
        }
      },
      "editions": { "type": "nested", 
        "properties": {
          "title_author": { "type": "string", "store": "yes", "index": "analyzed" },
          "title": { "type": "string", "store": "yes", "index": "analyzed" }
        }
      }
    }
  }
} 
```

文件：

```
"tags": ["novel", "crime"],
  "editions": [
    {
      "title": "two",
      "title_author": "two one"
    },
    {
      "title": "three",
      "title_author": "three one"
    }
  ] 
```

现在我可以像这样搜索：

```
{

  "query": {
    "bool": {
      "should": [
        {
          "nested": {
            "path": "editions",
            "query": {
              "match": {
                "editions.title_author": {
                  "query": "one two",
                  "operator": "and"
                }
              }
            }
          }
        }
      ]
    }
  }
} 
```

如果搜索“二三”，我将找不到匹配项。我会得到一个“一二”或“一三”。在 1.1.0 版本中，将有另一个带有 multi_match 查询的选项和 cross_fields 选项，它允许不重复标题，只将作者姓名添加到每个嵌套文档中。这将使索引更小。

# highcharts - Highcharts导出错误？

> ID：15577476
> 
> 赞同：0
> 
> 时间：2013-03-22T18:32:34.540
> 
> 标签：highcharts

我刚刚将我的网站升级到新的 3.0 版本。

我网站上显示的图表为 990x548 像素。

但是当我选择导出时，无论是png/jpg/pdf/svg，输出都是1020x930pixels。

这是一个已知的错误，还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:41:11.283

哟可以通过chartOptions参数定义宽度/高度导出的图像。

[http://api.highcharts.com/highcharts#exporting.chartOptions](http://api.highcharts.com/highcharts#exporting.chartOptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:32:38.990

exportButton 和 printButton 现在已被移除，并替换为通用 contextButton。因此，您可以将其用于下拉菜单：[http](http://api.highcharts.com/highcharts#exporting.buttons) ://api.highcharts.com/highcharts#exporting.buttons 。

另请参阅[http://docs.highcharts.com/#export-module上的新文章](http://docs.highcharts.com/#export-module)

请参考我的问题

[Highcharts 3.0 版本中导出选项的变化？](https://stackoverflow.com/questions/15609088/highcharts-3-0-version-changes-in-exporting-options/15611205#15611205)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T14:14:51.163

问题是我没有在 chartContainer div 上设置明确的宽度。我只是让它流向 100% 的父元素。一旦我在该 div 上设置了明确的宽度，导出大小选项就起作用了。在此之前，无论我设置了什么文档选项，图表都会被压扁。

# c++ - 在模板类实现中分离 .h 和 .cpp 文件

> ID：15577478
> 
> 赞同：8
> 
> 时间：2013-03-22T18:32:47.723
> 
> 标签：c++, templates

我正在尝试编写一个模板类，它可以根据`<class>`我通过的方式形成类。问题是我不能在同一个`.h`文件中声明和定义。在我的项目中，UTF 工具只能处理`.cpp`文件（用于代码覆盖等）。我在博客中看到他们说“添加`.cpp`而不是`.h`”。这是可取的吗？

`Template.h`

```
#ifndef TEMPLATE_H_
#define TEMPLATE_H_

template<class T>
class Template
{
public:
    T Add(T a,T b);
};

#endif /* TEMPLATE_H_ */ 
```

`Template.cpp`

```
#include "Template.h"

template<class T>
T Template<T>::Add(T a, T b)
{
    return a+b;
} 
```

`Main.cpp`

```
#include "Template.cpp" //Is this a good practise? 
#include <iostream>

int main(int argc, char **argv) {
    Template<int> obj;
    std::cout<<obj.Add(3,4)<<std::endl;
} 
```

如果这是不可取的，那么我该如何解决这个问题？`export`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T18:41:59.073

Compiler needs to have an access to the implementation of the methods in order to instantiate the template class, thus the most common practice is either to ***include the definitions of a template in the header file that declares that template*** or to ***define them in header files***.

See [Why can templates only be implemented in the header file?](https://stackoverflow.com/q/495021/1168156)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T18:38:39.913

必须在使用它们的每个翻译单元中定义模板。这意味着它们必须在头文件中定义。如果您的工具坚持扩展名`.cpp`，您也可以提供它，就像您做的那样。

在这种情况下，您甚至不需要将伪标题拆分为`.h`and 。`.cpp`你可以把它全部放在那个`.cpp`里面`#include`。

# ruby-on-rails - 使用 Rails + Mongoid SQL 到 Mongodb

> ID：15577479
> 
> 赞同：0
> 
> 时间：2013-03-22T18:32:51.160
> 
> 标签：ruby-on-rails, mongodb, mongoid, nosql

我在 Mongoid 中有以下文档结构：

```
class Post
    include Mongoid::Document
    field "title", type: String
    field "body", type: String
    field "category_name", type: String
    field "category_id", type: Integer
end 
```

我需要选择所有现有类别的帖子进行搜索。如果这是 SQL，我会：

```
SELECT distinct category_name, category_id FROM posts 
```

我将如何在 Mongoid 的 SQL 查询中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:30:10.323

如果您希望模型仅返回 category_name 和 category_id 字段，请使用“only”。`Post.all.only(:category_name, :category_id)`将返回数据库的所有帖子，但仅返回这 2 个属性的值，所有其他属性将为 nil。

但是在 Mongoid 3.1 上你可以这样做`Post.distinct(:category_name)`，它会以数组的形式返回帖子的不同类别名称的列表。在旧版本的 mongoid 上，您`Post.all.distinct(:category_name)`可以获得相同的回报。

# ruby-on-rails - 渲染问题 来自 Wordpress RSS2 的标签

> ID：15577480
> 
> 赞同：1
> 
> 时间：2013-03-22T18:32:51.707
> 
> 标签：ruby-on-rails, xml, wordpress

我在从我的 Wordpress RSS 提要中呈现 XML 标记的内容时遇到问题。这是我的代码，用于显示我从控制器中提取的最后 2 个帖子：

```
<h3>Check out our latest blog posts:</h3>
    <% unless @latest_blog_posts.nil? %>
      <% @latest_blog_posts.each do |post| %>
      <% if nil != post && post.respond_to?(:pubDate) %>
        <h4><%= link_to post.title, post.link, :target => "_blank" %>
        (by: <%= post.dc:creator %> - <%= time_ago_in_words(post.pubDate) %> ago)</h4>
        <%= (post.description).slice!(0, 195).html_safe %>[...]
      <% end %>
      <% end %>
    <% else %>
      <p>Woops, looks like there's no posts to show. Sorry about that.</p>
    <% end %> 
```

由于标签中的“：”，标签会出错。我尝试使用另一个变量并在字符串中呈现包含：

```
article_author = '#{post.dc:creator}' 
```

这会在视图中呈现“#{post.dc:creator}”（我认为它会但我还是试了一下）。有人对此有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:42:57.713

不妨回答我自己的问题，因为它是相对 Google 搜索的第一个结果。希望它可以帮助将来的人。xml 节点被解析为：

dc_creator

```
<%= post.dc_creator %> 
```

感谢所有检查我的问题并试图提供帮助的人。

# php - 将数据从 Javascript 发送到远程 php

> ID：15577481
> 
> 赞同：0
> 
> 时间：2013-03-22T18:32:53.067
> 
> 标签：php, javascript

我正在修改一个脚本来为我的网站构建一个 firefox 扩展。原始脚本（ chrome 扩展名）将数据存储到本地 websql 数据库中。我希望它使用这种格式将三个变量发送到 php 文件 [http://mysite.com/receiver.php?id=href&&title=hostname&&article=article&&article=title](http://mysite.com/receiver.php?id=href&&title=hostname&&article=article&&article=title)

Js中正常发送数据的部分如下

```
 // post credentials to background
                chrome.extension.sendRequest({
                    action: 'queryDatabase',
                    crud: 'create',
                    record: [
                        window.location.href,
                        window.location.hostname,
                        title,
                        article
                    ]
                }); 
```

如果有人能引导我修改这段代码，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:45:52.373

您可以使用 jQuery 的 ajax() 方法来完成此操作：

```
// post credentials to http://mysite.com/receiver.php
jQuery.ajax({
  url: "http://mysite.com/receiver.php",
  type: 'GET',
  data: {
    id: "href",
    title: "hostname",
    article: "article"
  }
}).success(function ( data ) {
  alert("completed successfully");
}).error(function ( data ) {
  alert("there was an error");
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:02:45.093

图像/PHP 解决方案的示例。如果您需要知道返回的内容，列出的 jQuery Ajax 解决方案很好（我在[http://jsErrLog.appspot.com](http://jsErrLog.appspot.com)之类的东西上使用它，这是一个很好的解决方案），如果您只是想抛出一些东西，图像很好围栏并继续前进。两者都是非阻塞的

在 HTML 页面中，Javascript 需要触发请求图像的调用：

```
<script>
    databaseImage = new Image(); 
    databaseImage.src = "http://mysite.com/receiver.php?id=href&&title=hostname&&article=article&&article=title";
</script> 
```

并且它调用的 PHP 页面在存储数据后需要返回一个图像（比发回不适当的东西更干净） -

```
<? 
    $im = file_get_contents('{path to your 1px .gif}'); 
    header('content-type: image/gif'); 
    echo $im; 
?> 
```

# verilog - 如何使用verilog生成正弦波

> ID：15577482
> 
> 赞同：0
> 
> 时间：2013-03-22T18:32:54.913
> 
> 标签：verilog, fpga, xilinx

我正在 FPGA 上制作“任意波形发生器”。目前，我正在使用 FPGA [使用 verilog] 生成“sinc”波。

对于固定频率，我可以在 ROM 上使用 LUT 制作 sinc，但我需要提供选项以制作用户定义频率的 sinc。

所以，有什么好主意怎么做吗？？？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:03:20.597

您仍然可以将 LUT 用于可变频率`sin(x)`功能。

只需生成一个正弦波单个周期的 1000 左右（取决于您所需的分辨率）条目的 LUT。然后，您根据所需的频率决定每个时钟周期要跳过多少条目。

例如，如果您的时钟为 1MHz，而所需的输出频率为 1KHz，那么您每个时钟都进入下一个 LUT 条目（在 1000 个时钟周期内完成该周期）。如果所需的输出频率为 10KHz，则每个周期在 LUT 中跳转 10 个条目。（在 100 个时钟周期内完成周期）

不过，要获得 sinc `sin(x)/x`，我认为您需要实现除法电路，因为我想不出任何解决方法。

# iphone - 只有在视图出现后才自动开始计算

> ID：15577484
> 
> 赞同：1
> 
> 时间：2013-03-22T18:33:04.523
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, viewdidload

我有一个视图控制器，它只显示计算过程中的进度。我把方法调用

`viewDidLoad`但问题是视图只有在计算完成后才会出现！如何

视图出现在屏幕上后，我可以自动启动计算吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:41:21.270

You may use [GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html). Here is [Raywenderlich tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        //Calculations
        dispatch_async(dispatch_get_main_queue(), ^{
            //Update UI must be here
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:36:58.897

`viewDidLoad:`加载视图时触发。这与显示视图时不同。

尝试在`- (void)viewDidAppear:(BOOL)animated`回调方法 中开始计算`UIViewController`。

* * *

如果这些计算需要一段时间，请考虑在后台线程上运行它们。这将防止 UI 在计算运行时锁定。这不仅允许视图显示，而且可以在用户等待时与之交互。

```
[self performSelectorInBackground:@selector(doCalc)
                       withObject:nil]; 
```

通过该`doCalc`方法，您将使用结果回调主线程。

```
[self performSelectorOnMainThread:@selector(didCalcValue:)
                       withObject:result
                    waitUntilDone:NO]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:04:24.190

正如其他人正确指出`viewDidAppear`的那样，让您知道视图何时出现在屏幕上。`super`*另外，使用这些事件方法时不要忘记调用。

**例子：**

```
// Tells the view controller that its view was added to the view hierarchy.

- (void)viewDidAppear:(BOOL)animated
{
  // makes sure it's also called on the superclass
  // because your superclass may have it's own code
  // needing to be called here
  [super viewDidAppear:animated];

  // do your calculations here

} 
```

**常用的 UIViewController 事件：**

```
– (void)viewDidLoad 
```

当您的视图首次加载到内存中时调用。

```
– (void)viewDidAppear: 
```

在您的视图出现在屏幕上后调用。

```
– (void)viewWillDisappear: 
```

在您的视图从屏幕上消失之前调用。

[请参阅UIViewController 类参考页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)上的完整列表。

# wcf - 从 WCF 操作传递业务对象（服务层到数据层）

> ID：15577486
> 
> 赞同：2
> 
> 时间：2013-03-22T18:33:10.947
> 
> 标签：wcf, datacontract, business-logic-layer

我正在构建 WCF 服务。

数据契约对象将与业务对象完全相同。

我应该在我的 WCF 服务中创建数据契约还是引用我的 BO 层并在我的 WCF 操作中使用这些业务对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:39:31.607

我会将它们分成不同的项目：

*   Foo.DataContracts
*   Foo.BusinessModels
*   Foo.Services

参考服务中的业务模型和数据合同。[然后使用AutoMapper](https://github.com/AutoMapper/AutoMapper)将模型类映射到契约类，反之亦然。然后，您可以在不破坏 WCF 客户端的情况下更改模型，因为它们依赖于合同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:54:43.163

我认为在@valpolushkin 的同一行中，尽管我直到现在还没有使用过 AutoMapper。

[在WCF 消息和数据协定、DTO、域模型和共享程序](https://stackoverflow.com/questions/11681475/wcf-message-data-contract-dto-domain-model-and-shared-assemblies/15828836#15828836)集中查看我的答案了解使用业务实体作为数据合同可能导致重大更改的示例。

我认为，将业务对象用作数据合同是一种非常糟糕的做法。服务需要是自治的。该服务可能被拥有/没有获得 Lax 版本控制的客户端使用。

请参阅[服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)。

> 很容易错误地认为添加新成员不会破坏现有客户。如果您不确定所有客户端都可以处理宽松的版本控制，建议使用严格的版本控制指南并将数据合约视为不可变的。

另外，请参阅[MSDN - 服务层指南](http://msdn.microsoft.com/en-us/library/ee658090.aspx)

> 设计在业务实体和数据合同之间转换的转换对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:46:44.920

如果您的业务对象可以被序列化，而不会将序列化的关注点与业务逻辑混淆，那么我会说去吧。

不过，更好的选择是将您的业务逻辑层置于服务层之后，并从您的视图可以绑定到的服务中公开简单的 DTO。

[我用WCF RIA 服务](http://msdn.microsoft.com/en-us/magazine/ee336308.aspx)写了一篇关于这种方法的文章，它可以很好地转换为标准的 WCF Web 服务

# error-handling - 如果超过任务时间限制，Celery 可以发邮件给我吗？

> ID：15577487
> 
> 赞同：4
> 
> 时间：2013-03-22T18:33:11.510
> 
> 标签：error-handling, timeout, celery

所以我有一个芹菜设置，使用 RabbitMQ 作为代理，amqp 作为结果后端。

有时，我的任务会很长，因为我误解了所需的超时时间，而正如预期的那样，Celery 会杀死运行任务的工作人员。

问题是因为这是一个 celery 问题而不是任务问题，所以我应该从任务中向我发送电子邮件的错误处理将无法运行，并且我不会收到有关失败的消息。

当 Celery 因与 Celery 相关的错误而终止任务时，有没有办法让 Celery 自己做一些错误通知？就像`on_timeout()`我可以在任务中创建的功能一样？我真的不想让调用进程进行错误处理，因为超时已经是几个小时了，进程运行了大约 30 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T06:39:13.400

看起来这个问题来自不久前，您可能已经解决了这个问题，但如果没有，您是否检查了[CELERY_SEND_TASK_ERROR_EMAILS](http://docs.celeryproject.org/en/master/configuration.html#error-e-mails)配置设置？

# c# - 尝试使用 ExecuteScalar 并得到“Specified cast is not valid”错误

> ID：15577488
> 
> 赞同：9
> 
> 时间：2013-03-22T18:33:14.350
> 
> 标签：c#, sql, winforms

我正在尝试通过使用产品名称来获取产品价格。以下是我正在使用的功能。

```
public int GetProductPrice(string ProductName)
{
    cnn.Open();
    SqlCommand cmd = new SqlCommand("SELECT ProductPrice FROM Products WHERE ProductName ='" + ProductName + "'", cnn);
    int price = (int)cmd.ExecuteScalar();
    return price;
} 
```

现在我不断收到这个错误`Specified cast is not valid`，我不知道为什么。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T18:35:49.457

首先，您应该使用参数化 SQL，而不是将参数直接放入 SQL 中。此外，您应该在完成后使用`using`语句关闭命令和连接。哦，`SqlConnection`为每个操作创建一个新的。所以像：

```
public int GetProductPrice(string productName)
{
    // Quite possibly extract the connection creation into a separate method
    // to call here.
    using (var conn = new SqlConnection(...))
    {
        conn.Open();
        using (var command = new SqlCommand(
            "SELECT ProductPrice FROM Products WHERE ProductName = @ProductName",
            conn))
        {
            command.AddParameter("@ProductName", SqlDbType.VarChar)
                   .Value = productName;
            object price = command.ExecuteScalar();
            // And you'd do the casting here
        }
    }
} 
```

接下来，我们不知道`ProductPrice`字段的类型。可能是您收到了`long`退货，也可能是`decimal`. 找出最简单的方法就是使用：

```
object tmp = cmd.ExecuteScalar(); 
```

...然后查看调试器。还要查看数据库中字段的类型——这应该能真正告诉你会发生什么。查看[`SqlDbType`](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx)两者之间映射的枚举。

# ssrs-2008 - SSRS 动态设置表位置/位置

> ID：15577489
> 
> 赞同：5
> 
> 时间：2013-03-22T18:33:19.443
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我在报表生成器/设计模式中看到，有一个 Position 和 Location 属性，可让您设置表格应出现的距离顶部或左侧多远。

我的问题是，有没有办法在同一位置设置 2 个或更多表格（即页面顶部从顶部开始 0，从左侧开始 0）而不在设计模式/报告生成器中将它们堆叠在一起？

有没有办法动态设置该位置属性？

例如，这是报表生成器中的报表草图：

```
top of page
---------------------------
Table 1 (hide)            |
                          |
                          |
                          |
Table 2 (show at top)     |
                          |
                          |
                          |
                          |
                          |
                          |
                          |
--------------------------- 
```

页面底部

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:43:45.747

Tablix 成员的位置属性不基于表达式。但是，您可以根据参数在报表中显示/隐藏对象，这会影响其他报表项的位置。一个简单的例子：

带有**Header**、两个**Tablix**成员和一个参数的报告`HideTable`：

![在此处输入图像描述](../Images/6ed2d010a00bdfcdae3db67da3107ebb.png)

`Hidden`顶部**Tablix**的属性设置为`=Parameters!HideTable.Value`，即参数切换是否显示。使用此设置和布局，当第一个**Tablix**隐藏时，SSRS 会自动将第二个**Tablix移动到报表****正文**的顶部。见下文：

 **![在此处输入图像描述](../Images/d0be6bb4e61527b5026fd9ba81f62c0a.png)

![在此处输入图像描述](../Images/fff45e0523e27f70601a5a7f254f86b4.png)

所以它不是一个动态的位置，但是通过使用其他功能，您可以实现与上述相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T08:34:01.507

除了 Ian Preston 提到的答案，如果表 1 没有数据，那么我们需要写如下：

```
=Parameters!HideTable.Value or IIF(countrows("Tablix1")<1,True,False) 
```

这里，**Tablix1**是第一个 tablix 名称，因此在 Table1 中数据不可用的情况下不会出现标题**

# javascript - FontAwesome + IE7 + 动态加载内容 = 痛苦

> ID：15577490
> 
> 赞同：0
> 
> 时间：2013-03-22T18:33:20.053
> 
> 标签：javascript, internet-explorer-7, font-awesome

我正在尝试将 FontAwesome 用于我开发的 jQuery 灯箱插件上的一些控制图标。对于我的生活，我无法让图标在 IE7 中显示。我按照此处的建议在灯箱打开后[重新加载 IE7 样式表。](https://github.com/FortAwesome/Font-Awesome/issues/38#issuecomment-6621377)但是，图标应该在哪里，我只看到它们的 UTF 数字（例如`0xf024;`）。就好像输出已经以某种方式“转义”了。任何帮助或想法将不胜感激。

**更新：** 我刚刚发现这不仅仅发生在动态加载的内容上。我在 HTML 中加载的任何图标上都看到了同样的情况。

**更新2：** 我认为问题可能与子集有关。我使用的[是 font-awesome 的一个子集](http://www.icnfnt.com/#/)，当我尝试加载完整的包时它工作了。现在，我必须看看破坏它的子集和完整包之间有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:26:33.233

如上面的更新所示，问题出在字体的子集上。子集的自定义 IE7 样式表有一些错误。问题来自被引用的字符 this`0xf023;`而不是 like this `&#xf023;`。一旦我进行了更正，一切都按预期工作。

# c++ - C++ 中的模板变量

> ID：15577491
> 
> 赞同：3
> 
> 时间：2013-03-22T18:33:21.023
> 
> 标签：c++, templates

我有这个代码：

```
template <class T>
T GetMax (T a, T b) {
  return (a>b?a:b);
}

int main () {
  int i=51, j=26, k;
  long l=100, m=15, n;
  k=GetMax(i,j);
  n=GetMax(l,m);
  cout << k << endl;
  cout << n << endl;
  return 0;
} 
```

如何更改变量 k 和 n 的数据类型，以使它们足够动态以接受返回值。如果返回值是双精度值，k 和 n 将自动为双精度值，因此我无需担心传入 int 还是双精度值。

我尝试在网上和我的书中搜索它，但没有运气。你能帮帮我吗？我是模板新手。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:34:22.777

在 C++11 中，您可以使用`auto`：

```
auto k = GetMax(i,j);
auto n = GetMax(l,m); 
```

`k`和的类型`n`是从用于初始化它们的表达式推导出来的。

在 C++11 之前，您需要明确给出类型。但是，您应该始终能够以某种形式编写类型，因为您知道参数的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:35:45.877

你不能，但你不需要。

GetMax 将始终在您知道传入的类型的上下文中调用，因此您知道返回类型可能是什么。

例如，如果您传入两个 int，则结果将为 int。如果你传入一个 double 和一个 long，它将是一个 double。

将模板视为类型安全的宏。用替换的类型替换函数体的函数调用，这就是它要做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:33:16.797

如果您不行为，您可以使用参考使编译器警告您。

```
template <class T>
void GetMax (T a, T b, T& output) {
  output = (a>b?a:b);
} 
```

但如果您可以使用 C++11，请`auto`改用。

# windows - Windows批处理FOR循环通过命令行的范围

> ID：15577492
> 
> 赞同：25
> 
> 时间：2013-03-22T18:33:24.150
> 
> 标签：windows, batch-file, for-loop, cmd

我想从命令窗口多次执行操作。常识告诉我 FOR 循环应该能够处理这个问题。果然，如果我想执行，比如说，`myProg.exe`我可以打开一个命令窗口并使用：

```
C:\> FOR %i in (1 2 3) DO myProg.exe 
```

简单的。

但是如果我想执行`myProg.exe`1000 次呢？我想在 FOR 循环中指定一个范围，但我无法看到如何执行此操作。

直观地说，我似乎应该能够执行以下操作之一：

```
C:\> FOR %i in (1 to 1000) DO myProg.exe
C:\> FOR %i in (1-1000) DO myProg.exe 
```

但是，当然，这是行不通的。FOR 循环将列表分别解释为 3 个标记和 1 个标记，因此分别`myProg.exe`只执行 3 次和 1 次。

* * *

**批处理文件解决方案**

编写某种批处理（.bat）文件可能很容易：

```
SET COUNT=0
:MyLoop
    IF "%COUNT%" == "1000" GOTO EndLoop
    myProg.exe
    SET /A COUNT+=1
    GOTO MyLoop
:EndLoop 
```

但是，难道没有一种简单的方法可以从命令行执行此操作吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-22T18:45:16.947

您可以在语句中使用 /l 标记，使其在一组数字中循环。

例如。

```
C:\> FOR /l %i in (1,1,1000) DO myProg.exe
```

这表示循环遍历范围，从 1 开始，一次步进 1，直到 1000

[http://ss64.com/nt/for_l.html](http://ss64.com/nt/for_l.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-12T07:55:22.423

for /l %%i in (1,1,100) do echo %%i

在我工作之前添加另一个 % 符号

# android - Android 和多选对话框

> ID：15577499
> 
> 赞同：0
> 
> 时间：2013-03-22T18:34:02.903
> 
> 标签：android

我有一个多选对话框，但我有一个小问题。这是代码：

```
 int in;
protected void showSelectMeasurementsDialog() {
      boolean[] checkedMeasurements = new boolean[measurements.length];
      int count = measurements.length;

      for(int i = 0; i < count; i++)

              checkedMeasurements[i] = selectedMeasurements.contains(measurements[i]);
    in = 0;
      DialogInterface.OnMultiChoiceClickListener measurementsDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
       @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecselectedMeasurementsChecked){
           if(isChecselectedMeasurementsChecked)
               if(in<3){
                   selectedMeasurements.add(measurements[which]);
                   in++;
               }

          else{
            selectedMeasurements.remove(measurements[which]);
            in--;
          }

          onChangeSelectedMeasurements();
        }
       };

      AlertDialog.Builder builder = new AlertDialog.Builder(this);
      builder.setTitle("Select Measurements");
      builder.setMultiChoiceItems(measurements, checkedMeasurements, measurementsDialogListener);

      AlertDialog dialog = builder.create();
      dialog.show();
    }
protected void onChangeSelectedMeasurements() {
  StringBuilder stringBuilder = new StringBuilder();

  for(CharSequence colour : selectedMeasurements)
    stringBuilder.append(colour + ",");

} 
```

一切都很好，我有一个包含一些元素的列表。但我想添加不能选择超过 3 个元素的功能。现在我可以从列表中选择所有元素。我想实现我只能选择 3 个元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:49:25.510

您可能只有一个计数器变量，如果它等于 3，则 onClick 表示您无法再选择，如果更多，则将该对话框项设置为未选中。我没有尝试过，但它可能会起作用。但是，更好的方法，尤其是如果您要为此添加更多功能，是考虑使用 a`Actviity`和 a `dialog theme`。您需要做的就是添加

```
android:theme="@android:style/Theme.Dialog" 
```

到`Activity`你的那个`manifest`，它会给出一个`dialog`具有所有功能的外观`Activity`。希望这可以帮助

# json - 如何在 Google 产品搜索 API 中按价格限制结果

> ID：15577501
> 
> 赞同：0
> 
> 时间：2013-03-22T18:34:07.000
> 
> 标签：json, google-api, google-shopping-api, google-product-search

我一直在网上寻找一种限制谷歌搜索商店 API 价格范围的方法，但我找不到任何答案。（假设我想要 20 到 40 美元之间的产品）在官方文档中，似乎没有提到这个功能（仅按价格排名）既不是[这里](https://developers.google.com/shopping-search/v1/getting_started)也不是[这里](https://developers.google.com/shopping-search/v1/reference-request-parameters)

此外，我一直在查看[stackO 中的这篇文章，](https://stackoverflow.com/questions/10277291/how-to-restrict-price-range-in-google-shopping-api)但答案似乎并没有为这个问题带来很好的解决方案（他只是在说明要使用的技术）。有没有办法这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:21:28.217

将此添加到 API 调用的 URL。

```
&restrictBy=price:[20,40] 
```

它将返回价格在 20 到 40 之间的产品（含）。

```
&restrictBy=price:(20,40] 
```

上面的查询将返回价格高于 20 的产品。

参考 [https://developers.google.com/shopping-search/v1/reference-request-parameters#restricting-products](https://developers.google.com/shopping-search/v1/reference-request-parameters#restricting-products)

# svn - 确定 SVN 节点类型

> ID：15577503
> 
> 赞同：1
> 
> 时间：2013-03-22T18:34:18.713
> 
> 标签：svn, svnkit

我正在使用 SVNkit api 下载项目的 svn 版本历史并将其存储在数据库中。我想知道日志条目的更改路径是文件还是文件夹。SVNkit 有 SVNNodeKind 类，可以用来找到它。但是，在我的情况下，它总是返回“未知”。我在某处读到这可能是因为 svn server 可能没有存储该信息。

此外，更改后的路径不包含目录的尾部斜杠。有没有其他方法可以找出它是文件夹还是文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:38:17.020

根据此[SVNkit 示例，您可以使用](http://wiki.svnkit.com/Printing_Out_A_Subversion_Repository_Tree)**SVNRepository**类的方法执行此操作：

```
abstract  SVNNodeKind checkPath(java.lang.String path, long revision) 
          Returns the kind of an item located at the specified path in a particular revision. 
```

即最新版本：

```
...
SVNNodeKind nodeKind = repository.checkPath( svnUrlToCheck ,  -1 );
if ( nodeKind == SVNNodeKind.NONE ) {
    System.err.println( "There is no entry at '" + url + "'." );
} else if ( nodeKind == SVNNodeKind.FILE ) {
    System.out.println( "Entry at '" + url + "' is file." );
} else if ( nodeKind == SVNNodeKind.DIR ) {
    System.out.println( "Entry at '" + url + "' is directory." );
} else if ( nodeKind == SVNNodeKind.UNKNOWN ) {
    System.out.println( "Entry at '" + url + "' is unknown!" );
} 
```

最后一个**if**是针对 SVN 服务器不支持报告节点类型的情况。似乎它始终支持**file:**协议和**svn:** , **svn+ssh:** , **http(s):**从 1.6.0 版开始。但并不总是保证。

# wxpython - Treectrl wxpython

> ID：15577504
> 
> 赞同：0
> 
> 时间：2013-03-22T18:34:19.263
> 
> 标签：wxpython

我试图在我的面板中创建一个树 ctrl 组件，但是当我运行代码时，我没有看到任何操作。

代码

```
import wx

class MyTreeCtrl(wx.TreeCtrl):
    def __init__(self, parent, id, pos, size, style):
        wx.TreeCtrl.__init__(self, parent, id, pos, size, style)

class Example(wx.Frame):

    def __init__(self, parent, title):
        super(Example, self).__init__(parent, title=title, 
        size=(700, 700))
        tID = wx.NewId()
        self.tree = MyTreeCtrl(self,tId,wx.DefaultPosition,wx.DefaultSize,wx.TR_DEFAULT_SIZE)
        isz = (16,16)
        il = wx.ImageList(isz[0], isz[1])
        fldridx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER,      wx.ART_OTHER, isz))
        fldropenidx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FILE_OPEN,   wx.ART_OTHER, isz))
        fileidx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_NORMAL_FILE, wx.ART_OTHER, isz))
        smileidx    = il.Add(images.Smiles.GetBitmap())

        self.tree.SetImageList(il)
        self.il = il

        # NOTE:  For some reason tree items have to have a data object in
        #        order to be sorted.  Since our compare just uses the labels
        #        we don't need any real data, so we'll just use None below for
        #        the item data.

        self.root = self.tree.AddRoot("The Root Item")
        self.tree.SetPyData(self.root, None)
        self.tree.SetItemImage(self.root, fldridx, wx.TreeItemIcon_Normal)
        self.tree.SetItemImage(self.root, fldropenidx, wx.TreeItemIcon_Expanded)

        for x in range(15):
            child = self.tree.AppendItem(self.root, "Item %d" % x)
            self.tree.SetPyData(child, None)
            self.tree.SetItemImage(child, fldridx, wx.TreeItemIcon_Normal)
            self.tree.SetItemImage(child, fldropenidx, wx.TreeItemIcon_Expanded)

            for y in range(5):
                last = self.tree.AppendItem(child, "item %d-%s" % (x, chr(ord("a")+y)))
                self.tree.SetPyData(last, None)
                self.tree.SetItemImage(last, fldridx, wx.TreeItemIcon_Normal)
                self.tree.SetItemImage(last, fldropenidx, wx.TreeItemIcon_Expanded)

                for z in range(5):
                    item = self.tree.AppendItem(last,  "item %d-%s-%d" % (x, chr(ord("a")+y), z))
                    self.tree.SetPyData(item, None)
                    self.tree.SetItemImage(item, fileidx, wx.TreeItemIcon_Normal)
                    self.tree.SetItemImage(item, smileidx, wx.TreeItemIcon_Selected)

        print self.tree
        self.InitUI()
        self.Centre()
        self.Show() 

    def InitUI(self):

        panel = wx.Panel(self)
        panel.SetBackgroundColour('#4f5049')

        vbox = wx.BoxSizer(wx.VERTICAL)

        #midPan = wx.Panel(panel)
        #midPan.SetBackgroundColour('#ededed')

        vbox.Add(self.tree, 1, wx.EXPAND | wx.ALL, 20)
        panel.SetSizer(vbox)

if __name__ == '__main__':
        app = wx.App()
        Example(None,title="Border")
        app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:06:06.377

好吧，我明白为什么了。该代码以其当前形式无法运行。“tId”是一个未定义的变量，wx.TR_DEFAULT_SIZE 不是一个真正的样式标志。您还引用了“图像”模块，但没有导入它。有一个可运行的例子会很好。

你也不是真的在问问题。什么不工作？当我编辑代码以使其运行时，我最终得到以下结果：

```
import wx

class MyTreeCtrl(wx.TreeCtrl):
    def __init__(self, parent, id, pos, size, style):
        wx.TreeCtrl.__init__(self, parent, id, pos, size, style)

class Example(wx.Frame):

    def __init__(self, parent, title):
        super(Example, self).__init__(parent, title=title, 
        size=(700, 700))
        tID = wx.NewId()
        self.tree = MyTreeCtrl(self,tID,wx.DefaultPosition,wx.DefaultSize,wx.TR_HAS_BUTTONS)
        isz = (16,16)
        il = wx.ImageList(isz[0], isz[1])
        fldridx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER,      wx.ART_OTHER, isz))
        fldropenidx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FILE_OPEN,   wx.ART_OTHER, isz))
        fileidx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_NORMAL_FILE, wx.ART_OTHER, isz))

        self.tree.SetImageList(il)
        self.il = il

        # NOTE:  For some reason tree items have to have a data object in
        #        order to be sorted.  Since our compare just uses the labels
        #        we don't need any real data, so we'll just use None below for
        #        the item data.

        self.root = self.tree.AddRoot("The Root Item")
        self.tree.SetPyData(self.root, None)
        self.tree.SetItemImage(self.root, fldridx, wx.TreeItemIcon_Normal)
        self.tree.SetItemImage(self.root, fldropenidx, wx.TreeItemIcon_Expanded)

        for x in range(15):
            child = self.tree.AppendItem(self.root, "Item %d" % x)
            self.tree.SetPyData(child, None)
            self.tree.SetItemImage(child, fldridx, wx.TreeItemIcon_Normal)
            self.tree.SetItemImage(child, fldropenidx, wx.TreeItemIcon_Expanded)

            for y in range(5):
                last = self.tree.AppendItem(child, "item %d-%s" % (x, chr(ord("a")+y)))
                self.tree.SetPyData(last, None)
                self.tree.SetItemImage(last, fldridx, wx.TreeItemIcon_Normal)
                self.tree.SetItemImage(last, fldropenidx, wx.TreeItemIcon_Expanded)

                for z in range(5):
                    item = self.tree.AppendItem(last,  "item %d-%s-%d" % (x, chr(ord("a")+y), z))
                    self.tree.SetPyData(item, None)
                    self.tree.SetItemImage(item, fileidx, wx.TreeItemIcon_Normal)
                    #self.tree.SetItemImage(item, smileidx, wx.TreeItemIcon_Selected)

        print self.tree
        self.InitUI()
        self.Centre()
        self.Show() 

    def InitUI(self):

        panel = wx.Panel(self)
        panel.SetBackgroundColour('#4f5049')

        vbox = wx.BoxSizer(wx.VERTICAL)

        #midPan = wx.Panel(panel)
        #midPan.SetBackgroundColour('#ededed')

        vbox.Add(self.tree, 1, wx.EXPAND | wx.ALL, 20)
        panel.SetSizer(vbox)

if __name__ == '__main__':
        app = wx.App()
        Example(None,title="Border")
        app.MainLoop() 
```

这会将树控件创建为左上角的一个小框。下一个问题是您将面板堆叠在 treectrl 的顶部，因为您将两个小部件的框架作为其父级，并且您首先创建了 treectrl。我重新排列了您的代码，以使面板成为 treectrl 的父级。见下文：

```
import wx

class MyTreeCtrl(wx.TreeCtrl):
    def __init__(self, parent, id, pos, size, style):
        wx.TreeCtrl.__init__(self, parent, id, pos, size, style)

class Example(wx.Frame):

    def __init__(self, parent, title):
        super(Example, self).__init__(parent, title=title, size=(700, 700))

        panel = wx.Panel(self)
        panel.SetBackgroundColour('#4f5049')

        vbox = wx.BoxSizer(wx.VERTICAL)

        tID = wx.NewId()
        self.tree = MyTreeCtrl(panel,tID,wx.DefaultPosition,wx.DefaultSize,wx.TR_HAS_BUTTONS)
        vbox.Add(self.tree, 1, wx.EXPAND | wx.ALL, 20)
        panel.SetSizer(vbox)

        isz = (16,16)
        il = wx.ImageList(isz[0], isz[1])
        fldridx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER,      wx.ART_OTHER, isz))
        fldropenidx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FILE_OPEN,   wx.ART_OTHER, isz))
        fileidx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_NORMAL_FILE, wx.ART_OTHER, isz))

        self.tree.SetImageList(il)
        self.il = il

        # NOTE:  For some reason tree items have to have a data object in
        #        order to be sorted.  Since our compare just uses the labels
        #        we don't need any real data, so we'll just use None below for
        #        the item data.

        self.root = self.tree.AddRoot("The Root Item")
        self.tree.SetPyData(self.root, None)
        self.tree.SetItemImage(self.root, fldridx, wx.TreeItemIcon_Normal)
        self.tree.SetItemImage(self.root, fldropenidx, wx.TreeItemIcon_Expanded)

        for x in range(15):
            child = self.tree.AppendItem(self.root, "Item %d" % x)
            self.tree.SetPyData(child, None)
            self.tree.SetItemImage(child, fldridx, wx.TreeItemIcon_Normal)
            self.tree.SetItemImage(child, fldropenidx, wx.TreeItemIcon_Expanded)

            for y in range(5):
                last = self.tree.AppendItem(child, "item %d-%s" % (x, chr(ord("a")+y)))
                self.tree.SetPyData(last, None)
                self.tree.SetItemImage(last, fldridx, wx.TreeItemIcon_Normal)
                self.tree.SetItemImage(last, fldropenidx, wx.TreeItemIcon_Expanded)

                for z in range(5):
                    item = self.tree.AppendItem(last,  "item %d-%s-%d" % (x, chr(ord("a")+y), z))
                    self.tree.SetPyData(item, None)
                    self.tree.SetItemImage(item, fileidx, wx.TreeItemIcon_Normal)
                    #self.tree.SetItemImage(item, smileidx, wx.TreeItemIcon_Selected)

        print self.tree
        self.Centre()
        self.Show() 

if __name__ == '__main__':
        app = wx.App()
        Example(None,title="Border")
        app.MainLoop() 
```

# mybatis - 将类字段名映射到 myBatis 中的列名以进行插入

> ID：15577510
> 
> 赞同：0
> 
> 时间：2013-03-22T18:34:52.680
> 
> 标签：mybatis

我正在使用 myBatis 并尝试为 User 类创建一个数据库条目。如何将不同的字段名称映射到列名称？我需要或应该 myBatis 知道它们吗？

我的用户类如下所示：

```
public class User {
    private String username;
    private String email;
... 
```

列名是：

```
user_name
e_mail 
```

myBatis 的创建方法如下所示：

```
void createUser(User user) 
```

...我试过这样：

```
<insert id="createUser" parameterType="...User">
        INSERT INTO users (user_name, e_mail) VALUE
        (#{username},#{email})
</insert> 
```

和这个：

```
 <insert id="createUser" parameterType="...User">
            INSERT INTO users (user_name, e_mail) VALUE
            (#{user.username},#{user.email})
 </insert> 
```

我不断得到：

```
Parameter 'username' not found. Available parameters are [1, 0, param1, param2] 
```

分别参数“用户”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:20:27.187

找到了答案：

代码应如下所示：

```
void createUser(@Param("user")User user)

<insert id="createUser" parameterType="...User">
            INSERT INTO users (user_name, e_mail) VALUE
            (#{user.username},#{user.email})
 </insert> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:05:47.003

如果您有这些私有变量的 getter/setter，则不必指定 @param 注释。你没有在你的代码片段中表明你这样做。假设你有一个变量，MyBatis 应该足够聪明，可以调用变量的 getter。如果您查看此处的文档[http://mybatis.github.com/mybatis-3/sqlmap-xml.html#Parameters](http://mybatis.github.com/mybatis-3/sqlmap-xml.html#Parameters)他们有一个示例，就像您在上面所做的一样（注意您的第一个插入映射是正确的）。

```
<insert id="insertUser" parameterType="User" >
 insert into users (id, username, password)
 values (#{id}, #{username}, #{password})
</insert> 
```

# asp.net - 从文本框中检索信息到列表视图

> ID：15577519
> 
> 赞同：3
> 
> 时间：2013-03-22T18:35:23.250
> 
> 标签：asp.net, sql, database

我在 asp.net 中工作，我有三个文本框（名字、姓氏、中间名缩写）。有一个列表视图，根据输入到文本框中的信息显示内容。我试图只需要姓氏文本框来处理信息。我已经使用以下代码将 sql 数据源连接到列表视图：

```
 <asp:TabPanel runat="server" HeaderText="Information" ID="TabPanel">             
     <ContentTemplate> 

         <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
             ConnectionString="<%$ Name of the database %>" 
             SelectCommand="SELECT [UserID], [UserSuffix], [UserAddressLine1], [UserAddressLine2], [UserCity], 
             [UserState], [UserZipCode], [UserPhoneNumber], [UserEmail] FROM [AllUsers]
             WHERE (([UserLastName] = @UserLastName) OR ([UserFirstName] = @UserFirstName) 
             OR ([UserMiddleInitial] = @UserMiddleInitial))">
             <SelectParameters>
                 <asp:ControlParameter ControlID="txtUILastName" Name="UserLastName" 
                     PropertyName="Text" />
                 <asp:ControlParameter ControlID="txtUIFirstName" Name="UserFirstName" 
                     PropertyName="Text" />
                 <asp:ControlParameter ControlID="txtUIMI" Name="UserMiddleInitial" 
                     PropertyName="Text" />
             </SelectParameters>
         </asp:SqlDataSource>

      <table id = "USERINF">
          <tr>
           <td width="196px" class="style8">
             <asp:Label ID="lblFirstName" runat="server" Text="Please enter First Name:"></asp:Label>
           </td>
           <td class="style6">

            <asp:TextBox ID="txtUIFirstName" runat="server" MaxLength="20"></asp:TextBox>

           </td>
          </tr>
          <tr>
           <td width="196px" class="style8">
            <asp:Label ID="lblLastName" runat="server" Text="Please enter Last Name:"></asp:Label>

           </td>
           <td class="style6">
             <asp:TextBox ID="txtUILastName" runat="server" MaxLength="20"></asp:TextBox> 

            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
             ControlToValidate = "txtUILastName" ValidationExpression = "[a-zA-Z ]{1,20}"
             ForeColor="Red" ValidationGroup="UserInf"
             ErrorMessage="First Name must be only a-z,A-Z characters!" Display="Dynamic"></asp:RegularExpressionValidator>

             <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                   ControlToValidate = "txtUILastName" ErrorMessage="Please enter Last Name!" 
                   ForeColor="Red" ValidationGroup="UserInf" Display="Dynamic"></asp:RequiredFieldValidator>
           </td> 
          </tr>
          <tr>
           <td width="196px" class="style8">
            <asp:Label ID="lblMI" runat="server" Text="Please enter Middle Initials:"></asp:Label>
           </td>
           <td class="style6">
            <asp:TextBox ID="txtUIMI" runat="server" MaxLength="1" Width="30px" style="text-align: center;
                 margin-left:2px"></asp:TextBox> 

           </td> 
          </tr>
          <tr>
           <td width="196px" class="style8">
           </td>
           <td class="style6">
            <asp:Button ID="btnIFind" runat="server" Text="Find" ValidationGroup = "UserInf"/> 
```

当我只输入姓氏时，它不会从数据源中检索任何数据，但只有在我填写所有文本框时才有效。我怎样才能只需要一个文本框来检索信息？

查找按钮和文本框后面没有任何代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:56:26.117

您正在寻找的是一个[条件 where 子句](http://connectsql.blogspot.com/2011/05/sql-server-conditional-where-clause.html)。我创建的存储过程将在以下情况下返回数据：

1.  仅提供姓氏
2.  提供名字和姓氏
3.  提供名字、姓氏和中间名缩写

如果您需要满足任何其他条件，只需修改存储过程。我创建存储过程的原因是因为查询现在比您开始使用的查询要大得多：

**首先在 SQL 中创建这个存储过程：**

```
CREATE PROCEDURE [dbo].[SearchUsers]
    @UserLastName VARCHAR(MAX),
    @UserFirstName VARCHAR(MAX) = 'NOVALUE',
    @UserMiddleInitial VARCHAR(MAX) = 'NOVALUE'
AS
BEGIN

SELECT [UserID], [UserSuffix], [UserAddressLine1], [UserAddressLine2], [UserCity], 
[UserState], [UserZipCode], [UserPhoneNumber], 
[UserEmail] FROM [AllUsers] 
WHERE 1 = (CASE 

WHEN @UserFirstName <> 'NOVALUE' AND
@UserMiddleInitial <> 'NOVALUE' AND
UserFirstName = @UserFirstName AND
UserLastName = @UserLastName AND
UserMiddleInitial = @UserMiddleInitial THEN 1

WHEN @UserFirstName <> 'NOVALUE' AND
@UserMiddleInitial = 'NOVALUE' AND
UserFirstName = @UserFirstName AND
UserLastName = @UserLastName THEN 1

WHEN @UserFirstName = 'NOVALUE' AND
@UserMiddleInitial = 'NOVALUE' AND
UserLastName = @UserLastName THEN 1
ELSE 0 END)

END 
```

**ASPX：**

```
<form id="form1" runat="server">
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>"
    SelectCommand="SearchUsers" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:ControlParameter ControlID="txtUILastName" Name="UserLastName" PropertyName="Text"
            Type="String" />
        <asp:ControlParameter ControlID="txtUIFirstName" DefaultValue="NOVALUE" Name="UserFirstName" PropertyName="Text"
            Type="String" />
        <asp:ControlParameter ControlID="txtUIMI" DefaultValue="NOVALUE" Name="UserMiddleInitial" PropertyName="Text"
            Type="String" />
    </SelectParameters>
</asp:SqlDataSource>
<table id="USERINF">
    <tr>
        <td width="196px" class="style8">
            <asp:Label ID="lblFirstName" runat="server" Text="Please enter First Name:"></asp:Label>
        </td>
        <td class="style6">
            <asp:TextBox ID="txtUIFirstName" runat="server" MaxLength="20"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td width="196px" class="style8">
            <asp:Label ID="lblLastName" runat="server" Text="Please enter Last Name:"></asp:Label>
        </td>
        <td class="style6">
            <asp:TextBox ID="txtUILastName" runat="server" MaxLength="20"></asp:TextBox>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtUILastName"
                ValidationExpression="[a-zA-Z ]{1,20}" ForeColor="Red" ValidationGroup="UserInf"
                ErrorMessage="First Name must be only a-z,A-Z characters!" Display="Dynamic"></asp:RegularExpressionValidator>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtUILastName"
                ErrorMessage="Please enter Last Name!" ForeColor="Red" ValidationGroup="UserInf"
                Display="Dynamic"></asp:RequiredFieldValidator>
        </td>
    </tr>
    <tr>
        <td width="196px" class="style8">
            <asp:Label ID="lblMI" runat="server" Text="Please enter Middle Initials:"></asp:Label>
        </td>
        <td class="style6">
            <asp:TextBox ID="txtUIMI" runat="server" MaxLength="1" Width="30px" Style="text-align: center;
                margin-left: 2px"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td width="196px" class="style8">
        </td>
        <td class="style6">
            <asp:Button ID="btnIFind" runat="server" Text="Find" ValidationGroup="UserInf" />
        </td>
    </tr>
</table>
<asp:ListView ID="listView" runat="server" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <tr>
            <td>
                <asp:Label ID="UserCityLabel" runat="server" Text='<%# Eval("UserCity") %>' />
            </td>
            <td>
                <asp:Label ID="UserEmailLabel" runat="server" Text='<%# Eval("UserEmail") %>' />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView>
</form> 
```

# orm - 从矢量数据生成地理图块

> ID：15577522
> 
> 赞同：1
> 
> 时间：2013-03-22T18:35:25.997
> 
> 标签：orm, map, geospatial, geo

我正面临这个问题：我的数据库中有一些矢量数据（折线......），它们描述了许多世界/国家/地区/城市边界。

我想在这些地区有一张交互式地图。

当我在浏览器中渲染这些数据（数据以geojson发送）时，这很慢（我并不感到惊讶）。

下一个原因是生成一些光栅图块来表示不同缩放级别的区域，并有一种方法可以在单击区域和选定区域之间建立关系（以显示更多信息）。

我是地理瓷砖的新手：

*   从矢量数据生成 png/jpg 图块的最佳工具是什么？
*   如何在单击的区域和数据库中的“id”之间建立关系？

我知道我的问题很大，但是如果您有一些建议...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:33:45.173

我最近写了一篇关于如何提高光栅图块渲染速度的博文：http: [//blog.webfoot.com/2013/03/12/optimizing-map-tile-generation/](http://blog.webfoot.com/2013/03/12/optimizing-map-tile-generation/)

至于将点击连接到管辖区 ID，我认为没有捷径：您需要将点击转换为 lat/lng（或 Vast Coordinate System，正如我在博文中描述的那样），然后做一个点-多边形内检查。如果您使用的是 PostGIS，那么您可以执行 ST_Intersects。

注意：如果您使用的是 MySQL，则交集是通过*边界框*完成的，而不是多边形。它仍然是可能的：你只需要从某个地方获取一个多边形中的点函数来检查哪个多边形，如果一个边界框检查让你不止一个。

这是您可以单击的点示例：http: [//maps.webfoot.com/demos/CanadianStimulus/CanadianStimulus.html](http://maps.webfoot.com/demos/CanadianStimulus/CanadianStimulus.html)

请注意，由于人们在点击时并不精确（特别是对于小点），我实际上在这些点周围制作了几个像素“活”以及单像素点。您也可以单击远离点，然后它将显示多边形（在本例中为联邦选举区）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:33:12.413

[Geoserver](http://www.geoserver.org)有一个[MongoDB 插件数据源](http://repo.opengeo.org/org/geotools/gt-mongodb/)，它是一个功能齐全的 WebGIS 服务器。您可以使用它为您的数据构建地图渲染服务（实际上是 WMS）。然后使用[Geowebcache](http://www.geowebcache.org)生成地图的切片。

通过这种方式，您可以使用功能齐全的 WebGIS 堆栈，它允许您管理其他数据源，并在部分数据更新时轻松重新创建切片子集。

通过 Geoservers WFS 实现还提供了地图上的查询功能（与数据库中元素的关系地图位置）。

# jquery - changePage 上发生了两个事件

> ID：15577526
> 
> 赞同：0
> 
> 时间：2013-03-22T18:35:37.517
> 
> 标签：jquery, xcode, cordova, jquery-mobile, ios6

想象一下，我在页面中`home.html`，在那里，我有一个元素的点击事件，该元素将`changePage`触发`user.html`

好的， 中的元素`home.html`设置在 中`header`，并且在 中，我在**相同的 html 位置**`user.html`有另一个元素。

 **问题是：当我单击 上的元素时`home.html`，另一个页面中的另一个`vclick`事件发生了。此问题仅使用`vclick`or发生`tap`，使用正常`click` **工作**，并且两个元素需要在两个页面中位于**相同的 html 位置。**

这是我绑定在 home.html 中的事件

```
accessProfile: function(){
    $("body").on("vclick", ".accessUser", function(){
        $.mobile.changePage("user.html");
    });
} 
```

并且这个绑定到 user.html

```
accessHome: function(){
    $("body").on("vclick", ".accessHome", function(){
         $.mobile.changePage("home.html");
    });
} 
```

这只是一个例子，所以，`vclick`在`accessUser`，然后`changePage`发生，但是当完成时，事件`.accessHome`发生并回到家中。同样，这仅在两个元素位于相同的 html 位置时才会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:50:08.597

好吧，当时，我的问题已解决，将所有内容更改为 a`pageinit`而不是`$(document).ready(function(){...});`并使用以下方法防止多个事件：

```
 $("body").on("touchstart", ".someElement", function(event){
    if(event.handled !== true){ // This will prevent event triggering more then once
        // code
        event.handled = true;
    }
    return false;
 }); 
```**

# wordpress - [在执行此命令时出现的错误]

> ID：15577527
> 
> 赞同：0
> 
> 时间：2013-03-22T18:35:39.713
> 
> 标签：wordpress

嘿伙计们，我正在将 wordpress 网站从一个主机迁移到另一个主机（BlueHost 到 LunarPages）。我备份了旧服务器上的所有内容，在新服务器上安装了新的 WP，导入了旧文件，进行了 wp-config/database 更改并显示了站点。

[http://www.albertineco.com](http://www.albertineco.com)

但是，如果您导航到任何页面，它会给您[处理此指令时发生错误]。我尝试停用我的插件并切换主题，看看是否导致它没有运气。LunarPages 也没有真正了解问题的原因。

这是在 Cpanel 错误日志中：

[Fri Mar 22 10:57:32 2013] [error] [client 69.178.136.2] invalid CGI ref "/cgi-sys/fourohfour.cgi" in /home/alber27/public_html/404.shtml, referer: [http:// /albertineco.com/](http://albertineco.com/)

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-01T14:28:23.367

我有同样的问题。我就是这样解决的：

1.  我要求托管公司向我提供 FTP 凭据
2.  我登录到 FTP 并右键单击**.htaccess**文件
3.  我将**.htaccess**文件的 cmod 更改为**777**
4.  我回到我的仪表板并重新做了固定链接并保存了。

现在，它起作用了。

# redirect - 如何创建动态 301 重定向 URL

> ID：15577528
> 
> 赞同：0
> 
> 时间：2013-03-22T18:35:43.033
> 
> 标签：redirect

是否可以创建动态 301 重定向网址？

我有一个约会网站，网址格式是`/dating/united_states_singles/`. 几个月前，我将其更改为`/free-dating/united_states/`（添加免费和删除单曲）。当我检查 Google 网站管理员工具时，两个 URL（旧的和新的）都被编入索引，这会创建重复的标题和描述标签。

是否可以为所有旧网址创建 301 重定向到新网址格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:43:30.790

如果这是 Windows IIS 服务器 url，则 url 重写模块 [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# coldfusion-8 - Coldfusion 8 提交更改不会在 CF 管理员中保存邮件服务器设置

> ID：15577538
> 
> 赞同：0
> 
> 时间：2013-03-22T18:36:21.537
> 
> 标签：coldfusion-8, coldfusion-administrator

我目前通过 IIS 6.0 在 Windows 2003 SP 2 服务器上运行 Coldfusion 8,0,1,195765。

我需要更改 ColdFusion Administrator 中的一项邮件服务器设置，但是当我单击提交更改时，页面似乎刷新了，并且该字段被还原。

我对另一个页面进行了更改，以确保可以进行更改，并且果然应用了更改。

没有显示错误 - 除了更改之外，一切看起来都很正常。

我能够使用 mail.cfc 以编程方式进行更改，并且我的更改确实出现在 CF Admin 中。

我担心邮件功能已损坏或受损 - 我对 stackoverflow 专家的主要要求是如何恢复我的邮件服务器设置功能？

我的第二个要求是这怎么可能发生？

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:09:09.630

我在调试时遇到了类似的问题。

关于您的第一个问题...您可以以编程方式访问管理员 api。以下是验证连接和验证当前​​设置的方法：

```
<cfscript>
  /* you must log in first */
  adminObj = createObject("component","cfide.adminapi.administrator"); // this assumes default installation
  adminObj.login("password"); // enter your cf admin password

  mailServerObj = createObject("component","cfide.adminapi.mail");
  value = mailServerObj.getMailServers();
</cfscript>

<cfdump var="#value#"> 
```

*值*是您当前邮件服务器设置的数组。

要进行更改，请将脚本的最后一部分更改为：

```
 mailServerObj = createObject("component","cfide.adminapi.mail");
  mailServerObj.setMailServers(
    "yourMailServer",
    portNumber,
    username="yourUsername",
    password="yourPassword",
    priority="yourServerPriority");
  value = mailServerObj.getMailServers(); 
```

唯一需要的值是*yourMailServer*的条目。此外，可选值*portNumber*必须是数字。

查看[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=basiconfig_37.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=basiconfig_37.html)以获取有关使用管理员 API 的 Adob​​e 文档。

您还可以查看 Administrator API CFC 及其各自功能的完整列表，请查看[http://www.cfexecute.com/admin-api-documentation/](http://www.cfexecute.com/admin-api-documentation/)

# xorg - X 请求失败错误：BadAlloc（操作资源不足）

> ID：15577540
> 
> 赞同：31
> 
> 时间：2013-03-22T18:36:36.483
> 
> 标签：xorg, linux-mint

我注意到这个问题在过去被问过很多次，在网上冲浪我发现了很多关于它的页面。但是，似乎提议的解决方案很少奏效，就我而言，问题与我编写的程序无关。所以我会在这里再试一次。

我最近在笔记本电脑上安装了 Linux Mint 14。操作系统完善后，我开始安装我需要的软件，其中包括 netgen（网格生成器软件）。我尝试了两种方式：下载+解包+编译+安装和突触。无论哪种方式，这是我尝试执行程序时得到的输出

> X 请求失败错误：BadAlloc（操作资源不足）
> 
> 请求失败的主要操作码：154 (GLX)
> 
> 请求失败的次要操作码：3 (X_GLXCreateContext)
> 
> 失败请求序列号：490
> 
> 输出流中的当前序列号：491

正如我所说，我在网上冲浪，显然，这被认为与 X 服务器配置中的某些问题有关。从这里开始混乱。有人说我应该修改`/etc/X11/Xorg.conf`，添加行

> 选项“Videoram”“65536”
> 
> 选项“缓存线”“1980”

在“设备”部分下。不幸的是，我没有这样的文件，显然在最近的发行版中，X 配置文件已被移动到`/usr/share/X11/xorg.conf.d/*`，现在它被分成不同的文件。关于显示器和图形的那个应该叫做 10-monitor.conf ......我没有。我尝试按照[此](http://samuelmartin.wordpress.com/2012/05/29/enabling-resolutions-in-ubuntu-12-04-lubuntu-12-04/)链接上的说明创建一个，然后添加这些行，但什么也没发生。公平地说，我不能 100% 确定我正确生成了文件，因为我不确定如何检测我的显卡驱动程序。

我不知道人们需要多少和哪些信息来了解如何解决这个问题。这是我看到的可能有用的内容。

'lspci | 的输出 grep VGA' 是

> 01:05.0 VGA 兼容控制器：Advanced Micro Devices [AMD] nee ATI RS880M [Mobility Radeon HD 4200 系列]

我的当前`/usr/share/X11/xorg.conf.d/10-monitor.conf`是以下

```
Section "Monitor"
  Identifier "Monitor0"
  Modeline "1920x1080_60.00"  172.80  1920 2040 2248 2576  1080 1081 1084 1118  -HSync +Vsync
EndSection

Section "Device"
    Identifier    "LVSD"
    Driver        "fglrx" #Choose the driver used for this monitor
EndSection

Section "Screen"
  Identifier "Screen0"
  Device "LVDS"
  Monitor "Monitor0"
  DefaultDepth 24
  SubSection "Display"
    Depth 24
    Modes "1920x1080_60.00" "1366x768"
  EndSubSection
EndSection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-22T18:54:32.777

> 在“设备”部分下。不幸的是，我没有这样的文件

尝试创建您自己的 xorg.conf 文件，将其放在此位置将在[重新启动 X](https://askubuntu.com/questions/1220/how-to-restart-x-window-server-from-command-line)或仅通过重新启动计算机后覆盖您的 X 设置。

```
mkdir -p /etc/X11/xorg.conf.d/
cp /etc/X11/xorg.conf.d/xorg.conf /etc/X11/xorg.conf.d/xorg.conf.bk # in case it exists
cp /usr/share/X11/xorg.conf.d/10-monitor.conf /etc/X11/xorg.conf.d/xorg.conf 
```

/etc/X11/xorg.conf.d/xorg.conf 的内容看起来像（添加您的选项）：

```
Section "Monitor"
  Identifier "Monitor0"
  Modeline "1920x1080_60.00"  172.80  1920 2040 2248 2576  1080 1081 1084 1118  -HSync +Vsync
EndSection

Section "Device"
    Identifier    "LVSD"
    Driver        "fglrx" #Choose the driver used for this monitor
    Option "Videoram" "65536"
    Option "Cachelines" "1980"
EndSection

Section "Screen"
  Identifier "Screen0"
  Device "LVDS"
  Monitor "Monitor0"
  DefaultDepth 24
  SubSection "Display"
    Depth 24
    Modes "1920x1080_60.00" "1366x768"
  EndSubSection
EndSection 
```

这也可能与您正在使用的驱动程序有关，还有其他常见的驱动程序可用，例如

```
Driver "fbdev"
Driver "vesa"
Driver "fglrx" 
```

fbdev 驱动程序支持所有可以使用帧缓冲驱动程序的硬件。

vesa 驱动程序支持大多数与 VESA 兼容的视频卡。有一些已知的例外情况，应在此处列出。

fglrx 是用于基于 ATI (Mobility(TM)) RADEON® 和 (Mobility(TM)) FireGL(TM) 的视频卡的 X.org(7x) 驱动程序。该驱动程序为 3D 图形和视频播放提供硬件加速。它包括对双显示器、电视输出和 8.21.7 版本的支持以及 OpenGL 2.0 (GLSL)。

根据您选择的驱动程序，是否启用某些选项/功能/兼容性，您可以更改驱动程序并使用您所说的选项进行测试。

最后，您有[数百种选择](ftp://www.x.org/pub/X11R6.7.0/doc/xorg.conf.5.html)来玩 X11。

# php - 什么是用于 php 模板引擎的 Twig？

> ID：15577541
> 
> 赞同：-1
> 
> 时间：2013-03-22T18:36:37.340
> 
> 标签：php, templates, twig

使用它的目的是什么，基本语法是什么。我已经阅读了他们网站上的文档，所以不要将网站链接作为答案发送给我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:23:00.273

Twig 是一种让你的 PHP 更加对象和不那么混乱的方法。

有很多页面/Web 应用程序都充满了 semi-html-semi-php，而且这种类型的 PHP 页面效率不高，也无法维护。

通过使用树枝，您可以将内容与容器分开。您将使您的代码更简洁、更易于维护和理解。

此外，您可以随时完全更改设计，而不会影响后面的服务器代码。

这完全是可维护性和性能的问题，所有流行的框架（Symphony、Code Igniter 等）都使用这些模板工具来使您的代码更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:41:09.247

Twig（和一般的模板引擎）是一种使用比普通 PHP 更少的语法来简化显示逻辑的方法。它/它们还允许模板分层组织，其中一个继承另一个的布局。

然而，模板引擎在代码大小和处理方面意味着更多的开销，因为模板需要被解析然后执行。

# c++ - 防止将左值引用绑定到非常量对象

> ID：15577549
> 
> 赞同：2
> 
> 时间：2013-03-22T18:37:01.193
> 
> 标签：c++, c++11

我想防止对非 const 对象的左值引用绑定到我的函数参数，目前我有这个代码：

```
template <typename T>
using remove_cr = std::remove_const<typename std::remove_reference<T>::type>;

template <typename T>
using is_nc_lvalue_reference
  = std::integral_constant<bool,
      std::is_lvalue_reference<T>::value
      && !std::is_const<typename std::remove_reference<T>::type>::value
    >;

template <typename T>
void func(T && v, typename std::enable_if<
  std::is_same<THE_TYPE_I_WANT, typename remove_cr<T>::type>::value
  && !is_nc_lvalue_reference<T>::value>::type* = 0)
{
} 
```

这对我来说似乎有很多代码，是否存在更优雅的 SFINAE 或非 SFINAE 方法？我不需要完美转发，但如果我不使用它，我会输`T`。

这个想法是，`const`不应该修改对象，因此我可以将它们转换为其他表示形式并将它们提供给不同的进程。如果给出了非常量引用，它引用的对象可以被修改，但是其他进程无权访问转发进程的内存空间，因此我不转发它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:56:59.453

这个怎么样：

```
template <typename T>
void func(const T &x) {
  process(x);
}

template <typename T>
void func(T &x) {
  do_nothing(x);
} 
```

[行动中的例子](http://ideone.com/2vgpNd)。

# c# - 将 MenuItems 动态添加到 MenuItem 并静态查看它们

> ID：15577554
> 
> 赞同：0
> 
> 时间：2013-03-22T18:37:18.163
> 
> 标签：c#, asp.net, menu, menuitem

我想动态地将一些添加`MenuItems`到 a`MenuItem.ChildItems`中，但我想静态地查看它们。换句话说，我只是想让它`MenuItems`始终可见，而不仅仅是当我将鼠标悬停在它上面时。

```
for ( int i = 0; i < lista.count; i++)
{
    MenuItem nuovo = new MenuItem();

    nuovo.NavigateUrl = "www.google.com"
    nuovo.Text = "prova" + i;

    attualeItem.ChildItems.Add(nuovo);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:44:53.257

您需要修改`Menu`控件的 1 到 2 个属性：

**StaticDisplayLevels** : 2 -*菜单静态部分中显示的级别数*。

*   2 如果你只有父母和孩子。它会根据您的菜单的深度而增加。

**StaticSubMenuInde​​nt** ***（可选）***：*静态菜单项与其静态子菜单项之间的缩进*。

*   因此，您将其设置为 20 像素或 30 像素，或者您希望它们分开的任何距离。

# ruby - 如何使 Rails 中的 Flash 消息超时

> ID：15577555
> 
> 赞同：15
> 
> 时间：2013-03-22T18:37:20.860
> 
> 标签：ruby, ruby-on-rails-3, twitter-bootstrap, alert

我目前有用于成功/失败等的设计 gem 的标准 flash 消息。我添加了通过关闭类使用一些引导功能手动关闭消息的选项。下面显示了一个小片段。

```
{ 
  <a class="close" data-dismiss="alert">&#215;</a>
  <%= content_tag :div, msg, :id => "flash_#{name}" %>
} 
```

我想有一个选项来创建一个超时时间段，在该时间段内警报消息将在 5 秒后关闭。不确定在 Rails 中是否有一种简单的方法可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T18:44:08.490

如果您在同一页面中加载了 jQuery，这将适用于您

```
<div id="flash">
  <a class="close" data-dismiss="alert">&#215;</a>
  <%= content_tag :div, msg, :id => "flash_#{name}" %>
</div>

<script type="text/javascript">
$(document).ready(function(){
  setTimeout(function(){
    $('#flash').remove();
  }, 5000);
 })
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-26T16:03:06.727

在 Rails 6 中使用 vanilla Javascript（将代码放入 中`app/javascript/packs/application.js`），我使用以下内容淡化带有`'.notification'`类的 flash 消息。

首先，`notification`在您的 html 中添加一个类。然后，在 CSS 中，将`.notification`opacity 设置为 1 并`transition`设置为`ease-in-out`. 然后，使用 JS，将`.fade`类添加到`.notification`，将不透明度设置为 0。

JS

```
window.addEventListener("turbolinks:load", () => {
  hideNotice();
});

function hideNotice() {
  const notification = document.querySelector('.notification')
  if (notification) {
    setInterval(function() {
      notification.classList.add('fade');
    }, 5000);
  }
} 
```

CSS

```
.notification {
  opacity: 1;
  transition: opacity 0.4s ease-in-out;
}

.notification.fade {
  opacity: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T21:56:56.747

1.  确保您的 div 有一个`alert`类。
2.  `application.js`在您的文件或其他文件中添加以下代码`.js`：

```
$(document).on('turbolinks:load', function() {
  setTimeout(function() {
    $('.alert').fadeOut();
  }, 3000);
}) 
```

3.  看着它走开。

# c++ - JNI 共享库中未定义的符号，可执行文件正在工作

> ID：15577557
> 
> 赞同：2
> 
> 时间：2013-03-22T18:37:25.040
> 
> 标签：c++, c, linker, makefile, java-native-interface

我对 C++ 真的很陌生，所以我希望这只是一个导致此错误的小错误。抱歉，这篇文章太长了，但我试图包含所有重要的细节。

所以这就是我想要做的：我正在使用一个外部库，它以两个文件夹的形式出现，每个文件夹都有一个 makefile。我正在尝试使用一个额外的 cpp 文件和 .h 文件中的 JNI 标头创建一个 JNI 库。

所以文件夹结构是这样的： -> libcds/src 带有创建 libcds.a 的 makefile
-> SSA2 带有创建 SSA.a 的 makefile
-> myFolder 带有我的 cpp 和 h 文件以及应该创建库的 makefile

所以这里是不同的makefile：

libcds/src:

```
CPP=g++

CPPFLAGS=-O9 -w -DNDEBUG 

INCL=-I../includes/

CODERS_DIR=coders
CODERS_OBJECTS=$(CODERS_DIR)/huff.o $(CODERS_DIR)/huffman_codes.o

STATIC_PERMUTATION_DIR=static_permutation
STATIC_PERMUTATION_OBJECTS=$(STATIC_PERMUTATION_DIR)/perm.o ...

STATIC_BITSEQUENCE_DIR=static_bitsequence
STATIC_BITSEQUENCE_OBJECTS=$(STATIC_BITSEQUENCE_DIR)/static_bitsequence.o ..

STATIC_SEQUENCE_DIR=static_sequence
STATIC_SEQUENCE_OBJECTS=$(STATIC_SEQUENCE_DIR)/static_sequence.o, ..., wt_coder.o

UTILS_DIR=utils
UTILS_OBJECTS=$(UTILS_DIR)/alphabet_mapper_none.o $(UTILS_DIR)/alphabet_mapper.o

%.o: %.cpp

$(CPP) $(CPPFLAGS) $(INCL) -c $< -o $@

all: lib 

lib: pre $(CODERS_OBJECTS) $(STATIC_BITSEQUENCE_OBJECTS) $(STATIC_SEQUENCE_OBJECTS) $(UTILS_OBJECTS) $(STATIC_PERMUTATION_OBJECTS)
    ar rcs ../lib/libcds.a $(CODERS_OBJECTS) $(STATIC_BITSEQUENCE_OBJECTS) $(STATIC_SEQUENCE_OBJECTS) $(UTILS_OBJECTS) $(STATIC_PERMUTATION_OBJECTS)

pre:
    cp basics.h ../includes/
    cp */*.h ../includes/ 
```

SSA2：

```
CC=g++

CFLAGS=-w -O9 -DNDEBUG -I../libcds/includes/
CODERS_DIR=../libcds/src/coders

CODERS_OBJECTS=$(CODERS_DIR)/huff.o $(CODERS_DIR)/huffman_codes.o

STATIC_BITSEQUENCE_DIR=../libcds/src/static_bitsequence

STATIC_BITSEQUENCE_OBJECTS=$(STATIC_BITSEQUENCE_DIR)/static_bitsequence.o ...

STATIC_SEQUENCE_DIR=../libcds/src/static_sequence

STATIC_SEQUENCE_OBJECTS=$(STATIC_SEQUENCE_DIR)/static_sequence.o ...

UTILS_DIR=../libcds/src/utils

UTILS_OBJECTS=$(UTILS_DIR)/alphabet_mapper_none.o $(UTILS_DIR)/alphabet_mapper.o

all: index

# pattern rule for all objects files

%.o: %.c *.h

    $(CC) -c $(CFLAGS) $< -o $@

%.o: %.cpp *.h

    $(CC) -c $(CFLAGS) $< -o $@

index: bitrankw32int.o bitarray.o  ds/ds.o ds/globals.o ds/helped.o ds/shallow.o ds/deep2.o ds/blind2.o SSA.o

    cp ../libcds/lib/libcds.a SSA.a

    ar rcs SSA.a SSA.o bitrankw32int.o bitarray.o ds/ds.o ds/globals.o ds/shallow.o ds/helped.o ds/deep2.o ds/blind2.o 
```

我的生成文件：

```
CC=g++ -I $(JAVA_HOME)/include -I $(JAVA_HOME)/include/linux
LD_LIBRARY_PATH=./
JNI_NAME= indexlib

all: test

%.o: %.c *.h
    $(CC) -c $(CFLAGS) $< -o $@

test_index: 
    $(CC) run_queries.c -o testIndex SSA.a

test_index_lib: run_queries.o
    ld -shared -soname lib$(JNI_NAME).so -o lib$(JNI_NAME).so run_queries.o SSA.a -lc 
```

可执行的 testIndex 可以正常工作。但是，生成的库无法由 Java 加载并显示错误消息：

> 未定义符号：_ZNSt8ios_base4InitC1Ev

当我使用 nm 查找该符号时，我得到以下结果：

> 000131b0 W _ZN8wt_coderD2Ev
> U _ZNKSt5ctypeIcE13_M_widen_initEv
> U _ZNSo3putEc
> U _ZNSo5flushEv
> U _ZNSo9_M_insertImEERSoT_
> U _ZNSt8ios_base4InitC1Ev
> U _ZNSt8ios_base4InitD1Ev
> U _ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_i
> U _ZSt16__throw_bad_castv
> U _ZSt4cout
> 
> 使用 --demangle 它看起来像这样： 000131b0 W wt_coder::~wt_coder()
> U std::ctype::_M_widen_init() const
> U std::ostream::put(char)
> U std::ostream::flush( )
> U std::ostream& std::ostream::_M_insert(unsigned long)
> U std::ios_base::Init::Init()
> U std::ios_base::Init::~Init()
> U std::basic_ostream > & std::__ostream_insert
> 
> > (std::basic_ostream >&, char const*, int) U std::__throw_bad_cast()
> > U std::cout

所以实际上这可能与[链接器错误有关： undefined reference to `std::ctype<char>::_M_widen_init()](https://stackoverflow.com/questions/4035445/linker-error-undefined-reference-to-stdctypechar-m-widen-init)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:44:28.173

我认为您没有链接到 C++ 标准库。您需要它，因为您要链接的库之一是 C++。

在第一种情况下（目标 test_index）一切正常，因为您正在使用`g++`编译和链接，它将隐式链接到 libstdc++。在共享库的情况下，您链接的`ld`不是隐式链接 libstdc++。

您可以使用`g++`来编译和链接共享库或显式添加 libstdc++ `-lstdc++`。要么应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:43:30.677

所以问题最终变得非常简单：我必须使用 g++ 来创建库，而不是 ld

# java - JScrollPane 的问题——尝试在模型更改时更新它

> ID：15577560
> 
> 赞同：0
> 
> 时间：2013-03-22T18:37:33.833
> 
> 标签：java, swing, arraylist, jscrollpane

我正在编写一个相当复杂的程序，所以我将尝试仅根据问题发生的位置来解释它。

在我看来，我创建了一个 JScrollPane 来显示学生注册的课程列表：

```
registeredPane = new JScrollPane(); registeredPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
registeredPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
c.gridx = 2;
c.gridwidth = 1;
c.gridheight = 2;
c.weightx = 1;
c.weighty = 1;
c.fill = GridBagConstraints.BOTH;
layout.setConstraints(registeredPane, c); 
```

然后，我在我的控制器中，通过在我的模型中调用此函数来更改模型以反映当前活跃学生注册的课程：

```
public void updateCurrentStudentCourses() {
ArrayList<String> courseNames = new ArrayList<String>();

for (Course c: currentStudent.getRegCourses()) {
courseNames.add("" + c.getDepartment().getId() + c.getCode());
}

System.out.println(courseNames);
} 
```

然后，我再次在我的控制器中，通过将 ArrayList 添加到 JScrollPane 来更新视图以反映这些更改：

```
public void updateView() {
view.getNameField().setText(model.getCurrentStudent().getName());

view.getRegisteredPane().removeAll();
view.getRegisteredPane().getViewport().add(model.getCurrentStudentCourses());
view.getRegisteredPane().repaint();
} 
```

滚动条消失了，但就是这样。不显示列表项（我知道在 ArrayList 中）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:45:47.683

**编辑**
如果`model.getCurrentStudentCourses()`返回 an`ArrayList`那么您可以将 inside 的`ArrayList`内容`JTextArea`设置`viewport`为`JScrollPane`that `JTextArea`。您可以进行如下操作：您的`updateView()`方法应该是这样的：

```
JTextArea ta = new JTextArea(30,100);
public void updateView() {
    ta.setText("");
    for (String course : model.getCurrentStudentCourses())
    ta.append(course+"\n");
    view.getNameField().setText(model.getCurrentStudent().getName());
    view.getRegisteredPane().setViewportView(ta);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:57:58.007

要设置滚动窗格的视图，请使用[setViewportView()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)。直接操作滚动窗格的子组件会导致问题（例如，您还要移除滚动条）。

滚动窗格有自己的布局管理器，它只知道滚动窗格创建的组件（各种视口、滚动条、角）。因此，除非您手动设置其位置，否则您添加的任何组件都不会出现。

# sql-server - 无法打开数据库 登录请求。登录失败。用户登录失败

> ID：15577563
> 
> 赞同：3
> 
> 时间：2013-03-22T18:37:46.273
> 
> 标签：sql-server, entity-framework

当我使用管理工作室访问数据库时，一切正常，我访问表......但是当我运行正在使用同一用户访问数据库的 Windows 服务时，会引发此错误。

```
System.Data.EntityException: The underlying provider failed on Open. ---> System.Data.SqlClient.SqlException: Cannot open database "sttcoletorsbvt" requested by the login. The login failed.
Login failed for user 'usr_stt_coletor'.
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   --- End of inner exception stack trace ---
   at DynamicModule.ns.Wrapped_IServicoConfiguracaoColetor_3f81c81b8be24d3998bbc85dfa25d87f.SelecionarConfiguracao()
   at Infraero.TINE3.STTColetor.Negocio.Coletor.ColetarBilhetes(String arquivoParaProcessar)
   at Infraero.TINE3.STTColetor.WindowsService.ManipuladorBilhetes.RealizarProcedimentoColeta(String caminhoArquivo)
   at Infraero.TINE3.STTColetor.WindowsService.ServicoColetor.RealizarColeta() 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:51:41.287

Try ensuring that the user has access to the initial catalog in your connection string. If your connection string doesn't have an initial catalog, add one that the user has access to. This could explain why it works in one case and not the other.

# java - Java InputStream 到 OutputStream 的非阻塞回显

> ID：15577564
> 
> 赞同：2
> 
> 时间：2013-03-22T18:37:52.747
> 
> 标签：java, tcp, stream, echo

它建立了以下代码，似乎运行良好：

```
void pipe(InputStream, OutputStream os) {
  try {
    try {
      byte[] buf = new byte[1024*16];
      int len, available = is.available();
      while ((len = is.read(buf, 0, available > 0 ? available : 1)) != -1) {
        os.write(buf, 0, len);
        available = is.available();
        if(available <= 0)
          os.flush();
      }
    } finally {
      try {
        os.flush();
      } finally {
        os.close();
      }
    }
  } finally {
    is.close();
  }
} 
```

过去我发现如果调用`is.read(buf)`，那么即使有数据，也会阻塞等待更多数据，直到缓冲区满。这是 TCP 数据的回显服务器，所以我的要求是在新数据到达时立即刷新。

我的第一个解决方案是低效的一次一次`is.read()`。后来，当这还不够好时，我正在查看可用的方法并发现`is.available()`. API 声明：

> 单次读取或跳过这么多字节不会阻塞。

所以我现在有一个很好的解决方案，但对我来说看起来很糟糕的一件事是我如何处理`is.available() == 0`. 在这种情况下，我只是读取一个字节作为等待新数据可用的一种方式。

* * *

将数据从 an 传输`InputStream`到 an的推荐方法是什么`OutputStream`，并在数据到达时立即刷新？上面的代码真的是正确的方法，还是我应该改变它，或者使用一些全新的代码？也许我应该使用一些较新的异步例程，或者可能有一个内置的 Java 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:15:01.197

> 过去我发现如果调用is.read(buf)，那么即使有数据，也会阻塞等待更多数据，直到缓冲区满。

不，你没有。TCP 不是那样工作的。套接字不能那样工作；而 Java 套接字不能那样工作。你误会了。

它比你想象的要简单得多：

```
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
}
out.close();
in.close(); 
```

套接字输入/输出流上没有缓冲，因此这将在读取后立即写入所有读取的内容。

在这种情况下或几乎在任何情况下调用 available() 完全是浪费时间。

这也是在 Java 中将任何类型的输入流复制到任何类型的输出流的方法。

如果您想要非阻塞代码，请使用 NIO。但我不认为你真的这样做。

# c# - 使用多线程从 Web 服务器实现高效搜索

> ID：15577566
> 
> 赞同：1
> 
> 时间：2013-03-22T18:37:55.993
> 
> 标签：c#, multithreading, thread-safety

我想使用`httpwebrequest`并从给定范围的页面中获取数千条记录来访问 Web 服务器。对网页的每次点击都会获取 15 条记录，并且网络服务器上几乎有 8 到 10000 个页面。这意味着服务器总共有 120000 次点击！如果使用单个进程轻松完成，则该任务可能非常耗时。因此，多线程是想到的直接解决方案。

目前，我已经创建了一个用于搜索的工作类，该工作类将产生 5 个子工作者（线程）以在给定范围内搜索。但是，由于我在线程方面的新手能力，我无法使其工作，因为我无法同步并使它们一起工作。我知道 .NET 中的委托、操作、事件，但是让它们与线程一起工作变得令人困惑。这是我正在使用的代码：

```
public void Start()
{
    this.totalRangePerThread = ((this.endRange - this.startRange) / this.subWorkerThreads.Length);
    for (int i = 0; i < this.subWorkerThreads.Length; ++i)
    {
        //theThreads[counter] = new Thread(new ThreadStart(MethodName));
        this.subWorkerThreads[i] = new Thread(() => searchItem(this.startRange, this.totalRangePerThread));
        //this.subWorkerThreads[i].Start();
        this.startRange = this.startRange + this.totalRangePerThread;
    }

    for (int threadIndex = 0; threadIndex < this.subWorkerThreads.Length; ++threadIndex)
        this.subWorkerThreads[threadIndex].Start();
} 
```

searchItem 方法：

```
public void searchItem(int start, int pagesToSearchPerThread)
{
    for (int count = 0; count < pagesToSearchPerThread; ++count)
    {
     //searching routine here
    }
} 
```

线程的共享变量之间存在问题，谁能指导我如何使其成为线程安全的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:57:03.433

第一个答案是这些线程实际上并不需要那么多工作来共享变量（假设我理解正确）。它们有一些共享的输入变量（例如目标 Web 服务器），但它们是线程安全的，因为它们没有被更改。计划是他们将建立一个数据库或一些包含他们检索到的记录的数据库。您应该让这五个中的每一个都填写自己的输入存档，然后在所有子工作线程完成后将它们合并到一个线程中。如果您用于存储数据的架构以某种方式变得昂贵......那么，您计划存储多少以及计划将其存储在什么变得相关，那么，也许您可​​以分享什么那些是？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:12:22.903

您面临的真正问题是`Thread`构造函数中的 labmda 表达式正在捕获外部变量 ( `startRange`)。修复它的一种方法是复制变量，如下所示：

```
for (int i = 0; i < this.subWorkerThreads.Length; ++i)
{
    var copy = startRange;
    this.subWorkerThreads[i] = new Thread(() => searchItem(copy, this.totalRangePerThread));
    this.startRange = this.startRange + this.totalRangePerThread;
} 
```

有关创建和启动线程的更多信息，请参阅 Joe Albahari 的优秀[电子书](http://www.albahari.com/threading/#_Creating_and_Starting_Threads)（还有一个关于捕获变量的部分更进一步）。如果您想了解闭包，请参阅[此](https://stackoverflow.com/questions/428617/what-are-closures-in-net)问题。

# php - 将数组内的多个 Json 对象发布到 php？

> ID：15577568
> 
> 赞同：0
> 
> 时间：2013-03-22T18:37:56.993
> 
> 标签：php, jquery, ajax, json

好吧，我尝试了很多方法，但我一直遇到同样的错误。我有这个 Json 字符串：

```
[{"cart":{"itemid":"2","itemAmount":"2"}},{"cart":{"itemid":"3","itemAmount":"1"}}] 
```

我用这个将它传递给php：

```
$.post(
    "order/process.php",
    { finalOrderItems: myJsonString},
    function(data){
        console.log("response - "+ data);
    }
); 
```

一个简单的测试功能。

但响应是 get 这是一个 NULL

哦，是的，现在我只在服务器端有这个：

```
$finalOrderItems = json_decode($_POST["finalOrderItems"]);
var_dump($finalOrderItems); 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:27:53.600

它会帮助你。使用ajax，更好。编辑：如果您的字符串是数组“数据”中键的值的 var，请替换引号，然后只放置一个 var。例子：`data: {'finalOrderItems': myJsonString}`

```
$(document).ready(function() {
            $.ajax({
                // GET or POST
                type: 'GET', 
                url: "json.php",
                data: { 'finalOrderItems': 'myJsonString'},
                dataType: 'json',
                success: function(data) {
                    if(data.length) {
                        for(var i = 0; i < data.length; i++) {
                            var dataX = data[i];
                            console.log('itemid: ' + dataX.cart.itemid[0] + ' - amount: ' + dataX.cart.itemAmount[0]);
                        }
                    }
                }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:55:47.130

在这种情况下..这保存它：

```
php_value magic_quotes 0
php_flag magic_quotes off
php_value magic_quotes_gpc 0
php_flag magic_quotes_gpc off 
```

感谢@Musa 的帮助

# sharepoint - 如何更改 SharePoint 2010 中的“向上导航”按钮

> ID：15577569
> 
> 赞同：0
> 
> 时间：2013-03-22T18:37:57.757
> 
> 标签：sharepoint, sharepoint-2010

我是 SharePoint 新手，请原谅这个简单的问题，但我想更改 SharePoint 2010 中的“向上导航”按钮。我可以访问网站设置和外观部分，但如果我想更改链接文本，或添加新链接，我该怎么做？不应有任何代码更改，因为我认为这可以通过 SharePoint 开箱即用地完成。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:49:08.557

没关系，我需要去的是 Portal Connection！

# c++ - 将表单从 Qt Designer 导入到我在 Qt Creator 中的项目

> ID：15577571
> 
> 赞同：2
> 
> 时间：2013-03-22T18:38:18.333
> 
> 标签：c++, qt

我用我的 Qt Designer 创建了一个表单。现在我想将它导入我的 Qt Creator 项目，但我找不到任何导入按钮......

有谁知道如何将使用 QT Designer 制作的现有文件导入到我的项目中？或者有什么方法可以将我使用 QT Designer 制作的所有内容复制到 Qt Creator 中的表单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:27:52.727

假设您由 Qt-Designer 创建的表单是一个名为`myform.ui`.

只需将它复制到您的 Qt 项目中，在其他文件旁边。

然后右键单击该项目并选择“添加现有文件...”，选择`myform.ui`.

就这样。

![在此处输入图像描述](../Images/415f834c3a932ed42d49f866537d1735.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-20T15:08:48.257

我发现最简单的方法是这样做......

1.  在您的 QT Creator 项目中创建一个新窗口。示例：new_window.ui
2.  转到 QT Designer，文件>另存为，然后用您的 UI 覆盖“new_window.ui”。

即使您正在开始一个新项目，它也可以正常工作。

# php - MySQL 通知：未定义索引：如何解决

> ID：15577572
> 
> 赞同：0
> 
> 时间：2013-03-22T18:38:18.497
> 
> 标签：php, jquery, mysql

我正在使用 PHP、MYSQL 和 JQuery 创建两级下拉选择框。一切似乎都很好，但是当我的父类别没有孩子或者我没有选择孩子时，它会给我错误，我无法理解这个错误的含义以及如何解决。我需要你的帮助。

错误： `Notice: Undefined index: f_child_cat in C:\xampp\htdocs\pathtofile\index.php on line 58 You selected 12 & You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1`

这是我的前端代码

```
<?php if(isset($_POST['submit'])){
    $drop = $_POST['first_child_cat'];
    $f_child_cat = $_POST['f_child_cat'];
    echo "You selected ";
    echo $drop." & ".$f_child_cat;

    $query =    mysql_query("SELECT * FROM qa_categories WHERE parentid = $f_child_cat")
                or die(mysql_error());

                echo '<ul>';
                while($cats = mysql_fetch_array( $query ))
                    echo '<li>',$cats['title'],'</li>';

                echo '</ul>';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:40:08.177

`$_POST['f_child_cat']`未定义在使用它之前先检查该值是否存在。

```
$f_child_cat = isset($_POST['f_child_cat'])?$_POST['f_child_cat']:false;

if ($f_child_cat){
    $f_child_cat = mysql_real_escape_string($f_child_cat); // always escape

    /// your query.
} 
```

**注意：** mysql_* 函数已弃用，请使用 mysqli 或 pdo 作为替代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:40:10.500

这意味着`$_POST['f_child_cat']`未定义（不存在）。您应该使用绑定参数来防止 SQL 注入和使用`mysqli_`或`PDO`函数。

由于这是您查询的一部分，我建议您像这样包装您的查询：

```
if( isset($_POST['f_child_cat']) && !empty($_POST['f_child_cat']) ) {
    ... call db
}
else {
    echo "You didn't select this"
} 
```

# jquery - 用mvc中的加载图标替换按钮

> ID：15577584
> 
> 赞同：1
> 
> 时间：2013-03-22T18:38:46.720
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我正在使用 asp.net MVC4 并通过 jquery 和 asp.net mvc 发布进行大量客户端到服务器端的交互。

我在页面上有一个按钮，点击它可以触发它。当用户单击它并在服务器处理完成后返回正常状态时，是否可以轻松地将按钮变成加载图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:50:22.830

### [Demo Fiddle](http://jsfiddle.net/mohammadAdil/YgfNF/1/)

That would be very simple to do,

```
$('#btnSubmit').click(function(){
             $(this).attr('disabled','disabled');
             $('#yourLoadingImage').show();

           $.ajax({
             url: "test.html",
                }).done(function() {
                   $(this).attr('disabled','');
                   $('#yourLoadingImage').hide();
            });

       }); 
```

You just need to place your image properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:42:49.883

当然。您在按钮旁边有一个隐藏的“加载图标”。您有按钮的 onclick 功能隐藏按钮并显示加载图标。您有来自服务器的回调隐藏加载图标并显示按钮。太容易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:44:14.070

您可以做的是禁用按钮并在 span/div 中显示加载图像旁边。然后进行 ajax 调用，当您从您的操作方法（在 ajax 回调方法中）获得响应时，检查响应并隐藏进度图像并将按钮更改为启用。

```
<input type="button" value="Save" id="btnSave" class="normal" />
<div id="progress" style="display:none;"></div> 
```

你的 javascript 将是

```
$(function(){

  $("#btnSave").click(function(e){    
    e.preventDefault();

    var _this=$(this);

    //Let's disable the button to avoid duplicate posting
     _this.attr('disabled', 'disabled');

    //show the loading image
    $("#progress").html("<img src='PathToSomeLoadingImage.gif' />").show();

    //now make your ajax call
    $.post("@Url.Action("Check","User")",function(data){

       //check the response and enable the button
       _this.removeAttr("disabled", "disabled");

       //hide the progress bar div
       $("#progress").hide();

    }); 

  }); 

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:53:13.050

```
 $.ajax({
        type:'POST',
        url:'',
        data:'variable='+searchword,
                    complete:function(){
                       // here before server procceses
                    }
        success:function(data){
               //when proccesing completed
            }
        } 
```

# c# - 为什么 IEqualityComparer 没有 在 .NET 中扩展 IEqualityComparer

> ID：15577585
> 
> 赞同：3
> 
> 时间：2013-03-22T18:38:47.867
> 
> 标签：c#, generics, iequalitycomparer

`IEnumerable<T>`在 .NET 中，扩展的事实`IEnumerable`经常派上用场。令人沮丧的是，尽管and类实现了这两个接口，但`IEqualityComparer<T>`并`IComparer<T>`没有扩展它们的非泛型对应物。这种差异有原因吗？`EqualityComparer<T>``Comparer<T>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:41:15.507

If I have a sequence of strings I can use that to get a sequence of objects, since each string is also an object. This is true of any sequence; I can always get a sequence of objects when given any sequence.

If I have an object that can compare two strings I can't use it to compare two objects, since those two objects might not be strings.

The reason for this is because `IEnumerable<T>` is covariant, whereas `IComparer` and `IEqualityComparer` are not. (Not just in the C# sense, although that's true as well, but also in the conceptual computer science sense.)

As for why the concrete `EqualityComparer<T>` and `Comparer` classes implement both interfaces, rather than not just the generic versions, is a decision that can only really be explained by the employees who choose to create those types. I'd imagine that they did it because at the time enough people were using the non-generic versions of the interfaces that they wanted the types to be usable with all of the existing non-generic code.

# javascript - jQuery 验证插件检查不同行之间的输入

> ID：15577586
> 
> 赞同：2
> 
> 时间：2013-03-22T18:38:48.093
> 
> 标签：javascript, jquery, jquery-validate

我正在使用 jQuery 验证插件来检查两个动态生成的行中的值。但我对 jquery 的选择感到困惑。下面是我损坏的[演示](http://jsfiddle.net/godhong/fdmN3/)，我感谢所有输入。

我的 HTML 表类似于

```
<tr class="tab_noa1"><td><input name="jm' + i + '" type="text" size="5" value="' + i + '"/></td><td><input type="text" size="5" name="mm' + i + '" id="id_mm' + i + '"/></td></tr> 
```

这是根据用户选择生成的。然后我需要从名为`mmi`（第 i 行）的元素开始，找到

一个。它的前一行的值`mmi-1`（它不起作用）

```
 $(element).parent().prev('tr').find('td:nth-child(2)').children('input').val(); 
```

湾。它的左邻居在同一行`jm_i-1`

```
$(element).parent().prev('td').children('input').val(); 
```

## 发现我错过`.parent()`了选择a。它应该是

```
$(element).parent().parent().prev('tr').find('td:nth-child(2)').children('input').val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:13:33.440

我假设您想在单击提交按钮时执行此操作？`app`如果是这种情况，您可以在和输入上放置一个类，`month`以便使用 jQuery 更容易获取它们。在提交处理程序中，您可以抓取所有行并向后迭代它们并询问`app`输入值和前一行的`month`值。这是一个更新的小提琴，它将您提到的值打印到控制台：http: [//jsfiddle.net/fdmN3/2/](http://jsfiddle.net/fdmN3/2/)

# java - onPostExecute 上的 NullException 无效

> ID：15577589
> 
> 赞同：1
> 
> 时间：2013-03-22T18:39:04.253
> 
> 标签：java, android, download, android-asynctask

我正在尝试完成我的 DownloadFile 类，它是 AsyncTask 的子类。所以这是类的代码：

```
private class DownloadFile extends AsyncTask<String, Integer, String>
{
    @Override
    protected String doInBackground(String... sUrl)
    {
        try
        {
            URL url = new URL(sUrl[0]);
            URLConnection urlc = url.openConnection();
            urlc.connect();
            int fileLength = urlc.getContentLength();
            InputStream is = new BufferedInputStream(url.openStream());
            OutputStream os = new FileOutputStream(Environment.getDataDirectory().getAbsolutePath().concat("data/com.markosoft.maturko/databases/proba.mp3"));
            byte Data[] = new byte[1024];
            long total = 0;
            int count;
            while((count=is.read(Data))!=-1)
            {
                total+=count;
                publishProgress((int)total * 100 / fileLength);
                os.write(Data,0,count);
            }
            os.flush();
            os.close();
            is.close();
        }
        catch(Exception e)
        {

        }
        return null;
    }
    @Override
    protected void onProgressUpdate(Integer... progress)
    {
        dl.setProgress(progress[0]);
    }
    @Override
    protected void onPostExecute(String unused)
    {
        dl.dismiss();
        Toast.makeText(getActivity(), "Podaci uspešno preuzeti", Toast.LENGTH_SHORT).show();
    }
} 
```

我收到 NullPointerException 错误和“线程退出未捕获的异常”错误。当我添加显示下载已完成的 Toast 调用时发生此错误，但据我所知 onPostExecute 是在 UI 线程上执行的，所以我没有看到问题。让我烦恼的另一件事是下载没有完成，或者根本没有开始。当我调用调用 DownloadFile.execute(link) 函数的函数时，onPostExecute 函数会立即激活...感谢您的帮助

编辑：dl 是在调用 dlf.execute(link) 之前初始化的 ProgressDialog，因此这不应该是 NullPointerException 的原因...编辑：这是请求的 LogCat 日志：

```
03-22 19:56:51.119: W/dalvikvm(546): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
03-22 19:56:51.140: E/AndroidRuntime(546): FATAL EXCEPTION: main
03-22 19:56:51.140: E/AndroidRuntime(546): java.lang.NullPointerException
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.widget.Toast.<init>(Toast.java:92)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.widget.Toast.makeText(Toast.java:233)
03-22 19:56:51.140: E/AndroidRuntime(546):  at com.markosoft.maturko.Upit$DownloadFile.onPostExecute(Upit.java:68)
03-22 19:56:51.140: E/AndroidRuntime(546):  at com.markosoft.maturko.Upit$DownloadFile.onPostExecute(Upit.java:1)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.os.AsyncTask.finish(AsyncTask.java:602)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.os.AsyncTask.access$600(AsyncTask.java:156)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.os.Looper.loop(Looper.java:137)
03-22 19:56:51.140: E/AndroidRuntime(546):  at android.app.ActivityThread.main(ActivityThread.java:4340)
03-22 19:56:51.140: E/AndroidRuntime(546):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 19:56:51.140: E/AndroidRuntime(546):  at java.lang.reflect.Method.invoke(Method.java:511)
03-22 19:56:51.140: E/AndroidRuntime(546):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-22 19:56:51.140: E/AndroidRuntime(546):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-22 19:56:51.140: E/AndroidRuntime(546):  at dalvik.system.NativeStart.main(Native Method) 
```

或者如果您更愿意在 Notepad++ 中查看它，请点击以下链接： [Log](http://www.sendspace.com/file/2gs2sk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:52:56.543

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html). Look at the topic under heading **The 4 steps**.

You are getting NullPointerException for the Toast. If you calling asynctask from say MainActivity then

Try

```
 Toast.makeText(MainActivity.this, "Podaci uspešno preuzeti", Toast.LENGTH_SHORT).show(); 
```

Your should pass activity context,your text and duration as parameters to makeText.

```
 OR 
```

As suggested by Eng.Fouad your dl is null.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:47:23.643

我怀疑这是因为`dl`is `null`，所以在第一次调用时`onProgressUpdate()`， a`NullPointerException`被 in 中的 catch-bock 抛出并捕获`doInBackground()`。

接下来，`onPostExecute()`被调用并`NullPointerException`再次抛出，但这一次它被传播到应用程序的 android 主启动器。

# java - 无法从 String 转换为 Int

> ID：15577597
> 
> 赞同：0
> 
> 时间：2013-03-22T18:39:32.927
> 
> 标签：java, arraylist, string-formatting, permutation, parseint

我正在研究解决 TSP 问题的方法。我已经生成了“123456”的所有排列`String`，但是，我需要将其转换为`ArrayList`这样的`Integer`[1,2,3,4,5,6]...[6,5,4,3,2 ,1]。然后我将它存储到一个`ArrayList`of 中`ArrayLists`。到达那里后，我将能够比较所有需要前往的城市。

当我运行我的代码时，我有一个生成排列的方法，然后是一个将该排列更改为`ArrayList`of 的方法`Integer`。当我转换它们时，我得到了异常`java.lang.NumberFormatException: For input string: ""`。我不知道有什么其他方法可以`String`到达`Integer`

这是我的代码。

```
public static String permute(String begin, String string){
    if(string.length() == 0){
        stringToIntArray(begin+string);
        return begin + string + " ";

    }
    else{
        String result = "";
        for(int i = 0; i < string.length(); ++i){
            String newString = string.substring(0, i)  + string.substring(i+1, string.length());;
            result += permute(begin + string.charAt(i), newString);
        }
        stringToIntArray(result);
        return result;

    }
}

public static void stringToIntArray(String s){
    ArrayList<Integer> perm = new ArrayList<Integer>();
    String [] change = s.split("");
    for(int i = 0; i < 7; ++i){
        int integer = Integer.parseInt(change[i]);
        System.out.println(integer);
    }

}

public static void main(String[] args) {
    permute("", "123456");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:43:14.463

这些行

```
String [] change = s.split("");
for(int i = 0; i < 7; ++i){
    int integer = Integer.parseInt(change[i]);
    System.out.println(integer);
} 
```

给定一个`String`类似的“12345”，当您将其拆分为空时，它将分隔每个字符。给你一个数组`["","1","2","3","4","5"]`。由于空`String` `""`不是数字，因此您将获得`NumberFormatException`. 您可以将索引更改`i`为 start at`1`以忽略第一个 empty `String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:43:38.927

该`split`方法在拆分时`""`会生成一个空字符串作为数组的第一个元素，因此您需要从 i = 1 开始迭代。

此外，停止迭代`change.length`以确保在超过 6 个字符时处理所有字符会更安全，如果字符数少于 6，则不会越界。

```
String [] change = s.split("");
for(int i = 1; i < change.length; ++i){ // ignore first element
    int integer = Integer.parseInt(change[i]);
    System.out.println(integer);
} 
```

# r - rollapply 回归“环境”错误

> ID：15577602
> 
> 赞同：0
> 
> 时间：2013-03-22T18:39:44.667
> 
> 标签：r, zoo

我有这个数据集 [https://gist.github.com/natemiller/42eaf45747f31a6ccf9a](https://gist.github.com/natemiller/42eaf45747f31a6ccf9a)

我正在尝试使用`rollapply`zoo 包中的滚动回归，按照`rollapply`帮助中的示例，并继续得到我想象的一个简单错误，但我无法解决这个错误。

如果我将上述数据加载为“dat”，那么我会这样做..

```
 dat$Date<-as.POSIXct(dat$Date, format="%m/%d/%y %H:%M")

    library(zoo)

    roll<-rollapply(dat, width = 6, FUN = function(d) coef(lm(Temp~Date, data=d)),  align="right") 
```

我得到了错误

```
 Error in eval(predvars, data, env) : invalid 'envir' argument 
```

`dat`应该是 的适当输入`lm`，这`lm`在 之外有效`rollapply`，因此错误`rollapply`本身就出现了。我认为它很简单，但我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:57:55.443

尝试这个：

```
library(zoo)
dat <- read.zoo("sampleTempData.csv", header = TRUE, sep = ",", 
    index = 2, tz = "", format = "%m/%d/%y %H:%S")

Seq <- zoo(seq_along(dat), time(dat))
coefs <- rollapply(Seq, 6, function(ix) coef(lm(dat ~ time(dat), subset = ix))) 
```

已添加：海报已添加到问题中，因此此处有附加代码。请注意，我们使用`POISIXct`日期/时间，因此与`coefs`动物园对象关联的时间单位以秒为单位，无论输入格式如何。最后，我们将秒数转换为天数。看`?aggregate.zoo`

```
colnames(coefs) <- c("Intercept", "slope")
Seq.coefs <- zoo(1:nrow(coefs), time(coefs))
max.coefs <- function(ix) coefs[which.max(coefs[ix, 2]), ]
ag <- aggregate(Seq.coefs, as.Date, max.coefs)
transform(ag, slope = slope * 24 * 3600) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:25:12.573

首先，我认为你所做的没有意义。 **您尝试使用 6 个值进行回归**。

发生错误是因为您没有为`lm`. **d**是一个长度为 6 的原子向量，或者您需要一个包含 2 列 Temp 和 date 的 data.frame 。例如，第一个 d 是：

```
d
9.5 9.5 9.5 9.5 9.5 9.5 
```

应用`lm`此 d ，您会重现错误：

```
lm(Temp~Date, data=d)
Error in eval(predvars, data, env) : 
  numeric 'envir' arg not of length one 
```

你没有`Date`当前滚动窗口的，你只有值。

# wordpress - Wordpress 主题给出警告：参数无效

> ID：15577607
> 
> 赞同：2
> 
> 时间：2013-03-22T18:39:59.630
> 
> 标签：wordpress

我正在使用 wordpress 主题并在安装它之后。它是这样说的：

```
Warning: Invalid argument supplied for foreach() in /mnt/web7/c0/97/51996897/htdocs/salashomecooking/wp-content/themes/wootique/functions/admin-functions.php on line 3193 
```

这是de函数。foreach 从第 3193 行开始

```
 if ( ! function_exists( 'wooframework_load_google_fonts' ) ) {
function wooframework_load_google_fonts() {
    global $woo_used_google_fonts;

    $c = 0;
    $fonts = '';
    foreach( $woo_used_google_fonts as $font ) {
        if( $c > 0 ) {
            $fonts .= '|';
        } else {
            ++$c;
        }
        $fonts .= $font;
    }

    woo_shortcode_typography_loadgooglefonts( $fonts , 'woo-used-google-fonts' );
} // End wooframework_load_google_fonts()
}
add_action( 'wp_footer' , 'wooframework_load_google_fonts' ); 
```

如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:29:12.507

我在[Wordpress 论坛中找到了这个](http://wordpress.org/support/topic/warning-invalid-argument-supplied-for-foreach-in-4?replies=4)

显然你需要做的就是去**仪表板**>**神秘主题**>**更新框架**并更新框架。

# jquery - jQuery 未加载（jquery-rails 2.2.1 & rails 3.2.1）

> ID：15577610
> 
> 赞同：2
> 
> 时间：2013-03-22T18:40:12.653
> 
> 标签：jquery, ruby-on-rails-3.2

不久前，我在官方演练博客之后启动了一个 Rails 应用程序（我的第一个）并对其进行了修改。看来我的 jQuery 没有正确加载。我的 application.js 如下所示...

```
//
//= require jquery
//= require jquery_ujs
//= require_tree .

$(document).ready(function() { alert('hello world'); }); 
```

Chromium 给我“未捕获的 ReferenceError：$ 未定义”我的 application.html.erb 开始如下...

```
<!DOCTYPE html>
<html>
<head>
    <title>Tanuki</title>
    <%= javascript_include_tag "application" %>
    <%= stylesheet_link_tag "application" %>
    <%= csrf_meta_tags %>
</head> 
```

我正在使用一些宝石，包括 Devise 2.2.3（不确定是否重要）有什么想法吗？
完整的回购在[https://github.com/MidnightDemon/tanuki](https://github.com/MidnightDemon/tanuki)

已修复：显然我的 ArchLinux 存在兼容性问题 - 通过更改为 Rails 3.2.13 和 railties 3.2.13 修复（在 OSX 上工作，这很奇怪）

# jquery - 将来自 $.get 的响应存储在变量中以供以后使用

> ID：15577612
> 
> 赞同：4
> 
> 时间：2013-03-22T18:40:21.877
> 
> 标签：jquery, variables, get, store

我正在使用 $.get 从 php 中检索响应，但是如何将响应存储在变量中，以便稍后在代码中使用它？谢谢！

```
 $.get('promo_getstate.php', {
            email: emailaddress,
            country: 'DE',
            lang: lang,
            source: '1304_Spring_dly'
                }, function (data) {
                    console.log('data is' + data);
                    getstate = data;
                 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:53:56.553

只需在 .get 调用本身之外声明要设置的变量。那么它将可以在您想要将其设置为返回数据的回调函数内部访问。

```
var getstate = "";
$.get('promo_getstate.php', {
        email: emailaddress,
        country: 'DE',
        lang: lang,
        source: '1304_Spring_dly'
            }, function (data) {
                console.log('data is' + data);
                getstate = data;
             }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:49:01.197

您需要确保可以在发起呼叫的范围之外访问分配。

如果`getstate`未在 get 请求之外声明，则它将不可用于以后的调用。

问题是：您何时或在什么范围内需要这些数据？

简单地说，你可以把它放在窗口的范围内。尽管将所有内容都放在全局范围内是不好的做法，但这会让您知道将其放在哪里。

```
console.log('data is' + data);
window.getstate = data; 
```

现在，在它被分配后的任何时候，它都可以通过其中一个`window.getstate`或只是`getstate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T05:26:07.783

$.get 的工作方式是浏览器仍在获取数据，同时它还在处理 $.get 之后的行。

```
$document.ready(function() {
    var $HTML="";  //global variable
     $(".button").click(function(event){
         console.log('before $.get: ');
         $.get('form1.html #form1', function(data){
             $HTML = data;
             console.log('inside $.get: ' + $HTML);
         });
      console.log('outside $.get: ' + $HTML);
}); 
```

所以解决方案是，所有需要 $.get 值的代码都应该放在 get 语句中。
或者，您可以以某种方式让它等到结果返回并且 $.get 代码完成后再处理之后的行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-04T19:53:06.750

最好的解决方案是使用

```
setTimeout(function(){
            console.log('outside $.get: ' + $HTML);
}, 100); 
```

# internet-explorer - 修改本地组策略编辑器的脚本？（互联网设置自动完成）

> ID：15577613
> 
> 赞同：2
> 
> 时间：2013-03-22T18:40:26.173
> 
> 标签：internet-explorer, autocomplete, registry, inno-setup, group-policy

我正在尝试通过在 innosetup 中编写脚本来自动关闭本地组策略编辑器中的所有自动完成 Internet 设置。这个想法是它会修改计算机/服务器，以便用户不必手动执行这些步骤。

[本地组策略编辑器] -> 用户配置 -> Windows 设置 -> Internet Explorer 维护 -> 高级（在上一步中单击首选项模式后） -> 取消选中“自动完成”部分中的所有内容

我曾尝试修改这些键

> [HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main]
> "UseFormSuggest"="no"
> "FormSuggest Passwords"="no"
> "FormSuggest PW Ask"="no"
> 
> [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\AutoComplete] "追加完成"="no"
> "使用自动完成"="no"
> "AutoSuggest"="no"

但是在这样做之后，我回到本地组策略编辑器，这些框仍然被选中。所以我想知道除了修改注册表项之外是否还有其他方法可以做到这一点，或者我是否以正确的方式这样做，或者缺少密钥等......？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T14:29:06.280

在 Windows 8.1（尚未测试任何其他版本）中，我注意到在本地组策略编辑器中启用或禁用“禁用表单自动完成”设置将在以下位置创建两个注册表值`HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main`：

*   `Use FormSuggest`
*   `UseFormSuggest`

但是，如果您将其重置为“未配置”，则只有第一个（“使用”和“FormSuggest”之间有空格的那个将被删除。除了这种奇怪的行为，我可以确认禁用这三个（或四个）设置将阻止 IE 建议或要求保存密码。

*   `"Use FormSuggest"="no"`
*   `"UseFormSuggest"="no"`
*   `"FormSuggest Passwords"="no"`
*   `"FormSuggest PW Ask"="no"`

**笔记**

它也适用于 WPF WebView。确保重新启动组策略管理单元。我还必须关闭 IE 并重新启动它才能使设置生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:25:47.197

对于本地组策略，微软有一把“瑞士军刀”。[它被称为 LOCALGPO，它是从 Microsoft 安全合规管理器 ( http://technet.microsoft.com/en-us/library/cc677002.aspx](http://technet.microsoft.com/en-us/library/cc677002.aspx) )下载的一部分。

虽然这里和这里有一些关于如何使用该工具的指南，但我在我的组策略书中全面介绍了它，可以在这里找到：[http ://www.gpanswers.com/book](http://www.gpanswers.com/book)

它在附录 B 中。

如果您需要更多帮助，我还会在我的 GPTraining 课程 (www.Gpanswers.com/training) 中介绍它。

希望 LocalGPO 工具可以帮助您。

-Jeremy Moskowitz，组策略 MVP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T09:55:55.320

我使用[了 LGPO.exe 工具](https://blogs.technet.microsoft.com/secguide/2016/01/21/lgpo-exe-local-group-policy-object-utility-v1-0/)并且它有效：

1.  使用 LGPO.exe 将策略导出到文本文件
2.  编辑文本文件
3.  使用 LGPO.exe 加载文本文件

# servicestack - ServiceStack：默认情况下是否缓存“GET”结果？

> ID：15577615
> 
> 赞同：2
> 
> 时间：2013-03-22T18:40:29.660
> 
> 标签：servicestack

我遇到了一个问题，即我在 POST 之后的第二个 GET 请求根本没有被执行，而是在 POST 之前返回结果。我根本看不到提琴手发出的请求。如果我重新启动应用程序，那么它会返回正确的结果。我没有设置任何缓存。路由配置如下：

```
container.RegisterAutoWired<ComplianceService>().ReusedWithin(ReuseScope.Request);

Routes.Add<CertificateDefinitionList>("/certificates","GET");
Routes.Add<CertificateDefinition>("/certificates/{CertificateDefinitionId}", "GET");
Routes.Add<CertificateDefinitionSave>("/certificates","POST"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:58:15.913

ServiceStack中没有**隐式**缓存。如果您想缓存响应，您需要明确请求它，如[缓存 wiki 所示](https://github.com/ServiceStack/ServiceStack/wiki/Caching#cache-a-response-of-a-service)：

```
public object Get(CachedOrders request)
{
    var cacheKey = "unique_key_for_this_request";
    return RequestContext.ToOptimizedResultUsingCache(base.Cache,cacheKey, () => 
        {
            //Delegate is executed if item doesn't exist in cache 
            //Any response DTO returned here will be cached automatically
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:48:38.027

这可能是由您的代理在本地缓存结果引起的。默认情况下，在 http get 上启用缓存。在您的 http 标头中指定 http 缓存。

# python - Intellij 不打开 python 源代码

> ID：15577617
> 
> 赞同：0
> 
> 时间：2013-03-22T18:40:31.180
> 
> 标签：python, intellij-idea

这可能与[Intellij Python 不从 .pydevproject 导入](https://stackoverflow.com/questions/15475913/intellij-python-does-not-import-from-pydevproject)相关的问题。我有带有 python 插件的 Intellij 12.x 并配置了 2.7.1 插件 SDK（不确定 Python SDK 在网络驱动器中是否重要）

IntelliJ 似乎可以识别我的导入，但它无法编译或深入了解源代码。这实际上使它对任何开发都毫无用处，因为我遇到了大量的语法错误。

例如，如果我这样做`import unittest`，它不会显示任何错误，但是当我深入到 unittest 时，我只能看到 unittest.py 的前 20 个字符左右（下面的片段）。

```
"""
Python unit testing framework, based on Erich 
```

我检查了文件路径并转到文件系统并在记事本中打开，我可以看到它包含所有内容。怎么了？当我键入时，`unittest.`我希望看到模块中的所有方法，但 IntelliJ 没有显示任何内容（可能是因为它无法正确查看源代码）

PS：在我的 Intellij 库和 SDK 中，我添加了类和源文件夹

请注意，当您打开 unittest 时，它会打开文件，如图所示，仅显示前 30 行。如果我`M:\dist\....unittest\__init.py__`在记事本中打开，我可以看到它有我期望的内容。

# apache - 用 mod_rewrite 重写 URL

> ID：15577621
> 
> 赞同：0
> 
> 时间：2013-03-22T18:40:40.147
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

我需要从 to 重写 URL`http://example.com/file.php?id=test&cat=category`我`http://example.com/file?test&cat=category` 只实现了用以下方式重写`/file.php`路径`/file`：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^/?(\w+)$ $1.php [QSA,NC,L] 
```

如何重写 URL 的其余部分？第二个问题：是否可以阻止默认 URL 访问，因此用户必须使用重写的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:24:13.990

要检查查询字符串中的值，您需要对`QUERY_STRING`变量使用 RewriteCond，如下所示：

```
RewriteCond %{QUERY_STRING} ^([a-z]+)&cat=([a-z]+)$ 
```

这表示只有在查询字符串包含一组连续的小写字母后跟一个＆符号，然后是“cat =”后跟另一组连续的字母时，才必须执行 RewriteRule。捕获组可以在下一个 RewriteRule 中使用`%1`，`%2`如下所示：

```
RewriteRule ^([a-z]+)$ $1.php?id=%1&cat=%2 [L] 
```

您不想使用该`QSA`标志，因为这会将用户的无效查询字符串附加到重写 URL 的末尾。您可能仍希望使用该`NC`标志来忽略匹配模式中的大小写，但如果可能，最好使用仅小写的文件名。

关于阻止对最终（.php）路径的请求，我想不出办法来做到这一点，因为即使是最终的 URL 也必须通过 .htaccess 规则，所以禁止访问它会破坏重定向。

# javascript - IE中的慢复选框？

> ID：15577622
> 
> 赞同：0
> 
> 时间：2013-03-22T18:40:44.827
> 
> 标签：javascript, html, checkbox

[http://jsfiddle.net/RAS4P/](http://jsfiddle.net/RAS4P/) [在 IE 中打开——它只是一个复选框——我使用的是 IE9，还不确定其他的。]

```
`code` 
```

如果您开始非常快地点击，只是点击离开，复选框就跟不上。一些点击没有选中/取消选中复选框，它们只是被忽略了---除了附加到复选框的函数（未在小提琴中显示）正在触发，我 console.logged 它并发现它正在捕获每次点击...但复选框元素本身并没有改变。

为什么会这样？

这只发生在 Internet Explorer 中，刚刚实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T19:07:18.193

事实上，这是设计使然。IE 会忽略复选框的双击，因为它可以保护用户免受自己的伤害，以防他们天真地尝试将 Windows 双击打开方法引入浏览器。

您可以禁用复选框的默认操作并手动对其进行编码，以便在必要时快速切换复选框，但我发现这个错误并不值得仅仅为了迎合 IE 用户而费心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:59:59.550

我的猜测是这是专门为支持触摸设备而设计的。这将有助于消除手指打开/关闭复选框时的任何波动。这纯粹是一个理论，我没有任何事实来支持这一点，这对我来说似乎是有道理的。

# javascript - 遍历字符串数组只返回每个字符串的一个字母

> ID：15577625
> 
> 赞同：1
> 
> 时间：2013-03-22T18:40:55.870
> 
> 标签：javascript, loops, for-loop

我试图通过让它循环遍历字符串数组并在 3 秒延迟后显示每个字符串来测试 javascript 中的计时函数，但是当我调用该函数时，它会执行一种奇怪的模式，即只取第一个字符串的第一个字母，然后第二个字符串的第二个字母，依此类推...如果数组中的第四个项目没有第四个字母，则打印未定义。请帮忙。谢谢

```
function myFunc () {
    setTimeout(function () {
        var contacts = {
            addressBook : [
            {
                'name' : 'Jane',
                'email' : 'JaneDoegmail.com'
            },
            {
                'name' : 'Meggie',
                'email' : 'meggiegmail.com'
            },
            {
                'name' : 'John',
                'email' : 'johnDoegmail.com'
            },
            {
                'name' : 'Paul',
                'email' : 'paulgmail.com'
            },
            {
                'name' : 'Bo',
                'email' : 'bogmail.com'
            }
            ]
        };
        var object = contacts.addressBook;
        var i;
        for (var i = 0; i < object.length; i++) {
            var item = object[i];
            var name = item.name;
            var email = item.email;

            document.write(name[i]);
        };

        if (i < 10) {
            myFunc();
        };
    }, 3000)
}
myFunc(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:51:18.383

Here is a [working jsFiddle demo](http://jsfiddle.net/Pba34/)

Basically, your output is correct from what you tell it to do, it is showing you the character at the index of the name string. You should use `(name)` instead of `(name[i])`.

However, I think this is what you were probably after: **[suggested improvement demo](http://jsfiddle.net/Pba34/2/)**

Basically, it allows the loop to be externally controller by a counter which will increment as called and stop once it has displayed all of the contact addresses.

js:

```
var c = document.getElementById("console");
var contacts = {
  addressBook : [
    {
        'name' : 'Jane',
        'email' : 'JaneDoegmail.com'
    },
    {
        'name' : 'Meggie',
        'email' : 'meggiegmail.com'
    },
    {
        'name' : 'John',
        'email' : 'johnDoegmail.com'
    },
    {
        'name' : 'Paul',
        'email' : 'paulgmail.com'
    },
    {
        'name' : 'Bo',
        'email' : 'bogmail.com'
    }
  ]
};
var i = 0;
(function myFunc () {
 var item = contacts.addressBook[i++];
 var name = item.name;
 var email = item.email;
 c.innerHTML += name +", " + email + "<br>";
 if (i < contacts.addressBook.length) {
  setTimeout(myFunc,3000);
 }
})() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:43:24.133

而不是`document.write(name[i]);`，做`document.write(name);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:49:10.617

一探究竟：

```
myFunc();
function myFunc () {
setTimeout(function () {
    var contacts = {
    addressBook : [
        {
            'name' : 'Jane',
            'email' : 'JaneDoegmail.com'
        },
        {
            'name' : 'Meggie',
            'email' : 'meggiegmail.com'
        },
        {
            'name' : 'John',
            'email' : 'johnDoegmail.com'
        },
        {
            'name' : 'Paul',
            'email' : 'paulgmail.com'
        },
        {
            'name' : 'Bo',
            'email' : 'bogmail.com'
        }
    ]
};
var object = contacts.addressBook;
var i;
for (var i = 0; i < object.length; i++) {
    var item = object[i];
    var name = item.name;
    var email = item.email;

    document.write(name+" -->  ");
};

if (i < 10) {
    myFunc();
};
}, 3000)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:45:04.733

您的`document.write(name[i]);`

应该

```
document.write(name); 
```

谢谢

# php - 使用 PHP 从 MySQL 表中获取数据

> ID：15577627
> 
> 赞同：0
> 
> 时间：2013-03-22T18:41:02.163
> 
> 标签：php, mysql

```
$get="SELECT dial_prod_total FROM dial_product WHERE dial_prod_id='$dpname'";
$idgen=mysql_query($get) or die(mysql_error());
$total=$idgen+$dpqty;
$dpbuy="UPDATE dial_product set dial_prod_total= '$total'".
       "WHERE dial_prod_id='$dpname'";
$result1=mysql_query($dpbuy) or die(mysql_error()); 
```

我想`dial_prod_total`使用存储在其中的 ID获取列中的数据`$dpname`，然后更新值并存储在同一列中。该值在列中被替换，但它不是正确的值。我犯了什么错误？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:47:10.553

你为什么不做

```
UPDATE dial_product SET dial_prod_total = dial_prod_total + $dpqty
WHERE dial_prod_id = '$dpname' 
```

* * *

您的代码容易被注入。您应该对 PDO 或 mysqli 使用正确的参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:50:54.310

You query can be rebuild as below.

```
"UPDATE dial_product set dial_prod_total = dial_prod_total + ".$total." WHERE dial_prod_id = ".$dpname." "; 
```

# c# - Zxing qr code decode can't get it work

> ID：15577630
> 
> 赞同：0
> 
> 时间：2013-03-22T18:41:09.813
> 
> 标签：c#, wpf, qr-code, zxing

I've searched all the forum and I cannot find the answer (and this is my first post, so sorry for possible errors).

I've downloaded Zxing pack and I would like to get the qr code decoder work (in c#, a WPF application). The problem is that I get no error while compiling, and the application goes well (I take the input stream from kinect rgb camera) but it seems it does nothing.

I report some code (probably I've made some error...):

```
 RGBLuminanceSource ls = new RGBLuminanceSource(bit, frame.Width,frame.Height);
 Result result = new QRCodeReader().decode(new BinaryBitmap(new HybridBinarizer(ls)));
 if (result != null)
      Console.WriteLine("yahoo!");
 else
      Console.WriteLine("oh no"); 
```

with frame that is the frame captured by the kinect, and bit is the byte[] array that RGBLuminanceSource want as input, and I've made it by this:

```
byte[] bit= new byte[frame.PixelDataLength];
colorFrame.CopyPixelDataTo(bit); 
```

What pass is that, when I put the paper with the qr code in front of the camera, it always return me the message "oh no", and I cannot figure out what I'm doing wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:57:36.377

据我所知，您从 kinect 相机获得的图像是翻转的。您必须在解码之前将其翻转回来。您可以在此处找到更多详细信息：http: [//zxingnet.codeplex.com/discussions/401772](http://zxingnet.codeplex.com/discussions/401772)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-30T10:42:08.133

如果有人偶然发现这个问题，您可以检查的东西很少。

1.  从 ZXing git 下载 QRCodeDecoder 示例并准备就绪

2.  将您的位图文件保存到文件夹位置。

3.  从 QRCodeDecoder 检查保存的图像是否正确解码。

如果您通过网络摄像头或其他视频源将其用于 QR 码扫描仪，请检查您是否将位图图像转换为正确的像素格式。

希望这可以帮助

# javascript - 从对象元素创建单选按钮列表

> ID：15577636
> 
> 赞同：3
> 
> 时间：2013-03-22T18:41:36.463
> 
> 标签：javascript

我有一个对象数组，我想获取其中一个对象并从对象内容创建一个单选按钮列表。到目前为止，这是我的代码。

```
var allQuestions = [{question: "This is question number one", choices: ["one", "two", "three", "four"], correctAnswer:"two"},{question: "This is question number two", choices: ["dog", "cat", "bear", "lion"], correctAnswer:"bear"}];

var currentQuestion = allQuestions[1].question;

document.getElementById('question').innerHTML = currentQuestion;

function choiceList() { 

    for (choices in allQuestions[0]) {

    var choiceSelection = document.createElement('input');

    choiceSelection.setAttribute('type', 'radio');
    choiceSelection.setAttribute('name', 'choice');

    document.getElementById('answersBox').innerHTML = choiceSelection;
    }
} 
```

这是我的 HTML：

```
<body>
    <form>
        <label id="question">Question:</label><br />
        <div id="answersBox">
        </div>
        <input type="button" value="save" />
    </form>
  <script src="scripts.js"></script>
</body> 
```

问题是，单选按钮没有显示在 answersBox div 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:45:02.580

本质上，您需要将您创建的每个元素附加到 DOM 中的正确节点，而不是设置其 HTML 值（这是行不通的，因为choiceSelection 是一个 DOM 元素，而不是表示其 HTML 代码的字符串）

简而言之，改变

`document.getElementById('answersBox').innerHTML = choiceSelection;`

到

`document.getElementById('answersBox').appendChild(choiceSelection);`

我已经实现了`label`在单选按钮旁边添加 HTML 元素。

这是一个有效的[jsfiddle 示例](http://jsfiddle.net/opherv/vuPB4/)

我还想让您注意，`for (choices in allQuestions[0])`它在 for 循环中创建了一个名为“choices”的内部变量，它遍历 allQuestions[0] 的属性，在本例中它们是“question”、“choices”和“correctAnswer”。

我认为您打算做的是遍历“选择”数组，可以这样做： `for (choice in question.choices)`- 然后在 for 循环的每一步中，选择都填充有数组索引。

然后，您可以从循环内部访问选择文本，如下所示： `question.choices[choice]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:49:39.760

将单选按钮附加到循环中的[documentFragment 。](https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment)`for`在循环之后将片段（包含所有选项）附加到`document`自身。

```
var frag = document.createDocumentFragment();

for (choices in allQuestions[0]) {

    var choiceSelection = document.createElement('input');
    choiceSelection.setAttribute('type', 'radio');
    choiceSelection.setAttribute('name', 'choice');

    frag.appendChild(choiceSelection);
}

document.getElementById('answersBox').appendChild(frag); 
```

[**例子**](http://jsfiddle.net/ChaseWest/vFkpY/)

*   [这里](http://ejohn.org/blog/dom-documentfragments/)有一篇关于使用文档片段的好文章。
*   [追加子](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)
*   [文档片段](https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment)

**编辑：**

[**更新了标签**](http://jsfiddle.net/ChaseWest/vFkpY/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:45:17.250

您需要使用**.appendChild**函数，因为**choiceSelection**是代码中的 DOM 元素，而不是 HTML 字符串。

`document.getElementById('answersBox').appendChild(choiceSelection);`

我也没有看到你打电话给**choiceList()**

[演示](http://jsfiddle.net/CUAMp/)

# python - 在 Pelican 静态站点生成器 ATOM 提要中使用绝对 URL

> ID：15577637
> 
> 赞同：4
> 
> 时间：2013-03-22T18:41:37.757
> 
> 标签：python, rss, pelican

在我用 Pelican 创建的站点的 ATOM 提要 (RSS) 中，具有相对路径的 URL 和图像指向[http://feeds.feedburner.com/blogname/whatever](http://feeds.feedburner.com/blogname/whatever)，而不是我的站点路径。

我在 Pelican 中有 SITEURL 和 Relative_URLS = False 设置。我还能做些什么来让提要使用绝对路径而不是相对路径？

我知道有一个 xml:base 设置，但我不知道如何让 Pelican 使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:29:34.610

好的，谷歌搜索，似乎没有办法做到这一点。我将不得不通过使用绝对图像路径和链接 URL 破解提要编写器来重写所有提要内容。

# javascript - 使用 _.each 对多个 ajax 调用进行回调时使用 jquery 的

> ID：15577639
> 
> 赞同：2
> 
> 时间：2013-03-22T18:41:40.327
> 
> 标签：javascript, jquery, backbone.js

我看到了一些使用 jquery 的 when 函数包装 ajax 调用的示例。由于我刚刚开始使用 JS，我不确定如何使用 _.each 来做到这一点。所有示例都是他们刚刚创建一个数组并将其包装在 jquery 的 when 中的情况。现在，代码基本上是：

```
_.each(this.models, function (model) {
                model.fetch({
                    success: function (model, response) {
                        // do something                    }, 
```

当一切都完成时，我如何用 jquery 的何时获取回调来包装它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:44:16.037

```
var requests = _.map(this.models, function (model) {
        return model.fetch({
            success: function (model, response) {
            }
        });
});

//Working around the fact that array is not accepted
$.when.apply($, requests).then(function(){

}); 
```

# salesforce - How to create a lookup relationship with Contact (Email) in salesforce?

> ID：15577642
> 
> 赞同：1
> 
> 时间：2013-03-22T18:41:52.083
> 
> 标签：salesforce, apex-code

How do I create a lookup relationship with a Contact in salesforce? I am trying to create related list between custom object and a contact. Custom object data is based on the contacts email address (but not on contact ID).

Any kind of help is appreciated! Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:22:45.340

您可以将自定义字段添加到 Lookup(Contact) 类型的自定义对象。参见设置->创建->对象->。然后滚动到自定义字段部分。

# php - session_start()：函数 spl_autoload_call()

> ID：15577648
> 
> 赞同：1
> 
> 时间：2013-03-22T18:42:10.623
> 
> 标签：php, session

我在进入几页时收到此消息：

警告：session_start()：函数 spl_autoload_call() 没有定义它在第 18 行的 /var/www/library/session/session.php 中调用的类

这是创建调用的文件：

```
 <?php
        namespace iX\session;

        class session{
            private static $instance;
            private static $init=false;
            private static function doFirstInit(){
                ini_set('session.name', \iX\config::get('system')->session->name);
                ini_set('session.cookie_lifetime', \iX\config::get('system')->session->cookie->lifetime);
                ini_set('session.cookie_path', \iX\config::get('system')->session->cookie->path);
                ini_set('session.cookie_domain', \iX\config::get('system')->domain->name);
                ini_set('session.use_cookies', ((\iX\config::get('system')->session->cookie->use)?'1':0));
                ini_set('session.use_only_cookies', ((\iX\config::get('system')->session->cookie->onlyCookies)?'1':0));
                \iX\core::load('library/session/interface.php');
                \iX\core::load('library/session/handler/'. \iX\config::get('system')->session->handler.'.php');
                $class = '\iX\session\handler_'.\iX\config::get('system')->session->handler;
                $class::getInstance();
                session_start();
                self::$init = true;
            }
            public static function getInstance(){
                if(!self::$init)
                    self::doFirstInit();
                if(!(self::$instance instanceof session))
                    self::$instance = new session('main');
                return self::$instance;
            }
            private $handler=array();
            public function __construct($handler){
                $this->handler = &$_SESSION[$handler];
                if(!isset($this->handler['userid'])) 
                    $this->handler['userid'] = 1;
                if($this->handler['userid']==0)
                    $this->handler['userid'] = 1;
                if(!isset($this->handler['counter'])) 
                    $this->handler['counter'] = 0;
                if(!isset($this->handler['login'])) 
                    $this->handler['login'] = false;
                if(!isset($this->handler['numpages'])) 
                    $this->handler['numpages'] = 0;
                if(!isset($this->handler['lock'])) 
                    $this->handler['lock'] = false;
            }
            public function __get($name){
                $this->handler['counter']++;
                return (!isset($this->handler[$name]))?false:$this->handler[$name];
            }
            public function __set($name,$value){
                if($this->lock==false){
                    $this->handler[$name]=$value;
                    return true;
                }else return false;
            }
            public function __isset($id){
                if(isset($this->handler[$id]) && $this->handler[$id]!=null) return true;
                return false;
            }
            public function __unset($id){
                $this->handler[$id] = null;
                return true;
            }
            private function __cleanup(){ 
                $this->handler = array(); 
            }
            public function getPages(){ 
                return $this->numpages; 

            }
            public function setIncreasePage(){ 
                $this->numpages++; 

            }
            public function Login($uid){
                $this->login=true;
                $this->userid = intval($uid);
                $this->userId = intval($uid);
            }
            public function setLogout(){
                foreach($this as $key=>$value)
                    $this->{$key} = null;
                $this->role = "guest";
                $this->userId = 0;
                $this->login=false;
            }
            public function isLogin(){ 
                return $this->login; 
            }
            public function isRlogin(){ 
                return ($this->rActive == true && isset($this->rLogin))?true:false; 
            }
            public function cleanup(){ 
                $this->__cleanup(); 
            }
            public function put(){ 
            }
            public function lock(){ 
                $this->lock = true;  
            }
            public function unlock(){ 
                $this->lock = false;  
            }
            public function get_stat(){ 
                return $this->lock;  
            }
            public function rewind() { 
                reset($this->handler);  
            }
            public function current() { 
                $var = current($this->handler); 
                return $var;  
            }
            public function key() { 
                $var = key($this->handler); 
                return $var;  
            }
            public function next() { 
                $var = next($this->handler); 
                return $var;  
            }
            public function valid() { 
                $var = $this->current() !== false; 
                return $var;  
            }
            public function __toString(){
                $return = '';
                foreach($this->handler as $key=>$value) 
                    $return .= $key.':'.$value."\n";
                return $return;
            }
            public function __toArray(){ 
                return $this->handler;  
            }
            public function toString(){ 
                return $this->__toString();  
            }
            public function toArray(){ 
                return $this->__toArray(); 
             }
            public function getSession(){ 
                return $this->handler;  
            }
            public function restoreSession($session){
                $session = unserialize($session);
                    if(is_array($session)) 
                        $this->handler = $session;
            }
        } 
```

我怎样才能摆脱这个警告。我不只是想禁用警告调用。我想要一个干净的应用程序。请有人启发我。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:44:33.397

试试这个：

```
<?php
    session_start();
    // ... 
```

最好的解决方案是：

在`index.php`.

# python - Django indentation error related to pagination

> ID：15577649
> 
> 赞同：0
> 
> 时间：2013-03-22T18:42:20.497
> 
> 标签：python, django, pagination

I followed the tutorials to install django's pagination settings with python. When I try to declare a paginator object in my views.py I receive an "Identation error" when I try to load the associated template.

I'm able to get pagination working without declaring a paginator in views.py, but I want to customize the page settings.

I imported the pagination directory at the top of my views.py, and I believe I set everything up in my settings.py folder. I know I'm not misstyping the declaration because it's a simple one-liner:

> c = RequestContext(request, { "test": testObj, })
> 
> p = Paginator (testObj, 100)
> 
> return HttpResponse(t.render(c))

What could be causing this error?

Error:

```
IndentationError at /result/

unexpected indent (views.py, line 90)

Request Method:     GET
Request URL:    http://127.0.0.1:8000/result/xxx
Django Version:     1.5
Exception Type:     IndentationError
Exception Value:    

unexpected indent (views.py, line 90)

Exception Location:     C:\Python27\lib\site-packages\django\utils\importlib.py in import_module, line 35
Python Executable:  C:\Python27\python.exe
Python Version:     2.7.3
Python Path:    

['C:\\Users\\xxx\\Desktop\\xxx',
 'C:\\Python27\\lib\\site-packages\\django_pagination-1.0.7-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages']

Server time:    Fri, 22 Mar 2013 14:38:29 -0400 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:55:31.817

我不确定您使用的是什么文本编辑器，但在 gedit 中，您可以将制表符和/或空格显示为箭头，这有助于轻松检测是否存在杂散制表符和/或空格。

# combinatorics - 将一个整数的所有组合生成 k 个部分

> ID：15577651
> 
> 赞同：0
> 
> 时间：2013-03-22T18:42:39.383
> 
> 标签：combinatorics

我无法弄清楚如何将整数 N 的所有组合（[http://en.wikipedia.org/wiki/Composition_%28number_theory%29](http://en.wikipedia.org/wiki/Composition_%28number_theory%29)）生成为 K 部分，但一次只做一个。也就是说，我需要一个函数，给定生成的前一个组合，返回序列中的下一个组合。原因是我的应用程序的内存有限。如果我可以使用 Python 及其生成器功能，这会容易得多，但我坚持使用 C++。

这类似于[n 到 k 部分的 Next Composition - 有人有有效的算法吗？](https://stackoverflow.com/questions/4647120/next-composition-of-n-into-k-parts-does-anyone-have-a-working-algorithm)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:03:40.110

你可以尝试这样的事情：

从 (K-1) 个数组 [1,1,...,1,N-k+1] 和余数的 1 个条目开始。可以通过增加第 (K-1) 个元素并减少最后一个元素来创建下一个组合。只要最后一个元素大于倒数第二个元素，就执行此技巧。

当最后一个元素变小时，增加第（K-2）个元素，将第（K-1）个元素设置为相同的值，然后再次将最后一个元素设置为余数。重复该过程并在必要时对其他元素应用相同的原则。

您最终会得到一个不断排序的数组，以避免重复的组合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-24T12:11:02.903

# 初步意见

首先从观察开始，即 [1,1,...,1,n-k+1] 是 n 超过 k 个部分的第一个组合（按字典顺序），并且 [n-k+1,1,1, ...,1] 是最后一个。

现在考虑一个例子：合成[2,4,3,1,1]，这里n = 11，k = 5。按字典顺序排列的下一个是哪个？显然最右边要增加的部分是 4，因为 [3,1,1] 是 5 超过 3 部分的最后一个组合。

4在3的左边，最右边的部分与1不同。

所以把 4 变成 5，把 [3,1,1] 替换为 [1,1,2]，余数 (3+1+1)-1 的第一个组成，得到 [2,5,1,1, 2]

# 生成程序（C 语言）

以下 C 程序显示如何按字典顺序*按需计算此类组合*

```
#include <stdio.h>
#include <stdbool.h>

bool get_first_composition(int n, int k, int composition[k])
{
    if (n < k) {
        return false;
    }
    for (int i = 0; i < k - 1; i++) {
        composition[i] = 1;
    }
    composition[k - 1] = n - k + 1;
    return true;
}

bool get_next_composition(int n, int k, int composition[k])
{
    if (composition[0] == n - k + 1)    {
        return false;
    }
    // there'a an i with composition[i] > 1, and it is not 0.
    // find the last one
    int last = k - 1;
    while (composition[last] == 1) {
        last--;
    }
    // turn    a b ...   y   z 1 1 ...   1
    //                       ^ last
    // into    a b ... (y+1) 1 1 1 ... (z-1)

    // be careful, there may be no 1's at the end

    int z = composition[last];
    composition[last - 1] += 1;
    composition[last] = 1;
    composition[k - 1] = z - 1;
    return true;
}

void display_composition(int k, int composition[k])
{
    char *separator = "[";
    for (int i = 0; i < k; i++) {
        printf("%s%d", separator, composition[i]);
        separator = ",";
    }
    printf("]\n");
}

void display_all_compositions(int n, int k)
{
    int composition[k];  // VLA. Please don't use silly values for k
    for (bool exists = get_first_composition(n, k, composition);
            exists;
            exists = get_next_composition(n, k, composition)) {
        display_composition(k, composition);
    }
}

int main()
{
    display_all_compositions(5, 3);
} 
```

结果

```
[1,1,3]
[1,2,2]
[1,3,1]
[2,1,2]
[2,2,1]
[3,1,1] 
```

# 弱成分

类似的算法适用于弱组合（允许为 0）。

```
bool get_first_weak_composition(int n, int k, int composition[k])
{
    if (n < k) {
        return false;
    }
    for (int i = 0; i < k - 1; i++) {
        composition[i] = 0;
    }
    composition[k - 1] = n;
    return true;
}

bool get_next_weak_composition(int n, int k, int composition[k])
{
    if (composition[0] == n)    {
        return false;
    }
    // there'a an i with composition[i] > 0, and it is not 0.
    // find the last one
    int last = k - 1;
    while (composition[last] == 0) {
        last--;
    }
    // turn    a b ...   y   z 0 0 ...   0
    //                       ^ last
    // into    a b ... (y+1) 0 0 0 ... (z-1)

    // be careful, there may be no 0's at the end

    int z = composition[last];
    composition[last - 1] += 1;
    composition[last] = 0;
    composition[k - 1] = z - 1;
    return true;
} 
```

n=5 k=3 的结果

```
[0,0,5]
[0,1,4]
[0,2,3]
[0,3,2]
[0,4,1]
[0,5,0]
[1,0,4]
[1,1,3]
[1,2,2]
[1,3,1]
[1,4,0]
[2,0,3]
[2,1,2]
[2,2,1]
[2,3,0]
[3,0,2]
[3,1,1]
[3,2,0]
[4,0,1]
[4,1,0]
[5,0,0] 
```

可以将类似的算法编写为将 n 组合成大于某个固定值的 k 部分。

# ruby-on-rails - Filter has_many by attribute value

> ID：15577653
> 
> 赞同：0
> 
> 时间：2013-03-22T18:42:41.573
> 
> 标签：ruby-on-rails, activerecord

I'm trying to find the best solution to filter the objects in a has_many association. What I have for a setup is

```
class Company < ActiveRecord::Base
  has_many :products
end

class Product < ActiveRecord::Base
  attr_accessible :title
  belongs_to :company
end 
```

Then in my CompaniesController#show method what I'd like to do is filter the products by it's title.

```
def show
  @company = Company.find(params[:id])
  # Then I just want the @company.products where title = params[:title]
end 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:45:11.570

您的控制器操作从哪里获取产品标题 (params[:title])？如果您只是将其作为通过表单提交的搜索词传递，那么您应该能够运行类似...。

```
 @products = @company.products.where("title = ?", params[:title]) 
```

编辑：将关联产品存储在@company 变量中会出现问题，因为@company 将包含关联产品数组（而不是 Company 对象），这不仅限制了您在展示操作中可以访问的有关特定公司的信息从该变量中，它也会变得混乱（例如，您正在使用名为 @company 的变量来存储与公司关联的*产品*列表）

# c# - 捕获数据库约束错误的最佳方法

> ID：15577657
> 
> 赞同：9
> 
> 时间：2013-03-22T18:43:00.860
> 
> 标签：c#, asp.net, sql, sql-server

我正在调用一个存储过程，该过程将数据从 c# 插入到 sql server 数据库中。我对表有许多约束，例如唯一列等。目前我有以下代码：

```
try
{
   // inset data
}
catch (SqlException ex)
{
    if (ex.Message.ToLower().Contains("duplicate key"))
    {

        if (ex.Message.ToLower().Contains("url"))
        {
            return 1;
        }

        if (ex.Message.ToLower().Contains("email"))
        {
            return 2;
        }
    }

    return 3;
} 
```

在 C# 或存储过程中插入数据之前检查列是否唯一等是更好的做法，还是让异常发生并像上面一样处理？我不是上述内容的粉丝，但正在寻找该领域的最佳实践。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T18:45:39.407

我将数据库约束视为最后的手段。（即，无论如何，它们应该作为维护数据完整性的备份方式出现在您的架构中。）但我想说，在您尝试将数据保存在数据库中*之前，数据应该确实有效。*如果没有其他原因，那么因为提供有关无效输入的反馈是一个 UI 问题，并且数据有效性错误确实不应该每次都在整个层堆栈上下冒泡。

此外，您想要对数据的形状做出多种断言，这些断言无法使用约束轻松表达。（例如，订单的状态转换。“订单只能`SHIPPED`来自`PAID`”或更复杂的场景。）也就是说，您需要使用涉及基于过程语言的检查，这些检查会复制更多的业务逻辑，并且然后让它们也报告某种错误代码，并在您的应用程序中包含更多复杂性，只是为了在架构定义中进行所有数据验证。

验证本质上很难放置在应用程序中，因为它既涉及 UI*又*与模型架构耦合，但我倾向于在 UI 附近进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:22:02.557

我在这里看到两个问题，这是我的看法...

**数据库约束好吗？**对于大型系统，它们是不可或缺的。大多数大型系统都有不止一个前端，而且并不总是使用可以共享中间层或 UI 数据检查逻辑的兼容语言。它们也可能仅在 Transact-SQL 或 PL/SQL 中具有批处理。可以在前端重复检查，但在多用户应用程序中，真正检查唯一性的唯一方法是插入记录并查看数据库的内容。与外键约束相同 - 在您尝试插入/更新/删除之前您不会真正知道。

**应该允许抛出异常，还是应该替换返回值？**这是问题的代码：

```
 try
    {
       // inset data
    }
    catch (SqlException ex)
    {
        if (ex.Message.ToLower().Contains("duplicate key"))
        {
            if (ex.Message.ToLower().Contains("url"))
            {
                return 1; // Sure, that's one good way to do it
            }
            if (ex.Message.ToLower().Contains("email"))
            {
                return 2; // Sure, that's one good way to do it
            }
        }
        return 3; // EVIL! Or at least quasi-evil :)
    } 
```

如果您可以保证调用程序实际上会根据返回值进行操作，我认为`return 1`和`return 2`最好留给您自己判断。我更喜欢为这样的情况（例如`DuplicateEmailException`）重新抛出自定义异常，但这只是我 - 返回值也可以解决问题。毕竟，消费者类可以像忽略返回值一样容易地忽略异常。

我反对`return 3`. 这意味着发生了意外的异常（数据库关闭、连接错误等）。在这里，您有一个未指定的错误，您拥有的唯一诊断信息是：“3”。想象一下在 SO 上发布一个问题，说*我试图插入一行，但系统说“3”。请指教。*它将在几秒钟内关闭:)

如果您不知道如何处理数据类中的异常，那么数据类的*使用者*就无法处理它。在这一点上，你已经非常紧张了，所以我说记录错误，然后尽可能优雅地退出，并显示“意外错误”消息。

我知道我对意外异常有些抱怨，但我处理了太多支持事件，程序员只是对数据库异常进行后续处理，当出现意外情况时，应用程序要么静默失败，要么下游失败，留下零诊断信息。很调皮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:11:24.830

我更喜欢在将数据扔到 SQL Server 并让约束冒泡出现错误之前检查潜在违规的存储过程。其原因与性能有关：

*   [不同错误处理技术的性能影响](http://www.sqlperformance.com/2012/08/t-sql-queries/error-handling)

*   [在进入 SQL Server TRY 和 CATCH 逻辑之前检查潜在的约束违规](http://www.mssqltips.com/sqlservertip/2632/checking-for-potential-constraint-violations-before-entering-sql-server-try-and-catch-logic/?utm_source=AaronBertrand)

有些人会主张数据库层的约束是不必要的，因为你的程序可以做任何事情。我不会仅仅依靠您的 C# 程序来检测重复项的原因是人们会找到影响数据的方法，而无需通过您的 C# 程序。您可以稍后介绍其他程序。您可能让人们编写自己的脚本或直接与数据库交互。您是否真的要让桌子不受保护，因为它们不遵守您的业务规则？而且我认为 C# 程序也不应该只是将数据扔到桌面上并希望获得最好的结果。

如果您的业务规则发生变化，您真的要重新编译您的应用程序（或所有多个应用程序）吗？我想这取决于您的数据库受到的保护程度以及您的业务规则更改的可能性/频率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:51:51.163

I did something like this:

```
public class SqlExceptionHelper
{
    public SqlExceptionHelper(SqlException sqlException)
    {
        // Do Nothing.
    }

    public static string GetSqlDescription(SqlException sqlException)
    {
        switch (sqlException.Number)
        {
             case 21:
                 return "Fatal Error Occurred: Error Code 21.";
             case 53:
                 return "Error in Establishing a Database Connection: 53.";
             default
                 return ("Unexpected Error: " + sqlException.Message.ToString());
         }
     }
} 
```

Which allows it to be reusable, and it will allow you to get the Error Codes from SQL.

Then just implement:

```
public class SiteHandler : ISiteHandler
{
     public string InsertDataToDatabase(Handler siteInfo)
     {
          try
          {
              // Open Database Connection, Run Commands, Some additional Checks.
          }
          catch(SqlException exception)
          {
             SqlExceptionHelper errorCompare = new SqlExceptionHelper(exception);
             return errorCompare.ToString();
          }
     }
} 
```

Then it is providing some specific errors for common occurrences. But as mentioned above; you really should ensure that you've tested your data before you just input it into your database. That way no mismatched constraints surface or exists.

Hope it points you in a good direction.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T18:51:53.427

Depends on what you're trying to do. Some things to think about:

*   Where do you want to handle your error? I would recommend as close to the data as possible.
*   Who do you want to know about the error? Does your user need to know that 'you've already used that ID'...?
*   etc.

Also -- constraints can be good -- I don't 100% agree with millimoose's answer on that point -- I mean, I do in the *should be this way / better performance ideal* -- but practically speaking, if you don't have control over your developers / qc, and especially when it comes to enforcing rules that could blow your database up (or otherwise, break dependent objects like reports, etc. if a duplicate key were to turn-up somewhere, you need *some barrier* against (for example) the duplicate key entry.

# python - Python pyinstaller 在创建 exe 后加载文件

> ID：15577659
> 
> 赞同：1
> 
> 时间：2013-03-22T18:43:04.057
> 
> 标签：python, pyinstaller

我正在运行 2.7，并且正在使用 pyinstaller。我的目标是输出一个 exe 并让它运行我的其他类文件。我还使用[https://code.google.com/p/dragonfly/](https://code.google.com/p/dragonfly/)作为语音识别框架。我在 Dragonfly->examples->text.py 下的示例方向创建了另一个文件。如果我用我的 IDE 运行[https://code.google.com/p/dragonfly/source/browse/trunk/dragonfly/examples/dragonfly-main.py?spec=svn79&r=79](https://code.google.com/p/dragonfly/source/browse/trunk/dragonfly/examples/dragonfly-main.py?spec=svn79&r=79)我可以说语音命令，它会理解我创建的以下文件和蜻蜓示例中的其他示例文件。

```
 from dragonfly.all import Grammar, CompoundRule, Text, Dictation
import sys
sys.path.append('action.py')
import action

# Voice command rule combining spoken form and recognition processing.
class ExampleRule(CompoundRule):
    print "This works"
    spec = "do something computer"                  # Spoken form of command.
    def _process_recognition(self, node, extras):   # Callback when command is spoken.
        print "Voice command spoken."

class AnotherRule(CompoundRule):
    spec = "Hi there"                  # Spoken form of command.
    def _process_recognition(self, node, extras):   # Callback when command is spoken.
        print "Well, hello"

# Create a grammar which contains and loads the command rule.
grammar = Grammar("example grammar")                # Create a grammar to contain the command rule.
grammar.add_rule(ExampleRule())                     # Add the command rule to the grammar.
grammar.add_rule(AnotherRule())                     # Add the command rule to the grammar.
grammar.load()           

                       # Load the grammar. 
```

我在控制台中注意到它会输出

```
UNKNOWN: valid paths: ['C:\\Users\\user\\workspace\\dragonfly\\dragonfly-0.6.5\\dragonfly\\examples\\action.py',etc..etc... 
```

在我使用 pyinstaller 之后，该行的输出是

```
UNKNOWN: valid paths: [] 
```

所以它没有加载示例，因为它找不到它们。我如何告诉 pyinstaller 在创建 exe 时也加载示例文件？如果它确实加载了文件，我如何确保我的 exe 知道文件在哪里？

我为 pyinstaller 运行的命令

```
C:\Python27\pyinstaller-2.0>python pyinstaller.py -p-paths="C:\Users\user\worksp
ace\dragonfly\dragonfly-0.6.5\dragonfly\examples\test.py" "C:\Users\user\workspa
ce\dragonfly\dragonfly-0.6.5\dragonfly\examples\dragonfly-main.py" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:28:00.123

如果我理解清楚。你有你的脚本和一些示例脚本，它们调用你的脚本来表明它正在工作？

你错过了重点。您的脚本应该是最终产品。

如果您想测试功能，请在开发版本中进行。
如果您想测试 exe 文件，请通过另一个（单独的）测试脚本执行此操作。

其他：
脚本和模块是完全不同的东西。
您正在尝试将脚本作为模块导入并在示例脚本中使用它。

我建议您构建脚本的主要**入口点**（如果需要，可以使用参数），因为它应该完成。并制作其他运行您的脚本的示例脚本。

或者制作一个模块并构建使用该模块的脚本。然后将此示例脚本构建为使用该模块并显示其工作的 exe 文件

PyInstaller 可以一次编译一个脚本。不需要强迫它做不寻常的事情。

# mysql - MySQL - 如何根据返回的行数使我的查询有条件？

> ID：15577662
> 
> 赞同：1
> 
> 时间：2013-03-22T18:43:15.447
> 
> 标签：mysql, select, union, rows

我看过关于这种事情的类似帖子，但我想要个人帮助我的查询。

What we have is a media site that, when a media item is selected, displays three related media items in a sidebar. 这些项目应显示两个项目的日期较晚，一个项目的日期早于当前选择的项目。如果没有两个较晚的日期，则只显示一个较晚的日期和两个较早的日期。如果当前选择的媒体已经是最新的（没有较晚日期的相关媒体），则只显示较早日期的三个。当然，这三个结果需要是与当前选择的媒体日期最接近的三个。

我有一个几乎可以完美运行的查询：

```
 $query = "
    (SELECT
        media.*, 
        media_series.series_name, 
        media_books.book_name, 
        media_books.book_shortname  
    FROM media 
    LEFT JOIN media_series ON media.series = media_series.id
    LEFT JOIN media_books ON media.book = media_books.id 
    WHERE media.date >= '$media_date' AND media.series = '$series_id'
    AND media.id <> '$media_id_2'
    ORDER BY ABS(DATEDIFF(media.date, '$media_date')) LIMIT 2)
    UNION
    (SELECT
        media.*, 
        media_series.series_name, 
        media_books.book_name, 
        media_books.book_shortname 
    FROM media 
    LEFT JOIN media_series ON media.series = media_series.id
    LEFT JOIN media_books ON media.book = media_books.id 
    WHERE media.date <= '$media_date' AND media.series = '$series_id'
    AND media.id <> '$media_id_2'
    ORDER BY ABS(DATEDIFF(media.date, '$media_date'))) 
    ORDER BY date DESC LIMIT 3
    "; 
```

第一个`SELECT`获得最多两个具有较晚日期的项目，然后，使用`UNION`，第二个`SELECT`获得具有较早日期的任何项目。最后，最后的`LIMIT 3`确保我们总共只得到三行。

我能看到的这个查询的唯一缺陷是，如果当前选择的媒体是最旧的（意味着它没有更早日期的相关媒体），那么只会显示两个结果，因为第一个`SELECT`限制为 2，第二个`SELECT`不返回任何结果.

只有当第二个返回零行时，我才需要第一个`SELECT`返回 3行。`SELECT`我在想我可以`CASE`以某种方式使用，但我不确定具体如何。你能帮我吗？

注意：作为临时解决方案，我目前正在运行查询，然后使用 PHP 检查返回的行数，如果小于 3，我将再次运行整个查询，但`LIMIT 3`在第一个`SELECT`. 这可行，但我想尽可能避免运行这两个查询。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:28:53.573

尝试：

```
$query = "
SELECT * FROM
(SELECT * FROM
 (SELECT
     media.*, 
     media_series.series_name, 
     media_books.book_name, 
     media_books.book_shortname,
     @rn := @rn + 2 rn
  FROM (SELECT @rn :=-1 ) r
  CROSS JOIN media 
  LEFT JOIN media_series ON media.series = media_series.id
  LEFT JOIN media_books ON media.book = media_books.id 
  WHERE media.date >= '$media_date' AND media.series = '$series_id'
  AND media.id <> '$media_id_2'
  ORDER BY media.date LIMIT 3) sq1
 UNION ALL
 (SELECT
     media.*, 
     media_series.series_name, 
     media_books.book_name, 
     media_books.book_shortname,
     @rn := @rn + 2 rn
  FROM (SELECT @rn :=0 ) r
  CROSS JOIN media 
  LEFT JOIN media_series ON media.series = media_series.id
  LEFT JOIN media_books ON media.book = media_books.id 
  WHERE media.date < '$media_date' AND media.series = '$series_id'
  AND media.id <> '$media_id_2'
  ORDER BY media.date DESC LIMIT 3) sq2
 ORDER BY rn LIMIT 3) mq
ORDER BY date DESC
"; 
```

（第一个`SELECT * FROM`可能不是必需的 - 如果直接通过 SQL 运行此查询，但代码中的等效行不存在，因此它可能会在其他地方自动生成。）

[这里](http://sqlfiddle.com/#!2/f7745/4)的概念证明。

# scala - 用于多项目构建的 sbt 程序集

> ID：15577670
> 
> 赞同：2
> 
> 时间：2013-03-22T18:43:40.037
> 
> 标签：scala, sbt, sbt-assembly

我有一个像这样的多项目 sbt 构建文件

```
import sbt._                                                                                                                                                                                                                           
import Keys._                                                                                                                                                                                                                          

object TestBuild extends Build {                                                                                                                                                                                                       
  lazy val root = Project(id = "test",                                                                                                                                                                                                 
    base = file(".")) aggregate(core, handlers)                                                                                                                                                                                        

  lazy val core = Project(id = "test-core",                                                                                                                                                                                            
    base = file("core"))                                                                                                                                                                                                               

  lazy val handlers = Project(id = "test-handlers",                                                                                                                                                                                    
    base = file("handlers")) dependsOn (core)                                                                                                                                                                                          
} 
```

如何构建一个包含所有依赖项 + 核心 + 处理程序的程序集 jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:30:59.877

好的，我使用解决了这个问题

```
import sbt._                                                                                                                                                                                                                           
import Keys._                                                                                                                                                                                                                          

object TestBuild extends Build {                                                                                                                                                                                                       
  lazy val root = Project(id = "test",                                                                                                                                                                                                 
    base = file(".")) aggregate(core, handlers) dependsOn(core,handlers)                                                                                                                                                                                        

  lazy val core = Project(id = "test-core",                                                                                                                                                                                            
    base = file("core"))                                                                                                                                                                                                               

  lazy val handlers = Project(id = "test-handlers",                                                                                                                                                                                    
    base = file("handlers")) dependsOn (core)                                                                                                                                                                                          
} 
```

我将程序集设置放在 build.sbt 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:57:54.327

您可以使用 sbt-assembly 插件。

`addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.7.3")`

# visual-studio-lightswitch - 灯开关身份验证问题

> ID：15577671
> 
> 赞同：0
> 
> 时间：2013-03-22T18:43:41.463
> 
> 标签：visual-studio-lightswitch

我有一个 Visual Studio 2012 Lightswitch 桌面应用程序，它需要在用户登录后立即运行一些代码，但在显示主屏幕之前。

所以我把代码放在 Application_LoggedIn 方法中。

我检查了 this.AuthenticationService.User 并验证了用户已登录。

但是，当我跑步时

```
DataWorkspace dw = this.CreateDataWorkspace();

 if(dw.ApplicationData.ApplicationSettingsSet.FirstOrDefault() == null)
 {
 .
 .
 . 
```

我总是被要求提供凭据，并弹出一个窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:06:38.000

尝试

```
Application.Current.CreateDataWorkspace 
```

我在 Application_LoggedIn 中使用它来登录到已登录应用程序的表。

# spring - Spring 中的 Bean 上下文

> ID：15577672
> 
> 赞同：0
> 
> 时间：2013-03-22T18:43:45.107
> 
> 标签：spring, jakarta-ee, servlets, web.xml

该应用程序与以下配置文件完美配合：

我的 Web.XML 如下

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/classes/spring/mvc-dispatcher-servlet.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    /WEB-INF/classes/spring/spring-context.xml,
      /WEB-INF/classes/spring/spring-security.xml
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的 mvc-dispatcher-servlet

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<context:component-scan base-package="biz.canisrigel.slapMe" />

<!-- enable autowire -->
<context:annotation-config /> 
```

我的 spring-context.xml 是

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<context:component-scan base-package="biz.canisrigel.slapMe" />

<!-- enable autowire -->
<context:annotation-config />

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/slapMe" />
    <property name="username" value="root" />
    <property name="password" value="adminadmin" />
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="typeAliasesPackage" value="biz.canisrigel.slapMe.bean" />
</bean>

<!-- scan for mappers and let them be autowired -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="biz.canisrigel.slapMe.mapper" />
</bean> 
```

我无法正确运行 Spring Security，因为之前的 spring-context.xml 是 MVC 的调度程序 servlet 的 xml 配置文件。所以我将 spring-context 移动到 contextConfigLocation。但后来我不得不为调度员 servlet 提供一些东西。

我的问题是 mvc-dispatcher-servlet.xml 和 spring-context 具有相同的数据。如果我删除 mvc-dispatcher 它是一个错误。如果我没有将 mvc-dispatcher 的内容放在 spring 上下文中，那么也会发生错误。

我对概念的理解哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:12:16.757

一些东西：

*   你`web.xml`看起来正确
*   `InternalResourceViewResolver`应该只存在于你的，`mvc-dispatcher-servlet.xml`因为它与 MVC 直接相关——将它从你的`spring-context.xml`
*   您可以`context:component-scan`在两个配置文件中都有，但它们应该扫描不同的包。servlet xml 中的一个通常是组件扫描您的控制器包（以及与 MVC 直接相关的任何其他内容），而父 spring 上下文 xml 中的一个通常是扫描您的服务、DAO 等。通常，您的组件扫描包应该非常具体；**你永远不应该将它指向整个应用程序的基础包！**
*   你可以删除`context:annotation-config`——如果你有`context:component-scan`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:55:22.113

您的 MVC 上下文应该只有与 MVC 相关的配置，通常包括 ViewResolvers、FileUpload、PropertyFiles、消息/主题解析器等。您的 applicationContext 将包含与 DAO、Service 和其他实用程序相关的 bean。安全文件应该有安全配置。为了更好地理解和了解好的/推荐的做法，请查看[spring greehouse](https://github.com/SpringSource/greenhouse)代码。

# maven - 缺少 github maven 插件工件

> ID：15577676
> 
> 赞同：0
> 
> 时间：2013-03-22T18:44:04.223
> 
> 标签：maven, github, maven-3, maven-plugin

工具：

> Apache Maven 3.0.3 (r1075438; 2011-02-28 12:31:09-0500) Maven 主页：/usr/share/maven Java 版本：1.6.0_43，供应商：Apple Inc. Java 主页：/System/Library/ Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 默认语言环境：en_US，平台编码：MacRoman 操作系统名称：“mac os x”，版本：“10.8.3”，arch：“x86_64”，家族：“mac”

[我按照文档](https://github.com/github/maven-plugins)中的说明设置了 settings.xml 和 pom.xml，然后运行了命令：

> mvn clean install ghDownloads:upload

但引发了以下错误：

> 在当前项目和插件组中找不到前缀“ghDownloads”的插件...

之后，我在公司的 Nexus 存储库中查找，但找不到该工件。ghDownloads 驻留在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:52:55.953

我只需将以下内容放在 pom.xml 中：

```
 <plugin>
            <groupId>com.github.github</groupId>
            <artifactId>downloads-maven-plugin</artifactId>
            <version>0.5</version>
            <configuration>
                <description>${project.version} release of ${project.name}</description>
                <override>true</override>
                <includeAttached>true</includeAttached>
            </configuration>
        </plugin> 
```

# weblogic - 如何设计博客模板

> ID：15577677
> 
> 赞同：0
> 
> 时间：2013-03-22T18:44:06.693
> 
> 标签：weblogic, blogs, blogger

我想设计我的博客。我不知道，该工具是否有。假设任何事情都有这样的意思，请帮助我，说最好的和用户友好的工具。（离线工具）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:07:12.033

这是一个非常广泛的问题，但我在这两个方面都有很好的经验：

BlogDesk - [http://www.blogdesk.org/en/index.htm](http://www.blogdesk.org/en/index.htm)

和

Windows Live Writer - [http://www.microsoft.com/en-us/download/details.aspx?id=8621](http://www.microsoft.com/en-us/download/details.aspx?id=8621)

两者都是免费的，可以离线使用。您对软件的功能有什么具体要求吗？

# .net - 关于将文件数据存储在字典或列表中以及比较性能的建议

> ID：15577681
> 
> 赞同：0
> 
> 时间：2013-03-22T18:44:13.710
> 
> 标签：.net, list, file-io, dictionary, arraylist

我有一个已经在内部使用了两年的备份程序，我正在寻求提高性能。

让我们以我的电脑为例：

在我的机器上，生成它需要评估的 19,000 个文件的初始列表大约需要 7-10 秒。

然后，需要大约 25-30 秒的时间将该文件列表与之前在备份位置备份的文件列表进行比较。比较严格按照从要备份的系统到先前备份的版本的最后修改时间。这样，它只执行增量备份。

我最初只是存储完整的文件名，然后创建一个指向该文件的 fileinfo 链接以获取我需要的数据。

我已经创建了一个结构，其中包含我需要的文件中的 5 个字段，并将列表更改为字典，其中完整文件名作为键，值是结构。

当我将数据存储在 Arraylist、List 或 Dictionary 中时，所花费的时间大致相同，所以显然我的比较是一项密集的任务，而不是我存储数据的方式。

我的问题是适合我存储的数据类型的字典。所有完整的文件名都是唯一的，我真的不关心排序或备份数据的顺序。

以下是列表的一些描述以及似乎最慢的比较子：

*   _filelistSRC 是在要备份的文件夹中找到的文件列表
*   _fileListDES 是在备份文件夹中找到的文件列表
*   _fileList 是包含自上次备份以来已更改的文件的列表，应该备份
*   fileInfoS 是仅包含每个文件所需信息的结构
*   fm 是一个具有我使用的常用文件管理方法的类

私有子比较列表（）

```
 For Each _file As KeyValuePair(Of String, fileInfoS) In _FileListSRC
            Dim dest As String

            Try
                Dim fi As fileInfoS = _file.Value

                If fi.FullName.Contains(p_UserProfile) Then
                    dest = fi.FullName.Replace(p_UserProfile & "\", p_BackupLocation)
                Else
                    dest = fi.FullName.Replace(fi.FolderRootName, p_BackupLocation)
                End If

                If _FileListDES.ContainsKey(dest) Then
                    If fm.fileLastWriteCompare(fi.LastModified, dest) Then
                        _FileList.Add(fi.FullName, fi)
                        _totalSize = _totalSize + fi.Size
                    End If
                Else
                    If Not fm.FileExists(fi.FullName) Then Continue For
                    _FileList.Add(fi.FullName, fi)
                    _totalSize = _totalSize + fi.Size
                End If

            Catch ex As Exception

            End Try
        Next 
```

再次感谢您提供的任何帮助。

约书亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:51:22.737

Dictionary seems appropriate to me, as it uses hashing to store the data which allow for quick get of objects.does it reduce your processing time? if it does, what is your concern?

# ruby-on-rails - 重启后载波重置

> ID：15577684
> 
> 赞同：6
> 
> 时间：2013-03-22T18:44:18.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

昨晚重新启动了应用程序和数据库（mongodb）服务器。即使文件仍然存在，所有安装在载波上的上传器都将返回头像的默认图像。

我在 Rackspace CDN 上使用雾存储。每个用户模型都包含一个字段`avatar_filename`。但是，我尝试运行`user.avatar.recreate_versions!`由于 nil 而导致的错误。

有什么方法可以恢复我的图像（它们仍然存在！）并防止这种情况再次发生？我四处寻找，但看起来这不是一个普通的舞会。

在我的用户模型中：

```
# Avatar
mount_uploader :avatar, AvatarUploader 
```

头像上传者：

```
class AvatarUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  storage :fog

  def default_url
    "/assets/users/profile-default_#{version_name}.png"
  end

  # Large
  version :large do
    resize_to_limit(600, 600)
  end

  # Small
  version :small do
    process :crop
    resize_to_fill(140, 140)
  end

  # Thumbnail
  version :thumb, :from_version => :small do
    resize_to_fill(35, 35)
  end

  def extension_white_list
    %w(jpg jpeg png)
  end

  def filename
    if @filename_created
      @filename_created
    elsif original_filename
      @name ||= Digest::MD5.hexdigest(File.dirname(current_path))
      @filename_created = "a_#{timestamp}_#{@name}.#{file.extension}"
      @filename_created
    end
  end

  def timestamp
    var = :"@#{mounted_as}_timestamp"
    model.instance_variable_get(var) or model.instance_variable_set(var, Time.now.to_i)
  end

  def crop
    if model.crop_x.present?
      resize_to_limit(600, 600)
      manipulate! do |img|
        x = model.crop_x.to_i
        y = model.crop_y.to_i
        w = model.crop_w.to_i
        h = model.crop_h.to_i
        img.crop!(x, y, w, h)
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:10:05.017

鉴于图像在那里，您可以将它们作为远程文件重新上传`user.remote_avatar_url = "the url for this avatar"`

为避免将来出现这种情况，您必须记住您是如何处理文件名的。每次您这样做时都会重新应用该过程`recreate_versions!`。将此代码放在您的上传器中以解决此问题：

```
class AvatarUploader < CarrierWave::Uploader::Base
  def filename
    if original_filename
      if model && model.read_attribute(:avatar).present?
        model.read_attribute(:avatar)
      else
        # new filename
      end
    end
  end
end 
```

您可以在以下 wiki 文章中找到有关此内容的更多信息：[https ://github.com/jnicklas/carrierwave/wiki/How-to%3A-Create-random-and-unique-filenames-for-all-versioned-files](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Create-random-and-unique-filenames-for-all-versioned-files)

# java - 在文件中搜索字符串，如果找到则返回该字符串

> ID：15577688
> 
> 赞同：9
> 
> 时间：2013-03-22T18:44:37.407
> 
> 标签：java, io, java.util.scanner

如何在 txt 文件中搜索用户输入的字符串，然后将该字符串返回到控制台。我写了一些在下面不起作用的代码，但我希望它可以说明我的观点......

```
public static void main(String[] args) {
  searchforName();
}

   private static void searchForName() throws FileNotFoundException {
    File file = new File("leaders.txt");
    Scanner kb = new Scanner(System.in);
    Scanner input = new Scanner(file);

    System.out.println("Please enter the name you would like to search for: ");
    String name = kb.nextLine();

    while(input.hasNextLine()) {
        System.out.println(input.next(name));
    }
} 
```

“leaders.txt”文件包含一个名称列表。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T18:48:02.487

您可以创建一个单独`Scanner`的文件以逐行读取文件并以这种方式进行匹配...

```
final Scanner scanner = new Scanner(file);
while (scanner.hasNextLine()) {
   final String lineFromFile = scanner.nextLine();
   if(lineFromFile.contains(name)) { 
       // a match!
       System.out.println("I found " +name+ " in file " +file.getName());
       break;
   }
} 
```

关于是否应该使用 a`Scanner`或 a`BufferedReader`来读取文件，请阅读此[答案](https://stackoverflow.com/questions/2231369/scanner-vs-bufferedreader)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-17T16:28:41.877

扫描仪太慢了。运行下面的代码，看看有什么不同。在 750 MB 的文件中搜索，BufferedReader 平均比 Scanner 快 10 倍。

```
package uk.co.planetbeyond.service.test;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.Date;
import java.util.HashSet;
import java.util.Scanner;

public class SearchTextInFile
{
    public static void main(String[] args) throws IOException
    {
        // First write a file, with large number of entries
        writeFile("/home/aqeel/temp/subscribers_files.csv");

        long scannerSearchMillis = 0;
        long brSearchMillis = 0;

        int iterations = 5;

        // Now search random strings five times, and see the time taken
        for (int i = 0; i < iterations; i++)
        {
            String msisdn = String.valueOf(923000000000l + ((long) (Math.random() * 40000000)));

            System.out.println("ITERATION " + i);
            System.out.print("Search " + msisdn + " using scanner");
            Date d1 = new Date();
            searchUsingScanner("/home/aqeel/temp/subscribers_files.csv", msisdn);
            Date d2 = new Date();

            long millis = (d2.getTime() - d1.getTime());
            scannerSearchMillis += millis;
            System.out.println(" | " + (millis / 1000) + " Seconds");
            System.out.println("==================================================================");
            System.out.print("Search " + msisdn + " using buffered reader");
            d1 = new Date();
            searchUsingBufferedReader("/home/aqeel/temp/subscribers_files.csv", msisdn);
            d2 = new Date();
            millis = d2.getTime() - d1.getTime();
            brSearchMillis += millis;
            System.out.println(" | " + (millis / 1000) + " Seconds");
            System.out.println("==================================================================");
            System.out.println("==================================================================");
            System.out.println("==================================================================");
            System.out.println("==================================================================");
        }

        System.out.println("Average Search time using Scanner " + (scannerSearchMillis / (iterations * 1000.0)) + " Seconds");
        System.out.println("Average Search time using BufferedReader " + (brSearchMillis / (iterations * 1000.0)) + " Seconds");
    }

    public static void writeFile(String path)
    {
        BufferedWriter csvWriter = null;
        HashSet<Integer> additions = new HashSet<Integer>();
        try
        {
            csvWriter = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(path)));

            for (int i = 0; i < 40000000; i++)
            {
                int addition = (int) (Math.random() * 40000000);
                additions.add(addition);

                if (i % 20000 == 0)
                {
                    System.out.println("Entries written : " + i + " ------ Unique Entries: " + additions.size());
                    csvWriter.flush();
                }

                long msisdn = 923000000000l + addition;
                csvWriter.write(String.valueOf(msisdn) + "|" + String.valueOf((int) (Math.random() * 131)) + "\r\n");
            }

            csvWriter.flush();

            System.out.println("Unique Entries written : " + additions.size());
        }
        catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally
        {
            if (csvWriter != null)
            {
                try
                {
                    csvWriter.close();
                }
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }

    public static String searchUsingScanner(String filePath, String searchQuery) throws FileNotFoundException
    {
        searchQuery = searchQuery.trim();
        Scanner scanner = null;
        try
        {
            scanner = new Scanner(new File(filePath));
            while (scanner.hasNextLine())
            {
                String line = scanner.nextLine();
                if (line.contains(searchQuery))
                {
                    return line;
                }
                else
                {
                }
            }
        }
        finally
        {
            try
            {
                if (scanner != null)
                    scanner.close();
            }
            catch (Exception e)
            {
                System.err.println("Exception while closing scanner " + e.toString());
            }
        }

        return null;
    }

    public static String searchUsingBufferedReader(String filePath, String searchQuery) throws IOException
    {
        searchQuery = searchQuery.trim();
        BufferedReader br = null;

        try
        {
            br = new BufferedReader(new InputStreamReader(new FileInputStream(filePath)));
            String line;
            while ((line = br.readLine()) != null)
            {
                if (line.contains(searchQuery))
                {
                    return line;
                }
                else
                {
                }
            }
        }
        finally
        {
            try
            {
                if (br != null)
                    br.close();
            }
            catch (Exception e)
            {
                System.err.println("Exception while closing bufferedreader " + e.toString());
            }
        }

        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-26T09:31:49.527

以下 Java 7+ 解决方案具有主要优势。

```
private static void searchForName() throws IOException {
    System.out.println("Please enter the name you would like to search for: ");
    Scanner kb = new Scanner(System.in);
    String name = kb.nextLine();

    List<String> lines = Files.readAllLines(Paths.get("leaders.txt"));
    for (String line : lines) {
        if (line.contains(name)) {
            System.out.println(line);
        }
    }
} 
```

它不比这个[答案](https://stackoverflow.com/a/15577756/2838289)中的代码短。要点是，当我们打开 a 时，`File`我们有一个开放的资源，我们必须关心关闭它。否则可能会造成资源泄漏。

从 Java 7 开始，[try-with-resources 语句](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)处理资源的关闭。所以打开一个`Scanner`由文件支持的文件看起来像这样：

```
try (Scanner scanner = new Scanner("leaders.txt")) {
    // using scanner
} 
```

使用`Files.readAllLines`我们不需要关心关闭文件，因为这个方法（[JavaDoc](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#readAllBytes(java.nio.file.Path))）

> 确保在读取所有字节或抛出 I/O 错误或其他运行时异常时关闭文件。

如果`String`只需要 a 的第一次出现，则以下 Java 8+ 代码只需几行即可完成工作：

```
protected static Optional<String> searchForName(String name) throws IOException {
    try (Stream<String> lines = Files.lines(Paths.get("leaders.txt"))) {
        return lines.filter(line -> line.contains(name)).findFirst();
    }
} 
```

它返回一个`Optional`指示可能有一个空结果。我们使用它，即如下：

```
private static void searchForName() throws IOException {
    System.out.println("Please enter the name you would like to search for: ");
    Scanner kb = new Scanner(System.in);
    String name = kb.nextLine();

    Optional<String> result = searchForName(name);
    result.ifPresent(System.out::println);
} 
```

# pdf - 使用下划线和删除线从 PDF 中抓取文本

> ID：15577689
> 
> 赞同：1
> 
> 时间：2013-03-22T18:44:38.033
> 
> 标签：pdf

我有一个 PDF，其中包含许多文本中的下划线和删除线。我希望能够将此 PDF 转换为 HTML。我尝试了许多不同的工具，它们有时会将下划线和删除线作为文本格式捕获，而在其他时候会将下划线和删除线转换为图形，这（据我所知）对我来说毫无用处。

我真的很想知道这些程序如何区分格式化文本的下划线和转换为图形的下划线，以及我如何能够访问文档并将所有内容捕获为文本格式。

我可能对此采取了错误的方法，并且对任何可能的解决方案持开放态度，我认为我只需要指出正确的方向即可。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:51:32.913

There are no underlines and strikethroughs in PDF, there are just lines being drawn on top of text. PDF tools that detect underlines and strikethroughs will usually look for a line drawing that is close enough to the text, or some other similar heuristics, then add the corresponding style to the text output when converting into another format. However this kind of approach will never work for 100% of the cases.

# php - 使用 MySQL 或 PHP 随机化结果更好吗？

> ID：15577690
> 
> 赞同：0
> 
> 时间：2013-03-22T18:44:38.263
> 
> 标签：php, mysql, random

使用 MySQL 或 PHP 命令返回随机行更好吗？

例如，我有一个`product`包含 10 列和 1000000 行的表，并希望从中返回 10 个随机行。

*   方法一（让MySQL做大部分工作）：

    ```
    $query = mysql_query("SELECT * FROM product WHERE product_id in (SELECT product_id FROM product ORDER BY RAND() LIMIT 10)");
    while($results[] = mysql_fetch_row($query)); 
    ```

*   方法2（让PHP做大部分工作）：

    ```
    $query = mysql_query("SELECT * FROM product");
    while($results[] = mysql_fetch_row($query));
    shuffle($results);
    $results = array_slice($results, 0, 10); 
    ```

方法一好还是方法二好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:46:24.890

最好让你的 MySQL 来完成这项工作，提取整个数据库的项目是没有意义的，只是丢弃除了 10 件事之外的所有内容。

所以你的方法1：

```
$results = mysql_query("SELECT * FROM product WHERE product_id in (SELECT product_id FROM product ORDER BY RAND() LIMIT 10)"); 
```

是我建议使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:46:46.287

I think MySQL way is better, because array with 1 million items is a really huge, there is no need to pass it in PHP.

# python - Python return 语句未运行

> ID：15577693
> 
> 赞同：0
> 
> 时间：2013-03-22T18:44:45.890
> 
> 标签：python

我正在创建一个程序来计算数字列表中的最高小数位数。基本上，一个列表`[123, 1233]`将返回 4，因为 1233 中有四个数字，它是最大的。另一个例子是`[12, 4333, 5, 555555]`返回 6，因为 555555 有 6 个数字。

这是我的代码。

```
def place(listy):  
    if len(listy) == 1:  
        decimal = len(str(listy[0]))    
        print(decimal)  
    else:  
        if len(str(listy[0])) >= len(str(listy[1])):  
            new_list = listy[0:1]  
            for i in listy[2:]:  
                new_list.append(i)  
            place(new_list)  
        else:   
            place(listy[1:]) 
```

现在，当我使用`print(decimal)`它时，它可以工作，但如果我更改`print(decimal)`为`return decimal`，它不会返回任何东西。为什么是这样？我该如何解决？我遇到过这些运行了很多次的返回语句。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T18:52:41.823

When you do a recursive call (i.e. when *place* calls *place*, and the called *place* returns a value, then the calling *place* must return it as well (i.e. the return value "bubbles up" to the initial caller).

So you need to replace every recursive call

```
place(...) 
```

with

```
return place(...) 
```

As others have said, there are easier solutions, such as using max(). If you want to keep a recursive approach, I would refactor your code as follows:

```
def place2(listy):
    if len(listy) < 1:
        return None
    elif len(listy) == 1:
        return len(str(listy[0]))
    else:
        v0, v1 = listy[0], listy[1]
        if v1 > v0:
            return place2(listy[1:])
        else:
            return place2([listy[0]]+listy[2:]) 
```

Although this is tail-recursive, Python does not really care so this approach will be inefficient. Using max(), or using a loop will be the better solution in Python.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:50:46.090

It's not that the `return` doesn't do anything, it's that you don't propagate the return from your recursive call. You need a few more returns:

```
def place(listy):  
    if len(listy) == 1:  
        decimal = len(str(listy[0]))    
        return decimal
    else:  
        if len(str(listy[0])) >= len(str(listy[1])):  
            new_list = listy[0:1]  
            for i in listy[2:]:  
                new_list.append(i)  
            return place(new_list)  # <-- return added
        else:   
            return place(listy[1:]) # <-- return added 
```

You can see the print at any level, but to get it back to the caller it needs to be propagated.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-19T04:53:41.377

该函数确实返回该值，但它没有将其打印出来。
解决此问题的一种简单方法是，只需在 print 语句中调用该函数。
那是：

```
print(place(listy)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:51:20.983

If all you want is to find the maximum length of a list of integers, consider:

```
max([len(str(n)) for n in N]) 
```

For example

```
N = [1,22,333,4444]
max([len(str(n)) for n in N]) # Returns 4

N = [12, 4333, 5, 555555]
max([len(str(n)) for n in N]) # Returns 6 
```

Note: This will only work for positive integers.

Or more simply:

```
len(str(max(N))) 
```

Which will also only work for positive integers.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-28T09:06:02.113

使用“全局变量”（google it）来访问和更改在您的函数之外定义的变量。

# visual-studio-2010 - 安装了适用于 Windows 的 GitHub 后，无法从包管理器控制台执行 git push

> ID：15577694
> 
> 赞同：1
> 
> 时间：2013-03-22T18:44:46.943
> 
> 标签：visual-studio-2010, visual-studio, git, github, nuget

我已经设置了 Visual Studio 2010，以便从包管理器控制台使用 Git，更准确地说：

*   我已经安装了 msysgit（在 下添加 Git 可执行文件`%PATH%`）；
*   我已经安装了 Posh Git，并使用此[SO answer](https://stackoverflow.com/questions/12454399/posh-git-doesnt-show-branch-in-package-manager-console/12487340)中给出的说明启用了它。

我还安装了适用于 Windows 的 GitHub，以便轻松访问托管在 GitHub 上的存储库。

从包管理器控制台我可以在本地执行所有操作，但是当我想推送到 GitHub 存储库时，提示似乎“被阻止”，我无法`git`使用停止按钮终止，我被迫关闭 Visual Studio 并从 GitHub for Windows 提供的 Git Shell 推送。

使用 Process Explorer，我可以看到`git`生成了 GitHub for Windows 程序来进行身份验证，并且从那里它似乎没有进展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:44:46.943

我通过安装[适用于 Git 的 Windows Credentials Store](http://gitcredentialstore.codeplex.com/)（也在[TFS 博客](http://blogs.msdn.com/b/visualstudioalm/archive/2013/03/08/use-the-git-command-prompt-to-supplement-visual-studio.aspx)中建议）解决了这个问题，以便它处理身份验证而不是适用于 Windows 的 GitHub。

现在我可以`git push`从包管理器控制台进行操作——凭据存储第一次请求凭据，然后正确推送到 GitHub。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T13:45:58.780

如果您的存储库托管在 Team Foundation Service（而不是 GitHub）上，那么除了安装适用于 Git 的 Windows Credentials Store（由 edymtt 回答）之外，您还必须启用基本身份验证，然后才能使用命令提示符执行 Git 任务。您可以从 TFS 中的用户配置文件进行设置。[http://msdn.microsoft.com/library/dd286572(v=vs.120).aspx](http://msdn.microsoft.com/library/dd286572(v=vs.120).aspx)

# wpf - 如何将焦点设置为 UserControl（使其可选择）？

> ID：15577697
> 
> 赞同：9
> 
> 时间：2013-03-22T18:44:57.490
> 
> 标签：wpf, user-controls, focus

我需要将注意力集中在`UserControl`它自己身上，而不是它的孩子身上。
否则我无法实现从缓冲区插入。:(
设置`Focusable=True`没有帮助。谷歌和 SO 只告诉如何将焦点设置到 UserControl 孩子。

我的控件包含：
- 带有绑定到相应 VM 的命令的几个按钮的工具栏
- 作为过滤器输入的 TextBox
- DataGrid - 项目列表。

我需要将 Ctrl+V 命令绑定到 VM。但是要处理这个手势`UserControl`必须有焦点在里面。当网格中没有项目（VM 的集合为空）时，按钮被禁用，唯一可以获得焦点的元素是`TextBox`. 但它以自己的方式处理 Ctrl+V，我不想改变这种行为。
因此，当我单击 UserControl 区域时，我需要一些东西来设置焦点。
我相信 UserControl 是最好的选择。
但我不知道如何使它可选择。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T08:01:04.003

整个问题在于我对控件行为的误解。
这个[SO question](https://stackoverflow.com/questions/15600017/does-mouse-click-brings-keyboard-focus-to-focusable-control-by-default)清楚地表明我相信。

因此，设置`UserControl.Focusable = true`是不够的。为了使它可以通过键盘导航也`IsTabStop`必须是`true`。为了使 UC 可以通过鼠标单击选择，我们应该调用`Focus()`鼠标事件处理程序。而已。

# mercurial - mercurial 存储库的手动备份

> ID：15577698
> 
> 赞同：0
> 
> 时间：2013-03-22T18:45:00.243
> 
> 标签：mercurial, backup, dropbox, tortoisehg, lan

我将 Mercurial 与 tortoiseHg 一起使用，并且我的计算机周围几乎没有存储库（因为我同时使用不同的语言）。我想备份我将手动触发的所有存储库（最好在我的桌面上有一个图标）。我对许多备份解决方案持开放态度，例如使用保管箱，或使用同一网络上的另一台计算机或同时使用两种解决方案。哪个是最好的解决方案，我该如何实施？我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T23:01:53.390

一种选择是将您的存储库导入到像[Bitbucket](http://bitbucket.org)这样的 Mercurial 托管服务中，然后使用 Mercurial 的内置推送功能定期将您的本地更改复制到远程克隆。[您可以在此处](https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-UploadingorpushingaGitorMercurialprojecttoanemptyrepository)找到有关如何将现有存储库导入 Bitbucket 的说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T00:13:38.737

像 BitBucket 这样的存储库托管服务不仅可以让你备份你的存储库，还可以让它们离开现场，在发生重大灾难时为你提供恢复选项，如果你愿意，还可以让你轻松地与他人分享你的工作。

如果您只想备份存储库，您可以使用任何您想要的方法（甚至只是复制文件）来获取项目的 .hg 目录的副本。在工作中，我们使用企业网络上的中央存储库进行备份、防火和访问保护。

# android - 获取异常“错误处理 sql：对象 SQLTransaction”

> ID：15577699
> 
> 赞同：1
> 
> 时间：2013-03-22T18:45:00.583
> 
> 标签：android, cordova

我收到以下异常：

```
error processing SQL: object SQLTransaction 
```

每次在手机间隙Android应用程序中，当我查询一个sqlite数据库时。

谢谢，这是完整的源代码

```
 <html>
 <head>
<script type="text/javascript">
   function validate()
   {

   var p=document.getElementById('searchid');

   var a=new Array();
   a[0]="PatientID";
   a[1]="FirstName";
   a[2]="DateOfBirth";

            for(var i=0;i<a.length;i++)
        {
          if(a[i]==p.getAttribute('placeholder'))
      {

        if(i==a.length-1)
                   {
           p.placeholder=a[0];
        break;
           }
          else
        {
        p.placeholder=a[i+1];
        break;
        }
        }

        }
}

     function validate1()
      {

   var db = window.openDatabase("Databases", "1.0", "PhoneGap Demo", 200000);
       db.transaction(queryDB, errorCB);
      }

     function queryDB(tx)
       {
  var                       placeholdervalue=document.getElementById('searchid').getAttribute('placeholder');
   var searchname=document.getElementById('searchid').value;
    alert(placeholdervalue+","+searchname);

          tx.executeSql("select * from Patient", [], querySuccess, errorCB);

     }
    function querySuccess(tx, results) 
    {
  alert('inside query success');
  var len = results.rows.length;

         if(len>0)
     {
     document.getElementById('tt').innerHTML="search found";
     }
     }

    function errorCB(err) {
        alert("Error processing SQL: "+err);
   }
  </script>
  </head>
       <body>
           <h3>Search</h3>
            <input type="button" value="&gt" onclick="validate()">
            <input type="text" name="search" id="searchid" placeholder="PatientID"/>
            <input type="button" value="search" onclick="validate1()">
           <span id="tt"></span>
     </body>
</html> 
```

未调用函数 querySuccess(tx,results)（在此之前我得到异常）。请帮助

# ruby-on-rails - Rails - 在另一个控制器中使用过滤器参数

> ID：15577704
> 
> 赞同：1
> 
> 时间：2013-03-22T18:45:14.340
> 
> 标签：ruby-on-rails, model-view-controller, filter

在我`index`的一个类的页面上`item`，我有一个表单可以过滤数据库中的条目。您可以按所有字段进行过滤，`item`并表示所有元素，因此代码如下：

```
<%= form_tag(url_for({ :controller => :item, :action => :filter }), :id => 'filter_form') do %>
  <li>
    <% Category.active.each do |category| %>
      <% check_box_tag "categories[]", category.id, checked?(:categories, category.id) %>
      <%= category.name %>
    </li>
    ... 
<% end %> 
```

方法中的控制器`filter`使用此处生成的查询过滤 Item 中的所有条目：

```
@items = Item.includes(:category, ...)
             .joins(:item)
             .where(:category => params[:categories]
             ... 
```

对于过滤器中的所有字段，依此类推。

我`export`在同一个控制器中也有一个方法，它将所有条目导出为 CSV 文件。视图渲染辅助方法中的内容，并将变量@items 从`export`此处的方法传递为`Item.active`.

我想要的是另一种方法`export_filter`，它不是导出表中的所有条目，而是`Item`只导出过滤后的条目。换句话说，我想在我的`export_filter`方法中为我的过滤器表单获取这些表单参数，并使用它们传递给视图和助手。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:31:04.463

这通常通过`index`使用格式（在您的情况下为 html 或 csv）的单一方法来处理。过滤只是列表中的另一个范围 - 渲染由方法中的块处理，例如：

```
respond_to do |format|
  format.html
  format.csv { render text: @products.to_csv }
end 
```

像往常一样 - Railscasts 已经涵盖了这一点，并且是一个很好的资源：

[http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast](http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast)

要设置格式 - 您可以执行另一个按钮（并查看按钮的值）或另一个有助于选择格式的输入。

# php - php代码提取所有文本链接而不是图像链接

> ID：15577708
> 
> 赞同：1
> 
> 时间：2013-03-22T18:45:17.770
> 
> 标签：php, simple-html-dom

我想使用 simplehtmldom 类从网页中提取所有文本链接。但我不想要图片链接。

```
<?
foreach($html->find('a[href]') as $element)
       echo $element->href . '<br>'; 
?> 
```

上面的代码显示了所有包含 href 属性的锚链接。

```
<a href="/contact">contact</a>
<a href="/about">about</a>
<a herf="/home"><img src="logo.png" /><a> 
```

我只想要 /contact 和 /about 而不是 /home，因为它包含图像而不是文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:57:57.087

```
<?php

foreach($html->find('a[href]') as $element)
{
    if (empty(trim($element->plaintext)))
        continue;

    echo $element->href . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:50:34.810

```
<?
foreach($html->find('a[href]') as $element){
    if(!preg_match('%<img%', $element->href)){
        echo $element->href . '<br>';    
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:05:36.743

可以在 css 和 phpquery 中做到这一点：

```
$html->find('a:not(:has(img))') 
```

不过，这不是一个可能会变得简单的功能。

# ios - 在 Cocos2d 的可滚动表格视图中显示动态数据

> ID：15577710
> 
> 赞同：0
> 
> 时间：2013-03-22T18:45:19.183
> 
> 标签：ios, xcode, uitableview, cocos2d-iphone

我正在 cocos2d 中制作一个应用程序。我正在使用 SWTableView 库在 cocos2d 的 tableview 中显示动态内容。[当我从SWTableView Example](https://github.com/scanf/UITableView-cocos2d-test)运行示例代码时绝对没有问题 但是当我从动态服务器加载我的数据时，tableview 在滚动时崩溃。它允许我在静态数据中很好地滚动，就像在示例中一样，但我无法找出错误，因为它只是给了我 BAD_ACCESS。

注意：我觉得可能的原因是动态数据。如果有更好的方法可以在 cocos2d 中以滚动方式加载动态数据，请提出建议。

感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:30:56.547

我刚刚找到了解决方案。有一个非常奇怪的问题，但现在一切正常。

基本上在示例代码中（我在我的问题中提到）有一个名为的委托方法

```
-(SWTableViewCell *)table:(SWTableView *)table cellAtIndex:(NSUInteger)idx; 
```

这里 idx 是 NSUInteger 但每当我直接使用它而不将其转换为 int 或 NSInteger 时，它都会给出 BAD_ACCESS 命令。

然后我将我的数据存储在 MutableDictionary 中，并将它的键作为其索引字符串，即对于第一个人的姓名数据，我将键作为“0”（字符串）并将值作为名称。

因此，每当我检索到我使用的那些值时

```
[name objectForKey:[NSString stringWithFormat:@"%d", idx]] 
```

这工作得很好。

还要提到这里的另一个代表叫

```
-(NSUInteger)numberOfCellsInTableView:(SWTableView *)table; 
```

返回一个整数值，但是当我使用 [Values count] 时，我的应用程序在滚动时会崩溃。

Values 是我的主要数组，用于存储从服务器接收到的数据。最后我开始将我的数据计数存储在 NSUserdefaults 中，我的问题得到了解决。

希望这可以帮助某人。

# github - 里程碑的 Github 钩子

> ID：15577713
> 
> 赞同：1
> 
> 时间：2013-03-22T18:45:30.253
> 
> 标签：github, project-management, webhooks, milestone

我想将 github 与外部服务集成。特别是，我希望在问题关闭或里程碑完成时发生某些操作。[我可以通过针对问题事件更新http://developer.github.com/v3/repos/hooks/](http://developer.github.com/v3/repos/hooks/)添加一个 webhook 来查看如何针对问题执行上述操作。但是，我没有看到围绕里程碑的任何事件。

这是为什么？是疏忽吗？我已经看到 github 里程碑与 google 日历的一些集成——我假设这需要 webhook（我不希望他们对里程碑 api 使用轮询）。

如果没有这样的事件，我认为另一种选择是监听问题事件，每次问题关闭时，检查此问题是否与里程碑相关联，如果是，则检查与该里程碑相关的所有其他问题是否已经关闭然后创建我自己的“里程碑完成”事件。（我不需要里程碑创建事件）。

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T13:18:34.497

是的，目前没有里程碑事件。您使用问题事件并检查[里程碑关闭问题计数](http://developer.github.com/v3/issues/milestones/#get-a-single-milestone)的想法可能也是我这样做的方式。请记住在获取里程碑信息时使用条件 GET 以[减少 API 配额消耗](http://developer.github.com/v3/#conditional-requests)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T10:47:39.890

现在有里程碑的 webhook 事件 - 由 Github 在 2016 年 10 月引入。请参阅：

[https://developer.github.com/changes/2016-10-27-new-label-and-milestone-webhooks/](https://developer.github.com/changes/2016-10-27-new-label-and-milestone-webhooks/)

# android - Android：在谷歌地图中搜索后活动的奇怪行为

> ID：15577718
> 
> 赞同：0
> 
> 时间：2013-03-22T18:45:52.797
> 
> 标签：android, google-maps

一开始应用看起来像'Header 1 Content 1; 标题 2 内容 2；标题 3 内容 3'。当您按下“Go to Google Maps”按钮时，此应用会打开并搜索“朝鲜”。当您返回时，应用程序变为'Header 1 Content 3; 标题 2 内容 3；标题 3 内容 3'（所有内容都是 3）！为什么？至少在 Android 4.0.4（华为荣耀官方）上发生。

如您所见，我在其中使用了带有 LinearLayout 的 ScrollView，并在其中添加了**item.xml**中描述的视图。

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.HelloWorld"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MyActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**我的活动.java**

```
package com.example.HelloWorld;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addBlock("Header1", "Content1");
        addBlock("Header2", "Content2");
        addBlock("Header3", "Content3");
    }

    public void openMaps(View view) {
        String uri = "geo:0,0?q=North+Korea";
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
        startActivity(intent);
    }

    private void addBlock(String header, String content) {
        final LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linearLayout);
        final LayoutInflater factory = LayoutInflater.from(this);
        final View view = factory.inflate(R.layout.item, null);
        final TextView headerView = (TextView) view.findViewById(R.id.header);
        final TextView contentView = (TextView) view.findViewById(R.id.content);
        if (header.isEmpty()) {
            headerView.setHeight(0);
        }
        headerView.setText(header);
        contentView.setText(content);
        linearLayout.addView(view);
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Go to Google Maps"
            android:id="@+id/button" android:onClick="openMaps"/>
    <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/scrollView">
        <LinearLayout
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" android:longClickable="false" android:id="@+id/linearLayout">
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

**项目.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Header"
            android:id="@+id/header" android:layout_gravity="left|center_vertical" android:textStyle="bold"
            android:layout_marginLeft="5dp"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Content"
            android:id="@+id/content" android:layout_gravity="left|center_vertical" android:layout_marginLeft="10dp"
            android:textIsSelectable="true"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:44:48.580

您在代码中列出的内容很难说。一种需要查看 Activity 回调以查看 Activity 的状态是如何恢复的，以及当您说转到 Google Maps 时它将去往何处。我从经验中知道，当您在 ScrollView 中使用自己的 ListView 时，创建一个 Parcelable 数据对象来保存对象的状态以及重新创建 Activity 或（带回前面）到将您的视图状态恢复到您想要的状态。如果您使用的是活动而不是片段，则可以使用 onCreate() 和 onSavedInstanceState() 回调来完成此操作。如果您在那里提供更多信息，我可以提供更多帮助。

# java - 在与父 Activity 不同的进程中完成子 Activity。完成活动（）不工作

> ID：15577719
> 
> 赞同：1
> 
> 时间：2013-03-22T18:45:58.727
> 
> 标签：java, android

我有一个`Activity`[Activity1]，它启动了一个`Runnable`名为 [ProRunnable] 的对象，并且在其中`run()`我`ProRunnable`有一个名为 [TExecutor] 的类的实例，我调用了一个方法。

然后该方法启动另一个`Activity`[Activity2] 以获得结果。以`Activity2`开头。`Callable`_`ExecutorService`

`TExecutor`包含对 的引用`Activity1`。**我怎样才能强制`Activity2`从外面完成`Activity2`？我需要`Activity2`完成并`Callable`停止运行。**

我试过`activity1.finishActivity(1)`“1”是我用来开始的请求`Activity2`代码`TExecutor`。但它从不调用`onDestroy`of `Activity2`。而且我没有看到它正在尝试完成`Activity2`.

在我调用活动完成后，它似乎没有进入`onDestroy`并且可调用对象继续运行。

`Activity2`没有主题，所以它基本上在后台运行。它也处于不同的过程中。我在清单中设置了所有这些，显示在底部。

听起来很混乱，我知道。如果您需要更多信息，请告诉我。

谢谢

* * *

```
public class Activity1 extends FragmentActivity {

    private ProRunnable proRunnable;
    private Thread thread;

    public onStart() {

        this.proRunnable = new ProRunnable(this);
        this.thread = new Thread(this.proRunnable);
        this.thread.start();
    }

    ON BUTTON PRESS {

        this.finishActivity(Activity2.REQUEST_CODE);
    }

    protected void onActivityResult(int reqCode, int resCode, Intent data) {

        if(reqCode == Activity2.REQUEST_CODE) {

            //do stuff
        }
    }
} 
```

* * *

```
public class ProRunnable implements Runnable {

    private TExecutor tExecutor;
    private Activity activty1;

    public ProRunnable(Activity activity) {

        this.activity1 = activity;
    }

    public void run() {

        this.tExecutor = new TExecutor(this.activity1);
        this.tExecutor.execute();
    }
} 
```

* * *

```
public final class TExecutor {

    private final Activity activity1;
    private Intent activity2Intent;

    public TExecutor(Activity activity) {

        this.activity1 = activity;
    }

    public void execute() {

        this.activity2Intent = new Intent(activity1.getBaseContext(), Activity2.class);
        this.activity2Intent.startActivityForResult(this.activity2Intent, Activity2.REQUEST_CODE);
    }
} 
```

* * *

```
public class Activity2 extends Activity {

    public static final int REQUEST_CODE = 1;
    private ExecutorService executor;

    protected void onStart() {

        Intent returnIntent = new Intent();
        InsertThread insert = new InserterThread();
        this.executor = Executors.newSingleThreadExecutor();
        Future<Boolean> submit = this.executor.submit(inserter);

        try {

            submit.get();
        } catch ... {
        }
    }

    private class InserterThread implements Callable<Boolean> {

        public InserterThread() {

        }

        public Boolean call() throws ... {

            while(!Thread.currentThread().isInterrupted()) {

                for(...) {

                    if(Thread.currentThread().isInterrupted()) {

                        break;
                    }
                }
            }
        }

        protected void onDestroy() {

            super.onDestroy();
            Log.e(TAG, "DESTROYING THE ACTIVITY");
            this.executor.shutdownNow();
        }
    }
} 
```

* * *

```
<manifest...>
    <application android:process="package.path.p1">
        <activity android:name="package.path.Activity1"/>
        <activity android:name="package.path.Activity2" android:process="package.path.p2" android:theme="@android:style/Theme.NoDisplay"/>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:25:17.057

尝试after calls的 shutdown [Life Cycle](http://developer.android.com/images/activity_lifecycle.png)中的其他功能。我怀疑这实际上是在接收or ，而不是，它仅由系统根据资源可用性突发奇想调用。`Activity2``TExecutor``activity1.finishActivity(1)``Activity2``onPause()``onStop()``onDestroy()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:42:58.510

我们实际上将它们完全移动到单独的应用程序中。并且改变了相当多的结构。

# youtube - Fancybox 和 YouTube

> ID：15577721
> 
> 赞同：1
> 
> 时间：2013-03-22T18:46:12.393
> 
> 标签：youtube, fancybox

我一直在这里寻找答案，尝试了很多建议，但仍在三振。

我将 Fancybox 设置为在我的网站上显示带有缩略图的 YouTube 视频。它已经工作了一段时间没有任何问题，但现在由于某种原因视频没有出现在 Fancybox 覆盖中，只有浏览器窗口，全尺寸。

我一直在使用的 jquery 是：

```
 <!-- Grab Google CDN's jQuery, fall back to local if offline -->

   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

   <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

   <!-- FancyBox -->

   <script src="js/fancybox/jquery.fancybox.js"></script>
   <script src="js/fancybox/jquery.fancybox-buttons.js"></script>
   <script src="js/fancybox/jquery.fancybox-thumbs.js"></script>
   <script src="js/fancybox/jquery.easing-1.3.pack.js"></script>
   <script src="js/fancybox/jquery.mousewheel-3.0.6.pack.js"></script>
   <script type="text/javascript">

        $(document).ready(function() {
            $(".various").fancybox({
                                              'padding' : 0,
                                              'type' : 'iframe',
                maxWidth    : 800,
                maxHeight   : 600,
                fitToView   : false,
                width       : '70%',
                height      : '70%',
                autoSize    : false,
                closeClick  : false,
                openEffect  : 'elastic',
                closeEffect: 'none'
            });
        });
    </script> 
```

html是这样设置的：

```
<a class="various fancybox.iframe" title="Popular Mechanics Show" href="http://www.youtube.com/embed/Z0Hc272S2mk"><img src="images/video/popmech.jpg"></a> 
```

这是视频页面： http: [//mykelhawke.com/video](http://mykelhawke.com/video)

任何帮助是极大的赞赏！

# grails - 在 Grails 中保存嵌套域对象

> ID：15577725
> 
> 赞同：3
> 
> 时间：2013-03-22T18:46:21.413
> 
> 标签：grails, grails-orm, one-to-many

**我更新了下面的问题**

我试图在 Grails 中保存一系列嵌套的域对象，但我遇到了语法问题。

例如，假设我有以下嵌套的一对多关系：

艺术家->专辑->歌曲

我首先创建一个艺术家

```
Artist artist = new Artist(parameters)
artist.save() 
```

对于新保存的艺术家，我希望保存一系列专辑及其相关歌曲。

我认为这样的事情会起作用，但我得到的结果好坏参半。

```
Album album = new Album()
artist.addToAlbum(album)
Song song = new Song()
album.addToSong(song) 
```

我看到的是一个新的专辑域对象，但没有新的歌曲。我尝试了一个简单的 println 来检查“专辑”的状态，它返回一个空值。很明显，我可以将专辑添加到现有的艺术家，但我没有取回专辑本身，以便我可以添加歌曲。有人可以阐明如何在 GORM/Grails 中保存多个嵌套对象吗？

谢谢

实际域：嵌套 DataLoad->DataSeries->ReportedResult

数据加载

```
class DataLoad {

static hasMany = [dataSeries: DataSeries]
String fileLocation
Date dateCreated
Date lastUpdated
CROSource croSource

List dataSeries = new ArrayList()

static mapping = {

     dataSeries cascade:"all-delete-orphan"

}} 
```

数据系列

```
class DataSeries {

//parent and child relationships one-to-many
static belongsTo = [dataLoad: DataLoad]
static hasMany = [reportedResult: ReportedResult]
//this functions as an experiment_id for data which needs to be viewed together
String randomString
Date dateCreated
Date lastUpdated

List reportedResult = new ArrayList()
static mapping = {
     reportedResult cascade:"all-delete-orphan"
}} 
```

报告结果

```
class ReportedResult implements Serializable {

//parent and child relationships one-to-many
static belongsTo = [dataSeries: DataSeries]
static hasMany = [resultDefData: ResultDefData]
List resultDefData = new ArrayList()
//has one-to-one relationship   -may need to make this a one sided relationship does not always need a Curve
Curve curve

AssayGroup assayGroup
AssayDefinition assayDefinition
AssayProtocol assayProtocol
ResultStatistic resultStatistic
ResultType resultType

//actual result fields
Float resultValue
String resultValueUnit
String resultModifier
Boolean resultObtained
Date resultTime
Integer compoundID
Float resultStatValue
String resultComment
Float resultRawValue

String linkToExternalFile
String studyNumber

Date dateCreated
Date lastUpdated

static mapping = {
resultDefData cascade:"all-delete-orphan"
}} 
```

**更新**

因此，如果我尝试以下类似的方法，它会起作用。必须是我的某个域中的其他内容。我会尝试解决我的问题，但作为参考，这应该可以。

```
Artist artist = new Artist(artistName: "MyName")
artist.save()

    Album album = new Album(albumName: "myAlbum")
    artist.addToAlbums(album)

  Song song = new Song(songName: "just a song")
    album.addToSongs(song) 
```

# java - Manifest Classpath for Jar files

> ID：15577735
> 
> 赞同：0
> 
> 时间：2013-03-22T18:46:47.540
> 
> 标签：java, manifest

I created a small application which includes an external package called JavaFX. The package contains 4 jar file. When I create a jar from the command line to the current directory, the jar executes OK (importing classes from the 4 jars). But when I move that jar file from a different directory, the file wont execute. In other words the created jar can't seem to locate the classes in those jar files (JavaFX jars) ?

Below is the manifest file:

```
Main-Class: QuizMenu    
Class-Path:
 deploy.jar
 javaws.jar
 jfxrt.jar
 plugin.jar 
```

The textfile does contain a space at the start and end of each line of the jars, and a final carriage return at the last line (Each line apart from the last line does not contain a carriage return). Also the `Main-Class:` header works OK. (Just the classpath doesn't seem to work).

Can anyone identify the problem with the file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:53:48.470

*推荐*

您不应`deploy.jar javaws.jar jfxrt.jar plugin.jar`在 mainifest 文件中引用任何这些 ( ) jar 文件。

* * *

*JavaFX 打包工具*

相反，您应该使用 JavaFX 感知[部署工具](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)，例如：

1.  [javafxpackager](http://docs.oracle.com/javafx/2/deployment/packager.htm#CCHIHIIJ)
2.  [JavaFX 蚂蚁任务](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIADCBJG)
3.  [JavaFX Maven 插件](https://github.com/zonski/javafx-maven-plugin)
4.  [JavaFX gradle 插件](https://bitbucket.org/shemnon/javafx-gradle)
5.  [NetBeans JavaFX 项目](http://netbeans.org/kb/docs/java/javafx-setup.html)
6.  将来可能会出现的其他一些兼容工具。

上述工具将适当地打包您的应用程序以使用 JavaFX。

* * *

*背景*

如果您尝试将 JavaFX、Java 部署和 Java 插件 jar 文件与您的应用程序捆绑在一起，那么当您在不同的 Java 版本（例如 Java 8 或 9）上运行您的应用程序时，它可能无法在所有未来版本中像 JavaFX 一样正常运行将被定义为 Java 运行时平台的一部分，而不是作为单独安装的库或可以与独立于 Java 运行时其余部分的应用程序捆绑在一起的库。

此外，诸如 jfxrt.jar 之类的 jar 文件依赖于许多本机动态链接库（.so、.dll 等），这些库因平台而异，并具有 32 位和 64 位变体。jfxrt.jar 的版本必须与底层本机库的版本相匹配（并且适当平台的底层本机库必须对动态加载链接器可用）才能使 jfxrt.jar（例如 JavaFX）正常运行。

# ruby-on-rails - 使用 Capistrano 运行同时或异步任务

> ID：15577737
> 
> 赞同：4
> 
> 时间：2013-03-22T18:46:59.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, asynchronous, capistrano

我有一些长时间运行的进程重启，`deploy.rb`例如：

*   `rake assets:precompile`
*   `script/delayed_job restart`
*   `rake sunspot:solr:stop`,`rake sunspot:solr:start`

所有这些过程都必须发生，但不一定一个接一个。

我想知道我是否可以同时运行`assets:precompile`和`delayed_job restart`，因为它们不需要一个接一个地发生，我可以通过异步执行它们来加快我的部署时间。

我已经运行了一些谷歌搜索，但我找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:58:00.127

这不是 capistrano 支持的功能。

我一直在寻找解决方案，并在[Capistrano google groups](https://groups.google.com/forum/?fromgroups=#!topic/capistrano/hZAvU9aHn-A)上找到了一些东西。建议是使用 Capistrano 运行一个 ruby​​ 脚本，该脚本使用 Ruby 自己的线程支持并行运行作业。

如果您阅读该帖子，其中一位作者确实会问为什么这些任务需要并行运行，因为您可以引入竞争条件和其他非确定性行为，这会使部署过程更加脆弱。

# php - Htaccess在godaddy服务器中不起作用

> ID：15577755
> 
> 赞同：-2
> 
> 时间：2013-03-22T18:47:57.443
> 
> 标签：php, .htaccess, url-rewriting

我在使用重定向 url 时遇到问题`.htaccess`。

当我尝试打开该页面时，我得到一个 404 错误页面。

这是我的 htaccess 代码：

```
RewriteEngine on

# Force www
#RewriteCond %{HTTP_HOST} !^www\.      
#RewriteRule ^(.*)$ http://mysitename.com/myproject/$1 [R=301,L]   

Options -Indexes

RewriteRule ^newname/([0-9]+)$ index.php?stid=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:00:11.770

我相信您必须将要重写的 URL 指向站点根目录的基础。

```
RewriteRule ^newname/([0-9]+)$ /index.php?stid=$1 
```

# lua - 如何在lua中找到正弦^-1（正弦逆）

> ID：15577759
> 
> 赞同：1
> 
> 时间：2013-03-22T18:48:08.507
> 
> 标签：lua, trigonometry, inverse

我只需要一个给我倒正弦的函数。我试过使用

```
math.sin(x)^-1 
```

但这不起作用......你如何在lua中找到一个数字的倒正弦？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:50:17.107

你的意思是 arcsin 吗？

```
math.asin(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:50:50.000

我不知道 Lua，但在大多数语言中都有一个名为 asin() 或 arcsin() 的函数。

# php - 使用 PHP 脚本从 Asterisk Manager 打开和关闭套接字时内存泄漏

> ID：15577761
> 
> 赞同：0
> 
> 时间：2013-03-22T18:48:26.113
> 
> 标签：php, sockets, asterisk

我正在使用星号 ami 打开一个套接字并将命令发送到星号服务器以执行特定任务。据我所知，套接字已打开，命令已发送，然后套接字将关闭。但是，我在星号机器上的内存使用量随着时间的推移略有增加，直到我不得不重新启动 httpd 服务。它的代码不多，但我是 php 新手，所以我不确定出了什么问题，或者我是否应该在别处寻找。

```
<?php
echo $sipexten = $_REQUEST["sipexten"];
echo $xferext = $_REQUEST["xferext"];

$wrets = "";
$amiusername = 'XXX';
$amisecret   = 'XXX';
$socket = '';       

//MAIN PROCESS       
//quit if any parameters are missing
if ($sipexten == '' || $xferext == ''){
    exit('not enough parameters');   //stop further processing for not enough     parameters
}

ob_implicit_flush(true);
$socket = fsockopen("127.0.0.1","5038", $errno, $errstr, 0);    
$wrets = fread($socket,30);
fputs($socket, "Action: Login\r\n");
fputs($socket, "UserName: $amiusername\r\n");
fputs($socket, "Events: off\r\n");
fputs($socket, "Secret: $amisecret\r\n\r\n");
fputs($socket, "Action: CoreShowChannels\r\n\r\n");
fputs($socket, "Action: Logoff\r\n\r\n");        
while (!feof($socket)) {
    $wrets .= fread($socket,8192 );
}
fclose($socket);   

$sipexten = "Channel: SIP/$sipexten";
$channelVal = strpos($wrets,$sipexten);
if ($channelVal){
    $channel=trim(substr($wrets,$channelVal+9,strpos(substr($wrets,$channelVal),"UniqueID:")-9)    );
}

ob_implicit_flush(true);
$socket = fsockopen("127.0.0.1","5038", $errno, $errstr, 0);    
$wrets = fread($socket,30);
fputs($socket, "Action: Login\r\n");
fputs($socket, "UserName: $amiusername\r\n");
fputs($socket, "Events: off\r\n");
fputs($socket, "Secret: $amisecret\r\n\r\n");
fputs($socket, "Action: Atxfer\r\n");
fputs($socket, "Channel: $channel\r\n");
fputs($socket, "Exten: $xferext\r\n");
fputs($socket, "Priority: 1\r\n\r\n");
fputs($socket, "Action: Logoff\r\n\r\n");        
while (!feof($socket)) {
    $wrets .= fread($socket,8192 );
}
fclose($socket); 
echo "<br />";         
echo $wrets;
?> 
```

这是我的其他脚本的样子：

```
<?php

$sipexten = $_REQUEST["sipexten"];

$command = $_REQUEST["command"];

$isgood = $_REQUEST["isgood"]; 

$subfolder = $_REQUEST["subfolder"];

$srcname = $_REQUEST["srcname"];

$dstname = $_REQUEST["dstname"];

$wrets = "";
$amiusername = 'XXX';
$amisecret   = 'XXX';
$sipchannel = '';

$audiofolder = '/var/lib/asterisk/sounds/customaudio2play/';
$badfolder = 'bad';
$goodfolder = 'good';
$recordingformat = 'gsm'; 
$socket = '';        

if ($command == 'start'){  
    if ($sipexten == '' || $subfolder == '' || $srcname ==''){
        exit('not enough parameters');   //stop further processing for not enough parameters
    }
    //Check if SIP/sipexten is having a call. If yes, proceed.

    $sipchannel = amigetchannel();

    if ($sipchannel != '') {

        //AMI LOGIN

        // don't buffer output... flush it immediately
        ob_implicit_flush(true);
        $socket = fsockopen("127.0.0.1","5038", $errno, $errstr, 0);    
        $wrets = fread($socket,30);
        //AMI Login
        fputs($socket, "Action: Login\r\n");
        fputs($socket, "UserName: $amiusername\r\n");
        fputs($socket, "Events: off\r\n");
        fputs($socket, "Secret: $amisecret\r\n\r\n");
        fputs($socket, "Action: Monitor\r\n");
        fputs($socket, "Channel: $sipchannel\r\n");
        fputs($socket, "File: $audiofolder/$subfolder/$srcname\r\n");
        fputs($socket, "Format: $recordingformat\r\n");
        fputs($socket, "Mix: 1\r\n\r\n");

        //LOG OFF AMI
        fputs($socket, "Action: Logoff\r\n\r\n"); 
        while (!feof($socket)) {
            $wrets .= fread($socket,8192 );
        }
        fclose($socket);  
        echo $wrets;
        echo ('start executed');
    } else {
        //No channel found
        echo ('No active channel');
    }       //$sipchannel != '';    
    //DONE

} elseif ($command == 'stop'){
    if ($sipexten == ''){
        exit('not enough parameters');   //stop further processing for not enough parameters
    }

    //Get current channel of $sipexten
    $sipchannel = amigetchannel();

    if ($sipchannel != '') {

        //AMI LOGIN
        // don't buffer output... flush it immediately
        ob_implicit_flush(true);
        $socket = fsockopen("127.0.0.1","5038", $errno, $errstr, 0);    
        $wrets = fread($socket,30);
        //AMI Login
        fputs($socket, "Action: Login\r\n");
        fputs($socket, "UserName: $amiusername\r\n");
        fputs($socket, "Events: off\r\n");
        fputs($socket, "Secret: $amisecret\r\n\r\n");
        fputs($socket, "Action: StopMonitor\r\n");
        fputs($socket, "Channel: $sipchannel\r\n\r\n");

        //LOG OFF AMI
        fputs($socket, "Action: Logoff\r\n\r\n"); 
        while (!feof($socket)) {
            $wrets .= fread($socket,8192 );
        }
        fclose($socket);  
        echo $wrets;

    }
    echo ('stop executed');
} elseif ($command=='showchannels') {

    echo ('</br> sip channel: ' . amigetchannel());

}

echo ('</br>End of file');

function amigetchannel(){

    global $sipexten, $amiusername, $amisecret;

    // don't buffer output... flush it immediately
    ob_implicit_flush(true);
    $socket = fsockopen("127.0.0.1","5038", $errno, $errstr, 0);    
    $wrets = fread($socket,30);
    //AMI Login
    fputs($socket, "Action: Login\r\n");
    fputs($socket, "UserName: $amiusername\r\n");
    fputs($socket, "Events: off\r\n");
    fputs($socket, "Secret: $amisecret\r\n\r\n");

    fputs($socket, "Action: CoreShowChannels\r\n\r\n");

    //LOG OFF AMI
    fputs($socket, "Action: Logoff\r\n\r\n"); 
    while (!feof($socket)) {
        $wrets .= fread($socket,8192 );
    }
    fclose($socket);  

    $needle = "Channel: SIP/" . $sipexten;
    $channelVal = strpos($wrets,$needle);

    if ($channelVal){
$sipchannel=trim(substr($wrets,$channelVal+9,strpos(substr($wrets,$channelVal),"UniqueID:")-9));
            }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:02:15.767

使用 top 或 ps 实用程序检查哪个进程使用内存，然后调试您的代码是否存在内存泄漏。

如果 apache 使用内存，请检查您的 httpd.conf，有参数“MaxRequestsPerChild”可用于重新启动错误线程。

```
<IfModule worker.c>
StartServers         2
MaxClients         150
MinSpareThreads     25
MaxSpareThreads     75
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule> 
```

# html - 使用 css3 过渡

> ID：15577768
> 
> 赞同：0
> 
> 时间：2013-03-22T18:48:50.177
> 
> 标签：html, css, animation, hyperlink, transition

有人知道如何在我的文本下自动添加一行吗？ [**这是我的动画**](http://jsfiddle.net/DashDesign/SD58Z/430/)

```
<div class="line"><div>behance.net</div>
</div>
<br>
<div class="line"><div>google.pl</div>
</div>
<br>
<div class="line"><div>twitter.com</div>
</div></br> 
```

CSS

```
.line{
    font-family:Tahoma;
    width:0px;
    position: absolute;
    background:black;
    transition:width 0.4s ease ;
}

div:hover{
    position: absolute;
    width:86px;
}
.line div{
    background:#fff;
    position:relative;
    bottom:1px;
} 
```

在第一个示例中，一切正常，线宽还可以，但在其他情况下则不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:05:30.083

你可以试试这个 - [**DEMO**](http://jsfiddle.net/SD58Z/431/)

***HTML***

```
<div class="line">behance.net <span></span></div> <br />
<div class="line">google.pl <span></span></div> <br />
<div class="line">twitter.com <span></span></div> <br /> 
```

***CSS***

```
.line {
    font: 400 1em Tahoma;
    margin: 5px;
    display: inline-block;
    overflow: hidden;
    padding: 2px 0;
    position: relative;
}

.line span {
    display: block;
    position: absolute;
    left: -90px;
    bottom: 1px;
    height: 1px;
    width: 100%;
    background: #c00;
    -webkit-transition: all .4s;
}

.line:hover span {
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:19:37.750

另一种标记较少的解决方案：

# [**演示**](http://codepen.io/thebabydino/pen/Ffpdx)

```
<div class='line'>behance.net</div><br>
<div class='line'>google.pl</div><br>
<div class='line'>twitter.com</div><br> 
```

CSS：

```
.line {
  display: inline-block;
  position: relative;
  background-position: -85px 0;
  transition: 1s;
  cursor: pointer;
}
.line:before {
  position: absolute;
  right: 0; top: 0; bottom: 0; left: 0;
  background: linear-gradient(0deg, crimson 1px, transparent 1px) no-repeat;
  background-position: inherit;
  background-size: 100% 100%;
  color: transparent;
  content: '';
}
.line:hover { background-position: 0 0; } 
```

* * *

### ***注意***：

*我的演示使用[**-prefix-free**](http://leaverou.github.com/prefixfree/)，它根据需要添加前缀。WebKit 浏览器仍然需要[**过渡**](http://caniuse.com/css-transitions)和[**渐变**](http://caniuse.com/css-gradients)的前缀。您必须自己在代码中添加这些内容。当你这样做时，请记住**始终**将**无前缀**的放在**最后**！*

# http - 如何从一个国家/地区应用 URL 重定向？

> ID：15577769
> 
> 赞同：0
> 
> 时间：2013-03-22T18:48:52.820
> 
> 标签：http, url, redirect, http-redirect, url-redirection

我住在美国。我有一个网站。我希望任何试图在日本查看该网站的人都被重定向到不同的网页。

我该怎么做呢？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:55:24.880

如果您的服务器上安装了 GeoIP Extension，您可以使用此操作，请查看此答案：

[如何根据国家IP地址重定向域](https://stackoverflow.com/questions/9838344/how-to-redirect-domain-according-to-country-ip-address)

# spring - Spring，Struts，Hibernate 应用程序抛出异常 org.springframework.beans.factory.BeanCreationException

> ID：15577770
> 
> 赞同：0
> 
> 时间：2013-03-22T18:48:56.617
> 
> 标签：spring, hibernate, struts

在我开发 struts1、Spring、Hibernate 应用程序时出现异常

```
org.springframework.beans.factory.BeanCreationException:
Error creating bean with name
'sessionFactory' defined in ServletContext resource
[/WEB-INF/spring-servlet.xml]: 
Invocation of init method failed; nested exception
is java.lang.NoSuchMethodError:     
net.sf.cglib.proxy.Enhancer.setInterceptDuringConstruction(Z)V

org.springframework.beans.factory.BeanCreationException: Error creating bean with name   'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: net.sf.cglib.proxy.Enhancer.setInterceptDuringConstruction(Z)V
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.struts.ContextLoaderPlugIn.createWebApplicationContext(ContextLoaderPlugIn.java:356)
at org.springframework.web.struts.ContextLoaderPlugIn.initWebApplicationContext(ContextLoaderPlugIn.java:297)
at org.springframework.web.struts.ContextLoaderPlugIn.init(ContextLoaderPlugIn.java:227)
at org.apache.struts.action.ActionServlet.initModulePlugIns(ActionServlet.java:1158)
at org.apache.struts.action.ActionServlet.init(ActionServlet.java:473)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4042)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4348)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:920)
at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:883)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.NoSuchMethodError: net.sf.cglib.proxy.Enhancer.setInterceptDuringConstruction(Z)V
at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxyFactory(CGLIBLazyInitializer.java:126)
at org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.postInstantiate(CGLIBProxyFactory.java:43)
at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:162)
at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:135)
at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:55)
at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:56)
at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:302)
at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:434)
at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:109)
at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:55)
at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:226)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1300)
at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
... 41 more
Mar 23, 2013 12:02:25 AM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet action as unavailable
Mar 23, 2013 12:02:25 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /Bank threw load() exception
javax.servlet.UnavailableException
at     org.apache.struts.action.ActionServlet.initModulePlugIns(ActionServlet.java:1169)
at org.apache.struts.action.ActionServlet.init(ActionServlet.java:473)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4042)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4348)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:920)
at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:883)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

我怎么能解决它我尝试了很多解决方案，比如我使用了 hibernate-3.2.6.ga jar 和 cglib-nodep-2.1_3jar 但仍然没有解决这个问题。请帮助我，我只是卡在这里。

这是我的 spring-servlet.xml 文件

```
<beans 
xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
 <context:annotation-config/>   
  <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/vik" />
    <property name="username" value="root" />
   </bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
        <property name="mappingResources">
        <list>
            <value>
                com/hibernate/Customer.hbm.xml</value>
            <value>com/hibernate/Account.hbm.xml</value>
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        </props>
    </property>
</bean>

<bean id="htemp" class="org.springframework.orm.hibernate3.HibernateTemplate"
    autowire="constructor" />
<bean id="txManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    autowire="byName" />    
<beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:56:55.620

关于你的问题，这是我的解决方案：

```
just use cglib-2.1_3jboss.jar instead of cglib-nodep-2.1_3jar. 
```

它会很好用，祝你好运:)

# json - 如何防止json将float转换为int？

> ID：15577775
> 
> 赞同：2
> 
> 时间：2013-03-22T18:49:14.580
> 
> 标签：json, parsing, google-chrome

我正在编写一个脚本来加载 Chrome 首选项文件（JSON 对象），修改并保存它（在各种机器上轻松设置我的首选项）。我使用 JSON.parse 读取文件并使用 JSON.stringify 创建我写回的字符串。

Chrome 拒绝读取我保存的文件，当我运行文件比较时，我可以看到一些值自动从 float 转换为 int：

“someval”：1.0，
到
“someval”：1，

有没有办法防止这种自动转换？我正在使用 json2.min.js，当我尝试使用 json3.min.js 时，我在解析后仍然得到一个 int，在调用 JSON.stringify 时仍然得到一个错误。

谢谢，

# grails - 解码转义（在 grails 中编码 URIComponent

> ID：15577780
> 
> 赞同：2
> 
> 时间：2013-03-22T18:49:30.563
> 
> 标签：grails

问这个问题我觉得很愚蠢，但我正在使用一个框架，该框架在通过以下方式编码后向我发布数据：

```
escape(encodeURIComponent(somedata)) 
```

我试图在服务器端扭转它。我试过`decodeHTML()`了，它让我接近，但我现在需要扭转逃生。我也试过`decodeJavaScript`了，但它说它是 DNE。

> 没有方法签名：java.lang.String.decodeJavaScript() 适用于参数类型：() 值：[]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:59:29.183

可以说我最愚蠢的问题很容易解决。如果某些东西在 js 中被编码为`escape(encodeURIComponent(somedata))` 相反的是：

```
params.somedata.decodeHTML().decodeURL() 
```

**TMYK** :

is的反面，`escape`is`decodeURL`的引用`encodeURIComponent``decodeHTML.`

# c# - 返回以 10 为底的整数

> ID：15577789
> 
> 赞同：0
> 
> 时间：2013-03-22T18:49:45.043
> 
> 标签：c#, base

我一直在试图理解如何输入一个整数并让一个函数在 C# 中返回以 10 为底的数字。我进行了研究，除了数学公式之外，找不到很多代码示例。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:52:40.303

听起来你只是想要：

```
int value = 2590123;
string text = value.ToString(); 
```

这将自动使用以 10 为底的……至少在我所知道的所有文化中。如果您真的想确定，请使用不变的文化：

```
string text = value.ToString(CultureInfo.InvariantCulture); 
```

请注意，只有当您谈论具有某种形式的单独“数字”的某种表示时，基的概念才有意义 - 例如字符串表示。一个纯*数字*没有底数——如果你有 16 个苹果，这与你有 0x10 个苹果的数字相同。

编辑：或者，如果您想编写一个方法以将数字序列作为整数返回，首先是最低有效：

```
// Note that this won't give pleasant results for negative input
static IEnumerable<int> GetDigits(int input)
{
    // Special case...
    if (input == 0)
    {
        yield return 0;
        yield break;
    }
    while (input != 0)
    {
        yield return input % 10;
        input = input / 10;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:55:03.757

做了很多假设，我猜你想要这样的东西：

```
// All ints are "base 10"
var thisIsAlreadyBase10 = 10;
Console.WriteLine("The number {0} in base 10 is {0}", thisIsAlreadyBase10);

// However, if you have a string with a non-base 10 number...
var thisHoweverIsAStringInHex = "deadbeef";
Console.WriteLine(
    "The hex string {0} == base 10 int value {1}", 
    thisHoweverIsAStringInHex, 
    Convert.ToInt32(thisHoweverIsAStringInHex, 16)); 
```

# php - 带有标题视图的 Angular ng-repeat

> ID：15577791
> 
> 赞同：1
> 
> 时间：2013-03-22T18:49:50.800
> 
> 标签：php, javascript, twitter-bootstrap, angularjs

我知道的基本用法，`ng-repeat`我可以很容易地生成一个列表。

```
<ul>
  <li ng-repeat="presentation in presentations">
    {{presentation.title}}
  </li>
</ul> 
```

我有一个从 PHP 返回的数组：

```
presentations = Array
(
    [0] => stdClass Object (
            [collection] => Collection A
            [title] => Title 1a
        )
    [1] => stdClass Object (
            [collection] => Collection A
            [title] => Title 2a
        )
    [2] => stdClass Object (
            [collection] => Collection B
            [title] => Title 1b
        )
    [3] => stdClass Object (
            [collection] => Collection B
            [title] => Title 2b
        )
    [4] => stdClass Object (
            [collection] => Collection C
            [title] => Title 1c
        )
    [5] => stdClass Object (
            [collection] => Collection C
            [title] => Title 2c
        )
    [6] => stdClass Object (
            [collection] => Collection C
            [title] => Title 3c
        )
) 
```

您会注意到每个对象都有一个`collection`.

我需要基本上为每个集合创建一个标题视图。我需要它显示如下：

```
COLLECTION A
    - Title 1a
    - Title 2a
COLLECTION B
    - Title 1b
    - Title 2b
COLLECTION C
    - Title 1c
    - Title 2c
    - Title 3c 
```

只有标题是可点击的。这可能与 just 有关`ng-repeat`吗？我知道我可以在 PHP 中将每个集合排序到单独的数组中。我应该先这样做吗？如果可能的话，我想使用`ng-repeat`，我只是不知道如何解决这个问题。

`nav-list`我计划使用 twitter bootstrap 以定义的方式显示此列表。

![导航列表](../Images/de38dc94dc5190163af93296420cf41b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:56:18.823

可能有其他方法可以通过指令来实现这一点，但是

[http://beta.plnkr.co/KjXZInfrDK9eRid2Rpqf](http://beta.plnkr.co/KjXZInfrDK9eRid2Rpqf)

您定义一个要调用的函数以显示或隐藏标题：

```
// just a hard coded list of objects, we will output a header when the title changes
$scope.presentations = [{"title":"a", "other":"something else"},{"title":"a", "other":"something else"},{"title":"b", "other":"something else"},{"title":"b", "other":"something else"}, {"title":"b", "other":"something else"}]
$scope.currentTitle = '-1';
$scope.CreateHeader = function(title) {
      showHeader = (title!=$scope.currentTitle); 
       $scope.currentTitle = title;
      return showHeader;
} 
```

您的 html 看起来像这样：

```
<ul>
    <li ng-repeat="presentation in presentations">
      <div ng-show="CreateHeader(presentation.title)">
        {{presentation.title}} is the header
      </div>
      {{presentation.other}} is an attribute on the collection item
   </li>
</ul> 
```

# r - 对大型文本文件执行一系列编辑

> ID：15577794
> 
> 赞同：2
> 
> 时间：2013-03-22T18:49:56.973
> 
> 标签：r, perl, sed, awk

我希望对一个几乎完全由单个字母组成的大型文本文件进行一系列编辑，由空格分隔。该文件大约 300 行 x 大约 400,000 列，大约 250 MB。

我的目标是使用一系列步骤转换此表，以便最终使用另一种语言（可能是 R）进行处理。我没有太多处理大数据文件的经验，但有人建议我使用 PERL 作为解决此问题的最佳方法。请让我知道是否有更好的方法:)。

因此，我希望编写一个执行以下操作的 PERL 脚本：

1.  打开文件，编辑或写入新文件如下：
2.  删除第 2-6 列
3.  合并/连接列对，从第 2 列开始（因此，合并第 2-3,4-5 列等）
4.  根据在每一行上运行的顺序条件算法替换每个字符对：

    ```
    [example PSEUDOCODE: if character 1 of cell = character 2 of cell=a,  cell=1
    else if character 1 of cell = character 2 of cell=b, cell=2
    etc.] such that except for the first column, the table is a numerical matrix 
    ```

5.  删除每 n 列，或保留每 n 列并删除所有其他列

我刚开始学习 PERL，所以我想知道这些操作在 PERL 中是否可行，PERL 是否是最好的方法，以及在读/写上下文中是否对这些操作的语法有任何建议一份文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:34:12.760

我将开始：

```
use strict;
use warnings;
my @transformed;
while (<>) {
  chomp;
  my @cols = split(/\s/);  # split on whitespace
  splice(@cols, 1,6);      # remove columns
  push @transformed, $cols[0];
  for (my $i = 1; $i < @cols; $i += 2) {
    push @transformed, "$cols[$i]$cols[$i+1]";
  }

  # other transforms as required

  print join(' ', @transformed), "\n";
} 
```

那应该让你上路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:10:07.770

您需要发布一些示例输入和预期输出，或者我们只是在猜测您想要什么，但也许这将是一个开始：

```
awk '{
   printf "%s ", $1
   for (i=7;i<=NF;i+=2) {
      printf "%s%s ", $i, $(i+1)
   }
   print ""
}' file 
```

# coldfusion - 在 Coldfusion 表单中放置 cfquery 的位置

> ID：15577799
> 
> 赞同：1
> 
> 时间：2013-03-22T18:50:15.843
> 
> 标签：coldfusion, cfquery

我有一个在子句`cfquery`中使用一些 FORM 字段。`WHERE`我的第一个问题是每次访问我的网页时，cfquery 代码都会出现在页面顶部。我应该将查询放在 .cfm 表单中的什么位置并访问表单中的某些字段？我的第二个问题是我不确定该`WHERE`子句是否识别字段的值。你能帮我吗？

这是我的代码设置方式：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<script language="javascript" type="text/javascript">
function addRow() { 
     var tbl = document.getElementById('tblSample');
     var lastRow = tbl.rows.length; 
     var iteration = lastRow - 3;
     var row = tbl.insertRow(lastRow);
     ........... etcetra.......
}
</script>
</head>
<body lang=EN-US style='tab-interval:.5in'>
<div class=Section1>
<cfparam name="awardTotals" default="0" />
<cfparam name="search_award.GrandTotal" default="0" />
<cfif isDefined("form.Finalize")>
   <cfquery name="search_award" datasource="Test">
    SELECT g.Code1 + g.Code2 + g.Code3 + g.Code4 AS GrandTotal
      FROM Codes g 
     WHERE g.CodeNumber = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.CodeNum#">
       AND g.TestYear = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.TestYear#">
       AND g.SelType = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.SelType#"> 
       AND g.Jurisdiction = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.SelJuris#">    
   </cfquery>
   <cfif not search_award.GrandTotal is FundingTotals>
      <script type="text/javascript">
         alert('The totals do not match.');
   return false;       
</script>
   <cfelse>
<script type="text/javascript">
   alert('The totals match.');
   return true;
</script>      
    </cfif>
</cfif>
<p class=MsoNormal align=center style='text-align:center'><
<cfoutput>
  <form name="thisform" action="FormData.cfm" method="post">
    <p class=MsoNormal align=left style='text-align:left'>
      <input type="hidden" id="totalFields" name="totalFields" value="0">
      <input type="text" id="awardTotals" name="#search_award.GrantTotal#" value="0">
      <table width="1177" border="1" id="tblSample">
          <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
          <th height="10"bgcolor="##cccccc" colspan="10"><h3>Jurisdiction:
             <select name="SelJuris" id="SelJuris">
                <option value = "0">---Jurisdictions---</option>
                <option value = "1">Allegany County</option>
                <option value = "2">Anne Arundel County</option>
                <option value = "3">Baltimore County</option>
                <option value = "4">Calvert County</option>
                <option value = "5">Caroline County</option>
             </select>
             <input name="CodeNum" id="CodeNum" type="text" size="20">  
             <input name="TestYear" id="TestYear" type="text" size="20"> 
             <input name="SelType" id="SelType" type="text" size="20">  
          </th>
          </tr>
</table>
<input type="Submit" name="Submit Form" value="Submit Form" onClick="">
<input type="Button" name="Finalize" value="Finalize" onClick="">
</form>
</body>
</cfoutput>
</html> 
```

**（评论更新）**

现在我收到一条消息`Element CODENUM is undefined in FORM`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:10:13.273

你想要这种逻辑。如果表单已提交，请对其进行处理。在你的情况下，它会是这样的：

```
<cfif structkeyexists(form, "codenum")>
 query, process, display, etc
<cfif>
rest of page 
```

此外，出于各种原因，您希望使用查询参数。所以这：

```
g.CodeNumber = '#form.CodeNum#' 
```

变成这样：

```
g.CodeNumber = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.CodeNum#"> 
```

除非它是一个数字，在这种情况下您更改数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:08:57.937

您需要在 cfquery 周围添加一个条件。还要更新您的提交按钮的名称，不带空格

```
<input type="Submit" name="SubmitForm" value="Submit Form" onClick="">

   <cfif isDefined("form.SubmitForm")>

          <cfquery name="search_award" datasource="TrenaTest">
               SELECT g.Code1 + g.Code2 + g.Code3 + g.Code4 AS GrandTotal
                FROM Codes g 
              WHERE g.CodeNumber = '#form.CodeNum#'
              AND g.TestYear = '#form.TestYear#'
              AND g.SelType =  '#form.SelType#'
              AND g.JurisdictionID = '#form.SelJuris#'  
         </cfquery>

    </cfif> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T03:35:12.467

请注意，在所有示例中，都使用了标准的 html 表单标签，但查询的条件是在 Coldfusion 表单范围内定义的。我相信您需要将`<form>`to`<cfform>`和`<input>`to转换为`<cfinput>`like：

```
 ...........
<cfinput type="Submit" name="SubmitForm" value="Submit Form" onClick="">
</cfform>
<cfif isdefined('form.submit')>
      ............. 
```

# c++ - 从文件中发出读取空间

> ID：15577803
> 
> 赞同：0
> 
> 时间：2013-03-22T18:50:22.017
> 
> 标签：c++, parsing, file-io, stream, getline

我正在尝试从包含空格的文件中读取一行。尽管我已经尝试了一切并进行了所有研究，但似乎没有任何效果，这是我目前的尝试

```
void read_name(fstream& in_file, comp& cmp)
{
   char buff[80];
   in_file.getline(buff, 79, '\n');
   in_file >> buff;

   cout << "NAME: " << buff << endl;

   cmp.set_name(buff);
   in_file.getline(buff, 79);
} 
```

无论出于何种原因，它仍然会读取，直到它看到一个空格然后停止。任何帮助将非常感激。我对直接的 C++ 不是很好，所以我很可能只是遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:57:04.410

```
in_file.getline(buff, 79, '\n'); 
```

那里。您阅读了一行（假设该行不超过 78 个字符）。那你为什么要去做这件事？

```
in_file >> buff; 
```

这将用下一个单词覆盖您刚刚阅读的行。如果您想要下一行，请再次调用 getline。

但最好使用`std::string`free 函数`std::getline`，这样您就不必指定行长。

```
std::string buff;
std::getline(in_file, buff); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:58:40.783

线

```
in_file >> buff; 
```

正在清除您刚刚从文件中读取的 buff 的内容。如果您使用调试器单步调试代码并观察 buff 的内容，那么您会看到这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:53:29.827

Since you are using c++ I recommend you use stl string instead of char arrays.

```
std::string linestr;
while( std::getline(input, linestr) )
{
   // process line
} 
```

where input is your ifstream.

# ruby-on-rails - How can I filter the auto populate when editing a form in Rails?

> ID：15577813
> 
> 赞同：1
> 
> 时间：2013-03-22T18:50:56.330
> 
> 标签：ruby-on-rails

In Rails, when you go to the edit action, it automatically pulls the information from the models and populates the form. If I had a CRUD that saves sensitive information, for example password or ssn, how can I filter the values so that it doesn't just show it in plaintext when editing the form?

I was going to change the value in the controller by setting it to `****`, but the potential risk there is people may submit the form and it will update the SSN to `****`.

I'm not referring to filtering the params so it doesn't show up in console (config.filter_parameters).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:40:13.830

将输入字段更改为 type="password" 应该可以解决您的问题。如果它们是空白的，请不要在控制器中设置字段。

如果您使用的是表单生成器，请将 text_field 更改为 password_field。

# python-2.7 - What is python actually doing when it searches my lists in this function?

> ID：15577815
> 
> 赞同：0
> 
> 时间：2013-03-22T18:51:04.133
> 
> 标签：python-2.7

I wrote the following. My goal was to try and create a robust way for the code to read sentences for a text-adventure game. I made lists (`h_answer1 and 2`) populated with the keywords I wanted the game to recognize, and then I asked for user input in the `mansr` function (`mansr` takes its argument and makes it lower case), and then I split that input into a list called `split_ans`.

This works about half the time. But if I input certain phrases, like "I believe I will search," it throws me through the else statement, even though "search" appears in my sentence.

If I understand correctly, the for-loop is setting `check` equal to each string in the `split_ans` list, and then the if-statement is checking to see if that particular `check` matches anything in the `h_answer` lists. So why would python go to the else statement when the if condition has been met?

```
def some_function():
   print "some stuff"
   ans = mansr(raw_input())
   split_ans = ans.split(' ')

   h_answer1 = ['walk', 'run', 'go']
   h_answer2 = ['search', 'look']

      for check in split_ans:
         if check in h_answer1:
            print "Some stuff"
            break
         elif check in h_answer2:
            print "Some stuff"
            ans = mansr(raw_input(' '))
            split_ans = ans.split(' ')
              <section omitted, it's a nested for-loop>
         else:
             print "I don't understand that input."
             some_function() 
```

The traceback doesn't reveal much (`some_function` was named `long_hallway`, edited above in order to be more generic):

```
 File "test06.py", line 171, in <module> start()
  File "test06.py", line 92, in start long_hallway()
  File "test06.py", line 59, in long_hallway long_hallway()
  File "test06.py", line 59, in long_hallway long_hallway()
  File "test06.py", line 13, in long_hallway
  ans = mansr(raw_input('\n>>> ')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:15:45.553

该回溯是非常无信息的。相关的异常是什么？

一个明显的可能问题来源是您正在重用 ans 和 split_ans 变量。由于您正在对 split_ans 进行迭代，因此您可能会遇到问题，因为您试图在执行中期更改它，[这是一个禁忌。](http://unspecified.wordpress.com/2009/02/12/thou-shalt-not-modify-a-list-during-iteration/)

另一件事是-您确定要休息而不是继续吗？你想在第一次命中后逃避解析循环吗？

# windows - Windows 64 位和 32 位不兼容

> ID：15577823
> 
> 赞同：0
> 
> 时间：2013-03-22T18:51:50.617
> 
> 标签：windows, 64-bit, 32bit-64bit, 32-bit

我知道 64 位应用程序需要 64 位 Windows。

哪个 c/c++ 代码仅适用于 64 位或 32 位？编辑：[我在这里找到了](http://www.viva64.com/en/a/0004/)

我可以在运行时确定进程字长吗：就像我将有 32 位应用程序一样，如果操作系统是 32 位或 64 位，它会返回，然后以正确的字长运行子/新进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:21:04.913

您可以通过[`GetNativeSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340%28v=vs.85%29.aspx). 例如，您可以执行以下操作：

```
typedef void (WINAPI *GetNativeSystemInfo_t)(LPSYSTEM_INFO lpSystemInfo);

BOOL IsSystem64Bit()
{
    HANDLE kernel32 = LoadLibrary("kernel32.dll");
    SYSTEM_INFO si;

    GetNativeSystemInfo_t GetNativeSystemInfoPtr
        = (GetNativeSystemInfo_t)GetProcAddress(kernel32, "GetNativeSystemInfo");

    if (GetNativeSystemInfoPtr == NULL)
        return FALSE;

    GetNativeSystemInfoPtr(&si);
    return (si.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_AMD64);
} 
```

该函数被动态解析的原因是它在 XP 之前的 Windows 版本中不存在。（而且在那些版本的 windows 上，我们已经知道系统不是 64 位的）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T19:06:31.237

我不确定 Windows，因此显然这将在帮助方面受到限制，但在 Linux 上，您可以在运行时确定字长。long int 将是字长。在 64 位 Linux 上，long 是 64 位，在 32 位 Linux 上是 32 位。

所以，这看起来真的很愚蠢和不一致，但你可以做类似的事情

```
 char ws[3];
 sprintf(ws, "%d", sizeof(long));
 fprintf(stderr, "%s\n", ws); 
```

然后，您可以`ws`与不同的值进行比较以查看字长。我确信 Windows 具有类似的基本类型，可以帮助您判断字长。

# cookies - How long does a session cookie last? When should I reauthenticate?

> ID：15577828
> 
> 赞同：9
> 
> 时间：2013-03-22T18:51:58.497
> 
> 标签：cookies, session-cookies

How long can I use a **session** cookie? I have a client application where I authenticated to a SharePoint site and I am using the cookies for navigating through the subsites. I am **saving the cookie and reusing the headers** to login to the site at a later point without authenticating again. There is no expiration date set. How long will the cookie last and when should I authenticate back again?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T19:31:10.390

会话 cookie 的到期时间因浏览器而异。我找不到任何提供每个浏览器当前细节的参考。过去，当浏览器关闭时会话 cookie 会被销毁，但现在一些浏览器的设置如果启用，将导致会话 cookie 在浏览器关闭后仍然存在。例如，Firefox 的“当 Firefox 启动时：显示我上次的窗口和选项卡”会导致这种情况发生，有点令人惊讶。Chrome 中的“启动时：从上次中断的地方继续”也是如此。

我并不真正关心 SharePoint，所以我有一段时间没有使用它，但我记得它使用 ASP.Net 表单身份验证，就像任何其他 ASP.Net 站点一样从 web.config 中提取配置。话虽如此，您并不真正关心 cookie 的超时。您关心的是您的服务器端会话令牌的超时时间 - 也就是说，该cookie中包含的数据将被服务器识别多长时间。这是由 ASP.Net 应用程序的 web.config 文件的 forms 标记中的 timeout 属性设置的：

```
<system.web>
    <!-- ... -->
    <authentication mode="Forms">
        <forms timeout="2880" />
    </authentication>
    <!-- ... -->
</system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:56:16.503

如果没有过期，它将一直存在，直到浏览器被杀死。通常在 ASP.Net 中，会话 cookie 设置为 20 分钟超时。这通常很好。根据您的应用程序，您可能还需要一个 javascript 计时器。否则浏览器将无法理解何时退出，直到页面刷新发生并且敏感数据可能被暴露。您将在任何在线银行网站上看到此实现。

（编辑以从downvote中澄清）实际上，会话cookie确实会一直存在，直到浏览器关闭。你可以在这里查看：[http ://www.allaboutcookies.org/cookies/cookies-the-same.html](http://www.allaboutcookies.org/cookies/cookies-the-same.html)

上面的答案也是正确的，因为一些较新的浏览器会在崩溃/关闭后恢复会话 cookie。

@Grinn，您确实提出了一个很好的观点。使用 ASP.Net Forms 身份验证时，将加密的票证放置在会话 cookie 中。就浏览器而言，他们的 cookie 仍然可以保留，但如果票证中的日期戳过期，则会被视为无效。

如果您在 Sharepoint 中使用某种形式的表单身份验证，您可能应该只编写自己的会员提供程序，它可以破解 cookie 中的票证，但忽略日期戳是否已过期。[建立自定义会员提供程序](http://msdn.microsoft.com/en-us/library/aa479048.aspx)

# node.js - Express 没有设置 max-age 标头

> ID：15577829
> 
> 赞同：2
> 
> 时间：2013-03-22T18:52:03.287
> 
> 标签：node.js, caching, express

我花了一个多小时试图在生产中快速缓存静态文件。有什么我做错了吗？所有标头在第一个请求中返回 200，在后续请求中返回 304。我什至尝试将代码粘贴到主 app.configure 中，并直接从 express 文档中粘贴代码。

```
Request URL:http://localhost:3000/javascripts/jquery.min.js
Request Method:GET
Status Code:304 Not Modified
Request Headersview source
Accept:*/*
Accept-Encoding:gzip,deflate,sdch
Cache-Control:max-age=0 
```

```
// Generated by CoffeeScript 1.3.3
(function() {
  var app, express, fs, http, path;

  express = require('express');
  http = require('http');
  path = require('path');
  fs = require('fs');

  app = express();

  app.configure(function() {
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.compress());
    return app.use(require('less-middleware')({
      src: __dirname + '/public'
    }));
  });

  app.configure('development', function() {
    app.use(express["static"](__dirname + '/public'));
    app.use(app.router);
    app.use(express.errorHandler());
    return console.log("Hello from dev");
  });

  app.configure('production', function() {
    app.use(express["static"](__dirname + '/public', {maxAge: 1800}));
    app.use(app.router);
    return console.log("Hello from prod");
  });

  app.get('/', function(req, res) {
  ....... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:07:37.637

`maxAge`是以毫秒为单位的值，在您的情况下似乎很低（1800，即 1.8 秒）。资源可能在您有机会重新加载它们之前就从缓存中过期，因此它们似乎永远不会被缓存。

# ruby-on-rails - 未定义的方法 each_with_index activerecord-import

> ID：15577830
> 
> 赞同：0
> 
> 时间：2013-03-22T18:52:06.880
> 
> 标签：ruby-on-rails

我在 Rails 中有一个用于股票价格历史的模型，我想将来自 yahoo Finance api 的数据大量导入到我的模型中。

这就是我所拥有的：

```
columns = [:date,:open,:high,:low,:close,:volume,:adjusted_close,:asset_symbol]
values = ['2013-03-22',1,2,3,4,5,6,'YHOO']

AssetHistory.import columns,values 
```

这导致错误说：`undefined method each_with_index for '2013-03-22':String from .../activerecord-import/import.rb`

请注意，我的值数组中的日期实际上是我模型中的日期类型。（是这个问题吗？）

我正在使用 Activerecord-import 0.3.1 和 Rails 3.2。如果这很重要，我也在使用 Postgresql。

我的带有注释的资产历史模型：

```
# Table name: asset_histories
#
#  id             :integer          not null, primary key
#  date           :date
#  open           :float
#  high           :float
#  low            :float
#  close          :float
#  volume         :integer
#  adjusted_close :float
#  asset_symbol   :string(255)
#  asset_id       :integer
#

class AssetHistory < ActiveRecord::Base
  attr_accessible :adjusted_close, :close, :date, :high, :low, :open, :volume, :asset_id, :asset_symbol
  has_and_belongs_to_many :assets
  validates_uniqueness_of :asset_symbol, scope: [:date]
end 
```

这个问题是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:52:08.393

在将对象导入模型时，我们应该调用如下方法。

```
Model.import <array_of_cols>, <array_of_values> 
```

例如：

```
Sample.import [:field1, :field2], [["value-a1", "value-a2"], ["value-b1", "value-b2"]] 
```

上面的示例将创建**Sample**模型的两条记录。

所以在你的情况下，请提供这样的。

```
AssetHistory.import columns, [values] 
```

希望这会奏效。

# forms - Excel VBA Form is not refreshing properly when a subform is closed

> ID：15577831
> 
> 赞同：0
> 
> 时间：2013-03-22T18:52:26.430
> 
> 标签：forms, excel, vba, .refresh

Good Afternoon. I've running into a situation I hope someone here can help with. I'm running Office 2010 on Windows XP and have an Excel worksheet that contains a button to show a modal form (Form01). Form01 contains 3 Listboxes of data. Double-Clicking a item in listbox2 will open another modal form (Form02) so the item can be modified. Unloading Form02 will save the data and call a couple of macros to adjust a named range on the host worksheet. This code is stored in a Module, not on the form.

This is where the problem occurs. When Form02 is unloaded and Form01 is accessable, I cannot select anything in listbox1 or listbox3 or buttons on Form01\. I have to first select something in listbox2, then I have access to the other controls on the form. I've tried to .SetFocus on the other controls and add DoEvents after the Form02.Show 1 statement with no luck. The only workaround I've found is to hide and reshow Form01 which causes the screen to flicker. Application.ScreenUpdating = False and back to True doesn't seem to help either. I really need to figure out what the other controls are not accessible when Form02 is shown and then closed. Has anyone else experienced this behaviour or might have a suggestion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:16:46.123

改变这个

```
Private Sub lstSiteMaster_DblClick(ByVal Cancel As MSForms.ReturnBoolean)
    If lstSiteMaster.ListCount = 0 Then Exit Sub
    LoadFrmEditDataset Me.Controls("lstSiteMaster"), "SITE MASTER"
    frmEditDataset.Show 1
    Unload frmEditDataset
    DoEvents
    Me.lstSiteMaster.ListIndex = -1
    Me.lstSiteList.ListIndex = -1
    Me.lstMiniPOR.ListIndex = -1
    '''BounceTheForm
End Sub 
```

至

```
Private Sub lstSiteMaster_DblClick(ByVal Cancel As MSForms.ReturnBoolean)
    If lstSiteMaster.ListCount = 0 Then Exit Sub
    LoadFrmEditDataset Me.Controls("lstSiteMaster"), "SITE MASTER"
    frmEditDataset.Show 1
    DoEvents
    Me.lstSiteMaster.ListIndex = -1
    Me.lstSiteList.ListIndex = -1
    Me.lstMiniPOR.ListIndex = -1
    '''BounceTheForm
End Sub 
```

和

这个

```
Private Sub cmdApply_Click()
    With Me
        UpdateDataset .lblDataset, .lblECR, .lblFA, .lblFieldId, .txtFieldValue, .cboAction, .lblIndex + 2
    End With

    Me.Hide
End Sub 
```

至

```
Private Sub cmdApply_Click()
    With Me
        UpdateDataset .lblDataset, .lblECR, .lblFA, .lblFieldId, .txtFieldValue, .cboAction, .lblIndex + 2
    End With

    Unload Me
End Sub 
```

# ruby-on-rails - 使用 form_tag 访问应用程序控制器中的方法

> ID：15577834
> 
> 赞同：0
> 
> 时间：2013-03-22T18:52:48.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

全部，

我正在尝试使用 bootstrap-navbar 进行简单的密码验证（此处不需要用户名）。

来自 application.html.erb：

```
 <%= form_tag "/",:controller => 'application',:action => 'tryy' do %>
        <%= label_tag "Enter password.." %>
        <%= password_field_tag "login_password" %>
        <div><%= submit_tag "Go!", :class=>'btn btn-success' %></div>
    <% end %> 
```

和 application_controller.rb：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper_method :subd?, :tryy

  def subd?
    !((request.subdomain == '') || (request.subdomain=='www'))
  end

  def tryy
    999
    puts 999
  end
end 
```

tryy 中的“放置”只是为了查看使用 rails 服务器日志记录窗口发生的任何事情。

问题 - 提交表单时没有任何反应，即没有“999”打印。请注意，这里也没有错误消息。我怀疑方法“subd？” 与此问题无关，但如果是，请完整复制 application_controller.rb。

关于我可能遗漏的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:07:01.627

将表单发送到应用程序控制器是一种不好的做法。如果你想尝试，然后创建一个控制器然后测试。你会在这方面取得成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:28:52.023

删除 tryy 周围的引号

```
:action => tryy 
```

# c# - 渴望静态构造函数

> ID：15577836
> 
> 赞同：11
> 
> 时间：2013-03-22T18:52:49.257
> 
> 标签：c#, initialization

我已经阅读了一些 Stack Overflow 问题和答案，以及一些博客文章（包括 Jon Skeet 的惰性单例初始化），它们似乎都专注于使初始化尽可能惰性。似乎静态初始化基本上有两种选择：

*   最初引用类的实例或静态成员
*   在程序开始和第一次引用之间的未指定时间。

*有没有办法让静态构造函数（或某种形式的初始化代码）在程序开始时*为特定类（或多个类）运行？

**上下文：**我们的库将解析传入的 XML 并返回对象。返回的对象类型取决于被解析的 XML 元素。我们提供了两个简单的类：一个是非常基本的类，它允许访问属性和内部 XML（作为字符串），没有任何特性；第二个是针对特定类型的对象，并提供约束检查和更多特定于上下文的名称以访问/编辑值。

解析器通过查看其解析器列表来确定如何解析特定的 XML 元素。如果它有一个解析器用于它正在解析的元素（由名称确定），它会使用它。如果它没有，或者如果它失败，它会退回到基本解析器。

使用我们库的开发人员很可能为特定的 XML 元素编写自己的类。与其让他们在每个应用程序开始时手动将每个类的 parse 方法添加到列表中，不如每个类都可以有一个静态构造函数将自己的解析器添加到列表中，这样只需将类包含在该项目将注册它。但是，静态构造函数在类被实际引用之前不会触发，并且我们不能保证在解析开始之前会引用每个这样的类。

有什么方法可以保证在应用程序启动时为这些类中的每一个触发一些初始化程序？这样做的好处是简单地将类包含在项目中，而不必在运行时手动将每个解析方法添加到我们的解析器列表中，这是一个相当小的便利，因此为了值得工作的好处，解决方案需要实现起来非常简单明了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T18:56:51.693

> 有没有办法让静态构造函数（或某种形式的初始化代码）在程序开始时为特定类（或多个类）运行？

听起来您想要某种“模块或程序集初始化程序”。我*认为*IL 中不存在这样的事情（尽管我可能是错的），而且它绝对不存在于 C# 中。

您总是可以创建某种属性，然后使用反射来查找使用该属性修饰的所有类型，并显式初始化它们。（请注意，泛型类型变得更加棘手......您可能希望将其限制为非泛型类型。）

编辑：我发现了更多选择：

*   使用Mono Cecil创建在任何命名空间中查找的初始化程序[的构建后工具](http://einaregilsson.com/module-initializers-in-csharp/)`ModuleInitializer.Run`
*   Fody的模块[初始化](https://github.com/Fody/Fody)[插件](https://github.com/Fody/ModuleInit)

编辑：有了更多的背景，我*怀疑*任何治疗方法都会比疾病更糟糕，事实上。任何想要编写基于反射的“查找所有具有此属性的解析器”（或类似的）的开发人员都没有太多工作要做，但我认为您不想干扰他们自己的应用程序启动。

*为了在不强加*任何东西的情况下使他人的生活更轻松，您始终可以自己包含该反射部分：

```
public static void RegisterAllParsers(Assembly assembly) 
```

...这可能是基于属性的。当然，它只能明智地选择*静态*解析方法——如果任何开发人员有一个工厂，它可以根据工厂的初始化以不同的方式解析，你就不能轻易地自动注册它。

然后开发人员需要调用：

```
LibraryClass.RegisterAllParsers(typeof(SomeTypeInProgram).Assembly); 
```

在启动时。这可能并不难记住——而且大多数应用程序只有一个入口点，或者至少有一些常见的启动代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:21:06.663

Afaik 没有办法明确地做到这一点，但您可以创建类似以下的内容（我现在警告您，它丑陋且不快）：

```
[System.AttributeUsage(System.AttributeTargets.Class |
                   System.AttributeTargets.Struct)]
public class AppInitialized : System.Attribute
{
    private MethodInfo _mInfo;

    public AppInitialized(Type t, String method)
    {
        _mInfo = t.GetMethod(method, BindingFlags.Static | BindingFlags.Public);
    }

    public void Initialize()
    {
        if (_mInfo != null)
            _mInfo.Invoke(null, null);
    }
}

[AppInitialized(typeof(InitializeMe), "Initialize")]
public class InitializeMe
{
    public static void Initialize()
    {
        Console.WriteLine("InitializeMe initialized");
    }
} 
```

然后当你的应用程序加载时，使用这样的东西来初始化所有的自定义属性：

```
foreach (Type type in Assembly.GetExecutingAssembly().GetTypes())
{
    var a = Attribute.GetCustomAttribute(type, typeof(AppInitialized), true) 
        as AppInitialized;
    if (a != null)
        a.Initialize();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T19:50:10.903

有点像@FlyingStreudel，我也拼凑了一些“有点”做你所追求的东西：

属性：

```
[AttributeUsage(AttributeTargets.All)]
public class ModuleInitializerAttribute : Attribute
{
    private readonly string _assemblyName;
    private readonly Func<Module, bool> _modulePredicate;

    private readonly string _typeName;
    private readonly string _methodName;

    /// <summary>
    /// Only used in my test rig so I can make sure this assembly is loaded
    /// </summary>
    public static void CallMe() {}

    public ModuleInitializerAttribute(string assemblyName, string moduleName, string typeWithMethod, string methodToInvoke)
    {
        _assemblyName = assemblyName;
        _modulePredicate = mod => moduleName == null || mod.Name.Equals(moduleName, StringComparison.OrdinalIgnoreCase);
        _typeName = typeWithMethod;
        _methodName = methodToInvoke;

        AppDomain.CurrentDomain.AssemblyLoad += OnAssemblyLoad;
        AppDomain.CurrentDomain.DomainUnload += AppDomainUnloading;

        CheckLoadedAssemblies();
    }

    private void CheckLoadedAssemblies()
    {
        AppDomain.CurrentDomain.GetAssemblies().ToList().ForEach(this.CheckAssembly);
    }

    private void AppDomainUnloading(object sender, EventArgs e)
    {
        // Unwire ourselves
        AppDomain.CurrentDomain.AssemblyLoad -= this.OnAssemblyLoad;
        AppDomain.CurrentDomain.DomainUnload -= AppDomainUnloading;
    }

    private void OnAssemblyLoad(object sender, AssemblyLoadEventArgs args)
    {
        CheckAssembly(args.LoadedAssembly);
    }

    private void CheckAssembly(Assembly asm)
    {
        if (asm.FullName == _assemblyName)
        {
            var module = asm.GetModules().FirstOrDefault(_modulePredicate);
            if (module != null)
            {
                var type = module.GetType(string.Concat(asm.GetName().Name, ".", _typeName));
                if (type != null)
                {
                    var method = type.GetMethod(_methodName);
                    if (method != null)
                    {
                        method.Invoke(null, null);
                    }
                }
            }
        }
    }

} 
```

试验台：

```
class Program
{
    [ModuleInitializer("ClassLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "ClassLibrary1.dll", "ModuleInitializerTest", "ModuleInitialize")]
    static void Main(string[] args)
    {
        Console.WriteLine("Loaded assemblies:");
        var asms = AppDomain.CurrentDomain.GetAssemblies();
        foreach (var assembly in asms)
        {
            Console.WriteLine("\tAssembly Name:{0}", assembly.GetName());
            var mods = assembly.GetModules();
            foreach (var module in mods)
            {
                Console.WriteLine("\t\tModule Name:{0}", module.Name);
            }
        }
        // This should trigger the load of the ClassLibrary1 assembly
        aReference();
        Console.ReadLine();
    }

    static void aReference()
    {
        var foo = new SomeOtherClass();         
    }

} 
```

和另一个类库：

```
namespace ClassLibrary1
{
    public class SomeOtherClass
    {

    }

    public static class ModuleInitializerTest
    {
        public static void ModuleInitialize()
        {
            // Do interesting stuff here?
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T21:39:32.997

我强烈建议考虑为此（命名空间）使用[托管可扩展性框架 (MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)`System.ComponentModel.Composition` )。然后，您的客户可以简单地添加一个`[Export(typeof(ISomeParserInterface))]`属性，MEF 将能够为您的解析器提供所有可用的扩展。

您甚至可以使用[`ExportMetadataAttribute`](http://msdn.microsoft.com/en-us/library/dd287352.aspx)允许您的代码仅实例化它实际需要的解析器来处理它遇到的元素。

```
[Export(typeof(ISomeParserInterface))]
[ExportMetadata("ElementName", "SomeXmlElement")] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T22:13:27.443

您可以根据 XML 解析的当前上下文确定对特定 XML 元素使用哪个解析器。从 XML 解析的每个 CLR 对象都将包含在其他某个 CLR 对象中，作为其成员（字段或属性），根对象除外。所以XML解析器可以通过成员类型（字段类型或属性类型）来确定。对于必须将 XML 解析到的根 CLR 对象，必须显式指定类型。

这是更长的 C# 示例代码：

**XmlParserLibrary 项目：**

```
using System;
using System.Collections.Generic;
using System.Xml;

namespace XmlParserLibrary
{
    public sealed class XmlParser
    {
        private readonly IDictionary<Type, IXmlParser> parsers = new Dictionary<Type, IXmlParser>()
        {
            { typeof(string), new StringXmlParser() }
        };

        public T Parse<T>(XmlReader reader)
        {
            return (T)this.Parse(reader, typeof(T));
        }

        public object Parse(XmlReader reader, Type type)
        {
            // Position on element.
            while (reader.Read() && reader.NodeType != XmlNodeType.Element) ;

            return GetParser(type).Parse(reader);
        }

        private IXmlParser GetParser(Type type)
        {
            IXmlParser xmlParser;
            if (!this.parsers.TryGetValue(type, out xmlParser))
                this.parsers.Add(type, xmlParser = this.CreateParser(type));

            return xmlParser;
        }

        private IXmlParser CreateParser(Type type)
        {
            var xmlParserAttribute = Attribute.GetCustomAttribute(type, typeof(XmlParserAttribute)) as XmlParserAttribute;
            return xmlParserAttribute != null ? Activator.CreateInstance(xmlParserAttribute.XmlParserType) as IXmlParser : new FallbackXmlParser(this, type);
        }
    }

    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct)]
    public sealed class XmlParserAttribute : Attribute
    {
        public Type XmlParserType { get; private set; }

        public XmlParserAttribute(Type xmlParserType)
        {
            this.XmlParserType = xmlParserType;
        }
    }

    public interface IXmlParser
    {
        object Parse(XmlReader reader);
    }

    internal sealed class StringXmlParser : IXmlParser
    {
        public object Parse(XmlReader reader)
        {
            return reader.ReadElementContentAsString();
        }
    }

    internal sealed class FallbackXmlParser : IXmlParser
    {
        private readonly XmlParser xmlParser;
        private readonly Type type;

        public FallbackXmlParser(XmlParser xmlParser, Type type)
        {
            this.xmlParser = xmlParser;
            this.type = type;
        }

        public object Parse(XmlReader reader)
        {
            var item = Activator.CreateInstance(this.type);

            while (reader.Read())
                switch (reader.NodeType)
                {
                    case XmlNodeType.Element:
                        var propertyInfo = this.type.GetProperty(reader.LocalName);
                        var propertyValue = this.xmlParser.Parse(reader.ReadSubtree(), propertyInfo.PropertyType);
                        propertyInfo.SetValue(item, propertyValue, null);
                        break;
                }

            return item;
        }
    }
} 
```

**XmlParserLibraryTest 项目：**

```
using System.Xml;
using XmlParserLibrary;

namespace XmlParserLibraryTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var xmlParser = new XmlParser();

            Letter letter;
            using (var reader = XmlReader.Create("Letter.xml"))
                letter = xmlParser.Parse<Letter>(reader);
        }
    }

    public class Letter
    {
        public LetterAssociate Sender { get; set; }
        public LetterAssociate Receiver { get; set; }
        public LetterContent Content { get; set; }
    }

    public class LetterAssociate
    {
        public string Name { get; set; }
        public string Address { get; set; }
    }

    [XmlParser(typeof(LetterContentXmlParser))]
    public class LetterContent
    {
        public string Header { get; set; }
        public string Body { get; set; }
    }

    internal class LetterContentXmlParser : IXmlParser
    {
        public object Parse(XmlReader reader)
        {
            var content = new LetterContent();

            while (reader.Read())
                switch (reader.NodeType)
                {
                    case XmlNodeType.Element:
                        switch (reader.LocalName)
                        {
                            case "Header":
                                content.Header = reader.ReadElementContentAsString();
                                break;
                            case "Body":
                                content.Body = reader.ReadElementContentAsString();
                                break;
                        }
                        break;
                }

            return content;
        }
    }
} 
```

**Letter.xml 文件：**

```
<?xml version="1.0" encoding="utf-8" ?>
<Letter>
  <Sender>
    <Name>Sender name</Name>
    <Address>Sender address</Address>
  </Sender>
  <Receiver>
    <Name>Receiver name</Name>
    <Address>Receiver address</Address>
  </Receiver>
  <Content>
    <Header>This is letter header.</Header>
    <Body>This is letter body.</Body>
  </Content>
</Letter> 
```

这与[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)的工作方式类似，只是它在解析时不直接使用反射，而是在解析之前在单独的临时程​​序集中生成所有解析器（在 .NET 4.5 之前）。XmlSerializer 还负责许多其他事情，例如：

*   类层次结构（当属性类型是基类型但序列化为 XML 的实际类型是某种派生类型时
*   集合类型
*   尊重来自[System.Xml.Serialization命名空间的](http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx)[XML 序列化相关属性](http://msdn.microsoft.com/en-us/library/83y7df3e.aspx)，这些属性控制 XML 序列化/反序列化。

# c# - I want to have a consistent column width

> ID：15577840
> 
> 赞同：0
> 
> 时间：2013-03-22T18:53:00.230
> 
> 标签：c#, asp.net, gridview

So I have a table and within each cell, is a gridview. Basically it's tables within a table. Right now, the columns in each gridview have arbitrary widths, depending on the length of each text in each cell. I want to make them all the same so it's nicer to look at.

In a loop, I make each gridview, bind to a cell, bind to a row, and appending to the outer table. I tried to add this statement after I bound the gridview to a dataview to make the first columns consistent in width:

```
gvTemp.Columns[0].ItemStyle.Width = Unit.Pixel(400); 
```

But I get an error saying that 0 was too big of an index, even though the gridview is not empty.

Am I using the wrong methods? Am I placing the code in an incorrect location?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T22:26:17.823

看起来 Columns 属性用于显式声明的列，您的列可能是数据源中隐含的。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns(v=vs.110).aspx)

检查行属性。您可能必须设置第一行中单元格的宽度：

```
Rows[0].Cells[0].Width = Unit.Pixel(400) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T22:16:22.777

解决这个问题的一种方法是 CSS 中的使用百分比与 javascript 中的一些简单数学相结合。使用 javascript 获取表中的列数，除以 100 并将结果作为宽度值应用到每列。这样，无论您有多少列或多少列，它总是会均匀地分割它们。

当您有很多列并且它们变得太窄而无法合理使用时，这会成为一个问题，在这种情况下，您最好为每列设置一个以像素为单位的宽度。

# webdriver - 将测试连接到 Sauce Connect 的代码示例在哪里？

> ID：15577843
> 
> 赞同：7
> 
> 时间：2013-03-22T18:53:25.110
> 
> 标签：webdriver, saucelabs

我已阅读： [Sauce Labs：连接页面](https://saucelabs.com/docs/connect)

并浏览了互联网，但我找不到任何关于如何将我的 Selenium 测试转换为使用 Sauce Connect 的文档。

有人能指出我正确的方向吗？

干杯

戴夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T03:20:31.733

默认情况下，Sauce Connect 将通过 提供`http://localhost:4445`，因此您只需将测试从以下位置更改：

```
WebDriver driver = new RemoteWebDriver(new URL("http://" + username + ":" + accessKey + "@ondemand.saucelabs.com:80/wd/hub"), capabilities); 
```

到：

```
WebDriver driver = new RemoteWebDriver(new URL("http://" + username + ":" + accessKey + "@localhost:4445/wd/hub"), capabilities); 
```

使用 Sauce Connect 运行测试时，您不需要更改实际的测试逻辑。

我创建了一个[演示项目](https://github.com/rossrowe/sauce-ci-java-demo)，主要演示如何构建测试以使用适用于 Jenkins 和 Bamboo 的 Sauce 插件，但还包括一个[示例 SauceConnectTest](https://github.com/rossrowe/sauce-ci-java-demo/blob/master/src/test/java/SauceConnectTest.java) ，该示例断言可以使用 Sauce Connect 在 Sauce Labs 的本地网站上运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T08:53:59.170

要初始化 webDriver，请使用以下命令：

```
WebDriver webDriver = null;
DesiredCapabilities capabilities = new DesiredCapabilities();
        capabilities.setBrowserName("firefox");
webDriver = new RemoteWebDriver(new URL("http://" + username + ":" + accessKey + "@ondemand.saucelabs.com:80/wd/hub"), capabilities); 
```

现在测试该站点，无论您需要什么，假设您需要 google：

```
webDriver.get("http://www.google.com"); 
```

# regex - 正则表达式搜索和替换中的排除模式

> ID：15577844
> 
> 赞同：1
> 
> 时间：2013-03-22T18:53:27.013
> 
> 标签：regex, perl

我有这个字符串

```
asp.net somedomain.com 
```

我只需要去掉域点扩展部分，除非在某些情况下。所以我想要这个：

```
asp.net somedomain 
```

任何时候都有 vb.net、asp.net 等。我不想去掉扩展名。

我在 perl 中尝试了这个，但没有任何效果。

```
$company =~ s/(?=\w+)(?!=asp|vb|c#)\.[a-zA-Z]{2,6}\b/\1/g; 
```

我的逻辑是点必须是一个或多个 alpha 而不是`asp`or `vb`or之前的东西`c#`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:03:35.217

您可以使用 Negative LookBehind。你几乎在那里，但使用 LookAheads。

正则表达式：`(?<!asp|vb|c\#)\.[a-zA-Z]{2,6}\b` 替换为空

在这里解释演示：[http ://regex101.com/r/tG5rO1](http://regex101.com/r/tG5rO1)

要解决可变长度 RegEx 错误，请使用以下命令：`(?<!asp)(?<!vb|c\#)\.[a-z]{2,6}\b`
*编辑：为不同长度的排除单词单独的 LookBehind 组*

这只会找到与您的条件不匹配的 TLD。

**更新：**

*处理特殊情况：不匹配以排除单词结尾的单词并匹配排除单词的任何组合（例如。`vB` `VB` `vb` `Vb`）*

RegExp：`\b(?<!\b[aA][sS][pP])(?<!\b[vV][bB]|\b[cC]\#)\.[a-zA-Z]{2,6}\b` 解释演示：[http ://regex101.com/r/bR3kJ8](http://regex101.com/r/bR3kJ8)

或：`\b(?<!\basp)(?<!\bvb|\bc\#)\.[a-z]{2,6}\b`
与`case insensitive`RegEx 修饰符**i一起使用时**

**更新#2**

更安全，因为它只关心`.net`TLD 并为其排除了单词：

```
/(^|\s)(?!(?:visual)?(?:basic|studio|asp|v[bs]|c\#)\.net)(\w+)(?:\.com?\.[a-z]{2}|\.[a-z]{2,6})\b/\1\2/gi 
```

与以前的变体相比，需要更换。

解释演示：[http ://regex101.com/r/kL5mQ5](http://regex101.com/r/kL5mQ5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:02:14.323

只需匹配最后一个：

```
my $s = q{asp.net somedomain.com};
my ($company) = ($s =~ / ([A-Za-z]{2,}) [.] (?:[A-Za-z]{2,}) \z /x);
print $company, "\n"; 
```

或者，`split`在空间和点上：

```
my $s = q{asp.net somedomain.com};
my ($company) = split /[.]/, (split ' ', $s)[-1];
print $company, "\n"; 
```

您想在模式中投入多少工作取决于您的输入有多少变化。以上示例基于您提供的示例输入。

# git - 如何获取未合并到 master 中的分支列表，按最近提交排序？

> ID：15577847
> 
> 赞同：11
> 
> 时间：2013-03-22T18:53:30.547
> 
> 标签：git

对于我们的 buildbot，我想显示最近更新的活动（未发布）分支。假设我有一个`master`分支，以及以下，从最旧到最新的提交：

*   `branch1`（未并入`master`）
*   `branch2`（合并）
*   `branch3`（未合并）

我能够分别获得这些列表中的每一个......例如，让所有分支未合并到`master`：

```
$ git branch -r --no-merged origin/master
origin/branch1
origin/branch3 
```

或者获取按最近提交排序的前 15 个分支（通过[https://coderwall.com/p/ndinba](https://coderwall.com/p/ndinba)）：

```
$ git for-each-ref --sort=-committerdate --format='%(committerdate:short) %(refname:short)' --count=15 refs/remotes/origin/
2013-03-22 origin/branch3
2013-03-22 origin/branch2
2013-03-22 origin/master
2013-03-22 origin/branch1 
```

所以我基本上想要第二个列表，减号`branch2`（有或没有`master`）。希望这有意义吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T19:30:29.450

您可以将两者结合起来，如下所示：

```
git for-each-ref --sort=-committerdate --format="%(committerdate:short) %(refname:short)" --count=15 $(git branch -r --no-merged origin/master | sed -e 's#^ *#refs/remotes/#') 
```

这将限制`for-each-ref`只处理`branch --no-merged`报告的分支......

`git branch`编辑：实际测试后固定输出格式...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:29:48.003

你不能只是 grep 出 branch2 吗？

基本上，类似：

```
for branch in `git branch -r --no-merged origin/master`; do git for-each-ref --sort=-committerdate --format='%(committerdate:short) %(refname:short)' --count=15 refs/remotes/origin/ | grep $branch; done; 
```

鉴于您的示例输出，这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T09:25:19.353

使用 git 2.7 (Q4 2015), [`git for-each-ref`](http://git-scm.com/docs/git-for-each-ref), 将支持该`--no-merged`选项

```
git for-each-ref --no-merged master refs/heads/ 
```

使用文档：

```
--no-merged [<object>]: 
```

> 仅列出无法从指定提交（如果未指定，则为 HEAD）提示的 refs。

* * *

请参阅[提交 4a71109](https://github.com/git/git/commit/4a71109aa442ba1a7045d36f6b148113c95ffc48)、[提交 ee2bd06](https://github.com/git/git/commit/ee2bd06b0f735a00ce0216ca1d3391b13722d987)、[提交 f266c91](https://github.com/git/git/commit/f266c9163b34ec55e453d27e1ed246d67ee3ced0)、[提交 9d306b5](https://github.com/git/git/commit/9d306b5a6077f026291df3c4a5968eaf95a92417)、[提交 7c32834](https://github.com/git/git/commit/7c32834813bd6aee5ce5b2c4131d9f34249bc9e3)、[提交 35257aa](https://github.com/git/git/commit/35257aa01203bae74f9fb856fb02c10c4b3836e6)、[提交 5afcb90](https://github.com/git/git/commit/5afcb90560586765bf21fb09959a8b4497804639)、...、[提交 b2172fd](https://github.com/git/git/commit/b2172fdf702426cb4eba093b5504d0a0e9e59746)（2015 年 7 月 7 日）和[提交 af83baf](https://github.com/git/git/commit/af83bafa4867ba16368e58f36e8311e9591e68f4)（2015 年 7 月 9 日），作者为[Karthik Nayak（`KarthikNayak`）](https://github.com/KarthikNayak)。
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 9958dd8](https://github.com/git/git/commit/9958dd8685a0a8b3d6ecdd07e35d8ecb22b304a7)中，2015 年 10 月 5 日）)

> `git tag -l`" " 和 " " 中的一些功能`git branch -l`已提供给 " `git for-each-ref`" ，以便最终可以在一两个后续系列中在所有三个之间共享统一的实现。

```
* kn/for-each-tag-branch:
  for-each-ref: add '--contains' option
  ref-filter: implement '--contains' option
  parse-options.h: add macros for '--contains' option
  parse-option: rename parse_opt_with_commit()
  for-each-ref: add '--merged' and '--no-merged' options
  ref-filter: implement '--merged' and '--no-merged' options
  ref-filter: add parse_opt_merge_filter()
  for-each-ref: add '--points-at' option
  ref-filter: implement '--points-at' option 
```

* * *

使用 Git 2.29（2020 年第四季度），“ [`git for-each-ref`](https://github.com/git/git/blob/26a3728bedbdf75c670e21d24f6a30e4673f8d19/Documentation/git-for-each-ref.txt)” ^(（[man](https://git-scm.com/docs/git-for-each-ref)）)和列出 refs 的朋友用于仅允许一个`--merged`或`--no-merged`过滤它们；他们学会了结合这两种过滤。

请参阅[Aaron Lipman ( ) 的提交](https://github.com/alipman88)[b59cdff](https://github.com/git/git/commit/b59cdffd7e3d791ee289ebb46d7109ad3d51d7ea)、提交[a1b19aa](https://github.com/git/git/commit/a1b19aa5d43c46fc570f6946ab5ad001dccc8cdf) （ 2020 年 9 月 18 日）和[提交 21bf933](https://github.com/git/git/commit/21bf933928c02372633b88aa6c4d9d71271d42b3)、[提交 415af72](https://github.com/git/git/commit/415af72b174802a45300039ef2bc1127d48dc0c0)、[提交 b775d81](https://github.com/git/git/commit/b775d8122ecec94a99c1a6588a38455cdd41d8e2)（2020 年 9 月 15 日[）](https://github.com/alipman88)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 26a3728](https://github.com/git/git/commit/26a3728bedbdf75c670e21d24f6a30e4673f8d19))^(中，2020 年 9 月 22 日）)[`alipman88`](https://github.com/alipman88)
^([`gitster`](https://github.com/gitster))

> ## [`ref-filter`](https://github.com/git/git/commit/21bf933928c02372633b88aa6c4d9d71271d42b3): 允许`merged`和`no-merged`过滤
> 
> ^(签字人：Aaron Lipman)

> 启用 ref-filter 处理多个`merged`和`no-merged`过滤器，并将功能扩展到^( ^([man](https://git-scm.com/docs/git-branch)) ^)、^( ^([man](https://git-scm.com/docs/git-tag)) ^)和. 这提供了一种简单的方法来检查“毕业候选人：[`git branch`](https://github.com/git/git/blob/21bf933928c02372633b88aa6c4d9d71271d42b3/Documentation/git-branch.txt)[`git tag git`](https://github.com/git/git/blob/21bf933928c02372633b88aa6c4d9d71271d42b3/Documentation/git-tag.txt)`for-each-ref`
> 
> ```
> $ git branch --no-merged master --merged next 
> ```
> 
> 如果通过了多个合并（或多个`no-merged`）过滤器，则 refs 必须可以从任何一个合并提交中访问，并且不能从任何提交中访问`no-merged`。

`filters`现在在其[手册页](https://github.com/git/git/blob/21bf933928c02372633b88aa6c4d9d71271d42b3/Documentation/filters.txt#L4-L7)中包含：

> 当组合多个`--merged`和`--no-merged`过滤器时，仅显示可从至少一个`--merged` 提交中访问的引用，并且从不显示任何`--no-merged`提交。

注意：相同的 Git 2.29（2020 年第四季度）添加了一个修补程序。

请参阅[René Scharfe ( ) 的](https://github.com/rscharfe)[提交 5336d50](https://github.com/git/git/commit/5336d5069626a9e06e224cbc1730ee96c5742108)（2020 年 9 月 26 日[）](https://github.com/rscharfe)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 03b0198](https://github.com/git/git/commit/03b0198e304a18dcc83febefd58e30ab1f0aac1e))^(中，2020 年 10 月 4 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

> ## [`ref-filter`](https://github.com/git/git/commit/5336d5069626a9e06e224cbc1730ee96c5742108): 插入内存​​泄漏`reach_filter()`
> 
> ^(签字人：René Scharfe)

> [21bf933928](https://github.com/git/git/commit/21bf933928c02372633b88aa6c4d9d71271d42b3)（“ `ref-filter`：允许合并和不合并过滤器”，2020 年 9 月 15 日，Git v2.29.0 -[批次 #16](https://github.com/git/git/commit/e1cfff676549cdcd702cbac105468723ef2722f4)中列出的[合并](https://github.com/git/git/commit/26a3728bedbdf75c670e21d24f6a30e4673f8d19)）添加了对. 通过推迟分配它直到我们知道我们需要它来避免泄漏当时未使用的数组的内存。`reach_filter()`

# javascript - Mongoose 不能通过文档数组编辑和版本控制进行扩展吗？

> ID：15577848
> 
> 赞同：4
> 
> 时间：2013-03-22T18:53:36.890
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我正在使用 Node.js 和 MongoDB/Mongoose 开发一个 Web 应用程序。我们最常用的模型 Record 有很多子文档数组。例如，其中一些包括“评论”、“预订”和“订阅者”。

在客户端应用程序中，每当用户点击“删除”按钮时，它都会触发 AJAX 请求以删除该特定评论的路由。我遇到的问题是，当这些 AJAX 调用中的许多同时进入时，Mongoose 在某些（但不是全部）调用上失败并出现“找不到文档”错误。

这只发生在*一次*快速且多次拨打电话时。我认为这是由于 Mongoose 中的版本导致文档冲突。我们当前的删除流程是：

1.  使用获取文档`Record.findById()`
2.  从适当的数组中删除子文档（例如，使用`comment.remove()`）
3.  称呼`record.save()`

我找到了一个解决方案，我可以使用`Record.findByIdAndUpdate`然后使用`$pull`运算符手动更新集合。然而，这意味着我们不能使用任何 mongoose 的中间件并完全放松版本控制。而且我想得越多，我就越意识到会发生这种情况的情况，我将不得不使用 Mongoose 的包装函数，如`findByIdAndUpdate`or `findAndRemove`。我能想到的唯一其他解决方案是将删除尝试放入一个`while`循环中并希望它有效，这似乎是一个非常糟糕的修复。

使用 Mongoose 包装器并不能真正解决我的问题，因为它根本不允许我使用任何类型的中间件或钩子，这基本上是使用 Mongoose 的巨大好处之一。

这是否意味着 Mongoose 对于快速编辑的任何东西基本上都没有用，我还不如只使用本机 MongoDB 驱动程序？我是否误解了猫鼬的局限性？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-07T03:48:26.057

Mongoose 的版本化文档数组编辑不可扩展，原因很简单，因为它不是原子操作。因此，您拥有的数组编辑活动越多，两个编辑冲突的可能性就越大，您将遭受代码中重试/恢复的开销。

对于可扩展的文档数组操作，您必须使用`update`原子数组更新[运算](http://docs.mongodb.org/manual/reference/operator/update/#operators)符：`$pull[All]`、、、、`$push[All]`和。当然，如果您还需要原始或生成的文档，您也可以将这些运算符与基于 atomic的方法一起使用。`$pop``$addToSet``$``findAndModify``findByIdAndUpdate``findOneAndUpdate`

`update`正如您所提到的，使用而不是`findOne`+的最大缺点`save`是您的 Mongoose 中间件和验证都不会在`update`. 但是，如果您想要一个可扩展的系统，我认为您别无选择。我宁愿为更新案例手动复制一些中间件和验证逻辑，也不愿遭受使用 Mongoose 的版本化文档数组编辑的可伸缩性损失。嘿，至少您仍然可以从 Mongoose 的基于模式的更新类型转换中受益！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T02:43:35.840

我*认为*，根据我们自己的经验，您的问题的答案是“是”。Mongoose 对于基于阵列的快速更新是*不可*扩展的。

### 背景

我们在[HabitRPG](https://habitrpg.com/)遇到了同样的问题。在最近用户增长激增（将我们的数据库增加到 6gb）之后，我们开始体验`VersionError`许多基于数组的更新（[关于 VersionError 的背景知识](https://stackoverflow.com/questions/17499089/versionerror-no-matching-document-found-error-on-node-js-mongoose)）。`ensureIndex({_id:1,__v1:1})`有点帮助，但随着更多用户的加入，这种情况逐渐减少。在我看来，Mongoose 对于基于数组的更新确实不可扩展。你可以在这里看到我们的整个[调查过程](https://github.com/HabitRPG/habitrpg/issues/2301)。

### 解决方案

如果您负担得起从数组移动到对象的费用，请执行此操作。例如，`comments: Schema.Types.Array`=>`comments: Schema.Types.Mixed`和排序方式，必要时`post.comments.{ID}.date`甚至可以使用手册。`post.comments.{ID}.position`

如果你被数组困住了：

1.  `db.collection.ensureIndex({_id:1,__v:1})`
2.  使用上述方法。你不会从钩子和验证中受益，但还有更糟糕的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-08T05:24:13.783

我强烈建议将这些数组拉到新的集合中。例如，一个 Comments 集合，其中每个文档都有一个记录 ID 来指示它所属的位置。这是一个更具可扩展性的解决方案。

你是对的，Mongoose 的数组操作不是原子的，因此不能很好地扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-19T15:02:56.340

我想到了另一个我不确定但似乎值得提出的想法：软删除。

Mongoose 非常关心数组结构的变化，因为它们使未来的变化变得模棱两可。但是，如果您只是标记一个注释子文档，`comment.deleted=true`那么您可能能够执行更多此类操作而不会遇到冲突。然后你可以有一个 cron 任务通过并实际删除这些评论。

哦，另一个想法是使用某种内存缓存，因此如果在过去几分钟内访问/编辑了一条记录，则无需从服务器拉取它即可使用，这意味着两个请求同时进入时间将修改同一个对象。

注意：我实际上不确定这些*都是*好主意还是它们会解决您的问题，所以如果它们不好，请继续编辑/评论/downvote :)

# jquery - I am trying to count number of drop in a div

> ID：15577856
> 
> 赞同：0
> 
> 时间：2013-03-22T18:54:49.383
> 
> 标签：jquery, arrays, jquery-ui-droppable

I have 3 draggables and I want them to fit in one droppable each, when they have all been dropped I'd like to do something... I don't know if this code is very good but I don't know how to do it in any other way. Now I wonder if anyone can help me... Guess you can see that I'm very new to this, here is my .js Should I make some kind of array to count the droppables?

```
$(function(){

    $("#dragItems img").draggable({
        containment: "#gameBoard",
        revert: "invalid"
    });

    var i = 0;
    $(function(){

            if(i === 2){
                //do something;
            } else {
                $("#dropBoxes img#drop4").droppable( { 

                    tolerance : "intersect",
                    accept : "img#drag4",
                        drop : function() {
                            $(this).append("<embed src='button-1.wav' autostart='true' hidden='true' loop='false'>");
                            i++;
                        }
                });
                $("#dropBoxes img#drop5").droppable( { 

                    tolerance : "intersect",
                    accept : "img#drag5",
                        drop : function() {
                            $(this).append("<embed src='button-1.wav' autostart='true' hidden='true' loop='false'>");
                            i++;
                        }
                });
                $("#dropBoxes img#drop2").droppable( { 

                    tolerance : "intersect",
                    accept : "img#drag2",
                        drop : function() {
                            $(this).append("<embed src='button-1.wav' autostart='true' hidden='true' loop='false'>");
                            i++;
                        }
                });
            }

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T17:50:47.560

你想在跌落发生后做点什么……对吧？

在您拥有的所有地方`i++`，为什么不让下一行调用一个函数来检查 的值`i`并做任何需要做的事情。

例子：

```
 $("#dropBoxes img#drop2").droppable( { 

                tolerance : "intersect",
                accept : "img#drag2",
                    drop : function() {
                        $(this).append("<embed src='button-1.wav' autostart='true' hidden='true' loop='false'>");
                        i++;
                        //call my magical function that will do stuff
                        //magical_function(i);
                    }
            }); 
```

——还有你的神奇功能：

```
 function magical_function(i){
             if(i==2){//do something}
           } 
```

# python - 用 django 平衡支付

> ID：15577858
> 
> 赞同：0
> 
> 时间：2013-03-22T18:54:55.890
> 
> 标签：python, django, python-requests, balanced-payments

您好我安装了以下 python 库： [https ://github.com/balanced/balanced-python](https://github.com/balanced/balanced-python)

当我使用该库在我的 django 代码中按如下方式向信用卡收费时：

```
buyer = balanced.Marketplace.my_marketplace.create_buyer(
                    user_email, card_uri=card_uri) 
```

我收到以下错误：

```
request() got an unexpected keyword argument 'config' 
```

我的 csrf 保护似乎有问题。

我能做些什么来解决这个错误？

这是点冻结：

```
Django==1.4.5
PIL==1.1.7
South==0.7.6
amqp==1.0.8
anyjson==0.3.3
argparse==1.2.1
balanced==0.10.0
billiard==2.7.3.21
boto==2.8.0
celery==3.0.15
certifi==0.0.8
chardet==1.0.1
cssmin==0.1.4
django-annoying==0.7.7
django-balanced==0.1.9
django-celery==3.0.11
django-celery-with-redis==3.0
django-debug-toolbar==0.9.4
django-extensions==1.1.0
django-model-utils==1.2.0
django-notifications-hq==0.5.5
django-storages==1.1.6
django-taggit==0.9.3
djangorestframework==2.2.1
djrill==0.3.1
gdata==2.0.17
iso8601==0.1.4
kombu==2.5.6
mock==1.0.1
odict==1.5.1
ply==3.4
psycopg2==2.4.6
python-dateutil==1.5
python-memcached==1.48
pytz==2012j
redis==2.7.2
requests==1.1.0
simplejson==2.3.2
six==1.2.0
slimit==0.7.4
wsgiref==0.1.2 
```

引用错误：

```
ile "//env/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File "//env/lib/python2.7/site-packages/django/views/generic/base.py", line 48, in view
    return self.dispatch(request, *args, **kwargs)

  File "//env/lib/python2.7/site-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
    return view_func(*args, **kwargs)

  File "//env/lib/python2.7/site-packages/rest_framework/views.py", line 393, in dispatch
    response = self.handle_exception(exc)

  File "//env/lib/python2.7/site-packages/rest_framework/views.py", line 390, in dispatch
    response = handler(request, *args, **kwargs)

  File "//env/lib/python2.7/site-packages/rest_framework/decorators.py", line 41, in handler
    return func(*args, **kwargs)

  File "//cr/api/views.py", line 403, in order_bid_detail
    buyer = balanced.Marketplace.my_marketplace.create_buyer(

  File "//env/lib/python2.7/site-packages/balanced/utils.py", line 203, in __get__
    return self.fget.__get__(obj, klass)()

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 717, in wrapped
    cached = f(*args, **kwargs)

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 867, in my_marketplace
    return cls.query.one()

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 163, in one
    ret = list(self[0:2])

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 98, in __getitem__
    res = self._slice(start, stop)

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 118, in _slice
    self.qs['offset'] = (self.offset or 0) + start

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 203, in offset
    return self._lazy_loaded['offset']

  File "//env/lib/python2.7/site-packages/balanced/utils.py", line 189, in __get__
    value = self.func(obj)

  File "//env/lib/python2.7/site-packages/balanced/resources.py", line 177, in _lazy_loaded
    response = Resource.http_client.get(page.uri)

  File "//env/lib/python2.7/site-packages/balanced/http_client.py", line 117, in make_absolute_url
    return http_op(client, url, **kwargs)

  File "//env/lib/python2.7/site-packages/balanced/http_client.py", line 139, in get
    resp = self.interface.get(uri, **kwargs)

  File "//env/lib/python2.7/site-packages/requests/sessions.py", line 310, in get
    return self.request('GET', url, **kwargs)

TypeError: request() got an unexpected keyword argument 'config' 
```

# jquery - jQuery Validator 中名称的正则表达式

> ID：15577860
> 
> 赞同：1
> 
> 时间：2013-03-22T18:55:17.327
> 
> 标签：jquery, regex, validation

包含 az、0-9、-、_ 的“名称”的正则表达式是什么？

```
$.validator.addMethod("validName", 
    function(value, element) {
        return /.....*/.test(value);
    }, 
    "Invalid name"
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:56:21.437

你可能想要这个：

```
 return /^[a-z0-9\-_]+$/.test(value); 
```

它测试字符串至少包含这些字符中的一个并且不包含其他字符（`^`and`$`是字符串锚点的开始和结束）。

如果要允许常规空格 ( `) 和点，请使用`

 ````
 return /^[a-z0-9\-_\ \.]+$/.test(value); 
````

# sql - 将两个查询合并为 1 个包含 2 列的结果集

> ID：15577863
> 
> 赞同：0
> 
> 时间：2013-03-22T18:55:22.080
> 
> 标签：sql, sql-server-2008

假设我有一张如下所示的表格：

```
Person Table

ID    AccountID  Name
1        6       Billy  
2        6       Joe
3        6       Tom
4        8       Jamie
5        8       Jake
6        8       Sam 
```

我有两个我知道自己工作的查询：

```
Select Name Group1 from person where accountid = 6

Select Name Group2 from person where accountid = 8 
```

但我想要一个结果集看起来像这样：

```
Group1   Group2

Billy    Jamie   
Joe      Jake
Tom      Same 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:59:53.020

我同意你应该做这个客户端。但它可以在 T/SQL 中完成：

```
select  G1.Name as Group1
,       G2.Name as Group2
from    (
        select  row_number() over (order by ID) as rn
        ,       *
        from    Group
        where   AccountID = 6
        ) as G1
full outer join
        (
        select  row_number() over (order by ID) as rn
        ,       *
        from    Group
        where   AccountID = 8
        ) as G2
on      G1.rn = G2.rn
order by
        coalesce(G1.rn, G2.rn) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:00:45.023

您可以使用`row_number()`为每一行分配一个不同的值，然后使用 a`FULL OUTER JOIN`连接两个子查询：

```
select t1.group1,
  t2.group2
from
(
  select name group1,
    row_number() over(order by id) rn
  from yourtable
  where accountid = 6
) t1
full outer join
(
  select name group2,
    row_number() over(order by id) rn
  from yourtable
  where accountid = 8
) t2
  on t1.rn = t2.rn; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/aaa17/4)

# c - 将大量 xml 文件转换为文本时出现分段错误

> ID：15577869
> 
> 赞同：0
> 
> 时间：2013-03-22T18:55:42.667
> 
> 标签：c, xml, linux

```
#include<stdio.h>
#include<stdlib.h>
#include<dirent.h>
#include<string.h>

int main()
{
  FILE *fin,*fout;
  char dest[80]="/home/vivs/InexCorpusText/";
  char file[30];
  DIR *dir;
  char c,state='1';
  int len;
  struct dirent *ent;
  if((dir=opendir("/home/vivs/InexCorpus"))!=NULL)
  {
    while((ent=readdir(dir))!=NULL)
    {
      if(strcmp(ent->d_name,".") &&
         strcmp(ent->d_name,"..") &&
         strcmp(ent->d_name,".directory"))
      {
        len=strlen(ent->d_name);
        strcpy(file,ent->d_name);
        file[len-3]=file[len-1]='t';
        file[len-2]='x';
        //strcat(source,ent->d_name);
        strcat(dest,file);
        printf("%s\t%s\n",ent->d_name,dest);
        fin=fopen(ent->d_name,"r");
        fout=fopen(dest,"w");
        while((c=fgetc(fin))!=EOF)
        {
          if(c=='<')
          {
            fputc(' ',fout);
            state='0';
          }
          else if(c=='>')
            state='1';
          else if(state=='1')
          {
            if(c!='\n')
            fputc(c,fout);
            if(c=='.')
            {
              c=fgetc(fin);
              if(c==' '||c=='\n'||c=='<')
              {
                fputc('\n',fout);
                ungetc(c,fin);
              }
              else fputc(c,fout);
            }
          }
        }
      }
      close(fin);
      close(fout);
      strcpy(dest,"/home/vivs/InexCorpusText/");
    }
    closedir(dir);
  }
  else
  {
    printf("Error in opening directory\n");
  }
  return 0;
} 
```

我试图将 xml 文件转换为文本。这段代码只是删除标签而已。当我对大约 300 个文件执行此代码时，它没有显示任何错误，但是当数字达到 500 或更多时，我在处理大约 300 个文件后收到分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:07:52.293

“从一开始”至少有一个原因：

这是`struct dirent`男人的声明：

```
 On Linux, the dirent structure is defined as follows:

       struct dirent {
           ino_t          d_ino;       /* inode number */
           off_t          d_off;       /* offset to the next dirent */
           unsigned short d_reclen;    /* length of this record */
           unsigned char  d_type;      /* type of file; not supported
                                          by all file system types */
           char           d_name[256]; /* filename */
       }; 
```

您在任何超过 30 个（实际上是 29 个）字符的名称上都会遇到麻烦。发生内存覆盖是因为**文件**只有 30 个字节（为 '\0' 终止符保留 1）：

```
char file[30];
...
strcpy(file,ent->d_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:12:42.923

XML 中有两种结构，您似乎没有考虑到这些结构。

1.  属性内容可以包含未转义`>`的字符，这可能会影响您的计数。请参阅[http://www.w3.org/TR/REC-xml/#NT-AttValue](http://www.w3.org/TR/REC-xml/#NT-AttValue)。

2.  CDATA 部分可以同时包含`<`和`>`字符作为文字文本，只要它们不作为结束`]]>`字符串的一部分出现。请参阅[http://www.w3.org/TR/REC-xml/#NT-CharData](http://www.w3.org/TR/REC-xml/#NT-CharData)。这可能会严重偏离您的逻辑。

您为什么不查看文件以查看是否包含文本`CDATA`？

您可能要考虑使用[xsltproc 或 libxslt](http://xmlsoft.org/XSLT/xsltproc2.html)；一个非常简单的 XSLT 转换将给你你想要的。有关此类转换引擎，请参阅[使用 XSLT 将 XML 文件的一部分提取为纯文本。](https://stackoverflow.com/questions/6392890/extract-part-of-an-xml-file-as-plain-text-using-xslt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:47:14.540

好的，另一个有问题的地方：

```
len=strlen(ent->d_name);
....
file[len-3]=file[len-1]='t';
file[len-2]='x'; 
```

因为`d_name`可能少于 3 个字符，它可能再次导致内存覆盖。您应该小心使用类似的函数`strlen()`并始终验证它们的结果。

# asp.net - 在 ASP.NET 中读取已发布的 JSON 数据

> ID：15577871
> 
> 赞同：2
> 
> 时间：2013-03-22T18:55:47.723
> 
> 标签：asp.net, json, post

我订阅了一个群发电子邮件服务，当他们最后发生错误时，它会发布到我网站上的一个页面作为端点，以通知我一封电子邮件已退回。

他们描述如下： `The event data is sent in the POST request body using a JSON object.`

我需要知道的是如何捕获发布给我的信息？目前我将它们指向一个通用处理程序，一个 .ashx 页面，只要它在 .NET 中，它就可以更改为任何内容。

在使用第一个经典 ASP 和现在的 .NET 的 10 年中，我以前从未这样做过，我必须承认我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-31T05:04:04.020

这是我用来实现类似事情的代码 - 不知道我最初是从哪里得到的。

C＃

```
var strJSON = String.Empty;

context.Request.InputStream.Position = 0;
using (var inputStream = new StreamReader(context.Request.InputStream))
{
  strJSON = inputStream.ReadToEnd();
}

JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
object serJsonDetails = javaScriptSerializer.Deserialize(strJSON, typeof(object));

// go and process the serJsonDetails object 
```

或 VB

```
Dim strJSON = [String].Empty

context.Request.InputStream.Position = 0
Using inputStream = New StreamReader(context.Request.InputStream)
    strJSON = inputStream.ReadToEnd()
End Using

Dim javaScriptSerializer As New JavaScriptSerializer()
Dim serJsonDetails As Object = javaScriptSerializer.Deserialize(strJSON, GetType(Object))

' go and process the serJsonDetails object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:18:16.770

您可以只读取请求流 ( `Request.GetRequestStream`) 并使用 Json.NET 反序列化为对象。

您可以使用 MVC4 和内置的对象映射。

有很多选择。也许您应该更多地阅读它们，以便了解它们的功能和缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:17:43.823

如果您知道帖子的内容，可能 Request.Form [（此处）](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)将帮助您获取 JSON，然后您需要类似 json.net 库的东西来获取对象，或者您可以简单地使用正则表达式或关键字搜索字符串

或者，如果您可以将帖子定向到 Web 服务（asmx）而不是网页，这些服务将为您解析 json

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T05:54:41.690

如果您需要两次或多次读取原始帖子数据，我建议您使用此代码。

```
 string postBodyJson = null;

    MemoryStream ms = new MemoryStream();
    Request.InputStream.Position = 0;
    Request.InputStream.Seek(0, SeekOrigin.Begin);
    Request.InputStream.CopyTo(ms);

    ms.Position = 0;
    ms.Seek(0, SeekOrigin.Begin);
    using (var reader = new StreamReader(ms))
    {
        postBodyJson = reader.ReadToEnd();
    } 
```

# c# - 具有空引用异常的 WPF 项目

> ID：15577875
> 
> 赞同：4
> 
> 时间：2013-03-22T18:55:59.007
> 
> 标签：c#, wpf, nullreferenceexception

我有一个 WPF 项目，我正在使用多个 WPF 窗口。我的 WPF 窗口是：

*   主窗口
*   窗口1
*   登录

我必须考虑情况，在第一个中一切正常，但在第二个中我得到一个空引用异常。

1.  第一个场景：App.xaml 配置为启动窗口为`MainWindow`.

当用户单击 MainWindow 上的 Button 时，他在 Window1 中被转发，我有以下代码：

```
MainWindow obj=(MainWindow)Application.Current.MainWindow;
 private void button1_Click(object sender, RoutedEventArgs e)
        {
        obj.checkBox1.IsChecked = false;
        } 
```

2.第二种场景：将App.xaml配置为启动窗口为登录窗口。登录代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
        {
        var window=new MainWindow();
        window.Show();
        this.Close();
        } 
```

在这种情况下，当我单击 Window1 中的按钮时，会为 obj 引发空引用异常。

这两种情况的初始化有什么区别`MainWindow`导致第二种情况出现异常，我该如何克服它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:09:46.867

那么，`Window`启动应用程序时第一个打开的窗口，将成为调用时返回的窗口`Application.Current.MainWindow`。

在你的情况下，那是`Login`，但`Window1`你期望它是`MainWindow`，这是错误的。由于`Login`已关闭，您将返回 null，并且应用程序崩溃。

要解决此问题，您必须制作`MainWindow`MainWindow :-)

你可以这样`Login`做：

```
var window = new MainWindow();
Application.Current.MainWindow = window;
window.Show();
this.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:09:36.717

方案 2 中的`this.Close()`登录窗口将关闭应用程序，因为这是在 app.xaml 文件中作为启动窗口指向的窗口。请参阅[MainWindow 属性](http://msdn.microsoft.com/en-us/library/system.windows.application.mainwindow.aspx)

MainWindow 自动设置为引用要在 AppDomain 中实例化的第一个 Window 对象。

在第一种情况下，您不会关闭 MainWindow，因此应用程序会继续。在第二个中，您关闭登录窗口，以便应用程序退出。

在第一种情况下，您没有显示用户被转发到 window1 的位置。查看该代码也会有所帮助。

# ctags - 我可以将范围信息添加到使用 `--regex- 生成的标签中吗？ ` 在旺盛的 ctags 中？

> ID：15577876
> 
> 赞同：5
> 
> 时间：2013-03-22T18:56:00.540
> 
> 标签：ctags, exuberant-ctags, tagbar

从技术上讲，我在 vim 中使用[Tagbar](https://github.com/majutsushi/tagbar)来查看文件的标签，但是这个问题应该普遍适用于 exuberant ctags，v5.8。

假设我有以下 python 文件，调用它`foo.py`：

```
class foo:
    def bar(baz):
        print(baz) 
```

让我们运行`ctags`它：`ctags foo.py`。生成的`tags`文件如下所示：

```
!_ some ctags version / formatting stuff not worth pasting
bar foo.py  /^    def bar(baz):$/;" m   class:foo
foo foo.py  /^class foo:$/;"    c 
```

我感兴趣的是第二行的最后一个字段，`class:foo`. 这就是`bar()`函数的范围。如果我在 vim 中使用 tagbar，它会相应地将函数嵌套在类中。

现在假设我在我的`~/.ctags`. 事实上，我正在添加对这个 puppet 文件的支持：

```
class foo {
    include bar
} 
```

假设我使用以下`~/.ctags`论点。'import' 正则表达式很丑陋（errr...对于正则表达式来说很丑陋），但对于这个例子来说它已经完成了足够的工作：

```
--langdef=puppet
--langmap=puppet:.pp
--regex-puppet=/^class[ \t]*([:a-zA-Z0-9_\-]+)[ \t]*/\1/c,class,classes/
--regex-puppet=/^\ \ \ \ include[ \t]*([:a-zA-Z0-9_\-]+)/\1/i,include,includes/ 
```

`tags`这会在我的文件中生成以下标签：

```
bar foo.pp  /^    include bar$/;"   i
foo foo.pp  /^class foo {$/;"   c 
```

请注意，这两行都不包含范围信息。我的问题是：无论如何，我是否可以构建`--regex-puppet`论点或`--regex-<LANG>`一般行来收集有关标签范围的信息？也许声明符合标准 A 的标签总是将成为符合标准 B 的标签的范围父级？

`man ctags`建议没有明确的方法来添加任意范围信息，但我可能会忽略另一种解决方案（为了强调而略作删减）：

```
--regex-<LANG>=/regexp/replacement/[kind-spec/][flags]

        Unless modified by flags, regexp is interpreted as a Posix extended regular expression. The replacement should expand for all matching lines  to  a  non-empty  string  of
        characters,  or  a  warning message will be reported. An optional kind specifier for tags matching regexp may follow replacement, which will determine what kind of tag is
        reported in the "kind" extension field (see TAG FILE FORMAT, below). The full form of kind-spec is in the form of a single letter, a comma, a  name  (without  spaces),  a
        comma, a description, followed by a separator, which specify the short and long forms of the kind value and its textual description (displayed using --list-kinds). Either
        the kind name and/or the description may be omitted. If kind-spec is omitted, it defaults to "r,regex". Finally, flags are one or more single-letter characters having the
        following effect upon the interpretation of regexp:

           b   The pattern is interpreted as a Posix basic regular expression.

           e   The pattern is interpreted as a Posix extended regular expression (default).

           i   The regular expression is to be applied in a case-insensitive manner. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:43:35.340

不，不幸的是，ctags 中的正则表达式模式支持是不可能的。让 ctags 生成正确范围的唯一方法是编写一个解析器作为 C 中的附加模块。如果我有时间，我想添加对 ctags 更好地处理新语言的支持，但到目前为止还没有解决了，我也不确定最好的方法。

如果您对 Tagbar 支持最感兴趣，那么还有另一种方法：Tagbar 支持任意标签生成程序，只要它们的输出与 ctags 兼容，因此您可以在 Python 中编写一个简单的解析器并配置 Tagbar使用它。看看`:h tagbar-extend`（尤其是最后一小节“编写自己的标签生成程序”）是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T17:35:43.043

我正在通用 ctags 项目中开发此类功能： [https](https://github.com/universal-ctags/ctags/pull/562) ://github.com/universal-ctags/ctags/pull/562 。

（不要期望太多；正则表达式解析器不足以处理复杂的语法。新功能适用于语法简单的语言。）

示例 1::

```
$ cat /tmp/input.foo
class foo:
def bar(baz):
    print(baz)
class goo:
def gar(gaz):
    print(gaz)

$ cat /tmp/foo.ctags
--langdef=foo
    --map-foo=+.foo
    --regex-foo=/^class[[:blank:]]+([[:alpha:]]+):/\1/c,class/{scope=set}
    --regex-foo=/^[[:blank:]]+def[[:blank:]]+([[:alpha:]]+).*:/\1/d,definition/{scope=ref}

$ ~/var/ctags/ctags --options=/tmp/foo.ctags -o - /tmp/input.foo
bar /tmp/input.foo  /^    def bar(baz):$/;" d   class:foo
foo /tmp/input.foo  /^class foo:$/;"    c
gar /tmp/input.foo  /^    def gar(gaz):$/;" d   class:goo
goo /tmp/input.foo  /^class goo:$/;"    c 
```

示例 2::

```
$ cat /tmp/input.pp
class foo {
include bar
}

$ cat /tmp/pp.ctags
--langdef=pp
    --map-pp=+.pp
    --regex-pp=/^class[[:blank:]]*([[:alnum:]]+)[[[:blank:]]]*\{/\1/c,class,classes/{scope=push}
    --regex-pp=/^[[:blank:]]*include[[:blank:]]*([[:alnum:]]+).*/\1/i,include,includes/{scope=ref}
    --regex-pp=/^[[:blank:]]*\}.*//{scope=pop}{exclusive}

$ ~/var/ctags/ctags --options=/tmp/pp.ctags -o - /tmp/input.pp
bar /tmp/input.pp   /^    include bar$/;"   i   class:foo
foo /tmp/input.pp   /^class foo {$/;"   c 
```

# zend-framework2 - Zend Framework 2 标题

> ID：15577878
> 
> 赞同：1
> 
> 时间：2013-03-22T18:56:02.210
> 
> 标签：zend-framework2

似乎我记得在 Zend Framework 中，我们可以通过 headScript 在页面的操作中添加样式/脚本。在 Zend2 中，这似乎不是一个选项。

我在文档中没有看到太多关于处理这个问题的内容。基本上我的问题是；在视图中添加这些样式/脚本是否合适？或者有没有一种新方法可以将它们添加到控制器操作中？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T03:13:19.197

在您的控制器操作中：

```
$this
    ->getServiceLocator()
    ->get('viewhelpermanager')
    ->get('HeadScript')
    ->appendFile('/js/custom.js')
; 
```

您可以通过创建“可调用”“服务定位器感知”控制器插件来简化此操作。

您可以在模块配置文件中执行此操作：

```
...
'controller_plugins' => array(
    'invokables' => array(
        'Head' => 'Application\Controller\Plugin\Head',
    )
),
... 
```

在其中创建“Head”类`module/Application/src/Application/Controller/Plugin/Head.php`，实现`ServiceLocatorAwareInterface`并构建一些方法`javaScript()`，`styleSheet`例如简单地抓取视图助手并返回它：

```
return $this
    ->getServiceLocator()
    ->getServiceLocator() // Main service Locator
    ->get('viewhelpermanager')
    ->get('HeadScript')
; 
```

然后在您的控制器中，它更像是：

```
$this->Head()->javaScript()->appendFile('/js/custom.js'); 
```

不过，您可以随心所欲。甚至可能使用 XML 控制每个操作的布局的 Magento 样式。

**更新**

如果您使用的是 ZF2 MVC，输出将被缓冲。所以我发现向页面添加脚本和样式表最好从附加到视图模型的模板文件中完成：

`$this->headScript()->appendFile('/js/custom.js', 'text/javascript');`

`$this->headLink()->appendStylesheet('/css/custom.css');`

将其置于控制器之外，因为它与视图相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T08:27:01.597

我不明白马歇尔之家的谈话是什么。

插件需要实现 PluginInterface。为什么要实现 ServiceLocatorAwareInterface ？

把这段代码贴在哪里？

```
return $this
->getServiceLocator()
->getServiceLocator() // Main service Locator
->get('viewhelpermanager')
->get('HeadScript'); 
```

AbstractPlugin（如果从它扩展）也没有 getServiceLocator() 方法。啥意思？主要服务定位器？请写一些例子。

# php - 使用 php/DOM ie等从编号列表中获取 XML 项目

> ID：15577884
> 
> 赞同：0
> 
> 时间：2013-03-22T18:56:22.337
> 
> 标签：php, xml, dom

刚开始使用 XML 提要，到目前为止一切顺利，但我遇到了一个提要的问题

XML是这样的：

```
<Property>
<images>
<image number="1">
<image>http://www.blah.net/shared/depot/3168/biens/149506/images/627783.jpg
</image>
<image number="2"><image>http://www.blah.net/shared/depot/3168/biens/149506/images/627794.jpg</image>
</image>
<image number="3"><image>http://www.blah.net/shared/depot/3168/biens/149506/images/627792.jpg
</image>
</images>
</Property> 
```

使用 DOM 和 php，我应该使用什么来访问每个图像 url？

我正在为我的其他提要使用类似的东西，但我不知道如何挑选编号的项目

我已经修改了代码并没有高兴地用谷歌搜索谢谢泰南

```
$Pic1= $Property->getElementsByTagName('ImageURL1')->item(0)->textContent; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:08:07.867

如果您是该 XML 的作者，请先修复它：（
我缩短了您的网址以便于格式化）

```
<Property>
    <images>
        <image number="1">http://www.blah.net/shared/627783.jpg</image>
        <image number="2">http://www.blah.net/shared/627794.jpg</image>
        <image number="3">http://www.blah.net/shared/627792.jpg</image>
    </images>
</Property> 
```

然后，使用 simplexml 获取网址：

```
// $xmlstr holds the XML

$xml = simplexml_load_string($xmlstr);
urls = $xml->xpath("//image");
foreach ($urls as $url) echo "$url <br />"; 
```

查看此代码的现场演示：http: [//codepad.viper-7.com/VsvgJw](http://codepad.viper-7.com/VsvgJw)

# ruby-on-rails - 如何在我的抓取中处理“404 错误”？

> ID：15577885
> 
> 赞同：2
> 
> 时间：2013-03-22T18:56:31.470
> 
> 标签：ruby-on-rails, ruby

我不是程序员，对 Ruby 语言知之甚少。我有一个从网站获取产品信息的抓取程序，我正在尝试添加一个救援代码来处理 HTTP 404 错误，因此它不会结束抓取，而是继续下一个产品。

我需要将救援添加到下面的代码中：

```
 def initialize(id, log = nil, timeout_threshold = nil)

            @log_buffer = nil
            # prepare internal logging stream
            @log = (!log.nil? and log.is_a?(Logger)) ? log : Logger.new(@log_buffer=StringIO.new)

            begin           
                # store instance url address
                @id = id.to_s
                @url = Link::base_url + 'en-US/item_' + @id + '.htm'

                # set remote timeout threshold
                @timeout_threshold = (timeout_threshold.to_i > 0) ? timeout_threshold.to_i : 15
                @timeout = false

                @expired = false

                if url_verify
                    Timeout::timeout(@timeout_threshold) {
                        Mechanize.html_parser = Nokogiri::HTML
                        @@agent = Agent.instance

                        ###TODO: [optional?] login 
                        ###TODO: [optional?] or login iff pricing not present?
                        ###TODO: Agent.get(user login page)
                        ###TODO: Agent.fill in user/pswd
                        ###TODO: Agent.submit

                        @html = @@agent.get(url)
                        @log.info("Alamode Product #{@id.to_s}: Load #{url.to_s}")

                        @specification = parse_specifications
                        @quantity, @mapped_quantity = parse_quantities
                        @price = parse_price
                        @valid = true

                        # check parsed page
                        if @specification.size.zero? and @quantity.size.zero?
                            @valid = false
                            @expired = true
                            @log.warn("Alamode Product #{@id.to_s}: #{url.to_s} unscrappable (product no longer available?)")
                        else
                            @log.info("stAlamode Product #{@id.to_s}: #{url.to_s} successfully parsed")
                            @log.info("    QTY #{@mapped_quantity.to_s}")
                        end
                    }

                else
                    # return error message
                    @valid = false
                    @log.error("Alamode Product #{@id.to_s}: #{url.to_s} is not a properly formatted URI address")
                end

            rescue Timeout::Error
                @valid = false
                @timeout = true
                @log.error("Alamode Product #{@id.to_s}: #{url.to_s} did not respond within allocated time")    
            end

        end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:03:39.963

Ruby 允许您堆叠救援子句。

```
begin
    ...
rescue YourErrorName
    ...
rescue Timeout::Error
    ...
end 
```

在新子句中，您可以安静地退出（什么都不做 - 最好记录结果）或使用下一个 id 开始报废。我对 Nokogiri 不熟悉，所以你必须自己找出错误名称；）祝你好运！

# date - FOSUser Bundle symfony2 日期生日

> ID：15577887
> 
> 赞同：0
> 
> 时间：2013-03-22T18:56:36.093
> 
> 标签：date, symfony, fosuserbundle

嗨，我正在使用 FOSUSerBundle 进行注册。我还向我的实体添加了这个：

```
 /**
 *
 * @ORM\Column(name="birthday", type="date", nullable=true, options={"default" = "0000-00-00"})
 */
protected $birthday="0000-00-00"; 
```

我的注册表没有任何内容。没有生日字段或类似的东西。我只是不想在 DB 列中有“null”。

但是当我尝试注册此错误时：

```
Fatal error: Call to a member function format() on a non-object in C:\xampp\htdocs\project\vendor\doctrine\dbal\lib\Doctrine\DBAL\Types\DateType.php on line 44 
```

如何解决？:O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:51:18.153

不要使用 default = "0000-00-00"，因为 Doctrine 在 PHP \DateTime 之间进行转换。并且 PHP \DateTime 的范围在 1970 年之间 - ...出于这个原因，只需使用 null 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:34:09.530

`$birthday`当它在持久化之前尝试构建日期时间格式时，它可能会检测到该属性不为空。因为您的字段具有 type 的值，`string`但您的字段类型是 datetime 它尝试执行格式。

解决方案可能是：

```
/**
 *
 * @ORM\Column(name="birthday", type="date", nullable=true, options={"default" = "0000-00-00"})
 */
protected $birthday=null; 
```

确保您的数据库字段确实可以为空。

希望这可以帮助...

# mysql - Magento 数据库修复工具

> ID：15577889
> 
> 赞同：0
> 
> 时间：2013-03-22T18:56:40.213
> 
> 标签：mysql, magento, magento-1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T05:41:59.133

要使用该工具，您需要使用不同的数据库创建相同的 Magento 安装，以供参考。此外，请确保备份生产站点数据库。然后您将在浏览器中转到数据库修复工具并输入所有数据库连接凭据；然后，该工具将运行检查可能损坏的数据库是否存在任何问题。

# c# - 如何在 LINQ 选择语句中使用 Lambda

> ID：15577890
> 
> 赞同：70
> 
> 时间：2013-03-22T18:56:41.143
> 
> 标签：c#, asp.net-mvc, linq, lambda

我正在尝试使用 lambda 函数选择商店并将结果转换为 SelectListItem 以便我可以呈现它。但是它会抛出“ **Select Clause 中的表达式类型不正确**”错误：

```
IEnumerable<SelectListItem> stores =
    from store in database.Stores
    where store.CompanyID == curCompany.ID
    select (s => new SelectListItem { Value = s.ID, Text = s.Name} );
ViewBag.storeSelector = stores; 
```

我究竟做错了什么？

编辑：

另外，在这种情况下如何将 Int 转换为 String ？以下不起作用：

```
select (s => new SelectListItem { Value = s.ID.ToString(), Text = s.Name} );
select (s => new SelectListItem { Value = s.ID + "", Text = s.Name} ); 
```

编辑2：

找出 Int 到 String 的转换。忘记包含 int2string 转换函数是 Microsoft 的典型做法。这是每个人都在使用的实际解决方法，具有完全有效的语法：

```
select new SelectListItem { Value = SqlFunctions.StringConvert((double)store.ID), Text = store.Name }; 
```

将这种情况称为荒谬是轻描淡写的。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-03-22T18:58:23.197

使用 LINQ 查询表达式

```
 IEnumerable<SelectListItem> stores =
        from store in database.Stores
        where store.CompanyID == curCompany.ID
        select new SelectListItem { Value = store.Name, Text = store.ID };

 ViewBag.storeSelector = stores; 
```

或使用带有 lambda 表达式的 LINQ 扩展方法

```
 IEnumerable<SelectListItem> stores = database.Stores
        .Where(store => store.CompanyID == curCompany.ID)
        .Select(store => new SelectListItem { Value = store.Name, Text = store.ID });

 ViewBag.storeSelector = stores; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-22T18:58:22.610

为什么不直接使用所有 Lambda 语法？

```
database.Stores.Where(s => s.CompanyID == curCompany.ID)
               .Select(s => new SelectListItem
                   {
                       Value = s.Name,
                       Text = s.ID
                   }); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-22T18:58:08.950

您似乎正在尝试混合查询表达式语法和“正常” lambda 表达式语法。您可以使用：

```
IEnumerable<SelectListItem> stores =
        from store in database.Stores
        where store.CompanyID == curCompany.ID
        select new SelectListItem { Value = store.Name, Text = store.ID};
ViewBag.storeSelector = stores; 
```

或者：

```
IEnumerable<SelectListItem> stores = database.Stores
        .Where(store => store.CompanyID == curCompany.ID)
        .Select(s => new SelectListItem { Value = s.Name, Text = s.ID});
ViewBag.storeSelector = stores; 
```

你不能像你想要的那样混合两者。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-21T06:32:59.797

Lambda 表达式结果

```
var storesList = context.Stores.Select(x => new { Value= x.name,Text= x.ID }).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-20T13:33:16.513

使用 Lambda 表达式：

1.  如果我们没有特定的类来绑定结果：

    ```
     var stores = context.Stores.Select(x => new { x.id, x.name, x.city }).ToList(); 
    ```

2.  如果我们有一个特定的类，那么我们需要将结果与它绑定：

    ```
    List<SelectListItem> stores = context.Stores.Select(x => new SelectListItem { Id = x.id, Name = x.name, City = x.city }).ToList(); 
    ```

使用简单的 LINQ 表达式：

1.  如果我们没有特定的类来绑定结果：

    ```
    var stores = (from a in context.Stores select new { x.id, x.name, x.city }).ToList(); 
    ```

2.  如果我们有一个特定的类，那么我们需要将结果与它绑定：

    ```
    List<SelectListItem> stores = (from a in context.Stores select new SelectListItem{ Id = x.id, Name = x.name, City = x.city }).ToList(); 
    ```

# node.js - 如何将函数调用值存储到变量node.js中

> ID：15577895
> 
> 赞同：0
> 
> 时间：2013-03-22T18:56:56.007
> 
> 标签：node.js, express

我正在创建一个 node.js 应用程序，它将查看传递给它的 URL，然后返回正确的数据库连接字符串。下面是我的 genericServer.js 文件。第二个代码块是我的 Connection.js 文件。当一个 id 在 URL 中传递给 genericServer 文件时，我将它传递给中间件 connection.getConnString。

```
var express = require('express');
var connection = require('./connection');

var connString = "";
var app = express();

app.get('/connectionString/:id', connection.getConnString, function(res){
res.on('response', function(response) {
    res.on('data', function(chunk) {
        connString += chunk;
    console.log("The connection String is: " + connString);
    });
});
});
app.listen(3333); 
```

截至目前，以下代码确实返回了正确的连接信息，但我需要将此数据存储在（genericserver.js）服务器级别的变量中。我认为在调用 connection.GetConnString 中间件之后，我可以使用函数（res）在 genericServer.js 中捕获响应。到目前为止，似乎中间件处理，发回响应，但函数 (res) {} 的回调从未发生。

关于如何在仍然使用 app.get() 的同时将 connection.getConnString 响应存储到 genericServer 调用中的变量中的任何想法？

```
var sql = require('msnodesql');
var app = require('express');

exports.getConnString = function(req, res) {

sql.query(conn_str, "SELECT DatabaseLocation, URL FROM dbo.Hospitals WHERE URL = '" + req.params.id + "'", function(err, results) {
    if (err) {
        console.log("Error running query!");
        console.log(err); return;
    };
    res.writeHead(200, {
    'Content-Type': 'text/plain'
});

    var connectionString = "";
    switch (results[0].DatabaseLocation){
        case "172.16.42.243":
            connectionString = '\"Driver={SQL Server Native Client 11.0};Server=DevelopmentSQL1;Initial Catalog={' + results[0].URL + '};Database={' + results[0].URL + '};UID={userID};PWD={pssWrd};\";'
            break;
        case "172.16.42.244":
            connectionString = '\"Driver={SQL Server Native Client 11.0};Server=DevelopmentSQL2;Initial Catalog={' + results[0].URL + '};Database={' + results[0].URL + '};UID={userID};PWD={pssWrd};\";'
            break;
        case "172.16.42.245":
            connectionString = '\"Driver={SQL Server Native Client 11.0};Server=DevelopmentSQL3;Initial Catalog={' + results[0].URL + '};Database={' + results[0].URL + '};UID={userID};PWD={pssWrd};\";'
            break;
        case "172.16.42.246":
            connectionString = '\"Driver={SQL Server Native Client 11.0};Server=DevelopmentSQL4;Initial Catalog={' + results[0].URL + '};Database={' + results[0].URL + '};UID={userID};PWD={pssWrd};\";'
            break;
        case "172.16.42.247":
            connectionString = '\"Driver={SQL Server Native Client 11.0};Server=DevelopmentSQL5;Initial Catalog={' + results[0].URL + '};Database={' + results[0].URL + '};UID={userID};PWD={pssWrd};\";'
            break;
}
    console.log(connectionString);
    res.end(connectionString);
}); 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:13:47.083

使用响应传递数据不是可行的方法。在您的中间件中，您可以将连接字符串设置为以下属性`req`：

```
exports.getConnString = function(req, res, next) {
  sql.query(..., function(err, results) {
    ... // get the connection string as per your code
    req.connectionString = connectionString;
    next(); // call the next middleware/route
  });
}; 
```

接下来将调用您的路由处理程序，您可以在那里访问该属性：

```
app.get('/connectionString/:id', connection.getConnString, function(req, res) {
  console.log("The connection String is: ", req.connectionString);
  res.send(req.connectionString);
}); 
```

# c++ - 使用 memset 而不是 for 循环初始化 int 时出现分段错误**

> ID：15577904
> 
> 赞同：3
> 
> 时间：2013-03-22T18:57:16.587
> 
> 标签：c++, linux, arrays, pointers, multidimensional-array

这是我在 C++ 中的代码

```
int** a;
try{
  a = new int*[m];
  for(int i = 0; i<m;i++)
    a[i] = new int[n];
} 
```

...现在我正在使用 for 循环初始化上述内容，如下所示：

```
for(int i = 0; i<m; i++)
  for(int j = 0; i<n; j++)
      a[i][j] = 0; 
```

我正在努力提高性能，因此认为使用 memset 是个好主意。因此修改了我的代码以使用 memset 而不是 for 循环，如下所示：

```
memset(a, 0, sizeof(a[0][0]) * m * n); 
```

但是我在执行这个时遇到了分段错误。谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:59:57.177

```
int** a; 
```

这只是给你一个对象。一个`int**`对象。它根本没有指向任何地方。没有`int`可分配的 s。当您开始分配给`int`s 时，就好像它们存在一样，您会得到未定义的行为。

此外，`int**`指向 s 的“二维数组”的内存布局`int`是这样的：`int**`指向 s 数组中的第一个元素`int*`，而`int*`s 指向 s 数组中的第一个元素`int`。该内存不是连续的，因为它需要间接跳转内存，即它不是单个内存块。您不能只使用`memset`.

如果您只想要一个固定的编译时大小的 2D 数组`int`，请执行以下操作：

```
int a[N][M]; 
```

where`N`和`M`是常量表达式。这*是*连续存储的，但我仍然不建议使用`memset`.

或者使用标准容器，例如：

```
std::array<std::array<int, M>, N> a; 
```

如果您需要动态大小，请尝试：

```
std::vector<std::vector<int>> a(M, std::vector<int>(N)); 
```

或者，您可以坚持使用`int**`并确保动态分配`int*`s 和`int`s：

```
int** a = new int*[M];
for (i = 0; i < N; i++) {
  a[i] = new int[N];
} 
```

但这很丑！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:01:10.337

```
int** a; 
```

只是一个指向指针的声明`int`。

> *“现在我正在使用 for 循环初始化上述内容”*

您没有在`for`循环中对其进行初始化，您只是试图分配`0`给不存在的元素，这会产生***未定义的行为***。您需要为这些元素动态分配内存，或者甚至更好：`std::vector`改用：

```
std::vector< std::vector<int> > a(m, std::vector<int>(n, 0)); 
```

> *“我正在努力提高性能”*

除非必要，否则不要这样做。***不要过早优化。***

* * *

**编辑**：在您提到您已经面临性能问题之后，您可以这样做：而不是这个二维 C 样式数组：

```
int** a = new int*[m];      // m = number of rows
for(int i = 0; i < m; i++)
    a[i] = new int[n];      // n = number of columns 
```

你可以使用一维`std::vector`：

```
std::vector<int> vec(rows * cols, 0);
...
vec[i * cols + j] = 7;   // equivalent of vec[i][j] 
```

这将有更多的优势：

*   您的二维数组将存储在连续的内存块中
*   这块内存将立即分配，而不是许多小块
*   由于空间局部性，元素的频繁访问将更快
    （“接近”的元素将在缓存内存中可用，因此您的
    程序不必从主内存加载它们）
*   并且***您将不负责内存管理***（一旦对象被破坏
    ，内存将被自动清理）`vector`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:00:11.027

使用 an`int **`通常不会有单个连续的内存块。假设您正确使用它，您将拥有一个指针数组。然后，这些指针中的每一个都将分别为其分配一个数组。

在这种情况下，您无法将循环转换为单个循环`memset`（并且仍然获得定义的行为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:00:15.833

我认为问题在于未分配给实际存储的内存。变量**a**只是指针（此外未初始化）。它指向什么地方？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T19:08:14.547

你说你是这样分配的：

```
a = new int*[m]; 
for(int i =0; i<m ;i++) a[i] = new int[n]; 
```

就像 Jerry Conffin 所说的那样——这不会给你一个单一的、连续的内存块。`new int[n]`每个新数组（通过循环使用 memset 的改进（memset 本身使用我认为使用循环实现）。

# node.js - grunt watch 任务阻塞命令行

> ID：15577905
> 
> 赞同：15
> 
> 时间：2013-03-22T18:57:24.910
> 
> 标签：node.js, command-line, cmd, watch, gruntjs

我是 grunt 的新手，还在学习，所以我遇到了一个非常奇怪的问题。当我运行`"watch"`任务时，我的命令行被阻塞，所以基本上我不能对它做任何事情。请记住，任务已成功完成。这是我的命令行输出：

```
C:\server\css-test>grunt w
Running "watch" task
Waiting...OK
>> File "compass-examples-master\02\sass\screen.scss" changed.

Running "compass" (compass) task
unchanged compass-examples-master/02/sass/ie.scss
unchanged compass-examples-master/02/sass/print.scss
overwrite compass-examples-master/02/stylesheets/new/sass/screen.css

Running "watch" task

Completed in 1.496s at Fri Mar 22 2013 19:31:37 GMT+0100 (Central Europe Standard Time) - Waiting... 
```

如您所见，我所做的就是运行`"compass"`任务，它成功完成。

插入点在`Waiting...`文本部分后一直闪烁，但键盘输入不起作用。

我的咕噜声配置

```
module.exports = function (grunt)
{

    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),
        compass: {
            dist: {
                options: {
                    sassDir: 'compass-examples-master/02',
                    cssDir: 'compass-examples-master/02/stylesheets/new',
                    imagesDir: 'compas-examples-master/02/images',
                    boring: false,
                    outputStyle: 'nested',
                    require: 'sass-media_query_combiner'
                }
            }
        },
        watch: {
            files: 'compass-examples-master/02/sass/*',
            tasks: ['c']
        }
    });

    grunt.loadNpmTasks('grunt-contrib-watch');
    grunt.loadNpmTasks('grunt-contrib-compass');

    grunt.registerTask('c', 'compass');
    grunt.registerTask('w', 'watch');

}; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T19:15:51.817

我没有使用过 grunt watch，但我认为问题在于它是一个持续运行的进程，默认情况下，您的命令行通常一次运行一个进程。您可以使用 3 种解决方案。

1.  打开一个新的终端。您可以一次打开多个，这将允许您将第二个用作主终端，而 grunt watch 占据另一个。
2.  在命令中使用 & 符号。这将开始该过程并立即将命令行返回给您，允许您将其用于其他事情。您可以将其视为在后台运行命令。该进程仍连接到终端窗口，因此如果关闭该窗口，该进程将结束。

    > 咕噜声

3.  在您的命令周围使用 (&)。这将与 & 一样在后台运行，但是当您关闭终端窗口时，该进程不会被终止。

    > （咕噜声）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-16T01:23:56.527

对于 Windows 使用

```
start grunt 
```

这将带来一个 CMD 窗口，该窗口将在后台“监视”，并使您正在使用的 git-bash 或 cmd 窗口与您离开时一样。

换句话说，这将为您在单独的 cmd 窗口中运行任务。

只是想让人们知道这在评论中有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-23T12:44:11.700

我发现通过同时按 Ctrl 和 c 来停止监视过程更简单。然后我可以使用命令行然后做一些事情，然后当我准备好返回浏览器时再次运行 grunt watch。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-15T20:24:18.573

除了@Nick 提出的仅限终端的解决方案外，最好有更好的集成节点解决方案。

这有来自 grunt-contib-watch [https://github.com/gruntjs/grunt-contrib-watch/issues/340](https://github.com/gruntjs/grunt-contrib-watch/issues/340)和 grung-bg-shell [https://github.com/rma4ok/grunt-bg-shell的 WONTFIX /问题/14](https://github.com/rma4ok/grunt-bg-shell/issues/14)。

建议的替代方案是：

*   [https://www.npmjs.org/package/grunt-forever](https://www.npmjs.org/package/grunt-forever)
*   [https://www.npmjs.org/package/grunt-nodemon](https://www.npmjs.org/package/grunt-nodemon)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T11:25:32.590

我使用屏幕[https://www.gnu.org/software/screen/](https://www.gnu.org/software/screen/)，所以我可以在终端窗口之间切换。

# java - J2ME 应用程序选择性地在某些手机上运行

> ID：15577906
> 
> 赞同：0
> 
> 时间：2013-03-22T18:57:25.353
> 
> 标签：java, encryption, java-me, des

我目前正在开发一个 j2me 应用程序。该应用程序加密（使用 DES）并将用户名和密码发送到服务器，然后服务器解密和验证提供的凭据。在诺基亚 E63 上进行了测试，它运行良好，但在我测试过的其他一些手机（如 Bold 5 和 LG C199）上无法运行。我尝试调试并发现程序在实例化负责加密的类时失败。有谁知道我该如何解决这个问题？无论如何我可以在不使用 javax.crypto.Cipher 类的情况下编写 DES 加密吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:58:55.857

其中一些手机的 jvm 可能没有该类，请尝试在您的应用程序中显式添加该类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:53:43.957

bouncycastle[轻量级](http://www.bouncycastle.org/latest_releases.html)加密 API 有一个[j2me 版本](http://www.bouncycastle.org/download/lcrypto-j2me-148.zip)。一定要阅读关于在你的 j2me 上运行混淆器的常见问题解答（我不知道关于 j2me 的深蹲，所以你必须填写空白）。

# c# - 如何在 .NET 中使用 IComparer 更改排序顺序

> ID：15577909
> 
> 赞同：0
> 
> 时间：2013-03-22T18:57:30.063
> 
> 标签：c#, sorting, icomparer

我敢肯定这很简单，但它让我很难过。我想简化地对我的字母进行排序，但将 Ds 放在 As 和 Bs 之间。我想我想要一个自定义的 IComparer 来做到这一点。

我将如何完成这个 IComparer 实现以传递我的断言？IComparer 文档说，如果 x < y，则返回小于 0，但是小于零有关系*吗*？抓着我的头。

```
private static void Main(string[] args)
{
    var letters = new List<string> { "A2", "E", "B1", "A1", "D", "C", "B2" };
    var sorted = new List<string> { "A1", "A2", "D", "B1", "B2", "C", "E" };

    letters.Sort(new MyComparer());

    Assert.IsTrue(letters.SequenceEqual(sorted));
}

/// <summary>
/// Sorts D between A and B
/// </summary>
private class MyComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        if (string.Equals(x, "D"))
        {
            // return what?
        }
        return string.CompareOrdinal(x, y);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:59:17.220

> 但比零小多少有关系吗

不，一点也不。

基本上，每次比较都必须从三个选项中给出一个结果：

*   第一个值小于第二个值
*   值相等
*   第一个值大于第二个值

因此，要使“D”介于“A”和“B”之间，您可以使用以下内容：

```
public int Compare(string x, string y)
{
    if (x == y)
    {
        return 0;
    }
    if (x == "D")
    {
        // Unless y is *actually* "B", we can just
        // pretend that x is "B". (So it will be after any "A", but before
        // any other "Bxyz".)
        if (y == "B")
        {
            return -1;
        }
        return "B".CompareTo(y);
    }
    // Ditto, basically. Alternatively you could call Compare(y, x)
    // and invert the result, but *don't* just negate it, as it does the
    // wrong thing with int.MinValue...
    if (x == "D")
    {
        if (x == "B")
        {
            return 1;
        }
        return x.CompareTo("B");
    }
    return x.CompareTo(y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:07:06.820

使用 Linq 修改排序顺序会更容易：

```
letters.OrderBy(x=>EvaluationFunction(x)); 
```

实际`EvaluationFunction`要根据你的实际业务需求进行排序。

你看的顺序对我来说没有多大意义，我猜不出规则（为什么“D”在那里？）但如果顺序是 A1、A2、B1、B2、C、D，乙

您的 EvaluationFunction 可以是：

```
string EvaluationFunction(string s){
    return  string.Format("{0,-3}", s); // pads s on the left with spaces, up to 3
} 
```

# ruby - Ruby 停止 Telnet 回显发送的命令

> ID：15577912
> 
> 赞同：0
> 
> 时间：2013-03-22T18:57:43.037
> 
> 标签：ruby, telnet

我想知道是否有一个选项可以抑制我通过 Ruby Telnet 库在远程机器上运行的命令。这是代码：

```
server = Net::Telnet::new("Host" => $hosts,
                          "Timeout" => 10,
                          "Prompt" => /[$%#>]/n)
server.login($user, $pass)
server.cmd("ls -1 /tmp/myfile.txt") do |c|
    puts c
end 
```

输出将是：

```
ls -1 /tmp/myfile.txt
/tmp/myfile.txt
$ 
```

其中 $ 是提示符。我只想查看返回的“/tmp/myfile.txt”。所以我不必过滤脚本中的返回来忽略原始命令和提示。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:07:01.627

如果它总是在最后输出一个 shell 提示，那么剥离最后一行输出呢？我不相信 NET::Telnet 内部有什么特别的东西可以防止这种情况发生。您也可以尝试使用[PTY 和 expect](http://www.42klines.com/2010/08/14/what-to-expect-from-the-ruby-expect-library.html)方法来处理 telnet。

# jobs - 自动系统作业错误

> ID：15577913
> 
> 赞同：0
> 
> 时间：2013-03-22T18:57:44.503
> 
> 标签：jobs, autosys

我们的服务器上已经有一组 autosys 作业，现在我们正在尝试设置一个新的 autosys 作业，但由于“所有者”字段的错误而无法成功。服务器上的旧/现有作业运行良好。但是对于新的，它不允许我们设置与现有所有者相同的所有者。以下是加载新作业时的错误。

```
CAUAJM_I_50204 Inserting/Updating Job: down_time_tracker
CAUAJM_W_10225 Only the CA Unicenter AutoSys JM EDIT superuser can set the owner.
CAUAJM_E_10302 Database Change WAS NOT successful. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:00:42.413

问题不在于“所有者”字段的值。问题是您无权设置“所有者”字段。

当您设置旧作业时，您是否以同一用户身份登录？自旧作业设置以来，有关 autosys 访问的政策是否发生了变化？

附带说明一下，您可能会在 Server Fault 上找到这些类型问题的更好答案。

# c# - 循环和字符串输出

> ID：15577923
> 
> 赞同：0
> 
> 时间：2013-03-22T18:58:13.897
> 
> 标签：c#, string, loops

嗨，我有以下代码：

```
static void CalcWordchange()
{
    List<string[]> l = new List<string[]>
        {
        new string[]{Question1, matcheditalian1},
        new string[]{"Sam", matcheditalian2},
        new string[]{"clozapine", matcheditalian3},
        new string[]{"flomax", matcheditalian4},
        new string[]{"toradol", matcheditalian5},
        };

    foreach (string[] a in l)
    {
        int cost = LevenshteinDistance.Compute(a[0], a[1]);
        errorString = String.Format("To change your input: \n {0} \n into the correct word: \n {1} \n you need to make: \n {2} changes \n ".Replace("\n",      Environment.NewLine),
            a[0],
            a[1],
            cost);
    }
} 
```

每次单击按钮时，foreach 循环中的文本都会运行并输出一个句子（列表中的最后一项）。我想要发生的是将所有 5 个项目输出到一个字符串中。

我添加了 4 个新变量（errorString2、3 等），但无法确定如何输出它。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:03:50.470

尝试使用一个`StringBuilder`对象来收集所有部分。

```
StringBuilder buildString = new StringBuilder();
foreach (string[] a in l)
{
    int cost = LevenshteinDistance.Compute(a[0], a[1]);
    buildString.AppendFormat("To change your input: \n {0} \n into the correct word: \n {1} \n you need to make: \n {2} changes \n ".Replace("\n",      Environment.NewLine),
        a[0],
        a[1],
        cost);
}
errorString = buildString.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:01:50.967

而是做这样的事情：

```
 string finalOuput = string.empty;
 foreach (string[] a in l)
 {
  int cost = levelshteinDstance.Compute(a[0], a[1]);
  finalOutput += string.Format("To change your input: \n {0} \n into the correct word: \n {1} \n you need to make: \n {2} changes \n ".Replace("\n",      Environment.NewLine),
            a[0],
            a[1],
            cost);
    }
} 
```

//在这里显示最终输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:04:16.657

创建一个`List<string>`来保存输出：

```
var OutputList = new List<string>();
foreach (string[] a in l)
{
    errorString = ...
    OutputList.Add(errorString);
}

// output
foreach (var s in OutputList)
{
    Console.WriteLine(s);
} 
```

或者你可以使用`StringBuilder`：

```
var outputS = new StringBuilder();
foreach (string[] a in l)
{
    errorstring = ...
    outputS.AppendLine(errorString);
}

Console.WriteLine(outputS.ToString()); 
```

# java - 使用 Java SDK 从空的 Azure ServiceBus 队列接收时接收非 Null 消息

> ID：15577926
> 
> 赞同：2
> 
> 时间：2013-03-22T18:58:16.413
> 
> 标签：java, azure, servicebus, azureservicebus, azure-servicebus-queues

使用 Java SDK (0.4.1) 从 SB 队列检索消息时，`ReceiveQueueMessageResult`即使相关队列为空，也会返回非空值。调用`getValue()`该结果返回一个非 null `BrokeredMessage`。我怎么知道我已经在一个空队列上调用了接收？显然，在分布式并发系统中查询大小不是一个选项。

我正在使用`ReceiveAndDelete`模式并且队列是新创建的，所以我知道它是空的。

根据文档，对 API 的底层调用应返回 204 的 StatusCode。我在返回的 Result 或 Message 中找不到访问该代码的任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:52:26.583

我们已经记录了这个问题，我们正在努力修复。顺便说一句，Windows Azure SDK for Java 是开源的，如果你愿意放弃微软的版权，你甚至可以提交自己的修复程序。源代码可以在[https://github.com/WindowsAzure/azure-sdk-for-java找到](https://github.com/WindowsAzure/azure-sdk-for-java)

# jquery - 编写 jQuery 代码

> ID：15577933
> 
> 赞同：-3
> 
> 时间：2013-03-22T18:58:33.230
> 
> 标签：jquery

我做错了什么。我想在一个字段中写入，然后由以下内容打开。如果我在一个字段中输入文本，然后其他字段正在打开但其他字段未打开，我想要它。请帮我

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script>

    $(document).ready(function() {
        $(function(){
            if($('#name' == '')){
                $('#version').attr( 'disabled', 'disabled' );
            }
            else {
                $('#version').removeAttr( 'disabled', 'disabled');  
            }
        }); 

        $(function(){
            if($('#name' !== '')){
                $('#version').attr( 'disabled', 'disabled' );
            }
            else {
                $('#version').removeAttr( 'disabled', 'disabled');  
            }
        });
    });
</script>
</head>
<body>
    <div>
        <form>
        Name: <input type="text" name="name" id="name">
        Version: <input type="text" name="version" id="version">
        Build: <input type="text" name="build" id="build">
        <input type="submit" value="Submit" id="submit"></br>
        <input type="text">
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:00:44.990

这是无效的：

```
if($('#name' == '')){
    $('#version').attr( 'disabled', 'disabled' );
} 
```

您可以改用它：

```
if($('#name' ).length){
    $('#version').attr( 'disabled', 'disabled' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:01:17.057

我看到一个明显的错误，要在 jquery 中选择一个元素，请使用`$('#ele')`

```
$(function(){
    if($('#name') == ''){
        $('#version').attr( 'disabled', 'disabled' );
    }
    else {
        $('#version').removeAttr( 'disabled', 'disabled');  
    }
});

$(function(){
    if($('#version') == ''){
        $('#build').attr( 'disabled', 'disabled' );
    }
    else {
        $('#build').removeAttr( 'disabled', 'disabled');    
    }
}); 
```

# mysql - Mysql 以不同的条件多次连接到一张表——它们去哪儿了？

> ID：15577937
> 
> 赞同：0
> 
> 时间：2013-03-22T18:58:45.307
> 
> 标签：mysql, sql, wordpress

我正在查询 wordpress 帖子表中的一些帖子，并通过多次加入 postmeta 表来获取多个元值。对于帖子列和元值，我也有许多条件。查询似乎有效，但我很好奇我是否将条件放在正确的位置。比较以下查询，哪个最有效/最有效地让我获得帖子 ID 及其相关元？

这个：

```
SELECT a.ID as `post_id`, b.meta_value as `metaval1`, c.meta_value as `metaval2`, d.meta_value as `metaval3`
FROM posts AS a
JOIN postmeta AS b ON (b.post_id = a.ID AND b.meta_key = 'metakey1')
LEFT JOIN postmeta as c ON (c.post_id = a.ID AND c.meta_key = 'metakey2')
LEFT JOIN postmeta as d ON (d.post_id = a.ID AND d.meta_key = 'metakey3')
WHERE
    b.meta_value != 10
    AND a.post_status = 'pending'
    AND a.post_date < '2013-03-07 00:00:00'
    AND a.post_type = "post"
ORDER BY a.post_date DESC
LIMIT 100; 
```

或者这个：

```
SELECT a.ID as `post_id`, b.meta_value as `metaval1`, c.meta_value as `metaval2`, d.meta_value as `metaval3`
FROM posts AS a
JOIN postmeta AS b ON (b.post_id = a.ID)
LEFT JOIN postmeta as c ON (c.post_id = a.ID)
LEFT JOIN postmeta as d ON (d.post_id = a.ID)
WHERE
    b.meta_key = 'metakey1'
    AND b.meta_value != 10
    AND c.meta_key = 'metakey2'
    AND d.meta_key = 'metakey3'
    AND a.post_status = 'pending'
    AND a.post_date < '2013-03-07 00:00:00'
    AND a.post_type = "post"
ORDER BY a.post_date DESC
LIMIT 100; 
```

任何意见，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:15:44.393

您的两个查询之间存在差异。

第一个查询将返回帖子的值，而不管匹配的元键值的数量（至少对于“b”值不是 10 的帖子）。您正在`on`子句中进行比较，因此`left join`处理结果。

第二个查询将仅在所有三个键都存在时返回值。比较在`where`子句中，所以由 生成的不匹配的行将`left join`被过滤掉。

您喜欢哪个取决于您想要的结果。两者都应该花费大约相同的计算量。

如果你想要效率，你还应该尝试：

```
SELECT p.id,
       max(case when pm.meta_key = 'metakey1' then pm.meta_value end) as metavalue1,
       max(case when pm.meta_key = 'metakey2' then pm.meta_value end) as metavalue2,
       max(case when pm.meta_key = 'metakey3' then pm.meta_value end) as metavalue3
FROM posts p join
     postmeta pm
     on pm.post_id = p.ID
WHERE pm.meta_key in ('metakey1', 'metakey2', 'metakey3') and
      (pm.meta_key <> 'metakey1' or pm.meta_value != 10) and
      p.post_status = 'pending' and
      p.post_date < '2013-03-07 00:00:00' and
      p.post_type = 'post'
group by p.post_date, p.id
ORDER BY p.post_date DESC
LIMIT 100; 
```

这限制了连接的数量，使用聚合将结果放在一起。您的原始查询必须扫描结果以执行`order by`- 聚合应该是大约相同数量的工作，但连接更少。

# python - 如何使箭头更薄matplotlib

> ID：15577941
> 
> 赞同：10
> 
> 时间：2013-03-22T18:58:55.373
> 
> 标签：python, matplotlib

我在下面绘制了一个箭头，虽然我认为它有点大。我怎样才能使它更薄更小？谢谢

```
for i in range(len(x)):
    plt.annotate(df.index[i],xy=(x[i],y[i]),xytext=(x[i]+1.31,y[i]-0.55),arrowprops=dict(facecolor='blue', shrink=0.1)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T20:15:48.137

您应该尝试调整`width`参数（来自[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate)）

```
plt.annotate(df.index[i], 
    xy=(x[i],y[i]), xytext=(x[i]+1.31,y[i]-0.55),
    arrowprops=dict(facecolor='blue', shrink=0.1, width=2)
) 
```

我已经调整了您的代码段以使参数更加明显。另请注意，这`width`是以点为单位的，因此您可能需要尝试一些不同的值。其他值得关注的值是`frac`. `headwidth`和`shrink`（[也在文档中](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate)），特别是如果你想让头部也变小！

# regex - 为什么我的正则表达式中出现“替换替换未终止”来替换 C 样式注释？

> ID：15577944
> 
> 赞同：12
> 
> 时间：2013-03-22T18:58:59.213
> 
> 标签：regex, perl

试图删除 C 风格的注释及其分隔符。看起来很简单，但我在旋转轮子。这就是我正在尝试的：

`$code =~ s/\/\*.+\*\//g;`

但是，我得到的错误是：

`Substitution replacement not terminated`

该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T19:02:29.970

替换替换采用以下形式：

`s/FIND/REPLACE/FLAGS`

请注意，分隔符可以是许多字符中的任何一个。因此，在处理包含斜杠的模式时，通常最好使用不同的分隔符，例如`#`.

您在此处的替换替换缺少替换部分。如果我们使用`#`而不是`/`作为分隔符，这可能会更清楚：

`$code =~ s#\/\*.+\*\/#g;`

您可能打算使用的是：

`$code =~ s/\/\*.+\*\///g;`

或者为了清楚起见，

`$code =~ s#/\*.+\*/##g;`

请注意，由于`#`它被用作分隔符，因此不再需要转义`/`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:04:07.600

你的意思是写`$code =~ s/\/\*.+\*\///g;`

您不必在图案中使用倾斜的牙签：

```
$code =~ s{ /[*] .+ [*]/ }{}gx; 
```

虽然，您可能会意识到这并不能很好地处理所有可能性。为此，请参阅[如何使用 Perl 从文件中删除多行 C 注释？](https://stackoverflow.com/a/911583/100754)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:14:21.003

# vbscript - 查找最近的文件夹，将文件复制到目标文件夹

> ID：15577945
> 
> 赞同：0
> 
> 时间：2013-03-22T18:59:09.777
> 
> 标签：vbscript

我正在寻找一种方法来查找最新的文件夹，将其中的文件复制到目标文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:45:18.510

我看到您在将文件夹作为参数传递时遇到了一些困难。Ansgar Wiechers 的示例展示了如何使用硬编码值来做到这一点。为了简单起见，我们通常在回答中这样做。

```
rootFolder = "C:\root"    'target folder (where to search)
dstFolder  = "C:\dst"     'destionation (where to copy) 
```

但是，如果您更喜欢动态地传递它们...

```
CScript my_task.vbs C:\root C:\dst 
```

...然后将其包含在 .vbs 文件的开头：

```
With WScript.Arguments
    If .Count < 2 Then WScript.Quit(-1)
    rootFolder = .Item(0)
    dstFolder  = .Item(1)
End With 
```

接下来，通过阅读您的评论，在我看来，您只需要直接子文件夹，如果是这样，因为在批处理脚本方面不太好，我会做这样的事情：

```
tmpFile    = "result.txt" 'temp file
With CreateObject("WScript.Shell")
    .CurrentDirectory = rootFolder
    .Run "CMD /C DIR /A:D /B /O:-D /T:C > " & tmpFile, 0, True
    With CreateObject("Scripting.FileSystemObject")
        With .OpenTextFile(tmpFile)
            mostRecent = .ReadLine
        End With
        .GetFile(tmpFile).Delete
    End With
    .CurrentDirectory = mostRecent
    .Run "CMD /C COPY *.* " & dstFolder, 0, False
End With 
```

使用的 DIR 开关：

```
/A:D  = attributes Directory
/B    = bare format
/O:-D = order by date/time (newly first)
/O:D  = order by date/time (oldest first)
/T:C  = sort by Creation
/T:A  = sort by Last Access
/T:W  = sort by Last Written 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:20:25.313

尝试这个：

```
rootFolder = "C:\root"
dstFolder  = "C:\dst"

Set fso = CreateObject("Scripting.FileSystemObject")

Set mostRecent = FindMostRecent(fso.GetFolder(rootFolder))
For Each f In mostRecent.Files
  f.Copy fso.BuildPath(dstFolder, f.Name)
Next

Function FindMostRecent(fldr)
  Set mrf = fldr
  For Each sf In fldr.SubFolders
    Set mrsf = FindMostRecent(sf)
    If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
  Next
  Set FindMostRecent = mrf
End Function 
```

# c# - 在 C# 中对值类型使用“Equals”似乎不是一个好主意，是吗？

> ID：15577946
> 
> 赞同：4
> 
> 时间：2013-03-22T18:59:10.297
> 
> 标签：c#, equality, value-type

我认为值类型（结构）中“Equals”的默认行为是使用反射来比较两个值的内容，因此如果性能很重要，建议覆盖 Equals 运算符以提高效率。

但似乎 Equals 的签名是：

```
public override bool Equals( object ob ) 
```

这意味着即使我将覆盖此方法，当我比较值类型时，我仍然会有装箱，因为参数必须是“对象”类型。

我对么 ？拳击会发生吗？我应该只对值类型使用 == 运算符吗？

编辑：还有一个小问题，为什么当我覆盖==时它应该是静态的并获得2个参数，而不是更直观的非静态形式并将“this”与一个参数进行比较？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:01:02.197

除了覆盖`Object.Equals()`你应该实现`IEquatable<T>`，`T`你的类型本身在哪里。 `IEquatable<T>.Equals()`接受类型的参数`T`。

如果您隐式实现接口（为什么不实现？），那么`T`将尽可能使用接受 -typed 参数的更具体的方法，在这种情况下不会发生装箱。（如果您重载`Equals()`并且不实现接口，这是正确的，但在这种情况下没有理由不实现接口。）

这是我在实现值类型相等时通常使用的模式：

```
struct Foo : IEquatable<Foo>
{
    public bool Equals(Foo other)
    {
        // Do your equality test here.
        throw new NotImplementedException();
    }

    public override bool Equals(object other)
    {
        if (other != null && other is Foo) {
            return Equals((Foo)other);
        }

        return false;
    }

    // If you also want to overload the equality operator:
    public static bool operator==(Foo a, Foo b)
    {
        return a.Equals(b);
    }

    public static bool operator!=(Foo a, Foo b)
    {
        return !a.Equals(b);
    }
} 
```

当然，也不要忘记覆盖`Object.GetHashCode()`。

* * *

请注意，使用该`Equals(object)`方法时，只有参数被装箱。您正在调用的对象*不会*被装箱，除非您`object`先将其转换为（或接口类型）。`ldloca`将为您调用的对象发出、`ldflda`或指令之一`ldsflda`（视情况而定），而另一个将被装箱（在没有更具体的重载的情况下）。

# php - 转义shellcmd警告

> ID：15577949
> 
> 赞同：5
> 
> 时间：2013-03-22T18:59:24.437
> 
> 标签：php, security

在 php 文档页面中`escapeshellcmd`有一个警告：

> **escapeshellcmd() 应该用于整个命令字符串**，它仍然允许攻击者传递任意数量的参数。对于转义**单个参数**，应使用 escapeshellarg()。

我要从中理解什么：

1.  我是否应该总是使用 escapeshellcmd 转义整个命令字符串，包括已经用 escpaeshellarg 转义的参数？
2.  我是否应该只转义不是参数的命令项（如果你问我，这是唯一合乎逻辑的事情）？
3.  我是否应该忽略这个可疑的警告，它会对这两个函数如何相互补充产生更多的困惑？

谢谢你，科斯敏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T02:57:00.197

简而言之

*   **escapeshellarg：**用于将参数用单引号括起来，并转义参数中的引号。
*   **escapeshellcmd：**用于转义shell元字符，即<,>,| ETC

假设你的 php 版本依赖 bash 来执行命令，我们从[bash 手册](http://linux.die.net/man/1/bash)中知道，

> 将字符括在单引号中会保留引号内每个字符的字面值。单引号之间不能出现单引号，即使前面有反斜杠。

因此，我们可以得出结论，以下创建命令的方式应该足够了：

```
$c = escapeshellcmd( $cmd ) . ' ' . escapeshellarg( $arg1 ); 
```

但是，如果您需要将 $c 传递给以下函数之一，这可能会给您带来问题：exec、system、passthru 等。经验分析表明，这些函数可以评估某些字符。作为一个例子试试这个：

```
$cmd = 'echo';
$arg = 'TEST\0ING'; // Since we are using single quotes, \0 shouldn't be evaluated as a null byte char
$c = escapeshellcmd( $cmd ) . ' ' . escapeshellarg( $arg1 ); // echo 'TEST\0ING'
exec( $c . ' > output.txt'); // writes TEST without the ING to output.txt 
```

exec 函数将 '\0' 评估为空字节字符，因此 output.txt 将只包含直到 '\0' 的数据。这已经在运行 PHP 5.4.6 的 Ubuntu 上进行了测试。在我看来，这是一个错误，因为数据的字面意思丢失了。因此，在完整字符串上使用 escapeshellcmd 相对更安全，因为它还转义了作为 shell 元字符的反斜杠 '\'：

```
$c = escapeshellcmd( $cmd . ' ' . escapeshellarg( $arg1 ) );
exec( $c . ' > output.txt'); // writes TEST\0ING to output.txt 
```

这种方法的缺点是其他元字符也将被转义，并且必须被传递参数的程序（$cmd）转义。

请注意，我们没有在完整的命令字符串上使用 escapeshellcmd。我们省略了“> output.txt”部分，这样“>”就不会被转义。

**结论：**

*   尽量避免将字符串作为命令行参数传递。相反，将数据写入文件并从文件中读取。通过这种方式，您可以确保传递的数据保持不变。

*   如果您绝对需要将字符串作为命令行参数传递，请始终确保它们是字母数字的。

*   如果您绝对需要将字符串作为命令行参数传递，则对完整字符串使用 escapeshellcmd 相对更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:16:07.997

所以我认为`escapeshellcmd`可以防止运行多个命令。

> escapeshellcmd() 转义字符串中可能用来欺骗 shell 命令执行任意命令的任何字符。

`escapeshellarg`是确保用户提供的参数只是一个参数。

> escapeshellarg() 在字符串周围添加单引号并引用/转义任何现有的单引号，允许您将字符串直接传递给 shell 函数并将其视为单个安全参数。

所以本质上，如果你（你的程序）正在定义命令，你应该只需要`escapeshellarg`在每个用户提供的参数上使用，但是如果用户指定命令（除非你设置了真正可靠的服务器权限，否则这已经很不确定了）和论据。

免责声明：这只是我对文档的解释。

编辑：

我同意这里的文档非常混乱。我认为警告暗示将其包裹在整个命令中不会阻止用户使用类似这样的参数

`actualArg -someEvilFlag`

或者

```
actualArg -someEvilFlag evilFlagArgument 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:02:01.917

我会参考[什么是 escapeshellarg 和 escapeshellcmd 之间的区别？](https://stackoverflow.com/questions/1881582/php-whats-the-difference-between-escapeshellarg-and-escapeshellcmd)其中详细介绍了每个进一步的优点。

我想跟进，我会说接受这个用户输入并仅使用 escapshellcmd 将其扔到 shell 可能无论如何都会以糟糕的方式结束。我将专注于清理和输入验证，并将上述功能用作此代码安全过程的“最后一部分”。

# c# - if-then 语句逻辑有问题

> ID：15577952
> 
> 赞同：2
> 
> 时间：2013-03-22T18:59:45.567
> 
> 标签：c#, if-statement

我对 c# 有点陌生，我在试图围绕我试图实现的这个 if-then 语句时遇到了一些麻烦。

这是我的目标：当用户在系统中输入订单时，会为每个订单创建一个唯一的 orderID。然而，一些额外的功能是用户可以选择项目的数量，然后使用相同的 orderID 为每个项目创建一个新行。每个项目都有一个唯一的密钥。这给你这个：

```
 ORDERID     KEY     ItemCode

 ORD123      758        2
 ORD123      584        2
 ORD123      582        2 
```

我遇到的问题是 ORDER ID 必须是唯一的**，除非**订单中有多个项目（如上所示为每个订单创建多行）。

什么适用于我当前的代码：单项订单 ID，与其他单项订单 ID 进行检查

```
 Existing Order : ORD111
 Attempt to Enter new order of : ORD111
 **Sorry OrderID already exists** 
```

单项订单 ID 与多个项目订单 ID 进行核对，

```
 Existing Order : ORD222
                  ORD222
                  ORD222
 Attempt to enter new order of : ORD222
 **Sorry OrderID already exists** 
```

但是，当我输入多个项目的订单 ID 时，

```
 Existing Order : ORD333
                  ORD333
                  ORD333
 Attempt to enter new order of ORD333
                               ORD333
                               ORD333
 **Order Successfully Entered** 
```

这是我检查订单 ID 的代码

```
 private bool isOrderIDUnique()
 {
     string OrderID = txtOrderID.Text;
     string ItemAmount = txtItemAmount.Text;
     int items = Convert.ToInt32(ItemAmount);
     string select = getSelectString("COUNT(*)", strings.settings.AccessTable,  "ORDERID = '" + OrderID + "'");
     int count = CountOrderID(select);
     if (count == 0)
     {
         return true;
     }
     if (count >= 1 && items > 1)
     {
         return true;
     }
     else
     {
         return false;
     } 
```

如果有人可以帮助我解决这个问题，我将不胜感激！我的 IF 声明中遗漏了哪一部分？如何根据组检查组？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:09:52.340

我建议重新设计表格：

```
OrdersTable
OrderID User
1       Joe 
```

`OrderID`代理主键在哪里

```
OrderDetailsTable
OrderID Key ItemCode
1       XXX 1
1       XXX 2 
```

然后，您只需要检查订单是否存在，而不是计数匹配。看来您正在使这变得比您自己和您的用户需要的更复杂。

# css - 使用 Google Maps API 将 CSS 阴影添加到标记

> ID：15577958
> 
> 赞同：1
> 
> 时间：2013-03-22T19:00:02.770
> 
> 标签：css, google-maps-api-3, google-maps-markers, shadow

使用 Google Maps API（版本 3），您可以使用自定义图像在地图上添加标记对象。我正在使用它在交互式地图上放置我的照片的缩略图。我可以使用 PHP 脚本缩放我自己的照片，因此它们可以通过 URL 以合适的尺寸提供。但 Maps API 不支持在元素上添加 CSS 阴影。事实上，它不支持任何 CSS，因为它只在画布元素中呈现其内容。

现在我想我有两个选项可以在缩略图下获得阴影：

1.  编写一个可以生成此类阴影图像的 PHP 脚本。它们需要是具有 alpha 透明度的 PNG 图像。不确定PHP是否支持这一点。我可以使用模板并将其角和边缘复制到所需大小的目标图像，或者我可以自己计算高斯模糊并生成可能需要更长时间的每个像素。

2.  或者以某种方式改变 Maps API 的使用来获得一个可以应用任何 CSS 效果的真实 DOM 元素。

哪个最容易？有人可以为其中任何一个提供解决方案吗？现在，两者似乎同样过于复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:10:59.287

一种选择是在标记上使用[optimize:false markerOption](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)。标记不会在 CANVAS 中呈现，但您必须确定性能是否适合您的应用程序。

> 优化 | 布尔值 | 优化将许多标记呈现为单个静态元素。默认情况下启用优化渲染。禁用动画 GIF 或 PNG 的优化呈现，或者当每个标记必须呈现为单独的 DOM 元素时（仅限高级用法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-08T09:56:33.120

正如@geocodezip 指出的那样，您应该使用`optimized : false`markerOption 来让Google Maps 将它们呈现为HTML，而不是使用Canvas。

要解决 LonelyPixels 关于如何设置样式的问题，您可以这样做：

```
img[src="/content/maps/spotlight-poi-red.png"] {
    background: red;
} 
```

您可以为不同的图像指定不同的样式，然后每当谷歌地图使用该图像作为标记（您可以在其他地方设置此图像）时，您都可以更改其样式。

我个人让 Google Maps 渲染一个透明的 png，然后使用 CSS 来完全设置标记的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T11:33:34.013

[https://developers.google.com/maps/documentation/javascript/markers](https://developers.google.com/maps/documentation/javascript/markers)

注意：标记阴影在 3.14 版的 Google Maps JavaScript API 中被移除。任何以编程方式指定的阴影都将被忽略。

# python - 无法访问 mod_wsgi 托管的 python (bottle.py) 应用程序

> ID：15577965
> 
> 赞同：1
> 
> 时间：2013-03-22T19:00:17.360
> 
> 标签：python, apache, mod-wsgi, bottle

## 这是我的问题：

我编写了一个 bottle.py 应用程序并在我的电脑上使用内部的 bottle.py 网络服务器运行它。现在我想将我的应用程序上传到我的服务器，并想用 apache2 + mod_wsgi 在那里运行它我创建了以下文件：

/etc/apache2/sites-enabled/ **000-default**

```
...  

WSGIDaemonProcess web user=www-data group=www-data processes=1 threads=5
WSGIScriptAlias /dem /var/www/vhosts/test.de/rbdemo/app.wsgi
WSGIProcessGroup web

<Directory /var/www/vhosts/test.de/rbdemo>
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory> 
```

/var/www/vhosts/test.de/rbdemo/app.wsgi **_**

```
import sys, os

sys.path = ['/var/www/vhosts/test.de/rbdemo'] + sys.path
os.chdir(os.path.dirname(__file__))

from web import default_app # This loads your application

application = default_app() 
```

在我的应用程序中：

/var/www/vhosts/test.de/rbdemo/web.py **_**

```
from bottle import TEMPLATE_PATH, request, redirect, route, hook, run, default_app, jinja2_template as template, static_file

...

if __name__ == '__main__':
    run(reloader=True) 
```

## 阿帕奇日志

```
Fatal Python error: PyEval_AcquireThread: NULL new thread state
[Wed Mar 27 17:26:47 2013] [notice] child pid 10124 exit signal Aborted (6)
Fatal Python error: PyEval_AcquireThread: NULL new thread state
[Wed Mar 27 17:29:13 2013] [notice] child pid 18003 exit signal Aborted (6)
Fatal Python error: PyEval_AcquireThread: NULL new thread state
[Wed Mar 27 17:30:47 2013] [notice] child pid 10126 exit signal Aborted (6)
Fatal Python error: PyEval_AcquireThread: NULL new thread state
[Wed Mar 27 17:32:32 2013] [notice] child pid 21774 exit signal Aborted (6)
Fatal Python error: PyEval_AcquireThread: NULL new thread state
[Wed Mar 27 17:32:37 2013] [notice] child pid 21779 exit signal Aborted (6)
[Wed Mar 27 17:59:17 2013] [error] [client 118.139.160.196] client sent HTTP/1.1 request without hostname (see RFC2616 section 14.23): /w00tw00t.at.ISC.SANS.DFind:) 
```

但是，如果我想访问我的应用程序（demo.test.de），我会收到 403 Forbidden Error...

有任何想法吗 ？

谢谢你。

# ruby-on-rails - 带有帖子请求的友好转发

> ID：15577968
> 
> 赞同：0
> 
> 时间：2013-03-22T19:00:40.333
> 
> 标签：ruby-on-rails, redirect, ruby-on-rails-4

我为我的应用程序编写了一个友好的转发功能，但它在发布请求时失败了。场景如下：

1.  用户尝试访问受保护的页面
2.  应用程序存储 url 并重定向到登录页面
3.  用户登录和应用程序重定向到存储的 url

session_helper.rb

```
def store_location
  session[:return_to] = request.url
end
def redirect_back_or(default)
  redirect_to(session[:return_to] || default)
  session.delete(:return_to)
end 
```

application_controller.rb

```
def require_login
  unless !signed_in?
    store_location
    redirect_to signin_path
  end
end 
```

session_controller.rb

```
def create
  ..
  sign_in user
  redirect_back_or root_path
  ..
end 
```

这工作正常，直到你`POST`提出请求。

1.  用户访问`posts#new`并提交表单
2.  应用程序存储 url 并重定向到登录页面
3.  用户登录并且应用程序重定向到存储的 url，**但失败**

`AbstractController::ActionNotFound at /forums/7/posts`

`The action 'index' could not be found for PostsController`

```
unless action_name = method_for_action(action_name)
  raise ActionNotFound, "The action '#{action}' could not be found for #{self.class.name}"
end 
```

知道如何解决这个问题吗？

# jquery - 带有 append() 的 jQuery slideDown()：最外层 工作正常，但内部内容不行

> ID：15577982
> 
> 赞同：0
> 
> 时间：2013-03-22T19:01:13.947
> 
> 标签：jquery, html

我正在尝试`append()`和`slideDown()`一个 div （据说）环绕几个元素。我想`<div>` *连同*它的内容一起滑下来。但就我所拥有的而言，只有`<div>`我想要的幻灯片（这就是为什么我在它周围放了一个实心边框）

这是代码：

**jQuery**

```
$(document).ready(function() {
$('#check').click(function() {
        $("body").append('<div class="mydiv" style="border-style:solid;overflow:auto;height:700px"><b><label style="position: absolute; left: 476px; font-size: 22px; top: 250px;">Order Information</label><div class="detailz">Name<br><br>E-mail<br><br><br>Shipping address<br><br><br><br>State<br><br>Phone<br><br>Credit/Debit Card No.</div><form name="orderdetails" action="www.google.com" method="post"><p><span class="detailz"><input name="name" style="position: absolute; left: 271px; top: 15px; width: 229px; height: 28px;" type="text"></span><span class="detailz"><input name="email" type="text" style="position: absolute; left: 273px; top: 70px; width: 229px; height: 27px;"></span></p><p><span class="detailz"><textarea name="address" cols="" rows="" id="add" style="position: absolute; resize: none; left: 273px; top: 139px; width: 244px; height: 103px;"></textarea><select name="state" style="position: absolute; left: 276px; top: 271px; width: 233px;"><option>Andaman and Nicobar</option><option>Andhra Pradesh</option><option>Assam</option><option>Bihar</option><option>Chandigarh</option><option>Delhi</option><option>Goa</option><option>Haryana</option><option>Jammu and Kashmir</option><option>Kerala</option><option>Maharashtra</option><option>Punjab</option><option>Tamil Nadu</option><option>West Bengal</option></select><input name="phone" type="text" style="position: absolute; left: 272px; top: 323px; width: 240px; height: 27px;" maxlength="10"><input name="card" type="text" style="position: absolute; left: 274px; top: 375px; width: 235px; height: 30px;" maxlength="16"></span></p></div>');

    $("body").find(".mydiv:last").hide().slideDown("slow");
});
}); 
```

在这种情况下，[这个 JSFiddle](http://jsfiddle.net/FmDtj/)最有利于理解我想要什么：

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:08:30.543

试试这个：

[http://jsfiddle.net/FmDtj/3](http://jsfiddle.net/FmDtj/3)

```
.mydiv {position: relative;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:07:16.020

当您将滑动 div 的元素绝对定位时，幻灯片不会将它们识别为 div 的元素部分。

在没有绝对定位的情况下构建滑动 div 的内容，它将起作用。

# node.js - 会话存储不存储数据

> ID：15577985
> 
> 赞同：1
> 
> 时间：2013-03-22T19:01:24.817
> 
> 标签：node.js, session, express

所以，我正在开发 REST API，我正在使用 express、mongojs、connect-mongo。而且我无法弄清楚如何在会话中存储数据：

```
var express = require('express'),
mongojs = require("mongojs"), 
MongoStore = require('connect-mongo')(express);
GLOBAL.db = mongojs.connect(databaseUrl, collections);   
app.configure(function () {
        app.use(express.bodyParser());
        app.use(express.cookieParser());
        app.use(express.session({
            key: 'express.sid',
            secret: 'secret',
            maxAge: new Date(Date.now() + 3600000),
            store: new MongoStore({ db: databaseUrl, collection: 'sessions' })
        }));
        app.use(app.router);
        app.use(express.logger('dev')); /* 'default', 'short', 'tiny', 'dev' */
     }); 
```

用户尝试使用以下方式登录：

```
curl -X POST http://localhost:2048/auth  -d @./sampleData/authUser.json -H "Content-Type: application/json" --cookie myCookie.txt 
```

当用户成功登录时，我会：

```
req.session.user = {}
req.session.user.id = currentUser._id.toString()
req.session.user.userame = currentUser.username
req.session.user.firstName = currentUser.firstName
req.session.user.lastName = currentUser.lastName
req.session.user.title = currentUser.title
req.session.user.location = currentUser.location
res.send(500) 
```

但是当我发送下一个请求时

```
 curl -X GET http://localhost:2048/projects --cookie myCookie.txt 
```

`req.session`没有我分配的用户。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:37:44.613

好的，问题是我没有那里提到的环境。将第 5 行更改为：

```
app.configure('development', function () { 
```

在那之后，一切都是彩虹和蝴蝶。

# php - 如果值不为空，如何更新mysql中的值

> ID：15577987
> 
> 赞同：0
> 
> 时间：2013-03-22T19:01:28.893
> 
> 标签：php, mysql, database

我有一个登录表，该表有两个属性，userId 和 loginDate 我想要做的是当用户登录我的网站时向他显示他的最后登录日期

如果这是用户第一次登录，这意味着 loginDate 值为空，我只想插入当前日期，如果用户在我想更新日期之前已经登录。我该怎么做？到目前为止，我现在有这个

```
 //..
  $userId = $_POST['the_user'];
  $query = "SELECT * 
            FROM login";
            $result = mysqli_query($db, $query); //we make the query

     if(empty($row[1]){  // THIS IS WHERE I INSERT A DATE IF THIS IS THE FIRST
                             // TIME A USER LOGS IN 
        $query = "INSERT INTO login(userId,loginDate)
                    VALUES ('$userId',CURDATE())";
        $result = mysqli_query($db, $query); //we make the query
      }
          else if{ // THIS IS WHERE I WOULD DO MY UPDATE 

          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:03:33.713

像这样的东西...

```
INSERT INTO login (userId, loginDate) VALUES ('$userId', CURDATE())
  ON DUPLICATE KEY UPDATE loginDate = CURDATE() 
```

[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

您还需要使用绑定参数来防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T20:08:35.883

```
COALESCE 
```

是解决方案。它类似于 Oracle 的 NVL。您可以使用参数在准备好的语句中使用它，如下所示

```
UPDATE
    tbl_cccustomerinfo
SET
    customerAddress = COALESCE(?,customerAddress),
    customerName =  COALESCE(?,customerName),
    description =  COALESCE(?,description)
WHERE
    contactNumber=? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:05:18.527

像这样的东西？在不改变你已经做过的事情的情况下

```
else {
    mysqli_query($db, "update login set loginDate = curdate() where userId = '$userId'");
} 
```

顺便说一句，为了保护自己免受 SQL 注入攻击，您*确实*应该使用准备好的语句而不是字符串中的变量插值。

# python - 如何在 Python 特定文件类型中将文件读入字典

> ID：15577990
> 
> 赞同：1
> 
> 时间：2013-03-22T19:01:47.857
> 
> 标签：python, dictionary, while-loop

具体来说，我有一个包含多行排列的文本文件，以便每个条目的键是组的第一行，然后是其相关值，然后是下一个键之前的换行符。我很难使用 while 循环来通过 readline 完成此操作。

例如，第一行可能是餐厅名称，然后是几行在那里用餐的顾客，然后我需要将其写入到餐厅名称键下的字典的值中。

我对文件阅读真的不熟悉，所以我担心我所拥有的根本不会有帮助。

我猜是这样的，但它甚至还没有到半功能的地步。

编辑：感谢您的回复，我应该澄清一下，对应键的每个值项都列在键之后的后续行中，该列表末尾的空行位于下一个键之前。此外，不幸的是，我不得不在这里使用 readline 方法。

```
 restaurants = {}
    patrons = []

    line = file.readline()
    s = line.strip('\n')

    while s != ''
    restaurant = s
    line = file.readline
    patrons.append(s) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T19:32:30.550

假设您的文本文件看起来像这样

> 麦当劳比尔鲍勃

按照

> 我有一个包含多行排列的文本文件，以便每个条目的键是组的第一行，然后是其相关值，然后是换行符

```
my_dict = {}

with open("rest.txt", 'r') as f:
    for line in f:
        items = line.split()
        key, values = items[0], items[1:]
        my_dict[key] = values

print my_dict 
```

这将产生

```
{'mcdonalds': ['bill', 'bo', 'bob']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:28:37.603

编辑：根据新问题规范修改。

```
with open("filename") as f:
    lines = f.readlines()
restaurants = {}
current_key = None
for line in lines:
    line = line.strip()
    if not line:
        current_key = None
    elif not current_key:
        current_key = line
        restaurants[current_key] = []
    else:
        restaurants[current_key].append(line) 
```

`readlines()`如果，正如你所说，由于某种原因你真的不能在这里使用，只需将`for`循环重写为一次`while`读取一行直到 EOF 的循环。

# javascript - 如何在javascript togle中添加速度效果

> ID：15577995
> 
> 赞同：0
> 
> 时间：2013-03-22T19:02:00.397
> 
> 标签：javascript, button, slidetoggle

我资助了一个完美运行的切换效果，但我想添加一个速度效果来减慢它的速度。

```
<script language="javascript" type="text/javascript">
    // <![CDATA[
    function toggle() {
        var ele = document.getElementById("toggleText");
        var text = document.getElementById("displayText");
        if (ele.style.display == "block") {
            ele.style.display = "none";
            text.innerHTML = "voir";
        } else {
            ele.style.display = "block";
            text.innerHTML = "fermer";
        }
    }
        // ]]>

    </script>

        <p><a id="displayText" href="javascript:toggle();" >voir</a> &lt;= click</p>
        <div id="toggleText" style="display: none;">
            <p>Yes!</p>
        </div> 
```

知道如何在其上插入速度值吗？可能是这段或另一段代码，（我不介意，就它的工作而言！）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:04:11.320

使用 jQuery-UI 切换，除其他外具有速度：

[http://api.jqueryui.com/toggle/](http://api.jqueryui.com/toggle/)