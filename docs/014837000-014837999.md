# StackOverflow 问答 14837000-14837999

# asp.net - Componentart tabstrip 只渲染第一个选项卡

> ID：14837007
> 
> 赞同：0
> 
> 时间：2013-02-12T16:22:42.837
> 
> 标签：asp.net, ajax, componentart

我有一个 ComponentArt 标签条。我们公司最近将所有用户迁移到 IE8。出于某种原因，在某些页面上，tabstrip 现在只显示第一个选项卡。但在其他人身上，它表现得很好。tabstrip 的代码在所有页面中几乎都是相同的，保存了标签名称等内容。这是仅呈现第一个选项卡的页面的示例：

```
<ComponentArt:TabStrip ID="tsAdmin" runat="server" MultiPageId="EditUsers" CssClass="TopTabs"
                  DefaultItemLookId="DefaultTabLook"
                  DefaultSelectedItemLookId="SelectedTabLook"
                  DefaultDisabledItemLookId="DisabledTabLook"
                  DefaultGroupTabSpacing="1"
                  ImagesBaseUrl="tabstrip"
                  ScrollingEnabled="false"
                  ScrollLeftLookId="ScrollItem"
                  ScrollRightLookId="ScrollItem"
                  Width="100%" >
                <Tabs>
                    <ComponentArt:TabStripTab runat="server" ID="tab0" Text="Tab 1"></ComponentArt:TabStripTab>
                    <ComponentArt:TabStripTab runat="server" ID="tab1" Text="Tab 2"></ComponentArt:TabStripTab>
                    <ComponentArt:TabStripTab runat="server" ID="tab2" Text="Tab 3"></ComponentArt:TabStripTab>
                    <ComponentArt:TabStripTab runat="server" ID="tab3" Text="Tab 4"></ComponentArt:TabStripTab>
                </Tabs>
                <ItemLooks>
                <ComponentArt:ItemLook LookId="DefaultTabLook" CssClass="DefaultTab" HoverCssClass="DefaultTabHover" LabelPaddingLeft="10" LabelPaddingRight="10" LabelPaddingTop="5" LabelPaddingBottom="4" LeftIconUrl="tab_left_icon.gif" RightIconUrl="tab_right_icon.gif" HoverLeftIconUrl="hover_tab_left_icon.gif" HoverRightIconUrl="hover_tab_right_icon.gif" LeftIconWidth="3" LeftIconHeight="21" RightIconWidth="3" RightIconHeight="21" />
                  <ComponentArt:ItemLook LookId="SelectedTabLook" CssClass="SelectedTab" LabelPaddingLeft="10" LabelPaddingRight="10" LabelPaddingTop="4" LabelPaddingBottom="4" LeftIconUrl="selected_tab_left_icon.gif" RightIconUrl="selected_tab_right_icon.gif" LeftIconWidth="3" LeftIconHeight="21" RightIconWidth="3" RightIconHeight="21" />
                  <ComponentArt:ItemLook LookId="ScrollItem" CssClass="ScrollItem" HoverCssClass="ScrollItemHover" LabelPaddingLeft="5" LabelPaddingRight="5" LabelPaddingTop="0" LabelPaddingBottom="0" />
                </ItemLooks>
            </ComponentArt:TabStrip> 
```

当我检查页面源代码时，会生成一些对各个选项卡的 javascript 引用，但是当我使用 Firebug 检查源代码时，只有第一个选项卡在 HTML 中有任何标记引用。在选项卡正确呈现的页面上，所有选项卡都通过 Firebug 在 HTML 中可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:13:43.917

我不确定如何删除这个问题。原来问题出在我写的一些javascript而不是标签条上。

# twitter-bootstrap - 响应式导航栏不起作用

> ID：14837008
> 
> 赞同：4
> 
> 时间：2013-02-12T16:22:42.760
> 
> 标签：twitter-bootstrap, navbar

我第一次尝试 Bootstrap，我的代码基于他们的示例：

[http://twitter.github.com/bootstrap/examples/starter-template.html](http://twitter.github.com/bootstrap/examples/starter-template.html)

我基本上复制了主要内容的 html 代码，但在我的版本中，响应式导航栏不起作用，因为当我单击“汉堡按钮”时，导航元素不会出现。

我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="css/main.css" rel="stylesheet" media="screen">
  </head>
  <body>

  <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Hello, world!</h1>

    </div> <!-- /container -->

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
  </body>
</html> 
```

我的引导文件来自 Bootstrap 定制站点。我在构建中包含了所有内容，包括响应式导航栏。

我哪里错了。

谢谢大家。

**更新**

我删除了我的 main.css 文件，所以那里没有冲突。我再次尝试从自定义页面下载引导程序并勾选所有内容：twitter.github.com/bootstrap/customize.html，但仍然遇到同样的问题。它给我的 css 文件只是称为 bootstrap.css 而不是 bootstrap-combined.css。引导程序自定义页面有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:39:13.560

看看这个：http: [//jsfiddle.net/panchroma/4XEnD/](http://jsfiddle.net/panchroma/4XEnD/)

我采用了您的确切 html，并且正在使用 CSS 和 JS 的 CDN 版本——一切对我来说都很好。

```
http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css
http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js 
```

仔细检查您使用的是响应式引导 CSS，引导 js 文件正在加载，并且您的 main.css 中没有导致冲突的内容。

祝你好运！

# html - JSF dataTable 作为带有可点击行的 CSS 表？

> ID：14837009
> 
> 赞同：0
> 
> 时间：2013-02-12T16:22:44.030
> 
> 标签：html, jsf, css

已经提出了相关问题，但由于还没有任何可靠/可接受的答案，我想我会重新措辞并澄清：

`dataTable`JSF 中有没有一种方法可以在不将渲染器重写为 W3C CSS 表的情况下填充或相关的查询结果组件？这必须启用可点击的行和行（相对于列）样式 a:hover 等。

查询中所需呈现的 JSF 组件 HTML 示例：

```
<div class="table">
    <a href="#" class="row">
        <span class="cell">Column-1-Value</span>
        <span class="cell">Column-2-Value</span>
    </a>
    ...
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:43:38.843

感谢提供的输入，这是在 Java EE/JSF 容器中测试的完整答案（而不是仅在评论中）：

```
<div class="table">
  <ui:repeat value="#{BackingBean.list}" var="item">
    <h:outputLink value="url">
      <f:param name="ID" value="#{item.ID}"/>
      <span class="cell">#{item.ID}</span>
      <span class="cell">#{item.Name}</span>
    </h:outputLink>
  </ui:repeat>
</div> 
```

然后可以使用 CSS/ 3`display:table`和`display:table-row`; `display:table-cell`分别。行是可点击的，并且可以根据需要设置样式。

# push-notification - PushSharp 通知错误

> ID：14837015
> 
> 赞同：1
> 
> 时间：2013-02-12T16:23:04.123
> 
> 标签：push-notification, apple-push-notifications, pushsharp

使用 PushSharp 时，我不断收到此错误：

```
Waiting for Queue to Finish...
Failure: Apple -> Exception of type 'PushSharp.Apple.NotificationFailureException' was thrown. -> {"aps":{"alert":"Alert Text From .NET!","badge":7,"sound":"default"}}
Queue Finished, press return to exit... 
```

有什么想法吗？当您插入手机时，
我使用iTunes 中显示的长 UID。`DeviceToken`根据 PushSharp Wiki 上的说明导出证书（沙盒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:39:59.613

您使用的不是设备令牌。设备令牌为 32 个字节（也可以表示为 64 个 HEX 字符的字符串）。您的 iOS 应用程序在注册推送通知时从 Apple 获取。

```
- (void)applicationDidFinishLaunching:(UIApplication *)app {

   // other setup tasks here....

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

}

// Delegation methods

- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {

    const void *devTokenBytes = [devToken bytes];

    self.registered = YES;

    [self sendProviderDeviceToken:devTokenBytes]; // custom method

} 
```

# java - 将 KeyEvent.VK_SPACE 转换为字符串空间

> ID：14837016
> 
> 赞同：1
> 
> 时间：2013-02-12T16:23:04.927
> 
> 标签：java, swing, keylistener, keyevent

如何将`KeyEvent.VK_SPACE`（整数）转换为实际空间？

```
String space = convertKeyEvent(KeyEvent.VK_SPACE);
System.out.println("Space=" + space + "."); 
```

这应该输出

```
Space= . 
```

虽然这个例子使用了空格，但它也应该是其他字符的通用转换器，例如 VK_0。

* * *

**我尝试过的**

请注意，这不起作用：

```
String space = KeyEvent.getKeyText(KeyEvent.VK_SPACE);
System.out.println("Space=" + space + "."); 
```

在 Eclipse 中，这会输出：

```
Space=?. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:43:23.990

嗯 - 呃 - 你曾经看过 的实际价值`VK_SPACE`吗？它是 0x20——这是空间的实际 ASCII 值——应该给你一些提示；）

尝试：

```
char space = (char)VK_SPACE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:37:34.387

```
public static String convert(int keyEvent){
    if(keyEvent == 32){
        return " ";
    }
    return null;
}
public static void main(String [] arg){
    System.out.println("Space=" + convert(KeyEvent.VK_SPACE) + ".");
} 
```

# java - 将无效的 xml 元素添加到 xml 文档 java

> ID：14837019
> 
> 赞同：0
> 
> 时间：2013-02-12T16:23:07.633
> 
> 标签：java, xml, xml-parsing, jdom-2

我有以下代码：

```
Document mainContent = new Document();
Element rootElement = new Element("html");
mainContent.setContent(rootElement);
Element headElement = new Element("head");
Element metaElement = new Element("meta");
metaElement.setAttribute("content", "text/html; charset=utf-8");
headElement.addContent(metaElement);
rootElement.addContent(headElement);
org.jdom2.output.Format format = org.jdom2.output.Format.getPrettyFormat().setOmitDeclaration(true);
XMLOutputter outputter = new XMLOutputter(format);
System.out.println(outputter.outputString(mainContent)); 
```

这将产生输出：

```
<html>
  <head>
    <meta content="text/html; charset=utf-8" />
   </head>
</html> 
```

现在，我有以下字符串：

```
String links = "<link src=\"mysrc1\" /><link src=\"mysrc2\" />" 
```

如何将它添加到 HTML 元素中，以便输出为：

```
<html>
    <head>
       <meta content="text/html; charset=utf-8" />
       <link src="mysrc1" />
       <link src="mysrc2" />
    </head>
</html> 
```

请注意，它完全不是一个有效的 XML 元素，但每个链接都是一个有效的 XML 元素。

如果需要，我不介意使用另一个 XML 解析器。如果有帮助，我已经在我的代码 HTMLCleaner 中的其他地方使用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:41:30.490

你可以做他们[在这里](https://stackoverflow.com/questions/5946064/how-to-parse-multiple-consecutive-xml-files-in-one-document)提到的事情。基本上将您的 xml 片段放在根元素中：

```
links ="<root>"+links+"</root>";
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(false);
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc=builder.parse(links ByteArrayInputStream(xml.getBytes()));
NodeList nl = ((Element)doc.getDocumentElement()).getChildNodes();
for (int temp = 0; temp < nl .getLength(); temp++) { 
Node nNode = nl .item(temp);
    //Here you create your new Element based on the Node nNode, and the add it to the new DOM you're building

} 
```

然后将链接解析为有效的 XML 文档，并提取您想要的节点（基本上是根节点以外的任何节点）

# mysql - MYSQL - SELECT AS 别名用于子查询

> ID：14837024
> 
> 赞同：0
> 
> 时间：2013-02-12T16:23:36.860
> 
> 标签：mysql, select, subquery

我希望能够使用我在子查询中进一步选择的项目之一。正如您在此示例中看到的，我已将有问题的“变量”设置为 100，但实际上这将是一个动态数字，因此我需要能够在子查询中访问它。

```
INSERT INTO users_friends (userId, friendId) 
SELECT 77, id as noob
FROM users WHERE email = 'a@g.com' 
AND
NOT EXISTS (SELECT * FROM users_friends
WHERE userId = 77 and friendId = noob)
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:35:53.383

我不完全确定我理解你的问题，但 NOT EXISTS 就像 LEFT JOIN 和 IS NULL 一样工作。所以我认为这会起作用：

```
SELECT 77, @noob
FROM users u
  JOIN (SELECT @noob:= 100) r
  LEFT JOIN users_friends uf on u.userid = uf.userid and uf.friendid = @noob
WHERE email = 'a@g.com' 
  AND uf.userid IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/e2ede/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:54:18.160

我认为最安全的方法是在子查询中定义这些。我通常给它一个 const 的别名：

```
INSERT INTO users_friends (userId, friendId) 
    SELECT const.userId, const.noob
    FROM users cross join
         (select 77 as userId, 100 as noob) const
    WHERE email = 'a@g.com' AND
          NOT EXISTS (SELECT *
                      FROM users_friends
                      WHERE userId = const.userId and friendId = const.noob
                     )
    LIMIT 1 
```

我担心 SGeddes 的方法，因为它依赖于对查询范围之外的变量的正确评估。这在这种情况下可能有效，但我更喜欢查询不依赖外部变量的解决方案。顺便说一句，这也应该适用于任何数据库，并且不是特定于 MySQL 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:52:32.690

**编辑**

我建议更改您的表结构。

```
 CREATE TABLE users_friends(
userid int, 
friendid int,
primary key (userid, friendid)
);

CREATE TABLE users (
 userid int primary key, 
 email varchar(100), 
 name VARCHAR (100),
 index (email,name)
);

INSERT INTO users VALUES (1, 'a@g.com', 'noob'), (2,'b@g.com', 'Joe');

INSERT INTO users_friends (userId, friendId) 
VALUES (2, (SELECT userId 
FROM users 
WHERE email = 'a@g.com' 
AND name = "noob"
AND NOT exists (SELECT * FROM users_friends as uf 
            JOIN users as u 
            ON u.userid = uf.userid 
            where uf.friendid = 2 AND name = "noob"            
           )
           ) 
       ); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/facfc6/1)

尝试这个：

```
 <?php

    function select_query ($userid,$friendname, $email){
    $host = "host";
    $user = "username";
    $password = "password";
    $database = "database name";

    // open connection to databse
    $link = mysqli_connect($host, $user, $password, $database);
            IF (!$link){
                echo ("Unable to connect to database!");
            }
            ELSE {
               //Is someone registered at other conference from table registration
               $query = "    INSERT INTO users_friends (userId, friendId) 
VALUES (".$userId.", (SELECT userId 
FROM users 
WHERE email = '".$email."' 
AND name = '".$friendname."'
AND NOT exists (SELECT * FROM users_friends as uf 
            JOIN users as u 
            ON u.userid = uf.userid 
            where uf.friendid = ".$userId." AND name = '"$friendname"'            
           )
           ) 
       )"; 
               $result = mysqli_query($link, $query);
               return $query;
               return $result;
            }
            mysqli_close($link);
    }

    echo select_query(1,noob,'a@g.com');
   ?> 
```

就像我上面提到的，我不确定你的意思。如果您的意思是动态的，您可以更改变量的值，这可能会有所帮助。在您之前的帖子中，您使用了 PHP。所以，我的猜测是你正在使用 PHP。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T19:13:59.590

```
INSERT INTO users_friends (userId, friendId) 
SELECT 77, id 
FROM users WHERE email = 'a@g.com' 
AND
NOT EXISTS (SELECT * FROM users_friends
WHERE userId = 77 and friendId = (SELECT id 
FROM users WHERE email = 'a@g.com'))
LIMIT 1 
```

# css - TinyMCE - 默认样式

> ID：14837032
> 
> 赞同：4
> 
> 时间：2013-02-12T16:23:52.013
> 
> 标签：css, styles, tinymce, default

我想知道如何选择 CSS 的默认类以在 tinymce 中应用它，如下示例：

```
 tinyMCE.init({
    mode : "textareas",
    editor_selector : "textarea_number_1",
    content_css : "css/custom_content.css",

    default-style : 'NameOfMyClass'; <- here is my problem ! Please, help me :)
} 
```

我的页面中有 3 个文本区域，只有一个 CSS 文件，但我想为每个文本区域选择不同的默认类。

这仅用于在 TinyMCE 编辑器中显示，在 php 后处理中，我从检索到的内容中删除了“p”标签。

感谢您的任何建议，如果我不够清楚，我可以解释我的问题的任何一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:55:48.880

简单的方法是使用不同的配置：[http ://www.tinymce.com/tryit/multiple_configs.php](http://www.tinymce.com/tryit/multiple_configs.php)

另一种方法是为所有编辑器设置一个默认对象保存设置，然后在使用之前`tinyMCE.execCommand('mceAddControl', false, 'your_textarea_id');`将默认对象与另一个保存附加设置的对象合并。有关更多信息，另请参阅[Tinymce 如何减少多个实例的选项](https://stackoverflow.com/questions/9565212/tinymce-how-to-reduce-options-for-multiple-instances)

# codeigniter - Codeigniter 电子邮件功能和 Justhost SMTP

> ID：14837034
> 
> 赞同：0
> 
> 时间：2013-02-12T16:23:54.070
> 
> 标签：codeigniter, smtp

我有人使用 PHP 和 Codeigniter 框架为我建立了一个站点。在测试服务器上一切正常，但是现在，一旦站点在 Justhost 上传输，电子邮件功能就不起作用了。起初我认为我没有使用正确的 SMTP 设置，但他们很好（支持看看）。

基本上，业主可以将他的财产放在网站上（如：http: [//goo.gl/AZcrj](http://goo.gl/AZcrj)），当访问者填写底部的联系表时，电子邮件会发送到业主的电子邮件地址，他可以回复给访客的电子邮件。

我第一次使用 Justhost SMTP 设置并对其进行测试时，发送了电子邮件。但从那时起，直到现在，当我尝试通过联系表单发送消息时，我总是收到错误消息。我什至尝试使用 Gmail SMTP 设置，同样的事情发生了： \

这是代码，有人知道吗？顺便说一句，我是PHP菜鸟，所以我不太了解，但我尽力解释了

```
public function send_mail($res)
{
    $this->load->library('email');
    $config['protocol']    = 'smtp';
    $config['smtp_host']    = 'sslsmtp.gmail.com'; --- i tried with ssl://smtp.gmail.com, same thing happens
    $config['smtp_port']    = '465';
    $config['smtp_timeout'] = '7';
    $config['smtp_user']    = 'email';
    $config['smtp_pass']    = 'password';

    $this->email->initialize($config);

    $this->email->from($res['sender_email'], $res['sender_name']);
    $this->email->to($res['reciever']);
    $this->email->reply_to($res['sender_email'], $res['sender_name']);

    $this->email->subject('Email from site.');
    $this->email->message($res['message']);

    if($this->email->send()) {
        return true;
    } else {
        return false;
    }
    //configure mail agent...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T11:49:58.233

似乎 Justhost 阻止了共享 IP 的传出端口。我遇到了同样的问题，在寻找答案时遇到了这个链接（[https://my.justhost.com/cgi/help/405 ）。](https://my.justhost.com/cgi/help/405)

从上面的链接：

> 传出端口被阻止
> 
> 由于共享托管环境，Just Host 限制了端口访问。在这种环境中，服务器上的每个帐户共享一个 IP 地址。结果，大多数端口都被阻止，因为没有为单个帐户分配盒子的 IP 地址。
> 
> 要访问这些端口，必须通过 Just Host 租用一个专用 IP 地址。

# mysql - 缓慢的网站页面 - SQL 查询

> ID：14837038
> 
> 赞同：0
> 
> 时间：2013-02-12T16:23:58.333
> 
> 标签：mysql, database, wordpress

我有一个加载页面相当慢的网站。

我被告知要查看 TMP 文件夹中的 mysqlslowqueries LOG。

我每天都能看到这里列出的许多查询。例如：

[http://www.ticketyoda.co.uk/concerts/bon-jovi-tickets/bon-jovi-tickets-stadium-of-light-sunderland-2/3550](http://www.ticketyoda.co.uk/concerts/bon-jovi-tickets/bon-jovi-tickets-stadium-of-light-sunderland-2/3550)

```
# Tue Feb 12 08:02:41 2013
# Query_time: 53.289597  Lock_time: 0.001163 Rows_sent: 3  Rows_examined: 73556368
use ticketyoda;
SET timestamp=1360681361;
SELECT e.merchant, e.price, e.url, m.merchant_logo, m.merchant_name, e.eventname,    m.merchant_rating
FROM wp_events e
INNER JOIN ########### 
ON #############
AND e.uploaddate = (SELECT MAX(uploaddate) FROM #########)
AND e.eventname ='### ####'
AND e.date = '######'
ORDER BY price ASC 
```

肯定会感谢任何人的帮助，我尝试过其他插件等，但这可能与数据库有关。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:41:29.763

我浏览了该网站，它的速度几乎无法使用。

它还声称由称为“ticketreview”的东西提供支持——这是你购买的软件包吗？如果是这样，请将其交给供应商，因为安装脚本几乎肯定会在您的数据库中留下一大堆虚假数据（您的艺术家/城市数量相对较少，并且有 7300 万条记录），或者它忘记安装索引在数据库上，或者出现其他问题导致它无法使用。

如果这不是第 3 方软件，您必须弄清楚瓶颈是什么。这在生产系统上通常不是那么有趣，所以也许可以获取备份并在开发环境中工作一段时间。

然后，与[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)交朋友。它会告诉您可以在哪里优化查询 - 听起来好像缺少一些索引。

# sql - IsRowGUID 和 UniqueIdentifier 之间的区别

> ID：14837039
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:09.933
> 
> 标签：sql, visual-studio-2008, types, field, guid

在为 Visual Studios 中的 SQL 服务器数据库创建新的主键字段时。我注意到他们的字段类型可以是唯一标识符。这也可以更改为 nvarchar 和 int 或 bit。我也注意到虽然在字段的属性中我可以为 isRowGUID 指定“TRUE”。

当 Visual Studios 在导入数据库（此特定实例的 .SDF 文件。AKA SQL compact）后自动创建 XSD 定义时，它会自动将类型 uniqueidentifier 映射到 CLR 类型 GUID。将 isRowGUID 设置为 true 有哪些优势（如果有）？

感谢此问题中的任何信息或方向，因为以前收集有关此主题的信息的所有努力几乎没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:31:03.840

基本上，rowguidcol/isrowguidcol 告诉 SQL Server 该列是一个唯一的行标识符，就像 identity 对 int 列所做的一样（强制唯一性）。它还强制在列上设置默认值，就像 identity 在 int 列上设置种子和增量值一样。就像一个表只能有一个标识列一样，每个表也只能有一个 rowguidcol。

Rowguidcol 使您能够使用系统存储过程来引用、访问和/或识别此列。此外，如果可用，SQL Server 复制可以/将使用标记为 rowguidcol/isrowguidcol 的 uniqueidentifier 列。如果没有，复制会将 uniqueidentifier/rowguidcol 添加到现有表中。如果您计划使用 SQL Server 复制，建议您自己添加列作为设计的一部分，以便最后您可以为该列命名一些有用的名称。

查看 Microsoft 的此链接以获取更多信息... [http://msdn.microsoft.com/en-us/library/ms191131(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191131(v=sql.105).aspx)

# android - 解析数据时出错 java.lang.ArrayIndexOutOfBoundsException

> ID：14837040
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:10.437
> 
> 标签：android, arrays, android-listview

在循环中，“m”从 0 到 4 工作，但随后崩溃，而不是从 0 到 6。

```
ArrayList<ItemTeacher> results = new ArrayList<ItemTeacher>();
String resultteacher="";
String[] binku2=null;

ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost("http://"+localip+":8080/Apj/Teacher_Servlet");

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
         sb.append(line);
    }
    is.close();
    resultteacher = sb.toString();
    System.out.println("RESULT is : -**********"+resultteacher+"********-");

    String[] binku = resultteacher.split("@");

    System.out.println("LENGTH OF BINKU = "+binku.length);

    for(int m=0;m<=binku.length-1;m++)
    {

        binku2 = binku[m].split("#");
        System.out.println("Record number"+binku2[m]);
        drawable = LoadImageFromWebOperations("http://"+localip+":8080/Apj/TeacherImage/"+binku2[4]+".png");
        System.out.println("IMAGE DATA DISPLAY ="+drawable);

        ItemTeacher item_teacher = new ItemTeacher();

        item_teacher.setname(binku2[0]);
            item_teacher.setinfo(binku2[1]);
            item_teacher.setimage(drawable);
            String binku3[] = binku2[2].split("~");
            String binku4[] = binku2[3].split("~");

            String time="";
            String timeroom="";
            time =("Lecture Timings - Classroom");
            for(int i=0;i<=8;i++)
            {
            //  time +=("[Timings and Room]");
                timeroom +=("["+binku3[i]+" - "+binku4[i]+"]"+"      ");
                //System.out.println("Record number"+binku3[i]);
            }
            item_teacher.settime(time);
            item_teacher.setroom(timeroom);
            System.out.println("m value is ="+m);

            results.add(item_teacher);

    }
}

catch (Exception e) {
     System.out.println("Error parsing data " + e.toString());
}

return results;
} 
```

日志详细信息：

```
02-12 21:33:36.772: I/System.out(358): RESULT is : -**********Mrs Roopali Sood#M.C.M (Head IT Dept)#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#F8~Lab 1~Lab 3~F7~F8~S9~Free~S8~F8~#1@Mr Jagmohan Mago#M.C.A (IT Dept).#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#Free~S2~F8~S1~F9~Free~Lab 2~S9~Lab1~#2@Mr Munish Gupta#M.C.A (IT Dept).#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#S9~F8~S1~Lab 1~F1~Free~F8~Lab 3~S5~#3@Mrs Pallavi Chopra#M.C.A., M.Phil. (IT Dept).#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#Lab 2~Free~S2~F8~Free~Free~Lab 2~Free~Lab1~#4@Mr Abhejeet Singh#M.C.A (IT Dept).#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#Lab 3~Lab 1~Lab 3~S7~F8~Lab 2~Free~S8~S9~#5@Vinay#M.C.A (IT Dept).#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#Free~S2~F8~S1~F9~Free~Lab 2~S9~Lab1~#6@Bharti#Pata nai#9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~#S9~F8~S1~Lab 1~F1~Free~F8~Lab 3~S5~#7@********-
02-12 21:33:36.784: I/System.out(358): LENGTH OF BINKU = 7
02-12 21:33:36.784: I/System.out(358): Record numberMrs Roopali Sood
02-12 21:33:37.082: I/System.out(358): IMAGE DATA DISPLAY =android.graphics.drawable.BitmapDrawable@4618b990
02-12 21:33:37.102: I/System.out(358): m value is =0
02-12 21:33:37.102: I/System.out(358): Record numberM.C.A (IT Dept).
02-12 21:33:37.512: I/System.out(358): IMAGE DATA DISPLAY =android.graphics.drawable.BitmapDrawable@4619c2a8
02-12 21:33:37.522: I/System.out(358): m value is =1
02-12 21:33:37.522: I/System.out(358): Record number9:00~9:45~10:30~10:45~11:30~12:15~1:00~1:45~3:30~
02-12 21:33:37.772: I/System.out(358): IMAGE DATA DISPLAY =android.graphics.drawable.BitmapDrawable@461ac610
02-12 21:33:37.782: I/System.out(358): m value is =2
02-12 21:33:37.792: I/System.out(358): Record numberLab 2~Free~S2~F8~Free~Free~Lab 2~Free~Lab1~
02-12 21:33:38.102: I/System.out(358): IMAGE DATA DISPLAY =android.graphics.drawable.BitmapDrawable@461bca98
02-12 21:33:38.112: I/System.out(358): m value is =3
02-12 21:33:38.112: I/System.out(358): Record number5
02-12 21:33:38.492: I/System.out(358): IMAGE DATA DISPLAY =android.graphics.drawable.BitmapDrawable@461ccc80
02-12 21:33:38.492: I/System.out(358): m value is =4
02-12 21:33:38.505: I/System.out(358): Error parsing data java.lang.ArrayIndexOutOfBoundsException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:28:41.947

这几乎肯定不是您想要的：

```
binku2 = binku[m].split("#");
System.out.println("Record number"+binku2[m]); 
```

您似乎在任何地方都进行操作，就好像`binku2`数组的长度为 4，但随后您尝试访问值为 的索引`m`。因此，当您达到循环的第 5 次迭代时，`m`is 4 并且您抛出异常。可能您打算访问`binku`这里：

```
binku2 = binku[m].split("#");
System.out.println("Record number"+binku[m]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:28:19.357

您通过像这样对循环进行硬编码来为自己设置错误：

```
for(int i=0;i<=8;i++) 
```

您应该始终使用动态值，例如`m<=binku.length-1`或更简单的版本`m < binku.length`。当您使用多个数组时，检查每个数组的长度是最安全的：

```
for(int i = 0; i < binku3.length && i < binku4.length; i++) 
```

# vb.net - 在 VB.NET 中将 Gridview 转换为 DataTable

> ID：14837044
> 
> 赞同：3
> 
> 时间：2013-02-12T16:24:18.410
> 
> 标签：vb.net, gridview, datatable

我正在使用此函数从 gridviews 创建数据表。它适用于具有 AutoGenerateColumns = False 的 Gridview 并具有绑定字段或模板文件。但是，如果我将它与 AutoGenerateColumn = True 的 Gridviews 一起使用，我只会得到一个空的 DataTable。似乎 Gridview 视图状态已经丢失或什么的。Gridview 在 PageLoad 上与 If Not IsPostback 绑定。我想不出其他任何东西可以让它发挥作用。希望可以有人帮帮我。

谢谢，

```
Public Shared Function GridviewToDataTable(gv As GridView) As DataTable

    Dim dt As New DataTable

    For Each col As DataControlField In gv.Columns
        dt.Columns.Add(col.HeaderText)
    Next

    For Each row As GridViewRow In gv.Rows
        Dim nrow As DataRow = dt.NewRow
        Dim z As Integer = 0
        For Each col As DataControlField In gv.Columns
            nrow(z) = row.Cells(z).Text.Replace("&nbsp;", "")
            z += 1
        Next
        dt.Rows.Add(nrow)
    Next
    Return dt

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-22T18:41:23.260

对上面的函数稍作修改。如果设置了自动生成删除、编辑或选择按钮标志，则字段的值偏移 1。以下代码说明了这一点：

```
Public Shared Function GridviewToDataTable(ByVal PassedGridView As GridView, ByRef Error_Message As String) As DataTable
    '-----------------------------------------------
    'Dim Tbl_StackSheets = New Data.DataTable

    'Tbl_StackSheets = ReportsCommonClass.GridviewToDataTable(StackSheetsGridView)

    '-----------------------------------------------

    Dim dt As New DataTable
    Dim ColInd As Integer = 0
    Dim ValOffset As Integer

    Try

        For Each col As DataControlField In PassedGridView.Columns
            dt.Columns.Add(col.HeaderText)
        Next

        If (PassedGridView.AutoGenerateDeleteButton Or PassedGridView.AutoGenerateEditButton Or PassedGridView.AutoGenerateSelectButton) Then
            ValOffset = 1
        Else
            ValOffset = 0
        End If

        For Each row As GridViewRow In PassedGridView.Rows
            Dim NewDataRow As DataRow = dt.NewRow

            ColInd = 0
            For Each col As DataControlField In PassedGridView.Columns
                NewDataRow(ColInd) = row.Cells(ColInd + ValOffset).Text.Replace("&nbsp;", "")
                ColInd += 1
            Next

            dt.Rows.Add(NewDataRow)
        Next

        Error_Message = Nothing

    Catch ex As Exception
        Error_Message = "GridviewToDataTable: " & ex.Message
    End Try

    Return dt

End Function 
```

# machine-learning - 支持向量机与超平面的距离和确定性

> ID：14837045
> 
> 赞同：2
> 
> 时间：2013-02-12T16:24:21.027
> 
> 标签：machine-learning, libsvm, svm

向量与支持向量机中决策平面的距离（关于内核等的任意配置）是否与机器对该向量分类的置信度/确定性有任何关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:37:12.957

是的。这就是为什么 Platt Scaling（单调变换边距）可以产生校准概率的原因。

然而，如果不改变边距，很难给出一个可行的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:39:35.477

是的，我肯定会这么说。这里给出了一些形式化：http: [//cs229.stanford.edu/notes/cs229-notes3.pdf](http://cs229.stanford.edu/notes/cs229-notes3.pdf)

# angularjs - 在页面渲染后添加角度 js 属性

> ID：14837047
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:28.750
> 
> 标签：angularjs, angularjs-directive

我有一个应用程序，其中包含一个包含内容的 div。当我单击一个按钮时，jQuery 将 AngularJs 指令添加到 div。添加指令后，我调用了 scope.$apply()，但这似乎并没有告知 angular div 上的新指令。有人可以向我解释我如何告知 AngularJs jQuery 添加的新指令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:29:35.390

您不应该使用 JQuery 向您的标记添加指令。尽可能使用 Angular。

也就是说，如果您*必须*通过类似的直接 DOM 操作添加指令，则需要使用[$compile](http://docs.angularjs.org/api/ng.%24compile)提供程序来编译元素并将其绑定到范围，然后再添加它。

# android - phonegap/dreamweaver 本地表单存储

> ID：14837048
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:29.987
> 
> 标签：android, html, cordova, jquery-mobile, dreamweaver

我对编程和 phonegap 很陌生。我有html背景。我在 Dreamweaver CS5.5 中制作了一个小型 android 应用程序，它将在本地存储数据。我的应用程序运行良好，我可以转到不同的页面。我现在需要保存表格。有人可以帮助我完成我需要执行此操作的步骤吗？我希望它不是超级难，我能理解。它还使用移动 jquery，但我没有在其中编辑任何内容。

这是我的表格。我希望将此信息保存在此页面或其他页面上，以便稍后我也可以返回并进行编辑。

```
<form action="" method="get" id="customerDetail">
<label for="name">
<input type="text" name="name" id="name" placeholder="Name" /></label>
<label for="email">
<input type="email" id="email" name="email" placeholder="Email"></label>
<label for="comment">
<textarea id="comment" name="comment" cols="30" rows="10" placeholder="Insert comments"></textarea>
</label>
<input type="submit" value="Save">
</form> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:56:11.630

要存储和检索数据，您需要使用 PHP 和 MySQL 创建数据库，当然还有支持 MySQL 的服务器。

[但是，您可以使用XAMPP](http://www.apachefriends.org/en/xampp-windows.html)在您的机器上本地测试您的脚本，但您仍然需要创建可以永久存储数据的数据库和表，或者您可以下载现成的数据库进行测试。

一旦你在你的机器上安装了 XAMPP，你就可以创建数据库和表，然后你将你的数据库与 DreamWeaver 连接起来，就像一个在线服务器一样。

我希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:27:36.090

您应该使用 Sqllite 搜索 Phonegap，这应该会引导您找到一些有用的链接。

# java - 在 Java 和 PHP 之间传递一个长字符串？

> ID：14837054
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:44.300
> 
> 标签：java, php, http

我有一个方法，它需要一个很长的字符串，90,860 个字符并将其传递给 PHP 页面，然后将其插入数据库。我读过 PHP 帖子的大小没有限制，最多不超过 8mb。我假设这个字符串长度应该没问题。

```
 msg = URLEncoder.encode(stringToEncode.toString(),"UTF-8"); 

        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://mysite.com/insert.php?data="+msg);
        HttpResponse response1 = httpclient.execute(httpPost); 
```

我知道这行得通，因为我可以插入短的纯字符串。

在我的 PHP 页面上，我只得到如下的帖子数据：

```
 $data = $_GET['data']; 
```

并插入它。我是否需要添加一些额外的 php 来解码帖子消息？我读到它应该由 PHP 自动完成。

问题是，对于长字符串，我要么得到 500 错误，要么将字符串放入浏览器中，我只是得到一个不可用的页面。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:44:25.273

在Java程序中你不应该传递你的数据，尤其是当它很长的时候，在URL中，看[这个问题](https://stackoverflow.com/questions/10604001/how-to-send-simple-http-post-request-with-post-parameters-in-java)的例子代码如何正确传递`Post`参数

从 PHP 方面，你应该使用`$data = $_POST['data'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:30:21.310

限制因素将是服务器愿意接受的 URL 的最大允许长度。我不记得是否所有服务器都必须支持最低限度，但我们前段时间进行的测试表明，根据服务器类型，URL 长度限制通常在 2k 到 10k 个字符之间——这似乎得到了[Paul Dixon 的广泛回答这个问题](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)。

要规避此限制，请使用[多部分帖子](http://hc.apache.org/httpclient-legacy/methods/multipartpost.html)

# zend-framework2 - 如何在不使用 Zend\Mvc\Navigation 的情况下知道链接是否在视图脚本中处于活动状态？ZF2

> ID：14837056
> 
> 赞同：2
> 
> 时间：2013-02-12T16:24:46.290
> 
> 标签：zend-framework2

我正在使用 Zend Framework 2。我想测试一个链接是否是我的视图脚本中的活动页面。

例如 ：

在我的视图脚本上：view/application/account/user.phtml

```
<a href="$this->url("account")" 
<?echo **if($this->isActive()**){?> class="active"<?php } ?>link</a> 
```

我不想用 Zend\Mvc\Navigation 设置菜单

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:39:19.233

你可以这样做：

```
<?php $current_url = $this->url(); ?>

<a href="<?php echo $this->url('account'); ?>" <?php if ($current_url == $this->url('account')) { echo 'class="active"'; } ?>>link</a> 
```

# gwt - Tomcat 中的 GWT 2.5 应用程序部署？

> ID：14837059
> 
> 赞同：0
> 
> 时间：2013-02-12T16:24:49.033
> 
> 标签：gwt, tomcat, deployment, gwt-rpc

我正在使用 GWT 2.5。我有一个使用 gwt-rpc 的应用程序。我已经编译了项目并使用 ant 脚本制作了 war 文件。当我将项目部署在 tomcat 上时，它会成功加载但不显示任何控件。只是一个简单的空白 html 页面。这是我的文件。模块

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  When updating your version of GWT, you should also update this DTD reference,
  so that your app can take advantage of the latest GWT module capabilities.
-->
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.0//EN"
  "http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='interviewscheduler'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <inherits name='com.google.gwt.user.theme.clean.Clean'/>
  <!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->
  <inherits name="com.smartgwt.SmartGwt"/>
  <!-- Specify the app entry point class.                         -->
  <entry-point class='interviewscheduler.client.InterViewScheduler'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>

</module> 
```

远程服务

```
package interviewscheduler.client;

import interviewscheduler.shared.Interview;
import interviewscheduler.shared.Teacher;

import java.util.LinkedHashMap;
import java.util.List;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("interviewScheduler")
public interface InterviewSchedulerService extends RemoteService{
    Boolean loadStudentData() throws IllegalArgumentException;
    Boolean loadParentData() throws IllegalArgumentException;
    Boolean loadTeacherData() throws IllegalArgumentException;
    Boolean loadClassData() throws IllegalArgumentException;
    Boolean loadClassMemberShipData() throws IllegalArgumentException;
    Boolean loadRoomData() throws IllegalArgumentException;
    Boolean loadSessionData() throws IllegalArgumentException;
    Boolean loadInterviewData() throws IllegalArgumentException;
    LinkedHashMap<String, String> getStudentNames() throws IllegalArgumentException;
    String getParentName(String studentKey) throws IllegalArgumentException;
    List<Teacher> getAvailableTeachers(String studentKey) throws IllegalArgumentException;
    List<Teacher> getRequestedTeachers(String studentKey) throws IllegalArgumentException;
    List<Interview> getInterviewByStudent(String studentKey) throws IllegalArgumentException;
    List<Interview> getInterviewByTeacher(String teacherCode) throws IllegalArgumentException;
    List<Object> getInterviewsForGrid(List<Interview> list) throws IllegalArgumentException;
    String addInterview(Interview obj) throws IllegalArgumentException;
    String removeInterview(String studentId, String teacherId) throws IllegalArgumentException;
} 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

  <!-- Servlets -->

  <servlet>
    <servlet-name>interviewSchedulerServlet</servlet-name>
    <servlet-class>interviewscheduler.server.InterviewSchedulerServiceImpl</servlet-class>
  </servlet>

   <servlet-mapping>
    <servlet-name>interviewSchedulerServlet</servlet-name>
    <url-pattern>/interviewscheduler/interviewScheduler</url-pattern>
  </servlet-mapping>
  <!-- Default page to serve -->

  <welcome-file-list>
    <welcome-file>InterViewScheduler.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

任何想法我做错了什么。这很紧急。

```
package interviewscheduler.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.RootLayoutPanel;
import com.smartgwt.client.widgets.layout.VLayout;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class InterViewScheduler implements EntryPoint {
    /**
     * This is the entry point method.
     */
    private InterviewSchedulerServiceAsync remoteObject=GWT.create(InterviewSchedulerService.class);
    private VLayout wrapper=new VLayout();
    private VLayout headerArea=new Header();
    private VLayout contentArea=new ContentArea();

    public void onModuleLoad() {
        Window.enableScrolling(true);
        Window.setMargin("0px");
        remoteObject.loadStudentData(new AsyncCallback<Boolean>() {
            @Override
            public void onSuccess(Boolean result) {

            RootLayoutPanel.get().add(drawWrapper());
            }
            @Override
            public void onFailure(Throwable caught) {
                System.out.println("Failed*****************");
            }
        });

    }

    /** 
     * initialize the wrapper of the web site which holds all other content------Main Container 
     */

    public VLayout drawWrapper(){
        wrapper.setWidth100();
        wrapper.setHeight100();
        wrapper.setMargin(0);
        wrapper.addMember(drawHeaderArea());
        wrapper.addMember(drawContentArea());
        return wrapper;
    }
    /** 
     * initialize the Header Area of the web site which contains Logo with Title and a logout button
     */
    public VLayout drawHeaderArea(){
        headerArea.redraw();
        return headerArea;
    }

    /** 
     * initialize the Content Area of the web site which holds a main TabSet
     */

    public VLayout drawContentArea(){
        contentArea.redraw();
        return contentArea;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:16:35.243

您必须在应用程序中以某种方式显示您的数据。你现在所做的只是调用一堆服务。这实际上很令人困惑。您应该在一次调用服务器时完成所有这些操作。它将为您节省很多往返行程，并且很可能会使您免于遇到一些失败的呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:02:20.923

愚蠢的错误......我没有在 WEB-INF/lib 目录中包含必要的库。这导致我的 RPC 调用失败。无论如何。特别感谢 Enrybo。调试技术非常有用。

# c# - 用引号捕获圆括号内的文本

> ID：14837060
> 
> 赞同：-2
> 
> 时间：2013-02-12T16:24:51.527
> 
> 标签：c#, .net

我还是新手使用正则表达式。我在 C# 的一个项目中，需要得到一个括号内的值。代码是`<$ Execute ['WebF'] $>`我想返回值 WebF。Agredeço 非常感谢您的帮助。

@编辑

我的代码`<$Execute['WebF']$>`没有空格

@编辑

感谢 doNet :)。返回值的代码`\<\$+Execute+\['(?<DATA>\w+)'\]+\$\>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:27:41.823

```
\<\$\s+Execute\s+\['(?<DATA>\w+)'\]\s+\$\> 
```

使用 ExplicitCapture 和 IgnoreCase 标志运行它。

# antlr - ANTLR3：匹配所有内容，直到特定关键字

> ID：14837063
> 
> 赞同：4
> 
> 时间：2013-02-12T16:24:57.567
> 
> 标签：antlr, grammar, antlr3

我正在使用 ANTLR 3 执行以下操作。

假设我有一个 SQL 查询。我知道一般来说它是 WHERE、ORDER BY 和 GROUP BY 子句是可选的。就 ANTLR 的语法而言，我会这样描述：

```
查询：select_clause from_clause where_clause？group_by_clause？order_by_clause？

```

每个子句的规则显然将从各自的关键字开始。

我真正需要的是在不处理其内部结构的情况下将每个子句的内容提取为字符串。

为此，我从以下语法开始：

```
询问 ：
    select_clause from_clause where_clause? group_by_clause？order_by_clause？
EOF;

选择子句：
    SELECT_CLAUSE
;

from_clause ：
    FROM_CLAUSE
;

where_clause ：
    WHERE_CLAUSE
;

group_by_clause：
    GROUP_BY_CLAUSE
;

order_by_clause ：
    ORDER_BY_CLAUSE
;

SELECT_CLAUSE : '选择' ANY_CHAR*;

FROM_CLAUSE : '来自' ANY_CHAR*;

WHERE_CLAUSE : '在哪里' ANY_CHAR*;

GROUP_BY_CLAUSE : '分组' ANY_CHAR*;

ORDER_BY_CLAUSE : 'order by' ANY_CHAR*;

ANY_CHAR : .;

WS：''+ {skip();};

```

这个没用。我进一步尝试编写正确的语法，但没有成功。我怀疑这个任务对 ANTLR3 是可行的，但我只是想念 smth。

更一般地说，我希望能够将输入流中的字符收集到单个标记中，直到遇到一个表示新标记开始的特定关键字。这个关键字应该是新令牌的一部分。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:23:23.420

为什么不将它们添加到您的令牌中，而不是将它们移到`ANY_CHAR*`解析器规则中呢？您甚至可以使用重写规则将这些单个标记“粘合”在一起。

快速演示：

```
grammar T;

options { output=AST; }
tokens  { QUERY; ANY; }

query           : select_clause from_clause where_clause? group_by_clause? order_by_clause? EOF
                  -> ^(QUERY select_clause from_clause where_clause? group_by_clause? order_by_clause?)
                ;
select_clause   : SELECT_CLAUSE^ any;
from_clause     : FROM_CLAUSE^ any;
where_clause    : WHERE_CLAUSE^ any;
group_by_clause : GROUP_BY_CLAUSE^ any;
order_by_clause : ORDER_BY_CLAUSE^ any;
any             : ANY_CHAR* -> ANY[$text];

SELECT_CLAUSE   : 'select';
FROM_CLAUSE     : 'from';
WHERE_CLAUSE    : 'where';
GROUP_BY_CLAUSE : 'group' S+ 'by';
ORDER_BY_CLAUSE : 'order' S+ 'by';
ANY_CHAR        : . ;
WS              : S+ {skip();};

fragment S      : ' ' | '\t' | '\r' | '\n'; 
```

如果您现在解析输入：

```
从您的地下室订单中选择任何东西
```

将创建以下 AST：

![在此处输入图像描述](../Images/3bf1990de0cdf61437bf7a5abf945157.png)

尝试在你的词法分析器中做类似的事情会很麻烦，并且意味着一些自定义代码（或谓词）来检查字符流中的关键字（两者都不漂亮！）。

# laravel - 如何获取公共目录？

> ID：14837065
> 
> 赞同：114
> 
> 时间：2013-02-12T16:25:00.067
> 
> 标签：laravel, laravel-4

我是这里的初学者，所以请原谅我使用这个问题`return File::put($path , $data);`在 Laravel 的公共文件夹中创建一个文件。我使用了控制器中的这段代码，我需要知道它的值`$path`应该如何。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2014-05-02T00:07:26.797

利用`public_path()`

**以供参考：**

```
// Path to the project's root folder    
echo base_path();

// Path to the 'app' folder    
echo app_path();        

// Path to the 'public' folder    
echo public_path();

// Path to the 'storage' folder    
echo storage_path();

// Path to the 'storage/app' folder    
echo storage_path('app'); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-12T16:43:13.810

您可以使用 base_path() 来获取应用程序的基础 - 然后只需将您的公用文件夹添加到其中：

```
$path = base_path().'/public';
return File::put($path , $data) 
```

注意：允许人们将文件上传到您的 public_html 根目录时要**非常**小心。如果他们上传自己的 index.php 文件，他们将接管您的网站。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-05T15:29:25.013

我知道这有点晚了，但是如果其他人遇到这种情况，您现在可以使用 public_path(); 在 Laravel 4 中，它已添加到 support 文件夹中的 helper.php 文件中，[请参见此处](https://github.com/laravel/framework/blob/master/src/Illuminate/Support/helpers.php#L764)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-27T14:06:07.570

从 Laravel 配置中检索公用文件夹路径的最佳方法是使用以下函数：

```
$myPublicFolder = public_path();
$savePath = $mypublicPath."enter_path_to_save";
$path = $savePath."filename.ext";
return File::put($path , $data); 
```

没有必要拥有所有变量，但这只是为了演示目的。

希望这会有所帮助，GRnGC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T19:01:30.553

我认为您正在寻找的是asset(''); 创建符号链接后，您可以使用asset('storage')。

# ruby-on-rails - 正确显示验证错误消息 Rails

> ID：14837067
> 
> 赞同：0
> 
> 时间：2013-02-12T16:25:03.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rails-activerecord

我不知道，但在我看来，出现了我的消息，但在出现模型名称之前，在我看来，我这样写：

```
<% @cost.errors.messages.each { |m| %>
<%= m %> 
<%  } if @cost.errors.count > 0 %> 
```

在我的模型中写下：

```
 validates_length_of :types,:minimum => 3,:message => "Precisa ter no minimo 3 caracteres." 
```

但是当rails检测到错误时，消息会出现：

```
typesPrecisa ter no minimo 3 caracteres. 
```

因为模型的名称是什么，请在我看来输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:35:31.907

尝试这个：

```
 <% @cost.errors.full_messages.each do |m| %>
      <%= m %> 
  <%  end if @cost.errors.present? %> 
```

# haskell - Haskell：模式匹配、标识符和运算符

> ID：14837068
> 
> 赞同：2
> 
> 时间：2013-02-12T16:25:05.103
> 
> 标签：haskell, pattern-matching, type-signature

我正在尝试`xor`通过以下方式在 Haskell 中定义使用模式匹配：

```
(xor) :: Bool -> Bool -> Bool
True    xor False   = True
False   xor True    = True
True    xor True    = False
False   xor False   = False 
```

然而，这给出了错误：

```
Invalid type signature: (xor) :: Bool -> Bool -> Bool
Should be of form <variable> :: <type> 
```

我很困惑为什么会抛出这个错误。另外，如果我用脚本加载之`xor`类的东西替换的话。`&&`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T16:27:36.293

只有运算符应该被括在类型签名的括号中，例如

```
(&&) :: Bool -> Bool -> Bool 
```

普通函数应不写，

```
xor :: Bool -> Bool -> Bool 
```

在定义方程式中，您必须将其括在反引号中，

```
True `xor` True = False 
```

如果您想使用中缀表示法定义它。没有反引号，您可以使用前缀符号定义它，

```
xor True False = True 
```

但是请注意，

*   `xor`是`Bits`类中的一个函数，因此使用它`Bool`可能会出乎意料
*   `xor ≡ (/=)`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T16:49:20.587

Haskell 区分*标识符*和*运算符符号*。标识符是字母数字加号`'`，它们本身就是有效的术语；如果标识符`prefix`具有函数类型，则可以将其称为`prefix arg1 arg2`. 运算符名称是符号序列，称为`arg1 !&$ arg2`. ¹ 但有时，您希望将标识符用作中缀运算符或将中缀运算符视为标识符。因此，如果你用```s 包围任何前缀函数名，它就会成为一个运算符，你可以（必须）将它用作中缀：`arg1 `prefixFunc` arg2`。相反，如果你把一个中缀运算符的名字用括号括起来，它本身就在语法上是有效的，所以可以用前缀的形式来调用：`(!&$) arg1 arg2`. ²

在为变量声明类型签名时，您需要将变量的名称*作为标识符*。³ 对于一个普通的函数名，比如`xor`，那只是名字；对于像 . 这样的运算符`&&`，您将其包裹在括号中，如上所述，这就是您编写`(&&) :: Bool -> Bool -> Bool`. 因此，你会写

```
xor :: Bool -> Bool -> Bool
True  `xor` False = True
False `xor` True  = True
True  `xor` True  = False
False `xor` False = False 
```

请注意，我必须进行两项更改。如果您在定义行中省略了反引号，就好像您在尝试进行模式匹配：`True`看起来像一个带有两个参数的构造函数，并且`xor`是第一个参数。⁴

（另外，只是为了踢球，一个更短的定义：`xor = (/=)`:-)）

* * *

### [Haskell 2010 报告](http://www.haskell.org/onlinereport/haskell2010/)中的引用：

¹词法结构在[§2.4](http://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-180002.4)

²表达式结构在[§3.2](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-240003.2)中。

³类型签名的结构见[§4.4.1](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-810004.4.1)，参考§3.2中[var](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-240003.2)*的*定义。

⁴绑定的结构在[§4.4.3](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-830004.4.3)中。

# java - 整数到字符串问题

> ID：14837074
> 
> 赞同：0
> 
> 时间：2013-02-12T16:25:13.927
> 
> 标签：java

在我的 Java 程序中，我通过串口从我的 Arduino 接收到一个字符串。
字符串存储在变量 (string) 中：结果。

数据可能是什么示例：'w: 125'（总是 1 个字符、一个冒号和一个空格，带有来自我的 Arduino 的模拟值）

在我的代码中，我这样做：

```
int spacePos = result.indexOf(" "); // search where the space is
number= result.substring(spacePos+1); // take everything what comes behind the space
System.out.println(number); // print the value, example : 125
int number2 = Integer.parseInt(number);// this should convert the String 125 to a integer with value 125
System.out.println(number2);// should print a integer with value 125 
```

带有子字符串的部分有效；我认为。当我打印数字时，我可以在 NetBeans 的输出屏幕中看到 125，但我可以选择几个空格？？？在我的号码后面。
但是当我打印 number2 时，我什么也没看到。

感谢您提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:30:54.237

您`number= result.substring(spacePos+1);`在数字后面有尾随空格。您需要删除空格，这会通过解析整数导致转换错误。示例使用

```
int spacePos = result.indexOf(" ");
String number = result.substring(spacePos+1);
number = number.trim();//removes trailing whitespace
int number2 = Integer.parseInt(number);
System.out.println(number2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:31:47.257

如果您可以选择数字前的空格，那么您在数字和数字之间有多个空格`:`。执行以下任一操作：

```
int spacePos = result.lastIndexOf(" "); 
```

或者这样做：

```
int number2 = Integer.parseInt(number.trim()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:32:33.693

传递给的字符串中似乎有额外的空格`parseInt`将导致无法到达a`NumberFormatException`和行。`System.out.println(number2)`如果你有一些看起来像的代码

```
try {
  /* ... */
} catch (Exception e) {
  /* do nothing */
} 
```

它使您看不到运行时错误。

# php - Addslashes 只转义简单的引号

> ID：14837078
> 
> 赞同：0
> 
> 时间：2013-02-12T16:25:17.737
> 
> 标签：php, json, string, quotes

我的 PHP 代码中有一些字符串变量，如下所示：

```
"A piece of text with sometimes 'simple quotes' in it, and most important,
some parts "between double quotes" inside the string itself, playing the role
of quotations marks" 
```

不幸的是，我从数据库中获取这些数据，并且需要将其放入 JSON 字符串格式。当我循环生成的 JSON 对象`json_encode`（我将数据作为关联数组与 PDO 获取然后对其进行编码）并`addslashes`用于循环中的每个字符串时，只有简单的引号会被转义。

（我知道它的格式不正确，但这就是我从数据库中获取它的方式......）

最奇怪的是，在文档中，我看到可以使用此函数转义双引号，因此我尝试将另一个引号放在字符串的第一个位置以检查它是否会被转义：

`$mystring = '"' . $mystring;`

它被转义了，我不知道为什么后面出现的其他字符串没有。

**这是我当前的片段（不转义双引号）：**

```
$dbh = new PDO("mysql:host=" . HOST . ";dbname=" . DATABASE, DB_USER, DB_PASSWORD);

$data = $dbh -> query("MY SELECT REQUEST");
$result = $data -> fetchAll(PDO::FETCH_ASSOC);

$result_inter;

foreach ($result as $key => $entry) {
    foreach ($entry as $key2 => $entry_inter) {
        $new_value = $entry_inter;
        $new_value = strip_tags($new_value);
        $new_value = addslashes($new_value);
        $new_key[$key2] = $new_value;
    }
    $result_inter[$key] = $new_key;
}

$result = json_encode($result_inter);
echo($result); 
```

如果有人知道如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:27:07.113

如果你想把它放在 JSON 中，用.[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)代替任何巫术`addslashes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T14:51:41.110

您不需要弄乱`strip_tags`或`addslashes`任何其他功能。如果你想用 JSON 编码你的数组，只需使用`json_encode`.

您可能错过了一个事实，即有不同的可用选项，例如`JSON_HEX_APOS`或者`JSON_HEX_QUOT`如果您想转义引号。

前任：

```
$string = "'apo'";
echo json_encode($string , JSON_HEX_APOS); 
```

将输出`"\u0027apo\u0027"`.

我想这就是你要找的。

# python - 从 GtkDialog (python/Gtk3) 上的 Gtk.TreeView 激活 default_button

> ID：14837079
> 
> 赞同：1
> 
> 时间：2013-02-12T16:25:17.600
> 
> 标签：python, gtk3

我有一个带有 TreeView 和两个按钮（Gtk.ResponseType.CANCEL 和 Gtk.ResponseType.ACCEPT）的对话框窗口。当我在 Gtk.TreeView 中按 Enter 时，我找不到如何激活 ResponseType.ACCEPT 按钮。我在所需按钮上设置了 cant_datault 并在 GtkDialog 上设置了 set_default 但 Gtk.TreeView 没有激活默认方法。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:49:22.543

我能找到的最快方法是在 TreeView 中使用“行激活”信号。每当您按 Enter、双击某个项目或按空格键时，都会激活此功能。

例如：

```
treeview.connect("row-activated", lambda a, b, c: dialog.response(Gtk.ResponseType.ACCEPT)) 
```

我使用 lambda 来创建匿名函数，但如果您还有其他需要同时运行的东西，您可以将其换成适当的函数。

请注意，如果您将来还更改默认响应，则还需要更新此功能。

# jquery - 将事件对象传递给 Jquery 中的函数

> ID：14837080
> 
> 赞同：8
> 
> 时间：2013-02-12T16:25:18.277
> 
> 标签：jquery, function, parameters

通常，我可以将事件传递给匿名 Jquery 函数，如下所示：

```
$(".click_me").on("click", function(e) {
  e.preventDefault();
}); 
```

现在假设我删除了匿名函数，但仍想将事件传递给它：

```
function onClickMe(e){
  e.preventDefault();
}

$(".click_me").on("click", onClickMe(e)); 
```

不幸的是，这并没有按预期工作。我收到此错误：

```
ReferenceError: e is not defined 
```

那么我还能如何将事件传递给外部函数呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-12T16:25:59.887

只需传递函数引用，jQuery 将为您处理传递参数（它*总是*将事件作为第一个参数传递给处理函数）。所以：

```
function onClickMe(e){
  e.preventDefault();
}

$(".click_me").on("click", onClickMe); 
```

# html - 为什么网站图标不起作用？

> ID：14837087
> 
> 赞同：1
> 
> 时间：2013-02-12T16:25:41.700
> 
> 标签：html, web, icons, favicon, bluehost

几个小时以来，我一直在努力让这个网站图标正常工作。我的网站托管在 Bluehost 上，我将 favicon.ico 文件上传到 public_html 文件夹。它始终只在 Safari 和 Chrome 中显示默认的 Bluehost 徽标。在所有元标记之后，我在标题中包含以下内容：

```
<link rel="icon" href="favicon.ico" />
<link rel="shortcut icon" href="favicon.ico" /> 
```

尝试了 16x16 和 32x32 的图标大小，始终命名为 favicon.ico，还尝试将 href="http://www.mydomainname.com/favicon.ico" 放入标签中。我总是在尝试加载网站之前清除缓存。

如果我在 Chrome 中检查页面源，我会看到该网站图标的链接，并且 Chrome 中的页面源页面正确显示了该网站图标。当我单击 favicon 链接然后尝试加载站点时，我想要的 favicon 在返回到默认的 Bluehost 之前会短暂闪烁。

万一这很重要，我只是从 Wordpress 迁移了该站点并删除了所有“wp”文件，但也许留下了一些东西，这把它搞砸了。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:31:15.553

我不确定当您清除浏览器缓存时是否会从缓存中清除，但您可以尝试在路径中添加缓存破坏器。前任：`favicon.ico?ver=20130212`

# delphi - 如何获取 TRichViewEdit 单词坐标？

> ID：14837089
> 
> 赞同：1
> 
> 时间：2013-02-12T16:25:42.360
> 
> 标签：delphi

是否可以在 a 中的单词的屏幕中获取 XY 坐标[`TRichViewEdit`](http://www.trichview.com/)？

如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T17:00:16.910

You can use the [`GetItemCoords`](http://www.trichview.com/help/idh_trichview_getitemcoords.html) method to get the position of an item in the formatted document:

```
procedure TForm1.Button1Click(Sender: TObject);
var
  X, Y: Integer;
begin
  RichViewEdit1.Add('Hello ', 0);
  RichViewEdit1.Add('world!', 0);
  RichViewEdit1.Format;

  RichViewEdit1.GetItemCoords(2, X, Y);
  ShowMessage('Position of the second word: [' + IntToStr(X) + '; ' +
    IntToStr(Y) + ']');
end; 
```

# javascript - 最小和最大输入字段验证

> ID：14837092
> 
> 赞同：2
> 
> 时间：2013-02-12T16:25:54.740
> 
> 标签：javascript, jquery, validation

尝试为输入字段创建验证，这将在输入字段旁边放置一条消息。如您所见，用户不能输入任何低于 500 或高于 800 的值

```
<input type="text" name="amount" id="amount" maxlength="6" autocomplete="off"/>
<span class="paymentalert"></span> 
```

请原谅我的javascript，因为我还在学习。

```
$(function(){
    var min = 500.00;
    var max = 800.00;
    if ("#amount" < 500.00){
         return ("Your payment must be between £500 and £800");
        else if ("#amount" > 800.00)
         return ("Your payment must be between £500 and £800");
    else return false;
    }; 
```

尝试使用 Stackoverflow 中的示例但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:30:38.827

开始，`"#amount"`只是一个字符串。您想要的是带有 of 的元素的`id`值`amount`；`"#amount"`是该元素的正确选择器，但您需要将其传递给 jQuery 函数才能实际选择它。所以：

```
var amountInput = $("#amount"); 
```

这为您提供了一个包含您的文本输入元素的 jQuery 对象。现在，您需要该输入的值，因此您需要调用该`.val()`jQuery 对象上的函数。但是，请记住，文本输入的值存储为字符串，因此在将其用作数字之前，您需要将其转换为数字。

```
var amount = parseFloat(amountInput.val(), 10); 
```

整个事情：

```
var min = 500.00;
var max = 800.00;
var amountInput = $("#amount");
var amount = parseFloat(amountInput.val(), 10);
if (amount < 500.00){
     return ("Your payment must be between £500 and £800");
else if (amount > 800.00)
     return ("Your payment must be between £500 and £800");
else return false; 
```

尽管您当前正在调用中调用您的代码`$(document).ready(function() {...})`-`$(function() {...})`是一种速记 - 所以它会在页面“加载”后立即执行（实际上是在 DOM 完成构建后，但在图像等完成加载之前）。这可能不会有太大用处，因为您的用户没有时间输入值。

相反，将它绑定到一个事件，也许单击一个带有`id`of的按钮`validate`：

```
$('#validate').on('click', function(e) {
    // code above here
}); 
```

我还建议阅读[一些介绍性的 jQuery 教程](http://docs.jquery.com/Tutorials)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:32:39.890

您当前在加载 dom 后立即运行此函数一次，而不是再次运行。您需要在输入更新时运行它。您可能想为此查看`blur`元素：http: [//api.jquery.com/blur/](http://api.jquery.com/blur/)

您还将字符串“#amount”与一个数字进行比较。您需要像这样比较字段的值：

```
if (parseFloat($("#amount").val(),10) < 500.00){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:34:58.357

见[演示](http://jsfiddle.net/skYqw/2/)。

```
$("#amount").bind("keyup keydown", function() {
    var amount = parseFloat($(this).val());
    if (amount) {
        if (amount < 500 || amount > 800) {
            $("span.paymentalert").html("Your payment must be between £500 and £800");
        } else {
            $("span.paymentalert").html("");
        }
    } else {
        $("span.paymentalert").html("Your payment must be a number");
    }
}); 
```

# c++ - 为什么先调用基类构造函数再调用派生类构造函数

> ID：14837094
> 
> 赞同：5
> 
> 时间：2013-02-12T16:25:57.657
> 
> 标签：c++, constructor, destructor

根据c++规则，定义派生类对象时，先调用基类构造函数初始化基类成员，再调用派生类构造函数。对于析构函数，规则恢复。

我想知道为什么要遵守这条规则。为什么首先是基类构造函数，然后是派生类构造函数？这样做有什么理由吗？或者只是因为它是 c++ 的定义。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T16:33:05.470

因为派生类的成员可能依赖于基类的成员，所以必须首先初始化基类的成员。

你不能反驳相反的观点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T16:55:40.433

类类型的对象由子对象组成——它的基类子对象和（非静态）数据成员。

在构造子对象之前，取而代之的是未初始化的原始存储，您不得将其用作对象。

对象的子对象是在对象的构造函数体进入之前构造的，这样就可以在构造函数体中使用这些子对象。

在成员子对象之前构造基类子对象只是一个规则，但可能受以下观察的启发：

*   派生对象**是**基础对象，并添加了其他成员和行为。在添加新零件之前，首先构建派生零件所在的基础零件似乎很自然。
*   在构造基类子对象时，您可以通过它的常规接口使用它（多态行为除外），包括在数据成员的初始化中。反之则不然：在完全构造派生对象（包括基类子对象）之前，您不能以常规方式（通过封装成员函数）访问派生类成员。

这种构造顺序的技术原因是编译器通常会在构造函数中初始化多态性（vtable 指针）所需的数据。因此，首先基类构造函数为其类初始化 this，然后派生类构造函数为派生类覆盖此数据。这也对应于构造函数中多态函数的行为规则。

# php - Laravel 中的多站点框架

> ID：14837098
> 
> 赞同：2
> 
> 时间：2013-02-12T16:26:07.007
> 
> 标签：php, views, laravel-3, sites

我刚刚开始使用 Laravel 3 开发内容管理框架。它不是为数据库驱动的应用程序而设计的（可能稍后会出现）。它专为希望以简单且对 SEO 友好的方式制作静态网站的网页设计师而设计。

简而言之，设计者只需要通过使用文件夹结构来创建一个默认站点和任何其他 [可选] 站点（使其成为一个多站点框架，如 Drupal）。

目前，结构设计如下（尚未实现，只是一个想法；也是对 Laravel 标准路径结构的改动）：

```
public[_html]
root
    app // application folder
    bundles
    sites
        sites.json // used to determine the default site, and register any others
        {site-slug}
            info.json
            content // for page content that inherits a layout
                {page-slug}
                    info.json
                    content.blade.php
            layouts // site layouts: headers, footers, etc.
    stores // storage folder
    system // laravel folder 
```

这是我现在的主要问题：我不知道如何扩展 View 类以查看标准`views`文件夹之外而不必使用`path:`前缀。

这样做的最佳方法是什么？

也许还有另一个模板引擎可以让我更轻松地完成这项任务？Laravel 3 是否有合适的 HAML 引擎？

**注意：**我知道有使用 Markdown 的内容包，但这不是我想要的。

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:58:58.673

在 views.php 配置文件中，您应该能够将要包含的所有目录添加到数组中

编辑

抱歉，这是针对 laravel 4。我会扩展视图类并让它搜索路径数组是 View::path 方法。您可以使用配置文件设置此数组，因此您调用的路径将是 Config::get('views')

我的解决方案

前段时间我在做一个项目，想出了一个避免修改任何核心文件的解决方案。

在应用程序/start.php

```
Event::listen(View::loader, function($bundle, $view)
{
    foreach (Config::get('views', array()) as $path) {
        if($file = View::file($bundle, $view, $path))
            return $file;
    }

    return View::file($bundle, $view, Bundle::path($bundle).'views');
}); 
```

在 application/config/views.php 中（你必须创建这个）

```
return array(
    path('app').'../myviews',
); 
```

现在您可以将任意数量的目录添加到该文件中，并且将在检查默认视图目录之前检查它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-21T07:50:04.473

我正在使用这个：

创建中间件 setDB：

```
namespace App\Http\Middleware; 

use Cookie;  
use Config;  
use Closure;  
use DB;  
use App\User;  
use App\Common;  
use Auth;  
use Session;  
use View;  
use Illuminate\Contracts\Foundation\Application;   

class SetDB
{  
   public function __construct(Application $app){   
       $this->app=$app;  
   }  
   public function handle($request, Closure $next)  
   {  
        $server=$_SERVER["SERVER_NAME"];  
        $paths = 'resources/views';    
        $asset = 'public';  
        $result=DB::connection('mysql2')->table('mst_editor_database_info')->where("paths",$server)->first();   
        DB::disconnect(env('DB_DATABASE'));

        if(count($result) > 0){ 

            $dbname=$result->dbname;   
            $paths = 'themes/'.$result->paths.'/views';   
            Session::put('paths',$paths);  
            Session::put('asset','themes/'.$result->paths.'/assets');   
            Config::set('database.connections.mysql', array(
                   'driver' => 'mysql',
                   'host' => env('DB_HOST'),
                   'port' => env('DB_PORT'),
                   'database' =>$dbname,
                   'username' => 'username',
                'password' => 'password',
                'charset' => 'utf8',
                'collation' => 'utf8_unicode_ci',
                'prefix' => '',
            ));
            DB::reconnect('mysql');

        }else{

            DB::disconnect('mysql');
            Config::set('database.connections.mysql', config('database.connections.mysql2'));
            DB::reconnect('mysql');
            Session::put('paths',$paths);
            Session::put('asset',$asset);
        }
        Common::setTheme();
        Config::set('site.asset', Session::get('asset'));
        return $next($request);
    }
} 
```

创建类 App\Common.php：

```
namespace App;
use Config;
use Session;
use Illuminate\Database\Eloquent\Model;
use View;

class Common extends Model
{
   public static function setTheme(){
       Config::set('view.paths', Session::get('paths'));
       View::addNamespace('Theme', Session::get('paths'));
    }
} 
```

使用命名空间主题：

```
return View::make('Theme::welcome'); 
```

在 kernel.php 中注册中间件：

```
protected $middlewareGroups = [
  'web' => [
    \App\Http\Middleware\SetDB::class,
  ]
]; 
```

在 config/database.php 中设置默认数据库连接：

```
'connections' => [

'mysql' => [
'driver' => 'mysql',
'host' => env('DB_HOST'),
'port' => env('DB_PORT'),
'database' => env('DB_DATABASE'),
'username' => env('DB_USERNAME'),
'password' => env('DB_PASSWORD'),
'charset' => 'utf8',
'collation' => 'utf8_unicode_ci',
'prefix' => '',
'strict' => true,
'engine' => null,
],

'mysql2' => [
'driver' => 'mysql',
'host' => env('DB_HOST'),
'port' => env('DB_PORT'),
'database' => env('DB_DATABASE'),
'username' => env('DB_USERNAME'),
'password' => env('DB_PASSWORD'),
'charset' => 'utf8',
'collation' => 'utf8_unicode_ci',
'prefix' => '',
'strict' => true,
'engine' => null,
],

], 
```

设置配置/view.php：

```
 'paths' => [base_path('/')], 
```

创建您的模板文件夹

```
themes/{paths}/views 
```

# ios - Flurry Ads iOS 横幅关闭

> ID：14837106
> 
> 赞同：2
> 
> 时间：2013-02-12T16:26:21.330
> 
> 标签：ios, objective-c, ads, banner, flurry

有人有使用 Flurry Ads 的经验吗？我能够展示他们的测试广告。但是，当我显示横幅广告时，用户没有“x”来关闭广告本身。有谁知道这是否是故意的？我是否必须编写自己的代码才能为用户提供特定的横幅关闭操作？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:59:27.117

我使用 Flurry Ads，不，他们的横幅上没有内置的关闭按钮。如果您希望用户能够关闭横幅，您需要创建自己的 UI 并`removeAdFromSpace`在您的广告空间上实施该方法。

# c++ - libevent evhttp 和 ipv6

> ID：14837107
> 
> 赞同：1
> 
> 时间：2013-02-12T16:26:21.620
> 
> 标签：c++, c, ipv6, libevent

我正在尝试使用 libevent 和 evhttp 从站点中获取一些数据。我的程序基于[此。](https://stackoverflow.com/questions/5237963/cross-platform-c-c-http-library-with-asynchronous-capability/5237994#5237994) 它与 ipv4 完美配合，但我也想将它与 ipv6 一起使用。我得到了 ip，所以不需要解析主机。

libevent（使用 2.0.21）是否支持 ipv6？

我使用[http://ipv6.test-ipv6.com/](http://ipv6.test-ipv6.com/)检查了我的 IPv6 配置，应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:25:53.873

是的，libevent 确实支持 IPv6，例如：

[http://archives.seul.org/libevent/users/Feb-2011/msg00011.html](http://archives.seul.org/libevent/users/Feb-2011/msg00011.html)

这当然也适用于 evhttp 组件。

# iphone - 我的应用程序如何识别歌曲已完成？

> ID：14837111
> 
> 赞同：1
> 
> 时间：2013-02-12T16:26:34.633
> 
> 标签：iphone, xcode, avaudioplayer

我正在开发我的第一个应用程序。它播放一首 mp3 歌曲。一切正常，但我需要应用程序识别声音完成，然后将按钮“暂停”图像更改为“播放”图像。我已经可以做到这一点，但只是在按下按钮时，而不是在歌曲结束时。

另一个问题是，当歌曲在停止->播放后重新开始时，它不会以之前的音量设置继续播放（有一个滑块）。播放器以最大音量启动。我可以更改音量滑块的位置，但我无法让应用程序在重新启动时尊重设置的音量。

任何帮助将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:26:40.663

使用“AVAudioPlayerDelegate 协议委托”时，请不要忘记设置委托（例如）如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"33fr" ofType:@"mp3"];
    NSURL *fileURL = [NSURL fileURLWithPath:path];
    NSError *error = nil;

    myPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:&error];

    if (error) {
         NSLog(@"error = %@", error);
         return;
         }

    [myPlayer setDelegate:self]; <<=== HERE!

} 
```

我在这里上传了示例代码。请检查一下。-> [http://yahoo.jp/box/X7Hxfk](http://yahoo.jp/box/X7Hxfk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:40:38.977

我没有做太多的 Objective-C，但看起来你需要实现一个委托。

我引用：“您实现了一个委托来处理中断（例如来电）并在声音播放完毕时更新用户界面。”

我只是在这里阅读 AVAudioPlayer 类参考： [https ://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008067](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008067)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:52:39.113

你可以使用`AVAudioPlayerDelegate protocol delegate`

> 音频播放器播放完歌曲后（如果播放成功），将在音频播放器的委托对象中调用音频 PlayerDidFinishPlaying:successfully: 委托方法。我们可以像下面这样实现这个方法（这个方法在 AVAudioPlayerDelegate 协议中定义）：

```
 - (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player  successfully:(BOOL)flag
{ 
   if (flag)
{   
 NSLog(@"Audio player stopped correctly.");
  } 
else 
{    NSLog(@"Audio player did not stop correctly."); 
 }  
  if ([player isEqual:self.audioPlayer])
{    self.audioPlayer = nil; 
 }
 else
 {    /* This is not the player */  }
  } 
```

在 .h 文件中添加委托，如下代码

```
@interface yourViewController : UIViewController <AVAudioPlayerDelegate> 
```

# php - jquery ajax 传递 sql 查询

> ID：14837113
> 
> 赞同：3
> 
> 时间：2013-02-12T16:26:36.513
> 
> 标签：php, jquery, mysql, ajax, json

我正在使用 ajax 调用来查询数据库。我想将复杂的 sql 查询作为 ajax 数据的一部分传递。这是我应该这样做的方式吗？

```
var myQuery = 'select * from table....';        

$.ajax({
    type: "GET",
    url: 'jsonQuery.php',
    dataType: 'json',
    data: {keyvalue: 2416, q: myQuery},
    success: function(pieData) {
        //do something with the response        
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:28:42.277

是的，有更好的方法。将查询保留在`.php`页面上并发送一个帖子类型，告诉您使用哪一个。

例子：

```
data: {keyvalue: 2416, q: 2}, 
```

然后，您获取对应于数字 2 的查询并使用它！无需传递 SQL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:53:45.757

正如其他人所说，绝对不要在 AJAX 调用中直接发送 SQL。黑客可以轻松编写自己的 SQL 查询来执行他们想要在您的数据库上执行的任何代码。Insead，您可以通过 POST 传递您想要过滤的几个不同字段值（例如，“name”值或“key”或“age_range”）。然后，在接收端设置 PHP 以了解何时使用这些值；如果存在键，则将其用作标识符并使​​用查询 X。如果不存在键，则检查名称或其他值以执行对正确行的搜索，并将它们插入查询 Y。

正如 IngodItrust 所说，您还可以发送一个 POST 值来指定要使用的查询，即

```
q: 'LongerQuery' 
```

然后在接收 PHP 中，有几个 IF 或 CASE 语句，它们根据存在的 Q 值准备不同的查询。

我的网站有一个图表生成器，用户可以在其中更改 X 轴和 Y 轴上的数据设置、数据是否分成不同的系列以及如果用户只想查看数据池应如何过滤特定的人口统计。当用户单击“生成”按钮时，这些设置通过 AJAX/POST 发送。接收 PHP 页面基于这 20 个输入构建图表数据查询；根据用户选择的设置，生成的查询可能看起来完全不同。我这样描述是为了说明 AJAX 可用于构建一些极其灵活和用户响应的查询，而不会产生安全风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:31:39.800

如果我理解你的意思，你实际上不应该直接将任何 SQL 传递给 jsonQuery.php。这样做会使您面临 SQL 注入攻击。见[http://bobby-tables.com/](http://bobby-tables.com/)只是谷歌这个词。

相反，将参数传递给您的脚本，例如 jsonQuery.php?do=SEARCH&itemID=12&type=RED_ONES 并使用这些参数在 jsonQuery.php 中创建您的查询。虽然之前检查每个预期值..

# db2 - 获取 DB2 表上所有列的大小

> ID：14837116
> 
> 赞同：0
> 
> 时间：2013-02-12T16:26:48.363
> 
> 标签：db2

我被要求确定我们的应用程序使用了多少数据以及它的增长速度。问题是许多应用程序共享相同的数据库和表，并使用一个列来确定数据属于哪个应用程序。它是一个 DB2 数据库。

有什么方法可以找到表用于给定行的所有列的大小（以字节为单位）？重要的是我只选择那些属于我的应用程序的行。

如果一列不可为空，我不会将其包含在 SQL 中，我只需将其大小乘以行数。我主要试图确定可空和可变大小列的平均大小（我们使用 VARCHAR 和 BLOB）。

目前我正在做的事情看起来像这样：

```
SELECT VALUE(LENGTH(COLUMN_1), 0) AS LEN_COL_1, repeat for each variable size column
FROM TABLE T
WHERE T.APP_ID = my app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:48:16.017

确定大小的最准确方法是查看构成 DB2 表的文件的大小。

将文件大小除以属于您的应用程序的行的百分比。

这样，您就可以计算 DB2 的大部分开销大小，包括索引。

# vim - 如何管理 vim 映射

> ID：14837117
> 
> 赞同：1
> 
> 时间：2013-02-12T16:26:49.133
> 
> 标签：vim, mapping

如何管理 Vim 映射，因为每个插件（Pathogen 是用于管理 Vim 插件的好工具）都有自己的映射。碰撞经常发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:07:06.247

每个插件都应该附带一个描述（最好通过内置的 访问`:help`），其中包括它定义的命令和映射。无论如何，您都需要阅读它，以了解新功能。您还应该记住插件的映射之一是否与您的现有映射冲突。`:verbose map ...`是调查现有映射的一种简单而有效的方法。

在发生冲突的情况下，插件使用`:map <unique>`会明显失败，但大多数插件只会默默地覆盖已获取的映射。为了解决这个问题，插件应该定义`<Plug>...`映射（请参阅`:help using-<Plug>`；如果没有，请向作者投诉），它允许您重新定义映射（根据您的喜好或避免冲突）在您的`~/.vimrc`. 例如：

```
:nmap <C-o> <Plug>EnhancedJumpsOlder 
```

同样也可以用来完全禁用映射：

```
:nmap <Plug>DisableEnhancedJumpsNewer <Plug>EnhancedJumpsNewer 
```

除非你有很多自定义映射（例如，在 Vim 中模拟不同编辑器的感觉，这是你不应该做的），或者你正在使用很多插件，否则冲突不应该那么频繁。

# android - Android zxing 库生成的二维码不能用大多数二维码扫描仪扫描

> ID：14837118
> 
> 赞同：3
> 
> 时间：2013-02-12T16:27:02.317
> 
> 标签：android, qr-code, zxing

我发布这个是为了回答我自己的问题（以防万一其他人遇到这个问题。）

我正在使用 ZXing 的 Android 库生成一个二维码。二维码生成正确，我可以显示它（在使用`QRCode.getMatrix().getArray()`.

此外，每当我为 设置纠错级别时`[Encoder](http://zxing.org/w/docs/javadoc/com/google/zxing/qrcode/encoder/Encoder.html)`，它都会忽略它并使用一些随机级别（通常是 Q 级别）进行编码。

我用这段代码生成二维码：

```
    二维码；

    尝试
    {
            code = Encoder.encode("...QRCODEDATA...", ErrorCorrectionLevel.L);
    }
    捕捉（WriterException ex）
    {
            log("获取二维码失败");
            返回空值；
    }

```

...然后，在获得`QRCode`对象后，我像这样绘制位图：

`byte[][] bitArray = qrCode.getMatrix().getArray();`

 ````
 if(bitArray == null || bitArray.length < 1)
            return null;

        for(int x = 0;x < bitArray.length;x++)
        {
            for(int y = 0;y < bitArray[x].length;y++)
            {
                if(bitArray[x][y] == 0)
                    bitmapDrawCell(x,y,WHITE);
                else
                    bitmapDrawCell(x,y,BLACK);
            }
        } 
````  `[这](http://i.imgur.com/pWTEH7x.jpg)就是我最终的结果。

它看起来正确，但它不会扫描。少数二维码扫描仪仍会扫描它，但大多数不会。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:49:25.643

这个问题的答案：

二维码实际上是翻转的。虽然 ZXing 文档没有解释如何索引到 qrCode.getMatrix().getArray() 返回的数组，但它假定您将它索引为 [y][x]，然后在 (x,y) 处绘制该单元格）。问题中发布的代码将数组索引为 [x][y]，它沿 Y=X 线翻转图像。

生成的二维码看起来是合法的，但只有“智能”扫描仪才能检测到这种翻转并对其进行扫描。

纠错级别位也在对角，因此如果您要手动验证（查看图像右下角的几个位），库似乎忽略了纠错设置。

![翻转二维码](../Images/68bea3772ff82a6fffe5906b803567d4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:35:30.377

不一定是您问题的答案，但您可以考虑使用 Google 的 QR 生成器。我用过它，它很简单。[谷歌二维码](http://createqrcode.appspot.com/)`

# c++ - Lint 无法识别 std::string 类

> ID：14837125
> 
> 赞同：3
> 
> 时间：2013-02-12T16:27:25.743
> 
> 标签：c++, stl, pc-lint

我正在尝试整理我的项目。但似乎 Lint 无法识别`std::string`,`std::vector`和等类`std::queue`。我`lib-std.lnt`也在使用配置文件，但没有用，面临如下错误。

错误 40：未声明的标识符“队列”

错误 40：未声明的标识符“字符串”

错误 10：期望结构或联合

有谁知道如何解决这个问题？

* * *

对于示例代码： -

```
#include<string>

int main(void) 
{
    std::string str;  
    return ;
} 
```

==================================== 输出如下

* * *

```
/>lint-nt -iC:\ghs\comp_20121\ansi  proj2.lnt snip.cpp
PC-lint for C/C++ (NT) Vers. 8.00x, Copyright Gimpel Software 1985-2008 
```

--- 模块：snip.cpp (C++)

```
typedef wchar_t _Wchart;

C:\ghs\comp_20121\scxx\yvals.h:747  Warning Error 10: Expecting ';'

C:\ghs\comp_20121\scxx\yvals.h:747  Warning Error 19: Useless Declaration

std::string str;

snip.cpp:4  Warning Error 40: Undeclared identifier 'string'

snip.cpp:4  Warning Warning 522: Expected void type, assignment, increment or decrement

snip.cpp:4  Warning Error 10: Expecting ';' 
```

# java - 求源码：数组的clone()方法在哪里实现？

> ID：14837139
> 
> 赞同：11
> 
> 时间：2013-02-12T16:27:57.580
> 
> 标签：java, arrays, eclipse, clone

```
new String[] { "foo", "bar" }.clone(); 
```

*使用我最喜欢的 IDE（即 Eclipse），我想通过Ctrl 键单击*它来查看上述`clone()`方法的源代码（像往常一样），但它把我带到了原生的 IDE，它只提供签名而不提供方法的主体。*`Object`*

 *自动完成告诉我上述`clone()`方法属于`String`类（`clone() : String[] - String`），但类的源代码`String`没有提供这样的方法（因为我正在处理`String[]`类......）。

那么，该实现隐藏在哪里？应该修复自动完成功能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T16:33:47.890

克隆数组的代码在 JVM 中（它是本机方法）。对于热点，它在 jvm.cpp 的第[550/560](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/prims/jvm.cpp)行左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:41:59.040

令人困惑的是 Eclipse 说数组的`clone`方法在类中。但是String 数组的方法是从.`String``String``length``String[]`

![在此处输入图像描述](../Images/e392bdcd8ba12d2f1e708b9257f6cec7.png)*

# android - 如何使用多部分帖子实体上传视频？

> ID：14837143
> 
> 赞同：0
> 
> 时间：2013-02-12T16:28:10.823
> 
> 标签：android

我使用在某些页面中找到的此代码，但我只能将图像从我的 android 应用程序上传到服务器并且正在工作，但是当我上传视频（.mp4）时，它会保存为未知的“文件”。

```
public void upload() throws Exception {
    //Url of the server
    String url = "";
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);
    MultipartEntity mpEntity = new MultipartEntity();
    //Path of the file to be uploaded
    String filepath = "";
    File file = new File(filepath);
    ContentBody cbFile = new FileBody(file);        

    //Add the data to the multipart entity
    mpEntity.addPart("image", cbFile);
    mpEntity.addPart("name", new StringBody("Test", Charset.forName("UTF-8")));
    mpEntity.addPart("data", new StringBody("This is test report", Charset.forName("UTF-8")));
    post.setEntity(mpEntity);
    //Execute the post request
    HttpResponse response1 = client.execute(post);
    //Get the response from the server
    HttpEntity resEntity = response1.getEntity();
    String Response=EntityUtils.toString(resEntity);
    Log.d("Response:", Response);
    //Generate the array from the response
    JSONArray jsonarray = new JSONArray("["+Response+"]");
    JSONObject jsonobject = jsonarray.getJSONObject(0);
    //Get the result variables from response 
    String result = (jsonobject.getString("result"));
    String msg = (jsonobject.getString("msg"));
    //Close the connection
    client.getConnectionManager().shutdown();
} 
```

有什么方法可以使这项工作也可以上传视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:59:07.130

此代码对于上传视频和图像没有问题，问题是我缺少名称中的文件扩展名，所以当视频上传时，它应该是 NAME.EXTENSION 而不仅仅是 NAME。

注意：对于所有试图将大型（2MB-10GB）图像或视频上传到服务器的人，我发现的唯一解决方案是将文件编码成块并将每个块上传到服务器，从那里你只需要编码再次大块。没有尺寸限制:)!!!!

# c# - 使用变量访问图表

> ID：14837148
> 
> 赞同：4
> 
> 时间：2013-02-12T16:28:21.073
> 
> 标签：c#, winforms, devexpress

我有一个 C# WinForms 应用程序，它有四个图表控件，用于以图形方式显示一些分析结果。

我有适用于每个图表的代码，但是为了提高效率和重用代码，我定义了一个代码块：

*   创建所需的系列，
*   从数据库中提取数据并将结果分配给适当的系列
*   将系列添加到图表
*   自定义图表外观。

由于数据在设计时不存在，因此上述所有操作都是动态完成的。

我希望重用的工作代码是：

```
// Add both series to the chart.  
ChartName.Series.AddRange(new Series[] { series1, series2 });  

// Cast the chart's diagram to the XYDiagram type, to access its axes.  
XYDiagram diagram = (XYDiagram)ChartName.Diagram; 
```

我想将`ChartName`对象更改为一个变量，我可以传递每个图表以重用代码。类似的东西（注意这不起作用）： -

```
var VChart = this.Controls.Find(ChartName, true);  

// Add both series to the chart.  
VChart.Series.AddRange(new Series[] { series1, series2 });  

// Cast the chart's diagram to the XYDiagram type, to access its axes.  
XYDiagram diagram = (XYDiagram)VChart.Diagram; 
```

任何关于如何将变量传递到 ChartName 的想法、提示、技巧等都将不胜感激。

完整代码：

```
 void Generate_Chart()
    {
        // Create two stacked bar series.
        Series series1 = new Series("Data", ViewType.Bar);
        Series series2 = new Series("Ben", ViewType.Line);

        try
        {                    
            using (var cmd = new SQLiteCommand(m_dbConnection))
            for (int i = LoopMin; i < LoopMax; i++)
            {
                // Retrieve the actual calculated values from the database
                cmd.CommandText = "SELECT " + Chart_SourceActualValue + " FROM " + Chart_SourceTable + " WHERE Value = " + i + "";
                Chart_SeriesA_Value = Convert.ToInt32(cmd.ExecuteScalar());

                // Retrieve the expected values from the database
                cmd.CommandText = "SELECT " + Chart_BenExpValue + " FROM " + Chart_SourceTable + " WHERE Value = " + i + "";
                Chart_SeriesB_Value = Convert.ToInt32(cmd.ExecuteScalar());

                // Add the dynamically created values to a series point for the chart
                series1.Points.Add(new SeriesPoint(i, Chart_SeriesA_Value));
                series2.Points.Add(new SeriesPoint(i, Chart_SeriesB_Value));
            }
        }
        catch (Exception)
        {                
            throw;
        }

        // Add both series to the chart.
        //this.Controls.Find(varChart, true)
        ChartName.Series.AddRange(new Series[] { series1, series2 });

        // Remove the GridLines from the chart for better UI
        // Cast the chart's diagram to the XYDiagram type, to access its axes.
        XYDiagram diagram = (XYDiagram)ChartName.Diagram;
        // Customize the appearance of the axes' grid lines.
        diagram.AxisX.GridLines.Visible = false;
        }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T02:00:43.493

听起来您要求`ChartName`用变量替换硬编码，以便您可以四次不同地调用例程，每次使用不同的图表。我已经获取了您的代码并替换了图表控件和设置的一些全局变量，并将它们作为您传递给函数的参数：

```
void Generate_Chart(DevExpress.XtraCharts.ChartControl chartCtrl,
                   string chart_sourceActualValue,
                    string chart_sourceTable,
                   string chart_benExpValue
                   )
    {
        // Create two stacked bar series.
        Series series1 = new Series("Data", ViewType.Bar);
        Series series2 = new Series("Ben", ViewType.Line);

        try
        {                    
            using (var cmd = new SQLiteCommand(m_dbConnection))
            for (int i = LoopMin; i < LoopMax; i++)
            {
                // Retrieve the actual calculated values from the database
                cmd.CommandText = "SELECT " + sourceActualValue + " FROM " + 
                     chart_sourceTable + " WHERE Value = " + i + "";
                Chart_SeriesA_Value = Convert.ToInt32(cmd.ExecuteScalar());

                // Retrieve the expected values from the database
                cmd.CommandText = "SELECT " + chart_benExpValue + " FROM " + 
                         chart_sourceTable + " WHERE Value = " + i + "";
                Chart_SeriesB_Value = Convert.ToInt32(cmd.ExecuteScalar());

                // Add the dynamically created values 
                // to a series point for the chart
                series1.Points.Add(new SeriesPoint(i, Chart_SeriesA_Value));
                series2.Points.Add(new SeriesPoint(i, Chart_SeriesB_Value));
            }
        }
        catch (Exception)
        {                
            throw;
        }

        // Add both series to the chart.
        chartCtrl.Series.AddRange(new Series[] { series1, series2 });

        // Remove the GridLines from the chart for better UI
        // Cast the chart's diagram to the XYDiagram type, to access its axes.
        XYDiagram diagram = (XYDiagram)chartCtrl.Diagram;
        // Customize the appearance of the axes' grid lines.
        diagram.AxisX.GridLines.Visible = false;
        }        
} 
```

然后，您最终使用原始值作为参数调用此方法：

```
void Generate_Chart(ChartName, Chart_SourceActualValue, Chart_SourceTable, 
                    Chart_BenExpValue);

// call it three other times passing in the different specifics for that chart. e.g.
void Generate_Chart(SomeOtherChartName, SomeOtherChart_SourceActualValue, 
                    SomeOhterChart_SourceTable, SomeOtherChart_BenExpValue);

..... 
```

# javascript - JavaScript 模式：将 ClassA 属性“复制”到 ClassB

> ID：14837150
> 
> 赞同：1
> 
> 时间：2013-02-12T16:28:24.560
> 
> 标签：javascript, class, design-patterns, prototype, this

在一些大型项目中看到了这种 JavaScript 模式，它将 ClassA 的属性“复制”或“实现”到 ClassB，但无法弄清楚在传递ClassB 实例作为“this”绑定？

```
var ClassA = function() {
    //this function is totally empty
};

ClassA.prototype = {
    jump: function() {...some code...},
    dance: function() {
        if (this.canDance) {
            alert("dance");
        }
    }
};

ClassA.implementOn = function(targetClassOrObject) {
    for ( var prop in ClassA.prototype ) {      
        targetClassOrObject[ prop ] = ClassA.prototype[ prop ];
    }
};

var ClassB = function() {
    this.canDance = true;
    ClassA.call(this);          // <------------What's the purpose of this line?
};

ClassA.implementOn(ClassB.prototype);

var instanceOfB = new ClassB();
instanceOfB.dance(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:19:20.693

如果`ClassA`构造函数是空的，这没什么大不了的—— `call`ing`ClassA`的空构造函数绝对什么都不做。

但是，当您决定希望`ClassA`的构造函数为非空时，您会看到该行现在具有非常重要的效果：构造`ClassB`对象还会在新构造的对象的上下文中调用 - 特定的`ClassA`构造函数行为`ClassB`，这如果`ClassB`是`ClassA`.

（当然，JavaScript 没有适当的“子类”，但这显然是在尝试在语言中实现基于类的行为。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:18:27.367

> 使用“.call()”在 ClassB 的构造函数中调用 ClassA 的空构造函数的目的

让脚本在`ClassA`不为空时仍然有效。当然，目前它什么也没做，但将来可能会改变。因此，实现完整的继承模式是一种很好的做法，这样可以更容易地在以后更改代码而不会引入错误。

一旦`ClassA`更改以实现自定义实例特定属性（在构造函数中设置），您也希望将它们放在`ClassB`实例上。因此，您也在实例初始化期间调用实例的`ClassA`构造函数。`ClassB`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:19:24.363

如果`ClassA`构造函数是空的（就像在您的示例代码中一样），那么是的，它什么也不做。

但是，您看到这种模式的原因是在它不是的时候。它类似于`super`基于类的 OO 语言中的调用。

如果您必须在构造函数中做一些工作`ClassA`以获取处于正确状态的对象，那么您很可能希望在“子类”中做同样的工作。仅仅复制原型的属性可能还不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:18:10.557

使用`.call`，您可以将`this`被调用方法中的值更改为您指定的参数。 `ClassA.call(this)`调用`ClassA`构造函数`ClassB`作为上下文。这允许您使用`ClassB`in`ClassA`方法的属性。这些方法都被复制到`ClassB`via `ClassA.implementOn`。

您会注意到`(new ClassA()).dance()`它什么也没做，但会发出`(new ClassB()).dance()`警报，`"dance"`因为`this.canDance`它是真的。

演示：http: [//jsfiddle.net/5v7xh/](http://jsfiddle.net/5v7xh/)

# c++ - 如何使用 g++ 正确链接静态库？

> ID：14837151
> 
> 赞同：0
> 
> 时间：2013-02-12T16:28:24.940
> 
> 标签：c++, c, gcc, linker, g++

我正在尝试做一个相当复杂的构建，但是对于这个问题，我会稍微简化一下。我有三个 c++ 文件（main.cpp file2.cpp 和 file3.cpp），我正在尝试编译并链接到 3 个静态库（libx.a liby.z libz.a）以生成可执行文件。

有很多依赖关系。

所有三个 c 文件都依赖于所有 3 个库。libx 依赖于 liby 和 libz。最后，libx 还依赖于 file2.cpp 中包含的几个回调函数。

什么命令行可以正确构建它？我已经尝试了几十种变体，但没有任何东西能满足链接器的要求。

如果重要的话，这些库是用 gcc 编译的纯 c 代码。源代码是 c++，我正在用 g++ 编译/链接。我将它作为一个 Visual Studio 项目正常工作，并且正在尝试移植到 linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:32:32.283

从你的帖子：

```
g++ main.cpp file2.cpp file3.cpp -lx -ly -lz 
```

但是，如果静态链接给您带来问题，或者您需要分发任何库，那么您可以考虑将它们设为*共享对象*（`.so`文件，通常称为*DSO*）。在这种情况下，例如，当您构建时`libx.a`，将所有源代码编译为目标文件，然后将它们与

```
g++ -shared *.o -o libx.so -ly -lz 
```

（这个版本假设`liby.a`和`libz.a`仍然是静态的，并且将被组合成`libx.so`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:49:19.333

您可能需要`extern "C" { }`在 .cpp 文件中使用以包含 C 库的标头。

请参阅[如何混合 C 和 C++](http://www.parashift.com/c++-faq/mixing-c-and-cpp.html)中的在 C++中[包含 C 标头](http://www.parashift.com/c++-faq/include-c-hdrs-nonsystem.html)。

# python - Heroku 无法在 git push (Python 2.7.3) 上编译应用程序，推送被拒绝 - 可能是 collectstatic 问题

> ID：14837157
> 
> 赞同：1
> 
> 时间：2013-02-12T16:28:34.180
> 
> 标签：python, django, heroku

我在 Heroku 上运行 Python 应用程序（2.7.3），通过 git 推送代码后，部署失败。

这是回溯：

```
Counting objects: 139, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (102/102), done.
Writing objects: 100% (102/102), 13.47 KiB, done.
Total 102 (delta 79), reused 0 (delta 0)
-----> Removing .DS_Store files
-----> Python app detected
-----> No runtime.txt provided; assuming python-2.7.3.
-----> Using Python runtime (python-2.7.3)
-----> Noticed pylibmc. Bootstrapping libmemcached.
-----> Installing dependencies using Pip (1.2.1)
       Downloading/unpacking python-dateutil==1.5 (from -r requirements.txt (line 9))
         Running setup.py egg_info for package python-dateutil

       Installing collected packages: python-dateutil
         Running setup.py install for python-dateutil

       Successfully installed python-dateutil
       Cleaning up...
-----> Running post-compile hook
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management /__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 70, in load_command_class
    return module.Command()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 57, in __init__
    self.storage.path('')
File "/app/.heroku/python/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/storage.py", line 279, in _setup
    self._wrapped = get_storage_class(settings.STATICFILES_STORAGE)()
File "/app/whoy/utils/storage.py", line 87, in __init__
    self.final_storage = PublicImmutableS3Storage(location=settings.STATICFILES_S3_PREFIX)
File "/app/whoy/utils/storage.py", line 28, in __init__
    'Expires': http_date(time.time() + 60*60*24*365*15),
AttributeError: 'module' object has no attribute 'time'
 !     Heroku push rejected, failed to compile Python app 
```

以下是 Heroku 日志的相关输出：

```
2013-02-12T15:18:45+00:00 heroku[slugc]: Slug compilation started
2013-02-12T15:18:54+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app 
```

我相信这与没有在 Heroku 堆栈上正确编译的 python-dateutil 库和 collectstatic 进程失败有关。该过程仅在我将其作为要求添加时才开始。

其他具有类似输出的 Stack Overflow 帖子似乎也有同样的问题。它抱怨缺少时间模块似乎很奇怪，但大概这是一个下游错误？

感谢您提出的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:18:47.150

[PYTHONPATH](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)中似乎有另一个优先于标准库的`time`模块；即另一个所在的目录在标准库的路径之前。`time``time`

最简单的解决方案是重命名项目特定的`time`.

# php - 用htaccess重写Url会使网站被搜索引擎发现吗？

> ID：14837166
> 
> 赞同：6
> 
> 时间：2013-02-12T16:28:52.213
> 
> 标签：php, .htaccess, url-rewriting, seo

好的，这可能与编程无关。但是，如果假设我有一个网站，其 url 被重写

> www.example.com?index.php?id=1&cat=category&title=My-Title

至

> www.example.com/1/category/My-Title

能被搜索引擎作为第二个Url搜索到吗？例如，如果我输入“category my-title”，Google 会显示

> www.example.com/1/ **category** / ***My-Title***

代替

> www.example.com?index.php?id=1&cat= **category** &title=**我的标题**

或者是否需要将任何必要的代码添加到 htaccess 文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:55:31.373

重写和 301 重定向到新页面，但也不要忘记将规范链接添加到头部。在你的情况下：

```
<link rel="canonical" href="http://www.example.com/1/category/My-Title" /> 
```

另外，我建议不要在 url 中使用大写字母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:11:41.567

如果您需要更改搜索引擎结果中显示的页面 URL，**Google 实际上建议**使用服务器端 301（永久移动）重定向。

如果您有多个指向同一页面的 URL，则可以使用相同的技术（服务器端 301 重定向）。然后使用重定向到默认页面。

因此，在您的情况下，`www.example.com/1/category/My-Title`将是 Google 搜索引擎使用的 URL。

请查看[Google 网站管理员工具 - 301 重定向](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)，它更详细地解释了重定向。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:30:26.380

那也行。新的 URL 是这个页面的真实 URL

# c# - EF5 Code First - 使用迁移更改列类型

> ID：14837168
> 
> 赞同：44
> 
> 时间：2013-02-12T16:28:54.013
> 
> 标签：c#, ef-code-first, entity-framework-5, entity-framework-migrations

我是 EF5 Code First 的新手，在开始工作项目之前，我正在修改概念验证。

我最初创建了一个看起来像的模型

```
public class Person {
  public int Id { get; set; }
  public string FirstName { get; set;}
  public string Surname {get;set;}
  public string Location {get;set;}
} 
```

我使用我放在顶部的一个小 MVC 应用程序添加了一些记录。

现在我想将 Location 列更改为枚举，例如：

```
public class Person {
  public int Id { get; set; }
  public string FirstName { get; set;}
  public string Surname {get;set;}
  public Locations Location {get;set;}
}

public enum Locations {
  London = 1,
  Edinburgh = 2,
  Cardiff = 3
} 
```

当我添加新的迁移时，我得到：

```
AlterColumn("dbo.People", "Location", c => c.Int(nullable: false)); 
```

但是当我运行 update-database 时出现错误

```
Conversion failed when converting the nvarchar value 'London' to data type int. 
```

迁移中有没有办法在运行alter语句之前截断表？

我知道我可以打开数据库并手动执行，但是有更聪明的方法吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-12T16:39:14.580

最聪明的方法可能是不改变类型。如果您需要这样做，我建议您执行以下步骤：

1.  使用新类型添加新列
2.  用于使用`Sql()`更新语句从原始列中接管数据
3.  删除旧列
4.  重命名新列

这都可以在同一个迁移中完成，将创建正确的 SQL 脚本。如果您希望丢弃数据，可以跳过第 2 步。如果要接管它，添加相应的语句（也可以包含 switch 语句）。

不幸的是，Code First 迁移没有提供更简单的方法来实现这一点。

这是示例代码：

```
AddColumn("dbo.People", "LocationTmp", c => c.Int(nullable: false));
Sql(@"
    UPDATE dbp.People
    SET LocationTmp =
        CASE Location
            WHEN 'London' THEN 1
            WHEN 'Edinburgh' THEN 2
            WHEN 'Cardiff' THEN 3
            ELSE 0
        END
    ");
DropColumn("dbo.People", "Location");
RenameColumn("dbo.People", "LocationTmp", "Location"); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-04-18T18:02:12.330

基于@JustAnotherUserYouMayKnow 的回答，但更简单。

尝试先执行`Sql()`命令，然后`AlterColumn()`：

```
Sql(@"
    UPDATE dbo.People
    SET Location =
        CASE Location
            WHEN 'London' THEN 1
            WHEN 'Edinburgh' THEN 2
            WHEN 'Cardiff' THEN 3
            ELSE 0
        END
    ");
AlterColumn("dbo.People", "Location", c => c.Int(nullable: false)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-17T17:24:54.403

我知道这并不直接适用于这个问题，但可能对某人有所帮助。在我的问题中，我不小心将年份字段设置为日期时间，我试图弄清楚如何删除所有数据，然后将数据类型切换为 int。

在进行添加迁移时，EF 只想更新该列。我不得不删除他们想要做的事情并添加我自己的代码。我基本上只是删除了该列并添加了一个新列。这对我有用。

```
protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.DropColumn(
            name: "TestingPeriodYear",
            table: "ControlActivityIssue");

        migrationBuilder.AddColumn<int>(
            name: "TestingPeriodYear",
            table: "ControlActivityIssue",
            nullable: true);
    }

    protected override void Down(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.DropColumn(
            name: "TestingPeriodYear",
            table: "ControlActivityIssue");

        migrationBuilder.AddColumn<DateTime>(
            name: "TestingPeriodYear",
            table: "ControlActivityIssue",
            nullable: true);
    } 
```

# javascript - TypeError：无法调用未定义的方法“$on”

> ID：14837169
> 
> 赞同：1
> 
> 时间：2013-02-12T16:29:00.140
> 
> 标签：javascript, angularjs, angularjs-directive

这是我在 Angular 应用程序中的 controller.js 代码

```
function MyCtrl1($scope) {
  $scope.$on('$locationChangeStart', function (event, next, current) {
    event.preventDefault();
    var answer = confirm("Are you sure you want to leave this page?");
    if (answer) {
      $location.url($location.url(next).hash());
      $rootScope.$apply();
    }
  });
}
MyCtrl1.$inject = [];

function MyCtrl2() {}
MyCtrl2.$inject = []; 
```

当我签入 chrome 时，我在开发者控制台中收到以下错误

```
TypeError: Cannot call method '$on' of undefined 
```

任何人都可以指出可能出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:34:11.920

你需要注入 $scope。

```
MyCtrl1.$inject = ['$scope']; 
```

**编辑：完整的修复...**

任何你传递到你的控制器的东西，你都需要注入，如果你明确地注入`ctrl.$inject = [];`

```
function MyCtrl1($scope, $location, $rootScope) {
  $scope.$on('$locationChangeStart', function (event, next, current) {
    if (!confirm("Are you sure you want to leave this page?")){
      event.preventDefault();
    }
  });
}
MyCtrl1.$inject = ['$scope', '$location', '$rootScope']; 
```

# c# - WPF TreeView 多选行为

> ID：14837171
> 
> 赞同：1
> 
> 时间：2013-02-12T16:29:26.467
> 
> 标签：c#, wpf

我已经根据这篇文章编写了多选行为：[WPF TreeView with Multiple Selection](https://stackoverflow.com/questions/1163801/wpf-treeview-with-multiple-selection/6681993#6681993)

但是我的行为似乎没有按预期工作..你能帮忙吗？

以下是我的 xaml 代码：

```
 <Window x:Class="TreeView.Spike.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Spike="clr-namespace:TreeView.Spike" 
             Title="MainWindow" Height="350" Width="525">
        <Window.Resources>
        </Window.Resources>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width=".5*"/>
                <ColumnDefinition Width=".5*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="40"></RowDefinition>
            </Grid.RowDefinitions>

            <TreeView ItemsSource="{Binding Nodes}" Grid.Row="0" x:Name="treeView" Grid.Column="0">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding Nodes}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Name}">                  
                        </TextBlock>
                        </StackPanel>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
                <TreeView.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Add"></MenuItem>
                        <MenuItem Header="Delete"></MenuItem>
                    </ContextMenu>
                </TreeView.ContextMenu>
               <i:Interaction.Behaviors>
    <Spike:MultipleItemSelectionAttachedBehavior AllSelectedItems="{Binding Path=AllSelectedNodes}"/>
</i:Interaction.Behaviors>
            </TreeView>

        </Grid>
    </Window> 
```

我的附加行为：

```
 public class MultipleItemSelectionAttachedBehavior:Behavior<System.Windows.Controls.TreeView>
        {
            public static DependencyProperty AllSelectedItemsProperty =
            DependencyProperty.RegisterAttached("AllSelectedItems", typeof(object), typeof(MultipleItemSelectionAttachedBehavior),
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault | FrameworkPropertyMetadataOptions.Inherits));

            private static readonly PropertyInfo IsSelectionChangeActiveProperty = typeof(System.Windows.Controls.TreeView).GetProperty("IsSelectionChangeActive",
              BindingFlags.NonPublic | BindingFlags.Instance);

            public object AllSelectedItems
            {
                get
                {
                    return (object)GetValue(AllSelectedItemsProperty);
                }
                set
                {
                    SetValue(AllSelectedItemsProperty, value);
                }
            }

            public static bool GetAllSelectedItems(DependencyObject obj)
            {
                return (bool)obj.GetValue(AllSelectedItemsProperty);
            }

            public static void SetAllSelectedItems(DependencyObject obj, bool value)
            {
                obj.SetValue(AllSelectedItemsProperty, value);
            }

            protected override void OnAttached()
            {
                base.OnAttached();
                AssociatedObject.SelectedItemChanged += AssociatedObject_SelectedItemChanged;
            }

            protected override void OnDetaching()
            {
                base.OnDetaching();
                AssociatedObject.SelectedItemChanged -= AssociatedObject_SelectedItemChanged;
            }

            void AssociatedObject_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
            {
                if (IsSelectionChangeActiveProperty == null) return;

                var selectedItems = new List<Node>();

                var treeViewItem = AssociatedObject.SelectedItem as Node;
                if (treeViewItem == null) return;

                // allow multiple selection
                // when control key is pressed
                if (Keyboard.IsKeyDown(Key.LeftCtrl) || Keyboard.IsKeyDown(Key.RightCtrl))
                {
                    var isSelectionChangeActive = IsSelectionChangeActiveProperty.GetValue(AssociatedObject, null);

                    IsSelectionChangeActiveProperty.SetValue(AssociatedObject, true, null);
                    selectedItems.ForEach(item => item.IsSelected = true);

                    IsSelectionChangeActiveProperty.SetValue(AssociatedObject, isSelectionChangeActive, null);
                }
                else
                {
                    // deselect all selected items except the current one
                    selectedItems.ForEach(item => item.IsSelected = (item == treeViewItem));
                    selectedItems.Clear();
                }

                if (!selectedItems.Contains(treeViewItem))
                {
                    selectedItems.Add(treeViewItem);
                }
                else
                {
                    // deselect if already selected
                    treeViewItem.IsSelected = false;
                    selectedItems.Remove(treeViewItem);
                }

                AllSelectedItems = selectedItems;
            }
        } 
```

..和我的 ViewModel

```
 public class ViewModel :NotificationObject
        {
            public ViewModel()
            {
                AllSelectedNodes = new ObservableCollection<Node>();
            }
     private ObservableCollection<Node> _allSelectedNodes;
            public ObservableCollection<Node> AllSelectedNodes
            {
                get { return _allSelectedNodes; }
                set
                {
                    _allSelectedNodes = value;
                    RaisePropertyChanged(() => AllSelectedNodes);   
                }
            }
    } 
```

我的模型：

```
 public class Node:NotificationObject
        {

            private string _name;
            public string Name
            {
                get { return _name; }
                set
                {
                    _name = value;
                    RaisePropertyChanged(() => Name);   
                }
            }

            private bool _isExpanded = true;
            public bool IsExpanded
            {
                get { return _isExpanded; }
                set
                {
                    _isExpanded = value;
                    RaisePropertyChanged(() => IsExpanded); 
                }
            }

            private bool _isSelected;

            public bool IsSelected
            {
                get { return _isSelected; }
                set
                {
                    _isSelected = value;
                    RaisePropertyChanged(() => IsSelected);

                }
            }

            private ObservableCollection<Node> _nodes;
            public ObservableCollection<Node> Nodes
            {
                get { return _nodes; }
                set
                {
                    _nodes = value;
                    RaisePropertyChanged(() => Nodes);  
                }
            }

            public static IList<Node> Create()
            {
                return new List<Node>()
                           {
                               new Node()
                                   {
                                       Name = "Activity",
                                       Nodes = new ObservableCollection<Node>()
                                                   {
                                                       new Node() {Name = "Company",Nodes = new ObservableCollection<Node>(){  new Node() {Name = "Company1",Existing = false}}},
                                                         new Node() {Name = "Strategy",Nodes = new ObservableCollection<Node>(){  new Node() {Name = "Strategy1"}}},
                                                            new Node() {Name = "Vehicle",Nodes = new ObservableCollection<Node>(){  new Node() {Name = "Vehicle1",Existing = false}}}
                                                   }
                                   }
                           };
            }
        } 
```

..和我的初始化代码：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            var viewModel = new ViewModel();
            this.DataContext = viewModel;
            viewModel.Nodes = new ObservableCollection<Node>(Node.Create());

        }
} 
```

问题是，它仍然只选择一个，而它应该在按住控制键的同时选择多个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-25T20:23:50.247

在 AssociatedObject_SelectedItemChanged 中，当您刚刚实例化它时，selectedItems 的计数除为零之外，还是稍后将 treeViewItem 添加到它时计数为 1？尝试将其设置为 AllSelectedItems 属性。此外，AllSelectedItems 属性不应该是某种列表或 IEnumerable 吗？

```
 if(AllSelectedItems == null)
  {
      AllSelectedItems = new List<Node>();
  }
  List<Node> selectedItems = AllSelectedItems; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T06:30:25.050

您缺少 IsSelected 属性的绑定：

```
 <TreeView.ItemContainerStyle>
           <Style TargetType="TreeViewItem">
              <Setter Property="IsSelected" Value="{Binding IsSelected}" />
           </Style>
     </TreeView.ItemContainerStyle> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-08-06T10:25:28.527

您需要像这样将选择模式属性添加到树视图

```
SelectionMode="Multiple" 
```

# azure - 这是 Azure 表中分区和行键的正确选择吗？

> ID：14837173
> 
> 赞同：2
> 
> 时间：2013-02-12T16:29:32.390
> 
> 标签：azure, database-design

我有一个存储用户在线状态的表。

```
columns(userid, IsOnline,date) 
```

如果用户在线，则 Isonline bool 标志为 true，如果用户离线，则 IsOnline bool 为 false。这样我就可以看到用户在线的时间和时间。

选择 partitionKey: userId, Rowkey: 事件的日期和时间会不会很好

?

用户不能同时开启和关闭，所以rowkey应该是唯一的。我喜欢这样，它将用户的所有数据保存在同一个分区上。选择日期作为 rowId 是否也会使排序更有效率？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T17:58:57.833

UserId 是一个很好的 PartitionKey 策略

关于 RowKey，我建议使用格式化为最大位数的“DateTime.MaxValue.Ticks - dateOfEvent.Ticks”。

这将使您的 RowKey 始终按降序排列，从而允许您选择用户的最新状态，而无需从所有分区中获取数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:36:01.847

对我来说听起来很合理。这将给定用户的所有操作组合在一个分区中。然后，每个操作都由带有键的时间戳的单独行来描述。

您可能需要记住，Azure 表存储中的每一行都有一个时间戳列，该列会在创建/更新时自动填充。您可以考虑将此列用于时间戳，但搜索/排序会很慢，因为它是与表存储行关联的第三数据集的一部分。

# bash - Shell 脚本返回值不正确，为什么？

> ID：14837176
> 
> 赞同：0
> 
> 时间：2013-02-12T16:29:36.300
> 
> 标签：bash, shell, scripting

在我编写的用于测试函数如何返回值的 shell 脚本中，我遇到了一个奇怪的意外行为。下面的代码假定当输入函数 fnttmpfile 时，第一个 echo 语句将打印到控制台，然后第二个 echo 语句实际上将字符串返回给调用 main。好吧，这就是我的假设，但我错了！

```
#!/bin/sh

fntmpfile() {
TMPFILE=/tmp/$1.$$
echo "This is my temp file dude!"
echo "$TMPFILE"
}

mainname=main
retval=$(fntmpfile "$mainname")
echo "main retval=$retval" 
```

实际发生的情况正好相反。第一个回显到调用函数，第二个回显到 STDOUT。为什么会这样，有没有更好的方法......

> main retval=这是我的临时文件，伙计！/tmp/main.19121

这个测试的全部原因是因为我正在编写一个 shell 脚本来做一些数据库备份，并决定使用小函数来做特定的事情，你知道让它干净而不是意大利面条代码。我使用的功能之一是：

```
log_to_console() {
    # arg1 = calling function name
    # arg2 = message to log
    printf "$1 - $2\n"
} 
```

整个问题是返回字符串值的函数正在获取 log_to_console 输出，而不是取决于事物的顺序。我想这是我不知道的关于 shell 脚本的那些问题之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:41:33.827

不，发生的事情是你正在运行你的函数，它输出两行到标准输出：

```
This is my temp file dude!
/tmp/main.4059 
```

当你运行它时`$()`，bash 会截取输出并将其存储在值中。存储在变量中的字符串包含第一个换行符（最后一个被删除）。所以真正在你的“retval”变量中的是以下 C 风格的字符串：

```
"This is my temp file dude!\n/tmp/main.4059" 
```

这并不是真正返回一个字符串（不能在 shell 脚本中这样做），它只是捕获函数返回的任何输出。这就是为什么它不起作用。如果您想登录到控制台，请正常调用您的函数。

# android - 野生滚动输入android

> ID：14837181
> 
> 赞同：5
> 
> 时间：2013-02-12T16:29:44.360
> 
> 标签：android, css, scroll, textinput

我正在开发一个响应式网站，该网站具有适用于移动设备或桌面设备的不同样式表。一切看起来都不错，而且效果很好，直到在移动设备上与文本输入进行交互。他们应该出现。但是一旦点击（ehrm..touched），我发现Android中的浏览器开始疯狂滚动，打字时也出现同样的情况。但是，在输入中输入了文本，并且输入上的软键盘/焦点不会丢失。

我的项目可以在这里找到：[http ://www.gortzfruit.nl/new/](http://www.gortzfruit.nl/new/)

问题是我一直在寻找解决方案一段时间，并发现了解决方案对我不起作用的类似问题。我一直在研究的一些主题和解决方案是：

[https://github.com/scottjehl/Device-Bugs/issues/3](https://github.com/scottjehl/Device-Bugs/issues/3) - 这里建议问题出在定位元素中。特别是在固定定位的元素中是绝对的。这在我的设计中反复出现，但一旦删除它并没有解决问题。

[Android Browser textarea到处滚动，无法使用](https://stackoverflow.com/questions/4489809/android-browser-textarea-scrolls-all-over-the-place-is-unusable) -这表明问题出在css-properties -webkit-transform: translate3d(0, 0, 0); 和-webkit-backface-visibility：隐藏；。我自己没有包含这些，但我认为我包含的 Google Maps API 可能会使用这些。在分析 Google Maps API 生成的标记后，我发现他们也不使用它。

[当固定位置的文本输入表单字段获得焦点时，如何防止疯狂滚动？](https://stackoverflow.com/questions/10542525/how-can-i-prevent-wild-scrolling-when-a-fixed-position-text-input-form-field-gai/10542996#10542996)-这个专注于尝试解决问题。将主体设置为溢出：隐藏；有人建议在集中注意力时阻止滚动，但这对我不起作用。

[在javascript中禁用输入焦点上的滚动](https://stackoverflow.com/questions/1997350/disable-scrolling-on-input-focus-in-javascript) -这里建议在keydown上返回false可能会解决问题，我尝试过但没有成功。这会阻止我的文本实际输入到输入中。

我知道这与导致这种奇怪滚动的 Android 中的错误有关。但我不知道如何应对这种情况了。对我来说，我是否知道如何避免错误或是否找到使错误不引人注意的技巧并不重要。我只是想摆脱在文本框上打字和聚焦/模糊时奇怪的滚动行为。

提前致谢，

杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T14:35:52.577

从标记中删除元视口标签，并在**开始**的正文标签后立即添加：

```
<script type="text/javascript">
<!--
    (function() {
        var meta = document.createElement("meta");
        meta.setAttribute('name','viewport');
        var content = 'initial-scale=';
        content += 1 / window.devicePixelRatio;
        content += ',user-scalable=no';
        meta.setAttribute('content', content);
        document.getElementsByTagName('head')[0].appendChild(meta);
    })();
//-->
</script> 
```

这将为您在移动设备上提供最佳体验（惊人的图像渲染！）。我注意到在我的设备（不是 Android）上出现了一些奇怪的滚动/缩放问题，这消除了这种问题。让我知道它是否有效:)

# objective-c - 使用 NSURLConnection 发送异步请求

> ID：14837183
> 
> 赞同：2
> 
> 时间：2013-02-12T16:29:46.393
> 
> 标签：objective-c, asynchronous, nsurlrequest

我在 Xcode 4.5.2 中有一个应用程序。它发送一个 URL 请求以下载图像并将图像设置在图像视图中。我有以下代码可以很好地完成此任务：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("Get Facebook Friend", NULL);
    dispatch_async(downloadQueue, ^{

self.firstFriendImage = [UIImage imageWithData:
                           [NSData dataWithContentsOfURL:
                            [NSURL URLWithString:
                             [[self.facebookPhotosAll objectAtIndex:self.randomIndex1]
                              objectForKey:@"pic_big"]]]];

dispatch_async(dispatch_get_main_queue(), ^{
            [self postDownloadTasks:self.topView setLabel:self.firstFriendLabel 
withFriendName:self.firstFriendName cropImage:self.firstFriendImage 
inImageView:self.friendOneView atYPoint:22];
  });
      }); 
```

因此，虽然这段代码运行良好，但对于 Objective C 来说是新手，但我正在尝试稍微探索一下该语言，看看我还能如何做同样的事情。所以我尝试使用 NSURLConnection sendAsynchronousRequest: 方法（在查看了这里的一些示例之后），但我似乎无法让这个方法工作。这就是我所做的：

```
 NSOperationQueue *queue = [[NSOperationQueue alloc]init];
NSString *string = [[self.facebookPhotosAll  
                   objectAtIndex:self.randomIndex1]objectForKey:@"pic_big"];

    [NSURLConnection sendAsynchronousRequest: [NSURL URLWithString:   
           string] queue:queue   
             completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
        // Make sure eveything is ok
        if(error){
            // do something
        }

        self.firstFriendImage = [UIImage imageWithData:data];
         dispatch_async(dispatch_get_main_queue(), ^{

            [self postDownloadTasks:self.topView setLabel:self.firstFriendLabel 
withFriendName:self.firstFriendName cropImage:self.firstFriendImage  
inImageView:self.friendOneView atYPoint:22];

         });

    }]; 
```

所以这段代码根本不起作用（它没有返回任何数据）。调用该方法时应用程序崩溃，我收到以下消息：

** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSURL _CFURLRequest]：无法识别的选择器已发送到实例 0xa39dd20”

谁能告诉我如何使用 NSURLConnection sendAsynchronousRequest 方法完成我在第一个代码摘录中所做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:59:17.850

在 send asynchronousRequest 方法中，您的 URL 字符串缺少一部分。它应该像您的第一个方法一样有效：

```
[[self.facebookPhotosAll objectAtIndex:self.randomIndex1] objectForKey:@"pic_big"] 
```

# java - 我们如何动态分配和增长数组

> ID：14837185
> 
> 赞同：10
> 
> 时间：2013-02-12T16:29:50.393
> 
> 标签：java, arrays, word-count

我正在做一个项目，但我不能使用任何现有的 java 数据结构（即 ArraysList、树等）

我只能使用数组。因此，我需要用新内存动态更新数组。

我正在从文本文件中读取数据，并为数组内存预先分配了 100：

```
 String [] wordList;
   int wordCount = 0;
   int occurrence = 1;
   int arraySize = 100;
   wordList = new String[arraySize];
   while ((strLine = br.readLine()) != null)   {
         // Store the content into an array
         Scanner s = new Scanner(strLine);
         while(s.hasNext()) {
           wordList[wordCount] = s.next();
           wordCount++;
         } 
   } 
```

现在这适用于 100 个以下的列表项。br.readline 是遍历文本文件每一行的缓冲阅读器。我有它然后将每个单词存储到列表中，然后增加我的索引（wordCount）。

但是，一旦我有一个包含 100 多个项目的文本文件，就会出现分配错误。

我怎样才能动态更新这个数组（从而重新发明轮子）？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T16:34:13.910

你可以这样做：

```
String [] wordList;
int wordCount = 0;
int occurrence = 1;
int arraySize = 100;
int arrayGrowth = 50;
wordList = new String[arraySize];
while ((strLine = br.readLine()) != null)   {
     // Store the content into an array
     Scanner s = new Scanner(strLine);
     while(s.hasNext()) {
         if (wordList.length == wordCount) {
              // expand list
              wordList = Arrays.copyOf(wordList, wordList.length + arrayGrowth);
         }
         wordList[wordCount] = s.next();
         wordCount++;
     } 
} 
```

使用`java.util.Arrays.copyOf(String[])`基本上是做同样的事情：

```
if (wordList.length == wordCount) {
    String[] temp = new String[wordList.length + arrayGrowth];
    System.arraycopy(wordList, 0, temp, 0, wordList.length);
    wordList = temp;
} 
```

除了它是一行代码而不是三行。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T16:31:48.907

您分配一个新数组（例如，容量翻​​倍），并将所有元素移至其中。

基本上，您需要检查 是否`wordCount`即将击中`wordList.size()`，当它出现时，创建一个长度是前一个数组两倍的新数组，并将所有元素复制到其中（创建一个辅助方法来执行此操作），然后分配`wordList`给您的新数组。

要复制内容，您*可以*使用`System.arraycopy`，但我不确定您的限制是否允许，因此您可以简单地一一复制元素：

```
public String[] createNewArray(String[] oldArray){
    String[] newArray = new String[oldArray.length * 2];
    for(int i = 0; i < oldArray.length; i++) {
        newArray[i] = oldArray[i];
    }

    return newArray;
} 
```

继续。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T16:33:55.583

你不能更好地动态增加数组大小，你复制到新的`array`. 使用`System.arrayCopy`它，它比将每个元素复制到新数组中更好。供参考 [为什么 System.arraycopy 在 Java 中是原生的？](https://stackoverflow.com/questions/2772152/why-is-system-arraycopy-native-in-java).

```
private static Object resizeArray (Object oldArray, int newSize) {
   int oldSize = java.lang.reflect.Array.getLength(oldArray);
   Class elementType = oldArray.getClass().getComponentType();
   Object newArray = java.lang.reflect.Array.newInstance(
         elementType, newSize);
   int preserveLength = Math.min(oldSize, newSize);
   if (preserveLength > 0)
      System.arraycopy(oldArray, 0, newArray, 0, preserveLength);
   return newArray;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T16:35:01.647

看看[Java ArrayList](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList)的实现。Java`ArrayList`在内部使用固定大小的数组，一旦元素数量超过当前大小，就会重新分配数组。您也可以在类似的线路上实施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T16:33:51.733

您必须手动创建一个更大的新数组并复制这些项目。

[这](https://stackoverflow.com/questions/8438879/expanding-an-array)可能会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T16:34:28.907

Visual Basic 有一个很好的功能：`ReDim Preserve`.

有人好心地写了一个等效的函数——你可以在[这里](http://www.tangiblesoftwaresolutions.com/Articles/Java%20Equivalent%20to%20VB%20ReDim%20Preserve.html)找到它。我认为它完全符合您的要求（而且您不是在重新发明轮子-您是在复制别人的）...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-10T16:05:24.333

让我们举一个例子，当您有一个包含 1 个元素的数组，并且您想要扩展大小以动态容纳 100 万个元素时。

情况1：

```
String [] wordList = new String[1];
String [] tmp = new String[wordList.length + 1];
for(int i = 0; i < wordList.length ; i++){
    tmp[i] = wordList[i];
}
wordList = tmp; 
```

案例2（通过一个加法因子增加大小）：

```
String [] wordList = new String[1];
String [] tmp = new String[wordList.length + 10];
for(int i = 0; i < wordList.length ; i++){
    tmp[i] = wordList[i];
}
wordList = tmp; 
```

案例3（通过乘数增加大小）：

```
String [] wordList = new String[1];
String [] tmp = new String[wordList.length * 2];
for(int i = 0; i < wordList.length ; i++){
    tmp[i] = wordList[i];
}
wordList = tmp; 
```

当动态扩展数组的大小时，使用 Array.copy 或迭代数组并使用 for 循环将元素复制到新数组，实际上是迭代数组的每个元素。这是一项昂贵的操作。Array.copy 将是干净和优化的，但仍然很昂贵。所以，我建议将数组长度增加一个乘法因子。

它的帮助是，

在案例 1 中，要容纳 100 万个元素，您必须将数组的大小增加 100 万 - 1 倍，即 999,999 倍。

在情况 2 中，您必须将数组的大小增加 100 万 / 10 - 1 倍，即 99,999 倍。

在情况 3 中，您必须将数组的大小增加 log [2] 100 万 - 1 倍，即 18.9（假设）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-15T14:23:19.287

```
public class Arr {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int a[] = {1,2,3};
        //let a[] is your original array
        System.out.println(a[0] + " " + a[1] + " " + a[2]);
        int b[];
        //let b[] is your temporary array with size greater than a[]
        //I have took 5
        b = new int[5];
        //now assign all a[] values to b[]
        for(int i = 0 ; i < a.length ; i ++)
            b[i] = a[i];
        //add next index values to b
        b[3] = 4;
        b[4] = 5;
        //now assign b[] to a[]
        a = b;
        //now you can heck that size of an original array increased
        System.out.println(a[0] + " " + a[1] + " " + a[2] + " " + a[3] + " " 
    + a[4]);
    }

} 
```

上述代码的输出是：

1 2 3

1 2 3 4 5

# oracle - 从 Oracle 10g 到 Postgres db 的数据迁移

> ID：14837191
> 
> 赞同：2
> 
> 时间：2013-02-12T16:30:54.433
> 
> 标签：oracle, postgresql, database-migration

我想将数据从 Oracle 10g 数据库迁移到 Postgres db。Oracle SQL 开发人员有数据迁移选项，但它似乎仅用于将非 oracle db 迁移到 oracle。请让我知道其他选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:15:59.720

有一个用 Perl 编写的专用工具：[Ora2Pg](http://ora2pg.darold.net/)。

大多数数据库提供从其他数据库导入但不导出到其他数据库的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-02T14:42:00.683

我之前尝试过使用 ORA2PG，但它太复杂了，所以我找到了自己的方法来从 sql developer 迁移到 postgres。

这是一步一步的，如果您有任何问题，请告诉我。

如何将数据从 Oracle 数据库迁移到 POSTGRES 数据库！

迁移前要下载的工具：SQL Developer、WINSCP

SQL 开发人员

*   步骤 1：使用 SQL Developer 登录 Oracle 服务器
*   第 2 步：右键单击模式名称 > 导出 > 将格式更改为 CSV 并将编码更改为 UTF-8。（确保未选中导出 DDL）（确保文件名以 .csv 结尾）
*   第 3 步：单击下一步 > 下一步 > 完成（等待导出完成）

从 SQL 开发人员导出文件后

*   右键单击csv文件，单击打开方式并使用记事本打开它。单击文件 > 另存为 > 将编码更改为 UTF-8 并保存。

打开 WINSCP

*   第 1 步：在登录到您的服务器之前，单击编辑 > 高级 > 打开“文件名的 UTF-8 编码”。
*   第 2 步：登录到您的服务器
*   第 3 步：单击设置 > 内部编辑器 > 将默认编码更改为 UTF-8 > 单击确定
*   第 4 步：在服务器上的任意位置创建一个新目录，然后将文件拖到该目录并进入 WINSCP

现在该文件应该在您的服务器上使用 UTF-8 编码。

开腻子

在使用 Putty 登录到您的服务器之前，单击 Translation 并将假定的接收数据更改为 UTF-8，然后单击 DATA 并将终端类型字符串更改为 Putty，然后登录到您的服务器。

使用 Putty 登录服务器后，运行以下命令：

语言环境魅力图

此命令将显示服务器的默认编码。

之后运行该命令：

```
 grep -Rw '/home/pgadmin/data1/1234.csv' -e 'fre' 
```

*   data1 = 在服务器上创建的目录
*   1234.csv = data1 目录中的 csv 文件

此命令将显示您文档中的法语单词是否仍然丢失。该命令中的“/home/pgadmin/data1/1234.csv”是您的文件在服务器上的位置，“1234.csv”是 CSV 文件的名称。如果运行该命令后一切正常，现在我们可以将其放入 Postgres 数据库。

使用命令“psql”进入postgres数据库后</p>

*   第 1 步：确保您已经创建了自己的数据库、模式和表（如果您不知道如何创建，请向下滚动到文档末尾）。
*   第二步：创建自己的数据库、模式和表后，我们可以运行复制命令。

```
\Copy joe.data01 FROM ‘home/pgadmin/data1/1234.csv’  DELIMITER ‘,’ CSV HEADER encoding ‘UTF-8’  ; 
```

如果该文件在 csv 文件中已有列名，请在命令中添加“HEADER”。joe.data01= 创建的表名 home/pgadmin/data1/1234.csv = 服务器上文件的位置

要查看模式是否被复制，只需运行命令`select * from joe.data01;`

要查看法语单词是否丢失，请运行命令 `select * from joe.data01 where isa = ‘fre’ ;`

*   如何在 Postgres 上创建数据库：`CREATE DATABASE name_of_database ;`
*   如何在 Postgres 上创建 Schema：`CREATE SCHEMA name_of_schema;`
*   如何在 Postgres 上创建表： `create table joe.data01 (ccca CHAR(50) NOT NULL, isa CHAR(70) NOT NULL, co CHAR(150) NOT NULL) ;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-17T16:10:36.480

我们最终使用[https://github.com/MIT-LCP/oracle-to-postgres](https://github.com/MIT-LCP/oracle-to-postgres)中概述的方法将一个相当大的数据库（约 100 个模式，具有 >1000 个表）从 Oracle 迁移到 Postgres 。

您可以使用`pip install oracle2postgres`. 更多信息位于：[https ://pypi.org/project/oracle2postgres/](https://pypi.org/project/oracle2postgres/)

演示该方法的 Jupyter Notebook 位于：[https](https://github.com/MIT-LCP/oracle2postgres/blob/master/migration.ipynb) ://github.com/MIT-LCP/oracle2postgres/blob/master/migration.ipynb 。

我们的一般方法是镜像源数据库；必要时转换数据类型；创建目标数据库；以块的形式复制数据。这是一个有点hacky的解决方案，但对我们来说效果很好。

```
# import the package
import oracle2postgres

# create the logfile
oracle2postgres.create_logfile()

# get source database settings
source_config = oracle2postgres.get_source_config()

# get target database settings
target_config = oracle2postgres.get_target_config()

# get settings for migration
migration_config = oracle2postgres.get_migration_config()

# check the schema exist on the source database
source_engine = oracle2postgres.connect_to_source(source_config)
oracle2postgres.check_schema_exist(source_engine,source_config['schema_list'])

# check for null characters in strings in the source database
# if found, they can be removed as explained in the documentation
oracle2postgres.check_for_nulls(source_engine,source_config['schema_list'])

# create a new database on the target database
target_engine = oracle2postgres.connect_to_target(target_config)
oracle2postgres.create_database(target_config['database'],target_engine)

# create schema on the target database
target_engine = oracle2postgres.connect_to_target(target_config,target_config['database'])
oracle2postgres.create_target_schema(source_config['schema_list'],source_engine,target_engine)

# run the migration
oracle2postgres.migrate(source_config,target_config,migration_config) 
```

如果您在重用代码时遇到问题，请随时提出问题，我们将尽最大努力提供帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T16:50:20.193

*   展开表格部分，
*   然后选择要导出的表
*   右键，选择导出，
*   然后选择格式并导出（最好插入语句或 csv）

# symfony - 如何在 SonataAdminBundle 中显示顶部和侧面菜单？

> ID：14837194
> 
> 赞同：5
> 
> 时间：2013-02-12T16:30:57.550
> 
> 标签：symfony, menu, sonata-admin

没有文件谈论这一点。请帮我。谢谢

![带有顶部菜单和侧边菜单的 SonataAdminBundle](../Images/a4e2ce8f7b5da7b096fd939b0e37bfb7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T12:29:01.453

**管理顶部菜单**是根据`group`管理服务定义中的项目自动创建的。所有管理服务都可以分组并显示在顶部菜单中。

[示例](https://github.com/sonata-project/SonataPageBundle/blob/master/Resources/config/admin.xml#L30)（查看菜单组的名称`group="sonata_page"`在哪里）：`sonata_page`

**可以使用`configureSideMenu()`管理服务中的方法 创建**管理侧菜单。**[例子](https://github.com/sonata-project/SonataPageBundle/blob/master/Admin/PageAdmin.php#L267)**

# c# - 为什么 C# 无法比较两种对象类型，而 VB 却没有？

> ID：14837209
> 
> 赞同：152
> 
> 时间：2013-02-12T16:31:42.920
> 
> 标签：c#, .net, vb.net, comparison

我在 C# 中有两个对象，不知道它是布尔值还是其他类型。但是，当我尝试比较那些 C# 时无法给出正确的答案。我已经用 VB.NET 尝试了相同的代码，并且做到了！

如果有解决方案，谁能告诉我如何解决这个问题？

C＃：

```
object a = true;
object b = true;
object c = false;
if (a == b) c = true;
MessageBox.Show(c.ToString()); //Outputs False !! 
```

VB.NET：

```
Dim a As Object = True
Dim b As Object = True
Dim c As Object = False
If (a = b) Then c = True
MessageBox.Show(c.ToString()) '// Outputs True 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-02-12T16:38:57.070

在 C# 中，`==`运算符（当应用于引用类型表达式时）执行*引用*相等检查，除非它被**重载**。您正在比较两个引用，它们是装箱转换的结果，因此它们是不同的引用。

编辑：使用重载的类型`==`，您可以获得不同的行为 - 但这是基于表达式的*编译时*类型。例如，`string`提供`==(string, string`)：

```
string x = new string("foo".ToCharArray());
string y = new string("foo".ToCharArray());
Console.WriteLine(x == y); // True
Console.WriteLine((object) x == (object) y); // False 
```

这里第一个比较是使用重载运算符，但第二个是使用“默认”引用比较。

在 VB 中，`=`操作符做了更多的工作——它甚至不仅仅等同于 using `object.Equals(x, y)`，因为诸如此类的事情[`Option Compare`](http://msdn.microsoft.com/en-us/library/8t3khw5f.aspx)会影响文本的比较方式。

从根本上说，操作员的工作方式不同，也不*打算*以同样的方式工作。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-02-12T20:01:48.790

除了解释 C# 方面的 Jon 的回答之外，这是 VB 所做的：

在带有 的 VB 中`Option Strict On`，通过`=` *始终*测试值相等性而不是引用相等性的比较。实际上，您的代码在切换后甚至都不会编译，`Option Strict On`因为`System.Object`没有定义`Operator=`. 您应该**始终**启用此选项，它比捕蝇草更有效地捕获错误（尽管在您的特定情况下，这种松散的行为实际上是正确的）。¹

事实上，使用`Option Strict On`，VB 的行为甚至比 C# 更严格：在 C# 中，`a == b` **要么**触发对 的调用，`SomeType.operator==(a, b)`要么，如果不存在，则调用引用相等比较（相当于调用`object.ReferenceEquals(a, b)`）。

另一方面，在 VB 中，比较`a = b` *总是*调用相等运算符。²如果要使用引用相等比较，则必须使用`a Is b`（再次与 相同`Object.ReferenceEquals(a, b)`）。

* * *

^(1))这里很好地说明了为什么 using`Option Strict Off`是一个坏主意：我使用 VB.NET 已经将近十年了，从 .NET 正式发布之前到几年前，*我完全不知道*.NET 有什么`a = b`用`Option Strict Off`。它进行了某种平等比较，但究竟发生了什么以及为什么，不知道。不过，它比 C# 的`dynamic`功能更复杂（因为它依赖于有据可查的 API）。[这是 MSDN 所说的：](http://msdn.microsoft.com/en-us/library/zcd4xwzs%28v=vs.80%29.aspx)

> 因为`Option Strict On`提供*强类型*，防止意外类型转换导致数据丢失，不允许后期绑定，提高性能，所以强烈推荐使用它。

^(2)) Jon 提到了一个例外，即字符串，出于向后兼容性的原因，相等比较做了更多的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T16:40:16.443

对象实例不与运算符“==”进行比较。您应该使用方法“等于”。使用“==”运算符比较引用，而不是对象。

试试这个：

```
public class MyObject
{
    public MyObject(String v)
    {
        Value = v;
    }
    public String Value { get; set; }
}

MyObject a = new MyObject("a");
MyObject b = new MyObject("a");
if(a==b){
    Debug.WriteLine("a reference is equal to b reference");
}else{
    Debug.WriteLine("a reference is not equal to b reference");
}
if (a.Equals(b)) {
    Debug.WriteLine("a object is equal to b object");
} else {
    Debug.WriteLine("a object is not equal to b object");
} 
```

结果：

```
a reference is not equal to b reference
a object is not equal to b object 
```

现在，试试这个：

```
public class MyObject
{
    public MyObject(String v)
    {
        Value = v;
    }
    public String Value { get; set; }

    public bool Equals(MyObject o)
    {
        return (Value.CompareTo(o.Value)==0);
    }
}
MyObject a = new MyObject("a");
MyObject b = new MyObject("a");
if(a==b){
    Debug.WriteLine("a reference is equal to b reference");
}else{
    Debug.WriteLine("a reference is not equal to b reference");
}
if (a.Equals(b)) {
    Debug.WriteLine("a object is equal to b object");
} else {
    Debug.WriteLine("a object is not equal to b object");
} 
```

结果：

```
a reference is not equal to b reference
a object is equal to b object 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T17:28:07.850

问题是 C# 中的 == 运算符是对基于两个参数的*编译时类型*的静态方法的调用（好吧，可能不是技术上的，但它可以是这样的） 。这些对象的实际运行时类型是什么并不重要。

根据该编译时类型，编译器将确定`operator ==`要使用的实现。它可能使用默认`object`实现，它可能使用语言提供的数字重载之一，或者它可能是用户定义的实现。

这与 VB 不同，因为 VB 不会在编译时确定实现。它等到运行时并检查给定的两个参数以确定`==`它应该使用哪个操作符实现。

您的代码包含布尔值，但它们位于类型为 的变量中`object`。因为*变量*是 type `object`，所以 C# 编译器使用 的`object`实现`==`，它比较*引用*，而不是对象实例。由于布尔值是框，因此它们没有相同的引用，即使它们的值相同。

VB 代码不关心变量是什么类型。它等到运行时，然后检查这两个变量，发现它们*实际上*都是布尔类型，因此使用布尔`==`运算符实现。该实现比较布尔值的值，而不是它们的引用（在调用该运算符之前，布尔值将被拆箱，因此引用比较甚至不再有意义）。因为布尔值相同，所以返回 true。

# php - curl php 在共享主机上每分钟通过 cron 作业抓取

> ID：14837210
> 
> 赞同：2
> 
> 时间：2013-02-12T16:31:45.073
> 
> 标签：php, curl, cron, screen-scraping, jobs

我有一个棘手的问题。我在一个基本的共享主机上。我使用 curl 和 php 创建了一个很好的抓取脚本。

因为使用 Curl 的多线程并不是真正的多线程，即使是我使用过的最好的 curl 多线程脚本也可以将抓取速度提高 1,5-2，我得出的结论是我需要运行大量的 cron 任务（例如 50）在我的 php 脚本上每分钟与 mysql 表交互，以便为我的客户提供快速的网络抓取。

我的问题是，当同时运行大量 cron 任务时，我得到一个“Mysql 服务器已经消失”。如果我减少 cron 任务的数量，它会继续工作，但总是很慢。

我还尝试了基于浏览器的解决方案，每次完成时都重新加载脚本。它工作得更好但总是同样的问题：当我决定同时运行 10 次脚本时，它开始使 mysql 服务器或 web 服务器过载（我不知道）

为了解决这个问题，我获得了一个 mysql 服务器，我可以在其中设置 my.cnf ...但问题大致相同。

========= **我的问题是：问题出在哪里？桌子尺寸？我需要一个 100MBPS 的大型专用服务器。如果是，您确定它会解决问题吗？它有多快？通过知道我希望提取速度达到每秒大约 100 个 URL（此时，它达到每 15 秒 1 个 URL，非常慢......）**

*   剧本只有一段。它加载所有页面和 preg 匹配或 dom 数据并插入 mysql 数据库。

*   我提取了大量数据，这就是为什么一个表会快速包含数百万个条目......但是当我删除它们时，它可能会更快一些，但它总是同样的问题：不可能按顺序并行运行大量任务加快进程。

*   我不认为问题出在我的脚本上。在所有情况下，即使完美优化，我也不会像我想要的那样快。

*   我通过使用没有otu代理的脚本来进行抓取，但差异非常小..不显着..

我的结论是我需要使用专用服务器，但如果我不确定它是否能解决问题，我不想每月投资 100 美元，我将能够运行这些大量的 cron 任务/调用mysql 数据库没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-11T14:50:11.253

我将不得不查看代码，但实际上它看起来确实受到主机的速率限制。

是否可以每分钟或两分钟运行一次 cron，但将刮擦批处理到脚本中的一个 SQL 连接上？

本质上，目标是打开一次 sql 套接字并在连接上运行多个 URL 抓取，而不是当前每个 mysql 连接一次抓取，希望避免主机的速率限制。

伪代码：

```
<?php
$link = mysqli_connect("127.0.0.1", "my_user", "my_password", "my_db");
$sql = "SELECT url FROM urls_table WHERE scraped='0' LIMIT 100";
$result = mysqli_query($link, $sql);
while($row = mysqli_fetch_array($result, MYSQLI_NUM)){
    $url_to_scrape = $row[0];
    //TODO: your scrape code goes here
}
//Only AFTER you've scraped multiple URLs do we close the connection
//this will drastically reduce the number of SQL connects and should help
mysqli_close($link);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-24T20:59:34.257

这太容易了……永远不要在同一个 URL 上发送多线程。可能有许多不同的 URL。但尽量遵守一定的超时时间。你可以这样做：

```
sleep($random);  $random = random(15, 35) ; // in seconds 
```

# azure - 使用哪个专用缓存配置？

> ID：14837213
> 
> 赞同：2
> 
> 时间：2013-02-12T16:31:50.573
> 
> 标签：azure, azure-caching

一个大型电子商务网站正在寻求将其会话缓存从共享缓存切换到专用缓存。

它通常运行在中型服务器（5-6 台）上……在繁忙时间，它运行在 20 台中型服务器上。在非常繁忙的时期，每秒向站点发送 2000 多个请求并非不合理

同位缓存在这里是否足够好，还是必须缓存在专用工作角色中？

此外，是否必须为会话数据启用高可用性？该站点依靠会话数据来提供良好的用户体验。但是缓存被持久化到 Azure blob 存储，所以我不确定我是否完全获得了高可用性选项

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T18:48:33.393

专用角色的使用取决于您要运行的角色数量，以及您的 Web 角色的内存使用量是否决定它们是否可扩展。例如，如果您的 Web 角色总是在推动内存使用，并且触发横向扩展的是内存而不是 CPU - 那么请考虑使用缓存的专用角色，因为您的 Web 角色可以处理更长时间的负载。如果您的 Web 角色是 CPU 密集型的，则可能首选将每个角色的内存专用于缓存。您还需要考虑，如果以专用角色运行，则需要多个角色来处理负载和可用性，因此即使在非繁忙时间，您也将至少有 3 个角色运行缓存（但可能更少的 Web 角色） .

同位角色缓存的一个考虑因素是，如果您有粘性会话，则延迟会更低，因为该项目位于同一台机器上。不幸的是，Azure 负载均衡器是循环的，根本没有粘性，所以会话回到同一台机器的机会很低（5 个角色的时间的 1/5）。这意味着大部分时间缓存项将从集群中的另一个角色获取，因此失去了协同定位的延迟优势。

缓存是分布式的并且在内存中 - 没有我知道的 blob 存储（“集群的运行时状态”除外 - 不管是什么。加载到缓存中的项目可从集群上的其他机器使用它存储（在内存中）（从机器 B 到机器 A 的读取不会将其存储在机器 A 上 - 请参见下面的注释）。缓存项始终仅在内存中，并且缓存大小受可用内存的限制。

高可用性选项将项目复制到单独的机器（而不是存储），因此如果一台机器发生故障，则在某处仍有副本。高可用性还将使用更多内存，因为一个项目在两个不同的地方使用内存。对于您的电子商务应用程序而言，失败的可能性可能足够低 - 如果一个项目没有被缓存（通过失败或过期），它可能会从持久数据中重建。例如，如果您将篮子保存在缓存中而不是持久化到存储中，那么您不希望在角色回收时丢失它 - 在这种情况下，高可用性可能是最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T11:59:39.677

很好的答案@SimonMunro 但是根据我的经验，**Azure Co-located Cache 不适合生产**。我们的负载测试表明，当服务器被回收时，缓存需要非常长的时间才能恢复。我们已经通过从我们的数据库中获取数据来对此进行编码，但是由于数据库的压力，我们的网站停止了。这不仅发生在节点被回收时；而且如果你向上和向下扩展你的云服务；甚至当您执行 VIP 交换时。

我们使用 Azure 专用缓存执行了相同的测试，发现它可以处理缓存辅助角色回收的情况，对站点性能几乎没有影响。 如果您希望您的站点执行**，我的建议是在所有情况下都使用 Azure 专用缓存。**

# php - MySQL中如何使用不同表中的数据来获取相应的记录

> ID：14837216
> 
> 赞同：3
> 
> 时间：2013-02-12T16:32:00.743
> 
> 标签：php, mysql, sql

我目前有一个 PHP 生成的日历，为用户显示一些假期。此信息存储在数据库中，`holidays`即`users`. 我希望用户能够选择一个部门，然后 AJAX 将仅为该部门的用户加载假期。

这是两个具有相同基本结构的组合表：

**桌子`users`**

```
+------------------------------------+
| User       | Department            |
|------------+-----------------------|
| Brian      | Sales                 |
| Tony       | Marketing             |
| Carol      | Marketing             |
| Dave       | Warehouse             |
| Chris      | Warehouse             |
+------------------------------------+ 
```

**桌子`holiday`**

```
+------------------------------------+
| ID         | User                  |
|------------+-----------------------|
| 1          | Dave                  |
| 2          | Tony                  |
| 3          | Tony                  |
| 4          | Chris                 |
| 5          | Carol                 |
+------------------------------------+ 
```

我目前的查询：

```
$getAllHols = $con->query("SELECT * FROM `holiday`"); 
```

所以当然，这只是假期。我对 PHP 有足够的了解，可以获取特定部门的用户列表，然后在另一个查询中使用它来获取这些用户的假期。但我不想这样做。我认为必须有一个纯 SQL 解决方案。所以我需要查询来使用这两个表从用户在所选部门的假期中获取所有记录。

IE：

如果我选择“市场营销”部门，将返回记录 2、3 和 5。（托尼和卡罗尔在市场营销）。

我敢肯定，对于高级 SQL 用户来说，这是一个非常简单的问题，但对我来说不是。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:36:16.530

试试这个。

```
SELECT * FROM users 
LEFT JOIN holiday ON users.user = holiday.user
WHERE holiday.department = 'marketing' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:37:57.380

据我所知...

```
select user
from users inner join holiday
on users.user = holiday.user
where department = 'Marketing' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:18:20.010

如果用户表中有任何匹配的记录，这将提供假日表中不同的记录列表。这改进了加入表的选项，因为您不必担心对结果数据进行重复数据删除。

```
select distinct h.id, h.user
  from holiday h
 where h.user in (select u.user
                    from user u
                   where u.department = 'Marketing')
 ; 
```

# ios - iOS：如何从文档目录中删除所有具有特定扩展名的现有文件？

> ID：14837218
> 
> 赞同：7
> 
> 时间：2013-02-12T16:32:22.970
> 
> 标签：ios, cocoa-touch, nsfilemanager

当我更新我的 iOS 应用程序时，我想删除目录`sqlite`中的所有现有数据库`Documents`。现在，在应用程序更新时，我将数据库从包复制到文档目录并通过附加包版本来命名。因此，在更新时，我还想删除任何可能存在的旧版本。

我只想能够删除所有`sqlite`文件，而不必遍历并查找以前版本的文件。有没有办法给`removeFileAtPath:`方法通配符？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T16:55:51.733

那么，您想删除所有`*.sqlite`文件吗？没有办法避免循环，但您可以通过使用 a`NSPredicate`来限制它，先过滤掉非 sql 文件，并使用快速枚举确保快速性能。这是一种方法：

```
- (void)removeAllSQLiteFiles    
{
    NSFileManager  *manager = [NSFileManager defaultManager];

    // the preferred way to get the apps documents directory
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // grab all the files in the documents dir
    NSArray *allFiles = [manager contentsOfDirectoryAtPath:documentsDirectory error:nil];

    // filter the array for only sqlite files
    NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.sqlite'"];
    NSArray *sqliteFiles = [allFiles filteredArrayUsingPredicate:fltr];

    // use fast enumeration to iterate the array and delete the files
    for (NSString *sqliteFile in sqliteFiles)
    {
       NSError *error = nil;
       [manager removeItemAtPath:[documentsDirectory stringByAppendingPathComponent:sqliteFile] error:&error];
       NSAssert(!error, @"Assertion: SQLite file deletion shall never throw an error.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T23:14:05.843

正确答案的 Swift 版本：

```
func removeAllSQLiteFiles() {
    let fileManager = FileManager.default

    let documentsDirectory = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)[0]
    let urlDocumentsDirectory = URL(fileURLWithPath: documentsDirectory)
    guard let allFiles = try? fileManager.contentsOfDirectory(at: urlDocumentsDirectory, includingPropertiesForKeys: nil) else {
        return
    }
    let sqliteFiles = allFiles.filter { $0.pathExtension.elementsEqual("sqlite") }
    for sqliteFile in sqliteFiles {
        do {
            try fileManager.removeItem(at: sqliteFile)
        } catch {
            assertionFailure(error.localizedDescription)
        }
    }
} 
```

# algorithm - 从复杂度估计程序执行时间

> ID：14837223
> 
> 赞同：1
> 
> 时间：2013-02-12T16:32:26.327
> 
> 标签：algorithm, complexity-theory, performance, processing-efficiency

我想知道，如果我估计了最坏情况的时间复杂度**，我如何估计我的程序在我的机器**（例如 2.5 Ghz 机器）上执行的时间？ **例如**： - 如果我有一个 O(n^2) 的程序，在最坏的情况下，并且 n<100000，我怎么能知道 /estimate 在编写实际的程序/过程之前，它需要执行的时间秒？

知道一个程序的实际执行情况不是很好吗，而且它还可以节省编写代码，最终证明是低效的！非常感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:34:13.487

由于大 O 复杂度忽略了线性系数和较小的项，因此仅考虑其大 O 复杂度是不可能估计算法的性能的。

事实上，对于任何特定的 N，您无法预测两种给定算法中的哪一种会执行得更快。

例如，O(N) 并不总是比 O(N*N) 快，因为对于许多小的 N 值，采用 100000000*n 步的算法是 O(N) 比采用 N*N 步的算法慢。

这些线性系数和渐近较小的项因平台而异，甚至在相同等价类的算法中也不同（就大 O 度量而言）。3

**您尝试使用大 O 表示法的问题不是它旨在解决的问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:56:30.123

而不是处理复杂性，您可能想看看`Worst Case Execution Time`（WCET）。这个研究领域很可能与您正在寻找的内容相对应。

[http://en.wikipedia.org/wiki/Worst-case_execution_time](http://en.wikipedia.org/wiki/Worst-case_execution_time)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T16:39:21.630

将 N^2 乘以您在最内层循环的迭代中花费的时间，并且您有一个大概的估计。

# javascript - if 语句可以放在另一个 if else 语句中吗？

> ID：14837224
> 
> 赞同：-1
> 
> 时间：2013-02-12T16:32:27.610
> 
> 标签：javascript, if-statement

我觉得我应该能够从谷歌搜索中找到这个，但没有，所以我会在这里问它。

我在第二个 if 语句上不断收到错误，所以我想知道是否不允许在预先存在的 if/else 语句中放置另一个 if 语句。

感谢您的关注。

```
function flipImages(){
    currentImage = flipArray[i];

    if (i == 6) {
        clearInterval(interval)
    }
    else {
        // add an opacity animation to the flip so that it is less jarring 
        // set at a 100ms fade in

        $(currentImage).animate({
            opacity: 1 
        }, 100, function() {
            console.log(flipArray[i]);
        }

        // also animate in the child divs of the currentImage (which will only be text on 
        // the "final" div) 
        if ( $(currentImage).children().hasClass('final'){
            $(currentImage).children().animate({
                opacity: 1,
                left: '+=50'
            }, 500, function(){
                console.log( $(currentImage).children() );
            });
        });
    );
    i++;
    };              
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:35:37.983

您缺少几个右括号和大括号，或者在错误的位置有一些。使用带有语法突出显示的体面的编辑器可以很容易地发现这样的错误。

作为记录，是的，可以嵌套`if`语句 - 假设您的语法是正确的。

这是您的代码的更正版本：

```
function flipImages(){
    currentImage = flipArray[i];

    if (i == 6) {
        clearInterval(interval)
    }
    else {
        // add an opacity animation to the flip so that it is less jarring 
        // set at a 100ms fade in

        $(currentImage).animate({
            opacity: 1 
        }, 100, function() {
            console.log(flipArray[i]);
        });

        // also animate in the child divs of the currentImage (which will only be text on 
        // the "final" div) 
        if ($(currentImage).children().hasClass('final')) {
            $(currentImage).children().animate({
                opacity: 1,
                left: '+=50'
            }, 500, function(){
                console.log( $(currentImage).children() );
            });
        };
        i++;
    };              
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:48:57.113

你错过了 ) 之后`if ($(currentImage).children().hasClass('final')`还有几个分号，这使它成为无效的 js。

```
function flipImages() {
    currentImage = flipArray[i];

    if (i == 6) {
        clearInterval(interval);
    } else {
        // add an opacity animation to the flip so that it is less jarring 
        // set at a 100ms fade in

        $(currentImage).animate({
            opacity: 1
        }, 100, function () {
            console.log(flipArray[i]);
        });

        // also animate in the child divs of the currentImage (which will only be text on 
        // the "final" div) 
        if ($(currentImage).children().hasClass('final')) {
            $(currentImage).children().animate({
                opacity: 1,
                left: '+=50'
            }, 500, function () {
                console.log($(currentImage).children());
            });
        }
        i++;
    }
} 
```

**[在这里检查](http://jsfiddle.net/jubair/DX7Aa/)**

# python - 将字典列表转换为唯一的字典列表

> ID：14837231
> 
> 赞同：4
> 
> 时间：2013-02-12T16:32:41.907
> 
> 标签：python, parsing, dictionary, python-2.7

我一直在努力解决以下问题而没有成功。

我有一个看起来像这样的数据结构：

```
[   {   'ROOT': [   
            {   'firstElem': 'gc-3/1/0'},
            {   'SecondElem': '5.0.0.1'},
            {   'ThirdElem': '127.3.15.1'},
            {   'index': 16},
            {   'function': 'session'},
            {   'hw': '0.0.0.0'},
            {   'sw': '1.50.1.3'},
            {   'resources': [   {   'cpu-info': [   {   'cpu-peak-load': 1},
                                                     {   'cpu-avg-load': 1}]},
                                 {   'memory-total': 1},
                                 {   'memory-used': 2}]},
            ]},
    {   'ROOT': [
            {   'firstElem': 'gc-4/1/0'},
            {   'SecondElem': '5.0.0.2'},
            {   'ThirdElem': '127.3.4.1'},
            {   'index': 5},
            {   'function': 'stand'},
            {   'hw': '0.0.0.0'},
            {   'sw': '1.50.1.3'},
            {   'resources': [   {   'cpu-info': [   {   'cpu-peak-load': 1},
                                                     {   'cpu-avg-load': 1}]},
                                 {   'memory-total': 1},
                                 {   'memory-used': 2}]},
            ]}
] 
```

我想遍历这个数据结构并将所有具有相同名称的字典元素组合起来，然后创建一个列表。这很难解释，我创建了一个我正在寻找的示例结构：

```
{
    "ROOT": [
        {
            "firstElem": "gc-3/1/0", 
            "SecondElem": "5.0.0.1", 
            "ThirdElem": "128.0.2.19", 
            "index": "13", 
            "function": "session", 
            "hw": "1.11.0.0 ", 
            "sw": "1.50.0.228 ", 
            "resources": {
                "cpu-info": {
                    "cpu-peak-load": "1", 
                    "cpu-avg-load": "1",
                }, 
                "memory-total": "1", 
                "memory-used": "2", 
            }, 
        }, 
        {
            "firstElem": "gc-4/1/0", 
            "SecondElem": "5.0.0.1", 
            "ThirdElem": "128.0.2.19", 
            "index": "13", 
            "function": "session", 
            "hw": "1.11.0.0 ", 
            "sw": "1.50.0.228 ", 
            "resources": {
                "cpu-info": {
                    "cpu-peak-load": "8", 
                    "cpu-avg-load": "1", 
                }, 
                "memory-total": "1", 
                "memory-used": "2", 
            },  
        }
    ], 
} 
```

我被原来的数据结构困住了，**无法改变它**。任何帮助表示赞赏。上面提供的结构只是一个例子，因为数据是动态接收的，我不会知道标签名。所以请不要提供使用特定标签名的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:54:20.220

让我们试试这个：

```
r = {}

def lst2dct(lst):
    return (lst if not isinstance(lst, list) else 
        {k: lst2dct(v) for e in lst for k, v in e.items()})

for e in source:
    key, val = e.items()[0]
    r.setdefault(key, []).append(lst2dct(val)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:41:01.047

这是一种方法：

```
>>> from collections import defaultdict
>>> def  combine(item):
    # Easy return if not a list: element itself
    if type(item) != type([]):
        return item
    # else call recursion
    first_ret = [(i.items()[0][0], combine(i.items()[0][1])) for i in item]

    # Here we group by same keys if any ('ROOT', for instance)
    count_keys = defaultdict(list)
    for couple in first_ret:
        count_keys[couple[0]].append(couple[1])
    return dict((k, v if len(v) > 1 else v[0]) for k, v in count_keys.iteritems()) 
```

我不得不对`ROOT`节点进行分组，但它似乎正在工作：

```
>>> pprint(combine(l))
{'ROOT': [{'SecondElem': '5.0.0.1',
           'ThirdElem': '127.3.15.1',
           'firstElem': 'gc-3/1/0',
           'function': 'session',
           'hw': '0.0.0.0',
           'index': 16,
           'resources': {'cpu-info': {'cpu-avg-load': 1,
                                      'cpu-peak-load': 1},
                         'memory-total': 1,
                         'memory-used': 2},
           'sw': '1.50.1.3'},
          {'SecondElem': '5.0.0.2',
           'ThirdElem': '127.3.4.1',
           'firstElem': 'gc-4/1/0',
           'function': 'stand',
           'hw': '0.0.0.0',
           'index': 5,
           'resources': {'cpu-info': {'cpu-avg-load': 1,
                                      'cpu-peak-load': 1},
                         'memory-total': 1,
                         'memory-used': 2},
           'sw': '1.50.1.3'}]}
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:58:36.290

它有点hacky，但你可以尝试：

```
data = [   {   'ROOT': [   
            {   'firstElem': 'gc-3/1/0'},
            {   'SecondElem': '5.0.0.1'},
            {   'ThirdElem': '127.3.15.1'},
            {   'index': 16},
            {   'function': 'session'},
            {   'hw': '0.0.0.0'},
            {   'sw': '1.50.1.3'},
            {   'resources': [   {   'cpu-info': [   {   'cpu-peak-load': 1},
                                                     {   'cpu-avg-load': 1}]},
                                 {   'memory-total': 1},
                                 {   'memory-used': 2}]},
            ]},
    {   'ROOT': [
            {   'firstElem': 'gc-4/1/0'},
            {   'SecondElem': '5.0.0.2'},
            {   'ThirdElem': '127.3.4.1'},
            {   'index': 5},
            {   'function': 'stand'},
            {   'hw': '0.0.0.0'},
            {   'sw': '1.50.1.3'},
            {   'resources': [   {   'cpu-info': [   {   'cpu-peak-load': 1},
                                                     {   'cpu-avg-load': 1}]},
                                 {   'memory-total': 1},
                                 {   'memory-used': 2}]},
            ]}
]

root_list = [

        ]

final_data = {
            'ROOT' : root_list
            }

for dict in data:
    if dict['ROOT'] not in final_data['ROOT']:
        final_data['ROOT'].append(dict['ROOT']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:00:59.743

我只是在解释器中做了一些在这里和那里的东西，并想出了这个：

```
>>> i = [...] # your data
>>> rdict = {}
>>> for di in i:
 for root in di:
    if root not in rdict:
        rdict[root] = [di[root]]
    else:
        rdict[root] += [di[root]] 
```

`rdict`是您需要的 dict 类型，它应该适用于多个列表。

* * *

这个的函数版本：

```
def common_dict(list_of_dicts):
    i = list_of_dicts # less typing
    rdict = {}
    for di in i:
        for root in di:
            if root not in rdict:
                rdict[root] = [di[root]]
            else:
                rdict[root] += [di[root]]
return rdict 
```

# r - 确定坐标是否在地理区域内

> ID：14837236
> 
> 赞同：0
> 
> 时间：2013-02-12T16:32:46.977
> 
> 标签：r, maps

我试图辨别给定的纬度/经度坐标是否属于美国特定的州。我已经使用该`maps`包来获取州边界的纬度/经度坐标。我怀疑有一种方法可以询问坐标是否在每个州所包含的 lat 和 long 值的范围内，但我还没有找到一个优雅的解决方案。

基本上，这是一种无需知道区域名称就可以识别一个点是否在区域内的方法（因为`maps`包在命名区域方面非常特殊，例如苏联），但仍然能够提取区域名称稍后（用于阴影等）。

```
#Example coordinates
points=data.frame(lat=42,long=-100)
#Load US map
library(maps)
states=map_data("state")
#Summarize value of lat and long values for each region
library(plyr)
ddply(states,c("region"),function(x) return(c( range(x$long), range(x$lat) )) ) 
```

最后，我希望`data.frame` `states`有一个最后一列`true/false`，说明这些点是否出现在该区域。所以，在上面的例子中，所有条目`region=="nebraska"`都会有`true`.

# git - 仅在两次提交之间从 Git 历史记录中删除文件

> ID：14837241
> 
> 赞同：3
> 
> 时间：2013-02-12T16:33:11.713
> 
> 标签：git

我正在尝试使用`filter-branch`. 我之前成功地使用过这个命令，但我目前在特定的边缘情况下遇到了麻烦。

问题是这些大文件从未真正被删除，而是***被具有相同路径的较小版本所取代***。

据我所知，我相信我有一个独特的问题。

## Git 日志

详细地说，这是我的回购的基本表示：

```
----- A ------ B ----------- HEAD 
```

在哪里：

```
A is the commit where the large files were introduced
B is the commit (about 30 later) where the large files were replaced with smaller ones
HEAD is thousands of commits forward of B (~2 years of active development) 
```

## Git 过滤器分支

理论上，我应该能够做这样的事情：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch filenames' <parent of A>..B 
```

我相信我应该使用`<parent of A>`，因为`filter-branch`不包括在内。（我不确定我是否也需要使用 B 的父级，但这是我现在最不担心的问题）。

运行它会给我错误：

```
$ git filter-branch --index-filter 'git rm --cached --ignore-unmatch filenames' <parent of A>..B 
Which ref do you want to rewrite? 
```

所以我`--glob="refs/heads/master*"`在命令的末尾包含了似乎可以解决问题的命令（[source](https://gist.github.com/mike-perdide/775263)）。

执行完成后，文件已被完全删除 - git 似乎忽略了我指定的上限。

所以我想知道这种方法是否可行？

## 替代方法

我想我应该列出我的一些其他想法，以便潜在的答案可以集中在解决问题上。

1.  务实的方法是在 HEAD 提交文件名更改，然后运行`git filter-branch ... HEAD`​​. 但是，我的存储库有许多正在积极开发的分支，我相信这种方法会非常混乱。
2.  另一种方法可能是做类似[这里](http://git.661346.n2.nabble.com/removing-files-from-history-but-not-filesystem-td6523784.html)描述的事情。去引用：`create a temporary branch to point at HEAD^, filter-branch it, then add a graft to stitch the remaining commit on top of it, then filter-branch HEAD and then remove the graft.`

希望有人以前遇到过这个问题并且可以提供他们的专业知识。

## 更新

我要删除的文件总共**约为 500MB**，所以我非常渴望删除它们，这是可以理解的！他们早在我加入公司之前就已经承诺了，并且是我们从内部 Mercurial 服务器迁移到 GitHub 的残余（我想将 500MB 推送到内部服务器将不如 GitHub 引人注目......）。

## 更新 2

我一直在关注 twalberg 的第二个答案（我认为我以正确的方式使用它）：

```
git filter-branch --index-filter '(( $(git rev-list <SHA-of-child-of-B> --not $GIT_COMMIT | wc -l) > 0 )) && git rm --cached --ignore-unmatch <filenames>' 
```

这会产生我期望的那种输出：

```
...
Rewrite dc8a4b29463bfa43c2f3efe0c6e5a29a5cc6e0ef (1071/5680)rm 'file1'
rm 'file2'
rm 'file3'
rm 'file4'
... 
```

在以（预期？）错误结束之前：

```
Rewrite e6b712b57257e2edd0bb9fbbac59e4c9d7b5aa79 (1072/5680)index filter failed: (( $(git rev-list e6b712b --not $GIT_COMMIT | wc -l) > 0 )) && git rm -rf --ignore-unmatch <filename> 
```

`e6b712b`的孩子在哪里`B`。

在这一点上，我假设一切正常，所以我对我的存储库进行了本地文件系统克隆来测试它：

```
git clone file://<repo> <new repo> 
```

对象的数量和包文件的大小减少了非常少 - 我不知道为什么。通过`git count-objects -v`针对原始存储库`filter-branch`运行与针对它运行的存储库：

原始存储库：

```
count: 0
size: 0
in-pack: 106640
packs: 1
size-pack: 815512
prune-packable: 0
garbage: 0 
```

`filter-branch`ed 和文件系统克隆的存储库：

```
count: 0
size: 0
in-pack: 96165
packs: 1
size-pack: 793656
prune-packable: 0
garbage: 0 
```

我真的不确定为什么这仍然不起作用 - 也许我没有正确遵循建议的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:22:42.387

不幸的是，如果您真的想从存储库中删除这些对象（与简单地从当前和未来的修订中删除它们相比），`filter-branch`那么这样做的方法是，如果您要重写 commit `A`，则每次提交到每个分支头包含`A`在其历史记录中的也必须重写，因为提交的提交哈希取决于该提交的每个父级的提交哈希。如果您不重写包含 的所有分支`A`，那么这些对象仍然是您可访问历史中某些提交的合法部分，并且它们不会被修剪。

`BR`对于包含`A`其历史记录的每个分支，这应该有效：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch filenames' BR --not A~1 
```

这将从`A`（通过修剪`A`父级的分支）重写到分支的当前尖端`BR`。但是，即使它们被更新的较小版本替换，它也会从所有这些提交中删除文件。为了只删除它们直到 commit `B`，您可以像这样展开过滤器脚本：

```
... --index-filter '(( $(git rev-list <SHA-of-child-of-B> --not $GIT_COMMIT | wc -l) > 0 )) && git rm ...' ... 
```

这使用 rev-list 列出当前正在重写的提交之后的所有修订，直到 的子级`B`，计算这些行，并且仅`git rm`当一个或多个修订落在该范围内时（当 时`$GIT_COMMIT == B`，将打印一行 - 因此需要使用 ) 的子节点`B`。

即使对于单个分支来说，这也是一个相当大的变化，如果你有许多分支是在 或之后产生的，那么你需要做很多工作`A`，所以你必须决定它最终是否值得，或者你是否只需要一个更大的磁盘（您没有确切提到这些文件有*多大）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:41:00.047

```
A     is the commit where the large files were introduced
B     is the commit (about 30 later) where the large files were replaced 
      with smaller ones
HEAD  is thousands of commits forward of B (~2 years of active development) 
```

你已经说过了，我强烈建议不要这样做`filter-branch`，因为我相信它会重写 2 年的提交 SHA。也许另一种解决方案是[`git revert`](http://kernel.org/pub/software/scm/git/docs/git-revert.html)

```
git revert SHA_A..SHA_B
    Revert the changes done by commits from commit SHA_A (included) to
    SHA_B (included) 
```

# java - 如何在给定方法中对 querydsl 查询进行单元测试？

> ID：14837243
> 
> 赞同：3
> 
> 时间：2013-02-12T16:33:16.423
> 
> 标签：java, jpa, junit, junit4, querydsl

```
public UserEntity findUserByUsername( String username ) {

    QUserEntity tableUser = QUserEntity.userEntity;

    JPAQuery query = new JPAQuery( entityManager )
        .from( tableUser )
        .where( tableUser.ds_username.eq( username ) );

    return ( UserEntity ) query.singleResult( tableUser );
} 
```

使用最新版本的 junit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:15:03.763

您可以模拟`EntityManager`并验证 Querydsl 是否`EntityManager`以您预期的方式使用。

# c# - 错误：“DataBase”中的实体参与“FK_MSCourse_Language”关系。找到 0 个相关的“语言”。1“语言”是预期的

> ID：14837246
> 
> 赞同：1
> 
> 时间：2013-02-12T16:33:17.470
> 
> 标签：c#, database, linq, entity-framework, foreign-keys

嗨，我尝试从我的数据库中获取一些日期，但它不起作用，我真的不知道为什么。

我收到以下错误：

```
Error: Entities in 'DataBase' participate in the 'FK_MSCourse_Language' relationship. 0 related 'Language' were found. 1 'Language' is expected. 
```

我的代码：

```
var language = db.Language.Where(x => x.Designation == publicLanguage);

if (language != null)
{
  newCourse.Language = language.SingleOrDefault();
}
else
{
  newCourse.Language = db.Language.SingleOrDefault(x => x.Designation == "English");
} 
```

如果我这样做它可以工作，但我想将它动态地从数据库中转换为语言。

```
switch (publicLanguage)
{
  case "French":
    newCourse.Language = db.Language.SingleOrDefault(x => x.Designation == "French");
    break;
  default:
    newCourse.Language = db.Language.SingleOrDefault(x => x.Designation == "English");
    break;
} 
```

有人知道我在做什么错吗？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:41:04.737

LINQ 的`Where`操作返回一个 IEnumerable，它永远不能为空，从而使您的`if`块无用。`newCourse.Language = language.SingleOrDefault();`无论如何它都会执行。

我还认为尝试使用`==`最有可能的字符串变量也可能会给您带来一些问题。我建议改用该`.Equals()`方法，它实际上会调查字符串是否相等。另外，既然你只是想抓住第一个，为什么不这样做：

```
var language = db.Language.FirstOrDefault(x => x.Designation.Equals(publicLanguage)); 
```

这将获取与该语言匹配的第一个，或返回 null。在这种情况下，如果变量实际上为空，那么您可以只使用一个`if`语句，然后将英语指定为语言。`language`

# jquery - 如何拖放文本文件进行修改

> ID：14837247
> 
> 赞同：0
> 
> 时间：2013-02-12T16:33:32.780
> 
> 标签：jquery

基本上我正在编写一个纯客户端 jQuery 应用程序。第一步，我需要从文本文件（具体为 html 文件）中获取输入。
首先，我想将文件拖放到 html 元素中，如果它可以显示在元素中（如 div 或 textarea）会更好。然后我必须将内容存储在一个变量中，因为应用程序用于修改文本。
基本的 jQuery 不能做到这一点。我找到了几个可以拖放上传的jQuery插件，但没有找到一个支持文件修改的插件。
有谁知道如何做到这一点？我不需要文件上传功能，因为这是纯客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:00:36.250

正如 Blazemonger 所说，我无法在客户端实现我的目标。所以我所做的就是将所有文件处理移动到服务器端。在客户端，我使用 jQuery 文件上传插件进行文件上传。

# python - Putty 中的箭头键返回 ^[[A ^[[D ^[[B] 而不是移动光标

> ID：14837248
> 
> 赞同：75
> 
> 时间：2013-02-12T16:33:33.867
> 
> 标签：python, putty, arrow-keys

有没有其他人在 PuTTy 中遇到过这个错误？

例如，现在按向上键会产生：

```
>>> ^[[A 
```

谷歌不允许你搜索特殊字符，所以我很难找到这个问题的现有版本。

* * *

编辑：

所以这发生在我粘贴一些 unicode 之后（我认为，翻译已经设置为 utf-8）。

我检查了“更改设置”对话框中与其他打开的 PuTTy 窗口不同的设置，但设置似乎相同。

编辑2：

这可以通过重新启动 PuTTy 来解决，但仍然很麻烦。

**编辑3：**

**如何复制完全相同的错误：**

1.  在 linux PC 上打开一个 putty 终端（我使用的是 RedHat）
2.  打开 Python 2.7.* - 使用命令`python2.7`（注意：错误不会出现在 2.6 中）
3.  `import codecs`
4.  现在使用箭头键，这些奇怪的字符就会出现。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-06-10T12:16:53.830

根据我的经验，这是因为“bash”没有运行。只需运行“/bin/bash”即可享受色彩、历史等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-24T22:19:41.573

我发现指定“功能键和键盘”选项以匹配您的操作系统可以解决许多问题。

[油灰]

终端 -> 键盘 -> 单选按钮“Linux”

（如果您使用的是 Linux）然后您可以开始您的会话

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T16:43:59.373

您可以尝试更改“应用程序光标键”模式。它位于初始配置窗口的终端->键盘子部分（这些设置可能会被您的服务器覆盖）。

[http://the.earth.li/~sgtatham/putty/0.55/htmldoc/Chapter4.html#S4.4.4](http://the.earth.li/~sgtatham/putty/0.55/htmldoc/Chapter4.html#S4.4.4)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-15T13:58:24.147

只需在 ssh 中运行简单的 bash 命令或 sudo bash。它通常有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-08T21:30:09.917

对于那些对这个问题感兴趣的人，在虚拟环境中有同样的问题，解决了这个问题

```
pip install readlines 
```

有关详细信息，请参阅[以下答案](https://stackoverflow.com/a/4289945/2927973)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-10T21:07:01.890

终端 >>> 本地行编辑 >>> 强制关闭

[也可以看看](https://putty.org.ru/htmldoc/chapter4.html#config-localedit)

# asp.net - ASP.NET MVC 安全性 - 您应该在哪一层检查用户是否有权查看实体？

> ID：14837249
> 
> 赞同：3
> 
> 时间：2013-02-12T16:33:34.773
> 
> 标签：asp.net, asp.net-mvc, security

我有一个多层（但不是多层）ASP.NET 应用程序，它需要检查登录用户是否有权查看/编辑实体。我可以想到几个实现：

a) 检查用户是否有权使用 ActionFilter 在 UI 中查看/编辑实体

b) 检查用户是否有权使用 AOP 查看/编辑 ServiceLayer 中的实体

c) 两者都做？

如果您不同意 a)、b) 或 c)，您认为我应该在我的软件应用程序的哪个层检查用户授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:41:59.003

以我个人的经验，在更广泛的层面上，我发现需要同时做这两个 (c)。我必须验证操作以及服务层中的权限。对于这种特定情况，让操作过滤器调用您的服务层可能是有意义的，或者首先检查权限并且不完全呈现查看/编辑功能。

您本质上是在谈论细粒度的权限；我不知道您为此使用了什么数据存储。确保您采用任何方法来计划效率/性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:40:30.987

验证用户是否可以看到实体太宽泛？如果用户只能与实体的特定方面进行交互，而不能与其他方面进行交互呢？

我倾向于将安全性视为“用户可以执行请求的过程/操作”。该过程可能与 1 个或多个实体交互。

因此，我倾向于通过操作过滤器验证用户身份和/或验证特定于上下文的视图模型。如果执行到达控制器操作，您可以假设幸福路径。如果出现问题，所有其他验证/身份验证都已经发生并绕过该操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T05:49:32.320

您可以将 [Authorize] 放在要在 Web 层顶部授权的控制器顶部，例如：您有一个操作：添加您有一个控制器：区域

```
[Authorize]
    public class areaController : Controller
    {

        public ActionResult add()
        {

            return View();
        } 
```

在此示例中，未登录时无法添加区域

# python - Base64 解码在 Python 中并非每次都有效

> ID：14837251
> 
> 赞同：1
> 
> 时间：2013-02-12T16:33:44.940
> 
> 标签：python, actionscript-3, base64, decode

我必须解码一个字符串。这个来自 Flash AS3，我想用 Python 解码它。我对 PHP 没有任何问题，但我无法使用 Python 2.6 'base64.b64decode' 解码以下字符串。

> f3hvQgQaBFp9IC4NQhYZQiAhNhxBAkwIJC0pDR8fBl12ZjkWXwMEWn57bU0dGgBfcWdsTwAbGB4xLmVLAh0FXXd5a0gGHQRWdy5iQANNVAl / KmNLAhUBXyV8PkFQHwNefntjGgpPU18nK21OURtSC35wPE4FHFUJdi4 / TlMUVFwlez9JVxtVDH0TB0IGHAc％的Pr

Python 返回“TypeError：不正确的填充”。它似乎在字符串的末尾有多余的字符（来自'%'）。但是为什么 Python base64 库不管理这个呢？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:39:15.047

在我看来，您没有向函数提供有效的字符串 - 它告诉您。你不能指望一个函数“猜测”你想要什么，并以此为基础做出反应。您必须使用有效的参数，否则该函数不起作用。

# sas - 通过 SAS 中的合并填补数据空白

> ID：14837253
> 
> 赞同：1
> 
> 时间：2013-02-12T16:33:49.030
> 
> 标签：sas

我的数据如下所示：

```
id t   x 
1  1  3.7 
1  3  1.2 
1  4  2.4 
2  2  6.0 
2  4  6.1 
2  5  6.2 
```

对于每个`id`我想根据需要添加观察结果，因此所有 1<=t<=5 都有值。

所以我想要的结果是：

```
id t   x 
1  1  3.7 
1  2  .
1  3  1.2 
1  4  2.4 
1  5  .
2  1  .
2  2  6.0 
2  3  .
2  4  6.1 
2  5  6.2 
```

我的真实设置涉及大量数据，所以我正在寻找最有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:00:03.903

这可能是最简单的方法，使用 PROC Summary 中的 COMPLETETYPES 选项。我假设 id 和 t 的组合在数据中是唯一的。我唯一不确定的是在运行非常大的数据集时是否会遇到内存问题，我过去在这方面遇到过 PROC Summary 问题。

```
data have;
input id t x;
cards;
1  1  3.7 
1  3  1.2 
1  4  2.4 
2  2  6.0 
2  4  6.1 
2  5  6.2 
;
run;

proc summary data=have nway completetypes;
class id t;
var x;
output out=want (drop=_:) max=;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:05:29.117

这是另一种方法，前提是您已经知道 T 的最小/最大值。它创建一个包含 ID 和 T 的所有值的模板，然后与原始数据集合并，以便保留 X 的值。

```
proc sort data=original_dataset out=template(keep=id) nodupkey;
   by id;
run;

data template;
   set template;
   do t = 1 to 5; /* you could make these macro variables */
      output;
   end;
run;

proc sort data=original_dataset;
   by id t;
run;

data complete_dataset;
   merge template(in=in_template) original_dataset(in=in_original);
   by id t;
   if in_template then output;
run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:14:13.193

如果您有 ETS，一种选择是使用 PROC EXPAND。我不确定它是否能 100% 完成你想要的，但这可能是一个好的开始。到目前为止，主要问题似乎是它不会在开始或结束时进行记录，但我认为这是可以克服的；只是不确定如何。

```
proc expand data=have out=want from=daily method=none extrapolate;
by id;
id t;
run; 
```

它为 id 1 填写 2，为 id 2 填写 3，但不为 id 1 填写 5 或为 id 2 填写 1。

要在基本 SAS 中执行此操作，您有几个选择。带有 SPARSE 选项的 PROC FREQ 可能是一个不错的选择。

```
proc freq data=have noprint;
tables id*t/sparse out=want2(keep=id t);
run;

data want_fin;
merge have want2;
by id t;
run; 
```

您也可以通过 PROC SQL 执行此操作，并使用可能的 t 值连接到表，但这对我来说似乎较慢（即使 FREQ 方法需要两次通过，FREQ 将非常快并且合并使用已经排序的数据所以这也不是太慢）。

# ruby - 使用 Rack::Session::Pool 存储的 cookie 的秘密

> ID：14837255
> 
> 赞同：2
> 
> 时间：2013-02-12T16:33:51.140
> 
> 标签：ruby, sinatra, rack

[来源](https://github.com/rack/rack/blob/master/lib/rack/session/cookie.rb#L91)包含`Rack::Session::Cookie`以下关于未设置密码以检查 cookie 完整性的警告：

> 没有为 Rack::Session::Cookie 提供秘密选项。这构成了安全威胁。强烈建议您提供一个秘密，以防止可能来自精心制作的 cookie 的漏洞利用。

使用`Rack::Session::Cookie`模块时，您可以通过以下方式设置密码：

```
use Rack::Session::Cookie, secret: 'change_me' 
```

但是，我使用`Rack::Session::Pool`的是“提供简单的基于 cookie 的会话管理”。我假设我还需要为其提供秘密，但找不到相关示例。源代码/文档也不是很有帮助。有谁知道这是否需要完成，如果需要如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T03:47:57.603

如果您查看[这个问题并回答和](https://stackoverflow.com/questions/13573968/using-racksessionpool-over-racksessioncookie)之间的区别`Cookie`，`Pool`它会指出只有“id”（实际上是一个[SID](http://en.wikipedia.org/wiki/Session_ID)）保存在 cookie 中，其他所有内容都保存在内存中。如果数据在内存中，那么生成 HMAC 的要求比将它存储在 cookie 中的要求要低得多，如果你*真的*需要它，那么我想它已经由你决定了。

我查看[了 source](https://github.com/rack/rack/tree/master/lib/rack/session)，并且[Pool](https://github.com/rack/rack/blob/master/lib/rack/session/pool.rb#L31)不会寻找作为选项传递的秘密，但[Cookie](https://github.com/rack/rack/blob/master/lib/rack/session/cookie.rb#L91)会。

我相信通过阅读源代码`Pool`，它每次都会生成一个唯一的 SID，因此不会暴露您数据中的密钥/ID。

附带说明一下，如果您要选择使用 cookie，请[对它们进行加密](https://rubygems.org/gems/encrypted_cookie)。

# servlets - 在接收参数的 OSGi 中注册 servlet

> ID：14837260
> 
> 赞同：0
> 
> 时间：2013-02-12T16:34:00.923
> 
> 标签：servlets, osgi

我正在尝试注册一个将接收参数的 HttpServlet（不管它是通过 POST 还是 GET，尽管显然首选 POST）。几乎只是扩展这里描述的内容：

[http://www.javaworld.com/javaworld/jw-06-2008/jw-06-osgi3.html?page=3](http://www.javaworld.com/javaworld/jw-06-2008/jw-06-osgi3.html?page=3)

和这里：

[http://www.peterfriese.de/osgi-servlets-a-happy-marriage/](http://www.peterfriese.de/osgi-servlets-a-happy-marriage/)

我还没有使用声明式注册，首先希望看到它工作，然后我会做其他的事情。

调用时出现疑问：

```
httpService.registerServlet("/helloworld", new RestServlet(), null, null); 
```

不知道如何告诉 HttpService 服务器将接受参数。此外，每次注册 servlet 时是否必须使用 new() 创建一个 HttpServlet，或者我可以为不同的别名重复使用相同的 HttpServlet？我问是因为也许可以在别名参数中使用一些通配符，然后让 HttpServlet 对象处理 HttpRequest 中的任何内容......？

欢迎任何帮助/建议/想法！

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:21:40.773

*   如果忽略 servlet init，您可以使用同一个 servlet 多次注册。
*   如果您想查看所有内容，只需注册 /
*   白板更容易，也是更好的方法。

Http 服务将找到最长的路径并调用该 servlet。所以 / 是一个后备。

没有白板的示例 hello world servlet：

```
@Component
public class Hello extends HttpServlet {
  public void doGet(HttpServletRequest rq, HttpServletResponse rsp) throws IOException {
    rsp.getWriter().write( ("Hello World " + rq.getParameter("name")).getBytes());
  }

  @Reference
  void setHttp(HttpService http) { http.registerService("/hello", null, null); }
} 
```

例如，现在使用白板：

```
@Component(provide=Servlet.class, properties="alias=/hello")
public class Hello extends HttpServlet {
  public void doGet(HttpServletRequest rq, HttpServletResponse rsp) throws IOException {
    rsp.getWriter().write( ("Hello World " + rq.getParameter("name")).getBytes());
  } 
```

}

这种东西在 bndtools 中真的很容易玩。使用 DS 创建一个小项目，然后使用 Web 控制台创建一个 bndrun 文件。不会后悔的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:30:09.013

我对 OSGI 不太了解，但在我看来，这更像是一个纯粹的 servlet 问题。我查看了您提供的链接，希望对您有所帮助。

首先，我认为您不需要告诉`HttpService`它它会接受参数。当您使用 servlet 时，您可以简单地提取请求参数：

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) 
        throws ServletException, IOException {
    req.getParameter(paramName); // get a request parameter
} 
```

其次，我认为您可以将同一个 Servlet 用于多个“别名”。这对我来说似乎是一种 servlet 映射：您可以对同一个 servlet 使用多个映射（`/helloworld`等`/helloxyz`）。

# javascript - 如何使用同位素为 Knockout observableArray 中的项目布置 HTML 元素？

> ID：14837263
> 
> 赞同：1
> 
> 时间：2013-02-12T16:34:15.013
> 
> 标签：javascript, jquery, knockout.js, jquery-isotope

给定一个 Knockout observableArray，可以添加和删除哪些项目，我如何使用 Isotope 布置相应的 HTML 元素？例如，考虑以下 HTML，它声明了一个 div ，该 div`#container`应该由 Knockout 填充子 div：

```
<div id="container" data-bind="foreach: items, click: addItem">
<div class="item show" data-bind="text: text, click: $parent.removeItem, clickBubble: false"></div> 
```

随附的 JavaScript 使用几个项目预填充容器，并允许用户单击项目以删除它们并单击容器以添加新项目（通过 Knockout）：

```
function ItemModel(parent) {
    var value, self = this,
        found;
    for (value = 0; value < parent.items().length; ++value) {
        found = false;
        for (i in parent.items()) {
            var item = parent.items()[i];
            if (item.value() == value) {
                found = true;
                break;
            }
        }
        if (!found) {
            break;
        }
    }
    this.value = ko.observable(value);

    this.text = ko.computed(function () {
        return "Item " + self.value();
    });
}

var ViewModel = function () {
    var self = this;
    self.items = ko.observableArray()
    self.items.push(new ItemModel(self));
    self.items.push(new ItemModel(self));

    this.removeItem = function (item) {
        self.items.remove(item);
        return false;
    };

    this.addItem = function () {
        self.items.push(new ItemModel(self));
    };
};

ko.applyBindings(new ViewModel("Test")); 
```

当与 Isotope 正确耦合时，Isotope 应自动布置项目，包括何时删除、添加和移动项目。

有关该概念的演示，请参见[this fiddle](http://jsfiddle.net/aknuds1/NFE8m/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:34:15.013

[通过编写一个名为Knockout-Isotope](https://github.com/aknuds1/knockout-isotope)的特殊 Knockout 绑定，我已经能够将 Knockout 与 Isotope 集成。这极大地促进了两种技术的集成，并确保 Isotope 与 Knockout 视图模型保持同步。有关如何将此绑定与 Knockout [observableArray](http://knockoutjs.com/documentation/observableArrays.html)一起使用的示例，请参见下面的代码，或尝试使用 live [fiddle](http://jsfiddle.net/aknuds1/fHW3t/)。

请注意，此绑定依赖于[Knockout](https://github.com/aknuds1/knockout)的一个分支才能工作。

## 代码

[演示小提琴](http://jsfiddle.net/aknuds1/fHW3t/)。

**HTML：**

```
<h1>Knockout Isotope Binding Demo</h1>
<p>This is a demonstration of the 
 <a href="https://github.com/aknuds1/knockout-isotope">Knockout-Isotope</a>
 binding for <a href="http://knockoutjs.com/">Knockout</a>, which visualizes
 Knockout observableArrays through
 <a href="http://isotope.metafizzy.co/index.html">Isotope</a>.
</p>

<p>Click on an item to remove it or click in the item container to add a new item</p>
<div id="container" data-bind="isotope: { data: items, isotopeOptions: getOptions }, click: addItem">
  <div data-bind="text: text, click: $parent.removeItem, clickBubble: false"></div>
</div> 
```

**JavaScript：**

```
function ItemModel(parent) {
    var value, self = this,
        found, i;
    for (value = 0; value < parent.items().length; ++value) {
        found = false;
        for (i in parent.items()) {
            var item = parent.items()[i];
            if (item.value() == value) {
                found = true;
                break;
            }
        }
        if (!found) {
            break;
        }
    }
    this.value = ko.observable(value);

    this.text = ko.computed(function () {
        return "Item " + self.value();
    });
}

var ViewModel = function () {
    var self = this;
    self.items = ko.observableArray();
    self.items.push(new ItemModel(self));
    self.items.push(new ItemModel(self));

    this.removeItem = function (item) {
        self.items.remove(item);
    };

    this.addItem = function () {
        self.items.push(new ItemModel(self));
    };

    // Knockout callback for getting Isotope options
    this.getOptions = function () {
        return {
            masonry: {
                columnWidth: 210
            }
        };
    };
};

ko.applyBindings(new ViewModel("Test")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T19:01:57.270

这可能是一个解决方案......或一种开始的方式

```
 <div id="Items" data-bind=" foreach: Items">

    <div class="item" data-bind="masonry: { container: '#Items'  }"> 
    </div>  
 </div> 
```

> ko.bindingHandlers.masonry = { init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
> 
> ```
> },
> update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
> 
>     var $el = $(element);
>     var value = ko.utils.unwrapObservable(valueAccessor());
> 
>     var container = document.querySelector(value.container);
>     var msnry = Masonry.data(container);
> 
>     if (!msnry) {
>         var msnry = new Masonry(container);
>     }
>     msnry.addItems($el)
>     msnry.layout();
>     msnry.bindResize();
> }, 
> ```
> 
> };

# android - 在 Android 应用程序上生成摇动动作

> ID：14837265
> 
> 赞同：1
> 
> 时间：2013-02-12T16:34:27.387
> 
> 标签：android, android-sensors

当用户摇晃 android 手机时，我想显示一条消息，例如“你摇晃了”。这意味着就像当我们按下一个按钮时，我们可以使用一些动作来创建

```
button.setonclicklistiner() 
```

就像我想在用户摇动设备时做一些事情。我怎样才能做到这一点？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:39:45.467

从 Square查看[Seismic 。](https://github.com/square/seismic/)我还没有在我自己的工作中使用它，但是从示例中您可以声明一个如下所示的抖动侦听器：

```
public class Demo extends Activity implements ShakeDetector.Listener {
  @Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SensorManager sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    ShakeDetector sd = new ShakeDetector(this);
    sd.start(sensorManager);

    TextView tv = new TextView(this);
    tv.setGravity(CENTER);
    tv.setText("Shake me, bro!");
    setContentView(tv, new LayoutParams(MATCH_PARENT, MATCH_PARENT));
  }

  public void hearShake() {
    Toast.makeText(this, "Don't shake me, bro!", Toast.LENGTH_SHORT).show();
  }
} 
```

# c++ - 试图重载 [] 来遍历双链表

> ID：14837271
> 
> 赞同：2
> 
> 时间：2013-02-12T16:34:33.527
> 
> 标签：c++, linked-list

我整天都在挠头试图弄清楚这一点，因为据我所知，我已经在重载的 + 和 - 运算符中编写了代码，我需要弄清楚如何重载 [] 运算符，以便当一个值被放置在其中，它将正确遍历列表并指向信息，例如..[5] 将它向前移动 5，[-5] 将它向后移动，任何帮助将不胜感激，就像我说的那样，似乎我几乎应该已经在我的 + 和 -...

```
typename doublyLinkedList<T>::iterator doublyLinkedList<T>::iterator::operator+(const int amount) const {
    doublyLinkedList<T>::iterator tempClone(*this);
    tempClone.pastBoundary=false;
    T i;

    if(amount < 0)
    {
    return this->operator-(-amount);
    }

    for(i=0; i < amount; i++)
    {   
    if(tempClone.current->forward == NULL)
    {
       tempClone.pastBoundary =true;
    }else
    {
       ++tempClone;
    }
    }
    if(tempClone.pastBoundary == true)
    {
    return *this;
    }else
    {
        return tempClone;   
    }
    }

template <typename T>
typename doublyLinkedList<T>::iterator doublyLinkedList<T>::iterator::operator-(const int amount) const {
    doublyLinkedList<T>::iterator tempClone(*this);
    tempClone.pastBoundary=false;
    T i;

    if(amount < 0)
    {
    return this->operator+(-amount);
    }

    for(i=0; i < amount; i++)
    {   
        if(tempClone.current->backward == NULL)
    {
       tempClone.pastBoundary =true;
    }else
    {
       --tempClone;
    }
    }

    if(tempClone.pastBoundary == true)
    {
    return *this;
    }else
    {
        return tempClone;   
    }
}

template <typename T>
T& doublyLinkedList<T>::iterator::operator[](const int index) {
doublyLinkedList<T>::iterator tempClone(*this);

if(index >= 0){
   return this->operator+(index);
 }else{
   return this->operator-(index);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:03:38.620

您`operator+`返回一个迭代器，因此`operator[]`应该间接返回值：

```
template <typename T>
T& doublyLinkedList<T>::iterator::operator[](const int index) {
  return *(this + index);
} 
```

如其他地方所述，提供`operator+`或`operator[]`提供非随机访问容器具有误导性，因为 O(n) 性能可能令人惊讶。

# html - CSS 过渡仅适用于 Chrome

> ID：14837273
> 
> 赞同：4
> 
> 时间：2013-02-12T16:34:46.477
> 
> 标签：html, css, animation

我创建了一个菜单，当您将鼠标悬停在链接上时，标题会滑出框架，并且不同的单词会滑入（客户请求）。我试图仅在 CSS 中执行此操作，它在 Chrome 中完全按预期工作，但在 Firefox 或 Opera 中却没有。只有第二个动画（不同的词滑入）有效，但主动画（普通词滑出）没有应用其过渡。这是一个带有示例的 jsFiddle：

[http://jsfiddle.net/3tUAN/](http://jsfiddle.net/3tUAN/)

如果必须的话，我可以求助于使用 jQuery（代码在那里，IE9 已经需要），但如果可能的话，我想让它只适用于 CSS。我考虑过尝试更具体地使用选择器（使用子选择器，例如`a.MenuLink > li.MenuItem > span.MenuTitle`），但我希望社区可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:40:34.943

您需要`left`为`span.MenuTitle`. 这可能是其他浏览器中的错误，但它在 Firefox 中修复了它。像这样的东西：

```
span.MenuTitle {
    left: 0;
} 
```

看到这个[jsFiddle](http://jsfiddle.net/3tUAN/1/)

# hiphop - Hiphop VM 并针对 php 文件运行

> ID：14837274
> 
> 赞同：1
> 
> 时间：2013-02-12T16:34:54.123
> 
> 标签：hiphop

我无法针对嘻哈虚拟机运行 php 文件。我设置了一个新的 Ubuntu 12.04 服务器，根据[此指南](https://github.com/facebook/hiphop-php/wiki/Prebuilt-packages-on-ubuntu-12.04)安装，但是当尝试遵循[Running HipHop](https://github.com/facebook/hiphop-php/wiki/running-hiphop)页面中的示例时，它向南运行。

即：

```
ubuntu:~$ $HPHP_HOME/src/hhvm/hhvm --hphp sample.php 
-bash: /src/hhvm/hhvm: No such file or directory 
```

我有点不知所措，因为我没有找到很多关于如何准确运行它的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T12:24:09.477

不确定跟进一个一年前的问题是否合理。

Hello world 示例位于

```
 https://github.com/facebook/hiphop-php/wiki/Running-HipHop-VM 
```

可能假设在执行此操作之前已经设置了一些配置，例如 PHP 主页。没有配置，curl 无法工作并获取 hello.php。

要配置，请拿出 config.hdf，如下

```
 https://github.com/facebook/hiphop-php/wiki/Runtime-options 
```

然后做

```
hphp/hhvm/hhvm -m server -c config.hdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T21:28:59.090

如果您安装了该软件包，请检查`/usr/bin/hhvm`并使用它来运行您的脚本。[我向https://github.com/facebook/hiphop-php/wiki/Running-HipHop-VM](https://github.com/facebook/hiphop-php/wiki/Running-HipHop-VM)添加了更多示例

# javascript - 点击触发事件太多次 - Jquery

> ID：14837278
> 
> 赞同：0
> 
> 时间：2013-02-12T16:35:19.657
> 
> 标签：javascript, jquery, triggers, click

我有一些特殊的 pb：我通过 ajax 请求动态创建一些列表和类 'myclass' 的 div，然后单击它们，我称之为在输入区域中添加一些 url，然后将一些源添加到 iframe，在弹出窗口中显示

```
$(document).on("click", "li .myclass", function () {
    var uri = $(this).closest('li').attr("id");
    var embed = 'https://www.youtube.com/embed/';
    $('#myinput').val(val + uri);
    $('#wrapper iframe').attr('src', embed + uri);
}); 
```

然后点击弹出窗口的按钮，我触发点击**#mybutton**，创建一些文本区域

```
$(document).on("click", ".popup button", function () {
    event.preventDefault();
    $('#mybutton').trigger('click');
    $('#myinput').val('');
}); 
```

我的问题是我第一次单击“li .myclass”时，它会干净地创建一个文本区。但是如果我第二次单击，它会创建三个文本区域，然后如果我第三次单击，它会创建 6 个文本区域。我真的不明白这种行为，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:23:23.297

尝试替换这个：

```
$(document).on("click", "li .myclass", function () { 
```

有了这个：

```
$("li .myclass").on("click", function () { 
```

您使用带有“选择器”参数的 jQuery [on](http://api.jquery.com/on/)方法的方式有点危险。它需要了解[事件冒泡](http://www.quirksmode.org/js/events_order.html)，并且可能是触发多个事件的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T05:17:17.713

我们必须 stopPropagation() 以避免 Clicks 触发事件的次数过多。

```
$(this).find('#cameraImageView').on('click', function(evt) {
evt.stopPropagation();
console.log("Camera click event.");
}); 
```

# winapi - 有没有办法以逻辑单位创建大小的窗口？

> ID：14837280
> 
> 赞同：0
> 
> 时间：2013-02-12T16:35:25.080
> 
> 标签：winapi

我创建了一个代表页面的窗口，其大小应以毫米为单位确定，但 CreateWindow 函数以像素为单位获取大小，我想到的唯一方法是使用以下代码：

```
case WM_CREATE:
    HDC hdc;
    hdc = GetDC(hWnd);
    SetMapMode(hdc, MM_LOMETRIC);
    POINT pt[1];
    // get the right bottom point of A4 page
    pt[0].x = 2100;
    pt[0].y = -2970;
    DPtoLP(hdc, pt, 1);
    DeleteDC(hdc);
    SetWindowPos(hWnd, NULL, 0, 0, pt[0].x, pt[0].y, SWP_NOMOVE | SWP_NOZORDER);
    return 0; 
```

但这似乎太麻烦了，有没有更简单的方法？

# ruby-on-rails - Rails：无法通过迁移添加列

> ID：14837281
> 
> 赞同：0
> 
> 时间：2013-02-12T16:35:26.740
> 
> 标签：ruby-on-rails, ruby, migration

我有这个简单的迁移：

```
class AddUpdateStatusToProducts < ActiveRecord::Migration
  def self.up
    add_column :products, :update_status, :integer, :default => 0
  end
end 
```

`rake db:migrate`产生这个错误：

```
rake aborted!
/Users/adam/rubydev/project_name/lib/tasks/scheduler.rake:90: syntax error, unexpected $end, expecting keyword_end 
```

问题出在哪里？表名正确，迁移的语法也应该是...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:39:49.427

问题出在这个文件中：`/Users/adam/rubydev/project_name/lib/tasks/scheduler` 你忘了把 end 或 } 放在第 90 行附近的某个地方

# c# - 功能T 仅当 S 和 T 不同时才从 lambda 表达式的输出推断？

> ID：14837286
> 
> 赞同：9
> 
> 时间：2013-02-12T16:35:35.913
> 
> 标签：c#, generics, type-inference, func

当`S`和`T`不同时，这有效：

```
public static void Fun<S, T>(Func<S, T> func)
{

}

Fun((string s) => true); //compiles, T is inferred from return type. 
```

但，

```
public static void Fun<T>(Func<T, T> func)
{

}

Fun(t => true); //can't infer type. 
```

在第一个例子中，既然`T`是从 lambda 表达式的返回类型推断出来的，那么`T`在第二个例子中也不能推断出来吗？我想它正在这样做，但是为什么第一个`T`不知道，当第二个`T`知道时`Func<T, T>`，`T == T`好吧？或者在 s 的情况下是否有推断类型的顺序`Func`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T17:08:35.373

这与 S 和 T 不同无关。它与您在第一种情况下提供形式参数类型而在第二种情况下不提供它有关。

*在知道委托的形式参数类型之前，*方法类型推断不会尝试从 lambda 推断委托的返回类型。

在第二种情况下，您没有给编译器任何东西来推断形式参数类型 T，因此甚至不会分析 lambda 的主体。

> “形式参数类型”是什么意思？

形式参数是一个变量，它采用传递给方法、索引器、构造函数、lambda 或匿名方法的参数的值。（或者，在`out`和`ref`形式参数的情况下，成为调用者提供的变量的别名。）形式参数是*变量*，因此具有*类型*。

委托具有类型为 的`delegate R Func<A, R>(A a);`形式参数。您使用要制作的方法类型参数构造它，因此委托的形式参数类型现在是。类型推断的任务是推断这些类型和.`a``A``Func<S, T>``S``S``T`

在您的第一个示例中，您有一个带有`s`type 形式参数的lambda `string`。所以类型推断的原因是，既然这个 lambda 参数对应于`func`方法`Fun`的形参，而形参类型`func`是的，`Func<S, T>`那么形参类型`s`必然对应`S`。由于您为 提供了形式参数类型`s`，`S`因此推断为`string`。

一旦做出推断，就`T`可以通过分析 lambda 的主体来推断。

在您的第二种情况下，没有为`t`. 由于没有其他东西`t`可以推断出的类型，因此类型推断放弃并放弃在查看主体之前分析此 lambda。

碰巧的是，在您的情况下，可以独立于 lambda 的形式参数类型来分析主体。这是一种罕见的情况，类型推断算法并不是为了利用它而编写的。

如果这是您想要的类型推断，请考虑使用 F# 而不是 C#。它有一个更先进的类型推断算法，基于 Hindley-Milner 算法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T16:45:22.867

lambda 和其他函数的通用参数由它们的参数类型决定，而不是它们的返回类型。这与您不能这样做的原因完全相同：

```
T Foo<T>() { return default(T); }

string x = Foo(); // error 
```

对于表达式`t => true`，我们显然不知道`t`可能是什么，因此编译器无法仅基于此做出任何决定。

# plugins - 在编写 Glimpse 插件时，如何添加可点击的 URL 链接？

> ID：14837289
> 
> 赞同：3
> 
> 时间：2013-02-12T16:35:40.220
> 
> 标签：plugins, glimpse

在编写 Glimpse 插件时，如何输出可点击的链接？它似乎对所有输出进行 HTML 编码。我想在我的插件中创建一个链接以连接到站点中的另一个页面以查看更详细的信息。

另外，有没有办法让 Core Trace 插件输出一个可点击的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:44:27.153

您可以通过用感叹号 ( ) 将字符串括起来，将原始 HTML 输出写入 Glimpse 插件（又名 Tab `!`）。

这是一个例子。通常你会做这样的事情：

```
Trace.Write("<a href=\"http://www.google.com\">Link</a>"); 
```

这将输出：`<a href="http://www.google.com">Link</a>`在跟踪选项卡中。

要使用“原始”HTML，请添加感叹号：

```
Trace.Write("!<a href=\"http://www.google.com\">Link</a>!"); 
```

这将输出：跟踪选项卡中的[链接](http://www.google.com)。

# html - 在要引用的图形标签中放置列表

> ID：14837292
> 
> 赞同：1
> 
> 时间：2013-02-12T16:35:44.410
> 
> 标签：html, html-lists, figure

我目前正在创建一个投资组合网站以发送给潜在的雇主。我想向他们展示我热衷于使用尽可能语义化的干净代码。这导致我向潜在雇主发送电子邮件，以获取有关在做投资组合网站时什么是重要的建议。在收到一些回复后，我意识到我需要一个即将推出的页面。这导致我创建了一个即将推出的页面，该页面显示了投资组合网站的进度，进而显示了我的工作方式以及我如何处理 Web 项目。

因为我将“引用”我收到的所有信息，所以我想以“列表形式”添加信息，但不太确定如何正确处理。我最近在“alistapart”网站上阅读了[一篇文章](http://alistapart.com/blog/post/more-thoughts-about-blockquotes-than-are-strictly-required)`blockquote`，该文章建议我可以在图形标签中使用块引号，然后在.

只是想知道我是否可以用 ul 做这样的事情：

```
<figure class="advice">
    <ul>
        <li>Show you are living and breathing web design.</li>
        <li>Portfolios, experience and practical examples of work are critical.</li>
    </ul>
    <figcation>Joe Blogs / <cite>A web agency</cite></figcaption>
</figure> 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:21:24.940

好的，我意识到我可能没有以正确的方式提出这个问题，但我已经决定了一个解决方案，以防万一其他人想知道。

```
 <figure class="advice">
      <blockquote>
           <ul>
                <li>Show you are living and breathing web design.</li>
                <li>Portfolios, experience and practical examples of work are critical.</li>
           </ul>
      </blockquote>
      <figcation>Joe Blogs / <cite>A web agency</cite></figcaption>
</figure> 
```

这样做的原因是，为了使“引用”有意义，需要有“块引用”。因此，如果引用了列出的内容，则块引用必须围绕列表。

我通过阅读 alistpart[文章](http://alistapart.com/blog/post/more-thoughts-about-blockquotes-than-are-strictly-required)做出了这个决定，该文章指出这是有道理的：

```
 <figure class="quote">
 <blockquote>It is the unofficial force—the Baker Street irregulars.</blockquote>
 <figcaption>Sherlock Holmes, <cite>Sign of Four</cite></figcaption>
 </figure> 
```

因此，如果将列表元素也放置在那里也必须是有意义的。

# java - XSD 循环导入

> ID：14837293
> 
> 赞同：6
> 
> 时间：2013-02-12T16:35:49.187
> 
> 标签：java, xsd, xsom

我需要解析一个 XSD，`XSOM`但这个 XSD 包含循环导入。

a.xsd

```
<xs:schema xmlns=”ns1” targetNamespace=”ns1”&gt;
  <xs:import namespace=”ns2” schemaLocation=”B.xsd”/>
  <xs:element name=”MyElement” type=”xs:string”/>
</xs:schema> 
```

B.xsd

```
<xs:schema xmlns=”ns2” targetNamespace=”ns2” xmlns:ns1=”ns1”&gt;
  <xs:import namespace=”ns1” schemaLocation=”A.xsd”/>
  <xs:complexType name="MyComplex">
    <xs:sequence>
      <xs:element ref="ns1:MyElement" minOccurs="0"/>
    <xs:sequence>
  <xs:complexType>
</xs:schema> 
```

`XSOM`无法解析架构，因为它检测到由于循环导入而已定义的元素。所以我试图通过外部化由 A 定义并在 B 中使用的元素来打破循环导入。

C.xsd 包含 B 使用的来自 A 的元素。请注意，这些元素在 A 中没有使用。不要问我为什么在 A 中定义了这些元素。

```
<xs:schema xmlns=”ns1” targetNamespace=”ns1”&gt;
  <xs:element name=”MyElement” type=”xs:string”/>
</xs:schema> 
```

A.xsd 变成

```
<xs:schema xmlns=”ns1” targetNamespace=”ns1”&gt;
  <xs:import namespace=”ns2” schemaLocation=”B.xsd”/>
</xs:schema> 
```

B.xsd（导入 C.xsd 而不是 A.xsd）变为

```
<xs:schema xmlns=”ns2” targetNamespace=”ns2” xmlns:ns1=”ns1”&gt;
  <xs:import namespace=”ns1” schemaLocation=”C.xsd”/>
  <xs:complexType name="MyComplex">
    <xs:sequence>
      <xs:element ref="ns1:MyElement" minOccurs="0"/>
    <xs:sequence>
  <xs:complexType>
</xs:schema> 
```

`XSOM`可以解析XSD。但现在我无法使用以下代码创建架构：

```
SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
sf.setResourceResolver(new MyResourceResolver()); 
```

我使用与 JDK 1.7 捆绑在一起的标准实现。我得到了例外：

```
src-resolve: Cannot resolve the name 'ns1:MyElement' to a(n) 'element declaration' component. 
```

问题是为 B 命名空间调用了资源解析器，而不是为有意义的 A 命名空间调用了资源解析器。由于命名空间 A 由 A.xsd 和 C.xsd 共享，因此资源解析器无法找到 C.xsd 中定义的元素。

循环进口是否有效？是否可以打破循环导入，以便它可以被解析`XSOM`然后被加载`SchemaFactory`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T19:41:46.050

### 关于一般问题：

您问“循环进口是否有效？” 如果循环性是指存在模式文档链 S[1]、S[2]、...、S[n]，其中模式文档 S[1] 按名称引用模式文档 S[2]，S [2] 到 S[3]，... S[n-1] 到 S[n]，和 S[n] 到 S[1] 那么我不相信 XSD 1.0 规范或 XSD 1.1 说清楚一种或另一种方式。（一些 WG 成员试图说服 WG 提高其对该主题和相关主题的思考的清晰度，但失败了。）一些实现支持循环导入（和其他形式的循环），但我认为不可能争论从规范来看，您的实现做错了什么。

另一方面，如果您的意思仅仅是存在一个循环，对于 0 <= i <= n-1，S[i] 导入 S[i+1] 的命名空间，而 S[n] 导入 S 的命名空间[1]，那么我相信这样的循环显然是合法的（在某些情况下是不可避免的）。

我推荐的解决方法是：

1.  在任何声明任何内容的架构文档中，根据需要使用 xs:import，但不要在导入时指定架构位置。此类引用中的循环是无害的。
2.  调用模式处理器时，给它你希望它读取的所有模式文档的完整列表，如果可能的话，通过选项或配置告诉它不要读取任何其他模式文档。
3.  如果您的架构文档在验证时不接受多个架构文档作为输入，那么您必须有一个架构文档来引用您想要阅读的所有内容，或者如果您不相信自己能够正确获取架构文档列表在调用时，然后添加一个顶级驱动程序文档，该文档除了包含和导入您想要读取的其他架构文档之外什么都不做，并带有特定的架构位置信息。

在您的情况下，这意味着从 A.xsd 和 B.xsd 的（原始形式）中删除 xs:import/@schemaLocation 属性，并添加形式为的驱动程序文档

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="ns1" schemaLocation="A.xsd"/>
  <xs:import namespace="ns2" schemaLocation="B.xsd"/>
</xs:schema> 
```

其效果是确保模式文档对其他模式文档的引用永远不会出现循环；这消除了一大类 XSD 实现相互不一致的情况（在某些情况下与它们自己不一致——有时当调用以不同的顺序命名输入时，相同的处理器会在相同的输入上产生显着不同的结果）。

### 关于具体问题：

在您的示例中，不要求 ns2 由 A.xsd 或 C.xsd 导入，因为它们都不包含对命名空间 ns2 中任何组件的任何引用。因此，您示例中的循环似乎是无缘无故的。

在您的第二个示例中，您提供了一些无法成功加载架构的代码。但是我在该代码中根本没有看到任何对任何特定模式文档的引用；除非您没有向我们展示相关的内容，否则验证器找不到 {ns1}MyElement 的声明也就不足为奇了。

# actionscript-3 - Adobe AIR 应用程序开发 Windows 8

> ID：14837297
> 
> 赞同：0
> 
> 时间：2013-02-12T16:36:02.010
> 
> 标签：actionscript-3, apache-flex, air

我已经为 Windows 操作系统创建了一个应用程序。它在 XP、Vista 和 Windows 7 中运行良好。现在我的问题是，相同的应用程序可以在 Windows 8 上运行吗？Windows 8 具有触摸功能，在我的应用程序中，我实现了按钮事件（Enter）和鼠标事件（单击），但没有实现触摸功能。我需要扩展应用程序还是无需修改就可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:07:53.110

是的，它会 100% 正确工作。WINdows 8 将播放它，并且触摸事件被转换为鼠标事件 - 在 android 等上也是如此。您仍然可以将它推送到 Windows 8 的应用商店，但只能通过外部链接下载，因为它会算作桌面应用程序，而不是 Windows rt / Metro 风格的应用程序。

# android - 交叉编译的 Android arm-v7-a C 代码中的静态 libpcap

> ID：14837298
> 
> 赞同：2
> 
> 时间：2013-02-12T16:36:03.987
> 
> 标签：android, c, arm, cross-compiling, libpcap

我需要从最新的 libpcap 构建一个静态库，并将其“包含”在 C 源代码中，以便为 ARM-v7-a 架构（Nexus One）进行交叉编译。

我已经尝试了几天，希望有人能给我提示。

而且我**既不能**使用 NDK 也不能使用 Java-wrapper 函数。它需要像：

$ -o prog prog.c [-options] 稍后我将能够通过 adb 推送可执行文件。

我已经尝试通过 apt-get 安装 CodeSourcery 和 arm-linux-gnueabi（我在 Kubuntu Linux 上），没有任何工作正常。

我达到的最大目标是一个愚蠢的简单的 helloworld 文件：

> arm-linux-gnueabi-gcc -static -o prog prog.c

这是在我的智能手机下执行的。

你知道我可以得到一个更复杂的程序，包括 libpcap 吗？我认为它应该处理 libpcap 目录中的 .a 或 .so 文件，但我真的不明白......在此先感谢

***编辑 -***已解决：正如 auselen 所说，我已经尝试过使用 NDK 独立工具链并且我成功了。

这就是我所做的，以防有人遇到我同样的问题：

1）下载Android SDK和NDK（后者此时为r8d版本）

2）进入NDK文件夹并输入

> cd 构建/工具
> 
> make-standalone-toolchain.sh --platform=android-3 --install-dir=$HOME/new_toolchain --ndk-dir=YOUR_NDK_PATH
> 
> cd $HOME/new_toolchain

（我已将 helloworld.c 文件放在此文件夹中，但当然您可以将 PATH 添加到 .bashrc 文件中以提高效率）

> bin/arm-linux-androideabi-gcc helloworld.c -o helloworld

3）通过adb将其推送到您的设备中。

现在一切正常:)再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:16:29.427

由于 Android 使用不同的运行时（仿生），因此最好使用具有必要组件的 NDK，以相应地链接您的应用程序。

NDK 允许您将其作为[独立的工具链](https://android.googlesource.com/platform/ndk/+/master/docs/STANDALONE-TOOLCHAIN.html)运行，因此您可以直接`gcc`通过其`sysroot`功能启动。

一个重要的提示是不要`~`在调用时指定的那些路径中使用`gcc`，它不是那么友好。

# c# - 我是否以正确的方式使用 Unity 和 UnitOfWork？

> ID：14837301
> 
> 赞同：0
> 
> 时间：2013-02-12T16:36:06.110
> 
> 标签：c#, asp.net-mvc, dependency-injection, unity-container, unit-of-work

我这样做对吗？内存使用或性能是否存在问题？

UPD：已处理上下文的错误已修复。

我将 Unity 与工作单元模式一起使用。当我第一次运行我的应用程序时，一切都按预期工作，但是一旦我刷新页面，应用程序就会崩溃，并出现以下异常：

> > 操作无法完成，因为 DbContext 已被释放。

我的 DI 配置如下所示：

```
private static IUnityContainer BuildUnityContainer()
{
    var container = new UnityContainer();

    container.RegisterType<DataContext>();

    container.RegisterType<IUnitOfWorkFactory, UnitOfWorkFactory>();

    container.RegisterType<IUnitOfWork, UnitOfWork>();

    container.RegisterType<IProductRepository, ProductRepository>();

    return container;
} 
```

我的`UnitOfWork`和`UnitOfWorkFactory`看起来像这样：

```
public class UnitOfWork : IUnitOfWork
{
    private readonly IUnityContainer _container;
    private bool _disposed;

    public UnitOfWork(IUnityContainer container)
    {
        _container = container;
        Context = _container.Resolve<DataContext>();
    }

    internal DataContext Context { get; set; }

    public TRepository GetRepository<TRepository>() 
        where TRepository : class
    {
        return _container.Resolve<TRepository>();
    }

    public void Commit()
    {
        Context.SaveChanges();
    }

    public void Dispose()
    {
        if (!_disposed)
        {
            _disposed = true;
            Context.Dispose();
        }
    }
}

public class UnitOfWorkFactory : IUnitOfWorkFactory
{
    private readonly IUnityContainer _container;

    public UnitOfWorkFactory(IUnityContainer container)
    {
        _container = container;
    }

    public IUnitOfWork CreateUnitOfWork()
    {
        return _container.Resolve<UnitOfWork>();
    }
} 
```

`UnitOfWork`包含一个`GetRepository`允许返回任何存储库的方法。以下是此类存储库的示例：

```
public class ProductRepository : BaseRepository<Product>,
    IProductRepository
{
    public ProductRepository(UnitOfWork unitOfWork)
        :base(unitOfWork)
    {
    }

    public Product Create(Product entity)
    {
        return DataBase.Add(entity);
    }

    public Product Remove(Product entity)
    {
        return DataBase.Remove(entity);
    }

    public Product Get(Int32 entityId)
    {
        return DataBase.FirstOrDefault(x => x.Id == entityId);
    }
}

public class BaseRepository<TEntity> 
    where TEntity : class
{
    internal BaseRepository(UnitOfWork unitOfWork)
    {
        UnitOfWork = unitOfWork;

    }

    internal UnitOfWork UnitOfWork { get; private set; }

    internal virtual IDbSet<TEntity> DataBase
    {
        get { return UnitOfWork.Context.Set<TEntity>(); }
    }
} 
```

我的 MVC 控制器依赖于`IUnitOfWorkFactory`. 以下是`AccountController`示例：

```
public class AccountController : Controller
{
    private readonly IUnitOfWorkFactory _unitOfWorkFactory;

    public AccountController(IUnitOfWorkFactory unitOfWorkFactory)
    {
        _unitOfWorkFactory = unitOfWorkFactory;
    }

    [AllowAnonymous]
    public ActionResult Login(string returnUrl)
    {
        ViewBag.ReturnUrl = returnUrl;

        using (var uow = _unitOfWorkFactory.CreateUnitOfWork())
        {
            var rep = uow.GetRepository<IProductRepository>();

            var prod = rep.GetById(1);
        }

        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:00:55.797

您告诉 Unity 创建一次 UnitOfWork（单例）：

```
 container.RegisterType<IUnitOfWork, UnitOfWork>(
    new ContainerControlledLifetimeManager()); 
```

我不认为你想要那个。删除 ContainerControlledLifetimeManager()....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:05:42.607

我认为这是因为您正在使用 LifetimeManager。（LifetimeManager 持有给它的实例。）您的实例已被释放，但由于 ContainerControlledLifetimeManager，它不会创建新实例。在[本文](http://www.devtrends.co.uk/blog/introducing-the-unity.mvc3-nuget-package-to-reconcile-mvc3-unity-and-idisposable)中，您可以阅读如何解决此问题。

基本上，使用 Unity.MVC3 包并为您的 IDisposable 依赖项定义一个 HierarchicalLifetimeManager 是一个好主意。

# c# - 无法隐式转换类型'System.Collections.Generic.IEnumerable ' 到 'System.Collections.Generic.List

> ID：14837302
> 
> 赞同：6
> 
> 时间：2013-02-12T16:36:07.273
> 
> 标签：c#, linq, linq-to-sql

我正在尝试填充 AccountNumber 不存在的交易数据。我需要访问 Account 表来获得它。我在尝试返回 IEnumerable 时收到以下错误

无法将类型隐式转换`System.Collections.Generic.IEnumerable<AnonymousType#1>`为`System.Collections.Generic.List<ProjectModel.Transaction>`

错误显示在**.ToList();** 部分代码。我究竟做错了什么？

代码是：

```
 public static IEnumerable<Transaction>GetAllTransactions()
    {
       List<Transaction> allTransactions = new List<Transaction>();
        using (var context = new CostReportEntities())
        {
            allTransactions = (from t in context.Transactions
                               join acc in context.Accounts on t.AccountID equals acc.AccountID
                               where t.AccountID == acc.AccountID
                               select new 
                               {
                                   acc.AccountNumber,
                                   t.LocalAmount
                               }).ToList();

        }
        return allTransactions;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:56:23.837

匿名类型列表不能转换为事务列表。看起来你的`Transaction`班级没有`AccountNumber`财产。您也不能从方法返回匿名对象。所以你应该创建一些类型来保存所需的数据：

```
public class AccountTransaction
{
    public int LocalAmount { get; set; }
    public int AccountNumber { get; set; }
} 
```

并返回这些对象：

```
public static IEnumerable<AccountTransaction> GetAllTransactions()
{       
    using (var context = new CostReportEntities())
    {
        return (from t in context.Transactions
                join acc in context.Accounts 
                     on t.AccountID equals acc.AccountID              
                select new AccountTransaction {
                     AccountNumber = acc.AccountNumber,
                     LocalAmount = t.LocalAmount
                }).ToList();
    }
} 
```

*顺便说一句*，您不需要在 where 过滤器中重复加入条件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:46:56.487

您在 Linq 查询的“选择新”部分中投影的匿名类型不能直接转换为您的“事务”类型。

相反，您应该投影一个新的 Transaction 实例。以下可能会有所帮助：

```
allTransactions = (from t in context.Transactions
    join acc in context.Accounts on t.AccountID equals acc.AccountID
    where t.AccountID == acc.AccountID
    select new Transaction()
    {
        AccountNumber = acc.AccountNumber,
        LocalAmount = t.LocalAmount
    }).ToList(); 
```

# java - 将图像旋转到特定方向

> ID：14837305
> 
> 赞同：1
> 
> 时间：2013-02-12T16:36:14.210
> 
> 标签：java, android, eclipse

我正在尝试旋转箭头以指向某个特定位置

```
 float bearing = myLoc.bearingTo(mecca);
      RotateAnimation rotate = new RotateAnimation(0, bearing, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
      arrow.setAnimation(rotate);
      rotate.start(); 
```

然而，它旋转并在不到一秒钟的时间内回到原来的位置。我怎样才能让它像指南针一样旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:02:58.293

另一种旋转 imageView 的简单方法：

```
Matrix matrix=new Matrix();
imageView.setScaleType(ScaleType.MATRIX);   //required
matrix.postRotate((float) angle, pivX, pivY);
arrow.setImageMatrix(matrix); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:57:51.333

只需尝试设置动画的持续时间，例如

```
animation.setDuration(1500);
Where Duration is int(miliseconds) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:08:22.710

你试过了吗：

```
rotate.setFillAfter(true) 
```

# php - 格式化日期和原始日期之间的奇怪差异

> ID：14837306
> 
> 赞同：-2
> 
> 时间：2013-02-12T16:36:14.947
> 
> 标签：php

我试图从谷歌日历中获取事件。所以我在时间输出上遇到了麻烦。

```
 $date = DateTime::createFromFormat("Y-m-d\TH:m:sP", "2013-02-12T21:00:00-05:00");
    echo $date->format('H:m'); 
```

输出是*21:12*，但应该是 21:00。如何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:38:09.550

`m`是几个月。您正在寻找的分钟数是`i`：

```
$date = DateTime::createFromFormat("Y-m-d\TH:i:sP", "2013-02-12T21:00:00-05:00");
echo $date->format('H:i'); 
```

# android - 8个纹理单元的opengl es多纹理着色器的思考

> ID：14837308
> 
> 赞同：0
> 
> 时间：2013-02-12T16:36:31.227
> 
> 标签：android, opengl-es, shader, blending

下面是一个表现不佳的片段着色器。删除条件分支似乎并没有提高性能。只有 150 个多边形，我在 Kindle Fire 上获得 10fps，在 Galaxy S3 上获得 20fps。如果有的话，对优化这个的最佳方法有什么想法吗？iPad 2 上的类似着色器运行 30+fps。

在下面的代码中，texture1 到 texture8 被绑定到八个纹理。VertexTexturesOut1 和 VertexTexturesOut2 是从顶点着色器传递过来的，它们的值是 0.0 到 1.0，表示要混合的着色量。这个想法是混合景观纹理，因此草均匀地融入泥土、岩石、沙子等。

```
uniform sampler2D texture1;
uniform sampler2D texture2;
uniform sampler2D texture3;
uniform sampler2D texture4;
uniform sampler2D texture5;
uniform sampler2D texture6;
uniform sampler2D texture7;
uniform sampler2D texture8;

varying mediump vec2 TextureCoordOut;
varying lowp vec4 VertexTexturesOut1;
varying lowp vec4 VertexTexturesOut2;

...

    lowp vec4 Color = vec4( 0.0, 0.0, 0.0, 0.0);

    if (VertexTexturesOut1.x != 0.0) Color = Color + texture2D ( texture1, TextureCoordOut ) * VertexTexturesOut1.x;
    if (VertexTexturesOut1.y != 0.0) Color = Color + texture2D ( texture2, TextureCoordOut ) * VertexTexturesOut1.y;
    if (VertexTexturesOut1.z != 0.0) Color = Color + texture2D ( texture3, TextureCoordOut ) * VertexTexturesOut1.z;
    if (VertexTexturesOut1.w != 0.0) Color = Color + texture2D ( texture4, TextureCoordOut ) * VertexTexturesOut1.w;

    if (VertexTexturesOut2.x != 0.0) Color = Color + texture2D ( texture5, TextureCoordOut ) * VertexTexturesOut2.x;
    if (VertexTexturesOut2.y != 0.0) Color = Color + texture2D ( texture6, TextureCoordOut ) * VertexTexturesOut2.y;
    if (VertexTexturesOut2.z != 0.0) Color = Color + texture2D ( texture7, TextureCoordOut ) * VertexTexturesOut2.z;
    if (VertexTexturesOut2.w != 0.0) Color = Color + texture2D ( texture8, TextureCoordOut ) * VertexTexturesOut2.w;

    gl_FragColor = Color; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:57:34.977

在设计片段着色器时，您的着色器有许多 DONT。您有许多条件语句，因此所有线程都需要始终等待经纱（或批处理）中的所有其他线程。您还访问了 8 个纹理，这意味着您需要等待所有这些纹理查找（这也会消耗内存带宽）。使用任何优化工具，例如 Adreno SDK、Mali SDK 或您选择的任何供应商，并在他们的优化工具中运行着色器以发现 GPU 在哪里花费更多时间。

您是否使用完整的 RGB888 纹理？一个

也许如果您告诉我们您要归档什么，我们可以考虑另一种解决方案，而无需使用 8 个纹理查找。

# java - JAVA 正则表达式中的正斜杠

> ID：14837310
> 
> 赞同：0
> 
> 时间：2013-02-12T16:36:41.263
> 
> 标签：java, regex, escaping, slash

一般情况：在使用 String.matches("string"); 时，我在匹配“/”时遇到了一些麻烦。我想我错过了某种程度的逃避。

```
matches("bar" + "[\\W\\w]*"); //works.
matches("bar/" + "[\\W\\w]*"); //does not work.
matches("bar\/" + "[\\W\\w]*"); //errors
matches("bar\\/" + "[\\W\\w]*"); //does not work
matches("bar\\\\/" + "[\\W\\w]*"); //does not work 
```

我错过了什么？

确切情况：

```
private static final String CHECK_TABLE_PRE = "<table class=\"data playerStats\">\n <thead>\n  <tr>\n   <th colspan=\"1\" rowspan=\"1\">&nbsp;</th>\n   <th colspan=\"1\" rowspan=\"1\">G</th>\n   <th colspan=\"1\" rowspan=\"1\">A</th>\n   <th colspan=\"1\" rowspan=\"1\">P</th>\n   <th colspan=\"1\" rowspan=\"1\">+/-</th>\n   <th colspan=\"1\" rowspan=\"1\">PIM</th>\n   <th colspan=\"1\" rowspan=\"1\">PPG</th>\n   <th colspan=\"1\" rowspan=\"1\">SHG</th>\n   <th colspan=\"1\" rowspan=\"1\">S</th>\n   <th colspan=\"1\" rowspan=\"1\">S%</th>\n   <th colspan=\"1\" rowspan=\"1\">Shifts</th>\n   <th colspan=\"1\" rowspan=\"1\">TOI</th>\n   <th colspan=\"1\" rowspan=\"1\">FO%</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>";  //want to use this, but the "/" makes it fail
private static final String CHECK_TABLE_POST = "  </tr>\n </tbody>\n</table>"; //Both gotten by copy/pasting from the console.
System.out.println(table.outerHtml().matches("<table class=\"data playerStats\">\n <thead>\n  <tr>\n   <th colspan=\"1\" rowspan=\"1\">&nbsp;</th>\n   <th colspan=\"1\" rowspan=\"1\">G</th>\n   <th colspan=\"1\" rowspan=\"1\">A</th>\n   <th colspan=\"1\" rowspan=\"1\">+" + "[\\W\\w]*" + CHECK_TABLE_POST));
//This works, but I cannot add a add the "/" without getting it to fail.

//Where table = Jsoup.connect("http://www.nhl.com/ice/player.htm?view=log&id=8470598").get().select("table.data.playerStats").get(0); 
```

好的，这是一个更小更独立的示例：

```
String test = "<table class=\"data playerStats\">\n <thead>\n  <tr>\n   <th colspan=\"1\" rowspan=\"1\">&nbsp;</th>\n   <th colspan=\"1\" rowspan=\"1\">G</th>\n   <th colspan=\"1\" rowspan=\"1\">A</th>\n   <th colspan=\"1\" rowspan=\"1\">P</th>\n   <th colspan=\"1\" rowspan=\"1\">+/-</th>\n   <th colspan=\"1\" rowspan=\"1\">PIM</th>\n   <th colspan=\"1\" rowspan=\"1\">PPG</th>\n   <th colspan=\"1\" rowspan=\"1\">SHG</th>\n   <th colspan=\"1\" rowspan=\"1\">S</th>\n   <th colspan=\"1\" rowspan=\"1\">S%</th>\n   <th colspan=\"1\" rowspan=\"1\">Shifts</th>\n   <th colspan=\"1\" rowspan=\"1\">TOI</th>\n   <th colspan=\"1\" rowspan=\"1\">FO%</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020168\"> Feb 10 '13 </a> BOS @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>0.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">22</td>\n   <td colspan=\"1\" rowspan=\"1\">15:23</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020161\"> Feb 9 '13 </a> BUF @ NYI</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>33.3</span></td>\n   <td colspan=\"1\" rowspan=\"1\">26</td>\n   <td colspan=\"1\" rowspan=\"1\">21:47</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>100.00</span></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020141\"> Feb 7 '13 </a> MTL @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">8</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>25.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">25</td>\n   <td colspan=\"1\" rowspan=\"1\">23:56</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>100.00</span></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020132\"> Feb 5 '13 </a> BUF @ OTT</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>0.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">23</td>\n   <td colspan=\"1\" rowspan=\"1\">20:15</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020121\"> Feb 3 '13 </a> FLA @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>100.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">24</td>\n   <td colspan=\"1\" rowspan=\"1\">19:15</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020109\"> Feb 2 '13 </a> BUF @ MTL</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">4</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>25.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">19</td>\n   <td colspan=\"1\" rowspan=\"1\">17:20</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020092\"> Jan 31 '13 </a> BUF @ BOS</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">5</td>\n   <td colspan=\"1\" rowspan=\"1\">4</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">4</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>75.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">21</td>\n   <td colspan=\"1\" rowspan=\"1\">19:21</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020079\"> Jan 29 '13 </a> TOR @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">4</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>0.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">27</td>\n   <td colspan=\"1\" rowspan=\"1\">23:01</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020051\"> Jan 25 '13 </a> CAR @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">6</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">6</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>16.7</span></td>\n   <td colspan=\"1\" rowspan=\"1\">22</td>\n   <td colspan=\"1\" rowspan=\"1\">17:55</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020043\"> Jan 24 '13 </a> BUF @ CAR</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">-1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>0.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">21</td>\n   <td colspan=\"1\" rowspan=\"1\">18:45</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020023\"> Jan 21 '13 </a> BUF @ TOR</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>0.0</span></td>\n   <td colspan=\"1\" rowspan=\"1\">23</td>\n   <td colspan=\"1\" rowspan=\"1\">18:52</td>\n   <td colspan=\"1\" rowspan=\"1\"></td>\n  </tr>\n  <tr>\n   <td colspan=\"1\" rowspan=\"1\"><a class=\"undMe\" href=\"/ice/recap.htm?id=2012020014\"> Jan 20 '13 </a> PHI @ BUF</td>\n   <td colspan=\"1\" rowspan=\"1\">2</td>\n   <td colspan=\"1\" rowspan=\"1\">3</td>\n   <td colspan=\"1\" rowspan=\"1\">5</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">1</td>\n   <td colspan=\"1\" rowspan=\"1\">0</td>\n   <td colspan=\"1\" rowspan=\"1\">9</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>22.2</span></td>\n   <td colspan=\"1\" rowspan=\"1\">26</td>\n   <td colspan=\"1\" rowspan=\"1\">19:17</td>\n   <td colspan=\"1\" rowspan=\"1\"><span>100.00</span></td>\n  </tr>\n </tbody>\n</table>";
System.out.println(test.matches("<table class=\"data playerStats\">\n <thead>\n  <tr>\n   <th colspan=\"1\" rowspan=\"1\">&nbsp;</th>\n   [\\w\\W]*"));
System.out.println(test.matches("<table class=\"data playerStats\">\n <thead>\n  <tr>\n   <th colspan=\"1\" rowspan=\"1\">&nbsp;</th>\n   <th colspan=\"1\" rowspan=\"1\">G</th>\n   <th colspan=\"1\" rowspan=\"1\">A</th>\n   <th colspan=\"1\" rowspan=\"1\">P</th>\n   <th colspan=\"1\" rowspan=\"1\">+/-[\\w\\W]*"));
System.out.println(test.matches(test));

//Console return "true \n false \n false" (without the spaces). 
```

好的，请耐心等待。更短的例子：

```
String test = "foo+/-bar";
System.out.println(test.matches("foo+[\\w\\W]*"));
System.out.println(test.matches("foo+/[\\w\\W]*"));
System.out.println(test.matches("foo+/-bar[\\w\\W]*"));
System.out.println(test.matches(test));
//true false false false
//But if I leave out the +-, so that String test = "foo/bar"; (and change the rest of the example accordingly) the whole example work (returns true). 
```

所以，“+/”有点奇怪。也许我必须逃避加号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T16:41:27.323

无需`/`在 JAVA 中转义。

`matches()` *自动锚定** 带有`^`和的模式`$`。

`".*bar/.*"`应该适合您的需求。

* * *

*`String#matches()`调用`Pattern#matches()`，调用`Matcher#matches()`，[解释](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29) *当且仅当整个区域序列与此匹配器的模式匹配时才*`true`返回。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:40:40.703

> 所以，“+/”有点奇怪。也许我必须逃避加号。

是的你是。 `+`在正则表达式中表示前面的一个或多个内容，因此要匹配`\+`正则表达式中需要的文字加号，这意味着`\\+`在 Java 字符串文字中

```
test.matches("foo\\+/-bar[\\w\\W]*" 
```*

# django - django：在同一页面中接受输入并显示输出

> ID：14837312
> 
> 赞同：12
> 
> 时间：2013-02-12T16:36:49.763
> 
> 标签：django, django-forms, modelform

我对 django 很陌生，并且努力做一些非常简单的事情。我有`ModelForm`以下型号：

```
class Queries(models.Model):
    user_id=models.CharField(max_length=200)
    query=models.CharField(max_length=200) 
```

我正在向用户展示一个简单的表单，这将有助于执行以下操作：

*   用户会问一个问题
*   将处理问题（将根据问题生成数据库查询）

*   然后查询结果应显示在同一页面中的表单下方。

这就是我的views.py 的样子：

```
from django.http import HttpResponse
from django.shortcuts import get_object_or_404, render
from basicapp.models import QueryForm

def index(request):
    form=MyForm()
    real_form=form.getForm(request)
    response=form.response
    return render(request,'basicapp/index.html',{
        'form': real_form,
        'response':response,
    })
class MyForm:
    response=''
    def getForm(self,request):
        form = QueryForm(request.POST)
        if form.is_valid():
            response=form.cleaned_data['query']
            form.save()
        return form 
```

现在我正在尝试简单的东西，我正在获取表单查询字段中的值并尝试将其发送回页面；到目前为止我失败了。这是 index.html：

```
<form action=" " method="post">{% csrf_token %}
{{ form }}
<p>{{response}}</p>
<input type="submit" value="Submit" />
</form> 
```

如果我能做到这一点，我认为查询内容不会那么困难。表单工作正常，数据正在保存在数据库中。表单提交后，只有`response`字符串 from`views.py`无法在里面检索。`index.html`你能帮忙吗？

`index.html`编辑：根据霍夫的回答尝试了以下内容：

```
<form id="myForm" action=" " method="get">{% csrf_token %}
    {{ form }}
    <input type="submit" value="Submit" />
</form>
<div id="response">
</div>
<script language="JavaScript">
    $(document).ready(function() {
        $("#myForm").submit(function() { // catch the form's submit event
            $.ajax({ // create an AJAX call...
                data: $(this).serialize(), // get the form data
                type: $(this).attr('GET'), 
                success: function(response) { // on success..
                    $("#response").html(response); // update the DIV
                }
            });
            return false;
        });
    });
</script> 
```

仍然没有运气:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T17:38:17.600

**视图.py**

```
def index(request):
    questions=None
    if request.GET.get('search'):
        search = request.GET.get('search')
        questions = Queries.objects.filter(query__icontains=search)

        name = request.GET.get('name')
        query = Queries.object.create(query=search, user_id=name)
        query.save()

    return render(request, 'basicapp/index.html',{
        'questions': questions,
    }) 
```

**html**

```
<form method="GET">
    Question: <input type="text" name="search"><br/>
    Name: <input type="text" name="name"><br/>
    <input type="submit" value="Submit" />
</form><br/><br/>

{% for question in questions %}
<p>{{question}}</p>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-25T16:07:52.513

```
<input type="text" name="query" />
<input type="submit" name="submit" value="Submit" /> 
```

您可以检查表单是否已提交（即是否为发布请求）：

```
if 'submit' in request.POST: #you could use 'query' instead of 'submit' too
    # do post related task
    # add context variables to render post output
    # add another context variable to indicate if it's a post
    # Example:
    context.update({'post_output': request.POST.get('query','')})
...
return render(request, 'index.html', context) 
```

然后在模板中，检查上下文变量是否`post_output`存在，如果它确实显示输出：

```
{% if post_output %}
    Output: {{ post_output }}
{% endif %} 
```

* * *

简而言之，逻辑是：

1.  检查`request.POST`您的视图中是否存在相关的 dict 键。
2.  如果密钥存在，那么它是一个发布请求；添加发布相关的上下文变量并执行发布相关的任务。
3.  检查模板中是否有任何帖子相关的上下文变量可用，如果有，则显示帖子相关的输出。

**如果您不想在发布后仅刷新页面时显示输出，请将`request`对象传递给模板并进行如下检查：**

```
{% if request.POST.submit and post_output %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T16:42:52.570

您需要的是一个异步发布（ajax），使用 jQuery 很容易，请参阅这个答案以获得完整的解决方案：[How to POST a django form with AJAX & jQuery](https://stackoverflow.com/questions/7335780/how-to-post-a-django-form-with-ajax-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T17:51:47.267

按照霍夫的回答......

将 URL 属性添加到 ajax 调用：

```
$(document).ready(function() {
    $("#myForm").submit(function() { // catch the form's submit event
        $.ajax({ // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('GET'),
            url: '/URL-to-ajax-view/',
            success: function(response) { // on success..
                $("#response").html(response); // update the DIV
            }
        });
        return false;
    });
}); 
```

views.py 中的一些 ajax 处理程序：

```
# /URL-to-ajax-view/
def ajax_get_response(request):
    if request.method == "GET" and request.is_ajax:
        form = QueryForm(request.POST or None)
        if form.is_valid():
            form.save()
            return HttpResponse(form.response)  
    raise Http404 
```

尝试过这样的事情吗？

# java - XMLSocketReceiver 和 SocketReceiver 是如何工作的？

> ID：14837315
> 
> 赞同：1
> 
> 时间：2013-02-12T16:36:58.203
> 
> 标签：java, log4j

我正在研究 XMLSocketReceiver(bec. I want to run Chainsaw) ，这导致我使用 SocketReceiver。

在我阅读的[SocketReceiver javadoc](http://logging.apache.org/log4j/companions/receivers/apidocs/org/apache/log4j/net/SocketReceiver.html)

> SocketReceiver 在已配置的套接字上接收远程日志记录事件并将其“发布”到 LoggerRepository，就好像该事件是在本地生成的一样。此类旨在从 SocketAppender 类（或发送兼容事件的类）接收事件。
> 
> 一旦事件被“发布”，它将由当前在 LoggerRespository 中配置的附加程序处理。

这是如何工作的`"posts" it to a LoggerRepository`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:45:27.317

考虑这一点的一种方法是，Chainsaw 实际上只能处理“本地”日志事件 - 它的方式是使用以编程方式注册的自己的自定义附加程序。

就像 FileAppender 将“本地”日志事件发送到文件一样，Chainsaw 的自定义附加程序将本地日志事件发送到 UI 中的选项卡。

接收器的作用在于需要有一种方法来获取这些“非本地”日志记录事件（在 VFSLogFilePatternReceiver 的情况下来自日志文件，在 SocketReceiver 的情况下来自网络）成为“本地”日志记录事件可以由 Chainsaw 的 appender 处理。

一旦接收器“接收到”日志事件，接收器就会“附加”它们，这与调用 log.info("my log message") 时的操作非常相似。这些（现在）本地日志事件由附加程序（包括 Chainsaw 的附加程序）接收。

您可以尝试一个实验：将 FileAppender 定义添加到 Chainsaw 配置文件。Receivers 接收到的事件也会发送到 FileAppender。

顺便说一句，我建议尝试最新的 Chainsaw 开发人员快照：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy) - 大量新功能。

我希望这会有所帮助，

斯科特

# jsf - jsf 用嵌套的 ui:repeat 替换 c:forEach 会丢失值 - null

> ID：14837319
> 
> 赞同：0
> 
> 时间：2013-02-12T16:37:06.863
> 
> 标签：jsf

我有以下嵌套的 ui:repeat。以前，外部循环使用 ac:forEach ，它按预期工作。

现在我想将它与omnifaces 一起使用，`of:createIntegerArray(1, 7)`或者将它与omnifaces`<o:importConstants>`功能一起使用，但它不起作用。

```
public static final int[] INTEGER_ARRAY = new int[]{1, 2, 3, 4, 5, 6, 7};
public List<String> getValues(int i);

<ui:repeat var="i" value="#{Bean.INTEGER_ARRAY}">
    #{i}
    <ui:repeat var="value" value="#{bean.getValues(i)}">
        #{value}
    </ui:repeat>
</ui:repeat> 
```

该参数`i`在bean方法中始终为0或null，但在jsf视图中正确打印出来。

# javascript - 使用js和localStorage查找类

> ID：14837320
> 
> 赞同：0
> 
> 时间：2013-02-12T16:37:12.773
> 
> 标签：javascript, jquery, local-storage

我正在尝试转换 localStorage 存储的值，然后将其转换为一个类，以便我可以在 DOM 中操作它。

我对javascript很陌生，所以请允许我解释一下：

我有一个包含多个 div 的 html 文件，并且 localStorage 存储了上次单击的 div 的类。

例如，我希望我的脚本从 localStorage 调用存储的类，找到具有该类的 div（使用 jquery OR js，没关系），然后使用 .css() 更改该 div 的背景颜色。我将能够使用该逻辑做我需要做的事情，但我无法让它发挥作用。

所以我想做的是 $('最后点击的 div').css({..manipulate the css..});

这可能吗？

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset="utf-8">
    <title>test</title>
    <script type="text/javascript">

    $(document).ready(function () {

        //always show the current div class
        $("b").html(localStorage.getItem("currentDiv"));

        //get the class of the div that's just been clicked
        $("div").click(function(){
            var currentClass = $(this).attr("class");
            localStorage.setItem("currentDiv", currentClass);
            $("b").html(localStorage.getItem("currentDiv"));
        });

        //show the div that was last clicked
        function currentStatus(){
            if (localStorage.getItem("currentDiv") === $(currentClass))
            {
                $(currentClass).show();
                $("b").html(localStorage.getItem("currentDiv"));
            }
        }

        //set a color for the recently clicked div dynamically, not by .click
        var highlightClass = localStorage.getItem("currentDiv");
        highlightClass.css({
            'background' : 'black'
        })

    });

    $('#localStorageTest').submit(function() {
        localStorage.clear();
    });

    </script>

    <style type="text/css">
    [class*="slide"]{
    display: inline-block;
    padding: 40px;
    background: #999;
    margin: 20px;
    }
    /*.slide1{
    display: block;
    }*/
    </style>

    </head>

    <body onLoad="currentStatus()">
        <div class="slide1">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide2">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide3">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide4">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide5">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide6">
            <h1>"A question would go here."</h1>
        </div>
        <div class="slide7">
            <h1>"A question would go here."</h1>
        </div>
        <b></b>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:32:35.580

下面是如何使它工作，核心是： $("."+currentDivClass) 将字符串转换为类！

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset="utf-8">
    <title>test</title>

    <style type="text/css">
    [class*="slide"]{
    display: inline-block;
    padding: 40px;
    background: #999;
    margin: 20px;
    }
    /*.slide1{
    display: block;
    }*/
    </style>

    </head>

    <body>
        <div class="slide1">
            <h1>"1 A question would go here."</h1>
        </div>
        <div class="slide2">
            <h1>"2 A question would go here."</h1>
        </div>
        <div class="slide3">
            <h1>"3 A question would go here."</h1>
        </div>
        <div class="slide4">
            <h1>"4 A question would go here."</h1>
        </div>
        <div class="slide5">
            <h1>"5 A question would go here."</h1>
        </div>
        <div class="slide6">
            <h1>"6 A question would go here."</h1>
        </div>
        <div class="slide7">
            <h1>"7 A question would go here."</h1>
        </div>
        <b></b>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function () {

        //always show the current div class
        $("b").html(localStorage.getItem("currentDiv"));

        //get the class of the div that's just been clicked
        $("div").click(function(){
            var currentClass = $(this).attr("class");
            localStorage.setItem("currentDiv", currentClass);
            $("b").html(localStorage.getItem("currentDiv"));
        });

        //convert the string of the last clicked div into a class and then work your magic
        var currentDivClass = localStorage.getItem("currentDiv");
        $("."+currentDivClass).css({
            'background' : 'red'
        });

    });

    $('#localStorageTest').submit(function() {
        localStorage.clear();
    });

    </script>

    </body>
    </html> 
```

# database - 哪个更好 ？数据访问速度较快的冗余，或无冗余和数据访问速度较慢的冗余

> ID：14837322
> 
> 赞同：1
> 
> 时间：2013-02-12T16:37:16.040
> 
> 标签：database, db2, redundancy, database-optimization

我想为论坛网站创建一个数据库...

论坛网站的所有用户都将存储在一个名为 USERS 的表中，其中包含以下字段：

```
user_name
user_ID
(and additional details) 
```

将有一个名为 FORUMS 的表，其中包含以下字段：

```
forum_ID
forum_creatorID(which is the ID of one of the users)
forum_topic
replies
views 
```

对于创建的每个论坛（对于 FORUMS 表中的每一行），都会有一个名为 "forum_ID"_replies 的单独表，其中该论坛的确切 forum_ID 将在引号内替换......
因此，每个论坛将有一个单独的表格，其中将保存该特定论坛的所有回复......

“forum_ID”_replies 表中的字段是

```
user_ID
user_name
comment
timestamp(for the comment) 
```

我希望我的设计清楚......现在，我的疑问是

我将 user_name 保存为每个 "forum_ID"_replies 中的字段之一。但是，我认为 user_name 可以使用 user_ID 从 USERS 表中引用（或访问），而不是将其存储在每个“forum_ID”_replies 表中。以这种方式，减少了冗余。

但是，如果在每个表中都存储了 user_name，则对 user_name 的搜索将会减少，并且可以更快地显示结果。

哪个更优？

存储名称及其 ID 以加快访问速度，还是仅存储 ID 以避免冗余？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:31:14.900

“最佳”、“更好”等都是主观的。

大多数数据库设计人员都会对您的建议有几个问题。

数据库[规范化](http://en.wikipedia.org/wiki/Database_normalization)建议不要复制数据 - 有充分的理由。如果您的用户更改了他们的用户名，会发生什么？您必须更新用户表，但还要找到他们的用户名出现的所有“forum_id”_replies 表；如果你把它搞砸了，突然之间，你就有一个相当明显的错误——人们认为他们在回复“bob”，但他们实际上是在回复“jane”。

从性能的角度来看，除非您有深奥的性能需求（例如，您正在运行 Facebook），否则与用户表的连接不会产生可衡量的影响 - 您正在连接主键列，这就是数据库真的，真的很擅长。

最后，为每个论坛创建单独的表并不是一个好主意，除非你有巨大的性能/可扩展性需求（阅读：你是 Facebook）——维护数据库、构建查询、将应用程序连接到数据库等方面的额外复杂性。很重要；在单个表中存储多个论坛的性能开销通常不会。

“更好”取决于您的标准。如果（正如您在评论中所写）您担心可扩展性并支持大量帖子，我的建议是从构建一种测试和测量可扩展性级别的方法开始。一旦你可以测试和测量，你就可以测试不同的解决方案，并知道它们是否有实质性的影响——这通常会显示出违反直觉的结果。性能优化通常以牺牲其他标准为代价 - 例如，您的设计更容易出错（重复信息意味着您可能会得到差异）并且编码成本更高（编写逻辑以加入每个论坛的不同表）。如果您无法证明它在可扩展性方面具有实质性好处，并且这种好处满足您的业务需求，那么您可能是在浪费时间和金钱。

您可以使用 DBMonster 等工具用测试数据填充数据库，并使用 JMeter 运行大量并发数据库查询 - 使用这些工具尝试两种解决方案，看看您的解决方案是否确实更快。

# iphone - 尝试从 prepareForSegue 设置 ManagedObjectContext 属性时出现 BAD_ACCESS 错误

> ID：14837325
> 
> 赞同：0
> 
> 时间：2013-02-12T16:37:32.670
> 
> 标签：iphone, ios, xcode

我正在使用 CoreData，我试图将我的 ManagedObjectContext 对象从一个 ViewController 传递到第二个 View Controller。

这是我的第一个视图控制器的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{   
    if ([[segue identifier] isEqualToString:@"showDetail"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];

        self.managedObjectContext = [self.fetchedResultsController managedObjectContext];

        [[segue destinationViewController] setManagedObjectContext:self.managedObjectContext];
    }
} 
```

prepareForSegue 调用我在第二个视图控制器上创建的名为 setManagedObjectContext 的方法：

```
-(void)setManagedObjectContext:(NSManagedObjectContext *)managedObjContext
{
    self.managedObjectContext = managedObjContext;
    //NSManagedObjectContext *context = managedObjContext;
} 
```

当此代码遇到 Xcode 锁定并最终引发 BAD_Access 内存错误时。当我调试这段代码时，managedObjContext 有一个有效的内存位置，但是代码行一遍又一遍地点击，然后导致 XCode 崩溃。

self.managedObjectContext 只是我在 SecondViewController 类上的一个属性，它的声明如下：

```
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

如果我使用它，注释掉的行就可以了：

```
NSManagedObjectContext *context = managedObjContext; 
```

因此，似乎使用属性会导致问题，但我当然想使用它。关于它为什么不喜欢使用该属性的任何解释？

谢谢！跳蚤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:41:32.923

`self.managedObjectContext =`相当于调用`setManagedObjectContext:`. 所以你让自己陷入了一个递归循环。

覆盖 ivar 的设置器时，您需要直接访问 ivar，例如

```
- (void)setManagedObjectContext:(NSManagedObjectContext *)managedObjContext;
{
  _managedObjectContext = managedObjectContext;
} 
```

通常，如果您要执行其他操作，则只需要覆盖 setter 的默认实现。

# css - 使用响应式布局调整图像大小

> ID：14837327
> 
> 赞同：-1
> 
> 时间：2013-02-12T16:37:38.327
> 
> 标签：css

有人可以帮我弄清楚为什么我的徽标图像没有根据浏览器大小调整大小吗？

-----CSS------------------------

```
body {
       height: 100%;
       background-color:#333;
}
#logo {
      max-width: 100%;
}
img {
     border: 0;
     max-width: 100%;
     height: auto;

}
#header-bg {
    background-image: url("header-bg.png");
    overflow: auto;
    width: 100%;
} 
```

----------------HTML--------------------

```
 <body>
    <div id="header-bg">
    <div id="logo">
        <img src="logo.png" /> 
    </div>
   </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:39:27.003

原因是，你给`max-width`的，可能比原来的少`width`。所以给予`width`会解决你的问题。

```
img {
     border: 0;
     width: 100%;
     height: auto;
} 
```

除此之外，一切都是正确的。

* * *

如果你觉得你的图像不是太大，它占据了屏幕的整个宽度，给父母一个更小的宽度，比如说`25%`。和图像a `width`。`100%`所以父母肯定会根据屏幕的宽度进行调整，你的图像也是如此。`:)`

# php - in_array 检查非假值

> ID：14837329
> 
> 赞同：8
> 
> 时间：2013-02-12T16:37:49.157
> 
> 标签：php

```
$array = array(
    'vegs' => 'tomatos',
    'cheese' => false,
    'nuts' => 765,
    '' => null,
    'fruits' => 'apples'
);

var_dump(in_array(false, $array, true)); //returns true because there is a false value 
```

如何严格检查数组中是否至少有一个非假（字符串，真，整数）值，仅使用 in_array 或任何但不使用 foreach？

```
var_dump(in_array(!false, $array, true)); //this checks only for boolean true values

var_dump(!in_array(false, $array, true)); //this returns true when all values are non-false 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T16:44:57.753

**下面的实际解决方案**

只需将否定放在正确的位置：

```
var_dump(!in_array(false, $array, true)); 
```

当然，如果数组根本不包含任何元素，这也是正确的，所以你想要的是：

```
var_dump(!in_array(false, $array, true) && count($array)); 
```

***编辑：***算了吧，那是“数组*只*包含不完全错误的值”的答案，而不是“数组包含*至少一个*不完全错误

**实际解决方案：**

```
var_dump(
  0 < count(array_filter($array, function($value) { return $value !== false; }))
); 
```

`array_filter`返回一个所有值为 的数组`!== false`，如果它不为空，则您的条件为真。

或按照评论中的建议进行简化：

```
var_dump(
  (bool) array_filter($array, function($value) { return $value !== false; })
); 
```

当然，如果在子句`bool`中使用，也可以省略强制转换。`if`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:01:37.020

> 如何严格检查数组中是否至少有一个非假（字符串，真，整数）值，仅使用 in_array 或任何但不使用 foreach？

这是不可能的，因为：

*   字符串：此数据类型可以包含任何值，它不像布尔值（true 或 false）或 NULL。
*   INT：与字符串相同，如何检查未知数？
*   布尔值：可能。
*   空：可能。

那么，INT 和 STRING 数据类型不能仅使用抽象 (int) 或 (string) 找到！

编辑：

```
function get_type($v)
{
    return(gettype($v));
}

$types = array_map("get_type", $array);

print_r($types); 
```

结果：

```
Array
(
    [vegs] => string
    [cheese] => boolean
    [nuts] => integer
    [] => NULL
    [fruits] => string
) 
```

# asp.net - 如何根据另一个文本框或下拉列表的值填充多个文本框？

> ID：14837333
> 
> 赞同：0
> 
> 时间：2013-02-12T16:38:02.607
> 
> 标签：asp.net, vb.net, active-directory

再一次问好。

我们有一个网络表单，员工可以使用它来请求诸如从远程位置通过 VPN 访问公司资源之类的事情。

我正在从 Active Directory 填充一个下拉列表框。这工作正常。

然后我有一个文本框，它也通过简单地分配登录用户的值从 Active Directory 填充，如下所示：

```
textbox1.Text = User.Identity.Name 
```

基于分配给 textbox1.Text 的我的名字的值

其余的 texboxes 使用以下代码填充了我的工作信息：

```
 textbox1.Text = User.Identity.Name
    textbox1.Text = StrConv(textbox1.Text, vbProperCase)

    txtdate.Text = DateTime.Now.ToString("MM/dd/yyyy")
    Try
        'Creates a Directory Entry Instance with the Username and Password provided
        Dim deSystem As New DirectoryEntry("LDAP://OU=Departments,DC=domaname, DC=com", "usrname", "password")

        'Authenticacion type Secure
        deSystem.AuthenticationType = AuthenticationTypes.Secure

        'Creates a Directory Searcher Instance
        Dim dsSystem As New DirectorySearcher(deSystem)

        'sAMAccountName is equal to our username passed in.            
        dsSystem.Filter = "sAMAccountName=" & textbox1.Text

        'Properties that the Procedures will load from Active Directory
        dsSystem.PropertiesToLoad.Add("mail") 'email address
        dsSystem.PropertiesToLoad.Add("department") 'dept
        dsSystem.PropertiesToLoad.Add("physicalDeliveryOfficeName") 'office
        dsSystem.PropertiesToLoad.Add("title") 'title, eg programmer1
        dsSystem.PropertiesToLoad.Add("telephoneNumber") 'phone
        dsSystem.PropertiesToLoad.Add("streetAddress") 'street address
        dsSystem.PropertiesToLoad.Add("l") 'city
        dsSystem.PropertiesToLoad.Add("st") 'state
        dsSystem.PropertiesToLoad.Add("postalCode") 'zip code
        dsSystem.PropertiesToLoad.Add("EmployeeId") 'empid 
        dsSystem.PropertiesToLoad.Add("givenName") '//first name from active directory
        dsSystem.PropertiesToLoad.Add("sn") '//lastname from active directory
        'Find the user data
        Dim srSystem As SearchResult = dsSystem.FindOne()

        'Obtains the properties recently loaded
        txtemail.Text = srSystem.Properties("mail").Item(0).ToString
        dept.Text = srSystem.Properties("department").Item(0).ToString
        office.Text = srSystem.Properties("physicalDeliveryOfficeName").Item(0).ToString
        txttitle.Text = srSystem.Properties("title").Item(0).ToString
        phone.Text = srSystem.Properties("telephoneNumber").Item(0).ToString
        workaddress.Text = srSystem.Properties("streetAddress").Item(0).ToString
        city.Text = srSystem.Properties("l").Item(0).ToString
        state.Text = srSystem.Properties("st").Item(0).ToString
        zipcode.Text = srSystem.Properties("postalCode").Item(0).ToString
        hiddenempId.Value = srSystem.Properties("EmployeeId").Item(0).ToString
        HiddenFName.Value = srSystem.Properties("givenName").Item(0).ToString
        HiddenLName.Value = srSystem.Properties("sn").Item(0).ToString 
```

这也很好。

这就是我的问题所在。

最初，当用户登录时，根据 Active Directory 中记录的用户名，其余文本框将填充用户的信息。抱歉在这里重复我自己。

但是，有时登录的用户不一定是需要请求的用户。

换句话说，我可以登录来填写另一个员工的请求。

在这种情况下，我需要从 Active Directory 填充的下拉列表中选择要完成请求的用户的名称。

当我从下拉列表中选择此名称时，它会替换我自己在 textbox1.Text 上的名称。

这工作正常，但其余的文本框保留我自己的信息。

我需要做些什么来确保替换我在 textbox1.Text 上的原始名称的名称也替换了其余文本框中的信息？

我将根据要求发布其他信息。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:43:40.650

不是在表单加载时加载所有文本框，而是从`TextChanged`用户名文本框的事件中加载它们。这样，每当用户名文本框发生更改时，所有其他文本框都会自动重新加载以反映更改。

# automapper - 必须解析为顶级成员

> ID：14837338
> 
> 赞同：3
> 
> 时间：2013-02-12T16:38:31.700
> 
> 标签：automapper

我尝试了以下地图：

```
CreateMap<ThemeNewModel, CreateThemeOrder.ThemeModel>()
    .ForMember(d => d.Subject.Id, o => o.MapFrom(s => s.Subject)); 
```

`Subject.Id`和都是`Subject`类型`int`。但是，我收到以下错误：

> 表达式 'd => Convert(d.Subject.Id)' 必须解析为顶级成员，而不是任何子对象的属性。在子类型或 AfterMap 选项上使用自定义解析器。参数名称：lambdaExpression

我正在使用 AutoMapper 2.0。没有我不能解决这个问题`AfterMap`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:26:37.210

是什么类型的`ThemeNewModel.Subject`？假设它`ThemeSubject`，您可能会通过以下方式获得成功：

```
CreateMap<ThemeSubject, CreateThemeOrder.ThemeModel>()
   .ForMember(d=>d.Id, o => o.MapFrom(s->s.Subject));
CreateMap<ThemeNewModel, CreateThemeOrder.ThemeModel>()
   .ForMember(d=>d.Subject, o => o.MapFrom(s => s); 
```

如果上述方法不起作用，您应该遵循异常中的建议，并创建自定义解析器。

无论如何，automapper 旨在从复杂类型展平为平面模型/视图模型类型，因此您`ThemeNewModel`的设计过于复杂，也许您需要重新考虑您的设计。

# python - 我可以使用 Python 多次使用新的 IP 地址访问网页吗？

> ID：14837339
> 
> 赞同：0
> 
> 时间：2013-02-12T16:38:32.887
> 
> 标签：python, ip-address, urllib

我知道，使用 Python 可以访问网页。但是是否也可以每次访问一个新IP地址的网页呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:42:58.523

您不能通过 python 更改您的 IP。

尝试安装[TOR](https://www.torproject.org/)，然后使用[Proxychains](http://proxychains.sourceforge.net/)通过 TOR 网络传输您的脚本/请求，尽管 ip每次都会有点*随机*

如果您的脚本被调用`getit.py`并且您正确设置了 TOR/Proxychains，那么您可以通过 TOR 网络发送任何内容。例如。

铬合金：

`proxychains google-chrome`

getit.py：

`proxychains python getit.py`

或者

`proxychains getit.py`

每次运行脚本时，您都会有不同的 ip。好吧，不是每次都正确，但代理链会尊重您的 TOR 配置，因此，每次都与此相关。

不仅每次您运行脚本时，而且每次脚本尝试访问资源时。再次与 TOR 配置相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:02:18.153

在线搜索互联网上的“代理服务”列表。然后，您可以在 Python 中将它们作为代理循环。有些公司维护开放的代理网络，并跨越多个大陆，以帮助人们克服 GEO-IP 限制。

您还可以配置您在互联网上控制的不同服务器，作为您需要的远程代理。

不要在这个项目中使用 TOR，它有合法的用途和需求......并且带宽已经很差了。做这样的事情很少有任何合法用途。

也有“开放代理”列表的阴暗发布者 - 基本上是每日更新的错误配置的 apache 实例列表，可以重新路由请求。这些通常被试图增加广告印象/页数或虚假在线投票竞赛的人使用。（这是人们希望通过开放代理和重复“新”访问做的两个主要事情）

# image - Google 从长 URL 中收集哪些信息？

> ID：14837348
> 
> 赞同：0
> 
> 时间：2013-02-12T16:39:13.017
> 
> 标签：image, google-chrome, url

有没有想过为什么 Google 有这么长的 URL？我认为这是因为他们从该 URL 的变量中获得了许多信息。例如，我把来自 Chrome 徽标的代码（来自当网页不存在时出现在 Chrome 浏览器上的网页。谷歌从这种长 URL 中收集什么样的信息？如果我们讨论长网址，当您在 Google.com 上搜索某些内容时，您是否注意到过长网址？它们从网址中收集大量信息。您知道 Google 长网址中的任何这些信息吗？

```
#logo-img {
/* "Not allowed to load local resource: chrome://theme/IDR_PRODUCT_LOGO",
so embed the resource manually. */
content: -webkit-image-set(

url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKsAAAAgCAYAAABtn4gCAAAI9klEQVR4Xu2cfYxcVRmHn3Pu3Nm6lXa2ta0AYlsgFSGgThMU0W5hGkqApNGARk3cGm3BRN3FYGuCISrBXaNphcSkG2I3hn9gY2gSNWq32AoE1C6KRihFti2QSgvsTmm783HvOa+zM69cSS8Tacsq7n2SX87cj5P7ZvLs2ztnbseICG8HMjIsbxMyMnIoxhja8fJnriuYMNdjOsIVNhd0Y0wBRbxH6nHZ16OdUot2iXNDC3/2mzJtOImOnpHJ2p4Xr13ZkDTYJLHrwRgwPJggg==') 2x);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:42:18.730

那是一个base64编码的图像。这只是 chrome 徽标本身的数据。Web 开发人员有时会以这种方式嵌入图像作为一种优化技术。它的优点是为您节省了一个 HTTP 请求。（HTTP 标头并非无足轻重，尤其是对于获得与 google 一样多的流量的网站。）不幸的是，您无法缓存嵌入的图像，所以就是这样。

至于长搜索 URL 的含义，[这里解释了大多数/所有这些名称值对。](https://developers.google.com/search-appliance/documentation/614/xml_reference#request_parameters)

长 URL 是允许某人将结果链接复制/粘贴给其他人并让他们看到相同内容的特定决定。如果他们只是将搜索查询作为 URL 参数包含在内，并将其他所有内容存储在 POST 中，那么每个点击链接的人的本地化搜索结果都会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:47:52.100

URL 由路径和参数组成：`path?param1=value1&param2=value2`

此外，URL 必须采用可接受的编码，因此，为了将某些字符（UTF-8、二进制等）放入参数值，将数据转换为 base64（变体）或十六进制的情况并不少见。问题中提供的 URL 中的数据显示了以某种类似方案编码的内容（注意“base64”编码符号），并且可能表示加密的二进制内容。如果处理得当，这允许生成器使用他们自己的（通用）加密密钥发送“块”数据，并且当与 PKI 技术一起使用时，可以确保内容在传输过程中没有被修改。然后只能由发起者在任何时候重新读取。因此，要回答这个问题，这看起来像是加密的内容。如果使用 AES-256 或其他常见（强）加密，尝试破译是不切实际的。通常，尝试简单地对内容进行 base-64 解码（反向）以查看原始内容。如果它是人类可读的，则其下面可能是 ASCII、latin-1 或 UTF-8 内容。如果解码后的字符无法破译，则可能是加密的，因此（似乎）不可读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:53:34.830

那不是收集任何信息。它只是提供用于显示的图像。

长文本只是一个 base64 编码的字符串，其中包含将从文件加载的二进制信息。如果您对其进行解码，您会看到它以 PNG 标头开头，这就是 'image/png' 所说的应该包含的内容。

基本上，Chrome 已经在脚本中嵌入了 PNG 图像的全部内容，而不是将文件存储在某个地方。该评论甚至告诉您原因 - “不允许加载本地资源：chrome://theme/IDR_PRODUCT_LOGO”。

URL 不必通过网络访问信息。以“http:”或“ftp:”开头的 URL 可以。那些以'file:'开头的访问本地文件。那些以“数据：”开头的数据本身存储在 URL 中。

# c# - 可以登录到本地组织

> ID：14837356
> 
> 赞同：2
> 
> 时间：2013-02-12T16:39:29.043
> 
> 标签：c#, login, dynamics-crm-2011

这**不是**错字。我的问题是我**可以**登录。我们的 CRM 服务器可以通过我登录的 VPN 访问。然后，我运行以下代码。

```
ClientCredentials credentials = new ClientCredentials();
String orgUrl = "http://server/konrad01/XRMServices/2011/Organization.svc";
OrganizationServiceProxy _serviceProxy = new OrganizationServiceProxy(
  new Uri(orgUrl), null, credentials, null); 
```

这是一个全新的组织，里面什么都没有。当我列出例如系统用户时，我得到了点击，所以显然我**能够**连接到它。但是怎么办？！

我已经经历了我能想到的一切。我删除了所有互联网历史记录，包括但不限于 cookie。我从控制面板的凭据管理器中删除了对服务器的所有引用。我在服务器所在的 RDP 上禁用了登录凭据的存储。纳达！持久的鸭子（预期类型）仍然连接。怎么让它**不**连接？！（除非我提供凭据，否则。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:25:39.297

假设：

*   您有一个简单的本地部署。
*   您正在使用简单的活动目录身份验证。
*   运行应用程序的用户在 CRM 中具有权限。

由于您没有`ClientCredentials`在应用程序连接到 CRM 时指定任何特定用户，因此它提供了运行应用程序的用户的凭据。

该用户在 CRM 中具有权限，因此允许他们进行身份验证和执行操作。

要对此进行测试，请尝试以在 CRM 中没有权限的用户身份运行应用程序，并查看他们是否仍然能够连接。

进一步阅读：

*   [CRM 2011 – 身份验证模型](http://crmtidbits.com/2012/03/27/crm-2011-authentication-model/)
*   [使用 Microsoft Dynamics CRM Web 服务对用户进行身份验证](http://technet.microsoft.com/en-us/library/gg328497.aspx)
*   [如何设置 ClientCredentials？](https://stackoverflow.com/questions/12509992/how-can-i-set-clientcredentials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:07:27.477

如果您是 CRM 中的用户，即使您的用户被禁用，您仍然可以创建 _serviceProxy，但在尝试检索或执行任何内容时会出现错误。

如果您的用户在 CRM 中不存在，那么您甚至无法创建代理。

# angularjs - 定义 Angular 应用程序有什么好处？

> ID：14837359
> 
> 赞同：15
> 
> 时间：2013-02-12T16:39:36.340
> 
> 标签：angularjs

在一些 AngularJS 教程中，angular app 被定义为：

```
myApp = angular.module("myApp",[]); 
```

但我们也可以没有它。我能看到的唯一区别是当我们定义控制器时，我们不能使用成语：

```
myApp.controller("myCtrl",function(){ }) 
```

但必须使用

```
function myCtrl (){} 
```

鉴于我只会为我的网站创建一个应用程序，明确定义 myApp 是否还有其他好处？如果我没有定义 myApp，那么我的模块连接到哪里？

如果有，我如何在 Jasmin 测试中重新创建 myApp？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-12T23:13:44.740

您可以（至少）3 种方式定义控制器：

1.  将控制器定义为全局*变量*（存储在`window`对象上）

    ```
    function Ctrl() {} 
    ```

    这与执行以下操作相同：

    ```
    window.Ctrl = function () {} 
    ```

2.  Create a module and use the returned instance to create new controllers:

    ```
    var app = angular.module('app', []);
    app.controller('Ctrl', function() {}); 
    ```

3.  Create the controllers directly on the module without storing any references (the same as `2` but without using vars):

    ```
    angular.module('app', []);
    angular.module('app').controller('Ctrl', function() {}); 
    ```

From Angular's point of view, they all do the same, you can even mix them together and they will work. The only difference is that option `1` uses global vars while in options `2` and `3` the controllers are stored inside an Angular's private object.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T17:32:08.660

我明白你来自哪里，因为关于引导你的 Angular 的解释到处都是。只玩了 Angular 一个月（无论如何我都会分享我所知道的），我已经看到你在上面是如何定义它的。我也处于相同的场景中，我只需要定义`myApp`一次而不需要定义多个。

作为替代方案，您可以在下面执行类似的操作。您会注意到 Angular`app`和`controller`不必遵循相同的`namespace`. 我认为这更利于可读性和组织性。

**JS：**

```
window.app = {};
/** Bootstrap on document load and define the document along with 
      optional modules as I have below.
*/
angular.element(document).ready(function () {
    app.ang = angular.bootstrap(document, ['ngResource', 'ngSanitize']);

    // OR simply, works similarly.
    // angular.bootstrap(document, []);

});

/** Define Angular Controller */
app.myController= function ($scope, $resource, $timeout) {

}; 
```

**HTML：**

```
<div role="main" ng-controller="app.myController"></div> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-12T17:12:25.917

无论如何，您必须使用 angular.module 定义应用程序。myApp.controller 和函数 myCtrl 是一样的..

# regex - tcsh shell 脚本中的正则表达式

> ID：14837361
> 
> 赞同：-2
> 
> 时间：2013-02-12T16:39:47.840
> 
> 标签：regex, shell, tcsh

我在 tcsh 中有一个 shell 脚本，我将一个参数传递给该脚本，其长度可能会有所不同。参数的可能值是字母 -c,s,i,q,a。以及这些字母的组合。（例如：cs、si、ca、iq、qa、csq、acs、csia ..等）。字母的顺序无关紧要。我的问题是检查除这 5 个字符之外的任何字符的参数，以及是否有任何有效字符出现超过一次（零时间是可以的）。该脚本应检查这两个条件并引发错误。是否有任何正则表达式可以与 if 语句一起用于此目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T16:53:01.263

这是您可以使用的示例代码。使用“X”是为了强制比较是一个字符串。

```
#!/bin/csh -f
if ( $#argv > 0 ) then
    echo arg is $1
    if ( X$1 =~ X-* ) then
        echo "we have an argument"
        if ( "X$1" =~ X-c[aeiou] ) then
            echo I found -c followed by vowel
        else if ( "X$1" =~ "X-c" ) then
            echo I found -c alone
        else
            echo I found a -c but not a valid combo
        endif
   else
        echo I found an unknown argument: $1
   endif
endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:25:48.880

这将是最简单的两种正则表达式检查，一种用于所有字母的有效性，另一种用于查找重复的字母。

看看这段代码：

```
#!/bin/tcsh

echo $1 | grep -q -e "[^csqai]"
if ( $? != 0 ) then
    echo "Valid characters"
else
    echo "Invalid characters"
endif

echo $1 | grep -q -e "\([csqai]\).*\1"
if ( $? != 0 ) then
    echo "No repeated valid characters"
else
    echo "Repeated valid characters"
endif 
```

第一个正则表达式查找所有无效字符，第二个查找任何重复字符

我不知道如何进行这些检查`tcsh`，所以我用`grep`. `-q`国旗`grep`沉默了。`$?`如果没有找到匹配项，则为 0。

# php - PHP查询解析couchdb

> ID：14837365
> 
> 赞同：0
> 
> 时间：2013-02-12T16:39:55.623
> 
> 标签：php, couchdb

我是 php 新手，所以需要任何帮助来解决这个问题

我试图运行查询

```
localhost/ls-test/_design/app-views/_view/timestamp-measurement?descending=true&include_docs=true 
```

并让 json 返回类似以下格式的内容：

```
{"total_rows":441740,"offset":0,"rows":[
{"id":"123","key":[2013,2],"value":["1","PowerConsumption","0.0"],"doc":{"_id":"5446691910660799","SourceType":"SENSOR","SourceId":"4294403072","Property":"PowerConsumption","value":"0.0","}},
{"id":"124","key":[2013,2],"value":["228224","Motion","false"],"doc":{"_id":"5446688472521031","SourceType":"SENSOR","SourceId":"228224","Property":"Motion","value":"false","timestamp":"2013-02-12 17:06:06.768"}}
...]} 
```

那么，如何在 PHP 中进一步查询我的结果仅基于特定值显示，例如仅具有 SourceId:228224 的文档列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:05:31.773

您将在 PHP 中使用 json_decode 然后使用您的关联数组。

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# python - 我可以为 swig 库#define void 吗？

> ID：14837367
> 
> 赞同：3
> 
> 时间：2013-02-12T16:40:01.667
> 
> 标签：python, c, swig

我正在尝试使用 SWIG 为我不控制其源的库生成 python 接口模块。出于某种原因，图书馆有这一行：

```
#define VOID void 
```

这导致了 SWIG 的各种问题；似乎认为 VOID 是这些函数将返回的实际对象。

有什么办法可以告诉 SWIG 这`VOID`意味着`void`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:22:37.573

当我创建我的 SWIG 接口文件时，我逐字复制了函数原型，`VOID`等等。如果我将接口文件中的所有原型从 using`VOID`更改为 using `void`，问题就消失了。

似乎 SWIG 确实尊重预处理器，只是不是因为它自己的接口文件，这是可以理解的。

在此处发布此内容以供将来的搜索者使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:01:00.613

稍等...如果您没有该库的源代码，我假设您的意思是`#define VOID void`发生在您包含使用此库的头文件 (.H) 中。如果该库已编译，则`#define VOID void`不会影响它，并且仅与这些标头相关。这些`#define`指令只影响您的预处理器，它编译您的代码（库已经构建）。因此，如果只有那些标题使用 VOID 东西，那么请确保在这些标题中，`#define VOID void`顶部有一个 `#undef VOID`，底部有一个以删除 VOID 宏。

# c++ - 是否可以在 FileCommonDialog 上添加文本框？

> ID：14837369
> 
> 赞同：1
> 
> 时间：2013-02-12T16:40:07.970
> 
> 标签：c++, winapi

只是想知道这是否可能。在某些情况下，在常用对话框中添加 1 或 2 个控件似乎很方便。

现在我想为图像的宽度和高度添加两个 textobx 和 2 个标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:57:13.330

是的，这是可能的。这取决于您使用的常用对话 api 的风格。对于较新的 Vista 对话框，您可以使用[IFileDialogCustomize](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775912%28v=vs.85%29.aspx) COM 接口。AddEditBox() 和 AddText() 方法是您正在寻找的方法。

对于 GetOpenFileName() 等旧版 XP 兼容 api 函数，您可以使用 OPENFILENAME.lpTemplateName 和 OFN_ENABLETEMPLATE 选项来指定带有添加控件的对话框资源。[在此MSDN 库文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646951%28v=vs.85%29.aspx)中查找指导。

# asp.net-mvc - 结合数据标注属性

> ID：14837371
> 
> 赞同：8
> 
> 时间：2013-02-12T16:40:15.783
> 
> 标签：asp.net-mvc, validation

我有几个属性的集合，这些属性都应该始终一起用于 UI 和验证。例如对于货币字段，我必须添加 UI 提示、验证逻辑和显示格式。结果，我的班级看起来很拥挤。

```
public class Model
{
    [UIHint("Currency")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:C}")]
    [CustomRegularExpression(Currency.ValidationPattern, OnlyOnClientSide = true)]
    [SetMetaDataForCustomModelBinder("Currency")]
    public double? Cost { get; set; }

    [UIHint("Currency")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:C}")]
    [CustomRegularExpression(Currency.ValidationPattern, OnlyOnClientSide = true)]
    [SetMetaDataForCustomModelBinder("Currency")]
    public double? Profit { get; set; }
} 
```

有没有办法创建一个`[Currency]`属性，将所有这些属性的功能组合成一个简单的属性？我的目标是创建以下内容：

```
public class Model
{
    [Currency] public double? Cost { get; set; }
    [Currency] public double? Profit { get; set; }
} 
```

编辑：为了澄清，我尝试创建一个自定义属性，但没有公开的接口允许我实现这些不同属性的功能。我可以继承 ValidationAttribute，但我也不能继承 UIHintAttribute。我还缺少任何其他潜在的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:51:40.047

根据[帖子和帖子对 Phil Haack](https://stackoverflow.com/questions/6822537/is-it-valid-to-replace-dataannotationsmodelmetadataprovider-and-manipulate-the-r)[文章](http://haacked.com/archive/2011/07/14/model-metadata-and-validation-localization-using-conventions.aspx)的引用，您可以创建自定义`AssociatedMetadataProvider`添加所需的属性。你会有这样的东西：

```
public class MyCustomMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var attributeList = attributes.ToList();
        if (attributeList.OfType<CurrencyAttribute>().Any())
        {
            attributeList.Add(new UIHintAttribute("Currency"));
            attributeList.Add(new DisplayFormatAttribute
            {
                ApplyFormatInEditMode = true, 
                DataFormatString = "{0:C}"
            });
        }

        return base.CreateMetadata(attributeList, containerType, modelAccessor, modelType, propertyName);
    }
} 
```

在应用程序启动事件中：

```
ModelMetadataProviders.Current = new MyCustomMetadataProvider(); 
```

# c# - 如何在 NHibernate 中映射 ZeroToOne 关系？

> ID：14837373
> 
> 赞同：1
> 
> 时间：2013-02-12T16:40:17.527
> 
> 标签：c#, nhibernate, nhibernate-mapping

我是 NHibernate 的新手，不知道如何映射`ZeroToOne`关系：

涉及3张表

```
Discounts
DiscountRequests
Requests 
```

两者的主键成对存储在 中`DiscountRequests`，并非所有折扣都有请求，也不是所有请求都有折扣。

每个主键只出现一次，`DiscountRequests`因此`Discount`具有一对一的关系，`DiscountRequests`对于`Requests`.

任何人都知道如何映射它，这样一个 Discount 对象可以持有对它的请求的引用（如果它有一个），并且一个 Request 对象持有一个对 Discount 的引用（如果它有一个）。否则他们将持有一个空对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:54:57.037

这是一个有趣的关系案例，因为它不是经典的一对一关系——你没有一方是关系的所有者。这意味着您必须有一个间接的“多对多”表，如您的示例所示。最简单的解决方案是将其映射为 NHibernate 中的集合，但如果在您的域中您不能拥有多个项目，那就很奇怪了。

但是有连接可以提供帮助。[联接映射](http://ayende.com/blog/3961/nhibernate-mapping-join)允许您以对域对象透明的方式将一个实体拆分为多个数据库表。现在你可以在你的`Discount`映射中有这样的东西：

```
<join table="DiscountRequests" optional="true">
    <key column="DiscountId" />
    <many-to-one name="Request" column="RequestId" />
</join> 
```

还有一个类似的`Request`：

```
<join table="DiscountRequests" optional="true">
    <key column="RequestId" />
    <many-to-one name="Discount" column="DiscountId" />
</join> 
```

实际上，这就像`DiscountRequests`表格被分成两个并且引用分别`Request`转到`Discount`对象和其他方式。

记住对两者都有唯一的约束`RequestId`，`DiscountId`这样就不可能有超过一行的连接。

我还会检查使用分析器对保存和更新没有不良影响，但我不希望有任何影响。

# asp.net - DNN 升级和移动重定向

> ID：14837377
> 
> 赞同：0
> 
> 时间：2013-02-12T16:40:25.130
> 
> 标签：asp.net, dotnetnuke, dotnetnuke-5

这里有几个问题：

1.  DNN 的“皮肤”渲染在 5.0 和 7.0 之间是否存在差异，如果升级站点，皮肤会被错误地渲染？
2.  如果皮肤是特定于版本的，那么 DNN 5.0 中是否有一种方法可以让通用 C# 事件在每个页面加载时（如果浏览器是移动设备）呈现具有移动“皮肤”的站点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:54:16.410

1.  简单的回答，是的。更长的答案，这取决于皮肤是如何在 DNN5 中开发的，skin.CSS 文件中很可能有一些微小的变化可能是必要的。多少变化会因皮肤而异，因此很难估计需要多少工作

2.  当然可以，但是您必须进行大量自定义开发才能做到这一点。我建议查看 DNN7 的移动重定向功能。

# cuda - 块中的哪些线程形成扭曲？

> ID：14837378
> 
> 赞同：2
> 
> 时间：2013-02-12T16:40:25.177
> 
> 标签：cuda, gpu

在 2-d 或 3-d CUDA 块中，线程如何分组到 warp 中？我的假设是它们首先迭代 x，然后是 y，然后是 z。例如，在带有 的线程中`<z,y,x>`，`<0,0,[0-31]>`是一个经线，所以是`<0,1,[0-31]>`，等等。这是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:51:47.600

对，那是正确的。创建warp（一起执行的32个线程组）时，线程首先按X分组，然后是Y，然后是Z（线程坐标）。这对良好的合并有影响：您将希望在矩阵下标中安排线程坐标的使用，以便扭曲相邻线程（即通常在 X 坐标中）将访问矩阵中的相邻元素（通过使用 threadIdx.x 或派生在最快速变化的矩阵维度中。我们通常想要`data[z][y][x]`，而不是`data[x][y][z]`

# mod-rewrite - HTTP 301 是将现有网站与 AWS CloudFront 集成的最佳方式吗？

> ID：14837379
> 
> 赞同：0
> 
> 时间：2013-02-12T16:40:28.223
> 
> 标签：mod-rewrite, nginx, amazon-web-services, cdn, amazon-cloudfront

我们有一个现有的网络产品，它使用了大量的静态图像、css 文件、js 库和其他静态内容。每当加载页面时，浏览器通常必须发出数十个额外的 HTTP 请求来检索所有内容，这几乎使加载时间加倍。我们想将内容放到 Amazon 的 CloudFront 以缩短加载时间，我正在尝试在两种可能的实现方式之间进行选择。

1）。浏览对此类内容的每一个引用，并将其替换为对 CloudFront 的请求。例如 images/image.jpg 将变为 qwerty.cloudfront.net/images/image.jpg。这将导致“真正的”集成，但我实际上不可能实现这一点。特别是对于带有自己动态选择的图像的不同 JS 库。

2）。保留 images/image.jpg 并告诉服务器对 CloudFront 执行此类请求的 301。这种实现的问题在于，请求实际上必须一直路由到服务器，然后服务器才能将它们重定向到 CloudFront。

所以基本上我不确定301是否是个好主意。仅当将请求路由到我们的服务器的时间与服务器将此图像发送回客户端所需的时间相比可以忽略不计时，这才有效。此外，我不知道服务器将如何轻松地处理负载峰值 - 如果发生流量峰值，它是否能够存活并且它必须提供大量 301 重定向（尽管我认为它会，因为这样做应该比检索更容易）文件系统中的文件并输出它们）。如果您对此有任何经验或对此有任何想法（包括实现此集成的其他潜在方式），请告诉我。

# xml - 访问已压缩的 XML 数据

> ID：14837382
> 
> 赞同：0
> 
> 时间：2013-02-12T16:40:30.340
> 
> 标签：xml, db2, zip

如果列包含压缩的 XML，是否可以使用 db2 表的内容对列进行查询？

如果是这样，一个简单的例子是什么？

也就是说，给定一个表：

```
| id | zipped_content
| 0  | some zipped content here that was once xml 
```

压缩内容可能如下所示：

```
<animals>
    <cat>
        <name>fluffy</name>
        <age>12</age>
    <cat>  
    <dog>
        <name>snoopy</name>
        <age>32</age>
    <dog>
</animals> 
```

我可以运行一个查询，对于给定的 id，从 zipped_content 中提取某些数据吗？

也就是说，只得到每只动物的名字和年龄？这对 xml db2 的东西有点棘手——但大概你明白我的意思。我可以解压缩然后使用表格的东西，还是那不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:14:38.390

你可以，但性能绝对会扼杀你的应用程序。您不能真正在压缩 XML 的结构上使用索引。此外，解压缩需要临时内存空间，您还需要考虑缓存。

为什么要压缩 XML？老实说，我能想到的正当理由很少。

如果要通过某些 REST API 或类似方式进行传输，只需确保您的 Web 服务器将使用 deflate 或 gzip，您将在不损失太多性能的情况下实现压缩。

如果您希望节省空间，只需让[DB2](http://www.ibm.com/developerworks/data/library/techarticle/dm-0605ahuja/)为您压缩表。

如果有其他一些奇怪的要求，请同时存储压缩和解压缩的版本。当另一个发生变化时，使用触发器来更新另一个。

如果您真的想检查并使用压缩字段，您可能应该结合[存储过程](http://publib.boulder.ibm.com/infocenter/idm/v2r1/index.jsp?topic=/com.ibm.datatools.routines.tutorial.doc/topics/routines_introduction.html)和 SQL 查询来完成。您可能希望开发一个压缩/解压缩过程并将其与使用临时表相结合，或者开发一个过程来完全处理您的查询 - 或两者兼而有之。是的，需要 C/C++/Java 开发。

# django - Django Forms BoundField - 迭代 ChoiceField 时的输出没有 id 标签

> ID：14837383
> 
> 赞同：0
> 
> 时间：2013-02-12T16:40:31.423
> 
> 标签：django, django-forms, django-templates

我正在使用 Django Forms 制作一个 html 表单。我使用[BoundFields](https://docs.djangoproject.com/en/dev/ref/forms/api/#more-granular-output)是因为我的表单布局中有一些特殊的东西。

我的表单中有一个带有 RadioSelect 小部件的 ChoicesField。我手动迭代选择，因为我想在里面放一个 img `<li>`：

```
<ul>
    {% for country in form.country %}
        <li>
            <img src="{{ MEDIA_URL }}country_icons/country_{{ country.value }}.png">
            {{ country }}
        </li>
    {% endfor %}
</ul> 
```

但现在输出不包括输入元素上的 id 标签：

```
<ul>
    <li>
        <img src="/media/country_icons/country_nl.png">
        <label>
            <input type="radio" value="nl" name="country" checked="checked">
            Netherlands
        </label>
    </li>
    <li>
        <img src="/media/country_icons/country_de.png">
        <label>
            <input type="radio" value="de" name="country">
            Germany
        </label>
    </li>
</ul> 
```

同时，当我不会遍历选项并仅输出该字段时：

```
{{ form.country }} 
```

将输出：

```
<ul>
    <li>
        <label for="id_country_0">
            <input id="id_country_0" type="radio" value="nl" name="country" checked="checked">
            Netherlands
        </label>
    </li>
    <li>
        <label for="id_country_1">
            <input id="id_country_1" type="radio" value="de" name="country">
            Germany
        </label>
    </li>
</ul> 
```

所以我的问题是当我手动迭代选择时 id 字段不存在。这使得我的 css/javascript 选择器不一致。

所以我的问题是，有什么方法可以包含 id-tag 吗？无论如何，这种行为是有意的吗？或者这可能是一个错误？有人遇到类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:30:50.317

我不知道为什么它会这样工作。我的猜测是这些 id 是由表单 api 创建的迭代器创建的。单个国家/地区不知道迭代器（它*可能*出现在模板中而不出现在 for 循环中），因此无法创建 id。

要回答您的其他问题 - 是的，您可以自己构建输入以包含 id。

就像是 -

```
{% for country in form.country %}
    <li>
        <img src="{{ MEDIA_URL }}country_icons/country_{{ country.value }}.png">
        <label for="id_country_{{ forloop.counter0 }}">
            <input id="id_country_{{ forloop.counter0 }}" type="radio" value="{{ country.value }}" name={{ country }}>
        </label>
        {{ country.name }}
    </li>
{% endfor %} 
```

查看有关[循环模板的文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)

# java - 我的公司如何将 jar 放入 maven repo 以便 maven 项目可以从内部访问它

> ID：14837395
> 
> 赞同：0
> 
> 时间：2013-02-12T16:41:08.993
> 
> 标签：java, maven, nexus

我的公司如何将 jar 放入 maven repo，以便 maven 项目可以从内部访问它。

有人可以指点我一步一步详细说明如何执行以下操作

使用 Maven 制作一个 jar 将 jar 安装到本地 maven 存储库中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:43:02.967

### 我怀疑贵公司是否希望将其私有内部代码托管在公共存储库上：

在您自己的网络中安装您自己的存储库服务器，我使用[Archiva](http://archiva.apache.org/index.cgi)。这是最理想的解决方案，然后您可以设置 Mavenized 项目，以便在您这样做时自动将自己上传到您的私有存储库`mvn:release`，每个人都会看到新版本。如何使用 Archiva 都有[很好的文档记录](http://archiva.apache.org/docs/1.3.6/userguide/deploy.html)。

### 如果他们有想要共享的开源代码，那就不同了：

您可以[通过 Sonatype 发布面向公众的开源代码](http://www.vertigrated.com/blog/2011/03/releasing-maven-artifacts-to-central-repository-through-sonatype/)。

### 如果您只想将依赖项安装到本地存储库：

如果您只想在`.jar`本地安装一个[简单且有据可查](http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html)的 .

```
mvn install:install-file  -Dfile=path-to-your-artifact-jar \
                          -DgroupId=your.groupId \
                          -DartifactId=your-artifactId \
                          -Dversion=version \
                          -Dpackaging=jar 
```

# javascript - 这些特殊字符的 javascript 正则表达式

> ID：14837396
> 
> 赞同：0
> 
> 时间：2013-02-12T16:41:09.800
> 
> 标签：javascript, regex

根据特殊字符检查 javascript 中的输入字段的最佳方法是什么？正则表达式？如果是这样，那么我如何检查下一堆字符：

```
~!@#$%^&*()_+|}{[]\/?><:"`;'., 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:47:14.967

```
/([!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~])/g 
```

如果要删除这些字符...

```
function removeBaddies(value) {
    return value.replace(/([!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~])/g, '');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:48:02.593

最简单的是一个[字符类](http://www.regular-expressions.info/charclass.html)：

```
/[~!@#$%^&*()_+|}{[\]\\\/?><:"`;.,']/ 
```

（注意右括号、反斜杠和带反斜杠的斜线分隔符的转义）

然后在您的输入字符串上使用[RegExp`test`方法。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:48:11.643

如果您需要匹配特殊字符，请在`[]`.

```
[~!@#$%^&*()_+|}{[\]\\/?><:"`;'.,] 
```

如果您不需要它们，请`caret(^)`在列表的开头添加一个。

```
[^~!@#$%^&*()_+|}{[\]\\/?><:"`;'.,] 
```

# iphone - Json Iphone 解析数据

> ID：14837397
> 
> 赞同：0
> 
> 时间：2013-02-12T16:41:11.037
> 
> 标签：iphone, json, uitableview

我已经尝试了几次，但我仍然不知道如何进入 JSON 提要并检索我需要获取的内容。

提要看起来像这样，在我的代码中，我试图提取所有标题。我不知道如何进入 Json Feed。

![在此处输入图像描述](../Images/a4e110c798e37cbeffcd0640d72ad4f6.png)

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

        NSURL *url = [NSURL URLWithString:@"http://api.storageroomapp.com/accounts/511a4f810f66026b640007b8/collections/511a51580f66023bff000ce9/entries.json?auth_token=Zty6nKsFyqpy7Yp5DP1L&preview_api=1"];

        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [[NSURLConnection alloc] initWithRequest:request delegate:self];

        // Do any additional setup after loading the view from its nib.
    }

    -(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
        data = [[NSMutableData alloc] init];
    }
    -(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData{
        [data appendData:theData];
    }
    -(void)connectionDidFinishLoading:(NSURLConnection *) connection{
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

        news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
        [mainTableView reloadData];
    }

    -(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
        UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The data could not be downloaded - please make sure you're connected to either 3G or Wi-FI" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [errorView show];
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    }

    -(int)numberOfSectionsInTableView:(UITableView *)tableView{
        return  1;
    }
    -(int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
        return [news count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
        if (cell == nil) {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];

            cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];

        }

        return cell;
    } 
```

在我的 .H 中，我有 NSArray *news; 和 NSMutableData *数据。

任何帮助都会很棒，请您清楚地解释一下自己，因为我是这种语言的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:57:55.187

查看您在代码中的逻辑和您发布的示例 JSON，看起来您的数组并没有填充您想要的内容。

最初，JSON 是字典的形式（因此您提供的图像中的花括号）。因此，您应该将 JSON 的初始解析调整为如下所示：

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil]; 
```

从这里，您可以从字典中接收一个键。您要查找的是“数组”，尽管它的名称实际上也是一本字典。

```
NSDictionary *arrayDictionary = dictionary[@"array"]; 
```

继续前进，您终于可以访问您正在寻找的“资源”数组，并且可以将其存储在您在 .h 文件中创建的实例变量中。

```
news = arrayDictionary[@"resources"]; 
```

现在，在该`cellForRowAtIndexPath`方法中，您可以根据提供给您的索引路径行访问此数组的各种元素。

```
NSDictionary *newsItem = news[[indexPath row]]; 
```

最后，您可以访问各种属性，例如该新闻项目的标题，并设置文本标签的文本。

```
NSString *title = newsItem[@"title"];
[[cell textLabel] setText:title]; 
```

# matlab - 连接 webbots 和 MATLAB

> ID：14837400
> 
> 赞同：2
> 
> 时间：2013-02-12T16:41:22.687
> 
> 标签：matlab, webots

我想连接 Cyber​​robotics Webots 软件和 MATLAB。在 Webots 中，我选择了“机器人竞赛”并打开了存在于 webbot 中的世界“nao_matlab”，当我在控制台中编译并运行此消息时显示：

什么问题？

```
Starting Matlab...
Starting Matlab...
[supervisor_matlab]  
[supervisor_matlab]   To get started, type one of these: helpwin, helpdesk, or demo.
[supervisor_matlab]   For product information, visit www.mathworks.com.
[supervisor_matlab]  
[nao_matlab]  
[nao_matlab]   To get started, type one of these: helpwin, helpdesk, or demo.
[nao_matlab]   For product information, visit www.mathworks.com.
[nao_matlab]  
[supervisor_matlab] Error using ==> loadlibrary at 480
[supervisor_matlab] There was an error running the loader mfile.  Use the mfilename option
[supervisor_matlab] to produce a file that you can debug and fix if needed.  Please report
[supervisor_matlab] this error to the MathWorks so we can improve this function.
[supervisor_matlab] 
[supervisor_matlab] 
[supervisor_matlab] Error in ==> launcher at 43
[supervisor_matlab]       loadlibrary Controller allincludes.h ...
[supervisor_matlab] 
[supervisor_matlab] Caused by:
[supervisor_matlab]     Error using ==> feval
[supervisor_matlab]     Error: File: C:\Users\Mohamad\AppData\Local\Temp\libController_proto.m Line: 364 Column: 9
[supervisor_matlab]     The input character is not valid in MATLAB statements or expressions.
[nao_matlab] Error using ==> loadlibrary at 480
[nao_matlab] There was an error running the loader mfile.  Use the mfilename option
[nao_matlab] to produce a file that you can debug and fix if needed.  Please report
[nao_matlab] this error to the MathWorks so we can improve this function.
[nao_matlab] 
[nao_matlab] 
[nao_matlab] Error in ==> launcher at 43
[nao_matlab]       loadlibrary Controller allincludes.h ...
[nao_matlab] 
[nao_matlab] Caused by:
[nao_matlab]     Error using ==> feval
[nao_matlab]     Error: File: C:\Users\Mohamad\AppData\Local\Temp\libController_proto.m Line: 364 Column: 9
[nao_matlab]     The input character is not valid in MATLAB statements or expressions.
[nao_matlab] 
[nao_matlab] 
[supervisor_matlab] 
[supervisor_matlab] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T16:33:32.883

可以在此处找到将 matlab 与 webbot 集成的非常好的指南[http://www.cyberbotics.com/dvd/common/doc/webots/guide/section4.7.html](http://www.cyberbotics.com/dvd/common/doc/webots/guide/section4.7.html)或此处[http://www.intorobotics.com/ webbots-simulation-tutorials-and-resources/](http://www.intorobotics.com/webots-simulation-tutorials-and-resources/)

# cross-domain - 针对特定组跨域时未调用 SignalR JS 客户端方法。

> ID：14837401
> 
> 赞同：1
> 
> 时间：2013-02-12T16:41:23.877
> 
> 标签：cross-domain, signalr

我一直在使用 signalR 一段时间，这是我遇到的第一个问题。

我有一个域“x”的客户端连接到域“y”上的集线器服务器。一切都很好......但是当我尝试使用 Client.Group(groupID).someMethod 调用客户端方法时，从集线器域外部连接的客户端没有得到响应？但是，如果我使用 Client.All.someMethod 一切正常（客户端得到响应）。

当涉及到组和跨域支持时，我是否遗漏了什么？

另外，我在从外部域连接到服务器集线器时遇到了一些麻烦，在 github 上的示例中，不清楚头部中的引用是否应该是：

```
<script src="http://localhost:61215/signalr/hubs" type="text/javascript"></script> 
```

或者

```
<script src="/signalr/hubs" type="text/javascript"></script> 
```

后者没有工作......

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:15:19.037

您对组的问题可能是由于客户端重新连接时组不会自动重新加入。在同一个域上运行时这不是问题，因为您的客户端可能使用永远帧或服务器发送事件传输，除非底层连接出现问题，否则不会重新连接。

但是，对 SignalR 的跨域访问需要 WebSocket 或长轮询传输。考虑到您在团体中遇到的问题，后者可能会在您的情况下使用。（注意：您的 SignalR 服务器需要在 Windows 8 或 2012 上运行 .NET 4.5 才能支持 WebSockets）。每次接收消息时，长轮询传输都必须重新连接到 SignalR 服务器。

要解决此问题，请执行以下操作：

```
namespace MySignalRApplication
{
    public class Global : System.Web.HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            GlobalHost.HubPipeline.EnableAutoRejoiningGroups();
        }
    }    
} 
```

通过调用`GlobalHost.HubPipeline.EnableAutoRejoiningGroups()`，您允许客户端在重新连接时重新加入组。但是，从 RC2 开始，SignalR 不会验证重新连接的客户端之前是否在他们尝试重新加入的组中。当然，行为良好的客户端只会尝试重新加入之前所在的组，但是在 RC2 上启用自动重新加入组允许攻击者将自己添加到任何组中。这对许多应用程序来说不是问题，但这就是默认情况下不启用组重新加入的原因。

在 SignalR 的 RTM 版本中，默认情况下将启用自动重新加入组。客户端尝试重新加入的组列表也将由服务器签名，使其更加安全。

**至于你的第二个问题：**

当您加载托管在与所提供的 HTML 不同的域上的 JavaScript 时，脚本 src 必须包含绝对 URL。

```
<script src="/signalr/hubs" type="text/javascript"></script> 
```

上面包含一个相对 URL，这就是它不起作用的原因。

# jquery - Jquery Datatable Dialog - 对话框只打开第一个

> ID：14837402
> 
> 赞同：1
> 
> 时间：2013-02-12T16:41:24.373
> 
> 标签：jquery, dialog, datatable

我目前正在使用 DataTable 和对话。但是，似乎对话窗口仅在第一次单击时打开。每次单击都会打开网站，但不会打开对话窗口。

任何人都可以看到失败吗？代码如下

```
<script type="text/javascript" charset="UTF-8">
$(document).ready(function() {
    function DialogInformation() {
        var $link = $(this);
        var $dialog = $('<div></div>').dialog({
                autoOpen: false,
                title: $link.attr('title'),
                width: 800,
                height: 400,
                modal: true,
                open: function ()
                {
                    $(this).load($link.attr('href'));
                }
            });
        $dialog.dialog('open');
        return false;
    };

    $('##named_datatable').dataTable( {
        "iDisplayLength": 10,
        "bInfo" : false,
        "bProcessing": false,
            "bServerSide": false,
        "sAjaxSource": 'getLists',
        "sPaginationType": "full_numbers",
        "aoColumns": [
            { "mDataProp": "Title" , "sTitle": "Titel"},
            { "mDataProp": "Info", "sTitle": "", "sClass": "info", "mRender": function ( data, type, row ) {
                return '<a href="getLists/'+ data +'" title="Information -'+ row.Title + '" class="info">Info</a>'; }
            },
            { "mDataProp": "Min" , "sTitle": "Min"},
            { "mDataProp": "Price" , "sTitle": "Preis"},

        "fnDrawCallback": function() {
            //bind the click handler script to the newly created elements held in the table
            $('tbody td.info a.info').bind('click',DialogInformation);
        }
    } );
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:38:07.203

.bind() 在 'domready' 处附加点击事件。像这样使用 .on 附加事件处理程序

```
$('tbody').on('click', 'td.info a.info',DialogInformation); 
```

# php - 选择并排序两列 MySQL

> ID：14837406
> 
> 赞同：2
> 
> 时间：2013-02-12T16:41:29.230
> 
> 标签：php, mysql, sql-order-by

所以，我的代码看起来像这样

```
mysql_query("SELECT * FROM threads WHERE forum_id = '$id' ORDER BY type,posted DESC") or                                 
die(mysql_error()); 
```

“posted”是 time() 的值，选择减少以将最新的放在顶部。“类型”包含 1 或 2。如果是 2，则线程被固定。目前，它在发布后排序，但应该在顶部（固定）的那些在底部。有什么我缺少的修复吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:47:30.753

尝试：`ORDER BY type DESC, posted DESC`

默认情况下，它按升序排序。您需要为要排序的两个字段指定顺序。

[按文档订购](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:49:55.860

不要忘记 order by 中的 asc/desc 适用于每个单独的字段，而不是整个 order by 子句。

```
ORDER BY type DESC, posted ASC 
```

MySQL 也可以接受任意逻辑的 order by，所以对于更复杂的排序要求，你可以有类似的东西

```
ORDER BY IF(type=2, 0, 1) AS pinned ASC, posted DESC 
```

只要任意逻辑返回可以简单排序的内容（例如数字或字符串），排序的复杂程度就没有限制。

# batch-file - Firefox：如何从链接执行 .bat 文件？

> ID：14837407
> 
> 赞同：4
> 
> 时间：2013-02-12T16:41:29.117
> 
> 标签：batch-file, firefox, cmd

在这里，我有一个小的 Intranet 页面，上面有一些“file://”链接。这些链接指向一些 Windows 批处理文件。但是，如果我单击这些链接，我只会看到这个批处理文件的内容。我宁愿得到 Firefox 对话框，我可以在其中选择打开、保存和取消。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:54:32.027

尝试：

```
Content-type: application/octet-stream
Content-Disposition: attachment; filename="myfile.txt" 
```

[http://www.w3.org/TR/html4/struct/links.html](http://www.w3.org/TR/html4/struct/links.html)

它应该询问您是否要运行蝙蝠。如果页面页面仅供内部使用，最好尝试使用 HTA 应用程序 - 它没有浏览器的限制，您将能够使用 vbscript 调用 bat。

# sql - SQL SUM 查询组

> ID：14837410
> 
> 赞同：0
> 
> 时间：2013-02-12T16:41:31.410
> 
> 标签：sql, sql-server, sql-server-2005

我有以下简单的查询：-

```
SELECT *
FROM dbo.vwPAProjects_Summary_New_2 
```

在以下输出中生成数据：-

![在此处输入图像描述](../Images/ea5db8254caaa8542cdd29ba4fd51c36.png)

任何人都可以建议最好的编码方式，当“PACONTNUMBER”和“项目类型”相同时，执行求和以提供每个数值的总和。

例子：-

![在此处输入图像描述](../Images/b0e88fd5b83f583cce0ecb26529b1c7f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:47:15.560

您需要列出所有字段（不要使用“*”）。

然后对要求和的内容使用 SUM() 函数。

然后，ProjectFeeAmount 字段之外的所有内容要么需要从您的列表中排除，要么以某种方式聚合（总和、最小值、最大值等）。

```
SELECT
   Contract,
   Sum(PAContNumber) as SumOfPAContNumber,
   ProjectManagerID,
   ...
FROM
   ...
GROUP BY
   Contract,
   ProjectManagerID,
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:49:13.270

试试这个：

```
SELECT PACONTNUMBER, Project Type,
SUM(Project_Fee_Amount) AS Project_Fee_Amount
FROM dbo.vwPAProjects_Summary_New_2
GROUP BY PACONTNUMBER, Project Type 
```

然后将您想要 SUM 的任何其他字段添加到选择列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:49:51.353

这将使您开始，您需要为`SUM`要总计的其他值添加其他行

```
select   PACONTNUMBER, 
         [Project Type], 
         sum([Project Fee Amount) as TotalProjectFees
from     vwProjects_Summary_New_2
group by PACONTNUMBER, 
         [Project Type] 
```

# javascript - 在 javascript 函数中使用 jQuery 格式化 HTML

> ID：14837413
> 
> 赞同：0
> 
> 时间：2013-02-12T16:41:41.647
> 
> 标签：javascript, jquery, html

我正在尝试根据用户按下按钮来更新页面上的数字。我让它工作了，但是当数字更新时，文本不再像 <code></code> 块中那样格式化。这是我使用的代码减去任何控制格式的努力：

```
<script>
    var countUp = function() {
        $("#num").html(parseInt($("#num").html()) + 1);
        $("#textWithNumInIt").html("The number is now"+$("#num").html() );
    }
</script>

<p id="textWithNumInIt"><code>The number is 0</code></p> 
```

我尝试将 <code></code> 标签放在 jQuery 中，有和没有转义字符。我尝试使用 .val() 和 .text() 来设置文本，以保持格式不变。我已经尝试在数字本身周围使用跨度，但是该值甚至没有更新。

这是我第一次在 javascript 函数中使用 jQuery 更改 HTML，所以问题可能与此有关。任何帮助都会很棒，如果您对完全不同的方法有建议，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:44:23.177

当您编辑段落的内容时，该`textWithNumInIt`段落`<code>`内的标签也会自然地被替换。这应该有效：

```
$("#textWithNumInIt").html("<code>The number is now "+$("#num").text()+"</code>" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:46:14.793

也许试试这个 -

```
$('#textWithNumInIt code').html("The number is now "+$("#num").text() ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:50:22.807

当您解析它时，它会被转换为纯文本并且`<code>`包装器消失了。使用它，您将走上自己的道路。

```
var countUp = function() {
    var t = parseInt($("#num").text()) + 1);//using text() to avoid any unintentional html tag issues
    $("#num").html(t);
    $("#textWithNumInIt").html("<code>The number is now "+t+"</code>" );
} 
```

或者，您可以通过简单的编辑来继续您的代码。

```
var countUp = function() {
    $("#num").html(parseInt($("#num").html()) + 1);
    $("#textWithNumInIt code").html("The number is now"+$("#num").html() );
} 
```

# r - 将 dBase / Paradox 数据读入 R？

> ID：14837414
> 
> 赞同：1
> 
> 时间：2013-02-12T16:41:44.217
> 
> 标签：r, dbase, paradox

我有大约一百个我继承的数据库文件，我目前正在使用“ [Paradox dBase Access Reader](http://www.sportamok.com/development/download) ”阅读，并手动导出到管道分隔的文本文件。我很想用某种访问库来做到这一点，它可以让我将这些文件直接读入 R。

阅读器工具声明这些文件是“Paradox 5.0 for Windows”，并且它们具有`.db`扩展名。

我希望我可以使用[外部](http://cran.r-project.org/web/packages/foreign/foreign.pdf)包来阅读它们，因为它在文档中声明了该`read.dbf()`函数：

> DBF 是用于为“XBASE”系列数据库语言编写的文件的扩展，涵盖 dBase、Clipper、FoxPro 及其 Windows 等效的 Visual dBase、Visual Objects 和 Visual FoxPro，以及一些较旧的产品'</p>

不幸的是，它在 C 函数中失败了`DBFOpen`，大约在第 425 行：

```
if( fread( pabyBuf, nHeadLen-32, 1, psDBF->fp ) != 1 )
{
  fclose( psDBF->fp );
  free( pabyBuf );
  free( psDBF );
  return NULL;
} 
```

任何人都有其他解决方案，或者了解`read.dbf()`这里的匹配是好是坏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:10:20.040

在 rseek.org 上搜索“paradox db”会生成[gnumeric](http://www.rseek.org)[包](http://cran.r-project.org/web/packages/gnumeric/)，它表示它可以读取 Paradox 文件。我没有任何方法可以测试该功能，但它可能会起作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:50:13.873

该列表没有明确提到 Paradox 5.0，您使用它阅读它的努力`read.dbf`失败了。如果文件是静态的，即不再更改，我只需创建一个脚本将它们导出一次，将它们读入 R，然后使用`save`这种方式转储结果，您可以使用`load`.

如果数据不是太大，这将是一个快速的过程，并允许您轻松读取所有数据并提取您喜欢的任何子集。如果它很大，您可以花一些时间将文件转储到更现代的数据库中，例如`sqlite`（虽然这不是一个完整的数据库，但它很好而且轻量级）。如果不是绝对必要的话，我不会花太多时间从 R 直接访问这些古老的文件......

# powershell - powershell 如果文件不存在日志字符串到文件

> ID：14837415
> 
> 赞同：2
> 
> 时间：2013-02-12T16:41:48.623
> 
> 标签：powershell, file-exists, logfile

我有许多文件路径存储在数据库中。我需要检查文件是否确实存在。我以前做过，但丢失了它的脚本，需要一些帮助。

我将所有路径放在一个文本文件中，并希望遍历它们，并检查它们是否存在。如果它们不存在，我想将不存在的路径放在日志文件中。

像这样的东西：

```
# ! equals -not

$log = "e:\pshell\notExists.log"
$log | out-file $log

$list = Get-Content "e:\pshell\files.txt"

Foreach ($file in $list)
{
  CHECK IF FILE EXISTS
  IF IT DOESNT then Write-Output $file
} 
```

一点帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:46:10.320

测试路径？

```
$log = "e:\pshell\notExists.log" $log | out-file $log

$list = Get-Content "e:\pshell\files.txt"

Foreach ($file in $list) 
{ 
   If (!(test-path $file))
   {
      Write-Output $file
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:57:46.170

如果您的 inputfile 是每行一个文件路径，请尝试：

```
$log = "e:\pshell\notExists.log"

Get-Content "e:\pshell\files.txt" | Where-Object {
    #Keep only paths that does not exists
    !(Test-Path $_)
} | Set-Content $log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:56:31.190

```
$log = "e:\pshell\notExists.log" 

Get-Content "e:\pshell\files.txt" |
where {!(test-path $_)} |
add-content $log 
```

# web-services - Spring WebServices Client 的随机禁止 403 错误

> ID：14837420
> 
> 赞同：1
> 
> 时间：2013-02-12T16:41:59.647
> 
> 标签：web-services, spring

我们有一个使用 Spring WS 实现的 web 服务客户端。这是代码片段：

```
<bean id="aClient" class="class.aClient">
    <property name="messageFactory">
        <bean  class="org.springframework.ws.soap.axiom.AxiomSoapMessageFactory" />
    </property>
    <property name="messageSenders">
        <list>
            <ref bean="httpSender" />
        </list> 
```

客户端调用可以在随机的一段时间内正常工作：几分钟、几小时、甚至几天，然后突然出现下一个错误：

**org.springframework.ws.client.WebServiceIOException：I/O 错误：禁止 [403]**

有一个基本的用户/密码身份验证，客户端在 Weblogic 中运行。我试过更改最小线程池数，设置抢先验证，结果是一样的。随机出现错误。发生这种情况时，实现 WS 的服务器工作正常（用soapUI 测试） 当应用程序服务器重新启动时，调用总是再次工作。

对此的任何帮助将不胜感激。如果需要，我可以提供更多代码。

谢谢

大卫

# c# - 我需要在 Windows 8 上使用 Sha256 对消息进行哈希处理

> ID：14837421
> 
> 赞同：1
> 
> 时间：2013-02-12T16:42:09.270
> 
> 标签：c#, windows-8, sha256

所以在过去，我曾经使用 Windows 8 中不可用的 System.Security.Cryptography。我在 Windows 8 中发现的是 windows.security，但我没有找到任何关于如何使用 Sha256 和密钥的示例。这是我与 System.Security.Cryptography 一起使用的旧代码

```
 string appID = "appid";
        string key = "password";
        var hmacsha256 = new HMACSHA256(Encoding.Default.GetBytes(key));
        hmacsha256.ComputeHash(Encoding.Default.GetBytes(appID));
        string k = "";
        foreach (byte test in hmacsha256.Hash)
        {
            k += test.ToString("X2");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T21:58:55.723

所以这是最终的工作代码

```
public static string ComputeSignature (string algorithmName, string content, string key, BinaryStringEncoding encoding = BinaryStringEncoding.Utf8)
{   
    var algorithmProvider = MacAlgorithmProvider.OpenAlgorithm(algorithmName);
    var contentBuffer = CryptographicBuffer.ConvertStringToBinary(content, encoding);
    var keyBuffer = CryptographicBuffer.ConvertStringToBinary(key, encoding);
    var signatureKey = algorithmProvider.CreateKey(keyBuffer);
    var signedBuffer = CryptographicEngine.Sign(signatureKey, contentBuffer);
    return CryptographicBuffer.EncodeToHexString(signedBuffer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:01:56.640

您可以使用其中的类`Windows.Security.Cryptography`来创建消息身份验证代码（问题中的键控哈希）。这是一个例子。请将其视为演示代码，按原样提供。对与安全相关的所有代码进行全面的安全审查。

```
var clear = "foobarbaz";
var bytes = CryptographicBuffer.ConvertStringToBinary(clear, BinaryStringEncoding.Utf8);
var macProvider = MacAlgorithmProvider.OpenAlgorithm(MacAlgorithmNames.HmacSha256);
var rndKey = CryptographicBuffer.GenerateRandom(macProvider.MacLength);
var key = macProvider.CreateKey(rndKey);
var cypherMac = CryptographicEngine.Sign(key, bytes);
var asString = CryptographicBuffer.EncodeToBase64String(cypherMac); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:28:22.777

根据 .NET Framework 文档，您使用的类在 .NET 4.5 中可用，并在 Windows 8 上受支持。
[http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha256.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha256.aspx)

如果您在谈论 WinRT 运行时，这可能是您想要的： [http ://channel9.msdn.com/Forums/TechOff/Porting-to-WinRT/4df7586e1ef5400682eda00f0143b610](http://channel9.msdn.com/Forums/TechOff/Porting-to-WinRT/4df7586e1ef5400682eda00f0143b610)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-08T20:24:25.693

这对我有用：

```
using Windows.Security.Cryptography;
using Windows.Security.Cryptography.Core;

string str = "your string";
string hash = CryptographicBuffer.EncodeToHexString(HashAlgorithmProvider.OpenAlgorithm(HashAlgorithmNames.Sha256).HashData(CryptographicBuffer.ConvertStringToBinary(str, BinaryStringEncoding.Utf8))); 
```

# oop - 需要面向对象的设计建议

> ID：14837423
> 
> 赞同：2
> 
> 时间：2013-02-12T16:42:15.410
> 
> 标签：oop, object-oriented-analysis

我需要一些关于 OOD 的建议。下面是我的情况。

```
Class A{
   private B service_;
   private StopWatch timer_;       
   private Const int MinTimeToWait;

   public SomeOperation(){
        timer_.start();
       //call another method on service_ async and subsribe to event for callback
   }

   private SomeOperationCallback()
   {
         timer_.stop();
         int elapsedTime = timer_.elapsedTime();
         if(elapsedTime < MinTimeToWait)
             Thread.sleep(MinTimeToWait - elapsedTime)

         //Continue after thread resumes
   } 

} 
```

我有一个触发异步操作的类，在异步操作返回后，我需要检查异步操作返回的时间是否小于 MinTimeToWait，如果是，则等待 MinTimeToWait 完成，然后继续其他操作。

现在，通过在 SomeOperationCallback 中包含检查时间和等待的逻辑来做正确的事情，或者我应该创建一个封装逻辑和 StopWatch 的新类并使用该类进行检查和等待？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:40:14.147

我认为您的方法没有任何问题。这个问题看起来更像是如何命名“A”，也许是“MinWaitProcess”。它的职责是确保进程等待最少的时间。

> 现在，通过在 SomeOperationCallback 中包含检查时间和等待的逻辑来做正确的事情，或者我应该创建一个封装逻辑和 StopWatch 的新类并使用该类进行检查和等待？

如果您这样做，我怀疑它看起来就像您在 A 类中所拥有的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T12:51:14.760

正如，Kelly S. French 说**你的方法已经足够好了**。如果您想在其他类中使用这种方法，最好使用 SomeOperation() 和 OperationCallback 方法**定义基类。**之后，您可以**从基类继承并通过调用超类方法来**实现可重用性。像这样的东西：

```
Class Base {

     private B service_;
     private StopWatch timer_;       
     private Const int MinTimeToWait;

     public SomeOperation(){
        timer_.start();
     }

     protected SomeOperationCallback()
     {
         timer_.stop();
         int elapsedTime = timer_.elapsedTime();
         if(elapsedTime < MinTimeToWait)
             Thread.sleep(MinTimeToWait - elapsedTime)
         } 

     }
}
class A:Base {
    SomeOperation() {
        super.SomeOperation();
        // do some actions here
        super.SomeOperationCallback();
    }
} 
```

# java - 如何摆脱“类路径包含多个 SLF4J 绑定”警告？

> ID：14837429
> 
> 赞同：4
> 
> 时间：2013-02-12T16:42:37.087
> 
> 标签：java, warnings, slf4j

这或多或少是一个“常见”问题，但是，我还没有找到一个好的答案。所以，再一次，这里是警告：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/eualin/.m2/repository/org/slf4j/slf4j-jcl/1.6.0/slf4j-jcl-1.6.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/eualin/.m2/repository/org/slf4j/slf4j-log4j12/1.5.11/slf4j-log4j12-1.5.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

以下是该问题的两个潜在解决方案[[1]](https://issues.apache.org/jira/browse/BIGTOP-583) [[2]](https://stackoverflow.com/questions/14024756/slf4j-class-path-contains-multiple-slf4j-bindings)。

假设它们都对我有用，显然，它们只是黑客，我不确定我是否应该依赖它们中的任何一个。你会推荐我什么？请记住，在终端中不会出现警告；只有当我通过 IntelliJIDEA 运行应用程序时。

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-20T10:30:54.260

在我的特殊情况下，我在 中遇到了这个错误`IntelliJ IDEA`，刷新 Gradle 修复了这个错误：

[![在此处输入图像描述](../Images/0d2b44eded8c966c88552ca6a0ba6a17.png)](https://i.stack.imgur.com/yDMHs.png)

您可以从 中找到此窗口`View..Tool Windows..Gradle`。

我们的设置是：

*   IntelliJ IDEA v15
*   摇篮
*   詹金斯
*   SVN

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-05T17:44:06.387

SLF4J 期望在任何应用程序运行时中只存在一个版本的 StaticLoggerBinder。如果有多个，SLF4J 不能保证日志消息将被路由到适当的记录器。

SLF4J 的架构要求只使用一个库来路由日志消息（例如`slf4j-<logging framework>.jar`）。当多个类路径通过应用程序服务器、IDE、启动脚本等运行时，SLF4J 库可以被多次包含。您可能需要在 IntelliJIDEA 中搜索和查找类路径的添加或修改位置（例如在已配置的 Java 编译器或任何启动配置中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T16:53:56.820

这可能是因为 IntelliJIDEA 正在添加其中一个 slf4j 绑定 JAR 本身。我的猜测是在您运行单元测试时发生的。因此，一种方法是查看您是否可以在单元测试运行器的启动器配置中排除其他 JAR。

但归根结底，这个警告是无害的，你可以简单地忽略它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-27T16:57:43.737

在项目的 POM 文件中，通过向项目添加对它的直接依赖项，在找到的 deps 列表中将所需的日志记录后端设置为默认值，例如：

```
<groupid>ch.qos.logback</groupid>
<artifactid>logback-classic</artifactid>
<scope>runtime</scope>
</dependency>``` 
```

# css - 带有引导颜色选择器的 Kendo UI 窗口，窗口始终在顶部

> ID：14837444
> 
> 赞同：0
> 
> 时间：2013-02-12T16:43:33.340
> 
> 标签：css, asp.net-mvc-3, twitter-bootstrap, kendo-ui

我在使用 Kendo UI 窗口显示一个编辑表单时遇到问题，该表单上也有一个 Bootstrap 颜色选择器。问题是窗口总是显示在颜色选择器的顶部并覆盖了它的一半。如果窗口设置为模态窗口，则无法触摸颜色选择器，但如果模态设置设置为 false，则可以更改颜色，但只能看到一半的窗口。有人对如何让颜色选择器显示在 Kendo UI 窗口顶部有任何建议吗？我附上了一个屏幕截图来显示这个问题。谢谢。

更多详情：

父页面上有一个网格，它有一个打开 Kendo UI 窗口的按钮，然后加载一个局部视图。局部视图中包含编辑控件以及颜色选择器。颜色选择器设置在 span 标签上：

```
 <span class="color" data-color="@Model.LabelColor" data-color-format="hex" id="BreedingColorPicker">
      @Html.HiddenFor(m => m.LabelColor)
      <span class="add-on"><i class="label_color_box" style="background-color: @Model.LabelColor">&nbsp;</i></span>
    </span> 
```

![Bootstrap 颜色选择器显示在 Kendo UI 窗口后面](../Images/2b951b2bce229726ae463e95c1e67e53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:26:20.567

这比我想象的更容易解决，只是花了一段时间才找到。与此相关的问题是确定元素的 z 索引。Kendo UI 窗口的 z-index 为 10007，这比我尝试在颜色选择器上设置的 z-index 高得多。我想出的解决方案是进入 bootstrap colorpicker.css 文件并手动添加 z-index。对于其他可能遇到类似问题的人，只需对 colorpicker.css 文件进行以下更改：

```
.colorpicker {
     *zoom: 1;
     top: 0;
     left: 0;
     padding: 4px;
     min-width: 120px;
     margin-top: 1px;
     -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
     border-radius: 4px;
     z-index: 12000; /* Added to make sure the color picker shows up on top of the Kendo UI Windows */
} 
```

# c# - C#：在日期保持日期不变时拆分字符串

> ID：14837445
> 
> 赞同：3
> 
> 时间：2013-02-12T16:43:35.600
> 
> 标签：c#, regex

我有以下示例数据：

```
21/10/2012 blahblah blah blahblah 265 blah 25 22/10/2012 blahblah blah blahblah 10 blah 14 blah 66 NK blahblah blah blahblah 25 
```

我希望输出为以下数据：

```
21/10/2012 blahblah blah blahblah 265 blah 25
22/10/2012 blahblah blah blahblah 10 blah 14 blah 66 NK blahblah blah blahblah 25 
```

我尝试了以下方法：

```
var regex = new Regex ("(\d{1,2})/(\d{1,2})/(\d{4})");
var matches = regex.Matches(str);//str is given above
foreach(var item in matches)
{
  //my logic to do operations
} 
```

这给出了日期数组。如何在日期上拆分字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:45:32.200

您可以在日期之前将字符串拆分为空字符串。为此，您需要此正则表达式：

```
string[] arr = Regex.split(str, "(?<!\d)(?=\d{1,2}/\d{1,2}/\d{4})"); 
```

拆分上述正则表达式将为您提供所需的输出。它会将您的字符串拆分为空字符串，该字符串前面是 - 形式的日期`21/10/2012`，而不是前面的 a `digit`。我们需要做这些`look-behind`事情，这样它就不会撕裂一天的部分。没有它，它将在 in 之前的空字符串上拆分`1`，`21`从而将`2`and保留`1/10/2012`为单独的元素。

另外，请注意，您将获得一个`empty string`作为数组的第一个元素，因为字符串中的第一个空字符串满足拆分条件。

* * *

使用正则表达式验证日期可能会变得复杂。特别是，如果您想限制每个可能的无效日期，例如`30 Feb`. 但是，如果你愿意，你可以试试这个正则表达式，但它会匹配*30 & 31 Feb*甚至*31 November*。

```
string[] arr = Regex.split(str, "(?<!\\d)(?=(?:0[1-9]|[1-2][0-9]|[3][01])/(?:0[1-9]|1[0-2])/(?:19[0-9]{2}|2[0-9]{3}))"); 
```

# cocoalibspotify-2.0 - 接收到的播放列表中的 NULL 对象

> ID：14837446
> 
> 赞同：0
> 
> 时间：2013-02-12T16:43:35.290
> 
> 标签：cocoalibspotify-2.0

从最近开始，在获取的播放列表对象中，有一个`NULL`对象包含在结果数组中。它看起来像一个讨厌的错误，因为在调试器中给出了内存地址，但无法解析任何对象类型。它在迭代数组时在 Cocoalibspotify 中崩溃。

其他人遇到这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:30:39.240

我发现了问题：

在 Spotify 的热门曲目中，有一首歌曲“Love Is All I Got - Original Mix”。它的专辑确实有`nil`封面。当我通过以下行创建带有封面的数组时，对于该曲目的封面，`NSNull`插入了一个对象，这会`cocoalibspotify`导致崩溃。

```
NSArray *covers = [toptracks valueForKeyPath:@"album.cover"]; 
```

# html - 如何确保表格永远不会比其包含的 div 宽？

> ID：14837447
> 
> 赞同：2
> 
> 时间：2013-02-12T16:43:38.060
> 
> 标签：html, css

我有一个包含一个表格的 div，该表格有另一个带有动态变化文本的 div。div 有样式

```
overflow: hidden;
white-space: nowrap;
text-overflow: ellipsis; 
```

所以我希望当文本比 div 更宽时，它会在最后显示“...”，但实际上，表格宽度会大于容器 div，这真的很奇怪。

如果我在 px 或 pt 中设置单元格最大宽度，其中包含带有文本的 div，那么工作正常，但这不是一个选项。

如何将表格设置为跟随容器 div 的宽度并且永远不会大于该宽度？

一些示例代码[位于 JSFiddle 中](http://jsfiddle.net/DrUrV/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:58:07.023

摆脱`#c121`div 的宽度，除非你坚持拥有它。

表只符合它们的内容，而不符合它们的包装器。

由于它是生成的标记，您是否能够添加一些`class`或`properties`元素？

# c - 在 C 中，我如何编码每个输入的数字都变成自己的变量？

> ID：14837450
> 
> 赞同：-1
> 
> 时间：2013-02-12T16:43:48.033
> 
> 标签：c, variables

我需要制作一个用户输入数字的程序（例如 193643，在一行中）。然后将每个数字（例如“1”“9”“3”等）转换为自己的变量。

我该怎么做？

我没有尝试，因为我不明白，我会尽力解释。

如同...

```
 printf("Please enter three numbers: ");
 scanf("%d",&number1); 
```

用户类型 137

而不是输入 137 并将其变为变量。我需要这样做，如果该人输入像 137 这样的数字，程序将“1”作为变量，“3”作为另一个变量，“7”作为最后一个变量。它必须在一行中...

所以而不是问三遍......

```
 printf("Please enter 1st numbers: ");
 scanf("%d",&number1);
 printf("Please enter 2nd numbers: ");
 scanf("%d",&number2);
 printf("Please enter 3rd numbers: ");
 scanf("%d",&number3); 
```

让它在一行中询问一次并将每个数字记录为一个变量......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:48:08.747

如果我理解您的问题，您正在尝试提取每个数字并将其存储到变量中。一个小例子如下

```
#include <stdio.h> 
#include <string.h>
#include <stdlib.h>

int main(int argc, char* argv[])
{ 
    char inpString[20];
    int num;

    strcpy(inpString, argv[1]);
    num = atoi(inpString);
    printf("Number: %d\n", num);

    while(num > 0) 
    {
        printf("%d\n", (num % 10));
        num = num / 10;
    }
    printf("Size of void *: %d\n", sizeof(void *));

return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:52:50.023

我想通了谢谢大家！它只需要一些简单的问题解决，我会分享以防万一其他人也试图解决它....

注意：separate 只是我创建的一个变量，用于将每个数字一一分开。我将所有变量都设为整数。

对于此示例，单独 = 137。

```
lastDigit = separate % 10;
separate = separate / 10; 
secondDigit = separate % 10; 
separate = separate / 10; 
firstDigit = separate % 10; 
```

7 存储在 lastDigit 中。然后从单独的变量（137 到 13）中去掉 7。

3 存储在 secondDigit 中。然后从单独的变量（13 到 1）中减去 3。

1 存储在 firstDigit 中。

# c - 如何使用 RAW 套接字嗅探所有 ICMP 数据包

> ID：14837453
> 
> 赞同：1
> 
> 时间：2013-02-12T16:43:58.413
> 
> 标签：c, linux, sockets, raw-sockets

我正在学习 RAW 套接字。在下面的代码中，我试图打印所有 ICMP 数据包头信息。看起来代码中有一些错误。任何人都可以请帮助我哪里错了。

```
# include <unistd.h>
# include <sys/socket.h>
# include <sys/types.h>
# include <string.h>
# include <netinet/in.h>
# include <stdio.h>
# include<stdlib.h>

main(){
int sockfd,retval,n;
socklen_t clilen;
struct sockaddr_in cliaddr, servaddr;
char buf[10000]; 

sockfd = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);
if (sockfd < 0){
    perror("sock:");
    exit(1);
}
clilen = sizeof(struct sockaddr_in);    
while(1){
    printf(" before recvfrom\n");   
    n=recvfrom(sockfd,buf,10000,0,(struct sockaddr *)&cliaddr,&clilen);
    printf(" rec'd %d bytes\n",n);
    buf[n]='\0';
    printf(" msg from client = %s\n",buf);
}
}

o/p

before recvfrom
rec'd 60 bytes
msg from client = E
before recvfrom
rec'd 52 bytes 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T17:12:58.457

您正在尝试将原始数据包数据（包括标头）打印为字符串。在这种情况下，`E`ascii`0x45`是 IP 标头的第一个字节。高 4 位表示“IPv4”，低 4 位是 IHL（IP 标头中 32 位字的数量），即 5*4 = 20 字节。

要正确访问这些数据，您应该使用 linux 提供的 IP/ICMP 标头结构。我已经更新了你的代码来说明：

```
# include <unistd.h>
# include <sys/socket.h>
# include <sys/types.h>
# include <string.h>
# include <netinet/in.h>
# include <stdio.h>
# include<stdlib.h>

#include <netinet/ip.h>
#include <netinet/ip_icmp.h>

main(){
  int sockfd,retval,n;
  socklen_t clilen;
  struct sockaddr_in cliaddr, servaddr;
  char buf[10000]; 
  int i;

  sockfd = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);
  if (sockfd < 0){
    perror("sock:");
    exit(1);
  }
  clilen = sizeof(struct sockaddr_in);    
  while(1){
    printf(" before recvfrom\n");   
    n=recvfrom(sockfd,buf,10000,0,(struct sockaddr *)&cliaddr,&clilen);
    printf(" rec'd %d bytes\n",n);

    struct iphdr *ip_hdr = (struct iphdr *)buf;

    printf("IP header is %d bytes.\n", ip_hdr->ihl*4);

    for (i = 0; i < n; i++) {
      printf("%02X%s", (uint8_t)buf[i], (i + 1)%16 ? " " : "\n");
    }
    printf("\n");

    struct icmphdr *icmp_hdr = (struct icmphdr *)((char *)ip_hdr + (4 * ip_hdr->ihl));

    printf("ICMP msgtype=%d, code=%d", icmp_hdr->type, icmp_hdr->code);
  }
} 
```

现在，如果我运行它并且`ping 127.0.0.1`: 你会看到这样的输出：

```
 before recvfrom
 rec'd 84 bytes
IP header is 20 bytes.
45 00 00 54 00 00 40 00 40 01 3C A7 7F 00 00 01
7F 00 00 01 08 00 A9 DF 11 66 00 01 9A 77 1A 51
00 00 00 00 BA 1D 0F 00 00 00 00 00 10 11 12 13
14 15 16 17 18 19 1A 1B 1C 1D 1E 1F 20 21 22 23
24 25 26 27 28 29 2A 2B 2C 2D 2E 2F 30 31 32 33
34 35 36 37 
ICMP msgtype=8, code=0 before recvfrom
 rec'd 84 bytes
IP header is 20 bytes.
45 00 00 54 8D F3 00 00 40 01 EE B3 7F 00 00 01
7F 00 00 01 00 00 B1 DF 11 66 00 01 9A 77 1A 51
00 00 00 00 BA 1D 0F 00 00 00 00 00 10 11 12 13
14 15 16 17 18 19 1A 1B 1C 1D 1E 1F 20 21 22 23
24 25 26 27 28 29 2A 2B 2C 2D 2E 2F 30 31 32 33
34 35 36 37 
ICMP msgtype=0, code=0 before recvfrom 
```

这里显示了一个 msgtype 8（回显请求）和一个 msgtype 0（回显回复）。请注意，当以这种方式从数组访问数据时，您可能会遇到对齐问题（x86/x64 很乐意为您处理它，但其他架构可能不会那么慷慨）。我将把它作为练习留给读者；）。

# android - 我杀死后Android媒体音量被锁定

> ID：14837455
> 
> 赞同：0
> 
> 时间：2013-02-12T16:44:01.503
> 
> 标签：android, volume, android-audiomanager, locked

我的应用程序中有一个巨大的错误。完成应用程序后，音量被静音并被锁定。

即使我退出并重新启动应用程序，音量仍被锁定为静音。恢复音量的唯一方法是重启手机。请帮忙！该应用程序是 2 `webviews`，其中一个`webviews`是`video stream`.

每次我按下音量按钮时，日志都会这样说：

```
02-12 11:45:12.939: V/AudioHardwareMSM76XXA(115): AudioHardware::getParameters()
Fm-radio=

02-12 11:37:29.639: D/LKW(198): mShowing= false mNeedToReshowWhenReenabled= false
mUpdateMonitor.isDeviceProvisioned()= true 
```

我的音频管理器方法：

```
@Override
protected void onPause() {
    super.onPause();
    am = (AudioManager) getSystemService(AUDIO_SERVICE);
    am.setStreamMute(AudioManager.STREAM_MUSIC, true);
    lock.release();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    am = (AudioManager) getSystemService(AUDIO_SERVICE);
    am.setStreamMute(AudioManager.STREAM_MUSIC, false);
    lock.acquire();

}
** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:47:13.000

尝试将您在 onPause 上使用的相同代码添加到您的 onDestroy 方法，即使应用程序崩溃它也应该有所帮助： **请注意，它并不一定会被调用，但在大多数情况下它确实如此**

```
protected void onDestroy(){
      super.onDestroy();
       am = (AudioManager) getSystemService(AUDIO_SERVICE);
       am.setStreamMute(AudioManager.STREAM_MUSIC, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:14:02.537

事实证明，某些事情导致任务没有被杀死。它正在窃听手机音量，并且应用程序在后台运行并消耗 RAM 和电池。我通过自己杀死所有任务来解决它。

将 KILL_BACKGROUND_PROCESSES 添加到清单中。然后杀死任务。

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    final ActivityManager amm = (ActivityManager)Class.this.getSystemService(Activity.ACTIVITY_SERVICE);
    amm.restartPackage("com.liyicky.dbzhd");
    amm.killBackgroundProcesses("com.liyicky.dbzhd");

} 
```

# drupal - 使用 Drupal/Openlayers 的动态可排序/可过滤地图 - 如何？

> ID：14837459
> 
> 赞同：1
> 
> 时间：2013-02-12T16:44:15.353
> 
> 标签：drupal, drupal-modules, drupal-views, openlayers

我们正在将我们的站点从静态/自定义 jsp 站点转换为 Drupal（目前为 6.2.8）。去年，我们有一张动态地图（见这里： http: [//archive.summer.harvard.edu/help/directions.jsp](http://archive.summer.harvard.edu/help/directions.jsp)）

关键行为是，当您从一个下拉列表中选择某些内容时，另一个会过滤自身以显示“合法”值，并立即更新地图以显示所选建筑物。方向是一个加分项，但这些不是 Drupal 版本的计划。

我的数据/视图的结构如下：我有一个包含建筑物名称、类型、纬度/经度和位置数据的建筑物内容类型。我有两个 openlayers 视图 - 一个用于地图数据，它接受一个 nid 作为参数并针对构建节点进行过滤，并公开了类型和名称的过滤器。另一个是地图视图本身，它设置为使用“块中的暴露过滤器”并接受一个nid作为参数。

我已经能够非常接近使用 OpenLayers 和视图，但我在此过程中发现了一些绊脚石。具体来说，如果我对我的类型和建筑下拉菜单使用公开的过滤器，我需要提交表单并重新加载页面以刷新地图。

我真的希望我能够在过渡到 Drupal 的过程中保持旧地图的 ajaxy 行为。所以我想到了一些选项，但没有一个效果很好：

*   由于地图视图本身需要一个 nid 参数，也许我根本不需要过滤器。如果我创建了一个不同的视图，其中只有选择输入，每个视图都有某种 onselect 将 nid 发送到地图怎么办？（例如，我可以使用视图作为 json 数据源使用 jquery UI 自动完成来构建它们）

*   也许有某种方法可以使用面板在视图之间传递参数？（但它可以在不重新加载页面的情况下动态完成吗？）

*   我只是把这一切都错了，我应该回到自定义编码我的地图客户端吗？

# html - 单击按钮时清除文本字段

> ID：14837466
> 
> 赞同：18
> 
> 时间：2013-02-12T16:44:37.740
> 
> 标签：html

我有两个文本标签：

```
<div>           
    <input type="text" id="textfield1" size="5"/>
</div>

<div>          
    <input type="text" id="textfield2" size="5"/>           
</div> 
```

我想要一个名为“清除”的按钮，可以删除这两个字段。

据我所知，我知道要实现一个按钮，我应该使用如下代码：

```
<div>      
    <input type="button" value="Clear Fields" onclick=SOMETHING />
</div> 
```

关于如何实施的任何线索`SOMETHING`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-12T16:48:33.393

一个简单的 JavaScript 函数就可以完成这项工作。

```
function ClearFields() {

     document.getElementById("textfield1").value = "";
     document.getElementById("textfield2").value = "";
} 
```

只需让您的按钮调用它：

```
<button type="button" onclick="ClearFields();">Clear</button> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-12T16:49:30.480

一个简单的重置按钮怎么样？

```
<form>

  <input type="text" id="textfield1" size="5">
  <input type="text" id="textfield2" size="5">

  <input type="reset" value="Reset">

</form> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-16T14:14:38.217

如果你想重置它，那么简单的使用：

```
<input type="reset" value="Reset" /> 
```

但请注意，**它不会清除具有 default 的文本框`value`**。例如，如果我们有以下文本框，并且默认情况下，它们具有以下值：

```
<input id="textfield1" type="text" value="sample value 1" />
<input id="textfield2" type="text" value="sample value 2" /> 
```

因此，要清除它，请使用 javascript 对其进行补充：

```
function clearText()  
{
    document.getElementById('textfield1').value = "";
    document.getElementById('textfield2').value = "";
} 
```

并将其附加到`onclick`重置按钮：
`<input type="reset" value="Reset" onclick="clearText()" />`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T16:47:58.407

像这样的东西会添加一个按钮，让你用它来清除值

```
<div>           
<input type="text" id="textfield1" size="5"/>         
</div>

<div>          
<input type="text" id="textfield2" size="5"/>           
</div>

<div>
    <input type="button" onclick="clearFields()" value="Clear">
</div>

<script type="text/javascript">
function clearFields() {
    document.getElementById("textfield1").value=""
    document.getElementById("textfield2").value=""
}
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-12T13:11:16.237

If you are trying to "Submit and Reset" the the "form" with one Button click, Try this!

Here I have used jQuery function, it can be done by simple JavaScript also...

```
 <form id="form_data">
           <input type="anything"  name="anything" />
           <input type="anything"  name="anything" />

             <!-- Save and Reset button -->
           <button type="button" id="btn_submit">Save</button>
           <button type="reset" id="btn_reset" style="display: none;"></button>
        </form>

<script type="text/javascript">
$(function(){
    $('#btn_submit').click(function(){
        // Do what ever you want
       $('#btn_reset').click();  // Clicking reset button
    });
});
</script> 
```

# regex - pgrep -f 带多个参数

> ID：14837475
> 
> 赞同：14
> 
> 时间：2013-02-12T16:45:05.147
> 
> 标签：regex, bash, shell, grep

我试图找到一个包含术语“someWord”和其他两个由 $1 和 $2 表示的术语的特定进程

```
 7   regex="someWord.*$1.*$2"
 8   echo "$regex"
 9   [ `pgrep -f $regex` ] && return 1 || return 0 
```

返回

```
./test.sh foo bar
someWord.*foo bar.*
./test.sh: line 9: [: too many arguments 
```

我的正则表达式会怎样？直接在 shell 中执行 pgrep 可以正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T16:47:57.747

好先生，也许这个

```
[[ `pgrep -f "$regex"` ]] && return 1 || return 0 
```

或这个

```
[ "`pgrep -f '$regex'`" ] && return 1 || return 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:54:41.207

首先，没有理由将您的`pgrep`命令包装在任何东西中。只需使用其退出状态：

```
pgrep -f "$regex" && return 1 || return 0. 
```

如果`pgrep`成功，您将返回 1；否则，您将返回 0。但是，您所做的只是反转预期的退出代码。您可能想要做的只是让`pgrep`函数成为您的函数的最后一个语句；那么退出代码`pgrep`将是您的函数的退出代码。

```
something () {
   ...
   regex="someWord.*$1.*$2"
   echo "$regex"
   pgrep -f $regex
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:57:58.473

如果你真的想做一些事情以防你的命令返回错误：

```
cmd="pgrep -f $regex"

if ! $cmd; then
  echo "cmd failed."
else
  echo "ok."
fi 
```

# c - 手动安装的 SEH 在内部块中不起作用

> ID：14837476
> 
> 赞同：3
> 
> 时间：2013-02-12T16:45:12.830
> 
> 标签：c, winapi, seh

在阅读[了速成课程](http://www.microsoft.com/msj/0197/exception/exception.aspx) 和这里的一些帖子之后，我实现了一个非常基本的版本。我唯一的要求是能够“捕获”任何异常（只有“Win32”，因为我不抛出/引发任何异常）并退出引发它的线程。我有一个正确原型化的函数，它只调用'ExitThread'，还有一个'EXCEPTION_REGISTRATION'结构，它在它的处理程序属性中，以及在前一个属性中的实际前一个句柄。我设置这个处理程序的方法是调用：

```
BOOL set_my_handler(){
EXCEPTION_REGISTRATION* p_excep = &excep // excep is a global static EXCEPTION_REGISTRATION
__asm{
      mov EAX, p_excep
      mov FS:[0],EAX
 }
 ...
 } 
```

**问题：** 当我导致异常时（比如：

```
* (dword*) 0 = 0;) 
```

在我调用 set_my_handler 的同一范围内，我的处理程序按预期调用。但是，如果我在内部块中导致相同的异常，通过调用执行它的函数，它就是行不通的。我得到未处理的异常消息框。在调试时，我注意到 FS:[0] 在内部函数中保持不变（指向我的处理程序）。顺便说一句，我没有使用任何（try/catch 或 try/_except 在我的代码中）

感谢您的帮助，谢谢。

**我的问题的答案**（感谢*Raymond Chen*）：事实证明，异常注册实体必须在堆栈上分配，因为有一种安全机制可以根据堆栈段寄存器验证其位置。

# sql - 覆盖 Sub finalize 以确保关闭与数据库的连接

> ID：14837481
> 
> 赞同：0
> 
> 时间：2013-02-12T16:45:30.733
> 
> 标签：sql, database, vb.net, visual-studio-2010

我正在连接到 Access 数据库，我想知道在我的 cconnectionDB.vb 中覆盖 Sub finalize 是否有用：

```
Imports System.Data.SqlClient
Imports System.Data.Common
Imports System.IO

Public Class DbConn
    Private DataCon As DbConnection
    Private DBConnectionOpen As Boolean = False

     Protected Overrides Sub finalize()
            Try
                DataCon.Close()
            Catch ex As Exception

            End Try
        End Sub

    Public Sub OpenDatabaseConnection()
        Try
            DataCon.Open()
        Catch ex As Exception
            Throw New System.Exception("Error opening data connection.", ex.InnerException)
            DBConnectionOpen = False
            Exit Sub
        End Try
        DBConnectionOpen = True
    End Sub 

    Public Sub CloseDatabaseConnection()
        DataCon.Close()
        DBConnectionOpen = False
    End Sub

   ''' <summary>
    ''' Creates a new connection to an Access database
    ''' </summary>
    ''' <param name="FileName">The full path of the Access file</param>
    ''' <remarks></remarks>
    Public Sub New(ByVal FileName As String)
        'Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccess2007file.accdb;Persist Security Info=False;
        Dim fileData As FileInfo = My.Computer.FileSystem.GetFileInfo(FileName)
        DataCon = New OleDb.OleDbConnection
        Dim csb As OleDb.OleDbConnectionStringBuilder = New OleDb.OleDbConnectionStringBuilder
        csb.ConnectionString = "Data Source=" & FileName
        Select Case fileData.Extension.ToLower
            Case ".mdb" : csb.Add("Provider", "Microsoft.Jet.Oledb.4.0")
            Case ".accdb" : csb.Add("Provider", "Microsoft.ACE.OLEDB.12.0")
        End Select
        DataCon.ConnectionString = csb.ConnectionString
        Try
            DataCon.Open()
            DataCon.Close()
        Catch ex As Exception
            Throw New System.Exception("Unable to connect to database.", ex.InnerException)
        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:48:46.980

这不是非常有用。在`Finalize`垃圾收集器开始销毁对象之前，不会调用解构器。而且，由于该`DbConn`对象将是唯一引用该`DbConnection`对象的事物，因此无论如何它都会同时自动销毁该对象。如果您想在完成连接后立即释放连接，推荐的方法是`IDisposable`在您的类中实现接口。例如：

```
Private Class DbConn
    Implements IDisposable

    Private DataCon As DbConnection
    Private disposedValue As Boolean

    Protected Overridable Sub Dispose(disposing As Boolean)
        If Not Me.disposedValue Then
            If disposing Then
                Try
                    DataCon.Close()
                Catch ex As Exception
                End Try
            End If
        End If
        disposedValue = True
    End Sub

    Public Sub Dispose() Implements IDisposable.Dispose
        Dispose(True)
        GC.SuppressFinalize(Me)
    End Sub
End Class 
```

但是，如果您实施`IDisposable`，您的工作并没有在那里完成。对象上的`Dispose`方法`IDisposable`永远不会被自动调用。您需要通过手动调用 Dispose 方法来告诉对象何时使用完毕。或者，您可以使用`Using`块：

```
Using d As New DbConn
    ' The DbConn.Dispose method automatically gets called once execution leaves this Using block
End Using 
```

# c++ - 从文本文件读入向量

> ID：14837484
> 
> 赞同：0
> 
> 时间：2013-02-12T16:45:37.537
> 
> 标签：c++

我很难理解为什么我的代码不起作用。有问题的部分是当我将文本文件中的值传递到我的等级变量时。我不明白为什么这是错误的。除此以外，我的代码中的其他所有内容都很好，但无论如何我都包含了它。

```
string fileName;

cout << "Program that takes data from file and calculate\nmean and standard deviation and put it in file out.txt\n";
cout << "Enter the input file name ";
cin  >> fileName;
  double grade;
ifstream inData;

inData.open(fileName.c_str());

//  Declare vector<double> vecx
vector<double> vecx;
//  read data from input file to vector vecx,
while(inData >> grade)
{
    vecx.push_back(grade);
}

inData.close(); 
//  keep track how many elements you read from file
//  When you done with reading from file, close stream inData 
```

如果您有兴趣，这里是完整的代码。

```
#include <iostream>
#include <fstream>
#include <vector>
#include <cmath>

using namespace std;

int main()
{
    string fileName;

    cout << "Program that takes data from file and calculate\nmean and standard deviation and put it in file out.txt\n";
    cout << "Enter the input file name ";
    cin  >> fileName;
      double grade;
    ifstream inData;

    inData.open(fileName.c_str());

    //  Declare vector<double> vecx
    vector<double> vecx;
    //  read data from input file to vector vecx,
    while(inData >> grade)
    {
        vecx.push_back(grade);
    }

    inData.close(); 
    //  keep track how many elements you read from file
    //  When you done with reading from file, close stream inData

    // read element by element  in vector vecx  and calculate sum;
    double sum=0;
    double average;
    for (int i=0; i < vecx.size(); i++)
        sum=sum+vecx[i];

    average=sum/(vecx.size());
    // sum divide by number of elements to find mean(average)

    //again read element by element and calculate
    //square of difference between element and mean
    //calculate sum of squares of differences
    //divide by number of elements and
    //take square root - you got the standard deviation

    sum=0;
    double variance, stdev;
    for (int i=0; i < vecx.size(); i++)
        sum=sum+(vecx[i]-average*vecx[i]-average);

    variance=sum/(vecx.size());
    stdev=sqrt(variance);

    //open output stream
    ofstream outData;
    outData.open("out.txt");
    //output  mean and standard deviation

    cout << "Average is " << average << endl;
    cout << "Standard deviation is " << stdev << endl;

    //close stream
    outData.close();
} 
```

我觉得自己像个白痴，因为我不明白为什么这不起作用……我应该能够弄清楚，但我没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T16:53:08.193

C++ 遵循先例的正常数学顺序。

这一行：

```
sum=sum+(vecx[i]-average*vecx[i]-average); 
```

看起来不正确。乘法发生在减法之前，因此它正在计算：

```
sum=sum+((vecx[i]-(average*vecx[i]))-average); 
```

但大概你的意思是：

```
sum=sum+((vecx[i]-average)*(vecx[i]-average)); 
```

您可能有兴趣查看[优先顺序的完整列表](http://en.cppreference.com/w/cpp/language/operator_precedence)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T16:55:16.680

您永远不会将数据写入文件。使用你的`ofstream outData`而不是`std::cout`. 否则，您只是将输出发送到控制台。

```
//open output stream
ofstream outData;
outData.open("out.txt");
//output  mean and standard deviation

outData << "Average is " << average << endl;
outData << "Standard deviation is " << stdev << endl;

//close stream
outData.close(); 
```

# scala - 为什么 Scala Map 是自动导入的，而 HashMap 不是？

> ID：14837485
> 
> 赞同：5
> 
> 时间：2013-02-12T16:45:38.450
> 
> 标签：scala, scala-collections

如果我们使用地图，则无需导入不可变**地图**

```
scala> val map=Map[String,Int]()
map: scala.collection.immutable.Map[String,Int] = Map() 
```

但是如果我们使用 HashMap，那么不做 import 就会报错。

```
scala> val a=HashMap[Int,Int]()
 <console>:7: error: not found: value HashMap
       val a=HashMap[Int,Int]()
             ^ 
```

但是做import scala.collection.immutable.HashMap，它可以工作。

我也看到它与 Set 和 Hashset..

我注意到一件事 Map 和 Set 是 trait 而 HashSet,HashMap 是类。

那为什么会这样？？？

**编辑**

scala.collection 包中也存在类 Stack 和 Queue。那为什么我们需要导入这些类。？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T16:55:48.790

[*编程到接口，而不是实现*](https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean)。Scala 设计人员通过在 Predef 中提供接口的快捷方式来鼓励这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T16:47:59.450

这是因为[`Predef`](http://www.scala-lang.org/api/current/index.html#scala.Predef%24)是隐式导入的。其中，它包含常见特征的工厂方法，例如[`Map`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Map%24). [`HashMap`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.HashMap)是一个具体的实现，因此如果您将其工厂方法与类型推断一起使用，您会将您的声明与实现紧密耦合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:55:01.847

在 Scala 中，习惯使用不可变类型，因此默认情况下这些类型可用。如果你想要突变，你必须明确地说出来。

另一个潜在的原因（我只是在猜测）是 HashMap*是*一个 Map，在许多情况下，您并不真正关心 Map 的具体实现，您只需要可以将键与值相关联并且具有相当快的东西查找。所以说 Map("foo" -> "bar") 比 HasArrayMappedTrie("foo" -> "bar") 更抽象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T16:56:44.070

它可能与这个集合类的层次结构有关：

![在此处输入图像描述](../Images/ccb2400bdffd17c37517b8c65d8637cd.png)

# c# - 电子邮件文件根目录的 SQL Server 2005 文本编目？

> ID：14837490
> 
> 赞同：0
> 
> 时间：2013-02-12T16:45:49.260
> 
> 标签：c#, sql-server-2005, search-engine, email-client, file-search

我正在寻找一种解决方案，为我工作的公司搜索电子邮件文件以查找定制的电子邮件套件（类似于呼叫中心，但用于电子邮件而不是电话）。

我遇到的问题是当我想要执行电子邮件搜索（正文）时，遍历目录并查找字符串需要很长时间，而目录包含数千个文件。不幸的是，这些文件与执行搜索的客户端 PC 不在同一个系统上。

但是，拥有这些文件的 PC 位于运行电子邮件服务的同一系统上。我决定只将非常重要的信息放入数据库（电子邮件 ID、线程 ID、主题、收件人、发件人、接收日期）。我已决定不将正文放在数据库中，并且我为此使用的库（OpenPop）无法轻松从数据库中提取数据以生成“消息”对象，而无需将整个文件放入单个文件中柱子。

有没有一种简单的方法可以在 SQL Server 2005 上设置文件编目？或者是否有更好的方法来为此提供搜索功能？不幸的是，我没有太多的开发时间来从头开始创建自定义搜索引擎，而且我们不会购买专有软件来完成此操作。

我已经看到了一些基于 Java 和 Web 的解决方案，但我正在研究 SQL Server 解决方案，或者可能使用我们在这里使用的语言（C#/.NET 4.0）来实现解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:26:19.040

SQL Server 确实为表中包含的数据提供了全文搜索工具。它不支持对外部数据进行全文搜索。

如果您不想使用其他库进行基于文件的搜索，我建议将数据填充到表中并使用 sql server 提供的全文搜索工具，它们不难使用，也不昂贵（尤其是因为您已经拥有 sql服务器）并且应该很快集成。唯一的缺点是增加了磁盘空间的使用。

磁盘往往很便宜，所以这应该不是问题，除非您使用的是昂贵的主机。

# java - 捕获图像并将它们仅存储在 android 的 apk 中？

> ID：14837491
> 
> 赞同：1
> 
> 时间：2013-02-12T16:45:50.227
> 
> 标签：java, android, android-intent, camera, assets

我想使用设备摄像头并捕获图像，而不是将其转换为质量较低的图像并将该图像存储在“资产”中而不是手机中。

我不期待完整的代码，但总的来说这个想法会很棒。

主要问题是如何将图片从拍照到资产，以便我可以使用它。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:57:19.047

不，你不能那样做......在构建 apk 之后，你不能在运行时在其中插入任何东西。您只能将数据保存在内部存储器或外部存储器上，但**不能保存在 apk 内部（通过任何机制）**

# web-applications - 将大菜单迁移到引导程序

> ID：14837494
> 
> 赞同：0
> 
> 时间：2013-02-12T16:46:10.770
> 
> 标签：web-applications, user-interface, twitter-bootstrap, menu

我正在寻找将我的[django 出勤应用程序](http://code.google.com/p/ghap/)迁移到引导 UI。这个应用程序在一个大菜单中有很多选项分类：

![ghap 菜单截图](../Images/5691f604869ae1b42d8e54c153a451cc.png)

我知道引导程序支持子菜单并且可以成为一种解决方案。但我想知道是否存在一些更优雅的方法。

此外，移动友好的解决方案将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T06:09:08.870

免费的 CSS BigMenu 代码与 Bootstrap 集成，这里是代码/示例链接：

[http://www.bootply.com/g53fBbpDYE](http://www.bootply.com/g53fBbpDYE)

# c# - 如何从另一个dll监视变量的变化？

> ID：14837508
> 
> 赞同：0
> 
> 时间：2013-02-12T16:47:00.850
> 
> 标签：c#, wpf, multithreading, variables, event-handling

这是我没有想到的：我希望我的主程序监视来自另一个 dll（线程）的变量；该变量是一个`bool`标志，根据外部硬件触发器在真假之间变化。这是我所做的，但显然它没有响应变量的变化：

```
public bool IsTriggerOn
{
    get { return TriggerWatcherDll.IsTriggerOn; }
    set
        {
             _isTriggerOn= TriggerWatcherDll.IsTriggerOn = value;
             if (_isTriggerOn == true)
             {
                  System.Windows.Forms.MessageBox.Show("Trigger is ON!");
             }
         }
} 
```

我应该怎么做？谢谢。

我正在使用 C# + WPF，上面的代码来自 xaml 后面的 C# 代码；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:20:56.140

看起来你可能会有点困惑。根据您提供的代码示例，TriggerWatcherDll 类位于不同程序集中的事实似乎并不相关。
实际上，看起来您正在将 IsTriggerOn 作为类的静态属性访问（基于使用的命名），因此不同的线程也与检测更改无关（尽管可能存在竞争条件）。

根据您的描述，听起来您只需要“其他” DLL 中的一个事件：

```
class TriggerWatcherDll
{
    public static event EventHandler TriggerChanged;

    private static bool _trigger = false;
    public static bool IsTriggerOn
    {
        get { return _trigger; }
        set
        {
            if (_trigger != value)
            {
                _trigger = value;
                if (TriggerChanged != null)
                    TriggerChanged.Invoke(null, new EventArgs());
            }
        }
    }
} 
```

然后只需订阅主 DLL 中的事件：

```
class OtherDll
{
    public OtherDll()
    {
        TriggerWatcherDll.TriggerChanged += TriggerWatcherDll_TriggerChanged;
    }

    void TriggerWatcherDll_TriggerChanged(object sender, EventArgs e)
    {
        if (TriggerWatcherDll.IsTriggerOn)
            System.Windows.Forms.MessageBox.Show("Trigger is ON!");
    }
} 
```

不过，您可能想重新考虑使用静态，而且我还没有涉及线程问题。

# emacs - Xemacs 中的字符串插入矩形等效项

> ID：14837511
> 
> 赞同：1
> 
> 时间：2013-02-12T16:47:11.700
> 
> 标签：emacs, xemacs

在 Emacs 上，我可以使用 string-insert-rectangle 覆盖矩形选择的文本。我想知道 Xemacs 中是否有类似的东西（使用 Xemacs 21.4.22）。我目前必须分两步执行此操作。1) 删除我要替换的文本 2) 为我要添加的文本添加前缀。我想像在 Emacs 中一样将此作为单步问题。感谢您的任何提示。G

# youtube-api - 页面令牌使用 youtube api v3

> ID：14837516
> 
> 赞同：7
> 
> 时间：2013-02-12T16:47:27.993
> 
> 标签：youtube-api

我正在使用 youtube api v3 并希望从查询中检索 50 多个结果。[如果您使用 pagetokens，](https://stackoverflow.com/questions/13175190/is-youtube-data-api-paging-consistent-if-you-use-pagetokens-v3-data-api)我已经阅读了youtube 数据 api 分页是否一致？[(v3 data api)](https://stackoverflow.com/questions/13175190/is-youtube-data-api-paging-consistent-if-you-use-pagetokens-v3-data-api)这与我的问题非常相似，但它并没有给出我想知道的所有内容。

无论如何，这是我想知道的：

因此您可以使用 pagetoken 对结果进行分页，并且不保证排序。但这究竟意味着什么：如果我查询“奥巴马”的观看次数最多的视频，我将获得 50 个第一个结果，然后是下一页的标记。

1.  想象一下同时查看次数发生变化，使用 pagetoken 会在页面中列出什么？第一个查询对应的50个next结果？50 个结果出现在观看次数更改后的最后一个视频项目之后？

2.  另外，在检索下一页时，我需要保留关键字字段还是 pagetoken 足够？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T17:08:37.867

即使不是 100% 的保证，pagetokens 也会给你一致的结果。

1.  与第一个查询对应的下一个结果将是 50 个。

2.  您仍然需要保留关键字，还需要添加页面令牌“ [https://developers.google.com/youtube/v3/docs/search/list#pageToken](https://developers.google.com/youtube/v3/docs/search/list#pageToken) ”

# javascript - 如何防止由 box-shadow 引起的悬停状态不断切换？

> ID：14837522
> 
> 赞同：2
> 
> 时间：2013-02-12T16:47:55.623
> 
> 标签：javascript, jquery, html, css

[看看这个 jsFiddle！](http://jsfiddle.net/dnGQE/1/)我正在使用 box-shadow 来获得 groovy 3D 外观（别担心，我在真实版本中使用了不同的颜色），但是当您将鼠标悬停在 box-shadow 线上时，悬停状态会不断切换，即超级烦人。你必须对你的鼠标有点特殊才能做到这一点，但尽管如此，我不喜欢它。我曾尝试使用 jQuery hover() 和 hoverIntent() 减慢切换速度但不能解决问题。一个潜在的原因是悬停时的负边距顶部，但我不想摆脱这个。任何想法都非常感谢，谢谢。

HTML：

```
<div class="navLink">
    <a>Samples</a>
</div>
<div class="navLink">
    <a>HTML</a>
</div> 
```

CSS：

```
.navLink {
    height: 100%;
    float: left;
}
.navLink a {
    display: block;
    padding: 14px 10px 16px 10px;
    color: gray;
    font-size: 17px;
    background: aqua;
}
.navLink a:hover {
    box-shadow: inset 0px 0px 8px -1px blue, 0px 1px 0px 0px green, -1px 1px 0px 0px blue, -1px 2px 0px 0px green, -2px 2px 0px 0px blue, -2px 3px 0px 0px green, -3px 3px 0px 0px blue;
    cursor: pointer;
    margin: -3px -3px 0px 3px;
    background: blue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:52:24.513

编辑：固定高度也是必要的，如评论中所述（感谢 Blazemonger）：

切换这个：

```
.navLink {
    height: 100%;
    float: left;
}
.navLink a:hover {
    box-shadow: inset 0px 0px 8px -1px blue, 0px 1px 0px 0px green, -1px 1px 0px 0px blue, -1px 2px 0px 0px green, -2px 2px 0px 0px blue, -2px 3px 0px 0px green, -3px 3px 0px 0px blue;
    cursor: pointer;
    margin: -3px -3px 0px 3px;
    background: aqua;
} 
```

对此：

```
.navLink {
    height: 100px;
    float: left;
}
.navLink:hover a {
    box-shadow: inset 0px 0px 8px -1px blue, 0px 1px 0px 0px green, -1px 1px 0px 0px blue, -1px 2px 0px 0px green, -2px 2px 0px 0px blue, -2px 3px 0px 0px green, -3px 3px 0px 0px blue;
    cursor: pointer;
    margin: -3px -3px 0px 3px;
    background: aqua;
} 
```

这样，悬停将应用于悬停时的整个项目，而不仅仅是 a 标签。我更新了你的 jsFiddle，以确保它适用于你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:58:40.840

I'd recommend using jQuery `.hover()` and assigning/removing a class on the **parent** --

I know you said you tried jQuery already, but you probably used it on the `a` -- the problem is that your `a` element moves, but the parent will not move, so use the parent's static position to fix your issue.

Your css would then be kind of like this:

```
.navLink a {
    display: block;
    padding: 14px 10px 16px 10px;
    color: gray;
    font-size: 17px;
    background: aqua;
}
.navLink-hover a, .navLink a:hover {
    box-shadow: inset 0px 0px 8px -1px blue, 0px 1px 0px 0px green, -1px 1px 0px 0px blue, -1px 2px 0px 0px green, -2px 2px 0px 0px blue, -2px 3px 0px 0px green, -3px 3px 0px 0px blue;
    cursor: pointer;
    margin: -3px -3px 0px 3px;
    background: blue;
} 
```

And your jQuery would look like this:

```
$(".navLink-hover").hover( function() {
  $(this).addClass(".navLink-hover");
}, function() {
  $(this).removeClass(".navLink-hover");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:00:36.730

如果将悬停状态更改为父级：

```
.navLink:hover a { 
```

并更改边距，但仅更改底部：

```
margin: -3px -3px 3px 3px; 
```

它工作正常。

如果更改下边距不合适，那么您可以制作不同的布局。唯一的关键点是使 div 的大小保持不变

# javascript - 浮动条形图月份对齐问题

> ID：14837524
> 
> 赞同：3
> 
> 时间：2013-02-12T16:47:58.273
> 
> 标签：javascript, flot

我正在尝试使用 Flot 库绘制月度条形图。与月中心的对齐与 x 轴完全错误。我创建了一个[jsfiddle](http://jsfiddle.net/cDgnE/)来显示问题。

给予时直觉地

```
bars: {
    show: true,
    fillColor: '#4682b4',
    barWidth: 15 * 24 * 60 * 60 * 1000,
    align: 'center'
}, 
```

我想酒吧应该与中心的勾号对齐，但不是！我期待的结果如下：

![在此处输入图像描述](../Images/ca45e5800930d79abd9a37636963c9cc.png)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:05:12.677

不是只显示月份，而是在时间格式中包含 %d，你会看到发生了什么。Flot 通过从轴 min 中减去条形宽度的一半来为居中条形腾出空间。所以条形图居中，但 x 轴刻度不是您所期望的。

我正在调查我们能做些什么；同时，您可以设置一个明确的最小值（这将切断第一个柱或在其左侧添加不需要的空白），或明确提供一个刻度数组。

您可能还想尝试 0.7 而不是 master，因为它可能不会出现此问题。

当我检查完代码后，我会更新这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T12:55:11.993

我有一个类似的问题。请参阅“新”栏。它在 10 月流离失所。

一个解决方案是在 2013-10-01 + (3600 *1000) (3600 sec * 1000 毫秒) 的时间戳上添加 1 小时，然后时间轴在月初的正确位置开始。

# arrays - 如何提高我的域名计数算法的效率？

> ID：14837534
> 
> 赞同：0
> 
> 时间：2013-02-12T16:48:27.043
> 
> 标签：arrays, algorithm, perl, complexity-theory, hash

首先，如果有人问过这个问题，我想道歉。如果不知道如何计算散列引用数组，就很难找到答案

我的函数接收来自 DBI 查询的输出，这是一个包含电子邮件地址的哈希引用数组。任务是按域名保存电子邮件地址的每日计数。我所做的是建立一个域的哈希来计数。关键是该数组预计将存储至少 10,000,000 封电子邮件。该脚本需要几分钟才能运行。

问题是，你能想出一种方法来简化算法吗？

```
my ($data) = shift;
my %elements = ( );

foreach my $row (@$data)
{
    my ($username, $domain) = split(/@/, $row->{addr});
    if (exists($elements{$domain}))
    {
        $elements{$domain}++;
    }
    else
    {
        $elements{$domain} = 1;
    }

} 
```

顺便说一句，我对我的英语感到抱歉，但我不是母语人士。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:53:39.490

您不需要 if/else 逻辑。Perl 足够聪明，可以在您第一次尝试增加尚未在散列中的键（在本例中为域）的计数时将计数设置为 1。

失去如果，保持增量。你可能不会在效率上获得巨大的提高，但你会得到一点点。否则，循环将尽可能紧密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:21:15.817

**如果**字符串仅包含一项，则可以进行一项优化`@`：

```
(split /\@/, $string)[1] 
```

等效于，但效率低于

```
substr $string, 1 + index $string, '@' 
```

如果该行不经常执行，性能提升不会那么显着，但在我刚刚运行的一个非常不科学的基准测试中，执行时间*大致*减半。

另一个区别是 no`@`存在时的行为 -`split`解决方案将给出`undef`，它字符串化为空字符串，但`index`解决方案将给出最后一个字符。

如果您不介意`@`哈希键中的前导，则可以进一步提高效率：

```
substr $string, index $string, '@' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:21:51.653

您的算法已经是 O(N)，这与计数算法的效率差不多。您可以进行微优化，例如消除该`if`子句，但您不会获得任何算法改进。

# javascript - 使用 HTML5 Canvas 对图像/纹理进行透视转换

> ID：14837539
> 
> 赞同：4
> 
> 时间：2013-02-12T16:48:55.347
> 
> 标签：javascript, canvas, html5-canvas

我已使用[此处](http://yuiblog.com/blog/2008/06/23/slicing/)描述的“梯形校正”技术成功地将透视图添加到带有 html5 画布的转动“精装”书页。

本质上发生的是图像/画布元素被定义为源纹理。在每个渲染循环期间，它被分成定义宽度的段（1px 是最好的质量），每个段的高度取决于它在纹理 X 轴上的位置。

这会使用给定的源图像/纹理创建良好的透视错觉，如下所示：

![在此处输入图像描述](../Images/aa113a1133a74be45302de89d6861dff.png)

这对于“硬封面”翻页效果很好，纹理以及任何包含的文本都给人一种很好的透视印象。但是，我需要对“软”翻页应用相同类型的梯形校正。问题是简单的透视变换将不起作用，因为页面本身是用曲线定义的，如下所示：

![在此处输入图像描述](../Images/de227436d169b2b1015a4d0984187cc7.png)

当前，页面纹理在翻页中的任何给定点缩放到曲线的最大高度，页面边缘二次曲线路径设置为剪辑图像/纹理。由于我使用各种标准画布函数动态绘制阴影和分页线，这看起来可以接受，因为分页线（用二次曲线绘制）为翻页提供了自然的视角。

然而，文本本身（来自另一个缓存的画布/图像元素）看起来不够好，始终保持完全平坦。

我想做的是以某种方式应用与上面提到的相同的切片/分段/缩放梯形技术，但以某种方式根据二次曲线（绘制为`ctx.quadraticCurveTo();`）路径和画布内的垂直位置计算每个 1px 段的高度。

在我的示例图像中，它实际上看起来并不算太糟糕，但是当文本接近页面的顶部/底部时，翘曲效果当然应该更大。不仅如此，我们还需要计算一个水平比例因子来压缩最接近页面折叠的文本。

恐怕我真的无法提供任何示例代码。但本质上，我们所做的事情与我在上面提供的链接中描述的关键石化方式非常相似。总结一下，我需要能够使用二次曲线坐标/值来计算切片/渲染函数中每个段的比例因子，如下所示：

```
function keystoneAndDisplayImage(ctx, img, x, y, pixelWidth, scalingFactor) {
        var h = img.height,
             w = img.width,

            // The number of slices to draw.
            numSlices = Math.abs(pixelWidth),

            // The width of each source slice.
            sliceWidth = w / numSlices,

            // Whether to draw the slices in reverse order or not.
            polarity = (pixelWidth > 0) ? 1 : -1,

            // How much should we scale the width of the slice 
            // before drawing?
            widthScale = Math.abs(pixelWidth) / w,

            // How much should we scale the height of the slice 
            // before drawing? 
            heightScale = (1 - scalingFactor) / numSlices;

            for(var n = 0; n < numSlices; n++) {

            // Source: where to take the slice from.
            var sx = sliceWidth * n,
                sy = 0,
                sWidth = sliceWidth,
                sHeight = h;

            // Destination: where to draw the slice to 
            // (the transformation happens here).
            var dx = x + (sliceWidth * n * widthScale * polarity),
                dy = y + ((h * heightScale * n) / 2),
                dWidth = sliceWidth * widthScale,
                dHeight = h * (1 - (heightScale * n));

            ctx.drawImage(img, sx, sy, sWidth, sHeight, 
                          dx, dy, dWidth, dHeight);
        }
    } 
```

...但我真的不知道从哪里开始。任何帮助将不胜感激。

编辑：

对我希望实现的目标进行了更多思考后，我意识到通过这种方法完美表示 3d 纹理映射可能有点过分要求。因此，我会对任何能够根据 html5 画布中定义的二次曲线简单地改变每个段的高度比例和 y 位置的答案感到非常满意。

这是一个更好的示例图像：

![在此处输入图像描述](../Images/9d712201eea0cf3b8b313be584bee248.png)

如您所见，当我需要通过曲线因子及其 y 位置计算 1px 宽度段以使其自然地跟随翻页时，较大的文本保持完全笔直，具有单个非梯形失真图像纹理。在这种情况下，如果没有任何其他“黑客”或方法来实现半现实的透视效果，将会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:07:48.150

我终于找到了解决方案......

感谢这里的精彩答案：[html 二次曲线上的中心点](https://stackoverflow.com/questions/9194558/center-point-on-html-quadratic-curve)

我有必要的方程来获得二次曲线上任何点的 y 值。

然后是一个简单的例子，使用这个 y 值来计算对文本纹理高度的调整。我需要做一些调整来找到最佳的二次曲线计算，但即使是这样，结果也非常棒。

见下图：

![在此处输入图像描述](../Images/c86eb34842b2bccfd13347cc7400d27e.png)

它目前在 Firefox/Chrome 中以大约 60fps 的速度运行，在 IE9/10 中以大约 45fps 的速度运行。我确信有优化的空间，但无论如何我对结果非常满意。显然，它不会按照曲线水平拉伸/挤压纹理，但这样做需要至少额外通过纹理一次，可能更多，这会削弱性能。

另一种选择是求助于实际的仿射 3d 纹理映射，但在我的尝试中，我发现这种方法在性能和质量方面要优越得多，但显然会牺牲一点准确性。

该循环位于我的翻页主渲染循环中，如下所示：

```
 for (var i = 0; i < segments; i++) {
            var sw = i >= segments - 1 ? segmentWidth : segmentWidth + 3;
            var sourceLeft = texw * ((i * segmentWidth) / texw);
            var sourceWidth = texw * (sw / texw)
            var texleft = foldX - foldWidth + (i * segmentWidth);                   
            var percent = ((i * segmentWidth)/foldWidth);
            var curve = self.getQuadraticCurvePoint(foldX - foldWidth, 0, foldX, -verticalOutdent * 2, foldX, 0, percent)
            var curvedheight = self.PAGE_HEIGHT + Math.abs(curve.y*2);
            var y = -((curvedheight - self.PAGE_HEIGHT)/2);

context.drawImage(self.flips[flip.index+1].leftcanvas, sourceLeft, 0, sourceWidth, texh, texleft, y, sw, curvedheight);

    } 
```

相关的二次点函数如下：

```
 getQuadraticCurvePoint : function(startX, startY, cpX, cpY, endX, endY, position) {
            return {
                x:  this.getQBezierValue(position, startX, cpX, endX),
                y:  this.getQBezierValue(position, startY, cpY, endY)
            };
        }, 
```

和：

```
getQBezierValue : function(t, p1, p2, p3) {
                var iT = 1 - t;
                return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;
        }, 
```

# html - 从 QML 调用 HTML 文件和 Javascript

> ID：14837543
> 
> 赞同：0
> 
> 时间：2013-02-12T16:48:59.247
> 
> 标签：html, qml

我有一个需要从 QML 调用的 HTML 文件。我的 HTML 文件使用 ajax 编程。我收到一条错误消息，提示“未定义的变量 $ ajax”。是否有我需要使用的库来解决此问题？

main.qml--从我的 main.qml 文件，我调用 boot.htm 文件。在我的 boot.htm 文件中，我将调用我的 javascript 文件。

```
Page{
    WebView {
        id: webView
        url: "local:///assets/boot.htm"
    }    
} 
```

引导.htm

```
<div id="bootScreen" data-bb-type="screen" data-bb-scroll-effect="off"> 
<style type="text/css">

#bootScreen
{
   background:url('images/image.gif') no-repeat;  
}  
#logo
{
  height:200px;
  width:600px; 
}
</style>
<script id="bootJS" type="text/javascript" src="js/boot.js"></script>
<script type="text/javascript">

setTimeout(function () {
    $.ajax({
        url: "***",
        type: 'GET',
        data: { usr: localStorage["userName"],
            pwd: localStorage["userPassword"]
        },
        beforeSend: function () {
            $('#statusError').html('<center><div style="color:black !important; font-weight:bold font-size:20px"><img class="loading" src="images/loader.gif" align="middle" style="margin-bottom:25px;"/> LOADING</div></center>');
        },
        timeout: 10000,
        success: function (data) {
            bb.pushScreen('login.htm', 'login');
            if (!isPlaybook()) {
                unlockOrientation();
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            $('#statusError').html('An Error Has Occured. Please Try Again');
            console.log(errorThrown);
            console.log(textStatus);
            localStorage.clear();
            bb.pushScreen('login.htm', 'login');
            unlockOrientation()
        }
    });
}, 5000);

$(window).resize(function () {
    $('#logo').css({
        position: 'absolute',
        left: ($(window).width() - $('#logo').outerWidth()) / 2,
        top: ($(window).height() - $('#logo').outerHeight()) / 2
    });
});

$(window).resize();

</script>
<div id="logo" style="display:none">
<img  src="images/image.gif" />
</div>                 
</div> 
```

引导.js

```
var service = "****";
var locked = false;

function rotateAndLock() {
if (!locked) {
    blackberry.app.lockOrientation('portrait-primary');
    locked = true;
}
}

function unlockOrientation() {
    blackberry.app.unlockOrientation();
    isLocked = false;
} 
```

当我运行它时，我无法在我的应用程序上看到 image.gif。我收到错误说 $.ajax 是未定义的变量。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:46:34.673

$ 通常用作对具有 ajax 库的 jQuery 库的引用。

# html - 从 jsp 下拉列表中选择多个选项

> ID：14837547
> 
> 赞同：1
> 
> 时间：2013-02-12T16:49:15.593
> 
> 标签：html, jsp, drop-down-menu, options-menu

我有以下代码，我希望能够在使用 shift 按钮时选择多个选项。以下代码在下拉选项菜单中显示项目列表：我在数据库中有一个包含书籍列表的表，因此我用表的数据填充下拉菜单。

```
<select name="getfromall" id="getfromall" style="width:16em onChange=getBooks();">

<option value="All"><%=msg.getString("All Books")%></option>
<%
   java.util.ArrayList allBooks = Library.AddBook.getBookList("%");
       for(int i=0;i<allBooksl.size();i++)
              {
          %>
            <option value="<%=((String[])allBooks.get(i))[0]%>"
                      <%
        if( (getfromall1).equals(((String[])allBooks.get(i))[0]) )
                               out.print("selected");%>>

 <%=((String[])allBooks.get(i))[1]%>
</options>
<%
}//end if
%>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:23:56.167

用于`multiple`允许多项选择并`size`说明要向用户显示多少选项。

```
<select name="getfromall" multiple="multiple" size="5" ...> 
```

[http://www.w3.org/TR/html-markup/select.html](http://www.w3.org/TR/html-markup/select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:17:28.217

您需要在标签`multiple`上使用该属性：`<select>`

```
<select multiple name="getfromall" ... > 
```

# html - HTML5 游戏手柄 API 不起作用

> ID：14837548
> 
> 赞同：1
> 
> 时间：2013-02-12T16:49:18.180
> 
> 标签：html, gamepad, gamepad-api

我正在尝试使用 HTML5 Gamepad API 构建应用程序，但我的浏览器（Chrome 24）似乎完全忽略了游戏手柄。根据网络上的许多文章，它应该从 Chrome 21 开始工作

我认为这是一个实质性问题，因为它甚至无法在 HTML5Rocks 演示页面上运行：http: [//www.html5rocks.com/en/tutorials/doodles/gamepad/gamepad-tester/tester.html](http://www.html5rocks.com/en/tutorials/doodles/gamepad/gamepad-tester/tester.html)

![在此处输入图像描述](../Images/329df66605cb46fa7a10458bceab0d28.png)

我用 2 台设备进行了测试：标准 PS3 控制器和 Guitar Hero 无线 PC 控制器。

我正在使用 Chrome 24 运行（根据网络上的许多文章，API 应该从 Chrome 21 开始工作）

我试图在 chrome://flags 中随机切换许多选项，但没有成功。我尝试了几乎所有可能的方法。

为了使该 API 正常工作，是否应该进行任何已知的错误或操作？

谢谢你的帮助，jmpp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:30:05.313

似乎没有很好的 PS3 控制器支持。解决此问题的最简单方法是让您的 PS3 控制器模拟 Xbox360 控制器。

我一直在使用 MotionInJoy 使我的控制器工作。

# c# - 如何等待异步 wcf 调用完成以使用结果？

> ID：14837551
> 
> 赞同：0
> 
> 时间：2013-02-12T16:49:30.273
> 
> 标签：c#, wcf, asynchronous, task

我需要进行两次 wcf 调用来构建模型

```
[SecurityOperationBehavior]
public Response1 Func1(Request1 req)
{
}

[SecurityOperationBehavior]
public Response2 Func2(Request2 req)
{
} 
```

我知道我需要使用 TaskCompletionSource 来等到两个调用都完成。

```
public FullResult GetResult(int id)
{
  Request1 req = new Request1 ();
  req.id = id;

  Request2 req2 = new Request2 ();
  req2.id = id;

  var taskCompletions = new[]
                         {
                            new TaskCompletionSource<object>(),
                            new TaskCompletionSource<object>()

                           };
 var tasks = new[] { taskCompletions[0].Task, taskCompletions[1].Task  };

  System.Threading.Tasks.Task.Factory.StartNew(()=>Func1(req );
  System.Threading.Tasks.Task.Factory.StartNew(()=>Func2(req2 );

  System.Threading.Tasks.Task.WaitAll(tasks);

   //the following is what I want to do. The results of the 
   //two service calls will be contained in the the full result

    FullResult  result = new FullResult();

   result.first = tasks[0].Result;
   result.second = tasks[0].Result;

   return Result;

} 
```

问题：

两个服务调用完成后如何设置结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:06:20.257

这里根本不需要任务完成源。只需等待结果`Task.StartNew`：

```
public FullResult GetResult(int id)
{
    Request1 req = new Request1();
    req.id = id;

    Request2 req2 = new Request2();
    req2.id = id;

    var tasks = new Task[] {
        Task.Factory.StartNew(() => Func1(req))
        , Task.Factory.StartNew(() => Func2(req2))};

    System.Threading.Tasks.Task.WaitAll(tasks);

    FullResult result = new FullResult();

    result.first = tasks[0];
    result.second = tasks[1];

    return result;
} 
```

# html - 溢出：隐藏不剪切绝对定位的内容

> ID：14837553
> 
> 赞同：18
> 
> 时间：2013-02-12T16:49:31.770
> 
> 标签：html, css, overflow

我正在尝试制作一个里面有滚动文本的框。问题是，当文本在框的中间时，当我希望它被剪裁时，它会显示在它外面。

HTML/CSS 非常简单，我不知道可能出了什么问题：

```
#vbox {
  width: 100px;
  height: 500px;
  overflow: hidden;
  background: #afa;
}
#vtext {
  position: absolute;
  width: 100px;
  top: 250px;
}
```

```
<div id="vbox">
  <div id="vtext">
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</p>
    <p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
    <p>Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>
    <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo.</p>
    <p>Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi.</p>
    <p>Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a,</p>
  </div>
</div>
```

不是“溢出：隐藏；” 应该隐藏溢出的内容？

**编辑 ：**

在框中添加“位置：相对”可以解决问题，但我仍然感到困惑......有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-12T16:51:26.797

`overflow`如果具有该设置的元素不是（或不包含）其包含块（通常，这意味着它未定位），则绝对定位元素不受任何设置的影响。

在您的情况下，该框未定位，因此文本锚定到视口而不是框。该框不知道文本，并且视口足够大以包含文本，因此根本不会发生剪辑。您可以在规范的[第 11.1 节](http://www.w3.org/TR/CSS21/visufx.html#overflow-clipping)中找到详细信息。

给你的盒子`position: relative`将导致文本相对于盒子定位，并因此被剪裁。

```
#vbox {
  position: relative;
  width: 100px;
  height: 500px;
  overflow: hidden;
  background: #afa;
}
#vtext {
  position: absolute;
  width: 100px;
  top: 250px;
}
```

```
<div id="vbox">
  <div id="vtext">
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</p>
    <p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
    <p>Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>
    <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo.</p>
    <p>Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi.</p>
    <p>Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a,</p>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T16:54:36.697

不要在 box 内制作元素`position:absolute`。

**CSS**

```
#vbox{
    width:100px;
    height:500px;
    overflow:auto;
    background:#afa;
}
.vtext{
    font-size: 12px;
} 
```

请参阅更新[的 http://jsfiddle.net/V98bg/4/](http://jsfiddle.net/V98bg/4/)

# node.js - nodejs winston - 使用多个参数记录

> ID：14837558
> 
> 赞同：10
> 
> 时间：2013-02-12T16:49:48.897
> 
> 标签：node.js, winston

我试图使用winston进行日志记录，但我看到如果我想用2个arg获取数据，那么我会得到日志，但如果我想得到3个参数，那么我就没有得到数据，

前任：

```
logger = new (winston.Logger)({
transports: [
   new (winston.transports.Console)({colorize : true, timestamp:true}),
 ]
}); 
```

现在尝试获取如下日志：

```
 1\. logger.info("We got the data %s, %d", data, port);
 O/P: We got the data %s, %d  => No data and port value
 2\. logger.info("We got the data, port", data, port);
 O/P: We got the data, port   => No data and port value
 3\. logger.info("We got the data", data);
 ===> Getting the data correctly. 
```

您能否让我知道我在 1、2 中遗漏了什么，或者winston 真的没有在 1 和 2 的情况下记录数据吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-07-04T21:33:15.773

这对我和winston 3.2.x 有效：

```
const { format, createLogger, transports } = require('winston');
const jsonStringify = require('fast-safe-stringify');

const logLikeFormat = {
  transform(info) {
    const { timestamp, label, message } = info;
    const level = info[Symbol.for('level')];
    const args = info[Symbol.for('splat')];
    const strArgs = args.map(jsonStringify).join(' ');
    info[Symbol.for('message')] = `${timestamp} [${label}] ${level}: ${message} ${strArgs}`;
    return info;
  }
};

const debugFormat = {
  transform(info) {
    console.log(info);
    return info;
  }
};

const logger = createLogger({
  format: format.combine(
    // debugFormat, // uncomment to see the internal log structure
    format.timestamp(),
    format.label({ label: 'myLabel' }),
    logLikeFormat,
    // debugFormat, // uncomment to see the internal log structure
  ),
  transports: [
    new transports.Console()
  ]
});

logger.info('foo', 'bar', 1, [2, 3], true, { name: 'John' }); 
```

这导致：`2019-07-04T21:30:08.455Z [myLabel] info: foo "bar" 1 [2,3] true {"name":"John"}`

基本上`format.combine`为`info`对象设置管道。对于每个格式函数，`transform`都会调用并写入最终的日志消息以`info[Symbol.for('message')]` 希望这会有所帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-01T14:37:25.817

由于 Winston API 不像 那样工作`console.log`，因此一种解决方法是创建一个包装函数，它`util.format`以下列方式使用：

```
const util = require('util')   

...

function log(...msg) {
  logger.info(util.format(...msg))
} 
```

然后你可以像这样调用日志： `log('my log entry', 'foo, 'bar')`

这将像这样记录：`{"message":"my log entry foo bar","level":"info"}`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T16:59:09.483

You are assuming there is a varargs style API, but there is not. The full API is `level, msg, meta, callback`, but when you use one of the methods that is the level, then it's just `msg, meta, callback`. You need to construct a single `meta` object and pass that.

[https://github.com/flatiron/winston/blob/master/lib/winston/logger.js#L115](https://github.com/flatiron/winston/blob/master/lib/winston/logger.js#L115)

```
//
// ### function log (level, msg, [meta], callback)
// #### @level {string} Level at which to log the message.
// #### @msg {string} Message to log
// #### @meta {Object} **Optional** Additional metadata to attach
// #### @callback {function} Continuation to respond to when complete.
// Core logging method exposed to Winston. Metadata is optional.
// 
```

[https://github.com/flatiron/winston#logging-with-metadata](https://github.com/flatiron/winston#logging-with-metadata)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T12:09:19.003

我通过包装 winston 函数并使用包装器来解决这个问题。我希望现在有更好的解决方案。

```
var logger = new (winston.Logger)({
        transports:[new (winston.transports.Console)({ json : false, timestamp : true, level : 0, colorize : true}),
                    new (winston.transports.File)({ filename: filepath, json : false, timestamp : true, level : 0, colorize: true })]
    });

// pass in function arguments object and returns string with whitespaces
function argumentsToString(v){
    // convert arguments object to real array
    var args = Array.prototype.slice.call(v);
    for(var k in args){
        if (typeof args[k] === "object"){
            // args[k] = JSON.stringify(args[k]);
            args[k] = util.inspect(args[k], false, null, true);
        }
    }
    var str = args.join(" ");
    return str;
}

    // wrapping the winston function to allow for multiple arguments
    var wrap = {};
    wrap.info = function () {
        logger.log.apply(logger, ["info", argumentsToString(arguments)]);
    };

    wrap.error = function () {
        logger.log.apply(logger, ["error", argumentsToString(arguments)]);
    };

    wrap.warn = function () {
        logger.log.apply(logger, ["warn", argumentsToString(arguments)]);
    };

    wrap.debug = function () {
        logger.log.apply(logger, ["debug", argumentsToString(arguments)]);
    }; 
```

/// 然后按原样返回 wrap 是您的记录器。/// 并使用类似 log.info(1,2,3,4,"foo","bar");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-20T10:41:19.503

**这是我的日志记录模块，它适用于我的所有项目。**

```
const winston = require('winston');

module.exports = function() {
    const logger = winston.createLogger({
        format: winston.format.combine(
            winston.format.timestamp(),
            winston.format.colorize(),
            winston.format.json()           
        ),
        transports: [
          new winston.transports.File({ filename: 'error.log' }),
        ]
      });

      if (process.env.NODE_ENV !== 'production') {
        logger.add(new winston.transports.Console({
            format: winston.format.combine(
                winston.format.timestamp(),
                winston.format.colorize(),
                winston.format.json()               
            )
        }));
      }

    process.on('unhandledRejection', (error) =>{
        logger.error(error.stack);
    });

    process.on('uncaughtException', (error) =>{
        logger.error(error.stack);
    }); 
} 
```

# ios - 如何在 NSString 中查找 END_OF_LINE 或 WHITESPACE 字符

> ID：14837565
> 
> 赞同：2
> 
> 时间：2013-02-12T16:50:05.997
> 
> 标签：ios, nsstring, string-formatting, nsrange

我正在尝试解析可能包含 url 的推文。我想在推文的其余部分用不同的颜色/字体格式化 url。很明显，url 可以放在文本中的任何位置。所以我有一个看起来像这样的类别方法：

```
NSString *urlString = @"";
NSRange startRange = [self rangeOfString:@"http://" options:NSCaseInsensitiveSearch];

if (startRange.length) {
    NSString *subStr = [self substringFromIndex:startRange.location];
    NSCharacterSet *set = [NSCharacterSet whitespaceAndNewlineCharacterSet];
    NSRange endRange = [subStr rangeOfCharacterFromSet:set];

    if (endRange.length) {
        NSRange finalRange;
        finalRange.location = startRange.location;
        finalRange.length = endRange.location - 1;
        NSString *finalString = [self substringWithRange:finalRange];
        debugTrace(@"finalString : %@", finalString);
    }
}

return urlString; 
```

所以基本上我在文本中找到范围，`http://`然后从那里到最后创建一个子字符串。从那里我寻找第一个`whitespaceAndNewlineCharacterSet`并将其用作 url 的结尾来查找`finalString`. 然而，线

`NSRange endRange = [subStr rangeOfCharacterFromSet:set];`

返回垃圾值，这让我觉得我没有使用正确`NSCharacterSet`的来找到`endRange`

`Printing description of endRange: (NSRange) endRange = location=2147483647, length=0`

我该怎么做才能找到 URL 的结束位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:25:53.340

正如我在评论中提到的，它不是垃圾范围值，它是`NSNotFound`. 这意味着您传递的字符串中没有出现任何空格或换行符（这是一个有效的情况）。因此，我们需要为此做好准备。

根据您的代码，我已将其更改为检查`NSNotFound`. 此外，不需要从 finalRange 长度中减去 1。当我测试这个代码示例时，它从我的 URL 字符串中裁剪了最后一个字符。注释已添加到更改/查询行的末尾。

```
NSString *urlString = @""; // Is this being used?
NSRange startRange = [self rangeOfString:@"http://" options:NSCaseInsensitiveSearch];

if (startRange.length) {
    NSString *subStr = [self substringFromIndex:startRange.location];
    NSCharacterSet *set = [NSCharacterSet whitespaceAndNewlineCharacterSet];
    NSRange endRange = [subStr rangeOfCharacterFromSet:set];

    if (endRange.location == NSNotFound) { // Check for NSNotFound
        debugTrace(@"finalString : %@", subStr); 
    }
    else if (endRange.length) {
        NSRange finalRange;
        finalRange.location = startRange.location;
        finalRange.length = endRange.location; // No need to subtract 1
        NSString *finalString = [self substringWithRange:finalRange];
        debugTrace(@"finalString : %@", finalString);
    }
}

return urlString; 
```

我已经对此进行了简短的测试，它似乎有效。

# java - 在eclipse中导出一个Android项目

> ID：14837567
> 
> 赞同：1
> 
> 时间：2013-02-12T16:50:07.210
> 
> 标签：java, android, google-play

我想导出我的 Android 项目以便在 Google Play 上发布。成功导出了。

看看这些代码行：

```
GsonSyncPathResolverModel gsonSyncPathResolverModel = new GsonSyncPathResolverModel(new GsonBuilder());
            String TAG = "SyncPathReslover";

            HttpResponse licenceManagementResponse = Client.get(REST_URL.GETSynchURLResolver(customerID));
            int responseCode = licenceManagementResponse.getStatusLine().getStatusCode();
            String responseString = EntityUtils.toString(licenceManagementResponse.getEntity());
            Log.e(TAG, "response " + responseString);
            System.out.println(responseString);
            responseString=responseString.replace("{\"GetOrganizationInformationByOrganizationNumberResult\":\"[{","{");
            responseString=responseString.replace("}]\"}","}");
            responseString=responseString.replace('\\', Character.MIN_VALUE);
            responseString=responseString.replaceAll(""+Character.MIN_VALUE,"");

            System.out.println("#zzz "+responseString);

            if (responseCode == 200) {
                // syncPathResolver
                licenceManagementResponse.getEntity().consumeContent();
                SyncPathResolverModel syncPathResolverModel = gsonSyncPathResolverModel.parseJSON(responseString);

                Log.e(TAG, "Response from Server:  Organization ID:" + syncPathResolverModel.getObjectEntry_ID());
                Log.e(TAG, "Response from Server:  Sync Path:" + syncPathResolverModel.getSyncServiceURL()); 
```

当我直接从 Eclipse 运行项目时，最后一行代码工作正常，并打印出正确的值。

但是当我使用导出的 .apk 文件时，

```
Log.e(TAG, "Response from Server:  Organization ID:" + syncPathResolverModel.getObjectEntry_ID());
Log.e(TAG, "Response from Server:  Sync Path:" + syncPathResolverModel.getSyncServiceURL()); 
```

这两行打印出来`null`。

你能帮我导出 .apk 文件有什么问题吗？

当我签署 .apk 文件时，gson.jar 库似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:04:31.073

导出 .apk 文件后 json.jar 文件无法正常工作的原因与启用[ProGuard](https://stackoverflow.com/questions/14837567/export-an-android-project-in-eclipse)有关。因此，如果我禁用它或正确配置它，.jar 文件也将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:26:15.617

在 Eclipse 中打开项目属性。选择 Java Build Path，单击 Order and Export 选项卡。确保检查 gson.jar 以进行导出。

# java - java - 如何在“星期五的每个凌晨1点”中为cron作业指定时间（以毫秒为单位）Java？

> ID：14837568
> 
> 赞同：0
> 
> 时间：2013-02-12T16:50:07.620
> 
> 标签：java, time, cron, scheduled-tasks, jobs

嗨，我正在尝试编写课程以在特定时间安排工作。这是代码，

```
public void test(){
        Timer timer = new Timer();
        Calendar date = Calendar.getInstance();
        date.set(Calendar.HOUR,0);
        date.set(Calendar.MINUTE, 0);
        date.set(Calendar.SECOND, 2);
        date.set(Calendar.MILLISECOND,0);

        //schedule to run on 1 am every friday. 
        timer.schedule(new JobRunner(), date.getTime(),1*0*0*0);
    } 
```

请在最后一行提供帮助，我不确定如何在其中指定时间。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:35:29.373

我希望这有帮助。

```
 static final long period = 7*24*60*60*1000;//one week

public void test(){
    Timer timer = new Timer();
    Calendar date = Calendar.getInstance();
    date.set(Calendar.HOUR_OF_DAY, 1);
    date.set(Calendar.MINUTE, 0);
    date.set(Calendar.SECOND, 0);
    date.set(Calendar.MILLISECOND,0);
    date.set(Calendar.DAY_OF_WEEK, Calendar.FRIDAY);
    //in case you run the batch before date
    if (date.before(Calendar.getInstance())) {
        date.add(Calendar.DAY_OF_YEAR, 7);
    }        

    long delay =  date.getTimeInMillis() - new Date().getTime();              
    //schedule to run on 1 am every friday. 
    timer.schedule(new JobRunner(), delay, period);              
} 
```

问候！

# forms - 更改 Excel 表单复选框名称

> ID：14837571
> 
> 赞同：10
> 
> 时间：2013-02-12T16:50:20.083
> 
> 标签：forms, excel, checkbox

我正在使用 Excel 2010。我想更改已添加的 Excel 表单复选框的名称。我怎么能做到这一点，而不是在 VBA 中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T18:52:01.553

您可以在名称框中更改它：

![在此处输入图像描述](../Images/59b9ad3f8b97a5ad9e4b5455e621a6df.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T18:54:13.860

您可以通过编辑编辑栏左侧的名称框来执行此操作，此处：

![在此处输入图像描述](../Images/ba44f89264f07b876ddd4a620abdca09.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T11:03:26.097

1.  打开excel表在哪里更改所需复选框的名称，
2.  转到开发人员菜单并打开它，
3.  转到设计模式图标并单击它，
4.  选择所需的复选框以更改名称，
5.  右键点击，
6.  转到属性行并单击它，
7.  转到标题行，
8.  编辑下一个框 - 这是您可以进行修改的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-06T18:34:45.640

要更改选定对象的名称，请使用单元格 A1 上方和左侧的名称框。

但是，如果您偶然尝试仅更改某些字符的大小写，Excel 不会接受此更改，并且一旦您按 Enter，它将恢复为原始大小。

例如 - 如果它被称为 CheckBox5，并且您想将其更改为 checkBox5，则必须先将其重命名为不同的名称，然后再重命名为 checkBox5。

# ios - 将分支的 iOS 项目（相同的项目名称）提交到应用商店流程

> ID：14837575
> 
> 赞同：0
> 
> 时间：2013-02-12T16:26:10.717
> 
> 标签：ios, xcode4

我有一个基础项目，我想为客户重新命名和转售。所以我的问题是：当我分支并创建一个新项目时，显然它需要是一个独立于主项目的实体。在提交过程中唯一将这些应用程序分开的东西是 Bundle ID 吗？

由于重命名项目有时会很痛苦，我正在做的是：

*   创建分支
*   在 XCode 中打开它并更改目标名称，这会更改捆绑 ID，因为它设置为 com.whatever.${PRODUCT_NAME:rfc1034identifier}。

所以我想知道在提交新项目时，捆绑 ID 是唯一需要全球唯一的东西吗？还是我需要为每个新分支/项目更改更多属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:26:35.073

根据我的经验，只有捆绑 ID 需要不同。

不过，您应该注意一些事项：

1.  您可能希望客户端之间的应用程序启动画面/图标/图标标签也不同
2.  在**构建设置**下，您的**代码签名实体**也可能需要不同。如果您有特定于捆绑 ID 的证书+供应配置文件，则必须为每个客户端创建新的配置文件集并在构建时使用它们
3.  如果您发现您开始在客户端之间更改资源（例如用于品牌/字符串表的图标/图像），那么使用多个项目和共享静态库可能对您来说更容易。获取所有共享代码并将其转换为静态库 iOS 项目，然后为每个使用此库的客户端（普通 iOS 应用程序项目）创建一个单独的项目。这样，所有元数据（如包 ID、证书、图标）都可以不同，并且代码相同。
4.  如果您的应用程序定义了任何 URL 方案（例如，如果您使用 Facebook 实现登录，则需要这样做），这些方案在客户端之间也应该不同。如果它们相同，那么当用户在其设备上安装 2 个应用程序时，您肯定会发生冲突。

最后一个关于 Apple 政策的提示：

如果您计划在您的开发者帐户下提交所有这些客户端应用程序，这可能违反 Apple 政策，并且您的应用程序可能会被拒绝。Apple 希望您为每位客户开设一个开发帐户（并支付 99 美元/年）。

# php - 如何打印出函数的变量/数组

> ID：14837578
> 
> 赞同：-1
> 
> 时间：2013-02-12T16:50:46.020
> 
> 标签：php, cakephp, cakephp-1.3

我需要 array($project_Ids) 没有任何建议。
这是
因为我不能调用函数，因为已经调用了；我只是想要一些如何更新这个数组（）。

```
$project_Ids=array();
    function generateProperties($listP, $sizeS){
        global $project_Ids;             
        $i=0;
        foreach ($listP as $pr) {   
            $i++;   
                        $pr['project_id'];

                        $project_Ids[$i]=$pr['project_id'];

               echo "<li class='' style='cursor: pointer;height:" . $sizeSmallBlock . "px;' dds='" . $project['project_id'] . '-' . $project['project_calendar_id'] . "' id='" . $project['project_id'] . '-' . $project['project_calendar_id'] . "'>" . 
                $description . 
             "</li>";

        }        
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:54:29.283

您需要在函数内部定义数组，然后让函数*返回*它！

```
function generateProperties($listP, $sizeS){
    $project_Ids=array();          
    $i=0;
    foreach ($listP as $pr) {   
        $i++;   
        $project_Ids[$i]=$pr['project_id'];
    }
    return $project_Ids;        
}

// then elsewhere in your code
$project_Ids = generateProperties($listP, $sizeS); 
```

编辑：

通过查看您的 foreach 循环 - 您似乎只是获取数组值并将它们存储在数组中？如果是这样 - 只需使用[array_values](http://php.net/manual/en/function.array-values.php) - 它在一行代码中完全符合您的要求：

```
$project_Ids = array_values($listP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:53:54.290

它已经在函数之外可用，因为您已在外部正确定义它。

您可能想复习一下[范围](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:32:21.697

```
$project_Ids = generateProperties($listP, $sizeS); 
```

这将起作用，但您必须在呈现所有页面后从页面末尾阅读它:)

# visual-studio-2010 - C2487 与提升成员

> ID：14837580
> 
> 赞同：1
> 
> 时间：2013-02-12T16:50:49.433
> 
> 标签：visual-studio-2010, boost, dllexport, declspec

我尝试将我们的项目从静态库重组为子项目的共享库。

好吧，使用 VS Compiler 所有导出类都需要一个**_ *declspec(dllexport)****并且导入它们需要*****_declspec(dllimport)**。工作正常。但是我遇到了从 boost 成员派生的所有类（例如单例或 ptr_map）的麻烦。**

 **我得到错误

> *错误 C2487: 'boost::serialization::singleton::instance' : dll 接口类的成员不能用 dll 接口声明*

[微软的解决方案](http://support.microsoft.com/kb/127900/en)不是很有帮助，因为更改 boosts 代码可能不是一个好主意；）

**导出 boost 派生类不是一个好主意吗？有谁知道这是从哪里来的，或者可能知道如何解决？**

（下面的示例代码）

谢谢！

* * *

这是一个示例（mylib.h 作为共享库项目，名为：“myLib”）：

```
#ifndef _MY_LIB_H_
#define _MY_LIB_H_

#include <string>
#include <boost/serialization/singleton.hpp> 
using boost::serialization::singleton;

#ifdef MYLIB_EXPORTS
    #define PORT_DLL __declspec(dllexport)
#else
    #define PORT_DLL __declspec(dllimport)
#endif

class PORT_DLL MyLib
    : singleton<MyLib>
{
public:
    std::string GiveMeOutput() const;
};

#endif //_MY_LIB_H_ 
```

它的实现（myLib.cpp）

```
#include "myLib.h"

std::string
MyLib::GiveMeOutput() const
{
    return "some output";
} 
```

一个简单的 main.cpp（作为可执行项目）

```
#include <iostream>
#include "../myLib/myLib.h"

int main()
{
    MyLib lib;
    std::cout << lib.GiveMeOutput();
    return 0;
} 
```

几点：

*   VS2010
*   x64
*   提升 1.52**

# java - 在java中显示和隐藏框架的正确方法

> ID：14837581
> 
> 赞同：0
> 
> 时间：2013-02-12T16:50:50.067
> 
> 标签：java, swing, user-interface, jframe

我的 Java 程序有许多`JFrame`s 和一个带有一些按钮的主框架。当用户单击每个按钮时，将显示相关的框架。显示和隐藏这些框架的正确方法是什么？

只是`setVisible(true);`和`setVisible(false);`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:11:50.427

对于显示 JFrame，setVisible(true) 是正确的（除了已弃用的 show() 方法）也是使其可见的唯一方法。

对于隐藏 JFrame， setVisible(false) 是正确的（除了已弃用的 hide() 之外，这也是唯一的方法）。

根据您是否计划最终重用框架（将来再次显示），*如果您不再显示框架，*您可能还需要另外调用 dispose() 。如果您希望 JVM 在最后一个窗口关闭后自动退出，这一点尤其重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:53:09.320

是的，这是显示和隐藏框架的正确方法。然而，值得记住的是，假设对 的引用`JFrame`仍然存在，该对象仍保留在内存中。因此，隐藏它与完全卸载它不同。

# ios - 如何使用 3rd 方分发配置文件构建 iOS 应用程序

> ID：14837583
> 
> 赞同：5
> 
> 时间：2013-02-12T16:50:58.023
> 
> 标签：ios, xcode, provisioning-profile, ios-provisioning

我开发了一个 iOS 应用程序，我的客户将在内部使用它。他们向我发送了他们的企业分发配置文件。当我将它添加到 XCode 时，它​​显示“未找到有效的签名身份”。如何构建应用程序以便我的客户可以在他们的设备上运行它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T17:41:44.300

您的计算机无法使用分发配置文件进行签名，因为您没有此证书的私钥。

**备选方案 1**

Apple 打算仅在一台机器上构建一个分发项目，即最初创建证书的机器。因此，在他们看来，您应该要求您的客户在内部构建项目（仅用于分发 - 对于开发，您自己构建应该没有问题）。

**备选方案 2**

有一种方法可以覆盖它。它涉及从该特殊分发机器导出私钥并将其通过电子邮件发送给您。

这些是步骤（也在[此处](http://www.springtiger.co.uk/2010/12/13/sharing-ios-distribution-certificate/)概述）：

1.  访问创建证书的计算机，打开计算机上的“Keychain Access”程序
2.  在“类别”面板中，选择“证书”
3.  找到正确的分发证书并展开它
4.  突出显示 iPhone 分发证书行和它下面的私钥行。
5.  右键单击并选择“导出 2 个项目”
6.  保存.p12文件，选择可以共享的密码，以后导入这个文件需要用到
7.  通过电子邮件将保存的文件发送给您

导入此文件并输入第 6 步中的密码后，您的计算机上也将拥有私钥，一切都会好起来的。

**备选方案 3**

当您要求您的客户导出私钥时，他们可能不知道您在说什么，也不知道创建它的机器在哪里（这就是我实际发生的事情）。如果他们不定期自行构建以进行分发，通常就是这种情况。

在这种情况下，您可以简单地删除证书并创建一个新证书（用于分发配置文件）。如果您在计算机上创建证书，那么您将拥有私钥。您还应该将其导出给他们以防万一（使用与备选方案 2 相同的步骤）.. 因此，如果需要，他们可以在没有您的情况下进行构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:27:51.943

每个配置文件都与证书配对。如果您订阅了 Apple 开发者服务，您应该有权创建和下载开发证书（与 Apple ID 相关联）和分发证书（与组织相关联）。企业分发配置文件需要与分发证书配对。因此，为了使用他们的配置文件，您必须从他们那里获得分发证书。这也将涉及您获取他们可能不太喜欢的私钥。或者，他们可以在他们的门户上将您设置为开发人员，然后您可以通过已经安装了分发证书的机器进行分发。

# .net - 用于可移植类库的 Wix .NET 4.0.3

> ID：14837585
> 
> 赞同：2
> 
> 时间：2013-02-12T16:51:11.007
> 
> 标签：.net, wix, portable-class-library

我有一个项目，其中包含一个面向 .NET 4.0 的 .NET 可移植类库。

我的理解是，这意味着客户端需要安装 .NET 4.0.3 (KB2468871)。我如何检测到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T13:21:25.757

答案非常接近——您只需用谷歌搜索更新 ID。因此，[原始文章](http://support.microsoft.com/kb/2468871)包含名为`Update detection information`. 它列出了您应该检查是否存在以了解更新是否存在的注册表项。

**注意**：它在两组（分别为 x86 和 x64）中列出了两个不同的密钥（分别用于完整和客户端配置文件版本）。您应该选择与您的情况相对应的一种。

剩下的就是技术细节：

*   作者`<RegistrySearch>`元素并将其包装到属性中
*   在包的启动条件中使用该属性

PS我明白这是迟到的答案，但希望其他人可以受益。

# git - 当我使用 Git 时，如何在远程服务器上的 Sublime Text 2 中自动同 步我的项目？

> ID：14837587
> 
> 赞同：2
> 
> 时间：2013-02-12T16:51:23.607
> 
> 标签：git, project, sync, sublimetext2

所以我有一个用 git 版本化的项目。我想通过 SSH 或挂载的驱动器在服务器上同步它。

我尝试了[Sublime SFTP 插件](http://wbond.net/sublime_packages/sftp)，但是当我在 Git 上更改分支时它不会自动同步。另外，使用 Git 制作差异的插件非常慢。

我试过[FileSync](https://github.com/bcharbonnier/SublimeFileSync)但它只适用于保存文件。因此，当我切换分支或删除文件时，它不起作用。

我在 Windows 上，我的服务器是 Debian，我不是管理员（这是我服务器的公司），但我确实有 SSH 访问权限。

即使我使用 Git 和切换分支，通过服务器自动同步我的项目的最佳选择是什么？它可能是第三方选项，例如在两个文件夹之间进行实时同步的程序，但我没有找到一个免费或足够好的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:20:12.327

TBH，最接近的解决方案是使用 deployHQ 并部署在来自 github 的某个 post-receive 挂钩或您正在使用的任何 git 解决方案上，或者只需在服务器上运行一个 cron 作业以每隔一分钟提取一次 repo。您将找不到任何工具来执行完全相同的操作，因为不建议在服务器上部署此方法。您应该手动决定从哪个分支部署哪个提交。也许编写一个[Fabric](http://fabfile.org)脚本来获取最新的提交并部署它。

进行手动工作的主要原因是控制服务器上发生的事情。假设您在开发环境中进行测试时推送了一些东西，并且它甚至没有经过测试就被部署，可能带有错误。你不希望这种情况发生。

SublimeText2 可以帮助您进行版本控制。您可以在编辑器中使用 git。运行面料和所有你必须手动做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T12:14:44.763

试试 Netbeans。它可以满足您的要求，开箱即用。您只需要安装适用于 Windows 的 Git 并单独使用 Git Bash 即可完成所有 git 工作，例如签出、拉取、推送合并等。当您在 Git Bash 中切换分支时，Netbeans 足够智能，可以删除或上传文件。服务器。如果有任何问题，您可以简单地将整个本地文件上传到您的服务器。不应该对您的生产服务器执行此操作。

# java - 影响文本文件上的 JTable 单元格值更改

> ID：14837588
> 
> 赞同：1
> 
> 时间：2013-02-12T16:51:24.513
> 
> 标签：java, swing, jtable, actionlistener, abstracttablemodel

我使用这种方法来更改表格单元格的值，它在 jtable 上更改，但在文本文件上没有更改！

```
public class user_AllBooks extends AbstractTableModel {

    BookInformation book_info = new BookInformation();
    String[] columns = new String[]{"Book Name", "Book Date", "Book ID", "Borrow Status"};
    ArrayList<BookInformation> bData = new ArrayList<BookInformation>();

    public user_AllBooks() {
        try {
            BufferedReader br = new BufferedReader(new FileReader("AllBookRecords.txt"));
            String line;
            while ((line = br.readLine()) != null) {
                bData.add(initializeBookData(line));
            }
            br.close();
        } catch (IOException ioe) {
        }
    }

    public BookInformation initializeBookData(String myline) {
        BookInformation book_infos = new BookInformation();
        String[] celledLine = myline.split("     ");
        book_infos.setBookName(celledLine[0]);
        book_infos.setBookDate(celledLine[1]);
        book_infos.setBookID(celledLine[2]);
        book_infos.setBorrowStatus(celledLine[3]);
        return book_infos;
    }

    @Override
    public String getColumnName(int col) {
        return columns[col];
    }

    @Override
    public int getRowCount() {
        if (bData != null) {
            return bData.size();
        } else {
            return 0;
        }
    }

    @Override
    public int getColumnCount() {
        return columns.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        BookInformation bookInf = bData.get(rowIndex);
        Object value;

        switch (columnIndex) {
            case 0:
                value = bookInf.getBookName();
                break;
            case 1:
                value = bookInf.getBookDate();
                break;
            case 2:
                value = bookInf.getBookID();
                break;
            case 3:
                value = bookInf.getBorrowStatus();
                break;
            default:
                value = "...";
        }
        return value;
    }

    @Override
  public void setValueAt(Object value, int row, int col)
    {
    BookInformation book_infos = bData.get(row);
    if (col==0)
    book_infos.setBookName((String)value);
    else if (col==1)
    book_infos.setBookDate((String)value);
    else if (col==2)
    book_infos.setBookID((String)value);
    else if (col==3)
    book_infos.setBorrowStatus((String)value);
    }
    } 
```

二等：

```
public class user_AllBooksM extends JFrame implements ActionListener {

    user_AllBooks uAllBooks = new user_AllBooks();
    final JTable bTable = new JTable(uAllBooks);
    JButton borrowButton;

    public user_AllBooksM() {
        setTitle("All Books");
        exitButton = new JButton("Exit");
        borrowButton = new JButton("Borrow");
        borrowButton.addActionListener(this);
        JPanel Bpanel = new JPanel();
        Bpanel.setLayout(new FlowLayout());
        JScrollPane sp = new JScrollPane(bTable);
        Bpanel.add(sp);
        Bpanel.add(borrowButton);
        this.add(Bpanel);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setBounds(300, 60, 550, 550);
        this.setResizable(false);
        this.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        borrowInitialize(bTable.getSelectedRow());
    }

    public void borrowInitialize(int row) {
        if (uAllBooks.getValueAt(row, 3).equals("yes")) {
            JOptionPane.showMessageDialog(null, "This Book Was Borrowed");
        } else {
            uAllBooks.setValueAt("Yes", row, 3);
            uAllBooks.fireTableRowsUpdated(row, row);
        }
    }

    public static void main(String[] args) {
        new user_AllBooksM();
    }
} 
```

我的文本文件：

```
sds wew     88     77     no
moon     889     988     yes
ccc     30     33     no
testing     76     77     no
yes     999     444     no
hoop     100     200     no
name     60     20     no
pp     14     15     no
vbnet     49     94     yes
sdsd     232     dsds     no
gh     12     21     no
khoyBook     322     233     no 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:39:15.920

将 TableModelListener 添加到您的 TableModel。然后，每当更新事件首先出现时，您都需要遍历 TableModel 的行/列并重新创建文本文件。

您的 TableModel 实施不正确。您尚未实现 setValueAt(...) 方法。

应该从 TableModel 的 setValueAt() 方法调用“fireTableRowsUpdated()”方法。不应从您的 ActionListener 代码中调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:17:30.443

要在更改单元格值时更改文件的内容，您应该将 注册`TableModelListener`到关联的`TableModel`. 并在方法中实现文件写入逻辑`tableChanged`。
这是演示如何实现的示例代码`TableModelListener`。我希望这将为您提供一个很好的视角来完成您的任务：

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.JScrollPane;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.event.TableModelListener;
import javax.swing.event.TableModelEvent;
import javax.swing.table.TableModel;
import javax.swing.table.AbstractTableModel;
class TableDemo extends JFrame  implements TableModelListener
{
    private JTable table;
    private JScrollPane jsPane;
    private TableModel myModel;
    private JLabel label;
    public void prepareAndShowGUI()
    {
        myModel = new MyModel();
        table = new JTable(myModel);
        jsPane = new JScrollPane(table);
        label = new JLabel();
        myModel.addTableModelListener(this);
        getContentPane().add(jsPane);
        getContentPane().add(label,BorderLayout.SOUTH);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
    @Override
    public void tableChanged ( TableModelEvent evt)
    {
        int row = evt.getFirstRow();
        int col = evt.getColumn();
        label.setText("Value at ["+row+"]["+col+"] is changed to: "+myModel.getValueAt(row,col));
           //Write to your file here.
    }
    private class MyModel extends AbstractTableModel 
    {
        String[] columns = {
                            "Roll No.",
                            "Name"
                            };
        String[][] inData = {
                                {"1","Anthony Hopkins"},
                                {"2","James William"},
                                {"3","Mc. Donald"}
                            };
        @Override
        public void setValueAt(Object value, int row, int col)
        {
            inData[row][col] = (String)value;
            fireTableCellUpdated(row,col);
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return inData[row][col];
        }
        @Override
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override 
        public int getRowCount()
        {
            return inData.length;
        }
        @Override
        public String getColumnName(int col)
        {
            return columns[col];
        }
        @Override 
        public boolean isCellEditable(int row, int col)
        {
            return true;
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TableDemo td = new TableDemo();
                td.prepareAndShowGUI();
            }
        });
    }
} 
```

# google-app-engine - 在 ndb tasklet 中使用 images.get_serving_url_async() 是否安全？

> ID：14837590
> 
> 赞同：6
> 
> 时间：2013-02-12T16:51:27.507
> 
> 标签：google-app-engine, app-engine-ndb

NDB tasklet`yield`是执行异步/并行代码的好方法。但是，从文档中还不清楚这种机制是否可以安全地与非 ndb 异步函数一起使用，例如`images.get_serving_url_async()`.

[NDB 异步操作文档页面](https://developers.google.com/appengine/docs/python/ndb/async#urlfetch)有一个关于使用 NDB 上下文自己的版本的非常小的部分`urlfetch_async()`，其中说明了（强调我的）：

> URL Fetch 服务有自己的异步请求 API。*很好，但并不总是很容易与 NDB tasklets 一起使用*。

我不太清楚为什么它“并不总是很容易与 NDB 小任务一起使用”，这让我想知道同样的说法是否适用于`images.get_serving_url_async()`.

所以我的问题是：如果我这样做，我会遇到麻烦吗？

```
@ndb.tasklet
def foo():
    url = yield images.get_serving_url_async(image_key) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:56:24.127

没事。yield 将等待 RPC 并允许其他 tasklet 在等待时运行。关于 urlfetch 的评论只是关于它笨拙的 API。

# c# - TCP 客户端读取第一条消息但不读取其余消息

> ID：14837591
> 
> 赞同：0
> 
> 时间：2013-02-12T16:51:29.497
> 
> 标签：c#, tcpclient, tcplistener

我正在尝试向现有服务器解决方案发送请求并写出结果。服务器总共发送了 4 条带有我的特定请求的消息，但返回的消息数量可能因初始查询而异。

我能够成功地将查询发送到服务器，但是在读取响应时我只能读取一条消息。服务器日志显示有 4 个被退回。

请帮忙。

```
 IPHostEntry hostEntry = Dns.GetHostEntry(server_textbox.Text);
        IPEndPoint endPoint = new IPEndPoint(hostEntry.AddressList[0], port);
        string data = String.Empty;
        testclient = new TcpClient(server_textbox.Text, port);
        testclient.ReceiveBufferSize = 1024;
        testclient.SendBufferSize = 1024;
        NetworkStream netStream = testclient.GetStream();
        Byte[] message_byte = new System.Text.ASCIIEncoding().GetBytes(msg2);
        netStream.Write(message_byte, 0, message_byte.Length);

        Byte[] returnMessage = new byte[1024];
        Int32 totalBytesReceived = 0;
        Int32 bytesReceived = 0;
        try
        {

            while ((bytesReceived = netStream.Read(returnMessage, totalBytesReceived, returnMessage.Length)) > 0)
            {
                totalBytesReceived += bytesReceived;
                data += "\n" + ASCIIEncoding.ASCII.GetString(returnMessage);

                bytesReceived = 0;
            }
        }
        catch (Exception error)
        {
            MessageBox.Show(error.ToString());
        }
        result_box.Text += data;
        netStream.Close();
        testclient.Close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:55:51.583

我的猜测是您的所有消息都在第一个中读取`Read`。当服务器回复时，所有数据都卡在 Windows 接收缓冲区中并一次全部读取。

我建议使用[Wireshark](http://www.wireshark.org/)，这在进行网络编程时或多或少是强制性的。您将能够看到从服务器返回的 4 条消息作为至少 4 个不同的 tcp 数据包。

# asp.net-mvc - MVC4 w/o WebAPI：区域路由返回 404

> ID：14837593
> 
> 赞同：2
> 
> 时间：2013-02-12T16:51:33.000
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-areas

我正在使用没有 WebAPI 的 MVC4，只是在 MVC 上简单。我有一个正确注册的管理区域（像往常一样称为“管理”）：

```
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName { get { return "Admin"; } }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute("EditGroupRoute", "admin/groups/{action}/{id}", new { controller = "EditGroup", action = "Index", id = UrlParameter.Optional });
        //...
        //No default handler at the end, all routes are predetermined
    } 
```

全球.asax：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        //...                            
    }
} 
```

我的常规非区域`RouteConfig.RegisterRoutes`按应有的方式工作，并且包含正常路线，最后没有默认的全部处理程序。

每当我尝试一些管理区域路由时，我都会收到 404 错误。我正在使用 Haack 的 RouteDebugger，它在 404 错误文本下方显示了一个完全匹配（并且只有一个匹配），以及正确的区域、控制器和操作。

我已经检查了关于 SO 的类似问题，但没有任何乐趣。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:43:28.993

区域控制器位于错误的命名空间中。最初，`/Controllers`当我将它们移动到区域控制器时，它们就在我没有更新命名空间。

# jquery - 使用 Ajax 和 jQuery 简单加载 html

> ID：14837599
> 
> 赞同：0
> 
> 时间：2013-02-12T16:51:48.680
> 
> 标签：jquery, html, ajax

这是我的 index.html 中的简单代码

[http://pastebin.com/d2f7UuAa](http://pastebin.com/d2f7UuAa)

在脚本部分我有：

```
<script type="text/javascript">
    $(document).ready(function() {  

            $('document').ready(function(){
                    $("#cv").click(function(){
                            $("#div1").load("cv.html",aviso());
                    });
            });

            function aviso(){
                    alert('La solicitud ha sido procesada');
            }
    });

</script> 
```

这是在 cv.html

```
<h1>&iexcl;Mi CV!</h1> 
```

我正在尝试使用 jQuery Ajax 功能以异步方式显示不同的内容加载。我已经在这里搜索并尝试过：[Dynamically load PHP within a main page](https://stackoverflow.com/questions/14826921/dynamically-load-php-within-a-main-page)但我没有成功。函数 aviso() 确实执行了，但不显示内容。我知道这可能是一个非常简单的问题，但我被困在那里。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:53:53.983

第二个`$('document').ready`是不必要~~和不正确的（应该没有引号）~~。

试试这个：

```
<script type="text/javascript">
    $(document).ready(function() {  

        $("#curriculum").click(function(){
            $("#div1").load("cv.html", aviso);
        });

        function aviso(responseText){
            alert('La solicitud ha sido procesada');
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:57:42.670

我可以看到您的 HTML 中没有带有`id`of的元素。`cv`你指的是这个链接吗？

```
<li><a href="#" id="curriculum">Curr&iacute;culum Vitae</a></li> 
```

如果是这样，您的 jQuery 代码应该是：

```
$("#curriculum").click(function(){
    $("#div1").load("cv.html", aviso);
}); 
```

或者您可以更改元素`id`上的属性值。`<a>`

# java - Spring + Hibernate 的多租户：“为多租户配置了 SessionFactory，但未指定租户标识符”

> ID：14837601
> 
> 赞同：19
> 
> 时间：2013-02-12T16:51:51.377
> 
> 标签：java, spring, hibernate, multi-tenant

在 Spring 3 应用程序中，我试图通过 Hibernate 4 的本机[MultiTenantConnectionProvider](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html#d5e4661)和[CurrentTenantIdentifierResolver](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html#d5e4686)实现多租户。我看到[Hibernate 4.1.3 中存在此问题](https://hibernate.onjira.com/browse/HHH-7306)，但我正在运行 4.1.9 并且仍然遇到类似的异常：

```
 Caused by:

org.hibernate.HibernateException: SessionFactory configured for multi-tenancy, but no tenant identifier specified
    at org.hibernate.internal.AbstractSessionImpl.<init>(AbstractSessionImpl.java:84)
    at org.hibernate.internal.SessionImpl.<init>(SessionImpl.java:239)
    at org.hibernate.internal.SessionFactoryImpl$SessionBuilderImpl.openSession(SessionFactoryImpl.java:1597)
    at org.hibernate.internal.SessionFactoryImpl.openSession(SessionFactoryImpl.java:963)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:328)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:334)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)
    at com.afflatus.edu.thoth.repository.UserRepository$$EnhancerByCGLIB$$c844ce96.getAllUsers(<generated>)
    at com.afflatus.edu.thoth.service.UserService.getAllUsers(UserService.java:29)
    at com.afflatus.edu.thoth.HomeController.hello(HomeController.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:671)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:448)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:138)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:564)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:213)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1070)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:375)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:175)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1004)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:136)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:258)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:109)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
    at org.eclipse.jetty.server.Server.handle(Server.java:439)
    at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:246)
    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:265)
    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.run(AbstractConnection.java:240)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:589)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:520)
    at java.lang.Thread.run(Thread.java:722) enter code here 
```

下面是相关代码。在`MultiTenantConnectionProvider`我现在只是简单地编写了一些愚蠢的代码，每次只返回一个新的连接，并且此时`CurrentTenantIdentifierResolver`总是返回相同的 ID。显然，这个逻辑是在我设法让连接实例化之后实现的。

# 配置文件

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan">
        <list>
            <value>com.afflatus.edu.thoth.entity</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.hbm2ddl">${hibernate.dbm2ddl}</prop>
            <prop key="hibernate.multiTenancy">DATABASE</prop>
            <prop key="hibernate.multi_tenant_connection_provider">com.afflatus.edu.thoth.connection.MultiTenantConnectionProviderImpl</prop>
            <prop key="hibernate.tenant_identifier_resolver">com.afflatus.edu.thoth.context.MultiTenantIdentifierResolverImpl</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="autodetectDataSource" value="false" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

# MultiTenantConnectionProvider.java

```
package com.afflatus.edu.thoth.connection;

import java.util.Properties;
import java.util.HashMap;
import java.util.Map;

import org.hibernate.service.jdbc.connections.spi.AbstractMultiTenantConnectionProvider;
import org.hibernate.service.jdbc.connections.spi.ConnectionProvider;
import org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.hibernate.cfg.*;

public class MultiTenantConnectionProviderImpl extends AbstractMultiTenantConnectionProvider {

    private final Map<String, ConnectionProvider> connectionProviders
        = new HashMap<String, ConnectionProvider>();

    @Override
    protected ConnectionProvider getAnyConnectionProvider() {

        System.out.println("barfoo");
        Properties properties = getConnectionProperties();

        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName("com.mysql.jdbc.Driver");
        ds.setUrl("jdbc:mysql://127.0.0.1:3306/test");
        ds.setUsername("root");
        ds.setPassword("");

        InjectedDataSourceConnectionProvider defaultProvider = new InjectedDataSourceConnectionProvider();
        defaultProvider.setDataSource(ds);
        defaultProvider.configure(properties);

        return (ConnectionProvider) defaultProvider;
    }

    @Override
    protected ConnectionProvider selectConnectionProvider(String tenantIdentifier) {
        System.out.println("foobar");
        Properties properties = getConnectionProperties();

        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName("com.mysql.jdbc.Driver");
        ds.setUrl("jdbc:mysql://127.0.0.1:3306/test2");
        ds.setUsername("root");
        ds.setPassword("");

        InjectedDataSourceConnectionProvider defaultProvider = new InjectedDataSourceConnectionProvider();
        defaultProvider.setDataSource(ds);
        defaultProvider.configure(properties);

        return (ConnectionProvider) defaultProvider;
    }

    private Properties getConnectionProperties() {
        Properties properties = new Properties();
        properties.put(AvailableSettings.DIALECT, "org.hibernate.dialect.MySQLDialect");
        properties.put(AvailableSettings.DRIVER, "com.mysql.jdbc.Driver");
        properties.put(AvailableSettings.URL, "jdbc:mysql://127.0.0.1:3306/test");
        properties.put(AvailableSettings.USER, "root");
        properties.put(AvailableSettings.PASS, "");

        return properties;

    }
} 
```

# CurrentTenantIdentifierResolver.java

```
package com.afflatus.edu.thoth.context;

import org.hibernate.context.spi.CurrentTenantIdentifierResolver;

public class CurrentTenantIdentifierResolverImpl implements CurrentTenantIdentifierResolver {

    public String resolveCurrentTenantIdentifier() {
        return "1";
    }

    public boolean validateExistingCurrentSessions() {
        return true;
    }

} 
```

任何人都可以看到任何特别错误的地方吗？一旦打开事务，就会引发异常。似乎*没有*`SessionFactory`正确打开 Session，或者只是`Session`忽略了返回的值`CurrentTenantIdentifierResolver`，我认为这是 Hibernate 4.1.3 中的问题；这应该已经解决了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T09:13:10.070

您是否`@Transactional`在代码中的任何地方使用（即标记服务或 dao 类/方法）？在我在我的服务类中
注释掉之前，我遇到了同样的错误。 我认为这与 Hibernate 4 的默认 openSessionInThread 行为有关。`@Transactional`

我还配置了没有自定义实现的休眠模式`ConnectionProvider`and `TenantIdentifierResolver`。我正在使用基于 jndi 的方法，将**hibernate.connection.datasource**设置为 java://comp/env/jdbc/，然后将 jndi 资源的名称传递到我的 dao 方法中，该方法调用

`sessionFactory.withOptions().tenantIdentifier(tenant).openSession();`

我仍在尝试是否可以使用`@Transactional`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T19:34:30.313

*前言：虽然我接受了这个（将）包含代码的答案，但如果您认为这很有用，请支持[Darren 的答案。](https://stackoverflow.com/a/14932795/449805)他是我能够解决这个问题的原因。*

好的，我们开始吧......

[正如 Darren 所指出的](https://stackoverflow.com/a/14932795/449805)，这确实是 SessionFactory 不正确地实例化 Session 的问题。如果您要手动实例化会话，则没有问题。例如：

```
sessionFactory.withOptions().tenantIdentifier(tenant).openSession(); 
```

但是，`@Transactional`注释会导致 SessionFactory 打开与 的会话`sessionFactory.getCurrentSession()`，这不会从 中提取租户标识符`CurrentTenantIdentifierResolver`。

Darren 建议在 DAO 层手动打开 Session，但这意味着每个 DAO 方法都会有一个本地范围的事务。更好的地方是在服务层。每个服务层调用（即`doSomeLogicalTask()`）可能调用多个 DAO 方法。有意义的是，它们中的每一个都应该绑定到同一个事务，因为它们在逻辑上是相关的。

此外，我不喜欢在每个服务层方法中复制代码来创建和管理事务的想法。相反，我使用 AOP 将每个方法包装在我的服务层中，并提供实例化新方法`Session`和处理事务的建议。方面将当前存储`Session`在`TheadLocal`堆栈中，DAO 层可以访问该堆栈以进行查询。

所有这些工作都将允许接口和实现与其已修复错误的对应物保持一致，除了 DAO 超类中的一行`Session`将从`ThreadLocal`堆栈中获取`SessionFactory`. 修复错误后，可以更改此设置。

一旦我稍微清理一下，我将很快发布代码。如果有人对此有任何疑问，请随时在下面讨论。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-22T07:52:26.560

Hibernate 定义了[`CurrentTenantIdentifierResolver`](https://vladmihalcea.com/hibernate-database-schema-multitenancy/)接口来帮助 Spring 或 Java EE 等框架允许使用默认的`Session`实例化机制（无论是来自`EntityManagerFactory`.

因此，`CurrentTenantIdentifierResolver`必须通过配置属性进行设置，这正是您出错的地方，因为您没有提供正确的完全限定类名。`CurrentTenantIdentifierResolver`实现是，`CurrentTenantIdentifierResolverImpl`必须`hibernate.tenant_identifier_resolver`是：

```
<prop key="hibernate.tenant_identifier_resolver">com.afflatus.edu.thoth.context.CurrentTenantIdentifierResolverImpl</prop> 
```

修复此问题后，当`HibernateTransactionManager`调用时`getSessionFactory().openSession()`，Hibernate 将使用`CurrentTenantIdentifierResolverImpl`来解析租户标识符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-29T12:49:32.183

尽管这可能是一个较老的话题，但答案可能已经被处理了。我注意到以下内容：

在您定义的类 CurrentTenantIdentifierResolverImpl 中：

```
public class CurrentTenantIdentifierResolverImpl implements CurrentTenantIdentifierResolver 
```

但是在您的配置中，您引用了 MultiTenantIdentifierResolverImpl：

```
<prop key="hibernate.tenant_identifier_resolver">com.afflatus.edu.thoth.context.MultiTenantIdentifierResolverImpl</prop> 
```

只是指出这一点，因为我今天犯了同样的错误，之后一切都像魅力一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T20:12:36.233

也许您需要将休眠版本升级到最后 4.X 并使用注释或方面来启动事务

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-30T10:53:09.217

当我的 CurrentTenantIdentifierResolver 实现为 resolveCurrentTenantIdentifier() 方法返回 null 时，我遇到了类似的问题

# iphone - stringByReplacingOccurrencesOfString 小写和大写字符串 Objective-C

> ID：14837602
> 
> 赞同：1
> 
> 时间：2013-02-12T16:51:53.957
> 
> 标签：iphone, ios, objective-c

我该如何解决这个问题？

```
NSString * vendorName=@"can't event";
vendorName= [[[vendorName stringByReplacingOccurrencesOfString:@" " withString:@"%20"]    stringByReplacingOccurrencesOfString:@"'" withString:@"\\\'"] capitalizedString]; 
```

我收到的输出是**Can\'T 事件**

但是，我需要结果为**Can\'t Event**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:55:08.597

```
NSString *vendorName=@"can't event";
vendorName= [[[vendorName capitalizedString] stringByReplacingOccurrencesOfString:@" " withString:@"%20"] stringByReplacingOccurrencesOfString:@"'" withString:@"\\'"]; 
```

# c++ - std::functions 向量上的 Std::bind 在 VC10 中编译，但在 VC11 中不编译。我做错了什么？

> ID：14837603
> 
> 赞同：1
> 
> 时间：2013-02-12T16:52:01.847
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, std

从 VC10 迁移到 VC11 时，以下代码无法编译。

```
#include <algorithm>
#include <functional>
#include <vector>

using namespace std;
using namespace std::placeholders;

typedef std::function<void(int)> CB;

int main()
{
    vector<CB> m_CBs;
    int m_LongPressGesture;

  for_each(m_CBs.begin(), m_CBs.end(), bind(&CB::operator(), _1, m_LongPressGesture));
    return 0;
} 
```

错误输出是非法间接。这是完整的输出。

```
1>------ Build started: Project: CompileError, Configuration: Debug Win32 ------
1>Build started 2/12/2013 4:32:56 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\CompileError.unsuccessfulbuild".
1>ClCompile:
1>  main.cpp
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(1269): error C2100: illegal indirection
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(1152) : see reference to function template instantiation '_Rx std::_Pmf_wrap<_Pmf_t,_Rx,_Farg0,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>::operator ()<std::function<_Fty>>(_Wrapper &,_V0_t) const' being compiled
1>          with
1>          [
1>              _Rx=void,
1>              _Pmf_t=void (__thiscall std::_Func_class<void,int>::* )(int) const,
1>              _Farg0=std::_Func_class<void,int>,
1>              _V0_t=int,
1>              _V1_t=std::_Nil,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fty=void (int),
1>              _Wrapper=std::function<void (int)>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(1152) : see reference to function template instantiation '_Rx std::_Pmf_wrap<_Pmf_t,_Rx,_Farg0,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>::operator ()<std::function<_Fty>>(_Wrapper &,_V0_t) const' being compiled
1>          with
1>          [
1>              _Rx=void,
1>              _Pmf_t=void (__thiscall std::_Func_class<void,int>::* )(int) const,
1>              _Farg0=std::_Func_class<void,int>,
1>              _V0_t=int,
1>              _V1_t=std::_Nil,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fty=void (int),
1>              _Wrapper=std::function<void (int)>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\algorithm(24) : see reference to function template instantiation 'void std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>::operator ()<std::function<_Fty>&>(std::function<_Fty>)' being compiled
1>          with
1>          [
1>              _Forced=true,
1>              _Ret=void,
1>              _Fun=std::_Pmf_wrap<void (__thiscall std::_Func_class<void,int>::* )(int) const,void,std::_Func_class<void,int>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,
1>              _V0_t=std::_Ph<1> &,
1>              _V1_t=int &,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fty=void (int)
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\algorithm(24) : see reference to function template instantiation 'void std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>::operator ()<std::function<_Fty>&>(std::function<_Fty>)' being compiled
1>          with
1>          [
1>              _Forced=true,
1>              _Ret=void,
1>              _Fun=std::_Pmf_wrap<void (__thiscall std::_Func_class<void,int>::* )(int) const,void,std::_Func_class<void,int>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,
1>              _V0_t=std::_Ph<1> &,
1>              _V1_t=int &,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fty=void (int)
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\algorithm(33) : see reference to function template instantiation 'void std::_For_each<std::function<_Fty>*,_Fn1>(_InIt,_InIt,_Fn1 &)' being compiled
1>          with
1>          [
1>              _Fty=void (int),
1>              _Fn1=std::_Bind<true,void,std::_Pmf_wrap<void (__thiscall std::_Func_class<void,int>::* )(int) const,void,std::_Func_class<void,int>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,std::_Ph<1> &,int &,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,
1>              _InIt=std::function<void (int)> *
1>          ]
1>          c:\users\jedwards\documents\visual studio 2012\projects\compileerror\compileerror\main.cpp(16) : see reference to function template instantiation '_Fn1 std::for_each<std::_Vector_iterator<_Myvec>,std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>>(_InIt,_InIt,_Fn1)' being compiled
1>          with
1>          [
1>              _Fn1=std::_Bind<true,void,std::_Pmf_wrap<void (__thiscall std::_Func_class<void,int>::* )(int) const,void,std::_Func_class<void,int>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,std::_Ph<1> &,int &,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,
1>              _Myvec=std::_Vector_val<std::_Simple_types<std::function<void (int)>>>,
1>              _Forced=true,
1>              _Ret=void,
1>              _Fun=std::_Pmf_wrap<void (__thiscall std::_Func_class<void,int>::* )(int) const,void,std::_Func_class<void,int>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,
1>              _V0_t=std::_Ph<1> &,
1>              _V1_t=int &,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _InIt=std::_Vector_iterator<std::_Vector_val<std::_Simple_types<std::function<void (int)>>>>
1>          ]
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.68
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我唯一能想到的是 bind 是期待一个指针。我尝试了 ref() 但没有任何区别。

谢谢，吉姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T21:40:56.927

听起来像[http://connect.microsoft.com/VisualStudio/feedback/details/763571/](http://connect.microsoft.com/VisualStudio/feedback/details/763571/)，目前分配给我。

请注意，技术上不允许获取大多数标准库成员函数的地址（因为实现可以有额外的重载和默认参数）。

实际上会产生更好的代码的一种解决方法是使用 lambdas。Lambda 在 99% 的情况下取代了 bind()，剩下的 1% 用手写函子更好地处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:02:36.230

由于 VC 显然有一个错误（感谢 Stephan！），您可以将循环编写为：

```
for ( auto &cb : m_CBs ) cb ( m_LongPressGesture ); 
```

或者：

```
for_each ( m_CBs.begin(), m_CBs.end(), 
             [m_LongPressGesture] ( const CB &cb ) { cb ( m_LongPressGesture ); } ); 
```

# css - 在不知道宽度的情况下隐藏溢出的div内的中心图像

> ID：14837605
> 
> 赞同：13
> 
> 时间：2013-02-12T16:52:07.353
> 
> 标签：css

我有一个例如宽度为 450 像素的图像和一个只有 300 像素的容器。当图像的宽度不恒定时，是否可以使用 CSS 在容器内居中图像（某些图像可能是 450 宽，其他 600 等）。还是我需要用 JavaScript 将其居中？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-12T17:10:12.990

这有什么好处？[http://jsfiddle.net/LSKRy/](http://jsfiddle.net/LSKRy/)

```
<div class="outer">
    <div class="inner">
    <img src="http://3.bp.blogspot.com/-zvTnqSbUAk8/Tm49IrDAVCI/AAAAAAAACv8/05Ood5LcjkE/s1600/Ferrari-458-Italia-Nighthawk-6.jpg" alt="" />
    </div>
</div>

.outer {
    width: 300px;
    overflow: hidden;
}

.inner {
    display: inline-block;
    position: relative;
    right: -50%;
}

img {
    position: relative;
    left: -50%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:14:28.807

命题 1：

```
.crop {
    float:left;
    margin:.5em 10px .5em 0;
    overflow:hidden; /* this is important */
    border:1px solid #ccc;
}
/* input values to crop the image: top, right, bottom, left */
.crop img {
    margin:-20px -15px -40px -55px;
} 
```

提案 2：

```
.crop{
    float:left;
    margin:.5em 10px .5em 0;
    overflow:hidden; /* this is important */
    position:relative; /* this is important too */
    border:1px solid #ccc;
    width:150px;
    height:90px;
}
.crop img{
    position:absolute;
    top:-20px;
    left:-55px;
} 
```

命题 3：

```
.crop{
    float:left;
    position:relative;
    width:150px;
    height:90px;
    border:1px solid #ccc;
    margin:.5em 10px .5em 0;
}
.crop p{
    margin:0;
    position:absolute;
    top:-20px;
    left:-55px;
    clip:rect(20px 205px 110px 55px);
} 
```

命题 4（保持学校效率）：

```
.container {
    width:400px;
    height:400px;
    margin:auto;
    overflow:hidden;
    background:transparent url(your-image-file­.img) no-repeat scroll 50% 50%;
} 
```

当然，您需要调整 .css 以满足您自己的需要

继续。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-12T17:00:31.870

but instead of hiding part of theimage why don't you put it like

```
<div id="container" style="width: 300px">
  <img src="yourimage" width="100%">
</div> 
```

# java - GUI 更新前线程休眠 (Java 6)

> ID：14837608
> 
> 赞同：1
> 
> 时间：2013-02-12T16:52:19.347
> 
> 标签：java, multithreading, user-interface

```
public static void moveTo(Coordinate destination) {

    changeState(State.NAVIGATION);
    controlPnl.addRemote(Remote.createRemote(remoteType.NAVIGATION));

    dmc.moveTo(destination);

    changeState(State.IMMEDIATE);
    controlPnl.addRemote(Remote.createRemote(remoteType.IMMEDIATE));
} 
```

在此代码中，addRemote 方法使用新按钮更新 controlPnl GUI。dmc.moveTo 方法中最多有两个 Thread.sleep 调用，我认为它们是在 controlPnl GUI 更新之前被调用的。我已经注释掉了 dmc.moveTo 之后的两个方法调用，这会将 GUI 更改回调用之前的状态，并且 controlPnl 直到 moveTo 完成执行才完成更新。我需要的是 GUI 在 moveTo 方法开始执行之前完成更新并使线程进入睡眠状态。有什么方法可以在 Java 6 中实现这一点吗？

如果重要，moveTo 方法会将 LEGO Mindstorm 机器人移动到用户定义的路径上的指定点。正在更新的 GUI 提供 Swing 组件（JButtons 和 JRadioButtons）供用户在机器人导航时控制机器人。addRemote 方法更改了一组 Swing 组件供用户使用，moveTo 方法向机器人发送命令以实际执行运动（通过告诉它的电机移动，休眠正确的时间量，然后告诉它的电机停止移动）。我正在使用状态机模式，此方法是处理来自 UI 的事件的控制器的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:58:34.163

You have a single GUI thread. Don't use it to call other things; if you do, those things have to complete before anything else is going to happen in your GUI.

At the very least you would want to start a new thread to perform your `dmc.moveTo(destination)`. More than likely this isn't the only place you're doing this, and probably want an [Executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html) set up to perform these tasks.

Without knowing more about your code (especially since you're using a static method) I can't comment on how you would want to set up the `Executor` but the simplest example of using a `Thread` would be:

```
 public static void moveTo(final Coordinate destination) {

    changeState(State.NAVIGATION);
    controlPnl.addRemote(Remote.createRemote(remoteType.NAVIGATION));

    new Thread(new Runnable() {
                   public void run() {
                       dmc.moveTo(destination);
                       changeState(State.IMMEDIATE);
                       controlPnl.addRemote(Remote.createRemote(remoteType.IMMEDIATE));
                   }
               }).start();
} 
```

This creates a new `Thread` that executes your (anonymous) `Runnable` which performs your `moveTo()`. Note this is far less efficient than having an `Executor` that is ready to run your task; it has to create a new `Thread` every time. However, if that's not an issue in terms of the performance you need then it's perfectly fine. Also note that because I'm referencing `destination` directly inside the anonymous inner class, it has to be declared `final` when passed into your method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:06:00.507

由于您`moveTo`需要很长时间，您不应该在主事件处理线程上执行它。相反，`moveTo`更新 GUI 并在单独的线程中开始实际移动。移动完成后，使用`SwingUtilities.invokeLater`进行第二组 GUI 更新。

```
private static ExecutorService executor = Executors.newCachedThreadPool();

public static void moveTo(final Coordinate destination) {

    changeState(State.NAVIGATION);
    controlPnl.addRemote(Remote.createRemote(remoteType.NAVIGATION));

    executor.execute(new Runnable() {
      public void run() {
        dmc.moveTo(destination);
        SwingUtilities.invokeLater(new Runnable() {
          public void run() {
            changeState(State.IMMEDIATE);
            controlPnl.addRemote(Remote.createRemote(remoteType.IMMEDIATE));
          }
        });
      }
    });
} 
```

这种方式`moveTo`会执行最初的一组 GUI 更新，然后立即返回，释放事件循环以保持 GUI 响应，但第二个`changeState`会延迟到`dmc.moveTo`完成。

（将这些东西分解成单独的方法可能比使用 Runnable-in-a-Runnable 匿名类更有意义）

# php - PHP Form is not functioning

> ID：14837613
> 
> 赞同：1
> 
> 时间：2013-02-12T16:52:28.973
> 
> 标签：php, forms

I'd greatly appreciate some help with my PHP contact form. I've followed a number of tutorials to try and get this working and I am still without luck. The code is as follows.

N.B. I am using styling elements defined within the Twitter Bootstrap Framework and the form appears in a modal-style popup (although I can't see why this would affect the form).

Is there anything else I might have to activate/configure on my hosting side apart from having PHP enabled.

FORM CODE:

```
<form method="POST" action="mail.php">
    <fieldset>
      <input type="text" name="first_name" placeholder="First Name">
      <input type="text" name="last_name" placeholder="Last Name">
      <input type="email" name="email" placeholder="Email Address">
      <div class="controls controls-row">
        <input type="date" name="check_in" placeholder="Check in Date"><span class="help-inline">Check-in</span>
      </div>
      <div class="controls controls-row">
        <input type="date" name="check_out" placeholder="Check out Date"><span class="help-inline">Check-out</span>
      </div>
      <input type="number" name="rooms" min="1" max="7" placeholder="Number of Rooms">
      <input type="number" name="occupants" min="1" max="14" placeholder="Number of Occupants">
      <textarea rows="3" name="additional" input class="input-xparge" placeholder="Additional requirements" class="span5"></textarea>
    </fieldset>

    <div class="modal-footer">
      <button type="submit" input type="submit" id="submit" class="btn btn-block btn-large btn-success"  value="submit">Submit</button>
    </div>
  </form> 
```

PHP CODE:

```
<?php
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$email = $_POST['email'];
$check_in = $POST['check_in'];
$check_out = $POST['check_out'];
$rooms = $POST['rooms'];
$occupants = $POST['occupants'];
$additional = $_POST['additional'];
$from = "From: $first_name";
$to = "lloyd.rees09@bathspa.ac.uk";
$subject = "New Booking Enquiry";

$body = "First Name: $first_name\n Last Name: $last_name\n Email: $email\n Check In: $check_in\n Check Out: $check_out\n Number of Rooms: $rooms\n Number of Occupants: $occupants\n Additional Information: $additional"; 

if ($_POST['submit']) {
 if (mail ($to, $subject, $body, $from)) { 
     echo '<p>Your message has been sent!</p>';
   } else { 
       echo '<p>Something went wrong, go back and try again!</p>'; 
   }
} 
```

?>

Thank you kindly in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:56:13.083

don't you need to add name="submit" to the 'button' tag?

in your php, you are testing 'if ($_POST['submit']) {'

and $_POST['submit'] might not being getting set without name="submit" in that tag

# html - 有没有办法可以包含当前的网页网址？

> ID：14837616
> 
> 赞同：0
> 
> 时间：2013-02-12T16:52:51.627
> 
> 标签：html, url, webpage

我有一个网页，我希望人们在上面填写信息，然后通过电子邮件向我发送包含该信息的回复。有没有办法可以使用 html 在来自该页面的电子邮件中包含 url？

我不知道如何开始。我在这里看到了一个类似的问题：[获取当前网页 URL](https://stackoverflow.com/questions/12224957/get-current-webpage-url)

但我不明白如何将 src: url 转到我当前所在的页面之一。似乎我应该能够引用它，但我不确定如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:56:20.963

看到[这个](https://stackoverflow.com/questions/1034621/get-current-url-with-javascript)问题。要使用 JavaScript 获取网页 URL，您可以使用`document.URL`. 然后，您可以将其用于您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:57:48.970

这对于直接的 html 是不可能的。您可以使用 Javascript 更改`src`属性：

```
document.getElementById("myElement").setAttribute("src", window.location.href); 
```

在此示例中，假设您尝试使用“ ”更改`src`元素的属性。`id``myElement`

# javascript - 购物篮通知

> ID：14837617
> 
> 赞同：0
> 
> 时间：2013-02-12T16:52:54.980
> 
> 标签：javascript, shopping-cart, shopping

我需要一个购物篮通知，它会在购物篮上弹出一个带有购物篮中物品数量的红色圆圈，如果购物篮中有 0 件物品，它就会消失，就像下面网站中的那个一样。

[http://www.howies.co.uk/beach-towel.html](http://www.howies.co.uk/beach-towel.html)

没有 JQuery 可以做到这一点吗？

到目前为止，这是我的代码。

**Javascript**

```
if($('#no_items').html() == 0){
$(".circle").hide();} 
```

**HTML**

```
<div class="circle"><div id="no_items" style="color:white">0</div></div> 
```

[http://jsfiddle.net/QjEcx/1/](http://jsfiddle.net/QjEcx/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:12:27.020

当然！您可以使用 innerHTML 或 innerText：

```
if(document.querySelector('#no_items').innerText === '0'){
    document.querySelector(".circle").style.display = 'none';
} 
```

**更新**

或根据要求使用弹出动画：http: [//jsfiddle.net/ARTsinn/QjEcx/2/](http://jsfiddle.net/ARTsinn/QjEcx/2/)

# java - 为什么我以编程方式添加的 TableRows 不与我的表头一致？

> ID：14837619
> 
> 赞同：0
> 
> 时间：2013-02-12T16:53:06.480
> 
> 标签：java, android, textview, tablelayout, tablerow

**我的目标：**

我正在尝试使用一堆以编程方式添加的视图填充一个表（带有我在 xml 中创建的标题）。计划是将一些添加`TextViews`到 a`TableRow`中，然后将其添加`TableRow`到创建的最终表中。我尝试按照[本教程](http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout)进行操作。

**我的问题：**

以编程方式添加的视图不会与 xml 创建的 TextView 规定的列内联。请看下面的截图：

![在此处输入图像描述](../Images/7be41bf2f30704f44af5c6a4e17133f1.png)

我的代码：1.) XML

```
<TableLayout
            android:id="@+id/tableViewTable"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="10dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_marginRight="@dimen/margin_EvalProblemTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalProblemTableBottom"
                    android:text="@string/str_EvalProblemNumber"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_marginRight="@dimen/margin_EvalProblemTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalProblemTableBottom"
                    android:text="@string/str_EvalProblemString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_marginRight="@dimen/margin_EvalProblemTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalProblemTableBottom"
                    android:text="@string/str_EvalProblemCorrectSolution"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_marginRight="@dimen/margin_EvalProblemTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalProblemTableBottom"
                    android:text="@string/str_EvalProblemUserSolution"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_marginRight="@dimen/margin_EvalProblemTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalProblemTableBottom"
                    android:text="@string/str_EvalProblemDuration"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>            
        </TableLayout> 
```

2.）Java：

```
public class EvalActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_eval);

        TableLayout tableViewTable = (TableLayout) findViewById(R.id.tableViewTable);

        TableRow tr = new TableRow(this);
        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        Button b = new Button(this);
        b.setText("Button");
        b.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView t1 = new TextView(this);       
        t1.setText("I am textView1");
        t1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView t2 = new TextView(this);       
        t2.setText("I am textView2");
        t2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView t3 = new TextView(this);       
        t3.setText("I am textView3");
        t3.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView t4 = new TextView(this);       
        t4.setText("I am textView3");
        t4.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        tr.addView(b);
        tr.addView(t1);
        tr.addView(t2);
        tr.addView(t3);
        tr.addView(t4);

        tableViewTable.addView(tr,(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)));
    } 
```

如何将“硬编码”xml-TableRow 与以编程方式添加的视图和行一起加入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:17:45.767

尝试手动向布局参数添加对齐规则，如下所示：

```
LayoutParams myParams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
myParams.addRule(RelativeLayout.ALIGN_RIGHT, R.id.tableColumnX);

TextView t3 = new TextView(this);       
t3.setText("I am textView3");
t3.setLayoutParams(myParams); 
```

# cuda - 流调度顺序

> ID：14837622
> 
> 赞同：0
> 
> 时间：2013-02-12T16:53:15.980
> 
> 标签：cuda, cuda-streams

我看到流程一和流程二（如下）的方式是相同的，因为它们花费的时间相同。我错了吗？

```
allOfData_A= data_A1 + data_A2
allOfData_B= data_B1 + data_B2
allOFData_C= data_C1 + data_C2
Data_C is the output of the kernel operation of both Data_A & Data_B.  (Like C=A+B)
The HW supports one DeviceOverlap (concurrent) operation. 
```

流程一：

```
MemcpyAsync data_A1 stream1 H->D
MemcpyAsync data_A2 stream2 H->D
MemcpyAsync data_B1 stream1 H->D
MemcpyAsync data_B2 stream2 H->D
sameKernel stream1
sameKernel stream2
MemcpyAsync result_C1 stream1 D->H
MemcpyAsync result_C2 stream2 D->H 
```

流程二：（操作相同，顺序不同）

```
MemcpyAsync data_A1 stream1 H->D
MemcpyAsync data_B1 stream1 H->D
sameKernel stream1
MemcpyAsync data_A2 stream2 H->D
MemcpyAsync data_B2 stream2 H->D
sameKernel stream2
MemcpyAsync result_C1 stream1 D->H
MemcpyAsync result_C2 stream2 D->H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:38:50.420

使用 CUDA 流允许程序员通过将依赖操作放在同一个流中来表达工作依赖关系。不同流中的工作是独立的，*可以*同时执行。

在没有 HyperQ（计算能力 1.0 到 3.0）的 GPU 上，您可能会得到错误的依赖关系，因为 DMA 引擎或计算的工作被放入单个硬件管道中。计算能力 3.5 带来了 HyperQ，它允许多个硬件管道，因此您不应该得到错误的依赖关系。simpleHyperQ示例说明了这[一点](http://docs.nvidia.com/cuda/cuda-samples/index.html#simplehyperq)，[文档](http://docs.nvidia.com/cuda/samples/6_Advanced/simpleHyperQ/doc/HyperQ.pdf)显示了图表以更清楚地解释发生了什么。

简而言之，在没有 HyperQ 的设备上，您需要对工作进行广度优先启动以获得最大并发性，而对于具有 HyperQ 的设备，您可以进行深度优先启动。避免错误的依赖很容易，但不必担心它更容易！

# java - 尝试使用 Java 将 SQL 查询插入命令行窗口

> ID：14837625
> 
> 赞同：0
> 
> 时间：2013-02-12T16:53:21.220
> 
> 标签：java, sql, command-prompt

第一篇文章 - 完成语言新手，但你必须从某个地方开始。目前我的问题如下

1：打开命令行窗口并转到特定目录

2：从那里运行第三方 .exe (LogParser.exe)，并使用 SQL 查询作为其参数

我知道 Runtime.getRuntime().exec("cmd.exe"); 但这只是调出命令窗口。

但是我如何完成第二步，即插入查询？是否可以将 SQL 查询作为字符串处理并将其传递给命令窗口？

例如，命令窗口的输出看起来像这样

Logparser.exe“从应用程序中选择前 5 个 *”

也许这是非常基本的，但如果是道歉，但基本也是我现在所处的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:15:14.763

也许是这样的：

```
ProcessBuilder pb = new ProcessBuilder("c:\path\to\LogParser.exe", "select top 5 * from application");
Process p = pb.start();
InputStreamReader is = new InputStreamReader(p.getInputStream());
p.waitFor();
char c;
while ((c = is.read()) != -1) {
  System.out.print(c);
}
is.close(); 
```

如果您绝对必须使用命令提示符，那么您可以使用`p.getOutputStream()`将字符串发送到其他进程的输入缓冲区 (STDIN)。

（在 Unix 上用 Groovy 编写的“ls”、“-l”测试了上面的代码，所以 YMMV。）

# git - 是否可以在给定时克隆 git repo “ ：/ 与詹金斯

> ID：14837627
> 
> 赞同：3
> 
> 时间：2013-02-12T16:53:24.233
> 
> 标签：git, jenkins

我所拥有的是：

```
a.b.c.d:/x/www/app 
```

现在，如果我发出命令：

git clone abcd:/x/www/app /home/user

系统提示我输入我的 LDAP 密码，然后成功克隆应用程序。

但是当我对 Jenkins 使用同样的方法时，Jenkins 给出了错误：

无法连接到存储库：命令“/usr/bin/git ls-remote -h abcd:/x/www/app HEAD”返回状态码 128：stdout：stderr：主机密钥验证失败。致命：远端意外挂断

我正在使用 Jenkins 版本 1.500 和 Git 插件版本 1.1.26

错误：

```
Using strategy: Default
Cloning the remote Git repository
Cloning repository git:///$GIT_USER@a.b.c.d:/var/www/app
git --version
git version 1.7.9.5
ERROR: Error cloning remote repo 'origin' : Could not clone git:///$GIT_USER@a.b.c.d:/var/www/app
hudson.plugins.git.GitException: Could not clone git:///$GIT_USER@a.b.c.d:/var/www/app
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:273)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1044)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:986)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2348)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: hudson.plugins.git.GitException: Command "/usr/bin/git clone --progress -o origin git:///$GIT_USER@a.b.c.d:/var/www/app /home/user/workspace/app" returned status code 128:
stdout: Cloning into '/home/user/workspace/app'...

stderr: fatal: unable to connect to :
: Name or service not known

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:897)
    at hudson.plugins.git.GitAPI.access$000(GitAPI.java:42)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:269)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:248)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:248)
    ... 12 more
Trying next repository
ERROR: Could not clone repository
FATAL: Could not clone
hudson.plugins.git.GitException: Could not clone
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1056)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:986)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2348)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:54:46.380

git:// 协议不使用身份验证。

如果要使用该协议，则需要在服务器端存储库上启动 git-daemon。

如果您想要使用基于用户名/密钥的身份验证的 ssh，请改用 ssh://$USER/path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:37:15.703

你可以使用 git+ssh://mylogin@mygithost:/var/git/race.git

如果您使用 ssh，您可以在 jenkins 用户主目录中编辑或创建：~/.ssh/config 以存储 ssh 密钥

```
Host mygithost
        HostName 192.168.130.43
        User mylogin
        IdentityFile ~/.ssh/.id_rsa 
```

使用 ssh 密钥，您可以在 git 服务器 (~/.ssh/authorized_keys) 上添加公钥以防止密码验证...

# .net - 在多线程服务中处理 IPC 的好方法是什么？

> ID：14837642
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:06.730
> 
> 标签：.net, sql-server, ipc, msmq

许多年前，我们编写了一个“多线程”客户端/服务器报告生成系统。

它基于 VB6、SQL Server 7、Crystal Reports 7 和 MSMQ，混合了 NT4/Win2K/Win98

它在服务器上运行多个 EXE（多线程），侦听来自客户端的循环请求以生成报告并将消息发送回客户端计算机上的托盘应用程序。

这一切都运行得非常好，直到 MSMQ 变得难以支持，我们放弃了它，以便在客户端机器上进行单线程报告。

现在我们必须使用现代技术重新创建该系统。

所以：

*   SQL Server 2005 及更高版本
*   Win Server 2003 及以上版本
*   .NET 3.5（是的，我知道，不是那么现代）
*   “网络前端”（无关紧要，因为所有 IPC 都是服务器端，尽管在多个服务器上）
*   水晶报表 10.5

现在，大多数情况下，没有什么是困难的。

但是在被 MSMQ 烧毁之后，我们想要一些可以在没有一百种不同的客户 IT 策略的情况下部署的东西，从而无法支持。

我在这个位置的默认回退很简单。使用 SQL Server 存储作业列表和这些作业的状态。

我们都准备好有一个“ReportLog”表来存储作业，我只需要向它添加状态字段，可能：

*   运行（位，不为空）
*   完成（位，不为空）

这很愚蠢，很简单，但会起作用。

**我的愚蠢解决方案**

好的，所以我构建了一个 Windows 服务，它有一个线程监视表，每次出现新作业时都会产生线程池作业。每个线程在完成它的单个报告时都会返回 OK 或 Error 并死掉。

客户端扫描日志表以查看作业是否完成。

好处：

1.  它总是有效的，没有 IT 部门会妨碍我们
2.  很简单，大家都会明白的
3.  没有额外的技术或配置。（MSMQ 总是需要安装和配置）

缺点：

1.  客户不知道服务的状态。
2.  它是双重被动的，客户端和服务器都在不断地轮询一个表
3.  如果启动了多台服务器，它们将开始双重渲染报告
4.  我能想到的（3）的唯一解决方案是表上的某种排他写锁（Yuck！）
5.  感觉就像圆孔中的方钉，一种解决方法而不是解决方案。IMO 这不是数据库的用途！

问题 1：如果我的愚蠢解决方案是一个好主意，我该如何防止劣势（4）？

问题2：说真的，难道没有比MSMQ 和SQL Server 表轮询更好的东西吗？至少具有优势（1）和（3）的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:22:57.490

如果您已经在使用 SQL Server，那么[SQL Server Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx)是 MSMQ 的最佳替代品，尤其是在这种情况下。

缺点 #2、3、4 和 5 会自动解决，而 #1 可以通过一些工作来解决。您应该能够保留优势 #1 和 3，但可能会失去 #2。

我已经以这种方式实现了几个基于服务的解决方案，特别是您希望使用[外部激活](http://msdn.microsoft.com/en-us/library/ms171617%28SQL.105%29.aspx)方法，也称为[基于事件的激活](http://msdn.microsoft.com/en-us/library/ms171581%28SQL.105%29.aspx)。

该文档指出：

> 同一任务的消息是同一对话的一部分。在每个对话中，Service Broker 保证应用程序按照消息发送的顺序只接收每条消息一次。

# static - 分配数组的初始状态

> ID：14837646
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:18.550
> 
> 标签：static, fortran

在 fortran 中，假设未分配数组`.not.allocated`的状态是，并且如果使用`save`属性声明可分配数组的状态在调用之间保留，是否安全？换句话说，除非输出格式差异很小，是否可以安全地假设以下程序将始终导致输出：

```
 First time here
 Been here before 
```

测试程序：

```
 program main
    call sub()
    call sub()
  end program main

  subroutine sub()
    real,save,allocatable,dimension(:) :: a
    if(.not. allocated(a))then
       print*,"First time here"
       allocate(a(10))
    else
       print*,"Been here before"
    endif
  end subroutine sub 
```

我问主要是因为我知道你不能假设指针的默认关联是`.not.associated`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:06:01.073

是的！

现在我发现你需要 30 个字符...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:44:07.310

是的，这是 Fortrans 可分配数组的优点之一。但是，如果由于某些原因，您必须使用指针，您可以通过以下方式获得类似的效果：

```
program main
  call sub()
  call sub()
end program main

subroutine sub()
  real, pointer, dimension(:), save :: a => null()
  if(.not. associated(a))then
    print*,"First time here"
    allocate(a(10))
  else
    print*,"Been here before"
  endif
end subroutine sub 
```

该`save`属性在这里是可选的，因为变量声明中的赋值暗示了这一点。

# c# - 无法将文本拖入 WPF 窗口

> ID：14837647
> 
> 赞同：1
> 
> 时间：2013-02-12T16:54:19.657
> 
> 标签：c#, wpf, drag-and-drop, window

我正在尝试设置一个 WPF 窗口，以便它可以通过`Drag and Drop`. 如果我创建一个新项目并将窗口设置为以下内容：

```
<Window x:Class="DropShare.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300" AllowDrop="True" DragEnter="Window_DragEnter">

    <Grid>

    </Grid>
</Window> 
```

并将代码隐藏设置为：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();
    }

    private void Window_DragEnter(object sender, DragEventArgs e)
    {

    }
} 
```

我只会`DragEnter`因为文件而被解雇。它*永远不会*因为其他任何东西而触发——文本、图像等。

有什么我想念的吗？我读过的所有教程似乎都表明这就是所需要的，因为`DragEnter`事件处理程序让我说明我接受的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:09:45.233

所以你的代码对我来说很好。但是试试这个...

在您的窗口中：

```
<Label Background="Purple" HorizontalAlignment="Center" VerticalAlignment="Center" Content="Drag from here!" MouseDown="Label_MouseDown"/> 
```

在你的代码后面：

```
private void Label_MouseDown(object sender, MouseButtonEventArgs e)
{
    DragDrop.DoDragDrop(this, "This is just a test", DragDropEffects.All);
} 
```

然后从标签拖到窗口中，看看你的事件是否触发。

如果这可行，它可能与 Visual Studio 和您的外部环境之间的权限级别有关（可能）。

看：

[https://superuser.com/questions/59051/drag-and-drop-file-into-application-under-run-as-administrator](https://superuser.com/questions/59051/drag-and-drop-file-into-application-under-run-as-administrator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:05:23.867

在 WPF 中拖放功能总是要处理`DragDrop`类，请[在此处查看](http://gergelykoncz.com/2011/02/16/implement-drag-and-drop-operations-within-and-across-applications/)如何在应用程序之间进行拖放

# html - 是否建议在 alt 属性中使用 ® 符号？

> ID：14837648
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:19.813
> 
> 标签：html

是否建议在`<img>`标签`alt`属性中使用 ® 符号？我很想知道使用注册符号是否存在问题，例如在某些浏览器中无法正确呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:06:28.883

这完全取决于您对文件的字符编码。如果编码设置正确，浏览器应该会正确显示。[规范](http://www.w3.org/TR/html5/embedded-content-0.html#alt)中没有任何其他建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:17:56.783

根据规范，`alt`属性值可以包含任何字符（尽管某些字符需要在 HTML 标记中转义）。在实践中，旧浏览器在这方面有很多限制，但现在几乎不相关了。

主要问题是：1）当属性值呈现为文本时，可用的字体是否包含字符？最可能。“®”字符出现在所有普通字体中。2）当属性值以语音或盲文呈现时，会发生什么？我不会那么肯定这一点。语音浏览器可能不知道如何处理特殊字符。您是否真的希望将 alt="ACME® and Foobar® products" 读作“ACME 注册标志和 Foobar 注册标志产品”？它有什么用途？

还有字体质量问题。许多字体包含一个相当小的“®”，而像 Cambria 这样的少数字体包含一个相当大的“®”。用于呈现`alt`属性的字体可能不在作者的控制范围内。（在许多浏览器中，它受 CSS 影响，但例如 IE 9 使用由系统设置确定的字体。）

底线是：不，这是不可取的，但在技术上是可行的，但存在各种风险。

# ms-access - MS Access：保存子记录时更新父记录

> ID：14837650
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:22.293
> 
> 标签：ms-access, sql-update, ms-access-2010

我创建了 2 个表；资产和资产运动。我还创建了主资产表单和资产移动表单。AssetMovements 表单本质上是 Assets 表单的副本，但它具有 AssetMovements 表作为它的记录源。我在 AssetMovements 表（AssetTag 字段）中创建了一个查找，因此用户可以从组合框中选择一个资产标签，该资产的详细信息将自动填充到表单上的其余字段中。表单上唯一可编辑的字段是指员工的“位置”和“分配给”字段。现在，一切正常，但问题是，如果我使用 AssetMovements 表单创建新记录并保存它，则位于“资产”表中的原始记录中的“位置”字段将不会更新。同样如此为了 '

每当在该记录上创建新的 AssetMovement 时，是否有办法更新 Assets 表中的主要资产记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:24:59.653

听起来您正在尝试做的是跟踪资产的历史（它属于哪里和谁）。执行此操作的自然方法是更新资产，并在 AssetMovements 表中记录更改。

在许多数据库中，您可以使用触发器来完成此操作。无论您是通过 UI 还是直接 SQL 查询更新资产，它都不会失败。但是，MS Access 本身没有触发器。因此，您将仅限于在 UI 中执行此操作。

您可以在 UI 中通过将更新后事件添加到表单并将更改的记录复制到 AssetMovements 来执行此操作。不是反过来。否则，在新资产的情况下，您将首先创建 AssetMovement，然后再创建资产。

我也使用了 HansUp 的建议 - 即将位置/分配放入 AssetMovements，并在表单/报告中显示最新值。我对此不满意的是，它使表单更加复杂，如果您有很多更新发生，您最终可能会受到性能影响。

再说一次，如果您的数据库变得足够大以至于性能受到明显影响，那么您可能应该将数据迁移到另一种数据库。

# c# - 在共享主机上停止网站的单个/所有进程

> ID：14837652
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:24.400
> 
> 标签：c#, asp.net, rackspace, kill-process

我有一个托管在 Rackspace 云站点上的 ASP.NET 网站。

我有一些 C# 代码正在运行，它遍历文本文件并将记录插入 SQL Server 网站。目前我正在运行此代码并且正在上传记录，但我想停止上传。

我尝试从网站上删除 web.config（如 Rackspace 代表所建议的那样），但我仍然看到数据库中上传的记录。

有没有办法让我停止运行代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:20:16.657

如果您要求他们回收您的 AppPool，那应该会停止处理。

# mysql - 无法启动 MySql

> ID：14837653
> 
> 赞同：2
> 
> 时间：2013-02-12T16:54:24.793
> 
> 标签：mysql, linux, sockets, ubuntu

我们的服务器已经运行 mysql 一年多了。我运行了一组 sql 脚本来构建一个相当大的数据库，在这些脚本的中间，我开始收到我失去连接的错误。据我们所知，没有人做过任何其他事情。当我尝试登录 mysql 时，我得到了：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

当我尝试重新启动 mysql 时，我得到：

```
# sudo service mysql restart
stop: Unknown instance:
start: Job failed to start 
```

error.log 显示：

```
130212  9:37:51 [Note] Plugin 'FEDERATED' is disabled.
130212  9:37:51 InnoDB: The InnoDB memory heap is disabled
130212  9:37:51 InnoDB: Mutexes and rw_locks use GCC atomic builtins
130212  9:37:51 InnoDB: Compressed tables use zlib 1.2.7
130212  9:37:51 InnoDB: Using Linux native AIO
130212  9:37:51 InnoDB: Initializing buffer pool, size = 10.0G
130212  9:37:51 InnoDB: Completed initialization of buffer pool
130212  9:37:51 InnoDB: highest supported file format is Barracuda.
InnoDB: Log scan progressed past the checkpoint lsn 2186809272046
130212  9:37:51  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Doing recovery: scanned up to log sequence number 2186814514688
InnoDB: Doing recovery: scanned up to log sequence number 2186816162838
InnoDB: 1 transaction(s) which must be rolled back or cleaned up
InnoDB: in total 27964 row operations to undo
InnoDB: Trx id counter is 18834200
130212  9:37:51  InnoDB: Starting an apply batch of log records to the database...
InnoDB: Progress in percents: 0 1 2 3 4 5 6 7 8 9 10 11 InnoDB: Database page corruption on disk or a failed
InnoDB: file read of page 4424818.
InnoDB: You may have to recover from a backup.
130212  9:37:51  InnoDB: Page dump in ascii and hex (16384 bytes):
 len 16384; hex 058425e20043847200356a3f003e3720000001fd2807769645bf00000000000000000000000000ef31a083ca0000000031980005000003c8000$
InnoDB: End of page dump
18 130212  9:37:51  InnoDB: Page checksum 1501194131, prior-to-4.0.14-form checksum 441953139
InnoDB: stored checksum 92546530, prior-to-4.0.14-form stored checksum 1240647222
InnoDB: Page lsn 509 671577750, low 4 bytes of lsn at page end 441447404
InnoDB: Page number (if stored to page already) 4424818,
InnoDB: space id (if created with >= MySQL-4.1.1 and stored already) 0
InnoDB: Page may be an index page where index id is 1096815
InnoDB: Database page corruption on disk or a failed
InnoDB: file read of page 4424818.
InnoDB: You may have to recover from a backup.
InnoDB: It is also possible that your operating
InnoDB: system has corrupted its own file cache
InnoDB: and rebooting your computer removes the
InnoDB: error.
InnoDB: If the corrupt page is an index page
InnoDB: you can also try to fix the corruption
InnoDB: by dumping, dropping, and reimporting
InnoDB: the corrupt table. You can use CHECK
InnoDB: TABLE to scan your table for corruption.
InnoDB: See also http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery.
InnoDB: Ending processing because of a corrupt database page.
130212  9:37:51  InnoDB: Assertion failure in thread 140114781574912 in file buf0buf.c line 3603
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery.
16:37:51 UTC - mysqld got signal 6 ;
This could be because you hit a bug. It is also possible that this binary
or one of the libraries it was linked against is corrupt, improperly built,
or misconfigured. This error can also be caused by malfunctioning hardware.
We will try our best to scrape up some info that will hopefully help
diagnose the problem, but since we have already crashed,
something is definitely wrong and this may fail.

key_buffer_size=16777216
read_buffer_size=131072
max_used_connections=0
max_threads=151
thread_count=0
connection_count=0
It is possible that mysqld could use up to
key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 346681 K  bytes of memory
Hope that's ok; if not, decrease some variables in the equation.

Thread pointer: 0x0
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 0 thread_stack 0x30000
/usr/sbin/mysqld(my_print_stacktrace+0x29)[0x7f72aa2435b9]
/usr/sbin/mysqld(handle_fatal_signal+0x3d8)[0x7f72aa12c548]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0)[0x7f72a8c8dcb0]
/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x35)[0x7f72a82f6425]
/lib/x86_64-linux-gnu/libc.so.6(abort+0x17b)[0x7f72a82f9b8b]
/usr/sbin/mysqld(+0x605429)[0x7f72aa32d429]
/usr/sbin/mysqld(+0x631b69)[0x7f72aa359b69]
/usr/sbin/mysqld(+0x5c20a8)[0x7f72aa2ea0a8]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x7e9a)[0x7f72a8c85e9a]
/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f72a83b3cbd] 
```

我找不到任何为 mysql 运行的东西，包括任何套接字。我正在接替以前的 SysAdmin，并且对 linux 和 MySql 还很陌生。我们必须尽快让这个系统重新上线。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:12:16.680

您是否尝试将以下行添加到您的 /etc/mysql/my.cnf 然后重新启动服务器？

```
[mysqld]
innodb_force_recovery = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:44:15.943

要添加到@elico3000，您现在需要转储损坏的表和数据以修复 innodb fs。有很多方法可以做到这一点。您可以通读日志以确定故障点和可能的表名，然后转储并重新创建这些特定表。或者您可以使用单个命令转储整个 MySQL 数据库和所有模式，但这需要一些时间，具体取决于您的数据库有多大。无论哪种方式，一旦您解决了损坏的表，您就可以将 innodb_force 选项设置为 0 并重新启动 mysqld_safe。

这是一个很好的关于 MyISAM 和 InnoDB MySQL 实例的恢复选项的教程，涵盖了一些选项。在这里指出你要容易得多，而不是在这个答案中再次重复命令和概念。

祝你好运，一旦你尝试了其中一种选择，就回来提出更尖锐的问题。那里可能有更多教程，但我在开发中使用它来重建我的开发数据库，​​它有很多信息。

看[这里](http://www.mysqlperformanceblog.com/2008/07/04/recovering-innodb-table-corruption/)

# facebook - 从 Facebook PHP SDK 获取访问令牌无法正常工作

> ID：14837659
> 
> 赞同：2
> 
> 时间：2013-02-12T16:54:39.970
> 
> 标签：facebook, codeigniter, facebook-php-sdk, facebook-access-token

我正在尝试使用 PHP SDK 3.2.2 从 Facebook 检索访问令牌，这是我在 Facebook 成功登录后放置在重定向 URL 中的代码。我的问题是**$this->facebook->getAccessToken()**在用户授予对 APP 的访问权限后没有返回用户访问令牌，只是一个格式为：'AppId|AppSecret' 的字符串，我必须包含代码手动获取用户访问令牌。这项工作，但我不知道为什么当我使用 getAccessToken 时没有返回正确的令牌。我还想知道是否有比使用 $code 更好的方法来检索用户访问令牌，因为我觉得这不是一个好方法。

注意：我使用 $this->facebook 因为我将它作为 Codeigniter 库加载。

```
 $access_token  = $this->facebook->getAccessToken();

  //-------------------------------------------------------------------------
  //echo '<br/>Access Token: ' . $access_token;
  // Generare Token if not created:
  $code = $_REQUEST["code"];

  if ( isset($code) ) {
     //echo '<br/>Code Enviado: ' . $code;
     //exit();
     $appId     = $this->facebook->getAppId();
     $appSecret = $this->facebook->getAppSecret();

     $redirectTo = base_url('asociar/acc_facebook/step2/');

     $token_url="https://graph.facebook.com/oauth/access_token?client_id="
        . $appId . "&redirect_uri=" . urlencode($redirectTo)
        . "&client_secret=" . $appSecret
        . "&code=" . $code . "&display=popup";
     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     $access_token = $params['access_token'];

     //echo '<br/>Repitiendo el Token';

     $this->facebook->setAccessToken($access_token);
     //echo '<br/>Second Access Token Fijado: ' . $access_token;
  }
  //----------------------------------------------------------------------- 
```

# 更新：

此问题是由于我将 CI 与 PHP SDK 一起使用（请查看我自己的答案），但该答案对 Facebook PHP SDK 有此问题的任何人都有效（请查看 @Imbru 答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-15T08:24:05.183

@Imbru 指出了我的解决方案，如果有任何功劳，请给他。

考虑到这一点：使用 Codeigniter 时，它将所有会话数据保存在 cookie 中并将其发送到浏览器，而不是将其存储在服务器中。是的，他们这样做了，这会导致许多其他问题（例如，当您存储大量数据时会丢失会话，而浏览器只会将其中的一部分发回给您，但那是另一段历史了）。

使用 CI，解决方案是用另一个使用 PHP $_SESSION 管理会话的会话类覆盖会话核心类，例如[https://bitbucket.org/xperez/core-session-storage-for-codeigniter](https://bitbucket.org/xperez/core-session-storage-for-codeigniter)（我在我的项目中使用它，并像魅力一样工作）。这样，当使用 PHP-sdk 时，您将保存会话中的值，当 Facebook 类尝试检索它们时，它将能够做到。

当然，如果您在使用 Facebook PHP SDK 时遇到问题，请检查 $_SESSION 是否存储了您想要的值，因为问题是当您想要检索它时服务器中没有该值，导致您到不认证的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T14:59:07.657

响应有点晚，但可能会对其他用户有所帮助。

我今天也遇到了同样的问题。

我的 access_token 未正确存储在 $_SESSION 中。显然，客户端只发送一次 access_token。您必须将其存储在内存（SESSION）中并重用它。

在正常情况下，Facebook PHP SDK 会这样做......

编辑：有关更多解释，请参阅@Chococroc 回复

# mysql - 用 mySQL 替换字符串的一部分 - 如何从名字字段中删除中间名首字母

> ID：14837661
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:43.920
> 
> 标签：mysql

我觉得我在这里错过了一些简单的东西，但是......

如果我在 mySQL 表 (users.fName) 中有以下数据：

```
--------------    
| Jason M.   |
--------------
| Eric       |
--------------
| Tim S      |
--------------
| Peggy Sue  |
-------------- 
```

我想结束：

```
--------------    
| Jason      |
--------------
| Eric       |
--------------
| Tim        |
--------------
| Peggy Sue  |
-------------- 
```

我想我必须消除 . 在 Jason M. 之后（我可以很容易地做到这一点`UPDATE users SET fName = REPLACE(fName, ".", "");`），但我怎样才能消除 M 和 S 但留下 Sue？

我知道`SUBSTRING_INDEX`可以获取该字段的一部分，并且我可以使用诸如`SELECT SUBSTRING_INDEX(fName, ' ', -1), LENGTH(SUBSTRING_INDEX(fName, ' ', -1)) FROM users`获取字符串第二部分的长度之类的方法，但我不确定如何将字段更新为字符串的第一部分，仅第二部分只是一个字符长。

**更新**

一旦我对他的查询进行了一次更改，@Dan 的答案表就为我提供了我需要的东西。更新后的查询是：

```
SELECT `fName`, SUBSTRING_INDEX(`fName`, ' ', -1) AS MiddleInitial
    FROM `users`
    WHERE TRIM(`fName`) LIKE '%.' 
        AND length(`fName`)> 4 
        OR length(SUBSTRING_INDEX(`fName`, ' ', -1)) = 1; 
```

最后一个`AND`变成了`OR`所有的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T21:27:49.043

我有类似的情况，并使用 where 子句仅选择字段中某处带有空格的名称。此外，我检查了我所期望的中间名首字母确实只有一个长的字符`length(SUBSTRING_INDEX(First, ' ', -1)) = 1`。

```
SELECT `First`, SUBSTRING_INDEX(`First`, ' ', -1) AS MiddleInitial
FROM YourTable
WHERE trim(`First`) LIKE '%.' AND length(`First`)> 4 AND 
length(SUBSTRING_INDEX(`First`, ' ', -1)) = 1; 
```

在运行更新之前查看选择的结果，但这应该将您的查询限制为仅首字母，并留下像比利鲍勃这样的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:01:59.153

您可以使用像[UDF](https://launchpad.net/mysql-udf-regexp)这样的用户定义函数并使用正则表达式来执行此操作。

# tsql - MAX Date <= to Date 在另一个表中

> ID：14837662
> 
> 赞同：1
> 
> 时间：2013-02-12T16:54:49.850
> 
> 标签：tsql, subquery, ssms

我们将汇率存储在一个表格中，并每周更新几次以获取最新汇率。我试图能够在销售订单上取一个日期，并为其分配订单时有效的汇率。下面是一个汇率列表及其生效日期的示例，以及销售订单，以及应该是什么有效汇率（汇率@订单时间，这是我想要引入的）。

```
currate.effectivedate      currate.currentrate
12/2/2012                  0.55
12/7/2012                  0.52
12/13/2012                 0.54
12/19/2012                 0.53
12/22/2012                 0.56

orderhed.orderdate        orderhed.ordernum     Exchage Rate @ date of order
12/4/2012                  105                  0.55
12/8/2012                  111                  0.52
12/9/2012                  116                  0.52
12/19/2012                 120                  0.53
12/28/2012                 123                  0.56 
```

我在下面有一个我一直在尝试做的例子，但它不起作用。首先，由于 currate.effectivedate 上的 MAX 函数，我想不出如何引入 currate.currentrate 字段。然后对于 t_rate.effectivedate，我得到的只是表格期间汇率的 MAX 天，而不是 <= orderhed.orderdate 的最大日期。我需要小于或等于 orderhed.orderdate 的 MAX currate.effectivedate 才能获得订单时有效的生效日期（以及相应的 currentrate.currentrate）。如果我重复自己，或者没有意义，我很抱歉。如果下面我悲伤的小查询不明显，我对编写查询非常陌生，因此非常感谢我能获得的任何帮助。

```
SELECT     
orderhed.ordernum, 
orderhed.orderdate, 
orderdtl.orderline, 
orderdtl.unitprice, 
orderdtl.docunitprice, 
orderdtl.discount, 
orderdtl.docdiscount, 
t_rate.effectivedate

FROM         orderhed LEFT OUTER JOIN

(SELECT     rate1.company, MAX(rate1.effectivedate) AS effectivedate, order1.orderdate
FROM         currrate as rate1 INNER JOIN
                  orderhed AS order1 ON rate1.company = order1.company
WHERE     (rate1.company = 'lotcol') AND (rate1.currencycode = 'usd') 
GROUP BY rate1.company, order1.orderdate) 

AS t_rate ON orderhed.company = t_rate.company AND t_rate.orderdate <= orderhed.orderdate 
                        INNER JOIN
                  orderdtl ON orderhed.company = orderdtl.company 
WHERE     (orderhed.company = 'lotcol') 
```

更新 - -

谢谢@LastCoder，你的回答让我朝着正确的方向前进。归根结底，这正是奏效的方法：

```
SELECT     orderhed.ordernum, orderhed.orderdate, orderdtl.orderline, orderdtl.unitprice, orderdtl.docunitprice, orderdtl.discount, orderdtl.docdiscount, t_rate.effectivedate, 
                  t_rate.ordernum AS Expr1, t_rate1.currentrate
FROM         orderhed INNER JOIN
                      (SELECT     rate1.company, MAX(rate1.effectivedate) AS effectivedate, order1.orderdate, order1.ordernum
                        FROM          currrate AS rate1 INNER JOIN
                                               orderhed AS order1 ON rate1.company = order1.company AND rate1.effectivedate <= order1.orderdate
                        WHERE      (rate1.company = 'lotcol') AND (rate1.currencycode = 'usd')
                        GROUP BY rate1.company, order1.orderdate, order1.ordernum) AS t_rate ON orderhed.ordernum = t_rate.ordernum AND orderhed.company = t_rate.company AND 
                  t_rate.orderdate <= orderhed.orderdate INNER JOIN
                      (SELECT     company, currencycode, effectivedate, currentrate
                        FROM          currrate AS currrate_1
                        WHERE      (company = 'lotcol') AND (currencycode = 'usd')) AS t_rate1 ON t_rate.company = t_rate1.company AND 
                  t_rate.effectivedate = t_rate1.effectivedate INNER JOIN
                  orderdtl ON orderhed.company = orderdtl.company AND orderhed.ordernum = orderdtl.ordernum
WHERE     (orderhed.company = 'lotcol')
ORDER BY orderhed.ordernum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:05:36.183

```
SELECT o.orderdate
    , ISNULL(r.effectivedate, (
        SELECT MAX(effectivedate) FROM t_rate WHERE effectivedate < o.orderdate
    )
FROM orderhed o
LEFT JOIN t_rate r ON o.orderdate = r.effectivedate 
```

您的问题有一个最小的解决方案。您需要将“订单日期”与等于或小于它的“生效日期”相匹配。

# javascript - Three.js 的后端 3D 模型 / 树在哪里？

> ID：14837663
> 
> 赞同：4
> 
> 时间：2013-02-12T16:54:53.010
> 
> 标签：javascript, 3d, three.js, webgl

我最近看了一些 WebGL 的展示，发现 three.js 似乎是一个非常流行的框架（如此流行，以至于 Toni Parsli 的 oreillys 关于 webgl 的书似乎广泛关注 Three.js）。

现在我查看了three.js 的源代码，并且想知道为什么我在源代码中找不到某种场景树来保存对象。我曾期望在源代码的某处找到诸如 BSP、kd-tree 或 octree 之类的东西。

我发现的是“扁平列表”，它似乎包含对象：[http ://ushiroad.com/3j/](http://ushiroad.com/3j/)

不，我有点不知所措。为什么要将场景保存在平面数据结构中？我认为一棵树会是更好的解决方案。

我是否遗漏了源代码中的树形结构（不用说我没有逐行阅读）或者是否有一些我不了解的场景图优化？

PS：我也在想Flattened List是不是场景图剪枝后的中间对象。[然而，尽管http://ushiroad.com/3j/](http://ushiroad.com/3j/)似乎表明了这一点，但我在源代码中找不到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:58:46.287

没有添加后端树结构，因为它不是必需的。

如果您需要应用层的树形结构，请查看[https://github.com/collinhover/threeoctree](https://github.com/collinhover/threeoctree)和[https://gist.github.com/chandlerprall/1484619](https://gist.github.com/chandlerprall/1484619)。

# php - PHP会话没有从一个页面保存到另一个页面

> ID：14837666
> 
> 赞同：0
> 
> 时间：2013-02-12T16:54:54.797
> 
> 标签：php, session

我在使用 PHP 会话时遇到了一些问题。我对 PHP 很陌生，所以如果我完全愚蠢，我很抱歉。

我有一个 login.php 文件，一旦检查了用户名和密码等，它就有以下代码：

```
if($pass === $row2['PSWD']){
    session_start();
    $_SESSION['test']="hello";
    mysql_close($con);
    header("Location: page.php");
}else{
    die('Wrong password');
} 
```

然后在 page.php 上，我在最顶部有以下关于标签的内容：

```
<?php
session_start();
session_register(); //just in case...(should not be needed)
echo "Result:".$_SESSION['test'];
?> 
```

我在页面顶部得到的只是“结果：”

有任何想法吗？从我一直在阅读的所有内容来看，它应该像这样简单吗？

提前致谢！

编辑：

我的错误日志显示：

警告：session_start() [function.session-start]: open(/var/php_sessions/sess_b91f8653bcee6ef7c1e13ae8844f00da, O_RDWR) failed: No such file or directory (2) in /hermes/bosweb/web261/b2617/ipg.craigfisk/webtest/第 28 行的 login.php

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /hermes/bosweb/web261/b2617/ipg.craigfisk/webtest/login.php:28）在 /hermes /bosweb/web261/b2617/ipg.craigfisk/webtest/login.php 在第 28 行

警告：无法修改标头信息 - 标头已由 /hermes/bosweb/web261/b2617/ipg.craigfisk/ 中的 /hermes/bosweb/web261/b2617/ipg.craigfisk/webtest/login.php:28 发送第 31 行的 webtest/login.php

警告：未知：打开（/var/php_sessions/sess_b91f8653bcee6ef7c1e13ae8844f00da，O_RDWR）失败：第 0 行的未知中没有此类文件或目录（2）

警告：未知：无法写入会话数据（文件）。请在第 0 行的 Unknown 中验证 session.save_path 的当前设置是否正确 (/var/php_sessions)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:58:33.840

您需要`exit();`在标题重定向之后放置，否则您刚刚将两页内容加载到一页中。

来源：[https ://stackoverflow.com/a/3023479/710827](https://stackoverflow.com/a/3023479/710827)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:58:20.390

在标头位置之后给出 exit();

# django - Django Haystack 自定义 SearchView 用于漂亮的 url

> ID：14837675
> 
> 赞同：2
> 
> 时间：2013-02-12T16:55:28.783
> 
> 标签：django, django-haystack

我正在尝试将 Django Haystack 设置为基于一些漂亮的 url 进行搜索。这是我的 urlpatterns。

```
urlpatterns += patterns('',
    url(r'^search/$', SearchView(), 
        name='search_all',
    ),
    url(r'^search/(?P<category>\w+)/$', CategorySearchView(
            form_class=SearchForm,
        ), 
        name='search_category',
    ),
) 
```

我的自定义 SearchView 类如下所示：

```
class CategorySearchView(SearchView):
    def __name__(self):
        return "CategorySearchView"

    def __call__(self, request, category):
        self.category = category
        return super(CategorySearchView, self).__call__(request)

    def build_form(self, form_kwargs=None):
        data = None
        kwargs = {
            'load_all': self.load_all,
        }
        if form_kwargs:
            kwargs.update(form_kwargs)

        if len(self.request.GET):
            data = self.request.GET

        kwargs['searchqueryset'] = SearchQuerySet().models(self.category)

        return self.form_class(data, **kwargs) 
```

如果我尝试访问 /search/Vendor/q=Microsoft，我在运行 Django 开发 Web 服务器时不断收到此错误

```
UserWarning: The model u'Vendor' is not registered for search.
  warnings.warn('The model %r is not registered for search.' % model) 
```

这在我的页面上

```
The model being added to the query must derive from Model. 
```

如果我访问 /search/q=Microsoft，它可以正常工作。还有另一种方法可以做到这一点吗？

感谢您的任何指点-Jay

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:04:27.117

这里发生了几件事。在您的`__call__`方法中，您根据 URL 中的字符串分配类别。在这个错误中：

```
UserWarning: The model u'Vendor' is not registered for search 
```

注意 unicode 字符串。如果您遇到类似的错误，`The model <class 'mymodel.Model'> is not registered for search`您就会知道您没有为该模型正确创建索引。然而，这是一个字符串，而不是一个模型！类上的`models`方法`SearchQuerySet`需要一个类实例，而不是字符串。

您可以做的第一件事是使用该字符串按内容类型查找模型。这可能不是一个好主意！即使您没有想要避免窥探的模型索引，您至少可能会产生一些不必要的错误。

最好在视图中使用查找将查询路由到正确的模型索引，使用条件或字典。在你的`__call__`方法中：

```
self.category = category.lower() 
```

如果您有多个模型：

```
my_querysets = {
    'model1': SearchQuerySet().models(Model1),
    'model2': SearchQuerySet().models(Model2),
    'model3': SearchQuerySet().models(Model3),
}
# Default queryset then searches everything
kwargs['searchqueryset'] = my_querysets.get(self.category, SearchQuerySet()) 
```

# java - 如何从游戏客户端访问和发送 I/O 设备信息，更具体地说是鼠标移动和单击（按下和释放）？

> ID：14837676
> 
> 赞同：2
> 
> 时间：2013-02-12T16:55:33.237
> 
> 标签：java, focus, game-engine, awtrobot, mousepress

我目前正在尝试制作一个程序，该程序将自动接受游戏客户端内的弹出队列。当不在客户端内部时，我已经设法让一切以我想要的方式工作。但是，当打开游戏客户端时，我使用的机器人类失去了移动、按下和释放鼠标的能力。但是，它似乎仍在本地分析指针处的颜色。那是; 不在游戏客户端里面。

## 这是应用程序的代码片段：

/*分析循环内鼠标指针位置的颜色。当它更改到某个限制/弹出菜单时，if-sentence 变为 true，并触发一个小的延迟，然后鼠标单击接受按钮应该在的位置*/

p = MouseInfo.getPointerInfo().getLocation();

rgb = this.robot.getPixelColor(px, py);

/ *（这是接受按钮相对于 16:9 格式的所有游戏内客户端的位置）* /

this.robot.mouseMove((int)(inGameScrnSize.width * 0.4575), (int)(inGameScrnSize.height * 0.4753));

机器人.延迟（100）；

机器人.mousePress(InputEvent.BUTTON1_MASK);

机器人.mouseRelease(InputEvent.BUTTON1_MASK);

* * *

所以我的问题是：如何从游戏客户端访问和发送 I/O 设备信息？java Robot类可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T10:11:14.993

我记得这是关于如何使用 Java 编写的算法从 WoW 客户端内控制 I/O，该算法将从桌面坐标系启动客户端。问题是，一旦机器人对象被实例化，它会将所有方法调用解释为在它被实例化的坐标系中，因此一旦你在客户端坐标系内部启动它就可以工作（我必须工作很好），但不能连续在两个不同的坐标系内。因此，在焦点切换到第二个坐标系后实例化一个新的机器人类应该可以正常工作。

# android - java.lang.RuntimeException：无法创建 BackupAgent com.berlin.mobson.view.OsmandBackupAgent：java.lang.NullPointerException

> ID：14837679
> 
> 赞同：1
> 
> 时间：2013-02-12T16:55:42.910
> 
> 标签：android

一些用户通过 android 错误报告弹出窗口报告了此错误，但我不知道是什么原因造成的。我用谷歌搜索，但我找不到任何好的线索。

有谁知道是什么导致了这个错误？

```
java.lang.RuntimeException: Unable to create BackupAgent
com.berlin.mobson.view.OsmandBackupAgent:
java.lang.NullPointerException at
android.app.ActivityThread.handleCreateBackupAgent(ActivityThread.java:2331)
at android.app.ActivityThread.access$2400(ActivityThread.java:134) at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1358)
at android.os.Handler.dispatchMessage(Handler.java:99) at
android.os.Looper.loop(Looper.java:137) at
android.app.ActivityThread.main(ActivityThread.java:4856) at
java.lang.reflect.Method.invokeNative(Native Method) at
java.lang.reflect.Method.invoke(Method.java:511) at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774) at

dalvik.system.NativeStart.main(Native Method) Caused by:
java.lang.NullPointerException at
android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:377)
at android.app.LoadedApk.getClassLoader(LoadedApk.java:320) at
android.app.ActivityThread.handleCreateBackupAgent(ActivityThread.java:2301)
... 10 more 
```

My App 是一个 Place finder，它使用 google Places api 来获取搜索结果。（没有库，只有 json url）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:55:48.637

osmand 是离线和在线 OSM 地图的移动地图查看和导航。

源代码可在此处[获得 Osmand](http://code.google.com/p/osmand/source/checkout)

可能您可以从设备中删除 osmand，然后使用上述可用代码调试应用程序。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:35:15.057

看起来他们的 BackupAgent 实施存在一些问题。临时解决方案是在设置->备份和重置中取消选中“备份我的数据”。从长远来看，必须在 BackupAgent 中跟踪 NPE。

# java - java中的等式中的括号是否正确使用？

> ID：14837680
> 
> 赞同：0
> 
> 时间：2013-02-12T16:55:42.483
> 
> 标签：java

```
double y = [(100-totalGrade)*weightCategory]+(totalGrade*x); 
```

这是一个有效的方程式吗？主要是想知道括号是否使用正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:00:34.193

No, the brackets are not used correctly. the square brackets (`[` `]`) are reserved for accessing array elements.

You want to use nested parenthesis:
`double y = ((100-totalGrade)*weightCategory)+(totalGrade*x);`

but in your equation, as alex pointed out:

`double y = (100-totalGrade)*weightCategory+totalGrade*x;`

is sufficient.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:00:12.260

`[` and `]` are not accepted in Java as the brackets you see in math, they are used to declare arrays. You must use `(` and `)` in their places.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:58:08.890

这就够了：

`double y = (100-totalGrade)*weightCategory+totalGrade*x;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T17:03:30.190

不，如果您需要嵌套括号，您只需继续使用`(`and `)`，确保正确关闭每一对。

和字符用于下标运算符`[`，`]`例如在数组中，例如 main 方法的参数`String[] args`。

如果您遵循 BIDMAS/BODMAS 的规则，您会发现您的情况实际上不需要外括号。但是，如果您将来需要它们，请使用嵌套括号，如下所示：

`int example = (1+2)*((3+4)*5);`

# meteor - 当文件在服务器和客户端目录之间拆分时，在哪里声明集合？

> ID：14837684
> 
> 赞同：1
> 
> 时间：2013-02-12T16:55:52.373
> 
> 标签：meteor

在使用单独的客户端和服务器目录时，我正在与 Meteor 作斗争，并希望有人能帮助我。

我在 server 子目录中的服务器代码如下所示：

```
Testing = new Meteor.Collection("testing");

Testing.insert({hello1:'world1'});
Testing.insert({hello2:'world2'});
Testing.insert({hello3:'world3'});

Meteor.publish("testing", function() {
console.log('server: ' + Testing.find().count());
return Testing.find();
}); 
```

我在客户端子目录中的客户端代码如下所示：

```
Meteor.subscribe("testing");
var Testing = new Meteor.Collection("testing");
console.log('count: ' + Testing.find().count()); 
```

我已经尝试过开启和关闭自动发布。

在我的终端窗口中，我可以看到日志语句按我的预期输出了许多项目。但对于我的客户，在浏览器控制台窗口中，我总是看到计数为 0。

不确定这是否相关，但是当我修改订阅语句并保存更改时，我在控制台窗口中看到此错误：

```
POST http://localhost:3000/sockjs/574/ukpxre9v/xhr 503 (Service Unavailable) sockjs-    0.3.4.js:821
AbstractXHRObject._start sockjs-0.3.4.js:821
(anonymous function) 
```

我确定我犯了一些愚蠢的错误，但我没有运气追踪它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:19:01.757

您运行`console.log('count: ' + Testing.find().count());`得太快 Meteor 会将您的服务器集合同步到客户端，但这需要很短的时间。

例如，您可以`console.log('count: ' + Testing.find().count());`在您的 Web 控制台中运行它应该会给您一个正确的结果，因为您将等待半秒左右才能从服务器加载数据。

您可以将此代码放在[响应式上下文中](http://docs.meteor.com/#reactivity)，以便正确显示实时计数，例如[Meteor.autorun](http://docs.meteor.com/#meteor_autorun)或[Template helper](http://docs.meteor.com/#templates)。

您看到 503 XHR 错误的原因是当您修改代码并保存它时，meteor 重新启动并尽快提供新内容，因此客户端和服务器之间的套接字暂时中断，直到它刷新页面。您的代码实际上并没有什么问题。

# c#-4.0 - c#如何重启windows服务

> ID：14837685
> 
> 赞同：0
> 
> 时间：2013-02-12T16:55:56.547
> 
> 标签：c#-4.0, windows-services

我希望每小时通过 C# 代码重新启动 Windows 服务。我有这种方法，但是当我在项目安装程序中或在哪里？我可以把它放在我想重新启动它的同一个服务中吗？

```
public static void RestartService(string serviceName, int timeoutMilliseconds)
{
    ServiceController service = new ServiceController(serviceName);

    try
    {
        int millisec1 = Environment.TickCount;
        TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);

        service.Stop();
        service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);

        // count the rest of the timeout
        int millisec2 = Environment.TickCount;
        timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds - (millisec2 - millisec1));

        service.Start();
        service.WaitForStatus(ServiceControllerStatus.Running, timeout);
    }
    catch
    {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-24T08:33:21.447

我通过在这样的服务中创建一个方法来解决它

```
 private void StopService()
{
   using (ServiceController service = new ServiceController("ServiceName"))
   {
   try
   {
       TimeSpan timeout = TimeSpan.FromMilliseconds(80000);

        if (!(service.Status.Equals(ServiceControllerStatus.StartPending) || service.Status.Equals(ServiceControllerStatus.StopPending)))
        {
            service.Stop();
            service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);
        }
    }
    catch (Exception ex)
    {
        ExceptionLog(ex);
    }
} 
```

}

并创建另一个服务来重新启动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:00:18.100

您可以将其添加到 Windows 调度程序。只需将此功能放在 Windows 命令程序中并安排每小时启动它。此外，您可以有第二个服务来完成第一个服务的回收。

-rwg

# c - 结构指针的分段错误

> ID：14837687
> 
> 赞同：0
> 
> 时间：2013-02-12T16:56:05.130
> 
> 标签：c, segmentation-fault

我是C新手，我写了以下代码

```
#include <stdlib.h>
#include<stdio.h>

typedef struct
{
    int name1;
}check1;
typedef struct
{
    int name2;
}check2;

int main()
{
    check1 *test1;
    check2 *test2;
    test1->name1=1;
    test2->name2=2;
    return 0;
} 
```

当我执行它时，它给了我一个错误：

```
$ gcc test1.c
$ ./a.out
Memory fault 
```

在 gdb 中：-

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000040045e in main () 
```

可能是什么原因？？？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:59:15.787

你已经声明了两个指针，但是你没有分配任何内存让它们指向。指针指向无效内存。

试试这个：

```
check1 *test1 = malloc(sizeof(*test1));
if (test1 == NULL)
    // report failure

check2 *test2 = malloc(sizeof(*test2));
if (test2 == NULL)
    // report failure 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:54:13.223

您还可以在堆栈上声明变量并将它们的地址分配给指针。

```
check checka;
check* pcheck = &checka;
printf("%i",pcheck->name1); 
```

# python - 如何将长池请求或网络套接字请求传递给heroku worker dyno？

> ID：14837688
> 
> 赞同：0
> 
> 时间：2013-02-12T16:56:07.030
> 
> 标签：python, heroku, tornado

我有一个`web dyno`可以处理我所有的网络请求。如果有一个请求进来，那是一个`long-pooling`请求，你如何将该连接传递给一个`worker dyno`？

前任。需要将要`example.com/long-pooling`处理的请求传递给以释放更多请求。`web dyno``worker dyno``web dyno`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:03:40.070

您并没有完全传递*request*。听起来你想要一个像 RQ 或 Celery 这样的队列库。本质上，您将长时间运行的请求排队，然后在客户端轮询更新

*   [https://devcenter.heroku.com/articles/python-rq](https://devcenter.heroku.com/articles/python-rq)
*   [https://github.com/celery/celery/](https://github.com/celery/celery/)

# java - 使用静默安装方式将 Java 安装到带空格的目录中

> ID：14837697
> 
> 赞同：6
> 
> 时间：2013-02-12T16:56:34.473
> 
> 标签：java, windows, command-line, cmd, installation

我正在尝试使用静默模式安装 Java，并指定包含空格的安装目录。当我这样做时，它会弹出“Windows Installer”对话框，指示其中一个参数不正确。如果我使用短路径名，它可以正常工作，但我真的不想使用短目录名，因为这是存储在注册表中的值。

我想使用的命令...

```
jre-6u39-windows-i586.exe /s INSTALLDIR="C:\Program Files (x86)\Java" 
```

这会弹出 Windows 安装程序对话框。

当我使用...

```
jre-6u39-windows-i586.exe /s INSTALLDIR=C:\Progra~2\Java 
```

这行得通。

注意：“Program Files (x86)”只是一个例子。它安装在客户站点，他们选择安装目录，因此我们必须能够支持他们可能指定的任何目录。

知道如何进行静默安装但仍使用长路径名吗？

***更新：***

我想我会分享最终的解决方案。我发现我想分享的一件很酷的事情是，您可以禁止安装的自动重启，它会返回退出代码 3010。因此，您可以将重启推迟到另一个时间。这是代码（稍微重写以消除一堆我们自己的抽象）

```
public bool InstallJava(string installPath, string logFile)
{
    bool rebootRequired = false;

    string fullLogFileName = Path.Combine(logFile, "JavaInstall.log");
    string arguments = string.Format("/s /v\"/qn REBOOT=Suppress INSTALLDIR=\\\"{0}\\\" STATIC=1 /L \\\"{1}\\\"\"", installPath, fullLogFileName);

    ProcessStartInfo startInfo = new ProcessStartInfo { RedirectStandardError = true, RedirectStandardOutput = true, RedirectStandardInput = true, UseShellExecute = false, CreateNoWindow = true, 
    FileName = "jre-7u25-windows-x64.exe",  Arguments = arguments };

    var process = Process.Start(startInfo);
    process.WaitForExit();

    if (process.ExitCode == 3010)
        rebootRequired = true;

    else if (process.ExitCode != 0)
    {
        // This just looks through the list of error codes and returns the appropriate message
        string expandedMessage = ExpandExitCode(StringResources.JAVA_INSTALL_ERROR, process.ExitCode, fullLogFileName);
        throw new Exception(expandedMessage);
    }

    return rebootRequired;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:48:41.017

我记得以前遇到过这个问题......

> 如果路径有空格，则在将路径传递给安装程序时需要使用引号。因为路径 arg 已经在引号中，所以您需要使用 '\' 转义每个引号，以便它通过。所以命令是
> 
> ```
>  j2re.exe /s /v"/qn INSTALLDIR=\"C:\Program Files\JRE\"" 
> ```

参考 ：

[http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/silent.html](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/silent.html)

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4966488](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4966488)

# php - 在 PHP 中使用 mysqli 是否足以防止 SQL 注入？

> ID：14837702
> 
> 赞同：-1
> 
> 时间：2013-02-12T16:56:47.337
> 
> 标签：php, mysql, mysqli, sql-injection

例如我使用

```
$building_name = $_POST['BuildingName'];
$metering_type = $_POST['MeteringType'];
$query = "INSERT INTO buildings (BuildingName, MeteringType)
                       VALUES ('$building_name', '$metering_type')";
if(mysqli_query($link, $query))
{
    echo json_encode(Array("success"=>true));
} 
```

而且我相信这可以防止我进行 SQL 注入。我安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T16:59:23.740

不，那丝毫不能保护你。

您需要使用[MySQLi 的参数化查询通过`prepare`](http://php.net/manual/en/mysqli.prepare.php).

# silverlight - 拖动滚动 Silverlight

> ID：14837705
> 
> 赞同：0
> 
> 时间：2013-02-12T16:57:03.423
> 
> 标签：silverlight

我是 Silverlight 的新手，我希望创建一个通过向上或向下拖动来滚动的 StackPanel，类似于 PDF 阅读器的工作方式。我不知道是否有内置的东西，或者我是否必须基于鼠标上下来创建自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:45:55.013

嗯，只需在 LMB 向下时捕捉 MouseMove 并通过最后一点和当前点之间的水平差来更改滚动偏移量。

# message - Xtify GCM 错误 202 消息未到达设备

> ID：14837707
> 
> 赞同：0
> 
> 时间：2013-02-12T16:57:06.347
> 
> 标签：message, xtify

我在使用 Xtify 发送消息 GCM 时遇到问题。我的设备已注册，但未出现在测试实施中。该应用程序正在测试。我从我的服务器发送这条消息到 xtify，它被 202 状态代码接受，但消息没有到达设备。

{"apiKey":"blabla-2c0e-4c90-8845-753ed8ac3d64","appKey":"blabla-e6d0-441f-8b32-c0fc8be4ee5b","xids":["asdsd387242167c695bbac"],"sendAll":false,"内容":{"主题":"Oferta","消息":"lat=39.50017;lon=-0.43342;dis=50.0;oferta=1;","action":{"type":"NONE","数据":"","标签":""}}}

哪里有问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:13:32.220

[202](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)是成功码，表示 xtify 服务器接受了请求，但不一定将请求传递给设备。我建议按照[这些步骤](https://stackoverflow.com/a/13592505/1134754)来确保您的应用程序向 xtify 注册，同时确保您的应用程序在[应用程序管理](https://console.xtify.com/manage-app-keys)器中设置为“开发/测试”，这样您就可以在测试页面中看到它。

* * *

**GCM 的推送 API 调用示例：**

网址：[http ://api.xtify.com/2.0/push](http://api.xtify.com/2.0/push)

内容类型：`application/json`

HTTP 实体主体：

```
{
    "apiKey": "xxxxxx-xxxxx-xxxx-xxxxx",
    "appKey": "xxxxxx-xxxxx-yyyy-xxxxx",
    "xids": ["xxxxxxxxxxxxxxxxxx"],
    "sendAll": true,
    "content": {
        "subject": "Greetings Earthlings",
        "message": "Take me to your leader",
        "action": {
            "type": "DEFAULT"
        }
    }
} 
```

# eclipse - Eclipse 忽略了工作区插件

> ID：14837708
> 
> 赞同：0
> 
> 时间：2013-02-12T16:57:07.660
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, osgi

一些背景知识：我正在使用 Eclipse 3.7（针对 RCP 开发人员）来处理一些插件，这些插件是使用 Maven 和 Tycho 构建的大型（数百个插件）RCP 应用程序的一部分。我已经设置了目标平台和运行配置，一切都构建良好，似乎运行良好，除了......

我对工作区中的插件所做的更改没有生效。特别是，当我在我所做的更改附近调试应用程序时，该类的运行版本显然与我看到的源代码不同步。

我在运行配置中选择了“启动：所有工作区和启用的目标插件”。如果我将其更改为“下面选择的插件”，则会检查工作区插件以支持来自目标平台的相同插件，但我的更改在运行时仍会被忽略。

谷歌不是很有帮助，其他人在 SO 上报告的类似问题的解决方案（例如重新加载目标平台）并没有解决我的问题。

# c - C中的内存地址

> ID：14837709
> 
> 赞同：3
> 
> 时间：2013-02-12T16:57:09.810
> 
> 标签：c, c-strings, dynamic-allocation

在 main 函数的最后一行，为什么与`&word2`不同`word2`？假设正确的标题就位。谢谢！

```
int main()
{
    char word1[20];
    char *word2;

    word2 = (char*)malloc(sizeof(char)*20);

    printf("Sizeof word 1: %d\n", sizeof (word1));
    printf("Sizeof word 2: %d\n", sizeof (word2));

    strcpy(word1, "string number 1");
    strcpy(word2, "string number 2");

    printf("%s\n", word1);
    printf("%s\n", word2);
    printf("Address %d, evaluated expression: %d\n", &word1, word1);
    printf("Address %d, evaluated expression: %d\n", &word2, word2); 
    //Why this one differ?
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:59:53.783

`word2` is the address of the memory that you allocated using `malloc`.

`&word2` is the address of the variable named `word2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:00:07.460

The first is the address on the stack of the `word2` pointer - a double pointer where the value is stored.

The second is the actual address stored within `word2` - somewhere on the heap I would presume from the malloc.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T17:08:40.870

当您声明`char word1[20];` 创建一个包含 20 个字符的数组时。这里，`word1`是它的第一个元素的地址，而不是数组的地址。

`& word1`表示数组的地址。`word1`和的值 `&word1`实际上是相同的，但在语义上两者是不同的。一个是 char 的地址，而另一个是 20 个字符的数组的地址。[你应该阅读这个答案](https://stackoverflow.com/questions/14189967/issue-with-pointer-to-character-array-c/14192945#14192945)。

第二种情况：

当您声明时， `char *word2;`您会创建一个指针变量。它可以指向一个字符，也可以像你一样存储动态分配的数组的地址。

所以值`word2`意味着地址返回`malloc()`。在下一行。

```
word2 = (char*)malloc(sizeof(char)*20); 
```

但表达式`&word2`表示指针变量的地址。并且 malloc 返回的地址与指针 veritable 的地址不同`word2`。

`word2`与`word1`类型不同。

另请阅读[Nate Chandler 的回答](https://stackoverflow.com/questions/14189967/issue-with-pointer-to-character-array-c?answertab=votes#tab-top)

`word1` 和之间的根本区别`word2`：

在下图中。

![图表](../Images/8e8196c3b304ef0f738e965f58551194.png)

`word1`与`a`（*不是按大小而是按类型*）相同。`word2`就像_`p`

这里的值`p`表示`"world"`字符串的地址，表示变量的`&p`地址。`p`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:08:37.963

在第一条语句`&word1`中指的是数组的地址。`&word1`由于该数组是在堆栈上静态分配的`word1`，因此与`&word1[0]`.

在第二种情况下`word2`是堆栈上的指针，其地址显示在 print 的第一部分，并`word2`包含通过 分配的指针`malloc`。

# javascript - 如何制作两个 s 分开 s 可与线路连接

> ID：14837711
> 
> 赞同：0
> 
> 时间：2013-02-12T16:57:10.373
> 
> 标签：javascript, jquery, html

对不起，如果这个问题令人困惑..我尽力描述这个问题......

所以，我正在尝试为我的学生创建一个匹配的问题。因此该页面将在 2 个单独的 div 中有一个 ul。我需要一种方法让学生单击 li 并连接到另一个 div 中的匹配 li。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:59:33.987

You could allow them to drag from one list into the other list and instead of drawing a line, you could add a border of the same color to each paired element if they match or are correct.

Check out jQueryUI:

*   [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)
*   [http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

You could also have a `<canvas>` between the two lists and draw simple lines where the start and end of each line has appropriate x,y coordinates to aim at the respective `li` elements:

[http://www.tutorialspoint.com/html5/canvas_drawing_lines.htm](http://www.tutorialspoint.com/html5/canvas_drawing_lines.htm)

# c++ - C/C++：如何找出链接标志？

> ID：14837712
> 
> 赞同：5
> 
> 时间：2013-02-12T16:57:12.303
> 
> 标签：c++, c, linker

如何可靠地找出库的链接标志？我总是以谷歌搜索/挖掘手册结束。

有没有办法用名称和/或描述列出可用于链接的库？

编辑：Linux 系统，GNU 构建链，经典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:05:22.370

在大多数 Linux 系统上，您可以使用[`pkg-config`](http://linux.die.net/man/1/pkg-config)列出给定库的编译器选项。例如：

```
g++ example.cpp $(pkg-config --cflags --libs libpng) 
```

变成

```
g++ example.cpp -I/usr/include/libpng12 -lpng12 
```

或者一个输出稍微复杂一点的例子：

```
$ pkg-config --cflags --libs gthread
-D_REENTRANT -I/usr/include/glib-1.2 -I/usr/lib64/glib/include  -lgthread -lpthread -lglib 
```

# jetty - Jetty 在 Windows 中锁定静态文件

> ID：14837716
> 
> 赞同：2
> 
> 时间：2013-02-12T16:57:23.930
> 
> 标签：jetty

我没有看到，我对静态文件的更改。

在另一个推荐以下方法的资源中：

包含到 webdefault.xml

```
<init-param>
    <param-name>useFileMappedBuffer</param-name>
    <param-value>true</param-value> <!-- change to false -->
</init-param> 
```

但它不是工作。有什么想法吗？

码头版本：8.1.8.v20121106

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:37:27.383

`useFileMappedBuffer`init-param 用于由 DefaultServlet 锁定文件。

如果您可以使用编辑器更改静态文件并保存而没有错误，那么此可配置文件与您的问题“我没有看到我对静态文件的更改”无关。

可能的场景：

*   浏览器正在缓存原始响应
*   您在磁盘上更改的文件不是 Jetty 提供的文件。

# javascript - 是否可以使用 jQuery 以类似于 CSS 的方式链接类和 id

> ID：14837727
> 
> 赞同：-2
> 
> 时间：2013-02-12T16:57:53.543
> 
> 标签：javascript, jquery

是否可以使用 jQuery 以类似于 CSS 的方式链接类和 ID？例如，如果我希望针对不同的浏览器，我会将以下内容应用于我的 HTML 标记：

```
 <!--[if lt IE 7]>  <html class="ie ie6 lte9 lte8 lte7"> <![endif]-->

        <!--[if IE 7]>     <html class="ie ie7 lte9 lte8 lte7"> <![endif]-->

        <!--[if IE 8]>     <html class="ie ie8 lte9 lte8"> <![endif]-->

        <!--[if IE 9]>     <html class="ie ie9 lte9"> <![endif]-->

        <!--[if gt IE 9]>  <html> <![endif]-->

        <!--[if !IE]><!--> <html class="notIE">             <!--<![endif]--> 
```

这将允许我专门使用以下方法来定位 ie7 中的元素：

```
.ie7 #div{
 float: left
} 
```

我希望在我的网站上遵循优雅的降级模式，并且我知道我希望使用的某个 jQuery 插件在 IE7 或 IE8 中无法正常工作（例如，它会使样式偏离位置）因此我希望阻止 jQuery在 IE7 和 IE8 中触发的插件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:14:19.933

你的选择器应该可以工作，所以值得用简单的东西来测试它们

$(".lte9 #head").css('color','red');

如果这不起作用，那么您的选择器是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T17:00:43.553

是的，你可以在 jQuery 中做到这一点。事实上，它与您在 CSS 中看到的符号几乎相同。例如，让我们看看下面的这个函数，它旨在在悬停时稍微旋转图像。我希望将此函数应用于 id 为“head”的图像（Rotate 是一个 jQuery 插件，不是基本库的一部分）。假设我们希望以 ie9 为目标。我们将简单地使用下面的符号：

```
$(document).ready(function()
{   
$(".ie9 #head").hover(function(){
    $(".ie9 #head").rotate(-10);
    },

    function() {
    $(".ie9 #head").rotate(0);
    }
  );
}); 
```

请注意标头 id 是如何以 .ie9 类为前缀的。这与您在 CSS 中使用的方法完全相同。

# python - 打开图像错误 Python

> ID：14837729
> 
> 赞同：2
> 
> 时间：2013-02-12T16:57:55.120
> 
> 标签：python, file-io, io, ioerror

*大家好*，我正在尝试打开通过链接下载的图像。我在该网站上进行了搜索，发现了一些非常有用的东西并将其实现到我的代码中。

```
*if* __name__ == "__main__":
    import urllib
    droste = urllib.urlopen("http://is.gd/cHqT")
    with open("droste.png", "wb") as imgFile:
        imgFile.write(droste.read())
    print "Got it!"
    droste = Image.open("droste.png")
    while droste:
        droste.show()
        droste = reveal(droste)
        if droste:
            open("droste.png", "wb").write(droste)
            droste = Image.open("droste.png") 
```

错误发生在第 7 行`"droste = Image.open("droste.png")"`。我收到 IOError：无法识别图像文件。我知道图像已被下载，因为代码运行良好，直到该特定行并且该行 `print "Got it!"` 实际上确认它已被下载。不知道是不是需要在open的参数中指定图片文件的路径，而不是图片名。或者也许我需要检查文件的路径。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:37:55.417

您的代码可以正常工作。问题是你如何运行它。您在评论中提到您正在使用 PythonAnywhere。PythonAnywhere 未设置为执行任何图形操作。它会将图像下载到正确的目录中，但 PIL 无法在 PythonAnywhere 中正常运行。

试试下面的代码来测试一下。

```
import urllib

if __name__ == "__main__":
    droste = urllib.urlopen("http://is.gd/cHqT")
    with open("droste.png", "wb") as imgFile:
        imgFile.write(droste.read())
    print "Got it!"

    print "Now lets test if it really exists..."
    try:
        with open("droste.png", "rb") as imgFile:
            pass
        print "There were no errors so the file exists"
    except:
        print "ERROR: image was not saved properly!" 
```

如果您使用 PythonAnywhere 启动 BASH 会话，您将看到文件 droste.png 存在，您可以将其下载到您的计算机上并查看它。你的程序没问题。

如果你真的想使用你的程序，或者认真对待 python 编程。您确实应该将 Python 本地安装到您的计算机上。如果您想将代码保存在云端，请使用 dropbox、github 或 bitbucket。PythonAnywhere 有用途，但通常你只想在你的计算机上安装 python。

# java - WebElements 列表中的相对 Xpath

> ID：14837735
> 
> 赞同：15
> 
> 时间：2013-02-12T16:58:12.637
> 
> 标签：java, xpath, selenium, webdriver, selenium-webdriver

收集 WebElements 列表后是否可以使用相对 xpath？如果是这样，最好的方法是什么？

这就是我所拥有的：

```
List <WebElement> rows = driver.findElements(By.xpath(rowsXpath));
int j = 1;
boolean foundCollector = false;
for(WebElement e : rows) {
    String c = e.findElement(By.xpath("(//tbody)[" + j + "]//u[text()=\"" + collector + "\"])")).getText();
    if(c.equals(collector)) {
        foundCollector = true;
        break;
    }
    ++j;
} 
```

列表行包含具有多列的单个行，我试图在列中找到包含特定名称的行。在我的 for 循环中，我试图使用相对 xpath 来查找元素，这甚至可能吗？或者我是否需要提供用于查找行的整个 xpath 以及单个 div 的附加 xpath？

我不能保证列的顺序，这就是为什么我必须这样做。

这是我用来获取行的 xpath：

```
String rowsXpath = "//div[@id=\"QosDashpardPanelBottom\"]//div[@id=\"CollectorQoSPerformanceMetricsgrid\"]//div[contains(@class, \"x-grid3-row  x-unselectable-single\")]"; 
```

这是HTML：

```
<body class=" ext-gecko ext-windows" onload="processLoaders();">
<script type="text/javascript">
<div id="topNavDiv" style="height: 90px">
<div id="bodyContentOuter" style="width: 1280px; height: 587px;">
    <div id="bodyContentInner">
        <script src="RLT/RLT.nocache.js" language="javascript" type="text/javascript">
        <script defer="defer">
        <script language="javascript" type="text/javascript">
        <div id="rtcpMain" class=" x-component x-border-layout-ct" style="width: 1280px; height: 587px;">
            <div id="rtcpMainWest" class=" x-panel x-component x-border-panel" style="left: 5px; top: 5px; width: 225px;">
            <div id="x-auto-2" class=" x-tab-panel x-component x-border-panel" tabindex="0" hidefocus="true" style="left: 235px; top: 5px; width: 1040px;">
                <div class="x-tab-panel-header x-unselectable" style="width: 1038px;" unselectable="on">
                <div class="tone-rtcp-tabbed-content-panel" style="width: 1040px; height: 550px;">
                    <div id="x-auto-10" class=" x-component" style="overflow: auto; width: 1040px; height: 550px;">
                        <div id="QosDashboardPanel0" class=" x-panel x-component" style="width: 1040px;">
                            <div id="x-auto-13" class=" x-small-editor x-panel-header x-component x-hide-display" role="presentation">
                            <div id="rtcpDPBWrap" class="x-panel-bwrap" role="presentation" style="overflow: visible;">
                                <div class="x-panel-tbar x-panel-tbar-noheader" role="presentation" style="width: 1040px;">
                                <div id="rtcpDPBody" class="x-panel-body x-panel-body-noheader x-border-layout-ct" role="presentation" style="width: 1038px; height: 700px;">
                                    <div id="QosDashboardPanelTop" class=" x-component x-border-panel x-border-layout-ct" style="left: 0px; top: 0px; width: 1038px; height: 400px;">
                                    <div id="QosDashpardPanelBottom" class=" x-component x-border-panel x-border-layout-ct" style="left: 1px; top: 401px; width: 1036px; height: 298px;">
                                        <div id="QosDashpardPanel_pqosChartsLC" class=" x-component x-border-panel x-border-layout-ct x-hide-display" style="left: 0px; top: 0px; width: 1036px; height: 400px;">
                                        <div id="QosDashpardPanel_metricsTablesLC" class=" x-component x-border-panel x-border-layout-ct" style="left: 1px; top: 1px; width: 1034px; height: 296px;">
                                            <div id="CollectorMetrics_toneletWrapper" class=" x-panel x-component x-border-panel" style="left: 1px; top: 1px; width: 330px;">
                                                <div id="x-auto-99" class=" x-small-editor x-panel-header x-component x-hide-display" role="presentation">
                                                <div class="x-panel-bwrap" role="presentation">
                                                    <div class="x-panel-body x-panel-body-noheader" role="presentation" style="width: 328px; height: 292px;">
                                                        <div id="CollectorMetrics" class=" x-panel x-component" style="width: 328px;">
                                                            <div id="x-auto-109" class=" x-small-editor x-panel-header x-component x-unselectable" role="presentation" unselectable="on">
                                                            <div class="x-panel-bwrap" role="presentation">
                                                                <div class="x-panel-body" role="presentation" style="width: 326px; height: 265px;">
                                                                    <div id="CollectorQoSPerformanceMetricsgrid" class=" x-grid-panel x-component" style="position: relative; width: 326px; height: 265px;" tabindex="0" hidefocus="true" unselectable="">
                                                                        <div class="x-grid3" role="presentation" style="width: 326px; height: 265px;">
                                                                            <div class="x-grid3-viewport" role="presentation">
                                                                                <div class="x-grid3-header" role="presentation">
                                                                                <div class="x-grid3-scroller" role="presentation" style="width: 326px; height: 243px;">
                                                                                    <div class="x-grid3-body" role="presentation">
                                                                                        <div id="CollectorQoSPerformanceMetricsgrid_x-auto-633" class="x-grid3-row x-unselectable-single x-grid3-row-selected x-grid3-highlightrow " style="width:510px;">
                                                                                            <table class="x-grid3-row-table" cellspacing="0" cellpadding="0" border="0" style="width:510px;" role="presentation">
                                                                                                <tbody role="presentation">
                                                                                                    <tr role="presentation">
                                                                                                        <td id="x-auto-634" class="x-grid3-col x-grid3-cell x-grid3-td-name x-grid-cell-first " style="width:148px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-name" unselectable="on">
                                                                                                                <u>Lync</u>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-635" class="x-grid3-col x-grid3-cell x-grid3-td-badCalls " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-badCalls" unselectable="on">36</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-636" class="x-grid3-col x-grid3-cell x-grid3-td-totalCalls " style="width:58px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-totalCalls" unselectable="on">120</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-637" class="x-grid3-col x-grid3-cell x-grid3-td-avgLatency " style="width:73px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgLatency" unselectable="on">223</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-638" class="x-grid3-col x-grid3-cell x-grid3-td-avgLoss " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgLoss" unselectable="on">0.80</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-639" class="x-grid3-col x-grid3-cell x-grid3-td-avgJitter " style="width:58px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgJitter" unselectable="on">29</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-640" class="x-grid3-col x-grid3-cell x-grid3-td-avgMOS x-grid3-cell-last " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgMOS" unselectable="on">3.86</div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                        <div id="CollectorQoSPerformanceMetricsgrid_x-auto-641" class="x-grid3-row x-unselectable-single " style="width:510px;">
                                                                                            <table class="x-grid3-row-table" cellspacing="0" cellpadding="0" border="0" style="width:510px;" role="presentation">
                                                                                                <tbody role="presentation">
                                                                                                    <tr role="presentation">
                                                                                                    <td id="x-auto-642" class="x-grid3-col x-grid3-cell x-grid3-td-name x-grid-cell-first " style="width:148px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-name" unselectable="on">
                                                                                                            <u>CUCM-Publisher</u>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-643" class="x-grid3-col x-grid3-cell x-grid3-td-badCalls " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-badCalls" unselectable="on">3</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-644" class="x-grid3-col x-grid3-cell x-grid3-td-totalCalls " style="width:58px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-totalCalls" unselectable="on">52</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-645" class="x-grid3-col x-grid3-cell x-grid3-td-avgLatency " style="width:73px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgLatency" unselectable="on">190</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-646" class="x-grid3-col x-grid3-cell x-grid3-td-avgLoss " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgLoss" unselectable="on">0.79</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-647" class="x-grid3-col x-grid3-cell x-grid3-td-avgJitter " style="width:58px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgJitter" unselectable="on">31</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-648" class="x-grid3-col x-grid3-cell x-grid3-td-avgMOS x-grid3-cell-last " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgMOS" unselectable="on">3.98</div>
                                                                                                    </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-12T18:32:54.510

是的，这绝对是可能的。看到这个：

```
// Find the outer element.
WebElement outer = driver.findElement(By.anything("whatever"));

// This doesn't work, it searches the whole page for the XPath expression.
WebElement inner = outer.findElement(By.xpath("//some/nasty/xpath"));

// This works! It takes the outer element as root.
WebElement inner = outer.findElement(By.xpath(".//some/nasty/xpath")); 
```

因此，如果我很好地理解了您的需求，您的 XPath 表达式需要如下所示：

```
By.xpath("(.//tbody)[" + j + "]//div[text()=\"" + collector + "\"])") 
```

* * *

**编辑**（天哪，这是很多 HTML，实际上只需要少量 :)。）

既然我抓住了你所追求的东西，我认为你根本不需要这种方法。试试这个：

```
WebElement row = driver.findElement(By.xpath("id('CollectorQoSPerformanceMetricsgrid')//div[contains(@class,'x-grid3-row x-unselectable-single') and .//u[text()='" + collector + "']]")); 
```

只有 XPath 表达式：

```
id('CollectorQoSPerformanceMetricsgrid')
    //div[contains(@class,'x-grid3-row x-unselectable-single')
          and .//u[text()='" + collector + "'] ] 
```

拆开：

```
FIND ELEM WITH ID = 'CollectorQoSPerformanceMetricsgrid'
id('CollectorQoSPerformanceMetricsgrid')
    FIND ALL DIV ELEMS THAT CONTAIN 'x-grid3-row x-unselectable-single' IN @CLASS
    //div[contains(@class,'x-grid3-row x-unselectable-single')
          AND HAVE AN <U> DESCENDANT WITH TEXT EQUAL TO collector VARIABLE
          and .//u[text()='" + collector + "'] ] 
```

这只会为您找到使用单个命令所需的单行。

如果您想坚持当前的解决方案，请尝试：

```
String rowsXpath = "id('CollectorQoSPerformanceMetricsgrid')//div[contains(@class, 'x-grid3-row x-unselectable-single')]";
List<WebElement> rows = driver.findElements(By.xpath(rowsXpath));
boolean foundCollector = false;
for(WebElement row : rows) {
    if(!row.findElements(By.xpath(".//u[text()='" + collector + "']")).isEmpty()) {
        foundCollector = true;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:09:36.617

我在这个 xpath 中没有找到行（tr 标签），那么它将如何获得行数。

```
String rowsXpath = "//div[@id=\"QosDashpardPanelBottom\"]//div[@id=\"CollectorQoSPerformanceMetricsgrid\"]//div[contains(@class, \"x-grid3-row  x-unselectable-single\")]"; 
```

您需要构建类似下面的 xpath 以获取特定表中的行数

```
int rowCount=driver.findElements(By.xpath("//table[@class='x-grid3-row-table']/tbody/tr")) 
```

或者，如果您想查找该表中具有特定名称的所有列

像下面这样构造xpath

```
int columnCount=driver.findElements(By.xpath("//table[@class='x-grid3-row-table']/tbody//tr//td[@name='RequiredName']")) 
```

# java - 将字符串从一个类传递到另一个类

> ID：14837736
> 
> 赞同：-4
> 
> 时间：2013-02-12T16:58:13.090
> 
> 标签：java

我已经检查了教程，这应该可以，但它没有。我在一个类中有一个字符串，我想在另一个类中使用它，但是当我这样做时，我得到一个空异常。

```
@ViewScoped
@ManagedBean
public class FileDirectoryViewer {
FileUploadController destination = new FileUploadController();

        NewDestination = destination + username + "/"; 
```

我正试图从

```
@ViewScoped
@ManagedBean(name = "fileUploadController")
public class FileUploadController {

    public String destination  = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/Uploaded/"; // main location for uploads 
```

我如何从`FileUploadController`to获得目的地`FileDirectoryViewer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:05:26.813

, 的`destination`字段`FileUploadController`没有访问修饰符，所以默认是包私有的。

如果这两个类在同一个包中，您可以通过创建类的实例并使用`.`实例上的运算符来访问属性来访问它：

```
FileUploadController controller = new FileUploadController();
NewDestination = controller.destination + username + "/"; 
```

如果不是，您应该实现一个返回的`public String getDestination()`方法。您还应该使用运算符调用此方法：。`FileUploadController``destination``.``controller.getDestination()`

考虑到您发布的代码存在几个问题：

*   您将代码放在`FileDirectoryViewer`类中的方法之外。在一个类中，您只能定义成员（例如字段或方法）。一般来说，行为代码位于方法声明的内部。

*   对路径属性使用硬编码变量可能被认为是不好的做法。寻找`java.util.Properties`一个开始。`destination`无论如何，从代码的外观来看，将字段作为实例字段是没有意义的，它可以是`static`或定义在`interface`.

*   Java 的命名约定建议变量名称为驼峰式，并以小写字母开头。

# java - Swing 中的 FlowLayout

> ID：14837740
> 
> 赞同：5
> 
> 时间：2013-02-12T16:58:26.363
> 
> 标签：java, swing, layout

这是我的布局。

![在此处输入图像描述](../Images/4f2c4872724e2223bb7ed03e5b9b69f1.png)

**两个单选按钮应位于欢迎标签下方。**

像这样：

```
__________________________
|                        | 
|        WELCOME         |
|         *  *           |
|                        |
|                        |
|                        |
|________________________| 
```

两个星号是单选按钮。

我的代码：

```
northpanel.setLayout(new FlowLayout(FlowLayout.CENTER));
northpanel1.setLayout(new FlowLayout(FlowLayout.CENTER));

northpanel.add(welcome);  //this welcome text label

northpanel1.add(r1);   //this radio 1
northpanel1.add(r2);   //this radio 2

add(northpanel,BorderLayout.NORTH);
add(northpanel1,BorderLayout.NORTH); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:21:12.000

```
import javax.swing.*;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;

public class StackOverflow14837740
{
    public static void main (String[] args)
    {
        SwingUtilities.invokeLater (new Runnable ()
        {
            @Override
            public void run ()
            {
                createAndShowGUI ();
            }
        });
    }

    private static void createAndShowGUI ()
    {
        JFrame frame = new JFrame ();
        frame.setLayout (new BorderLayout ());
        frame.setDefaultCloseOperation (JFrame.DISPOSE_ON_CLOSE);

        JPanel northPanel = new JPanel (new GridLayout (2, 1));

        JPanel welcomePanel = new JPanel (new FlowLayout (FlowLayout.CENTER));      
        welcomePanel.add (new JLabel ("Welcome"));

        northPanel.add (welcomePanel);

        JPanel radioPanel = new JPanel (new FlowLayout (FlowLayout.CENTER));

        JRadioButton button1 = new JRadioButton ("Button 1", true);
        JRadioButton button2 = new JRadioButton ("Button 2", false);

        ButtonGroup group = new ButtonGroup ();
        group.add (button1);
        group.add (button2);

        radioPanel.add (button1);
        radioPanel.add (button2);

        northPanel.add (radioPanel);

        JPanel middlePanel = new JPanel (new GridLayout (3, 3));

        for (int i = 0; i < 3; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                middlePanel.add (new JButton ("Button " + i + j));
            }
        }

        JPanel southPanel = new JPanel (new FlowLayout (FlowLayout.CENTER));

        southPanel.add (new JLabel ("Whose turn:"));
        southPanel.add (new JButton ("Reset"));

        frame.add (northPanel, BorderLayout.NORTH);
        frame.add (middlePanel, BorderLayout.CENTER);
        frame.add (southPanel, BorderLayout.SOUTH);

        frame.pack ();
        frame.setVisible (true);
    }
} 
```

它看起来像这样（尽管您必须稍微调整它的大小）：

![打印屏幕](../Images/90dae080c35dd7788721f8d68ba8e77c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T17:11:29.643

然后添加`northpanel`和`northpanel`_ `panel`_`GridLayout(0, 1)`

```
add(panel, BorderLayout.NORTH); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T17:10:39.083

您不能向一个区域添加多个组件，`BorderLayout`并且您最终会这样做。您需要将您的更改`northpanel`为 a `BorderLayout`，然后将欢迎文本`northtestpanel1`放入其中，如下所示：

```
 northpanel -> BorderLayout, JFrame's NORTH position
 welcome -> northpanel NORTH position
 northpanel1 -> FlowLayout, northpanel CENTER position 
```

你可能有关于放在`welcome`中心的问题（我只是在猜测，也许它会正常工作）。如果您没有任何解决方案，只需将其包装成一个新的`JPanel`并使用`FlowLayout`with `FlowLayout.CENTER`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T17:19:10.393

您必须使用 GridLayout 或 GridBagLayout 而不是 Flow-layout。首先设置北面板的 GridBagLayout，然后添加您需要的组件，比如说您的单选按钮和 Wellcome 标签。更多详细信息，您可以[在此处](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)咨询。

# iphone - 连接自定义导航栏插座以在 IB 中查看

> ID：14837741
> 
> 赞同：-2
> 
> 时间：2013-02-12T16:58:31.030
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我在 IB 的视图中添加了一个导航栏。然后将 NavigationBar 对象的类更改为自定义导航栏子类。

如何连接我的插座以将栏设置为导航栏？当我尝试 ctrl + 拖动到我的文件所有者以创建插座时，唯一的选项是“查看”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:22:59.237

自定义导航栏不需要插座。只需选择故事板上的导航栏并在检查器窗口中写下您的自定义类的名称

![在此处输入图像描述](../Images/6b5be59ca78f12f1728a693dbfab233f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:01:56.097

在`.h`

```
IBOutlet UINavigationBar *navBar; 
```

如果您想对您`navigationBar`的代码进行一些更改，那么您必须进行`IBOutlet`.

# php - WHERE doesn't recognize and INSERT throws unique exception

> ID：14837746
> 
> 赞同：0
> 
> 时间：2013-02-12T16:58:38.813
> 
> 标签：php, mysql, sql, pdo

I read some of the answers here and get "mind-locked". I am new and don't work at this, just taught myself over the last 43 years. I converted a piece of code from the hit counter I wrote the other day, and it simply counts the number of times an IP runs my denied access page. The code checks to see if the IP is already in the database table (unique). If it is, it simply increments and updates. If it isn't there, it inserts it with a value of 1.

All was well, then I noticed no increment when testing. So I isolated it and found that it won't recognize the table column value to update it, and it throws an exception when it tries to insert it as a new value because it is unique.

I have looked and looked and cannot seem to understand why it works fine in my hitcounter, but fails miserably here?!?

```
$IP = $_SERVER['REMOTE_ADDR'];
$IP = preg_replace('#[^0-9\.]#','',$IP);
$db_table = 'deniedcounter';
echo 'Enter denied_record.php<br />';
//$IP = str_replace('.','x',$IP);

function setdeniedcounter($IP, $db_handle, $db_table){
    $hits = null;
    $ip = "'".$IP."'";
    try{
        echo "SELECT * FROM $db_table WHERE ip = $ip".'<br />';
        $stmt = $db_handle->query("SELECT * FROM $db_table WHERE ip = $ip");
        $row_count = $stmt->rowCount();
        echo $row_count.' = Rows selected.<br />';
    }
    catch(PDOException $e){
        db_exception_handler($e);
    }
    if($row_count == 1){
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        echo $row['ip'].' '.$row['hits'].'<br />';
        $hits = $row['hits']; $ip = $row['ip'];
        $hits++;
        try{
            $stmt = $db_handle->prepare("UPDATE $db_table SET hits=? WHERE ip=?");
            $stmt->execute(array($hits, $ip));
            $affected_rows = $stmt->rowCount();
            echo $affected_rows.'<br />';
        }
        catch(PDOException $e){
            db_exception_handler($e);
        }
        exit();
    }
    elseif($row_count == 0){
        $hits = 1;
        try{
            $stmt = $db_handle->prepare($sql = "INSERT INTO $db_table(ip, hits) VALUES(?, ?)");
            $stmt->execute(array($ip, $hits));
            $affected_rows = $stmt->rowCount();
            //echo $affected_rows.'<br />';
        }
        catch(PDOException $e){
            db_exception_handler($e);
        }
    }
    //echo 'Hits = '.$hits.'<br />';
    if(isset($hits)){return $hits;}
}    

$db_handle = db_OPEN($db_host, $db_name, $db_username, $db_pwd);
if(strlen($IP) > 6){$da_hits = setdeniedcounter($IP, $db_handle, $db_table);}
if(!isset($da_hits)){$da_hits = setdeniedcounter('ALERT', $db_handle, $db_table);}
$db_handle = db_CLOSE($db_handle);
echo 'Exit denied_record.php<br />';
exit(); 
```

====================
OUTPUT:

```
Enter denied_record.php

SELECT * FROM deniedcounter WHERE ip = '127.0.0.1'

0 = Rows selected.

SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry ''127.0.0.1'' 
for key 'ip'

Exit denied_record.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:11:20.477

Mysql 为您提供了一个特殊的运算符。
不需要 SELECT 首先 - 只需插入一些额外的代码：

INSERT INTO $db_table(ip, hits) VALUES(?, ?) ON DUPLICATE KEY UPDATE hits=hits+1

所以，你的功能实际上必须是

```
function setdeniedcounter($ip, $db_handle, $db_table) {
    $sql  = "INSERT INTO $db_table(ip, hits) VALUES(?, 1) 
             ON DUPLICATE KEY UPDATE hits=hits+1";
    $stmt = $db_handle->prepare();
    $stmt->execute(array($ip));
} 
```

bu 如果你想返回命中 - 你需要选择它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:11:34.943

问题是你正在检查两个不同的东西。当您使用准备好的语句问号时，MySQL 会插入自己的单引号。因此，您最初检查的是 127.0.0.1 是否存在，但事实并非如此。然后您尝试插入 '127.0.0.1' （包括**value**中的单引号），它已经存在，这就是它失败的原因。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-12T17:10:36.087

数据库中的 IP 字段是一个字符串。可能在第一个 sql 语句中您必须使用引号？

```
$db_handle->query("SELECT * FROM $db_table WHERE ip = $ip"); 
```

用。。。来代替：

```
$db_handle->query("SELECT * FROM $db_table WHERE ip = '".$ip."'"); 
```

# sql-server-2008 - 基于连接替换字符的 SQL 查询

> ID：14837753
> 
> 赞同：0
> 
> 时间：2013-02-12T16:59:03.457
> 
> 标签：sql-server-2008

我有一个名为 service entry 的表，其中有一个名为 part description 的字段，示例数据如下：

```
**dbo.ServiceEntry**
ID      PartDescription
1200  60009 ~ Slide Error ~ L 0 ~ P 0 | 60011 ~ RV loader - Pick/Place Homing Error ~ L 0 ~ P 0 
```

然后我有一个名为 ServiceEntryPart 的表，它具有一对多的关系，一个服务条目可以有多个部分，因此服务条目部分表

```
**dbo.ServiceEntryPart**
ID  ServiceEntry   PartID   OldPartID
1    1200          5000     60009
2    1200          5500     60011

**dbo.Part**
ID     Description                           OldPartID
5000   New Slide Description                 60009
5500   Xyz                                   60011 
```

我正在尝试编写一个脚本来更新 ServiceEntry 表中的 partdescription 列，因此预期结果将如下所示，并带有新的部件 ID。所以它基本上只是用新的替换旧的零件ID

**旧输出**

```
60009 ~ Slide Error ~ L 0 ~ P 0 | 60011 ~ RV loader - Pick/Place Homing Error ~ L 0 ~ P 0 
```

**新输出**

```
5000 ~ New Slide Description ~ L 0 ~ P 0 | 5500 ~ Xyz ~ L 0 ~ P 0 
```

我需要一些有关 script.query 的帮助，以使用新的部件 ID 更新此字段（如果存在）：

```
 1\. Get the existing field
 DECLARE @PartDescription VARCHAR(8000)
 SELECT @PartDescription =  PartDescription FROM
 ServiceEntry

 2\. UPDATE ServiceEntry
    SET PartDescription 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:13:07.677

如果可以这样选择：

```
SELECT SE.ID, SE.PartDescription
FROM ServiceEntryPart SEP
JOIN ServiceEntry SE ON SE.ID = SEP.ServiceEntry
JOIN Part P ON P.ID = SEP.PartID 
```

您应该能够像这样更新：

```
UPDATE SE
SET SE.PartDescription = P.Description
FROM ServiceEntryPart SEP
JOIN ServiceEntry SE ON SE.ID = SEP.ServiceEntry
JOIN Part P ON P.ID = SEP.PartID 
```

但请检查您是否提取了正确的记录。

ServiceEntry 中连接的 PartDescription 对我来说看起来很可疑。您最好在需要时使用规范化表上的连接将这些信息拉到一起，而不是以非规范化形式存储。以这种形式，您将无法做很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:52:34.970

```
DECLARE @ServiceEntry TABLE(
        ID INT,
        PARTDescription VARCHAR(MAX)
)

DECLARE @ServiceEntryPart TABLE(
        ID   INT,
        ServiceEntry   INT,
        PartID INT,
        OldPartID INT
)

DECLARE @Part TABLE(
        ID  INT,
        [Description]  VARCHAR(50),
        OldPartID VARCHAR(50)
)

INSERT INTO @ServiceEntry SELECT 1200, ''

INSERT INTO @ServiceEntryPart SELECT 1, 1200, 5000, 60009
INSERT INTO @ServiceEntryPart SELECT 2, 1200, 5500, 60011

INSERT INTO @Part SELECT 5000, 'New Slide Description', 60009
INSERT INTO @Part SELECT 5500, 'Xyz', 60011

UPDATE @ServiceEntry
SET PARTDescription = 
        ( 
            SELECT  CAST(p.ID AS VARCHAR)+ ' ~ ' + p.Description + ' ~ L 0 ~ P 0 | '
            FROM    @Part p INNER JOIN  
                    @ServiceEntryPart ep ON p.ID = ep.PartID
            WHERE   ep.ServiceEntry = se.ID
            FOR XML PATH('')
        ) 
FROM    @ServiceEntry se

UPDATE @ServiceEntry
SET PARTDescription = LEFT(PARTDescription, LEN(PARTDescription) -2)

SELECT *
FROM @ServiceEntry 
```

# css - CSS 选择器可以解决行高吗？

> ID：14837754
> 
> 赞同：2
> 
> 时间：2013-02-12T16:59:08.247
> 
> 标签：css, css-selectors, background-image

我想制作一个 CSS 样式表，允许完全没有经验的用户（使用 WYSIWYG 编辑器）在 PDF 链接旁边有 PDF 图标。但是，这可能会导致具有不同字体大小的图像被不必要的拉伸。**有什么方法可以告诉我用户对这些锚点应用了什么字体大小然后应用正确的图标？**

我希望有这样简单的东西：

```
:link[href$=".pdf"]::after,
:visited[href$=".pdf"]::after{
    background-size: 1em !important;
    background-repeat: no-repeat !important;
    background-position: 100% 50% !important;
    color:inherit !important;
    content:" " !important;
    padding-right:1.5em !important;
    text-decoration:inherit !important;
}
:link[href$=".pdf"]::after,
:visited[href$=".pdf"]::after{
    background-image:url('/images/MIME_PDF_16px.png');
}
:link[href$=".pdf"][style.line-height>16px]::after,
:visited[href$=".pdf"][style.line-height>16px]::after{
    background-image:url('/images/MIME_PDF_32px.png');
}
:link[href$=".pdf"][style.line-height>32px]::after,
:visited[href$=".pdf"][style.line-height>32px]::after{
    background-image:url('/images/MIME_PDF_48px.png');
}
:link[href$=".pdf"][style.line-height>48px]::after,
:visited[href$=".pdf"][style.line-height>48px]::after{
    background-image:url('/images/MIME_PDF_64px.png');
}
:link[href$=".pdf"][style.line-height>64px]::after,
:visited[href$=".pdf"][style.line-height>64px]::after{
    background-image:url('/images/MIME_PDF_128px.png');
} 
```

或者，这样的事情会很好：

```
:link[href$=".pdf"]::after,
:visited[href$=".pdf"]::after{
    background-size: 1em !important;
    background-repeat: no-repeat !important;
    background-position: 100% 50% !important;
    color:inherit !important;
    content:" " !important;
    padding-right:1.5em !important;
    text-decoration:inherit !important;
}
:link[href$=".pdf"]::after,
:visited[href$=".pdf"]::after{
    background-image:16px 16px url('/images/MIME_PDF_16px.png'),
                     32px 32px url('/images/MIME_PDF_32px.png'),
                     48px 48px url('/images/MIME_PDF_48px.png'),
                     64px 64px url('/images/MIME_PDF_64px.png'),
                     url('/images/MIME_PDF_128px.png');
} 
```

如果不存在这样的选择器或值，那么我应该向 W3C 提出它吗？**这会违背 CSS 的哲学吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:30:10.973

人们常说，通过样式属性进行选择的选择器的问题在于，它可能导致无限循环。例如，具有一个属性的选择器尝试将同一属性设置为另一个值并返回：

```
[display=block] { display: none; }
[display=none] { display: block; } 
```

我想它已经被提议过好几次了，但都遭到了拒绝。当然有几个反论点和观点，例如完全禁止在规则中设置相同的属性等，但这些超出了您的问题范围，所以我不会详细说明。如果您搜索[邮件列表档案](http://lists.w3.org/Archives/Public/www-style)，您应该能够找到关于此问题的大量讨论。

FWIW，Image Values level 4 实际上提到了一个`image-set()`功能，它允许您为不同的分辨率指定不同的图像，我相信在 WebKit 浏览器中可以找到一些类似的实现（当然，如`-webkit-image-set()`）。但是，我不认为它的设计目的是根据字体大小*本身*进行缩放；它旨在根据我所看到的分辨率进行缩放，这可能是也可能不是不同的问题。

我想这里最安全的选择是使用矢量图像格式，如 SVG，它可以优雅地缩小尺寸，但在大尺寸下仍保持其完整性。这样，图像就会担心缩放本身，因此您不必这样做。从您的代码来看，我认为浏览器支持不会是一个大问题：IE9 支持 SVG 图像和您的其他 CSS 代码一样。

* * *

哦，因为我们在这里讨论选择器，`:link`并且`:visited`只会`a[href]`在 HTML 中满足。如果您不需要伪类特异性，您可以通过完全删除这些伪类来减少选择器的冗余，因为您已经拥有适当的`href`属性选择器。所以代替这个：

```
:link[href$=".pdf"]::after, :visited[href$=".pdf"]::after 
```

你可以简单地这样做：

```
a[href$=".pdf"]::after 
```

甚至这样：

```
[href$=".pdf"]::after 
```

# driver - 使用什么技术/API/技术进行网络监控？

> ID：14837759
> 
> 赞同：0
> 
> 时间：2013-02-12T16:59:24.183
> 
> 标签：driver, ndis, network-monitoring, kernel-mode, filter-driver

好的，我正在构建一个实用程序来监视文件系统、注册表和网络活动（进程明智；只有选定进程的活动）。我通过开发一个微过滤器驱动程序完成了文件系统和注册表活动部分。但是，我不确定我应该如何为网络做这件事。我想做的很像 sysinternal 的 TCPView 所做的，但是我只想监视所选进程的 ESTABLISHED 连接。这是我想为每个连接实时获取的内容：

-协议（TCP 或 UDP）

-源端口

-远程IP和端口

-[可选] 从监视开始时开始在特定连接上传输的字节数

我应该用什么？我听说过 LSP，但进一步阅读后我意识到编写功能正常的 LSP 非常困难，更不用说几乎没有任何材料可供他们从头开始学习。此外，它们正在变得过时。问题是我只有大约 2-3 周的时间来学习+编写这个模块。由于时间限制，我当然不想选择 WFP 之类的东西，除非那里有非常好的教程，而且我不是在谈论 MSDN 文档。我不知道这是否可以使用 NDIS 等“轻松”完成。

无论如何，那我该怎么做，我应该把精力放在哪里。我是否应该冒险学习 LSP，或者 NDIS 会完成这项任务，还是其他什么。我现在有点不知所措。帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:14:55.247

看`GetExtendedTcpTable`和`GetExtendedUdpTable`。这些 API 将为您提供所需的大部分内容。但为了让事情变得有趣，我编写的演示代码`GetTcp6Table2`改为使用。

```
#define WIN32_LEAN_AND_MEAN
#define UNICODE
#define _UNICODE

#include <windows.h>
#include <winsock2.h>
#include <Ws2tcpip.h>
#include <iphlpapi.h>
#include <Tcpestats.h>
#include <Tcpmib.h>
#include <Mstcpip.h>
#include <stdlib.h>
#include <stdio.h>

#pragma comment(lib, "iphlpapi.lib")
#pragma comment(lib, "ws2_32.lib")

PCWSTR
StringFromState(MIB_TCP_STATE State)
{
    switch (State)
    {
        case MIB_TCP_STATE_CLOSED:
            return L"CLOSED";
        case MIB_TCP_STATE_LISTEN:
            return L"LISTEN";
        case MIB_TCP_STATE_SYN_SENT:
            return L"SYN_SENT";
        case MIB_TCP_STATE_SYN_RCVD:
            return L"SYN_RCVD";
        case MIB_TCP_STATE_ESTAB:
            return L"ESTAB";
        case MIB_TCP_STATE_FIN_WAIT1:
            return L"FIN_WAIT1";
        case MIB_TCP_STATE_FIN_WAIT2:
            return L"FIN_WAIT2";
        case MIB_TCP_STATE_CLOSE_WAIT:
            return L"CLOSE_WAIT";
        case MIB_TCP_STATE_CLOSING:
            return L"CLOSING";
        case MIB_TCP_STATE_LAST_ACK:
            return L"LAST_ACK";
        case MIB_TCP_STATE_TIME_WAIT:
            return L"TIME_WAIT";
        case MIB_TCP_STATE_DELETE_TCB:
            return L"DELETE_TCB";
        default:
            return L"[Unknown]";
    }
}

LPWSTR (NTAPI *pRtlIpv6AddressToStringW)(const IN6_ADDR *, LPWSTR);

int __cdecl main()
{
    ULONG r;

    // We need to load this dynamically, because ntdll.lib doesn't export it
    HMODULE ntdll = LoadLibrary(L"ntdll");
    pRtlIpv6AddressToStringW = (decltype(pRtlIpv6AddressToStringW))GetProcAddress(ntdll, "RtlIpv6AddressToStringW");

    // Initial guess for the table size
    ULONG cbTable = 100;
    MIB_TCP6TABLE2 *table = nullptr;
    while (true)
    {
        table = (MIB_TCP6TABLE2*)malloc(cbTable);
        if (!table)
            return 1;
        r = GetTcp6Table2(table, &cbTable, FALSE);
        if (ERROR_INSUFFICIENT_BUFFER == r)
        {
            // Try again with bigger buffer
            free(table);
            continue;
        }
        else if (ERROR_SUCCESS == r)
        {
            break;
        }
        else
        {
            free(table);
            wprintf(L"GetTcp6Table2 = %u\n", r);
            return 1;
        }
    }

    // Print table heading
    wprintf(L"%56s %56s %10s %6s\n", L"Local endpoint", L"Remote endpoint", L"State", L"PID");
    for (ULONG i = 0; i < table->dwNumEntries; i++)
    {
        MIB_TCP6ROW2 const &entry = table->table[i];

        WCHAR localAddr[46];
        WCHAR remoteAddr[46];
        pRtlIpv6AddressToStringW(&entry.LocalAddr, localAddr);
        pRtlIpv6AddressToStringW(&entry.RemoteAddr, remoteAddr);

        WCHAR localEndpoint[56];
        WCHAR remoteEndpoint[56];
        swprintf_s(localEndpoint,  L"[%s]:%-5u", localAddr,  ntohs(entry.dwLocalPort));
        swprintf_s(remoteEndpoint, L"[%s]:%-5u", remoteAddr, ntohs(entry.dwRemotePort));

        wprintf(L"%56s %56s %10s %6u\n",
                localEndpoint, remoteEndpoint,
                StringFromState(entry.State),
                entry.dwOwningPid);
    }

    free(table);
    return 0;
} 
```

示例输出（实际地址匿名）：

```
C:\>test.exe
                              Local endpoint                              Remote endpoint     State  PID
                                  [::]:80                                      [::]:0        LISTEN    4
                                  [::]:135                                     [::]:0        LISTEN  980
                                  [::]:445                                     [::]:0        LISTEN    4
                                  [::]:1025                                    [::]:0        LISTEN  692
[2001:xxxx:x:xxx:x:xxxx:xxx.xx.xxx.xx]:6044                 [xxxx:xxx:xxxx:xxxx::x]:443       ESTAB 3248
[2001:xxxx:x:xxx:x:xxxx:xxx.xx.xxx.xx]:6045                 [xxxx:xxx:xxxx:xxxx::x]:443       ESTAB 3248
  [2001:xxxx:xx:x:xxxx:xxxx:xxxx:xxxx]:53759 [2001:xxxx:xx:xxxx:xxx:xxxx:xxxx:xxxx]:135   TIME_WAIT    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:09:53.860

在我看来，你想要像 winpcap 这样的东西，这就是wireshark 使用的东西。

[http://www.winpcap.org/](http://www.winpcap.org/)

ReactOS 的 netstat 代码也可能很有趣

[http://doxygen.reactos.org/dd/d3f/netstat_8c_source.html](http://doxygen.reactos.org/dd/d3f/netstat_8c_source.html)

# android - Mobile App Works on iPhone but Not Android

> ID：14837766
> 
> 赞同：1
> 
> 时间：2013-02-12T16:59:59.903
> 
> 标签：android, jquery, iphone, mobile

Demo: [http://admin.bigblackbag.net/web/mobile_content.asp?WebsiteID=15175&forcemobile=1](http://admin.bigblackbag.net/web/mobile_content.asp?WebsiteID=15175&forcemobile=1)

Works perfectly on iPhone.. but seems to crash on native Android browser.. it crashes when you try to use the navigation menu and doesn't look adjust properly.. Any ideas? Pretty please!? Been stumped for weeks..

```
$(function () {
var menuStatus;
// Show Menu
$("a.showMenu").click(function () {
    if (menuStatus != true) {
        $("#page").animate({
            marginLeft: "85%",
        }, 300, function () {
            menuStatus = true
        });
        $("#page").css("position","fixed");
        $("#page").addClass("shadow");            
        $("#menu").animate({opacity: "1"}, 300);
        return false;
    } else {
        $("#page").animate({
            marginLeft: "0px",
        }, 300, function () {
            menuStatus = false
        });
        $("#page").css("position","absolute");
        $("#page").removeClass("shadow");
        $("#menu").animate({opacity: "0"}, 300);
        return false;
    }
}); 
 // Menu behaviour
$("#menu li a").click(function () {
    var p = $(this).parent();
    if ($(p).hasClass('active')) {
        $("#menu li").removeClass('active');
    } else {
        $("#menu li").removeClass('active');
        $(p).addClass('active');
    }
  });   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:05:55.340

尝试这个：

```
$(function () {
var menuStatus;
// Show Menu
$("a.showMenu").click(function (e) {
    if (menuStatus != true) {
        $("#page").animate({
            marginLeft: "85%",
        }, 300, function () {
            menuStatus = true
        }).css("position","fixed").addClass("shadow");            
        $("#menu").animate({opacity: "1"}, 300);
    } else {
        $("#page").animate({
            marginLeft: "0px",
        }, 300, function () {
            menuStatus = false
        }).css("position","absolute").removeClass("shadow");
        $("#menu").animate({opacity: "0"}, 300);
    }
    e.preventDefault();
}); 
 // Menu behaviour
$("#menu li a").click(function () {
    $("#menu li").removeClass('active');
    $(this).parent().addClass('active');
  });   
}); 
```

# javascript - JavaScript dynamic Line Charts with many points (~500,000)

> ID：14837767
> 
> 赞同：5
> 
> 时间：2013-02-12T17:00:00.607
> 
> 标签：javascript, charts, data-visualization, linechart

I am surveying JavaScript charting solutions for building interactive dashboards. The dashboard is going to have 15 charts, each with 6 lines, and each line has ~5000 points (15 * 6 * 5000 = 450,000). And a new point will be appended (and an old point be removed) to each line about every 3 secs. In addition, I want interactive box zooming and tooltips.

Is this possible without intervalizing(downsampling) the source data? Can anyone recommend JavaScript solutions to try?

I came across Flotr2, Rickshaw, jqChart, HighCharts, I am wondering if people can share first hand experience for such use case.

In case this is not a realistic goal, what would the closest performance be with today's technology?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:05:39.480

我认为[jqChart](http://www.jqchart.com/Default.aspx)可以满足您的要求：

> jqChart 利用 HTML5 Canvas 提供跨浏览器*的高性能客户端图表*和图形..

折线图的渲染速度针对处理大量数据进行了优化。此[折线图示例](http://www.jqchart.com/jquery/chart/ChartPerformance/LineChart)显示 2 个系列，每个系列有 60,000 个点。

*免责声明：我是 jqChart 的 CTO。*

# sql-server-ce - Is there a limit to the number of SQL Server CE 4.0 databases I can use within a WebMatrix web project?

> ID：14837772
> 
> 赞同：2
> 
> 时间：2013-02-12T17:00:08.250
> 
> 标签：sql-server-ce, webmatrix

I'm currently working on a WebMatrix web project (mainly because this may eventually be sold as a standalone web product to companies without external access to the Internet). I'm aware of the current SQL Server CE restrictions of 4GB and 256 connections. I'm considering slicing off several of the data-intense tables (logging, catalog resource lookup, etc) into different databases to avoid the 4GB limit. I will not be querying across databases. Will I run into a problem if I use multiple CE databases on the project?

Thanks! --Kevin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:17:46.843

否 - 您可以添加到 Web Pages 站点的 SQL CE 数据库的数量没有限制。如果您能够将各种与数据相关的任务清晰地分离到不同的数据库中，那么您也不应该有任何技术问题。

# sql - 按请求在我的组中包含计数 0

> ID：14837777
> 
> 赞同：0
> 
> 时间：2013-02-12T17:00:20.763
> 
> 标签：sql, postgresql, count, group-by

我对 postgresql 有一个 COUNT + GROUP BY 请求。

```
SELECT date_trunc('day', created_at) AS "Day" , 
       count(*) AS "No. of actions" 
FROM events 
WHERE created_at > now() - interval '2 weeks' 
  AND "events"."application_id" = 7 
  AND ("what" LIKE 'ACTION%') 
GROUP BY 1 
ORDER BY 1 
```

对于 id 为 7 的应用程序，我的请求在 2 周内计算我的事件表（日志表）上每天的“ACTION*”数量。但问题是它没有显示没有记录任何操作的一天。

我知道这是因为我的 WHERE 子句，所以我尝试了一些带有 JOIN 请求的东西，但没有给我一个好的答案。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:04:48.843

制作日期表：

```
CREATE TABLE "myDates" (
    "DateValue" date NOT NULL
);

INSERT INTO "myDates" ("DateValue") 
select to_date('20000101', 'YYYYMMDD') + s.a as dates from generate_series(0,36524,1) as s(a); 
```

然后离开加入它：

```
SELECT  d.DateValue AS "Day" , 
        count(*) AS "No. of actions"    
FROM    myDates d left join events e on date_trunc('day', "events"."created_at") = d.DateValue
WHERE   created_at > now() - interval '2 weeks' AND 
        "events"."application_id" = 7 AND 
        ("what" LIKE 'ACTION%') 
GROUP BY 1 ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:54:10.660

好的，一位朋友帮助了我，这是答案：

```
SELECT  "myDates"."DateValue" AS "Day" , 
    (select count(*) from events WHERE   date_trunc('day', "events"."created_at") = "myDates"."DateValue" AND 
    ("events"."application_id" = 4) AND 
    ("events"."what" LIKE 'ACTION%'))  AS "No. of actions"    
FROM    "myDates" 
where ("myDates"."DateValue" > now() - interval '2 weeks') AND ("myDates"."DateValue" < now()) 
```

所以我们需要询问 MyDates 表中的所有日期，并询问第二个参数的计数。

# cloudera - Connecting asterdata on cloudera

> ID：14837778
> 
> 赞同：0
> 
> 时间：2013-02-12T17:00:29.240
> 
> 标签：cloudera, sqoop

I am facing a problem connecting to aster data nCluster on `Cloudera`?

Is it possible using `sqoop`?

# c# - 从单元测试调用时，Application.Current 为空

> ID：14837784
> 
> 赞同：26
> 
> 时间：2013-02-12T17:00:43.840
> 
> 标签：c#, wpf, unit-testing

我有一个试图从单元测试中调用的方法。此方法将在现实生活中从后台线程运行。它使用一些代码来启动对 UI 线程的调用更新（使用`Application.Current.Dispatcher.BeginInvoke`.... ）。

但是`Application.Current`，`null`当从单元测试中调用时。

我真的不知道要`if (Application.Current !=null)`解决什么问题。

有没有其他方法可以解决这个问题？

_statusUpdates 是一个 ObservableCollection

下面是我要测试的方法中的部分代码（公平地说，它更像是集成测试而不是单元测试）。

```
Application.Current.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal, (EventHandler)delegate
{
    _statusUpdates.Add(new StatusUpdate
    {
        DateTime = DateTime.Now,
        Message = "Checking For Messages"
    });
}, null, null); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-10-03T22:07:52.183

以下代码片段适用于我：

```
if (System.Windows.Application.Current == null) 
  { new System.Windows.Application { ShutdownMode = ShutdownMode.OnExplicitShutdown }; } 
```

IIRC，我遇到了一个问题，即使用嵌入在 WinForms 应用程序中的 WPF 控件，Application 为空，并且在 StackOverflow 上的另一个问题中建议使用该代码片段作为该问题的解决方案（抱歉，找不到源代码）。它解决了单元测试中的相同问题（而且我认为在这种情况下不需要显式设置 ShutdownMode 属性）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T17:33:12.840

如前所述，`Application`在单元测试期间您根本不会上课。

也就是说，这里有一个问题我认为需要解决 - 在你的情况下，通过拥有依赖于定义的静态属性的代码`Application.Current.Dispatch`，你现在**非常**紧密地耦合到该类的特定实现，即 WPF`Application`类，你不需要需要。

即使您只是将“当前根调度程序”的想法包装在一个`Singleton`-style 类包装器中，现在您也可以将自己从`Application`类的变幻莫测中解耦并直接处理您关心的内容，a `Dispatcher`：

注意，有很多方法可以写这个，我只是提出最简单的实现；因此，我不会进行任何多线程安全检查等。

```
public class RootDispatcherFetcher
{
     private static Dispatcher _rootDispatcher = null;

     public static Dispatcher RootDispatcher
     {
         get 
         {
             _rootDispatcher = _rootDispatcher ??
                 Application.Current != null 
                     ? Application.Current.Dispatcher
                     : new Dispatcher(...);
             return _rootDispatcher;
         }
         // unit tests can get access to this via InternalsVisibleTo
         internal set
         {
             _rootDispatcher = value;
         }
     }
} 
```

好的，现在这个实现只比以前*稍微*好一点，但至少你现在可以更好地控制对类型的访问，并且不再严格依赖于`Application`实例的存在。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-05-17T14:46:42.340

使用 `Dispatcher.CurrentDispatcher`代替`Application.Current.Dispatcher`

> Gets the System.Windows.Threading.Dispatcher for the thread currently executing and creates a new System.Windows.Threading.Dispatcher if one is not already associated with the thread.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:17:01.923

单元测试运行器中不会有 Application 对象。这些通常是基于“控制台”的应用程序，它们简单地运行和执行非 UI 代码（“单元”）。

我建议您不要使用单元测试框架来测试特定于 UI 的信息，我建议使用自动化 UI 测试框架来做到这一点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T17:12:52.203

所以这里的问题是必须在某个地方创建您的 Application 对象。因此，您需要找到`System.Windows.Application`实例化（或某些后代）类的位置。

如果项目是从模板构建的，那么您可能会在 App.xaml 文件中找到此类。您只需要确保它以某种方式被实例化。否则，在整个项目中搜索一个`Application`类，然后您必须手动实例化它。应该修复它。

# ajax - 将 js/css 与 ajaxed html 部分包含在内的正确方法是什么？

> ID：14837794
> 
> 赞同：0
> 
> 时间：2013-02-12T17:01:27.597
> 
> 标签：ajax, jquery

我正在构建我的第一个 ajax-heavy 应用程序，但不确定此类事情的正确方法。

例如，如果我在 html 部分（表单）中进行 ajax，则使用：

```
$('#content').load('form.html'); 
```

**我应该如何包含 javascript 和 css？**

当然，我可以将它们包含在原始文档中，但如果从未加载过表单，这似乎很浪费。`<script>`我可以用and元素内联它们（在 form.html 中）`<style>`，但这似乎是错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:06:49.943

您可以使用单独的 JS 文件并[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)在`.load`回调中加载它。

内联 CSS 应该可以正常工作，但由于您冒着弄乱主页的风险，您应该将其作为主页的一部分加载，而不是使用 AJAX。

不过，如果是我，我不会害怕在你的主页中多留几行目标明确的 JS*和*CSS 代码——在开始时将其与其他 JS 和 CSS 一起加载会更有效，在相同的文件，而不是启动另一个网络连接并等待它下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:14:58.363

$.getScript() 将发出一个额外的 http 请求来加载要在 form.html 中使用的 js 文件。

因此，例如，如果您通过 ajax 加载 20 个表单，则必须发出 20+20 个 http 请求（20 个用于加载 js 文件，20 个用于加载表单的 html）

一种可能的优化方法是：

在开始时加载所有 css（缩小）。

如果单个 js 文件在缩小后仍然很大，

根据在不同文件中使用的概率来安排js功能（（文件数量越少越好）。

缩小这些文件并在开始时加载概率最高的文件。

然后在检查文件是否已经加载后使用 $.getScript() 加载文件。

# apache-camel - 我必须为单例的 bean 组件 uri 选项显式设置 cache=true 吗？

> ID：14837797
> 
> 赞同：0
> 
> 时间：2013-02-12T17:01:50.237
> 
> 标签：apache-camel

使用 Spring ApplicationContextRegistry，我了解在 bean 定义中，默认情况下范围是单例的。因此，在下面的示例中，范围属性是多余的。

```
<bean id="heartbeatHandler" class="org.cybersecurity.ewf.HeartbeatHandler" scope="singleton"/> 
```

但是在下面的'to uri'中，我想确认我们是否需要显式设置cache=true？

```
<to uri="bean:heartBeatHandler?method=respondToHeartBeat&cache=true"/> 
```

为什么我们需要设置在2个地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:24:08.080

您不需要设置`scope="singleton"`或`cache=true`使用单例 bean。这是默认的。

缓存只缓存注册表查找。

# sql-server-2008-r2 - “OBJECT_SCHEMA_NAME”不是可识别的内置函数名称

> ID：14837798
> 
> 赞同：2
> 
> 时间：2013-02-12T17:01:51.973
> 
> 标签：sql-server-2008-r2

我正在尝试运行脚本以在 SQL Server 2008 r2 上设置 tsqlt 并收到此错误

> “OBJECT_SCHEMA_NAME”不是可识别的内置函数名称。

在另一台装有 SQL 2008 r2 的机器上，脚本运行良好。

我看不到每台机器的 sql server 设置中的用户或权限有任何区别。

这是引发错误的语句：

```
 CREATE FUNCTION tSQLt.Private_GetOriginalTableInfo(@TableObjectId INT)
RETURNS TABLE
AS
  RETURN SELECT CAST(value AS NVARCHAR(4000)) OrgTableName,
    OBJECT_ID(QUOTENAME(OBJECT_SCHEMA_NAME(@TableObjectId)) 
    + '.' + QUOTENAME(CAST(value AS NVARCHAR(4000)))) OrgTableObjectId
    FROM sys.extended_properties
   WHERE class_desc = 'OBJECT_OR_COLUMN'
     AND major_id = @TableObjectId
     AND minor_id = 0
     AND name = 'tSQLt.FakeTable_OrgTableName';
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:04:45.210

如果这实际上是在 SQL Server 2008 R2 上，则您的数据库处于 SQL Server 2000 兼容模式。你可以知道你现在处于什么模式：

```
SELECT name, compatibility_level
  FROM sys.databases
  WHERE name = N'your_database'; 
```

如果这是 80，您将需要向上移动（但这需要测试）：

```
ALTER DATABASE your_database SET COMPATIBILITY_LEVEL = 100; 
```

如果你不能向上移动，那么你总是可以通过加入`sys.schemas`而不是依赖内置函数来获取模式名称。

* * *

也就是说，如果您使用的是 SQL Server 2005 RTM（如评论中所暗示的那样），[`OBJECT_SCHEMA_NAME`则在 SQL Server 2005 Service Pack 2 中引入了](https://sqlblog.org/2007/02/19/sql-server-2005-service-pack-2-is-here)。您不应再在 SQL Server 2005 RTM 上运行任何系统。[去安装SP4](http://www.microsoft.com/en-us/download/details.aspx?id=7218)，你就可以使用这个功能了。

# regex - 如何使用正则表达式获取以连字符和字符开头的匹配字符串

> ID：14837799
> 
> 赞同：0
> 
> 时间：2013-02-12T17:01:52.927
> 
> 标签：regex

我有两个字符串

```
100-2000 
```

和

```
100-X200-2012 
```

我尝试编写匹配两个字符串的正则表达式，如下所示，如果第二个连字符以 X 开头，请忽略它

```
[0-9]+-[a-zA-Z0-9 \-X]+-[0-9] 
```

但它无法匹配它，我不确定如何将它与我的标准匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:20:25.377

由于您没有指定工具，我将使用 .NET 正则表达式风格（我个人最喜欢的）：

```
\d+(-[ \w-[_X]][ \w-[_]]+)?-\d+ 
```

`\d`是相同的`[0-9]`

在 .NET 中，您可以使用[字符类减法](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#CharacterClassSubtraction)从字符类中删除特定元素。在这种情况下，我`\w`在字符类中包含了一个空格和 a（与 [0-9a-zA-Z_] 相同），然后减去下划线和大写 X。

另一种选择是使用负前瞻：

```
\d+(-(?!X)[ 0-9a-zA-Z]+)?-\d+ 
```

我更喜欢这个，但并不是所有的正则表达式都支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:49:18.230

它可以是这样的

```
(\d*)(-X\d*|)-(\d{4}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:21:27.613

你的意思是这个：

```
[0-9]+-[^X][a-zA-Z0-9 \-]*-[0-9]+ 
```

# javascript - 谁能解释这个正则表达式

> ID：14837800
> 
> 赞同：0
> 
> 时间：2013-02-12T17:01:53.870
> 
> 标签：javascript, regex

我看到了 john resig 的一篇文章，解释了 JavaScript 继承。 [http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

在这篇文章中有一个类实现代码，其中起始行有一个正则表达式

```
fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/; 
```

谁能告诉我这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:09:32.053

`fnTest`用于检查方法是否在某处`_super`使用。为此，该函数被隐式转换为字符串 ( [`toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)) 并针对正则表达式 (in ) 进行[`test`编辑](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)`// Copy the properties over onto the new prototype`。

然而，并不是所有的实现都在调用方法时真正产生函数的源代码`toString`。因此，此测试检查是否`function(){xyz;}`可以针对包含进行测试`xyz`- 如果不是，则使用始终匹配`/.*/`而不是`/\b_super\b/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:05:17.057

有两个正则表达式。第一个是 just `/xyz/`，用于测试函数（强制为字符串）是否匹配`xyz`。确实如此。然后，返回两个正则表达式之一（在本例中是第一个，因为测试通过了）。

其中第一个是单词边界，`_super`然后是另一个至少可以匹配的单词边界`"_super"`，`" _super "` 和`word._super`。

第二个匹配零个或多个字符（即所有字符）。

# .net - Environment.Version 返回与“版本名称”不匹配的版本号

> ID：14837806
> 
> 赞同：0
> 
> 时间：2013-02-12T17:02:10.163
> 
> 标签：.net, version

运行此代码后：

```
foreach (string drive in Environment.GetLogicalDrives())    
    Console.WriteLine("Drive: {0}", drive);

    Console.WriteLine("OS: {0}", Environment.OSVersion);
    Console.WriteLine("Processor count: {0}", Environment.ProcessorCount);
    Console.WriteLine(".NET version: {0}", Environment.Version); 
```

我明白了

![在此处输入图像描述](../Images/0313b57a0dd8de78fffcf9a4e5753b87.png)

当我下载并启动 .NET 安装程序时，我被告知已经安装了 4.5 版本。版本名称和实际版本号有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:05:16.110

是的 - 基本上[.NET 4.5 是 .NET 4.0 的就地替代品](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)，因此`Environment.Version`前 3 个部分将返回相同的版本号。版本号的*构建*部分（在您的情况下为 18010）在 .NET 4.0 和 .NET 4.5 之间是不同的（并且可能会更新到每个版本），但在这两种情况下主要/次要/补丁级别都是 4.0.30319。

这真是令人困惑，但恐怕就是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:05:44.507

.NET 4.5 是 4.0 的直接替代品 - 版本号确实如您所见。

检查[参考程序集目录](https://stackoverflow.com/questions/12070518/where-is-the-net-framework-4-5-directory)中的程序集版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-28T10:27:11.800

从 .NET Core 3.0（和 .NET Standard 2.1）开始，情况发生了变化，现在可以`Environment.Version`正常工作。

```
System.Console.WriteLine($"Environment.Version: {System.Environment.Version}");

// Old result
//   Environment.Version: 4.0.30319.42000
//
// New result
//   Environment.Version: 3.0.0 
```

有关详细信息，请参阅[文档](https://docs.microsoft.com/ru-ru/dotnet/core/whats-new/dotnet-core-3-0#improved-net-core-version-apis)。

# c# - 点击windows phone中的网格

> ID：14837809
> 
> 赞同：2
> 
> 时间：2013-02-12T17:02:28.667
> 
> 标签：c#, silverlight, windows-phone-7

我有网格，`XAML`上面有几个按钮。我希望每次用户按下网格时都能收到通知，所以我添加了`MouseEnter`事件：

```
<Grid x:Name="LayoutRoot" Background="#FF1F1F1F" MouseEnter="TapMouse"> 
```

但我的问题是，每次按下其中一个按钮时，都会调用此方法。

有什么办法可以禁用吗？或任何其他方式来实现它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:53:26.547

首先在每个事件块中设置断点。

找出哪个先`button`开火`grid`

在顶部声明一个布尔值并调用它`buttonClicked = false;`

如果是`button`则将 a`buttonClicked = true`放入 but 事件中

如果是`grid`那么我会尝试看看你是否可以使用一个`buttonOver`事件

在网格事件中，将其全部包装在 if 语句中`if(!buttonClicked)`

那应该工作

**注意**您还必须`buttonClicked = false`为按钮添加一个可能失去焦点的事件

**更新：** 多年后回到这个答案，我承认这是贫民窟。虽然我想更新它，但我认为把它作为我自己无知的时间胶囊会更有益。

# java - setVisibleItemProperties 无效 VAADIN

> ID：14837810
> 
> 赞同：0
> 
> 时间：2013-02-12T17:02:36.083
> 
> 标签：java, web, vaadin

我使用了 Vaadin 电话簿示例并尝试进行一些修改并创建一个新应用程序。我需要更改表单字段的名称，我将其更改如下。但之后它没有显示任何项目。添加后仅显示 2 个按钮

```
 editorForm.setVisibleItemProperties(new Object[] { "First Name",
            "Last Name", "Phone Number", "Street", "City", "Postal Code",
            "Brand/Item" }); 
```

line.i 在 setItemDataSource 之前和 setItemDataSource line.but 之后输入它。但结果相同。当我删除上面的行时，表单将正确弹出并显示所有内容都是正确的

```
package com.vaadin.demo.jpaaddressbook;

import java.io.Serializable;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.List;
import java.util.Vector;

import com.vaadin.addon.beanvalidation.BeanValidationForm;
import com.vaadin.data.Item;
import com.vaadin.demo.jpaaddressbook.domain.Person;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Component;
import com.vaadin.ui.DefaultFieldFactory;
import com.vaadin.ui.Field;
import com.vaadin.ui.Form;
import com.vaadin.ui.FormFieldFactory;
import com.vaadin.ui.TextField;
import com.vaadin.ui.Window;

@SuppressWarnings("serial")
public class PersonEditor extends Window implements Button.ClickListener,
        FormFieldFactory {

private final Item personItem;
private Form editorForm;
private Button saveButton;
private Button cancelButton;

public PersonEditor(Item personItem) {
    this.personItem = personItem;
    editorForm = new BeanValidationForm<Person>(Person.class);
    editorForm.setFormFieldFactory(this);
    editorForm.setWriteThrough(false);
    editorForm.setImmediate(true);

    editorForm.setVisibleItemProperties(new Object[] { "First Name",
            "Last Name", "Phone Number", "Street", "City", "Postal Code",
            "Brand/Item" });

    editorForm.setItemDataSource(personItem, Arrays.asList("firstName",
            "lastName", "phoneNumber", "street", "city", "zipCode",
            "department"));

    saveButton = new Button("Save", this);
    cancelButton = new Button("Cancel", this);

    editorForm.getFooter().addComponent(saveButton);
    editorForm.getFooter().addComponent(cancelButton);
    getContent().setSizeUndefined();
    addComponent(editorForm);
    setCaption(buildCaption());
}

/**
 * @return the caption of the editor window
 */
private String buildCaption() {
    return "Enter Contact Details";
}

/*
 * (non-Javadoc)
 * 
 * @see com.vaadin.ui.Button.ClickListener#buttonClick(com.vaadin.ui.Button.
 * ClickEvent)
 */
@Override
public void buttonClick(ClickEvent event) {
    if (event.getButton() == saveButton) {
        editorForm.commit();
        fireEvent(new EditorSavedEvent(this, personItem));
    } else if (event.getButton() == cancelButton) {
        editorForm.discard();
    }
    close();
}

/*
 * (non-Javadoc)
 * 
 * @see com.vaadin.ui.FormFieldFactory#createField(com.vaadin.data.Item,
 * java.lang.Object, com.vaadin.ui.Component)
 */
@Override
public Field createField(Item item, Object propertyId, Component uiContext) {
    if ("department".equals(propertyId)) {
        return new DepartmentSelector();
    }

    Field field = DefaultFieldFactory.get().createField(item, propertyId,
            uiContext);
    if (field instanceof TextField) {
        ((TextField) field).setNullRepresentation("");
    }
    return field;
}

public void addListener(EditorSavedListener listener) {
    try {
        Method method = EditorSavedListener.class.getDeclaredMethod(
                "editorSaved", new Class[] { EditorSavedEvent.class });
        addListener(EditorSavedEvent.class, listener, method);
    } catch (final java.lang.NoSuchMethodException e) {
        // This should never happen
        throw new java.lang.RuntimeException(
                "Internal error, editor saved method not found");
    }
}

public void removeListener(EditorSavedListener listener) {
    removeListener(EditorSavedEvent.class, listener);
}

public static class EditorSavedEvent extends Component.Event {

    private Item savedItem;

    public EditorSavedEvent(Component source, Item savedItem) {
        super(source);
        this.savedItem = savedItem;
    }

    public Item getSavedItem() {
        return savedItem;
    }
}

public interface EditorSavedListener extends Serializable {
    public void editorSaved(EditorSavedEvent event);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:46:33.117

setVisibleItemProperties 方法用于定义表单中的可见字段，而不是定义字段的标题。

以下是为表单中的字段设置标题的一个示例：

```
form.getField("firstName").setCaption("First Name"); 
```

另一种方法是创建您自己的 FieldFactory 为您的字段设置标题（例如基于注释）。

# email - 找到从电子邮件地址输入的位置

> ID：14837811
> 
> 赞同：-3
> 
> 时间：2013-02-12T17:02:39.200
> 
> 标签：email, plesk

我有一个简单的联系表格，带有“发送”按钮，可以将邮件从电子邮件发送到电子邮件。

在带有 wamp 服务器的本地主机中，我已经完成了它并且它正在工作。

我使用“假电子邮件程序”发送它，我在“sendmail.ini”文件中输入了发件人电子邮件。

如何使用 plesk 服务作为服务器来实现相同的目标，我在哪里可以输入发件人电子邮件地址？

这听起来像是一项简单的任务，但我花了一个多小时才找到它。

> 我有一个带有用于 serer 代码的 php 的contact.html 表单，我想做的是将用户填写的contact.html 表单详细信息发送到外部电子邮件，在本地主机中我设法做到了，但知道我什么时候上传到服务器我无法找到“发件人电子邮件地址字段”（我可以在其中将电子邮件地址设置为从网站发出的电子邮件）。

假设您拥有一个站点并且某个用户填写了“联系我们”表单，您作为站点所有者将收到来自您站点的电子邮件，其中包含用户填写联系表单的用户详细信息。

> 此代码来自我的 php 文件 @mail($email_to, $email_subject, $email_message, $headers);
> 
> 通过在“我的本地计算机”和外部假电子邮件发件人程序上使用“wamp 服务器”，我用我的“来自地址的电子邮件”（sendmail.ini）填充了这个文件，其中包含以下几行：“smtp_server=smtp.gmail.com” , 'smtp_port=25' 和 'authentication' 详细信息：username= my_name@gmail.com 和 password='mypassword' 用于该电子邮件。

这就是我在“plesk”服务器台中寻找的那个 ini 文件的位置，我可以在其中输入发件人地址、smtp_port 和身份验证详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:22:44.357

这就是我使用 PHP 和 Mail() 函数的方式：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers .= 'Content-Transfer-Encoding: 8bit' . "\r\n";
$headers .= 'From: MyName <' . $from . '>' . "\r\n";
mail($to, $subject, $html, $headers); 
```

*   $from = 来自电子邮件
*   $to = 发送电子邮件
*   $html = 电子邮件正文
*   $subject = 电子邮件主题

# twitter-bootstrap - Twitter-bootstrap 轮播 - 在幻灯片上缓入和淡化背景颜色

> ID：14837818
> 
> 赞同：1
> 
> 时间：2013-02-12T17:03:28.237
> 
> 标签：twitter-bootstrap, css-transitions

我似乎能够让它滑动或褪色，但不能两者兼而有之。试图使其从右侧滑入并在不同背景颜色之间过渡。

jsfiddle：jsfiddle.net/HEzuM/3/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:15:29.200

我设法通过一些摆弄来做到这一点。可以在这里看到我的解决方案：jsfiddle.net/HEzuM/4/

# javascript - 确定浮动 div 绝对定位的 span 元素的位置

> ID：14837822
> 
> 赞同：1
> 
> 时间：2013-02-12T17:03:30.797
> 
> 标签：javascript, dom, css-position

我需要在 span 元素上创建一个“弹出”div。

我尝试确定它的位置和大小，以提供正确的边界来放置浮动 div。

```
 <html>
    <body>
    <p>text a</p>
            <div style="padding-left:200px;padding-top:500px">
                    <table class="message">
                            <tr><td>test <span id="test">hello</span> world</td></tr>
                    </table>
            </div>
    </body>
    </html> 
```

我尝试获取元素的此信息`id=test`

我尝试了两种方法：

首先我得到跨度

```
var span = document.getElementById('test'); 
```

比我使用[Retrieve the position (X,Y) of an HTML element](https://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element)

```
var x0 = 0;
var y0 = 0;
var el = span;
while(el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {
    x0 += el.offsetLeft - el.scrollLeft;
    y0 += el.offsetTop - el.scrollTop;
    el = el.offsetParent;
}
var x1 = x0 + span.offsetWidth;
var y1 = y0 + span.offsetHeight; 
```

我也尝试使用：

```
var rect = span.getBoundingClientRect();
x0 = rect.left;
x1 = rect.right;
y0 = rect.top;
y1 = rect.bottom; 
```

比我登录：

```
 console.log(JSON.stringify([x0,x1,y0,y1])); 
```

在这两种情况下，我都得到：

```
[236,264,381,401] 
```

作为 500 像素表格上方的边距，这是不正确的。

我怎样才能正确解决这个问题？

即我怎样才能在正确`div`的`position:ablosute`位置放置这个元素？

**注意：**我不能使用 JQuery 或其他胖工具包，我宁愿需要一个平面 JavaScript 中的可移植解决方案。

**编辑：**我注意到如果页面需要scolling它不起作用，即页面的头部被隐藏，如何补偿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:39:20.273

你的代码看起来不错——PPK 发表[了一篇文章，介绍了一种稍微简洁的方法](http://www.quirksmode.org/js/findpos.html)，但据我所知，它在功能上是相同的。如果他的解决方案不起作用，也许您可​​以尝试在 jsFiddle 上复制您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:56:28.177

即使你不能使用 jQuery 偏移方法或其他工具包也可以看看它。这是 jQuery 计算位置的方式（我只是修改了 win 变量，如果元素存在则删除测试）：

```
function getPos(elem) {
    var docElem, win,
        box = { top: 0, left: 0 },
        doc = elem && elem.ownerDocument;
    if ( !doc ) { return; }
    docElem = doc.documentElement;
    if ( typeof elem.getBoundingClientRect !== typeof undefined ) {
        box = elem.getBoundingClientRect();
    }
    win = self;
    return {
        top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
        left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
    };
} 
```

这是一个要测试的[小提琴](http://jsfiddle.net/dWwdc/)（单击带有 ID#test 的跨度）

# java - Java 中的关联 vs. 聚合 vs. 组合

> ID：14837826
> 
> 赞同：7
> 
> 时间：2013-02-12T17:03:39.593
> 
> 标签：java, oop

我试图理解这些术语的含义。我举了几个例子，比如：

聚合：Facebook**有一个**用户

组成： facebook 中的每个用户**都有一个**会话。

协会：人们**使用**浏览器

但我对**has a**和**使用**我的一个例子感到困惑。为什么不能是用户**使用**facebook 帐户或 Facebook**使用**会话来验证用户？

就OOP而言这是错误的吗？我在哪里错过了这个概念？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T17:12:59.307

使用**关系**意味着两件事

->两者都可以独立存在

->数据从整个分类器（**人**）流向部分分类器（**浏览器**）

有**关系**意味着两件事

-> 部分分类器（**会话**）的生命周期取决于整个分类器（**facebook**）的生命周期

-> 数据通常只流向一个方向（即从整个分类器（**facebook**）到部分分类器（**session**））。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:35:36.907

[代码项目中的这篇文章](http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit)对主题进行了简洁的解释。

首先，没有一成不变的方式来对域进行建模，有几种方法是针对特定问题的正确建模方法。例如，您的初始示例使用了一个`Facebook`类，而在您的后续操作中，您现在正在使用一种`Facebook Account`类型：使用一个或另一个（或两者）会对您的模型产生影响，但不会使其无效。

说，根据代码项目网站，**关联**关系意味着：

*   业主：无业主
*   一生：拥有自己的一生
*   子对象：子对象都是独立的。

考虑到这一点，我认为 和 之间没有关联关系`User`，`Facebook Account`因为它们彼此高度依赖（假设 User 指的是 Facebook 用户），因此**组合**可能是更好的关系。

我不确定您在`Session`课堂上指的是什么。如果这是[用户连接的时间段，](http://en.wikipedia.org/wiki/Login_session)`User`那么说 Facebook 使用 session 进行身份验证是没有意义的，也许和之间的关联关系`Session`可以是**agregation**，因为 User 可以在一天内拥有多个 Session 并且它是他们都是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:05:35.563

检查这个精确讨论聚合VS组合的[维基百科条目](http://en.wikipedia.org/wiki/Object_composition#Aggregation)

因此，用 Java 术语来说，Facebook 用户有一个名字（组成），而一个 Facebook 用户有一个朋友列表（聚合）

# ruby-on-rails-3 - 使用 heroku 部署时出错

> ID：14837827
> 
> 赞同：2
> 
> 时间：2013-02-12T17:03:40.417
> 
> 标签：ruby-on-rails-3, heroku

我的应用程序在我的本地主机上运行没有问题，但我无法使用 heroku 正确部署它。我已经阅读了有关此问题的所有其他问题，并尝试了多种方法来解决它，但尚未解决。

我已经在下面复制了我的 heroku 日志，因为我无法解决这个问题。

```
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/application.rb:136:in `initialize!'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:438:in `block in eager_load!'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:436:in `eager_load!'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:438:in `each'
2013-02-12T16:57:40+00:00 app[web.1]: /app/app/controllers/admin/users_controller.rb:1:in `<top (required)>': superclass mismatch for class UsersController (TypeError)
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `block in require'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `instance_exec'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `run'
2013-02-12T16:57:40+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-02-12T16:57:40+00:00 app[web.1]:   from script/rails:6:in `require'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:313:in `depend_on'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `run_initializers'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `each'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands/server.rb:46:in `app'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands/server.rb:70:in `start'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:50:in `tap'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-02-12T16:57:40+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:50:in `<top (required)>'
2013-02-12T16:57:41+00:00 heroku[web.1]: Process exited with status 1
2013-02-12T16:57:41+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-12T16:57:41+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-12T16:57:48+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 8575`
2013-02-12T16:58:03+00:00 app[web.1]: => Booting WEBrick
2013-02-12T16:58:03+00:00 app[web.1]: => Rails 3.2.10 application starting in production on http://0.0.0.0:8575
2013-02-12T16:58:03+00:00 app[web.1]: => Call with -d to detach
2013-02-12T16:58:03+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-02-12T16:58:03+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-12T16:58:03+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-12T16:58:06+00:00 app[web.1]:         provide a secret to prevent exploits that may be possible from crafted
2013-02-12T16:58:06+00:00 app[web.1]:         cookies. This will not be supported in future versions of Rack, and
2013-02-12T16:58:06+00:00 app[web.1]:         SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
2013-02-12T16:58:06+00:00 app[web.1]:         This poses a security threat. It is strongly recommended that you
2013-02-12T16:58:06+00:00 app[web.1]:         future versions will even invalidate your existing user cookies.
2013-02-12T16:58:06+00:00 app[web.1]: 
2013-02-12T16:58:06+00:00 app[web.1]:         Called from: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.
2013-02-12T16:58:06+00:00 app[web.1]: 
2013-02-12T16:58:10+00:00 app[web.1]: Exiting
2013-02-12T16:58:10+00:00 app[web.1]: /app/app/controllers/admin/users_controller.rb:1:in `<top (required)>': superclass mismatch for class UsersController (TypeError)
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `block in require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:359:in `require_or_load'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:313:in `depend_on'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:225:in `require_dependency'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:438:in `block in eager_load!'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `instance_exec'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1
/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `run_initializers'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:438:in `each'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:436:in `each'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/engine.rb:436:in `eager_load!'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `run'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/application.rb:136:in `initialize!'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `block in require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `each'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands/server.rb:46:in `app'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands/server.rb:70:in `start'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:50:in `tap'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-02-12T16:58:10+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:50:in `<top (required)>'
2013-02-12T16:58:10+00:00 app[web.1]:   from script/rails:6:in `require'
2013-02-12T16:58:10+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-02-12T16:58:11+00:00 heroku[web.1]: Process exited with status 1
2013-02-12T16:58:11+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-12T16:58:13+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=guidelines.herokuapp.com fwd=122.149.95.138 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-12T16:58:14+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=guidelines.herokuapp.com fwd=122.149.95.138 dyno= queue= wait= connect= service= status=503 bytes= 
```

我的管理员 usercontroller.rb 是

```
class Admin::UserController < ApplicationController
  def index
  end
  def new
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:35:56.620

你有一个`Admin`模块或类吗？我已经设置了类似的控制器，如下所示：

`admin_controller.rb`在`controllers/`文件夹中：

```
class AdminController < ApplicationController
  ...
end 
```

然后是用户的子控制器`controllers/admin/users_controller.rb`：

```
class Admin::UsersController < AdminController
  def index
  end
  def new
  end
end 
```

然后在您的路线中，您适当地确定范围或命名空间：

```
#routes.rb
namespace :admin
    resource :users
end 
```

有关您需要的特定路由，请参阅[“控制器命名空间和路由” 。](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:14:14.273

谢谢 - 我设法解决了这个问题。

当我使用 activeadmin 时，我与管理文件夹中不必要的 user_controller.rb 发生冲突。

都解决了。

# boost - intrusive_ptr、shared_ptr 性能测试

> ID：14837829
> 
> 赞同：2
> 
> 时间：2013-02-12T17:03:44.737
> 
> 标签：boost, shared-ptr, make-shared

```
class X {
    public:
std::string name;
int age;

long references;
X(string n, int a) : references(0), name(n), age(a) {}
};

inline void intrusive_ptr_add_ref(X* x){
++x->references;
}

inline void intrusive_ptr_release(X* x){
if(--x->references == 0) 
    delete x;
}

int _tmain(int argc, _TCHAR* argv[])
{
time_t t=clock();
size_t rounds=1000000;

for(size_t i=0; i<rounds; i++)
{
    intrusive_ptr<X> myX(new X("Michael",40));
    myX->age++;
}
cout << "Time taken to generate " << rounds << " of intrusive_ptr is " 
    << clock()-t << endl;

t=clock();
for(size_t i=0; i<rounds; i++)
{
    boost::shared_ptr<X> myX(new X("Michael",40));
    myX->age++;
}
cout << "Time taken to generate " << rounds << " of shared_ptr is " 
    << clock()-t << endl;

t=clock();
for(size_t i=0; i<rounds; i++)
{
    std::shared_ptr<X> myX(new X("Michael",40));
    myX->age++;
}
cout << "Time taken to generate " << rounds << " of Microsoft shared_ptr is " 
    << clock()-t << endl;

t=clock();
for(size_t i=0; i<rounds; i++)
{
    boost::shared_ptr<X> myX=boost::make_shared<X>("Michael",40);
    myX->age++;
}
cout << "Time taken to generate " << rounds << " of shared_ptr using make_shared is " 
    << clock()-t << endl;

t=clock();
for(size_t i=0; i<rounds; i++)
{
    std::shared_ptr<X> myX=std::make_shared<X>("Michael",40);
    myX->age++;
}
cout << "Time taken to generate " << rounds << " of Microsoft shared_ptr using make_shared   is " 
    << clock()-t << endl;

_getche();
return 0;
} 
```

我在发布模式下使用 vs2010 得到了以下结果。

生成 1000000 个 intrusive_ptr 所需的时间为 116 生成 1000000 个 shared_ptr 所需的时间为 175 生成 1000000 个 Microsoft shared_ptr 所需的时间为 182 使用 make_shared 生成 1000000 个 shared_ptr 所需的时间为 176 使用 make_shared 生成 1000000 个 Microsoft shared_ptr 所需的时间为120

似乎 intrusive_ptr 是最快的，但似乎 MS 使用 make_shared 函数对 shared_ptr 也做得很好。但是为什么 boost make_shared 的性能不如 MS 版本？有人做过类似的测试吗？我的测试有什么问题或者我没有考虑到什么？

# c# - Selenium webdriver 中的 MoveToElement 和 Click() 在 C# 中对我不起作用

> ID：14837831
> 
> 赞同：3
> 
> 时间：2013-02-12T17:04:00.573
> 
> 标签：c#, webdriver

我有一个切换按钮，只有在 MoseOver 上时才会激活/可见。我需要单击它并从下拉菜单中选择选项。这是代码和我尝试自动化波纹管：

```
<div class="project active">
<div class="header">
  <span class="badge badge-info">0 sites</span>
     <a class="description" data-original-title="auto test" rel="tooltip" href="#">
  <div class="modified">Modified: 2013-01-30 18:46:08Z</div>
  <div class="btn-group">
     <a class="btn btn-mini dropdown-toggle" href="#" data-target="#projectConfigMenu_62">
       <i class="icon-cog"></i>
       <span class="caret"></span>
     </a>
  <ul id="projectConfigMenu_62" class="dropdown-menu" style="top: 297.867px; left: 194px; display: none;">
</div> 
```

这是我试图解决它的方法，我可以看到按钮，但它不会点击它：

```
IWebElement active_element = driver.FindElement(By.XPath(".//div[@class='project active']"));            
IWebElement button = active_element.FindElement(By.XPath("//a[@class='btn btn-mini dropdown-toggle']"));             
IWebElement buttondrop = button.FindElement(By.XPath("//i[@class='icon-cog']"));
Actions builder = new Actions(driver);             
builder.MoveToElement(active_element).MoveToElement(buttondrop).Click().Build().Perform(); 
```

# ios - Core Data Nullify 规则何时更新关系？

> ID：14837832
> 
> 赞同：10
> 
> 时间：2013-02-12T17:04:12.743
> 
> 标签：ios, objective-c, cocoa-touch, core-data, null

## 我拥有和想要的：

我有一个一对多的关系 A <--->> B （对多部分是有序的）。

*   删除 A 时，与 A 有关系的所有 B 也应删除，因此 A 与 B 的关系的删除规则设置为级联**-> 工作正常**
*   删除 B 时，只应清除与 A 的关系，因此 B 与 A 的关系的删除规则设置为无效**-> 不起作用**（仅在延迟后）

## 问题描述：

[所以我遇到了与这个问题“核心数据无效规则不起作用？”](https://stackoverflow.com/questions/11673310/core-data-nullify-rule-doesnt-work)中所述完全相同的问题。：我删除了一个与 A 有关系的 B，然后立即计算剩余 B 的数量，与 A 有关系，它和以前一样。该问题中接受的答案是使用 cascade 而不是 nullify ，因为 nullify 的作用是：

> 当对象被删除时，Nullify 将指针设置为 null。如果你有一个指针数组，它不会删除它，它只是将它设置为 null。

我看到这个答案有两个问题：

1.  我很确定 cascade 在这种情况下是错误的规则，因为它在删除 B 时也会删除 A，这不是我想要实现的。（尽管如此，我还是尝试了它，结果是我所期望的：A 也被删除了）。
2.  集合不能将 null 作为其元素之一，除非使用 NSNull 单例。所以我怀疑这就是无效规则的作用。

经过一番实验后，我发现，如果我删除 B 的一个实例，它会立即被删除，但与 A 的关系不会立即清除，而是会在一点延迟后清除：

```
// Method is called by pressing a button
-(void)removeLastBOfA:(A *)instanceOfA
{
    // Prints 4
    NSLog(@"fetch all b's count before:%d", [context fetchAllBs].count);
    // Prints 4
    NSLog(@"A's relation to B count before: %d", instanceOfA.relationToB.count);

    [context deleteObject:[instanceOfA.relationToB lastObject]];

    // Prints 3
    NSLog(@"fetch all b's count after:%d", [context fetchAllBs].count);
    // Prints 4, but should be 3\. Last Object of A's relationToB is still the object that was deleted
    NSLog(@"A's relation to B count after: %d", instanceOfA.relationToB.count); 
```

}

现在，当按下按钮再次调用上面的方法而不做任何事情时，突然关系被更新并打印“A's relationship to B count before: **3 ”。**因此，无效删除规则确实可以按我的意愿工作，但会有一点延迟。

## 问题：

1.  我说的两个问题有效吗？
2.  为什么 nullify 只在延迟后更新关系，延迟是什么？或者在删除 NSManagedObject 后关系在什么时候更新？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T18:31:26.767

是的你是对的。答案是不正确的。关于第二点。方法 -deleteOdject 不会像您预期的那样删除对象，它只是将对象标记为已删除。要完成删除，您需要保存托管对象上下文，然后您将看到无效规则按预期工作。如果您此时不想保存上下文，可以采用两种方法：

1.  显式删除关系：

    ```
    NSManagedObject* objectToDelete = [instanceOfA.relationToB lastObject];
    [context deleteObject:objectToDelete];
    NSMutableSet* relationships = [instanceOfA mutableSetValueForKey:@"relationToB"];
    [relationships removeObject:objectToDelete]; 
    ```

2.  询问上下文以处理其未来的变化（这意味着计算由您的删除引起的变化）：

    ```
    [context processPendingChanges]; 
    ```

在您的示例中：

```
[context deleteObject:[instanceOfA.relationToB lastObject]];
[context processPendingChanges];
// Prints 3
NSLog(@"fetch all b's count after:%d", [context fetchAllBs].count);
NSLog(@"A's relation to B count after: %d", instanceOfA.relationToB.count); 
```

之后，您将看到预期的结果。

NSManagedObjectContext 会`-processPendingChanges`在运行循环结束或执行时自行执行`-save:`，这就是您看到一些延迟的原因。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:55:42.523

完成对 Core Data 对象的更改后，您应该在托管对象上下文中调用[save :。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/save%3a)我想保存操作将更新所有关系。

# entity-framework - 将实体框架与我的 POCO 类解耦

> ID：14837833
> 
> 赞同：0
> 
> 时间：2013-02-12T17:04:21.280
> 
> 标签：entity-framework, linq-expressions

我通过迭代从 EntityBase 继承的任何实体并将它们添加到我的 Context 来动态创建我的 DbContext：

```
 private void AddEntities(DbModelBuilder modelBuilder)
    {
        var entityMethod = typeof(DbModelBuilder).GetMethod("Entity");
        foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            var entityTypes = assembly.GetTypes()
                .Where(x => x.IsSubclassOf(typeof(EntityBase)) && !x.IsAbstract);
            foreach (var type in entityTypes)
            {
                dynamic entityConfiguration = entityMethod.MakeGenericMethod(type).Invoke(modelBuilder, new object[] { });
                EntityBase entity = (EntityBase)Activator.CreateInstance(type);

                //Add any specific mappings that this class has defined
                entity.OnModelCreating(entityConfiguration);
            }
        }
    } 
```

这样，我可以有许多命名空间，但在我的基本命名空间中只有一个通用存储库，它可以在任何地方使用。此外，在使用多个命名空间的应用程序中，基础存储库已经设置为使用所有加载的命名空间中的所有实体。我的问题是，我不想让 EntityFramework.dll 成为公司中每个命名空间的依赖项。所以我调用 OnModelCreating 并将 EntityTypeConfiguration 传递给该类，以便它可以添加任何映射。这很好用，下面是我如何添加一个映射来告诉模型我的“描述”属性来自一个名为“描述符”的列：

```
class Widget... {
    public override void OnModelCreating(dynamic entity)
    {
        System.Linq.Expressions.Expression<Func<Widget, string>> tmp = 
             x => x.Description;
        entity.Property(tmp).HasColumnName("Descriptor");
    } 
```

好消息是，我的实体类没有引用 EF，这个方法只调用一次，当上下文创建时，如果我们废弃 EF 并在将来去别的地方，我的类不会有各种属性特定于它们中的EF。

问题是，它超级难看。我如何让模型以比创建这些更简单的方式了解列映射和键`Expressions`以获取要映射的属性，而无需在我的 poco 类中对 EF 进行硬编码引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:34:33.213

您可以定义自己的属性并使用它们来控制`OnModelCreating()`. 您应该能够在一个 linq 查询和第二个查询中获得（使用反射）列映射所需的所有详细信息以创建键。

```
public class DatabaseNameAttribute : Attribute
{
    private readonly string _name;
    public DatabaseNameAttribute(string name)
    {
        _name = name;
    }
    public string Name
    {
        get
        {
            return _name;
        }
    }
}

public class KeySequenceAttribute : Attribute
{
    private readonly int _sequence;
    public KeySequenceAttribute(int sequence)
    {
        _sequence = sequence;
    }
    public int Sequence
    {
        get
        {
            return _sequence;
        }
    }
}

[DatabaseName("BlogEntry")]
public class Post
{
    [DatabaseName("BlogId")]
    [KeySequence(1)]
    public int id { get; set; }
    [DatabaseName("Description")]
    public string text { get; set; }
} 
```

# c# - 在 IEnumerable 上使用 Observable Collection 的优缺点

> ID：14837834
> 
> 赞同：5
> 
> 时间：2013-02-12T17:04:24.690
> 
> 标签：c#, wpf, collections, ienumerable, observablecollection

我正在尝试决定是否要将所有`IEnumerable`收藏都切换到 Observable Collections。我找不到一个很好的解释。用可理解的术语来说，Observable Collection 的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T17:09:55.843

您可能决定将`IEnumerable<Something>`某些属性用作类型，但将`ObservableCollection<Something>`其用作实际值。

如果你有这样的财产：

```
private IEnumerable<Something> collectionOfSomething;
public IEnumerable<Something> CollectionOfSomething
{
    get { return collectionOfSomething; }
    set
    {
        collectionOfSomething = value;
        NotifyPropertyChanged("CollectionOfSomething");
    }
} 
```

现在您可以简单地分配给该属性，例如

```
someViewModelObject.CollectionOfSomething = new ObservableCollection<Something>(); 
```

* * *

当您分配或绑定到集合属性（例如`ItemsControl.ItemsSource`）时，目标对象通常会检查实际属性值是否实现`INotifyCollectionChanged`（做什么`ObservableCollection`）并附加一个`CollectionChanged`处理程序以获取有关源集合更改的通知。

如果您以后决定使用其他一些更智能的实现，`INotifyCollectionChanged`则无需更改所有属性类型。只需用这样的东西替换作业

```
someViewModelObject.CollectionOfSomething = new MyVerySmartCollection<Something>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T17:09:34.350

我可能会这样回答您的问题：当您的收藏更改内容时，是否需要通知您的应用程序？如果是这样，那么这样的改变可能是有道理的。我的理解是 Observable 集合的首要特征是它们提供了一种在集合更改时通知的机制，而 IEnumerable 仅提供单迭代枚举器。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T17:10:45.873

使用 ObservableCollection 的最大好处是它自动实现了 INotifyCollectionChanged 和 INotifyPropertyChanged，这使得数据绑定更简单。我会说最好在第一次设置数据绑定时使用 ObservableCollection。

但是，既然您已经编写了（和数据绑定的？）一堆 IEnumerables，那么此时没有任何节省。

要考虑的另一件事`ObservableCollection<T>` *是* `IEnumerable`（继承自`Collection<T>`）。由于`IEnumerable`是一个接口，它由许多类实现`List<T>`是一个这样的类 -`ObservableCollection<T>`是另一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T17:10:44.563

Observable 集合的全部意义在于它们实现了以下接口

```
 INotifyCollectionChanged, INotifyPropertyChanged 
```

这使得提醒 UI/ViewModel 更改和相应更新变得非常容易。如果您没有使用 ObservableCollection，您将需要自己手动实现对集合/属性的更新。

# 3d - 从 Three.js 的后处理中排除对象/图层

> ID：14837835
> 
> 赞同：1
> 
> 时间：2013-02-12T17:04:30.170
> 
> 标签：3d, three.js, shader

从后处理中排除某些对象或（理想情况下）一层对象的最佳方法是什么？

例如，我想用各种后期处理效果（SSAO、倾斜移位等）渲染出一个复杂的背景场景，然后覆盖另一层 3D 对象而不对其进行后期处理效果。

我在想我可以有 2 个完全不同的 WebGL 渲染器（具有透明背景），但我希望 2 个图层相互集成，所以看起来未处理的图层对象是集成的/在顶部处理过的图层对象。

如果它有帮助，我不会对影响第二层的倾斜移位那么大惊小怪——我最感兴趣的是确保第二层没有应用 SSAO。

我希望这至少有一些意义。当我可能有一个我不知道的完美方法时，我想在我陷入太深的兔子洞之前在这里问一下。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:29:04.680

我假设您`THREE.EffectComposer`用于后处理。看一下[高级后处理示例](http://mrdoob.github.com/three.js/examples/webgl_postprocessing_advanced.html)，以及它如何使用`MaskPass`（利用模板缓冲区）`EffectComposer`将某些后处理（模糊）限制为背景。您还需要将背景对象和前景对象放在不同的场景中。

# java - Eclipse CoreException 位置

> ID：14837836
> 
> 赞同：2
> 
> 时间：2013-02-12T17:04:29.943
> 
> 标签：java, eclipse, jar

我正在尝试使用`ILaunchManager#getLaunchConfigurations`Eclipse`org.eclipse.debug.core`包中的方法，但编译器给了我消息：

`The method getLaunchConfigurations() from the type ILaunchManager refers to the missing type CoreException`

我可以看到`getLaunchConfigurations()`抛出`CoreException`异常，但我找不到包含`CoreException`该类的 jar！有谁知道我需要使用哪个 jar 来解决这个问题？

我正在使用的代码是：

```
ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();
for (ILaunchConfiguration launchConfiguration : launchManager.getLaunchConfigurations()) {
  String configName = launchConfiguration.getName();
} 
```

我在构建路径中包含了以下 jar：

```
 org.eclipse.debug.core_3.7.100.v20120521-2012
  org.eclipse.core.runtime_3.8.0.v20120521-2346 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T17:43:06.500

当您遇到此类问题时，一些有用的网站是：http: [//findjar.com](http://findjar.com)和[http://grepcode.com](http://grepcode.com)

以下页面有搜索结果：[http ://grepcode.com/search?query=org.eclipse.core.runtime.CoreException&n=](http://grepcode.com/search?query=org.eclipse.core.runtime.CoreException&n=)

你需要`org.eclipse.equinox.common.VERSION.jar`.

# image - 使用固定的 div 减小图像的大小

> ID：14837838
> 
> 赞同：0
> 
> 时间：2013-02-12T17:04:41.320
> 
> 标签：image, html, resize

我允许用户编辑他们的个人资料图标，以便用户可以将他们的图标调整到要显示的图像的哪个部分。

我有一个`<div>`宽度为 50px 和高度为 50px 的固定器；.这个尺寸将在用户编辑图标时使用。图像会更大，用户可以拖动并设置要显示的内容。在编码部分我采取了宽度，高度，顶部，左侧。顶部和左侧用于确定要显示的内容秀。希望你明白这一点。

当编辑的图标显示在顶部栏中时，我的问题就出现了。我将 div 的宽度设置为 30px X 30px。当将 50px 大小转换为 30px 时，我从获得的宽度中减去了 20px，以便它符合用户预期的 30px div 内。要显示图像的哪一部分的实际部分会导致问题，获得的顶部和左侧是对于 50px div，使用 top 和 left 对于 30px div，预期的部分不会显示，因为您可以猜到。

我想显示用户选择的部分。检查这个 jsfiddle：http: [//jsfiddle.net/4mDQf/](http://jsfiddle.net/4mDQf/)

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T13:21:38.697

我想出了一个解决方案：

将要显示的部分剪切为 50px，并使用 php 将剪切后的图像缩小到 30px。

# c++ - 无法从字符串类中读取字符串

> ID：14837839
> 
> 赞同：1
> 
> 时间：2013-02-12T17:04:41.680
> 
> 标签：c++, string

只是一个简短的问题，我会在路上。当我尝试使用字符串类读取字符串时，为什么会出现错误？我收到的错误是：“没有运算符“>>”匹配这些操作数/操作数类型是 std::istream >> std::string *”

我开始使用类而不是 cStrings。不幸的是，当我尝试使用 cin 读取字符串时，我不断收到错误消息。例如：

```
void ProcessEditMenuItems( int menu_choice, std::string fname[], std::string lname[], 
                    std::string phone[], std::string bday[]     /*char fname[][NAME_LENGTH], char lname[][NAME_LENGTH], char phone[][NAME_LENGTH], 
                       char bday[][NAME_LENGTH]*/ )
{
switch ( menu_choice )
{
    case 1:
        std::cout << "\nEnter new first name: ";
        std::cin >> fname;
    break;
    case 2:
        std::cout << "\nEnter new last name: ";
        std::cin >> lname;
    break;
    case 3:
        std::cout << "\nEnter new phone number: ";
        std::cin >> phone;
    break;
    case 4:
        std::cout << "\nEnter new birthday: ";
        std::cin >> bday;
    break;
}
} 
```

上面的代码适用于普通的 cStrings，但是当我将函数声明和定义更改为字符串类时，它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:07:17.510

您的参数`fname`, `lname`,`phone`和`bday`被声明为`std::string arg[]`参数转换为`std::string* arg`。也就是说，它们是指向`std::string`. `std::string arg[]`如果你想传递一个 s 数组，你只会有一个声明的参数`std::string`。

如果你`std::string`为每个参数传入一个，那么你真正想要的是一个引用类型。例如，`fname`应该是`std::string& fname`。引用允许`std::string`在不复制的情况下将 a 传递给函数，因此当您读入它时，`>>`您可以修改原始对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:07:44.490

您实际上是在传递字符串数组，但应该传递对字符串的非常量引用。

将您的函数原型更改为：

```
void ProcessEditMenuItems(
  int menu_choice,
  std::string& fname,
  std::string& lname,
  std::string& phone,
  std::string& bday
) 
```

它应该没问题。

从 C 字符串转换为 时`std::strings`，您可以使用以下转换表：

```
Old parameter | New parameter      | Description
const char*   | const std::string& | Non-modifiable parameter
char*         | std::string&       | Modifiable string 
```

最好的事情是你在改变它时不需要关心字符串的大小，而你必须使用`char*`. 如果需要增加大小，您也不必处理删除/重新分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:06:38.840

`fname`是一个数组`std::string`。数组的使用是您之前使用 C 字符串的后遗症`char fname[]`吗？`std::string&`如果是这样，您可以改为通过

```
void ProcessEditMenuItems(int menu_choice,
                          std::string& fname,
                          std::string& lname,
                          std::string& phone,
                          std::string& bday) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:29:16.393

此错误类似于`int arr[2]; arr = 1;`
fname 是包含字符串对象的数组。"std::cin >>" 表示从标准输入中提取字符串。我们只能将字符串对象分配给 fname[0], fname[1] ....改为
尝试；`std::cin >> fname[0]`

# python - 如何实现我自己的 describe() 函数以在 resample() 中使用

> ID：14837844
> 
> 赞同：5
> 
> 时间：2013-02-12T17:04:47.717
> 
> 标签：python, pandas

我正在处理表示向量（幅度和方向）的时间序列数据。我想[重新采样](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html?highlight=resample#pandas.DataFrame.resample)我的数据并将`describe`函数用作`how`参数。

但是，该`describe`方法使用标准平均值，我想使用特殊函数来平均方向。因此，我`describe`基于以下实现实现了自己的方法`pandas.Series.describe()`：

```
def directionAverage(x):
    result = np.arctan2(np.mean(np.sin(x)), np.mean(np.cos(x)))
    if result < 0:
        result += 2*np.pi
    return result

def directionDescribe(x):
    data = [directionAverage(x), x.std(), x.min(), x.quantile(0.25), x.median(), x.quantile(0.75), x.max()]
    names = ['mean', 'std', 'min', '25%', '50%', '75%', 'max']
    return Series(data, index=names) 
```

问题是当我这样做时：

```
df['direction'].resample('10Min', how=directionDescribe) 
```

我得到了这个异常（显示了最后几行）：

```
 File "C:\Python26\lib\site-packages\pandas\core\generic.py", line 234, in resample
    return sampler.resample(self)
  File "C:\Python26\lib\site-packages\pandas\tseries\resample.py", line 83, in resample
    rs = self._resample_timestamps(obj)
  File "C:\Python26\lib\site-packages\pandas\tseries\resample.py", line 217, in _resample_timestamps
    result = grouped.aggregate(self._agg_method)
  File "C:\Python26\lib\site-packages\pandas\core\groupby.py", line 1626, in aggregate
    result = self._aggregate_generic(arg, *args, **kwargs)
  File "C:\Python26\lib\site-packages\pandas\core\groupby.py", line 1681, in _aggregate_generic
    return self._aggregate_item_by_item(func, *args, **kwargs)
  File "C:\Python26\lib\site-packages\pandas\core\groupby.py", line 1706, in _aggregate_item_by_item
    result[item] = colg.aggregate(func, *args, **kwargs)
  File "C:\Python26\lib\site-packages\pandas\core\groupby.py", line 1357, in aggregate
    result = self._aggregate_named(func_or_funcs, *args, **kwargs)
  File "C:\Python26\lib\site-packages\pandas\core\groupby.py", line 1441, in _aggregate_named
    raise Exception('Must produce aggregated value') 
```

问题是：我如何实现我自己的`describe`功能，以便它可以使用`resample`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:33:00.613

您可以`groupby`将组作为时间单位，而不是重新采样。对于这个组，您可以应用您选择的函数，例如您的 directionAverage 函数。

请注意，我正在导入 TimeGrouper 函数以允许按时间间隔进行分组。

```
import pandas as pd
import numpy as np
from pandas.tseries.resample import TimeGrouper

#group  your data
new_data = df['direction'].groupby(TimeGrouper('10min'))
#apply your function to the grouped data
new_data.apply(directionDescribe) 
```

# android - 将 Sencha Touch 2.1 与 Java 相结合

> ID：14837846
> 
> 赞同：0
> 
> 时间：2013-02-12T17:04:58.297
> 
> 标签：android, extjs, sencha-touch-2.1

有没有办法将 Sencha Touch 2.1 解决方案与纯 Java 代码而不是仅使用 Javascript 结合起来？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:22:58.570

你可以：

*   在支持原生扩展的容器中使用 Sencha Touch，例如 PhoneGap，或者

*   使用`WebView`呈现您的 Sencha Touch UI 的滚动您自己的容器，您可以在其中通过`WebView`的`addJavaScriptInterface()`方法提供对本机 Java 对象的访问，因此您的 JavaScript 可以调用 Java 对象上的方法

# scala - 是否可以将字符串匹配器与 specs2 Json 匹配器结合使用？

> ID：14837866
> 
> 赞同：2
> 
> 时间：2013-02-12T17:05:53.773
> 
> 标签：scala, specs2

在 specs2 测试中，我正在使用 JSON 匹配器验证 json 字符串。我知道可以使用正则表达式来匹配这样的值

```
someJson must */("key")/("(one|other)".r) 
```

**是否有可能以一种简洁的方式使用其他字符串匹配器（例如包含）？**

鉴于这个混乱的例子：

```
val someJson = """{"blob": "multiline string
                  |with various line endings"}""" 
```

这个匹配器

```
someJson must */("blob")/contains("various") 
```

看起来比

```
someJson must */("blob")/"[^v]various.*".r 
```

这不是正确的表达方式，但在这种情况下可能会起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:48:46.013

现在可以（在 specs2-1.12.4-SNAPSHOT 和 specs2-1.13.1-SNAPSHOT 中）使用 specs2 匹配器以及简单的字符串和正则表达式来匹配值和键：

```
person must /("p.*".r) */(".*on".r) /("age" -> "33")
person must /("p.*".r) */(".*on".r) /("age" -> "\d+\.\d".r)
person must /("p.*".r) */(".*on".r) /("age" -> startWith("3"))
person must /("p.*".r) */(".*on".r) /("age" -> (be_>(30) ^^ ((_:String).toInt))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:58:38.480

看起来不像。该功能的标志是接受部分函数的方法，并且 JsonMatchers 上的所有方法都接受`Any`。

# java - FreeMarker 模板中的枚举错误

> ID：14837870
> 
> 赞同：1
> 
> 时间：2013-02-12T17:06:02.393
> 
> 标签：java, enums, freemarker

我有以下

```
public enum Gender {MALE, FEMALE} 
```

和

```
public class Person {
    private String name;
    private Gender gender;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
    public Gender getGender() {
        return gender;
    }

    public void setGender(Gender gender) {
        this.gender = gender;
    }
} 
```

在 FreeMarker 模板中`${person.name}`工作正常，但`${person.gender}`给出`Expression person.gender is undefined on ...`.

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:11:38.333

用户`person.gender.MALE`或`person.gender.FEMALE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:45:19.063

问题是当方法`getGender`返回 null 时。虽然错误信息不直观。

# linux - 修改后的linux操作系统的版本控制

> ID：14837882
> 
> 赞同：0
> 
> 时间：2013-02-12T17:06:52.917
> 
> 标签：linux, version-control, operating-system

我为特定平台/客户等...（和 windows）定制 Linux (RHEL) 操作系统版本。我们进行 kickstart 安装、自定义品牌、安装特定软件包、自定义分区等...

我需要有关更好地控制这些操作系统的方法的建议。目前，我们使用 SVN 来控制基本安装（即 RHEL 5.6、6.1 等）。我们不会将基本 RPMS 上传到 Subversion 服务器，因为它们会快速膨胀存储库，只有自定义元素。我们对每个版本都有 YUM 存储库。一个脚本在检查出基本操作系统版本后运行，然后从 YUM 存储库中获取所需的特定包版本。我一直找不到任何其他帖子/指南完全符合我的需要。

我们基本上必须对每个 OS 版本的包列表进行版本控制，并做一些愚蠢的事情来将包放入基本 OS 以创建最终的 OS 映像，然后通过 kickstart 安装（Windows 的不同进程）。

我觉得这很麻烦并导致潜在的错误。一定会有更好的办法！我已经查看了未修改组件的 Artifact Repository，但不确定这是否会对我有很大帮助。

PS：每个自定义版本的版本控制都至关重要，我什至不能说 RHEL 6.2 是 RHEL 6.2，我必须能够以某种方式证明自定义版本是正确的自定义版本（就像 SVN 那样）。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:51:49.327

你考虑过使用[纸浆](http://pulpproject.org)吗？您可以为要跟踪的每个“发布”创建一个存储库。

# jquery - Rails+PaperClip+jQuery-File-Upload 与嵌套模型

> ID：14837883
> 
> 赞同：2
> 
> 时间：2013-02-12T17:06:53.333
> 
> 标签：jquery, ruby-on-rails, paperclip

我正在使用带有回形针和 jQuery-File-Upload 的 rails 3，它们都是很棒的宝石，但它们似乎不能很好地配合使用，尤其是对于嵌套模型。

在我的应用程序中，我有两个模型：`submission`and `upload`， and ：

```
**###submssion.rb:**

attr_accessible :email, :uploads_attributes
  has_many :uploads, :dependent => :destroy
  accepts_nested_attributes_for :uploads, :allow_destroy => true

**###upload.rb:**
belongs_to :submission
has_attached_file :package
include Rails.application.routes.url_helpers

  def to_jq_upload
    {
      "name" => read_attribute(:package_file_name),
      "size" => read_attribute(:package_file_size),
      "url" => package.url(:original),
      "delete_url" => submission_path(self),
      "delete_type" => "DELETE"
    }
  end 
```

以我的形式：

```
<%= f.fields_for :uploads do |upload| %>
   <%= upload.file_field :package %>
<% end %> 
```

在我的控制器中：

```
def create
    @submission = Submission.new(params[:submission])
    respond_to do |format|
      if @submission.save
        format.html { render :json => [@submission.uploads.to_jq_upload].to_json, :content_type => 'text/html',:layout => false }
        format.json { render json: [@submission.uploads.to_jq_upload].to_json, status: :created, location: @upload }
      else
        format.html { render action: "new" }
        format.json { render json: @submission.errors, status: :unprocessable_entity}
      end
    end
  end 
```

但是，每次我上传文件时，控制台都会给我：

```
NoMethodError (undefined method `to_jq_upload' for #<ActiveRecord:.... 
```

我的问题是：如何在当前模型的控制器中访问另一个模型的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:53:38.420

这是一个解决方法：

由于`to_jq_upload`仅在模型中定义`upload`，因此您必须先指向`upload`模型才能使用它，就我而言，我正在查看最新上传的内容，因此：

修改`create`方法：

```
def create
  @submission = Submission.new(params[:submission])
  @upload = @submission.uploads.last
  respond_to do |format|
    if @submission.save
      format.html { render :json => [@upload.to_jq_upload].to_json, :content_type => 'text/html',:layout => false }
      format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
    else
      format.html { render action: "new" }
      format.json { render json: @submission.errors, status: :unprocessable_entity }
    end
end 
```

# magento - 设置谷歌分析magento

> ID：14837884
> 
> 赞同：0
> 
> 时间：2013-02-12T17:06:57.087
> 
> 标签：magento, google-analytics, installation

嗨我在管理员中添加了一个谷歌分析**帐号**，我是否还需要在文件中添加谷歌跟踪代码以进行跟踪，在谷歌中它仍然显示

> 在您网站的主页上未检测到 Google Analytic 跟踪代码

请告诉我如何将 Google 分析设置到我的网站。

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxxxxxx']);//fake
  _gaq.push(['_setDomainName', 'fake.com']);//fake
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我需要在文件中添加这种类型的代码吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:18:20.710

在管理员中设置帐户后，应自动输出 JS 代码。仍然没有的可能原因是：

1.  “Google Analytics”模块的输出被禁用。如果是这种情况，请检查“配置”=>“高级”。
2.  一些布局更新删除了“google_analytics”块。在您的 XML 布局更新中搜索包含“google_analytics”的行 - 可能有一个具有此名称的“删除”节点。
3.  模板文件“googleanalytics/ga.phtml”不可读或丢失
4.  在“Web”下设置“Cookie Restriction Mode”设置为“yes”也会阻止代码输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:18:47.000

如果您的机器上安装了 Firefox，则安装名为“Omnibug”的 Firebug 插件，您可以[在开发人员的网站上找到它。](http://www.rosssimpson.com/dev/omnibug.html)

当您在浏览您的网站时打开该选项卡时，您会看到许多向 Google 发出的请求。如果没有显示请求，则 Magento 未正确配置为输出 GATC（Google Analytics 跟踪代码）。

另外，查看[Magento 文档以设置 GATC](http://go.magento.com/support/kb/entry/name/setting-up-google-analytics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:58:56.307

很多时候，GA 最多需要 24 小时才能显示数据并更新跟踪代码状态。你能等一段时间看看点击是否开始出现吗？

检查这一点的一种快速方法是尝试实时报告并查看它是否显示任何数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T22:55:49.893

我花了几天时间试图解决这个问题，并尝试了许多不同的解决方案。显然有很多事情可以阻止 Google Analytics 在 Magento 上工作。奥列格的建议非常好，相当全面，涵盖了我找到的大部分答案。不过，它确实错过了其中一种解释。

显然，在 1.3 和 1.4 版本之间，Magento 改变了它处理 Google Analytics 的方式。如果您的自定义模板中有以下任何内容的副本：

```
1column.phtml
2columns-left.phtml
2columns-right.phtml
3columns.phtml 
```

然后，您需要在自定义模板中存在的上述任何文件中添加`<?php echo $this->getChildHtml('after_body_start') ?>`正确的内容。`<div class="wrapper">`文件的位置将在这样的目录中：app/design/frontend/CustomGroup/Custom/template/page/

此外，您可能需要在 app/design/frontend/CustomGroup/Custom/layout 文件夹中的 page.xml 文件中添加两个条目：

```
<block type="core/text_list" name="after_body_start" as="after_body_start" translate="label">
     <label>Page Top</label>
</block>

<block type="page/html_notices" name="global_notices" as="global_notices" template="page/html/notices.phtml" /> 
```

这两个条目应放在“标题”块的正上方。

这个解决方案的功劳归功于那些在这个线程中回复的人以及 Magento 论坛上的两个海报。如果您查看 Ross 和 ceefour 的帖子，您会看到我在此处复制的解决方案。这是一个链接： http: [//www.magentocommerce.com/boards/viewthread/23325/P45/#t240114](http://www.magentocommerce.com/boards/viewthread/23325/P45/#t240114)

另外，我想指出，如果您在页面源中搜索“GoogleAnalytics”一词，您可能会发现是否在使用 Google Analytics。就我而言，直到我按照上述步骤操作后它才出现。如上所述，Omnibug 也运行良好，可能是更确定的测试。

# gcc - 链接目标文件 GCC/G++

> ID：14837885
> 
> 赞同：1
> 
> 时间：2013-02-12T17:07:00.227
> 
> 标签：gcc, linker, g++

我有我的主要 C++ 类`main.cpp`...

```
#include "fs.h"

int main(void)
{
    return minit();
} 
```

`fs.h`：_

```
#ifndef __FS__
#define __FS__
int minit (void);
#endif 
```

和一个`fs.o`（使用 minit() 进入）文件，它已经是一个目标文件，编译时`g++`不使用 -g。

这是我的生成文件：

```
myfs:   main.o fs.o
    g++ -o myfs   -m32 -Wall fs.o main.o
main.o: main.cpp fs.h
    g++ -o  main.o -m32 main.cpp 
```

每次我尝试链接所有内容时，链接器都会说存在对它可能是什么`main.cpp`的未定义引用？`minit();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:38:18.697

您应该将它指向编译器，该函数是在其他地方定义的。尝试更改此声明：

```
int minit (void); 
```

对此

```
extern int minit (void); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:09:59.880

您在实际实现中定义了一个名为 minit() 的函数 - 这就是您遇到此问题的原因。

您需要实际编写函数 minit()：

int minit(void) { 返回 0; }

例如...

# java - 从 HTTP POST 计算 HMAC，而不将整个请求正文复制到内存中

> ID：14837886
> 
> 赞同：2
> 
> 时间：2013-02-12T17:07:01.707
> 
> 标签：java, cryptography, inputstream, hmac

在我的应用程序中，我想计算HTTP POST 请求正文的[HMAC 。](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)所以这个输入现在需要处理两个操作：请求解析和HMAC计算。

如何在不将整个请求复制到缓冲区（字符串、ByteArrayInputStream 等）的情况下实现这一点？

我很乐意解析入站请求正文，即使我稍后会因为 HMAC 标头无效而拒绝该请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:07:01.707

通过包装 inbound `InputStream`，可以在解析器处理字节时观察它们。然后，最后，可以计算和比较 HMAC。

这是我今天整理的一个实现：

```
package com.drewnoakes.crypto;

import com.drewnoakes.util;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import java.io.IOException;
import java.io.InputStream;
import java.security.InvalidKeyException;
import java.security.Key;
import java.security.NoSuchAlgorithmException;

/**
 * An implementation of {@link InputStream} that builds a MAC by observing bytes as they pass through another stream.
 * <p/>
 * This implementation does not support mark/reset or seek, as all bytes of the request must be processed in order.
 * 
 * @author Drew Noakes http://drewnoakes.com
 */
public class HMACValidationStream extends InputStream
{
    private static final String HASH_ALGORITHM = "HmacSHA256";

    private final InputStream _inputStream;
    private final Mac _mac;

    public HMACValidationStream(@NotNull InputStream inputStream, @NotNull byte[] hmacSecret) throws NoSuchAlgorithmException, InvalidKeyException
    {
        _inputStream = inputStream;

        Key secretKeySpec = new SecretKeySpec(hmacSecret, HASH_ALGORITHM);

        _mac = Mac.getInstance(secretKeySpec.getAlgorithm());
        _mac.init(secretKeySpec);
    }

    /**
     * Calculates whether the built-up HMAC matches the provided one (commonly from an HTTP request header.)
     */
    public boolean matches(@NotNull String providedHMAC)
    {
        byte[] hmac = _mac.doFinal();

        String expectedHMAC = Convert.bytesToHex(hmac);
        return expectedHMAC.equals(providedHMAC);
    }

    //////////////////////////////////////////

    @Override
    public int read() throws IOException
    {
        int i = _inputStream.read();
        if (i != -1)
            _mac.update((byte)i);
        return i;
    }

    @Override
    public int read(byte[] b) throws IOException
    {
        int i = _inputStream.read(b);
        if (i != -1)
            _mac.update(b, 0, i);
        return i;
    }

    @Override
    public int read(byte[] b, int off, int len) throws IOException
    {
        int i = _inputStream.read(b, off, len);
        if (i != -1)
            _mac.update(b, off, i);
        return i;
    }

    @Override
    public long skip(long n) throws IOException
    {
        throw new IOException("Not supported");
    }

    @Override
    public int available() throws IOException
    {
        return _inputStream.available();
    }

    @Override
    public void close() throws IOException
    {
        _inputStream.close();
    }

    @Override
    public void mark(int readlimit)
    {}

    @Override
    public void reset() throws IOException
    {
        throw new IOException("Not supported");
    }

    @Override
    public boolean markSupported()
    {
        return false;
    }
} 
```

和`Convert`班级：

```
package com.drewnoakes.util;

/**
 * Common, generic value conversions.
 *
 * @author Drew Noakes http://drewnoakes.com
 */
public class Convert
{
    private static final char[] _hexArray = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'};

    @NotNull
    public static String bytesToHex(@NotNull byte[] bytes)
    {
        char[] output = new char[bytes.length * 2];
        for (int i = 0, o = 0; i < bytes.length; i++) {
            byte v = bytes[i];
            output[o++] = _hexArray[(v >>> 4) & 0x0F];
            output[o++] = _hexArray[v & 0x0F];
        }
        return new String(output);
    }

    @NotNull
    public static byte[] hexToBytes(@NotNull String hex)
    {
        return hexToBytes(hex.toCharArray());
    }

    @NotNull
    public static byte[] hexToBytes(@NotNull char[] hex)
    {
        if (hex.length % 2 != 0)
            throw new IllegalArgumentException("Must pass an even number of characters.");

        int length = hex.length >> 1;
        byte[] raw = new byte[length];
        for (int o = 0, i = 0; o < length; o++) {
            raw[o] = (byte) ((getHexCharValue(hex[i++]) << 4)
                            | getHexCharValue(hex[i++]));
        }
        return raw;
    }

    public static byte getHexCharValue(char c)
    {
        if (c >= '0' && c <= '9')
            return (byte) (c - '0');
        if (c >= 'A' && c <= 'F')
            return (byte) (10 + c - 'A');
        if (c >= 'a' && c <= 'f')
            return (byte) (10 + c - 'a');
        throw new IllegalArgumentException("Invalid hex character");
    }
} 
```

# jquery - IE8 及更低版本的 jQuery 兼容性问题

> ID：14837888
> 
> 赞同：3
> 
> 时间：2013-02-12T17:07:04.923
> 
> 标签：jquery, html, css, internet-explorer

在为朋友开发此站点时，我遇到了在 IE 8 和更早版本中呈现 jQuery 的严重问题。我对 Web 开发人员场景还是很陌生，对正在发生的事情完全不知所措。可在[cat5andmouse.com/phillipeldermusic找到该网站的副本](http://cat5andmouse.com/phillipeldermusic)

音频播放器是免费提供的修改版本，内容的列切换是手动编码的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:14:01.040

你有js错误 `$.browser.msie' is null or not an object`

jQuery 1.9 不支持`$.browser`，因此播放器 ie 检测可能不起作用！！！

试试 jQuery 的旧版本，比如 1.7 及更低版本，看看会发生什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:28:05.853

jQuery 1.9+ 不支持 jQuery.browser，但是，您可以使用 jQuery 的~~浏览器实现： [https ://github.com/jquery/jquery-browser](https://github.com/jquery/jquery-browser)~~迁移插件[http://github.com/jquery/jquery-migrate/](http://github.com/jquery/jquery-migrate/)

顺便说一句：杀死默认浏览器行为绝不是一个好主意；-) 在您的情况下是历史支持。

# c++ - opencv 抓取保存结果

> ID：14837892
> 
> 赞同：0
> 
> 时间：2013-02-12T17:07:14.627
> 
> 标签：c++, opencv, io, saving-data

在 opencv 示例中的标准抓取程序中，我添加了几行代码将结果保存到文件中。但是，文件中没有任何内容。只是黑色纯色。这是我输入的代码——

在主函数中

```
case 's':
    gcapp.writeToFile(writefilename);
    break; 
```

在 GCApplication 类中

```
void writeToFile(string filename)
{
    imwrite(filename, mask);
    cout << "file written" << endl;
} 
```

我假设您知道grabcut 程序并且您有查看它的代码。如果我需要发布更多信息，请告诉我...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:45:11.337

**你保存错了`cv::Mat`。**显示在末尾的`showImage()`是`res`，它是一个局部变量。你应该把它变成一个类变量，然后方法`writeToFile()`应该执行：

```
imwrite(filename, res); 
```

# linux - 为什么 bash 不会因短路命令序列中的错误而停止？

> ID：14837894
> 
> 赞同：6
> 
> 时间：2013-02-12T17:07:21.127
> 
> 标签：linux, bash, shell, short-circuiting

当我使用选项运行 bash 脚本时，我看到一些对我没有意义的行为，该`-e`选项具有多个与`&&`s 串在一起的命令并且其中一个失败。我希望脚本在失败的命令上停止并返回退出状态，但它只是愉快地执行脚本的其余部分。

以下是对我有意义的示例：

```
$ false && true; echo $?
1

$ bash -xe -c "false && true"; echo $?
+ false
1

$ bash -xe -c "false; true"; echo $?
+ false
1 
```

这对我来说没有意义：

```
$ bash -xe -c "false && true; true"; echo $?
+ false
+ true
0 
```

这是我不明白发生了什么的地方。`false && true`返回状态 1，所以脚本不应该停止执行并返回状态 1，就像脚本是时一样`false; true`？

在试验过程中，我发现如果我用括号括住命令链，它的工作方式与我期望的一样：

```
$ bash -xe -c "(false && true); true"; echo $?
+ false
1 
```

任何人都可以对此做出解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T17:12:40.047

这里的逻辑是您使用`&&`已经*是*错误检查。同样，bash 不会将`if`条件内的失败视为值得中止，即使使用`set -e`.

当您将命令包装在括号中时，您实际上是在子 shell 中运行这些命令，因此脚本本身只看到该子 shell 的返回，即：它根本不知道`&&`所涉及的内容，因此它会按预期中止.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T17:39:56.380

Quoth参考手册：

> 如果失败的命令是紧跟在 while 或 until 关键字之后的命令列表的一部分、if 语句中的测试的一部分、在 && 或 || 中执行的任何命令的一部分，则 shell 不会退出 列出除了最后一个 && 或 || 之后的命令，管道中除最后一个之外的任何命令，或者如果命令的返回状态正在与 !

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-23T11:46:58.923

**为了避免在评估错误**条件时退出 bash 脚本（具有`set -e`），使用 If-else 语句比[短路](https://en.wikipedia.org/wiki/Short-circuit_evaluation)更安全。

 **但是，如果您更喜欢较短的语法（就像我一样;-)，请替换：

> [[ 条件 ]] && 命令

和：

> [[！条件]] || 命令

为了显示：

```
$ false && do_whatever ; echo rc=$?
rc=1 # i.e. Will exit bash at this point

$ ! false || do_whatever ; echo rc=$?
rc=0 # i.e. Bash will continue... 
```**

# c++ - 像素着色器中的精灵调色板交换

> ID：14837896
> 
> 赞同：2
> 
> 时间：2013-02-12T17:07:28.157
> 
> 标签：c++, directx-11, fragment-shader

我正在制作基于精灵的格斗游戏，并且开发已经到了一定程度，我想在运行时实现图像的颜色交换（因此用户可以通过界面指定，应该将确切的颜色更改为什么，它会在瞬间完成，不会被加载屏幕中断）。我认为它在像素着色器中很容易实现。我试过了，通过设置值来专门改变另一种颜色，效果很好。对于下一步，我想让它从文本文件中读出数据（包含要更改的颜色的颜色代码，然后是要更改的颜色）。它有几个条目，它存储在一个数组中，如下所示：

```
XMFLOAT3 palette[10][2]; 
```

这是着色器中相应的常量条目：

```
float4 xPalette[10][2]; 
```

这意味着，它存储了 10 种颜色来改变和 10 种颜色来改变它们。我通过一个常量缓冲区将它传递给像素着色器，但它没有按计划工作，因为只有数组的最后一个条目被识别，其他所有条目都是零。我认为这是因为在将数据发送到 GPU 之前进行了 16 位对齐？还有什么其他方法可以将这样的数据发送到像素着色器？感谢您阅读本文！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:11:35.067

您可以将交换作为纹理本身发送，也许第一行纹素是您要替换的纹素，而 [x][y+1] 作为您要将其更改为的颜色。（由于纹理坐标的范围从 0 到 1，您可能必须将要替换的颜色数作为整数传递，然后您可以使用 (1/replaceCount*i) 进行索引。GLSL 允许您使用 sampler2D 的 I 传递纹理想想。我想它与 HLSL 相似（虽然我写 HLSL 已经几个月了。:()

然后，您可以在着色器期间对顶行中的每个纹素进行采样/比较。

# android - 在 XML 中失去焦点时隐藏布局

> ID：14837898
> 
> 赞同：5
> 
> 时间：2013-02-12T17:07:36.807
> 
> 标签：musicLayout, onclick, android, layout, tabs, lost-focus

我有以下 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/FrameLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
</android.support.v4.view.ViewPager>

<LinearLayout
    android:id="@+id/musicLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="10dp"
    android:focusable="true"
    android:visibility="visible" >

    <ImageView
        android:id="@+id/backward"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/backward" />

    <ImageView
        android:id="@+id/stop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="8dp"
        android:src="@drawable/stop" />

    <ImageView
        android:id="@+id/pausePlay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="8dp"
        android:src="@drawable/play" />

    <ImageView
        android:id="@+id/forward"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="8dp"
        android:paddingRight="10dp"
        android:src="@drawable/forward" />

</LinearLayout> 
```

framelayout 用于带有选项卡的操作栏，这些选项卡是上述布局中的 viewpager。操作栏完美运行。我要解决的问题是最后一个linearlayout，实际上是一个悬浮在屏幕底部的媒体播放器，当我在linearlayout之外按下时需要隐藏！我已经测试了[musicLayout](/questions/tagged/onfocuschangelistener "显示标记为“onfocuschangelistener”的问题")中的 onfocuschangelistener 和pageviewer 中的[onclick](/questions/tagged/onclick "显示标记为“onclick”的问题")，但没有任何反应！我究竟做错了什么？
编辑：
如果有帮助，每个选项卡都是一个片段，它有自己的布局，被添加到 viewPager。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T03:52:42.687

我认为解决这个问题的最简单方法是添加一个与 ViewGroup 的父级匹配的透明视图。基本上，您将拥有同一级别的 ViewPager、LinearLayout 和 View。然后，您可以在透明视图上注册一个 onClickListener，这应该可以解决问题。

布局应该像这样简单：

```
<View android:id="@+id/transparent_view"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:clickable="true"/> 
```

# oracle - SQL 触发器错误绑定错误

> ID：14837899
> 
> 赞同：0
> 
> 时间：2013-02-12T17:07:36.987
> 
> 标签：oracle, plsql, triggers

我正在尝试创建一个触发器，如果`Prog_Type`​​ =将触发`'EPISODE'`。我收到错误的绑定错误 - PLS - 000049。我认为我的`DECLARE`状态有问题

```
CREATE OR REPLACE TRIGGER Seas_Pk_Trigger
BEFORE INSERT OR UPDATE OF Seas_ID ON Season_Table
FOR EACH ROW
DECLARE 
Prog_Type VARCHAR2(7);
BEGIN
IF (:OLD.Prog_Type <> 'EPISODE')
THEN SELECT Seas_ID_Seq.nextval into :new.Seas_ID from dual;
END IF;
END Seas_Pk_Trigger;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:50:01.517

如果要引用表中的列，则无需声明该列以使用伪记录或伪记录`Prog_Type`来引用它。如果在你的表中（我假设它是），那么只需省略声明：`:OLD``:NEW``Prog_Type`

```
CREATE OR REPLACE TRIGGER Seas_Pk_Trigger
BEFORE INSERT OR UPDATE OF Seas_ID ON Season_Table
FOR EACH ROW
BEGIN
IF (:OLD.Prog_Type <> 'EPISODE')
THEN SELECT Seas_ID_Seq.nextval into :new.Seas_ID from dual;
END IF;
END Seas_Pk_Trigger;
/ 
```

我不确定如何解释您的声明，即您只希望在`Prog_Type = 'EPISODE'`触发器具有`<>`to EPISODE 子句时触发它？

# knockout.js - ObservableArray 中的订阅处理程序无法访问父/根

> ID：14837901
> 
> 赞同：2
> 
> 时间：2013-02-12T17:07:54.973
> 
> 标签：knockout.js

我有一个 ko.observableArray 并且我为可观察数组中的项目添加了一个订阅者： `eventDate.subscribe(function(newDate) { ... }`

在该处理程序中，我无权访问我的视图模型的父级或根。

当我访问`this`时，我得到一个引用`window`。我想做的是访问包含可观察数组的范围。（我`=>`在coffeescript中尝试了正常和粗箭头的范围）。

我的理由是，我有不想在每个项目的可观察数组中复制/引用的数据。我主要有骨干经验，所以也许这不是“knockout.js”方式。

我的目标是`ko.applyBindings new MainModel()`在`window`.

我创建了一个 jsfiddle 来演示：http: [//jsfiddle.net/brianzinn/r4bd8/](http://jsfiddle.net/brianzinn/r4bd8/)

谢谢。有人知道解决方案吗？

# 编辑

在构造函数中传递视图模型可以访问父级，这是一个好习惯吗？ [http://jsfiddle.net/brianzinn/r4bd8/7/](http://jsfiddle.net/brianzinn/r4bd8/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:36:29.497

> 在构造函数中传递视图模型可以访问父级，这是一个好习惯吗？

只需在构造函数中传递`allSports`数组。`Row`另外，正如我所见，您不会更改运动列表，因此最好`allSports`使用常数而不是`ko.observableArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:37:37.210

你应该做的是通过`Row`构造函数传递父级。然后，您将可以轻松访问 Row 的父级。

它看起来像：

```
class Row
    constructor: (parent) ->
    ... 
```

然后您可以`parent`从`Row`.

构造 Row 也会略有变化：

```
@rows = ko.observableArray [new Row(this)] 
```

# r - 如何编写调用调用data.table的函数的函数？

> ID：14837902
> 
> 赞同：19
> 
> 时间：2013-02-12T17:08:00.057
> 
> 标签：r, data.table

该包`data.table`有一些特殊的语法，需要使用表达式作为`i`and`j`参数。

这对于如何编写接受参数并将参数传递给数据表的函数有一些影响，正如[常见问题解答的第 1.16 节中](http://datatable.r-forge.r-project.org/datatable-faq.pdf)所解释的那样。

但我不知道如何提高这一水平。

这是一个例子。假设我想编写一个包装器函数`foo()`来对我的数据进行特定的汇总，然后再编写一个包装器`plotfoo()`来调用`foo()`并绘制结果：

```
library(data.table)

foo <- function(data, by){
  by <- substitute(by)
  data[, .N, by=list(eval(by))]
}

DT <- data.table(mtcars)
foo(DT, gear) 
```

好的，这行得通，因为我得到了表格结果：

```
 by  N
1:  4 12
2:  3 15
3:  5  5 
```

* * *

现在，我在写作时尝试相同，`plotfoo()`但我失败了：

```
plotfoo <- function(data, by){
  by <- substitute(by)
  foo(data, eval(by))
}
plotfoo(DT, gear) 
```

但是这次我收到一条错误消息：

```
Error: evaluation nested too deeply: infinite recursion / options(expressions=)? 
```

* * *

好的，所以`eval()`导致问题。让我们删除它：

```
plotfoo <- function(data, by){
  by <- substitute(by)
  foo(data, by)
}
plotfoo(DT, gear) 
```

哦，不，我收到一条新的错误消息：

```
Error in `[.data.table`(data, , .N, by = list(eval(by))) : 
  column or expression 1 of 'by' or 'keyby' is type symbol. Do not quote column names. Useage: DT[,sum(colC),by=list(colA,month(colB))] 
```

* * *

这就是我仍然卡住的地方。

**问题：如何编写一个调用data.table的函数的函数？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T18:00:15.070

这将起作用：

```
plotfoo <- function(data, by) {
  by <- substitute(by)
  do.call(foo, list(quote(data), by))
}

plotfoo(DT, gear)
#    by  N
# 1:  4 12
# 2:  3 15
# 3:  5  5 
```

**解释：**

问题是您对`foo()`in的调用`plotfoo()`类似于以下内容之一：

```
foo(data, eval(by))
foo(data, by) 
```

当`foo`处理这些调用时，它会尽职地`substitute`为**第二个形式参数**( `by`) 获取符号或`by`的**值**。但是你希望' 值是，如在电话中。`eval(by)``by``by``gear``foo(data, gear)`

`do.call()`通过在构造它然后评估的调用之前评估其第二个参数的元素来解决这个问题。结果，当您传递它时，它会在构造看起来（基本上）如下所示的调用之前`by`将其评估为它的值（符号）：`gear`

```
foo(data, gear) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T17:44:39.287

我想你可能把自己绑在了结上。这有效：

```
library(data.table)
foo <- function(data, by){
  by <- by
  data[, .N, by=by]
}

DT <- data.table(mtcars)
foo(DT, 'gear')

plotfoo <- function(data, by){
  foo(data, by)
}
plotfoo(DT, 'gear') 
```

该方法支持传入字符值：

```
> gg <- 'gear'
> plotfoo <- function(data, by){
+   foo(data, by)
+ }
> plotfoo(DT, gg)
   gear  N
1:    4 12
2:    3 15
3:    5  5 
```

# mercurial - mercurial diff + unxutil“补丁”

> ID：14837907
> 
> 赞同：1
> 
> 时间：2013-02-12T17:08:15.657
> 
> 标签：mercurial, diff, patch

如何使 mercurial “diff”命令产生与 unix 或 unxutil`patch`命令兼容的输出？

我需要创建一个可以发送给没有安装 Mercurial 的同事的补丁文件。

* * *

我已经尝试使用，但在应用它时`hg diff -r 3:5 > patch1.diff`我从命令中得到一个错误。`patch`（稍等，我会尽快发布错误消息......）

* * *

好的，这是我上传到 bitbucket 的一个测试用例：

```
hg clone https://bitbucket.org/jason_s/test-patch-apply P2base
hg update -r 2 -R P2base
hg diff -r 2:4 -R P2base > p2base.patch
rm -r P2base/.hg
cd P2base
patch < ../p2base.patch 
```

我在我的 Windows PC 上得到了这个：

C:\tmp\hg\P2base>补丁 < ../p2base.patch

```
patching file bar.txt
Assertion failed: hunk, file ../patch-2.5.9-src/patch.c, line 354

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:41:08.840

没关系，这是一个可以克服的记录问题（带有非常糟糕的错误消息）。从[http://gnuwin32.sourceforge.net/packages/patch.htm](http://gnuwin32.sourceforge.net/packages/patch.htm)：

> 在 MS-Windows 上，补丁文件必须是文本文件，即 CR-LF 必须用作行尾。带有 LF 的文件可能会给出错误：“断言失败，大块，文件 patch.c，第 343 行”，除非给出选项“--binary”。

我用过`--binary`，效果很好。

# asp.net-mvc-4 - AjaxMin 任务已被错误声明或使用，或在构建过程中失败

> ID：14837911
> 
> 赞同：0
> 
> 时间：2013-02-12T17:08:32.363
> 
> 标签：asp.net-mvc-4, visual-studio-2012, microsoft-ajax-minifier

我正在尝试将 Microsoft 的 AjaxMin 添加到 VS2012 项目中，但我不确定自己在做什么。我想我错过了一些明显的东西。

我从这里的教程中复制了代码（[http://ajaxmin.codeplex.com/wikipage?title=AjaxMinTask](http://ajaxmin.codeplex.com/wikipage?title=AjaxMinTask)）

我已经尝试添加对我的项目的引用，所以我的代码如下所示：

```
<UsingTask TaskName="AjaxMin" AssemblyFile="$(MSBuildProjectDirectory)\Build\AjaxMinTask.dll" />
<Target Name="AfterBuild" >
<ItemGroup>
  <JS Include="**\*.js" Exclude="**\*.min.js;Scripts\*.js" />
</ItemGroup>
<ItemGroup>
  <CSS Include="**\*.css" Exclude="**\*.min.css" />
</ItemGroup>
<AjaxMin JsSourceFiles="@(JS)" JsSourceExtensionPattern="\.js$" JsTargetExtension=".min.js" CssSourceFiles="@(CSS)" CssSourceExtensionPattern="\.css$" CssTargetExtension=".min.css" />
</Target> 
```

这是在我的 .csproj 文件的底部，其中已经有一个注释掉的 AfterBuild 部分。我收到错误消息说 JS、CSS、AjaxMin 是无效的子元素。当我尝试构建项目时出现错误，我不确定我缺少什么。我在项目中创建了一个名为 Build 的文件夹并添加了 AjaxMinTask.dll。我不知道是否需要做任何其他事情来确保正确引用它。

我也尝试过使用 Import 节点而不是 UsingTask `<Import Project="$(MSBuildExtensionsPath)\Microsoft\MicrosoftAjax\AjaxMin.tasks" />` 我认为 AjaxMin 安装正确，因为我可以从命令行运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:30:35.760

在您的 .csproj 中，文档的结尾（我已包含最后一个结束元素）应如下所示：

```
 <Import Project="$(MSBuildExtensionsPath32)\Microsoft\MicrosoftAjax\AjaxMin.tasks" />
  <Target Name="AfterBuild" AfterTargets="CopyAllFilesToSingleFolderForPackage" Condition="'$(Configuration)'=='Release'">
    <ItemGroup>
      <JS Include="scripts\*.js" Exclude="scripts\*.min.js;" />
    </ItemGroup>
    <ItemGroup>
      <CSS Include="css\main.css" />
    </ItemGroup>
    <AjaxMin Switches="-global:jQuery,$" JsSourceFiles="@(JS)" JsCombinedFileName="scripts\combined.min.js" CssSourceFiles="@(CSS)" CssSourceExtensionPattern="\.css$" CssTargetExtension=".min.css" />
  </Target>
</Project> 
```

由于我使用的是 Windows 7 64 位，您将看到 Import... 的路径包括 (MSBuildExtensionsPath32)。如果您使用的是 Windows 32 位，那么最后不需要 32。除此之外，您的代码应该可以工作。

忽略 JS、CSS、AjaxMin 子元素错误。但是你不应该得到一个内置的错误。如果您可以发布构建的错误，那将很有用。

另外，上面的代码结合了多个 JS 文件，只是为了好玩而添加的。

# r - Windows 上 R 中的 gwidgets

> ID：14837914
> 
> 赞同：1
> 
> 时间：2013-02-12T17:08:36.080
> 
> 标签：r, plot, gwidgets

在开发用于绘制数据和模型结果的 gWidgets 界面时，我创建了一个绘图页面`par(mfrow=c(4,1))`并将 4 个绘图堆叠起来。

第一个图（顶部的简单 y 与 x）工作正常，但循环中剩余的 3 个图创建轴但不绘制数据。为了测试代码，我尝试在循环遍历绘图之前打开一个新的绘图窗口，并且一切正常。

有什么`gwdigets`与之交互的东西`plot(...)`有用吗？

*编辑* 一个可重现的例子：

不起作用：

```
library(gWidgets)
options(guiToolkit="RGtk2") ## "Qt"
w <- gwindow("brush example", visible=FALSE)
g <- ggroup(container=w)
gg <- ggraphics(container=g)

addHandlerChanged(gg, handler=function(h,...) {
  par(mfrow=c(2,2))
  plot(mpg ~ wt, mtcars)
  plot(mpg ~ wt, mtcars,col='blue')
  plot(mpg ~ wt, mtcars,col='red')
  plot(mpg ~ wt, mtcars,col='green')
})
visible(w) <- TRUE 
```

应该看起来像这样（正常的 R 图形窗口：

![在此处输入图像描述](../Images/3b21d44c8a74cd514c43c048be359efb.png)

不像这样

![在此处输入图像描述](../Images/03cbb8edfc23a816c6f36bee131383fe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:36:23.250

有两个问题。一个可能与 windows 上的 cairo 实现有关。这可以通过完全避免 gWidgets 来测试：

```
make_plot <- function() {
  par(mfrow=c(2,2))
  plot(mpg ~ wt, mtcars)
  plot(mpg ~ wt, mtcars,col='blue')
  plot(mpg ~ wt, mtcars,col='red')
  plot(mpg ~ wt, mtcars,col='green')
}

require(RGtk2)
require(cairoDevice)

w <- gtkWindow(show=FALSE)
da <- gtkDrawingArea()
w$add(da)
w$show(TRUE)

asCairoDevice(da)

make_plot() 
```

另一个问题是将图形绘制调用放在处理程序中。对于 ggraphics，在完成橡皮筋之后调用更改处理程序，而不是在图形本身更改时调用。不确定这是最有用的东西，但它意味着在通过橡皮筋进行选择后调用一些处理程序。addHandlerClicked 可能更有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:27:23.450

由于某些原因，情节无法刷新。您可以使用多个 ggraphics 实例，也可以使用`ggraphicsnotebook`.

这是一个使用许多实例的解决方案`ggraphics`。

```
library(gWidgets)
options(guiToolkit="RGtk2") ## "Qt"
w <- gwindow("brush example", visible=FALSE)
gg <- ggroup(container=w,horizontal=F,use.scrollwindow = T)
down.group <- ggroup(container = gg)
up.group <- ggroup(container = gg)

devs.up <- lapply(1:2, function(i) 
                 ggraphics(container=down.group,label=as.character(i)))
devs.down <- lapply(3:4, function(i) 
                 ggraphics(container=up.group,label=as.character(i)))
visible(w) <- TRUE
lapply(c(devs.up,devs.down), function(gg)
addHandlerChanged(gg, handler=function(h,...) {
  par(mfrow=c(1,1))
  plot(mpg ~ wt, mtcars)
})) 
```

# jquery - 如何使 jQuery Datatable 分页忽略隐藏行？

> ID：14837921
> 
> 赞同：2
> 
> 时间：2013-02-12T17:08:45.127
> 
> 标签：jquery, datatables

我有一个带有一些隐藏行的表。现在，当我使用带有引导分页的 jQuery 数据表插件时，它会考虑所有行。假设我有 100 行（隐藏 50 行）并且每页显示 10 行，当前将有 10 页，而期望的结果是只有 5 页。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:15:40.070

从 Data Tables 社区中，我了解到上述内容不受本机支持，因为该插件平等地对待所有行。然而，使用范围过滤可以实现所需的效果。[http://datatables.net/release-datatables/examples/plug-ins/range_filtering.html](http://datatables.net/release-datatables/examples/plug-ins/range_filtering.html)

# asp.net - 从 javascript 获取 HiddenField 值以在没有按钮或回发的情况下在代码隐藏中使用

> ID：14837922
> 
> 赞同：1
> 
> 时间：2013-02-12T17:08:46.127
> 
> 标签：asp.net, vb.net, vb.net-2010

我有一个 html 页面，其中包含指向外部 javascript 文件的链接，`external.js`如下所示

`<script type =" text/javascript" src="external.js"></script>`

该页面包含一个`<asp:HiddenField>`定义为`Hidden1`.

在我的外部 .js 文件中有一个函数`passData()`，它基本上填充`Hidden1`了一些值。我这样做的方法如下。

在**HTML上**

`<script> passData("<%=Hidden1.ClientID%>") </script>` 然后在`external.js`：

```
function passData(hiddenFieldID)
{
document.getElementByID(hiddenFieldID).Value = "Value";
} 
```

我现在一直在尝试的是通过以下方式`Hidden1`从我的代码中获取价值`vb.net`：

`Dim str = Hidden1.value`

然而，没有运气。我注意到我应该执行某种回发，以便可以获取值。但是，我在想的是，`Hidden1`当我使用时，我的 html 页面上的值如何显示，同时除非我执行回发，否则我`alert`无法`page_load`在我的页面上检索它。`.aspx`在我的应用程序中，我真的很想让它工作，而无需添加一个按钮来初始化回发。我需要`Hidden1`在我的代码隐藏页面中获取价值，`.aspx`以便将其存储在数据库中。有什么建议或想法吗？

# jquery - 从 Jquery 中的元素中删除验证

> ID：14837923
> 
> 赞同：0
> 
> 时间：2013-02-12T17:08:48.683
> 
> 标签：jquery, asp.net, twitter-bootstrap, jquery-validate

我的页面上有 jquery 验证（使用 twitter 引导），我使用以下 ASP.NET MVC 注释。

```
[DisplayName("Text)"),Range(100,35000)]
    public decimal Field { get; set; } 
```

该元素添加有：

```
@Bootstrap.TextBoxFor(x => x.Field, htmlAttributes: new {@class="ignore",id="field" }) 
```

问题是我想在该字段中允许一个空值，但保留范围验证以防写入非空值。

这是我的 JavaScript 代码：

```
$("#Field").on("keyup", function (e) {
        e.preventDefault();
        if ($(this).val() == "") {
            $(this).removeClass("input-validation-error");
            $(this).addClass("valid");
            $(this).next().html("");
            $(this).parent().parent().removeClass("error");
        }
    })

    $.validator.setDefaults({ ignore: ".ignore" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:01:04.680

我找到了解决方案......如果你让类型可以为空，它就可以工作......

```
[DisplayName("Text)"),Range(100,35000)]
public decimal? Field { get; set; } 
```

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T17:27:14.073

我向您发布了有关“必需”验证的技巧。这个想法是如果字段为空，则返回所需的 true 的反面，否则如果值超出范围，则返回 true。为了用户体验，也许您还需要个性化默认的所需消息

```
$("form").validate({
rules: {
    field1: {
        required: function() {
        return (
                                $("#fld1").val() != "" || 
                                ($("#fld1").val() != "" &&
                                (
                                 $("#fld1").val() < minVal  ||
                                 $("#fld1").val() > maxVal
                                ))
                     );
        }
    }
},.... 
```

# ipad - “[[UIApplication sharedApplication] statusBarOrientation]; 在第一次调用中给出错误的值”

> ID：14837924
> 
> 赞同：0
> 
> 时间：2013-02-12T17:08:53.673
> 
> 标签：ipad, orientation

我正在开发一个 iPad 应用程序，该应用程序以初始屏幕开始，然后移动到登录屏幕。我的应用程序应该支持所有方向，以及 iOS 4.3 及更高版本。为此，我在 plist 中添加了四个方向，并在应用程序委托中添加了以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    [self.window makeKeyAndVisible]; 
    // Override point for customization after application launch
    SplashViewController *aController = [[SplashViewController alloc] initWithNibName:@"SplashView" bundle:nil];
    self.mainViewController = aController;
    [aController release];

    mainViewController.view.frame = [UIScreen mainScreen].bounds;// no effect
    [window setFrame:[[UIScreen mainScreen] bounds]]; //no effect
    //[window addSubview:[mainViewController view]];
    [window setRootViewController:mainViewController];

    return YES;
}

- (NSUInteger)application:(UIApplication *)application     supportedInterfaceOrientationsForWindow:(UIWindow *)window{

    return UIInterfaceOrientationMaskAll;
} 
```

在启动画面中

```
- (void) loadView {
    [super loadView];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
        return YES;
}
- (BOOL)shouldAutorotate{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}
- (void) orientationChanged
{
    UIInterfaceOrientation interfaceOrientation =[[UIApplication sharedApplication] statusBarOrientation];
    if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
            NSLog(@"Portrait");
    else
            NSLog(@"Landscape");

} 
```

在这里，我得到了正确的方向，但是在旋转时，我得到了一个倒置的结果，我得到横向的纵向和纵向的横向。我试图像这样转换代码：

```
- (void) orientationChanged
{
    UIInterfaceOrientation interfaceOrientation =[[UIApplication sharedApplication] statusBarOrientation];
    if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
            NSLog(@"Landscape");
    else
            NSLog(@"Portrait");

} 
```

我得到第一个结果错误，之后结果是正确的。你能帮我吗？请注意，我已经放置了一些 uielement 进行测试，并且测试结果相同。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:00:59.670

经过两天的搜索和测试，我设法解决了这个问题，论坛上的答案都不完整，我是这样解决的：

```
//this for the orientation
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [self orientationChanged];
}

// here is the tricky thing, when startup you should have a special function for the orientation other than the orientationchanged method, and must be called here in viewDidAppear, otherwise it won't work
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self StartUpOrientation];
}
#pragma mark -
#pragma mark Orientation Methods

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

- (BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;

}

- (void) orientationChanged {
    UIInterfaceOrientation interfaceOrientation =[[UIApplication sharedApplication] statusBarOrientation];
    if (interfaceOrientation != UIInterfaceOrientationLandscapeLeft && interfaceOrientation != UIInterfaceOrientationLandscapeRight) {
        [self.view setBounds:CGRectMake(0, 0, 1024, 748)];
        // your code here
    }
    else {
        [self.view setBounds:CGRectMake(0, 0,768,1004)];
        //your code here
    }
}

- (void) StartUpOrientation {
    UIInterfaceOrientation interfaceOrientation =[[UIApplication sharedApplication] statusBarOrientation];
if (interfaceOrientation != UIInterfaceOrientationLandscapeLeft && interfaceOrientation != UIInterfaceOrientationLandscapeRight) {
        [self.view setBounds:CGRectMake(0, 0,768,1004)];
        // your code here
    }
else {
        [self.view setBounds:CGRectMake(0, 0, 1024, 748)];
        // your code here
    }
} 
```

希望有一天它会帮助某人

# java - Java Applet 仅适用于 Firefox

> ID：14837925
> 
> 赞同：1
> 
> 时间：2013-02-12T17:08:58.090
> 
> 标签：java, browser, deployment, applet

我已经实现了一个 Java Applet。我已经导出了罐子。我在罐子上签名。如果我把它放在我的服务器上并将它与 HTML 一起使用，它就可以工作。但仅在 Firefox 中。

这是HTML：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
  PUBLIC "//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Upload Test</title>
</head>
<body>
    <object archive="applet.jar" classid="java:uploader/FileUpload.class"
    codetype="application/java-vm" width="800" height="600"> </object>

</body>
</html> 
```

我也试过这个：

```
<SCRIPT type="text/javascript">
if(browser.value.getIndex("chrome") {
  chrome.browser.enableFeature(JApplet)
});
</SCRIPT> 
```

但仍然只有 Firefox。我真的很想让它在 Chrome 和 IE9 中工作。但是这两个只留下了Applet应该存在的空间。我什至可以突出显示它。

我必须在我的 xhtml 中添加一些东西吗？或者Applet中的某些东西？

我在网上找到了足够多的关于为什么 Applets 可能不起作用，但没有关于为什么只使用 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:31:29.423

正如 Andrew Thompson 所说，我需要使用 deployJava.js。您可以在[本 Oracle 教程中找到它。](http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html) 本教程详细描述了每个必要的步骤。

现在我的 Applet 可以在所有三种浏览器（FF、Chrome、IE9）上运行，就像一个魅力。

谢谢！

# jquery - Jquery 实时搜索：用按钮触发？

> ID：14837926
> 
> 赞同：-1
> 
> 时间：2013-02-12T17:08:58.603
> 
> 标签：jquery, livesearch

我发现[**这个小提琴**](http://jsfiddle.net/alecrust/pcfLJ/)在我的页面上完全按照我想要的方式运行，除了我需要仅在用户单击搜索按钮（我也可以使用帮助添加）或按下回车键时进行搜索 - 而不是他们正在打字。

这是代码：

```
//Live Search
$('.filter-bar #search').search('.filter-results li', function(on) {
on.all(function(results) {
    var size = results ? results.size() : 0
    $('.filter-results-count').text(size + ' results');
});

on.reset(function() {
    $('.no-filter-results').hide();
    $('.filter-results li').show();
});

on.empty(function() {
    $('.no-filter-results').show();
    $('.filter-results li').hide();
});

on.results(function(results) {
    $('.no-filter-results').hide();
    $('.filter-results li').hide();
    results.show();
 });
}); 
```

下一步是使搜索不区分大小写并考虑某些类型-o。
（我可以使用快速银或液态金属或类似的东西吗？）

如果你能修改小提琴来解决那对我来说是最好的理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:12:04.927

添加了一个库，使搜索成为可能。我已经编辑了原始代码。请使用下面的代码！这只会在您按回车键时搜索。但其余的还是一样的。

```
(function($) {
  var Search = function(block) {
    this.callbacks = {};
    block(this);
  }

  Search.prototype.all = function(fn) { this.callbacks.all = fn; }
  Search.prototype.reset = function(fn) { this.callbacks.reset = fn; }
  Search.prototype.empty = function(fn) { this.callbacks.empty = fn; }
  Search.prototype.results = function(fn) { this.callbacks.results = fn; }

  function query(selector) {
    if (val = this.val()) {
      return $(selector + ':contains("' + val + '")');;
    } else {
      return false;
    }
  }

  $.fn.search = function search(selector, block) {
    var search = new Search(block);
    var callbacks = search.callbacks;

    function perform() {
      if (result = query.call($(this), selector)) {
        callbacks.all && callbacks.all.call(this, result);
        var method = result.size() > 0 ? 'results' : 'empty';
        return callbacks[method] && callbacks[method].call(this, result);
      } else {
        callbacks.all && callbacks.all.call(this, $(selector));
        return callbacks.reset && callbacks.reset.call(this);
      };
    }

    $(this).live('keypress', function(e){
        if( e.which == 13) perform();
    });
  }
})(jQuery); 
```

# android - 如何在同一设备上使用同一个包发布和安装同一个 android 应用的两个版本

> ID：14837927
> 
> 赞同：3
> 
> 时间：2013-02-12T17:09:00.663
> 
> 标签：android, ant, installation, release, build.xml

我有一个 android 应用程序，其中包含两个不同的 res 文件夹（res-1、res-2），其中包含所有特定布局和一个共享包。使用 ant，我一次只能在我的设备上发布和安装应用程序的两个版本中的一个。我想要的是同时发布和安装它们，以便能够在我的设备上查看和测试它们。任何建议如何实现这一目标？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:13:37.783

安装两个具有相同包名的应用程序是不可能的，现有的应用程序将被新安装的应用程序覆盖。重命名另一个包将是一个解决方案。也许在 AVD 中测试一个，在设备上测试另一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:24:47.443

为什么不只包括所有资源，然后在运行时确定哪个是正确的？

# svn - 访问最后更改的版本

> ID：14837928
> 
> 赞同：0
> 
> 时间：2013-02-12T17:09:22.157
> 
> 标签：svn

我有一个关于访问最后更改的 rev 的问题。我正在使用 svn info 获取信息并将其存储在文件中。该文件存储修订、url、最后更改的修订等信息。我通过创建一个属性来访问 build.xml 中的这些值。虽然我可以分别使用 property.url 和 property.revision 获取 url 和修订，但我如何访问最后更改的 rev？

感谢人们，

施瑞拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:12:41.443

用于[`svn info`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.info.html)检索这些详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:00:33.170

您可能会发现使用[svnant](http://subclipse.tigris.org/svnant/svntask.html#info)比使用 exec 调用 CLI svn 客户端要干净得多。您可以自动将上次更改的转速存储在`svn.info.lastrev`

# .net - .Net 支持多少种语言？

> ID：14837929
> 
> 赞同：-7
> 
> 时间：2013-02-12T17:09:25.067
> 
> 标签：.net

最新版本的 Visual Studio（2012 和 2010）支持多少种语言？

此外，是否可以在 .Net 中创建一种新语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:11:05.497

Visual Studio 2010 和 2012 直接支持用于 .NET 开发的 C#、VB.Net、C++/CLI 和 F#。还有许多其他具有不同“支持”级别的语言，包括 IronRuby 和 IronPython、Boo 等。

任何人都可以在 CLI 之上自由地制作自己的语言，而且很多人已经这样做了。 [维基百科有一个相当长的 .NET 语言列表](http://en.wikipedia.org/wiki/List_of_CLI_languages)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:11:43.717

至少 C#、F#、IronPython、Visual Basic.NET、C++（以及我相信的“隐藏”C 编译器）至少。

此外，还支持 HTML5、Javascript、CSS3 等。

# javascript - 测试窗口对象是否存在/加载了某些东西

> ID：14837932
> 
> 赞同：0
> 
> 时间：2013-02-12T17:09:36.737
> 
> 标签：javascript

我了解使用 jQuery，您可以测试它是否已加载（通过 CDN）：

```
window.jQuery || // Load fallback if offline 
```

如何为自己的插件做这件事？我想从 CDN 加载一些东西。

我需要在我的代码中编写什么才能测试窗口对象是我要问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:11:57.313

动态检查和定义对象的原则是相同的，例如：

```
window.myObject = {}; 
```

你可以做：

```
window.myObject = window.myObject || {}; 
```

我认为您想在 CDN 上托管，或者使用 CDN，如果不可用，那么静默使用本地副本？

最简单的解决方案是让两组 JavaScript 都像上面一样检查是否存在，然后`<script>`按优先顺序将它们添加为普通标签：

```
<script src="http://www.megacdn.com/some.js" type="text/javascript"></script>
<script src="/some.js" type="text/javascript"></script> 
```

如果 CDN 失败，则本地副本应该可以工作。

# c++ - 按住滚动条获取命令提示符以在 Windows 中暂停

> ID：14837941
> 
> 赞同：5
> 
> 时间：2013-02-12T17:09:56.547
> 
> 标签：c++, windows, hardware, command-prompt

我有一个程序，我通过国家仪器 (NI) 的 ADC 系统记录数据。

设备将信息缓冲一段时间，然后程序在某个时间点收集缓冲区数据。如果程序收集的数据大于缓冲区，那么缓冲区将不得不在我的程序没有接收到数据的情况下释放，这将导致 NI 库抛出异常，指出请求的数据不再可用，因为它已丢失。

由于我的程序是命令提示程序，如果用户单击并按住滚动条，程序会暂停，这可能会导致此问题发生。

如何在不增加缓冲区大小的情况下解决这个问题？我可以在 Windows 中禁用这个持有的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:50:45.727

只有试图输出到控制台的线程才会被阻塞。将此作为单独的线程，您的问题就会消失。

当然，您需要缓冲输出，并在缓冲区溢出时做一些明智的事情。

作为参考，这是我用来测试它的简单代码，您会注意到即使按住滚动条，计数器也会继续增加：

```
#include <Windows.h>
#include <stdio.h>

volatile int n = 0;

DWORD WINAPI my_thread(LPVOID parameter)
{
    for (;;)
    {
        n = n + 1;
        Sleep(800);
    }
}

int main(int argc, char ** argv)
{
    if (!CreateThread(NULL, 0, my_thread, NULL, 0, NULL))
    {
        printf("Error %u from CreateThread\n", GetLastError());
        return 0;
    }
    for (;;)
    {
        printf("Hello!  We're at %u\n", n);
        Sleep(1000);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T17:43:46.597

虽然可能有一些方法可以绕过您可能想到的输出的每个单独问题[包括例如在有时慢的输出链接上通过网络运行它，或类似的]，但我认为正确的做法是断开您的输出从您收集的数据中。通过添加一个单独的线程来收集数据，并将主线程显示到命令提示符窗口，应该不难做到这一点。这样，无论 Windows 向您抛出哪种“输出被阻止”的变体，它都会起作用 - 至少在您用完 RAM 之前，但此时这是您的程序决定做某事的决定 [例如丢弃一些数据或一些这样的]。

“我需要收集一些东西，我也需要允许用户查看数据，但我不希望两者相互干扰”的问题一般是这样解决的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T17:29:41.603

首先使用[GetConsoleWindow winapi 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)并获取控制台的 HWND。现在我建议两种方法来做到这一点，

**方法 I** 通过创建您自己的 WindowProcedure 将窗口子类化。（[从这里获得帮助](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570%28v=vs.85%29.aspx#subclassing_window)）现在您已经对它进行了子类化，您可以拦截[WM_VSCROLL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787577%28v=vs.85%29.aspx)和 WM_HSCROLL 消息并对您的代码进行自己的补救。

**方法二使用**[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx) 等函数来改变窗口的大小，这样就不需要滚动条了。或更改[控制台屏幕缓冲区](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687089%28v=vs.85%29.aspx)的大小，以便不需要滚动条。

方法 I 对应用程序有很多控制，但它比方法 II 稍微复杂一点，方法 II 非常简单。如果要禁止用户调整控制台窗口的大小，只需`WS_THICKFRAME`从控制台窗口的*WindowStyle*中删除 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T09:16:12.467

我遇到了类似的情况，发现这种阻塞行为可能是由命令提示符的快速编辑“功能”引起的。这个[问题](https://stackoverflow.com/questions/33883530/why-is-my-command-prompt-freezing-on-windows-10)解释了它，答案显示了如何禁用它。希望这会有所帮助，即使在几年之后:)

# html - 仅重复 HTML 背景图像

> ID：14837945
> 
> 赞同：0
> 
> 时间：2013-02-12T17:10:08.753
> 
> 标签：html, css, image, background-image, background-repeat

我有这个：`<body background="CFIS Fantasy Pool Logo Small.png" bgcolor="333333">`

我想添加一个标签，以便它在 y 上重复，比如`repeat-y`. 我已经尝试了很多东西，但它不会起作用，它只会在屏幕上出现。`repeat-y`如果我要添加标签，整个事情会是什么样子。顺便说一句，我希望它在左侧重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:11:22.180

您可以使用 body 标签上的内联样式来做到这一点，如下所示：

```
<body style="background: #333 url("CFIS Fantasy Pool Logo Small.png") repeat-y 0 0; 
```

但我建议将其添加到您的样式表中，如下所示：

```
<body>

body {
    background: #333 url("CFIS Fantasy Pool Logo Small.png") repeat-y 0 0;
} 
```

我还建议不要在文件名中使用空格或大写字母，因为这会导致问题。最好做这样的事情：

```
cfis_fantasy_pool_logo_small.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:40:49.550

这应该有效：

```
background-repeat:repeat-y; 
```

对于定位，使用：

```
background-position:left; 
OR
background-position:left top; 
OR
background-position:left bottom; 
```

# ios6 - 未检测到存折 pkpass 文件

> ID：14837946
> 
> 赞同：2
> 
> 时间：2013-02-12T17:10:10.697
> 
> 标签：ios6, passbook

我已经预订了我的行程，旅游网站连同 pkpassfiles 一起提供了机票。不幸的是，Safari 和 Chrome 都没有检测到它并显示在存折应用程序中打开的选项。它显示了 FileApp/CHM 阅读器等选项。如何解决这个问题？

我使用默认的 Gmail iOS App/Safari 打开打开邮件（这是一个 gmail 服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:16:00.333

正如 Petesh 所说，您的服务器没有为文件提供 mime 类型的`application/vnd.apple.pkpass`.

如果使用 Apache，请尝试将以下内容添加到您的 .htaccess 文件或服务器 .conf

```
AddType application/vnd.apple.pkpass    .pkpass 
```

如果您手动生成 .pkpass 文件，则可以在提供文件时设置内容标头。例如对于 PHP，您可以使用：

```
header('Content-Type: application/vnd.apple.pkpass'); 
```

# c# - 如何使用 ffmpeg 从 MOV 视频文件中自动提取所有帧？

> ID：14837949
> 
> 赞同：1
> 
> 时间：2013-02-12T17:10:17.250
> 
> 标签：c#

我有这堂课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FFLib;

namespace Lightnings_Extractor
{

    class FFlibMov
    {

        public FFlibMov()
        {
        }
    }
} 
```

我使用 c# 的 ffmpeg 包装器我已经引用了 FFLib.dll 从这里下载了包装器：http://vbffmpegwrapper.codeplex.com/SourceControl/list/changesets?branch= [default](http://vbffmpegwrapper.codeplex.com/SourceControl/list/changesets?branch=default)

我想要的是从电影文件 MOV 类型中提取所有帧到硬盘。所以在这个过程的最后，我会有很多 jpeg/bmp 或硬盘上所有帧的任何类型的图像。

我该怎么做 ？

# c# - 通过输出参数插入 C#

> ID：14837956
> 
> 赞同：0
> 
> 时间：2013-02-12T17:10:41.883
> 
> 标签：c#, asp.net, sql, stored-procedures

我有一个表单，可以通过单击、人员、教育、经验、参考将数据发送到多个表。

如何将数据添加到多个表中，以便所有表中都有相同的人员 ID，

我是新手，使用层架构，所有数据库代码都在 DAL 中，，）使用 Asp 2.0

我正在考虑使用插入到 Person 并获取 PersonID 输出参数的存储过程来执行此操作，但我不知道如何使用该输出参数插入到其他表中。

我的示例代码是这样的

public virtual bool AddJobApplication(int JobID, string Name, string FatherName, string Phone, string Email, string Address, int AppID) {

```
 obj_db2.objCmd.CommandText = "AddApplication";
            obj_db2.objCmd.CommandType = CommandType.StoredProcedure;
            obj_db2.objCmd.Parameters.AddWithValue("JjobID", JobID);
            obj_db2.objCmd.Parameters.AddWithValue("@Name", Name);
            obj_db2.objCmd.Parameters.AddWithValue("@FName", FatherName);
            obj_db2.objCmd.Parameters.AddWithValue("@Email", Email );
            obj_db2.objCmd.Parameters.AddWithValue("@Address", Address);
            obj_db2.objCmd.Parameters.AddWithValue("@Phone", Phone);
            SqlParameter param = new SqlParameter("@AppID", AppID);
            param.Direction = ParameterDirection.Output;
            param.ParameterName = "@AppID";
            param.DbType = DbType.Int32;
            obj_db2.objCmd.Parameters.Add(param);
            obj_db2.objCmd.ExecuteNonQuery(); 
```

}

我在 DAL 中有这个函数，我将参数作为输出参数，我知道我可以从后面的代码访问这个 AddJobApplication 以输入表单信息，但没有得到如何使用这个输出插入的要点，对不起，如果我正在服用非常低级别，但我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:17:32.430

存储过程是解决此问题的正确方法。存储过程到位后，您将在插入方法中定义输出参数。

下面是一个示例，说明如何插入博客文章然后取回 SQL 创建的 ID。

**示例（插入博客文章）：**

```
 public int InsertArticle(ArticleItem articleitem)
    {
        SqlParameter articleid = new SqlParameter(Parameters.ArticleID, SqlDbType.Int);
        articleid.Direction = ParameterDirection.Output;

        SqlHelper.ExecuteNonQuery(Conn, CommandType.StoredProcedure, INSERT_ARTICLE,
                                  new SqlParameter(Parameters.Body, articleitem.Body),
                                  new SqlParameter(Parameters.Category, articleitem.Category),
                                  new SqlParameter(Parameters.ExpireDate, articleitem.ExpireDate),
                                  new SqlParameter(Parameters.PublishDate, articleitem.PublishDate),
                                  new SqlParameter(Parameters.Published, articleitem.Published),
                                  new SqlParameter(Parameters.Section, articleitem.Section),
                                  new SqlParameter(Parameters.Title, articleitem.Title),
                                  articleid);
        return (int)articleid.Value;
    } 
```

调用代码

```
public void InsertAllTheThings()
{
    var articleId = InsertArticle(articleItem); //Insert an article, return the ID
    //Once you have the id, use it as needed.
    var data = new SomeAwesomeData();
    data.ArticleID = articleId;
    data.IsAwesome = true;
    InsertSomeRelatedData(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:20:55.250

这实际上取决于已建立的架构。

如果更简单，您可能只返回新记录的标识，而不是使用输出参数：

```
INSERT INTO Person (
    FirstName,
    LastName
)
VALUES (
    'James',
    'Johnson'
)

SELECT @@IDENTITY --return the identifier of the new record 
```

If you're going to be updating multiple tables though, make sure that it's all done in the scope of a single transaction.

# javascript - html5画布调整图片大小的算法是什么？

> ID：14837960
> 
> 赞同：3
> 
> 时间：2013-02-12T17:10:47.063
> 
> 标签：javascript, html, canvas, image-resizing

一般来说，最终质量相当不错，除非图像中有一些非常微妙的细节，例如头发。然后缩小的图像会导致其自身过度锐化。画布用于调整图像大小的默认算法是什么？

有没有办法获得更好的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:21:54.690

根据测试结果和网上零散的信息，目前 canvas 使用[Nearest Member](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)。尽管规范不强制任何特定算法。Mozilla 中有一个关于切换到双线性的讨论，但它似乎还没有在浏览器中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:37:12.120

您通常只是`drawImage`用来调整画布上的图像大小。以下是来自 Mozilla 的示例：

```
// Width and height is the image's size on the target canvas.
drawImage(image, x, y, width, height) 
```

有关更多示例，请参见[此处](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images)；特别是“切片”部分。

# sql-server - 枢轴和级联空列

> ID：14837962
> 
> 赞同：6
> 
> 时间：2013-02-12T17:10:49.300
> 
> 标签：sql-server, sql-server-2008, pivot

我有一个包含特定月份值的表：

```
| 制造商 | 日期 | 因素 |
-----------------------------------------
| 1 | 2013-01-01 | 1 |
| 2 | 2013-01-01 | 0.8 |
| 2 | 2013-02-01 | 1 |
| 2 | 2013-12-01 | 1.55 |
| 3 | 2013-01-01 | 1 |
| 3 | 2013-04-01 | 1.3 |
| 3 | 2013-05-01 | 1.2 |
| 3 | 2013-06-01 | 1.1 |
| 3 | 2013-07-01 | 1 |
| 4 | 2013-01-01 | 0.9 |
| 4 | 2013-02-01 | 1 |
| 4 | 2013-12-01 | 1.8 |
| 5 | 2013-01-01 | 1.4 |
| 5 | 2013-02-01 | 1 |
| 5 | 2013-10-01 | 1.3 |
| 5 | 2013-11-01 | 1.2 |
| 5 | 2013-12-01 | 1.5 |
```

我想做的是使用`calendar`表格（已经定义）来旋转这些：

![](../Images/a974091be3cc49e7b6c769baf863ed6a.png)

最后，级联`NULL`列以使用先前的值。

![](../Images/9b462e30713ea093fe7439c2c755cc76.png)

到目前为止，我得到的是一个查询，它将用`NULL`s 的最后一个值填充 s `mfg = 3`。每个`mfg`人在一年的第一天总是有一个价值。我的问题是；我如何以此为中心并扩展到所有人`mfg`？

```
SELECT c.[date], 
       f.[factor], 
       Isnull(f.[factor], (SELECT TOP 1 factor 
                           FROM   factors 
                           WHERE  [date] < c.[date] 
                                  AND [factor] IS NOT NULL 
                                  AND mfg = 3 
                           ORDER  BY [date] DESC)) AS xFactor 
FROM   (SELECT [date] 
        FROM   calendar 
        WHERE  Datepart(yy, [date]) = 2013 
               AND Datepart(d, [date]) = 1) c 
       LEFT JOIN (SELECT [date], 
                         [factor] 
                  FROM   factors 
                  WHERE  mfg = 3) f 
              ON f.[date] = c.[date] 
```

**结果**

```
| 日期 | 因素 | XFACTOR |
---------------------------------
| 2013-01-01 | 1 | 1 |
| 2013-02-01 | (空) | 1 |
| 2013-03-01 | (空) | 1 |
| 2013-04-01 | 1.3 | 1.3 |
| 2013-05-01 | 1.2 | 1.2 |
| 2013-06-01 | 1.1 | 1.1 |
| 2013-07-01 | 1 | 1 |
| 2013-08-01 | (空) | 1 |
| 2013-09-01 | (空) | 1 |
| 2013-10-01 | (空) | 1 |
| 2013-11-01 | (空) | 1 |
| 2013-12-01 | (空) | 1 |
```

## [SQL小提琴](http://sqlfiddle.com/#!3/43766/1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:50:04.330

不知道您是否需要日历表中的日期是动态的，或者是否`mfg`可以超过 5 个，但这应该会给您一些想法。

```
select *
from (
      select c.date,
             t.mfg,
             (
             select top 1 f.factor 
             from factors as f
             where f.date <= c.date and
                   f.mfg = t.mfg and
                   f.factor is not null
             order by f.date desc
             ) as factor      
      from calendar as c
        cross apply(values(1),(2),(3),(4),(5)) as t(mfg)
     ) as t
pivot (
      max(t.factor) for t.date in ([20130101], [20130201], [20130301], 
                                   [20130401], [20130501], [20130601], 
                                   [20130701], [20130801], [20130901], 
                                   [20131001], [20131101], [20131201])
      ) as P 
```

[SQL小提琴](http://sqlfiddle.com/#!3/90b67/1)

# c# - QuickFix 的 .Net DLL 包装器中的命名空间问题

> ID：14837963
> 
> 赞同：0
> 
> 时间：2013-02-12T17:10:50.063
> 
> 标签：c#, .net-4.0, quickfix

我正在使用 .Net 中的 QuickFix 引擎（使用 C++ DLL 包装器）来制作一条`TradeCaptureReportRequest`消息：

```
var req = new QuickFix44.TradeCaptureReportRequest();
req.set(new QuickFix.SubscriptionRequestType(QuickFix.SubscriptionRequestType.SNAPSHOT_PLUS_UPDATES)); // 263
req.set(new QuickFix.TradeRequestID("testing" + DateTime.Now.Second.ToString())); // 568
var nodates = new QuickFix44.TradeCaptureReportRequest.NoDates();
nodates.set(new QuickFix.TradeDate("20130201"));
req.set(nodates); // 580 
```

在我调用之前，一切似乎都很好`req.set(nodates)`，这会导致编译器错误，提示*“NoDates cannot be convert to a NoDates”*。

这让我大吃一惊，因为当我导航到 QuickFix dll 中 TradeCaptureRequest 的元数据时，我看到了这个。

```
public void set(NoDates value);
 // as a member of QuickFix44.TradeCaptureReportRequest 
```

如果我转到 NoDates 的定义，它会将我发送到`QuickFix44.TradeCaptureReportRequest.NoDates`类中定义的`QuickFix44.TradeCaptureReportRequest`类。

但是在命名空间中`NoDates`定义了一个类`QuickFix`，当我执行以下操作时它编译得很好。

```
req.set(new QuickFix.NoDates(1)); 
```

我正在使用 Quickfix v4.0.30128 和 C++ DLL 的 .Net 包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:56:50.327

如果您查看 C# 代码，[`TradeCaptureReportRequest.set`](http://quickfix.svn.sourceforge.net/viewvc/quickfix/trunk/quickfix/src/.NET/fix44/TradeCaptureReportRequest.cs?revision=2291&view=markup)您会发现它需要一个值`QuickFix.NoDates`类型`NoDates`：

```
// line: 1993
public void set(QuickFix.NoDates value)
{ setField(value); } 
```

因此，将您的 C# 更改为以下内容：

```
var nodates = new QuickFix.NoDates();
nodates.set(new QuickFix.TradeDate("20130201"));
req.set(nodates); 
```

[您似乎在 C++ 上使用 QuickFix .Net 包装器，这是对 .Net 编程准则的厌恶。我强烈建议您切换到[QuickFIX/N](http://www.quickfixn.org/tutorial/compatibility)，它不那么可怕（但看起来仍然很糟糕）。]

# python - 将 Flask 应用程序部署到 Heroku - 找不到模板

> ID：14837966
> 
> 赞同：2
> 
> 时间：2013-02-12T17:11:00.567
> 
> 标签：python, heroku, flask, jinja2

我正在使用 Flask 开发我的第一个应用程序并部署到 Heroku。以下是我在本地和 Heroku 上收到的错误消息。也可以在这里看到：[http ://warm-beyond-4111.herokuapp.com/](http://warm-beyond-4111.herokuapp.com/)

> jinja2.exceptions.TemplateNotFound TemplateNotFound: home.html

此处错误的较长版本：

```
File "/app/.heroku/python/lib/python2.7/site-packages/flask/templating.py",
line 61, in get_source raise TemplateNotFound(template)
TemplateNotFound: home.html 
```

这是该应用程序的概述：

目录：/helloflask

档案：

```
web: python run.py 
```

要求.txt

```
Flask==0.9
Jinja2==2.6
Werkzeug==0.8.3
distribute==0.6.28
wsgiref==0.1.2 
```

运行.py

```
import os
from helloflask import app
port = int(os.environ.get('PORT', 5000))
app.run(host='0.0.0.0', port=port, debug=True) 
```

目录：/helloflask/helloflask

__init__.py

```
from flask import Flask, render_template
app = Flask(__name__)
import helloflask.views 
```

视图.py

```
from helloflask import app
from flask import Flask, render_template
@app.route('/')
def home():
return render_template('home.html') 
```

目录：/helloflask/templates

home.html = 标准 HTML 文件

目录：/helloflask/static/css

main.css = 标准 CSS 文件

我已经在互联网上搜索了一个没有运气的答案。有人见过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:57:18.567

尝试在应用程序 /templates 的根目录创建模板文件夹，看看是否能解决问题。我想你可以在 Flask 中设置模板文件夹，只是现在找不到。

此外，您可能喜欢关于 Heroku 上烧瓶部署的 github 存储库。 [https://github.com/zachwill/flask_heroku](https://github.com/zachwill/flask_heroku)

另请查看此 SO Post on folder structure - [flask blueprint template folder](https://stackoverflow.com/questions/7974771/flask-blueprint-template-folder) 如果您希望将模板保留在 helloflask 下，您可能想要使用 Flask Blueprints。

我不在 Heroku 上使用 Flask，所以没有验证这个设置。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:33:32.420

该`templates`文件夹应作为您的应用程序包的一部分。将其移入`/helloflask/helloflask`.

[请参阅http://flask.pocoo.org/docs/quickstart/#a-minimal-application](http://flask.pocoo.org/docs/quickstart/#a-minimal-application)中的#2 。

# php - Code Igniter - 视图不违反 DRY 的最佳实践

> ID：14837967
> 
> 赞同：4
> 
> 时间：2013-02-12T17:11:03.077
> 
> 标签：php, codeigniter, codeigniter-2, dry

试图确定在 codeigniter 中处理视图的最佳方式。现在任何我认为的东西似乎都太乱了。

目前我有3个相关的观点：

1) 页眉 2) 内容 3) 页脚

每个控制器都有这样的东西。一些控制器甚至多次出现这种情况（同一个控制器中的不同功能）：

```
$this->load->view('head', $data);
$this->load->view('volunteers/add_profile.php',$content_data);
$this->load->view('foot'); 
```

必须在每一页上加载页眉和页脚似乎很愚蠢。但是，每个页面的标题中的数据都会略有不同（元标记、样式表、加载的脚本等）。

我有更清洁的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:03:43.043

我喜欢用类似的方法创建一个父控制器`renderPage('content_view', $data)`。该方法可以包括页眉、菜单、页脚……这样，所有视图加载内容都保存在控制器中，我不必为每个操作或视图的页眉、菜单或页脚而烦恼。它也很灵活，因为您的子控制器可以重新定义`renderPage()`方法以适应他们的目的。

如果您需要加载多个内容视图，您可以创建一个`renderPage()`接收字符串数组而不是字符串的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:37:57.997

无论是@TheShiftExchange 建议的内容，还是如果您的应用程序允许，您可以从每个内容视图（这是当时控制器调用的唯一视图）中调用页眉和页脚视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:13:00.547

是的 - 有一个模板视图。在您的控制器中：

```
$data['header'] = xxx;
$data['content'] = xxx;
$this->load->view('my_template', $data); 
```

然后在您的 my_template.php 视图文件中：

```
$this->load->view('head', $header);
$this->load->view('volunteers/add_profile.php',$content);
$this->load->view('foot'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T06:18:36.887

我创建了自己的控制器，在其中创建`MY_Controller extends CI_Controller`类，然后`MY_Controller`使用访问修饰符`$data`和`$loadviewArray`.

```
public $data = array(); 
public $loadviewArray = array(); 
```

在此之后我创建函数`MY_Controller`

```
public function loadview() {
   foreach ($this->loadviewArray as $key => $val) {
      $this->load->view($val, $this->data);
   }
} 
```

然后我在控制器创建功能中创建控制器`Admin`并`extends` `MY_Controller`像这样。`Admin extends MY_Controller``Admin``index`

```
public function index() {
   $this->data["page_title"] = "Login";
   $this->data["records"] = $data; // You can pass data
   $this->loadviewArray = array("admin/header", "admin/login", "admin/footer");
   $this->loadview();
} 
```

在`$data`访问修饰符数组中，我在视图和加载视图中传递数据，`$loadviewArray`然后调用一个函数来加载视图，您可以这样做，这对我现在也很有帮助。并分别创建页眉和页脚视图...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-30T05:19:46.107

请检查[https://github.com/alzalabany/codeigniter-base-controller/tree/master](https://github.com/alzalabany/codeigniter-base-controller/tree/master)

所以你总是可以使用模板库。但由于某种原因我不喜欢它们！

codeigniter 允许你扩展它的核心；如果你去上面提到的链接你可以看到一个小例子

在这个例子中，每个将扩展 MY_controller 的控制器都将从这些默认值开始

```
protected        $body='base/body',
                        $title='Codeigniter Z master',//txt
                        $js=array(),//filename
                        $inline_js='',//script
                        $css=array(),
                        $inline_css='',//style
                        $breadcrumb=FALSE,//<li><a>
                        $content=array(),//html
                        $noEcho = FALSE; 
```

因此，如果您选择在 MY_controller 中更改它们，其效果将是默认的，否则使用 $this->title = 'Codeigniter - Welcome page'; 例如，在您的控制器构造函数中；

加载辅助是一项非常简单的工作，只需调用`$this->_assets()`资产的位置（将 MY_controller.php 默认位置编辑到您的资产文件夹）；如果它是一个 inline_js/css 就调用

```
$this->_assets('alert("hi");','js'); 
```

如果要将视图加载到页面部分中，请使用`$this->outv(view_path,view_data,section_name);`

如果您只想将 html 加载到变量中，您可以使用

$this->out('页脚','页脚');

最后只需调用 ->_flush();

我使用的其他一些选项

`$noEcho`; 如果设置，它将清除所有缓冲区以在将您的视图内容发送到浏览器之前删除任何回声；

您还可以在 MY_controller 中设置注销或登录等功能，您的任何控制器都可以访问它`http://localhost/ci/welcome/logout`

无论如何:) 我希望能回答你的问题！

# go - 在 Go 中释放通道

> ID：14837970
> 
> 赞同：3
> 
> 时间：2013-02-12T17:11:12.423
> 
> 标签：go, channel

我有一个 TCP 套接字和 2 个 goroutine 读取和写入流。我正在编写一个从通道读取数据的 goroutine。如果 TCP 连接被丢弃，那么从 go 例程中读取将检测到错误并停止。

但是我如何释放一个有 goroutine 写入的频道呢？

是否有类似的方法`chan.release()`或者我应该发布一个特殊的数据包来告诉 goroutine 结束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:22:06.633

`close(ch)`将关闭频道。

如果您在通道上测距，则当通道关闭时 for 循环将退出。 `val, ok := <-ch`允许您检查关闭的频道。ok 将是一个布尔值，如果 ch 关闭，则为 false 如果 ch 打开，则为 true。

# sql - 从合并的连接结果集中消除 NULL 字段

> ID：14837973
> 
> 赞同：4
> 
> 时间：2013-02-12T17:11:23.390
> 
> 标签：sql, sql-server, tsql, null

我创建了以下视图“user_details_merged”：

```
SELECT DISTINCT
coalesce(own.user_name, join_user_name.user_name) AS user_name,
coalesce(own.email, join_mail.email) AS email,
coalesce(own.first_name, join_name.first_name) AS first_name,
coalesce(own.last_name, join_name.last_name) AS last_name
FROM
user_details AS own

LEFT JOIN user_details AS join_user_name ON 
    own.user_name IS NULL AND (
    (join_user_name.email = own.email AND own.email IS NOT NULL) 
    OR (join_user_name.first_name = own.first_name AND join_user_name.last_name = own.last_name 
    AND own.first_name IS NOT NULL AND own.last_name IS NOT NULL))

LEFT JOIN user_details AS join_mail ON 
    own.email IS NULL AND (
    (join_mail.user_name = own.user_name AND own.user_name IS NOT NULL) 
    OR (join_mail.first_name = own.first_name AND join_mail.last_name = own.last_name 
    AND own.first_name IS NOT NULL AND own.last_name IS NOT NULL))

LEFT JOIN user_details AS join_name ON 
    own.first_name IS NULL AND own.last_name IS NULL AND (
    (join_name.email = own.email AND own.email IS NOT NULL) 
    OR (join_name.user_name = own.user_name AND own.user_name IS NOT NULL))

ORDER BY user_name ASC,email ASC, first_name ASC, last_name ASC 
```

这合并了我的列：

```
user_name | email | first_name | last_name
a             b       NULL         NULL
NULL          b        c            d
a            NULL      e            f
NULL          x        y            z 
```

至

```
user_name | email | first_name | last_name
a             b       NULL         NULL
NULL          b        c            d
a            NULL      e            f
NULL          x        y            z

a             b        c            d
a             b        e            f 
```

我想要的是：

```
user_name | email | first_name | last_name
NULL          x        y            z
a             b        c            d
a             b        e            f 
```

当存在具有相同数据的行具有更多信息时，不包含包含 ROWS 的 NULL，但当没有具有更多信息的其他行时仍保留 /NULL xyz/。

这里的第二个视图正是我需要的：

```
SELECT DISTINCT a.user_name,a.email,a.first_name,a.last_name FROM
user_details_merged a
LEFT JOIN user_details_merged b
ON
(
    (
    a.user_name IS NOT NULL OR 
    NOT EXISTS (SELECT user_name FROM user_details_merged b WHERE b.user_name IS NOT NULL AND 
        b.email=ISNULL(a.email,b.email) AND 
        b.first_name=isnull(a.first_name,b.first_name) AND
        b.last_name=isnull(a.last_name,b.last_name))
    )

    AND

    (
    a.email IS NOT NULL OR 
    NOT EXISTS (SELECT email FROM user_details_merged b WHERE b.email IS NOT NULL AND 
        b.user_name=ISNULL(a.user_name,b.user_name) AND 
        b.first_name=isnull(a.first_name,b.first_name) AND
        b.last_name=isnull(a.last_name,b.last_name))
    )

    AND

    (
    (a.first_name IS NOT NULL AND a.last_name IS NOT NULL) OR 
    NOT EXISTS (SELECT email FROM user_details_merged b WHERE b.email IS NOT NULL AND 
        b.user_name=ISNULL(a.user_name,b.user_name) AND 
        b.email=ISNULL(a.email,b.email))
        -- AND b.first_name=isnull(a.first_name,b.first_name) AND b.last_name=isnull(a.last_name,b.last_name))
    )

    AND NOT (a.first_name = b.first_name AND a.last_name = b.last_name AND a.email = b.email AND a.user_name = b.user_name)

)

WHERE coalesce(b.user_name,b.email,b.first_name,b.last_name) IS NOT NULL 
```

主要问题是数据来自的 user_details 视图由许多不同表的联合组成。有些仅包含用户名和电子邮件，有些仅包含电子邮件和名字/姓氏等。这就是为什么没有唯一键并且由于 UNIONS 而我无法索引视图的原因。这使得不可能在一小时内执行最后一个视图。我当前的解决方法是一个过程，它将 user_details_merged 视图的数据存储在临时表中，并让上面的第二个视图使用该表中的数据。这样我可以将 8000 行的执行时间减少到 7 秒。

还有其他建议吗？

非常感谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:26:41.680

哎哟! 这是一个混乱的数据模型。最好的解决方案是修复数据模型以防止需要如此复杂的查询。但是，应用程序依赖项往往会更加复杂，所以我假设这已经被接受了。

*   我使用 4 行示例来提出替代解决方案。
*   然后我添加了几行只有名字和姓氏的值，这在上面的查询中暴露了一个遗漏的场景。
*   我还将相同的 6 行复制到超过 12K 行中，因为数据模型似乎支持这种情况。这最终导致上述查询运行了 2 个多小时，然后我终于放弃并停止了它。
*   我针对我的解决方案运行了 12K 行，它在不到一秒的时间内返回了预期的结果。

所以，不用多说：

```
-- =================================================================================
-- BEGIN: SETUP TEST DATA
-- =================================================================================
SET NOCOUNT ON 

IF OBJECT_ID('user_details', 'U') IS NOT NULL DROP TABLE user_details;
GO

CREATE TABLE dbo.user_details (
    user_name   char(1) NULL,
    email       char(1) NULL,
    first_name  char(1) NULL,
    last_name   char(1) NULL
)
GO

INSERT dbo.user_details
SELECT * 
  FROM (
        SELECT * FROM dbo.user_details WHERE 1=2
        UNION ALL SELECT 'a',   'b',    NULL,   NULL
        UNION ALL SELECT NULL,  'b',    'c',    'd'
        UNION ALL SELECT 'a',   NULL,   'e',    'f'
        UNION ALL SELECT NULL,  'x',    'y',    'z'
        UNION ALL SELECT NULL,  NULL,   'y',    'z'
        UNION ALL SELECT NULL,  NULL,   'a',    'z'
       ) A
GO

--/*
-- TURN 6 ROWS INTO OVER 12K ROWS TO TEST PERFORMANCE
DECLARE @count int; SELECT @count = 0
WHILE @count < 11
  BEGIN 
    INSERT user_details
    SELECT * 
      FROM user_details

    SELECT @count = @count + 1
END
--*/
-- =================================================================================
-- END: SETUP TEST DATA
-- =================================================================================

-- =================================================================================
-- BEGIN: NEW SOLUTION FINAL: <1sec on 12288 rows
-- =================================================================================
IF OBJECT_ID('tempdb..#useremail', 'U') IS NOT NULL DROP TABLE #useremail;
IF OBJECT_ID('tempdb..#email', 'U') IS NOT NULL DROP TABLE #email;
IF OBJECT_ID('tempdb..#user', 'U') IS NOT NULL DROP TABLE #user;
IF OBJECT_ID('tempdb..#name', 'U') IS NOT NULL DROP TABLE #name;

-- GET YOUR UNIQUE user_name AND email KEY
SELECT DISTINCT A.user_name, A.email
  INTO #useremail
  FROM user_details A

-- GET YOUR UNIQUE email VALUES
SELECT DISTINCT A.email, A.first_name, A.last_Name
  INTO #email
  FROM user_details A
 WHERE A.email IS NOT NULL

-- GET YOUR UNIQUE user_name VALUES
SELECT DISTINCT A.user_name, A.first_name, A.last_Name
  INTO #user
  FROM user_details A
 WHERE A.user_name IS NOT NULL

-- GET YOUR UNIQUE first_name AND last_Name VALUES NOT PART OF THE KEY
SELECT DISTINCT A.first_name, A.last_Name
  INTO #name
  FROM user_details A
 WHERE A.first_name IS NOT NULL
   AND A.last_Name IS NOT NULL
   AND A.user_name IS NULL
   AND A.email IS NULL

-- CLEAN UP YOUR UNIQUE user_name AND email KEY
DELETE A
-- SELECT *
  FROM #useremail A
  JOIN (
        SELECT *
          FROM #useremail
         WHERE user_name IS NOT NULL
           AND email IS NOT NULL
       ) B
    ON (A.user_name = B.user_name AND A.email     IS NULL)
    OR (A.email     = B.email     AND A.user_name IS NULL)

-- CLEAN UP YOUR UNIQUE email VALUES
DELETE A
-- SELECT *
  FROM #email A
  JOIN (
        SELECT *
          FROM #email
         WHERE first_name IS NOT NULL
           AND last_Name IS NOT NULL
       ) B
    ON A.email = B.email
   AND A.first_name IS NULL
   AND A.last_name IS NULL

-- CLEAN UP YOUR UNIQUE user_name VALUES
DELETE A
-- SELECT *
  FROM #user A
  JOIN (
        SELECT *
          FROM #user
         WHERE first_name IS NOT NULL
           AND last_Name IS NOT NULL
       ) B
    ON A.user_name = B.user_name
   AND A.first_name IS NULL
   AND A.last_name IS NULL

-- CLEAN UP YOUR UNIQUE #name VALUES
DELETE A
-- SELECT *
  FROM #name A
  JOIN #user B
    ON A.first_name = B.first_name
   AND A.last_name  = B.last_name

DELETE A
-- SELECT *
  FROM #name A
  JOIN #email B
    ON A.first_name = B.first_name
   AND A.last_name  = B.last_name

-- GET YOUR DATA
SELECT A.user_name
      ,A.email
      ,U.first_name
      ,U.last_name
      --,*
  FROM #useremail A
  JOIN #user U
    ON A.user_name = U.user_name
 UNION 
SELECT A.user_name
      ,A.email
      ,E.first_name
      ,E.last_name
      --,*
  FROM #useremail A
  JOIN #email E
    ON A.email = E.email
 UNION 
SELECT NULL as [user_name]
      ,NULL as [email]
      ,N.first_name
      ,N.last_name
      --,*
  FROM #name N
-- =================================================================================
-- END: NEW SOLUTION FINAL
-- ================================================================================= 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:36:44.753

- 如果我这次是对的，您可以使用以下方法解决它：

```
 SELECT ISNULL(A.USER_NAME, B.USER_NAME), A.EMAIL, A.FIRST_NAME, A.LAST_NAME FROM
 user_details A CROSS JOIN user_details B
 WHERE A.EMAIL IS NOT NULL
 AND A.FIRST_NAME IS NOT NULL
 AND A.LAST_NAME IS NOT NULL
 GROUP BY ISNULL(A.USER_NAME, B.USER_NAME), A.EMAIL, A.FIRST_NAME, A.LAST_NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:12:49.277

尝试对 user_details 使用外部联接。

# android - Android - LAN 网络中特定 IP 地址的带宽监控

> ID：14837975
> 
> 赞同：2
> 
> 时间：2013-02-12T17:11:33.053
> 
> 标签：android, shell, iptables

我的 android 设备充当 DHCP 和 DNS 服务器（Hotspot android）。据我看。因为 android 是基于 Linux 的操作系统，所以我使用 iptables 来监控 LAN 中特定 ip 的带宽（例如：192.168.10.10）。这是我所做的：

创建链

```
.iptables -N LAPTOP-DOWNLOAD 
```

监控这个 IP

```
.iptables -A FORWARD -d 192.168.10.10 -j LAPTOP-DOWNLOAD 
```

但这就是问题所在。它在我的链中出错

```
.netent* getnetbyaddr(uint32_t, int)(3) is not implemented on Android 
```

我猜是因为 android 内核本身不支持监视特定的 IP 目的地。我试过了 ：

```
.iptables -A FORWARD -j LAPTOP-DOWNLOAD 
```

它有效，它不会给我任何错误。无论如何我可以解决这个问题。提前致谢

# python - 控制数据库查询流程的更好方法

> ID：14837977
> 
> 赞同：2
> 
> 时间：2013-02-12T17:11:33.093
> 
> 标签：python, loops, peewee

在我的程序中，我需要读取一个非常大的表（它超出了内存存储）并让我自己编写以下构造来从表中读取并做一些工作。虽然我知道很有可能将选择重写为迭代器样式，但它仍然具有以下基本结构：

```
 found = True
    start = 0
    batch = 2500
    while found:
        found = False
        for obj in Channel.select().limit(batch).offset(start):
            found = True

            # do some big work...

        start += batch 
```

我想做的是有一些不携带尽可能多的笨拙状态变量的东西。关于如何清理这个烂摊子的想法？

仅供参考 - 我也试过这个，不确定我是否更喜欢它：

```
@staticmethod
def qiter(q, start=0, batch=25000):
    obj = True
    while obj:
        for obj in q.limit(batch).offset(start):
            yield obj
        start += batch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:17:52.753

我发现的最短的内容如下：

```
for start in itertools.count(0, 2500):
    objs = Channel.select().limit(2500).offset(start)
    if not objs:
        break
    for obj in objs:
        # do some big work... 
```

基本上它是两件事的结合：

*   `count`迭代器（来自标准库的 itertools 包）将批次计数减少到最低限度，并且
*   使用单独的测试和`break`语句来摆脱它。

详细地：

迭代器`count`非常简单：它产生无限级数 0, 2500, 5000, 7500, ... 。由于这个循环永远不会结束，我们需要在`break`某个地方摆脱它。这就是 if 语句发挥作用的地方。如果`objs`是一个空列表，则`break`存在外循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:26:46.330

如果您只是在迭代并且不想用完所有 RAM，您可以查看 QueryResultWrapper 上的“iterator()”方法。

例如，假设您需要迭代超过 1,000,000 行数据并将其序列化：

```
# let's assume we've got 1M stat objects to dump to csv
stats_qr = Stat.select().execute()

# our imaginary serializer class
serializer = CSVSerializer()

# loop over all the stats and serialize
for stat in stats_qr.iterator():
    serializer.serialize_object(stat) 
```

以下是文档的链接：

[http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#iterating-over-lots-of-rows](http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#iterating-over-lots-of-rows)

# c - C scanf() 返回 -1

> ID：14837982
> 
> 赞同：0
> 
> 时间：2013-02-12T17:11:43.980
> 
> 标签：c, user-input, scanf

```
int input;
printf("Type in an odd number less than or equal to 9: \n");

int correctInput = 0;
do {
    scanf("%d", &input);
    if((input % 2) == 0) {
        printf("You have not entered an odd number. Please try again. \n");
    }
    else if(input > 9 || input < 1) {
        printf("Your input is not from 1 to 9\. Please try again. \n");
    }
    else {
        correctInput = 1;
    }
} while(correctInput == 0);

printf("Input: %f. \n", input); 
```

我想要做的就是将一个 1-9 的奇数整数放入输入变量中。但是，当我运行此代码并输入类似 7 的内容时，我得到

```
Type in an odd number less than or equal to 9:
3
Input: -1.#QNAN0. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:12:54.563

```
printf("Input: %f. \n", input); 
```

改用这个：

```
printf("Input: %d. \n", input); 
```

`f`转换说明符是打印`double`值，使用`d`转换说明符打印`int`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T17:12:59.720

`input`是整数类型。请尝试`printf("Input: %d. \n", input);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T17:14:20.767

此行不正确：

```
printf("Input: %f. \n", input); 
```

该变量`input`是`int`类型，因此您应该使用`%d`格式化序列：

printf("输入: %d.\n", 输入);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:26:19.660

以下是正确的语法 printf("Input: %d.\n", input);

格式说明符 %d 代表整数。

# android - 如何使滚动视图中的线性布局填充整个区域

> ID：14837983
> 
> 赞同：25
> 
> 时间：2013-02-12T17:11:50.073
> 
> 标签：android, layout, android-gui

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:background="#000000"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:id="@+id/linear1"
            android:background="#FF0000"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:background="#00FF00"
                android:id="@+id/linear2"
                android:layout_width="match_parent"
                android:layout_height="200dip"
                android:orientation="vertical" >
            </LinearLayout>

            <LinearLayout
                android:background="#0000FF"
                android:id="@+id/linear3"
                android:layout_width="match_parent"
                android:layout_height="100dip"
                android:orientation="vertical" >
            </LinearLayout>

        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

这是我的布局，我希望看到红色背景（因为 linear1 具有红色背景并具有填充父级的属性），另外两个布局在 linear1 上带有绿色和蓝色 bacgroudns

但我实际上看到的是滚动视图中的黑色背景和线性2和线性3中的绿色和蓝色，但线性1中没有红色背景

即线性的行为就像 android:layout_height="wrap_content" 设置不是 android:layout_height="match_parent"

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-12T17:15:02.467

你需要设置fillViewport：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:background="#000000"
    android:layout_width="match_parent"
    android:fillViewport="true" <!-- here -->
    android:layout_height="match_parent" >

    ...

 </ScrollView> 
```

[信息](http://developer.android.com/reference/android/widget/ScrollView.html#attr_android%3afillViewport)

# java - JButton 矩阵上的动作事件

> ID：14837987
> 
> 赞同：1
> 
> 时间：2013-02-12T17:12:11.053
> 
> 标签：java, swing, jbutton, actionlistener

我无法处理我的 JButtons 矩阵中的事件。我需要弄清楚按下了哪个按钮，然后更改对象颜色以匹配按钮。

我目前正在使用此代码：

```
private class matrixButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        JButton btn = (JButton) (e.getSource());
        for (int i = 0; i < matrixBouton.length; i++)
        {
            for (int j = 0; j < matrixBouton[i].length; j++)
            {
                btn.equals(matrixBouton[i][j]);
                if (btn.getBackground() == COLOR_NEUTRAL)
                {
                    btn.setBackground(COLOR_PLAYER);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:29:07.183

您无需遍历所有`JButtons`内容，只需使用`evt.getSource()`. 这将为您返回对实际按下按钮的引用。然后你就可以随心所欲地表演了。您确实可以使用以下简化代码：

```
private class matrixButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        JButton btn = (JButton) (e.getSource());
        if (btn.getBackground() == COLOR_NEUTRAL)
         {
            btn.setBackground(COLOR_PLAYER);
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:35:42.530

您可以做的另一件事是将坐标存储在`ActionListener`：

```
private class matrixButtonListener implements ActionListener
{
    private int i;
    private int j;

    public matrixButtonListener (int i, int j)
    {
        this.i = i;
        this.j = j;
    }

    public void actionPerformed(ActionEvent e)
    {
        //this gives you the button on which you pressed
        JButton pressedButton = matrixBouton[this.i][this.j];

        if (pressedButton.getBackground() == COLOR_NEUTRAL)
        {
            pressedButton.setBackground(COLOR_PLAYER);
        }
    }
} 
```

您像这样设置每个侦听器：

```
matrixBouton[i][j].addActionListener (new matrixButtonListener (i, j)); 
```

将`i x j`创建侦听器的实例。通常这没什么大不了的，除非`i x j`真的很大（3 位数或 4 位数大）。

# mysql - 在周范围内对日期列进行分组

> ID：14837991
> 
> 赞同：-2
> 
> 时间：2013-02-12T17:12:23.683
> 
> 标签：mysql, sql, oracle, oracle10g, netezza

我有一张桌子和像这样的列

```
Start_date timestamp,
end_date   timestamp,
id number,
cost number(10,2). 
```

我插入表中的数据将是这样的

```
1,'2013-02-03 00:00:00','2013-02-03 00:00:00',75*0.06
1,'2013-02-04 00:00:00','2013-02-04 00:00:00',75*0.06
1,'2013-02-05 00:00:00','2013-02-05 00:00:00',75*0.06
1,'2013-02-06 00:00:00','2013-02-06 00:00:00',75*0.06
1,'2013-02-07 00:00:00','2013-02-07 00:00:00',75*0.06
1,'2013-02-08 00:00:00','2013-02-08 00:00:00',75*0.06
1,'2013-02-09 00:00:00','2013-02-09 00:00:00',75*0.06 
```

现在我想在周日到周六对列`Start_date`进行分组。`end_date`

你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:32:29.517

这是我可以为您提供的最好的，因为您的问题和您提供的样本一样无法理解。2013 年 ISO 周表：

```
SELECT start_date  -- 1/1/2013 --
 , TRUNC(start_date, 'iw')                  wk_starts  
 , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
 , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#_iw  
 , TO_CHAR(start_date, 'DAY')               wk_day
FROM
 (
  SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS start_date
   FROM dual
 CONNECT BY LEVEL <= 
 (
  SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y') "Num of Days in 2013"   
    FROM dual
 )
)
/

START_DATE    WK_STARTS    WK_ENDS            ISO_WK#   WK_DAY
----------------------------------------------------------------------
1/1/2013    12/31/2012    1/6/2013 11:59:59 PM    1    TUESDAY  
1/2/2013    12/31/2012    1/6/2013 11:59:59 PM    1    WEDNESDAY
.....
1/7/2013    1/7/2013    1/13/2013 11:59:59 PM    2    MONDAY   
1/8/2013    1/7/2013    1/13/2013 11:59:59 PM    2    TUESDAY
..... 
```

我猜您可以为您的日期和订单添加任何其他格式...

# php - Mysql 表中的日期/时间字段

> ID：14837994
> 
> 赞同：0
> 
> 时间：2013-02-12T17:12:28.373
> 
> 标签：php, mysql, datetime

我在 php 中有以下代码，它使用日期和时间插入开始日期和结束日期。选择输入字段时，通过 iphone 日期和时间轮添加日期和时间。然而问题是，如果我选择当地时间下午 1 点作为开始日期，并选择下午 2 点作为结束日期，它将以下午 6 点和晚上 7 点提交记录。这是编码问题、日期/时间字段问题还是表单问题？$start_date 和 $end_date 的变量直接从输入表单中提取。

```
$query = "INSERT INTO events (event_id, event_name, user_name, id_user, start_date, end_date, details, location, dresscode,private) VALUES ('NULL', '".$event_name."', '".$user_name."', '".$user_id."', '".$start_date."','".$end_date."','".$time."','".$location."','".$dresscode."','".$private_id."')";
mysql_query ($query); 
```

# kendo-ui - Kendo Grid - 单击模板列时的编辑模式

> ID：14837995
> 
> 赞同：3
> 
> 时间：2013-02-12T17:12:32.077
> 
> 标签：kendo-ui, kendo-grid

我正在为编辑弹出窗口使用模板。我试图强制网格进入编辑模式并在单击其中一列中的链接时显示编辑模板弹出窗口。

我尝试使用命令，但无法将超链接的文本数据绑定到模型中声明的字段，在本例中为“CourseType”。**命令**列中是否支持数据绑定？

```
columns: [
     { 
        command: [
          { 
            id: "edit", 
            title: "School Item",    
            template: '<a href="\\#">#=CourseType#</a>',  
            width: 120
          }
       ]
     }
] 
```

如果命令列中不支持数据绑定，那么如何在单击模板字段时将网格置于编辑模式？

```
columns: [
  { 
    field: "CourseType", 
    title: "School Item",  
    template: '<a href="\\#">#=CourseType#</a>'
  }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:44:56.040

我不确定为什么要将单元格定义为 HTML `anchor`，但是在单击锚点时使其进入弹出编辑模式没有问题。

1）添加到您的模板`class`中，这将允许我们找到这些单元格。就像是：

```
columns: [
    {
        field: "CourseType",
        title: "School Item",
        template: '<a href="\\#" class="ob-edit-popup">#=CourseType#</a>'
    }
] 
```

我`class="ob-edit-popup"`在模板中包含的地方。

2）将选项添加到您的网格定义中`editable: "popup"`。

3) 在初始化后添加以下 JavaScript 代码。

```
$(".ob-edit-popup", grid.tbody).on("click", function (e) {
    var row = $(this).closest("tr");
    grid.editRow(row);
}) 
```

结果在哪里`grid`：

```
var grid = $("#grid").kendoGrid({...}).data("kendoGrid"); 
```

# sql - sql 行到列数据透视表

> ID：14837996
> 
> 赞同：1
> 
> 时间：2013-02-12T17:12:36.443
> 
> 标签：sql, select, pivot, teradata

我有这样的sql视图：

```
id date_from  date_to
1  2005-01-05 2005-05-10
1  2005-01-05 2005-05-10
1  2005-01-05 2005-05-10
2  2005-01-01 2006-08-31
2  2010-01-01 2010-06-30
3  2005-01-01 2005-06-30 
```

我想编写返回的sql语句：

```
1 2005-01-05 2005-05-10 2005-01-05 2005-05-10 2005-01-05 2005-05-10
2 2005-01-01 2006-08-31 2010-01-01 2010-06-30 NULL       NULL
3 2005-01-01 2005-06-30 NULL       NULL       NULL       NULL 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:40:01.120

因为您最近的问题与 MySQL 有关，所以我假设您需要 MySQL 解决方案。

如果您知道潜在日期范围的最大数量，则可以使用 MAX 和 CASE。但是，您必须有一个行计数器，因为您没有任何其他唯一标识符（我实际上建议将其添加到您的视图中，因为您提到这是一个视图）。不过，这里是：

```
SELECT Id,
   MAX(CASE WHEN row_number = 1 THEN date_from END) date_from1,
   MAX(CASE WHEN row_number = 1 THEN date_to END) date_to1,
   MAX(CASE WHEN row_number = 2 THEN date_from END) date_from2,
   MAX(CASE WHEN row_number = 2 THEN date_to END) date_to2,
   MAX(CASE WHEN row_number = 3 THEN date_from END) date_from3,
   MAX(CASE WHEN row_number = 3 THEN date_to END) date_to3
FROM (
  SELECT 
      id, 
      @running:=if(@previous=id,@running,0) + 1 as row_number,
      @previous:=id,
      date_from, date_to
  FROM YourView 
      JOIN    (SELECT @previous := 0) r
    ORDER BY id, date_from, date_to
) t
GROUP BY Id 
```

如果您不知道日期范围的最大数量，那么您将无法使用单个 SQL 语句来执行此操作。相反，您需要使用动态 SQL。

我假设您可以将 row_number 添加到您的视图中，这是一个紧密的示例：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN row_number = ', 
      row_number, 
      ' THEN date_from END) date_from', 
      row_number)
  ),
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN row_number = ',  
      row_number, 
      ' THEN date_to END) date_to',  
      row_number)
  ) INTO @sql
FROM YourView;

SET @sql = CONCAT('SELECT  ID, ', 
                   @sql, ' 
                   FROM    YourView
                   GROUP   BY ID');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:53:36.127

回答马克的问题会有所帮助。

> 这是哪个 RDBMS - MySQL、Oracle、SQLServer...？此外，您是否需要每个 id 超过三个 date_from、date_to 对？

使用 t-sql，我明确处理 3 个级别。如果您希望它是动态的，则需要动态创建查询。

```
DECLARE @staging TABLE
(
    id int NOT NULL,
    date_from datetime NOT NULL,
    date_to datetime NOT NULL,
    step int
)

INSERT INTO @staging
SELECT id, date_from, date_to,
    ROW_NUMBER() OVER(PARTITION BY id ORDER BY date_from, date_to)
FROM tblTemp

-- below is static for 3 levels, make below dynamic to match what you want
SELECT t1.id, t1.date_from, t1.date_to, t2.date_from, t2.date_to, t3.date_from, t3.date_to
FROM @staging t1 LEFT OUTER JOIN
    @staging t2 ON t1.id = t2.id AND t2.step = 2 LEFT OUTER JOIN
    @staging t3 ON t2.id = t3.id AND t3.step = 3
WHERE t1.step = 1 
```

测试@http [://sqlfiddle.com/#!3/9daae /4/0](http://sqlfiddle.com/#!3/9daae/4/0)

# xpages - xpages xp:messages 和隐藏输入的计时器功能

> ID：14837997
> 
> 赞同：0
> 
> 时间：2013-02-12T17:12:37.590
> 
> 标签：xpages

我正在使用隐藏输入来存储用于在隐藏输入中显示计算值的消息。我在 postSaveDocument 的隐藏输入中添加了一个消息字符串，以显示文档已成功保存。作为来自经典 Notes 开发的新手，我想知道如何只在预定的时间内播放这个节目，比如 5 秒，然后离开。那么如何在 postSave 时间过去后将隐藏输入的值更改为“”。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:41:43.783

有很多方法可以做到这一点。一种是在您的输入字段中有消息时运行此 CSJS：

```
setTimeout('dojo.byId("#{id:divMessage}").innerHTML = ""', 5000); 
```

我不太明白哪个元素正在显示您的消息（因为您在谈论隐藏输入），但我认为它是 a `div`or `span`。

要设置输入字段值，您将使用：

```
dojo.byId("#{id:inpMyInput}").value = "" 
```