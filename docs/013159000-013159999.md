# StackOverflow 问答 13159000-13159999

# android - 我是否正确 Robolectric 现在不支持 Spinner

> ID：13159006
> 
> 赞同：0
> 
> 时间：2012-10-31T13:24:01.953
> 
> 标签：android, unit-testing, junit, robolectric

尝试使用 Spinner 测试 Dialog 并得到：

```
NullPointerException: can't get shadow for null 
```

我说 Robolectric 现在不支持 Spinner 是否正确？

也不能为它注册影子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:01:38.557

我的错-我嘲笑了所有者的活动。这就是 Dialog 无法充气的原因

# protocols - 在 xcode 4.5 中找不到 NSUserNotificationCenter 的协议声明

> ID：13159013
> 
> 赞同：0
> 
> 时间：2012-10-31T13:24:26.817
> 
> 标签：protocols, nsusernotification

我正在尝试实现一个简单的通知应用程序，我的机器上有一个 xcode 4.5。我创建了一个空应用程序并添加了一个派生自 NSObject 的类，但是当我想为我的类实现 NSUserNotificationCenter 协议时，编译器抛出错误：找不到 NSUserNotificationCenter 的协议声明。我确实检查了 Foundation/foundation.h 文件，如果我尝试转到 NSUserNotification.h 文件的源代码，则在该文件中显示未找到符号。

我是 iPhone 开发的新手，我如何确保我有一个适用于 NSUserNotificationCenter 的正确 sdk/ 框架。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:27:24.110

您提到是 iPhone 开发的新手，所以我假设您正在尝试在 iOS 应用程序中使用 NSUserNotificationCenter。

NSUserNotification 是 Mac OSX SDK 的一部分，用于在 Mountain Lion 中引入的通知中心显示通知。

如果你想在 iOS 上实现类似的功能，你必须使用 UILocalNotification 来获取本地通知。检查 Apple 文档：[本地和推送通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)。

# jsf - 如何在 headerText 属性中添加图像 ?

> ID：13159014
> 
> 赞同：6
> 
> 时间：2012-10-31T13:24:27.560
> 
> 标签：jsf, primefaces

![在此处输入图像描述](../Images/7b6b5b5a310ff2f3abe5ba552af41ec2.png)

如何在 headerText 属性中添加图像`<p:column>`？

```
<p:dataTable id="tableId" var="list" value="#{beanRequest.list}" >
    <p:column headerText="Date">
        <h:outputText value="#{list.date}"  />
    </p:column>
    p:column headerText="A">
        <h:outputText value="#{list.a}" />
    </p:column>
    <p:column headerText="????????image here?????????">
        <h:outputText value="#{list.b}"/>
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:28:20.227

改为用于`<f:facet name="header">`指定非简单文本内容。

```
<p:column>
    <f:facet name="header">
        <h:graphicImage name="weather.png" />
    </f:facet>
    ...
</p:column> 
```

# regex - 如果匹配数量不均匀，则从 vi 中删除行

> ID：13159016
> 
> 赞同：1
> 
> 时间：2012-10-31T13:24:34.087
> 
> 标签：regex, vi

我正在尝试使用正则表达式删除所有带有奇数元音的单词。

我试过像`[aeoui][^aeoui]*([aeoui][^aeoui]*[aeoui][^aeoui]*)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:34:05.960

怎么样：

```
(^|\W)([^aeoui\W]*([aeoui][^aeoui\W]*[aeoui][^aeoui\W]*)*[aeoui][^aeoui\W]*)(\W|$) 
```

编辑：我不知道 vi 的确切语法，但我希望使用的元素应该在 vi 中可用。

这个词本身可以在第二组中找到。

# linux - 具有 perl 脚本的唯一连接的 linux 用户

> ID：13159020
> 
> 赞同：0
> 
> 时间：2012-10-31T13:24:43.250
> 
> 标签：linux, perl, unique, connection

在任何给定时间，我都需要知道有多少唯一用户连接到 redhat 服务器。以下命令可以轻松完成此操作：

```
who | awk '{ print $1 }' | sort -ud | wc -l 
```

但是，我需要在 perl 脚本中使用此功能，以便网络监控实用程序可以在预定时间运行它，并跟踪一段时间内唯一连接的数量。

虽然我想用 perl 学习脚本，但我不知道自己学习脚本需要多长时间，而且我目前没有足够的时间专门学习 perl。对于创建具有上述功能的 perl 脚本的任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:35:18.327

要轻松地将其包装到 perl 脚本中，请执行以下操作：

```
#!/usr/bin/perl

$result = `who | awk '{ print \$1 }' | sort -ud | wc -l`;
print $result; 
```

一定要转义 $1，否则它将被 Perl 插值。

之后你用 $result 做什么取决于你到底想要做什么。您可以随着时间的推移对其进行平均，将每个结果存储在文件或数据库中......这实际上取决于您想要对结果执行的操作。如果您愿意提供更多详细信息，我可以提供一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:47:40.870

假设您想要一个返回用户数量的 Perl 子例程，您可以这样做：

```
 sub uniqueUsers {
    my %users;
    foreach my $line (split("\n", `who`)) {
        $users{(split(" ", $line))[0]}++;
    };
    return scalar(keys(%users));
 } 
```

如果你想要一个完整的独立 Perl 脚本，它只打印出唯一用户的总数并退出，添加

```
#!/usr/bin/perl 
```

作为开头的一行，并且

```
print uniqueUsers() . "\n"; 
```

作为最后一行，你就完成了。哦，如果您想独立运行文件，请使其可执行:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:04:18.187

**要获得计数：**

```
my $usercount = `who | awk '{print $1}' | sort | uniq | wc -l`; 
```

**要将实际用户名放入数组中：**

```
my @users = `who | awk '{print \$1}' | sort | uniq`; 
```

值得一提的是，学习 perl 基础知识相当快（对我来说，很有趣）。我建议从 O'Reilly Media 获取一份 Learning Perl 的副本。它有平装本和电子书两种形式，它是我读过的最好的学习任何东西的教科书。抓住那个，尽管时间很短，但你很快就能掌握基础知识。

# wordpress - 无法在我的自定义 wordpress 网站中导入 flash 横幅

> ID：13159021
> 
> 赞同：0
> 
> 时间：2012-10-31T13:24:46.107
> 
> 标签：wordpress, flash, psd

我已经从 PSD 创建了一个 wordpress 主题，现在我必须在我的侧边栏中插入 flash 代码，我尝试将它与 Text 小部件和 HTML Javascript Adder 一起放入，最后我将代码直接放入我的 sidebar.php...但横幅未显示在我的网站中。我想我错过了部分中的一些行，或者我错过了一些 wordpress 功能我所拥有的只是目标代码，它是这样的：

```
 <object type="application/x-shockwave-flash"
id="1234567890"
data="http://filemane.aspx"
width="160"
height="600">
<param name="movie" value="filename.aspx" />
<param name="quality" value="high" />
<param name="wmode" value="transparent" />
<param name="allowScriptAccess" value="always" />
<param name="allowNetworking" value="external" />
<a href="filename.aspx?[someshits]p;LNG=1" target="_blank">
<img src="[more shits]" style="border:0;" "></img></a>
</object> 
```

当我将此代码放在空白的 html 文件中时，它可以完美运行。你能帮我吗 ： ））

# silverlight - SIlverlight 5 RIA 组合子实体删除

> ID：13159025
> 
> 赞同：1
> 
> 时间：2012-10-31T13:24:50.747
> 
> 标签：silverlight, serialization, ria, changeset

我正在使用一个自定义库，它为我生成 DAL，类似于实体框架，但不完全相同，并且在使用 RIA 强加的它时遇到问题。我的问题是自定义 DAL 生成一个 IsPersisted 属性，该属性本质上标识实体是否具有相应的数据库记录。删除代码的关键部分看起来像......

```
if(this.IsPersisted)
    dataAccessor.Delete();
else
   throw new NotSupportedException("Delete not supported on unpersisted entities."); 
```

当我使用 RIA 在客户端和服务器之间生成介质时，问题就出现了。我有一个具有子组合属性的父类，例如

```
class Parent{
    ...
    [Include,Association("Parent_Child","ParentId","ParentId",IsForeignKey=false), Composition]
    public List<Child> Children{get{return (_children = _children??new List<Child>());}}
} 
```

在客户端代码中，如果我随后使用`parent.Children.Remove(child);`正确的实体操作将中继到服务器，但是`IsPersisted`当生成更改集时标志将更改为 false，这反过来会导致`NotSupportedException`.

我做了很多挖掘和探索。在检查返回服务器的实际网络流量后，我发现发送到服务器的 ChangeSet 实际上包含该缺陷。它正确地公开了原始实体和值，但是在变更集的 Delete 段中，我可以看到再次指定为 OriginalEntity 的相同实体（由相同身份验证），但这次除了 ID 之外所有值都是空的。

如果我跟踪 ChangeSet 的反序列化，我可以看到它实际上创建了两个独立的 Child 实例，首先正确填充，然后再次归零。然后，ChangeSet 仅保存子项的归零版本。

关于如何修复 RIA 发送的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:39:50.040

通过将 [RoundtripOriginal] 应用于 IsPersisted 属性，我设法解决了这个特定问题。

# python - 任何内置的工作“范围（len（lst））”？

> ID：13159041
> 
> 赞同：3
> 
> 时间：2012-10-31T13:25:30.537
> 
> 标签：python, python-3.x

我发现自己经常使用类似的东西

```
for i in range(len(lst1)): lst1[i] += lst2[i] 
```

是否有内置的等价物`range(len(.))`？

（顺便说一句，我使用 Python3。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T13:27:48.807

```
for i, e in enumerate(lst2):
    lst1[i] += e 
```

或者

```
lst1 = [e1 + e2 for e1, e2 in zip(lst1, lst2)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T13:27:23.093

更好的使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)：

```
 for index,x in enumerate(lst1):
      lst1[index] += lst2[index] 
```

`enumerate()`返回一个`enumerate`包含 的对象，其中`tuples`元组的第一项是索引，第二项是元素。（默认情况下索引从 0 开始，您可以通过将可选参数传递给 来更改它`enumerate()`）

**例子：**

```
In [50]: lst1=['a','b','c','s']

In [51]: list(enumerate(lst1))         #default index values, i.e 0
Out[51]: [(0, 'a'), (1, 'b'), (2, 'c'), (3, 's')]

In [53]: list(enumerate(lst1,1))       #index started at 1 
Out[53]: [(1, 'a'), (2, 'b'), (3, 'c'), (4, 's')] 
```

# wordpress - Wordpress 永久链接设置和 htaccess 帖子不可用

> ID：13159045
> 
> 赞同：0
> 
> 时间：2012-10-31T13:25:42.223
> 
> 标签：wordpress, configuration

我在我的 WordPress 博客上发布了 3 篇文章。而且，最初，我为那些使用默认链接，比如

[http://example.com/?p=74](http://example.com/?p=74)

然后我决定在 WordPress 面板的永久链接设置中将此 URL 更改为永久链接。

我已经为 worpress 提供了对我的 .htaccess 文件的访问权限，因此一旦我更改设置，它就能够通过一些内容填充这个文件。所以，没关系。

之后，我将设置更改为使用 perm-link-pattern，如下所示：/%postname%/

1.htaccess 被 WordPress 更改

2 页面中的帖子链接已更改

3.**但是**，当点击这些修改过的链接时，它**会转到未定义的内容**（此 url**没有**任何页面），即使创建新帖子（但不仅仅是使用旧帖子）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:26:38.287

固定的。互联网上有 1000 篇关于此的文章，但所有关于细节的...

所以，就我而言：

1.  sudo vim /etc/apache2/sites-available/default

2.  并确保您拥有“AllowOverride All”

> ```
> ...
>  <Directory /var/www/my-site>
>                 Options Indexes FollowSymLinks MultiViews
>                 AllowOverride All
>                 Order allow,deny
>                 allow from all
>  </Directory>
>  ... 
> ```

然后重新启动 Apache，一切正常。

# python - GAE/Python 请求之间的异步数据库访问

> ID：13159051
> 
> 赞同：0
> 
> 时间：2012-10-31T13:25:58.280
> 
> 标签：python, google-app-engine, asynchronous, google-cloud-datastore

我正在尝试优化我的 GAE webapp 的延迟。

该应用程序有两个请求，通常一个接一个。

在第一个请求期间启动异步 db/memcache 请求然后在以下请求中使用其结果是否安全？

（我知道第二个请求可能会命中另一个实例。它将被视为缓存未命中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:00:26.520

您不能在一个请求中启动异步 API 调用并在另一个请求中获取其结果。HTTP 服务基础设施将等待请求中启动的所有 API 调用完成，然后再发回 HTTP 响应；表示异步 API 调用的数据结构在第二个请求中将无用（即使它命中同一个实例）。

您可以尝试 Appstats 来确定您的请求正在发出哪些 API 调用，看看您是否可以避免一些、对某些使用 memcache 或并行化。

您还可以使用在数据存储 API 中集成 memcache 的 NDB。

# ios - 如何在 Xcode 4.5 GM 中重建第三方库

> ID：13159052
> 
> 赞同：2
> 
> 时间：2012-10-31T13:25:57.843
> 
> 标签：ios, xcode, ios6, core-plot, armv7

我正在尝试在 iOS 应用程序中使用一个名为“CorePlot”的库，***在将 Xcode 升级到 Xcode 4.5.1 以支持 ios6 之前一切都很好。***

升级后出现此错误

> 文件是通用的（3 个切片）但不包含 a(n) armv7s 切片：Lib/libCorePlot-CocoaTouch.a 用于架构 armv7s

现在经过长时间搜索并取决于此链接

[iOS - 升级到 Xcode 4.5 后出现链接器错误，可能与 Core Plot 相关](https://stackoverflow.com/questions/12411077/ios-linker-error-after-upgrading-to-xcode-4-5-possibly-core-plot-related)

解决方案是使用新的 Xcode 4.5GM*重建库*

**但是如何进行重建过程？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:33:14.097

我也有同样的问题。我所做的是在我的项目目标中，在构建设置中，在仅构建活动架构下，将其更改为是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:35:20.470

我的一个静态库也有类似的问题。基本上，您需要重新编译库以支持 armv7s，但与此同时，您可以从构建设置中删除该要求。

在您的项目设置中，查找架构，我猜它说，“标准（armv7，armv7s）”删除它并替换为“armv7”，您的项目应该编译。

# c++ - C++ 中查询准备阶段的 SQLITE_ERROR

> ID：13159054
> 
> 赞同：0
> 
> 时间：2012-10-31T13:26:00.493
> 
> 标签：c++, sqlite

```
#include <iostream>
#include <stdlib.h>
#include <sstream>
#include "sqlite3.h"
#include <stdio.h>

const char dbName[] = {"/trial.sqlite"};

std::string quoteSql( std::string &s );

int main(){

std::string szSQL;
std::string tableName;

tableName = "Nodes";
int result;

const char *pzTest;

sqlite3_stmt *statement;

sqlite3 *db;

std::string nodename;

int count;

nodename = "KMLB1";

szSQL = "SELECT COUNT(*) FROM Nodes WHERE NODENAME = ?";

result = sqlite3_open(dbName,&db);
if(result){
    sqlite3_close(db);
    return 0;
}

result = sqlite3_prepare_v2(db,szSQL.c_str(),strlen(szSQL.c_str()),&statement,&pzTest);
if(result){
    sqlite3_close(db);
    return 0;
}

sqlite3_bind_text(statement,1,nodename.c_str(),-1,0);

result = sqlite3_step(statement);
if(result){
    sqlite3_close(db);
    return 0;
}
count = sqlite3_column_int(statement, 0);
if(count == 0){
    sqlite3_close(db);
    return 0;
}

sqlite3_finalize(statement);
sqlite3_close(db);

return 0;
}

std::string quoteSql( std::string &s ) {
return std::string("'") + s + std::string("'");
} 
```

我在上面编写了一个实验性和基本的 C++ SQLite 控制台应用程序。编译阶段没有问题，但我在 sqlite_prepare_v2() 函数的行上得到 SQLITE_ERROR 状态代码。我什至无法找到问题的原因。

此外，我想知道，如果我可以通过此代码获得 NODENAME 为 KMLB1 的行数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:45:50.703

用于[`sqlite3_errmsg`](http://www.sqlite.org/c3ref/errcode.html)找出问题所在。

请注意，返回值`SQLITE_ROW`和`SQLITE_DONE`of[`sqlite3_step`](http://www.sqlite.org/c3ref/step.html)不为零，并且[`sqlite3_column_int`](http://www.sqlite.org/c3ref/column_blob.html)不会返回错误代码。

# clojure - 为什么这两个序列不相等？

> ID：13159059
> 
> 赞同：0
> 
> 时间：2012-10-31T13:26:13.253
> 
> 标签：clojure, leiningen

我的问题是为什么我的预期和生成的序列不同？目视检查时我不明白为什么。

在 lein 测试中，我正在比较函数 gen-map-keys 返回的序列

```
(defn gen-map-keys
  "Takes a sequence, and turns it into viable keys for a map.
   We opt to change spaces ' ' to dashes '-'."

  [in-seq]
  (map #(-> % cstr/trim (cstr/replace " " "-") keyword) in-seq)) 
```

针对预期的序列。这是测试的 core.clj 中的序列

```
(deftest test-kind-stat
  (let [existing-fnam "project.clj"
   existing-dir "test"
   non-existing-fnam "file-does-not-exist.not-exist"
   test-key-spaces1 '("COVERAGE DESCRIPTION" "BIL MO")
   test-key-spaces2 '("rectype" "parcel_id1" "parcel_id2" "parcel_id3" "house_num" alt_house_num")

   test-keys       '("key1" "key2" "key3")]

   (is (= '(:key1 :key2 :key3) (gen-map-keys test-keys)))
   (is (= '(:COVERAGE-DESCRIPTION :BILL-MO) (gen-map-keys test-key-spaces1)))
   (is (= '(:rectype :parcel_id1 :parcel_id2 :parcel_id3 :house_num :alt_house_num)            (gen-map-keys test-key-spaces2))) 
```

这是 lein 测试的输出：

```
FAIL in (test-kind-stat) (core.clj:33)
expected: (= (quote (:COVERAGE-DESCRIPTION :BILL-MO)) (gen-map-keys test-key-spaces1))
  actual: (not (= (:COVERAGE-DESCRIPTION :BILL-MO) (:COVERAGE-DESCRIPTION :BIL-MO)))

Ran 10 tests containing 41 assertions.
1 failures, 0 errors. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:30:38.743

显然`:parcelid2`不是`:parcel_id2`？

# java - 延迟将对象移动到另一个对象

> ID：13159060
> 
> 赞同：1
> 
> 时间：2012-10-31T13:26:19.867
> 
> 标签：java, android, libgdx

在我的 2D 游戏中，我有随机出现的英雄和硬币。当英雄获得能量提升时，他的速度会增加，因此他会飞得更快。上电激活 10 秒。当通电激活时，如果他靠近硬币，硬币应该跟随并与他碰撞，就像在 Temple Run 中一样。我没有使用任何 box2d 类型的物理。对于碰撞，我使用矩形相交检查，碰撞不是这里的问题。

如何实现这种硬币像磁铁一样跟随英雄的效果？

我目前的实现是 - 检查硬币组中每个硬币与英雄之间的距离。如果满足硬币移动的目标距离，则根据英雄的速度更改 x 上的硬币速度，但这并没有按预期工作。如何应用冲动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:56:13.713

将其更改为在距离的倒数上工作。作为参考，[牛顿（大部分是正确的）万有引力定律](http://en.wikipedia.org/wiki/Newton's_law_of_universal_gravitation)：

![](../Images/12076be370aca1c52e82e8e30ea7f5eb.png)

哪里`F`是力量，`G`是一些常数，`r`是半径（分离距离），是硬币的质量，是英雄的质量。`m[1]``m[2]`

我们也知道[牛顿第二运动定律](http://en.wikipedia.org/wiki/Newtons_laws_of_motion)：

![](../Images/5ca0d54252a47fc9c9fe0ac7ee3bbcf1.png)

哪里`F`是力，`*m*`是硬币的质量，是硬币`a`的加速度。

我们可以结合这两个方程得到：

![](../Images/b211152ac7fa576e0619bb7441444473.png)

从那里，我们知道英雄的“质量”将与英雄的面积成正比（2D 对象并没有真正的质量，但让我们假装一秒钟），换句话说：

![](../Images/6459daccf4cb8ce42790ca6c2bfa8212.png)

假设你在所有方向上平等地缩放你的英雄，这意味着你的英雄的“质量”将与 size scale factor 的平方成正比`S`，如下所示：

![](../Images/d5f06e49ea99b5d5345daf54480d2ef6.png)

这一切都归结为：

![](../Images/856654b62b4e728a3ce353aef2150ca5.png)

加速度在哪里`a`（您要寻找的数量），`S`是英雄大小的比例因子，`d`是英雄到硬币的距离，并且`k`是一个常数因子（只是捏造它，直到硬币以正确的速度移动）。

# ipad - ipad 上的 safari - 图像大小调整

> ID：13159063
> 
> 赞同：1
> 
> 时间：2012-10-31T13:26:31.803
> 
> 标签：ipad, safari, retina-display, easeljs

我在 Safari 中的 ipad 上使用easeljs。 问题是，当我将每个帧的大小设置为我应该得到的宽度时

，我有多达 30 个帧的精灵，但我实际得到的是，我认为这是因为 但是当我设置每个帧时帧到然后我实际得到的宽度是 800*30/4 最终将尺寸减小到相同的 400*30/2 所以当我在画布上渲染这个精灵时，它的宽度像素化 了可以做什么？

`400x225``400*30``400*30/2``retina display`
`800x550`
`600`

# image - 无权查看图片

> ID：13159065
> 
> 赞同：1
> 
> 时间：2012-10-31T13:26:41.980
> 
> 标签：image, permissions, xampp, localhost, http-status-code-403

我正在本地 Web 服务器上运行一个项目，但由于某种原因我无法查看图像（放入“img/”）。我试图更改文件夹，但它是同一件事，所以我想它与实际图像有关。

我能做些什么来解决这个问题？

*注意：*我在某处读过有关更改 .htaccess 文件的信息，但我似乎没有该文件。

*注意 2：*我在 Mac OS 上

```
'You don't have permission to access the requested object. It is either read-protected or not readable by the server.

If you think this is a server error, please contact the webmaster.'

Error 403

localhost
Wed Oct 31 14:15:57 2012
Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:04:17.543

简单来说，HTTP 状态代码 403 表示禁止访问……这意味着您没有足够的权限/访问权限来执行所需的操作，在这种情况下是从*img*文件夹中读取图像。

在这种情况下，您不需要*.htaccess* ..您需要检查*img*文件夹的目录权限并将其设置为*755(-rwxr-xr-x)* ..因为您在 Mac 上，您可以通过[Mac OS X关于权限故障排除的知识库文章](http://support.apple.com/kb/HT2963)，了解如何为 Mac 设置目录权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:24:46.150

好的，这是我的诚实猜测，你应该做什么：

*   我假设您正在使用某种 FTP 程序将这些文件发送到服务器

在该程序中，导航到存储文件的文件夹并检查此类文件的属性。以下是 webFTP 访问我的网站的示例： ![文件概览](../Images/c1b08d8a4969acef7b91d6fa662750a1.png)

如果“Perms”不同，您必须更改它们 - 主要由 linux 命令“CHMOD”完成（因为大多数 Web 服务器在 linux 上运行）。我不知道您使用的是哪种 FTP 程序，但主要是通过右键单击 -> 属性来完成。

为了进一步了解这个尝试谷歌搜索“如何在 X 中 chmod 文件”，其中 X 是您的 FTP 程序的名称。

然后，您必须确保文件属性设置如下： ![文件属性](../Images/f9340bef9b10f0f9fc6d5a8d54fbd846.png)

通常 - 其他人和组具有读取权限

# stata - Stata 相当于 R 的 complete.cases 函数？

> ID：13159069
> 
> 赞同：3
> 
> 时间：2012-10-31T13:26:55.530
> 
> 标签：stata

如标题所示，我试图找到与 R`complete.cases`函数等效的 Stata。

到目前为止我最接近的是使用

```
generate sample = e(sample) 
```

在运行回归并删除案例或`if`在这个新生成的变量上使用子句之后（从[这里](http://www.ats.ucla.edu/stat/stata/faq/e_sample.htm)偷来的解决方案）。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:59:27.693

我不确定您在 R 中的使用习惯如何`complete.cases`，但这里有一个示例，其中包含 R 中的应用程序和等效的 Stata ( `rmiss2`)：

首先，让我们在 R 中补一些数据进行演示。我们将把它保存为一个`dta`文件，以后可以在 Stata 中使用。

```
library(foreign)
set.seed(1)
dat <- data.frame(one = rnorm(15),
                  two = sample(LETTERS, 15),
                  three = rnorm(15),
                  four = runif(15))
dat <- data.frame(lapply(dat, function(x) { x[sample(15, 5)] <- NA; x }))
write.dta(dat, file="completeCases.dta") 
```

数据如下所示：

```
dat
#           one  two       three      four
# 1          NA    M  0.80418951 0.8921983
# 2   0.1836433    O -0.05710677        NA
# 3  -0.8356286    L  0.50360797 0.3899895
# 4          NA    E          NA        NA
# 5   0.3295078    S          NA 0.9606180
# 6  -0.8204684 <NA> -1.28459935 0.4346595
# 7   0.4874291 <NA>          NA        NA
# 8   0.7383247    C -0.23570656 0.3999944
# 9          NA    N -0.54288826 0.3253522
# 10 -0.3053884 <NA>          NA 0.7570871
# 11         NA    R -0.64947165 0.2026923
# 12  0.3898432 <NA>          NA        NA
# 13         NA    K  1.15191175        NA
# 14 -2.2146999 <NA>  0.99216037 0.2454885
# 15  1.1249309    Q -0.42951311 0.1433044 
```

在数据上运行`complete.cases`只是给我们一个`TRUE`s 和`FALSE`s 的向量，告诉我们每一行是否代表一个完整的案例。

```
complete.cases(dat)
#  [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE 
#  [9] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE 
```

更常见的`complete.cases`是，对我们的数据进行子集化很有用，如下所示：

```
dat[complete.cases(dat), ]
#           one two      three      four
# 3  -0.8356286   L  0.5036080 0.3899895
# 8   0.7383247   C -0.2357066 0.3999944
# 15  1.1249309   Q -0.4295131 0.1433044 
```

或者，在这里，仅根据前三列是否完整进行子集化。

```
dat[complete.cases(dat[, 1:3]), ]
#           one two       three      four
# 2   0.1836433   O -0.05710677        NA
# 3  -0.8356286   L  0.50360797 0.3899895
# 8   0.7383247   C -0.23570656 0.3999944
# 15  1.1249309   Q -0.42951311 0.1433044 
```

* * *

现在，让我们切换到Stata。

首先，`rmiss2`如果您还没有安装它。

```
. findit rmiss2 
```

其次，加载我们在 R 中创建的 dta 文件。

```
. use "path\to\completeCases.dta", clear 
```

第三，我们将使用`rmiss2`生成一个名为“nmis”的新列，它告诉我们每种情况下缺少多少变量。

```
. egen nmis = rmiss2(one two three four)
. list

     +-----------------------------------------------+
     |       one   two       three       four   nmis |
     |-----------------------------------------------|
  1\. |         .     M    .8041895   .8921983      1 |
  2\. |  .1836433     O   -.0571068          .      1 |
  3\. | -.8356286     L     .503608   .3899895      0 |
  4\. |         .     E           .          .      3 |
  5\. |  .3295078     S           .    .960618      1 |
     |-----------------------------------------------|
  6\. | -.8204684     .   -1.284599   .4346595      1 |
  7\. |  .4874291     .           .          .      3 |
  8\. |  .7383247     C   -.2357066   .3999944      0 |
  9\. |         .     N   -.5428883   .3253522      1 |
 10\. | -.3053884     .           .   .7570871      2 |
     |-----------------------------------------------|
 11\. |         .     R   -.6494716   .2026923      1 |
 12\. |  .3898432     .           .          .      3 |
 13\. |         .     K    1.151912          .      2 |
 14\. |   -2.2147     .    .9921604   .2454885      1 |
 15\. |  1.124931     Q   -.4295131   .1433044      0 |
     +-----------------------------------------------+ 
```

最后，我们可以`keep if...`用来删除缺少数据的案例。

```
. keep if (nmis == 0)
(12 observations deleted)

. list

     +-----------------------------------------------+
     |       one   two       three       four   nmis |
     |-----------------------------------------------|
  1\. | -.8356286     L     .503608   .3899895      0 |
  2\. |  .7383247     C   -.2357066   .3999944      0 |
  3\. |  1.124931     Q   -.4295131   .1433044      0 |
     +-----------------------------------------------+ 
```

与 一样`complete.cases`，您还可以指定要检查哪些列的完整性。

```
. use "path\to\completeCases.dta", clear
(Written by R.              )

. egen nmis = rmiss2(one two three)

. keep if (nmis == 0)
(11 observations deleted)

. list

     +-----------------------------------------------+
     |       one   two       three       four   nmis |
     |-----------------------------------------------|
  1\. |  .1836433     O   -.0571068          .      0 |
  2\. | -.8356286     L     .503608   .3899895      0 |
  3\. |  .7383247     C   -.2357066   .3999944      0 |
  4\. |  1.124931     Q   -.4295131   .1433044      0 |
     +-----------------------------------------------+ 
```

* * *

### 更新

应该注意的是，这`keep if...`是“破坏性的”——如果不重新加载 dat 文件，您将无法返回原始数据集。因此，`if`如下使用更安全：

```
. summarize one two three four if  nmis == 0

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         one |         3    .3425423    1.038475  -.8356286   1.124931
         two |         3    6.666667    5.507571          1         12
       three |         3   -.0538706    .4924195  -.4295131    .503608
        four |         3    .3110961     .145398   .1433044   .3999944 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:06:32.627

我认为你说得对。我通常看到这实现了两种方式之一。

```
regress y x1 x2
marksample touse
summarize y x1 x2 if `touse' 
```

或者完全绕过 tempvar `touse`。

```
regress y x1 x2
summarize y x1 x2 if e(sample) 
```

# visual-studio-2010 - 初次签入后 git 忽略文件

> ID：13159072
> 
> 赞同：0
> 
> 时间：2012-10-31T13:26:59.803
> 
> 标签：visual-studio-2010, git

我有一个在 Git 中跟踪的视觉工作室项目。这是下拉源代码并能够加载项目所必需的。但是，.csproj 文件中有一些特定于用户的信息，对于不断签入和替换人们的本地更改非常烦人。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:29:19.410

您必须在 .gitignore 中添加文件，然后从 git repo 中删除它们：

```
git rm .csproj 
```

但请注意，如果新开发人员需要一些通用配置，他们将需要自己获取通用内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:28:38.583

只需在文件中添加文件名或掩码`.gitignore`。`.gitignore`应该事后提交。

# android - 适用于 iOS 和 Android 的 AES 加密

> ID：13159078
> 
> 赞同：-4
> 
> 时间：2012-10-31T13:27:22.097
> 
> 标签：android, iphone

我们正在 android 和 iPhone 中创建相同的项目。现在的问题是我们需要使用 aes 加密形式的 web 服务向 php 服务器发送一些信息。我们都实现了它，但结果不同，所以有一个通用的 AES 加密方法会产生相同的结果，并且可以在 php 服务器上解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:44:51.947

您确定您使用的是完全相同的 AES 模式吗？我建议检查一下。（例如，可能在一个您使用 Padding 而另一个没有，或者一个处于[CBC](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)模式而另一个不是）

# c# - 任务怎么做 变成一个int？

> ID：13159080
> 
> 赞同：136
> 
> 时间：2012-10-31T13:27:25.843
> 
> 标签：c#, .net, asynchronous, .net-4.5, c#-5.0

我们有这个方法：

```
async Task<int> AccessTheWebAsync()
{ 
    HttpClient client = new HttpClient();

   Task<string> getStringTask = client.GetStringAsync("http://msdn.microsoft.com");

   // You can do work here that doesn't rely on the string from GetStringAsync.
   DoIndependentWork();

   string urlContents = await getStringTask;
   //The thing is that this returns an int to a method that has a return type of Task<int>
   return urlContents.Length;
} 
```

`Task<int>`和之间是否发生隐式转换`int`？如果不是，那么发生了什么？它是如何实现工作的？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-10-31T13:32:07.840

> Task<> 和 int 之间是否发生隐式转换？

没有。这只是`async`/`await`工作方式的一部分。

任何声明为的方法`async`都必须具有以下返回类型：

*   `void`（尽可能避免）
*   `Task`（除了完成/失败通知之外没有结果）
*   `Task<T>``T`（对于异步方式类型的逻辑结果）

编译器会进行所有适当的包装。关键是您正在*异步*返回`urlContents.Length`- 您不能让方法只是 return `int`，因为实际方法将在遇到第一个`await`尚未完成的表达式时返回。因此，它会返回一个`Task<int>`which 将在异步方法本身完成时完成。

请注意，`await`相反 - 它将*a 解包*为`Task<T>`一个`T`值，这就是该行的工作方式：

```
string urlContents = await getStringTask; 
```

...但当然它会异步解开它，而只是 using`Result`会阻塞，直到任务完成。（`await`可以解开实现等待模式的其他类型，但`Task<T>`可能是您最常使用的类型。）

这种双重包装/展开使异步变得如此可组合。例如，我可以编写另一个异步方法来调用你的方法并将结果加倍：

```
public async Task<int> AccessTheWebAndDoubleAsync()
{
    var task = AccessTheWebAsync();
    int result = await task;
    return result * 2;
} 
```

（或者只是`return await AccessTheWebAsync() * 2;`当然。）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-07-16T04:36:56.147

不需要将 Task 转换为 int。只需使用任务结果。

```
int taskResult = AccessTheWebAndDouble().Result;

public async Task<int> AccessTheWebAndDouble()
{
    int task = AccessTheWeb();
    return task;
} 
```

如果可用，它将返回值，否则返回 0。

# php - 从多个表中回显数据 PHP 搜索表单

> ID：13159082
> 
> 赞同：0
> 
> 时间：2012-10-31T13:27:44.397
> 
> 标签：php, sql, search, post, sql-like

我正在尝试制作一个搜索表单来显示我的数据库中的数据，其中数据的名称就像搜索词一样。可悲的是，我试图让它从多个表中回显信息：

专辑表：

```
albumName      albumArt       artistID
----------    ----------      ---------
album1        art1.jpg        1
album2        art2.jpg        2
album3        art3.jpg        3 
```

歌曲表：

```
songName      artistID       
--------      ---------       
song1         1          
song2         1         
song3         2         
song4         3         
song5         3 
```

示例 PHP：

```
$search = $_POST['search'];    
$sql1 = "SELECT * FROM songs WHERE songName LIKE '%$search%'";    
$searchResult = mysql_query($sql1);    

while ($result = mysql_fetch_array($searchResult)) {
echo "<tr>
     <td>".$result['songName']."</td>
     <td>".$result['albumName']."</td>
     </tr>";
}
?> 
```

我不确定内部连接是否可以解决问题，我已经阅读了尽可能多的教程，但没有一个我可以理解或使用。

搜索词来自另一个页面上的表单，这只是处理页面，但它也回显了信息。

如果有人搜索“S”，我需要查询返回类似于下面的内容：

```
songName      albumname       artistName
----------    ----------      ---------
song1         album1          artist1
song2         album2          artist2
song3         album3          artist3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:30:51.970

我能想象的最直接的加入是这样的：

```
SELECT * FROM songs 
INNER JOIN albums USING (artistID)
WHERE songName LIKE '%$search%' 
```

顺便说一句，你真的应该正确地逃避你的变量：

```
$sql = "SELECT * FROM songs 
    INNER JOIN albums USING (artistID)
    WHERE songName LIKE '%" . mysql_real_escape_string($search) . "%'"; 
```

并且有些字符有 的含义`LIKE`，例如`%`and `_`; 考虑逃避那些。

```
str_replace(
    array('%', '_'), 
    array('\%', '\_'), 
    mysql_real_escape_string($search)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:32:41.447

尝试以下操作：

```
$search = $_POST['search'];    
$sql1 = "SELECT albumns.*, songs.songName FROM songs INNER JOIN albums ON albumns.artistID = songs.artistID WHERE songName LIKE '%$search%'";    
$searchResult = mysql_query($sql1);    

while ($result = mysql_fetch_array($searchResult)) {
echo "<tr>
     <td>".$result['songName']."</td>
     <td>".$result['albumName']."</td>
     </tr>";
}
?> 
```

你应该得到你需要的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:33:11.287

您应该使用 ArtistId 字段将这两个表连接在一起（您可能还有第三个包含艺术家姓名的表，因为您没有在此处显示）。

所以你的选择语句应该是这样的：

```
$sql1 = "SELECT songs.songName, songs.albumName, albums.* FROM songs, albums WHERE songs.artistId = albums.artistId and songs.songName LIKE '%$search%'"; 
```

# iphone - 想在我的应用中显示 HUD

> ID：13159083
> 
> 赞同：1
> 
> 时间：2012-10-31T13:27:45.483
> 
> 标签：iphone, ios, mbprogresshud

我已经创建了一个录制视频并将其存储在服务器上的应用程序，现在我想在我的应用程序中添加 HUD，这个 HUD 将一直显示，直到我的数据存储在服务器上。

我正在使用 MKNetworkKit 将数据发布到服务器。

我试过这个：

```
- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info {

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    //NSLog(@"medea type is: %@ ",mediaType);

    if ([mediaType isEqualToString:@"public.movie"]){
      //  NSLog(@"got a movie");
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        webData = [NSData dataWithContentsOfURL:videoURL];

    }

    [self dismissModalViewControllerAnimated:NO];

    // Handle a movie capture
    if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) {

        NSString *moviePath = [[info objectForKey:
                                UIImagePickerControllerMediaURL] path];
        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
            UISaveVideoAtPathToSavedPhotosAlbum (moviePath,self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
        } 
    }

    self.flUploadEngine = [[fileUploadEngine alloc] initWithHostName:@"reneveledat.net" customHeaderFields:nil];

    NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"testApp", @"appID",
                                       nil];      
    self.flOperation = [self.flUploadEngine postDataToServer:postParams path:@"/dilipvideotest/savefile.php"];
    [self.flOperation addData:webData forKey:@"uploadfile" mimeType:@"video/mov" fileName:@"upload.mov"];

    [self.flOperation onCompletion:^(MKNetworkOperation *operation) {

        NSLog(@"response string is : %@", [operation responseString]);

        response = [operation responseString] ;
[HUD removeFromSuperview];
        /*   
         This is where you handle a successful 200 response
         */
    }     
                           onError:^(NSError *error) {
                               NSLog(@"error : %@", error);
                               UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                               message:[error localizedDescription]
                                                                              delegate:nil
                                                                     cancelButtonTitle:@"Dismiss"
                                                                     otherButtonTitles:nil];
                               [alert show];        
                           }];

    [self.flUploadEngine enqueueOperation:self.flOperation ];

    // for HUD

    HUD = [[MBProgressHUD alloc] initWithView:self.view];
    HUD.labelText = @"Doing funky stuff...";
    HUD.detailsLabelText = @"Just relax";
    HUD.mode = MBProgressHUDModeAnnularDeterminate;
    [self.view addSubview:HUD];

    [HUD showWhileExecuting:@selector(doSomeFunkyStuff) onTarget:self withObject:nil animated:YES];

   }

- (void)doSomeFunkyStuff {
    float progress = 0.0;

    while (progress < 1.0) {
        progress += 0.01;
        HUD.progress = progress;
        usleep(50000);
    }
} 
```

**编辑**

现在完成了

我刚刚添加了这段代码

```
[HUD removeFromSuperview]; 
```

在

```
[self.flOperation onCompletion:^(MKNetworkOperation *operation) {

            NSLog(@"response string is : %@", [operation responseString]);

            response = [operation responseString] ;
    [HUD removeFromSuperview];
            /*   
             This is where you handle a successful 200 response
             */
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:57:19.417

您正在视图中添加 MBProgressHUD。

数据上传到服务器后，您需要将其删除。

所以你需要在完成块和错误块内编写删除代码。

像：

```
[self.flOperation onCompletion:^(MKNetworkOperation *operation)
{
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    NSLog(@"response string is : %@", [operation responseString]);
    response = [operation responseString] ;
}     
onError:^(NSError *error)
{
   [MBProgressHUD hideHUDForView:self.view animated:YES];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];        
}]; 
```

# c# - 获取当前用户 ASP.NET Membership 的 ID

> ID：13159087
> 
> 赞同：14
> 
> 时间：2012-10-31T13:27:51.667
> 
> 标签：c#, asp.net, membership-provider

你们如何设法使用 ASP.NET Membership Provider 获取当前用户的 ID？我的应用程序是使用数据库优先方法的 MVC 3，因此我创建了自己的数据库，并且成员资格提供程序和角色提供程序正在使用我的表（自定义成员资格和角色提供程序）。

在我的一个页面（反馈）中，用户可以发送关于我的网站的反馈，如果他已连接，我想在插入时将 UserID 包含在表中。

但由于 ASP.NET Membership 是 IIdentity，我唯一可以访问的是名称。我不想使用名称在 2 个表之间创建链接，我想要 ID！

那么，对于这个非常简单的任务，您在应用程序中做了什么？我的意思是，在连接用户需要插入值的几乎每个页面中，我们都需要用户的 ID 来为用户表创建正确的外键，对吧？顺便说一句，我对这个 MVC 框架非常陌生，在此之前我使用的是 ASP.NET aspx，对于用户信息，我使用的是会话，它根据需要为我提供了当前 ID、名称和其他字段。由于这种使用 Session 对象的实现在共享主机方面给我带来了麻烦，我想使用真正的成员资格。

谢谢！

**编辑**

我想要的 ID 必须是整数（实际上，我想要 User 表中的 UserID 字段）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-31T13:33:17.647

试试这个;

```
MembershipUser mu = Membership.GetUser("username");
string userId = mu.ProviderUserKey.ToString(); 
```

对于当前登录的用户，您可以在不传递用户名的情况下使用；

```
string userId = Membership.GetUser().ProviderUserKey.ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-22T21:45:22.183

我想分享如何获取 Identity 2.0 的 UserId：

```
string UserId = System.Web.HttpContext.Current.User.Identity.GetUserId(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:33:06.763

我遇到了类似的问题。我（也出于其他原因）创建了一个基础 Controller 类，我的所有其他控制器都继承自该类。您可以让基类随时保存用户信息以供使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:33:44.610

假设您在 web.config 中为您的提供者正确配置了所有内容，并且由于您可以获得用户名，我建议：

```
Dim muser As MembershipUser = Membership.GetUser(userName) 
```

以下是有关 MembershipUser 对象的详细信息：http: [//msdn.microsoft.com/query/dev10.query ?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WEB.SECURITY.MEMBERSHIPUSER%29;k%28TargetFrameworkMoniker-%22 .NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-VB%29&rd=true](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WEB.SECURITY.MEMBERSHIPUSER%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-VB%29&rd=true)

名称以外的许多属性可用。您想要的 ID 字段称为“ProviderUserKey”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T13:40:32.253

这会是你的追求吗？

[来自asp.net会员身份验证的用户ID？](https://stackoverflow.com/questions/5888877/userid-from-asp-net-membership-authentication)

就我个人而言，我有自己的类，它封装了通过用户名以及我在应用程序中需要的任何自定义数据来检索这些详细信息。

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T14:07:33.830

要获取当前的用户 ID，您可以尝试以下操作

```
string currentUserId= Convert.ToString(Membership.GetUser().ProviderUserKey); 
```

# php - 使用 JSON 绘制具有多条线的单个 Google 折线图

> ID：13159088
> 
> 赞同：5
> 
> 时间：2012-10-31T13:27:52.347
> 
> 标签：php, javascript, mysql, json, google-visualization

我正在尝试根据从 mysql 数据库接收到的数据绘制折线图。从数据库中我有这些数据

![在此处输入图像描述](../Images/b94fbcdd35a789e8ae912764bedef8bd.png)

我想绘制一个谷歌折线图，将 x 轴作为销售日期，将 y 轴作为产品名称。但我希望每个产品都有多条生产线，就像这样。

![在此处输入图像描述](../Images/13212a2636608c23926e59f6c23eae0e.png)

我可以为单个产品绘制图表。但无法想象如何为同一张图表中的多个产品做到这一点。我正在使用 JSON 获取图表数据并使用 MySQL 数据库。任何帮助，教程将不胜感激。谢谢。

PS：我按照本教程制作了一个单线图。 [http://www.kometschuh.de/GoogleChartToolswithJSON.html](http://www.kometschuh.de/GoogleChartToolswithJSON.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:44:15.957

根据[此处](https://developers.google.com/chart/interactive/docs/gallery/linechart)的示例和文档，您需要创建图表的数据部分，如下所示：

```
 var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          ['2004',  1000,      400],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
        ]); 
```

`['Year', 'Sales', 'Expenses']`是`[x-axis, line 1, line 2, ... lineX]`

然后每个后续数组都是对应的数据。

在您链接的示例中，它将数据显示为 ['day', 'counts']，这对应于上述格式。

[您可以在此处](https://developers.google.com/chart/interactive/docs/gallery/linechart)的标题下看到此权利的表示`Data Format`

# java - 使用 JAXB 编组嵌套类

> ID：13159089
> 
> 赞同：8
> 
> 时间：2012-10-31T13:27:54.393
> 
> 标签：java, xml, jaxb

我正在尝试使用标准 JAXB 编组我设计的一些类，这些类都具有 void 构造函数，这是我第一次尝试在任何语言中使用 JAXB 或编组/解组，但据我所知，JAXB 应该能够编组他们没有 XSD。

课程如下：

```
@XmlRootElement(name="place")
class Place {
    @XmlAttribute
    //various fields and get set methods
    public Place() {          
    }
}

@XmlRootElement(name="Arc")
class Arc {
    // various fields and get set methods
    @XmlAttribute
    Place p;
    public setPlace(Place p) {
        // ...
    }

    public Arc() { 
    }
}

@XmlRootElement(name="Transition")
class Transition {
   Arc[] a;

   public Transition() {        
   }
} 
```

我可以编组`Place`类但不能编组`Arc`类，`Transition`我什至没有尝试过，类有`@XMLPropriety`标签，但是当它到达嵌套`Place`类时，JAXB 似乎也不明白要映射哪个 XML 对象。

如果我应该为嵌套类使用另一个标签，或者我忽略了另一个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:19:53.793

[**使用任何JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现来处理嵌套类不需要什么特别的事情。下面是一个完整的例子，其中只`@XmlRootElement`使用了一个注解：

**过渡**

```
package forum13159089;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
class Transition {

    Arc[] a;

    public Arc[] getA() {
        return a;
    }

    public void setA(Arc[] a) {
        this.a = a;
    }

} 
```

**弧**

```
package forum13159089;

class Arc {

    Place p;

    public Place getPlace() {
        return p;
    }

    public void setPlace(Place p) {
        this.p = p;
    }

} 
```

**地方**

```
package forum13159089;

class Place {

} 
```

**演示**

```
package forum13159089;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Transition.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13159089/input.xml");
        Transition transition = (Transition) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(transition, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<transition>
    <a>
        <place/>
    </a>
    <a>
        <place/>
    </a>
</transition> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)
*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)
*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

* * *

**注意：** `@XMLProperty`不是 JAXB 注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:49:41.767

这段代码对我有用。请检查。

```
 @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    public class First {

        @XmlElement
        private String name;
        @XmlElement
        private String surname;
        @XmlElement
        private String address;
            getters and setters
    }

    @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    public class Second {

        @XmlElement
        private String address1;
        @XmlElement
        private String address2;
        @XmlElement
        private String address3;
        @XmlElement
        private First first;
            getters and setters
    }

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Forth {

    @XmlElement
    private String address6;
    @XmlElement
    private String address7;
    @XmlElement
    private Second[] array = new Second[2];
        getters and setters
}

    public static void main(String arsg[]) throws Exception 
        {
            First first =  new First();
        first.setName("Kshitij");
        first.setSurname("Solanki");
        first.setAddress("Nadiad");

        Second second = new Second();
        second.setAddress1("Kshiutij_1");
        second.setAddress2("Kshiutij_2");
        second.setAddress3("Kshiutij_3");
        second.setFirst(first);

        Second second1 = new Second();
        second1.setAddress1("Kshiutij_1");
        second1.setAddress2("Kshiutij_2");
        second1.setAddress3("Kshiutij_3");
        second1.setFirst(first);

        Second[] arra = {second, second1};

        Forth forth = new Forth();
        forth.setAddress6("kjhgaksjfsadf");
        forth.setAddress7("sdlkfsdf");
        forth.setArray(arra);

        JAXBContext context = JAXBContext.newInstance(Forth.class);
        Marshaller marshaller = context.createMarshaller();
        StringWriter stringWriter = new StringWriter();
        marshaller.marshal(forth, stringWriter);
        System.out.println(stringWriter.toString());
        } 
```

抱歉，如果我没有理解您的问题。

# javascript - Aria 模板 - 在模板文件的调试模式下警告“表达式为空或未定义”

> ID：13159101
> 
> 赞同：1
> 
> 时间：2012-10-31T13:28:24.467
> 
> 标签：javascript, html, web-applications, ariatemplates

我正在使用 AT 以调试模式工作，并且不断收到以下警告：

```
[aria.templates.TemplateCtxt] Template guides.todo_mio.view.Todo 
Line 44: expression is null or undefined. 
```

我的 Todo.tpl 中的第 44 行是：

```
${( function() { console.log("passed"); } )()} 
```

我用来将发生的事情记录到模板中。顺便说一句，它可以工作..

你有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:59:02.473

在 Aria 模板中，在 TPL 文件中所做的任何事情都应该产生一些输出。

警告是通知您代码中可能存在问题，因为

*   你正在调用一个不返回的函数（也许你忘了返回）
*   您正在使用未定义的变量
*   您正在调用不用于生成标记的方法

后者更多是设计问题，与视图无关的方法应该在其他地方调用（`$dataReady`/`$afterRefresh`等）

如果您对返回未定义的方法感到满意，您可以

*   修改您的方法以返回一个空字符串
*   使用`eat`或`empty` [模板修饰符](http://ariatemplates.com/usermanual/latest/writing_templates#modifiers)

    ```
    ${( function() { console.log("passed"); } )()|eat} 
    ```

# jquery - jQuery modal 的控制定位

> ID：13159103
> 
> 赞同：3
> 
> 时间：2012-10-31T13:28:31.073
> 
> 标签：jquery, modal-dialog

我想使用 jQuery 创建一个小弹出窗口，当我单击图标时会出现该弹出窗口。我希望弹出窗口的顶角与图标重叠，以便在小窗口和按钮之间建立直观的连接（与当前出现在屏幕中间的行为相反）。这类似于 wunderlist.com，单击时钟并显示日历。我想创建一个具有日历、文本框和按钮的模式。

我可以让 jquery 模态出现，但我无法控制它的定位；它总是出现在屏幕中央。我在[jQuery UI上使用代码](http://jqueryui.com/dialog/)

```
<script type="text/javascript">
    $.fx.speeds._default = 100;
    $(document).ready(function() {

        $( "#dialog" ).dialog({
            autoOpen: false,
            show: "blind",
        });

        $( ".hold_btn" ).click(function() {
            $( "#dialog" ).dialog( "open" );
            return false;
        });

    });
</script>

<button class="btn btn-primary hold_btn" type="button">Button</button>

<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:33:32.023

您可以使用方法位置 [选项位置](http://api.jqueryui.com/dialog/#option-position)

在您的情况下，您需要使用以下代码。

```
$.fx.speeds._default = 100;
    $(document).ready(function() {
     $( ".hold_btn" ).click(function() {
            $( "#dialog" ).dialog(
                { 
                    position: {
                        my: "left top", 
                        at: "right top",
                        of: window } }

            ).dialog("show");
            return false;
        });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:33:57.770

jQueryUI 有一个位置实用功能，可以非常精细地控制元素的放置位置和 . `dialog()`有一个选项来[指定](http://api.jqueryui.com/dialog/#option-position)它的位置。

位置实用程序本身很强大，但可能会令人困惑。我建议阅读[`.position()`](http://api.jqueryui.com/position/)不同的配置选项。

```
$('#dialog').dialog({
    autoOpen: false,
    show: 'blind',
    position: { my: 'left top', at: 'left bottom', of: button }
}); 
```

# maven - 当我尝试在 .ear 中构建存档 .sar 时，Maven 抛出“错误注入和 NoClassDefFoundError”

> ID：13159108
> 
> 赞同：13
> 
> 时间：2012-10-31T13:28:40.003
> 
> 标签：maven, jmx, sar

我有 Maven 项目。我的耳朵档案包括罐子和战争。他建造没有错误。当我尝试将 .sar 包添加到项目时出现问题。而他更不是建筑。他抛出异常。我需要使用 MBean 的 sar 存档，如果您知道使用 MBean 的其他方法，请告诉我。因为我是 jmx 的新手。

Pom层次结构：

```
pom.xml(super)
--pom.xml(ear)
--pom.xml(war)
--pom.xml(jar)
--pom.xml(sar) 
```

Sar层次结构：

```
src
--main
----java
------org.myproject
--------MyMBean.java
--------MyService.java
----resources
------META-INF
--------jboss-service.xml
pom.xml 
```

超级pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.myproject</groupId>
    <artifactId>logic</artifactId>
    <version>2.0</version>
    <packaging>pom</packaging>
    <properties>
        <logic.version>2.0</logic.version>
        <modul-jar.version>2.0</modul-jar.version>
        <logic-ear.version>2.0</logic-ear.version>
        <web-war.version>2.0</web-war.version>
    </properties>

    <modules>
        <module>modul-jar</module>
        <module>logic-ear</module>
        <module>web-war</module>
        <module>mbean-sar</module>
    </modules>

</project> 
```

耳绒球：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>logic</artifactId>
        <groupId>org.myproject</groupId>
        <version>2.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>logic-ear</artifactId>
    <groupId>org.myproject</groupId>
    <version>2.0</version>
    <packaging>ear</packaging>

    <dependencies>
        <!-- war ejb sar -->
        <dependency>
            <artifactId>web-war</artifactId>
            <groupId>org.myproject</groupId>
            <version>2.0</version>
            <type>war</type>
        </dependency>
        <dependency>
            <artifactId>modul-jar</artifactId>
            <groupId>org.myproject</groupId>
            <version>2.0</version>
            <type>ejb</type>
        </dependency>
        <dependency>
            <artifactId>mbean-sar</artifactId>
            <groupId>org.myproject</groupId>
            <version>1.0</version>
            <type>sar</type>
        </dependency>
        <!-- sar plugin -->
        <dependency>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jboss-packaging-maven-plugin</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-archiver</artifactId>
            <version>2.1.2</version>
        </dependency>
    </dependencies> 
```

萨尔邦

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>logic</artifactId>
        <groupId>org.myproject</groupId>
        <version>2.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>mbean-sar</artifactId>
    <groupId>org.myproject</groupId>
    <version>1.0</version>
    <packaging>jboss-sar</packaging>

    <dependencies>
        <!-- mbean -->
        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-system</artifactId>
            <version>4.2.3.GA</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.mx</groupId>
            <artifactId>jboss-j2se</artifactId>
            <version>6.0.0.GA</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jboss-packaging-maven-plugin</artifactId>
                <version>2.2</version>
                <extensions>true</extensions>
                <executions>
                    <execution>
                        <id>jboss-sar</id>
                        <phase>package</phase>
                        <goals>
                            <goal>sar</goal>
                        </goals>
                        <configuration>
                            <primaryArtifact>false</primaryArtifact>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

例外

```
[INFO] --- jboss-packaging-maven-plugin:2.2:sar (jboss-sar) @ mbean-sar ---
31.10.2012 16:39:14 org.sonatype.guice.bean.reflect.Logs$JULSink warn
WARNING: Error injecting: org.codehaus.mojo.jboss.packaging.SarMojo
java.lang.NoClassDefFoundError: Lorg/codehaus/plexus/archiver/jar/JarArchiver;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at com.google.inject.spi.InjectionPoint.getInjectionPoints(InjectionPoint.java:651)
    at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:358)
    at com.google.inject.internal.ConstructorBindingImpl.getInternalDependencies(ConstructorBindingImpl.java:155)
    at com.google.inject.internal.InjectorImpl.getInternalDependencies(InjectorImpl.java:585)
    at com.google.inject.internal.InjectorImpl.cleanup(InjectorImpl.java:542)
    at com.google.inject.internal.InjectorImpl.initializeJitBinding(InjectorImpl.java:528)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:833)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:758)
    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:255)
    at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:204)
    at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorImpl.java:954)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:987)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:950)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1000)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:45)
    at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:84)
    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:52)
    at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:70)
    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:100)
    at org.sonatype.guice.plexus.lifecycles.PlexusLifecycleManager.onProvision(PlexusLifecycleManager.java:138)
    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:108)
    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:55)
    at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:68)
    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)
    at com.google.inject.internal.InjectorImpl$3$1.call(InjectorImpl.java:965)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1011)
    at com.google.inject.internal.InjectorImpl$3.get(InjectorImpl.java:961)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyBeanEntry.getValue(LazyBeanEntry.java:83)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:49)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:253)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:245)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:455)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:92)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.archiver.jar.JarArchiver
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    ... 63 more

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] logic ............................................. SUCCESS [0.159s]
[INFO] modul-jar ......................................... SUCCESS [0.469s]
[INFO] web-war ........................................... SUCCESS [0.259s]
[INFO] mbean-sar ......................................... FAILURE [0.282s]
[INFO] logic-ear ......................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.350s
[INFO] Finished at: Wed Oct 31 14:03:10 GMT+04:00 2012
[INFO] Final Memory: 7M/16M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:jboss-packaging-maven-plugin:2.2:sar (default-sar) on project mbean-sar
: Execution default-sar of goal org.codehaus.mojo:jboss-packaging-maven-plugin:2.2:sar failed: A required class was miss
ing while executing org.codehaus.mojo:jboss-packaging-maven-plugin:2.2:sar: Lorg/codehaus/plexus/archiver/jar/JarArchive
r;
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.codehaus.mojo:jboss-packaging-maven-plugin:2.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/Users/birukov/.m2/repository/org/codehaus/mojo/jboss-packaging-maven-plugin/2.2/jboss-packagi
ng-maven-plugin-2.2.jar
[ERROR] urls[1] = file:/C:/Users/birukov/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[project>org.myproject:mbean-sar:1.0, parent: ClassRealm[maven.api, p
arent: null]]]
[ERROR]
[ERROR] -----------------------------------------------------: org.codehaus.plexus.archiver.jar.JarArchiver 
```

我尝试将 jboss-packaging-maven-plugin 插件和依赖项放在 super-pom、ear-pom 和 sar-pom 中。这没有效果。我很多人都在考虑丢失和重复的工件。哪里有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-16T07:02:06.133

你可以尝试两件事：

1.  删除 `~/.m2/repository/` [以防本地仓库损坏特定类]下的所有内容
2.  尝试使用另一个版本的插件，例如：

`<plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>jboss-packaging-maven-plugin</artifactId> <version>2.1.1</version> <!-- Enable packaging types and lifecycle bindings. --> <extensions>true</extensions> ... </plugin>`

# javascript - 在javascript中将月份值转换为整数，以便使用getMonth()+1？

> ID：13159109
> 
> 赞同：1
> 
> 时间：2012-10-31T13:28:40.367
> 
> 标签：javascript, date, integer, monthcalendar

我想做类似这段代码的事情，但是日期不允许我这样做：`undefined`当月份超过 11 时，警报会显示“”，例如 12、13...

我想从一个月导航到另一个，所以我需要做类似的事情`getMonth()+1`or `+2`，即使当前月份是十二月（这样，`December+1 (11+1)`会给我`January (0)`）。你知道如何实现这一目标吗？

```
var m = mdate.getMonth();
    alert(nextMonth(m+3));

    function nextMonth(month){
        if (month>11) {
            if(month==12) month=0;
            if(month==13) month=1;
        } else {
            return month;
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:30:22.987

使用模运算符保持在范围内。

```
function nextMonth(month){
    return month % 12
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:32:54.403

您可以使用模块化除法：

```
var m = 11;
alert((m+1) % 12); // 0
alert((m+2) % 12); // 1 
```

这不是一个好主意。javascript 中的内置日期函数将为您处理此问题。

```
someDate.setMonth(someDate.getMonth() + m); 
```

# ios - UILabel 适配问题

> ID：13159112
> 
> 赞同：1
> 
> 时间：2012-10-31T13:28:49.273
> 
> 标签：ios, uilabel

我使用这种方法为我的标签重新计算框架：

```
- (void)fitElements {    
    CGFloat currentX = 0.0;
    CGFloat currentY = 0.0;    
    for (UIView *view in elements) {    
        CGRect rect = view.frame;
        rect.origin.x = currentX;
        rect.origin.y = currentY;        
        currentX = rect.origin.x + rect.size.width + 5;        
        view.frame = rect;      
        if (currentX >= 420) {
            currentX = 0.0;
            currentY += rect.size.height + 5;
        }
    }
} 
```

如果我的标签越过超过 420 的边界，我将对象移动到下一行。

```
- (void)createElements {
    NSInteger tag = 0;
    for (NSString *str in words) {
        UILabel *label = [[UILabel alloc] init];
        [self addGesture:label];
        [label setTextColor:[UIColor blueColor]];
        label.text = str;
        [label setAlpha:0.8];
        [label sizeToFit];
        [elements addObject:label];
    }
} 
```

如果我如上所述创建对象，这就是它的外观（使用`[label sizeToFit];`）

![在此处输入图像描述](../Images/0dc154f992a1a9caa68136edb8b1df2b.png)

我们可以看到我所有的标签都超出了边界

但是如果我使用带有硬编码框架的标签，我会得到这个：

![在此处输入图像描述](../Images/56551320697aa31dbf915817ef78fbd6.png)

这就是我想要的，但在这种情况下，我有对象的静态宽度。

这是我使用硬编码框架的方法。

```
- (void)createElements {
    NSInteger tag = 0;
    for (NSString *str in words) {
        UILabel *label = [[UILabel alloc] init];
        [self addGesture:label];
        [label setTextColor:[UIColor blueColor]];
        label.text = str;
        [label setAlpha:0.8];
        [label setFrame:CGRectMake(0, 0, 100, 20)];
        [elements addObject:label];
        tag++;
    }
} 
```

如何制作具有相对宽度的对象并且它也可以正确重新计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:07:41.827

您可以通过对代码进行少量修改来实现左对齐：

```
- (void)fitElements {
CGFloat currentX = 0.0;
CGFloat currentY = 0.0;
for (UILabel *view in elements) { //UIView changed to UILabel
    CGRect rect = view.frame;
    rect.origin.x = currentX;
    rect.origin.y = currentY;
    rect.size.width = [self widthOfString: view.text withFont:view.font];
    currentX = rect.origin.x + rect.size.width + 5;
    view.frame = rect;
    if (currentX + rect.size.width >= 420) {   //EDIT done here
        currentX = 0.0;
        currentY += rect.size.height + 5;
        rect.origin.x = currentX;
        rect.origin.y = currentY;
        view.frame = rect;
        currentX = rect.origin.x + rect.size.width + 5;
    }
}}

- (CGFloat)widthOfString:(NSString *)string withFont:(NSFont *)font {
     NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:font, NSFontAttributeName, nil];
     return [[[NSAttributedString alloc] initWithString:string attributes:attributes] size].width;
 } 
```

`widthOfString`方法是从[斯蒂芬的答案中复制的](https://stackoverflow.com/a/3429732/653513)

**编辑：**

[您还可以在NSString UIKit Additions](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html)中找到许多处理字符串图形表示大小的有用方法。

# c# - C# webBrowser null exception error

> ID：13159120
> 
> 赞同：2
> 
> 时间：2012-10-31T13:29:42.370
> 
> 标签：c#, nullreferenceexception

What is wrong with this:

```
webBrowser1.Url = new System.Uri("http://www.google.com");
MessageBox.Show(webBrowser1.Url.ToString()); 
```

When the message box tries to run it complains of a null exception.

I think I may have found the solution to my problem, it seems that I was trying to read the value before it was initalized, once I had checked this it worked perfectly. Noob error. :o(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:33:46.250

Did you perhaps not initialize webBrowser1?

```
var webBrowser1 = new WebBrowser();
webBrowser1.Url = new System.Uri("http://www.google.com");
MessageBox.Show(webBrowser1.Url.ToString()); 
```

# oracle - 在 Oracle 表中使用 fn:string-join 加载 XML 后拆分查询结果

> ID：13159126
> 
> 赞同：1
> 
> 时间：2012-10-31T13:30:02.800
> 
> 标签：oracle, xmltype

我已将一些 XML 文件加载到 Oracle 数据库（Linux x64 上的 11gr2）中，我必须使用 fn:string-join 成功导入包含多条记录的 xml 文件。

在使用 SQL*LOADER 将数据登陆/导入到 XMLTYPE 表后，我发出了一个查询，将 XML 数据从 XMLTYPE 表传输到常规表，我们称之为 Table_A

该表现在在目标字段中包含导入记录的所有字段（本例中为 2 条记录），例如。

xml 文件包含 computer_brand 的条目，第一条记录的值为“Dell”，第二条记录的值为“Apple”。现在 XML 文件中的两条记录已被选择/插入到 Table_A 但位于同一字段中，用分号分隔。字段名称：computer_brand 值：Dell;Apple

我想做的是从表中选择单独的值（不管字段中不同值的数量，因为此查询需要从计划的作业中运行）并将它们传递给它们自己的所有值单独的字段。

* * *

这是我制作/使用的东西的一个例子：

* * *

Table_A 元数据：

```
CREATE TABLE table_a
(
computer_brand                           varchar2(41),
owner                                    varchar2(101),
address                                  varchar2(101),
serialnumber                             varchar2(21)
) 
```

我使用以下查询选择并插入从 xmltype 表导入的数据到 Table_A 中：

```
insert into table_a
(computer_brand,
 owner,
 address,
 serialnumber
)
select
 a.computer_brand,
 a.owner,
 a.address,
 a.serialnumber
from table_xml a,
 xmltable (xmlnamespaces('not mentioned due to security reasons' as "tns"),
 '//tns:Main' passing a.xml_file
 columns
 computer_brand      varchar2(41)  path 'fn:string-join(tns:/@computer_brand,";")',
 owner               varchar2(101) path 'fn:string-join(tns:/@owner,";")',
 address             varchar2(101) path 'fn:string-join(tns:/@address,";")',
 serialnumber        varchar2(21)  path 'fn:string-join(tns:/serialnumber,";")')
(+) k
where upper(file_name)=upper('xmlfile.xml'); 
```

上述查询的输出是：

```
computer_brand
--------------
dell;apple

owner
--------------
pete;jack

address
--------------
basement;attic

serialnumber
--------------
123444;456555 
```

如果有人知道如何提供帮助，请提前非常感谢？我在看`SUBSTR()`并没有真正设法解决它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-12T11:41:04.937

这就是字符串连接应该做的：它连接匹配 XPath 的值。因此，实际上您要查找的只是没有字符串连接的查询。我不确切知道您的 XML 是什么样的，但我建议尝试这样的 SQL：

```
insert into table_a
(computer_brand,
 owner,
 address,
 serialnumber
)
select
 a.computer_brand,
 a.owner,
 a.address,
 a.serialnumber
from table_xml a,
 xmltable (xmlnamespaces('not mentioned due to security reasons' as "tns"),
 '//tns:Main' passing a.xml_file
 columns
 computer_brand      varchar2(41)  path 'tns:/@computer_brand',
 owner               varchar2(101) path 'tns:/@owner)',
 address             varchar2(101) path 'tns:/@address)',
 serialnumber        varchar2(21)  path 'tns:/serialnumber')
(+) k
where upper(file_name)=upper('xmlfile.xml'); 
```

# java - 通过单击复选框禁用 jtable 中的组合框

> ID：13159140
> 
> 赞同：0
> 
> 时间：2012-10-31T13:30:43.627
> 
> 标签：java, swing, jtable, jcombobox, jcheckbox

我正在尝试在 java 中做一些简单的应用程序。我在 jTable 中渲染了一些 CheckBox 和 ComboBox。现在我正在尝试对该项目进行工作，例如获取价值、启用-禁用组合框。但我面临一些问题。
我现在面临的
1.
我在 jTable 中渲染 ComboBox 和 CheckBox。当我单击相应行的复选框时，我正在尝试启用 ComboBox。如果我的复选框未启用，那么它的 ComboBox 应该被禁用。
我试过但没有成功。

2
我正在尝试单击复选框，但如果我使用 setSelected 则所有复选框都被选中，但是当我试图取消选中它时，它没有。
这是我的代码供您参考。

```
 public class MyComboBoxRenderer extends JComboBox implements TableCellRenderer {
    public MyComboBoxRenderer(String[] items) {
        super(items);
    }

    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        if (isSelected) {
            setForeground(Color.BLACK);
            super.setBackground(Color.WHITE);
        } else {
            setForeground(Color.BLACK);
            setBackground(Color.WHITE);
        }

        // Select the current value
        setSelectedItem(value);
        return this;
    }
   }

    public class MyComboBoxEditor extends DefaultCellEditor {
    public MyComboBoxEditor(String[] items) {
        super(new JComboBox(items));
     }
   } 
```

.

```
 public class MyCheckBoxRenderer extends JCheckBox implements TableCellRenderer {
     public MyCheckBoxRenderer(String[] items) {
        super();
       // setSelected(true);
     }

     public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        if (isSelected) {
            setForeground(Color.BLACK);
            super.setBackground(Color.WHITE);
        } else {
            setForeground(Color.BLACK);
            setBackground(Color.WHITE);
        }

       // setSelected(true);
        // Select the current value

        return this;
    }
    }

    public class MyCheckBoxEditor extends DefaultCellEditor {
    public MyCheckBoxEditor() {
        super(new JCheckBox());

} 
} 
```

给我一些提示或参考。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:11:15.423

*   [看我关于prepareEditor（和/或prepareRenderer）的问题](https://stackoverflow.com/questions/7045851/jtable-how-prepareeditor-works)

*   我建议使用[`prepareRenderer`（最简单和更舒适，我的观点）](https://stackoverflow.com/a/9737299/714968)并[检查来自 Column contains 的布尔值（呈现为）`JCheckBox`](https://stackoverflow.com/a/6901508/714968)

*   必须覆盖[`convertXxxToModel`](https://stackoverflow.com/a/7625488/714968)，因为`ColumnModel` [可以重新排序和/或可以对行进行排序或过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)，在这种情况下，渲染器无法正常工作

# java - SLF4J 是否适合在多线程应用程序中用于记录数据库？

> ID：13159141
> 
> 赞同：6
> 
> 时间：2012-10-31T13:30:45.033
> 
> 标签：java, logging, log4j, slf4j

我正在开发一个多线程应用程序。我已经在使用 Log4j 将语句记录到文件中。
我最近一直在研究登录到 Mysql 数据库的可能性。

日志组件必须在重负载下可靠并且必须是线程安全的。
我听说过 SFL4J。我对 SLF4J 的理解是，它只是一个门面或抽象层。

*   我想知道 SLF4J 是否是用于多线程应用程序的优秀数据库日志记录解决方案？

*   并且在负载较重的情况下，添加一个层（如缓冲区或队列）并让线程记录到它而不是直接调用日志线程是一个好主意（日志线程将发送找到的语句在队列中一一到数据库）？

任何提示、最佳实践或代码示例将不胜感激，
问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:43:22.773

没错，SFL4J 只是一个外观，它允许库和框架的编写者通过外观进行日志记录，并让应用程序指定自己的日志记录框架。在应用程序级别没有使用 SLF4J 的令人信服的理由，您不妨直接使用 log4j。唯一的好处是您可以在未来的某个日期切换到 logback，而更改较少。这并不是那么引人注目，除非您不确定要使用哪个日志记录实现，在这种情况下，您可以使用抽象层，以便您可以在比较测试中交换实现。

使用 SLF4j 不会影响并发。您可能希望为实际的记录器考虑不同的附加程序（或滚动您自己的附加程序），但它不会影响您调用 SLF4J 的方式。唯一会影响并发的地方是 appender。

# iphone - 是否可以支持 iPad1 但不支持 iPhone3GS？

> ID：13159142
> 
> 赞同：1
> 
> 时间：2012-10-31T13:30:48.960
> 
> 标签：iphone, xcode

我一直在考虑为我正在开发的标题删除对 iPhone3GS 的支持。我意识到我可以使用设备功能来阻止人们使用某些设备，但我找不到会停止仅支持 3GS 的特定设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:33:45.167

您可以检测 iPhone 4 中引入的前向摄像头，使用

```
if( [UIImagePickerController isCameraDeviceAvailable: 
         UIImagePickerControllerCameraDeviceFront ])
{
   // do something
} else {
   // you have an iPhone 3GS or less
} 
```

我假设您不支持小于4的型号。如果不支持，并且您只想专门消除3GS，但允许iPhone 3G，您可以检查视频功能。3GS有，3以下没有。

# android - 嵌入式 IFRAME 视频在 Android 中退出全屏后继续在后台播放

> ID：13159144
> 
> 赞同：4
> 
> 时间：2012-10-31T13:30:51.147
> 
> 标签：android, webview, youtube, embed, fullscreen

我已经搜索了很多解决此问题的方法，但显然我找不到。好吧，顾名思义，我有一个简单的 Android 应用程序，它有一个 Webview。

```
public class MainActivity extends Activity {
   protected FrameLayout webViewPlaceholder;
   protected WebView webView;
   final Context myApp = this;
   @Override
   public void onCreate(Bundle savedInstanceState)
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      // Initialize the UI
      initUI();
   }

   protected void initUI()
   {
    // Retrieve UI elements
    webViewPlaceholder = ((FrameLayout)findViewById(R.id.webViewPlaceholder));

    // Initialize the WebView if necessary
    if (webView == null)
    {
        // Create the webview
        webView = new WebView(this);
        webView.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        webView.getSettings().setSupportZoom(true);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webView.setScrollbarFadingEnabled(true);
        webView.getSettings().setLoadsImagesAutomatically(true);

        // Load the URLs inside the WebView, not in the external web browser
        webView.setWebViewClient(new WebViewClient());
        //webView.setWebChromeClient(new CustomChromeClient(this));
        webView.setWebChromeClient(new WebChromeClient() {  
            @Override  
            public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result)   
            {  
                new AlertDialog.Builder(myApp)  
                    .setTitle("javaScript dialog")  
                    .setMessage(message)  
                    .setPositiveButton(android.R.string.ok,  
                            new AlertDialog.OnClickListener()   
                            {  
                                public void onClick(DialogInterface dialog, int which)   
                                {  
                                    result.confirm();  
                                }  
                            })  
                    .setCancelable(false)  
                    .create()  
                    .show();  

                return true;  
            };
            public void onShowCustomView(View view, CustomViewCallback callback){
                super.onShowCustomView(view, callback);
                Log.i("ChromeCLient", "onshowCustomView");
                new AlertDialog.Builder(myApp)  
                .setTitle("javaScript dialog")  
                .setMessage("ajbdlsakndsland")  
                .setCancelable(true)  
                .create()  
                .show();  
            }
            @Override
            public void onHideCustomView() {
                super.onHideCustomView();
                Log.i("ChromeCLient", "onhideCustomView");
            }
        });  

        webView.getSettings().setJavaScriptEnabled(true);
        if (Build.VERSION.SDK_INT < 8) {
          webView.getSettings().setPluginsEnabled(true);
        } else {
          webView.getSettings().setPluginState(WebSettings.PluginState.ON);
        }
        // Load a page
        webView.loadUrl("http://jsbin.com/ijixe4/3");
    }

    // Attach the WebView to its placeholder
    webViewPlaceholder.addView(webView);
}

@Override
public void onConfigurationChanged(Configuration newConfig)
{
    if (webView != null)
    {
        // Remove the WebView from the old placeholder
        webViewPlaceholder.removeView(webView);
    }

    super.onConfigurationChanged(newConfig);

    // Load the layout resource for the new configuration
    setContentView(R.layout.activity_main);

    // Reinitialize the UI
    initUI();
}

@Override
protected void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);

    // Save the state of the WebView
    webView.saveState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
    super.onRestoreInstanceState(savedInstanceState);

    // Restore the state of the WebView
    webView.restoreState(savedInstanceState);
}
} 
```

我的问题如下。在 webview 中加载的站点是一个包含简单 iframe 嵌入 youtube 视频的站点。当我点击 youtube 视频上的全屏按钮时，它会改变我的应用程序方向，即使我在清单中设置：screenOrientation =“portrait”。退出全屏时，在播放视频时（在后台）继续播放，即使由于方向更改而重新创建了 web 视图。当方向从横向变为纵向时，我尝试在活动的 onDestroy() 方法中销毁 webview。但这没有帮助。我尝试将 CustomWebChromeClient 设置为 webview 并实现 onShowCustomView() 方法，但除非我使用 HTML5 视频，否则显然不会调用 onShowCustomView()。我'

你们还有其他解决这个问题/错误的方法吗？我真的不想使用 HTML5 视频标签。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-25T04:37:36.983

只需重写 onPause 和 onResume 方法并在 webView 上调用相同的方法，如下所示。

```
@Override
protected void onResume() {
    super.onResume();
    this.webView.onResume();
}

@Override
protected void onPause() {
    super.onPause();
    this.webView.onPause();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:02:04.933

[我](https://stackoverflow.com/questions/12322914/webview-with-embedded-video-plays-in-background)在面临同样的问题时发现了这一点：

```
webView.loadData("", "text/html", "utf-8"); // in onDestroy/onFinish 
```

它停止视频播放。可能会有所帮助。我现在不能说它是否对您有帮助，但是您必须在方向更改或其他方面进行尝试。<> BTW [Youtube 有自己的 API](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)，因此使用它而不是 WebView 可能更好

# asp.net-mvc - 在 MVC 应用程序中的所有页面上强制执行 HTTPS

> ID：13159149
> 
> 赞同：3
> 
> 时间：2012-10-31T13:30:59.530
> 
> 标签：asp.net-mvc

我有一个在共享服务器上运行的 ASP.NET MVC3 应用程序。我已经在服务器上安装了 SSL 证书，并且我的应用程序中的所有控制器都装饰有 RequireHTTPS。目的是确保没有未加密的页面提供（即所有页面都通过 HTTPS 提供）。

但是，某些页面（例如 js，HTML 错误页面）可以在未加密的情况下访问（通过在请求中的主机名中添加 :80）。当然，我正在谈论的页面是静态的，但我如何保护我网站中的所有页面，防止其中任何一个被未经加密下载。我无权访问 IIS 服务器设置，因为这是一个共享站点，但是有没有办法使用 HTTP 处理程序或重写 URL 模块（或者我可以直接在文件夹上设置权限）？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:21:56.057

我使用这样的动作过滤器属性

```
public class RequireSSL : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpRequestBase req = filterContext.HttpContext.Request;
        HttpResponseBase res = filterContext.HttpContext.Response;

        //Check if we're secure or not and if we're on the local machine
        if (!req.IsSecureConnection && !req.IsLocal)
        {

            var builder = new UriBuilder(req.Url)

                              {
                                  Scheme = Uri.UriSchemeHttps,
                                  Port = 443
                              };
            res.Redirect(builder.Uri.ToString());
        }
        base.OnActionExecuting(filterContext);

    }

} 
```

然后我用这个属性创建了一个名为 SecureController 的基本控制器

```
 [RequireSSL]
 public class SecureController : Controller
{

} 
```

那么我想成为 SSL 的任何控制器都将继承这个控制器。希望对您有所帮助只需要确保所有“页面”都是控制器操作返回的视图。如果需要，这应该是一个非常容易的更改。

# vmware - 从 VMware CLI 在来宾中运行远程进程

> ID：13159150
> 
> 赞同：0
> 
> 时间：2012-10-31T13:31:00.210
> 
> 标签：vmware

我正在尝试在 Windows Vista 虚拟机上运行脚本，`vmrun`但出现错误。

这是我的命令：

```
vmrun -gu *** -gp *** runProgramInGuest /path/to/Vista.vmwarevm "C:\windows\system32\cmd.exe" "/c Z:\deploy\windows\ExtractFile.bat" 
```

什么都没做，结果是：

```
Guest program exited with non-zero exit code: 1 
```

我试图直接在 Vista 中执行这个，它工作正常：

```
C:\windows\system32\cmd.exe /c Z:\deploy\windows\ExtractFile.bat 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:17:27.290

我终于找到了正确的语法：

```
vmrun -gu *** -gp *** runProgramInGuest /path/to/Vista.vmwarevm -activeWindow -interactive cmd.exe "/c Z:\deploy\windows\ExtractFile.bat" 
```

似乎这`-interactive`是脚本正常工作所必需的。

如果您想将参数传递给脚本，只需将它们附加在脚本名称之后并添加一个额外的空格（重要）：

```
vmrun -gu *** -gp *** runProgramInGuest /path/to/Vista.vmwarevm -activeWindow -interactive cmd.exe "/c Z:\deploy\windows\ExtractFile.bat param1 param2 " 
```

# php - 闭包无法序列化，如何通过 AJAX 对 PHP 进行回调？

> ID：13159151
> 
> 赞同：0
> 
> 时间：2012-10-31T13:30:57.977
> 
> 标签：php, javascript, ajax

**问题**

我如何实现通过 AJAX 传递的 PHP 回调，而 PHP 回调由 AJAX 请求的页面调用？

**设置**

评论通过 AJAX 发布，参数通过序列化和加密传递（因此它们不能在传输过程中更改或精心设计的 AJAX 请求以滥用评论系统）。问题是，我需要新的总评论量来更新不同 mysql 表中的字段（在使用评论的每个地方都会改变）而不是评论本身。

**例子**

有人在论坛主题上发表评论，该主题需要知道总评论数（无需每次都查询评论表）。问题是，当通过 AJAX 发布评论时，我们不知道要更新什么表、哪些字段等，以及必须执行附加代码（例如还记录所有留下评论的成员）关于特定主题）。

**解决方案**

在声明评论小部件时，我考虑过使用闭包添加两个 PHP 回调。这两个回调 (onSuccess() onFailure()) 将能够执行所需的任何工作，例如计算总评论数和更新特定论坛主题的总评论数。然后序列化，加密，通过ajax作为参数传递，然后PHP解密和反序列化回调并执行它们。

**为什么解决方案会失败**

因为闭包不能序列化！另外，在有人建议之前我没有使用 eval 。

**又是一个问题**

我如何实现通过 AJAX 传递的 PHP 回调，而 PHP 回调由 AJAX 请求的页面调用？

**更新**

看起来你们中的一些人没有阅读整个问题并理解回调将在 PHP 中完成 - 而不是 javascript（使用 AJAX 回调）。AJAX 仅用于传输已发布的评论 - 不处理它（这就是 PHP 所做的，这就是问题所在的回调所在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:41:43.710

创建一个作为回调的函数，然后通过 ajax 传递函数名，并像这样调用它：

```
$callback = 'callback_function_name'; $callback($params...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:43:39.953

也许我不明白你想要做什么，但你能做类似的事情：

```
window.myappstuff={}

window.myappstuff.onSuccess=function(){
   //Do some stuff here.
}

window.myappstuff.onFailure=function(){
   //Do some different stuff here.
} 
```

然后您的 php 回调可以调用`window.myappstuff.onSuccess`或`window.myappstuff.onFailure`。您也可以改用随机函数名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:00:12.493

总的来说，我不得不建议重新考虑。出于安全原因，通过 ajax 发送任何类似远程代码的东西都被认为是不好的做法。例如，我可以使用 firebug 或其他东西*“拦截”回复，对我的代码进行任何更改。*
如果您发送函数名称和参数，我可以更改它们。假设您的脚本验证了用户输入，我可以让 ajax 调用返回一个不存在的函数。您的脚本将失败，并且所有形式的输入验证都将消失。
如果您将完整的函数定义作为字符串发送，我可以走得更远。

你可能已经看到人们做这样的事情：

```
echo 'function(argument){ console.log(argument);}("something"));'; 
```

这只是纯文本，没有 JSON。然后，在 JS 中，他们会做一些应该被视为危害人类罪的事情：

```
//readystatechange callback:
if (this.readyState === 4 && this.status === 200)
{
    return eval(this.responseText);//<=== EVIL - EVIL - EVIL
} 
```

**这太疯狂**了，它是**邪恶**的，甚至不看这个
你可以做什么作为某种快速修复是编写一个通用`onreadystatechange`函数：

```
//readystatechange
if (this.readyState === 4 && this.status === 200)
{
    var returnObj = JSON.parse(this.responseText);
    switch(returnObj.actionType)
    {
        case 'DomAction':
            return domSwitch(returnObject.data);//<-- based on data domSwitch will decide what to do
        case 'setVar':
            return varSwitch(returnObjcet.data);
        default:
            return educatedGuess(returnObject);//<-- desperate
    }
} 
```

但是同样，当你发送一个请求时，你通常对你会得到什么样的数据以及你想用它做什么有一定的期望，所以你可以`readystatechange`为每个 ajax 请求动态创建一个处理程序，处理该特定呼叫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:50:02.717

不要传递回调，而是提前在服务器上创建函数并传递要执行的函数的名称，以及要传递的参数列表。

* * *

Besides, here is the place where you start using `angular.js`. This way you'll have a client side model of the `forum topic` with a field of `posts_count` which you'll update on on the client side and angluar's bindings will update the view wherever you use data from this model.

# php - 字符串和文件名之间的 PHP 字符编码

> ID：13159154
> 
> 赞同：0
> 
> 时间：2012-10-31T13:31:07.097
> 
> 标签：php, encoding, utf-8, character-encoding

我有一个我想解析的写得很糟糕的 html 文件（从 Windows 程序导出，所以我无法控制它）。我正在使用正则表达式，我知道它对 HTML 不是很好，但我知道结构不会改变，所以它工作得很好。

数据如下所示：

[http://pastebin.com/2dx1G271](http://pastebin.com/2dx1G271)

起初 file_get_contents 不起作用，但 Firefox 告诉我它被编码为 UTF-16。所以我像这样编码它：

```
$shortlist_html = mb_convert_encoding(file_get_contents($this->html_loc), 'UTF-8', 'UTF-16'); 
```

然后我从 td 之间获取我想要的数据，但有时数据有一个像这样的奇怪字符（注意奇怪的 i）：

> 阿德米尔森

但是，我也有一个充满图像的目录，我想循环访问它们，它们的名称如下：

> Ademílson_ Attributes.png
> 
> Ademílson_ Stats.png
> 
> Ademílson_ Profile.png

现在我想将名称与图像名称进行匹配。我可以使用正则表达式轻松获得名称，但直接匹配不起作用。如果我 var_dump 我得到的字符串：

> 阿德梅尔森

如果我对它进行 utf-8 编码，然后 var_dump 它，它已经剥离了“í”

> 阿德姆森

以上都不匹配我的字符串。

我应该注意，当我说匹配时，我实际上在做的是一个 isset，例如：

```
$myarray = array('Ademílson'=>57);

$handle = opendir($image_dir);
while($filename = readdir($handle)) //$filename is Ademílson_ Attributes.png
{
     preg_match('/(.*?)_+/', $filename, $matches);

     $playername = $matches[1]; //$playername is Ademílson but appears as Adem�lson when using var_dump

     if(isset($myarray[$playername]))
     {
          //This never matches
     }

     foreach($myarray as $name => $id)
     {
          if($name == $playername)
          {
               //This never matches
          }
     }

     //Okay try and utf-8 it instead
     $playername = mb_convert_encoding($playername, 'utf-8', mb_detect_encoding($playername)); //This time a var_dump strips the "i" e.g. Ademlson

     if(isset($myarray[$playername]))
     {
          //This still never matches
     }

     foreach($myarray as $name => $id)
     {
          if($name == $playername)
          {
               //This still never matches
          }
     }
} 
```

我希望我已经充分解释了这一点。基本上，当字符串包含不寻常的字符时，我想将从文件名中检索到的字符串与从文件内容中检索到的字符串进行匹配。

# css - 用CSS在textField右侧添加小图片

> ID：13159156
> 
> 赞同：11
> 
> 时间：2012-10-31T13:31:09.427
> 
> 标签：css, javafx

您好，我正在使用 JavaFx 制作应用程序。我有一张小 png 图片，我想将它添加到我的 textField 的右侧。

将图片添加到 textField 的框架不是问题，但由于某种原因，我无法将图片移动到任何位置（这意味着它不会从起始位置移动 - 左侧）

我的代码如下：

```
#textField {
    -fx-background-image:url('apr.png');
    -fx-background-repeat: no-repeat;
    -fx-background-image-position:right;
} 
```

我也尝试过Center，但也没有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T00:32:10.717

正如 Marek 在他的回答中指出的那样，您的 css 属性 id 错误，您需要使用`-fx-background-position: right center;`

这是一个简短的示例，演示了使用 CSS 在 TextField 的右侧添加图片：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.TextField;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class TextFieldCssSample extends Application {
  @Override public void start(Stage stage) throws Exception {
    TextField textField = new TextField();
    textField.setId("textField");
    StackPane layout = new StackPane();
    layout.getChildren().addAll(textField);
    layout.getStylesheets().add(this.getClass().getResource("textfield.css").toExternalForm());
    stage.setScene(new Scene(layout));
    stage.show();
  }
  public static void main(String[] args) { launch(args); }
} 
```

Css 文件：

```
/* textfield.css 
   place in same location as TextFieldCssSample.java and ensure build system copies it to output directory
   image used courtesy of creative commons attribution license: http://www.rockettheme.com/blog/design/1658-free-halloween-icon-pack1
*/
.root {
  -fx-padding: 15; 
  -fx-background-color: cornsilk;
}

#textField {
  -fx-background-image:url('http://icons.iconarchive.com/icons/rockettheme/halloween/32/pumpkin-icon.png');
  -fx-background-repeat: no-repeat;
  -fx-background-position: right center;
  -fx-font-size: 20;
} 
```

样本输出：

![文本字段背景位置居中右](../Images/31579001969b2ba4e0386e23d06fa689.png)

> 如果我的 png 图像是 jar 文件中的本地文件，我将如何访问或引用它？

根据[css参考的uri部分](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typeuri)：

“地址可以是绝对 URI……或者相对于 CSS 文件的位置。”

例如

*   a) 将 css 和图像文件放在 jar 文件中的相同位置，并仅使用`url('pumpkin-icon.png');`OR引用
*   b）将图像文件放在`images`保存css的目录下的目录中，并像`url('images/pumpkin-icon.png');`OR一样引用
*   c) 将图像文件放在`images`jar 根目录下的目录中，并引用如下`url('/images/pumpkin-icon.png');`

不要使用使用`..`父说明符的相对引用，例如`../images/pumpkin-icon.png`，尽管它适用于磁盘文件，但`..`说明符不是有效的 jar 协议路径，并且不会从 jar 中提取文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T10:56:16.527

代替

```
-fx-background-image-position:right; 
```

采用

```
-fx-background-position: right center; 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-31T13:49:34.583

复制此 html 并关注我：

```
<div class="textBoxWithImage">
  <img src="YOUR IMG URL" class="textBoxWithImage_img"/>
  <textarea id="textField"></textarea> // Change it with your textField !
</div> 
```

在上面的 img 标签上填充图片 url，然后使用这个样式表！：

```
.textBoxWithImage{
 position:relative;
 overflow:hidden;
}
.textBoxWithImage_img{
 position:absolute;
 top:0px;
 right:0px;
 z-index:1;
}
#textField{
 background:transparent;
 position:relative;
 top:0px;
 left:0px;
 z-index:2;
} 
```

祝朋友好运！

# cron - 为什么 crontab 不工作？

> ID：13159157
> 
> 赞同：2
> 
> 时间：2012-10-31T13:31:19.587
> 
> 标签：cron, crontab

在 linux:with crontab: 我用 as : 测试 `* * * * * /bin/echo "xin chao">> /home/iloveyou/text.txt`。它工作正常。

但是当我测试运行一个网址时：

```
*/3 * * * * /usr/bin/curl -k https://192.169.30.126/joomlandk2/index.php/exportmanager 
```

它不工作。当我运行为：`/usr/bin/curl -k https://192.169.30.126/joomlandk2/index.php/exportmanager`从终端窗口。它运行正常。为什么？我想 `https://192.169.30.126/joomlandk2/index.php/exportmanager`用 crontab 设置运行。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:55:03.873

可能是一些特殊字符的问题。将命令放入包装脚本中，添加运行权限并切换 crontab 以指向它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:34:27.387

应 OP 请求，此答案详细说明了如何在 crond 上下文中逐步复制用户环境。

在 crontab 中，调用 shell 脚本。

```
*/3 * * * * /home/userX/dir/exportmanager.sh 
```

在 shell 中，在调用 curl 之前 echo 或/和设置环境以具有与您自己的环境相似的条件。

HTTPS 使用 SSL 密钥，curl 如何查找此密钥，在哪个证书存储库中？

见`--capath`选项。

```
#!/bin/bash
set VAR=value
/usr/bin/curl -k https://192.169.30.126/joomlandk2/index.php/exportmanager\
   >/home/userX/dir/exportmanager.log 
```

# java - java字节与c++字节

> ID：13159165
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:31:37.013
> 
> 标签：java, c++, image-processing, run-length-encoding

我知道 Java`byte`范围是 -128 到 127，但 C++`BYTE`是`unsigned char`（0 到 255。）

我想将 C++ 函数转换为 Java，在 C++ 中我有一个`LPBYTE`（它是指向`BYTE`数组的指针。）我尝试使用`byte`数组而不是`LPBYTE`C++ 函数，但我的 Java 函数仍然无法正常工作。

我的 C++ 函数适用于 BMP 文件，它的算法是自定义运行长度编码。在将其转换为 Java 时，我使用 a`BufferedImage`并将其内容作为`byte[]`. 我猜 Java 函数由于类型不匹配而无法正常工作。

我应该在 Java 中使用哪种类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:39:50.967

在Java中，您可以使用纯文本并根据需要`byte`转换为`int``b & 0xFF`

您遇到的问题是*Java 不支持指针*，并且您无法将指向字节的指针传递给 Java。最接近的等价物是`byte[]`。

如果您只进行 RLE 编码，则字节的实际值并不重要，因此它们是有符号还是无符号都无关紧要。如果您正在解码 BMP 文件，您可以根据需要使用上述掩码。

在读取/写入字节数组时，常见的解决方案是使用 ByteBuffer。这支持以小端或大端顺序编写较长的类型`short`，`int`您无需提前知道确切的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:34:23.813

Java 没有无符号类型（除此之外 `char`是 16 位）。因此，您别无选择，只能选择`byte`重写您的代码，使其适用于有符号整数。如果您需要这篇文章的帮助，请查看*代码*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:35:29.940

Java 中没有无符号字节类型。你可以`short`改用。这可以表示从 0 到 255 的所有值，甚至更多。

# ruby - Ruby - 单引号和双引号有什么区别？

> ID：13159166
> 
> 赞同：12
> 
> 时间：2012-10-31T13:31:36.700
> 
> 标签：ruby

所以我正在关注这个 Ruby 教程：[Learn Ruby the Hard Way。](http://ruby.learncodethehardway.org/book/ex16.html)

在练习 16（上面链接）中，您编写了一个将行写入文件的脚本。相关代码为：

```
print "line 1: "; line1 = STDIN.gets.chomp()
print "line 2: "; line2 = STDIN.gets.chomp()
print "line 3: "; line3 = STDIN.gets.chomp()

puts "I'm going to write these to the file."

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n") 
```

然而，作为一个懒惰的流浪汉，我最初在最后六行中使用单引号输入示例，而不是教程告诉您使用的双引号。

这对文件有影响。当我使用单引号时，文件如下所示：

```
this is line 1\nthis is line 2\nthis is line 3 
```

将这些引号切换为双引号后，文件看起来符合预期：

```
this is line 1
this is line 2
this is line 3 
```

有人能准确地告诉我这是为什么吗？单引号字符串是否只是忽略转义字符，如`\n`or `\t`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T13:33:25.843

是的，单引号字符串不处理 ASCII 转义码，也不进行字符串插值。

```
name = 'Joe'
greeting = 'Hello, #{name}' # this won't produce "Hello, Joe" 
```

# html - 改变多维html列表分层的方向

> ID：13159167
> 
> 赞同：2
> 
> 时间：2012-10-31T13:31:43.990
> 
> 标签：html, css

我正在尝试实现类似于下面的 jsfiddle 的效果。我想在默认的相反方向上分层一个 HTML 列表。

目标是让父列表元素看起来好像它们在子列表元素之上。在小提琴中，子元素上有边距顶部，以更好地显示框阴影。我的目标是将`margin-top`from更改`5px`为`-5px`并使该子项出现在父项下方。

[http://jsfiddle.net/cepDd/](http://jsfiddle.net/cepDd/)

这是可以实现的吗？我用 z 索引尝试了一些东西，但无济于事。我尝试使用绝对定位，但这似乎也不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:50:53.783

Z-indexing 仅在您设置`position`属性时才起作用。`relative`在这种情况下，将其设置为即可。

根据您的代码[查看此 Fiddle 。](http://jsfiddle.net/c_kick/HemzV/)

注意：我已将边距设置为 0 像素而不是 5 像素，因此子元素会缩在父元素下方。我建议您使用`padding-top`而不是`margin-top`获得更多间距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:45:10.703

Not sure if I fully understand the goal. The child is already 'below' the parent. If you mean 'behind', you could set the opacity of the child

```
 opacity: 0.5; 
```

[A FIDDLE](http://jsfiddle.net/jcurran/xqaaf/) that demonstrates

# java - 如何从代码启动java小程序？

> ID：13159171
> 
> 赞同：1
> 
> 时间：2012-10-31T13:31:50.460
> 
> 标签：java, applet

假设我有类似的东西：

```
Applet myApplet = new MyApplet(); 
```

如何以出现新窗口的方式调用该小程序，并且我仍然能够从该范围访问该 MyApplet 实例？

一般来说，我希望能够编写这样的代码：

```
class Runner {
    public static void main(String[] args) {
        new Runner().run();
    }

    void run() {
        MyApplet myApplet = new MyApplet();
        myApplet.init();
        myApplet.doSomething();
    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:44:15.153

这个问题在其他地方得到了回答，例如，[http://www.dreamincode.net/code/snippet1607.html](http://www.dreamincode.net/code/snippet1607.html)

我是通过 [https://www.google.ru/search?q=java+applet+%22as+application%22找到的](https://www.google.ru/search?q=java+applet+%22as+application%22)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:43:11.790

您必须为您的小程序提供一个实现`java.applet.AppletStub`。存根提供模拟 Web 浏览器行为的上下文信息。

# swing - 在 JPanel 上设置边框

> ID：13159173
> 
> 赞同：0
> 
> 时间：2012-10-31T13:32:02.927
> 
> 标签：swing, jpanel, containers

为什么第一个代码没有在 JPanel 周围放置边框，而第二个代码呢？我看不出边框代码有任何差异。在第一个中，我正在研究蛇。第二个是我写在这里发布的一个例子，但结果证明它有效。

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class ts {

public static void main(String[] args) {

        MyJFrame frame1 = new MyJFrame();

    }
    static class MyJFrame extends JFrame{

        public MyJFrame (){

            setTitle("Snake Build: Dev 0.2");
            setBounds(200,100,600,500);
            setResizable(false);
            setLayout(null);

            Container cp = getContentPane();

            JPanel settings = new JPanel();
            settings.setBounds(200, 100, 200, 200);
            settings.setBorder(BorderFactory.createRaisedBevelBorder());
            //exsists but cant be seen border working?
            settings.addMouseListener(new MouseListener(){
                @Override
                public void mouseClicked(MouseEvent arg0) {
                }

                @Override
                public void mouseEntered(MouseEvent arg0) {
                    System.out.println("entered");
                }

                @Override
                public void mouseExited(MouseEvent arg0) {
                    System.out.println("exited");
                }

                @Override
                public void mousePressed(MouseEvent arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void mouseReleased(MouseEvent arg0) {
                    // TODO Auto-generated method stub

                }
            });

            cp.add(settings);
            settings.setVisible(true);

            JButton test = new JButton("test");
            test.setBounds(10, 20, 30, 30);
            settings.add(test);
            test.setVisible(true);

            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setVisible(true);
        }

        public void paint(Graphics g)
        {

        }
    }
} 
```

第二件确实给出了边界

```
import java.awt.BorderLayout;
import java.awt.Container;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class ts {
    public static void main(String[] args) {

        MyJF frame1 = new MyJF();

    }
    static class MyJF extends JFrame{
        public MyJF(){
            setBounds(50,50,500,200);
            setLayout(null);
            setResizable(false);

            Container cp = getContentPane();

            JPanel settings = new JPanel();
            settings.setBounds(20,20,100,100);
            settings.setBorder(BorderFactory.createRaisedBevelBorder());

            JButton JB = new JButton("hey");
            JB.setBounds(10, 10, 50, 50);
            settings.add(JB);

            add(settings);

            settings.setVisible(true);

            setVisible(true);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:40:32.710

Without wanting to state the obvious but you are overriding `JFrame.paint(Graphics)` with an empty code-block, hence you see problems. If you remove that part it will work as expected.

Consider the following recommendations:

*   Do not override `JFrame.paint(Graphics)` but instead override `JComponent.paintComponent(Graphics)` on a component contained in your `JFrame` for custom painting. In both case, you should usually also call the `super` method
*   Use appropriate `LayoutManager`'s and forget about `setBounds/setLocation/setSize` (and don't try to replace them with `set-Min/Max/Pref-Size`)
*   Follow Java naming conventions (classes start with an Upper case letter)
*   Do not extend `JFrame` if it is not needed. You should extend `JFrame` only if you add frame-behaviour

# facebook-like - Facebook Like 按钮不会增加

> ID：13159174
> 
> 赞同：2
> 
> 时间：2012-10-31T13:32:02.697
> 
> 标签：facebook-like, increment

我在我的个人网页上添加了一些类似的按钮：[edoardo.torreggiani.net](http://edoardo.torreggiani.net)但只有一个按钮可以正常工作。

**这工作**（主页）：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fedoardo.torreggiani.net&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21&amp;locale=en_US" scrolling="no" frameborder="0" style="border: none; overflow: hidden; width: 100px; height: 21px; " allowtransparency="true"></iframe> 
```

**这不起作用**（主页上的单个帖子）：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fedoardo.torreggiani.net%2Fhome%3Fpost%3D5&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21&amp;locale=en_US" scrolling="no" frameborder="0" style="border: none; overflow: hidden; width: 100px; height: 21px; " allowtransparency="true"></iframe> 
```

当我单击不起作用的类似按钮时，我得到了该**响应**：

```
for (;;);{"__ar":1,"payload":null,"jsmods":{"require":[["Plugin","disconnect",[],["http:\/\/edoardo.torreggiani.net\/home?post=5"]]]}} 
```

工作和错误之间的唯一区别是 iframe src 中的HREF*参数***：**错误的在查询字符串中有一个参数。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:01:34.730

据我所知，每篇博文都没有真正的页面。你的帖子链接是这个：

```
http://edoardo.torreggiani.net/home?post=5 
```

把它放在调试器中，你会看到错误：

```
https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fedoardo.torreggiani.net%2Fhome%3Fpost%3D5 
```

> 'website' 类型的 URL 'http://edoardo.torreggiani.net' 上的对象无效，因为属性 'fb:admins' 的给定值 '10150406244527145' 无法解析为类型 'fbid'。*

# javascript - 设置没有值的属性

> ID：13159180
> 
> 赞同：233
> 
> 时间：2012-10-31T13:32:15.067
> 
> 标签：javascript, jquery, attributes, attr

如何在不添加 jQuery 值的情况下设置数据属性？我要这个：

```
<body data-body> 
```

我试过：

```
$('body').attr('data-body'); // this is a getter, not working
$('body').attr('data-body', null); // not adding anything 
```

其他一切似乎都将第二个参数添加为字符串。是否可以只设置没有值的属性？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-10-31T13:37:00.043

该`attr()`函数也是一个setter函数。你可以只传递一个空字符串。

```
$('body').attr('data-body',''); 
```

空字符串只会创建没有值的属性。

```
<body data-body> 
```

> 参考 - [http://api.jquery.com/attr/#attr-attributeName-value](http://api.jquery.com/attr/#attr-attributeName-value)
> 
> attr( 属性名 , 值 )

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-10-31T13:37:58.327

也许尝试：

```
var body = document.getElementsByTagName('body')[0];
body.setAttribute("data-body",""); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-09-06T09:53:59.387

接受的**答案不再**创建仅名称属性（截至 2017 年 9 月）。

您应该使用 JQuery [prop()](http://api.jquery.com/prop/)方法来创建仅限名称的属性。

```
$(body).prop('data-body', true) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-03-24T06:10:56.683

不用 jQuery 你也可以做到！

例子：

```
document.querySelector('button').setAttribute('disabled', '');
```

```
<button>My disabled button!</button>
```

> *要设置布尔属性的值，例如禁用，您可以指定任何值。空字符串或属性名称是推荐值。重要的是，如果该属性完全存在，无论其实际值如何，它的值都被认为是真实的。该属性的缺失意味着其值为假。通过将 disabled 属性的值设置为空字符串 ("")，我们将 disabled 设置为 true，这会导致按钮被禁用。*
> 
> 来自[MDN Element.setAttribute()](https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-03-05T04:29:00.537

不确定这是否真的有益或为什么我更喜欢这种风格，但我所做的（在 vanilla js 中）是：

```
document.querySelector('#selector').toggleAttribute('data-something'); 
```

这将在没有值的情况下以全小写添加属性，或者如果元素上已经存在该属性，则将其删除。

[https://developer.mozilla.org/en-US/docs/Web/API/Element/toggleAttribute](https://developer.mozilla.org/en-US/docs/Web/API/Element/toggleAttribute)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-06-01T06:49:26.893

试试这个，它肯定会工作....

`document.querySelector("audio").setAttribute("autoplay", "");`

这将显示如下代码；-

```
<audio autoplay>

</audio> 
```

如果你像这样写，

`$("audio").attr("autoplay", "");`

然后，这将显示如下代码；-

```
<audio autoplay="autoplay">

</audio> 
```

# jquery - jQuery：在对象中传递函数？

> ID：13159182
> 
> 赞同：2
> 
> 时间：2012-10-31T13:32:21.833
> 
> 标签：jquery, object, fancybox

我正在尝试对加载有 fancybox 的 iframe 的内容进行样式设置。我需要将一个函数附加到 onComplete 事件处理程序，但它似乎不起作用。

我做错了吗？

```
 $(".contact-page .contact-form-buttons .fancybox.iframe").fancybox({
        type: 'iframe',
        width: 550,
        height: 350,
        onComplete: function() {
            console.log('completed')
        }
    }); 
```

我在控制台中没有得到任何东西。我也尝试过 onStart ，但也没有用。

** 更新 ** 由于 Yuriy 刚刚对解决方案发表了评论，我将在此处发布答案。我使用的是旧的 api 事件处理程序，Fancybox 2+ 的等价物是`afterLoad`or `beforeShow`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:46:01.957

I took a quick glance at other event implementations for the same plugin, and there seems to be 2 ways of doing it:

```
...
'onComplete'        : function() {
  console.log('completed');
}
... 
```

or

```
....
complete: function() {
  console.log('completed');
}
... 
```

# hadoop - 有没有办法将节点添加到正在运行的 Hadoop 集群中？

> ID：13159184
> 
> 赞同：15
> 
> 时间：2012-10-31T13:32:27.340
> 
> 标签：hadoop, cluster-computing, hbase, hdfs, cloudera

我一直在玩 Cloudera，我在开始工作之前定义了集群的数量，然后使用 cloudera 管理器来确保一切都在运行。

我正在开发一个新项目，而不是使用 hadoop，而是使用消息队列来分发工作，但工作的结果存储在 HBase 中。我可能会启动 10 台服务器来处理作业并存储到 Hbase，但我想知道我以后是否决定添加更多工作节点我可以轻松（阅读：可编程）使它们自动连接到正在运行的集群，以便它们可以在本地添加集群 HBase/HDFS？

这可能吗？我需要学习什么才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T14:34:42.213

这是将节点添加到[Hadoop](http://wiki.apache.org/hadoop/FAQ#I_have_a_new_node_I_want_to_add_to_a_running_Hadoop_cluster.3B_how_do_I_start_services_on_just_one_node.3F)和[HBase](http://wiki.apache.org/hadoop/Hbase/FAQ_Operations#A8)的文档。看文档，不需要重启集群。可以动态添加节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:03:06.033

以下步骤应该可以帮助您将新节点启动到正在运行的集群中。

```
1> Update the /etc/hadoop/conf/slaves list with the new node-name
2> Sync the full configuration /etc/hadoop/conf to the new datanode from the Namenode. If the file system isn't shared.  
2>  Restart all the hadoop services on Namenode/Tasktracker and all the services on the new Datanode. 
3>  Verify the new datanode from the browser http://namenode:50070
4>  Run the balancer script to readjust the data between the nodes. 
```

如果您不想在 NN 上重新启动服务，则在添加新节点时。我会说将名称添加到从属配置文件中。所以他们报告为退役/死节点，直到它们可用。仅遵循上述 DataNode 步骤。同样，这不是最佳做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-22T06:47:06.807

使用 CDH 5.8.5 (Hadoop 2.6) 更新了 Cloudera 的答案-

要向集群添加新节点，请在 ClouderaManager UI 上执行以下步骤，

1.  单击您的集群名称。
2.  转到主机列表。
3.  进入主机页面后，单击“将新主机添加到集群”。
4.  输入主机的 IP 并搜索。
5.  继续按照说明进行操作并继续执行后续步骤。
6.  最后为您的新节点分配角色，例如，如果它是数据节点，则仅分配与数据节点相关的角色并继续。
7.  最后，您的新节点将添加到您的集群中。单击完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:22:29.107

如果我对您的理解正确，您有您自己协调的工作人员连接到 HBase 以保存他们的数据。您可以根据需要拥有任意数量的这些，并且它们可以在添加时连接到 Hbase（只要它们可以看到 zookeeper quorum）。

如果您正在谈论增加 Hadoop 集群。由于您已经使用 Cloudera，您可以通过[cloudera Manager REST API](http://cloudera.github.com/cm_api/apidocs/v1/index.html)或[有人为它实现的 Java 客户端来做到这一点](https://github.com/axemblr/cloudera-manager-api#readme)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T09:16:21.727

无需重启hadoop集群即可完成。根据本[文档](http://webthanga.blogspot.in/2016/01/add-new-datanode-in-existing-hadoop.html)，您可以在包含文件中添加节点，并在 hdfs-site.xml 和 mapred-site.xml 文件中进行一些更改，您可以实现这一点。[本文档](http://webthanga.blogspot.in/2016/01/add-new-datanode-in-existing-hadoop.html)中给出了详细说明

# intellisense - $.ajax() 中“this”关键字的 TypeScript 解释

> ID：13159189
> 
> 赞同：5
> 
> 时间：2012-10-31T13:32:50.823
> 
> 标签：intellisense, typescript

我意识到 TypeScript 编译器正试图忠实于普通的旧 JavaScript，因为 TypeScript 确实是 JavaScript。但是，Intellisense 解释为“this”关键字的内容与其在运行时实际解析的内容之间存在脱节。例如，考虑以下 TypeScript ajax 调用：

```
 getAgencies() {
            var self = this;          
            $.ajax(liveString + "/Home/GetSupportedAgencies",
            {
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                error: Utilities.Logger.displayAjaxError,
                success: this.onGetAgenciesComplete
            });

        } 
```

及其相应的回调：

```
 onGetAgenciesComplete(agencies) {
                var self = this;
                    if (agencies == null)
                        Utilities.Logger.displayErrorOnLogConsole("There was an error retrieving supported agencies.  Refresh site and try again.");
                    else {
                        $.each(agencies, function (i, a) {
                            self._indexViewModel.agencies.push({ name: a.Name, fullName: a.FullName, shortName: a.ShortName, bbox: a.BBox, countryCode: a.CountryCode });
                        });

                        if (Modernizr.geolocation) {
                            navigator.geolocation.getCurrentPosition(
                                function (position) {
                                    self.initMapPage(position, self);
                                },
                                function (error) {
                                    Utilities.Logger.displayErrorOnLogConsole("Oops, we could not get your location at his time. Please try later.");
                                });
                        }
                        else {
                            Utilities.Logger.displayErrorOnLogConsole("Sorry, your browser does not return location information.");
                            self.getBusRoutes(self.agencyName);
                        }

                        // end of initialization
                    }
                } 
```

现在，当我将鼠标悬停在 TypeScript 源文件中 onGetAgenciesComplete 中的“var self = this”行上时，变量“self”的 Intellisense 定义表明它是 HomePageViewModelBase 类型，其中 HomePageViewModelBase 是包含上述方法的类。

上述生成的Javascript如下：

```
HomePageViewModelBase.prototype.getAgencies = function () {
            var self = this;
            $.ajax(liveString + "/Home/GetSupportedAgencies", {
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                error: Utilities.Logger.displayAjaxError,
                success: this.onGetAgenciesComplete
            });
        };
        HomePageViewModelBase.prototype.onGetAgenciesComplete = function (agencies) {
            var self = this;
            if(agencies == null) {
                Utilities.Logger.displayErrorOnLogConsole("There was an error retrieving supported agencies.  Refresh site and try again.");
            } else {
                $.each(agencies, function (i, a) {
                    self._indexViewModel.agencies.push({
                        name: a.Name,
                        fullName: a.FullName,
                        shortName: a.ShortName,
                        bbox: a.BBox,
                        countryCode: a.CountryCode
                    });
                });
                if(Modernizr.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        self.initMapPage(position, self);
                    }, function (error) {
                        Utilities.Logger.displayErrorOnLogConsole("Oops, we could not get your location at his time. Please try later.");
                    });
                } else {
                    Utilities.Logger.displayErrorOnLogConsole("Sorry, your browser does not return location information.");
                    self.getBusRoutes(self.agencyName);
                }
            }
        }; 
```

当在 HomePageViewModelBase.prototype.onGetAgenciesComplete 中执行变量“self”时，它被解析为看起来像 AjaxContext 而不是 HomePageViewModelBase 的实例。这是预期的行为还是我应该将其报告为错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:52:08.230

是的，您可能应该将其作为错误报告给他们，因为`this`inside an`$.ajax()`是指`$.ajax()`对象本身。

如果您想绕过它以使其正常工作，请将您的成功功能更改为：

```
success: self.onGetAgenciesComplete 
```

或者，如果您*希望*代表`this`您的班级，只需使用$.ajax的**上下文方法**

```
$.ajax({ 
    context: this,
    // now *this* will come from the previous scope,
    // which in your case, is your class "HomePageViewModelBase"

    // now that we know for certain what -this- refers to
    success: this.onGetAgenciesComplete
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:04:21.600

就任何（包括 Intellisense）静态分析而言，`onGetAgenciesComplete` *is* `HomePageViewModelBase`和 always will be 的上下文；除了在运行时，上下文将通过显式的内部 jQuery.ajax 上下文绑定动态设置。Intellisense 可以确定上下文将动态更改的唯一方法是实际执行该代码路径，但即使这样也会导致歧义：哪个上下文是正确的上下文？

如果您在其他地方“借用”一种方法来进行一次性调用怎么办？Intellisense 是否应该使用该调用站点来确定上下文？可能不是...

```
HomePage.prototype.onGetAgencies.call({ some other context }, ...); 
```

（为便于阅读而缩短。）

# gwt - GWT：将项目按降序放置在垂直面板中

> ID：13159190
> 
> 赞同：1
> 
> 时间：2012-10-31T13:32:52.427
> 
> 标签：gwt

每当我单击按钮时，我都有一个垂直面板和一个按钮，一个新标签按升序添加到我的垂直面板

```
 like this (Inside my verticalPanel)

        1stlabel
        2ndlabel
        3rdlabel 
```

虽然我希望它按顺序排列，但最新的应该在顶部

```
 like this (Inside my verticalPanel)

        3rdlabel
        2ndlabel
        1stlabel 
```

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:48:39.560

我记得你可以用

```
yourVerticalPanel.insert( yourWidget , beforeIndex ) 
```

只需使用`beforeIndex == 0`，你应该没问题。

# php - 查询中 WHERE 约束的顺序

> ID：13159192
> 
> 赞同：2
> 
> 时间：2012-10-31T13:32:54.747
> 
> 标签：php, mysql

> **可能重复：**
> [WHERE 子句中的字段顺序是否会影响 MySQL 的性能？](https://stackoverflow.com/questions/4035760/does-the-order-of-fields-in-a-where-clause-affect-performance-in-mysql)

WHERE 子句中元素的顺序会改变查询的速度吗？

我有以下内容：

```
SELECT * FROM table1 WHERE a<b 
```

. 这将返回 500 条记录。

```
SELECT * FROM table1 WHERE c<d 
```

. 这将返回 130000000 条记录。

现在，如果您有以下选择：

```
SELECT * FROM table1 WHERE a<b AND c<d 
```

或者

```
SELECT * FROM table1 WHERE c<d AND a<b 
```

这两个查询中的哪一个会更快？顺序重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:35:54.823

唯一会影响性能的是索引。

如果您有一个索引 on `(a, c)`，则谓词 of`WHERE c < d AND a < b`会运行得更慢，因为索引从左到右。

如果您没有索引，则顺序无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:34:08.140

不，没有区别。就像在数学中一样，`A + B = B + C`. 这只是意味着互换两者没有任何区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:36:02.633

我认为不会有任何区别，无论如何它都会被sql优化。有关此问题的更多信息：[WHERE 子句中字段的顺序会影响 MySQL 的性能吗？](https://stackoverflow.com/questions/4035760/does-the-order-of-fields-in-a-where-clause-affect-performance-in-mysql)

# java - jfreechart，图表创建错误

> ID：13159202
> 
> 赞同：2
> 
> 时间：2012-10-31T13:33:36.810
> 
> 标签：java, jsp, jfreechart

这对你们来说可能是一个愚蠢的问题，但我有以下错误。我认为所有参数`createLineChart`都是正确的。我不知道为什么它说我错了......你能告诉我为什么我会收到这个错误吗？

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 102 in the jsp file: /graph.jsp
The method createLineChart(String, String, String, CategoryDataset, boolean, boolean, boolean) in the type ChartFactory is not applicable for the arguments (String, String, String, DefaultCategoryDataset, PlotOrientation, boolean, boolean, boolean)
99:          }
100:         
101:         
102:         JFreeChart chart = ChartFactory.createLineChart("Houlry", "Usage", "time", hourlydata , PlotOrientation.HORIZONTAL, true, true, false);
103: 
```

编辑感谢您的回复！

但是如果我删除 PlotOrientation，我会得到

```
method createLineChart n class org.jfree.jfreechartChartFactory cannot be applied to given types;
required java.lang.String,java.langString,java.langString,org.jfree.data.category.CategoryDataset,org.jfree.chart.plot.PlotOrientatio,boolean,boolean boolean 
```

初始化：

```
DefaultCategoryDataset hourlydata = new DefaultCategoryDataset();
for (int k = 1; k <= i; k++) {
        if (k == 1){
           label = "CPU Average";
        }
        if (k == 2){
            label = "CPU Max";
        }
        if (k == 3){
            label = "RAM Average";
        }
        if (k == 4){
            label = "RAM Max";
        }

        for (int j = 1; j < 7; j++) {
            if (j == 1){
                time = "10";
            }
            if (j == 2){
                time = "20";
            }
            if (j == 3){
                time = "30";
            }
            if (j == 4){
                time = "40";
            }
            if (j == 5){
                time = "50";
            }
            if (j == 6){
                time = "60";
            }
            hourlydata.addValue(arr[k][j], label, time);
            }
         } 
```

我通过导入一堆库以某种方式解决了这个问题：/感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:37:43.027

关于错误，您正在尝试`createLineChart`使用 PlotOrientation 参数调用该方法。该方法没有此参数。

也许这不是您要调用的方法。

# c# - Fluent Validation 自定义验证

> ID：13159205
> 
> 赞同：4
> 
> 时间：2012-10-31T13:33:44.347
> 
> 标签：c#, asp.net-mvc-3, validation

我想在我的 MVC 项目中使用 Fluent Validation (http://fluentvalidation.codeplex.com) 制定 2 条规则。

当 Company 和 Name 都为空时，什么都不会发生。如果它们中的任何一个被填充，则也不应该发生任何事情。如果没有填写公司或名称，请在两者处显示标签。（错误信息可能相同）

到目前为止，我已经尝试过：

```
RuleFor(x => x.Name)
.NotEmpty()
.WithMessage("Please fill in the company name or the customer name")
.Unless(x => !string.IsNullOrWhiteSpace(x.Company));

RuleFor(x => x.Company)
.NotEmpty()
.WithMessage("Please fill in the company name or the customer name")
.Unless(x => !string.IsNullOrWhiteSpace(x.Name)); 
```

我尝试过When、Must 和Unless 的组合，但它们都不起作用。当我什么都不填时，这两个属性上不会显示任何错误。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:58:30.463

从评论看来，问题在于启用客户端验证，并且规则实际上在回发时起作用。如[FluentValidation wiki](http://fluentvalidation.codeplex.com/wikipage?title=mvc)中所述，唯一支持的客户端规则是

*   非空/非空
*   匹配（正则表达式）
*   InclusiveBetween（范围）
*   信用卡
*   电子邮件
*   EqualTo（跨属性相等比较）
*   长度

所以基本上你想要达到的目标是不支持开箱即用的。

[请在此处查看](https://stackoverflow.com/questions/9380010/unobtrusive-client-validation-using-fluentvalidation-and-asp-net-mvc-lessthanore)自定义客户端 FluentValidation 规则的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:37:16.717

您可以使用 when 条件添加两个规则：

```
RuleFor(x => x.Name)
.NotEmpty()
.When(x => string.IsNullOrEmpty(x.Company))
.WithMessage("Please fill in the company name or the customer name");

RuleFor(x => x.Company)
.NotEmpty()
.When(x => string.IsNullOrEmpty(x.Name))
.WithMessage("Please fill in the company name or the customer name"); 
```

# android - 重复请求 apple-touch-icon-precomposed.png 并在 head 中设置了 apple-touch-icon

> ID：13159207
> 
> 赞同：17
> 
> 时间：2012-10-31T13:33:47.030
> 
> 标签：android, html

我在页面顶部为我的 apple-touch-icon 文件设置了路径：

```
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"> 
```

但每隔一段时间，我就会收到一批（一次超过五个）来自 Android 用户的 /apple-touch-icon-precomposed.png 请求。这是正常行为吗？如何让它停止？我知道我可以添加文件，但我不想创建文件的新版本并希望得到相同的效果。

**更新** 我们最近看到了对 apple-touch-icon-144x144.png 的请求，但我没有在网上找到任何解释我们需要它的原因（无论如何我们都添加了它）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T06:43:54.930

见[http://www.ravelrumba.com/blog/android-apple-touch-icon/](http://www.ravelrumba.com/blog/android-apple-touch-icon/)

'... Android 2.1 ... 仅当您使用“apple-touch-icon-precomposed”的 rel 值链接到该图标时才会使用该图标。

所以它似乎是“正常的”（不适用于非预组合版本）。

另请参阅[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14)

高分辨率 iPad 尺寸：144 x 144

# android - Android 中的 onUpgrade() sqlite 数据库

> ID：13159210
> 
> 赞同：10
> 
> 时间：2012-10-31T13:33:55.437
> 
> 标签：android, sqlite

我创建了一个 Android 应用程序，在启动时检查是否有新版本的应用程序。如果是，则应用程序下载新的 apk 文件并过度安装新的 apk。我的应用程序使用 sqlite 数据库。但是这个数据库，从一个版本到另一个版本可以改变。我想我必须使用以下方法：

```
 onUpgrade() 
```

但我不知道如何使用它。

当我启动应用程序时，我将此代码用于 crete 数据库（如果不存在）：

```
DbHelper mDHelper = new DbHelper(context, DB_NAME, null, DB_VERSION) 
```

如果我想使用`onUpgrade()`方法，我应该改变什么？我什么时候必须调用它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T13:35:44.583

`onUpgrade()`当您的数据库版本更改时调用（您自己不调用它），这意味着基础表结构更改等。

一般来说，这意味着操作系统告诉你“*嘿，你要求数据库结构版本 10，但我发现我们这里有一些旧的东西，所以这是你在开始使用数据库之前修复它的机会（并且可能由于结构不匹配而崩溃） ”*。

在这种方法中，您应该做所有必要的事情，嗯.. 升级旧数据库的结构以匹配当前版本要求的结构，例如添加/删除列、转换行内容甚至完全删除旧数据库并从头开始创建它 - 对于 Android你在这里做什么并不重要——这只是一种紧急回调，让你的代码完成必要的工作（如果有的话）。您需要注意用户可能不会经常更新，因此您必须始终处理从版本 X 升级到 Y 的操作，因为您知道 X 可能不等于 ie (Y-1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:43:56.820

如果您使用的是 SQLiteOpenHelper，则无论何时更改数据库版本都会调用 onUpgrade。有一个额外的要求才能工作。数据库名称必须保持不变。

```
Old Version:
dbName = "mydb.db"
dbVersion = 1

New Version:
dbName = "mydb.db"
dbVersion = 2 
```

在内容提供者的 onCreate 中，您创建一个接受这些参数的 SQLiteOpenHelper 实例。您的 SQLiteOpenHelper 实现如下所示：

```
public static final class MySQLiteOpenHelper extends SQLiteOpenHelper {

        public MySQLiteOpenHelper(Context context, int dbVersion, String dbName) {
            super(context, dbName, null, dbVersion);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            //Code to create your db here
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // Code to upgrade your db here
        }

} 
```

**当您更改表或在数据库中添加更多表时，它也会被调用**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-01T14:00:49.960

我发现这很有帮助 [https://thebhwgroup.com/blog/how-android-sqlite-onupgrade](https://thebhwgroup.com/blog/how-android-sqlite-onupgrade)

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion < 2) {
         db.execSQL(DATABASE_ALTER_TEAM_1);
    }
    if (oldVersion < 3) {
         db.execSQL(DATABASE_ALTER_TEAM_2);
    }
} 
```

# jquery - Drupal7 jQuery AJAX 加载内容无页面刷新

> ID：13159215
> 
> 赞同：0
> 
> 时间：2012-10-31T13:34:09.853
> 
> 标签：jquery, ajax, drupal

我正在尝试让 AJAX 脚本在我的页面上运行（使用 Drupal 7）。单击我的菜单链接时应加载页面的内容，但不应刷新页面（这会干扰 jQuery 中为横幅设置动画的不同脚本）

这是源代码：

```
 (function ($, Drupal) {

    jQuery.error = console.error;

    $("<link/>", {
       rel: "stylesheet",
       type: "text/css",
       href: "../css/pages.css"
    }).appendTo("head");

    $(document).ready(function()
    {
      $('.menu-704,.menu-797,.menu-359,.menu-796').click(function()
      {
         $('#main').load('linktopage.html');
      });
});

    })(jQuery, Drupal); 
```

现在，这确实有效，但我遇到以下问题：

*   每当我单击导航链接时，整个 div#main 都会由于某种未知原因向下移动
*   这样做会复制我通过 Drupal 中的外观设置添加的徽标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:40:01.963

如果链接是主题页面，请尝试更改为 $('#main').load('linktopage.html #main')

# java - 尝试创建多个 JLabel，但只出现一个

> ID：13159216
> 
> 赞同：3
> 
> 时间：2012-10-31T13:34:10.197
> 
> 标签：java, swing, layout, jlabel, border-layout

我正在尝试创建多个相同形式的 JLabel，然后尝试将它们添加到同一个 JPanel。但是，只有一个 JLabels 出现，我不知道为什么！这是我编写的代码：

```
 final JPanel labelPanel = new JPanel(new BorderLayout());
    panel.add(labelPanel, BorderLayout.NORTH);

    JLabel[] dashedLineLabel = new JLabel[wordLength];

    for (int i = 0; i < wordLength; i++)
    {   
        dashedLineLabel[i] = new JLabel("__  ");
        dashedLineLabel[i].setFont(new Font("Serif", Font.BOLD, 30));
        labelPanel.add(dashedLineLabel[i]);
    } 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:38:57.563

You aren't using the BorderLayout properly. The labels are all added at the center location of the layout, and thus overwrite each others. Try a FlowLayout instead, or even better, a [MigLayout](http://www.miglayout.com/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:57:09.760

您不能使用`BorderLayout`它，因为该布局只有 5 个组件的空间： `BorderLayout.CENTER`、`BorderLayout.NORTH`、`BorderLayout.WEST`、`BorderLayout.SOUTH`、`BorderLayout.EAST`。

**具有内置布局之一的解决方案：**

我建议使用 a`FlowLayout`或 a `GridLayout`，这取决于你想要什么。您仍然可以使用 BorderLayout 作为外面板，但只需引入具有上述布局之一的内面板。

因此，使用 a `GridLayout`，您可以将标签包装在网格布局中，然后将其放入边框布局中。您的代码如下所示：

```
panel.setLayout(new BorderLayout());
final JPanel upperPanel = new JPanel(); 
panel.add(upperPanel, BorderLayout.NORTH); // add some stuff in the north

final JPanel innerPanel = new JPanel(new GridLayout(1,0));
JLabel[] dashedLineLabel = new JLabel[wordLength];
for (int i = 0; i < wordLength; i++) {   
    dashedLineLabel[i] = new JLabel("__  ");
    dashedLineLabel[i].setFont(new Font("Serif", Font.BOLD, 30));
    innerPanel.add(dashedLineLabel[i]);
} 

panel.add(innerPanel, BorderLayout.CENTER); 
```

**MigLayout 的解决方案：**

如果您不想在不同的布局之间进行选择，您还可以使用[**MigLayout**](http://www.miglayout.com/)，这是一个 3rd 方布局管理器，它基本上为您提供了一个管理器中的所有选项。而且您将拥有更清晰的代码（恕我直言）。缺点当然是您必须使用外部 jar 文件作为依赖项。（顺便说一句：自从我发现了 MigLayout 之后，我再也没有使用过其他布局管理器。）

与`MigLayout`：

```
final JPanel labelPanel = new JPanel(new MigLayout("", "", "")); 
panel.add(labelPanel, "north");

JLabel[] dashedLineLabel = new JLabel[wordLength];
for (int i = 0; i < wordLength; i++) {   
    dashedLineLabel[i] = new JLabel("__  ");
    dashedLineLabel[i].setFont(new Font("Serif", Font.BOLD, 30));
    panel.add(dashedLineLabel[i], "wrap");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T13:46:02.910

BorderLayout specification says

> A border layout lays out a container, arranging and resizing its components to fit in five regions: north, south, east, west, and center. Each region may contain no more than one component, and is identified by a corresponding constant: NORTH, SOUTH, EAST, WEST, and CENTER. When adding a component to a container with a border layout, use one of these five constants,....

in [here](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/BorderLayout.html)

As you are using the default add method, it adds components to the center of the parent and thus in your case you see only one component being added.

You can use other layout (i.e. flow or some other) to satisfy your need.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:41:41.560

如果使用`BorderLayout`简单的方法使用 and 添加组件，`add`它们都将添加到中心。如果 center 没有其他容器，它们都在彼此之上，你可以看到最上面的一个。正确使用 BorderLayout 或使用其他布局。

从[BorderLayout 的文档](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)：

```
A border layout lays out a container, arranging and resizing its components to fit in five regions: north, south, east, west, and center. Each region may contain no more than one component, and is identified by a corresponding constant: NORTH, SOUTH, EAST, WEST, and CENTER. When adding a component to a container with a border layout, use one of these five constants, for example:

    Panel p = new Panel();
    p.setLayout(new BorderLayout());
    p.add(new Button("Okay"), BorderLayout.SOUTH);

As a convenience, BorderLayout interprets the absence of a string specification the same as the constant CENTER:

    Panel p2 = new Panel();
    p2.setLayout(new BorderLayout());
    p2.add(new TextArea());  // Same as p.add(new TextArea(), BorderLayout.CENTER); 
```

# jquery - 使用 Ajax、IE9 和拒绝访问加载本地 JSON 文件

> ID：13159219
> 
> 赞同：0
> 
> 时间：2012-10-31T13:34:21.717
> 
> 标签：jquery, ajax, internet-explorer-9

我正在尝试通过 jquery 使用以下 ajax 调用加载本地 json 文件

```
$.ajax({
          url: langFile,
          async: false,
          dataType: 'json',
          error: function(jqXHR, Status, ErrorThrown) {
            alert("Could not load file: " + ErrorThrown);  
          },
          success: function (response) {
            // do stuff with response
            localStrings = response;
          }
        }); 
```

它在 Firefox 中按预期工作，但是当我尝试在 IE9 中加载文件时，我只是得到“访问被拒绝”，我已经尝试了我在谷歌上找到的所有东西，但没有设法解决这个问题。我试图转移到 JSONP 但无法完成这项工作，因为它一直给我语法错误:( 脚本应该从本地文件中获取 json，然后将 json 的内容放入一个名为 localStrings 的变量中。

json 文件如下所示：

```
{
"Header1": "List1",
"Header2": "List2"
} 
```

有没有办法让它在 IE9 中工作？

# jquery - 选择日期时jQuery datapicker执行功能

> ID：13159221
> 
> 赞同：1
> 
> 时间：2012-10-31T13:34:29.617
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

从 jQuery 日期选择器中选择日期时是否可以执行自定义函数？

我曾尝试使用 onClose 选项，但这似乎只是在第一次加载页面时执行该功能，之后我可以根据需要多次更改日期并且该功能不执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:36:22.737

尝试：

```
$("#id").datepicker({
    onSelect: function( date ){ 
        // do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:41:11.940

```
$( "#datepicker" ).datepicker({
    onSelect: function(dateText, obj){
         alert(dateText); // Or do something else you need it to do
    }        
});​ 
```

我在 jsFiddle 中保存了一个示例 - [http://jsfiddle.net/GZE7D/](http://jsfiddle.net/GZE7D/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:36:31.763

使用“onSelect”选项。打字打到 30 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:38:33.400

您可以尝试在`onSelect`函数中运行代码：

```
$('.datepicker').datepicker({
    dateFormat: 'dd-mm-yy',
    numberOfMonths: 1,
    onSelect: function(selected,evnt) {
         // Run your code here
    }
}); 
```

# php - 在不同的网站上使用 facebook 应用程序

> ID：13159226
> 
> 赞同：0
> 
> 时间：2012-10-31T13:34:48.820
> 
> 标签：php, facebook-graph-api, wordpress

我知道不可能将多个网站 url 注册到同一个 facebook 应用程序，但我认为有一个解决方案，这个解决方案是在一个固定的 url 中创建某种登录服务并通过这个 url 登录。

在 wordpress 中，有一些插件适用于您的 facebook（发布、上传等）适用于他们自己的 facebook 应用程序，您不必制作您的应用程序，我注意到当我登录时，它会将我重定向到他们的网站首先是 facebook，然后返回给我，我正在谈论的这个解决方案....其中一个名为 wordbooker 的插件

所以我做了一个应用程序并给它我的网站网址，并在我的网站上制作了一个.php页面（这将是登录服务）我向它发送我想从它登录到facebook的网址，然后这个.php页面转到 facebook 并登录，然后返回到我的页面，然后返回到请求的页面。

我将从 facebook 登录返回的所有参数（状态和代码）发送到请求的网站，但它没有登录，我不知道为什么？我想我误解了一些东西......

所以你能帮忙吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:50:54.210

您只能在应用程序中定义一个网站，唯一的方法是使用子文件夹或子域。

顺便说一句，这也违反了 facebook 规则，facebook 应用程序只能用于一个站点/目的。

# mysql - SQL 动态列

> ID：13159227
> 
> 赞同：0
> 
> 时间：2012-10-31T13:34:56.440
> 
> 标签：mysql, sql, pivot, pivot-table

我有以下 SQL 语句。列 wrapupcode 最多可以有四个值：

销售、服务、会议、其他

运行 SQL 时，列包装代码显示为单个列。我想解决的是根据该值动态创建一个新的包装代码。我们可能会添加或删除代码，否则我会考虑价值。

这是基于 MySQL 数据库的。

数据目前看起来像：

```
user  wrapupcode  intialtime  endofwrapup  timediff
joe   Service     11:38       11:39        1
jenny Sales       11:35       11:36        1
joe   Service     11:41       11:42        1 
```

但想看看它是否可以通过 MySQL 数据库上的 SQL：

```
user  Service  Sales     timediff
joe   2                  2
jenny          1         1 
```

我可以对时间和总数进行求和/平均，它只是在每个不同的包装代码上添加一个新列。

```
SELECT
     ( SELECT loginid FROM `axpuser` WHERE age.userid = axpuser.pkey ) as user,
     ( SELECT name FROM `breakcode` WHERE age.wrapupcode = pkey ) as wrapupcode,
     time(age.`instime`) as initialtime,
     age.`ENDOFWRAPUPTIME` AS endofwrapup,
     timediff(age.`ENDOFWRAPUPTIME`, time(age.`instime`)) as timediff
  FROM
     agentcallinformation age
  WHERE
     age.endofwrapuptime IS NOT null and ( SELECT name FROM `breakcode` WHERE age.wrapupcode =   pkey ) <> '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:09:33.717

基本语法将是：

```
select user,
    sum(case when wrapupcode = 'Service' then 1 else 0 end) Service,
    sum(case when wrapupcode = 'Sales' then 1 else 0 end) Sales,
    sum(case when wrapupcode = 'Meeting' then 1 else 0 end) Meeting,
    sum(case when wrapupcode = 'Other' then 1 else 0 end) Other,
    count(timediff) timediff
from
(       
    <yourquery>
) src
group by user 
```

硬编码的静态版本将类似于以下内容：

```
select user,
    sum(case when wrapupcode = 'Service' then 1 else 0 end) Service,
    sum(case when wrapupcode = 'Sales' then 1 else 0 end) Sales,
    sum(case when wrapupcode = 'Meeting' then 1 else 0 end) Meeting,
    sum(case when wrapupcode = 'Other' then 1 else 0 end) Other,
    count(timediff) timediff
from
(       
    select u.loginid as user,
        b.name wrapupcode,
        time(age.`instime`) as initialtime,
        age.`ENDOFWRAPUPTIME` AS endofwrapup,
        count(timediff(age.`ENDOFWRAPUPTIME`,   time(age.`instime`))) as timediff
    from agentcallinformation age
    left join `axpuser` u
        on age.userid = u.pkey
    left join `breakcode` b
        on age.wrapupcode = b.pkey
        and age.wrapupcode <> ''
    WHERE age.endofwrapuptime IS NOT null 
) src
group by user 
```

我将查询更改为使用`JOIN`语法而不是相关的子查询。

如果您需要动态版本，则可以使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when wrapupcode = ''',
      name,
      ''' then 1 else 0 end) AS ',
      name
    )
  ) INTO @sql
FROM breakcode;

SET @sql = CONCAT('SELECT user, ', @sql, ' 
                    , count(timediff) timediff
                  from
                  (     
                    select u.loginid as user,
                        b.name wrapupcode,
                        time(age.`instime`) as initialtime,
                        age.`ENDOFWRAPUPTIME` AS endofwrapup,
                        count(timediff(age.`ENDOFWRAPUPTIME`,   time(age.`instime`))) as timediff
                    from agentcallinformation age
                    left join `axpuser` u
                        on age.userid = u.pkey
                    left join `breakcode` b
                        on age.wrapupcode = b.pkey
                        and age.wrapupcode <> ''
                    WHERE age.endofwrapuptime IS NOT null 
                ) src
                GROUP BY user');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# php - Phpcassa - 我很难理解这段代码

> ID：13159232
> 
> 赞同：1
> 
> 时间：2012-10-31T13:35:15.830
> 
> 标签：php, cassandra, cql, phpcassa

我仍在尝试围绕 cassandra 中复合键的整​​个概念展开思考。[我从https://github.com/thobbs/phpcassa/blob/master/examples/composites.php](https://github.com/thobbs/phpcassa/blob/master/examples/composites.php)获取了这段代码，我很难理解这意味着什么（请参阅下面的问题/评论）：

```
$cf->insert_format = ColumnFamily::ARRAY_FORMAT;
$cf->return_format = ColumnFamily::ARRAY_FORMAT;

$key1 = array("key", 1); // Which one of these is a column name?
$key2 = array("key", 2);

$columns = array(
    array(array(0, "a"), "val0a"), //Which is value, and which is column name?

    array(array(1, "a"), "val1a"),
    array(array(1, "b"), "val1b"),
    array(array(1, "c"), "val1c"),

    array(array(2, "a"), "val2a"),

    array(array(3, "a"), "val3a")
);

/**
* What type of queries in (CQL if possible) can I achieve with this?
/ 
```

我想了解的是：

*   在`array("key", 1);`are`key`和`1`组成这个键的两列中，或者`1`是一个值`key`？
*   其中哪一个是列名，哪一个是 value `array(array(0, "a"), "val0a")`？
*   以表格形式（或尽可能接近），我如何将这些数据可视化为存储在数据库中。我知道它不是以表格形式存储的，只是为了帮助我理解。

我是 NoSQL 技术的新手，这让我大吃一惊。

谢谢您的帮助 ：-）

**编辑**

还有几个问题：

*   如果您有一行具有复合主键，这是否意味着该行中的所有列都必须是复合的？
*   我想要一个具有以下结构的列族：

    ```
    CREATE COLUMN FAMILY users (
        userid int,
        username varchar,
        firstname varchar,
        lastname varchar,
        PRIMARY KEY (userid,username)
    )
    // How can I represent this structure with Phpcassa? 
    // I tried to make every column `array("firstname" => "my name")`, but it didn't work 
    ```

*   我是否允许我的组合中的一个键为空（在上面的示例中`username = null`）并且可能稍后添加一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:49:04.613

该示例的下两行可能会有所帮助：

```
$cf->insert($key1, $columns);
$cf->insert($key2, $columns); 
```

由于我不了解 PHP，因此我在这里进行了轻微的猜测，但是从`cf`columnfamily 的命名来看，这似乎很清楚，并且这两个调用正在使用键和`insert()`向两行添加多个列。`$key1``$key2`

行键是组合键，即第一个行键是字符串`"key"`和数字的组合`1`。我相信，在 phpcassa 中，复合键被构造为数组。

```
$key1 = array("key", 1);
$key2 = array("key", 2); 
```

请注意，在示例中，行键*和*列键是复合键。

这构成`$columns`了一个列数组；每列都需要一个名称（键）和一个值...

例如`array(0, "a")`是一个列名（列名也是复合键），并且`"val0a"`是一个列值。

数据可视化如下：首先，Cassandra 中行和列的总体布局（例如，显示 2 行，每行 3 列）。请注意，列不必遵循表格结构 - 我们可以在一行中使用 name3，在另一行中使用 name4，或者在不同行中使用完全不相关的列名。

```
row1 -> name1  name2  name3  ...
        val1   val2   val3   ...

row2 -> name1  name2  name4  ...
        val1   val2   val4   ... 
```

接下来，使用示例中的一些特定（复合）键（2 行 6 列）。这就是它的实际存储方式（假设这是这些列的正确排序顺序，这将取决于比较器）。

```
("key", 1) ->  (0, "a")    (1, "a")    (1, "b")    (1, "c")    (2, "a")    (3, "a")
               "val0a"     "val1a"     "val1b"     "val1c"     "val2a"     "val3a"

("key", 2) ->  (0, "a")    (1, "a")    (1, "b")    (1, "c")    (2, "a")    (3, "a")
               "val0a"     "val1a"     "val1b"     "val1c"     "val2a"     "val3a" 
```

但是由于复合键，您可以使用另一层嵌套来可视化它（这里，只是扩展列键）。这给出了 Cassandra Supercolumns 有时用于的相同类型的结构：

```
("key", 1) ->        0                 1                2               3
               "a" -> "val0a"    "a" -> "val1a"    "a" -> val2a"   "a" -> "val3a"
                                 "b" -> "val1b" 
                                 "c" -> "val1c" 
```

我怀疑如果您运行该示例并可以看到输出，它会变得更加清晰！

**更新**以解决额外的问题：

我认为您可以独立决定是否使用复合行键和列键：查看配置行，列键为 Long、Ascii 的行键之一，以及 Ascii、Long 的行键之一。

```
"comparator_type" => "CompositeType(LongType, AsciiType)",
"key_validation_class" => "CompositeType(AsciiType, LongType)" 
```

您不能有空键 - 在 Cassandra 中，您只需省略该列（因为它不是真正的表），如果需要，稍后再添加。

只是对您的列族设计的简短评论（因为这个答案变得很长！）。我会考虑为什么你想要一个复合主键 - 当然用户 ID 应该是唯一的吗？

您可以只为每个用户使用一行，以用户 ID 为键（或者如果您确实需要，则以用户 ID、用户名的组合为键），然后为每个其他字段使用一列。很像一个标准的关系表。我认为这里不需要使用复合列名。在尝试复合键之前，也许先找到一些更简单的 phpcassa 示例......

# grep - 如何在命令提示符下获取一行的 x 字？

> ID：13159245
> 
> 赞同：2
> 
> 时间：2012-10-31T13:35:55.473
> 
> 标签：grep, command, prompt

此刻我得到：

```
tasklist | grep java 
```

它提供以下行：

```
java.exe      1234 Console     1      100.0k 
```

现在我只需要第二个参数，在本例中为 1234。

```
tasklist | grep java | ??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:40:31.317

```
tasklist | awk '/java/{ print $2 }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:42:05.053

用于`awk`打印与您的 grep 模式匹配的行的第二个单词

```
tasklist | grep java | awk '{print $2}' 
```

# grails - 字段限制使用

> ID：13159246
> 
> 赞同：-2
> 
> 时间：2012-10-31T13:36:00.320
> 
> 标签：grails, spring-security

在我的 grails 应用程序中：一个域类有 5 个字段。我希望第三个字段只能由管理员填写如何完成请帮助我

例子：

```
class abc {
    String f1
    String f2
    string f3
    string f4
    string f5 
    string constraints
} 
```

现在我只希望管理员访问字符串 f3。其余用户禁用它请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:47:16.513

You can use [bindData](http://grails.org/doc/latest/ref/Controllers/bindData.html) to limit which fields of a domain are being changed when you pass params to it. You could change the list of editable fields depending on whether a user or an admin is editing it.

# java - 如何在 Eclipse 中打印 QuickFix 建议

> ID：13159248
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:36:05.493
> 
> 标签：java, eclipse

在没有谷歌搜索的帮助下，任何人都可以解释是否可以在控制台中打印 eclipse quickfix 建议以解决错误，如果可以，该怎么做？

我要打印的提案快照：http: [//i.imgur.com/W5ElS.png](http://i.imgur.com/W5ElS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:57:56.767

好的，只是为了解释为什么控制台中的自动完成是一个坏主意-

启动linux。转到包含大量文件的文件夹。按 A 然后按 Tab 几次，然后再输入一些字母并按 Tab 几次。

在第五个选项卡之后，您的“意图”（您尝试键入并复制/粘贴到文件中以获取说明或其他内容）完全丢失，您甚至可能忘记您开始做的事情。文件名建议将淹没您的输入并破坏“命令流”。

现在，如何在控制台中获取方法名称 -

我建议反思。这是上面的东西[http://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/reflection/index.html](http://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/reflection/index.html)

您只需要获取一个类的所有方法并打印它们的名称。这看起来与您的导师提到的完全一样。如果他想看看你是怎么做到的，他会看到很多他不理解的代码，并且可能会说“是的，是的，优秀的学生”并通过你。

如果你想成为一名程序员，你不妨了解一下这个行业的大秘密——我们造假很多。学习如何正确伪造；）

或者只是去这里[http://en.wikibooks.org/wiki/Java_Programming/Reflection/Accessing_Private_Features_with_Reflection](http://en.wikibooks.org/wiki/Java_Programming/Reflection/Accessing_Private_Features_with_Reflection)并复制/粘贴。

编辑：

你想要这块

```
Method methods[] = someClass.getClass().getDeclaredMethods(); 
System.out.println("Access all the methods"); 
for (int i = 0; i < methods.length; i++) { 
   System.out.println("Method Name: " + methods[i].getName());
   System.out.println("Return type: " + methods[i].getReturnType());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:40:07.993

你应该对上层阶级使用鲨鱼建议。然后，您应该使用适当的结构来索引所有内容。

# apache-flex - 如何从未显示的 flex 组件创建位图

> ID：13159250
> 
> 赞同：0
> 
> 时间：2012-10-31T13:36:13.310
> 
> 标签：apache-flex, actionscript

我有一个显示多个元素的容器，我想创建一个位图来表示其中的一些元素。

因为我不想从它们的所有者那里删除元素，所以我使用了第二个容器，我在其中插入了为每个元素创建的位图。然后我从第二个容器生成位图。该算法如下所示：

```
const selectionGroup:Group = new Group();

for each ( var element:UIComponent in selectedElements ) {

    const image:Image = new Image();
    image.x = element.x;
    image.y = element.y;
    image.source = createBitmapFrom( element );
    selectionGroup.addElement( image );
}

return createBitmapFrom( selectionGroup ); 
```

但是，除非我在某处显示该组，否则最终的位图永远不会包含任何内容。最终，我也可以在调用 creationComplete 事件后立即将其删除，但我不喜欢这种解决方案，因为它会使界面闪烁。

我尝试将元素插入到 BoarderContainer 而不是 Group 中，将 creationPolicy 设置为“all”，并在最终的 createBitmapFrom() 之前调用 createDeferedContent()，但图像仍然是透明的。

因此，下一个解决方案是从各种子位图组成最终位图，除非有人告诉我如何捕获从未显示的组件。

如何告诉 Flex 创建组件的内容而不显示它？

# android - 处理程序发布延迟，随机数和循环

> ID：13159252
> 
> 赞同：1
> 
> 时间：2012-10-31T13:36:19.030
> 
> 标签：android

大家好，我正在开发一款游戏，我希望它在随机的时间内向我展示一些精灵，所以我这样做了：

```
for (int i = 0; i < 30; i++) {

    final int min = 5000;
    final int max = 25000;
        Random r = new Random();
        int i1 = r.nextInt(max - min + 1) + min;
        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {

            public void run() {
                //MyCODE  
            }
        }, i1);}

    } 
```

但问题是，当我使用 postDelayed 时，它已经定义了从现在开始的 i1 时间的 30 倍，然后它会一起显示精灵。

我想做的是：

```
 i1 = New random number between 5000-25000 -> first = run //MyCODE after "i1" seconds -> i1 = New random number between 5000-25000 -> second = run //MyCODE after "i1" seconds since "first" ........ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:11:29.487

我认为问题是“时不时”的意思，你使用的是随机的。时不时地落在时间范围内，因此完全有可能同时获得它们。

此外，您正在使用相同的种子重新创建相同的 Random() 数字生成器，因此它可能会在您第一次调用它时产生相同的数字。随机从来都不是真正的随机。

使用当前时间的种子创建一个随机对象。它会使它看起来比实际更随机。

```
Handler spriteHandler = new Handler(); // Keep this global to the scope of the class. You only need one.
final int MIN = 5000;
final int MAX = 25000;
Random r = new Random(System.getCurrentTimeMillis()); 

for (int i = 0; i < 30; i++) {
        int i1 = r.nextInt(MAX - MIN + 1) + MIN;
        spriteHandler.postDelayed(new Runnable() {
            public void run() {
                //MyCODE  
            }
        }, i1);}
    } 
```

如果您**不**希望它们同时出现，那么您需要输入一种算法来调整时间（如果已经出现）。不过，这将取决于您想要什么。

# c# - 将 WPF Web 浏览器的内容保存到 Excel 文件

> ID：13159254
> 
> 赞同：1
> 
> 时间：2012-10-31T13:36:21.437
> 
> 标签：c#, wpf, wpf-controls

我想知道是否有一种方法可以获取 Web 浏览器控件的内容并将其保存为可以在 Excel 中打开的格式？目前，我有一个应用程序从用户那里获取数据并将其转换为表格并在 WPF Web 浏览器控件中以 html 格式显示。我可以成功将此控件内容导出为 PDF 文档，如下所示：

```
string fileName = System.IO.Path.GetTempPath() + Guid.NewGuid().ToString() + ".html";

File.WriteAllText(fileName, generateHtml());

//Creates a new instance of the Microsoft office interop for using MS Word
Microsoft.Office.Interop.Word.Application app = new Microsoft.Office.Interop.Word.Application();
app.Visible = false;
Microsoft.Office.Interop.Word.Document doc = app.Documents.Open(fileName);
doc.SaveAs("C:\\Temp\\testExport.pdf", 17);
app.Quit(); 
```

这对于导出 PDF 文件效果很好，我遇到的问题是我无法终生使用 Excel 文件。到目前为止，我正在尝试这样做：

```
 string filePath = System.IO.Path.GetTempPath() + Guid.NewGuid().ToString() + ".html";

  File.WriteAllText(filePath, generateHtml());

  //Creates a new instance of Microsoft office interop for using MS Excel
  Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
  //Create a new instance of a workbook
  Microsoft.Office.Interop.Excel.Workbook excelWorkBook = excelApp.Workbooks.Add();
  //Don't Show MS Excel
  excelApp.Visible = false;
  //Open a file at location
  Microsoft.Office.Interop.Excel.Workbook excelWorkBook2 = excelApp.Workbooks.Open(filePath);
  //Convert that file to an XLSX document
  excelWorkBook2.SaveAs("C:\\Temp\\testExport.xlsx", Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet, Missing.Value, Missing.Value, false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, Microsoft.Office.Interop.Excel.XlSaveConflictResolution.xlUserResolution, true, Missing.Value, Missing.Value, Missing.Value);
  //Close excel
  excelApp.Quit(); 
```

但是，当我尝试打开生成的文件时，出现以下错误：

![在此处输入图像描述](../Images/72385ce754e504a2611971191f915eb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:57:23.093

您是否尝试将文件名更改为 .xls？我相信 Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet 导出到 xls，而不是 xlsx

所有类型都可以在[这里找到](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlfileformat)

# java - httpcomponents 的奇怪行为

> ID：13159262
> 
> 赞同：0
> 
> 时间：2012-10-31T13:36:44.680
> 
> 标签：java, cookies, httpclient, apache-httpcomponents

我知道 httpcomponents 它不是浏览器，但我只是用它从 Web 服务器中检索一些 cookie。问题是当我发送一个 HTTP 请求时，我没有得到与使用 Firefox 导航时相同的 cookie 集。该网站是 www.amazon.com。我认为这很容易，但我不知道哪个是问题所在。这是我的代码：

```
 DefaultHttpClient httpclient = new DefaultHttpClient();

    HttpGet httpget = new HttpGet("http://www.amazon.com");

    System.out.println("Initial set of cookies:");
    List<Cookie> cookies = httpclient.getCookieStore().getCookies();
    if (cookies.isEmpty()) {
        System.out.println("None");
    } else {
        for (int i = 0; i < cookies.size(); i++) {
            System.out.println("- " + cookies.get(i).toString());
        }
    }

    HttpResponse response = null;
    try {
        response = httpclient.execute(httpget);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    HttpEntity entity = response.getEntity();

    System.out.println("Post logon cookies:");
    cookies = httpclient.getCookieStore().getCookies();
    if (cookies.isEmpty()) {
        System.out.println("None");
    } else {
        for (int i = 0; i < cookies.size(); i++) {
            System.out.println("- " + cookies.get(i).toString());
        }
    } 
```

# perl - 如何从同一个包中访问 Perl 中的对象功能

> ID：13159263
> 
> 赞同：1
> 
> 时间：2012-10-31T13:36:44.073
> 
> 标签：perl, oop, object, module

我正在制作一个 Perl 模块，但我仍在掌握 Perl 如何处理对象。这是`new`我为创建对象而编写的子代码，更新元素没有问题：

```
sub new {
    my $class = shift;
    my ($self) = {
        name => undef
    };
    bless($self, $class);
    return $self;
}
sub get_name {
    my $self = shift;
    $self->{name} = 'Eve';
    return $self->{name};
} 
```

当我调用模块并从另一个文件访问它时，我可以很好地使用该对象，但我想在模块代码的其他区域使用对象中的数据。

所以我这样做没有问题：

```
my $new_object = new ProgramTest; # ProgramTest being the module/package
my $name = get_name(); 
```

但我想`$self`在“模块内部”方法中使用这些元素，外部脚本永远不会访问该方法。所以我想要这样的东西：

```
sub get_variables {
    return (name); # I don't know how to get the name here 
    # (I plan to have other variables, too)
} 
```

我可能遗漏了一些明显的东西（我相信当我看到解决方案时我会踢自己），所以任何帮助表示赞赏！我想要这个，以便模块的其余部分可以使用变量（不改变），因为有些条件依赖于它们的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:50:59.513

perl 对象中没有内部/私有方法之类的东西。通常的做法是使用下划线开始任何不应公开使用的方法，但这不是以任何方式强制执行的。还请看一下 moose - 它从 OO perl 中消除了很多麻烦。

关于您的问题，下面显示了一个模块方法如何调用另一个模块方法，并且两者都可以访问对象数据。再次，我真的建议您使用 Moose！

```
sub publicSub{
    my ( $self ) = @_;

    return $self->_privateSub();
}

sub _privateSub{
    my ( $self ) = @_;

    return $self->{name};
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:43:46.910

我认为你想要类变量。它们对于一个类是全局的，并且该类的所有实例（即您创建的所有对象）都可以看到它们。在这种情况下，全局意味着它们处于最外部的词法范围，因此所有子都可以看到它们。

```
package ProgramTest;
my $everyone_can_see_this = 1; # lexical scope, but 'global' to the package

sub new {
    my $class = shift;
    my ($self) = {
        name => undef
    };
    bless($self, $class);
    return $self;
}
sub get_var {
    my $self = shift;
    return ++$everyone_can_see_this;
}

package Main;
my $o1 = ProgramTest->new;
my $o2 = ProgramTest->new;

say $o1->get_var;
say $o2->get_var;
say $o1->get_var;

__END__
2
3
4 
```

但我不明白你为什么要这样做。这没有意义（除非你想要一个对象计数器）。不要将它用于配置值，否则您不能真正拥有用于同一类的不同目的的对象。

也许你想要别的东西。如果是这样，请尝试改写您的问题。

# json - JSON 键中的特殊字符 ( $.getJson )

> ID：13159268
> 
> 赞同：2
> 
> 时间：2012-10-31T13:36:55.133
> 
> 标签：json, key, getjson

我遇到了这个问题：我尝试将 .json 文件中的数据加载到我的网站，但我遇到了标题中的特殊字符（Ó、Í、É、空格）的问题。我只能更改 .HTML 文件。我试过这是.html：[http ://www.lukcian.x10.mx/json5.html](http://www.lukcian.x10.mx/json5.html)

谢谢

这是一个例子：

**.json：**

```
{
    "Bibliotecas": [
        {
            "BIBLIOTECA": "Biblioteca General de Navarra ",
            "DIRECCIÓN ": "Plaza de San Francisco",
            "COD. POSTAL": 31001,
            "POBLACIÓN": "Pamplona",
            "TELÉFONO": 848427797,
             ..................... 
```

**.html：**

```
<!DOCTYPE HTML> 
<html>
    <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">

    <title>JSON multiple zombies
    </title> 

    <script src="HostFiles/jquery.js"></script>
    <link href="reset.css" rel="stylesheet" type="text/css" media="screen">

    <script>

        $(document).ready(function() {
                 $.getJSON('json/bibliotecas.json', function(json) { 

                 $.each(json.Bibliotecas, function () {

                 $('<article class="json"></article>').append(

                 '<p> ' + this.BIBLIOTECA + '</p>'  + 
                 '<p> ' + this["DIRECCIÓN "] + '</p>' + 
                 '<p> ' + this.POBLACIÓN + '</p>' + 
                 '<p> ' + this.TELÉFONO + '</p>'  + 

                 '</br></br>'
                 ).appendTo('body');

    });          

  });

});

    </script>

</head> 
<body> 

</body>
    </html> 
```

**结果：**

```
Biblioteca General de Navarra

undefined

undefined

undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:37:52.707

您正在尝试显示 unicode 字符。如果您需要 Unicode 提供的额外字符，则需要更改**charset**。

```
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">

                                                   ^ change to charset=utf-8" 
```

**[参考：W3C 字符集](http://www.w3.org/International/O-charset.en.php)**

# java - 如何使用 Java 以 CSV 格式导出数据？

> ID：13159272
> 
> 赞同：1
> 
> 时间：2012-10-31T13:37:12.813
> 
> 标签：java, jsp, servlets

原因可能是java知识的匮乏:(，所以我问这个问题，

在这段代码中，我得到了动态值（来自 jsp 页面）：

```
<form action="">
  <% 
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost/apps","root","root");
    Statement stmt = con.createStatement();
    String sql = "select * from info;";
    ResultSet rs = stmt.executeQuery(sql);
    System.out.println(sql);
    System.out.println("hi Tirtha");
  %>
  <center>
    <h3>Information of User's</h3>
    <table cellpadding="4" cellspacing="2" border="1" bgcolor="">
      <tr>
        <th>User Name</th>
        <th>Email Id</th>
      </tr>
      <tr>
        <%while(rs.next()){%>
          <td><input type="text" name="name" value="<%= rs.getString(1)%>" readonly="readonly">
          <td><input type="text" name="email" value="<%= rs.getString(2)%>" readonly="readonly">
          </tr>
        <%}%>
    </table>
  </center>
</form> 
```

*现在我想将这些数据保存在一个 csv 文件中*（其中有一个导出选项）。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T13:58:38.123

这是一个可用于导出到 CSV 的类：

```
import java.io.FileWriter;
import java.io.IOException;
import User;

 public class GenerateCsv
 {

    private static void generateCsvFile(ArrayList<User> users)
    {
        String output = "Email, Name\n";

        for (User user in users) {
            output += user.getEmail() + ", " + user.getName() + "\n";
        }

        return output;
    }
 } 
```

以 MVC 方式工作

以下是您的代码应该如何编写：

假设您有一个名为的类。*User.java*里面有一个静态函数叫做get all users

```
public class User {

    String name;
    String email;

    public static ArrayList<User> getAllUsers() {
        // returns all users
        ... 
    }

} 
```

然后假设您有一个名为 UsersServlet 的 servlet，它可以获取这些用户：

```
import javax.servlet.*;
import javax.servlet.http.*;

public class UsersServlet extends HttpServlet {

    public void doGet (HttpServletRequest   req, HttpServletResponse  res)
        throws ServletException, IOException {

        res.setContentType("application/csv");
        PrintWriter w = res.getWriter();

        ArrayList<User> users = Users.getAllUsers();

        w.prinln(GenerateCsv.generateCsvFile(users));

        w.flush();
        w.close();
    }

    public void doPost (HttpServletRequest  req, HttpServletResponse  res)
        throws ServletException, IOException {
        ...
    }
} 
```

例如，在您的 jsp 中，您将有一个调用 servlet 的简单锚标记（servlet 调用 User.java，获取数据，将它们形成为 CSV，然后将其输出到浏览器......）。像这样的东西会起作用：

```
<a href='/getCSV' > Export CSV </a> 
```

但请注意，您必须使用 web.xml将 servlet 链接到*url ：*

```
<web-app>
    <servlet>
        <servlet-name>UsersServlet</servlet-name>
        <servlet-class>__package__.UsersServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>UsersServlet</servlet-name>
    <url-pattern>getCSV</url-pattern>
    </servlet-mapping>
</web-app> 
```

编辑：写入磁盘而不是发送到浏览器

```
 import java.io.FileWriter;
 import java.io.IOException;
 import User;

 public class GenerateCsv
 {

    private static void generateCsvFile(String fileName, ArrayList<User> users)
    {
           try
           {
                FileWriter writer = new FileWriter(fileName);

                writer.append("Email");
                writer.append(',');
                writer.append("Name");
                writer.append('\n');

                for (User user in users) {
                     writer.append(user.getEmail());
                     writer.append(',');
                     writer.append(user.getName());
                     writer.append('\n');
                }

                writer.flush();
                writer.close();
           } catch(IOException e) {
                 e.printStackTrace();
           } 
      }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:58:50.877

在 JSP 中嵌入代码通常是不好的做法，最好使用 servlet、java 类或 Web 框架（如 Spring、JSF、Struts 等）...

但是，使用上面的示例。最简单的方法是创建另一个 JSP 页面，如下所示：

```
<%@page contentType="text/text" %>
<% 
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/apps","root","root");
Statement stmt = con.createStatement();
String sql = "select * from info;";
ResultSet rs = stmt.executeQuery(sql);
%>
<%
while(rs.next()){
  out.println("\"" + rs.getString(1) + "\", \"" + rs.getString(2) + "\"\n");
}%>
<% //cleanup and close db access %> 
```

这将内容类型设置为文本文件，因此浏览器可以正确显示它。然后它遍历您的记录集并输出一行，其中两个字段用引号括起来，并以`\n`换行符结束每一行。然后，在您的原始页面上，您将只有一个指向此新 JSP 页面的链接以下载 CSV。

或者，您可以使用现有的库，例如[OpenCSV](http://opencsv.sourceforge.net/)。这将允许更复杂的需求，并且还可以通过自动处理转义或特殊情况来避免头痛。

# java - SINGLE_TABLE 的 JPA 继承替代方案？

> ID：13159277
> 
> 赞同：0
> 
> 时间：2012-10-31T13:37:26.190
> 
> 标签：java, google-app-engine, jpa

AppEngine 仅支持 JPA 继承的“TABLE_PER_CLASS”和“MAPPED_SUPERCLASS”。不幸的是，不支持“JOINED”，尤其是“SINGLE_TABLE”。

我想知道实现 SINGLE_TABLE 替代方案的最佳替代方案是什么？

我唯一的要求是： 1) 有单独的类，如 AbstractEmployee、InternalEmployee、Exmployee。2) 能够对所有员工运行查询，从而产生 InternalEmployee 和 ExternalEmployee 实例。

我唯一想到的是使用包含所有字段的“大”员工对象？还有其他想法吗？

[PS：通过http://code.google.com/p/googleappengine/issues/detail?id=8366](http://code.google.com/p/googleappengine/issues/detail?id=8366)投票支持适当的“SINGLE_TABLE”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:54:14.407

理论上，您可以使用 @Embeded 和 @Embeddable 将相关字段分组到一个对象中。所以你会有一个看起来像这样的类。

```
@Entity
public class Employee {
     // all the common employee fields go here 
     //

     // the discriminator column on Employee class lets you be specific in your queries          
     private Integer type; 

     @Emebded 
     private Internal internal; // has the fields that are internal

     @Embeded
     private External external; // has the fields that are external 

     equals & hashcode that compare based on the discriminator type and other fields 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:11:39.117

AppEngine 支持和不支持的内容在那里具有误导性。AppEngine 使用属性存储，因此任何 Kind 都可以具有任何属性。因此，原则上，一个 Kind 可以包含 InternalEmployee 和 ExternalEmployee “实例”。AppEngine JPA 实际做的唯一一件事就是将类的所有字段存储在单个 Kind 对象中。这并不排除将子类型存储在同一种类中（具有特定于子类型的字段的额外属性），这相当于“单表”。

PS，在“AppEngine”整体上提出一些问题不会得到任何回应（看看那里的其余问题;-)），记住这里受影响的代码在它自己的项目中[http://code .google.com/p/datanucleus-appengine](http://code.google.com/p/datanucleus-appengine) 并拥有自己的问题跟踪器

# mysql - 如何修复此选择查询

> ID：13159284
> 
> 赞同：0
> 
> 时间：2012-10-31T13:37:50.117
> 
> 标签：mysql, sql

这是我的查询..

```
SELECT tcs.tutor_id AS tid, tcs.category_id AS cid, tcs.subject_id AS sid, GROUP_CONCAT( DISTINCT s.subjects SEPARATOR ', ') AS subjects,
t.tutor_name, t.tutor_code AS tcode, DATE_FORMAT(t.registration_date, '%b %D, %Y') AS date, t.qualification,
GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, timg.image_name AS img
FROM tutor_category_subject as tcs
INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
INNER JOIN tutor_option AS toption ON toption.tutor_id = tcs.tutor_id
INNER JOIN options AS o ON toption.option_id = o.option_id
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id
WHERE s.subjects LIKE '%business%' AND timg.image_type = 'profile'
GROUP BY tcs.tutor_id; 
```

此查询正常工作.. 但是 timg 的 image_type coloum 存在问题。这是导师可能有他们的个人资料图片，有些导师没有个人资料图片。但是我需要选择所有具有这种条件的导师，即使不是他们的个人资料图片。在这个查询中，如果没有导师没有选择的导师的个人资料图片......那么我该怎么做......？

非常感谢任何评论。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:39:34.547

您只需将子句中的过滤器移动`WHERE`到`JOIN`子句 for `tutor_images`：

```
SELECT tcs.tutor_id AS tid, tcs.category_id AS cid, tcs.subject_id AS sid, GROUP_CONCAT( DISTINCT s.subjects SEPARATOR ', ') AS subjects,
t.tutor_name, t.tutor_code AS tcode, DATE_FORMAT(t.registration_date, '%b %D, %Y') AS date, t.qualification,
GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, timg.image_name AS img
FROM tutor_category_subject as tcs
INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
INNER JOIN tutor_option AS toption ON toption.tutor_id = tcs.tutor_id
INNER JOIN options AS o ON toption.option_id = o.option_id
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE s.subjects LIKE '%business%' 
GROUP BY tcs.tutor_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:43:26.080

您也可以在以下`WHERE`部分执行此操作：

```
WHERE s.subjects LIKE '%business%' AND (timg.image_type = 'profile' OR timg.image_type is NULL) 
```

# markdown - 如何使用液体标签访问 Jekyll 中未渲染（降价）的内容？

> ID：13159286
> 
> 赞同：11
> 
> 时间：2012-10-31T13:37:56.610
> 
> 标签：markdown, jekyll, liquid, mathjax, pandoc

通过阅读[Jekyll 的模板数据文档](https://github.com/mojombo/jekyll/wiki/Template-Data)，人们可能会认为访问未渲染内容的方式是`page.content`：但据我所知，这是提供降价解析器已经呈现的帖子内容。

我需要一个直接访问原始（原始降价）内容的解决方案，而不是简单地尝试将 html 转换回降价。

### 用例背景

我的用例如下：我使用[pandoc 插件](https://github.com/dsanson/jekyll-pandoc-plugin)为我的 Jekyll 站点呈现 markdown，使用“mathjax”选项来获得漂亮的方程式。但是，mathjax 需要 javascript，因此这些不会显示在 RSS 提要中，我通过循环生成它，`page.content`如下所示：

```
 {% for post in site.posts %}
 <entry>
   <title>{{ post.title }}</title>
   <link href="{{ site.production_url }}{{ post.url }}"/>
   <updated>{{ post.date | date_to_xmlschema }}</updated>
   <id>{{ site.production_url }}{{ post.id }}</id>
   <content type="html">{{ post.content | xml_escape }}</content>
 </entry>
 {% endfor %} 
```

正如`xml_escape`过滤器所暗示的，`post.content`这里出现在 html 中。如果我可以获得原始内容（想象`post.contentraw`或存在的），那么我可以轻松添加一个过滤器，该过滤器将使用 pandoc 和“webtex”选项在解析 RSS 提要时为方程式生成图像，例如：

```
require 'pandoc-ruby'
module TextFilter
  def webtex(input)
    PandocRuby.new(input, "webtex").to_html
  end
end
Liquid::Template.register_filter(TextFilter) 
```

但是，当我对已经在 html+mathjax 中呈现的方程式而不是原始降价感到满意时，我被卡住了。转换回降价并没有帮助，因为它不会转换 mathjax（只是乱码）。

有什么建议么？当然有一种方法可以调用原始降价吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T20:05:11.120

这是我认为你会遇到的麻烦：[https ://github.com/mojombo/jekyll/blob/master/lib/jekyll/convertible.rb](https://github.com/mojombo/jekyll/blob/master/lib/jekyll/convertible.rb) [https://github.com/mojombo/jekyll/blob/master/ lib/jekyll/site.rb](https://github.com/mojombo/jekyll/blob/master/lib/jekyll/site.rb)

根据我的阅读，对于给定的帖子/页面，self.content 被通过 Markdown 和 Liquid 运行 self.content 的结果替换，在 convertible.rb 的第 79 行：

```
self.content = Liquid::Template.parse(self.content).render(payload, info) 
```

帖子在页面之前呈现，见 site.rb 的第 37-44 和 197-211 行：

```
def process
  self.reset
  self.read
  self.generate
  self.render
  self.cleanup
  self.write
end

... ...

def render
  payload = site_payload
  self.posts.each do |post|
    post.render(self.layouts, payload)
  end

  self.pages.each do |page|
    page.render(self.layouts, payload)
  end

  self.categories.values.map { |ps| ps.sort! { |a, b| b <=> a } }
  self.tags.values.map { |ps| ps.sort! { |a, b| b <=> a } }
rescue Errno::ENOENT => e
  # ignore missing layout dir
end 
```

当您开始渲染此页面时，self.content 已被渲染为 HTML - 因此无需停止渲染。已经完成了。

但是，生成器（[https://github.com/mojombo/jekyll/wiki/Plugins](https://github.com/mojombo/jekyll/wiki/Plugins)）在渲染阶段之前运行，因此，据我阅读源代码可知，您应该能够相当简单地编写一个生成器会将 self.content 复制到某个属性（例如 self.raw_content）中，您以后可以在模板 {{ page.raw_content }} 中将其作为原始 Markdown 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-22T15:39:18.267

我最终将我的`.md`文件重命名为，`.html`这样它们就不会被 MarkDown 渲染器渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T08:36:34.757

这应该有效。

```
# frozen_string_literal: true

module RawContent
  class Generator < Jekyll::Generator
    def generate(site)
      site.posts.docs.each do |post|
        post.data['raw_content'] = post.content
      end
    end
  end
end 
```

# java - JUnit 测试说明

> ID：13159293
> 
> 赞同：37
> 
> 时间：2012-10-31T13:38:19.497
> 
> 标签：java, testing, junit

是否可以在 JUnit 中为未来的读者添加一个简短的测试描述（例如，正在测试什么，一些简短的解释，预期的结果，......）？我的意思是在 ScalaTest 中，我可以在其中编写：

```
test("Testing if true holds") {
  assert(true)
} 
```

理想的方法是使用一些注释，例如

```
@Test
@TestDescription("Testing if true holds")
public void testTrue() {
    assert(true);
} 
```

因此，如果我使用 Maven（或一些类似工具）运行此类带注释的测试，我可以在使用 ScalaTest 时获得与 SBT 中类似的输出：

```
- Testing if entity gets saved correctly
- Testing if saving fails when field Name is not specified
- ... 
```

目前，我可以使用非常长的方法名称或编写 javadoc 注释，这些注释在构建输出中不存在。

谢谢你。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-12-21T19:06:42.687

在 JUnit 5 中，有[@DisplayName](https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/DisplayName.html)注释：

> @DisplayName 用于为带注释的测试类或测试方法声明自定义显示名称。显示名称通常用于 IDE 和构建工具中的测试报告，并且可能包含空格、特殊字符甚至表情符号。

例子：

```
@Test
@DisplayName("Test if true holds")
public void checkTrue() {
    assertEquals(true, true);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-05T12:08:36.820

TestNG 就是这样做的，这对我来说是最简洁的解决方案：

```
@Test(description="My funky test")  
public void testFunk() {  
    ...  
} 
```

有关详细信息，请参阅[http://testng.org/javadocs/org/testng/annotations/Test.html](http://testng.org/javadocs/org/testng/annotations/Test.html)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-31T13:41:04.657

不完全是您要查找的内容，但您可以提供任何`assert`方法的描述。

就像是：

```
@Test
public void testTrue() {
    assertTrue("Testing if true holds", true);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-20T09:01:11.727

在 JUnit 中进行测试时，我更喜欢遵循标准格式。测试的名称是

```
test[method name]_[condition]_[outcome] 
```

例如：

```
 @Test
 public void testCreateObject_nullField_errorMessage(){}

 @Test
 public void testCreateObject_validObject_objectCreated(){} 
```

我认为这种方法在进行 TDD 时很有帮助，因为您可以开始编写所有测试名称，这样您就知道需要测试/开发什么。

我仍然欢迎来自 JUnit 的测试描述功能。

这肯定比我过去见过的其他测试要好，例如：

```
@Test public void testCreateObject1(){}
@Test public void testCreateObject2(){}
@Test public void testCreateObject3(){} 
```

或者

```
@Test public void testCreateObjectWithNullFirstNameAndSecondNameTooLong(){} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T14:29:54.603

您可以在测试后命名测试方法：

```
public void testThatOnePlusOneEqualsTwo() {
  assertEquals(2, 1 + 1);
} 
```

这将出现在 Eclipse、Surefire 和大多数其他运行程序中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T13:45:30.897

**详细**的解决方案是：您可以`Logger`在测试中添加一个，将结果记录到文件中。例如，[参见 log4j 。](http://logging.apache.org/log4j/1.2/)然后您可以读取文件中的结果并打印成功的语句，`assert`而语句不能。

**简单**的解决方案：您可以`JDoc`为每个测试方法添加描述，如果您生成 JavaDoc，这将被概述。

此外，每条`assert`语句都可以提供一条消息，每当`assert`失败时都会打印该消息。

```
/**
 * test the List#size() increasement after adding an Object to a List.
 */
public void testAdd(){
  List<Object> list = new LinkedList<>(); 
  list.add(new Object());
  assertEquals("size should be 1, because of adding an Object", 1, list.size());
} 
```

不要使用`System.out.println("your message");`，因为您不知道测试将如何执行，并且如果环境不提供控制台，则不会显示您的消息。

# javascript - JavaScript Facebook 分享选项

> ID：13159296
> 
> 赞同：2
> 
> 时间：2012-10-31T13:38:37.210
> 
> 标签：javascript, html, facebook

我的任务是利用社交网络制作东西。

据我发现，有两种选择。一种是通过您的新闻提要，另一种是通过共享器。在下图中，我同时展示了两者。 ![第一个要求您将其发布到您的墙上，第二个要求您分享它。](../Images/5c71a2ca40b0f7bb42bcb17786527151.png)
第一个使用dialog/feed，第二个使用sharer.php。

内容的共享方式有所不同。第一个以我喜欢的方式分享它，第二个以我不喜欢的方式显示它。 ![第一个要求您将其发布到您的墙上，第二个要求您分享它。](../Images/dfc54140ca09e7c97f0ab5d4458cd72d.png)

我不喜欢第二个共享整个页面的事实。我想要页面中每个图像的共享图标并共享该特定图标，而不是整个页面。是否可以让分享图标看起来像第二张图片，但分享内容却像第一张？它在 Javascript/HTML 中的外观如何？

如果您需要我使用的任何代码，请询问。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T11:38:49.377

要使第二个选项看起来像第一个选项 - 并使用特定图像 - 您必须在共享 URL 中使用 Open Graph 标签：http: [//ogp.me/](http://ogp.me/)

我猜第二个选项是用“sharer.php”制作的。它只是将站点的 URL 作为参数，其余信息从页面中的 Open Graph 标签加载。顺便说一句，您还可以定义多个共享图标，以便用户在共享前浏览它们。

例如，如果您希望显示特定图像，则需要此标记：

```
<meta property="og:image" content="http://mydomain.com/myimage.jpg" /> 
```

顺便说一句，您始终可以在 Facebook 调试器中测试 Open Graph 标签：

> [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

它还会刷新标签，如果它们没有正确显示在共享窗口中，只需将链接再次放入调试器。

# domain-driven-design - 单一有界上下文的结构

> ID：13159299
> 
> 赞同：19
> 
> 时间：2012-10-31T13:38:52.737
> 
> 标签：domain-driven-design

有界上下文是跨越所有应用层（领域、应用、表示和基础设施）还是只是领域模型？例如，我应该使用以下结构：

```
<bc 1>
 |_ domain
 |_ application
 |_ presentation
 |_ infrastructure
<bc 2>
 |_ domain
 |_ application
 |_ presentation
 |_ infrastructure 
```

或以下内容：

```
domain
 |_ <bc 1>
 |_ <bc 2>
application
presentation
infrastructure 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T19:14:52.663

两者都是有效的方法。我倾向于第一个选项，因为它允许更高级别的 BC 更好的模块化和非常清晰的边界。第二个选项是这样做的“标准”方式，它有利于让我们说更多的技术分层，而第一个选项实际上有利于更多领域驱动的分层。

选择你觉得更舒服的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:56:15.977

做你认为合适的事。每个有界上下文都有不同的域，当然也有不同的应用层，但我们可以想象一个通用的基础设施层或表示层。这实际上取决于您的架构选择以及您尝试构建的应用程序。

如果您想要更准确的答案，请在您的问题中添加一些材料，以便我们了解您的背景和您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T09:52:44.550

我认为这不是关于 DDD 的问题，而是关于架构的问题。有界上下文之间的哪种耦合对您来说是可接受/理想的。

如果您所有的有界上下文将：

*   用一种编程语言开发
*   访问相同的数据库引擎
*   由一个相对较小的团队（最多 20 人）开发

那么可能您应该采用第二种方法 - 每个有界上下文都包含自己的域和应用程序层，并且所有有界上下文共享相同的基础架构和应用程序层。

在其他情况下，您应该考虑微服务/SOA 架构。

# java - ajax polling returns response late (jsf and primefaces)

> ID：13159301
> 
> 赞同：0
> 
> 时间：2012-10-31T13:38:56.237
> 
> 标签：java, ajax, jsf, primefaces, polling

I started using the poll component of Primefaces. Goal: refresh a confirmDialog window which acts as a progress bar. The xhtml:

```
<h:form id="pbForm" prependId="false">
    <p:confirmDialog id ="progressBar" message= ""
                     header="Retrieving information..."
                     widgetVar="pbar"
                     severity="info">
        <h:outputText id="PBlaunch" value="#{pBLaunchSearch.getLaius()}"/>
        <p:poll interval="1" update="PBlaunch" />
    </p:confirmDialog>
</h:form> 
```

My bean for the progress bar:

```
@ManagedBean
@RequestScoped

public class PBLaunchSearch {

    private static StringBuilder sb = new StringBuilder();

    public static void setLaius(String toAdd) {
        sb.append(toAdd);
        sb.append("<br>");
    }

    public static String getLaius() {
        return sb.toString();
    }

    public static void resetLaius() {
        sb = new StringBuilder();
    }
} 
```

The operation which takes time in the background is a few API calls. After each API call that finishes, I have this command:

```
PBLaunchSearch.setLaius("another API call returned"); 
```

Problem: the confirmDialog remains empty (outputText id="PBlaunch" remains empty) until all the API calls have been made, at which point all the messages appear at once (but too late...)

Any clue as to why?

# javascript - 创建以 31 作为日期的日期会产生 30 的输出

> ID：13159303
> 
> 赞同：1
> 
> 时间：2012-10-31T13:38:57.623
> 
> 标签：javascript, date

我正在从格式为“yyyy-MM-dd”的字符串创建日期，但出于某种原因，它们总是在前一天创建。如果我将日期设置为“2012-10-31”，则 Date 对象实际上是 10 月 30 日而不是 31 日。例如，这个：

```
var d1=new Date('2012-10-31'); 
```

会输出这个：

```
Tue Oct 30 2012 19:30:00 GMT-0430 (Venezuela Standard Time) 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:45:40.637

试试这个

```
var d1=new Date(2012, 10-1, 31, 0, 0 ,0);
document.write(d1); 
```

产生

```
Wed Oct 31 2012 00:00:00 GMT-0400 (Eastern Daylight Time) 
```

关键是去掉引号并手动设置时间。另请注意，“月”是从零开始的，因此为了便于阅读，我从中减去了一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:48:38.733

发生这种情况是因为日期会根据您的本地时区*转换为字符串。*

date 变量实际上包含 10 月 31 日 0:00 UTC。将其转换为字符串时，将使用您自己的时区进行转换，该时区比 UTC 晚 4:30 小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:49:34.807

在没有其他参数的情况下，Date() 使用 GMT+0000 创建您的时间戳。

将您的日期转换为没有其他参数的字符串，它将使用本地化表示法。
如果要创建与您的时区匹配的日期，请执行以下操作：

```
var d1=new Date('2012-10-31 GMT-0430');
//That's what you should get
//"Wed Oct 31 2012 00:00:00 GMT-0430" 
```

* * *

现在使用此日期，如果您在具有不同时区的浏览器中执行 d1.toString()，则可以将本地时间转换为其他时区的时间：

```
d1.toString();
//That's what I get
//"Wed Oct 31 2012 05:30:00 GMT+0100" 
```

# ios - iOS FBRequestConnection startForMyFriendsWithCompletionHandler getting complete list of friends

> ID：13159305
> 
> 赞同：6
> 
> 时间：2012-10-31T13:39:04.413
> 
> 标签：ios, facebook

How can we get the complete list of friends, currently I am using

```
[FBRequestConnection startForMyFriendsWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (!error) {
    // Do stuff
    } else {
     // Throw error
    } 
```

In the response, we get a paging and the next url. Does anyone know how we can loop through the next url's and get the complete list of friends ?

```
 Response has 
 paging =     {
        next = "https://graph.facebook.com/1301xxxxxx/friends?fields=id,name,username,first_name,last_name&format=json&access_token=BAAFjJBl9zZBABALFxcbix0aNe0NFOfW8mHCU4ntPaxwooYVo1L6fOWgNTMTZBqLHfxjrWBOXNLjcCwEbkBgZAJX22Ec9PlatgHP9GfjVEWyxk0qGtxxxxxxxxxx&limit=5000&offset=5000&__after_id=10000xxxxxx";
}; 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T17:33:28.940

首先你需要获取下一个链接，你需要提取偏移量和 __after_id 参数，根据[iPhone 解析 GET 参数的 url](https://stackoverflow.com/questions/2243801/iphone-parsing-url-for-get-params)你会得到带有参数的字典：

```
//put here your string with parameters
   NSString* next = @"https://graph.facebook.com/1301xxxxxx/friends?fields=id,name,username,first_name,last_name&format=json&access_token=BAAFjJBl9zZBABALFxcbix0aNe0NFOfW8mHCU4ntPaxwooYVo1L6fOWgNTMTZBqLHfxjrWBOXNLjcCwEbkBgZAJX22Ec9PlatgHP9GfjVEWyxk0qGtxxxxxxxxxx&limit=5000&offset=5000&__after_id=10000xxxxxx";
    NSArray * pairs = [next componentsSeparatedByString:@"&"];
    NSMutableDictionary * kvPairs = [NSMutableDictionary dictionary];
    for (NSString * pair in pairs) {
        NSArray * bits = [pair componentsSeparatedByString:@"="];
        NSString * key = [[bits objectAtIndex:0] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSString * value = [[bits objectAtIndex:1] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        [kvPairs setObject:value forKey:key];
    } 
```

您可以通过 kvPairs[@"__after_id"] 和 kvPairs[@"offset"] 获得正确的参数

下一步创建将此参数添加到您的原始请求中，在原始请求偏移量和 id 之后应该为 nil，并且您需要过滤这种情况，如果您做的一切正确，您将能够递归调用您的精神

# javascript - 如何使用 jQuery 或 JavaScript 对表格行进行分组并过滤组？

> ID：13159307
> 
> 赞同：1
> 
> 时间：2012-10-31T13:39:25.487
> 
> 标签：javascript, jquery, html

我正在使用`<tbody>`对表格行进行分组。我的表如下所示：

```
<label for="kwd_search">Search:</label> <input type="text" id="kwd_search" value=""/>

<br /><br />

<table id="indberetningstable" style="text-align: center; border: solid; align: center">

    <thead>
        <tr>
            <th>Valgsted</th>
            <th>Parti</th>
            <th>Stemmer</th>
            <th>Gem</th>
        </tr>
    </thead>

        <tbody>
            <tr>
                <td>Idrætshuset</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
                <tr>
                    <td></td>
                    <td>A          - Socialdemokraterne</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>B          - Det Radikale Venstre</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>C          - Det Konservative Folkeparti</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>

        </tbody>
        <tbody>
            <tr>
                <td>Strandvejsskolen</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
                <tr>
                    <td></td>
                    <td>A          - Socialdemokraterne</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>B          - Det Radikale Venstre</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>C          - Det Konservative Folkeparti</td>
                    <td><input type="text" style="width: 175px"></td>
                    <td><input type="submit" value="Gem"></td>
                </tr>

        </tbody>

</table>​ 
```

你可以在这里看到一个例子：

[http://jsfiddle.net/zDA7n/](http://jsfiddle.net/zDA7n/)

如何过滤表格，以便当我在`"kwd_search"`输入字段中编写搜索字符串时，它将隐藏除`<tbody>`第一列（Valgsted）中包含搜索文本的组之外的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:46:56.010

使用[`:contains`](http://api.jquery.com/contains-selector/)选择器（注意：这是区分大小写的）：

```
$('#kwd_search').on('change',function() {
    var val = $.trim($(this).val());
    $('#indberetningstable tbody').show();
    if (val) {
        $('#indberetningstable tbody:not(:contains("'+val+'"))').hide();
    };
});​ 
```

[http://jsfiddle.net/mblase75/pEfSF/](http://jsfiddle.net/mblase75/pEfSF/)

对于不区分大小写的版本，您需要[实现`:contains`选择器](https://stackoverflow.com/q/2196641/901048)的自定义版本。

# ruby-on-rails - 使用 REST API Rails

> ID：13159314
> 
> 赞同：1
> 
> 时间：2012-10-31T13:39:53.610
> 
> 标签：ruby-on-rails, api, activeresource, rails-roar

我已经看过[这个](https://stackoverflow.com/questions/5386232/consuming-rest-api-from-rails-application)问题，但它已经很老了，我觉得现在还有其他替代 ARes 的方法。

鉴于许多人似乎认为 ActiveResource 有点过时和重量级，我看过[Api Smith](https://github.com/filtersquad/api_smith)、[Her](https://github.com/remiprev/her)、[Roar](https://github.com/apotonick/roar)，当然还有 ARes 。

这些宝石中的哪一个将是最可靠且面向未来的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:36:03.923

为什么不使用 HTTParty 或 Faraday 等较低级别的库？它们将为您涵盖很多丑陋的东西（ssl、解析/序列化 json 和 XML、日志记录、添加标头...），您将完全控制 URL 和数据管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-28T11:58:17.837

我发现简单地使用 open-uri 和 json 是一个可行的选择。更少的样板和更多的控制/可配置性。

例子：

```
@people = JSON.parse(open("http://api.people.com:3000/people").read, symbolize_names: true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T21:35:16.830

Roar gem 的目的是帮助您构建和反序列化对象，它处理几种不同的 JSON 格式，如 JSON-API、JSON-HAL 等、XML，并且扩展底层 Representable Gem（从流行的 ROXML gem 派生）相当容易。考虑到 Roar 是迄今为止最受欢迎的 ARes 替代品，并且是更大的 Trailblazer 生态系统的一部分（你可以单独使用它）——我认为 Roar 更“面向未来”。但我可能有偏见。

# iphone - 为 iPhone 4、4S、5 和 iPad 生成 ipa

> ID：13159317
> 
> 赞同：0
> 
> 时间：2012-10-31T13:40:00.773
> 
> 标签：iphone, ios

我已经为我的应用程序生成了 ipa，其体系结构为`armv6`, `armv7`，`armv7s`带有临时证书，其中所有必需`UDID`的证书都包含在临时配置文件中，并使用进程创建了 ipa，`Archive`但是他们安装了他们正在获取的应用程序，iTunes 同步失败，任何人都可以帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:45:59.817

请注意，当 iPhone 5 退出时， **armv6已被弃用。**

> **Xcode 4.5**不允许您为 armv6 设备 (iphone 3G) 构建 ipa，仅适用于 armv7 和 armv7s。
> 而且**Xcode < 4.5**不允许您构建 armv7s ...您如何才能将它们组合在一起？

iphone 3G 出现同步错误？如果是，那很正常，你的ipa和这个手机不兼容……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:43:54.643

不是您直接问题的答案，但您可以尝试使用[TestFlight](https://testflightapp.com/)。它使分发 Ad Hoc 的过程变得轻而易举，完全在 iTunes 之外。顺便说一句，它是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:54:58.067

如果用户想通过 iTunes 安装应用程序，我们还需要将 Adhoc 配置文件发送给用户，因此 ipa 和配置文件都应该拖放到 iTunes 中并同步它。如果我们从 Appstore 下载它，我们不需要这样做，因为苹果会处理它

我认为如果我们使用配置文件，我们也需要这样做

# javascript - What's the correct way to determine if a Backbone.View's this.el is attached to the document or floating?

> ID：13159319
> 
> 赞同：2
> 
> 时间：2012-10-31T13:40:08.677
> 
> 标签：javascript, backbone.js

I am trying to use templating to render a view initially, but to update the view on subsequent calls when it is part of the document.

My app's page looks a little something like

```
<body>
  <!-- ... -->
  <div id="view_placeholder"/>
  <!-- ... -->
</body> 
```

And in pseudo-code I want to do something like so

```
Backbone.View.extend({
  // ...
  render: function() {
    if (this.el *IS NOT A CHILD OF document*) {
      // render the contents from the template
    } else {
      // update the content visibility based on the model
    }
  },
  // ...
}); 
```

The reason for this is that the template contains quite a lot of nodes and regenerating it for every change is not practicable.

I have explored some of the data-binding libraries, e.g. [rivets.js](http://rivetsjs.com/) but they are a poor fit to the template:model relation.

One thing I noticed is that `this.el.parentNode==null` before I add it to the document, but I am not sure that this is a definitive test, and in any case if I wrap this view within another, then that test becomes less useful (or maybe I am being overly cautious as once within another view's el I have rendered my sub-template anyway.

Another option I can see is to use a field to track the rendered status, e.g.

```
Backbone.View.extend({
  //
  templateRendered:false,
  // ...
  render: function() {
    if (!this.templateRendered) {
      // render the contents from the template
      this.templateRendered = true;
    } else {
      // update the content visibility based on the model
    }
  },
  // ...
}); 
```

but that feels hacky to me.

So my question is:

What is the best way to track the fact that I have rendered the template fully and therefore only need to tweak the rendered template rather than re-render it (and re-insert all the sub-views)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:08:42.537

我认为惯用的主干方法是仅在需要完整渲染时才在视图上调用完整`render()`视图，并使用模型更改事件绑定来调用渲染较小部分视图的子渲染函数。

```
var AddressView = Backbone.View.extend({
    initialize: function (options) {
        Backbone.view.prototype.initialize.call(this, options);
        _.bindAll(this)
        options.model.on('change:name', this.renderName);
        options.model.on('change:street', this.renderStreet);
        options.model.on('change:zipCode', this.renderZipCode);
    },
    renderName: function (model) {
        this.$el.find("#name").text(model.get("name"));
    },
    renderZipCode: function (model) {
        this.$el.find("#zipcode").text(model.get("zipCode"));
    },
    renderStreet: function (model) {
        this.$el.find("#stree").text(model.get("street"));
    },
    render: function () {
        //Populate this.el with initial template, subviews, etc
        //assume this.template is a template function that can render the main HTML
        this.$el.html(this.template(model));
        this.renderName(this.model);
        this.renderZipCode(this.model);
        this.renderStreet(this.model);
        return this;
    }
}); 
```

上面的代码无疑是乏味的。我个人会重新考虑[knockback.js](http://kmalakoff.github.com/knockback/)或[rivets.js](http://rivetsjs.com/)，但我相信上面的模式是典型的 vanillabone.js 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:59:49.240

在即将插入其元素之前，我会避免渲染视图。在任何情况下，您都可以通过检查视图元素的父级来找到，即

```
 this.$el.parent() 
```

`this.$el`如果不是您的文档的一部分，则应为空。

# java - How can I embed extern JSP/HTML snippet of /ibm_security_logout into JSF?

> ID：13159320
> 
> 赞同：0
> 
> 时间：2012-10-31T13:40:09.353
> 
> 标签：java, jsp, jsf, logout

I try to implement the `/ibm_security_logout` logic in a JSF project. There are some requirements about the way which I should use for logging out.

It should conform this form:

```
<FORM METHOD=POST ACTION="<%=request.getContextPath()%>/ibm_security_logout"
NAME="LogoutForm">
<INPUT TYPE="HIDDEN" NAME="logoutExitPage"
VALUE="/../weblogin/logout?dest=/myapp/goodbye.jsp">
<INPUT TYPE="submit" NAME="logout" VALUE="Logout">
</FORM> 
```

Both cases must be there.

```
<%=request.getContextPath()%>/ibm_security_logout"
VALUE="/../weblogin/logout?dest=/myapp/goodbye.jsp"> 
```

How can I realise it with commanlink?

```
<h:commandLink value="Log Out" action="#{sessionController.logout}" /> 
```

How should it look like in the bean method??

```
public void logout() throws IOException {

    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.invalidateSession();
    ec.redirect("/../weblogin/logout?dest=/myapp/goodbye.jsp");

} 
```

**EDIT**

`#{request.contextPath}` = localhost:9080/MyProject
Login Page = localhost:9080/weblogin/login?webapp=/MyProject (Login Page is managed via) an extern Framework
Logout is also managed via an extern framework. Therefore the URL must conform this VALUE="/../weblogin/logout?dest=/weblogin/login?webapp=/MyProject.

I tried it with the code below. But it did not work.

```
<form id="logout" action="#{request.contextPath}/ibm_security_logout"
            method="post">
<input type="hidden" name="logoutExitPage"
            value="/../weblogin/logout?dest=/weblogin/login?webapp=/MyProject">
<a  href="#" onclick="document.getElementById('logout').submit()">Logout_NEU</a>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:47:50.160

单独使用`ExternalContext#invalidateSession()`是不够的。`/ibm_security_logout`如果您使用过 IBM 的登录工具，您绝对需要直接 POST 。它不仅会使会话无效，还会清除 SSO cookie 和 LPTA 身份验证。否则用户可能在失效后仍会自动登录。

您可以在 JSF 中使用纯 HTML。我只会中和那些 90 年代风格的大写标签/属性，因为大写/驼峰式 HTML 标签/属性在 XHTML 中无效（我假设您使用的是 Facelets；您的问题历史至少证实了您使用的是 Facelets）。

```
<form action="#{request.contextPath}/ibm_security_logout" method="post">
    <input type="hidden" name="logoutExitPage" value="#{request.contextPath}/home.xhtml">
    <input type="submit" name="logout" value="Logout" />
</form> 
```

或者，如果您确实需要一个链接来提交表单，

```
<form id="logout" action="#{request.contextPath}/ibm_security_logout" method="post">
    <input type="hidden" name="logoutExitPage" value="#{request.contextPath}/home.xhtml">
    <a href="#" onclick="document.getElementById('logout').submit()">Logout</a>
</form> 
```

请注意，`logoutExitPage`必须代表注销后登录页面的 URL。它不一定需要精确表示`/../weblogin/logout?dest=/myapp/goodbye.jsp`。那只是一个例子。

# html - Working with html 5 canvas drawing

> ID：13159323
> 
> 赞同：0
> 
> 时间：2012-10-31T13:40:16.537
> 
> 标签：html, canvas

I want similar functionality for drawing image with smooth curves in html canvas. Can somebody tel me how to get such smooth curves?

![enter image description here](../Images/9d7edb383c5491bee77f98a79a646d57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:34:37.070

Highly recommend one of the bests in this category:

[http://paperjs.org/examples/path-simplification/](http://paperjs.org/examples/path-simplification/)

[http://d3js.org/](http://d3js.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:48:01.510

我将[Smooth.js](https://github.com/osuushi/Smooth.js)用于项目，我对此深信不疑。[在此处](http://osuushi.github.com/plotdemo016.html)查看一些示例。

# c# - 实现死锁异常的重试逻辑

> ID：13159326
> 
> 赞同：41
> 
> 时间：2012-10-31T13:40:30.227
> 
> 标签：c#, entity-framework, try-catch, repository-pattern, database-deadlocks

我已经实现了一个通用存储库，并且想知道是否有一种智能方法可以在出现死锁异常的情况下实现重试逻辑？

对于所有存储库方法，该方法应该相同。那么无论如何我可以避免在每个方法中编写'try/catch - 再次使用重试计数调用方法'？

欢迎任何建议。

我的一些存储库代码：

```
public class GenericRepository : IRepository
{
    private ObjectContext _context;

    public List<TEntity> ExecuteStoreQuery<TEntity>(string commandText, params object[] parameters) where TEntity : class
    {
        List<TEntity> myList = new List<TEntity>();

        var groupData = _context.ExecuteStoreQuery<TEntity>(commandText, parameters);

        return myList;
    }

    public IQueryable<TEntity> GetQuery<TEntity>() where TEntity : class
    {          
        var entityName = GetEntityName<TEntity>();
        return _context.CreateQuery<TEntity>(entityName);
    }

    public IEnumerable<TEntity> GetAll<TEntity>() where TEntity : class
    {
        return GetQuery<TEntity>().AsEnumerable();
    } 
```

编辑：

**1.解决方案：**

*从* **chris.house.00**的*解决方案略微修改*

```
 public static T DeadlockRetryHelper<T>(Func<T> repositoryMethod, int maxRetries)
    {
        var retryCount = 0;

        while (retryCount < maxRetries)
        {
            try
            {
                return repositoryMethod();
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                if (ex.Number == 1205)// Deadlock                         
                    retryCount++;
                else
                    throw;                   
            }
        }
        return default(T);
    } 
```

你这样称呼它：

```
 public TEntity FirstOrDefault<TEntity>(Expression<Func<TEntity, bool>> predicate) where TEntity : class
    {
        return RetryUtility.DeadlockRetryHelper<TEntity>( () =>p_FirstOrDefault<TEntity>(predicate), 3);
    }

    protected TEntity p_FirstOrDefault<TEntity>(Expression<Func<TEntity, bool>> predicate) where TEntity : class
    {
        return GetQuery<TEntity>().FirstOrDefault<TEntity>(predicate);
    } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T13:50:48.697

像这样的东西怎么样：

```
public T DeadlockRetryHelper<T>(Func<T> repositoryMethod, int maxRetries)
{
  int retryCount = 0;

  while (retryCount < maxRetries)
  {
    try
    {
      return repositoryMethod();
    }
    catch (SqlException e) // This example is for SQL Server, change the exception type/logic if you're using another DBMS
    {
      if (e.Number == 1205)  // SQL Server error code for deadlock
      {
        retryCount++;
      }
      else
      {
        throw;  // Not a deadlock so throw the exception
      }
      // Add some code to do whatever you want with the exception once you've exceeded the max. retries
    }
  }
} 
```

使用上面的代码，您的重试逻辑都在此方法中，您只需将存储库方法作为委托传递。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-07-18T17:37:05.837

我知道这是一篇旧帖子，但想分享一个更新的答案。

EF 6 现在有一个内置的解决方案，您可以设置一次性执行的执行策略。您创建一个继承自 DbExectutionStrategy 并覆盖 ShouldRetryOn 虚拟方法的类。您可以创建一个包含常量字段值的异常的静态类，这些字段值是重试合格代码，并循环遍历每个异常以确定当前抛出的 sql 异常是否与合格重试代码列表匹配...

```
 public static class SqlRetryErrorCodes
{
    public const int TimeoutExpired = -2;
    public const int Deadlock = 1205;
    public const int CouldNotOpenConnection = 53;
    public const int TransportFail = 121;
}

public class MyCustomExecutionStrategy : DbExecutionStrategy
{
    public MyCustomExecutionStrategy(int maxRetryCount, TimeSpan maxDelay) : base(maxRetryCount, maxDelay) { }

     private readonly List<int> _errorCodesToRetry = new List<int>
    {
        SqlRetryErrorCodes.Deadlock,
        SqlRetryErrorCodes.TimeoutExpired,
        SqlRetryErrorCodes.CouldNotOpenConnection,
        SqlRetryErrorCodes.TransportFail
    };
    protected override bool ShouldRetryOn(Exception exception)
    {
        var sqlException = exception as SqlException;
        if (sqlException != null)
        {
            foreach (SqlError err in sqlException.Errors)
            {
                // Enumerate through all errors found in the exception.
                if (_errorCodesToRetry.Contains(err.Number))
                {
                    return true;
                }
            }
        }
        return false;
    }
} 
```

最后一次，您已经设置了自定义执行策略，您只需使用设置执行策略的公共构造函数创建另一个继承自 DbConfiguration 的类：

```
 public class MyEfConfigurations : DbConfiguration
    {
        public MyEfConfigurations()
        {
            SetExecutionStrategy("System.Data.SqlClient",() => new MyCustomExecutionStrategy(5,TimeSpan.FromSeconds(10)));
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-17T17:01:33.833

`EntityFramework 6` 添加`ExecutionStrategy`功能。所需要的只是正确设置策略。

我的重试策略：

```
public class EFRetryPolicy : DbExecutionStrategy
{
    public EFRetryPolicy() : base()
    {
    }
    //Keep this constructor public too in case it is needed to change defaults of exponential back off algorithm.
    public EFRetryPolicy(int maxRetryCount, TimeSpan maxDelay): base(maxRetryCount, maxDelay)
    {
    }
    protected override bool ShouldRetryOn(Exception ex)
    {

        bool retry = false;

        SqlException sqlException = ex as SqlException;
        if (sqlException != null)
        {
            int[] errorsToRetry =
            {
                1205,  //Deadlock
                -2,    //Timeout
            };
            if (sqlException.Errors.Cast<SqlError>().Any(x => errorsToRetry.Contains(x.Number)))
            {
                retry = true;
            }

        }          
        return retry;
    }
} 
```

告诉 EF 应用我的策略：

```
public class EFPolicy: DbConfiguration
{
    public EFPolicy()
    {
        SetExecutionStrategy(
            "System.Data.SqlClient",
            () => new EFRetryPolicy());
    }
} 
```

资料来源：

*   [使用 Entity Framework 6 实现连接弹性](https://www.codeproject.com/Tips/758469/Implementing-Connection-Resiliency-with-Entity-Fra)
*   [微软文档](https://msdn.microsoft.com/en-us/library/dn456835(v=vs.113).aspx)

重试策略不适用于用户发起的事务（使用 创建的事务`TransactionScope`），如此[处](https://github.com/aspnet/EntityFrameworkCore/issues/7318)所述。如果使用，您将收到错误`The configured execution strategy does not support user initiated transactions`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-15T14:07:21.740

该解决方案有效，但我不想担心`Action`or的参数数量`Func`将被淘汰。如果使用泛型创建单个重试方法`Action`，则可以处理要在 lambda 中调用的方法的所有可变性：

```
public static class RetryHelper
{

    public static void DeadlockRetryHelper(Action method, int maxRetries = 3)
    {
        var retryCount = 0;

        while (retryCount < maxRetries)
        {
            try
            {
                method();
                return;
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                if (ex.Number == 1205)// Deadlock           
                {
                    retryCount++;
                    if (retryCount >= maxRetries)
                        throw;
                    // Wait between 1 and 5 seconds
                    Thread.Sleep(new Random().Next(1000, 5000));
                }
                else
                    throw;
            }
        }

    }
} 
```

然后像这样使用它：

```
RetryHelper.DeadlockRetryHelper(() => CopyAndInsertFile(fileModel)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:53:16.467

您是否考虑过某种形式的策略注入？作为示例，您可以使用 Unity 拦截来捕获所有存储库调用。然后你只需在拦截器中编写一次重试逻辑，而不是在每个方法中重复多次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-29T14:51:07.977

我在上面的帖子中使用了 MiguelSlv 提供的以下解决方案，它按预期对我有用。它简单易行。

EntityFramework 6 添加 ExecutionStrategy 功能。所需要的只是正确设置策略。

我的重试策略：

```
public class EFRetryPolicy : DbExecutionStrategy
{
    public EFRetryPolicy() : base()
    {
    }
    //Keep this constructor public too in case it is needed to change defaults of exponential back off algorithm.
    public EFRetryPolicy(int maxRetryCount, TimeSpan maxDelay): base(maxRetryCount, maxDelay)
    {
    }
    protected override bool ShouldRetryOn(Exception ex)
    {

        bool retry = false;

        SqlException sqlException = ex as SqlException;
        if (sqlException != null)
        {
            int[] errorsToRetry =
            {
                1205,  //Deadlock
                -2,    //Timeout
            };
            if (sqlException.Errors.Cast<SqlError>().Any(x => errorsToRetry.Contains(x.Number)))
            {
                retry = true;
            }
        }          
        return retry;
    }
} 
```

告诉 EF 应用此政策

```
public class EFPolicy: DbConfiguration
{
    public EFPolicy()
    {
        SetExecutionStrategy(
            "System.Data.SqlClient",
                () => new EFRetryPolicy());
    }
} 
```

资料来源：

使用 Entity Framework 6 实现连接弹性 Microsoft 文档 重试策略不适用于用户发起的事务（使用 TransactionScope 创建的事务），如此处所述。如果使用你会得到错误配置的执行策略不支持用户发起的事务

# c++ - Template Type deduction of std::pair change in behavior? (no, explicit keyword error)

> ID：13159330
> 
> 赞同：1
> 
> 时间：2012-10-31T13:40:36.440
> 
> 标签：c++, visual-c++, stl, c++11, std-pair

I am using Visual Studio versions 2005 and 2012 for this, the code below compiles and there are no issues in vs2005, but it generates an error in vs2012\. I have distilled the code I was working on down to the sample below which compiles and runs (in vs2005)

```
#include <map> 

//Arbitrary class
class SimpleClass
{
private:
     int member;

public:
     explicit SimpleClass( int i ) : member(i) {}
     operator int() const { return member;} 
};

//In code I have a map with these types and make_pair is invoked
//when an insert occurs into that map
typedef std::pair<SimpleClass,SimpleClass> SCPair;

//simple fn to replace myMap.insert(...)
void lvalref_test( const SCPair& sp )
{
    return;
}

int main( unsigned int argc, const char** argv ) 
{
     const int anInt = 2;
     //make_pair creates a pair<SimpleClass,SimpleClass> from
     //the instance of pair<int,SimpleClass> in the normal way
     //and Because SimpleClass is constructable from an int, 
     //the creation succeeds (In vs2005)
     lvalref_test( std::make_pair( anInt, SimpleClass(1) ) );
     return 0;
} 
```

vs2012 gives me:

> error C2664: 'lvalref_test' : cannot convert parameter 1 from 'std::pair<_Ty1,_Ty2>' to 'const SCPair &'

I've looked at the difference between the std::pair implementations in both

**vs2005**

```
template<class _Other1,
    class _Other2>
    pair(const pair<_Other1, _Other2>& _Right)
    : first(_Right.first), second(_Right.second)
    {   // construct from compatible pair
    } 
```

**vs2012**

```
template<class _Other1,
    class _Other2>
    pair(const pair<_Other1, _Other2>& _Right,
        typename enable_if<is_convertible<const _Other1&, _Ty1>::value
            && is_convertible<const _Other2&, _Ty2>::value,
            void>::type ** = 0)
    : first(_Right.first), second(_Right.second)
    {   // construct from compatible pair
    } 
```

I guess that the `enable_if` is causing the behaviour change, but I am not quite sure why.

I know how to fix the error I see, I can pass through an instance of SimpleClass and all is fine and dandy. *My Question here* is should this still deduce the correct template parameters and create the right pair type? Has this behaviour changed or have I made a mistake somewhere?

The answer is yes I made a mistake - I ignored the obvious `explicit` keyword throughout and dived headlong into the mechanism....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:43:49.377

它不应该编译。您的构造函数需要显式构造，但通过尝试隐式转换该对，您正在尝试执行隐式转换。严格来说，这不应该编译。

VS2005 的行为是有缺陷的——无论是因为标准缺陷还是因为它们有缺陷。VS2012 中的行为是正确的。

# php - How do I display multiple google map markers from a PHP array?

> ID：13159332
> 
> 赞同：0
> 
> 时间：2012-10-31T13:40:41.480
> 
> 标签：php, javascript, google-maps, google-maps-api-3

I am trying to display markers on a Google Map from a PHP array containing lat & long values.

The PHP array looks like this at the moment:

```
Array
(
[0] => Array
    (
        [0] => 55.8490116, -4.222272800000042
        [1] => 54.5979369, -7.274279400000069
    )

[1] => Array
    (
        [0] => 55.8490116, -4.222272800000042
    )

) 
```

I then add this array to a JS array on the PHP like so:

```
<script type="text/javascript">
var markers = <?php echo $myarray; ?>;
</script> 
```

And then in my JS for the map it looks like:

```
var infowindow = new google.maps.InfoWindow();
var marker, i;
var bounds = new google.maps.LatLngBounds();

console.log(markers);

for (i = 0; i < markers.length; i++) { 

    var pos = new google.maps.LatLng(markers[1][0]);

    marker = new google.maps.Marker({
        position: pos,
        map: map
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {

        return function() {
            infowindow.setContent(markers[1][0]);
            infowindow.open(map, marker);
        }

    })(marker, i));

} 
```

I am not sure where to go next. I know my my array does not mimic what is required by the Google Maps API, but not sure how I can change it to suit.

Thanks Robert

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:34:33.733

我认为您的方法的问题在于呼应数组。

我尝试修复它的方法是在 JS 中创建一个名为 的空数组`markers`，循环遍历 PHP 数组的所有值，然后将每个值附加到`markers`.

另请注意，您在 PHP 中有一个**数组数组**，因此您需要一个嵌套循环。

如果您需要任何代码示例，请告诉我，否则就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T08:21:07.383

你可以这样做：

```
<?php
$marker[] = array(
                "lat"=> '17.454000',
                "lng"=> '78.434952');
$marker[] = array(
                "title"=> 'shilparamam',
                "lat"=> '17.452665',
                "lng"=> '78.435608',
                "description"=> 'Mumbai formerly Bombay, is the capital city of the Indian state of Maharashtra.');
$marker[] = array(
                "title"=> 'image hospitals',
                "lat"=> '17.452421',
                "lng"=> '78.435715',
                "description"=> 'Pune is the seventh largest metropolis in India, the second largest in the state of Maharashtra after Mumbai.');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>    
    <script type="text/javascript">
        <?php
        $objJSON = json_encode($marker);
        echo "var markers  = ". $objJSON . ";\n";
        ?>
        window.onload = function () {
            var mapOptions = {
                center: new google.maps.LatLng(markers[0].lat, markers[0].lng),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
            var infoWindow = new google.maps.InfoWindow();
            var lat_lng = new Array();
            var latlngbounds = new google.maps.LatLngBounds();
            for (i = 0; i < markers.length; i++) {
                var data = markers[i]
                var myLatlng = new google.maps.LatLng(data.lat, data.lng);
                lat_lng.push(myLatlng);
                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: data.title
                });
                latlngbounds.extend(marker.position);
                (function (marker, data) {
                    google.maps.event.addListener(marker, "click", function (e) {
                        infoWindow.setContent(data.description);
                        infoWindow.open(map, marker);
                    });
                })(marker, data);
            }
            map.setCenter(latlngbounds.getCenter());
            map.fitBounds(latlngbounds);

        }
    </script>
    <div id="dvMap" style="width: 500px; height: 500px">
    </div>
</body>
</html> 
```

# c# - Control validation in wpf which is inside a resource style C#

> ID：13159333
> 
> 赞同：1
> 
> 时间：2012-10-31T13:40:43.630
> 
> 标签：c#, wpf

I'm using navigation window in wpf which has a style applied on it. Inside that style there are textboxes. I use MVVM pattern and my model implements IDataErrorInfo and returns error for these textboxes. Everything releated to data binding works just fine, but validation highlighting fails. There is no problem with styles, I have set special style for validation error for these textboxes. When I use the same not inside resource, then valdiation works correct.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:45:16.563

You need to make sure your Style is an implicit style so it gets applied to your TextBoxes. If you have an x:Key on your style, then remove it.

# c# - Is there any limits for binary serialization / deserialization object graph size in .net?

> ID：13159335
> 
> 赞同：2
> 
> 时间：2012-10-31T13:40:50.117
> 
> 标签：c#, limits, binary-serialization

For example, i have:

```
struct SomeStruct
{
   //some fields
   //each instance will store info read from file, maybe be 3kb, maybe more.
}

List<SomeStruct> lst = new List<SomeStruct>(); 
```

I will add to that list crazy amount of objects, so it will end up to 10Gbs or more in size. Can i serialize **lst** without any errors like out of memory and etc? Can i deserialize it later?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:48:38.683

如果您可以一次将项目列表保存在内存中，那么您应该有很大的机会对它们进行序列化/反序列化。您可能希望在流中单独处理它们，而不是一次序列化/反序列化整个列表。这将处理您可能遇到的任何边缘情况。

伪代码：

```
private void SerializeObjects(List<foo> foos, Stream stream)
{
    foreach (var f in foos)
    {
        stream.Write(f);
    }
}

private void DeserializeObjects(List<foo> foos, Stream stream)
{
    foo f = stream.ReadFoo();
    while (f != null)
    {
        foos.Add(f);
        f = stream.ReadFoo();
    }
} 
```

# algorithm - Why doesn't Dijkstra's algorithm work for negative weight edges?

> ID：13159337
> 
> 赞同：169
> 
> 时间：2012-10-31T13:41:00.337
> 
> 标签：algorithm, shortest-path, dijkstra, greedy

Can somebody tell me why Dijkstra's algorithm for single source shortest path assumes that the edges must be non-negative.

I am talking about only edges not the negative weight cycles.

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-10-31T13:45:48.640

Recall that in Dijkstra's algorithm, **once a vertex is marked as "closed" (and out of the open set) - the algorithm found the shortest path to it**, and will never have to develop this node again - it assumes the path developed to this path is the shortest.

But with negative weights - it might not be true. For example:

```
 A
      / \
     /   \
    /     \
   5       2
  /         \
  B--(-10)-->C

V={A,B,C} ; E = {(A,C,2), (A,B,5), (B,C,-10)} 
```

Dijkstra from A will first develop C, and will later fail to find `A->B->C`

* * *

**EDIT** a bit deeper explanation:

Note that this is important, because in each relaxation step, the algorithm assumes the "cost" to the "closed" nodes is indeed minimal, and thus the node that will next be selected is also minimal.

The idea of it is: If we have a vertex in open such that its cost is minimal - by adding any *positive number* to any vertex - the minimality will never change.
Without the constraint on positive numbers - the above assumption is not true.

Since we do "know" each vertex which was "closed" is minimal - we can safely do the relaxation step - without "looking back". If we do need to "look back" - [Bellman-Ford](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm) offers a recursive-like (DP) solution of doing so.

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-08-05T09:35:21.500

## Consider the graph shown below with the source as Vertex A. First try running Dijkstra’s algorithm yourself on it.

![enter image description here](../Images/51cbaa8f03b41572ca15cd212786659e.png "graph.png")

When I refer to Dijkstra’s algorithm in my explanation I will be talking about the Dijkstra's Algorithm as implemented below,

![Dijkstra’s algorithm](../Images/2195d12ee042ac76080f5be609b7afe4.png "chrome_2016-08-05_02-17-37.png")

So starting out the **values** (*the distance from the source to the vertex*) initially assigned to each vertex are,

[![initialization](../Images/f5af96391cf322436b3daa6b0192a3a3.png)](https://i.stack.imgur.com/6k20L.png)

We first extract the vertex in **Q = [A,B,C]** which has smallest value, i.e. A, after which **Q = [B, C]**. Note A has a directed edge to B and C, also both of them are in Q, therefore we update both of those values,

[![first iteration](../Images/d0e97e1902ffe0e76914b8ec9ee29cdc.png)](https://i.stack.imgur.com/tXsHF.png)

Now we extract C as (2<5), now **Q = [B]**. Note that C is connected to nothing, so `line16` loop doesn't run.

[![second iteration](../Images/e4ab22608231a596932dcfe1c58ba35d.png)](https://i.stack.imgur.com/h4UfA.png)

Finally we extract B, after which [![Q is Phi](../Images/e6f2856428f14a92e2b1aa24972cec87.png)](https://i.stack.imgur.com/s2ono.png). Note B has a directed edge to C but C isn't present in Q therefore we again don't enter the for loop in `line16`,

[![3rd?](../Images/d12e29d0c536a41eeb09c99075a6948d.png)](https://i.stack.imgur.com/TuczE.png)

So we end up with the distances as

[![no change guys](../Images/8357f42e07191908f01f7709fcfad724.png)](https://i.stack.imgur.com/BPLbK.png)

Note how this is wrong as the shortest distance from A to C is 5 + -10 = -5, when you go [![a to b to c](../Images/64301c9dd55c6c4b445f5ccfc4da1f41.png)](https://i.stack.imgur.com/coJUT.png).

**So for this graph Dijkstra's Algorithm wrongly computes the distance from A to C.**

This happens because Dijkstra's Algorithm does not try to find a shorter path to vertices which are *already extracted from Q*.

What the `line16` loop is doing is taking the vertex **u** and saying *"hey looks like we can go to **v** from source via **u**, is that (alt or alternative) distance any better than the current **dist[v]** we got? If so lets update **dist[v]**"*

Note that in `line16` they check all neighbors **v** (i.e. a directed edge exists from **u to v**), of **u** which are **still in Q**. In `line14` they remove visited notes from Q. So if **x** is a visited neighbour of **u**, the path [![source to u to x](../Images/595a75685df1e6b43bbe5625228928f0.png)](https://latex.codecogs.com/gif.latex?source&space;%5Cto&space;u&space;%5Cto&space;x&space;%5Cto&space;v) is *not even considered* as a possible shorter way from source to **v**.

In our example above, C was a visited neighbour of B, thus the path ![A to B to C](../Images/111ec23fb5fd4742e76e276fa9c05161.png) was not considered, leaving the current shortest path ![A to C](../Images/aaa7ee342b0c33b92cdae208120ebf72.png) unchanged.

This is actually useful *if the edge weights are all positive numbers*, because then we wouldn't waste our time considering paths that **can't be** shorter.

So I say that when running this algorithm if **x** is extracted from Q before **y**, then its not possible to find a path - [![not possible](../Images/1187934e8dcd6940a82c79981ec757cb.png)](https://i.stack.imgur.com/OjAzQ.png) which is shorter. Let me explain this with an example,

As **y** has just been extracted and **x** had been extracted before itself, then **dist[y] > dist[x]** because otherwise **y** would have been extracted before **x**. (`line 13` min distance first)

And as we already *assumed* that the edge weights are positive, i.e. **length(x,y)>0**. So the alternative distance (alt) via **y** is always sure to be greater, i.e. **dist[y] + length(x,y)> dist[x]**. So the value of **dist[x]** would not have been updated even if **y** was considered as a path to **x**, thus we conclude that it makes sense to only consider neighbors of **y** which are still in Q (note comment in `line16`)

But this thing hinges on our assumption of positive edge length, if **length(u,v)<0** then depending on how negative that edge is we might replace the **dist[x]** after the comparison in `line18`.

> So any **dist[x]** calculation we make will be incorrect if **x** is removed before all vertices **v** - such that **x** is a neighbour of **v** with negative edge connecting them - is removed.

Because each of those **v** vertices is the second last vertex on a potential "better" path from source to **x**, which is discarded by Dijkstra’s algorithm.

So in the example I gave above, the mistake was because C was removed before B was removed. While that C was a neighbour of B with a negative edge!

Just to clarify, B and C are A's neighbours. B has a single neighbour C and C has no neighbours. length(a,b) is the edge length between the vertices a and b.

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-31T13:42:44.973

Dijkstra 的算法假设路径只能变得“更重”，因此，如果您有一条从 A 到 B 的路径权重为 3，而从 A 到 C 的路径权重为 3，则您无法添加边和通过C从A到B，权重小于3。

这个假设使算法比必须考虑负权重的算法更快。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-04-06T08:24:41.517

**Dijkstra 算法的正确性：**

在算法的任何步骤中，我们都有 2 组顶点。集合 A 由我们计算到的最短路径的顶点组成。集合 B 由剩余的顶点组成。

**归纳假设**：在每一步，我们将假设所有先前的迭代都是正确的。

**归纳步骤**：当我们向集合 A 添加一个顶点 V 并将距离设置为 dist[V] 时，我们必须证明这个距离是最优的。如果这不是最优的，那么必须有一些其他路径到顶点 V 的长度更短。

假设这条其他路径经过某个顶点 X。

现在，由于 dist[V] <= dist[X] ，因此到 V 的任何其他路径将至少是 dist[V] 长度，除非图形具有负边长度。

**因此，要使 dijkstra 算法起作用，边权重必须为非负数。**

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-31T19:33:55.600

在下图中尝试 Dijkstra 算法，假设`A`源节点`D`是目标节点，看看发生了什么：

![图形](../Images/86f86e27facd531b32a7ed057a6d42fc.png)

请注意，您必须严格遵循算法定义，并且不应该遵循直觉（它告诉您上面的路径更短）。

这里的主要观点是，该算法只查看所有直接连接的边，并且采用这些边中最小的一条。该算法不向前看。您可以修改此行为，但它不再是 Dijkstra 算法。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-08-18T14:45:47.673

Dijkstra 的算法***假设所有边缘都是正加权的，并且这个假设有助于算法***比其他考虑到负边缘可能性的算法运行得更快（ O(E*log(V) ）（例如，复杂度为 O(V^) 的贝尔曼福特算法3))。

在 A 是源顶点的以下情况（带有 -ve 边）中，该算法不会给出正确的结果：

[![在此处输入图像描述](../Images/41369a99d5741feb29a5dd76afc530e8.png)](https://i.stack.imgur.com/zet2L.png)

这里，从源 A 到顶点 D 的最短距离应该是 6。但根据 Dijkstra 的方法，最短距离将是 7，这是不正确的。

***此外，即使存在负边缘***，Dijkstra 算法有时也可能给出正确的解决方案。以下是此类情况的示例：

[![在此处输入图像描述](../Images/41c9945d73d78aff25808ab471470db6.png)](https://i.stack.imgur.com/zTwuh.png)

但是，***它永远不会检测到负循环***，并且如果***从源可以到达负权重循环，则始终会******产生***始终***不正确***的结果，因为在这种情况下，图中不存在从源顶点开始的最短路径。

 *** * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-29T10:47:38.010

您可以使用不包括负循环的负边的 dijkstra 算法，但您必须允许一个顶点可以被多次访问，并且该版本将失去它的快速时间复杂度。

在那种情况下，实际上我已经看到最好使用具有正常队列并且可以处理负边缘的[SPFA 算法。](https://en.wikipedia.org/wiki/Shortest_Path_Faster_Algorithm)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-12T08:04:36.287

到目前为止，其他答案很好地证明了为什么 Dijkstra 的算法无法处理路径上的负权重。

但问题本身可能是基于对路径权重的错误理解。如果通常在寻路算法中允许路径上的负权重，那么您将获得不会停止的永久循环。

考虑一下：

```
A  <- 5 ->  B  <- (-1) ->  C <- 5 -> D 
```

A和D之间的最佳路径是什么？

任何寻路算法都必须在 B 和 C 之间不断循环，因为这样做会减少总路径的权重。因此，允许连接的负权重将使任何 pathfindig 算法毫无意义，除非您将每个连接限制为仅使用一次。

因此，为了更详细地解释这一点，请考虑以下路径和权重：

```
Path               | Total weight
ABCD               | 9
ABCBCD             | 7
ABCBCBCD           | 5
ABCBCBCBCD         | 3
ABCBCBCBCBCD       | 1
ABCBCBCBCBCBCD     | -1
... 
```

那么，完美的路径是什么？每当算法增加一个`BC`步骤时，它都会将总权重减少 2。

所以最佳路径是永远循环`A (BC) D`的`BC`部分。

由于 Dijkstra 的目标是找到最优路径（而不仅仅是任何路径），根据定义，它不能使用负权重，因为它无法找到最优路径。

Dijkstra 实际上不会循环，因为它保留了它访问过的节点列表。但它不会找到一条完美的路径，而是随便找一条路径。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-14T22:59:12.823

回想一下，在 Dijkstra 的算法中，一旦一个顶点被标记为“关闭”（并且在开放集之外）——**它假设任何源自它的节点都会导致更大的距离**，因此，算法找到了到它的最短路径，并将永远不必再次开发这个节点，但在负权重的情况下这并不成立。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-17T23:24:45.600

在前面的答案之上，为以下简单示例添加几点说明，

[![在此处输入图像描述](../Images/6d90a69bf322521cb89cab4b58d7e382.png)](https://i.stack.imgur.com/DVFfk.png)

1.  **Dijktra 的算法是贪心的，它首先贪婪地找到顶点C**到源顶点**A**的最小距离 ，并将距离**d[C]**（从顶点**A**）分配给边**AC**的权重。
2.  基本假设是，由于首先选择了**C** ，因此在图 st **w(AV) < w(AC)**中没有其他顶点**V**，否则算法会选择**V**而不是**C。**
*******   由于根据上述逻辑，对于与顶点**A**和**C** 不同的所有顶点**V ，** **w(AC) <= w(AV)**。现在，显然任何其他 从**A**开始并以**C结束的路径****P**，经过 **V**，即路径**P = A -> V -> ... -> C**的长度将更长（> = 2）并且路径**P**的总成本将是其边缘的总和，即**cost(P) >= w(AV) >= w(AC) ，假设****P**上的所有边缘具有**非负权重**，因此 **C**可以是安全地从队列**Q**中移除，因为******************************在这个假设下， d[C]**永远不会变得更小/更放松。*********************************   **显然，当P**上的 some.edge 为负时，上述假设不成立 ，在这种情况下**d[C]** 可能会进一步减小，但算法无法处理这种情况，因为到那时它已将**C**从队列**Q**。************

# c# - '.' 时在字符串上剪切文本 在文中找到

> ID：13159341
> 
> 赞同：-2
> 
> 时间：2012-10-31T13:41:09.983
> 
> 标签：c#, string

> **可能重复：**
> [删除字符串中特定字符之后的字符，然后删除子字符串？](https://stackoverflow.com/questions/2660723/remove-characters-after-specific-character-in-string-then-remove-substring)

我有一个字符串变量，其中包含如下文本：

```
"Hello My name is B and I love soccer. I live in California." 
```

我想在第一个“。”之后剪切文本。所以文本显示

```
"Hello My name is B and I love soccer." 
```

我怎样才能以最简单的方式做到这一点？

我试过了：

```
Char Mychar = '.';

Stringvariabel.trimstart(Mychar); 
```

但我想这是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:43:08.960

```
Char Mychar = '.';    
Stringvariabel = Stringvariabel.Split(Mychar).First() + Mychar.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:44:58.073

The simplest way would be to take the substring up until the first occurrence of the character.

```
public string TrimAtFirstChar(string s, char c)
{
    int index = s.IndexOf(c);
    if(index == -1) //there is no '.' in the string
        return s;
    return s.Substring(0, index)
} 
```

Alternately, to avoid worrying about the case where there is no '.', you could use `stringvariable.Split('.')[0]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:45:22.560

If you're only interested in the first sentence, then just grab a substring starting at the beginning and ending at the '.'.

```
Stringvariabel.Substring(0, Stringvariabel.IndexOf('.') + 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:43:06.580

您可以使用[string.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)来获得结果：

```
string input = "Hello My name is B and I love soccer. I live in California. ";
string result = string.Format("{0}.", input.Split('.').First()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:43:16.590

使用`IndexOf`功能将为您工作..

```
string input = "Hello My name is B and I love soccer. I live in California. ";
int i = input .IndexOf('.');
string result = s.Substring(0,i+1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T13:43:25.430

一种方便的方法是使用[`string.Split`](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)并要求仅第一部分：

```
var firstPart = input.Split(new[] { '.' }, 1).First(); 
```

这是非常有效的，因为它不会在第一个点之后继续处理字符串，但它会删除该点（如果它存在）并且您将无法首先判断是否有一个点。

另一个选项是`string.IndexOf`条件：

```
var index = input.IndexOf(".");
if (index != -1) {
    input = input.SubString(0, index);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-31T13:44:18.890

`TrimStart`从您给它的列表中的字符串开头删除字符。它只会删除 a`.`如果它在一开始就出现。

您可以找到第一个`.`并在该点之前获取一个子字符串：

```
stringVar.Substring(0, stringVar.IndexOf('.') + 1); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-31T13:44:45.190

您可以执行以下操作

```
stringVariable.Split('.')[0] 
```

或者

```
stringVariable.SubString(0, stringVariable.IndexOf(".") + 1) 
```

希望这可以帮助！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-31T13:45:59.923

Without split, only using `Substring` and `IndexOf` (which is more efficient when the text is very large):

```
int index = text.IndexOf(".") + 1;
String result = text;
if(index > 0)
    result = text.Substring(0, index); 
```

[http://ideone.com/HL6GwN](http://ideone.com/HL6GwN)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-31T13:43:25.010

看一下[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法。

```
var myString = "Hello My name is B and I love soccer. I live in California. ";
var firstPart = myString.Split('.')[0]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-31T13:43:28.253

```
var splitLine = yourString.Split('.');
if (splitLine != null && splitLine.Count > 0)
  return splitLine[0]; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-31T13:44:16.537

```
variablename.Substring(0, variablename.IndexOf('.') + 1); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-31T13:48:08.633

请注意 String.Split() 可能会产生影响，因为您创建了一个数组，其中包含由给定分隔符分隔的所有子字符串，但您只对第一次出现感兴趣。所以使用 IndexOf() 和 Substring() 更有意义。

```
string input = "Hello My name is B and I love soccer. I live in California. ";
var index = input.IndexOf(".");

var result = index > 0
              ? input.Substring(0, index)
              : input; 
```

# c++ - Obtaining the derived type from an instance of the base type when many derived types are possible

> ID：13159347
> 
> 赞同：1
> 
> 时间：2012-10-31T13:41:41.107
> 
> 标签：c++, templates, types

I've seen solutions to this problem that suggest using

```
if( dynamic_cast<DerviedType1*>( base ) ){
    // Do something
}
else if( dynamic_cast<DerviedType2*>( base ) ){
    // Do something else
}
else if( dynamic_cast<DerviedType3*>( base ) ){
   // Do another thing
}
// and so on 
```

While functional, this solution is far from elegant, and I was hoping that there was a single-line solution, along the lines of `decltype` or `typeid`, neither of which help me here.

My specific problem is as follows. I have a function that will take a pointer to an instance of the base class as an argument. This function will then call a template function within that takes the derived type as its parameter. E.g.

```
void myFunc( Base *base )
{
    myTemplateFunc<Derived>();
} 
```

I would like to keep my code simple, without a laundry list of `if` statements, but I'm not sure how to go about it. It should be noted that the `Base` object itself will not be passed into the template function, only it's type.

For reference, I'm looking for something along the lines of

```
void myFunc( Base *base )
{
    myTemplateFunc<decltype(base)>();
} 
```

but this will only return the `Base` type, which doesn't help me here.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T13:47:16.633

The other way is multiple dispatching

```
class Base
{
   virtual void dispatch () = 0;
};

template <class T>
class BaseTpl : public Base
{
public:
  void dispatch () {myTemplateFunc<T> ();}
}; 
```

and then

```
class DerviedType1 : public BaseTpl <DerviedType1>
{
}; 
```

and actual ussage

```
void myFunc( Base *base )
{
    base->dispatch ();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:45:38.093

How about

```
struct Base
{
   virtual void execute() = 0;
}

struct Derived : Base
{
   virtual void execute()
   {
      myTemplateFunc<Derived>();
   }
} 
```

and just call it as

```
void myFunc( Base *base )
{
    base->execute();
} 
```

which will dispatch to the correct method.

# gcc - FLEX 中的回声和拒绝

> ID：13159352
> 
> 赞同：2
> 
> 时间：2012-10-31T13:41:52.767
> 
> 标签：gcc, lex, flex-lexer

下面是 FLEX 程序的片段

```
%%
a     |
ab    |
abc   |
abcd  ECHO; REJECT;
.|\n  printf("xx%c", *yytext);
%% 
```

输入：

```
abcd 
```

输出：

```
abcdabcabaxxaxxbxxcxxdxx 
```

有人可以解释如何获得这个输出吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:22:53.103

`REJECT`有效地导致`flex`备份到下一个更好的匹配，记住以下优先规则`flex`：

1.  匹配可能最长的标记。
2.  在具有相同长度的标记中，更喜欢源文件中较早的模式。

在您的情况下，字符串`abcd`将匹配`a`,或; 首选的是最长的 ( )。`ab``abc``abcd``abcd`

由于您在`ECHO`动作之前有一个动作`REJECT`，`ECHO`即使匹配稍后会被拒绝，也会发生这种情况。最终，`flex`将回退到默认规则（它也匹配`a`但稍后在源文件中），它将打印`xxa`并接受字符。现在，除了默认规则之外，没有任何匹配项，因此接下来的三个字符一次匹配一个。

如果您将`'\n'`s 写入标准输出，这可能会更清楚。

# android - id 上的数据库更新已删除

> ID：13159358
> 
> 赞同：1
> 
> 时间：2012-10-31T13:42:30.550
> 
> 标签：android, sqlite, increment

有人可以告诉我下面的编码有什么问题。为什么我不能更新下一个职位？

```
 public static void deleteItemsFromProduct(long nomer) {

        cursor_child = DataSourceChild.queryAllinChild();

        if (cursor_child != null) {

            par = new String[]{String.valueOf(nomer)};

            db_child.delete(DBHelperChild.TABLE_ITEMS_AND_PRICES, DBHelperChild.COLUMN_NOMER + "=?", par);

Prod.setProdId(nomer);

cv_child = new ContentValues();
cv_child.put(DBHelperChild.COLUMN_NOMER, Prod.getProdId());

par = new String[]{String.valueOf(nomer+1)};

int updCount = db_child.update(DBHelperChild.TABLE_ITEMS_AND_PRICES, cv_child, DBHelperChild.COLUMN_NOMER + "=?", par);

Log.d(LOG_TAG, "updated rows count = " + updCount);

            if (cursor_child.moveToFirst()) {

                Log.d(LOG_TAG, "--- Left in the table for items and prices: ---");

                do {

                    Log.d(LOG_TAG,
                            "item id = " + cursor_child.getInt(item_and_price_idColIndex)
                            + ", item name = " + cursor_child.getString(item_ColIndex)
                            + ", item price = " + cursor_child.getInt(price_ColIndex)
                            + ", product nomer = " + cursor_child.getInt(nomer_ColIndex));

                } while (cursor_child.moveToNext());
            } else {
            }

        } else {
            Log.d(LOG_TAG, "Cursor is null");
            // закрываем курсор
            cursor_child.close();

        }
    } 
```

这个想法是删除列表中的一组项目，同时从另一个列表中获取 id（名称）。此代码仅在删除后更新下一个 id 名称，但不更新列表中的其他人。谢谢你。

# ios - iOS-具有详细信息披露按钮时的表格行/单元格行为？

> ID：13159359
> 
> 赞同：1
> 
> 时间：2012-10-31T13:42:31.950
> 
> 标签：ios

在我的表格视图中，我有一定数量的行，并且都有一个详细信息披露按钮，单击详细信息披露按钮会将用户带到一个在文本视图中显示信息的新视图。我无法得出用户点击该行时该行的行为方式的结论，因为 Apple 针对表格视图和详细信息披露按钮的指南令人困惑。

请任何人都可以为我解释以下两种情况。提前致谢。

1.  新视图仅在用户点击详细信息披露按钮时滑入并且当用户点击行中的其他位置时没有任何反应是否正确。
2.  如果用户点击关于突出显示的详细信息披露按钮应该是什么行为？
3.  如果用户点击行中的其他位置，表行的行为应该是什么？

苹果指南说：“当一个详细信息披露按钮出现在表格行中时，点击该行中的其他地方不会激活详细信息披露按钮；相反，它会选择行项目或导致应用程序定义的行为。”

和 Apple 表格视图指南说“当用户点击可选项目时，表格行会短暂突出显示。如果行选择导致导航到新屏幕，则所选行会在新屏幕滑入到位时短暂突出显示。当用户导航回到前一个屏幕，最初选择的行再次短暂突出显示，以提醒用户他们之前的选择（它不会保持突出显示）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:46:36.137

当您点击该行时，将调用此委托方法：

```
– tableView:didSelectRowAtIndexPath: 
```

当您点击详细信息披露按钮时，将调用以下委托方法：

```
– tableView:accessoryButtonTappedForRowWithIndexPath: 
```

> **表视图：accessoryButtonTappedForRowWithIndexPath：**
> 
> 告诉代理用户点击了与给定行关联的附件（披露）视图。- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 参数
> 
> 表视图
> 
> ```
> The table-view object informing the delegate of this event. indexPath
> 
> An index path locating the row in tableView. 
> ```
> 
> 讨论
> 
> 代理通常通过显示与所选行相关的新视图来响应对公开按钮（附件视图）的点击。为 indexPath 处的行设置辅助视图时，不会调用此方法。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UITableView.h 中声明
> 
> **表视图：didSelectRowAtIndexPath：**
> 
> 告诉代理指定的行现在被选中。- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 参数
> 
> 表视图
> 
> ```
> A table-view object informing the delegate about the new row selection.  indexPath
> 
> An index path locating the new selected row in tableView. 
> ```
> 
> 讨论
> 
> 委托处理此方法中的选择。它可以做的一件事就是将复选标记图像（UITableViewCellAccessoryCheckmark）专门分配给一个部分中的一行（单选列表样式）。当表格的编辑属性设置为YES（即表格视图处于编辑模式）时，不会调用此方法。有关与此方法相关的更多信息（和代码示例），请参阅 iOS 表视图编程指南中的“管理选择”。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 也可以看看
> 
> ```
> – tableView:willSelectRowAtIndexPath:
> – tableView:didDeselectRowAtIndexPath: 
> ```
> 
> 在 UITableView.h 中声明

参考：[UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:46:08.790

You can do whatever you want with this discloure button. 1)New views can slide event if will tap on row. 2) nothing 3) you can dot whatever you want: show new `UIViewController`, `UIAlertView` etc. It depends on your imagination. There are no restrictions for this.

# database - 如何使用此哈希通过 redis 获取数据

> ID：13159360
> 
> 赞同：0
> 
> 时间：2012-10-31T13:42:33.417
> 
> 标签：database, nosql, redis

在文档中说你可以使用哈希来存储对象或任何类型的数据，然后你可以提取它们。例如，我想通过使用哈希来保存一些用户的 id，然后提取所有 id 或所有具有 id 的元素（有些东西，我没有完成类似的事情），你能帮我吗？

```
redis 127.0.0.1:6379> set user:id:1234 "content of my first user"
OK
redis 127.0.0.1:6379> set user:id:1235 "content of my second user"
OK 
redis 127.0.0.1:6379> set user:id:1236 "content of my third user"
OK
redis 127.0.0.1:6379> get user:id
(nil)  ####I hoped to see all my id's users listed, I want to make 
       something like that,in the documentation I saw an example, but 
       is not completed#### 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:45:15.783

这些是普通的顶级密钥集。要进行哈希，您应该使用 HSET

```
hset user:id 1234 "content of my first user"
hset user:id 1235 "content of my second user"

hgetall user:id 
```

# jquery - 使用 jQuery 添加表单字段（wordpress 中的联系 7 表单）

> ID：13159372
> 
> 赞同：3
> 
> 时间：2012-10-31T13:43:17.350
> 
> 标签：jquery, wordpress

我正在尝试使用 jQuery 添加表单字段（wordpress 中的联系 7 表单）。它具有使用 jQuery 显示的隐藏字段。

我刚刚完成了一个运行良好的 jsFiddle：http: [//jsfiddle.net/Mangoeat/SfTyG/1/](http://jsfiddle.net/Mangomeat/SfTyG/1/)

我的JavaScript：

```
$(document.body).click(function () {
    $("div:hidden:first").fadeIn("slow");
  }); 
```

但是当我将 jQuery 函数放入我的 wordpress 测试页面时，我无法让它工作。

[http://libra-frisk.com/uberMenuTest/?page_id=84#](http://libra-frisk.com/uberMenuTest/?page_id=84#)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:52:44.220

您尚未将点击事件附加到节目或点击此处链接。为它们添加一个 id 和你想要出现的 div。然后将您的JS更改为：

```
$(document).ready(function() {
 $('#show').click(function () {
    $("#hiddencontent").fadeIn("slow");
  });
}); 
```

因此，在这种情况下，您可以将 show id 添加到 click here 号召性用语中，并将隐藏内容的 ID 添加到您想要显示的隐藏内容中。原因是您对要与之交互的元素不够具体，在您的案例中 div 和 body 不够具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:30:18.097

好吧，对不起，那就是：

```
$(document).ready(function() {
    $("#show").click(function() {
         $('.container1:hidden:first').show();
    });   
}); 
```

# ruby-on-rails - 带有 Aptana IDE 的 Rails：带有方法的智能感知

> ID：13159373
> 
> 赞同：1
> 
> 时间：2012-10-31T13:43:19.867
> 
> 标签：ruby-on-rails, ide, aptana

我正在为我的 Rails 项目使用 Aptana IDE。

当我选择一个类的方法时。（即`CSV.parse_line`），IDE 不会向我显示该方法的参数。

我怎样才能解决这个问题？

# php - 如何在两个不同的表中添加相同的值

> ID：13159382
> 
> 赞同：0
> 
> 时间：2012-10-31T13:43:36.333
> 
> 标签：php, database, wordpress

我正在尝试使用 excel 文件添加自定义标签列表，我已经完成了大部分工作。但我很困惑如何在 2 个不同的表列中添加相同的值。

我已将值插入

```
INSERT INTO `steve`.`wp_terms` (`term_id`, `name`, `slug`, `term_group`) VALUES (NULL, 'tag99', 'tag99', '0'); 
```

和

```
INSERT INTO `steve`.`wp_term_taxonomy` (`term_taxonomy_id`, `term_id`, `taxonomy`, `description`, `parent`, `count`) VALUES (NULL, '21', 'post_tag', '', '0', '0'); 
```

现在我想在两个表中添加 term_id .. 有人可以告诉我该怎么做吗？

AND`term_id`是数据库生成的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:52:54.290

```
INSERT INTO `steve`.`wp_term_taxonomy` (`term_taxonomy_id`, `term_id`, `taxonomy`, `description`, `parent`, `count`) VALUES (NULL, LAST_INSERT_ID, 'post_tag', '', '0', '0'); 
```

如果我正确地遵循您的第一个查询插入表并为该记录创建一个新 id，那么您想在下一个查询中使用该 ID 插入到另一个表中，对吗？如果是这种情况，上述查询应该适用于您的第二个查询，使用 LAST_INSERT_ID 作为 term_id 值。

为了用你的新代码更新问题，我强调应该使用这个：

```
 $sql2 = "INSERT INTO " . $table2 . " (`term_taxonomy_id`, `term_id`, `taxonomy`, `description`, `parent`, `count`) VALUES (NULL, LAST_INSERT_ID, 'post_tag', '', '0', '0')";

        $wpdb->query($sql);
        $wpdb->query($sql2); 
```

您在上面的方式是在执行之前覆盖您的第一个查询。

另外，我不明白您如何将空值插入到自动增量字段中，仅此一项就应该引发错误。老实说，您的两个查询都应该完全像这样将它们的基本 id（自动递增的）从查询中删除：

$sql2 = "插入" 。$table2 。" ( `term_id`, `taxonomy`, `description`, `parent`, `count`) 值 (LAST_INSERT_ID, 'post_tag', '', '0', '0')";

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:10:05.453

使用[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)

```
mysql_query("INSERT INTO `steve`.`wp_terms` (`term_id`, `name`, `slug`, `term_group`) VALUES (NULL, 'tag99', 'tag99', '0')");

$lastInsertId = mysql_insert_id();

mysql_query("INSERT INTO `steve`.`wp_term_taxonomy` (`term_taxonomy_id`, `term_id`, `taxonomy`, `description`, `parent`, `count`) VALUES (NULL, '" . $lastInsertId . "', 'post_tag', '', '0', '0')"); 
```

注意：要使用 mysql_insert_id()，必​​须将`term_id`in`wp_terms`设置为自动递增。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:47:58.930

您需要使用`ALTER`表并将该列的定义/约束添加到另一个表中，这是[手册](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# facebook - 墙上的 Facebook 分享无法正确显示æøå

> ID：13159383
> 
> 赞同：1
> 
> 时间：2012-10-31T13:43:39.247
> 
> 标签：facebook, share

在我的页面上使用分享文章时：http: [//www.villaholdet.com/index.php/15-festudvalg/31-festudvalget-mal-rode-tue](http://www.villaholdet.com/index.php/15-festudvalg/31-festudvalget-mal-rode-tue)

...它显示有趣的字符而不是æøå。

分享按钮被称为：“Del denne artikel”

有什么想法吗？

# extjs - 数据存储具有空数据属性

> ID：13159385
> 
> 赞同：0
> 
> 时间：2012-10-31T13:43:40.430
> 
> 标签：extjs

我正在使用 Ext.js 并尝试设置数据存储并将其映射到 FormPanel 上的数据字段，以便我可以轻松访问数据输入。
我的映射中缺少某些内容：当我在文本字段中输入数据并点击提交按钮的提交处理程序时，商店中的数据属性为空白。我期待它包含页面上的数据输入。有人可以帮忙吗？非常感谢：

```
infoPanel = function () {
    this.store = new Ext.data.JsonStore({
        autoLoad: true,
        root: 'Data',
        storeId: 'creditMemoStore',
        fields: ['shipto', 'billto', 'reasonCode', 'creditClaimed', 'adjustmentAmount', 'poNumber']
    });

this.fieldset = {
    xtype: 'fieldset',
    flex: 1,
    border: false,
    defaultType: 'field',
    items: [
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Ship to',
            name: 'shipto',
            //dropdown
            allowBlank: false
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Bill to',
            name: 'billto',
            //dropdown
            allowBlank: false
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Reason Code',
            name: 'reasonCode',
            //dropdown
            allowBlank: false
        },
        {
            labelWidth: 160,
            xtype: 'numberfield',
            allowNegative: false,
            fieldLabel: 'Amount',
            allowBlank: false,
            name: 'creditClaimed'
        },
        {
            labelWidth: 160,
            xtype: 'numberfield',
            allowNegative: false,
            fieldLabel: 'Adjustment Amount',
            name: 'adjustmentAmount',
            allowBlank: false,
            maxLength: 5
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Customer PO Number',
            allowBlank: false,
            name: 'poNumber',
            maxLength: 15
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Debit Memo Number',
            allowBlank: false,
            name: 'dmNumber',
            maxLength: 50
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Credit Memo Number',
            allowBlank: false,
            name: 'cmNumber',
            maxLength: 6
        },
        {
            xtype: 'textfield',
            labelWidth: 160,
            fieldLabel: 'Currency Code',
            name: 'currencyCode',
            //dropdown
            allowBlank: false,
            maxLength: 3,
            value: 'USD'
        }
    ]
};

this.panel = new Ext.form.FormPanel({
    renderTo: Ext.getBody(),
    width: 700,
    title: 'Create Credit Memo',
    height: 400,
    frame: true,
    id: 'creditMemoFormPanel',
    layout: 'vbox',
    layoutConfig: {
        align: 'stretch'
    },
    items: [
        this.fieldset
    ],
    store: this.store,
    buttons: [
        {
            text: 'Reset',
            handler: function () {
                this.up('form').getForm().reset();
            }
        },
        {
            text: 'Submit',
            formBind: true,
            handler: function () {
                var form = this.up('form').getForm();
                var store = Ext.StoreMgr.get('creditMemoStore');
                var dataObject = { testPost: store.data};
                if (form.isValid()) {
                    Ext.Ajax.request({
                        url: 'CreateCreditMemo',
                        jsonData: Ext.JSON.encode(dataObject),
                        success: function() { Ext.Msg.alert('json post Success'); },
                        failure: function () { Ext.Msg.alert('json post Fail'); },
                    });
                }
            }
        }
    ]
}); 
```

}

```
Ext.onReady(function () {
    var ip = new infoPanel();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:51:08.437

Ext.js 存储仅用于一次显示多组数据的记录。

商店不适用于基本表格。Ext.js 表单在提交时自动发布所有字段的值。

# java - Android：Notification.DEFAULT_VIBRATE 是否需要振动权限？

> ID：13159386
> 
> 赞同：12
> 
> 时间：2012-10-31T13:43:41.797
> 
> 标签：java, android, android-notifications, vibration, android-vibration

有时我读到

`notification.defaults|= Notification.DEFAULT_VIBRATE;`

和

`notification.defaults = Notification.DEFAULT_ALL;`

需要振动权限

`<uses-permission android:name="android.permission.VIBRATE" ></uses-permission>`

但有时我读到它没有。

哪一项是正确的信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T14:08:33.520

好的，显然，您确实需要振动许可。谢谢！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-05T08:45:55.043

您可能有兴趣阅读：[https ://android.googlesource.com/platform/frameworks/base/+/cc2e849](https://android.googlesource.com/platform/frameworks/base/+/cc2e849)

从 4.2.1 开始：

> 通知振动改进：[不要合并]
> 
> *   当通知作为后备振动时（即，因为他们想播放声音但设备处于振动模式），这不再需要振动权限。
> *   作为奖励，如果您的通知使用 DEFAULT_VIBRATE，您也不需要 VIBRATE 权限。
> *   如果您指定自定义振动模式，您仍然需要 VIBRATE 权限。
> *   在回退模式下振动的通知使用相同的振动模式，但将来可以轻松更改。
> *   DEFAULT_VIBRATE 和后备振动模式现在在 config.xml 中指定。

# c# - 缩放时获取一组数据点

> ID：13159392
> 
> 赞同：3
> 
> 时间：2012-10-31T13:44:13.757
> 
> 标签：c#, zooming, mschart

我有一个带有系列 (SeriesChartType.Point) 的 MSChart 对象；启用缩放以允许用户放大数据的特定区域。用户放大该区域后，我有兴趣了解仍然可见的数据点集。

有没有办法确定哪些数据点仍然可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:08:07.667

像下面这样的东西应该适合你。我用 a 对其进行了测试`Line` `ChartType`，但只要数据是`X,Y`（而不是`X,Y,Y`）就应该适用于任何绘图类型

```
 Dim Xmin As Double = aChart.ChartAreas(0).AxisX.ScaleView.ViewMinimum
    Dim Xmax As Double = aChart.ChartAreas(0).AxisX.ScaleView.ViewMaximum

    Dim Ymin As Double = aChart.ChartAreas(0).AxisY.ScaleView.ViewMinimum
    Dim Ymax As Double = aChart.ChartAreas(0).AxisY.ScaleView.ViewMaximum

    Dim VisibleDataPoints As New Series

    For Each pt As System.Windows.Forms.DataVisualization.Charting.DataPoint In aChart.Series(0).Points
        If pt.XValue >= Xmin And pt.XValue <= Xmax Then
            If pt.YValues(0) >= Ymin And pt.YValues(0) <= Ymax Then
                VisibleDataPoints.Points.Add(pt)
            End If
        End If
    Next
    VisibleDataPoints.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line
    VisibleDataPoints.Color = Color.Red
    aChart.Series.Add(VisibleDataPoints) 
```

高温高压

# asp.net - asp.net webservice中的方法无法连接到sharepoint站点

> ID：13159403
> 
> 赞同：0
> 
> 时间：2012-10-31T13:44:48.047
> 
> 标签：asp.net, .net, web-services, sharepoint

我正在尝试从 asp.net Web 服务中的方法连接到 sharepoint 站点，但它抛出以下异常：

> `http://servername:1234`找不到位于的 Web 应用程序。验证您是否正确键入了 URL。如果 URL 应该服务于现有内容，系统管理员可能需要将新的请求 URL 映射添加到预期的应用程序。

我使用的代码只有 3 行：

```
 Dim sp As New SPSite("http://swd-ws2008:1234")
  Dim wen As SPWeb = sp.OpenWeb
  Dim list As SPList = wen.Lists("EmployeeFile") 
```

当我从 Windows 桌面应用程序运行相同的代码时，连接工作找到并且我能够从共享点列表中检索数据但是当我从 asp.net 运行它时它无法连接。

# java - Hadoop：使用什么来代替已弃用的接口 Mapper 和 Reducer？

> ID：13159409
> 
> 赞同：0
> 
> 时间：2012-10-31T13:45:05.290
> 
> 标签：java, hadoop, mapreduce, version, deprecated

我使用的是[在这里](http://apache.miloslavbrada.cz/hadoop/common/hadoop-0.22.0/hadoop-0.22.0.tar.gz)下载的 Hadoop 版本 0.22.0 。我开始根据[本](https://ccp.cloudera.com/display/DOC/Hadoop+Tutorial)教程创建自定义映射器和化简器，发现`Mapper<K1, V1, K2, V2>`所有映射器类要实现的接口已被弃用。`Reducer<K2, V2, K3, V3>`旨在由所有 reducer 实现的接口（至少根据[教程](https://ccp.cloudera.com/display/DOC/Hadoop+Tutorial)）也已弃用。和之类的类`MapReduceBase`也是如此`JobConf`。这些都是所有自定义映射器和化简器都需要的核心类和接口，不是吗？javadoc 中没有说明应该使用什么来替代那些已弃用的类。

那么我应该使用哪些接口和类来代替那些已弃用的接口和类呢？还是我应该使用它们？为什么它们被弃用？请向我解释发生了什么以及我应该怎么做，因为我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:23:56.523

[org.apache.hadoop.mapred](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapred/package-frame.html)包中的类来自旧 MR API， [org.apache.hadoop.mapreduce](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/package-frame.html)来自新 API。请注意，所有类都没有从旧 API 移植到新 API。这是来自 SO的[类似线程。](https://stackoverflow.com/questions/7626077/mapreducebase-and-mapper-deprecated/7627822#7627822)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:13:34.420

`Mapper<KEYIN, VALUEIN, KEYOUT, VALUEOUT>`包中有一个同名的类（不是接口！）`org.apache.hadoop.mapreduce`，应该使用它来代替接口和基类。与 reducer 相同的故事：`Reducer<KEYIN, VALUEIN, KEYOUT, VALUEOUT>`package 中有一个类`org.apache.hadoop.mapreduce`。

我仍然不知道该怎么做，`JobConf`但是当我发现时我会更新我的答案。

* * *

编辑：将使用 Class`Configuration`而不是`JobConf`.

# php - Securing PHP website on LAN server - is securing SESSION, prepared statements and HTTPS enough?

> ID：13159420
> 
> 赞同：1
> 
> 时间：2012-10-31T13:45:35.743
> 
> 标签：php, session, https, mysqli

I'm developing a website that will be accessible from LAN only. I still wish to make it as safe as possible.

From web point of view, is it enough to add SESSION check to every PHP file, use prepared mysqli statements and use HTTPS?

I will be more specific:

I'm checking every PHP page with this:

```
if(!isset($_SESSION['login']) || $_SESSION['UA'] != $_SERVER['HTTP_USER_AGENT'] || $_SESSION['IP'] != $_SERVER['REMOTE_ADDR'] || time() - $_SESSION['timeout']>=600){
session_unset();
session_destroy();
header('Location:index.php'); 
```

I also regenerate session ID on every page, just to be sure. So I'm checking user's user agent, IP address, activity timeout and a session variable "login".

For mysql connection I mostly use prepared statements (mysqli) for security and performance, in cases I don't or can't use prepared statement, I always do real_escape_string() when dealing with client data.

I will also allow HTTPS only, with checking `$_SERVER['HTTPS'] = "on"`.

The server is never setting any cookies, except PHPSSID.

Is this all I can do to make my website secure, or is there anything else? I found bits and pieces all over the web how to secure a website, but nothing on one place, so that's why I'm asking here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:47:52.270

A better site for this question may be [https://security.stackexchange.com/](https://security.stackexchange.com/)

Although your LAN web server would be *safer* know that it's not bulletproof. Your client machines could be one of the major vectors for insecurity in a LAN environment especially if they also can access and are exposed to the outside internet. Leaving them open to things like [network eavesdropping](https://www.owasp.org/index.php/Network_Eavesdropping) or [Man-in-the-middle](https://www.owasp.org/index.php/Man-in-the-middle_attack) attacks.

Here is [A Guide to Building Secure Web Applications and Web Services](https://www.owasp.org/index.php/Guide_Table_of_Contents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:29:45.240

您应该减少攻击面。

看起来您有 PHP 文件处于打开状态以供请求。对于您知道的文件，您可以在上面写一个代码块来“保护”它们。

而是将所有这些移动到一个私有目录中，并且在 webroot 中只有一个入口点，例如`index.php`. 由于这是唯一一点，您可以验证是否应在中心位置允许请求。这意味着您不能忘记要保护一个文件，如果您想添加额外的检查，您可以在一个地方改善情况。

使用 PHP 文件 (Apache HTTPD) 的示例配置：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

在 PHP 脚本中，您可以通过使用 和 等特殊变量来获取 URI/ [`$_SERVER['REQUEST_URI']`URL`$_SERVER['QUERY_STRING']`](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:55:43.907

确保验证用户提供的尽可能多的数据，以确保它是有效的或用户应该给你的东西，如果你必须重新显示他们给你的数据或其他人给你的数据（即你将它存储在db 供以后使用）然后确保使用 htmlenties 来制作它，这样 JavaScript 就不会在数据中工作。如果您将他们的数据放在 javascript 中，那么请改用 addlashes。你说的很多也很好。

作为一个随机附注，我会验证他们给你的会话 id 是一个有效的会话 id，即 ^[a-zA-Z0-9]{26,40}$

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:49:53.307

在您的 Web 服务器配置中，您可以阻止所有不是来自您的 LAN 的请求，作为额外的预防措施。

除此之外，它似乎绰绰有余。

# python - 正则表达式匹配 [^az] 或 $

> ID：13159426
> 
> 赞同：3
> 
> 时间：2012-10-31T13:45:50.937
> 
> 标签：python, regex

我需要一些关于字符串正则表达式匹配句子中的单词的帮助，以考虑标点符号和行尾。我的尝试在行尾情况下失败了。

以下示例根据我的需要进行评估：

```
>>> print bool(re.search('test[^a-z]','test!'.lower()))
True
>>> print bool(re.search('test[^a-z]','test aaa'.lower()))
True
>>> print bool(re.search('test[^a-z]','testaaa'.lower()))
False 
```

然而，行尾案例评估`False`：

```
>>> print bool(re.search('test[^a-z]','test'.lower()))
False 
```

行尾字符`$`不在集合中`a-z`，所以我认为这种情况也会评估`True`。我该如何处理`regex`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T13:46:59.557

您可以使用负[前瞻](http://www.regular-expressions.info/lookaround.html)：

```
'test(?![a-z])' 
```

或[交替](http://www.regular-expressions.info/alternation.html)：

```
'test([^a-z]|$)' 
```

# database - When using cucumber and databasecleaner can I keep a single entry in a table?

> ID：13159434
> 
> 赞同：2
> 
> 时间：2012-10-31T13:46:02.787
> 
> 标签：database, testing, cucumber, database-cleaner

I am currently using cucumber and databasecleaner to test my application. And currently in my `env.rb` i have the setup of the cleaner as:

```
DatabaseCleaner.strategy = :truncation, {:except => %w[TABLE]}
After do
  DatabaseCleaner.clean
end 
```

This way I can keep the data in `TABLE`. But I would also like to keep a single entry in a different table between tests. Is there any way I can achieve that or do I have to recreate it all the time with a `Before` hook?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:18:04.430

我能想到这个黑客。在您的测试 ENV DB 的该表上添加一个`ON DELETE trigger`。触发器调用插入行的函数。如果行已经存在，您可能需要在函数中添加一个检查以不执行任何操作。

# drupal - How to crawl other websites with Drupal?

> ID：13159438
> 
> 赞同：0
> 
> 时间：2012-10-31T13:46:10.543
> 
> 标签：drupal, search, solr, web-crawler

I am actually looking for a solution to crawl specified websites with Drupal and make theres content visibil in my search after the crawling process. Any ideas about that?

I tried for now the Drupal Apache Solr Modul which is working very good as a search as it should be, but i dont know how to extend it, so that the index is filled with content of other sites?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:20:26.887

尝试使用[Feed 爬虫模块](http://drupal.org/project/feeds_crawler)

# opengl - OpenGL draw Polygon with GL_LINES and angle between lines

> ID：13159444
> 
> 赞同：0
> 
> 时间：2012-10-31T13:46:21.410
> 
> 标签：opengl, polygon, angle

I need to draw a Polygon iteratively. for example, I want to draw a Polygon with 8 corners. I need to draw the first line with `GL_LINES` and then draw the second line with the same length and an angle of `135°` between them, the third line has also an angle of `135°` to the second line, etc. I want to make a loop to render it but I don't know how. I have an approach, but it doesn't work properly.

the second point of line `n-1` should be the first point of `n` and so on... At the end, I need to get a closed Polygon. the last point of the last line should be the first point of the first line.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:52:31.477

使用[`GL_LINE_LOOP`](http://www.opengl.org/sdk/docs/man2/xhtml/glBegin.xml#description)，它将自动将您的最后一个顶点连接到您的第一个顶点：

```
#include <GL/glut.h>
#include <cmath>

void glPolygon( unsigned int sides )
{
    if( sides < 3 ) return;

    const float PI = 3.14159;
    const float step = ( 2 * PI ) / static_cast< float >( sides );

    glBegin( GL_LINE_LOOP );
    for( unsigned int i = 0; i < sides; ++i )
    {
        glVertex2f( cos( i * step ), sin( i * step ) );
    }
    glEnd();
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double ar = glutGet( GLUT_WINDOW_WIDTH ) / (double)glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( -2 * ar, 2 * ar, -2, 2, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3ub( 255, 0, 0 );
    glPolygon( 8 );

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Polygons" );
    glutDisplayFunc( display );
    glutMainLoop();
    return 0;
} 
```

`GL_LINES`如果你对这个作品死心塌地：

```
void glPolygonLines( unsigned int sides )
{
    if( sides < 3 ) return;

    const float PI = 3.14159f;
    const float step = ( 2 * PI ) / static_cast< float >( sides );

    glBegin( GL_LINES );
    for( unsigned int i = 0; i < sides; ++i )
    {
        unsigned int cur = ( i + 0 ) % sides;
        unsigned int nxt = ( i + 1 ) % sides;
        glVertex2f( cos( cur * step ), sin( cur * step ) );
        glVertex2f( cos( nxt * step ), sin( nxt * step ) );
    }
    glEnd();
} 
```

# shopify - Shopify / 每次履行多个跟踪号

> ID：13159446
> 
> 赞同：3
> 
> 时间：2012-10-31T13:46:22.407
> 
> 标签：shopify

使用 Shopify API，我能够成功地从商店中提取订单，并将履行情况发布到该商店。但是，当我使用跟踪号更新该履行时，我无法弄清楚如何为每个订单项添加超过 1 个跟踪号。我可以在订单级别更新一个跟踪号，或者在每个单独的订单项级别只更新一个。当需要将订单项拆分为不同的货件时，这可能会导致问题。

例如，假设一家商店只销售一种类型为 sku 1234 的帽子。订单进来了 10 顶帽子。该订单有一个订单项，数量为 10。

因为我只有每个可以装 4 顶帽子的盒子，所以我需要把这个订单放在 3 个不同的盒子里：

盒子 1 - 4 顶帽子，sku 1234，追踪编号 700

盒子 2 - 4 顶帽子，sku 1234，跟踪号 800

盒子 3 - 2 顶帽子，sku 1234，跟踪号 900

在这种情况下，我目前正在执行 PUT 以更新跟踪，将 3 个跟踪号逗号分隔为单个跟踪号元素，

```
<fulfillment>
  <tracking-number>700,800,900</tracking-number>
  <id type="integer">255858046</id>
</fulfillment> 
```

但最好能够将它们区分为 3 个不同的跟踪号：

```
<fulfillment>
  <tracking-number>700</tracking-number>
  <tracking-number>800</tracking-number>
  <tracking-number>900</tracking-number>
  <id type="integer">255858046</id>
</fulfillment> 
```

使用 Shopify API，有没有办法将所有 3 个跟踪号分别添加到订单级别或订单项级别的履行中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:58:46.797

这是一个已知问题，实际上与我们拥有的一些 3rd 方集成相混淆。ATM 上正在开发一个补丁，它应该可以为该集成以及您的情况做这件事。

综上所述，目前是不可能的。我建议做 3 个单独的履行作为解决方法，但这仅在这些项目不是所有相同的产品变体时才有效。

# javascript - 如何使用 javascript d3 更新数据？

> ID：13159448
> 
> 赞同：0
> 
> 时间：2012-10-31T13:46:26.123
> 
> 标签：javascript, jquery, d3.js

我正在制作一个带有不同圆圈的情节。每个圆圈都有固定的位置，但每个圆圈的大小可以通过 html 输入字段单独更改。

用于输入字段的代码是这样的：

```
<input type="text" id="size1" class="size" value="" style="width: 30px;"> 
```

我已将数据保存在此数据集中：

```
var dataset = [{name: "circle1", xpos: -413, ypos: 278, color: "black", radius: $('#size1').val(),},
            {name: "circle2", xpos: -161, ypos: 290, color: "black", radius: $('#size2').val(),}]; 
```

这就是我画圆的方式：

```
function drawCircle () {
            svg.selectAll("circle").remove();
            svg.selectAll("circle")
               .data(dataset)
               .enter()
               .append("svg:circle")
               .attr("cx", function(d){
                        return xScale(d.xpos);})
               .attr("cy", function(d){
                        return yScale(d.ypos);})
               .attr("r", function (d){            
                        return rScale(d.radius);})                          
               .attr("fill", "rgb(100,0,0)")
               .attr("opacity", "0.7");
        } 
```

最后我做了一个触发器，当事情发生变化时，圆圈会再次绘制：

```
$('.size').change(function(){
            radius = $(this).val(); 
            svg.selectAll("circle")
               .transition()
               .duration(750)
               .attr("r", function (d){            
                        return rScale(radius);})
        }); 
```

这样，当我更改#size1 或#size2 中的值时，两个圆圈都会用最后输入的值重新绘制。

我的问题是：如何更新数据集，让每个圈子都“听”自己的输入字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:32:04.467

我假设您有多个输入字段。

当您对其中一个字段进行更改时，您可以做什么，重新创建数据集并重新绘制圆圈。

数据集的静态数据可以存储在输入的数据属性中。

像这样：

**HTML**

```
<input type="text" id="circle1" class="size" value="" style="width: 30px;" data-circle='{"name": "circle1", "xpos": -161, "ypos": 290, "color": "black" }'> 
```

**javascript**

```
function drawCircles (dataset) {
        svg.selectAll("circle").remove();
        svg.selectAll("circle")
           .data(dataset)
           .enter()
           .append("svg:circle")
           .attr("cx", function(d){
                    return xScale(d.xpos);})
           .attr("cy", function(d){
                    return yScale(d.ypos);})
           .attr("r", function (d){            
                    return rScale(d.radius);})                          
           .attr("fill", "rgb(100,0,0)")
           .attr("opacity", "0.7");
    }

$('.size').change(function(){
        var dataset = [];
        $('.size').each(function(index,item) {
          var circleData = item.data('circle');
          var circleData['radius'] = $(item).val();
          dataset.push(circleData);
        });
        drawCircles(dataset);
    }); 
```

# c++ - 我是菜鸟，但我可以用 gui 编写一个 c++ 程序并让它在 Visual Studio 2010 Express 和 ubuntu 的终端上运行吗？

> ID：13159449
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:46:31.890
> 
> 标签：c++, windows, visual-studio, user-interface, ubuntu

我对 c++ 很陌生，不太确定我在做什么。我想用 gui 实现一个超市，并让它在 ubuntu 和 windows 上都可以工作。我阅读了有关为其下载工具包的信息，但我不知道这涉及到什么程度，或者是否有更简单的方法来做到这一点。我从来没有在 c++ 中做过这样的项目（java 是我的强项），并且想确保我不会太过分。如果工具包是要走的路，哪一个？我该怎么做？我必须在两个操作系统上下载它吗？感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:49:53.787

c++ 不包含任何用于 gui 的工具，因此您要么必须使用平台附带的工具，要么必须使用两个平台都存在的 3rd 方库。很明显，如果你想编写可以同时在你自己身上工作的代码，你不想使用 windows / ubuntu 原生 api，所以我建议研究像[Qt](http://qt.digia.com/product/)这样的东西，它似乎是一个广泛使用的 c++ 跨平台 gui 工具包

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:51:08.033

您可以[下载 Qt](http://qt-project.org/downloads)。它带有许多示例代码和文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:52:31.903

您应该使用一些跨平台库（例如 QT）来编写您的 gui。Qmake 将为您制作适合您要使用的不同平台的 makefile。

# android - 我如何在 sdcard 中推送文件 - android

> ID：13159454
> 
> 赞同：0
> 
> 时间：2012-10-31T13:46:53.300
> 
> 标签：android, android-emulator, sd-card, android-sdcard, android-sdk-2.3

`adb remount`我收到以下错误`device not found`。

我正在尝试创建一个文件夹并在 sdcard 上推送多个文件。当我尝试使用该命令时，我已经为我的模拟器创建了 sdcard。

我正在使用带有 Eclipse 的 android。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:56:17.110

这是关于在 SD 卡上推送文件的教程

[http://www.coderzheaven.com/2011/03/24/how-to-add-files-like-images-inside-your-emulator-in-android/](http://www.coderzheaven.com/2011/03/24/how-to-add-files-like-images-inside-your-emulator-in-android/)

# java - 接受除所有破折号以外的任何字符串的 Java 正则表达式

> ID：13159456
> 
> 赞同：0
> 
> 时间：2012-10-31T13:46:54.503
> 
> 标签：java

我在创建一个接受除所有破折号以外的任何字符串的正则表达式时遇到问题，即如果字符串包含所有破折号，它应该被拒绝。

我试过`[0-9-]*`，但它接受所有破折号，`-*[0-9]+`它做我想要的，但不允许改组（我的意思是 0-9 和 -（破折号）的混合字符串）。

例如 trt-09tr- 应该被接受。---rte434rt 应该被接受。- 应该被拒绝。------ 应该被拒绝。---6 接受。——你接受了。

如果有人可以帮助我。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:49:41.283

您需要负前瞻，即与整个输入匹配的前瞻：`(?!^-+$).*`

```
for (String in : new String[] {"trt-09tr-", "---rte434rt", "-", "------", 
                               "---6", "--u"})
  System.out.println(in.matches("(?!^-+$).*")); 
```

印刷

```
true
true
false
false
true
true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:49:32.820

试试这个正则表达式：

```
^-*$ 
```

每个匹配的字符串都可以被丢弃。

```
String r = "^-*$";
System.out.println(!"----".matches(r));    // false
System.out.println(!"--e--".matches(r));   // true
System.out.println(!"-e-e-e-".matches(r)); // true 
```

# magento - magento：更改发件人以将邮件发送到客户的电子邮件地址

> ID：13159459
> 
> 赞同：2
> 
> 时间：2012-10-31T13:46:59.290
> 
> 标签：magento

我指的是这篇文章：[将magento联系表电子邮件的“发件人”字段更改为发件人](https://stackoverflow.com/questions/6188855/change-from-field-of-magento-contact-form-email-to-the-sender/13159105#13159105)

新订单邮件怎么样：如果我按照上面帖子中的说明更改代码，发送给客户的订单确认邮件也会收到“欺骗”发件人（在这种情况下是自己的邮件地址）或只有邮件管理员（=店主）会收到以客户邮件地址作为发件人的订单邮件吗？

目标是：给店主的新订单邮件：发件人 = 客户邮件地址 给客户的新订单邮件：发件人 = 销售

原因是，在 Outlook 中，我可以更好地搜索、排序和响应客户的订单。

谢谢斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T15:06:19.740

您需要重写`Mage_Core_Model_Email_Template`类并覆盖`sendTransactional()`函数。在此功能中，您可以将发件人电子邮件交换为客户服务邮件。

# c# - 如何使用 MVVM 为用户偏好创建程序架构

> ID：13159460
> 
> 赞同：2
> 
> 时间：2012-10-31T13:47:00.760
> 
> 标签：c#, wpf, mvvm, architecture, preferences

我正在尝试为用户创建一个偏好窗口，他们可以操纵（更改偏好）。我想以适当的方式实现它，那么您对良好的代码架构有什么建议吗？顺便说一句，我正在使用带有 WPF 的 C# 的 MVVM 模式。

就像，使用将保存所有设置的首选项类......或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:14:50.727

我鼓励你使用某种 MVVM 框架。

下面我将介绍使用 MVVM Light 的解决方案 - 免费的 MVVM 框架。

1.  为选项创建新窗口，例如 OptionsWindow (.xaml & .cs)
2.  为您的新窗口创建 ViewModel，例如 OptionsWindowViewModel
3.  在您的主窗口中创建按钮：Command = {Binding CreateOptionsWindowCommand}，在您的 MainViewModel 中：

`public RelayCommand CreateOptionsWindowCommand { get; private set; }`

在你的 ctor

```
CreateOptionsWindowCommand = new RelayCommand(CreateOptionsWindowCommandExecute) 
```

和功能：

```
private void CreateOptionsWindowCommandExecute()
{
   OptionsWindow newOptionsWindow = new OptionsWindow();
   OptionsWindowViewModel vm = new OptionsWindowViewModel();
   newOptionsWindow.DataContext = vm;
   newOptionsWindow.ShowDialog();
} 
```

新选项窗口中的所有绑定现在都绑定到 OptionsViewModel。

要将保存在 OptionsWindow 中的选项和数据检索到 MainViewModel，您可以使用在 MVVM Light 中实现的 Messanging。消息传递用于类之间的通信。

# php - 如何在循环中显示默认值并隐藏其余部分而不创建无限循环

> ID：13159461
> 
> 赞同：0
> 
> 时间：2012-10-31T13:47:01.853
> 
> 标签：php, html, mysql, css

我试图找到一种方法，我可以默认显示在循环中，而其余部分被隐藏并将在调用时显示我现在拥有的一个无限循环我正在寻找解决方案或替代我的问题

```
for ($i=0 ; $i < $n_products; $i++) {

        $PID = mysql_result($n_products,$i,'PID');
        $prod_thumb = mysql_result($n_products,$i,'thumbnail');
        $prod_des =  mysql_result($n_products,$i, 'description');
        $prod_price =  mysql_result($n_products,$i, 'price');
        $prod_name =  mysql_result($n_products,$i, 'name');
        $prod_img = mysql_result($n_products,$i,'img');
        if ($i = 0){
            echo"<div class=\"ortho_des\">
                    <div style=\"width:275px; height:215px; float:left;\">
                        <img width=\"275px\" height=\"215px\" src=\"$prod_img\"/>
                    </div>
                    <div>
                        <div style=\"float:left;\">Name: $prod_name</div><br/>
                        <div style=\"float:left;\">Color: $prod_name</div><br/>
                        <div style=\"float:left;\">Price: $prod_price $</div><br/>  
                    </div>
                    <div class=\"clearFloat\">&nbsp;</div>
                    <div>Description: $prod_des</div>

                </div>";

        }else{
            echo"<div class=\"ortho_des\" style=\"display:none;\">
                    <div style=\"width:275px; height:215px; float:left;\">
                        <img width=\"275px\" height=\"215px\" src=\"$prod_img\"/>
                    </div>
                    <div>
                        <div style=\"float:left;\">Name: $prod_name</div><br/>
                        <div style=\"float:left;\">Color: $prod_name</div><br/>
                        <div style=\"float:left;\">Price: $prod_price $</div><br/>  
                    </div>
                    <div class=\"clearFloat\">&nbsp;</div>
                    <div>Description: $prod_des</div>

                </div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:51:27.733

你有一个轻微的语法错误让你失望

```
if ($i = 0){ 
```

应该

```
if ($i === 0){ 
```

单等号是赋值运算符。因此，`$i`被分配给`0`每个循环，这就是为什么它会无限循环，而不是 to `$n_products`。

# python - python用户输入错误int vs string

> ID：13159464
> 
> 赞同：0
> 
> 时间：2012-10-31T13:47:24.683
> 
> 标签：python, input

我试图搜索这个错误，但我没有找到它，所以它是：

我尝试在 linux 中运行的 python 3 脚本中输入输入，它只能是 0-5。我使用以下代码执行此操作：

```
 while True:
        type = input("Please choose a type:\n1) a\n2) b\n3) c\n4) d\n0) EXIT\n"))

        if type == "0":
            sys.exit()

        elif type == "1" or type == "2" or type == "3" or type == "4":
            print("You entered: %s" %type )
            break

        else:
            os.system("clear")
            print("Input entered is invalid, please try again.\n") 
```

当我输入数字时程序运行良好，但当我输入字母时它崩溃。请帮忙 ：（

```
Traceback (most recent call last):
  File "test.py", line 21, in <module>
    type = input("Please choose a type:\n1) a\n2) b\n3) c\n4) d\n0) EXIT\n"))   
  File "<string>", line 1, in <module>
NameError: name 'h' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:56:15.423

`input`相当于`eval(raw_input(prompt))`

意味着您的输入被解释。这意味着数字、函数、var 将起作用，但文本不起作用。

改为使用`raw_input`。（见[http://docs.python.org/2/library/functions.html#raw_input](http://docs.python.org/2/library/functions.html#raw_input)）

注意：这是有效的 python 2，并且您提到了 python 3。但是，我认为您实际上使用的是 python 2，因为您的提示以 \n 结尾，它包含在 python 3 中，并且您的脚本适用于 python 3

# c# - 使重复的代码通用

> ID：13159465
> 
> 赞同：3
> 
> 时间：2012-10-31T13:47:27.790
> 
> 标签：c#, .net, c#-4.0

是否可以像这样包装重复的代码：

```
IList<Bla1> Bla1s = (from a in Containers
       where a.Right.GetType().Name.Equals("Bla1")
select
(
  (Bla1) a.Right
)).Distinct().ToList<Bla1>(); 
```

进入一个通用结构（方法？）。有很多 Blas (Bla1, Bla2 ...)。我猜 Bla 会代表 T 但我对这种情况的泛型没有太多经验。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T13:53:18.263

如果您想测试类型而不仅仅是类型名称，那么您可以执行以下操作：

```
IList<T> items = Containers.Select(c => c.Right).OfType<T>().Distinct().ToList(); 
```

因此，您的通用方法可能如下所示：

```
IList<T> GenericMethod<T>()
{
    return Containers.Select(c => c.Right).OfType<T>().Distinct().ToList();
} 
```

* * *

正如评论中提到的 hvd ，上面的代码还将返回任何`Right`类型的元素，该类型是从`T`. 如果您的意图是`T`仅过滤类型，请改用：

```
IList<T> GenericMethod<T>(IEnumerable<Container> containers)
{
    return containers.Select(c => c.Right)
        .Where(x => x.GetType() == typeof(T)).Cast<T>()
        .Distinct().ToList();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:51:32.473

如果您使用的字符串始终与类名完全相同，那么可以。

```
IList<T> Bla1s = (from a in Containers
       where a.Right.GetType().Name.Equals(typeof(T).Name)
select
(
  (T) a.Right
)).Distinct().ToList<T>(); 
```

或者完全删除字符串：

```
IList<T> Bla1s = (from a in Containers
       where a.Right.GetType().Equals(typeof(T))
select
(
  (T) a.Right
)).Distinct().ToList<T>(); 
```

# asp.net - SQL Server 或 ASP.NET 中的日期格式问题

> ID：13159468
> 
> 赞同：0
> 
> 时间：2012-10-31T13:47:34.703
> 
> 标签：asp.net, sql, sql-server-2008, c#-4.0

当我在 SQL Server 2008 CTP 中运行存储过程时，我得到`"2012-10-31 00:00:00.000"`了这种格式的日期。

但是当我使用它转换它时

```
Convert.ToString(drConversation["ConversationDate"]) 
```

在 C# 中，我得到`"10/31/2012 12:00:00 AM"`.

应该是哪里出了问题？在 C# 代码中还是在 SQL Server 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:48:49.083

没有问题，SQLServer 使用`24-hr format`while *Convert 类*输出的输出`12-hr format`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:52:33.007

实际上它是相同的日期，但[格式](http://www.sql-server-helper.com/tips/date-formats.aspx)不同。

如果您想以与 Sql Server 中相同的格式查看它，您可以使用：

`DateTime.Parse(drConversation["ConversationDate"].ToString()).ToString("yyyy-MM-dd HH:mm:ss")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:55:30.360

试试这个方法

```
DateTime mydate= Convert.ToDateTime(drConversation["ConversationDate"].ToString()); 
```

# javascript - Firebug Lite 在 IE8 中不起作用 - 访问被拒绝

> ID：13159470
> 
> 赞同：1
> 
> 时间：2012-10-31T13:47:43.500
> 
> 标签：javascript, internet-explorer, firebug

1.  如标题所述，Firebug Lite`1.4`和latest在页面加载时`1.3`抛出错误。`IE 8.0.6001`Firebug 文件在本地使用。

2.  使用在线文件时，`http://getfirebug.com/firebug-lite.js`我收到了几次警报：`Stop running this script? A script on this page is causing Internet Explorer to run slowly. If it continues to run, your computer might become unresponsive.`单击等待脚本时，在 5 次警报后，它可以工作。

无论如何该怎么办？

* * *

**编辑：**

我只在 IE 中使用 Firebug：

```
if(isset($_GET['firebug']) && preg_match('/MSIE/i',$_SERVER['HTTP_USER_AGENT'])) {
    // $strFirebugLite = "<script type='text/javascript' src='../../client/lib/firebug-lite/firebug-lite.js'></script>";
    $strFirebugLite = "<script type='text/javascript' src='http://getfirebug.com/firebug-lite.js'></script>";
} 
```

然后我将字符串添加到我的页面。如果不绑定 Firebug，一切正常。

* * *

**编辑2：**

也许问题不清楚：问题不是我的自定义 JavaScript 代码，而是 Firebug 本身的使用，添加`<script> ...`到我的页面。

* * *

**编辑3：**

```
 <html><head><title>Title</title>

      <link  id="visiLibSkin"  rel="stylesheet" type="text/css" href="skin/03/style.css">
      <style id="ext_style"></style>
      <script  language="JavaScript" src="../../client/visiSkin.js"      type="text/javascript"> </script>
      <script  language="JavaScript" src="../../client/visiFunc01.js"    type="text/javascript"> </script>
      <script  language="JavaScript" src="../../client/visiClass01.js"   type="text/javascript"> </script>
      <script  language="JavaScript" src="../../client/julz_visiWizard.js"   type="text/javascript"> </script> 
      <script  language="JavaScript" src="skin/03/style.js" type="text/javascript"> </script> 
 <script type='text/javascript' src='http://getfirebug.com/firebug-lite.js'></script> 
 <link rel="stylesheet" href="../../client/lib/extjs/resources/css/ext-all-gray-scoped.css" type="text/css"/>
<script type="text/javascript" src="../../client/lib/extjs/ext-all-debug.js"></script>
<script type="text/javascript" src="../../client/lib/x/loader.js"></script>
<script type="text/javascript" src="../../client/lib/deftjs/deft.js"></script>
<script type="text/javascript" src="../../client/lib/x/x.js"></script>
<script type="text/javascript" src="../../client/lib/x/test.js"></script>
<link rel="stylesheet" href="../../client/lib/codemirror/lib/codemirror.css" type="text/css"/>
<link rel="stylesheet" href="../../client/lib/codemirror/lib/util/simple-hint.css" type="text/css"/>
<script type="text/javascript" src="../../client/lib/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="../../client/lib/codemirror/mode/xml/xml.js"></script>
<script type="text/javascript" src="../../client/lib/codemirror/lib/util/closetag.js"></script>
<script type="text/javascript" src="../../client/lib/codemirror/lib/util/formatting.js"></script>
<script  language="JavaScript" src="skin/03/visiCalendar.js" type="text/javascript"> </script> 
```

* * *

**编辑4：**

我现在也收到错误消息，其中的对象`line 1354 char 131`不支持属性或函数（使用`http://getfirebug.com/firebug-lite.js`）

注意：我还没有在 Firebug 中做任何事情，只是加载我的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:54:04.880

我需要查看代码，但看起来你有一些运行缓慢的代码..如错误所述。现代浏览器已经优化了 JavaScript 引擎，并且很可能会避免您在 IE8 中看到的情况。

> Internet Explorer 监视脚本已执行的语句数。当已执行的最大语句数（默认为 500 万）时，将显示长时间运行的脚本对话框

Nick Zakas[在这里](http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html)很好地解释了一些原因：

> **过多的 DOM 交互**
> 
> DOM 操作比任何其他 JavaScript 进程都更昂贵。最小化 DOM 交互会显着缩短 JavaScript 运行时间。大多数浏览器仅在整个脚本完成执行后才更新 DOM，这会减慢网页对用户的感知响应速度。
> 
> **做太多的循环**
> 
> 任何运行太多次或每次迭代执行太多操作的循环都可能导致长时间运行的脚本问题。它有助于尽可能分离出功能。当使用循环执行 DOM 操作时，效果会变得更糟，有时会导致浏览器完全冻结，而不会显示长时间运行的脚本对话框。
> 
> **过多的递归**
> 
> JavaScript 引擎限制了脚本可以使用的递归量。重写代码以避免递归有助于改善问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:52:54.520

版本`1.3`有效。目前这个版本已经足够了。版本`1.4`仍然崩溃。

# android - 如何创建分步方法

> ID：13159474
> 
> 赞同：1
> 
> 时间：2012-10-31T13:47:49.403
> 
> 标签：android

我想安排一种方法来以游戏方式处理我的应用程序逻辑。在游戏引擎中，通常有一个时间表/队列来将预定的孩子添加到任何给定的场景中。调度方法是一种通常在单独的线程上以每秒固定次数（如果可能）运行并处理应用程序状态（登录、注销、空闲）和与所述状态相关的所有操作的方法。

Activity 的 Android 等价物是什么？

# linux - 了解 dtruss 的输出

> ID：13159476
> 
> 赞同：6
> 
> 时间：2012-10-31T13:47:54.777
> 
> 标签：linux, macos, system-calls, dtrace

谁能指出我如何理解/解释 dtruss (mac) 或 dtrace 输出的报告的参考？

我只是在一个简单的程序上尝试了 dtruss。例如，我得到以下输出：

```
PID/THRD  SYSCALL(args)          = return
250/0x103c:  getattrlist("/Volumes/CORE/CORE.app\0", 0x7FFF5E8045D8, 0x7FFF5E804250)         = 0 0
250/0x103c:  geteuid(0x7FFF5E8045E0, 0x0, 0x7FFF5E804A18)        = 501 0
250/0x103c:  geteuid(0x7FFF5E805DF0, 0x0, 0x7FFF5E805E80)        = 501 0
250/0x103c:  geteuid(0x7FFF5E805540, 0x0, 0x7FFF5E805770)        = 501 0
250/0x103c:  getattrlist("/.vol/16777224/21\0", 0x7FFF5E8046D0, 0x7FFF5E803CF0)      = 0 0
250/0x103c:  geteuid(0x7FFF5E805950, 0x0, 0x7FFF5E8059C8)        = 501 0
250/0x103c:  __mac_syscall(0x7FFF8D22057C, 0x50, 0x7FFF5E805990)         = 0 0
250/0x103c:  geteuid(0x7FFF5E805950, 0x0, 0x7FFF5E8059C8)        = 501 0
250/0x103c:  __mac_syscall(0x7FFF8D22057C, 0x51, 0x7FFF5E8059A8)         = -1 Err#30
250/0x103c:  geteuid(0x7FFF5E8057D0, 0x0, 0x7FFF5E805848)        = 501 0
250/0x103c:  getattrlist("/.vol/16777224/21\0", 0x7FFF5E804960, 0x7FFF5E803F80)      = 0 0
250/0x103c:  open("/.vol/16777224/21\0", 0x0, 0x1FF)         = 6 0
250/0x103c:  geteuid(0x7FFF5E805790, 0x0, 0x7FFF5E805920)        = 501 0 
```

我可以看到所有这些系统调用都采用十六进制参数。但是我应该如何解码这些？例如，如何找出它实际上试图打开的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-03T00:32:51.173

您的示例输出确实显示了 open() 系统调用的路径名（“/.vol/16777224/21”）。

dtruss 是一个 shell/DTrace 脚本，类似于 Solaris 的 truss 工具（Linux 上的 strace）。这些工具被编码以了解如何以人类可读的方式显示参数。我在 dtruss 工具中编写了其中的一些代码，但可以对其进行改进以了解更多信息。您可以复制 dtruss 并对其进行自定义以添加一些内容，因为它是一个 shell/DTrace 脚本。

对于显示十六进制数字的系统调用，您可以首先阅读手册页以查看参数是什么。例如，geteuid() 没有参数，因此 dtruss 将 3 打印为十六进制的默认行为令人困惑。它应该打印无，并显示返回值。例如，这可以通过更改以下部分来完成：

```
 /* print 0 arg output */
 syscall::*fork:return
 /self->start/
 { 
```

至：

```
 /* print 0 arg output */
 syscall::*fork:return,
 syscall::geteuid:return
 /self->start/
 { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T06:42:27.140

**dtrace**是一个低级但功能强大的工具，可让您监视许多内核级事件。监控或显示的内容在 dtrace 脚本中指定。这些系统调用是您正在监视的程序调用的内核级函数（而不是用户级函数本身）。

**dtrace**允许您监控/量化每个进程或进程组的 cpu、磁盘、内存、文件系统、网络等。

一个参考是[Open Solaris DTrace 站点](http://hub.opensolaris.org/bin/view/Community+Group+dtrace/WebHome)，但是有许多基于 Web 的指南和操作方法。

要查看您将使用的进程打开了哪些文件：

```
dtrace -n 'syscall::open*:entry { printf("%s %s",execname,copyinstr(arg0)); }' 
```

# android - 更改键盘上的按钮

> ID：13159483
> 
> 赞同：1
> 
> 时间：2012-10-31T13:48:25.560
> 
> 标签：android, ime

我正在使用以下代码在键盘上的完成和下一步按钮之间切换，具体取决于复选框是否被选中：

```
private OnClickListener checkBoxListener = new OnClickListener(){
@Override
public void onClick(View v) {
    CheckBox cb = (CheckBox) findViewById(R.id.checkbox_referralCode);
    EditText referralCode = (EditText) findViewById(R.id.referralCode);
    EditText phoneText = (EditText) findViewById(R.id.phoneText);

    if(cb.isChecked()) {
        referralCode.setVisibility(View.VISIBLE);
        phoneText.setImeOptions(0x00000005);

    }
    else
        referralCode.setVisibility(View.GONE);

} 
```

}; 最初未选中复选框时，phoneText 的键盘显示完成。当第一次选中该复选框时，接下来会显示 phoneText 的键盘。这正是我想要的。但是，我面临的问题是，当用户先选中复选框后取消选中复选框时，当我希望它显示完成时，键盘仍会显示下一个。为了纠正这个问题，我在 else 语句中添加了以下行：

```
 phoneText.setImeOptions(0x00000006); 
```

因此，我的新代码如下所示：

```
private OnClickListener checkBoxListener = new OnClickListener(){
@Override
public void onClick(View v) {
    CheckBox cb = (CheckBox) findViewById(R.id.checkbox_referralCode);
    EditText referralCode = (EditText) findViewById(R.id.referralCode);
    EditText phoneText = (EditText) findViewById(R.id.phoneText);

    if(cb.isChecked()) {
        referralCode.setVisibility(View.VISIBLE);
        phoneText.setImeOptions(0x00000005);

    }
    else {
        referralCode.setVisibility(View.GONE);
        phoneText.setImeOptions(0x00000006);
    }

} 
```

};

但是，现在 phoneText 的键盘只显示完成，即使复选框被选中或未选中。我应该怎么做才能纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:28:52.583

取决于键盘。例如，我知道 Swype 只会在重新加载后检查 imeoptions。要尝试的一件事是隐藏键盘并在此事件中重新打开它。

你最终会遇到很多麻烦。问题是 Android 不是一个键盘——它有一个允许热交换键盘的框架，但 API 并不总是很好定义，键盘开发人员必须猜测应该如何实现。我不认为在开发键盘的 2 年中，我曾经有一个应用程序在创建字段后尝试更改它的 imeOptions。它可能以前从未做过，所以可能是框架甚至没有告诉键盘他们已经改变了。

# c++ - 在 C++ 中添加素数的问题

> ID：13159490
> 
> 赞同：2
> 
> 时间：2012-10-31T13:48:38.677
> 
> 标签：c++

我的代码适用于最多 300 或 20 的数字。但它不适用于 2000000。我尝试使用 long 代替，但它仍然不起作用。

```
#include <iostream>
bool prime(int i) {
    bool result = true;
    int isitprime = i;

    for (int j = 2; j < isitprime; j++) { ///prime number tester
        if (isitprime % j == 0) {
            result = false;
            break;
        }
    }

    return result;
}

int main(void) {
    using namespace std;
    long sum = 0;

    for (long i = 2; i <= 2000000; i++) {
        if (prime(i)) {
            sum += i;
        }
    }

    cout << sum << endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T13:59:24.503

我相信小于 2000000 的素数之和是 142913828922 但长整数的最大值是 2147483647 不足以存储这个和。

# android - Android 和 Arduino USB

> ID：13159491
> 
> 赞同：2
> 
> 时间：2012-10-31T13:48:38.383
> 
> 标签：android, usb, arduino

当我尝试使用 USB 时，我得到了 INSTALL_FAILED_MISSING_SHARED_LIBRARY：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.hellowworld"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="10" />

    <uses-feature android:name="android.hardware.usb.accessory" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.android.future.usb.accessory" />

        <activity android:name=".HellowWorld" android:label="@string/title_activity_hellow_world" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
               <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
            </intent-filter>
            <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
                       android:resource="@xml/accessory_filter" />
        </activity>
    </application>
</manifest 
```

如果我删除

```
uses-library android:name="com.android.future.usb.accessory' 
```

它让我编译，但它不工作之后。

我该如何解决这个问题？

（该项目设置为 Google API 10 墨水。）

我正在使用[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29) 2.3.7。

# pyparsing - 如何获取pyparsing关键字类的字符串形式

> ID：13159493
> 
> 赞同：1
> 
> 时间：2012-10-31T13:48:41.173
> 
> 标签：pyparsing

我一直在使用 pyparsing 开发 DSL。

我有几个关键词。pyparsing 关键字类的文档位于[http://packages.python.org/pyparsing/pyparsing.pyparsing.Keyword-class.html](http://packages.python.org/pyparsing/pyparsing.pyparsing.Keyword-class.html)

我将它们定义为

```
this = Keyword("this", caseless=cl)
that = Keyword("that", caseless=cl) 
```

我有一本字典，上面的关键字翻译成数字：

```
helper_dict = {"this":-1, "that":1} 
```

我面临的问题是我无法为它们获得一致的字符串表示。当我尝试 str(this) 时，它带有引号。所以我不能在没有关键错误的情况下真正使用字典。我的意思是`KeyError`，当我尝试以下任何一项时，我会得到一个：

```
helper_dict[this]
helper_dict[this.__str__()]
helper_dict[str(this)] 
```

如何获得正确的字符串表示

我查看了关键字的文档和关键字的超类，但我无法弄清楚实际上应该执行此操作的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:52:19.513

`this`并且`that`不是字符串，它们是使用字符串定义的 pyparsing 表达式，但它们不是字符串。至于`helper_dict`，您已经使用字符串“this”和“that”定义了键。在它们解析了一些包含其定义输入字符串的输入后，您将从`this`and表达式中获取字符串。`that`

这是一些控制台实验，向您展示这是如何工作的：

```
>>> from pyparsing import *
>>> this = Keyword("this", caseless=True)
>>> that = Keyword("that", caseless=True)
>>> result = (this|that).parseString("This")
>>> print result
['this'] 
```

请注意，无论输入字符串的大小写如何，Keyword 始终以大写/小写形式返回一致的标记。CaselessLiteral 和 caseless Keyword 总是在其定义字符串的情况下返回标记，而不是输入字符串的情况。

```
>>> print result[0]
this
>>> print type(result[0])
<type 'str'> 
```

解析后的数据在 ParseResults 对象中返回，该对象支持列表、字典和对象式寻址。这里的第 0 个元素是一个字符串，字符串“this”。您可以使用此字符串来匹配在 helper_dict 中定义的键“this”：

```
>>> helper_dict = {"this":1, "that":-1}
>>> helper_dict[result[0]]
1 
```

或者定义一个解析动作来在解析时为你做这个替换（replaceWith 是 pyparsing 中定义的一个辅助方法：

```
>>> this.setParseAction(replaceWith(1))
"this"
>>> print (this | that).parseString("This")[0]
1 
```

——保罗

# android - 我应该关注闪存写入周期资源限制吗？

> ID：13159494
> 
> 赞同：7
> 
> 时间：2012-10-31T13:48:46.903
> 
> 标签：android, flash-memory

我正在编写一个 Android 应用程序，它每秒将数据写入文件数次，在该文件被擦除并启动新文件之后，总文件大小约为 1MB。我是否应该担心手机的闪存会磨损，导致它出现故障？您是否知道 Android 是否会将写入分配到不同的扇区以最大程度地减少闪存退化，即使应用程序写入连续文件也是如此？日志系统是否以类似的方式工作？换句话说，如果我记录很多（每秒几条记录），那会影响手机的闪存资源吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:04:18.860

担心这一点不会有什么坏处，但除了闪存写入周期之外，我会重新设计应用程序逻辑 - 1MB 并不多，因此在内存中缓冲数据并定期（但不那么频繁）将其刷新到文件中应该会加速你的应用程序（因为我假设您的写入是同步的）。

**编辑**

Wiki[有一些数据](http://en.wikipedia.org/wiki/Flash_memory)供参考：

> **写耐力**
> 
> SLC 浮栅 NOR 闪存的写入耐久性通常等于或大于 NAND 闪存，而 MLC NOR 和 NAND 闪存具有相似的耐久性能力。提供了 NAND 和 NOR 闪存数据表中列出的示例耐用周期额定值。
> 
> *   SLC NAND 闪存的额定周期通常约为 100k (Samsung OneNAND KFW4G16Q2M)
> *   MLC NAND 闪存过去的额定周期约为 5k – 10k 周期（三星 K9G8G08U0M），但现在通常为 1k – 3k 周期
> *   TLC NAND 闪存的额定周期通常约为 1k 周期 (Samsung 840)
> *   SLC 浮栅 NOR 闪存的典型耐用等级为 100k 到 1M 周期（Numonyx M58BW 100k；Spansion S29CD016J 1,000k） MLC 浮栅 NOR 闪存的典型耐用等级为 100k 周期（Numonyx J3 闪存）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-24T00:03:00.300

这取决于内存类型和文件系统。与 NOR 存储器相比，NAND 闪存提供更多的写入周期。此外，JFFS2 等文件系统提供了一种磨损均衡算法来分发数据并避免块损坏。

NAND 和 NOR 闪存技术的比较： [https ://focus.ti.com/pdfs/omap/diskonchipvsnor.pdf](https://focus.ti.com/pdfs/omap/diskonchipvsnor.pdf)

# jquery - 使用 jQuery 打印 JSON 对象

> ID：13159498
> 
> 赞同：3
> 
> 时间：2012-10-31T13:48:53.083
> 
> 标签：jquery, json

我有一些如下所示的 JSON 数据：

```
"Extras": {
  "T01": "Value 1",
  "T02": "Value 2",
  "T03": "Value 3",
  // etc.
} 
```

我需要一个列表中的每个值，所以我试过这个：

```
$.each(data.result, function(i){
  $("#result").append('<li>'+data.result.Extras[]+'</li>');
}); 
```

这显然不起作用，我似乎无法弄清楚该怎么做。我试过`data.result.Extras`没有运气（因为我刚刚得到`[object][Object]`）。

有什么想法可以获取列表中的所有值吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:51:03.657

您正在迭代`data.result`，我相信您需要迭代`Extras`.

```
$.each(data.result.Extras, function(k, v){
  $("#result").append('<li>'+v+'</li>');
}); 
```

注意：在上面的函数`k`中是键，`v`是对象中的值`Extras`。例如：对于第一次迭代`k`将是`T01`并且`v`将会是`Value 1`。

以上应产生和输出的

```
<ul id="result">
   <li>Value 1</li>
   <li>Value 2</li>
   <li>Value 3</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:55:39.273

尝试使用 eval 方法转换 JSON 字符串，它会给您一个 JSON 的 obj，您可以使用它来获取 JSON 字符串的每个属性的值，例如 'TO1' ，'TO2'

例如

```
var jsonstr = '"Extras": { "T01": "Value 1", "T02": "Value 2", "T03": "Value 3"}';
var obj = eval(jsonstr);
alert(obj.TO1); 
```

# jquery - Uncaught SyntaxError: Unexpected token < in solr

> ID：13159499
> 
> 赞同：0
> 
> 时间：2012-10-31T13:48:56.213
> 
> 标签：jquery, solr, knockout.js

我正在尝试在 solr 服务器中添加一个新文档。我的代码

```
$.ajax({
            type: "POST",
            url: "http://192.168.10.113:8080/solr/update/json?commit=true",
            data: { "add": { "doc": { 'id': '19990' } } },
            dataType: 'jsonp',
            crossDomain: true,
            jsonp: 'json.wrf',
            success: function (data) { alert(data); },
            failure: function (errMsg) {
                alert(errMsg);
            }
        }); 
```

我的 Solr 服务器托管在不同的域中，所以我写了

```
 dataType: 'jsonp',
 crossDomain: true,
 jsonp: 'json.wrf', 
```

过度来自跨域问题。

现在它显示**Uncaught SyntaxError: Unexpected token <** Error I searched on Google。最多高手建议检查html和js代码。我检查了它的罚款。没有额外的 < 符号。 [错误图像](http://img577.imageshack.us/img577/3626/myerror.png)

之后，我将 URL 从 http://192.168.10.113:8080/solr/update/json?commit=true 更改为 http://192.168.10.113:8080/solr/update/xml?commit=true

现在它显示错误链接这个

**GET http://192.168.10.113:8080/solr/update/xml?commit=true&json.wrf=jQuery1710918970147613436_1351693492662&add%5Bdoc%5D%5Bid%5D=19990&_=1351693497692 405（方法不允许）**

请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:01:26.557

这显示了*Uncaught SyntaxError: Unexpected token <*错误，因为服务器正在发送 xml 数据。

声明json作为输入参数。所以我将服务器设置为json，这样就不会出现这种类型的错误。

# android - Phonegap 2.0 - 在我的应用程序加载之前启动应用程序时，白屏会闪烁

> ID：13159501
> 
> 赞同：3
> 
> 时间：2012-10-31T13:48:59.373
> 
> 标签：android, cordova

你如何摆脱 android/phonegap 应用程序启动时的白屏闪烁？它似乎在一瞬间显示了activity_main.xml，我尝试将背景颜色更改为黑色以使其不那么明显。我认为有一种方法可以完全隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:52:19.283

问题是 WebView 需要首先实例化，它默认为空白页，然后调用 loadUrl 来加载您的应用程序代码。解决它的一种方法是显示启动画面，直到您的应用程序在后台加载。

[phonegap - Android 应用程序的启动画面](https://stackoverflow.com/questions/8156841/phonegap-splash-screen-for-android-app/8157103#8157103)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T10:12:05.927

根据您应用的主题，您可以更改此 Flash 背景的颜色，例如：浅色或深色。这将使影响最小化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T14:46:50.210

我也遇到了同样的问题。我通过在 init 和 loadUrl 之间设置活动布局背景来解决这个问题。这样，我得到了整个过程的覆盖：在显示启动画面之前，显示启动画面，隐藏启动画面，然后在设备准备好后隐藏我的启动画面。

```
super.onCreate(savedInstanceState);
super.init();

// set the layout background
root.setBackgroundDrawable(null);
root.setBackgroundResource(R.drawable.splash);
root.setBackgroundColor(Color.parseColor("#ffffffff"));

super.loadUrl(Config.getStartUrl(), 80000); 
```

为了减少代码，我在 config.xml 中设置了启动画面：

```
<preference name="backgroundColor" value="0xffffffff" />
<preference name="splashscreen" value="splash" />
<preference name="AutoHideSplashScreen" value="false" />
<preference name="auto-hide-splash-screen" value="false" /> 
```

这是基于 Cordova 2.8+。2.7的启动画面有点怪。

此外，如果您在 iOS 上遇到白屏问题。请参阅此处底部的 iOS 怪癖部分：http: [//docs.phonegap.com/en/2.8.0/cordova_splashscreen_splashscreen.md.html#Splashscreen](http://docs.phonegap.com/en/2.8.0/cordova_splashscreen_splashscreen.md.html#Splashscreen)

# wordpress - 隐藏 WordPress 中的“无类别”

> ID：13159507
> 
> 赞同：2
> 
> 时间：2012-10-31T13:49:27.147
> 
> 标签：wordpress, categories, taxonomy

我有一个带有过滤器的产品页面。如果没有类别，我想隐藏“无类别”文本。

```
<?php wp_list_categories(array('taxonomy' => 'products', 'orderby' => 'order', 'title_li' => '', 'child_of' => ($term->parent==0) ? $term->term_id : $term->parent)); ?> 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:08:13.687

添加`show_option_none`到您的参数数组并将其设置为空字符串：

```
<?php wp_list_categories(array('show_option_none' => '', 'taxonomy' => 'products', 'orderby' => 'order', 'title_li' => '', 'child_of' => ($term->parent==0) ? $term->term_id : $term->parent)); ?> 
```

您可能还想稍微重写您的代码，以便更容易调试而不是一行长的代码，例如：

```
<?php 

$args = array(
    'taxonomy' => 'products', 
    'orderby' => 'order', 
    'title_li' => '', 
    'child_of' => ( $term->parent == 0 ) ? $term->term_id : $term->parent
    'show_option_none' => '', 
);

wp_list_categories( $args ); 

?> 
```

# jsp - 如何从jsp页面获取选定行列表或选定复选框列表到liferay 6中portlet的操作类方法？

> ID：13159508
> 
> 赞同：2
> 
> 时间：2012-10-31T13:49:29.960
> 
> 标签：jsp, liferay, portlet, checkbox, liferay-6

我正在开发自定义 portlet，在我的一个视图页面中我需要一些帮助。

以下是我的表格，其中每一行都有复选框，每一行都将在运行时（动态）创建：

```
<form method="post" name="editform">
   <table class="table table-bordered table-striped" id="dt_gal_res">
      <thead>
         <tr>
            <th class="table_checkbox"><input type="checkbox"
                    name="select_rows" class="select_rows"
                    data-tableid="dt_gal_rest" /></th>
            <th>Name</th>
            <th>Contact Person</th>
            <th>Website</th>
            <th>EDIT</th>
            <th>DELETE</th>
          </tr>
      </thead>

 <%
       List<restaurant> rest_listOBJ = restaurantLocalServiceUtil.getAllAvailableRestaurant();

       for (int i = 0; i < (rest_listOBJ.size()); i++) {
                restaurant temprest = rest_listOBJ.get(i);
  %>

     <tbody>
         <tr>
            <td><input type="checkbox" name="row_sel" class="row_sel" /></td>
            <td><%=temprest.getName() %></td>
            <td><%=temprest.getContactno() %></td>
            <td><%=temprest.getWebsite() %></td>
            <td>
                <input type="submit" id="1" value="edit"
                            onclick="return getbuttonId('<%=temprest.getPrimaryKey() %>')" />
            </td>
            <td>
                <input type="submit" id="2" value="DELETE"
                            onclick="return getdeletebuttonId('<%=temprest.getPrimaryKey() %>')" />
                </td>
        </tr>
     </tbody>
        <%
            }
        %>
</table>

    <div style="visibility: hidden;">
        <input type="hidden" name="hide1" id="hiddenkey" value="">
    </div>
</form> 
```

现在我有删除按钮，通过其他一些逻辑，我正在逐行删除。
但是现在我想要的是，在我提交一个按钮时选择一个或多个行的复选框后，然后单击该一个按钮，我想删除选中复选框的所有行。

不知何故，如果有人可以指导我如何在我的 portlet 类的操作方法中获取选定复选框列表的列表，那么即使这对我来说也足够了。

我对jsp很陌生，所以有任何想法的人请建议我。

正如你所建议的那样，我已经做了同样的事情。但没有取得任何成功..请纠正我哪里错了这是我的行动课

```
public void deleteMultipleRestaurant(ActionRequest ar, ActionResponse ap)
            throws Exception {

        log.info("ENTERED");
        List<restaurant> restaurants = restaurantLocalServiceUtil.getAllAvailableRestaurant();

        for (restaurant restaurantitem : restaurants) {        
            if (Boolean.valueOf(ar.getParameter("row_sel" + restaurantitem.getPrimaryKey()))) {
               // This is a selected checkbox so add you remove code here

                log.info(restaurantitem);

                restaurantitem.setIsdeleted(true);
                restaurantLocalServiceUtil.updaterestaurant(restaurantitem);

            }
        }
    } 
```

在我的视图文件中，我正在执行以下操作

这是我的 ul 之一，我的删除链接在那里

```
<portlet:actionURL name="deleteMultipleRestaurant"
                        var="multideleteURL">
                    </portlet:actionURL>

                    <button data-toggle="dropdown" class="btn dropdown-toggle">
                        Action <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">                          
                        <li><aui:button name="DELETE" value="DELETE" onClick="<%=multideleteURL.toString() %>"/></li>                           
                        <li><a href="javascript:void(0)">Lorem ipsum</a></li>
                        <li><a href="javascript:void(0)">Lorem ipsum</a></li>
                    </ul> 
```

以下是查看页面

```
<tbody>
                                <%
                                    List<restaurant> rest_listOBJ = restaurantLocalServiceUtil
                                                                    .getAllAvailableRestaurant();

                                                              for (int i = 0; i < (rest_listOBJ.size()); i++) {

                                                                restaurant temprest = rest_listOBJ.get(i);
        %>

<tr>                                            
      <td><input type="checkbox" id="row_sel<%= temprest.getPrimaryKey() %>" name="<portlet:namespace/>row_sel<%= temprest.getPrimaryKey() %>" class="row_sel" />
      </td>

    <td><%=temprest.getName()%></td>
    <td><%=temprest.getContactno()%></td>
    <td><%=temprest.getWebsite()%></td>
    <td><input type="button" id="1"
                                            onclick="return getbuttonId('<%=temprest.getPrimaryKey()%>')"
                                            style="border:none;width:20px" class="icon-pencil"/>
                                        <input type="button" id="2"
                                            onclick="return getdeletebuttonId('<%=temprest.getPrimaryKey()%>')"
                                            style="border:none;width:20px" class="icon-trash" /></td>
                                    </tr>                               
                                <%
                                    }
                                %>
                            </tbody> 
```

但什么都没有得到..它只是重新加载页面..只是 dat

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:11:35.970

现在你正在做：

1.  发送单`Id`到`processAction`方法
2.  执行基于按钮的动作`edit`或`delete`

你要：

1.  选择多个复选框
2.  单击`Delete`某处的按钮
3.  所有选定的项目都被删除

解决方案（可能有很多其他方法）：

1.  你的复选框应该是这样的：

    ```
    <input type="checkbox" name="<portlet:namespace/>row_sel" class="row_sel" value="<%=temprest.getPrimaryKey() %>" /> 
    ```

    如果您使用`<aui:input />`标签，则不必费心在`name`属性前面加上`<portlet:namespace/>`

2.  以逗号分隔的格式收集`Id`隐藏输入字段中的所有 s，`<input type="hidden" name="<portlet:namespace/>allCheckedIds" />`然后将其发送到服务器。

3.  这可以使用 javascript 来完成，在单击`Delete`按钮时调用一个 javascript 方法，该方法`Id`将从选中的复选框的值中构造一个包含所有 s 的字符串。您可以借助[此链接](http://www.javascript-coder.com/javascript-form/javascript-get-check.phtml)来构建 javascript 方法。
4.  然后`submit`在`form`javascript方法本身的帮助下。
5.  然后在您的`processAction`方法中，您可以将`Id`s 与收到的逗号分隔字符串分开：

    ```
    String allIds = ParamUtil.getString(actionRequest, "allCheckedIds");
    //allIds = "1,2,3,4,5,6"; // this is how the Ids might look
    long[] idArray = StringUtil.split(allIds, ",", 0); // were 0 is the default value 
    ```

6.  现在将这些 Id 传递给服务层以删除它们。

而已。是不是很简单。

liferay 也使用了类似的方法，您可以检查`Document Library Display`portlet。如果您使用`<liferay-ui:searchContainer>`来显示您的列表，那么您可以利用 liferay 如何为您执行此操作。

我将在这个方向上提供一些指示，您可以查看源代码：
[`view_file_entries.jspf`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-web/docroot/html/portlet/document_library_display/view_file_entries.jspf)，查看[`rowChecker="<%= entriesChecker %>"`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-web/docroot/html/portlet/document_library_display/view_file_entries.jspf#L43)whick 为您创建复选框的行，然后查看 [`'<portlet:namespace />deleteEntries'][4],`实际将请求发送到操作类的 JavaScript 方法。您可以签出一些 jsps 和动作类，但我将由您来探索。:-)

快乐探索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T10:11:34.950

我不知道它只是以这种简单的方式完成的。如果我错了，请纠正我。我刚刚用以下代码解决了我的问题：

```
<td><input type="checkbox" name="row_sel" class="row_sel" /></td> 
```

在我的行动方法中

```
String[] camp_id = request.getParameterValues("row_sel");
// boolean booln = false;

for(String camp_iditem:camp_id){ ... } 
```

它只是给了我变量中选中按钮的`camp_iditem`值。

我刚刚得到了我想做的事。如果我做错了请纠正我？

谢谢大家的指导..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T08:18:18.947

您需要做的第一件事是更改 name 属性并将 id 属性添加到您的复选框。所以不要这样：

```
<td><input type="checkbox" name="row_sel" class="row_sel" /></td> 
```

你应该有这样的东西：

```
<td><input type="checkbox" id="row_sel<%= temprest.getPrimaryKey() %>" name="<portlet:namespace/>row_sel<%= temprest.getPrimaryKey() %>" class="row_sel" /></td> 
```

这将确保每个复选框都可以在您的 processAction 方法中唯一标识。

然后在您的流程操作方法中，您可以使用以下逻辑来确定是否选中了复选框：

```
List<Restaurant> restaurants = RestaurantLocalServiceUtil.getAllAvailableRestaurant();

for (Restaurant restaurant : restaurants) {        
    if (Boolean.valueOf(actionRequest.getParameter("row_sel" + restaurant.getPrimaryKey())) {
       // This is a selected checkbox so add you remove code here
    }
} 
```

那应该以粗略的方式为您解决问题！

此外，如果此答案（或对您的问题的任何其他答案）对您有帮助，请“接受”该答案以帮助社区，并感谢那些花时间帮助您的人。

~~编辑~~

此外，正如 Olaf 在下面提到的，您的`<form>`标签应如下所示：

```
<form method="post" name="editform" action="<portlet:actionURL/>"> 
```

~~ 编辑 02/11/12 ~~

以下代码可用于查看传递给 Action 方法的所有参数及其值：

```
for (String key : actionRequest.getParameterMap().keySet()) {
    log.info("Param " + key + " has value: " + actionRequest.getParameter(key));
} 
```

# javascript - jQuery如何在给定索引或更高索引处搜索元素

> ID：13159515
> 
> 赞同：1
> 
> 时间：2012-10-31T13:49:43.627
> 
> 标签：javascript, jquery

我基本上有 html

```
<div class="letter">A</div>
<div class="letter">B</div>
<div class="letter"></div>
<div class="letter">D</div>
<div class="letter"></div> 
```

和一个 jQuery 函数，它返回第一个空 div 的索引（带有“字母”类）

```
var firstEmptyIndex;

var findStart = function(){
    var firstEmptyElement = $('div.letter:empty:eq(0)');
    firstEmptyIndex = firstEmptyElement.index('div.letter');
} 
```

如何扩展此 findStart 函数以传递将开始在给定索引处搜索空元素的变量。例如，我想运行 findStart(3)，它将返回 HTML 示例 (4) 中第五个元素的索引。运行 findStart(0) 或 findStart(1) 将返回 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:58:35.033

您可以使用`:gt`和的组合`:first`：

```
var findStart = function(i){
    return $('div.letter:gt(' + i + '):empty:first').index('div.letter');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:55:11.143

您可以使用 JQuery 的[`filter`](http://api.jquery.com/filter/)方法，该方法以一种形式允许您传递一个过滤函数，该函数接收您的索引。因此，以下应该有效：

```
someResultSet.filter(function (i) { return i < someOtherIndex; }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:57:30.450

[`slice(start[,end]`)](http://api.jquery.com/slice/)方法或[`:gt(index)`](http://api.jquery.com/gt-selector/)选择器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:58:19.590

使用 jQuery 的过滤器方法只返回没有文本的元素。

```
var selector = ".letter" ;
$(selector).filter(function(){return !$(this).text()}).get(0) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:00:56.737

试试这个它会工作
它返回 null 是没有找到空元素。
否则它将返回下一个空元素索引

```
var findStart = function(n){
    var i=n-1,l=$('div.letter').length;
    for(;i<l;i++){
        if($('div.letter').eq(i).html()==""){
            return i;
        } 
    }
    return null;
} 
```

# php - 如何为 php 启用 mysqlnd？

> ID：13159518
> 
> 赞同：48
> 
> 时间：2012-10-31T13:49:50.193
> 
> 标签：php, mysql, linux, yum, mysqlnd

我已经安装并运行了 PHP（版本：5.3.17），我想切换到 mysqlnd（在 phpinfo 中，mysqlnd 根本不存在）。

我读到要设置它，您需要更新`./configure`命令：

```
./configure --with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \ 
```

当我尝试安装它时`yum install php-mysqlnd`出现错误：

```
---> Package php-mysqlnd.x86_64 0:5.3.17-1.26.amzn1 will be installed
--> Processing Conflict: php-mysql-5.3.17-1.26.amzn1.x86_64 conflicts php-mysqlnd
--> Finished Dependency Resolution
Error: php-mysql conflicts with php-mysqlnd 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-01T12:10:19.843

该`./configure`命令是源代码编译过程的一部分。

您可以从源代码编译或通过包管理器安装。我想在你的情况下，包管理器更可取。

正如包管理器所抱怨的那样，您不能同时安装`php-mysql`和`php-mysqlnd`安装。

这样你就可以

```
yum remove php-mysql 
```

前

```
yum install php-mysqlnd 
```

然后通过检查成功

```
php -m | grep mysqlnd 
```

或者

```
php -i | grep mysqlnd 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-03T09:25:43.720

```
yum swap php-mysql php-mysqlnd 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-20T07:32:14.707

`yum install php-mysqlnd`仅在 CentALT 和 remi repos 上可用。Webtatic 也有一些很好的 php 存储库。它不是默认的（我使用的是 CentOS）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-22T20:29:45.573

我可能迟到了，但这可能对其他人有帮助。正如论坛其他地方已经说过的，如果对 get_result 之类的函数的调用抱怨它是未定义的，那么需要安装 php-mysqlnd（这个问题）。我意识到做 yum install (centos) 会自动报告它要删除 php-mysql 和 phpmyadmin；不要接受这一点，因为您的 phpmyadmin 之后可能无法工作。相反，使用 yum shell 将立即接受命令并优雅地处理转换；在命令行中执行这些操作：

```
# yum shell
> remove  php-mysql
> install php-mysqlnd
> run
> quit 
```

现在您可能必须重新启动 mariadb（很可能）和 httpd 服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T13:57:11.650

不知道我对你的理解是否正确....只需下载php的源代码（php-5.xxtar.gz），解压缩源代码并切换到该目录即可

```
 bash:/dir/of/your/source # ./configure --with-mysql=... and your other config params 
```

在那之后就可以了

```
 bash:/dir/of/your/source # sudo make && make install 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T17:08:36.573

自 PHP 5.4 起，mysqlnd 库是所有 PHP MySQL 扩展的 php.net 编译时默认值。- 参考：[dev.mysql.com](http://dev.mysql.com/downloads/connector/php-mysqlnd/)

[使用XAMPP for Linux 1.8.1](http://www.apachefriends.org/en/xampp-linux.html)（它与 PHP 5.4.7 一起提供）然后从源代码编译会更容易一些。

# excel - 使用 VBA Excel 24 小时更改日期和时间

> ID：13159522
> 
> 赞同：1
> 
> 时间：2012-10-31T13:49:56.527
> 
> 标签：excel, excel-2010, vba

如何将 24 小时内的时间添加到我已经创建的这个宏中？这是下面的宏。我需要为其添加时间戳，但我不确定如何。

```
Private Sub Workbook_Open()

Dim dtDate As Date

dtDate = InputBox("Date", , Date)

Set SelRange = Range("B:B")
For Each b In SelRange.Rows
b.Value = dtDate
b.Offset(0, 1).Value = dtDate + 1
Next
End Sub 
```

我需要时间在此工作表的宏的基础上增加 24 小时。我有一个我需要做的例子。在此示例中，日期和时间显示我需要在 24 小时内增加时间。

![在此处输入图像描述](../Images/eb530af9586660c13e67c7f9200710f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:41:43.347

首先，我建议始终使用 Option Explicit。这可以通过 MS VB 窗口中的菜单为将来的项目启用：工具>选项>编辑器（选项卡）>需要变量声明（复选框）

现在开始工作：如果您想要一个范围（本示例中为 B2:B25 和 C2:C25）以 1 小时为增量填充日期 + 时间，我建议使用以下内容：

```
Option Explicit

Private Sub Workbook_Open()

    Dim SelRange As Range
    Dim b As Range
    Dim dtDate As Date
    Dim intHours As Long

    'Enter the starting date and time
    dtDate = InputBox("Start date", , Date)

    'Initate our hours counter
    intHours = 0

    'Assign a worksheet range for our date-time range
    Set SelRange = Range("B2:B25")

    'Write the date-time range with 1 hour increments
    For Each b In SelRange
        b.Value2 = dtDate + TimeSerial(intHours, 0, 0)
        '24 hours later in the cell to the right of this
        b.Offset(0, 1).Value2 = dtDate + 1 + TimeSerial(intHours, 0, 0)
        intHours = intHours + 1
        'To avoid an overflow in the TimeSerial function the intHours are keps smaller than then Integer maximum
        If intHours > 24 Then
            intHours = intHours - 24
            dtDate = dtDate + 1
        End If
    Next

End Sub 
```

正如您提到的那样，您从日期开始，因此我从 InputBox 中的日期（没有时间）开始。

现在，如果您希望仅在有限的时间内重复此操作，您可以通过限制它适用的范围（在本例中为 B2:B25）来做到这一点，循环将在到达底部时停止。

它现在会自动用未来 24 小时的日期时间填充 C 列，如果您只想让它具有未来的日期，请跳过 C 列行中的 Timeserial 部分。如果您希望这在未来 1 小时，则将该行更改为：

```
b.Offset(0, 1).Value2 = dtDate + TimeSerial(intHours +1, 0, 0) 
```

# eclipse - 每次运行同一个 Scala 程序时，Eclipse 都会创建多个运行配置

> ID：13159523
> 
> 赞同：4
> 
> 时间：2012-10-31T13:50:00.663
> 
> 标签：eclipse, scala, scala-ide

每次我执行 Scala 程序时，Eclipse 都会创建一个新的“运行配置”。这样做的问题是我需要自定义默认的运行配置（需要更改工作路径）。因此，我第一次创建和自定义运行配置时一切正常，但是任何后续尝试使用“运行方式”->“Scala 应用程序”运行 Scala 文件都将失败，因为我的自定义设置丢失并且 Scala 程序执行一个新的默认运行配置。

下图说明了执行我的 scala 应用程序 3 次后“运行配置”对话框的样子。只有第一个运行配置具有所需的设置：

![在此处输入图像描述](../Images/2fcd594c15f5e116cff0f5e1b610c0f0.png)

在运行相同的 Scala 文件时，如何配置 Eclipse 以始终使用相同的运行配置？（我的意思是，不必每次都打开“运行配置...”对话框）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T16:19:58.133

在 Eclipse 首选项中设置`Run/Debug > Launching -> Launch Operation`为`Always launch the previously launched application.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T16:14:51.290

转到 OSX Eclipse 中的 Scala 透视图。单击“运行”工具栏按钮旁边的三角形以查看“运行”按钮的下拉菜单。选择“组织收藏夹...”并选择一个或多个运行配置作为收藏夹。

选择一个或多个收藏夹后，单击运行按钮将执行上次执行的收藏夹运行配置，而不是创建新的运行配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:57:15.107

您实际上不应该`"Run as"`每次都使用选项。只需按下运行按钮`(green circle with arrow)`并选择正确的配置即可运行。

它应该工作。

# sql - 在多行上拆分值

> ID：13159526
> 
> 赞同：6
> 
> 时间：2012-10-31T13:50:16.310
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

> **可能重复：**
> [将逗号分隔的字符串转换为单独的行](https://stackoverflow.com/questions/5493510/turning-a-comma-separated-string-into-individual-rows)

我有来自存储过程的以下输出，并且想知道将值拆分为多行的最佳方法。

```
reference   name                            subjects       subjectstitle
LL9X81MT    Making and Decorating Pottery   F06,F27,F38       NULL 
```

我需要修剪逗号处的主题字段并将信息复制到三行，以便数据如下所示。

```
reference   name                            subjects       subjectstitle
LL9X81MT    Making and Decorating Pottery   F06       NULL
LL9X81MT    Making and Decorating Pottery   F27       NULL
LL9X81MT    Making and Decorating Pottery   F38       NULL 
```

我正在使用 MS SQL Server 2008 来设置这些 SP，只需要一些关于如何拆分主题字段的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T13:55:49.820

您将需要使用类似于此的某种表值拆分函数：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后，您可以使用`outer apply`加入 yourtable：

```
select t1.reference,
  t1.name,
  t1.subjectstitle,
  i.items subjects
from yourtable t1
outer apply dbo.split(t1.subjects, ',') i 
```

给出这样的结果：

```
| REFERENCE |                          NAME | SUBJECTSTITLE | SUBJECTS |
------------------------------------------------------------------------
|  LL9X81MT | Making and Decorating Pottery |        (null) |      F06 |
|  LL9X81MT | Making and Decorating Pottery |        (null) |      F27 |
|  LL9X81MT | Making and Decorating Pottery |        (null) |      F38 | 
```

参见[SQL fiddle with Demo](http://sqlfiddle.com/#!3/db383/4)

如果您想在没有拆分功能的情况下执行此操作，则可以使用 CTE：

```
;with cte (reference, name, subjectstitle, subjectitem, subjects) as
(
  select reference,
    name,
    subjectstitle,
    cast(left(subjects, charindex(',',subjects+',')-1) as varchar(50)) subjectitem,
         stuff(subjects, 1, charindex(',',subjects+','), '') subjects
  from yourtable
  union all
  select reference,
    name,
    subjectstitle,
    cast(left(subjects, charindex(',',subjects+',')-1) as varchar(50)) ,
    stuff(subjects, 1, charindex(',',subjects+','), '') subjects
  from cte
  where subjects > ''
) 
select reference, name, subjectstitle, subjectitem
from cte 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/db383/7)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-31T15:30:04.273

这将在没有拆分功能的情况下完成

```
SELECT T1.reference, T1.name, T2.my_Splits AS subjects, T1.subtitile
FROM
 (
  SELECT *,
  CAST('<X>'+replace(T.subjects,',','</X><X>')+'</X>' as XML) as my_Xml 
  FROM [yourTable] T
 ) T1
 CROSS APPLY
 ( 
 SELECT my_Data.D.value('.','varchar(50)') as my_Splits
 FROM T1.my_Xml.nodes('X') as my_Data(D)
 ) T2 
```

# jquery - 使用 jQuery 模板 (tmpl) 插件时出现无效参数错误

> ID：13159527
> 
> 赞同：-2
> 
> 时间：2012-10-31T13:50:16.093
> 
> 标签：jquery, jquery-templates

我正在使用 jQuery tmpl 插件为数组中的一堆对象生成一些 HTML，当我尝试对大量对象进行模板化时，我在核心 jQuery 库中收到了一个 Invalid Argument 错误，例如：在一些在这种情况下，数组中可能有超过 9000 个对象，我会收到错误消息。这是一个带有一堆客户端代码的 .NET 4.0 应用程序，Visual Studio 报告的确切错误是“Microsoft JScript 运行时错误：无效参数”。它发生在未缩小的 jQuery 库 1.8.2 的第 679 行（在合并函数中）。我正在尝试生成 HTML，以便可以对其进行一些其他格式化，并一次只显示某些内容。如果我模板的对象更少，例如 4000 个或更少，则不会发生这种情况。我不知道确切的截止点在哪里。

tmpl 插件版本：1.0.0pre jQuery 核心版本：1.8.2

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:01:00.450

我认为在你的情况下你得到了这个错误，因为在你的本地机器上，你的 Javascript 不能处理这么大的对象。据我所知，它不依赖于版本插件等 - 解决方案更深入的核心。因此，您的数组大小与 9000 个对象的大小比可以处理的大小要大。

# xhtml - 从 JasperReports 报告生成的 XHTML 中的帧大小无效

> ID：13159530
> 
> 赞同：1
> 
> 时间：2012-10-31T13:50:28.263
> 
> 标签：xhtml, jasper-reports, border, frame, ireport

在生成的 XHTML 中，iReport 设计器中宽度为 204 像素且右侧边框为 1 像素宽的框架的宽度仅为 203 像素，但应该具有 204 像素的宽度。

当框架与在左侧有边框的另一个框架的左侧接触时，就会出现问题。在这种情况下，在 XHMTL 中，在一帧和第二个间隙之间形成一个像素的宽度。

需要注意的是，这个问题在生成的PDF中不会出现，两帧之间没有间隙，边框完美重叠。

JasperReports 4.5.1 中出现问题。

我能做些什么来解决这个问题？

显示问题的图像：

![样本](../Images/08c068010a1d9406dd9b564f9e6dfb89.png)

由于隐私问题，内容已被删除。

# wolfram-mathematica - 在 Mathematica 中重新定义 Plus 和 Times

> ID：13159531
> 
> 赞同：1
> 
> 时间：2012-10-31T13:50:40.973
> 
> 标签：wolfram-mathematica

我想在 Mathematica 中使用稀疏数组，例如： a=SparseArray[{},{m,n},"*"] 使用默认值 * 而不是零。是否可以通过以下方式扩展 Plus 和 Times：

Plus[1, *]=* Times[1, *]=* 但 Plus[0,*]=0

谢谢， 拉沃斯拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:15:25.850

由于您在这里询问有关如何修改内在函数的建议，因此我得出结论，您还不是一个足够有经验的 Mathematica 用户，无法安全地进行此类修改。

是的，可以修改 Mathematica 内在函数的定义和活动，例如`Plus`和`Times`。但这几乎可以肯定是一个**非常糟糕的主意**。主要的威胁是，这尤其适用于诸如加法和乘法之类的基本运算，很难将这种修改的影响控制在您想要并理解影响的那些情况下。

一个更好的主意是定义您自己的函数版本以按照您的意愿运行。这样的操作可能会像这样开始；

`mySparseArrayPlus[term1_SparseArray,term2_] :=`

我还认为您应该避免使用字符串，例如s`"*"`中的默认值`SparseArray`，而是使用`Symbol`.

如果您必须修改`Plus`并通过;`Times`的定义来处理它 [Mathematica 文档中的这个页面](http://reference.wolfram.com/mathematica/tutorial/AssociatingDefinitionsWithDifferentSymbols.html)提供了一个开始阅读的好地方。`UpValues`

最后，如果您必须干预，请阅读所有关于`Unprotect`. 祝你好运，当你打破加法和乘法时不要回来寻求帮助。

# javascript - 使用 Javascript 创建颜色混合 Hex

> ID：13159532
> 
> 赞同：1
> 
> 时间：2012-10-31T13:50:45.660
> 
> 标签：javascript, jquery, css

我试图找到一些 JS，当给定一个十六进制代码时，它会生成 6 种匹配且不冲突的颜色。我看过这个网站：[http](http://www.colorblender.com) ://www.colorblender.com ，它做了我所追求的，但我需要自己做，这样我才能为我的网站创建配色方案。

请您帮忙，即使您所做的只是指出该站点正在使用什么 JS 以及如何实现类似的东西。

# javascript - 将列表视图的行号传递给 javascript 函数

> ID：13159539
> 
> 赞同：1
> 
> 时间：2012-10-31T13:50:58.290
> 
> 标签：javascript, asp.net

这段代码有什么问题？

```
onclick="javascript:myclick('<%# Container.DataItemIndex %>')" 
```

我正在尝试将 listview 控件的 rowNumber 传递给 javascript 函数“myclick”。上面的代码将所有字符串“<%# Container.DataItemIndex %>”作为参数传递（不带引号）。但我只想要柜台 (1,2,...)

有什么更正/建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:55:45.233

您可以使用 ListView 的[`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)事件：

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Hyperlink hlProperyLink  = (Hyperlink)e.Item.FindControl("hlProperyLink");
        hlProperyLink.Attributes.Add("onclick", "javascript:myclick('" + e.Item.DataItemIndex.ToString() + "')");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:55:33.067

`Page.DataBind();`除非您在代码隐藏的某处调用，否则不会评估[数据绑定表达式。](http://msdn.microsoft.com/en-us/library/bda9bbfx%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T08:49:17.143

如果您想在标记中（而不是从 ItemDataBound）中写入所有内容，您可以使用以下命令：

```
onclick='<%#"myClick(" + Container.DataItemIndex +")"%>' 
```

# c++ - 使用 setw 对齐文本

> ID：13159545
> 
> 赞同：1
> 
> 时间：2012-10-31T13:51:13.413
> 
> 标签：c++, setw

我想证明这样的输出文本

```
 0x29823d80    0x10019b8         /    0 00000000000000000000000000000001
 0x37449e60    0x10dfc           /   12 00000000000000000001000000000000 
```

然而有了这个声明

```
 fout << std::setw(5) << std::hex << "0x" << (*it).addr << " " 
       << std::setw(5) << std::hex << "0x" << (*it).pc << std::setw(10) << "/" << std::setw(5) << std::dec << (*it).off << "\t" 
       << std::setw(5) << (*it).layout << "\n"; 
```

我明白了：

```
0x29823d80    0x10019b8         /    0  00000000000000000000000000000001
0x37449e60    0x10dfc         /   12    00000000000000000001000000000000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:57:54.660

从[这个参考](http://en.cppreference.com/w/cpp/io/manip/setw)：

> 这个值不是“粘性的”：受流的宽度字段值影响的下一个输入或输出操作，将其重置为零（意思是“未指定”）。

这意味着`setw`您所做的是针对字符串`"0x"`而不是实际的十六进制数。您必须在要证明的输出`setw` *之前使用。*

**编辑：**您的问题的一种解决方案是使用包含前导的临时字符串`"0x"`，以及使用这些字符串的格式：

```
std::ostringstream val1, val2;

val1 << "0x" << std::hex << (*it).addr;
val2 << "0x" << std::hex << (*it).pc;

fout << val1.str() << " " << val2.str()
     << std::setw(10 + 10 - val2.str().length())
     << '/' ... 
```

`10 + 10 - val2.str().length()`我从上面得到的表达式：

*   第一个`10`是因为您似乎希望数字和斜线之间有 10 个空格
*   第二个`10`是因为它允许 8 个十六进制数字（32 位）加上前导`"0x"`
*   调整数字字符串的实际长度

[您可以在此处](http://ideone.com/RdbLWi)查看使用此方法的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:56:13.207

我知道这可能不是您所追求的，但请记住，这`C`主要是 的一个子集`C++`，并且您特别具有可用的函数 fprintf，它比`C++`I/O 工具更适合格式化简单的字符串和数字。有了这个，你只需写：

```
fprintf(file, "%10p %10p / %5d %d\n", it->addr, it->pc, it->off, it->layout); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:32:30.187

如有疑问，请使用更多`setw`！此外，您可以使用`setfill`使数字看起来更漂亮：

```
std::cout << "0x"
          << std::hex << std::setfill('0') << std::setw(10) << (*it).addr
          << std::setw(5) << std::setfill(' ') << "0x"
          << std::hex << std::setfill('0') << std::setw(10) << (*it).pc
          << std::setw(10) << std::setfill(' ') << "/"
          << std::dec << std::setw(5) << (*it).off
          << std::setw(33) << (*it).layout
          << std::endl; 
```

产生：

```
0x0029823d80   0x00010019b8         /    0 00000000000000000000000000000001
0x0037449e60   0x0000010dfc         /   12 00000000000000000001000000000000 
```

# refactoring - Nvidia Nsight Eclipse CPU 到 GPU 重构

> ID：13159547
> 
> 赞同：3
> 
> 时间：2012-10-31T13:51:18.540
> 
> 标签：refactoring, gpu, nvidia, nsight

我刚刚安装了 Nvidia Nsight Eclipse 版来尝试宣布的 CPU 到 GPU 的重构。不幸的是，我无法应用此重构，因为我什至没有找到此功能，也没有在网络上找到有关此的信息或示例。

到目前为止我做了什么：

*   使用 Nsight 创建不同的项目（C++ 项目、C/C++ CUDA 项目）和不同的工具链

*   编辑源文件以包含以下代码，因为我认为这个简单的 axpy 算法应该可以重构为 GPU 内核：

    ```
    int test() {
        const int N = 10;
        float y[N] = {0,1,2,3,4,5,6,7,8,9};
        float x[N] = {9,8,7,6,5,4,3,2,1,0};
        float a = 1.0;

        for (int i = 0; i < N; i++) {
            y[i] = a * x[i] + y[i];
        }
        return 0;
    } 
    ```

*   在单击 for 循环时搜索上下文菜单以进行任何从 CPU 到 GPU 的重构

由于我没有成功，任何人都可以设法使用 CPU 到 GPU 重构吗？如果是这样，怎么办？也许我对这次重构的理解是完全错误的。

在他们的新闻稿中对此进行了描述：[链接](http://nvidianews.nvidia.com/Releases/NVIDIA-Releases-CUDA-5-Making-Programming-With-World-s-Most-Pervasive-Parallel-Computing-Platform-Even-Easier-88b.aspx)

# c++ - 使用断言在发布模式下构建 Boost

> ID：13159548
> 
> 赞同：1
> 
> 时间：2012-10-31T13:51:23.647
> 
> 标签：c++, boost, boost-build, bjam

根据问题中的所有关键字，这对于谷歌来说似乎是一件非常困难的事情。

使用 bjam / b2 构建 boost 时，如何在打开断言的情况下获得完全优化的发布版本？

假设这是可能的，我还想调整命名（使用--layout=versioned）以不同于正常的发布版本（即在库名称中添加-a 标志）。如果没有简单的方法，我可以重命名生成的文件。

编辑：应该提到这是Linux（Centos 6.2）

# php - 使用 AJAX 需要特定的 php 文件

> ID：13159550
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:51:31.020
> 
> 标签：php, javascript, html, ajax

我的页面上有 3 个可点击的菜单项：

> *   选项1
> *   选项2
> *   选项3

我的服务器上还有 3 个 php 文件：

> *   选项1.php
> *   选项2.php
> *   选项3.php

为简单起见，假设 option1.php 回显数字 1，option2.php 回显数字 2，等等。

为了避免页面刷新，我想使用AJAX，所以当用户点击option1时，option1.php文件会显示数字1。我希望我已经清楚了。

有什么好方法可以做到这一点？

**编辑：**我再次审查了我的问题并提出了解决方案。在包含我的菜单项的 php 文件中，我添加了一个更新区域 div。

```
<div id="update_area">
</div> 
```

我的外部 javascript 文件包含 onclick 事件，该事件调用一个函数，该函数发送要由我的 AJAX php 文件处理的菜单项编号。这测试了我的

```
$_GET[sent_data] 
```

如果（例如）它等于 1，那么它使用

```
require "option1.php"; 
```

现在该功能正在运行，我可以独立编辑我的 option?.php 文件。

我将 SomeKittens 的答案选为最有帮助的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:56:34.597

在将 AJAX 数据发送回 PHP 的 JavaScript 代码的某个时刻，您需要指定要将数据发送到哪个 PHP 文件。在 vanilla JS 中，这是[`ajaxRequest.open`](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php)部分。让您的 AJAX 函数接受一个字符串参数（例如`phpfile`），然后使用以下代码段在 AJAX 函数中选择 php 文件：

```
ajaxRequest.open("GET", phpfile, true); 
```

您的表单元素将具有 attrib `onclick`：

```
onClick="myAJAX('option1.php')" 
```

等等等等

[http://www.tizag.com/ajaxTutorial/](http://www.tizag.com/ajaxTutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:59:22.910

这是使用 AJAX 检索数据并将其显示在页面上的 Javascript 和 HTML 的起点。

**Javascript**（包含 jQuery 之后）

```
function getDataForOption(num) {
    $.ajax(function() {
        url: "option" + num + ".php",
        success: function(data) {
            $('#results').html(data);
        }
    });

    return false;
} 
```

**HTML**

```
<div id="results"></div>
<a href="#" onclick="getDataForOption(1);">Option 1</a>
<a href="#" onclick="getDataForOption(2);">Option 2</a>
<a href="#" onclick="getDataForOption(3);">Option 3</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:54:42.537

```
$('.link').on('click', function() {
  $.get($(this).attr('href'), function(r) { $('#container').html(r) });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:55:34.067

正如你所说，你需要使用 AJAX。当有人点击 option1 时，它会将选项的值传递给函数。这个值将决定请求应该在哪个页面上。通过 AJAX 发送请求，onSuccess 显示输出。

# nhibernate - 获取错误：“无法执行查询”与 session.Delete

> ID：13159554
> 
> 赞同：0
> 
> 时间：2012-10-31T13:51:38.603
> 
> 标签：nhibernate

使用 session.Delete 获取错误：“无法执行查询”。

当我复制查询并在 SQL Server Management Studio 中运行它时，选择查询运行没有问题。似乎问题出在删除或其他东西上……我使用相同的方法从其他表中删除了记录，并且似乎工作正常。

任何想法是什么原因造成的？

班上：

```
 public class MultisitePublicBooking
    {
        public virtual int Id { get; set; }
        public virtual int multisiteID { get; set; }
        public virtual DateTime startDate { get; set; }
        public virtual DateTime startTime { get; set; }
    }

    public MultisitePublicBookingMap()
    {
        Table("tblMultisitePublicBooking");

        Id(x => x.Id).Column("PublicBookingID");
        Map(x => x.multisiteID).Column("MultisiteID");
        Map(x => x.startDate).Column("StartDate");
        Map(x => x.startTime).Column("StartTime");

    } 
```

表如下：

```
CREATE TABLE [dbo].[tblMultisitePublicBooking](
[PublicBookingID] [int] IDENTITY(1,1) NOT NULL,
[MultisiteID] [int] NULL,
[NumAttendees] [int] NULL,
[AttendeeName] [varchar](1024) NULL,
[AttendeePhone] [varchar](128) NULL,
[AtendeeEmail] [varchar](500) NULL,
[BookingPrice] [money] NULL,
[LID] [int] NULL,
[TimeZoneID] [int] NULL,
[DateTimeModified] [datetime] NULL,
[DateTimeCreated]  AS (getdate()),
[CurrentStep] [nvarchar](50) NULL,
[CallType] [nvarchar](8) NULL,
[CallSpeed] [nvarchar](10) NULL,
[StartDate] [date] NULL,
[StartTime] [time](7) NULL,
[endtime] [time](7) NULL,
[Duration] [time](7) NULL,
[Catering] [nvarchar](200) NULL,
[Equipment] [nvarchar](200) NULL,
[Telepresence] [bit] NULL,
[telepresenceConfigOption] [nvarchar](50) NULL,
[Sync] [bit] NULL,
[ReceiveOrDial] [varchar](50) NULL,
[NoteTXT] [text] NULL,
 CONSTRAINT [PK_tblMultisitePublicBooking] PRIMARY KEY CLUSTERED 
(
    [PublicBookingID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

完整的错误信息是：无法执行查询

[ select multisitep0_.PublicBookingID as PublicBo1_18_, multisitep0_.MultisiteID as Multisit2_18_, multisitep0_.NumAttendees as NumAtten3_18_, multisitep0_.AttendeeName as Attendee4_18_, multisitep0_.AttendeePhone as Attendee5_18_, multisitep0_.AtendeeEmail as AtendeeE6_18_, multisitep0_.BookingPrice as BookingP7_18_, multisitep0_.LID as LID18_, multisitep0_.DateTimeModified as DateTime9_18_, multisitep0_.CurrentStep as Current10_18_, multisitep0_.CallType as CallType18_, multisitep0_.CallSpeed as CallSpeed18_, multisitep0_.StartDate as StartDate18_, multisitep0_.StartTime as StartTime18_, multisitep0_. Catering as Catering18_, multisitep0_psite_Equipment. Equipment. Telepresence 作为 Telepre17_18_，multisitep0_.telepresenceConfigOption 作为 telepre18_18_，multisitep0_.Sync 作为 Sync18_，multisitep0_.ReceiveOrDial 作为 Receive20_18_，multisitep0_.NoteTXT as NoteTXT18_ from tblMultisitePublicBooking multisitep0_ where multisitep0_.MultisiteID=101156 ] [SQL: select multisitep0_.PublicBookingID as PublicBo1_18_, multisitep0_.MultisiteID as Multisit2_18_, multisitep0_.NumAttendees as NumAtten3_18_, multisitep0_.AttendeeName as Attendee4_18_, multisitep0_.AttendeePhone as Attendee5_18_, multisitep0_ .AtendeeEmail 作为 AtendeeE6_18_，multisitep0_.BookingPrice 作为 BookingP7_18_，multisitep0_.LID 作为 LID18_，multisitep0_.DateTimeModified 作为 DateTime9_18_，multisitep0_.CurrentStep 作为 Current10_18_，multisitep0_.CallType 作为 CallType18_，multisitep0_.CallSpeed 作为 Call_Speed18_，multisitep0 Start_.StartD作为 StartTime18_，multisitep0_.Catering 作为 Catering18_，multisitep0_.Equipment 作为 Equipment18_，multisitep0_.Telepresence 作为 Telepre17_18_，multisitep0_。telepresenceConfigOption 作为 telepre18_18_, multisitep0_.Sync 作为 Sync18_, multisitep0_.ReceiveOrDial 作为 Receive20_18_, multisitep0_.NoteTXT 作为 NoteTXT18_ 来自 tblMultisitePublicBooking multisitep0_ where multisitep0_.MultisiteID=101156]

内部异常是：

```
{"Input string '20:00:00' was not in the correct format."}

    {"Unable to cast object of type 'System.TimeSpan' to type 'System.IConvertible'."} 
```

![错误信息的屏幕截图](../Images/822d50d4ee2c293fbfe56f06b379bbdc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:30:36.627

从 TimeSpan 到 SQL“时间”数据类型的映射似乎存在一些问题。

您可以通过像这样设置 startTime-property-mapping 来修复它：

```
 Map(x => x.startTime).CustomType("TimeAsTimeSpan"); 
```

正确设置映射后，您还可以删除指定的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:21:52.270

你是对的，问题出在sql server**时间**列映射中。你可以在这里阅读更多：[这里](http://nhforge.org/blogs/nhibernate/archive/2009/03/11/nhibernate-and-ms-sql-server-2008-date-time-datetime2-and-datetimeoffset.aspx)

*xml*文件中的映射如下所示：

```
<property name="StartTime" type="TimeAsTimeSpan" /> 
```

实体将是：

```
public class MultisitePublicBooking
{
    public virtual int Id { get; set; }
    public virtual int MultisiteID { get; set; }
    public virtual DateTime StartDate { get; set; }
    public virtual TimeSpan StartTime { get; set; }
} 
```

# javascript - 颜色框：仅显示另一个 html 页面的一部分

> ID：13159556
> 
> 赞同：1
> 
> 时间：2012-10-31T13:51:40.137
> 
> 标签：javascript, jquery, html, ajax, colorbox

我必须在颜色框中只打开外部 html 页面的一部分。

我尝试过这种方式，但它会在指定部分打开整个页面（在 id="content" 的 div 处）：

```
<a class="iframe" href=www.mypage.com #content" /> 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:02:12.850

如果 div 总是在同一个位置，你可以设置 iframe 的位置。这是我网站的标志。

```
<div id="divContainer" style="position: absolute; left: 50px; top: 90px; border: solid 2px #000;">
<div id="frameContainer" style="overflow:hidden;">
    <iframe src="http://www.refficient.com" scrolling="no" style="width: 325px; height: 125px; margin-top: -40px;">
    </iframe>
</div>
</div>​ 
```

[http://jsfiddle.net/calder12/Y8bzf/](http://jsfiddle.net/calder12/Y8bzf/)

除此之外，您可以获取外部站点的内容并解析 dom 以获取 div 的内容，但这将是更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:05:00.213

你可以用 jQuery 做到这一点：

```
 $('#result').load('http://www.mypage.com #container'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T08:49:59.093

我以这种方式解决了：

```
$('.link-popup').on('click', function(e) {
  e.preventDefault();
  url = $(this).attr('href');
  $content = $('#popup');
  $content.load(url + " .content", function() {
    popup($content, "ajax");
  });
});

/* where popup is a custom function */

function popup(content, contentType) {
  $(content).bPopup({
    easing : 'easeOutBack', // uses jQuery easing plugin
    speed : 500,
    transition : 'slideDown',
    content : contentType, // 'ajax', 'iframe' or 'image'
  });   
} 
```

# silverlight - Silverlight5 - 在 ItemsControl 中未命中绑定断点

> ID：13159557
> 
> 赞同：0
> 
> 时间：2012-10-31T13:52:04.973
> 
> 标签：silverlight, xaml, visual-studio-2012

使用 VS2012 和 SL5。

当我在 Content={Binding} 上设置断点并点击调试时，代码可以工作，但断点永远不会被命中。为什么？

已尝试重新启动工作室（当我有时无法在代码中设置红点断点时，此方法有效）。

```
<Grid Grid.Row="5">
    <ItemsControl>
        <ItemsControl.Items>
            <Button Content="First" />
            <Rectangle Width="20" Height="20" />
            <Button Content="Second" />
            <Rectangle Width="20" Height="20" />
            <Button Content="Third" />
        </ItemsControl.Items>

        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate></ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Content="{Binding}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate >
    </ItemsControl>
</Grid> 
```

![在此处输入图像描述](../Images/751fccc8549d8152e97568b9a1e7a41f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:09:35.920

我想我知道它为什么没有命中……没有设置默认绑定。这适用于绑定断点。

```
<Grid Grid.Row="5">
    <!-- bind to the Data property of element AccountsDataSourceT32 -->
    <ItemsControl ItemsSource="{Binding Data, ElementName=AccountsDataSourceT32}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate></ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Content="{Binding Username}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate >
    </ItemsControl>
</Grid> 
```

# android - box2d 角速度

> ID：13159561
> 
> 赞同：2
> 
> 时间：2012-10-31T13:52:21.260
> 
> 标签：android, box2d, andengine

我不了解在 Box2d/AndEngine 中设置角速度的大小。我有这个：

最终浮点 omegaFactor = (float) 1.0; ballBody.setAngularVelocity((float) ( (Math.PI) * omegaFactor) );

omegaFactor > 0 时，身体向一个方向旋转。如果我将 omegaFactor 更改为 -1.0，身体会朝相反的方向旋转，这很好。但是，改变大小没有效果。例如，值 1111.0 表现出与 1.0 相同的行为。请注意，body 是 DynamicBody。我需要做什么来影响旋转速度？这是整个测试代码：

```
package example.bouncingball;

import java.io.IOException;
import java.io.InputStream;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.primitive.Rectangle;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.sprite.Sprite;
import org.andengine.extension.physics.box2d.PhysicsConnector;
import org.andengine.extension.physics.box2d.PhysicsFactory;
import org.andengine.extension.physics.box2d.PhysicsWorld;
import org.andengine.input.sensor.acceleration.AccelerationData;
import org.andengine.input.sensor.acceleration.IAccelerationListener;
import org.andengine.opengl.texture.ITexture;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.bitmap.BitmapTexture;
import org.andengine.opengl.texture.region.TextureRegion;
import org.andengine.opengl.texture.region.TextureRegionFactory;
import org.andengine.opengl.vbo.VertexBufferObjectManager;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.adt.io.in.IInputStreamOpener;
import org.andengine.util.debug.Debug;

import android.hardware.SensorManager;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;
import com.badlogic.gdx.physics.box2d.FixtureDef;

/**
 * Demonstrate some physics
 * Image file: assets/gfx/ball.png 128x128
 *
 */
public class MainActivity extends SimpleBaseGameActivity implements IAccelerationListener {

    // ===========================================================
    // Fields
    // ===========================================================
    private Scene scene;

    private PhysicsWorld mPhysicsWorld;

    private TextureRegion mBallTextureRegion;
    private Sprite mBallSprite;

    private final int LEFT_EDGE = 0;
    private final int CAMERA_WIDTH = 720; // right of screen

    private final int TOP_OF_SCREEN = 0;
    private final int CAMERA_HEIGHT = 480; // bottom of screen

    public EngineOptions onCreateEngineOptions() {

        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);

        return engineOptions;

    }

    @Override
    protected void onCreateResources() {

        try {
            BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

            setBallTexture();

        }
        catch (Exception exception) {
            System.out.println ("MainActivity.onCreateResources(): " + exception);
            Debug.d("MainActivity.onCreateResources(): " + exception);
        }
    }

    @Override
    protected Scene onCreateScene() {

        scene = new Scene();

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();

        // physics world
        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);

        final Rectangle ground = new Rectangle(0, CAMERA_HEIGHT - 2, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        //final Rectangle roof = new Rectangle(0, 0, CAMERA_WIDTH, 2, vertexBufferObjectManager); // roof at top of screen
        // y < 0 so as to lift the roof to start the ball off-screen
        final Rectangle roof = new Rectangle(0, -200, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(CAMERA_WIDTH - 2, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);

        final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0, 0.5f, 0.5f);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef);

        scene.attachChild(ground);
        scene.attachChild(roof);
        scene.attachChild(left);
        scene.attachChild(right);

        scene.registerUpdateHandler(this.mPhysicsWorld);

        // end physics world

        // if we use body.Transform() then x,y do not matter here 
        // except that it appears to flash at the x,y defined here before the transform
        // so set it to the same
        final int startX = CAMERA_WIDTH - 160;
        mBallSprite = new Sprite( startX, 
                TOP_OF_SCREEN - 100,  // off screen
                this.mBallTextureRegion, 
                getVertexBufferObjectManager());

        final Sprite ballFace = new Sprite( startX, TOP_OF_SCREEN - 100, this.mBallTextureRegion, this.getVertexBufferObjectManager());

        // increasing elasticity makes the ball more 'bouncy'
        // if friction is 0, it doesn't roll on the floor, it just spins in one spot
        // if friction is < 0, the ball disappears when it hits the floor, or wall presumably
        final FixtureDef BALL_FIXTURE_DEF = PhysicsFactory.createFixtureDef(
                1,     // density
                0.5f,  // elasticity 
                0.5f); // friction

        final Body ballBody = PhysicsFactory.createCircleBody(this.mPhysicsWorld, ballFace, BodyType.DynamicBody, BALL_FIXTURE_DEF);

        // Angular velocity - omega of the object is the change of angle with respect to time
        // Angular velocity is measured in radians per second
        // omegaFactor:  2.0: 2 revolutions per second, clockwise
        //              -0.5: 1/2 revolution per second, counterclockwise
        final float omegaFactor = (float) 1.0;
        ballBody.setAngularVelocity((float) ( (Math.PI) * omegaFactor) ); 

        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(mBallSprite, ballBody, true, true));

        scene.attachChild(mBallSprite);

        return scene;
    }

    private void setBallTexture() throws IOException {

        ITexture texture = new BitmapTexture(this.getTextureManager(), new IInputStreamOpener() {

            @Override
            public InputStream open() throws IOException {
                return getAssets().open("gfx/ball.png");
            }
        });

        texture.load();
        this.mBallTextureRegion = TextureRegionFactory.extractFromTexture(texture);

    }

    // IAccelerationListener interface
    @Override
    public void onAccelerationAccuracyChanged(final AccelerationData pAccelerationData) {
    }

    @Override
    public void onAccelerationChanged(final AccelerationData pAccelerationData) {
    }
    // end IAccelerationListener interface

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:42:40.623

我只在模拟器上看。当我在实际设备上查看它时，旋转速度更快。

# asp.net-web-api - 如何记录/捕获 ASP.NET SqlMembershipProvider 引发的异常？

> ID：13159563
> 
> 赞同：0
> 
> 时间：2012-10-31T13:52:26.917
> 
> 标签：asp.net-web-api, log4net, sqlmembershipprovider

我有一个使用 ASP.NET SqlMembershipProvider 的 .NET 4 WebAPI 应用程序。

当它工作时，它工作正常 - 但如果连接到会员数据库有任何问题，我只会得到一个静默失败，并且浏览器显示 HTTP 500 服务器错误。

我正在使用 log4net 记录应用程序警告和错误，但我无法确定如何或在何处捕获 SqlMembershipProvider 引发的异常，以便记录它们。使用 Application_Error 或将处理程序显式附加到应用程序的错误事件似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:52:09.910

事件记录器中什么都没有？另外，log4net 配置是否正确？过去我遇到过很多问题，这通常让我使用 NLog，至少这样当出现问题时我可以让它抱怨很多......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:39:06.860

您是否尝试过创建自定义错误过滤器并将其注册到 global.asax 中？

您的 500 似乎是未处理的内部服务器错误。

为避免复制粘贴我的代码或教程中的代码，请访问此链接，它应该会给您足够的答案。您可以在操作过滤器中触发您的日志记录：

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)

# c - 从 K&R 书中解释 malloc 的这种实现

> ID：13159564
> 
> 赞同：35
> 
> 时间：2012-10-31T08:45:47.787
> 
> 标签：c, pointers, memory-management, malloc

*这是Kernighan 和 Ritchie*关于 C 的书的节选。它展示了如何实现一个版本的`malloc`. 虽然评论很好，但我很难理解它。有人可以解释一下吗？

```
typedef long Align; /* for alignment to long boundary */
union header { /* block header */
struct {
union header *ptr; /* next block if on free list */
unsigned size; /* size of this block */
} s;
Align x; /* force alignment of blocks */
};
typedef union header Header;

static Header base; /* empty list to get started */
static Header *freep = NULL; /* start of free list */
/* malloc: general-purpose storage allocator */
void *malloc(unsigned nbytes)
{
   Header *p, *prevp;
   Header *morecore(unsigned);
   unsigned nunits;
   nunits = (nbytes+sizeof(Header)-1)/sizeof(header) + 1;
   if ((prevp = freep) == NULL) { /* no free list yet */
      base.s.ptr = freeptr = prevptr = &base;
      base.s.size = 0;
   }
   for (p = prevp->s.ptr; ; prevp = p, p = p->s.ptr) {
      if (p->s.size >= nunits) { /* big enough */
        if (p->s.size == nunits) /* exactly */
           prevp->s.ptr = p->s.ptr;
        else { /* allocate tail end */
           p->s.size -= nunits;
           p += p->s.size;
           p->s.size = nunits
             }
        freep = prevp;
        return (void *)(p+1);
      }
      if (p == freep) /* wrapped around free list */
         if ((p = morecore(nunits)) == NULL)
             return NULL; /* none left */
      }
}

#define NALLOC 1024 /* minimum #units to request */
/* morecore: ask system for more memory */

static Header *morecore(unsigned nu)
{

  char *cp, *sbrk(int);
  Header *up;

  if (nu < NALLOC)
    nu = NALLOC;

  cp = sbrk(nu * sizeof(Header));

  if (cp == (char *) -1) /* no space at all */
    return NULL;

  up = (Header *) cp;
  up->s.size = nu;
  free((void *)(up+1));

  return freep;
}

/* free: put block ap in free list */
void free(void *ap) {
  Header *bp, *p;
  bp = (Header *)ap - 1; /* point to block header */
  for (p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
    if (p >= p->s.ptr && (bp > p || bp < p->s.ptr))
      break; /* freed block at start or end of arena */
  if (bp + bp->size == p->s.ptr) {
    bp->s.size += p->s.ptr->s.size;
    bp->s.ptr = p->s.ptr->s.ptr;
  } else
      bp->s.ptr = p->s.ptr;

  if (p + p->size == bp) {
    p->s.size += bp->s.size;
    p->s.ptr = bp->s.ptr;
  } else
    p->s.ptr = bp;
  freep = p;
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-31T10:32:45.100

好的，我们这里有一大块写得很糟糕的代码。我将在这篇文章中所做的最好描述为软件考古学。

**第1步：修复格式。**

缩进和紧凑的格式对任何人都没有任何好处。需要插入各种空格和空行。评论可以以更易读的方式编写。我将从修复它开始。

同时，我正在从 K&R 风格更改牙套样式 - 请注意，K&R 牙套样式是可以接受的，这只是我的个人喜好。另一个个人偏好是将 * 写在指向的类型旁边的指针。我不会在这里争论（主观）风格问题。

此外， 的类型定义`Header`完全不可读，需要彻底修复。

而且我发现了一些完全模糊的东西：他们似乎在函数内部声明了一个函数原型。`Header* morecore(unsigned);`. 这是非常古老且非常糟糕的风格，我不确定 C 是否允许它不再使用。让我们删除该行，无论该函数做什么，都必须在其他地方定义。

```
typedef long Align;                      /* for alignment to long boundary */

typedef union header                     /* block header */
{
  struct
  {
    union header *ptr;                   /* next block if on free list */
    unsigned size;                       /* size of this block */
  } s;

  Align x;                               /* force alignment of blocks */

} Header;

static Header base;                      /* empty list to get started */
static Header* freep = NULL;             /* start of free list */

/* malloc: general-purpose storage allocator */
void* malloc (unsigned nbytes)
{
  Header*   p;
  Header*   prevp;
  unsigned  nunits;

  nunits = (nbytes + sizeof(Header) - 1) / sizeof(header) + 1;

  if ((prevp = freep) == NULL)           /* no free list yet */
  {
    base.s.ptr = freeptr = prevptr = &base;
    base.s.size = 0;
  }

  for (p = prevp->s.ptr; ; prevp = p, p = p->s.ptr)
  {
    if (p->s.size >= nunits)             /* big enough */
    {
      if (p->s.size == nunits)           /* exactly */
        prevp->s.ptr = p->s.ptr;
      else                               /* allocate tail end */
      {
        p->s.size -= nunits;
        p += p->s.size;
        p->s.size = nunits
      }

      freep = prevp;
      return (void *)(p+1);
    }

    if (p == freep)                      /* wrapped around free list */
      if ((p = morecore(nunits)) == NULL)
        return NULL;                     /* none left */
  }
} 
```

好的，现在我们实际上可能能够阅读代码。

**第 2 步：清除广为人知的不良做法。**

这段代码充满了现在被认为是不好的做法。它们需要被删除，因为它们会危害代码的安全性、可读性和维护性。如果您想参考宣扬与我相同做法的权威，请查看广泛认可的编码标准[MISRA-C](http://www.misra-c.com/Activities/MISRAC/tabid/160/Default.aspx)。

我发现并删除了以下不良做法：

1) 只是输入`unsigned`代码可能会导致混淆：这是程序员的错字还是有意编写的`unsigned int`？我们应该全部替换`unsigned`为`unsigned int`. 但是当我们这样做时，我们发现它在这种情况下被用来给出各种二进制数据的大小。用于此类事务的正确类型是 C 标准类型`size_t`。这本质上也只是一个无符号整数，但保证对于特定平台来说“足够大”。`sizeof`运算符返回类型的结果，如果`size_t`我们查看 C 标准对真正 malloc 的定义，它是`void *malloc(size_t size);`. `size_t`使用最正确的类型也是如此。

2) 为我们自己的 malloc 函数使用与位于 stdlib.h 中的函数相同的名称是一个坏主意。如果我们需要包含 stdlib.h，事情就会变得一团糟。根据经验，切勿在您自己的代码中使用 C 标准库函数的标识符名称。我将名称更改为 kr_malloc。

3）代码滥用了所有静态变量都保证初始化为零的事实。这是由 C 标准明确定义的，但这是一个相当微妙的规则。让我们显式地初始化所有静态变量，以表明我们没有意外忘记初始化它们。

4) 内部条件下的作业是危险的且难以阅读。如果可能，应该避免这种情况，因为它也可能导致错误，例如经典的 = vs == 错误。

5) 由于评估的顺序，同一行上的多个作业很难阅读，也可能很危险。

6) 同一行上的多个声明难以阅读，而且很危险，因为在混合数据和指针声明时可能会导致错误。始终在自己的一行中声明每个变量。

7) 在每条语句之后总是使用大括号。不这样做会导致bugs bugs。

8) 切勿将特定指针类型强制转换为 void*。在 C 中它是不必要的，并且可以隐藏编译器本来会检测到的错误。

9) 避免在函数内使用多个返回语句。有时它们会导致代码更清晰，但在大多数情况下它们会导致意大利面条。就代码而言，我们不能在不重写循环的情况下改变它，所以我稍后会修复它。

10) 保持 for 循环简单。它们应该包含一个 init 语句、一个循环条件和一个迭代，仅此而已。这个带有逗号运算符和所有内容的 for 循环非常晦涩难懂。同样，我们发现需要将这个循环重写为合理的东西。接下来我会这样做，但现在我们有：

```
typedef long Align;                      /* for alignment to long boundary */

typedef union header                     /* block header */
{
  struct
  {
    union header *ptr;                   /* next block if on free list */
    size_t size;                         /* size of this block */
  } s;

  Align x;                               /* force alignment of blocks */

} Header;

static Header base = {0};                /* empty list to get started */
static Header* freep = NULL;             /* start of free list */

/* malloc: general-purpose storage allocator */
void* kr_malloc (size_t nbytes)
{
  Header*  p;
  Header*  prevp;
  size_t   nunits;

  nunits = (nbytes + sizeof(Header) - 1) / sizeof(header) + 1;

  prevp = freep;
  if (prevp == NULL)                     /* no free list yet */
  {
    base.s.ptr  = &base;
    freeptr     = &base;
    prevptr     = &base;
    base.s.size = 0;
  }

  for (p = prevp->s.ptr; ; prevp = p, p = p->s.ptr)
  {
    if (p->s.size >= nunits)             /* big enough */
    {
      if (p->s.size == nunits)           /* exactly */
      {
        prevp->s.ptr = p->s.ptr;
      }
      else                               /* allocate tail end */
      {
        p->s.size -= nunits;
        p += p->s.size;
        p->s.size = nunits
      }

      freep = prevp;
      return p+1;
    }

    if (p == freep)                      /* wrapped around free list */
    {
      p = morecore(nunits);
      if (p == NULL)
      {
        return NULL;                     /* none left */
      }
    }
  } /* for */
} 
```

**第三步：重写晦涩的循环。**

由于前面提到的原因。我们可以看到这个循环永远持续下去，它通过从函数返回终止，无论是在分配完成时，还是在没有剩余内存时。因此，让我们将其创建为循环条件，并将 return 提升到应该在的函数末尾。让我们摆脱那个丑陋的逗号运算符。

我将介绍两个新变量：一个结果变量用于保存结果指针，另一个用于跟踪循环是否应该继续。我将通过使用类型来让 K&R 大吃一惊`bool`，这是自 1999 年以来 C 语言的一部分。

（我希望我没有用这个改变改变算法，我相信我没有）

```
#include <stdbool.h>

typedef long Align;                      /* for alignment to long boundary */

typedef union header                     /* block header */
{
  struct
  {
    union header *ptr;                   /* next block if on free list */
    size_t size;                         /* size of this block */
  } s;

  Align x;                               /* force alignment of blocks */

} Header;

static Header base = {0};                /* empty list to get started */
static Header* freep = NULL;             /* start of free list */

/* malloc: general-purpose storage allocator */
void* kr_malloc (size_t nbytes)
{
  Header*  p;
  Header*  prevp;
  size_t   nunits;
  void*    result;
  bool     is_allocating;

  nunits = (nbytes + sizeof(Header) - 1) / sizeof(header) + 1;

  prevp = freep;
  if (prevp == NULL)                     /* no free list yet */
  {
    base.s.ptr  = &base;
    freeptr     = &base;
    prevptr     = &base;
    base.s.size = 0;
  }

  is_allocating = true;
  for (p = prevp->s.ptr; is_allocating; p = p->s.ptr)
  {
    if (p->s.size >= nunits)             /* big enough */
    {
      if (p->s.size == nunits)           /* exactly */
      {
        prevp->s.ptr = p->s.ptr;
      }
      else                               /* allocate tail end */
      {
        p->s.size -= nunits;
        p += p->s.size;
        p->s.size = nunits
      }

      freep = prevp;
      result = p+1;
      is_allocating = false;             /* we are done */
    }

    if (p == freep)                      /* wrapped around free list */
    {
      p = morecore(nunits);
      if (p == NULL)
      {
        result = NULL;                   /* none left */
        is_allocating = false;
      }
    }
    prevp = p;
  } /* for */

  return result;
} 
```

**第 4 步：编译这个废话。**

由于这是来自 K&R，它充满了错别字。`sizeof(header)`应该是`sizeof(Header)`。缺少分号。它们使用不同的名称 freep、prevp 与 freeptr、prevptr，但显然意味着相同的变量。我相信后者实际上是更好的名字，所以让我们使用它们。

```
#include <stdbool.h>

typedef long Align;                      /* for alignment to long boundary */

typedef union header                     /* block header */
{
  struct
  {
    union header *ptr;                   /* next block if on free list */
    size_t size;                         /* size of this block */
  } s;

  Align x;                               /* force alignment of blocks */

} Header;

static Header base = {0};                /* empty list to get started */
static Header* freeptr = NULL;           /* start of free list */

/* malloc: general-purpose storage allocator */
void* kr_malloc (size_t nbytes)
{
  Header*  p;
  Header*  prevptr;
  size_t   nunits;
  void*    result;
  bool     is_allocating;

  nunits = (nbytes + sizeof(Header) - 1) / sizeof(Header) + 1;

  prevptr = freeptr;
  if (prevptr == NULL)                   /* no free list yet */
  {
    base.s.ptr  = &base;
    freeptr     = &base;
    prevptr     = &base;
    base.s.size = 0;
  }

  is_allocating = true;
  for (p = prevptr->s.ptr; is_allocating; p = p->s.ptr)
  {
    if (p->s.size >= nunits)             /* big enough */
    {
      if (p->s.size == nunits)           /* exactly */
      {
        prevptr->s.ptr = p->s.ptr;
      }
      else                               /* allocate tail end */
      {
        p->s.size -= nunits;
        p += p->s.size;
        p->s.size = nunits;
      }

      freeptr = prevptr;
      result = p+1;
      is_allocating = false;             /* we are done */
    }

    if (p == freeptr)                    /* wrapped around free list */
    {
      p = morecore(nunits);
      if (p == NULL)
      {
        result = NULL;                   /* none left */
        is_allocating = false;
      }
    }
    prevptr = p;
  } /* for */

  return result;
} 
```

* * *

现在我们有了一些可读、可维护的代码，没有许多危险的做法，甚至可以编译！所以现在我们实际上可以开始思考代码实际上在做什么。

正如您可能已经猜到的那样，结构“Header”是链接列表中节点的声明。每个这样的节点都包含一个指向下一个节点的指针。我不太了解 morecore 功能，也不是“环绕”，我从来没有使用过这个功能，也没有`sbrk`. 但我假设它分配了这个结构中指定的标头，以及该标头后面的一些原始数据块。如果是这样，这就解释了为什么没有实际的数据指针：假设数据跟在标头之后，在内存中相邻。因此，对于每个节点，我们都会获得标头，并且我们会在标头之后获得一大块原始数据。

迭代本身非常简单，它们通过一个单链表，一次一个节点。

在循环结束时，他们将指针设置为指向“块”末尾之后的位置，然后将其存储在静态变量中，以便程序在下次调用函数时记住它之前分配内存的位置。

他们正在使用一种技巧来使他们的标头最终位于对齐的内存地址上：他们将所有开销信息与一个足够大的变量一起存储在一个联合中，以对应于平台的对齐要求。因此，如果“ptr”的大小加上“size”的大小太小而无法给出精确的对齐，则联合保证至少分配 sizeof(Align) 个字节。我相信这整个技巧今天已经过时了，因为 C 标准要求自动 struct/union 填充。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-04-09T02:40:06.290

我正在研究 K&R，就像我想象 OP 在他问这个问题时那样，我来到这里是因为我也发现这些实现令人困惑。虽然接受的答案非常详细且很有帮助，但我尝试采用不同的方法来理解最初编写的代码 - 我已经浏览了代码并在代码中对我来说很难的部分添加了注释. 这包括该部分中其他例程的代码（它们是函数`free`，并且`memcore`- 我已重命名它们`kandr_malloc`并`kandr_free`避免与 stdlib 冲突）。我想我会把它留在这里作为已接受答案的补充，以供其他可能觉得它有帮助的学生使用。

我承认此代码中的注释过多。请注意，我只是将其作为一个学习练习，并不是建议这是实际编写代码的好方法。

我冒昧地将一些变量名称更改为对我来说更直观的名称；除此之外，代码基本上保持不变。对于我使用的测试程序，它似乎编译和运行良好，尽管 valgrind 对某些应用程序有抱怨。

另外：评论中的一些文本直接来自 K&R 或手册页——我不打算对这些部分进行任何评价。

```
#include <unistd.h>  // sbrk

#define NALLOC 1024  // Number of block sizes to allocate on call to sbrk
#ifdef NULL
#undef NULL
#endif
#define NULL 0

// long is chosen as an instance of the most restrictive alignment type
typedef long Align;

/* Construct Header data structure.  To ensure that the storage returned by
 * kandr_malloc is aligned properly for the objects that are stored in it, all
 * blocks are multiples of the header size, and the header itself is aligned
 * properly.  This is achieved through the use of a union; this data type is big
 * enough to hold the "widest" member, and the alignment is appropriate for all
 * of the types in the union.  Thus by including a member of type Align, which
 * is an instance of the most restrictive type, we guarantee that the size of
 * Header is aligned to the worst-case boundary.  The Align field is never used;
 * it just forces each header to the desired alignment.
 */
union header {
  struct {
    union header *next;
    unsigned size;
  } s;

  Align x;
};
typedef union header Header;

static Header base;           // Used to get an initial member for free list
static Header *freep = NULL;  // Free list starting point

static Header *morecore(unsigned nblocks);
void kandr_free(void *ptr);

void *kandr_malloc(unsigned nbytes) {

  Header *currp;
  Header *prevp;
  unsigned nunits;

  /* Calculate the number of memory units needed to provide at least nbytes of
   * memory.
   *
   * Suppose that we need n >= 0 bytes and that the memory unit sizes are b > 0
   * bytes.  Then n / b (using integer division) yields one less than the number
   * of units needed to provide n bytes of memory, except in the case that n is
   * a multiple of b; then it provides exactly the number of units needed.  It
   * can be verified that (n - 1) / b provides one less than the number of units
   * needed to provide n bytes of memory for all values of n > 0\.  Thus ((n - 1)
   * / b) + 1 provides exactly the number of units needed for n > 0.
   *
   * The extra sizeof(Header) in the numerator is to include the unit of memory
   * needed for the header itself.
   */
  nunits = ((nbytes + sizeof(Header) - 1) / sizeof(Header)) + 1;

  // case: no free list yet exists; we have to initialize.
  if (freep == NULL) {

    // Create degenerate free list; base points to itself and has size 0
    base.s.next = &base;
    base.s.size = 0;

    // Set free list starting point to base address
    freep = &base;
  }

  /* Initialize pointers to two consecutive blocks in the free list, which we
   * call prevp (the previous block) and currp (the current block)
   */
  prevp = freep;
  currp = prevp->s.next;

  /* Step through the free list looking for a block of memory large enough to
   * fit nunits units of memory into.  If the whole list is traversed without
   * finding such a block, then morecore is called to request more memory from
   * the OS.
   */
  for (; ; prevp = currp, currp = currp->s.next) {

    /* case: found a block of memory in free list large enough to fit nunits
     * units of memory into.  Partition block if necessary, remove it from the
     * free list, and return the address of the block (after moving past the
     * header).
     */
    if (currp->s.size >= nunits) {

      /* case: block is exactly the right size; remove the block from the free
       * list by pointing the previous block to the next block.
       */
      if (currp->s.size == nunits) {
    /* Note that this line wouldn't work as intended if we were down to only
     * 1 block.  However, we would never make it here in that scenario
     * because the block at &base has size 0 and thus the conditional will
     * fail (note that nunits is always >= 1).  It is true that if the block
     * at &base had combined with another block, then previous statement
     * wouldn't apply - but presumably since base is a global variable and
     * future blocks are allocated on the heap, we can be sure that they
     * won't border each other.
     */
    prevp->s.next = currp->s.next;
      }
      /* case: block is larger than the amount of memory asked for; allocate
       * tail end of the block to the user.
       */
      else {
    // Changes the memory stored at currp to reflect the reduced block size
    currp->s.size -= nunits;
    // Find location at which to create the block header for the new block
    currp += currp->s.size;
    // Store the block size in the new header
    currp->s.size = nunits;
      }

      /* Set global starting position to the previous pointer.  Next call to
       * malloc will start either at the remaining part of the partitioned block
       * if a partition occurred, or at the block after the selected block if
       * not.
       */
      freep = prevp;

      /* Return the location of the start of the memory, i.e. after adding one
       * so as to move past the header
       */
      return (void *) (currp + 1);

    } // end found a block of memory in free list case

    /* case: we've wrapped around the free list without finding a block large
     * enough to fit nunits units of memory into.  Call morecore to request that
     * at least nunits units of memory are allocated.
     */
    if (currp == freep) {
      /* morecore returns freep; the reason that we have to assign currp to it
       * again (since we just tested that they are equal), is that there is a
       * call to free inside of morecore that can potentially change the value
       * of freep.  Thus we reassign it so that we can be assured that the newly
       * added block is found before (currp == freep) again.
       */
      if ((currp = morecore(nunits)) == NULL) {
    return NULL;
      }
    } // end wrapped around free list case
  } // end step through free list looking for memory loop
}

static Header *morecore(unsigned nunits) {

  void *freemem;    // The address of the newly created memory
  Header *insertp;  // Header ptr for integer arithmatic and constructing header

  /* Obtaining memory from OS is a comparatively expensive operation, so obtain
   * at least NALLOC blocks of memory and partition as needed
   */
  if (nunits < NALLOC) {
    nunits = NALLOC;
  }

  /* Request that the OS increment the program's data space.  sbrk changes the
   * location of the program break, which defines the end of the process's data
   * segment (i.e., the program break is the first location after the end of the
   * uninitialized data segment).  Increasing the program break has the effect
   * of allocating memory to the process.  On success, brk returns the previous
   * break - so if the break was increased, then this value is a pointer to the
   * start of the newly allocated memory.
   */
  freemem = sbrk(nunits * sizeof(Header));
  // case: unable to allocate more memory; sbrk returns (void *) -1 on error
  if (freemem == (void *) -1) {
    return NULL;
  }

  // Construct new block
  insertp = (Header *) freemem;
  insertp->s.size = nunits;

  /* Insert block into the free list so that it is available for malloc.  Note
   * that we add 1 to the address, effectively moving to the first position
   * after the header data, since of course we want the block header to be
   * transparent for the user's interactions with malloc and free.
   */
  kandr_free((void *) (insertp + 1));

  /* Returns the start of the free list; recall that freep has been set to the
   * block immediately preceeding the newly allocated memory (by free).  Thus by
   * returning this value the calling function can immediately find the new
   * memory by following the pointer to the next block.
   */
  return freep;
}

void kandr_free(void *ptr) {

  Header *insertp, *currp;

  // Find address of block header for the data to be inserted
  insertp = ((Header *) ptr) - 1;

  /* Step through the free list looking for the position in the list to place
   * the insertion block.  In the typical circumstances this would be the block
   * immediately to the left of the insertion block; this is checked for by
   * finding a block that is to the left of the insertion block and such that
   * the following block in the list is to the right of the insertion block.
   * However this check doesn't check for one such case, and misses another.  We
   * still have to check for the cases where either the insertion block is
   * either to the left of every other block owned by malloc (the case that is
   * missed), or to the right of every block owned by malloc (the case not
   * checked for).  These last two cases are what is checked for by the
   * condition inside of the body of the loop.
   */
  for (currp = freep; !((currp < insertp) && (insertp < currp->s.next)); currp = currp->s.next) {

    /* currp >= currp->s.ptr implies that the current block is the rightmost
     * block in the free list.  Then if the insertion block is to the right of
     * that block, then it is the new rightmost block; conversely if it is to
     * the left of the block that currp points to (which is the current leftmost
     * block), then the insertion block is the new leftmost block.  Note that
     * this conditional handles the case where we only have 1 block in the free
     * list (this case is the reason that we need >= in the first test rather
     * than just >).
     */
    if ((currp >= currp->s.next) && ((currp < insertp) || (insertp < currp->s.next))) {
      break;
    }
  }

  /* Having found the correct location in the free list to place the insertion
   * block, now we have to (i) link it to the next block, and (ii) link the
   * previous block to it.  These are the tasks of the next two if/else pairs.
   */

  /* case: the end of the insertion block is adjacent to the beginning of
   * another block of data owned by malloc.  Absorb the block on the right into
   * the block on the left (i.e. the previously existing block is absorbed into
   * the insertion block).
   */
  if ((insertp + insertp->s.size) == currp->s.next) {
    insertp->s.size += currp->s.next->s.size;
    insertp->s.next = currp->s.next->s.next;
  }
  /* case: the insertion block is not left-adjacent to the beginning of another
   * block of data owned by malloc.  Set the insertion block member to point to
   * the next block in the list.
   */
  else {
    insertp->s.next = currp->s.next;
  }

  /* case: the end of another block of data owned by malloc is adjacent to the
   * beginning of the insertion block.  Absorb the block on the right into the
   * block on the left (i.e. the insertion block is absorbed into the preceeding
   * block).
   */
  if ((currp + currp->s.size) == insertp) {
    currp->s.size += insertp->s.size;
    currp->s.next = insertp->s.next;
  }
  /* case: the insertion block is not right-adjacent to the end of another block
   * of data owned by malloc.  Set the previous block in the list to point to
   * the insertion block.
   */
  else {
    currp->s.next = insertp;
  }

  /* Set the free pointer list to start the block previous to the insertion
   * block.  This makes sense because calls to malloc start their search for
   * memory at the next block after freep, and the insertion block has as good a
   * chance as any of containing a reasonable amount of memory since we've just
   * added some to it.  It also coincides with calls to morecore from
   * kandr_malloc because the next search in the iteration looks at exactly the
   * right memory block.
   */
  freep = currp;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-19T04:17:23.663

### malloc()的基础

在 Linux 中，有两种典型的内存请求方式：[sbrk](https://linux.die.net/man/2/sbrk)和[mmap](https://linux.die.net/man/2/mmap)。这些系统调用对频繁的小分配有严格的限制。malloc() 是解决此问题的库函数。它使用 sbrk/mmap 请求大块内存并返回大块内的小内存块。这比直接调用 sbrk/mmap 要高效和灵活得多。

### K&R malloc()

在 K&R 实现中，*核心*（通常称为*arena*）是一大块内存。`morecore()`通过 向系统请求核心`sbrk()`。当您多次调用 malloc()/free() 时，核心中的一些块被使用/分配，而其他块则空闲。K&R malloc 将空闲块的地址存储在一个**循环**单链表中。在这个列表中，每个节点都是一块空闲内存。首先`sizeof(Header)`bytes 保持块的大小和指向下一个空闲块的指针。空闲块中的其余字节未初始化。与教科书中的典型列表不同，空闲列表中的节点只是指向核心中一些未使用区域的指针；除了核心之外，您实际上并没有分配每个节点。这个列表是理解算法的关键。

下图显示了具有两个内核/竞技场的示例内存布局。在图中，每个字符占用`sizeof(Header)`字节。`@`是 a `Header`，`+`标记分配的内存并`-`标记内核内的空闲内存。在示例中，有 3 个已分配块和 3 个空闲块。三个空闲块存储在循环列表中。对于三个分配的块，只有它们的大小存储在`Header`.

```
 This is core 1                             This is core 2

@---------@+++++++++@++++++++++++        @----------@+++++++++++++++++@------------
|                                        |                            |
p->ptr->ptr                              p = p->ptr->ptr->ptr         p->ptr 
```

在您的代码中，`freep`是免费列表的入口点。如果你反复跟随`freep->ptr`，你会回到`freep`——它是循环的。一旦你了解了循环单链表，剩下的就相对容易了。`malloc()`找到一个空闲块并可能拆分它。`free()`将空闲块添加回列表，并可能将其合并到相邻的空闲块。他们都试图维护列表的结构。

### 关于实施的其他意见

*   中提到的代码注释“环绕” `malloc()`。当您遍历整个空闲列表但找不到大于请求长度的空闲块时，就会发生该行。在这种情况下，您必须使用`morecore()`.

*   `base`是一个大小为零的块，始终包含在空闲列表中。避免特殊套管是一个技巧。这不是绝对必要的。

*   `free()`可能看起来有点复杂，因为它必须考虑四种不同的情况才能将新释放的块合并到列表中的其他空闲块。除非您想自己重新实现，否则这个细节并不重要。

*   [这篇博](https://gnuchops.wordpress.com/2013/02/26/memory-allocator-for-embedded-system-k-r-ritchie-book/)文更详细地解释了 K&R malloc。

**PS：**在我看来，K&R malloc 是最优雅的代码之一。当我第一次理解代码时，真是大开眼界。令我难过的是，一些现代程序员甚至不了解此实现的基本原理，仅根据其编码风格就将其称为废话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-01T08:05:07.483

我还发现这个练习很棒而且很有趣。

在我看来，可视化结构可能有助于理解逻辑 - 或者至少这对我有用。下面是我的代码，它尽可能多地打印出 K&R malloc 的流程。

我在 K&R malloc 中所做的最重要的更改是更改了“免费”以确保不再使用某些旧指针。除此之外，我添加了评论并修复了一些小错别字。

尝试使用 NALLOC、MAXMEM 和“main”中的测试变量也可能会有所帮助。

在我的计算机（Ubuntu 16.04.3）上编译时没有错误：

```
gcc -g -std=c99 -Wall -Wextra -pedantic-errors krmalloc.c 
```

krmalloc.c：

```
#include <stdio.h>
#include <unistd.h>

typedef long Align;             /* for alignment to long boundary */
union header {                  /* block header */
    struct {
        union header *ptr;      /* next block if on free list */
        size_t size;            /* size of this block */
                                /*      including the Header itself */
                                /*      measured in count of Header chunks */
                                /*      not less than NALLOC Header's */
    } s;
    Align x;                    /* force alignment of blocks */
};
typedef union header Header;

static Header *morecore(size_t);
void *mmalloc(size_t);
void _mfree(void **);
void visualize(const char*);
size_t getfreem(void);
size_t totmem = 0;              /* total memory in chunks */

static Header base;             /* empty list to get started */
static Header *freep = NULL;    /* start of free list */

#define NALLOC 1                /* minimum chunks to request */
#define MAXMEM 2048             /* max memory available (in bytes) */

#define mfree(p) _mfree((void **)&p)

void *sbrk(__intptr_t incr);

int main(void)
{
    char *pc, *pcc, *pccc, *ps;
    long *pd, *pdd;
    int dlen = 100;
    int ddlen = 50;

    visualize("start");

    /* trying to fragment as much as possible to get a more interesting view */

    /* claim a char */
    if ((pc = (char *) mmalloc(sizeof(char))) == NULL)
        return -1;

    /* claim a string */
    if ((ps = (char *) mmalloc(dlen * sizeof(char))) == NULL)
        return -1;

    /* claim some long's */
    if ((pd = (long *) mmalloc(ddlen * sizeof(long))) == NULL)
        return -1;

    /* claim some more long's */
    if ((pdd = (long *) mmalloc(ddlen * 2 * sizeof(long))) == NULL)
        return -1;

    /* claim one more char */
    if ((pcc = (char *) mmalloc(sizeof(char))) == NULL)
        return -1;

    /* claim the last char */
    if ((pccc = (char *) mmalloc(sizeof(char))) == NULL)
        return -1;

    /* free and visualize */
    printf("\n");
    mfree(pccc);
    /*      bugged on purpose to test free(NULL) */
    mfree(pccc);
    visualize("free(the last char)");

    mfree(pdd);
    visualize("free(lot of long's)");

    mfree(ps);
    visualize("free(string)");

    mfree(pd);
    visualize("free(less long's)");

    mfree(pc);
    visualize("free(first char)");

    mfree(pcc);
    visualize("free(second char)");

    /* check memory condition */
    size_t freemem = getfreem();
    printf("\n");
    printf("--- Memory claimed  : %ld chunks (%ld bytes)\n",
                totmem, totmem * sizeof(Header));
    printf("    Free memory now : %ld chunks (%ld bytes)\n",
                freemem, freemem * sizeof(Header));
    if (freemem == totmem)
        printf("    No memory leaks detected.\n");
    else
        printf("    (!) Leaking memory: %ld chunks (%ld bytes).\n",
                    (totmem - freemem), (totmem - freemem) * sizeof(Header));

    printf("// Done.\n\n");
    return 0;
}

/* visualize: print the free list (educational purpose) */
void visualize(const char* msg)
{
    Header *tmp;

    printf("--- Free list after \"%s\":\n", msg);

    if (freep == NULL) {                   /* does not exist */
        printf("\tList does not exist\n\n");
        return;
    }

    if  (freep == freep->s.ptr) {          /* self-pointing list = empty */
        printf("\tList is empty\n\n");
        return;
    }

    printf("  ptr: %10p size: %-3lu -->  ", (void *) freep, freep->s.size);

    tmp = freep;                           /* find the start of the list */
    while (tmp->s.ptr > freep) {           /* traverse the list */
        tmp = tmp->s.ptr;
        printf("ptr: %10p size: %-3lu -->  ", (void *) tmp, tmp->s.size);
    }
    printf("end\n\n");
}

/* calculate the total amount of available free memory */
size_t getfreem(void)
{
    if (freep == NULL)
        return 0;

    Header *tmp;
    tmp = freep;
    size_t res = tmp->s.size;

    while (tmp->s.ptr > tmp) {
        tmp = tmp->s.ptr;
        res += tmp->s.size;
    }

    return res;
}

/* mmalloc: general-purpose storage allocator */
void *mmalloc(size_t nbytes)
{
    Header *p, *prevp;
    size_t nunits;

    /* smallest count of Header-sized memory chunks */
    /*  (+1 additional chunk for the Header itself) needed to hold nbytes */
    nunits = (nbytes + sizeof(Header) - 1) / sizeof(Header) + 1;

    /* too much memory requested? */
    if (((nunits + totmem + getfreem())*sizeof(Header)) > MAXMEM) {
        printf("Memory limit overflow!\n");
        return NULL;
    }

    if ((prevp = freep) == NULL) {          /* no free list yet */
        /* set the list to point to itself */
        base.s.ptr = freep = prevp = &base;
        base.s.size = 0;
    }

    /* traverse the circular list */
    for (p = prevp->s.ptr; ; prevp = p, p = p->s.ptr) {

        if (p->s.size >= nunits) {          /* big enough */
            if (p->s.size == nunits)        /* exactly */
                prevp->s.ptr = p->s.ptr;
            else {                          /* allocate tail end */
                /* adjust the size */
                p->s.size -= nunits;
                /* find the address to return */
                p += p->s.size;
                p->s.size = nunits;
            }
            freep = prevp;
            return (void *)(p+1);
        }

        /* back where we started and nothing found - we need to allocate */
        if (p == freep)                     /* wrapped around free list */
            if ((p = morecore(nunits)) == NULL)
                return NULL;                /* none left */
    }
}

/* morecore: ask system for more memory */
/*      nu: count of Header-chunks needed */
static Header *morecore(size_t nu)
{
    char *cp;
    Header *up;

    /* get at least NALLOC Header-chunks from the OS */
    if (nu < NALLOC)
        nu = NALLOC;

    cp = (char *) sbrk(nu * sizeof(Header));

    if (cp == (char *) -1)                  /* no space at all */
        return NULL;

    printf("... (sbrk) claimed %ld chunks.\n", nu);
    totmem += nu;                           /* keep track of allocated memory */

    up = (Header *) cp;
    up->s.size = nu;

    /* add the free space to the circular list */
    void *n = (void *)(up+1);
    mfree(n);

    return freep;
}

/* mfree: put block ap in free list */
void _mfree(void **ap)
{
    if (*ap == NULL)
        return;

    Header *bp, *p;
    bp = (Header *)*ap - 1;                 /* point to block header */

    if (bp->s.size == 0 || bp->s.size > totmem) {
        printf("_mfree: impossible value for size\n");
        return;
    }

    /* the free space is only marked as free, but 'ap' still points to it */
    /* to avoid reusing this address and corrupt our structure set it to '\0' */
    *ap = NULL;

    /* look where to insert the free space */

    /* (bp > p && bp < p->s.ptr)    => between two nodes */
    /* (p > p->s.ptr)               => this is the end of the list */
    /* (p == p->p.str)              => list is one element only */
    for (p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
        if (p >= p->s.ptr && (bp > p || bp < p->s.ptr))
            /* freed block at start or end of arena */
            break;

    if (bp + bp->s.size == p->s.ptr) {      /* join to upper nbr */
    /* the new block fits perfect up to the upper neighbor */

        /* merging up: adjust the size */
        bp->s.size += p->s.ptr->s.size;
        /* merging up: point to the second next */
        bp->s.ptr = p->s.ptr->s.ptr;

    } else
        /* set the upper pointer */
        bp->s.ptr = p->s.ptr;

    if (p + p->s.size == bp) {              /* join to lower nbr */
    /* the new block fits perfect on top of the lower neighbor */

        /* merging below: adjust the size */
        p->s.size += bp->s.size;
        /* merging below: point to the next */
        p->s.ptr = bp->s.ptr;

    } else
        /* set the lower pointer */
        p->s.ptr = bp;

    /* reset the start of the free list */
    freep = p;
} 
```

# facebook - 登录 Facebook 按钮时出错

> ID：13159573
> 
> 赞同：0
> 
> 时间：2012-10-31T13:52:49.050
> 
> 标签：facebook, button, login, connect

我在我的网站中插入了一个带有 facebook 的登录按钮。

但是，当我单击此按钮并插入我的用户名和密码（facebook）时，我收到此错误：

```
API Error Code: 100
API Error Description: Invalid parameter
Error Message: Please migrate to OAuth2 and use new /dialog/oauth endpoint. return_session is no longer available. 
```

我怎么修的？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:05:29.917

我已经在这里回答了这个问题：

[关于迁移到 OAuth2 的 Facebook API 错误](https://stackoverflow.com/questions/13135776/facebook-api-error-about-migrate-to-oauth2)

复制：

您使用的是最新的 PHP SDK 吗？

[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

我的猜测是您使用的是旧版本（2.x），因此您应该升级。如果这没有帮助，请查看登录文档：

[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)

[https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

[https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

# xml - 使用 d3.js 强制导向布局的 graphml 文件

> ID：13159575
> 
> 赞同：7
> 
> 时间：2012-10-31T13:52:55.790
> 
> 标签：xml, json, d3.js, graphml, force-layout

如何使用带有 d3.js 的 graphml 文件？[我想画一个力导向图]

*   将文件转换为 .json 更简单吗？如何 ？我一直找不到转换器（我找到了一个python转换器，但我不是python用户）

*   是否可以直接使用graphml文件？可能与 d3.xml 一起使用？

注意：graphml 看起来像这样

```
<graph id="G" edgedefault="directed">
<node id="n0">
  <data key="v_name">JohnMaynardKe...</data>
  <data key="v_label">John Maynard Ke...</data>
  <data key="v_size">4</data>
  <data key="v_label.cex">0.3</data>
  <data key="v_frame.color">#ffffff00</data>
  <data key="v_color">#54FF00CC</data>
</node>
<node id="n1">
  <data key="v_name">JosephA.Schum...</data>
  <data key="v_label">Joseph A. Schum...</data>
  <data key="v_size">4</data>
  <data key="v_label.cex">0.3</data>
  <data key="v_frame.color">#ffffff00</data>
  <data key="v_color">#54FF00CC</data>
</node>
<edge source="n0" target="n1">
  <data key="e_nombre">2</data>
  <data key="e_width">2</data>
  <data key="e_arrow.size">0</data>
  <data key="e_color">#00000021</data>
</edge>
<edge source="n0" target="n7">
  <data key="e_nombre">2</data>
  <data key="e_width">2</data>
  <data key="e_arrow.size">0</data>
  <data key="e_color">#00000021</data>
</edge> 
```

……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-12-07T02:44:25.963

我会建议您将您的 graphml 文件转换为 json 文件。我遇到了同样的问题，这里是我如何使用 python 和 networkx 库在 json 中转换一个 graphml 文件：

```
import networkx as nx
import json
from networkx.readwrite import json_graph
import re

G=nx.read_graphml('YourFile.graphml', unicode)
data = json_graph.node_link_data(G)

for node in data['nodes']:
  str=node['id']
  node['id']=[int(s) for s in str.split("n") if s.isdigit()][0]

with open('YourFile.json', 'w') as f:
  json.dump(data, f, indent=4) 
```

代码中的 for 循环将您的节点 ID 转换为数字。这非常重要，因为 json 最终文件中的源和目标已经是数字（不是字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-16T12:54:42.187

继@fccoelho 之后，[Anders Eriksen (anderser)](https://github.com/anderser)整理了一个**使用 Python****将[GraphML](http://en.wikipedia.org/wiki/GraphML) XML 转换为[d3 JSON 格式的示例，](https://www.dashingd3js.com/data-structures-d3js-accepts)[这里](https://gist.github.com/anderser/7432419)**( [GitHub gist](https://gist.github.com/anderser/7432419) )

[convert.py](https://gist.github.com/anderser/7432419) <- GraphML-to-d3_JSON

Python 脚本利用了[Python-louvain](https://bitbucket.org/taynaud/python-louvain)和[Networkx.github.io](http://networkx.github.io)库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T20:02:35.010

使用 Python 和 networkX，您可以阅读 graphml：[http ://networkx.lanl.gov/reference/generated/networkx.readwrite.graphml.read_graphml.html](http://networkx.lanl.gov/reference/generated/networkx.readwrite.graphml.read_graphml.html)

然后以各种形式保存为 JSON：http: [//networkx.lanl.gov/reference/readwrite.json_graph.html](http://networkx.lanl.gov/reference/readwrite.json_graph.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-03T17:18:09.123

好的，我终于找到了将图形转换为符合 d3.js 的 .json 的方法 [http://coulmont.com/blog/2012/11/03/reseau-d3js/](http://coulmont.com/blog/2012/11/03/reseau-d3js/) 使用 R 和 RJSONIO 库（注释是法语）

```
library(RJSONIO) 
#creation de la partie qui renseigne les "nodes"
temp<-cbind(V(g2)$name,V(g2)$group)
colnames(temp)<-c("name","group")
js1<-toJSON(temp)
#creation de la partie qui renseigne les "liens"
write.graph(g2,"Desktop/edgelist.csv",format="edgelist")
edges<-read.csv("Desktop/edgelist.csv",sep=" ",header=F)
colnames(edges)<-c("source","target")
edges<-as.matrix(edges)
js2<-toJSON(edges)
#concatenation des deux parties
reseau<-paste('{"nodes":',js1,',"links":',js2,'}',sep="")
write(reseau,file="Desktop/reseau.json") 
```

# css - 使用较少的变量输出字体属性时出现问题

> ID：13159576
> 
> 赞同：0
> 
> 时间：2012-10-31T13:53:02.113
> 
> 标签：css, twitter-bootstrap, less

我正在使用较少的 twitter 引导程序，我有以下内容：

```
@serifFontFamily: 'Droid Serif', "Georgia", Times, serif;
@baseFontSize: 100%/1.5;

font: @baseFontSize @serfiFontFamily; 
```

它产生：

```
font: 66.666666667% 'Droid Serif', "Georgia", Times, serif 
```

但我想输出这个：

```
font: 100%/1.5 'Droid Serif', "Georgia", Times, serif 
```

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:17:48.237

您可以使用

```
@baseFontSize: ~"100%/1.5"; 
```

而 less 会将其解释为字符串而不是表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:04:29.500

我已将属性字体分解为 3 个属性：

```
font-size: @baseFontSize;
font-family: @baseFontFamily;
line-height: @baseLineHeight; 
```

和我的变量：

```
@baseFontSize:          100%;
@baseFontFamily:        'Droid Serif', "Georgia", Times, serif;
@baseLineHeight:        1.5; 
```

比它正常工作！

# wordpress - wordpress - 从functions.php创建子菜单项

> ID：13159580
> 
> 赞同：1
> 
> 时间：2012-10-31T13:53:09.477
> 
> 标签：wordpress

所以我的主题中有这个功能：

每当创建自定义帖子类型“人员”中的新帖子时，都会同时创建与帖子的 slug 同名的新菜单。一切都很好，但是。

我需要与导航一起创建和添加一些菜单按钮。这也非常有效。

但是，当我尝试设置导航按钮的层次结构时，我的问题就开始了 - 我不知道为“menu-item-parent-id”设置什么，因为每次为新人帖子创建菜单时，它都有不同的菜单 ID，但是我希望所有这些菜单上的“博客”按钮都是“阅读”按钮的子项

这是我正在使用的一段代码：

```
$menu9 = array(            
        'menu-item-object-id' => 0,
        'menu-item-object' => '',
        'menu-item-parent-id' => 0,
        'menu-item-position' => 2,
        'menu-item-type' => 'custom',
        'menu-item-title' => 'read' ,
        'menu-item-url' => '#',
        'menu-item-description' => '',
        'menu-item-attr-title' => '',
        'menu-item-status' => 'publish'
        );
wp_update_nav_menu_item( $menu_id, 0, $menu9 );
        $menu2 = array(
        'menu-item-object-id' => 0,
        'menu-item-object' => '',
        'menu-item-parent-id' => 0,
        'menu-item-position' => 0,
        'menu-item-type' => 'custom',
        'menu-item-title' => 'blog' ,
        'menu-item-url' => '#',
        'menu-item-description' => '',
        'menu-item-attr-title' => '',
        'menu-item-status' => 'publish'
        );
wp_update_nav_menu_item( $menu_id, 0, $menu2 ); 
```

如您所见，我需要 menu item2($menu2) 是 menu item9 ($menu9) 的子项

任何帮助将不胜感激，因为我在这方面花费了大量时间......

谢谢！

# ios - 如何在 iOS5 和 iOS6 上修复错误的 webkit-text-size-adjust？

> ID：13159581
> 
> 赞同：13
> 
> 时间：2012-10-31T13:53:09.663
> 
> 标签：ios, css, webview

在 iOS 5 和 iOS 6 下的 UIWebView 中使用`-webkit-text-size-adjust`CSS 属性时，呈现的行高不正确。iOS 5 和 iOS 6 中似乎存在错误，但行为不同，我正在尝试修复演示文稿所以它适用于所有IOS版本。

我想要实现的目标：我正在将以下 HTML 代码加载到 UIWebView 中。该代码仅设置所有文本的字体大小、行高和文本大小调整。

```
 <html><head>
 <style language="text/css">
 body {
 -webkit-text-size-adjust : 50%;
 }
 p {
   font-size: 2em;
   line-height: 3em;
  /* line-height: 150%; */  
 }
 </style>
 </head><body>
 <p>Text text text... </p>
 </body> 
```

属性的值 50%`-webkit-text-size-adjust`应减小（减少 50%）整个文本的大小。*同时*减小字体大小和行高是有意义的，否则文本会看起来很丑陋。现在，iOS 5.1 和 iOS 6 似乎都没有始终如一地做到这一点。（在我的应用程序中，我必须使用该属性`-webkit-text-size-adjust`，因为用户应该能够更改文本大小。）

iOS 5.1 的行为是减小字体大小；行高保持不变。所以 iOS 5.1 会像我写的一样解释上面的 HTML `font-size: 1em; line-height: 3em;`。iOS 5.1 上的 UIWebView 将显示行之间有巨大间隙的小文本。

iOS 5.1 的解决方案是编写`line-height: 150%;`而不是`line-height: 3em`. 然后 iOS 5.1 将`line-height`值保持在 150% 不变，同时减小了字体大小。因此文本显示是正确的。

根据我的测试，iOS 6.0 的行为是同时减小*font* -size 和 line-height 值——即使 line-height 值以*percent*给出。（这似乎是一个错误。）因此，iOS 6.0 将显示此文本，就好像我写了`font-size: 1em; line-height: 75%;`. 结果是行高计算为字体大小的 75%，即文本行非常靠近，几乎重叠。

iOS 6.0 上的解决方案是编写`line-height: 3em;`. 但这不适用于 iOS 5.1。

我认为没有对 iOS 版本敏感的 CSS 属性......如何让我的应用程序在两个 iOS 版本上都工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:56:53.830

你有没有试过这样设置`{ line-height:1.5 }`。它相当于 3 和 2em 字体，但告诉设备将行高渲染为比字体大 1.5 倍，而不是硬编码`em`值。

**编辑：**仍然不认为这是一个错误。我认为您在触发尺寸调整之前告诉 CSS 不够。

以下代码在 iOS 5.1 和 6.0 之间看起来相同：

```
html { font-size:40px }
body {
font-size:0.5em; /* without this.. */
-webkit-text-size-adjust : auto; /* 50% is arbitrary */
}
p {
  font-size: 2em;
  line-height: 1.5;
  margin-bottom:3em;
}

<p>Text text text...</p>
<p>Text text text...</p>
<p>Text text text...</p>
<p>Text text text...</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:20:31.460

关于您的问题，我以非常非常丑陋的方式解决了这个问题：

在启动时，我得到了 iOS 版本，并存储在我的应用程序部分中。比当我需要以不同于我的方式工作时

```
if(osVersion < 5){
// iOS 4.3 properly working code here
}
else if (osVersion < 6){
// iOS 5.0 and 5.1 properly working code here
}
else{
// iOS 6 properly working code here.
} 
```

# github - Gerrit 代码审查，还是 Github 的 fork and pull 模型？

> ID：13159586
> 
> 赞同：4
> 
> 时间：2012-10-31T13:53:21.850
> 
> 标签：github, gerrit, pull-request

我正在开始一个将由团队和社区开发的软件项目。我以前在 gerrit 上出售过，但现在 github 的 fork 和 pull request 模型似乎几乎提供了更多工具、可视化提交的方法和易用性。

对于至少对两者都有一点经验的人，每种方法的优缺点是什么，对于希望为社区发展留有余地的基于团队的项目来说，哪种方法更好？

# c# - 如何使用 HttpWebRequest.AllowAutoRedirect 处理身份验证？

> ID：13159589
> 
> 赞同：12
> 
> 时间：2012-10-31T13:53:28.450
> 
> 标签：c#, http, authentication, redirect

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)，当`HttpWebRequest.AllowAutoRedirect`属性为 true 时，重定向将清除身份验证标头。给出的解决方法是实现 IAuthenticationModule 来处理身份验证：

> Authorization 标头在自动重定向时被清除，并且 HttpWebRequest 自动尝试重新验证到重定向的位置。实际上，这意味着如果可能遇到重定向，应用程序不能将自定义身份验证信息放入 Authorization 标头中。相反，应用程序必须实现并注册一个自定义身份验证模块。System.Net.AuthenticationManager 和相关类用于实现自定义身份验证模块。AuthenticationManager.Register 方法注册一个自定义身份验证模块。

我创建了这个接口的基本实现：

```
public class CustomBasic : IAuthenticationModule
{
    public CustomBasic() { }

    public string AuthenticationType { get { return "Basic"; } }

    public bool CanPreAuthenticate { get { return true; } }

    private bool checkChallenge(string challenge, string domain)
    {
        if (challenge.IndexOf("Basic", StringComparison.InvariantCultureIgnoreCase) == -1) { return false; }
        if (!string.IsNullOrEmpty(domain) && challenge.IndexOf(domain, StringComparison.InvariantCultureIgnoreCase) == -1) { return false; }
        return true;
    }

    public Authorization PreAuthenticate(WebRequest request, ICredentials credentials)
    {
        return authenticate(request, credentials);
    }

    public Authorization Authenticate(String challenge, WebRequest request, ICredentials credentials)
    {
        if (!checkChallenge(challenge, string.Empty)) { return null; }
        return this.authenticate(request, credentials);
    }

    private Authorization authenticate(WebRequest webRequest, ICredentials credentials)
    {
        NetworkCredential requestCredentials = credentials.GetCredential(webRequest.RequestUri, this.AuthenticationType);
        return (new Authorization(string.Format("{0} {1}", this.AuthenticationType, Convert.ToBase64String(Encoding.ASCII.GetBytes(string.Format("{0}:{1}", requestCredentials.UserName, requestCredentials.Password))))));
    }
} 
```

和一个简单的驱动程序来行使功能：

```
public class Program
{
    static void Main(string[] args)
    {
        // replaces the existing handler for Basic authentication
        AuthenticationManager.Register(new CustomBasic());
        // make a request that requires authentication
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(@"https://www.SomeUrlThatRequiresAuthentication.com");
        request.Method = "GET";
        request.KeepAlive = false;
        request.ContentType = "text/plain";
        request.AllowAutoRedirect = true;
        request.Credentials = new NetworkCredential("userName", "password");
        HttpWebResponse result = (HttpWebResponse)request.GetResponse();
    }
} 
```

当我发出不重定向的请求时，`Authenticate`我的类上的方法被调用，并且身份验证成功。当我发出一个重新发送 307（临时重定向）响应的请求时，我的类的任何方法都不会被调用，并且身份验证失败。这里发生了什么？

我宁愿不禁用自动重定向并编写自定义逻辑来自己处理 3xx 响应。如何让我的身份验证逻辑与自动重定向一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-10T00:15:13.470

代替 NetworkCredential，您应该为 request.Credentials 传递 CredentialCache。

```
CredentialCache cache = new CredentialCache();
cache.Add(new Uri(@"https://www.SomeUrlThatRequiresAuthentication.com", "Basic", new NetworkCredential("username", "password"));
request.Credentials = cache; 
```

根据 MSDN 文档：

> CredentialCache 类存储多个 Internet 资源的凭据。需要访问多个资源的应用程序可以将这些资源的凭据存储在 CredentialCache 实例中，然后在需要时为 Internet 资源提供适当的凭据集。当调用 GetCredential 方法时，它会将提供的统一资源标识符 (URI) 和身份验证类型与缓存中存储的进行比较，并返回匹配的第一组凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T17:08:49.767

我希望以下是我从代码项目 url [http://www.codeproject.com/Articles/49243/Handling-Cookies-with-Redirects-and-HttpWebRequest中获取的另一个选项](http://www.codeproject.com/Articles/49243/Handling-Cookies-with-Redirects-and-HttpWebRequest)

```
 String targetUrl = "https://www.SomeUrlThatRequiresAuthentication.com";

    HttpWebRequest request = GetNewRequest(targetUrl);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    while (response.StatusCode ==  HttpStatusCode.MovedPermanently)
    {
        response.Close();
        request = GetNewRequest(response.Headers["Location"]);
        response = (HttpWebResponse)request.GetResponse();
    }

private static HttpWebRequest GetNewRequest(string targetUrl)
{

    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUrl);
    request.AllowAutoRedirect = false;
    request.Headers.Add("Authorization", "Basic xxxxxxxx");
    return request;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T13:21:58.963

即使 OP 已经很老了，我会提名 Crater 的回应作为答案。我经历了类似的变化，包括创建自定义身份验证模块，即使我访问的 Web 资源仅使用基本身份验证。我发现只有在我使用 CredentialCache 而不是简单的 NetworkCredential 之后，我的身份验证模块才会在重定向后被调用。

此外，我发现由于我需要的身份验证是 Basic，因此仅提供 CredentialCache 我根本不需要自定义身份验证模块——标准的 Basic 模块工作得很好。

以下资源似乎证实了这一点（与 OP 中提到的 .NET 文档参考相反）：

[https://blogs.msdn.microsoft.com/ncl/2009/05/05/custom-http-authentication-schemes/](https://blogs.msdn.microsoft.com/ncl/2009/05/05/custom-http-authentication-schemes/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-06-16T19:09:30.673

您需要做的可能是一个`POST`请求。您正在发布变量以进行身份​​验证，因此您需要使用该`POST`操作。

有关更多信息，请参阅此帖子：[通过 C# 登录网站](https://stackoverflow.com/questions/930807/c-sharp-login-to-website-via-program)

自动重定向不应妨碍此发布请求。我建议安装 Fiddler 并手动登录，然后观察会发生什么。

*请记住，发送`POST`请求时，如果有登录表单，则您将`POST`请求发送到`action='/some-url-or-whatever.php'`表单中的标签。`POST`数据到那个，你应该可以登录就好了。

让我知道这是否有帮助。

# pyparsing - 使用 pyparsing 作为查询解析器

> ID：13159590
> 
> 赞同：1
> 
> 时间：2012-10-31T13:53:29.023
> 
> 标签：pyparsing

我刚刚了解了出色的 pyparsing 模块，我想用它来制作查询解析器。

基本上我希望能够解析以下类型的表达式：

```
'b_Coherent == "1_2" or (symbol == 2 and nucleon != 3)' 
```

其中 b_coherent、symbol 和 nucleon 是数据库的关键字。

我仔细阅读了 pyparsing (searchparser.py) 附带的示例之一，我认为（我希望！）使我非常接近我的目标，但仍然有问题。

这是我的代码：

```
from pyparsing import *

logical_operator    = oneOf(['and','&','or','|'], caseless=True) 
not_operator        = oneOf(['not','^'], caseless=True) 
db_keyword          = oneOf(['nucleon','b_coherent','symbol','mass'], caseless=True)
arithmetic_operator = oneOf(['==','!=','>','>=','<', '<='])

value = Word(alphanums+'_')
quote = Combine('"' + value + '"') | value

selection = db_keyword + arithmetic_operator + (value|quote)
selection = selection + ZeroOrMore(logical_operator+selection)

parenthesis = Forward()
parenthesis << ((selection + parenthesis) | selection)
parenthesis = Combine('(' + parenthesis + ')') | selection

grammar = parenthesis + lineEnd

res = grammar.parseString('b_Coherent == "1_2" or (symbol == 2 and nucleon != 3)') 
```

我有一些问题要完全理解 Forward 对象。也许这是我的解析器无法正常工作的原因之一。你知道我的语法有什么问题吗？

非常感谢你的帮助

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:57:20.730

您可以使用 Forward 在括号内手工制作自己的表达式嵌套等，但是 pyparsing`operatorPrecedence`简化了整个过程。请参阅下面的原始代码的更新形式，并带有注释：

```
from pyparsing import *

# break these up so we can represent higher precedence for 'and' over 'or'
#~ logical_operator    = oneOf(['and','&','or','|'], caseless=True) 
not_operator        = oneOf(['not','^'], caseless=True) 
and_operator        = oneOf(['and','&'], caseless=True) 
or_operator         = oneOf(['or' ,'|'], caseless=True) 

# db_keyword is okay, but you might just want to use a general 'identifier' expression,
# you won't have to keep updating as you add other terms to your query language
db_keyword          = oneOf(['nucleon','b_coherent','symbol','mass'], caseless=True)
ident = Word(alphas+'_', alphanums+'_')

# these aren't really arithmetic operators, they are comparison operators
#~ arithmetic_operator = oneOf(['==','!=','>','>=','<', '<='])
comparison_operator = oneOf(['==','!=','>','>=','<', '<='])

# instead of generic 'value', define specific value types 
#~ value = Word(alphanums+'_')
integer = Regex(r'[+-]?\d+').setParseAction(lambda t:int(t[0]))
float_ = Regex(r'[+-]?\d+\.\d*').setParseAction(lambda t:float(t[0]))

# use pyparsing's QuotedString class for this, it gives you quote escaping, and
# automatically strips quotes from the parsed text
#~ quote = Combine('"' + value + '"') | value
quote = QuotedString('"')

# when you are doing boolean expressions, it's always handy to add TRUE and FALSE literals
literal_true = Keyword('true', caseless=True)
literal_false = Keyword('false', caseless=True)
boolean_literal = literal_true | literal_false

# in future, you can expand comparison_operand to be its own operatorPrecedence 
# term, so that you can do things like "nucleon != 1+2" - but this is fine for now
comparison_operand = quote | db_keyword | ident | float_ | integer
comparison_expr = Group(comparison_operand + comparison_operator + comparison_operand)

# all this business is taken of for you by operatorPrecedence
#~ selection = db_keyword + arithmetic_operator + (value|quote)
#~ selection = selection + ZeroOrMore(logical_operator+selection)
#~ parenthesis = Forward()
#~ parenthesis << ((selection + parenthesis) | selection)
#~ parenthesis = Combine('(' + parenthesis + ')') | selection
#~ grammar = parenthesis + lineEnd

boolean_expr = operatorPrecedence(comparison_expr | boolean_literal, 
    [
    (not_operator, 1, opAssoc.RIGHT),
    (and_operator, 2, opAssoc.LEFT),
    (or_operator,  2, opAssoc.LEFT),
    ])
grammar = boolean_expr

res = grammar.parseString('b_Coherent == "1_2" or (symbol == 2 and nucleon != 3)', parseAll=True)

print res.asList() 
```

印刷

```
[[['b_coherent', '==', '1_2'], 'or', [['symbol', '==', 2], 'and', ['nucleon', '!=', 3]]]] 
```

从这里开始，我建议您研究如何采取下一步来创建可以实际评估的东西，查看[pyparsing wiki中的](http://pyparsing.wikispaces.com)[simpleBool.py 示例](http://pyparsing.wikispaces.com/file/view/simpleBool.py)，了解使用.`operatorPrecedence`

我很高兴听到你喜欢 pyparsing，欢迎！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:21:40.940

> 稍后定义的表达式的前向声明 - 用于递归语法，例如代数中缀表示法。当表达式已知时，使用“<<”运算符将其分配给 Forward 变量。

# linux - 使用 cifs 挂载文件夹与另一台服务器上的 nfs 共享

> ID：13159593
> 
> 赞同：1
> 
> 时间：2012-10-31T13:53:53.007
> 
> 标签：linux, mount, samba, nfs, cifs

我有以下情况：

我`/bla/`在服务器上有一个文件夹，其中安装了 Windows samba 共享。现在我想`/bla/`用 nfs 将这个文件夹挂载到另一台服务器上。

这应该看起来像：

服务器 A： `/bla/FoldersFromSambeShare`

服务器 B： `/mnt/bla(FromServerA)/FoldersFromSambeShare(MountedOnServerA)`

我在服务器 A 上安装了`/bla/`文件夹，但没有看到 samba 文件夹。我使用`nohide`选项进行了尝试，`/etc/exports`但我仍然没有看到它们。

有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:14:00.677

NFS 不会“转发”安装。如果真正的文件系统是打开的`systemW`，你可以有一个远程挂载`systemW -> (cifs) systemA`，如果`systemW`有一个 NFS 实现（不是 Windows，或者 Windows 有附加软件），你也可以有一个远程挂载`systemW -> (nfs) systemB`。但是，正如您所指出的，尝试挂载`systemA -> (nfs) systemB`会为您提供（可能是空的）目录，从`systemA`该目录上`systemA`挂载了其他东西。你的想法是`systemW -> (cifs) systemA -> (nfs) systemB`行不通的，至少对 NFS 来说是这样。如果您确实需要链接远程挂载（例如`sshfs`和其他一些基于 FUSE 的文件系统类型），还有其他一些选项。

# algorithm - 简单的“数组中的最大值”和复杂度计算

> ID：13159594
> 
> 赞同：11
> 
> 时间：2012-10-31T13:53:55.497
> 
> 标签：algorithm, complexity-theory

我对这些东西很陌生，我需要你的帮助。

我应该构建一个有效的简单算法，它返回一个大小为 n 的数组中的最大值，该数组包含重复的数字 1,2,...n。

然后我必须确定最佳运行时间、平均运行时间和最差运行时间。

所以我有两个问题：

1.  首先，我试图理解这个简单算法需要一个有效解决方案的想法是什么。据我了解，我应该只有一个从 1 到 n 的简单循环并寻找最大值。“高效”算法是否指出如果我在数组中找到值 n 我可以停止搜索更多值，因为这是数组中的最大值？

2.  如何使用事实确定最佳运行时间和平均运行时间，同时计算平均运行时间，这是一个均匀分布。也就是说，数组中的每个单元格都有 1/n 的机会成为最大值。

提前非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:18:03.723

最好的情况 - 找到最大元素作为第一个 ( `O(1)`)，最坏的情况 - 它是检查的最后一个元素 ( `O(n)`)。

棘手的部分是平均情况。
为了找到平均情况——我们需要[预期](http://en.wikipedia.org/wiki/Expected_value)的迭代次数！

由于您可以在找到最大值后停止，因此我们可以将问题分为两部分：

1.  `[0,n-1)`：由于平均而言（假设每个元素的均匀独立分布） - 数字`n`在每个位置的概率为 1/n，因此这部分的预期迭代次数为`1/n + 2*((n-1)/n)/n + 3 * ((n-1)/n)^2/n + ... + (n-1) * ((n-1)/n)^(n-2)/n` ¹
    [上面的公式产生了一个丑陋的公式，即`O(n)`](http://www.wolframalpha.com/input/?i=sum%20j*%28%28n-1%29/n%29%5E%28j-1%29%20*%20%281/n%29%20j%20from%201%20to%20n-1%20)
2.  如果前 n-1 个元素不包含值`n`: ，则将检查最后一个元素，因此您需要添加到上面的`n* ((n-1)/n)^(n-1)`，这`O(n)`也是（lim to infinity is `1/e * n`）。

**`O(n)`这在平均时间解决方案中总计。**

* * *

(1)：每个元素的公式是`j*((n-1)/n)^(j-1) * (1/n)`因为：

*   `j`- 对于检查的元素数量（迭代次数）
*   `((n-1)/n)^(j-1)``n`-前面的元素中没有的概率
*   `(1/n)`- 这个数字的概率是`n`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T03:11:48.253

如果没有关于数组的先验信息（例如已排序），则没有最坏情况或最佳情况，您必须扫描所有元素以找出最大值，并且需要 O(n) 次。

此外，了解每个单元格获取最大值的概率分布通常是没有用的（除非它减少了您的搜索空间。例如，如果您知道只有恒定数量的单元格获得最大值的概率非零，那么您只需需要搜索这些单元格并且需要恒定的时间）。因此，一般来说

Best-case running time = Worst-case running time = average running time = O(n)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T14:06:30.133

算法是这样工作的，首先你选择一个数字（在这种情况下，我选择数组的第一个数字并假装它是最大值，然后我将它与下一个数字进行比较，如果它更大，我将它作为新的最大值，直到我在数组中完成搜索），下一个代码在 C 中：

```
#include <stdio.h>
#define SIZE 100

typedef struct{
    int val;
    int loc;
} find;

/* Functions declaration (Prototype) */
find maxFinder( int * const a );

int main( void )
{
    int response[ SIZE ]=
       { 1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100,
         1, 3, 5, 7,  8, 9, 0, 10, 65, 100 };

    printf( "The max number is %d located in the index %d.\n", maxFinder( response ).val, maxFinder( response ).loc );
    return 0;
}

 find maxFinder( int * const a )
 {
    /* Local Variables initialization & declaration */
    int i;
    find result;

    result.loc = 0;
    result.val = *( a + 0 );

    for( i = 1; i < SIZE; i++ ){
        if ( result.val < *( a + i ) ){
            result.loc = i;
            result.val = *( a + i );
        }
    }
    return result;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:02:23.810

最坏和最好的情况都很简单。平均情况更有趣。查看[几何分布](http://en.wikipedia.org/wiki/Geometric_distribution)的维基百科页面。

# ruby-on-rails - Rails has_many belongs_to 相同的形式

> ID：13159602
> 
> 赞同：0
> 
> 时间：2012-10-31T13:54:13.687
> 
> 标签：ruby-on-rails, has-many, belongs-to, relationships

所以我有专辑和专辑标签。一张专辑可以有很多专辑标签，所以我修改了模型：

```
class Album < ActiveRecord::Base
  ...
  has_many :album_tags
end

class AlbumTag < ActiveRecord::Base
  attr_accessible :album_id, :album_tag_id, :tag_name
  belongs_to :album
end 
```

我还将 :tag_name 添加到专辑的 attr_accessible 中。但是现在我需要将那些 tag_name 插入到相册视图的 _form.htl.erb 中

我用嵌套的资源做了几次，但这次不同了，我的想法没有成功。在我的新方法中，我添加了

```
@album_tag = AlbumTag.new 
```

在我的 _form.html.erb 中，它看起来像这样：

```
<%= f.label :tag_name %><br />
<%= f.text_field :tag_name %> 
```

日志说：

```
ActionView::Template::Error (undefined method `tag_name' for #<Album:0xe7331c50>): 
```

所以我尝试在上面添加album_tag 对象：

```
<%= form_for([@user, @album, @album_tag]) do |f| %> 
```

然后我得到：

```
ActionView::Template::Error (undefined method `user_album_album_tags_path' for #<#<Class:0xe755de48>:0xe755b4cc>): 
```

所以我的做法是插入一个带有 tag1、tag2、tag3 等值的 form_field。之后我想把它们捡起来，并将它们插入到每个中。但首先我必须让该字段显示没有错误。我怎么做 ？

编辑：我只是试图添加

```
accepts_nested_attributes_for :album_tags 
```

进入我的专辑模型。没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:19:11.663

这个 rails cast 很好地覆盖了嵌套形式。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

第 2 部分：

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

据我所知，你应该使用。

```
f.fields_for :album_tags do |builder| 
```

# java - Eclipse 4 RCP Part 类最佳实践

> ID：13159605
> 
> 赞同：1
> 
> 时间：2012-10-31T13:54:33.757
> 
> 标签：java, eclipse-rcp, e4

我正在学习新的 Eclipse 4 RCP 平台，但遇到了一个有趣的问题。

`MPart`假设我正在为我的 Application.e4xmi 中定义的一个零件类设计：

```
public class SomePartView {
    private Text someText;
    private Button someButton;

    @PostConstruct
    public void createControls(Composite parent) {
        parent.setLayout(new GridLayout(3, false));
        someText = new Text(parent, SWT.BORDER);
        someButton = new Button(parent, SWT.NONE);
        someButton.setText("SomeButton");
    }

    @Focus
    private void setFocus(IEclipseContext context) {
        someText.setFocus();
    }

    // ... getters
} 
```

我正在使用 WindowBuilder 来创建 ui，但我希望它没有任何行为代码，所以我创建了一个类来处理这样的交互：

```
public class SomePartViewController {

    @PostConstruct
    public void addBehavior(SomePartView view) {
        view.getSomeButton().addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                // do something
            }
        });    
    }
} 
```

这是一个好习惯还是我在这里重新发明轮子并且e4已经为此提供了一些解决方案？如果不是，我如何将这些类连接在一起？我想避免在 Eclipse 上下文之外创建实例。由于官方的 e4 文档相当稀疏，如果有人可以链接我一本详尽的书或参考手册，我可以在其中找到答案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:50:50.263

我不确定我是否可以给你一个完整的答案，但我会尝试提出一些提示或评论。

首先，只有应用模型引用的类才会获得依赖注入；所以`SomePartView`会得到相应的`@PostConstruct`执行。然而，没有直接连接到`SomePartViewController`应用程序模型之外，因此您不会获得任何自动注入。

有一些方法可以实现这一点，例如，通过使用[扩展应用程序模型](http://www.vogella.com/articles/Eclipse4ExtendModel/article.html)中描述的处理器扩展或通过循环依赖于您的依赖`SomePartView`并从那里实例化行为类。

如果我的问题正确，那么这将无法实现划分视图和行为的主要实现目的。

也许[XWT](http://wiki.eclipse.org/E4/XWT)是您真正需要的技术。这里的 UI 是声明式定义的，事件处理程序仍然在 Java 类中实现。我想 XWT 的工作方式已经是一种最佳实践，因为它可以与创建用户界面的 Android 编程风格相比较。

# checkbox - Knockout js：当布尔值为假时绑定复选框启用

> ID：13159608
> 
> 赞同：2
> 
> 时间：2012-10-31T13:54:38.103
> 
> 标签：checkbox, knockout.js

我的每个元素都有 IsAnabled 和 IsDeafult。如果 IsDefault = true，则应禁用该复选框。

当我这样做时，它会起作用，除了我想要“启用”的相反效果：

```
<input type="checkbox" data-bind="checked: IsEnabled, enable: IsDefault" /> 
```

我试过了：

```
<input type="checkbox" data-bind="checked: IsEnabled, enable: !IsDefault" />
<input type="checkbox" data-bind="checked: IsEnabled, enable: IsDefault == 'false'" />
<input type="checkbox" data-bind="checked: IsEnabled, enable: IsDefault != 'true'" />
<input type="checkbox" data-bind="checked: IsEnabled, enable: IsDefault != true" />
<input type="checkbox" data-bind="checked: IsEnabled, enable: IsDefault == '0'" /> 
```

但仍然没有运气...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T14:03:39.280

我建议您阅读以下文章：[关于 KnockoutJS](http://www.knockmeout.net/2011/06/10-things-to-know-about-knockoutjs-on.html) 的10 件事

> 大多数绑定将在传递给它的值上调用 ko.utils.unwrapObservable，这将安全地返回可观察对象和不可观察对象的值。但是，在绑定中，如果您在表达式中使用可观察对象，则需要将其作为函数引用。同样，在代码中，您通常需要将 observables 引用为函数，除非您实际上想要传递 observable 本身（而不是值）。

`()`因此，当您在表达式中使用它们时，您应该添加到 observable：

```
<input type="checkbox" data-bind="checked: IsEnabled, enable: !IsDefault()" /> 
```

# php - Satis - SVN HTTP 身份验证选项

> ID：13159614
> 
> 赞同：1
> 
> 时间：2012-10-31T13:54:57.110
> 
> 标签：php, svn, composer-php, satis, packagist

满足文档：

*   [http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

我看到了通过 SSH 和 SSL 进行 GIT 身份验证的选项，但我想知道基本 HTTP 身份验证怎么样？

Satis 是否支持这一点，如果支持，文档在哪里？

我用这样的东西吗？

```
svn co http://<url>/<repo> <local_dir> --username user --password password 
```

所以我有这个：

```
{
    "name": "Local Packagist",
    "homepage": "http://blah/packagist",
    "repositories": [
        { "type": "vcs", "url": "http://blahsvn/myProject/my-bundle" }
    ],
    "require-all": true
} 
```

如何添加身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:28:54.040

对于 svn，如果您以交互方式运行，它应该要求您输入密码，并让您缓存或不缓存它。

# android - Android将手机数据写入屏幕

> ID：13159616
> 
> 赞同：1
> 
> 时间：2012-10-31T13:55:00.460
> 
> 标签：android, cordova, jquery-mobile

我试图将有关我手机的信息写入我的应用程序屏幕。我在下面做错了什么？我在清单中设置了适当的权限。我使用 Phonegap 开发应用程序。使用 Jquery。该应用程序启动它只是不显示电话信息。

```
<p id="deviceProperties">Loading device properties...</p> 
```

整页代码

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.2.0.css" />
<script type="text/javascript" src="jquery-1.8.2.js"></script>
 <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" src="jquery.mobile-1.2.0.js"></script>
<script type="text/javascript">

    $(document).on("pageinit", "#newpage", function () {
        $('#saveButton').click(function () {
            localStorage.setItem("name", $('#name').val());
        });

    });
    var wID = navigator.accelerometer.watchAcceleration(onSucess, onerror, { frequency: 1000 });
    function onSucess(a) {
        $('#aX').html(a.x);
        $('#aY').html(a.y);
        $('#aZ').html(a.z);
        $('#aTime').html(a.timestamp);
    }
    function onError() {

    }

    $(document).on('pageshow', '#newpage', function () {
        var personName = localStorage.getItem("name");
        if (personName.length > 0) {
            $('#name').val(personName);
        }
    });

</script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    var element = document.getElementById('deviceProperties');

    element.innerHTML = 'Device Name: '     + device.name     + '<br />' + 
                        'Device Cordova: '  + device.cordova  + '<br />' + 
                        'Device Platform: ' + device.platform + '<br />' + 
                        'Device UUID: '     + device.uuid     + '<br />' + 
                        'Device Version: '  + device.version  + '<br />';
}

</script>

<title>Hello World 2</title>
</head>
<body>

<div id="home" data-role="page">

    <div data-role="header">
        <h1>Home Page2</h1>
    </div>

    <div data-role="content">
        hello Phone Gap and JQuery Mobile! 
        <a href="#newpage" data-role="button">new page</a>
        <br>
    <p id="deviceProperties">Loading device properties...</p>
         <p id="ax">  </p>
        <p id="ay">  </p>
        <p id="az">  </p>
        <p id="aTime">  </p>
    </div>

    <div data-role="footer" data-position="fixed">
    <a href="#dialogpage" data-rel="dialog" data-icon="plus">Add Something</a>

    </div>
</div>

<div id="newpage" data-role="page">

    <div data-role="header">
    <a href="#home" data-icon="delete">Cancel</a>
        <h1>New Page</h1>
        <a href=#home" data-icon="save">save</a>
    </div>

    <div data-role="content">
        <label for="name">what is your name?</label>
        <input id="name" type="text" name="name" value="" />
        <a id="saveButton" href="" data-role="button">Save</a>
    </div>

    <div data-role="footer" data-position="fixed">
        <h4>
            footer</h4>
    </div>

</div>

<div id="dialogpage" data-role="page"> 
 <div data-role="header">
        <h1>Dialog</h1>
    </div>
     <div data-role="content">
        this is a dialog
     </div>
</div>

<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:12:58.183

您需要等到**`deviceready`**从PhoneGap 获得事件，否则您在PhoneGap 实际初始化并准备好返回数据之前请求它。请参阅此处的文档/示例：http: [//docs.phonegap.com/en/2.1.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.1.0/cordova_device_device.md.html#Device)

# c# - 从 SQL 数据库中读取日期时间值

> ID：13159617
> 
> 赞同：6
> 
> 时间：2012-10-31T13:55:00.573
> 
> 标签：c#, sql, datetime

如何从 SQL 数据库中读取日期时间字段？

这不起作用：

```
emp.DateFacturation = (DateTime)(dr["DateFacturation"]) 
```

这也不是：

```
emp.DateFacturation = DateTime.Parse(dr["DateFacturation"].toString()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:59:27.907

由于您已经评论了一个现已删除的答案：

> dr 是一个 DataReader

您可以使用[`SqlDataReader.GetDateTime`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getdatetime.aspx). 您应该首先检查该值是否`DBNull`与[`DataReader.IsDBNull`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)：

```
DateTime dateFacturation;
int colIndex = dr.GetOrdinal("DateFacturation");
if(!dr.IsDBNull( colIndex ))
    dateFacturation = dr.GetDateTime( colIndex ); 
```

我[`GetOrdinal`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getordinal.aspx)用来获取列名的列索引以将其传递给`GetDateTime`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:15:30.407

使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/ch92fbc1(v=vs.100).aspx)：

```
DateTime datevalue;
if (DateTime.TryParse(dr["DateFacturation"].ToString(), out datevalue))
{
    emp.DateFacturation = datevalue;              
}
else
{
    // TODO: conversion failed... not a valid DateTime
    // Print it out and see what is wrong with it...
} 
```

# jasper-reports - ireport 4.7.1 频段

> ID：13159622
> 
> 赞同：0
> 
> 时间：2012-10-31T13:55:11.740
> 
> 标签：jasper-reports, ireport

我正在使用 iReport 4.7.1。这是一份包含大量信息（402 个参数）的报告。（不是字段，而是参数）。
我正在使用页眉的波段 1284 和摘要的波段 1409。页面格式为 8,264 x 20,125。报告，打印不正确。细节带，工作正常，但摘要部分是一团糟。摘要带的代码是：

```
<summary>
    <band height="600" splitType="Stretch"> 
```

详细代码是：

```
<detail>
    <band height="1409" splitType="Inmediate"> 
```

当我使用其他细节带（detail2）打印时是一团糟代码是：

```
<detail2>
    <band height="1409" splitType="Stretch"> 
```

我试图改变页面格式。默认情况下为 8,264 x 20,125 英寸，当我更改为 A4 时。尺寸相同，没有更好的尺寸。默认页面非常窄。两份报告而不是一份报告是否合理？我可以更改表带的大小并为我的所有物品腾出空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:06:10.747

首先你说`8,264 x 20,125 inches`我认为这是不正确的。我认为 Jasper Reports 使用像素而不是英寸。其次，从指定的尺寸和英寸导出为 PDF 时会进行转换。例如，对于常规的 8.5" x 11" 字母，Jasper Reports 中的相应大小应为 612 X 792。

**那是什么意思？**

好吧，这意味着现实世界中的每一英寸都等于`72`Jasper Reports 世界中的每一英寸。因此，您在 Jasper Reports 中的 8,264 x 20,125 尺寸为 114.8" x 279.5"，为了提供更多视角，大约为 9.5 英尺乘以 23 英尺多一点。*那是相当该死的大！*

**所以你会怎么做？**

Jasper Reports 中的 A4 是 542 x 842。因此，您需要通过使用较小的字体、文本换行来缩小报告的实际大小，但在这种情况下，我认为这还不够。

设计报告可以被视为一门艺术（坚持下去，我有一点承诺）。它有必须实现的特定目标，否则就是失败：

*   需要包含有用的必要信息。这可能很棘手，如果报告中没有足够的数据，它将没有用处。有太多，没有人能理解它。这是一个必须达到的平衡。
*   需要令人欣喜若狂的赏心悦目。这并不意味着漂亮的图片。这意味着它需要自然流动。如果事情没有对齐，或者没有相应地分组，读者将无法处理报告。
*   布局中需要考虑交付格式。以 PDF 格式交付的报告与以电子表格形式交付的报告之间存在巨大差异。使用电子表格，您可以容纳更多信息，因为用户可以通过隐藏它们轻松配对他们想要的列。
*   报告要打印吗？如果要打印，您确实需要坚持标准页面尺寸，或者至少知道它将打印在什么页面尺寸上。这会限制你，因为你不能把字体做得小到需要放大镜才能阅读。

我相信还有其他人，但这是我个人在做报告时牢记在心的。

就您而言，有这么多数据，我认为您有两种选择：

1.  只允许导出到 Excel 并让用户决定他们想要什么。缺点是如果他们正在打印它，它看起来不会像从 Excel 打印出来的那么好。
2.  将报告拆分为不同的报告，以满足报告用于的每项任务的特定需求。这样做的缺点是工作量更大。它要求您首先弄清楚该报告的实际用途和用途。然后用户实际需要哪些信息才能使用它来做出决策。

就我个人而言，我会选择选项 2。一份包含大量数据的报告几乎毫无用处。用户如何从包含如此多数据的报告中得出任何结论？**尽可能保持简单、干净、切中要害，这将是一份更有效的报告。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:13:57.217

谢谢你。我将报告分成两个小报告。我尝试创建其他细节乐队。我把细节 1185 像素和细节 2600 像素。两者都带有溢出类型中间体。报告更好，但某些参数无序 可能是某些属性不好？将信息放在字段而不是参数中是否合理？参数是哈希映射。Java 代码

```
 parameter.put("i_4_motivo_vol",     arrayTodosIndicadores[327]); 
```

jrxml代码

```
<parameter name="i_4_motivo_vol" class="java.lang.String"/>
<textField>
<reportElement uuid="5e27ddd1-747f-474c-82af-ac3cfcf8eee6" mode="Transparent" x="450"  y="116" width="41" height="20">
                <printWhenExpression><![CDATA[Boolean.valueOf($P{tamMuestral_4}.intValue() >= $P{muestra2}.intValue())]]></printWhenExpression>
            </reportElement>
            <textElement/>
            <textFieldExpression><![CDATA[$P{i_4_motivo_vol}]]></textFieldExpression>
        </textField> 
```

# visual-studio-2010 - Xaml 设计器在 VS 2012 和 VS 2010 中的行为不同

> ID：13159625
> 
> 赞同：0
> 
> 时间：2012-10-31T13:55:14.800
> 
> 标签：visual-studio-2010, visual-studio, xaml, controltemplate

我最近从 VS2010 切换到 Visual Studio 2012。我有一些用户控件，它们是其他用户控件的模板。第一个有一些 ContentControl，其内容在第二个中定义。

遵循基于模板控件（ImpegniBaseView）的用户控件定义

```
<localView:ImpegniBaseView>

        <localView:ImpegniBaseView.ActionButtons>
            <StackPanel Height="54" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="668" Orientation="Horizontal">
                <Button Content="Salva" Height="31" Width="88"  Command="{Binding Path=SaveCommand}" IsEnabled="{Binding Editable}" Margin="5,0" />
                <Button Command="{Binding Path=CreateCommand}" Content="Nuovo impegno master" Height="31" Width="Auto" 
                    Visibility="{Binding IsFirstLevelView, Converter={StaticResource BoolToVisibility}}"    
                    IsEnabled="{Binding Path=Editable, Converter={StaticResource InverseBooleanConverter}}" Margin="5,0" />

            </StackPanel>
        </localView:ImpegniBaseView.ActionButtons>
    </localView:ImpegniBaseView> 
```

在 Vs 2010 中，我可以轻松地选择，例如，设计器中的按钮“Salva”。我现在不可以。我想我必须更改设计器中的一个选项，但我不知道是哪个...

更新跟随用作模板的用户控件的相关部分

```
<UserControl x:Class="Ragioneria.View.ImpegniBaseView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:Ragioneria"
         mc:Ignorable="d" 
         d:DesignHeight="450" d:DesignWidth="700">

<DockPanel DataContext="{Binding ImpegnoSelezionato}">
    <DockPanel DockPanel.Dock="Top">
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
            <Label Content="Anno/Num-Sub" Height="28" HorizontalAlignment="Left" Margin="5" Name="label1" VerticalAlignment="Top" Width="Auto" />
            <ContentControl  Content="{Binding Path=IdentificazioneImpegnoSection, RelativeSource={RelativeSource AncestorType=UserControl}}" Width="400" Height="28" Margin="5" />

        </StackPanel>

        <TextBox Height="28" Width="100" Name="textBox9" Text="{Binding Path=DataRegistrazione, StringFormat=d}" DockPanel.Dock="Right" Style="{DynamicResource tb_readonly}" TextAlignment="Right" Margin="5" />
        <Label Content="Data" Height="28" Margin="5" Name="label7" Width="50" DockPanel.Dock="Right"/>

    </DockPanel>

    <ContentControl DockPanel.Dock="Bottom"  
                    DataContext="{Binding DataContext.ActiveWorkspace, RelativeSource={RelativeSource  AncestorType=Window}}"
                    Content="{Binding Path=ActionButtons, RelativeSource={RelativeSource AncestorType=UserControl}}" />
</DockPanel> 
```

谢谢菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:29:33.923

您必须添加`[AlternateContentProperty]`到`ActionButtons`.

不幸的是，与 Silverlight 不同的是，您不会在标准库中找到此属性。

相反，您需要使用 Microsoft.Windows.Design.Interaction.dll 中的 Microsoft.Windows.Design.PropertyEditing.AlternateContentProperty。

由于这是来自 Visual Studio 的不可再分发 dll，因此您无法直接引用它，而必须[创建](http://technet.microsoft.com/en-us/subscriptions/bb514646.aspx#Metadata)设计器元数据程序集。

看到这个[错误并](http://connect.microsoft.com/VisualStudio/feedback/details/764315/wpf-designer-does-not-recognize-children-of-custom-controls)[在这里](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3738884-add-alternatecontentpropertyattribute-to-standard-) 投票。

# android - 使用 android 9 补丁文件不起作用

> ID：13159627
> 
> 赞同：2
> 
> 时间：2012-10-31T13:55:21.803
> 
> 标签：android, nine-patch

![在此处输入图像描述](../Images/04d8b0511bbbf56c772e4325a6accae8.png)

我一直在尝试更改自定义标签周围的灰色颜色，我尝试在 YouTube 上寻找答案：

[http://www.youtube.com/watch?v=IfrXE2R2nqM](http://www.youtube.com/watch?v=IfrXE2R2nqM)

[http://www.youtube.com/watch?v=XMWlRXfKgtY](http://www.youtube.com/watch?v=XMWlRXfKgtY)

这帮助我理解了 9-patch 文件的过程，但我一定是做错了，这不起作用。

到目前为止我尝试过的事情：

1.  在我的项目中，我在“包资源管理器”中看到了 Android 4.1，它位于 ...android-sdk/platforms/android-16 中。我用winrar打开它，进入res/drawable-mdpi，只是想看看是否有任何改变，我用“tab_pressed.9.png”的图像替换了“tab_selected.9.png”和“tab_selected_v4.9.png”。然后我尝试编译我的项目只是为了看到我的选项卡按钮背景相同的灰色。

2.  我正在处理的当前android项目我将更改后的“tab_selected.9.png”和“tab_selected_v4.9.png”放在我的drawables文件夹中，并尝试运行它只是为了看到同样的东西。

有谁知道我做错了什么，我是不是在编译什么东西，还是我需要弄乱不同的 .9.png 文件？或者有没有人有一个简单的过程来改变这些标签的灰色？我想这里的快速答案是我必须做些什么才能让“tab_pressed.9.png”的图像替换“tab_selected.9.png”

编辑：

tab_selected.9.png

![在此处输入图像描述](../Images/71f5d62faeeba1a093b6f12dca670404.png)
tab_pressed.9.png

![在此处输入图像描述](../Images/71f5d62faeeba1a093b6f12dca670404.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:55:52.577

确保边框中唯一的像素是 9-patch 像素，黑色（ARGB 中的#f000）或完全透明（#0000）。在简单视图中未被注意到的像素上留下一些具有一定透明度的像素是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:07:47.217

这有点棘手。有时，像灰色这样的东西会从底层的 Android 层爬进来。有时像 tabhost 这样的东西有必须被覆盖的视图。我记得必须在 XML 中绘制一个可绘制的选择器才能让 tabhost 与自定义项目一起工作。

# ios - 更改外部编辑器文件中的 SQLite 数据时未将其复制到设备

> ID：13159628
> 
> 赞同：1
> 
> 时间：2012-10-31T13:55:25.843
> 
> 标签：ios, xcode, sqlite

我的 iOS 应用程序使用存储在 SQLite 文件中的对象屏幕坐标。在开发过程中，我正在更改某些对象的坐标。为了让这反映在设备上，我总是必须从设备中删除应用程序。只有在编译后，具有更改数据的 SQLite 才会被复制到设备中。没有代码被改变，只有 SQLite 内容。

1.  有没有办法只将 SQLite 文件复制到 iPad 上的应用程序（无需重新编译和删除应用程序）
2.  有没有办法告诉 Xcode 在编译和部署后总是复制和覆盖 SQLite 文件？

贾尼斯

# xml - XML 数据库或 PostgreSQL

> ID：13159629
> 
> 赞同：0
> 
> 时间：2012-10-31T13:55:30.657
> 
> 标签：xml, postgresql

我需要一个数据库存储/查询 XML。

我的基本要求是：

*   处理来自多个来源的多个 xml 数据文件。XML 因供应商而异。

是否可以在 PostgreSQL 上存储/查询不同格式的 XML？

还是使用原生 XML 解决方案更好，例如 Senda、XBase？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:10:14.607

PostgreSQL 可以满足您的要求，您实际上可以围绕它构建非常复杂和精密的解决方案。基本问题是你还在做什么。如果只是 XML，您可能只想使用 XML 数据库。如果您还存储与文档相关的其他信息，那么 PostgreSQL 将是更好的方法。

简而言之，您只是存储 XML 吗？也许文档数据库是最好的？还是您需要混合关系/文档数据库？如果是后者，PostgreSQL 是一个非常好的选择。

# delphi - 如何在不使用 COM 自动化的情况下处理 Word 文档？

> ID：13159644
> 
> 赞同：6
> 
> 时间：2012-10-31T13:56:01.990
> 
> 标签：delphi, automation, ms-word

我已经阅读了有关该问题的多篇文章，但似乎都没有对我的问题得出一个不错的结论。（也许我正在尝试查看最近是否出现了任何问题。）

我有一个处理承诺的小型慈善应用程序。为此，它需要处理和打印文档。

问题是，如果 Word 在后台打开，应用程序线程将挂起并且不会响应 Word 的关闭，我必须手动回滚并关闭 Word。当然，一切正常，但我无法保证最终用户会关闭 Word，即使我将说明放入用户手册中也是如此。

我对速度并不太在意，但我想如果可以增强它，那将是一个不错的小奖励。

是否为 Delphi 发布了任何允许我打开、编辑、打印和保存文档的库？如果没有，是否有办法使用 Word Automation，使其在打开时不会与 Word 的另一个打开句柄冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:13:47.953

如果使用`GetActiveOleObject`，您将获得 Word 的运行实例。通过使用`CreateOleObject`，您将获得一个新实例，并且不应该被其他正在运行的实例所困扰。

如果您使用`TWordApplication`, 包装器，您可以设置`ConnectKind`为`ckNewInstance`完成此操作。默认情况下，TWordApplication 会尝试连接一个正在运行的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:59:15.533

如果您想打开编辑和打印 Word 文档，并且您不介意使用 RTF 格式来做您正在做的事情，请研究[TRichView](http://www.trichview.com/)。

它将生成 RTF 格式的丰富文档，这是 MS Word 支持的格式之一。我不认为它直接读取 .DOC 文件，但对于大多数简单文件，您可以将 .DOC 和 .DOCX 转换为 RTF，但某些高级格式化功能会在转换中丢失。

它的优点是无需在将要进行文档处理的机器上安装任何 MS Word 副本即可工作。对于收据和其他简单文件的制作，这将是最可靠的技术；根本不要直接使用 Word。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:52:45.987

```
procedure PrintViaWord (const filename: string);
const
 wdUserTemplatesPath = 2;

var
  wrdApp, wrdDoc, wrdSel: variant;

begin
 wrdApp:= CreateOleObject ('Word.Application');   // create new instance
 sleep (5000);    // this fixes a bug in Word 2010 to do with opening templates
 wrdDoc:= wrdApp.documents.add (
          wrdApp.Options.DefaultFilePath[wdUserTemplatesPath] + '\mytemplate.dot');

 wrdDoc.Select;
 wrdSel:= wrdApp.selection;
 wrdApp.Options.CheckSpellingAsYouType:= 0;
 wrdSel.paragraphformat.alignment:= 1;
 wrdSel.typetext ('This is a program demonstrating how to open Word in the background'
                  + ' and add some text, print it, save it and exit Word');
 wrdDoc.SaveAs (filename + '.doc');
 wrdApp.ActivePrinter:= 'Konica Minolta 211';
 wrdApp.PrintOut;
 WrdDoc.SaveAs (filename + '.doc');
 wrdApp.quit;

 wrdSel:= unassigned;
 wrdDoc:= unassigned;
 wrdApp:= unassigned
end; 
```

# php - dompdf页码

> ID：13159645
> 
> 赞同：6
> 
> 时间：2012-10-31T13:56:09.913
> 
> 标签：php, dompdf

您好我正在使用 DOMPDF 生成 PDF 文件，我想知道如何获取页码。

我在 DOMPDF 的常见问题页面中提到了以下内容。并且没有成功。注意：我也打开了内联 PHP 以及它在常见问题解答中提到的

以下是我的代码

```
 <?php
require_once("dompdf/dompdf_config.inc.php");

ob_start();
//be sure this file exists, and works outside of web context etc.)

$dompdf = new DOMPDF();

$html="     <script type='text/php'>";
        if ( isset($pdf) ) { 
            $font = Font_Metrics::get_font("yourfont", "normal");
            $size = 9;
            $y = $pdf->get_height() - 24;
            $x = $pdf->get_width() - 15 - Font_Metrics::get_text_width("1/1", $font, $size);
            $pdf->page_text($x, $y, "{PAGE_NUM}/{PAGE_COUNT}", $font, $size);
        } 
$html.="        </script>";

$html .="
        aaaaa<br/>aaaaaa<br/>aaaaaa<br/>aaaaa<br/>aaaaaa<br/>aaaaaa<br/>aaaa<br/>aaaaa<br/>aaaaaa<br/>aaaaa<br/>
        aaaaa<br/>aaaaaaa<br/>aaaaaa<br/>
aaaaa<br/>aaaaaa<br/>
        aaaaaaa<br/>aaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaa<br/>aaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaaa<br/>aaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaaa<br/>aaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaaa<br/>aaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaaaa<br/>aaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>aaaaaaaaaaaaaaaaa<br/>
        </body></html>"; 

$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf");

 ?> 
```

有人可以指出我这个问题吗？我在哪里做错了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T19:33:20.920

您正在将内联脚本作为 PHP 页面的一部分运行，而不是将其传递给 dompdf。您的代码*可以*编写如下（截断到相关部分）：

```
...
$html="
<html>
  <body>
    <script type='text/php'>
      if ( isset($pdf) ) { 
        $font = Font_Metrics::get_font('helvetica', 'normal');
        $size = 9;
        $y = $pdf->get_height() - 24;
        $x = $pdf->get_width() - 15 - Font_Metrics::get_text_width('1/1', $font, $size);
        $pdf->page_text($x, $y, '{PAGE_NUM}/{PAGE_COUNT}', $font, $size);
      } 
    </script>
";
... 
```

*请注意，内联脚本当前必须出现在 BODY 元素内。否则在文档处理过程中将被忽略。*

[还有其他方法可以实现您想要的](https://stackoverflow.com/q/7484318/264628)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:58:21.667

如果您使用“1/1”来获取 $x，那么当您有超过 10 页时，这将不起作用。

一个可能的解决方案确实意味着编辑“cpdf_adapter.cls.php”，因此 _add_page_text() 函数在 str_replace() 之后使用以下内容...关于第 790 行：

```
if ($x < 0) $x = (($this->_width + $x) - $this->get_text_width($text, $font, $size));
if ($y < 0) $y = (($this->_height + $y) - $this->get_font_height($font, $size)); 
```

这个想法是你可以传入负 x/y 坐标，它们将从右/下边缘工作。

然后在发送到 DOMPDF 的 HTML 中，我使用了：

```
<script type="text/php">
   $pdf->page_text(-30, -32, "{PAGE_NUM} of {PAGE_COUNT}", Font_Metrics::get_font("serif"), 10, array(0,0,0));
</script> 
```

或者，如果您想以 px 为单位指定 x/y：

```
<script type="text/php">
   $pdf->page_text(((-30 * 72) / DOMPDF_DPI), ((-32 * 72) / DOMPDF_DPI), "{PAGE_NUM} of {PAGE_COUNT}", Font_Metrics::get_font("serif"), 10, array(0,0,0));
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T22:45:48.203

对我有用的代码。您可以根据 PDF 的大小自定义应位于的位置：

```
$pdf->load_html($html);
$pdf->render();
$dompdf = $pdf->getDomPDF();
$color = array(0, 0, 0);
$font = null;
$size = 10;

$canvas = $dompdf->get_canvas();
$canvas->page_text(0, 0, "{PAGE_NUM} of {PAGE_COUNT}", $font, $size, $color); 
```

请记住，颜色数组不包含 RGB 值。您可以从[此处](https://encycolorpedia.com/777777)的 RYB 行中获取适当的值作为 (0,1) 范围内的值，即`array(0.46,0.46,0.46)`.

# android - 在 Asynctask 中将视图作为参数发送

> ID：13159650
> 
> 赞同：3
> 
> 时间：2012-10-31T13:56:17.573
> 
> 标签：android, view, android-asynctask, parameter-passing

我正在处理我正在膨胀视图的代码，当用户单击一个视图时，我需要执行解析 URL，然后检查解析是否返回我。问题是我需要在 asynctask 解析中进行才能没有异常，并且在任务结束之前进行检查。

理想的做法是将视图作为参数发送到 AsyncTask，以将我的所有代码发送到 Asynctask。但不是如何做到这一点

我放代码是为了更容易理解。

```
vMens.setOnClickListener(new View.OnClickListener() {

    public void onClick(View vMens) {
        int readOK=0;
        try{
            new taskMensaje(vMens).execute();

            if(mess_gest.equals("1")){
                readOK=1;
            }else{
                readOK=0;
            }
        }catch(Exception e){
            Utils.showDialog(Calendario.this, "Error", "No se puede gestionar el mensaje");
        }
            if (readOK==0){
                Mess.state = message.get(vMens.getId()).p1;
                Mess.tittle = message.get(vMens.getId()).p2;
            else{
                //message no gest
            }
    }
});
private class taskMensaje extends AsyncTask<String, Void, View> {

    @Override
    protected String doInBackground(String... params) {
        MensajeriaGestionablePARSER parserMensGest = new MensajeriaGestionablePARSER(urlMensGest);
        gestionables = parserMensGest.parse();

        mess_gest = gestionables.get(0).p0;
        return "";
    }
} 
```

有什么想法可以解决这个问题吗？

感谢和抱歉我的英语不好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:50:26.913

您可以将其作为构造函数的参数并将其存储在 AsyncTask 对象中。将其存储为 WeakReference 并在 onPostExecute 上进行检查，就像在[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html上的官方文档中显示图像的最佳实践](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

```
private class TaskMensaje extends AsyncTask<String, Void, Void> {
   private WeakReference vRef;
   ... / your other stuff here   

   public TaskMensaje (View v) {
       vRef = new WeakReference(v);
   }

    @Override
    protected String doInBackground(String... params) {
        MensajeriaGestionablePARSER parserMensGest = new MensajeriaGestionablePARSER(urlMensGest);
        gestionables = parserMensGest.parse();

        mess_gest = gestionables.get(0).p0;
        return null;
    }

    @Override
    protected onPostExecute(Void result) {
        if (vRef != null && bitmap != null) {
           final ImageView imageView = vRef.get();
           if (imageView != null) {
               // Do whatever you want with your ImageView
               ...
           }
       }
    }
} 
```

顺便说一句，请参阅 AsyncTask 参考文档以了解如何在类定义中使用通用参数；-) 在[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:59:29.670

您可以在异步任务中创建一个构造函数，通过它您可以传递视图并在需要时在异步任务中使用它。

像下面

```
private class taskMensaje extends AsyncTask<String, Void, String> {

    private View _view 
    public taskMensaje(View view){
        this._view = view; // this you can use ahead wherever required
    }

    @Override
    protected String doInBackground(String... params) {
        MensajeriaGestionablePARSER parserMensGest = new MensajeriaGestionablePARSER(urlMensGest);
        gestionables = parserMensGest.parse();

        mess_gest = gestionables.get(0).p0;
        return "";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:15:09.180

如果你想`View`作为参数发送到`AsyncTask`，简短的回答是**不要**！

视图来来去去，当你`AsyncTask`完成时，很有可能你`View`已经死了，走了，除了悲伤和沮丧之外，试图访问它不会给你任何东西。

异步处理数据的正确模式是创建一个单独的数据处理类，它`Observable`包括 all `AsyncTasks`、bells and whistles。并使您的`View`类成为一个`Observer`，它注册以接收更新并等待直到数据被处理并通过`update()`回调提供给它。

请记住，`AsyncTask`故意将数据处理与**UI**分开，尝试将其绑定回来是完全不合逻辑的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:10:13.013

试试这个

```
 vMens.setOnClickListener(new View.OnClickListener() {

        public void onClick(View vMens) {
            int readOK=0;
            try{
                new taskMensaje().execute(vMens);

                if(mess_gest.equals("1")){
                    readOK=1;
                }else{
                    readOK=0;
                }
            }catch(Exception e){
                Utils.showDialog(Calendario.this, "Error", "No se puede gestionar el mensaje");
            }
                if (readOK==0){
                    Mess.state = message.get(vMens.getId()).p1;
                    Mess.tittle = message.get(vMens.getId()).p2;
                else{
                    //message no gest
                }
        }
    });

private class taskMensaje extends AsyncTask<View, Void, String> {

     @Override
        protected String doInBackground(View... params) {
           //Do what ever you want to do with this view
    View v=params[0];
            return "";
        }
    } 
```

# css - IE7 Cleafix 不工作

> ID：13159652
> 
> 赞同：0
> 
> 时间：2012-10-31T13:56:26.983
> 
> 标签：css, internet-explorer, css-float

我在此页面上遇到 IE7 和浮动清除问题：

[https://dev.editionpatrickfrey.com/de/books/miss-martin-guggisberg](https://dev.editionpatrickfrey.com/de/books/miss-martin-guggisberg)

我正在使用 Sass pie-clearfix(); mixin 并尝试了所有可能的其他 clearfixes 都没有成功。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:28:24.577

下面的 ClearFix 可以应用于浮动子元素的父级和/或作为浮动元素下方的元素。这应该涵盖 IE6 - IE10。

```
.clear:before,
.clear:after {
    content: "";
    display: table;
} 
.clear:after {
    clear: both;
}
.clear {
    zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```

我个人使用此 ClearFix，但要了解有关此 ClearFix 的更多信息，请查看此链接：[http ://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:06:25.820

您需要将 floatstop 添加到包含浮动元素的父元素：

CSS：

```
.floatstop:after {
 content: ".";
 display :block;
 height :0;
 clear :both;
 visibility :hidden;
}
*:first-child+html .floatstop {min-height: 1px;}/* ie7 fix */
* html .floatstop {height: 1%;}/* ie6 fix */ 
```

HTML：

```
<div class="floatstop">
 <div>floated div</div>
 <div>floated div</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:55:28.507

我意识到我需要一个包装容器来做到这一点。我只是想在一层上清除浮动元素。使用 Sass pie-clearfix() 添加容器；mixin 解决了这个问题。

# ruby-on-rails - 当我执行一些指令时，Rails 3.2 消息：“你没有指定你希望 Rails 如何报告弃用通知”

> ID：13159654
> 
> 赞同：-2
> 
> 时间：2012-10-31T13:56:29.807
> 
> 标签：ruby-on-rails, plugins, redmine

我正在为 redmine 开发一个插件，当我执行命令来生成控制器时，我收到以下消息：

** c:\redmine>rails g redmine_plugin_controller g_build gbuild_setup 你没有指定你希望 Rails 如何为你的生产环境报告弃用通知，请在配置中将 config.active_support.deprecation 设置为 :log、:notify 或 :stderr /environments/production .rb C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connect ion_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection ': database configuration does not specify adapter (ActiveRecord::AdapterNotSpec ified) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:41:in`resolve_st ring_connection' 来自 C :/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:`spec' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:129:in`从C:/Ruby192/lib/ruby建立_connection /gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in`block (2 levels) in <class:Railtie>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:36:in`instance_eval' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:43:in`block in run_load_hooks' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:42:in`run_load_hooks' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord- 3.2.8/lib/active_record/base.rb:721:in block `<top (required)>' from c:/redmine/lib/plugins/acts_as_activity_provider/init.rb:2:in`in ' from c:/redmine/config/initializers/00-core_plugins.rb:12:in `eval' from c:/redmine/config/initializers/00-core_plugins.rb:12:in`block in <top (required)>' from c :/redmine/config/initializers/00-core_plugins.rb:2:in `each' from c:/redmine/config/initializers/00-core_plugins.rb:2:in`'来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb :245:在`load' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`load' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:588:in `block (2 levels) in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:587:in`each' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2 .8/lib/rails/engine .rb:587:in `block in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30:in`instance_exec' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30 :in `run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:55:in`block in run_initializers' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in`run_initializers' from C:/Ruby192/ lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:136:in `initialize!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railti e/configurable.rb:30:in`method_missing' 来自 c:/redmine/config/environment.rb:14:in`<top (required)>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:103:in`需要'来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:103:in `require_environment!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:25:in`' 来自 script/rails:6:in `require' from script/rails:6:in`'

c:\redmine>rails g redmine_plugin_controller g_build gbuild_setup -e devlopment 您没有指定希望 Rails 如何报告生产环境的弃用通知，请将 config.active_support.deprecation 设置为 :log、:notify 或 :stderr at config/environments/production .rb C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection ': database configuration does not specify adapter (ActiveRecord::AdapterNotSpec ified) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:41:in`resolve_st ring_connection'来自C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in`spec' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:129:in`建立_connection'从C:/Ruby192/lib/ ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in`block (2 levels) in <class:Railtie>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:36:in`instance_eval' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:43:in`block in run_load_hooks' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:42:in`run_load_hooks' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord- 3.2.8/lib/active_record/base.rb:721:in block `<top (required)>' from c:/redmine/lib/plugins/acts_as_activity_provider/init.rb:2:in`in ' from c:/redmine/config/initializers/00-core_plugins.rb:12:in `eval' from c:/redmine/config/initializers/00-core_plugins.rb:12:in`block in <top (required)>' from c :/redmine/config/initializers/00-core_plugins.rb:2:in `each' from c:/redmine/config/initializers/00-core_plugins.rb:2:in`'来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb :245:在`load' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`load' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:588:in `block (2 levels) in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:587:in`each' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2 .8/lib/rails/engine .rb:587:in `block in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30:in`instance_exec' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30 :in `run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:55:in`block in run_initializers' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in`run_initializers' from C:/Ruby192/ lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:136:in `initialize!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railti e/configurable.rb:30:in`method_missing' 来自 c:/redmine/config/environment.rb:14:in`<top (required)>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:103:in`需要'来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:103:in `require_environment!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:25:in`' 来自 script/rails:6:in `require' from script/rails:6:in`'

c:\redmine>rails g redmine_plugin_controller g_build gbuild_setup -e devlopment

> > error.logx 您没有指定希望 Rails 如何报告生产环境的弃用通知，请在 config/environments/production .rb C:/ 中将 config.active_support.deprecation 设置为 :log、:notify 或 :stderr Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connect ion_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection ': database configuration does not specify adapter (ActiveRecord::AdapterNotSpec ified) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:41:in`resolve_st ring_connection' 来自 C:/Ruby192/lib/ruby/gems /1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in`spec' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_r ecord/connection_adapters/abstract/connection_specification.rb:129:in`从 C:/Ruby192/lib/ruby/gems/1.9.1/gems/ 建立 _connection activerecord-3.2.8/lib/active_record/railtie.rb:82:in`block (2 levels) in <class:Railtie>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:36:in`instance_eval' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:43:in`block in run_load_hooks' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:42:in`run_load_hooks' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord- 3.2.8/lib/active_record/base.rb:721:in block `<top (required)>' from c:/redmine/lib/plugins/acts_as_activity_provider/init.rb:2:in`in ' from c:/redmine/config/initializers/00-core_plugins.rb:12:in `eval' from c:/redmine/config/initializers/00-core_plugins.rb:12:in`block in <top (required)>' from c :/redmine/config/initializers/00-core_plugins.rb:2:in `each' from c:/redmine/config/initializers/00-core_plugins.rb:2:in`'来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb :245:在`load' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:245:in`load' 来自 C:/Ruby192/lib/ ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:588:in `block (2 levels) in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine .rb:587:in`each' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2 .8/lib/rails/engine .rb:587:in `block in <class:Engine>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30:in`instance_exec' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30 :in `run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:55:in`block in run_initializers' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in`run_initializers' from C:/Ruby192/ lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in`initialize!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railti e/configurable.rb:30:in`method_missing' 来自 c:/redmine/config/environment.rb:14:in `<top (required)>' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:103:in`require' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation。 rb:103:in `require_environment!' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:25:in`'来自脚本/rails:6:in `require' from script/rails:6:in`' **

问题是什么？谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T11:39:54.030

看起来您在 -e 之后的环境名称中有错字。在你得到的主线程中，`devlopment`而不是`development`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:59:03.880

您没有指定希望 Rails 如何报告生产环境的弃用通知，请在 config/environments/production.rb 中将 config.active_support.deprecation 设置为 :log、:notify 或 :stderr

# google-apps-script - 只有一个 Google Apps 脚本事件触发

> ID：13159656
> 
> 赞同：2
> 
> 时间：2012-10-31T13:56:47.733
> 
> 标签：google-apps-script

下面的 Google Apps 脚本只会触发一些事件。例如，如果我将第 16 列更改为 X，它会正确更新第 17 列。但是，如果我随后删除第 16 列中的 X，它会删除第 17 列中的日期，但不会重置字体颜色（`dataRangeAll.setFontColor(false)`in `colorRow(r)`）。如果它本身是 fontcolor 重置工作。

是一个接一个地运行两个事件，还是下面的代码在某种程度上是错误的？

[可以在此处找到](https://docs.google.com/spreadsheet/ccc?key=0AvmCHAibmHeNdGdWakVURXprdnFidWd5SjQwbHRYNUE)示例电子表格。

```
function setDate(r){
  var sheet = SpreadsheetApp.getActiveSheet();

  var dataRange = sheet.getRange(r, 1, 1, 17);

  var data = dataRange.getValues();
  var row = data[0];

  var date = new Date();
  date.setHours(0);
  date.setMinutes(0);
  date.setSeconds(0);
  //Logger.log(date);

  var Sdate = Utilities.formatDate(date,'GMT+0100','yyyy-MM-dd')

  if(row[2] != ""){ 
    sheet.getRange(r,12).setValue(Sdate);
  } else if(row[2] == ""){ 
    sheet.getRange(r,12).setValue("");
  }

  SpreadsheetApp.flush(); 

}

function setDate2(r){
  var sheet = SpreadsheetApp.getActiveSheet();

  var dataRange = sheet.getRange(r, 1, 1, 17);

  var data = dataRange.getValues();
  var row = data[0];

  var date = new Date();
  date.setHours(0);
  date.setMinutes(0);
  date.setSeconds(0);
  //Logger.log(date);

  var Sdate = Utilities.formatDate(date,'GMT+0100','yyyy-MM-dd')

  if(row[15] != ""){ 
    sheet.getRange(r,17).setValue(Sdate);
  } else if(row[15] == ""){ 
    sheet.getRange(r,17).setValue("");
  }

  SpreadsheetApp.flush(); 

}

function colorRow(r){
  var sheet = SpreadsheetApp.getActiveSheet();
  var dataRange = sheet.getRange(r, 12, 1, 6);
  var dataRangeAll = sheet.getRange(r, 1, 1, 17);

  var data = dataRange.getValues();
  var row = data[0];

  var date = new Date();
  date.setHours(0);
  date.setMinutes(0);
  date.setSeconds(0);
  //Logger.log(date);
  var sheetDate = new Date(row[0]);

  var Sdate = Utilities.formatDate(date,'GMT+0100','yyyy-MM-dd')
  var SsheetDate = Utilities.formatDate(sheetDate,'GMT+0100', 'yyyy-MM-dd')

  dataRangeAll.setFontLine(false);

  //Om faktura har skickats
  if(row[4] != ""){ 
    dataRangeAll.setFontLine("line-through");
    dataRange.setBackgroundRGB(255, 255, 255);
    dataRangeAll.setFontColor('#cccccc');

  //Om faktura inte har skickats och fakturadatum har uppnåtts  
  }else if(row[0] != "" && Sdate >= SsheetDate && row[4] == ""){ 
      dataRange.setBackgroundRGB(255, 170, 86);
      dataRange.setFontColor('#000000');
      dataRangeAll.setFontColor(false);

  //Om faktura inte har skickats, men fakturadatum är tomt  
  }else if(row[0] == ""){ 
    dataRange.setBackgroundRGB(255, 255, 255);
    dataRange.setFontColor('#cccccc');
    dataRangeAll.setFontColor(false);

  //Om faktura inte har skickats, men fakturadatum inte har uppnåtts
  }else{ 
    dataRange.setBackgroundRGB(255, 255, 255);
    dataRange.setFontColor('#777777');
    dataRangeAll.setFontColor(false);
  }

  SpreadsheetApp.flush(); 
}

function onEdit(event)
{
  var r = event.source.getActiveRange().getRowIndex();
  if (r >= 3) {

    var ss = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();

    //När en produktion markeras som klar eller inte
    var watchColumn = 3;   //A=1, B=2, C=3...  
    var activeColumn = ss.getActiveCell().getColumn();

    if (activeColumn == watchColumn){  //only run if change in watch column 
      setDate(r);
    }

    //När en faktura markeras som skickad eller inte
    var watchColumn2 = 16;   //A=1, B=2, C=3... 
    var activeColumn2 = ss.getActiveCell().getColumn();

    if (activeColumn2 == watchColumn2){  //only run if change in watch column 
      setDate2(r);
    }

    colorRow(r);
  }
} 
```

# c++ - 从派生类访问基类公共成员

> ID：13159659
> 
> 赞同：4
> 
> 时间：2012-10-31T13:57:06.233
> 
> 标签：c++, inheritance

是否可以从程序中其他位置的派生类实例访问基类公共成员。

```
class base {
public:
    int x;

    base(int xx){
    x = xx;
    }
};

class derived : base {
public:
    derived(int xx) : base(xx){
    }
};

class main {
public:
    derived * myDerived;      

    void m1(){
        myDerived = new derived(5);
        m2(myDerived);  
    }

    void m2(derived * myDerived){
        printf("%i", myDerived->x);
    }    
}; 
```

在上面的代码之后，我得到了以下错误。

```
`error: 'int base::x' is inaccessible` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:59:51.090

问题是你在这里不小心使用了私有继承

```
class derived : base { 
```

这使得派生类中的所有基类成员都是私有的。

将此更改为

```
class derived : public base { 
```

它会按预期工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T13:59:17.640

您从基类私下继承。您通常需要的是公共继承：

```
class derived : public base 
```

这是关于私有继承的[常见问题解答。](http://www.parashift.com/c++-faq/private-inheritance.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T14:00:05.313

`base`那么，您应该从公开继承。

```
class derived : public base {
public:
    derived(int xx) : base(xx){
    }
}; 
```

私有继承在非常特殊的情况下使用，例如当您`has-a`在两个类之间存在关系时，但您还需要覆盖基类的成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:00:24.700

从类外部，你只能访问公共基类的公共成员；`class`当您使用关键字定义类时，默认情况下继承是私有的。

为了使其可访问，您需要公共继承：

```
class derived : public base
                ^^^^^^ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T14:00:41.730

尝试：

```
class derived : public base {
    ...
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-05T14:09:29.543

使用公共继承：

```
class derived : public base {
  ...
}; 
```

或者

将 x 设为私有而不是公开，并使用以下代码：

```
class Base {
        int x;
        public:
            Base (int xx) {
                x = xx;
            }
            void display() {
                cout << "x = " << x << endl;
            }
    };

    class Derived : public Base {
        public:
            Derived (int xx) : Base (xx) {
            }
    };

    int main() {
        Derived d1(2);
        Derived *d = new Derived(10);
        d->display();
        d1.display();
        return 0;
    } 
```

# ruby-on-rails - 当生产已经发布时更新seed.rb

> ID：13159660
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:07.903
> 
> 标签：ruby-on-rails, ruby

我认为最好的解决方案就是像下面这样写。

## 生产发布前

`if Category.count == 0 categories = Category.create([{ name: 'business' }, { name: 'sport' }) end`

## 后

```
if Category.count == 0
  categories = Category.create([{ name: 'business' }, { name: 'sport' })
elsif Category.count == 2
  Category.create([{ name: 'science' }])
  categories = Category.all
end 
```

这有点失败，因为我`[{ name: 'hoge' }]`每次添加数据时都必须写。我可能会错过计算块`Category.count === COUNT`中的哪个`elsif`。

有更好的解决方案吗？

我认为如果它能够从某个数组中添加/删除一些值来更新主数据会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:02:12.870

我更喜欢使用[seed_fu 之](https://github.com/mbleigh/seed-fu)类的东西来管理种子数据。我还添加了一个 rake 任务以在每次部署时执行种子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:06:25.953

将 find_or_create 与数据数组一起使用：

```
category_data = [
  { name: 'business' },
  { name: 'sport' }
]

category_data.each do |d|
  Category.find_or_create_by(d)
end 
```

编辑：抱歉，这是 Rails 4 中的语法...

```
category_data.each do |d|
  Category.where(d).first_or_create()
end 
```

# php - Magento 结帐成功页面上的变量

> ID：13159663
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:14.847
> 
> 标签：php, magento

我正在尝试在我的 Magento 网站上的成功页面上设置投资回报率。

为此，我需要一个来自顺序的变量：

*   **PRODUCT_ID** - 这应该是一个包含订单中所有产品的数组

到目前为止，我已经尝试了以下代码：

```
<?php
    $order = Mage::getModel('sales/order')->load($this->getOrderId());
    $items = $order->getAllItems();
    $itemcount=count($items);
    $name=array();
    $ids=array();
 ?>

<?php foreach ($items as $itemId => $item) { 
   $ids[]=$item->getProductId();
} /* PRODUCT_ID - not showing anything */?> 
```

提前谢谢你的帮助！

多姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:16:48.320

$this->getOrderId() 给你的是 increment_id，而不是订单的 entity_id。您可以通过以下方式加载订单：

```
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId()); 
```

订单的实际 entity_id 存储在会话中：

```
Mage::getSingleton('checkout/session')->getLastOrderId() 
```

# colors - 如何更改操作系统的颜色值

> ID：13159666
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:18.700
> 
> 标签：colors, operating-system, image-manipulation, gpu

我正在研究一个学校项目。该项目是开发一个可以改变屏幕颜色的程序（操作系统以及在其上运行的所有程序）。最终产品应该是能够通过输入改变颜色的单个程序（即增加原色的存在性，例如添加 10% RED），并且是一种控制色盲的实验方法。我已经完成了理论生物学研究，现在我正在研究这种应用程序的实际部署。

我没有设置单一的编程语言，因为我不知道哪种语言最适合，比如说，Windows 7 环境。（例如，哪种语言具有最简单/最快的函数调用）

我打算编写的一些函数调用示例：

*   GetColorValues（返回有关屏幕像素正在显示的当前颜色的数据）
*   ProcessColorValues（对上述函数返回的所有相应颜色的简单修改）
*   SetColorValues（将修改后的颜色返回到屏幕上各自的位置）

我希望能够在将数据通过管道传输到屏幕时拦截数据，以保持处理顺畅。

从技术上讲，我真的不知道从哪里开始。我什至不知道我是否应该查看操作系统或显卡的驱动程序。

我希望有人可以指导我并告诉我应该寻找什么，或者在哪里可以找到这些。

谢谢阅读。

阿尔诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:16:23.907

Windows[监视器配置函数](http://msdn.microsoft.com/en-us/library/ms775232.aspx)可以是一个起点 - 例如[SetMonitorRedGreenOrBlueGain](http://msdn.microsoft.com/en-us/library/ms775246.aspx)函数来增强特定颜色。您应该能够使用[PInvoke从 C# 或 VB.Net 调用这些函数](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)

# excel - 如何使用 VBA 读取嵌套表值？

> ID：13159667
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:24.820
> 
> 标签：excel, web-scraping, vba

有人在这里帮助我说如何使用 Excel VBA 从第三方应用程序读取嵌套的 html 表值？作为下面的示例，我粘贴了 HTML 源代码的一部分，我想在其中读取所有值并将其存储到 excel 中。但是这里所有的都是他们使用的嵌套表，并且这些表也没有任何名称在我见过的html源代码中。

```
<td>
<table cellspacing="1" cellpadding="0" class="data">
<tr class="colhead">
<th colspan="3">Expression</th>
 </tr>
<tr class="colhead">
<th>Field</th>
<th>Operator</th>
<th>Answer</th>
</tr>
<tr class="rowLight">
<td width="40%">        
Location Attributes:  LOC - Sub Commodity
</td>
<td width="20%">
= 
</td>
<td width="40%">
Abrasives
</td>
</tr>
<tr class="rowDark">
<td width="40%">
Location Attributes:  LOC - Commodity Tier1
</td>
<td width="20%">
= 
</td>
<td width="40%">
Advertising, Sales &amp; Promotion
</td>
</tr> 
```

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:48:32.013

请在下面找到代码：

```
Option Explicit 

Sub TableExample() 
    Dim IE As Object 
    Dim doc As Object 
    Dim strURL As String 

    strURL = "[URL="http://example.comwww.dectech.org/football/index.php"]http://example.com[/URL]" ' replace with URL of your choice

    Set IE = CreateObject("InternetExplorer.Application") 
    With IE 
         '.Visible = True

        .navigate strURL 
        Do Until .ReadyState = 4: DoEvents: Loop 
            Do While .Busy: DoEvents: Loop 
                Set doc = IE.Document 
                GetAllTables doc 

                .Quit 
            End With 
        End Sub 

        Sub GetAllTables(doc As Object) 

             ' get all the tables from a webpage document, doc, and put them in a new worksheet

            Dim ws As Worksheet 
            Dim rng As Range 
            Dim tbl As Object 
            Dim rw As Object 
            Dim cl As Object 
            Dim tabno As Long 
            Dim nextrow As Long 
            Dim I As Long 

            Set ws = Worksheets.Add 

            For Each tbl In doc.getElementsByTagName("TABLE") 
                tabno = tabno + 1 
                nextrow = nextrow + 1 
                Set rng = ws.Range("B" & nextrow) 
                rng.Offset(, -1) = "Table " & tabno 
                For Each rw In tbl.Rows 
                    For Each cl In rw.Cells 
                        rng.Value = cl.outerText 
                        Set rng = rng.Offset(, 1) 
                        I = I + 1 
                    Next cl 
                    nextrow = nextrow + 1 
                    Set rng = rng.Offset(1, -I) 
                    I = 0 
                Next rw 
            Next tbl 

            ws.Cells.ClearFormats 

        End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:33:33.843

这就是我阅读 HTML 表格的方式：

```
Sub ReadHTMLtable()
Dim htmldb As New ADODB.Connection
Dim htmlcmd As New ADODB.Command
Dim rs As New ADODB.Recordset

With htmldb
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=Z:\filename.html;Extended Properties=""HTML Import;HDR=YES;IMEX=1"""
    .Open
End With

Set htmlcmd.ActiveConnection = htmldb
htmlcmd.CommandType = adCmdText
htmlcmd.CommandText = "Select * from [table]"
rs.CursorLocation = adUseClient
rs.CursorType = adOpenDynamic
rs.LockType = adLockOptimistic
rs.Open htmlcmd

'process rs here

End Sub 
```

这使用 ADO，但它应该与 DAO 相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:47:00.823

这需要将引用设置为`Microsoft HTML Object Library`和`Microsoft Internet Controls`

```
Sub Extract_TD_text()

    Dim URL As String
    Dim IE As InternetExplorer
    Dim HTMLdoc As HTMLDocument
    Dim TDelements As IHTMLElementCollection
    Dim TDelement As HTMLTableCell
    Dim r As Long

    'Saved from www vbaexpress com/forum/forumdisplay.php?f=17
    URL = "your file pathe/URL"

    Set IE = New InternetExplorer

    With IE
        .navigate URL
        .Visible = True

        'Wait for page to load
        While .Busy Or .readyState <> READYSTATE_COMPLETE: DoEvents: Wend

        Set HTMLdoc = .document
    End With

    Set TDelements = HTMLdoc.getElementsByTagName("TD")

    Sheet1.Cells.ClearContents

    r = 1
    For Each TDelement In TDelements
        'Look for required TD elements - this check is specific to VBA Express forum - modify as required
            If TDelement.ParentNode.ParentNode.ParentNode.Title = "table you want's title" Then
                Sheet1.Range("A1").Offset(r, 0).Formula = "=" & Chr(34) & TDelement.innerText & Chr(34)
                r = r + 1
            End If
    Next

    IE.Quit
    Set IE = Nothing  
End Sub 
```

我基于[此页面](http://www.vbaexpress.com/forum/showthread.php?t=31831)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T16:43:55.047

我到处寻找这个问题的答案。我终于找到了实际上是通过录制宏的解决方案。我知道，你们都认为你在这之上，但它实际上是最好的方法。在此处查看完整的帖子：[http](http://automatic-office.com/?p=344) ://automatic-office.com/?p=344 简而言之，您想要记录宏并转到数据 --> 从 web 并导航到您的网站并选择您想要的表格。
我过去使用过上述解决方案“通过 id 获取元素”类型的东西，它对于一些元素来说非常有用，但是如果你想要一个完整的表格，并且你不是超级经验，只需记录一个宏。不要告诉你的朋友，然后重新格式化它，让它看起来像你自己的作品，这样没人知道你使用了宏工具；）

代码看起来像这样（包括所有多余的默认属性设置为其默认值，记录宏为您所做的......找出哪些是额外的并删除它们

```
Sub Macro1()
 With ActiveSheet.QueryTables.Add(Connection:= _
 “URL;http://w1.weather.gov/obhistory/KFRI.html”, Destination:=Range(“$D$4″))
 .Name = “KFRI”
 .FieldNames = True
 .RowNumbers = False
 .FillAdjacentFormulas = False
 .PreserveFormatting = True
 .RefreshOnFileOpen = False
 .BackgroundQuery = True
 .RefreshStyle = xlInsertDeleteCells
 .SavePassword = False
 .SaveData = True
 .AdjustColumnWidth = True
 .RefreshPeriod = 0
 .WebSelectionType = xlSpecifiedTables
 .WebFormatting = xlWebFormattingNone
 .WebTables = “4″
 .WebPreFormattedTextToColumns = True
 .WebConsecutiveDelimitersAsOne = True
 .WebSingleBlockTextImport = False
 .WebDisableDateRecognition = False
 .WebDisableRedirections = False
 .Refresh BackgroundQuery:=False
 End With
 End Sub 
```

享受

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T05:42:31.807

这是另一种方式。棘手的是，如果您有一个嵌套表，则必须获取父容器，无论是 div 还是表。在 IE 或 Chrome 中使用 F12 开发人员工具并按自己的方式工作。在下面的示例中，有一个包含表格的 div。在问题中给出的示例中，有一个表包含一个表，因此您必须找到该父表并使用与此类似的代码来获取子表。希望有帮助。

```
 stabledata = ""
     Set oTbl = odiv.getElementsByTagName("TABLE").Item(0)
     Set oThead = odiv.getElementsByTagName("THEAD").Item(0)
     Set oTRows = oThead.getElementsByTagName("TR").Item(0)
     Set oTds = oTRows.getElementsByTagName("TH")

     For Each oTd In oTds
        DoEvents

        stabledata = stabledata & oTd.innertext & Chr(9)

     Next oTd
     stabledata = stabledata & vbCrLf
     Set oTBody = odiv.getElementsByTagName("TBODY").Item(0)
     Set oTRows = oTBody.getElementsByTagName("TR")
     For Each oTRow In oTRows
        DoEvents
        Set oTds = oTRow.getElementsByTagName("TD")
        For Each oTd In oTds
            DoEvents

            stabledata = stabledata & oTd.innertext & Chr(9)

        Next oTd

        stabledata = stabledata & vbCrLf

     Next oTRow 
```

# json - 带有特殊字符的 Json 键 ( $.getJson )

> ID：13159669
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:29.890
> 
> 标签：json, key, special-characters, getjson

我遇到了这个问题：我尝试将 .json 文件中的数据加载到我的网站，但我遇到了标题中的特殊字符（Ó、Í、É、空格）的问题。我只能更改 .HTML 文件。

这是.html：[http ://www.lukcian.x10.mx/json5.html](http://www.lukcian.x10.mx/json5.html)

这是.json：[http ://www.lukcian.x10.mx/json/bibliotecas.json](http://www.lukcian.x10.mx/json/bibliotecas.json)

谢谢

这是示例：

**.json：**

```
{
    "Bibliotecas": [
        {
            "BIBLIOTECA": "Biblioteca General de Navarra ",
            "DIRECCIÓN ": "Plaza de San Francisco",
            "COD. POSTAL": 31001,
            "POBLACIÓN": "Pamplona",
            "TELÉFONO": 848427797,
             ..................... 
```

**.html：**

```
<!DOCTYPE HTML> 
<html>
    <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">

    <title>JSON multiple zombies
    </title> 

    <script src="HostFiles/jquery.js"></script>
    <link href="reset.css" rel="stylesheet" type="text/css" media="screen">

    <script>

        $(document).ready(function() {
                 $.getJSON('json/bibliotecas.json', function(json) { 

                 $.each(json.Bibliotecas, function () {

                 $('<article class="json"></article>').append(

                 '<p> ' + this.BIBLIOTECA + '</p>'  + 
                 '<p> ' + this["DIRECCIÓN "] + '</p>' + 
                 '<p> ' + this.POBLACIÓN + '</p>' + 
                 '<p> ' + this.TELÉFONO + '</p>'  + 

                 '</br></br>'
                 ).appendTo('body');

    });          

  });

});

    </script>

</head> 
<body> 

</body>
    </html> 
```

**结果：**

```
Biblioteca General de Navarra

undefined

undefined

undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:14:28.260

您的字符编码有问题。我也尝试过使用 jQuery.ajax 设置适当的字符编码，但是不行。

如果您使用适用于 Chrome 的 Dev HTTP Client 插件检查[JSON 源代码](http://www.lukcian.x10.mx/json/bibliotecas.json)，您将看到返回的内容。

两种可能的解决方案：

1.  正确编码 JSON 源，以便它使用 HTML 实体（我强烈建议使用此解决方案）
2.  为 JSON 源发送正确的内容类型，很可能是 UTF-8

# 3d - 从校准的相机图像进行 3D 重建

> ID：13159673
> 
> 赞同：5
> 
> 时间：2012-10-31T13:57:45.540
> 
> 标签：3d, computer-vision, triangulation, 3d-reconstruction

我正在研究 3d 重建。现在当我考虑一对图像时。我有一组对应的点。我有我的相机详细信息。例如我有焦点细节，旋转和平移矩阵（4 * 4）。我想以 3D（三角测量）投影我的观点。因此，据我所知，它通过因子代数非常简单。但我还是要理解清楚。有谁知道如何遵循这个？我正在使用matlab，所以我需要实现它！我可能又太宽泛了或其他什么。但是请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:41:25.380

您需要根据已知的相机属性计算相机矩阵；这是一个缩放投影矩阵，将 3D 均匀点映射到 2D 像素坐标上。（请注意，如果您想要获得不错的准确度，您还需要测量并系统地纠正相机的镜头失真，但这是次要的细节。）

然后，将您的相机矩阵与您的姿势矩阵（您提到的 4x4 旋转/平移矩阵）相乘，得到一个矩阵（比如说`T`总），将您选择的 3D 坐标系中的一个点投影到相机的（校正）像素坐标中：

```
pixel vector Q.x  =  T * point P.x
             Q.y               P.y
             Q.z               P.z 
             Q.w                1

pixel coordinates  =  (Q.x/Q.w, Q.y/Q.w)
"pixel depth" = Q.z/Q.w 
```

您可以反转此矩阵，并通过选择两个深度使用它将像素坐标投影到 3D 射线中：一个在相机位置，另一个不在相机位置（最好选择单位深度或无穷远点）。你不能指望你的光线完全相交，但你可以根据两条对应的光线最近的位置来获得一个最合适的位置；更一般地，您可以将任意数量的光线的交集视为最小二乘问题（理想情况下，以每条光线的预期误差为条件）。

# php - PHP Arrays - 获得某些工作每月的总小时数

> ID：13159677
> 
> 赞同：0
> 
> 时间：2012-10-31T13:57:53.050
> 
> 标签：php, arrays

我将不胜感激 php 数组的一些帮助。我需要创建一个图表，但我似乎无法按照我希望的方式从数据库中获取值。所以基本上我需要的是某些工作每月的小时数。数据库看起来像这样：

```
Date       |   Job   | Hours
2012-01-01 |  104    |   8.5 
```

每个工作都有不同的编号，但我希望这会有所帮助。

我需要得到每个月花在一份工作上的小时数。到目前为止，我已经制作了几个月的数组并循环遍历它们：

```
 $month_date_array = array('01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12');
 foreach ($month_date_array as $month) {
 $sql = "SELECT * FROM database WHERE date LIKE '%-$month-%'";
 $result = mysql_query($sql) or die (mysql_error());
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
      $job[] = $row['job'];
    }
} 
```

Okei，我做了一些更改，我将更新我的问题：年份确实很重要，它不能将 2011 年和 2012 年组合在一起。年份来自下拉菜单 - 用户选择年份。接下来我添加了一个工作数组，因为我刚刚发现我不能接受所有工作，所以工作数组看起来像这样：

```
$job = array('22', '6', '12', '55'); 
```

基本上我想知道如何获得某人每月做一份工作所花费的时间总和。而且我不想用 SQL 来做，我需要某种数组，因为以后我必须把一个图表放在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:06:51.727

如果您想学习如何操作数组并执行此操作：

```
<?php
$jobs = array();
$month_date_array = array('01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12');
foreach ($month_date_array as $month) {
    $sql = "SELECT * FROM database WHERE date LIKE '%-$month-%'";
    $result = mysql_query($sql) or die (mysql_error());
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $jobs[$row['job']][$month] += $row['hours'];
    }
} 
```

但是要知道，这实际上是将所有年份组合在一起。换句话说，如果这些日期存在，那么 2011 年 11 月、2012 年和 2013 年将被加在一起。

您也可以仅使用 SQL 进行此分组和添加。

[http://sqlfiddle.com/#!2/416d9/5/0](http://sqlfiddle.com/#!2/416d9/5/0)

```
# Group by Month and Year
SELECT YEAR(`Date`) as `Year`, MONTH(`Date`) AS `Month`, `Job`, SUM(`Hours`)
FROM `your_table`
GROUP BY `Year`, `Month`, `Job` 
```

或[http://sqlfiddle.com/#!2/416d9/6/0](http://sqlfiddle.com/#!2/416d9/6/0)

```
# Group by Month combining the Years
SELECT MONTH(`Date`) AS `Month`, `Job`, SUM(`Hours`)
FROM `your_table`
GROUP BY `Month`, `Job` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:02:20.903

相当低效，当你可以

```
SELECT month(date) AS month, COUNT(*) AS cnt
FROM database
GROUP BY month(date); 
```

一个查询可以完成您的查询循环所做的所有事情，而且开销要少得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:08:00.853

我不同意大多数其他答案，因为它们也将其他年份的相同月份分组。这样的事情会更有效率。

```
SELECT CAST(DATE_FORMAT(`Date`, '%Y-%m-01') AS DATE) month, SUM(`Hours`) hours
FROM `your_table`
WHERE `Job` = 104
GROUP BY month 
```

[http://sqlfiddle.com/#!2/8cf63/1](http://sqlfiddle.com/#!2/8cf63/1)

这种技术会将您的日期“四舍五入”到该月的第一天；因此，如果您在这些日期进行 GROUP，则您将按月份进行分组。这很好，因为它将年份和月份组合成一列，以便在必要时轻松排序、比较和连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:02:22.383

你必须像这样的机会 sql 查询：

```
$sql = "SELECT * FROM database WHERE MONTH(date) = '".$month."'";
 $result = mysql_query($sql) or die (mysql_error());

    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
      $job[] = $row['job'];
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:04:47.130

下面的查询怎么样：

```
SELECT SUM(hours) FROM database 
WHERE DATE_FORMAT(date,'%m' ) = $month
GROUP BY  DATE_FORMAT(date,'%m' ); 
```

# python - 如何更新 mongoDb 中的特定值

> ID：13159682
> 
> 赞同：1
> 
> 时间：2012-10-31T13:58:12.537
> 
> 标签：python, mongodb

我必须针对特定的 email-id 更新密码字段。

运行此查询时：

`db.user_account.update({"password":"1233465"},{$set:{"password": "1233"}}`

它将更新`user_account`（集合）中的每个密码值，但我想根据电子邮件 ID 过滤集合，然后在特定的电子邮件 ID 上我想使用 python 用新密码更新旧密码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:16:02.380

的第一个参数[`update`](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)是过滤查询。假设您使用`pymongo`：

`db.user_account.update({"email-id": "specific"}, {"$set": {"password": "1233"}})`

# android - 安卓 USB 主机

> ID：13159688
> 
> 赞同：0
> 
> 时间：2012-10-31T13:58:35.597
> 
> 标签：android, usb

我在有根设备上使用 Android (4.1) USB Host API 功能。我想知道如何从物理总线和设备名称中获取附加名称“/dev/ttyUSBX”。即/dev/bus/usb/001/006。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:12:43.270

如果您已经拥有 UsbDevice 对象，则可以使用[getDeviceName()](http://developer.android.com/reference/android/hardware/usb/UsbDevice.html#getDeviceName%28%29)来获取设备文件。根据文档：

> 返回设备的名称。在标准实现中，这是设备文件在 usbfs 文件系统中的路径。

# parsing - Youtube feed api json 不提供标签:(

> ID：13159690
> 
> 赞同：0
> 
> 时间：2012-10-31T13:58:38.887
> 
> 标签：parsing, youtube, tags, json-c

我想解析这些标签。早些时候，几个月前，他给了我一个标签，但现在不会了。我的查询看起来像：

[https://gdata.youtube.com/feeds/api/videos?author=MYAYTHOR&v=2&alt=jsonc](https://gdata.youtube.com/feeds/api/videos?author=MYAYTHOR&v=2&alt=jsonc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:37:18.477

根据 Youtube API 新闻，他们从提要中删除了除上传者之外的所有人的标签，请参阅此处的详细信息[http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

# php - 拆分表并合并

> ID：13159697
> 
> 赞同：0
> 
> 时间：2012-10-31T13:58:57.527
> 
> 标签：php, arrays

```
<?php

$array = ('1', '2', ... , '30000');

$return = myFunction($array); // max 200 elements for one query

foreach($return as $r){    //this must be call only one
  //doSomething;
} 
```

我有 30000 个元素的数组。**我必须在函数myFunction**中使用那里的元素，但是这个函数最多只能为一个查询获取 200 个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:14:29.073

您需要使用 foreach 遍历巨大的数组并将元素存储到帮助数组中 - 当您达到函数的限制时，调用将帮助数组作为参数传递给它的函数并从空帮助数组重新开始......如果你需要组合数组（函数调用的结果）使用[array_merge](http://cz2.php.net/manual/en/function.array-merge.php)

# java - 需要替换包含 . （点）带空白

> ID：13159704
> 
> 赞同：1
> 
> 时间：2012-10-31T13:59:06.593
> 
> 标签：java, xml, xslt, text

**description/@text 有一个包含 .dot 的句子，我想用空格替换它。**

```
 <xsl:call-template name="playByPlayJson">
                <xsl:with-param name="sequenceNumber" select="position()"/>

        <xsl:with-param name="summaryPhrase" select="description/@text"/>
        <xsl:with-param name="outs" select="@outs-aft"/>
                <xsl:with-param name="baseSit" select="@base-sit-aft"/>
                <xsl:with-param name="hasScored" select="@scored"/>
                <xsl:with-param name="hasOutOccured" select="@outs-aft - @outs-bef &gt; 0"/>
                <xsl:with-param name="inning" select="../inning/@number"/>
                <xsl:with-param name="inningHalves" select="substring(../inning/@half, 1, 1)"/>
                <xsl:with-param name="awayScore" select="@vis-score"/>
                <xsl:with-param name="homeScore" select="@home-score"/>
                <xsl:with-param name="eventAt" select="$eventAt"/>
                <xsl:with-param name="type" select="@id"/>
            </xsl:call-template>

            <xsl:if test="$eventAt = ''">
                <xsl:if test="position() != last()">,</xsl:if>
            </xsl:if>
        </xsl:for-each>
    <xsl:text>]</xsl:text> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:05:10.790

尝试;

```
<xsl:with-param name="summaryPhrase" select="translate(description/@text,'.',' ')"/> 
```

# ruby-on-rails-3 - Heroku错误的分析宝石

> ID：13159707
> 
> 赞同：1
> 
> 时间：2012-10-31T13:59:22.133
> 
> 标签：ruby-on-rails-3, analytical

早上好。我正在尝试使用这个宝石：

[https://github.com/jkrall/analytical](https://github.com/jkrall/analytical)

在 Heroku 上。它在我的本地环境中运行得很好，但在 Heroku 上却出现了：

```
2012-10-31T13:52:28+00:00 app[web.1]: /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 4, col 5: `' (ArgumentError)
2012-10-31T13:52:28+00:00 app[web.1]:   from /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
2012-10-31T13:52:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/analytical-3.0.12/lib/analytical.rb:14:in `block in analytical'
2012-10-31T13:52:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/analytical-3.0.12/lib/analytical.rb:13:in `open'
2012-10-31T13:52:28+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/analytical-3.0.12/lib/analytical.rb:13:in `analytical'
2012-10-31T13:52:28+00:00 app[web.1]:   from /app/app/controllers/api_controller.rb:1:in `<top (required)>' 
```

根据文档，它所引用的“api_controller.rb”中的行只是初始化该控制器中的 gem 的“分析”语句。

尝试将“分析”放在 application_controller 中，但它也出错了（在开发和登台中）。

完全被难住了。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:46:18.933

当我遇到类似问题时，问题原来是我的`config/analytical.yml`文件中的语法错误。在开发过程中，我可以将我的 Google Analytics ID 放在不带引号的位置，但在 Heroku 上却出现了这个错误。所以代替这个：

```
production:
  google:
    key: UA-XXXXXXXX-X 
```

我这样做了：

```
production:
  google:
    key: "UA-XXXXXXXX-X" 
```

此外，您可能需要确保在最后一行之后有一个尾随回车符

# oracle - 在表名中使用替换变量

> ID：13159715
> 
> 赞同：1
> 
> 时间：2012-10-31T13:59:32.773
> 
> 标签：oracle, plsql, substitution

我的问题很简单，我想知道我想做的事情是否可以完成。

我有这样的表：`detailcro1, detailcro2, detailcro3`...我想为一些自动过程使用替换变量。

我写

```
DEFINE TT = 'detailcro'
select * from &TT||'2'; 
```

结果我有`ORA-00933:.`

我可以创建这样的查询吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:09:50.157

您需要在变量末尾使用点符号

```
SQL> select * from &TT.l;
Enter value for tt: dua
old   1: select * from &TT.l
new   1: select * from dual

D
-
X 
```

所以

```
SQL> DEFINE TT = 'detailcro';
SQL> select * from &TT.2;
old   1: select * from &TT.2
new   1: select * from detailcro2

no rows selected 
```

# python - 使用 Mac OS X 10.7.5 在 python 中导入 opencv 时出现分段错误

> ID：13159716
> 
> 赞同：6
> 
> 时间：2012-10-31T13:59:37.693
> 
> 标签：python, macos, opencv

我在 python 2.7.1 中安装了 opencv 2.4.2，一切正常。现在我使用来自 python.org 的正确 osx 安装程序将 python 更新到 2.7.3，当尝试导入 opencv 时，它告诉我没有名为 cv 的模块（因为 cv2 是相同的）。所以我将opencv升级到2.4.3，在安装过程中我没有收到错误，但是当我尝试导入opencv时我收到：

```
segmentation fault: 11 
```

我试图将`PYTHON_PACKAGES_PATH`cmake 文件更改为正确的位置（旧位置不存在），但我收到了同样的错误！

**解决方案：**

我已经找到了解决方案！我回滚到 python 2.7.1，为了在我的主目录“/Users/emanuel”中执行此操作，我已经使用 .bash_profile.pysave 的内容修改了 .bash_profile，这是我旧 bash 的备份文件。安装后我有这个架构：

```
export PYTHONPATH=/usr/local/lib/python2.7/site-packages/:

# Setting PATH for Python 2.7
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH
export PYTHONPATH=/usr/local/lib/python2.7/site-packages/ 
```

我只是在导出指令后删除了所有内容：

```
export PYTHONPATH=/usr/local/lib/python2.7/site-packages/: 
```

现在一切正常！

# java - 正则表达式匹配java中的文件路径

> ID：13159717
> 
> 赞同：0
> 
> 时间：2012-10-31T13:59:40.183
> 
> 标签：java, regex

> **可能重复：**
> [C# - 文件路径的正则表达式，例如 C:\test\test.exe](https://stackoverflow.com/questions/6416065/c-sharp-regex-for-file-paths-e-g-c-test-test-exe)

我试图创建一个正则表达式来匹配java中的文件路径

喜欢`C:/WINDOWS/Profiles/myComputer/Desktop/test.xml`

请帮助我。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:45:01.900

你可以试试这个

```
 (?:[\w]\:|\\)(\\[a-z_\-\s0-9\.]+)+\.(?i)(txt|xml|gif|pdf|doc|docx|xls|xlsx)$ 
```

解释：

```
^(?:[\w]\:|\\) -- Begin with x:\ or \\
[a-z_\-\s0-9\.] -- valid characters are a-z| 0-9|-|.|_ (you can add more)
(?i) -- regular expression case-insensitive
(txt|xml|gif|pdf|doc|docx|xls|xlsx) -- Valid extension (you can add more) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:02:29.577

你可以使用这样的东西

```
"([a-zA-Z]:)?(\\\\[a-zA-Z0-9_.-]+)+\\\\?" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:08:50.353

```
Matcher ma = Pattern.compile("([a-zA-Z]:(?:/[\\w\\s]+)*/[\\w\\s]+\\.\\w+)")
                .matcher("C:/WINDOWS/Profiles/myComputer/Desktop/test.xml");
while (ma.find()) {
    System.out.println(ma.group(1));
} 
```

这是一个适用于您的案例的示例。也许您需要添加一些不允许的字符，但它只是在 [\w\s.] <- 中添加字符，也可以接受点。

# wpf - VSTO Office (Excel) 加载项 - WPF XAML 样式、ResourceDictionary

> ID：13159722
> 
> 赞同：4
> 
> 时间：2012-10-31T14:00:02.227
> 
> 标签：wpf, excel, windows-installer, vsto

我想使用 Windows Installer 部署我的 VSTO Office Excel 加载项。我创建了安装程序并在虚拟 PC 上安装了加载项，以对其进行测试。现在我遇到了问题，样式不起作用，但是如果我在 Visual Studio 中调试或运行它，它确实可以工作。

例如，我创建了这样的样式：

```
<Style TargetType="{x:Type Button}">
     <Style.Setters>
        <Setter Property="Background" Value="Snow" />
        <Setter Property="Width" Value="50" />
        <Setter Property="Height" Value="25" />
        <Setter Property="Margin" Value="5" />
     </Style.Setters>
</Style> 
```

现在我将 ResourceDictionary（其中包含样式）与窗口的 ResourceDictionary 合并：

```
<Window.Resources>
      <ResourceDictionary>
         <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/assembly;component/UI/Resources/Style.xaml" />
         </ResourceDictionary.MergedDictionaries>
      </ResourceDictionary>
</Window.Resources> 
```

它仅在设置后才有效，当我使用样式的键并将样式直接设置为控件时。

* * *

这是带有样式 (Styles.xaml) 的 ResourceDictionary：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<Style TargetType="{x:Type Button}">
     <Style.Setters>
        <Setter Property="Background" Value="Snow" />
        <Setter Property="Width" Value="50" />
        <Setter Property="Height" Value="25" />
        <Setter Property="Margin" Value="5" />
     </Style.Setters>
</Style>

</ResourceDictionary> 
```

这是“合并”-ResourceDictionary：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <ResourceDictionary.MergedDictionaries>
      <ResourceDictionary Source="/ExcelAddIn;component/UI/Resources/Style/Brushes.xaml" />
      <ResourceDictionary Source="/ExcelAddIn;component/UI/Resources/Style/ControlTemplates.xaml" />
      <ResourceDictionary Source="/ExcelAddIn;component/UI/Resources/Style/Styles.xaml" />
      <ResourceDictionary Source="/ExcelAddIn;component/UI/Resources/Style/DataTemplates.xaml" />
   </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

要将 ResourceDictionary 合并到 Window-Resources，我尝试使用：

这些在我使用 Visual Studio 调试/运行它时工作，但在安装后不工作：

```
<ResourceDictionary Source="/ExcelAddIn;component/UI/Resources/Style/Skin.xaml" />

<ResourceDictionary Source="pack://application:,,,/ExcelAddIn;component/UI/Resources/Style/Skin.xaml" />

<ResourceDictionary Source="pack://application:,,,/ExcelAddIn;v1.0.0.0;component/UI/Resources/Style/Skin.xaml" /> 
```

这些通常不起作用：

```
<ResourceDictionary Source="pack://application:,,,/UI/Resources/Style/Skin.xaml" />

<ResourceDictionary Source="/UI/Resources/Style/Skin.xaml" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:43:02.787

我认为 Source 属性中的 uri 是问题所在。尝试使用[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# javascript - 通过 CORS 加载远程 AMD 兼容模块？

> ID：13159725
> 
> 赞同：0
> 
> 时间：2012-10-31T14:00:07.173
> 
> 标签：javascript, ajax, cross-domain, amd, js-amd

我目前没有在我的任何项目中使用 AMD，但我确实必须动态加载大量 javascript 文件，因为用户可以在运行时加载可能在 3rd 方站点上定义的插件。

然而，我正在研究 AMD 如何帮助我，因为我目前使用 yepnope 动态加载几乎所有资源，这工作正常，当我想加载远程插件时，我可以动态告诉 yepnope 去获取描述符，然后获取所需的文件（这是一个手卷插件系统，所以不要太担心它）。因此，该场景将使用大量本地模块，但也允许动态加载新模块。

现在根据我的理解，就 AMD 而言，您可以在文件中编写定义，然后包含一些与 AMD 兼容的加载器，并在您想要访问代码中的底层模块的任何地方（在回调中）使用您的 require 方法。现在答案可能最终变得依赖于框架，因为我相信 AMD 兼容的加载器处理映射`require("some/module/name")`到`some-module-name.js`或任何它，所以我假设有一个基本路径告诉加载器在哪里寻找底层文件，所以制作一个假设所有加载器都是这种情况，您如何应对想要加载远离默认路径的模块的用例？

如果这是特定于框架的，我再次道歉，并且非常乐意将问题更改为“你如何使用 CURL 等做到这一点”，但由于我对它没有 100% 的理解，我猜它会落入AMD 兼容气泡。

# linux - 使用批处理文件从 Windows 机器在远程 Linux 机器上运行自定义命令

> ID：13159726
> 
> 赞同：2
> 
> 时间：2012-10-31T14:00:08.077
> 
> 标签：linux, windows, batch-file

我想使用批处理文件从我的 Windows 机器上在远程 Linux 机器上运行自定义命令。自定义命令返回整数值，批处理文件将进一步使用。我怎样才能做到这一点？

现在，我正在`winscp`从批处理文件调用并将命令的输出`winscp`远程写入文件，然后使用`get`命令`winscp`，我正在将该文件下载到我的 Windows 机器中。之后，我从批处理文件中读取该文件。好的，但是过程很长。

我的目标是获得可用于批处理脚本的命令输出，以便可以在批处理文件中进一步使用该值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:52:57.553

另一个选项是 plink.exe。它是 PuTTy 的命令行版本[，](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)如果您安装了 PuTTy，那么您已经有了 plink（与 PuTTy 在同一目录中）

从 Batch 来看，这看起来像这样：

```
%PATH_TO_FILE%\plink.exe -batch root@10.0.0.1 "remote command"
SET RETVAL=%ERRORLEVEL%
IF NOT ["%RETVAL"]==["0"] (
    ECHO "Remote Command failed"
) ELSE (
    ECHO "Command returned with exit code %RETVAL%
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:14:10.847

您可以使用 ssh 在 Linux 机器上运行远程命令。[您可以从http://sshwindows.sourceforge.net/](http://sshwindows.sourceforge.net/)获取 openssh 的命令行 windows 端口

然后，在您的批处理文件中，您只需添加：

```
ssh linuxserver command-name 
```

这将返回命令名的输出

例如：

```
ssh linuxserver uname 
```

输出：“Linux”

希望这可以帮助。

# linux - 为 mod_perl 更改 perl

> ID：13159728
> 
> 赞同：1
> 
> 时间：2012-10-31T14:00:11.137
> 
> 标签：linux, perl, mod-perl

我刚刚在我的 linux 网络服务器上安装了新版本的 perl（从 5.10.1 升级到 5.12.4），我希望一切都会顺利，但似乎没有。现在系统中默认的 perl 版本是新的，但是 mod_perl 仍然停留在旧版本上。我的问题是：我可以告诉 mod_perl 使用新版本的 perl，还是必须重新安装它？从我认为应该有一种方法来改变解释器而不是重新安装，但我还没有找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:02:53.150

mod_perl 需要针对它正在使用的任何版本的 Perl 构建（它已将编译的 perl 包含在其中）。您将需要安装 5.12.4 版本。

从长远来看，您可能需要考虑从 mod_perl 转移到 Plack/PSGI。

# jquery - 如何使用 jquery 选择特定的锚标记？

> ID：13159730
> 
> 赞同：4
> 
> 时间：2012-10-31T14:00:12.663
> 
> 标签：jquery, html

如您所见，我有两种类型的锚标签。

第一的 ：

```
<a>Link</a> 
```

第二：

```
<a href="http://facebook.com"></a>
<a href="http://twitter.com"></a> 
```

我只想`<a>Link</a>`使用 jquery 只选择这种类型的标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:01:57.850

```
$('a').filter(function(){
     return !$(this).attr('href');
}); 
```

工作示例：http: [//jsfiddle.net/3Sczq/](http://jsfiddle.net/3Sczq/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T14:08:57.647

您应该使用`:not`css 选择器：

```
$('a:not([href])') 
```

选择所有`a`没有属性的标签`href`

[jQuery 文档在这里](http://api.jquery.com/not-selector/)

# ubuntu - 服务器意外关闭网络连接gitlab和gitolite

> ID：13159731
> 
> 赞同：2
> 
> 时间：2012-10-31T14:00:19.320
> 
> 标签：ubuntu, gitolite, gitlab

我使用 remastersys 备份制作了一些 gitlab 和 gitolite 服务器的备份映像，并从映像文件重新安装。问题是 Windows 客户端无法连接到服务器。当我尝试克隆 repo 时，它说服务器意外关闭了网络连接。我不知道解决方案是什么，因为linux客户端没有问题。

当我尝试通过 git bash 克隆存储库时，它说“没有主机密钥 alg”，我不知道这是什么意思。

我使用的服务器是 ubuntu 12.04，windows 客户端是 windows 7 和 XP。我试图重新安装 ssh 但这没有帮助。有谁知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:46:42.323

它应该与 ssh 安装问题有关。例如，
[此线程描述：](http://forum.tinycorelinux.net/index.php?topic=4471.15)

> 我遇到了同样的问题；我会收到错误消息' `could not load host key: ...`'我尝试从头开始重新安装 ssh，所有这些东西 - 当我尝试从远程服务器（openbsd）登录时，它会拒绝我说“ **`no hostkey alg`**”......
> 
> 我发现我做错了，当我跑步时`init.d/openssh keygen`，我输入了密码。
> 当我使用空密码重新运行`openssh-keygen`时，它开始按预期工作。

* * *

[OP Sam Mie](https://stackoverflow.com/users/1688895/sam-mie)[在评论中](https://stackoverflow.com/questions/13159731/server-unexpectedly-closed-network-connection-gitlab-and-gitolite/13162862#comment17931806_13162862)补充道：

> 我发现我必须**禁用 SELinux**并且它可以工作。
> 看到[这个线程](http://www.linuxforums.org/forum/ubuntu-linux/159951-how-use-putty-connect-ubuntu-2.html)：

```
setenforce disable
or
setenforce 0 
```

> > 将其设置为`permissive`将防止`selinux`停止违反政策。
> > 它只会报告它，但仍然允许操作继续。
> 
> 哦，谢谢，我在文件中进行了配置，`/etc/selinux/config`现在可以使用`putty`.

# jquery - 如何简化和压缩重复的 jQuery 代码

> ID：13159735
> 
> 赞同：1
> 
> 时间：2012-10-31T14:00:28.370
> 
> 标签：jquery

我想单击一个链接并在内容列表中的两个内容块之间切换，以从显示内容到编辑内容。

我有以下代码片段：

```
<style type="text/css">
    div.show {display:block;}
    input.hide {display:none;}
</style>

<script type="text/javascript">
    $(document).ready(function(){
        $('#d-01').on('click', function() {
            $('#d-01-on').toggle();
            $('#d-01-off').toggle();
            $('#d-01-off').focus();
        });
         $('#d-02').on('click', function() {
            $('#d-02-on').toggle();
            $('#d-02-off').toggle();
            $('#d-02-off').focus();
        });
        $('#d-99').on('click', function() {
            $('#d-99-on').toggle();
            $('#d-99-off').toggle();
            $('#d-99-off').focus();
        });
   })
</script>

<a href="#" id="d-01">edit</a>
<div class="show" id="d-01-on">Some content</div>
<input class="hide" id="d-01-off" name="d-01" value="Some content" />

<a href="#" id="d-02">edit</a>
<div class="show" id="d-02-on">Some content</div>
<input class="hide" id="d-02-off" name="d-02" value="Some content" />

<a href="#" id="d-99">edit</a>
<div class="show" id="d-99-on">Some content</div>
<input class="hide" id="d-99-off" name="d-99" value="Some content" /> 
```

这可行，但我想让我的 jquery/javascript 代码更加动态而不是硬编码。我的 MySQL 表行会随着时间的推移而增长，我不想继续编辑我的脚本。

是否可以重写 jquery 代码以动态处理 ID 而不必创建单独的和冗余`on('click', function()`的？

感谢您的帮助。

[有关我对这个问题的最初问题，请参阅[如何在 jQuery 中切换]](https://stackoverflow.com/questions/13158276/how-to-toggle-in-jquery)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:16:42.953

我不确定我是否理解你想要的，但我走了：

首先添加一个 div 来包装 HTML 标记的每个重复部分，在此示例中，我添加了一个名为**content-wrapper**的类来更轻松地添加 jquery 点击事件：

```
<div class="content-wrapper">
    <a href="#" id="d-01">edit</a>
    <div class="show" id="d-01-on">Some content</div>
    <input class="hide" id="d-01-off" name="d-01" value="Some content" />
</div>

<div class="content-wrapper">
    <a href="#" id="d-02">edit</a>
    <div class="show" id="d-02-on">Some content</div>
    <input class="hide" id="d-02-off" name="d-02" value="Some content" />
</div>

<div class="content-wrapper">
    <a href="#" id="d-99">edit</a>
    <div class="show" id="d-03-on">Some content</div>
    <input class="hide" id="d-03-off" name="d-03" value="Some content" />
</div> 
```

然后我将JS修改为以下代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.content-wrapper a').on('click', function() {
            $(this).siblings().toggle();
            $(this).siblings('input').focus();
        });
   })
</script> 
```

JS 为 content-wrapper 的 div 内的每个锚点（一个标签）添加一个事件，然后当它被点击时，它会检查它的兄弟姐妹（它旁边的标签，如：div.show 和输入）并切换它们。我在第二个兄弟姐妹中添加了一个过滤器，以仅获取单击的锚点的输入并将其聚焦。

我没有测试它，但它应该可以工作。

# objective-c - 如何修复安装restkit ios错误？

> ID：13159736
> 
> 赞同：1
> 
> 时间：2012-10-31T14:00:29.150
> 
> 标签：objective-c, ios, restkit

在 xcode 4.5 上安装 restkit 时遇到以下问题，

**clang：错误：没有这样的文件或目录：'/Users/omar/Library/Developer/Xcode/DerivedData/MYApplication-bdmknibmydzygicvcnkavqemwxic/Build/Products/Debug-iphonesimulator/RestKit/RestKit'**

我阅读了故障排除手册，但它没有解决我的问题 [https://github.com/RestKit/RestKit/wiki/Installation-Troubleshooting](https://github.com/RestKit/RestKit/wiki/Installation-Troubleshooting)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:16:02.577

我通过下载文档中的restkit文件解决了我的问题，

然后从终端尝试更新restkit的git repo

*   打开终端并转到您的项目文件夹。
*   在项目中找到 restkit 文件夹。
*   类型：**git pull**。
*   现在 restkit 的主干将再次更新并加载所有更改或新添加的文件。

我希望这将解决任何面临同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T11:14:46.507

也许你同时添加了 Restkit.Framework 和 libRestKit.a。选择一个：libRestKit.a 用于 iOS，另一个用于 Max OS X

# java - 为什么 INSERT 查询在此 HttpServer 代码中不起作用

> ID：13159738
> 
> 赞同：2
> 
> 时间：2012-10-31T14:00:34.473
> 
> 标签：java, mysql, jdbc, insert

我试图为我的家庭作业制作一个小服务器。这是一个非常简单的项目，但我无法将一些变量（我从客户端以对象形式通过序列化获取）插入到数据库中。它显示没有错误！这就是我觉得奇怪的地方，客户也收到了没有问题的响应。

我的服务器类如下：

```
package server;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.OutputStream;
import java.net.InetSocketAddress;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import org.ietf.jgss.Oid;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

public class Server {

public static void main(String[] args) throws Exception {

    HttpServer server = HttpServer.create(new InetSocketAddress(3333), 0);

    server.createContext("/", new MyHandler());
    server.setExecutor(null); // creates a default executor
    server.start();
}

static class MyHandler implements HttpHandler {
    public void handle(HttpExchange t) throws IOException {
        ObjectInputStream ios = new ObjectInputStream(t.getRequestBody());
        final String url = "jdbc:mysql://localhost/httpServer";

        final String user = "root";

        final String password = "";

        try {
            Send oin = (Send) ios.readObject();

            String response = "Kjo eshte nje pergjigje nga serveri! \n"
                    + "Clienti me id "
                    + oin.getId()
                    + " dhe me emer "
                    + oin.getName()
                    + " ka pasur "
                    + oin.getAmount()
                    + "$ ne llogarine e tij ,por me pas ka terhequr "
                    + oin.getPaid()
                    + "$ nga llogaria \n"
                    + "Kjo terheqe eshte ruajtur ne database dhe tani gjendja e re eshte "
                    + (oin.getAmount() - oin.getPaid()) + "$ \n";
            t.sendResponseHeaders(200, response.length());
            OutputStream os = t.getResponseBody();
            os.write(response.getBytes());
            os.close();
            int id = oin.getId();
            String emri = oin.getName();
            int amount = oin.getAmount();
            int paid = oin.getPaid();
            try {
                Class.forName("com.mysql.jdbc.Driver");
                Connection con = DriverManager.getConnection(url, user,
                        password);

                try {
                    Statement s = con.createStatement();

                    s.executeUpdate("INSERT INTO person VALUES ('" + id
                            + "','" + emri + "','" + amount + "','" + paid
                            + "')");
                } catch (SQLException s) {

                    System.out
                            .println("Tabel or column or data type is not found!");
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

    }
}
   } 
```

你能帮我么 ？或者知道问题可能是什么？

编辑：也许我在客户端做错了什么：

```
package server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.net.HttpURLConnection;
import java.net.InetAddress;
import java.net.Socket;
import java.net.URL;

class Send implements Serializable {
// duhet te implementoje interfacin serizable ne menyre qe tja dergoj
// serverit
private static final long serialVersionUID = 1L;

public int getId() {
    return id;
}

public int getAmount() {
    return amount;
}

public int getPaid() {
    return paid;
}

int id = 1;
int amount = 2000;
int paid = 800;
String name = "Andi Domi";

public String getName() {
    return name;
}
    }

   public class Client {
public static void main(String[] args) throws Exception {

    try {

        URL url = new URL("http://localhost:3333");
        HttpURLConnection s = (HttpURLConnection) url.openConnection();
        s.setDoOutput(true);
        s.setDoInput(true);
        s.setRequestMethod("POST");
        s.setUseCaches(false);
        Send obj = new Send();
        ObjectOutputStream objOut = new ObjectOutputStream(
                s.getOutputStream());
        objOut.writeObject(obj);

        InputStream in = s.getInputStream();
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);
        int c;
        while ((c = br.read()) != -1) {
            System.out.print((char) c);
        }
        objOut.close();
        s.disconnect();
    } catch (IOException ex) {
        System.err.println(ex);
        System.err.print("gabimi eshte ketu");
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:03:56.080

在你的`executeUpdate`声明之后你需要做的。

```
con.commit(); 
```

保存交易。

**编辑：**根据聊天讨论，我们了解到命名的列`emri`实际上`Emri`在表中并且正在抛出：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'emri' in 'field list' 
```

更改名称可以解决问题。

* * *

现在与您的问题无关，您应该使用 a[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)并且应该关闭您的连接和语句

```
try {
  PreparedStatement s = con.prepareStatement("INSERT INTO person(id, emri, amount, paid) VALUES (?,?,?,?)");
  s.setInt(1,id);
  s.setString(2,emri);
  s.setInt(3,amount);
  s.setInt(4,paid);
  int count =  s.executeUpdate();
  con.commit();
} catch(Exception e){
  e.printStackTrace();
  //something bad happened rollback 
  //any uncommitted changes
  con.rollback();
} finally {
  if (con != null) {
    con.close();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:11:22.907

首先，使用**[准备好的语句^([docs])](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)**来避免`SQL INJECTION`

```
String sql = "INSERT INTO person VALUES (?,?,?,?)";
PreparedStatement prest = con.prepareStatement(sql);
prest.setString(1,id);
prest.setString(2,emri);    // or use setInt for integer
prest.setString(3,amount);  // or use setInt for integer
prest.setString(4,paid);
prest.executeUpdate() 
```

其次，如果值的数量与表中的总列数不匹配，它也会失败，因为您使用的是*隐式*类型的 INSERT 语句。要解决它，只需提供要存储值的列名，例如

```
String sql = "INSERT INTO person (col1, col2, col3, col4) VALUES (?,?,?,?)"; 
```

# c++ - 如何禁止临时工

> ID：13159739
> 
> 赞同：108
> 
> 时间：2012-10-31T14:00:38.823
> 
> 标签：c++

对于 Foo 类，有没有办法在不给它命名的情况下禁止构造它？

例如：

```
Foo("hi"); 
```

并且仅在您为其命名时才允许它，如下所示？

```
Foo my_foo("hi"); 
```

第一个的生命周期只是语句，第二个是封闭块。在我的用例中，`Foo`测量构造函数和析构函数之间的时间。由于我从不引用局部变量，所以经常忘记放入，不小心改变了生命周期。我想得到一个编译时错误。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-31T14:32:10.430

另一个基于宏的解决方案：

```
#define Foo class Foo 
```

该语句`Foo("hi");`扩展为`class Foo("hi");`，这是格式错误的；但`Foo a("hi")`扩展为`class Foo a("hi")`，这是正确的。

这样做的好处是它与现有的（正确的）代码既源代码兼容又二进制兼容。**（这种说法并不完全正确 - 请参阅 Johannes Schaub 的评论和下面的讨论：*“你怎么知道它与现有代码的源代码兼容？他的朋友包括他的标题并且有 void f() { int Foo = 0; }以前编译得很好，现在编译错误！此外，定义类 Foo 的成员函数的每一行都失败： void class Foo::bar() {}"*）**

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-10-31T14:08:15.243

来个小技巧怎么样

```
class Foo
{
    public:
        Foo (const char*) {}
};

void Foo (float);

int main ()
{
    Foo ("hello"); // error
    class Foo a("hi"); // OK
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-10-31T14:33:52.720

将构造函数设为私有，但给类一个*create*方法。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-10-31T23:00:49.940

这不会导致编译器错误，而是运行时错误。不是测量错误的时间，而是得到一个也可以接受的异常。

您想要保护的任何构造函数都需要一个`set(guard)`调用的默认参数。

```
struct Guard {
  Guard()
    :guardflagp()
  { }

  ~Guard() {
    assert(guardflagp && "Forgot to call guard?");
    *guardflagp = 0;
  }

  void *set(Guard const *&guardflag) {
    if(guardflagp) {
      *guardflagp = 0;
    }

    guardflagp = &guardflag;
    *guardflagp = this;
  }

private:
  Guard const **guardflagp;
};

class Foo {
public:
  Foo(const char *arg1, Guard &&g = Guard()) 
    :guard()
  { g.set(guard); }

  ~Foo() {
    assert(!guard && "A Foo object cannot be temporary!");
  }

private:
  mutable Guard const *guard;
}; 
```

特点是：

```
Foo f() {
  // OK (no temporary)
  Foo f1("hello");

  // may throw (may introduce a temporary on behalf of the compiler)
  Foo f2 = "hello";

  // may throw (introduces a temporary that may be optimized away
  Foo f3 = Foo("hello");

  // OK (no temporary)
  Foo f4{"hello"};

  // OK (no temporary)
  Foo f = { "hello" };

  // always throws
  Foo("hello");

  // OK (normal copy)
  return f;

  // may throw (may introduce a temporary on behalf of the compiler)
  return "hello";

  // OK (initialized temporary lives longer than its initializers)
  return { "hello" };
}

int main() {
  // OK (it's f that created the temporary in its body)
  f();

  // OK (normal copy)
  Foo g1(f());

  // OK (normal copy)
  Foo g2 = f();
} 
```

的情况下`f2`，可能不需要`f3`返回。为了防止抛出，您可以通过将 重置为现在保护我们而不是`"hello"`副本的来源来允许副本的来源是临时的。`guard`现在你也明白了为什么我们使用上面的指针——它让我们变得灵活。

```
class Foo {
public:
  Foo(const char *arg1, Guard &&g = Guard()) 
    :guard()
  { g.set(guard); }

  Foo(Foo &&other)
    :guard(other.guard)
  {
    if(guard) {
      guard->set(guard);
    }
  }

  Foo(const Foo& other)
    :guard(other.guard)
  {
    if(guard) {
      guard->set(guard);
    }
  }

  ~Foo() {
    assert(!guard && "A Foo object cannot be temporary!");
  }

private:
  mutable Guard const *guard;
}; 
```

for 和 for 现在的`f2`特征`f3`始终`return "hello"`是`// OK`。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-10-31T16:46:43.123

几年前，我为 GNU C++ 编译器编写[了一个补丁](http://gcc.gnu.org/bugzilla/attachment.cgi?id=15798&action=diff)，为这种情况添加了一个新的警告选项。这在[Bugzilla 项目中进行了](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36587)跟踪。

不幸的是，GCC Bugzilla 是一个埋葬地，经过深思熟虑的包含补丁的功能建议会死去。:)

这样做的动机是希望在代码中准确捕获作为该问题主题的那种错误，该代码使用本地对象作为锁定和解锁的小工具，测量执行时间等等。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-10-31T14:10:22.880

按照原样，在您的实现中，您不能这样做，但您可以使用此规则来发挥您的优势：

> 临时对象不能绑定到非常量引用

您可以将代码从类移动到采用非常量引用参数的独立函数。如果这样做，如果临时尝试绑定到非常量引用，您将收到编译器错误。

### [代码示例](http://ideone.com/uEp4Zk)

```
class Foo
{
    public:
        Foo(const char* ){}
        friend void InitMethod(Foo& obj);
};

void InitMethod(Foo& obj){}

int main()
{
    Foo myVar("InitMe");
    InitMethod(myVar);    //Works

    InitMethod("InitMe"); //Does not work  
    return 0;
} 
```

### 输出

```
prog.cpp: In function ‘int main()’:
prog.cpp:13: error: invalid initialization of non-const reference of type ‘Foo&’ from a temporary of type ‘const char*’
prog.cpp:7: error: in passing argument 1 of ‘void InitMethod(Foo&)’ 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-10-31T23:01:08.080

根本没有默认构造函数，并且确实需要在每个构造函数中引用一个实例。

```
#include <iostream>
using namespace std;

enum SelfRef { selfRef };

struct S
{
    S( SelfRef, S const & ) {}
};

int main()
{
    S a( selfRef, a );
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-10-31T14:04:19.860

不，恐怕这是不可能的。但是您可以通过创建宏来获得相同的效果。

```
#define FOO(x) Foo _foo(x) 
```

有了这个，你可以只写 FOO(x) 而不是 Foo my_foo(x)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-02-18T23:15:25.323

由于主要目标是防止错误，请考虑以下问题：

```
struct Foo
{
  Foo( const char* ) { /* ... */ }
};

enum { Foo };

int main()
{
  struct Foo foo( "hi" ); // OK
  struct Foo( "hi" ); // fail
  Foo foo( "hi" ); // fail
  Foo( "hi" ); // fail
} 
```

这样你就不会忘记给变量命名，也不会忘记写`struct`. 冗长，但安全。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-06T19:37:38.553

将单参数构造函数声明为显式的，没有人会无意中创建该类的对象。

例如

```
class Foo
{
public: 
  explicit Foo(const char*);
};

void fun(const Foo&); 
```

只能这样使用

```
void g() {
  Foo a("text");
  fun(a);
} 
```

但从来没有这样（通过堆栈上的临时）

```
void g() {
  fun("text");
} 
```

另请参阅：Alexandrescu，C++ 编码标准，第 40 条。

# android - 我的 mapView 不显示地图只显示覆盖项目

> ID：13159746
> 
> 赞同：4
> 
> 时间：2012-10-31T14:01:01.527
> 
> 标签：android, overlay, android-mapview, xamarin.android, md5

我已经尝试使用太多 MD5 在[https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)中多次生成我的密钥，但不起作用。当尝试使用 MapView 时， `var mapIntent = new Intent (Intent.ActionView, geoUri)` 它可以工作，但我无法放置我的叠加项目。我需要从布局中使用我的 MapView，但只显示线条和覆盖项。我尝试在手机中使用示例 HelloMap 但发生同样的事情并没有显示地图只是覆盖项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:23:04.580

要么您没有有效的密钥，要么您忘记将 uses-library 行放在清单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:02:02.057

本周星期一我看到了完全相同的东西 - 但自从调试它以来就没有回到项目中。

我怀疑这可能是 VS2012 或 Windows8 错误，因为我之前从同一台 PC 上发布了几个地图应用程序（在 VS2012 和 Win8 之前）

如果你现在有这个可重现的，我认为你应该用 Xamarin 记录这个 - support@xamarin.com 或[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:23:30.920

生成我使用的密钥库

C:\Program Files\Java\jdk1.6.0_20>keytool -genkey -alias umAlias -keystore C:\localParaoArquivo\nomedoarquivo.keystore

看我用过的md5

C:\Program Files\Java\jdk1.6.0_20>keytool -list -v -keystore C:\localParaoArquivo\nomedoarquivo.keystore

我把我的钥匙放在 xml 中，我也在运行时尝试过，但没有用。

MD5和SHA1有什么区别？我在清单中使用

```
 <uses-library android:name="com.google.android.maps" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:15:01.447

我解决了问题！！！！\o

而不是生成发布 .apk 我发布 .apk 因为我将发布到商店！我的 MapView 适用于 3g 和 wi-fi。谢谢大家帮助我！

# django - 不要在 HTTP 重定向上传播标头

> ID：13159748
> 
> 赞同：6
> 
> 时间：2012-10-31T14:01:17.563
> 
> 标签：django, http, redirect, amazon-s3, http-headers

我在 Amazon S3 上托管了文件，我想在我的应用程序中处理后下载它们。此应用程序视图需要 HTTP 授权标头才能继续。这是过程：

1.  `/file/xxx`带有所需`Authorization`请求标头的查询视图
2.  如果应用程序访问被授予，做一些处理
3.  生成一个签名的 S3 url，并重定向到它

事实是请求标头也在重定向上传播，并且与亚马逊的 S3 签名冲突，我收到以下错误消息：

> 应指定 Signature 查询字符串参数或 Authorization 标头，不能同时指定两者

那么，有没有办法不将`Authorization`标头传播到 S3 ？

请注意，我已经测试了所有`3xx`HTTP 代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T21:54:11.550

这可能取决于您的客户，例如参见：[https ://code.google.com/p/go/issues/detail?id=4800](https://code.google.com/p/go/issues/detail?id=4800)

默认情况下，curl 似乎不会继承您的 Authorization 标头。但我正在处理一个类似的问题，我看到默认情况下 http 组件似乎带有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:57:13.803

您的 S3 文件路径是否与您的`/file/xxx`. 这可以解释为什么要发送 Authorization 标头。如果您将 S3 托管在与应用程序视图不同的域上，那么我会假设 Authorization 标头不会发送到 S3 域（因为 HTTP 授权是每个域的）。

# c# - 如何获取当前运行环境的FrameworkName？

> ID：13159753
> 
> 赞同：2
> 
> 时间：2012-10-31T14:01:29.993
> 
> 标签：c#, frameworks, runtime

> **可能重复：**
> [在运行时获取当前的 .NET CLR 版本？](https://stackoverflow.com/questions/1826688/get-current-net-clr-version-at-runtime)

该类`System.Runtime.Versioning.FrameworkName`是 .NET Framework 版本的强类型指示器。它根据版本号、配置文件（客户端配置文件）等而有所不同。在运行时，您如何才能获得`FrameworkName`正确执行代码的运行时环境？例如，`FrameworkName`如果您在正常的非客户端配置文件设置中运行，则对应于 net40。

注意 - 特定程序集的版本、使用的编译器版本等在这里不匹配 - 您可能已经使用 2.0 编译器编译了程序集，但它可能在 4.5 运行时环境中运行。

# html - HTML 内部 SVG 形状

> ID：13159757
> 
> 赞同：2
> 
> 时间：2012-10-31T14:01:36.913
> 
> 标签：html, svg

是否可以将 div 放入 svg 形状中？这是我正在尝试做的一个例子：

```
 <!DOCTYPE html>
    <html>
        <body xmlns="http://www.w3.org/1999/xhtml">
            <svg id="main" xmlns="http://www.w3.org/2000/svg" version="1.1">
                <foreignObject x="10" y="10" width="100" height="150">
                    <div>I'm a div in an svg</div>
                </foreignObject>
                <rect fill="red" stroke="darkred" class="box" x="90" y="90" rx="20" ry="20" width="320" height="320" id="box_0">
                    <foreignObject width="100" height="50">
                        <body xmlns="http://www.w3.org/1999/xhtml">
                            <div>Hi, I'm a div inside a shape!! I don't work :(</div>
                        </body>
                    </foreignObject>
                </rect>
            </svg>  
        </body>
    </html> 
```

第二个`<div>`没有显示，这是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:37:39.040

<`rect>`元素不能有一个`<foreignObject>`元素作为子元素。您必须使该`<foreignObject>`元素成为以后的同级元素并将其定位在 rect 元素的顶部。

# csv - Weka“交叉验证”文件

> ID：13159760
> 
> 赞同：1
> 
> 时间：2012-10-31T14:01:48.490
> 
> 标签：csv, weka, arff, cross-validation

我有三个与特定文件关联的值。每个文件都属于一个特定的系列。我需要改进 Weka 中的“交叉验证”，以了解我是否能够通过这三个值来识别家庭。现在，创建我必须在 Weka 上打开的 Csv 或 Arff 文件的步骤是什么？我的 txt 有这种格式。

> **File_Family_1** 值 1、值2、值 3
> 
> **File_Family_1**值 1、值2、值 3
> 
> **File_Family_2**值 1、值2、值 3
> 
> **File_Family_2**值 1、值2、值 3
> 
> **File_Family_3**值 1、值2、值 3
> 
> **File_Family_3**值 1、值2、值 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:55:44.123

我已经使用 Excel 解决了这个问题。在第一行中，您必须写下标签，但所有标签都在第一列中，以逗号分隔。

```
Family, Attribute1, Attribute2, Attribute3 
```

在其他行中，始终都在第一列并用逗号分隔，您必须写入标签值。

```
File_Family1, Value1, Value2, Value3
File_Family2, Value1, Value2, Value3
File_Family3, Value1, Value2, Value3
...... 
```

保存为“.Csv”后，不用担心 Excel 的警报。打开 Weka 并单击资源管理器。所以使用“打开文件”并选择刚刚创建的 Cv，打开后进入分类。最后单击“选择”以使用特定的树。如果开始按钮被禁用，则需要选择“（Nom）”属性来执行“交叉验证”。

# asp.net - 尽管存在 dll，但 IIS 无法加载全局类型

> ID：13159761
> 
> 赞同：0
> 
> 时间：2012-10-31T14:01:52.697
> 
> 标签：asp.net, .net, iis-6

我试图让应用程序在我被分配支持的 IIS 6.0 上运行。

我将所有源代码和二进制文件复制到 Inetput 文件夹。WebApp 正在运行，但我收到错误消息，告诉我无法加载应用程序的全局类型。

我该如何调试呢？命名空间正确，DLL 存在于应用程序的 /bin/ 文件夹中，但应用程序仍无法加载它。

打开 Fusion 日志记录后，我发现了这个与我的全局类有关的错误文件；

```
*** Assembly Binder Log Entry  (05.11.2012 @ 08:45:30) ***

The operation failed.
Bind result: hr = 0x80131107\. No description available.

Assembly manager loaded from:  C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\fusion.dll
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: DisplayName = MyApplication
 (Partial)
LOG: Appbase = file:///c:/inetpub/wwwroot/MyApplication
LOG: Initial PrivatePath = bin
LOG: Dynamic Base = C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\Temporary ASP.NET Files\MyApplication\a1144233
LOG: Cache Base = C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\Temporary ASP.NET Files\MyApplication\a1144233
LOG: AppName = 1ec25e47
Calling assembly : (Unknown).
===

LOG: Processing DEVPATH.
LOG: DEVPATH is not set. Falling through to regular bind.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Post-policy reference: MyApplication
LOG: Attempting download of new URL file:///C:/WINDOWS/Microsoft.NET/Framework/v1.1.4322/Temporary ASP.NET Files/MyApplication/a1144233/1ec25e47/MyApplication.DLL.
LOG: Attempting download of new URL file:///C:/WINDOWS/Microsoft.NET/Framework/v1.1.4322/Temporary ASP.NET Files/MyApplication/a1144233/1ec25e47/MyApplication/MyApplication.DLL.
LOG: Attempting download of new URL file:///c:/inetpub/wwwroot/MyApplication/bin/MyApplication.DLL.
LOG: Assembly download was successful. Attempting setup of file: c:\inetpub\wwwroot\MyApplication\bin\MyApplication.DLL
LOG: Entering download cache setup phase.
ERR: Error extracting manifest import from file (hr = 0x80131107).
ERR: Setup failed with hr = 0x80131107.
ERR: Failed to complete setup of assembly (hr = 0x80131107). Probing terminated. 
```

那里出了什么问题？`bin\MyApplication.DLL`存在并正确编译，所以我看不到问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:23:57.837

从评论中复制解决方案...

第 1 步是启用[Fusion Logging](http://blogs.msdn.com/b/thottams/archive/2007/06/02/debugging-load-problems-using-fusion-log.aspx)以获取失败的日志

这产生了指示 IIS 试图在 .Net Framework 1.1 版下启动 DLL 的日志文件。然后当它尝试读取 dll 的清单时发生错误。

这表明 dll 来自更高版本的框架，因此无法加载。

# objective-c - Cocoa 中的自定义窗口样式

> ID：13159763
> 
> 赞同：0
> 
> 时间：2012-10-31T14:02:02.057
> 
> 标签：objective-c, macos, cocoa, nspanel

**好的，这就是我想要做的：**

*   我有一个自定义`NSPanel`子类
*   我希望它`NSPanel`是无边界的（没有标题 - 我自己在画一个标题栏）并且可以调整大小

**事情是这样的：**

*   一旦我设置`styleMask`为`NSResizableWindowMask`，默认标题栏也会出现。
*   一旦我将其设置`styleMask`为`NSBorderlessWindowMask`，默认标题栏就会消失（这很好），但窗口会失去调整大小的能力。

**这是我的代码：**

```
- (id)initWithContentRect:(NSRect)contentRect styleMask:(NSUInteger)windowStyle backing:(NSBackingStoreType)bufferingType defer:(BOOL)deferCreation
{
    if ((self = [super initWithContentRect:contentRect styleMask:NSTitledWindowMask backing:bufferingType defer:deferCreation])) {
        [self setOpaque:NO];
        [self setBackgroundColor:[NSColor clearColor]];
        [self setMovableByWindowBackground:YES];
        [self setLevel:NSFloatingWindowLevel];
        //[self setStyleMask:[self styleMask]&~NSTitledWindowMask];
    }
    return self;
} 
```

正如您从注释掉的代码中看到的那样，我尝试使用任何可能的位操作组合与掩码，以便组合我需要的东西。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:03:50.573

在这样的时间做它们

```
styleMask:NSTitledWindowMask | NSResizableWindowMask 
```

# c# - ReportViewerWebPart报表打印错误如何处理？

> ID：13159764
> 
> 赞同：2
> 
> 时间：2012-10-31T14:02:11.197
> 
> 标签：c#, sharepoint, reporting-services

我正在实施基于 SharePoint 2010 和 MS Reporting Server 的解决方案。我遇到了 ReportViewerWepPart 的问题。我有一个场景，当无法打印报告时，我需要显示自定义错误。不幸的是，与 ReportViewer asp 控件不同，ReportViewerWepPart 没有任何属性/事件表明存在错误并且无法打印报告。在花了一些时间解决这个问题后，我提出了一个使用反射的解决方案。我发现 ReportViewerWepPart 在内部使用 ReportViewer，并且我在这个私有内部组件上附加了 ReportError 事件。这是我的代码：

```
…
            try
            {
                ReportViewer rv = (reportViewer.GetType().GetField("m_reportViewer", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).GetValue(reportViewer) as ReportViewer);
                rv.ReportError += new Microsoft.Reporting.WebForms.ReportErrorEventHandler(ReportWidgetControl_ReportError);
            }
            catch(Exception e)
            {
                LogHandler.LogError(e, "Unable to attach ReportViewerWebPart error hadler.");
            }
…
        void ReportWidgetControl_ReportError(object sender, Microsoft.Reporting.WebForms.ReportErrorEventArgs e)
        {
            reportViewer.Visible = false;
            HandleError();
        } 
```

不幸的是，这个解决方案是 web 部件中的一个 hack。你认为以这种方式使用反射会导致任何问题吗？我是否遗漏了什么，是否有另一种方法可以查看是否打印了报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:39:16.880

这很好，但我会小心捕捉所有异常。无论出现什么错误，您似乎都在隐藏 reportViewer 并调用 HandleError 代码。可能会发生轻微的异常，并且在内部处理时不会出现问题，并且隐藏 reportViewer 对象可能不合适。我不知道您的 HandleError 代码做了什么，但我建议您将错误悄悄地记录到日志表或文件中，直到您发现您要处理的确切打印错误，然后只担心处理它。

# asp.net - 打开导出的excel文件时如何避免excel文件格式警告？

> ID：13159767
> 
> 赞同：0
> 
> 时间：2012-10-31T14:02:12.370
> 
> 标签：asp.net, html, vb.net, excel

我正在将 html 数据导出到 excel。单击导出按钮后，我立即得到一个 excel 文件，但是当我尝试打开该 excel 文件时，会弹出一个警报，提示文件格式与指定的扩展名不同。我怎样才能摆脱这个警报，请帮助我使用以下代码

```
HttpContext.Current.Response.Buffer = True
HttpContext.Current.Response.ContentType = "application/vnd.ms-excel"
HttpContext.Current.Server.ScriptTimeout = 600 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:33:07.040

**编辑：**尝试 .csv 格式。这个对我有用。

```
protected void btnExport_Click(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        context.Response.Clear();

        string filename = "testExportToCSV";
        DataTable table1 = new DataTable("Customers");

        DataRow row1, row2, row3;

        DataColumn colName = new DataColumn("CustomerName", System.Type.GetType("System.String"));
        DataColumn colCity = new DataColumn("City", System.Type.GetType("System.String"));
        table1.Columns.Add(colName);
        table1.Columns.Add(colCity);

        row1 = table1.NewRow();
        row1["CustomerName"] = "aa";
        row1["City"] = "ss";
        table1.Rows.Add(row1);

        row2 = table1.NewRow();
        row2["CustomerName"] = "bb";
        row2["City"] = "sdd";
        table1.Rows.Add(row2);

        row3 = table1.NewRow();
        row3["CustomerName"] = "cc";
        row3["City"] = "dfgfgf";
        table1.Rows.Add(row3);

        //foreach (System.Data.DataColumn column in table1.Columns)
        //{
        for (int i = 0; i < table1.Columns.Count; i++)
        {
            context.Response.Write(table1.Columns[i].ColumnName.ToString().Replace(",", string.Empty) + ",");

        }
        context.Response.Write(Environment.NewLine);

        //}

        foreach (System.Data.DataRow row in table1.Rows)
        {
            for (int i = 0; i < table1.Columns.Count; i++)
            {
                context.Response.Write(row[i].ToString().Replace(",", string.Empty) + ",");
            }

            context.Response.Write(Environment.NewLine);
        }

        context.Response.ContentType = "text/csv";
        context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + filename + ".csv");
        context.Response.End();

    } 
```

**编辑1：**

我对您的问题进行了研究，但我发现它对您的问题产生`security issue`了不良影响`system's security if we modify it`。

```
Key: HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Excel\Security
Value: (DWORD)"ExtensionHardening" = 
                         [0 = Disable check; 
                          1 = Enable check and prompt; 
                          2 = Enable check, no prompt deny open]

Default setting if value not present is 1 (enable and prompt). 
```

您可以从此链接参考整篇文章：http: [//blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)

**编辑2：** `Steps to Modify Registry...`

1.  点击**开始菜单**
2.  在搜索程序和文件中键入**运行**
3.  然后输入**REGEDIT**，按 OK
4.  HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Excel\Security

希望，它会帮助你。！！谢谢。

如果它解决了您的问题，请将其标记为答案，以便其他人也可以参考。

# iphone - 使用 OpenAL 使用自定义循环周期循环 PCM 文件

> ID：13159769
> 
> 赞同：1
> 
> 时间：2012-10-31T14:02:14.620
> 
> 标签：iphone, objective-c, openal

我正在尝试循环源，例如持续 1 秒，顺便说一下，下一个循环将在源结束后 4 秒内开始。我看到了两种解决这个问题的方法。

1.  手动将 «empty» butes 放入缓冲区，因此 source 的长度为 4 秒。
2.  放某种计时器。

我会朝着正确的方向前进吗？也许有简单的方法可以做到这一点？

一整天都在想这个任务。谢谢！

# java - 使用java获取当前进程所有者

> ID：13159771
> 
> 赞同：5
> 
> 时间：2012-10-31T14:02:16.647
> 
> 标签：java, unix

我想知道使用 Java 的 Unix 中当前进程的所有者。我想找到当前服务器的所有者名称。我尝试在 Runtime.getRuntime().exec() 中运行“我是谁”命令，但它没有返回任何结果。

```
String line = ""; 
Process p = Runtime.getRuntime().exec("who am i");
InputStream iStream = p.getInputStream();
InputStreamReader inputStreamReader = new InputStreamReader(iStream);
BufferedReader bufReader = new BufferedReader(inputStreamReader);
while ((line = bufReader.readLine()) != null) {
    System.out.println("Input "+line);
} 
```

这段代码有什么问题吗，或者我知道如何使用 Java 找到当前进程的所有者？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T14:12:05.963

首先，我认为`System.getProperty("user.name")`应该为此工作

第二件事，您的代码没有返回任何内容的原因是因为该命令`whoami`没有空格，所以您的 exec 行应该是（假设您通过 cygwin 在 Windows 上运行或在基于 **nix 的系统上运行）

```
Process p = Runtime.getRuntime().exec("whoami"); 
```

# gwt - SplitLayoutPanel 中的 GWT ScrollPanel

> ID：13159776
> 
> 赞同：0
> 
> 时间：2012-10-31T14:02:27.157
> 
> 标签：gwt, celllist, layoutpanels

我在 SplitLayoutPanel 中有一个 scrollPanel，我想在用户执行应用程序应该执行的一些活动时填充日志消息。它只是尝试在 UI 页面上为用户提供记录器控制台，以查看服务器上发生的情况。我使用 CellList 用我每隔几秒轮询一次的日志消息填充滚动条。问题是在滚动面板上出现一定数量的日志消息之后，它就不再打印了。我给了最大缓冲区大小，并在达到最大限制时继续从 cellList 中删除旧项目，以避免内存不足。而且我知道它按预期工作。但不知道为什么它会停止。有什么想法吗？

# drupal-7 - Drupal 7逐页链接

> ID：13159780
> 
> 赞同：2
> 
> 时间：2012-10-31T14:02:45.663
> 
> 标签：drupal-7, views, hyperlink

我正在开发一个drupal 站点，我想知道的是，我有一个站点，该站点将在页面顶部有一个主导航菜单栏。

然后，除了首页，每个页面都有自己的一组链接。现在，这些链接将在相互关联的页面中复制。所以，我基本上知道我需要做的是创建单独的导航块，然后根据页面控制这些导航块，但我不知道该怎么做。

谁能解释我需要做些什么才能使它起作用？教程或视频会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:13:02.017

为什么不创建一个包含所有链接的分类词汇表。

然后使用小部件类型的复选框将**术语引用**字段添加到您的页面内容类型。然后，当您编辑页面时，您将能够选择该页面所需的任何链接。

在编辑页面内容类型的结构时，通过查看**管理显示选项卡来控制这些链接在页面上的显示方式。**

# facebook - Facebook 应用程序内的 Facebook 提要对话框 iframe

> ID：13159782
> 
> 赞同：0
> 
> 时间：2012-10-31T14:02:53.853
> 
> 标签：facebook, iframe, facebook-apps

我正在尝试在我的 Facebook 应用程序中获取提要对话框 iframe。但不知何故，它不允许我。Iframe 现在看起来像这样：

![Facebook iframe 错误](../Images/3a776d724291d55a15f7cd8cc0fdeaa2.png)

我正在尝试使用以下代码：

```
$html .= '<iframe style="width:800px; height:800px;" src="https://www.facebook.com/dialog/feed?app_id='.$appID.'&redirect_uri=http://apps.facebook.com/'.$appName.'&acces_token='.$accesToken.'"></iframe>'.PHP_EOL; 
```

希望有人知道我做错了什么......我只想在 iframe 中有以下内容：

![我必须如何展示。](../Images/884131766175cd87d691d51427392b96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:03:42.873

您还需要设置`display=iframe`. 您调整后的示例代码将是（以**粗体**添加）：

```
$html .= '<iframe style="width:800px; height:800px;" src="https://www.facebook.com/dialog/feed?**display=iframe**&app_id='.$appID.'&redirect_uri=http://apps.facebook.com/'.$appName.'&acces_token='.$accesToken.'"></iframe>'.PHP_EOL; 
```

[有关更多信息，请参阅https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)上的“通用对话框参数”

# javascript - 类似 iCal 的日历 jQuery

> ID：13159783
> 
> 赞同：2
> 
> 时间：2012-10-31T14:02:53.617
> 
> 标签：javascript, jquery, css

有谁知道一个大尺寸的日历，如链接：[http ://www.htmldrive.net/items/demo/568/astonishing-iCal-like-calendars-with-jQuery](http://www.htmldrive.net/items/demo/568/astonishing-iCal-like-calendars-with-jQuery)

因为我不想构建像这个演示这样的日历，我只想使用它。我尝试将其他日历用作 Jscal，但它很小。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:06:03.223

您的 UI 要求到底是什么？例如，我会考虑以下日历“大”：

*   [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

您可能可以自定义布局以满足您的需求。如果你需要更多，你应该“细化”你的要求:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:06:20.343

如果您使用的是 JQuery，那么您可以使用以下代码来增加大小

```
${'div.ui-datepicker').css({ font-size:10px; }); 
```

这里 'div.ui-datepicker' 是 datepicker 实例，你需要根据你的代码来改变它。

# javascript - Javascript中两个日期的初始化差异

> ID：13159789
> 
> 赞同：5
> 
> 时间：2012-10-31T14:03:09.360
> 
> 标签：javascript, date, datetime

为什么这**两个日期不同**：

```
var date1 = new Date();
date1.setFullYear(2012); // year (four digits)
date1.setMonth(10); // month (from 0-11)
date1.setDate(1); // day of the month (from 1-31)

var date2 = new Date(2012, 10, 1, 0, 0, 0, 0); 
```

结果 ：

```
Date 1 : Sat Dec 01 2012 14:56:16 GMT+0100
Date 2 : Thu Nov 01 2012 00:00:00 GMT+0100 
```

而这**两个日期相等**：

```
var date3 = new Date();
date3.setFullYear(2012); // year (four digits)
date3.setMonth(9); // month (from 0-11)
date3.setDate(1); // day of the month (from 1-31)

var date4 = new Date(2012, 9, 1, 0, 0, 0, 0); 
```

结果 ：

```
Date 3 : Mon Oct 01 2012 14:56:16 GMT+0200
Date 4 : Mon Oct 01 2012 00:00:00 GMT+0200 
```

另一个问题是为什么 do`date1.setMonth(10)`给出了 12 月的日期（应该是 11 月）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T14:16:43.860

终于明白了。`new Date()`将日期设置为*当前日期和时间*。换句话说，10 月 31 日（撰写本文时）。

然后，当您尝试将月份设置为 11 月时，该怎么办？11 月只有 30 天……所以将它包裹到 12 月。

如果您更改顺序以便在月份*之前*设置日期，则它可以工作：

```
var date1 = new Date();
date1.setFullYear(2012); // year (four digits)
date1.setDate(1); // day of the month (from 1-31)
date1.setMonth(10); // month (from 0-11) 
```

或者正如 jbaby 的回答所暗示的那样：

```
var date1 = new Date();
date1.setFullYear(2012); // year (four digits)
date1.setMonth(10, 1); // month (from 0-11) and day (1-31) 
```

[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth)不是*很*清楚，但至少具有启发性：

> 如果您指定的参数超出预期范围，setMonth 会尝试相应地更新 Date 对象中的日期信息。例如，如果您将 15 用于monthValue，则年份将增加 1（年 + 1），而 3 将用于月份。

（“因此”远非精确，但这意味着实施至少可以说是正确的......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:17:29.163

[`setMonth`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth)接受第二个参数：

> 如果不指定 dayValue 参数，则使用从 getDate 方法返回的值。

当您将月份设置为`10`（11 月）时，它会获取当前日期值 ( `31`) 并将其设置为日期。由于 11 月只有 30 天，因此会将您滚动到 12 月 1 日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:12:22.443

您正在创建一个包含当前日期 ( `new Date()`) 的 var，然后您正在更改其中的一些键（年、月和日）。

另一方面`new Date(2012, 10, 1, 0, 0, 0, 0)`意味着“创建一个具有这些确切值的日期对象”。

这就是为什么您的日期对象不相等的原因。

# php - 管理员和普通用户的登录/注销

> ID：13159790
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:09.653
> 
> 标签：php, javascript, login

我创建了一个登录/注销页面，但现在我想在登录时将管理员与普通用户分开。我想做的是让**普通用户**只查看可用文件，而**管理员**当然可以查看和编辑这些文件。

现在我的设置：

**登录**.php

```
 <?php
session_start();
include("password.php");
require_once "config.php";

/* Constants */
$TITLE = "Formation - User Login";
$CSS = array("assets/css/formation.css");
$JAVASCRIPT = array();
$mode = $_GET["mode"];
/* Template */

require_once $TEMPLATE_PATH."header.php";

if ($mode == "login") { /// do after login form is submitted
     if ($USERS[$_POST["username"]]==$_POST["password"]) { /// check if submitted username and password exist in $USERS array
          $_SESSION["login"]=$_POST["username"];
          header("location:index.php");
     } else {
          echo "Incorrect username/password. Please, try again.";
     };
} else if ($mode == "logout") {
      session_start();
      unset($_SESSION["login"],$USERS);
      header("location: login.php");
      exit(0);
};
echo <<< XHTML

    <h1>$TITLE</h1>
    <form id="form" method="post" action="{$LOGIN_URL}?mode=login">
        <label id="username_label" for="username" class="normal">Username</label> :<br />
        <input id="username" name="username" type="text" value="" class="half" /><br />
        <label id="password_label" for="password" class="normal">Password</label> :<br />
        <input id="password" name="password" type="password" value="" class="half" /><br />
        <input id="submits" type="submit" value="Login" />
    </form>

XHTML;

require_once $TEMPLATE_PATH . "footer.php";

?> 
```

**密码**.php（验证用户和密码）

```
<?php 
$USERS["drodrig1"] = "pwd1"; 
$USERS["jsutta"] = "pwd2"; 
$USERS["username3"] = "pwd3"; 

function check_logged(){ 
     global $_SESSION, $USERS; 
     if (!array_key_exists($_SESSION["login"],$USERS)) { 
          header("Location: login.php");
          exit(0);
     };
};
?> 
```

**配置**.php

```
<?php

$ASSETS_URL = "https://url-link/formationXX/assets/";
$ASSETS_PATH = "serverpath/formationXX/assets/";
$TEMPLATE_URL = "https://url-link/formationXX/assets/template/";
$TEMPLATE_PATH = "serverpath/formationXX/assets/template/";
$LOGIN_URL = "https://url-link/formationXX/login.php";
$LOGIN_PATH = "serverpath/formationXX/login.php";

?> 
```

**索引**.php （登录后，这是我希望看到管理员区别于普通用户的地方。管理员应该能够看到和编辑以下内容：CSS、JS、电子邮件、PDF 和电子表格。同时用户**只能查看**除：CSS，JS）

```
<?php

require_once "config.php";
session_start(); /// initialize session
include("password.php"); 
check_logged(); /// function checks if visitor is logged.

/* Constants */
$TITLE = "Formation - User Login";
$CSS = array("assets/css/formation.css");
$JAVASCRIPT = array();
/* Template */

require_once $TEMPLATE_PATH."header.php";

echo <<< XHTML
        <form id="form" method="post" action="{$LOGIN_URL}?mode=login">
          <div class="full row column">
            <h1>{$TITLE}</h1>
          </div>
          <div class="full row column">
            <div class="half column small">
              <p>Logged in as: <strong>{$_SESSION["login"]}</strong> | <a href="{$LOGIN_URL}?mode=logout" class="small">Logout</a></p><br />
              Add Form | Delete Selected Form(s)
            </div>
          </div>
          <div class="full row column">
            <table id="formslist" cellpadding="0" cellspacing="0">
              <th>
                <tr>
                  <td class="form_select">
                    <input id="selectallforms" name="selectallforms" type="checkbox" value="Select All Forms" />
                  </td>
                  <td class="form_id">
                    ID
                  </td>
                  <td class="form_url">
                    URL
                  </td>
                  <td class="form_dates">
                    Launch Date
                  </td>
                  <td class="form_dates">
                    Expiration Date
                  </td>
                  <td class="form_autofill">
                    Autofill
                  </td>
                  <td class="form_save">
                    **CSS**
                  </td>
                  <td class="form_save">
                    **JS**
                  </td>
                  <td class="form_save">
                    Email
                  </td>
                  <td class="form_save">
                    PDF
                  </td>                  
                  <td class="form_dates">
                    Spread sheet
                  </td>
                </tr>
              </th>
            </table>
          </div>
        </form>
XHTML;

require_once $TEMPLATE_PATH . "footer.php";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:18:38.013

当登录的用户尝试编辑某些内容时，您应该检查该用户是否有足够的权限这样做。

例如，这是您的用户：

```
$USERS["drodrig1"]['passw'] = "pwd1"; 
$USERS["jsutta"]['passw'] = "pwd2"; 
$USERS["username3"]['passw'] = "pwd3"; 

$USERS["drodrig1"]['level'] = 0; 
$USERS["jsutta"]['level'] = 1; 
$USERS["username3"]['level'] = 0; 
```

下面是我们如何检查用户是否可以做某事：

```
if ($_GET['action'] === 'edit' && $USERS[$_SESSION["login"]]['level'] === 1) {
    // Go to function where users changes gets saved to files or db:
    saveChanges($_POST);
} else {
    die("<h1>Sorry, you cant do that!</h1>");
} 
```

顺便说一句，你的代码有很多问题，但它仍然对学习 PHP 有好处。

# forms - 是否可以使用 alfresco forms 服务为自定义 webscript 或 dashlet 创建输入字段

> ID：13159791
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:09.610
> 
> 标签：forms, alfresco, alfresco-share

[alfresco share 中](http://wiki.alfresco.com/wiki/Forms_Developer_Guide)的表单引擎似乎是一种非常强大的创建和编辑新内容对象的方式。是否可以将此声明性配置也用于不直接对应于存储库对象的表单？

我要解决的问题是一些自定义属性的搜索掩码。搜索字段之一是针对具有列表约束的方面，如果 alfresco 可以像编辑对象属性时那样自动创建相应的选择元素和验证，那就太好了。

例如，考虑以下内容模型：

```
<constraints>
    <constraint name="jh:listconstraint" type="LIST">
        <parameter name="allowedValues">
            <list>
                <value>100</value>
                <value>200</value>
                <value>300</value>
            </list>
        </parameter>
    </constraint>
    <constraint name="jh:regexConstraint" type="REGEX">
        <parameter name="expression">
            <value>[a-z]{4}</value>
        </parameter>
        <parameter name="requiresMatch">
            <value>true</value>
        </parameter>
    </constraint>
</constraint>

<aspects>
    <aspect name="jh:test">
        <properties>
            <property name="jh:property1">
                <title>Property 1</title>
                <type>d:int</type>
                <constraints>
                    <constraint ref="jh:listconstraint"/>
                </constraints>
            </property>
            <property name="jh:property2">
                <title>Property 2</title>
                <type>d:text</type>
                <constraints>
                    <constraint ref="jh:regexConstraint"/>
                </constraints>
            </property>
        </properties>
    </aspect>
</aspects> 
```

具有此方面的文档的属性表包含一个不错的下拉选择，用于具有列表约束和自动验证正则表达式约束的属性。我想在自定义 dashlet 中呈现相同的输入字段，但自己处理后端逻辑。

目标版本是 alfresco 4.1.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:41:15.257

我怀疑是否有一种合理的方法可以基于类型或方面定义来构建搜索（表单），而不会严重损害`FormsService`repo 中的表单 CRUD 语义和丑陋的黑客攻击。

如果您想利用 Alfresco Forms，我会尝试在 [http://wiki.alfresco.com/wiki/Custom_Actions](http://wiki.alfresco.com/wiki/Custom_Actions)的 wiki 上记录的基于操作的表单。你可能仍然需要担心处理价值限制，你可能不得不重复自己，但它仍然应该给你一个不错的开始。

# vb.net - VB.NET VisualStyleRenderer ThemeBackground 缺失

> ID：13159793
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:03:11.590
> 
> 标签：vb.net, visual-styles

我正在尝试将我的 VB6 代码移植到 .NET，但有些东西我只是找不到：

在VB6中我说（伪代码）

```
OpenThemeData "ExplorerBar" 
```

进而...

```
DrawThemeBackground Lib "UxTheme.dll" (ByVal hTheme As IntPtr, ByVal hdc As IntPtr, ByVal iPartId As Integer, ByVal iStateId As Integer, ByRef pRect As RECT, ByRef pClipRect As RECT) As Integer 
```

现在有了.NET，我只是找不到那个背景。

```
 Dim renderer As VisualStyleRenderer
    renderer = New VisualStyleRenderer(VisualStyleElement.ExplorerBar.NormalGroupBackground.Normal) 
```

我想我在“ExplorerBar”下尝试了所有可用的，但没有一个给我与 VB6 相同的结果。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:15:35.547

知道了：

```
renderer = New VisualStyleRenderer("ExplorerBar", 0, 0) 
```

# php - Raspberry Node.js & 执行命令

> ID：13159795
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:18.847
> 
> 标签：php, javascript, linux, node.js, socket.io

我正在尝试从带有 node.js、socket.io 和（我认为...）PHP 的网页执行 Linux 命令。我看了[这个 YouTube 视频](https://www.youtube.com/watch?v=SWSpRyCDfZE&feature=g-all-u)，我也想做同样的事情，但我不知道怎么做。

你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:32:10.043

视频中链接的 GitHub 存储库中提供了他们实现的链接 - [mirceageorgescu/raspi-tank](https://github.com/mirceageorgescu/raspi-tank)。

* * *

node.js 完全能够运行程序。草稿可能如下所示。

**服务器**

```
var exec = require('child_process').exec;
io.sockets.on('connection', function(socket) {
  socket.on('exec', function(cmd) {
    exec(cmd, function(err, stdout, stderr) {
      // do something with the output or not
    });
  });
}); 
```

**客户**

```
socket.emit('exec', 'cat file.txt'); 
```

[socket.io](http://socket.io/#how-to-use)上提供了有关如何在服务器上启动套接字或从客户端连接到它的信息。

# cakephp - HABTM Just 主要模型用 saveall() 保存

> ID：13159796
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:21.590
> 
> 标签：cakephp, cakephp-2.0, has-and-belongs-to-many

我在使用 HABTM + cakephp 时遇到问题。

在我的应用程序中，我有这个模型（带有关系定义）：

客户：

```
public $hasAndBelongsToMany  = array(
    'TiposComercio' => array(
        'className'             => 'TiposComercio',
        'joinTable'             => 'tipos_comercio_cliente',
        'foreignKey'            => 'cliente',
        'associationForeignKey' => 'tipo_comercio'
    )
); 
```

提示：

```
public $hasAndBelongsToMany = array(

    'Cliente' => array(
        'className' => 'Cliente',
        'joinTable' => 'tipos_comercio_cliente',
        'foreignKey' => 'tipo_comercio',
        'associationForeignKey' => 'cliente'
    )
); 
```

当表单发布时，我在数组中有`$this->request->data`这个：

```
array(

    'Cliente' => array(
        'password' => '*****',
        'razao_social' => 'Teste',
        'responsavel' => 'responsavel',
        'cidade' => '1',
        'cep' => '13560201',
        'logradouro' => 'Log test',
        'numero' => '',
        'bairro' => '',
        'complemento' => '',
        'atividades' => '',
        'username' => 'username11',
        'TiposComercio' => array(
            (int) 0 => '1',
            (int) 1 => '4'
        )
    )

) 
```

当我执行 $this->Cliente->saveAll($this->request->data); 在 ClientesController 我有以下问题：

*   仅保存客户数据。TiposComercio 没有任何东西被保存。

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:12:00.600

您的数据数组的结构似乎是错误的。查看保存 HABTM 数据的手册：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)

根据示例，您的数据数组应形成如下：

```
array(
    'Cliente' => array(
        'password' => '*****',
        'razao_social' => 'Teste',
        'responsavel' => 'responsavel',
        'cidade' => '1',
        'cep' => '13560201',
        'logradouro' => 'Log test',
        'numero' => '',
        'bairro' => '',
        'complemento' => '',
        'atividades' => '',
        'username' => 'username11',
    ),
    'TiposComecio' => array(
        (int) 0 => '1',
        (int) 1 => '4'
    )
) 
```

# jquery - img标签中的数字符号使页面重新加载3次？

> ID：13159799
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:28.763
> 
> 标签：jquery, refresh, image

这可能是一个非常简单的答案，但我只是花了最后一个小时试图弄清楚为什么我的 php 页面在初始加载后刷新了 3 次。

```
<img src="#" style="what:ever;" alt="" /> 
```

罪魁祸首原来是源属性中的一个数字符号。将代码更改为以下内容后，一切都按预期工作：

```
<img src="" style="what:ever;" alt="" /> 
```

如果我不知道这是否相关，这个图像标签确实会被 jquery 修改。

那么为什么我只是浪费了我生命的最后一个小时呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:58:27.537

Marc B 说的对。

附加信息：浏览器有一种行为，即每当它查看“ **src** ”属性时，它都会尝试**加载 src 属性的值**。

我可以为此点“**脚本**”标签。当您使用某个 URL 指定**src**属性时，它会尝试将该结果加载到您的脚本标签中。同样，**img**标签也会尝试从 src 属性中提到的路径加载图像。

现在在这种情况下，当它看起来是“ **#** ”时，它会尝试加载“ **#** ”，这实际上表示我们上下文中的当前页面。这就是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:44:49.150

“src="#" 基本上是“当前 url”的简写。这对图像无效，因为您会尝试将一大块 html 作为图像加载。

– 马克 B

# spring - spring-security-redirect 不被 spring security 3.1 读取？

> ID：13159800
> 
> 赞同：0
> 
> 时间：2012-10-31T14:03:32.213
> 
> 标签：spring, redirect, spring-security

因此，我们使用 spring-security-redirect 作为发送到 j_spring_security_check 的表单中的参数，以便在成功登录后将用户发送到正确的页面。从 Spring security 3.0 迁移到 3.1，这停止了工作。我们使用 SavedRequestAwareAuthenticationSuccessHandler 的子类，覆盖 onAuthenticationSuccess()，并调试该方法我看到 getTargetUrlParameter() 返回 null。isAlwaysUseDefaultTargetUrl() 返回 false。

浏览我找不到任何有类似问题的人......我找到了一些对 AbstractAuthenticationTargetUrlRequestHandler.DEFAULT_TARGET_PARAMETER 的引用，这似乎在 3.1 中消失了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:55:06.400

根据 Spring security 3.1 xsd，

**属性 : authentication-success-handler-ref** 对 AuthenticationSuccessHandler bean 的引用，该 bean 应该用于处理成功的身份验证请求。*不应与 default-target-url（或 always-use-default-target-url）结合使用，因为实现应始终处理到后续目的地的导航。*

因此，在您的子类中，您必须执行重定向。

# c# - 在中继器内捕获下拉选定文本

> ID：13159803
> 
> 赞同：1
> 
> 时间：2012-10-31T14:03:50.837
> 
> 标签：c#, asp.net

我在转发器中有下拉列表，每当更改所选文本时，我必须在文本框中显示它我该怎么做？

```
 protected void Repeater1_ItemCreated(object sender, RepeaterItemEventArgs e)
{
    DropDownList ddl = (DropDownList)e.Item.FindControl("DropDownList6");
    TextBox txt = (TextBox)e.Item.FindControl("TextBox4");
    txt.Text = ddl.SelectedItem.Text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:07:24.817

首先，不要使用`ItemCreated`因此，因为它在生命周期中触发得太早（对于 ViewState）。您还必须检查第`ItemType`一个。

而是`DropDownLists` `SelectedIndexChanged`直接使用事件：

```
protected void Ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList ddl   = (DropDownList)  sender;
    RepeaterItem item  = (RepeaterItem)  ddl .NamingContainer;
    TextBox txt        = (TextBox) item.FindControl("TextBox4");
    txt.Text           = ddl.SelectedItem.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:07:27.973

您可以将适当的 OnSelectedChange (somwthing) 事件处理程序添加到 DropDownList，然后当事件触发时，您可以捕获它并执行您想要的任何操作，您可以在客户端或服务器端执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:09:46.820

您将需要使用添加处理程序将每个下拉控件与相应的事件处理程序相关联。我面前没有 VS，但它应该是这样的：

txt.SelectedIndexChanged += new EventHandler(YourMethodName)

# jquery - jQuery 插件适用于 1.6.4 版本，但不适用于 1.8.2

> ID：13159805
> 
> 赞同：1
> 
> 时间：2012-10-31T14:03:55.843
> 
> 标签：jquery, version

我正在尝试使用 jQuery 滚动条插件（这个：[http](http://tympanus.net/Tutorials/ScrollbarVisibility/) ://tympanus.net/Tutorials/ScrollbarVisibility/ ），我注意到两件事：

1.  当 jQuery 版本为 1.6.4 时，此插件在 Google Chrome（或 Chromium）和 Firefox（或 Iceweasel）下完美运行。
2.  当我使用 jQuery 版本 1.8.2 时，该插件在 Google Chrome 下运行良好，但在 Firefox 下运行良好。

谁能给我一个解释，因为我很惊讶！

现在我正在使用 1.6.4 和一个小脚本，删除不推荐使用的 event.layerX 和 layerY。

谢谢 ;）

# c# - 将不同类型的通用对象保存在一个集合中

> ID：13159807
> 
> 赞同：1
> 
> 时间：2012-10-31T14:04:09.250
> 
> 标签：c#, generics

我一直在为一个项目构建一个小型访问规则模块，其中每个特定规则都由一个通用`Rule<TEntity>`对象反映。该规则需要一个委托来执行特定的逻辑。

有一个`RulesContext`类提供方法来检查对某个实体“foo”的访问，如下所示：

```
rulesContext.CanIRead<Foo>(myFoo); 
```

我的意图是将设置过程中构建的所有规则存储到一个集合中。但我尝试的每一种方法都会导致死胡同。

我想到了类似的东西：

```
IDictionary<Type, Rule<object>> _rules = new Dictionary<Type, Rule<object>>(); 
```

和：

```
var fooRule = new Rule<Foo>(foo => foo.FullfillsACertainFooCriterion())
_rules.Add(typeof(Foo), fooRule); 
```

该`CanIRead`实现将确保正确使用字典：

```
public bool CanIRead<TEntity>(TEntity entity)
{
    var rule = _rules[typeof(entity)];
    return rule.CanIRead(entity);
} 
```

但是编译器不喜欢这样：`Rule<Foo>`不能分配给类型为 的参数`Rule<object>`。哪种是有意义的，因为它会违反合同（这表示我可以将字典的方法与任何对象一起用作参数，这对于仅接受 Foo 类型对象的 fooRule 不成立。- Liskov 原则）

但是我想不出解决这个问题的方法。如何将`Rule`不同类型的对象存储在一个集合中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:13:02.270

你能做这个吗：

```
[TestFixture]
public class ContraVariance
{
    [Test]
    public void TestNameTest()
    {
        var rules = new List<IRule<object>>(); //object is used just for demo here, probably some interface of yours is better
        rules.Add(new Rule<A>());
        rules.Add(new Rule<B>());
    }
}
public class A { }
public class B { }

public class Rule<TEntity> : IRule<TEntity>
{

}

public interface IRule<out T>
{
} 
```

如果不是，我认为您必须有一个非通用的 IRule 或 RuleBase（类）接口中的 out 关键字意味着 T 仅存在（协变），您可以在[此处](http://msdn.microsoft.com/en-us/library/dd997386%28VS.100%29.aspx)阅读。我想在你的情况下这将是一个问题，我怀疑规则有将 TEntity 作为参数传递的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:07:03.620

这本质上是非类型安全的。
如果你写，你想发生什么

```
_rules[typeof(Foor)].CanRead(new Bar()); 
```

您需要创建一个非泛型基类或接口来存储在字典中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:36:10.880

而不是使用`IDictionary<Type, object>`which 可以保存任何东西（例如`DateTime`）作为字典中的值，您可以使值严格规则对象

这里

```
namespace RuleConsole
{
   class Program
   {
      static void Main(string[] args)
      {
         var context = new RulesContext();

         var objA = new A();
         var objB = new B();

         context.AddRule<A>(new Rule<A>(objA));
         context.AddRule<B>(new Rule<B>(objB));

         Console.WriteLine(context.CanIRead<A>(objA));
         Console.WriteLine(context.CanIRead<B>(objB));

         Console.ReadKey();
      }
   }

   public interface IRule { }
   public interface IRule<T> : IRule { }

   public class Rule<T> : IRule<T> 
   {
      T _entity;
      public Rule(T entity)
      {
         _entity = entity;
      }
   }

   public class A { }
   public class B { }

   public class RulesContext
   {
      Dictionary<Type, IRule> _ruleDict= new Dictionary<Type, IRule>();

      public void AddRule<TEntity>(Rule<TEntity> rule)
      {
         _ruleDict.Add(typeof(TEntity), rule);
      }

      public bool CanIRead<TEntity>(TEntity entity)
      {
         var rule = (IRule<TEntity>)_ruleDict[typeof(TEntity)];

         //CanIRead implementation here

         return rule != null;
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:51:32.547

好吧，这几乎是令人尴尬的——但我认为你刚刚帮助我解开了我的大脑 :-)

如果问题`IDictionary<Type, Rule<object>>`太具体，`IDictionary<Type, object>`那么诀窍是：

```
var fooRule = new Rule<Foo>(foo => foo.FullfillsACertainFooCriterion())
_rules.Add(typeof(Foo), fooRule); 
```

（与问题相同，但这次编译）

```
public bool CanIRead<TEntity>(TEntity entity)
{
    var rule = (Rule<TEntity>)_rules[typeof(entity)];
    return rule.CanIRead(entity);
} 
```

我脑子里的障碍是，我认为其中的类型参数越通用，`Rule<...>`字典中应该允许的对象越多，但在这种情况下，情况恰恰相反：参数越通用，越具体合同得到。

拿：

```
IDictionary<Rule<Foo>> 
```

通过替换`Rule`它的基类`object`，字典变得更加通用。但是，通过替换`Foo`但是，通过`object`，整个事情实际上变得更加专业！

这样做的全部原因是类型参数`Rule`被用作输入参数。

这是一个重要的教训...

# java - 在 Java / Android 中使用 Flexjson 将 JSONObject 映射到列表

> ID：13159809
> 
> 赞同：5
> 
> 时间：2012-10-31T14:04:13.400
> 
> 标签：java, android, json, deserialization, flexjson

我目前正在尝试使用 Flexjson 反序列化 JSON 字符串并将其映射到我的 Android 应用程序的对象模型。该应用程序是一种具有多个供应商的库，其中可以包含一些目录，其中包含更多目录和文档。json 是从我没有影响的 Web 服务中获取的，看起来像这样：

```
{
    "library":{
        "vendor":[
            {
                "id":146,
                "title":"Vendor1",
                "catalog":[
                     {
                        "id":847,
                        "document":[
                            {
                                "id":1628,
                                "title":"Document",
                ...
                            },
                            {
                ...
                            }
                        ],
                        "title":"Catalog ",
                    },
                {
                ...
                }
              ]
            },
            {
            ...
            }
        ]
    }
} 
```

因此，每个供应商、目录、文档都由 JSONObject 表示，所有子目录和文档都在 JSONArray 中。到目前为止，Flexjson 和以下反序列化代码一切正常：

```
LibraryResponse response = new JSONDeserializer<LibraryResponse>()
                    .use(Timestamp.class, new TimestampObjectFactory())
                    .deserialize(getLocalLibrary(), LibraryResponse.class);
return response.library; 
```

我确实有一个具有`List<Vendor>`. 每个供应商都有一个`List<Catalog>`和一个`List<Document>`。

但不幸的是，如果目录仅包含单个文档或目录仅包含一个目录，则 Web 服务会将 JSONArrays 绑定到简单的 JSONObjects。所以这种情况下的 json 看起来像这样：

```
"document":
    {
        "id":1628, 
        "title":"Document",
        ...
    } 
```

现在 Flexjson 不知道如何反序列化，我最终得到一个 library.vendorX.getDocument() 是 a`List<HashMap>`而不是`List<Document>`. 一个想法是明确告诉 Flexjson 如何处理这种情况，但我不知道从哪里开始。另一种方法是手动解析初始 json 并将此类 JSONObjects 替换为适当的 JSONArray。但我认为这种方式并不好走，因为图书馆可能很深。

我希望你能在这里提供一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:08:12.977

哎呀，这是一些粗糙的 json 映射。哪个后端编码器做到了？！#不帮助。

从代码来看，Flexjson 被编码为开箱即用地处理这个问题。但看起来它没有将输入信息传递给绑定，所以它不知道它绑定到什么类型，所以它只返回一个 Map。这是一个应该修复 的**错误。****好消息是有一个解决方法**。

无论如何，我能想到的最简单的事情就是在该列表上安装一个*ObjectFactory 。*然后您可以检查并查看在反序列化流时是否获得 Map 或 List 。然后您可以将其包装在一个列表中并将其发送到适当的解码器。就像是：

```
LibraryResponse response = new JSONDeserializer<LibraryResponse>()
                .use(Timestamp.class, new TimestampObjectFactory())
                .use("library.vendor.values.catalog.values.document", new ListDocumentFactory() )
                .deserialize(getLocalLibrary(), LibraryResponse.class); 
```

然后

```
public class ListDocumentFactory implements ObjectFactory {

     public Object instantiate(ObjectBinder context, Object value, Type targetType, Class targetClass) {
         if( value instanceof Collection ) {
             return context.bindIntoCollection((Collection)value, new ArrayList(), targetType);
         } else {
             List collection = new ArrayList();
             if( targetType instanceof ParameterizedType ) {
                 ParameterizedType ptype = (ParameterizedType) targetType;
                 collection.add( context.bind(value, ptype.getActualTypeArguments()[0]) );
             } else {
                 collection.add( context.bind( value ) );
                 return collection;
             }
         }
     }
} 
```

我认为这大致可以解决该错误，但也应该解决您的问题。

# ruby-on-rails - 如何设置一个 Rails 应用程序，然后设置一个使用所有相同代码的子域，除了不同的数据库？

> ID：13159818
> 
> 赞同：1
> 
> 时间：2012-10-31T14:04:38.160
> 
> 标签：ruby-on-rails, testing, subdomain

如何设置一个 Rails 应用程序，然后设置一个使用所有相同代码的子域，除了不同的数据库？

该实现将是一个前端测试套件，它利用所有相同的 url 路由进行慢速测试，并将同时测试前端和后端。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:46:28.463

Ryan Bates 刚刚做了一些关于多租户的很好的截屏视频，其中他涵盖了基于范围的子域切换......

[http://railscasts.com/episodes/388-multitenancy-with-scopes](http://railscasts.com/episodes/388-multitenancy-with-scopes)

...和数据库模式...

[http://railscasts.com/episodes/389-multitenancy-with-postgresql](http://railscasts.com/episodes/389-multitenancy-with-postgresql)

我知道这些是付费/付费剧集，但如果您愿意每月花费 9 美元，它是很好的信息。您提到切换数据库，但您可以通过切换范围或模式来完成相同的事情。您可以免费查看这些剧集的 git 存储库...

[https://github.com/railscasts/388-multitenancy-with-scopes](https://github.com/railscasts/388-multitenancy-with-scopes)

[https://github.com/railscasts/389-multitenancy-with-postgresql](https://github.com/railscasts/389-multitenancy-with-postgresql)

...并进行一些逆向工程以更好地了解域切换。如果你想切换数据库而不是模式，我认为底层逻辑是一样的。

正如重写所提到的，这都是高级开发，您不太可能找到此类主题的分步教程。

# ruby-on-rails - 设计：如何禁止同时记录同一会话中的不同角色

> ID：13159829
> 
> 赞同：0
> 
> 时间：2012-10-31T14:05:29.550
> 
> 标签：ruby-on-rails, session, authentication, login, devise

我使用 devise 的 rails 生成器创建了三个不同的角色（用户、管理员、经理），它们存储在不同的表和模型中......

如何禁止某人在同一会话期间登录两个不同的角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:22:06.260

当用户尝试登录时，您可以验证他没有以其他角色登录。为此，您必须重写设计 SessionsController。[这里对 RegistrationsController](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)进行了解释，但同样可以使用 SessionsController 完成。接下来在新的 SessionsController 中添加一个前置过滤器：

```
before_filter :require_not_authenticated_in_other_scopes, :only => [:new, :create] 
```

然后只需在控制器中实现过滤器：

```
def require_not_authenticated_in_other_scopes
  other_types = [:user, :admin, :manager] - [resource_name]
  other_types.each do |type|
    if self.send("#{type}_signed_in?") 
      resource = warden.user(type)
      redirect_to after_sign_in_path_for(resource)
    end
  end
end 
```

我已经从 Devise 的 SessionsController 本身中获取了部分实现，你可以在他们的[GitHub 存储库](https://github.com/plataformatec/devise/blob/master/app/controllers/devise_controller.rb)中找到它。

# c# - 使用接口与 Func 或 Action

> ID：13159831
> 
> 赞同：8
> 
> 时间：2012-10-31T14:05:44.970
> 
> 标签：c#, .net

我已经编写 C# 代码 10 年了，但我非常不知道何时使用接口与使用 Func 或 Action。在我看来，在调用接口上的方法的许多地方，Func 或 Action 也可以正常工作。所以，我想我的问题是这个。如果我的接口只有一个方法，或者可能有几个方法，那么使用 Func 或 Action 有什么缺点吗？使用 Func 或 Action 对我来说似乎更干净。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:18:34.157

我想您可以将`Action`or`Func`与包含一个方法的接口进行比较，不同之处在于您可以提供*任何* 满足参数/返回值要求的 or ，在使用接口时，提供的对象必须实现该接口`Action`。`Func`

也许您可以调用`Action`“`Func`匿名单一方法接口”。

但是，如果您从设计角度来看，您的类模型将是块的绘图，它们之间没有任何线条。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:08:22.770

如果预计实现非常短（一两行），尤其是预计实现需要局部变量（闭包）时，您应该使用委托和 lambda 表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T14:44:09.450

我不得不承认，我对这个问题有点困惑。像@deepee 一样，我同意这里的代码示例可以很好地说明为什么您认为您会使用一种方法而不是另一种方法。

我感到困惑的原因是我不会想到问这个问题，因为它们有不同的目的。接口主要用于多态；这样人们就可以以相同的方式处理不同的实现。

Jon Skeet 有一个[很好](https://stackoverflow.com/a/4317512/279516)的使用 Func 和 Action 的例子。

接口允许您这样做：

```
IAnimal animal = AnimalFactory.GetAnimal();
animal.Run(); 
```

使用上面的代码，你不知道也不关心它是什么动物。您只知道它可以运行并且您希望它运行。**更重要的是，调用者不知道动物是怎么跑的*。*这就是 Action 和 interfaces/polymorphism 之间的区别**。做某事的逻辑在具体类中。

**当调用者知道实际逻辑时，** Action 将允许您对每个实例执行相同的操作，而不是让每个具体实例执行某些操作：

```
animals.ForEach(x => x.Run()); 
```

或者：

```
animals.ForEach(x => /* do something completely different here */); 
```

上面的代码行是**只有调用者决定应该发生什么的动作，而不是通过简单地调用它的方法将逻辑委托给实际实例**。

They solve different problems, so I'm curious to see how folks think they're interchangeable in certain situations.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:10:04.090

当您并不真正关心您正在使用哪种对象时，您会使用接口......

让我们来看教科书的例子

公共类动物；

```
public class Dog : Animal, IRunningAnimal { }
public class Cheetah : Animal, IRunningAnimal { }
public class Fish : Animal, ISwimmingAnimal { }
public class Gator : Animal, ISwimmingAnimal, IRunningAnimal { }

public interface IRunningAnimal 
{
    public void Run();
}

public interface ISwimmingAnimal
{
    public void Swim();
}

public abstract class Animal
{
    /// ...
    public abstract void Move();
} 
```

然后在代码中的某个地方......

```
RunningAnimal runner = getAnimal();
//make him run
runner.Run(); 
```

每只奔跑的动物可能以不同的方式奔跑，但它们都可以奔跑。

或更好

```
if(getAnimal() instanceof RunningAnimal) getAnimal().Run();
else getAnimal().Move(); 
```

# rabbitmq - RabbitMQ：从队列中检索特定消息

> ID：13159840
> 
> 赞同：0
> 
> 时间：2012-10-31T14:06:05.423
> 
> 标签：rabbitmq, amqp

我无法理解 RabbitMQ 中的路由。考虑我有几个生产者（我们称他们为客户端），它们向队列生成消息。例如，客户端`A`,`B`和`C`发送消息到队列`X1`。

让消费者响应所有将响应发送回队列的消息。例如，消费者从队列`X1`中获取消息，做某事，然后向队列发送响应`X1`。

客户端如何`A`确定`X1`发送给它的队列消息在哪里以及发送给客户端的消息在哪里`B`？`C`

我无法为每个连接声明一个队列，因为预计会有大量连接 ( `~10^6`)。所以我在这里遇到了麻烦。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:04:22.270

我认为您需要查看[RPC](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)教程。根据您的描述，这听起来像是您想要做的。但是，这可能需要您声明比您想要的更多的队列。

以不同的方式接近这一点。我不明白为什么您不仅要通过同一个交换器，还要通过消费者正在消费的同一个队列向生产者发送回复。

让生产者 P1、P2 和 P3 使用路由密钥“abc.aaa.xyz”/“abc.bbb.xyz”/“abc.ccc.xyz”发送到交换 X1 是否没有意义。*然后使用绑定键“ .aaa.* ”/“ *.* *bbb.* ”/“ .ccc.”将队列 Q1、Q2 和 Q3 绑定到 X1，或者仅使用绑定键“abc.*.xyz”绑定到 Q1（我不清楚你想要什么，所以只是提出一些建议）。由消费者 C1、C2 和 C3 消费

当消费者处理完消息后，它将向 X2 发送一条消息，并带有标识自身的路由键。生产者将从绑定到 X2 的队列中消费。

我要说明的一点是，您不希望多个消费者从队列中读取。只有一种情况是您想要的，那就是任务队列。我不清楚您的用例，因此您可能需要一个任务队列。如果你这样做了，那么你不应该让你的生产者和你的消费者从同一个任务队列中读取。除了任务队列之外，您还应该让一个消费者从一个队列中读取。您可能有许多队列到一个交换，甚至有许多绑定从一个队列到一个交换。

我希望这有帮助

# javascript - jQuery 对话框表单提交到 CodeIgniter 表单验证

> ID：13159842
> 
> 赞同：0
> 
> 时间：2012-10-31T14:06:15.487
> 
> 标签：javascript, jquery, ajax, json, codeigniter

我将 ajax 表单数据从 jquery 对话框模式发送到我的 CodeIgniter 控制器，该控制器执行其表单验证。使用 FireFox 时一切正常。使用 IE10 时，表单似乎没有提交给控制器。我发现建议在我的 jquery .ajax 中添加“contentType: 'application/json; charset=utf-8' - 这似乎允许 IE10 开始提交表单，但是 CI 表单验证似乎不再适用于任何一个浏览器。将 contentType 重新标记出来（如下所示）允许 FireFox 再次工作。

有什么建议么？

这是我的javascript：

```
var dataObj = {type_id: tt_tid, rtype_id: tt_rtid, ref_id: tt_rid, time: tt_time, date: tt_date };

$.ajax({
    data: dataObj,
    cache:false,
    //contentType: "application/json; charset=utf-8",
    dataType: "json",
    type: "POST",
    url: '<?php echo base_url();?>task/tt_ajax_add',
    success: function(data) {
        //Clear the message
        $("#modal_message").html('').removeClass().css({'display' : 'none'});

        if (data.success == true) {
            $("#modal_message").html(data.message).css({'display' : 'block'}); 
            clearForm('#m_timetrack_form');
        }else{
            $("#modal_message").html(data.message).addClass('error').css({'display' : 'block'}); 
        }
    }
}); 
```

这是我的 CI 控制器方法

```
function tt_ajax_add()
{
    if ($this->input->is_ajax_request()){
        $this->load->library('form_validation');
        $validate_config = "timetrack_add";

        //Check if the form is valid
        if ($this->form_validation->run($validate_config) == FALSE ){
            $result['success'] = FALSE;
            $result['message'] = "Please correct any errors below.";
            $result['message'] .= validation_errors();
            //$result['message'] .= file_get_contents('php://input');

        #Form data was valid
        }else{
            $result['success'] = TRUE;
            $result['message'] = "Submitted successfully.";

        }
        exit(json_encode($result));
    }
    exit();
} 
```

# php - Dreamweaver CS5.5 和 PHP 生成的代码

> ID：13159846
> 
> 赞同：0
> 
> 时间：2012-10-31T14:06:31.433
> 
> 标签：php, dreamweaver

我目前正在使用 Dreamweaver CS5.5，我想要一些有关 Dw 生成的 PHP 代码的信息，因为我觉得它有点混乱，而且有点难以理解。

第一个。关于 dw 生成的 Authorization 或者登录脚本。在使用数据库中的用户名进行检查之前，我是否必须清理给定的用户名或加密/散列密码，或者 Dreamweaver 已经为我这样做了？如果我必须自己做，我究竟可以在哪里应用我自己的代码？

第二。从绑定创建查询时，Dreamweaver 还生成一个 GetSQLValueString 函数，说实话，这让我很困惑。如果我完全删除此代码，并只保留查询（或查询，以防我想要多个），这会对页面的其余功能产生任何影响吗？或者如果我把它放在一个单独的文件中并将它包含在我想要的页面中怎么办？

第三。我还注意到在站点中创建了一些文件夹，例如 _mmServerScripts、_notes。如果我从网站上删除它们是否也可以，或者会对我的代码产生影响？

最后一件事。当我有时键入这样的 if 语句时：

```
<?php if(a_condtition): ?>

<p>Hello</p>

<?php endif; ?> 
```

我得到语法错误突出显示。这是某种错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:19:11.420

```
<?php if($a_condtition)
{
    echo '<p>Hello</p>';
}?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:40:38.040

1.  Dreamweaver 假定密码以纯文本形式存在于数据库中。它可以追溯到人们习惯性地犯这个错误的时代。

2.  GetSQLValueString 是 Dreamweaver 清理字符串以防止注入攻击的简单方法。它工作得很好。

3.  DW 制作的各种额外目录部分用于版本控制和访问；部分用于配置测试环境。通过在 FTP 中过滤它们，将它们从活动站点中删除。

4.  您显示的 if 语句在 DW 中未被识别为语法正确

# java - iPhone 和 Android 的加密方法

> ID：13159847
> 
> 赞同：4
> 
> 时间：2012-10-31T14:06:33.107
> 
> 标签：java, android, ios, encryption, aes

我曾尝试在两个（Android 和 iPhone）平台中使用 AES 算法生成加密文本，但问题是即使我们使用相同的加密解密库（AES-128）和相同的固定变量（Key、IV、mode），但我为他们得到了两个不同的结果。

我感谢任何帮助。:(

下面的代码介绍了使用的加密和解密方法，

**安卓代码版本：**

*   键=“123456789abcdefg”；
    *   IV =“1111111111111111”；
    *   纯文本 = “HelloThere”；
    *   模式=“AES/CBC/NoPadding”；

代码 ：

```
 public class Crypto {
public static String encrypt(String seed, String cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext.getBytes());
        return toHex(result);
}

public static String decrypt(String seed, String encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = toByte(encrypted);
        byte[] result = decrypt(rawKey, enc);
        return new String(result);
}

private static byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance(“CBC”);
        SecureRandom sr = SecureRandom.getInstance(“SHA1PRNG”);
        sr.setSeed(seed);
    kgen.init(128, sr); // 192 and 256 bits may not be available
    SecretKey skey = kgen.generateKey();
    byte[] raw = skey.getEncoded();
    return raw;
}
private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, “AES”);
        Cipher cipher = Cipher.getInstance(“AES”);
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
}
private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, “AES”);
        Cipher cipher = Cipher.getInstance(“AES”);
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
}
public static String toHex(String txt) {
        return toHex(txt.getBytes());
}
public static String fromHex(String hex) {
        return new String(toByte(hex));
}
public static byte[] toByte(String hexString) {
        int len = hexString.length()/2;
        byte[] result = new byte[len];
        for (int i = 0; i < len; i++)
                result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();
        return result;
}
public static String toHex(byte[] buf) {
        if (buf == null)
                return “”;
        StringBuffer result = new StringBuffer(2*buf.length);
        for (int i = 0; i < buf.length; i++) {
                appendHex(result, buf[i]);
        }
        return result.toString();
}
private final static String HEX = “0123456789ABCDEF”;
private static void appendHex(StringBuffer sb, byte b) {
        sb.append(HEX.charAt((b»4)&0x0f)).append(HEX.charAt(b&0x0f));
} 
```

}

**iPhone的代码版本：**

```
- (NSData *) transform:(CCOperation) encryptOrDecrypt data:(NSData *) inputData {

NSData* secretKey = [Cipher md5:cipherKey];

CCCryptorRef cryptor = NULL;
CCCryptorStatus status = kCCSuccess;

uint8_t iv[kCCBlockSizeAES128];
memset((void *) iv, 0x0, (size_t) sizeof(iv));

status = CCCryptorCreate(encryptOrDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                         [secretKey bytes], kCCKeySizeAES128, iv, &cryptor);

if (status != kCCSuccess) {
    return nil;
}

size_t bufsize = CCCryptorGetOutputLength(cryptor, (size_t)[inputData length], true);

void * buf = malloc(bufsize * sizeof(uint8_t));
memset(buf, 0x0, bufsize);

size_t bufused = 0;
size_t bytesTotal = 0;

status = CCCryptorUpdate(cryptor, [inputData bytes], (size_t)[inputData length],
                         buf, bufsize, &bufused);

if (status != kCCSuccess) {
    free(buf);
    CCCryptorRelease(cryptor);
    return nil;
}

bytesTotal += bufused;

status = CCCryptorFinal(cryptor, buf + bufused, bufsize - bufused, &bufused);

if (status != kCCSuccess) {
    free(buf);
    CCCryptorRelease(cryptor);
    return nil;
}

bytesTotal += bufused;

CCCryptorRelease(cryptor);

return [NSData dataWithBytesNoCopy:buf length:bytesTotal]; 
```

}

```
 + (NSData *) md5:(NSString *) stringToHash {

const char *src = [stringToHash UTF8String];

unsigned char result[CC_MD5_DIGEST_LENGTH];

CC_MD5(src, strlen(src), result);

return [NSData dataWithBytes:result length:CC_MD5_DIGEST_LENGTH]; 
```

}

**我的一些参考资料：**

*   [http://automagical.rationalmind.net/2009/02/12/aes-interoperability-between-net-and-iphone/](http://automagical.rationalmind.net/2009/02/12/aes-interoperability-between-net-and-iphone/)

*   [http://code.google.com/p/aes-encryption-samples/wiki/HowToEncryptWithJava](http://code.google.com/p/aes-encryption-samples/wiki/HowToEncryptWithJava)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:20:38.900

首先要检查的是您正在使用的字节。您将 IV、密钥和明文列为字符。这些字符将使用某种编码转换为字节。检查**字节**的样子，而不是字符。您需要逐字节列出两台机器上的所有内容并进行比较。或者，准确指定您将在每台机器上使用的转换。机器默认值可能会有所不同。

一旦您知道输入字节相同，那么我们就可以寻找其他问题。

作为一个小点，通常最好使用填充，例如 PKCS#7；这样您就不必使您的消息适合密码的块大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:45:39.763

哦，伙计，你忘了使用 .getBytes("UTF-8"); ...

极其重要。

编辑：

我知道我应该提高这个答案的质量，但是我在这里所说的 + rossum 下面所说的才是正确解决这个问题的诀窍。

这只是关于加密/解密合规性 - 当您跨平台工作时，您还必须具有二进制合规性。

因此，转储原始数据并检查它们是否存在差异，直到您的眼睛流血并且您发现并成功修补了产生差异的那个小怪癖。

对于初学者， .getBytes("UTF-8") 将在 Java/android 环境中为您提供一致的字符串（因为 getBytes() 不能按照您期望的方式工作，除非您阅读文档）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:36:48.257

该代码有各种问题，但是您在Android上的每次加密中获得不同密文的原因是您没有指定IV，并且正在生成一个随机的IV。您还说“无填充”，但 iOS 代码正在填充，而 Android 很可能也是默认设置，因为您没有明确指定它。最后，如果您加密的任何内容不是块大小的倍数（如您的示例纯文本），则确实*需要填充。*`getBytes()`在 Android 上默认为 UTF-8，所以这是你的问题中最少的，但一定要明确说明。

# java - 基本数组和循环 Java

> ID：13159853
> 
> 赞同：0
> 
> 时间：2012-10-31T14:07:05.720
> 
> 标签：java, arrays

我的讲义中有以下示例代码。

```
int[] a = new int[3]; 
a[0] = 1;
for (int i = 1; i < a.length; i++) {    
    a[i] = a[i-1] + i;
} 
```

我假设这会回来

```
[1,2,3] 
```

运行以下代码后。

因为循环从 开始`1`并计数到`3`。当第一个循环被执行时，我被分配为`1`and`[1-1]+1`并且结果是`1`并且下一个`i`变成`2`并且结果是`2.....`

我不认为`a[0]=1;` 是在做什么。但我不确定这是否正确。

请告诉我我的假设是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:10:18.757

好吧，不完全是：

```
i   |   a[i-1]    | a[i] = a[i-1] + i
----+-------------+------------------
1   |  a[0] = 1   | a[1] = 1 + 1 = 2
2   |  a[1] = 2   | a[2] = 2 + 2 = 4 
```

# javascript - 如何在 JavaScript 中为所有元素覆盖 focus()？

> ID：13159865
> 
> 赞同：5
> 
> 时间：2012-10-31T14:08:03.160
> 
> 标签：javascript

我想覆盖`focus()`JavaScript 中所有 HTML 元素的函数。

我怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-07-22T19:32:26.117

该问题询问如何覆盖 HTML 元素的`.focus()` *方法*，因此将首先回答。但是，还有其他方法可以触发对元素的“关注”，下面将讨论覆盖这些方法。

另请注意，**覆盖全局原型可能不是一个好主意**。

* * *

# 覆盖`.focus()`HTML 元素上的方法

`HTMLElement`您可以通过修改其原型来覆盖 all 的焦点功能。

```
HTMLElement.prototype.focus = function () {
  // ... do your custom stuff here
} 
```

如果您仍想运行默认焦点行为并运行自定义覆盖，您可以执行以下操作：

```
let oldHTMLFocus = HTMLElement.prototype.focus;
HTMLElement.prototype.focus = function () {
    // your custom code
    oldHTMLFocus.apply(this, arguments);
}; 
```

* * *

# 通过 HTML 元素上的处理程序覆盖焦点事件集

这以与覆盖该方法类似的方式完成`.focus()`。但是，在这种情况下，我们将针对`EventTarget`构造函数并修改`addEventListener`原型：

```
let oldAddListener = HTMLElement.prototype.addEventListener;
EventTarget.prototype.addEventListener = function () {
    let scope = this;
    let func = arguments[1];

    if (arguments[0] === 'focus') {
        arguments[1] = function (e) {
            yourCustomFunction(scope);
            func(e);
        };
    }

    oldAddListener.apply(this, arguments);
}; 
```

如果您根本不想要原始行为，则可以删除`func`调用 ( `func(e)`)。

* * *

# 覆盖通过`onfocus`属性设置的焦点事件

这样做实际上非常棘手，并且很可能会有一些无法预料的限制。也就是说，我找不到通过修改原型等来覆盖它的方法。我可以完成这项工作的唯一方法是使用[MutationObservers](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)。它通过查找所有具有该属性的元素来工作，`onfocus`并将第一个函数设置为运行覆盖函数：

```
let observer = new MutationObserver(handleOnFocusElements);
let observerConfig = {
    attributes: true,
    childList: true,
    subtree: true,
    attributeFilter: ['onfocus']
};
let targetNode = document.body;

observer.observe(targetNode, observerConfig);

function handleOnFocusElements() {
    Array
        .from(document.querySelectorAll('[onfocus]:not([onfocus*="yourCustomFunction"])'))
        .forEach(element => {
            let currentCallbacks = element.getAttribute('onfocus');
            element.setAttribute('onfocus', `yourCustomFunction(this); return; ${currentCallbacks}`);
        });
} 
```

如果您想完全阻止原始 onfocus 触发其事件，您可以在任何突变更改时完全清空 onfocus 属性，并将值设置为您想要的函数。

* * *

# 一个包含所有代码片段的示例：

```
(function() {

  window.yourCustomFunction = function(target) {
    console.log('OVERRIDE on element', target);
  };

  let observer = new MutationObserver(handleOnFocusElements);

  let observerConfig = {
    attributes: true,
    childList: true,
    subtree: true,
    attributeFilter: ['onfocus']
  };

  let targetNode = document.body;

  // Start overriding methods
  // The HTML `.focus()` method
  let oldHTMLFocus = HTMLElement.prototype.focus;
  HTMLElement.prototype.focus = function() {
    yourCustomFunction(this);
    oldHTMLFocus.apply(this, arguments);
  };

  // Event Target's .addEventListener prototype
  let oldAddListener = HTMLElement.prototype.addEventListener;
  EventTarget.prototype.addEventListener = function() {
    let scope = this;
    let func = arguments[1];

    if (arguments[0] === 'focus') {
      arguments[1] = function(e) {
        yourCustomFunction(scope);
        func(e);
      };
    }

    oldAddListener.apply(this, arguments);
  };

  // Handle the onfocus attributes
  function handleOnFocusElements() {
    Array
      .from(document.querySelectorAll('[onfocus]:not([onfocus*="yourCustomFunction"])'))
      .forEach(element => {
        let currentCallbacks = element.getAttribute('onfocus');
        element.setAttribute('onfocus', `yourCustomFunction(this); return; ${currentCallbacks}`);
      });
  }

  window.addEventListener('load', () => {
    handleOnFocusElements();
    observer.observe(targetNode, observerConfig);
  });
})();

let input = document.querySelector('input');

input.addEventListener('focus', function() {
  console.log('Add Event Listener Focus');
});

function attributeHandler() {
  console.log('Called From the Attribute Handler');
}
```

```
<input type="text" onfocus="attributeHandler()">
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T20:21:26.170

在纯 JS 中：

HTML：

```
<input id="test" type="textfield" />​ 
```

JS：

```
var myInput = document.getElementById("test");
myInput.addEventListener("focus",deFocus(myInput),true);

function deFocus(element) {
    element.setAttribute('readonly','readonly');
    return false;
} 
```

工作[小提琴](http://jsfiddle.net/KG58e/)

在 JQuery 中：

HTML

```
​&lt;input id="test" type="textfield" /> 
```

jQuery

```
​$('#test').focus(function() {
    $(this).blur();
});​​​​​​​​​​​​​​​​​​​​ 
```

工作[小提琴](http://jsfiddle.net/vZQ9k/)

您可以将其添加`EventListener`到您想要的任何内容、类、id 等，并通过函数运行它或触发其他东西来解锁它们。JQuery 也可以非常顺利地处理这个问题，但如果你走那条路，我建议使用一个类作为选择器，然后你可以动态添加和删除该类以禁用焦点。

# wordpress - 经典 ASP RSS 解析器和 Wordpress Feed 兼容性

> ID：13159866
> 
> 赞同：0
> 
> 时间：2012-10-31T14:08:04.467
> 
> 标签：wordpress, asp-classic, rss, xml-parsing

我会以我是一名网页设计师这一事实作为这个问题的开头，并且我正试图通过修复我们在工作中使用的这个经典 ASP RSS 解析器代码来捏造自己的方式，所以你可能能够提供的任何基本见解都是赞赏。

我遇到了这段代码的障碍。它会解析 RSS 提要，但通常只解析使用 Feedburner 的 SmartFeed 兼容性设置的提要。我需要它做的是能够解析一个简单的简 Wordpress 提要，这似乎很难做到。我的目标是增加额外的兼容性，这样这段代码在解析提要时就不会那么挑剔。

当我将一个直接的 WP 提要放入其中时，它会引发提要无效错误并返回一个错误代码 -2146697211，从查找代码来看，这似乎意味着无法找到提要。我尝试将*Server.CreateObject("MSXML2.DomDocument.3.0")*更改为*Server.CreateObject("MSXML2.DomDocument.4.0")*，但似乎我们的服务器无法处理 4.0。虽然这可能是可以升级的东西，但在此问题上获得开发时间的可能性很小。因此，如果可能的话，我将尝试使用当前的 IIS 设置使其工作。

是否有人对可以进行任何调整以使其正常工作有任何想法？谢谢。

```
 <%
                SUB DisplayRSSFeed(URLToRSS, MaxNumberOfItems) 

                Set fs=Server.CreateObject("Scripting.FileSystemObject")
                IF fs.FileExists(Server.MapPath(TemplatePath & "rss_template.asp")) THEN
                    Set f=fs.OpenTextFile(Server.MapPath(TemplatePath & "rss_template.asp"), 1)
                    itemTemplate = f.ReadAll
                    f.Close
                Set f=Nothing 

                ELSE

                    ' =========== configuration =====================
                    ' Item template.
                    ' {LINK} will be replaced with item link
                    ' {TITLE} will be replaced with item title
                    ' {DESCRIPTION} will be replaced with item description
                    'ItemTemplate = "<tr><td><a target='_blank' href=" & """{LINK}""" & ">{TITLE}</a><BR>{DESCRIPTION}</td></tr>"

                    ItemTemplate = ""
                    ItemTemplate = ItemTemplate & "<div class=""sp_blogPost"">"
                    ItemTemplate = ItemTemplate & "     <h2><a href=""{LINK}"" target=""_blank"">{TITLE}</a></h2>"
                    ItemTemplate = ItemTemplate & "     <h5>Posted on {DATE}</h5>"
                    ItemTemplate = ItemTemplate & "     <p>"
                    ItemTemplate = ItemTemplate & "         {DESCRIPTION}"
                    ItemTemplate = ItemTemplate & "     </p>"
                    ItemTemplate = ItemTemplate & "     <a href=""{LINK}"" target=""_blank"">Continue Reading Article</a>"
                    ItemTemplate = ItemTemplate & "</div>"
                    ItemTemplate = ItemTemplate & "<div class=""sp_blogDivider""></div>"
                    ' ================================================
                END IF 

                    On Error Resume Next
                    Set xmlHttp = Server.CreateObject("MSXML2.XMLHTTP")
                    xmlHttp.Open "Get", URLToRSS, false
                    IF Err.number <> 0 then
                        Response.Write "The URL is not valid"
                        Exit Sub            
                    END IF        
                    xmlHttp.Send()
                    RSSXML = xmlHttp.ResponseText

                Set xmlDOM = Server.CreateObject("MSXML2.DomDocument.3.0")
                    xmlDOM.async = false
                    xmlDOM.LoadXml(RSSXML)
                    IF Err.number <> 0 then
                        Response.Write "The RSS Data is not valid"
                        Response.Write Err.number
                        Exit Sub            
                    END IF        

                    Set RSSItems = xmlDOM.getElementsByTagName("item") ' collect all "items" from downloaded RSS        

                    j = -1
                    FOR EACH RSSItem IN RSSItems
                    FOR EACH child IN RSSItem.childNodes
                        Select case lcase(child.nodeName)
                            case "title"
                                RSStitle = child.text
                            case "enclosure"
                                RSSimage = child.getAttribute("url")
                    ''      case "link"
                    ''          RSSlink = child.text
                            case "guid"
                                RSSlink = child.text
                            case "description"
                                RSSdescription = child.text

                                Set re = New RegExp
                                re.Pattern = "<[^>]+>"
                                re.IgnoreCase = true
                                re.Global = true

                                RSSdescription = re.Replace(RSSdescription, "")

                                set re = nothing

                                if len(RSSdescription) > 300 then RSSdescription = mid(RSSdescription, 1, 300) & "..."
                            case "pubdate"
                                RSSdate = child.text
                                RSSdate = split(RSSDate, "T")(0)
                                arrDate = split(RSSDate, "-")
                                if ubound(arrDate) = 2 then
                                    RSSdate = arrDate(1) & "." & arrDate(2) & "." & arrDate(0)
                                else
                                    RSSdate = Replace(RSSdate, "-", ".")
                                end if
                        END SELECT
                        NEXT                                     
                            j = J+1                                     
                            IF J < CInt(MaxNumberOfItems) THEN
                                Itemcontent = ItemTemplate
                                Itemcontent = Replace(Itemcontent,"{DATE}", RSSdate)
                                Itemcontent = Replace(Itemcontent,"{IMAGE}", RSSimage)
                                ItemContent = Replace(ItemContent,"{LINK}",RSSlink)
                                ItemContent = Replace(ItemContent,"{TITLE}",RSSTitle)
                                ItemContent = Replace(ItemContent,"{DESCRIPTION}",RSSDescription)

                                Response.Write ItemContent
                                ItemContent = ""
                            END IF
                        NEXT
                    'Response.Write "</table>"
                    On Error GoTo 0
                END SUB
                %> 
```

# javascript - Chrome 和 Opera 上的 JavaScript 键挂钩问题

> ID：13159872
> 
> 赞同：0
> 
> 时间：2012-10-31T14:08:28.880
> 
> 标签：javascript, html, google-chrome, opera

我正在用 HTML5 和 JavaScript 做一个视频接口网络。

我在使用 JavaScript 时遇到问题，因为我需要使用按键来控制视频，因此当有人从键盘上按下某个键（例如“P”）时，视频将处于“播放”或“暂停”状态。 **问题是它不能在 Chrome 和 Opera 上运行，但在 Firefox 上运行。**

以下摘录是总代码的一部分：

的HTML：

```
<video width="775" id="player" preload controls timeupdate="timeupdate()"  onclick="repro()" onMouseOver="mostrarControles()" onMouseOut="ocultarControles()">
    <source src="video.mp4" type="video/mp4" />
    <source src="video.theora.ogv" type="video/ogg" />
    <source src="video.webmvp8.webm" type="video/webm" />
    TU NAVEGADOR NO SOPORTA VIDEO EN HTML5.
</video>
<div id="controls" onMouseOut="ocultarControles()" onMouseOver="mostrarControles()" >
    <!-- Buttons of control-->
</div> 
```

`Java.JS`- 我在 Chrome 和 Opera 上遇到问题的功能：

```
document.getElementById("controls").addEventListener('keydown',function(event) {
    controlTeclado(event);
    //alert("OK");
}, true); 
```

我检测到 Chrome 和 Opera 无法访问内部`.addEventListener()`，我不知道为什么，知道吗？

`ProgressBar.JS:`

```
function controlTeclado(evento) {
    mostrarControles(); // show controls on the web page
    if (evento.keyCode==80) {
        alert(" Key: "+evento.keyCode);
        repro(); //play video
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:18:38.243

`<div>`默认情况下，元素不接收键事件。只有诸如表单输入和 contenteditable 元素之类的可聚焦元素才可以。要使常规`<div>`能够触发键事件，请为其分配一个`tabIndex`（零值表示该元素处于常规制表符顺序）：

```
<div id="controls" tabindex="0"
        onMouseOut="ocultarControles()" onMouseOver="mostrarControles()">
    ...
</div> 
```

# sql-server - SQL 选择数据

> ID：13159879
> 
> 赞同：0
> 
> 时间：2012-10-31T14:08:51.163
> 
> 标签：sql-server, database, select

我设置了一张表格，这是客户对产品的还款计划。

我的表由以下字段组成：

> 销售ID | 付款到期日 | 应付金额

每次销售我需要的是：

> 销售ID | 首次付款日期 | FirstPaymentValue | 定期付款值 | 最终付款价值

每个还款计划都有以下特点：

首付款金额由客户定义。定期和最终付款由余额决定。

例如

销售 = £200 期限 = 14 周（14 次付款）

首付款 = 50 英镑 (x1)

定期付款 = 12 英镑 (x12)

最终付款 = 6 英镑 (x1)

请你能告诉我如何检索我需要的东西。

补充：到目前为止的代码：

这是我到目前为止所取得的成就，但这只会让我获得每次销售的首次付款和首次付款日期：

```
SELECT      
FP.SaleID, FP.FirstPaymentDate, RS.AmountDue AS FirstPayment 
FROM    
(       
SELECT SaleID, MIN(PaymentDueDate)AS FirstPaymentDate       
FROM RepaymentSchedule          
GROUP BY SaleID     
) AS FP 
LEFT OUTER JOIN
RepaymentSchedule AS RS ON FP.SaleID = RS.SaleID AND FP.FirstPaymentDate =   RS.PaymentDueDate ORDER BY RS.SaleID 
```

附加：数据样本：14 周内 280 英镑

```
SaleID  PaymentDueDate            AmountDue
41      2012-08-29 00:00:00.000   120.00
41      2012-09-05 00:00:00.000   12.30
41      2012-09-12 00:00:00.000   12.30
41      2012-09-19 00:00:00.000   12.30
41      2012-09-26 00:00:00.000   12.30
41      2012-10-03 00:00:00.000   12.30
41      2012-10-10 00:00:00.000   12.30
41      2012-10-17 00:00:00.000   12.30
41      2012-10-24 00:00:00.000   12.30
41      2012-10-31 00:00:00.000   12.30
41      2012-11-07 00:00:00.000   12.30
41      2012-11-14 00:00:00.000   12.30
41      2012-11-21 00:00:00.000   12.30
41      2012-11-28 00:00:00.000   12.40 
```

我猜 FinalPaymentValue 并不太重要。

真的，我只需要知道如何计算出定期付款是多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:18:01.683

这应该有效：

```
SELECT pd.saleid,
       pd.firstpaymentdate                               AS FirstPaymentDate,
       (SELECT amountdue
        FROM   repaymentschedule
        WHERE  saleid = pd.saleid
               AND paymentduedate = pd.firstpaymentdate) AS FirstPaymentValue,
       (SELECT TOP 1 amountdue
        FROM   repaymentschedule
        WHERE  saleid = pd.saleid
               AND paymentduedate <> pd.firstpaymentdate
               AND paymentduedate <> pd.lastpaymentdate) AS RegularPaymentValue,
       (SELECT amountdue
        FROM   repaymentschedule
        WHERE  saleid = pd.saleid
               AND paymentduedate = pd.lastpaymentdate)  AS FinalPaymentValue
FROM   (SELECT saleid,
               Min(paymentduedate) AS FirstPaymentDate,
               Max(paymentduedate) AS LastPaymentDate
        FROM   repaymentschedule
        GROUP  BY saleid) pd 
```

## [看到它在行动](http://sqlfiddle.com/#!3/e1318/2)

样本结果：

```
| 销售标识 | 第一次付款日期 | 首付款价值 | 常规支付价值 | FINALPAYMENTVALUE |
-------------------------------------------------- -------------------------------------------------- ----
| 41 | 2012 年 8 月 29 日 00:00:00+0000 | 120 | 12.3 | 12.4 |
```

# php - 将 xml 对象推入数组

> ID：13159882
> 
> 赞同：2
> 
> 时间：2012-10-31T14:08:57.490
> 
> 标签：php, xml, arrays

好吧，所以我对此有点困惑。我有一个看起来像这样的 xml：

```
<track>
<artist mbid="77cceea7-91bb-4a4c-ae41-bc9c46c1ccb5"> Red Hot Chili Peppers </artist>
<name> under the bridge </name>
<streamable>0</streamable>
<mbid/>
<album mbid="0fe94139-df63-4e51-b2e7-a1d53535cdd9">  Blood Sugar Sex Magik </album>
<url> http://xxxxxx.com </url>
<date uts="1351691244">31 Oct 2012, 13:47</date>
</track> 
```

我使用 simpleXML 来解析 xml，如下所示：

```
$artists = array();

$xml = simplexml_load_file("http://xxxxxxxxxxxxxx");

foreach($xml->recenttracks->track  as $track)
{
$artist = $track->artist;
    array_push($artists, $artist);
}  

var_dump($artists); 
```

现在我希望得到一个看起来像这样的漂亮数组：

```
array(4) {
[0]=>
string(20) "Red Hot Chili Peppers "
[1]=>
string(20) "Red Hot Chili Peppers"
} 
```

但我得到的是这样的：

```
array(2) 
{ 
[0]=> object(SimpleXMLElement)#6 (2) { ["@attributes"]=> array(1) { ["mbid"]=> string(36) "8bfac288-ccc5-448d-9573-c33ea2aa5c30" } [0]=> string(21) "Red Hot Chili Peppers" } 
[1]=> object(SimpleXMLElement)#4 (2) { ["@attributes"]=> array(1) { ["mbid"]=> string(36) "8bfac288-ccc5-448d-9573-c33ea2aa5c30" } [0]=> string(21) "Red Hot Chili Peppers" } 
} 
```

现在我如何只获得艺术家，而不是整个 SimpleXMLElement，因为我无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:23:17.150

The items you are adding to the array are `SimpleXMLElement`s. If you just want to add the string value, you must cast the `SimpleXMLElement` to a string.

```
$artists = array();
foreach($xml->recenttracks->track  as $track)
{
    $artists[] = (string) $track->artist;
}  

var_export($artists); 
```

In general, you always want to cast `SimpleXMLElement` to a string when you want the string value. In some cases PHP will automatically coerce to string (for example when you `echo` it), but PHP type coercion rules are so complicated that it's better to always be explicit.

(Also, there is no need for `array_push()`, just use the bracket notation `$arrayname[] = $appendedvalue`.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:11:17.107

这`var_dump`是为您提供可用于访问不同部分的密钥，并且转换为字符串将为您提供节点值，请尝试：

```
$artist = (string) $track->artist[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:14:23.630

看看这些链接......他们过去曾帮助过我。

[http://www.bookofzeus.com/articles/convert-simplexml-object-into-php-array/](http://www.bookofzeus.com/articles/convert-simplexml-object-into-php-array/)

[http://milesj.me/blog/read/simplexml-to-array](http://milesj.me/blog/read/simplexml-to-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:16:50.820

试试下面的代码。

```
$xml = simplexml_load_file("artist.xml");

echo $xml->artist; 
```

# database - 我们可以说关系的依赖关系保持分解是无损分解..？

> ID：13159883
> 
> 赞同：1
> 
> 时间：2012-10-31T14:09:00.200
> 
> 标签：database, normalization, decomposition

我想问一下分解是否保留了依赖关系，那么它是否总是损失更少的分解......？

假设我有一个关系 R 并且我已经在两个表 R1 和 R2 中分解了这个表，以便 R1 和 R2 保留 R 中存在的所有依赖关系。那么这个分解是无损的还是无法回答的..？

请指导我。谢谢。

# javascript - 使用 underscorejs 过滤二维数组

> ID：13159885
> 
> 赞同：0
> 
> 时间：2012-10-31T14:09:13.457
> 
> 标签：javascript, underscore.js

我在 javascript 中有这个数组：你可以[在这里看到](http://fiddle.jshell.net/LBa5A/1/)

```
 Array
(
    [2012-10-01] => Array
        (
            [1] => 1
            [2] => 0

...
            [148] => 0
            [149] => 0
            [150] => 1
        )

[2012-10-02] => Array
        (
            [1] => 0
            [2] => 1

...
            [148] => 0
            [149] => 1
            [150] => 0
        )

[2012-10-03] => Array
        (
            [1] => 1
            [2] => 0

...
            [148] => 0
            [149] => 0
            [150] => 1
        )
.............. 
```

为了减少它，我想只保留具有 1 的项目并省略具有 0 的项目。像这样

```
 Array
(
    [2012-10-01] => Array
        (
            [23] => 1
            [64] => 1
            [70] => 1
            [73] => 1
            [76] => 1
            [108] => 1
            [138] => 1
        ) 
```

我使用了 underscorejs 和这段代码：

```
 var new_o={};
    var v = _.each(original_array,function(day,key){
        var arr = {};
        _.map(day,function(item,k){
             if (item){
                 arr[k]=item;
             }
        }) ;

        new_o[key]= arr;
    } )    ; 
```

它有效，但我很确定，我没有得到最好的下划线。有人可以提出更聪明的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:30:16.257

如果你不[`_.map`](http://underscorejs.org/#map)使用它的返回值就不要使用，那只是稍微贵一点的[`_.each`](http://underscorejs.org/#each).

就简化而言，您有点卡住了，因为 Underscore 和 JavaScript 都确实想要遍历数组并且您有嵌套对象（顺便说一句，在 JavaScript 中`{ }`是一个*对象文字*`[ ]`，是一个*数组*，它们完全不同）。可能对当前数据结构能做的最好的事情就是[`_.reduce`](http://underscorejs.org/#reduce)在携带新的子对象的同时迭代子对象；像这样的东西：

```
var new_o = { };
_.each(original, function(day, key) {
    new_o[key] = _(day).reduce(function(memo, item, k) {
        if(item)
            memo[k] = item;
        return memo;
    }, { });
}); 
```

演示：http: [//jsfiddle.net/ambiguous/FZRV3/](http://jsfiddle.net/ambiguous/FZRV3/)

# c# - 部分视图和模型不起作用

> ID：13159887
> 
> 赞同：1
> 
> 时间：2012-10-31T14:09:23.940
> 
> 标签：c#, .net, asp.net-mvc-3

我正在使用 Razor 视图在 MVC 3 中工作。我创建了一个调用局部视图的页面

```
@Html.Partial("_FeaturedRatesBox") 
```

看起来像这样：

```
@model IEnumerable<AppleWeb.Models.RateViewer>

<div class="col">
<h3>Today's Featured Rates</h3>
<form method="post" action="">
  <div class="tabber">
    <ul class="tabs unstyled">
      <li class="selected"><a href="#tab1">Loans</a></li>
      <li><a href="#tab2">Deposits</a></li>
    </ul>
    <div class="tab" id="tab1">
    @foreach (var item in Model)
    {
        <div class="rate"> <span class="left">@item.AccountName <br />
        </span> <span class="right"> As low as <span class="percent">@item.Rate</span></span></div>
        <!-- end of rate -->
    }
    </div>
    <!-- end of tab -->
    <div class="tab" id="tab2"> Loremipsum
    </div>
    <!-- end of tab -->
    <button type="submit" class="btn alignright">Apply Now</button>
  </div>
  <!-- end of tabber -->
</form>
</div> 
```

`rateviewer.cs`模型如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.EntityModel;
using AppleWeb.Models;

namespace AppleWeb.Models
{
    public class RateViewer
    {
        private PublicWebEntities pubDB = new PublicWebEntities();
        public virtual IEnumerable<DepositRate> FeaturedRatesDeposit()
        {
            var data = from item in pubDB.DepositRates
                       where item.Featured.Equals(true)
                       select item;
            return data.ToList();
        }
    }
} 
```

它在调用局部视图的行上出错并说

> CS1061：“AppleWeb.Models.RateViewer”不包含“AccountName”的定义，并且找不到接受“AppleWeb.Models.RateViewer”类型的第一个参数的扩展方法“AccountName”（您是否缺少 using 指令或部件

那么 AccountName 和 Rate 都是 DepositRates 实体对象的实体名称。从 DataModel.Designer 文件中：

```
public static DepositRate CreateDepositRate(global::System.Int32 rateID, global::System.String accountName, global::System.Double rate, global::System.Double aPY, global::System.Int16 sortingOrder)
{
    DepositRate depositRate = new DepositRate();
    depositRate.RateID = rateID;
    depositRate.AccountName = accountName;
    depositRate.Rate = rate;
    depositRate.APY = aPY;
    depositRate.SortingOrder = sortingOrder;
    return depositRate;
} 
```

我希望这样工作，因为这样我就可以在网站的其他地方使用这个模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:11:15.177

您需要迭代模型上的 IEnumerable 属性，即。`@foreach (var item in Model.FeaturedRatesDeposit)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:20:27.450

您需要将一个类型为 AppleWeb.Models.RateViewer 的 IEnumerable 对象传递给视图，

所以代码应该是这样的：

```
@Html.Partial("_FeaturedRatesBox", new List<AppleWeb.Models.RateViewer>())

"new List<AppleWeb.Models.RateViewer>()" can be replaced with the actual instance of the collection you want to pass to the view. 
```

此外，“RateViewer”类型不包含任何名为“AccountName”的字段。

# jquery - Fancybox 高度问题 - 不覆盖整个长页面（z-indexes 很好）

> ID：13159890
> 
> 赞同：0
> 
> 时间：2012-10-31T14:09:36.367
> 
> 标签：jquery, css, background, fancybox, height

我想在页面加载时加载fancybox。它工作正常，但我对它的高度有疑问。假设页面的高度为 3000px，fancybox 的高度为 1500px。如果您想查看页面的最低部分，两者都应该向下滚动。不幸的是，一切正常，但页面上的页脚没有被花哨的灰色覆盖。Z索引很好。我试图用 autoDimensions、宽度和高度来修复它。不幸的是，我无法用fancybox周围的灰色覆盖整个页面。

此外，灰色完成的边框有点跳跃。此外，灰色完成的边框在 FF 中的页脚正上方，在 Chrome 中略低。如何覆盖邮件页面的整个高度？任何想法应该有什么参数`.fancybox`？

下面的代码没有覆盖整个页面

```
$.fancybox({

    'width': 620,
    'height': $(window).height(),
    'autoDimensions' : false,

    'content': 'long form with 1500px down',
}); 
```

花式盒子加载`$(document).ready()`。`$(window).load()`也试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:49:08.243

难道你不需要传递一个ID或类来调用fancybox吗？我是说`$('#somediv').fancybox()`

# servicestack - 我们如何在 ServiceStack 中删除特定用户的会话？

> ID：13159891
> 
> 赞同：4
> 
> 时间：2012-10-31T14:09:37.753
> 
> 标签：servicestack

管理员可以禁用或暂停用户的入口。

我们可以在“用户登录”中检查“用户是否被禁用”。（“为每个请求检查 Db”不是好的选择）

所以我们想在管理员禁用它的帐户时删除用户的会话。

我们怎样才能实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-18T00:20:42.723

如果您知道或保留了，`sessionId`您可以使用以下命令从缓存中删除会话：

```
using (var cache = TryResolve<ICacheClient>())
{
    var sessionKey = SessionFeature.GetSessionKey(sessionId);
    cache.Remove(sessionKey);
} 
```

但是 ServiceStack 本身并没有保留所有用户会话 ID 的映射。避免对每个请求进行数据库查找的一种方法是在禁用帐户时记录已禁用的用户 ID，稍后您可以在全局请求过滤器中对其进行验证，以确保用户未被锁定。

存储锁定用户 ID 的最佳方式是在缓存中，这样锁定用户 ID 的可见性和生存期就在存储会话的同一个缓存中。您可以使用自定义缓存键来记录锁定的用户 ID，例如：

```
GlobalRequestFilters.Add((req, res, dto) =>
{
    var session = req.GetSession();
    using (var cache = TryResolve<ICacheClient>())
    {
        if (cache.Get<string>("locked-user:" + session.UserAuthId) != null)
        {
            var sessionKey = SessionFeature.GetSessionKey(session.Id);
            cache.Remove(sessionKey);
            req.Items.Remove(ServiceExtensions.RequestItemsSessionKey);
        }
    }
}); 
```

这将在他们下次尝试访问 ServiceStack 时删除锁定的用户会话，迫使他们再次登录，此时他们会注意到他们已被锁定。

[在此提交](https://github.com/ServiceStack/ServiceStack/commit/7f4be09dea08281524d6353f5d51ab1f3852f2bb)中添加了一个新的 RemoveSession API ，这使它变得更好（从 v4.0.34+ 开始）：

```
if (cache.Get<string>("locked-user:" + session.UserAuthId) != null)
    req.RemoveSession(session.Id); 
```

# c# - 排序阻塞集合 同时保存到文本文件

> ID：13159892
> 
> 赞同：3
> 
> 时间：2012-10-31T14:09:39.220
> 
> 标签：c#, c#-4.0

我有一个消费者枚举 a`BlockingCollection<T> where T : IComparable`然后将一行写入每个项目的文本文件。最终结果是最大约 7Gb-10Gb 的文本文件。但是，它们不按顺序排列。

我无法在内存中对列表进行排序，因为它最终可能会非常大。我能想到的解决方案的唯一方法是写入临时文本文件，以便它们到达，然后在最后对它们进行改组，但我无法想象这是非常有效的。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:12:32.973

如果您正在寻找什么，我相信索引排序。这个想法是为每个大项目分配一个索引，然后只是对索引进行排序，最后只是循环遍历有序索引数组并写出文件。

维基百科：[内存使用模式和索引排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Memory_usage_patterns_and_index_sorting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:42:25.180

我最终使用 SSIS 将结果加载到 SQL 中的临时表中，并以这种方式对它们进行排序。

# r - 通过矩阵的列查找满足某些标准的值的百分比

> ID：13159895
> 
> 赞同：3
> 
> 时间：2012-10-31T14:09:48.647
> 
> 标签：r

我创建了一个 8 x 1000 的 Exp() 变量矩阵。这表示从指数分布中采样 8 次的 1000 次迭代（列）。我试图弄清楚如何获得每列中小于临界值的值的百分比。所以我最终得到了一个 1000 个百分比的向量。我已经尝试了几件事，但对 R 来说仍然相对较新，我遇到了一些困难。

这是我当前版本的代码，不太好用。当我想要样本的均值或方差时，我使用了 apply 函数（没有 for 循环），所以我一直在尝试这种方法，但这个百分比的东西似乎需要一些不同的东西。有什么想法吗？

```
 m=1000
 n=8
 theta=4
 crit=3
 x=rexp(m*n,1/theta)

 Mxs=matrix(x,nrow=n)

 ltcrit=matrix(nrow=m,ncol=1)

 for(i in 1:m){
    lt3=apply(Mxs,2,length(which(Mxs[,i]<crit)/n))
    }

 ltcrit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:11:31.710

您可以`apply`在没有任何 for 循环的情况下使用并得到答案：

```
percentages = apply(Mxs, 2, function(column) mean(column < crit)) 
```

请注意使用`function(column) mean(column < crit)`. 您可能`apply(Mxs, 2, mean)`在想要列的均值或`apply(Mxs, 2, var)`想要列的方差时使用，但请注意，您可以将所需的任何函数放入该空间，它将在每一列上执行。

另请注意，这`mean(column < crit)`是获得`column`小于的值百分比的好方法`crit`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T14:24:46.413

您可以使用`colMeans`：

```
colMeans(Mxs < crit)
[1] 0.500 0.750 0.250 0.375 0.375 0.875 ... 
```

# geometry - 几何 - 两个具有相同方向的正方形的交集

> ID：13159901
> 
> 赞同：0
> 
> 时间：2012-10-31T14:10:00.390
> 
> 标签：geometry, computational-geometry

我有 2 个方向相同的正方形。我知道他们中心的坐标。它们具有相同大小的区域。

它们可能相互交叉。我想计算他们的交叉区域以及他们的联合区域。

假设它们的中心是第一个正方形的 (a, b) 和第二个正方形的 (x, y)。其中一条边的长度为 l。我如何据此计算他们的交集和他们的并集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:39:57.123

由于它们具有相同的方向，您可以先旋转两个正方形，使它们的边与 x、y 坐标对齐，然后应该很容易计算出您想要的。

# javascript - JavaScript 运行某些操作时 IE 停止工作

> ID：13159905
> 
> 赞同：1
> 
> 时间：2012-10-31T14:10:04.903
> 
> 标签：javascript, html, internet-explorer, events

我有一个单选按钮和复选框列表，我想监视它们的事件以
在单击它们后获取它们的值我想对这些值运行一些逻辑
现在我看到的是它减慢了实际的渲染时间IE8/IE9 的变化
现在发生的事情是我看到视图等待结果，它看起来很奇怪所有其他浏览器都轻而易举地通过它，
但 IE 并没有那么多

这是一个示例代码

```
<html>
<body>
    <input type="radio" name="rad" value="1" id="t" />
</body>

<script type="text/javascript">     
    function addEventHandler(elem,eventType,handler) {
        if (elem.addEventListener){
            elem.addEventListener (eventType,handler,false);
        }else if (elem.attachEvent){
            elem.attachEvent ('on'+eventType,handler);
        }
    }

        var el = document.getElementById("t");

    addEventHandler( document.getElementById("t") , 'click' , function(){
        for(var i=0;i<30000000;i++);// the for loop is only to show the blocking behavior that OP is experiencing
        alert("handled")
    } );
</script>
</html> 
```

如何防止 ie 视图停止并等待 JavaScript 直到完成它的操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:14:58.530

> *“我怎样才能防止 ie 视图停止并等待 JavaScript 直到完成它的操作？”*

你不能阻止 IE 等待 JavaScript。通过等待，它的行为是正确的。

您能做的最好的事情是改进您的代码，以便它不会花费很长时间来执行，或者将其分解为异步执行的较小块。

# javascript - 与LESS作斗争

> ID：13159912
> 
> 赞同：0
> 
> 时间：2012-10-31T14:10:31.673
> 
> 标签：javascript, css, less

我正在尝试了解LESS。在一个站点上取得了非常快速的成功后，我现在在另一个站点上苦苦挣扎，同时使用几乎相同的代码：

```
<link href="css/reset.min.css" rel="stylesheet" />
<link href="css/styles.less" rel="stylesheet/less" type="text/css" />
<script src="js/less-1.3.1.min.js" type="text/javascript"></script> 
```

我应该更改服务器上的任何内容以使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:21:18.303

尝试访问您的 LESS 文件时收到 404：http: [//belleandvidere.co.uk/dev/styles.less](http://belleandvidere.co.uk/dev/styles.less)

请检查您的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:13:17.883

在某一时刻，我遇到了 HTML 属性的*顺序*问题（这无关紧要，但确实如此）。

我发现这`<link rel="stylesheet/less" type="text/css" href="styles.less">`会起作用，而`<link href="styles.less" rel="stylesheet/less" type="text/css">`不会。

我很确定less.js 错误地检查了`<link>`元素。这可能仍然是问题，也可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:13:46.813

尝试在 LESS CSS 文档之前调用 LESS JavaScript 文件。

我假设这是由于 HTML DOM。

使用 HTML DOM 加载 HTML，加载 CSS，然后加载 JavaScript。

尝试放置关于链接标签的脚本标签。

谢谢，我希望这会有所帮助。

# command-line - 检查目录中的文件后批量运行exe

> ID：13159913
> 
> 赞同：1
> 
> 时间：2012-10-31T14:10:36.573
> 
> 标签：command-line, batch-file

我有一个需要通过命令行运行的程序，我想制作一个批处理文件以节省时间。它在同一目录中查找具有特定扩展名的任何文件，然后运行 ​​exe 来操作该文件。就像是：

```
example.exe option1 *.ext 
```

`.ext`它正在寻找的具有正确扩展名类型的文件在哪里。文件类型通常具有不同的文件名，但始终具有相同的扩展名。该选项只是程序知道如何使用的东西，因此现在可以忽略。

诀窍是我只希望它在同一目录中没有另一个具有相同名称但扩展名不同的文件时运行。

我想我看到了一些关于能够在批处理文件中使用 IF 语句的东西，但我不知道如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:24:14.453

您可以自己遍历文件：

```
for %%x in (*.ext) do (
  if exist %%~n.someotherext example.exe option1 "%%x"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:23:19.740

```
echo off

REM search .txt files.
for %%f in (*.txt) do (
  REM skip if a .log file with the same name exists.
  if not exist %%~nf.log (

    echo Now executing %%f
    notepad.exe %%f
    REM Terminate the loop after the first succesful file
    goto end

  ) else (
    echo Skipping %%f
  )
)

echo Nothing to process.

:end
pause 
```

# java - 为什么我的回显服务器有时在消息末尾有垃圾数据？

> ID：13159915
> 
> 赞同：1
> 
> 时间：2012-10-31T14:10:50.177
> 
> 标签：java, networking, udp

嗨，我使用数据报制作了一个回显客户端 - 服务器代码。代码正在运行，从客户端发送的消息正在服务器端接收，然后它们被回显给客户端。以下场景显示了我遇到的问题

1->客户端：嗨，服务器：嗨，回显：嗨

2->Client: hello , server : hello , echoed back : hello 现在当客户端输入一条比最后一条短的消息时，会发生以下情况

3->客户端：K，服务器：Kello，回显：K

我不明白为什么服务器会打印上一条消息的其余字符，这是服务器端代码：

```
 import java.awt.BorderLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.IOException;
    import java.net.DatagramPacket;
    import java.net.DatagramSocket;
    import java.net.InetAddress;
    import java.net.SocketException;
    import java.net.UnknownHostException;

    import javax.swing.SwingUtilities;
    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JScrollBar;
    import javax.swing.JScrollPane;
    import javax.swing.JTextArea;
    import javax.swing.JTextField;

    public class Server extends JFrame {
int port;
// JTextField textField;
JButton resendPacket;
JTextArea chatWindow;
DatagramSocket socket;
private final int PACKET_SIZE = 124;
private final int port_Number = 6789;
DatagramPacket packet =  new DatagramPacket(new byte[PACKET_SIZE], PACKET_SIZE);

    InetAddress host;

public Server() {
    super("INSTANT ECHO - SERVER");
    resendPacket = new JButton("Echo");
    chatWindow = new JTextArea();

//  add(resendPacket, BorderLayout.SOUTH);
    add(new JScrollPane(chatWindow));
    setSize(300, 300);
    setVisible(true);
}

public void startRunning() {

    try {
        port = 6777;
        socket = new DatagramSocket(port);
        showMessage("Server is Ready... \n");
        /*resendPacket.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                // TODO Auto-generated method stub
                try {
                    socket.send(packet);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }); */
        while(true)
        {
            processPacket();
        }

    } catch (SocketException e) {
        // TODO: handle exception
        showMessage("\n Could not send packet!\n");
        e.printStackTrace();
    } 
}

private void processPacket() {

    // create a packet

    // receive a packet

    try {
        socket.receive(packet);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        showMessage("\nCould not receive Packet");
        e.printStackTrace();
    }
    try {
        socket.send(packet);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // display the contents of the packet
    showMessage(new String(packet.getData()));

    // send the packet again to the sender

}

public void showMessage(final String text) {
    SwingUtilities.invokeLater(

    new Runnable() {

        public void run() {
            chatWindow.append("\n Packet Data : " + text);
        }
    });

} 
```

}

这是客户端代码

```
 import java.awt.BorderLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.IOException;
    import java.net.DatagramPacket;
    import java.net.DatagramSocket;
    import java.net.InetAddress;
    import java.net.SocketException;
    import java.net.UnknownHostException;

    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JScrollPane;
    import javax.swing.JTextArea;
    import javax.swing.JTextField;
    import javax.swing.SwingUtilities;

    public class Client extends JFrame {
int port = 6777;
JTextField textField;
String data = "hello" ;
// JButton sendPacket;
JTextArea chatWindow;
DatagramSocket socket;
DatagramPacket packet;
private final int PACKET_SIZE = 124;
InetAddress host;

public Client() {
    super("INSTANT ECHO - CLIENT");

    textField = new JTextField();
    try {
        host = InetAddress.getByName("127.0.0.1");
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        showMessage("\n Could not find local host");
        e.printStackTrace();
    } 
```

尝试 {

```
 socket = new DatagramSocket();

    } catch (SocketException e) {
        // TODO Auto-generated catch block
        showMessage("\n Could not find Socket");
        e.printStackTrace();
    }
    // textField.setEditable(false);
    textField.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent event) {
            // TODO Auto-generated method stub
            data = event.getActionCommand();
            showMessage(event.getActionCommand());
            startRunning();
            textField.setText("");

        }
    });

    chatWindow = new JTextArea();
    add(textField, BorderLayout.SOUTH);

    add(new JScrollPane(chatWindow));
    setSize(300, 300);
    setVisible(true);

}

public void startRunning() {

    byte[] bytes_to_send = data.getBytes();

    DatagramPacket packet = new DatagramPacket(bytes_to_send,
            bytes_to_send.length, host, port);
    try {

        sendPacket(packet);
        setTime();
        receivePacket(packet);

        socket.receive(packet);
        showMessage("\n" + new String(packet.getData()));
    } catch (IOException e) {
        // TODO Auto-generated catch block

        e.printStackTrace();
    } finally {
        //closeCrap();
    }

}

private void sendPacket(DatagramPacket packet) {
    try {
        textField.setEditable(true);

        socket.send(packet);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        showMessage("\nUnable to send Packet !");
        e.printStackTrace();
    }
}

private void setTime() {
    try {
        socket.setSoTimeout(5);
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        showMessage("\nRequest Time Out");
        e.printStackTrace();
    }
}

private void receivePacket(DatagramPacket packet) {
    packet = new DatagramPacket(new byte[PACKET_SIZE], PACKET_SIZE);

    try {
        socket.receive(packet);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        showMessage("\n Unable to receive packet\n");
        e.printStackTrace();
    }
    showMessage("\n Echoed Message --> "+new String(packet.getData()));
}

private void closeCrap() {
    socket.close();
}

private void showMessage(final String data) {
    SwingUtilities.invokeLater(

    new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            chatWindow.append("\n" + data);

        }
    });

} 
```

}

谁能说出为什么要打印前面的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:17:42.317

[DatagramPacket.getLength()](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramPacket.html#getLength%28%29)具有已使用的缓冲区的长度。

尝试

```
showMessage(new String(packet.getData(), 0, packet.getLength())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:21:23.437

您一遍又一遍地重用同一个数据包，因此当它从网络读取信息时，它会用新内容覆盖现有的数据包缓冲区内容。客户端没有写入空终止符，因此没有写入缓冲区。因此，当您使用`showMessage(new String(packet.getData()));`返回的数据打印数据时，如果刚刚收到的消息不足以完全覆盖旧内容，则其中仍有旧数据的残余。

它不会回显额外的数据，因为当您发送数据包时，套接字服从`packet.getLength()`，它控制要发送的字节数。

您可以：

*   将您的 showMessage 调用更改为：

    ```
    showMessage("\n Echoed Message --> " + 
                new String(packet.getData(), 0, packet.getLength())); 
    ```

*   每次使用不同的数据包

任何一个都应该解决它。

# rubygems - 如何安装旧版本的 Ruby Gems？

> ID：13159916
> 
> 赞同：3
> 
> 时间：2012-10-31T14:10:51.300
> 
> 标签：rubygems

我需要安装旧版本的[cluster_chef](https://rubygems.org/gems/cluster_chef/versions/3.0.4)，但它已被拉出。我的项目具有疯狂的依赖关系，所以我不确定如何安装已被拉出的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:10:58.690

无法安装 yanked gem。但是您也许可以通过放松项目 Gemfile 中的版本依赖关系来解决您的问题？

代替：

```
gem 'cluster_chef', '3.0.4' 
```

利用：

```
gem 'cluster_chef', '~> 3.0.4' 
```

如果 3.0.4 版本`cluster_chef`不可用，Bundler 将安装满足所有依赖项的最新版本的 gem。

如果您仍然停留在依赖项中，您的最后一个解决方案是根据 cluster_chef 的 yanked 版本分叉和编辑库以使用它的更新版本。

# .net - 具有相同模式但不同命名段的 URL 路由

> ID：13159918
> 
> 赞同：0
> 
> 时间：2012-10-31T14:10:53.960
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

因此，假设我为我很酷的新 ASP.NET MVC 应用程序定义了以下 2 条路由：

*   `{controller}/{action}/{id}`
*   `{controller}/{action}/{page}`

除了最后一个命名的路段外，两条路线都具有完全相同的模式。最后命名的段也是可选的 - 这在示例中不清楚，但认为它们是可选的。

如果我按照我列出的顺序将路由添加到框架的`RouteCollection`中，第一条路由将始终匹配这样的 URL：`/Home/Index/1`

通常这不是问题，但是 ASP.NET MVC 的默认模型绑定器在将参数作为参数传递给动作时，要求动作的参数与路由模式中的命名段具有相同的名称。

因此，对于一个动作`List`，例如，我想拉出一个模型列表以传递给视图，它接受页码作为参数，我需要命名该参数**id**。同样通常，这不是问题，但我是个详细的人，我喜欢我的参数名称来指示参数的用途。

但是由于模型绑定器是在路由系统之后启动的，所以我很不走运。还是我？有没有办法解决这个问题而不编写我自己的模型绑定器，或者更糟糕的是，我自己的路由器？

此外，这可以被认为是第二个相关问题，我如何确保路由命名段是重构安全的？

例如，在我看来，鼓励使用`Url.Action`，因为它们会考虑路线。但是要在使用此方法生成 URL 时传递参数，通常必须传入一个匿名对象，该对象的名称也与命名段相同。

因此，如果我重命名路由中的命名段，我实际上必须转到我的所有视图并重命名该属性。这听起来并不理想。那么解决这个问题的干净方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:15:22.287

在传入的请求中，`RouteCollection`将选择`Route`正则表达式逻辑匹配的第一个。

不幸的是，我确实认为您在如此高层次的观点上并不走运。

但是，如果您设置某种约束，您可能能够调整自己的方式来匹配第二条路线。

# javascript - 如何在 jQuery 中将事件添加到动态创建的 iframe 的主体中？

> ID：13159926
> 
> 赞同：0
> 
> 时间：2012-10-31T14:11:16.823
> 
> 标签：javascript, jquery

我试过了：

```
$(document).on("event", window.iframe_name.doument.getElementsByTagName["body"][0], function(){
    //code
}); 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:27:16.727

首先，您必须等待 iFrame 加载。

```
$(function(){
    $('#iFrame').load(function(){
        //then set up some access points
         var frame = document.getElementById('iFrame'); // referance to the iframe
         var frameWindow = frame.contentWindow; // referance the iframes window
         var contents = $(this).contents(); // contents of the iframe

         frameWindow.$('body').on(//your code here)

    })
}) 
```

# sqlite - 使用 SELECT 更新多行

> ID：13159929
> 
> 赞同：4
> 
> 时间：2012-10-31T14:11:22.787
> 
> 标签：sqlite, select, join, sql-update

我有一个表和两行 id=1 和 id=2 并且它们的 x 参数为 1。我还有 B 表和两行具有相同的 id 1 和 2。我正在尝试更新所有数据（列） B 表与 X 参数为 1 的表具有相同的 id。

一张桌子

```
id | x |
 1 | 1 |
 2 | 1 | 
```

B表

```
id | Y  |
 1 | yes|
 2 | yes| 
```

我的查询是

```
 UPDATE B SET y='No' WHERE B.id=(SELECT A.id FROM A WHERE A.x=1); 
```

问题是选择返回多个数据，我只能更新第一个数据。我尝试使用 JOIN 但 sqlite 在 INNER 附近给出语法错误我找不到问题。

```
 UPDATE B SET B.y='No' INNER JOIN A ON B.id=A.id WHERE A.x=1; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:13:53.723

用这个：

```
UPDATE ... WHERE B.id IN (SELECT A.id ...); 
```

# function - 函数绑定中的类型错误

> ID：13159930
> 
> 赞同：1
> 
> 时间：2012-10-31T14:11:28.773
> 
> 标签：function, haskell, recursion, primes

我正在尝试通过递归来实现素数，我知道如何使用列表来实现。

函数绑定中的类型错误

```
primes :: [Int]   
primes = sieve [2..10]   
sieve[] = []   
sieve(x:xs) = x : sieve (filter p [xs])    
   where p x = xs `mod` x > 0 
```

我也尝试过使用地图并在应用程序中出现类型错误

```
primes :: [Int]   
primes = sieve [2..10]   
sieve[] = []   
sieve(x:xs) = x : sieve (map (`mod` x > 0) [xs]) 
```

我正在尝试实现类似于我们对列表所做的事情

```
sieve (a:x) = a:sieve [y| y<-x, y`mod`a > 0] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:17:38.613

```
xs `mod` x 
```

你不能`mod`列出一个整数。

你可能是说

```
where p y = y `mod` x > 0 
```

请注意，我还必须将参数更改为，`y`这样它就不会影响`x`上一行的模式。

另外，`filter p [xs]`应该是`filter p xs`。

# reporting-services - SSRS - RDLC Tablix 行不会跨页面拆分

> ID：13159932
> 
> 赞同：5
> 
> 时间：2012-10-31T14:11:33.723
> 
> 标签：reporting-services

我有一个包含两列数据（部分名称和部分文本）的 tablix。对于某些部分，部分文本变得如此之大，以至于代表该部分的行占据了页面的 2/3 或更多。报告打印良好，直到这些大行中的一个必须在页面末尾拆分并在下一页继续。在这种情况下，并且仅在这种情况下，行会在当前页面上留下大量空白并从下一页开始（就好像它之前有一个分页符）

我已经将 Tablix 常规属性“如果可能，在一个页面上保持在一起”设置为 true，并将 tablix 和行组的所有其他分页选项设置为 false，但无济于事。

有谁知道一个技巧或解决方法来使大行在页面上拆分？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T22:14:46.103

设置`Keep together on one page if possible`为 true/checked 将导致 SSRS 尝试将行保留在一页上，这意味着如果数据跨越分页符，它将移动该行以在新页面上开始，以便可以在一页上看到它，这将如果表是连续的，则在行所在的位置引入空白。因此，您需要将此设置设置为`False/Unchecked`.

接下来，确保将行组属性`Keep together`设置为`False`。这不能通过普通对话框访问。如果您没有在 BIDS 中显示属性窗格，则按下`F4`将打开此窗格。选择行组，并确保属性设置正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T01:52:23.277

还要确保 tablix 内的文本框也设置为 KeepTogether=False。这将解决问题。

# android - 自定义 AutoCompleteTextView 布局android

> ID：13159934
> 
> 赞同：1
> 
> 时间：2012-10-31T14:11:39.647
> 
> 标签：android, layout, autocompletetextview

我正在尝试创建一个带有 AutoCompleteTextView 的对话框。没关系，我也可以显示自动完成列表和所有内容。问题是我无法自定义下拉列表的视图。

这就是我在主要活动中所做的：

```
DialogBox DB = new DialogBox(MyActivity.this);
DB.createDialog(); 
```

而且，在我创建的另一个类中：

```
public DialogBox(Context c)
{
    context = c;
}

public void createDialog()
{

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    LayoutInflater inflater = ((Activity) context).getLayoutInflater();
    final View PopupLayout = inflater.inflate(R.layout.dialog_box, null);
    builder.setView(PopupLayout);

    //Autocomplete:
    final AutoCompleteTextView textView = (AutoCompleteTextView) PopupLayout.findViewById(R.id.autocomplete_companies);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(context, R.layout.dialog_box, R.id.autocomplete_companies, COMPANIES);
    textView.setAdapter(adapter);
} 
```

如果我尝试更改 R.layout.dialog_box 我得到 NullPointerExceptions 或其他错误。

编辑：这是我的 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ImageView
    android:layout_width="match_parent"
    android:layout_height="64dp"
    android:background="#FFFFBB33"
    android:contentDescription="@string/app_name"
    android:scaleType="center" />

<AutoCompleteTextView
    android:id="@+id/autocomplete_companies"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:hint="Company Name" />

<EditText
    android:id="@+id/username"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginTop="16dp"
    android:hint="@string/username"
    android:inputType="textEmailAddress" />

<EditText
    android:id="@+id/password"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="16dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginTop="4dp"
    android:fontFamily="sans-serif"
    android:hint="@string/password"
    android:inputType="textPassword" /> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:54:27.743

我会将适配器子类化。以下是有效的：

```
 GoSuggestionCursorAdapter adapter = new GoSuggestionCursorAdapter(this, R.layout.autocomplete_line, null, from, to); 
```

和...

```
public class GoSuggestionCursorAdapter extends SimpleCursorAdapter {

    public static final String GO_SUGGESTION_ID = "_id";
    public static final String GO_SUGGESTION_TITLE = "SUGGESTION_TITLE";
    public static final String GO_SUGGESTION_URL = "SUGGESTION_URL";
    public static final String GO_SUGGESTION_TYPE = "SUGGESTION_TYPE";

    public GoSuggestionCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {      
        super(context, layout, c, from, to);        
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View superView = super.getView(position, convertView, parent);

        ImageView iconView = (ImageView) superView.findViewById(R.id.AutocompleteImageView);

        int resultType;
        try {           
            resultType = Integer.parseInt(getCursor().getString(getCursor().getColumnIndex(GO_SUGGESTION_TYPE)));
        } catch (Exception e) {
            resultType = 0;
        }

        switch (resultType) {
        case 1: iconView.setImageResource(R.drawable.ic_content_purchased); break;
        case 2: iconView.setImageResource(R.drawable.ic_content_blocked); break;
        case 3: iconView.setImageResource(R.drawable.ic_content_expired); break;
        default: break;
        }

        return superView;
    }

} 
```

# ruby - 运行`brew install 失败

> ID：13159936
> 
> 赞同：0
> 
> 时间：2012-10-31T14:11:44.780
> 
> 标签：ruby, nokogiri, homebrew, libxml2

我正在尝试按照[此处](http://nokogiri.org/tutorials/installing_nokogiri.html#homebrew_09)描述的步骤使用自制软件重新安装 Nokogiri 依赖项。我之前有 nokogiri 工作正常，但不得不删除 macports 以在我的 mac 上腾出一些空间。

第一步遇到错误：

```
$ brew install libxml2 libxslt
Warning: Your Xcode (3.2.2) is outdated
Please install Xcode 3.2.6.
==> Downloading ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz
Warning: Failed to create the file 
Warning: /Library/Caches/Homebrew/libxml2-2.8.0.tar.gz
                                                                       0.0%
curl: (23) Failed writing body (0 != 1448)
Error: Download failed: ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz 
```

知道如何解决这个问题吗？

关于 Xcode 版本的警告是否重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:23:28.773

上面的相关消息似乎是`Warning: Failed to create the file`。

尝试`/Library/Caches/Homebrew/libxml2-2.8.0.tar.gz`手动创建文件，但出现`Permission denied`错误。

将文件夹的所有权更改为我的用户名：组

```
sudo chown <username>:<group> /Library/Caches/Homebrew/ 
```

有了这个改变，这`brew install`一步就成功了！

注意：[brew install mongodb error: Cowardly refusing to `sudo brew install' Mac OSX Lion](https://stackoverflow.com/questions/10424872/brew-install-mongodb-error-cowardly-refusing-to-sudo-brew-install-mac-osx-lio)的答案有助于解决问题。

# javascript - JIT Spacetree 将标签另存为图像

> ID：13159941
> 
> 赞同：5
> 
> 时间：2012-10-31T14:12:12.647
> 
> 标签：javascript, canvas, infovis, thejit, space-tree

我正在使用 JavaScript InfoVis Toolkit ( [http://thejit.org/](http://thejit.org/) ) 并尝试使用 `canvas.toDataURL("image/png")`. 虽然这适用于我的 ForceDirected 图——在 SpaceTree 中，我们将标签放在单独的 DIV 中，因此当我打印图像时，我得到一个空白图。

有谁知道如何打印标签？任何帮助将不胜感激。我附上了图表的手动截图和打印时得到的图像。

是的——我确实在[这里](https://stackoverflow.com/questions/11267026/jit-saving-spacetree-as-an-image)看到了这个问题——但它没有回答我的问题，因为我们不能使用“原生”标签，因为我们会做一些即时造型。

HTML 代码：

```
<div id="infovis" style="height: 412px;">
   <div id="infovis-canviswidget" style="position: relative; width: 800px; height: 412px;">
     <canvas id="infovis-canvas" width=800" height="412" style="position: absolute; top: 0px; left: 0px; width: 800px; height: 412px;"></canvas>
     <div id="infovis-label" style="overflow: visible; position: absolute; top: 0px; left: 0px; width: 800px; height: 0px;">
           -- Labels are in here --
     </div>
   </div>
</div> 
```

手动截图![手动截图](../Images/d9ddcae187af04b37e870295e607fb93.png) 空白打印图像![空白打印图像](../Images/10e7f40d2c0c224d455a2e918524889c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T21:56:45.303

我通过使用[html2canvas](http://html2canvas.hertzen.com/)插件解决了这个问题。基本上，html2canvas 将创建一个 div 元素（及其子元素）的新画布，然后您将其转换为带有`myCanvas.toDataURL("image/png")`. 此图像将包含您的 HTML 标签。（请注意 html2canvas 可能无法正确处理标签的 CSS 属性。）

```
 html2canvas(document.getElementById("diagram-container"), {
         onrendered: function(canvas) {
         var img = canvas.toDataURL();
         document.write('<img src="'+img+'"/>');
          }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:35:41.200

我应该在 10 月份找到它的时候把它贴出来——但它让我忘记了。我能够找到自己问题的答案。

首先在这里查看帖子[HTML 5 Canvas Save Image](http://www.joeltrost.com/blog/2012/01/29/html5-canvas-save-a-jpeg-with-extension/)

这是我实现解决方案的方式（从上面的链接获取 CanvasSaver 功能代码）：

```
function SaveCanvas(canvasName) {
  var canvas = document.getElementById(canvasName);
  var imgUrl = null;

  if (canvas.getContext) {
    //Get alternative image URL for spacetree only
    if (canvasName.indexOf("tag") == -1) {
        imgUrl = $jit.ST.prototype.print.call();
    }

    var cs = new CanvasSaver('http://joeltrost.com/php/functions/saveme.php');
    //cs.saveJPEG(canvas, 'image');
    cs.savePNG(canvas, 'image', imgUrl);
  }
} 
```

最后——编写 ASP 按钮以调用 SaveCanvas 函数：

```
<asp:ImageButton ID="ImageButton1" ImageUrl="Images/save_icon.png" ToolTip="Save Visualization" AlternateText="Save Visualization" OnClientClick="SaveCanvas('tagCloudVis-canvas');return false;" Style="left: 2px; top:3px; position:relative;" runat=server /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T07:36:56.750

我知道这个线程很旧。但是，如果有人正在寻找这个并且不想使用 html2canvas。这是给你们的解决方案。

```
 Label: {
            type: 'Native'
        }, 
```

在您的 javascript 代码中添加上述内容`var st = new $jit.ST({ <here> })`

要将其保存为图像，请添加以下代码。

HTML：

```
<a onclick="getImage(this, 'filename.png', 'tree-id')">download tree</a> 
```

JS：

```
function getImage(a, filename, id){
 a.link = document.getElementById(id).toDataURL();
 a.download = filename;
} 
```

快乐编码:)

# java - 休眠多对多不起作用

> ID：13159945
> 
> 赞同：0
> 
> 时间：2012-10-31T14:12:21.523
> 
> 标签：java, hibernate, mapping

我试图理解hibernate，但这很难。

我现在有一个问题，我不太明白。它关于我的映射文件中的多对多关系。如果我保存一个对象，它不会在我的数据库中保存“许多”，但它不会保存它。我认为它在我的映射中，但我没有看到它。

这是关于航班和飞机上的工作人员。当我拯救飞机时，工作人员必须与它一起拯救。但这不会发生。

这是我对两者的映射： Flight 映射：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    <!-- Generated 28-sep-2012 11:49:37 by Hibernate Tools 3.2.1.GA -->
     <hibernate-mapping>
    <class name="model.Flight" table="flights" catalog="flyaway_db">

    <id name="number" type="int">
        <column name="FlightNumber" />
        <generator class="assigned" />
    </id>

    <set name="staffs" table="flightstaff" cascade="save-update"> 
        <key>
            <column name="FlightNumber" not-null="true" />
        </key>
        <many-to-many class="model.Staff">
            <column name="StaffNumber" length="5" not-null="true" />
        </many-to-many>
    </set>

</class>
</hibernate-mapping> 
```

人员映射：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 28-sep-2012 11:49:37 by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
<class name="model.Staff" table="staff" catalog="flyaway_db">

    <id name="staffNumber" type="string">
        <column name="StaffNumber" length="5" />
        <generator class="assigned" />
    </id>

    <set name="flightses" table="flightstaff" cascade="save-update">
        <key>
            <column name="StaffNumber" length="5" not-null="true" />
        </key>
        <many-to-many class="model.Flight">
            <column name="FlightNumber" not-null="true" />
        </many-to-many>
    </set>
</class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:24:10.533

你忘记了关系`inverse="true"`的一方面`bidirectional`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:31:52.163

抱歉所有问题，但模型不正确！我认为 Pache 的回答也有帮助！谢谢大家

# networking - Windows Phone 8 模拟器无法连接到互联网

> ID：13159947
> 
> 赞同：44
> 
> 时间：2012-10-31T14:12:26.217
> 
> 标签：networking, windows-8, hyper-v, windows-phone-8, windows-phone-8-emulator

我在模拟器中安装了 Windows 8，并在其上安装了新的 WP8 SDK。我的问题是模拟器无法连接到互联网。我没有任何代理，甚至禁用了防火墙。但它似乎仍然不起作用。当我查看网络连接部分时，我可以看到 hyper-v 管理器为模拟器创建的新连接，以及创建的自动网桥，但即使在那里，网络状态也是“无 Internet 连接”。

是否有一些我可以在 Hyper-V 中手动更改或让网络使一切正常工作的属性？

**更新**：我已经完成了建议的所有操作，包括创建自己的开关并删除所有其他开关。但是它仍然不起作用。它不适用于电缆，也不适用于 wifi。也许我错过了如何设置的东西？

此外，WP 模拟器每次都让我连接到互联网。它总是会删除我设置的所有定义，并用它自己的定义替换它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-01T20:59:13.267

我想我终于找到了答案，但你可能不会喜欢它。看来电话模拟器要求您有第二个网络适配器来专用于此目的。就个人而言，我在 VMWare 中运行 Windows 8，因此第二个网络适配器对我来说是免费的。

无论如何，在您获得第二个网络适配器后，您可以专用于手机模拟器（必须有互联网）

1.  白手起家。转到 Hyper-V 管理器并删除模拟器以及所有虚拟交换机
2.  从 Visual Studio 启动模拟器；这将使用所有默认设置重新创建它（选择是，您要将其配置为连接到互联网）
3.  关掉它
4.  现在，回到 Hyper-V 管理器
5.  删除刚刚为模拟器创建的快照。这将防止您的更改消失
6.  在网络适配器设置中找到第二个网络适配器的虚拟交换机（在控制面板下）
7.  禁用 TCP/IPv4、6 和所有其他服务。这可以防止您的主机尝试使用该连接。当您在那里时，获取此适配器的 MAC（物理）地址
8.  在模拟器的 Hyper-V 设置下找到第二个网络适配器的虚拟交换机
9.  将 MAC 类型更改为静态并粘贴适配器的 MAC 地址
10.  启用 MAC 欺骗（不确定是否需要，但以防万一）
11.  然后，在“虚拟交换机管理器”下找到您的虚拟交换机。
12.  确保未选中“允许管理操作系统共享此网络适配器”并禁用所有扩展
13.  单击确定，然后从 Visual Studio 启动模拟器！

基本上，由于某些奇怪的原因，除非手机与网络适配器具有相同的 MAC 地址，否则它似乎无法正常工作。但是，我们不能将其设置为使用相同的 MAC 地址，因为地址冲突非常非常糟糕。因此，我们需要一个专用于电话模拟器的第二个适配器。我们在此适配器上禁用 TCP/IP 的原因是我们的主机不使用它并导致这些冲突。

**其他要尝试的事情：**

模拟器不断为我随机中断。我将列出我上次弄乱的其他一些让它工作的东西（不确定是否相关，所以只有在上述步骤不起作用时才尝试这些

*   为模拟器“重新排序”网络适配器，使外部虚拟交换机位于顶部（确保复制内部适配器的 MAC 地址）
*   删除不相关的网络适配器
*   重新配置虚拟交换机后重新启动计算机
*   向您当地的微软布道者祈祷

严重地。每次我停止电话工作一段时间然后回来，模拟器总是神奇地坏掉，而我没有改变任何东西。不知道如何让它“永久”工作。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-05T11:15:09.353

我也有同样的问题。但是，正如其他人在官方论坛上指出的那样，如果您在路由器中为您的 PC 设置了静态 IP，则它不起作用。删除它并让 DHCP 为我的 PC 分配 IP 为我解决了这个问题。

[资源](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/28c8316a-80e8-4fd9-b323-c07a2265d069/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T14:27:52.693

这对我有用：

1.  在主机上的网络连接中进入由 hyper-v 创建的内部网络连接。转到 TCP/IP V4 并转到高级。将指标从自动更改为 10。
2.  转到外部网络连接，执行相同操作，但将指标设置为 1。

Volia，模拟器中的互联网。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-07T05:34:02.057

我尝试了以下步骤，不确定它是否适合你

1> 删除 Hyper-v 中的所有模拟器
2> 从虚拟交换机管理器中删除所有虚拟交换机
3> 转到控制面板中的网络连接并手动禁用（右键单击并单击禁用）除提供互联网的连接之外的所有连接。
4> 从 Visual Studio 启动模拟器

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-23T22:38:02.670

1.  启动*Hyper-V 管理器*
2.  打开*虚拟交换机管理器*
3.  从列表中删除*Windows Phone 模拟器内部开关*并应用更改

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-04T11:49:15.223

似乎也引起问题的其他东西是 Fiddler。

我让 Fiddler 打开并运行（因为我正在监视其他 HTTP 请求），它正在阻止模拟器连接。

我一关闭 Fiddler，模拟器就开始完美连接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-02T01:57:12.557

在我的 Yoga 笔记本电脑上安装 Windows Phone Emulator 后，我立即遇到了以下问题：

*   模拟器应用程序无法访问互联网
*   主机互联网连接非常慢，几乎无法使用

我很气馁，并认为我必须采取一些激烈和绝望的行动来解决问题，但幸运的是，以下步骤完全解决了我的问题（目前）。这些步骤很冗长（为了读者的利益），但实际上非常简单。

....0：拔下以太网电缆（将其从等式中删除）但保持连接到 WiFi。问题仍然存在，但至少现在复杂性降低了。

....1：在控制面板/网络连接/更改适配器设置中，删除网桥（第 2 步需要）。

....2：打开 Hyper-V 管理器，右键单击模拟器 VM 项并选择虚拟交换机管理器。选择“Windows Phone Emulator Internal Switch”并将单选按钮从“内部”更改为“外部”（这只有在删除网桥（第 1 步）后才有可能）。

此时，模拟器现在可以连接到互联网（并且控制面板显示 WPEIS 最终“可以访问互联网”）；但是，将 WP 构建二进制文件从 VS 部署到模拟器失败 - 当我尝试从 Visual Studio 构建和部署时它只是挂起（因此（暂时）出现了一个新问题）。

....3：返回到 HyperV 管理器，返回到模拟器 VM 的虚拟交换机管理器，并将 Windows Phone 模拟器内部交换机从外部恢复为内部。

我现在可以成功地从 Visual Studio 构建和部署 WP 构建到模拟器。并且模拟器保留了它的联网能力。并且主机的网络连接也恢复了健康。

我希望这可以帮助别人。祝你好运！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-21T15:03:57.550

我经历了许多建议的解决方案，也没有运气。最终对我有用的是修复有关客户机操作系统尝试为以太网适配器设置混杂模式的 vmware 警告（[http://kb.vmware.com/kb/287](http://kb.vmware.com/kb/287)）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-24T13:53:58.403

好文章：http: [//blogs.msdn.com/b/wsdevsol/archive/2013/10/01/why-can-t-the-windows-phone-emulator-go-online.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2013/10/01/why-can-t-the-windows-phone-emulator-go-online.aspx)

正如@robertftw 所说，我的路由器上有DHCP 预留。**我为vEthernet（内部以太网端口 Windows Phone 模拟器内部交换机）**适配器配置了一个静态 IP ，一切正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-30T18:02:58.187

我的 Windows Phone 模拟器已由 DHCP 在与我正在使用的不同子网上分配了一个 IP 地址。

手动将与我的 PC 位于同一子网上的 IP 地址分配给由 Hyper-V 创建的 vEthernet 端口可解决此问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-12T08:39:44.830

在花了大约 3 天的时间后，我终于让它工作了。（在使用 WiFi 的 Windows 8 上）

1.  重新开始，删除 HyperV，重新启动，安装 Hyper V，重新启动
2.  打开您的 VS 解决方案并运行模拟器。
3.  当提示让模拟器访问互联网时，说是。
4.  让模拟器和您的项目完全加载
5.  关闭模拟器和VS
6.  开放网络和共享中心
7.  单击更改适配器设置（在左侧）
8.  你应该有一些由 HyperV 创建的新适配器，它们应该被称为“vEthernet(...)”
9.  您感兴趣的是 vEthernet（虚拟交换机）和 vEthernet（内部以太网端口 Windows Phone Emulator 内部交换机）
10.  打开 vEthernet（虚拟交换机）上的属性并导航到共享选项卡。
11.  选择 Allow other Network users to connect 并选择 vEthernet (Internal Ethernet Port Windows Phone Emulator Internal Switch) 作为适配器
12.  确定更改，然后打开 vEthernet 上的属性（内部以太网端口 Windows Phone 模拟器内部交换机）
13.  禁用 Internet 协议版本 6 并双击 Internet 协议版本 4
14.  使用以下 IP 地址：169.254.169.177 子网掩码：255.255.0.0
15.  单击高级，在 IP 设置选项卡下，分配一个接口度量：1
16.  打开VS并在模拟器下重新运行你的项目，等待几分钟让它加载。
17.  尝试在模拟器中打开 IE 并确认您可以访问 Internet。

祝你好运

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-21T12:01:45.153

试试这个解决方案，它对我有用（不需要 DHCP）

第 1 步 - 使用 Hyper-V 启动服务器，一旦启动，您可以在（网络共享）页面中看到添加的两个新网络适配器。

第 2 步 - 转到运行应用程序的 Visual Studio IDE，使用模拟器运行应用程序，一旦开始尝试打开 IE，它将无法连接到互联网。

第 3 步 - 现在再次返回网络共享页面，右键单击新创建的外部适配器选择属性，点击共享选项卡，现在检查两个选项是否有勾选标记，如果没有勾选这两个选项，然后单击确定。

第 4 步 - 新创建的内部适配器会将域名从未识别的网络更改为您的共享域名，一旦更改尝试在已经运行的模拟器中再次访问 IE。现在我希望互联网连接正常。

谢谢，

巴斯卡

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-11T07:14:25.330

3天后，我们终于解决了。我们必须使 IP 地址动态化。做成动态模拟器后就可以上网了。我们不需要改变任何其他东西。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-14T22:15:26.403

在“网络连接”中禁用 Wifi 和虚拟 Wifi 对我有用。

# html - 为什么只有在从服务器加载 CSS 时才在 Firefox 中更改 CSS？

> ID：13159948
> 
> 赞同：2
> 
> 时间：2012-10-31T14:12:26.890
> 
> 标签：html, css

我上传的 CSS 正在使用`border: thin dashed`，但 Firebug 将样式显示为`border: thin solid`.

这是上传的样式

```
#menu a{
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 3px;
    padding-bottom: 3px;
    color: #FFF;
    text-decoration: none;
    border: thin dashed #FFF;
    border-radius: 3px;
    outline: none;  
} 
```

这是我在 Firebug 中看到的 CSS

```
#menu a {
    border: thin solid #FFFFFF;
    border-radius: 3px 3px 3px 3px;
    color: #FFFFFF;
    outline: none;
    padding: 3px 5px;
    text-decoration: none;
} 
```

在本地预览（F12-Firefox 16）`#menu a border`上是虚线，但从服务器加载，`#menu a border`是实心的！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:23:31.590

听起来有些缓存在起作用。尝试清除浏览器的缓存。如果这不起作用，请将 ?v1 添加到用于调用 CSS 文件的 URL 的末尾。这将用作缓存破坏器。例如：/assets/CSS/styles.css?v1

如果两者都不起作用，我会说您没有将 CSS 上传到正确的位置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-31T14:17:01.363

Firebug 尽可能地整合你的 CSS。因此，如果您有：

```
padding-left:1px;
padding-right:1px;
padding-top:1px;
padding-bottom:1px; 
```

然后它将显示为

```
padding: 1px; 
```

# php - Strlen 没有给出正确的输出

> ID：13159953
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:12:42.677
> 
> 标签：php, string, strlen

我有一个从数据库中检索的字符串，我想计算不带空格的字符串的长度，但它显示的长度值更大（比实际计数大 21 个字符）我删除了制表符和换行符以及php 和 html 标签，但没有结果！我已经尝试了 w3schools php 参考中的几乎所有功能，但我找不到任何成功。我还观察到，如果我不从数据库中检索值并像这样输入它：

`$string = "my string";`

我得到正确的长度，请帮助我。这是代码：

```
if($res_tutor[0]['tutor_experience']){
        $str = trim(strip_tags($res_tutor[0]['tutor_experience']));
            $str = $this->real_string($str);
            $space = substr_count($str, ' ');
            $experience  = strlen($str) -  $space;

function real_string($str)
{
    $search  = array("\t","\n","\r\n","\0","\v");
    $replace = array('','','','','');
    $str = str_replace($search,$replace,$str);
    return $str;
} 
```

这是来自数据库的字符串，但正如您在上面看到的，我已使用以下命令删除了所有 php 和 html 标记`strip_tags()`：

```
<span class=\"experience_font\">You are encouraged to write a short description of yourself, teaching experience and teaching method. You may use the guidelines below to assist you in your writing.<br />
   <br />
   .Years of teaching experience<br />
   .Total number of students taught<br />
   .Levels &amp; subjects that you have taught<br />
   .The improvements that your students have made<br />
   .Other achievements/experience (Relief teaching, a tutor in a tuition centre, Dean&#39;s list, scholarship, public speaking etc.)<br />
   .For Music (Gigs at Esplanade, Your performances in various locations etc.)</span><br />
   &nbsp;</p> 
```

当我打印它时，它显示为：

```
<span class=\"experience_font\">You are encouraged to write a short description of yourself, teaching experience and teaching method. You may use the guidelines below to assist you in your writing.<br />
   <br />
   .Years of teaching experience<br />
   .Total number of students taught<br />
   .Levels &amp; subjects that you have taught<br />
   .The improvements that your students have made<br />
   .Other achievements/experience (Relief teaching, a tutor in a tuition centre, Dean&#39;s list, scholarship, public speaking etc.)<br />
   .For Music (Gigs at Esplanade, Your performances in various locations etc.)</span><br />
   &nbsp;</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:00:16.850

@Svetilo，不要粗鲁，只是想发布我的发现，你的 str_replace 工作得很好，除了我仍然按照你目前的顺序输出不正确的值，我发现以下工作完美无缺。

```
$string = str_replace(array("\t","\r\n","\n","\0","\v"," "),'', $string);
mb_strlen($string, "UTF-8"); 
```

更改 \r\n 和 \n 使 str_replace 不会从 \r\n 中删除 \n，而只留下 \r。

干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:14:33.750

尝试使用 mb_strlen。[http://php.net/manual/en/function.mb-strlen.php](http://php.net/manual/en/function.mb-strlen.php) 它更精确。

```
mb_strlen($str,"UTF-8") 
```

UTF-8 是您的默认编码在哪里...要删除所有可用空间，请尝试类似的操作..

```
 $string = str_replace(array("\t","\n","\r\n","\0","\v"," "),"",$string);
 mb_strlen($string, "UTF-8"); 
```

# iphone - 为什么我的 iPhone 应用程序在重新打开后会崩溃？

> ID：13159955
> 
> 赞同：0
> 
> 时间：2012-10-31T14:12:45.563
> 
> 标签：iphone, ios, xcode, cordova

我用 XCode 和 Phonegap 创建了一个 iPhone 应用程序。

启动应用程序运行良好，但是当我按下 iPhone 的主页按钮（将应用程序置于后台）然后再次打开应用程序（将其置于前台）时，它崩溃了。

这就是日志所说的：

> 2012-10-31 14:37:21.359 [810:907]-[AppDelegate myFunc]：无法识别的选择器发送到实例 0x1e064220
> 
> 2012-10-31 14:37:21.361 [810:907] --- 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AppDelegate myFunc]：无法识别的选择器发送到实例 0x1e064220”
> 
> --- 首先抛出调用栈：
> 
> （0x361b62a3 0x344c697f 0x361b9e07 0x361b8531 0x3610ff68 0x36107037 0x33bc9d91 0x37630213 0x3762fdff 0x37487d61 0x374876d5 0x37487123 0x3663a5a3 0x3618b683 0x3618aee9 0x36189cb7 0x360fcebd 0x360fcd49 0x366392eb 0x374db301 0xe7c89 0xe7c20）
> 
> libc++abi.dylib：终止调用抛出异常

所附图像显示了它停止的代码行。![在此处输入图像描述](../Images/f74eb8c4dc4bbf0659a9efc78c61a4ef.png)

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:14:11.433

您似乎正在调用一个名为 myFunc 的方法，该方法在您的 AppDelegate 中不存在。

这将导致应用程序终止。检查函数是否存在或删除调用。

当您将应用程序从后台带到前台时，会在委托上调用不同的方法，因此您对 MyFunc 的调用可能存在于那里。

查看

```
applicationDidBecomeActive 
```

和

```
applicationWillEnterForeground 
```

可以在此处找到详细信息：

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:18:46.047

我可能是错的，您是否在其中添加了一些逻辑

```
- (void)applicationWillEnterForeground:(UIApplication *)application
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

你发布了一些东西吗？你也检查过这个吗？-[AppDelegate myFunc]

# iphone - iAD 被 UITableView 索引遮挡

> ID：13159957
> 
> 赞同：1
> 
> 时间：2012-10-31T14:12:54.063
> 
> 标签：iphone, objective-c, ios, ios5, iad

我有一个 UITableView，我正在添加一个 iAD 作为添加到 UITableView 的屏幕底部的页脚视图。

iAD 有效地固定在那里，因为每当使用 -(void)viewDidScroll 滚动屏幕时我都会更新 iAD 的位置...

但是，由于我的 UITableView 充满了索引，索引由于某种原因出现在 iAD 的前面，有效地阻止了它！UITableView 的其余部分工作正常，UITableViewCells 出现在 iAD 后面。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:29:59.263

这是一个教程的链接，该教程在uitableview的屏幕底部实现了iad，希望对您有所帮助。阿德里安 [http://www.ioslearner.com/implement-iads-tutorial-iphone-ipad-sdk/](http://www.ioslearner.com/implement-iads-tutorial-iphone-ipad-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:27:38.273

您可以尝试调整 TableView 的大小并将其放置在 iAD 框架上，这样它们就不会相互重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:32:15.347

您可以将 iAd 放在表格视图的固定部分。或者，我只需调整表格视图的大小（在界面生成器或其他任何内容中），以便为底部的 iAd 腾出空间。

# cdi - java-web-start APP（java se）中的CDI和WELD

> ID：13159960
> 
> 赞同：0
> 
> 时间：2012-10-31T14:13:00.587
> 
> 标签：cdi, java-web-start, jboss-weld

我试图在 Java-web-start 应用程序中使用 CDI，但卡在类加载中。看起来 FileSystemURLHandler 将 web-start 缓存中的 URL 视为文件。

```
org.jboss.weld.environment.se.discovery.url.FileSystemURLHandler - could not read entries
java.io.FileNotFoundException: http:\localhost:8080\myapp.jar 
```

与以下内容相同：[https ://issues.jboss.org/browse/WELD-1040](https://issues.jboss.org/browse/WELD-1040)

我在 jira 和 git-hub 方面的有限技能表明有人开始研究它，但它没有发布：[https ://github.com/agattiker/core/blob/9eabd09f0b8e80e48e3270414e2f68ebc1016b70/environments/se/core/src/ main/java/org/jboss/weld/environment/se/discovery/url/FileSystemURLHandler.java](https://github.com/agattiker/core/blob/9eabd09f0b8e80e48e3270414e2f68ebc1016b70/environments/se/core/src/main/java/org/jboss/weld/environment/se/discovery/url/FileSystemURLHandler.java)

所以我的问题是，是否有人解决了这个问题，或者 jws 上的 cdi+weld 是否是死胡同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T15:34:51.370

我希望现在还不算太晚，该问题已在焊接版本 2.2.0.Alpha1 中修复。

# php - jQuery函数操作多个div

> ID：13159963
> 
> 赞同：1
> 
> 时间：2012-10-31T14:13:02.630
> 
> 标签：php, jquery

我正在用 PHP 和 MySQL 编写一个预订系统，用户预订特定时间段的方式是单击运行 JQuery 函数的 Div，如下所示：

```
$(document).ready(function(){
                $('.free').click(function(){
                    $(this).html("<div class='title'><img src='images/loader.gif' alt='image' width='30' /></div>").load('book.php?desk_id=<?php echo $desk_id;?>&booking_id='+this.id);
                });
                $('#bookweek').click(function(){
                    $('.free').html("<div class='title'><img src='images/loader.gif' alt='image' width='30' /></div>").load('book.php?desk_id=<?php echo $desk_id;?>&booking_id='+this.id);
                });
            }) 
```

我想要做的是让它的后半部分可以预订整个星期的工作。它部分有效，但做一些调查表明它没有在 URL 中传递 Div 的 ID，所以显然它没有将正确的变量传递给 book.php，这使它不起作用。

有许多具有“免费”类的 Div，但每个都有自己的单独 ID。任何有关如何在 URL 中传递单个 ID 的帮助将不胜感激，

非常感谢，

史蒂夫

编辑：

使用以下代码生成日历：

```
<div id="bookweek" style="cursor:pointer"><h1>Book Entire Week</h1></div>
<div class="block">
    <div class="title">Times</div>
    <?php
$days = 0;
while($days < 7) {
    $day  = mktime(0, 0, 0, date("m"),   date("d") + $days,   date("Y"));
    $days++;
    echo '<div class="title">'.date("D d/m/y", $day).'</div>
    ';
}
?>
</div>
<?php
$hours = 0;
$counter = 0;
while($hours < count($bookingTimes)) {
    $name = $bookingTimes[$hours];
    $hours++;
    echo '<div class="block">
<div class="title">'.$name.'</div>
';
$i=0;
$counter++;
$days = 0;
while($i < 7) {
    $day  = mktime(0, 0, 0, date("m"),   date("d") + $days,   date("Y"));
    $days++;
    $i++;
    $id = $counter + $day;
    echo '<div class="free" id="'.$id.'">'.checkBooked($id,$desk_id).'</div>
    ';
    }
    echo '</div>';
}
?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:00:34.433

试试这个的点击事件处理程序`#bookweek`

```
$("#bookweek").on("click", function () {
    $(this).parent().find(".free").trigger("click")
}); 
```

它找到父 div （周），然后在每个具有 class 的子元素上触发点击事件`free`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:35:16.473

尝试跟随。它应该可以解决您的问题。

```
$(document).ready(function(){
            $('.free').click(function(){
                $(this).html("<div class='title'><img src='images/loader.gif' alt='image' width='30' /></div>").load('book.php?desk_id=<?php echo $desk_id;?>&booking_id='+this.id);
            });
            $('#bookweek').click(function(){
                $(this).find('.free').each(function () {
                       $(this).html("<div class='title'><img src='images/loader.gif' alt='image' width='30' /></div>").load('book.php?desk_id=<?php echo $desk_id;?>&booking_id='+this.id);
                });
            });
        }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:03:20.890

```
$('#bookweek').click(function() {
    $('.free').each(function() {
        var $id = $(this).attr('id');
        $(this).html("<div class='title'><img src='images/loader.gif' alt='image' width='30' /></div>")
                .load('book.php?desk_id=<?php echo $desk_id;?>&booking_id=' + $id);

    });
}); 
```

# c - 与 fgets 和 fprintf 兼容的文件锁定

> ID：13159964
> 
> 赞同：2
> 
> 时间：2012-10-31T14:13:04.220
> 
> 标签：c, fdopen

我正在阅读[http://beej.us/guide/bgipc/html/multi/flocking.html](http://beej.us/guide/bgipc/html/multi/flocking.html)以进行文件锁定，现在我尝试弄清楚如何使用文件描述和文件指针（我需要 fprintf 和 fgets），这个代码实际上可以工作，但我不确定分配给 fdopen 的标志是否正确，这是继续的好方法吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <fcntl.h>
#include <unistd.h>

#define LINE_MAX 100

#define FILE_READING 1
#define FILE_WRITING 2

int main(int argc, char *argv[])
{
    struct flock fl = {F_WRLCK, SEEK_SET, 0, 0, 0};
    char s[LINE_MAX];
    int fd, fstatus;
    FILE *fp;

    fl.l_pid = getpid();
    if (argc == 1) {
        fl.l_type = F_RDLCK;
        fstatus = FILE_READING;
    } else {
        fstatus = FILE_WRITING;
    }
    if ((fd = open("demo.txt", fstatus == FILE_READING ? O_RDONLY | O_CREAT : O_WRONLY | O_APPEND | O_CREAT, 0600)) == -1) {
        perror("open");
        exit(1);
    }
    printf("Press <RETURN> to try to get lock: ");
    getchar();
    printf("Trying to get lock...\n");
    if (fcntl(fd, F_SETLKW, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }
    if (fstatus == FILE_WRITING) {
        fp = fdopen(fd, "a");
        fprintf(fp, "%s\n", argv[1]);
    } else {
        fp = fdopen(fd, "r");
        while (fgets(s, LINE_MAX, fp)) {
            printf("%s", s);
        }
    }
    printf("got lock\n");
    printf("Press <RETURN> to release lock: ");
    getchar();
    fl.l_type = F_UNLCK;
    if (fcntl(fd, F_SETLK, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }
    printf("Unlocked.\n");
    fclose(fp);
    close(fd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:23:49.567

根据[文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fdopen.html)，`fdopen()`使用与 相同的模式参数`fopen()`，据我所知，您已正确使用它们。

# mysql - 查询之间的mysql时间戳

> ID：13159966
> 
> 赞同：0
> 
> 时间：2012-10-31T14:13:20.727
> 
> 标签：mysql

在下面我有一个 table1，table2，我被一个查询困住了。我想找到 table2 中的时间戳，它们位于 table1 的两个连续时间戳之间。如何形成这个查询。

表格1：

```
 id    timestamp
    1    2012-08-15 01:11:11
    1    2012-08-15 01:11:14
    1    2012-08-15 01:11:16 
    2    2012-08-15 01:22:11
    2    2012-08-15 01:32:11
    2    2012-08-15 01:33:11
    2    2012-08-15 01:36:11 
```

表2：

```
 id    timestamp
    1    2012-08-15 01:11:12
    1    2012-08-15 01:11:15
    1    2012-08-15 01:11:16 
    2    2012-08-15 01:23:55
    2    2012-08-15 01:26:11
    2    2012-08-15 01:34:11
    2    2012-08-15 01:36:01 
```

所需的输出：获取 table2 的所有行，这些行位于 table1 的时间戳之间，如果可能的话，还可以输出 table1 的时间戳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:47:14.183

加入`table1`自身，然后分组以查找连续的时间戳，然后根据需要将结果加入`table2`：

```
SELECT *
FROM   table2 JOIN (
  SELECT   a.timestamp start, MIN(b.timestamp) finish
  FROM     table1 a JOIN table1 b ON a.timestamp < b.timestamp
  GROUP BY a.timestamp
) t ON table2.timestamp BETWEEN t.start AND t.finish 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/4dad7/1/0)上查看。

# c# - 挪威文化信息的问题

> ID：13159969
> 
> 赞同：9
> 
> 时间：2012-10-31T14:13:42.490
> 
> 标签：c#, .net

我目前正在我的应用程序中处理全球化问题。其中一部分是使用 CultureInfo 和 RegionInfo。有一个问题真的让我很困惑。也许有人可以对此有所了解：

```
var ci1 = new CultureInfo("de");      // Correct, gives a neutral CultureInfo
var ci2 = new CultureInfo("de-CH");   // Correct, gives a specific CultureInfo
var ci3 = new CultureInfo("fr-CH");   // Correct, gives a specific CultureInfo
var ci4 = new CultureInfo("no");      // Correct, gives a neutral CultureInfo
var ci5 = new CultureInfo("nb-NO");   // Correct, gives a specific  CultureInfo
var ci6 = new CultureInfo("nn-NO");   // Correct, gives a specific  CultureInfo
var ci7 = new CultureInfo("ch");      // Failure!  Can't create a neutral Swiss culture. 
```

这里的重点是，挪威和瑞士都是多语言国家，但与挪威相比，我无法创建中立的瑞士文化信息。

这是因为历史原因还是仅仅是微软实施中的一个错误？

编辑：这似乎是某种“政治”问题，而不是技术问题。所以我想改写我的问题：有什么好的想法如何从技术上处理这个问题？简单地忽略“ ***CultureInfo("no")*** ”？有趣的是，“ ***CultureInfo("no")*** ”提供了一个“nb”的父“ ***CultureInfo.TwoLetterISOLanguageName*** ”。

所以，对我来说，这很令人困惑。有什么好主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:19:43.393

中性文化是一种与*语言*相关但与国家/地区无关的文化。请参阅：http: [//msdn.microsoft.com/en-us/library/system.globalization.cultureinfo (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.71).aspx)

您正在尝试使用 ch 创建一种语言文化，但没有瑞士语言。您将 de-CH 用于德语（语言）-瑞士（国家）。同样，您在瑞士使用 it-CH 或 fr-CH 表示意大利语和法语（语言）。

而且，正如 MPelletier 指出的那样，没有加拿大语言，但在加拿大地区，他们说 fr(ench) 或 en(glish)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-06T09:07:33.703

`"no"``"ch"`与, 因为是一种语言，挪威语具有不同的行为`"no"`，而“ch”不指代任何语言。

虽然挪威是一个多语言国家，但挪威的官方语言是正确的；挪威语、萨米语和克文。萨米语和克文语被认为是少数民族语言。`"nb"`或都不`"nn"`是指在挪威得到官方认可的语言，因为博克马尔语和尼诺斯克语都不是语言。

混乱源于两个事实。与大多数语言不同，挪威语有两种正式的书面规范，博克马尔语和尼诺斯克语。在 ISO 639 中，挪威语被认为是两种规范的宏语言，ISO 639 为这两种书面规范分配了单独的语言代码，即。“nb”和“nn”。挪威语“no”的语言代码与挪威“NO”的国家代码一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T21:55:28.657

根据 ISO 语言标准，有 nno nn 挪威尼诺斯克语；nob nb Bokmål，挪威语；也没有挪威语

来自维基百科“ [https://en.wikipedia.org/wiki/Norwegian_language](https://en.wikipedia.org/wiki/Norwegian_language) ” Nynorsk 和 Bokmål 提供了如何编写挪威语的标准，而不是如何说该语言的标准。挪威语口语没有官方认可的标准，大多数挪威人在任何情况下都说自己的方言。因此，与许多其他国家不同，任何挪威方言的使用，无论是否符合书面规范，都被视为正确的挪威语口语。

不说挪威语 nn 和 nb 是书面形式

在网站上，如果您看到 no-no，您可以假设它是 nb-no。

# android - 使用 Robolectric 测试打开原始资源

> ID：13159975
> 
> 赞同：6
> 
> 时间：2012-10-31T14:13:52.563
> 
> 标签：android, android-resources, robolectric

我有一个扩展 SQLiteOpenHelper 的类，它打开一个 xml 文件来填充 SQLite 数据库。我正在为它创建单元测试，但被困在我需要打开 xml 输入资源的地方：

```
context.getResources().getXml(R.xml.sample_input); 
```

调试它，我可以看到 context.getResources() 是非空的并且是一个影子对象，但是 context.getResources().getXml(R.xml.sample_input) 返回一个空值。

阅读周围我看到人们提到我需要创建一个影子资源，但我没有看到任何地方解释如何为这样的案例执行此操作。

如果它有帮助，这就是我的自定义测试运行器类目前的样子

```
public class CustomTestRunner extends RobolectricTestRunner {
    public CustomTestRunner(Class<?> testClass) throws InitializationError {
        super(testClass, new File("src/main/android/"));
    }
} 
```

为了使资源在我的测试中发挥作用，我缺少什么？

# git - 如何让 git 默认忽略对子模块的更改

> ID：13159979
> 
> 赞同：7
> 
> 时间：2012-10-31T14:14:00.900
> 
> 标签：git, git-submodules, gitignore, git-config

由于 gitmodules 是在 Git 中引入的，我喜欢像这样添加它们：

```
[submodule "actionbarsherlock"]
path = actionbarsherlock
url = git://github.com/JakeWharton/ActionBarSherlock.git
ignore = dirty 
```

这里的重要部分是`ignore = dirty`.

使用`git submodule add`命令时，我不得不自己在`.gitmodules`文件中添加这一行。

我怎样才能使这成为`git submodule add`我将来所做的每件事的默认行为？

我知道`submodule.<name>.ignore`配置，但是默认情况下如何将其应用于所有配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-27T17:52:08.733

请注意，即使有这样的配置，git 2.0.1（2014 年 6 月 25 日）仍会向您显示已暂存的子模块。

请参阅[Jens Lehmann的](https://github.com/jlehmann)[提交 1d2f393](https://github.com/git/git/commit/1d2f393ac9bfb4c20f14d6ead7bb4c56e766ab77) ( [)](https://github.com/jlehmann)[`jlehmann`](https://github.com/jlehmann)

> 当前设置`submodule.<name>.ignore`和/或`diff.ignoreSubmodules`“ `all`”会抑制 diff 系列、状态和提交的子模块更改的所有输出。
> 
> **对于状态和提交，这确实令人困惑，因为即使用户选择通过手动添加来为忽略的子模块记录新提交，此更改也不会显示在要提交的更改下。
> 雪上加霜的是，`nothing to commit`当仅暂存忽略的子模块时，稍后的“git commit”将出错并显示“”。**
> 
> 通过`wt_status`始终打印分阶段的子模块更改来解决此问题，无论配置了什么忽略设置。
> 唯一的例外是当用户显式使用“ `--ignore-submodules=all`”命令行选项时，在这种情况下子模块输出仍然被抑制。当仅暂存忽略的子模块的修改时，
> 这也使“ ”再次起作用，因为该命令使用结构的“可提交”成员来确定是否存在暂存更改。 `git commit``wt_status`

有关该部分，另请参见[提交 c215d3d](https://github.com/git/git/commit/c215d3d2826c882feb819e5743287ec74d9ff693)`git commit`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:48:21.450

所以要关闭它，**不**，它没有默认选项（遗憾的是）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-02T07:01:00.073

今天发现可以`git config`用来更改`.gitmodules`文件，因此可以添加忽略脏标志，而无需进入文件并手动添加行：

```
git config -f .gitmodules submodule.actionbarsherlock.ignore dirty 
```

就我而言，我能够使用该命令自动执行脚本中的两个步骤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T17:44:43.620

我不确定默认选项。如果它是二元状态（忽略与否），您可以通过以下方式获得牵引力：

```
diff.ignoreSubmodules
   Sets the default value of --ignore-submodules. Note that this affects only git diff Porcelain, and not lower level diff commands such as git diff-files.  git checkout also
   honors this setting when reporting uncommitted changes. 
```

但是当您使用时`dirty`，我不确定是否有办法设置默认值。无论如何，您可以在`$PATH`. 编写一个接受子模块作为参数的脚本并设置正确的`dirty`配置值，然后将该脚本添加到您的`$PATH`. 调用它`git-<command>`，它将以`git <command>`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-14T15:27:36.950

```
[submodule "book"]
    path = book
    url = https://user@bitbucket.org/user/repo.git
    ignore = all 
```

或使用

```
git config -f .gitmodules submodule.tests.ignore all 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-18T10:17:07.540

你是这个意思吗？

`git config --global core.ignore dirty`

它将首选项写入您的`~/.gitconfig`文件。

# css - 带有大背景图像的 chrome 滚动不流畅

> ID：13159981
> 
> 赞同：1
> 
> 时间：2012-10-31T14:14:09.163
> 
> 标签：css, google-chrome, scroll, background-image

我创建了一个网页，它有 7 个六个部分，带有巨大的背景图像，使用`background-size: cover;`. 它在除 Google Chrome（所有版本/所有平台）之外的所有浏览器中都能正常工作。当我尝试在谷歌浏览器中滚动页面或单击其链接（他们也使用 $.scrollTo 滚动页面）时，页面会变得不稳定和滞后，并且滚动缓慢并使用 100% 的 CPU。

我已经上传了这个页面，所以你可以测试它：[http](http://baaemail.com/beta) ://baaemail.com/beta （我稍后会删除这个页面）。甚至 IE9/10 也很好，但 chrome 变得不稳定。

该页面绑定了几个“滚动”事件，我尝试完全禁用 javascript，但它并没有变得更好，所以它不是来自滚动事件。

我正在使用`background-size: cover`它，因为它完全按照我想要的方式塑造照片，并且我希望修复图像，这就是为什么我不能使用其他方法，比如使用`img`标签而不是背景。

我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:22:24.327

我为自己找到的一个具有类似行为的网站的解决方案是`background-repeat:no-repeat`为那些包含巨大背景图像的 div 添加 css 属性。

您还可以检查您是否有重复的背景图像`body`，`html`对我来说，最大的问题是重复的图案图像严重干扰了 google chrome 的滚动性能。

此外，如果您在这些“幻灯片”上使用 CSS 过渡，您应该检查那些没有分配给“全部”。如果您仅对“左”属性进行转换，则将其分配给“全部”是没有意义的。

我不确定仅此一项是否会对您有所帮助，但压缩图像和脚本始终是一个好习惯。

这东西对我有用。希望能帮助到你。

# php - PHP PDO MySQL 语法错误 1064

> ID：13159982
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:14:09.337
> 
> 标签：php, mysql, pdo

将应用程序从本地计算机上传到开发服务器时遇到错误。我正在尝试将记录插入到本地工作的表中（WAMP、PHP 5.4.3、MySQL 5.5.24），但它在开发服务器（IIS、PHP 5.3.2、MySQL 5.0.88）上失败。

我的查询是：

```
$SQL="INSERT INTO log(`dev_id`,`website_id`,`time_entered`,`location`,`page`,`reason`,`backup_file`,`status`) VALUES('".$DevID."','".$WebsiteID."','".time()."','".$Location."','".$Page."','".$Reason."','".$BackupFile."','".$Status."')"; 
```

正如你所看到的，我已经在字段中反引号，因为我认为是那样。我还引用了所有内容，因为我认为未引用的数字导致了问题。我也把它变成了一个准备好的语句，并得到了同样的错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'log(`dev_id`,`website_id`,`time_entered`,`location`,`page`,`reason`,`backup_file' at line 1 
```

我到处寻找解决方案，似乎错误 1064 是一个棘手的问题。我假设这与软件版本的巨大差异有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:28:55.040

作为保留关键字的表名也需要转义。

```
INSERT INTO `log` (...) 
```

您在那里所做的类似于调用[LOG](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_log)函数。

# facebook - 不会添加赞

> ID：13159985
> 
> 赞同：1
> 
> 时间：2012-10-31T14:14:14.333
> 
> 标签：facebook, facebook-like

我在自己的网站上放了一个喜欢按钮，当我点击时，我的网站作为新闻提要添加到 facebook，显示我喜欢一个网站，但它没有添加到我的个人资料中 喜欢：这里的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es" xmlns:og="http://ogp.me/ns#"
xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

元属性：

```
<head>
<meta property="og:title" content="Puerto Deseado Turismo" />
<meta property="og:description" content="Puerto Deseado Turismo: Agencia de viajes y turismo nacional e internacional. Contamos con transportacion propia con unidades 2012" />
<meta property="og:url" content="http://www.puertodeseadoevyt.com.ar/index.html" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://www.puertodeseadoevyt.com.ar/images/logo-pd-facebook.jpg" />
<meta property="og:image:width" content="200" />
<meta property="og:site_name" content="Puerto Deseado Turismo" />
</head> 
```

和 iframe：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.puertodeseadoevyt.com.ar&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe> 
```

什么不见​​了？

# tweets - 我可以使用cluto 和carrot2 工具将推文分组吗？

> ID：13159988
> 
> 赞同：0
> 
> 时间：2012-10-31T14:14:23.797
> 
> 标签：tweets, carrot2, cluto

我可以使用 cluto 和 carrot2 工具将推文分组吗？

最后一个问题是carrot2 和cluto 语言无关的NLP 工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:55:31.950

您可以使用 Carrot2 对任何自然语言文本（包括推文）进行聚类。Carrot2 完全独立于语言，并且开箱即用地支持主要语言。

# constructor - RubyMotion 中的对象初始化

> ID：13159990
> 
> 赞同：0
> 
> 时间：2012-10-31T14:14:27.430
> 
> 标签：constructor, initialization, rubymotion

我是 RubyMotion 的新手，并试图了解对象初始化的工作原理。假设一个简单的类有一个类和一个实例方法：

```
class Something
  def self.getSomething
    BubbleWrap::HTTP.post("http://example.com") do |response|
      p response
    end
  end

  def getSomething
    BubbleWrap::HTTP.post("http://example.com") do |response|
      p response
    end
  end
end 
```

现在，为什么以下工作：

```
Something.getSomething 
```

下一个片段有时不会（运行这个片段并且运行时崩溃了 10 次中的 8 次）。

```
something = Something.new
something.getSomething 
```

我做错了。任何指向正确方向的指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:45:05.137

使用实例变量：

```
@something = Something.new
@something.getSomething 
```

RubyMotion 有一些与局部变量和块相关的错误。您分配给`something`然后调用`something.getSomething`，然后使用 BubbleWrap 的异步`HTTP.post`方法。BubbleWrap HTTP 块运行，但与此同时，您调用的方法`something.getSomething`已完成执行。因为`something`是一个局部变量，所以当方法退出时它会被垃圾回收。因此，当 HTTP 请求完成并调用该块时，该块不再存在。

您可能会看到随机的不一致错误（有时是实际工作请求），因为每次，存储块的内存位置都被回收用于其他东西（或者偶尔，它根本没有被回收所以块仍然存在）。当您使用实例变量时，这些都不会发生，因为当调用方法完成执行时，实例变量会保留。

这种行为绝对是出乎意料的；我知道已经提交了几个问题（包括我自己）来解决这个问题。

# html - 条件 css 样式未应用于通过 ajax 在 ie7 上加载的内容

> ID：13159992
> 
> 赞同：2
> 
> 时间：2012-10-31T14:14:27.743
> 
> 标签：html, css, ajax, internet-explorer-7

我正在尝试解决我正在开发的 Rails 应用程序的一些 IE7 问题。问题在于，似乎 CSS 样式是从应用了条件注释的样式表中添加的，在 HAML 中使用：

```
/[if IE 7]
  = stylesheet_link_tag '/ie7.css' 
```

此样式表中定义的样式已正确应用，但通过 ajax 加载的任何内容除外。我们正在使用 $.ajax 将 html 内容加载到现有的 div 中。我试过使用 ie8.js 和 html5shiv.js 来解决这个问题，但它似乎没有任何效果。

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:19:22.640

为什么不直接通过 HTML 文档应用 IE7 样式？使用以下语法：

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

在下面了解有关 Internet Explorer HTML 条件注释的更多信息。

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# c# - XmlSerializer - 反序列化枚举时如何设置默认值？

> ID：13159998
> 
> 赞同：4
> 
> 时间：2012-10-31T14:14:42.643
> 
> 标签：c#, xml-serialization, xmlserializer, defensive-programming

我有一个看起来像这样的类（高度简化）：

```
public class Foo
{
    public enum Value
    {
        ValueOne,
        ValueTwo
    }

    [XmlAttribute]
    public Value Bar { get; set; }
} 
```

我从外部源接收 XML 文件。他们的文档指出 Foo 元素在 Bar 属性中只会有“ValueOne”或“ValueTwo”（他们不提供 XSD）。

所以，我像这样反序列化它：

```
 var serializer = new XmlSerializer(typeof(Foo));
 var xml = "<Foo Bar=\"ValueTwo\" />";
 var reader = new StringReader(xml);

 var foo = (Foo)serializer.Deserialize(reader); 
```

...而且一切正常。

然而，昨晚，他们向我发送了一些看起来像*这样*的 XML ，而我的反序列化失败了（应该如此）：`<Foo Bar="" />`

有没有一种很好的方法来围绕这个进行防御性编码？理想情况下，我想说“如果这里出现问题，默认使用 ValueOne”。我不想丢弃整个 XML 文件，因为单个属性被破坏了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:22:22.110

你可以像这样设置你的枚举，所以这会将枚举的“”值设置为 Unknown = 0 有点像默认值

```
public enum Foo
{
   [XmlEnum(Name = "")]
   Unknown =0,
   [XmlEnum(Name = "Single")]
   One,
   [XmlEnum(Name = "Double")]
   Two   
} 
```

更详细的检查：[**XmlEnumAttribute 类**](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlenumattribute.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:39:43.437

击落`XmlSerializer`.. 使用**LINQ2XML**完成这个简单的任务

```
XElement doc=XElement.Load("yourStreamXML"); 

List<Foo> yourList=doc.Descendants("Foo")
.Select(x=>
new Foo
{
    Bar=(Enum.GetNames(typeof(Value)).Contains(x.Attribute("Bar").Value))?((this.Value)x.Attribute("Bar")):(this.Value.ValueOne);
}
).ToList<Foo>(); 
```

所以，我基本上是这样做的

```
if(Enum.GetNames(typeof(Value)).Contains(x.Attribute("Bar").Value))
//if the xml bar value is a valid enum
    Bar=(this.Value)x.Attribute("Bar");
else//xml bar value is not a valid enum..so use the default enum i.eValueOne
    Bar=this.Value.ValueOne; 
```