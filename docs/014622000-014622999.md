# StackOverflow 问答 14622000-14622999

# android - 以不同方式处理 TextView 触摸/拖动事件

> ID：14622001
> 
> 赞同：3
> 
> 时间：2013-01-31T09:09:11.943
> 
> 标签：android, textview, touch-event

我正在开发一个应用程序，我需要在其中拖动一个文本视图，并在单击它时显示一个对话框。

我在下面添加了我的代码，当我使用 only 时`ACTION_MOVE`，我可以拖动文本。但是，当我`TextDialog.setVisibility(View.VISIBLE);` 让我的对话框可见时，我无法拖动文本。这两个事件没有同时进行。

我该如何处理这两个事件？

```
tvText=  (TextView)findViewById(R.id.text);
    TextDialog=(LinearLayout)findViewById(R.id.Textdialog);
    tvText.setOnTouchListener(this);
    tvText.setOnClickListener(this);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    layoutParams = (LayoutParams) tvText.getLayoutParams();
    switch(event.getAction())
    {
    case MotionEvent.ACTION_DOWN:  
                        TextDialog.setVisibility(View.VISIBLE);
                                    break;
    case MotionEvent.ACTION_MOVE:
                                    int x = (int)event.getRawX();
                                    int y= (int)event.getRawY();

                                    layoutParams.leftMargin = x - 150;
                                    layoutParams.topMargin = y - 210;

                                    tvText.setLayoutParams(layoutParams);
                                    break;

          default:
                                    break;
    }
          return true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:31:58.410

也实现 OnClickListener。检查[这个](http://www.qc4blog.com/?p=1181)

```
myView.setOnTouchListener(myListener);
myView.setOnClickListener(myListener);

/* MyListener class */
class MyListener implements View.OnTouchListerner, View.OnClickListener {
public void onTouch(View v, MotionEvent e) {
    if (e.ACTION_MOVE) {
        Log.d("ACTION MOVE",""); // now it is called
    } else if (e.ACTION_DOWN) {
        Log.d("ACTION_DOWN"); // called
    }
}

    public void onClick(View v) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T09:39:21.070

使用任何小部件或布局拖放并将其放入 onTouch()

```
@Override
    public boolean onTouch(View view1, MotionEvent event) {

        final int X = (int) event.getRawX() - minusDisplayVal;
        final int Y = (int) event.getRawY() - minusDisplayVal;

        LinearLayout.LayoutParams layoutParamsSub = (LinearLayout.LayoutParams) view1
                .getLayoutParams();
        int _xDelta = 0;
        int _yDelta = 0;

        switch (event.getActionMasked() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            _xDelta = X - layoutParamsSub.leftMargin;
            _yDelta = Y - layoutParamsSub.topMargin;
            break;

        case MotionEvent.ACTION_UP:
            _xDelta = X - layoutParamsSub.leftMargin;
            _yDelta = Y - layoutParamsSub.topMargin;
            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            _xDelta = X - layoutParamsSub.leftMargin;
            _yDelta = Y - layoutParamsSub.topMargin;
            break;

        case MotionEvent.ACTION_POINTER_UP:
            _xDelta = X - layoutParamsSub.leftMargin;
            _yDelta = Y - layoutParamsSub.topMargin;
            break;

        case MotionEvent.ACTION_MOVE:

            layoutParamsSub.leftMargin = X - _xDelta;
            layoutParamsSub.topMargin = Y - _yDelta;

            if (layoutParamsSub.leftMargin < 0)// //for left
                layoutParamsSub.leftMargin = 0;

            if (layoutParamsSub.topMargin < 0)// ///for top
                layoutParamsSub.topMargin = 0;

            dataTv.setLayoutParams(layoutParamsSub);
            break;
        }
        backgroudColor.invalidate();
        return true;
    } 
```

# php - php只下载文件的前1mb

> ID：14622011
> 
> 赞同：2
> 
> 时间：2013-01-31T09:09:59.370
> 
> 标签：php

我正在使用 file_get_contents 来获取远程文件。我的问题是，是否可以要求 php 下载文件的前 1mb 而不是整个文件？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:12:54.683

来自 php.net[`file_get_contents`](http://php.net/file_get_contents)

```
string file_get_contents ( string $filename [, bool $use_include_path = false [, resource $context [, int $offset = -1 [, int $maxlen ]]]] ) 
```

您必须指定最后一个`maxlen`参数（以字节为单位）。

> **麦克斯伦**
> 
> 读取数据的最大长度。默认是读取直到到达文件末尾。请注意，此参数应用于过滤器处理的流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:12:36.333

据我所知，您无法指定 MB 的数量，但您可以执行以下操作。

```
<?php
// Read 14 characters starting from the 21st character
$section = file_get_contents('./people.txt', NULL, NULL, 20, 14);
var_dump($section);
?> 
```

[阅读文档](http://php.net/manual/en/function.file-get-contents.php)

```
string file_get_contents ( string $filename [, bool $use_include_path
= false [, resource $context [, int $offset = -1 [, int $maxlen ]]]] ) 
```

> maxlen - 读取数据的最大长度。默认是读取直到到达文件末尾。请注意，此参数应用于过滤器处理的流。

# php - php/jquery 比较内容失败无法正常工作

> ID：14622015
> 
> 赞同：4
> 
> 时间：2013-01-31T09:10:15.803
> 
> 标签：php, javascript, jquery, parsing

需要在不同的内容上播放声音，但每次都在播放声音

get.php 中只有一个回显可以正常工作，如果我将 get.php 中的代码更改为解析器代码，它的行为就像内容一直不一样

#

html正文代码

#

```
<div id="main"><?php include("ajax/get.php");?></div>
    <audio id="sound" src="sound/sound.ogg" controls type="audio/ogg" preload="auto" autobuffer></audio>

        <script type="text/javascript">
                var audio=document.getElementById("sound");
                setInterval(function()
                {
                    $.get('ajax/get.php',function(data){
                    if ($('#main').html() !== data){
                        $('#main').html(data);
                        audio.play();                   
                    }                   
                  });
                }, 5000);
        </script> 
```

#

php解析器代码

#

```
require_once('simple_html_dom.php');

    $html=file_get_html('supersite-content');

    $ret = $html->find('.request');
    foreach ($ret as $key) {
    echo "$key</br></br>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:41:08.957

浏览器主要在渲染时修改 html，因此它与文本形式不同。您可以添加缓存来比较原始字符串。像这样的东西：

```
var audio = $("#sound");
var lastDate = null;
setInterval(function()
{
    $.get('ajax/get.php', function(data) {
    if (lastDate !== data){
        lastDate = data;
        $('#main').html(data);
        audio.play();                   
    }                   
  });
}, 5000); 
```

# ruby - 在 postgres heroku 中创建一个表

> ID：14622018
> 
> 赞同：3
> 
> 时间：2013-01-31T09:10:24.127
> 
> 标签：ruby, postgresql, heroku, rack

我是一个红宝石新手。我正在尝试创建一个简单的 API，使用`rack`它获取一个 json 数据并将其写入 postgres heroku 数据库表。我在 postgres heroku 上创建了一个数据库，但没有找到任何在那里创建表的选项。任何人都可以提供一些指向一些好的教程的指针，这些教程解释了如何实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T04:06:02.337

如果您有开发或基本计划，您将无法直接连接到数据库并手动创建表，因此您需要编写一个迁移脚本来为您创建表。

使用像 ActiveRecord 这样的 ORM 通常是一个好主意，它可以很容易地自动化所有 SQL 繁重的工作。使用 sinatra-activerecord ( [https://github.com/janko-m/sinatra-activerecord](https://github.com/janko-m/sinatra-activerecord) ) gem 在您的机架应用程序上获取 rake 助手任务。只要确保您使用`ENV[DATABASE_URL]`指向您的 Heroku 数据库而不是使用本地 sqlite3。

然后运行本地命令`rake db:create_migration NAME=json_data`来创建你的迁移文件，然后一旦你创建了它，运行 Heroku 命令`heroku run bundle exec rake db:migrate`来创建你需要的所有表和模式。

# android - 无法解析 API 文件“frameworks/base/api/current.txt”

> ID：14622020
> 
> 赞同：8
> 
> 时间：2013-01-31T09:10:27.833
> 
> 标签：android, android-source, android-framework, android-make

我尝试在 Android 框架中添加一些文件。一切顺利，除了在编译结束时我遇到错误。

我也尝试过 make update-api ，但没有运气，每次编译时都会出现以下错误。如果有人知道如何克服这个问题，请告诉我。

```
Docs droiddoc: out/target/common/docs/doc-comment-check
Checking API: checkapi-last
Checking API: checkapi-current
host layoutlib_create: out/host/common/obj/JAVA_LIBRARIES/temp_layoutlib_intermediates/javalib.jar
Couldn't parse API file "frameworks/base/api/current.txt"
  ...as text: com.google.doclava.apicheck.ApiParseException: missing class or interface. got: private line 6342
  ...as XML:  com.google.doclava.apicheck.ApiParseException: Error parsing API
Couldn't parse API file "out/target/common/obj/PACKAGING/public_api.txt"
  ...as text: com.google.doclava.apicheck.ApiParseException: missing class or interface. got: private line 6342
  ...as XML:  com.google.doclava.apicheck.ApiParseException: Error parsing API
Exception in thread "main" java.lang.NullPointerException
    at com.google.doclava.apicheck.ApiCheck.checkApi(ApiCheck.java:118)
    at com.google.doclava.apicheck.ApiCheck.main(ApiCheck.java:67)

******************************
You have tried to change the API from what has been previously approved.

To make these errors go away, you have two choices:
   1) You can add "@hide" javadoc comments to the methods, etc. listed in the
      errors above.

   2) You can update current.txt by executing the following command:
         make update-api

      To submit the revised current.txt to the main Android repository,
      you will need approval.
******************************

Couldn't parse API file "out/target/common/obj/PACKAGING/public_api.txt"
  ...as text: com.google.doclava.apicheck.ApiParseException: missing class or interface. got: private line 6342
  ...as XML:  com.google.doclava.apicheck.ApiParseException: Error parsing API
Exception in thread "main" java.lang.NullPointerException
    at com.google.doclava.apicheck.ApiInfo.isConsistent(ApiInfo.java:60)
    at com.google.doclava.apicheck.ApiCheck.checkApi(ApiCheck.java:118)
    at com.google.doclava.apicheck.ApiCheck.main(ApiCheck.java:67)

******************************
You have tried to change the API from what has been previously released in
an SDK.  Please fix the errors listed above.
******************************

make: *** [out/target/common/obj/PACKAGING/checkapi-last-timestamp] Error 38
make: *** Waiting for unfinished jobs....
make: *** [out/target/common/obj/PACKAGING/checkapi-current-timestamp] Error 38
-rw-r--r-- 1 aankit admin 9763299 Jan 31 14:21 out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/classes.jar
Output: out/host/common/obj/JAVA_LIBRARIES/temp_layoutlib_intermediates/javalib.jar
Input :      out/target/common/obj/JAVA_LIBRARIES/core_intermediates/classes.jar
Input :      out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/classes.jar
Found 7983 classes in input JARs.
Found 2260 classes to keep, 2143 class dependencies.
# deps classes: 2143
# keep classes: 2260
# renamed     : 19
Created JAR file out/host/common/obj/JAVA_LIBRARIES/temp_layoutlib_intermediates/javalib.jar 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-29T06:10:03.393

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:30:16.690

您是否尝试过在更新 api 之前编译代码？您添加的代码似乎无法编译。问题是无法解析新的api。如果你检查一下`external/doclava/src/com/google/doclava/apicheck/ApiFile.java`，你会发现可以帮助你的 throw 语句：

```
throw new ApiParseException("missing class or interface. got: " + token, tokenizer.getLine()); 
```

似乎您尝试添加不允许的 api**私有类或接口。**要检查这一点，请尝试查看`out/target/common/obj/PACKAGING/public_api.txt`文件行号 6342。在那里您应该找到导致错误的类或接口的名称。

# php - 清除html编辑器的内容

> ID：14622021
> 
> 赞同：0
> 
> 时间：2013-01-31T09:10:36.750
> 
> 标签：php, jquery

我确实有文本框和两个复选框，我可以在单击按钮时清除其值：

```
$("#cleartext").live('click', function () {
        $(this).parents('form').find('input[type="text"]').val('');
        $(".check").attr("checked", false);
    }); 
```

但我确实有一个文本区域，我在其中使用 html 编辑器，但我无法清除它的值，所以请就此向我提出建议，这些元素的视图如下：

```
 <input type="text" id="title" name="title" required title="required" placeholder="title" data-bind="value:title" />
                            <input type="checkbox" id="active" name="active" class="check" data-bind="checked: active=='true'"  />Active
                            <input type="checkbox" id="logon" name="logon" class="check" data-bind="checked: use_logo=='true'"  />Logo
    <textarea id="iiii" name="iiii" class="htmleditor" rows="9" cols="50" style="width: 600px; height: 190px;"></textarea>
<button type="button" class="btn"  id="cleartext">New Contract</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:19:09.257

您正在使用哪个 HTML 编辑器..

FCK或类似的开源编辑器有各自的方法来清除所有内容

例如

```
<script type="text/javascript"> 
function resetEditor(id) {
FCKeditorAPI.GetInstance(id).SetData('');
}
</script>. 
```

对于 wysihtml5 试试下面

```
var rte = $('#description').wysihtml5();
   rte.setValue(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:37:56.930

如果我找到正确的插件，下面应该可以正常工作：

```
$('#iiii').data("wysihtml5").editor.clear() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:15:19.863

**建议与更正**

该功能`$.live()`已弃用。所以更改以下代码：

```
$("body").on('click', "#cleartext", function () {
    $(this).parents('form').find('input[type="text"]').val('');
    $(".check").attr("checked", false);
}); 
```

现在取决于文本区域，例如。Redactor，你需要这样清除：

```
editor.setCode('<p></p>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:25:51.117

正如 Praveen Kumar 所说，`$.live()`已弃用。以下应该有效，并清除文本区域：

```
$("body").on("click", "#cleartext", function() {
    $(this).parents("#your-form").find("input[type='text']").val("");
    $(".check").attr("checked", false);
    $("#iiii").val("");
}); 
```

但是如果你的函数被频繁调用，你应该绑定`$.on()`在更近的块上。您还应该避免`$.parents()`，因为这些功能很重。

# nosql - 检测 Cassandra 中的变化

> ID：14622041
> 
> 赞同：3
> 
> 时间：2013-01-31T09:12:12.020
> 
> 标签：nosql, cassandra

是否可以在 Cassandra 中更新数据时收到通知？即，何时从另一个节点复制了对节点的更改？

我可以直接使用 Gossip 来做到这一点，还是有更高级别的抽象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:00:10.247

不。

八卦不是可以依赖的东西。Cassandra 节点本身并不依赖它来保证。（例如，如果一个节点关闭，则更新仅排队一个小时）。这也是您需要`nodetool repair`定期跑步的原因。

Cassandra 也没有触发器。

我建议您在应用程序中进行更新跟踪。

# c++ - 如何将 int 从一个 .h 获取到另一个 .h

> ID：14622044
> 
> 赞同：1
> 
> 时间：2013-01-31T09:12:22.107
> 
> 标签：c++, variables, header-files

我有两个头文件，我需要头文件 2 中的头文件 1 中的一些变量。这里有一些信息可以提供帮助。

```
int SelRace, ...
char Race[80], ... 
```

这两个来自头文件 1，我需要头文件 2 中的这些值来遵循 if() 语句。在头文件 1 中，SelRace 被分配了 1、2 或 3，我尝试在完成后再次调用它。这是头文件 2 中需要它的地方。

```
while (1)
{
    if(SelRace == 1)
    {
        cout << "[text here]" << endl;
    }
        else if(SelRace == 2)
    {
        cout << "[text here]" << endl;
    }
        else if(SelRace == 3)
    {
        cout << "[text here]" << endl;
    }
        else
    {
        cout << endl;
    }
} 
```

Race[80] 将在 [text here] 中的各个点重印，因为我还没有填写这些内容。根据 SelRace 的值，Race[80] 也写入了不同的字符串。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:14:43.747

你应该

*   将它们定义为 a`.cpp`而不是`.h`您现在所做的 a。
*   在 a 中将它们声明为 extern`.h`
*   将上述内容包含`.h`在第 2 项中`.cpp`

步骤 2 和 3 可以通过将它们声明为 extern 来合并，`.cpp`正如 billz 所建议的那样，这取决于您希望使用这些全局变量的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:14:53.267

您不应该将变量*定义*放在头文件中。如果这样做，则不能将它们包含在多个源文件中，因为变量将具有多个定义。

而是将*定义*放在源文件中，将*声明*放在头文件中。然后，您可以在需要使用该变量的所有源文件中包含该头文件。

*声明*应该是一个声明，`extern`例如：

```
extern int SelRace;
extern char Race[80]; 
```

该`extern`关键字告诉编译器该变量是在另一个地方定义的，因此它可以被链接器正确引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:14:48.710

您可以在一个头文件中定义一个外部变量并在另一个头文件中使用它，如下所示

```
extern int SelRace; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:15:10.097

在头文件中，只声明函数原型。将定义放入 cpp 文件并确保只有一个定义，但`extern`如果需要使用变量，请使用。

一.cpp

```
int SelRace, ...
char Race[80], ... 
```

另一个.cpp

```
extern int SelRace, ...
extern char Race[80], ... 
```

具有您`while loop`应该转到 cpp 文件而不是头文件的函数定义。

# c# - 在 C# 中从摄像机录制视频

> ID：14622048
> 
> 赞同：0
> 
> 时间：2013-01-31T09:12:29.520
> 
> 标签：c#, camera, webcam, video-capture

我需要能够在 C# 应用程序中从外部摄像头录制视频。

不幸的是，网络摄像头几乎是不可能的，因为该应用程序将在室外和晚上/夜间进行记录。这就是为什么我考虑使用摄像机的原因，因为它还可以手动控制曝光和对焦、更低的噪音和更好的传感器。

到目前为止，我会使用摄像机的 AV/S-Video 输出并将信号发送到 USB 采集卡（计算机是笔记本电脑，所以没有 PCI-E 卡）。

1.  既然它来自采集卡，我如何能够从 C# 应用程序访问视频流？

2.  我提议的系统是否可行（可实现、视频质量好、fps 好）？有人有其他可行的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:40:36.733

这篇[代码项目文章](http://www.codeproject.com/Articles/15537/Camera-Vision-video-surveillance-on-C)可能是一个很好的起点。

作者提到：

> 该应用程序的主要目标是使其灵活和可扩展。应用程序本身可以与任何视频源进行通信——它可能是 IP 摄像机或服务器，可能是连接到 USB 的本地摄像机，可能是来自远程服务器的 MMS 流，也可能是任何其他视频源. 更重要的是，该应用程序可以同时处理所有这些视频源，将它们全部显示在一个屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:02:07.240

我最终使用的解决方案是 Microsoft Expression Encoder。

# php - 使用 MY_Model

> ID：14622057
> 
> 赞同：2
> 
> 时间：2013-01-31T09:12:51.690
> 
> 标签：php, codeigniter

我正在使用 jamie Rumbelow 的 MY 模型来更好地处理我的应用程序。

```
https://github.com/jamierumbelow/codeigniter-base-model 
```

MY_model 是相同的，除了我添加了一个变量来定义数据库中的项目是否被标记为软删除。受保护的 $soft_delete_value = 3;

我只定义了那个变量，还没有改变他的代码来解释这个值。

我有两件事想用这个标题模型做，我需要帮助理解。

```
Titles Table - title_id, title_name, title_status_id
Title_Statuses_Table - title_status_id, title_status_name 
```

我想要它做的是检索所有 title_status_id 为 1 和 2 和 3 的行，因为软删除值与 MY 模型中的默认设置不同。我还想拥有的是它返回状态名称而不是返回整数。

**预期成绩：**

包含 title_id、title_name、title_status_name 的对象数组，其中标题的状态 ID 为 1、2 或 3。

**测试**

```
$titles = $this->titles_model->get_all();
echo "<pre>";
print_r($titles);
echo "</pre>"; 
```

**实际结果：**

```
SELECT *
FROM (`titles`)
WHERE `title_status_id` =  0

<pre>Array
(
) 
```

**我的代码**

```
class Titles_model extends MY_Model 
{
    /* --------------------------------------------------------------
    * VARIABLES
    * ------------------------------------------------------------ */

    /**
    * This model's default database table.
    */
    public $_table = 'titles';

    public $primary_key = 'title_id';

    /**
    * Support for soft deletes and this model's 'deleted' key
    */
    public $soft_delete = TRUE;
    public $soft_delete_key = 'title_status_id';
    public $soft_delete_value = 4;
    public $_temporary_with_deleted = FALSE;

    public function __construct()
    {
        parent::__construct();
    }
} 
```

还有其他人有任何其他想法/建议吗？

编辑：

我整天都在试图解决这个问题，但遇到了死胡同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:22:36.843

好吧，这将是您获得预期结果所需的功能

```
 $this->db->select('
                titles.*,
                status.*,
                 ')
                ->join('status s', 'titles.title_status_id = s.title_status_id', 'LEFT')
                ->where('titles.title_status_id', 1)
                ->or_where('titles.title_status_id', 2)
                ->or_where('titles.title_status_id', 3)
                ->from('titles')
                ->get()
                ->result_object(); 
```

# objective-c - 在 ios 5 模拟器中使用时如何更改 UIPageControl 的颜色

> ID：14622066
> 
> 赞同：7
> 
> 时间：2013-01-31T09:13:16.680
> 
> 标签：objective-c, ios5, xcode4.5, uipagecontrol

我在我的应用程序中使用以下代码：-

在 .h 文件中

```
@property (strong, nonatomic) IBOutlet UIPageControl *pageControl; 
```

并在 .m 文件中

```
pageControl.currentPage = counting; 
```

计数是`NSInteger`。该应用程序工作正常，但`UIPageControl`设置为默认白色，我无法通过属性检查器更改颜色，有人可以帮忙吗？...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-18T05:19:39.787

在 ios 6 中，您可以这样做：

```
pageControl.pageIndicatorTintColor = [UIColor blueColor];
pageControl.currentPageIndicatorTintColor = [UIColor greenColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:22:44.760

类似如下。

[如何更改 UIPageControl 分页点的颜色？](https://stackoverflow.com/questions/2942636/how-i-change-the-color-of-pagination-dots-of-uipagecontrol)

我认为页面控制器没有属性可以更改点颜色

# java - 如何将 webapp 中的日期时间与 Ubuntu 12.04 中的系统日期时间同步

> ID：14622067
> 
> 赞同：0
> 
> 时间：2013-01-31T09:13:16.997
> 
> 标签：java, shell, datetime, tomcat6, ubuntu-12.04

我们正在开发一个使用 jsp/servlets 实现的 Web 应用程序，目前我们使用的是 ubuntu 12.04 服务器。我们需要添加另一个 UI，允许用户更改 Ubuntu 系统日期时间。它将具有在 webmin 工具中可以看到的相同功能。在这种情况下，您对应用程序设计有何建议？

1.  如何将客户端的 webapp 日期时间与系统日期时间同步？因此 Web UI 每 5 秒自动更新一次。它的设计会是什么样子..

2.  如何在 java 中做到这一点，同步或至少修改系统日期时间。我必须为此使用 shell 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:05:27.360

这可以通过采用简单的设计来解决，其中客户端由 jquery 处理并使用 java 脚本，在用于升级系统数据的更新 shell 命令中。

# iphone - 如何在 iPhone 中解析 Json 值？

> ID：14622068
> 
> 赞同：5
> 
> 时间：2013-01-31T09:13:19.250
> 
> 标签：iphone, ios, json, parsing

> **可能重复：**
> [如何使用 JSON 框架解析 iPhone SDK (XCode) 中的 JSON 对象](https://stackoverflow.com/questions/3165290/how-to-parsing-json-object-in-iphone-sdk-xcode-using-json-framework)

我在 iPhone 应用程序中工作，使用 JSON 框架从 Web 服务解析 Json 值，如何获取 Json 值，如 1221、1278、3456、............等（这个值不是恒定的，它是自动动态更改值，所以我不知道）可以这样做吗？

提前致谢

JSON响应供您参考：

```
 {
        "1221": 
    {
            "type": "product",
            "product_id": 1221,
            "intID": "1",
            "name": "rer Margherita",
            "des": "Tomatensauce, Käse<sup>1</sup>",
            "img": "",
            "isDeal": false,
            "cat": {
                "1": {
                    "price": 4,
                    "pos": 1,
                    "catname": "normal",
                    "extras": false
                },
                "2": {
                    "price": 5.9,
                    "pos": 2,
                    "catname": "groß",
                    "extras": false
                }
            }
        },
        "1278": {
            "type": "product",
            "product_id": 1222,
            "intID": "2",
            "name": "ere Zwirerebeln",
            "des": "er",
            "img": "",
            "isDeal": false,
            "cat": {
                "1": {
                    "price": 2,
                    "pos": 1,
                    "catname": "rer",
                    "extras": true
                },
                "2": {
                    "price": 6.2,
                    "pos": 2,
                    "catname": "mega",
                    "extras": true
                }
            }
        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:17:10.790

只需将您的 JSON 数据转换为对象

```
NSData *jsonData = //response data

NSDictionary *object = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil]; 
```

然后不涉及解析，您只需处理字典。（或数组等...）

要获得您想要的列表，您可以执行以下操作...

```
NSArray *requiredValues = [object allKeys]; 
```

# java - 需要在Java中将经纬度转换为具有特定区域的UTM

> ID：14622069
> 
> 赞同：0
> 
> 时间：2013-01-31T09:13:21.583
> 
> 标签：java, coordinate-systems, utm

我无法在 Java 中将坐标转换为 UTM33（北半球）。

我发现很多纬度/经度到 UTM 转换器，但是这些确定坐标所在的 UTM 区域并相应地给出答案。这不是我想要的，我基本上是想强制它使用 UTM zone 33。

**我想要的示例：**

坐标 A 和 B 在 UTM 31 中是 E 100m 和 N 100m，但我想根据 UTM 33 知道它们的位置，可能是 E -1000m 和 N -1000m UTM 33。

我真的不在乎我是先获取 UTM 31 坐标然后将它们转换为 UTM 33，还是将纬度/经度坐标直接转换为 UTM 33，但我似乎找不到可以执行任何这些的库.

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:25:20.377

我所做的是使用这个[转换器](http://www.ibm.com/developerworks/java/library/j-coordconvert/#download)，然后稍微更改了代码。在 LatLon2UTM 类**的 setVariables(double latitude, double longitude)**方法中，我将区域变量**var1**更改为 33，并删除了计算实际 UTM 区域的计算。

原来的：

```
var1 = ((int) (longitude / 6)) + 31; 
```

新的：

```
var1 = 33; 
```

没什么大不了的，但至少现在我可以转换到我想要的区域！

# extjs - 如何在选项卡中查看另一个网站

> ID：14622071
> 
> 赞同：1
> 
> 时间：2013-01-31T09:13:26.977
> 
> 标签：extjs, extjs4

```
var tabs = Ext.widget('tabpanel', {
        renderTo: 'tabs',
        resizeTabs: true,
        enableTabScroll: true,
        width: 600,
        height: 250,
        defaults: {
            autoScroll: true,
            bodyPadding: 10
        },
        items: [{
            title: 'Tab 1003',
            iconCls: 'tabs',
            href:'http://www.yahoo.com',
            //hrefTarget:'_self',
            //html: 'Tab Body<br/><br/>' + Ext.example.bogusMarkup,
            closable: true
        }],

        ..... 
```

我已经在里面的项目中添加了一个代码href：' [http](http://www.yahoo.com) ://www.yahoo.com '，但仍然无法工作，如何在标签面板中打开www.yahoo.com页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:34:35.067

您可以使用 html 属性中的 iframe 将新面板添加到选项卡面板。

# regex - 正则表达式 - 仅接受 1 到 100 之间的数字（不应接受其他任何数字）

> ID：14622077
> 
> 赞同：1
> 
> 时间：2013-01-31T09:14:07.710
> 
> 标签：regex

我有接受 1 到 100 之间数字的正则表达式。但它接受特殊字符 '%'

这是我正在使用的正则表达式

```
^(0*100{1,1}\\.?((?<=\\.)0*)?%?$)|(^0*\\d{0,2}\\.?((?<=\\.)\\d*)?%?)$' 
```

我不想接受 % 谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T09:58:33.470

[Ali Shah Ahmed](https://stackoverflow.com/users/1559072/ali-shah-ahmed)建议的正则表达式不适用于 1 位数字，这个可以：

```
(100)|(0*\d{1,2}) 
```

编辑：如果你不想接受值 0 你可以使用这个正则表达式：

```
(100)|[1-9]\d? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:16:23.430

删除所有`%?`. 这表明正则表达式应该匹配零个或一个`%`字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:24:27.470

我会采取多步骤的方法。不会尝试仅使用正则表达式来解决此问题。维护是一场噩梦。

我的解决方案：-

使用简单的正则表达式来确定该值是否为三位或更少位数的整数。

```
/^\d{1,3}$/ 
```

如果有效，则转换为一个数字。

检查数字是否为`<= 100`和`>= 0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T09:25:59.930

我相信这个正则表达式也可以工作，并且比你提到的更简单。

```
(100)|(0*\d{1,2}) 
```

这也将处理前导零。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-06T05:18:53.023

这仅匹配 1 到 100（含）：
`/\b((100)|[1-9]\d?)\b/`

`\b`匹配单词边界。这意味着类似 JavaScript: 的东西
`/((100)|[1-9]\d?)/.test("I have 1000 dollars");`
会返回`true`. 相反，使用边界一词将返回`false`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:19:30.673

这允许从 1 到 100 的数字：

```
100|[1-9]?\d 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-26T02:26:35.540

**^(100|[1-9][0-9]?)$** 这个正则表达式匹配 1 到 100，100 正好匹配 100 或 [1-9] 匹配 1 到 9 [0-9] 范围内的字符匹配 0 到 9 范围内的字符？匹配前一个标记的 0 和 1

并供您参考在此处验证正则表达式组合[https://regexr.com/](https://regexr.com/)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-03-18T17:45:46.660

如果您的匹配项包含小数点且没有前导零，我认为这是最佳选择

```
^(?:[0-9]|[1-9][0-9](\.\d{1,2})?|100|10.00)$
22   # returns True
100   # returns True
22.35  # returns True
20.23  # returns True
100.1  # returns false out bound/range
02     # returns False leading zero
69.235  # returns False exceeds 2 decimal places
001     # returns False has 2 leading zeroes 
```

它将小数位数限制为两位小数检查测试组合**[https://regex101.com/r/Tpe9Ia/10](https://regex101.com/r/Tpe9Ia/10) [1](https://regex101.com/r/Tpe9Ia/10)**

# javascript - 从对象参数获取 jquery 选择器

> ID：14622080
> 
> 赞同：0
> 
> 时间：2013-01-31T09:14:20.593
> 
> 标签：javascript, jquery, object

```
box_tpv1 = {
    box:$("#box_tpv1"),
    open:function(mensaje,f_ok,f_x){
        this.box.show()
    }
} 
```

当我调用这个**box_tpv1.open()**时，它不起作用，但如果我在 open 函数 $("#box_tpv1").show() 中编写它，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:28:53.677

在您的情况下，`box_tpv1`是一个单例对象，无法使用`new`. 这意味着 的价值`this`是微不足道的。

您不妨简单地在函数`box_tpv1.box.show()`内部`open`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:16:58.690

调用此函数的上下文可能存在问题，这取决于您从哪里调用此函数，尝试像这样调用

```
box_tpv1.open.call(box_tpv1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:52:00.080

我不知道为什么，但我以这种方式解决了它，我可以使用 this.box 获取对象方法中的值，但不能使用 jquery 选择器，如果我这样做它可以工作

```
box_tpv1 = {
    box:"#box_tpv1",
    open:function(mensaje,f_ok,f_x){
        $(this.box).show()
    }
} 
```

# qml - 在 ImageView BlackBerry 上设置图像源

> ID：14622082
> 
> 赞同：0
> 
> 时间：2013-01-31T09:14:22.020
> 
> 标签：qml, blackberry-10

如何设置`imageSource`为`ImageView`url？

```
 ImageView {
               imageSource: "http://myrrix.com/wp-content/uploads/2012/06/stackoverflow.png"
             } 
```

这不起作用，我只能`enter code here`在 ImageView 上将图像设置为“资产：///images/myimage.png”。如何将源设置为来自 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:23:32.967

您不能直接从网络加载图像。您需要使用 QNetworkRequest、QNetworkAccessManager 和 QNetworkReply 类发出网络请求，并在 ImageView 中获取 QByteArray 的回复负载。

```
QNetworkAccessManager* netManager = new QNetworkAccessManager();
if (netManager) {
    QUrl url(ImageUrl);
    QNetworkRequest networkRequest(url);
    QNetworkReply* networkReply = netManager->get(networkRequest);
    connect(networkReply, SIGNAL(finished()), this, SLOT(onReply()));
} 
```

& 在 onReply() 插槽中，您可以加载图像：

```
void App::onReply(QNetworkReply* reply) {
    if (reply->error() != QNetworkReply::NoError) {
        qDebug() << "Image not available or any error";
        return;
    }
    Image image = Image(reply->readAll());
    imageView->setImage(image);
} 
```

# c - c 初学者 矢量图

> ID：14622084
> 
> 赞同：1
> 
> 时间：2013-01-31T09:14:31.230
> 
> 标签：c, vector

我是交流初学者，我有一个问题（像往常一样）。我写了这个简单的程序：

```
 #include <stdio.h>
 #define SIZE 10

 main()
 {
    int vettore[9];
    int contatore1,contatore2;

    for(contatore1 = 0; contatore1 <= 9; ++contatore1)
    {
        vettore[contatore1] = contatore1*2;
    }

    printf("%d\n\n", vettore[9]);

    for(contatore2 = 0; contatore2 < 10; ++contatore2)
    {
        printf("%d\n", vettore[contatore2]);
    }

    printf("\n%d\n", vettore[9]);

    return 0;
} 
```

这个程序的输出是：

```
18

0
2
4
6
8
10
12
14
16
9

10 
```

为什么 vettore[9] 的值变化了 3 次？为什么它只在输出的第一行有正确的值？谢谢你 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:16:27.130

C 数组从零开始，因此 9 元素数组的有效索引为 [0..8]。您正在写超出数组的末尾。这有未定义的结果，但可能会破坏下一个堆栈变量。

更详细地说... `vettore`有 9 个元素，可以使用`vettore[0]`...访问`vettore[8]`。第一个循环的最后一次迭代写入`vettore[9]`. 这会访问超出数组末尾的内存。这会导致未定义的行为（即 C 标准未在此处指定预期结果），但很可能 的地址与`vettore[9]`的地址相同`contatore2`，这意味着写入后一个变量。

您在下一个循环中遇到了类似的问题，它打印的元素多于`vettore`包含的元素。

您可以通过将循环更改为来解决此问题

```
for(contatore1 = 0; contatore1 < 9; ++contatore1)
for(contatore2 = 0; contatore2 < 9; ++contatore2) 
```

请注意，如果您改为计算数组的大小，通过`sizeof(vettore)/sizeof(vettore[0])`在循环的退出测试中使用代替 hard-coding会更安全`9`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:19:22.570

您的数组`vettore`有 9 个元素，但通过引用`vettore[9]`，您实际上是在引用第*10 个*元素（因为元素索引从 0 开始）。所以它是堆栈上的某个随机位置，没有明确定义的值。

解决方案是仅索引到`vettore[8]`，或定义`vettore`为大小为 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-27T21:49:55.440

看一下这个：

```
for(contatore2 = 0; contatore2 < 10; ++contatore2)
{
    printf("%d\n", vettore[contatore2]);
} 
```

您正在显示 vettore 数组的 11 个元素（定义为 9 个整数数组）。我认为错误在于堆栈上的随机分配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:18:17.047

您定义的`vettore`尺寸是`9`

```
int vettore[9]; 
```

在你的循环中，你从`0`until开始，`9`所以你正在使用`10`数组的元素而不是`9`（数组的大小）

你应该用大小定义数组`10`

```
int vettore[10]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-31T19:43:26.977

数组（即“向量”）**从索引 0 *NOT* one**开始；例如，它的内容可能是 5，但它会占用索引位置 0,1,2,3,4....

```
[1][2][3][4][5]   <- Five items
 0  1  2  3  4    <- Their respective locations in the array 
```

可视化字符串中的字符也是如此.....（从技术上讲，内存中的位置包含 ASCII 值——为了好玩，请查看它；））

```
['c']['a']['t']   <- Three items
  0    1    2     <- Their index location in the array 
```

我建议 Kochan 的 C Programming 书；非常适合开始！！！

# three.js - 挤压几何 ThreeJS 上的纹理映射

> ID：14622087
> 
> 赞同：3
> 
> 时间：2013-01-31T09:14:40.157
> 
> 标签：three.js, uv-mapping

我在 ThreeJS 上创建带有拉伸几何的随机形状，现在我想在其上应用纹理，但结果很难看。我不知道如何生成 UVMapping 以正确显示纹理。

我摆弄了我的问题：http: [//jsfiddle.net/PsBtn/8/](http://jsfiddle.net/PsBtn/8/)

在左边的网格上，一个面的纹理不正确，因为面是平的，我希望纹理不歪斜。

在右边，纹理被旋转但我不想要这个结果。

是否有一种自动生成 UVMapping 的方法，以便在这两个网格（挤出几何）上获得相同的纹理渲染？

这是我生成网格的方式：

```
var points = []

points.push(new THREE.Vector2(-1000, -700));
points.push(new THREE.Vector2(-1000, -300));
points.push(new THREE.Vector2(-300, -300));
points.push(new THREE.Vector2(-300, -500));

shape = new THREE.Shape(points);
var geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings),
    texture = new THREE.Texture(canvas);
texture.needsUpdate = true;

var material = new THREE.MeshBasicMaterial({
    color: 0xFF00FF,
    map: texture
});

geometry.faceUvs = [[]];
geometry.faceVertexUvs = [[]];

for (var f = 0; f < geometry.faces.length; f++) {

    var faceuv = [
        new THREE.Vector2(0, 1),
        new THREE.Vector2(1, 1),
        new THREE.Vector2(1, 0),
        new THREE.Vector2(0, 0)
    ];

    geometry.faceUvs[0].push(new THREE.Vector2(0, 1));
    geometry.faceVertexUvs[0].push(faceuv);
}

mesh = THREE.SceneUtils.createMultiMaterialObject(geometry, [material, new     THREE.MeshBasicMaterial({
    color: 0x000000,
    wireframe: true,
    transparent: true
})]);
mesh.position.z = -100;
mesh.position.y = 200;
scene.add(mesh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:51:58.943

我找到了一个解决方案，我必须从我的自定义表单中计算出 uv。这个网页对它非常有用：

[http://paulyg.f2s.com/uv.htm](http://paulyg.f2s.com/uv.htm)

# html - 单选按钮背景仅使用 CSS？

> ID：14622097
> 
> 赞同：2
> 
> 时间：2013-01-31T09:14:54.573
> 
> 标签：html, css, radio-button

我需要做的是用图像替换单选按钮的外观。这可以通过 jQuery 轻松实现，但在这种情况下，我只需要使用 CSS 即可。有没有办法做到这一点？这是我的 HTML：

```
<div class="radio-buttons">
    <div class="holder">
        <span></span>
        <input type="radio" class="radio" id="cheetah" value="" />
    </div>
    <div class="holder">
        <span></span>
        <input type="radio" class="radio" id="horse" value="" />
    </div>
    <div class="holder">
        <span></span>
        <input type="radio" class="radio" id="lion" value="" />
    </div>
</div> 
```

我尝试`background-image:`在单选按钮上应用样式，但它当然没有用。然后我添加了`<span>`'s，我想知道我是否可以为按钮设置样式`display: none`，并以某种方式`input:checked`显示将使用`<span>`哪个样式`background-image:`？这是正确的方式还是我的方向完全错误？完全可以只用 CSS 来实现吗？

编辑：如果需要，单选按钮可能会更改为复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:32:21.320

正如多米尼克所说，这几乎是实现这一目标的方法。可能是他的代码是针对特定情况的，我发现了一些类似但比这简单得多的东西。我必须制作照片列表，单击照片时，它必须显示单击的照片，但更大并且在列表之后的部分中。这就是为什么它对我不起作用。但我将首先解释一切，然后我将粘贴我的代码。

仅当`label`位于**旁边时，**多米尼克代码才有效`radio-button`。它对我不起作用，因为我`<label>`的 . 与`radio-buttons`. 标签在.之后`<ul>`，单选按钮在. 这样它就不起作用了，这就是为什么我需要在每个. 现在我有 1 个单选按钮的两个标签。所以这是我的整个代码。我已经为 ul 标签内联设置样式，只是为了节省 css 中的一些空间。我用 bg-color 制作的，所以如果有人想尝试......它也适用于 bg-image`<div>``<ul>``<label>``radio-button`

HTML：

```
<div class="shell">
    <form>
        <ul>
            <li><label class="label" for="cheetah" style="background-color: white"></label></li>
            <li><label class="label" for="horse" style="background-color: yellow"></label></li>
            <li><label class="label" for="lion" style="background-color: green"></label></li>
            <li><label class="label" for="squirrel" style="background-color: red"></label></li>
            <li><label class="label" for="tiger" style="background-color: purple"></label></li>
            <li><label class="label" for="bear" style="background-color: black"></label></li>
        </ul>

        <div class="radio-buttons">
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="cheetah" value="" />
                <label class="label" for="cheetah" ></label>
            </div>
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="horse" value="" />
                <label class="label" for="horse" ></label>
            </div>
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="lion" value="" />
                <label class="label" for="lion" ></label>
            </div>
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="squirrel" value="" />
                <label class="label" for="squirrel"></label>
            </div>
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="tiger" value="" />
                <label class="label" for="tiger"></label>
            </div>
            <div class="wrapper">
                <input type="radio" name="radio" class="radio" id="bear" value="" />
                <label class="label" for="bear" ></label>
            </div>
        </div>
    </form>
</div> 
```

CSS：

```
*{ margin: 0; padding: 0; }

.shell { width: 1000px; margin: 0 auto; }

ul { height: 150px; list-style: none; padding-bottom: 50px;  }

ul li {
    float: left; 
    border: 1px solid #666;
    margin-right: 14px; 
} 
ul li label {
    display: block; 
    width: 150px;
    height: 150px;
    cursor: pointer;
}

ul label {
    display: inline;
}

input[type="radio"] {
    display: none;
}

input[type="radio"]:checked + label.label {
    border: 1px  solid red;
    background-repeat: no-repeat;
    display: inline-block;
    height: 500px;
    width: 500px;
}
input[type="radio"]:checked + label[for="cheetah"] {
    background-color: white
}
input[type="radio"]:checked + label[for="horse"] {
    background-color: yellow
}
input[type="radio"]:checked + label[for="lion"] {
    background-color: green
}
input[type="radio"]:checked + label[for="squirrel"] {
    background-color: blue
}
input[type="radio"]:checked + label[for="tiger"] {
    background-color: purple
}
input[type="radio"]:checked + label[for="bear"] {
    background-color: black
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:35:07.607

正如我在评论中提供的链接中所述，您可以使用以下 html：

```
<input type="radio" id="radio-2-1" name="radio-2-set" class="regular-radio big-radio" /><label for="radio-2-1"></label><br />
<input type="radio" id="radio-2-2" name="radio-2-set" class="regular-radio big-radio" /><label for="radio-2-2"></label><br /> 
```

与类似的css一起：

```
.regular-radio {
display: none;
}

.regular-radio + label {
-webkit-appearance: none;
background-image: url("unchecked.png");
padding: 9px;
border-radius: 50px;
display: inline-block;
position: relative;
}

.regular-radio:checked + label:after {
content: ' ';
width: 12px;
height: 12px;
border-radius: 50px;
position: absolute;
top: 3px;
background-image: url("checked.png");
box-shadow: inset 0px 0px 10px rgba(0,0,0,0.3);
text-shadow: 0px;
left: 3px;
font-size: 32px;
}

.regular-radio:checked + label {
background-image: url("checked.png");
border: 1px solid #adb8c0;
box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05), inset 15px 10px -12px rgba(255,255,255,0.1), inset 0px 0px 10px rgba(0,0,0,0.1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T12:12:23.857

块级 HTML 元素有一些限制：

```
They must be separated from surrounding text by blank lines.
The begin and end tags of the outermost block element must not be indented.
Markdown can't be used within HTML blocks. 
```

# iphone - 在我的应用程序中详细使用苹果推送通知？

> ID：14622099
> 
> 赞同：-5
> 
> 时间：2013-01-31T09:15:05.023
> 
> 标签：iphone, ios, objective-c, apple-push-notifications

如何在我的应用程序中使用 APN？

我需要使用 APN 制作我的应用程序。我需要所有需要的步骤，比如是否有另一个向苹果注册证书以及如何向使用从商店下载的我的应用程序的所有设备发出推送通知。

我应该如何实现发送消息的服务器端？

我已经在我的应用程序中实现了这个：

```
[[UIApplication sharedApplication] 
 registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert | 
                                    UIRemoteNotificationTypeBadge | 
                                    UIRemoteNotificationTypeSound]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:01:23.913

按照这个链接。当然它会帮助你。

[http://42spikes.com/post/Sending-Apple-Push-Notifications-from-aC-Application.aspx](http://42spikes.com/post/Sending-Apple-Push-Notifications-from-a-C-Application.aspx)或 [http://www.dotnetdrops.com/?p=308](http://www.dotnetdrops.com/?p=308)

# c# - wcfsvchost 进程退出后仍在运行

> ID：14622104
> 
> 赞同：0
> 
> 时间：2013-01-31T09:15:14.623
> 
> 标签：c#, .net, wcf

我有一个客户端应用程序，它与服务器交互，这是一个 WCF 服务。我有一个问题：我使用这样的命令通过命令行启动我的服务：

`start WcfSvcHost.exe /service:SodisWebServer.dll /config:SodisWebServer.dll.config`

在托盘中，我有一个 WCFSvcHost.exe 的图标。当我按下它上的退出按钮时，我希望我的服务器关闭，但是当我尝试重新启动它时，我捕捉到一个，`AddressAlreadyInUseException`因为服务 ip+port 上有一个侦听器，并且在我按下 WCFSvcHost.exe 上的退出后，进程仍然跑步。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:39:46.833

如果进程没有关闭，它可能正在等待通道关闭，因为抛出异常等。

另一个典型原因是，如果您通过“服务库”项目类型创建 WCF 服务，Visual Studio IDE 将使用内部 WCFSVCHost 工具来测试服务库。如果 VS 正在运行，那么即使您关闭了手动启动的 WCFSVCHost 的另一个实例（但在第一次尝试运行主机后您会收到它），它也可能正在运行。

以防万一我建议您取消选中项目属性中标记为“*在同一解决方案中调试另一个项目时启动 WCF 服务主机*”的框，或者尝试构建一个控制台应用程序来托管 WCF 服务以进行测试（自托管 WCF 服务）。

# php - Wordpress“子页面”/“部分”？

> ID：14622105
> 
> 赞同：1
> 
> 时间：2013-01-31T09:15:15.333
> 
> 标签：php, wordpress

我以前根本没有使用过 wordpress，我正在尝试重新设计现有的 wordpress 网站。一切顺利，但在 page.php 中我希望有一个与此类似的布局：

```
title
-------
A paragraph of text that varies depending on the category of the page
-------
The article 
```

该段落将根据类别 ID 有所不同。在wordpress中有没有这样做的股票方式？我打算只制作一个抓取该部分的 API，但如果已经有办法做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:29:23.410

在类别设置页面中，有一个字段可让您为每个类别提供描述。此表单字段非常适合您的段落。可以通过[category_description()](http://codex.wordpress.org/Function_Reference/category_description)检索内容。

# python - Mako 的 py:strip 等价物？

> ID：14622115
> 
> 赞同：1
> 
> 时间：2013-01-31T09:15:38.500
> 
> 标签：python, pyramid, template-engine, mako, genshi

我正在将一堆 Genshi 模板转换为 Mako。

我经常在 Genshi 中使用它：

```
<span class="special" py:strip="challenge">Company</span> 
```

这在 Genshi 中所做的就是去掉类标签，当挑战为真时只留下裸词公司。

在 Mako 中执行此操作的最佳方法是什么？

我想出了

```
   % 如果不是挑战：
       <span class="特殊">
   ％ 万一   
   公司
   % 如果不是挑战：
       </span>
   ％ 万一

```

但是两个控制结构似乎是一对多的。

或这个

```
% 如果不是挑战：
  <span class="special">公司</span>
％ 别的：
  公司
％ 万一

```

这只是一种控制结构，但我将公司一词重复了两次。这在这里还不错，但是当我在跨度中拥有比“公司”一词大得多的东西时，它会很难看。

Mako 必须有一个优雅的 py:strip 等价物，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:49:19.297

Mako [Def](http://docs.makotemplates.org/en/latest/defs.html#using-defs)可能会对您有所帮助。它允许在整个模板中多次定义“功能”之王并应用于内容。

使用 Def 最有用的方法可能是[嵌入内容的 Def](http://docs.makotemplates.org/en/latest/defs.html#calling-a-def-with-embedded-content-and-or-other-defs)，它允许类似的代码

```
<%self:buildtable>
    I am the table body.
</%self:buildtable> 
```

然后处理 Def 中定义的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T10:51:35.723

Mako 中没有 py:strip 的等价物。因为 Mako 操作的是字节，而不是 html/xml 标签。

Pyramid 除了 Mako 外，还带有 Chameleon（像 Genshi 的 XML/HTML 模板引擎）。在变色龙中它将是：

```
<span class="special" tal:omit-tag="challenge">Company</span> 
```

# javascript - 如何获取 javascript 中键组合的键码？

> ID：14622117
> 
> 赞同：1
> 
> 时间：2013-01-31T09:15:45.287
> 
> 标签：javascript

```
 $(document).keydown(function(event) {

        doSomething(event);
        event.preventDefault();
    }); 
```

使用上面的代码，我可以获得单键的键码。但是，当我使用组合键时，我会收到第一个和第二个键的事件。例如，!(Shift + 1)、$(Shift + 4)。

如何获得组合键的键码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:27:53.893

以下是一些可以帮助您的插件：

1.  [https://github.com/jeresig/jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)
2.  [https://github.com/madrobby/keymaster](https://github.com/madrobby/keymaster)（这个是免费的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:45:22.097

`fn`您可以使用基于按键和正则表达式匹配的处理回调函数触发的函数来扩展 jquerys对象

我写了一个类似的[答案](https://stackoverflow.com/questions/14459905/jquery-keypress-except-something/14460787#14460787)，在它支持单个键的正则表达式匹配之前，我只是对其进行了一些修改以支持多个键。

```
 $.fn.selectedKey = (function () {
      var keys = "";
      var last = "";
      var key = "";
      return function (cb, data) {
          def.call(data, {
              ctrlKey: 2, //0: musn't be pressed, 1: must be pressed, 2: both.
              altKey: 2, // "
              invert: 0, //inverts the filter
              filter: /.*/, // A Regular Expression, or a String with a Regular Expression
              preventDefault: false //Set to true to prevent Default.
          }); //Sets the default Data for the values used,

          function validate(e) {

              var exp = new RegExp(e.data.filter.replace(/\\\\(\d)/g, String.fromCharCode("$1"))); //Creates a new RegExp from a String to e.g. allow "\2" to match the keyCode 2
              var c = !! (e.data.ctrlKey ^ e.ctrlKey ^ 1 > 0); //c == true if the above stated conditions are met e.g Ctrl Key Pressed and `ctrlKey == 1` -> true
              var a = !! (e.data.altKey ^ e.altKey ^ 1 > 0); //e.g Alt Key Pressed and `altKey == 0` -> false
              //console.log(keys,exp,c,a)
              return (exp.test(keys) && (c && a)); //Returns the validation Result
          }

          function def(obj) { //a minimal helper for default values
              for (var prop in obj) {
                  this[prop] = this[prop] || obj[prop];
              }
          }
          this.keypress(data, function (e) {

              key = e.char = String.fromCharCode(e.keyCode || e.which); //Converts the pressed key to a String
              keys += ( !! ~ (keys.indexOf(key))) ? "" : key;
              key = key["to" + (e.shiftKey ? "Upper" : "Lower") + "Case"]();
              keys = keys["to" + (e.shiftKey ? "Upper" : "Lower") + "Case"](); //case handling
              if (e.data.preventDefault) e.preventDefault();

              if ((validate(e) != e.data.invert) && keys != last) {

                  cb(e);
                  last = keys;
                  //Calls the callback function if the conditions are met
              }
          });
          if (!this.data("keyupBound")) {
              this.keyup(data, function (e) {

                  key = e.char = String.fromCharCode(e.keyCode || e.which); //Converts 
                  var t = keys.toLowerCase()
                      .split("");
                  t.splice(t.indexOf(e.char), 1);
                  keys = t.join("");
                  last = keys;
              });
              this.data("keyupBound", true);
          }
      };

  })();

$("body").selectedKey(function (e) {
    console.log("All lower characters, Numbers and 'A': " + e.char);
}, {
    filter: "^[a-z]|[0-9]|A$",
    ctrlKey: 2,
    altKey: 2
});

$("body").selectedKey(function (e) {
    console.log("KeyCode 2 " + e.char); // Ctrl + b
}, {
    filter: "\\2",
    ctrlKey: 1,
    altKey: 2
}); 
```

*例如，您也可以这样做`filter:/.{4,5}/`会触发同时按下的任何 4 到 5 个键*

例如，当按下 A + S + D 时触发

```
$("body").selectedKey(function (e) {
    console.log("ASD has been pressed"); // Ctrl + b
}, {
    filter: "^ASD$",
    ctrlKey: 2,
    altKey: 2
}); 
```

[这是一个关于JSBin](http://jsbin.com/imavop/3/edit)的工作示例

*编辑注释。修复了如果验证评估为真，则在按住键时连续触发*
*Edit2：修复了`last`变量，未正确使用...*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:23:21.250

您需要记住按下了哪个键。你应该监听 keyup + keydown 事件：

```
var keyCodesPressed = {};

$(document).keydown(function(event) {
  keyCodesPressed[event.which] = true;
  // here you should have all keys which are currently pressed:
  for (keyCode in keyCodesPressed) {
    // and you can loop over them and detect which are the ones currently pressed
  } 
});

$(document).keyup(function(event) {
  delete keyCodesPressed[event.which];
}); 
```

# php - 根据下拉选择显示多个文本框

> ID：14622118
> 
> 赞同：0
> 
> 时间：2013-01-31T09:15:50.127
> 
> 标签：php, jquery, drop-down-menu, textbox

我想根据下拉列表框中的选定选项在表单中显示多个文本框。

例如，如果用户选择 1，则应显示 1 个文本框，如果用户选择 2，则应显示 2 个文本框。我需要用 PHP 来做。

我使用 jQuery 找到了一些答案。我们可以在 PHP 中使用 jQuery 吗？如果是，那么如何？

编辑

@Edwin Alex 这就是我的选择选项的样子。

```
<h2><u>DEPENDENT DETAILS</u></h2><br />
            <table  border="1" style="border-style:dotted" width="100%" id="dependenttable">
            <tr><td>No of Dependent</td><td><select name="numDep" id="dropdown">
                <option value="">Please Select</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option></select></td></tr>

            <tr id="textboxDiv"></tr> 
```

在 <> 这些文件的末尾，我已经编写了您的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:27:39.133

您可以使用 Jquery 来获得它。试试这个，

HTML：

```
<tr><td>No of Dependent</td><td><select name="numDep" id="dropdown">
    <option value="">Please Select</option>
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option></select></td>
</tr>

<tr id="textboxDiv"></tr> 
```

查询：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#dropdown").change(function() {
        var selVal = $(this).val();
        $("#textboxDiv").html('');
        if(selVal > 0) {
            for(var i = 1; i<= selVal; i++) {
                $("#textboxDiv").append('<input type="text" name="textVal[]" value="" />');
            }
        }
    });
});
</script> 
```

Paste this code at the bottom of your page inside tag.

Your select box ID should be `dropdown`.

You need to have a div with an ID `textboxDiv` to place your generated textboxes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:25:05.897

我认为你可以在 JavaScript 的帮助下轻松做到这一点。这是一个例子。试试看，根据你的要求修改

```
<html>
<head>
<title>Select DIV to show</title>
<script type="text/javascript">
function show(obj) {
no = obj.options[obj.selectedIndex].value;
count = obj.options.length;
for(i=1;i<count;i++)
document.getElementById('myDiv'+i).style.display = 'none';
if(no>0)
document.getElementById('myDiv'+no).style.display = 'block';
}
</script>
</head>
<body>
<form name="myForm">
<select onChange="show(this)">
<option value="0">Select</option>
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>
</select>
</form>
<div id="myDiv1" style="display:none"> <form>
<select>
<option value="0">Select</option>
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>
</select>
</form></div>
<div id="myDiv2" style="display:none"><form><input type="text" ><br>
<input type="text"/><br>
<input type="submit"/></form></div>
<div id="myDiv3" style="display:none"><form><input type="text" ><br>
<input type="text"/><br>
<input type="submit"/></form></div>
</body>
</html> 
```

在此示例中，只需更改“myDiv1”、“myDiv2”、“myDiv3”中的代码。我想它会帮助你的。:)

# c - 与 while 语句相关的 GCC 编译错误

> ID：14622120
> 
> 赞同：0
> 
> 时间：2013-01-31T09:15:53.153
> 
> 标签：c, gcc

尝试使用 GCC 编译这个简短的 C 程序时，我收到以下错误：

```
expected ‘)’ before numeric constant
make: *** [file3_5.o] Error 1
stray ‘\210’ in program
stray ‘\227’ in program
stray ‘\342’ in program 
```

Eclipse (Juno) 将所有这些错误都指向一行代码：

```
while(fgets(line ,STRSIZE∗NFIELDS, fp)) 
```

使用以下语句进行编译：

```
gcc -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"file3_5.d" -MT"file3_5.d" -o "file3_5.o" "../file3_5.c" 
```

这是我要编译的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define STRSIZE 100
#define NFIELDS 9
int main()
{
    char inputfile[]= "/home/ty/workspace/OpenCoursware_Exercises/Assign_   /stateoutflow0708.txt";
  /* define all of the fields */
  char state_code_org[STRSIZE];
  char country_code_org[STRSIZE];
  char state_code_dest[STRSIZE];
  char country_code_dest[STRSIZE];
  char state_abbrv[STRSIZE];
  char state_name[STRSIZE];
  char line[STRSIZE*NFIELDS];
  int return_num = 0;
  int exmpt_num=0;
  int aggr_agi= 0;
  long total=0;

  /* file related */
  int fields_read = 0;
  FILE* fp=fopen(inputfile,"r");
  if(fp==NULL)
  {
    fprintf(stderr, "Cannot open file\n");
    exit(-1);
  }
  /* skip first line */
  fgets(line, STRSIZE*NFIELDS,fp);
  /* print the header */
  printf ("%-30s,%6s\n","STATE","TOTAL");
  printf("---------------------------------------\n");
  while(fgets(line ,STRSIZE∗NFIELDS, fp))
  {
      /* parse the fields */
      fields_read=sscanf(line,"%s %s %s %s %s %s %d %d %d",
              state_code_org,
              country_code_org,
              state_code_dest,
              country_code_dest,
              state_abbrv,
              state_name,
              &return_num,
              &exmpt_num,
              &aggr_agi);
      if(strcmp(state_code_org, "\"25\"")==0)
      {
          printf("%-30s, %6d\n", state_name, aggr_agi);
          total += aggr_agi;
      }
  }
  /* print the header */
  printf(" ----------------------------------------\n");
  printf("%-30s,%6lu\n","TOTAL",total);
  fclose(fp);
  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:20:48.103

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:21:57.613

```
while(fgets(line ,STRSIZE∗NFIELDS, fp))
                         ^
                         ^ 
```

Should be

```
while(fgets(line ,STRSIZE*NFIELDS, fp))
                         ^
                         ^ 
```

(Whether you see a difference between the two depends on the font used to display the characters).

The ∗ in the first one is not the character used for the multiplication operator, it is [this character here](http://www.fileformat.info/info/unicode/char/2217/index.htm).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:23:24.650

Your "*" character in STRSIZE*NFIELDS is not the regular * (ascii value 42) but an unicode character "ASTERISK OPERATOR" : [http://www.fileformat.info/info/unicode/char/2217/index.htm](http://www.fileformat.info/info/unicode/char/2217/index.htm)

That's what the compiler is trying to tell you by complaining about stray characters in the source.

# javascript - jQuery 对话框 - 在对话框之间共享值

> ID：14622121
> 
> 赞同：1
> 
> 时间：2013-01-31T09:15:54.257
> 
> 标签：javascript, jquery, dialog

我的英语很差，所以我写得很轻松。我正在使用 Jquery Dialog，我想显示多个对话框。（对话框 1 打开对话框 2 打开对话框 3...）

但问题是，当我打开 dialog1 然后打开 dialog2（确认对话框，以便用户可以在 dialog2 中选择是/否并将值返回给 dialog1）时，我不知道如何返回该值，直到用户单击是或否纽扣。

我知道 Javascript 是异步的，所以当用户打开对话框 1 并单击打开对话框 2 时，它不会等待对话框 2 中的事件完成。

这是我的源代码（简单逻辑）jsfiddle.net/juRm9/2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:33:23.690

所有对话都不过是`div`.so 在要获取数据的 div 中存储一些带有 id 的隐藏变量。

并绑定第二个对话的 onclick 事件（根据您的要求 onclick 是或否）以将值分配给第一个 div 的隐藏元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:20:57.600

您可以在页面中使用隐藏字段中的存储值。然后随时使用它。

# html - onChange 中提交的所有命令都不起作用

> ID：14622124
> 
> 赞同：0
> 
> 时间：2013-01-31T09:15:59.647
> 
> 标签：html

我想使用`onChange()`in`select`但所有这些命令都不适合我：

**HTML**

```
<form method="post" name='testBank' id="testBank" enctype="multipart/form-data">
<select name="major_id" id='major_id' onchange="this.submit();">
        <option value="">---</option>
        <?
        $query = mysql_query("select * from at_majors where view='1'");
        while($row=mysql_fetch_assoc($query)){
            ?><option value="<? echo $row['major_id']?>" > TEST </option><?
            }
        ?>
    </select>
    </form> 
```

**命令**

```
onchange="this.submit()"
onchange="testBank.submit();"
onchange="this.testBank.submit()"
onchange="submit()"
onchange="document.all.submit()"
onchange="document.testBank.submit();" 
```

我收到此错误：

```
this.submit is not a function 
```

**重要的**

我不喜欢在这种方法中使用 jquery 或 javascript。请帮我修复这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:23:19.603

那是因为您正在尝试提交`select`标签，而不是表单。

```
<form method="post" name='testBank' id="testBank" enctype="multipart/form-data">
<select name="major_id" id='major_id' onchange="document.getElementById('testBank').submit();"> 
```

这应该有效。

### 编辑

这也应该有效：

```
<select name="major_id" id='major_id' onchange="this.form.submit();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:31:20.577

所以这是你的表格（为了演示的目的做了一点简化）：

```
<form name='testBank'>
<select name="major_id" onchange="submitTestBank();">
        <option value="">---</option>
        <option value="a">a</option>
        <option value="b">b</option>
</select>
</form> 
```

然后是最简单的 JavaScript（通过它的名称引用表单）：

```
function submitTestBank() {
    document.forms.testBank.submit();
} 
```

当然，您可以直接添加`document.forms.testBank.submit();`到`onchange`属性中。不过，拥有一个单独的功能`submitTestBank`更可重用。如果您想将提交处理程序附加到多个`select`或`input`元素，它会有所帮助。

**[在行动中看到它。](http://jsbin.com/eracut/1/edit)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:24:44.727

尝试这个

```
<select name="major_id" id='major_id' onchange=this.form.submit();"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T15:53:43.990

如果提交输入元素的名称为“提交”，则表单将不会提交。所以请删除提交。

避免这种情况

```
<input type="submit" name="submit" value="submit"> 
```

用这个

```
<input type="submit" name="xxx" value="xxx"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:24:09.980

你不喜欢使用 jQuery，那么试试这个：

```
<select name="major_id" id='major_id' onchange="doSomething(this)"> 
```

让 sur 在 select 元素之前定义您的 javascript：

```
function doSomething(sel) {
    alert(sel.options[sel.selectedIndex].value);
} 
```

# jquery - jquery 悬停选择器 - 另一种方式

> ID：14622128
> 
> 赞同：0
> 
> 时间：2013-01-31T09:16:07.720
> 
> 标签：jquery, hover, selector, lavalamp

我有一组这样的菜单：

```
<ul class="lavalamp">
    <li>Menu 1</li>
    <li>Menu 2</li>
    <li>
        Menu 3
        <ul>
            <li>Sub Menu 1</li>
            <li>Sub Menu 2</li>
            <li>Sub Menu 3</li>
        </ul>
    </li>
    <li>Menu 4</li>
</ul> 
```

我为此添加了lavalamp效果。当我将鼠标悬停在任何菜单上时，lavalamp 背景会移动到悬停的菜单上，如果菜单未悬停，它将移回当前菜单。

问题是，当我将鼠标悬停在子菜单中时，它被认为没有悬停在菜单上，因此 lavalamp 背景移回当前菜单项。为了防止这种情况，我在 jquery.lavalamp.js 中添加了一个悬停选择器，如下所示：

```
$li.not(".back").hover(function() {
    if (!$('.sub-menu').is(":hover")) {
    move(this);
    }
}, function(){});

function move(el) {
    $back.each(function() {
        $(this).dequeue(); }
    ).animate({
        width: el.offsetWidth,
        left: el.offsetLeft
    }, o.speed, o.fx);
}; 
```

而 move(this) 是将 lavalamp 背景移动到悬停菜单的功能。它适用于除 IE 之外的所有浏览器。lavalamp 背景不会移动，并且有一个名为“不支持的伪：悬停”的 javascript 错误。我在 jquery 站点中进行了搜索，但它没有名为 :hover 的选择器。

有没有其他方法可以替换上面的 :hover 选择器？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:45:31.093

众所周知，通过脚本静态推断as`:hover`非常困难（并且较旧的 IE 不支持除`<a>`s 以外的任何东西上的伪类），最好使用 jQuery`hover()`方法来强制一个*真正的*类并改用它：

```
$li.hover(function(){
  $(this).toggleClass('hover');
}); 
```

然后你替换你的第二行，

```
if (!$('.sub-menu').is(":hover")) { 
```

...有了这个：

```
if(!$(this).closest('.hover').length){ 
```

...而是测试以查看使用`hover`该类查找祖先的 jQuery 对象是否返回任何元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:29:49.390

使用此代码，我可以帮助您：

```
var previousClass = '';
var arr= $("li");
$.map(arr, function(li){
 li.mouseout(function (li) {
                    eventMouseOut(li);
                });
 li.mouseover(function (li) {
                    eventMouseOver(li);
               });
});
 function eventMouseOver(_this) {
            previousClass = $(_this).attr("class");
            $(_this).removeClass().addClass("Hover");
        }
 function eventMouseOut(_this) {

            var count = 1;
           var arr= $("li");
            $.map(arr, function (li) {
                $(li).removeClass().addClass("Normal");
                count++;
            });
        } 
```

# wpf - 我的设计如何实现 MVVM？

> ID：14622129
> 
> 赞同：1
> 
> 时间：2013-01-31T09:16:08.047
> 
> 标签：wpf, mvvm

我在尝试了解如何在我的应用程序中实现 MVVM 模式时遇到问题。这是一个小型应用程序，我将解释它的作用。

我的应用程序创建文件备份。UI 允许用户选择他们想要备份的文件夹以及应该备份的位置。做出选择后，他们单击“开始”按钮。

然后，这会将文件夹源和文件夹目标传递给类库（称为 backup.cs），该类库会创建每个文件夹内所有文件的备份。在此期间，会创建一个日志 (Log.cs)，记录每个阶段以及它尝试备份的每个文件的状态（完成、失败、其他等）。现在，日志仅在内存中。

备份完成后，我希望打开一个窗口（视图），其中将显示所有日志。在这一点上，我无法理解如何使用 MVVM 模式。

就目前而言，我将我的日志（以分层方式保存数据）传递给我的 MainWindow 的构造函数并绑定到数据上下文，使用我的 xaml 中的树视图，我得到了所需的结果。但是，我现在想使用 MVVM。

[我的问题与我之前的问题](https://stackoverflow.com/questions/14610670/how-to-use-mvvm-when-the-model-is-created-by-view-constructor)非常相似，您可以看到答案是将日志作为参数传递给 ViewModel 构造函数。问题是，我不知道该怎么做，还显示一个窗口！

我可以实现这一点的唯一方法（在我的脑海中）是将日志作为参数传递给我的视图的构造函数，但这违背了 MVVM 的观点。我可以将参数传递给我的 ViewModel 的构造函数（这将符合 MVVM 模式），但这是否意味着我还必须从我的 ViewModel 构造函数创建我的视图实例？否则我要做的就是创建我的 ViewModel 但由于没有显示视图，因此无法显示结果。

我希望我已经清楚地解释了我在哪里挣扎，有人可以提出前进的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:25:54.673

您很可能希望视图模型接受（并通过属性公开）一个集合，例如 a `List<Log>`- 通常这将是 a `ObservableCollection<Log>`，但如果操作已经完成，那么这样做没有任何意义。这就是您所描述的可能的解决方案。

要将视图模型连接到视图，本质上您需要这样做：

```
var viewModel = new LogsViewModel(...);
var view = new LogsView(); // no constructor parameters

view.DataContext = viewModel; 
```

最后，您`view`在应用程序窗口的逻辑树的某个位置添加以使其显示。MVVM 框架自动执行此过程，但您也可以像这样简单地手动完成。

然后，您的视图将绑定到日志集合以显示每个日志，可能使用`DataTemplate`：

```
<ItemsControl ItemsSource="{Binding Logs}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <!-- XAML to display each Log does here -->
      <TextBlock Text="{Binding FileName}" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:29:36.790

例如，如果您希望基于主视图中的按钮单击显示 LogView。

```
public override void ShowCommandExecute()
{
    var popup = new LogsView                            
    {
       WindowStartupLocation = WindowStartupLocation.CenterScreen,
       DataContext = new LogsViewViewModel();
    };
    popup.ShowDialog();
} 
```

# firefox - JsPrintSetup Firefox 插件自定义页面大小

> ID：14622131
> 
> 赞同：2
> 
> 时间：2013-01-31T09:16:23.293
> 
> 标签：firefox, printing

我正在尝试在我的 Web 应用程序中打印账单，用户将从 Web 浏览器打印账单。它不需要与其他浏览器兼容，只要它只在firefox中工作就可以了。我遇到的问题是纸张溢出，打印机，尽管文本和内容的大小都用 A4 或信纸打印了所有内容。我尝试使用 Firefox 的 JsPrintSetup 插件通过更改纸张大小来控制它。该插件工作正常，但我需要使用自定义尺寸的纸张，并且我需要动态更改纸张的高度。但无论我做什么，打印机都会以相同的纸张尺寸打印所有内容，它不会在我定义的自定义纸张上打印。所以，如果有人使用过这个插件，请帮助我。

# core-location - Lat,Long 值不准确到 iphone 中的当前位置

> ID：14622136
> 
> 赞同：0
> 
> 时间：2013-01-31T09:16:40.060
> 
> 标签：core-location, mkmapview

我是 IOS 新手，现在我正在开发位置应用程序，但在 iPhone 上运行我的应用程序时，我没有得到正确的纬度、经度值。它给了我当前位置的纬度、经度值太远，为什么它向我显示这些值任何人都可以告诉我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:22:42.610

试试看....

设置委托 CLLocationManagerDelegate

```
#import <CoreLocation/CoreLocation.h>

CLLocationManager *locationManager;
CLLocation *startLocation;

- (void)viewDidLoad {
    [super viewDidLoad];
    NSString *currentLatitude;
    NSString *currentLongitude;
    locationManager = [[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];
    startLocation = nil;
 }

-(void)locationManager:(CLLocationManager *)manager
   didUpdateToLocation:(CLLocation *)newLocation
          fromLocation:(CLLocation *)oldLocation
{
    currentLatitude = [[NSString alloc] 
                   initWithFormat:@"%g", 
                   newLocation.coordinate.latitude];

    currentLongitude = [[NSString alloc] 
                    initWithFormat:@"%g",
                    newLocation.coordinate.longitude];

   NSLog(@"%@",currentLatitude);
   NSLog(@"%@",currentLongitude);
}

-(void)locationManager:(CLLocationManager *)manager 
  didFailWithError:(NSError *)error
{
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"ERROR" message:[NSString stringWithFormat:@"%@",error] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
} 
```

# ruby-on-rails - 在 Active Record 中为 add_column 和 add_index 添加 unique: true

> ID：14622143
> 
> 赞同：18
> 
> 时间：2013-01-31T09:17:03.850
> 
> 标签：ruby-on-rails, rails-activerecord

尽管我的应用程序不允许用户键入位置，但我想强制数据库中城市的唯一性。由于我的 Rails 应用程序将在 city 列上进行搜索，因此我也想在 city 列上添加一个索引，但想知道在索引上添加 unique: true 是否重要。这是重复的吗？如果这没有意义，如果您能解释原因，我将不胜感激。

```
class CreateLocations < ActiveRecord::Migration
  def change
    create_table :locations do |t|
      t.string :city, unique: true
      t.string :state

      t.timestamps
    end

    add_index :locations, :city, unique: true
  end
end 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-04-26T22:01:21.847

使用 Rails 4，您可以提供： index param 哈希参数

```
class CreateLocations < ActiveRecord::Migration
  def change
    create_table :locations do |t|
      t.string :city, index: {unique: true}
      t.string :state

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-31T10:10:31.700

据我所知`unique`，该块中的选项`create_table`实际上不受支持且不执行任何操作，请参阅[TableDefinition](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)。要创建唯一索引，您需要按照`add_index`现在的方式调用该方法。请注意，唯一索引既用于唯一性，也用于搜索等，无需在同一列上添加两个索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-23T20:10:25.640

您可以在搭建脚手架时指定唯一索引：

```
rails generate model Locations city:string:uniq state:string 
```

这将创建模型、规格、工厂和此迁移：

```
class CreateLocations < ActiveRecord::Migration
  def change
    create_table :locations do |t|
      t.string :city
      t.string :state

      t.timestamps null: false
    end
    add_index :locations, :city, unique: true
  end
end 
```

Rails 知道它在做什么——不需要更多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-18T21:48:34.517

添加：`index: { unique: true }`

例子：

```
class AddUsernameToUsers < ActiveRecord::Migration[6.1]
  def change
    add_column :users, :username, :string, null: false, index: { unique: true }
  end
end 
```

[![在此处输入图像描述](../Images/4a88b2388cc439010f8979adc1160bec.png)](https://i.stack.imgur.com/EYLMH.png)

# c# - 路由的单元测试应该映射到控制器失败，而类似的测试没有

> ID：14622144
> 
> 赞同：0
> 
> 时间：2013-01-31T09:17:03.973
> 
> 标签：c#, unit-testing, asp.net-mvc-4, mvccontrib-testhelper

与可以在此处找到的先前问题相关：

[使用“在解决方案中运行所有测试”时测试失败](https://stackoverflow.com/questions/14605580/tests-failing-when-run-all-test-in-solution-is-used)

**测试方法：**

```
[TestMethod]
public void AMAC_Route_Maps_to_AMACController()
{
    "~/amac/".ShouldMapTo<AMACController>(action => action.Index());

} 
```

**路线：**

```
routes.MapRoute(
            name: "AMAC",
            url: "amac/",
            defaults: new { controller = "AMAC", action = "Index" }
        ); 
```

**返回的错误：**

测试方法 MBS.Exec.Enquiry.MVC.Tests.AMACControllerTest.AMAC_Route_Maps_to_AMACController 抛出异常：MvcContrib.TestHelper.AssertionException：URL 不匹配任何路由

仅当我在解决方案中运行所有测试时，才会抛出此错误，当我独立于其通过的类运行测试时。

作为一个例子，我有一个类似控制器的测试方法，它确实通过了，下面是测试方法的代码及其路由：

**测试方法**

```
 [TestMethod]
    public void HVM_Route_Maps_to_HVMController()
    {
        "~/hvm/".ShouldMapTo<HVMController>(action => action.Index());
    } 
```

**路线：**

```
routes.MapRoute(
            name: "HVM",
            url: "hvm/",
            defaults: new { controller = "HVM", action = "Index" }
        ); 
```

此测试不会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:38:05.293

When I had refactored the tests to add the route registration to an [AssemblyInitialize] method I had forgotten to remove a [TestCleanup] method from one of the unit test classes causing the route to be re-registered.

After removing this all tests passed.

# android - 在 JSONArray Android 中过滤 JSONObject

> ID：14622154
> 
> 赞同：1
> 
> 时间：2013-01-31T09:17:17.310
> 
> 标签：android, json, arraylist, arrays

我如何过滤 JSONObject“名称”包含“abcd”的 JSONArray

```
{
    "items":[{
            "id":"082111",
            "name":"abcd efgh"
        }, {
            "id":"082112",
            "name":"abcd klmn"
        }, {
            "id":"082113",
            "name":"klmn efgh"
        }, {
            "id":"082114",
            "name":"abcd efgh"
        }, {
            "id":"082115",
            "name":"efgh oprs"
        }
    ]
} 
```

结果一定是

```
{
    "items":[{
            "id":"082111",
            "name":"abcd efgh"
        }, {
            "id":"082112",
            "name":"abcd klmn"
        }, {
            "id":"082114",
            "name":"abcd efgh"
        }
    ]
} 
```

我怎么能得到这样的结果？我是否应该将 JSONArray 转换为 ArrayList，并在转换为 ArrayList 时进行过滤，然后再次转换为 JSONArray？如果是，我如何将 JSONArray 转换为 ArrayList 并过滤它？并再次转换为 JSONArray？请给我示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:00:00.553

使用以下代码，您将获得所需的内容，即如您所说的以字母 abcd 开头的内容。

```
 JSONObject json = new JSONObject(jsonString);
            JSONArray jData = json.getJSONArray("items");
            for (int i = 0; i < jData.length(); i++) {
                JSONObject jo = jData.getJSONObject(i);

                if ((jo.getString("name")).startsWith("abcd", 0)) {

                    Log.i("Name is ", jo.getString("name"));

                }

            } 
```

# android - 将最近播放的视频从网站显示到我的 Android 应用程序

> ID：14622159
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:17:28.230
> 
> 标签：android, json, api, video-streaming

我想在我的 Android 应用程序的 LinearLayout 中显示来自视频流网站的最近播放的视频。我知道如何使活动具有线性布局来放置视频，但我不知道如何从该网站获取这些视频。我需要 JSON 解析吗？有没有人有任何关于如何在视频流媒体网站上将最近播放的视频显示到 Android 应用程序的信息（任何指向 API 等有用内容的链接）？我尝试了谷歌，但没有得到有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:39:15.493

如果网站没有 JSON 接口（或任何其他接口）。然后你应该做刮。这包括下载 HTML（例如通过 HttpClient）、解析 HTML 和搜索视频 URL。

# mysql - 使用 MySQL Workbench 连接到实时数据库

> ID：14622161
> 
> 赞同：0
> 
> 时间：2013-01-31T09:17:53.413
> 
> 标签：mysql, database, mysql-workbench

我对 mySQL Workbench 有一个问题。

我想连接到 aaa.com 域的 mysql 数据库。我在这些日期的连接选项中写道：

```
Hostname: www.aaa.com
Port: Which port do i have to write in?
Username: Username of the DB (which is 100% correct)
Password: Password of the DB (which is 100% correct)
Default Schema: Name of the DB (which is 100% correct) 
```

如果我单击连接，则会出现以下错误：

> “拒绝访问”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:34:42.517

您也可以使用 ssh 隧道：

创建一个新连接，选择标准 TCP/IP over SSH。

对于 SSH 主机名，输入您的域 aaa.com（您将通过 SSH 访问的域）。

对于 SSH 用户名，请输入您的 SSH 用户名，因此如果您使用 ssh test_user@aaa.com 您的用户是 test_user。

存储您使用过的 SSH 密码或密钥文件。

Mysql 主机名应该是 127.0.0.1 如果 mysql 服务器在你 SSH 连接的服务器上，否则你的 Mysql 服务器的 IP 或主机名。

Mysql 服务器用户 - 你的 mysql 用户。

以及你的 Mysql 服务器密码。

这样，您的数据库在外部是不可接受的，这意味着没有人可以尝试从您的服务器外部的 3306 端口访问它，但您仍然可以通过 Workbench 访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:20:46.933

请联系您的网络托管公司，确保他们首先允许远程连接。它被一些主机禁用。默认端口为 3306。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:21:30.147

通常，出于安全原因，来自外部域的传入连接将被禁用。如果允许，请联系您的房东。

顺便说一下，**MySQL 的默认端口**是`3306`.

* * *

如果您有权`root`访问 phpMyAdmin，则可以使用本教程查看端口是否打开：[安装 MySQL 并启用远程访问](http://blog.vinhkhoa.com/article/Set-up-a-Railo-Apache-MySQL-host-on-Ubuntu-Part-2-install-MySQL-and-enable-remote-access)。

# json - 如何在像facebook这样的firebug中安全/隐藏json数据

> ID：14622162
> 
> 赞同：0
> 
> 时间：2013-01-31T09:17:54.007
> 
> 标签：json, jquery

每当，我使用 jQuery-ajax 向服务器请求检索显示在 firebug 中的数据，因此这是不安全或可破解的。甚至 facebook 和 google+ 也隐藏了他们的 json 数据，但是如何呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:32:34.487

您可以使用[crypto-js 之](http://code.google.com/p/crypto-js/#Ciphers)类的库来加密发送到服务器和从服务器发送的所有数据。但是，大多数情况下，当您已经使用 https 时，这是一种矫枉过正的做法（因为您应该通过服务器端验证使您的应用程序具有抗黑客性，并且 https 提供的真正加密确保了安全性）。

# c# - 不能在 MongoDb C# 上使用带有嵌套类 List<> 的 Linq

> ID：14622163
> 
> 赞同：3
> 
> 时间：2013-01-31T09:17:54.980
> 
> 标签：c#, linq, mongodb

我有以下课程：

```
public class Company
{
   [BsonId]
   public string dealerId = null;

   public List<Dealer> dealers = new List<Dealer>();
}

public class Dealer
{        
   public string dId = null;          
   public int dIndex = -1;

   public List<AutoStore> stores = new List<AutoStore>();
}

public class AutoStore
{
   public string type = null; 
   public  Dictionary<string, object> data = new Dictionary<string, object>();
} 
```

我可以将`Company`类对象存储在 Mongo 中`Insert()`。问题是当我搜索文档并尝试对`List<>`项目使用 LINQ 时。我经常遇到异常。

```
var query =  collection.AsQueryable<Company>()
                 .Where(cpy =>
                     cpy.dealers.Where(dlr => 
                         dlr.stores.Count == 1).Count() > 0) ; 
```

运行此代码，我得到：

> System.NotSupportedException：无法确定表达式的序列化信息：Enumerable.Count

我今天刚开始使用Mongo，但我认为`LINQ`支持更成熟。谁能告诉我是否可以像使用`C#`and那样进行嵌套数组查询`LINQ`？

只要我删除`Where()`任何一个`List<>`，就不会抛出该异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:33:29.620

根据您的例外情况，问题区域位于您正在做`Where`陈述的地方。

正如我在评论中所说。试着做：

```
var v = collection.AsQueryable<Company>().Where(cpy => cpy.Dealers.Any(dlr => dlr.Stores.Count == 1)); 
```

您目前正在执行以下操作：

```
var dealers = collection.AsQueryable<Company>().Select(cpy => cpy.Dealers);
var dealersWithStores = dealers.Where(dealer => dealer.Stores.Count == 1); 
```

`any`然后，您通过调用 count 并检查是否大于 0 来检查是否有经销商与商店`bool`。所有这些都与调用相同`IEnumerable.Any()`。看看这是否有效？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:41:39.347

您可以更有效地编写查询

```
var query =  collection.AsQueryable<Company>()
                 .Where(c => c.dealers.Any(d => d.stores.Count == 1); 
```

如果 Mongo 查询提供者难以支持`IList`，您可能会发现

```
var query =  collection.AsQueryable<Company>()
                 .Where(c => c.dealers.Any(d => d.stores.Count() == 1); 
```

效果更好。如果是这样，那么有关 MongoDB 查询提供程序成熟度的报告就被夸大了。

# haskell - 如何在 Shake 中编写定点构建规则，例如 Latex

> ID：14622169
> 
> 赞同：17
> 
> 时间：2013-01-31T09:18:47.620
> 
> 标签：haskell, shake-build-system

使用 Shake Haskell 构建库，如何使用需要达到固定点的程序编写规则？想象一下，我有一个程序`foo`，它获取一个文件`input`并生成一个输出文件，它应该`foo`重复应用，直到输出文件不改变。我怎样才能在 Shake 中写出来？

这种模式的典型例子是 LaTeX。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T09:18:47.620

首先，请注意重复调用 Latex 并不总是产生一个固定点，因此请确保您对迭代有限制。此外，一些发行版 (MikTex) 提供了可以根据需要自动运行多次的 Latex 版本，因此如果您使用这些版本，问题就会消失。

**编写自己的`foo_transitive`命令**

假设每次运行都`foo`具有相同的依赖关系，解决问题的最简单方法是在构建系统之外解决问题。只需编写一个`foo_transitive`命令，无论是作为 shell 脚本还是作为 Haskell 函数，当提供输入文件时，通过重复运行并检查它是否已达到固定点来生成输出文件。构建系统现在可以使用`foo_transitive`并且没有关于依赖项的问题。

**在构建系统中对其进行编码**

你需要写两条规则，一条是一步，另一条是确定哪一步是正确的：

```
let step i = "tempfile" <.> show i

"tempfile.*" *> \out -> do
    let i = read $ takeExtension out :: Int
    if i == 0 then
        copyFile "input" out
    else
        let prev = step (i-1)
        need [prev]
        -- perhaps require addition dependencies, depending on prev
        system' "foo" [prev,out]

"output" *> \out -> do
    let f i = do
            old <- readFile' $ step (i-1)
            new <- readFile' $ step i
            if old == new || i > 100 then copyFile (step i) out else f (i+1)
    f 1 
```

第一条规则生成`tempfile.2`自`tempfile.1`等等，所以我们可以`need ["tempfile.100"]`得到第 100 次迭代。如果每个步骤中的依赖关系发生变化，我们可以查看之前的结果来计算新的依赖关系。

第二条规则循环检查序列中的每一对值，并在它们相等时停止。如果您在生产构建系统中实现此功能，您可能希望避免调用`readFile'`每个元素两次（一次 as`i-1`和一次 as `i`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-07T22:30:59.867

扩展[@Neil Mitchell](https://stackoverflow.com/users/160673/neil-mitchell)的答案，下面是`foo_transitive`. 话虽如此，对于这种特殊情况，我只使用`latexmk`which Does The Right Thing™。

```
import Control.Monad.Fix (fix, mfix)
import Control.Monad.IO.Class (MonadIO(liftIO))
import Text.Printf (printf)

type SHA = Int

data TeXCompilationStage 
  = Init
  | BibTeX
  | Recompile SHA
  deriving (Show, Eq)

data TeXResult
  = Stable SHA
  | Unstable
  deriving (Show, Eq)

f retry x budgetLaTeXCalls
  | budgetLaTeXCalls <= 0
      = do
          liftIO $ putStrLn "Budget for LaTeX depleted; result didn't converge"
          return Unstable
  | otherwise
      = case x of
          Init        -> do
            liftIO $ do 
              putStrLn "Init"
              putStrLn "  # latex"
            retry BibTeX (budgetLaTeXCalls-1)
          BibTeX      -> do
            liftIO $ do
              putStrLn "BibTeX"
              putStrLn "  # bibtex"
            retry (Recompile 0) budgetLaTeXCalls
          Recompile previousSHA -> do
            let budgetLaTeXCalls' = budgetLaTeXCalls - 1
                calculcatedSHA    = 3
            liftIO $ do
              printf "Recompile (budget: %d)\n" budgetLaTeXCalls
              printf "  Prevous SHA:%d\n  Current SHA:%d\n" previousSHA calculcatedSHA
            if calculcatedSHA == previousSHA
              then do
                liftIO $ putStrLn "  Stabilized"
                return $ Stable calculcatedSHA
              else do
                liftIO $ putStrLn "  Unstable"
                retry (Recompile (previousSHA+1)) (budgetLaTeXCalls-1)

latex :: Int -> IO TeXResult
latex = fix f Init 
```

# jquery - 如何在页面加载之前运行jquery

> ID：14622182
> 
> 赞同：1
> 
> 时间：2013-01-31T09:19:24.123
> 
> 标签：jquery

在我的 jsp 页面中，我有两个 div 和一个带有默认值的文本框，如下所示

```
<input type="text" value="somevalue"  id="box"/>
<div id="first" style="display:none"></div>

<div id="second"></div> 
```

在脚本标签中我写如下

```
<script>
$(document).ready(function()
{
    if($("#box").val()=='somevalue')
    {
        $('first').show();
        $('second').hide();
    }
});
</script> 
```

上面的代码运行良好..但是当页面加载时，第二个 div 会持续 1 秒，然后切换到第一个 div..我不希望出现这种切换..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:22:52.437

应该是这样的，你缺少 id 选择器。选择器中的“#”

```
$('#first').show();
$('#second').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:26:27.137

在您的 HTML 中，将所有 div 更改为隐藏。

```
<input type="text" value="somevalue"  id="box"/>
<div id="first" style="display:none"></div>

<div id="second" style="display:none"></div> 
```

然后在你的 JQuery 中。

```
$(document).ready(function()
{
      // show only the boxes based on your conditions. This is just an example.
    if($("#box").val()=='somevalue')
    {
        $('#first').show();
    }
    else
    {
        $('#second').show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:28:12.330

您可以将 style="display:none" 设置为两个 div，然后根据该值显示 div。

```
<input type="text" value="somevalue"  id="box"/>
<div id="first" style="display:none"></div> 
<div id="second" style="display:none"></div>

<script>
$(document).ready(function()
{
    if($("#box").val()=='somevalue') { $('#first').show(); }
    else  { $('#second').show(); }
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:30:17.023

```
$("#first,#second").css("display", "none");
($("#box").val() == 'somevalue' ? $('#first').show(); : $('#second').show();) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:30:28.650

您说它在`JSP`页面中，因此您可以将条件逻辑放入服务器端，并确定两个`<div>`元素中的哪一个应该在它到达浏览器之前隐藏。绝对没有理由使用 jQuery 来解决这个问题，这样做（在我看来）是错误的方法。

假设您使用的是[JSTL 核心](http://docs.oracle.com/cd/E17802_01/products/products/jsp/jstl/1.1/docs/tlddocs/c/tld-summary.html)标签库：

```
<c:set var="yourValue" value="somevalue"/>
<input type="text" value="somevalue"  id="box"/>
<div id="first" <c:if test="${yourValue != 'somevalue'}">style="display:none"</c:if>></div>

<div id="second" <c:if test="${yourValue == 'somevalue'}">style="display:none"</c:if>></div> 
```

# multithreading - 多线程与引用计数：每个线程是否分别计算变量

> ID：14622184
> 
> 赞同：2
> 
> 时间：2013-01-31T09:19:30.510
> 
> 标签：multithreading, gtk, pthreads, glib, reference-counting

我一直在玩 glib，它

1.  利用引用计数来管理其对象的内存；
2.  支持多线程。

我无法理解的是他们如何一起玩。即：

1.  在`glib`每个线程中似乎并没有增加在其输入上传递的对象的引用计数，AFAIK（我将它们称为线程共享对象）。这是真的吗？（或者我只是没能找到正确的代码？）除了主线程（负责对它们进行引用计数）之外，不增加共享它们的每个线程的线程共享对象的引用计数是一种常见的做法吗？
2.  尽管如此，每个线程都会增加对象的引用计数，这些对象是由自身动态创建的。程序员是否应该为避免名称冲突和内存泄漏而在每个线程中不给出相同的变量名称？（例如，在我的图片上，thread2 不应该创建一个名为 output_object 的堆变量，否则它将与 thread1 的同名堆变量发生冲突）？

更新：对（问题 2）的回答是否定的，因为这些变量的可见性范围不相交： [是动态分配的内存（堆），是函数本地的，还是线程中的所有函数都可以访问它，即使没有传递指针作为论据](https://stackoverflow.com/questions/692636/is-dynamically-allocated-memory-heap-local-to-a-function-or-can-all-functions)。

我的问题的说明：

![在此处输入图像描述](../Images/4976f74e3cedc4009265de6f17790c19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:34:47.513

我认为线程与理解引用计数器的使用无关。重点是所有权和生命周期，线程只是受此影响的一件事。这有点难以解释，希望我会通过示例更清楚地说明这一点。

现在，让我们看一下 main() 创建一个对象并使用该对象启动两个线程的给定示例。问题是，谁拥有创建的对象？简单的答案是 main() 和两个线程共享这个对象，所以这是共享所有权。为了对此建模，您应该在每次调用 pthread_create() 之前递增 refcounter。如果调用失败，您必须再次递减它，否则启动线程有责任在对象完成时执行此操作。然后，当 main() 终止时，它也应该释放所有权，即递减 refcounter。*一般规则是，当添加所有者时，增加 refcounter。当所有者使用完该对象时，它会递减 refcounter，最后一个会销毁该对象。*

现在，为什么代码不这样做？首先，您可以将第一个线程添加为所有者，然后将 main() 的所有权传递给第二个线程。这将节省一次递增/递减操作。但这仍然不是正在发生的事情。相反，根本没有进行引用计数，简单的原因是它没有被使用。引用计数的目的是在作为对等的不同所有者之间协调动态分配对象的生命周期。不过，这里的对象是由 main() 创建和拥有的，这两个线程不是对等线程，而是 main 的从属线程。由于 main() 是控制线程启动/停止的主控器，因此它不必与它们协调对象的生命周期。

最后，虽然这可能是由于您的代码的示例性，但我认为 main 只是泄漏了引用，依赖于操作系统进行清理。虽然这并不漂亮，但它并不伤人。通常，您可以分配对象一次，然后在某些情况下永远使用它们而无需任何引用计数。这方面的一个例子是应用程序的主窗口，您只需要一次并且在整个运行时都需要它。但是，您不应该重复分配此类对象，因为这样您就会有明显的内存泄漏，并且会随着时间的推移而增加。不过，这两种情况都会被 valgrind 等工具捕获。

关于您的第二个问题，关于您期望的堆变量名称冲突，它不存在。函数局部变量名不能冲突。这不是因为它们被不同的线程使用，而是即使同一个函数被同一个线程调用两次（想想递归！）每次调用函数中的局部变量都是不同的。此外，变量名称是供人类阅读的。编译器完全消除了这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:16:38.567

**更新：**

正如 matthias 下面所说，GObject 不是线程安全的，只有引用计数函数才是。

**原创内容：**

GObject 应该是[线程安全](http://developer.gnome.org/gobject/stable/gobject-memory.html#gobject-memory-refcount)的，但我自己从来没有玩过……</p>

# sql-server - 分割字符串最高效的方法是什么？

> ID：14622188
> 
> 赞同：2
> 
> 时间：2013-01-31T09:19:36.120
> 
> 标签：sql-server, performance, sql-server-2012, string-split

**代码**

```
create table ExampleTable
(
    Name varchar(500)
    CultureCode(5)
)

insert into ExampleTable values('Dit is een test', 'nl-NL')
insert into ExampleTable values('This is a test', 'en-GB')
insert into ExampleTable values('Ceci est un test', 'fr-FR')
insert into ExampleTable values('Dies ist ein Test', 'de-DE')

create procedure GetNameByCultures
(
@CultureCodes varchar(250)
)
as 
begin
//Get ExampleTable items according to the culture codes stated in @CultureCodes
end 
```

-例子：

```
CREATE TYPE StringListType AS TABLE
(
    [str] varchar(5) NULL
) 
```

我正在使用 MS SQL 2012 V11.0.2100.60

**情况**

我正在尝试找到提取标签的最佳方法（性能方面）。我想到但尚未测试的方法是：

*   创建如上所示的用户定义表类型。

好处：我知道它在数据库上几乎没有性能。

缺点：我必须向存储过程添加另一个参数。

*   创建一个按字符分割字符串的函数：'，'

缺点：我知道在 SQL 中使用“Right”、“Left”、“Like”和其他 varchar 转换/编辑属性很慢

UpSide：我可以将处理过程保存在数据库中。

在当前情况下，我只在用户定义的表类型中发送一个文化代码。因此，无法在此 UDTT 中添加文化代码，因为您无法将 UDTT 添加到 UDTT。我唯一的选择是向存储过程添加另一个参数，这应该不是什么大问题……但我们希望只保留一个参数。

有没有人碰巧知道另一种（更好的？）方法，还是我应该使用其中一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:31:28.113

我仍然会将文化列表作为逗号分隔的字符串传递，定义一个返回表的函数，然后将此表连接到您的示例表。只要字符串包含少量元素，您就不会注意到任何性能下降。

如果您可以忍受通过最多 N 文化代码的限制，您可以尝试这样的事情

```
create procedure GetNameByCulture 
  @CultureInfo varchar(5),
  @CultureInfo1 varchar(5) = null,
  @CultureInfo2 varchar(5) = null
as
 select e.* 
   from ExampleTable e 
        join (
          select @CultureInfo as CultureInfo union
          select @CultureInfo1 union
          select @CultureInfo2
          ) x 
          on e.CultureInfo = x.CultureInfo 
```

我猜这会比字符串版本快一点。但正如我所提到的，无论如何这不会有什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:02:28.447

如何使用替换和转换为 xml 而不是左/右拆分字符串？

```
 declare @ExampleTable table
    (
        Name varchar(500),
        CultureCode varchar(5)
    )

    insert into @ExampleTable values('Dit is een test', 'nl-NL')
    insert into @ExampleTable values('This is a test', 'en-GB')
    insert into @ExampleTable values('Ceci est un test', 'fr-FR')
    insert into @ExampleTable values('Dies ist ein Test', 'de-DE')

    declare @CultureCodes varchar(250)
    set @CultureCodes = 'nl-NL,en-GB,fr-FR'

    declare @xml xml
    set @xml = cast('<culturecodes><culture>'+REPLACE(@CultureCodes,',','</culture><culture>')+'</culture></culturecodes>' as xml)

    select 
           C.element.value('.','varchar(max)') as CultureCode_splited
          ,E.CultureCode 
          ,E.name
    from @xml.nodes('/culturecodes/culture')C(element)
    inner join @ExampleTable E
    on E.CultureCode = C.element.value('.','varchar(max)') 
```

结果集看起来像这样......

```
 CultureCode_splited     CultureCode name
    nl-NL                   nl-NL       Dit is een test
    en-GB                   en-GB       This is a test
    fr-FR                   fr-FR       Ceci est un test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:14:07.057

表值参数是您使用 2008 年以后的最佳方式。（[见 MSDN](http://msdn.microsoft.com/en-us/library/bb510489.aspx)）。

我强烈建议您阅读 SQL Server MVP Erland Sommarskog 关于可用不同方法的非常全面的文章，其中包含分析和性能细节。

*   专门针对[表值参数的文章](http://www.sommarskog.se/arrays-in-sql-2008.html)
*   专门[针对 SQL 2005 的一些替代方案](http://www.sommarskog.se/arrays-in-sql-2005.html)（XML、字符串拆分等）的文章
*   [通用文章页面](http://www.sommarskog.se/arrays-in-sql.html)，带有上述链接、性能测试和 SQL Server 2000 替代方案

# html - SVG Sprites - 如果元素比图像更高更宽怎么办？

> ID：14622189
> 
> 赞同：0
> 
> 时间：2013-01-31T09:19:42.627
> 
> 标签：html, css, svg, css-sprites

我想将页面上使用的所有 SVG 图形放在精灵表中以降低 HTTP 请求。大多数精灵实际上都很小，所以我用`background-size`了很多。在某些情况下，背景图像故意没有完全填充分配的元素。是否仍然可以使用精灵表而不会“泄漏”表上的其他图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:29:02.300

你是否在你的 CSS 中包含了“repeat: no-repeat”？

如果这不能解决问题，请尝试在图像精灵中进一步展开图像。

# ios - 未收到广告时隐藏广告视图，然后再次显示

> ID：14622195
> 
> 赞同：0
> 
> 时间：2013-01-31T09:19:53.577
> 
> 标签：ios, ios5, admob, iad

我已经使用 Admob 中介服务设置了一个测试应用程序。我有一个问题，当发生错误并由方法处理时，如果我隐藏横幅视图，则不会导致进一步的广告请求发生，可能是由于这种“隐藏状态”。

我能做的是在错误方法中睡眠一段时间然后再次请求，但这不是最好的方法......我猜这会在睡眠时锁定一些进程和潜在的其他用户输入？我不确定这一点，因为该应用程序仅包含广告，因此无法测试。

这是我的方法...

```
- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error;
{
    NSLog(@"Failed to receive ad with error: %@", [error localizedFailureReason]);
    bannerView_.hidden = YES;
    sleep(59);
    [bannerView_ loadRequest:[self createRequest]];
}

- (void)adViewDidReceiveAd:(GADBannerView *)view;
{
    NSLog(@"Ad Received");
    bannerView_.hidden = NO;
} 
```

我正在寻找最好的方法： 1\. 在没有返回广告时隐藏视图，但确保请求继续，并且在收到广告后再次显示广告视图。2.在错误方法中使用循环来处理再次请求，直到成功并且不锁定其他任何内容。

目前仅在模拟器上进行测试，如果有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:31:14.113

我建议您使用 performSelector 进行异步调用而不是使用 sleep，因为 sleep 会阻塞您的线程。所以这是按照你提到的第一种方式实现的。

```
- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error;
{
    NSLog(@"Failed to receive ad with error: %@", [error localizedFailureReason]);
    bannerView_.hidden = YES;
    [self performSelector:@selector(repeatAdRequest) withObject:nil afterDelay:60.0];
}

- (void)adViewDidReceiveAd:(GADBannerView *)view;
{
    NSLog(@"Ad Received");
    bannerView_.hidden = NO;
}

-(void) repeatAdRequest
{
    [bannerView_ loadRequest:[self createRequest]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:27:42.287

使 addview 成为另一个空白 uiview 的子视图。

在 adview didfail 中，隐藏视图而不是 adview 并在接收中再次显示视图。

# php - 如何在php中格式化URL？

> ID：14622198
> 
> 赞同：0
> 
> 时间：2013-01-31T09:20:01.530
> 
> 标签：php, function, url

例如，我输入这个 URL：

```
http://www.example.com/ 
```

我希望它返回我：

```
http://www.example.com 
```

我怎样才能像这样格式化 URL？是否有内置的 PHP 函数来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:24:45.173

这应该这样做：

```
$url = 'http://parkroo.com/';
if ( substr ( $url, 0, 11 ) !== 'http://www.' )
    $url = str_replace ( 'http://', 'http://www.', $url );

$url = rtrim ( $url, '/' ); 
```

好的，这个应该更好：

```
$urlInfo = parse_url ( $url );
$newUrl = $urlInfo['scheme'] . '://';
if ( substr ( $urlInfo['host'], 0, 4 ) !== 'www.' )
    $newUrl .= 'www.' . $urlInfo['host'];
else
    $newUrl .= $urlInfo['host'];

if ( isset ( $urlInfo['path'] ) && isset ( $urlInfo['query'] ) )
    $newUrl .= $urlInfo['path'] . '?' . $urlInfo['query'];
else
{
    if ( isset ( $urlInfo['path'] ) && $urlInfo['path'] !== '/' )
        $newUrl .= $urlInfo['path'];

    if ( isset ( $urlInfo['query'] )  )
        $newUrl .= '?' . $urlInfo['query'];
}

echo $newUrl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:33:53.970

您可以通过 parse_url 获取部分 URL，然后构建 URL。或者更简单， trim(' [http://example.com/](http://example.com/) ', '/');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:11:57.640

现场[演示](http://phpfiddle.org/main/code/wd1-eb7)

```
<?php
function changeURL($url){
 if(empty($url)){
  return false;
 }
 else{
  $u = parse_url($url);
  /*
  possible keys are:
  scheme
  host
  user
  pass
  path
  query
  fragment
  */

  foreach($u as $k => $v){
   $$k = $v;
  }
  //start rebuilding the URL
  if(!empty($scheme)){
   $newurl = $scheme.'://';
  }
  if(!empty($user)){
   $newurl.= $user;
  }
  if(!empty($pass)){
   $newurl.= ':'.$pass.'@';
  }
  if(!empty($host)){
    if(substr($host, 0, 4) != 'www.'){
     $host = 'www.'. $host;
    }
   $newurl.= $host;
  }
  if(empty($path) && empty($query) && empty($fragment)){
         $newurl.= '/';
  }else{
  if(!empty($path)){
   $newurl.= $path;
  }
  if(!empty($query)){
   $newurl.= '?'.$query;
  }
  if(!empty($fragment)){
   $newurl.= '#'.$fragment;
  }
  }
  return $newurl;
 }

}
echo changeURL('http://yahoo.com')."<br>";
echo changeURL('http://username:password@yahoo.com/test/?p=2')."<br>";
echo changeURL('ftp://username:password@yahoo.com/test/?p=2')."<br>";
/*
http://www.yahoo.com/
http://username:password@www.yahoo.com/test/?p=2
ftp://username:password@www.yahoo.com/test/?p=2
*/
?> 
```

# ios - CGContextClipToMask 可以用 alpha=1 屏蔽所有不透明的像素吗？

> ID：14622202
> 
> 赞同：1
> 
> 时间：2013-01-31T09:20:19.147
> 
> 标签：ios, core-graphics

是否可以`CGContextClipToMask`忽略蒙版图像的灰度值并像纯黑白一样工作？

我有一个灰度图像，当我将它用作蒙版时，灰色被解释为 alpha 通道。这很好，除了我需要完全掩盖那些不透明的像素。

简短的例子：

```
UIImage *mask = [self prepareMaskImage];
UIGraphicsBeginImageContextWithOptions(mask.size, NO, mask.scale); {
  // Custom code
  CGContextClipToMask(UIGraphicsGetCurrentContext(), mask.size, mask.CGImage);
  // Custom code
} 
```

是否可以调整此代码以实现我的目标？

长话短说：我需要让一个透明的灰度图像在原来的地方变得透明，而在纯色的地方完全变黑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:22:17.897

我的粗略想法如下：

1.  您将输入图像转换为灰度 + alpha 格式的可读字节数据。由于 iOS 的限制，您可能不得不改用 RGBA。
2.  您迭代字节数据以修改适当的值。

为了简化访问，使用

```
typedef struct RGBA {
    UInt8 red;
    UInt8 green;
    UInt8 blue;
    UInt8 alpha;
} RGBA; 
```

让我们假设`image`您的输入掩码。

```
// First step, using RGBA (because I know it works and does not harm, just writes/consumes twice the amount of memory)
CGImageRef imageRef = image.CGImage;
NSInteger rawWidth = CGImageGetWidth(imageRef);
NSInteger rawHeight = CGImageGetHeight(imageRef);
NSInteger rawBitsPerComponent = 8;
NSInteger rawBytesPerPixel = 4;
NSInteger rawBytesPerRow = rawBytesPerPixel * rawWidth;
CGRect rawRect = CGRectMake(0, 0, rawWidth, rawHeight);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
UInt8 *rawImage = (UInt8 *)malloc(rawHeight * rawWidth * rawBytesPerPixel);
CGContextRef rawContext = CGBitmapContextCreate(rawImage,
                                                rawWidth,
                                                rawHeight,
                                                rawBitsPerComponent,
                                                rawBytesPerRow,
                                                colorSpace,
                                                kCGImageAlphaPremultipliedLast);
CGColorSpaceRelease(colorSpace);

// At this point, rawContext is ready for drawing, everything drawn will be in rawImage's byte array.
CGContextDrawImage(rawContext, rawRect, imageRef);

// Second step, crawl the byte array and do the evil work:
for (NSInteger y = 0; y < rawHeight; ++y) {
    for (NSInteger x = 0; x < rawWidth; ++x) {
        UInt8 *address = rawImage + x * rawBytesPerPixel + y * rawBytesPerRow;
        RGBA *pixel = (RGBA *)address;
        // If it is a grey input image, it does not matter what RGB channel to use - they shall all be the same
        if (0 != pixel->red) {
            pixel->alpha = 0;
        } else {
            pixel->alpha = UINT8_MAX;
        }
        pixel->red = 0;
        pixel->green = 0;
        pixel->blue = 0;
        // I am still not sure if this is the transformation you are searching for, but it may give you the idea.
    }
}

// Third: rawContext is ready, transformation is done. Get the image out of it
CGImageRef outputImage1 = CGBitmapContextCreateImage(rawContext);
UIImage *outputImage2 = [UIImage imageWithCGImage:outputImage1];
CGImageRelease(outputImage1); 
```

好的...输出是 RGBA，但您可以创建灰度 + alpha 上下文，然后将图像粘贴到那里进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:54:58.883

有趣的问题！ 这是我认为您在一个简单的示例项目中想要[的代码。](https://bitbucket.org/GeekAndDad/uiimage-stencil-experiment/overview)与上面类似，但可以正确处理缩放。如果需要，还可以选择保留蒙版图像中的 alpha。快速组合测试似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T14:00:26.483

这段代码帮助我在图像的非透明区域应用色调。

```
- (UIImage*)imageWithImage:(UIImageView*)source colorValue:(CGFloat)hue {
    CGSize imageSize = [source.image size];
    CGRect imageExtent = CGRectMake(0,0,imageSize.width,imageSize.height);

    // Create a context containing the image.
    UIGraphicsBeginImageContext(imageSize);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [source.image drawAtPoint:CGPointMake(0, 0)];

    // Setup a clip region using the image
    CGContextSaveGState(context);
    CGContextClipToMask(context, source.bounds, source.image.CGImage);

    self.imageColor = [UIColor colorWithHue:hue saturation:1.0 brightness:1 alpha:1.0];
    [self.imageColor set];
    CGContextFillRect(context, source.bounds);

    // Draw the hue on top of the image.
    CGContextSetBlendMode(context, kCGBlendModeHue);
    [self.imageColor set];

    UIBezierPath *imagePath = [UIBezierPath bezierPathWithRect:imageExtent];
    [imagePath fill];

    CGContextRestoreGState(context); // remove clip region

    // Retrieve the new image.
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

# android - 文字转语音——不说出来

> ID：14622206
> 
> 赞同：1
> 
> 时间：2013-01-31T09:20:28.160
> 
> 标签：android

我对从编辑文本中说出单词的代码感到困惑，我使用的代码没有说出来，但它正确地获取了值、字符数等。

我使用的代码是..

```
 public class AndroidTextToSpeechActivity extends Activity implements
    TextToSpeech.OnInitListener {
/** Called when the activity is first created. */

private TextToSpeech tts;
private Button btnSpeak;
private EditText txtText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    System.out.println("Entered to the Activity");
    tts = new TextToSpeech(this, this);

    btnSpeak = (Button) findViewById(R.id.btnSpeak);

    txtText = (EditText) findViewById(R.id.txtText);

    // button on click event
    btnSpeak.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            speakOut();
        }

    });
}

@Override
public void onDestroy() {
    // Don't forget to shutdown!
    if (tts != null) {
        System.out.println("Entered  to OnDestroy");
        tts.stop();
        tts.shutdown();
    }
    super.onDestroy();
}

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

    System.out.println("Enterd init Function");
    if (status == TextToSpeech.SUCCESS) {

        int result = tts.setLanguage(Locale.ENGLISH);

        // tts.setPitch(5); // set pitch level

        // tts.setSpeechRate(2); // set speech speed rate

        if (result == TextToSpeech.LANG_MISSING_DATA
                || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "Language is not supported");
        } else {
            btnSpeak.setEnabled(true);
            speakOut();
        }

    } else {
        Log.e("TTS", "Initilization Failed");
    }

}

private void speakOut() {
     System.out.println("Entered Speakout");
    String text = txtText.getText().toString();

    tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
} 
```

它返回一条不支持语言的消息。我该如何纠正它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:26:22.013

试试这个可能对你有帮助。

我认为您的**设备中未安装语音合成器**，因此请使用这些。如果未安装，它将重定向到 google play 来安装它。

```
 public void onInit(int status) {
    if (status == TextToSpeech.SUCCESS) {
        int result = talker.setLanguage(Locale.US);
        if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "This Language is not supported");
            Intent installIntent = new Intent();
            installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        } else {
            btnSpeak.setEnabled(true);
            speakOut();
        }
    } else {
        Log.e("TTS", "Initilization Failed!");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:27:19.907

试试下面的代码。它对我来说很好，我希望它也能帮助你。

```
public class TexttoSpeechActivity extends Activity implements OnClickListener,
    OnInitListener {
    private Button m_btnSpech;
    private EditText m_etText;
    // TTS object
    private TextToSpeech m_tts;
    // status check code
    private final int m_data = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        m_btnSpech = (Button) findViewById(R.id.mbtnSpeak);
        m_etText = (EditText) findViewById(R.id.metTextValues);
        // listen for clicks
        m_btnSpech.setOnClickListener(this);        
        // check for TTS data intent to check if a TTS engine is installed
        Intent m_intent = new Intent();
        m_intent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(m_intent, m_data);
    }
    // respond to button click.
    @Override
    public void onClick(View p_v) {
        // get the text entered.
        String m_word = m_etText.getText().toString();
        speakWord(m_word);
    }
    /**
     * Executed when a new TTS is instantiated. Some text is spoken via TTS
     * here.
     * 
     * @param p_word
     *            -contains the word entered into the edittext.
     */
    private void speakWord(String p_word) {
        // speak straight away
        m_tts.speak(p_word, TextToSpeech.QUEUE_FLUSH, null);
    }
    /**
     * This is the callback from the TTS engine check, if a TTS is installed we
     * create a new TTS instance (which in turn calls onInit), if not then we
     * will create an intent to go off and install a TTS engine
     * 
     * @param p_requestCode
     *            int Request code returned from the check for TTS engine.
     * @param p_resultCode
     *            int Result code returned from the check for TTS engine.
     * @param p_data
     *            Intent Intent returned from the TTS check.
     */
    @Override
    protected void onActivityResult(int p_requestcode, int p_resultcode,
            Intent p_data) {
        if (p_requestcode == m_data) {
            if (p_resultcode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                m_tts = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent m_intnt = new Intent();
                m_intnt.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(m_intnt);
            }
        }
    }
    // setup TTS
    @Override
    public void onInit(int p_status) {
        // check for successful instantiation
        if (p_status == TextToSpeech.SUCCESS) {
            if (m_tts.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE) {
                m_tts.setLanguage(Locale.US);
                Toast.makeText(this, "Text To Speech ", Toast.LENGTH_LONG)
                        .show();
            }
            Toast.makeText(TexttoSpeechActivity.this,
                    "Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
        } else if (p_status == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }
    /**
     * Be kind, once you've finished with the TTS engine, shut it down so other
     * applications can use it without us interfering with it.
     */
    @Override
    public void onDestroy() {
        // Don't forget to shutdown!
        if (m_tts != null) {
            m_tts.stop();
            m_tts.shutdown();
        }
        super.onDestroy();
    }
} 
```

# perl - Perl 运行批处理文件 @echo 命令未找到

> ID：14622207
> 
> 赞同：1
> 
> 时间：2013-01-31T09:20:28.780
> 
> 标签：perl, command-line, batch-file

我在 Windows 上使用[mr](http://joeyh.name/code/mr/)，它允许在任何存储库操作之前/之后运行任意命令。据我所知，这只是通过调用 perl 的`system`函数来完成的。但是，我的设置似乎有些问题：当让 mr 运行以下批处理文件时，位于 d 中：

```
@echo off
copy /Y foo.bat bar.bat 
```

我在最基本的 Windows 命令上遇到错误：

```
d:/foo.bat: line 1: @echo: command not found
d:/foo.bat: line 2: copy: command not found 
```

为了确保 mr 不是问题，我跑了，`perl -e 'system( "d:/foo.bat" )'`但输出是一样的。

使用 xcopy 而不是 copy，似乎找到了 xcopy 命令，因为现在是输出

```
d:/foo.bat: line 1: @echo: command not found
Invalid number of parameters 
```

但是我不知道参数可能有什么问题。我想也许问题是批处理文件没有完全访问标准命令环境，所以我尝试通过显式运行它，`perl -e 'system( "cmd /c d:\foo.bat" )'`但这只是启动 cmd 并且不运行命令（我必须退出命令行才能回到一个我在的地方）。

这里有什么问题？一个详细的解释会很棒。另外，我该如何解决这个问题？我更喜欢保留批处理文件的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:24:33.927

echo 指令由正在运行的命令提示符实例直接执行。但是 perl 正在使用您的命令*[启动一个新进程。](http://perldoc.perl.org/functions/system.html)*您需要在 cmd 实例中运行脚本，这些命令才能正常工作。

你`cmd /c`必须工作。检查您提供给它的路径中是否有空格。您可以使用参数化的方式传递参数，

```
@array = qw("/c", "path/to/xyz.bat");
system("cmd.exe", @array); 
```

echo 指令**不是**可执行文件，因此会出错。`copy`命令也是如此。它**不是**可执行文件，而`xcopy.exe`它是。

# python - 使用 C 头文件中定义的结构作为 Python 数据类型

> ID：14622208
> 
> 赞同：1
> 
> 时间：2013-01-31T09:20:31.907
> 
> 标签：python, python-c-api

如何使用在我的 Python 代码中作为数据类型在头文件中定义的 C struct foo？

（[这个文件](http://docs.python.org/2/extending/newtypes.html)似乎没有解决这个问题。）

```
typedef struct {

    PyObject_HEAD

    /* Type-specific fields go here. */

     struct api_query query; /* instead of PyObject * type here */

} api_Request; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:47:35.107

构建扩展模块并非易事（您链接到的文档确实详细说明了如何执行此操作）。要以这种方式包装 C 结构，您需要定义新类型和 Python 的对象常用方法（构造函数、析构函数、访问方法等）。

您可能会发现[`ctypes`](http://docs.python.org/2/library/ctypes.html)包是一种更简单的方法。

更好的是，如果您需要做的就是创建结构并将其发送（如您所说，发送到套接字），并且如果结构足够简单，那么该[`struct.pack`](http://docs.python.org/2/library/struct.html?highlight=struct#struct.pack)功能可能会被证明是最简单的。

# wso2 - 不接受 OpenID。OpenID 身份验证失败（使用 Google 应用帐户登录 Stratoslive）

> ID：14622218
> 
> 赞同：0
> 
> 时间：2013-01-31T09:20:52.830
> 
> 标签：wso2, openid, wso2is, wso2stratos

我无法使用谷歌应用程序帐户登录 Stratoslive。消息是：“未接受 OpenID。OpenID 身份验证失败”。

我发现了这个：“ [https://wso2.org/jira/browse/STRATOS-993](https://wso2.org/jira/browse/STRATOS-993) ”

*   状态：“已解决”
*   解决方案：“不会修复”

解决了吗？为什么我无法使用我的 google app 帐户登录 Stratoslive？(xxx@gmail.com)

提前致谢

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:28:26.383

状态：“已解决” 解决方案：“不会修复”

这意味着该问题已解决，因为将来不会修复。简而言之，除非 JIRA 再次重新打开，否则 JIRA 将不会在未来得到修复。

正如 JIRA 所说，据我了解，由于此错误，您将来将无法使用 Google 帐户登录 Stratoslive 帐户。

# html - CSS：显示水平滚动条时不应用背景颜色

> ID：14622219
> 
> 赞同：3
> 
> 时间：2013-01-31T09:20:55.073
> 
> 标签：html, css

这个标记

```
<div style="background-color: red;">
    abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
</div> 
```

当浏览器窗口足够宽时可以正常工作，但是当我将其缩小以查看水平滚动条时，背景颜色仅应用于可见部分：

![在此处输入图像描述](../Images/aab8c73d03f011b0aa37240c77e54925.png)

这可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:29:52.963

试试看`position:absolute;`

```
<div style="background-color: red; position:absolute;">
    abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
</div> 
```

**编辑 ：**

或与`display:inline;`

```
<div style="background-color: red; display:inline;">
    abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:35:06.017

尝试一种方法是使用`position:absolute`.

```
<div style="background-color: red;position: absolute;">
    <p>abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd</p>
</div> 
```

其他方式是使用一些`width`.

```
<div style="background-color: red;width: 500px">
    <p>abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd</p>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T09:26:10.553

尝试：

```
<div>
<p style="background-color:red;">
abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
</p>
</div> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-31T09:53:13.993

```
<div style="background-color: red;display:table">
    abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
</div> 
```

虽然不支持IE7。

# iphone - iPhone和iPhone之间的屏幕连接

> ID：14622222
> 
> 赞同：4
> 
> 时间：2013-01-31T09:20:57.187
> 
> 标签：iphone, ios

我的意思是两台 iPhone 设备应该通过蓝牙或 WiFi 连接，并且一台设备的 UI 应该扩展到另一台 iPhone 设备（不共享屏幕）。我们有办法在 iOS 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:48:15.727

Bump API 是最好的例子，它将有助于您连接两个设备（IOS/Android）并在它们之间传输数据。

# ruby-on-rails-3 - link_to 更新设计用户，方法 => 放置

> ID：14622223
> 
> 赞同：0
> 
> 时间：2013-01-31T09:20:58.160
> 
> 标签：ruby-on-rails-3, devise, put

我正在尝试更新我的 current_user （设计）的单个数据库字段。

我只想使用 link_to 助手来做到这一点：

```
<%= link_to "Grid", edit_user_registration_path(current_user, :project_view => "grid"), :method => :put %> 
```

但我无法让它工作，因为结果总是一个错误：

```
Routing Error

No route matches [PUT] "/users/edit.1" 
```

我的设计路线：

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy 
```

路由有什么问题？我正在使用没有任何自定义修改的设计。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:04:42.300

错误的路径助手：

```
$ rake routes
 new_user_registration    GET     ...  registrations#new
 cancel_user_registration GET     ...  registrations#cancel
 user_registration        POST    ...  registrations#create
 edit_user_registration   GET     ...  registrations#edit
             users        PUT     ...  registrations#update # You want this one
                          DELETE  ...  registrations#destroy 
```

结果：

```
<%= link_to "Grid", users_path(:user => {:project_view => 'grid'}), :method => :put, :confirm => "Are you sure?" %> 
```

更新您的特定路线：

```
<%= link_to "Grid", registration_path(resource_name, :user => {:project_view => 'grid'}), :method => :put, :confirm => "Are you sure?" %> 
```

# android - 使用 Google Maps API v2 时，Android 2.2 模拟器上缺少 Google Play 服务

> ID：14622231
> 
> 赞同：4
> 
> 时间：2013-01-31T09:21:38.857
> 
> 标签：android, google-play-services, google-maps-api-2, android-maps

嘿，我正在尝试在我的模拟器上使用谷歌地图，即使我在运行它说的应用程序时已经安装了谷歌播放服务库

> 没有您手机中缺少的 Google Play 服务，此应用将无法运行

在 LogCat 上，我收到了关于它的警告，但不确定我为什么会收到这个。

我的 MainActivity.java

```
package com.mapsmaps;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GoogleMap mapa = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mapsmaps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <permission
        android:name="com.mapsmaps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.mapsmaps.permission.MAPS_RECEIVE" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />F

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        >
        <activity
            android:name="com.mapsmaps.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyBdbj4iXi0SijKjJDrJw5RigtSpQcaID7Q" />
    </application>

</manifest> 
```

日志猫 -

```
D/dalvikvm(451): DexOpt: couldn't find field 
    Landroid/content/res/Configuration;.smallestScreenWidthDp
W/dalvikvm(451): VFY: unable to resolve instance field 24
D/dalvikvm(451): VFY: replacing opcode 0x52 at 0x0012
D/dalvikvm(451): VFY: dead code 0x0014-0018 in 
    Lcom/google/android/gms/common/GooglePlayServicesUtil;.b 
    (Landroid/content/res/Resources;)Z
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing.
W/GooglePlayServicesUtil(451): Google Play services is missing. 
```

![图书馆截图](../Images/24b4dc95f8d1f46362eeef2913ffb9c0.png)

![模拟器截图](../Images/e7440a6fd09f775372e3cb2fce8d6e2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T18:14:16.747

要在使用 Google Play 服务 SDK 时测试您的应用，您必须使用：

运行 Android 2.3 或更高版本并包含 Google Play 商店的兼容 Android 设备。带有 AVD 的 Android 模拟器，它运行基于 Android 4.2.2 或更高版本的 Google API 平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T22:06:07.860

*“要在使用 Google Play 服务 SDK 时测试您的应用，您必须使用带有 AVD 的 Android 模拟器，该 AVD 运行基于 Android 4.2.2 或更高版本的 Google API 平台。”*

来自[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:46:55.630

请检查链接[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

明确提到**您必须提供一个物理开发设备，您可以在该设备上运行和调试您的应用程序。**

注意：Android 模拟器不支持 Google Play 服务——要使用 API 进行开发，您需要提供开发设备，例如 Android 手机或平板电脑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:32:30.373

Google Maps V2 不适用于模拟器，因为它与 Google Play 服务捆绑在一起。

如果您仍然想知道如何使其在模拟器上运行，您可能想给出这篇[博](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)文并[回答](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar/13734937#13734937)一读。正如 CommonsWare 所指出的，这些文章中列出的调整归结为盗版软件。如果您真的考虑在 Android 上进行开发，您可能需要考虑购买设备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-04T20:07:56.773

启动 SDK 管理器并安装 Google API 映像（当前为 2 个）。然后基于其中任何一个创建一个 AVD。你应该很高兴:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T14:32:26.897

您可以查看我写的关于如何在模拟器上运行 Google Maps API V2 的这篇博文：

[模拟器加速和 Google Map API V2](https://blog-emildesign.rhcloud.com/?p=527)

这是我在其中一篇文章中在 SO 上找到的信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T09:27:33.223

截至目前`Google Maps V2`，不会在模拟器上显示。它们将仅在安装了 Play 商店应用程序的实时设备上运行。测试`Google Maps V2`仅在实时设备上而不是模拟器上的应用程序。目前也没有其他选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T09:44:50.040

我以前遇到过这个问题。原因是您的 google play 在您的模拟器上运行。试试 [这个](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)在你的模拟器上安装 google play

# c# - 在应用程序首次启动时显示其他视图

> ID：14622235
> 
> 赞同：3
> 
> 时间：2013-01-31T09:21:50.693
> 
> 标签：c#, windows-phone

我继承了一些必须更改的 Windows Phone 代码。我需要向用户展示一个关于如何在他第一次启动应用程序时使用它的教程。但是，我无法更改当前视图...

这是我的代码：

```
 public LoginView()
    {
        InitializeComponent();
        this.DataContext = new LoginViewModel();
        if (ApplicationFirstLaunched() == true)
        {
           NavigationManager.Current.Navigate(ApplicationView.DemoView);
        }
    } 
```

该`ApplicationFirstLaunched`函数工作正常（我`IsolatedStorageSettings`用来存储布尔值），但视图永远不会改变。我认为可能`Navigate`调用错误，所以我在视图中创建了一个按钮并将其`Click`属性分配给该函数：

```
 private void demoBtn_Click(object sender, RoutedEventArgs e)
 {
    NavigationManager.Current.Navigate(ApplicationView.DemoView);
 } 
```

当我单击按钮时，视图会发生变化并弹出教程。如何在首次发布时显示另一个视图？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:50:43.373

在 OnNavigatedTo 方法中导航。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    if (ApplicationFirstLaunched() == true)
    {
       NavigationManager.Current.Navigate(ApplicationView.DemoView);
    }
} 
```

# android - Android：更改方向时出现对话框“窗口泄漏”问题

> ID：14622237
> 
> 赞同：6
> 
> 时间：2013-01-31T09:21:56.210
> 
> 标签：android, android-alertdialog

我有两个类，一个适配器和一个活动，我有一个在适配器中显示的 dailog。当我尝试更改屏幕方向时出现错误。我尝试在我的活动中覆盖以下代码。但似乎没有任何效果

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
          Log.d(TAG, "configuration changed : " +newConfig);

    } 
```

下面是我的适配器代码

```
public AddressPopUpAdapter(Activity activity, Activity parent,
            int resourceId, ArrayList<PopUpMenu> items, int renderer) {
        super(activity, resourceId, items);
        this.items = items;
        this.renderer = renderer;
        this.activity = activity;
        this.parentActivity = parent;
        popupMenuUtils = new PopupMenuUtils();
        dialog = new Dialog(parentActivity);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        popUpMenu = items.get(position);
        Log.d(TAG, "location" + popUpMenu);
        if (popUpMenu == null) {
            return null;
        }
        Log.d(TAG, "location" + popUpMenu);
        View view = convertView;
        if (view == null) {
            LayoutInflater layoutInflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = layoutInflater.inflate(renderer, null);

        }

        final LinearLayout popupmain = (LinearLayout) view
                .findViewById(R.id.popupmain);

        popupmain.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                v.setEnabled(false);
                performAction(v, activity);

            }
        });

        if (position % 2 == 0) {

            view.setBackgroundResource(R.drawable.listshape);

        } else {
            view.setBackgroundResource(R.drawable.favoritebody);
        }
        return view;
    }

    public void performAction(View v, Activity activity) {

        Context myContext = v.getContext();
        PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
        String result = popUpMenu.getMenuName();
        if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.savecurrentlocation))) {
            getCurrentLocation();

        }

        else if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.distancebetween))) {
            AttractionService service = AttractionService
                    .getInstance(parentActivity.getApplicationContext());
            ArrayList<AttractionData> allMenuSearchList = service
                    .getAllAttractions(true, Constants.field, Constants.order);

            if (allMenuSearchList != null && !allMenuSearchList.isEmpty()) {

                dialog.setContentView(R.layout.pickdestination);
                ListView listPlace = (ListView) dialog
                        .findViewById(R.id.listPlace);
                PlaceAdapter placeAdapter = new PlaceAdapter(parentActivity,
                        allMenuSearchList, R.layout.pickcity, dialog,
                        R.string.pickstartingpoint, null);
                listPlace.setAdapter(placeAdapter);
giving error here----------->   dialog.show();

            } else {
                Toast.makeText(parentActivity, R.string.nonavigationtolink,
                        Toast.LENGTH_SHORT).show();

            }

            this.activity.finish();
        } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:32:22.727

问题是您没有解除（）您的对话框并完成活动，因此当方向更改时，它将获得先前的对话框状态。

所以`try to dismiss() your dialog before you finish your activity.`

[如果有任何其他原因，请查看更多详细信息：](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T16:01:17.297

根据 chintan/Stephan 的上述提示；我将 AlertDialog 引用设为 Activity 的全局，并在 onDestroy() 中关闭：

```
if (ad!=null) {
 ad.dismiss();
 ad=null;
} 
```

轮换时不再记录泄漏错误。

我不想考虑那些 configChanges 参数，因为如果您已经有横向或类似的特定布局，它们会搞砸。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-31T09:36:18.927

此问题的解决方法是添加

```
android:configChanges="orientation" 
```

您在清单中的活动。

# c# - 正则表达式验证控制禁用运行时

> ID：14622250
> 
> 赞同：1
> 
> 时间：2013-01-31T09:22:32.430
> 
> 标签：c#, asp.net

我有一个 RegularExpressionValidator 控件，它从文本框中检查正确的日期..

只有在插入数据时，我才需要检查该文本框。如果将其留空，则验证控件应允许继续进行。但所有时间控制都否认。

有一件事是，当我在该文本框中输入错误的日期时，会出现错误消息，但是当我在输入错误的日期后输入正确的日期时，错误消息并没有消失。

我的代码是：

```
<label for="textarea">Birth Date</label><asp:TextBox 
onkeypress="return isQuote(event);"  ID="txtbdate"  
onfocus="showCalendarControl(this);" onfocusout="return 
validdate(document.form1.txtbdate.text);"  CssClass="TextStyle1 uppercase"  
runat="server"></asp:TextBox>

<asp:MaskedEditExtender ID="MaskedEditExtender11" runat="server" 
TargetControlID="txtbdate" Mask="99-99-9999" MaskType="None" AutoComplete="true"
AcceptNegative="Left" ErrorTooltipEnabled="True" ClearMaskOnLostFocus="false"  
ClearTextOnInvalid="True" />

<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server"  
ErrorMessage="Enter Valid Date" 

ValidationExpression="^(?:(?:(?:0?[1-9]|1\d|2[0-8])\/(?:0?[1-9]|1[0-2]))\/(?:(?:1[6-9]|
[2-9]\d)\d{2}))$|^(?:(?:(?:31\/0?[13578]|1[02])|(?:(?:29|30)\/(?:0?[1,3-9]|1[0-2])))
\/(?:(?:1[6-9]|[2-9]\d)\d{2}))$|^(?:29\/0?2\/(?:(?:(?:1[6-9]|[2-9]\d)(?:0[48]|[2468]
[048]|[13579][26]))))$" ControlToValidate="txtbdate" Display="Dynamic" 
 ValidationGroup="Save" ForeColor="Red" Font-Bold="true" SetFocusOnError="true" 
  ></asp:RegularExpressionValidator> 
```

请帮忙........

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:00:35.173

（如果此答案不正确，请告诉我。尽管根据您的评论，我认为这是您的问题）

您需要`Validator`在检查条件后启用您的；像这样的东西：

```
if (txtBdate.Text.Substring(0, 2) != "   .") { // not sure why you do this?
    RegularExpressionValidator1.Enabled = true;
} 
```

现在，您需要验证页面。您可以通过调用：

```
Page.Validate(); // <--- this

if (Page.IsValid) {
    // etc..
}
else {
    // not valid..
} 
```

我很确定`Page.IsValid`会遍历`Validator`您页面中的每个内容并检查其有效性，因此您可能不需要调用`Page.Validate()`.

# c++ - 一个虚函数头，后跟一个语句

> ID：14622257
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:22:44.113
> 
> 标签：c++

我不确定我对这些说明的解释：

```
virtual int getRadioChannel(RadioRef r) const = 0;
virtual int getNumChannels() = 0; 
```

对我来说，第一个意味着函数 getRadioChannel 的调用总是返回 0，而第二个在调用函数 getNumChannels 时什么也不做。我对吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:23:34.283

> 我对吗 ？

一点都不。

这些是旨在部分形成*接口*的函数声明。

在[您的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)中阅读有关*纯虚函数*的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:25:23.160

这些都是声明*纯虚*函数；在声明它们的类中没有定义的函数。由于没有函数的定义，因此无法实例化该类；只有定义了这些函数的类的子类才*可以。*

在第一种情况下，它也是`const`函数——本质上，你保证不修改函数体中的对象。（具体来说：`this`函数体中的指针将是`const`，并且该函数可以在对象上调用`const`。）第二种情况只是“正常”的纯虚函数声明。

你可以在这里阅读更多关于[纯虚函数](http://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/)和[const 函数的信息](http://www.learncpp.com/cpp-tutorial/810-const-class-objects-and-member-functions/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:23:48.677

你错了，`=0`表示**纯虚函数**。

这使得类抽象并强制所有非抽象派生类实现标记为纯的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:25:32.600

```
virtual int getRadioChannel(RadioRef r) const { return 0; } 
```

这就是总是返回 0 的函数的样子。正如其他人指出的那样，将函数等同于 0，使其成为[纯虚函数](http://en.wikipedia.org/wiki/Virtual_function#Abstract_classes_and_pure_virtual_functions)。

> 纯虚函数或纯虚方法是派生类需要实现的虚函数，如果该类不是抽象的。包含纯虚方法的类称为“抽象”；它们不能直接实例化。只有当所有继承的纯虚方法都由该类或父类实现时，才能直接实例化抽象类的子类。

# c# - 使用 QuickFix/n 读取 FIX 日志文件

> ID：14622258
> 
> 赞同：0
> 
> 时间：2013-01-31T09:22:52.263
> 
> 标签：c#, file, quickfix

我有一个 FIX 格式的日志文件和一个我自己用 C# 构建的数据结构。我想要做的是在 QuickFix 中运行日志文件并构建我自己的事件侦听器。在那个监听器中，我会将 FIX 类型转换为我需要的类型并填充我的 DS。

我一直在浏览 QuickFix 教程和示例，但无法弄清楚。我不需要它通过网络或类似的东西。

请帮助并谢谢你， Yonatan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:55:29.633

QuickFIX 端口均不提供此功能。充其量，您可以构建一个简单的应用程序，它可以逐行读取日志文件并将每一行传递给 QF 的`Message(string)`构造函数。要将其转换`Message`为更具体的类型，您可以将其提供给更具体类型的构造函数，例如`ExecutionReport(Message)`.

以上是针对原始 C++ QF 的。其他端口（QF/J 和 QF/n）应该有类似的机制。

您将无法使用 MessageCracker 来触发 OnMessage() 事件，因为您实际上并没有在监听会话。相反，我建议使用开关或基于消息类参数进行重载。

# java - Mule 1.3 中的线程是如何工作的？

> ID：14622264
> 
> 赞同：1
> 
> 时间：2013-01-31T09:23:09.930
> 
> 标签：java, multithreading, tcp, mule

我有一个 tcp 端点，它将消息发送到 java 组件，该组件调用 db 中的存储过程并对结果进行一些处理并将其返回到相同的 tcp。我知道每个 tcp 请求都会在它自己的线程中，但是如果消息来自同一个连接，这是否意味着我只有一个线程，我需要配置 mule 以使 java 组件成为多线程。我发现的唯一内容是：http: [//www.mulesoft.org/documentation/display/MULE3USER/Tuning+Performance#TuningPerformance-pooling](http://www.mulesoft.org/documentation/display/MULE3USER/Tuning+Performance#TuningPerformance-pooling) ，我无法理解：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:04:05.093

在 Mule 3 中，您在问题中链接了其文档，消息接收器（即入站端点）通常有一个专用的工作管理器，其中分配有一个线程池来并行处理请求（例外是 JMS 连接器，它的作用有点不同）。

因此，在您的情况下，默认情况下，TCP 入站端点将分配 16 个线程来处理命中单个打开的 TCP 套接字的传入请求。

无需使用池化组件。

编辑：问题是关于 Mule 1.3，它非常古老，并且具有非常不同的线程模型。在这种情况下，每个端点都有不同的线程池。

# scala - 是否可以（重新）将接收器绑定到代码块中？

> ID：14622271
> 
> 赞同：2
> 
> 时间：2013-01-31T09:23:30.937
> 
> 标签：scala, dynamic, compile-time, scala-macros

## 问题

这个问题的动机是试图为[这个问题](https://stackoverflow.com/questions/14607279/scala-dsl-nested-block-referencing-parent/)找到一个解决方案。

假设您想使用以下语法构建层次结构：

```
root {
  subA {
    subB("b1.1")
    subB("b1.2")
  }
} 
```

构造 DSL 应该是类型安全的，也就是说，不能将 a`subB`直接嵌套在 中`root`，或者将 a 嵌套`subA`在另一个 中`subA`。因此，我的想法是有一个方法`root`返回一个定义方法的对象`subA`，而后者又返回一个定义的对象`subB`。

我现在想要的是传递给的代码块`root`，即

```
 subA {
    subB("b1.1")
    subB("b1.2")
  } 
```

被执行使得 的调用`subB`被绑定到由 . 创建的对象`root`。基本上是这样的

```
root { r: Root =>
  r.subA { sa: SubA =>
    sa.subB("b1.1")
    sa.subB("b1.2")
  }
} 
```

但不必使接收者`r`和`sa`明确的。

**问题：**`this`在 Scala 中是否可以在代码块中重新绑定接收器，尤其是隐式接收器- 可能使用宏？

## 其他方法

[本文](http://weblogs.java.net/blog/cayhorstmann/archive/2012/12/13/dynamic-types-scala-210)描述了一个外观相似的 XML 树构造 DSL。它们的实现基于该`Dynamic`特性，生成的 DSL 语法如下所示：

```
xml html {
  xml head {
    xml title "Search Links"
  }
} 
```

但是，这种方法需要显式的接收器（这里是 object `xml`），更严重的是，我认为它不是类型安全的，因为它会静态地阻止您将`html`节点嵌套在`title`节点中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:30:30.517

我不确定这是否可用，但它看起来与您编写的代码非常相似。我已将 and 添加并`,`更改为`{`and 。`}``(``)`

```
trait RootElement
trait SubAElement

def root(f:(() => RootElement)*) = ???
def subA(f:(() => SubAElement)*):() => RootElement = ???
def subB(s:String):() => SubAElement = ???

root(
  subA (
    subB("b1.1"),
    subB("b1.2")
  )
) 
```

我不确定您想如何使用它，如果您提供的话，我可以尝试根据用例制作更具体的版本。

* * *

## 编辑

> 重新绑定接收器，尤其是隐式的 this-receiver，是否可以在 Scala 中的代码块内 - 可能使用宏？

不，据我所知，这不可能开箱即用。您可能可以使用宏来做到这一点，但我无法帮助您。我对宏的有限知识告诉我这将是一次冒险。

为了在没有宏的情况下达到相同的效果，我创建了一个小示例。我已经删除了懒惰以使其更简洁。

```
class Root {
  def subA(subA: SubA) = {
    // do something with subA
  }
}

class SubA {
  def subB(s: String) = {
    // do something with subB
  }
}

case class RootElement(value: SubA)
case class SubAElement(value: String)

def root(rootElems: (RootElement)*): Root = {
  val r = new Root

  rootElems foreach { sub =>
    r.subA(sub.value)
  }
  r
}

def subA(subElems: SubAElement*): RootElement = {
  val sA = new SubA
  subElems foreach { sub =>
    sA.subB(sub.value)
  }
  RootElement(sA)
}

def subB(s: String): SubAElement = SubAElement(s)

root(
  subA(
    subB("b1.1"),
    subB("b1.2")
  )
) 
```

# android - 相机或画廊意图破坏某些设备上的旧活动

> ID：14622279
> 
> 赞同：13
> 
> 时间：2013-01-31T09:23:49.560
> 
> 标签：android, android-intent, android-activity

我正在开发使用 WebView 显示其内容的应用程序。但是，它需要打开相机或画廊才能选择图片：

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, 1);

    Intent galleryIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(galleryIntent, 2); 
```

它在大多数设备上都可以正常工作，但在 HTC One 和其他少数设备上，这两种意图都会破坏我的活动，因此在返回时会重新加载 webview。我没有`noHistory`flag `AndroidManifest.xml`。什么可能导致该问题？我可以避免在这里破坏我的活动吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T11:12:27.243

通常，当其他应用程序运行时，Android 会杀死您的 Activity。

您必须在 onSaveInstanceState 中保存 Activity 状态，并在重新创建 Activity 时在 onRestoreInstanceState 或 onCreate 中恢复状态。

要恢复 WebView 的状态，您可以使用 cookie 和会话并保存上次打开的 url。当重新创建活动时，只需导航 WebView 最后保存的 url 并处理来自相机的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T05:23:08.033

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, 1); 
```

通过查看您的代码，我可以判断您的座右铭是捕获图像并稍后使用它。

这是一个已知的错误，解决方案是您需要为您的应用程序创建一个单独的文件夹，并且在捕获之前，您需要确保该文件已创建并且您为相机意图提供的路径相同

```
Uri uriSavedImage=Uri.fromFile(new File("/sdcard/seperate/newImage.png"));
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra("output", uriSavedImage);
startActivityForResult(cameraIntent, 1); 
```

参考：[android中相机意图问题的图像](https://stackoverflow.com/questions/10825810/image-from-camera-intent-issue-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:32:30.497

也许是一个愚蠢的建议。但是由于它被破坏了，这意味着设备内存不足。

如果唯一的烦恼是 webview 重新加载，也许你可以通过缓存内容来解决这个问题？

例如，在您的活动的 onStop() 方法中，获取 webview 的内容并将其存储在某处。临时文件，sqlite，... 并在 onCreate 检查是否有缓存（也许它有多旧），如果需要，将其放入 webview 中。

从 webview 获取 html 代码的教程：http: [//lexandera.com/2009/01/extracting-html-from-a-webview/](http://lexandera.com/2009/01/extracting-html-from-a-webview/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T12:44:08.170

如果我没有错，您正在从设备打开相机。**您是否检查过其他应用程序没有获取相机？**您必须**在开始相机活动之前获取相机**可能是使用相机实例的其他应用程序。您必须在**销毁**或**停止活动方法中****释放相机实例**，以便下次它可以用于其他应用程序使用它或供您的应用程序使用.

# joomla2.5 - Joomla 2.5 在视图中加载不同的模型

> ID：14622281
> 
> 赞同：0
> 
> 时间：2013-01-31T09:23:53.363
> 
> 标签：joomla2.5, joomla-extensions

> **可能重复：**
> [如何在 joomla MVC 组件中使用多个模型](https://stackoverflow.com/questions/7159536/how-to-use-multiple-models-in-joomla-mvc-component)

在[J!2.5 教程](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Basic_backend)中，视图中仅加载了一个模型（默认模型）。J!1.5 中的片段不再与本教程中的技术一起使用。这是我的扩展资料。 *控制器.php*

```
 function display($cachable = false) 
{
    // set default view if not set
    $input = JFactory::getApplication()->input;
    JRequest::setVar('view', JRequest::getCmd('view', 'HelloWorlds'));

    // We will add a second model "bills"
    $model = $this->getModel ( 'helloworlds' ); // get first model
    $view  = $this->getView  ( 'helloworlds', 'html'  ); // get view we want to use
    $view->setModel( $model, true );  // true is for the default model  

    $billsModel = &$this->getModel ( 'mycomponents' ); // get second model   
    $view->setModel( $billsModel );             

    // call parent behavior
    parent::display($cachable);
} 
```

这是我的观点。 *意见/helloworlds.view.hml.php*

```
 function display($tpl = null) 
{
    // Get data from the model
    $model = $this->getModel();
    $items = $this->get('Items');
    $pagination = $this->get('Pagination');

    $model2 = &$this->getModel('mycomponents');
    $items2 = $model2->get('Items');
    $pagination2 = $model2->get('Pagination');

    // Check for errors.
    if (count($errors = $this->get('Errors'))) 
    {
        JError::raiseError(500, implode('<br />', $errors));
        return false;
    }
    // Assign data to the view
    $this->items = $items;
    $this->pagination = $pagination;
    $this->items2 = $items2;
    $this->pagination2 = $pagination2;

    // Display the template
    parent::display($tpl);
} 
```

但不幸的是，没有加载model2。这里发生了什么？我的错误在控制器中吗？是否在控制器中正确设置了两个模型？那么我在视图中的代码呢？我是否必须以这种方式加载模型（从 J!1.5 已知）？

最好的问候比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:18:44.953

我知道了。解决方案是在控制器中注册您的模型（就像我已经做过的那样）。

然后在视图中调用它

```
 $items2 = $this->get('Items', 'MyComponents'); 
```

代替

```
 $items = $this->get('Items'); 
```

以下是我的完整视图来源：

```
 function display($tpl = null) 
{
    // Get data from the model
    $items = $this->get('Items');
    $pagination = $this->get('Pagination');

    $items2 = $this->get('Items', 'MyComponents');
    $pagination2 = $this->get('Pagination', 'MyComponents');

    // Check for errors.
    if (count($errors = $this->get('Errors'))) 
    {
        JError::raiseError(500, implode('<br />', $errors));
        return false;
    }
    // Assign data to the view
    $this->items = $items;
    $this->pagination = $pagination;
    $this->items2 = $items2;
    $this->pagination2 = $pagination2;

    // Display the template
    parent::display($tpl);
} 
```

# excel - 如果 B 列单元格值包含 A 单元格值

> ID：14622282
> 
> 赞同：0
> 
> 时间：2013-01-31T09:23:54.337
> 
> 标签：excel, excel-formula

我在excel中有两列A和B，我希望第三列输出如下所示

```
 A    B         C
    -------------------
    a |  sd      | a.com
    d |  a.com   |
    f |  g.in    |
    g |  ad      | g.in 
```

B 列有“a.com”，其中包含“a”。所以 C 列它显示 a.com .B 列没有包含“d”。所以列单元格是空的等等..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:32:02.403

将以下公式放入 C 列：

```
=IFERROR(INDEX($B$1:$B$4,MATCH(A1,LEFT($B$1:$B$4,SEARCH(".",$B$1:$B$4)-1),0))," ")

```

这是一个数组公式，所以输入时按`Ctrl`-`Shift`而`Enter`不是`Enter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:18:12.467

在复制下来的 C1 中试试这个公式

`=IFERROR(VLOOKUP(A1&".*",B$1:B$4,1,0),"")`

`IFERROR`函数仅适用于 Excel 2007 或更高版本 - 对于早期的 excel 版本，请尝试

`=LOOKUP("zzz",IF({1,0},"",VLOOKUP(A1&".*",B$1:B$4,1,0)))`

# php - facebook喜欢或分享其他页面的数量

> ID：14622284
> 
> 赞同：3
> 
> 时间：2013-01-31T09:24:01.920
> 
> 标签：php, facebook, parsing

而是在 facebook 上查询我想要解析网页的数据，但问题是 facebook 数据是通过 ajax 调用加载到客户端的，所以我认为我无法在网页上的第一个查询中获取。有没有办法在没有查询 fb 的情况下在页面上获得 facebook 喜欢或分享？

我想以某种方式用 PHP 解析网页，我只是在这里查看，但这不是我想要的：[link](https://stackoverflow.com/questions/6137414/how-to-fetch-facebook-likes-share-comments-count-from-an-article)

**编辑**

我尝试的是：

```
<?php
    $source_url = "https://www.facebook.com/pages/%D0%9F%D1%83%D0%BB%D1%81%D0%B0%D1%80/177521286028";

    $fql  = "SELECT url, normalized_url, share_count, like_count, comment_count, ";
    $fql .= "total_count, commentsbox_count, comments_fbid, click_count FROM ";
    $fql .= "link_stat WHERE url = 'http://pulsar.com.mk'";

    $apifql="https://api.facebook.com/method/fql.query?format=json&query=".urlencode($fql);
    $json = file_get_contents($apifql);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:25:45.837

您可以尝试使用 simpleXML [http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

# firefox - 为什么 event.relatedTarget 不适用于 Firefox 中的 focusin/focusout 事件？

> ID：14622286
> 
> 赞同：10
> 
> 时间：2013-01-31T09:24:14.337
> 
> 标签：firefox, dom, event-handling, focus

我需要在我的 focusin 函数中找到以前关注的项目。这是一个示例代码：

```
$('#id').on('focusin', function(event) {
  //console.log(event.relatedTarget.nodeName);    //doesn't work
} 
```

我已经进行了一些研究，虽然我看到一些人在帖子中说这仅适用于鼠标事件，如 mousedown 等，但我遇到了一些来自知名来源的文章，这些文章让我相信这应该有效。

1.  [https://developer.mozilla.org/en-US/docs/DOM/event.relatedTarget](https://developer.mozilla.org/en-US/docs/DOM/event.relatedTarget) Firefox 在这里**特别**提到了 event.relatedTarget 如何在 'focusin' 事件中返回“哪个 EventTarget 失去焦点”。 *Firefox 是我为此使用的浏览器。*

2.  [http://www.w3.org/TR/DOM-Level-3-Events/#events-FocusEvent](http://www.w3.org/TR/DOM-Level-3-Events/#events-FocusEvent)在这个书签你可以看到每个 FocusEvent 都有一个只读属性，称为相关目标。

3.  [http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focusIn](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focusIn)在这里，他们还特别声明“FocusEvent”有一个名为“relatedTarget”的属性，即“事件目标丢失焦点（如果有的话）。”

那么我在这里做错了什么？它一定是某种愚蠢的语法错误或什么的。我找不到 event.relatedTarget 的 nodeName。

更新：我可以让它在 IE 中使用，但这在 Firefox 中不起作用？？？

```
 $("#id").on('focusin', function(event) {
   $('#textbox').text(event.relatedTarget.nodeName);
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T11:48:51.020

尽管 MDN 提到了`focusin`/`focusout`事件的相关目标，但不幸的是，没有任何版本的 FireFox 实际上支持这两个事件。jQuery 只是为您模拟它们，但由于缺乏本机支持，您不会在 FF 上获得相关目标。

[在此处](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/focusout)或[此处](http://www.quirksmode.org/dom/events/index.html#t09)查看兼容性信息。

# angularjs - 将 BreezeJS 与 AngularJS 一起使用时出错

> ID：14622288
> 
> 赞同：1
> 
> 时间：2013-01-31T09:24:26.273
> 
> 标签：angularjs, breeze

将 BreezeJS 与 AngularJS 一起使用会出错。例如，在 ng-repeat 中使用“过滤器”时，控制台会报告：堆栈空间不足。

重现步骤

1.  获取 Todo-Angular BreezeJS 示例并在 VS 2012 中打开。
2.  在 index.html 之前添加`<ul>`

```
 <div>
    <input ng-model="query" type="search" placeholder="search" />
    </div> 
```

1.  将以下代码添加到 li 元素上的 data-ng-repeat

```
 <li data-ng-repeat="item in items | filter:query"> 
```

filter:query 应该根据输入中的文本过滤列表，但事实并非如此。在 IE 10 中，控制台报告“堆栈空间不足”。在 Chrome 中，控制台报告“范围错误”：

```
(anonymous function) angular.js:5582
(anonymous function) angular.js:4679
Scope.$digest angular.js:7739
Scope.$apply angular.js:7926
listener angular.js:11228
v.event.dispatch jquery-1.8.3.min.js:2
o.handle.u 
```

当你使用 angular.copy(src, dest); 其中 src 是由 BreezeJS 创建的，我看到另一个 stack_overflow 错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T22:09:20.893

这是行不通的，因为您要求 Angular 将搜索文本**与 TodoItem 的每个属性相匹配**。

Breeze 实体的属性包括`entityAspect`有一个称为属性的属性，该属性`entity`指向`TodoItem`实例......并且在你周围一直走，直到堆栈溢出（双关语）。

您需要使用进行特定比较的过滤器**功能**。试试这个：

在***Index.html中***

```
<div>
  <input data-ng-model="searchText" type="Search" placeholder="search" />
</div>
<ul>
    <li data-ng-repeat="item in items | filter:itemFilter">
    ... ETC。 ...

```

在***控制器.js***

```
$scope.searchText = "";

// 注意：这被调用了很多！
$scope.itemFilter = function (todoItem) {
    var searchText = $scope.searchText;
    // if there is search text, look for it in the description; else return true
    return searchText ?
        -1 != todoItem.Description.toLowerCase().indexOf(searchText.toLowerCase()) :
        true;
};

```

Works like a charm on my machine :)

p.s.: your mishap with `angular.copy()` has the same cause ... it does a depth copy of every property and entities tend to have circular references.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-15T13:34:48.587

Ok, i implemented a custom filter, that excludes navigation properties. It just filters in the currently received breeze entity.

```
(function () {
'use strict';

angular.module('appFilter', []).filter('breezeFilter', function () {

    function contains(searchString, searchTerm) {
        if (!searchString) return false;
        return searchString.toString().toLowerCase().indexOf(searchTerm.toLowerCase()) != -1;
    }

    function getKeys(entity) {
        var names = [];
        var properties = entity.entityAspect.extraMetadata.properties;
        for (var property in properties) { names.push(property); }
        return names;
    }

    function search(entity, searchTerm) {
        var found = false;
        if ("entityAspect" in entity) {
            var keys = getKeys(entity);
            for (var i = 0; i < keys.length && !found; i++) {
                if (keys[i].slice(-2) !== "Id") {
                    var obj = entity[keys[i]];

                    switch (typeof obj) {
                        case 'object':
                            if (obj && !('navigationProperty' in obj)) {
                                found = search(obj, searchTerm);
                            }
                            break;
                        case 'number':
                        case 'string':
                            found = contains(obj, searchTerm);
                            break;
                        case 'boolean':
                        default:
                    }
                }
            }
        }
        return found;
    }

    return function (breezeEntities, expression) {
        if (!expression || expression.length < 2) return breezeEntities;
        var filtered = [];
        angular.forEach(breezeEntities, function (entity) {
            if (search(entity, expression)) {
                filtered.push(entity);
            }
        });
        return filtered;
    }
});
})(); 
```

I hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T19:52:10.367

I just had the same problem and I solved by using query projections in breeze, i.e. the "select" clause. It returns pure JavaScript object as opposed to the "wrapped" breeze entities.

# ruby-on-rails - 我是否应该在我的 Heroku 推送回购中保留从时间开始以来的所有迁移？

> ID：14622290
> 
> 赞同：0
> 
> 时间：2013-01-31T09:24:29.357
> 
> 标签：ruby-on-rails, heroku

过去（没有 Heroku），我在运行迁移文件后就删除了它们，并且不希望回滚。但是，我注意到 Heroku 喜欢在每次运行时运行每次迁移

```
heroku run rake db:migrate 
```

如果我删除文件会感到不安吗？

# javascript - Sencha Touch2 列表中的水平滚动

> ID：14622291
> 
> 赞同：0
> 
> 时间：2013-01-31T09:24:30.917
> 
> 标签：javascript, cordova, extjs, sencha-touch-2

![在此处输入图像描述](../Images/3d1335dfedeefd5a228c5f3746dcf7c2.png)我有一个包含以下配置的列表，

```
var grid = Ext.create('Ext.List', {
            scrollable: {
            direction: 'horizontal',
            directionLock: true
        },

    store: compStore,
    itemTpl: '<table width="2000px">
<tr><td width="500px" style="border 1px solid black">{company}</td>
<td width="200px">{price}</td>
<td width="200px">{change}</td>
<td width="200px">{pct}</td>
<td width="200px">{updated}</td>
</tr></table>'

    }); 
```

我只能看到屏幕上的前 3 个字段（它们是：公司、价格、更改），其余的列表列我无法看到，因为表格太大而无法放入视图空间。

当我滚动列表（水平）时，我可以看到其他字段，但释放后，它又消失了。

正如您在所附图像中看到的那样，列表仅显示一些列，我无法（水平）滚动列表。

当列表中的内容宽度较大时，如何水平滚动列表。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:59:32.277

利用

```
scrollable: {
        direction: 'both',
        directionLock: true
}, 
```

# javascript - Jquery数据表按文本过滤

> ID：14622294
> 
> 赞同：0
> 
> 时间：2013-01-31T09:24:36.690
> 
> 标签：javascript, jquery, jquery-data

我正在使用下面的代码从 jquery 数据表中过滤记录。我的数据表格式是这样的

```
 var aDataSet = [['1', 'GOld', 'G-110,G-112,G-123', 'G1-001,G1-005,G1-008'],
                ['2', 'GOld type 1', 'G1-001,G1-003,G-123', 'G-110,G-112,G-156']];

 $(document).ready(function () {
                oTable = $('#example').dataTable();
                oTable.fnFilter('G-110,G-112');
            }); 
```

假设我给上面的函数输入像'G-110，G-112'这样的输入值意味着这样的输出

显示以上两条记录。

假设我的输入是 G1-001,G1-003,G-156 表示只显示第二条记录。

我想过滤数据表行中存在的大部分项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:42:55.657

你必须包括检查`regexp`in `fnFilter function`：

`fnFilter`函数具有以下元素`parameter`：

*   {string}：过滤行的字符串
*   {int|null}：限制过滤的列
*   {bool} [default=false]: 是否视为正则表达式
*   {bool} [default=true]: 是否执行智能过滤
*   {bool} [default=true]：在其输入框中显示输入全局过滤器
*   {bool} [default=true]: 不区分大小写匹配 (true) 或不 (false)

所以你的过滤器功能应该是这样的：

```
oTable.fnFilter('G-110,G-112',null,true); 
//this will check your row based on regular expression also. 
```

# solr - 将文档添加到 Solr 时修剪字段

> ID：14622297
> 
> 赞同：0
> 
> 时间：2013-01-31T09:24:48.230
> 
> 标签：solr, indexing, trim, dataimporthandler

我正在使用 Solr 的[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)来索引数据库中的某些数据。但是，数据库表方案使用`CHAR`-fields，因此它们具有固定的宽度并有一些尾随空格。

我正在尝试使用`solr.TrimFilterFactory`. 在我的 Solr`schema.xml`中，我使用以下字段类型来索引数据：

```
<fieldType name="string" class="solr.TextField" sortMissingLast="true" omitNorms="true">
    <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory" />
        <filter class="solr.TrimFilterFactory" updateOffsets="true" />
    </analyzer>
</fieldType> 
```

所以现在我要添加一个文档，例如：

```
<add>
    <doc>
        <field name="test">Test       </field>
    </doc>
</add> 
```

而且我期望测试字段中的尾随空格被删除，但是当我查询: 时`test:Test*`，我得到：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
    </lst>
    <result name="response" numFound="1" start="0">
        <doc>
            <str name="test">Test       </str>
        </doc>
    </result>
</response> 
```

如您所见，尾随空格没有被删除。我一定是做错了什么或误解了过滤器的概念。但我的**期望**是查询会返回：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
    </lst>
    <result name="response" numFound="1" start="0">
        <doc>
            <str name="test">Test</str>
        </doc>
    </result>
</response> 
```

所以我的问题是如何确保在索引这些文档时，所有尾随空格都被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:58:40.113

Solr 分析器/过滤器不会修改存储的值。
只有索引值会被修改。
所以`TrimFilterFactory`不会改变存储的值，并且会返回与输入相同的值。

如果使用 DIH，请检查[ScriptTransformer](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)以在将值馈送到 Solr 之前对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T17:06:19.987

使用较新版本的 solr，您可以使用`TrimFieldUpdateProcessorFactory`

```
<updateRequestProcessorChain name="skip-empty" default="true">

   <processor class="TrimFieldUpdateProcessorFactory" />
   <processor class="RemoveBlankFieldUpdateProcessorFactory" /> 

   <processor class="solr.LogUpdateProcessorFactory" />
   <processor class="solr.RunUpdateProcessorFactory" />    
</updateRequestProcessorChain> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-26T21:49:49.290

我正在根据以上 Solr 8.4 和最新版本详细说明此解决方案。他们制作的很容易实现。

我有同样的问题，我的大部分字段都有尾随空格，并且在数百万个数据文档中我有很多这样的字段。

我在**SolrConfig.xml**中添加了下面的行 搜索现有的下面的标签并添加 TrimFieldUpdateProcessorFactory 如下所示。只有一行。

```
<updateRequestProcessorChain .....>
  <processor class="TrimFieldUpdateProcessorFactory" />

</updateRequestProcessorChain> 
```

希望这很容易。

# iphone - 应用商店更新后的核心数据

> ID：14622298
> 
> 赞同：2
> 
> 时间：2013-01-31T09:24:58.167
> 
> 标签：iphone, ios, xcode, core-data

我们在应用商店发布了一个应用，最近在核心数据中添加了新实体以进行下一个版本更新。此时我们并不担心迁移，因为所有用户的数据都存储在我们的服务器中。

我的问题是更新会覆盖以前版本的核心数据吗？如果没有，如何清除旧版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:51:51.557

简短的回答是：是的，更新将覆盖之前版本的 Core Data。

更准确地说，它将迁移到新的数据模型并因此调整 sqlite 存储，根据需要创建新的表和字段。此版本的 sqlite 存储将与旧版本不兼容。旧版本的 sqlite 商店将消失。

这意味着当您进行服务器同步时，将新信息插入 Core Data 的应用逻辑也必须更新以反映新模型。

# java - 动态重新加载 jar 文件内容

> ID：14622300
> 
> 赞同：2
> 
> 时间：2013-01-31T09:25:00.463
> 
> 标签：java, dynamic, bytecode, dynamic-class-loaders

我的应用程序的类路径中有一个 jar 文件。在运行时，我将新类添加到 jar 文件中，有时还修改现有类的字段/方法。目前我正在使用 URLClassLoader 动态加载类。动态添加的新类已正确加载，我可以在运行时使用它们。但它无法重新加载在运行时修改的现有类。我阅读了许多文章，其中指出我们需要显式处理重新加载，因为一旦加载了类，在对该类的所有引用都被销毁之前不会重新加载。我还尝试了我找到的示例代码，但它们都不起作用。

任何人都可以建议我重新加载的正确方法吗？任何相同的示例代码都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:29:05.337

通常要重新加载一个类，您需要卸载整个类加载器。即删除对该类加载器加载的所有类的所有引用。

另一种选择是使用检测来更改现有类的字节码。这通常带有限制，并且更改字段是您无法做到的。即，必须以某种方式翻译该类型的对象。

我通常做的是提供非常快速启动/重启的服务。`Run`通过这种方式，您可以通过在我的 IDE 中按 轻松重新启动需要更新代码的进程。这也最大限度地减少了部署时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-09T08:15:15.660

1.  原则上，已经加载的类不能用相同的类加载器重新加载。
2.  对于新的加载，有必要创建一个新的类加载器，从而加载类。
3.  使用`URLClassLoader`有一个问题，那就是 jar 文件保持打开状态。
4.  如果您通过不同的实例从一个 jar 文件加载了多个类，`URLClassLoader`并且您在运行时更改了 jar 文件，您通常会收到此错误：`java.util.zip.ZipException: ZipFile invalid LOC header (bad signature)`. 错误可能不同。
5.  为了不出现上述错误，需要`close`在所有`URLClassLoader`使用给定jar文件的s上使用该方法。但这是一个实际上会导致整个应用程序重新启动的解决方案。

更好的解决方案是修改`URLClassLoader`jar 文件的内容，以便将其加载到 RAM 缓存中。这不再影响`URLClassloader`从同一个 jar 文件中读取数据的其他 s。然后可以在应用程序运行时自由更改 jar 文件。例如，您可以`URLClassLoader`为此目的使用以下修改：[in-memory URLClassLoader](https://github.com/kotalr/b2b-jcl)

# map-projections - 如何将mapinfo投影转换为proj4

> ID：14622302
> 
> 赞同：2
> 
> 时间：2013-01-31T09:25:02.320
> 
> 标签：map-projections, proj, mapinfo

我有一些 MapInfo 导出的投影字符串，但我找不到将它们转换为 proj4 字符串的方法，有人可以帮我吗？

这是字符串：

"CoordSys 地球投影 8, 104, "m", 29, 0, 1, 0, 0"

"CoordSys 地球投影 8, 150, "m", 27, 0, 1, 0, 0"

谢谢，

埃德加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:55:34.590

用谷歌搜索一下：

```
+proj=tmerc +ellps=WGS84 +lon_0=29
+proj=tmerc +ellps=WGS84 +lon_0=27 
```

关联：

MapInfo 投影和基准类型：[http ://reference1.mapinfo.com/software/mapinfo_pro/english/16.0/MapInfoProUserGuide.pdf](http://reference1.mapinfo.com/software/mapinfo_pro/english/16.0/MapInfoProUserGuide.pdf)

笔记：

1.  WGS84 和 Hartebeesthoek 基准是重合的。
2.  无需指定默认 proj4 参数。

# python - Python将变量字符串作为文件名插入

> ID：14622314
> 
> 赞同：22
> 
> 时间：2013-01-31T09:25:56.797
> 
> 标签：python, file, python-2.7

每次我的脚本运行时，我都会尝试创建一个具有唯一文件名的文件。我只打算每周或每月这样做。所以我选择使用日期作为文件名。

```
f = open('%s.csv', 'wb') %name 
```

是我得到这个错误的地方。

```
Traceback (most recent call last):
File "C:\Users\User\workspace\new3\stjohnsinvoices\BabblevoiceInvoiceswpath.py", line 143,      in <module>
f = open('%s.csv', 'ab') %name
TypeError: unsupported operand type(s) for %: 'file' and 'str' 
```

如果我使用静态文件名，它可以工作，打开函数是否有问题，这意味着你不能传递这样的字符串？

name 是一个字符串，具有以下值：

```
31/1/2013BVI 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-31T09:27:34.907

您需要直接放在`% name`字符串之后：

```
f = open('%s.csv' % name, 'wb') 
```

您的代码不起作用的原因是因为您正在尝试`%`一个文件，该文件不是字符串格式，而且也是无效的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T09:27:27.293

你可以做类似的事情

```
filename = "%s.csv" % name
f = open(filename , 'wb') 
```

或者`f = open('%s.csv' % name, 'wb')`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T09:33:25.513

并使用新的字符串格式化方法...

```
f = open('{0}.csv'.format(name), 'wb') 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-15T08:21:32.383

与peixe非常相似。
如果您作为参数添加的变量按出现顺序排列，则不必提及数字

```
f = open('{}.csv'.format(name), 'wb') 
```

另一种选择 - f 字符串格式（[ref](https://www.datacamp.com/community/tutorials/f-string-formatting-in-python)）：

```
f = open(f"{name}.csv", 'wb') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-09T16:15:39.850

更好的是 python 3 中的 f 字符串！

```
f = open(f'{name}.csv', 'wb') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T23:29:15.377

f = open('{}.csv'.format(), 'wb')

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-25T09:42:38.507

```
import hashlib

filename = file_for_download
with open(filename, "rb") as f:
    bytes = f.read()  # read entire file as bytes
    msg_hash = hashlib.sha256(bytes).hexdigest();
    print(f"MSG_HASH = {msg_hash}") 
```

# c - sscanf 没有设置 int 的值

> ID：14622317
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:25:59.263
> 
> 标签：c

我将一个数字 int 传递给此方法，但它没有将 int 存储在调用 intchange 方法的方法中。任何指针？

```
int intchange(const char *prompt, int number){
  char buffer[LINESIZE];

  while(1){
    printf("%s", prompt);
    if(!fgets(buffer,LINESIZE, stdin)){
      clearerr(stdin);
      return 0;
    }
   if(sscanf(buffer, "%d", &number) == 1){
     /*exit variable */
   if(number== -1)
      return 0;
   else if (number<= 110 && number>= 0)
      return 1;
       }
     }
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:29:55.303

为了使调用者可以看到更改，您需要将 in 的地址*传递*给. 否则，调用者提供的副本将被更改，而不是作为 C 提供的调用者按值传递：`int``intchange()``int``int`

```
int intchange(const char* prompt, int* number)
{
    /* snip */
    if(sscanf(buffer, "%d", number) == 1){ /* Removed address of operator. */

        if(*number == -1)                  /* Dereference to query int value. */
        /* snip */
    }
} 
```

调用：

```
int i;
if (intchange("14", &i))
{
    printf("i=%d\n", i);
} 
```

请参阅[C 是否有“按引用传递”？](http://c-faq.com/ptrs/passbyref.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:32:26.613

使用指针作为输入参数号：

```
int intchange(const char *prompt, int *number){

if(sscanf(buffer, "%d", number) == 1){

if(*number== -1)
      return 0;
   else if (*number<= 110 && *number>= 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:32:54.373

当您将参数传递给函数时，您传递的是它的副本。因此，在您的情况下，`int number`参数只是 int 的副本，它在您的函数中被分配，然后在函数返回时消失。

解决方案是这样的：

```
int intchange(const char *prompt, int* pNumber) {
  char buffer[LINESIZE];
  while (1) {
    printf("%s", prompt);
    if (!gets(buffer,LINESIZE, stdin)) {
      clearerr(stdin);
      return 0;
    }
    int number;
    if(sscanf(buffer, "%d", &number) == 1) {
      /*exit variable */
      *pNumber = number;
      if(number== -1)
        return 0;
      else if (number<= 110 && number>= 0)
        return 1;
    }
  }
} 
```

在这种情况下，您传递的是（在参数中）的*地址*，可以通过指针进行修改。然后你会这样称呼它：`int``pNumber`

```
int n;
intchange("prompt", &n); 
```

然后`n`会有值输入。另见：[http ://courses.washington.edu/css342/zander/css332/revisit.html](http://courses.washington.edu/css342/zander/css332/revisit.html)

# c++ - OSG：从节点获取变换矩阵

> ID：14622323
> 
> 赞同：8
> 
> 时间：2013-01-31T09:26:09.083
> 
> 标签：c++, openscenegraph

首先，我必须为我的英语道歉。

我正在开发一个应用程序，我们必须在每个时刻都知道每个节点的属性（位置、旋转......），所以我考虑从场景图中获取每个节点的变换矩阵。

我的问题是我不知道该怎么做。例如，如果我有类似的东西：

```
osg::ref_ptr<osg::Node> root = osgDB::readNodeFile("cessna.osg.15,20,25.trans.180,90,360.rot.2,3,4.scale"); 
```

我想从名为 root 的 Node 对象中获取变换矩阵。我发现了类似的东西：

```
osg::Matrix mat = osg::computeWorldToLocal(this->getNodePath());        
std::cout << "X: " << mat.getTrans().x() << std::endl;
std::cout << "Rot X: " << mat.getRotate().x() << std::endl;
std::cout << "Scale X: " << mat.getScale().x() << std::endl; 
```

但我只想只有矩阵，有可能吗？

谢谢你。

PD：我正在使用 nodeVisitor 来执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-04T08:35:38.420

我认为您只想将矩阵打印到控制台。在这种情况下，请使用以下提供的流运算符`<osg/io_utils>`：

```
#include <osg/io_utils>

std:: cout << mat; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:04:37.250

你的意思是你只想要一个指向 4x4 数组的指针吗？试试 mat.ptr(); 或者您可以使用重载的 () 来获取各个元素：

```
mat(0,0) mat(0,1) mat(0,2) mat(0,3)
mat(1,0)     .        .        .
mat(2,0)     .        .        .
mat(3,0)     .        .    mat(3,3) 
```

ps，您可以使用 decompose 在一次调用中获取您的平移、旋转和缩放值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:32:36.020

好吧，你在 osg::Matrix mat 中有矩阵。我不清楚您所说的“我只想拥有矩阵”是什么意思。如果你澄清，我可能会帮助你。

# vb.net - VB.NET接口中的读写属性

> ID：14622335
> 
> 赞同：6
> 
> 时间：2013-01-31T09:26:37.043
> 
> 标签：vb.net, properties, interface

我想写一个接口类并像这样使用它

```
public Interface IFunction
  property name as string
end interface

public class ModelFunction
   implements IFunction

  public property name as string

  public sub new()

end class 
```

*编辑（因为是菜鸟而删除了以下句子，感谢@damien_the_unbeliever 指出这一点）：但这不可能得到，因为vb.net接口中的属性必须是只读或只写的（据我所知）*

我现在写了这个，但似乎有点不对：

```
public Interface IFunction
  Readlonly property getName() as string
  writeonly property writeName() as string
end interface

public class ModelFunction
 implements IFunction

 ....
end class 
```

有人对此有更好的解决方案吗？或者可以帮助我处理接口类中的属性。在这里阅读了一些关于 stackoverflow 的文章，但没有一篇为我指明正确的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T09:40:28.857

这对我来说很好：

```
Public Class Class1
    Implements Thing

    Property Gary As Int32 Implements Thing.Gary
        Get
            Return 10
        End Get
        Set(value As Int32)

        End Set
    End Property
End Class

Public Interface Thing
    Property Gary As Int32
End Interface 
```

文档页面上甚至还有一个示例[`Interface`](http://msdn.microsoft.com/en-us/library/28e2e18x.aspx)：

```
Interface IAsset
    Event ComittedChange(ByVal Success As Boolean)
    Property Division() As String 
    Function GetID() As Integer 
End Interface 
```

# genetic-algorithm - GA中的精英主义：我应该让精英被选为父母吗？

> ID：14622342
> 
> 赞同：12
> 
> 时间：2013-01-31T09:27:04.610
> 
> 标签：genetic-algorithm, evolutionary-algorithm

我对遗传算法（和其他进化算法）中的**精英概念有点困惑。**当我保留然后将1个（或更多）精英个体复制到下一代时，

*   我是否应该在当前一代的父母选择中考虑精英解决方案（创建新种群）？
*   或者，我应该使用其他人（将精英放在一边）来制造新人口，然后将精英直接复制到下一代？

如果是后者，精英主义有什么用？只是为了不失去最佳解决方案吗？因为在这个方案中，它根本无助于收敛。

例如，[在](http://www.omgwiki.org/hpec/files/hpec-challenge/ga.html "这里")交叉/突变部分下，说明精英没有参与。

（当然，关于*幸存者选择*部分也可以问同样的问题。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T12:05:31.873

精英主义只意味着最适合的少数人保证在下一代中占有一席之地——通常不会发生突变。除了自己被提出之外，他们仍然应该能够被选为父母。

那篇文章确实对精英主义采取了一种有点奇怪的方法。它建议复制最适合的个体——该个体在下一代中获得**两个预留位置。**其中一个插槽发生了变异，另一个则没有。这意味着，在下一代中，这些位置中至少有一个将作为父母重新进入普通人群，如果两者都被超越，可能还有两个。

这似乎是一种可行的方法。无论哪种方式——无论是选择精英作为父母同时让他们永存，还是复制精英然后变异一个——精英仍然应该与广大人群紧密相连，以便他们可以分享他们的有益基因。

[@Peladao 的回答](https://stackoverflow.com/a/14623460/12268505)和评论也绝对是正确的——尤其是关于保持多样性和避免过早收敛的需要，精英应该只代表一小部分人口。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T10:23:12.673

我认为没有理由不以精英为父母，除了可能在多样性方面有一点损失。（因此，与人口规模相比，精英的数量应该很少）。

由于精英是最好的个体，他们是使用交叉创造新个体的有价值的候选人，只要精英本身也被复制（不变）到新的群体中。

保持足够的多样性和避免过早的收敛总是很重要的，当精英不被用作父母时也是如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-29T15:17:06.533

正如其他有效答案所指出的那样，存在用于实施精英主义的不同方法。
一般来说，对于精英主义，只是`N`在新一代中复制个人，而不进行任何改变。然而，这些人可以通过适应度排名（真正的精英主义）来选择，以保证最好的人真正“被拯救”，或者他们可以通过比例选择来选择（正如*机器学习一书中所指出的那样*由米切尔 T.）。后者与轮盘赌选择中使用的相同，但请注意，在这种情况下，个体不用于产生新的后代，而是直接复制到新的种群中（幸存者！）。当精英主义的选择是成比例的时，我们在缺乏多样性和过早的过度拟合情况之间取得了很好的折衷。

应用真正的精英主义并避免使用“精英”作为父母会适得其反，特别是考虑到交叉操作的有效性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T05:39:47.073

简而言之，使用精英主义的要点是：

1.  人口中精英的数量不应超过总人口的 10%，以保持多样性。
2.  其中 5% 可能是下一代的直接部分，其余的应该与其他非精英人群进行交叉和突变。

# java - Google Analytics 中的 Invalid_grant

> ID：14622344
> 
> 赞同：3
> 
> 时间：2013-01-31T09:27:09.713
> 
> 标签：java, maven, google-analytics-api

我正在使用 Java 运行 Analytics-cmdline-sample 应用程序。我正在使用 Maven 2.2.1，我在 Google Api 控制台中创建了 client_Id 和 client_secret。我已确保在我的 Google Analytics（分析）帐户中，我可以访问安装了 Google Analytics（分析）的网站。

我已经撤销了 client_secret 并尝试过。

我目前收到以下错误：

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
} 
```

我已经查看了这些问题的许多解决方案，但到目前为止我还没有找到任何可以解决此错误的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T17:21:53.440

就我而言，“client_id”是问题的根源。我添加了一个“短”client_id (xxxxxxxxxxxx.apps.googleusercontent.com)。当我创建一个新的“Web 应用程序的客户端 ID”时，新的 client_id 更长（xxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com）并且错误消失了。

# checkbox - icefaces htmlselectbooleancheckbox 取消选中不起作用

> ID：14622360
> 
> 赞同：0
> 
> 时间：2013-01-31T09:27:50.753
> 
> 标签：checkbox, server-side, icefaces-1.8

我正在使用 icefaces 1.8.2，并且我的页面上有一个 HtmlBooleanCheckbox，当遇到某些情况时我需要取消选中它。

页面上的复选框是这样的

```
<ice:selectBooleanCheckbox id="accepttermscheckbox"
    binding="#{managedBean.termsAgreement}"
    validator="#{managedBean.validateAgreement}">
</ice:selectBooleanCheckbox> 
```

绑定对象是托管 bean 的属性，具有适当的 getter 和 setter

```
private HtmlSelectBooleanCheckbox termsAgreement; 
```

我可以检查代码中的复选框，验证器工作正常，我用它做的所有事情也都可以，但我只是找不到在服务器端取消选中它的方法。

我试过：

```
termsAgreement.setValue(Boolean.FALSE)
termsAgreement.setValue(null)
termsAgreement.setSelected(false) 
```

但没有任何效果。即使我对其进行调试，它也会显示 value = null 但是当页面呈现时它仍然显示为选中状态。一旦我检查它，除非我在页面上手动单击它，否则我无法取消选中它。

有趣的是

```
termsAgreement.setValue(Boolean.TRUE) 
```

工作正常。

任何人都提示我如何在绑定对象上取消选中它的服务器端？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:13:49.073

您正面临 ICEfaces/JSF 开发人员面临的一个常见问题。

首先，您需要了解 JSF 生命周期是如何工作的。

以下是一篇值得阅读的好文章。

[http://www.ibm.com/developerworks/library/j-jsf2/](http://www.ibm.com/developerworks/library/j-jsf2/)

对于您的情况，将值绑定到`<ice:selectBooleanCheckbox>`.

例如`value="#{managedBean.termsAgreed}"`.

```
<ice:selectBooleanCheckbox id="accepttermscheckbox"
    binding="#{managedBean.termsAgreement}"
    validator="#{managedBean.validateAgreement}"
    value="#{managedBean.termsAgreed}">
</ice:selectBooleanCheckbox> 
```

不要尝试更改组件的值。始终从值绑定中更改值。在此示例中，您必须更改值`termsAgreed`。

如果您的 action/actionListener 不是立即的，即 `immediate="false"，这是默认值，那么更改服务器端的值将选中/取消选中复选框组件。

如果您正在使用`immediate="true"`，那么您必须`resetValue()`在组件中调用方法，`HtmlSelectBooleanCheckbox`：

```
termsAgreement.resetValue(); 
```

理想情况下，您不应该`setValue()`在组件中调用方法。当您了解 JSF 生命周期时，您就会理解它。

希望这会有所帮助！

# eclipse - Eclipse 在鼠标指针处显示红线

> ID：14622364
> 
> 赞同：0
> 
> 时间：2013-01-31T09:28:01.427
> 
> 标签：eclipse, pointers, lines

由于我重新安装了我的电脑，使用Eclipse（JAVA和C/C++）出现了一个奇怪的现象。

在我按下 control+shift+s 的那一刻，鼠标指针附近出现两条红线。红线图片： http: [//www.flickr.com/photos/92764732@N03/8431379591/](http://www.flickr.com/photos/92764732@N03/8431379591/)

当我查看设置-> 键时，将 control+shift+s 映射为全部保存。但是，它并没有全部保存，只显示红线。

默认键映射不起作用，我已经尝试过了。

有谁知道这些红线是什么意思，以及如何摆脱它们？！

提前致谢！

杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:52:38.040

太好了，结果证明它毕竟不是 Eclipse。

Control+Shift+S 是 Mouse without Borders 的快捷方式（顺便说一句很棒的工具）！

所以，修复了那个，一键保存大量文件:)

# java - 单选按钮选择决定下一页

> ID：14622367
> 
> 赞同：0
> 
> 时间：2013-01-31T09:28:14.190
> 
> 标签：java, android, radio-button

我是 android 编程新手。我正在尝试编写我的代码，以便用户从两个单选按钮中进行选择，然后单击“下一步”按钮。下一个按钮然后根据选择的单选按钮将用户带到两个页面之一。

```
<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/Yes"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Yes" />

    <RadioButton
        android:id="@+id/No"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="No" />
</RadioGroup>

<Button
    android:id="@+id/Next"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Next" /> 
```

-

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainpage);
    } 
```

我环顾四周，没有找到任何答案。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:36:32.843

在您的 onClick() 方法中，检查单击了哪个 RadioButton，如下所示。

```
RadioButton rbtnYes = (RadioButton)findViewById(R.id.Yes);
RadioButton rbtnNo = (RadioButton)findViewById(R.id.No);
public void onClick(View v)
{
    if(rbtnYes.isChecked())
{
//Navigate to your firstpage
}
else
{
//Navigate to your second page
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:44:07.043

```
RadioButton radioYes = (RadioButton)findViewById(R.id.Yes);
RadioButton radioNo = (RadioButton)findViewById(R.id.No); 
```

// 在按钮 onClick()

```
if(radioYes.isChecked()){
    Intent intent = new Intent(CurrentActivity.this, PageOne.class);
    CurrentActivity.this.startActivity(intent);
}else if(radioNo.isChecked()){
    Intent intent = new Intent(CurrentActivity.this, PageTwo.class);
    CurrentActivity.this.startActivity(intent);
}else{
    Toast.makeText(getApplicationContext(), "Select the radio button",Toast.LENGTH_LONG).show();
} 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:37:41.623

尝试类似的东西

```
private RadioButton button1 = null;
private RadioButton button2 = null; 
```

在 onCreate() 中：

```
button1 = (RadioButton) findViewById(R.id.rbtnButton1);
button2 = (RadioButton) findViewById(R.id.rbtnButton2); 
```

在 next 的 onClicklistener 中：

```
if(button1.isChecked()) {
   // intent to page 1
} else if(button2.isChecked()) {
   // intent to page2
} 
```

另一种方法是（仍在 next 的 onClickListener 中）：

```
RadioGroup g = (RadioGroup) findViewById(R.id.YOURRADIOGROUPID);
Intent i; 
switch (g.getCheckedRadioButtonId())
{
case R.id.BUTTON1ID
 //intent page 1
i= new Intent(this, ActivityForButton1.class);
break;

case R.id.BUTTON2ID
 //intent page 2
i= new Intent(this, ActivityForButton12.class);
break;
}
StarActivity(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:39:11.420

那么你可以试试这个

```
int radioButtonID = radioButtonGroup.getCheckedRadioButtonId();
RadioButton radioButton = (RadioButton)radioButtonGroup.findViewById(radioButtonID); 
```

然后你可以检查哪个按钮被选中，你可以相应地导航。

# c# - 调用函数 postgresql .NET 时出错

> ID：14622368
> 
> 赞同：1
> 
> 时间：2013-01-31T09:28:18.353
> 
> 标签：c#, postgresql

错误：42883：函数 insertvideo（字符变化，字符变化，双精度，整数）不存在

但是那个存储过程存在！！！为什么继续这个错误？？？

这是我的连接字符串：

```
 <connectionStrings>
        <add name="myConnection" connectionString="Server=127.0.0.1; 
                   User Id=postgres; Password=myPass; Database=myDB; "/>
      </connectionStrings> 
```

存储过程在`public`模式中并且可以正常工作。

```
 using (NpgsqlConnection conn = new NpgsqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString()))
    {
        try
        {
            conn.Open();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        NpgsqlCommand cmd = new NpgsqlCommand("insertvideo", conn);
        cmd.CommandType = System.Data.CommandType.StoredProcedure;

        cmd.Parameters.Add(new NpgsqlParameter("out_scope_id", NpgsqlDbType.Bigint));
            cmd.Parameters["out_scope_id"].Direction = ParameterDirection.Output;

        cmd.Parameters.Add(new NpgsqlParameter("in_youtubeidvideo", NpgsqlDbType.Varchar, 15));
        cmd.Parameters["in_youtubeidvideo"].Value = VideoId;

        cmd.Parameters.Add(new NpgsqlParameter("in_title", NpgsqlDbType.Varchar, 200));
        cmd.Parameters["in_title"].Value = Title;

        cmd.Parameters.Add(new NpgsqlParameter("in_rating", NpgsqlDbType.Double));
        cmd.Parameters["in_rating"].Value = Rating;

        cmd.Parameters.Add(new NpgsqlParameter("in_viewcount", NpgsqlDbType.Integer));
        cmd.Parameters["in_viewcount"].Value = ViewCount;

        try
        {
            cmd.ExecuteNonQuery();

            scopeID = Convert.ToInt64(cmd.Parameters["out_scope_id"].Value);
        }
        catch (Exception e)
        {
            scopeID = -1;        //Duplicate Record
        }

        conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:33:10.030

服务器=127.0.0.1；add name="ConnectionStringName" connectionString="server=ServerNameOrIP;database=DataBasename;uid=UserID;pwd=Password; 检查这个 正确再试一次。它会工作。数据库连接未建立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:36:25.647

您不能传入命令对象`function`。`NpgsqlCommand`唯一允许的就是sql查询或者存储过程的名称。

最好的方法是在其中创建一个`STORED PROCEDURE`函数并在 ado.net 中调用该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:34:05.070

请在下面添加连接字符串

```
<connectionStrings>
            <add name="myConnection" connectionString="Server=127.0.0.1; 
                       User Id=postgres; Password=myPass; Database=myDB; " providerName="postgre"/>
          </connectionStrings> 
```

# assembly - 如何使用输入的整数打印二进制数？

> ID：14622371
> 
> 赞同：0
> 
> 时间：2013-01-31T09:28:39.453
> 
> 标签：assembly, mips

我正在尝试将输入的整数转换为二进制，但我似乎无法在我的程序中找到错误。我能够加载输入的数字并打印出一个 8 位二进制数，但是没有一个 1 被打印出来。我究竟做错了什么？

```
 enterNum: 
.asciiz "Enter your number (base 10):  "
 printBaseTwo: 
.asciiz "The number in base 2 is:  "
 #-----------------------------------------------------------------------

.text
#Print out string, collect intger input
main: li $v0, 4
      la $a0, enterNum
      syscall
  li $v0, 5
  syscall
  move $t0, $v0

#create mask/print out the second string and prepare to print out binary
mask: 
  andi $t1, $zero, 1
  sll $t1, $t1, 7
  addi $t2, $zero, 8
  li $v0, 4
  la $a0, printBaseTwo
  syscall

 # compares mask to integer, starting at the most sig place
 # if the mask is zero, print out zero
 loop: 
  and $t3,$t0, $t1
  beq $t3, $zero, print
  add $t3, $zero, $zero
  addi $t3, $zero, 1
  j print

 print: 
      #prepares to print integer in $a0
  li $v0, 1

      # moves either 1 or 0 into $a0 to be printed
  move $a0, $t3
  syscall

      # shifts over right 1, getting closer to 0
  srl $t1, $t1, 1

      #lowers count
  addi $t2, $t2, -1

      #loop back to beginning if not finished printing binary Num
  bne $t2, $zero, loop
  beq $t2, $zero, exit
 exit: 
  li $v0, 10
  syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:05:14.690

我从 32 位 MIPS 版本开始回答这个问题。

首先，当请求一个十进制数时，MIPS 将其保存为一个 32 位的数字在它的寄存器中。因此我做了以下调整：

```
andi $t1, $zero, 1
sll $t1, $t1, 7
addi $t2, $zero, 8 
```

变成：

```
add $t1, $zero, 1
sll $t1, $t1, 31
addi $t2, $zero, 32 
```

注意我是如何改变`andi`into的`addi`。如果您使用 8 位版本的 MIPS，这将是唯一必要的调整。

我希望我解决了你的问题，它可以在火星模拟器中工作！

# asp.net - 使用asp菜单控件时无法修改控件集合错误

> ID：14622375
> 
> 赞同：1
> 
> 时间：2013-01-31T09:29:01.337
> 
> 标签：asp.net, menu, sitemap

所以这是我的问题：我有一个使用 asp:TreeView 控件和站点地图来绘制菜单的网页。

```
<asp:TreeView ID="CatalogTreeViewControl" runat="server" DataSourceID="dsSiteMap">
</asp:TreeView>
<asp:SiteMapDataSource runat="server" ID="dsSiteMap" ShowStartingNode="False" SiteMapProvider="MyXmlSiteMapProvider"/> 
```

这就像一个魅力，但我想使用 asp:Menu 控件而不是 TreeView，så 我这样做：

```
<asp:TreeView ID="CatalogTreeViewControl" runat="server" DataSourceID="dsSiteMap" Visible="False">
</asp:TreeView>

<asp:Menu ID="Menu1" runat="server" DataSourceID="dsSiteMap"></asp:Menu>

<asp:SiteMapDataSource runat="server" ID="dsSiteMap" ShowStartingNode="False" SiteMapProvider="MyXmlSiteMapProvider"/> 
```

但这会导致以下错误：

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:44:52.533

我很久以前就遇到过这个问题。我将我的 javascript 从 head 标签移动到 form 标签，它解决了这个问题。这些链接对我帮助很大：

[“控件集合无法修改，因为控件包含代码块”](https://stackoverflow.com/questions/778952/the-controls-collection-cannot-be-modified-because-the-control-contains-code-bl)

[http://leedumond.com/blog/the-controls-collection-cannot-be-modified-because-the-control-contains-code-blocks/](http://leedumond.com/blog/the-controls-collection-cannot-be-modified-because-the-control-contains-code-blocks/)

# android - Android 最初使用网络提供商获取纬度和经度，然后使用 GPS

> ID：14622383
> 
> 赞同：1
> 
> 时间：2013-01-31T09:29:13.800
> 
> 标签：android, gps, location

在我的应用程序中，我需要用户当前位置的纬度和经度值。最初，我检查 GPS 坐标是否可用，如果不可用，我将使用网络提供商获取用户位置的这些纬度值，因为获取 GPS 坐标非常耗时。一旦 GPS 坐标可用，我需要获取这些值。谷歌搜索了大约 2 天，我发现了一些关于这个问题的信息，并设法构建了一些代码，如下所示。我被困住了，无法前进。

我的活动

```
public class MainActivity extends Activity {

    double x, y;

    Timer timer;
    LocationManager lm;
    boolean gps_enabled = false;
    boolean network_enabled = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        network_enabled = lm
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!gps_enabled && !network_enabled) {
            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "nothing is enabled",
                    duration);
            toast.show();

        }

        if (gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                    locationListenerGps);
        if (network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                    locationListenerNetwork);
        timer = new Timer();
        timer.schedule(new GetLastLocation(), 20000);

    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x = location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context,
                    "gps enabled " + x + "\n" + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x = location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "network enabled" + x + "\n"
                    + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
            lm.removeUpdates(locationListenerGps);
            lm.removeUpdates(locationListenerNetwork);

            Location net_loc = null, gps_loc = null;
            if (gps_enabled)
                gps_loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (network_enabled)
                net_loc = lm
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

            // if there are both values use the latest one
            if (gps_loc != null && net_loc != null) {
                if (gps_loc.getTime() > net_loc.getTime()) {
                    x = gps_loc.getLatitude();
                    y = gps_loc.getLongitude();
                    Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown " + x
                            + "\n" + y, duration);
                    toast.show();
                } else {
                    x = net_loc.getLatitude();
                    y = net_loc.getLongitude();
                    Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "network lastknown "
                            + x + "\n" + y, duration);
                    toast.show();

                }

            }

            if (gps_loc != null) {
                {
                    x = gps_loc.getLatitude();
                    y = gps_loc.getLongitude();
                    Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown " + x
                            + "\n" + y, duration);
                    toast.show();
                }

            }
            if (net_loc != null) {
                {
                    x = net_loc.getLatitude();
                    y = net_loc.getLongitude();
                    Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "network lastknown "
                            + x + "\n" + y, duration);
                    toast.show();

                }
            }
            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "no last know avilable",
                    duration);
            toast.show();

        }
    }
} 
```

到目前为止，使用上面的代码我从网络提供商那里获得了纬度值，但无法获得 GPS 坐标。我应该在上面的代码中添加或编辑什么来获取 GPS 坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:32:10.353

我发现 Android 开发者指南非常有帮助：http: [//developer.android.com/guide/topics/location/strategies.html#BestEstimate](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)

它说明了典型的程序流程应该如何使用不同的位置提供程序来获得最准确的用户位置。

# android - 添加数据以在 android 的 facebook 墙上发布不显示任何要发布的消息

> ID：14622384
> 
> 赞同：1
> 
> 时间：2013-01-31T09:29:16.140
> 
> 标签：android, facebook

我正在使用以下代码并尝试在 facebook 墙上发布消息以及图片 url。消息和图片 url 都是空的。任何人都可以找到并指导我正确的方向吗？

```
btnPostToWall.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            postToWall();
        }
    });

public void postToWall() {
    Bundle params = new Bundle();

    params.putString("message","test to post");

    params.putString("url", URLEncoder.encode("http://a.espncdn.com/photo/2010/0523/pg2_a_cricket_576.jpg"));

    try {
        String response = facebook.request("me/feed", params, "POST");
    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // post on user's wall.
    facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onCancel() {
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:41:26.110

将此**权限**设置为公开

```
private String[] PERMISSIONS = new String[]

    { "publish_stream", "read_stream", "offline_access" }; 
```

如果是，这将检查会话是否存在，如果不存在，它将直接更新，然后询问用户是否允许在墙上更新。

按钮**点击事件**

```
 facebookConnector = new FacebookConnector(APP_ID, activity.getParent(), 
activity.getApplicationContext(),PERMISSIONS);
    if (facebookConnector.getFacebook().isSessionValid())
    {   
         postMessageInThread(position); // see method below 
    }
    else
    {
         SessionEvents.AuthListener listener = new SessionEvents.AuthListener()
    {

@Override
public void onAuthSucceed()
{
     postMessageInThread(position);
}

@Override
public void onAuthFail(String error)
{
}
};  

SessionEvents.addAuthListener(listener);
    facebookConnector.login();
} 
```

这将更新您在墙上的数据

```
private void postMessageInThread(final int position)
    {
        Thread t = new Thread()
        {
            public void run()
            {
                try
                {
                    facebookConnector.postMessageOnWall(
                            "Your Text Data",
                            "Your Email URL","Description");
                    mFacebookHandler.post(mUpdateFacebookNotification);
                } catch (Exception ex)
                {
                    Log.e("", "Error sending msg", ex);
                }
            }
        };
        t.start();
    } 
```

**注意：：**这里的位置是我的列表记录，因此请根据该记录管理您的数据。

# c# - 如何在 windows phone 7 中实现聊天功能

> ID：14622391
> 
> 赞同：1
> 
> 时间：2013-01-31T09:29:31.363
> 
> 标签：c#, windows-phone-7, chat

我想在 WP7 中实现一个简单的在线聊天应用程序。我正在使用 Matrix SDK 在我的 WP7 上实现聊天这是我尝试连接的方式，但我无法连接和发送任何消息。事件都没有被解雇..我也没有得到任何异常..我做错了什么？？？？请指导我

提前致谢

```
XmppClient xmppConn;
xmppConn = new XmppClient();            
Jid jidUser = new Jid("username");
xmppConn.Username = jidUser.User;
xmppConn.Password = "password";
    xmppConn.SetXmppDomain(jidUser.Server);           
xmppConn.Uri = new System.Uri("http://server.com:7070/http-bind/",UriKind.RelativeOrAbsolute);
xmppConn.Status = "Testing on Windows Phone 7";
xmppConn.Show = Matrix.Xmpp.Show.Chat;
try
        {
            xmppConn.Open();
            xmppConn.OnLogin += new EventHandler<Matrix.EventArgs>(xmppConn_OnLogin);
            //xmppConn.OnPresence += new EventHandler<PresenceEventArgs>(xmppConn_OnPresence);
            // xmpp.OnLogin += new EventHandler<Matrix.EventArgs>(xmpp_OnLogin);                
        }
        catch
        {
            Console.WriteLine("Wrong login data!");
        }     
    }

private void SendButton_Click(object sender, System.EventArgs e)
    {
        // loose focus to hide keyboard
        this.Focus();
        messages.Add(new ChatMessage()
        {
            Side = MessageSide.Me,
            Text = TextInput.Text
        });

        var pm = new PresenceManager(xmppConn);
        string sub_id = "xxxxxxxxx";
        Jid jid = sub_id;
        pm.Subscribe(jid);
        xmppConn.Send(new  Message(new Jid(jid), MessageType.chat, TextInput.Text));
        xmppConn.OnMessage += new EventHandler<MessageEventArgs>(xmppConn_OnMessage);
        TextInput.Text = "";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:25:51.393

看看[SignalR](http://signalr.net/)用于基于 Web 的实时通信（包括聊天）。

有一个[适用于 Windows Phone 8 的官方示例，](https://github.com/SignalR/SignalR/tree/master/samples/Microsoft.AspNet.SignalR.Client.WP8.Sample)还有一个[适用于 WP7 的 3rd party helper](http://wp7signalrhelper.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:34:32.363

在对 xmpp 进行任何操作之前，您首先需要设置 xmmp 类的 OnBind 事件。

**原因**：大多数 xmpp 都是异步工作的。当您调用诸如 client.Open 之类的东西时，它会立即返回，因此您首先需要等待 OnBind 事件。

# inno-setup - 如何根据时区检测用户国家

> ID：14622394
> 
> 赞同：2
> 
> 时间：2013-01-31T09:29:39.017
> 
> 标签：inno-setup

如何根据 PC 的时区设置使用 inno 脚本语言来检测用户所在的国家/地区。

我只需要知道用户是来自美国还是美国以外。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:36:17.497

我不会依赖时区设置，而是依赖地理位置。有关[`GetUserGeoID`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318138%28v=vs.85%29.aspx)函数返回值的列表，请参见[`Table of Geographical Locations`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374073%28v=vs.85%29.aspx)：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Code]
const
  GEOCLASS_NATION = 16;
  GEOID_UNITED_STATES = $F4;
type
  GEOID = Longint;
  GEOCLASS = DWORD;

function GetUserGeoID(GeoClass: GEOCLASS): GEOID;
  external 'GetUserGeoID@kernel32.dll stdcall';

function IsGeoLocationUSA: Boolean;
begin
  Result := GetUserGeoID(GEOCLASS_NATION) = GEOID_UNITED_STATES;
end;

function InitializeSetup: Boolean;
begin
  if IsGeoLocationUSA then
    MsgBox('Geographical location U.S.A.', mbInformation, MB_OK)
  else
    MsgBox('Geographical location other than U.S.A.', mbInformation, MB_OK);
end; 
```

忘了注意，此功能支持的最低客户端操作系统是 Windows XP。对于那些不知道这个设置来自哪里的人，这里是 Windows 7 的区域和语言控制面板小程序的图片。在上述功能中检查的地理位置，可以在那里配置：

![在此处输入图像描述](../Images/494c92cdb471bc4c8ff49286d5fb6b16.png)

# c# - CRM：插件错误 - onCreate ( 预期的非空 Guid。 )

> ID：14622396
> 
> 赞同：0
> 
> 时间：2013-01-31T09:29:41.483
> 
> 标签：c#, plugins, dynamics-crm-2011, crm

我有一个问题：创建新记录时出现错误...`

```
Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Expected non-empty Guid.Detail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220989</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Expected non-empty Guid.</Message>
  <Timestamp>2013-01-31T09:23:30.4406111Z</Timestamp>
  <InnerFault i:nil="true" />
  <TraceText> 
```

代码...` 将字段设置为值。我也试过

```
Pline.Id = new Guid();

Pline.Id = a; //(a is a guid ref to parent record)

Entity Pline = new Entity("bc_packlines");
if (b.Attributes.ContainsKey("mins_sum"))
{
    BlockMins = ((Decimal)((AliasedValue)b["mins_sum"]).Value);
}

Pline.Attributes["bc_packlinesid"] = Pline.Id;
Pline.Attributes["bc_pack"] = a;
Pline.Attributes["bc_type"] = "948110004";
Pline.Attributes["bc_minutespurchased"] = BlockMins;
Pline.Id = a;
service.Create(Pline); 
```

请问有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:17:53.373

其中一些有点令人困惑，尤其是

```
Pline.Attributes["bc_packlinesid"] = Pline.Id;
// ...
Pline.Id = a; 
```

您不需要明确设置新实体的 ID，因此请删除：

```
Pline.Id = a; 
```

编辑：您还说这`a`是父记录的 Guid - 那么您如何/为什么将其设置为另一条记录的 PK？那不会完全停止。

其次，在这一行

```
Pline.Attributes["bc_packlinesid"] = Pline.Id; 
```

您正在将该字段的值设置为`bc_packlinesid`空 guid，因为您正在创建的记录的 Id 尚未设置。这意味着您正试图让实体引用自己？对我来说这听起来不对，但如果是，您将需要在第二步之后执行此操作

```
var newId = service.Create(PLine) 
```

就像是

```
Pline.Attributes["bc_packlinesid"] = newId;
service.Update(PLine); 
```

也就是说，如果这是可能的，我不确定 CRM 是否会允许实体自己进行父子关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:19:44.583

修复了这个，第一次编辑 fetch 语句

```
<attribute name='productid' groupby='true' alias='productid' /> 
```

无论如何，这是每个新的 bc_packlines 所基于的：然后...

```
productid = ((Guid)((AliasedValue)b["productid"]).Value);

                        BlockMins = ((Decimal)((AliasedValue)b["mins_sum"]).Value);

                        Entity Pline = new Entity("bc_packlines");
                        Pline.Id = productid; 
```

谢谢:)希望这可以帮助某人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:02:31.400

你不应该设置你的记录的PK，CRM会创建它，所以你需要删除它

线

```
 Pline.Id = a; 
```

并创建与父实体的关系，您拥有其 id 并编写以下内容

代码

```
Pline.Attributes["bc_packlinesid"]=new CrmEntityRefrence(Pline.EntityLogicalName,parentEntityID); 
```

# java - 如何在java中打印输出

> ID：14622404
> 
> 赞同：0
> 
> 时间：2013-01-31T09:30:01.463
> 
> 标签：java, math, printing, double

我有一个我正在尝试做的简单问题。我正在尝试编写一个将这五个数字加倍的程序。然后我想计算这些数字的平均值并将它们打印出来。代码运行没有错误，但由于某种原因它不会打印我的答案。我怎样才能让它打印问题的输出或简单地打印一些东西？我正在使用 Netbeans。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package marina;

/**
 *
 * @author bax
 */
public class Precedence {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    double grade1 = 100;
    double grade2 = 75;
    double grade3 = 88;
    double grade4 = 65;
    double grade5 = 99;
    int x = (int) (grade1+grade2+grade3+grade4+grade5/5.0);

    System.out.println(x);   

    }
} 
```

输出：

```
run:
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:47:08.343

（就像我在评论中所说的那样：）

确保您已打开文件并按`Shift + F6`，它会运行*当前文件*。请注意，如果您按一下，`F6`则将运行*主项目*，不一定是此项目。此外，请确保您点击了清理和构建选项，以清理缓存等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:32:32.727

将您的添加分组在括号中`(elm1+elm2)/5`，然后将其除以 5

```
 int x = (int) ((grade1+grade2+grade3+grade4+grade5)/5);
System.out.println(x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:33:07.003

`System.out.println()`将打印到控制台，因此请确保在那里运行它。

此外，您没有计算平均值。除法的优先级高于加法。改写如下：

```
int x = (int) ((grade1+grade2+grade3+grade4+grade5)/5.0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:33:36.920

它应该打印结果，但您的计算也有错误。您只将等级 5 划分为 5.0。

我认为这就是你想要做的：

```
int x = (int) ((grade1+grade2+grade3+grade4+grade5) / 5.0); 
```

也试试：

```
System.out.println("Result: " + x); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:37:11.843

如果您使用 Eclipse 或其他 IDE 来运行您的程序，IDE 中的某处应该有一个“控制台”窗口，它将显示控制台输出。

要在没有 IDE 的情况下运行程序，请在控制台中运行以下命令（Windows 上的 cmd，Linux 上的终端/bash，...）：

```
javac MyFile.java
java MyFile 
```

如果这不起作用，则必须将 JDK 二进制文件添加到 PATH。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T09:41:42.987

```
int x = (int) (grade1+grade2+grade3+grade4+grade5/5.0); 
```

(1+1+1+1+5/5)=5

(1+1+1+2+5)/5 = 2

# c++ - 如何获取 IEDboxEditor 的内容

> ID：14622409
> 
> 赞同：0
> 
> 时间：2013-01-31T09:30:31.167
> 
> 标签：c++, winapi

我正在尝试获取编辑控件框的内容并将其用作 char[] 或 char* ，它定义为：

```
 CString m_captureFile; 
```

我试图定义一个吸气剂：

```
 CString CDecklinkCaptureDlg::getFilepath(){
return m_captureFile;
 } 
```

然后

```
strcpy((char*)filep, getFilepath()); 
```

这没用？任何想法 。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:39:00.220

请参阅[msdn](http://msdn.microsoft.com/en-us/library/awkwbzyc.aspx)参考。

尝试：

```
strcpy((char*)filep, (LPCTSTR)getFilepath()); 
```

# javascript - 在 win 8 Metro 应用程序中全局声明 WinJS.xhr

> ID：14622410
> 
> 赞同：0
> 
> 时间：2013-01-31T09:30:38.237
> 
> 标签：javascript, html, winjs

我正在开发 Windows 8 Metro 应用程序。我有一个问题，我有一个中心页面，我从 XML API 动态推送数据。我使用了两个 WinJs.xhr(" url" ) 一个 url 来推送标题，一个 url 来将数据推送到部分中。现在的问题是，当我合并两个 winjs 并尝试推送到项目时，第二个 winjs 项目被推送而不是第一个。我必须在全球范围内声明第一个 url，因为我有很多页面。所以在哪里以及如何在全球范围内声明它。>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:50:52.517

中的全局对象`WinJS`仍然是`window`这样声明的：

```
window.url = url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:23:11.230

您可以使用这个在 default.js 中定义自定义名称空间

```
WinJS.Namespace.define("MYAPP",
{
gvar:123,
myurl1:'http://example.com/url1',
myurl2:'http://example.com/url2'
}
); 
```

然后，首先包含 js 并像这样设置 xhr url：

```
WinJS.xhr({url:MYAPP.myurl1})....

....

WinJS.xhr({url:MYAPP.myurl2}).... 
```

# amazon-web-services - Amazon S3 对象：是否可以将公共读取策略仅限于某些 IP 地址？

> ID：14622411
> 
> 赞同：0
> 
> 时间：2013-01-31T09:30:44.897
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront, amazon-iam

A 有一个带有公共读取策略的存储桶。现在我想限制对**某些对象**的访问，以便只能从某些 IP 地址访问。这可能吗？

我还计划添加 CloudFront。我应该怎么做才能在每个对象上保持相同的设置？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:48:24.397

您可以使用 S3 存储桶策略。但是，它将应用于存储桶中的各个文件夹，而不是单个文件。您可以使用如下策略：

```
 {
        "Version": "2008-10-17",
        "Id": "testPolicy",
        "Statement": [

            {
                "Sid": "1",
                "Effect": "Allow",
                "Principal": {
                    "AWS": "*"
                },
                "Action": "s3:GetObject",
                "Resource": "arn:aws:s3:::bucketname/subfolder/subfolder2/*",
                "Condition": {
                    "IpAddress": {
                        "aws:SourceIp": [
                            "xxx.xxx.xxx.xxx/xx",
                            "xxx.xxx.xxx.xxx/xx"
                        ]
                    }
                }
            }
        ]
    } 
```

使用您的存储桶名称和文件夹名称以及 IP。

**注意：**请先在非生产存储桶上尝试。

# sql - Drupal 7 - 如何检查特定字段是否有值 - sql查询？

> ID：14622419
> 
> 赞同：0
> 
> 时间：2013-01-31T09:31:04.370
> 
> 标签：sql, validation, drupal, field

我正在尝试编写一个 PHP 代码来验证字段中的表单输入。如果该字段已经有值，系统必须发送一条错误消息。如果没有值或值与输入相同，则可以提交表单。编辑后的代码是：

```
/**
* Implement a function to get the ID and the title of the referenced node
* of type Reservation
* by the nodereference field called Period
* in the currently edited node from type Board
* Try to do this by the node_load() instead of the database query
* Is it the correct method to get the edited node's ID?
**/
function period_get_value() {
$thisnodeboard = $node->field_period_1[$node->language][0]['nid'];
$reservationrec = node_load(array('nid'=>$thisnodeboard));
return $reservationrec->title;
}
/**
* Implement the hook_form_FORM_ID_alter function to validate
* if the field Period has already value set
* and if there is such to check if it is the same as the input value
**/
function period_validate_form_slickgrid_editor_form_alter(&$form, $form_state){
/**
* The current value is the title of the referenced node
**/
$valcurr = period_get_value();
$valnew = $form_state['values']['field_period_1'];
if (isset($valcurr)&&($valcurr!=$valnew)){
    form_set_error('field_period_1', t('There is already value set for this field'));
  }
return $form;
} 
```

但它仍然不起作用 - 不设置任何消息并允许更改 field_period_1 中的现有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:29:19.317

首先，在 D7 中编写手动 SQL 查询绝对是最后的手段。

好的，所以您实际上只想阻止用户在创建节点后更新字段。

你可以做两件事之一。如果您只想阻止从节点/编辑表单进行编辑，您可以实现 hook_form_FORM_ID_alter() 然后添加您自己的验证或提交处理程序。然后，您将验证该字段是否未更改并采取相应措施。

如果您想防止它在任何地方发生，例如以编程方式。您可以实现 hook_node_update() 并检查 $node->is_new 和 $node->type 以防止更改非新节点。

# r - 如何更改ggplot中的图例标题

> ID：14622421
> 
> 赞同：412
> 
> 时间：2013-01-31T09:31:10.450
> 
> 标签：r, plot, ggplot2

我有下面的情节。它是使用以下命令创建的：

```
library(ggplot2)

df <- data.frame(cond = factor(rep(c("A", "B"), each = 200)), 
                 rating = c(rnorm(200), rnorm(200, mean=.8)))

ggplot(df, aes(x=rating, fill=cond)) + 
geom_density(alpha = .3) +
xlab("NEW RATING TITLE") +
ylab("NEW DENSITY TITLE") 
```

现在，我想将*图例标题*从**cond**修改为**NEW LEGEND TITLE**。

所以，我只是添加了以下行添加上述代码的末尾：

```
+labs(colour="NEW LEGEND TITLE") 
```

但它不起作用。正确的方法是什么？

![在此处输入图像描述](../Images/662a69acf65497a36958070c302430fb.png)

* * *

## 回答 #1

> 赞同：464
> 
> 时间：2013-01-31T09:35:43.827

这应该有效：

```
p <- ggplot(df, aes(x=rating, fill=cond)) + 
           geom_density(alpha=.3) + 
           xlab("NEW RATING TITLE") + 
           ylab("NEW DENSITY TITLE")
p <- p + guides(fill=guide_legend(title="New Legend Title")) 
```

（或替代）

```
p + scale_fill_discrete(name = "New Legend Title") 
```

* * *

## 回答 #2

> 赞同：358
> 
> 时间：2016-08-14T03:04:40.660

我没有深入研究这个，但是因为你在 ggplot() 中使用了**fill=cond ，**

```
 + labs(color='NEW LEGEND TITLE') 
```

可能没有工作。但是，将***color***替换为***fill***，它可以工作！

```
+ labs(fill='NEW LEGEND TITLE') 
```

这在 ggplot2_2.1.0 中对我有用

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-01-31T09:39:55.113

由于您有两种密度，我想您可能想用 设置自己的颜色`scale_fill_manual`。

如果是这样，您可以这样做：

```
df <- data.frame(x=1:10,group=c(rep("a",5),rep("b",5)))

legend_title <- "OMG My Title"

ggplot(df, aes(x=x, fill=group)) + geom_density(alpha=.3) +   
    scale_fill_manual(legend_title,values=c("orange","red")) 
```

![在此处输入图像描述](../Images/6d792cdf2710e14e86a489526229e33a.png)

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2018-07-25T15:54:46.603

上面的代码都不适合我。

这是我发现的，它有效。

`labs(color = "sale year")`

您还可以通过`\n`在末尾添加来在标题和显示之间留出一个空格。

`labs(color = 'sale year\n")`

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-08-16T15:48:14.420

由于在您的代码中您曾经`ggplot(data, fill= cond)`创建直方图，因此您需要通过在标签部分中使用“填充”来添加图例标题，即`+labs(fill="Title name")`。如果您使用的是代码为 ggplot(data, colour= cond) 的不同类型的绘图，那么您可以使用`+labs(colour= "Title Name")`. 总之，lab 参数必须匹配 aes 参数。

我曾经`+ guides(fill=guide_legend("my awesome title"))`更改 geom_bar 图上的图例标题，但它似乎不适用于 geom_point。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-08-23T16:49:20.087

还有另一个非常简单的答案可以适用于一些简单的图表。

只需在图表中添加对 guide_legend() 的调用即可。

```
ggplot(...) + ... + guide_legend(title="my awesome title") 
```

如非常好的[ggplot docs](http://docs.ggplot2.org/current/guide_legend.html)所示。

如果这不起作用，您可以通过调用[guides](http://ggplot2.tidyverse.org/reference/guides.html)更精确地设置您的指南参数：

```
ggplot(...) + ... + guides(fill=guide_legend("my awesome title")) 
```

您还可以通过为您的调用指定这些参数来改变形状/颜色/大小`guides`。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-09-20T11:24:52.297

我在我的 ggplot 中使用了 facet_wrap，除了 ArnaudA 的解决方案外，没有任何建议的解决方案对我有用：

```
qplot(…) + guides(color=guide_legend(title="sale year")) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-03-14T14:43:53.180

只是为了添加到列表中（这里的其他选项对我不起作用），您还可以将函数 update_labels 用于 ggplot：

```
p <- ggplot(df, aes(x=rating, fill=cond)) + 
           geom_density(alpha=.3) + 
           xlab("NEW RATING TITLE") + 
           ylab("NEW DENSITY TITLE") 
```

```
update_labels(p, list(colour="MY NEW LEGEND TITLE") 
```

这也将允许您使用单独的行更改 x 轴和 y 轴标签：

```
update_labels(p, list(x="NEW X LABEL",y="NEW Y LABEL") 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-11-28T11:17:45.747

我注意到有两种方法可以更改/指定 ggboxplot() 的 legend.title：

```
library(ggpubr)

bxp.defaultLegend <- ggboxplot(ToothGrowth, x = "dose", y = "len",
                               color = "dose", palette = "jco")

# Solution 1, setup legend.title directly in ggboxplot()
bxp.legend <- ggboxplot(ToothGrowth, x = "dose", y = "len",
                 color = "dose", palette = "jco", legend.title="Dose (mg)")

# Solution 2: Change legend title and appearnace in ggboxplot() using labs() and theme() option:
plot1 <-  bxp.defaultLegend + labs(color = "Dose (mg)") +
  theme(legend.title = element_text(color = "blue", size = 10), legend.text = element_text(color = "red"))

ggarrange(list(bxp.legend, bxp.defaultLegend, plot1), nrow = 1, ncol = 3,  common.legend = TRUE) 
```

代码根据[GitHub 中的示例](https://github.com/kassambara/ggpubr/issues/157)进行了修改。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-02T05:09:32.457

许多人花费大量时间更改标签、图例标签、标题和轴的名称，因为他们不知道可以在 R 中加载包含空格的表`" "`。但是，您可以这样做以节省时间或减少代码的大小，方法是在加载例如用制表符（或除默认或单个空格以外的任何其他分隔符）分隔的表时指定分隔符：

```
read.table(sep = '\t') 
```

或使用 csv 格式的默认加载参数：

```
read.csv() 
```

这意味着您可以直接将名称`"NEW LEGEND TITLE"`作为列名（标题）保留在原始数据文件中，以避免在每个图中指定新的图例标题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-30T15:17:01.867

将其添加到混合物中，以在您更改颜色时使用。这在具有两个离散变量的 qplot 中也对我有用：

```
p+ scale_fill_manual(values = Main_parties_color, name = "Main Parties") 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-19T07:45:31.953

我要告诉你的方式，将允许您使用单个公式更改图例、轴、标题等的标签，并且您不需要使用记住多个公式。这不会影响字体样式或标题和轴的标签/文本的设计。

我正在给出以下问题的完整答案。

```
 library(ggplot2)
 rating <- c(rnorm(200), rnorm(200, mean=.8))
 cond <-factor(rep(c("A", "B"), each = 200))
 df <- data.frame(cond,rating 
             )

 k<- ggplot(data=df, aes(x=rating, fill=cond))+ 
 geom_density(alpha = .3) +
 xlab("NEW RATING TITLE") +
 ylab("NEW DENSITY TITLE")

 # to change the cond to a different label
 k$labels$fill="New Legend Title"

 # to change the axis titles
 k$labels$y="Y Axis"
 k$labels$x="X Axis"
 k 
```

我已将 ggplot 输出存储在变量“k”中。你可以给它起任何你喜欢的名字。后来我用过

```
k$labels$fill ="New Legend Title" 
```

改变传说。“填充”用于显示不同颜色的标签。如果您有显示大小的标签，例如 1 点代表 100，其他点代表 200 等，那么您可以像这样使用此代码 -

```
k$labels$size ="Size of points" 
```

它将更改该标签标题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-14T09:32:49.667

唯一适合我的解决方案： `p + guides(fill=guide_legend("New title")`

# arrays - 如何使用 golang 的 zlib？

> ID：14622422
> 
> 赞同：2
> 
> 时间：2013-01-31T09:31:15.150
> 
> 标签：arrays, go, slice

```
var buf bytes.Buffer

var outputBuffer [100]byte
b := []byte(`{"Name":"Wednesday","Age":6,"Parents":["Gomez","Morticia"],"test":{"prop1":1,"prop2":[1,2,3]}}`)

w := zlib.NewWriter(&buf)
r, _ := zlib.NewReader(&buf)
w.Write(b)
w.Flush()
r.Read(outputBuffer)//cannot use outputBuffer (type [100]byte) as type []byte in function argument
fmt.Println(outputBuffer) 
```

我该怎么做才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:36:59.547

好吧，您尝试将数组用作切片。它期望 a`[]byte`而你给了它一个`[100]byte`. A`[]byte`具有动态宽度，而 a`[100]byte`始终为 100 字节。数组的大小是其类型的一部分；a与 a`[1]int`是不同的类型`[2]int`。这就是为什么几乎所有东西都在切片上运行。

但这不是唯一的事情。当您直接调用`Read`an时`io.Reader`，它会将目标切片填充到其当前宽度，而不扩展它。如果您将输出切片设为 10 字节宽 ( `make([]byte, 10)`)，您将看到的输出为`{"Name":"W`.

```
var in bytes.Buffer
b := []byte(`{"Name":"Wednesday","Age":6,"Parents":["Gomez","Morticia"],"test":{"prop1":1,"prop2":[1,2,3]}}`)
w := zlib.NewWriter(&in)
w.Write(b)
w.Close()

var out bytes.Buffer
r, _ := zlib.NewReader(&in)
io.Copy(&out, r)
os.Stdout.Write(out.Bytes()) 
```

但此时，您不妨像在[标准库文档](http://golang.org/pkg/compress/zlib/)中那样`os.Stdout`传入。唯一的区别是我们保留了输出格式的副本，但是……如果输出太大以至于您不想将其保存在内存中怎么办？这就是为什么需要一个接口：您可以获取压缩数据，并将其未压缩版本直接写入任何输出流，包括标准输出，但也包括文件、unix 套接字或网络套接字之类的东西。`io.Copy``io.Copy`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T10:05:06.980

尝试以下方法之一：

```
r.Read([]byte(outputBuffer)) 
```

或者

```
r.Read(outputBuffer[0:100]) 
```

我相信这与 Go 的切片与固定大小数组的概念有关。您可以在此处阅读有关这些概念的更多信息（有关数组和切片的部分）：

[http://www.golang-book.com/6](http://www.golang-book.com/6)

还有其他方法，例如最初使您的 outputBuffer 成为适当的切片而不是固定长度的数组，但是使用上面的指针，您应该能够弄清楚。

# winforms - Numericupdown 不显示其值

> ID：14622424
> 
> 赞同：1
> 
> 时间：2013-01-31T09:31:22.900
> 
> 标签：winforms, data-binding, inotifypropertychanged, numericupdown

## 背景：

我有一个 numericupdown，它的“Value”属性绑定到一个对象的属性（当然是十进制）。对象的类实现 INotifyPropertyChanged，并且当属性更改其值时引发 propertychanged 事件，绑定设置为 updatemode.OnPropertyChanged。

```
private System.Windows.Forms.BindingSource myClassbindingSource; 
```

在我的表单的 OnLoad 中，我有以下内容：

```
myClassbindingSource.Add( MyObject1 ); //(MyObject1 is an instance of MyClass)
base.OnLoad( e ); 
```

自动生成的绑定（在我将其 DataBinding 的高级属性“数据源更新模式”更改为“OnPropertyChanged”之后）：

```
this.NumericUpDown1.DataBindings.Add(new System.Windows.Forms.Binding(
    "Value", this.myClassBindingSource, "MyProperty", true, 
    System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged)); 
```

我的课：

```
public class MyClass : INotifyPropertyChanged {

    private Decimal myValue;

    public Decimal MyProperty{
    get { return myvalue; }
    set { 
        myvalue = value;
        NotifyPropertyChanged( "MyProperty" );
    }

    ...

    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged( String info ) {
      var pceHandler = PropertyChanged;
      var pceArgs = new PropertyChangedEventArgs( info );
      if( pceHandler != null )
        pceHandler( this, pceArgs );
    }
} 
```

## 问题：

现在，当对象的属性从代码的其他部分更改时，NumericUpdown 不会显示其新值。

当我调试我的代码时，我可以看到，当属性更改时，PropertyChanged 事件会触发并且我的 NUD 的“Value”属性会获得正确的值，但“Text”属性的默认值是“0.000”。

还有其他控件的绑定工作正常，例如复选框与布尔值、标签与字符串。但不是我的 NUD 绑定到十进制。

## 问题：

当“Value”属性更新时，如何让“Text”属性更新，从而显示正确的值？或者更确切地说，为什么“文本”属性不更新？是否有可以控制如何处理的属性？

# php - 无法使用 codeigniter 查询使用条件计算结果

> ID：14622426
> 
> 赞同：1
> 
> 时间：2013-01-31T09:31:29.123
> 
> 标签：php, mysql, codeigniter, codeigniter-3

我正在尝试计算以 display_id 作为参数的 bookdetails 表的行数。说我通过了`$id='3'`。但我没有得到输出。我认为我正在尝试的代码是错误的。请帮助我正确编写此查询

```
 //--- Counting the rows of bookdetails of table where display_id is as argument------------------------------------------------------------- 
 public function record_count_for_secondtopBooks($id) {
     $this->load->database(); 
    return $this->db->count_all("bookdetails",array('display_id'=>$id)); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:38:26.367

count_all 返回特定的行数

```
echo $this->db->count_all('my_table'); 
```

试试这个

```
$this->db->where('display_id', $id);
$this->db->from('bookdetails"');
$this->db->count_all_results(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:37:53.923

count_all 只接受一个参数，即表名。因此，您将获得该表中所有记录的计数。如手册中所述：

> 允许您确定特定表中的行数。在第一个参数中提交表名。例子：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:37:59.880

试试这个，

```
$this->db->where('display_id', $id);
$query = $this->db->count_all('bookdetails');

return $query; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:38:06.927

请尝试以下代码

```
 public function record_count_for_secondtopBooks($id) {

$this->db->where('display_id',$id);
$q = $this->db->get('bookdetails');
return $q->num_rows();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:38:29.067

```
$this->db->where('display_id',$id);
$result = $this->db->count_all("bookdetails"); 
```

或链他们'

```
$result = $this->db->where('display_id',$id)->count_all("bookdetails"); 
```

**查看：**

```
echo'<pre>';
print_r($result);
echo'</pre>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-02T09:36:49.597

试试这个

```
public function record_count_with_where($table_name,$column_name,$type)
  {
    $this->db->select($column_name);
    $this->db->where($column_name,$type);
    $q=$this->db->get($table_name);
    $count=$q->result();
    return count($count);

  } 
```

# jquery - jquery更改文本并将其替换为链接

> ID：14622430
> 
> 赞同：1
> 
> 时间：2013-01-31T09:31:36.563
> 
> 标签：jquery, html, hover, center

当您用鼠标移动它时，我想更改一些文本 bij 用 url 替换它。我知道您无法通过使用动画（用于 css）来更改它，这就是我使用淡出的原因。在花了几个小时之后，我仍然无法弄清楚为什么它不起作用。

我还想要页面中心的整个 div，我尝试了 valign 等，但这也不起作用。这不是优先事项，但最好更换 margin-top

```
<div align="center" style="margin-top: 20%;"> 
  <div id="change">
    <p id="big">Welcome!</p>
  </div>
  <img src="pic.JPG" alt="Logo" width="40%" height="90"/>
</div>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$("#change").hover(
function(){
    $(this).find('p').fadeOut('slow', function() {
          $(this).text('<a href="Index.html">Continue</a>').fadeIn('slow'); 
    });
}, 
function(){
    $(this).find('p').fadeOut('slow', function() {
          $(this).text('Welcome').fadeIn('slow'); 
    });    
});
</script> 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:33:36.307

使用`html`方法：

```
$(this).html('<a href="Index.html">Continue</a>').fadeIn('slow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:00:56.900

嗯，没有我想的那么容易。

快速移动鼠标时，mouseenter/over mouseleave/out 太容易触发，因此：

```
<div align="center" style="margin-top: 20%;"> 
  <div id="change">
    <p id="big">Welcome!</p>
    <p id="link" style="display:none"><a href="Index.html">Continue</a></p>
  </div>
  <img src="pic.JPG" alt="Logo" width="40%" height="90"/>
</div> 
```

使用

```
$(function() {
  $("#change").hover(function(){
    $("#big").fadeOut('slow',function() {
      $("#link").fadeIn('slow');
    });
  },
  function(){
    $("#link").fadeOut('slow',function() {
      $("#big").fadeIn('slow');
    });
  });
}); 
```

几乎可以工作。但由于进入/离开事件，您可能会在屏幕上看到两者

但是，如果我们使用[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)它可以工作 - 您需要先下载并包含[jquery.hoverIntent.minified.js](http://cherne.net/brian/resources/jquery.hoverIntent.minified.js)

[演示](http://jsfiddle.net/mplungjan/CRU42/)

```
$("#change").hoverIntent(function(){
    $("#big").fadeOut('slow',function() {
      $("#link").fadeIn('slow');
    });
  },
  function(){
    $("#link").fadeOut('slow',function() {
      $("#big").fadeIn('slow');
    });
  }    
); 
```

或者如果您坚持更改 html：[DEMO](http://jsfiddle.net/mplungjan/LDXpx/)

```
$("#change").hoverIntent(function(){
    $("#big").fadeOut('slow',function() {
      $("#big").html('<a href="Index.html">Continue</a>').fadeIn('slow');
    });
  },
  function(){
    $("#big").fadeOut('slow',function() {
      $("#big").html('Welcome').fadeIn('slow');
    });
  }    
); 
```

# c# - Windows 中的 C# 控制台值用 Wine 发送 Linux

> ID：14622431
> 
> 赞同：0
> 
> 时间：2013-01-31T09:31:40.307
> 
> 标签：c#, linux, return, wine

我在 Windows 服务器中有 C# 控制台程序。我用 wine 在 Linux 中运行命令。当 wine 在 Linux 中运行时，它总是返回 0（Linux 命令 "$?" 显示最后一个程序返回值）。如果程序返回 -5，我又在 Linux 中看到 0。因为控制台程序运行。但是我想在返回值的linux中使用它。我如何理解这个返回值？可能吗？

# eclipse - 在哪里可以找到 Eclipse Juno / Kepler Classic 中的代码片段？

> ID：14622432
> 
> 赞同：1
> 
> 时间：2013-01-31T09:31:51.090
> 
> 标签：eclipse, eclipse-plugin

在 Eclipse 的早期版本（如 Helios）中，位于

窗口 > 显示视图 > 常规 > 片段。

现在看来我在任何地方都找不到它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:31:51.090

他们还在

**窗口 > 显示视图 > 常规 > 片段。**

但如果看不到它们，则**需要安装“Eclipse Java Web Developer Tools”。**

检查下面的屏幕：

![在此处输入图像描述](../Images/f6c0a694427616d545f85c018f1d3b88.png)

# javascript - jQuery 是否接受任何顺序的参数？

> ID：14622440
> 
> 赞同：0
> 
> 时间：2013-01-31T09:32:05.363
> 
> 标签：javascript, parameters, conditional-statements, jquery

我注意到在使用 jQuery.fn.animate() 时，我可以以任何顺序将部分或全部参数（用于动画、回调函数、缓动和持续时间的 css）传递给函数。

查看函数源代码，它的开头是这样的：

```
function (prop, speed, easing, callback) {
    var empty = jQuery.isEmptyObject(prop),
        optall = jQuery.speed(speed, easing, callback),
.
.
. 
```

然后它开始实际处理传递的信息。所以，显然 css 属性对象必须在链中的第一个 - 否则它会破坏函数**（或者是它？）**。但是再看看jQuery.speed：

```
function (speed, easing, fn) {
    var opt = speed && typeof speed === "object" ? jQuery.extend({},
    speed) : {
        complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
        duration: speed,
        easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
    };
.
.
. 
```

显然，这就是魔法的所在。但是 jQuery 减少括号和大括号的方法让我很难分解所有这些条件。你能简化 jQuery.speed 函数吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:48:16.750

以更全面的方式编写，这就是 jQuery 所做的：

```
function (speed, easing, fn) {
    var opt;
    if (speed && typeof speed === "object") {
        opt = jQuery.extend({}, speed);
    }
    else {
        var complete_p,
            duration_p = speed,
            easing_p;

        // Find out what's the "complete" property
        if (fn) complete_p = fn;
        else {
            if (easing) {
                complete_p = easing;
            }
            else {
                if (jQuery.isFunction(speed)) {
                    complete_p = speed;
                }
            }
        }

        // Find out what's the "easing" property
        if (fn) {
            easing_p = easing;
        }
        else {
            if (easing) {
                if (!jQuery.isFunction(easing)) {
                    easing_p = easing;
                }
            }
        }

        opt = {
            complete: complete_p,
            duration: duration_p,
            easing: easing_p
        };
    }
.
.
. 
```

所以...是的，它正在做一些检查以允许您更改订单。不过，我不会依赖它。

# wpf - PC 或 MAC 的桌面应用程序

> ID：14622443
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:32:16.207
> 
> 标签：wpf, cross-platform

我在互联网上快速浏览了一下，似乎无法轻易找到我的问题的答案，即，我需要做些什么不同的事情才能使桌面应用程序 WPF 在 PC 和 MAC 环境中运行？我想我可以买一个 mac 并尝试运行我编写的应用程序，但似乎有点贵？

有评论说 Mac 上的 WPF 是不行的。我可以通过一些努力转换为 Silverlight，但我现在的问题是你会为 PC 和 MAC 开发一个桌面应用程序，我猜是可怜的旧 WinForms？如果是这样，陷阱是否只是目录结构/从 WIN32 API 命令访问登录用户等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:02:29.903

正如 Scartag 所说，WPF 与 OS X 不兼容。但是您可能会考虑 Mono，它允许您使用 C# 编写跨平台应用程序。有几个[GUI 工具包](http://www.mono-project.com/Gui_Toolkits)可供选择，但没有一个是 WPF 的实现。有关 Mono/WPF 的更多信息，请参见[此处](http://www.mono-project.com/WPF)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:38:00.660

你不能在 Mac 上运行 WPF。

您可以获得的最好的是 Silverlight，它的适用性取决于您的需求。

您需要操作系统级别的访问权限吗？

# blackberry-10 - 黑莓表 QML

> ID：14622454
> 
> 赞同：1
> 
> 时间：2013-01-31T09:32:45.707
> 
> 标签：blackberry-10

如何在 BlackBerry 10 中使用表格组件？

我有一个`ImageView`和`Label`。

默认情况下，`Container`它们被设置在另一个之上。因此，我想将它们水平对齐而不是下面的预览。

```
Container {

            ImageView {
                       imageSource: "asset:///images/image.png"
                       }
                        Label {
                                preferredHeight: 200
                                text: "Simple Text"

                            }  
                        } 
```

这段代码的输出是

[图片]

[文本]

我想把它们放在

[图片] [文字]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:33:34.963

在您的容器上，您需要添加从左到右的方向。

以下是您上面代码的示例：

```
Container {
        layout: StackLayout {
            orientation: LayoutOrientation.LeftToRight
        }

        ImageView {
                   imageSource: "asset:///images/image.png"
                   }
                    Label {
                            preferredHeight: 200
                            text: "Simple Text"

                   }  
} 
```

# ruby - 红宝石文件下载

> ID：14622455
> 
> 赞同：0
> 
> 时间：2013-01-31T09:32:48.327
> 
> 标签：ruby, curl, cucumber, nokogiri, mechanize

![在此处输入图像描述](../Images/db957d7549e80c94b32fc98e4d38e556.png)

有没有办法访问此对话框以获取文件名或将此文件保存在某处以便我以后可以访问它。我正在使用 Ruby mechanize 浏览网站以到达此屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:17:29.820

没有与机械化的对话。您提交返回 Mechanize::File 对象的表单，然后您可以像这样保存它：

```
file = form.submit
File.open('myfile','w'){|f| f << file.body} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:23:10.317

我会这样做。

使用 nokogiri 打开页面：

```
@doc = Nokogiri::HTML(open(url)) 
```

浏览文档页面并找到该链接进行下载。然后你可以使用一些链接这个：

```
require 'net/http'

Net::HTTP.start('theserver.com') { |http| 
   resp = http.get('/xx/the_file_to_downlaod.csv')
      open('the_downlaod.csv', 'wb') { |file|
         file.write(resp.body)
      }
} 
```

# jquery - 地理编码插件和页面重定向

> ID：14622465
> 
> 赞同：0
> 
> 时间：2013-01-31T09:33:17.693
> 
> 标签：jquery

我得到了以下代码，但“如果”部分不起作用，任何人都可以帮助我吗？非常感谢~

```
<!-- auto detect visitor ip and redirect start -->
<script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
<script language="Javascript"> 
    var mylocation=geoplugin_countryCode();
    if (mylocation="AU") {
    window.location.href='http://www.propertyhere.com/Country/AU/search-to-buy'}
    else if (mylocation="CA") {
    window.location.href='http://www.propertyhere.com/Country/CA/search-to-buy'}
    else if (mylocation="CN") {
    window.location.href='http://www.propertyhere.com/Country/CN/search-to-buy'}
    else if (mylocation="NZ") {
    window.location.href='http://www.propertyhere.com/Country/NZ/search-to-buy'}
    else if (mylocation="RU") {
    window.location.href='http://www.propertyhere.com/Country/RU/search-to-buy'}
    else if (mylocation="US") {
    window.location.href='http://www.propertyhere.com/Country/US/search-to-buy'}
    else {
    window.location.href='http://www.propertyhere.com/network'}
</script>
<!-- auto detect visitor ip and redirect end --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:37:28.793

改成这个`==`。您正在使用`=`which 是赋值运算符。使用`==`运算符检查是否相等。

```
if (mylocation=="AU")
 ... 
else if (mylocation=="CA") 
```

# c# - 如何调试从同一解决方案的项目中引用的 DLL？

> ID：14622466
> 
> 赞同：1
> 
> 时间：2013-01-31T09:33:17.500
> 
> 标签：c#, visual-studio, dll, c++-cli

我有一个 winform C# 项目和 c++/CLR dll，它们都在同一个解决方案中。当我从 c# -> c++ 中的方法调用某些方法时，我有点错误。所以我尝试创建一个断点，但它不会工作......你有什么建议我做的吗？

```
System.ArgumentException was unhandled
  HResult=-2147024809
  Message=Parameter is not valid.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.Bitmap..ctor(Int32 width, Int32 height, PixelFormat format)
       at convertor.GDItoCImgConv.CreateBitmapFromCImg(CImg<float>* img)
       at ManagedCIMG.ManagedCImg.ToBitmap()
       at SampleTester.Form1.button3_Click(Object sender, EventArgs e) in c:\Users\serak\Documents\Visual Studio 2012\Projects\ManagedCIMG\SampleTester\Form1.cs:line 40
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at SampleTester.Program.Main() in c:\Users\serak\Documents\Visual Studio 2012\Projects\ManagedCIMG\SampleTester\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:54:54.123

我在 Codeplex 上找到了您的 dll 的源代码，可能是什么。 [http://managedcimg.codeplex.com/](http://managedcimg.codeplex.com/) 希望这会有所帮助。

# android - 使用 postDelayed 时 AnimationListener 的 onAnimationEnd 未触发

> ID：14622468
> 
> 赞同：3
> 
> 时间：2013-01-31T09:33:18.823
> 
> 标签：android, animation, postdelayed

我正在尝试使用启动屏幕来覆盖 Google Map 加载延迟（对于 Maps v2）。

我想使用应该在几秒钟后淡出的`ImageView`in`FrameLayout`并且能够覆盖`onAnimationEnd`以隐藏启动屏幕的`ImageView`.

当没有延迟地开始动画时，`onAnimationEnd`被适当地调用：

```
new Animations().animateAlphaForLayout(splashLayout, 2000); 
```

问题是当我尝试启动动画时`postDelayed`根本`onAnimationEnd`没有调用：

```
splashLayout.postDelayed(new Runnable() {

    @Override
    public void run() {
        new Animations().animateAlphaForLayout(splashLayout, 2000);
    }

}, 3000); 
```

类的`Animations`代码是这样的：

```
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.AnimationSet;
import android.view.animation.LayoutAnimationController;

public class Animations {

    public void animateAlphaForLayout(final ViewGroup viewGroup, int duration) {
        AnimationSet set = new AnimationSet(true);

        Animation animation = new AlphaAnimation(1.0f, 0.0f);
        animation.setRepeatCount(0);
        animation.setFillAfter(true);
        animation.setDuration(duration);
        animation.setAnimationListener(new Animation.AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                viewGroup.setVisibility(View.GONE);
            }
        });
        set.addAnimation(animation);

        LayoutAnimationController controller = new LayoutAnimationController(set, 0.0f);
        viewGroup.setLayoutAnimation(controller);
        }

} 
```

有谁知道为 Android 2.3 及更高版本（API 10+）执行此操作的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:32:44.007

一个简单的解决方法，可以得到我想要的结果（即显示`ImageView`几秒钟，然后将其淡出并将其设置为`GONE`）：

因为`postDelayed`是我之前尝试的罪魁祸首，所以我放弃了它，转而使用`Animation`'s `setStartOffset(startOffset)`。

这意味着我只是用最初用于`postDelayed`. 我仍然不知道为什么`postDelayed`弄乱了动画的听众。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:44:45.147

我嵌套了 LinearLayouts，一个是 parentHolder，另一个是 parentHolder 内的 menuHolder。当触摸父母持有人的外面时，我隐藏了里面的人。

```
package com.fmc.component;

import com.fmc.marketing.tanitim.R;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationSet;
import android.widget.LinearLayout;

public class NavigatorTest {

public void AnimeEt(LinearLayout llParentHolder) {
    final LinearLayout llHolder = (LinearLayout) llParentHolder.findViewById(R.id.llHolder);
    AnimationSet aset = new AnimationSet(true);
    AlphaAnimation alpha = new AlphaAnimation(1, 0);
    alpha.setStartOffset(500);
    alpha.setDuration(1000);
    aset.addAnimation(alpha);
    alpha.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            llHolder.setVisibility(LinearLayout.GONE);
        }
    });
    llHolder.startAnimation(aset);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T06:47:50.980

可能有人仍然遇到这个问题并且没有找到解决方案 - 即使阅读了很多 stackoverflow 答案 - 就像我一样！

所以我的情况是：我使用了 animatorSet 和

没有一个视图可以调用 clearAnimation，我没有从 backgroundThread 调用我的动画 - 你不应该那样做，顺便说一句 - 作为解决方案，我确实在 animatorSet.start( )

# apache - 链接以下载 64 位 Windows 的 apache http 服务器。

> ID：14622469
> 
> 赞同：14
> 
> 时间：2013-01-31T09:33:21.337
> 
> 标签：apache

我找到了一个下载 32 位 Windows 而不是 64 位的 apache http 服务器的链接。谁能给我64位的下载链接。请帮助我..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T09:38:53.700

来自：[http ://wiki.apache.org/httpd/FAQ#Where_can_I_download_.28certified.29_64_bit_Apache_httpd_binaries_for_Windows.3F](http://wiki.apache.org/httpd/FAQ#Where_can_I_download_.28certified.29_64_bit_Apache_httpd_binaries_for_Windows.3F)

> 我在哪里可以下载（认证的）用于 Windows 的 64 位 Apache httpd 二进制文件？
> 
> 现在，没有。Apache 软件基金会生产开源软件。提供的 32 位二进制文​​件由社区成员提供。

虽然有一些非官方的，例如[http://www.apachelounge.com/download/win64/](http://www.apachelounge.com/download/win64/)，但我不知道他们是否可以信任。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T09:37:04.217

[Apache Lounge](http://www.apachelounge.com/download/win64/)提供了一个非官方的 64 位 Windows 版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T09:39:35.600

查看链接，因为它具有 Apache HTTP Server 2.4.2 x86 和 x64 Windows 安装程序[http://www.anindya.com/apache-http-server-2-4-2-x86-and-x64-windows-installers/](http://www.anindya.com/apache-http-server-2-4-2-x86-and-x64-windows-installers/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-25T05:16:49.880

[您可以在http://httpd.apache.org/docs/current/platform/windows.html#down](http://httpd.apache.org/docs/current/platform/windows.html#down)找到多个选项

ApacheHaus Apache Lounge BitNami WAMP 堆栈 WampServer XAMPP

# sqlite - 我在 HTA 中工作 vbscript。使用 SQLite 满足数据库需求。并且 SQLite 不能识别等于整数

> ID：14622477
> 
> 赞同：0
> 
> 时间：2013-01-31T09:33:44.317
> 
> 标签：sqlite, equality

目标字段为 pk_2013_1qrt，其类型为整数。但是当我运行下面的查询时，结果也包括 pk_2013_1qrt=1 值。我哪里做错了？问候

```
SELECT *,ims_2012_modifiye.id AS imsID, ims_2012_modifiye.ilac_id AS ilacID, 
         ims_2012_modifiye.ilac_adi_duzgun AS iaDuzgun 
FROM ims_2012_modifiye 
LEFT JOIN ilaclar ON ims_2012_modifiye.ilac_id=ilaclar.id 
WHERE ims_2012_modifiye.ilac_id NOTNULL 
  AND ims_2012_modifiye.asil_listede_mi=1 
  AND ims_2012_modifiye.ilac_id NOT IN
      (SELECT ilac_id FROM piyasa_kontrol 
       WHERE pk_yil IN (2012,2011,2010,1900,1901)) 
OR
  ims_2012_modifiye.oncelik_verilsin_mi=1 
  AND ims_2012_modifiye.pk_2013_1qrt=0 
LIMIT 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:40:08.160

`OR`的优先级低于`AND`。您想要的内容尚不清楚，但最新`AND ims_2012_modifiye.pk_2013_1qrt=0`的仅适用于带有`ims_2012_modifiye.oncelik_verilsin_mi=1`. 也许是这样：

```
SELECT *,ims_2012_modifiye.id AS imsID, ims_2012_modifiye.ilac_id AS ilacID, 
         ims_2012_modifiye.ilac_adi_duzgun AS iaDuzgun 
FROM ims_2012_modifiye 
LEFT JOIN ilaclar ON ims_2012_modifiye.ilac_id=ilaclar.id 
WHERE (ims_2012_modifiye.ilac_id NOTNULL 
         AND ims_2012_modifiye.asil_listede_mi=1 
         AND ims_2012_modifiye.ilac_id NOT IN
           (SELECT ilac_id FROM piyasa_kontrol 
            WHERE pk_yil IN (2012,2011,2010,1900,1901)) 
       OR
         ims_2012_modifiye.oncelik_verilsin_mi=1)
  AND ims_2012_modifiye.pk_2013_1qrt=0 
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:26:12.827

问题解决了。正如@Anton 所说，AND 可以事先访问查询结果。将 AND ims_2012_modifiye.pk_2013_1qrt=0 部分移到 WHERE 之后解决了我的问题。谢谢安东，问候

# ruby-on-rails - 为什么 Rails 找不到我的打印布局文件

> ID：14622478
> 
> 赞同：0
> 
> 时间：2013-01-31T09:33:48.897
> 
> 标签：ruby-on-rails, views, declarative-authorization

我有...

**/config/routes.rb**：

```
resources :documents do
   member do
      get :print
   end
end 
```

**/config/authorization_rules.rb**：

```
role :admin do
    has_permission_on [:documents], :to => [:print]
  end 
```

**应用程序/控制器/documents_controller.rb**：

```
def print
  render :layout => "print"
end 
```

**应用程序/视图/布局/print.html.haml**：

```
!!!
%html
  %body
    = yield 
```

我想从几个控制器中定义的打印操作访问这个打印布局文件。

为什么，当我以管理员身份登录并转到 时`http://localhost:3000/documents/1/print`，会出现此错误？

```
Missing template documents/print, application/print with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/steven/Dropbox/testivate/app/views"
  * "/Users/steven/.rvm/gems/ruby-1.9.2-p320/gems/declarative_authorization-0.5.6/app/views" 
```

将`print.html.haml`文件移动到错误`/app/views/application/`或`/app/views/documents/`更改错误，但不会摆脱它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:04:04.630

这是因为您已经定义了布局，但可能没有用于打印操作的模板文件。您的布局文件尝试从不存在的（打印操作）模板中生成内容。您需要另外指定要呈现的（动作）模板，或者只需添加`app/views/documents/print.html.haml`. 此外，为避免混淆，请重命名布局文件。

# php - 控制PHP中常量的存在

> ID：14622481
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:34:01.480
> 
> 标签：php, arrays, file, constants

我有一个名为 config.php 的文件，内容：

```
define ('CLIENT_ID', 'foo'); 
```

我有一个名为 requiredconstants.php 的文件，内容：

```
$aRequiredConstants = array (
'CLIENT_ID',
); 
```

现在，我想在 index.php 中检查是否定义了 $aRequiredConstants 中的每个值

$aRequiredConstants 的 print_r 返回

```
array (
[0] => 'CLIENT_ID',
) 
```

echo CLIENT_ID 返回 foo

但是当我尝试

```
foreach($aRequiredConstants as $key => $value)
if(!defined($value))
    echo "NOT DEFINED"; 
```

它返回 NOT DEFINED.. 但为什么呢？它已定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:48:42.293

工作得很好：

```
<?php
define('have', 2);
$a = array('have', 'not');
foreach($a as $v) {
    if( defined($v) ) {
        echo $v . ' is OK'."\n";
    } else {
        echo $v . ' is NOT'."\n";
    }
} 
```

# jquery - 自定义选择下拉菜单在上下键中不起作用

> ID：14622482
> 
> 赞同：0
> 
> 时间：2013-01-31T09:34:01.647
> 
> 标签：jquery

我使用自定义 jQuery 进行下拉。现在它在所有浏览器上都可以正常工作，除了 Mozilla 用于下拉菜单的键盘向上和向下事件。

我已将以下脚本用于下拉键盘事件。

```
$(document).ready(function(){   
if (!$.browser.opera) {
    $('select.selectlistbig').each(function(){
        var title = $(this).attr('title');
        if( $('option:selected', this).val() != ''  ) title = $('option:selected',this).text();
        $(this)
            .css({'z-index':10,'opacity':0,'-khtml-appearance':'none'})
            .after('<span class="selectlistbig">' + title + '</span>')
            .change(function(){
                var val = $('option:selected',this).text();
                    $(this).next().text(val);
                })
    });

    $('select.selectlistbig').keypress(function (e) {
        if(e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 39 || e.keyCode == 40 )
        {                   
            var val = $('option:selected', this).text();
            $(this).next().text(val);           
        }
    });
}); 
```

帮我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:46:34.257

e.keyCode 在 Firefox 中不起作用。**请使用e.which**尝试以下代码：

```
$('select.selectlistbig').keypress(function (e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 37 || code == 38 || code == 39 || code == 40 )
    {                   
        var val = $('option:selected', this).text();
        $(this).next().text(val);           
    }

}); 
```

# mysql - mysql - 插入多对多关系

> ID：14622483
> 
> 赞同：-1
> 
> 时间：2013-01-31T09:34:03.877
> 
> 标签：mysql, insert, many-to-many

我正在尝试在 2 个不同的 mysql 表中插入记录。情况如下：

表 1：`is_main`包含带有名为 的主键的度假村记录`id`。

表 2：`is_features`包含度假村可以拥有的功能列表（即海滩、滑雪、水疗中心等）。每个功能都有一个名为 的主键`id`。

表 3：`is_i2f`将每个度假村 ID 与功能 ID 连接起来。该表有 2 个字段：`id_i`和`id_f`。这两个字段都是主键。

我创建了一个表格来插入一个新的度假村，但我被困在这里。我需要一个适当的 mysql 查询来在`is_main`表中插入一个新的度假村，并`is_i2f`为其拥有的每个功能插入一个记录，其中包含度假村 id`id_i`的 id 和功能 id 的 id `id_f`。

```
$features = ['beach','relax','city_break','theme_park','ski','spa','views','fine_dining','golf'];

mysql_query("INSERT INTO is_main (inv_name, armchair, holiday, sipp, resort, price, rooms, inv_length, more_info)
VALUES ('$name', '$armchair', '$holiday', '$sipp', '$resort', '$price', '$rooms', '$length', '$more_info')");

$id = mysql_insert_id();

foreach($features as $feature) {
    if(isset($_POST[$feature])) {
        $$feature = 1;
        mysql_query("INSERT INTO is_i2f (id_i, id_f) VALUES (" . $id . ", ?????????????? /missing part here????/ ); }
    else {
        $$feature = 0; }
} 
```

谢谢。拜托，我要疯了！！！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:05:04.270

如果我理解正确，您可以将可变数量的要插入/选择的值连接到一个查询中。（这是第二个查询，需要`id`来自第一个查询。）

```
//initializing variables
$id = mysql_insert_id();
$qTail = '';
$i = -1;

//standard beginning
$qHead = "INSERT INTO `is_i2f` (`id`,`feature`) VALUES ";

  //loop through variable amount of variables
  foreach($features] as $key => $feature) {
    $i++;

    //id stays the same, $feature varies
    $qValues[$i] = "('{$id}', '{$feature}')";

    //multiple values into one string
    $qTail .= $qValues[$i] . ',';

  } //end of foreach

//concatenate working query, need to remove last comma from $qTail
$q = $qHead . rtrim($qTail, ','); 
```

现在您应该有一个可用的`insert`查询`$q`。只是`echo`它，看看它的外观并测试它是否有效。

希望是这样。如果没有，对不起...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:48:22.310

这可能与您无关，但是...

不填充链接表不是更有意义吗？您可以使用`JOIN`s 然后选择在应用程序中填充各种视图等所需的内容

即查询获得 1 个具有所有功能的度假村：

```
SELECT
    Id,
    f.Id,
    f.Name
FROM IS_MAIN m
CROSS JOIN IS_FEATURES f
WHERE m.Id = $RequiredResortId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:52:10.120

[请在Mysql insert into 2 tables](https://stackoverflow.com/questions/3053593/mysql-insert-into-2-tables)上找到答案。

如果您想一次进行多次插入，您可以编写一个 SP 来满足您的需求

# java - 休眠嵌套选择

> ID：14622485
> 
> 赞同：0
> 
> 时间：2013-01-31T09:34:10.730
> 
> 标签：java, sql, hibernate, jpa-2.0

我想从以下查询中仅选择 myEntity (e) 结果

`String query = "select e, to_char(message_date, 'yyyyMMdd') as dateOnly from myEntity e where e.lang = 'DE' and e.message.messageDate > sysdate-5 order by dateOnly desc, e.message.messageType asc"`

所以当我使用下面的代码

```
entityManager.createQuery(query).getResultList(); 
```

要获得结果，因为`List<myEntity>`这意味着执行以下查询

```
select e from (select e, to_char(message_date, 'yyyyMMdd') as dateOnly from myEntity e where e.lang = 'DE' and e.message.messageDate > sysdate-5 order by dateOnly desc, e.message.messageType asc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:09:51.230

使用以下查询解决了我的问题

```
String query = "select e from myEntity e where e.lang = 'DE' and e.message.messageDate >     sysdate-5 order by to_char(message_date, 'yyyyMMdd') desc, e.message.messageType asc" 
```

# iphone - 让 UITabBar 忘记最后一个状态

> ID：14622486
> 
> 赞同：2
> 
> 时间：2013-01-31T09:34:12.273
> 
> 标签：iphone, ios, cocoa, uinavigationcontroller, uitabbarcontroller

当您将 a`UINavigationController`集成到 a 的其中一个选项卡中时`UITabBarController`，会`UITabBarController`记住用户上次使用该选项卡时所在的位置。是否可以让 UITabBarController 忘记并始终像第一次一样启动选项卡？

fe结构如下

*   选项卡1
    *   视图1
    *   视图2
*   选项卡2
    *   视图1

用户从 Tab1/View1 开始，然后导航到 Tab1/View2。他切换到 Tab2/View1，然后按下 Tab1：

*   当前行为：他出现在 Tab1/View2
*   通缉行为：他出现在 Tab1/View1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:45:27.070

像下面这样尝试它会帮助你

```
 - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    for(int i = 0; i < tabBarController.viewControllers.count; i++) {
        if(tabBarController.selectedIndex != i && [[tabBarController.viewControllers objectAtIndex:i] isKindOfClass:[UINavigationController class]])
            [[tabBarController.viewControllers objectAtIndex:i] popToRootViewControllerAnimated:NO];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:44:55.237

看看[UITabBar 委托协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarDelegate_Protocol/Reference/Reference.html)。

然后使用`tabBarController:didSelectViewController:`这种方式：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

    if (viewController != tabBarItem1) {
        [self.navigationControllerInTab1 popToRootViewControllerAnimated:NO];
    }
} 
```

这样，当您离开第一个选项卡项目时，它会弹出`NavigationController`到`rootViewController`.

# google-maps - 谷歌地图重叠文字

> ID：14622489
> 
> 赞同：0
> 
> 时间：2013-01-31T09:34:15.420
> 
> 标签：google-maps

我有一堆代表汽车的信息框，当一个位置有很多汽车时，文本重叠。

有没有办法避免这种情况？（也许没有使用 InfoBoxes。）我发现了一个叫做 Overlapping Marker Spiderfier 的东西（[https://github.com/jawj/OverlappingMarkerSpiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier)），但我需要一些可以即时发生的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:18:31.340

我也有类似的情况。我所做的是单击特定车辆，关闭所有信息框，然后打开相关的。

这样，在任何给定时间点都只有 1 个单独的信息框打开。

# asp.net - 为什么在 ASP.NET 中的 Cookies 中添加域属性会有所不同？

> ID：14622490
> 
> 赞同：0
> 
> 时间：2013-01-31T09:34:17.043
> 
> 标签：asp.net, cookies

由于在 asp.net 中创建 cookie 的意外行为，我刚刚损失了大约一个小时。

第一个版本：

```
HttpCookie cookie1=new HttpCookie("myCookie","myValue1");
cookie1.Domain="www.myurl.com";
Response.Cookies.Add(cookie1); 
```

第二版：

```
HttpCookie cookie2=new HttpCookie("myCookie","myValue2");
Response.Cookies.Add(cookie2); 
```

正如您在第二个版本中看到的，我只是没有输入域信息。当我在浏览器中分析客户端 cookie 时，两个 cookie 都保存在同一个域（包括子域）下。我原以为第二个 cookie 会覆盖第一个 cookie，而不是添加另一个同名的 cookie。

这两个cookie有什么区别？为什么会保存两次？

# python - python如何像zlib.adler32一样快速计算一个简单的校验和

> ID：14622492
> 
> 赞同：5
> 
> 时间：2013-01-31T09:34:26.383
> 
> 标签：python, sum, byte, checksum, ord

我希望计算一个简单的校验和：只需添加所有字节的值。

我发现最快的方法是：

```
checksum = sum([ord(c) for c in buf]) 
```

但是对于 13 Mb 的数据缓冲区，需要 4.4 秒：太长（在 C 中，需要 0.5 秒）

如果我使用：

```
checksum = zlib.adler32(buf) & 0xffffffff 
```

它需要 0.8 秒，但结果不是我想要的。

所以我的问题是：python 2.6 中是否包含任何函数、lib 或 C 来计算简单的校验和？

预先感谢，埃里克。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T10:02:32.057

你可以使用`sum(bytearray(buf))`：

```
In [1]: buf = b'a'*(13*(1<<20))

In [2]: %timeit sum(ord(c) for c in buf)
1 loops, best of 3: 1.25 s per loop

In [3]: %timeit sum(imap(ord, buf))
1 loops, best of 3: 564 ms per loop

In [4]: %timeit b=bytearray(buf); sum(b)
10 loops, best of 3: 101 ms per loop 
```

[这是用Cython](http://cython.org/)编写的 Python 的 C 扩展，`sumbytes.pyx`文件：

```
from libc.limits cimport ULLONG_MAX, UCHAR_MAX

def sumbytes(bytes buf not None):
    cdef:
        unsigned long long total = 0
        unsigned char c
    if len(buf) > (ULLONG_MAX // <size_t>UCHAR_MAX):
        raise NotImplementedError #todo: implement for > 8 PiB available memory
    for c in buf:
        total += c
    return total 
```

`sumbytes`比`bytearray`变体快约 10 倍：

```
name                    time ratio
sumbytes_sumbytes    12 msec  1.00 
sumbytes_numpy     29.6 msec  2.48 
sumbytes_bytearray  122 msec 10.19 
```

要重现时间测量，请下载[`reporttime.py`](https://gist.github.com/4276624#file-reporttime-py)并运行：

```
#!/usr/bin/env python
# compile on-the-fly
import pyximport; pyximport.install() # pip install cython
import numpy as np 
from reporttime import get_functions_with_prefix, measure    
from sumbytes import sumbytes # from sumbytes.pyx

def sumbytes_sumbytes(input):
    return sumbytes(input)

def sumbytes_bytearray(input):
    return sum(bytearray(input))

def sumbytes_numpy(input):
    return np.frombuffer(input, 'uint8').sum() # @root's answer

def main():
    funcs = get_functions_with_prefix('sumbytes_')
    buf = ''.join(map(unichr, range(256))).encode('latin1') * (1 << 16)
    measure(funcs, args=[buf])

main() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:35:58.273

使用`numpy.frombuffer(buf, "uint8").sum()`，它似乎比你的例子快 70 倍：

```
In [9]: import numpy as np

In [10]: buf = b'a'*(13*(1<<20))

In [11]: sum(bytearray(buf))
Out[11]: 1322254336

In [12]: %timeit sum(bytearray(buf))
1 loops, best of 3: 253 ms per loop

In [13]: np.frombuffer(buf, "uint8").sum()
Out[13]: 1322254336

In [14]: %timeit np.frombuffer(buf, "uint8").sum()
10 loops, best of 3: 36.7 ms per loop

In [15]: %timeit sum([ord(c) for c in buf])
1 loops, best of 3: 2.65 s per loop 
```

# android - Android中的系统命令

> ID：14622493
> 
> 赞同：0
> 
> 时间：2013-01-31T09:34:33.577
> 
> 标签：android, command, system

要在 android 设备中运行类似“ping”的系统命令，我们可以使用[Process](http://developer.android.com/reference/android/os/Process.html)来执行它们。我很难访问系统为系统命令回复的数据。如何以正确的格式设置该数据？如何访问它并存储在不同类型的变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:37:24.057

您可能想查看[Root Tools](http://code.google.com/p/roottools/) - 它们使事情变得非常简单。

**编辑**：当然，这也适用于非根设备上的非根命令......看看`getShell(boolean wantRoot)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:46:20.060

我假设您通过获取`DataOutputStream`进程来执行您的命令。同样的方式，您可以通过获取`DataInputStream`相同进程的 来获取命令的输出。但是，这将向您显示所有输出。您将必须实现单独的逻辑来解析此输出，理解它并进一步处理它。我建议您首先获取`DataInputStream`并打印输出，以便您获得更好的主意。没有简单的方法可以做到这一点，除了 Eugen Rieck 的答案。

# android - android LinearLayout - ImageView 被推离屏幕

> ID：14622505
> 
> 赞同：6
> 
> 时间：2013-01-31T09:35:09.650
> 
> 标签：android, android-linearlayout, android-relativelayout

我使用下面发布的布局通过将该布局作为一行膨胀到 ListView 中来显示消息。问题是它适用于单行消息，但是当有 2 行或更多行时，`ImageView`指示消息状态被推离屏幕，无法得到原因。有任何想法吗？布局代码和截图如下。

![在此处输入图像描述](../Images/cc0a62182a53926c3bdd0d4409328252.png)

那是膨胀的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
   android:layout_height="match_parent"
    android:padding="5dp" >

<TextView
    android:id="@+id/tvTimestamp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="TextView"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textSize="8sp" />

<LinearLayout
    android:id="@+id/rl_message_holder"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_toRightOf="@+id/tvTimestamp"
    android:background="@drawable/outgoing_bg"

    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tvMessageOutgoing"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="4dp"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/imgMessageState"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_gravity="bottom"
        android:src="@drawable/ic_launcher" />

  </LinearLayout>

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T09:51:53.413

改变你的线性布局宽度 fill_parent

并在 textview 中添加 android:layout_weight="1"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:46:44.873

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dp" >

    <TextView
        android:id="@+id/tvTimestamp"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:gravity="center_vertical"
        android:text="10:20pm"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textSize="8sp" />

    <RelativeLayout
        android:id="@+id/rl_message_holder"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="80" >

        <TextView
            android:id="@+id/tvMessageOutgoing"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/imgMessageState"
            android:padding="4dp"
            android:singleLine="false"
            android:text="android developer tutorial in the world"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ImageView
            android:id="@+id/imgMessageState"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_gravity="bottom"
            android:contentDescription="@string/app_name"
            android:src="@drawable/ic_launcher" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T09:48:09.710

这对我有用

```
<TextView
        android:id="@+id/tvMessageOutgoing"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:padding="4dp"
        android:layout_weight="1"
        android:text="Medium Tesssssssssssssssssssssssssssssseeeeeeeessssxt"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

它为 textview 提供了剩余空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T09:46:58.390

像这样试试

```
 <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="0.6"
          >

          <ImageView
        android:id="@+id/imgMessageState"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_gravity="bottom"
        android:src="@drawable/ic_launcher" />

        </LinearLayout> 
```

在线性布局中定义您的图像视图布局

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:54:18.420

您可以使用

```
android:drawableRight="@drawable/ic_launcher" 
```

# c# - Orchard CMS，Autofac 关系

> ID：14622508
> 
> 赞同：3
> 
> 时间：2013-01-31T09:35:24.660
> 
> 标签：c#, inversion-of-control, orchardcms, autofac

我正在尝试创建一个“A(UserManager) 需要创建 B(UserClient) 的实例”关系 ( [http://code.google.com/p/autofac/wiki/RelationshipTypes](http://code.google.com/p/autofac/wiki/RelationshipTypes) )，其中 B(UserClient) 需要一个 HttpSessionStateBase。 .

用户客户端

```
public class UserClient : IUserClient
    {
        public UserClient(HttpSessionStateBase session)
        {
             //...
        }

        //...
    } 
```

用户管理器

```
public class UserManager : IUserManager
    {
        private readonly Func<IUserClient> userClientPerRequest;
        private IUserClient UserClient
        {
            get
            {
                return userClientPerRequest();
            }
        }

        public UserManager(Func<IUserClient> userClientPerRequest)
        {
            this.userClientPerRequest = userClientPerRequest;
        }

        public void DoStuff()
        {
            UserClient.DoStuff();
        } 
```

这是注册 autofac 东西的地方

```
public class MyModule : Module
    {
        protected override void Load(ContainerBuilder builder)
        {
            base.Load(builder);

            builder.RegisterType<UserManager>().As<IUserManager>().SingleInstance();

            builder.RegisterType<UserClient>().As<IUserClient>().InstancePerHttpRequest();

            builder.RegisterModule(new AutofacWebTypesModule());

            //If i try this, i get Error 1 (printing errors after this code-block)
            builder.Register<Func<IUserClient>>(c => c.Resolve<IUserClient>);

            //If i try this, i get Error 2                
            builder.Register<Func<IUserClient>>(c => {
            var ctx = c.Resolve<IComponentContext>();
            return ctx.Resolve<IUserClient>;                
            });

            //If i try this, well i always get null from GetService..
            builder.Register<Func<IUserClient>>(c =>            
            DependencyResolver.Current.GetService<IUserClient>);
        } 
```

查看[Autofac: Reference from a SingleInstance'd type to a HttpRequestScoped](https://stackoverflow.com/questions/2599566/autofac-reference-from-a-singleinstanced-type-to-a-httprequestscoped?rq=1)，他们使用了一些`RequestContainer`，但我找不到这样的东西。:)

错误 1

```
This resolve operation has already ended. When registering components using lambdas, the IComponentContext 'c' parameter to the lambda cannot be stored. Instead, either resolve IComponentContext again from 'c', or resolve a Func<> based factory to create subsequent components from. 
```

错误 2

```
No scope with a Tag matching 'AutofacWebRequest' is visible from the scope in which the instance was requested. This generally indicates that a component registered as per-HTTP request is being reqested by a SingleInstance() component (or a similar scenario.) Under the web integration always request dependencies from the DependencyResolver.Current or ILifetimeScopeProvider.RequestLifetime, never from the container itself. 
```

我尝试过切换`.InstancePerHttpRequest()`到`.InstancePerLifetimeScope()`其他不同的东西..有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:48:47.670

在 Orchard 中手动添加 Autofac 注册时`InstancePerMatchingLifetimeScope("shell")`，如果需要单例，请使用 ，如果`InstancePerMatchingLifetimeScope("work")`需要按请求实例，请使用 。

我不确定是否`HttpSessionStateBase`可以从容器中解析 ctor 参数。您可以将其放在`IHttpContextAccessor`那里并使用它来访问`IUserClient`实现内部的会话状态对象。

正如 Jim Bolla 建议的那样 - `Func<IUserClient>`( [factory](http://code.google.com/p/autofac/wiki/DelegateFactories) ) 已经开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:11:57.283

我认为您不需要进行其中任何一项注册。由于[关系类型](http://code.google.com/p/autofac/wiki/RelationshipTypes)，`Func<IUserClient>`您应该已经可以使用。

# java - 更改存储在集合中的对象的状态

> ID：14622509
> 
> 赞同：1
> 
> 时间：2013-01-31T09:35:27.667
> 
> 标签：java, object, set

有什么好的建议如何处理存储在集合中的可变对象？

一些对象可以根据它们的内部状态定义它们的相等性（和 hashCode）。当这些对象存储在集合中，在受控代码之内或之外时，状态的突变可能会导致集合中的不一致。

除了不这样做之外，是否有任何“最佳实践”来避免或处理它？

示例代码：

```
static class A {
   String s;
   public boolean equals(Object o) {
      return s.equals(((A)o).s);
   }
   public int hashCode() { 
      return s.hashCode();
   }
   public String toString() {
      return s;
   }

}

public static void main(String[] args) {
  A a0 = new A();
  a0.s = "Hello";
  A a1 = new A();
  a1.s = "World";

  HashSet<A> set = new HashSet<A>();
  set.add(a0);
  set.add(a1);

  System.out.println(set);

  a0.s = "World";

  System.out.println(set);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:46:19.623

在某些时候，开发团队在处理实体集合时遇到了很多这个问题，这些实体集合在存储到数据库之前只获得了它们的密钥。他们的哈希码/等于取决于那个键......

我们提出的解决方案是这样的：

```
public static <P> void rearrange(Set<P> set) {
    HashSet<P> temp = new HashSet<P>();
    temp.addAll(set);
    set.clear();
    set.addAll(temp);
} 
```

另一个想法是装饰一个 HashSet 的 Set 实现，但我们很快决定从长远来看这会导致更多问题。在大多数情况下，上述方法是由“框架”代码对开发人员透明地执行的，但我对这个解决方案仍然不是特别满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:55:28.733

**Set**接口不提供任何获取值的方法，这样做是有原因的。 [Java 集 API](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

所以它不期望你得到一个值，修改它然后再次添加它。在您的代码中，这就是您所做的；您修改了 Set 中存储的值。

所以理想情况下你应该避免它，但如果你想修改 Set 中的任何对象，请执行以下步骤：

1.  从集合中移除对象
2.  添加一个新的修改对象

这样，您的**哈希码/平等**合同将得到保证。

# javascript - 在鼠标单击时选择一个与另一个透明 div 重叠的元素

> ID：14622511
> 
> 赞同：5
> 
> 时间：2013-01-31T09:35:36.047
> 
> 标签：javascript, jquery, html, image, mouseevent

我正在开发一个仪表板，用户可以在其中**拖放**元素以创建 html 页面。现在，他可以使用图像组件拥有多个图像。我们已经设法计算了`z-index`图像的数量，并且可以使用上下键对其进行调整。

**问题：**
我们面临的问题是当我们选择一个图像组件时，我们在它上面附加了一个虚线层，以帮助用户轻松拖动和调整它的大小。如果用户如下图所示放置**图像**![重叠元素](../Images/ddc1814d814f522dadd5161da146a153.png)

我们无法再次选择内部图像，因为`z-index`选择 div（**带有蓝点的那个**）是（必须是）最高的（最高 bcoz，我们必须将它用于所有组件）。所以如果我尝试选择内部图像现在无法选择。我该如何处理这种情况？作为参考，它可以按预期在[此站点上运行。](http://app.imcreator.com)
我相信当它被点击时我们已经得到了父元素下的元素。但不知道如何！我们正在使用**javascript，jquery**来处理事件。

![在此处输入图像描述](../Images/87e4abb2445b31229d0d575101f1aa7d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:55:41.033

可以使用 JavaScript 或 jQuery 来获取内图的位置，当用户点击外图时，查看鼠标位置是否在小图的范围内。范围可以通过内部元素的位置、宽度和高度来计算。

要获取元素的位置：使用 jQuery`.offset()`或`.position()`（前者相对于文档，后者相对于父级）。

获取鼠标位置：[http ://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials%3aMouse_Position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T14:26:45.590

您可以考虑快速隐藏遮罩元素以收集底层元素的坐标，完成后，您可以重新启用遮罩元素的可见性。用于`document.elementFromPoint()`从鼠标坐标中获取 DOM 项。

一个例子：

[http://jsfiddle.net/s94cnckm/14/](http://jsfiddle.net/s94cnckm/14/)

`pointer-events: none;`或者，您可以在屏蔽元素上使用 CSS 属性。

有关的：

[https://developer.mozilla.org/de/docs/Web/CSS/pointer-events](https://developer.mozilla.org/de/docs/Web/CSS/pointer-events)

[如何检测重叠元素下的点击？](https://stackoverflow.com/questions/29518070/how-to-detecting-a-click-under-an-overlapping-element)

# objective-c - 如果我删除 CFRelease，此代码会泄漏吗？

> ID：14622512
> 
> 赞同：2
> 
> 时间：2013-01-31T09:35:42.673
> 
> 标签：objective-c, xcode4.5

```
 CTFontRef font = CTFontCreateWithName((__bridge  CFStringRef)boldSystemFont.fontName, boldSystemFont.pointSize, NULL);
    NSRange  rangeHighlight = NSMakeRange(range.location, substringToHighlight.length);
    if (font) {
        [mutableAttributedString addAttribute:(NSString *)kCTFontAttributeName value:(__bridge  id)font range:rangeHighlight];
        CFRelease(font); //Is this still necessary?
    } 
```

[我从https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)复制并粘贴此代码

```
 CTFontRef font = CTFontCreateWithName((CFStringRef)boldSystemFont.fontName, boldSystemFont.pointSize, NULL);
  if (font) {
    [mutableAttributedString addAttribute:(NSString *)kCTFontAttributeName value:(id)font range:boldRange];
    [mutableAttributedString addAttribute:@"TTTStrikeOutAttribute" value:[NSNumber numberWithBool:YES] range:strikeRange];
    CFRelease(font);
  } 
```

当我这样做时，我得到一个错误，说我必须使用关键字 __bridge。它是什么？我把它和编译错误停止。但后来我想知道我是否还需要使用 CFRelease(font)

此外

1.  CFRelease 中的 CF 是什么？
2.  什么是__bridge？
3.  使用 __bridge 后我应该做 CFRelease(font) 吗？
4.  我在哪里可以了解更多信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:53:01.547

是的，您仍然需要使用 CFRelease(font)。

您仍然是创建*字体*的人，因此您也需要发布它。__bridge 部分与字体*名称*是否保留有关。

1.  CF 是 Core Foundation 的缩写，它是 Foundation 所基于的 C 级 API。CFRelease 是您发布核心基础对象的方式。

2.  __bridge 告诉 ARC 在将对象转换为 Core Foundation 对象时应该如何保留或不保留对象。[这个问题](https://stackoverflow.com/q/7036350/608157)解释了不同的 __bridge 类型。

3.  您仍然应该释放（如上所述）。

4.  搜索“核心基础”。设计[概念](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/CFDesignConcepts.html#//apple_ref/doc/uid/10000122i)解释了一般设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:53:56.067

1.  CF 代表“核心基金会”。CTFontRef 是 Core Foundation 类型，因此您可以使用 CFRelease() 释放它。

2.  `__bridge`是从可保留类型转换为不可保留类型（反之亦然）时使用的关键字，用于告诉编译器不应发生所有权更改。

3.  是的，因为`__bridge`不会改变所有者的身份。

4.  [该文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)相当全面。

# java - 我应该使用公共访问还是包访问？为什么我应该对字段使用私有？

> ID：14622514
> 
> 赞同：0
> 
> 时间：2013-01-31T09:35:46.980
> 
> 标签：java

所以2个问题：

1.  我应该为我的课程使用公共访问还是包访问？在每个项目中，我的所有类都保存在一个包中，并且我从不在其他项目中使用它们的任何方法。那么我需要公共访问权限吗？我认为包裹对我来说没问题。而且会更安全。
2.  我知道将字段设为私有并为它们创建 getter 和 setter 的习惯。我也理解密封的概念，但是在我读到关于制作 getter 和 setter 的哲学的任何地方，我都只有一个理由：“你必须做 getter 或 setter，这样你才能确定一个变量不会直接用于程序的其他部分。感谢这样您就可以确保您可以在此类 getter 更改中进行（例如决定返回什么值的 if 语句），并确保每个部分的行为都会如此”。但在 99.9% 的 getter 中，只返回类私有值。几乎每次 getter 都只有 1 行“return XXX”。那么还有其他使用吸气剂的可能性吗？和二传手？我曾经从我的项目中删除了 getter 和 setter，公开了字段，我得到的是我的项目缩小了近 30%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:44:44.493

将所有字段设为私有并根据需要实现 getter 和 setter 通常是一个好主意。这样，您可以确保不会以意外的方式使用/更改字段。例如，您可以将错误检查代码添加到您的设置器中，以确保字段未设置为会破坏其他内容的值。如果其他类可以直接设置该字段，则无法阻止。

如果您有充分的理由创建具有包可见性或公开的字段，那么您当然可以这样做，但您必须知道如果其他人/类以错误的方式使用您的字段会导致什么问题。

它可能不会对您的小项目产生太大影响，因为您知道不要将字段设置为错误的值，否则会搞砸 - 但如果其他人使用您的类或您的项目规模扩大，您将欣赏事实上，实际字段是私有的，您可以通过 getter/setter 控制访问。

# java - 代码如何工作 - 应用于样式时的“SWT.MULTI | SWT.SINGLE”

> ID：14622516
> 
> 赞同：1
> 
> 时间：2013-01-31T09:35:49.287
> 
> 标签：java, swt, operators

这是我一段时间以来看到的代码。我想知道代码是如何工作的。

```
public static final int MULTI = 1 << 1;
public static final int SINGLE = 1 << 2;
public static final int READ_ONLY = 1 << 3;
SWT.MULTI | SWT.SINGLE | SWT.READ_ONLY 
```

我深入研究了类的实现`TableViewer(Composite parent, int style)`以寻找答案，但没有找到太多。

我找到了这段代码，但不太明白

```
static int checkBits (int style, int int0, int int1, int int2, int int3, int int4, int int5) {
int mask = int0 | int1 | int2 | int3 | int4 | int5;
if ((style & mask) == 0) style |= int0;
if ((style & int0) != 0) style = (style & ~mask) | int0;
if ((style & int1) != 0) style = (style & ~mask) | int1;
if ((style & int2) != 0) style = (style & ~mask) | int2;
if ((style & int3) != 0) style = (style & ~mask) | int3;
if ((style & int4) != 0) style = (style & ~mask) | int4;
if ((style & int5) != 0) style = (style & ~mask) | int5;
return style;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:00:45.400

**将位打包在一起**

让我们看一下这段代码。

```
public static final int MULTI = 1 << 1;
public static final int SINGLE = 1 << 2;
public static final int READ_ONLY = 1 << 3; 
```

“<<”运算符表示向左移动位。“<<”运算符后面的数字告诉我们要移动多少位。

因此，另一种编写代码的方式是。

```
public static final int MULTI = 2;
public static final int SINGLE = 4;
public static final int READ_ONLY = 8; 
```

通过以这种方式定义标志，这些值可以被或（“加”）在一起并保存在一个字节或一个整数中。

```
SWT.MULTI | SWT.SINGLE 
```

这就是说将两个值的位组合在一起。但是，这是什么意思？

在这种情况下，由于我们将值定义为单个位，因此与添加值相同。

```
MULTI = 2
SINGLE = 4 
```

因此，状态值为 6 (2 + 4)。

现在请记住，我们没有添加。因为我们使用的是位，所以效果就像我们在添加一样。

**拆包位**

您发布的第二段代码基本上采用了我们提出的 6，然后将其拆分为 2 和 4。它的工作原理是检查每一位，一次一个，看看它是否存在。

让我们拿一条线，看看它在做什么。

```
if ((style & int1) != 0) style = (style & ~mask) | int1; 
```

`int1`表示样式位之一。为了便于讨论，假设它是 MULTI，值为 2。

第一部分（if 条件）测试是否在样式整数中设置了该位。

第二部分有点棘手。（一点，明白了。非常双关语。）

mask 的值在代码中给出。

```
int mask = int0 | int1 | int2 | int3 | int4 | int5; 
```

这只是所有状态值 OR'd 在一起。从我们最初的 MULTI、SINGLE 和 READ_ONLY 示例中，我们得到了 x'0E' 或 14 的掩码。在接下来的讨论中，我将使用十六进制。

*存在状态位*

现在，回到我们正在谈论的那一行。

```
if ((style & int1) != 0) style = (style & ~mask) | int1; 
```

`style & int1`是一个 AND 操作。这意味着必须在`style`和中设置该位`int1`。 `Style`是我们之前设置时的 x'06' (2 + 4)。 `int1`是 x'02'。当你 AND x'06' 和 x'02' 时，你会得到 x'02'，这就是 if 的值`true`。

`~mask`将 x'0E' 转换为 x'F1'。换句话说，所有位都从 0 翻转到 1，从 1 翻转到 0。

`style & ~mask`是一个 AND 操作。当你 AND x'06' 和 x'F1' 时，你得到 x'00'。换句话说，没有一个位匹配。

前面我们说过int1是MULTI，取值为2或者x'02'。现在我们做一个 OR 操作，我们之前解释过。对 x'00' 和 x'02' 进行 ORing 得到 x'02'，这是我们想要提取的 MULTI 值。

*状态位不存在*

另一种选择（当状态位不存在时）会导致略有不同的结果。我们没有设置 READ_ONLY，所以让我们来计算一下。

READ_ONLY 是 x'08'。样式为 x'06' 当您将这些值与 if 中的值一起使用时

```
if ((style & int1) != 0) style = (style & ~mask) | int1; 
```

你得到 x'00'，这导致 if 的值为`false`。

**理由**

将多个状态值放入一个字节或字的最初原因是为了节省内存。这在 40 年前计算机内存有限的时候很重要。现在，这样做是为了方便传递状态。不是将 7 或 15 个不同的状态指示器从一种方法传递到另一种方法，而是传递一个状态指示器。

如您所见，折衷是需要一些代码来提取状态位，以便您可以使用它们。

# android - Nexus7模拟器创建后崩溃

> ID：14622517
> 
> 赞同：7
> 
> 时间：2013-01-31T09:35:51.607
> 
> 标签：android, crash, emulation, nexus-7

我面临着模拟器的另一个问题。

首先，我在使用消息创建模拟器（Nexus 7）时遇到了问题

> 模拟器：打开HAX设备失败！HAX 不工作，模拟器在模拟模式下运行 模拟器：打开 HAX 设备失败 分配内存失败：8 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

[按照此处](https://stackoverflow.com/questions/10761696/android-running-the-new-intel-emulator)帖子中的说明进行操作后，我能够创建 nexus 模拟器。

运行创建的模拟器并点击菜单后，它会重定向到菜单屏幕（模拟器上已安装应用程序的列表），因为它是一个新创建的屏幕，并且屏幕上会出现引导屏幕（参见屏幕截图），单击“确定”按钮菜单屏幕只是崩溃并显示“不幸的是，启动器已停止”消息，请检查我附加的以下屏幕。

让我知道，如果我可以提供有关此问题的更多信息以解决此问题。

注意：使用 Android SDK 工具 – 21.0.1 ![第一个屏幕](../Images/673555d1c23712b5ddda1abfe37a0662.png) ![应用程序列表](../Images/21ab50df4c6da7c5947a2242e98b7fda.png) ![碰撞](../Images/7c43f99775c1775a3dc56003a0e3ba30.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T13:42:41.580

Nexus 7 模拟器上似乎有一个奇怪的错误。当您打开模拟器时，它会显示打开抽屉并显示“选择一些应用程序”。如果您实际按住它显示的自定义区域设置图标并将其放到主屏幕上，而不是按 OK 按钮，则启动器将停止崩溃。这看起来很奇怪，但是当我这样做时，崩溃停止了。这只需要在第一次完成。然后，模拟器正常打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T08:34:34.953

发生此问题的原因是 AVD 的 config.ini 中未正确分配 AVD 皮肤路径

对于前。我的 AVD 名称是**AVD_4.0.3_WSVGA**

修复前

**skin.path=AVD_4.0.3_WSVGA**

所以我改变了皮肤路径如下

**skin.path=platforms/android-15/skins/WSVGA**

你可以找到 config.ini

在 linux(Ubuntu) /home/[用户名]/. **android/avd/[你的 avd 名称]/config.ini**

# iphone - 在 GameCenter 上设置平均分排行榜

> ID：14622522
> 
> 赞同：1
> 
> 时间：2013-01-31T09:36:00.750
> 
> 标签：iphone, objective-c, game-center

我正在尝试在游戏中心设置平均得分排行榜。我一直在尝试查看是否有某种对平均分数的本机支持，但找不到任何东西。发送本地计算的平均分数不起作用，因为根据您设置的排行榜类型，gamecenter 会获得最高分数或最低分数，但您无法设置每次更新的分数。

有谁知道一个好的解决方案？

# python - 根据 Google BigQuery 中的查询结果创建表

> ID：14622526
> 
> 赞同：19
> 
> 时间：2013-01-31T09:36:18.210
> 
> 标签：python, google-app-engine, google-bigquery

我们通过 Python API使用[Google BigQuery 。](https://developers.google.com/bigquery/)如何从查询结果创建表（新表或覆盖旧表）？我查看了[查询文档](https://developers.google.com/bigquery/docs/queries)，但没有发现它有用。

我们要模拟：

> 来自 ANSI SQL 的“SELEC ... INTO ...”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T20:38:00.753

您可以通过在查询中指定目标表来执行此操作。您将需要使用`Jobs.insert`API 而不是`Jobs.query`调用，并且您应该指定`writeDisposition=WRITE_APPEND`并填写目标表。

如果您使用的是原始 API，下面是配置的样子。如果您使用的是 Python，Python 客户端应该为这些相同的字段提供访问器：

```
"configuration": {
  "query": {
    "query": "select count(*) from foo.bar",
    "destinationTable": {
      "projectId": "my_project",
      "datasetId": "my_dataset",
      "tableId": "my_table"
    },
    "createDisposition": "CREATE_IF_NEEDED",
    "writeDisposition": "WRITE_APPEND",
  }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-05-22T16:12:25.363

接受的答案是正确的，但它没有提供 Python 代码来执行任务。这是一个示例，重构自我刚刚编写的一个小型自定义客户端类。它不处理异常，并且应该定制硬编码查询来做一些更有趣的事情，而不仅仅是`SELECT *`......

```
import time

from google.cloud import bigquery
from google.cloud.bigquery.table import Table
from google.cloud.bigquery.dataset import Dataset

class Client(object):

    def __init__(self, origin_project, origin_dataset, origin_table,
                 destination_dataset, destination_table):
        """
        A Client that performs a hardcoded SELECT and INSERTS the results in a
        user-specified location.

        All init args are strings. Note that the destination project is the
        default project from your Google Cloud configuration.
        """
        self.project = origin_project
        self.dataset = origin_dataset
        self.table = origin_table
        self.dest_dataset = destination_dataset
        self.dest_table_name = destination_table
        self.client = bigquery.Client()

    def run(self):
        query = ("SELECT * FROM `{project}.{dataset}.{table}`;".format(
            project=self.project, dataset=self.dataset, table=self.table))

        job_config = bigquery.QueryJobConfig()

        # Set configuration.query.destinationTable
        destination_dataset = self.client.dataset(self.dest_dataset)
        destination_table = destination_dataset.table(self.dest_table_name)
        job_config.destination = destination_table

        # Set configuration.query.createDisposition
        job_config.create_disposition = 'CREATE_IF_NEEDED'

        # Set configuration.query.writeDisposition
        job_config.write_disposition = 'WRITE_APPEND'

        # Start the query
        job = self.client.query(query, job_config=job_config)

        # Wait for the query to finish
        job.result() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T06:23:58.350

根据 Google BigQuery 中的查询结果创建表。假设您正在使用带有 Python 3 的 Jupyter Notebook，将解释以下步骤：

1.  如何在 BQ 上创建新数据集（保存结果）
2.  如何在 BQ 上以表格格式运行查询并将结果保存在新数据集中

在 BQ 上创建一个新的 DataSet：my_dataset

```
bigquery_client  = bigquery.Client() #Create a BigQuery service object
dataset_id = 'my_dataset' 
dataset_ref = bigquery_client.dataset(dataset_id) # Create a DatasetReference using a chosen dataset ID.
dataset = bigquery.Dataset(dataset_ref)  # Construct a full Dataset object to send to the API.
dataset.location = 'US' # Specify the geographic location where the new dataset will reside. Remember this should be same location as that of source data set from where we are getting data to run a query

# Send the dataset to the API for creation. Raises google.api_core.exceptions.AlreadyExists if the Dataset already exists within the project.
dataset = bigquery_client.create_dataset(dataset)  # API request
print('Dataset {} created.'.format(dataset.dataset_id)) 
```

使用 Python 在 BQ 上运行查询：

这里有 2 种类型：

1.  允许大结果
2.  查询而不提及大结果等。

我在这里使用公共数据集：bigquery-public-data:hacker_news & Table id: comments 来运行查询。

### 允许大结果

```
DestinationTableName='table_id1'  #Enter new table name you want to give
!bq query --allow_large_results --destination_table=project_id:my_dataset.$DestinationTableName 'SELECT * FROM [bigquery-public-data:hacker_news.comments]' 
```

如果需要，此查询将允许较大的查询结果。

### 无需提及--allow_large_results：

```
DestinationTableName='table_id2'  #Enter new table name you want to give
!bq query destination_table=project_id:my_dataset.$DestinationTableName 'SELECT * FROM [bigquery-public-data:hacker_news.comments] LIMIT 100' 
```

这将适用于结果不会超过 Google BQ 文档中提到的限制的查询。 [![在此处输入图像描述](../Images/b047c325eeeb842fb3f98434f3c391e3.png)](https://i.stack.imgur.com/b6gZA.png)

### 输出：

1.  BQ 上名为 my_dataset 的新数据集
2.  在 my_dataset 中保存为表的查询结果

### 笔记：

1.  这些查询是您可以在终端上运行的命令（开头不带 !）。但是当我们使用 Python 来运行这些命令/查询时，我们正在使用 !。这也将使我们能够在 Python 程序中使用/运行命令。
2.  也请赞成答案:)。谢谢你。

# python - string.decode 自定义错误参数

> ID：14622527
> 
> 赞同：5
> 
> 时间：2013-01-31T09:36:18.773
> 
> 标签：python

我有这个 Python 2.7 代码：

```
# coding: utf-8
#
f = open('data.txt', 'r')

for line in f:
  line = line.decode(encoding='utf-8', errors='foo23')
  print len(line)

f.close() 
```

为什么 Python 不会发出错误，因为唯一有效/注册的错误编解码器是：

*   严格的
*   忽视
*   代替
*   xmlcharreplace
*   反斜杠替换

[文档](http://docs.python.org/2/library/stdtypes.html#str.decode)说你可以注册自己的，但我没有注册'foo23'，Python代码仍然运行没有错误/警告。如果我更改编码参数，则会引发错误，但如果我将错误更改为自定义字符串，则一切正常。

```
line = line.decode(encoding='utf-9', errors='foo23')

 File "parse.py", line 7, in <module>
line = line.decode(encoding='utf-9', errors='foo23')
LookupError: unknown encoding: utf-9 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T09:48:28.607

如果解码过程中没有错误；不使用`errors`参数，只要它是一个字符串，它的值就无关紧要：

```
>>> b'\x09'.decode('utf-8', errors='abc')
u'\t' 
```

如果无法使用给定的编码解码字节，则使用错误处理程序，如果您指定不存在的错误处理程序，则会收到错误：

```
>>> b'\xff'.decode('utf-8', errors='abc')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "../lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
LookupError: unknown error handler name 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:43:46.847

keywork`errors`参数是让您告诉`str.decode()`函数您希望如何处理错误，它本身不会引发任何错误。您在第二个示例中遇到错误的原因是您`encoding`向函数传递了一个无效的参数，并且没有其他原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T06:58:15.987

如[jfs 的回答](https://stackoverflow.com/a/14622761)中所述，在提供无效的错误处理程序时，您很可能不会收到错误，因为当解码没有错误时，Python 不会检查错误处理程序是否有效。

然而，值得注意的是，这种行为是依赖于实现的。如您所见，在 CPython 中，`encode`and`decode`函数在遇到错误之前不会检查是否存在错误处理程序。

相反，在 IronPython 中，`encode`and`decode`函数在尝试编码/解码之前检查指定的错误处理程序是否存在，因此，您提供的示例代码会产生如下错误：

```
Traceback (most recent call last):
  File ".\code.py", line 6, in <module>
LookupError: unknown error handler name 'foo23' 
```

当然，在这种情况下，其他 Python 实现可能会有不同的行为。

* * *

我想验证 CPython 实际上是在等待验证错误处理程序，直到遇到解码错误而 IronPython 没有，所以我检查了这两种实现的源代码。

# CPython

以下是Python 2.6.2 文件中的`PyUnicode_DecodeUTF8Stateful`函数代码。`unicodeobject.c`这个函数似乎完成了解码 UTF-8 编码字节的大部分工作。

```
PyObject *PyUnicode_DecodeUTF8Stateful(const char *s,
                                       Py_ssize_t size,
                                       const char *errors,
                                       Py_ssize_t *consumed)
{
    const char *starts = s;
    int n;
    Py_ssize_t startinpos;
    Py_ssize_t endinpos;
    Py_ssize_t outpos;
    const char *e;
    PyUnicodeObject *unicode;
    Py_UNICODE *p;
    const char *errmsg = "";
    PyObject *errorHandler = NULL;
    PyObject *exc = NULL;

    /* Note: size will always be longer than the resulting Unicode
       character count */
    unicode = _PyUnicode_New(size);
    if (!unicode)
        return NULL;
    if (size == 0) {
        if (consumed)
            *consumed = 0;
        return (PyObject *)unicode;
    }

    /* Unpack UTF-8 encoded data */
    p = unicode->str;
    e = s + size;

    while (s < e) {
        Py_UCS4 ch = (unsigned char)*s;

        if (ch < 0x80) {
            *p++ = (Py_UNICODE)ch;
            s++;
            continue;
        }

        n = utf8_code_length[ch];

        if (s + n > e) {
            if (consumed)
                break;
            else {
                errmsg = "unexpected end of data";
                startinpos = s-starts;
                endinpos = size;
                goto utf8Error;
            }
        }

        switch (n) {

        case 0:
            errmsg = "unexpected code byte";
            startinpos = s-starts;
            endinpos = startinpos+1;
            goto utf8Error;

        case 1:
            errmsg = "internal error";
            startinpos = s-starts;
            endinpos = startinpos+1;
            goto utf8Error;

        case 2:
            if ((s[1] & 0xc0) != 0x80) {
                errmsg = "invalid data";
                startinpos = s-starts;
                endinpos = startinpos+2;
                goto utf8Error;
            }
            ch = ((s[0] & 0x1f) << 6) + (s[1] & 0x3f);
            if (ch < 0x80) {
                startinpos = s-starts;
                endinpos = startinpos+2;
                errmsg = "illegal encoding";
                goto utf8Error;
            }
            else
                *p++ = (Py_UNICODE)ch;
            break;

        case 3:
            if ((s[1] & 0xc0) != 0x80 ||
                (s[2] & 0xc0) != 0x80) {
                errmsg = "invalid data";
                startinpos = s-starts;
                endinpos = startinpos+3;
                goto utf8Error;
            }
            ch = ((s[0] & 0x0f) << 12) + ((s[1] & 0x3f) << 6) + (s[2] & 0x3f);
            if (ch < 0x0800) {
                /* Note: UTF-8 encodings of surrogates are considered
                   legal UTF-8 sequences;

                   XXX For wide builds (UCS-4) we should probably try
                   to recombine the surrogates into a single code
                   unit.
                */
                errmsg = "illegal encoding";
                startinpos = s-starts;
                endinpos = startinpos+3;
                goto utf8Error;
            }
            else
                *p++ = (Py_UNICODE)ch;
            break;

        case 4:
            if ((s[1] & 0xc0) != 0x80 ||
                (s[2] & 0xc0) != 0x80 ||
                (s[3] & 0xc0) != 0x80) {
                errmsg = "invalid data";
                startinpos = s-starts;
                endinpos = startinpos+4;
                goto utf8Error;
            }
            ch = ((s[0] & 0x7) << 18) + ((s[1] & 0x3f) << 12) +
                ((s[2] & 0x3f) << 6) + (s[3] & 0x3f);
            /* validate and convert to UTF-16 */
            if ((ch < 0x10000)        /* minimum value allowed for 4
                                         byte encoding */
                || (ch > 0x10ffff))   /* maximum value allowed for
                                         UTF-16 */
            {
                errmsg = "illegal encoding";
                startinpos = s-starts;
                endinpos = startinpos+4;
                goto utf8Error;
            }
#ifdef Py_UNICODE_WIDE
            *p++ = (Py_UNICODE)ch;
#else
            /*  compute and append the two surrogates: */

            /*  translate from 10000..10FFFF to 0..FFFF */
            ch -= 0x10000;

            /*  high surrogate = top 10 bits added to D800 */
            *p++ = (Py_UNICODE)(0xD800 + (ch >> 10));

            /*  low surrogate = bottom 10 bits added to DC00 */
            *p++ = (Py_UNICODE)(0xDC00 + (ch & 0x03FF));
#endif
            break;

        default:
            /* Other sizes are only needed for UCS-4 */
            errmsg = "unsupported Unicode code range";
            startinpos = s-starts;
            endinpos = startinpos+n;
            goto utf8Error;
        }
        s += n;
        continue;

      utf8Error:
        outpos = p-PyUnicode_AS_UNICODE(unicode);
        if (unicode_decode_call_errorhandler(
                errors, &errorHandler,
                "utf8", errmsg,
                starts, size, &startinpos, &endinpos, &exc, &s,
                &unicode, &outpos, &p))
            goto onError;
    }
    if (consumed)
        *consumed = s-starts;

    /* Adjust length */
    if (_PyUnicode_Resize(&unicode, p - unicode->str) < 0)
        goto onError;

    Py_XDECREF(errorHandler);
    Py_XDECREF(exc);
    return (PyObject *)unicode;

  onError:
    Py_XDECREF(errorHandler);
    Py_XDECREF(exc);
    Py_DECREF(unicode);
    return NULL;
} 
```

我们可以看到这个函数调用了另一个函数 ，`unicode_decode_call_errorhandler`它实际上是使用错误处理程序的。该函数的代码如下

```
static
int unicode_decode_call_errorhandler(const char *errors, PyObject **errorHandler,
                                     const char *encoding, const char *reason,
                                     const char *input, Py_ssize_t insize, Py_ssize_t *startinpos,
                                     Py_ssize_t *endinpos, PyObject **exceptionObject, const char **inptr,
                                     PyUnicodeObject **output, Py_ssize_t *outpos, Py_UNICODE **outptr)
{
    static char *argparse = "O!n;decoding error handler must return (unicode, int) tuple";

    PyObject *restuple = NULL;
    PyObject *repunicode = NULL;
    Py_ssize_t outsize = PyUnicode_GET_SIZE(*output);
    Py_ssize_t requiredsize;
    Py_ssize_t newpos;
    Py_UNICODE *repptr;
    Py_ssize_t repsize;
    int res = -1;

    if (*errorHandler == NULL) {
        *errorHandler = PyCodec_LookupError(errors);
        if (*errorHandler == NULL)
            goto onError;
    }

    if (*exceptionObject == NULL) {
        *exceptionObject = PyUnicodeDecodeError_Create(
            encoding, input, insize, *startinpos, *endinpos, reason);
        if (*exceptionObject == NULL)
            goto onError;
    }
    else {
        if (PyUnicodeDecodeError_SetStart(*exceptionObject, *startinpos))
            goto onError;
        if (PyUnicodeDecodeError_SetEnd(*exceptionObject, *endinpos))
            goto onError;
        if (PyUnicodeDecodeError_SetReason(*exceptionObject, reason))
            goto onError;
    }

    restuple = PyObject_CallFunctionObjArgs(*errorHandler, *exceptionObject, NULL);
    if (restuple == NULL)
        goto onError;
    if (!PyTuple_Check(restuple)) {
        PyErr_SetString(PyExc_TypeError, &argparse[4]);
        goto onError;
    }
    if (!PyArg_ParseTuple(restuple, argparse, &PyUnicode_Type, &repunicode, &newpos))
        goto onError;
    if (newpos<0)
        newpos = insize+newpos;
    if (newpos<0 || newpos>insize) {
        PyErr_Format(PyExc_IndexError, "position %zd from error handler out of bounds", newpos);
        goto onError;
    }

    /* need more space? (at least enough for what we
       have+the replacement+the rest of the string (starting
       at the new input position), so we won't have to check space
       when there are no errors in the rest of the string) */
    repptr = PyUnicode_AS_UNICODE(repunicode);
    repsize = PyUnicode_GET_SIZE(repunicode);
    requiredsize = *outpos + repsize + insize-newpos;
    if (requiredsize > outsize) {
        if (requiredsize<2*outsize)
            requiredsize = 2*outsize;
        if (_PyUnicode_Resize(output, requiredsize) < 0)
            goto onError;
        *outptr = PyUnicode_AS_UNICODE(*output) + *outpos;
    }
    *endinpos = newpos;
    *inptr = input + newpos;
    Py_UNICODE_COPY(*outptr, repptr, repsize);
    *outptr += repsize;
    *outpos += repsize;
    /* we made it! */
    res = 0;

  onError:
    Py_XDECREF(restuple);
    return res;
} 
```

由于使用错误处理程序`PyUnicode_DecodeUTF8Stateful`调用，因此调用最终验证提供的错误处理程序。请参阅下面的代码。`unicode_decode_call_errorhandler``NULL``unicode_decode_call_errorhandler``PyCodec_LookupError`

```
PyObject *PyCodec_LookupError(const char *name)
{
    PyObject *handler = NULL;

    PyInterpreterState *interp = PyThreadState_GET()->interp;
    if (interp->codec_search_path == NULL && _PyCodecRegistry_Init())
    return NULL;

    if (name==NULL)
    name = "strict";
    handler = PyDict_GetItemString(interp->codec_error_registry, (char *)name);
    if (!handler)
    PyErr_Format(PyExc_LookupError, "unknown error handler name '%.400s'", name);
    else
    Py_INCREF(handler);
    return handler;
} 
```

请注意，该`PyUnicode_DecodeUTF8Stateful`调用中的代码位于`unicode_decode_call_errorhandler`utf8Error 标签下，只有在解码中遇到错误时才能访问该标签。

* * *

# 铁蟒

在 IronPython 2.7.9 中，解码在下面的`StringOps.DoDecode`函数 (in `StringOps.cs`) 中处理。

```
internal static string DoDecode(CodeContext context, string s, string errors, string encoding, Encoding e, bool final, out int numBytes) {
    byte[] bytes = s.MakeByteArray();
    int start = GetStartingOffset(e, bytes);
    numBytes = bytes.Length - start;

#if FEATURE_ENCODING
    // CLR's encoder exceptions have a 1-1 mapping w/ Python's encoder exceptions
    // so we just clone the encoding & set the fallback to throw in strict mode.
    e = (Encoding)e.Clone();

    switch (errors) {
        case "backslashreplace":
        case "xmlcharrefreplace":
        case "strict": e.DecoderFallback = final ? DecoderFallback.ExceptionFallback : new ExceptionFallBack(numBytes, e is UTF8Encoding); break;
        case "replace": e.DecoderFallback = ReplacementFallback; break;
        case "ignore": e.DecoderFallback = new PythonDecoderFallback(encoding, s, null); break;
        default:
            e.DecoderFallback = new PythonDecoderFallback(encoding, s, LightExceptions.CheckAndThrow(PythonOps.LookupEncodingError(context, errors)));
            break;
    }
#endif

    string decoded = e.GetString(bytes, start, numBytes);

#if FEATURE_ENCODING
    if (e.DecoderFallback is ExceptionFallBack fallback) {
        byte[] badBytes = fallback.buffer.badBytes;
        if (badBytes != null) {
            numBytes -= badBytes.Length;
        }
    }
#endif

    return decoded;
} 
```

这里的`DoDecode`函数是`switch`在解码之前在语句中创建错误处理程序。如果包含错误处理`errors`程序（`DoDecode``PythonDecoderFallback``PythonOps.LookupEncodingError`

```
[LightThrowing]
internal static object LookupEncodingError(CodeContext/*!*/ context, string name) {
    Dictionary<string, object> errorHandlers = context.LanguageContext.ErrorHandlers;
    lock (errorHandlers) {
        if (errorHandlers.ContainsKey(name))
            return errorHandlers[name];
        else
            return LightExceptions.Throw(PythonOps.LookupError("unknown error handler name '{0}'", name));
    }
} 
```

当在字典中`LookupEncodingError`找不到带有给定的错误处理程序时，它会“抛出”一个 LookupError ——即，它创建一个对象并返回它。然后该对象由函数检查，最终在 IronPython 中使用无效错误处理程序调用时产生“未知错误处理程序名称”错误。`name``errorHandlers``LightException``LightException``LightExceptions.CheckAndThrow``decode`

同样，所有这些都发生在调用对象的方法`DoDecode`之前，因此无论是否存在解码错误，IronPython 都会使用无效的错误处理程序产生错误。`Encoding``GetString`

# reporting-services - 计算 ssrs 中 2 列之间的方差

> ID：14622529
> 
> 赞同：0
> 
> 时间：2013-01-31T09:36:20.733
> 
> 标签：reporting-services

使用 ssrs，我在 2 列中有 2 个字段，其中包含表达式。他们计算百分比如下：

```
FormatPercent(Fields!x.Value/Sum(Fields!x.Value)) 
```

和

```
FormatPercent(Fields!y.Value/Sum(Fields!y.Value)) 
```

我想要一个计算这些字段之间差异的第三列。我怎样才能做到这一点？

我不能使用计算字段来计算 x 和 y 的百分比，因为它使用聚合，因此我使用表达式。

我不想添加第三个表达式来重做 x 和 y 的计算，如下所示：

```
 FormatPercent(Fields!x.Value/Sum(Fields!x.Value)) - 
           FormatPercent(Fields!y.Value/Sum(Fields!y.Value)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:41:52.833

*   命名显示 2 个不同值的文本框（`txtXPercent`并`txtYpercent`说）
*   使用[`ReportItems`](http://technet.microsoft.com/en-us/library/dd255285.aspx)集合在第三个文本框中引用这些

如

```
=CInt(ReportItems!txtXPercent) - CInt(ReportItems!txtYpercent) 
```

# java - 如何通过发布请求将 JSON 字符串传递给 Jersey Rest Web 服务

> ID：14622531
> 
> 赞同：7
> 
> 时间：2013-01-31T09:36:26.057
> 
> 标签：java, web-services, rest, jersey, jax-ws

我想创建一个接受 JSON 字符串作为输入参数的 REST Jersey Web 服务。

此外，我将使用来自 webmethod 的发布请求，我将返回一个 JSON 字符串。

如何使用 Ajax 发布请求在 HTML 页面中使用它。我想知道我需要在 Web 方法上进行哪些更改才能接受 JSON 字符串。

```
 public class Hello {

      @POST
     public String sayPlainTextHello() {
      return "Hello Jersey";
      }
   } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-31T10:11:40.183

需要分解您的请求。首先，您要接受 JSON 字符串。所以在你的方法上你需要

```
@Consumes(MediaType.APPLICATION_JSON) 
```

接下来，您需要决定您希望您的方法获得什么。您可以按照您的建议获取 JSON 字符串，在这种情况下，您的方法将如下所示：

```
@Consumes(MediaType.APPLICATION_JSON)
public String sayPlainTextHello(final String input) { 
```

或者，如果您的 JSON 字符串映射到 Java 对象，您可以直接获取该对象：

```
@Consumes(MediaType.APPLICATION_JSON)
public String sayPlainTextHello(final MyObject input) { 
```

您声明要返回 JSON 字符串。所以你需要：

```
@Produces(MediaType.APPLICATION_JSON) 
```

然后你需要实际返回一个 JSON 字符串：

```
return "{\"result\": \"Hello world\"}"; 
```

所以你的完整方法看起来像这样：

```
@PATH("/hello")
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public String sayPlainTextHello(final String input) {
  return "{\"result\": \"Hello world\"}";
} 
```

关于使用 AJAX 发送和接收，它看起来像这样：

```
var myData="{\"name\": \"John\"}";
var request = $.ajax({
    url: "/hello",
    type: "post",
    data: myData
});

request.done(function (response, textStatus, jqXHR){
    console.log("Response from server: " + response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:48:04.643

这将起作用。“path”是在 AJAX 调用中使用的相对 URL 路径。

```
public class Hello {

@POST
@Path("/path")
@Produces({ "text/html" })
 public String sayPlainTextHello() {
  return "Hello Jersey";
  } 
```

}

# c++ - 如何在 iPhone/iPad 目标 C 项目中 #import C++ 头文件

> ID：14622533
> 
> 赞同：0
> 
> 时间：2013-01-31T09:36:31.907
> 
> 标签：c++, iphone, objective-c, xcode, objective-c++

参考问题：[#import C++ Header File in iPhone/iPad Project 时出现问题](https://stackoverflow.com/questions/3890552/problem-when-import-c-header-file-in-iphone-ipad-project)

好吧，我的项目相对庞大，无法解决将项目文件的**全部或****部分**更改为.`.m``.mm`**`File Inspector`**

 **那是因为我的同事和库作者都**没有**严格遵循 C++ 标准，例如分配`void*`给`int*`和其他各种违规行为。Objective C 将允许这些并且只是给出警告。

我想要的 C++ 头文件`#import`是一个库。它在其标头中使用关键字**命名空间**`.a`，而其实现在程序集文件中。这意味着几乎不可能破解它们。除此之外，我的项目还包括其他仅与 Objective C 兼容的库。

有谁知道如何解决这个问题？

我能想象的方式如下：

1.  **找到namespace**的替代方案，但我仍然想`QCAR::Renderer`在我的项目中编写代码。

2.  告诉编译器识别 C++ 头文件（嗯，这可能是不可能的）

**编辑**

```
#ifdef __cplusplus
# include MyCPPHeader.h
#endif 
```

如果我使用它，`MyCPPHeader.h`真的会被包含在 Objective-C 环境中吗？我猜不会。这违反了不入侵图书馆的原则。

**编辑**

即使我更改了这些`.mm`文件以包含该 C++ 标头，我也会收到一个链接错误消息`Undefined symbols for architecture armv7:`。当**我的** `.mm`文件包含 **其他**库中`.h`的标头时会发生这种情况。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T04:34:00.113

一年前我已经解决了这个问题，但是对于正在寻找答案的其他人来说，这里是解决方案。

假设 C++ 样式的标题名为`cpp.h`. 在我的项目中，我从不`#import "cpp.h"`. 我写了一个 C 风格的头文件，命名为`c.h`，作为`cpp.h`. 然后我写了一个C++实现源文件，命名`c.mm`为`c.h`通过调用`cpp.h`. 如果我想在 中调用函数`cpp.h`，我`#import c.h`会改用包装函数。

以下是可能更清晰的解释：

`cpp.h`使用 C++ 风格的头文件`namespace`，它的实现是汇编代码，所以很难改变

`c.h`C 样式标头作为包装器`cpp.h`

`c.mm`C++ 实现`c.h`通过调用函数 in 来实现函数 in`cpp.h`

`#import "c.h"`使用包装函数****

# actionscript-3 - 使用 TextArea 更改文本特定部分的格式

> ID：14622536
> 
> 赞同：0
> 
> 时间：2013-01-31T09:36:40.470
> 
> 标签：actionscript-3, textarea, flash-cs5

我这里有点问题。我正在使用 Action Script 3 在 Flash CS5 中制作一种聊天应用程序，我正在尝试制作出现在主聊天文本框中的 URL（其他人所说的所有内容都出现在这里），这是一个 TextArea组件，被转换成 HTML 链接标签。我有这个工作，但我现在面临的问题是链接显示为黑色。我希望它们带有下划线和蓝色文本。我正在用 格式化 TextArea `TextFormat`，并且我正在使用一些仅在 TextAreas 中可用的功能，所以我不能使用普通的动态标签。我也尝试过使用`style`链接标签的属性，但这并没有做任何事情。

如何更改链接标签的格式以显示为蓝色并带有下划线？

我当前用于将链接更改为 HTML 链接标签的代码如下所示：

```
txtOutput.htmlText += replace(/(?:http|https):\/\/\S*/g, function ():String
{
    return '<a href="' + arguments[0] + '">' + arguments[0] + '</a>'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:09:01.363

看看[样式表](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StyleSheet.html)，您可以在那里实现超链接样式。
**更新：** textArea 有一个 textField 属性。尝试应用他的样式表。

# kernel - 在 OpenCL 上使用 OpenACC？

> ID：14622540
> 
> 赞同：6
> 
> 时间：2013-01-31T09:36:58.857
> 
> 标签：kernel, opencl, openacc

我是 OpenACC 的新手，它是 GPU 加速和 CPU 的新编程标准。据我所知，OpenACC 是一种编译器指令语言，我们可以直接在任何我们想要的地方加速代码，而无需更改整个代码。与 OpenMP 不同，此编程标准也适用于 GPU。

现在我的疑问在这里提出..

我们有用于加速的 OpenCL，现在是 OpenACC（非常易于使用，只需提供编译器提示即可）。对于宿主程序加速，我们可以简单地放置编译器指令，那么如果我们有内核呢？即现在我想为GPU（c语言）编写我的代码，我必须做什么？像 OpenCL 一样，我需要编写 example.c 和 example.cl 吗？那么需要添加OpenACC编译指令吗？或者以哪种方式？如果是这样，那么在这里使用 OpenACC 有什么用，因为我们正在编写 *.c 和 *.cl 文件，（我们需要检查所有内存限制以及所有用于编写 OpenCL 的内容，这是一项艰巨的工作）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T11:02:30.470

实际上，OpenACC 很像 OpenMP，但针对的是 GPU 等加速设备。`#pragma parallel for`与让多线程 CPU 并行化循环的 OpenMP不同，OpenACC`#pragma acc kernels`会将包含的循环转换为在 GPU 上执行的内核函数。现在必须手动完成的大部分工作（例如，将数据从设备传输到设备）都被编译器隐藏了。因此，您没有两个单独的编译单元。

现在这是 OpenACC 的问题，我对为什么现在采用率非常低的回答是：没有来自 GCC 或 Clang 的支持。当然有来自 PGI 和 CAPS 的商业解决方案，但是如果没有这些其他编译器，您将疏远许多用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-11T15:58:28.090

更新：gcc6 现在有部分工作：

> “GCC 6 发布系列包括一个大大改进的 OpenACC 2.0a 规范实现。”

见[https://gcc.gnu.org/wiki/OpenACC](https://gcc.gnu.org/wiki/OpenACC)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-09T03:46:32.277

更新（2020 年 8 月）：

*   [GCC 在 GCC 10 中支持最高版本 2.6 的 OpenACC，](https://gcc.gnu.org/wiki/OpenACC)并且可以针对 nVidia PTX、AMD GCN 和 Intel MIC（至强融核产品）。这意味着支持所有最新的 nVidia 和 AMD Radeon 卡
*   Clang (LLVM) 似乎有[一些实验性支持](https://llvm.org/devmtg/2019-04/slides/Lightning-Denny-clacc.pdf)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-23T09:28:46.017

更新：GCC6 + 7 积极集成 OpenACC 规范

见[https://gcc.gnu.org/wiki/OpenACC](https://gcc.gnu.org/wiki/OpenACC)

# ruby-on-rails - 在 Rails 3 中以单一形式更新和创建多条记录

> ID：14622545
> 
> 赞同：2
> 
> 时间：2013-01-31T09:37:08.227
> 
> 标签：ruby-on-rails

我遵循[railscast #198 Edit Multiple Individually](http://railscasts.com/episodes/198-edit-multiple-individually)，它可以 100% 地从一个表单中编辑多个记录。

但是，如果记录，我还想从同一表单创建新记录。即在控制器中评估表单中参数的哈希值，更新那些存在的记录并创建不存在的记录。

此外，如果发生任何验证错误，则应将其捕获并传回。

如果新记录的字段不存在，控制器中的此功能将正确更新 @costs = IngredientCost.update(params[:ingredient_costs].keys, params[:ingredient_costs].values).reject { |item| item.errors.empty？}

对于新记录的字段，我目前正在创建一个大的唯一编号作为记录 id（我不确定这是否正确），然后返回消息说它无法保存，因为 id 没有存在，这是可以预料的，因为它不存在。

我已经尝试了以下两个片段作为在黑暗中的刺，但不确定我应该走哪条路..

```
@costs = IngredientCost.find_or_initialize_by_id(:id => params[:ingredient_costs].keys).update(params[:ingredient_costs].keys, params[:ingredient_costs].values).reject { |i| i.errors.empty? } 
```

和

```
params[:ingredient_costs].each do |ingredient_cost|
  @cost = IngredientCost.find_or_initialize_by_ingredient_id_and_user_id(:ingredient_id => ingredient_cost[1]["ingredient_id"], :user_id => current_user.id)
  @cost = IngredientCost.update(:ingredient_id => params[:ingredient_costs][ingredient_cost[0]]["ingredient_id"], :quantity => params[:ingredient_costs][ingredient_cost[0]]["quantity"], :price_per_unit => params[:ingredient_costs][ingredient_cost[0]]["price_per_unit"], :weight_id => params[:ingredient_costs][ingredient_cost[0]]["weight_id"]) 
```

两者似乎都不起作用。

我以前见过这项工作，但用于从一种形式更新/创建嵌套属性。我真的不想走这条路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:06:03.680

我最终求助于通过已经具有正确关联的父模型保存多条记录。

我遵循[Railscast #196 Nested Model Forms](http://railscasts.com/episodes/196-nested-model-form-part-1)，它与上面非常相似，只是保存到另一个模型并放置`accepts_nested_attributes_for`在该模型的 *.rb 中。

记得移动路线。

将控制器代码移动到父模型的接收动作。

我在查看器中的表单现在看起来像这样（haml 格式）：

```
= form_for @user, :remote => true do |f|
  = f.fields_for :ingredient_costs do |builder|
    // fields inserted here 
```

我花了几个小时才意识到我必须用它`builder.object...`来接触我真正感兴趣的孩子。这`.object`门课对我来说并不明显。

无论如何，希望这对某人有用。我认为 SybariteManoj 的答案看起来很划算，但我无法让它发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:25:03.007

您可以尝试以下代码段：

```
@costs = []
params[:ingredient_costs].each do |ingredient_cost|
  if ingredient_cost[:id].blank?
    cost = IngredientCost.create(ingredient_cost)
    @costs << cost
  else
    cost = IngredientCost.find(ingredient_cost[:id])
    cost.update_attributes(ingredient_cost)
    @costs << cost
  end
end 
```

PS我还没有测试过。但是对于重新渲染带有错误的编辑页面，@costs 变量具有带有错误的数据（如果有）。

# java - 如何在不添加任何代码的情况下使类可配置？

> ID：14622549
> 
> 赞同：1
> 
> 时间：2013-01-31T09:37:15.963
> 
> 标签：java, configuration, annotations, libraries

我希望能够（用Java）编写如下内容：

```
public class A implements MagicallyConfigurable {

    @configuration_source_type{"xml"}
    @configuration_dir{"some/rel/path/"}

    /* or maybe some other annotations specifying a db-based configuration etc. */

    int length = 4 /* some kind of default */;
    char c = '*' /* some kind of default */;

    @do_not_configure
    String title;

    A(String title) {

        /* possibly, but hopefully no need to, something like:
        configure();
        call here. */

        this.title = title;
    }

    void goForIt() {
        System.out.println(title);
        for(int i=0; i < length; i++) {
            System.out.print(c);
        }
    }
} 
```

并使其按预期工作。也就是说，我需要根据配置初始化字段的唯一事情就是添加一些注释、实现接口并可能进行单个函数调用（但希望没有它）。

我确信这在理论上是可行的，问题是是否有现有的库/框架/附加组件/thingie 可以启用它。（也许 Apache commons.configuration 不知何故？以前没用过。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:46:04.587

您可以做的是使用 Spring 3.0 EL。可以在[此处](http://springinpractice.com/2008/12/02/new-stuff-in-spring-30/)找到一个示例，但基本上可以归结为您可以执行以下操作：

```
@Value("#{systemProperties.databaseName}")
public void setDatabaseName(String dbName) { ... } 
```

您的属性将被自动设置。这将适用于设置器和属性。

# java - java.lang.NoClassDefFoundError: org/springframework/metadata/Attributes

> ID：14622550
> 
> 赞同：1
> 
> 时间：2013-01-31T09:37:19.050
> 
> 标签：java, spring, spring-aop

我最近将 Spring Framework 的版本从 Spring 2.5 更新到了 3.1.3。

但是现在，当我运行我的应用程序时，会出现一条错误消息：

```
java.lang.NoClassDefFoundError: Lorg/springframework/metadata/Attributes;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:374)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.springframework.metadata.Attributes
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 28 more 
```

我试图搜索这个错误，但关于它的信息似乎很少。有人有想法吗？

谢谢。

编辑：这是我正在使用 [lib的库](http://i.stack.imgur.com/2Ih7o.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:44:18.723

查看[Spring 3.0 API](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/)可以发现缺少的类不是 3.x 版本的一部分。我假设您的 Spring Jar 文件之一仍在使用 2.5 版本。查看您的 pom.xml 文件以尝试发现哪个 Jar 仍在使用此版本。

密切注意此[列表](http://www.findjar.com/class/org/springframework/metadata/Attributes.html)中的任何罐子。

# php - PHP - 在数据库中存储页面视图的最佳实践

> ID：14622556
> 
> 赞同：3
> 
> 时间：2013-01-31T09:37:46.257
> 
> 标签：php, mysql, view, counter, increment

我可以知道在数据库中存储页面视图的最佳做法是什么？

每次加载页面时更新综合浏览量值是否昂贵？

并且在更新网页浏览时是否存在任何可能的错误/威胁，同时其他人正在修改同一行的数据？

例如

表 - 项目 ID 名称 描述 PageView

我知道这可能不是一个很大的问题，它可以应用于其他一些经常更新的数据，想知道什么是最好的方法。我想到的可能场景是，如果有很多页面同时运行。会不会有性能问题？

请原谅我的英语，并提前非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T09:45:30.893

最好的方法是为每个视图在表中写入一个新行，而不是保持滚动计数，这可能会导致大型系统上的锁定问题。`INSERT DELAYED`为了提高性能，您可以使用语法添加行。这将允许数据库句柄立即返回，并且您的脚本不会等待插入完成。此处的文档：-

[http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)

还可能值得查看专门针对此类日志记录的存档存储引擎。你只能`INSERT`和`SELECT`数据，但性能是针对快速写入。

[http://dev.mysql.com/doc/refman/5.1/en/archive-storage-engine.html](http://dev.mysql.com/doc/refman/5.1/en/archive-storage-engine.html)

要查看综合浏览量信息，您只需查询任何给定页面的行数。这种方法的一个主要优点是，通过记录每个页面视图的时间戳，您可以按一天中的时间、一周中的几天等分析数据，并查看您的流量是什么形状。

# css - 无需放大的液体图像

> ID：14622561
> 
> 赞同：0
> 
> 时间：2013-01-31T09:37:57.450
> 
> 标签：css

我正在开发一个必须响应的简单网站，到目前为止一切正常，但在 Firefox 中我的图像没有缩放。（虽然它适用于 Chrome）

我只是用它来做到这一点：

```
img {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
    display: block !important;
    float: none !important;
} 
```

我可以使用`height: 100%`，`width: 100%`但我不希望图像高档。

这看起来很简单，为什么火狐没有正确地做呢？

编辑：这是问题的一个例子[http://jsfiddle.net/TC3qq/1/](http://jsfiddle.net/TC3qq/1/)（我知道，表格，但它是一个电子邮件模板）[http://jsbin.com/inaat/1/](http://jsbin.com/inanat/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:00:08.103

您可以`img`通过它的父母来定位，这将很好，例如：

```
<div class="someclass">
   <img src="path-of-img" />
</div> 
```

和CSS：

```
.someclass img{
  width:100%;
} 
```

如果您有任何问题，请告诉我

# android - Android检测应用程序何时更新

> ID：14622567
> 
> 赞同：0
> 
> 时间：2013-01-31T09:38:12.920
> 
> 标签：android, ondestroy

我正在开发一个 android 应用程序，当用户进行市场更新时我需要保存数据。实际上在更新开始之前。我尝试使用 onDestroy() 但更新应用程序时不会调用它。你有什么想法？

问题是该应用程序定期保存数据。有时会发生这种情况，当您选择更新时，它会尝试在同一时间保存文件，导致数据损坏......这就是我试图检测更新事件的原因。

使用计划线程（例如 60 秒）以固定间隔保存文件。同样在文件中，我使用经典的 writeObject() 保存了一个序列化对象。这仅以 60 秒的固定速率发生，并且也在活动的 onPause 或服务的 onDestroy() 上发生。

但是，如果固定速率保存恰好在更新时发生（这会导致应用程序被破坏），则保存不完整并且对象会损坏，从而导致下次启动应用程序时从保存文件中获取无效对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:42:52.200

在 android上保存数据（来自 Android [developerpers 文档](http://developer.android.com/training/basics/data-storage/index.html)）的一般方法是使用：

*   共享偏好上的键值对
*   将数据保存在文件中
*   或使用 SQLite 数据库

即使在常规活动生命周期中，您也应该使用它们，我不明白为什么它们也不能解决您在更新之间的持久性需求。

为了避免损坏，如果您使用 SQL，请使用 SQLite Transaction，并在处理文件时检查此[问题以了解损坏安全策略。](https://stackoverflow.com/questions/10247118/avoiding-data-loss-due-to-interruption-when-saving-files-on-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:43:47.917

AFAIK 无法知道您的应用程序何时会更新（您不会收到与包相关的意图，因为在更新期间您的应用程序不再安装）。它将像往常一样简单地停止，所有广播接收器都未注册并更新。

但是，您**可以**做的是在您的应用程序中添加检查，以便在启动时检查它是否刚刚更新并执行您必须执行的任何操作。这非常简单，例如，只需将应用程序的当前版本（您可以通过 获取`PackageManager`）存储在共享首选项中，并在每次应用程序启动时根据当前版本检查存储的版本。

# android - 如何将三个视图合并为一个空白视图并显示？

> ID：14622568
> 
> 赞同：1
> 
> 时间：2013-01-31T09:38:14.557
> 
> 标签：android, listview, gallery, scrollview

我想为某些视图设置一个 ScrollView。我需要将一些视图合并到一个视图中并添加到 ScrollView。

三个视图分别是listView、custorm view和Gallery。

谁知道如何将三个视图合并成一个空白视图并显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:56:03.880

您可以创建这些对象并为其分配膨胀元素。我的意思是，如果 listView 在 listView.xml 中，您可以使用 getLayoutInflater().inflate(R.layout.listView,null) 对其进行充气并放入 ListView 对象。然后您可以将其添加到 ViewGroup。

为 ScrollView 充气，您也可以通过编程方式创建。滚动视图滚动=新滚动视图（此）。如果您以编程方式执行此操作，请不要忘记将 LayoutParams 添加到视图中。

```
ViewGroup scrollView = (ViewGroup) getLayoutInflater().inflate(R.layout.scrollView, null); 
```

然后以相同的方式膨胀或创建其他视图。或者您可以使用 findViewById(R.id.idOfView1) 从活动中获取它。

最后，只需使用 scrollView.addView(View child) 添加您创建的、膨胀的视图。

您需要一个 ViewGroup 来将视图添加为子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:50:29.570

在 XML 中，您可以像以下代码段那样构建您的应用程序：

```
<ScrollView>
    <LinearLayout>
        <CustomView/>
        <ListView/>
        <Gallery/>    
    </LinearLayout>
</ScrollView> 
```

或者在代码中，您可以这样做：

```
ScrollView SV = (ScrollView) findViewById(R.id.my_scrollview);

LinearLayout LL = (LinearLayout) findViewById(R.id.my_linear_layout);
LL.addView(my_customView)
LL.addView(my_istView)
LL.addView(my_gallery)

SV.addView(LL); 
```

希望能给你一些关于如何实现你想要的指示

# php - uniqid('foo') 是否有可能与 PHP 中的 uniqid('foo2') 具有相同的值？

> ID：14622571
> 
> 赞同：0
> 
> 时间：2013-01-31T09:38:28.450
> 
> 标签：php

由于`uniqid()`根据给定的值提供了一个随机字符串，它甚至可能吗？如果是这样，`uniqid('foo')`相等的机会是`uniqid('foo2')`多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:43:16.530

`uniqid()`不提供基于字符串的随机值。

根据[文档](http://php.net/manual/en/function.uniqid.php)：

> 根据当前时间（以微秒为单位）获取带前缀的唯一标识符。

`foo`并且`foo2`仅用于作为值的前缀。例如，这段代码：

```
echo uniqid('foo') . "\n";
echo uniqid('foo2'); 
```

会输出：

```
foo510aac3bedcdb
foo2510aac3bedd03 
```

只要前缀不同，值就不会冲突。但是，如果使用相同的前缀，如果 2 个请求在同一微秒内发出，则可能会发生冲突。如果您担心碰撞，请将第二个参数设置为`true`为您的值添加更多熵。

# c - 使用按位运算符的集合中的下一组 n 个元素

> ID：14622574
> 
> 赞同：4
> 
> 时间：2013-01-31T09:38:41.517
> 
> 标签：c, set, bit-manipulation

阅读*《C - 参考手册（第五版）》一*书，我偶然发现了这段代码（SET 中的每个整数都由一个位位置表示）：

```
typedef unsigned int SET;

#define emptyset ((SET) 0)

#define first_set_of_n_elements(n) (SET)((1<<(n))-1)

/* next_set_of_n_elements(s): Given a set of n elements,
   produce a new set of n elements. If you start with the
   result of first_set_of_n_elements(k)/ and then at each
   step apply next_set_of_n_elements to the previous result,
   and keep going until a set is obtained containing m as a
   member, you will have obtained a set representing all
   possible ways of choosing k things from m things. */
SET next_set_of_n_elements(SET x) {
    /* This code exploits many unusual properties of unsigned arithmetic. As an illustration:
      if x == 001011001111000, then
      smallest       == 000000000001000
      ripple         == 001011010000000
      new_smallest   == 000000010000000
      ones           == 000000000000111
      returned value == 001011010000111
    The overall idea is that you find the rightmost
    contiguous group of 1-bits. Of that group, you slide the
    leftmost 1-bit to the left one place, and slide all the
    others back to the extreme right.
    (This code was adapted from HAKMEM.) */

    SET smallest, ripple, new_smallest, ones;
    if (x == emptyset) return x;
    smallest     = (x & -x);
    ripple       = x + smallest;
    new_smallest = (ripple & -ripple);
    ones         = ((new_smallest / smallest) >> 1) -1;
    return (ripple | ones);
} 
```

我迷失在“一”的计算中，这在计算中很重要。虽然我可以理解数学上的计算，但我不明白为什么会这样，或者如何。

在相关的说明中，该书的作者声称 first_set_of_n_elements 的计算*“利用了无符号减法的属性”*。(2^n)-1 如何是*“利用”*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:08:08.300

首先，这段代码比较晦涩，看起来不值得花时间思考，只会产生无用的知识。

“利用”是代码依赖于各种算术规则的实现定义的行为。

001 0110 0111 1000 是一个 15 位的数字。为什么作者使用 15 位数而不是 16，我不知道。即使在 5 个版本之后，似乎仍然存在拼写错误。

如果我们在二进制补码系统上的二进制数前面加上一个减号（[此处解释二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)），它将变成`1110 1001 1000 1000`。因为编译器将保留数字 (5752) 的十进制表示并将其转换为负等值 (-5752)。（但是，实际的数据类型将保持不变`unsigned int`，因此如果您尝试打印它，您将得到垃圾编号 59784。）

```
 0001 0110 0111 1000  
AND 1110 1001 1000 1000
  = 0000 0000 0000 1000 
```

C 标准不强制执行二进制补码，因此该书中的代码不可移植。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:45:53.513

**最小**的计算得到你的 int 的第一个非 0 位。它是如何工作的？
让*n*是您的 int 的位长。与数字*x*（位*b [n-1] ...b [0]*）相反的计算方式是，当您将*x*与*-x*相加时，您将得到 2 ^n。由于您的整数只有 n 位长，因此会丢弃结果位并获得 0。
现在，让*b' [n-1] ...b' [0]*成为*-x*的二进制表示。
因为*x* +( *-x* ) 必须等于 2 ^n*，当您遇到x*的第一位 1 时（例如在位置*i*），相关的*-x*位也将设置为 1，并且在添加数字时，您将得到一个进位。
要获得 2 ^n，此进位必须传播到所有位，直到 int 的位序列结束。因此，在*i* < *j* < *n*的每个位置*j*处的*-x*位遵循以下属性：

 ***> b [j] + b' [j] + 1 = 10 [（二进制）]
> 
> 然后，从上面我们可以推断出： b [j] = NOT(b' [j] ) 因此， b [j] & b' [j] = 0

另一方面，*-x的位 b'* [j]位于位置*j*使得*0* <= *j* < *i*由以下规则决定：

 ***> b [j] + b' [j] = 0 或 10
> 
> 由于所有相关的 b [j]都设置为 0，因此唯一的选择是 b' [j] = 0

因此，在*x*和*-x*中唯一为 1 的位是位置*i*

在您的示例中：

> x = 001011001111000
> -x = 110100110001000

因此，

> 0.0.1.0.1.1.0.0.1.1.1.1.0.0.0
> 1.1.0.1.0.0.1.1.0.0.0.1.0.0.0 AND
> \================= ===/
> 0.0.0.0.0.0.0.0.0.0.1.0.0.0

然后，*纹波将位置**i*（包括第 i 位*）*之后的每个连续“1”变为 0，并将紧随其后的第一个 0 位变为 1（由于进位传播）。这就是为什么你**涟漪**是：

> r(x) = 0.0.1.0.1.1.0.1.0.0.0.0.0.0.0

一个被计算为最小（r（x））除以最小（x）。*由于 minimum(x) 是一个整数，在位置i*处只有一个位设置为 1 ，因此您有：

> (最小(r(x)) / 最小(x)) >> 1 = 最小(r(x)) >>( *i* +1)

*得到的*整数也只有一位设置为 1，例如索引*p*，因此，减去 -1 到这个值将得到一个整数，这样：

 *> 对于每个*j*使得 0 <= *j* < *p*，
> *一个*[*j*] = 1
> 对于每个*j*这样*p* <= *j* < n，
> *一个*[*j*] = 0

最后，返回值是这样的整数：

*   参数的 1 位的第一个子序列设置为 0。
*   *子序列之前*的所有 0 位都设置为 1。
*   *子序列后*的第一个 0 位设置为 1。
*   其余位保持不变

然后，我无法解释剩下的部分，因为我不明白这句话：

> 获得一个包含 m 作为成员的集合

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:26:53.357

这有点误导，因为它实际上利用了 2 的补码。首先，计算`smallest`：

在 2 的补码表示中，`x`注释中的`-x`是`110100110001000`。专注于其中最不重要的位`x`是一个；由于二进制补码本质上是 1 的补码加 1，因此该位将在两者中设置，`x`并且`-x`在它之后（在通往 LSB 的路上）没有其他位位置将具有该属性。这就是您获得最小位集的方式。

`ripple`非常简单，之所以这样命名，是因为它将 1 传播到 MSB，并`smallest_ripple`遵循上面的描述。

`ones`是我们应该添加到波纹中以便继续选择`n`元素的数字，如下图所示：

```
ones: 11  next set: 100011
ones:  1  next set: 100101
ones:  0  next set: 100110 
```

运行它确实会向您展示从项目中选择`n`位的所有方法（需要位，因为n 位数需要最坏的 n+1 位来表示）。`CHAR_BIT * sizeof(int) - 1``CHAR_BIT * sizeof(int)``-x`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T12:30:33.037

首先，这里是我们可以在 n=4 时获得的输出示例。我们的想法是，我们从将“n”LSB 设置为“1”开始，然后遍历所有具有相同位数设置为“1”的数字组合：

```
 1111
   10111
   11011
   11101
   11110
  100111
  101011
  101101
  101110 (*)
  110011
  110101
  110110
  111001
  111010
  111100
 1000111
 1001011
 1001101 
```

它的工作方式如下。我将使用上面带有星号的数字作为示例：

```
 101110 
```

*   正如其他答案中明确解释的那样，我们将 LSB 设置为“1”。

    ```
     101110
    & 010011
    = 000010 
    ```

*   我们通过将 LSB 添加到原始数字将其“移动”到左侧一位。如果紧靠左边的位是'0'，这很容易理解，因为后面的操作什么都不做。如果这个左边的位是'1'，我们得到一个将传播到左边的进位。最后一种情况的问题是'1'的数字会改变，所以我们必须回退一些'1'来保持它们的计数不变。

    ```
     101110
    + 000010 
    = 110000 
    ```

*   为此，我们检索新结果的 LSB，并通过将其与前一个 LSB 相除，我们得到进位传播的位数。这将在带有“-1”的最低位置转换为普通的“1”，

    ```
     010000
    / 000010
    = 001000
    >>     1 
    -      1
    = 000011 
    ```

*   我们最终 OR 加法和加法的结果。

    ```
    110011 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:57:09.127

我会说“利用”是在操作（x & -x）中的符号无符号变化。*******

# c++ - boost.asio 读取了很多数据包

> ID：14622582
> 
> 赞同：0
> 
> 时间：2013-01-31T09:39:17.383
> 
> 标签：c++, windows, boost, boost-asio

我是 boost asio 的最新成员。我为 VoIP 编写程序。但我不明白我怎么能写很多包。那是我的代码。

麦克风。

```
boost::asio::write(socket, boost::asio::buffer(data,val*2),error); 
```

每隔 10 毫秒

扬声器

```
accepter.accept(socket);
while (true)
{
    bool is_open = socket.is_open();
    if (!is_open) break;
    //cout<<"Connected"<<endl;
    boost::system::error_code error;
    boost::array <char, 441> buffer;    
    size_t len = socket.read_some(boost::asio::buffer(buffer),error);
    //Play buffer sound
    cout.write(buffer.data(),441); //for check

} 
```

如果我启动 2 个程序，在控制台中我会看到重复的字符集。我需要做什么？

# mysql - 如何使用 sql 查询对从数据库列中获取的月份（用于分类）进行排序

> ID：14622586
> 
> 赞同：0
> 
> 时间：2013-01-31T09:39:38.950
> 
> 标签：mysql

在我的一个项目中，我根据月份名称将数据分组为一月、二月。在首页中，我想要一个下拉列表，其中只有数据库中存在的月份名称，并且我想要按一月、二月的顺序排列。我如何使用 sql 查询来获取它。

```
$res = $this->db->query('SELECT date FROM tbl_name WHERE category_id="'.$data->category_id.'" GROUP BY date ORDER BY date ASC')->result_array(); 
```

这里，日期是存储月份名称的数据库中的列名，$data->category_id 是一些特定的值

欢迎任何帮助和/或建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:54:21.057

**更新**：手册中忽略`%M`了。它是这样工作的：

```
ORDER BY month(str_to_date(`date`, '%M')) 
```

**更新结束**

你可以试试

```
ORDER BY month(str_to_date(`date`, '%b')) 
```

尽管这仅适用于“Jan”，但不适用于“January”。

另一种肯定有效但有点笨拙的方法是

```
ORDER BY CASE `date` 
WHEN 'January' THEN 1
WHEN 'February' THEN 2
...
ELSE 0 END 
```

# angularjs - 来自嵌套指令的指令的访问控制器范围

> ID：14622589
> 
> 赞同：9
> 
> 时间：2013-01-31T09:39:59.327
> 
> 标签：angularjs

请看我的[小提琴](http://jsfiddle.net/DavidSlavik/N7aKa/12/)并帮助我找到一种从嵌套指令“选择”中访问函数 myAlert 的方法。A 找到了一些解决方案，其中共享了一些范围的属性，如下所示：http: [//jsfiddle.net/zbD95/6/](http://jsfiddle.net/zbD95/6/)但我需要一起使用范围中的函数和属性。

谢谢！！！

这是我的小提琴的副本：小提琴的 HTML 部分：

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body ng-controller="MainCtrl">
  <choice-tree ng-model="myTree"></choice-tree>  
  <hr />
  <!--$scope.myTree = {{myTree | json}}-->
</body>
</html> 
```

JS部分的小提琴：

```
var app = angular.module('plunker', []);

function Choice(name, children) {
  this.name = name;
  this.checked = false;
  this.children = children || [];
}

var apparel = new Choice('Apparel', [
  new Choice('Mens Shirts', [
    new Choice('Mens Special Shirts'),
  ]),
  new Choice('Womens Shirts'),
  new Choice('Pants')
]);
var boats = new Choice('Boats');

app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';

  $scope.myTree = [apparel, boats]; 

  $scope.myAlert = function(ev){
    alert('ad');
  };
});

app.directive('choiceTree', function() {
      return {
          template: '<ul><choice ng-repeat="choice in tree"></choice></ul>',
        replace: true,
        transclude: true,
        restrict: 'E',
        scope: {
          tree: '=ngModel'
        }
      };
});

app.directive('choice', function($compile) {
  return { 
    restrict: 'E',
     transclude: true,
    //In the template, we do the thing with the span so you can click the 
    //text or the checkbox itself to toggle the check
    template: '<li>' +
      '<span ng-click="myAlert(choice)">' +
      '<input type="checkbox" ng-checked="choice.checked"> {{choice.name}} - {{name}}' +
      '</span>' +
    '</li>',
      link: function (scope, elm, attrs) {

      //Add children by $compiling and doing a new choice directive
      if (scope.choice.children.length > 0) {
        var childChoice = $compile('<choice-tree ng-model="choice.children"></choice-tree>')(scope)
        elm.append(childChoice);
      }
    }
  };
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T18:49:28.303

使用 '&' 语法允许您的隔离范围调用在父范围上定义的方法。此外，您不需要对这些指令进行任何嵌入。

HTML：

```
<choice-tree ng-model="myTree" my-alert="myAlert()"></choice-tree> 
```

指令：

```
app.directive('choiceTree', function () {
    return {
        template: '<ul><choice ng-repeat="choice in tree"></choice></ul>',
        replace: true,
        //transclude: true,
        restrict: 'E',
        scope: {
            tree: '=ngModel',
            myAlert: '&'
        },
    };
});

app.directive('choice', function ($compile) {
    return {
        restrict: 'E',
        //transclude: true,
        template: '<li>' +
            '<span ng-click="myAlert()">' +
            '<input type="checkbox" ng-checked="choice.checked"> {{choice.name}} - {{name}}' +
            '</span>' +
            '</li>',
        link: function (scope, elm, attrs) {
            //Add children by $compiling and doing a new choice directive
            if (scope.choice.children.length > 0) {
                var childChoice = $compile('<choice-tree ng-model="choice.children" my-alert="myAlert()"></choice-tree>')(scope)
                elm.append(childChoice);
            }
        }
    };
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/ButMc/)。

# lua - 链接 moveLoc 调用

> ID：14622591
> 
> 赞同：1
> 
> 时间：2013-01-31T09:40:01.780
> 
> 标签：lua, moai

我正在尝试链接一系列 moveLoc 调用，但如果没有出现生涩/混乱的动作（在调用之间），我似乎无法做到这一点。

```
-- executed in a separate thread
while moving do    
  action = prop:moveLoc(x, y, speed, MOAIEaseType.EASE_IN)
  MOAICoroutine.blockOnAction(action)  
  coroutine.yield() 
end 
```

我想要实现的是，在**移动**为真的情况下，让**道具以****x**，**y**的**速度**连续移动。（同样当**移动**为假时，完成剩余的动作即可，不必在**移动**变为假的点停止）

 ******我在结果中看到的动画在调用之间不时暂停

移动 -> 停止 -> 移动 -> 停止 -> 移动 ...

如何减少 moveLoc 调用之间的暂停并使道具连续移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:00:45.407

您可能想要`MOAIEaseType.LINEAR`，或者只是`setLoc`手动使用和更新位置。******

# php - 将对象的值转换为 PHP 变量（智能）

> ID：14622592
> 
> 赞同：1
> 
> 时间：2013-01-31T09:40:02.323
> 
> 标签：php, smarty

我正在尝试将 HTML 标记的值转换为 PHP 变量。我下面的代码不起作用，{mytag} 的值为 21。

我有 {mytag} 作为 smarty 模板中的 HTML 钩子来从数据库中提取字段，所以我必须有 {mytag}。

计划是在一些数学中使用 db 中的 int，但由于 {mytag} 被视为一个对象，我必须将值放入另一个变量中。

```
$t = new stdClass;
$t->bat = "{mytag}";
$bar = $t->foo;
ob_start();
$b = var_export($bar, true);
echo $b;
$stdClass = ob_get_contents();
ob_end_clean();
$the_var = $stdClass; 
```

当我检查输出时，我得到了名称，但没有得到值。

```
echo $the_var[0] 
//prints ' and not 2
echo $the_var[1] 
//prints { and not 1 
```

如何让 $the_var 包含值 21？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:41:37.540

相当小的解决方案，但应该可以工作。

```
{php}
$the_var = "$this->get_template_vars('mytag')";
{/php} 
```

来自[聪明的文档](http://www.smarty.net/docsv2/en/api.get.template.vars.tpl)：

> get_template_vars() — 返回分配的变量值
> 数组 get_template_vars(string varname);

# php - 将值发布到 PHP 文件并在处理该值后重新加载 HTML 页面？

> ID：14622594
> 
> 赞同：1
> 
> 时间：2013-01-31T09:40:07.910
> 
> 标签：php, html, ajax, post

我正在开发一个显示来自数据库记录的折线图的应用程序。用户在 html 页面中查看图形，并且可以通过从选择框中选择参数来更改参数以查看他感兴趣的图表。在 html 页面后面有一个 php 页面，它对数据库进行查询并将结果转换为 json 格式以用于 html 页面中的图形。

现在我正在尝试将选择框中的值（使用用户选择的参数）发布到 php 页面中，但我不想在之后看到 php，而是希望刷新 html 页面以显示具有选定值的新图形。

要将值发布到 php，我使用的是这样的：

```
<form action="index.php" target="_blank" method="post">
 <select name="Tasel" onchange="this.form.submit()">
 <option value="3">Tuloslaskelma</option>
 <option value="2">Tasevastattava</option>
 <option value="1">Tasevastaava</option>   
 </select> 
```

它可以发布值，但现在我不知道如何同时使用新图形重新加载 html。我会很感激一些关于什么是去这里的最佳方式的建议。我已经阅读了一些关于使用 Ajax 的建议，但还没有真正找到让它工作的方法。提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:44:27.397

使用**redirect-after-post**模式是解决您面临的问题的更简洁的方法。

更高级的描述可以在[这里](http://www.theserverside.com/news/1365146/Redirect-After-Post)找到。

另一点是您需要注意您的*网络服务器*与*图像响应*一起发送的*响应标头*。如果涉及到缓存之类的东西，它可能会导致显示旧图片。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:48:29.130

如果您想使用 Ajax，您需要了解更多关于 JavaScript（或[jQuery ，如果您愿意）的知识。](http://api.jquery.com/jQuery.post/)

否则，您可以在表单过程（在 index.php 中）完成后简单地进行重定向。

`index.php`

```
<?php

// Form processor here

// Make sure nothing is outputted to the browser

header( 'Location: ' . $_SERVER['HTTP_REFERER'] );
exit(); 
```**

# c# - c#线程每X分钟调度一次

> ID：14622597
> 
> 赞同：1
> 
> 时间：2013-01-31T09:40:09.013
> 
> 标签：c#

我有一个 C# 程序需要每 X 分钟分派一个线程，但前提是先前分派的线程（从 X 分钟开始）当前尚未运行。

一个普通的旧 Timer 单独是行不通的（因为它每 X 分钟分派一个事件，无论之前分派的进程是否已经完成）。

将要分派的进程在执行其任务所需的时间上有很大的不同——有时可能需要一秒钟，有时可能需要几个小时。如果它从上次启动时仍在处理，我不想再次启动该过程。

任何人都可以提供一些有效的 C# 示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:44:02.550

您可以在激活另一个线程之前检查线程是否处于活动状态。
使用[Thread.IsAlive](http://msdn.microsoft.com/en-us/library/system.threading.thread.isalive.aspx)执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:45:48.877

我认为计时器可以在这种情况下工作。当计时器结束时，它会尝试获取同步对象上的锁。如果它成功，那么它会继续它的工作。如果它未能获得锁，则它知道最后一个线程尚未完成，因此返回。

如果您使用的是 .Net 4.0 或更高版本，您可以使用[`Monitor.TryEnter(object, bool)`](http://msdn.microsoft.com/en-us/library/dd289679.aspx).

```
bool acquiredLock = false;
try
{
    Monitor.TryEnter(lockObject, ref acquiredLock);
    if (acquiredLock)
    {
        //do your work here
    }
}
finally
{
    if (acquiredLock)
    {
        Monitor.Exit(lockObject);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:46:09.180

在线程中使用 while(True) 循环。在循环顶部记录开始时间，执行任务，再次获取时间，计算已经过去了多少时间并与开始时间进行比较。如果这小于 X，则将差值转换为 ms 和 Sleep() 。

没有计时器，没有连续的线程创建，没有同步，没有轮询，根本没有机会同时运行两个任务实例。

# jquery - 单击元素以外的任何位置以使用 if 语句将其隐藏

> ID：14622606
> 
> 赞同：2
> 
> 时间：2013-01-31T09:40:46.430
> 
> 标签：jquery, if-statement

**下面的解决方案**

我已经阅读了关于这个概念的大多数问题，但我似乎无法让它与 if 语句一起使用。有什么帮助吗？

[JSFiddle](http://jsfiddle.net/2udYp/)

```
$("button").click(function () {
  $("div").fadeToggle("fast");
});

if ($("div").is(":visible")) {
  $(document).click(function () {
    $("div").fadeToggle("fast");
  });

  $("div").click(function (e) {
    e.stopPropagation();
  });
} 
```

所以，按钮应该切换 div。当 div 被切换（即`:visible`）时，div 只能通过单击页面上的任意位置来切换（不可见），而不是在单击 div 本身时。

## 解决方案

我将[Diabolic 的答案](https://stackoverflow.com/questions/14622606/click-anywhere-but-on-the-element-to-hide-it-w-if-statement/14622853#answer-14622841)和[Kevin Bowersox 的答案](https://stackoverflow.com/questions/14622606/click-anywhere-but-on-the-element-to-hide-it-w-if-statement/14622853#answer-14623359)合并到[这个答案中](http://jsfiddle.net/2udYp/13/)。

```
$("button").click(function (e) {
    $("div").fadeToggle("fast");
    e.stopImmediatePropagation();
});

$(document).click(function (e) {
    if($("div").is(":visible") && !$("div").is(e.target)) {
        $("div").fadeOut("fast");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:52:23.560

请检查您的代码更新：

```
$("button").click(function (e) {
  $("div").fadeToggle("fast");
  e.stopPropagation();
});
$("div").click(function (e) {    
  $("div").fadeIn("fast");
     e.stopPropagation();
});
 $(document).click(function (e) {
    $("div").fadeToggle("fast");
      e.stopPropagation();
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:17:56.177

**Javascript**

```
$("button").click(function (e) {
  $("div").fadeToggle("fast");
});

$(document).mouseup(function(event){
    var target = $("#no-mod");
    if(!target.is(event.target) && !$("button").is(event.target) && target.is(":visible")){
       $("div").fadeToggle("fast");
    }else{
      return false;
    }
}); 
```

**HTML**

```
<button>Click me</button>
<div id="no-mod"></div> 
```

示例：http: [//jsfiddle.net/2udYp/9/](http://jsfiddle.net/2udYp/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:52:42.077

你的代码应该更像这样；

```
$("button").click(function (e) {
    $("div").fadeToggle("fast");
    e.stopImmediatePropagation();
});

$(document).click(function () {
    if($("div").is(":visible")) {
        $("div").fadeToggle("fast");
    }
});

$("div").click(function (e) {
    e.stopImmediatePropagation();
}); 
```

为什么？

因为您没有在运行时绑定您的事件。您在一个不会立即发生的语句中执行此操作，并且当它发生时它只是创建一个事件，而不是立即运行它。

我已尝试尽可能少地编辑您的代码。:)

**附加信息：**并使用 stopImmediatePropagation() 而不是 stopPropagation() 以确保在该行之后不会执行其他事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T09:53:11.530

对于这个，你真的*不需要*很多 IF 语句。伪代码明智，您希望单击按钮上的任意位置`<body>`以隐藏按钮，但单击按钮执行其他操作。您可以使用`.click()`or`.on('click', function() . . .`来实现这一点。

请看下面的代码：

```
$('body').click(function(e) {
    if(e.target.id == "btn"){
        $('#box').show();
    }
    else
    {
        if(e.target.id !== 'box')
        {
            $('#box').hide();
        }
    }
}); 
```

...和你的标记：

```
<body>
    <button id='btn'>Click me</button>
    <div id = "box" width="50px" height="50px"></div>
</body> 
```

你可以在这个[JSFIDDLE上查看](http://jsfiddle.net/2udYp/14/)

我想说几件重要的事情。如果您要动态创建元素，请不要使用它，`.live()`因为它已折旧。使用`.on()`可以[在此处的文档](http://api.jquery.com/on/)中找到。

* * *

除此之外，上面的代码完美无缺。我想指出，这个答案是**可扩展**的——你可能需要在代码中`e.preventDefault()`使用 a 引用的每个元素中放置或类似的其他答案。`.click()`此代码将来不需要任何更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T09:57:57.047

这是您要寻找的行为吗？？？

```
$(document).click(function (e) {
    $("div").fadeToggle("fast");
      e.stopPropagation();
 });
$("button").click(function (e) {
  $("div").fadeToggle("slow");
  e.stopPropagation();
});
$("div").click(function (e) {    
      e.stopPropagation();
}); 
```

[修改过的小提琴](http://jsfiddle.net/2udYp/6/)

编辑代码：

```
$(document).click(function (e) {
    $("div").fadeToggle("fast");
    e.stopPropagation();

    if($("div").is(':visible')){
        $("div").click(function (e) {    
            e.stopPropagation();
        });
    }
});
$("button").click(function (e) {
    $("div").fadeToggle("slow");
    e.stopPropagation();
}); 
```

[改良小提琴 2](http://jsfiddle.net/2udYp/10/)

编辑2：

```
(document).click(function (e) {
   if($("div").is(':visible')){
         $("div").fadeToggle("fast");
    }
    $("div").click(function (e) {    
       e.stopPropagation();
    });
});
$("button").click(function (e) {
  $("div").fadeToggle("slow");
  e.stopPropagation();
}); 
```

[改良小提琴 3](http://jsfiddle.net/2udYp/12/)

# iphone - 使用 UILabels 以及其中的文本创建自定义 UITextView

> ID：14622607
> 
> 赞同：3
> 
> 时间：2013-01-31T09:40:46.133
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitextview

我想创建一个`UITextView`能够在其中输入文本的自定义，以及以编程方式在其中添加一些`UILabels`类似于文本的内容（当光标靠近它们时，我需要使用“退格”按钮删除它们）。

这`UITextView`应该是可扩展的，并且标签可以有不同的宽度。

关于如何创建这种东西的任何想法，任何教程等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:23:53.367

您可以使用此代码创建文本字段。

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 200, 300, 40)];
textField.borderStyle = UITextBorderStyleRoundedRect;
textField.font = [UIFont systemFontOfSize:15];
textField.placeholder = @"enter text";
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.keyboardType = UIKeyboardTypeDefault;
textField.returnKeyType = UIReturnKeyDone;
textField.clearButtonMode = UITextFieldViewModeWhileEditing;
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
textField.delegate = self;
[self.view addSubview:textField];
[textField release]; 
```

对于创建标签，您可以使用以下代码：

```
CGRect labelFrame = CGRectMake( 10, 40, 100, 30 );
    UILabel* label = [[UILabel alloc] initWithFrame: labelFrame];
    [label setText: @"My Label"];
    [label setTextColor: [UIColor orangeColor]];
    label.backgroundColor =[UIColor clearColor];
    [view addSubview: label]; 
```

并在退格磁带使用此方法时删除标签：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
if ([string isEqualToString:@""]) {
NSLog(@"backspace button pressed");
[label removeFromSuperview];
}
return YES;
} 
```

如果按下退格按钮，则 replacementString(string) 将具有空值。所以我们可以使用它来识别退格按钮按下。

# java - 如何以编程方式确定 JAX-RS 资源路径？

> ID：14622609
> 
> 赞同：5
> 
> 时间：2013-01-31T09:40:55.953
> 
> 标签：java, url, jax-rs

假设我有一组 JAX-RS 定位器和子定位器，如下所示：

```
@Path("/users")
public class UserListResource {
   @Path("/{id}")
   public UserResource getCustomer(@PathParam("id") int id) {
      // Find and return user object
   }
}

public class UserResource {
  @GET
  public String get() {...}
} 
```

例如，`UserResource`具有 ID 的对象`5`将具有路径`"/users/5"`。在我的系统中，我有几个不同的资源。

现在的问题是：服务器如何找出给定资源的路径？我可以通过一些 JAX-RS API 以编程方式执行此操作，还是必须实现使用反射的代码？（我知道如何做后者，但更喜欢另一种方法。）

*   在我需要知道路径的时候，我根本没有请求对象。例如，我有一个计时器，它进行一些后台处理，然后更改域模型中的一些实体，然后通知所有客户端有关更改的实体（包括它们的路径）。
*   我知道在请求的范围内，我可以注入`UriInfo`提供此功能的对象，但我需要提前知道路径（以通知客户端不一定通过 JAX-RS 资源发生的更改）。
*   我不想在另一个地方重复路径信息，也不想为每种资源类型（在本例中为`"/users"`and `"/{id}"`）设置一组路径片段常量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:22:42.630

当我阅读您的问题时，您需要构建一个只知道资源类和`id`参数的 URI。

可以使用`UriBuilder` 类来完成，如下所示：

```
UriBuilder builder=UriBuilder.fromResource(UserListResource.class);
URI uri=builder.path(UserListResource.class,"getCustomer").build(5); 
```

它在引擎盖下使用反射，因此重构并不容易，但它是目前可用的全部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:25:33.010

总的来说，请注意，您的应用程序架构听起来有些奇怪。很难说清楚，但你提出的问题模式正在引发一些关于你如何处理这件事的危险信号。请注意，如果您正在寻求为您的应用程序创建一个可能需要停止的 RESTful API，请退后几步，重新考虑您正在尝试做什么。

对于你明确的问题......</p>

> 现在的问题是：服务器如何找出给定资源的路径？我可以通过一些 JAX-RS API 以编程方式执行此操作，还是必须实现使用反射的代码？（我知道如何做后者，但更喜欢另一种方法。）

服务器知道路径，因为它始终由用户提供，并用于在构成应用程序的资源类集合中导航。如果您需要`UriInfo`特定调用的实例，则应将其作为该特定调用的一部分注入：

```
@GET
public String get(@Context UriInfo info) {...} 
```

外部上下文所需的任何信息（例如，资源的 ID 是什么）最好在构造期间传递。您可以再次从 URL 中重新解析它（可从 中获得`UriInfo`），但这可能是错误的方法。

否则，如果您正在做一些更复杂的事情，那么您需要在您的问题中更加具体。

> *   在我需要知道路径的时候，我根本没有请求对象。例如，我有一个计时器，它进行一些后台处理，然后更改域模型中的一些实体，然后通知所有客户端有关更改的实体（包括它们的路径）。
> *   我知道在请求的范围内，我可以注入`UriInfo`提供此功能的对象，但我需要提前知道路径（以通知客户端不一定通过 JAX-RS 资源发生的更改）。

你将如何通知客户？通常没有将消息从服​​务器推送到客户端的机制，并且客户端通常有防火墙，因此它们不能直接托管服务。

从理论上讲，您可以（明确地，通过 URL）将每个资源与其自己的 RSS 提要相关联，如果客户愿意，他们*可以*收听这些提要。你不能强迫客户倾听，但你可以让他们选择这样做。如果你走这条路，你不需要知道`UriInfo`“提前”，因为位置信息将出现在关键时间（即资源创建时），然后你只是指的是你可以控制的东西.

但这只是一种方法，它增加了很多复杂性；只有当它对您的应用程序至关重要时，您才会这样做。让客户不时进行轮询通常更简单。（请注意，某些类型的修改本质上是非常具有破坏性的；尤其是更改 ID 或删除资源。不要指望事情能顺利应对。）

> *   我不想在另一个地方重复路径信息，我也不想为每种资源类型（在本例中为“ `/users`”和“ `/{id}`”）设置一组路径片段常量。

艰难的。在多个地方重复信息，*前提是您始终从**单一**来源*获取信息，这是一种常见的做法。它实际上并没有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:29:38.643

据我了解您的问题，您想知道请求进入但在它到达您的资源之前的路径；你愿意使用 Servlet 过滤器吗？

仅在 2.0 中支持 JAX-RS 特定过滤器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:36:05.543

作为记录：在我发布问题后，我对我们的架构进行了更多思考，并得出结论，发送 URLS 并没有我想象的那么有用。无论如何，应用程序必须知道有关应用程序结构的*一些*细节：

*   继续上面的例子：即使客户端不知道单个用户的 URL 模式，它也必须假设有一个用户列表并且知道它的 URL；它还具有硬编码的知识，要显示什么对话框来编辑用户等。

所以总而言之，试图告诉客户端（大多数）它需要的 URL 是不值得的。相反，我们决定使用自定义 API 定义文件，其中包含有关资源内容及其 URL 方案的数据。该文件用于生成以下内容：

*   具有正确 JAX-RS 注释的服务器端资源类
*   供其他开发人员编写代码的 URL 方案规范文档
*   我们自己的客户端的类（包括 URL 知道如何，例如 ID 为 5 的用户拥有 URL ...），因此我们不必担心客户端和服务器之间的不一致。

这种方法具有以下优点：

*   服务器从注释中找出 URL 的需求消失了，因为客户端现在可以在收到包含对象 ID 的通知后自行执行此操作。
*   我们不必担心客户端和服务器之间的不一致，因为所有信息都来自单一来源。
*   我们有一个版本控制下的 API 定义来源，可用于验证与旧版本的向后兼容性。

**注意：** 我可能不会声称生成的 API 对 RESTful Web 服务的想法保持“忠实”，但它对我们有用，并且它从“实际”REST 架构风格中借用的元素应该使 API 比传统的合同优先的 Web 服务。

# windows - 如何计算字体绘图的垂直线位移？

> ID：14622611
> 
> 赞同：0
> 
> 时间：2013-01-31T09:41:13.337
> 
> 标签：windows, fonts, ogre, freetype, baseline

你知道如何计算字体绘图的垂直位移吗？

说明：我正在 3D 世界中绘制 2D 字母，我想返回换行符。所以我需要计算第一个基线的原点和第二个换行符的新原点之间的向量。

我认为这个操作应该记住 YBearing，字母的高度和将绘制字体纹理的计划的实际大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:28.090

看来它将被计算为：

基线到基线移位 = 上升 - 下降 + 线间隙（下降是负值）

这些参数应该是全局的，所以现在的问题只是找到它的访问器。

# c# - 将 c++ DLL 导入到 c#

> ID：14622613
> 
> 赞同：0
> 
> 时间：2013-01-31T09:41:16.587
> 
> 标签：c#, c++, dll

请帮助我使用 c# 中的 DLLImpot。我有 DLL，用 DLL Export Viewer 分析，这个类方法如图：

```
public: static float * __cdecl Evaluator::calculateLM(float *,float *,int,int,float *,float *) 
```

我只是不知道如何将`DllImport`其转换为 c#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:03:41.677

终于想通了。

```
[DllImport("LMModelSolve.dll",
            EntryPoint = "?calculateLM@Evaluator@@SAPAMPAM0HH00@Z",
            CallingConvention = CallingConvention.Cdecl)
        ]
        static extern IntPtr calculateLM(float[] x, float[] y, int n, int iterations, float[] lower, float[] upper); 
```

并调用并获得结果：

```
IntPtr res = calculateLM(x, y, ndata, 200, lower, upper);
            float[] resultVertices = new float[4];
            Marshal.Copy(res,resultVertices,0,4); 
```

# jquery - 无限滚动不适用于 jquerymobile.js

> ID：14622615
> 
> 赞同：2
> 
> 时间：2013-01-31T09:41:22.240
> 
> 标签：jquery, jquery-mobile, infinite-scroll

我的 jquery 移动项目需要无限滚动。我的无限滚动代码运行良好，但是当我将 jquery.mobile-1.2.0.min.js 添加到我的页面时，无限滚动不起作用。

这是我的代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script type="text/javascript">

    $(window).scroll( function() {
        if($(window).scrollTop() == $(document).height() - $(window).height())
        {
            alert("it works");
        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-14T00:44:25.910

**这应该有效：**

```
$(window).scroll(function () {
 if ($(this).scrollTop() + 1 >= $('body').height() - $(window).height()) {
  console.log("infinite scroll works"); 
 } 
```

});

# java-me - 在 Java ME/J2ME 中生成随机十六进制字符串（长度为 50）

> ID：14622622
> 
> 赞同：24
> 
> 时间：2013-01-31T09:41:42.317
> 
> 标签：java-me

我的应用程序需要生成一个十六进制字符串以用作会话 ID。Java`SecureRandom`似乎不起作用（“java/lang/NoClassDefFoundError：java/security/SecureRandom：无法在系统包中创建类”）

我想过做这样的事情：

```
byte[]  resBuf = new byte[50];
new Random().nextBytes(resBuf);
String  resStr = new String(Hex.encode(resBuf)); 
```

但由于`nextBytes(byte[] bytes)`某种奇怪的原因，该方法不可用。

有没有人可以在 Java ME/J2ME 中生成随机十六进制数？

非常感谢。

**编辑：**使用 Bouncy Castle lcrypto-j2me-145（但不是 lcrypto-j2me-147）时，上述生成器似乎可以工作。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-31T10:12:58.027

JavaME 是 JavaSE 的一个子集，所以桌面版中的很多类和方法都不可用。

看起来您正在尝试获取给定长度的随机字符串。你可以这样做：

```
 private String getRandomHexString(int numchars){
        Random r = new Random();
        StringBuffer sb = new StringBuffer();
        while(sb.length() < numchars){
            sb.append(Integer.toHexString(r.nextInt()));
        }

        return sb.toString().substring(0, numchars);
    } 
```

# castle-windsor - 温莎，在课堂上注入容器

> ID：14622624
> 
> 赞同：3
> 
> 时间：2013-01-31T09:41:48.400
> 
> 标签：castle-windsor

您好，已将以下组件注册到 Castle Windsor：

```
public class CommandDispatcher : IServiceCommandDispatcher
{
    private readonly IWindsorContainer container;

    public CommandDispatcher(IWindsorContainer container)
    {
        this.container = container;
    }

    #region IServiceCommandDispatcher Members

    public void Dispatch<TCommand>(TCommand command) where TCommand : IServiceCommand
    {
        var handler = container.Resolve<IServiceCommandHandler<TCommand>>();
        handler.Handle(command);
    }

    #endregion
} 
```

并且 dispatcher 的注册方式如下：

```
Component
   .For<IServiceCommandDispatcher>()
   .ImplementedBy<CommandDispatcher>(), 
```

但是当我解析调度程序的实例时，字段**容器**为空。我应该怎么做才能将容器传递给已解决的子项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-05T06:33:06.337

[Windsor 使用Typed Factory Facility](https://github.com/castleproject/Windsor/blob/master/docs/typed-factory-facility.md)为您解决了这个问题。

在下面的示例中，我希望实现`ICommandHandlerFactory`从我的 Windsor 容器中解析我的命令处理程序。

```
class CommandDispatcher : IServiceCommandDispatcher
{
    private readonly ICommandHandlerFactory factory;

    public CommandDispatcher(ICommandHandlerFactory factory)
    {
        this.factory = factory;
    }

    public void Dispatch<T>(T command) where T : IServiceCommand
    {
        var handler = this.factory.Create(command);
        handler.Handle(command);
        this.factory.Destroy(handler);
    }
} 
```

为此，我只需要创建`ICommandHandlerFactory`接口。

```
public interface ICommandHandlerFactory
{
    Handles<T> Create<T>(T command) where T : IServiceCommand;
    void Destroy(object handler);
} 
```

不需要实现，`ICommandHandlerFactory`因为 Windsor 将创建实现。Windsor 使用的约定是返回对象的`resolve`方法是方法，返回 void 的方法是`release`方法。

要注册工厂，您需要包含`using Castle.Facilities.TypedFactory`，然后按如下方式注册您的工厂

```
container.AddFacility<TypedFactoryFacility>();

container.Register(
     Component.For<ICommandHandlerFactory>()
         .AsFactory()
); 
```

重申一下，**您不必**为您的工厂编写任何实现代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T13:40:26.450

这有效：

```
container.Register(Component.For<IWindsorContainer>().Instance(container)); 
```

这并不理想，因为您仍然必须调用*Resolve*方法。使用工厂可能有更好的方法来做到这一点。这看起来类似于您正在尝试做的事情：

[http://kozmic.net/2010/03/11/advanced-castle-windsor-ndash-generic-typed-factories-auto-release-and-more/](http://kozmic.net/2010/03/11/advanced-castle-windsor-ndash-generic-typed-factories-auto-release-and-more/)

# maven - 在文件结构中查找 maven 项目

> ID：14622626
> 
> 赞同：1
> 
> 时间：2013-01-31T09:41:59.383
> 
> 标签：maven, batch-file, pom.xml, windows-scripting

我正在尝试编写一个 Windows 批处理脚本，给定一个路径，它将递归地搜索该目录以查找 maven 项目。当它找到所有 maven 项目路径后，我想针对这些项目中的每一个运行一些 maven 插件。

我的问题是，我不确定找到项目根源的最佳方法，因为我在我的 poms 中使用继承，例如

```
-/project
    -pom.xml

    -/module1
       -pom.xml

    -/module2
       -pom.xml 
```

真的，我只想在这种情况下找到**/project**的路径，而不是 module1/2 的路径，例如父 pom 的位置。目前，我正在搜索所有内容并通过在 xml 文件中`pom.xml`扫描来确定哪个是父级。`<packaging>pom</packaging>`

这行得通，但我不禁觉得有更好的方法可以找到 maven 项目/父 pom。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:51:46.977

您的策略听起来不错，但也许我可以简化您的实施。（我很难说，因为你没有展示你目前是如何做的）。

您可以使用 FOR /F 循环简单地处理递归 FINDSTR 搜索的结果。

```
for /f "eol=: delims=" %%F in (
  'findstr /mls "<packaging>pom</packaging>" "yourRootPath\pom.xml"'
) do echo %%~dpF 
```

# c# - 在选项卡控件中插入用户控件时的设计问题

> ID：14622628
> 
> 赞同：0
> 
> 时间：2013-01-31T09:42:08.293
> 
> 标签：c#, .net, winforms

我有 3 个用户控件，我将它们插入到 3 个不同选项卡中的选项卡控件中。我的问题是，当我将用户控件插入选项卡控件时，按钮设计和面板设计发生了变化。一个例子是按钮有锋利的边缘而不是圆形。这是什么原因造成的？

这是我将用户控件插入选项卡控件的代码：

```
public void addUC(UserControl control, TabPage tab)
{
    control.Parent = tab;
    control.Anchor = (AnchorStyles.Bottom | AnchorStyles.Top | AnchorStyles.Right | AnchorStyles.Left);
} 
```

Designer.cs 类：

```
 this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.Controls.Add(this.panel2);
            this.Controls.Add(this.panel1);
            this.Controls.Add(this.adresseListPanel);
            this.Controls.Add(this.landComboBox);
            this.Controls.Add(this.searchPanel);
            this.Name = "CustomerMainControl";
            this.Size = new System.Drawing.Size(1291, 568);
            this.Load += new System.EventHandler(this.CustomerMainControl_Load);
            this.KeyDown += new System.Windows.Forms.KeyEventHandler(this.CustomerMainControl_KeyDown);
            this.panel1.ResumeLayout(false);
            this.panel1.PerformLayout();
            this.adresseListPanel.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.adresseDataGrid)).EndInit();
            this.searchPanel.ResumeLayout(false);
            this.searchPanel.PerformLayout();
            this.ResumeLayout(false); 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:29:12.743

您的 UI 中的相关详细信息：

![enter image description here](../Images/079d6ad5dcf90efcf7101aeccec2cee4.png)

这是 2000 年及之前的旧 Windows 版本上的 GUI 的样子。您的应用在未启用视觉样式的情况下运行。当 Program.cs 中的 Main() 方法不调用 Application.EnableVisualStyles() 时会发生这种情况。从项目模板生成的样板代码：

```
 [STAThread]
    static void Main() {
        Application.EnableVisualStyles();          // <=== HERE!
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    } 
```

Hard to guess how that happened without any hints. If you have no idea how your app starts then press F11 to debug the startup code of your app.

# c# - HttpContext.Current.Cache 和 HttpContext.Response.Cache 有什么区别？

> ID：14622632
> 
> 赞同：7
> 
> 时间：2013-01-31T09:42:22.847
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, caching

想知道 -`HttpContext.Response.Cache`和`HttpContext.Current.Cache`objects 有什么不同？以及在 Asp.net MVC Web 应用程序中应该使用什么？

**为什么我要问这个问题？**

因为，我有自己的`[NoCache]`属性，负责在视图重定向期间避免缓存。

例如

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var cache = filterContext.HttpContext.Response.Cache;
        cache.SetExpires(DateTime.Now.AddDays(-1));
        cache.SetValidUntilExpires(false);
        cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        cache.SetCacheability(HttpCacheability.NoCache);
        cache.SetNoStore();
        base.OnActionExecuting(filterContext);
    } 
```

我在我的 中使用这个上面的属性`BaseController`，比如..

```
[NoCache]
public class BaseController : Controller
{

} 
```

这很好用！

但是，在身份验证部分 - 我通过以下机制将一些信息存储在缓存中

```
public ActionResult Login()
{
    HttpContext.Current.Cache.Insert("someKey", "someValue", null, expiredTime.Value, Cache.NoSlidingExpiration);
    return view();
} 
```

**所以，我的问题是..**

我在控制器的基类中使用我的自定义属性，该属性负责清除缓存项，即使我仍然可以在整个应用程序中访问由 Login 方法代码设置的缓存键和值。

为什么这两种缓存机制的作用不同？这两者有什么区别？

您能否就此提出一些想法或信息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T09:50:53.893

`HttpContext.Current.Cache`是一个提供任何类型的可序列化对象缓存的类。它本身就等于让[`HttpRuntime.Cache`](https://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx "MSDN 文档")你的水域更加浑浊。

我们`HttpContext.Current.Cache`通常使用缓存来自我们的数据库服务器的数据。这样就不必不断地向数据库询问变化不大的数据。这完全是服务器端的，不会影响客户端。

[`HttpResponse.Cache`](https://msdn.microsoft.com/en-us/library/system.web.httpresponse.cache.aspx "MSDN 文档")允许您设置和控制随响应内容发送的各种缓存控制标头。这会告诉客户端（以及任何中间代理）您建议使用哪种缓存。注意我说建议，因为客户是否尊重它完全是任意的。

# sql - MS Access 中的查询格式问题

> ID：14622635
> 
> 赞同：0
> 
> 时间：2013-01-31T09:42:29.163
> 
> 标签：sql, ms-access

我需要在访问数据库中运行以下查询。需要做什么改变。因为它给出了语法错误

```
SELECT t1.col11,  t3.col32,  t2.col22,  t2.col23
FROM t1,  t2,  t3
WHERE t1.col11 = t3.col31
AND t3.col32 = t2.col21 (+) 
```

我在下面尝试过，但仍然给出语法错误

```
SELECT t1.col11,  t3.col32,  t2.col22,  t2.col23
FROM t1, t3 left outer join t2 ON t1.col11 = t3.col31
WHERE t1.col11 = t3.col31 
```

感谢你的帮助

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:43:30.177

通过将原始 SQL 粘贴到 Access 查询窗口中，它返回以下内容：

```
SELECT   t1.col11, t3.col32, t2.col22, t2.col23
FROM     (t1 INNER JOIN
         t3 ON t1.col11 = t3.col31) INNER JOIN
         t2 ON t3.col32 = t2.col21 
```

Access 非常擅长翻译这样的基本 SQL - 您只需要注意它不理解的命令

# php - 通过引用传递的 PHP 局部变量能否在函数外部可靠地存在？

> ID：14622638
> 
> 赞同：0
> 
> 时间：2013-01-31T09:42:45.840
> 
> 标签：php, php-internals

基本上在使用大型数组的情况下，`null`如果发生错误，则很方便传回，因为如果`$array = null`then`$array[] = 1`是`[ 1 ]`并且`null`也可以在可调用的上下文中使用，即。`function (array $array = null)`将接受`null`为可接受的值。基本上`null`很方便，因为如果您有错误处理代码，您可以轻松地将其识别为错误，但如果您不在乎，也可以轻松忽略它。

在大多数情况下，这是相当直接的，但是有一个极端情况，PHP 并不真正支持它，那就是在不一定接受引用但需要的函数上下文中传回引用时有时传回 null，但有时传回引用（大多数情况下这不是问题，因为您返回的是对实例变量的引用，但有时情况并非如此）。`null`还有以非尴尬的方式调用具有值的函数的情况。

传递引用的原因显然是为了省去复制数组的麻烦（尤其是当它非常大时）。

以下“解决方案”...

```
\error_reporting(-1);

function & nil()
{
    $nil = null;
    return $nil;
}

function & pass(array & $variable = null)
{
    return $variable;
}

function & check ()
{
    return nil();
}

$test = pass(nil());
$test = &pass(nil());

$test1 = &check();
$test1[] = 1;
$test2 = &check();
$test2[] = 2;

\var_dump($test1, $test2); 
```

有效，但是...

**我的问题是**PHP 是否保证在对局部变量的所有引用都被垃圾收集之前不会被垃圾收集？或者是未定义的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:21:29.257

当引用计数大于 0 时，PHP 永远不会 GC。

# php - 如何在一个过滤器中过滤多个字段？

> ID：14622644
> 
> 赞同：5
> 
> 时间：2013-01-31T09:43:04.640
> 
> 标签：php, symfony, sonata-admin

是否可以创建搜索过滤器来搜索不是从一个字段，而是从`CONCAT(name, description)`？

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper->add('search');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:37:48.147

我找到了学说_orm_callback 类型的解决方案

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{

    $datagridMapper
        ->add( 'text', 'doctrine_orm_callback', array(
            'callback' => array($this, 'getSearchFilter'),
            'field_type' => 'text'
        ) );
}

public function getSearchFilter($queryBuilder, $alias, $field, $value) {
    if (!$value['value']) {
        return;
    }

    $exp = new \Doctrine\ORM\Query\Expr();
    $queryBuilder->andWhere($exp->like($exp->concat($alias.'.name', $alias.'.description'), $exp->literal('%' . $value['value'] . '%')));

    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T11:57:08.830

@Liutas 的绝佳解决方案！

如果您只想使用*concat*作为解决方法来搜索多个字段，您可以使用以下代码：

```
public function getFullTextFilter($queryBuilder, $alias, $field, $value)
{
    if (!$value['value']) {
        return;
    }

    $queryBuilder->andWhere($queryBuilder->expr()->orX(
        $queryBuilder->expr()->like($alias.'.name', $queryBuilder->expr()->literal('%' . $value['value'] . '%')),
        $queryBuilder->expr()->like($alias.'.description', $queryBuilder->expr()->literal('%' . $value['value'] . '%')),
        $queryBuilder->expr()->like($alias.'.anotherfield', $queryBuilder->expr()->literal('%' . $value['value'] . '%'))
    ));

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-18T14:50:22.047

根据@webDEVILopers 的回答，这是一个可用于任何字段的通用类：

```
use Doctrine\ORM\Query\Expr;
use Sonata\AdminBundle\Datagrid\ProxyQueryInterface;
use Sonata\DoctrineORMAdminBundle\Filter\BooleanFilter;

class MultiStringFilter extends BooleanFilter
{
    /**
     * @param string $field should be in the form field1-field2-…-fieldn
     */
    public function filter(ProxyQueryInterface $queryBuilder, $alias, $field, $data)
    {
        $fields = explode('-', $field);
        $filterActive = $data['value'];
        if ($filterActive === null) {
            return;
        }

        $subConditions = [];
        foreach ($fields as $field) {

            $subConditions[] = $queryBuilder->expr()->like(
                "LOWER($alias.$field)",
                $queryBuilder->expr()->literal('%' . strtolower($data['value']) . '%')
            );
        }

        if (count($subConditions) > 1) {
            $queryBuilder->andWhere(new Expr\Orx($subConditions));
        }
    }
} 
```

# java - 字节码注入后Tomcat类加载异常

> ID：14622645
> 
> 赞同：2
> 
> 时间：2013-01-31T09:43:05.577
> 
> 标签：java, tomcat, http-status-code-404, bytecode, bcel

我将调用语句（*cajolingMe.cajoleMe();*）注入到[webgoat](http://sourceforge.net/projects/owasp/)的类之​​一（*HammerHead.class*）。这个方法是一个静态方法，从一个由[fat-jar](http://fjep.sourceforge.net/)创建的 jar 文件中调用。
我将该 jar 复制到 [webgoat][3] Web 应用程序的 lib 目录。
当我反编译注入的类时没有问题并且语法是正确的。
（注入的代码加粗）

```
package org.owasp.webgoat;

**import cajoleMe.cajolingMe;**
import java.io.*;
import java.text.SimpleDateFormat;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import org.owasp.webgoat.lessons.AbstractLesson;
import org.owasp.webgoat.lessons.Category;
import org.owasp.webgoat.lessons.WelcomeScreen;
import org.owasp.webgoat.lessons.admin.WelcomeAdminScreen;
import org.owasp.webgoat.session.Course;
import org.owasp.webgoat.session.ErrorScreen;
import org.owasp.webgoat.session.LessonTracker;
import org.owasp.webgoat.session.ParameterParser;
import org.owasp.webgoat.session.Screen;
import org.owasp.webgoat.session.UserTracker;
import org.owasp.webgoat.session.WebSession;
import org.owasp.webgoat.session.WebgoatContext;
...
  public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws IOException, ServletException
    {
        Screen screen;
        WebSession mySession;
        screen = null;
        mySession = null;
        ServletContext context = getServletContext();
        mySession = updateSession(request, response, context);
        if(response.isCommitted())
        {
            try
            {
                writeScreen(mySession, screen, response);
            }
            catch(Throwable thr)
            {
                thr.printStackTrace();
                log(request, (new StringBuilder()).append("Could not write error screen: ").append(thr.getMessage()).toString());
            }
            WebSession.returnConnection(mySession);
            return;
        }
        screen = makeScreen(mySession);
        if(response.isCommitted())
        {
            try
            {
                writeScreen(mySession, screen, response);
            }
            catch(Throwable thr)
            {
                thr.printStackTrace();
                log(request, (new StringBuilder()).append("Could not write error screen: ").append(thr.getMessage()).toString());
            }
            WebSession.returnConnection(mySession);
            return;
        }
        if(screen instanceof AbstractLesson)
        {
            AbstractLesson lesson = (AbstractLesson)screen;
            if("GET".equals(request.getMethod()))
            {
                String uri = (new StringBuilder()).append(request.getRequestURI()).append("?").append(request.getQueryString()).toString();
                if(!uri.endsWith(lesson.getLink()))
                    screen.getLessonTracker(mySession).incrementNumVisits();
            } else
            if("POST".equals(request.getMethod()) && mySession.getPreviousScreen() == mySession.getCurrentScreen())
                screen.getLessonTracker(mySession).incrementNumVisits();
        }
        UserTracker userTracker = UserTracker.instance();
        userTracker.update(mySession, screen);
        log(request, (new StringBuilder()).append(**cajolingMe.cajoleMe(screen.getClass()).getName()).append(" | ")**.append(**cajolingMe.cajoleMe(cajolingMe.cajoleMe(mySession.getParser()))**.toString()).toString());
        String userAgent = request.getHeader("user-agent");
        String clientBrowser = "Not known!";
        if(userAgent != null)
            clientBrowser = userAgent;
        request.setAttribute("client.browser", clientBrowser);
        request.getSession().setAttribute("websession", mySession);
        request.getSession().setAttribute("course", mySession.getCourse());
        request.getRequestDispatcher(getViewPage(cajolingMe.cajoleMe(mySession))).forward(request, response);
        try
        {
            writeScreen(mySession, screen, response);
        }
        catch(Throwable thr)
        {
            thr.printStackTrace();
            log(request, (new StringBuilder()).append("Could not write error screen: ").append(thr.getMessage()).toString());
        }
        WebSession.returnConnection(mySession);
        break MISSING_BLOCK_LABEL_631;
        Throwable t;
        t;
        t.printStackTrace();
        log((new StringBuilder()).append("ERROR: ").append(t).toString());
        screen = new ErrorScreen(mySession, t);
        try
        {
            writeScreen(mySession, screen, response);
        }
        catch(Throwable thr)
        {
            thr.printStackTrace();
            log(request, (new StringBuilder()).append("Could not write error screen: ").append(thr.getMessage()).toString());
        }
        WebSession.returnConnection(mySession);
        break MISSING_BLOCK_LABEL_631;
        Exception exception;
        exception;
        try
        {
            writeScreen(mySession, screen, response);
        }
        catch(Throwable thr)
        {
            thr.printStackTrace();
            log(request, (new StringBuilder()).append("Could not write error screen: ").append(thr.getMessage()).toString());
        }
        WebSession.returnConnection(mySession);
        throw exception;
    }

...
} 
```

但是当我运行 tomcat 时，我看到了这个异常

```
 31, 2013 12:31:59 PM org.apache.coyote.http11.Http11Protocol init 

INFO: Initializing Coyote HTTP/1.1 on http-127.0.0.1-8080 

 jan 31, 2013 12:31:59 PM org.apache.coyote.http11.Http11Protocol init 

INFO: Initializing Coyote HTTP/1.1 on http-127.0.0.1-8443 
 jan 31, 2013 12:31:59 PM org.apache.catalina.startup.Catalina load 
INFO: Initialization processed in 549 ms 
 jan 31, 2013 12:32:00 PM org.apache.catalina.core.StandardService start 
INFO: Starting service Catalina <br/> jan 31, 2013 12:32:00 PM org.apache.catalina.core.StandardEngine start <br/>INFO: Starting Servlet Engine: Apache Tomcat/5.5.4 
 jan 31, 2013 12:32:00 PM org.apache.catalina.core.StandardHost start 
INFO: XML validation disabled 
 jan 31, 2013 12:32:00 PM org.apache.catalina.core.ApplicationContext log 
INFO: org.apache.webapp.balancer.BalancerFilter: init(): ruleChain: Iorg.apache.webapp.balancer.RuleChain: Corg.apache.w bapp.balancer.rules.URLStringMatchRule: Target string: News / Redirect URL: http://www.cnn.com], Corg.apache.webapp.bal .ncer.rules.RequestParameterRule: Target param name: paramName / Target param paramUalue / Redirect URL: http://www.yahoo.com], Iorg.apache.webapp.balancer.rules.AcceptEverythingRule: Redirect URL: http://jakarta.apache.org]]
 **-Marking serv let WebGoat as unavailable Servlet /WebGoat threw load() exception 'avax.servlet.ServletException: Error instantiating servlet class org.owasp.webgoat.HammerHead**
 at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1020)
 at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:886)
 at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3817)
 at org.apache.catalina.core.StandardContext.start(StandardContext.java:4079)
 at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:755)
 at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
 at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
 at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:886)
 at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:849)
 at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:474)
 at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1079)
 at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)
 at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
 at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1011)
 at org.apache.catalina.core.StandardHost.start(StandardHost.java:718)
 at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1003)
 at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:437)
 at org.apache.catalina.core.StandardService.start(StandardService.java:450)
 at org.apache.catalina.core.StandardServer.start(StandardServer.java:2010)
 at org.apache.catalina.startup.Catalina.start(Catalina.java:537)
 at sun.reflect.NativeMethodAccessorImpl.invokeO(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)
 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409) 
 jan 31, 2013 12:32:01 PM org.apache.coyote.http11.Http11Protocol start 
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8080 <br/> jan 31, 2013 12:32:01 PM org.apache.coyote.http11.Http11Protocol start 
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8443 
 jan 31, 2013 12:32:01 PM org.apache.jk.common.ChannelSocket init 
INFO: JH2: ajp13 listening on /127.0.0.1:8009 <br/> jan 31, 2013 12:32:01 PM org.apache.jk.server.JkMain start 
INFO: Jk running ID=0 time=0/11 config=null 
 jan 31, 2013 12:32:01 PM org.apache.catalina.startup.Catalina start 
INFO: Server startup in 1134 ms 
```

而webgoat站点是 我用于注入的***“HTTP Status 404” 。***`[BCEL][5]`问题出在哪里？

# c++ - “pthread_mutex_t mutex = {0}”是否初始化互斥锁？

> ID：14622646
> 
> 赞同：2
> 
> 时间：2013-01-31T09:43:09.633
> 
> 标签：c++, c, linux, pthreads, mutex

是否可以通过这种方式初始化互斥锁：

```
pthread_mutex_t  mutex = {0}; 
```

互斥量的以下3种初始化有什么区别：

```
1) pthread_mutex_init(&mutex, NULL);
2) pthread_mutex_t  mutex = {0};
3) pthread_mutex_t  mutex = PTHREAD_MUTEX_INITIALIZER; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T09:47:32.353

*   使用第一个选项，您可以通过显式调用初始化函数来控制初始化互斥锁的时间（也：参数应该是`&mutex`）。
*   第二个选项是假设`pthread_mutex_t`对象的内部布局，它应该是不透明的。它**不应该被使用**。
*   第三个选项静态初始化互斥锁。如果在全局或静态范围内定义，它将在程序启动时初始化。它也可以在本地范围内使用，但不建议这样做，因为它不检查错误情况。

另见： http: [//pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html)

# android - 在上传到 GooglePlay 之前删除日志

> ID：14622648
> 
> 赞同：3
> 
> 时间：2013-01-31T09:43:14.183
> 
> 标签：android, performance

我已经阅读了很多关于“删除日志”的问题，但没有一个回答我的问题。所以，我不得不再次在这里问。

`Log.d()`or `Log.v()`or`Syso()`语句对申请有什么影响？

假设我有一个包含 200 条`syso()`语句或日志的应用程序，我在创建应用程序时用于调试这些语句。我没有费心删除它们，因为（我是 android 的新手）并且我认为，这些语句无法打印或显示。那么，为什么要忍受删除所有这些行的痛苦。

那么我不删除日志的想法对应用程序的影响有多大？它会增加应用程序的大小（缓存数据或其他东西）吗？

@All，我认为您不会误解我的要求。我知道 Google 建议我们删除日志，我对此没有疑问。我想知道，如果我不删除日志，这些日志对我的应用程序有什么影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:51:07.633

您应该删除所有日志消息。否则用户可以通过 logcat 看到它们。但是您的应用不会发生任何事情（不会增加大小等）

如果您想知道如何在部署时即时删除它们，请阅读此内容： [在发布之前删除所有调试日志记录调用：是否有工具可以执行此操作？](https://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:49:16.627

阅读部分 -**准备发布应用程序** [http://developer.android.com/tools/publishing/publishing_overview.html](http://developer.android.com/tools/publishing/publishing_overview.html)

# iphone - 像弹出警报视图时一样暗淡的背景

> ID：14622649
> 
> 赞同：1
> 
> 时间：2013-01-31T09:43:19.023
> 
> 标签：iphone, ios, objective-c, uitableview, alertview

当我按下按钮时，我有一个表格视图。这个 tableview 添加在我的另一个 UITableview 之上。我现在要做的是当 tableview 出现时。我的背景视图变暗，就像弹出警报视图时一样。你可以在这里看到一个例子。

我已经在代码中尝试过，但它不起作用。

```
_tableView.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5]; 
```

![在此处输入图像描述](../Images/72b05bff7cc54c284872e76aca7bd77a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:51:17.627

只需添加带有我评论的更多描述的答案。

说你的背景表视图是`_tableView`和你弹出的小表视图`is _tableViewSmall`

1.  创建一个`UIView`与 具有相同高度和宽度的`_tableView`。`addSubView`在你的`_tableView`. `yourView.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];`

2.  现在将您的操作`_tableViewSmall`添加`addSubView`到`_tableView`.

希望这些步骤可以帮助您实现它..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:55:51.810

尝试这个...

```
yourView.backgroundColor = [UIColor blackColor];
yourView.alpha = 0.40; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:52:19.043

在您的表格视图顶部制作一个空白的黑色 uiview，并在情节提要中根据需要设置其 alpha。保持隐藏。当 alertview 弹出时显示视图。

# facebook - Facebook API 权限页面

> ID：14622650
> 
> 赞同：-2
> 
> 时间：2013-01-31T09:43:20.273
> 
> 标签：facebook, api

好吧，我想在我的网站上允许 Facebook 登录。我已经创建了 API，用户可以登录网站。但是第一次弹出请求权限的用户。 [https://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

我可以跳过此权限页面中的用户并直接登录吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:46:00.257

任何人都必须接受基本许可才能获取他们的 Facebook 个人资料数据以在您的网站中使用

# java - JavaFX 中语言更改的刷新屏幕

> ID：14622652
> 
> 赞同：4
> 
> 时间：2013-01-31T09:43:24.047
> 
> 标签：java, javafx, multilingual

我正在构建一个具有多语言支持的 JavaFX 应用程序。因此，通过以下方式加载`fxml`文件时：

```
AnchorPane page = (AnchorPane) FXMLLoader.load(Main.class.getResource("fxml/RealTimeInitialPanel.fxml"),Language.getBundle()); 
```

我正在传递基于默认值的资源包`Language`。上面`Language`的类扩展了 ResourceBundle 并根据当前的 Locale 返回 String。要更改语言，我只需拨打电话即可`Language.setLocale(..)`。一切正常。

但是现在说用户在旅途中更改语言。如何向 fxml 或 UI 发出信号以刷新屏幕。这样他们将再次调用`getString(..)`并根据 setLocale 更新文本。在摇摆中，它会定期刷新。但是使用 fx iam 无法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:22:58.317

根据[FXML 的好处](http://docs.oracle.com/javafx/2/fxml_get_started/why_use_fxml.htm#CHDIEGBB)，没有 3：

> FXML 文件的内容可以在读取文件时进行本地化。例如，如果使用 en_US 语言环境加载 FXML 文件，则它会根据以下资源字符串为标签生成字符串“First Name”： 如果语言环境更改为 fr_FR**并且****重新加载**FXML 文件，则标签显示“Prénom”。...

因此，我认为，如果您的目标是通过本地化应用程序，`FXMLLoader`那么除了重新加载之外，您无法向 FXML 发出信号来刷新其捆绑的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T17:52:18.783

首先，在相应的处理程序中（例如，例如 ComboBox 语言选择器的 onAction），您需要更新语言环境，例如：

```
Locale.setDefault(new Locale(language, country)); 
```

您已适当设置 和 的值的`language`位置`country`。

然后在您需要更新的视图的相应控制器中，设置您的包：

```
bundle = ResourceBundle.getBundle("resources.bundles.SDBundle", Locale.getDefault()); 
```

（将上述命令中的 String 参数替换为您的捆绑文件的路径）。

最后，（仍然在您需要更新的视图的控制器中）您开始更新每个 gui 项目，例如

```
myLabel.setText(bundle.getString("myLabel")); 
```

这当然需要一些样板文件与捆绑文件等以及键和值之间的适当映射。检查[这个](https://stackoverflow.com/questions/10143392/javafx-2-and-internationalization)优秀的例子。

我将上述方法与属性文件结合使用，每次更改时都会存储语言和国家/地区值，以便应用程序在每次启动时记住上次选择。

# cryptography - 椭圆曲线示例

> ID：14622653
> 
> 赞同：0
> 
> 时间：2013-01-31T09:43:26.230
> 
> 标签：cryptography, elliptic-curve

我想使用 ECC 来签署消息。我尝试在谷歌搜索，但我无法找到注释代码来了解它是如何工作的。

您是否知道一些文档不仅解释了数学基础，还解释了如何实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:00:28.207

请参阅基于 Python 和 Sage[的 Johannes Bauer 的 ECC 教程。](http://www.johannes-bauer.com/compsci/ecc/)[bellbind](https://gist.github.com/1414867)发布了一个小型 Python ECC 库。

# c++ - 提取内存中的 tar 和非阻塞

> ID：14622669
> 
> 赞同：0
> 
> 时间：2013-01-31T09:44:08.980
> 
> 标签：c++, tar, nonblocking

我需要`tar.gz`在内存中提取数据流。另一个限制是我不能阻止。

在内存中放气通过`zlib`.

现在我需要*解压*部分。遗憾的是，我发现的所有库要么阻塞，要么只使用 tar 文件。有没有类似的库`zlib`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:04:45.283

好吧，之前没有合适的库。但现在很快就会有。[在这里](https://github.com/abergmeier/tarlib)查看它，但请注意，它还没有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:39:51.113

你可以试试[libtar](http://www.feep.net/libtar/)。这是一个无关紧要的句子，可以满足 SO 答案所需的长度。

# cocos2d-iphone - 将精灵隐藏在屏幕上，而不是将它们淡入

> ID：14622670
> 
> 赞同：0
> 
> 时间：2013-01-31T09:44:11.863
> 
> 标签：cocos2d-iphone

我需要`CCsprites`在屏幕上放一些稍后会淡入屏幕的内容。我无法隐藏它们，因为该`CCFade`动作不适用于隐藏的精灵或带有 的精灵`opacity=0`。

我所做的是将它们放在屏幕上并淡出它们：

```
[colors[i] runAction:[CCFadeOut actionWithDuration:0]];
[self addChild:colors[i] z:0]; 
```

事实证明，在零时间淡出是`not unseen`，所以当我将它们添加到的那一刻，它们会出现一秒钟`CCScene.`

我如何将它们放在屏幕上不被看到，而不是用`CCFadeIn`动作淡化它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:03:01.397

你可以使用 sprite.opacity =0; 最初和在行动中，您可以增加不透明度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:48:23.123

您可以使用序列来堆叠操作。请参阅我的一个项目中的以下示例：

```
CCSprite *frame1 = [CCSprite spriteWithSpriteFrame:[frames objectAtIndex:0]];
frame1.flipX = self.flipX;
frame1.scale = self.scaling;
frame1.visible = NO;
frame1.opacity = 255;
frame1.rotation = self.rotation;
frame1.position = self.offset;
animation = [CCAnimation animationWithSpriteFrames:frames delay:(duration / self.numberOfFrames)];
id stall = [CCDelayTime actionWithDuration:delay];
id show = [CCShow action];
id animate = [CCAnimate actionWithAnimation:animation];
id hide = [CCHide action];
id clean = [CCCallBlock actionWithBlock:^{
    [frame1 removeFromParentAndCleanup:YES];

}];
id enchiladas = [CCSequence actions:stall, show, animate, hide, clean, nil];

[node addChild:frame1 z:5];
[frame1 runAction:enchiladas]; 
```

类似的事情。我想运行一个动画，该动画将在设定的延迟时间后出现，然后在完成后自行消失并清理。

# xsd - xml 架构 maxOccurs = 在 xs:all 内无界

> ID：14622677
> 
> 赞同：2
> 
> 时间：2013-01-31T09:44:35.780
> 
> 标签：xsd

是否可以组合`xs:all`和`xs:sequence`？

我有一个带有元素probenode 的xml 结构，它由元素名称、id、url、标签、优先级、statuws_raw、活动组成。以及设备和组的组合。

设备和组可以出现零次或多次......

下面的解决方案不起作用，因为不允许对元素使用 unbounded。在所有组内。

```
<xs:complexType name="probenodetype">
    <xs:all>
        <xs:element name="name" type="xs:string" />
        <xs:element name="id" type="xs:unsignedInt" />
        <xs:element name="url" type="xs:string" />
        <xs:element name="tags" />
        <xs:element name="priority" type="xs:unsignedInt" />
        <xs:element name="status_raw" type="xs:unsignedInt" />
        <xs:element name="active" type="xs:boolean" />
        <xs:element name="device" type="devicetype" minOccurs="0" maxOccurs="unbounded">
            <!-- zie devicetype -->
        </xs:element>
        <xs:element name="group" type="grouptype" minOccurs="0" maxOccurs="unbounded">
            <!-- zie grouptype -->
        </xs:element>
    </xs:all>
    <xs:attribute name="noaccess" type="xs:integer" use="optional" />
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T23:15:13.100

在 XSD 1.0 中，xs:all 的子级必须将 maxOccurs 设置为 1。

在 XSD 1.1 中，这个约束被解除了。

所以你的选择似乎是：

*   使用 XSD 1.1 处理器（Saxon 或 Xerces-J）。

*   使用 XSD 1.0 并对 probenodetype 的子级强加一个顺序。如果孩子出现的顺序带有信息，这是一个问题（所以 id 后跟 url 不同于 url 后跟 id ...）。

在一些简单的情况下，编写一个内容模型是可行的，它只使用选择和顺序来精确地接受您建议的内容，但是如果有七个必需元素，则生成的内容模型可能太长且太复杂而无法使用。

在这一点上，一些用户放弃并编写了一个具有可重复 OR-组的复杂类型，并将检查名称、id、url 等所有至少出现一次且最多一次的责任转移到应用程序中；这使得 XML 的生成器不必担心固定的顺序（并为信息泄漏打开了一个侧通道，这对某些人来说很重要），但也使得模式作为数据提供者和数据之间的合同文档的用处有所降低消费者。

# ios - 如何在 iOS UIView 动画中跟踪动画

> ID：14622678
> 
> 赞同：3
> 
> 时间：2013-01-31T09:44:43.923
> 
> 标签：ios, uiimageview, uiviewanimation

```
[UIView beginAnimations:nil context:NULL]; // animate the following:
gearKnob.center = startedAtPoint;
[UIView setAnimationDuration:0.3];
[UIView commitAnimations]; 
```

这是动画，它将 UIImageView (gearKnob) 从一个点移动到另一个点。问题是当物体移动时，我需要相应地改变背景，所以我需要在它移动时跟踪每个 UIImageView 的位置。如何跟踪它的位置？有什么方法或委托可以做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-24T22:27:13.270

如果你*真的*需要，这里有一个有效的方法。诀窍是使用 CADisplayLink 计时器并从 layer.presentationLayer 读取动画属性。

```
@interface MyViewController ()
...
@property(nonatomic, strong) CADisplayLink *displayLink;
...
@end

@implementation MyViewController {

- (void)animateGearKnob {

   // invalidate any pending timer
   [self.displayLink invalidate];

   // create a timer that's synchronized with the refresh rate of the display
   self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(updateDuringAnimation)];
   [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

   // launch the animation
   [UIView animateWithDuration:0.3 delay:0 options:0 animations:^{

       gearKnob.center = startedAtPoint;

   } completion:^(BOOL finished) {

       // terminate the timer when the animation is complete
       [self.displayLink invalidate];
       self.displayLink = nil;
   }];
}

- (void)updateDuringAnimation {

    // Do something with gearKnob.layer.presentationLayer.center

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:08:04.000

正如大卫所写，您最好并行运行第二个动画。

如果您需要使用计时器对某些东西进行伪动画处理，您可能需要尝试[CPAccelerationTimer](https://github.com/yangmeyer/CPAccelerationTimer)，它允许您为回调设置 Bézier 时序曲线。

如果你真的必须，你应该能够在`gearKnob.layer.presentationLayer.center`. [-[CALayerpresentationLayer]](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/presentationLayer)返回的层是“当前显示在屏幕上的层的近似值。当动画正在进行时，您可以检索此对象并使用它来获取这些动画的当前值。”</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:56:23.350

在这种情况下，您不能使用直接动画您必须使用自己的计时器并移动旋钮使用：NSTimer timerWithTimeInterval：并在选择器中移动旋钮并获取位置

# drupal - 如何更正drupal中消失的视图按钮

> ID：14622680
> 
> 赞同：1
> 
> 时间：2013-01-31T09:44:45.493
> 
> 标签：drupal, drupal-6, drupal-views

我是**Drupal**的新手。在外观>设置>花环>切换显示下，我取消选中了一些复选框，如徽标、站点名称等......这使得所有页面中的**查看按钮**消失，但**编辑**显示正确。之后，我恢复了更改。查看按钮没有出现，但是如果我们单击查看按钮区域，它会导航查看链接。请帮帮我..提前谢谢

[请参阅此图像以供参考](https://docs.google.com/file/d/0B-In2n-IOPGnOUttOUR3anBmbTQ/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:10:54.980

更改 Drupal 的外观后，您应该始终清除缓存。为此：*管理 > 站点配置/开发 > 性能*

你真的应该花一些时间来阅读 Drupal 是如何工作的。一个好的开始是：[用户和建造者指南](http://drupal.org/documentation)

# ios - ＃进口 xcode更新后找不到文件

> ID：14622684
> 
> 赞同：36
> 
> 时间：2013-01-31T09:44:52.883
> 
> 标签：ios, xcode, libxml2

昨晚我将我的 iPhone 更新到 iOS 6.1，我当前版本的 xcode 无法构建到手机上，因为我需要最新版本。

我从 xcode 4.5.2 转到 xcode 4.6，我在项目文件中做了 0 次更改。

以前编译得很好，现在给我一个找不到文件的错误

```
#import <libxml/tree.h> 'libxml/tree.h' file not found 
```

我的搜索路径已正确链接

```
$(SDKROOT)/usr/include/libxml2 
```

并且 libxml2 在构建阶段是链接的并且是必需的。

编辑：

奇怪的是，我将搜索路径更改为以下内容，瞧..

```
/usr/include/libxml2 
```

不知道为什么这解决了这个问题，有人能告诉我xcode有什么变化吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-05-01T13:52:00.563

在您的构建设置中，将以下内容添加到您的标头搜索路径中：

```
$SDKROOT/usr/include/libxml2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-14T00:20:42.277

对我来说，有效的是将其添加到标题搜索路径：

```
$(SDKROOT)/usr/include/libxml2 
```

与其他答案略有不同，可能与较新版本的 Xcode 有关。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-01T10:58:30.843

添加：$SDKROOT/usr/include/libxml2

[![在此处输入图像描述](../Images/20138c0470e345be1bc0c7e422943d9a.png)](https://i.stack.imgur.com/LuHdt.jpg)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-11T02:41:23.403

在 Xcode6 和最新版本中，将此添加到您的标题搜索路径中：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/libxml2 
```

并记住将搜索路径也添加到测试目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-02T12:16:53.873

我在我的 Mac 上升级了 libxml2，然后：

```
If you need to have libxml2 first in your PATH run:                                                                                                                                                                                             
  echo 'export PATH="/usr/local/opt/libxml2/bin:$PATH"' >> ~/.zshrc

For compilers to find libxml2 you may need to set:
  export LDFLAGS="-L/usr/local/opt/libxml2/lib"
  export CPPFLAGS="-I/usr/local/opt/libxml2/include"

For pkg-config to find libxml2 you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/libxml2/lib/pkgconfig" 
```

# web-applications - 使用 JVisualVM 在 JBoss 7 上分析 webapp

> ID：14622687
> 
> 赞同：6
> 
> 时间：2013-01-31T09:44:56.530
> 
> 标签：web-applications, profiling, jboss7.x, jvisualvm

我想在 JBoss 7 上使用 JVisualVM 分析我的 webapp。

所以我启动了那个工具，并打开了运行 JBoss 的 JVM。

我点击“Profiler”、“设置”，然后在“CPU 设置”中输入：

*   “从类开始分析：”：com.mycompany.myapp.action.**

*   分析新的 Runnables

*   “仅限个人资料类：”：com.mycompany.*

当我点击“CPU”（配置 CPU）时，在 JBoss 中我有：

```
Profiler Agent: 250 classes cached.
Profiler Agent: Redefining 100 classes at idx 0, out of total 188 
Profiler Agent: Redefining 88 classes at idx 100, out of total 188 
10:26:05,720 ERROR [stderr] (server-timer1) Exception in thread "server-timer1" java.lang.NoClassDefFoundError: org/netbeans/lib/profiler/server/ProfilerRuntimeCPUFullInstr
10:26:05,721 ERROR [stderr] (server-timer1)     at org.jboss.sun.net.httpserver.ServerImpl$ServerTimerTask1.run(ServerImpl.java:895)
10:26:05,722 ERROR [stderr] (server-timer1)     at java.util.TimerThread.mainLoop(Timer.java:534)
10:26:05,722 ERROR [stderr] (server-timer1)     at java.util.TimerThread.run(Timer.java:484) 
```

通过谷歌搜索，似乎我必须[添加`jfluid-server.jar`](http://i-proving.com/2011/07/07/how-to-get-visualvm-to-profile-jboss-without-crashing/)JBoss 类路径，但是当我使用 Eclipse 执行此操作时，jar 在我重新启动服务器之前消失了......

其他人建议[使用包含 JBoss 模块 jar 的类路径启动 VisualVM](https://community.jboss.org/message/766276)，但我仍然在 JBoss AS 中遇到错误。

是否有配置`standalone.xml`可以将该 jar 添加到 JBoss 7 类路径？

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T14:49:32.263

添加`-Djboss.modules.system.pkgs=org.netbeans.lib.profiler.server`到 JVM 参数似乎可以避免该异常。见[https://issues.jboss.org/browse/JBAS-8927](https://issues.jboss.org/browse/JBAS-8927)。

# iphone - 从应用程序代理中的缓存目录加载图像确实完成了应用程序委托中的方法

> ID：14622688
> 
> 赞同：0
> 
> 时间：2013-01-31T09:44:56.200
> 
> 标签：iphone, ios, objective-c, xcode, uiimageview

我试图在启动图像消失后加载图像。所以我想在应用程序中向 self.window 添加一个图像视图确实完成了启动方法。我从缓存目录中选择图像。但是它在加载 rootview 控制器之前显示一个空白屏幕. 我该如何实现这是我将图像添加到 imageview 的代码，然后将图像视图添加到 self.window 作为子视图....

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@""];
    imgView.frame=CGRectMake(0, 0, 768, 1024);

    NSString *URLImg = [documentsDirectory stringByAppendingPathComponent:@"SplashIpad.png"];
    UIImage *imgAvtar = [[UIImage alloc]initWithContentsOfFile:URLImg];
    [imgView setImage:imgAvtar];
    [self.window addSubview:imgView]; 
```

请建议我在启动画面关闭后如何加载图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:01:10.197

作为你的逻辑和代码，你可以这样做： -

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[clsViewController alloc] initWithNibName:@"clsViewController" bundle:nil] autorelease];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@""];
    NSLog(@"do ==%@",documentsDirectory);

    NSString *URLImg = [documentsDirectory stringByAppendingPathComponent:@"index.jpg"];

    NSLog(@"==%@",URLImg);
    UIImage *imgAvtar = [[UIImage alloc]initWithContentsOfFile:URLImg];

    UIImageView *imgView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 150, 150)];
    [imgView setImage:imgAvtar];
    imgView.center=self.viewController.view.center;

   // UIImage *imgAvtar = [UIImage imageNamed:@"index.jpg"];

    [self.viewController.view addSubview:imgView];
     self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**![截屏：-](../Images/b278e4710f8e3f66c31a16d01b8a301c.png)**

**演示链接：** 在演示中，我从 NSBundal 获取图像，但您可以在`didFinishLaunchingWithOptions`方法中使用我的上述逻辑

[http://www.sendspace.com/file/8srobj](http://www.sendspace.com/file/8srobj)

**笔记：-**

确保在捕获文件夹中具有 palce`/iPhone Simulator/6.0/Applications/8886B938-3EFB-4F0C-96F9-41ACAE508F2B/Library/Caches/index.jpg`名称的图像路径`index.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:51:49.817

它可能会帮助您。使用 UIViewController 并在其中获取图像视图（从缓存目录加载图像）。在 appdelegate 中将 viewcontroller 添加到 window 。如果你没有得到我，请告诉我。

# javascript - IE8 jQuery 错误在“elem [ type ]();”行

> ID：14622689
> 
> 赞同：1
> 
> 时间：2013-01-31T09:45:00.900
> 
> 标签：javascript, jquery, internet-explorer-8

我在 IE8 中使用 jQuery 1.7.2、1.8.0 或 1.8.3 时遇到问题。该网页在 Chrome、Firefox、IE9、Safari 和 Opera 中运行良好。

IE8开发者工具提示如下错误：

`Can't move focus to the control because it is invisible, not enabled, or of a type that does not accept the focus`

此错误发生在 jQuery 1.8.0 和 1.8.3 中的第 2973 行（在 1.7.2 中为第 3242 行）：`elem[ type ]();`它存在于`trigger`函数内部。

我怎么解决这个问题？或者至少知道哪个`trigger`执行导致了这个问题。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:55:58.350

这是 IE 中的一个古老的错误（很高兴知道它已在 8 中修复）。我不知道官方原因，但我认为这与 IE 在执行上下文完成之前不重新绘制 DOM 有关，同时`focus()`在它认为它仍然隐藏时尝试元素：

```
function calledAtSomePoint() { // begin execution

    // ...

    element.style.display = ''; // show container
    input.focus(); // IE thinks element is hidden 

    // end of execution, IE repaints the DOM but it's too late
} 
```

[解决方案是使用`setTimeout`](http://www.mkyong.com/javascript/focus-is-not-working-in-ie-solution/)：

```
setTimeout(function() {
    document.getElementById('add-comment-login-overlay-username-input').focus()
}, 0) 
```

我曾经多次遇到过这种情况，包括使用 jQuery。这不是任何图书馆的错。`setTimeout`一直为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:45:43.113

阅读这篇文章[http://bugs.jquery.com/ticket/10859](http://bugs.jquery.com/ticket/10859)后（@nez 在评论中指出）。我在我的代码中搜索了`.focus`调用，大约有 50 个调用分布在第三方（如 jQuery-ui、jquery.validate 和我的代码本身）中。我决定更改 jQuery 1.8.3 本身，而不是更改一堆其他第三方库。

所以我在 jQuery-1.8.3.js 中更改了以下第 2973 行：

```
elem[ type ](); 
```

至：

```
try {
  this.newelement[0].focus();
} catch(err){} 
```

# git - git pull 后出现 git 合并问题

> ID：14622690
> 
> 赞同：14
> 
> 时间：2013-01-31T09:45:20.657
> 
> 标签：git

我已经完成了 git pull。之后我收到了这条消息：

```
# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
#
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit.
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
".git/MERGE_MSG" 7L, 302C 
```

我的问题是 - 我需要在这里做什么？因为我不能输入任何信息。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T09:48:36.267

看来你现在在 vi 或 vim 中。

按`i`，然后输入您的合并信息。

然后`esc`和`:``w``q`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:49:48.900

您可能正在使用 VI 作为您的编辑器。您可以做两件事：按“i”或“a”，您将进入打字模式，可以使用 ESC 键退出，然后按“:wq”或“ZZ”，这将保存文件。

另一种方法可能是在命令行上使用 -m 开关，这将允许您跳过此屏幕，并立即提供一条消息（-m "My message here"）

# ef-code-first - 如何以代码优先的方法删除实体及其所有相关实体

> ID：14622693
> 
> 赞同：0
> 
> 时间：2013-01-31T09:45:25.820
> 
> 标签：ef-code-first, entity-framework-4.1

> **可能重复：**
> [删除实体框架中的对象及其所有相关实体](https://stackoverflow.com/questions/937140/delete-an-object-and-all-of-its-related-entities-in-entity-framework)

我已经寻找了一段时间如何做到这一点，但没有找到解决这个问题的帖子。这些是用于设置数据库的类：

```
public class Claim
{
    [Key,DatabaseGenerated(System.ComponentModel.DataAnnotations.DatabaseGeneratedOption.Identity)]
    public int DraftID { get; set; } 
    public int ClaimID { get; set; } 
    public string SupplierCode { get; set; }
    public ClaimStatus Status { get; set; }
    public Policy Policy { get; set; }
} 
```

我的背景：

```
public class FnxDbContext:DbContext {
 public FnxDbContext() : base() { this.Configuration.ProxyCreationEnabled = false; } public DbSet<Claim> Claim { get; set; } 
```

现在假设我想删除`Claim`DraftID 为“1”的 -entity（数据库中有这样的记录，需要根据需要将 FK 指向其他表）我该怎么做？我尝试了很多我在网上找到的想法。他们中的大多数人谈论一个单一的实体。谁能帮我解决这个问题？

# python - 自定义 sphinxdoc 主题

> ID：14622698
> 
> 赞同：10
> 
> 时间：2013-01-31T09:45:41.310
> 
> 标签：python, themes, python-sphinx

有没有一种简单的方法来自定义现有的`sphinxdoc`主题？对于默认主题，有很多主题属性，但在 sphinxdoc 中我什至无法设置徽标或更改某些颜色。

或者你能推荐一个我可以学习如何修改主题的网站吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-24T11:15:19.080

我想要的只是在我的 sphinx 文档中添加[ReST 删除线。](https://stackoverflow.com/q/6518788/2923406)这是我的做法：

```
$ cd my-sphinx-dir
$ mkdir -p theme/static
$ touch theme/theme.conf
$ touch theme/static/style.css 
```

在`theme/theme.conf`：

```
[theme]
inherit = default
stylesheet = style.css
pygments_style = pygments.css 
```

（这使它看起来像默认主题（l.2））

在`theme/static/style.css`：

```
@import url("default.css"); /* make sure to sync this with the base theme's css filename */

.strike {
    text-decoration: line-through;
} 
```

然后，在你的 conf.py 中：

```
html_theme = 'theme' # use the theme in subdir 'theme'
html_theme_path = ['.'] # make sphinx search for themes in current dir 
```

更多信息：[https](https://sphinx.readthedocs.io/en/master/theming.html) ://sphinx.readthedocs.io/en/master/theming.html 。

（可选）在 global.rst 中：

```
.. role:: strike
   :class: strike 
```

在 example.rst 中：

```
.. include:: global.rst

:strike:`This looks like it is outdated.` 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-19T19:41:47.597

为了自定义现有`sphinxdoc`主题，您需要创建包含所需修改的自定义**模板**和**样式表。**

* * *

## `_template`和`_static`子文件夹

在您的 sphinx 文档文件夹（`docs`在此示例中命名）中，创建两个子文件夹：`_static`和`_templates`：

```
docs
├── conf.py
├── index.rst
└── _templates
    └── page.html
└── _static
    └── style.css 
```

* * *

## `style.css`样式表

在该`_static`文件夹中，创建一个`style.css`包含您希望覆盖的 CSS 选项的文件。`sphinxdoc`您可以通过查看sphinx 安装文件夹中的主题样式表来找到适用的选项：

```
./python3.4/site-packages/Sphinx-1.3.1-py3.4.egg/sphinx/themes/sphinxdoc/static/sphinxdoc.css_t` 
```

要将文档背景从白色更改为黑色，请将以下行添加到`style.css`：

```
body {
    background-color: black;
    color: white;
}
div.document {
    background-color: black;
} 
```

要使用该`.. rst-class:: centered`指令添加使代码居中的功能，请添加以下行：

```
.centered {
    text-align: center;
} 
```

ETC...

* * *

## `page.html`模板

在`_templates`子文件夹中，创建一个`page.html`包含以下内容的文件：

```
{% extends "!page.html" %}

{% set css_files = css_files + ["_static/style.css"] %} 
```

这告诉 sphinx在文件夹中查找`style.css`样式表。`_static`

* * *

# 更多信息

这些说明来自关于主题的 Tinkerer 文档：http: [//tinkerer.me/doc/theming.html](http://tinkerer.me/doc/theming.html)。Tinkerer 是一个基于 Sphinx 的博客引擎。

另请参阅：[如何添加自定义 css 文件？](https://stackoverflow.com/questions/23462494/how-to-add-custom-css-file).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T13:25:40.103

除非我误解了您，否则[标准 Sphinx 文档](http://sphinx-doc.org/theming.html)会告诉您如何修改现有主题和创建新主题。

我实际上安装了 Sphinx[云主题](http://packages.python.org/cloud_sptheme/cloud_theme.html)，然后开始编辑它的模板；所以我有了一个新主题，我可以准确地看到需要什么，但我不需要从头开始创建。

如果要更改 CSS 布局，可以将 CSS 文件（或图像）添加到`_static`您的子目录中`source`，并根据需要编辑您`conf.py`的。同样，云主题是我最好的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-21T16:11:09.303

对于 Sphinx 1.8.2，默认主题是[Alabaster](https://github.com/bitprophet/alabaster)，我通过添加一个配置了[html_style](http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-html_style)的新样式表来自定义它：

`conf.py`：

```
html_style = 'custom.css' 
```

`_static/custom.css`：

```
@import url("alabaster.css");

blockquote{
  background: white;
  color: black;
  display: block;
} 
```

# java - Android : Socket - java.net.SocketException: sendto failed: EPIPE (Broken pipe)

> ID：14622700
> 
> 赞同：11
> 
> 时间：2013-01-31T09:45:43.730
> 
> 标签：java, android, sockets, socketexception

我正在尝试使用套接字与服务器建立连接。连接管坏了，如下图所示异常。

```
01-31 14:47:16.536: W/System.err(27255): java.net.SocketException: sendto failed: EPIPE (Broken pipe)
01-31 14:47:16.550: W/System.err(27255):    at libcore.io.IoBridge.maybeThrowAfterSendto(IoBridge.java:496)
01-31 14:47:16.550: W/System.err(27255):    at libcore.io.IoBridge.sendto(IoBridge.java:465)
01-31 14:47:16.550: W/System.err(27255):    at java.net.PlainSocketImpl.write(PlainSocketImpl.java:507)
01-31 14:47:16.550: W/System.err(27255):    at java.net.PlainSocketImpl.access$100(PlainSocketImpl.java:46)
01-31 14:47:16.664: W/NetworkManagementSocketTagger(24437): setKernelCountSet(10021, 1) failed with errno -2
01-31 14:47:16.684: W/System.err(27255):    at java.net.PlainSocketImpl$PlainSocketOutputStream.write(PlainSocketImpl.java:269)
01-31 14:47:16.693: W/System.err(27255):    at java.io.DataOutputStream.write(DataOutputStream.java:98)
01-31 14:47:16.693: W/System.err(27255):    at java.io.OutputStream.write(OutputStream.java:82)
01-31 14:47:16.693: W/System.err(27255):    at com.x.x.y.sendRec(y.java:460)
01-31 14:47:16.693: W/System.err(27255):    at com.x.x.y.access$0(y.java:384)
01-31 14:47:16.693: W/System.err(27255):    at com.x.x.y$2.run(y.java:363)
01-31 14:47:16.693: W/System.err(27255):    at java.lang.Thread.run(Thread.java:856)
01-31 14:47:16.693: W/System.err(27255): Caused by: libcore.io.ErrnoException: sendto failed: EPIPE (Broken pipe)
01-31 14:47:16.693: W/System.err(27255):    at libcore.io.Posix.sendtoBytes(Native Method)
01-31 14:47:16.693: W/System.err(27255):    at libcore.io.Posix.sendto(Posix.java:146)
01-31 14:47:16.693: W/System.err(27255):    at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:177)
01-31 14:47:16.693: W/System.err(27255):    at libcore.io.IoBridge.sendto(IoBridge.java:463) 
```

这是代码，并在此行`outStreamRec.write(bData);`抛出异常。

```
 try {
        port = 86;
        byterecv = new byte[1040];
        clientRec = new Socket();
        clientRec.connect(new InetSocketAddress("192.168.1.36", port));
        System.out.println("Just connected to " + clientRec.getRemoteSocketAddress());
    } catch (IOException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    }
    while (true) {
        try {
            System.out.println("Connecting to " + ServerUrl.url + " on port " + port);              
            OutputStream outToServerRec = clientRec.getOutputStream();
            DataOutputStream outStreamRec = new DataOutputStream(outToServerRec);

            outStreamRec.write(bData);

            InputStream inFromServerPlay = clientRec.getInputStream();
            DataInputStream inStreamPlay = new DataInputStream(inFromServerPlay);
            while ((lstream = inStreamPlay.read(byterecv)) != -1) {
                System.out.println("startrec bytearray -- " + byterecv.length);
                bos1.write(byterecv, 0, lstream);
            }                
            if (stopcall == true) {
                clientRec.close();
                break;
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

注意：如果我关闭套接字连接立即工作正常。但是我想保持连接仍然有效，我手动关闭了套接字连接。Onclick 停止按钮我正在关闭连接。

我搜索了网络，但没有找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T11:10:40.257

对等方在您写入时关闭了连接。这通常意味着您向它发送了一些它不理解的东西。它可能是一个 HTTP 服务器吗？还是您尚未在客户端代码中实现的其他协议？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T13:21:11.003

我的两分钱：我们遇到了同样的问题（BROKEN EPIPE），通过 Fiddler（或 Charls、WireShark 或其他代理调试器/侦听器/等）我们注意到根本没有发出任何请求。

原因是我们添加了错误值的“Content-Length”标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T18:20:21.060

我在三星平板电脑（GT-P5113，Android 4.2.2）设备上遇到了此类问题，该应用程序在其他设备（Nexus 4/5/7）上运行良好。

Libcore/io/IoBridge.java 中的代码如下所示：

```
public static int sendto(FileDescriptor fd, byte[] bytes, int byteOffset, int byteCount, int flags, InetAddress inetAddress, int port) throws IOException {
    boolean isDatagram = (inetAddress != null);
    if (!isDatagram && byteCount <= 0) {
        return 0;
    }
    int result;
    try {
        result = Libcore.os.sendto(fd, bytes, byteOffset, byteCount, flags, inetAddress, port);
    } catch (ErrnoException errnoException) {
        result = maybeThrowAfterSendto(isDatagram, errnoException);
    }
    return result;
} 
```

而 Libcore.os.sendto() 是本机调用。

也许再试一次是一种很好的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T09:50:50.607

也发生在我身上，愚蠢的原因是设备上的互联网无法正常工作。

检查您的互联网连接，这可能是原因。

# data-structures - 这种树的名称（如果有的话）是什么？

> ID：14622701
> 
> 赞同：2
> 
> 时间：2013-01-31T09:45:44.673
> 
> 标签：data-structures, tree

我有这棵树，对于每个节点，它*正好*有10 个子节点（0-9）。每个节点都有一些相关的数据（例如，名称、标签和颜色），我猜这对于这个问题并不重要。每个子节点正好有 10 个子节点。一个节点可以是`null`（它'结束'分支'）或包含另一个节点。

为了形象化我在说什么，我做了这个图（害怕我的paintz0r技能！）： ![树](../Images/e0c520c900f3a0d67807ae4b3adfed75.png)

黑匣子是一个`null-node`. 白盒是包含数据和子节点的节点。如您所见，即使是根节点，每个节点也正好有 10 个子节点。由于简单和保持图表的健全，我绘制了一些非常小的节点，但您可以想象这些小节点是相同的。

这种结构使我可以非常快速地遍历由数字组成的路径：路径`47352`将引导我沿着“橙色路径”到达最终目的地；`4->7->3->5`最终`2`无法解决，因为最后一个是空节点（虽然是红色）并且不包含子节点。

我的问题其实很简单：这种树叫什么？我已经浏览了[Wikipedia's Tree (data structure) lemma](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)上的所有树，我（认为我）能得到的最接近的是[Octree](http://en.wikipedia.org/wiki/Octree)和/或[K-ary 树](http://en.wikipedia.org/wiki/K-ary_tree)。按照这些推理，我的树将被称为 Dectree、Decitree、10 叉树或 10 路树或其他东西。但这可能有一个更好的名字。所以：有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:50:02.283

K=10**[的 K-ary 树](http://en.wikipedia.org/wiki/K-ary_tree)**

> 在图论中，k-ary 树是一个有根树，其中每个节点不超过 k 个子节点
> 
> 它有时也被称为 k 路树、N 叉树或 M 叉树。二叉树是 k=2 的特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:49:20.367

这有点像[B-Tree](http://en.wikipedia.org/wiki/B-tree)。

# ios - Phonegap iOS 插件，用于解码和存储 base64 编码的文件字符串

> ID：14622710
> 
> 赞同：1
> 
> 时间：2013-01-31T09:46:05.123
> 
> 标签：ios, file, cordova, plugins, base64

你好stackoverflow社区..

目前我正在开发一个跨平台应用程序（android/iOS），它除了从用户内容中生成其他功能 pdf 文件外。

[这在jsPDF](https://github.com/MrRio/jsPDF)的帮助下效果很好。

这个很棒的库的输出是二进制 PDF 文件的 base64 编码字符串。[（关于不同情况下 pdf 文件在github](https://github.com/MrRio/jsPDF/issues/21)上的“二进制性”，请参见创作者的这个问题）。

现在我的实际问题：

我需要将此 base64 保存为正确解码的二进制文件，以便在系统的不同方面进一步使用（邮寄、打印等）。

对于 Android，有一个插件可以对[图像](https://stackoverflow.com/questions/11388018/phonegap-plugin-to-convert-base64-string-to-a-png-image-in-android?rq=1)做类似的事情。我目前的计划是将其修改并发布为更通用的插件，用于将 base64 编码保存到文件中。

现在的问题是，我找不到适用于 iOS 的类似代码，而且由于我几乎没有使用 Objective-C 的经验（尽管有大量的 Java、ruby、javascript 和 c），所以我无法在短时间内生成这样的插件.

你们知道这种插件吗，只需很少的Objective-C知识就可以修改。

也许有人对开发这种插件感兴趣，我们可以达成协议（我正在做的项目是商业项目）

希望听到一些有趣的回应，因为我在这里没有想法了：D

问候雅各布

# java - Maven项目源文件的更改未反映在tomcat中

> ID：14622713
> 
> 赞同：7
> 
> 时间：2013-01-31T09:46:10.233
> 
> 标签：java, maven, tomcat

我的 Maven 项目处于最后阶段。我已经使用`mvn tomcat7:deploy`命令将我的war文件部署到正在运行的tomcat实例，并且war文件在webapps文件夹中展开。我可以通过url访问war文件中的所有源文件。但问题是，当我更改源文件（jsp 和 servlet）中的任何内容时，更新的 war 文件不会反映在正在运行的 tomcat 服务器中。我的 pom.xml 如下。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.ceino.maven</groupId>
  <artifactId>MavenWeb</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>MavenWeb Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <build>
    <finalName>MavenWeb</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <url>http://127.0.0.1:8080/manager/text</url>
                <!--<warFile>/home/shebin/Maven Folder/MavenWeb/target/MavenWeb.war</warFile>-->
                <server>TomcatServer</server>
                <path>/MavenWeb</path>
                <username>tomcat</username>
                <password>tomcat</password>
            </configuration>
        </plugin>
    </plugins>
  </build>
</project> 
```

我正在使用 maven 3.0.4 和 tomcat 7.0.35。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:49:27.377

`mvn clean install`每次运行前尝试调用`mvn tomcat7:deploy` 如果仍然有问题，请尝试`mvn tomcat7:undeploy`之前。`undeploy`删除旧的战争文件并`deploy`尝试推送新的战争文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T16:37:02.847

我曾经有同样的问题，我解决了它添加到 pom.xml 文件：

在这里，我正在同步 2 个文件夹：

src/main/webapp/resources -> 目标/m2e-wtp/web-resources/resources

src/main/webapp/WEB-INF/views -> 目标/m2e-wtp/web-resources/WEB-INF/views

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <executions>
        <execution>
            <id>copy-resources</id>
            <phase>process-resources</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>target/m2e-wtp/web-resources/resources</outputDirectory>
                <resources>          
                    <resource>
                        <directory>src/main/webapp/resources</directory>
                        <filtering>true</filtering>
                    </resource>
                </resources>              
            </configuration>            
        </execution>
        <execution>
            <id>copy-views</id>
            <phase>process-resources</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>target/m2e-wtp/web-resources/WEB-INF/views</outputDirectory>
                <resources>          
                    <resource>
                        <directory>src/main/webapp/WEB-INF/views</directory>
                        <filtering>true</filtering>
                    </resource>
                </resources>              
            </configuration>            
        </execution>
    </executions>
</plugin> 
```

# c# - 使用创建日期过滤器从目录中删除文件

> ID：14622714
> 
> 赞同：1
> 
> 时间：2013-01-31T09:46:13.490
> 
> 标签：c#, io

我正在尝试删除所有超过 1 小时的 pdf 文件，我正在使用此代码

```
System.IO.DirectoryInfo directory = new DirectoryInfo(System.Configuration.ConfigurationManager.AppSettings["PDFFilesPath"]);
var files = directory.GetFiles("*.pdf").Where(f => DateTime.Now.Subtract(f.CreationTime).TotalMinutes >= int.Parse(System.Configuration.ConfigurationManager.AppSettings["MinutesOld"]));
foreach (var file in files)
{
    file.Delete();
} 
```

代码工作正常，符合预期。

但我想知道是否有任何方法不使用 foreach 或任何其他较小的方法来实现这一点

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:48:25.223

您可以使用 LINQ 在您的 Linq 代码末尾添加以下内容。

```
.ToList()
    .ForEach(f => f.Delete()); 
```

请记住，即使是在幕后的 Linq 也会使用迭代器；我会照原样离开

也看看这个答案

[使用 .NET 删除目录中超过 3 个月的文件](https://stackoverflow.com/questions/2222348/how-to-delete-files-older-than-3-months-old-in-a-directory-using-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:55:17.170

如果你想要一个衬里，你可以使用：

```
files.ToList<FileInfo>().ForEach((FileInfo f) => { f.Delete(); }); 
```

但这是低效的，真的没有任何意义。您目前正在以正确的方式进行操作。

有关更多信息，请参阅[本文](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)。

# java - odata4j 的数据缓存

> ID：14622715
> 
> 赞同：2
> 
> 时间：2013-01-31T09:46:16.950
> 
> 标签：java, android, odata4j

我正在通过 Android 上的 odata4j 实现 RESTlet 服务。

运行应用程序时，有一个恒定的数据流，需要将其发送到 odata 服务器。

以下方法获取新数据：

```
private void freshData(Data data) {
    try {
        dataTransmitter.sendData(data, this.ptId);
    } catch (Exception ex) {
        //
    } 
```

以下方法将数据发送到服务器：

```
ODataJerseyConsumer c = ODataJerseyConsumer.create(serviceUrl);

public void sendData(Data data, int ptId) throws Exception {
    OEntity newData = c.createEntity(entitySet)
            .properties(OProperties.int32("ptID", ptID), 
             OProperties.double_("data", data.getDouble())))
            .execute; 
```

到目前为止没有问题。但是，如果移动连接被切断或滞后怎么办？

**1）**有没有办法从`execute()`（例如积极发送，或没有移动连接）获取状态。

**2）**如果发送失败，或者仍在进行中，当旧数据用完时，我需要以某种方式存储新数据以发送它。odata4j (0.8-SNAPSHOT) 中是否有可用的功能我还没有找到，或者我是否需要使用队列来执行此操作？

感谢您的帮助！

# jquery - JQuery UI 选择菜单 - 正文宽度扩展

> ID：14622719
> 
> 赞同：0
> 
> 时间：2013-01-31T09:46:26.583
> 
> 标签：jquery, css, jquery-ui

我正在使用 Jquery 选择菜单插件结合 OOCSS（页面宽度为 960 像素）在 HTML 表中设置选择框的样式。

问题是插件为每个选择框添加了一个隐藏元素。这在大多数情况下都可以正常工作，但我有大约 20 个选择 -> 所以正文宽度约为 2000 像素并且出现滚动条。

有关详细信息，请参阅截图。

![在此处输入图像描述](../Images/56dd0053021ad20d02d884e3dff4b5ac.png)

有人知道如何处理吗？我不想禁用整个 Body Tag 的滚动条 :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:01:38.777

问题已解决，这是您的 css 样式中的错误。

我们使用了“可见性：隐藏”，它在屏幕上占据了空间。更改为“显示：无”。

# php - 发布自定义标签？

> ID：14622723
> 
> 赞同：0
> 
> 时间：2013-01-31T09:46:39.233
> 
> 标签：php

我在表单中有以下输入

```
 <input name="email" type="text" id="email"size="50" english="Email address"  /> 
```

我有一个名为英语的自定义标签，我的问题是我可以将其作为帖子数据发送，我可以在我的新页面上恢复它吗？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:48:28.030

如果您使用 JavaScript 提交表单，您可以读取自定义标签的值并将它们附加到要发送的表单数据中。否则，干净的 HTML 表单只会提交输入标签值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:52:31.777

我现在能想到的最好的方法是使用标签作为值的隐藏字段。像

```
<input name="email_label" type="hidden" id="email_label" value="Email address"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:53:46.550

最简洁的答案是不。从您的问题中的 HTML 接收到的发布数据将是一个数组，以`email`作为键，以及用户键入的任何值作为值。

解决方案取决于您要解决的问题。考虑改用隐藏的输入标签。例如：

`<input name="language" type="hidden" value="English" />`

或者，一个更简洁的解决方案是将语言存储在会话中（假设可以满足您的需要）。你永远不应该依赖网站的前端这样“告诉”后端的东西，至少在一定程度上是这样。后端应该只是“知道”。

# javascript - 获取文本字段或选择框的值或文本

> ID：14622728
> 
> 赞同：1
> 
> 时间：2013-01-31T09:46:53.153
> 
> 标签：javascript, jquery

我有一组输入字段的 ID。问题是它们要么是文本字段，要么是选择框。对于选择框，我想要内部文本，对于输入字段，我想要获取值并将其放入对象中。`serializeObject()`如果不处理选择框，则与此相同。我想知道以下代码段是否是实现此目标的最佳方法：

```
var ids = [/* a bunch of ids here */]

var inputs = {}

$.each(ids, function(k,v){
    // is there any jQuery ready-made way to do this?
    var input = $('#' + v + ' :selected').text(); 
    inputs[v] = (input === '') ? $('#' + v).val() : input;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:00:15.697

```
$.each(ids, function(k,v){
  inputs[v] = ($('#' + v).is('select')) ?
    $('#' + v).find("option:selected").text() :
    $('#' + v).val();
} 
```

那应该这样做。o/

# html - 必须“删除”它在 moseover 上的内容

> ID：14622730
> 
> 赞同：0
> 
> 时间：2013-01-31T09:46:57.067
> 
> 标签：html, hover, mouseover

所以我遇到了一些麻烦，鼠标悬停工作但我需要更多的东西，当背景改变时它必须删除它的内容。

```
#Test01{
background: url(../img/Test01.png);
float: left;
display: block;
height: 297px;
width: 319px;
} 
#Test01:hover {
background: url(../img/Test01hover.png);
}

<div id="Test01"><div id="test01content">lot's of bla bla bla bla bla</div></div> 
```

所以当它鼠标悬停时，这个带有内容的 div 应该消失了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:52:53.043

不要使用 CSS，而是尝试使用 Javascript 来实现它，

```
$("#Test01").hover(function(){
   $(this).css("background-image", "url(../img/Test01hover.png)")
   $(this).empty();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:02:49.520

尝试使用 jQuery

```
$("#Test01").mouseover(function(){
   $(this).empty();
}); 
```

# ruby - 递归函数的嵌套输出

> ID：14622733
> 
> 赞同：0
> 
> 时间：2013-01-31T09:47:04.150
> 
> 标签：ruby

我编写了这段代码，它输出了一份工作描述列表（丹麦语）。它工作正常，但是我想稍微改变一下输出。该函数是递归的，因为作业是嵌套的，但是输出不显示嵌套。

如何配置函数以显示如下输出：

工作 1
- 工作 1.1
- 工作 1.2
-- 工作 1.2.1

等等...

```
require 'nokogiri'
require 'open-uri'

def crawl(url)

  basePath = 'http://www.ug.dk'
  doc = Nokogiri::HTML(open(basePath + url))

  doc.css('.maplist li').each do |listitem|

    listitem.css('.txt').each do |txt|
      puts txt.content
    end

    listitem.css('a[href]').each do |link|
      crawl(link['href'])
    end

  end

end

crawl('/Job.aspx') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:54:15.570

```
require 'nokogiri'
require 'open-uri'

def crawl(url, nesting_level = 0)    
  basePath = 'http://www.ug.dk'

  doc = Nokogiri::HTML(open(basePath + url))

  doc.css('.maplist li').each do |listitem|
    listitem.css('.txt').each do |txt|
      puts " " * nesting_level + txt.content
    end

    listitem.css('a[href]').each do |link|
      crawl(link['href'], nesting_level + 1)
    end
  end    
end

crawl('/Job.aspx') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:54:25.650

我看到两个选项：

1.  将一个附加参数传递给递归函数以指示您当前所处的级别。将该值初始化为 0，并且每次调用该函数时都会递增该值。像这样的东西：

    ```
    def crawl(url, level)

      basePath = 'http://www.ug.dk'
      doc = Nokogiri::HTML(open(basePath + url))

      doc.css('.maplist li').each do |listitem|

        listitem.css('.txt').each do |txt|
          puts txt.content
        end

        listitem.css('a[href]').each do |link|
          crawl(link['href'], level + 1)
        end

      end

    end 
    ```

2.  使用`caller`保存调用堆栈的数组。使用此数组的大小来指示您所在的递归级别。

    ```
     def try
       puts caller.inspect
     end

     try 
    ```

我个人会坚持第一个版本，因为它看起来更容易阅读，但需要你修改界面。

# symfony - 更新架构时出现“列的重复定义”错误

> ID：14622736
> 
> 赞同：1
> 
> 时间：2013-01-31T09:47:14.430
> 
> 标签：symfony, fosuserbundle

我的包使用 FOSUserBundle 实体。但是我需要为我的包设置密码 nullable = true 如何在我的包实体中设置它。当我将密码放入我的用户实体并更新架构时，出现重复错误。请帮我

# ember.js - Ember.Object 计算属性返回一个对象

> ID：14622745
> 
> 赞同：0
> 
> 时间：2013-01-31T09:47:56.423
> 
> 标签：ember.js

所以我有一个 Ember 对象：

```
App.User = Ember.Object.extend({
    firstName: null, 
    lastName: null, 
    dob: Ember.Object.create({
        day: null,
        month: null,
        year: null,
        display: function () {
            var self = this,
            day = (self.get('day') < 10 ? "0" : "") + self.get('day'),
            month = (self.get('month') < 10 ? "0" : "") + self.get('month'),
            year = self.get('year');

            return day + '/' + month + '/' + year;
        }.property('day', 'month', 'year')
    })
}); 
```

在我的控制器上 - 我正在创建对象的一个​​版本 - 然后由一个表单绑定：

```
App.IndexController = Em.ArrayController.extend({
    user: App.User.create()
}); 
```

但是 - 出于某种原因，每当我尝试在我的控制器中或在我的视图中获取 dob.display 计算机属性时，我只会返回一个对象。

```
this.get('user.dob.display')

{{user.dob.display}} 
```

任何想法如何确保它返回一个字符串？这一直有效，直到几天前我从 1.0.0-pre2 更新到 1.0.0-pre4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:41:10.463

你不应该使用`create`，但是`createWithMixins`。这是在创建对象时定义计算属性的唯一方法：

```
dob: Ember.Object.createWithMixins({
    day: null,
    month: null,
    year: null,
    display: function () {
        day = (this.get('day') < 10 ? "0" : "") + this.get('day'),
        month = (this.get('month') < 10 ? "0" : "") + this.get('month'),
        year = this.get('year');

        return day + '/' + month + '/' + year;
    }.property('day', 'month', 'year')
}) 
```

备注：在`extend`方法中设置属性时，每个实例共享同一个对象。如果您不知道，[请阅读 Dan Gebhardt 撰写的“Understanding Ember.Object”文章](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)（这篇文章可能有点过时，但想法仍然相同）。

因此，在这里，您有：

```
var user1 = App.User.create().get("dob").set("year", 1988);
var user2 = App.User.create();
console.log(user2.get("dob.year")); // => 1988 
```

如果要定义实例之间不同的对象，则必须`init`像这样覆盖该方法：

```
App.User = Ember.Object.extend({
    init: function() {
        this._super(); // do not forget that
        this.set('dob', Ember.Object.createWithMixins({
            // [code ommitted]
        }));
    }
}); 
```

但我建议您创建一个模型`dob`，而不是每次创建用户时都创建它。

您可以[在 JSFiddle 中尝试此操作](http://jsfiddle.net/lcoq/6Qv3L/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:08:23.267

在 pre4 中，您不能在创建的 Ember.Object 上定义计算属性。

**不允许**

```
dob: Ember.Object.create({
    day: null,
    month: null,
    year: null,
    display: function () {
        var self = this,
        day = (self.get('day') < 10 ? "0" : "") + self.get('day'),
        month = (self.get('month') < 10 ? "0" : "") + self.get('month'),
        year = self.get('year');

        return day + '/' + month + '/' + year;
    }.property('day', 'month', 'year')
}) 
```

仅允许在扩展的对象上执行此操作。

我创建了一个适用于你的 dob 逻辑的小提琴（abit modified）。

[http://jsfiddle.net/Energiz0r/AeDAw/4/](http://jsfiddle.net/Energiz0r/AeDAw/4/)

# sql - sql-Count 应该只有一和二

> ID：14622753
> 
> 赞同：0
> 
> 时间：2013-01-31T09:48:16.143
> 
> 标签：sql, oracle, oracle10g

我需要编写查询

```
select count(*) cnt from tabel1,table2
where table1.a=table2.b 
```

它显示计数为 0 1 2

通过使用上面的查询作为子查询，我需要从表 1 中获取 id，其中 count 应该只有 1 和 2 。它不应该为零。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:14:12.890

尝试这个

```
select a.a , count(b.b) 
from table1 a 
join table2 b
on a.a = b.b
group by a.a
having count(b.b) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:16:35.423

请试试：

```
select a.id , count(*) 
from table1 a join table2 b
  on a.id = b.id
group by a.id
having count(*)  IN (1, 2) 
```

# wmi - 控制面板程序列表是否类似于win32_product列表...？

> ID：14622755
> 
> 赞同：0
> 
> 时间：2013-01-31T09:48:21.120
> 
> 标签：wmi, wmi-query

我的任务是列出我桌面上安装的所有软件程序。

我会使用 win32_product 来显示这个列表吗？

以下查询是否适用于此...？

```
select * from win32_product; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:36:58.590

[`Win32_Product`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394378%28v=vs.85%29.aspx)WMI 类**仅列出由 Windows Installer 安装的**软件。AFAIK 没有另一个 WMI 类来列出所有已安装的软件，所以你最好的选择是使用卸载注册表项

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall 
```

# model-view-controller - 如何将 azure 网站连接到 appsettings 中的 blob？

> ID：14622766
> 
> 赞同：2
> 
> 时间：2013-01-31T09:48:42.527
> 
> 标签：model-view-controller, blob, appsettings

我想将我的 mvc 网站连接到 azure blob。我进行了搜索，发现我应该使用 ConfigurarionManager 在应用程序中写入我的凭据和代码。我确实有格式异常：

未找到有效的帐户信息组合。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.FormatException：找不到有效的帐户信息组合。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[FormatException: 找不到有效的帐户信息组合。] Microsoft.WindowsAzure.Storage.CloudStorageAccount.b__0(String err) +33 Microsoft.WindowsAzure.Storage.CloudStorageAccount.TryParse(String s, CloudStorageAccount& accountInformation, Action`1 错误) +1554 Microsoft.WindowsAzure.Storage.CloudStorageAccount

我希望有配置管理器的 appsetting (key= value=) 详细信息和相关代码语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T15:12:57.537

最好发布您正在使用的代码，这样更容易为您提供帮助。你可以试试这个：

在 web.config 中：

```
 <add name="StorageConnectionString" connectionString="DefaultEndpointsProtocol=https;AccountName=XXXXXXXX;AccountKey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" providerName="System.Data.SqlClient"/> 
```

在您的 c# 代码中使用：

```
 readonly CloudStorageAccount _StorageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T14:24:33.130

我相信提问者可能已经从文档中复制了连接字符串作为开始，或者任何使连接字符串变形的东西，在这种情况下你会得到这个异常。

示例：在我的情况下，它是在 DefaultEndpointsProtocol=[http | https]，正确的格式是去掉括号：DefaultEndpointsProtocol=https

# android - Android Cipher 解码数据

> ID：14622767
> 
> 赞同：0
> 
> 时间：2013-01-31T09:48:45.927
> 
> 标签：android, cryptography, encryption

我需要解密 6 MB 字节 []。

```
Cipher pbeCipher = Cipher.getInstance("AES/CTS/NoPadding");
// Initialize cipher
pbeCipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
doFinal(data); 
```

这段代码在我的 Galaxy 2 上运行良好，但是当我在只有 16mb 堆的 HTC Legend 上运行它时，我得到了 OutOfMemory 异常。

所以我决定将我的数据拆分成块，但可能我做错了，因为这段代码不起作用。你能帮我找出我做错了什么吗？

```
byte[] result = null;

      while (data.length> offset )
      {               
         concatenateByteArrays(result, cipher.update(Arrays.copyOfRange(data, offset, offset+MB)));      
         offset+=MB;
      }
 return  concatenateByteArrays(result,cipher.doFinal()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:29:21.083

如果数据长度不是 MB 的倍数，我认为您的代码会忘记处理一段数据。这个版本可以正常工作（对不起，如果我的代码不简洁，但我希望很清楚）：

```
int inputLen = cipher.getBlockSize();
int inputOffset = 0;
byte[] output;
ByteArrayOutputStream outputArray = new ByteArrayOutputStream();

while(inputOffset + inputLen < input.length) {
    output = cipher.update(input, inputOffset, inputLen);
    inputOffset += inputLen;
    outputArray.write(output);
}

output = cipher.doFinal(input, inputOffset, input.length - inputOffset);
outputArray.write(output);
byte[] result = outputArray.toByteArray(); 
```

# apache - 在 Eclipse 上添加来自 Apache 包的 jar 文件

> ID：14622768
> 
> 赞同：0
> 
> 时间：2013-01-31T09:48:51.223
> 
> 标签：apache, jar

我的问题与[此处](https://stackoverflow.com/questions/4706212/install-apache-package-on-eclipse)和[此处](https://stackoverflow.com/questions/6826195/import-org-apache-error-http-client)的问题以及其他几个链接相同。我想使用一个导入的类

```
 org.apache.commons.math3.stat.regression.SimpleRegression 
```

我做了以下事情：我从[这里](http://hc.apache.org/downloads.cgi)下载了二进制文件和源代码HttpClient 4.2.3 (GA)。在lib目录下，有几个jar文件，我把它们都添加到项目中，然后按照[这里](https://stackoverflow.com/questions/4706212/install-apache-package-on-eclipse)给出的答案进行操作。
尽管如此，Eclipse 仍然无法识别

```
org.apache.commons.math3 
```

我做错了什么？
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:52:58.420

HttpClient 是错误的库。您正在寻找的数学库可以在这里找到：[http ://commons.apache.org/math/](http://commons.apache.org/math/)

下载数学 jar 后，您应该按照此处描述的步骤操作：[在 Eclipse 上安装 Apache 包](https://stackoverflow.com/questions/4706212/install-apache-package-on-eclipse)

# javascript - 使用 jQuery/JavaScript 警告特殊字符

> ID：14622769
> 
> 赞同：12
> 
> 时间：2013-01-31T09:48:55.797
> 
> 标签：javascript, jquery, html, alert

如何在 Javascript/jQuery 警报中显示带有特殊字符（如 €）的字符串？

例如：我想显示一个带有“价格为 10 欧元”的消息框

但是当我使用下面的代码时：

```
alert("The Price is &euro;10"); 
```

消息框中显示的输出是`"The Price is &euro;10"`，我希望我的输出是`"The Price is €10"`。

有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T09:53:58.280

将此用作警报。对我来说很好。

```
alert(' The Price is \u20AC 10'); 
```

描述在这里： http: [//leftlogic.com/projects/entity-lookup/](http://leftlogic.com/projects/entity-lookup/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T09:54:00.767

本机`alert`方法不解码 HTML 编码的实体。

但是浏览器在渲染 HTML 时会这样做。一种技巧是创建一个带有特定文本的 HTML 元素`innerHTML`（因此它进行字符处理），然后取回其`text`属性并发出警报。

```
function alertSpecial(msg) {
    msg = $('<span/>').html(msg).text();
    alert(msg);
}
alertSpecial('The Price is &euro;10'); 
```

这将适用于浏览器可以显示的所有 &xxx 字符，而无需找出您可能想要使用的每个特殊字符的字符代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T09:58:36.677

查看 ：

```
alert("The Price is \u20AC 10"); 
```

[http://jsfiddle.net/Nseum/](http://jsfiddle.net/Nseum/)

[Unicode 字符“欧元符号”（U+20AC）](http://www.fileformat.info/info/unicode/char/20ac/index.htm)

# excel - MS Excel LINEST、TREND、LOGEST 和 GROWTH 函数中的缺失值

> ID：14622773
> 
> 赞同：4
> 
> 时间：2013-01-31T09:49:08.373
> 
> 标签：excel, statistics, excel-2003, regression

我在 Excel 2003 中使用了 GROWTH（或 LINEST 或 TREND 或 LOGEST，都造成了同样的麻烦）函数。但存在一个问题，如果某些数据丢失，该函数拒绝给出结果：

![在此处输入图像描述](../Images/ecc04e14d2ca2d5c0f6a8d9325d81f5b.png)

您可以[在此处下载文件](http://artax.karlin.mff.cuni.cz/%7Ettel5535/pub/SO_missing_values.xls)。

## 有什么解决方法吗？寻找简单而优雅的解决方案。

1.  我不想要摆脱缺失值的明显解决方法 - 这意味着删除列并且也会损坏图表，并且它会在我有更多行和不同数据的其他表中产生问题列。其他明显的解决方法是将一个数据用于回归，另一个用于图形，但同样，这很烦人，只会在工作表中弄得一团糟！

2.  有什么办法告诉excell - 这个值是NA？

3.  另一个想法是跳过表达式中的缺失值。是否可以处理一组不连续的单元格？就像`=GROWTH($B2:$AH2; $B1:$AH1; B1)`在我的例子中一样，使用类似的东西：

    `=GROWTH({$B2:$I2,$K2:$AH2}; {$B1:$I1,$K1:$AH1}; B1)`

4.  我当然想避免写我自己的表达方式。我需要向我的同事解释如何做这一切，这会更加复杂。我想要一个简单而优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-01T14:38:02.370

我知道这是旧的......但如果您或其他人可能仍在寻找答案，您是否尝试过使用该`FORECAST`功能？它将计算缺失值的趋势（只要没有任何“#N/A”单元格）。

在我的例子中，我需要创建一个缺失值的无间隙图，但我还需要根据数据计算趋势。因此，首先我将图表链接到为每个缺失值放置 #N/A 的数据集：例如，`IF(ISBLANK(B2),NA(),B2)`

但后来我会用原始数据计算预测数字： `=FORECAST(B1,$B2:$AH2,$B1:$AH1)`

除非我遗漏了什么，否则应该会处理好它。你基本上会得到两行相同的数字，但其中一个有空格用于`FORECAST`计算，另一个用`NA()`图表替换每个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T08:12:38.343

如果你知道诀窍，这将是“微不足道的”。

要使用缺失值的 LINEST，您需要像往常一样创建 X 矩阵（r 行 x 列）和 Y 向量（r 行 x 列）。您还需要在 X 矩阵中创建一个附加列作为指示变量。将此列紧邻 X 矩阵的左侧。因此，如果 X 矩阵从 B 列开始，则将附加列放在 A 列中。对于要省略的每一行，将此指标值设置为零。对于要包括的每一行，将此指标值设置为一个。将 X 矩阵和 Y 向量中的每隔一列乘以该指示变量。将这个新的增强 X 矩阵和新的 Y 向量放在电子表格的其他位置。您现在应该有一个新的 X 矩阵（r 行 x c+1 列）和 Y 向量，其中每一行都被省略了零行。这很关键！

现在正常使用 LINEST 函数，指定整个 Y 向量和扩展的 r×(c+1) X 矩阵（包括指标列作为前两个函数参数，“False”（即零）为第三个参数和“TRUE”（即一个）或“FALSE”（即零）作为第四个函数参数。正确的参数估计值出现在 LINEST 输出的第一行。所有其他 LINEST 输出值如果您指定“TRUE”来获取统计信息，则除了第五行和第二列中的值（残差平方和）之外都是错误的。

如果将第四个函数参数指定为“TRUE”以获取统计信息，则需要更正输出中的错误值。扩展输出的第 2,3 和 4 行的值不正确；第 5 行第 1 列中的值也不正确。你需要修复它们。

在工作表的其他地方复制 LINEST 输出的第一行。如果您为统计信息指定“TRUE”，则在此副本下方保留四个空白行。将原始 LINEST 输出中的第 5 行第 2 列值复制到新输出空间的第 5 行第 2 列

第一步：计算正确的自由度数以替换 LINEST 输出的第 4 行第 2 列中的值。找出模型中的参数个数；这是c+1。您可以使用 COUNT 函数来计算扩展 X 矩阵中的列数。接下来将 X 矩阵的指标列中的所有值相加。假设四行的值都为零。使用 SUM 函数：这给出 r – 4 = 指标列中带有“1”的行数。正确的自由度是不同的：SUM(indicator column) – COUNT(augmented X-matrix columns)。这是应该放在新输出空间的第 4 行第 2 列中的值。

第二步：修复第2行和第3行第2列。将原始LINEST输出中的错误df（第4行第2列）除以新输出空间中正确的df（第4行第2列）。取这个商的平方根。将原始 LINEST 输出空间中第 2 行和第 3 行第 2 列中的值乘以该校正因子，得到参数的正确标准误和 Y 的正确标准误。

第三步：修正回归平方和。原始 LINEST 输出具有由于回归未校正输出的第 5 行第 1 列中的平均值而导致的平方和值；我们希望对均值进行校正的回归平方和。我们需要计算均值的校正。这是 Y 向量值的平方和除以指标列值的总和。从原始 LINEST 输出的第 5 行第 1 列中的值中减去此值，并将答案放在新输出空间的第 5 行第 1 列中。

第四步：修正第 4 行第 1 列中的 F 比。我们需要计算回归和残差的均方。回归的均方（F 比中的分子）是新输出空间的第 5 行第 1 列中的值除以 c，即增强前原始 X 矩阵中的列数。残差的均方（F 比中的分母）是新输出空间的第 5 行第 2 列除以新输出空间的第 4 行第 2 列。从这两个中间值计算 F 比，并将结果放在新输出空间的第 4 行第 1 列中。

第五步：修正第 3 行第 1 列中的 R 平方值。这是 1 -（第 5 行第 2 列除以第 5 行第 1 列和第 5 行第 2 列之和），使用来自新输出空间的值。

检查你的工作：在电子表格的其他地方复制增强的 X 矩阵和 Y 向量。对于那些在指示变量中为零的行，将所有条目替换为零。用零删除行中的所有单元格，向上移动单元格。您现在应该有一个行数更少但没有缺失值的 X 矩阵和 Y 向量。删除指标列。现在使用 LINEST 为这组简化的数据创建一个回归模型，但这次将第三个参数设置为 TRUE（包括一个常数）。这些结果应该与您在新输出空间中的结果相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:14:39.417

我的解决方案包括两部分：

1.  为避免图表上出现数据缺失`=NA()`功能的单元格中的空白 - 它会产生`#N/A`错误，并且此类错误类型由图表完全按照您的需要进行处理：在围绕缺失点的可用点之间插入线。在这里阅读更多：[http ://www.j-walk.com/ss/excel/usertips/tip024.htm](http://www.j-walk.com/ss/excel/usertips/tip024.htm)
2.  如果您需要趋势线 - 为什么不为此使用内置例程？我在您的数据中添加了一个指数，它与您的`GROWTH`计算值匹配 100%。它也可以正确处理`#N/A`。为了确保趋势线适合您的数据 - 只需`#N/A`暂时替换为两个相邻单元格的平均值（您的样本为 297） - 然后它将计算`GROWTH`系列，您会看到它完全适合添加的趋势线。在此处阅读有关趋势线的信息：http: [//office.microsoft.com/en-001/excel-help/add-a-trendline-to-a-chart-HP005198462.aspx](http://office.microsoft.com/en-001/excel-help/add-a-trendline-to-a-chart-HP005198462.aspx)和[http://www.computergaga.com/excel /2003/intermediate/charts/add_a_trendline.html](http://www.computergaga.com/excel/2003/intermediate/charts/add_a_trendline.html)

您的应用解决方案文件已共享：[https ://www.dropbox.com/s/j7htrk9ih2jtcq6/TrendlineNA.xls](https://www.dropbox.com/s/j7htrk9ih2jtcq6/TrendlineNA.xls)

希望这有帮助！

# css - IE 7 主 div 未显示

> ID：14622780
> 
> 赞同：1
> 
> 时间：2013-01-31T09:49:27.927
> 
> 标签：css, internet-explorer-7

在我的网站（[http://rochiidevis.com/rochii/detalii_rochie/1304?showback=true](http://rochiidevis.com/rochii/detalii_rochie/1304?showback=true)）上，主 div 没有显示在 ie7 中。你知道我为什么会有这个问题吗？我尝试使用开发人员工具栏...但找不到原因。

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:06:14.333

IE7 有一个奇怪的错误，浮动元素消失，我找到了一个很好的解决方法是添加`zoom:1;`到浮动元素的父对象

如果你做一个

```
 * {zoom:1;} 
```

它应该解决问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T09:59:55.213

`height: 0;`从中删除`.clear`。

# c++ - if(c.get_name(&name) && name && !strcmp(name, contName))

> ID：14622781
> 
> 赞同：0
> 
> 时间：2013-01-31T09:49:31.013
> 
> 标签：c++

```
if(c.get_name(&name) && name && !strcmp(name, contName)) 
```

有人可以告诉我这条线在 C++ 中的含义吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:50:59.330

如果`c`有一个名字并且它等于`contName`然后......

如果`c`有名字 - `c.get_name(&name) && name`- 获取`c`名字并确保它存在。
它等于`contName` - `&& !strcmp(name, contName)`-`strcmp`返回 0 表示相等。

# ios - 错误：尝试呈现 大家好，感谢您的阅读。我正在制作一个应用程序，您可以在该应用程序中拍照并从相机胶卷中检索照片并将其显示在视图上。问题是当我尝试使用调出相机胶卷的按钮时，我在标题中收到错误“演示正在进行中”。 如果我注释掉代码 [se 问问题 问问题 2013-01-31T09:49:43.447 3352 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 大家好，感谢您的阅读。我正在制作一个应用程序，您可以在该应用程序中拍照并从相机胶卷中检索照片并将其显示在视图上。问题是当我尝试使用调出相机胶卷的按钮时，我在标题中收到错误“演示正在进行中”。 如果我注释掉代码 [self presentViewController:imagePicker animated:YES completion:NULL]; 在 viewdidappear 方法中，我可以调出相机胶卷......我不知道如何正确关闭它，我试过 [imagePicker dismissViewControllerAnimated:YES completion:NULL]; 但无济于事。 这是我的代码！感谢检查出来。 -(IBAction)chooseExisting:(id)sender { [imagePicker dismissViewControllerAnimated:YES completion:NULL]; imagePicker2 = [[UIImagePickerController alloc] init]; imagePicker2.delegate = self; [imagePicker2 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary]; [self presentViewController:imagePicker2 animated:YES completion:NULL]; } -(void)viewDidAppear:(BOOL)animated{ while (chooseExistingInt <1) { overlayView.hidden = false; imagePicker = [[UIImagePickerController alloc] init]; imagePicker.delegate = self; [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera]; [self presentViewController:imagePicker animated:YES completion:NULL]; imagePicker.showsCameraControls = NO; imagePicker.cameraOverlayView = overlayView; chooseExistingInt ++; } } 固定（也许）我改变了： [imagePicker dismissViewControllerAnimated:YES completion:NULL]; 至 [imagePicker dismissViewControllerAnimated:NO completion:NULL]; 将动画更改为“否”。跆拳道：s 您可能正在使用 VI 作为您的编辑器。您可以做两件事：按“i”或“a”，您将进入打字模式，可以使用 ESC 键退出，然后按“:wq”或“ZZ”，这将保存文件。 另一种方法可能是在命令行上使用 -m 开关，这将允许您跳过此屏幕，并立即提供一条消息（-m "My message here"） ioscamerauiimagepickercontrollerpresentation 4 2 回答 2 This answer is useful 4 将您要执行的代码放在此 [[NSOperationQueue mainQueue] addOperationWithBlock:^{ //your code }]; 于 2014-11-04T11:10:32.290 回答 This answer is useful 0 它可能会帮助你。您正在使用presentviewcontroller而不是 presentModalViewController 并且在解雇中也使用dismissModalViewController 于 2013-01-31T09:58:41.487 回答 Related 0 c# - 在 Mono 中使用来自另一个进程的套接字描述符 0 actionscript-3 - 如何找到对一个对象或一类对象的所有引用？ 1 c# - 如何从c#.net中的网站获取java脚本变量的值 2 javascript - jquery 代码在由外部源托管时停止工作 8 java - 使用 Arrays.asList() 时如何在 List 中添加元素 1 python - RuntimeError: 无法访问 /dev/mem 0 python - Django manage.py 外壳 1 javascript - 引导子菜单链接不起作用 2 c# - 可编辑的网格视图 1 oauth - 在 Dreamhost VPS 上找不到（也不制作）OAuth php 类 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14622783
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ios, camera, uiimagepickercontroller, presentation

大家好，感谢您的阅读。我正在制作一个应用程序，您可以在该应用程序中拍照并从相机胶卷中检索照片并将其显示在视图上。问题是当我尝试使用调出相机胶卷的按钮时，我在标题中收到错误“演示正在进行中”。

如果我注释掉代码 [self presentViewController:imagePicker animated:YES completion:NULL]; 在 viewdidappear 方法中，我可以调出相机胶卷......我不知道如何正确关闭它，我试过 [imagePicker dismissViewControllerAnimated:YES completion:NULL]; 但无济于事。

这是我的代码！感谢检查出来。

```
-(IBAction)chooseExisting:(id)sender {

[imagePicker dismissViewControllerAnimated:YES completion:NULL];
imagePicker2 = [[UIImagePickerController  alloc] init];
imagePicker2.delegate = self;
[imagePicker2 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentViewController:imagePicker2 animated:YES completion:NULL]; 
```

}

```
-(void)viewDidAppear:(BOOL)animated{
while (chooseExistingInt <1) {

overlayView.hidden = false;
imagePicker = [[UIImagePickerController  alloc] init];
imagePicker.delegate = self;
[imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
[self presentViewController:imagePicker animated:YES completion:NULL];
imagePicker.showsCameraControls = NO;
imagePicker.cameraOverlayView = overlayView;
    chooseExistingInt ++;
}
} 
```

固定（也许）我改变了：

```
[imagePicker dismissViewControllerAnimated:YES completion:NULL]; 
```

至

```
[imagePicker dismissViewControllerAnimated:NO completion:NULL]; 
```

将动画更改为“否”。跆拳道：s

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-04T11:10:32.290

将您要执行的代码放在此

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
//your code 
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:58:41.487

它可能会帮助你。您正在使用**presentviewcontroller**而不是 **presentModalViewController**

并且在解雇中也使用**dismissModalViewController**

# html - 如何在 html5 和画布中转换图像以使其适合 3d 网格？

> ID：14622785
> 
> 赞同：1
> 
> 时间：2013-01-31T09:49:51.303
> 
> 标签：html, canvas

这个问题是这个问题的[延伸](https://stackoverflow.com/questions/9338891/how-to-put-an-image-on-another-image)。如何使用 canvas 和 html5 来完成。我不仅想将图像包裹在对象周围。我希望它相对于像网格这样的 3d 网格进行转换。有人可以指导我吗？
[3d 网格状网格 jpeg](https://i.stack.imgur.com/iKn0v.jpg)
[图像包裹在对象上](https://i.stack.imgur.com/ydYBo.png)

# c++ - 通过复制实现从流中读取

> ID：14622792
> 
> 赞同：1
> 
> 时间：2013-01-31T09:50:23.983
> 
> 标签：c++, io, istream, istream-iterator

我有一个代表字符序列的类，我想`operator >>`为它实现一个。我的实现目前看起来像这样：

```
inline std::istream& operator >>(std::istream& in, seq& rhs) {
    std::copy(
        std::istream_iterator<char>(in),
        std::istream_iterator<char>(),
        std::back_inserter(rhs));
    // `copy` doesn't know when to stop reading so it always also sets `fail`
    // along with `eof`, even if reading succeeded. On the other hand, when
    // reading actually failed, `eof` is not going to be set.
    if (in.fail() and in.eof())
        in.clear(std::ios_base::eofbit);
    return in;
} 
```

但是，以下可以预见的失败：

```
std::istringstream istr("GATTACA FOO");
seq s;
assert((istr >> s) and s == "GATTACA"); 
```

特别是，一旦我们到达“<code>GATTACA FOO”中的空间，复制停止（预期）并将故障位设置为`istream`（也是预期的）。但是，就目前而言，读取操作实际上是成功的`seq`。

我可以完全使用它来建模`std::copy`吗？我也想过使用 an `istreambuf_iterator`，但这实际上并不能解决这个特定问题。

更重要的是，对输入“<code>GATTACAFOO”的读取操作*应该会失败*，因为该输入不代表有效的 DNA 序列（这是我的类所代表的）。另一方面，`int`从输入中读取 an`42foo`实际上在 C++ 中*成功*，所以也许我应该将每个有效前缀视为有效输入？

（顺便说一句，使用显式循环这将是相当简单的，但我试图避免显式循环以支持算法。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:39:36.477

您不想这样做，`clear(eofbit)`因为`failbit`如果由于到达 EOF 而读取失败，则应该保持设置。否则，如果您只是离开`eofbit`设置而没有`failbit`循环，例如`while (in >> s)`将在到达 EOF 后尝试另一次读取，然后*该*读取将`failbit`再次设置。除非它正在使用您的`operator>>`，否则它将清除它，然后尝试再次阅读。然后再次。然后再次。`failbit`如果由于 EOF 而读取失败，则流的正确行为是设置，因此只需保持设置即可。

要使用迭代器和算法做到这一点，您需要类似的东西

```
copy_while(InputIter, InputIter, OutputIter, Pred); 
```

只有当谓词为真时才会复制输入序列，但这在标准库中不存在。你当然可以写一个。

```
template<typename InputIter, typename OutputIter, typename Pred>
  OutputIter
  copy_while(InputIter begin, InputIter end, OutputIter result, Pred pred)
  {
    while (begin != end)
    {
      typename std::iterator_traits<InputIter>::value_type value = *begin;
      if (!pred(value))
        break;
      *result = value;
      result++;
      begin++;
    }
    return result;
  } 
```

现在你可以像这样使用它：

```
inline bool
is_valid_seq_char(char c)
{ return std::string("ACGT").find(c) != std::string::npos; }

inline std::istream&
operator>>(std::istream& in, seq& rhs)
{
    copy_while(
        std::istream_iterator<char>(in),
        std::istream_iterator<char>(),
        std::back_inserter(rhs),
        &is_valid_seq_char);
    return in;
}

int main()
{
    std::istringstream istr("GATTACA FOO");
    seq s;
    assert((istr >> s) and s == "GATTACA");
} 
```

这可行，但问题是`istream_iterator`用于`operator>>`读取字符，因此它会跳过空格。这意味着后面的空间`"GATTACA"`被算法消耗并丢弃，因此将其添加到末尾`main`会失败：

```
assert(istr.get() == ' '); 
```

为了解决这个`istreambuf_iterator`不跳过空格的使用：

```
inline std::istream&
operator>>(std::istream& in, seq& rhs)
{
    copy_while(
        std::istreambuf_iterator<char>(in),
        std::istreambuf_iterator<char>(),
        std::back_inserter(rhs),
        &is_valid_seq_char);
    return in;
} 
```

要完成此操作，您可能希望指示提取失败，`seq`如果没有提取字符：

```
inline std::istream&
operator>>(std::istream& in, seq& rhs)
{
    copy_while( std::istreambuf_iterator<char>(in), {},
        std::back_inserter(rhs), &is_valid_seq_char);
    if (seq.empty())
      in.setstate(std::ios::failbit);  // no seq in stream
    return in;
} 
```

`{}`最终版本还使用了我最喜欢的 C++11 技巧之一，通过使用结束迭代器来稍微简化它。的第二个参数的类型`copy_while`必须与第一个参数的类型相同，推导为`std::istreambuf_iterator<char>`，因此`{}`简单的值初始化另一个相同类型的迭代器。

**编辑：**如果您想要更接近`std::string`提取匹配，那么您也可以这样做：

```
inline std::istream&
operator>>(std::istream& in, seq& rhs)
{
    std::istream::sentry s(in);
    if (s)
    {
        copy_while( std::istreambuf_iterator<char>(in), {},
                    std::back_inserter(rhs), &is_valid_seq_char);
        int eof = std::char_traits<char>::eof();
        if (std::char_traits<char>::eq_int_type(in.rdbuf()->sgetc(), eof))
            in.setstate(std::ios::eofbit);
    }
    if (rhs.empty())
        in.setstate(std::ios::failbit);
    return in;
} 
```

哨兵将跳过前导空格，如果您到达输入的末尾，它将设置`eofbit`。可能应该进行的另一个更改是`seq`在将任何内容推入之前清空，例如，从您的类型开始`rhs.clear()`或等效。`seq`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:54:13.537

> 特别是，一旦我们到达“GATTACA FOO”中的空间，复制停止（预期）

这种假设已经是错误的。相反，你没有得到

```
std::istringstream istr("GATTACA FOO");
seq s;
assert(!(istr >> s) && s == "GATTACAFOO"); 
```

使用`istream_iterator<char>`标准`copy`算法复制是行不通的，因为这将始终提取字符直到流结束。

如果达到结束条件并且结束条件不能提取不匹配的字符（即使用`in.peek()`甚至直接查看streambuf），您需要一个提前终止的副本。

为此，使用`std::copy()`将需要您自己的专用流迭代器（如果终止条件与下一个字符匹配，则比较等于结束迭代器。恕我直言，这比显式循环创建更多的晦涩难懂。YMMV

# perl - 我应该将 perl 'xt' 测试上传到 CPAN 吗？

> ID：14622793
> 
> 赞同：4
> 
> 时间：2013-01-31T09:50:26.807
> 
> 标签：perl

不久前，Perl 世界中出现了新事物。问题是在模块源代码中创建 `xt`目录，并在那里放置只应由作者运行的测试。测试的想法`xt`是当从 CPAN 安装模块时它们不会运行。

我在想，如果安装过程不需要测试，则无需将该测试上传到 CPAN。我的想法是在我的 VSC 中进行这些测试，但不要将它们放在上传到 CPAN 的 tar.gz 文件中。

但是现在有很多 CPAN 模块都有`xt`目录。我有一个本地 CPAN 副本，我搜索了这样的模块：

```
$ find -iname "*.tar*" -exec tar tf {} \; | grep "/xt/" &> modules_with_xt_dir
$ cat modules_with_xt_dir |sort --random-sort|uniq|head
CatalystX-Dispatcher-AsGraph-0.01/xt/03_pod.t
Religion-Bible-Reference-0.014/xt/release/perl-critic.t
DBIx-Custom-0.1674/xt/dbix-connector.t
Geo-Distance-XS-0.09/xt/
FBP-Perl-0.21/xt/pod.t
Getopt-Compact-WithCmd-0.14/xt/01_podspell.t
Dist-Zilla-Plugin-CheckExtraTests-0.004/xt/release/pod-coverage.t
MooseX-GlobRef-0.07/xt/pod_spellrc
Web-Request-0.09/xt/release/pod-syntax.t
Amon2-2.52/eg/Hello/xt/perlcriticrc 
```

我的问题是关于最佳做法的。什么是最好的？将`xt`测试上传到 CPAN，还是不上传？这个决定有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T10:04:53.083

我会说最好的做法是上传。

好处是它可以让人们破解和修补您的代码，并且仍然能够运行完整的测试套件。帮助人们编写补丁 - 并且不会伤害任何人。

# android - 显示使用我的应用程序的 Facebook 好友列表？

> ID：14622797
> 
> 赞同：1
> 
> 时间：2013-01-31T09:50:38.373
> 
> 标签：android, facebook-graph-api

我从 Facebook sdk 中的 PickFriendActivity 获得了一些示例代码，以显示我的朋友列表，如下所示：

```
public static void populateParameters(Intent intent, String userId, boolean multiSelect, boolean showTitleBar) {
        intent.putExtra(FriendPickerFragment.USER_ID_BUNDLE_KEY, userId);
        intent.putExtra(FriendPickerFragment.MULTI_SELECT_BUNDLE_KEY, multiSelect);
        intent.putExtra(FriendPickerFragment.SHOW_TITLE_BAR_BUNDLE_KEY, showTitleBar);
    } 
```

但是，当我插入我的应用程序 ID`userId`以显示玩我的应用程序的朋友时，列表显示

没有什么。我应该怎么办？或者我错过了一些属性？

我尝试：

```
intent.putExtra(FriendPickerFragment.EXTRA_FIELDS_BUNDLE_KEY, "installed"); 
```

但一切都没有改变:(

# javascript - JSON.stringify 反转？

> ID：14622802
> 
> 赞同：2
> 
> 时间：2013-01-31T09:50:49.177
> 
> 标签：javascript, json

我有一些数组和 js 对象使用`JSON.stringify`

我怎样才能将该字符串再次解码为数组和对象？

谢谢你 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T09:52:17.570

[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)让你这样做。

您可以在 Intarwebs 上随处看到大量示例。

甚至 jQuery 也为这种方法提供了 shim（IE6 不支持，可能是 7）：[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)。也就是说，如果你使用 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T09:52:31.140

那将是：

```
JSON.parse 
```

欢呼多姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:52:55.680

您可以使用 eval 方法，或者更好的是使用 JSON.parse。请查看此链接以获取更多信息： http: [//www.json.org/js.html](http://www.json.org/js.html)

# php - 带有大字符串的 json_encode

> ID：14622805
> 
> 赞同：0
> 
> 时间：2013-01-31T09:50:58.460
> 
> 标签：php

我在 json 对象字段中返回一个 html 响应`$o->sHtml`。

测试`sHtml`大约 13000 个字符，之后`json_encode`是`$o->sHtml = null`. 知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:59:06.567

Json 编码仅适用于 UTF-8 编码的数据。检查您的输入数据是否为 ​​utf8

```
$json  = json_encode($o->sHtml); //or json_encode($o);
$error = json_last_error();
var_dump($json, $error === JSON_ERROR_UTF8); 
```

这些是可能的错误

```
JSON_ERROR_NONE -   No error has occurred    
JSON_ERROR_DEPTH -  The maximum stack depth has been exceeded    
JSON_ERROR_STATE_MISMATCH - Invalid or malformed JSON    
JSON_ERROR_CTRL_CHAR -Control character error, possibly incorrectly encoded  
JSON_ERROR_SYNTAX - Syntax error     
JSON_ERROR_UTF8 -   Malformed UTF-8 characters, possibly incorrectly encoded 
```

参考：[http ://www.php.net/manual/en/function.json-last-error.php](http://www.php.net/manual/en/function.json-last-error.php)

# vba - 在 Excel 2007 中用 VBA 编写求和公式 (=t1+t2+tN)

> ID：14622806
> 
> 赞同：0
> 
> 时间：2013-01-31T09:50:58.753
> 
> 标签：vba, excel

在下面的代码中，我在名为“chrono”的一系列单元格上捕获了双击事件。如果目标单元格包含一个值，我会将其与应用于右侧下一个单元格的公式中已包含的值连接起来。我想获得类似的东西`=0,1+0,1`，但单元格仍然是空的。

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
On Error Resume Next
Dim rng As Range
Set rng = Range("chrono")
If Target.Count > 1 Then Exit Sub
If Not Intersect(Target, rng) Is Nothing Then
    Application.EnableEvents = False
    Cancel = True 'stop the edit mode
    With Target
        If .Value = "" Then
            .Value = Time
        Else:
            Dim nextCell As Range
            Set nextCell = ActiveCell.Offset(0, 1)
            If nextCell.Formula = "" Then
                nextCell.Formula = "=" & ((Time - .Value) * 24 * 60 * 60)
            Else:
                nextCell.Formula = nextCell.Formula & "+" & ((Time - .Value) * 24 * 60 * 60)
            End If
            .Value = ""
        End If
    End With
End If
Application.EnableEvents = True
End Sub 
```

* * *

## 编辑

很抱歉不清楚，我的英语不太好。我想计算两次双击之间的经过时间（因此没有现有数据）。我能够通过这样做来完成这项任务：

```
nextCell.Value = Time - .Value 
```

此外，我可以对多个输入求和：

```
If nextCell.Value = "" Then
    nextCell.Value = Time - .Value
Else:
    nextCell.Value = nextCell.Value + Time - .Value 
```

问题是每个新输入都会覆盖`nextCell.Value`，而我想跟踪每个输入。我尝试使用`=t1+t2`第一个代码示例中公开的公式 ()，但双击不会产生任何结果。

* * *

## 编辑

我正在尝试制作秒表。我的目标是计算在一项任务上花费的时间。为了让事情更清楚，这是我正在尝试做的事情，一步一步：

1.  两个单元格：A1 和 B1
2.  双击 A1
3.  A1值：当前时间
4.  双击 A1
5.  B1公式：“=”&（当前时间-A1值）
6.  A1 值：空
7.  重复 2、3、4
8.  B1公式：B1公式&“+”&（当前时间-A1值）
9.  重复 2、3、4
10.  等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:25:42.253

我终于发现问题出在我正在使用的特定语言上。我只是替换`Formula`为`FormulaLocal`，现在它可以工作了！另外，`(Time - .Value) * 1`允许将经过的时间转换为相应的十进制值。非常感谢大家:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:01:09.313

Excel 中的日期在内部存储为自 1900 年 1 月 1 日以来的天数。
因此 1 天 = 1。
因此 1 小时 = 1/24。
因此，要将您的时间以十进制秒为单位，请将其乘以 24 * 60 * 60

* * *

编辑：当您引用单元格的值时，
我会引用`nextCell.Value`而不是引用，例如`nextCell.Formula``nextCell.Formula = nextCell.Formula & "+" & (Time - .Value)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:18:25.087

仍然很难理解你在追求什么，但这里有一个尝试......

以下版本设置了一个基准时间，每次双击显示从那时起的累积时间。

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
On Error Resume Next
Dim rng As Range
Set rng = Range("chrono")
If Target.Count > 1 Then Exit Sub
If Not Intersect(Target, rng) Is Nothing Then
    Application.EnableEvents = False
    Cancel = True 'stop the edit mode
    With Target
        Dim nextCell As Range
        Set nextCell = ActiveCell.Offset(0, 1)
        If .Value = "" Then
            nextCell.Formula = ""
            .Value = Time
        Else:
            If nextCell.Formula = "" Then
                nextCell.Formula = "=" & Round((Time - .Value) * 24 * 60 * 60, 2)
            Else:
                nextCell.Formula = nextCell.Formula & "+" & _
                    Round(((Time - .Value) * 24 * 60 * 60) - nextCell.Value, 2)
            End If
'            .Value = ""  'this commented line can be deleted - we'll use the base time
        End If
    End With
End If
Application.EnableEvents = True
End Sub 
```

基准时间一旦设定，就不会改变。然后 nextCell 公式只是附加增量时间差。
前任。=2+4+1+0+7
每个值都是自上次双击后的秒数。

# ios - 如何使用带有枚举的 NSCoding 协议？

> ID：14622808
> 
> 赞同：10
> 
> 时间：2013-01-31T09:51:00.397
> 
> 标签：ios, objective-c, enums, nscoding

我有这个枚举：

```
typedef types {
    HBIntineraryTypeVisited = 0,
    HBIntineraryTypeUnvisited,
    HBIntineraryTypeUnknown,
    HBIntineraryTypeDeleted,
} HBIntineraryType; 
```

并希望使用 nscoding 协议将其与其他一些变量一起存储

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self) {
       _name = [aDecoder decodeObjectForKey:@"name"];
       // todo decode enum object
    }
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:_name forKey:@"name"];
    // todo encode enum object
} 
```

我使用什么编码器方法来解码和编码这种枚举？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:55:08.363

一般来说，`enum`s 的表示可以变化。使用 Objective-C 时，您应该使用[宏`NS_ENUM`来](http://nshipster.com/ns_enum-ns_options/)确定使用哪种类型来表示枚举。[这篇文章](https://bignerdranch.com/blog/enum-num-num/)有更多的背景知识。

# android - 左右对齐图像

> ID：14622809
> 
> 赞同：0
> 
> 时间：2013-01-31T09:51:04.623
> 
> 标签：android, android-layout

我有一个 listView，list_item 左边有一个 ImageButton，一个 TextView 居中，右边有一个 ImageButton：

```
<?xml version="1.0" encoding="utf-8"?>    
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:gravity="center">
      <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center">
        <ImageButton android:id="@+id/parkingState" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           android:layout_marginTop="4dip" 
           android:layout_marginRight="4dip"
           android:layout_marginLeft="4dip"
           android:layout_gravity="center"
           android:background="@null"/>
        <LinearLayout 
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content" 
            android:orientation="vertical"
            android:gravity="center"> 
            <TextView android:id="@+id/LblSubTitle"
                android:gravity="center_horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textStyle="normal"
                android:textColor="#444444"
                android:textSize="12sp" /> 
        </LinearLayout>
        <ImageButton android:id="@+id/parking_details" 
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="center"
              android:layout_marginRight="4dip"
              android:layout_marginLeft="4dip"
              android:layout_marginTop="4dip"
              android:layout_marginBottom="4dip"
              android:background="@null"/>
      </LinearLayout>
</LinearLayout> 
```

结果是：

![在此处输入图像描述](../Images/f0e737d4065f134ad8bcd1a51f056007.png)

但我想要左边和右边的图像。我怎样才能得到这个效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:58:19.650

使用 RelativeLayout 并使用 -

```
 <ImageButton android:id="@+id/parkingState" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="4dip" 
    android:layout_marginRight="4dip"
    android:layout_marginLeft="4dip"
    android:layout_gravity="center"
    android:background="@null"
    android:layout_alignParentLeft="true"/> 
```

同样 alignParentRight=true 用于其他图像按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:59:02.093

在你的第一个线性布局中写“fill_parent”，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>    
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:gravity="center"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:59:17.100

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/parkingState"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_gravity="center"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:layout_marginTop="4dip"
        android:background="@null"
        android:contentDescription="@string/app_name"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/LblSubTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/parking_details"
        android:layout_toRightOf="@+id/parkingState"
        android:gravity="center_vertical"
        android:singleLine="false"
        android:text="write something here to display in the text"
        android:textColor="#444444"
        android:textSize="12sp"
        android:textStyle="normal" />

    <ImageButton
        android:id="@+id/parking_details"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="4dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:layout_marginTop="4dip"
        android:background="@null"
        android:contentDescription="@string/app_name"
        android:gravity="center"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

试试上面你想要朋友的代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T09:59:19.040

使用`RelativeLayout`代替`LinearLayout`，然后你可以使用`layout`标签：

`android:layout_alignParentLeft = "true"`和`android:layout_alignParentRight = "true"`

**注意**：集中`TextView`使用：`android:layout_centerHorizontal="true"`

```
<RelativeLayout bla bla 
 bla bla >
<ImageView bla bla 
   bla bla 
   android:layout_alignParentLeft="true" />

<TextView bla bla 
   bla bla 
   android:layout_centerHorizontal="true" />

<ImageView bla bla 
   bla bla 
   android:layout_alignParentRight="true" />
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T10:07:30.083

把它放到 ImageButtun 标签中：

```
android:layout_alignParentLeft="true"

android:layout_alignParentRight="true" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:00:59.360

父 LineLayout 具有`android:layout_width="wrap_content"`. 将其更改为`fill_parent`.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical" >
    ....
    ....
    ....

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T10:01:12.490

添加线性布局，如下所示...

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content">
    <ImageButton android:id="@+id/parkingState" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dip" 
        android:layout_marginRight="4dip"
        android:layout_marginLeft="4dip"
        android:layout_gravity="center"
        android:background="@drawable/ic_launcher"/>

    <LinearLayout 
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
        android:gravity="center"
        > 
        <TextView android:id="@+id/LblSubTitle"
            android:gravity="center_horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="normal"
            android:text="hhhh"
            android:textColor="#444444"
            android:textSize="12sp" /> 

    </LinearLayout>

    <ImageButton android:id="@+id/parking_details" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_marginRight="4dip"
        android:layout_marginLeft="4dip"
        android:layout_marginTop="4dip"
        android:layout_marginBottom="4dip"
        android:background="@drawable/ic_launcher"/>
</LinearLayout>

</LinearLayout> 
```

# css - Jira 4.4 小工具 - IE9 表格宽度

> ID：14622811
> 
> 赞同：1
> 
> 时间：2013-01-31T09:51:07.697
> 
> 标签：css, internet-explorer-9, jira, jira-plugin

我在 Jira 小工具中有以下内容：

```
<!DOCTYPE html>
<style type="text/css">
.testTable {
    border: 1px solid red;
}
.testDiv {
    max-width:30px;
    white-space:nowrap;
    overflow:hidden;
}
</style>
<table class="testTable">
    <tr><td><div class="testDiv">this is looooooooo ooooooooo ooooooooooooo ooooooooo ng text</div></td></tr>
</table> 
```

如您所见，我想限制一列的宽度。该代码在以下组合中运行良好：
- FF 简单 html
- FF Jira 所有版本（使用代码作为小工具的内容）
- IE9 简单 html
- IE9 Jira 5.1（使用代码作为小工具的内容）

但我的公司使用 Jira 4.4 和 IE9 - 这是复制代码不限制列宽的唯一组合。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:10:06.653

使用**[IE 条件注释](http://haslayout.net/condcom)**为 IE 做出不同的风格：

```
<!-- [if ie 9]>
    stuff here
<![endif]> 
```

有关更多信息，请查看[如何创建仅 ie 样式表](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)。

如果您需要更多帮助，请告诉我您使用哪个 jira 小工具来显示此 HTML。

要限制页面的宽度，请使用`width:30px;`

话虽如此，尝试添加`width:100%;`到样式表：

```
.testDiv {
    max-width:30px;
    white-space:nowrap;
    overflow:hidden;
    width:100%;
} 
```

**更新**

这应该可以，试试[这个 jsfiddle](http://jsfiddle.net/DNjUX/)，在 IE9 上对我有用。

尝试使用严格的html，更改`<!DOCTYPE html>`为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

也许规则被覆盖，请尝试：

```
max-width:30px !important; 
```

如果这也没有帮助，请将 div 内容复制到[http://jsfiddle.net/](http://jsfiddle.net/)并添加必要的 css/js。

# javascript - .post 在提交时在 URL 中显示变量

> ID：14622819
> 
> 赞同：0
> 
> 时间：2013-01-31T09:51:33.200
> 
> 标签：javascript, php, jquery, http-post, processing

在使用序列化后，我使用该`$.post`方法将值发布到 PHP 页面进行处理，并且我用更具体的元素替换了序列化实用程序：

```
$("button").click(function(event) {
    $.post(
        "php/index.php",
        { seq: $("seq").val(); },
        function(data, status) {
            $('.stage').html(data);
        }
    );
}); 
```

但是数据没有被发送，它出现在 URL 中，如下所示：

> xxx.co.uk/?seq=123456

非常类似于一种`get`方法。如何调整它以将其发送到带有来自表单元素的值的 PHP 页面并将其接收为：

```
$_POST['seq']; 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:00:49.113

尝试这个：

```
 $("button").click(function(event) {
  $.post(
    "php/index.php",
    { seq: $("#seq").val() }, // or class $(".seq").val()
    function(data, status) {
        $('.stage').html(data);
    }
  );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:56:23.943

只是一个疯狂的猜测，按钮在表单内部，您不阻止按钮上的默认操作吗？也就是说，浏览器提交表单而不是执行您的 $.post？

如果是这种情况，只需`e.preventDefault();`在单击处理程序中执行 last 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:59:29.753

```
$("button").click(function(){
       $.post(
      "php/index.php",
       { seq: $("#seq").val() }, 
       function(data, status) {
      $('.stage').html(data);
    }
   );
}); 
```

# javascript - 如何在 Jquery Mobile 中获取网址？

> ID：14622820
> 
> 赞同：1
> 
> 时间：2013-01-31T09:51:34.420
> 
> 标签：javascript, jquery, cordova, jquery-mobile, event-handling

我有 2 页，`index.html`并且`about.html`

`index.html`

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 
    ... load jquery and jquery mobile...
</head> 

<body> 
    <div data-role="page" id="index">
    ...content goes here...
        <a href="about.html?id=1"  data-role="button">about</a>
    </div>
</body>
</html> 
```

并且`about.html`只有页面数据角色

```
<div data-role="page" id="about">
...content goes here...
</div> 
```

问题是，当我单击链接转到`about`页面并尝试获取 url 字符串时，它显示了我`index.html`

```
window.location.toString(); 
```

或者

```
$.mobile.activePage.data('url'); 
```

都返回`index.html`而不是`about.html?id=1`

我知道`about.html`会加载到索引页面中，但是如何获取该 ID？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:17:02.307

**`ChangePage`**需要使用方法将参数从一个页面发送到另一个页面：

```
$(document).on('pagebeforeshow', '#index' ,function () {
    var parameters = $(this).data("url").split("?")[1];;
    parameter = parameters.replace("parameter=","");  
    alert(parameter);
}); 
```

如果您想了解更多信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，以使其透明，这是我的个人博客。或者可以在[**这里**](https://stackoverflow.com/a/14469041/1848600)找到。查找名为：**页面转换之间的数据/参数操作的章节**

# c# - 使用 C# 同步不同数据库中的两个表

> ID：14622822
> 
> 赞同：2
> 
> 时间：2013-01-31T09:51:42.050
> 
> 标签：c#, database, sql-server-2008, postgresql, sync

我有一个带有表（我无法更改）的远程 Postgresql 数据库，其中包含信息（只有几列而不是整个表）我想用一个表同步到本地 SQL Server 2008 Express 数据库（我可以更改） .

现在我正在寻找一种有效的方法来做到这一点。由于同步将每 5 分钟运行一次，因此每次重新加载整个表都会产生很多我试图避免的不必要的流量。

我考虑过保存最新的 ID 并只获取更新的所有内容，但旧数据有可能（不太可能但仍然可能）被更改。就这样我会错过改变的数据。

同步将由与本地 SQL Server 在同一台计算机上运行的 C# 程序完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:23:05.313

这个问题有两种解决方案。您可以尝试变得聪明并且只传输更改 - 但这*需要*在源数据库上进行一些集成；我确信您的数据库管理员可以帮助您 - 可能会跟踪所有接触的行（例如使用源表的主键）的触发器。这个解决方案可以很好地扩展，但它更复杂。我认为您应该考虑第二种选择：简单的蛮力。

听上去，你的整张桌子可以轻松容纳在 100MB 中。这只是没有多少数据。假设您可以获得 10MB/s 的传输速率（这一点也不奇怪），您可以在 10 秒内传输所有内容。如您所说，如果您只需要几列，则总数据传输可能会少得多。每五分钟使用 10 秒的数字，这将是大约 3% 的负载以保持数据最新 - 这是对源数据库的微不足道的查询，可能不会导致太多负载，尤其是因为它'由于数据集非常小，因此将全部缓存在内存中。

看看[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)。本文（[Transderring data using`SqlBulkCopy`](http://www.codeproject.com/Articles/18418/Transferring-Data-Using-SqlBulkCopy)）是使用它将数据从一个数据库复制到下一个数据库的示例。源数据读取器可以是任何东西；例如，我使用它来插入来自对象的计算数据，但一个特别简单的情况是 DbDataReader，您可以从 Postgresql 中获取 select 语句。

不幸的是，默认选项并不太出色，因此您可能希望指定[`SqlBulkCopyOptions`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopyoptions.aspx)对您有用的选项。TableLock 可能不是一个坏的。此外，如果您并行执行此操作（即，将多个批量插入到一个表中），请注意索引（这可能导致死锁）。如果您使用批量复制批量大小，您可以优化吞吐量和内存使用之间的权衡，尽管默认值可能工作得很好。

从概念上讲，我会这样做：

*   打开到源数据库和目标数据库的连接（使用`using`）
*   `SqlTransaction`在目标数据库连接上启动
*   从目标表中删除所有行。
*   从源批量复制到目标（不要忘记传递事务）
*   犯罪

这样，您将自动更新目标表。

我不确定您要做什么，但如果这是某种形式的缓存，请考虑完全取消目标 SQL 服务器并将内存中的数据作为对象数组保留。对只读数据的内存访问非常快，并且您的数据集很容易放入内存中。

# android - Android 根视图

> ID：14622829
> 
> 赞同：1
> 
> 时间：2013-01-31T09:52:05.137
> 
> 标签：android

这将返回`findViewById(android.R.id.content).getRootView()`什么？它会返回我的应用程序的 rootview 还是 android 主屏幕的 rootview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:54:18.673

> getRootView() 查找当前视图层次结构中最顶层的视图。

在[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

基本上会返回您所看到的当前屏幕的“最高父视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:55:06.210

您将获得应用程序的根视图。

# php - 解析多部分 SOAP 附件的正确方法？

> ID：14622830
> 
> 赞同：3
> 
> 时间：2013-01-31T09:52:08.873
> 
> 标签：php, file, soap

直接使用 SoapClient 我得到一个异常：'看起来我们没有 XML 文档'，但是通过捕获异常并访问`$client->__lastReponse()`我得到了完整的消息 - 在这里描述：http: [//www.w3.org/TR/ SOAP 附件#SOAPMultipart](http://www.w3.org/TR/SOAP-attachments#SOAPMultipart)

例子：

```
------=_Part_13_5075710.1359624351743
Content-Type: text/xml; charset=UTF-8
Content-Transfer-Encoding: binary
Content-Id: <740ABC2FC7835A4DF5526C699A3C302D>

<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><ns1:GetOneFileResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://schemas.cisco.com/ast/soap/"><DataHandler href="cid:8D6C4A5AD0F2C0339324FBFC92417B5C" xsi:type="ns2:DataHandler" xmlns:ns2="DimeGetFileService"/></ns1:GetOneFileResponse></soapenv:Body></soapenv:Envelope>
------=_Part_13_5075710.1359624351743
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Id: <8D6C4A5AD0F2C0339324FBFC92417B5C>

Binary data here 

------=_Part_13_5075710.1359624351743-- 
```

什么是解析这个的正确方法，假设二进制数据是我的示例请求，作为文本，我试图通过 SOAP 服务下载。

我想在没有任何额外扩展的情况下解决这个问题，例如[WSO2](https://wso2.com/products/web-services-framework/php/)，它似乎具有二进制附件 ( MTOM ) 处理能力，但需要扩展

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:08:44.413

这绝对不是执行此操作的“正确方法”，但它适用于我的用例：

```
$client = new SoapClient($wsdl);
try {
  $client->MySoapFunction($argument);
} catch (SoapFault $e)
    {
        if ($e->getMessage() == 'looks like we got no XML document') {
            $response = $client->__getLastResponse();

            $data = $this->_stripSoapHeaders($response);
            return $this->_parseMimeData($data);
        }

protected function _stripSoapHeaders($response)
{
    // Find first occurance of xml tag
    preg_match('/(?<xml><.*?\?xml version=.*>)/', $response, $match);
    $xml = $match['xml'];

    // Strip SOAP http headers, and SOAP XML
    $offset = strpos($response, $xml) + strlen($xml . PHP_EOL);
    return substr($response, $offset);
}
protected function _parseMimeData($data)
{
    // Find MIME boundary string
    preg_match('/--(?<MIME_boundary>.+?)\s/', $data, $match);
    $mimeBoundary = $match['MIME_boundary']; // Always unique compared to content

    // Copy headers to client
    if (preg_match('/(Content-Type: .+?)'.PHP_EOL.'/', $data, $match)) {
        header($match[1]);
    }
    $contentType = $match[1];
    if (preg_match('/(Content-Transfer-Encoding: .+?)'.PHP_EOL.'/', $data, $match)) {
        header($match[1]);
    }

    // Remove string headers and MIME boundaries from data
    preg_match('/(.*Content-Id.+'.PHP_EOL.')/', $data, $match);
    $start = strpos($data, $match[1]) + strlen($match[1]);
    $end = strpos($data, "--$mimeBoundary--");
    $data = substr($data, $start, $end-$start);

    return trim($data, "\r\n");
} 
```

使用上面的代码，我通过 SOAP API 成功下载了 gzip 压缩的二进制文件。

# python - 在 "."、"!" 或 "?" 上拆分字符串，保留标点符号

> ID：14622835
> 
> 赞同：2
> 
> 时间：2013-01-31T09:52:21.540
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python split() 不删除分隔符](https://stackoverflow.com/questions/7866128/python-split-without-removing-the-delimiter)

我希望按如下方式拆分字符串：

```
text = " T?e  qu!ck ' brown 1 fox!     jumps-.ver. the 'lazy' doG?  !"
result -> (" T?e  qu!ck ' brown 1 fox!", "jumps-.ver.", "the 'lazy' doG?", "!") 
```

所以基本上我想在 处分割`". "`，`"! "`或者`"? "`但我希望删除分割点处的空格，而不是点、逗号或问号。

我怎样才能有效地做到这一点？

str split 函数只接受分隔符。我想知道在构建所需结果时拆分所有空格然后找到以点、逗号或问号结尾的最佳解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T09:57:13.713

您可以使用正则表达式拆分来实现此目的：

```
>>> import re
>>> text = " T?e  qu!ck ' brown 1 fox! jumps-.ver. the 'lazy' doG?  !"
>>> re.split('(?<=[.!?]) +',text)
[" T?e  qu!ck ' brown 1 fox!", 'jumps-.ver.', "the 'lazy' doG?", '!'] 
```

正则表达式`'(?<=[.!?]) +'`意味着匹配一个或多个空格 ( `' +'`) 的序列，只有在前面有一个 ., ! 或者 ？字符 ( `'(?<=[.!?])'`)。

# xerces-c - 如何为 VC++ 的 xerces-c 设置代理？

> ID：14622840
> 
> 赞同：0
> 
> 时间：2013-01-31T09:52:32.903
> 
> 标签：xerces-c, codesynthesis

使用 CodeSynthesis XSD 3.3，我生成了用于读取和写入 XML 的代码。

但是，在尝试阅读时，我遇到了连接问题（可能是因为我在代理后面）：

```
:0:0 error: unable to connect socket for URL 'http://www.uncertml.org/uncertml.xsd' 
```

我已经在 UNIX/Linux 上看到了使用 libcurl 的可能解决方案，但是如何在 VC++ 中做到这一点？

或者，如何阻止 xerces-c 访问互联网？（我已经下载了所有的模式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:51:22.100

通过关闭 XML 的验证来“解决”它：

```
ifstream ifs("test.xml", ifstream::in);
auto_ptr<Test>  = Test_(ifs, xml_schema::flags::dont_validate); 
```

# r - 使用连续分类器拆分应用函数的输入

> ID：14622842
> 
> 赞同：1
> 
> 时间：2013-01-31T09:52:42.497
> 
> 标签：r, plyr, apply, reshape

我有示例数据框

```
test.df<-data.frame(classifier=runif(n=1000), x1=rnorm(1000), x2=rnorm(1000), x3=rnorm(1000)) 
```

, `x1`, `x2`...,`x10000`

我想使用该`apply`函数执行大量测试（比如说`t.test`）并将结果收集到一个向量中（比如说`t.test()$p.value`）。对单列的测试将是`t.test(test.df$x1[ test.df$classifier<0.4 ], test.df$x1[ test.df$classifier>0.6 ])$p.value`

我想用`x1`, `x2`,...,对所有人执行此操作`x10000`。虽然我会使用该`apply`函数，`MARGIN=2`但我无法获得该`apply`函数来根据`classifier`.

（上面提供的示例绝对没有统计意义。不要像病毒一样传播）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:16:45.443

使用`apply`：

```
idx <- matrix(2:ncol(test.df), ncol=1)
apply(idx, 1, function(x) {   
    v1 <- test.df[test.df$classifier < 0.4, x]
    v2 <- test.df[test.df$classifier > 0.6, x]
    t.test(v1, v2)$p.value
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:11:05.433

这是你想要的吗 ？

```
df<-data.frame(classifier=runif(n=1000), x1=rnorm(1000), x2=rnorm(1000), x3=rnorm(1000))
sapply(df[,-1], function(v) {
  t.test(v[df$classifier<0.4], v[df$classifier>0.6])$p.value
}) 
```

这使 ：

```
 x1        x2        x3 
0.5028683 0.1238735 0.2021623 
```

# haskell - Chris Okasaki 的书 (1999) 和论文 (1996) 中的内容有什么区别 — 纯函数式数据结构

> ID：14622843
> 
> 赞同：12
> 
> 时间：2013-01-31T09:52:48.003
> 
> 标签：haskell, data-structures, functional-programming

我想阅读纯功能数据结构的工作。我很容易找到论文（可免费获得，1996 年），但看到也有一本书可用（1999 年）。所以我想知道区别有多大（最后两章除外）。

我也找不到合适的方式来购买这本书（例如一些在 android 和 Ubuntu 上易于阅读的数字形式，我唯一能找到的是一些只能通过 Windows/MacOS 软件打开的特殊 PDF）。

ps：答案在[https://softwareengineering.stackexchange.com/questions/185411/whats-the-difference-in-content-between-chris-okasakis-1996-thesis-and-1999-bo](https://softwareengineering.stackexchange.com/questions/185411/whats-the-difference-in-content-between-chris-okasakis-1996-thesis-and-1999-bo)

# magento - 是 magento 的销售

> ID：14622845
> 
> 赞同：4
> 
> 时间：2013-01-31T09:52:51.390
> 
> 标签：magento, entity-attribute-value

通过检查销售模块的配置，有如下sales_entity部分

```
<models>
<sales>
    <class>Mage_Sales_Model</class>
    <resourceModel>sales_resource</resourceModel>
</sales>
<sales_entity>
    <class>Mage_Sales_Model_Entity</class>
    <entities>
        <quote> 
```

并且这些类`Mage_Sales_Model_Entity_xxx`extends `Mage_Eav_Model_Entity_Abstract`，表明销售/订单是`EAV`风格而不是扁平的。我还可以找到表“eav_entity_type”有很多与“订单”相关的记录。

但是，遗憾的是，我浏览了代码，`EAV`最终在当前的代码库中没有到位（至少 v1.7）。谁能帮忙澄清一下？是否`EAV`已弃用销售/订单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T10:50:40.193

在最新版本的 Magento（即 1.6 和 1.7，不能说更早）中，销售实体属性不再存储在 EAV 属性值表中。Mage_Sales 模块的资源模型将销售实体连接到平面表。

您还可以看到基本 Sales 模型类`Mage_Sales_Model_Abstract`extends `Mage_Core_Model_Abstract`，并且基本 Sales 资源模型`Mage_Sales_Model_Resource_Abstract`扩展`Mage_Core_Model_Resource_Db_Abstract`- 它们都不是 EAV 模型或 EAV 资源模型。

您在表中找到的属性实体元数据`eav_entity_type`类似于 Catalog 和 Customer 模块的 EAV 实体，但属性值存储系统不是 EAV。

我想，您遇到的配置是为了向后兼容。

我整理了 Magento 的 EAV 系统的描述，您可能会觉得很有趣：[http ://www.divisionlab.com/solvingmagento/magento-eav-system/](http://www.divisionlab.com/solvingmagento/magento-eav-system/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T06:52:29.330

我比较了旧的 Magento 版本，发现 2 个版本 1.4.0.1 和 1.4.1.0 之间的销售订单模型存在很大差异

添加此文件以创建 sales_flat_order 并删除 Order EAV 表 Mage/Sales/sql/mysql4-upgrade-1.3.99-1.4.0.0.php - 第 1144 行

```
// Remove previous tables
$tablesToDrop = array(
    'sales_order_entity_decimal',
    'sales_order_entity_datetime',
    'sales_order_entity_int',
    'sales_order_entity_text',
    'sales_order_entity_varchar',
    'sales_order_entity',
    'sales_order_decimal',
    'sales_order_datetime',
    'sales_order_int',
    'sales_order_text',
    'sales_order_varchar',
    'sales_order'
);

foreach ($tablesToDrop as $table) {
    $table = $installer->getTable($table);
    if (!$installer->tableExists($table)) {
        continue;
    }
    $installer->getConnection()->query(
        'DROP TABLE ' . $installer->getConnection()->quoteIdentifier($table)
    );
} 
```

资源类文件 Mage_Sales_Model_Mysql4_Order 更改为从 Mage_Sales_Model_Mysql4_Order_Abstract 扩展而不是 Mage_Eav_Model_Entity_Abstract

Magento 还指出，从 EAV 到此版本的固定销售的变化可能是一项非常繁重的操作。

我相信我们不能再将 EAV 用于与产品或客户相同的订单。

# dom - 如何解析这个 xml 文件？

> ID：14622847
> 
> 赞同：1
> 
> 时间：2013-01-31T09:52:54.747
> 
> 标签：dom, xml-parsing

第一项

```
<item>
<title>...</title>
<link>...</link>
<guid>...</guid>
<description>...</description>
<pubDate>Thu, 31 Jan 2013 13:46:24 +0530</pubDate>
</item> 
```

第二项

```
<item>
<title>...</title>
<link>...</link>
<guid>...</guid>
<description>...</description>
<enclosure url="http://entertainment.oneindia.in/img/2013/01/31-race-2-6-day-collection.jpg" type="image/jpeg" length="202500"/>
<pubDate>Thu, 31 Jan 2013 10:36:35 +0530</pubDate>
</item> 
```

“项目”是 xml 中的元素。第一项没有“附件”标签，而在第二项中，它是可用的。我的 DOMParser 抛出 NPE，因为它正在搜索的标签“enclosure”在第一个“item”中不可用。当首选标签不可用时如何跳过？

我的 NPE 代码是

```
objItem.setImage(getAttributeVal("enclosure", eElement));

public String getAttributeVal(String tag,Element eElement)
    {

        String imgUrl=eElement.getElementsByTagName(tag).item(0).getAttributes().getNamedItem("url").getNodeValue();
        return imgUrl;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:19:08.347

您当前的代码不允许缺少实例。它总是假设它存在。

修改您的函数以检查它是否存在。

```
public String getAttributeVal(String tag,Element eElement)
{
    if (eElement.GetElementsByTagName(tag).Length > 0) // Or .Count > 0
    {
       String imgUrl=eElement.getElementsByTagName(tag).item(0).getAttributes().getNamedItem("url").getNodeValue();
       return imgUrl;
    }

    return ""; // Or null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:55:08.557

你可以使用 JaxB api：

```
 import java.io.File;
 import javax.xml.bind.JAXBContext;
 import javax.xml.bind.JAXBException;
 import javax.xml.bind.Unmarshaller;
 import javax.xml.bind.annotation.XmlAccessType;
 import javax.xml.bind.annotation.XmlAccessorType;
 import javax.xml.bind.annotation.XmlAttribute;
 import javax.xml.bind.annotation.XmlElement;
 import javax.xml.bind.annotation.XmlRootElement;

public static void main (String [] args) throws JAXBException {

File file = new File("myfile.xml");
JAXBContext jaxbContext = JAXBContext.newInstance(MyItem.class);
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller ();

MyItem item = (MyItem) unmarshaller.unmarshal (file);

String description = item.getDescription ();
String guid = item.getGuid ();
// ...
}

@XmlRootElement(name = "item")
@XmlAccessorType(XmlAccessType.NONE)
public static class MyItem {

public MyItem () {
  // FOR JAXB SERIALISATION
}

public String getTitle () {
  return title;
}
public void setTitle (String title) {
  this.title = title;
}
public String getLink () {
  return link;
}
public void setLink (String link) {
  this.link = link;
}
public String getGuid () {
  return guid;
}
public void setGuid (String guid) {
  this.guid = guid;
}
public String getDescription () {
  return description;
}
public void setDescription (String description) {
  this.description = description;
}
public MyEnclosre getEnclosure () {
  return enclosure;
}
public void setEnclosure (MyEnclosre enclosure) {
  this.enclosure = enclosure;
}
public String getPubDate () {
  return pubDate;
}
 public void setPubDate (String pubDate) {
  this.pubDate = pubDate;
 }

@XmlElement(name = "title")
private String title;

@XmlElement(name = "link")
private String link;

@XmlElement(name = "guid")
private String guid;

@XmlElement(name = "description")
private String description;

@XmlElement(name = "enclosure")
private MyEnclosre enclosure;

@XmlElement(name = "pubDate")
private String pubDate;

}

public static class MyEnclosre {

public MyEnclosre () {
  //  FOR JAXB SERIALISATION
}

public String getUrl () {
  return myUrl;
}

public void setUrl (String url) {
  this.myUrl = url;
}

@XmlAttribute (name = "url")
private String myUrl;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:56:35.627

您可以尝试使用序列化，您可以为附件创建类

```
public class item
{
   public enclosure enclosure{get;set} // it is null if no corresponding xml presented.
}

public class enclosure 
{
   public string url {get; set;}
   public string type {get; set;}
   public string length {get; set;}
} 
```

# sql - 将 SQL 字符串的一部分移动到另一个变量中

> ID：14622855
> 
> 赞同：2
> 
> 时间：2013-01-31T09:53:16.443
> 
> 标签：sql, sql-server

我有一个带有 sql 函数的项目的问题：

```
DECLARE @Var1 varchar(8000) = '{strong} this is strong{/strong} this is not strong.';

DECLARE @Var2 varchar(8000) 
```

如果我想在`'{strong}'`和之间移动字符串`'{/strong}'`以`@Var2`获得这个结果

```
@Var1 = 'this is not strong.' 
@Var2 = '{strong} this is strong {/strong}' 
```

我该怎么做？？

PS：我还是 sql 新手 :(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:07:39.943

试试下面的查询......它会帮助你......

```
declare @var1 varchar(8000)
declare @var2 varchar(8000)
set @var1 ='{strong} this is strong{/strong} this is not strong.'
select @var2 = substring(@var1,charindex('{strong}',@var1)+len('{strong}'),charindex('{/strong}',@var1)-charindex('{strong}',@var1)-len('{strong}'))
SET @var1 = REPLACE(@var1,'{strong}' + @var2 + '{/strong}','')
select @var1 as Var1,@var2 as Var2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:08:09.933

Sql 不是做这种事情的最佳选择

如果我不得不，就像有人用枪指着我的孩子一样

我会做这样的事情，可能需要根据您选择的 sql 风格进行调整

这是 T-SQL

```
Declare v1 VarChar(255)
Declare v2 VarChar(255)

set v1 = '{Strong}$REPLACE${/Strong}'
set v2 = 'This is strong'

Select Replace(v1,'$REPLACE$',v2) 
```

另一种方法是你必须使用 CharIndex 来查找 '}{/' 然后使用 Substring 来分割 V1（如 '{Strong}{/Strong}'），然后将它们与 v2 连接起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:30:49.040

使用`LEFT`,`RIGHT`和`CHARINDEX`作为;

```
declare @start varchar(50)='{strong}', @end varchar(50)='{/strong}' 

select @var2 = left(@var1,charindex(@end,@var1,1)+len(@end)), 
       @var1= right(@var1,len(@var1)-(charindex(@end,@var1,1)+len(@end))) 
```

[SQL 演示 1](http://sqlfiddle.com/#!3/d41d8/8322)

这有点疯狂但通用，并且也适用于一些文本`before '{strong}' tag`。

```
declare 
@var1 varchar(100)= 'front text{strong} this is strong{/strong} this is not strong', 
@var2 varchar(100)= ''

declare @start varchar(50)='{strong}', @end varchar(50)='{/strong}' 

select @var2 = substring(myString,ci1,ci2+len(@end)-ci1), 
       @var1 = right(myString,len(myString) - (ci2+ len(@end)))
from (
    select @var1 myString, charindex(@start,@var1,1) ci1, 
           charindex(@end,@var1,charindex(@start,@var1,1)) ci2
) T  

select @var2 var2 ,@var1 var1 
```

[SQL 演示 2](http://sqlfiddle.com/#!3/d41d8/8311)

```
--Results
VAR2                                VAR1
{strong} this is strong{/strong}    this is not strong 
```

# import - 谁能告诉我 import *** which *** 是 Ironpython 中的变量的方法？

> ID：14622857
> 
> 赞同：1
> 
> 时间：2013-01-31T09:53:23.757
> 
> 标签：import, ironpython

我想在 Ironpython 中的脚本文件中导入另一个脚本文件。例如：

```
`filename = "C:\test.py"
import filename` 
```

我得到一个错误说：

> IronPython.Runtime.Exceptions.ImportException：没有名为文件名的模块

如果将模块放入变量中，您能告诉我如何导入模块吗？

我当然知道，如果我像下面这样写没有任何问题：

```
import test 
```

但是模块必须是不可变的，这实际上不是我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:39:51.633

这实际上是标准的 Python——[`__import__`](http://docs.python.org/2/library/functions.html#__import__)函数就是你想要的。

# c# - 具有名称值对数组的 Spark 视图引擎

> ID：14622858
> 
> 赞同：0
> 
> 时间：2013-01-31T09:53:25.460
> 
> 标签：c#, syntax, template-engine, spark-view-engine, keyvaluepair

我想将 Spark 视图引擎 (DirectUse) 用于电子邮件模板。所以我深入研究了 Spark 示例（EmailOrTextTemplating）。但我想要的是在 viewdata 中使用一组 NameValuePair(String name, object value) 对象作为字典。

然后像这样在模板中使用它：

```
<p>Name = ${#namevaluepairs["name"]}</p> 
```

或者

```
<if condition='namevaluepairs["date"].ToString("dd-MM-yyyy") == "31-01-2013"'>
  <p>text</p>
</if> 
```

我不知道正确的语法是什么或如何将名称值对放入视图数据中。任何人都可以帮助我朝着正确的方向前进吗？

Ps 我阅读了文档，但我看到了使用 spark 引擎语法的不同方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:09:05.003

ViewData 对象*是*一个字典。

只需在调用 Spark 之前将对象加载到 ViewData 中：

```
var engine = new SparkViewEngine();
var descriptor = new SparkViewDescriptor()
            .AddTemplate( templateFileName );
ISparkEngineView view = engine.CreateInstance( descriptor ) as ISparkEngineView;

view.ViewData["name"] = "foo";
view.ViewData["date"] = DateTime.Now;

view.RenderView( writer ); 
```

然后在模板中像往常一样使用 ViewData：

```
${ViewData["name"]}

<if condition='ViewData["date"]...'></if> 
```

# javascript - jQuery多级导航

> ID：14622859
> 
> 赞同：1
> 
> 时间：2013-01-31T09:53:25.477
> 
> 标签：javascript, jquery, magento

您好，我在 magento 中创建了多级导航。现在我的菜单的打开和关闭有问题。我希望我的菜单在单击另一个顶部菜单时关闭“活动”顶部菜单。我似乎无法正确理解这部分。

Javascript：

```
jQuery(document).ready(function(jQuery) {    
        jQuery(".sub_category").hide();
        jQuery(".sub_sub_category").hide();

        jQuery('#product-nav li a').click(function () {
            jQuery('#product-nav li a').removeClass('active');
            jQuery(this).addClass('active');
        });

        jQuery('ul li.expanded a').each(function(i){
            var subUl = jQuery(this).parent().find('ul'); //Get the sub ul.
            jQuery(this).bind('click',function(e){
                     // Prevent the default action of the link
                    subUl.toggle();
                }) ;   
        });
        jQuery(".head_child").click(function(e) {
                e.preventDefault();
        });
        jQuery('li:has(ul) > a').click(function(e) {
                 e.preventDefault();
        });

            var url = window.location.toString();

        jQuery('ul li.expanded a').each(function(){         
            var myHref= jQuery(this).attr('href');
            var subUl = jQuery(this).parent().find('ul'); //Get the sub ul.
            if( url.match(myHref)) {
                jQuery(this).addClass('activeElement')
                subUl.toggle();
        }
});       
}); 
```

请参阅我的 jsfiddle 以获取我的代码示例。 [http://jsfiddle.net/wvEcF/1/](http://jsfiddle.net/wvEcF/1/)

# php - 客户群产品价格

> ID：14622860
> 
> 赞同：0
> 
> 时间：2013-01-31T09:53:32.857
> 
> 标签：php, magento

我希望有人可以帮助我，我正在尝试根据客户群从 magento 中提取产品价格。

我没有使用分级定价，我只是有一个标准价格的产品，我为每个客户群指定了不同的价格。由于某种原因，我无法提取此信息。

我可以看到价格映射似乎保存在表“catalog_product_index_group_price”中，所以我想我可以直接编写 SQL 来提取这些，但我更愿意使用 PHP Mage 模型或 V2 SOAP API。

我尝试了很多方法，目前我正在使用类似下面的方法，但没有成功，价格变量始终为空。

```
$rules = Mage::getResourceModel('catalogrule/rule');

$price = $rules->getRulePrice($now, $websiteId, $customer_group_id, $productID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:05:40.617

注释中的代码格式不正确，所以又来了！

```
<?php

include_once '../App/Mage.php';

 Mage::app();

$productID = $_GET["id"];

$pd = Mage::getModel('catalog/product')->load($productID);
$groupPrices = $pd->getData('group_price');
echo json_encode($groupPrices);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:16:14.407

请尝试以下

```
$product = Mage::getModel('catalog/product')->load($productId);
$groupPrices = $product->getData('group_price') 
```

$groupPrices 现在应该是一个包含您要查找的数据的数组。

# range - 范围参数的贝叶斯先验（空间统计）

> ID：14622864
> 
> 赞同：1
> 
> 时间：2013-01-31T09:53:43.510
> 
> 标签：range, spatial, bayesian

我正在使用贝叶斯降水分层模型，我需要为描述空间依赖性的参数指定先验；门槛和范围。我的问题是，在 f.eks 范围内使用不同单位时，先验会变得不同。米或公里。我很困惑吗？单位是否应该代表使用的坐标系类型（在这种情况下为 UTM）？我很感激任何意见。

# html - 在中使用微数据 我正在尝试将 Schema.org 标记添加到我的 HTML 中。具体来说，我想根据这些示例标记一些事件。尽管这些示例很有帮助，但它们也有些不完整，例如，没有演示表演者/表演者属性的使用。 在我的特定情况下，每个事件都表示为表格行。在添加 Schema.org 属性之前，标记如下所示： <t 3="" 4571="" 问问题="" 2013-01-31t09:53:55.977="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我正在尝试将="" schema.org="" 标记添加到我的="" html="" 中。具体来说，我想根据这些示例标记一些事件。尽管这些示例很有帮助，但它们也有些不完整，例如，没有演示表演者="" 表演者属性的使用。="" 在我的特定情况下，每个事件都表示为表格行。在添加="" 属性之前，标记如下所示：="" <tr="" id="459">[Dublin Chinese Film Festival 2013](/summer-festivals/show/459/film/dublin-chinese-film-festival-2013) Film 1 Feb 2013 9 Feb 2013 Lighthouse Cinema, Smithfield Square, Dublin 7 Ireland 在第一次尝试添加 Schema.org 属性后，它看起来像这样： [Dublin Chinese Film Festival 2013](/summer-festivals/show/459/film/dublin-chinese-film-festival-2013) Film  1 Feb 2013  9 Feb 2013      Lighthouse Cinema, Smithfield Square, Dublin 7  Ireland   这样做有几个问题： 在 Schema.org 示例中，每个事件的根始终是 a，但在我的情况下是 a ，这是否允许？ 我想在 Schema.org 标记中包含一些实际上并未向用户显示的数据（例如纬度、经度）。目前，我通过在表格单元格之间添加额外的 s 来做到这一点，但这不是有效的 HTML。 同样，我需要将国家/地区单元格包装在 a中，以便从 Schema.org POV 中正确标记它。但是标记随后从 HTML POV 变为无效。 关于 1：您可以在任何HTML 元素上使用 Microdata 属性。所以是的，你可以使用这些td元素。这些示例总是使用div/span因为它总是有效的。使用现有标记而不是添加新的div/span元素是一种很好的做法。 关于2：也许该itemref属性可以在这里有所帮助？ […] 它只是一种句法结构，可帮助作者向要注释的数据不遵循方便的树形结构的页面添加注释。例如，它允许作者在表格中标记数据，以便每列定义一个单独的项目，同时将属性保留在单元格中。 关于3：你为什么不span包装td？ Ireland htmlschema.orgsemantic-markupmicrodata 4 1 回答 1 This answer is useful 1 关于 1：您可以在任何HTML 元素上使用 Microdata 属性。所以是的，你可以使用这些td元素。这些示例总是使用div/span因为它总是有效的。使用现有标记而不是添加新的div/span元素是一种很好的做法。 关于2：也许该itemref属性可以在这里有所帮助？ […] 它只是一种句法结构，可帮助作者向要注释的数据不遵循方便的树形结构的页面添加注释。例如，它允许作者在表格中标记数据，以便每列定义一个单独的项目，同时将属性保留在单元格中。 关于3：你为什么不span包装td？ Ireland 于 2013-02-02T02:09:02.930 回答 Related 2 javascript - 在 jquery 中使用自定义动画队列 1 wpf - AvalonEdit 如何修改特定行 1 biztalk - 如何在编排 BizTalk 2010 中循环 0 c# - 向客户端获取错误详细信息 3 python - django 测试/python 语法 5 asp.net - ASP.NET 中有哪些不同类型的会话 0 google-app-engine - Google App Engine Datastore 多值属性仅在具有 > 1 个值时匹配 1 google-app-engine - GAE：下载数据时出错，如果 ndb.KeyProperty(repeated=True) 2 java - 将 json 数据发送到 db 并在 listview 中显示会引发“空指针异常” 4 java - 是否可以使用构建中没有的 .class 文件？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</t>

> ID：14622868
> 
> 赞同：3
> 
> 时间：
> 
> 标签：html, schema.org, semantic-markup, microdata

我正在尝试将 Schema.org 标记添加到我的 HTML 中。具体来说，我想根据[这些示例](http://schema.org/Event)标记一些事件。尽管这些示例很有帮助，但它们也有些不完整，例如，没有演示表演者/表演者属性的使用。

在我的特定情况下，每个事件都表示为表格行。在添加 Schema.org 属性之前，标记如下所示：

```
 <tr id="459">

        <td class="nameCol">
            <a href="/summer-festivals/show/459/film/dublin-chinese-film-festival-2013">Dublin Chinese Film Festival 2013</a>
        </td>
        <td class="typeCol">Film</td>
        <td class="startCol">1 Feb 2013</td>
        <td class="endCol">9 Feb 2013</td>
        <td class="addressCol">Lighthouse Cinema, Smithfield Square, Dublin 7</td>
        <td class="countryCol">Ireland</td>                       
    </tr> 
```

在第一次尝试添加 Schema.org 属性后，它看起来像这样：

```
 <tr id="459" itemscope itemtype="http://schema.org/Event">

        <td class="nameCol">
            <a href="/summer-festivals/show/459/film/dublin-chinese-film-festival-2013" itemprop="url">Dublin Chinese Film Festival 2013</a>
        </td>
        <td class="typeCol">Film</td>

        <td class="startCol">
            <meta itemprop="startDate" content="2013-02-01">
            1 Feb 2013
        </td>

        <td class="endCol">
            <meta itemprop="endDate" content="2013-02-09">
            9 Feb 2013
        </td>

        <span itemprop="location" itemscope itemtype="http://schema.org/Place">

            <span itemprop="geo" itemscope itemtype="http://schema.org/GeoCoordinates">
                <meta itemprop="latitude" content="53.3482"/>
                <meta itemprop="longitude" content="-6.27794"/>
            </span>

            <td class="addressCol">Lighthouse Cinema, Smithfield Square, Dublin 7</td>

            <span itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
                <td class="countryCol" itemprop="addressCountry">Ireland</td>
            </span>
        </span>
    </tr> 
```

这样做有几个问题：

1.  在 Schema.org 示例中，每个事件的根始终是 a `<div>`，但在我的情况下是 a `<tr>`，这是否允许？

2.  我想在 Schema.org 标记中包含一些实际上并未向用户显示的数据（例如纬度、经度）。目前，我通过`<span>`在表格单元格之间添加额外的 s 来做到这一点，但这不是有效的 HTML。

3.  同样，我需要将国家/地区单元格包装在 a`<span>`中，以便从 Schema.org POV 中正确标记它。但是标记随后从 HTML POV 变为无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:09:02.930

**关于 1：您可以在***任何*HTML 元素上使用 Microdata 属性。所以是的，你可以使用这些`td`元素。这些示例总是使用`div`/`span`因为它总是有效的。使用现有标记而不是添加新的`div`/`span`元素是一种很好的做法。

**关于2：**也许该[`itemref`属性](http://www.w3.org/TR/microdata/#attr-itemref)可以在这里有所帮助？

> […] 它只是一种句法结构，可帮助作者向要注释的数据不遵循方便的树形结构的页面添加注释。例如，它允许作者在表格中标记数据，以便每列定义一个单独的项目，同时将属性保留在单元格中。

**关于3：**你为什么不`span`包装`td`？

```
<td class="countryCol" itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
  <span itemprop="addressCountry">Ireland</span>
</td> 
```

# android - Android 奇怪的 sqlite 错误

> ID：14622872
> 
> 赞同：1
> 
> 时间：2013-01-31T09:54:15.630
> 
> 标签：android, cursor

我有一个 android 应用程序，我在其中使用光标和列表视图。我在运行 android 版本为 2.1 时开发了这个应用程序。我决定不使用 StartmanagingCursor() 和 stopmanagingcursor() 因为当我从一个活动转移到另一个活动时它们的行为不稳定。事实上，我创建了一个静态函数，它调用每个生命周期事件来管理活动游标。下面是这个函数的完整代码。

```
public static void onBegin(Object extraMethodName, Activity activity,
            Utils.lifeStatus lastStatus, Utils.lifeStatus currentStatus) {
        Method method;
        Utils.currentActivity = activity.getLocalClassName() + "_"
                + Integer.toString(activity.getTaskId());

        if (!Utils.lifecycleCheck(lastStatus, currentStatus)) {
            DBAdapter.open(activity);
            if (extraMethodName != null) {
                try {
                    method = activity.getClass().getSuperclass()
                            .getDeclaredMethod    (extraMethodName.toString());
                    method.setAccessible(true);
                    method.invoke(activity);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

    }

    public static void onEnd(Object extraMethodName, Activity activity,
            Utils.lifeStatus lastStatus, Utils.lifeStatus currentStatus) {
        Method method;
        Log.i("Utils.currentActivity", Utils.currentActivity);
        Log.i("ActivityClosing",
                activity.getLocalClassName() + "_"
                        + Integer.toString(activity.getTaskId()));
        if (Utils.lifecycleCheck(lastStatus, currentStatus)) {
            if (Utils.currentActivity.equals(activity.getLocalClassName() + "_"
                    + Integer.toString(activity.getTaskId()))) {
                if (extraMethodName != null) {
                    try {
                        method = activity.getClass().getSuperclass()
                                .getDeclaredMethod(extraMethodName.toString());
                        method.setAccessible(true);
                        method.invoke(activity);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                DBAdapter.close();
            }
        }
    }
      public static boolean lifecycleCheck(Utils.lifeStatus lastStatus,
            Utils.lifeStatus newStatus) {
        boolean result = false;

        if (lastStatus != null) {
            switch (lastStatus) {
            case PAUSE:
            case DESTROY:
            case STOP:
                result = false;
                break;
            case RESUME:
            case START:
            case RESTART:
            case ONACTIVITYRESULT:
                result = true;
                break;

            default:
                result = false;
            }
        } else {
            result = false;
        }

        return result;
    } 
```

其中extramethod是onBegin函数中每个activity的初始化函数和onEnd函数中的关闭游标函数。

在我决定创建一个基本 Activity 之前，这些函数一直很完美，其中我有一个光标和一个适配器，所有其他活动都从 base 继承。此活动还管理生命周期。（下面是完整的代码）。在那次更改之后，我在 android v4.0 中部署了我的应用程序，我的客户报告我说它在随机情况下崩溃。复制错误对我来说非常困难，但我可以看到，当应用程序崩溃时，我会将奇怪的重复数据从客户端带到服务器。

```
 package baseActivities;

public class BaseListActivity extends ListActivity {
    protected BaseCursorAdapter _cAdapter;
    protected BaseGridCursorAdapter _gridAdapter;
    protected BaseImageCursorAdapter _imageAdapter;
    protected String TAG = "BaseActivity";
    private static Utils.lifeStatus _lastStatus = Utils.lifeStatus.DESTROY;
    public Cursor _cursor;

    public enum filterTypes{
        query,category,subcategory,promitheutis
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final Context cnt=this.getApplicationContext();

        Thread.UncaughtExceptionHandler mUEHandler = new Thread.UncaughtExceptionHandler() {

            @Override
            public void uncaughtException(Thread t, Throwable e) {

                Intent i = new Intent(cnt, MainActivity.class);
                i.putExtra("ERROR", 1);

                AlarmManager alm = (AlarmManager) cnt
                        .getSystemService(Context.ALARM_SERVICE);
                alm.set(AlarmManager.RTC, System
                        .currentTimeMillis() + 1000,
                        PendingIntent.getActivity(
                                cnt,
                                0,
                                i, 0));
                Process.killProcess(Process.myPid());
            }
        };

       // Thread.setDefaultUncaughtExceptionHandler(mUEHandler);
    }

    protected void setupForm() throws Exception {

    }

    public void search(HashMap<filterTypes,Object> FilterParams)
    {

    }

    public void openRowDetails(int position,String quantity)
    {

    }

    public void back_click(View v) throws Exception {
        finish();
    }

    @Override
    protected void onStart() {
        super.onStart();
        Utils.onBegin("setupForm", this, _lastStatus, Utils.lifeStatus.START);
        _lastStatus = Utils.lifeStatus.START;
        Log.i(TAG, "onStart()");
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        Utils.onBegin("setupForm", this, _lastStatus, Utils.lifeStatus.RESTART);
        _lastStatus = Utils.lifeStatus.RESTART;
        Log.i(TAG, "onRestart()");
    }

    @Override
    protected void onResume() {
        super.onResume();
        Utils.onBegin("setupForm", this, _lastStatus, Utils.lifeStatus.RESUME);
        String settedLanguage = Utils.getLanguage();
        Utils.SetLaguage(settedLanguage == null ? Settings.LANGUAGE
                : settedLanguage, this.getBaseContext());
        _lastStatus = Utils.lifeStatus.RESUME;
        Log.i(TAG, "onResume()");

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        // Saving activity state
        Log.i(TAG, "onSaveInstanceState()");
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        Log.i(TAG, "onRestoreInstanceState()");
    }

    @Override
    protected void onPause() {
        super.onPause();
        // Another activity is taking focus (this activity is about to be
        // "paused").
        Utils.onEnd("prepareToCloseDB", this, _lastStatus,
                Utils.lifeStatus.PAUSE);
        Log.i(TAG, "onPause()");
        _lastStatus = Utils.lifeStatus.PAUSE;
    }

    @Override
    protected void onStop() {
        super.onStop();
        // The activity is no longer visible (it is now "stopped")
        setListAdapter(null);
        Utils.onEnd("prepareToCloseDB", this, _lastStatus,
                Utils.lifeStatus.STOP);
        Log.i(TAG, "onStop()");
        _lastStatus = Utils.lifeStatus.STOP;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        // The activity is about to be destroyed.
        setListAdapter(null);
        Utils.onEnd("prepareToCloseDB", this, _lastStatus,
                Utils.lifeStatus.DESTROY);
        Log.i(TAG, "onDestroy()");
        _lastStatus = Utils.lifeStatus.DESTROY;
    }

    @SuppressWarnings("unused") 
    protected void prepareToCloseDB() {
        TextView emptyTextView = ((TextView)findViewById(android.R.id.empty));
        if(emptyTextView!=null)
        {
            emptyTextView.setText(this.getResources().getString(R.string.parakalw_perimenete));
        }
        if (_cursor != null) {
            if (!_cursor.isClosed()) {
                _cursor.close();
            }
        }
    }
} 
```

以下是我从我的应用程序中收集的日志之一。

```
-----------------EXCEPTION START--------------------
26/01/2013 15:05:58
 -----------------STAACKTRACE--------------------
 Don't have database lock!
 Class:android.database.sqlite.SQLiteDatabase | File:SQLiteDatabase.java | Method:verifyLockOwner | Line:2090
 Class:android.database.sqlite.SQLiteDatabase | File:SQLiteDatabase.java | Method:endTransaction | Line:690
 Class:myapp.myapp.FindMeetingActivity | File:FindMeetingActivity.java | Method:deleteMeeting | Line:235
 Class:myapp.myapp.FindMeetingActivity | File:FindMeetingActivity.java | Method:onContextItemSelected | Line:142
 Class:android.app.Activity | File:Activity.java | Method:onMenuItemSelected | Line:2538
 Class:com.android.internal.policy.impl.PhoneWindow$DialogMenuCallback | File:PhoneWindow.java | Method:onMenuItemSelected | Line:3521
 Class:com.android.internal.view.menu.MenuBuilder | File:MenuBuilder.java | Method:dispatchMenuItemSelected | Line:735
 Class:com.android.internal.view.menu.MenuItemImpl | File:MenuItemImpl.java | Method:invoke | Line:149
 Class:com.android.internal.view.menu.MenuBuilder | File:MenuBuilder.java | Method:performItemAction | Line:874
 Class:com.android.internal.view.menu.MenuDialogHelper | File:MenuDialogHelper.java | Method:onClick | Line:167
 Class:com.android.internal.app.AlertController$AlertParams$3 | File:AlertController.java | Method:onItemClick | Line:924
 Class:android.widget.AdapterView | File:AdapterView.java | Method:performItemClick | Line:292
 Class:android.widget.AbsListView | File:AbsListView.java | Method:performItemClick | Line:1058
 Class:android.widget.AbsListView$PerformClick | File:AbsListView.java | Method:run | Line:2514
 Class:android.widget.AbsListView$1 | File:AbsListView.java | Method:run | Line:3168
 Class:android.os.Handler | File:Handler.java | Method:handleCallback | Line:605
 Class:android.os.Handler | File:Handler.java | Method:dispatchMessage | Line:92
 Class:android.os.Looper | File:Looper.java | Method:loop | Line:137
 Class:android.app.ActivityThread | File:ActivityThread.java | Method:main | Line:4444
 Class:java.lang.reflect.Method | File:Method.java | Method:invokeNative | Line:-2
 Class:java.lang.reflect.Method | File:Method.java | Method:invoke | Line:511
 Class:com.android.internal.os.ZygoteInit$MethodAndArgsCaller | File:ZygoteInit.java | Method:run | Line:787
 Class:com.android.internal.os.ZygoteInit | File:ZygoteInit.java | Method:main | Line:554
 Class:dalvik.system.NativeStart | File:NativeStart.java | Method:main | Line:-2
 ---------------EXCEPION END---------------------- 
```

你能帮我理解为什么会这样吗？它是由我的基本活动问题引起的，还是由 android v4.0 的更改引起的。？

感谢我们的帮助！

# c++ - 在 xaml 中创建了一个图像元素，如何在按下按钮时加载？

> ID：14622877
> 
> 赞同：1
> 
> 时间：2013-01-31T09:54:23.543
> 
> 标签：c++, xaml

您好我正在使用 Microsoft Visual Studio 2012 创建一个 Windows 8 应用程序，并且我在 xaml 中创建了一个按钮和一个图像元素。我想要的是按下按钮并加载图像。起初只是任何图像。这是我的xml

> `<Button Name="drawButton" Content="Draw" HorizontalAlignment="Left" Margin="427,204,0,0" VerticalAlignment="Top" Click="drawButton_Click"/>`
> 
> `<Image Name="card1" HorizontalAlignment="Left" Height="96" Margin="684,204,0,0" VerticalAlignment="Top" Width="71" Source=""/>`

和我的 c++ （我认为这是错误）：

> `card1->Source = "cards//c1.png";`

有任何想法吗？这不应该是火箭手术......

# c# - Listview 上的工具提示

> ID：14622881
> 
> 赞同：1
> 
> 时间：2013-01-31T09:54:26.163
> 
> 标签：c#, wpf, listview, tooltip

> **可能重复：**
> [如何为 ListviewItem 设置工具提示](https://stackoverflow.com/questions/2730931/how-to-set-tooltip-for-a-listviewitem)

我正在将 Windows 窗体应用程序转换为 WPF。我对 WPF 很陌生。

在我的应用程序中，我有一个列表视图。当用户将鼠标移动到列表视图中存在的项目时，我想显示突出显示项目的工具提示文本。

如何在 WPF 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T09:58:51.517

您可以通过绑定来做到这一点：

```
 <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="ToolTip" Value="{Binding Path=Content}"/>
            </Style>
        </ListView.ItemContainerStyle> 
```

# android - 没有 AuthenticatorActivity 的 Android 新账户类型

> ID：14622884
> 
> 赞同：4
> 
> 时间：2013-01-31T09:54:38.780
> 
> 标签：android, account, accountmanager

我正在编写一个应用程序，它应该使用自己的联系人帐户。我在互联网上找到了很多例子，但不是我想要的。样本中的 SampleSyncAdapter 对我帮助不大。

我想要的是一个类似的东西

```
 AccountManager _accountMgr = AccountManager.get(context);
    Account [] accounts = _accountMgr.getAccounts();
    final Account account = new Account(accounts[0].name, "com.myapplication");
    mAccountManager.addAccountExplicitly(account, null, null); 
```

我不想要的是一个带有身份验证的新帐户，我必须在其中输入用户名和密码。

问题是，我的应用程序读取联系人，并且在我使用 sqllite 数据库的那一刻，我将联系人 ID 和更多信息存储到此 ID 中，这是我的应用程序需要的，而我无法将其存储在普通联系人中。一般没有问题。但是如果有人需要一部新的智能手机会发生什么。您可以在新手机中导出和导入的联系人。但在导入过程中，contactid 可能会发生变化。然后我的应用程序无法将我存储在 SQLLite 数据库中的联系人 ID 链接到新智能手机中的正确联系人。我的想法是，为我的应用程序创建一个新帐户（例如“WhatsApp”正在这样做）并在那里存储我的附加联系信息。这个帐户我可以将其导出并导入到新的智能手机。

没错，还是？但为此，我不需要带有用户名和密码且没有身份验证的 AuthenticatorActivity。我只需要一个新帐户。:-)

我该如何解决？有人有我的例子吗？谢谢你的帮助

最好的问候汤姆

# linux - 使用任何密码登录

> ID：14622885
> 
> 赞同：0
> 
> 时间：2013-01-31T09:54:40.933
> 
> 标签：linux, passwords, pam

我遇到了一个奇怪的问题，即我的服务器中的一个用户能够使用前八个字符与用户实际密码相同的任何密码登录。例如，如果用户的实际密码是`abcdefgh`login with`abcdefgh`作为密码，以及`abcdefgh2002`or`abcdefghijkl`成功，但不是 with `2001abcdefgh`。我正在使用带有影子文件的 PAM。所关注的用户在 /etc/shadow 文件中有他的密码哈希，但据我所知，它没有任何盐。

我用自己的账户试了一下，但没有成功登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:40:34.303

该用户有一个古老的`crypt`哈希。它是加盐的，但它只使用密码的前八个字符。

您可以通过查看哈希来验证这一点，`/etc/shadow`如果它没有`$n$`以指示哈希方法的标记开头，那么它使用的是原始的 unix`crypt`哈希，它只使用前八个字符。有关`crypt(3)`更多信息，请参阅。

如果他更改密码，即使更改为相同的密码，它也会更新为使用系统上设置为默认值的任何哈希值，这通常是更现代和更安全的东西，例如`SHA512`.

顺便说一句，在那些旧式散列中，盐只是散列的前两个字符，这就是为什么你认为没有一个。较新的哈希看起来`$id$salt$encrypted`可能是您习惯的，但旧的只有 13 个字符，前两个是盐。

# php - foreach 循环无法正常工作

> ID：14622886
> 
> 赞同：1
> 
> 时间：2013-01-31T09:54:41.993
> 
> 标签：php

我真的不知道这个脚本有什么问题。我真的认为一切都是正确的，但不知何故我的 strpos 语法不能正常工作或其他什么。这`$_POST['category']`是一个允许多选的选择列表。所以这就是为什么我把它放在一个数组中，但也许它不正确？

```
$cat_array = $_POST['category'];

foreach($cat_array as $key => $value )
{
    if(strpos($value, 'n_') !== false)
    {

        // Do something about the new categories.

    } else {

        // work with existing categories

    }

} 
```

html - 我还有一个处理`add category`字段的 jquery。由`n_(number)-(value)`jquery 创建。

```
<div>
<label for="category">Category</label>
<select name="category" size="10" multiple="MULTIPLE">
  <option class="cat_1" value="1">Cars</option>
  <option class="cat_2" value="2">Lego</option>
  <option class="cat_3" value="3">Country</option>
  <option class="cat_4" value="4">School</option>
  <option class="cat_5" value="5">Cooking</option>
  <option class="cat_6" value="n_6-test">test</option>
  <option class="cat_7" value="n_7-Buuh">Buuh</option>
</select> <br>

<input type="text" name="new_cat" value="" size="40" maxlength="120" placeholder="Category Name"><input class="plus" name="" type="button" value="Add Category">
<p class="plus_comment"></p>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:05:19.887

你`$_POST['category']`的不是一个数组。看到您的**var_dump**结果后，它必须只是一个字符串。如果它是一个数组，则 var_dump 应该像这样显示，

```
array (size=1)
  1 => string '5' (length=1) 
```

因此，请检查您的 HTML 代码是否传递了一个数组。

编辑：更改`category`为`category[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:13:51.553

尝试您的选择列表名称

```
category[] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:08:10.947

要使您的类别实际上是一个数组，您必须将括号附加到类别，如下所示：`category[]`

所以你的 HTML 看起来像这样

```
<div>
  <label for="category">Category</label>
  <select name="category[]" size="10" multiple="MULTIPLE">
    <option class="cat_1" value="1">Cars</option>
    <option class="cat_2" value="2">Lego</option>
    <option class="cat_3" value="3">Country</option>
    <option class="cat_4" value="4">School</option>
    <option class="cat_5" value="5">Cooking</option>
    <option class="cat_6" value="n_6-test">test</option>
    <option class="cat_7" value="n_7-Buuh">Buuh</option>
  </select> <br>

  <input type="text" name="new_cat" value="" size="40" maxlength="120" placeholder="Category Name">
  <input class="plus" name="" type="button" value="Add Category">
  <p class="plus_comment"></p>
</div> 
```

# sharepoint-2010 - 使用 SharePointList 在 SharePoint 2010 集成模式下创建 SSRS 报表

> ID：14622887
> 
> 赞同：1
> 
> 时间：2013-01-31T09:54:42.663
> 
> 标签：sharepoint-2010, reporting-services, ssrs-2008, reporting

我是 SSRS 新手，现在需要在 SharePoint 2010 中创建报表。我已成功配置 SSRS 与 SharePoint 集成模式。我正在使用 SQL Server 2008 R2 附带的 VS2008 BIDS 实例。它具有三个文件夹“共享数据源”、“共享数据集”和“报告”。作为最初的举动，我创建了一个类型为“Microsoft SharePoint Lists”的数据源，并指定了我的 SharePoint Web 应用程序的 url。还通过选择列表和所需文件使用向导创建了示例报告，但现在我需要创建更复杂的报告。我需要为报告组合不同的列表数据。我怎样才能建立这样的查询？还需要在“共享数据集”文件夹中指定什么？

# java - 简单的正则表达式不起作用

> ID：14622889
> 
> 赞同：0
> 
> 时间：2013-01-31T09:54:44.210
> 
> 标签：java, regex

这是我写的正则表达式

```
String regex="(start_)(u[0-9]+)(p[0-9]+)."; 
```

我想匹配“start_u12p16”。这里 u 代表 user_id， p 代表 project_id。
这里的 User_id 是 12，project_id 是 16，每次都会改变......我想匹配传入的字符串，如果它是那种格式......那就是 start_u[any number]p[any number]

```
if(str.matches(regex)==true){retVal= true;} 
```

它是如此简单的正则表达式，直到昨天它还在工作，但不知道为什么它现在不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:00:21.183

您的正则表达式末尾有一个点，这意味着任何在 p 之后具有单个数字的字符串都不会正确匹配（例如 start_u12p5）。删除它，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:57:45.487

以下修改使表达式按预期工作：

```
String regex="start_u[0-9]+p[0-9]+";
String id = "start_u12p16";
Pattern pattern = Pattern.compile(regex);
Matcher matcher =  pattern.matcher(id);
System.out.println(matcher.matches()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:05:57.603

模式末尾的点（“任何字符”）从末尾开始计算一位数。正如@jgm 所说，不仅单个数字不再匹配，而且第三组可能被错误地捕获：

```
 String regex="(start_)(u[0-9]+)(p[0-9]+).";
  Pattern p = Pattern.compile(regex);
  Matcher m = p.matcher("start_u12p17");
  System.out.println(m.matches());
  System.out.println(m.group(3)); 
```

结果

```
 true
      p1 
```

# ruby-on-rails - redirect_to 无法正常工作

> ID：14622893
> 
> 赞同：0
> 
> 时间：2013-01-31T09:54:51.577
> 
> 标签：ruby-on-rails, redirect, devise

我使用`devise`并尝试做接下来的事情：

当用户登录/注册时，我想通过他的 role_id 重定向他（我让一些用户的 id 为 1，其他用户为 2）。

如果他的 role_id 为 1，则将他重定向到`tasksadmins_path`，否则重定向到`workers_path`。

所以我尝试了类似的东西：

`routes.rb`：

```
devise_for :users, :controllers => { :sessions => 'user_sessions'} do
   get '/users/sign_out' => 'devise/sessions#destroy'
   root to: "workers#index"
end

resources :tasksadmins

resources :workers

root to: "workers#index" 
```

这是我的`application_controller.rb`：

```
class ApplicationController < ActionController::Base
    include ApplicationHelper

    protect_from_forgery
    before_filter :authenticate_user!

    rescue_from CanCan::AccessDenied do |exception|
        if current_user.role_ids == [2]
           redirect_to root_url
        else
           redirect_to tasksadmins_path
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:50:28.160

针对这种情况，Devise 有特殊的方法。您可以覆盖 after_sign_in_path_for。在应用程序控制器中

```
def after_sign_in_path_for(resource_or_scope)
 if resource_or_scope.is_a?(User)
  town_path
 else
  users_path
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:44:56.853

`after_sign_in_path_for`不起作用，所以我添加到“创建”下一行：

**一开始，我写道：**

```
resource = warden.authenticate!(:scope => resource_name) 
```

**然后我在“创建”函数的末尾写道：**

```
sign_in(resource_name, resource)

if current_user.role_ids == [2]
   respond_with resource, :location => workers_path
else
   respond_with resource, :location => tasksadmins_path
end 
```

**所以我的创作看起来是这样的：**

```
class UserSessionsController < Devise::SessionsController
    include ApplicationHelper

    def create

        resource = warden.authenticate!(:scope => resource_name)

        require "uri"
        require "net/http"

        ## get the user id from the database
        user_id = session['warden.user.user.key'][1][0];

        ## get the row by id
        user = User.find(user_id)

        # ============================
        # Ensure that a user exists
        # ============================

        code, body = http_request(Net::HTTP::Put.new("/api/v1/users/external/#{user_id}"), email: user.email);
        if code != 200
           Rails.logger.error("Unable to register user #{current_user.email} at Licensario");
        end

        sign_in(resource_name, resource)

        if current_user.role_ids == [2]
           respond_with resource, :location => workers_path
       else
           respond_with resource, :location => tasksadmins_path
       end

    end
end 
```

# asp.net - log4net 在 IIS7 上部署时不会创建日志文件

> ID：14622897
> 
> 赞同：9
> 
> 时间：2013-01-31T09:55:04.487
> 
> 标签：asp.net, iis-7, log4net

大家早上好，

当我在本地机器上开发时，我遇到了一个不存在的 log4net 问题，但是一旦我将应用程序部署到服务器，log4net 就停止了工作。

这是服务器配置：-Windows XP SP3 -IIS 7 -framework .Net v4

这是网站的web.config中的log4net配置：

```
<configuration>
      <log4net>
        <root>
          <level value="DEBUG" />
          <appender-ref ref="LogFileAppender" />
        </root>
        <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
          <param name="File" value="log.txt" />
          <param name="AppendToFile" value="true" />
          <rollingStyle value="Size" />
          <maxSizeRollBackups value="10" />
          <maximumFileSize value="30MB" />
          <staticLogFileName value="false" />
          <layout type="log4net.Layout.PatternLayout">
            <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
          </layout>
        </appender>
      </log4net>
    </configuration> 
```

我还有一个类库，这是它的 App.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>
  </configSections>
  <log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
      <param name="File" value="log.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="30MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
  </log4net>
</configuration> 
```

这就是我在每个类上调用 log 函数的方式：

```
private static readonly ILog log = LogManager.GetLogger(typeof(AppDomain)); 
```

...这就是我所说的：

```
log.Error("\n\t=>" + ex.GetBaseException().Message + "\n\r" + " @ " + Environment.StackTrace); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T10:24:17.207

可能是您没有写入文件“log.txt”的权限。

我不知道当前目录是什么，但它不太可能是 IIS 可以写入的地方。

您需要在某处创建一个文件夹并授予 IIS 对其进行写入的访问权限，我知道您需要授予对 IIS_IUSRS 组的访问权限，然后指定该文件的绝对路径。例如

```
<param name="File" value="D:\Logs\log.txt" /> 
```

..使用您首选位置的路径。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T13:08:01.387

在编写日志文件时，我倾向于不尝试将日志文件写入程序文件目录中的任何位置或任何虚拟目录中的任何内容，这仅仅是因为我之前遇到过安全问题。目前，我对所有 log4net 日志文件都使用如下内容：

```
<file type="log4net.Util.PatternString" value="${ALLUSERSPROFILE}/<Product Name>/Logs/<Program Name>/<Program Name>.log" /> 
```

`${ALLUSERSPROFILE}`是上面的关键。该目录通常没有虚拟目录和程序文件目录的安全限制。我发现自从我使用这条路径以来我没有遇到任何问题。

此环境变量将您带到`ProgramData`Windows Vista、7、8、Server 2008 等中的目录。我认为 XP 将您带到不同的地方，但仍然是一个权限较宽松的目录。

在旁注您上面的日志语句：

```
log.Error("\n\t=>" + ex.GetBaseException().Message + "\n\r" + " @ " + Environment.StackTrace); 
```

可以缩短为：`log.Error(ex);`除非格式化是必须的。但是，如果您这样编写并使用 pdbs 部署二进制文件，那么您记录的异常将包含完整的堆栈跟踪和发生错误的行号。

## 编辑：

如果您的 log4net 配置无效，日志文件也将无法创建。如果您确定您对 log4net 配置中指定的文件夹具有写入权限，我建议`debug="true"`您通过首先在 log4net 配置部分中设置来启用 log4net 调试：

```
<log4net debug="true">
    ...
</log4net> 
```

设置上述调试标志将告诉 log4net 通过 Windows 跟踪侦听器输出它的所有日志记录。要捕获此跟踪侦听器输出，您必须在 app.config 中添加如下部分：

```
<system.diagnostics>
  <trace autoflush="true">
    <listeners>
      <add 
        name="textWriterTraceListener" 
        type="System.Diagnostics.TextWriterTraceListener" 
        initializeData="C:\tmp\log4net.txt" />
    </listeners>
  </trace>
</system.diagnostics> 
```

确保 app.config 中上述跟踪侦听器配置中指定的路径存在并且您对该文件夹具有写入权限！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T11:18:28.930

我自己也遇到了同样的问题，结果我忘记为配置文件设置“构建操作”。因此没有部署*log4net.config*文件，这当然是让应用程序写入日志文件所必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T12:05:35.790

日志文件夹目录应具有运行 IIS 的权限。例如，如果 IIS 作为网络服务运行，则将网络服务帐户添加到目录并授予其完全权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T06:28:30.817

请参考 web.config 中的以下配置进行检查。如果一切正常，请使用应用程序池所有者检查 inetpub 子文件夹的写入权限。如果不授予完全权限。

希望它能解决你的问题

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,     log4net" />
  </configSections>

  <log4net debug="true">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="logs\log.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n %newline--%newline" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
  </log4net>
```

# android - 在整个屏幕上叠加图形？

> ID：14622908
> 
> 赞同：0
> 
> 时间：2013-01-31T09:55:31.577
> 
> 标签：android, graphics, overlay

我目前有一个看起来像这样的应用程序，它是一个终端模拟器：![在此处输入图像描述](../Images/e83fb67970e45893680534a250ea3fe0.png)

如果我按下设置，这会出现在屏幕上：

![在此处输入图像描述](../Images/e94f633ad201b8ca90a8b865139e6636.png)

但是我想在顶部覆盖一些自定义图形，以便它们始终存在，一些曲线等。粗略的草图：

![在此处输入图像描述](../Images/30cad42aaf3d9abe6a744bcb4673e950.png)

因此，即使设置不可见，此叠加层也会显示在终端、顶部、边缘等处。当我按下设置时，我希望它们下来并匹配顶部图形的高度，就像我一样已绘制，覆盖的底部与设置的底部匹配。是否有可能只覆盖所有内容？或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:51:03.193

假设您已经使用标准 Android 布局和视图创建了布局，那么我的直觉是尝试实现覆盖是不可能的（使用标准视图/布局是易用性和灵活性之间的权衡）。

我自己的直觉告诉我看看使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)来创建你所有的 UI。这确实意味着大量的返工，但你获得了我认为实现目标所需的灵活性。

# mysql - 与 group by 的总和计数

> ID：14622911
> 
> 赞同：1
> 
> 时间：2013-01-31T09:55:37.267
> 
> 标签：mysql, sql, group-by

> **可能重复：**
> [在 MySQL 中计算运行总计](https://stackoverflow.com/questions/664700/calculate-a-running-total-in-mysql)

我需要得到为每个日期分组的计数总和。现在我正在运行以下查询并得到如下输出：

```
SELECT  `timestamp` , COUNT( * ) 
FROM  `A` 
WHERE  `timestamp` >=  '2013-01-04 07:12:12'
GROUP BY DATE_FORMAT( `timestamp` ,  '%Y-%m-%d' ) 
```

我得到

**输出：**

```
timestamp                                               count(*)
-------------------------------------------------- -----------
2013-01-04 07:58:21                                4
2013-01-05 09:28:56                                38
2013-01-06 00:03:04                                10 
```

现在我需要的是，我需要得到按日期分组的计数总和。那是第二个日期应该是 42，第三个日期应该是 52。如何在查询中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:11:19.730

尝试 ：

```
SELECT 
   timestamp t , 
   (select count(*) from A where  timestamp <= t)
FROM  A
GROUP  BY timestamp
ORDER  BY timestamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:04:33.943

你可以试试下面的SQL

```
SELECT DATE_FORMAT( ts_date ,  '%Y-%m-%d' ) as ts_dt_out, SUM(cnt) 
FROM
(
SELECT  `timestamp` ts_date , COUNT( * )  as cnt
FROM  `A` 
WHERE  `timestamp` >=  '2013-01-04 07:12:12'
GROUP BY DATE_FORMAT( `timestamp` ,  '%Y-%m-%d' ) 
)
as inner
WHERE ts_date >=  '2013-01-04 07:12:12'
GROUP BY ts_dt_out 
```

注意：未经测试，如果它不起作用，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:08:59.667

试试看：

```
SELECT  `timestamp` , @sum:= ifnull(@sum, 0 ) + COUNT( * ) 
FROM  `A` 
WHERE  `timestamp` >=  '2013-01-04 07:12:12'
GROUP BY DATE_FORMAT( `timestamp` ,  '%Y-%m-%d' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:31:33.683

这是一个简单的方法

```
SELECT  
    `timestamp` , 
    COUNT( * ) 
FROM  `A` 
WHERE  `timestamp` >=  '2013-01-04 07:12:12'
GROUP BY DATE(`timestamp`) 
```

# html - 如何使用 HTML5shiv 与 ajax 调用数据结果

> ID：14622915
> 
> 赞同：3
> 
> 时间：2013-01-31T09:55:41.260
> 
> 标签：html, internet-explorer, html5shiv

我正在像这样进行ajax调用：

```
$.ajax({
          type: "POST",
      url: action,
      cache:false,
      success: function(data){

                  alert($(data).find("*").html());

    }

}); 
```

所有浏览器（IE 8 和 7 除外）都会正确显示我在 SUCCESS 中放入的警报。在 IE 中，我收到一条“未定义”消息。

data 包含一些 HTML5 标签，我知道这就是它不起作用的原因。

我已经将 HTML5shiv 放在我的标题中，但它适用于普通页面，不适用于 ajax 调用。

如何在我的“数据”结果中调用 HTML5shiv？

我也已经尝试过使用 innerShiv，但作者说不再推荐它，因为 html5shiv 现在修补了 innerHTML 问题（[http://jdbartlett.com/innershiv/](http://jdbartlett.com/innershiv/)）

非常感谢，这个问题我要疯了...

# c# - 如何在 Visual Studio 2010 中暂时关闭自动格式化

> ID：14622916
> 
> 赞同：1
> 
> 时间：2013-01-31T09:55:47.343
> 
> 标签：c#, visual-studio-2010, editor, autoformatting

有时如果我可以暂时关闭 Visual Studio 的自动格式化功能，做一些编辑工作，然后再打开它会很方便。

我不想走很长的路进入选项菜单来做到这一点。

你知道一个快捷方式，插件或任何可以做到这一点的东西吗？

或者我可以用“#pragma dontformat”之类的东西包围我的一段代码，告诉编辑器不要格式化这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:44:57.727

不幸的是，没有为此目的的[预定义快捷方式](http://msdn.microsoft.com/en-us/library/da5kh0wa.aspx)，因此您必须手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T22:06:55.583

粘贴的答案是 CTRL[Z]。

当您粘贴一段代码时，它会被粘贴然后自动格式化。第一次按 CTRL[Z] 将撤消自动格式化，但保留原始粘贴的文本。第二次按 CTRL[Z] 将按照您的预期撤消粘贴的文本。

我正在使用 Visual Studio 2013 - 在早期版本中没有尝试过。

# inheritance - 具有指针转换和虚拟继承的多重继承

> ID：14622917
> 
> 赞同：1
> 
> 时间：2013-01-31T09:55:48.717
> 
> 标签：inheritance

请解释为什么以下代码的 O/P 存在差异... 1> 当类 A 和 B 使用虚拟继承时，则调用 B::f 2> 当 A 和 B 没有虚拟继承时然后调用 L::f

如果您对虚拟和非虚拟函数使用虚拟继承/非虚拟继承和指针转换的不同组合，那么很少有 o/p OR 错误肯定会让您感到惊讶。

这就是为什么我正在寻找一些 C++ 编译器始终遵循的通用规则。换句话说，如何在不编译代码或运行代码的情况下预测 o/p OR 错误。

```
#include <iostream>
using namespace std;

class L{
    public :
    virtual void f(){
    cout<<"L::f()"<<endl;
    }
};

class A: public virtual L{
    public : 
    /*
    virtual void f(){
    cout<<"A::f()"<<endl;
    }
    */
};

class B : public virtual L{
    public :
    virtual void f(){
        cout<<"B::f()"<<endl;
    }
};

class C : public B, public A {
    public :
    /*
    virtual void f(){
        cout<<"C::f()"<<endl;
    }
    */
};

int main(){

    A* ptr = new C();
    ptr->f();
    return 0;
} 
```

# jsf-2 - 无法通过单击节点文本来切换 PrimeFaces 树复选框？

> ID：14622918
> 
> 赞同：0
> 
> 时间：2013-01-31T09:55:49.857
> 
> 标签：jsf-2, primefaces

我对 PrimeFaces JSF UI 库`tree`组件有疑问：

```
<p:tree selectionMode="checkbox" ... > 
```

问题是：复选框只能通过直接单击复选框来切换。我想通过单击**节点文本**来切换复选框。

我查看了[PrimeFaces Labs](http://www.primefaces.org/showcase-labs/ui/treeSelectionCheckbox.jsf)，但我发现它工作正常！

我错过了什么，为什么我无法通过单击节点文本来切换树复选框？

使用版本 3.4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:09:26.667

在展示实验室（您提供的链接）上，这可以正常工作，因为那是 3.5-SNAPSHOT 版本，但是如果您查看[展示](http://www.primefaces.org/showcase/ui/treeSelectionCheckbox.jsf)，这就像在您的代码中一样。因此，他们在当前的 SHAPSHOT 版本中实现了这一点，它将在下一个版本中提供，或者您可以下载 3.5-SNAPSHOT 版本并使用它，但要准备好一些潜在的错误尚未修复。

您在页面底部有一个展示版本。

# c# - WPF ComboBox Popup 模板与边框更改背景颜色每个系统颜色更改

> ID：14622920
> 
> 赞同：0
> 
> 时间：2013-01-31T09:55:52.633
> 
> 标签：c#, wpf, combobox, popup, ivalueconverter

我在这里有我的定制`ComboBox`：

![在此处输入图像描述](../Images/bb32393d4dfe30ceeaf6395e3462fb0b.png)

它实际上是一个浏览器选择。但是现在您看到的是选择器控件的原型，使用`ComboBox`.

我遇到的问题是这个下拉（`Popup`）控制背景

![在此处输入图像描述](../Images/7c2fa87eb1e721fa4d67ef7c95a2f4a2.png)

`Color and Apperance`一旦用户在设置中更改其主题颜色，背景颜色应动态更改`Personalization`。

这是我的模板背后的故事

我可以`Background`使用简单的方法更改颜色`Converter`：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    int argbColor = (int)Microsoft.Win32.Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM", "ColorizationColor", null);
    var color = System.Drawing.Color.FromArgb(argbColor);

    SolidColorBrush scb = new SolidColorBrush();

    if (Environment.OSVersion.Version.Major == 6 && Environment.OSVersion.Version.Minor == 1) // Windows 7
    {
        //scb = new SolidColorBrush(Color.FromArgb((byte)((int)color.A / 3), color.R, color.G, color.B));
        scb = new SolidColorBrush(Color.FromArgb(color.A, color.R, color.G, color.B));
    }
    else if (Environment.OSVersion.Version.Major == 6 && Environment.OSVersion.Version.Minor == 2) // Windows 8 
    {
        scb = new SolidColorBrush(Color.FromArgb(color.A, color.R, color.G, color.B));
    }

    return scb;
} 
```

像这样设置它：

```
<me:BackgroundConverter x:Key="BgConverter" /> 
```

并像这样实现它：

```
<ControlTemplate TargetType="{x:Type ComboBox}">
    <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
        </Grid.ColumnDefinitions>
        <Popup x:Name="PART_Popup" Grid.Column="0" AllowsTransparency="true" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
            <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent">
                <Border x:Name="DropDownBorder" 
                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" 
                    BorderThickness="{Binding Converter={StaticResource BorderConverter}}" 
                    Background="{Binding Converter={StaticResource BgConverter}}" 
                    CornerRadius="0,0,12,12">

                    <ItemsPresenter x:Name="bn" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" HorizontalAlignment="Center" />
                </Border>
            </Themes:SystemDropShadowChrome>
        </Popup>
        <ToggleButton Grid.ColumnSpan="2" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
        <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="HasItems" Value="false">
            <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
        </Trigger>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
            <Setter Property="Background" Value="#FFF4F4F4"/>
        </Trigger>
        <Trigger Property="IsGrouping" Value="true">
            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

检查`Border x:Name="DropDownBorder"`线路。现在，当用户更改主题颜色时，如何使其动态更改？我通过触发器尝试过：

```
<Trigger Property="IsDropDownOpen" Value="true">
    <!-- not really working -->
    <Setter Property="Background" TargetName="DropDownBorder" Value="{Binding Converter={StaticResource BgConverter}}"/>
</Trigger> 
```

但它不工作

我实际上有一个非常简单的蹩脚解决方案，方法是挂钩`DropDownOpened`或`DropDownClosed`事件，然后从那里更改背景颜色。该解决方案实际上运行良好，但可能有一种最简单的方法可以通过 Trigger 或 EventTrigger 来实现？

- 更新 -

```
public static class ComboBoxExtension
{
    public static void UpdatePopupBackground(this ComboBox cb)
    {
        Border b = (Border)cb.Template.FindName("DropDownBorder", cb);

        int argbColor = (int)Microsoft.Win32.Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM", "ColorizationColor", null);
        var color = System.Drawing.Color.FromArgb(argbColor);

        SolidColorBrush scb = new SolidColorBrush();

        if (Environment.OSVersion.Version.Major == 6 && Environment.OSVersion.Version.Minor == 1) // Windows 7
        {
            //scb = new SolidColorBrush(Color.FromArgb((byte)((int)color.A / 3), color.R, color.G, color.B));
            scb = new SolidColorBrush(Color.FromArgb(color.A, color.R, color.G, color.B));
        }
        else if (Environment.OSVersion.Version.Major == 6 && Environment.OSVersion.Version.Minor == 2) // Windows 8 
        {
            scb = new SolidColorBrush(Color.FromArgb(color.A, color.R, color.G, color.B));
        }

        b.Background = scb;
    }
} 
```

并在 DropDownOpened 触发时调用它：

```
ComboMe.UpdatePopupBackground(); 
```

大声笑……嗯……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:04:37.337

在我看来，获得此特定颜色更改通知的第一步，您需要在 MainWindow 中挂钩 WindowProc（或隐藏的颜色更改检测窗口？）并注意来自 DWM 的 WM_DWMCOLORIZATIONCOLORCHANGED 消息。

# sql - 在具有非连续范围的 SQL 表中查找下一个未使用的 ID

> ID：14622921
> 
> 赞同：0
> 
> 时间：2013-01-31T09:55:53.880
> 
> 标签：sql, oracle, range, nextval

我有两个如下表：

```
TABLE1:
=======
somid, tobeupdated
1    ,  null
2    ,  null
3    ,  null
10   ,  null

TABLE2:
=======
rangeofids
2
3
9
10
11
12
13 
```

我必须根据以下标准更新 TABLE1.tobeupdated （或发现它的'应该是值）：

1.  如果`TABLE1.somid NOT exists in TABLE2.rangeofids`，那么预期结果是：tobeupdated =`TABLE1.somid`
2.  否则找到下一个`TABLE2.rangeofids`更大的可用（或未使用）`TABLE1.somid`

所以预期值为：bu

```
TABLE1:
=======
somid, tobeupdated
1    ,  1
2    ,  4
3    ,  4
10   ,  14 
```

我很努力，但我想出的最简单的解决方案是创建一个具有完整 id 序列（从`1`to `max(rangeofids)+1`）的临时表，`MINUS TABLE2.rangeofids`这样我就可以找到`MIN(TMPTABLE.id) where TMPTABLE.ID > TABLE1.somid`.

但是没有更好的解决方案（没有临时表）吗？

*注意*：我不能创建过程/函数等，所以它必须是标准（Oracle 10）SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:27:23.147

这是我的尝试。

首先，我们应该决定只使用 table2 在找到那里的值后应该返回什么值。

```
select rangeofids, 
  candidate, 
  nvl(candidate,lead(candidate ignore nulls) over (order by rangeofids)) as full_candidate
from (
    select rangeofids, case when dist=1 then null else rangeofids+1 end as candidate
    from (
        select rangeofids,
               lead(rangeofids) over (order by rangeofids) - rangeofids as dist
        from table2
        )
      ); 
```

在此之后`merge into table1 with`，以下选择将解决问题：

```
select someid, nvl(full_candidate, someid) 
from table1 a
left join (    
    --the above query
) b
on a.someid = b.rangeofids; 
```

[请参阅 SQLFIDDLE。](http://www.sqlfiddle.com/#!4/04540/15)

# position - 在绝对定位的父级中并排排列子级？

> ID：14622931
> 
> 赞同：0
> 
> 时间：2013-01-31T09:56:18.683
> 
> 标签：position, css-float, css-position, css

我的下拉菜单需要使用`position: absolute;`for 下拉菜单。在下拉菜单中，我希望在多列中有菜单项，如下所示（[示例](http://www.itwire.com/)）：

![超级菜单](../Images/543d15bb804681a9d3e1f4685a70a549.png)

为此，我可以使用`float`or `display: inline-block;`，但实际上，由于绝对定位的父级简单地折叠，并且子级在彼此下方排列，而不是彼此相邻，因此没有任何工作。

我怎样才能实现我所需要的，而不必在父级或其子级上设置特定的`width`或？`height`没有办法了吗？

我确实尝试了很多类似问题的解决方案，那些有效的解决方案需要我设置特定的宽度或高度，或者让父级扩展到页面的整个宽度。

# php - php popen traceroute 并不总是返回

> ID：14622936
> 
> 赞同：1
> 
> 时间：2013-01-31T09:56:28.707
> 
> 标签：php, windows, popen, traceroute

我必须在 Windows 上使用 PHP 尽快进行大量跟踪路由。这是我的代码：

```
function tracert($addresses){
    set_time_limit(300);
    $nbAddresses=count($addresses);
    for($i=0; $i<$nbAddresses; $i++){
        $tracerts[$i]=popen('tracert '.$addresses[$i], 'r');
    }
    for($i=0; $i<$nbAddresses; $i++){
        $results[$i]="<strong>".($i+1).")</strong>";
        while(!feof($tracerts[$i])){
            $results[$i].=fgets($tracerts[$i])."<br/>";
        }
        fclose($tracerts[$i]);
    }
    return $results;
} 
```

我循环了两次：在第一个循环中，我使用 popen() 启动 traceroutes，在第二个循环中，我使用 fgets() 将结果返回到表中。

但有时，它不起作用：traceroute 返回为空。所以基本上我的程序只显示跟踪路由的编号并转到下一个。它大约每四到五个跟踪路由发生一次。

我怎样才能让它每次都工作？

# sql-server - 使用 SQL Server 2000 插入 @TABLE EXEC @query

> ID：14622940
> 
> 赞同：46
> 
> 时间：2013-01-31T09:56:54.050
> 
> 标签：sql-server, tsql, sql-server-2000

SQL Server 2000 是真的，你不能使用 exec 插入表变量吗？

我试过这个脚本并收到一条错误消息`EXECUTE cannot be used as a source when inserting into a table variable.`

```
declare @tmp TABLE (code varchar(50), mount money)
DECLARE @q nvarchar(4000)
SET @q = 'SELECT coa_code, amount FROM T_Ledger_detail'

INSERT INTO  @tmp (code, mount)
EXEC sp_executesql (@q)

SELECT * from @tmp 
```

如果这是真的，我该怎么办？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-31T10:13:39.537

**注意**- 这个问题和答案与 SQL Server 的 2000 版本有关。在以后的版本中，限制`INSERT INTO @table_variable ... EXEC ...`被取消了，因此它不适用于那些以后的版本。

* * *

您必须切换到临时表：

```
CREATE TABLE #tmp (code varchar(50), mount money)
DECLARE @q nvarchar(4000)
SET @q = 'SELECT coa_code, amount FROM T_Ledger_detail'

INSERT INTO  #tmp (code, mount)
EXEC sp_executesql (@q)

SELECT * from #tmp 
```

* * *

从[文档](http://msdn.microsoft.com/en-us/library/aa260638(v=sql.80).aspx)中：

> 表变量的行为类似于局部变量。它有一个明确定义的范围，即声明它的函数、存储过程或批处理。
> 
> 在其范围内，表变量可以像常规表一样使用。它可以应用于在 SELECT、INSERT、UPDATE 和 DELETE 语句中使用表或表表达式的任何地方。但是，table 不能用于以下语句：
> 
> `INSERT INTO table_variable EXEC stored_procedure`
> 
> `SELECT select_list INTO table_variable statements.`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-30T16:29:14.070

该文档具有误导性。
我在生产中运行以下代码

```
DECLARE @table TABLE (UserID varchar(100))
DECLARE @sql varchar(1000)
SET @sql = 'spSelUserIDList'
/* Will also work
   SET @sql = 'SELECT UserID FROM UserTable'
*/

INSERT INTO @table
EXEC(@sql)

SELECT * FROM @table 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T10:06:54.350

```
DECLARE @q nvarchar(4000)
SET @q = 'DECLARE @tmp TABLE (code VARCHAR(50), mount MONEY)
INSERT INTO @tmp
  (
    code,
    mount
  )
SELECT coa_code,
       amount
FROM   T_Ledger_detail

SELECT *
FROM   @tmp'

EXEC sp_executesql @q 
```

如果你想在动态查询

# c# - 从项目列表发送数据c#

> ID：14622942
> 
> 赞同：0
> 
> 时间：2013-01-31T09:57:01.540
> 
> 标签：c#, list, sockets, client-server

我有一个列表，其中包含我试图发送到我的服务器的大量消息。这是我的代码：

```
 private void sendBtn_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < listORequestedCommands.Items.Count; i++)
        {
            clientSock.Send(Encoding.Default.GetBytes(listORequestedCommands.Items[i].ToString()));
        }
        removeAll_Click(sender, e);
        sendBtn.Enabled = false;
    } 
```

但是，当我单击发送按钮时，我看到服务器收到一条消息，其中包含所有连接的列表项，而不是接收分开的消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:59:51.047

实现一个协议。TCP 套接字是基于流的，而不是基于消息的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:08:45.947

您应该等待确认，因为您不等待字节被收集并显示为合并结果。将数据发送到套接字后，您应该使用类似的代码

```
int bytesRec = clientSock.Receive(bytes); 
```

按照这个 URL [http://msdn.microsoft.com/en-us/library/bew39x2a.aspx](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)

# silverlight - 在 PagedCollectionView 中隐藏和重新排序列

> ID：14622947
> 
> 赞同：0
> 
> 时间：2013-01-31T09:57:16.677
> 
> 标签：silverlight, mvvm, datagrid, silverlight-5.0, pagedcollectionview

我有一个**silverlight 5.0**应用程序，其中我有`PagedCollectionView`一个**雇员**。`ObservableCollection`

 **我已经绑定`PagedCollectionView`到`DataGrid`.

我不想在`datagrid`

我想通过我自己安排我的专栏`PagedCollectionView`

但我不知道该怎么做

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:32:01.617

您应该在模板字段中添加任何控件并与分页器属性绑定：

```
<sdk:DataGrid Grid.Row="2" Style="{StaticResource RegularDataGridStyle}" Margin="8"
                      ItemsSource="{Binding ElementName=DemoSeachMast,Path=DataContext.DemmoPager}"
                      IsReadOnly="True"
                      CanUserReorderColumns="False" 
                      SelectedItem="{Binding ElementName=DemoSeachMast,Path=DataContext.SelectedDemoSearch,Mode=TwoWay}" Grid.ColumnSpan="2">
            <sdk:DataGrid.Effect>
                <DropShadowEffect/>
            </sdk:DataGrid.Effect>

            <sdk:DataGrid.Columns>

                <sdk:DataGridTemplateColumn Header="Details">
                    <sdk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>

                            <Button x:Name="btnImage" Click="Button_Click" Width="25">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border CornerRadius="5" Background="Transparent">

                                            <Image Source="/Assets/Icons/Window.png" Height="25" Width="25"/>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                        </DataTemplate>
                    </sdk:DataGridTemplateColumn.CellTemplate>
                </sdk:DataGridTemplateColumn>

            </sdk:DataGrid.Columns>
        </sdk:DataGrid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:53:24.413

有两种方法可以做到这一点，在这两种情况下，您都需要将**AutoGenerateColumn 设置为 false**。

1.  如果您在设计时已经知道要在网格中显示的列，请直接在 XAML 中添加这些列。
2.  如果您在设计时不知道该列，并且如果它来自具有描述顺序和可见性的某些属性的数据库，则添加 autogeneratingcolumn 事件，在该事件中，您可以使列可见或不创建列，甚至更改顺序.

****编辑****

> grid.ItemsSource = Product.GetProducts(200);
> grid.AutoGeneratingColumn += grid_AutoGeneratingColumn;

> void grid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e) { string headername = e.Column.Header.ToString();

```
 switch (headername)
        {
            case "Line":
            case "Color":
                e.Cancel = true; //Cancel the columns don't want to generate
                break;
            case "Name":
                e.Column.Header = "Name Modified";
                e.Column.DisplayIndex = 1;
                break;
            case "Price":
                e.Column.Header = "Price header";
                e.Column.DisplayIndex = 0;
                break;
            default:
                e.Cancel = true;
                break;
        }
    } 
```

从示例中可以看出，Price 位于 Name 之后，但不仅更改了标题，还更改了显示顺序。如果您要运行，价格作为第一列，名称作为第二列，所有其他列都从显示中删除。
[http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn(v=vs.95).aspx)

希望这可以帮助。**

# java - Hibernate 中的 transaction.commit() 是什么？

> ID：14622962
> 
> 赞同：10
> 
> 时间：2013-01-31T09:58:06.563
> 
> 标签：java, mysql, database, hibernate

**transaction.commit()**做什么？

```
Account account = new Account();
account.setId(100);
account = (Account) session.get(Account.class, account.getId());
System.out.println("Before Transaction: Balance = " + account.getBalance());
double preBal = account.getBalance();
account.setBalance(50000000);
Transaction transaction = session.beginTransaction();
session.update(account);
account = (Account) session.get(Account.class, account.getId());
System.out.println("After Transaction: Balance = " + account.getBalance());
// transaction.commit();    
account = (Account) session.get(Account.class, account.getId());
System.out.println("Pev-Bal=" + preBal + " Curr-Bal=" + account.getBalance()); 
```

这给了我结果：

```
Hibernate: select account0_.id as id0_1_, account0_.balance as ..........
Before Transaction: Balance = 300.0
After Transaction: Balance = 5.0E7
Pev-Bal=300.0 Curr-Bal=5.0E7 
```

但是由于我没有调用**transaction.commit()**，所以数据库没有变化。

这是否意味着一切都只在某些实例/对象上完成而没有真正改变数据库？

我是Hibernate的新手，所以请帮助我理解。我正在使用休眠 4。

**更新：**

如果我调用**transaction.commit()**那么结果有这一行

```
Hibernate: update account set balance=? where id=? 
```

并且数据库也更新了。

这是否意味着不调用**transaction.commit()**一切都只在实例级别完成而没有真正改变数据库？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T13:06:53.787

**Commit**将使数据库提交。对持久对象的更改将写入数据库。 **刷新**是将底层持久存储与内存中保存的持久状态*同步的过程。*IE。它会在正在运行的事务中更新或插入到您的表中，但它*可能*不会提交这些更改（这取决于您的刷新模式）。

当你有一个持久化的对象并且你改变了它的一个值时，它会变脏，hibernate 需要将这些更改刷新到你的持久层。它可能会自动为您执行此操作，或者您可能需要手动执行此操作，这取决于您的冲洗模式（自动或手动）:)

简而言之：**transaction.commit()**确实刷新了会话，但它也结束了工作单元。

有一个类似的参考你的问题[here](https://stackoverflow.com/questions/3931162/will-hibernate-flush-my-updated-persistent-object-when-calling-session-closeu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:12:40.630

> 无论你做什么，写操作都不能在事务之外进行，如果没有正在进行的事务，Hibernate 会报错并抛出异常。所以这里别无选择。
> 
> 我正在添加@pasacal 的上述引用：在您提交事务之前，这不会影响数据库。

更多参考 [提交休眠事务有多昂贵？](https://stackoverflow.com/questions/3601412/how-expensive-is-committing-a-hibernate-transaction)

# javascript - Javascript / CSS window.scrollTo（0,0）不起作用

> ID：14622963
> 
> 赞同：9
> 
> 时间：2013-01-31T09:58:06.490
> 
> 标签：javascript, css

我正在构建一个 Web 应用程序，当执行某个操作时，该 Web 应用程序的一部分需要滚动到顶部。这是使用`window.scrollTo(0,0)`which 完美处理的，直到我在下面添加一些 CSS 样式（我需要这个项目）。

有人知道为什么下面的 CSS 会停止`window.scrollTo(0,0)`工作吗？

```
* {
    -webkit-transform: translate3d(0,0,0);
    -moz-transform: translate3d(0,0,0);
    -ms-transform: translate3d(0,0,0);
    -o-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
} 
```

PS 我不能在我的情况下使用 jQuery，以防万一有人建议我这样做。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-12T18:42:33.020

我有同样的问题，这解决了它：

`document.getElementById('ELEMENT_ID').scrollIntoView();`

`ELEMENT_ID`您要滚动到视图中的对象的 id 在哪里，在您的情况下，它通常是标题。

请注意，这仅适用于 Firefox 浏览器，因为其他浏览器尚未实现平滑滚动选项（请参阅更多：[http](http://caniuse.com/#feat=scrollintoview) ://caniuse.com/#feat=scrollintoview ）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-31T10:20:37.073

尝试替代方案：

```
document.body.scrollTop = 0; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-07T16:21:10.837

我的情况是删除这个块解决了这个问题

```
html, body {
  overflow-x: hidden;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-31T12:42:04.197

原来在正文的主要元素上没有设置高度，这意味着滚动到不起作用但是过渡 CSS 在 webkit 中自动给元素高度.... 修复了 CSS 给它一个设置高度并且它可以工作再次！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T05:16:00.727

改变

```
html, body {
  overflow-x: hidden;
} 
```

至

```
body {
  overflow-x: hidden;
} 
```

为我工作

# r - 循环统计检验

> ID：14622964
> 
> 赞同：0
> 
> 时间：2013-01-31T09:58:11.280
> 
> 标签：r

我是 R 的新手。我有两个如下所示的 data.frame：

DF1

> ```
>  List_name     Smokers   Not_smokers    
>   List1          30         100
>   List2          10          50
>   List3          3           10
>   List4          12          85
>   List5          56          60
>   List6          90         120 
> ```

DF2

> ```
>  List_name      Male       Female    
>   List1          23          123
>   List2          45          654
>   List3          35          110
>   List4          145         850
>   List5          89          234
>   List6          56          765 
> ```

我想在for ex之间应用一个prop.test：DF2的第一行和DF1的每一行，然后是DF2的第二行和DF1的每一行，然后是DF2的第三行和DF1的每一行以此类推，直到 DF2 的所有行结束。因此，由于 DF1 的维度为：100（行）X2（列），而 DF2 的维度为 30（行）X2（列），最终我将进行 30X100 次测试，因此进行 3000 次测试。

我尝试的是以下内容（使用另一个已发布问题的函数）：

```
for (i in 1:length(DF2)){ 
   test <- apply(DF1, 1, function(x) prop.test(rbind(x, as.numeric(DF2[[i]]), correct=TRUE,  alternative="two.sided", conf.level=.99))
} 
```

但它不起作用。显然，由于我是初学者，有些错误我无法解决。另一个问题是我执行的每个测试都将保存在单独的变量中和/或打印在单独的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:49:25.123

初学者最简单的方法是使用 2 个循环

```
DF1 <- read.table(text='List_name Smokers Not_smokers 
 List1 30 100
 List2 10 50
 List3 3 10
 List4 12 85
 List5 56 60
 List6 90 120',header=T)

DF2 <- read.table(text='List_name Male Female 
 List1 23 123
 List2 45 654
 List3 35 110
 List4 145 850
 List5 89 234
 List6 56 765', header=T)

test <- NULL
for (i in 1:nrow(DF2)) { 
 for (j in 1:nrow(DF1)) {
  test <- c(test,prop.test(c(DF1[j,2], DF2[i,2]),c(DF1[j,3]+DF1[j,2], DF2[i,3]+DF2[i,2]), correct=TRUE,  alternative="two.sided", conf.level=.99))
 }
} 
```

我做的测试与你的问题完全不同，但我认为这是你需要的（我正在测试吸烟者/不吸烟者的比例是否与男性/女性相同）

编辑：

要将结果保存在列表中：

```
test <- list()
for (i in 1:nrow(DF2)) { 
 for (j in 1:nrow(DF1)) {
  test[[length(test)+1]] <- prop.test(c(DF1[j,2], DF2[i,2]),c(DF1[j,3]+DF1[j,2], DF2[i,3]+DF2[i,2]), correct=TRUE,  alternative="two.sided", conf.level=.99)
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:12:01.863

假设您的 DF1 和 DF2 对象是 data.frame。因为您使用 DF2 作为列表...

```
DF1 <- data.frame(Smokers=c(30, 10, 3, 12, 56, 90), Not_smokers=c(100, 50, 10, 85, 60, 120))
DF2 <- data.frame(M=c(23, 45, 35, 145, 89, 56), F=c(123, 654, 110, 850, 234, 765))

test <- vector("list", dim(DF1)[1]*dim(DF2)[1])
k=1
for (i in 1:dim(DF2)[1]){
for(j in 1:dim(DF1)[1]){
    test[[k]] <- prop.test(rbind(as.numeric(DF1[j,]), as.numeric(DF2[i,])), correct=TRUE, alternative="two.sided", conf.level=.99)
    k=k+1
}
}

# the chi-square test produce warnings   
warnings() 
```

# java - 用Java检测虚拟机

> ID：14622966
> 
> 赞同：1
> 
> 时间：2013-01-31T09:58:19.263
> 
> 标签：java, types, virtual-machine, detection

我一直在寻找一种好方法来检测应用程序是否在带有 java 应用程序的虚拟机中运行，以便它可以在任何虚拟化操作系统上运行。但是我发现的所有链接都使用不同的编程语言，其中大部分我没有任何专业知识。

我还需要该应用程序来检测它正在运行的虚拟机软件。

我敢肯定这是有可能的，但到目前为止，还没有运气。我想知道其他人对这个主题了解多少。

我的目标是拥有一个可以在考试期间观察学生笔记本电脑的 Java 应用程序，以便可以观察到任何通过网络连接作弊的企图。这个应用程序需要知道它是否在虚拟机中运行，这样学生就不能这样欺骗老师。

# wordpress - 如何包含 php 文件 wordpress 插件

> ID：14622970
> 
> 赞同：0
> 
> 时间：2013-01-31T09:58:28.217
> 
> 标签：wordpress

我只是猜测这是可能的，所以我进行了测试并且不适合我。我的场景是：

```
function load_javascripts(){  
    wp_register_script( 'user-script', plugins_url( '/js/youtube-script.php', __FILE__ ), array( 'jquery' ) );
    wp_enqueue_script( 'user-script' );  
}
add_action('init','load_javascripts'); 
```

我包含一个包含大部分 javascript 的 PHP 文件（[包含文件](http://pastebin.com/9C4Vu94n)）

请问各位有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:25:52.137

您应该使用[wp_localize_script()](http://codex.wordpress.org/Function_Reference/wp_localize_script)在您的 javascript 文件中注入 PHP 变量。

PHP 示例

```
 <?php
wp_enqueue_script( 'some_handle' );
$array_to_js = array( 'some_string' =>'hello world' );
wp_localize_script( 'some_handle', 'object_name', $array_to_js );
?> 
```

Javascript：

```
 <script>
alert(object_name.some_string); // alerts 'hello world'
</script> 
```

# reporting-services - SSRS 访问所有报告中的自定义代码

> ID：14622975
> 
> 赞同：0
> 
> 时间：2013-01-31T09:58:46.610
> 
> 标签：reporting-services

我在报告中嵌入了自定义代码以检查是否被零除。是否可以在我的其他报告中访问此代码，而不必在所有报告中嵌入相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:05:20.433

要在报表之间共享代码，您最好的选择是将自定义程序集部署到报表服务器并在报表中引用它：

[使用自定义程序集](http://support.microsoft.com/kb/920769)。

# iphone - 如何在 iOS 原生应用中使用 plist

> ID：14622978
> 
> 赞同：-2
> 
> 时间：2013-01-31T09:58:54.290
> 
> 标签：iphone, objective-c, ios5

我想在我们的 iOS 应用程序中使用 plist 文件。当我浏览了一些文章时，我无法收集所需的信息。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:14:24.997

如果问题是关于从属性列表中读取和写入数据，相关文档是[属性列表编程指南]。（[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/ReadWritePlistData /ReadWritePlistData.html#//apple_ref/doc/uid/10000048i-CH8-SW3](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/ReadWritePlistData/ReadWritePlistData.html#//apple_ref/doc/uid/10000048i-CH8-SW3) )

该摘录应该可以帮助您：

# 使用核心基础函数读取和写入属性列表数据

> 将属性列表数据写入文件系统有两种主要方法：
> 
> 如果属性列表的根对象是 NSDictionary 或 NSArray 对象（几乎总是如此），您可以调用这些类的 writeToFile:atomically: 或 writeToURL:atomically: 方法，传入根对象。这些方法将属性列表对象的图形保存为 XML 属性列表，然后再将其写为文件或 URL 资源。要将属性列表数据读回程序，请通过调用 initWithContentsOfFile: 和 initWithContentsOfURL: 方法或相应的类工厂方法（例如，dictionaryWithContentsOfURL:）来初始化分配的集合对象。
> 
> 为了扩展最后一点，请考虑这个例子。您有一个 XML 属性列表，其根对象是一个 NSArray 对象，其中包含许多 NSDictionary 对象。如果您使用此调用加载该属性列表：

`NSArray * a = [NSArray arrayWithContentsOfFile:xmlFile];`

> a 是一个不可变数组，每个元素中都有不可变的字典。每个字典中的每个键和每个值也是不可变的。
> 
> 如果您使用此调用加载属性列表：

`NSMutableArray * ma = [NSMutableArray arrayWithContentsOfFile:xmlFile];`

> ma 是一个可变数组，每个元素中都有不可变的字典。每个字典中的每个键和每个值都是不可变的。
> 
> 如果您需要对属性列表中对象的可变性进行更细粒度的控制，请使用 propertyListFromData:mutabilityOption:format:errorDescription: 类方法，其第二个参数允许您在聚合属性列表的各个级别指定对象的可变性. 您可以指定所有对象都是不可变的（NSPropertyListImmutable），只有容器（数组和字典）对象是可变的（NSPropertyListMutableContainers），或者所有对象都是可变的（NSPropertyListMutableContainersAndLeaves）。
> 
> 例如，您可以编写如下代码：

`NSMutableArray *dma = (NSMutableArray *)[NSPropertyListSerialization propertyListFromData:plistData mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&error];`

> 此调用生成一个可变数组，每个元素中都有可变字典。每个字典中的每个键和每个值本身也是可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:09:33.957

你可以这样使用：-

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"dataList" ofType:@"plist"];
NSMutableArray *tempArray = [[NSMutableArray alloc] initWithContentsOfFile:path]; 
```

此数组可用于填充 tableview 或任何其他目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:26:40.167

获取数据形式非常简单，`plist`例如，

```
self.YorArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"YourplistName" ofType:@"plist"]]; 
```

# actionscript-3 - 在 flex 中实现 Undo Redo

> ID：14622979
> 
> 赞同：5
> 
> 时间：2013-01-31T09:58:59.883
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex4.6

如何在 flex 4 中实现 Undo Redo 操作以维护历史记录？我正在使用 flex UIComponent 和 DisplayObjects 来创建和编辑图表，但在 flex 中无法直接处理用户操作历史记录。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:28:14.783

您可以使用执行和撤消方法为所有操作实现[命令模式](http://en.wikipedia.org/wiki/Command_pattern)，并将它们排队。

因此，当用户想要做某事时 - 可以说创建一个 AddFiveToTotal 类并执行：

```
public method execute():void{
     totalModel.add( 5 );
} 
```

然后，此类将存储在 FIFO 队列中。

如果用户需要撤消，则会弹出命令并调用撤消函数：

```
public method undo():void{
     totalModel.subtract( 5 );
} 
```

为了可重做性，不要弹出，只需迭代队列

还可以看看[Memento Pattern](http://en.wikipedia.org/wiki/Memento_pattern)

如果您正在使用任何当前流行的 MVC(S) 框架，您无疑会发现有人已经创建了一个实用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:16:01.703

您可以在`memento pattern`. 很难更好地跟踪所有属性，您可以了解哪些属性需要用于撤消/重做操作。

[纪念品设计模式](http://www.as3dp.com/2008/01/actionscript-30-memento-design-pattern-encapsulating-saved-states/)

[纪念品图案](http://lucamezzalira.com/2010/01/12/memento-pattern-in-actionscript-3-undoredo/)

带有源代码的演示示例[http://www.flairpy.com/mementoPattern/MementoSample.html](http://www.flairpy.com/mementoPattern/MementoSample.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:31:30.580

有几种方法可以解决这个问题。首先是将整个画布的状态保持在一个`Vector`（我的意思是有一个监听器来监听用户在舞台上可以做的所有事情并在更改后保存状态），然后保存当前状态的索引，这样你就可以通过您的移动`Vector`并将所需的状态放在舞台上。这是处理撤消/重做功能的最简单方法，但请注意，您必须大量克隆对象，如果您要处理大量对象或大量撤消，这将成为内存占用/重做。

第二种方法是只保留该向量中更改的内容，这样您就不必创建和克隆很多对象，而只需在其中保存一个对象，`Vector`该对象将包含所有已更改的属性及其最后的值。这会给你这样的东西：

```
private var mHistory:Vector.<Object> = new Vector.<Object>();
private var mCurrentIndex:int = -1;

public function storeState(state:Object)
{
   mHistory.push(state);
   mCurrentIndex++;
}     

public function undo():void
{
   if(mCurrentIndex < 1)
       return;

   mCurrentIndex--;

   //here you could test for values that could have changed
   var item:DisplayObject = this.getChildByName(mHistory[mCurrentIndex].name);
   if(mHistory[mCurrentIndex].x != undefined)
       item.x = mHistory[mCurrentIndex].x;
   // etc. you get the point. Note that this is only comfortable if only several things can change
} 
```

函数调用`storeState`是这样的：

```
var state:Object = { name:DisplayObjectName, x:120, y:20 };
storeState(state); 
```

同样，如果你想记录它们，你将不得不听所有的动作和变化。

# wpf - 鼠标点击删除线按钮

> ID：14622981
> 
> 赞同：1
> 
> 时间：2013-01-31T09:59:03.903
> 
> 标签：wpf, xaml, button

我有一个带有 3 个按钮的 WrapPanel。

```
<WrapPanel Orientation="Horizontal">
   <Button Content="Book1" />
   <Button Content="Book2" />
   <Button Content="Book3" />
</WrapPanel> 
```

如果我单击 Book1，我会看到 Book1 的内容。如果我点击 Book2，我会看到 Book2 等的内容。如果我点击它，是否有任何命令可以删除按钮？在 Html 中有文本的“del”：

```
<del>Strikethrough</del> 
```

我想要相同但在 wpf 和按钮

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:03:32.147

在单击事件中将 TextDecoration 对象添加到 TextBlock.TextDecorations 集合（例如）：

XAML：

```
<Button Click="Button_Click_1">
   <TextBlock>
       Book 1
   </TextBlock>
</Button> 
```

和处理程序：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
   // ... your logic

   var button = (Button)sender;
   var textBlock = (TextBlock)button.Content;

   // if decoration wasn't already inserted
   //
   if (!textBlock.TextDecorations.Any())
       textBlock.TextDecorations.Add(new TextDecoration { Location = TextDecorationLocation.Strikethrough });
 } 
```

更新：回答您的评论 - 最简单的方法

XAML

```
<Button x:Name="button1" Click="Button_Click_1">
            <TextBlock>
                Book 1
            </TextBlock>
        </Button>

        <Button x:Name="button2" Click="Button_Click_2">
            <TextBlock>
                Book 2
            </TextBlock>
        </Button> 
```

代码：

```
private void SetStrikethrough(Button b, Boolean strikethrough)
        {
            var textBlock = (TextBlock)b.Content;

            if (strikethrough)
            {
                if (!textBlock.TextDecorations.Any())
                    textBlock.TextDecorations.Add(
                        new TextDecoration { Location = TextDecorationLocation.Strikethrough });
            }
            else
            {
                textBlock.TextDecorations.Clear();
            }
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            var button = (Button)sender;
            SetStrikethrough(button1, true);
            SetStrikethrough(button2, false);
        }

        private void Button_Click_2(object sender, RoutedEventArgs e)
        {
            var button = (Button)sender;
            SetStrikethrough(button2, true);
            SetStrikethrough(button1, false);
        } 
```

请注意，此代码始终假定按钮内容是文本块。只是为了简单。

# android - 使用时标题后的换行符

> ID：14622986
> 
> 赞同：0
> 
> 时间：2013-01-31T09:59:24.170
> 
> 标签：android, html

最近我在 android 中尝试 HTML 标签。当我尝试使用该`<h3>`标签时，它会在它之后和下一行之前自动创建一个行空间。在 HTML 中，可以通过将填充和边距设置为 0px 来删除它。谁能告诉我如何在 android 应用程序中删除这个空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:26:07.890

的默认渲染`h3`有上边距和下边距，您可以在 CSS 中轻松移除下边距：

```
h3 { margin-bottom: 0; } 
```

我在这里没有看到任何特定于 Android 的内容，但只是为了确保我在 Android 上对其进行了测试，并且它可以按预期工作。

如果标题之后的下一个元素是一个`p`元素，则该元素默认具有上边距。要删除它，您将添加

```
h3 + p { margin-top: 0; } 
```

（在相当旧版本的 IE 中不起作用，但我不在乎。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:04:36.520

也许您也应该尝试添加在这种情况下通常使用的边距技巧。:) 它可能会起作用。

# html - sendmailR：html 和多语言支持

> ID：14622989
> 
> 赞同：1
> 
> 时间：2013-01-31T09:59:33.200
> 
> 标签：html, r, email, multilingual

我使用 sendmailR (ver. 1.0-0) 创建自动化的公司邮件。在邮件消息中，我插入 html 代码来生成表格。最后，在发送之前，我将消息转换为 utf8 - 因为它包含多语言字符，所以使用

```
msg <- iconv(msg, to = "utf8") 
```

迁移到版本后。1.1-2（为了发送带附件的邮件），邮件内容无法再阅读。文本不可读，html 代码被忽略。这是升级后的内容示例：

```
Î³Î¹Î± Ï„Î¿ Î¼Î®Î½Î± Î”ÎµÎºÎ­Î¼Î²Ï Î¹Î¿ (Î±Î½Î¬ ÏƒÏ Î¼Î²Î±ÏƒÎ· ÎºÎ±Î¹ Î±Î¸Ï Î¿Î¹ÏƒÏ„Î¹ÎºÎ¬), Î­Ï‡Î¿Ï…Î½ Ï‰Ï‚ ÎµÎ¾Î®Ï‚.<br><br> <b>Î‘Î½Î¬ ÎšÎ±Ï„Î·Î³Î¿Ï Î¯Î± ÎºÎ±Î¹ Î£Ï Î¼Î²Î±ÏƒÎ·</b><br>

  <table style='border-collapse: collapse; border-color: rgb(136, 136, 136); border-width: 1px;' border='1' bordercolor='#888888' cellspacing='0'>

  <tbody><tr>

  <td style='text-align: center; width: 40px; height: 20px;'>&nbsp;Î‘.A.</td> 
```

您是否建议继续使用初始版本？

谢谢

# java - 在 HTTP 请求被服务并发送回客户端后，如何启动后台线程？

> ID：14622990
> 
> 赞同：0
> 
> 时间：2013-01-31T09:59:35.777
> 
> 标签：java, multithreading, tomcat, vaadin, server-push

我有一个 Vaadin 应用程序，我正在实现一些异步后台处理。据我所知，来自客户端的所有请求都由 Tomcat 线程池中的一个线程处理，在处理请求后，响应（更新的应用程序状态）将返回给客户端并呈现。

因为我有一些我想在后台执行的任务，我需要在主 HTTP 线程中显示一个“正在加载...”标签，在它显示之后，我需要启动一个执行任务的后台线程，当它完成时，应用程序的状态被推送到客户端（使用 ICEPush 插件）。

问题是在我看来，有时后台线程在主 HTTP 线程返回响应给客户端之前完成，因此没有显示“正在加载...”标签，有时应用程序的状态没有在客户端上完全更新，因为那个。因此，我需要在主 HTTP 线程返回响应后启动后台线程。

有没有办法做到这一点？还是我对这种方法完全错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:28:40.733

据我所知，在线程中更新 UI 必须与锁定机制一起完成。这是一个例子：

```
class Calculation implements Runnable {

    private long result = 0;

    private final Label label;

    public Calculation(Label label) {
        this.label = label;
    }

    @Override
    public void run() {
           // calculate or fetch the result (here is the time consuming operation) 
           getSession().getLockInstance().lock();
           try {
               // inform UI about result
               label.setValue("Result is: " + result);
           } finally {
               getSession().getLockInstance().unlock();
           }
     }
} 
```

# events - Youtube 播放器未在 IE 8 和 IE 10 中触发 onReady 和 onStateChange 事件

> ID：14622991
> 
> 赞同：4
> 
> 时间：2013-01-31T09:59:42.407
> 
> 标签：events, youtube

我花了 3 天的时间试图解决这个问题。很快，Youtube 播放器在 IE8 和 IE10 中都不会触发 onReady 和 onStateChange 事件。我在 Firefox 上对其进行了测试，并且可以正常工作。基本上，我正在开发一个使用 WebView 托管 html 的 Windows 8 Metro 应用程序，但它在 WebView 中也不起作用。

视频加载并调用 onYouTubeIframeAPIReady ，仅此而已。下面是html代码。

onPlayerReady 和 onPlayerStateChange 函数中的警报消息在 IE8 和 IE10 中不显示，但在 Firefox 中显示。

请帮忙.....

```
<!DOCTYPE html> 
<html> 
<body> 
<div id="player"></div> 
<script> 

alert('LOADING');
alert(GetUserAgent());

var tag = document.createElement('script');
tag.src = "http://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
function onYouTubeIframeAPIReady() 
{ player = new YT.Player('player', { height: '315', width: '560',
 videoId: 'CreKbwMTZA8', playerVars: {'autoplay': 1}, 
events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange }  });  
alert('onYouTubeIframeAPIReady');
}

function onPlayerReady(event) 
{ 
event.target.playVideo(); 
alert('onPlayerReady');
}

function onPlayerStateChange(event) 
{
alert('onPlayerStateChange');

if (event.data == YT.PlayerState.PLAYING) { window.external.notify('PLAYING');}
else if (event.data == YT.PlayerState.ENDED) {window.external.notify('ENDED');}
}

function setSize(width, height) 
{ player.setSize(width, height); 
}

function GetUserAgent() 
{
  return navigator.userAgent;
}

</script>
</body>
</html> 
```

# c# - 如何在 Word 应用程序中查找插件列表

> ID：14622992
> 
> 赞同：1
> 
> 时间：2013-01-31T09:59:41.937
> 
> 标签：c#, vsto, add-in

我使用 Visual Studio Tools for Office (VSTO) 创建了一个 office:word 插件。我已将加载项的加载行为修改为“0”以停止其自动加载行为。

我的要求是从 ac# 应用程序启动一个 word 文档，并仅为这个 word 实例启用加载项。

```
Using Word = Microsoft.Office.Interop.Word;

{
  Word.Application wordApp;

  //Instantiate a word application
  wordApp = new Word.Application();
  wordApp.visible = true;

  // Open a document
  wordApp.Documents.Open(ref wordFile, ref Missing.value, ..... etc );  

  foreach (Word.AddIns addins in wordApp.Application.AddIns)
       MessageBox.Show(addins.ToString());
} 
```

for 循环抛出异常：

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'Microsoft.Office.Interop.Word.AddIn' 
```

*** 如何获取/存储/迭代插件/COMaddins 列表 ***

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:38:05.810

最后我找到了解决我的问题的方法：

```
// This will return all the word addins
Microsoft.Office.Core.COMAddIns comAddins = wordApp.COMAddIns;

// Iterate through all the addins 
for(Microsoft.Office.Core.COMAddIns addins in wordApp.COMAddIns)
     MessageBox.Show(addin.Description); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:01:27.820

众所周知，应用程序级插件适用于特定应用程序的所有实例。我成功地为 Office 2007（Word 和 Excel）应用程序的特定实例启用了应用程序级加载项。例如，如果我从 ac# 应用程序启动一个 word 实例，我的应用程序级加载项（自定义功能区功能）将仅适用于该实例，手动启动的所有其他实例的行为将是正常的。

每个应用程序级别的加载项都会在注册表中注册自己。因此，应用程序的每个实例都会尝试加载加载项。因此，主要的工作在于加载功能区。

在运行时，您必须决定是加载自定义功能区还是加载基本功能区。

为此，
-> 在 c# 应用程序中创建一个进程特定的环境变量，您将在其中实例化您的办公应用程序（word/excel）。

```
System.Environment.SetEnvironmentVariable("MyVar", "1", EnvironmentVariableTarget.Process); 
```

-> 检查加载项功能区类中的变量。如果变量存在则加载自定义功能区，如果不存在则加载基本功能区。

```
public string GetCustomUI(string ribbonID)
{
   if (System.Environment.GetEnvironmentVariable("MyVar", EnvironmentVariableTarget.Process) == "1")
   {
        return GetResourceText("ExcelAddIn.ExcelRibbon.xml");
   }
   else
   {
        return GetResourceText("ExcelAddIn.BasicRibbon.xml");
   }
} 
```

你快完成了！但是 Windows 不允许您一次维护两个 word/excel 实例 (.exes)。因此，每个 word/excel 实例都将从同一个 .EXE 打开，并且您的加载项将应用于所有实例。因此，将 word/excel 的每个实例 (.exe) 分开。

有注册表破解来实现这一点：
在密钥中，

```
HKEY_CLASSES_ROOT\Word.Document.12\shell\Open\Command 
```

将“%1”附加到默认键值并重命名命令键。
在关键，

```
HKEY_CLASSES_ROOT\Word.Document.12\shell\Open 
```

重命名 ddeexec 键。

问候，

# javascript - 如何为模态对话框调用一次控制器？

> ID：14622997
> 
> 赞同：0
> 
> 时间：2013-01-31T09:59:53.720
> 
> 标签：javascript, angularjs, angular-ui

这是[一个演示我的问题的 plunkr](http://plnkr.co/edit/V5krTZ?p=preview/)（你必须打开控制台）。如何尝试？

1.  单击显示模态 2 次。
2.  单击通知按钮。然后在控制台中，有：

    `Notification broadcasted. example.js:44 2 Notification received.`

这意味着收到两次通知。这是因为在每个 open() 上都会调用模态的控制器。我的问题是，我只想为模态调用一次。我知道 $on() 返回注销函数，但是在我的应用程序中，我注册了很多事件，并且我不想在每次关闭模式时都注销它们。我也不能在其他任何地方使用 $on()，因为我需要使用对话框本身。难道没有更简单的方法可以确保对于每个模式对话框，我只注册一次 $scope 事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:14:35.723

plnkr 不起作用（当前），并且显示问题的较小 plnkr 会更好。

在 ModalDemoCtrl 中的 open() 和 close() 函数中，如何切换跟踪模态状态的 $scope 属性（例如，$scope.showModal）。当它已经打开时，不要再次调用 modelService()。

# ios - 替换分发配置文件时，iOS APNS 证书是否会失效？

> ID：14622999
> 
> 赞同：1
> 
> 时间：2013-01-31T09:59:58.253
> 
> 标签：ios, apple-push-notifications

这个[问题](https://stackoverflow.com/questions/11087983/what-happens-to-the-apns-certificate-when-revoking-the-distribution-certificate)提出了类似的问题，但我想限定一个细节。

我了解 APNS 证书与配置文件无关，但这是否也意味着 APNS 服务器将继续接受通过“孤立”APNS 证书发送的推送通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:18:11.607

我假设您正在谈论替换分发配置文件，而不是证书。

这不是“孤立”APNS 证书的情况——证书是由某个有效身份创建的，并且应该仍然有效。在这种情况下，唯一可能出错的是，如果您取消了对您正在使用的 App ID 的 APNS 支持 - 因为情况并非如此，您只是替换了配置文件（将附加到 push-启用的应用程序 ID），什么都不会破坏。

希望这有帮助，祝你好运