# StackOverflow 问答 14104000-14104999

# ios - 长按上的单元格图像视图更改

> ID：14104011
> 
> 赞同：1
> 
> 时间：2012-12-31T16:45:00.253
> 
> 标签：ios, uitableview, uiimageview, uigesturerecognizer

试图遵循这个：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath//tableview delegate
{
    //here is the code to create and customize a cell
    //adding gesture recognizer
    UILongPressGestureRecognizer *recognizer = [[UILongPressGestureRecognizer alloc]
    initWithTarget:self action:@selector(your_function)];
    recognizer.minimumPressDuration = 1.0; //seconds
    [cell addGestureRecognizer:lpgr];
    [lpgr release];
    return  cell;
}

-(void)your_function
{
    NSlog(@"detecting long press");
} 
```

这是我的问题：

如何在长按手势后更改单元格图像视图？

我想我需要在`-(void)your_function {}`.

问题更新

真正使用它：

有了这个，当我单击一个单元格（长按）时，会出现 4 个自定义项目，但是当我选择其中一个时，应用程序会崩溃。（如果您删除 :(Cell*)cell 和 cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedRED.png"]]; 它可以工作...我的意思是 alertView 出现了，但图像当然不会'不改变）。

```
- (void)longPress:(UILongPressGestureRecognizer *)recognizer {
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        Cell *cell = (Cell *)recognizer.view;
        [cell becomeFirstResponder];

        UIMenuItem *highDep = [[UIMenuItem alloc] initWithTitle:@"High Dependency" action:@selector(hiDep:)];
        UIMenuItem *lowDep = [[UIMenuItem alloc] initWithTitle:@"Low Dependency" action:@selector(lowDep:)];
        UIMenuItem *booked = [[UIMenuItem alloc] initWithTitle:@"Booked"     action:@selector(booked:)];
        UIMenuItem *free = [[UIMenuItem alloc] initWithTitle:@"Free" action:@selector(free:)];

            UIMenuController *menu = [UIMenuController sharedMenuController];
    [menu setMenuItems:[NSArray arrayWithObjects:booked, highDep, lowDep, free, nil]];
        [menu setTargetRect:cell.frame inView:cell.superview];
        [menu setMenuVisible:YES animated:YES];

   } 
```

}

空隙是：

```
 - (void)hiDep:(Cell*)cell
 {
    NSLog(@"Bed is HiDep");

    cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedRED.png"]];

     UIAlertView *testAlert = [[UIAlertView alloc] initWithTitle:@"This Bed is High Dependency"
                                                    message:@""
                                                   delegate:self cancelButtonTitle:@"OK"   otherButtonTitles:nil, nil];

    [testAlert show];
    [testAlert release];

  }

- (void)lowDep:(Cell*)cell
 {...}

 - (void)free:(Cell*)cell
 {...}

 - (void)booked:(Cell*)cell
 {...} 
```

细胞构建方法是：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

     static NSString *identifier = @"Cell";
    Cell *cvc = (Cell *)[collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

    int i = indexPath.row%[labelArray count];
    number = i;

    UILongPressGestureRecognizer *recognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];

    [cvc addGestureRecognizer:recognizer];

    cvc.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"icubed.png"]];
    cvc.label.text =  [labelArray objectAtIndex:number];

       return cvc;

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T19:16:04.127

将方法更改为：

```
-(void)your_function:(UITableViewCell*)cell
{
    cell.imageView = .....
} 
```

识别器会将单元格作为印刷机的发送者发送，并将其传递给您的方法。

**注意**您必须将识别器更改为：

```
UILongPressGestureRecognizer *recognizer = [[UILongPressGestureRecognizer alloc]
initWithTarget:self action:@selector(your_function:)]; 
```

添加**:**到方法的末尾，因为您的方法有一个参数。

# c - 防止用户输入错误的数据类型

> ID：14104013
> 
> 赞同：-2
> 
> 时间：2012-12-31T16:45:11.363
> 
> 标签：c

> **可能重复：**
> [如果用户输入非数字字符，如何仅扫描整数并重复阅读？](https://stackoverflow.com/questions/14099473/how-to-scanf-only-integer-and-repeat-reading-if-the-user-enter-non-numeric-chara)

嗨，我是 c 新手，我正在编写一个程序，要求用户输入一个整数，如果它不符合一定范围内的标准，比如小于 20，但大于 5。它询问用户再次输入值。

但是我想知道如果我输入一个字符会发生什么，并且它会创建一个无限循环。

所以我想知道是否有一种方法或一个特定的函数可以检查输入的值，看看它是否是正确的数据类型。而且我不会提醒用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T16:56:03.433

许多人已经尝试过，但到目前为止，在制造能够控制用户大脑以防止用户有时按下错误（某种）按钮的计算机方面还没有取得任何成功......；）

有两种普遍接受的解决方案来解决这个问题：

1.  编写一个直接输入函数，读取“无回显”，并丢弃[可能显示一些消息]错误输入，以及“知道”什么是有效输入的特定输入函数。

2.  使用标准函数将输入读取为文本字符串，然后（尝试）将字符串输入转换/验证为数字或其他内容。在这里，如果转换/验证失败，您会打印一些消息并要求用户重试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T16:47:09.883

为了应对这种可能性，您必须将输入扫描为文本，然后自行进行健全性测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T16:59:50.347

您可以阅读，`scanf("%d")`如果用户输入一个包含非数字字符的字符串，那么您必须在再次阅读之前清理标准输入缓冲区`scanf("%d")`。

当你清理标准输入时，你将停止无限循环

使用以下功能清理您的标准输入

```
int clean_stdin()
{
    while (getchar()!='\n');
    return 1;
} 
```

并且可以通过这种方式从标准输入读取整数：

```
char c;
do
{  
    printf("\nEnter an integer from 5 to 20: ");

} while (((scanf("%d%c", &rows, &c)!=2 || c!='\n') && clean_stdin()) || rows<5 || rows>20); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T19:19:39.087

一种常见的方法是将输入读取为文本，然后使用类似`strtol`or的库函数转换为目标类型`strtod`。这两个功能还允许您检测错误输入。

这是一种方法：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <ctype.h>

int main(void)
{
  char instr[12];
  int  value;
  char *chk;

  /**
   * Make sure read is successful
   */
  errno = 0;
  if (!fgets(instr, sizeof instr, stdin))
  {
    perror("Unable to read input string");
    exit(-1);
  }

  /**
   * Make sure user didn't enter more characters
   * than we're prepared to handle.
   */
  if (!strchr(instr,'\n'))
  {
    fprintf(stderr, "Input too long for buffer, discarding...\n");
    while (!strchr(instr,'\n'))
      fgets(instr, sizeof instr, stdin);
     exit(-1);
  }
  else
  {
    *strchr(instr,'\n') = 0;
  }

  /**
   * Convert text to decimal integer using strtol
   */
  value = (int) strtol(instr, &chk, 10);
  if (!isspace(*chk) && *chk != 0)
  {
    fprintf(stderr, "%s\n", instr);
    fprintf(stderr, "%*s^\n", (int)(chk - instr), " ");
    fprintf(stderr, "Invalid character detected in input string\n");
    exit(-1);
  }

  printf("Converted input value is %d\n", value);
  return 0;
} 
```

因此，假设您没有读取错误并且用户没有输入令人讨厌的长输入，您可以使用`strtod`将文本字符串转换为相应的整数值。 `chk`将被设置为指向不属于有效整数常量的第一个字符。如果该字符不是空白字符 ( `isspace(*chk)`) 或 0 终止符，则输入不是有效的整数字符串。然后你可以把它扔掉并要求一个新的输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T16:52:10.510

C中的标头中有一些函数`<ctype.h>`..

`isalpha()`用于检查输入的输入是否为字母表。

您可以在字符串中输入并检查每个字符是字母还是数字..将其保持在循环中以检查它，如果给定的输入无效，则要求用户重新输入..

`isdigit()`用于检查给定输入是否为数字..

```
int is_alpha(char *s)
{
    while(*s) {
      if(isalpha(*s))
            s++;
        else 
            return 0;
    }

        return 1; 
   } 
```

上面的函数检查输入的输入是否都是字母。如果条件失败，我返回“0”，如果条件为假，则返回“1”。

在 main 函数中收集返回值并检查..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-31T16:54:44.350

确实存在可以检查输入的数字是整数还是输入的字符实际上在 az 之间的函数。

但是没有可以为特定范围设置的功能，您必须自己设计。一个简单的函数可以像

```
int check(int a)
{
if(a>5 && a<20)
{
printf("Need a different Value");
}
} 
```

# css - 没有 webkit 和 moz 前缀的 CSS3

> ID：14104016
> 
> 赞同：2
> 
> 时间：2012-12-31T16:45:44.947
> 
> 标签：css, webkit, prefix

是否有插件或这种性质的东西可以让我这样编写 CSS：

```
transition:all 300ms; 
box-shadow:0 3px 2px #222; 
backface-visibility:hidden; 
```

ETC..

对于需要`-webkit-`, `-moz-`,`-ms-`等的浏览器版本`-o-`。在加载样式表时自动添加到需要的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T16:57:36.870

是的，**-prefix-free**让你在任何地方都只使用无前缀的 CSS 属性。它在幕后工作，仅在需要时将当前浏览器的前缀添加到任何 CSS 代码中。[项目网站](http://leaverou.github.com/prefixfree/)

**特征**

*   处理或元素中的每个样式表，并在需要时添加供应商前缀
*   处理具有样式属性的元素并在需要时添加供应商前缀
*   处理新元素、样式属性更改和 CSSOM 更改（需要插件）
*   让 jQuery 的 .css() 方法获取和设置无前缀属性（需要插件）

**限制**

*   不支持在 @import-ed 文件中添加前缀代码
*   不支持为跨域链接样式表添加前缀，除非它们启用了 CORS
*   无前缀的链接样式表在 Chrome 和 Opera 中无法本地工作。你可以自己改变它。
*   内联样式中的无前缀值（在 style 属性中）在 IE 和 Firefox < 3.6 中不起作用。Firefox < 3.6 中的属性也是如此。

**如何使用**

只需在页面的任何位置包含 prefixfree.js。建议将其放在样式表之后，以最小化 FOUC

就是这样，你完成了！

**浏览器支持**

目标浏览器支持**桌面版****IE9+**、**Opera 10+**、**Firefox 3.5** + 、**Safari 4+**和Chrome以及**移动版 Safari**、**Android 浏览器**、**Chrome 和 Opera Mobile**。

 ******* * *

**前缀mycss**

此外，还有一项在线服务，可让您粘贴未加前缀的 css 代码并返回带有所有供应商前缀的 css。[http://prefixmycss.com/](http://prefixmycss.com/)

* * *

**CSS3请**

[css3please.com](http://css3please.com/)：一个跨浏览器的 css3 规则生成器，由 Jonathan Neal 和 Paul Irish 制作。除了同步和规范化必要属性的更改外，它还通过 IE 过滤器潜入 IE 对一些功能的支持。

* * *

**SASS 和指南针**

另一种方法是使用 CSS 预处理器[SASS](http://sass-lang.com/)和[COMPASS](http://compass-style.org/) mixins。

**Sass**是 CSS3 的扩展，它添加了嵌套规则、变量、混合、选择器继承等。Sass 生成格式良好的 CSS 并使您的样式表更易于组织和维护。

**Compass**允许扩展 Sass，它充满了可重用的模式，它允许基于最佳实践以简单和标准的方式使用 sprite、CSS3 和排版。

* * *

最后我建议你阅读 Paul Irish 的一篇文章，他是谷歌最好的前端开发人员之一：http: [//paulirish.com/2012/vendor-prefixes-are-not-developer-friendly/](http://paulirish.com/2012/vendor-prefixes-are-not-developer-friendly/)******

# jquery - 使用 jQuery 将链接附加到另一个页面

> ID：14104021
> 
> 赞同：-1
> 
> 时间：2012-12-31T16:46:15.810
> 
> 标签：jquery, hyperlink

我正在尝试做一些非常简单的事情，但我的搜索结果是空的。我正在尝试附加一个按钮，该按钮只会将您链接到另一个页面。

像这样：

```
$("#something").append("<br><center><input type='button' value='Go' onclick='Link to another page'></center>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:47:53.517

### 如果你想保持相同的标记，使用这个：

```
$("#something").append("<br><center><input type='button' value='Go' onclick='location.href=\"url\"'></center>"); 
```

`url`用类似的东西代替`index.html`。

### 建议：

1.  我建议`<a>`为这种东西贴一个标签。
2.  将`<center>...</center>`标签替换为`<div style="text-align: center;"></div>`.
3.  通过提供这种方式使用不显眼的 JavaScript 方式：

    ```
    $("#something").append("<div style='text-align: center;'><input type='button' value='Go' id="button"></div>");
    $("#button").click(function(){ location.href = 'url'; }); 
    ```

# c# - 具有特定整数的随机数

> ID：14104022
> 
> 赞同：-4
> 
> 时间：2012-12-31T16:46:25.467
> 
> 标签：c#, random

我正在为自己编写一个程序，我需要在特定数字之间进行随机操作。不是 2 个数字之间的字段中的随机数，而是几个特定数字之间的随机数。我想用 15 个不同的数字来做，但如果有人能给我一个只有几个的例子，那就太好了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T16:48:28.653

将您的数字存储在一个数组中，并选择一个随机索引：

```
var nums = new int[] { 1, 5, 7, 14, 17 };
var rand = new Random();
var randIndex = rand.Next(nums.Length);
var theRandomSelection = nums[randIndex];

// do something with theRandomSelection 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T16:49:02.693

只需用您的数字填充一个数组，然后随机选择索引。伪代码：

```
int numbers = new List<int>(){1, 2, 4, 7, 8};

Random r = new Random();

int index = r.Next(numbers.Count);

int randomNumber = numbers[index]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T16:49:39.460

很难理解要求的是什么，但听起来像这样：

```
int[] values = new int[] {1,3,5,7};  
Random r = new Random();
int rInt = r.Next(0, values.Count);  
int selected = values[rint]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T16:49:36.203

列出你的 15 个具体数字。获取 1 到 15 之间的随机数。在您的随机数指定的位置获取列表中的项目。

# java - 服务器生成的图像文件损坏/不正确

> ID：14104030
> 
> 赞同：0
> 
> 时间：2012-12-31T16:47:35.327
> 
> 标签：java, image, jersey, apache-httpclient-4.x, content-encoding

我正在使用 Jersey (ver 1.9.1) 为 png 图像实现 RESTful Web 服务。我在客户端使用 Apache HttpClient（版本 4x）。客户端的代码调用 HttpGet 来下载图像。成功下载后，它将 InputStream 从 HttpEntity 保存到磁盘。现在问题是生成的文件和服务器上的文件不同。客户端代码生成的输出图像文件不可渲染。

```
@GET
@Path("/public/profile/{userId}")
@Produces({ "image/png" })
public Response getImage(@PathParam(value = "userId") String userId) {
    Response res = null;
    // ImageManagement.gerProfilePicture(userId) returns me profile picture
    // of the provided userId in PathParam
    File imageFile = ImageManagement.getProfilePicture(userId);
    if (imageFile == null) {
        res = Response.status(Status.NOT_FOUND).build();
    } else {
        res = Response
                .ok(imageFile, "image/png")
                .header("Content-Disposition",
                        "attachment; filename=Img" + userId + ".png")
                .build();
    }
    return res;
} 
```

下面我的客户端代码调用上面的资源方法

```
private File downloadProfilePicture(String userId) throws IOException{
    // URIHelper is a utility class, this give me uri for image resource
    URI imageUri = URIHelper.buildURIForProfile(userId);

    HttpGet httpGet = new HttpGet(imageUri);
    HttpResponse httpResponse = httpClient.execute(httpGet);
    int statusCode = httpResponse.getStatusLine().getStatusCode();

    File imageFile = null;
    if (statusCode == HttpURLConnection.HTTP_OK) {
        HttpEntity httpEntity = httpResponse.getEntity();
        Header[] headers = httpResponse.getHeaders("Content-Disposition");
        imageFile = new File(OUTPUT_DIR, headers[0].getElements()[0]
                .getParameterByName("filename").getValue());
        FileOutputStream foutStream = new FileOutputStream(imageFile);
        httpEntity.writeTo(foutStream);
        foutStream.close();
    }
    return imageFile;
} 
```

现在的问题是服务器上存在文件和下载的文件不同。

以下是服务器上存在的文件转储。

![在服务器上转储文件](../Images/48c239cb58ab743b085d3705fb6c3a13.png)

下面是下载文件的转储。

![将文件转储到客户端](../Images/9ecfce2ce33355e989270dcc068d773e.png)

你可以看到，一些字节被改变了。Jersey 服务器 api 是否从文件中修改流中的数据？出了什么问题？

**更新：**

如果我从浏览器点击相同的 url，它会下载文件但下载的文件不可见。所以这个问题似乎与服务器有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:23:40.207

对服务器采取不同的方法。如[泽西手册中所述](http://web.archive.org/web/20130113055113/http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e342)或如下所示：

```
@GET
@Path("/public/profile/{userId}")
@Produces("image/png")
public Response getFullImage(...) {

    Path path = Paths.get("path/to/file");
    byte[] imageData = Files.readAllBytes(path);

    // uncomment line below to send non-streamed
    // return Response.ok(imageData).build();

    // uncomment line below to send streamed
    // return Response.ok(new ByteArrayInputStream(imageData)).build();
} 
```

旁注：我认为在 REST 服务中返回图像数据不是一个好主意。它占用了服务器的内存和 I/O 带宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:57:47.757

我会尝试返回输入流而不是 File 对象。我认为媒体类型可能被弄乱了，或者默认文件处理弄乱了输出。所以使用也许：

Response.ok(new FileInputStream(imageFile), "image/png") .header("Content-Disposition","attachment; filename=Img" + userId + ".png") .build();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T11:33:42.140

我发现这是我的错。我正在修改过滤器代码中的响应数据（通过更改其编码）。此过滤器用于设置内容长度标头并处理“eTag”。这个想法是从这里借来的：http: [//www.infoq.com/articles/etags](http://www.infoq.com/articles/etags)

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    HttpServletRequest servletRequest = (HttpServletRequest) request;
    HttpServletResponse servletResponse = (HttpServletResponse) response;

    HttpResponseCatcher wrapper = new HttpResponseCatcher(
            (HttpServletResponse) response);

    chain.doFilter(request, wrapper);

    final byte[] responseBytes = wrapper.getByteArray();

    String digest = getMd5Digest(responseBytes);

    String etag = '"' + digest + '"';
    // always store the ETag in the header
    servletResponse.setHeader("ETag", etag);

    String previousEtag = servletRequest.getHeader("If-None-Match");
    // compare previous token with current one
    if (previousEtag != null && previousEtag.equals(etag)) {
        servletResponse.sendError(HttpServletResponse.SC_NOT_MODIFIED);
        // use the same date we sent when we created the ETag the first time
        // through
        servletResponse.setHeader("Last-Modified",
                servletRequest.getHeader("If-Modified-Since"));
    } else {
        // first time through - set last modified time to now
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.MILLISECOND, 0);
        Date lastModified = cal.getTime();
        servletResponse.setDateHeader("Last-Modified",
                lastModified.getTime());

        servletResponse.setContentLength(responseBytes.length);
        ServletOutputStream sos = servletResponse.getOutputStream();
        sos.write(responseBytes);
        sos.flush();
        sos.close();
    }
} 
```

我有一个扩展 HttpServletResponseWrapper 的 HttpResponseCacher 类。

```
public class HttpResponseCatcher extends HttpServletResponseWrapper {

    private ByteArrayOutputStream buffer;

    public HttpResponseCatcher(HttpServletResponse res) {
        super(res);
        this.buffer = new ByteArrayOutputStream();
    }

    //There is some more code in the class, but that is not relevant to the problem...
    public byte[] getByteArray() {
        //The problem is here... this.buffer.toString().getBytes() changes to encoding of the data      
        return this.buffer.toString().getBytes();
    }
} 
```

我将代码`byte[] getByteArray()`从更改`return this.buffer.toString().getBytes();`为`return this.buffer.toByteArray();`，这解决了问题。

# windows-8 - 如何在 Windows 8 中将 sqlite 表和列映射到 c# 类

> ID：14104031
> 
> 赞同：4
> 
> 时间：2012-12-31T16:47:39.430
> 
> 标签：windows-8, sqlite

我正在为 Windows 8 用 C# 构建我的第一个应用程序（我是一个完整的菜鸟）。我创建了一些类。当应用程序运行时，它需要从 sqlite 数据库中读取数据。我为每个表都有一个类，但我不知道如何将每个类属性映射到数据库中的相应列。我似乎找不到任何信息，而且我看到的所有东西似乎都会自动映射它们，或者没有提到它是如何完成的，例如

```
public class Person
{
[PrimaryKey, AutoIncrement]
public int Id { get; set; }

[MaxLength(30)]
public string Name { get; set; }

[MaxLength(30)]
public string Surname { get; set; }

} 
```

样本

```
var query = conn.Table<Person>().Where(x => x.Name == "Matteo");
var result = await query.ToListAsync();
foreach (var item in result)
{
    Debug.WriteLine(string.Format("{0}: {1} {2}", item.Id, item.Name, item.Surname));
} 
```

有什么我遗漏的东西或某种教程吗？我以前从未使用过 sqlite。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T17:13:03.080

好吧，我觉得很愚蠢......原来你必须在类上设置表和列属性。例如

```
[Table("sometable")]
class Element
{
    [Column(Name = "id")]
    public int Id { get; set; }

    [Column("columnone")]
    public string PropertyOne {get; set;}

    [Column("columntwo")]
    public string PropertyTwo {get; set;}
} 
```

# point - 贝塞尔曲线长度

> ID：14104034
> 
> 赞同：2
> 
> 时间：2012-12-31T16:47:51.053
> 
> 标签：point, curve

如何以编程方式计算贝塞尔曲线的长度？给4分；曲线的末端和两个控制点。有人可以帮我解决算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:54:25.067

如果你知道你的微积分，你可以从维基百科或其他东西中获取贝塞尔曲线的参数形式并使用它：

[http://tutorial.math.lamar.edu/Classes/CalcII/ParaArcLength.aspx](http://tutorial.math.lamar.edu/Classes/CalcII/ParaArcLength.aspx)

来计算它的长度。我假设您在询问之前尝试过 google，发现没有人已经发布了解决方案。

如果你不喜欢微积分，你可以通过用折线来近似曲线来得到一个合理的近似值，折线的长度很容易计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T07:07:37.743

贝塞尔曲线是 sum(pi bi,k(u))。您可以通过使用非常小的数字递增 u 来对曲线进行采样，并计算曲线上两个连续点之间的距离并将它们相加。这是matti也提到的折线长度的计算。

# xaml - 为什么忽略添加 BorderBrush？

> ID：14104040
> 
> 赞同：1
> 
> 时间：2012-12-31T16:48:34.827
> 
> 标签：xaml, windows-phone-8

我从这里更改了我的超链接：

```
 <HyperlinkButton x:Name="hyperlinkButtonManageInvitations" Margin="24"
                    Grid.Row="1" Tap="HyperlinkButtonManageInvitations_OnTap">
       Manage Invitations
   </HyperlinkButton> 
```

...对此：

```
 <HyperlinkButton x:Name="hyperlinkButtonManageInvitations"
                     BorderBrush="DarkOrange" Margin="24" Grid.Row="1"
                     Tap="HyperlinkButtonManageInvitations_OnTap">
        Manage Invitations
    </HyperlinkButton> 
```

...并且没有视觉变化 - 没有添加边框。所以我然后尝试调整更多属性，如下所示：

```
 <HyperlinkButton x:Name="hyperlinkButtonManageInvitations"
                     BorderBrush="DarkOrange" Margin="24" Grid.Row="1"
                     Tap="HyperlinkButtonManageInvitations_OnTap"
                     BorderThickness="4" OpacityMask="Black">
        Manage Invitations
    </HyperlinkButton> 
```

……还是不行。我不了解添加边框的哪一部分？

## 更新

我的超链接按钮现在是：

```
 <HyperlinkButton x:Name="hyperlinkButtonManageInvitations" Style="{StaticResource BorderedHyperlinkButtonStyle}" BorderThickness="5" BorderBrush="Red" Foreground="DarkOrange" Margin="24" Grid.Row="1" Tap="HyperlinkButtonManageInvitations_OnTap" Content="Manage Invitations">
    </HyperlinkButton> 
```

...我将下面提供的样式添加到 App.xaml 部分，但我现在仍然看到有问题的超链接按钮周围的边框。

## 更新 2

它现在就在那里——它“突然”出现了；我猜 xaml 渲染器可能会时不时地吸收缓慢。或者在使用新添加的样式时，需要先重新加载项目，或者……？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T16:58:05.107

这与 HyperlinkBut​​ton 控件模板有关；如果你去 Blend 并创建一个控制模板的副本来编辑，你会得到这样的东西：

```
<ControlTemplate TargetType="HyperlinkButton">
  <Border Background="Transparent">
    <VisualStateManager.VisualStateGroups>
      <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal"/>
        <VisualState x:Name="MouseOver"/>
        <VisualState x:Name="Pressed">
          <Storyboard>
            <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TextElement"/>
          </Storyboard>
        </VisualState>
        <VisualState x:Name="Disabled">
          <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="TextElement">
              <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
            </ObjectAnimationUsingKeyFrames>
          </Storyboard>
        </VisualState>
      </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <Border Background="{TemplateBinding Background}" Margin="{StaticResource PhoneHorizontalMargin}" Padding="{TemplateBinding Padding}">
      <TextBlock x:Name="TextElement" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Text="{TemplateBinding Content}" TextDecorations="Underline" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Border>
  </Border>
</ControlTemplate> 
```

因此，您可以在这里检查控件 BorderBrush 和 BorderThickness 属性是否没有 TemplateBinding。

要解决您的问题，只需复制此样式并将其插入页面/应用程序资源中：

```
<Style x:Key="BorderedHyperlinkButtonStyle" TargetType="HyperlinkButton">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="HyperlinkButton">
        <Border Background="Transparent" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
              <VisualState x:Name="Normal"/>
              <VisualState x:Name="MouseOver"/>
              <VisualState x:Name="Pressed">
                <Storyboard>
                  <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TextElement"/>
                </Storyboard>
              </VisualState>
              <VisualState x:Name="Disabled">
                <Storyboard>
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="TextElement">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                  </ObjectAnimationUsingKeyFrames>
                </Storyboard>
              </VisualState>
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>
          <Border Background="{TemplateBinding Background}" Margin="{StaticResource PhoneHorizontalMargin}" Padding="{TemplateBinding Padding}">
            <TextBlock x:Name="TextElement" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Text="{TemplateBinding Content}" TextDecorations="Underline" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
          </Border>
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

然后，在你想要的带边框的 HyperlinkBut​​ton 上，设置如下：

```
<HyperlinkButton Style="{StaticResource BorderedHyperlinkButtonStyle}" BorderThickness="5" BorderBrush="Red" /> 
```

随意编辑 BorderThickness 和 BorderBrush！

# date - Win CMD，根据文件日期将文件移动到目录

> ID：14104041
> 
> 赞同：1
> 
> 时间：2012-12-31T16:48:41.460
> 
> 标签：date, batch-file, copy, cmd

我正在尝试编写一个 Windows 7 批处理脚本，将 SD 卡上的相机照片移动到计算机硬盘上的目录中。该目录应包含图片创建日期的年月。

示例文件：`E:\DCIM\100CANON\IMG_0190.jpg, 2012/12/31`

到：`C:\Users..Pictures\2012\12\`

我的想法是为年、月和日编写 FOR 循环，然后移动比结果日期更新的文件：

```
FOR /L %%Y IN (2014,-1,2011) DO ( FOR /L %%M IN (12,-1,1) DO ( FOR /L %%D IN (31,-1,1) DO ( ROBOCOPY E:\DCIM\100CANON\ C:\Users..Pictures\%%Y\%%M\ *.* /MAXAGE:%%Y%%M%%D /MOVE ) ) ) 
```

但这不起作用，因为在低于 10 的月份和日期中缺少 0 ......

不幸的是，我对 Windows 批处理文件编码没有很好的了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:03:42.250

由于您按月将它们分开，因此您不需要日循环。

我所做的只是删除了日期循环（不包括每个月第一天之前的图片）并添加了 if 语句，该语句将调用`robocopy`带有填充月份数字的命令。

```
FOR /L %%Y IN (2014,-1,2011) DO (
    FOR /L %%M IN (12,-1,1) DO (
        if %%M LSS 10 ROBOCOPY E:\DCIM\100CANON\ C:\Users..Pictures\%%Y\0%%M\ *.* /MAXAGE:%%Y0%%M01 /MOVE /L
        if %%M GEQ 10 ROBOCOPY E:\DCIM\100CANON\ C:\Users..Pictures\%%Y\%%M\ *.* /MAXAGE:%%Y%%M01 /MOVE /L
    )
) 
```

我还建议`/L`在实际移动文件之前使用 robocopy 上的选项来验证结果！只需`/L`在您准备好实际移动文件时删除，而不仅仅是显示文件。

见[`robocopy /?`](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)寻求帮助。

# c# - 将命令行参数传递给使用 DotNetZip 创建的 SFX

> ID：14104043
> 
> 赞同：3
> 
> 时间：2012-12-31T16:48:43.183
> 
> 标签：c#, dotnetzip, sfx

我使用带有以下选项的 DotNetZip 创建了一个自解压 zip：

```
var opts = new SelfExtractorSaveOptions();
opts.RemoveUnpackedFilesAfterExecute = true;
opts.PostExtractCommandLine = "TestApp.exe";
opts.Flavor = SelfExtractorFlavor.ConsoleApplication;
zip1.SaveSelfExtractor("TestAppSFX.exe", opts); 
```

是否可以将命令行参数传递给我的自解压 zip，然后将其传递给解压后调用的控制台应用程序？

即，我希望能够输入如下内容：

`TestAppSFX.exe -flag`

然后，我的控制台应用程序`TestApp.exe`将`-flag`作为参数接收。

这些参数将根据使用情况而有所不同，因此在我创建 SFX 时指定它们不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:28:25.553

我查看了源代码，DotNetZip 似乎无法做到这一点。我现在使用 7zip 来执行此操作，如此[处所示](https://superuser.com/questions/42788/is-it-possible-to-execute-a-file-after-extraction-from-a-7-zip-self-extracting-a)

我还发现了这个[问题](https://stackoverflow.com/questions/11255850/self-extracting-zip-taking-arguments)，它说 WinRar 可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-18T18:20:46.177

是的，您可以使用 DotNetZip 传递标志，但您需要做一些工作。

您需要下载源代码并修改 CommandLineSelfExtractorStub.cs 以接受您自己的自定义参数。完成后，您可以将其构建到新的存根 exe 中。

要构建你的 SFX，你会做这样的事情......

```
byte[] stub = GetStubExecutable(); //read in your new stub file
output.Write(stub, 0, stub.Length);

using (ZipFile zip = new ZipFile())
{
    String[] filenames = System.IO.Directory.GetFiles(Path.Combine(path,FilesFolder)); 
    // Add the rest of they files you'd like in your SFX
    foreach (String filename in filenames)
    {
        ZipEntry e = zip.AddFile(filename, OutputZipFolder);
    }

    zip.Save(output); // save the zip to the outputstream
} 
```

# ruby-on-rails - rails 测试单元存根，然后通过 try 调用该方法

> ID：14104050
> 
> 赞同：2
> 
> 时间：2012-12-31T16:49:03.360
> 
> 标签：ruby-on-rails, ruby, unit-testing

我正在编写一个单元测试，并且由于某种原因，每当我调用我从 try 块中存根的方法时，它都不会返回存根结果。为了使这项工作，我需要配置一些特别的东西吗？我正在使用 ruby​​ 1.8.7 和 rails 2.3

```
squirtle.stubs(:bubbles?).returns(true)
puts squirtle.bubbles?
 => true
puts squirtle.try(:bubbles?)
 => false 
```

谢谢！

# mysql - 首先按特定字段值排序

> ID：14104055
> 
> 赞同：130
> 
> 时间：2012-12-31T16:49:33.003
> 
> 标签：mysql, sql, select, sql-order-by

我有一个包含 3 列的表：

```
id | name | priority
--------------------
 1 | core  |   10
 2 | core  |   9
 3 | other |   8
 4 | board |   7
 5 | board |   6
 6 | core  |   4 
```

我想使用`priority`但首先使用那些`name=core`具有较低优先级的行来对结果集进行排序。结果应该是这样的

```
id | name | priority
--------------------
 6 | core  |   4
 2 | core  |   9
 1 | core  |   10
 5 | board |   6
 4 | board |   7
 3 | other |   8 
```

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2014-08-21T18:07:45.467

还有[MySQL`FIELD`功能](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)。

如果要对所有可能的值进行完整排序：

```
SELECT id, name, priority
FROM mytable
ORDER BY FIELD(name, "core", "board", "other") 
```

如果您只关心“核心”是第一位的，而其他值无关紧要：

```
SELECT id, name, priority
FROM mytable
ORDER BY FIELD(name, "core") DESC 
```

如果要先按“核心”排序，然后按正常排序顺序对其他字段进行排序：

```
SELECT id, name, priority
FROM mytable
ORDER BY FIELD(name, "core") DESC, priority 
```

不过，这里有一些警告：

首先，我很确定这是 mysql 独有的功能 - 问题被标记为 mysql，但你永远不知道。

其次，注意如何`FIELD()`工作：它返回值的从*1 开始的索引*- 在 的情况下`FIELD(priority, "core")`，如果 "core" 是值，它将返回 1。如果字段的值不在列表中，则返回*零*。`DESC`除非您指定所有可能的值，否则这就是必要的原因。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2012-12-31T16:52:45.160

一般来说你可以做

```
select * from your_table
order by case when name = 'core' then 1 else 2 end,
         priority 
```

尤其是在 MySQL 中你也可以这样做

```
select * from your_table
order by name <> 'core',
         priority 
```

由于 MySQL 中的比较结果是 `0`or `1`，因此您可以按该结果排序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-31T16:52:17.810

优先考虑特定行的一种方法是将大量数字添加到它们的优先级中。您可以使用以下`CASE`语句执行此操作：

```
 select id, name, priority
    from mytable
order by priority + CASE WHEN name='core' THEN 1000 ELSE 0 END desc 
```

演示：[http ://www.sqlfiddle.com/#!2/753ee/1](http://www.sqlfiddle.com/#!2/753ee/1)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-27T20:11:16.887

这适用于我使用 Postgres 9+：

```
SELECT *
FROM your_table
ORDER BY name = 'core' DESC, priority DESC 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-31T16:52:04.407

一种方法是：

```
select id, name, priority from table a
order by case when name='core' then -1 else priority end asc, priority asc 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-26T09:45:42.147

```
SELECT * FROM cars_new WHERE status = '1' and car_hide !='1' and cname IN ('Executive Car','Saloon','MPV+','MPV5') ORDER BY FIELD(cname, 'Executive Car', 'Saloon','MPV+','mpv5') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-23T09:44:42.707

做这个：

```
SELECT * FROM table ORDER BY column `name`+0 ASC 
```

附加 +0 将意味着：

```
0, 10, 11, 2, 3, 4 
```

变成：

```
0, 2, 3, 4, 10, 11 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-23T08:01:11.880

**用这个：**

```
SELECT * 
FROM tablename 
ORDER BY priority desc, FIELD(name, "core") 
```

# c++ - 将非常量多维数组传递给不改变它的函数

> ID：14104075
> 
> 赞同：3
> 
> 时间：2012-12-31T16:51:12.177
> 
> 标签：c++, multidimensional-array, constants, argument-passing

> **可能重复：**
> [为什么将（指向非 const 的指针的指针）转换为（指向 const 的指针的指针）是不合法的](https://stackoverflow.com/questions/2220916/why-isnt-it-legal-to-convert-pointer-to-pointer-to-non-const-to-a-pointer-to)

我正在编写一个将二维数组作为输入的函数，并且不会更改基础值，我想在函数声明中明确指定它。我对这段代码有点困惑（这显然只是一个最小的虚拟代码来说明我的问题）：

```
int doNotChangeA(int const *a){
    return a[0]+3;
}

int doNotChangeC(int const **c){
    return c[0][0]+3;
}

int main(){

    int *a= new int[1];
    a[0]= 5;
    int b= doNotChangeA(a);
    delete []a;

    int **c= new int*[1];
    c[0]= new int[1];
    c[0][0]= 6;
    int d= doNotChangeC(c);
    delete []c[0];
    delete []c;

    return 0;
} 
```

此代码产生编译错误：

```
cst.cpp:19: error: invalid conversion from ‘int**’ to ‘const int**’
cst.cpp:19: error:   initializing argument 1 of ‘int doNotChangeC(const int**)’ 
```

所以，我有点困惑——为什么允许第一部分（传递给 doNotChangeA 的非 const 1D 数组）而不允许第二部分（传递给 doNotChangeC 的非 const 2D 数组）？

基本上我想做的是让 c 成为 int**，它指向非常量值，因为我想在调用 doNotChangeC 之前和之后用它做任何我想做的事情。当然，我可以将 doNotChangeC 更改为仅采用 int** 而不是 int const** 这将“解决”问题，但我想明确表明 doNotChangeC 不会更改底层的二维数组。

是正确的做法：

```
int d= doNotChangeC( const_cast<int const**>(c) ); 
```

这编译得很好，但我很困惑为什么第一部分不需要它，即一维数组 (doNotChangeA) ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:53:33.633

这将需要

```
int doNotChangeC(int const *const *c){
    return c[0][0]+3;
} 
```

如果没有额外的 const，您的函数将能够执行以下操作：

```
int doNotChangeC(int const **c){
    c[0] = &something_else;
    return c[0][0]+3;
} 
```

请注意，这与 C 的工作方式不同。在 C 中，您仍然无法将 a 传递`int **`给采用 a 的函数`int const *const *`，因为它的规则更简单。

# java - Grails - 使用 java 域类使用 GORM 创建 grails 域类

> ID：14104081
> 
> 赞同：4
> 
> 时间：2012-12-31T16:51:34.483
> 
> 标签：java, grails, grails-orm

找到了以下场景的部分答案，但需要进一步澄清。

有以下情况：

*   用java编写的领域类
*   域类未通过休眠映射到数据库
*   java类由java服务器使用，它在将结果作为序列化java类返回给客户端之前简单地执行密集计算

我想做的事：

创建一个 grails 应用程序，它可以执行以下操作：

1.  使用 java 域类作为 grails 域类
2.  让 GORM 将 java 域类映射到 DB
3.  能够从 groovy 域类创建 java 域类，以便能够将其发送到 java 服务器进行处理，然后接收 java 类响应并将其转换为 groovy 类，以便使用 GORM 映射存储在 DB 中
4.  基本上有一个 grails 应用程序处理用户交互并管理处理 java 类的外部 java 服务器的对象持久性

从下面的帖子（[将 Java bean 用作 Grails 域类](https://stackoverflow.com/questions/5619753/using-java-beans-as-grails-domain-classes)）我看到通过简单地定义约束可以在 grails 中使用 Java 域类，但这是如果这些类是用 hibernate 映射的。就我而言，我希望这些类由 GORM 映射。

解决方案：

*   我正在考虑为 java 域模型编写一个等效的 groovy 域模型。然而，这似乎需要在 groovy 类中复制对 java 类的大量工作和修改。
*   然后我需要编写函数来从 groovy 类创建 java 类，以便将 java 类传递给 java 处理服务器，反之亦然。

欢迎提出实施上述方案的所有建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:21:20.057

我还没有尝试过，但是从您指出的文档来看，您可以：

1.  为您的 Java 对象创建休眠 xml 映射
2.  在 Grails 项目中使用 Java 对象（带有休眠映射）
3.  在 UserBeanConstraints.groovy 中添加 Gorm 约束

# java - 使用索引与列名提取数据的结果集性能比较

> ID：14104082
> 
> 赞同：9
> 
> 时间：2012-12-31T16:51:48.753
> 
> 标签：java, resultset

当我使用索引获取数据与列名时，性能会有所不同吗？我说的是每天在服务器中执行此操作数百万次。

`rs.getString(1)`对比`rs.getString("columnname");`

编辑：JDBC 版本 Oracle JDBC 驱动程序 10.2.0.4.0

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T16:56:39.527

将`rs.getString(n);`执行稍快，因为它直接从集合中检索，而不是搜索。

数以百计的代码未来读者将欣赏您的代码，`rs.getString("columnname");`而不必查找 SQL 来查看索引`n`所指的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T16:59:29.237

这并不重要。对数据库的访问将比访问列值慢很多倍。

`rs.getString(n)`将快得可以忽略不计。但是，这将取决于驱动程序的实现和结果中的列数。大多数实现可能会使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)将列名映射到索引，但不一定。此外，一些驱动程序可能会懒惰地构建 HashMap，这意味着第一行将是按列名访问最慢的。例如，JTDS 对尚未在其 HashMap 中的列进行线性搜索。

编辑：小幅编辑和重新排列。没有内容变化。

# gradle - Gradle“无法打开 buildscript 类缓存” - 有没有更好的解决方法？

> ID：14104085
> 
> 赞同：27
> 
> 时间：2012-12-31T16:52:10.770
> 
> 标签：gradle

将依赖项添加到 .gradle 文件后，我们的构建服务器开始出现以下问题：

```
FAILURE: Build failed with an exception.

* What went wrong:
Could not open buildscript class cache for build file '/u01/apps/.jenkins/workspace/[path name snipped]/build.gradle'     (/home/[username]/.gradle/caches/1.3/scripts/build_5jii90b0hvl37q9m8vfhik495b/ProjectScript/buildscript).
> java.io.EOFException 
```

我们能够通过清除构建从站上的 gradle 缓存来解决它。但是，我担心这只是一个临时修复，它可能会再次出现。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-09-03T07:11:01.033

转到位置“.gradle\caches\2.0\scripts\build_7l4t45nbnsvdcl79ol8u0beli4\ProjectScript”并删除 cache.properties.lock 文件

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-08T17:50:20.950

该异常通常是由于缓存文件损坏而发生的。

在大多数情况下，删除缓存确实有效。

**Linux**

```
rm -rf ~/.gradle/caches 
```

**视窗**

删除`%USER_HOME%.gradle/caches`文件夹

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-21T14:09:18.397

首先，我建议您从 Gradle 1.3 升级到最新版本。自 1.3 以来，构建脚本缓存发生了很大变化。

其次，在 Jenkins 环境中运行时，考虑将 gradle 用户家移动到 ~/.gradle/ 之外的另一个位置通常是一件好事。可以通过在 Jenkins 设置（配置系统）中设置环境变量 GRADLE_USER_HOME 来更改它。例如，在我们的环境中，我们将 gradle 缓存放在本地 SSD 磁盘上，而不是我们挂载的 NFS ~/.

第三种选择是将每个作业工作区用作 gradle 用户主页。这是通过在 Jenkins 作业配置中标记复选框“强制 GRADLE_USER_HOME 使用工作区”来完成的。如果您的作业始终在同一台机器上运行并且您在每次构建后不删除工作区，这将非常有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-17T00:45:53.893

从命令行（在项目文件夹中）运行 ./gradlew clean 似乎为我清除了它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-23T19:00:13.113

`C:\Users\John\.gradle\caches\2.4\scripts>del /S *.lock`使用Win命令提示符为我做了诀窍（那里有很多.lock）。`rm`应该对类 Unix 系统做同样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-10T10:05:12.133

如果上述方法均无效，您可以删除缓存文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-10T01:58:23.877

在更新到 Tools for Apache Cordova v7 后，我在 Visual Studio 2015 中得到了这个。

只是删除上面的 .lock 文件并没有帮助。

我还必须删除平台文件夹。此文件夹与您的 www 文件夹处于同一级别（不是 VS 将其添加到 .gitignore）。

然后构建，删除 .lock 文件，删除整个 cache_* 文件夹，冲洗，重复直到构建成功。

# c# - 使用 MVVM 显示枚举等值字符串值

> ID：14104088
> 
> 赞同：5
> 
> 时间：2012-12-31T16:52:22.570
> 
> 标签：c#, wpf, data-binding, mvvm, enums

我的目标是绑定与我的枚举相等的字符串。

```
 public enum Language
    {
        Unknown=0,CSharp=1,VB=2,VisualCpp=3,FSharp=4
    }

    public enum ProjectType
    {
        Unknown=0,ConsoleApplication=1,ClassLibrary=2
    } 
```

这是我的模型：

```
 class PLanguage
  {
    public Language EnumLanguage { get; set; }
    public string ImagePath { get; set; }
    public List<ProjectType> EnumTypes { get; set; }

  } 
```

我的视图模型：

```
 class PLanguageViewModel : ViewModelBase
  {

    public PLanguage PLanguage { get; set; }
    private ObservableCollection<string> _typeCollection;
    public PLanguageViewModel(PLanguage pLanguage)
    {
        PLanguage = pLanguage;
    }
            public ObservableCollection<string> TypeCollection
    {
        get{} //CAST PLanguage.EnumTypes FROM ENUM TO STRING
    }
    public string ImagePath
    {
        get { return PLanguage.ImagePath; }
        set
        {
            if (PLanguage.ImagePath != value)
            {
                PLanguage.ImagePath = value;
                RaisePropertyChanged(() => ImagePath);
            }
        }
    }
    public static String ConvertToString(Enum eEnum)
    {
        return Enum.GetName(eEnum.GetType(), eEnum);
    }

  } 
```

如您所见，我有一个 ProjectType 类型的枚举列表。我想将这些转换为与枚举值相等的可观察字符串集合，因此我可以在我的视图中轻松地对它们进行数据绑定。我需要创建该集合的依赖属性，我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T16:56:47.543

您可以使用[Enum.GetNames](http://msdn.microsoft.com/en-us/library/system.enum.getnames.aspx)获取数据绑定的所有值和[ObservableCollection 构造函数重载](http://msdn.microsoft.com/en-us/library/cc679169.aspx)。

```
public PLanguageViewModel(PLanguage pLanguage)
{
    PLanguage = pLanguage;
    _typeCollection = new ObservableCollection<string>(Enum.GetNames(typeof(ProjectType)));
   ...
} 
```

您可以使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/system.enum.parse.aspx)`ProjectType`从 observable 集合 中检索。

**根据评论**编辑**`SelectItem`使用以下将字符串绑定到. `SelectedItem`现在您可以在视图中使用 DataBinding 。您也可以使用[IValueConverter实现相同的目的](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)**

 **```
private ProjectType _selectedItem'

public string SelectedItem
{
   get
    {
      return ConvertEnumToString(_selectedItem);
    }
    set
    {
      _selectedItem = ConvertStringToEnum(value);
    }
}

public static string ConvertEnumToString(Enum eEnum)
{
    return Enum.GetName(eEnum.GetType(), eEnum);
}

public static ProjectType ConvertStringToEnum(string value)
{
    return (ProjectType)Enum.Parse(typeof(ProjectType), value);
} 
```**

# doctrine-orm - Doctrine2：第一个 OneToMany 关系有效，第二个无效？

> ID：14104089
> 
> 赞同：0
> 
> 时间：2012-12-31T16:52:36.813
> 
> 标签：doctrine-orm, one-to-many, many-to-one

我有一个包含两个 OneToMany 关系的类。这是sql squema ![在此处输入图像描述](../Images/b2f677df16a818d50b566e31089b673b.png)

这里是不同的类。
**电影**

```
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="movies")
 * @property bigint $id
 * @property date $date
 * @property int $revision
 * @property string $original_title
 * @property string $thumbnail
 * @property string $plot
 */
class Movie {
    /**
    * @ORM\Id
    * @ORM\Column(type="bigint");
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    protected $id;

    /**
    * @ORM\Column(type="date")
    */
    protected $date;

    /**
    * @ORM\Column
    * @ORM\Column(type="integer");
    */
    protected $revision;

    /**
    * @ORM\Column(type="string")
    */
    protected $original_title;

    /**
    * @ORM\Column(type="string")
    */
    protected $thumbnail;

    /**
    * @ORM\Column(type="string")
    */
    protected $plot;

    /**
     * @ORM\OneToMany(targetEntity="Exhibition", mappedBy="movie", cascade={"ALL"})
     */
    protected $exhibitions;

    /**
     * @ORM\OneToMany(targetEntity="Category", mappedBy="movie", cascade={"ALL"})
     */
    protected $categories;
} 
```

**展览**

```
/**
* @ORM\Entity
* @ORM\Table(name="exhibitions")
* @property bigint $id
* @property string $title
* @property string $type
*/
class Exhibition
{

    /**
    * @ORM\Id
    * @ORM\Column(type="bigint");
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    protected $id;

    /**
    * @ORM\Column(type="string")
    */
    protected $title;

    /**
    * @ORM\Column(type="string")
    */
    protected $type;

    /**
     * @ORM\OneToMany(targetEntity="Schedule", mappedBy="exhibition", cascade={"ALL"})
     */
    protected $schedules;

    /** @ORM\ManyToOne(targetEntity="Movie", inversedBy="exhibitions") 
     *  @ORM\JoinColumn(name="movie", referencedColumnName="id", onDelete="CASCADE")
     */
    private $movie;

    /** @ORM\ManyToOne(targetEntity="Cinema", inversedBy="exhibitions") 
     *  @ORM\JoinColumn(name="cinema", referencedColumnName="name", onDelete="CASCADE")
     */
    private $where;
} 
```

**类别**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="categories")
 * @property string $name
 */
class Category {
    /**
    * @ORM\Id
    * @ORM\Column(type="id")
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    protected $name;

    /** 
     *  @ORM\ManyToOne(targetEntity="Movie", inversedBy="categories")
     *  @ORM\JoinColumn(name="movie", referencedColumnName="id", onDelete="CASCADE")
     */
    protected $movie;
} 
```

如您所见，展览和类别都是 Movie 类中的 OneToMany/ManyToOne 关系。展览部分工作正常，但护理部分没有。

每当我尝试使用，例如：$movies[0]->categories，我都会收到内部服务器错误。但对于展览来说，一切都很好。

我在这里想念什么？这是我设置的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T04:21:32.240

可能是因为您的类别主键与您的数据模型不匹配。这里的变量应该是 $id 而不是 $name。

```
/**
* @ORM\Id
* @ORM\Column(type="id")
* @ORM\GeneratedValue(strategy="AUTO")
*/
protected $name; 
```

# android - 有没有办法在android中按图像设置动作栏背景？

> ID：14104091
> 
> 赞同：3
> 
> 时间：2012-12-31T16:52:45.737
> 
> 标签：android, background, bitmap, android-actionbar, bitmapfactory

我需要将操作栏的背景更改为自定义图像，但每次我尝试使用此代码时都不会改变任何东西。

```
Bitmap b =  BitmapFactory.decodeResource(getResources(), R.drawable.navbarbg);
BitmapDrawable bd = new BitmapDrawable(getResources(), b);
bar.setBackgroundDrawable(bd); 
```

我也试过这段代码，但没有用。

```
Resources res = getResources();
xpp =res.getXml(R.drawable.actionbar_background);
bitmapDrawable = (BitmapDrawable) BitmapDrawable.createFromXml (res, xpp); 
```

actionbar_background.xml 的内容是

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/navbarbg"
android:tileMode="repeat" /> 
```

编辑：我使用了这段代码，效果很好：

```
Bitmap bMap = BitmapFactory.decodeResource(res, R.drawable.action_bar_bg);
BitmapDrawable actionBarBackground = new BitmapDrawable(res, bMap);
ActionBar bar = getActionBar();
bar.setBackgroundDrawable(actionBarBackground); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T12:37:11.797

我使用了这段代码，效果很好：

```
Bitmap bMap = BitmapFactory.decodeResource(res, R.drawable.action_bar_bg);
BitmapDrawable actionBarBackground = new BitmapDrawable(res, bMap);
ActionBar bar = getActionBar();
bar.setBackgroundDrawable(actionBarBackground); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T17:14:01.170

你可以通过玩`styles.xml.`Here is a detail [explain](https://stackoverflow.com/questions/10352022/how-to-set-title-color-in-actionbarsherlock)来做到这一点。查看标记的答案。它是为 actionbarsherlock 解释的。但是方法是一样的。如果您需要更多详细信息。请参阅此[链接](http://developer.android.com/guide/topics/ui/actionbar.html#AdvancedStyles)，该链接也由其他回答者提供。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="MyTheme" parent="@android:style/Theme.Holo">
        <!-- Here you are including your actual custom theme in which your own things are defined --> 
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <!-- other activity and action bar styles here -->
    </style>

    <!-- style for the action bar background which is named as "MyActionBar. The same name is being used in the above style." -->
    <style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar"> 
        <item name="android:background">@drawable/actionbar_background</item>
    </style>
</resources> 
```

不要忘记在清单文件中包含这个自定义主题，如下所示，以便在整个应用程序中生效。

```
<application android:theme="@style/MyTheme" /> 
```

如果您希望它仅用于特定活动，您甚至可以将这个主题包含在活动中。希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-06T15:32:48.237

```
getActionBar().setBackgroundDrawable(
    getResources().getDrawable(R.drawable.navbarbg)); 
```

# actionscript-3 - 将组件中的arraycollection分配为主应用程序中数据网格的数据提供者

> ID：14104093
> 
> 赞同：1
> 
> 时间：2012-12-31T16:53:08.437
> 
> 标签：actionscript-3, apache-flex, flex4.6, advanceddatagrid, arraycollection

嗨，我有一个简单的（我认为）问题。我在 Flex 4.6 中有以下自定义组件（部分代码）。

```
<fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:ArrayCollection id="acItems"/>
        <s:ArrayCollection id="acOrder" source="{orderItems.source}"/>
    </fx:Declarations>
    <fx:Script>     
        <![CDATA[
            [Bindable]
            public var orderItems:ArrayCollection = new ArrayCollection();

            private function addToOrder():void
            {
                orderItems.addItem(itemGrid.selectedItem);
            }
        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="itemGrid" dataProvider="{acItems}" width="100%" height="100%" borderVisible="false" click="addToOrder()">
        <mx:columns>
            <mx:AdvancedDataGridColumn width="200" dataField="omschrijving" headerText="omschrijving"/>
            <mx:AdvancedDataGridColumn dataField="prijs" headerText="prijs"/>
        </mx:columns>
    </mx:AdvancedDataGrid> 
```

所以每当我点击一个项目时，它都会被添加到一个数组集合中。

现在我在我的主应用程序中调用这个组件。它充满了来自数据库的数据。这一切都很好，所以我认为解决我的问题不需要代码:)

```
<components:Items acItems="{acItems}"/> 
```

在这个组件旁边，我的主应用程序中有另一个数据网格。这个应该填满我在自定义组件中创建的数组集合。但我不知道如何将此数组集合指定为数据网格的数据提供者。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:52:07.210

最简单的方法是在两个视图中注入一个 ArrayCollection。如果您使用像 RobotLegs 这样的 MVC 框架，那么框架将强制执行这些设计原则（除非您没有以错误的方式使用）。

实际上，我建议学习 MVC，而不要仅仅依赖 Adob​​e 的简化示例。

# php - 表单不提交数据

> ID：14104095
> 
> 赞同：1
> 
> 时间：2012-12-31T16:53:16.580
> 
> 标签：php, cakephp

我目前正在使用 CakePHP，但我遇到了一个不能将数据提交到我的数据库的表单的问题。没有错误消息，当我调试时，表单数据似乎已添加到数组中（见附图）。

这是我的模型：

类拆分扩展 AppModel {

```
public $validate = array(
    'title' => array('rule' => 'notEmpty'),
    'url' => array('rule' => 'notEmpty'),
    'descr' => array('rule' => 'notEmpty')
); 
```

这是我的观点：

```
<h1>Add New Case</h1>

<?php
pr($this->request->data);
echo $this->Form->create('Split');
echo $this->Form->input('title');
echo $this->Form->input('url');
echo $this->Form->input('descr', array('rows' => '2'));
echo $this->Form->end('Add New Case');
?> 
```

这是控制器中的添加功能：

```
public function add() {

    if ($this->request->is('split')) {

        $this->Split->create();
        if ($this->Split->save($this->request->data)) {
            $this->Session->setFlash('Your case has been saved.');
            $this->redirect(array('action' => 'index'));

        } else {
            $this->Session->setFlash('Unable to add case.');
        }
    }

} 
```

按下提交后数据被插入到Split数组中，但是表单没有提交：

![按提交后](../Images/76c80ed664846690c84b045bf141fcad.png)

这是呈现出来的 HTML：

```
<form action="/uilab/splits/add" id="SplitAddForm" method="post" accept-charset="utf-8">

<div style="display:none;"><input type="hidden" name="_method" value="POST"></div>

<div class="input text required">

    <label for="SplitTitle">Title</label>

    <input name="data[Split][title]" maxlength="255" type="text" value="Some title" id="SplitTitle"></div>

    <div class="input text required">
        <label for="SplitUrl">Url</label>
        <input name="data[Split][url]" maxlength="255" type="text" value="http://www.someurl.com" id="SplitUrl">
    </div>

    <div class="input textarea required">
        <label for="SplitDescr">Descr</label>
            <textarea name="data[Split][descr]" rows="2" cols="30" id="SplitDescr">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</textarea>
        </div>

    <div class="submit"><input type="submit" value="Add New Case"></div>

</form> 
```

我对 CakePHP 还很陌生，因此非常感谢任何有关如何解决此问题的想法。

哦，顺便说一句，新年快乐！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:48:38.270

```
if ($this->request->is('split')) { 
```

应该

```
if ($this->request->is('post')) { 
```

阅读有关[请求处理](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)的信息。

请求永远不会`split`，因此代码永远不会被执行。有效值为`post, get, put`...

# asp.net - ASP.NET HttpUtility.HtmlEncode 如何修改白名单字符

> ID：14104099
> 
> 赞同：-1
> 
> 时间：2012-12-31T16:53:54.473
> 
> 标签：asp.net

我有一个这样的字符列表：

白名单：“ABCDEFGHIJKLMNOPQRSTUVQXYZ&,;”()@$%-_+。

我想编写一个函数来编码字符串中除这些字符之外的所有字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:57:01.023

如果您确实想要更改 的功能`HttpUtility.HtmlEncode`，则需要创建自己的`HttpEncoder`.

[HttpEncoder 类](http://msdn.microsoft.com/en-us/library/system.web.util.httpencoder.aspx)-**备注**部分解释了如何设置您的网站以`HttpEncoder`在`HttpUtility`、`HttpServerUtility`和`HttpResponseHeader`.

**编辑**

回应*“我可以修改 HttpUtility 中的白名单字符吗？”*

不。在内部实现默认`HttpEncoder`调用`WebUtility.HtmlEncode`，而默认调用又调用`WebUtility.IndexOfHtmlEncodingChars`. 此方法使用一组硬编码值，因此您无法修改白名单字符。您需要编写自己的`HttpEncoder`课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:58:22.433

老实说，我认为这是一个非常糟糕的主意，但只是为了挑战......

```
Public Function fnsHTMLEncodeExcept(pvsStringToEncode As String, pvsCharactersNotToEncode As String) As String
    Dim voEncodedString As New Text.StringBuilder

    For viPosition As Integer = 0 To (pvsStringToEncode.Length - 1)
        Dim vsChar As String = Mid(pvsStringToEncode, viPosition, 1)
        If InStr(pvsCharactersNotToEncode, vsChar) > 0 Then voEncodedString.Append(vsChar) Else voEncodedString.Append(HttpUtility.HtmlEncode(vsChar))
    Next
    Return voEncodedString.ToString
End Function 
```

但是，我不知道您将如何对其进行 HtmlDecode ... 我不会问您为什么需要这种功能。

# javascript - 来自 Eclipse 插件的 Eunning JsTestDriver 服务器

> ID：14104106
> 
> 赞同：2
> 
> 时间：2012-12-31T16:54:55.490
> 
> 标签：javascript, eclipse, js-test-driver

我有 eclipse Juno（新安装）并安装了 JsTestDriver 插件 1.3.4.e。我有一个项目，沙盒，有 src、lib 和 src-test 目录；我有 JsTestDriver 的示例文件：src 中的*Greeter.js*，src-test 中的*GreeterTest.js 。*我的*jsTestDriver.conf*是：

```
server: http://localhost:42442

load:
  - src/*.js
  - src-test/*.js

test:
  - src-test/*.js 
```

这是在“沙盒”项目文件夹中。我已经转到 Windows / Preferences 并设置（相同的）端口号和 Internet Explorer 的路径。

当我单击绿色三角形运行服务器时，它会使用“等待”光标执行 15-20 秒，然后出现“JS 测试驱动程序”错误对话框，显示“原因：在 42442 上启动服务器时出错” .

我可以从命令行运行 JsTestDriver 示例；我将默认目录设置为沙盒文件夹，通过为 jsTestDriver.jar 指定 lib 目录来运行服务器，然后从不同的 CMD 窗口运行测试，这似乎适用于我拥有的一个测试。我必须先杀死 eclipse，因为显然它的错误使服务器运行，因此端口被占用。

所以首先我想知道我做错了什么我的eclipse插件不起作用。

其次，我想知道如何在不杀死整个 Eclipse IDE 的情况下终止服务器。

# facebook - fb:iframe 在 Facebook 应用画布中不起作用？

> ID：14104108
> 
> 赞同：0
> 
> 时间：2012-12-31T16:55:07.737
> 
> 标签：facebook, heroku, facebook-iframe

我正在制作一个 Flash facebook 应用程序。我尝试使用 fb:swf 和 fb:iframe 但画布中没有 swf 对象。我正在使用 Heroku。

这是我在 index.php 中 body 标记之间的 iframe 代码：

```
 <fb:iframe src="https://myappname.herokuapp.com/ifrm.html" width="700" height="425" frameborder="0" scrolling="no"></fb:iframe> 
```

当我在浏览器中运行 ifrm.html 时，swf 运行良好（我在 ifrm.html 中嵌入了 swf 代码）。但是在画布中，它不起作用。

# python - 一个部分适用于所有部分的条件

> ID：14104113
> 
> 赞同：0
> 
> 时间：2012-12-31T16:55:54.463
> 
> 标签：python, python-2.5

我已尝试多次修复此问题，但仍然无法找出问题所在。这个想法是给每个“用户”一个不同的“密码”，这将让他们访问我将构建的其他东西，或者如果密码错误则结束程序。

但是，每当我尝试为用户分配与顶级用户不同的密码时（如下例所示），它仍然认为用户 1 的密码是其他所有用户的密码。

那么是什么原因造成的，我该如何解决呢？

```
print "Enter your name."

answer = raw_input()

if answer == "User 1":
    print "Hello.Please enter your passcode."

    answer = raw_input()

    if answer == "orion":
        print "Login request accepted. Welcome to The Database."
    elif answer != "orion":
        print "LOGIN DENIED. Your intrusion has been reported to the authorities."

elif answer == "User 2":
    print "Hello.Please enter your passcode."

    answer = raw_input()

    if answer == "bandit":
        print "Login request accepted. Welcome to The Database."
    elif answer != "bandit":
        print "LOGIN DENIED. Your intrusion has been reported to the authorities." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:40:04.423

# 两个例子

我给你两个例子来说明如何做到这一点（毕竟是元旦）:)

## 程序守则

您的代码有效，但您可能想尝试一下，更简洁一点：

```
users = {"User 1" : { 'pwd' : 'bandit', 'role': 'admin'},
         "User 2" : { 'pwd' : 'orion', 'role': 'user'},
         "User 3" : { 'pwd' : 'solar', 'role': 'approver'},
         "User 4" : { 'pwd' : 'mars', 'role': 'editor'}
         }

print "Enter your name."
answer = raw_input()

INTRUSION = True

if answer in users:
    print "Hello %s. Please enter your passcode." % answer
    password = raw_input()
    if password == users[answer]['pwd']:
        INTRUSION = False

if INTRUSION:
    print "LOGIN DENIED. Your intrusion has been reported to the authorities."
else:
    print "Login request accepted. Welcome to The Database."
    print "Your role is %s." % users[answer]['role']
    # ...you can now go on to do other stuff 
```

它允许您参考用户字典并为他们分配不同的角色。您可能会发现在此版本上进行扩展更容易。

## 面向对象的例子

一个更扩展的示例使用更面向对象的方法：

```
from collections import namedtuple
import hashlib

# ---------------------------- SETUP 

# data structure for holding user record in named fields
User = namedtuple('User', ['uid', 'pwd', 'role'])

# utility function to hash passwords and ensure they are
# stored in encrypted form
def hashed(s):
    return hashlib.md5(s).hexdigest()

# Class to hold the user database
# Methods could be added here e.g. add and delete users
class UserBase(object):
    def __init__(self, users={}):
        self.database = {}
        for user in users:
            self.database[user.uid] = user

    def get_user(self, uid):
        return self.database.get(uid)

# These should be stored in a database with
# hashed passwords...
users = [User("User 1", hashed('bandit'), 'admin'),
         User("User 2", hashed('orion'), 'user'),
         User("User 3", hashed('solar'), 'approver'),
         User("User 4", hashed('mars'), 'editor')]

# Instantiate the database
USERS = UserBase(users)

# ---------------------------- SETUP ENDED

# Simulate a login session

INTRUSION = True
uid = raw_input("Enter your name: ")

user = USERS.get_user(uid)
if user:
    prompt = "Hello %s. Please enter your passcode: " % user.uid
    password = raw_input(prompt)
    if hashed(password) == user.pwd:
        INTRUSION = False

if INTRUSION:
    print "LOGIN DENIED. Your intrusion has been reported to the authorities."
else:
    print "%s logged in. Welcome to The Database." % user.uid
    print "Your role is %s." % user.role
    # ...you can now go on to do other stuff
    # there is an object called user that has
    # three attributes: uid, pwd, and role 
```

# php - PHP 我的 PHP 读取行名而不是 其值

> ID：14104115
> 
> 赞同：-2
> 
> 时间：2012-12-31T16:55:58.613
> 
> 标签：php, html, mysql

为网站创建留言簿，我使用 while 循环从表中获取行，当我使用 echo 时，它返回行的名称而不是存储在其中的实际内容。我不知道我做错了什么。这是PHP：

```
 <?php

if(mysql_connect('localhost','root','')&& mysql_select_db('m_database')){
$time= time();
$errors =array();

if (isset($_POST['guestbook_name'],$_POST['guestbook_email'],$_POST['guestbook_message'])){

    $guestbook_name = mysql_real_escape_string(htmlentities($_POST['guestbook_name']));
    $guestbook_email = mysql_real_escape_string(htmlentities($_POST['guestbook_email']));
    $guestbook_message = mysql_real_escape_string(htmlentities($_POST['guestbook_message']));

    if ( empty($guestbook_name) || empty($guestbook_email) || empty ($guestbook_message)) {
        $errors[]='all fields must be completed.';
    }

if (strlen($guestbook_name)>25 || strlen($guestbook_email)>255 || strlen($guestbook_message)>255) {
    $errors= 'some of your fields exceeded the character limit, please double check.';
}
if ( empty($errors)){
    $insert = "INSERT INTO guestbook VALUES('','$time','$guestbook_name','$guestbook_email','$guestbook_message') ";

        if ( mysql_query ($insert)) {
            header('location: '.$_SERVER['PHP_SELF']);//redirect the user back to the same page, for spam purposes
        }else {
            $errors[] ='something is not working please try again';
        }

    }else{
    foreach ($errors as $error){
        echo'<p><strong>'.$error.'</strong></p>';
        }
    }

}
//set values form the form
//displaying the data
//using a while loop to display data on page
$entries =mysql_query("SELECT 'timestamp','name','email','message' FROM 'guestbook' ORDER BY 'timestamp'DESC");
if (mysql_num_rows($entries)==0){
    echo 'no entries found';

}else {
    while($entries_row = mysql_fetch_assoc($entries)){
        $entries_timestamp =$entries_row['timestamp'];
        $entries_name =$entries_row['name'];
        $entries_email =$entries_row['email'];
        $entries_message =$entries_row['message'];

            echo entries_name.'<br>';
                  echo $entries_message. '<br>';
                echo $entries_email. '<br>';
        }
    }

    } else {
    echo 'could not connect to database';
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:02:08.413

我根据变量名猜测，因为您没有包含有关表的信息或使用的查询。您要查找的内容是否存储在“消息”列中？如果是这样，您正在回显错误的变量。尝试检查 $entries_message 变量。

更新：

现在您已经发布了完整的查询，我看到了问题。问题是您已将所需的列括在引号中。这告诉 MySQL 查询引擎返回这些字符串，但实际上并不返回列数据。从 SELECT 子句中删除引号，它应该可以按预期工作。

带有查询的行应为：

```
$entries = mysql_query( "SELECT timestamp, name, email, message FROM guestbook ORDER BY timestamp DESC" ); 
```

# html - “提交”按钮的样式

> ID：14104120
> 
> 赞同：10
> 
> 时间：2012-12-31T16:56:55.477
> 
> 标签：html, css

我想知道是否有人知道为什么“提交”按钮的“默认”样式看起来相当不错（角落略微圆润，从上到下有一些渐变等）但是当我添加背景颜色时，它会变成 1990 年代的时代带有 2px 边框的方形按钮......看起来很糟糕。

我可以以某种方式保留大部分默认样式但更改背景颜色吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:15:06.413

浏览器带有一大组默认样式，如果网站未设置样式，则可以使它们看起来很漂亮。例如，Firefox 为默认提交按钮定义了以下样式：

```
input[type="submit"] {
    -moz-appearance: button;
    -moz-binding: none;
    -moz-box-sizing: border-box;
    -moz-user-select: none;
    background-color: buttonface;
    border: 2px outset buttonface;
    color: buttontext;
    cursor: default;
    font: -moz-button;
    line-height: normal;
    padding: 0 6px;
    text-align: center;
    text-shadow: none;
    white-space: pre;
} 
```

[`-moz-appearance`](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)是一个非标准属性，它将样式定义为与操作系统的默认按钮样式一致。这就是为什么它在不同的操作系统上看起来也会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:21:55.130

只需一点 CSS，您就可以制作漂亮的按钮。查看这些参考资料：

[http://webdesignerwall.com/tutorials/css3-gradient-buttons](http://webdesignerwall.com/tutorials/css3-gradient-buttons)

[http://css3button.net/](http://css3button.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T17:02:18.183

“问题”是默认背景是一个相当复杂的渐变。

我建议你使用像[jQuery UI](http://jqueryui.com/themeroller/)或[Bootstrap](http://twitter.github.com/bootstrap/base-css.html#buttons)这样的框架来设计你的按钮。这比在自己的背景渐变中搜索按钮要容易得多，并且您可能会获得更好的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T17:03:12.503

您的（现代）浏览器（或[类似 bootstrap 的 css 框架](http://twitter.github.com/bootstrap/)）包含提交按钮的默认样式（因此它看起来`"pretty good (corners slightly rounded, some gradient from top to bottom, etc.)"`不像 1990 年的按钮）。

当您在 css 中覆盖这些渐变时（通过更改`background-color`），您将覆盖浏览器使用的那些编程默认值。您可以制作自己的漂亮渐变，而不仅仅是更改背景颜色。**而且**，正如@ŠimeVidas 在评论中指出的那样，更改背景颜色也将删除默认值`border-style`。

我建议[使用渐变生成器](http://www.cssdrive.com/css3button/)，而不是简单地更改`background-color`.

# php - 如何为本地服务器中的子文件夹设置虚拟主机以管理脚本中的相对路径？

> ID：14104122
> 
> 赞同：1
> 
> 时间：2012-12-31T16:57:04.093
> 
> 标签：php, apache

我正在使用 wamp 服务器。我所有项目的域名都是 http:localhost/

项目位于子文件夹中。例如：http:localhost/project-a/

我想将 http:localhost/project-a/ 设置为项目域，以便我可以轻松管理相对路径。

每当我使用相对路径或服务器 URI 时，我需要在本地服务器的相对路径或其他路径中包含子文件夹，并在传输到实时服务器时将其删除。当我经常为许多项目更新脚本时，这些都是非常痛苦的。

我想我可以使用 apache 配置将它们设置为域。我不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:20:54.710

在本地主机文件中，定义以下内容：

```
127.0.0.1 projecta.example.com 
```

然后，使用 Apache 的虚拟主机工具，为该域定义一个虚拟主机：

```
<VirtualHost *:80>
    ServerAdmin admin@projecta.example.com
    DocumentRoot "/www/project-a/public_html"
    ServerName projecta.example.com
    <IfModule env_module>
        SetEnv CanonicalName projecta.example.com
    </IfModule>
    ErrorLog "/logs/project-a/apache_error.log"
    CustomLog "/logs/project-a/apache_access.log" combined
    <IfModule rewrite_module>
        RewriteLog "/logs/project-a/apache_rewrite.log
        RewriteLogLevel 4
    </IfModule>
</VirtualHost>

<Directory "/www/project-a/public_html">
    Options FollowSymLinks Includes
    AllowOverride all

    Order Allow,Deny
    Allow from all
</Directory> 
```

... 或与您的本地设置兼容的东西。有关设置虚拟主机的帮助，请参阅[Apache 虚拟主机文档](https://httpd.apache.org/docs/2.2/vhosts/)。

你最终得到的是 projecta.example.com 解析到“托管”项目的“服务器”（实际上是虚拟服务器）的根目录。然后，您将停止`http://localhost/project-a`用作 URL，并开始使用`http://projecta.example.com`（或您设计的任何 URL）。您可能需要稍微重构当前目录，因为您似乎是从一台根服务器运行本地测试环境。

请注意，以上不是一个完整的解决方案，但旨在帮助您入门。上面的某些内容可能特定于我的设置，您不需要或需要更改。您还需要在您的 Apache 服务器中配置/启用其他一些东西，以使其全部正常工作——其中一些取决于您的本地环境和/或要求。

# web-applications - 提供对 Web 应用程序的限制性访问

> ID：14104123
> 
> 赞同：0
> 
> 时间：2012-12-31T16:57:32.863
> 
> 标签：web-applications, hosting

我想提供对 Web 应用程序的限制性访问，普通用户将看到“即将推出”页面，但开发人员可以访问该应用程序并测试他们的代码。
是否对不同的应用程序服务器保持警惕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:43:06.180

> 但开发人员可以访问应用程序并测试他们的代码

我能想到的最简单的方法是进行基于 IP 的过滤，假设开发人员工作并尝试从同一个 LAN 访问服务器（不通过某些公共路由器）。
您可以有某种过滤器，根据 IP 可以重定向到`Coming Soon`页面或 Web 应用程序

# scala - 返回最具体类型的函数

> ID：14104126
> 
> 赞同：1
> 
> 时间：2012-12-31T16:57:57.120
> 
> 标签：scala, functional-programming, higher-order-functions

我想要一个高阶函数`Function[K=>V, K=>V]`，它接受一个函数`K=>V`并返回给定函数的类型。例如，我希望有以下行为：

```
 class Foo[K, V]() {
    def apply[K1 <: K, V1 <: V](f: K1 => V1) = f
  }

  // dummy class hierachy
  class A
  class B extends A
  class C extends B

    // a function f: B=>B
  def f(some: B): B = some

  // the desired result
  val result1: B => B = new Foo[A, A]()(f) 
```

apply 方法`Foo`接受 a`B=>B`并返回 a `B=>B`。类型参数`K`和`V`跟踪“最高”类型`Foo`可以作为参数。现在，我想`Foo`扩展功能

```
 class Bar[K, V] extends Function[K=>V, K=>V]() {
    def apply(f: K => V) = f
  }

  val result2: B => B = new Bar[A, A]()(f) 
```

但这显然不起作用。有没有办法使这项工作？谢谢

**编辑**

```
 class Fuzz[K, V, K1 <: K, V1 <: V] extends Function[K1=>V1, K1=>V1] {
    def apply(f: K1 => V1) = f
  }

  val result3: B => B = new Fuzz[A, A, B, B]()(f) 
```

也可以，但是我不想携带两个额外的类型参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:05:16.653

这不能也不应该起作用，因为`A => A`它不是`B => B`（也不是超类型）的子类型。原因是 Function1 的参数类型是协变的，结果类型是逆变的。因此，`A => A`要成为 的子类型`B => B`，`A`就必须是 的子类型*和*超类型`B`。只有当`A`并且`B`实际上是同一类型时，才会出现这种情况。[有关方差的更深入解释，](http://www.scala-lang.org/node/129)请参阅 Scala 之旅。

# javascript - 输入更改后立即运行函数

> ID：14104127
> 
> 赞同：1
> 
> 时间：2012-12-31T16:57:57.410
> 
> 标签：javascript, jquery, input, twitter-bootstrap, bootstrap-typeahead

> **可能重复：**
> [bootstrap-typeahead.js 在选择事件上添加一个监听器](https://stackoverflow.com/questions/9496314/bootstrap-typeahead-js-add-a-listener-on-select-event)

我正在使用 Twitter Bootstrap 的 typeahead 功能，我想使用`.on('change', function(){...})`，但我的问题是，事件在输入值实际更改为所选值之前触发，并且当调用函数时，函数`$(this).val()`内部返回值那是在改变之前存在的。该事件触发两次，但只有第二次触发。

我需要一种方法来运行该函数，以便它返回选定的值，并且只运行一次。

[jsFiddle](http://jsfiddle.net/DJDavid98/ZUhFy/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:37:32.607

使用更新器属性：

[http://jsfiddle.net/ZUhFy/10/](http://jsfiddle.net/ZUhFy/10/)

```
.typeahead({
        source: namelist,
        updater: function(item) {
            $('#log').append(item + '<br>');
            return item;
        }
    }); 
```

> updater 返回选中项 用于返回选中项的方法。接受单个参数，即 item 并具有 typeahead 实例的范围。[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:36:37.733

尝试

```
$('#findname').on('keyup', function() {...}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:37:05.627

### 尝试使用`keyup`

```
.on('keyup', function(){...}) 
```

# openoffice.org - 在 OpenOffice.org Writer 中以编程方式创建 SetExpression 字段

> ID：14104128
> 
> 赞同：0
> 
> 时间：2012-12-31T16:58:02.997
> 
> 标签：openoffice.org, uno

我试图在 openoffice 文档中定义“变量”，但我一定做错了什么，因为当我尝试使用字段显示变量的值时，我只得到一个空字符串。

这是我正在使用的代码（使用 Python UNO 桥）。有趣的是第二个功能。

```
import time
import subprocess
import logging
import os
import sys
import uno
from com.sun.star.text.SetVariableType import STRING

def get_uno_model(): # helper function to connect to OOo. Only interesting 
                     # if you want to reproduce the issue locally, 
                     # don't spend time on this one
    try:
        model = XSCRIPTCONTEXT.getDocument()
    except NameError:
        pass # we are not running in a macro
    # get the uno component context from the PyUNO runtime
    localContext = uno.getComponentContext()

    # create the UnoUrlResolver
    resolver = localContext.ServiceManager.createInstanceWithContext(
                                    "com.sun.star.bridge.UnoUrlResolver", localContext )

    # connect to the running office
    try:
        ctx = resolver.resolve("uno:socket,host=localhost,port=2002;"
                               "urp;StarOffice.ComponentContext")
    except:
        cmd = ['soffice', '--writer', '-accept=socket,host=localhost,port=2002;urp;']
        popen = subprocess.Popen(cmd)
        time.sleep(1)
        ctx = resolver.resolve("uno:socket,host=localhost,port=2002;"
                               "urp;StarOffice.ComponentContext")
    smgr = ctx.ServiceManager

    # get the central desktop object
    desktop = smgr.createInstanceWithContext("com.sun.star.frame.Desktop", ctx)

    # access the current writer document
    model = desktop.getCurrentComponent()
    return model

def build_variable(model, name, value):
    # find or create a TextFieldMaster with the correct name
    master_prefix = u"com.sun.star.text.fieldmaster.SetExpression"
    variable_names = set([_name.split('.')[-1] 
                          for _name in model.TextFieldMasters.ElementNames
                          if _name.startswith(master_prefix)])
    master_name = u'%s.%s' % (master_prefix, name)
    if name not in variable_names:
        master = model.createInstance(master_prefix)
        master.Name = name
    else:
        master = model.TextFieldMasters.getByName(master_name)

    # create the SetExpression field
    field = model.createInstance(u'com.sun.star.text.textfield.SetExpression')
    field.attachTextFieldMaster(master)
    field.IsVisible = True
    field.IsInput = False
    field.SubType = STRING
    field.Content = value
    return field

model = get_uno_model() # local function to connect to OpenOffice
text = model.Text
field = build_variable(model, u'Toto', 'nice variable')
text.insertTextContent(text.getEnd(), field, False) 
```

这段代码以某种方式工作（除非我删除了太多），但是如果我手动插入一个字段来显示 Toto 的值，我不会得到我期望的“nice variable”字符串，并且插入的字段没有值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:54:40.267

在创建主字段后，缺少将主字段的 SubType 属性设置为 STRING 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:18:26.873

尝试

```
field.CurrentPresentation = value 
```

让我们知道这是否解决了您的问题，谢谢。

# encoding - Android 上的 FFMPEG x264 编码 - 前瞻错误

> ID：14104129
> 
> 赞同：0
> 
> 时间：2012-12-31T16:58:02.580
> 
> 标签：encoding, ffmpeg, x264

我在 Android 上使用 FFMPEG + x264 将 YUV420 帧编码为视频文件。我在每一帧上使用以下代码对它们进行编码：

```
avcodec_encode_video2(gVideoWriteCodecCtx, &packet, pCurrentFrame, &gotPacket); 
```

在最初的几次调用中，帧缓冲区被填满并且没有被编码。当第一次编码发生时，调用 x264_lookahead_get_frames。我可以看到我的帧数组已正确填充，但第一项为 NULL。因此，在 x264_weights_analysis 中，作为 frames[p0] 获得的参考帧为 NULL，我在那里得到一个异常。

slicetype.c，“frames”中的第一帧为NULL

```
if( h->param.analyse.i_weighted_pred && b == p1 )
    {
        x264_emms();
        x264_weights_analyse( h, fenc, frames[p0], 1 );
        w = fenc->weight[0];
    } 
```

异常发生在那里， ref 是 NULL

```
static void x264_weights_analyse( x264_t *h, x264_frame_t *fenc, x264_frame_t *ref, int b_lookahead )
    {
        int i_delta_index = fenc->i_frame - ref->i_frame - 1; 
```

我肯定遗漏了一些东西，因为我确信这个编码器适用于大多数人:) 有没有人知道为什么“帧”数组中的第一帧为空？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:02:57.750

如果这可以帮助任何人，它看起来就像图书馆里的一些奇怪的东西。在lookahead.c line236 中反转这两行就完成了：

```
x264_stack_align( x264_slicetype_decide, h );
x264_lookahead_update_last_nonb( h, h->lookahead->next.list[0] ); 
```

至

```
x264_lookahead_update_last_nonb( h, h->lookahead->next.list[0] );
x264_stack_align( x264_slicetype_decide, h ); 
```

# asp.net-mvc - WebForms 3.5 和 MVC 4.0 的跨子域身份验证问题

> ID：14104131
> 
> 赞同：4
> 
> 时间：2012-12-31T16:58:13.447
> 
> 标签：asp.net-mvc, cookies, webforms, asp.net-membership, single-sign-on

我有两个实现 asp.net 成员资格提供程序的 Web 应用程序。它是一个稍微修改过的成员资格提供程序（所以它是一个自定义成员资格提供程序），但我认为这与这篇文章无关。

该应用程序在同一个域中运行，我想使用 cookie 在它们之间进行交叉身份验证。（它们在 app1.mydomain.com / app2.mydomain.com 中运行）

我正在使用两个应用程序实现相同的提供程序：

*   网络表单 3.5
*   MVC 4.5

在这两个应用程序中，我在 webconfig 中配置了相同的部分：身份验证、表单、机器密钥、成员资格、角色管理器。它们都使用自定义的成员资格和角色提供程序，这对于两个应用程序都是相同的。它们都驻留在同一个域中。每个应用程序中的身份验证都运行良好。

问题：

*   在 4.5 应用程序中，如果您登录，然后转到 3.5 应用程序并且您没有登录
*   如果您登录 3.5 应用程序，则您未登录 4.5 应用程序
*   如果您登录 4.0 应用程序，即使您之前登录过，您也会退出 3.5 应用程序，反之亦然

我做过的测试：

*   我已经设置了一个默认的 MVC 4.0/4.5 站点和一个默认的 Web Forms 4.0/4.5 站点，并且跨域 cookie 完美运行。
*   但是，当设置默认 MVC 4.0/4.5 站点和默认 Web Forms 3.5 站点时，SSO 不起作用。

这似乎是框架不兼容，或者在创建或加密 cookie 时框架之间发生了一些变化，似乎浏览器没有将一个站点创建的 cookie 发送到另一个站点。另一方面，它适用于 MVC 和 4.0/4.5 的 WebForms。

这些是每个应用程序的 web.config 部分：

MVC 4：

```
<authentication mode="Forms">
  <forms name="isep" loginUrl="~/Account/LogIn" timeout="20" protection="All" />
</authentication>

<machineKey compatibilityMode="Framework20SP2" validationKey="85A2E75F1FFEEAC971928062F844F0AFAE876B422503FCF7F80C1B84683C323049ACCC02A47D54E2E98B0422D2E3EFF1B16B7E85E8359EF6ABC52974D0EB9AA7" decryptionKey="FCD4A55D93A720914FA40EEC9599BD81BECE1490EB232DB8DD649BBB0D565194" validation="SHA1" decryption="Auto" /> 
```

网络表单 3.5：

```
<authentication mode="Forms">
  <forms name="isep" loginUrl="login2.aspx" timeout="20" protection="All" />
</authentication>

<machineKey validationKey="85A2E75F1FFEEAC971928062F844F0AFAE876B422503FCF7F80C1B84683C323049ACCC02A47D54E2E98B0422D2E3EFF1B16B7E85E8359EF6ABC52974D0EB9AA7" decryptionKey="FCD4A55D93A720914FA40EEC9599BD81BECE1490EB232DB8DD649BBB0D565194" validation="SHA1" decryption="Auto" />

<authorization>
  <deny users="?"/>
</authorization> 
```

对此有任何线索吗？

谢谢！..

即插即用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:10:28.773

尝试在 web.config 中设置元素的，如以下答案中所述`CompatabilityMode`：`MachineKey`

[升级到 ASP.NET 4.5/MVC 4 表单身份验证失败](https://stackoverflow.com/questions/12021863/upgrading-to-asp-net-4-5-mvc-4-forms-authentication-fails#answer-12061090)

* * *

**更新后**

将元素的`domain`属性设置`authentication\forms`为以下内容：

```
<authentication mode="Forms">
  <forms domain=".somedomain.com" name="isep" loginUrl="~/Account/LogIn" timeout="20" protection="All" />
</authentication> 
```

`somedomain`您的主域在哪里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T18:03:15.857

附加评论：

这些 web.config 参数是否与当前问题有冲突：

```
<add key="aspnet:UseLegacyFormsAuthenticationTicketCompatibility" value="true" /> 
<add key="aspnet:UseLegacyEncryption" value="true" /> 
<add key="aspnet:UseLegacyMachineKeyEncryption" value="true" /> 
```

或者......他们可以帮助解决问题吗？

谢谢！..

即插即用

# c# - 管理单个键的 ASP.NET 会话超时

> ID：14104138
> 
> 赞同：2
> 
> 时间：2012-12-31T16:58:56.413
> 
> 标签：c#, asp.net, session

我想以与其他密钥不同的方式管理密钥的超时。

是否可以？

我的意思是，让我们考虑两个会话密钥：“ `User`”和“ `RedirectUrl`”。我想将我的“ `User`”会话对象保留 1 小时，将“ `RedirectUrl`”会话对象保留 1 分钟。

我该如何应对这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:06:40.583

开箱即用，无法以您想要的方式使用 Session 类。您必须为此使用自己的解决方案。

`Cache`确实有一种机制允许您在一定时间后使特定对象过期，但它可能不适合您的场景，因为`Cache`它在所有会话中共享。

如果您以仍然可以区分用户的方式为键添加某种唯一标识符（例如，在每个键前添加用户 ID），您仍然可以使用 Cache 来执行此操作，但是您仍然必须考虑可伸缩性这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:00:05.430

我建议将要过期的 Session 值包装在另一个对象中：

```
[Serializable]
public class SessionUser
{
    public User User { get; set; }
    public DateTime Expires { get; set; }
}

[Serializable]
public class SessionRedirectUrl
{
    public Uri RedirectUrl { get; set; }
    public DateTime Expires { get; set; }
} 
```

如果存在使每个会话值到期的机制，则无论如何您都需要逻辑来检查到期日期。

但是，正如 Icarus 所说，您所描述的功能可能是缓存而不是会话问题。

# java - 尝试将 POST 数据从应用程序发送到服务器时，Android 应用程序强制关闭

> ID：14104140
> 
> 赞同：0
> 
> 时间：2012-12-31T16:59:05.513
> 
> 标签：java, android, eclipse

我真的是 Android 和 Java 的新手，我在 PHP 和 Web 编程方面有不错的经验。我想将一些 POST 数据从 android 发送到我的服务器（本地主机），并将其显示在服务器中。

[编辑更新日志]

这是我的代码：

```
public class NewUserActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_user);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_new_user, menu);
    return true;
}

public void addNewUser(View view) {

    EditText em = (EditText) findViewById(R.id.email);
    EditText na = (EditText) findViewById(R.id.name);
    EditText pa = (EditText) findViewById(R.id.pass);

    String e = em.getText().toString();
    String n = na.getText().toString();
    String p = pa.getText().toString();

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://localhost/mapptor/register.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("email", e));
        nameValuePairs.add(new BasicNameValuePair("name", n));
        nameValuePairs.add(new BasicNameValuePair("pass",p));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        @SuppressWarnings("unused")
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException exc) {
        Log.d("T1", "HERE1");
    } catch (IOException exc) {
        Log.d("T2", "HERE2");
    }
} 
```

问题是，当我运行它（模拟器）时，它会一直强制关闭。

所以我浏览了日志：

```
12-30 13:36:54.940: I/ActivityManager(62): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.mapptor.android/.NewUserActivity } from pid 130
12-30 13:36:54.980: I/ActivityManager(62): Start proc com.mapptor.android for activity com.mapptor.android/.NewUserActivity: pid=616 uid=10036 gids={}
12-30 13:36:56.110: I/ActivityManager(62): Displayed com.mapptor.android/.NewUserActivity: +1s133ms
12-30 13:37:02.660: W/KeyCharacterMap(116): No keyboard for id 0
12-30 13:37:02.670: W/KeyCharacterMap(116): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-30 13:37:04.240: W/KeyCharacterMap(616): No keyboard for id 0
12-30 13:37:04.240: W/KeyCharacterMap(616): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-30 13:37:04.640: D/dalvikvm(116): GC_EXTERNAL_ALLOC freed 254K, 58% free 3570K/8327K, external 7069K/7413K, paused 212ms
12-30 13:37:04.761: W/KeyCharacterMap(116): No keyboard for id 0
12-30 13:37:04.761: W/KeyCharacterMap(116): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-30 13:37:08.690: D/AndroidRuntime(616): Shutting down VM
12-30 13:37:08.690: W/dalvikvm(616): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-30 13:37:08.710: E/AndroidRuntime(616): FATAL EXCEPTION: main
12-30 13:37:08.710: E/AndroidRuntime(616): java.lang.IllegalStateException: Could not execute method of the activity
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.view.View$1.onClick(View.java:2144)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.view.View.performClick(View.java:2485)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.view.View$PerformClick.run(View.java:9080)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.os.Handler.handleCallback(Handler.java:587)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.os.Looper.loop(Looper.java:123)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-30 13:37:08.710: E/AndroidRuntime(616):  at java.lang.reflect.Method.invokeNative(Native Method)
12-30 13:37:08.710: E/AndroidRuntime(616):  at java.lang.reflect.Method.invoke(Method.java:507)
12-30 13:37:08.710: E/AndroidRuntime(616):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-30 13:37:08.710: E/AndroidRuntime(616):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-30 13:37:08.710: E/AndroidRuntime(616):  at dalvik.system.NativeStart.main(Native Method)
12-30 13:37:08.710: E/AndroidRuntime(616): Caused by: java.lang.reflect.InvocationTargetException
12-30 13:37:08.710: E/AndroidRuntime(616):  at java.lang.reflect.Method.invokeNative(Native Method)
12-30 13:37:08.710: E/AndroidRuntime(616):  at java.lang.reflect.Method.invoke(Method.java:507)
12-30 13:37:08.710: E/AndroidRuntime(616):  at android.view.View$1.onClick(View.java:2139)
12-30 13:37:08.710: E/AndroidRuntime(616):  ... 11 more
12-30 13:37:08.710: E/AndroidRuntime(616): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters.
12-30 13:37:08.710: E/AndroidRuntime(616):  at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:572)
12-30 13:37:08.710: E/AndroidRuntime(616):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
12-30 13:37:08.710: E/AndroidRuntime(616):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-30 13:37:08.710: E/AndroidRuntime(616):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-30 13:37:08.710: E/AndroidRuntime(616):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-30 13:37:08.710: E/AndroidRuntime(616):  at com.mapptor.android.NewUserActivity.addNewUser(NewUserActivity.java:61)
12-30 13:37:08.710: E/AndroidRuntime(616):  ... 14 more
12-30 13:37:08.730: W/ActivityManager(62):   Force finishing activity com.mapptor.android/.NewUserActivity 
```

我无法调试这个。可能是什么问题？

谢谢你。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:00:26.663

```
HttpPost httppost = new HttpPost("localhost/mapptor/register.php"); 
```

异常消息是：

```
Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters. 
```

根据消息很容易弄清楚：

> 本地主机/mapptor/register.php

不是有效的网址。在此处输入有效的 HTTP 网址。它会是这样的：

```
http://localhost:port/mapptor/register.php 
```

您可以通过从任何 Web 浏览器访问它来确保该 url 有效。

编辑：

在使用 android localhost 查找时，您需要在 url 中使用 10.0.2.2 而不是 localhost。10.0.2.2代表机器的loopback IP，127.0.0.1代表模拟器的loopback IP。

# java - 我的线程不适用于我的队列

> ID：14104144
> 
> 赞同：1
> 
> 时间：2012-12-31T16:59:33.967
> 
> 标签：java, multithreading, queue

我是多线程的菜鸟，所以这可能是一个愚蠢的问题；）但是我有一个线程，它使用一个队列，该队列将在线程运行时填充命令。我在这里遇到的问题是线程看不到队列中的更改，因此当我尝试访问队列中的元素时会不断返回 null。有什么帮助吗？

```
//This method will add an command to the queue
public void sendCommand( String Command )
{
  qe.add(Command);
}

public void run()
{
  while( true )
  {
    while(qe.peek() != null)
    {
      sendCommandToDevice(qe.poll());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:35:07.067

也许您的队列的实现存在某种问题；我没有其他解释为什么读取循环没有看到变化。

也就是说，这看起来是一种不好的实现方式。您的线程将在等待添加消息的任何时候“旋转”，以极快的速度消耗 CPU。您需要一些东西来通知您的读者有（可能）添加到队列中的元素，而不是连续轮询它。查找有关 Object 方法 wait 和 notifyAll 的教程；基本思想是您的阅读器线程在对象上执行等待，并暂停线程，直到它再次使用 notifyAll 启动。整个课程对于一个 SO 答案来说太大了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:02:43.303

假设这是 Java 或 C#，您应该将 Queue 标记为`volatile`. 这将强制并发运行的线程在每次尝试访问队列时重新检查队列的值，而不是缓存对象。

如果您想了解更多信息，[这篇文章](http://jeremymanson.blogspot.com/2008/11/what-volatile-means-in-java.html)很好地解释了关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T08:10:47.607

使用线程安全队列，例如[任何`BlockingQueue`实现](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，它应该可以解决您的问题。

# asp.net-web-api - 在 asp.net web api 中发现了多个与请求匹配的操作

> ID：14104148
> 
> 赞同：2
> 
> 时间：2012-12-31T17:00:07.850
> 
> 标签：asp.net-web-api, routes

我正在开发“ [Code Camper](https://github.com/obkalu/SPA-CodeCamper/tree/master/CodeCamper) ”示例 SPA 应用程序。我在安装了 MVC 4 的 VS 2010 上运行该应用程序。但是我遇到了 LookupsController 的问题。

这是我得到的错误：

```
 "exceptionMessage":"Multiple actions were found that match the request: \r\nSystem.Collections.Generic.IEnumerable`1[CodeCamper.Model.Room] GetRooms() on type
 CodeCamper.Controllers.LookupsController\r\nSystem.Collections.Generic.IEnumerable`1[CodeC
amper.Model.TimeSlot] GetTimeSlots() on type 
CodeCamper.Controllers.LookupsController","exceptionType":"System.InvalidOperationException
","stackTrace":"   at System.Web.Http.Controllers.ApiControllerActionSelector.ActionSelectorCacheItem.SelectActio
n(HttpControllerContext controllerContext)\r\n   at 
System.Web.Http.Controllers.ApiControllerActionSelector.SelectAction(HttpControllerContext 
controllerContext)\r\n   at 
System.Web.Http.ApiController.ExecuteAsync(HttpControllerContext controllerContext, 
CancellationToken cancellationToken)\r\n   at 
System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage 
request, CancellationToken cancellationToken)\r\n   at 
System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, 
CancellationToken cancellationToken)" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:17:38.630

我找到了答案！

当你创建一个 web api 项目时，默认情况下 global.asax.cs 中有这行代码

WebApiConfig.Register(GlobalConfiguration.Configuration);

我删除了它（正如我从 codecamper 的源代码中看到的那样），现在没有问题了！但我不知道为什么

# c# - 如何动态指定 List<> 函数的类型？

> ID：14104152
> 
> 赞同：6
> 
> 时间：2012-12-31T17:00:26.557
> 
> 标签：c#, list, types, datagridview

我有一些代表数据库表的类，要在 a 上加载每个表的行`DataGridView`，我有一个`List<>`函数，它在循环内从该表中获取所有行。

```
public List<class_Table1> list_rows_table1()
{
    // class_Table1 contains each column of table as public property
    List<class_Table1> myList = new List<class_Table1>();

    // sp_List_Rows: stored procedure that lists data
    //   from Table1 with some conditions or filters
    Connection cnx = new Connection;
    Command cmd = new Command(sp_List_Rows, cnx);

    cnx.Open;
    IDataReader dr = cmd.ExecuteReader();

    while (dr.Read())
    {
        class_Table1 ct = new class_Table1();

        ct.ID   = Convert.ToInt32(dr[ID_table1]);
        ct.Name = dr[name_table1].ToString();
        //... all others wanted columns follow here

        myList.Add(ct);
    }
    dr.Close();
    cnx.Close();

    // myList contains all wanted rows; from a Form fills a dataGridView
    return myList();
} 
```

而对于其他表，还有一些其他的函数：list_rows_table2, list_rows_table3... 我的问题是：如何创建一个唯一的`List<>`函数，我可以在其中动态指定`List<>`返回的类型，或者如何转换，例如`List<object>`返回`List<myClass>`之前的a。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:13:18.393

您可以拥有一个所有数据类都必须实现的接口

```
public interface IData
{
    void FillFromReader(IDataReader dr);
} 
```

然后像这样改变你的方法

```
public List<T> GetList<T>(string sqlText)
    where T : IData, new()
{
    List<T> myList = new List<T>();

    using (Connection cnx = new Connection(connString))
    using (Command cmd = new Command(sqlText, cnx)) {
        cnx.Open();
        using (IDataReader dr = cmd.ExecuteReader()) {
            while (dr.Read())
            {
                T item = new T();
                item.FillFromReader(dr);
                myList.Add(item);
            }
        }
    }
    return myList();
} 
```

所以基本上每个班级都会负责填写自己的领域。

泛型类型参数的约束`where T : IData, new()`至关重要。它告诉方法，`T`必须实现接口`IData`。这对于能够在`FillFromReader`不强制转换的情况下调用方法是必要的。数据类必须有一个默认构造函数（由 指定`new()`。这使您可以使用`new T()`.

* * *

`using`我使用连接、命令和带有语句的数据读取器包围了代码。该`using`语句在块结束时自动关闭并释放资源，并确保这种情况发生，即使应该抛出异常或语句块应该过早地留下一个返回语句。

请参阅[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:42:07.903

Olivier 的实现很好。它使用泛型和接口为每个实体提供其自己的 FillFromDataReader() 实现。

你可以走得更远。通过使用约定，所有数据水合代码都可以集中和抽象出来。

我将假设您的类属性名称和列名称是相同的。如果不是，则可以扩展以下代码以将别名属性添加到属性名称。有时一个属性是从对象中的其他值计算出来的，这个属性不能被水合。可以在下面的类中创建和实现 Ignore 属性。

```
public class DataAccess
{
    /// <summary>
    /// Hydrates the collection of the type passes in.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="sql">The SQL.</param>
    /// <param name="connection">The connection.</param>
    /// <returns>List{``0}.</returns>
    public List<T> List<T>(string sql, string connection) where T: new()
    {
        List<T> items = new List<T>();

        using (SqlCommand command = new SqlCommand(sql, new SqlConnection(connection)))
        {
            string[] columns = GetColumnsNames<T>();
            var reader = command.ExecuteReader(CommandBehavior.CloseConnection);

            while (reader.Read())
            {
                T item = new T();

                foreach (var column in columns)
                {
                    object val = reader.GetValue(reader.GetOrdinal(column));
                    SetValue(item, val, column);
                }

                items.Add(item);
            }

            command.Connection.Close();

        }

        return items;
    }

    /// <summary>
    /// Sets the value.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="item">The item.</param>
    /// <param name="value">The value.</param>
    /// <param name="column">The column.</param>
    private void SetValue<T>(T item, object value, string column)
    {
        var property = item.GetType().GetProperty(column);
        property.SetValue(item, value, null);
    }

    /// <summary>
    /// Gets the columns names.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns>System.String[][].</returns>
    private string[] GetColumnsNames<T>() where T : new()
    {
        T item = new T();

        return (from i in item.GetType().GetProperties()
                select i.Name).ToArray();
    }
} 
```

上面的代码中有几个注意事项。DBNulls 和 Nullable 类型是特殊情况，需要自定义代码来处理它们。我通常将 DBNull 转换为 null。我从来没有遇到过需要区分两者之间差异的情况。对于 Nullalbe 类型，只需检测 Nullable 类型并相应地处理代码。

ORM 将消除处理数据访问的大部分麻烦。不利的一面是，您多次与 DTO 和数据库模式耦合。当然，这个问题可以通过使用抽象来解决。许多公司仍然使用严格的存储过程，大多数 ORM 在被迫使用存储过程时会崩溃。它们只是不是为使用存储过程而设计的。

我编写了一个名为“ [Hypersonic](https://github.com/chuckconway/Hypersonic) ”的数据访问框架。它在 GitHub 上，专为使用存储过程而设计。上面的代码是它的轻量级实现。

# image-processing - OpenCV - 检测多个相似但不同对象的最佳方法

> ID：14104157
> 
> 赞同：3
> 
> 时间：2012-12-31T17:00:50.957
> 
> 标签：image-processing, opencv

我的目标是使用 OpenCV 从图片中找到多个条形码。我曾尝试使用 SURF 来查找它们，但在这种情况下该方法无效（功能不够独特）。我也在考虑 HAAR，但它不是一种旋转不变的方法。

您认为处理此问题的最佳方法是什么？

（[全尺寸图片](https://imgur.com/lXtPR)）

![在此处输入图像描述](../Images/a23443e8348995dbb34783836ec3dea6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:27:06.957

训练支持向量机。创建具有多个方向的多个条形码的数据集。在测试图像时，构建一个比例金字塔并应用滑动窗口技术。它被称为“对象检测”。“多个相似但不同”也称为类内变异。

编辑：或者试试[这个](http://www.vision.ee.ethz.ch/~gallju/projects/houghforest/index.html)。

# listview - 在 Sencha Touch 2 中，record.data 未将数据从控制器传递到嵌套组件

> ID：14104158
> 
> 赞同：0
> 
> 时间：2012-12-31T17:01:31.250
> 
> 标签：listview, model, sencha-touch-2, detailsview

我有以下代码，我在其中尝试使用控制器将列表项的记录传递给详细视图。没有数据被传递，并且没有任何内容显示在详细视图中。

主.js：

```
Ext.define('EventsTest.view.Main', {
extend: 'Ext.navigation.View',
xtype: 'main',

requires: [
    'EventsTest.store.Venues',
    'Ext.dataview.List'
],

config: {
    items: [
        {
            xtype: 'list',
            id: 'venuesList',
            itemTpl: '{name}, {distance}',
            store: 'Venues',
            onItemDisclosure: true,
            styleHtmlContent: true
        }
    ]
}
}); 
```

MainView.js：

```
Ext.define('EventsTest.view.MainView', {
    extend: 'Ext.Container',
    xtype: 'mainView',

    config: {
        title: JSON.stringify(this.data),
        styleHtmlContent: true,

        scrollable: true,

        items: [
            {
                xtype: 'panel',
                tpl: '<tpl for="."><h3>{name}</h3><br /><p>{distance}</p></tpl>',
                flex: 1
            }
        ]
    }
}); 
```

Main.js（控制器：我已经尝试过 record.data（如在代码中的许多示例中所见）和 record.getData()

```
Ext.define('EventsTest.controller.Main', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            venuesList: '#venuesList',
        },

        control: {
            venuesList: {
                disclose: 'showItemDetail'
            }
        }

    },

    showItemDetail: function(item, record) {
        item.up('navigationview').push( {
            xtype: 'mainView',
            data: record.getData()
        });
    }
}); 
```

Venue.js（模型）：

```
Ext.define('EventsTest.model.Venue', {
    extend: 'Ext.data.Model',

    config: {
        fields: ['name', 'distance']
    }
}); 
```

Venues.js（商店）：

```
Ext.define('EventsTest.store.Venues', {
    extend: 'Ext.data.Store',

    reqiures: [
        'EventsTest.model.Venue'
    ],

    config: {
        model: 'EventsTest.model.Venue',

        data: [
            { name: 'Johnny', distance: '5 km' },
            { name: 'Billy', distance: '6 km' },
            { name: 'Sarah', distance: '7 km' },
            { name: 'William', distance: '8 km' },
        ]

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:53:42.933

我认为你`tpl`应该像这样在你的外面放置物品`Mainview.js`：

```
Ext.define('EventsTest.view.MainView', {
    extend: 'Ext.Container',
    xtype: 'mainView',

    config: {
        title: JSON.stringify(this.data),

        styleHtmlContent: true,

        scrollable: true,

        tpl: '<tpl for="."><h3>{name}</h3><br /><p>{distance}</p></tpl>'

        items: [
            {
                // Define your items here
            }
        ]
    }
}); 
```

希望它会工作:)

**编辑**

好的，我不确定您是否可以直接在您的视图中执行此操作，因为我实际上在煎茶触摸方面没有太多经验，但另一种满足您要求的方法是通过您的控制器实现它。

因此，如果您的项目如下所示：

```
items: [
    {
         xtype: 'panel',
         itemId: 'panel',
         flex: 1
    }
] 
```

我建议您使用`itemId`而不是`id`因为如果您有多个具有相同 ID 的元素，您的应用程序迟早会损坏，因为相同的 ID 将与其他功能重叠。

因此，如果您想像这样实现面板的数据：

```
tpl: '<tpl for="."><h3>{name}</h3><br /><p>{distance}</p></tpl>', 
```

然后，您可以在控制器中设置面板的数据，如下所示：

```
showItemDetail: function(item, record) {
    item.up('navigationview').push( {
        xtype: 'example42',
        data: record.data
    });

    Ext.ComponentQuery.query('#panel')[0].setHtml('<h3>'+record.get('name')+'</h3>'+ '<br /><p>'+record.get('distance')+'</p>');
} 
```

这里我使用组件查询来引用面板的 itemId 并将其设置为数据。您可以查看[Ext.ComponentQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)以获得更多帮助。

也许我对您的问题理解错误，但希望这会有所帮助:)

# javascript - 无法在 uploadify 上检索表单数据

> ID：14104172
> 
> 赞同：1
> 
> 时间：2012-12-31T17:03:09.337
> 
> 标签：javascript, jquery, uploadify

我已经尝试了几种方法来做到这一点，但我无法让它发挥作用。

我在表单上有一个选择菜单，由另一个表的查询填充，这是用于将类别表与图库链接，所以我有 2 个选择一个静态和另一个动态。

当我处理上传时，只是图片的名称被保存在数据库中。

你们能帮我解决这个问题吗？

这是JS的代码

```
<script type="text/javascript" langauge="javascript">
                    $( document ).ready( function(){
                            $( '#file_upload' ).uploadify({
                                    'uploader'              : 'uploadfyit1/uploadify.swf',
                                    'script'                : 'uploadfyit1/uploadify.php',
                                    'cancelimg'             : 'uploadfyit1/cancel.png',
                                    'folder'                : 'uploads',
                'debug'                 : false,
                                    'multi'                 : true,
                                    'auto'                  : false,
                'queueSizeLimit': 5, //Para enviar solo un archivo 
    'onQueueFull': function(event, queueSizeLimit) {
        alert("Nao pode mais enviar arquivos! Somente pode enviar" + queueSizeLimit + " por vez.");
        return false;
    },
    'onComplete': function(event, ID, fileObj, response, data) {
        // you can use here jQuery AJAX method to send info at server-side.
$("#fileUpload").uploadifySettings('scriptData', {'galeria' : $('#galeria').val(), 'regiao' : $('#regiao').val()});
        }
    });   
});
</script> 
```

这用于上传

```
if (!empty($_FILES)) {
$img        = $_FILES['Filedata']['name'];
$ext        = substr($img, -4);
$img        = md5($img).date("dmYHis").$ext;
$tempFile   = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile =  str_replace('//','/',$targetPath) . $img;

    $galeria = $_REQUEST['galeria'];
    $regiao = $_REQUEST['regiao'];

    $adicionar = mysql_query("INSERT INTO imagens (img_cat_id, img_foto, img_regiao) VALUES('$galeria','$img','$regiao')");

    move_uploaded_file($tempFile,$targetFile);
    echo str_replace($_SERVER['DOCUMENT_ROOT'],'',$targetFile);
} 
```

所发生的`galeria`都是`regiao`空的。

# c# - AES CBC 中的填充

> ID：14104182
> 
> 赞同：3
> 
> 时间：2012-12-31T17:04:03.953
> 
> 标签：c#, cryptography, encryption-symmetric, rijndaelmanaged, cbc-mode

我正在尝试在 C# 中使用（128 位 AES）随机 IV 测试 CBC。

在我要解决的问题中，我有 12 字节的输入消息。条件是，如果 PlainText 小于块大小（16 字节），则要使用的填充从 0x01 开始，然后到 6 0x00。

**例子：**

```
in ASCII PT     = Pay Bob 100%

in hex PT       = 50 61 79 20 42 6f 62 20 31 30 30 24

PT with Padding = 50 61 79 20 42 6f 62 20 31 30 30 24 01 00 00 00 
```

我似乎无法在**RijndaelManaged找到这个****PaddingMode**。

 **有人可以建议我如何执行以下操作吗？

*   可变长度填充

**编辑：**

```
public class CBC
{
    public CBC()
    {

    }

    private static readonly byte[] SALT = new byte[]
        {0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c};

    public static byte[] EncryptCBC(string plainText, string passPhrase, PaddingMode paddingMode )
    {
        byte[] result;
        using (RijndaelManaged cryptoProvider = new RijndaelManaged())
        {
            Rfc2898DeriveBytes derivedKey = new Rfc2898DeriveBytes(passPhrase, SALT);
            cryptoProvider.Mode = CipherMode.CBC;
            cryptoProvider.GenerateIV(); // generate random IV

            cryptoProvider.Padding = paddingMode;

            cryptoProvider.Key = derivedKey.GetBytes(cryptoProvider.KeySize / 8);

            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (ICryptoTransform encryptor = cryptoProvider.CreateEncryptor(cryptoProvider.Key, cryptoProvider.IV))
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {
                            swEncrypt.Write(plainText);
                        }
                    }
                }
                // concatenate iv to ciphertext
                result = cryptoProvider.IV.Concat(msEncrypt.ToArray()).ToArray();
            }
            cryptoProvider.Clear();
        }
        return result;
    }

    public static string DecryptCBC(byte[] cipherTextBytes, string passPhrase, PaddingMode paddingMode)
    {
        string result = null;
        using (RijndaelManaged cryptoProvider = new RijndaelManaged())
        {
            Rfc2898DeriveBytes derivedKey = new Rfc2898DeriveBytes(passPhrase, SALT);
            cryptoProvider.Mode = CipherMode.CBC;
            // take the iv off the beginning of the ciphertext message
            cryptoProvider.IV = cipherTextBytes.Take(cryptoProvider.BlockSize / 8).ToArray();

            cryptoProvider.Padding = paddingMode;//PaddingMode.ANSIX923;

            cryptoProvider.Key = derivedKey.GetBytes(cryptoProvider.KeySize / 8);

            using (MemoryStream msEncrypt = new MemoryStream(cipherTextBytes.Skip(cryptoProvider.BlockSize / 8).ToArray())) // skip the IV bytes
            {
                using (ICryptoTransform encryptor = cryptoProvider.CreateDecryptor(cryptoProvider.Key, cryptoProvider.IV))
                {
                    using (CryptoStream cryptoStream = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Read))
                    {
                        byte[] plainTextBytes = new byte[cipherTextBytes.Length - cryptoProvider.BlockSize / 8];
                        int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);

                        result = Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
                        cryptoStream.Close();
                    }
                }
            }

            cryptoProvider.Clear();
        }
        return result;
    }

} 
```

**我的填充功能**

```
 private byte[] PaddPlainTextBytes(byte[] plainTextBytes )
    {
        byte[] padding = utils.HexToBytes("01000000");
        MemoryStream s = new MemoryStream();

        s.Write(plainTextBytes, 0, plainTextBytes.Length);
        s.Write(padding, 0, padding.Length);

        byte[] paddedPt = s.ToArray();

        return paddedPt;
    } 
```

**测试我的CBC的方法**

```
 private void btnTestCBC_Click(object sender, EventArgs e)
    {
        string plainText = "Pay Bob 100%";

        string passPhrase = "Thisismypassphrase";
        ShowMessage(@"Plain Text = " + plainText);

        byte[] pBytes = PaddPlainTextBytes(Encoding.ASCII.GetBytes(plainText));

        string message = Encoding.ASCII.GetString(pBytes);

        byte[] encryptedBytes = CBC.EncryptCBC(plainText: message, passPhrase: passPhrase, paddingMode: PaddingMode.None);

        ShowMessage("Encrypted String = " + Encoding.ASCII.GetString(encryptedBytes));
        ShowMessage("Encrypted HEX = " + utils.BytesToHex(encryptedBytes));

        string decryptedString = CBC.DecryptCBC(encryptedBytes, passPhrase, PaddingMode.None);
        ShowMessage("Deccrypted String = " + decryptedString);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T17:14:46.500

我不熟悉您的填充方案，但它肯定不是内置于 .net 中的。您应该能够将 设置`PaddingMode`为`None`，并将您的垫子发布到您的输入消息中，对于解密它的任何内容都应该具有相同的结果。如果你要解密它，你必须自己移除垫子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:34:34.363

您描述的填充方案看起来很像["ISO/IEC 7816-4 Padding"](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)，请参阅有关填充方法的 Wikipedia 页面（我刚刚编辑过）。通常，您从设置为 1 的单个位开始，而不是字节，因此第一个字节将是 0x80 而不是 0x01。

这个填充节点可能不是内置的。如果你想进行实验，我会推荐 Bouncy Castle 库，否则切换到几乎无处不在的 PKCS#7 填充。**

# assembly - MIPS bne beq 计算机组织与设计

> ID：14104183
> 
> 赞同：4
> 
> 时间：2012-12-31T17:04:05.743
> 
> 标签：assembly, branch, conditional, mips

所以，我会引用我的教科书（计算机组织与设计），然后我会问我的问题：

> **将 if-then-else 编译成条件分支**
> 
> 在以下代码段中，f、g、j、i 和 j 是变量。如果 f 到 j 的五个变量对应于 $s0 到 $s4 的五个寄存器，那么这个 C if 语句的编译 MIPS 代码是什么？
> 
> 如果 (i == j) f = g + h; 否则 f = g - h;
> 
> 图 2.9 是 MIPS 代码应该做什么的流程图。第一个表达式比较相等，因此如果寄存器是相等指令（beq），我们似乎想要分支。**一般来说，如果我们测试相反的条件来分支执行 if 的后续 then 部分的代码（标签 Else 在下面定义），代码会更有效，因此我们使用分支 if registers are not equal 指令(bne)：**
> 
> bne $s3, $s4, Else # 如果 i ≠ j 则转到 Else

我已经搜索了一段时间，但我找不到为什么 bne 会比 beq 更有效。（但我确实发现有时建议使用 bne，因为它使代码更容易理解，因为条件成立时要执行的语句就在 bne 语句的正下方。）

因此，如果一般来说它不会更有效，那么在这个特定的练习中它仍然可能更有效。我已经考虑过这一点，并且我假设跳转指令会花费时间，因此我们希望最大限度地减少所需的跳转量。这意味着，当我们期望条件成立时，我们应该使用 bne，而当我们期望条件不成立时，我们应该使用 beq。

现在，如果我们测试 $s3 是否等于 $s4，当我们没有关于这些寄存器内容的任何信息时，假设它们可能相等是不合理的；相反，它们更有可能不相等，这应该导致使用 beq 而不是 bne。

所以，总结一下：教科书说 bne 比 beq 更有效，无论是一般情况还是只是在这个例子中都不清楚，但无论哪种情况我都不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:39:39.350

效率不是来自 bne 与 beq 的机器代码的直接比较。文本描述了通过编码来优化整体性能以缩短最常见的代码路径。

~~如果您假设这些值更可能不相等，那么在使用 bne 时只需要处理一条指令，如果您使用 beq，则必须在失败时执行额外的跳转。~~

最短的路径是放弃比较，失败而不是跳跃。

来自[http://www.cs.gmu.edu/~setia/cs365-S02/class3.pdf](http://www.cs.gmu.edu/~setia/cs365-S02/class3.pdf)：

**分支机构的罕见案例**

beq $18, $19, L1

*   其他处理

*   跳转

取而代之

bne $18, $19, L2

*   成功处理

*   结尾

二级：

**快速处理常见情况 - 大多数分支的一条指令**

重新阅读你的问题，我认为关键是这个假设：

> “现在，如果我们测试 $s3 是否等于 $s4，当我们没有关于这些寄存器内容的任何信息时，假设它们可能相等是不合理的；相反，它们更有可能是不相等，这将导致使用 beq 而不是 bne。”

这似乎是一种混乱，我们需要找到一些证据或理由来确定哪种可能性更大，寄存器相等或不相等。

在这种情况下，我们正在检查 if-then-else。我断言我们期望 if 测试通过，这就是 twalberg 描述的心理学。寄存器不太可能包含随机值，因为它们包含程序员期望的数据 - 先前操作的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T23:40:44.123

另一个原因是简单的[分支预测器](http://en.wikipedia.org/wiki/Branch_predictor)通常假设不采用前向分支而采用后向分支。这个假设为简单的循环提供了更好的性能。

# jquery - jQuery 集合中的奇怪顺序充满了 DOM 元素和虚拟元素

> ID：14104185
> 
> 赞同：0
> 
> 时间：2012-12-31T17:04:14.850
> 
> 标签：jquery, jquery-selectors

我正在编写自己的 jQuery 插件，其中引用了一些现有节点，并创建了一些在 DOM 树中不存在的新 jQ 节点（它们没有附加）。我正在使用该[`.add()`](http://api.jquery.com/add/)方法将每个元素添加到新集合中。

发生的情况是，这个集合的顺序看起来很奇怪（我在那里找不到任何逻辑模式）。文档中的以下注释可能是原因：

> 从 jQuery 1.4 开始，来自 .add() 的结果将始终按文档顺序返回（而不是简单的串联）。

考虑以下示例。

**HTML**

```
<body>
    <a id="existing1"></a><a id="existing2"></a>
</body> 
```

**JS**

```
<script type="text/javascript">

    function addToColl(selector) {
        coll = coll.add(selector);
        var n = $(selector).get(0).id.match(/\d+/)[0];
        for (var i = 0; i < 4; i++) {
            var a = $('<a>',{id:'virtual'+n+'_'+i});
            coll = coll.add(a);
        }
    }

    $(document).ready(function() {

        coll = $();

        addToColl('#existing1');
        // uncomment the following to see what's happening
        //addToColl('#existing2');

        $.each(coll,function(idx,elm) {
            console.log(elm.id);
        });

    });

</script> 
```

**输出：**

> 现有
> 1 虚拟 1_0虚拟 1_1 虚拟
> 1_2
> 虚拟
> 1_3

当您取消注释注释函数调用它输出

> 现有
> 1 虚拟1_3 虚拟 1_2 虚拟 1_1 虚拟 1_0 现有
> 2 虚拟 2_0虚拟 2_1 虚拟 2_2 虚拟 2_3

应该怎么做才能避免这种混乱？

**------ [编辑] ------**
由于`add()`函数的意外行为，我最终使用原生 Javascript 数组来收集元素（即使用`push()`方法）。稍后，当我收集完元素后，我会将其转换为 jQuery 集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:34:43.550

jQuery 中的代码如下所示：

```
 add: function( selector, context ) {
            var set = typeof selector === "string" ?
                            jQuery( selector, context ) :
                            jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
                    all = jQuery.merge( this.get(), set );

            return this.pushStack( isDisconnected( set[0] ) || isDisconnected( all[0] ) ?
                    all :
                    jQuery.unique( all ) );
    }, 
```

因此，如果添加的集合的第一个元素或合并的集合断开连接，它只会返回合并的集合，无论`jQuery.merge()`它们发生的顺序是什么。如果它们都是连接的，它会调用`jQuery.unique()`，这会将它们按 DOM 顺序排列。

但是，进行排序的比较函数是：

```
 function( a, b ) {
            if ( a === b ) {
                    hasDuplicate = true;
                    return 0;
            }

            return ( !a.compareDocumentPosition || !b.compareDocumentPosition ?
                    a.compareDocumentPosition :
                    a.compareDocumentPosition(b) & 4
            ) ? -1 : 1;
    } 
```

然后，这取决于浏览器`compareDocumentPosition()`在将断开连接的元素与连接的元素或断开连接的元素相互比较时如何实现。我希望它`DOCUMENT_POSITION_DISCONNECTED`在两种情况下都返回 (1)，但 Chrome 在后一种情况下返回 4 ( `DOCUMENT_POSITION_FOLLOWING`)，在第一种情况下返回其他位组合。

# sql - sql server 2008，不能在子查询中使用 order by

> ID：14104187
> 
> 赞同：3
> 
> 时间：2012-12-31T17:04:28.710
> 
> 标签：sql, sql-server-2008, stored-procedures

这是我的 sql server 2008 存储过程。

```
ALTER PROCEDURE [dbo].[GetSharedSmoothies]
    @Page INT ,
    @Status INT ,
    @ItemPerPage INT
AS 
    BEGIN
        SET NOCOUNT ON;

        DECLARE @X INT 
        DECLARE @Y INT

        SET @X = ( @Page - 1 ) * @ItemPerPage
        SET @Y = @Page * @ItemPerPage

        SELECT  *
        FROM    ( SELECT    S.* ,
                            U.Avatar ,
                            U.Displayname ,
                            ( SELECT    COUNT(Id)
                              FROM      Vote
                              WHERE     Vote.SmoothieId = S.Id
                            ) AS Votes ,
                            ROW_NUMBER() OVER ( ORDER BY S.Id ) rownum
                  FROM      dbo.Smoothie AS S
                            INNER JOIN dbo.[User] AS U ON S.UserId = U.Id
                  WHERE     S.IsPublic = 1
                            AND S.Status = 3
                            AND S.UserId > 0
                  -- ORDER BY  S.CreatedDate DESC
                ) seq
        WHERE   seq.rownum BETWEEN @X AND @Y
        ORDER BY seq.rownum
    END 
```

在我的代码中，你会看到我注释掉了订单

```
 -- ORDER BY  S.CreatedDate DESC 
```

因为 order by 在子查询中不起作用。我需要在顶部显示最新的。有没有办法可以在我的代码中使用 order by？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:05:43.920

这是正确的。这是不允许的，因为它不会做任何事情。

将最新的放在子查询的顶部不会对使用子查询的结果集做**任何事情。**

将所需的列添加到结果集中`ORDER BY`：

```
ORDER BY seq.CreatedDate DESC, seq.rownum 
```

或者：

```
ORDER BY seq.rownum, seq.CreatedDate DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T17:07:56.243

您可以`S.CreatedDate`在`Row_NUMBER()`

`ROW_NUMBER() OVER (PARTITION BY S.Id ORDER BY S.CreatedDate DESC) AS RowNum`

# opengl - LWJGL OpenGL 显示

> ID：14104189
> 
> 赞同：1
> 
> 时间：2012-12-31T17:04:53.403
> 
> 标签：opengl, runtime, lwjgl

当您尝试关闭显示时，通常我使用

```
Mouse.destroy();

Keyboard.destroy();

AL.destroy();

Display.destroy();

System.exit(0); 
```

但现在我想创建一个新的来替换它。我有一个带有开始按钮的启动程序。它运行 lwjgl。当用户点击开始时，它调用了destroy方法，但首先调用

```
Display.create() 
```

理论上创建一个显示并关闭另一个。这反而会使 Java 运行时环境崩溃并打印错误。我想知道是否有一个已经创建的方法可以在不崩溃的情况下执行此操作，因为我的方法不起作用。这是错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x050328e0, pid=3580, tid=5100
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:55:29.033

Display 类是静态的。

您要做的是创建一个已经存在的类。如果你想要一个启动器来启动你的应用程序，你应该让它成为一个完全独立的程序来启动它，或者引入状态管理来跟踪你所在的菜单。

# cocoa - NSButton setAction 选择器

> ID：14104191
> 
> 赞同：4
> 
> 时间：2012-12-31T17:04:57.897
> 
> 标签：cocoa, nsbutton

我只想添加一个带有 setAction 参数的 NSButton。

```
NSRect frame = NSMakeRect(10, 40, 90, 40);  
NSButton* pushButton = [[NSButton alloc] initWithFrame: frame];  
[pushButton setTarget:self];   
[pushButton setAction:@selector(myAction:)]; 
```

但我想为函数 myAction 提供一个参数...
如何？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T20:27:45.370

> 但我想为函数 myAction 提供一个参数...
> 如何？

你不能。

> ...如果有多个按钮使用此方法，我们无法区分发件人（仅与标题）...

有三种方法可以判断哪个按钮（或其他控件）正在与您通话：

*   为每个按钮（或其他控件）分配一个标签，并在您的操作方法中比较这些标签。当您在 nib 中创建控件时，缺点是您必须编写两次标记（一次在代码中，一次在 nib 中）。由于您是从头开始手动编写按钮，因此您没有这个问题。
*   为您希望向您发送此消息的每个控件设置一个出口，并将其`sender`与每个出口进行比较。
*   有不同的操作方法，每个控件是唯一连接到每个操作的方法。然后，每个操作方法不需要确定哪个控件向您发送了该消息，因为您已经知道它是通过哪种方法发送的。

标签的问题是前面提到的重复性。忽略命名每个标签也很容易，因此您最终会查看类似代码`if ([sender tag] == 42)`并且不知道/必须查找哪个控件是#42。

出口的问题是您的操作方法可能会变得很长，并且无论如何可能正在做多种不同的事情，而这些事情在同一方法中没有任何业务。（这也是标签的问题。）

所以，我通常更喜欢第三种解决方案。为将您作为其目标的每个按钮（或其他控件）创建一个操作方法。您通常会将方法和按钮命名为相同的名称（like`save:`和“Save”）或非常相似的名称（like`terminate:`和“Quit”），因此您只需阅读每个方法即可知道它属于哪个按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:30:38.107

我从来没有以编程方式创建一个 NSButton，但我认为你只需要创建一个这样的方法：

```
- (void) myAction: (NSButton*)button{
    //your code
} 
```

就是这样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:23:17.863

您可以使用关联的对象来传递参数。

您可以参考： http: [//labs.vectorform.com/2011/07/objective-c-associated-objects/](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)

[http://www.cocoanetics.com/2012/06/associated-objects/](http://www.cocoanetics.com/2012/06/associated-objects/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-28T04:47:54.370

*   `.tag`如果您的对象有任何整数 uniqueID 就足够了。
*   我改用`.identifier`它，因为它支持基于字符串的 uniqueID。

例子：

```
...
for (index, app) in apps.enumerated() {
    let appButton = NSButton(title: app.title, target: self, action: #selector(appButtonPressed))
    appButton.identifier = NSUserInterfaceItemIdentifier(rawValue: app.guid)
}

...
@objc func appButtonPressed(sender: NSButton) {
    print(sender.identifier?.rawValue)
} 
```

# c# - 循环滚动纹理

> ID：14104193
> 
> 赞同：2
> 
> 时间：2012-12-31T17:05:08.840
> 
> 标签：c#, xna, rendering, textures, spritebatch

我正在使用 C# 和 XNA，我想在我的游戏中制作滚动背景。

我试图找出实现无限期向某个方向移动的滚动纹理的最佳方法。假设有星星的空间背景。因此，当船舶移动时，纹理会发生变化，但方向相反。有点像“平铺”模式。

到目前为止，我唯一的猜测是渲染两个纹理，比如说向左移动，然后当它超出可见性或类似的东西时，让最左边的一个跳到右边。

所以，我想知道在 XNA 中是否有一些简单的方法可以做到这一点，也许是某种渲染模式，或者我描述的方式是否足够好？我只是不想把事情复杂化。我显然先尝试了谷歌，但几乎一无所获，但考虑到许多游戏也使用类似的技术，这很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:24:32.897

# 理论

[使用 XNA SpriteBatch](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.aspx)类可以轻松实现滚动背景图像。[Draw](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)方法有几个重载，可以让调用者指定源矩形。此源矩形定义了在屏幕上绘制到指定目标矩形的纹理部分：

![在此处输入图像描述](../Images/99ea847ce67b12e4b067c000090ad440.png)

更改源矩形的位置将更改目标矩形中显示的纹理部分。

为了让精灵覆盖整个屏幕，请使用以下目标矩形：

```
var destination = new Rectangle(0, 0, screenWidth, screenHeight); 
```

如果应该显示整个纹理，请使用以下目标矩形：

```
var source = new Rectangle(0, 0, textureWidth, textureHeight); 
```

您所要做的就是为源矩形的 X 和 Y 坐标设置动画，然后就完成了。

嗯，差不多完成了。即使源矩形移出纹理区域，纹理也应该重新开始。为此，您必须设置一个使用*纹理包装的*[SamplerState](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.samplerstate(v=xnagamestudio.40).aspx)。幸运的是，SpriteBatch 的[Begin](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.begin.aspx)方法允许使用自定义 SamplerState。您可以使用以下方法之一：

 *```
// Either one of the three is fine, the only difference is the filter quality
SamplerState sampler;
sampler = SamplerState.PointWrap;
sampler = SamplerState.LinearWrap;
sampler = SamplerState.AnisotropicWrap; 
```

# 例子

```
// Begin drawing with the default states
// Except the SamplerState should be set to PointWrap, LinearWrap or AnisotropicWrap
spriteBatch.Begin(
    SpriteSortMode.Deferred, 
    BlendState.Opaque, 
    SamplerState.AnisotropicWrap, // Make the texture wrap
    DepthStencilState.Default, 
    RasterizerState.CullCounterClockwise
);

// Rectangle over the whole game screen
var screenArea = new Rectangle(0, 0, 800, 600);

// Calculate the current offset of the texture
// For this example I use the game time
var offset = (int)gameTime.TotalGameTime.TotalMilliseconds;

// Offset increases over time, so the texture moves from the bottom to the top of the screen
var destination =  new Rectangle(0, offset, texture.Width, texture.Height);

// Draw the texture 
spriteBatch.Draw(
    texture, 
    screenArea, 
    destination,
    Color.White
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:31:32.963

Microsoft 有一个 XNA 教程可以做到这一点，您可以获取源代码并阅读滚动背景背后的实际编程逻辑。奖励积分他们做视差滚动以获得很好的效果。

链接：http: [//xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)*

# php - 使用php保存网页中的图像

> ID：14104194
> 
> 赞同：1
> 
> 时间：2012-12-31T17:05:09.577
> 
> 标签：php, curl

[我知道我的问题与这个问题](https://stackoverflow.com/questions/3175392/how-to-save-webpage-as-a-image-file-using-php)非常相似，我正在使用问题的答案作为我的解决方案，但我无法让它发挥作用。

我正在使用[Immediatenet.com](http://immediatenet.com/)生成任何给定 URL 的缩略图（例如：[google](http://immediatenet.com/t/m?Size=1024x768&URL=http://google.com)）。然后使用 cURL 将图像保存在我服务器上的文件夹中。

我不确定问题是否在于 URL 实际上不是图像 URL（即 example.com/image.jpg）或 .html/.php URL，或者我只是做得不对. 我以前从未使用过 cURL，所以很可能我做得不对。

我将图像的路径保存到一个工作正常的 MySQL 数据库中。但是，图像实际上并未保存在指定的文件夹中。文件夹上的权限设置正确，所以我认为这不是权限问题。我也设置`allow_url_fopen`为打开只是为了确保。

我的代码如下。谁能指出我正确的方向？

```
$url = $_POST['url'];
$url_new = 'http://immediatenet.com/t/m?Size=1024x768&URL='.$url;
$img = "/users/images/".$url.".jpg";
$ch = curl_init($url_new);
$fp = fopen($img, 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:15:42.820

如果`$url`包含正斜杠（就像大多数 URL 一样），这些将被视为`$img`路径名中的目录分隔符。您要么需要将斜杠替换为其他字符，要么创建所有必要的目录。

```
$img = "/users/images/".str_replace('/', '_', $url).".jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:07:14.840

你确定`$img = "/users/images/".$url.".jpg";`是有效的？..您的根目录中真的有用户文件夹吗？

请纠正，如果不是，它应该没问题。

# ios - 在uitableviewcell中异步加载图像

> ID：14104203
> 
> 赞同：1
> 
> 时间：2012-12-31T17:05:49.227
> 
> 标签：ios, objective-c, uitableview

我正在尝试将图像异步加载到`UITableVIew`.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

UITableViewCell *cell = nil;
NSString *cellIndetify = [NSString stringWithFormat:@"cell%d",tableView.tag -TABLEVIEWTAG];

cell = [tableView dequeueReusableCellWithIdentifier:cellIndetify];
IndexPath *_indextPath = [IndexPath initWithRow:indexPath.row  withColumn:tableView.tag - TABLEVIEWTAG];
if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIndetify];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.contentView.backgroundColor = [UIColor blackColor];
// here I init cell image view
        UIView *cellSub =  [self.waterFlowViewDatasource waterFlowView:self cellForRowAtIndexPath:_indextPath];

    cellSub.backgroundColor = [UIColor blackColor];
    [cell.contentView addSubview:cellSub];
    cellSub.tag = CELLSUBVIEWTAG;

}
// fill image info 
    [self.waterFlowViewDatasource waterFlowView:self fillDataIntoCellSubview:[cell viewWithTag:CELLSUBVIEWTAG] withIndexPath:_indextPath];

CGFloat cellHeight = [self.waterFlowViewDelegate waterFlowView:self heightForRowAtIndexPath:_indextPath];

CGRect cellRect = CGRectMake(0, 0, _cellWidth, cellHeight);
[[cell viewWithTag:CELLSUBVIEWTAG] setFrame:cellRect];

[self.waterFlowViewDatasource waterFlowView:self relayoutCellSubview:[cell viewWithTag:CELLSUBVIEWTAG] withIndexPath:_indextPath];

return cell;
} 
```

`ImageView`在我初始化的那个类中：

```
(id)initWithIdentifier:(NSString *)indentifier
{
    if(self = [super initWithIdentifier:indentifier])
    {
        self.backgroundColor = [UIColor blackColor];

        if (!self.imageView) {
            _imageView = [[UIImageView alloc] init];
            self.imageView.backgroundColor = IMAGEVIEWBG;
            [self addSubview:self.imageView];

            self.imageView.layer.borderWidth = 1;
            self.imageView.layer.borderColor = [[UIColor colorWithRed:0.85 green:0.85 blue:0.85 alpha:1.0] CGColor];
        }
        ......some others controllers
}

-(void)setImageWithURL:(NSURL *)imageUrl{

    UIImage *cachedImage = [[SDImageCache sharedImageCache] imageFromKey:[imageUrl absoluteString]];
    if (cachedImage) {
        self.imageView.image = cachedImage;
    }else{
        SDWebImageManager *manager = [SDWebImageManager sharedManager];
            [manager downloadWithURL:imageUrl delegate:self options:SDWebImageCacheMemoryOnly userInfo:[[NSDictionary alloc] initWithObjectsAndKeys:[imageUrl absoluteString], @"image_url", [NSValue valueWithBytes:&imageSize objCType:@encode(CGSize)], @"image_size", [NSNumber numberWithInt:arrIndex], @"imageview_index", nil]];
            _imageView.image = [UIImage imageNamed:@"album_detail_placeholder.png"];
}
.....
.....

- (void)imageDecoder:(SDWebImageDecoder *)decoder didFinishDecodingImage:(UIImage *)image userInfo:(NSDictionary *)userInfo {

       imageView.image = image
} 
```

正如你在这里看到的，我使用了 SDWebImageManager，但这似乎不是问题。

当拉到下一页时，在下一页的图像加载之前，如果我滚动回上一页加载的图像，该图像将被另一个图像覆盖（应该显示在最新页面，而不是当前页面......） （例如，在第一页，我有一个图像，这个图像中有猫，然后我向下滚动直到拉起请求下一页，并且在获取所有下一页图像的url之后，启动异步线程下载图像，之前最新下载的图片，滚动回顶部，可能是第一页。一段时间后，一些图片下载，它们应该显示在单元格中，但是现在图片会覆盖当前页面的图片，也许猫图片现在有一个狗图片） 我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:53:41.763

当一行滚动到屏幕外时，表格视图会将该行的单元格重用于已在屏幕上滚动的另一行。

问题是您将`ImageView`用作后台加载程序的代表，并且`ImageView`与单元格相关联，而不是与行相关联。当后台加载程序完成加载图像时，该单元格可能已被另一行重用。

您需要使表格视图的数据源成为背景图像加载器的委托。它应该在调用时将行的索引路径放入`userInfo`字典中`downloadWithURL:delegate:options:userInfo:`。当下载器发送`imageDecoder:didFinishDecodingImage:userInfo:`到数据源时，数据源应该从 中获取索引路径`userInfo`并使用它向表视图询问当前显示该行的单元格（通过发送`cellForRowAtIndexPath:`到表视图）。

# php - wp_reset_query() wordpress - 无法重置最后一个查询

> ID：14104204
> 
> 赞同：4
> 
> 时间：2012-12-31T17:05:56.657
> 
> 标签：php, wordpress

我正在尝试在一个页面上运行两个查询。第一个显示自定义用户搜索的结果，第二个只是应该显示最近的记录，其中一些自定义参数硬编码到查询中。

我遇到的问题是，当运行自定义搜索时，两个查询都会受到影响，并且结果在两个地方都会更新。

我试过放置这些 wp_reset_postdata(); wp_reset_query(); 到处都是，但都没有。

有没有人有任何想法？

这是我的第一个查询

```
$args = array('post_type' => 'vacancy', 'post_status' => 'publish' ) );
add_filter( 'posts_where', 'posts_where_title', 10, 2 );
function posts_where_title( $where, &$wp_query ) {
global $wpdb;
$where .= ' AND (' . $wpdb->posts . '.post_title LIKE \'%' . esc_sql( like_escape( $_POST['post_title'] ) ) . '%\'';
$where .= ' OR ' . $wpdb->posts . '.post_content LIKE \'%' . esc_sql( like_escape( $_POST['post_title'] ) ) . '%\')';
return $where;
}
$the_query = new WP_Query( $args );
if ( $the_query->have_posts() ) : while ( $the_query->have_posts() ) : $the_query->the_post();
//display results ?>
<?php $i++;  endwhile;  endif;  
wp_reset_postdata();
wp_reset_query();?> 
```

这是我的第二个查询...

```
$args = array( 'post_type' => 'vacancy', 'posts_per_page' => 10 );
query_posts( "_vacancy_ends>=".date("Y-m-d")."&_vacancy_starts<=".date("Y-m-d")."&order=DESC" );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
//display results
endwhile;
wp_reset_postdata();
wp_reset_query(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:25:03.837

你的问题是这一行：

```
query_posts( "_vacancy_ends>=".date("Y-m-d")."&_vacancy_starts<=".date("Y-m-d")."&order=DESC" ); 
```

query_posts 影响主循环，以及在该给定页面请求中运行的几乎所有其他循环。在极少数情况下，在 WP_Query 甚至 get_posts 上使用它会被认为是一种好的做法，因为您正在影响 Wordpress 用来填充有关正在查看的内容的信息的大量全局变量。

就个人而言，我通常不会在 WP_Query 上使用查询方法，但在这种情况下它可能会有所帮助。尝试将您的第二个查询更改为以下内容：

```
$args = array( 'post_type' => 'vacancy', 'posts_per_page' => 10 );
$loop = new WP_Query( $args );
$loop->query( "_vacancy_ends>=".date("Y-m-d")."&_vacancy_starts<=".date("Y-m-d")."&order=DESC" );
while ( $loop->have_posts() ) : $loop->the_post();
    //display results
endwhile;
wp_reset_postdata();
wp_reset_query(); 
```

这会将您的查询本地化到 WP_Query 的单个实例，而不是影响全局的所有内容。它未经测试，但如果这有帮助，请告诉我。

还有一件事：

```
add_filter( 'posts_where', 'posts_where_title', 10, 2 );
function posts_where_title( $where, &$wp_query ) {
    global $wpdb;
    $where .= ' AND (' . $wpdb->posts . '.post_title LIKE \'%' . esc_sql( like_escape( $_POST['post_title'] ) ) . '%\'';
    $where .= ' OR ' . $wpdb->posts . '.post_content LIKE \'%' . esc_sql( like_escape( $_POST['post_title'] ) ) . '%\')';
    return $where;
} 
```

请记住，此过滤器将在您调用 add_filter 后设置的每个查询上运行。您可能需要考虑在不需要过滤器运行的更多查询之后删除过滤器：

```
remove_filter( 'posts_where', 'posts_where_title'); 
```

# flash - Alfresco Share 4.2 预览器问题

> ID：14104205
> 
> 赞同：0
> 
> 时间：2012-12-31T17:06:03.847
> 
> 标签：flash, share, alfresco, preview

我想知道是否可以对 4.2c 共享内容预览器做些什么。它适用于我的一些 PDF 和 Office 文档，但在其他文件中它已损坏。

例如，如果我加载[这个](https://www.dropbox.com/s/3ac4ei0g8nnkh6o/broken_preview.png)文件，我的预览器看起来像[这样](https://www.dropbox.com/s/3ac4ei0g8nnkh6o/broken_preview.png)坏了。文档库中的缩略图看起来不错，但文档详细信息页面上的预览已损坏。

我相信这可能与从 Microsoft Office 或 Libre Office 导出的 PDF 文件有关。我可以加载一些文件并正确渲染预览，有时它会像这样被破坏。不过，它总是与相同的文件一致，所以我认为它必须与转换器或 pdf 变压器组件或类似的东西有关。我在服务器上使用 LibreOffice 3.5。

任何人都可以说他们是否有类似的问题以及如何解决它们，或者至少为我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:14:26.650

这看起来像是 Open-/Libre Office 转换问题。预览显示了页面分页预览 - 所以对我来说这是出乎意料的，但并不是真的坏了。Alfresco 首先使用 Open/Libre Office 将文档转换为 PDF，然后将 PDF 转换为 flash 对象。也许您的文档在转换为 PDF 时需要其他参数？您是如何安装 Alfresco 4.2.c（使用安装程序？）以及在哪个操作系统上安装的？您的链接仅指向文档自身的相同预览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T09:27:58.317

我刚刚在自己的安装（maven setup）中遇到了这个问题。

原来它是 swftools 和 LibreOffice 的组合。我不是 100% 确定哪个解决了这个问题。

我升级到 LibreOffice 4（之前使用 3.5）并将 swftools 降级到 0.9.1（我使用 0.9.2）。

值得一提的是，我必须重新上传文档才能更新预览。我尝试了 5 种不同的文件，这些文件以前都失败了，现在它们看起来不错。

# php - 如何在 phpmyadmin 中显示外键的内容

> ID：14104206
> 
> 赞同：24
> 
> 时间：2012-12-31T17:06:13.163
> 
> 标签：php, phpmyadmin

每当我尝试使用 phpMyAdmin 在我的 MySQL 数据库中插入新记录时，如果该列引用了外键，我会得到一个带有我可以使用的有效 ID 的下拉框。问题是当数据库变得太大时，ID 对我来说毫无意义。例如，如果 ID 是员工的社会安全号码，我不知道，但我可能记得名字。有没有办法在 ID 旁边显示行内容或至少一列对用户可能更有意义？我已经在 phpPgAdmin 中看到了该功能。

我在配置文件中试过这个：

```
$cfg['ForeignKeyDropdownOrder'] = array( 'content-id', 'id-content' ); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-03-24T09:04:14.077

phpMyAdmin 对此有一个功能，但您必须使用 InnoDB 表类型。您还必须配置[pmadb](https://docs.phpmyadmin.net/en/latest/setup.html#linked-tables)。

1.  选择包含外键（子）的表。
2.  单击“结构”选项卡。
3.  单击“关系视图”。
4.  在外键约束下，单击“选择要显示的列”下拉菜单并做出选择。

列值现在将显示在 id 旁边。选择后将鼠标悬停在外键值上时也会显示。

对于任何在设置此设置时遇到问题的人，请参阅[#relation-view](https://docs.phpmyadmin.net/en/latest/relations.html#relation-view)文档，该文档准确地告诉您如何使用屏幕截图进行配置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-18T08:33:16.460

除了@EternalHour 所说的，您还需要检查**视图选项下的单选按钮** [![在此处输入图像描述](../Images/22d53d5bc34aea1335eff3610397f24d.png)](https://i.stack.imgur.com/U81dJ.png)

如果要显示值，则显示“**关系显示列” 。**

[![在此处输入图像描述](../Images/4d2a7c2d0e602ff7a61b0f2c805969f4.png)](https://i.stack.imgur.com/eFHTr.png)

如果未选中，您将仅在悬停该特定 ID 时看到外键值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T09:26:09.630

如果您真的想为此继续使用 phpmyadmin，您可以创建一个带有连接的视图，该视图在 1 个表中显示名称、id 和其他信息。然后，您可以使用搜索功能来搜索名称。

# c++ - 将整数转换为二进制并存储在指定大小的整数数组中：c++

> ID：14104208
> 
> 赞同：7
> 
> 时间：2012-12-31T17:06:35.243
> 
> 标签：c++, binary

我想将整数转换为二进制字符串，然后将整数字符串的每一位存储到给定大小的整数数组的元素中。我确信输入整数的二进制表达式不会超过指定数组的大小。如何在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T17:14:17.947

伪代码：

```
int value = ????  // assuming a 32 bit int
int i;

for (i = 0; i < 32; ++i) {
    array[i] = (value >> i) & 1;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T17:16:50.213

```
template<class output_iterator>
void convert_number_to_array_of_digits(const unsigned number, 
         output_iterator first, output_iterator last) 
{
    const unsigned number_bits = CHAR_BIT*sizeof(int);
    //extract bits one at a time
    for(unsigned i=0; i<number_bits && first!=last; ++i) {
        const unsigned shift_amount = number_bits-i-1;
        const unsigned this_bit = (number>>shift_amount)&1;
        *first = this_bit;
        ++first;
    }
    //pad the rest with zeros
    while(first != last) {
        *first = 0;
        ++first;
    }
}

int main() {
    int number = 413523152;
    int array[32];
    convert_number_to_array_of_digits(number, std::begin(array), std::end(array));
    for(int i=0; i<32; ++i)
        std::cout << array[i] << ' ';
} 
```

[编译证明在这里](http://ideone.com/4lThkp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T17:30:30.207

您可以使用 C++ 的[bitset 库](http://www.cplusplus.com/reference/bitset/bitset/11)，如下所示。

```
#include<iostream>
#include<bitset>

int main()
{
  int N;//input number in base 10
  cin>>N;
  int O[32];//The output array
  bitset<32> A=N;//A will hold the binary representation of N 
  for(int i=0,j=31;i<32;i++,j--)
  {
     //Assigning the bits one by one.
     O[i]=A[j];
  }
  return 0;
} 
```

这里需要注意几点：首先，bitset 声明语句中的 32 告诉编译器您希望 32 位来表示您的数字，因此即使您的数字使用较少的位来表示，bitset 变量也将有 32 位，可能与许多前导零。其次，bitset 是一种非常灵活的二进制处理方式，您可以将字符串作为输入或数字，同样您可以将 bitset 用作数组或字符串。它是一个非常方便的库。您可以打印出 bitset 变量 A as `cout<<A;` 并查看它是如何工作的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T17:16:29.890

你可以这样做：

```
while (input != 0) {

        if (input & 1)
            result[index] = 1; 
        else
            result[index] =0;
   input >>= 1;// dividing by two
   index++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T17:15:41.867

正如上面提到的 Mat ，an`int`已经是一个位向量（使用按位运算，您可以检查每个位）。所以，你可以简单地尝试这样的事情：

```
// Note: This depends on the endianess of your machine
int x = 0xdeadbeef; // Your integer?
int arr[sizeof(int)*CHAR_BIT];
for(int i = 0 ; i < sizeof(int)*CHAR_BIT ; ++i) {
  arr[i] = (x & (0x01 << i)) ? 1 : 0; // Take the i-th bit
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T07:14:37.053

## 十进制到二进制：大小无关

两种方式：都将二进制表示存储到动态分配的数组`bits`中（在 msh 到 lsh 中）。

**第一种方法：**

```
#include<limits.h> // include for CHAR_BIT
int* binary(int dec){
  int* bits = calloc(sizeof(int) * CHAR_BIT, sizeof(int));
  if(bits == NULL) return NULL;
  int i = 0;

  // conversion
  int left = sizeof(int) * CHAR_BIT - 1; 
  for(i = 0; left >= 0; left--, i++){
    bits[i] = !!(dec & ( 1u << left ));      
  }

  return bits;
} 
```

**第二种方法：**

```
#include<limits.h> // include for CHAR_BIT
int* binary(unsigned int num)
{
   unsigned int mask = 1u << ((sizeof(int) * CHAR_BIT) - 1);   
                      //mask = 1000 0000 0000 0000
   int* bits = calloc(sizeof(int) * CHAR_BIT, sizeof(int));
   if(bits == NULL) return NULL;
   int i = 0;

   //conversion 
   while(mask > 0){
     if((num & mask) == 0 )
         bits[i] = 0;
     else
         bits[i] = 1;
     mask = mask >> 1 ;  // Right Shift 
     i++;
   }

   return bits;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-31T18:37:18.147

我知道它不会像您希望的那样为正数添加尽可能多的零。但是对于负二进制数，它工作得很好..我只想发布一次解决方案:)

```
int BinToDec(int Value, int Padding = 8)
{
    int Bin = 0;

    for (int I = 1, Pos = 1; I < (Padding + 1); ++I, Pos *= 10)
    {
        Bin += ((Value >> I - 1) & 1) * Pos;
    }
    return Bin;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-12T05:33:29.230

这就是我使用的，它还可以让你给出最终向量中的位数，用前导 0 填充任何未使用的位。

```
std::vector<int> to_binary(int num_to_convert_to_binary, int num_bits_in_out_vec)
{
    std::vector<int> r;

    // make binary vec of minimum size backwards (LSB at .end() and MSB at .begin())
    while (num_to_convert_to_binary > 0)
    {
        //cout << " top of loop" << endl;
        if (num_to_convert_to_binary % 2 == 0)
            r.push_back(0);
        else
            r.push_back(1);
        num_to_convert_to_binary = num_to_convert_to_binary / 2;
    }

    while(r.size() < num_bits_in_out_vec)
        r.push_back(0);

    return r;
} 
```

# jquery - 有没有办法让 scrollTop() 在 div 通过而不是像素数量时采取行动

> ID：14104214
> 
> 赞同：2
> 
> 时间：2012-12-31T17:07:43.403
> 
> 标签：jquery, jquery-selectors

例如，如果您在下面查看我的 jquery。`if ($(this).scrollTop() > 100) {`我希望“100”成为 div的部分。这样当 div 的顶部出现在屏幕底部时， .test 就会出现。然后当 div 的顶部到达屏幕顶部时向左移动。*（我不确定屏幕是不是这个词）*

**jQuery：**

```
var $test = $(".test");
$(window).scroll(function () {
if ($(this).scrollTop() > 100) {
    $test.stop().animate({left: "200px"}, 1000);
} else {
    $test.stop().animate({left: "-90px"}, 1000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:16:13.260

为什么不使用 .position 或 .offset 的 div？

```
if ($(this).scrollTop() > $('#myDiv').position().top { 
```

# haskell - 在 Haskell 中从大型静态列表和映射初始化数据结构

> ID：14104215
> 
> 赞同：3
> 
> 时间：2012-12-31T17:07:50.930
> 
> 标签：haskell, module, limits

我正在将[zxcvbn 密码强度](https://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength-estimation/)算法翻译成 Haskell。

第一步，我从常用单词列表（英文单词、姓氏、男性名字等）中生成几个大型数据结构。这些列表是静态的，只会偶尔重建，并且只有在重新编译应用程序时才会重建。

这些列表和映射用于初始化实际的密码强度算法。

当我将原始 JavaScript 转换为 Scala 时，我将静态值保存为 JSON，算法在启动时会加载它。我只想生成初始化`val`的 Scala ，但是 Java 虚拟机对类有 64KByte 的限制，而我的数据超过了这个限制（每个结构包含数千个单词并且大于 64KBytes）。

在 Haskell 中处理这个问题的最佳方法是什么？我可以只生成一个包含数据的源代码模块吗？最大模块尺寸限制是多少？我搜索了 Haskell2010 报告，但找不到编译器限制部分。

生成 Haskell 源代码显然是我的首选，因为这样代码可以保持纯净。如果我需要加载 JSON 并在启动时对其进行解析，那么模块的那部分将是不纯的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:13:35.513

> 我可以只生成一个包含数据的源代码模块吗？

是的。没有限制——尽管您的特定机器可能无法处理某些类型的数据和某些优化级别。

序列化数据的字节串文字通常“正常工作”。

请参阅前面的问题 -[如何在 Haskell 中将资源编译为二进制文件？](https://stackoverflow.com/q/6402158/83805)[在 Haskell 维基](http://www.haskell.org/haskellwiki/Compiling_in_constants) 上

# java - 从父 pom 继承时管理 Maven 多模块构建

> ID：14104217
> 
> 赞同：1
> 
> 时间：2012-12-31T17:07:54.160
> 
> 标签：java, maven, pom.xml

简而言之，我想做的是一次构建一堆库和应用程序，所有 Maven 项目。据我了解，仅在一个命令行运行中完成此操作的一种方法`mvn package`是创建一个多模块项目，该项目将列出我想要构建的每个模块，将它们放入 Maven 反应器中，然后构建。

按照 Maven 书中的示例，通常多模块似乎`pom`位于各个模块上方的目录中。但是，通常情况下，父`pom`级位于模块上方的目录中，这引发了一个问题，通常情况下，多模块构建也应该是父级吗？我想不是; 但是我想知道为什么我会遇到这个有趣的设计怪癖。

所以，我想知道设置它的正确方法。我看到以下约定/要求：

*   多`pom`模块必须知道其他模块在磁盘上的位置。由于它实际上是从源代码构建它不能简单地依赖已安装的版本（因为它正在安装它们！）
*   父级实际上不必是物理目录，尽管这样会更好。我认为这是最好打破的惯例。
*   实际上，各个库/应用程序甚至不需要知道它们是作为多模块构建的一部分构建的。

这通常如何在多模块构建中设置？有没有更简单的方法来一次管理构建多个 Maven 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:20:52.013

我将所有单独的模块放在根模块中。 [一些软件](https://stackoverflow.com/a/3017105/1205867)存在多层层次结构的问题。

要使子模块在同一级别引用它的父模块：

```
<parent>
    <groupId>com.domain</groupId>
    <artifactId>xyz</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../xyz/pom.xml</relativePath>
</parent> 
```

我建议你不要在单个模块需要继承的多模块（例如属性）中放置任何东西。如果这样做，您将无法独立构建其他模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:36:24.410

我什至会说这是“公约”的模糊部分。文档和常识都表明项目聚合（也称为多模块构建）和继承是为处理不同用例而提供的两种不同机制。

同时，似乎有一个事实上的约定（是的，我知道）将项目聚合和继承父角色组合到一个 pom.xml 中。事实上，父声明的元素和项目聚合机制的模块元素似乎都在引导使用这种组合。

就个人而言，我发现定期将父 pom 分开非常有用。而且我还发现将父 pom 定位在我的源代码管理中一个完全分离的位置很有用，因此我的文件夹结构也是如此。但是，在源代码控制/文件夹结构中定位属于同一多模块构建结构的构建似乎很少有用。也许这甚至可以很好地衡量某些东西是否应该包含在同一个聚合构建中；如果它似乎值得在源文件夹结构中搭配，那么它可能是聚合的有力候选者。

我唯一确定的是，这些事情值得花时间整理。在不创建整体构建结构方面出错可能会更好。. . 处理大量不必要的聚合父子构建模块非常困难。另一方面，聚合单个构建以一起运行是更高级别提供的功能，例如 CI 构建服务器。所以，我想我可能会建议在更多独立性方面犯错。

# c# - 来自 C# 的 PowerShell WhereObjectCommand

> ID：14104222
> 
> 赞同：0
> 
> 时间：2012-12-31T17:09:03.690
> 
> 标签：c#, powershell-2.0

我正在尝试从 C# 调用以下 PS 脚本：

```
Get-MailboxDatabase -IncludePreExchange2007 -Status | Where-Object {$_.Server -eq 'myserver'} 
```

我已经设法使用以下代码在管道之前执行第一部分：

```
 public void Test()
  {
     using (Pipeline pipeline = _runspace.CreatePipeline())
     {
        var cmd1 = new Command("Get-MailboxDatabase");
        cmd1.Parameters.Add("IncludePreExchange2007");
        cmd1.Parameters.Add("Status");

        var cmd2 = new Command("Where-Object");
        //how do I script {$_.Server -eq 'myserver'} ???

        pipeline.Commands.Add(cmd1);
        //pipeline.Commands.Add(cmd2);

        Collection<PSObject> result = pipeline.Invoke();
     }
  } 
```

但是我如何为 Where-Object 编写第二部分的脚本？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:13:13.930

您可以简单地使用 LINQ：

```
result.Where(p => (string)p.Properties["Server"].Value == "myserver")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T16:18:54.463

如果其他用户访问此问题，我将更新此线程。

为了**提高性能**，您可以在 PowerShell 本身中执行过滤，并可以在那里使用 Where-Object。我在这里提供了答案：[Calling PowerShell's where-object from C#](https://stackoverflow.com/questions/36796176/calling-powershells-where-object-from-c-sharp/36798605#36798605)

本质上，您将需要使用添加脚本而不是添加如下命令：

```
 //Getting all command variables
    string myServer = "ServerName";

    //Create Script command
    String customScriptText = String.Format("Get-MailboxDatabase -IncludePreExchange2007 -Status | Where-Object {{$_.Server -eq \"{0}\"}}", myServer);

    pipeline.Commands.AddScript(customScriptText); 
```

**注意**`{ and }`使用双花括号进行转义，即`{{`和`}}`. `\"`还要在 String.Format 方法中使用反斜杠来转义引号。

# c#-4.0 - 返回父类型的扩展

> ID：14104223
> 
> 赞同：1
> 
> 时间：2012-12-31T17:09:04.860
> 
> 标签：c#-4.0, extension-methods

我知道我可以通过泛型来做到这一点，如下所示，但是我如何构建扩展以使用泛型返回父类型？

通用扩展签名：

```
public static TEnum FromString<TEnum>(this Enum par , string val ) where TEnum : Enum {
    return (TEnum) Enum.Parse(par.GetType(), val);
} 
```

签名风格，我知道它不会起作用，但有点像我在寻找的东西。

```
public static this FromString(this Enum par , string val ) {
    return Enum.Parse(par.GetType(), val);
} 
```

基本上，我有一系列枚举，它们的值被解析为一个进程的字符串，作为接收者，我需要将该字符串值解析为枚举以进行验证。最终，如果该`string`值不是 Enumerator 中的有效值，它将返回 null 或`default`，值。事实上，我需要能够返回`source`枚举器的类型而不必做一个泛型。

如果它不可能，那就是kewl，只是想我会尝试在没有泛型的情况下做到这一点，并使用扩展逻辑模式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:41:32.997

简短的回答是否定的，您需要泛型返回正确的枚举*类型*。
否则，您将只有基本`Enum`类型，而不是枚举的特定类型。

你*可以*做的是创建一个这样的扩展方法：

```
public static Enum FromString(this Enum par, string val)
{
    return (Enum) Enum.Parse(par.GetType(), val);    
} 
```

但正如您所看到的，您将获得一种不是您特定枚举的“枚举”类型。
另一方面：

```
Enum val =  default(MyEnum).FromString("SomeEnumValue");
bool isEnum = val is MyEnum; // Returns True 
```

如您所见`val` *， is*的类型`MyEnum`和 isEnum 返回`true`

这也有效：

```
MyEnum val = (MyEnum)default(MyEnum).FromString("SomeEnumValue"); 
```

# c++ - 访问具有模板长度的数组时出现虚假的“数组下标高于数组边界”警告

> ID：14104227
> 
> 赞同：0
> 
> 时间：2012-12-31T17:09:55.600
> 
> 标签：c++, arrays, templates, compiler-warnings, compiler-optimization

我在 Ubuntu 12.04 和 g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 上使用 C++ 编程。

我有一个模板化的 Vector 类

```
template <typename type, int length>
class Vector {
    // Implementation
}; 
```

其中有`length`类型的组件`type`。

我在其他一些类中使用这个类，它也是模板化的。此类将用于其向量的元素数量作为模板参数 ( `dim`)。

这个参数要么是 2 要么是 3。我必须做一些特殊的事情，如果`dim == 3`，所以我或多或少地写了这样的事情：

```
if (dim == 3) {
    // do special things here
} 
```

我想，当使用参数 2 调用类时，编译器会看到，条件永远不会为真，也不会翻译，反之亦然，如果参数是 3，编译器会看到，条件永远不会为假，并且将翻译所有内容并优化`if`.

编译时`-O0`我没有收到任何警告，但是当我打开时`-O3`我收到警告`array subscript is above array bounds`指向这样的行

```
Vector<pr, dim> v;
v[0] = ...
v[1] = ...
if (dim == 3) v[2] = ... 
```

where`pr`是一个类型，作为参数给出。

我不明白，为什么我会收到警告，因为：如果是`dim == 2`，则永远不会执行分配，如果是 3，则分配不会引起任何问题。

我一直认为，模板会像这样工作：编译器获取模板代码并将所有出现的参数替换为给定的参数，然后将其视为一个简单的类。

我现在的问题是，为什么编译器会警告我一些事情，它知道它们永远不会发生？

为什么在使用优化编译时我只会收到警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:23:13.297

即使`if`条件永远不会满足，编译器也会编译代码，并向您发出警告。

您可以忽略警告，因为这`if`将阻止它实际执行，或者在参数为 3 时专门/SFINAE 函数/类来执行额外的操作。

或者等待大约 5 年，直到我们得到`static_if`.

# python - Python图形动画库

> ID：14104228
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:10:04.543
> 
> 标签：python, animation, matplotlib

我有一个模拟设置，它从声音文件生成 2D 图形。我想为我的模拟编写一个可视化工具。就像在音频编辑应用程序中一样，我想播放声音文件并在与我正在播放的声音文件关联的 2D 图形上看到一个垂直条移动。

我目前正在使用`matplotlib`我的地块，但它们都是静态的。我可以做这种互动动画`matplotlib`吗？

有没有其他的图书馆可以推荐？我可以用 C/C++ 和 Python 编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:25:04.153

`matplotlib`更新现有地块很容易。大多数艺术家都有`update_*`修改图表使用的数据的功能，图表将在调用后反映更新的数据`draw()`。

很多内容已经写好了，并且很好地包含在[动画](http://matplotlib.org/api/animation_api.html)模块中，并且有一个非常好的[教程](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)。

如果您已经有一个想要将其推入的框架，则需要执行以下操作：

```
ln, = ax.plot(...)
canv = ax.figure.canvas
# some code 
while True:
    # code
    ln.set_xdata(new_x)
    ln.set_ydata(new_y)
    canv.draw()
    # code 
```

# php - 带有 php、mysql 和 smarty 的类别和子类别

> ID：14104230
> 
> 赞同：0
> 
> 时间：2012-12-31T17:10:12.433
> 
> 标签：php, smarty3

我正在使用 php、mysql 和 smarty 模板为超市构建自定义购物车产品类别和子类别必须在两个单独的表中类别表（id，catname）子类别表（id，cat_id，subcategory）其中 cat_id 指类别假设我的 php 代码是每个类别有 2 个类别和 2 个子类别

```
$smarty = new Smarty;
$smarty->caching = true;
$smarty->cache_lifetime = 120;
$category_mysql = "SELECT * FROM category";
$run_category = mysql_query($category_mysql, $link) or die(mysql_error());
$all_category = mysql_num_rows($run_category);

$category_link = array();
$i=0;
while ($category = mysql_fetch_assoc($run_category)) {
            $ml = array(
                'id' => $category['id'],
                'catname'=> $category['catname'],
            );
            $category_link[$i++] = $ml;
}
$smarty->assign('category_link', $category_link);
$smarty->display("products.tpl"); 
```

我的html代码是：

```
{section name=cats loop=$category_link}
<div class="category">{$category_link[cats].catname}</div>
{/section} 
```

我如何查看其所属类别下方的每个子类别？像：

```
<div class="category">Category 1</div>
<div class="subcat">Sub Cat 1</div>
<div class="subcat">Sub Cat 2</div>
<div class="category">Category 2</div>
<div class="subcat">Sub Cat 3</div>
<div class="subcat">Sub Cat 4</div> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:10:19.750

有许多不同的方法可以给这只特殊的猫剥皮，有些方法比其他方法更有效。下面是我的头顶，旨在让您朝着正确的大方向前进。

除了您之外，您`$category_link`还需要按类别索引您的子类别的东西。类似的东西`$subcategory_link`可能是一个数组数组，首先由类别 id（或名称）索引，然后由每个子类别（或其 id 或其他）的递增整数索引。除了现有的查询和`while`循环之外，运行一个检索所有子类别的查询，然后在第二个类似的循环中填写`$subcategory_link`相关信息。`while`

```
$sc = array(
    'id' => $subcategory['id'],
    'subcategory' => $subcategory['subcategory'],
);
$subcategory_link[$subcategory['cat_id']][$j++] = $sc; 
```

请注意，此数组首先由类别 id 索引。然后在您的模板中：

```
{foreach $category_link as $cat}
<div class="category">{$cat.catname}</div>
    {foreach $subcategory_link[$cat.cat_id] as $subcat}
<div class="subcat">{$subcat.subcategory}</div>
    {/foreach}
{/foreach} 
```

***注意***：上面没有检查正确的 Smarty 语法。不过，您应该明白这一点。

留给您作为练习来确定如何处理没有子类别的类别并提高效率。

# javascript - jQuery 使用正则表达式检查有效的文件名

> ID：14104231
> 
> 赞同：0
> 
> 时间：2012-12-31T17:10:20.833
> 
> 标签：javascript, regex

我有一个表单，让用户在下载文件时输入他们想要的带有扩展名的文件名，但我需要在客户端进行验证（不包含`[^/?*:;{}\\]+\\.[^/?*:;{}\\]+`类似的东西）。文件名不需要包含扩展名，但如果他们愿意，可以。我发现了这一点：[Validate a file name on Windows](https://stackoverflow.com/questions/6730009/validate-a-file-name-on-windows) 但我对 jQuery 不够熟练，无法使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:19:56.837

正如我的评论所说，它不是 jQuery 问题，而是你所追求的 javascript 问题。

你可以走两条路，最简单的是

```
var myString = "hello world";
var regexp = /w+/
var match = regexp.exec(myString);
console.log(myString); //will print the world "hello" 
```

另一个将使用`Regexp Object`.

简单地代替使用“文字正则表达式”，如果您同意这样称呼它，请使用对象

```
var re = new RegExp("\\w+");
var match = re.exec(myString);
console.log(myString); //will print the world "hello" 
```

这个方便的网站是 Ruby 正则表达式的主要网站，但它是创建正则表达式的好工具

[红色的](http://rubular.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:20:44.193

您可以为此尝试以下代码。如果有效，这将返回文件名。否则它将返回**null**

```
var filename = ''; // enter your file name here
alert(filename.match(/^\s*[a-z-._\d,\s]+\s*$/i)) 
```

如果要排除某些字符，请在方括号内提及这些字符，如下所示

```
/^[^<>%$]*$/ 
```

# sql - 当我们使用 SELECT 语句时，SQL 查询可以用特定值（我们动态定义的）替换布尔值吗？

> ID：14104241
> 
> 赞同：2
> 
> 时间：2012-12-31T17:11:40.717
> 
> 标签：sql, oracle, plsql

我只是有一个奇怪的问题。我知道这可能很有趣，但我只是对此感到好奇。这是我的详细问题：

假设数据库中有一个名为“性别”的列，它具有布尔值，即 0 或 1。0=男性，1=女性。现在，当我们显示具有这种类型字段的表单的数据时，我们必须编写代码，即`(gender=0)?Male:Female.`

现在我只想知道sql是否提供任何方式，在生成记录集时自动将所有性别值自动替换为男性或女性。即不需要这一行代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T17:14:54.550

我会使用[decode](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions040.htm)：

```
select decode(gender,0,'Male','Female') from your_table; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T17:21:40.593

除了其他人展示的 case/decode 之外，在 11gR1 及以后的版本中，我们可以拥有一个虚拟列。

```
SQL> create table test(name varchar2(20), gender number(1));

Table created.

SQL> insert into test values ('Paul', 0);

1 row created.

SQL> insert into test values ('Vicky', 1);

1 row created.

SQL> commit;

Commit complete.

SQL> alter table test add (gender_str varchar2(6) generated always as (case gender when 0 then 'Male' when 1 then 'Female' end));

Table altered.

SQL> select * from test;

NAME                                         GENDER GENDER
-------------------- ------------------------------ ------
Paul                                              0 Male
Vicky                                             1 Female 
```

如果您愿意，您也可以索引虚拟列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T17:14:07.893

您可以为此使用`case`语句，如下所示：

```
select
 case gender when 0 then 'Male' when 1 then 'Female' end
from
 ... 
```

如果性别既不是 0 也不是 1，您将在该列中得到一个空值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T17:23:40.113

您还可以考虑将此逻辑编码到一个[虚拟列](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)中，就像他们在 Oracle 中调用它们一样。SQL Server 人员会将它们称为计算列。

这种方法的优点是现有逻辑将继续写入您的性别字段（因此无需重写），但新应用程序可以从该`genderEnglishName`字段中提取。

The "right" answer in my mind is to obey the standard for sex, [ISO 5218](http://en.wikipedia.org/wiki/ISO_5218). I would retain the gender field as an integer, assign the correct translations and leave the interpretation logic up to the presentation layer in case you ever need to work with [internationalization](https://stackoverflow.com/questions/7539001/is-it-really-worth-to-use-integer-over-varchar-for-a-set-of-data/7539495#7539495).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T17:13:37.980

您可以`CASE WHEN`用来评估自己的价值观:)

```
Case when column = true 
then myvalue 
else true End 
```

查看您的确切查询值：而且我相信只有 0 和 1，因此您只需要**一个`When`**:))

```
-- your code
Case when Gender = 0 
Then 'Male'
Else 'Female'
End 
-- rest of your code 
```

# iphone - 获取键盘类型的变量

> ID：14104255
> 
> 赞同：0
> 
> 时间：2012-12-31T17:13:23.883
> 
> 标签：iphone, ios, storyboard, xcode4.5

我一直在尝试获取keyboardType的变量
`self.titleField.keyboardType`
当我使用nslog它返回大约10个0或4的值

我已经为数字键盘实现了自定义行为，所以我需要检查它是显示的是数字键盘还是默认键盘。
我也尝试过`self.view.tag`通过视图而不是键盘来设置它。 用于返回应用程序已通过
的先前视图控制器的所有标记的 nslog 。

我认为这可能是因为我为每个单独的控制器重用了一个视图控制器类
。我正在使用 switch 语句来确定要根据标签显示哪些数据。

他们是一种重置标签的方法`viewWillDisappear`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:29:11.973

`UIKeyboardType`枚举为键盘类型编号命名：

```
switch (self.titleField.keyboardType) {
    case UIKeyboardTypeDefault:
        NSLog(@"default keyboard");
        break;
    case UIKeyboardTypeNumberPad:
        NSLog(@"number pad keyboard");
        break;
    default:
        NSLog(@"unexpected keyboard type %d", self.titleField.keyboardType);
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:56:52.430

尝试将标记值分配给文本字段并检查哪个文本字段成为 TF 委托方法中的第一响应者`-textFieldDidBeginEditing:`

# tomcat - Tomcat7 应用程序启动失败

> ID：14104258
> 
> 赞同：1
> 
> 时间：2012-12-31T17:13:50.640
> 
> 标签：tomcat, maven, jetty, tapestry, cometd

我有一个以下问题，我不知道如何解决。我相信存在一些依赖不兼容的问题，但我不知道如何检查。

有谁知道从哪里开始？

我正在使用 Maven 来管理我的依赖项。我认为是问题根源的依赖性是

```
 <dependency>
        <groupId>org.lazan</groupId>
        <artifactId>tapestry-cometd</artifactId>
        <version>0.9.14</version> 
    </dependency> 
```

但是我不确定如何检查下划线问题。

日志如下所示。

```
SEVERE: Exception starting filter app
java.lang.RuntimeException: Exception constructing service 'PushManager': Error invoking constructor public org.lazan.t5.cometd.services.internal.PushManagerImpl(org.cometd.bayeux.server.BayeuxServer,org.slf4j.Logger,org.lazan.t5.cometd.services.ComponentJSONRenderer,org.apache.tapestry5.ioc.services.TypeCoercer,javax.servlet.http.HttpServletRequest,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServer': Error invoking method public static org.cometd.bayeux.server.BayeuxServer org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(org.lazan.t5.cometd.web.BayeuxServerHttpServletRequestFilter,org.lazan.t5.cometd.services.Authorizers,org.lazan.t5.cometd.services.SubscriptionListeners,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServerHttpServletRequestFilter': Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1467)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Error invoking constructor public org.lazan.t5.cometd.services.internal.PushManagerImpl(org.cometd.bayeux.server.BayeuxServer,org.slf4j.Logger,org.lazan.t5.cometd.services.ComponentJSONRenderer,org.apache.tapestry5.ioc.services.TypeCoercer,javax.servlet.http.HttpServletRequest,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServer': Error invoking method public static org.cometd.bayeux.server.BayeuxServer org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(org.lazan.t5.cometd.web.BayeuxServerHttpServletRequestFilter,org.lazan.t5.cometd.services.Authorizers,org.lazan.t5.cometd.services.SubscriptionListeners,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServerHttpServletRequestFilter': Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:57)org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 52 more
Caused by: java.lang.RuntimeException: Exception constructing service 'BayeuxServer': Error invoking method public static org.cometd.bayeux.server.BayeuxServer org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(org.lazan.t5.cometd.web.BayeuxServerHttpServletRequestFilter,org.lazan.t5.cometd.services.Authorizers,org.lazan.t5.cometd.services.SubscriptionListeners,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServerHttpServletRequestFilter': Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
    at $BayeuxServer_20153764561c.delegate(Unknown Source)
    at $BayeuxServer_20153764561c.addListener(Unknown Source)
    at org.lazan.t5.cometd.services.internal.PushManagerImpl.<init>(PushManagerImpl.java:39)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:48)
    ... 74 more
Caused by: java.lang.RuntimeException: Error invoking method public static org.cometd.bayeux.server.BayeuxServer org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(org.lazan.t5.cometd.web.BayeuxServerHttpServletRequestFilter,org.lazan.t5.cometd.services.Authorizers,org.lazan.t5.cometd.services.SubscriptionListeners,org.lazan.t5.cometd.services.CometdGlobals): Exception constructing service 'BayeuxServerHttpServletRequestFilter': Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.util.MethodInvoker.invoke(MethodInvoker.java:61)
    at org.apache.tapestry5.ioc.internal.util.LoggingInvokableWrapper.invoke(LoggingInvokableWrapper.java:42)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.util.ConstructionPlan.createObject(ConstructionPlan.java:60)
    at org.apache.tapestry5.ioc.internal.ServiceBuilderMethodInvoker.createObject(ServiceBuilderMethodInvoker.java:60)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
    at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
    at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
    at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
    at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 83 more
Caused by: java.lang.RuntimeException: Exception constructing service 'BayeuxServerHttpServletRequestFilter': Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
    at $BayeuxServerHttpServletRequestFilter_201537645620.delegate(Unknown Source)
    at $BayeuxServerHttpServletRequestFilter_201537645620.getBayeuxServer(Unknown Source)
    at org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(CometdModule.java:65)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tapestry5.ioc.internal.util.MethodInvoker.invoke(MethodInvoker.java:50)
    ... 105 more
Caused by: org.apache.tapestry5.ioc.internal.OperationException: Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.logAndRethrow(OperationTrackerImpl.java:121)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:88)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.util.ConstructionPlan.createObject(ConstructionPlan.java:60)
    at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
    at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
    at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
    at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
    at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
    at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
    ... 114 more
Caused by: java.lang.RuntimeException: Error invoking constructor public org.lazan.t5.cometd.web.CometdHttpServletRequestFilter(org.apache.tapestry5.services.ApplicationGlobals,java.util.Map,org.apache.tapestry5.ioc.services.RegistryShutdownHub,java.lang.String): javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:57)
    at org.apache.tapestry5.ioc.internal.util.LoggingInvokableWrapper.invoke(LoggingInvokableWrapper.java:42)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    ... 134 more
Caused by: java.lang.RuntimeException: javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.lazan.t5.cometd.web.ServletHttpServletRequestFilter.<init>(ServletHttpServletRequestFilter.java:36)
    at org.lazan.t5.cometd.web.CometdHttpServletRequestFilter.<init>(CometdHttpServletRequestFilter.java:24)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:48)
    ... 136 more
Caused by: javax.servlet.ServletException: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.atmosphere.cpr.AtmosphereFramework.init(AtmosphereFramework.java:549)
    at org.atmosphere.cpr.AtmosphereServlet.init(AtmosphereServlet.java:191)
    at org.atmosphere.cometd.CometdServlet.init(CometdServlet.java:50)
    at org.lazan.t5.cometd.web.ServletHttpServletRequestFilter.<init>(ServletHttpServletRequestFilter.java:28)
    ... 142 more
Caused by: java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
    at org.atmosphere.cpr.DefaultAsyncSupportResolver.newCometSupport(DefaultAsyncSupportResolver.java:233)
    at org.atmosphere.cpr.DefaultAsyncSupportResolver.resolveWebSocket(DefaultAsyncSupportResolver.java:296)
    at org.atmosphere.cpr.DefaultAsyncSupportResolver.resolve(DefaultAsyncSupportResolver.java:284)
    at org.atmosphere.cpr.AtmosphereFramework.autoDetectContainer(AtmosphereFramework.java:1100)
    at org.atmosphere.cpr.AtmosphereFramework.init(AtmosphereFramework.java:500)
    ... 145 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.atmosphere.cpr.DefaultAsyncSupportResolver.newCometSupport(DefaultAsyncSupportResolver.java:229)
    ... 149 more
Caused by: java.lang.InstantiationError: org.eclipse.jetty.io.ThreadLocalBuffers
    at org.eclipse.jetty.io.BuffersFactory.newBuffers(BuffersFactory.java:27)
    at org.eclipse.jetty.websocket.WebSocketBuffers.<init>(WebSocketBuffers.java:53)
    at org.eclipse.jetty.websocket.WebSocketFactory.<init>(WebSocketFactory.java:102)
    at org.eclipse.jetty.websocket.WebSocketFactory.<init>(WebSocketFactory.java:97)
    at org.atmosphere.container.JettyWebSocketUtil.getFactory(JettyWebSocketUtil.java:79)
    at org.atmosphere.container.JettyAsyncSupportWithWebSocket.<init>(JettyAsyncSupportWithWebSocket.java:55)
    ... 154 more 
```

web.xml

http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"> Flow WebApplication

```
<!-- The only significant configuration for Tapestry 5, this informs Tapestry of where to look for pages, components and mixins. -->
<context-param>
    <param-name>tapestry.app-package</param-name>
    <param-value>com.bomahabo.flow.tapestry</param-value>
</context-param>   

<context-param>
    <param-name>tapestry.prod-modules</param-name>
    <param-value>com.bomahabo.flow.tapestry.services.execution.ProductionModeModule</param-value>
</context-param>
<context-param>
    <param-name>tapestry.dev-modules</param-name>
    <param-value>com.bomahabo.flow.tapestry.services.execution.DevelopmentModeModule</param-value>
</context-param> 
<context-param>
    <param-name>tapestry.qa-modules</param-name>
    <param-value>com.bomahabo.flow.tapestry.services.execution.QAModeModule</param-value>
</context-param> 

<filter>
    <filter-name>app</filter-name>
    <filter-class>org.apache.tapestry5.TapestryFilter</filter-class>    
    <async-supported>true</async-supported>
</filter>
<filter-mapping>
    <filter-name>app</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>ERROR</dispatcher>  
</filter-mapping>

<error-page>
    <error-code>404</error-code>
    <location>/error/404</location>
</error-page> 
```

依赖树

```
+- org.apache.tapestry:tapestry-hibernate:jar:5.3.6:compile
|  +- org.apache.tapestry:tapestry-hibernate-core:jar:5.3.6:compile
|  |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:compile
|  |  +- antlr:antlr:jar:2.7.6:compile
|  |  +- geronimo-spec:geronimo-spec-jta:jar:1.0-M1:runtime
|  |  +- dom4j:dom4j:jar:1.6.1:compile
|  |  |  \- xml-apis:xml-apis:jar:1.0.b2:compile
|  |  +- javassist:javassist:jar:3.12.1.GA:compile
|  |  \- org.hibernate:hibernate-commons-annotations:jar:3.2.0.Final:compile
|  \- org.apache.tapestry:tapestry-core:jar:5.3.6:compile
|     +- org.apache.tapestry:tapestry-json:jar:5.3.6:compile
|     \- org.antlr:antlr-runtime:jar:3.3:compile
|        \- org.antlr:stringtemplate:jar:3.2.1:compile
+- org.apache.tapestry:tapestry-upload:jar:5.3.6:compile
|  +- commons-io:commons-io:jar:2.0.1:compile
|  \- commons-fileupload:commons-fileupload:jar:1.2.2:compile
+- org.apache.tapestry:tapestry-yuicompressor:jar:5.3.6:compile
|  \- com.yahoo.platform.yui:yuicompressor:jar:2.4.7:compile
|     \- rhino:js:jar:1.6R7:compile
+- org.got5:tapestry5-jquery:jar:3.3.3:compile
|  \- commons-lang:commons-lang:jar:2.6:compile
+- org.lazan:tapestry-cometd:jar:0.9.14:compile
|  \- org.atmosphere:atmosphere-cometd:jar:1.0.0:compile
|     +- org.cometd.java:cometd-java-server:jar:2.4.3:compile
|     |  +- org.cometd.java:bayeux-api:jar:2.4.3:compile
|     |  +- org.cometd.java:cometd-java-common:jar:2.4.3:compile
|     |  +- org.eclipse.jetty:jetty-util:jar:7.6.4.v20120524:compile
|     |  \- org.eclipse.jetty:jetty-jmx:jar:7.6.4.v20120524:compile
|     +- org.cometd.java:cometd-websocket-jetty:jar:2.4.3:compile
|     |  +- org.cometd.java:cometd-java-client:jar:2.4.3:compile
|     |  |  \- org.eclipse.jetty:jetty-client:jar:7.6.4.v20120524:compile
|     |  \- org.eclipse.jetty:jetty-websocket:jar:7.6.4.v20120524:compile
|     +- org.cometd.java:cometd-java-annotations:jar:2.4.3:compile
|     \- org.atmosphere:atmosphere-runtime:jar:1.0.0:compile
|        +- org.atmosphere:atmosphere-compat-jbossweb:jar:1.0.0:compile
|        +- org.atmosphere:atmosphere-compat-tomcat:jar:1.0.0:compile
|        \- org.atmosphere:atmosphere-compat-tomcat7:jar:1.0.0:compile
+- org.got5:tapestry5-highcharts:jar:1.2.1-SNAPSHOT:compile
+- org.tynamo:tapestry-security:jar:0.4.7-SNAPSHOT:compile
|  +- org.apache.shiro:shiro-web:jar:1.2.0:compile
|  |  \- org.apache.shiro:shiro-core:jar:1.2.0:compile
|  |     \- commons-beanutils:commons-beanutils:jar:1.8.3:compile
|  +- org.apache.tapestry:tapestry-ioc:jar:5.3.4:compile
|  |  +- org.apache.tapestry:tapestry-func:jar:5.3.4:compile
|  |  +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile
|  |  +- javax.inject:javax.inject:jar:1:compile
|  |  +- log4j:log4j:jar:1.2.14:compile
|  |  +- org.apache.tapestry:tapestry5-annotations:jar:5.3.4:compile
|  |  \- org.apache.tapestry:plastic:jar:5.3.4:compile
|  +- org.tynamo:tynamo-common:jar:0.0.3:compile
|  \- org.tynamo:tapestry-exceptionpage:jar:0.1.2:compile
+- org.tynamo:tapestry-resteasy:jar:0.3.0:compile
|  +- org.jboss.resteasy:resteasy-jaxrs:jar:2.3.0.GA:compile
|  |  +- org.jboss.resteasy:jaxrs-api:jar:2.3.0.GA:compile
|  |  +- org.scannotation:scannotation:jar:1.0.3:compile
|  |  +- javax.annotation:jsr250-api:jar:1.0:compile
|  |  +- commons-httpclient:commons-httpclient:jar:3.1:compile
|  |  \- net.jcip:jcip-annotations:jar:1.0:compile
|  \- org.jboss.resteasy:resteasy-jaxb-provider:jar:2.3.0.GA:compile
|     +- com.sun.xml.bind:jaxb-impl:jar:2.2.4:compile
|     |  \- javax.xml.bind:jaxb-api:jar:2.2.3:compile
|     \- com.sun.xml.stream:sjsxp:jar:1.0.1:compile
|        \- javax.xml.stream:stax-api:jar:1.0:compile
+- org.jboss.resteasy:resteasy-jettison-provider:jar:2.3.4.Final:compile
|  \- org.codehaus.jettison:jettison:jar:1.3.1:compile
+- org.jboss.resteasy:resteasy-multipart-provider:jar:2.2.0.GA:compile
|  \- org.apache.james:apache-mime4j:jar:0.6:compile
+- com.amazonaws:aws-java-sdk:jar:1.3.22:compile
|  +- commons-logging:commons-logging:jar:1.1.1:compile
|  +- org.apache.httpcomponents:httpclient:jar:4.1:compile
|  |  \- org.apache.httpcomponents:httpcore:jar:4.1:compile
|  +- commons-codec:commons-codec:jar:1.3:compile
|  +- org.codehaus.jackson:jackson-core-asl:jar:1.8.9:compile
|  \- org.codehaus.jackson:jackson-mapper-asl:jar:1.8.9:compile
+- org.hibernate:hibernate-c3p0:jar:3.6.10.Final:compile
|  +- org.hibernate:hibernate-core:jar:3.6.10.Final:compile
|  |  +- commons-collections:commons-collections:jar:3.1:compile
|  |  \- javax.transaction:jta:jar:1.1:compile
|  +- c3p0:c3p0:jar:0.9.1:compile
|  \- org.slf4j:slf4j-api:jar:1.6.1:compile
+- hsqldb:hsqldb:jar:1.8.0.10:compile
+- mysql:mysql-connector-java:jar:5.1.21:compile
+- javax.mail:mail:jar:1.4.5:compile
|  \- javax.activation:activation:jar:1.1:compile
+- joda-time:joda-time:jar:2.1:compile
+- net.coobird:thumbnailator:jar:0.4.2:compile
+- org.apache.tapestry:tapestry-test:jar:5.3.6:test
|  +- org.seleniumhq.selenium:selenium-server:jar:2.14.0:test
|  |  +- bouncycastle:bcprov-jdk15:jar:135:test
|  |  +- mx4j:mx4j-tools:jar:3.0.1:test
|  |  +- org.mortbay.jetty:servlet-api-2.5:jar:6.1.9:test
|  |  \- org.yaml:snakeyaml:jar:1.8:test
|  +- org.eclipse.jetty:jetty-plus:jar:7.0.0.v20091005:test
|  |  \- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:test
|  +- org.seleniumhq.selenium:selenium-java:jar:2.14.0:test
|  |  +- org.seleniumhq.selenium:selenium-android-driver:jar:2.14.0:test
|  |  |  \- org.seleniumhq.selenium:selenium-remote-driver:jar:2.14.0:test
|  |  |     +- cglib:cglib-nodep:jar:2.1_3:test
|  |  |     +- org.json:json:jar:20080701:test
|  |  |     \- com.google.guava:guava:jar:10.0.1:test
|  |  |        \- com.google.code.findbugs:jsr305:jar:1.3.9:test
|  |  +- org.seleniumhq.selenium:selenium-chrome-driver:jar:2.14.0:test
|  |  +- org.seleniumhq.selenium:selenium-htmlunit-driver:jar:2.14.0:test
|  |  |  +- org.seleniumhq.selenium:selenium-api:jar:2.14.0:test
|  |  |  \- net.sourceforge.htmlunit:htmlunit:jar:2.9:test
|  |  |     +- xalan:xalan:jar:2.7.1:test
|  |  |     |  \- xalan:serializer:jar:2.7.1:test
|  |  |     +- org.apache.httpcomponents:httpmime:jar:4.1.2:test
|  |  |     +- net.sourceforge.htmlunit:htmlunit-core-js:jar:2.9:test
|  |  |     +- xerces:xercesImpl:jar:2.9.1:test
|  |  |     +- net.sourceforge.nekohtml:nekohtml:jar:1.9.15:test
|  |  |     \- net.sourceforge.cssparser:cssparser:jar:0.9.5:test
|  |  |        \- org.w3c.css:sac:jar:1.3:test
|  |  +- org.seleniumhq.selenium:selenium-firefox-driver:jar:2.14.0:test
|  |  |  \- org.apache.commons:commons-exec:jar:1.1:test
|  |  +- org.seleniumhq.selenium:selenium-ie-driver:jar:2.14.0:test
|  |  |  \- net.java.dev.jna:jna:jar:3.3.0:test
|  |  +- org.seleniumhq.selenium:selenium-iphone-driver:jar:2.14.0:test
|  |  \- org.seleniumhq.selenium:selenium-support:jar:2.14.0:test
|  +- org.eclipse.jetty:jetty-webapp:jar:7.0.0.v20091005:test
|  |  +- org.eclipse.jetty:jetty-xml:jar:7.0.0.v20091005:test
|  |  \- org.eclipse.jetty:jetty-servlet:jar:7.0.0.v20091005:test
|  |     \- org.eclipse.jetty:jetty-security:jar:7.0.0.v20091005:test
|  +- jetty:org.mortbay.jetty:jar:5.1.12:test
|  +- org.eclipse.jetty:jetty-jndi:jar:7.0.0.v20091005:test
|  +- org.eclipse.jetty:jetty-server:jar:7.0.0.v20091005:test
|  |  +- org.eclipse.jetty:jetty-continuation:jar:7.0.0.v20091005:compile
|  |  \- org.eclipse.jetty:jetty-http:jar:7.0.0.v20091005:compile
|  |     \- org.eclipse.jetty:jetty-io:jar:7.0.0.v20091005:compile
|  +- org.apache.tomcat:dbcp:jar:6.0.30:test
|  +- org.apache.tomcat:coyote:jar:6.0.30:test
|  |  +- org.apache.tomcat:servlet-api:jar:6.0.30:test
|  |  \- org.apache.tomcat:juli:jar:6.0.30:test
|  \- org.apache.tomcat:catalina:jar:6.0.30:test
|     \- org.apache.tomcat:annotations-api:jar:6.0.30:test
+- org.testng:testng:jar:5.12.1:test
|  \- junit:junit:jar:3.8.1:test
+- org.easymock:easymock:jar:2.5.2:test
\- javax.servlet:servlet-api:jar:2.5:provided 
```

我还想提一下，当我在本地运行它时，它会成功运行 - 那是使用 maven-jetty 插件，但是当我将它部署到 Tomcat 7 时它失败了。

在我看来，tomcat 缺少一些对码头的依赖，但我不确定我应该添加什么

有什么想法吗？

谢谢你，新年快乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:23:59.370

问题与 on 的潜在依赖`tapestry-cometd`有关`Atmosphere`。

这可能是一个maven问题。您可以检查您的 maven 依赖项，看看是否有另一个版本的`Atmosphere`or `JWebSocket`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:04:37.970

看起来你有一个损坏的罐子。你可以尝试从你的 maven 缓存中删除气氛和码头罐子，然后再试一次吗？

如果这不起作用，我注意到 Tapestry-cometd 和 Tapestry-test 都引入了不同版本的码头。您可以尝试从 pom.xml 中删除 Tapestry-test 依赖项吗？如果删除依赖项有效，则需要在 pom.xml 中指定 7.6.4 版本的 jetty 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:10:55.543

我已设法将 cometd 演示部署到 tomcat 6.0.36。源代码在这里[https://github.com/uklance/tapestry-cometd-demo](https://github.com/uklance/tapestry-cometd-demo)

首先，我使用 pom.xml 中的“tapestry-test”依赖项构建了战争。我将战争部署到 tomcat 并得到了类似的例外情况（如下所列）。我解压了 war 文件并查看了 WEB-INF/lib 并注意到有两个不同版本的 jetty jar：

```
jetty-client-7.6.4.v20120524.jar
jetty-continuation-7.0.0.v20091005.jar
jetty-http-7.0.0.v20091005.jar
jetty-io-7.0.0.v20091005.jar
jetty-jmx-7.6.4.v20120524.jar
jetty-util-7.6.4.v20120524.jar
jetty-websocket-7.6.4.v20120524.jar 
```

正如我们之前讨论的，我怀疑 Tapestry-test 中的传递码头依赖是罪魁祸首。我在我的 pom 中注释掉了 Tapestry-test 依赖并做了一个干净的构建。战争中的码头罐子现在都是同一个版本。结果！

```
jetty-client-7.6.4.v20120524.jar
jetty-continuation-7.6.4.v20120524.jar
jetty-http-7.6.4.v20120524.jar
jetty-io-7.6.4.v20120524.jar
jetty-jmx-7.6.4.v20120524.jar
jetty-util-7.6.4.v20120524.jar
jetty-websocket-7.6.4.v20120524.jar 
```

因此，似乎即使 Tapestry-test 具有“测试”范围，它仍然能够影响包含在战争工件中的依赖项。Maven 在解决依赖项时使用“最近的声明获胜”策略，我猜来自 Tapestry-test 的码头依赖项比来自 Tapestry-cometd 的码头依赖项“更接近”。

所以，我可以看到两个可能的修复：

1.  如果不需要，请从 pom.xml 中删除“tapestry-test”依赖项
2.  为“jetty-continuation”、“jetty-http”和“jetty-io”添加 3 个依赖项到您的 pom.xml，指定版本 7.6.4.v20120524。

这是我最初得到的错误：

```
[INFO] cpr.AtmosphereFramework Installed AtmosphereInterceptor CometD/Bayeux Protocol.
[ERROR] cpr.DefaultAsyncSupportResolver failed to create comet support class: class org.atmosphere.container.JettyAsyncSupportWithWebSocket, error: null
[ERROR] cpr.AtmosphereFramework Failed to initialize Atmosphere Framework
java.lang.IllegalArgumentException: Comet support class org.atmosphere.container.JettyAsyncSupportWithWebSocket has bad signature.
        at org.atmosphere.cpr.DefaultAsyncSupportResolver.newCometSupport(DefaultAsyncSupportResolver.java:233)
        at org.atmosphere.cpr.DefaultAsyncSupportResolver.resolveWebSocket(DefaultAsyncSupportResolver.java:296)
        at org.atmosphere.cpr.DefaultAsyncSupportResolver.resolve(DefaultAsyncSupportResolver.java:284)
        at org.atmosphere.cpr.AtmosphereFramework.autoDetectContainer(AtmosphereFramework.java:1100)
        at org.atmosphere.cpr.AtmosphereFramework.init(AtmosphereFramework.java:500)
        at org.atmosphere.cpr.AtmosphereServlet.init(AtmosphereServlet.java:191)
        at org.atmosphere.cometd.CometdServlet.init(CometdServlet.java:50)
        at org.lazan.t5.cometd.web.ServletHttpServletRequestFilter.<init>(ServletHttpServletRequestFilter.java:28)
        at org.lazan.t5.cometd.web.CometdHttpServletRequestFilter.<init>(CometdHttpServletRequestFilter.java:24)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:48)
        at org.apache.tapestry5.ioc.internal.util.LoggingInvokableWrapper.invoke(LoggingInvokableWrapper.java:42)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.util.ConstructionPlan.createObject(ConstructionPlan.java:60)
        at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
        at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
        at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
        at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
        at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
        at $BayeuxServerHttpServletRequestFilter_e278bc1997a1.delegate(Unknown Source)
        at $BayeuxServerHttpServletRequestFilter_e278bc1997a1.getBayeuxServer(Unknown Source)
        at org.lazan.t5.cometd.services.CometdModule.buildBayeuxServer(CometdModule.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tapestry5.ioc.internal.util.MethodInvoker.invoke(MethodInvoker.java:50)
        at org.apache.tapestry5.ioc.internal.util.LoggingInvokableWrapper.invoke(LoggingInvokableWrapper.java:42)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.util.ConstructionPlan.createObject(ConstructionPlan.java:60)
        at org.apache.tapestry5.ioc.internal.ServiceBuilderMethodInvoker.createObject(ServiceBuilderMethodInvoker.java:60)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
        at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
        at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
        at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
        at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
        at $BayeuxServer_e278bc19979d.delegate(Unknown Source)
        at $BayeuxServer_e278bc19979d.addListener(Unknown Source)
        at org.lazan.t5.cometd.services.internal.PushManagerImpl.<init>(PushManagerImpl.java:39)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.apache.tapestry5.ioc.internal.util.ConstructorInvoker.invoke(ConstructorInvoker.java:48)
        at org.apache.tapestry5.ioc.internal.util.LoggingInvokableWrapper.invoke(LoggingInvokableWrapper.java:42)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.util.ConstructionPlan.createObject(ConstructionPlan.java:60)
        at org.apache.tapestry5.ioc.internal.ConstructorServiceCreator.createObject(ConstructorServiceCreator.java:61)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.SingletonServiceLifecycle.createService(SingletonServiceLifecycle.java:29)
        at org.apache.tapestry5.ioc.internal.LifecycleWrappedServiceCreator.createObject(LifecycleWrappedServiceCreator.java:46)
        at org.apache.tapestry5.ioc.internal.AdvisorStackBuilder.createObject(AdvisorStackBuilder.java:63)
        at org.apache.tapestry5.ioc.internal.InterceptorStackBuilder.createObject(InterceptorStackBuilder.java:54)
        at org.apache.tapestry5.ioc.internal.RecursiveServiceCreationCheckWrapper.createObject(RecursiveServiceCreationCheckWrapper.java:60)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator$1.invoke(OperationTrackingObjectCreator.java:45)
        at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
        at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1121)
        at org.apache.tapestry5.ioc.internal.OperationTrackingObjectCreator.createObject(OperationTrackingObjectCreator.java:49)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:66)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54)
        at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.eagerLoadService(JustInTimeObjectCreator.java:86)
        at org.apache.tapestry5.ioc.internal.RegistryImpl.performRegistryStartup(RegistryImpl.java:320)
        at org.apache.tapestry5.ioc.internal.RegistryWrapper.performRegistryStartup(RegistryWrapper.java:80)
        at org.apache.tapestry5.TapestryFilter.init(TapestryFilter.java:118)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.atmosphere.cpr.DefaultAsyncSupportResolver.newCometSupport(DefaultAsyncSupportResolver.java:229)
        ... 129 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/io/nio/AsyncConnection
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2854)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2854)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2854)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at org.atmosphere.container.JettyWebSocketUtil.getFactory(JettyWebSocketUtil.java:79)
        at org.atmosphere.container.JettyAsyncSupportWithWebSocket.<init>(JettyAsyncSupportWithWebSocket.java:55)
        ... 134 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.io.nio.AsyncConnection
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        ... 160 more 
```

# java - 如何在 Spring Roo 中访问我的数据库中的数据？

> ID：14104261
> 
> 赞同：0
> 
> 时间：2012-12-31T17:14:00.223
> 
> 标签：java, spring, spring-roo

我已经按照一些基本指南设置了 Spring Roo，并且我有一个设置，可以使用 Roo 的标准表单从 Web 浏览器访问我的数据库中的数据（就像在[这个 Youtube 视频](http://www.youtube.com/watch?v=TNE7NBLseRA&t=8m10s)中一样）。现在我想从 Java 代码中访问这些数据，这样我就可以将它“注入”到站点上其他页面的视图中。这是怎么做到的？

编辑：这是我能够访问我的数据的方式：从控制器（或任何类，实际上），我使用 this 注释和这个属性定义：

```
@PersistenceContext
private EntityManager manager; 
```

然后我可以使用如下查询访问数据：

```
List<Announcement> results = manager.createQuery("from Announcement a where a.id = :id").setParameter("id", new Long(1)).getResultList(); 
```

这将为您提供一个 Announcement 类型的列表（这只是我创建的一个实体）。当然，这个查询将只产生一个结果（如果数据库没有 id 为 1 的条目，则为零）。感谢 Micha 提供的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:52:23.187

您可以使用注释在应用程序`@PersistenceContext`中获取 JPA实例。`EntityManager`使用`EntityManager`您可以查询数据库（如这里[所示](http://blog.springsource.org/2006/08/07/using-jpa-in-spring-without-referencing-spring/)）。由于您使用的是 Roo，因此`entityManagerFactory`bean 和事务支持应该已经包含在您的 bean 配置文件中。

您还可以使用 Spring 数据[存储库](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories)来访问您的数据。

也许[这个视频](http://www.youtube.com/watch?v=i2sqiaC_Eg4)可以帮助你。

# c# - 重复双动画

> ID：14104265
> 
> 赞同：2
> 
> 时间：2012-12-31T17:14:35.297
> 
> 标签：c#, wpf, animation

我想将以下动画应用于我的窗口：

```
var ani = new DoubleAnimation(610, TimeSpan.FromSeconds(0.7));
BeginAnimation(Window.WidthProperty, ani); 
```

问题是这个动画只有第一次有效，其他时候没有效果。
为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:41:15.133

您必须在创建`DoubleAnimation`（作为第一个参数）时指定 fromValue。

```
var ani = new DoubleAnimation(ActualWidth, 610, TimeSpan.FromSeconds(0.7)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:17:24.580

您可以添加以下代码：

```
ani.RepeatBehavior = RepeatBehavior.Forever; 
```

`RepeatBehavior`动画将在设置为 Forever完成后自行重复

# php - 保存 tmp 上传的文件

> ID：14104266
> 
> 赞同：4
> 
> 时间：2012-12-31T17:14:44.967
> 
> 标签：php, file-upload, laravel, plupload

我正在使用`pluploader`Laravel，并且在我的管理上，它在创建新文章时的工作方式正在执行以下步骤：

*   输入创建新文章所需的详细信息
*   选择要为文章上传的照片
*   单击按钮时`Create`，将执行以下操作：
    *   将每张照片的上传详细信息保存在会话数组中。这意味着如果要上传 3 个文件，则每个上传都有一个单独的 POST 操作
    *   将照片保存在该会话数组中后，它会在数据库中为文章创建记录
    *   它将`id`创建的文章发送到一个函数，该函数应该获取照片并将它们移动到他们的文件夹中，并将照片记录添加到数据库中

现在，问题是每个临时文件都会`POST`被`tmp_filename`删除，因此当它尝试实际移动照片时......没有照片可以移动。

我是对的，如果是这样，我该如何解决这个问题？在 X 函数结束之前保留 tmp 删除的任何方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:20:04.357

> 我对吗，

是的你是对的。PHP 在请求完成后删除上传的临时文件。PHP手册中也清楚地记录了这一点：

> 如果该文件未被移走或重命名，则该文件将在请求结束时从临时目录中删除。

您可以在此处找到该信息：[POST 方法上传^(*Docs*)](http://php.net/features.file-upload.post-method)。

> 如果是这样，我该如何解决这个问题？

知道这一点确实表明如果您想保留该文件，您应该保留该文件的副本或重命名该文件。

> 在 X 函数结束之前保留 tmp 删除的任何方式？

写得很好，删除将在请求完成时启动。所以在 PHP 中，所有函数通常在请求完成*之前*执行，所以即使是 X 函数*，如果你在同一个请求中调用它*。

如果不在*同一个*请求中调用，则需要引入会话管理并复制或重命名临时文件，然后才会自动删除。与 PHP 中应通过多个请求完成的任何其他操作一样，这很常见。请参阅[会话^(*文档*)](http://php.net/session)。

另见：

*   [php - 带文件上传的多步骤表单](https://stackoverflow.com/q/7664902/367456)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:35:24.447

您可以做的最简单的事情就是在上传文件后将文件移动到其他地方。

但是，我建议您改为这样做：

*   上传照片后，立即创建照片记录并将记录 ID 发送回浏览器。
*   让浏览器插入一个输入字段，其中包含对照片 ID 的引用（例如，`<input type="hidden" name="photos[]" value="1234">`.
*   保存文档表单后，将文档与这些照片 ID 相关联。

这样你甚至不需要会话。

# sqlite - sqlite fts3 unionQuery 的结果不正确和重复

> ID：14104269
> 
> 赞同：0
> 
> 时间：2012-12-31T17:14:53.713
> 
> 标签：sqlite, fts3

我从我的 rawQuery 中得到重复并遵循 OR 逻辑而不是 AND 逻辑的结果，即当我只想要那些时，我将获得包含“tuxedo”的所有条目以及包含“hotel”的所有条目包含两者。

这是我的方法：

```
public ArrayList<Integer> getAdvancedResultIDList(String[] search)
{
    ArrayList<String> queryList = new ArrayList<String>();
    ArrayList<Integer> resultsList = new ArrayList<Integer>();
    SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
    this.mDB = GamesList.mDBHelper.getDatabase();
    Cursor searchCursor = null;
    try
    {
        //TODO:
        // for each string in the search array search the whole of searchable table. Check that the results are only of the values that 
        // contain all the search strings, and add the id of that row to the results ArrayList
        for(int i = 0; i < search.length; i++)
        {
            String query;
            String s = '"' + search[i] + '"';
            query = "SELECT " + KEY_ID + " FROM "+ SEARCHABLE_TABLE + " WHERE " + SEARCHABLE_TABLE + " MATCH " + s;
            queryList.add(query);
        }

        String[] queryArray = queryList.toArray(new String[queryList.size()]);

        String unionQuery = builder.buildUnionQuery(queryArray, KEY_ID + " ASC", null);

        searchCursor = this.mDB.rawQuery(unionQuery, null);

        int colId = searchCursor.getColumnIndex(KEY_ID);

        String resultID;

        for(searchCursor.moveToFirst(); !searchCursor.isAfterLast();searchCursor.moveToNext())
        {
            resultID = searchCursor.getString(colId);
            Integer Id = Integer.parseInt(searchCursor.getString(colId));
            resultsList.add(Id);

        }
        searchCursor.close();

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    finally
    {
        try
        {
            this.mDB.close();

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
    return resultsList;
} 
```

提前致谢，新年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:14:22.450

该[文档](http://www.sqlite.org/fts3.html#section_3)解释了如何使用多个搜索词：

```
SELECT id FROM searchTable WHERE searchTable MATCH 'tuxedo hotel' 
```

# function - 如何在多个 SQL Server 数据库上运行一个函数？

> ID：14104278
> 
> 赞同：1
> 
> 时间：2012-12-31T17:15:48.990
> 
> 标签：function, sql-server-2005

我有一个在 SQL Server 中返回单行的函数。现在我在该服务器上有几个（大约几百个）具有相同表结构的数据库。我想在所有数据库上运行该功能。是否需要在每个数据库中创建函数，还是有其他方法？

这是在 SQL Server 2005 上，顺便说一句。

我不能随意发布实际函数，但它只是一个返回一行的 SQL Server 函数。类似的东西

```
ALTER FUNCTION [dbo].[getTotalOrdersByProductID](@ProductID bigint, @month varchar(100), @year varchar(100))
RETURNS @retTotalOrder TABLE
(
    ProductID BIGINT primary key,
    total int
)
AS
BEGIN;

    INSERT @retTotalOrder
    SELECT ProductID, count(*) AS total
    FROM
    PRODUCTS
    WHERE PRODUCTS.orderdate BETWEEN firstDayOfMonth(@month, @year) AND lastDayOfMonth(@month, @year)
    GROUP BY ProductID

    RETURN

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:33:19.927

使用`.`符号

```
SELECT * FROM Server.Database1.dbo.TableName WHERE example = 12345

SELECT * FROM Server.Database2.dbo.TableName WHERE example = 12345 
```

你可以`UNION`得到结果，这取决于你想要从你的功能中得到什么。

# java - 另一个类中的 Java ActionListener

> ID：14104280
> 
> 赞同：0
> 
> 时间：2012-12-31T17:16:14.447
> 
> 标签：java, swing, class, actionlistener, jmenu

我正在尝试使用 Java Swing 库构建一个小型记事本应用程序。我有一个 main 函数，它调用`JFrame (NotepadClass)`. 在这`NotepadClass`我有一个`MenuDesigner`类是这样的：

```
this.setJMenuBar(new MenuDesigner()); 
```

类`MenuDesigner`扩展`JMenuBar`调用 actionListener ( `MenuActionListener`)，它是在另一个类中编写的。现在我的问题是：如果我点击 "new" `menuItem`，其中的标题`NotepadClass`应该会改变。我如何访问一个两级以上的课程？

我应该使用哪个 Java 概念来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:41:35.820

*   使用[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)而不是[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)，此 API 专为您的目的而设计

*   发布一个[SSCCE](http://sscce.org/)演示了您的问题，只是关于带有[JMenuBar、JMenu 和一个、两个 JMenuItem(s) 的](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，注意其他

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:31:20.660

如果没有看到您的代码，很难给出明确的答案，但是编写一个单独的类来构建菜单的原因之一是您可以将实例传递给该类。

```
this.setJMenuBar(new MenuDesigner(notepadClass)); 
```

这就是为什么在构建 GUI 时拥有一个或多个模型类是好的原因之一。

您可以将最高级别模型类的实例传递给您的所有 GUI 组件，并且每个组件都可以获取或设置它们所代表的模型类的各个部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:21:48.563

您可以在构造函数中传递 NotepadClass 并提供更改标题的方法。

另一种选择是在 NotepadClass 中构建 ActionListener 或让 NotepadClass 本身实现 Actionlistener 接口，以便您可以访问变量或方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T17:26:05.313

为什么您的菜单的 actionListener 在另一个类中？

您可以[创建一个新类，`implements ActionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)您可以在其中添加自己的逻辑。这样您就可以在另一个文件中重复使用它。

此外，您可能应该`MenuDesigner`通过将其移动到自己的文件中来解耦您的类。

# maven - 如何确保 Maven 依赖项具有预期的源版本？

> ID：14104288
> 
> 赞同：0
> 
> 时间：2012-12-31T17:16:52.170
> 
> 标签：maven, version-control

我正在尝试从同一个源代码控制中构建多个 Maven 库。我对版本控制没有强烈的业务需求，因为我唯一的要求就是在构建库或应用程序时，它所依赖的所有内部 Maven 库都使用相同的源版本。

我`buildnumber-maven-plugin`用来获取`${buildNumber}`Maven 中的源版本。但是，将其附加到 Maven`version`坐标是非法的（这将解决我的问题）。我想知道是否有另一种方法可以在 Maven 项目中公开它，然后在客户端（即依赖者）项目中检查它。

# asp.net - 使用 jQuery/asp.net WebApi 时的奇怪行为

> ID：14104289
> 
> 赞同：2
> 
> 时间：2012-12-31T17:16:59.743
> 
> 标签：asp.net, asp.net-web-api

我有 2 个 Web API 项目：

*   Api1 是 JavaScript 前端的测试环境，但有一个 API 后端（默认的 ValuesController），也用于测试。
*   Api2 是“真正的”后端，实验性 JavaScript UI 应该从中提取数据。对于测试，我在这里也使用默认的 ValuesController，因为，我希望有相同的输出。

**现状**

*   Api1-UI可以从自己API的ValuesController中查询Data

*   Api2 返回正确的数据（在 Firefox 和 Fiddler 中测试）

**编码**

JavaScript 客户端：

```
 var _load = function (url) {
        $.ajax({
            url: url,
            method: 'GET',
            accepts: "application/json; charset=utf-8",
            success: function (data) {
                alert("Success: " + data);
            },
            error: function (data) {
                alert("Error :" + data);                  
            }
        });
    }; 
```

WebApi 控制器方法：

```
 public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    } 
```

**问题**

实验前端的 JavaScript UI 无法显示，甚至无法接收来自 API 2 的数据，根据 Fiddler 的说法，这些数据是正确发送的。

我的第一个想法是，我使用了错误的方法，但我尝试了 `$.getJSON`， `$.ajax.`但我总是以错误告终。它只是说*statusText="Error"* 我不明白，为什么它可以显示来自自己的 ApiController 的数据，但不能显示来自“外部”的数据......

感谢您的任何帮助/建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:12:18.797

您似乎正在使用 ajax 从不同域 Y 访问来自 X 的数据。这似乎是一个经典的跨域访问问题。

您需要在响应标头中将**Access-Control-Allow-Origin**设置为值“*”。

```
 Response.Headers.Add("Access-Control-Allow-Origin", "*") 
```

有多种方法可以解决这个问题

*   在 IIS 中定义此标头
*   使用如下所示的 actionfilter 属性

**过滤器属性**

```
public class AllowCrossSiteJsonAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if (actionExecutedContext.Response != null)
            actionExecutedContext.Response.Headers.Add("Access-Control-Allow-Origin", "*");

        base.OnActionExecuted(actionExecutedContext);
    }
} 
```

**在控制器动作上使用属性**

```
[AllowCrossSiteJson]
public Result Get(int id)
{
   //return appropriate result
} 
```

# apache - Cakephp中带有双斜杠的URL路由

> ID：14104292
> 
> 赞同：0
> 
> 时间：2012-12-31T17:17:29.360
> 
> 标签：apache, cakephp, cakephp-2.0

我在日志中看到一些用户正在尝试使用这种 url 格式访问我的网站：

```
http://mysite.com//home/article/123 
```

（注意域后的双斜杠）。我希望这些执行相应的“单斜杠”网址的操作。所以我尝试添加这样的路线：

```
Router::connect('//home/article/:id/*', array(
    'controller'=>'article',
    'action'=>'view'),
    array('pass' => array('id'),
    'id' => '[0-9]+',
)); 
```

但我得到这个错误：

```
Error: [MissingPluginException] Plugin  could not be found. 
```

我也尝试了这些重写规则：

```
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L] 
```

但是网址没有改变，我得到了同样的错误。

为什么这是错误的？我需要向 cakephp 路由（或 Apache RewriteRule）添加什么规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-27T12:12:54.703

这是缓存的问题。

就我而言，我在 Nginx 服务器上的 URL 中有双斜杠。解决方案是删除此缓存。去做这个 ：

```
rm -rf /path/to/application/app/tmp 
```

现在您需要重新创建位于 tmp 文件中的文件：

```
mkdir /path/to/application/app/tmp/cache
mkdir /path/to/application/app/tmp/logs
mkdir /path/to/application/app/tmp/purifier 
```

不要忘记检查每个文件的权限，以避免出现警告（512）等错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:25:22.650

路由器不会重定向，它只是将 url 映射到控制器操作。如果要删除`//`，请在网络服务器上进行重写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:46:52.110

您需要使用 .htaccess 中的重写规则来执行此操作。但是，您正在使用的重写不会解决问题，因为它只会删除域名和第一个斜杠之后的双斜杠。

```
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L] 
```

此规则仅适用于 URL 的以下部分：

**首页/文章/123**

所以它会解决这个问题：

**http://www.example.com/home//articles/123**

但不是这个：

**http://www.example.com//home/articles/123**

如果您需要解决这两种情况，您需要做的是添加此规则，或者添加另一个规则：

```
RewriteRule ^/(.*)$ http://www.example.com/$1 [R=301,L] 
```

# ios - Boost Graph Library，在iOS上稳定吗？

> ID：14104295
> 
> 赞同：3
> 
> 时间：2012-12-31T17:17:47.973
> 
> 标签：ios, boost, boost-graph

> Boost Graph Library 是一个只有头文件的库，不需要构建即可使用。

它包含一些我想要用于我的 iOS 应用程序的预制功能：

*   `dijkstra_shortest_paths`

*   `astar_search`

但是，由于缺乏回归测试， **iOS（或 Android）并未正式支持**Boost ，而且我对 Boost 或 iOS 的经验不足，无法舒适地对其进行测试。

是否有人`Boost.Graph`在 iOS 上使用，如果是，它是否稳定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:22:17.163

是的，绝对是稳定的。

Apple 的 LLVM 编译器（你应该在 iOS 应用程序中使用它）是当今可用的最符合 C++11 的编译器之一，因此可以毫无问题地编译和运行 boost。

更不用说 iOS 也完全兼容 POSIX，这使得大多数框架都可以在 iOS 上使用。如有疑问，请尝试，如果*不起作用*，请返回并提出问题。

充分利用已有的东西，好好利用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:42:14.697

因此，Boost 库是稳定的，但 Boost Graph 库在所有 darwin 风格上都失败了（darwin- 4.4_0x intel- darwin- 12.0 intel- darwin- 11.1 darwin- 4.4）

[http://www.boost.org/development/tests/release/developer/summary.html](http://www.boost.org/development/tests/release/developer/summary.html)

也许您可以尝试其他替代方案，例如 LEDA (http://www.algorithmic-solutions.com/news/archive.htm)

谢谢。

# c++ - clang++、boost::spirit 和 c++11

> ID：14104298
> 
> 赞同：1
> 
> 时间：2012-12-31T17:18:00.813
> 
> 标签：c++, xcode, c++11, boost-spirit, clang++

我正在使用与 Xcode 4.6 一起打包的 clang++ (clang-421.0.60)，但遇到了 boost::spirit 的问题。如果我在没有任何标志的情况下编译，一切都编译得很好。如果我使用 '-std=c++11' 编译，则会收到以下错误（包括“boost/spirit/include/qi.hpp”）：

```
In file included from test_spirit11.cpp:1:
In file included from /usr/local/include/boost/spirit/include/qi.hpp:16:
In file included from /usr/local/include/boost/spirit/home/qi.hpp:14:
In file included from /usr/local/include/boost/spirit/home/qi/action.hpp:14:
In file included from /usr/local/include/boost/spirit/home/qi/action/action.hpp:21:
/usr/local/include/boost/spirit/home/support/action_dispatch.hpp:21:10: fatal error: 
  'type_traits' file not found

#include <type_traits> 
```

问题是使用的默认库 (stdlibc++) 将 type_traits 定义为“tr1/type_traits”，而 boost::spirit 只需要“type_traits”。我当然可以通过以下方式解决这个问题：

```
 clang++ -std=c++11 -stdlib=libc++ <...> 
```

虽然我很想使用 libc++，但这样做的实用性很困难（许多库仍然使用并依赖于 stdlibc++）。因此，我被迫不使用 libc++。

有人对如何处理这个问题有任何建议吗？我真的希望更多的库维护者支持 libc++，或者 Apple 提供更新版本的 stdlibc++。能够访问新的 c++11 功能，但由于缺乏库支持而无法完全使用它们是一个很大的挫折。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:43:40.193

> 问题是使用的默认库（stdlibc++）

它被称为 libstdc++

> 将 type_traits 定义为 'tr1/type_traits'，而 boost::spirit 只需要 'type_traits'。

`<tr1/type_traits>`不是一回事，它完全是一个不同的标题。`boost::spirit`想要 C++11 标头`<type_traits>`，它是一个不同的标头（尽管它们确实包含一些类似的功能，在不同的命名空间中。）

问题可能是您使用的是 Apple 不支持 C++11 的旧版 GCC (4.2) 附带的 libstdc++。

如果您想使用 C++11，您需要将 clang 与 libc++ 一起使用，或者安装更新的 GCC 以获得更新的 libstdc++。出于许可原因，Apple 不会提供更新的 GCC，但您可以自己安装它并告诉 Xcode 如何找到标头和库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T14:14:22.933

如果您不想在 boost 中使用 C++11 功能，可以禁用它。
编辑 boost clang.hpp 来管理特性。
例如，要禁用`type_traits`文件未找到错误，您可以添加到末尾：

```
#define BOOST_NO_VARIADIC_TEMPLATES 
```

# mysql - MySQL SELECT WHERE datetime 匹配天（不一定是时间）

> ID：14104304
> 
> 赞同：153
> 
> 时间：2012-12-31T17:19:14.417
> 
> 标签：mysql, date, select

我有一个包含日期时间列的表。无论时间如何，我都希望返回给定日期的所有记录。或者换句话说，如果我的表只包含以下 4 条记录，那么如果我限制为 2012 年 12 月 25 日，则只会返回第 2 条和第 3 条记录。

```
2012-12-24 00:00:00
2012-12-25 00:00:00
2012-12-25 06:00:00
2012-12-26 05:00:00 
```

* * *

## 回答 #1

> 赞同：376
> 
> 时间：2012-12-31T17:24:07.770

**永远不要**使用像这样的选择器`DATE(datecolumns) = '2012-12-24'`- 它是性能杀手：

*   它将计算`DATE()`所有不匹配的行，包括那些
*   这将使查询无法使用索引

使用起来要快得多

```
SELECT * FROM tablename 
WHERE columname BETWEEN '2012-12-25 00:00:00' AND '2012-12-25 23:59:59' 
```

因为这将允许在不计算的情况下使用索引。

**编辑**

正如 Used_By_Already 所指出的，自 2012 年最初的回答以来，已经出现了 MySQL 的版本，其中使用 '23:59:59' 作为一天结束不再安全。更新版本应为

```
SELECT * FROM tablename 
WHERE columname >='2012-12-25 00:00:00'
AND columname <'2012-12-26 00:00:00' 
```

答案的要点，即在计算表达式上避免选择器，当然仍然有效。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-31T17:23:13.433

`... WHERE date_column >='2012-12-25' AND date_column <'2012-12-26'`可能比`DATE`.

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-05-23T13:35:14.007

您可以使用`%`：

```
SELECT * FROM datetable WHERE datecol LIKE '2012-12-25%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-10T06:56:26.907

SELECT * FROM `table`where Date(col) = 'date'

# javascript - 带有 Google JavaScript 客户端库的 Google Contacts API

> ID：14104309
> 
> 赞同：15
> 
> 时间：2012-12-31T17:19:48.163
> 
> 标签：javascript, google-api, google-contacts-api, google-api-js-client

我正在尝试使用[Google Contacts API v3](https://developers.google.com/google-apps/contacts/v3/)。

由于 OAuth2 身份验证和授权，我从[Google APIs Client Library for JavaScript](https://code.google.com/p/google-api-javascript-client/)开始。我对 API 访问的那部分**没有任何问题。**

但是在完成身份验证部分之后，我不知道下一步该做什么。我可以将[google-api-javascript-client](https://code.google.com/p/google-api-javascript-client/)用于 Google Contacts API v3 吗？在[javascript-client 支持的 Google API 列表中，](https://code.google.com/apis/explorer/)联系人 API 不会出现。但我可以完全访问[OAuth 2.0 Playground 工具](https://developers.google.com/oauthplayground/)。

我真的很困惑哪个客户端最适合使用最新的 Google Contacts API。[gdata-javascript-client](http://code.google.com/p/gdata-javascript-client/)是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-29T17:17:59.170

要将 v3 联系人 API 与 gapi（Google JS 客户端库）提供的身份验证令牌一起使用，这很有帮助，使用`alt=&json`

```
$.getJSON('https://www.google.com/m8/feeds/contacts/default/full/?access_token=' + 
             authResult.access_token + "&alt=json&callback=?", function(result){
      console.log(JSON.stringify(result));
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-24T00:03:15.970

我知道这是一个老问题，但是在查看如何从 Google 帐户读取联系人信息时会出现这个问题。

如果您只需要访问联系人以将其导入或显示电子邮件、电话号码或其他信息而无需修改，则可以使用人员 API ( [https://developers.google.com/people /](https://developers.google.com/people/)）。对于 javascript，您可以查看示例选项卡。

我创建了一个要点，这几乎是来自 Google 的示例，但添加了 requestField 参数。

[https://gist.github.com/ddbb1977/7a4b408ed17c7249252a](https://gist.github.com/ddbb1977/7a4b408ed17c7249252a)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T23:50:10.110

您遇到的问题是 Contacts API v3 是一个较旧的 API，可与已弃用的[GData Client Library](http://code.google.com/p/gdata-javascript-client/)一起使用。因此它与较新的[Google APIs JavaScript Client](http://code.google.com/p/google-api-javascript-client/)不兼容。

现在您需要加载和使用 GData 客户端库。有关 GData 库和 Google API 客户端之间差异的更多信息，请参阅这个最近的 SO 问题：[gapi.client.load 与 google.load](https://stackoverflow.com/questions/14113257/gapi-client-load-versus-google-load)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-04T12:40:24.150

不幸的是，Google 联系人 API 无法与新的 Javascript 客户端库一起使用。它仅适用于 GData 客户端库。我尝试过使用 GData 客户端库，但是这很困难，因为您在每个时刻都会在文档中收到该库已被弃用的警告。

因此，我使用了氢化物，

1.  使用新的客户端库，以获得身份验证。
2.  使用 URL 获取联系人

不幸的是，由于跨域限制，您需要使用 JSONP，否则浏览器会失败。

```
 <script src="https://apis.google.com/js/client.js"></script>
.....
function contactsInit() {
  var clientId = 'YOURCLIENTID.apps.googleusercontent.com';
  var scopes = 'https://www.google.com/m8/feeds';
  gapi.auth.authorize({
    client_id: clientId, scope: scopes, immediate: false}, 
     handleAuthResult);

 function handleAuthResult(authResult) {
 if (authResult && !authResult.error) {
   var url = 
    "https://www.google.com/m8/feeds/contacts/default/" + 
    "full?alt=json-in-script&access_token=" + 
    authResult.access_token + 
    "&max-results=7000&v=3.0";

   var myJSONP = new Request.JSONP({
      url: url,
      callbackKey: 'jsoncallback',
      data: {
            },
      onRequest: function(url){
                // a script tag is created with a src equal to url
          },
      onComplete: function(data){
                // the request was completed.
            }
      }).send();
    }
 }
}

function Skeleton() {}
  if (!gdata) {
    var gdata = new Skeleton();
    gdata.io  = new Skeleton();
    gdata.io.handleScriptLoaded = function(data)    {
      processContacts(data);
  }
} 
```

注意：我使用 Mootools 进行 JSONP，但您也可以使用 jquery 或 vanilla js 以及 [如何在没有 JQuery 的情况下从 Javascript 发出 JSONP 请求？](https://stackoverflow.com/questions/6132796/how-to-make-a-jsonp-request-from-javascript-without-jquery)

您需要提供自己的 YOURCLIENTID，并定义 processContacts 函数。

gdata.io.handleScriptLoaded(data) 是必要的，因为这是 url 在回调期间所期望的。

我使用7000的限制，但我认为没有必要。

如果您不想使用 JSONP，您可以将 access_token 转发到您的网络服务器，并在那里处理 URL，例如使用 cURL 或使用 Node.js，只需将 json-in-script 替换为 json。

在 json-in-script 在浏览器中很重要，否则浏览器会发牢骚。

感谢此页面上的其他答案，这为我指明了正确的方向。

我希望 Google 将使联系人 API 能够与新的 Javascript 客户端库一起使用。我希望其他人同时能够使用此解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T07:30:53.770

要使用 Google plus 获取联系人列表，请使用：-

```
<script src="https://apis.google.com/js/client.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script>
  function auth() {
    var config = {
      'client_id': 'OAUTH_CLIENT_ID',
      'scope': 'https://www.google.com/m8/feeds'
    };
    gapi.auth.authorize(config, function() {
      fetch(gapi.auth.getToken());
    });
  }

  function fetch(token) {
    $.ajax({
    url: "https://www.google.com/m8/feeds/contacts/default/full?access_token=" + token.access_token + "&alt=json",
    dataType: "jsonp",
    success:function(data) {
              console.log(JSON.stringify(data));
    }
}); 
```

}

在 HTML 正文中：-

```
<button onclick="auth();">GET CONTACTS FEED</button> 
```

输出将作为包含电话号码的联系人的字段。

确保使用正确的重定向 uri 从谷歌开发者控制台获取客户端 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-12T15:45:15.057

这是我们发现用于获取个人数据的方法：

```
var data = (JSON.stringify(data.feed.entry[0].gd$email, null, 4));
console.log(data); 
```

如果您运行 JSON.stringify(data) 您可以看到所有可以调用的标头。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-01-02T19:29:48.750

google contact v3 是你这份工作最好的朋友

在这里您可以找到所有可能的请求端点 [https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)

就像所有联系人列表一样，这是终点 [https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts)

获得身份验证后，您可以请求此 url 以获取所有联系人列表，这是 python [http://code.google.com/p/gdata-python-client/source/browse/samples/contacts/contacts_example 中的一个示例。 py](http://code.google.com/p/gdata-python-client/source/browse/samples/contacts/contacts_example.py)

# php - 不使用 next() 直接获取键名

> ID：14104313
> 
> 赞同：0
> 
> 时间：2012-12-31T17:20:09.753
> 
> 标签：php

我有这个数组：

```
$foo = array(
    'bar1' => 1,
    'bar2' => 2
); 
```

现在我想*直接*获取第二个键的名称。我怎么能不使用`next()`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:21:14.310

```
$keys=array_keys($foo);
echo $keys[1]; 
```

如果您只需要一个键并且拥有 PHP 5.4，则可以在一个语句中取消引用它：

```
echo array_keys($foo)[1]; 
```

# java - .charCodeAt() 的 Java 等效项

> ID：14104316
> 
> 赞同：19
> 
> 时间：2012-12-31T17:20:27.913
> 
> 标签：java, javascript, string, unicode, porting

在 JavaScript 中，`.charCodeAt()`在您传递给函数的字符串中的某个点返回一个 Unicode 值。如果我只有一个字符，我可以使用下面的代码来获取 Java 中的 Unicode 值。

```
public int charCodeAt(char c) {
     int x;
     return x = (int) c;
} 
```

如果我在 Java 中有一个字符串，我将如何获取字符串中单个字符的 Unicode 值，就像`.charCodeAt()`函数对 JavaScript 所做的那样？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-31T17:26:38.817

Java也有同样的方法：[Character.codePointAt(CharSequence seq, int index);](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#codePointAt%28java.lang.CharSequence,%20int%29)

```
String str = "Hello World";
int codePointAt0 = Character.codePointAt(str, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:23:04.140

试试这个：

```
public int charCodeAt(String string, int index) {
    return (int) string.charAt(index);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T12:55:21.120

有一种方法可以过滤您需要的特殊字符。只需检查[ASCII](http://www.elcodigoascii.com.ar/codigo-americano-estandar-intercambio-informacion/codigo-ascii.png)表

希望能帮助到你

```
public class main {

public  static void main(String args[]) {
    String str = args[0];
    String bstr = "";
    String[] codePointAt = new String[str.length()];

    if (str != "") 
    {
        for (int j = 0; j < str.length(); j++) 
        {
            int charactercode=Character.codePointAt(str, j);
            //CHECK on ASCII TABLE THE SPECIAL CHARS YOU NEED
            if(     (charactercode>31 && charactercode<48) ||
                    (charactercode>57 && charactercode<65) ||
                    (charactercode>90 && charactercode<97) ||
                    (charactercode>127)

                )
            {
                codePointAt[ j] ="&"+String.valueOf(charactercode)+";";
            }
            else
            {
                codePointAt[ j] =  String.valueOf( str.charAt(j) );
            }
        }

        for (int j = 0; j < codePointAt.length; j++) 
        {
            System.out.println("CODE "+j+" ->"+ codePointAt[j]);
        }

    }   
 }

} 
```

**输出**

```
call with ("TRY./&asda")

CODE 0 ->T
CODE 1 ->R
CODE 2 ->Y
CODE 3 ->&46;
CODE 4 ->&47;
CODE 5 ->&38;
CODE 6 ->a
CODE 7 ->s
CODE 8 ->d
CODE 9 ->a 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-31T17:24:59.023

```
short unicode = string.charAt(index); 
```

# sql-server - SQL Server 2008 R2 Standard 和 Analysis Services 的内存限制

> ID：14104319
> 
> 赞同：1
> 
> 时间：2012-12-31T17:20:42.470
> 
> 标签：sql-server, memory-management, sql-server-2008-r2, licensing, server-configuration

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms143685%28v=sql.105%29.aspx)，SQL Server 2008 标准版的内存限制为 64 GB。有谁知道这个总数是否仅适用于 SQL Server、您在该实例上运行的每个服务（SQL、SSAS、SSIS），还是您在该实例中运行的所有服务共享的单个总数。

例如，如果我想为 SQL 分配 64 GB 内存，**在我的许可下**是否有可用内存供我在该实例上运行任何其他服务？

**注意：**这不是关于物理内存限制的问题，因为我的服务器有足够多的物理内存来满足我的分配要求。我只是想知道我是否会受到许可证本身的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:57:54.467

看起来它的 64GB 限制是每个实例，而不是服务器。其他人在这篇文章中问了同样的问题...... [http://www.brentozar.com/archive/2010/06/sql-server-r-standard-supports-less-memory/](http://www.brentozar.com/archive/2010/06/sql-server-r-standard-supports-less-memory/)

# wxpython - wxrichtextctrl 字体对话框

> ID：14104322
> 
> 赞同：0
> 
> 时间：2012-12-31T17:20:44.280
> 
> 标签：wxpython

我正在用 wxrichtextctrl 开发一个小应用程序。我的字体功能异常。下面是字体功能。

```
 def OnFont(self,event):
      if not self.display.HasSelection():
          return
      r = self.display.GetSelectionRange()
      fontData = wx.FontData()
      fontData.EnableEffects(False)
      attr = wx.richtext.RichTextAttr()
      attr.SetFlags(wx.TEXT_ATTR_FONT)
      dlg = wx.FontDialog(self, fontData)
      if dlg.ShowModal() == wx.ID_OK:
        fontData = dlg.GetFontData()
        font = fontData.GetChosenFont()
        color=fontData.GetChosenColor()
        if font:
            attr.SetFlags(wx.TEXT_ATTR_FONT)
            attr.SetFont(font)
            self.display.SetStyle(r, attr)
      dlg.Destroy() 
```

这样做的问题是，如果所选文本带有下划线并且设置了某些字体，则下划线会被删除。对话框有没有办法只修改选择的当前字体而不是更改文本粗细、下划线、斜体。或者这可能与richtextformatting 对话框。或者是否可以修改字体对话框以仅显示选择字体和大小选项并修改所选文本。有人可以指出一个好的示例文档。

更新：我可以为对话框设置预定义的字体，但问题是获取所选文本的字体值。我正在尝试获取选择中第一个字符的样式，并将其设置为字体对话框，包括下划线、字体、粗体、斜体和大小。下面是我想做的代码。

```
 attr = wx.richtext.RichTextAttr()
    attr.SetFlags(wx.TEXT_ATTR_FONT)
    fontofselection=self.richtextctrl.GetStyle(1,attr)#this works without errors 
    fontData.SetInitialFont(fontofselection)#this generates above mentioned error. probably because getstyle is not getting font object type. Is there another method to get font of a character at particular position. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:47:55.800

我不确定您是否可以使用默认的 FontDialog 来禁用/启用某些字段。它按原样出现。但是，您可以选择将其预设为某个值和/或忽略某些值。

为此，您可以将`data`参数传递给[对话框构造函数](http://wxpython.org/docs/api/wx.FontDialog-class.html#__init__)。您必须自己构造 FontData 对象并将其传递给对话框。这段示例代码取自[Mouse vs. Python](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)博客：

```
data = wx.FontData()
data.EnableEffects(True)
data.SetColour(self.curClr)         # set colour
data.SetInitialFont(self.curFont)

dlg = wx.FontDialog(self, data) 
```

查看文章以获得更完整的示例。另请查看[FontData](http://wxpython.org/docs/api/wx.FontData-class.html)对象的文档以了解如何构造和操作它。

或者，您可以使用不太友好的对话框 (IMO) [FontEnumerator](http://www.wxpython.org/docs/api/wx.FontEnumerator-class.html)。同样在同一个博客上是另一个[很好的例子](http://www.blog.pythonlibrary.org/2011/04/28/wxpython-learning-to-use-fonts/)。您还可以获得您需要的所有字体和/或其他参数的列表，并让您拥有`Dialog`.

**更新**

要从特定位置的文本中获取正确的数据，您需要使用[`GetStyle`](http://wxpython.org/docs/api/wx.richtext.RichTextCtrl-class.html#GetStyle)or `GetStyleForRange`，但您使用错误。如果您阅读文档，您会注意到这些返回`True`成功或`False`失败，并且您应该使用`attr`来获得结果。例如：

```
attr = wx.richtext.RichTextAttr()
attr.SetFlags(wx.TEXT_ATTR_FONT)
success=self.richtextctrl.GetStyle(1,attr)
fontData.SetInitialFont(attr.GetFont()) # And extract any other information from there 
```

请注意，这未经测试，但应按预期工作。

请查看[文档](http://wxpython.org/docs/api/wx.richtext.TextAttrEx-class.html)以`RichTextAttr`查看可以从那里提取的内容。我认为下划线/粗体/斜体都在 Font 对象中：检查`GetUnderlined`，`GetWeight`和`GetStyle`（以及它们各自的设置器。

始终检查文档，您会在不到一个小时内找到答案:)

# javascript - jQuery.wrap 导致范围错误

> ID：14104329
> 
> 赞同：0
> 
> 时间：2012-12-31T17:21:15.837
> 
> 标签：javascript, jquery

好吧，这太疯狂了。

使用 jQuery 1.8.3，我想将以下元素包装在一个 div 中：

```
<div id="main" role="main">
 <h2>Item (250 x 250)</h2>
 <div id="item" style="width:250px; height:250px;background:#ccc;">&nbsp;</div>
</div> 
```

当我尝试用另一个简单的 div 包装时，我在 Chrome 中得到“RangeError：超出最大调用堆栈大小”。

```
$("#item").wrap("<div />"); 
```

另外，在控制台中我获取 $("#item") 它只返回一个项目；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:43:14.793

jQuery 已经有一个被调用的函数[`slice`](http://api.jquery.com/slice/)，你正在用你自己的[插件](http://jsfiddle.net/DeanIconWeb/fQv7E/)覆盖它。该行为与预期的不同，这可能导致过多的递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:31:15.900

**RangeError：超出最大调用堆栈大小：**您的代码中有无限循环吗？您可以发布更多代码吗？

如果通过 id 选择一个 DOM 元素，则只能返回一个元素。

id 是唯一的。如果您有两个具有相同 id 的元素，jQuery 将返回两个元素，但不是在每个浏览器中。在 IE 中，您将获得这两个元素中的第一个。

定义您自己的类 '.item' 并设置 class="item"。然后您可以正确选择多个元素。

和

```
var countOfElements = $('.selector').length; 
```

您可以获得所选元素的数量。

# jquery - 滚动时淡入

> ID：14104330
> 
> 赞同：0
> 
> 时间：2012-12-31T17:21:19.357
> 
> 标签：jquery, css, menu, scroll, fading

我的网站是 www.jeremyspence.net78.net。当您向下滚动时，我想让主菜单消失（您现在看到的一个菜单）和另一个较小的菜单（有点像 apple.com 的苹果菜单）出现在固定的顶部，我正在考虑制作一个粘性菜单，但我希望菜单在您滚动时出现在顶部，而不仅仅是从屏幕上的另一个点粘到顶部。有谁知道如何在滚动时显示菜单，或者任何教你如何做的教程？我想一个航点插件可以做到这一点，但我不知道怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:30:51.913

您可以使用 jquery **.scroll**方法来实现这一点。您可以显示代码以在 .scoll 事件处理程序中显示菜单

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { color:blue; }
  p { color:green; }
  span { color:red; display:none; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div>Try scrolling the iframe.</div>
  <p>Paragraph - <span>Scroll happened!</span></p>
<script>
    $("p").clone().appendTo(document.body);
    $("p").clone().appendTo(document.body);
    $("p").clone().appendTo(document.body);
    $(window).scroll(function () { 
      $("span").css("display", "inline").fadeOut("slow"); 
    });

</script>

</body>
</html> 
```

[您可以在此处](http://api.jquery.com/scroll/)找到文档和示例

# image - 黑莓 WebWorks HTML5 Eksternal 图像不会显示

> ID：14104334
> 
> 赞同：0
> 
> 时间：2012-12-31T17:21:41.310
> 
> 标签：image, blackberry-webworks

我是智能手机开发的新手。经过短暂的研究，我选择了 BlackBerry WebWorks SDK。

我的设备是 8530 (CDMA)，通过 WiFi 连接互联网。

例如，在我的 index.html 上，我需要从外部链接显示带有 src 的图像 `<img src="http://www.domainname.com/img/example.jpg">`

没有运气，它不会出现。如果源是本地图像，则可以正常工作。

我已经更改了`<access uri="*" subdomains="true"/>`config.xml 也图像仍然没有显示。

在黑莓和 stackoverflow 论坛上寻找答案，但没有运气。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:27:36.947

我希望 uri="*" 访问元素会显示图像。另一个建议是将图像来自的域明确列入白名单，如下所示：

您能否确认您的页面加载正常，但它只是没有出现的图像？

# css - jquery-ui：对齐多个图标和文本

> ID：14104337
> 
> 赞同：2
> 
> 时间：2012-12-31T17:21:53.247
> 
> 标签：css, jquery-ui

我在标题中对齐两个 jquery-ui 图标和文本在行中间有一段地狱般的时间。（代码打击）。任何人都可以帮助漂亮pleeeeeease吗？

```
<div class="ui-widget-header">
  <span class="ui-icon ui-icon-close"></span><span class="ui-icon ui-icon-wrench"></span>Text
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T17:33:29.987

我不太清楚你想要什么作为输出。

如果你试图让图标和文本都出现在一行上，你可以通过创建一个新的 CSS 类来做到这一点：

```
.ui-icon.inline { display:inline-block; }​
.ui-widget-header.center { text-align:center; } 
```

然后将该类添加到您的图标中：

```
<div class="ui-widget-header">
    <span class="ui-icon inline ui-icon-close"></span>
    <span class="ui-icon inline ui-icon-wrench"></span>
    Text
</div>​ 
```

如果您希望它们在 div 中水平居中，则可以将其更改`div`为：

```
<div class="ui-widget-header center"> 
```

# c++ - 如何在 C++ 中管理日期

> ID：14104340
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:22:02.853
> 
> 标签：c++, date, calendar

> **可能重复：**
> [C++ 标准日期/时间类](https://stackoverflow.com/questions/1650715/c-standard-date-time-class)

## 问题

如何在 C++ 中管理日期？

我的意思是——我可以使用标准库中的某些东西（类似于Java 中的`Date`/ `Calendar`），我应该创建自己的类，还是应该使用一些第 3 方库（如果是，是哪一个？）。

基本上，我需要的是能够存储/检索与日期（时间、日期、月份、年份、工作日）相关的数据并比较它们之间的日期对象（用于排序）。

## 我已经尝试过的

嗯，我做了一个简单的`Calendar`类来模仿 Java`Calendar`类的行为......但是我在处理闰年时遇到了麻烦（嗯，没关系，但它搞砸了我的工作日）、工作日等等东西。

我也看过关于它的[旧帖子](https://stackoverflow.com/questions/1650715/c-standard-date-time-class)（2 年以上），但我想知道是否有更新的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:27:09.863

在 Qt 框架中，您发现了许多类似的 Java 类。你也可以在 wxWidgets 中使用 wxCalendarCtrl 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:36:57.070

虽然我不熟悉 Java 中的日期/时间支持，所以我无法比较我会考虑使用 Boost.Date_Time 的差异。

[http://www.boost.org/doc/libs/1_52_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time.html)

# javascript - JavaScript 中的单调/Vixie 风格的夏令时解释

> ID：14104343
> 
> 赞同：0
> 
> 时间：2012-12-31T17:22:20.730
> 
> 标签：javascript, date, datetime

我正在寻找一种 JavaScript 算法来将本地日历日期时间转换为自 Unix 纪元以来的 UTC 毫秒（或`Date`表示相同的对象）。对某些相对日历日期执行此操作的典型且通常有用的方法`YYYY-MM-DD hh:mm:ss.zzz`是：

```
# Close, but not quite monotonic
(new Date(YYYY, MM-1, DD, hh, mm, ss, zzz)).getTime() 
```

JavaScript 实现有其处理 DST 的方法（阅读：夏令时、夏令时、必要时您自己的区域设置等效项），不幸的是它们不适用于手头的应用程序，而是需要单调的本地时间（但如有必要可能会失真）。

转换必须是单调的，因为对于两个相对的日历日期（即不知道时区、不知道 DST）A 和 B，转换函数 C 是这样的

```
If A is strictly earlier than B then C(A) ≤ C(B)
If A is simultaneous to B then       C(A) = C(B)
If A is strictly later than B then   C(A) ≥ C(B) 
```

（这并不是指对时间获取函数的连续调用严格不递减的意义上的单调性——这个应用程序没有*当前*时间的概念，也不需要类似的东西。）

我已经开始着手自己的实现，但它可能会变得复杂，我认为也许其他人有更好的想法。

问题是：

*   这已经实施了吗？
*   如果没有，是否有比我在下面概述的更明智的方法来实现这一点？
    *   不连续性发现启发式方法是否适用于全球所有已知的 DST？

## JavaScript`Date`的行为

以下是 2012 年美国 DST 的极端情况。这些值是来自 Firefox 的实验结果。在这里，让函数 C 表示使用给定的本地日期和时间创建`Date`对象的结果，然后使用该`getTime()`方法检索 UTC 毫秒。

*   跳过时间：2012 年 3 月 11 日，夏令时开始日期，当地时间 02:00 开始的时间被跳过：01:59 之后的分钟为 03:00。在 Firefox 中，较晚的输入时间可能会导致较早的解析时间；例如 01:45 < 02:15，但 C(01:45) > C(02:15)，所以音阶不是单调的。
*   双倍小时：在 2012 年 11 月 4 日，夏令时结束日期，从 01:00 开始的小时在当地时间出现两次：白天 01:59 之后的分钟是标准时间 01:00，然后是 01:59 之后的分钟标准时间是标准时间 02:00。在 Firefox 中，C(01:30) 对应于后面的重复，标准时间 01:30。
    *   只要保证解析行为有利于以后的时间，这不会破坏单调性。（我没有这个保证的文档，但它可能来自 ECMA-262 中的某种语言。）

## 必需/首选行为

在这里，让函数 C 表示具有所需行为的转换。

*   跳过的小时：跳过的一分钟的日期应解析为接下来的第一个未跳过的分钟。例如，在 DST 开始日期，02:15、02:30 和 02:45 将解析为下一个未跳过的分钟 03:00；换句话说，C(02:15) = C(02:30) = C(02:45) = C(03:00)。
    *   未跳过的时间将保持不变：将 01:45 < 02:15 < 02:45 < 03:15 与 C(01:45) < C(02:15) = C(02:45) < C(03:15) 进行比较.
*   双倍小时：一分钟多次出现的日期应仅解析为第一次出现；例如，DST 结束日期的 01:30 将被解析为 01:30 日光时间而不是标准时间，因为这是两者中较早的时间。
    *   和以前一样，只是保证了更早的时间。

这些规则大致基于 Vixie cron 的规则。但是，此应用程序不处理*当前*时间的概念，因此不具备监视时钟以了解时间变化所需的状态。它需要一些其他方法来确定是否以及何时将跳过或加倍时间。

顺便说一句，作为一个附加要求，实现不能假定它在美国语言环境中运行；它需要在国际范围内工作，并尽可能使用检测而不是配置。

## 实施思路

我认为可能用于检测日期是否不连续的一件事是测试本地日期跨度的宽度±1个日历日。如果两个日期的 UTC 时间之间的差异小于或大于 48 小时，则分别意味着某些时间已被跳过或加倍。

*   如果跳过，我们可能会进一步确定是否跳过给定时间本身，如果在转换为 UTC 并返回之后，`hh:mm:ss.zzz`读取不同。如果是这样，则将时间解析为中断后的第一分钟。
*   如果加倍，我们可能会在以后的重复中确定所有时间的范围。如果给定时间落在后面的重复中，则恢复到较早的时间；否则，它会被单独留下。

这两者都可能需要不连续点的确切位置，例如，这可以通过以 ±1 日期为界的二分搜索来完成。

这种启发式方法可能因多种原因而失败；虽然我的印象是它们不太可能，但夏季时间规则在世界范围内是奇怪且不一致的：

*   如果在同一 3 个日历日内，任一方向上可能出现多个中断。（在美国，每年有两次，相隔几个月。我怀疑任何地方的调整量都超过了，比如说，四个小时。）
    *   如果不连续性是互补的，那么它们可能一开始就无法检测到。
    *   在任何情况下，简单的搜索都会假设在该范围内只有一个不连续点。
*   如果单个不连续性可能导致（近）3 个日历日的持续时间。（在美国，每个不连续时间占一小时。我相当肯定夏季时间调整永远不会在任何地方都以天为单位。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:47:00.663

[至少对于当前的美国规则，与上述**必需/首选行为**一致的实现](http://bazaar.launchpad.net/~psmay/+junk/coffee-clock-face-resolver/view/2/clock-face-resolve.coffee)现在可用。总体而言，该机制并不是非常低效。在最坏的情况下（跳过的一分钟），它是 O(lg n)，其中 n 是夏季和冬季之间变化的分钟数（我住的地方是 60 分钟），在所有其他情况下，它是 O(1)。

*   输入是“面孔”（不知道 DST 的日历日期和时间）。
*   输出是一个`Date`基于输入人脸设置的本地人脸。
    *   如果输入人脸恰好代表一个本地日期，则输出`Date`与将人脸的统计信息传递给`Date`构造函数一样。
    *   如果输入面表示零个本地日期（由于 DST 向前跳过），则输出`Date`反映跳过后的第一分钟。
    *   如果输入面表示两个本地日期（由于 DST 重复），则输出`Date`反映两者中较早的一个。

实施注意事项：

*   该`.getTimezoneOffset()`方法用于确定两个日期是否位于不连续点的相对两侧。
*   `Date`通过检索该面之前 24 个本地小时的偏移量，可以找到该面可能靠近的任何不连续点之前的偏移量。
*   `Date`通过将其统计信息传递给`Date`构造函数以在本地进行解释，将面转换为 a 。
*   如果转换后的本地人脸与`Date`输入人脸不同，则此人脸在本地时间不能直接表示；它已被跳过。
    *   转换后`Date`的被视为无效。
    *   不连续性之后的时区偏移量是通过检索`Date`输入人脸后 24 个本地人脸小时的偏移量来确定的。
    *   找到不连续性前后偏移之间的差异。从输入面*之前的那段时间到**之后*的那段时间（根据定义，这两者都应该可以表示为本地日期），使用二进制搜索来定位不连续之后的第一分钟。代表这一分钟的A`Date`是输出。
*   如果转换后的局部面`Date`与输入面相同，
    *   如果转换`Date`后具有不连续前的偏移量，则它是正确的。
    *   这包括任何不靠近 DST 变化的面孔；如果没有不连续性，那么当天的所有时间共享相同的偏移量。
    *   就算脸在翻倍时间，早期的解释是正确的。（这是否会发生可能取决于实现。）
    *   如果转换`Date`发生在不连续之后，
    *   如果它在不连续点后至少偏移差的时间是正确的。
    *   如果它在从不连续到之后一个偏移差的时间范围内，它是在后来的一倍时间解释中。通过减去偏移差可以找到正确的日期，从而产生更早的解释。
    *   如果早一个偏移差的a具有早偏移，则A`Date`被确定在该范围内。`Date`由于转换`Date`后的偏移量较晚，因此可以确定不连续发生的时间比那晚。

# delphi - 将 Warp Speed 添加到 Conversion 系列

> ID：14104344
> 
> 赞同：5
> 
> 时间：2012-12-31T17:22:32.793
> 
> 标签：delphi

我在 ConvUtils 中添加了一个 Speed 系列，以每秒米为基础。

IE

```
 Cf := RegisterConversionFamily('Speed');
   RegisterConversionType(Cf,'Meters per second'    ,1);
   RegisterConversionType(Cf,'Speed of Light'       ,0.000000003335641);
   RegisterConversionType(Cf,'Speed of Sound(Mach)' ,0.0029411765); 
```

现在我想添加“Warp Speed”作为一种类型。

我有公式

```
V = wf^3 * C 
```

其中： V = 速度 wf = 翘曲系数 C = 光速

如何添加公式来添加类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:43:05.097

您可以注册自己的转换公式：

```
function ToWarp(const AValue: Double): Double;
begin
   Result := YourFormula1;
end;

function FromWarp(const AValue: Double): Double;
begin
   Result := YourFormula2;
end;

RegisterConversionType(Cf,'Warpspeed' ,ToWarp,FromWarp); 
```

# php - 从此数组中获取歌曲

> ID：14104354
> 
> 赞同：0
> 
> 时间：2012-12-31T17:23:14.070
> 
> 标签：php, arrays, for-loop

我显然有问题。我一直在阅读[Foreach Loops Manual](http://ca3.php.net/manual/en/control-structures.foreach.php)并且显然在一个循环中我需要来自这样一个数组的所有歌曲：

```
$music = array(
    'Creed' => array(
        'Human Clay' => array(
            array(
                'title' => 'Are You Ready'
            ),
            array(
                'title' => 'What If'
            ),
            array(
                'title' => 'Beautiful'
            ),
            array(
                'title' => 'Say I'
            ),
            array(
                'title' => 'Wrong Way'
            ),
            array(
                'title' => 'Faceless Man'
            ),
            array(
                'title' => 'Never Die'
            ),
            array(
                'title' => 'With Arms Wide pen'
            ),
            array(
                'title' => 'Higher'
            ),
            array(
                'title' => 'Was Away Those Years'
            ),
            array(
                'title' => 'Inside Us All'
            ),
            array(
                'title' => 'Track 12'
            ),
        ),
    ),
) 
```

到目前为止，我所拥有的是：

```
foreach($music['Creed']['Human Clay'] as $song){
   var_dump($song);
} 
```

问题是，$song 是一个数组。我必须在一个循环中执行此操作。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T17:25:31.327

### 是的！

```
foreach($music['Creed']['Human Clay'] as $song){
   echo $song['title'];
} 
```

### 小提琴： http: [//phpfiddle.org/main/code/rek-bcn](http://phpfiddle.org/main/code/rek-bcn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:25:07.410

```
function getSongsList($arr, $album){
 $length = count($arr['Creed'][$album]);
 $result = array();
 for ($i = 0; $i < $length; $i++){
  $result[$i] = $arr['Creed'][$album][$i]['title'];
 }
 return $result;
}

//Usage

print_r(getSongsList($music, 'Human Clay')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:46:06.630

您也可以使用[`array_walk_recursive`](http://php.net/array_walk_recursive)以防例如您不知道每个部分的深度：

```
$songs = [];    
array_walk_recursive($music, function($v) use (&$songs) {$songs[] = $v;});
print_r($songs); 
```

# c - 将矩阵表示为结构并填充随机值

> ID：14104355
> 
> 赞同：0
> 
> 时间：2012-12-31T17:23:29.907
> 
> 标签：c, function, data-structures

我定义了一个新的*typedef*如下：

```
typedef struct matrep
{
       int rows, columns; /*rows/columns represent the number of rows/columns in the matrix, data represents matrix entries.*/
       double *data;
} 
       MATRIX; 
```

现在，我要做的是使用函数 gen_matrix 用随机双精度值填充这个结构。**gen_matrix 接受一个指向 MATRIX 结构的指针并返回它。**

但是，当我在下面执行我的程序时出现运行时错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

typedef struct matrep
{
       int rows, columns; //rows and columns represent the number of columns in the matrix, data represents matrix entries.//
       double *data;
} 
       MATRIX; 

double random();
MATRIX *gen_matrix(MATRIX *ptr);

int main()
{
  MATRIX *somepointer;

  somepointer -> rows = 2;  //The program crashes when I try to execute this.//
  somepointer -> columns = 2;

}

double random()
{
       double f = (double)rand() / RAND_MAX; //Generating a random number between -100 and 100//
       return (-100 + f*(200));         
}

MATRIX *gen_matrix(MATRIX *ptr)
{
       int i, j;
       int m, n;     
       MATRIX *newdata;

       m = ptr -> rows;
       n = ptr -> columns;

       newdata = (MATRIX *)malloc(sizeof(double)*(m*n)); //Allocating suitable space.//
       ptr = newdata;

       for(i = 0; i < m; i++)
       {
             for(j = 0; j < n; j++)
             {
                *(ptr -> data)= random(); //Setting the value of each and every matrix entry to a random double.//
                 (ptr -> data)++; 
             }

       }

       return ptr;
} 
```

**我认为有两个问题： 1：由于某种原因，在 main() 中设置“行”和“列”的值是错误的。2：我的 gen_matrix 函数也可能有问题。**

***所以我的问题是，我将如何纠正这两个问题？***（注意：我的 random() 函数绝对没问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:32:30.200

您有一些错误，其中之一是您以错误的方式分配空间，newdata 的类型是 MATRIX 而不是 double，将其更改为：

```
newdata = malloc(sizeof(*newdata));
newdata->data = malloc(sizeof(double)*(m*n)); 
```

并且不要投射 malloc ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:05:55.153

您的代码中有几个问题，以下是其中一些：

1.  您在`somepointer`未初始化的情况下访问指针变量，这是第一次崩溃的原因，请将您的`main`例程更改为以下内容：

    ```
    int main() {
        MATRIX *somepointer = (MATRIX*) malloc(sizeof(MATRIX));
        somepointer -> rows = 2;  
        somepointer -> columns = 2;

        MATRIX *another_matrix = gen_matrix(somepointer);

        // Don't forget to free your stuff
        free(somepointer);
        free(another_matrix);
    } 
    ```

2.  更改函数中的内存分配`gen_matrix`以避免将来崩溃。

    ```
    // Here do another malloc to avoid another access without initialization crash
    MATRIX *newdata = (MATRIX*) malloc(sizeof(MATRIX));

    m = ptr -> rows;
    n = ptr -> columns;

    newdata->data = (double*) malloc(sizeof(double) * (m * n)); 
    ptr = newdata; 
    ```

3.  您的数组初始化循环会增加`data`指针，这是不正确的，因为在循环结束时，指针将指向数据的最后一个元素。您可以使用指针算法访问数组元素，根据数组 [col, row] 位置计算内存索引：

    ```
    for(i = 0; i < m; i++)
       for(j = 0; j < n; j++) {
          // Memory address for array position i, j formula:
          // array-base-position + (total-colums * current-row) + current-col
          // example: given total-colums = 5, current-row = 1 and current-col = 3
          // you'll get:  ptr + (5 * 1) + 4 = 8
          // 
          //  ptr
          //  v
          //  ---------------------
          //  | 0 | 1 | 2 | 3 | 4 |
          //  ---------------------
          //  | 5 | 6 | 7 | 8 | 9 |
          //  ---------------------
          //  ...           ^ here 

          *(ptr -> data + (n * i) + j) = random();
       }
    } 
    ```

4.  一个建议，将您的`random`函数重命名为类似的名称`drandom`，这样它就不会与（gcc 版本 4.6.3）`long int random()`中的声明产生歧义。`stdlib.h`

另一个建议是打开编译器的警告，这样你就可以事先检测到其中的一些问题

**更新：**应用了上述所有更正的程序。（它使用 gcc 版本 4.6.3 运行而不会崩溃。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

typedef struct matrep {
    int rows, columns;
    double *data;
} MATRIX;

double drandom();
MATRIX *gen_matrix(MATRIX *ptr);

int main() {
    MATRIX *somepointer  = (MATRIX*) malloc(sizeof(MATRIX));
    somepointer->rows = 2;
    somepointer->columns = 2;

    MATRIX *another_matrix = gen_matrix(somepointer);

    free(somepointer);
    free(another_matrix->data);
    free(another_matrix);
}

double drandom() {
    double f = (double) rand() / RAND_MAX;
    return (-100 + f*(200));
}

MATRIX *gen_matrix(MATRIX *ptr) {
    MATRIX *newdata = (MATRIX*) malloc(sizeof(MATRIX));
    int nrows = ptr->rows;
    int ncols = ptr->columns;

    newdata->data = (double*) malloc(sizeof(double) * (nrows * ncols));
    for(int row = 0; row < nrows; row++) {
        for(int col = 0; col < ncols; col++) {
            *(newdata->data + (ncols * row) + col) = drandom();
        }
    }
    return newdata;
} 
```

# ruby-on-rails-3 - 链接中的 rails bootstrap 图标

> ID：14104359
> 
> 赞同：2
> 
> 时间：2012-12-31T17:23:47.910
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我正在尝试将 Bootstrap 中的一个图标用于链接到。

这些不起作用::

```
<% link_to '<i class="icon-pencil"></i>', task_path(task)%>
<% link_to task_path(task), html_options = {:class => 'icon-pencil'} %> 
```

我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:27:26.920

您可以使用其他形式的`link_to`帮助程序：

```
<%= link_to task_path(task) do %>
  <i class="icon-pencil"></i>
<% end %> 
```

确保在通话前附上`=`标志。`link_to`

# css - Divs 的位置，没有空格，*whit photo

> ID：14104360
> 
> 赞同：0
> 
> 时间：2012-12-31T17:23:52.207
> 
> 标签：css

我的布局有问题，在css中制作一些，没有javascript，因为我不知道动态定位我的div（帖子）......这个div有空格，制作线条，我不想要线条，因为尺寸不同，见照片完美理解：

请看这张照片

[http://postimage.org/image/hibb48iq3/](http://postimage.org/image/hibb48iq3/)

这是正常的，但接下来看到这个：

[http://postimage.org/image/6h9b8mpt9/](http://postimage.org/image/6h9b8mpt9/)

我不想要这个大空间，我尝试在 css 中使用各种显示属性，但没有任何改变这个大空间，我的 css 就是这样：

```
#post {
    box-shadow: 0px 1px 3px rgba(34, 25, 25, 0.4);
    background: #fbffff;
    color: #6d6d6d;
    margin:10px 0;
    padding:15px;
    box-sizing: border-box;
    font-family: tahoma;
    line-height: 20px;
    width:30%;
    float:right;

} 
```

如果有人有一些解决方案，或者使用制作的 dinamyc 的 css 或 javascript，我的代码是在 ruby​​ on rails 中的一些通知。

我感谢并等待回复，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:03:47.743

看起来您正在选择“Pinterest”布局。你最好的选择是使用 jQuery 并添加插件[Isotope](http://isotope.metafizzy.co/)或[Masonry](http://masonry.desandro.com/)

# ruby-on-rails - 无法将新模型与设计一起使用

> ID：14104361
> 
> 赞同：1
> 
> 时间：2012-12-31T17:24:01.847
> 
> 标签：ruby-on-rails, devise, controller

我的应用程序中有 2 个模型（使用 rails 3.2.5）

1）用户（来自设计）

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  # attr_accessible :title, :body
  has_many :profiles
end 
```

2) 配置文件。

```
class Profile < ActiveRecord::Base

  belongs_to :user
  attr_accessible :description, :name, :product, :image, :price
  mount_uploader :image, ImageUploader
  validates_presence_of :name, :product, :image, :price
end 
```

一个用户有很多个人资料。目标：当他们登录时，我只想显示与每个用户相关的配置文件。

通过阅读rails文档，我们可以通过（下面的代码）为用户创建一个新的配置文件，但这会给出错误“undefined method `Profile' for nil:NilClass”

有人可以帮我定义控制器的索引、显示、新建、编辑、创建、更新、销毁或显示一个，我可以为所有人做。

```
def new
  @profile = @user.Profile.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @profile }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:37:51.383

您收到此错误是因为`@user`未初始化并且等于 nil，因此它没有命名方法`profile`，您应该使用`current_user`设计助手来获取当前用户`@user = current_user`。

# objective-c - iCloud 文件上传错误 (NSFileWriteNoPermissionError = 513)

> ID：14104362
> 
> 赞同：2
> 
> 时间：2012-12-31T17:24:05.883
> 
> 标签：objective-c, error-handling, ios6, icloud, nsfilemanager

我正在尝试使用以下代码将文件复制到 iCloud：

```
 NSError *error;
    //My Image Source file
    NSURL *sourceURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"_219" ofType:@"jpg"]isDirectory:NO];
    NSLog(@"source: %@", sourceURL);

    NSFileManager *fileManager = [NSFileManager defaultManager];

   //Discovering iCloud URL
   NSURL *iCloudDocumentsURL = [[fileManager URLForUbiquityContainerIdentifier:nil] URLByAppendingPathComponent:@"Documents"];
   NSLog(@"iCloudDocumentsURL: %@", iCloudDocumentsURL);

   //Setting destination URL
   NSURL *destinationURL = [iCloudDocumentsURL URLByAppendingPathComponent:@"image.jpg"];
   NSLog(@"destination: %@", destinationURL);

   //Copy file to iCloud
   BOOL success = [fileManager setUbiquitous:YES itemAtURL:sourceURL destinationURL:destinationURL error:&error];

   if (!success) {
       @throw [NSException exceptionWithName:[error localizedDescription] reason:[error localizedFailureReason] userInfo:nil];
   } 
```

当我运行此代码时，我得到以下结果：

```
 2012-12-31 15:15:30.888 iCloudTest[10614:907] source: file://localhost/var/mobile/Applications/B2202406-BEB8-41B6-A3C4-2327EFB85E54/iCloudTest.app/_219.jpg
        2012-12-31 15:15:31.108 iCloudTest[10614:907] iCloudDocumentsURL: file://localhost/private/var/mobile/Library/Mobile%20Documents/xxxxxxxx~com~gazapps~iCloudTest/Documents/
        2012-12-31 15:15:31.110 iCloudTest[10614:907] destination: file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXXXXXX~com~gazapps~iCloudTest/Documents/image.jpg
        2012-12-31 15:15:31.122 iCloudTest[10614:907] *** Terminating app due to uncaught exception 'The operation couldn’t be completed. (Cocoa error 513.)', reason: '(null)'
        *** First throw call stack:
        (0x38c312a3 0x32f1897f 0xbb617 0x3a31058d 0x3a350d71 0x3a34cae5 0x3a38e1c9 0xad241 0x3a351ad1 0x3a35165b 0x3a349843 0x3a2f1c39 0x3a2f16cd 0x3a2f111b 0x371295a3 0x371291d3 0x38c06173 0x38c06117 0x38c04f99 0x38b77ebd 0x38b77d49 0x3a34847d 0x3a3452f9 0xacff9 0x3627cb20)
        libc++abi.dylib: terminate called throwing an exception 
```

查看文档，可可错误 513 意味着：

```
NSFileWriteNoPermissionError = 513, 
```

所以基本上我无权在 iCloud 上写东西......看看[https://developer.icloud.com](https://developer.icloud.com)，一切似乎都很好（文档文件夹在那里）。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:59:48.110

自 12 月 30 日/31 日以来，iCloud 一直在间歇工作，尽管 developer.icloud.com 上的一切看起来都不错。这里的开发者论坛正在进行讨论：

[https://devforums.apple.com/thread/176739?tstart=0](https://devforums.apple.com/thread/176739?tstart=0)

此时很难诊断 iCloud 问题，因为它可能只是 Apple 的 iCloud 服务器上的问题。一些人已经注意到（在讨论线程上）iCloud 现在似乎比以前工作得更好，所以现在可能值得再次测试您的应用程序。

# assembly - 在非开源程序中检测缓冲区溢出

> ID：14104363
> 
> 赞同：1
> 
> 时间：2012-12-31T17:24:05.993
> 
> 标签：assembly, gdb, buffer-overflow

我正在读一本关于缓冲区溢出利用等的书。但是这本书没有回答一个问题。如何在不查看程序源代码的情况下使用 GDB 检测缓冲区溢出？是否可以检测到查看程序集的缓冲流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:17:23.297

缓冲区溢出可能会导致立即可观察到的行为变化（程序崩溃或挂在那里）或者它可能很遥远（它稍后崩溃或挂起，或者它破坏重要数据并开始行为不端，需要时间和注意力才能看到​​它）或它可能是良性的（因为在那之后不使用覆盖的内存）。

除非您知道要查找的内容并且熟悉代码或其反汇编，否则通常没有简单、防弹或自动的溢出检测方法。

如果是您的代码，您可以通过多种方式找到缓冲区溢出：

*   代码审查
*   代码检测（手动或使用某些工具）来检查大小、索引和指针
*   测试（包括在调试器中逐步执行）

如果代码不是你的并且你不知道它并且只有反汇编，那么事情就会变得更加复杂。您仍然可以尝试通过提供专门（恶意）制作的数据来对其进行测试。如果您遇到崩溃，可能是因为缓冲区溢出，或者它可能靠近可能发生的地方。

有一些工具可以让您在程序调用 OS 函数的地方将故障注入程序。您可以使用它们来发现一些错误检查不足的地方，可能是缓冲区溢出。

这不是一个简单的问题，也没有简单的解决方案，这可能就是为什么这本书没有在你想要的层次上明确地解决它。或者你可能错过了它。

# reporting-services - 如何将多值参数中的选定值传递给 SSRS 20008 R2 中的子报表

> ID：14104365
> 
> 赞同：0
> 
> 时间：2012-12-31T17:24:13.340
> 
> 标签：reporting-services, ssrs-2008

在我的外部报告中，即用户运行的报告中，我只有一个列表，里面只有一件东西：一个子报告。

子报表采用 UserId 并使用 4 个不同的 tablix 和数据集计算一些统计数据。

我希望外部报告做的是向用户提供一个 UserIds 列表作为多值参数，并将选定的值传递给子报告。

但是，所做的是将所有可能的值传递给子报表，从而导致长时间延迟、数百页和不需要的数据。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:34:31.400

我怀疑一个问题是`userid`参数具有从初始设置/查询自动设置`userid`所有可能性的默认值？

此外，子报表也应具有与外部报表相同的参数。确保这也是多选但隐藏并且没有默认值。

然后在子报表属性上，您可以将`userid`参数属性设置为主要属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:10:09.463

我只是在数据集中设置了一个过滤器，它将所有 UserIds 都作为`IN`用户选择的参数。

# matlab - 如何在 Matlab 中求解 AX = B 类型的线性系统，其中矩阵 B 的每个元素都是子矩阵？

> ID：14104366
> 
> 赞同：1
> 
> 时间：2012-12-31T17:24:14.777
> 
> 标签：matlab, matrix, system, linear-algebra, solver

我想求解一个线性系统 AX = B，其中 A 是具有常数元素的 nxn 矩阵，矩阵 B 的类型为 nx1。但是，矩阵 B 的每个元素都是一个 nx1 类型的向量（这是因为每个元素 bij 都是时变的）。

```
%%% Example

t = 0:0.002:0.5;    %% Time

A = [1 0 -1 0 0 0; ...
      0 -1 0 0 1 0; ...
     r12y, r32y-r12x r32x 0 0; ...
      0 0 -1 0 1 0; ...
      0 -1 0 0 1 0; ...
      0 r23y-7-r43y r23x r43x];

  %% Where rij is constant

% Construction 6x1 matrix C

C = [m2.*A2x ; ...
    m2.*FG2-a2y; ...
    ICM2.*Alpha2; ...
    m3.*A3X ; ...
    m3.*a3y-FG3; ...
    Icm3.*Alph8a3];

%% Where A2x, a2y, A3X, a3y, alpha2, Alpha3 are elements of the matrix C that are time-varying. 
```

我试图解决 segunte 形式：

```
C = rand (6,1,251);
A = rand (6,6);%

X = zeros (6, size (C, 3));
for i = 1: size (C, 3)
     X (:, i) = A \ C (:,:, i);
end 
```

但我不知道这是否是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:54:35.257

您可以执行以下操作。

```
C = reshape(rand(6,1,251), 6, 251); % Or just create rand(6, 251);
A = rand(6,6);
X = A \ C; 
```

这将为您提供相同的结果，并且比 for 循环更快。

# android - 不断收到 ActivityNotFoundException

> ID：14104370
> 
> 赞同：0
> 
> 时间：2012-12-31T17:25:15.433
> 
> 标签：android, android-intent, android-activity, android-manifest

正如标题所说，我不断收到此错误并且不知道我错过了什么。我已经多次清理了这个项目。这是我的代码：

```
 startActivity(new Intent(this, UsrPrefs.class)); 
```

在清单中：

```
<application

    android:label="@string/app_name" >
    <activity
        android:name=".IcyArmActivity"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity 
        android:label="@string/app_name"
        android:name=".UserPreferences"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.PREFS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

啊啊啊啊啊啊啊啊啊啊啊啊！！！！！！谢谢你们。我认为 UsrPrefs.class 是类的名称，所以这就是我使用的。我现在看到了联系。啊！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:26:55.060

在您的清单中，活动的名称是**UserPreferences**。所以像这样编辑

```
startActivity(new Intent(this, UserPreferences.class)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:27:14.677

利用

```
startActivity(new Intent(IcyArmActivity.this, UserPreferences.class)); 
```

用于从主 Activity 启动新 Activity，因为您已在清单中将 UsrPrefs 声明为 UserPreferences

**或者**

您可以`UsrPrefs`在清单中声明为新活动：

```
<activity android:name=".UsrPrefs" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T17:29:36.733

这是因为您将一个类定义为具有一个名称的活动并启动另一个未在`manifest.xml`

替换这个：

```
<activity 
        android:label="@string/app_name"
        android:name=".UserPreferences"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.PREFS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

和

```
<activity 
        android:label="@string/app_name"
        android:name=".UsrPrefs"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.PREFS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

# perl - perl 打印浮点数的精度是多少？

> ID：14104372
> 
> 赞同：5
> 
> 时间：2012-12-31T17:25:15.583
> 
> 标签：perl, floating-point-precision

```
my $num = log(1_000_000) / log(10);
print "num: $num\n";
print "int(num): " . int($num) . "\n";
print "sprintf(num): " . sprintf("%0.16f", $num) . "\n"; 
```

产生：

```
num: 6
int(num): 5
sprintf(num): 5.9999999999999991 
```

perl*打印*浮点数的精度是多少？

使用：为 x86_64-linux-thread-multi 构建的 v5.8.8

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T17:59:14.510

在对浮点数进行字符串化时，无论是否打印，Perl 通常使用编译它的 float.h 或 limits.h 文件中的 DBL_DIG 或 LDBL_DIG 的值。

这通常是浮点类型的精度，perl 将使用向下舍入。例如，如果使用典型的 double 类型，精度为 53 位 = 15.95 位，Perl 通常会以 15 位精度进行字符串化。

# jquery - 我在 jquery 中需要什么事件来做一些“ondrag”

> ID：14104376
> 
> 赞同：0
> 
> 时间：2012-12-31T17:25:29.010
> 
> 标签：jquery, drag-and-drop, jquery-draggable

一旦用户开始拖动某些东西，我就会尝试更改一些 css，但还没有找到一种简单的方法来做到这一点。

现在我使用 mousedown 和 mouseon，唯一的问题是 mousedown 的行为与 click() 完全相同，但 id 就像用户*拖动*元素后要执行的函数，而不是在单击它时立即执行的函数。

应该有一个简单的方法来做到这一点，但我还没有找到任何。是否有一个特殊的 jquery 事件？

我怎么能这样做，所以它适用于所有浏览器？

这是我的应用程序：

[http://jsbin.com/ucopun/97/edit](http://jsbin.com/ucopun/97/edit)

相关代码：

```
$("#myTable").on('mousedown', 'td', function(event) {
  $("td").css({'background-color': '#313131'});
});
$("#myTable").on('mouseup', 'td', function(event) {
  $("td").css({'background-color': '#fff'});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:18:40.493

jQuery UI 有一个内置的“可拖动”插件，它可能会让你实现你想要的：

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

# c# - C# getter 和 setter 方法定义 - 初学者

> ID：14104379
> 
> 赞同：4
> 
> 时间：2012-12-31T17:25:40.847
> 
> 标签：c#

我是 C# 新手。我正在通过一个教程。并展示了如何为变量创建访问器变体，如下所示；

```
public String var1 {

get {return "";}
set {someVar = value;}

} 
```

1.) 我不能像在 java 中创建的那样创建 getter 和 setter

```
public getVar() {return "";}
public setVar(String x){var=x;} 
```

2.) `value`C# 中使用了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T17:28:03.097

1.  可以，但使用起来更烦人，并且忽略了 C# 编码准则。

2.  `value`是设置器的隐式参数。它包含调用者将属性设置为的值。（通话右侧`Property = something`）

请参阅[文档](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T17:28:29.947

1.  你当然可以。C# 中的属性就是为此而设计的语法糖。在引擎盖下，属性只不过是一个 get/set 方法。创建这两个方法更容易，它将这两个方法保存在源代码中的一个位置，它对调用者具有更简单的语法，并且除了获取/设置一个值之外什么都不做的属性仍然更容易生成。

2.  这是一个关键字。它是传递给方法的值。如果有人进入`obj.var1 = "abc";`，那么`value`将是对 的引用`"abc"`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T17:29:05.463

当然，你可以像 Java 那样做。但为什么？从调用者的角度来看，属性语法可以提供更好的体验。

`value`是一个伪变量，您可以使用它来设置您的内部变量等。它等同`x`于您的类似 Java 的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T17:31:14.860

是的，您可以像在 java 示例中一样创建 getter setter

```
int marks;
public void setMarks(int marks)
{
this.marks=marks;
}
public int getMarks()
{
return marks;
} 
```

# sql - 午夜过后的时间计算

> ID：14104380
> 
> 赞同：1
> 
> 时间：2012-12-31T17:25:57.593
> 
> 标签：sql, sql-server-2008, time-and-attendance

我有一个按以下顺序存储时钟条目的表。

```
UID         Clock                    Status
===         =====                    ======

R01         2013-01-01 17:00:00      Clockin
R01         2013-01-01 17:10:00      Clockin
R01         2013-01-01 23:45:00      Clockin 
```

我目前的解决方案是使用 Min/Max date with case and left join 按以下顺序排列条目

```
UID        Date         ClockIn    ClockOut
===        ====         =======    ========
R01        2013-01-01    17:00:00  23:45:00 
```

当时钟输入跨越午夜时，我应该如何处理这种情况。IE，

```
UID         Clock                    Status
===         =====                    ======
R01         2013-01-01 17:00:00      Clockin
R01         2013-01-02 00:45:00      Clockin 
```

由于上述将产生 2 个如下条目，这将导致员工的零时间状态为 7.45 小时。

```
UID        Date          ClockIn               ClockOut
===        ====          =======               ========
R01        2013-01-01    2013-01-01 17:00:00   2013-01-01 17:00:00
R01        2013-01-02    2013-01-02 00:45:00   2013-01-02 00:45:00 
```

提前致谢。

这是 SQL 2008R2 中使用的存储过程的代码

```
SELECT A.Device,A.DID, A.Name, A.ClockDate,Clockin ,ClockOut
FROM 
(
    SELECT Device,DID,Name, CONVERT(DATE, DeviceClock) 'ClockDate', 
    min(case when clock=Clock and Status ='Clock In' OR status='Clock Out' OR status='Access In' then clock  end) 'CLock In'

    FROM TABLE  
    group by Device,DID,Name, CONVERT(DATE, DeviceClock)
) as A
LEFT JOIN 
(
    SELECT Device,DID,Name, CONVERT(DATE, DeviceClock) 'ClockDate', 

max(case when clock=Clock and Status ='Clock in' or status='Clock Out' OR status='Access In' then Clock end) 'Clock Out'

    FROM TABLE 
    group by Device,DID,Name, CONVERT(DATE, DeviceClock)
) as B
ON A.DID = B.DID AND A.ClockDate = B.ClockDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:04:35.947

这里有很多你没有考虑到的。时间/考勤系统非常复杂。例如：

*   如果您的 ClockIn 仅在午夜前几分钟，而 ClockOut 则在早上很晚怎么办？你把时间记录到哪一天？
*   如果时间平均分配，比如晚上 10 点到凌晨 2 点，那会是第 1 天的一个 4 小时轮班吗？还是第 2 天？或者是两个 2 小时的轮班？
*   你用UTC记录时间吗？进行本地转换？处理夏令时？（在本地时间减去减去不是对经过持续时间的准确测量！）
*   四舍五入？多少？在什么场景下？
*   如何处理丢失的拳头？重复拳？

有整个系统已经发展到可以处理这些场景。他们通常还处理工作规则，如加班计算、工作成本计算、日程安排和其他事情——但他们都从你描述的基本问题案例开始。

您并不总是与下一拳配对，或特定类型的下一拳，或同一日期的下一拳。有多种场景组合需要处理，你**无法**用简单的 sql 语句或存储过程来表达。您可以*尝试*- 但您将有很多边缘情况需要处理。

我会考虑购买已经为您处理这些案例的产品。如果您打算自己编写 - 不要在 SQL 中编写。从 SQL 中获取原始数据并将其与您的业务逻辑一起使用以生成处理引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:23:56.107

马特所说的是一个很好的一般性答案，并阅读了他提到的所有警告，但如果你的情况很简单，所有员工在早上 6 点之后开始，在午夜之前离开并在比如说凌晨 3 点之前完成，你可以很好地捏造它这个：

```
SELECT Device,DID,Name, convert( DATE, dateadd(hour, -3, CONVERT(DATE, DeviceClock))) 'ClockDate', 

max(case when clock=Clock and Status ='Clock in' or status='Clock Out' OR status='Access In' then Clock end) 'Clock Out'

FROM TABLE 
group by Device,DID,Name, convert( DATE, dateadd(hour, -3, CONVERT(DATE, DeviceClock))) 
```

在两个加入的选择中的每一个中。你有效地将一天的开始和结束时间缩短了 3 个小时。当然，如果有人在凌晨 3 点以后工作，或者在凌晨 3 点之前开始工作，这将不起作用。

# javascript - 在 ember.js 中使用不同的参数调用路由两次

> ID：14104383
> 
> 赞同：1
> 
> 时间：2012-12-31T17:26:37.813
> 
> 标签：javascript, ember.js

我正在尝试在 ember.js 中完成 URL 哈希上下文搜索。到目前为止，我已经在阅读文档和观看教程方面取得了相当大的进展，但现在我被困住了。

问题：

当我访问时`/#/search/movie/bob`，它检测到它应该正在搜索电影并在 TMDB（电影数据库）API 上执行查询并提取电影。当我在浏览器的地址栏中更改`bob`为时`lord`，路线再次转换并执行搜索。当我在该`/search/:type/:query`状态下使用 HTML 搜索输入字段再次搜索时，会出现此问题。statemanager 不再调用路由。

这是我的路由器：

```
 App.Router = Ember.Router.extend({
      enableLogging: true,
      root: Ember.Route.extend({
        showSearchResults: Ember.Route.transitionTo('searchResults'),
        index: Ember.Route.extend({
          route: '/',
          connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('search');
          }
        }),
        searchResults: Ember.Route.extend({
            route: '/search/:type/:query',
            serialize: function(router, params) {
              // App.SearchModel gets its values set by
              // the bindAttr helper in the handlebar
              // template
              return {
                type: App.SearchModel.get('type'),
                query: App.SearchModel.get('inputValue')
              }
            },
            connectOutlets: function(router, params) {
              var type = null;
              var query = null;
              var searchController = router.get('searchController');

              if (params && params.type && params.query) {
                type = params.type;
                query = params.query;

                // make sure the SearchModel has its
                // properties set to be able to display them
                // properly in the search fields
                App.SearchModel.set('type', type);
                App.SearchModel.set('inputValue', query)
              } else {
                type = App.SearchModel.get('type');
                query = App.SearchModel.get('inputValue');
              }

              // display the search bar again
              router.get('applicationController').connectOutlet('search');

              // perform a search against an API
              searchController.search(type, query, function(data) {
                  router.get('applicationController').connectOutlet('search_results', 'searchResults', data);
              });
            }
          })
        })
    }); 
```

这是车把模板：

```
 <script type="text/x-handlebars" data-template-name="search-view">
        {%  verbatim %}
            <form class="form-inline">
                {{view Ember.TextField valueBinding="App.SearchModel.inputValue" class="span7" placeholder="Search Movies - TV Shows ..." }}
                <input type="hidden" {{bindAttr value="App.SearchModel.type"}} />
                <button type="submit" class="btn btn-large" {{action showSearchResults on="click"}}>Search</button>
            </form>
        {% endverbatim %}
    </script> 
```

当您单击提交按钮时`showSearchResults`，只要您之前没有完成搜索，它就会调用和转换。如果我处于初始`/`状态，这会正确发生，但如果我处于状态则不会`/search/:type/:query`。

我是否需要操纵哈希位置以使其再次转换？或者有没有更好的惯用方式告诉 ember 当我单击搜索按钮时它应该改变`:query`所以状态改变？

**更新：**

我让它工作了，但是感觉真的很hacky ..一定有更好的方法吗？这是我的解决方案：

```
 showSearchResults: function(router, e, b) {
      // set the hash location so it knows to transition
      // to searchResults correctly .. this feels very
      // hacky ..
      var hashLocation = Ember.HashLocation.create();
      hashLocation.setURL('/search/%@/%@'.fmt(
        App.SearchModel.get('type'),
        App.SearchModel.get('inputValue')
      ));
      router.location = hashLocation;
      router.transitionTo('searchResults');
    } 
```

# powershell - 如何在目录中查找元素匹配 xpath 的文件

> ID：14104385
> 
> 赞同：2
> 
> 时间：2012-12-31T17:26:45.950
> 
> 标签：powershell, powershell-3.0

要通过 xpath 查找元素，我会：

```
Select-Xml -XPath "//node[a='1']" -Xml $xml 
```

有没有一种简单的方法（没有循环）来查找此目录下所有具有此 xpath 元素的文件？

类似于文本搜索的东西：

```
Get-ChildItem -Recurse -Include *.* | Select-String "text to search for" 
```

版本-Powershell3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:17:09.763

您可以像这样通过管道将要进行 XPath 搜索的文件直接输入`Select-Xml`：

```
Get-ChildItem . -r -file | Select-Xml -XPath "//node[a='1']" 
```

有关 Get-ChildItem 的输出如何“连接”到 Select-Xml 的 LiteralPath 参数的更多信息，请参阅此[博客文章](http://rkeithhill.wordpress.com/2008/04/06/effective-powershell-item-11-understanding-bypropertyname-pipeline-bound-parameters/)。您可以从这里获得整个[Effective PowerShell 免费电子书](http://rkeithhill.wordpress.com/2009/03/08/effective-windows-powershell-the-free-ebook/)。

# arrays - 初始化数组与分配内存有何不同？

> ID：14104386
> 
> 赞同：1
> 
> 时间：2012-12-31T06:36:30.017
> 
> 标签：arrays, memory-management, c++

我是 C++ 新手。我无法区分初始化数组和分配内存。对我来说，它们似乎实现了相同的目的。

具体来说，我可以通过`int myArray[] = {1, 2, 3};`. 我也可以`malloc`用来获取内存并将其分配给一个 void 指针。后来，我释放了这段记忆。

这两种方法有什么区别？计算机是否将数据存储在相同的位置并以相同的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:36:11.363

在 C++ 中有两种不同的方式可以分配内存。第一种方式在栈上分配内存。

```
int arr[] = {1,2,3};
int arr[3]; 
```

这两行代码都在堆栈上创建了一个大小为 3 的数组。唯一的区别是第一行还初始化了数组中的值。

第二种分配内存的方法是在堆上。堆上可用的内存量通常比堆栈上的可用内存量大得多。`new`and`malloc`操作在堆上分配内存。

```
int* arr = (int*) malloc(100*sizeof(int));
int* arr = new int[100]; 
```

这两行代码都在堆上创建了一个大小为 100 的数组。现在这是两者之间的区别。在 C++ 中，您应该始终使用`new`它，因为它确保调用数组中每个元素的构造函数。它的类型安全性也更高，`malloc`这与根本不是类型安全的不同，因为它只是将 a 返回`void*`到可以随意解释的一大块字节中。

现在，如果您正在动态分配内存，这意味着您直到运行时才知道数组的大小，您应该始终使用`new`/在堆上分配它`malloc`。

最后要注意的是如何使用`delete`/释放内存`free`。

```
free(arr); //arr was allocated with malloc
delete[] arr; //arr was allocated with new 
```

如果您使用它分配内存，`new`则必须使用`delete`. 你不能混合和匹配`new`/`malloc`与`delete`/ `free`。最后`delete[]`释放一个对象数组。如果您只分配了一个对象，那么您只需使用`delete`.

```
Object* myobj = new Object;
delete myobj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:16:44.687

在我看来，这个问题不属于这里。但我会回答的。你可以这样做：

```
 int* myArray = (int *) malloc(3 * sizeof(int)); 
```

这意味着您正在创建内存大小为 3 * sizeof(int) [即 C 中整数数据类型的大小] 的内存位置，并且您正在返回一个指向该内存位置的 int 指针。[即指向它开头的指针，如果它包含整数则处理它]。这些内存槽被转换为 int *（使用 (int *)），并称为 myArray。myArray 是一个 int 数组（和一个 int 指针）。因为数组实际上是 C 中的指针。然后你这样做：

```
 for (int i = 0; i < 3; i++) 
     myArray[i] = i + 1; 
```

malloc 中可能存在一些问题。因此，在初始化后总是检查 myArray == NULL。如果是这种情况，请修复错误，并且不要使用 $\{1,2,3\}$ 初始化数组。否则，您将遇到分段错误。

我希望我对你不含糊。但由于您使用的是 C++，我建议您改用 new 运算符。你会这样做：

```
 int myArray[] = new int[3]; 
```

# sencha-touch - sencha touch 中的 Selectfield 不尊重空值

> ID：14104390
> 
> 赞同：0
> 
> 时间：2012-12-31T17:26:58.483
> 
> 标签：sencha-touch, sencha-touch-2

我注意到 ST2 和选择字段选择器存在问题。我正在桌面浏览器和平板电脑上对此进行测试，两者似乎都显示出同样的问题。

问题似乎源于表单数据为空或未初始化。我的示例是用户登录他们的帐户并需要设置他们的婚姻状况。因为在他们的婚姻状况实际上是“空”的后备商店模型之前从未设置过。当他们单击选择器时，由于某种原因，选择器会自动选择清单中的第一项。从项目右侧的复选标记可以看出这一点。这样做的第二个副作用是，如果您随后选择了第一个项目，ST2 不会将此视为项目更改，因此不会将选择更改传播回表单。

这是一个错误吗？我该如何解决这个问题？

```
Ext.define('Gender', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'Id', type: 'int'},
            {name: 'ItemName',  type: 'string'}           
        ]
    }
});

Ext.define('Details', {
    extend: 'Ext.data.Model',
    config: {
        fields: [       
            {name: 'Gender',  type: 'int'}           
        ]
    }
});

var myGenderStore = Ext.create('Ext.data.Store', {
    model: 'Gender',
    data : [
        {Id: 1, ItemName: 'Male'},
        {Id: 2, ItemName: 'Female'}
    ]   
});

var myDetailsStore = Ext.create('Ext.data.Store', {
    model: 'Details',
    data : [
        { Gender: null }        
    ]   
});

var p = Ext.create('Ext.form.Panel', {
    fullscreen: true,
    items: [
        {
            xtype: 'fieldset',
            title: 'Select',
            items: [
                {
                    xtype: 'selectfield',
                    label: 'Choose one',
                    displayField: 'ItemName',
                    valueField: 'Id',
                    store: myGenderStore,
                    name: 'Gender'
                }
            ]
        }
    ]
});

p.setRecord(myDetailsStore.getAt(0))
Ext.Viewport.setActiveItem(p);
// notice the picker has 'Male' selected even though the backing store for the Gender field is null
// also, we want to select Male from the list, but this isn't reflected on the form
// run below command in console window after selecting 'Male' even though it is selected and it shows null
// It only seems to like changes to the value as selecting female works. If then select Male from Female this also works.
p.getValues().Gender; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T15:00:37.267

只需将**autoSelect**配置属性设置为**false**，以防止像这样的默认选择：

```
 {
                    xtype: 'selectfield',
                    label: 'Choose one',
                    displayField: 'ItemName',
                    valueField: 'Id',
                    store: myGenderStore,
                    name: 'Gender',
                    autoSelect:false
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:16:42.743

您可以为选择字段设置值

```
 p.down('selectfield[name=Gender]').setValue(myGenderStore.getAt(0).get('Id')) 
```

见例子：[http ://www.senchafiddle.com/#OuCtQ#GQJ2C](http://www.senchafiddle.com/#OuCtQ#GQJ2C)

谢谢

# javascript - Meteor/MongoDB 看到可用于发布的字段？

> ID：14104391
> 
> 赞同：2
> 
> 时间：2012-12-31T17:26:59.967
> 
> 标签：javascript, mongodb, youtube, meteor

如何查看用户集合中有哪些字段可供我从服务器发布和从客户端订阅？我正在使用 Meteor.JS 的 Google Auth 功能，但我正在使用它们来授权 YouTube，因此这些字段不是标准的或记录在案的。

登录代码：

```
Meteor.loginWithGoogle({
    requestPermissions: ['profile', 'email', 'https://www.googleapis.com/auth/yt-analytics.readonly', 'https://www.googleapis.com/auth/youtube']
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:16:42.850

您可以检查`Meteor.users`服务器上的记录，例如通过将它们记录到控制台。例如，在 server.js 中：

```
Meteor.startup(function() {

  Meteor.publish("nothing", function() { 
    if (this.userId)
      console.log(Meteor.users.findOne({_id: this.userId}));
  });

}); 
```

然后在客户端订阅这个：

```
Meteor.subscribe("nothing"); 
```

这会将登录用户的内容记录到服务器控制台（终端窗口）。它在发布方法中的原因是 Meteor 不允许在方法之外访问当前用户，所以我将其命名为“无”以表明它不做任何事情，只是为了临时检查目的。

# ruby - IE8中的Watir Webdriver，单击链接，事件似乎永远触发

> ID：14104393
> 
> 赞同：1
> 
> 时间：2012-12-31T17:27:12.400
> 
> 标签：ruby, windows-7, selenium, internet-explorer-8, watir-webdriver

我已经在 Ruby 1.9.2 和 IE8 和 1.9.3 和 IE9 中复制了这个 Watir Webdriver 问题；如果我使用 Chrome 或 Firefox，它似乎不会发生。操作系统是 Windows 7（64 位）。

当我使用 Watir Webdriver 单击某些链接时，该操作成功完成（因为浏览器转到链接的 href），但看起来 click 事件一直在触发。这在将鼠标悬停在链接上会导致出现下拉菜单的情况下最为明显：单击链接后，下拉菜单将保持可见，直到浏览器关闭（当然，前提是您正在查看包含该链接的页面）关联）。

对我来说真正的阻碍是，一旦发生这种情况，我就无法单击任何其他链接。我发现让 IE 恢复正常状态的唯一方法是关闭并重新打开浏览器。

一个例子：

```
require 'rubygems'
require 'watir-webdriver'
include Watir
b=Browser.new :ie
# This produces the following output:
# Started InternetExplorerDriver server (64-bit)
# 2.28.0.0
# Listening on port 5555
# => #<Watir::Browser:0x..fe85636c0 url="http://localhost:5555/" title="WebDriver">

b.goto 'www.net-a-porter.com'
b.link(:text,'Designers').click 
```

此时，IE 显示了我期望的页面（[http://www.net-a-porter.com/Shop/AZDesigners](http://www.net-a-porter.com/Shop/AZDesigners)），但 Designers 下拉菜单仍然可见，它不应该是，并且 href原始链接仍然显示在 IE 的状态栏中。

起初我认为这是这个特定网站的错误，但类似的事情发生在 yahoo.com 上，使用以下代码：

```
b.goto 'www.yahoo.com'
b.link(:text,'Sport').click 
```

雅虎！体育页面加载，但 URL 在状态栏中不断闪烁，并且出现“足球”下拉菜单。这是一个屏幕截图，向您展示我的意思：

![导航完成后显示下拉菜单的屏幕截图仍然可见](../Images/f017e5a65fb22d5576e6c717aef4b4cf.png)

现在，当我调整浏览器的大小以截取该屏幕截图时，我注意到随着边距减小和内容向左移动以适应更小的可用空间，出现了不同的菜单。因此，似乎有一个杂散的鼠标单击在同一位置不断重复。

这可能是 Watir Webdriver 或 Selenium 中的错误吗？

这是我的宝石清单：

*   可寻址 (2.3.2)
*   建设者（3.1.4）
*   捆绑器 (1.2.3)
*   子进程（0.3.6）
*   码雷 (1.0.8)
*   分列（0.3.6）
*   普通人 (4.0.0, 2.0.4)
*   黄瓜 (1.2.1)
*   调试器（1.2.3、1.2.2）
*   调试器-linecache (1.1.2)
*   调试器-ruby_core_source (1.1.6, 1.1.5)
*   diff-lcs (1.1.3)
*   不同（0.1.2）
*   ffi (1.2.0 x86-mingw32)
*   小黄瓜（2.11.5 x86-mingw32）
*   高线 (1.6.15)
*   锄头 (3.4.0)
*   hpricot (0.8.6)
*   json (1.7.6, 1.7.5)
*   libwebsocket (0.1.7.1)
*   记录器（1.2.8）
*   方法源（0.8.1）
*   mini_magick (3.4, 3.2.1)
*   minitest (4.3.3, 1.6.0)
*   multi_json (1.5.0)
*   mysql2 (0.3.11 x86-mingw32)
*   nokogiri (1.5.6 x86-mingw32)
*   pg (0.14.1 x86-mingw32)
*   撬 (0.9.10 i386-mingw32)
*   撬文档（0.4.4）
*   耙子 (10.0.3, 0.8.7)
*   rautomation (0.8.0, 0.7.3, 0.6.3)
*   rbx-require-relative (0.0.9)
*   rdoc (3.12, 2.5.8)
*   rspec (2.12.0)
*   rspec 核心 (2.12.2)
*   rspec-expectations (2.12.1)
*   rspec 模拟 (2.12.1, 2.12.0)
*   rubygems 更新 (1.8.24)
*   rubyzip (0.9.9)
*   s4t-utils (1.0.4)
*   硒网络驱动程序（2.27.2）
*   斜坡 (3.3.3)
*   子执行 (0.2.2, 0.0.4)
*   用户选择 (1.1.6.1)
*   瓦蒂尔 (4.0.2 x86-mingw32, 2.0.4)
*   水经典（3.3.0）
*   水网驱动程序（0.6.2）
*   网络套接字（1.0.6、1.0.5）
*   win32-api (1.4.8 x86-mingw32)
*   win32 进程 (0.7.0)
*   win32console (1.3.2 x86-mingw32)
*   win32截图 (1.0.7)
*   windows-api (0.4.2)
*   windows-pr (1​​.2.2)
*   xml-简单 (1.1.2)
*   码 (0.8.3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:41:43.543

这不是一个错误，这是一个功能。:) 您所看到的是 IE 驱动程序中引入的 hack 的一个不幸的副作用，它试图解决如果物理鼠标光标位于 IE 窗口边界内时悬停不存在的问题。

要解决此问题，您有两个选择，都涉及在创建驱动程序时设置驱动程序的功能。首先，您可以通过将“enablePersistentHover”功能设置为 false 来恢复之前的行为。正如您所描述的，这将停止闪烁。其次，您可以通过将“nativeEvents”功能设置为 false 来使用模拟的 JavaScript 鼠标事件而不是所谓的“本机事件”。显然，这些是相互排斥的方法，不应该一起使用。

# c# - 是否可以更改 LINQ 中的搜索方法？

> ID：14104395
> 
> 赞同：6
> 
> 时间：2012-12-31T17:27:24.817
> 
> 标签：c#, linq, csv

我有 30 000 行的 csv 文件。我必须根据许多条件选择许多值，因此插入了许多循环和“if”我决定使用 linq。我已经写了类来阅读 csv。它实现了 IEnumerable 以与 linq 一起使用。这是我的枚举器：

```
class CSVEnumerator : IEnumerator
{

    private CSVReader _csv;

    private int _index;

    public CSVEnumerator(CSVReader csv)
    {
        _csv = csv;
        _index = -1;
    }

    public void Reset(){_index = -1;}

    public object Current
    {
        get
        {
            return new CSVRow(_index,_csv);
        }
    }

    public bool MoveNext()
    {
        return ++_index < _csv.TotalRows;
    }

} 
```

它正在工作，但速度很慢。假设我想在 100;150 行范围内的 A 列中选择最大值。

```
max  = (from CSVRow r in csv where r.ID > 100 && r.ID < 150 select r).Max(y=>y["A"]); 
```

这将起作用，但是 linq 在 30 000 行而不是 48 行中搜索最大值。正如我所说，我可以使用循环，但仅在本例中，条件是“残酷的”:)

有没有办法覆盖 linq 集合搜索。类似于：查看我的枚举器上使用的查询，查看“where”中的任何 linq 条件是否包含“行 ID 过滤器”并基于此提供另一个数据。

我不想将部分数据复制到另一个数组/集合，问题不在我的 csv 阅读器中。通过 id 访问每一行很快，唯一的问题是当您访问所有 30 000 行时。任何帮助appriciated :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:05:27.583

如果您希望能够有效地使用 LINQ，则需要使用[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，其方式与 SQL 数据库的各种 LINQ 提供程序类似（但更简单）。虽然可行，但我认为对于这样一个简单的任务将是相当多的代码。

因此，我认为更好的解决方案是使用单独的方法来选择您想要的行（然后可能使用 LINQ 来处理结果）。

此外，许多返回集合的操作（包括您的原始代码和我的修改）可以通过使用[迭代器方法](http://msdn.microsoft.com/en-us/library/vstudio/dscyy5s0.aspx)来简化。

因此，您的代码可能如下所示：

```
public static IEnumerable<CSVRow> GetRows(
    this CSVReader reader, int idGreaterThan, int idLessThan)
{
    for (int i = idGreaterThan + 1; i < idLessThan; i++)
    {
        yield return new CSVRow(reader, i);
    }
} 
```

在这里，它是 的扩展方法`CSVReader`，但另一种解决方案（例如，该类的实际方法）可能更适合您。

您的示例将类似于：

```
max = csvReader.GetRows(100, 150).Max(y => y["A"]); 
```

（另外，我觉得奇怪的是，当你有 100 和 150 的限制时，你实际上想要 101 和 149 之间的行。但我假设你有这样做的理由，所以我也这样做了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:01:57.317

就 LINQ 而言，r.ID 只是一个被过滤的值，因此所有 30k 行都被考虑用于 Max 操作。如果这是一个行索引，这似乎是这里的情况，您可以使用 Skip 和 Take 来避免比较所有 30k 行。

```
max = csv.Skip(100).Take(50).Max(y => y["A"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:12:12.670

@DougM 关于评估的顺序是正确的，但在这种情况下，我要做的是对初始化进行一次点击并为任何“索引”字段生成查找：基本上，预先计算行索引到行的映射（字典） . 也就是说，这仅在您对给定索引字段有许多重复查询时才有用。

# magento - 在搜索结果的分层导航中隐藏某个类别

> ID：14104397
> 
> 赞同：3
> 
> 时间：2012-12-31T17:27:29.380
> 
> 标签：magento, navigation, hide, categories

我想从我的分层导航中隐藏一个类别。我将“在导航中显示”设置为否，但它仍然显示在搜索结果页面上。有没有办法隐藏这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:00:30.440

要从分层导航中排除单个类别，请按照以下步骤操作。请注意，您可以对任何类型的类别列表执行此操作。

1.  打开**/app/design/frontend/default/YOURTHEMENAME/template/catalog/navigation/left.phtml**。如果它不存在，请从基本文件夹中复制它。
2.  找到代码：

    ```
    <dl id="narrow-by-list2">
        <dt><?php echo $this->__('Category') ?></dt>
        <dd>
            <ol>
            <?php foreach ($_categories as $_category): ?>

                <?php if($_category->getIsActive()): ?>
                <li>
                    <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="current"<?php endif; ?>><?php echo $this->htmlEscape($_category->getName()) ?></a> (<?php echo $_category->getProductCount() ?>)
                </li>
               <?php endif; ?> 

            <?php endforeach ?>
            </ol>
        </dd>
    </dl> 
    ```

3.  在 foreach 循环中添加这个 if 语句（不要忘记关闭它）：
    `<?php if ($_category->getId() != 22): ?>`

4.  新代码将如下所示：

    ```
    <dl id="narrow-by-list2">
        <dt><?php echo $this->__('Category') ?></dt>
        <dd>
            <ol>
            <?php foreach ($_categories as $_category): ?>
             <?php if ($_category->getId() != 22): ?> <!-- If statement here, replace category ID -->
                <?php if($_category->getIsActive()): ?>
                <li>
                    <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="current"<?php endif; ?>><?php echo $this->htmlEscape($_category->getName()) ?></a> (<?php echo $_category->getProductCount() ?>)
                </li>
               <?php endif; ?> 
              <?php endif; ?> <!-- End new If statement here -->
            <?php endforeach ?>
            </ol>
        </dd>
    </dl> 
    ```

5.  将**类别 ID**替换为您希望排除的类别的 ID。

6.  要查找类别的 ID，请转到您的 Magento 管理面板和类别，当您单击左上角的类别时，您将看到它的数字 ID。

# pydev - Py.Test 使用 PyDev/Eclipse 静默跳过有错误的测试？

> ID：14104404
> 
> 赞同：0
> 
> 时间：2012-12-31T17:28:20.727
> 
> 标签：pydev, pytest

我一直在研究使用 Py.Test 在我一直在处理的一些代码中自动进行单元测试。我发现了以下行为：当我构建的测试有错误（否则会导致解释器出错）时，测试框架似乎完全忽略了测试。

我担心，当我实施更多测试时，我会把“这个测试有错误并且没有运行”误认为“这个测试通过了”。理想情况下，如果它有语法错误，我想在 Eclipse 中点击一个按钮并让单元测试失败。除了“你为什么不编写没有语法错误的代码？”之外，我还缺少另一种解决方案吗？

或者，有没有办法让 Py.Test 告诉你找到了哪些测试文件，以及运行了哪些文件？

安装程序是 PyDev 2.7.1 和 Eclipse 4.2，带有 Python 2.7.3 和 PyTest 2.3.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:15:23.057

我认为这个问题与我在 Preferenced -> PyDev -> PyUnit 中设置的命令行选项之一有关。我一直在运行`-n 4`，它将测试拆分到处理器上。这似乎抑制了语法错误。同样的选项也使调试不起作用（即，断点被跳过），事后看来这似乎很明显。

# c++ - 引用是否跨二进制边界工作，还是必须使用指针？

> ID：14104406
> 
> 赞同：3
> 
> 时间：2012-12-31T17:28:39.043
> 
> 标签：c++, dll, shared-libraries

鉴于此接口定义在一个二进制文件中：

```
struct ISomething
{
    virtual void __stdcall DoSomething() = 0;
}; 
```

这个在另一个二进制文件中定义的函数签名是否安全？

```
bool __stdcall RunSomething(const ISomething &something); 
```

或者，*必须*是

```
bool __stdcall RunSomething(const ISomething *something); 
```

*（假设在非 Visual Studio 编译器上 d 为空。`__stdcall`）`#define`*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:36:30.830

引用应该在二进制文件之间正常工作。它们在程序集级别作为指针实现。我认为标准 C++ 和 Boost 库中有这样的例子（也许`std::string::string(const std::string&)`）。

但是，如果二进制文件不是使用相同的编译器和版本构建的，那么您可能会遇到名称修改问题，但这与引用无关。

# android - 从另一个适配器调用一个适配器的 notifydatasetchange

> ID：14104409
> 
> 赞同：1
> 
> 时间：2012-12-31T17:29:32.267
> 
> 标签：android, listview, listadapter, onclicklistener, baseadapter

在我的活动中，我有两个列表视图，因此我使用了两个不同的适配器。我的要求是在两个列表项中我都有一个按钮。单击任何列表视图中的按钮时，列表视图中的数据都应更改。现在的问题是如何通过单击另一个适配器中的按钮来访问一个适配器的 adapter.notifyDataSetChanged() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:54:30.530

只需在您的 onClick 方法中

```
public void onClick(View v)
{
 adapter1.notifyDataSetChanged();
 adapter2.notifyDataSetChanged();
} 
```

如果您使用列表视图行中的按钮，那么您应该在 getView() 方法中执行此操作

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row=convertView;
        if(row==null)
        {
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            row=inflater.inflate(layoutResourceId, parent,false);

            holder=new YourHodler();
            holder.button=(Button)row.findViewById(R.id.bt);

            row.setTag(holder);
        }
        else
        {
            holder=(YourHolder)row.getTag();
        }

        holder.button.setOnClickListner(new View.onClickListener()
                {
                   //update your Any data set which is beign attached to both the adapters
                   //for example if you are using List<Collection> then you should first
                   //update it or change it
                   //then
                   adapter1.notifyDataSetChanged();
                   adapter2.notifyDataSetChanged();
                }

        return row;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:32:49.157

实现一个在您的活动中执行以下操作的方法：

```
CustomActivity1 extends Activity {
....
//make it public
public void updateLists() {
   CustomAdapter1 adapter1 = (CustomAdapter1) ((ListView) findViewById(R.id.list1)).getListAdapter();
   CustomAdapter2 adapter2 = (CustomAdapter2) ((ListView) findViewById(R.id.list2)).getListAdapter();

   //update the adapters
   adapter1.notifyDatasetChanged();
   adapter2.notifyDatasetChanged();
}
....
} 
```

为了使自定义适配器起作用，您必须传递一个`Activity`上下文。因此，您可以添加两个适配器中的 onclick 侦听器，例如：

```
CustomAdapter1 { //and in CustomAdapter2 
....
private OnClickListener ButtonClick = new OnClickListener() {
     public void onClick(View v) {
         //...your code             
         //having the context of the CustomActivity1 stored in a variable from the constructor you can simply do:
         customActivity1Context.updateLists();
     }
}
....
} 
```

# c# - 等待 SSRS 报告完成加载

> ID：14104416
> 
> 赞同：0
> 
> 时间：2012-12-31T17:30:09.403
> 
> 标签：c#, reporting-services, watin

我正在使用 WatiN 打开 SSRS 报告。最初，当打开报告时，它会显示消息“正在生成报告”。
我想等到报告生成。

我使用了 WaitForComplete 但它永远不会返回。

1.  如果生成报告，程序应该继续。
2.  否则显示报告未能生成的错误。

**编辑 1**

```
//create IE window
WatiN.Core.IE window = new WatiN.Core.IE();
window.ShowWindow(WatiN.Core.Native.Windows.NativeMethods.WindowShowStyle.ShowMaximized);

//go to the URL
window.GoTo("http://10.205.10.173");

//fill details for login
window.TextField(Find.ByName("User")).TypeText("bcadmin");
window.TextField(Find.ByName("Password")).TypeText("Test123!");
window.SelectList(Find.ByName("Application")).SelectByValue("appBCCIFrys");
window.Button(Find.ByName("dbbSystemLogin")).Click();

//go to Activity Re-cap Report
window.Span(Find.ByText("Reports")).Click();
window.Span(Find.ByText("Activity Re-cap Report")).Click();

//fill details for it
window.SelectList(Find.ByName("DbbDataCtrl_PnlARecapReportingdeARecapReportingRecordType_")).SelectByValue("00");
window.SelectList(Find.ByName("DbbDataCtrl_PnlARecapReportingdeARecapReportingSection_")).SelectByValue("00");

//press next
window.Image(Find.ByAlt("Next")).Click();

//change checkbox to option 2
window.RadioButton(Find.ByValue("1")).Checked = true;

//fill date
window.TextField(Find.ByName("DbbDataCtrl_PnlARecapReporting8NextdeARecapReportingIndividualDate_")).TypeText("12/12/2012");

//press create report
window.Image(Find.ByAlt("Create Report")).Click();

//Thread.Sleep(60000);

//connect to the new page opened
IE report = IE.AttachToNoWait<IE>(Find.ByTitle("New Activity Recap"), 200);

**//HERE I WANT TO WAIT TILL THE REPORT IS LOADED AND FETCH VALUES
//IF IT DOES NOT LOAD (or throws any error) WITHIN 2 MINS, MOVE FOWWARD**

//logout
window.Span(Find.ByText("Logout")).Click();
window.Close();
report.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T22:17:23.327

赞美主！这个我花了几天才弄明白！

我试图访问“内部 html”以等待“生成的报告...”存在。但是，由于我对 Watin 的了解有限，我无法做到这一点。但是让我们继续解决问题！

当“报告正在生成...”从屏幕上删除时，我终于看到了我是否可以捕捉到。但是，由于它从未从 html 中删除，因此我使用了这个漂亮的小检查。

```
while (reportViewer.Span("athenaReportViewer_ReportsViewer_ctl03").Style.Display.ToString() != "none")
{
   Console.WriteLine("This enabled...");
}
Console.WriteLine("DISABLED!!!"); 
```

因此，我们改为检查样式属性“Display”，使其值为“none”。XD

# javascript - Javascript：向我解释这个语法

> ID：14104420
> 
> 赞同：0
> 
> 时间：2012-12-31T17:30:40.227
> 
> 标签：javascript, syntax

这里是 JS 新手，我最近一直在查看一些代码，这些代码使用了我不太熟悉的语法。这是一个示例，然后是我的问题：

```
function Group(args) {
  this.showItem = showItem;
  function showItem(args) {
    ...
  }
}
var group = new Group (args); 
```

**问题：**

1.  据我了解，它创建`function Group`然后实例化通过`group = new Group`本质上相当于定义一个类然后实例化该类的对象。那是对的吗？

2.  关于 的属性（方法？）`Group`，上面调用的语法是`showItem`什么？为什么不把它定义为：

    ```
    this.showItem = function(args){...}; 
    ```

    将代码更改为上述代码会改变任何不同的行为吗？

3.  如果您确实如上所述定义了它，那么该语法叫什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:36:58.803

1.  该`Group`函数被用作构造函数；你的直觉基本上是正确的。

2.  没有充分的理由*不*使用匿名函数表达式`this.showItem = function(args){...};`，除非您想重用局部变量`showItem`。

3.  我不确定你的意思是哪种语法。是`function(args){...}`一个匿名函数表达式，并且`this.showItem`是指对象的一个​​成员`this`。综上所述，我想您可以将其称为“设置对象的成员函数”。

额外提示（也许您已经知道？）：您可以`showItem`在定义之前使用它的原因是由于[函数提升](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet#Hoisting)。

**编辑：**

您似乎在询问[函数表达式与函数声明](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)以及命名函数与匿名函数。主要区别是：

*   函数*声明*总是独立存在的。它们绝不是另一个操作的一部分，例如赋值。您的第一个示例使用函数声明`function showItem(args) {...}`。函数*表达式*在某些操作中用作表达式（例如，赋值、作为参数传递等）。您的第二种情况使用函数表达式。

*   函数声明被提升到当前函数作用域的顶部，因此`showItem`在您的第一种情况下，当您在赋值操作中使用它时，定义并包含该函数。函数表达式没有被提升。

*   函数声明总是被命名的。函数表达式可以命名或匿名。当使用名称定义函数时，该名称可作为`name`函数对象的属性访问。函数的名称是不可变的，并且独立于任何持有对该函数的引用的变量。此外，函数体内的代码可以通过函数名称将函数称为局部变量（这有时对命名函数表达式内的递归很有用）。

回顾：

*   函数定义：`function showItems(args){...};`
*   匿名函数表达式：`this.showItems = function(args){...};`
*   命名函数表达式：`this.showItems = function showItemsName(args){...};`

在第一种情况下，有一个名为`showItems`defined 的局部变量，并且 的定义`showItems`被提升到顶部。后两种情况的区别在于第三种情况和第二种情况`this.showItems.name`将是“ ”。此外，将是第三个函数的函数体内的一个局部变量，它保存对函数对象的引用。`showItemsName``undefined``showItemsName`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:10:07.113

1.  该`Group`函数用作构造函数。但是，这样做的方式有点低效。这段代码所做的是创建一个*新*函数并将其附加到构造的对象上。他这样做可能是因为他想创建一个闭包（即使用仅存在于构造函数命名空间中的变量），但如果没有这个原因，最好这样做：

    ```
    function Group(args){}
    Group.prototype.showItem = function(args) {}; 
    ```

    这样，通过原型链`showItem`构造的所有对象都可以共享相同的功能。`Group`

2.  与匿名函数相比，使用原始代码的好处是函数有一个名称——这对调试很有帮助，因为阅读充满匿名函数调用的回溯并不好玩！[展开来说，使用关键字](http://kangax.github.com/nfe/)的事物有以下[三种`function`](http://kangax.github.com/nfe/)：

    *   **函数声明**在程序或函数的顶层（即，创建/拥有自己的命名空间的东西），您可以用名称*声明*函数。（该名称在整个程序中与函数对象保持一致，并将出现在回溯中。）这`function showItem(args) {}`在您的示例中。（请注意，这只是*文件或函数顶层*的函数声明。有一个非常相似的事情我将在最后讨论。）按照惯例，大多数人似乎在这些之后省略了分号。
    *   **函数表达式**当表达式的一部分（例如赋值、返回等）时，它是一个函数表达式。函数表达式的标识符部分是可选的，所以这些都是函数表达式：

        ```
        var myfunc1 = function(){};
        var myfunc2 = function MyFunctionName(){}; 
        ```

        第二种形式称为“命名函数表达式”。使用这种形式的最大好处是它`MyFunctionName`不再是一个匿名函数——这个名称将附加到函数上，并将显示在回溯中（例如）。然而，在 JScript (IE <= 8) 中存在一个非常严重的错误，导致使用这些问题。阅读我上面链接的文章以获取详细信息。

    *   最后，还有一种称为**函数语句**的通用扩展语法。这些看起来完全像函数声明，除了*它们不是顶级的*！例如：

        ```
        function() {
            function foo(){} // function declaration
            if (1) {
                function bar(){} // function STATEMENT--not standard JS!
            }
        } 
        ```

        你不应该依赖这个扩展，而应该这样做：

        ```
        function() {
            var bar;
            if (1) {
                bar = function bar(){};
            }
        } 
        ```

3.  `this.showItem = function(){}`将被称为“赋值中的函数表达式”，而原始代码只是使用“函数声明”。

# javascript - 如何在 D3 中进行真正的零持续时间即时转换

> ID：14104423
> 
> 赞同：0
> 
> 时间：2012-12-31T17:30:51.583
> 
> 标签：javascript, svg, d3.js

我一直在使用 D3 编写一个小程序来实时绘制来自设备的数据。该设备以 256 个样本/秒的速率返回数据（大约每 3.9 毫秒一个样本），重要的是我要绘制尽可能多的数据点。

这是我拥有的函数，它在每个时间间隔之后重画线，看起来它应该完全符合我的要求，但事实并非如此。它绘制数据的速度太慢：

```
var ms_delay_between_samples = 3.9,
    current_i = 0,
    data = new Array(window_width_in_samples);

var path = svg.append("g")
           .attr("clip-path", "url(#clip)")
           .append("path")
           .data([data])
           .attr("class", "line")
           .attr("d", line);

for(var i = 0; i < data.length; i++) data[i] = null;

function tick() {

    data[current_i] = get_next_data_point();
    current_i = (current_i + 1) % window_width_in_samples;

    path
            .attr("d", line)
            .transition()
            .duration(ms_delay_between_samples)
            .ease("linear")
            .each("end", tick);

} 
```

我发现“绘图太慢”来自 D3 本身。基本上，在等待计时器启动时会发生约 17 毫秒的延迟。阅读文档以[了解持续时间函数](https://github.com/mbostock/d3/wiki/Transitions#wiki-duration)和来自文档不同部分的文本片段，以了解我面临的问题：

`Transitions start automatically upon creation after a delay which defaults to zero; however, note that a zero-delay transition actually starts after a minimal (~17ms) delay, pending the first timer callback.`

**我遇到的“缓慢”来自约 17 毫秒的持续时间*加上*我设置的 3.9 毫秒的持续时间。从我见过的所有 D3 示例中，所有过渡和重绘都需要持续时间，但我需要在没有持续时间的过渡的情况下重绘。有人知道我会怎么做吗？**我花了几个小时在网上搜索，却一无所获。

我什至尝试将数据下采样 3（至 ~85.3 个样本/秒）并每 23.4 ms 绘制 2 个下采样样本以绕过 ~17 ms 延迟，但它只是使`23.4 ms + ~17 ms = ~40.4 ms`每个样本的延迟时间而不是`3.9 ms + ~17ms = ~20.9 ms`延迟我以前经历过。

请帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:44:09.933

我认为快速流畅动画的最佳选择是放弃过渡并使用`window.requestAnimationFrame`. 我认为它看起来像这样：

```
function tick() {

    data[current_i] = get_next_data_point();
    current_i = (current_i + 1) % window_width_in_samples;

    path.data(data).attr("d", line);

    window.requestAnimationFrame(tick);
} 
```

这将在浏览器能够接收和绘制数据时尽快请求数据。

# jquery - jQuery为匹配集中的每个元素延迟一个点击功能

> ID：14104424
> 
> 赞同：1
> 
> 时间：2012-12-31T17:30:58.730
> 
> 标签：jquery, click, timeout, delay

下面的代码应该对匹配集中的每个元素执行一个点击函数，在它对每个元素生效之前将点击延迟 200 毫秒。

```
$('.panel').each(function(){
        window.setTimeout($('a.last').click(),pdel);
        pdel += 200;
    }); 
```

这一切同时发生，超时功能不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:43:39.287

我假设`pdel`是在每个之外声明的。但是你会希望你使用一个函数，否则你会将方法`setTimeout`的结果传递给.`.click()``setTimeout`

尝试这个：

```
var pdel = 0;
$('.panel').each(function(){
    setTimeout(function(){
        $('a.last').click();
    }, pdel);
    pdel += 200;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:43:13.593

删除窗口并将时间函数重置为 jQuery 函数：

```
var pdel = 0;
    $('.panel').each(function(){
        setTimeout(function(){ $('a.last').click(); },pdel);
        pdel += 200;
    }); 
```

量子点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:47:07.143

$(".panel") 在这段代码中有什么作用？是关于“面板”类的元素数量吗？

只需计算 $(".panels") 的数量：

```
var c = $(".panels").length;
var pdel = 200;
for(var i = 0; i < c; i++) {
    window.setTimeout(function() { /* your function */ }, pdel*c)
} 
```

你真的每 200 毫秒都想要`a.last`点击所有元素吗？不只是对应的那个`.panel`？所以内部函数是：

```
function() { $(".panels").eq(c).find("a.last").click() } 
```

# javascript - 如何仅使用类名遍历无序列表

> ID：14104426
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:31:07.437
> 
> 标签：javascript

```
<ul class="block-content first last odd">
<li class="item first">First</li>
<li class="item">Second</li>
<li class="item last">Third</li>
</ul>
<div class="add-to-cart">
<button type ="button" title="Add To Cart">
</div> 
```

谁能告诉我如何检查无序列表如何检查特定列表项是否存在并仅使用类名，如果特定列表项不是那么我们如何检查和在javascript中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:59:34.993

这将按类名检查列表项：

```
if($("ul.block-content > li.last").length == 0) alert("Not found."); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T17:47:53.713

这将检查`Third`LI 是否存在：

```
if ($(".block-content .li:contains('Third')").length === 0) {
    alert("Third not found");
} 
```

# php - 使用 PDO 语句选择表数据

> ID：14104429
> 
> 赞同：15
> 
> 时间：2012-12-31T17:31:18.913
> 
> 标签：php, mysql, select, pdo

我有一个通过 mysql_ 选择数据的 php 脚本，但是最近我一直在阅读 PDO 是要走的路，而 mysql_ 正在贬值。现在我将该脚本转换为 PDO。

我的问题是，我没有使用 $_POST 来选择。我只想选择包含所有数据的整个表，所以我输入了这个查询：

```
$query = $dbh->prepare("SELECT * FROM students");
$query->execute();
$result = $query->fetchall(); // or you can just $result = $query as hakre proposed! 
```

因此，就像我对旧的已折旧 mysql_ 脚本版本所做的那样，我使用 echo 来回显一个包含数据的表。

```
 echo 
    "<table border='2'>
    <tr>
    <th>ID</th>
    <th>A Number</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Why</th>
    <th>Comments</th>
    <th>Signintime</th>
    </tr>"
    ;

    foreach($result as $row)
    {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td><a href=Student.php?studentA_num=" . $row['anum'] . ">" .$row['anum'] . " </a></td>";
  echo "<td>" . $row['first'] . "</td>";
  echo "<td>" . $row['last'] . "</td>";
  echo "<td>" . $row['why'] . "</td>";  
  echo "<td>" . $row['comments'] . "</td>";
  echo "<td>" . $row['signintime'] . "</td>";
  echo "<td> <input type=\"button\" value=\"Start Session\"onClick=\accept.php?id=" . $row['id'] . "&start=true></td>";
}

  echo "</tr>";
  echo "</table>"; 
```

现在使用它，我无法在我的表中获得单个输出。

![这就是正在输出的所有内容](../Images/4cfdfce7b6a0e7727e955b0b906ab711.png)

我的问题是我的选择语句是否遗漏了什么？还是我没有获取任何行？我还在另一个名为 connect.php 的脚本中设置了连接设置，这是 init.php 所需的（在我所有页面的顶部）

编辑：1

编辑了代码，使其现在可以工作，还添加了一张图片来向其他人展示它的外观！希望有人可以将其用于某种用途！![这就是它的样子！](../Images/ee7fdc08d30197e5a38fc3d75b3a2a9a.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T17:36:15.723

你实际上做的太多了：

```
$query = $dbh->prepare("SELECT * FROM students");
$query->execute();
$result = $dbh->query($query); 
```

有问题的行是：

```
$result = $dbh->query($query); 
```

检查[http://php.net/pdo.query](http://php.net/pdo.query)，参数是一个字符串，实际上是你上面已经使用的 SQL 字符串，而不是`PDO::prepare()`调用的结果值。

对于您的简单查询，您可以这样做：

```
$result = $dbh->query("SELECT * FROM students"); 
```

或者，如果您想准备：

```
$query = $dbh->prepare("SELECT * FROM students");
$query->execute();
$result = $query; 
```

如果您想在查询中插入变量，则后者是一些样板，这就是您准备它的原因。

* * *

下一个问题是该`foreach`行：

```
foreach($result as $row); 
```

`;`由于末尾的分号，您将立即终止循环。删除该分号，以便以下带尖括号的代码块成为 foreach 循环的主体。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T17:36:36.580

你的代码是错误的：

```
$query = $dbh->prepare("SELECT * FROM students");
$query->execute();
$result = $dbh->query($query); 
```

执行准备好的语句后，您可以调用`fetchAll()`它：

```
$query = $dbh->prepare("SELECT * FROM students");
$query->execute();
$result = $query->fetchAll(); 
```

删除 foreach 后的分号后，其余代码将正常工作。

# backbone.js - 骨干事件或路由？

> ID：14104431
> 
> 赞同：3
> 
> 时间：2012-12-31T17:31:20.190
> 
> 标签：backbone.js

由于主干提供了两种响应某些事件的方式，我想知道普遍的共识是什么。这是一种非常常见的情况——我在页面上有一个链接，我可以在页面上设置 href 来路由它，这样路由器就可以调用一个函数来处理它，如下所示：

**HTML**

 `````
 <a href='#posts/2' class='handleInView'>Item 2</a> 
```` 

`**JS**`

 ````
var AppRouter = Backbone.Router.extend({
        路线：{
            “帖子/：id”：“getPost”
        }
    });

```

或者我可以像这样响应视图中的事件：

```
var MyView = Backbone.View.extend({
  ...
  事件：{
    "点击 .handleInView": "打开",
  },

  ...

  打开：函数（）{
      ...
  }

});

```

我知道路由为您提供了历史和直接链接的额外好处，但是从性能的角度和代码布局的角度来看，如果我不关心历史，那么什么是更好的方法。

我的路线可能是一个我可以看到所有交互的地方，但它也可能很快变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:19:15.613

如果您不关心历史记录或书签，事件的副作用更少（人们不会尝试为它们添加书签，也不会干扰您的历史记录）并且它们更简单/更快地实现和处理。

在性能方面，它们也稍微快一些（但实际上这两种方法都慢到根本不重要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T13:27:20.030

通常，当您调用应用程序状态的急剧变化时使用路由，或者您希望维护浏览历史记录（通过backbone.history），以便用户可以通过浏览器按钮在状态之间来回导航。

理想情况下，您会在不同的情况下同时使用两者。

我喜欢根据我的页面上发生的变化来考虑它。如果一般页面状态相同，但某些元素正在更改或更新，我将使用事件。如果一般页面状态发生变化或者我正在加载不同的 UI 屏幕，我将使用路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T13:12:32.530

我同意评论。任何需要深度链接、书签等的东西都应该使用路由来处理。但是，如果您有 TabView 之类的东西，或者应该无法从 URL 访问的另一个视图，并且嵌套在另一个视图中，那么在视图代码内部处理它可能更有意义。至于混乱，您可能需要考虑将您的路线重新组织到单独的文件中。这里有些例子

[骨干通用路由器与单独的路由文件？](https://stackoverflow.com/questions/11261449/backbone-general-router-vs-seperate-routing-files)

[BackboneJs 中的多个路由器与单个路由器](https://stackoverflow.com/questions/8362230/multiple-routers-vs-single-router-in-backbonejs)``

# php - 自动刷新无限 div

> ID：14104433
> 
> 赞同：2
> 
> 时间：2012-12-31T17:31:51.663
> 
> 标签：php, javascript, jquery, html, refresh

我目前可以使用 jquery 和 php 在我的网站上刷新 div。这在一定程度上很有效。问题是当前正在刷新的数据是整个表。标头中使用的代码如下：

```
<!-- DIV REFRESH START -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script> 
<script> 
var auto_refresh = setInterval(
function()
{
$('#datatable').fadeOut('slow').load('data/table.php').fadeIn("slow");
}, 10000);
</script>
<!-- DIV REFRESH END --> 
```

如您所见，它正在刷新具有特定页面的特定 div。一般来说，我对基于 jquery 和 java 的编码非常陌生，因为我确信在这个问题中会很明显。

是否可以执行以下操作：

1.  由于行数一直在变化，因此该表实际上是在 php 函数中创建的。是否可以让它专门刷新函数而不是只调用函数的页面？

2.  该表当前完全刷新。这只是为了更新每一行的一个数字。让它只刷新行上的每个图形会更干净，但是由于表格的灵活性以及它是函数的一部分这一事实，这可能吗？如果是这样，怎么可能？我知道我可以让每一行上的每个 div 都有一个唯一的 div 名称，然后我可以在页面顶部的脚本部分中考虑到它，但这不需要重复添加相同代码的每个可能的 div 名称吗？

3.  虽然我知道可以根据数据库中的某些内容更改而不是时间延迟来刷新项目，但是考虑到上面列出的要求，最好的方法是什么？

我可能会走得很远，这是对每个问题的简单回答，但我感谢任何和所有输入。

谢谢！

ps如果有帮助，我目前用来创建表的函数如下（我知道它可以做得更干净，但它有点像一个学习项目）：

```
function portalTable($venueId, $eventId)
{   
    echo "<table class='basic-table'><tr class='th'><th>Portal Name</th><th>Scanned</th></tr>";
    $grandTotals = array();
    $portalSql = mysql_query("SELECT * FROM portal WHERE id_venue = $venueId");
    while ($portalRow = mysql_fetch_array($portalSql))
        {
            $portalId = $portalRow['id_portal'];
            $portalName = $portalRow['name_portal'];
            if($portalId&1) {$gray = "dg";} else {$gray = "lg";}                        
            $sql = mysql_query("SELECT * FROM scan WHERE id_event = $eventId AND id_portal = $portalId");
            while ($row = mysql_fetch_array($sql))
                {
                    $scanTotal = $row['total_scan'];
                    echo "<tr class='$gray'><td>$portalName</td><td>$scanTotal</td></tr>";
                    $grandTotals[] = $scanTotal;
                }
        }
    $totals = array_sum($grandTotals);
    echo "<tr class='basic-table-total'><td>Total</td><td>$totals</td></tr>";

    // total failed scans
    $sql = mysql_query("SELECT total_errors FROM errors WHERE id_event = $eventId");
    while ($row = mysql_fetch_array($sql))
        {
            $totalErrors = $row['total_errors'];
            echo "<tr class='basic-table-total'><th>Total Rejected Scans</th><th>$totalErrors</th></tr>";
        }

    echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:38:38.200

```
$('div.myDiv').each(function(i, obj) {
    $(obj).load('myURL.php');
}); 
```

那就是你要找的东西？

至于发送的大量数据？不要发送原始 HTML！相反，在 jQuery中使用[parseJSON并在 PHP 脚本中使用](http://api.jquery.com/jQuery.parseJSON/)[json_encode](http://php.net/json_encode)来向用户发送（非常）少量的数据，然后客户端可以使用这些数据来制作表格。

在 JavaScript 中处理解码的 JSON 数据相对简单。一旦它被解码，它现在是一个可访问的`object`. 您可以使用迭代器（jQuery 做得很好）。

```
$.each(myJSON, function(i, val) {
    $('body').append(val + "<br />");
}); 
```

# c# - 将模型设置为与相机位置 XNA 完全相同的方向和定位

> ID：14104435
> 
> 赞同：1
> 
> 时间：2012-12-31T17:32:08.117
> 
> 标签：c#, matrix, xna, camera

我想做一个fps游戏。我需要武器模型与相机相距例如 15`Z`个单位，并与相机指向的方向相同。我几乎什么都试过了，但我没能做到。我尝试将相同的旋转矩阵与相机和模型矩阵相乘，并且还尝试了这个：

```
Matrix view = Matrix.CreateLookAt(new Vector3(0, 0, 0), new Vector3(0, 0, 200), Vector3.Up);
Gun = Matrix.CreateWorld(gunPos, Vector3.Forward, Vector3.Up);'
gunPos = cameraPos + view.Forward * 15; 
```

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:59:24.863

```
Gun = Matrix.Invert(view);
Gun.Translation += (Gun.Forward * 15); // + (Gun.Down * 4) + (gun.Right * 2); 
```

# ruby - 如何在不引用整个命名空间的情况下引用模块方法？

> ID：14104446
> 
> 赞同：1
> 
> 时间：2012-12-31T17:33:18.363
> 
> 标签：ruby, ruby-on-rails-3.2

我有一个模块定义为：

```
module MyApp
  module Utility
    def Utility.my_method 
```

我想在其他几个类中使用该方法。但我不想打电话：

```
MyApp::Utility.my_method 
```

我宁愿打电话：

```
Utility.my_method 
```

这合理吗？我已经尝试过`include MyApp::Utility`，`include MyApp`但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:15:42.793

好吧，只需分配您想要的任何别名，例如：

```
ShortNameGoesHere = MyApp::Utility
ShortNameGoesHere.my_method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:43:31.360

这是一个将 my_method 混合到一个类中的示例：

```
#myapp.rb
module MyApp
  module Utility
    def my_method
      "called my_method"
    end
  end
end 
```

* * *

```
#test.rb
require './myapp'
class MyClass
  include MyApp::Utility
end

if __FILE__ == $0 then
  m = MyClass.new
  puts m.my_method
end 
```

听起来您想在混合方法上维护模块的名称空间。我已经看到有人尝试这样做（[https://stackoverflow.com/a/7575460/149212](https://stackoverflow.com/a/7575460/149212)），但看起来很混乱。

如果您需要 my_method 被命名空间，您可以简单地在方法名称中包含一个模块标识符：

```
module MyApp
  module Utility
    def util_my_method
      "called my_method"
    end
  end
end 
```

# c++ - 释放分配给 std::vector 的内存的正确方法 在代码块结束之前

> ID：14104449
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:34:27.583
> 
> 标签：c++, stl

我知道如果我在堆栈上创建了一个向量，如下所示：

```
void foo(){
std::vector<int> vec;

} 
```

执行完成后`foo`，分配给 vec 的内存被释放。但是，我如何在`foo`. 我不是在寻找 vec.clear() 因为它只是清除容器，它确实释放了分配给容器的内存。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:42:26.320

使用`{}`范围块来更密切地控制向量的生命周期：

```
void foo()
{
   {
      std::vector<int> vec;
      // stuff that uses vec
   }

   // stuff that doesn't
} 
```

您*可以*`shrink_to_fit`在 C++11 中使用，并在[C++03 中尝试与技巧相关的等效项](https://stackoverflow.com/questions/7829018/can-we-rely-on-the-reduce-capacity-trick)，但为什么呢？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:38:35.990

你需要什么都不做。它将自行处理，因为向量类中的析构函数会破坏向量，并在函数结束时变量超出范围时释放内存。

编辑：如果你真正想要做的是像阅读大量数字，然后删除所有不能被 6、7、2 整除但不等于 42 的数字，那么我会说它是最好创建第二个向量来存储您不想保留的数字，然后让原始向量超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:35:17.880

如果`vec.resize(0); vec.shrink_to_fit();`上面建议的 (C++11) 不可用，您可以获得与`vector<int>().swap(vec);`. 尽管最好将其放入额外的`{}`块中，但如果可以这样做（并不总是容易，但通常是可行的）。

但是请注意，与临时对象进行交换很可能会对您交换的临时对象进行（不必要的）动态分配，并在当前范围结束之前分配一个小块。
它显然也不会释放*实际* `vector`对象（与其持有的数据相反）在堆栈上占用的 4-8 字节内存（只有作用域的末尾可以这样做）。

也就是说，在大多数情况下，整个努力都是徒劳的。如果您稍后在同一范围内*不需要*大量内存，那么早或晚释放向量并不重要。要么它已经很早就失败了（在这种情况下，整个问题都不会出现！），要么它会以任何一种方式工作到函数的末尾。

另一方面，如果您知道稍后在同一个函数中*需要*大量内存（例如，另一个类似大小的向量）并且可以合理地预期这将成为一个问题，那么很难预测是否释放第一个真的很重要（想想碎片化，尤其是在做这个`swap`把戏的时候）。
如果第二个向量与第一个向量大小相同或更小，您只能期望它能够可靠地工作，在其他所有情况下，它不能保证更好地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T09:19:10.233

在我看来，您可以通过以下方式释放向量中分配的全部内存：
1\. 使用方法 clear() 调整向量的大小，然后使用 shrink_to_fit() 确保向量中的所有元素都被实际释放。
2\. 如果您的向量包含指针元素，请使用智能指针 (shared_ptr, unique_ptr) 而不是原始指针（在 ANSI C 中）。
3\. 如果您使用原始指针，请不要忘记在停止使用它们时释放（）它们。

# python - 转储外部程序的标准输入和标准输出

> ID：14104450
> 
> 赞同：0
> 
> 时间：2012-12-31T17:34:29.343
> 
> 标签：python, cmd, stdout, stdin

我正在尝试通过 python 运行 exe 并将**用户输入**和输出转储到日志文件中。

**exe的源文件：**

```
//test.c
#include<stdio.h>
void main()
{
    int a=0;
    printf("Enter no:\n");
    scanf("%d",&a);
    printf("You entered %d",a);
} 
```

编译完上述文件后，我尝试通过python运行**test.exe**

```
#Dumpinputoutput.py
file="log.txt"
fo=open(file, "w")
subprocess.call(["test.exe"],stdout=fo,stderr=fo)
fo.close() 
```

在执行脚本时，

**log.txt 是：**

```
Enter no:

You entered 54 
```

**代替**

```
Enter no:
54
You entered 54 
```

我希望**用户的输入也**包含在日志文件中，可以吗？
*我也尝试了 subprocess.peopen ，但得到了相同的结果。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:52:09.487

问题是您在日志文件中查找的回显“54”是 cmd.exe 的功能，而不是您正在运行的 exe（请参阅 cmd.exe 上的 /Q 开关）。

您需要的是一种在控制应用程序时模拟 cmd.exe 的方法。查看此答案以获取有关 WExpect 的信息：[Python 有 WExpect。](https://stackoverflow.com/a/1042975/1055722)

该软件包将允许您模拟一个终端，该终端应允许您捕获与 exe 的所有交互。

# c# - Directory.GetFiles 找到不存在的文件

> ID：14104451
> 
> 赞同：19
> 
> 时间：2012-12-31T17:34:33.960
> 
> 标签：c#, .net, windows, file, getfiles

我只是偶然发现`GetFiles`了`System.IO.Directory`.

只要`searchPattern`传递给该方法的参数包含保留的 Windows 设备名称，例如`"nul.*"`or `"aux.bmp"`，该方法就会返回一个包含不存在文件名称的数组，例如`C:\Users\ft1\nul`or`D:\aux`等​​。

我想知道这些设备名称是否在上下文中具有特殊含义，例如“。” 或“..”，或者如果这只是一种错误。无论如何，这仍然看起来很奇怪。例如，C# 中的这段代码片段：

```
string[] fileNames = Directory.GetFiles(@"C:\D:\..\..\...\", "con.txt");
foreach (string fileName in fileNames) Console.WriteLine(fileName); 
```

印刷

```
C:\D:\..\..\...\con 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-31T17:39:30.987

这是众所周知的。[它是关于命名文件、路径和命名空间 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)的操作系统设计

> 摘抄：
> 
> 不要使用以下保留名称作为文件名：CON、PRN、AUX、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、 LPT6、LPT7、LPT8 和 LPT9。还要避免这些名称后跟扩展名；例如，不推荐使用 NUL.txt。有关详细信息，请参阅命名空间。

这些基本上是文件名别名（命名空间），因此它们总是全局存在（在每个文件夹中）。如果你试图枚举它们，你会得到它们，因为它们确实存在。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T17:40:36.327

这些是MSDOS/NTFS 的[保留字](http://en.wikipedia.org/wiki/Filename#Reserved_characters_and_words)。

来自[维基百科](http://en.wikipedia.org/wiki/Filename)：

> 此外，在 Windows 和 DOS 实用程序中，某些单词也可能被保留，不能用作文件名。例如 DOS 设备文件：
> 
> ```
> CON, PRN, AUX, CLOCK$, NUL
> COM0, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9
> LPT0, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, and LPT9. 
> ```
> 
> 具有这些限制的系统会导致与其他一些文件系统不兼容。例如，Windows 将无法处理这些合法的 UNIX 文件名或引发错误报告：aux.c、q"uote"s.txt 或 NUL.txt。
> 
> 内部使用的 NTFS 文件名包括：
> 
> ```
> $Mft, $MftMirr, $LogFile, $Volume, $AttrDef, $Bitmap, $Boot, $BadClus, $Secure,
> $Upcase, $Extend, $Quota, $ObjId and $Reparse 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-02T11:23:18.587

作为对此的补充，在`MSTest`dll 中使用 json 配置文件时存在相关问题。当我调用它时`Test_Settings_Develop.json`， `Directory.GetFiles`找到了它，但说它不存在，所以我的测试在尝试加载它时无法运行。

将其重命名为 TestSettings_Develop.json 并且可以正常工作。

# asp.net-mvc - 重定向到同一视图

> ID：14104459
> 
> 赞同：1
> 
> 时间：2012-12-31T17:35:32.463
> 
> 标签：asp.net-mvc, controller, redirecttoaction

我在一个 ASP.NET MVC 网站上工作，我是新手。我有一个几乎没有动作的控制器。我想在我的网站上使用这些操作。例如

```
[HttpPost]
public ActionResult MyAction(ViewModel model)
{

    if (ModelState.IsValid)
    {
        //code is here
    }
  return RedirectToAction(); // redirect to same view

} 
```

我想重定向到生成请求的同一视图。我不确定这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:02:48.610

根据您的评论，我将创建一个如下所示的控制器：

```
public MyController : Controller
{
  private ActionResult SharedMethod(SomeModel model)
  {
    if (ModelState.IsValid)
    {
      //code is here
    }

    // viewname is required, otherwise the view name used will be
    // the original calling method (ie public1.cshtml, public2.cshtml)
    return this.View("SharedViewName");
  }

  public ActionResult Public1(SomeModel model)
  {
    return this.SharedMethod(model);
  }

  public ActionResult Public1(SomeModel model)
  {
    return this.SharedMethod(model);
  }
} 
```

# python - 从类中删除画布对象的问题

> ID：14104461
> 
> 赞同：1
> 
> 时间：2012-12-31T17:35:37.677
> 
> 标签：python, class, canvas

我从类中删除画布对象时遇到问题。

我创建了一个`Rectangle`名为`f`. 然后我需要删除这个对象。Python 删除`f`，但不删除 Frame 上的画布对象。我不知道问题出在哪里。

```
from tkinter import *

class Rectangle():

    def __init__(self, coords, color):   
        self.coords = coords
        self.color = color   

    def __del__(self):
        print("In DELETE")
        del self
        print("Goodbye")

    def draw(self, canvas):
        """Draw the rectangle on a Tk Canvas."""
        print("In draw ")
        print("Canvas  =  ",canvas)
        print("self = ",self)
        print("bild canvas = ",canvas.create_rectangle(*self.coords, fill=self.color))

root = Tk()
root.title('Basic Tkinter straight line')
w = Canvas(root, width=500, height=500)

f = []
f = Rectangle((0+30*10, 0+30*10, 100+30*10, 100+30*10), "yellow")
print("Draw object", f.draw(w), f)
f.__del__()
del f

w.pack()
mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:25:04.257

好的，您遇到的问题是您开始创建一个`Rectangle`供您自己使用的对象，这似乎是合理的，但您需要努力实现它。

无论如何要简单地完成你想做的事情（没有你的对象）：

```
# draws a rectangle and returns a integer
rectangle_id = c.create_rectangle(*(0, 0, 30, 30), fill="yellow")
c.delete(rectangle_id) # removes it from the canvas 
```

为了用你的对象完成你想要的，`Rectangle`我建议在你绘制它时使用一个属性来存储 id 并实现一个可以删除它的方法。`__del__`当不再有对您的对象的任何引用时，您可能希望使用该方法将其删除。这可以做到，但你应该知道一些警告（在我的回答范围之外......见：[http ://eli.thegreenplace.net/2009/06/12/safely-using-destructors-in-蟒蛇/](http://eli.thegreenplace.net/2009/06/12/safely-using-destructors-in-python/)）。我个人会选择显式调用一个方法来从视图中删除对象表示，以避免所有这些废话:)。

这里有很多设计决策我忽略了，我建议你在这里对 OO 的使用考虑一下，或者在你对 tkinter 有更好的理解之前避免使用它。

# python - 使用python输入网站

> ID：14104462
> 
> 赞同：-2
> 
> 时间：2012-12-31T17:35:42.763
> 
> 标签：python

例如，我将如何编写一个打开 facebook 并发布状态的程序？我正在尝试学习如何使用 python 来复制正常的用户操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:38:20.797

Facebook 有一个你可以使用的[API](https://developers.facebook.com/docs/)（它也有一个[Python 模块](https://github.com/pythonforfacebook/facebook-sdk/)）——这对于大多数用例来说是“正确的方法”。尽管它与“普通用户操作”不同，但 Facebook 将区分使用浏览器做事的用户和使用 API 的应用程序。

如果你想自动化你的软件来浏览一个网站，尤其是像 Facebook 这样的 AJAX-y 网站，我建议你研究一下[Selenium——](http://seleniumhq.org/)它是一个浏览器自动化框架，可用于多种语言，包括 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:53:35.807

如果您正在寻找“普通用户操作”，也许您会发现这个[http://facebookbot.rubyforge.org/](http://facebookbot.rubyforge.org/)很有用。它是用 ruby​​ 编写的 facebook-bot。它很旧，但原理仍然相同。

# java - Android开发蓝牙聊天示例不起作用

> ID：14104465
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:36:21.313
> 
> 标签：java, android

我正在尝试使用 eclipse 加载 android 蓝牙聊天示例：

我没有篡改任何代码，但我立即收到 23 个 java 错误，有人可以帮忙吗？

谢谢。

这是我得到的...

```
Description Resource    Path    Location    Type

The import android.view.Window is never used    BluetoothChat.java  /BluetoothChat/src/com/example/android/BluetoothChat    line 33 Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 481    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 488    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 489    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 480    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 460    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 459    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 438    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 437    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 413    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 412    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 393    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 392    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 388    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 371    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 370    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 339    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 338    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 323    Java Problem
The field PowerManager.SCREEN_BRIGHT_WAKE_LOCK is deprecated    AccelerometerPlayActivity.java  /AccelerometerPlay/src/com/example/android/accelerometerplay    line 75 Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 322    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 302    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 303    Java Problem
No exception of type IOException can be thrown; an exception type must be a subclass of Throwable   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 283    Java Problem
The method e(String, String, Throwable) in the type Log is not applicable for the arguments (String, String, IOException)   BluetoothChatService.java   /BluetoothChat/src/com/example/android/BluetoothChat    line 284    Java Problem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:17:44.513

你不能在模拟器上运行蓝牙程序。在安卓设备上运行你的程序

# homebrew - 如何将 Homebrew 环境迁移到另一台计算机？

> ID：14104476
> 
> 赞同：12
> 
> 时间：2012-12-31T17:37:18.483
> 
> 标签：homebrew

导出自制环境以便我可以在计算机之间同步工作区的首选方法是什么？似乎应该有类似于`composer.lock`or 的东西`pip freeze`。还有比这更好的方法`brew list > brews.txt`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-17T02:30:07.237

有一个更好的方法：`brew leaves`.

此命令打印一个简单的已安装公式列表，这些公式不依赖于任何其他公式。本质上，这列出了手动安装的所有内容，或者是已删除公式的剩余依赖项。

```
$ brew leaves
apple-gcc42
bash-completion
brew-cask
git
[...] 
```

没有使用输出进行安装的内置方法`brew leaves`，但仅拥有手动安装公式的干净列表是朝着正确方向迈出的一步。

感谢这个 Gabe Berke-Williams 写这篇文章：[http ://robots.thoughtbot.com/brew-leaves](http://robots.thoughtbot.com/brew-leaves)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-05T22:29:48.217

[Homebrew Bundle](https://github.com/Homebrew/homebrew-bundle)似乎是一个非常棒的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:17:34.630

没有更好的方法，目前也没有制定的计划。

来源：[https ://github.com/mxcl/homebrew/issues/17771](https://github.com/mxcl/homebrew/issues/17771)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:32:00.680

使用 git！维护环境设置脚本的存储库是一种非常巧妙的方法。

我强烈建议首先使用脚本来设置开发环境。Thoughtbot 有一个非常轻量级的方法，可以提供一个开发环境，包括一堆 brew 公式。[https://github.com/thoughtbot/laptop](https://github.com/thoughtbot/laptop)。GitHub 刚刚为此（以及更多）开源了 boxen，但它的学习曲线有些陡峭。

从thoughtbot/latop 自述文件中可以看出，整个安装是单行的。如果您想要不同的软件包，请分叉存储库并添加您使用的任何内容。这仅涵盖初始安装，但这是一个美妙的开始。

对于开发环境的持续同步，包括更新您首选的自制程序设置，您可能需要尝试“dotfiles”方法。Zach Holman 在这里详细介绍了一个很好的方法：[https ://github.com/holman/dotfiles](https://github.com/holman/dotfiles)

如果您想调整或更新任何内容，只需对脚本进行适当的更改（holman 的点脚本会进行持续更新）。从任何其他环境提交、推送、下拉。

# jquery - 片段：jQuery 语法高亮

> ID：14104479
> 
> 赞同：2
> 
> 时间：2012-12-31T17:37:37.037
> 
> 标签：jquery

我正在使用 Snippet，这是一个用于突出显示代码的 jQuery 插件。

[http://www.steamdev.com/snippet/](http://www.steamdev.com/snippet/)

我让它正常工作以突出显示 css、js、php 等。但它没有突出显示我的 HTML。这是我的测试页面。

[https://dl.dropbox.com/u/9883217/syntaxHighlighter/index.html](https://dl.dropbox.com/u/9883217/syntaxHighlighter/index.html)

关于为什么它不突出显示我的 html 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:39:55.010

浏览器正在解析您的 HTML。

您需要转义它（替换为`<`、`&lt;`等）。`>``&gt;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:48:11.997

使用 PHP，您可以使用函数[htmlentities](http://php.net/manual/de/function.htmlentities.php)

```
<?php
    $str = "Ein 'Anführungszeichen' ist <b>fett</b>";

    // Gibt aus: Ein 'Anf&uuml;hrungszeichen' ist &lt;b&gt;fett&lt;/b&gt;
    echo htmlentities($str);

    // Gibt aus: Ein &#039;Anf&uuml;hrungszeichen&#039; ist &lt;b&gt;fett&lt;/b&gt;
    echo htmlentities($str, ENT_QUOTES);
?> 
```

# c++ - 全局指针和局部指针有什么区别？

> ID：14104486
> 
> 赞同：0
> 
> 时间：2012-12-31T17:38:22.427
> 
> 标签：c++, c, pointers, global-variables

我有一个像这样的小代码：

```
 #include <stdio.h>

    int *ptr1;
    int *ptr2;

  void some_function(void)
    {

    int B = 5;
    ptr2 = &B;
    }

  main (){
    int C, D;
    int A =10;
    int *ptr3;
    ptr1= &A;

    ptr3=ptr2;

    some_function();

    C = *ptr1 + *ptr2;

    printf("Sum of the numbers C= %d\n",C);

    some_function();
    D = *ptr1 + *ptr3;

    printf("Sum of the numbers D= %d\n",D);

  } 
```

为什么我没有得到 D 的结果，却得到了 C 的结果？我得到了打印语句 S 的结果，`um of the numbers C=15`但没有得到 D 的最后一个打印语句。本地指针和全局指针之间有什么区别（我的意思是 ptr1 和 ptr2 都是全局定义的，而 ptr3 是本地定义的）？指针赋值是否`ptr3=ptr2`有效？指向局部变量 Vs 的指针是否有任何显着差异？指向全局变量的指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:43:00.723

```
ptr3 = ptr2; 
```

`ptr3`被初始化为 的`ptr2`值`NULL`。这是`NULL`因为您没有初始化它并且它具有静态存储持续时间。

然后你做

```
D = *ptr1 + *ptr3; 
```

您正在取消引用`ptr3`它是一个空指针：这是未定义的行为。的值`ptr2`可能在您的程序期间发生了变化，但`ptr3`仍然是一个空指针。

**编辑：**为了完整起见（*好吧，有点*）：

```
void some_function(void)
{
    int B = 5;
    ptr2 = &B;
} 
```

`B`对象生命周期在函数`some_function`退出时结束。返回后无法`B`访问。它的意思是：`ptr2``some_function`

```
C = *ptr1 + *ptr2; 
```

还会调用未定义的行为，因为您正在取消引用`ptr2`，这是此语句中的无效指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:42:08.107

`ptr3=ptr2;` **在函数调用之前处理，** `some_function();`因此分配给`ptr3`它的错误地址为 NULL，因为 ptr2 为 0（全局变量的默认值）。

这样做：

```
some_function();
ptr3=ptr2;
D = *ptr1 + *ptr3;
printf("Sum of the numbers D= %d\n",D); 
```

此外，以下代码运行正确，因为`ptr2`在调用`some_function();`函数后使用了值。

```
some_function();
C = *ptr1 + *ptr2;
printf("Sum of the numbers C= %d\n",C) 
```

哦！，变量的范围`ptr2`指向 some_function() 的本地。

```
void some_function(void)
    {

    int B = 5;
    ptr2 = &B;
    } 
```

这样做：

```
void some_function(void)
    {

    int* B = calloc(1,sizeof(int));
    *B = 5; 
    ptr2 = B;
    } 
```

也不要忘记`free(ptr2)`在打印语句之后；

# php - PHP搜索具有特定单词的网站

> ID：14104489
> 
> 赞同：2
> 
> 时间：2012-12-31T17:38:35.670
> 
> 标签：php, search

我正在尝试使用特定单词监视网站的新产品页面。我已经有一个基本脚本，可以使用搜索单个单词，`file_get_contents();`但这并不有效。

查看它们在`<td>`标签中的代码`<table>`

我如何让 PHP 搜索单词，无论它们处于什么顺序并获得声明？例如

```
$searchTerm = "Orange Boots"; 
```

从：

```
<table>
   <td>Boots (RED)</td>
</table>
<table>
   <td>boots (ORANGE)</td>
</table>
<table>
   <td>Shirt (GREEN)</td>
</table> 
```

返回匹配。

很抱歉，如果不清楚，但我希望你能理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:49:58.630

你可以这样做

```
$newcontent= (str_replace( 'Boots', '<span class="Red">Boots</span>',$cont)); 
```

只需为红色类编写 css，就像您想显示红色`color:red;`一样，然后为休息做同样的事情

但更好的方法是 DOM 和 Xpath

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:00:29.987

如果您希望对该 HTML 块进行快速而肮脏的搜索，您可以尝试使用[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)函数的简单正则表达式。例如，您可以尝试：

```
$html_block    = get_file_contents(...);
$matches_found = preg_match_all('/(orange|boots|shirt)/i', $html_block, $matches); 
```

`$matches_found`将是 1 或 0，作为是否找到匹配的指示。`$matches`将根据匹配填充任何匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:41:31.477

使用卷曲。它比 filegetcontents() 快得多。这是一个起点：

```
$target_url="http://www.w3schools.com/htmldom/dom_nodes.asp";
 // make the cURL request to $target_url
$ch = curl_init();
 curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
 curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$html= curl_exec($ch);
if (!$html) {exit;}
$dom = new DOMDocument();
@$dom->loadHTML($html);

  $query = "(/html/body//tr)"; //this is where the search takes place

 $xpath = new DOMXPath($dom);
 $result = $xpath->query($query);

for ($i = 0; $i <$result->length; $i++) {
  $node = $result->item(0);
  echo "{$node->nodeName} - {$node->nodeValue}<br />";
} 
```

# java - 与 URL 兼容且易于解析的日期时间格式？

> ID：14104491
> 
> 赞同：1
> 
> 时间：2012-12-31T17:38:41.707
> 
> 标签：java, rest, date, datetime, playframework-2.0

使用 Play 2 我想创建一个 REST API，其中应包括

```
/resource/<startDateTime> 
```

意思是返回`startDateTime`大于 URL 中给出的 startDateTime 的所有资源项。

所以现在我需要一些 DateTime 格式，它可以通过 URL 以人类可读的格式传递，并且仍然很容易解析为我的 Play 2 控制器中的 Java Date 对象。对此有任何提示/最佳实践吗？感谢您的任何提示！

更新：如果 Play 能为我做解析，那就更好了。对于路由配置中的 java.util.Date 我收到错误

```
 No QueryString binder found for type java.util.Date. Try to implement an implicit QueryStringBindable for this type. 
```

是否有任何预定义来解析日期？

**更新：**

预期输入：可能是例如

```
http://site.com/resource/20121231-141557 # 2012/12/31 14:15:57 
```

或某事。否则，易于阅读 - 我不在乎，只要它可以使用 URL 传输并且易于解析为 Date 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:46:14.773

日期有一个 ISO 标准，编号 8601。

[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

日期和时间值从最重要到最不重要进行组织：年、月（或周）、日、小时、分钟、秒和秒的小数部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:45:04.520

您可以在此处查看本机 Play2 路径绑定器： [https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/mvc/Binders.scala#L251](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/mvc/Binders.scala#L251)

目前，没有什么可以处理参数中的日期。

**但是您可以使用ISO 8601**格式（使用[ISODateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)）在 DateTime (JodaTime) 之上编写自己的 PathBinder

我认为这将是一个很好的拉取请求；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:29:54.443

看来您在这里有两个问题：

1.  如何轻松格式化和解析日期？我认为在 java 中处理日期的最佳库是[Joda Time](http://joda-time.sourceforge.net/)。它具有格式化和解析不同格式日期的方法。
2.  如何使用自定义解析器定义路由？为此，您需要定义自己的 QueryStringBindable。以[这个关于双打的答案](https://stackoverflow.com/questions/10286725/how-to-bind-double-parameter-with-play-2-0-routing/10307927#10307927)为例。

# vba - 如何搜索文档并更改指定字符

> ID：14104494
> 
> 赞同：0
> 
> 时间：2012-12-31T17:38:55.420
> 
> 标签：vba, ms-word

我搜索了一个 vba 代码来做某事，但一无所获。我喜欢：

1.  通过输入框指定 2 个字符。例如 SearchBox=ChrW(1820) 和 ReplaceBox=ChrW(0710)

2.  搜索文档，得到第一个词和这个词的第一个字符。

3.  如果在 SearchBox 中指定了第一个字符，则

    一个。检查此单词中是否存在字符 = ChrW(1820) 或 ChrW(1821) 或 ChrW(1820)

    湾。如果第一个字符 = 存在字符，则

    C。用 ReplaceBox 中指定的其他字符更改第一个字符

    d。其他：什么都不做

4.  转到下一个单词并检查相同（循环）

5.  完成文档并发送消息“50 个字符已更改”

我知道这有点混乱，但我是来给你解释的。所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:45:53.123

我有我的答案的解决方案：

```
For Each w In ActiveDocument.Words
    If Left(w, 1) = "a" Then 'Check if words start with "a" then
       'Check if exist letters "a" or "b" after first character then
        If InStr(2, w, "a") Or InStr(2, w, "b") Then w.Text = "A" & Mid(w, 2) 
           'Change the first Character with "A"
    End If
Next 
```

但是现在我不能对单词的最后两个字符做同样的事情。我有测试：

```
If Right(w, 2) = "au" Then
 If InStr(2, w, "a") Then w.Text = "AU" & Right(w, 2) 
```

但不工作。请问有什么解决办法吗？

`Else`还有一个……以前怎么做，`End If` 因为我有问题。当我做`Else`我有错误`"End If without If"`

# php - 通过php发送信号进行处理

> ID：14104497
> 
> 赞同：4
> 
> 时间：2012-12-31T17:39:15.447
> 
> 标签：php, shell

我正在尝试通过使用网页中的按钮将 kill -10 (SIGUSER1) 发送到进程 ID，我尝试了不同的方法来发送信号，同时将 PHP 变量（保存 PID）传递给 shell。以下是我所拥有的：

```
$next = posix_kill($pid3, 10); 
```

现在，这给了我以下错误：

```
PHP Warning:  posix_kill() expects parameter 1 to be long, 
              string given in /var/www/parse2.php on line 15 
```

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T17:51:14.000

试试这个：

```
$next = posix_kill((long)$pid3, 10); 
```

[Intval](http://php.net/manual/en/function.intval.php)返回一个 int，因此警告不会消失，但它可能会起作用

因此，既然您似乎有问题，最好还是建议其他地方：

```
$next = posix_kill(intval($pid3), 10); 
```

如果这不起作用，我建议向我们展示您使用的 php 版本。

除非您有空间，否则请尝试：

```
$next = posix_kill(intval(trim($pid3)), 10); 
```

更新：

所以现在你让它工作了，你需要捕获信号并让它做一些事情，你需要附加一个回调函数，因为我不知道你的其余代码。你需要这样的东西：

```
pcntl_signal(SIGUSR1, "sig_handler"); 
```

然后对该信号做一些事情：

```
function sig_handler($sig) {

   switch($sig) {
      case SIGUSR1:
         // logtrace(1,"received USR1 signal.");
         break;
   ... 
```

我只是想一件事，我假设我们发送信号的过程是一个 PHP 脚本。否则，我认为您可以正常工作，但还没有做很多（还）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T17:46:28.510

如果可能，大多数 php 函数将尝试将其参数强制转换为适当的数据类型。如果可能的话，php 函数自动将字符串转换为 int 或 float 等数字类型非常常见。

但是，有些不是这样写的，您需要提供手册中指定的数据类型。

“long”是数字类型，所以只需转换为整数。这假设 $pid3 是一个数字字符串，因此强制转换会产生一些合理的结果。

```
$next = posix_kill((int) $pid3, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T17:45:31.373

我认为您可以将其转换为 int 然后它应该可以工作：

```
$next = posix_kill((int)$pid3, 10); 
```

您的变量是字符串或其他任何东西。

或试试这个：

[如何将 long 转换为字符串？](https://stackoverflow.com/questions/5067169/how-to-cast-long-to-string)

# c# - 如何设置 FlipViewItem 内的用户控件的公共变量？

> ID：14104505
> 
> 赞同：1
> 
> 时间：2012-12-31T17:40:10.370
> 
> 标签：c#, wpf, windows-store-apps

我有一个`FlipView`with custom`FlipViewItem`里面有关闭按钮 - 我基本上是在尝试处理那些翻转视图按钮。s 有一个名为的`FlipViewItem`自定义模板`DocumentFlipViewItemControlTemplate`，其中包含一个自定义，其中包含`User Control`关闭按钮。自定义控件有一组需要由父页面设置的公共变量（带有getter 和setter）——例如对要关闭的页面实例的引用。如何设置这些公共变量？

`FlipViewItem`模板如下所示：

```
<ControlTemplate x:Key="DocumentFlipViewItemControlTemplate" TargetType="FlipViewItem">
    <Grid Width="160" HorizontalAlignment="Left" Name="MainGrid">
        <MyProject:DocumentTabControl Name="MainDocumentTabControl"/>
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:01:57.590

为您的自定义控件公共属性创建[依赖项属性：](http://msdn.microsoft.com/en-us/library/windows/apps/hh700353.aspx)

```
public static readonly DependencyProperty PageProperty =
    DependencyProperty.Register("Page", typeof(Page), typeof (ViewModel), new PropertyMetadata(null));

public Page Page
{
    get { return (Page) GetValue(PageProperty); }
    set { SetValue(PageProperty, value); }
} 
```

现在您可以将值绑定到此属性：

```
<ControlTemplate x:Key="DocumentFlipViewItemControlTemplate" TargetType="FlipViewItem">
    <Grid Width="160" HorizontalAlignment="Left" Name="MainGrid">
        <MyProject:DocumentTabControl Name="MainDocumentTabControl" Page="{Binding ElementName=MyPageName}" />
    </Grid>
</ControlTemplate> 
```

要使上述内容起作用，您需要为页面命名：

```
<Page x:Name="MyPageName" 
```

# c++ - 调用 c++ 静态成员函数的目标 c 包装器

> ID：14104510
> 
> 赞同：0
> 
> 时间：2012-12-31T17:40:53.033
> 
> 标签：c++, objective-c, xcode

我正在尝试在纯 c++ 类 (.cpp) 和纯 Objective-c 对象 (.m) 之间创建一个 Objective-C++ 包装器 (.mm)。可以[在 github](https://github.com/boralben/ObjectiveCPPWrapperEx.git)上找到一个很好的工作示例。我可以毫无问题地构建和运行它。

但是我需要访问 c++ 类中的静态成员函数。我通过删除所有现有函数并引入静态成员函数来修改 github 示例：

```
//  ==================
//  DummyModel.h
//  ==================

class DummyModel
{
    public:
        static int test ();

};

//  ==================
//  DummyModel.cpp
//  ==================

#include "DummyModel.h"

static int test ()
{
    int x = 1;
    return x;
}

//  ==================
//  DummyModelWrapper.h
//  ==================

#import <Foundation/Foundation.h>

@interface DummyModelWrapper : NSObject

- (int) test;

@end

//  ==================
//  DummyModelWrapper.mm
//  ==================

#import "DummyModelWrapper.h"
#import "DummyModel.h"

@implementation DummyModelWrapper

- (int) test
{
    int result;
    result = DummyModel::test();
    return result;
}

@end 
```

这会产生以下错误：

```
Undefined symbols for architecture i386:
  "DummyModel::test()", referenced from:
      -[DummyModelWrapper test] in DummyModelWrapper.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

正是这个在 DummyModelWrapper.mm 中测试的引用调用了错误：

```
 result = DummyModel::test(); 
```

测试项目改编自 github 项目，该项目以未经编辑的形式编译并运行良好（它实例化`DummyModel`并调用实例上的成员函数）。一旦我尝试添加一个静态成员并从包装对象访问它，就会发生错误。

我已经阅读了在 stackoverflow 和其他地方可以找到的所有内容，但只能找到涉及非静态成员函数的示例。

*参考*
[http://www.philjordan.eu/article/mixing-objective-c-c++-and-objective-c++](http://www.philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)
[http://robnapier.net/blog/wrapping-cppfinal-edition-759](http://robnapier.net/blog/wrapping-cppfinal-edition-759)
[http://www.boralapps .com/an-objective-c-project-that-uses-c/294/](http://www.boralapps.com/an-objective-c-project-that-uses-c/294/)

*环境*
xcode 4.5.2/osx8.2（针对 ios5+）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:47:40.947

在 DummyModel.cpp 中，替换

```
static int test ()
{
    ...
} 
```

经过

```
int DummyModel::test ()
{
    ...
} 
```

# php - eBay API 下载用户列表（eBay API 用户指南/分步指南）

> ID：14104511
> 
> 赞同：11
> 
> 时间：2012-12-31T17:41:06.117
> 
> 标签：php, xml, ebay-api

我是 eBay API 的新手，目前正在使用 PHP 进行开发，我已经设法使用 GetItem 将基于项目 ID 的订单详细信息导入我的网站数据库。但我现在要做的是将用户帐户链接到我的网站并将他们的列表导入我的数据库。我已经将我用于 GetItem 的代码（如下）放在了：

**首先：**让我的用户从我的网站重定向到 eBay，以授权我的应用程序访问他/她的列表。

**第二：**将该列表（现在回显就足够了）导入我的网站。

这是我的 GetItem 代码：

```
 require_once('keys.php');
     require_once('eBaySession.php');

    if(isset($_POST['Id']))
    {
        //Get the ItemID inputted
        $id = $_POST['Id'];

        //SiteID must also be set in the Request's XML
        //SiteID = 0  (US) - UK = 3, Canada = 2, Australia = 15, ....
        //SiteID Indicates the eBay site to associate the call with
        $siteID = 101;
        //the call being made:
        $verb = 'GetItem';

        ///Build the request Xml string
        $requestXmlBody = '<?xml version="1.0" encoding="utf-8" ?>';
        $requestXmlBody .= '<GetItemRequest xmlns="urn:ebay:apis:eBLBaseComponents">';
        $requestXmlBody .= "<RequesterCredentials><eBayAuthToken>$userToken</eBayAuthToken></RequesterCredentials>";;
        $requestXmlBody .= "<ItemID>$id</ItemID>";
        $requestXmlBody .= '</GetItemRequest>';

        //Create a new eBay session with all details pulled in from included keys.php
        $session = new eBaySession($userToken, $devID, $appID, $certID, $serverUrl, $compatabilityLevel, $siteID, $verb);

        //send the request and get response
        $responseXml = $session->sendHttpRequest($requestXmlBody);
        if(stristr($responseXml, 'HTTP 404') || $responseXml == '')
            die('<P>Error sending request');

        //Xml string is parsed and creates a DOM Document object
        $responseDoc = new DomDocument();
        $responseDoc->loadXML($responseXml);

        //get any error nodes
        $errors = $responseDoc->getElementsByTagName('Errors');

        //if there are error nodes
        if($errors->length > 0)
        {
            echo '<P><B>eBay returned the following error(s):</B>';
            //display each error
            //Get error code, ShortMesaage and LongMessage
            $code = $errors->item(0)->getElementsByTagName('ErrorCode');
            $shortMsg = $errors->item(0)->getElementsByTagName('ShortMessage');
            $longMsg = $errors->item(0)->getElementsByTagName('LongMessage');
            //Display code and shortmessage
            echo '<P>', $code->item(0)->nodeValue, ' : ', str_replace(">", "&gt;", str_replace("<", "&lt;", $shortMsg->item(0)->nodeValue));
            //if there is a long message (ie ErrorLevel=1), display it
            if(count($longMsg) > 0)
                echo '<BR>', str_replace(">", "&gt;", str_replace("<", "&lt;", $longMsg->item(0)->nodeValue));

        }

        else //no errors
        {
            //get the nodes needed
            $titleNode = $responseDoc->getElementsByTagName('Title');
            $primaryCategoryNode = $responseDoc->getElementsByTagName('PrimaryCategory');
            $categoryNode = $primaryCategoryNode->item(0)->getElementsByTagName('CategoryName');
            $listingDetailsNode = $responseDoc->getElementsByTagName('ListingDetails');
            $startedNode = $listingDetailsNode->item(0)->getElementsByTagName('StartTime');
            $endsNode = $listingDetailsNode->item(0)->getElementsByTagName('EndTime');

            $ShippingPackageDetailsNode = $responseDoc->getElementsByTagName('ShippingPackageDetails');
            if ($ShippingPackageDetailsNode->length > 0) {
                $packageDepthNode = $ShippingPackageDetailsNode->item(0)->getElementsByTagName('PackageDepth');
                $DepthUnit = $packageDepthNode->item(0)->getAttribute('unit');
                $packageLengthNode = $ShippingPackageDetailsNode->item(0)->getElementsByTagName('PackageLength');
                $LengthUnit = $packageLengthNode->item(0)->getAttribute('unit');
                $packageWidthNode = $ShippingPackageDetailsNode->item(0)->getElementsByTagName('PackageWidth');
                $WidthUnit = $packageWidthNode->item(0)->getAttribute('unit');
            }

            $sellingStatusNode = $responseDoc->getElementsByTagName('SellingStatus');
            $currentPriceNode = $sellingStatusNode->item(0)->getElementsByTagName('CurrentPrice');
            $currency = $currentPriceNode->item(0)->getAttribute('currencyID');
            $startPriceNode = $responseDoc->getElementsByTagName('StartPrice');
            $buyItNowPriceNode = $responseDoc->getElementsByTagName('BuyItNowPrice');
            $bidCountNode = $sellingStatusNode->item(0)->getElementsByTagName('BidCount');

            $sellerNode = $responseDoc->getElementsByTagName('Seller');

            //Display the details
            echo '<P><B>', $titleNode->item(0)->nodeValue, " ($id)</B>";
            echo '<BR>Category: ', $categoryNode->item(0)->nodeValue;
            echo '<BR>Started: ', $startedNode->item(0)->nodeValue;
            echo '<BR>Ends: ', $endsNode->item(0)->nodeValue;

            if ($ShippingPackageDetailsNode->length > 0) {
                echo "<BR>Package Length: ", $packageLengthNode->item(0)->nodeValue, ' '.$LengthUnit.'';
                echo "<BR>Package Width: ", $packageWidthNode->item(0)->nodeValue, ' '.$WidthUnit.'';
                echo "<BR>Package Depth: ", $packageDepthNode->item(0)->nodeValue, ' '.$DepthUnit.'';
            }

            echo "<P>Current Price: ", $currentPriceNode->item(0)->nodeValue, $currency;
            echo "<BR>Start Price: ", $startPriceNode->item(0)->nodeValue, $currency;
            echo "<BR>BuyItNow Price: ", $buyItNowPriceNode->item(0)->nodeValue, $currency;
            echo "<BR>Bid Count: ", $bidCountNode->item(0)->nodeValue;

            //Display seller detail if present
            if($sellerNode->length > 0)
            {
                echo '<P><B>Seller</B>';
                $userIDNode = $sellerNode->item(0)->getElementsByTagName('UserID');
                $scoreNode = $sellerNode->item(0)->getElementsByTagName('FeedbackScore');
                $regDateNode = $sellerNode->item(0)->getElementsByTagName('RegistrationDate');

                echo '<BR>UserID: ', $userIDNode->item(0)->nodeValue;
                echo '<BR>Feedback Score: ', $scoreNode->item(0)->nodeValue;
                echo '<BR>Registration Date: ', $regDateNode->item(0)->nodeValue;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T20:34:14.113

**在 eBay 上阅读了很多关于它的 API 的糟糕文档并变得疯狂之后！我自己动手做了一个关于 API 的分步指南，并想出了一个方法来做到这一点。我将尝试尽可能简单地解释。（使用 PHP）**

**我们要做什么：**

1.  创建应用程序
2.  从 eBay 为我们的用户获取会话 ID
3.  使用会话 ID 连接到 eBay
4.  用户授予对我们应用程序的访问权限以链接到他的用户帐户（使用会话 ID）
5.  生成的用户令牌
6.  我们的网站收到用户令牌以供将来使用（访问 eBay 上的用户数据）

**首先** ，您需要两个 PHP 文件：keys.php 和 eBaySession.php，它们位于 eBay 的 PHP SDK 中，该 SDK 位于 eBay 的开发者网站文档中。（**[https://www.x.com/developers/ebay/documentation-tools/sdks](https://www.x.com/developers/ebay/documentation-tools/sdks)**）

**其次** ，您将在一个新的 PHP 文件中包含这两个文件，该文件也将包含用户界面。

**第三** ，您将在 eBay 的开发者网站上创建一个帐户并创建一个新应用程序。

**第四** ，您将使用您的开发者帐户为您的应用程序获取沙盒和生产密钥。然后您将生成一个沙盒用户并获取一个用户令牌。（**通过我的帐户页面**）

在 eBay 的开发者网站上找到自己可能有点困难，但您最终会找到窍门的。

**第五** 你将在keys.php文件中插入你的应用程序的DEV、APP、CERT和UserToken（生产和沙盒模式）

**第六** ，您需要一个 RuName，它也位于我的帐户页面（**管理您的 RuNames**）。

**第七** 您现在将 RuName 作为新参数插入到您的 keys.php 文件中：

```
$RuName = 'your RuName key'; 
```

所以我们的**keys.php**看起来像这样：

```
<?php
    //show all errors - useful whilst developing
    error_reporting(E_ALL);

    // these keys can be obtained by registering at http://developer.ebay.com

    $production         = true;   // toggle to true if going against production
    $compatabilityLevel = 551;    // eBay API version

    if ($production) {
        $devID = 'production dev id';   // these prod keys are different from sandbox keys
        $appID = 'production app id';
        $certID = 'production cert id';
        $RuName = 'production RuName';
        //set the Server to use (Sandbox or Production)
        $serverUrl = 'https://api.ebay.com/ws/api.dll';      // server URL different for prod and sandbox
        //the token representing the eBay user to assign the call with
        $userToken = 'production user token';
    } else {
        // sandbox (test) environment
        $devID = 'sandbox dev id';   // these prod keys are different from sandbox keys
        $appID = 'sandbox app id';
        $certID = 'sandbox cert id';
        //set the Server to use (Sandbox or Production)
        $serverUrl = 'https://api.sandbox.ebay.com/ws/api.dll';
        // the token representing the eBay user to assign the call with
        // this token is a long string - don't insert new lines - different from prod token
        $userToken = 'sandbox user token';
    }

?> 
```

**八** 现在我们将构建我们的第一个页面，为用户提供一些输出，如下所示：

```
<?php require_once('keys.php') ?>
<?php require_once('eBaySession.php') ?>
<?php

        session_start();
        //SiteID must also be set in the Request's XML
        //SiteID = 0  (US) - UK = 3, Canada = 2, Australia = 15, ....
        //SiteID Indicates the eBay site to associate the call with
        $siteID = 0;
        //the call being made:
        $verb = 'GetSessionID';

        ///Build the request Xml string
        $requestXmlBody = '<?xml version="1.0" encoding="utf-8" ?>';
        $requestXmlBody .= '<GetSessionIDRequest xmlns="urn:ebay:apis:eBLBaseComponents">';
        $requestXmlBody .= '<RuName>'.$RuName.'</RuName>';
        $requestXmlBody .= '</GetSessionIDRequest>';

        //Create a new eBay session with all details pulled in from included keys.php
        $session = new eBaySession($userToken, $devID, $appID, $certID, $serverUrl, $compatabilityLevel, $siteID, $verb);

        //send the request and get response
        $responseXml = $session->sendHttpRequest($requestXmlBody);
        if(stristr($responseXml, 'HTTP 404') || $responseXml == '')
            die('<P>Error sending request');

        //Xml string is parsed and creates a DOM Document object
        $responseDoc = new DomDocument();
        $responseDoc->loadXML($responseXml);

        //get any error nodes
        $errors = $responseDoc->getElementsByTagName('Errors');

        //if there are error nodes
        if($errors->length > 0)
        {
            echo '<P><B>eBay returned the following error(s):</B>';
            //display each error
            //Get error code, ShortMesaage and LongMessage
            $code = $errors->item(0)->getElementsByTagName('ErrorCode');
            $shortMsg = $errors->item(0)->getElementsByTagName('ShortMessage');
            $longMsg = $errors->item(0)->getElementsByTagName('LongMessage');
            //Display code and shortmessage
            echo '<P>', $code->item(0)->nodeValue, ' : ', str_replace(">", "&gt;", str_replace("<", "&lt;", $shortMsg->item(0)->nodeValue));
            //if there is a long message (ie ErrorLevel=1), display it
            if(count($longMsg) > 0)
                echo '<BR>', str_replace(">", "&gt;", str_replace("<", "&lt;", $longMsg->item(0)->nodeValue));

        }

        else //no errors
        {
            //get the nodes needed
            $sessionIDNode = $responseDoc->getElementsByTagName('SessionID');
            //Display the details
            $sessionID = $sessionIDNode->item(0)->nodeValue;
            $_SESSION['eBaySession'] = $sessionID;

        }
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>Get eBay User Items</TITLE>
</HEAD>
<BODY>
<FORM action="GetItem.php" method="post">
    <h2>Testing eBay Connection Plugin</h2>
    <h3>Linking User Account to our website</h3>
    <p>Session ID: <?php echo $_SESSION['eBaySession']; ?></p>
    <BR><a href="https://signin.ebay.com/ws/eBayISAPI.dll?SignIn&RuName=<?php echo $RuName; ?>&SessID=<?php echo $sessionID; ?>">Click Here To Link Your Ebay Account To Our Website</a>
</FORM>
</BODY>
</HTML> 
```

这个新的 PHP 页面将使用来自 eBay 的会话 ID，`$verb = 'GetSessionID';`因此当我们单击“链接您的 Ebay 帐户”按钮时，用户将被发送到此 URL：

```
https://signin.ebay.com/ws/eBayISAPI.dll?SignIn&RuName=<?php echo $RuName; ?>&SessID=<?php echo $sessionID; ?> 
```

**其中包含您的 RuName 和会话 ID。**

**第九个** 用户将登录到 eBay，授予对您的应用程序的访问权限并发送回您的网站。现在我们将使用上一部分中的相同会话 ID 来接收用户令牌（因为我们现在可以访问用户的帐户）`$verb = 'FetchToken';`。

```
<?php require_once('keys.php') ?>
<?php require_once('eBaySession.php') ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>Get eBay User Items (Result)</TITLE>
</HEAD>
<BODY>
    <h2>Testing eBay Connection Plugin</h2>
    <h3>Receiving User Tocken</h3>
    <h4>With a User Tocken ID we can import user data to our website.</h4>

    <?php

            session_start();
            //SiteID must also be set in the Request's XML
            //SiteID = 0  (US) - UK = 3, Canada = 2, Australia = 15, ....
            //SiteID Indicates the eBay site to associate the call with
            $siteID = 0;
            //the call being made:
            $verb = 'FetchToken';

            ///Build the request Xml string
            $requestXmlBody = '<?xml version="1.0" encoding="utf-8" ?>';
            $requestXmlBody .= '<FetchTokenRequest xmlns="urn:ebay:apis:eBLBaseComponents">';
            $requestXmlBody .= '<SessionID>'.$_SESSION["eBaySession"].'</SessionID>';
            $requestXmlBody .= '</FetchTokenRequest>';

            //Create a new eBay session with all details pulled in from included keys.php
            $session = new eBaySession($userToken, $devID, $appID, $certID, $serverUrl, $compatabilityLevel, $siteID, $verb);

            //send the request and get response
            $responseXml = $session->sendHttpRequest($requestXmlBody);
            if(stristr($responseXml, 'HTTP 404') || $responseXml == '')
                die('<P>Error sending request');

            //Xml string is parsed and creates a DOM Document object
            $responseDoc = new DomDocument();
            $responseDoc->loadXML($responseXml);

            //get any error nodes
            $errors = $responseDoc->getElementsByTagName('Errors');

            //if there are error nodes
            if($errors->length > 0)
            {
                echo '<P><B>eBay returned the following error(s):</B>';
                //display each error
                //Get error code, ShortMesaage and LongMessage
                $code = $errors->item(0)->getElementsByTagName('ErrorCode');
                $shortMsg = $errors->item(0)->getElementsByTagName('ShortMessage');
                $longMsg = $errors->item(0)->getElementsByTagName('LongMessage');
                //Display code and shortmessage
                echo '<P>', $code->item(0)->nodeValue, ' : ', str_replace(">", "&gt;", str_replace("<", "&lt;", $shortMsg->item(0)->nodeValue));
                //if there is a long message (ie ErrorLevel=1), display it
                echo '<BR/>User Session ID: '.$_COOKIE["eBaySession"].'';
                if(count($longMsg) > 0)
                    echo '<BR>', str_replace(">", "&gt;", str_replace("<", "&lt;", $longMsg->item(0)->nodeValue));

            }

            else //no errors
            {
                //get the nodes needed
                $eBayAuthTokenNode = $responseDoc->getElementsByTagName('eBayAuthToken');

                //Display the details
                echo '<BR/>User Session ID: '.$_SESSION["eBaySession"].'';
                echo '<BR/><BR/>User Token: '.$eBayAuthTokenNode->item(0)->nodeValue.'';

            }
    ?>

    </BODY>
    </HTML> 
```

你去那里你有访问权和一个令牌。**但请确保将其托管在 HTTPS URL 上，因为 eBay 仅通过安全连接 (SSL) 接受这些功能。否则，您将难以运行此代码。**

**我最终会通过收到反馈来改进这个答案。**我知道这可能会让你有点困惑，但我希望我能在时间之前把它变成一个更好的答案。如果您需要，我还在问题中介绍了 eBay API 的 GetItem 函数。

编辑：当然你可以集成 cUrl 和 XML 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T01:57:59.390

您不需要使用 eBay 的 SDK。或者您提供的那些 2 PHP 包含文件。我和你一样发疯了，我制作了自己的 SDK 文件，它实际上只是做了一些 XML 工作和 cURL。我有合同，所以我还不能分享我的文件，但它只有 170 行代码，你可以使用整个 eBay API，如下所示

```
$ebay = new Ebay();
$ebay->call("ReviseItem",array(
    "ItemID"=>"1234"
)); 
```

所以你应该使用来自 ebay 的这个 api 测试工具 [https://developer.ebay.com/DevZone/build-test/test-tool/default.aspx](https://developer.ebay.com/DevZone/build-test/test-tool/default.aspx)

然后你可以传递任何你想要的调用并读取参数。他们很糟糕，但没有比这更容易的了。

再一次，我希望我可以分享我的代码，但我只是让你知道，如果你坚持下去，你可以写一点 cURL 和 XML 转换来“真正地”使用没有 SDK 的 API。

我对亚马逊 MWS apis 和 google docs apis 做了同样的事情。我希望能够尽快分享这一切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T08:07:54.413

@Hossein Jabbari 解决方案有效。所以基本上你需要下载 ebaysession.php 文件并将它包含在你的应用程序中。它将为您处理所有 curl/xml 部分。

将您的所有应用程序详细信息插入到 keys.php 文件中。然后，当您创建重定向 url 名称时，您的身份验证接受的 URL 应该是具有 fetchToken 功能的第二个 php 文件。由于您将第一个 PHP 文件中的会话 ID 存储到会话中，因此检索它应该很容易。

然后，转到第一个 PHP 文件以单击登录 URL。然后，将自己登录到生产或沙盒站点，一旦单击接受，您将被重定向到第二个 PHP 页面，然后您将能够看到您的令牌。

# java - 读取远程txt文件android

> ID：14104516
> 
> 赞同：1
> 
> 时间：2012-12-31T17:41:28.350
> 
> 标签：java, android, url

我有这个代码来读取一个遥远的 txt 文件的最后一行：

```
 try {
        URL url = new URL("http://intram.cluny.ensam.fr/meteo/downld02.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        while(str != null) {
           ligne=str;
           str = in.readLine();
        }
        in.close();
    } catch (MalformedURLException e) {
    } catch (IOException e) {
    } 
```

此代码在我的 LG Optimus L3 (Android 2.3.6) 上运行良好，但在我的 Nexus 7 (Android 4.2.1) 上启动时崩溃。为什么 ？如何解决？

编辑：感谢您的回答

我不知道什么是logcat堆栈跟踪，但我认为是以下，如果我错了告诉我

```
12-31 18:54:07.469: W/ActivityThread(29021): Application fr.ensam.cluny can be debugged on port 8100...
12-31 18:54:07.969: D/AndroidRuntime(29021): Shutting down VM
12-31 18:54:07.969: W/dalvikvm(29021): threadid=1: thread exiting with uncaught exception (group=0x41f6c930)
12-31 18:54:07.969: E/AndroidRuntime(29021): FATAL EXCEPTION: main
12-31 18:54:07.969: E/AndroidRuntime(29021): java.lang.RuntimeException: Unable to start activity ComponentInfo{fr.ensam.cluny/fr.ensam.cluny.MainActivity}: android.os.NetworkOnMainThreadException
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.os.Looper.loop(Looper.java:137)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.lang.reflect.Method.invokeNative(Native Method)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.lang.reflect.Method.invoke(Method.java:511)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at dalvik.system.NativeStart.main(Native Method)
12-31 18:54:07.969: E/AndroidRuntime(29021): Caused by: android.os.NetworkOnMainThreadException
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at java.net.URL.openStream(URL.java:462)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at fr.ensam.cluny.MainActivity.onCreate(MainActivity.java:61)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.Activity.performCreate(Activity.java:5104)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-31 18:54:07.969: E/AndroidRuntime(29021):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-31 18:54:07.969: E/AndroidRuntime(29021):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:46:36.373

由于您没有向我们提供堆栈跟踪，因此我在给出这个答案时有点猜测。

我的猜测是你得到一个[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html). 此异常发生在 Android 3.0 及更高版本上，当您尝试在主 UI 线程上使用网络时。这也解释了为什么您在 Gingerbread (Android 2.3) 上看不到异常。

要解决此问题，请将所有网络代码移动到[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。

# java - 如何在 pom.xml 中为 wsdl2java 指定前端？

> ID：14104523
> 
> 赞同：7
> 
> 时间：2012-12-31T17:42:19.273
> 
> 标签：java, maven, cxf, pom.xml, wsdl2java

我发现[了这个](https://stackoverflow.com/a/5656246/1864054)关于添加`-fe jaxws21`到 wsdl2java 命令以使其生成符合 jaxws 2.1 的代码而不是 2.2 的重要提示，但是 Maven`pom.xml`似乎不喜欢这样放置时的添加：

```
 <goals>
                <goal>wsdl2java -fe jaxws21</goal>
            </goals> 
```

为 pom.xml 中使用的 wsdl2java 指定前端的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T18:30:05.373

如果您使用的是 cxf-codegen-plugin，您可以在 extraargs 元素中添加参数：

```
<executions>
    <execution>
        <configuration>
            <wsdlOptions>
                <wsdlOption>
                    <wsdl>...</wsdl>
                    <extraargs>
                        <extraarg>-fe</extraarg>
                        <extraarg>jaxws21</extraarg>
                    </extraargs>
                </wsdlOption>
            </wsdlOptions>
        </configuration>
        <goals>
            <goal>wsdl2java</goal>
        </goals>
    </execution>
</executions> 
```

来源：[http ://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-20T10:27:12.920

您可以使用`<frontEnd>`inside`<wsdlOption>`或`<defaultOption>`. 后者很有帮助，如果您包含多个 WSDL 并指定`<wsdlRoot>`：

```
<executions>
    <execution>
        <configuration>
            <defaultOptions>
                <frontEnd>jaxws21</frontEnd>
            </defaultOptions>
            <wsdlRoot>${basedir}/src/main/wsdl</wsdlRoot>
            <includes>
                <include>*.wsdl</include>
            </includes>
        </configuration>
        <goals>
            <goal>wsdl2java</goal>
        </goals>
    </execution>
</executions> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-08T18:37:03.173

为了补充@fishbone 和@tafit3 的答案，另请参阅[在类路径中找不到 jaxws21 前端，](https://stackoverflow.com/questions/14141902/could-not-find-jaxws21-frontend-within-classpath)因为它看起来像是`frontend`在次要 cxf 版本中添加的。

我尝试了他们的答案，但只有在将 cxf-codegen-plugin 升级到 2.3.11 后才能正常工作

# bash - 将包含反斜杠的字符串读入bash中的变量

> ID：14104524
> 
> 赞同：4
> 
> 时间：2012-12-31T17:42:21.690
> 
> 标签：bash, sed, awk

好的，所以我有一个用户和密码的 CSV 文件，密码有时包含反斜杠，我需要遍历这个文件并将用户和密码传递给另一个脚本，但我不知道如何让 bash 使用反斜杠作为文字字符。

CSV：

```
jgalley@debian1mig:~/logs/zimbraShares$ cat test.csv 
user3@domain.com,bzfbx6bkuu\Mpull
user2@domain.com,Hppk8mll\kffbsfd
user1@domain.com,w1fgfqbjlhLjnni\ 
```

Sed 没有扩展反斜杠 - 这很好：

```
jgalley@debian1mig:~/logs/zimbraShares$ cat test.csv | sed "s/,/\t/" 
user3@domain.com        bzfbx6bkuu\Mpull
user2@domain.com        Hppk8mll\kffbsfd
user1@domain.com        w1fgfqbjlhLjnni\ 
```

尝试将它们读入变量会导致反斜杠成为元字符，如您所见，它会转义字符并导致最后一行转义返回字符，因为它位于末尾：

```
jgalley@debian1mig:~/logs/zimbraShares$ cat test.csv | sed "s/,/\t/" | while read user pass; do echo "${user},${pass}"; done
user3@domain.com,bzfbx6bkuuMpull
user2@domain.com,Hppk8mllkffbsfd 
```

试图首先逃避反斜杠也不起作用：

```
jgalley@debian1mig:~/logs/zimbraShares$ cat test.csv | sed "s/,/\t/" | sed "s/\\\/\\\\/g" | while read user pass; do echo "${user},${pass}"; done
user3@domain.com,bzfbx6bkuuMpull
user2@domain.com,Hppk8mllkffbsfd
jgalley@hoth1mig:~/logs/zimbraShares$ 
```

最终目标是做这样的事情：

```
head test.csv | sed "s/,/\t/g" | while read auser apass;
do 
  echo -n "${auser},${apass}"
  bash -c  "/home/jgalley/scripts/someScript.php -u '${auser}' -p '${apass}' -d '${auser}'";      
done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:47:38.393

使用以下`-r`选项`read`：

```
while read -r auser apass; 
```

如果`-r`给出，`\`则不会被视为转义字符。

# internet-explorer-8 - 在 IE8 中使用“新”一词的任何解决方法？

> ID：14104538
> 
> 赞同：0
> 
> 时间：2012-12-31T17:43:17.367
> 
> 标签：internet-explorer-8

在您的对象中使用单词“new”时 Ie8 中的错误。我必须使用这个词，因为我正在使用我正在尝试做类似的事情：

```
$(e.items.new).each(function(index) {
    console.log(index)
}); 
```

在 ie8 中，我收到此错误：“预期标识符”。我认为是因为使用了“新”保存词。

有机会解决吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:46:59.050

不只是 IE8:`new`是一个[保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，不应在任何浏览器中用作变量或键名。

如果在定义时使用引号并在检索值时使用括号表示法，则可以使用保留字作为对象键：`e.items[ 'new' ]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:45:19.673

使用`[]`符号，即在您的情况下，`e.items['new']`而不是`e.items.new`

这等效于`e.items.new`JavaScript 引擎从不将属性名称视为字符串以外的任何内容这一事实 - 因此，无论它是否是有效标识符，它都可以是任何内容（`new`在 JavaScript 中是保留关键字，因此不能使用作为标识符）。

# ruby - Ruby：对象深度复制

> ID：14104542
> 
> 赞同：4
> 
> 时间：2012-12-31T17:43:48.457
> 
> 标签：ruby, deep-copy

我正在研究一些在 Ruby 中深度复制对象的技术（MRI 1.9.3）。
我遇到了以下示例，但我不确定`#dup`方法实现。我测试了它并且它确实有效，但我不理解该方法的逻辑步骤，因此我在自己的代码中使用它并不舒适。

该语句`@name = @name.dup`是指副本中的 iVar**吗**？如何？我看不到它。

有人可以解释一下吗？
另外，有没有更好的方法？

```
class MyClass
  attr_accessor :name

  def initialize(arg_str)   # called on MyClass.new("string")
    @name = arg_str         # initialize an instance variable
  end

  def dup
    the_copy = super        # shallow copy calling Object.dup
    @name = @name.dup       # new copy of istance variable
    return the_copy         # return the copied object
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T17:50:25.333

这是“深拷贝”的一个非常薄、非常具体的实现。它展示的是在克隆中创建一个独立的`@name`实例变量，以便使用就地操作修改一个实例的名称不会产生更改克隆的副作用。

通常深拷贝操作对于嵌套数组或散列之类的东西很重要，但它们也适用于具有引用此类事物的属性的任何对象。

在您的情况下，要使用更健壮的`dup`方法制作对象，您应该调用`dup`每个有问题的属性，但我认为这个示例有点坏。它的作用是用`@name`副本替换原件中的内容，这可能会破坏您拥有的任何参考资料。

更好的版本是：

```
def dup
  copy = super
  copy.make_independent!
  copy
end

def make_independent!
  instance_variables.each do |var|
    value = instance_variable_get(var)

    if (value.respond_to?(:dup))
      instance_variable_set(var, value.dup)
    end
  end
end 
```

这应该具有复制任何支持该`dup`方法的实例变量的效果。这会跳过数字、布尔值等`nil`不能复制的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:52:36.893

当您这样做`super`时，实例方法`@name`将在原始和副本之间共享。通过这样做`@name = @name.dup`，原始获得了一个字符串的新实例 as `@name`，最终`@name`与重复实例具有的不同。

# azure - 如何创建在计时器上运行以查询外部 Web 服务的服务？

> ID：14104543
> 
> 赞同：0
> 
> 时间：2012-12-31T17:44:01.567
> 
> 标签：azure, timer, azure-worker-roles

我对处理这个问题的可能性和最佳方法有点不知所措。我需要在 Windows Azure 上托管一个运行计时器的 Web 服务，经过时间后将查询外部 Web 服务并处理检索到的数据并将其导入我的 SQL Azure 数据库。我目前在 Windows Azure 上托管 WCF Web 服务和网站以及 SQL Azure 数据库。我尝试了一个工作者角色，但它只运行一次并在 Run 方法完成后退出，即使您添加了一个计时器并以一个间隔启动计时器。最好的解决方案表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:42:15.930

诀窍是让工人角色**永远不会**脱离“运行”方法。就像是：

```
 public override void Run()
    {
        while (true)
        {
            Thread.Sleep(10000);
        }
    } 
```

现在谈到您的问题，您可以简单地在您的工作角色中实现一个 Timer 对象，当计时器经过时，您可以调用该外部 Web 服务。您可以使用以下代码实现自己的计时器：

```
 public override void Run()
    {
        System.Timers.Timer timer = new System.Timers.Timer(1000);
        timer.Elapsed += timer_Elapsed;
        while (true)
        {
            Thread.Sleep(10000);
        }
    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        //Execute the code to call the web service
    } 
```

然而，对于实现定时器，我最喜欢的是 Quartz 库（[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)）。我发现它相当容易使用且非常灵活，而且它是开源的。

希望这可以帮助。

# ios - 按下横幅时 iAd 不起作用？

> ID：14104546
> 
> 赞同：0
> 
> 时间：2012-12-31T17:44:16.747
> 
> 标签：ios, xcode, iad

我看过其他问题，但它们似乎没有帮助......

我的标签栏应用程序中的一个视图控制器的底部有一个 iAd 横幅。我想在没有广告时隐藏它，但在有广告时显示它。

这是我在 View Controller 中打开或关闭它的代码，基于 Apple 的示例：

```
- (void)configureAdAnimated:(BOOL)animated
{
    CGRect viewFrame   = self.mainView.frame;
    CGRect bannerFrame = adBannerView.frame;

    self.adBannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;

    if (adBannerView.bannerLoaded) {
        viewFrame.size.height -= adBannerView.frame.size.height;
        bannerFrame.origin.y = viewFrame.size.height;
        self.adIsVisible = YES;
    }
    else {
        bannerFrame.origin.y = viewFrame.size.height + bannerFrame.origin.y;
        self.adIsVisible = NO;
    }

    [UIView animateWithDuration:animated ? 0.25 : 0.0 animations:^{
        self.mainView.frame = viewFrame;
        [self.mainView layoutIfNeeded];
        adBannerView.frame = bannerFrame;
    }];

} 
```

它时不时地抛出随机错误（有些未知，有些像“广告库存不可用”等），它会在必须时熄灭，但当它出现时我无法点击它并且有一个黑色它上面的空间，像这样：

![iAd 无法打开，并且横幅上方有一个黑色空间...](../Images/8d16cbe8bfa39409a7e5743e09a33d5a.png)

我已经设置了当前内容大小标识符、委托（= self）等。

我应该怎么做才能让它工作？如果您需要更多代码、更多信息等，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:01:41.233

尝试通过在单一视图应用程序而不是选项卡式布局中实现 iAd 来简化调试。

请注意，黑色空间的大小似乎与 iAd 相同。这应该为您提供有关正在发生的事情的线索。

# jquery - 从谷歌地图中删除 HeatmapLayer

> ID：14104547
> 
> 赞同：9
> 
> 时间：2012-12-31T17:44:19.050
> 
> 标签：jquery, google-maps, google-maps-api-3, heatmap

我正在使用 HeatmapLayer api [https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)

我生成这样的热图：

```
heatmap = new google.maps.visualization.HeatmapLayer({
    data: heatmapData,
    radius: 50
});
heatmap.setMap(google_map); 
```

当我想使用与上述相同的功能显示另一个热图时（我正在使用 ajax 并且我有新的标记要显示，所以我也需要更改热图）热图图层保留在地图上，在这种情况下我我的地图上有 2 个重叠的热图。如何先删除当前的热图播放器？

这是我的演示代码，如果您单击地图下方的链接，则会添加热图，您再次单击它，它应该将其删除，但它只是一遍又一遍地重复：

[http://jsfiddle.net/LpL3P/](http://jsfiddle.net/LpL3P/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T17:47:24.897

文档建议您可以通过调用删除图层`heatmap.setMap(null)`

**更新**

在[您的 jsfiddle](http://jsfiddle.net/LpL3P/)中，您在每个事件`heatmap`的范围内声明了您的变量。`click`为了使您的代码正常工作，我将`heatmap`变量移动到全局存在，然后检查以确保新变量`heatmap`没有覆盖现有变量。

[这是您更新的 jsfiddle](http://jsfiddle.net/LpL3P/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-29T11:30:59.963

对于在原始帖子数年后寻找解决方案的其他人，我发现以下方法有效。首先将变量声明为将保存热图 MVCObject 的全局变量。

```
var mvcObj; 
```

然后，在您用来添加热图的函数中

```
if( typeof( mvcObj )=='object' ) mvcObj.clear();
/* locations is an array of latlngs */
mvcObj = new google.maps.MVCArray( locations );

/* this.map is a reference to the map object */
var heatmap = new google.maps.visualization.HeatmapLayer({
    data: mvcObj,
    map: this.map
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-26T13:20:47.820

您需要`heatmap`全局声明，然后当您想在热图上显示新数据时，请执行以下操作：

```
let heatmap;

setData(heatmapData) {
    if (heatmap) {
      // Clear heatmap data
      heatmap.setMap(null);
      heatmap.setData([]);
    }
    heatmap = new google.maps.visualization.HeatmapLayer({
      data: heatmapData
    });

    heatmap.setMap(this.map);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-21T00:00:26.077

使用`heatmap.setMap(null)`只会隐藏您的热图图层。如果您稍后键入`heatmap.setMap(map)`，您将再次看到您的热图图层，因此它并没有真正被删除。

为了删除数据，您必须执行以下步骤。

`heatmap.setMap(null)`//这将隐藏热图层

`heatmap.getData().j = [];`//这实际上是将坐标数组设置为零。

`heatmap.setMap(map)` //现在，当您切换回地图时，heatlayer 消失了，您可以创建一个新的。

希望这可以帮助。我花了一段时间才弄清楚，但它确实有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T17:59:07.300

看看这里的文档[google JSHeatMaps](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)。

看看这个[例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-heatmap)。您可以查看切换按钮的逻辑。

```
heatmap.setMap(null) 
```

# javascript - Javascript addEventListener：让变量持续存在

> ID：14104549
> 
> 赞同：2
> 
> 时间：2012-12-31T17:44:32.390
> 
> 标签：javascript, html, dom-events, addeventlistener

我目前正在学习 Javascript，现在我在搞乱事件监听器。

但是我有一个问题，当我在一个循环中创建事件监听器时，我无法弄清楚如何将一个持续存在的变量传递给它。我制作了一个脚本，当我单击它时将元素移动到指定位置。但是现在它把所有元素放在同一个位置，所以出于某种原因，它们都得到了相同的数字。

不管我是否这样传递：

```
var index = i;    

applications[i].addEventListener('click', function(){ 

var posLeft2 = 10*index+"%";

 var iconstyleO =  " text-align: center; "+
" font: bold 22px Tahoma; "+
" position:fixed; "+
" top: 67%; "+
" left: "+posLeft2+"; "+
" display:block; "+
" margin: 150px auto; "+
" color: #ffffff; "+
" z-index: 3; "+
" -webkit-border-radius: 10px; "+
" background: rgb(140,140,140); "+
" width: 10%; "+
" height: 10%; ";

this.setAttribute('style',iconstyleO); 
     }  ,false); 
```

或像这样：

```
var index = i;    

applications[i].addEventListener('click', function(index){ 

var posLeft2 = 10*index+"%";

 var iconstyleO =  " text-align: center; "+
" font: bold 22px Tahoma; "+
" position:fixed; "+
" top: 67%; "+
" left: "+posLeft2+"; "+
" display:block; "+
" margin: 150px auto; "+
" color: #ffffff; "+
" z-index: 3; "+
" -webkit-border-radius: 10px; "+
" background: rgb(140,140,140); "+
" width: 10%; "+
" height: 10%; ";

this.setAttribute('style',iconstyleO); 
     }  ,false); 
```

他们仍在将事件侦听器设置为相同的位置。在最后一个元素的位置，或者在第一个元素的位置，这取决于我如何尝试传递它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:48:38.577

Javascript 没有块作用域。
因此，您所有的回调都共享同一个变量。

要解决此问题，您需要将代码包装在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中，以便每个回调都有自己的闭包：

```
(function(index) {
    applications[i].addEventListener('click', function(){ 
        ...
    });
})(i); 
```

# python - 从 MediaWiki XML 中提取页面标题和贡献者

> ID：14104552
> 
> 赞同：3
> 
> 时间：2012-12-31T17:44:59.120
> 
> 标签：python, xml-parsing, python-2.7, mediawiki, elementtree

我有一个非常大 (7GB) 的 MediaWiki XML 转储，其中包含对 Wiki 的每个页面所做的每次更改的记录。我正在尝试记录哪些用户对每个页面做出了贡献，因此我想从 XML 中提取它。

XML 看起来像：

```
<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.3/">
 <page>
  <title>Unique Page title</title>
  <id>11</id>
  <restrictions>sysop</restrictions>
  <revision>
    <id>11</id>
    <timestamp>2005-10-26T02:23:03Z</timestamp>
    <contributor>
      <ip>MediaWiki default</ip>
    </contributor>
    <text xml:space="preserve">i</text>
  </revision>
 </page>
 <page> ... </page>
 <page> ... </page>
 ...
</mediawiki> 
```

对于这种大小的文件，我相信我需要使用 iterparse。现在，我只是想打印出标题，但是当我运行以下代码时，它会打印“无”。

```
NS = '{http://www.mediawiki.org/xml/export-0.3/}'
from xml.etree.ElementTree import iterparse
with open('XMLFile.xml') as f:
    for event, elem in iterparse(f):
        if elem.tag == NS + 'page':
            for node in elem:
                if node.tag == NS + 'title':
                    print node.text()
        elem.clear() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:30:40.227

尝试在迭代解析期间直接拉出“标题”元素，而不是进行二次循环：

```
NS = '{http://www.mediawiki.org/xml/export-0.3/}'
from xml.etree.ElementTree import iterparse
with open('XMLFile.xml') as f:
    for event, elem in iterparse(f):
            if elem.tag == NS + 'title':
                print elem.text
            elem.clear() 
```

似乎对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:48:18.490

您`None`在打印`title`元素的文本内容时会得到，因为您使用[`elem.clear()`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.clear)“太早”。默认情况下，[`iterparse()`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)只生成“结束”事件。当`page`发出“结束”事件时，它的所有子元素，包括`title`，都已被清除（清空）。

如果`elem.clear()`在问题的代码中仅向右移动一个缩进级别（四个空格），它将按预期工作。使您的代码工作的另一种方法是更改`iterparse(f)`​​为`iterparse(f, events=["start"])`.

并且`node.text()`应该是`node.text`。

有关. [_](http://effbot.org/zone/element-iterparse.htm) _`iterparse()`

* * *

假设 XML 转储 (mw.xml) 如下所示：

```
<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.3/">
  <page>
    <title>Unique Page title 1</title>
    <id>11</id>
    <restrictions>sysop</restrictions>
    <revision>
      <id>11</id>
      <timestamp>2005-10-26T02:23:03Z</timestamp>
      <contributor>
       <username>Alice</username>
      </contributor>
      <text xml:space="preserve">i</text>
    </revision>
  </page>

  <page>
    <title>Unique Page title 2</title>
    <id>11</id>
    <restrictions>sysop</restrictions>
    <revision>
      <id>11</id>
      <timestamp>2005-10-26T02:23:03Z</timestamp>
      <contributor>
       <username>Bob</username>
      </contributor>
      <text xml:space="preserve">j</text>
    </revision>
  </page>
</mediawiki> 
```

以下是关于如何获得标题和贡献者的建议：

```
from xml.etree.ElementTree import iterparse

NS = '{http://www.mediawiki.org/xml/export-0.3/}'

with open('mw.xml') as f:
    for event, elem in iterparse(f):
        if elem.tag == '{0}page'.format(NS):
            title = elem.find("{0}title".format(NS))
            contr = elem.find(".//{0}username".format(NS))

            if title is not None:
                print title.text
            if contr is not None:
                print contr.text

            elem.clear() 
```

输出：

```
Unique Page title 1 
Alice
Unique Page title 2 
Bob 
```

我假设您想要贡献者的用户名。根据最新的[XML Schema](http://www.mediawiki.org/xml/export-0.8.xsd)，`contributor`可以包含`username`、`ip`和/或`id`子元素（对于 0.3 版本的模式也是如此）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:06:01.030

我没有使用 Python 和 iterparse 的经验，但通常，使用迭代 XML 解析器执行此操作的方式如下：

*   在解析循环之外，设置变量来存储当前页面标题和贡献者列表。
*   在循环内部，每当`page`打开标签时，都会重置变量。
*   当您遇到`title`标签时，将页面标题变量设置为其内容。
*   当您遇到`contributor`标签时，将其内容添加到贡献者列表中。
*   当`page`标签关闭时，输出收集到的标题和贡献者列表。

# ios - 带有 ARC 的 iOS 应用程序，查找对象的所有者

> ID：14104556
> 
> 赞同：14
> 
> 时间：2012-12-31T17:45:26.580
> 
> 标签：ios, memory, automatic-ref-counting, memory-leaks

我正在编写一个使用 ARC 的应用程序，目前似乎有一些内存泄漏。谷歌搜索我发现了一些关于如何使用 Inspector 的提示。在那里我可以看到一些类的实例的大量分配，我还可以看到一些关于如何分配对象以及如何更改保留计数的调用堆栈。

但似乎我看不到完整的调用堆栈，所以我不知道最终谁拥有该对象。在我看来，这个所有者以某种方式没有释放对象（或拥有可疑对象的对象）。

任何人都可以给我一个关于找到分配对象的所有者的提示吗？

另请注意，对象未标记为“泄漏”，而是已分配。对我来说，随着不断分配新对象，对象似乎被泄露了。

任何有关如何最好地进行并找到可疑泄漏的进一步帮助表示赞赏。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-31T18:40:26.490

1.  就谁“拥有”一个对象的学术问题而言，这只是维护`strong`对该对象的引用的人。

2.  在您的应用程序中查找泄漏方面，您可以在分析应用程序时使用 Instruments 中的“泄漏”工具（在 Xcode 的“产品”菜单上选择“配置文件”）。

3.  但是，如果它没有出现在“泄漏”中，那么您似乎必须确定它是否是一个强引用循环（以前称为保留循环），一些简单的逻辑错误（例如视图控制器中的一些循环引用，缓存大型对象等）或一些与核心基础相关的问题（ARC 不承担所有权，除非您小心使用`CFBridgingRelease()`or `__bridge_transfer`）。

4.  在使用 Instruments 查找分配源方面，对我帮助最大的两个技巧是：

    *   用鼠标单击拖动（在 Xcode 6 之前的版本中，您必须在`option`执行此操作时按住键）以突出显示时间线的一部分，以识别您要检查的内容。您可能希望专注于分配中的一个高峰。例如，我在我的分配中发现了一个凸起并突出显示它（这是一个非常简单的示例，我在其中创建了一个巨大的数组`viewDidLoad`，但希望它能给你这个想法）：

    ![在此处输入图像描述](../Images/de914b567efad98a31ff8491b93ec7a3.png)

    *   当您通过调用树进行检查时，选择“隐藏系统库”通常很有用，以专注于您的代码。如果您双击 Instruments 中的方法名称（在我的示例中，此处为`viewDidLoad`），Instruments 将显示您正在执行分配的代码：

    ![在此处输入图像描述](../Images/ab473fbb0871ad563b22804c2786612a.png)

    然后，您可以双击相关的方法列表，它将带您精确到执行分配的代码。

    ![在此处输入图像描述](../Images/301da2c0a0f79d029378cbfa7f9aed24.png)

虽然这并不能表明您发生了泄漏（即强引用循环的位置或您未能释放它的位置），但这种分析通常可以帮助您追踪泄漏对象的实例化位置，这是第一个跟踪问题的步骤。

* * *

如果你真的必须弄清楚谁“拥有”一个对象（即对象的强引用（或保留）发生在哪里），Xcode 8 有一个新的对象图功能。因此，调试应用程序，然后点击调试栏中的“调试内存图”图标（下方红色圆圈）。完成此操作后，您可以在左侧选择一个对象，然后您可以看到显示该对象所有权声明的对象图：

[![在此处输入图像描述](../Images/255f60f996ed001ec6657e1739fd16fa.png)](https://i.stack.imgur.com/aY6B6.png)

上面说明了选择的图像具有强引用`UIImageView`，它被呈现在其中，而且 ViewController 也保持强引用。

在早期的 Xcode 版本中，配置应用程序以通过 Instruments 运行它并选择“记录引用计数”选项。在 Xcode 6 中，它位于最右侧面板的“记录设置”选项卡上：

![在此处输入图像描述](../Images/4ba2c7f8f555bb5b34bd50c0d968b8d8.png)

在 Xcode 5 及更早版本中，您必须单击![一世](../Images/1df3469d98e10eaf577203c08ed5d8bd.png)“分配”工具旁边的信息按钮才能看到此“记录引用计数”选项：

![在此处输入图像描述](../Images/89cd245a751c15038ee97a2451bf9220.png)

无论如何，您可以转到分配摘要，深入了解一些未释放的对象，（通过![箭](../Images/c2c432272151b09d74a4415cebf580f2.png)在分配工具中查看和对象时单击对象地址旁边的右箭头），然后您将看到相关对象的保留和释放列表，如上所示。但只有在分析应用程序*之前*选择“记录引用计数”时才会捕获此信息。

习惯这种方式跟踪保留计数需要一段时间，但如果您绝对需要知道强引用是在哪里建立的，“记录引用计数”选项可以帮助您。

# sql - SolidDB SQL 存储过程 IF EXISTS 语法错误并在 sql 语句中使用变量

> ID：14104557
> 
> 赞同：2
> 
> 时间：2012-12-31T17:45:28.977
> 
> 标签：sql, stored-procedures

编辑：我认为可能无法将 EXISTS 与 IF THEN 一起使用，但我遇到了另一个问题，如何在 sql 语句中使用变量？

```
EXEC SQL EXECDIRECT CREATE CATALOG CATALOG_NAME; 
```

创建名称为“CATALOG_NAME”的目录，而不是存储在变量中的目录。我知道在 MSSQL 中你可以这样做：

```
EXEC('CREATE DATABASE ' + '$(DBNAME)') 
```

SolidDB sql 中的等价物是什么？

* * *

我正在尝试创建一个soliddb sql存储过程，它接受输入并根据这些输入执行特定的sql语句。我的代码如下：

```
"CREATE PROCEDURE ACTION
    (OPTION VARCHAR, CATALOG_NAME VARCHAR)
    BEGIN
        IF OPTION= 'create' THEN
            IF EXISTS (SELECT * FROM sys_catalogs WHERE name=CATALOG_NAME) THEN
                 EXEC SQL EXECDIRECT DROP CATALOG CATALOG_NAME;
            END IF
            EXEC SQL EXECDIRECT CREATE CATALOG CATALOG_NAME;

        ELSEIF OPTION= 'drop' THEN
            IF EXISTS (SELECT * FROM sys_catalogs WHERE name=CATALOG_NAME) THEN
                 EXEC SQL EXECDIRECT DROP CATALOG CATALOG_NAME;
            END IF
        END IF
    END"; 
```

当我尝试使用执行脚本文件时

```
solsql -f "C:\solidb.sql" "dba" "dba" 
```

我收到错误：

```
SOLID Procedure Error 23004: Syntax error: syntax error, line 6 
```

我用注释掉的 If EXISTS 行测​​试了代码，其他一切似乎都工作正常，所以我确定它的 IF EXISTS 行不正确。

所以我的问题是有可能做一些我想做的事情吗？如果是这样，你能告诉我正确的语法吗？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T22:52:05.390

我认为存在只能测试表是否存在。您可能想要使用 IFNULL 您可以在 IFNULL 之前将用户变量设置为 null，然后让选择将其设置为 1。

# ios - 使用 XCode 为不同环境构建 PhoneGap 项目 - 最佳实践

> ID：14104560
> 
> 赞同：3
> 
> 时间：2012-12-31T17:45:42.590
> 
> 标签：ios, xcode, cordova

我是 PhoneGap 和 Xcode/Mac 世界的新手，我使用 PhoneGap 和 Xcode 开发 iOS 应用程序，并在本地 Mac 机器上完成构建。我们需要针对不同的环境进行多次构建，例如开发、质量保证、集成、登台和生产。完成开发构建并创建 ipa 文件以使其作为 QA 构建运行后，只需更改一次配置即可设置环境。但与其他应用程序不同的是，一旦为 ipa 文件生成构建，我们就无法更改配置值。

在这种情况下，为每个环境创建多个构建包的最佳方法是什么？所有 Dev、QA、Intg 和 prod 应用程序也应该在同一台 iPad 上运行。我们可以在 .plist 文件中设置配置文件并使用 javascript 使用 phonegap API 读取它吗？是否有任何可用的构建脚本可以为不同的环境提供 4 个包？

任何帮助将不胜感激！

谢谢。

# jquery - 使用 jQuery 设置“src”属性的问题

> ID：14104563
> 
> 赞同：1
> 
> 时间：2012-12-31T17:46:01.357
> 
> 标签：jquery, jquery-selectors

这是我的代码。我想它应该从 THUMB 图像的“src”中获取第一个字母或数字，并将其设置为大版本的来源（编号从 1 到 5）。在此之后它应该显示大图像。

```
$('img.thumb').mouseover(function (){
    $(this).effect('bounce', 500, function(){
        var src = 'images/screens/' + $(this).attr('src').substr(0,1) + '.jpg';
        $('.slideShow img').attr('src' ,src);
        $('.slideShow img').toggle('bounce').css('margin-top','2.5%');
        });
    }); 
```

问题是当我加载页面（我使用谷歌浏览器）时，它为所有图像设置图像源如下 - images/screens/i.jpg，因此不显示大图像。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:58:20.237

由于您只要求第一个数字或字母，因此应该这样做：

```
$('img.thumb').mouseover(function (){
    $(this).effect('bounce', 500, function(){
        var src = 'images/screens/' + $(this).attr('src').match(/(\/|^)([a-z0-9])[^\/]*$/i)[2] + '.jpg';
        $('.slideShow img').attr('src' ,src);
        $('.slideShow img').toggle('bounce').css('margin-top','2.5%');
    });
}); 
```

我所做的是使用正则表达式在最后一个斜杠或字符串开头（如果没有斜杠）之后查找第一个数字或字母。这样，您的缩略图源可能是“/images/screens/1-thumb.jpg”或“1-thumb.jpg”，在这两种情况下，您仍然会从正则表达式中返回“1”。

有很多更好的方法可以做到这一点，因为现在您仅限于单字符文件名。您应该考虑为拇指使用前/后缀，只需删除前/后缀。在这种情况下，您可以使用以下更简单、更简洁的代码行：

```
var src = $(this).attr('src').split('-thumb').join(''); 
```

只要您没有任何文件夹或文件名，`-thumb`它就会支持任何附加的文件名`-thumb`，例如`/images/screens/my-image-thumb.jpg`变成`/images/screens/my-image.jpg`

# django - Django 自动生成带有新页面的链接

> ID：14104567
> 
> 赞同：0
> 
> 时间：2012-12-31T17:46:07.193
> 
> 标签：django, django-models, django-admin

另一个继承的 Django 项目问题。我想这样做，以便每次创建页面（当前示例为[https://bar.blah.net/detail/588/](https://bar.blah.net/detail/588/)）时，我都可以将格式设置为[https://bar.blah.net /detail/majorVersion.minorVersion.number](https://bar.blah.net/detail/majorVersion.minorVersion.number) 所以[https://bar.blah.net/detail/21.2.9](https://bar.blah.net/detail/21.2.9)是结果。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:19:03.337

Django 中的 URL 模式可以是任何你想要的；没有约定。一个简单的方法是向您的模型添加一个永久链接，该链接将计算您正在寻找的格式。

您还需要添加一个相应的 URL 模式来将该模式解析为您的视图方法或类，并且它的构造方式在很大程度上取决于您需要对参数做什么（如果您传入的话）。

有关永久链接的示例，请参见：[https ://docs.djangoproject.com/en/1.4/ref/models/instances/#the-permalink-decorator](https://docs.djangoproject.com/en/1.4/ref/models/instances/#the-permalink-decorator)

# algorithm - 施特拉森矩阵乘法

> ID：14104569
> 
> 赞同：0
> 
> 时间：2012-12-31T17:46:20.143
> 
> 标签：algorithm, subroutine, strassen

嗯，是《算法导论》中的一道题，编号为`4.2-6`。它是这样描述的：

`a kn*n matrix by an n*kn matrix`使用`Strassen's algorithm`as时，您能以多快的速度繁殖`subroutine`？

我正在考虑将两个矩阵都扩展到`kn*kn matrix`，然后我可以将 Strassen 的算法应用于这个问题。但我会得到一个`Math.pow(kn, lg7) running time`.

有没有人有更好的解决方案。祝大家新年快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:20:45.003

想想而不是将 ak*1 向量乘以 1*k 向量。这需要 k^2 次乘法，最后得到 ak*k 矩阵。这里唯一不同的是你的向量的元素是 n*n 矩阵，所以如果你使用 Strassen 算法乘以 n*n，你最终会做 O(k^2 n​​^(log 7)) 标量乘法矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T19:32:37.353

Strasens 算法的另一个基于向量的实现在这里，它显示了 naive 和 strssens 运行时间的比较：

```
enter code here:
#include <cstdio>
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <cassert>
#include <vector>
#include <ctime>
using namespace std;
void fun(vector<vector<int> >& u , vector<vector<int> >&m , int P , int n)
{

    for(int i = 0 ; i < n ; i++)
    {
        vector<int>t ;
        for(int j = 0 ; j < n ; j++)
        {
                      switch(P)
          {
                        case 1:
                        {
               t.push_back(u[i][j]);
                           break;
            }
                        case 2:
                        {
                t.push_back(u[i][j+n]);
                            break;
                }
                        case 3:
                        {
                t.push_back(u[i+n][j]);
                            break;
            }
                        case 4:
                        {
            t.push_back(u[i+n][j+n]);
                            break;
            }
                     }
                  }

                  m[i] = t;
    }
}
void normalmul(int n , vector< vector<int> >& u   , vector< vector<int> >& v  ,     vector< vector<int> >& z )

{
for(int i = 0 ; i < n ; i++)
{
    for(int j = 0 ; j < n ; j++)
    {
        z[i][j] = 0;
        for(int k = 0 ; k < n ; k++)
        {
            z[i][j] += (u[i][k] * v[k][j]);
        }
    }
}
}

void strassen(int n , vector< vector<int> >& u   , vector< vector<int> >& v  , vector< vector<int> >& z)

{
if(n == 32)
{
    normalmul(n,u,v,z);
    return;
}
else
{
    int Shiftt = n>>1;
    vector<vector<int> >AA(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >BB(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >CC(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >DD(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >EE(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >FF(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >GG(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >HH(Shiftt , vector<int>(Shiftt));

    vector<vector<int> >A1(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >A2(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >A3(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >A4(Shiftt , vector<int>(Shiftt));
    fun(u,AA,1,n>>1);
    fun(u,BB,2,n>>1);
    fun(u,CC,3,n>>1);
    fun(u,DD,4,n>>1);
    fun(v,EE,1,n>>1);
    fun(v,FF,2,n>>1);
    fun(v,GG,3,n>>1);
    fun(v,HH,4,n>>1);
    vector<vector<int> >M1(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M2(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M3(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M4(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M5(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M6(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >M7(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >T1(Shiftt , vector<int>(Shiftt));
    vector<vector<int> >T2(Shiftt , vector<int>(Shiftt));
    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = AA[i][j] + DD[i][j];
            T2[i][j] = EE[i][j] + HH[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M1);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = CC[i][j] - AA[i][j];
            T2[i][j] = EE[i][j] + FF[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M6);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = BB[i][j] - DD[i][j];
            T2[i][j] = GG[i][j] + HH[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M7);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = CC[i][j] + DD[i][j];
            T2[i][j] = EE[i][j] ;
        }
    }
    strassen(Shiftt,T1,T2,M2);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = AA[i][j] ;
            T2[i][j] = FF[i][j] - HH[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M3);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = DD[i][j];
            T2[i][j] = GG[i][j] - EE[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M4);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            T1[i][j] = AA[i][j] + BB[i][j];
            T2[i][j] = HH[i][j];
        }
    }
    strassen(Shiftt,T1,T2,M5);

    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            A1[i][j] = M1[i][j] + M4[i][j] - M5[i][j] + M7[i][j] ;
            A2[i][j] = M3[i][j] + M5[i][j] ;
            A3[i][j] = M2[i][j] + M4[i][j] ;
            A4[i][j] = M1[i][j] - M2[i][j] + M3[i][j] + M6[i][j] ;
        }
    }
    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            z[i][j] = A1[i][j];
        }
    }
    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            z[i][j+Shiftt] = A2[i][j];
        }
    }
    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            z[i+Shiftt][j] = A3[i][j];
        }
    }
    for(int i = 0 ; i < Shiftt ; i++)
    {
        for(int j = 0 ; j < Shiftt ; j++)
        {
            z[i+Shiftt][j+Shiftt] = A4[i][j];
        }
    }
}
}

int main()
{
int t,n;
freopen("input_file.txt","r",stdin);
cin >> t;
while(t--)
{
    int vl ;
    scanf("%d",&n);
    cout <<  "value of n " << n  << endl ;;
    vector< vector<int> >u(n,vector<int>(n));
    vector< vector<int> >v(n,vector<int>(n));
    vector< vector<int> >z(n,vector<int>(n));
    vector< vector<int> >zz(n,vector<int>(n));
    vector<int> temp;
    for(int i = 0 ; i < n ; i++)
    {
            vector<int> temp;
        for(int j = 0 ; j < n ; j++)
        {
            scanf("%d",&vl);
            temp.push_back(vl);
        }
        u[i] = temp;
    }
    for(int i = 0 ; i < n ; i++)
    {
        vector<int> temp;
        for(int j = 0 ; j < n ; j++)
        {
            scanf("%d",&vl);
            temp.push_back(vl);
        }
        v[i] = temp;
    }
    clock_t start , end ;

    //USING NAIVE APPROACH

    start = clock();
            cout<<"Traditional Algorithm Running Time : ";
    normalmul(n,u,v,z);

    end = clock() ;

    cout<<(double)(end-start)/CLOCKS_PER_SEC<<" seconds"<<endl ;

    /*cout << "ANSWER OF MULTIPLICATION BY NAIVE APPROACH" << endl ;
    for(int i = 0 ; i < n ; i++)
    {
        for(int j = 0 ; j  < n ; j++)
        {
            cout << z[i][j] << " ";
        }
        cout << endl ;
    }*/

    //USING STRASSENS ALGORITHM 

    start = clock() ;

    strassen(n,u,v,zz);

    end = clock();
            cout<<"Strassen Algorithm Running Time : ";
    cout<<(double)(end-start)/CLOCKS_PER_SEC<<" seconds"<<endl ;

    /*cout << "ANSWER BY STRASSENS ALGORITHM " << endl ;
    for(int i = 0 ; i < n ; i++)
    {
        for(int j = 0 ; j  < n ; j++)
        {
            cout << zz[i][j] << " ";
        }
        cout << endl ;
    }*/
}
return 0;
    */  IPG_2011006   Abhishek Yadav */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:58:51.997

您可以在 C++ 中看到[Strassen](http://www.keithschwarz.com/interesting/code/strassen/Strassen.hh.html)上的实现，该算法在 Wikipedia 中也有很好的描述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T10:20:05.460

Theta((k^2*n)^(log(7))) 给出 kn*kn 矩阵。如需参考，请查看[此处](https://www.cs.helsinki.fi/webfm_send/1444)或[查看此 pdf](https://mitpress.mit.edu/sites/default/files/Chapter%2028.pdf)

# postgresql - 如何在多个进程之间共享一组数据？

> ID：14104572
> 
> 赞同：9
> 
> 时间：2012-12-31T17:46:35.863
> 
> 标签：postgresql, asynchronous, redis, queue, distributed-computing

我们需要建立一个系统，其中多个进程在同一个数据集上工作。这个想法是有一组可以被我们的工作进程（异步）拉取的元素（即没有重复的值）。进程可能分布在多台服务器上，因此我们需要一个分布式解决方案。

目前，我们正在考虑的模式是使用 Redis 来保存一个集合，该集合保存工作数据。每个进程都应该连接到集合，并从中弹出一个值。的随机功能`spop`实际上对我们来说是一个加分项，因为我们需要随机访问集合中的元素。数据必须从我们的主 PostgreSQL 数据库中填充。

就像我说的，我们还有一个 PostgreSQL 数据库可供查询，进程可以在请求元素时访问它。但是，我们不知道在重负载下是否会成为瓶颈。我们确实期望在这个子系统上进行大量 - 到非常大量的并发访问（想想数百甚至数千个进程）。

如果它与此相关，我们将使用 Python`rQ`来处理异步任务（作业和工作人员）。

编辑：就大小而言，预计元素不会很大 - 顶部大小应该在 500 - 1000 字节左右。它们基本上是 URL，因此除非发生奇怪的事情，否则它们应该远低于该大小。元素的数量将取决于并发进程的数量，因此大约 10 - 50 K 的元素可能是一个不错的选择。请记住，这更像是一个暂存区域，因此应该更多地关注速度而不是大小。

总而言之，我的问题是：

1.  使用多个进程时，Redis 是否为共享访问设置了一个好主意？是否有任何数据可以让我们知道该解决方案将如何扩展？如果是这样，您能否提供任何指示或建议？

2.  在填充共享数据时，什么是好的更新策略？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:21:05.527

不是一个完整的答案，只是一些想法：就像说的那样，Redis 将您的集合保存在内存中，因此为了回答 1，您需要考虑或至少估计最坏的情况：

*   集合中的每个元素需要多少内存空间
*   有多少（数量）元素是非常重的负载

一旦你有了估计，你就可以计算并查看使用 Redis 是否可行：

例如，有 100 个字节的元素并期望 1.000.000 个元素的“非常重”负载，您将需要至少 100MB 的内存仅用于 Redis，使用它是可行的，甚至便宜。但是如果您需要 500 个字节每个元素和你的重负载意味着 30.000.000 个元素，那么你需要 15GB 的内存，它甚至是可行的，但与使用你的 postgre 数据库相比可能太贵了，这导致你需要进行第二次估计：

*   How many requests/second (in total) you will have against your Redis/Postgre server, or how many processes you expect to be making requests and how many/second each process will make.

Having some estimates can help you decide what solution is the best for your requirements/budget.

# java - 如何使用 Geb 控制点击项目？

> ID：14104578
> 
> 赞同：5
> 
> 时间：2012-12-31T17:47:11.543
> 
> 标签：java, groovy, webdriver, geb

我正在与 Geb 一起对使用 ExtJS 呈现其大部分 UI 的 Web 应用程序进行自动化测试。我的情况是我需要按住 ctrl 并单击几个 ExtJS 生成的代表“类别”的表格单元格。我如何使用 Geb 来 ctrl-click 这些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:51:33.627

要进行控制单击，我必须使用 firstElement 直接访问 WebDriver WebElement 对象：

```
def categoryItem = $("div.category-item-title", text: categoryName).firstElement() 
```

然后 Actions 对象可用于添加控制单击操作：

```
Actions actions = new Actions(driver)
actions = actions.keyDown(Keys.CONTROL)
actions = actions.click(categoryItem)
actions = actions.keyUp(Keys.CONTROL)
actions.perform() 
```

请注意，此代码位于页面对象的实例方法中。

这是使用提到的“交互”机制 erdi 的相同代码：

```
interact {
    keyDown(Keys.CONTROL)
    click($("div.category-item-title", text: categoryName))
    keyUp(Keys.CONTROL)
} 
```

# uitableview - 在 UIAutomation 的自定义表格部分标题视图上设置 accessibilityIdentifier

> ID：14104579
> 
> 赞同：2
> 
> 时间：2012-12-31T17:47:16.813
> 
> 标签：uitableview, ios6, ios-ui-automation, uiaccessibility

如何在 UITableView 中的自定义部分标题视图上设置可访问性标识符？

作为背景，由于在 UIAutomation 中记录表视图的元素树会生成与表组元素 (UIATableGroup) 混合的表单元格 (UIATableCell 实例) 的平面列表，因此能够识别组可以更容易地识别属于那些的单元格组（因为它们按顺序返回）。

如果我在作为节标题视图返回的自定义视图上显式设置了accessibilityIdentifier，我可以确认该视图上确实设置了accessibilityIdentifier 属性。

这是提供自定义部分标题视图的方法（当然，它确实显示在我的实际表格视图中）：

```
 - (UIView *)tableView:(UITableView *)tableView 
viewForHeaderInSection:(NSInteger)sectionNumber
{
    UIView *headerView = [self someMethodToRetrieveHeaderView];

    // This line is logging that indeed, the accessibility identifier is set.
    NSLog(@"Header view accessibility identifier is: '%@' for section number: %d",
     headerView.accessibilityIdentifier, sectionNumber);         
    return headerView;
} 
```

问题在于，当我`logElementTree()`在针对此表视图的 UIAutomation 测试中使用 JavaScript 发出调用时，它会返回一个 UIATableGroup 元素，该元素的名称源自该部分标题视图内的文本内容（即回退到 UIAccessibilityLabel 启发式）。因为该节标题中有一个分段控件，所以我得到不一致的可访问性标签值。因此，我希望绕过所有这些并分配一个明确的标识符。

如何强制我自己的显式可访问性标识符显示为 UIATableGroup 的 name 属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:17:42.000

您必须确保您返回的视图也`isAccessibilityElement`响应`YES`. 我可以通过试验 Apple 提供的[核心数据手册](http://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html)示例应用程序来解决这个问题。

我实现了一个自定义视图，如下所示：

```
static int counter = 0;

@interface MyView : UIView
@end

@implementation MyView

- (NSString *)accessibilityIdentifier
{
    return [NSString stringWithFormat:@"Custom Identifier %d", counter++];
}

- (BOOL)isAccessibilityElement
{
    return YES;
}

@end 
```

然后我将它返回给表视图委托（在这种情况下是表视图控制器）：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    MyView *v = [[MyView alloc] init];
    return v;
} 
```

我认为正在发生的事情是可访问性基础设施正在查看标题视图并试图获取第一个子视图的“标识符”，该子视图表示它确实是一个可访问性元素。因此，在您的情况下，分段控件正在返回`YES`，`isAccessibilityElement`因此该标识符是应该公开的可访问性 API 的触发器。

因此，解决方案是确保除了返回自定义标识符之外，`UIView`您还返回作为标头返回到该方法的方法。`YES`

# php - 轮播滑块手机滑动效果

> ID：14104582
> 
> 赞同：2
> 
> 时间：2012-12-31T17:47:28.223
> 
> 标签：php, javascript, jquery, css, css-transitions

基本上这个下面的链接有一个用于安卓手机的轮播滑块。我正在尝试用我的网站创建相同的效果。

![在此处输入图像描述](../Images/11d006bf310c3e7ec2730bec8b2dd7fc.png)

我正在尝试创建一个这样的网站，[但](http://www.februe.de/)用户可以滑动屏幕以转到下一个屏幕，而不是自动或按钮...

当用户在手机屏幕上滑动网站时，哪些类型的可在线免费下载的轮播会导致轮播的这种响应。我只能找到没有滑动效果的免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:50:51.473

### 使用 jGestures

有一个名为[**jGestures**](http://jgestures.codeplex.com/)的插件。你可以考虑使用它们。

> 一个 jQuery 插件，可让您像原生 jQuery 事件一样添加手势事件，例如“pinch”、“rotate”、“swipe”、“tap”和“orientationchange”。包括事件替换：“点击”可以触发“tapone”事件，通过执行滑动鼠标手势可以触发“滑动”。

语法很简单：

```
jQuery('#swipe').bind('swipeone',eventHandler); 
```

*是的，这是 Windows 8 Touch 兼容的！*

# java - Java：无法从类型 Component 对非静态方法 createImage(int, int) 进行静态引用

> ID：14104583
> 
> 赞同：-2
> 
> 时间：2012-12-31T17:47:28.253
> 
> 标签：java

> **可能重复：**
> [无法对非静态方法进行静态引用](https://stackoverflow.com/questions/4969171/cannot-make-a-static-reference-to-the-non-static-method)

我正在尝试平铺背景，但现在我被卡住了。我已经阅读了 的文档`createImage()`，但由于某种原因，有些东西是静态的，我不知道如何或为什么。

这是我的代码：

```
Paint paint;

    if (paint == null) {
        try {
            // Create TexturePaint instance the first time
            Component c;

            Image image = c.getToolkit().getImage("Background.png");

            int height = image.getHeight(null);
            int width = image.getWidth(null);

            BufferedImage bi = (BufferedImage) Component.createImage(width, height);
            Graphics2D biG2d = (Graphics2D) bi.getGraphics();

            biG2d.drawImage(image, 0, 0, Color.black, null);

            paint = new TexturePaint(bi, new Rectangle(0, 0, width, height));
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

我在互联网上找不到一个答案，所以我不知道出了什么问题。:(

非常感谢您的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:48:47.533

似乎 createImage 不是静态方法，因此您不能使用类名直接访问该方法。

`createImage`是实例方法，因此您需要实例化并从该实例`Component`调用。`createImage`

例子：

```
Component comp = new Component(..);
comp.createImage(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:49:17.657

这一行：

```
BufferedImage bi = (BufferedImage) Component.createImage(width, height); 
```

是不正确的。您正在对`Component`不存在的类进行静态调用。不确定您要完成什么，因为您`Component`在代码中更高层声明了一个实例，但未初始化。如果你这样做：

```
BufferedImage bi = (BufferedImage) c.createImage(width, height); 
```

您将不再收到编译器警告，但运行代码将为您带来 NPE。您可能想要更好地定义您要完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:20:47.173

大概您要将此`TexturePaint`对象设置为您从 a 获得`Paint`的对象的属性。您将需要使用相同的组件创建您的。`Graphics2D``Component``BufferedImage`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T17:52:01.520

可能不是这条线

```
BufferedImage bi = (BufferedImage) Component.createImage(width, height); 
```

你应该使用你的 Component 对象，c，而不是：

```
BufferedImage bi = (BufferedImage) c.createImage(width, height); 
```

但是，我看不到 c 在当前代码中除了 null 之外的其他任何内容。但也许这是一个单独的问题，您将能够自己解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T17:50:24.727

试试这个，它调用你的*实例*上的方法`Component`：

```
BufferedImage bi = (BufferedImage) c.createImage(width, height); 
```

# java - Java - 编写 XSL-FO 的方法

> ID：14104590
> 
> 赞同：3
> 
> 时间：2012-12-31T17:48:06.030
> 
> 标签：java, pdf, xsl-fo

我想使用 XSL-FO 来编写 PDF。但是在我看来，Java 和此类文档的组合之间并没有真正的集成，就像在文档中添加/编辑对象（如表格、图像等）然后要求生成相应的 XML。在这个领域有什么我不知道的进步吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:55:16.100

以下是如何使用 Java 使用 Apache FOP 生成 PDF 文件的示例：[Integrating Apache FOP with Java project](http://blog.e-zest.com/integrating-apache-fop-with-java-project-to-generate-pdf-files/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:52:57.597

你看过 Apache FOP 吗？ [http://xmlgraphics.apache.org/fop/](http://xmlgraphics.apache.org/fop/)

甚至他们网站上的 PDF 也是使用他们自己的框架创建的。

# html - 将我的徽标与导航栏对齐时出现问题

> ID：14104599
> 
> 赞同：1
> 
> 时间：2012-12-31T17:49:14.003
> 
> 标签：html, css, nav, graphical-logo

我已经在这里坐了 2 个小时，只是想把我的标志与导航栏对齐，这样它就可以放在一条类似的线上[http://weightshift.com/](http://weightshift.com/)

我也尝试添加此图像

[http://imageshack.us/photo/my-images/26/logonkg.png/](http://imageshack.us/photo/my-images/26/logonkg.png/)

与使用以下 CSS 的导航栏对齐，并且每次我尝试对齐导航栏时都被卡住，导航栏位于标题下方，我使用响应式框架在 Dreamweaver 上创建它，非常感谢您的帮助。

```
#menu {
     background:#333;
    height:100px;
}

#h1 {
width: 100px;

}

#menu-wrap {
      margin:0 auto;
    width:1200px;
}

#navigation-main {
    display: inline-block;
    padding:0px;
    color:#fff;
    font-size:24px;
    font-weight:bold;
    margin-bottom:5px;
    float: right;
}

#navigation-main li {
    float:left;
    margin-right:20px;
}

#navigation-main li a {
    display:block;
    color:#fff;
}

#navigation-main li ul  {
    display:none;
    z-index:0;
}

#top-nav-info {
    background:#dddddd;
    float:left;
    width:1200px;
}

#top-nav-sec li a {
    padding:0px;
    display:inline;
    height:42px;
    color:#a19f9f;
} 
```

目前正在使用 html

```
<body>
<div class="gridContainer clearfix">
  <div id="LayoutDiv1">

    <div id="header">

      <div id="menu">
         <h1> <img src="images/logo.png"> </h1>

                <div id="menu-wrap">

<ul id="navigation-main">
          <li><a href="">Home</a><span class="nav-sec">The Beginning</span></li>
            <li><a href="">Articles</a><span class="nav-sec">Tips, Tricks, Advice</span></li>
            <li><a href="">Tutorials</a><span class="nav-sec">Photoshop Techniques</span></li>
            <li><a href="">Resources</a><span class="nav-sec">Fonts, freebies, wallpapers</span></li>

        </ul><!--end navigation-menu-->
    </div><!--end menu-wrap-->
    </div>
   </div>
  </div>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:56:37.557

要在您提供的示例中重新创建标题，您只需将 a 添加到`float: left`徽标图像和包含导航链接的 。`float: right``ul`

```
<img class="left" />
<ul class="right">
    <!-- nav links here -->
</ul>

.left { float: left; }
.right { float: right; } 
```

这是一个工作[jsfiddle](http://jsfiddle.net/bEddV/)。你想做什么`#menu-wrap`？那是我唯一拿出来的东西，因为我看不出你想用它做什么，而且它打破了头球。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:53:33.957

除了@Simplify 的回答之外，还有不止一种方法可以做到这一点。如果您希望左右浮动这些项目，请确保两个浮动元素的总宽度不超过其容器的宽度。

# 选项1

**JS小提琴**

[http://jsfiddle.net/bjuGB/1/](http://jsfiddle.net/bjuGB/1/)

**HTML**

```
<div class="container">
  <img class="logo" />
  <ul class="nav">
    <!-- nav links here -->
  </ul>
  <div style="clear: both"></div>
</div> 
```

**CSS**

```
.container { width: 1000px; }
.logo { 
  float: left; 
  width: 300px;
}
.nav { 
  float: right; 
  width: 600px;
} 
```

我还添加了一个`clear: both`样式化的 div 以确保任何新元素都不会“落入”浮动中，而是移动到新行。

# 选项 2

在这里使用绝对定位可能不会那么令人头疼。只需确保使用相对定位定义容器即可。

**JSFiddle**

[http://jsfiddle.net/6gnkW/](http://jsfiddle.net/6gnkW/)

**HTML**

```
<div class="container">
  <img class="logo" />
  <ul class="nav">
    <!-- nav links here -->
  </ul>
  <div style="clear: both"></div>
</div> 
```

**CSS**

```
.container {
  position: relative;
  width: 1000px;
}
.logo, .nav { 
  position: absolute; 
  top: 5px;
}
.logo { left: 10px; }
.nav { right: 10px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T19:12:56.447

我会亲自将您的徽标移到菜单之外。代替

```
<div id="header">

  <div id="menu">
     <h1> <img src="images/logo.png"> </h1> 
```

我会这样做

```
<div id="header">
     <h1> <img src="images/logo.png"> </h1>

  <div id="menu"> 
```

这只是个人喜好。接下来就像提到的@Simplify 然后你想让这些元素像这样左右浮动：

```
<div id="header">
     <h1>Name of Site<img class="left" src="images/logo.png" alt="" /></h1>

  <div id="menu"> 
```

你会注意到我把类放在左边，一个 alt 和结束标记也放在图像“/”中。不时使用[http://validator.w3.org/检查您的代码不会有什么坏处](http://validator.w3.org/)

最后，您要将其添加到您的 css 文件中。

```
.left { 
float: left; 
}

#menu { 
width: 100%; 
padding: 0; 
margin: 0; 
}

#menu-wrap { 
margin: 0 auto; 
width: 1200px; /* You will need to change this */
float: right; 
}

#header h1 { 
text-indent: -9999px; 
} 

#header h1 img { 
border: none; 
} 
```

文本缩进会使h1文本消失，同时保持良好的seo。忽略灰色文本。不知道为什么这样做:)

另外，我注意到您将菜单的宽度设置为 1200 像素。我确定您希望页面的整个宽度都是这个大小。在这种情况下，您需要调整它以使您的徽标适合同一行。例如。如果您的徽标是 200 像素宽，您将需要减小菜单的宽度以反映包括任何边距或填充在内的添加。这将允许徽标和菜单并排浮动。简而言之，您不希望这两个元素都比其 1200px 的主容器宽，否则它不会并排浮动。

您还需要创建一个清除浮动元素的类。我喜欢用 .breaker

```
.breaker { clear: both; } 
```

添加

```
<div class="breaker"></div> 
```

在您的关闭菜单标签之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-27T23:21:15.883

徽标和导航具有#navigation .stack-width 的父容器。该堆栈宽度的宽度设置为 960 像素。默认情况下，logo 和 nav 块继承了框的 100% 的宽度。它们需要添加特定的宽度，以便它们可以在父容器中浮动。我倾向于使用 Firefox 在浏览器中处理 CSS，而不是登录网站并在 Themebuilder 中进行编辑。以下样式之一是覆盖当前应用于 #navigation-region .content .view-multilingual-menu 的 margin-left。无需粘贴 CSS 的这一部分，您可以在 Themebuilder 中应用的任何位置删除样式。由于父容器是 960 像素，CSS 将按如下方式设置宽度。徽标设置为 218 像素以适应图像的宽度。导航设置为 728 像素。每个表格元素都有一个上下 4 像素和左右 7 像素的填充。这是对通常为 4px、10px 的表格的默认主题样式的覆盖。徽标 218 像素 + 导航 728 像素 + 填充 14 像素 = 960 像素

```
#navigation-region .content .view-multilingual-menu {margin-left: 0 !important;}

#block-block-476 {width: 218px; float: left;}

#block-views-multilingual-menu-block {width: 728px; float: right;}

.view-multilingual-menu table th:first-child, .view-multilingual-menu table td:first-child, .view-multilingual-menu table td, .view-multilingual-menu table th {

padding: 4px 7px;

} 
```

# iis-7 - Orchard 324 no data sent error with custom module only on web server

> ID：14104605
> 
> 赞同：0
> 
> 时间：2012-12-31T17:49:57.673
> 
> 标签：iis-7, module, orchardcms, application-pool, timeoutexception

我的自定义模块刚刚开始出现一个非常奇怪的问题，直到昨晚才开始发生。基本上，当我尝试请求为模块创建的自定义视图时，前几个页面显示正常，然后突然间其余的内容项页面超时，直到我回收应用程序池。（在浏览器中我收到 324 no data sent 错误）。在 App_Data 文件夹下的错误日志中，我也没有收到与此事件有关的错误。

这是我在事件查看器中收到的错误：

```
3005 
   An unhandled exception has occurred. 
   12/31/2012 12:03:17 PM 
   12/31/2012 5:03:17 PM 
   59d62d1f2da347caafd2dee71266126f 
   43 
   1 
   0 
   /LM/W3SVC/10/ROOT-2-130014459492939950 
   Full 
   / 
   E:\Inetpub\Test-Website\ 
   SERVERNAME 

   24756 
   w3wp.exe 
   NT AUTHORITY\NETWORK SERVICE 
   TimeoutException 
   Transaction Timeout  
   (the url was displayed here)
   admin 
   True 
   Forms 
   NT AUTHORITY\NETWORK SERVICE 
   39 
   NT AUTHORITY\NETWORK SERVICE 
   False 
```

我的开发计算机上没有这个问题（在 iis 或 Visual Studio 上运行网站不会重现问题）。

我几乎肯定该模块的设置是为了有效地处理每个连接。另外，考虑到自从网站上线（现在大约一个月）以来还没有发生这种情况，我猜这与代码无关。

这是我如何设置服务类的示例：

```
 namespace Example.Services
{
    public interface IDocumentNoteService : ITransientDependency
    {
        List<DocumentNoteRecord> GetNotes(int? packageId, int noteTypeId);
    }

    public class DocumentNoteService : IDocumentNoteService
    {
        private readonly IRepository<DocumentNoteRecord> _docNoteRepo;

        public DocumentNoteService(IRepository<DocumentNoteRecord> docNoteRepo)
        {
            _docNoteRepo = docNoteRepo;
            Logger = NullLogger.Instance;
            T = NullLocalizer.Instance;
        }

        public ILogger Logger { get; set; }
        public Localizer T { get; set; }        

        public List<DocumentNoteRecord> GetNotes(int? packageId, int noteTypeId)
        {
                try {
                    var Notes = _docNoteRepo.Table.Where(x => x.Package_Id == packageId).Where(x => x.Note_Type_Id == noteTypeId).ToList();
                    _docNoteRepo.Flush();
                    return Notes;
                }
                catch (Exception ex) {
                    Logger.Error(ex, "There was a problem getting the document notes for this tour.");
                }
            return Enumerable.Empty<DocumentNoteRecord>().ToList<DocumentNoteRecord>();
        }

    }
} 
```

这是零件驱动程序的代码：

```
 namespace ExampleCode.Drivers
{
    public class TourPartDriver : ContentPartDriver<TourPart> {
        private readonly ITourPartService _tourPartService;
        private readonly ITourDateService _tourDateService;
        private readonly IItinDetailService _tourItinDetailsService;
        private readonly IExperiencesService _tourExpService;
        private readonly ITourOptionService _tourOptionService;
        private readonly IDestinationFactService _destinationFactService;
        private readonly IDestinationFactManager _destinationFactManager;
        private readonly IDocumentNoteService _documentNoteService;
        private readonly IPackageUpgradesService _packageUpgradesService;

         public TourPartDriver(
             ITourPartService tourService, 
             ITourDateService tourDateService,
             IItinDetailService tourItinDetailsService,
             IExperiencesService tourExpService,
             ITourOptionService tourOptionService,
             IDestinationFactService destinationFactService,
             IDestinationFactManager destinationFactManager,
             IDocumentNoteService documentNoteService,
             IPackageUpgradesService packageUpgradesService
             ) {
             _tourPartService = tourService;
             _tourDateService = tourDateService;
             _tourItinDetailsService = tourItinDetailsService;
             _tourExpService = tourExpService;
             _tourOptionService = tourOptionService;
             _destinationFactService = destinationFactService;
             _destinationFactManager = destinationFactManager;
             _documentNoteService = documentNoteService;
             _packageUpgradesService = packageUpgradesService;

             Logger = NullLogger.Instance;
             T = NullLocalizer.Instance;
         }

         public ILogger Logger { get; set; }
         public Localizer T { get; set; }

        protected override DriverResult Display(
            TourPart part, string displayType, dynamic shapeHelper) {
            return ContentShape("Parts_Tour", () => shapeHelper.Parts_Tour(
                TourID: part.tour_id,
                TourName: part.tour_name,
                PackageID: part.package_id,
                Highlights: _tourExpService.GetTourExperiences(part.tour_id, part.package_id),
                Description: part.description,
                TourDates: _tourDateService.GetTourDatesDD(part.tour_id),
                TourItinDetails: _tourItinDetailsService.GetItinDetails(part.package_id),
                InitialTourOffsetDate: _tourDateService.GetInitialTourDateOffset(part.package_id),
                TourOptions: _tourOptionService.GetInitialTourOptions(part.package_id),
                TourPrice: _tourDateService.GetTourPrice(part.package_id),
                TourNumDays: _tourItinDetailsService.GetTourNumDays(part.package_id),
                TourNumMeals: _tourDateService.GetTourNumMeals(part.package_id),
                DestinationFacts:_destinationFactManager.GetCategoryFacts(part.package_id),
                PleaseNote: _documentNoteService.GetNotes(part.package_id, (int)NoteTypes.DocNoteType.PleaseNote),
                WebRemarks: _documentNoteService.GetNotes(part.package_id, (int)NoteTypes.DocNoteType.WebRemarks),
                Pace: _documentNoteService.GetNotes(part.package_id, (int)NoteTypes.DocNoteType.Pace),
                PackageUpgrades: _packageUpgradesService.GetInitialPackageUpgrades(part.package_id)
                ));               
        }
    }
} 
```

这是视图的代码：

```
@{

List<DocumentNoteRecord> pleaseNote = Model.PleaseNote;
List<DocumentNoteRecord> webRemarks = Model.WebRemarks;
List<DocumentNoteRecord> pace = Model.Pace;

if (pleaseNote.Count > 0)
{
    <h4 class="tourSubTitle1">Please Note</h4>
    foreach (var note in pleaseNote) {
       <p>@Html.Raw(note.Note)</p>
    }
 }

 if (webRemarks.Count > 0) {
         <h4 class="tourSubTitle1">Web Remarks</h4>
         foreach (var noteRemark in webRemarks) {
             <p>@Html.Raw(noteRemark.Note)</p>

         }
     }

if (pace.Count > 0)
{
    <h4 class="tourSubTitle1">Pace</h4>
    foreach (var notePace in pace)
    {
       <p>@Html.Raw(notePace.Note)</p>
    }
 } 
```

}

任何帮助将不胜感激！我肯定在这里泡菜。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:24:53.147

永远不要将记录传递到视图中。这样做可以捕获数据库上下文，并可能导致连接泄漏或更糟。使用类似于视图模型且不包含持久性实体的普通对象构建您的形状。

# android - LinearLayout 中的权重

> ID：14104612
> 
> 赞同：0
> 
> 时间：2012-12-31T17:51:07.247
> 
> 标签：android, android-linearlayout

我有一个带有多个孩子的 LinearLayout，我希望 ListView 填充父布局的剩余下半部分：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:weightSum="1"
    >

    <AutoCompleteTextView
        android:id="@+id/from_tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="10dp"
        android:hint="@string/hint_from"
        android:singleLine="true"
        android:imeOptions="actionNext"
        />

    <AutoCompleteTextView
        android:id="@+id/to_tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:hint="@string/hint_to"
        android:singleLine="true"
        android:imeOptions="actionSearch"
        />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

        <Button
            android:id="@+id/inverse_btn"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight=".4"
            android:layout_margin="10dp"
            android:text="@string/inverse"
            android:onClick="onClick"
            />

        <Button
            android:id="@+id/search_btn"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight=".6"
            android:layout_margin="10dp"
            android:text="@string/search"
            android:onClick="onClick"
            />

    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="10dp"
        android:background="@color/holo_blue_dark"
        />

    <ListView
        android:id="@+id/favorites_lv"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight=".5"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_gravity="bottom"
        android:background="#700"
        />

</LinearLayout> 
```

但我得到了这个结果：

![在此处输入图像描述](../Images/7045948e033c327b0dd38653a12e9263.png)

此外，如您所见，ListView 项目高度存在问题。项目布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:padding="5dp">

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@android:drawable/ic_menu_mylocation"
        android:contentDescription="@string/favorites_icon_cd"
        />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginLeft="20dp"
        android:orientation="vertical"
        android:gravity="left|center_vertical"
        >

        <TextView
            android:id="@+id/from_tv"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            />

        <TextView
            android:id="@+id/to_tv"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            />

    </LinearLayout>

</LinearLayout> 
```

如何解决这些问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:54:25.190

> 我有一个带有多个孩子的 LinearLayout，我希望 ListView 填充父布局的剩余下半部分：

您可以尝试简单地将 ListView 的高度更改为`match_parent`而不使用`layout_weight`：

```
<ListView
    android:id="@+id/favorites_lv"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    ... /> 
```

> 此外，如您所见，ListView 项目高度存在问题。

要使用您的布局，只需将嵌套的 LinearLayout 的高度更改为`wrap_content`：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:orientation="vertical"
    android:gravity="left|center_vertical"
    > 
```

（如果您希望图像居中，您可以添加：`android:layout_gravity="center_vertical"`到您的 ImageView。）

虽然如果你使用一个 RelativeLayout 而不是两个 LinearLayouts，Android 的绘制速度会更快。试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:padding="5dp"
    >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="20dp"
        android:src="@android:drawable/ic_menu_mylocation"
        android:contentDescription="@string/favorites_icon_cd"
        />

    <TextView
        android:id="@+id/from_tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/image"
        android:ellipsize="end"
        />

    <TextView
        android:id="@+id/to_tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/from_tv"
        android:layout_toRightOf="@id/image"
        android:ellipsize="end"
        />

</RelativeLayout> 
```

# objective-c - 是否记录了 -[NSArray lastObject] 以返回自动释放的对象？

> ID：14104615
> 
> 赞同：2
> 
> 时间：2012-12-31T17:51:15.143
> 
> 标签：objective-c, cocoa-touch, cocoa, memory-management

我最近参加[了](https://stackoverflow.com/questions/14102460/deleting-an-object-after-creating-a-pointer-to-it-objective-c/14102919#comment19513910_14102919)关于是否`lastObject`返回自动释放对象的辩论。我一直以为是这样，我从来没有遇到过问题，但是，仔细想想，我大部分时间都使用这种方法，我的收藏品是参考的，所以，很明显，即使它只是一个简单的参考，代码本来可以正常工作的。因此，关于返回值的自动发布性质，我似乎是错误的（基于一些 SO 答案），但是，我试图在 Apple 的文档中找到一些关于它的内容，但没有这样做。

Apple 是否记录了它是否`lastObject`会自动释放它返回的对象？如果是这样，它记录在哪里？如果事实证明这是真的，他们为什么要这样做？我在上述辩论中得到的答案对我来说毫无意义，集合可以保留并自动释放对象，对吗？这样，对象在运行循环结束时仍然有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T18:07:23.713

即使它没有明确记录，它也可能`lastObject`具有与`objectAtIndex:`. `objectAtIndex:`不会*，* `retain`并且`autorelease`根据本文档返回的对象：[避免导致您正在使用的对象的释放](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/20000043-1000922)。

> 当一个对象从一个基本集合类中移除时，**它会被发送一个释放（而不是自动释放）消息**。如果集合是被移除对象的唯一所有者，则被移除对象（示例中的 heisenObject）会立即被释放。

（强调我的）

考虑同一文档页面中的此示例：

```
heisenObject = [array objectAtIndex:n];
[array removeObjectAtIndex:n];
// heisenObject could now be invalid. 
```

在内存管理方面，释放整个数组与删除所有对象相同，因此您不能指望返回的对象在运行循环结束之前保持有效，即使在某些情况下它实际上可能没有被释放（例如文字字符串、单例、对对象的其他引用等）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T19:48:51.277

如果`-[NSArray lastObject]`自动释放对象，有理由问：“是否记录了自动释放对象，以便我可以依赖这种行为？”</p>

但如果`-[NSArray lastObject]`不自动释放对象，则*无需*询问是否记录了该行为。您*必须*保留返回的对象，如果您想确保它存在`removeLastObject`于数组的一个或一个解除分配之后。如果你不保留它，你的程序就会行为不端。文档说什么或不说什么都没有关系：确保程序在这种情况下正确运行的唯一方法是保留该对象。而且，如果它们将来发生更改`lastObject`以自动释放对象，您的程序*仍将*正常运行。

所以，什么都不知道，你应该只保留对象。

但我们可以知道别的。我们可以反汇编这个`-[NSArray lastObject]`方法，看看它是否自动释放。然后我们就会知道我们是否应该打扰询问文档中的内容。

该`-[NSArray lastObject]`方法在 CoreFoundation 框架中实现。[我使用Hopper](http://www.hopperapp.com/)反汇编了 OS X 10.8 (Mountain Lion) 64 位版本：

```
75e30 55              push       rbp
75e31 4889E5          mov        rbp, rsp
75e34 53              push       rbx
75e35 50              push       rax
75e36 4889FB          mov        rbx, rdi
75e39 488D3530971800  lea        rsi, qword [ds:objc_msg_count] ; @selector(count)
75e40 4889DF          mov        rdi, rbx
75e43 FF1527971800    call       qword [ds:objc_msg_count]     ; @selector(count)
75e49 4885C0          test       rax, rax
75e4c 7509            jne        0x75e57

75e4e 31C0            xor        eax, eax
75e50 4883C408        add        rsp, 0x8
75e54 5B              pop        rbx
75e55 5D              pop        rbp
75e56 C3              ret        

75e57 48FFC8          dec        rax           ; XREF=0x75e4c
75e5a 488B0D1F971800  mov        rcx, qword [ds:objc_msg_objectAtIndex_] ; @selector(objectAtIndex:)
75e61 488D3518971800  lea        rsi, qword [ds:objc_msg_objectAtIndex_] ; @selector(objectAtIndex:)
75e68 4889DF          mov        rdi, rbx
75e6b 4889C2          mov        rdx, rax
75e6e 4883C408        add        rsp, 0x8
75e72 5B              pop        rbx
75e73 5D              pop        rbp
75e74 FFE1            jmp        rcx 
```

如果你说 x86 汇编器，你可以把它翻译成这个简单的 Objective-C 代码：

```
- (id)lastObject {
    NSUInteger count = self.count;
    return count == 0 ? nil : [self objectAtIndex:count-1];
} 
```

由于[文档`objectAtIndex`中没有自动释放对象](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-1000922-BABBFBGJ)**，我们可以看到实际实现[**不会**](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-1000922-BABBFBGJ)`-[NSArray lastObject]`自动释放对象。**

 **这意味着文档中的内容并不重要：如果您希望程序正确运行，则必须保留该对象。

请注意，我并不是说您应该依赖实现细节。我只是使用实现来决定是否值得寻找文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T18:36:43.357

永远不要依赖返回 +1`autoreleased`对象的实现，除非它被明确记录并且`NSArray`没有明确声明它是自动释放的。这样做的原因是它是实现定义的，并且行为可能会随着时间而改变。如果您需要一个对象的生命周期来延长返回它的对象的时间长度或直到下一个运行循环，那么您应该`retain`这样做。

例如，该`lastObject`方法可以在每个框架版本之间在以下两种实现之间自由切换。虽然从第二个实现切换到第一个实现绝不是一个好主意，但它仍然是可能的，并且会破坏在删除最后一个对象、所有对象或释放数组之前没有保留最后一个对象的任何代码。

```
//implementation 1
- (id)lastObject
{
    if(self.length < 1)
        return nil;

    return [self objectAtIndex:self.length - 1];
}
//implementation 2
- (id)lastObject
{
    if(self.length < 1)
        return nil;

    return [[[self objectAtIndex:self.length - 1] retain] autorelease];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T17:53:06.413

**如果它是自动发布的，是一个实现细节，不能可靠地回答。**

lastObject 重新调整您不拥有的对象。根据可可内存命名规则：只有明确命名为“新或复制或分配”的方法（IIRC 这三个）返回新对象

见：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-31T17:55:42.857

实际上不，他们为什么要自动释放对象？

通过调用`lastObject`，您只需获取最后一个对象。它仍然保存在数组中。因此数组绝对不应该释放对象，也不应该为你保留对象。

如果您创建一个对象，可能会对其进行修改，然后您可以将其传递给另一个对象，则自动释放很有帮助，而无需再次担心它。

情况并非如此，它只是告诉数组中的最后一个对象是什么，保留是接收它的对象的工作。**

# c++ - 为什么错误“从 'char' 到 'const char* 的转换无效”？

> ID：14104616
> 
> 赞同：1
> 
> 时间：2012-12-31T17:51:29.627
> 
> 标签：c++

> **可能重复：**
> [C++ 将 char 转换为 const char*](https://stackoverflow.com/questions/8437099/c-convert-char-to-const-char)

我有一个代码片段：

```
string opposite(string c)
{
    if(c == (string) "\""){return "\"";}
    if(c == (string) "<"){return ">";}
    throw;
}

int load_end(int start, string code)
{
    //start is the begining of "header.h" or <header> in #load "header.h" or #load <header>
    //code is self explanitory
    //This function returns the end of "header.h" or <header> in #load "header.h" or #load

    string chr = " ";
    int e;
    string asdf = opposite(code[start]);
    for(int i = start; chr == asdf; i++)
    {
        e = i;
        chr = code[i];
    }
    return e;
} 
```

在定义“asdf”的单词所在的行发生错误；“从 'char' 到 'const char*”的无效转换”[-fpermissive]”。还会出现另一个错误：“c:\mingw\bin..\lib\gcc\mingw32\4.6.2\include\c++\bits\ basic_string.tcc|214|错误：初始化 'std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) 的参数 1 [with _CharT = char, _Traits = std::char_traits, _Alloc = std::allocator]' [-fpermissive]|"。这些错误对我来说是如何引起的毫无意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:02:37.567

问题是，正如编译器有用地告诉我们的那样，您正在发送一个字符的地址，而对面的函数需要一个字符串。

1.  首先让我们解决代码中的一些问题，如果函数有返回值，总是让函数返回一些其他情况。如果两个 if 条件都失败，你的相反函数会返回什么，考虑一下。也许你可以返回错误字符串或空字符串。这始终是一种简洁的编码风格。
2.  其次，这是更关键的一点，为什么你有相反的函数接受一个字符串并返回一个字符串，而它实际上是接受一个字符并返回一个？
3.  其他可能的问题是 chr 未初始化。这里 chr 的作用是什么？如果您可以纠正上述问题并澄清一点，我们可以为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:00:56.920

`string[index]`正在返回一个字符而不是一个字符串

看看文档：[http ://www.cplusplus.com/reference/string/string/operator%5B%5D/](http://www.cplusplus.com/reference/string/string/operator%5B%5D/)

试图修复它：

```
char opposite(const char c)
{
    if(c == '<')
    {
       return '>';
    }
    return c; // (c == '"') { return '"'; }
}

int load_end(int start, string code)
{
    //This function returns the end of "header.h" or <header> in #load "header.h" or #load <header>
    char chr = 0;

    for(int i = start; chr == opposite(code[start]); i++)
    {
        chr = code[i];
    }
    return 0;
} 
```

# ssh - 在创建 SSH 时获得权限被拒绝

> ID：14104622
> 
> 赞同：-2
> 
> 时间：2012-12-31T17:52:21.857
> 
> 标签：ssh

```
[sneha@localhost ~]$  ssh-keygen -t rsa -C "sneha.22.7@gmail.com"

Generating public/private rsa key pair.
Enter file in which to save the key (/home/sneha/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/sneha/.ssh/id_rsa.
Your public key has been saved in /home/sneha/.ssh/id_rsa.pub.
The key fingerprint is:
c8:50:db:0d:eb:cc:23:b3:8a:90:6c:32:80:e8:e2:cc sneha.22.7@gmail.com
The key's randomart image is:

+--[ RSA 2048]----+
|      . .        |
|     . o +       |
|    . . o .      |
|o    o =         |
|+     = S        |
|+.     + .       |
|*+    .          |
|Bo . .           |
| E. .            |
+-----------------+

[sneha@localhost ~]$ /home/sneha/.ssh/id_rsa.pub
bash: /home/sneha/.ssh/id_rsa.pub: Permission denied 
```

谁能帮忙？我很确定我正在做所有需要的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:08:27.983

`id_rsa.pub`不是可执行文件，它是公钥。尝试运行常规文件会给您一个权限被拒绝错误。你想做什么？通常，您会将该文件附加到`~/.ssh/authorized_keys`您要连接的服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T20:20:41.343

原因可能是 SELINUX 设置为启用。这个 SELINUX 是 linux 提供的额外的安全层。在这种情况下，我们将无法创建私钥和公钥。我们已向用户提供许可。但不是在应用程序级别。

为此，请转到 /etc/selinux/config 并设置 SELINUX=disable

# c# - 是否可以在 LinqToTwitter 库中使用代理？

> ID：14104623
> 
> 赞同：2
> 
> 时间：2012-12-31T17:52:27.913
> 
> 标签：c#, twitter, linq-to-twitter

我想知道是否可以使用代理将 twitter 与`LinqToTwitter`(c#) 库连接起来。目的是隐藏ip源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:27:54.087

我刚刚浏览了这里的`LinqToTwitter`库[源代码](http://linqtotwitter.codeplex.com/SourceControl/changeset/view/95a7d0811720#LinqToTwitterAg/LinqToTwitter/TwitterExecute.cs)，尽管我没有找到指定代理的方法，但该库在内部使用 HttpWebRequest，如果您在 App.config 文件中指定它，它将使用代理：

```
<system.net>
  <defaultProxy enabled="true">
   <proxy bypassonlocal="true"
          proxyaddress="http://proxy.domain.org:8888/" />
  </defaultProxy>
 </system.net> 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)对 HttpWebRequest 中的 Proxy 属性有以下说明：

> Proxy 属性标识用于处理对 Internet 资源的请求的 WebProxy 对象。要指定不应使用代理，请将 Proxy 属性设置为 GlobalProxySelection.GetEmptyWebProxy 方法返回的代理实例。本地计算机或应用程序配置文件可以指定使用默认代理。如果指定了 Proxy 属性，则 Proxy 属性中的代理设置会覆盖本地计算机或应用程序配置文件，并且 HttpWebRequest 实例将使用指定的代理设置。如果在配置文件中未指定代理并且未指定 Proxy 属性，则 HttpWebRequest 类使用从本地计算机上的 Internet Explorer 继承的代理设置。如果 Internet Explorer 中没有代理设置，则请求将直接发送到服务器。HttpWebRequest 类使用从 Internet Explorer 继承的通配符解析代理绕过列表，就像 Internet Explorer 直接解析绕过列表一样。例如，HttpWebRequest 类会将来自 Internet Explorer 的“nt*”绕过列表解析为“nt.*”的正则表达式。因此，“http://nt.com”的 URL 将使用 HttpWebRequest 类和 Internet Explorer 绕过代理。

# javascript - 无法在使用正则表达式的 Java 编程中读取引号和括号之间的名称

> ID：14104626
> 
> 赞同：0
> 
> 时间：2012-12-31T17:52:51.170
> 
> 标签：javascript, regex, url

我有一个代码，我只想读取代码中的名称。名称在引号和括号内。我不关心整个代码行，只关心名称。

**代码**

```
document.write('john smith') // i just want to read john smith using Regex in java. 
```

实际上，我是直接通过 URL 阅读的。我需要的一些数据在 Javascript 代码中，一些在其他标签和属性中。如果我得到上述解决方案，我希望，我可以自己处理剩下的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:08:26.237

也许这样的事情会为你工作：

```
document\.write\(["']([^"']*)["']\) 
```

它将捕获名称作为第一个捕获组。也就是说，当您执行正则表达式时，您应该能够将其作为匹配项的索引 1 进行访问。（有关使用捕获组的示例，请参[见此答案）。](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regex)

尽管作为警告，当您将 javascript 之类的东西混入其中时，所有[反对使用正则表达式解析 HTML 的建议都会加倍。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)如果您的实际应用程序比您在此处的应用程序更复杂，您可能需要考虑另一种方法来执行此操作。

# sql - Sql从where子句的每个值中选择n行

> ID：14104628
> 
> 赞同：1
> 
> 时间：2012-12-31T17:52:56.650
> 
> 标签：sql, oracle

示例：select EMPLOYEENAME from EMPLOYEE where state in ('NY','CA','TX');

有没有办法从 where 子句中的每个值返回 10 行行，即**每个州**的 10 个名称。

编辑：我正在使用 Oracle DB。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:58:38.860

```
 SELECT a.* FROM
 (
 select EMPLOYEENAME , 
 ROW_NUMBER() OVER(PARTITION BY state ORDER BY EMPLOYEENAME) as rn
 from EMPLOYEE where state in ('NY','CA','TX')
 )a WHERE rn <=10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:55:41.030

```
select *  
from  
(  
    select foo,bar,  
    row_number() over(partition by baz)  rn     
    from table
    group by foo,bar
)  
where rn <= 10 
```

使用分析功能，例如`row_number`允许基于某些标准进行分区。这基本上会覆盖`rownum`oracle 分配的默认值。

如果您担心并发性，请记住读取将基于事务锁定并且**不会**阻止插入/更新。

# objective-c - 在按钮按下时重新加载当前显示的 UIView 控制器

> ID：14104639
> 
> 赞同：1
> 
> 时间：2012-12-31T17:53:44.107
> 
> 标签：objective-c, ios

我有一个以模态方式显示的 ViewController，我想在同一个视图控制器上有一个刷新按钮，并在按下它时，想要重新加载同一个控制器，就好像它是第一次加载一样。这是这样做的方法吗：

```
[self dismissModalViewControllerAnimated:YES]; //dismiss the current view controller
// shown modally
ViewController *viewController = [[viewController alloc]
initWithNibName:@"viewController" bundle:nil];
[viewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[self presentModalViewController:viewController animated:YES]; 
```

这是当用户单击按钮时我必须从另一个视图控制器加载此控制器的代码。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:10:23.180

您不需要重新加载整个控制器。只需使用刷新按钮上的目标/动作模式来调用设置方法来重置您的计时器和随机选择的文本。

具体来说：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  [self.refreshButton addTarget:self action:@selector(refreshData) forControlEvents:UIControlEventValueChanged];
  [self refreshData];
}

- (void)refreshData {
  // setup timer
  // setup randomly selected text
} 
```

# php - PHP自编码算法

> ID：14104646
> 
> 赞同：0
> 
> 时间：2012-12-31T17:54:41.297
> 
> 标签：php, algorithm, encryption, encoding, base64

我使用 base64 编码已经有一段时间了，它并不安全，因为一些解码器可以轻松识别它。

那么开发自己的机制来保护数据或制作我的加密算法是一个好主意，如果是，那么自制的加密代码是什么样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:57:21.497

不，开发自己的机制来保护数据或制作自己的加密算法都不是一个好主意。

**你必须把它留给专家。**这也是我们看到你在这里问这个问题的原因。倾听你内心的声音，相信自己在这种情况下不要相信自己。

（我不想说你不能为所欲为，我也不想阻止你学习，只是为了生产环境中的实用指南，加密，特别是开发自己的算法，不仅是一个高-艺术本身就是一个问题，如何确保不犯任何经常发生的愚蠢错误也是一个问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:28:16.230

既然您已经明确了要加密 cookie 中的数据，那么要问的第一个问题是为什么？这些数据可以保存在会话变量中吗？

我能想到的唯一有意义的事情是，如果您存储了记住我的密码或其他一些您想要完全确定无法从 cookie 中读取的敏感凭证。如果您担心传输的安全性（有人可能会从网络中嗅探数据），那么您应该使用 HTTPS。

话虽如此，php 有 mcrypt，它是许多不同类型的经过验证的密码的包装器。有了这些，一般的经验法则是使用的比特越多越好，并且您希望采用 CBC 模式并避免 ECB。

首先阅读[mcrypt-encrypt](http://php.net/manual/en/function.mcrypt-encrypt.php)函数，然后 mcrypt-decrypt 解密该值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T18:05:27.447

任何人都可以在 php 中构建编码器，有几种类型的芯片是最容易理解的，但是它们很容易被破坏，并且不建议使用它来表示如果你只是想保护一些东西免受简单用户的攻击或者你想学习如何建立一些安全性，因为它使识别变得更加困难，您可以研究 cypers 或调制 cypers 以获得一点安全性。

就在最近，我正在和一个想了解基础知识的人交谈，所以我基于二进制值操作构建了一个，

**请勿将其用于玩耍或学习之外的任何用途**

```
class binChar{
    function __construct(){
        $this->pats = array('0', '1', '00', '11', '000', '111', '0000', '1111', '00000', '11111');
    }

    function encrypt($str){
        $str = str_replace(array("\r", "\n", "\t", " "), array('\r', '\n', '\t', '\s'), $str);
        $strN = str_split($str);
        $bin = "";
        foreach($strN as $char){
            $charC = decbin(ord($char));
            $count = count((string)$charC);
            while($count < 8){
                $chars = "0".$charC;
                $count++;
            }
            $bin .= $chars;
        }
        echo "Given \r\n ".$str." \r\n Binary\r\n".$bin."\r\n";
        foreach($this->pats as $key => $pat){
            $bin = str_replace($pat, $key, $bin);
        }
        return $bin;
    }

    function decrypt($bin){
        foreach($this->pats as $key => $pat){
            $bin = str_replace($key, $pat, $bin);
        }
        $str = "";
        $chars = str_split($bin, 8);
        foreach($chars as $char){
            $str .= chr(bindec($char));
        }
        $str = str_replace(array('\r', '\n', '\t', '\s'), array("\r", "\n", "\t", " "), $str);
        return $str;
    }
}

$enc = new binChar();
$test = $enc->encrypt("Hello World");
echo "Encrypted\r\n".$test;
echo "\r\nDecrypted\r\n".$enc->decrypt($test); 
```

我再说一遍，除了玩和测试/学习它的工作原理之外，我永远不会建议您将其用于任何其他用途，这只是一些混淆的基本示例。

而且我知道在 php 中使用 AES 不容易理解，它不是一个简单的函数调用，但是使用它可以更好地保护您的数据。

# javascript - 在 xhtml 中包含外部 JS 文件

> ID：14104648
> 
> 赞同：-3
> 
> 时间：2012-12-31T17:54:45.820
> 
> 标签：javascript, jquery, html, xhtml

我试图在我的 index.php 文件中包含 jquery 和几个外部 js 文件。
我一开始试过这个：

```
<script src="jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="file1.js" type="text/javascript"></script>
<script src="file2.js" type="text/javascript"></script>
<script src="file3.js" type="text/javascript"></script> 
```

但它在 IE9 中不起作用（与 IE7 的兼容模式）。所以我尝试了这个：

```
<script src="jquery-1.8.3.min.js" type="text/javascript" />
<script src="file1.js" type="text/javascript" />
<script src="file2.js" type="text/javascript" />
<script src="file3.js" type="text/javascript" /> 
```

这是错误的，并且在任何浏览器中都不起作用。但如果我这样做：

```
<script src="jquery-1.8.3.min.js" type="text/javascript" />
<script src="file1.js" type="text/javascript" />
<script src="file2.js" type="text/javascript" />
<script src="file3.js" type="text/javascript" /></script> 
```

这似乎有效，但不包括最后一个文件。
我无法为您提供原始代码，抱歉。

谁能告诉我这样做的正确方法是什么？我做错什么了吗？

*附言：*

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl"> 
```

**编辑：**

正如 TJ Crowder 所说的 html 标签没问题，问题出在我的脚本中。我弄清楚它在哪里，问题似乎出在这些方面。这是我从 SO 获得的脚本，用于检查浏览器是否支持`input[type=date]`. ~~如果您能告诉我一种在 IE 中检查它而不破坏整个脚本的简单方法，我将不胜感激。~~没关系，我改成`tester.type = "date";`它`tester.setAttribute("type", "date");`也可以在 IE 中使用。

```
var tester = document.createElement('input');
tester.type = "date";
//if type date is not supported create own mask
if(tester.type !== "date") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:59:42.513

问题是“这样做的正确方法是什么？” 答案是“你在第一组例子中的做法”。:-)

您已经说过您的第一组示例“不起作用”，并且在评论中进一步解释了...

> ...没有包含任何文件。Jquery 根本不工作。

您的标签不是问题`script`，您的第一组示例是正确的。查看 F12 开发工具，您可能会发现脚本不在您认为的位置（例如，您收到 404），或者您收到脚本错误（例如，包含文件*，*但脚本错误阻止了它们的正常工作）。

# android - 两个布局是否将相同的视图对象返回给一个活动？

> ID：14104649
> 
> 赞同：0
> 
> 时间：2012-12-31T17:54:59.363
> 
> 标签：android, android-layout

```
 attribute=(TextView) findViewById(R.id.textview1);
    dataAttribute=(TextView) findViewById(R.id.textview2);

            attribute.setClickable(true);
            attribute.setOnClickListener(this);

            dataattribute.setClickable(true);
            dataattribute.setOnClickListener(this);

    //dataAttribute.setOnClickListener(new OnClickListener(){

        //@Override
        //public void onClick(View v) {
            // TODO Auto-generated method stub
            //setContentView(R.layout.activity_main);
        //}
    //});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
public void onClick(View v)
{

    if(v==attribute)
    {
        setContentView(R.layout.second_activity);
    }
    if(v==dataattribute)
    {
         setContentView(R.layout.main_activity);

    }
} 
```

对不起新手问题我的问题是

有两个布局 1- main_activity.xml 和 2- second_activity.xml main_activity 包含 textview1 和 second_activity 包含 textview2。单击第一个 TextView 后设置第二个布局，但单击第二个 Text 它不显示 main_activity.xml 布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:58:26.467

你可能应该这样做：

```
public void onClick(View v)
{
    switch (v.getId()){
    case R.id.textview1:
        setContentView(R.layout.second_activity);
        dataAttribute=(TextView) findViewById(R.id.textview2);
        dataAttribute.setClickable(true);
        dataAttribute.setOnClickListener(this);

        break;
    case R.id.textview2:
        setContentView(R.layout.main_activity);
        break;
    }
} 
```

您之前所做的是比较对对象的引用，这在某些条件下可能有效（如果引用相同），但通常不会，因此这会导致逻辑问题。比较`id`视图是正确的方法。您也没有找到`textView2`，因为它在另一个 xml 文件中。

# javascript - 根据条件使用 slideUp() 和 slideDown() 函数

> ID：14104652
> 
> 赞同：0
> 
> 时间：2012-12-31T17:55:21.367
> 
> 标签：javascript, jquery, html

每当我单击 html 页面上的特定元素（在我的情况下是 tag 中的空白超链接）时，我都会使用代码来切换 html 页面中的面板：

```
 <script> 
     $(document).ready(function(){
      $("#technology").click(function(e){
        $("#technology_panel").slideToggle("slow");
        e.preventDefault()
        });
     });
    </script> 
```

只要我只想向上/向下切换面板，它就可以正常工作。但我真正想要的是，当我单击特定元素时，面板会下降，但是当我单击 html 页面上的其他任何位置时，面板应该会上升。我尝试了这段代码，但这并没有按预期工作：

```
 if (document.getElementById(planning).click()== true)
    { 
     $(document).ready(function(){
       $("#planning").click(function(e){
         $("#planning_panel").slideDown("slow");
         e.preventDefault()
      });
    });
    }
     else
     {
         $(document).ready(function(){
               $("#planning").click(function(e){
                $("#planning_panel").slideUp("slow");
             e.preventDefault()
             });
           });
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:06:43.800

将点击事件绑定到文档，并使用基于被点击元素的逻辑

```
$(document).ready(function() {
    $(document).on('click',function(e) {
        e.preventDefault();
        var $panel = $("#planning_panel");
        if (e.target.id === 'planning') {
            $panel.slideDown('slow');
        } else {
            $panel.slideUp('slow');
        }
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:21:00.167

您可以使用 JQuery 的 not() 函数。

```
$(document).ready(function(){
   $("#planning").click(function(e){
         $("#planning_panel").slideDown("slow");
   });

   $("#planning").not().click(function(e){
         $("#planning_panel").slideUp("slow");
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:00:22.600

尝试关注

```
jQuery(document).ready(function() {
    $("#planning").click(function(e) {
        e.preventDefault();
        var $this = jQuery(this);
        var $panel = jQuery("#planning_panel");
        if ($this.is(':hidden')) {
            $panel.slideDown('slow');
        } else {
            $panel.slideUp('slow');
        }
    }
}); 
```

# jquery - jquery动态加载动画

> ID：14104654
> 
> 赞同：0
> 
> 时间：2012-12-31T17:55:30.283
> 
> 标签：jquery, dynamic, load

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function()
{
    $("a").click(function(){
        $("#bg").slideToggle(1000,function(){
            $("#content").hide('fast',function(){
                $("#content").load($(this).attr('href'),function(){
                    $("#bg").slideToggle(1000);
                }); 
            });
        });
    });
});
</script>

<style>
    nav ul li
    {
    display: inline;
    padding: 0px 20px;
    text-decoration: none;
    }

    #bg
    {
    transition: all 2s;
    background-color: gray;
    z-index:25;
    width: 100%;
    height: 0px;
    }

</style>

</head>

<body>

<div>

    <h2>DEMO</h2>

    <nav>

        <ul>
            <li><a href="first.html#content">First</a>
            <li><a href="second.html#content">Second</a>
            <li><a href="third.html#content">Third</a>
        </ul>

    </nav>

    <div id="all">

<div id="bg"></div>         
        <p id="content">banna third Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p>

    </div>

</div>

</body>
</html> 
```

我有两个像这样的其他 html 文件，其内容必须加载，好的部分是内容正在动态加载，但我希望它在窗帘（在这种情况下是背景灰色的第一个 div）落下并且应该隐藏时具有从用户的角度来看它何时发生。我尝试了多少我无法达到那种效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:02:55.663

`div`之后有一个关闭`<div id="bg">`，您可能并不打算放在那里（因为现在您的代码正在显示/隐藏一个空的 div）。

您还希望删除 CSS 中的`height: 0px`for `#bg`，因为这意味着您可以更有效地隐藏空 div。

有了这两个变化，这个小提琴开始显示一些第一个动画：http: [//jsfiddle.net/PvPv3/](http://jsfiddle.net/PvPv3/)

# c# - 自定义菜单快捷键

> ID：14104657
> 
> 赞同：6
> 
> 时间：2012-12-31T17:55:37.407
> 
> 标签：c#, string, menu, keyboard-shortcuts, customization

我正在开发一个上面有菜单的应用程序。我想对快捷键使用不同的方法（作为这个片段）：这是快捷键：`CTRL`+ `N`，`1`

```
bool prefixSeen = false;

protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (prefixSeen)
    {
        switch (keyData)
        {
            case (Keys.Control | Keys.D1):
                MessageBox.Show("New file");
                prefixSeen = false;
                break;
        }
    }
    switch (keyData)
    {
        case (Keys.Control | Keys.n):
            prefixSeen = true;
        break;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

代码取自[这里](https://stackoverflow.com/questions/3244063/how-to-get-a-combination-of-keys-in-c-sharp)。

这是我的菜单：

![在此处输入图像描述](../Images/fd96124a57e9d9f4627ca675423a37e9.png)

而且我希望在菜单项中显示（在右侧对齐）快捷键（我认为应该将其解释为字符串）。我怎样才能达到这个效果？

在此先感谢，并祝大家新年快乐。

**编辑：** Visual Studio 的内置方法是：

![在此处输入图像描述](../Images/3a16d61420edf3be0182c28c3430b8ee.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T17:58:53.213

使用[`MenuItem.ShortCut`](http://msdn.microsoft.com/en-US/library/system.windows.forms.menuitem.shortcut.aspx)和[`MenuItem.ShowShortCut`](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.showshortcut.aspx)属性。

* * *

如果您想创建自己的自定义快捷键，这些属性将不适合您，因为它们依赖于预先确定的快捷键枚举。在这种情况下，我建议您将其添加到菜单的文本中，没有自动的方法可以做到这一点。

* * *

既然有人指出你正在使用`ToolStripMenuItems`你应该能够独立地设置[`ShortCutKeyDisplayString`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripmenuitem.shortcutkeydisplaystring%28v=vs.100%29.aspx)你想要的。您仍然需要自己处理实际的快捷方式。

# php - Drupal 没有在 WAMP 上加载 PHP

> ID：14104669
> 
> 赞同：0
> 
> 时间：2012-12-31T17:56:59.320
> 
> 标签：php, windows, drupal, wamp

我正在为我们正在构建的 Drupal 站点开发本地开发环境。我在最后一步遇到了麻烦，那就是让 Drupal 中的 PHP 正确执行。正如您在下面看到的，当我在 PHP 中执行的 localhost 页面上查看源代码时，HTML 标记包含应该首先在服务器端执行的 PHP 代码。我已经确认数据库连接正常，并且该站点在我们的生产服务器上运行良好。我该如何解决这个问题？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?= $language->language; ?>" lang="<?= $language->language; ?>">
<head profile="<?= $grddl_profile; ?>">
    <?= $head; ?>
    <title><?= $head_title; ?></title>
    <?= $styles; ?>
</head>
<body class="<?= $classes; ?>" <?= $attributes;?>>

<?= $page_top; ?>
<?= $page; ?>
<?= $page_bottom; ?>

<?= $scripts; ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:51:37.150

您需要在**php.ini**文件中编辑此行

> short_open_tag = 关闭

至

> short_open_tag = 开启

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:14:31.140

您是否启用了 PHP 输入过滤器？您是否在 php.ini 中启用了短打开标记？

# c# - ReadOnlyCollection IEnumerable

> ID：14104674
> 
> 赞同：8
> 
> 时间：2012-12-31T17:57:35.880
> 
> 标签：c#, .net, linq

```
string[] _myStrings = { "Hello", "There", "Happy", "Day" };

public IEnumerable<string> MyStrings1
{
    get
    {
        return new System.Collections.ObjectModel.ReadOnlyCollection<string>(_myStrings);
    }
}

public IEnumerable<string> MyStrings2
{
    get
    {
        return from s in _myStrings select s;
    }
} 
```

我已经看到一些关于不将数组用于公共属性的讨论。我一直在使用`MyStrings2`公约。有什么理由我应该`MyStrings1`改用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T18:00:31.890

**简而言之：**我认为 Jon Skeet 给出了一个非常好的答案 - [ReadOnlyCollection 或 IEnumerable 用于公开成员集合？](https://stackoverflow.com/a/491591/1437962)

**另外：** 您可以模拟`AsReadOnly()`：

```
public ReadOnlyCollection<Abc> List
{
    get { return new ReadOnlyCollection(list); }
} 
```

**更新**：
这不会创建`list`. `ReadOnlyCollection`不复制数据，它直接在提供的列表上工作。请参阅[文档](http://msdn.microsoft.com/en-us/library/ms132476.aspx)：

> 只读集合只是一个带有防止修改集合的包装器的集合；因此，如果对基础集合进行了更改，则只读集合会反映这些更改。
> 
> 此构造函数是 O(1) 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:59:13.837

将数组直接暴露给使用它的人意味着他们可以修改它——这违反了封装和数据隐藏。

当你的类有一些不变量（保证它做什么和它持有的数据）时，这可能是一个问题，因为它不能保证其他类是否可以随意改变它的内部结构。

在多线程环境中，这更是一个问题，因为一个线程可以对数据进行更改，而另一个线程正在尝试读取数据——您很容易在不同的线程中获得不一致的数据。

# android - 通过 Android 应用启动 Tom Tom Navigation

> ID：14104675
> 
> 赞同：3
> 
> 时间：2012-12-31T17:57:47.340
> 
> 标签：android, android-intent, navigation, tomtom

我一直在寻找 Google Navigation Beta 的付费替代品。

我遇到了 Sygic 并发现了从应用程序中启动它的方法。但是，我的老板希望我使用 TomTom Navigation。我搜索了很长时间，但找不到从应用程序中启动它的任何方法。

我想做的事？调用一个意图，输入纬度和经度（或地址），然后启动 TomTom 进行导航。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T05:47:10.427

我不知道这是否应该是一个答案，但我只是想结束这个问题..

它不可能这样做。这是对我第二个查询的回复（我再次确认，因为我认为技术支持人员没有得到我想要的东西）

> 亲爱的阿西姆，
> 
> 这是来自 TomTom 客户支持的 Seren，您的查询参考号为 130102-002150。
> 
> 首先，对于我之前的回复给您带来的不便和困惑，我深表歉意。
> 
> 请放心，我们始终致力于为客户提供出色的客户服务，我们将尽最大努力解决您可能遇到的任何问题。
> 
> 阿西姆，我已与我的一位高级团队成员再次确认，并想通知您，到目前为止，我们没有可以从另一个 Android 应用程序中调用您的应用程序。
> 
> 但是，因为您的建议是一个非常好的建议。我已收到您的反馈并转发给我们的产品管理团队。
> 
> 我们的产品经理审查所有反馈以确定未来的增强功能和产品。我们当前的许多产品和更新都提供基于客户建议的功能。我们当然重视像您这样的尊贵客户。
> 
> 我们希望这些信息对您有所帮助。
> 
> 如果您有任何进一步的疑问，请回复我们，我们将进一步为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T14:58:54.237

根据 TomTom 论坛，[已经成为可能。](http://discussions.tomtom.com/t5/TomTom-Navigation-app-for/TomTom-Url-scheme-for-Android/td-p/431046)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T13:46:13.887

TomTom 有几个 API 可以使用他们的内容 ( [http://developer.tomtom.com](http://developer.tomtom.com) ) 或允许通过他们的 WEBFLEET.api ( [http://business.tomtom.com/en_gb/fleet-management/integration ) 与他们的专业导航进行通信/资源/](http://business.tomtom.com/en_gb/fleet-management/integration/resources/)）。

# oracle10g - 从我的数据库表中删除记录

> ID：14104676
> 
> 赞同：-3
> 
> 时间：2012-12-31T17:58:08.253
> 
> 标签：oracle10g, oracleforms

我想从表单中的表和数据库中的表中删除记录......这是我的代码：

```
if /*condition*/ then 

 delete_record;

 commit;

end if; 
```

注意：我收到此错误：`FRM-40508 : ORACLE error: unable to INSERT record`

但是，只记录在表格的删除！但在数据库中已经存在！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:09:51.210

首先，FRM-xxxx 错误意味着这是一个 Oracle 表单错误，而不是数据库错误。可以肯定的是，试试 show-error 键序列（在我的设置中是 Ctrl+Shift+E），看看是否还有 oracle 错误。
delete_record 是一个受限制的过程，因此不能从某些 WHEN- 或 POST- 或 PRE- 触发器调用它。你能告诉我们这段代码在哪里吗？

# django - Django 1.5：用户和附加信息

> ID：14104677
> 
> 赞同：7
> 
> 时间：2012-12-31T17:58:14.240
> 
> 标签：django

我有一个基于 django auth 的身份验证系统，但我必须向用户添加信息。在 django 1.5 中最好的方法是什么？（在 1.4 中，我使用与 onetoone 链接到用户的配置文件，但现在？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T18:05:18.333

Django 1.5 具有[可扩展的用户模型](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#specifying-a-custom-user-model)。基本上，您可以扩展一个抽象的基本用户模型，添加您的字段和任何内容并从那里使用它。

基本模型只有基本的身份验证——密码字段和最后一次登录时间的字段。您甚至必须创建自己的用户名字段。如果您对当前的 Django 用户模型（使用用户名、名字、姓氏等）感到满意，它也存在`AbstractUser`并且您可以扩展它而不是`AbstractBaseUser`添加自己的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:02:42.620

在 django 1.5 中，您应该创建一个[自定义用户模型](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#auth-custom-user)。用户配置文件现已弃用。

# neo4j - Cypher 查询：查找按关系属性过滤的两个节点之间的所有路径

> ID：14104682
> 
> 赞同：13
> 
> 时间：2012-12-31T17:58:47.410
> 
> 标签：neo4j, cypher

我有以下图表作为 Neo4j 图形数据库：

```
 activates
                            (80 °F)
          (A)------------------------------------->(D)
           | \__                                _/->^
           |    \__  activates               __/    |
           |       \__(50 °F)             __/       |
           |          \__              __/          |             
           |             \__        __/             | 
activates  |                \__  __/                |
 (50 °F)   |                   \/                   | activates
           |                 __/\__                 | (50 °F)
           |    activates __/      \__              |
           |    (60 °F)__/            \__           |
           |        __/                  \__        |
           |     __/                        \__     |
           |  __/                              \_   |
           v /                                   \->|
          (B)------------------------------------->(C)
                           activates                          
                            (50 °F) 
```

每个关系都有一个属性，表示“激活”操作所需的温度。

我需要检索(A) 和 (D) 之间的*所有可用路径*，其中沿路径的温度为 50°F **。**

输出应包括：

```
A -[:activates{temperature:'50'}]-> B -[:activates{temperature:'50'}]-> C -[:activates{temperature:'50'}]-> D

A -[:activates{temperature:'50'}]-> C -[:activates{temperature:'50'}]-> D 
```

*但不是*

```
A -[:activates{temperature:'80'}]-> D

A -[:activates{temperature:'50'}]-> B -[:activates{temperature:'60'}]-> D 
```

如何编写所需的 Cypher 查询？

提前致谢。

**编辑 1：**为了更清楚，我添加了另一个对角关系 (B -[:activates{temperature:'80'}]-> D)。

**编辑2：**我需要检索（A）和（D）之间的**所有***可用路径*，其中温度沿路径*相同*，即：A -> B -> C -> D，A -> C -> D， A -> D。

 **** * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T08:42:51.620

```
START a=node({A}), d=node({D})
MATCH p=a-[r:ACTIVATES*..]-d
WHERE has(r.temperature) and r.temperature='50'
RETURN p; 
```

用它们的节点 ID 替换弯括号 (A,D) 中的值

**更新：** 使用功能[全部](http://docs.neo4j.org/chunked/milestone/query-function.html#_predicates)

```
START a=node(1), d=node(4) 
MATCH p=a-[r:ACTIVATES*..]-d 
WITH head(relationships(p))as r1,p //since the pointer r is a collection of rels we must declare a single relationship pointer
WHERE all(r2 in relationships(p) 
          where r2.temperature=r1.temperature) 
return p; 
```***

# android - 将数据库结果动态添加到文本视图

> ID：14104693
> 
> 赞同：-1
> 
> 时间：2012-12-31T17:59:39.013
> 
> 标签：android, database, android-layout

我在数据库中有标记和类现在我想创建文本视图动态设置从数据库到文本视图的结果我能做到吗

```
private void displaymarks() {
    // TODO Auto-generated method stub
    Cursor c=marksdb.rawQuery("SELECT class,marks FROM  markstb where class='"+clas+"' ",null );
    c.moveToFirst();
     if(c!=null)
     {
      do{
        int c1= c.getColumnIndex("class");
        int c2=c.getColumnIndex("marks");
        s1 = c.getString(c1);
        s2 = c.getString(c2);

      }while(c.moveToNext());

      };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:25:38.107

```
TextView tvClass=(TextView)findViewById(R.id.class);
TextView tvMarks=(TextView)findViewById(R.id.marks);
while(c.moveToNext())
{
  tvClass.setText(s1);
  tvMarks.setText(s2);
} 
```

# c# - 来自 DB 的数据列表以 LinkBut tons 列表的形式显示 - 如何在 ASP.net 中实现这一点？

> ID：14104695
> 
> 赞同：0
> 
> 时间：2012-12-31T17:59:44.057
> 
> 标签：c#, asp.net, list

我正在制作一个摄影师网站。它检索图像的类别并将其显示为链接按钮列表。用户可以单击某个链接按钮来显示该类别的图像。

我想添加一个`BulletedList`然后动态地将这些链接按钮添加到它，但是它会产生一个错误，即我无法在列表项中嵌套控件。

这就是我试图做的：

```
<div id="gallery_wrapper">
    <div id="cat_wrapper" runat="server">
        <asp:BulletedList ID="BulletedList1" runat="server">
            <asp:ListItem Text=""><asp:LinkButton runat="server">LinkButton</asp:LinkButton></asp:ListItem>
        </asp:BulletedList>
    </div>
    <div id="img_wrapper" runat="server">test_img</div>
</div> 
```

但它会产生这个解析错误：

> 解析器错误消息：“asp:ListItem”的“文本”属性不允许子对象。

我的问题是如何以链接按钮列表的形式显示从数据库中检索到的类别名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:11:13.190

既然您说您确实是这方面的初学者，我认为最有帮助的事情是为您指明正确的文档方向。

也就是说，我将从 MSDN 对 ASP.NET[数据绑定控件的介绍开始](http://www.asp.net/web-forms/tutorials/moving-to-aspnet-20/data-bound-controls)

这一页中有足够多的方法可供选择。就个人而言，我会使用[Repeater 控件或 DataList 控件](http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs)。（链接文章中的代码示例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:11:05.960

您可以考虑使用中继器来解决此问题。我会查看[这篇文章](http://www.netrostar.com/Tutorials-91-ASP.NET%20Tutorial.%20How%20to%20use%20Repeater)以获取有关使用中继器的信息。然而，有很多方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:25:20.123

使用 Repeater 控件而不是 BulletedList。

```
<asp:Repeater runat="server" ID="Repeater1">
<HeaderTemplate>
    <ul>
</HeaderTemplate>
<ItemTemplate>
    <li><asp:LinkButton runat="server" /></li>
</ItemTemplate>
<FooterTemplate>
    </ul>
</FooterTemplate> 
```

# google-app-engine - GAE SSL 证书要求

> ID：14104701
> 
> 赞同：2
> 
> 时间：2012-12-31T18:01:16.580
> 
> 标签：google-app-engine, ssl, subdomain, alias

我需要一些帮助来为 GAE 上的应用程序设置 SSL。通过使用 Google Apps 管理的自定义域，我有一个与我的 GAE 应用关联的域。但是，我的应用程序正在通过属于 Alias 的 url 访问。因此，例如我的 Google 应用程序域是 abc.com 并且有一个别名 cde.com，我的 Appengine 应用程序正在使用 url [https://cde.com访问](https://cde.com)

现在我正在尝试设置 SSL，并将证书上传到 Google Apps。不幸的是，我无法将此证书用于我的 appengine 应用程序，因为似乎无法识别域别名。我阅读了证书要求，其中指出：

单域/主机名自签名通配符主题备用名称

这是否意味着 Appengine 上的 SSL 将支持域别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T10:06:01.637

我会尝试它的工作原理：

**1-创建配置文件**

```
[req] 
distinguished_name = req_distinguished_name 
x509_extensions = v3_req 
prompt = no 
[req_distinguished_name] 
C = FR 
ST = HS 
L = Somewhere 
O = Organisation
OU = Organisation_Unit 
CN = *.yourcustomaliasdomain.com 
[v3_req] 
keyUsage = keyEncipherment, dataEncipherment 
extendedKeyUsage = serverAuth 
```

不要忘记用应用引擎上的域配置替换 *.yourcustomaliasdomain.com

**2- 创建 RSA 密钥**

```
openssl genrsa -out key.pem 2048 
```

**3-创建请求签名**

```
openssl req -new -key key.pem -out request.pem -config config 
```

config 是配置文件

**4-创建证书**

```
openssl x509 -req -days 3650 -in request.pem -signkey key.pem -out cert.pem 
```

**5-上传和配置**

在您的 google 应用程序控制台上上传 cert.pem 和 key.pem，如此处说明[选择](https://developers.google.com/appengine/docs/ssl#upload) 您的 ssl 类型，通常应用程序引擎 url 必须与您的证书匹配，您可以添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T10:56:15.947

目前，SSL 仅支持主 Google Apps 域。

此外，应该注意@Ipe 的答案创建了一个自签名证书，任何浏览器都不会信任该证书，因此只能用于开发。

我发现为应用引擎设置 SSL 很困难，因此我创建了一项服务以使其更容易：[http ://www.volcanicpixels.com/ssl/](http://www.volcanicpixels.com/ssl/)

# c++ - 如何在两个无限循环之间交替？

> ID：14104704
> 
> 赞同：-5
> 
> 时间：2012-12-31T18:01:44.767
> 
> 标签：c++, c, while-loop, infinite-loop

我想在两个无限循环之间交替；我怎样才能做到这一点。我的代码是这样的：

```
#include <stdio.h>

int main() {
    // Master loop
    while (1)

    // loop # 1
    while (1) {
        printf("I am in loop #1");
    }

    // loop # 2
    while (1) {
        printf("I am in loop #2");
    }
} // end of master loop 
```

我该怎么做才能在循环 #1 和循环 #2 之间交替？我只是在测试一个想法，以检查/比较两个循环时间（时间）之间的一些结果，以便在时间线上找到一些偏差/故障。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T18:29:33.743

主题：

```
std::thread t1([]() { while(true) printf("I am in loop #1"); }),
            t2([]() { while(true) printf("I am in loop #2"); });

t1.join();
t2.join(); // only necessary if t1 is not really an infinite loop 
```

例如，您可以修改该代码以使每个线程仅在某些条件为真时执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T18:03:15.780

尝试这个：

```
while (1) {
    printf("I am in loop #1");
    printf("I am in loop #2"); // Not really but let's pretend we are
} 
```

如果你真的想要两个循环：

```
while (1) {
myfirstloop:
    printf("I am in loop #1");

    goto mysecondloop;
}

while (1) {
mysecondloop:
    printf("I am in loop #2");

    goto myfirstloop;
} 
```

当然，第二个代码没有意义。但是，嘿，这是两个循环！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T18:52:40.880

在每个内部循环中使用 break 语句将退出该循环并进入下一个循环。非常简单。

```
#include <stdio.h>

int main() {
// Master loop
 while (1) {

// loop # 1
  while (1) {
       printf("I am in loop #1");
       if(something)
           break;
  }

// loop # 2
  while (1) {
       printf("I am in loop #2");
       if(something)
           break;
  }
 }
} // end of master loop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T18:04:45.853

```
bool move = true;
while (true) {
    while (found) {
       // do work
       if (condition) { found = false; }
    }
    while (!found) {
       // do work
       if (condition) { found = true; }
    }
} 
```

提供的答案可以应用于非常复杂的案例 - 以及您提到的简单案例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T18:09:44.447

```
while (1)
{
    while (1) {
        loop1:
        printf("I am in loop #1\n");
        goto loop2;
   }

   while (1) {
       loop2:
       printf("I am in loop #2\n");
       goto loop1;
   }
} 
```

但我不得不说，最好的方法总是使用多个线程

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-31T18:25:17.307

如果您的备用意图类似于读写器问题，您应该有 2 个线程并具有一些同步机制，如信号量等。

# jsoup - 使用 jsoup 进行验证

> ID：14104706
> 
> 赞同：3
> 
> 时间：2012-12-31T18:01:56.340
> 
> 标签：jsoup

是否可以使用 jsoup 来验证 HTML 片段？我想知道标记是否格式错误，而不是让 jsoup 自动修复它，我希望能够通知用户修复源标记本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T09:01:57.303

Jsoup 不是检查 xml 或 html 有效性的正确解析器，您可以使用 JDom 代替。下面是一个示例代码，用于检查 xml 的 welformedness。

```
 SAXBuilder builder = new SAXBuilder();
      File xmlFile = new File("sample.xml");

        try {
            Document document = (Document) builder.build(xmlFile);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println(e.getMessage());
        }catch(JDOMException e){
              System.out.println(e.getMessage());
        } 
```

[您可以在此处](http://www.jdom.org/downloads/index.html)下载 JDom2 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:33:55.050

我猜 Jsoup 不是合适的库；它用于解析/清理/处理html。

# python - 如何在 django 翻译中保留内联链接？

> ID：14104707
> 
> 赞同：2
> 
> 时间：2012-12-31T18:02:01.497
> 
> 标签：python, django

我已经成功安装了 Django 的翻译系统，但遇到了一个设计缺陷（希望我错了）。

这样创建翻译块很容易

```
<p>{% trans "The rain in Spain falls mainly on the plain" %}</p> 
```

但在某些情况下，我希望句子的一部分成为链接或具有不同的格式。

```
<p>The rain in <a href="...">Spain</a> falls <strong>mainly</strong> on the plain</p> 
```

我意识到，我可以在这些标签中创建翻译块

```
<p>
  {% trans "The rain in " %}
  <a href="...">{% trans "Spain" %}</a>
  {% trans " falls mainly " %}
  <strong>{% trans "on the plain" %}</strong>
</p> 
```

但这不仅会使翻译者感到恼火，而且还会强制使用目标语言无法保证的词序。

我查看了更强大的翻译解决方案，例如[https://github.com/mbi/django-rosetta](https://github.com/mbi/django-rosetta) 但我在文档中没有看到任何关于它的使用说明。我可以在这里使用一些 HTML 技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:07:35.983

使用[`blocktrans`](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#std:templatetag-blocktrans)：

```
<p>
  {% blocktrans %}
  The rain in <a href="...">Spain</a>
  falls mainly <strong>on the plain</strong>
  {% endblocktrans %}
</p> 
```

它允许比 simple 更复杂的内容，而 simple`trans`大多只能与标准文本一起使用。请注意，标签中[不支持](https://code.djangoproject.com/ticket/7239)[反向`url`](https://code.djangoproject.com/ticket/7239)`blocktrans`查找，因此您必须在输入之前将 URL 保存到变量中`blocktrans`，[如本答案所示](https://stackoverflow.com/a/3397360/716118)。

# html - 由于高度无法实现粘性页脚：100% 问题

> ID：14104709
> 
> 赞同：0
> 
> 时间：2012-12-31T18:02:17.807
> 
> 标签：html, css, height, sticky-footer

我的网站对于内容[长的页面看起来不错，但页脚在内容](http://www.michigangurudwara.com/wordpress/)[短](http://www.michigangurudwara.com/wordpress/youth-camp/)的页面上向上移动（编辑：链接现在显示工作正确的粘性页脚）。我已经尝试了多种解决方案，但我无法让它们中的任何一个起作用（在这里不起作用是页脚不粘，或者它出现在页面中间）。我已经尝试过[这个解决方案](http://ryanfait.com/sticky-footer/)和[这个](http://www.cssstickyfooter.com/)解决方案（我已经删除了两个解决方案，所以我可以重新开始）。例如，如果您进入 chrome 开发人员工具或 firebug 并添加`height:100%`到#wrapper div（这实际上是使其工作的第一步），高度会超过 100%，并且页脚不在底部。

基本的div结构如下：

```
<div id="wrapper">
  <div id="container">
    <div id="content">
      <div class="post"></div> <!-- floats left -->
      <div id="sidebar></div> <!-- floats right -->
      <div style="clear:both"></div> <!-- clear hack -->
    </div>
  </div>
</div>
<div id="footer"></div> 
```

这是相关 div 的 CSS：

```
html {
    height: 100%;
}
body {
    min-width:900px;
    height: 100%;
}
#container {
    height: 100%;
    padding: 20px;
    background: #f4f4f4;
}
#content {
    -moz-border-radius: 11px;
    -webkit-border-radius: 11px;
    border-radius: 11px;
    margin: auto;
    width: 80%;
    max-width: 1000px;
    min-width:800px;
    padding: 10px;
    background: white;
    -moz-box-shadow: 0px 2px 6px 3px #C0C0C0;
    -webkit-box-shadow: 0px 2px 6px 3px #C0C0C0;
    box-shadow: 0px 2px 6px 3px #C0C0C0;
}
#footer {
    padding: 10px;
    text-align: center;
    box-sizing: border-box;
    background: #101010;
    height: 14em;
    color: white;
}

/* These two are probably less important */
#sidebar {
    float: right;
    height: 100%;
    margin: 15px 25px;

    -moz-border-radius: 11px;
    -webkit-border-radius: 11px;
    border-radius: 11px;
    /*IE 7 AND 8 DO NOT SUPPORT BORDER RADIUS*/
    -moz-box-shadow: 0px 0px 7px #000000;
    -webkit-box-shadow: 0px 0px 7px #000000;
    box-shadow: 0px 0px 7px #000000;
    /*IE 7 AND 8 DO NOT SUPPORT BLUR PROPERTY OF SHADOWS*/
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#dcedeb');
    /*INNER ELEMENTS MUST NOT BREAK THIS ELEMENTS BOUNDARIES*/
    /*Element must have a height (not auto)*/
    /*All filters must be placed together*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#dcedeb')";
    /*Element must have a height (not auto)*/
    /*All filters must be placed together*/
    background-image: -moz-linear-gradient(top, #ffffff, #dcedeb);
    background-image: -ms-linear-gradient(top, #ffffff, #dcedeb);
    background-image: -o-linear-gradient(top, #ffffff, #dcedeb);
    background-image: -webkit-gradient(linear, center top, center bottom, from(#ffffff), to(#dcedeb));
    background-image: -webkit-linear-gradient(top, #ffffff, #dcedeb);
    background-image: linear-gradient(top, #ffffff, #dcedeb);
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
/*Use "background-clip: padding-box" when using rounded corners to avoid the gradient bleeding through the corners*/
/*--IE9 WILL PLACE THE FILTER ON TOP OF THE ROUNDED CORNERS--*/
}
.post {
    width: 100%;
    float: left;
    height: 100%;
} 
```

任何人都可以使用诸如萤火虫或 CDT 之类的东西来弄清楚为什么 100% 的高度不起作用以及如何获得粘性页脚？

编辑：

在按照@ajkochanowicz 的描述实施 Ryan Fait 的解决方案后，页面如下所示： ![在此处输入图像描述](../Images/6ee6ac66ad1d50794d209ba06ff48de3.png)

您可以看到灰色背景（即 #container div 的背景）没有延伸到 #wrapper div 的底部，即使两者都有`height: 100%`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:13:29.077

目前尚不清楚您在这里使用的是*哪种*解决方案，因此很难告诉您您做错了什么。

但是，我在[Ryan Fait 的解决方案](http://ryanfait.com/sticky-footer/)上取得了成功，我在这里看不到任何代码。

如果您对网站开发不太了解，您可以下载[Kickstrap](http://getkickstrap.com)，它已经插入并可以工作。

否则，你需要有这个 CSS

```
* { margin: 0; }
html, body { height: 100%; }
#wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px;
}
#footer, #push { height: 142px; } 
```

然后将`#push`div 添加到您的标记中，如下所示：

```
<div id="wrapper">
  <div id="container">
    <div id="content">
      <div class="post"></div> <!-- floats left -->
      <div id="sidebar></div> <!-- floats right -->
      <div style="clear:both"></div> <!-- clear hack -->
    </div>
  </div>
  <div id="push"></div>
</div>
<div id="footer"></div> 
```

另外不要忘记编辑“142px”值以匹配您所需的页脚高度。

**编辑** 为了澄清固定页脚和粘性页脚之间的区别，这里是一个固定页脚：http: [//jsfiddle.net/y48Su/](http://jsfiddle.net/y48Su/)

这是使用 Ryan Fait 的解决方案实现的粘性页脚：http: [//jsfiddle.net/X6UB7/](http://jsfiddle.net/X6UB7/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T18:09:47.547

### 你可以这样做：

```
body {height: auto; padding-bottom: 160px;}
#footer {position: fixed; bottom: 0;} 
```

# c - 什么算法用于c中的pow（）函数

> ID：14104711
> 
> 赞同：-1
> 
> 时间：2012-12-31T18:02:27.293
> 
> 标签：c, floating-point

> ```
> #include<stdio.h>
> #include<math.h>
> 
> int main() {
> double n,p,ans;
> while(scanf("%lf %lf",&n,&p)==2)
> {
>     ans=pow(p,(1/n));
> 
>     printf("%.0lf\n",ans);
> }
> return 0; 
>  } 
> ```

这里使用什么算法来查找 ans。这个 pow() 函数的复杂度是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T18:17:51.933

C99 标准的第 4.12.7.4 节对`pow`功能没有更多的说明，如下：

> **新思科技**
> 
> ```
> #include <math.h>
> double pow(double x, double y);
> float powf(float x, float y);
> long double powl(long double x, long double y); 
> ```
> 
> **描述**
> 
> `pow`函数计算提高`x`到幂`y`。如果`x`是有限且负的并且`y`是有限且不是整数值，则会发生域错误。可能会发生范围错误。如果`x`为 0 且`y`为 0，则可能发生域错误。如果`x`为零且`y`小于零，则可能发生域错误或范围错误。
> 
> **退货**
> 
> `pow`函数返回 [提高`x`到幂`y`]。

请注意，没有提供有关函数复杂性的信息，并且对要使用的算法没有任何期望。这是因为在 C 的某些实现中，这些函数可能是处理器本机的，而在其他体系结构中，硬件不提供浮点处理。

但是，您可以假设复杂性并不比`log`、乘法和`exp`组合的复杂性差：

```
double pow(double x, double y) {
    return exp(log(x)*y);
} 
```

在许多具有 FP 单元的平台上，以 e 为底的取幂、浮点乘法和自然对数都需要`O(1)`时间，因此`pow`也应该如此。

-edit2- 我不太确定 and 的复杂性`exp`，`log`但我认为实现使用泰勒近似和一堆查找表。那仍然会给`O(1)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:08:22.533

正如前面的答案所说，这是不可能的。

在 x86 上，您可以使用`fyl2x`计算 (y *log2(x)) 和`f2xm1`指令 [连同 +1.0]来实现它

```
fld1            1.0
fld             y
fld             x 
fyl2x                  // y * log2(x)
fadd                   // add 1.0
f2xm1                  // 2 ^ (x-1) 
```

然后在不支持或很少支持浮点单元中的 exp/log 指令的处理器上，log 和 exp 可能会使用 seeries 方程计算，该方程可能需要 5-20 次迭代，具体取决于输入值和方程的好坏。

我认为在这种情况下复杂性仍然是 O(1)，但我相信我们可以想出它不会那样工作的场景。

# php - 如何保护我的 html+PHP 表单以防止用户黑客/更改

> ID：14104712
> 
> 赞同：3
> 
> 时间：2012-12-31T18:02:30.670
> 
> 标签：php, html, forms, security

我在我的网站上遇到了一个巨大的问题，我花了几个月的时间来解决这个问题。问题在于用户能够使用诸如 firebug 之类的工具和其他类似方法来更改我网站的 HTML。问题是，如果用户更改了表单的一部分，他们可能会更改消息/帖子/等的发送者。

我目前的大部分评论、消息、帖子和其他表单都是这样设置的（至于发送用户信息以供使用：

```
 <form rel="1"></form> 
```

我将`rel`用作存储内容的用户 ID 的地方。所以这将转到 ID 为 1 的用户。那么问题是如果用户在 html 中将其更改为喜欢 5，然后提交表单它将转到用户 5。怎么可能仔细检查这个当信息到达服务器时，如果它发生了变化或其他什么，它就不会通过。

我唯一能想到的就是对用户 ID 或其他内容进行哈希处理，并将该值存储在 rel 中。这不会解决问题，但是它可能会使某人更难弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:03:34.467

将用户 ID 存储在会话中。依赖用户输入的重要信息是一个糟糕的主意。

```
session_start();
$_SESSION['user'] = array();
$_SESSION['user']['id'] = $result_set['id']; // or however else you may have retrieved their UID
$_SESSION['user']['name'] = $result_set['username']; // STORE ALL THE VARIABLES!!! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:08:40.727

你应该考虑这样做

1.  用户 ID 和用户应明文存储
2.  密码应使用 SHA 和盐进行散列，盐的长度应与 SHA 散列的长度相等（256、512 等）
3.  使用会话密钥，存储在服务器和 $_SESSION 中的随机字符串，如果 $_SESSION['userid'] 匹配数据库用户 ID 并且 $_SESSION['session_key'] 匹配数据库 session_key ，它是安全的
4.  在会话上使用过期计时器，存储会话应过期的时间值，始终检查会话是否有效或是否过期
5.  任何 DOM 元素中都不应将任何身份验证数据存储为纯 html，它应存储在会话或最坏情况下的 cookie 中

# python - string：提取最后一个 / 之后的前六个字符

> ID：14104713
> 
> 赞同：0
> 
> 时间：2012-12-31T18:02:34.787
> 
> 标签：python, string, extract

我对 Python 的字符串处理相对较新，并且很难弄清楚如何解决这个问题：我有沿 /dir/MAC.timestamp.bin 行的绝对路径，我正在循环使用类似的东西：

```
for fh in glob.glob(DATA_FOLDER+"*.bin"):
    retval = database.postdata(fh) 
```

我现在需要的是提取 MAC（包含 6 个字符）。我正在考虑做一些类似的事情

```
for fh in glob.glob("bin/*.bin"):
    list=fh.split("/")
    lstlen=len(list)
    mac=list[lstlen-1][:6]
    retval = database.postdata(mac,fh) 
```

但是，我不能 100% 确定这是否会始终保持密封，以及是否有更好的方法来处理这个问题？任何提示表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:14:06.247

您应该使用`os.path.basename(p)`而不是`p.split('/')[-1]`.

例如：

```
>>> import os
>>> p = '/dir/MAC.timestamp.bin'
>>> p = os.path.basename(p)
>>> p
'MAC.timestamp.bin'
>>> p[:3]
'MAC' 
```

更通用的解决方案：

```
>>> import os
>>> p = '/dir/MAC.timestamp.bin'
>>> p = os.path.basename(p)
>>> p.split('.')[0]
'MAC' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:04:36.740

```
>>> s = "this/is/a/test23.123456789.bin"
>>> s.split( "/" )[-1][:6]
'test23' 
```

那应该行得通。

Python 列表可以用负数索引。作为列表中`-1`的最后一个元素。

同样，正如您的问题所述，如果传入的数据不符合您的规范，我的解决方案和您的解决方案将不会密不透风。您将需要添加检查，如下所示：

```
>>> s = "this/is/a/test23.123456789.bin"
>>> last_part = s.split( "/" )[-1].split( "." )
>>> if len( last_part ) != 6:
...  print "Improper file format"
>>> else:
...  print "Correct: %s" % last_format 
```

这种检查也将受益于检查它不包含`mac`在您的情况下产生无效的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:13:57.903

[os.path](http://docs.python.org/2/library/os.path.html)具有您会发现有用的功能。特别是，`os.path.basename`和`os.path.splitext`。也许试试这个：

```
import os.path

for fh in glob.glob("bin/*.bin"):
    filename = os.path.basename(fh)
    mac = os.path.splitext(filename)[0]
    if len(mac) != 6:
        raise(Exception('MAC %r is not six characters long' % (filename,))) 
```

# algorithm - 一条边的最短路径归零

> ID：14104718
> 
> 赞同：5
> 
> 时间：2012-12-31T18:02:51.597
> 
> 标签：algorithm, shortest-path

给定一个无向加权图 G 和两个顶点：开始顶点和结束顶点

找到从开始到结束的最短路径的最有效算法是什么，并且能够将恰好一个边的权重变为零？

编辑：我知道dijkstra算法，但正如我所说，这个问题的情况有所不同：我们可以将一个边缘变为零，

我想知道如何有效地解决这个问题，实际上，一种方法是迭代地将边缘权重为零！并在每个步骤中应用 dijkstra 算法，但是，我正在寻找更有效的方法

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T20:17:20.577

您可以通过在两倍大小的增强图上使用 Djikstra 算法来解决此问题。

假设您有顶点 1...n。

定义一个新图，使得对于原始图中的每条边 a->b 的权重为 w，定义边 a->b 的权重为 w，a->b+n 的权重为 0，a+n->b+n 的权重为重量 w。

这个想法是顶点 n+1..n+n 是包含原始图副本的副本。从原始图移动到副本表示使用您将边缘变为 0 的特殊能力。请注意，一旦您处于副本中，就无法返回原始图形，因此该特殊能力只能使用一次。

因此，您只需要解决从开始到结束 + n 的增强图上的问题，以找到最短路径，包括您将单个权重设置为 0 的能力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T18:05:24.540

[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm) 通常用于解决这些类型的问题。另外，这听起来有点像[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem)问题，不过我可能在这方面错了。

# php - 在 php 中检查当前时间是否已超过 SQL 时间

> ID：14104721
> 
> 赞同：1
> 
> 时间：2012-12-31T18:03:09.303
> 
> 标签：php, sql

我正在尝试检查现在的时间是否比 SQL 行中的 DATETIME 新。这是我当前的代码：

```
<?php
require('common.php');

$query = "SELECT 
                 event_name, UNIX_TIMESTAMP(event_date) AS event_time, initiator, min_level, max_level
              FROM 
                 DD_events
          WHERE
           event_date <= NOW()
          ";
try{
    $stmt = $db->prepare($query);
    $result = $stmt->execute();
}
catch(PDOException $ex){
    die("Failed to run query: " . $ex->getMessage());
}
$chk = $stmt->fetchall();

//Loop through each row
foreach ($chk as $chks) {
print_r($chks['event_time']); echo "<br>";
  // If it is, create query to make the next event
    $query = "INSERT INTO
              DD_events (event_name, event_date, initiator, min_level, max_level)
              VALUES 
              (:name, :event_date, 0, :min_lvl, :max_lvl)
          ";
  $query_params = array(
                   ':name' => $chks['event_name'],
                   ':event_date' => $chks['event_time'],
                   ':min_lvl' => $chks['min_level'],
                   ':max_lvl' => $chks['max_level']
                   );
    try
    {
        // These two statements run the query against your database table.
        $stmt = $db->prepare($query);
        $stmt->execute($query_params);
    }
    catch(PDOException $ex)
    {
        // Note: On a production website, you should not output $ex->getMessage().
        // It may provide an attacker with helpful information about your code. 
        die("Failed to run query: " . $ex->getMessage());
    }
} 
```

结果总是空的，即使我知道应该会出现。

我的目标是检查一个事件是否已经过去。如果它已经执行代码。

我知道 PHP 时间与 SQL 时间不同，这就是为什么我尝试使用 UNIX_TIMESTAMP() 函数来尝试将其与 PHP 时间进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:07:24.207

您在您的选择中应用该`UNIX_TIMESTAMP`功能，但您没有将其别名为任何东西。因此，您的结果集包括 event_date 和一个数字键，表示`UNIX_TIMESTAMP(event_date)`您从不访问的值。

```
SELECT event_name, UNIX_TIMESTAMP(event_date) event_date, initiator, min_level, max_level FROM DD_events
#         Alias the result of the function ---^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:06:39.050

以下是我制作依赖数据库时间的计时器的方法：

```
$timeToWait = 120; // 2 minutes
$result_set = .....;
if(time() - $result_set['time'] > $timeToWait) {
    // do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:11:24.273

另一种方法是只选择您需要的行（如果您不打算在代码中使用其他行）：

```
$query = "SELECT 
            event_name, event_date, initiator, min_level, max_level
          FROM 
            DD_events
          WHERE event_date <= NOW()
          "; 
```

这将减少您的 php 代码和所需的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T18:06:48.960

您可以使用`DateDiff`,`Date_Sub`函数来检查两个日期是否导致差异或 null 或零。

那只能定义 MYSQL 查询。

```
SELECT event_name, 
UNIX_TIMESTAMP(event_date) MYSQLDtTime,
DateDiff(time(), UNIX_TIMESTAMP(event_date) ) as timdiff, 
initiator, 
min_level, 
max_level 
FROM DD_events; 
```

所以你可以验证`timediff`列。

# scala - 将混合语义 Map 解包到案例类中

> ID：14104722
> 
> 赞同：1
> 
> 时间：2012-12-31T18:03:12.330
> 
> 标签：scala

我正在使用一个我无法更改的 api，它返回一个 2 元素映射，其中一个键始终存在，但另一个键/值对是动态的，我试图将它们解压缩到一个案例类中。下面的代码有效，但真的很难看：

```
case class Foo(name: String, key: String, value: String)

def fooFromMap(item: Map[String, String]): Option[Foo] = {
  var name: String = null
  var key: String = null
  var value: String = null
  item.foreach { 
    case ("name", v) => name = v
    case (k, v) => key = k; value = v
  }
  if(name != null && key != null && value != null) Some(Foo(name, key, value))
  else None
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:23:32.413

以下是等效的，并且更惯用：

```
def fooFromMap(item: Map[String, String]): Option[Foo] = for {
  name   <- item get "name"
  (k, v) <- (item - "name").headOption
} yield Foo(name, k, v) 
```

如果其中一个`item get "name"`或`(item - "name").headOption`为空，则结果将为空——否则你会得到`Foo`你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:32:34.357

如果我理解正确的话，`Map`总是有`name`键和零个或一个以上的键值对，对吧？如果是，你可以这样做：

```
def fooFromMap(map: Map[String, String]) =
  map.get("name").map { name =>
    val (key, value) = (map - "name").head
    Foo(name, key, value)
  } 
```

如果您还需要检查是否`Map`有第二对（`None`如果没有则返回），那么：

```
def fooFromMap(map: Map[String, String]) = for {
  name <- map.get("name")
  (key, value) <- (map - "name").headOption
} yield Foo(name, key, value) 
```

我倾向于更喜欢第二个片段，因为它更符合习惯并利用了`for`Scala 中强大的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:19:42.007

```
def fooFromMap(map: Map[String, String]): Option[Foo] = {
  val data = m.find(_._1 != "name").getOrElse (null, null)
  Foo(m.getOrElse("name", null), data._1, data._2) match { 
    case f: Foo if (f.name != null && f.key != null && f.value != null) => Some(f)
    case _ => None
  }
} 
```

# ios - IOS 动画脉冲圆圈，如地图上的蓝色球

> ID：14104727
> 
> 赞同：19
> 
> 时间：2012-12-31T18:03:34.743
> 
> 标签：ios, ios6

我想知道如何在地图中使用当前位置的脉动环来实现蓝色球，但没有地图视图。

基本上，我想知道当用户触摸屏幕时，在普通 UIView（或我的自定义视图）上拥有一个带有脉动环的蓝色球的最佳方式，该触摸是蓝色球的中心。

我有两个想法，首先我可以实现一个动画，我无法做到，但这可能是可能的。其次，我可以获得一系列图像，例如 gif，并在用户触摸的任何地方显示它。

哪一个是最好的选择？还是有更好的选择？

谢谢你。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-31T18:29:49.657

试试这个：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(200, 200, 100, 100)];
view.backgroundColor = [UIColor blueColor];
view.layer.cornerRadius = 50;

[self.view addSubview:view];

CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
scaleAnimation.duration = 0.2;
scaleAnimation.repeatCount = HUGE_VAL;
scaleAnimation.autoreverses = YES;
scaleAnimation.fromValue = [NSNumber numberWithFloat:1.2];
scaleAnimation.toValue = [NSNumber numberWithFloat:0.8];

[view.layer addAnimation:scaleAnimation forKey:@"scale"]; 
```

随意设置参数，修改效果。

**编辑：**

您必须添加`QuartzCore`框架，并包含`<QuartzCore/QuartzCore.h>`它才能工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-18T13:12:26.007

为 SWIFT 试试这个

```
let view:UIView = UIView(frame: CGRectMake(200, 200, 100, 100))
view.layer.cornerRadius = 50
view.backgroundColor = UIColor.blueColor()

self.view.addSubview(view)

let scaleAnimation:CABasicAnimation = CABasicAnimation(keyPath: "transform.scale")

scaleAnimation.duration = 0.5
scaleAnimation.repeatCount = 30.0
scaleAnimation.autoreverses = true
scaleAnimation.fromValue = 1.2;
scaleAnimation.toValue = 0.8;

view.layer.addAnimation(scaleAnimation, forKey: "scale") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:10:41.137

以编程方式而不是使用图像序列来制作动画是更好的方法（Apple 也是这样做的）。它有许多优点，尤其是性能要好得多（您的图像序列动画不太可能以 60FPS 运行！）。

您可以通过多种方式实现此动画：最简单的可能是在图像编辑器中创建您的环形图形，然后创建一个`UIImageView`来保存它。然后，您可以简单地为视图的比例、alpha 和框架属性设置动画（确保您的图像视图设置为按比例调整图像大小）。为了确保您的脉动动画无限重复，您可以设置 UIView 动画重复属性。您的中央“蓝球”可以单独`UIImageView`覆盖在顶部。

`UIView`动画相当简单，Apple 有很多示例代码可以帮助您进行。您只需将要在动画块中设置动画的属性以及动画参数（持续时间、重复次数等）包含在其中，其余的工作将由 iOS 完成。在 StackOverflow 上搜索“UIView 动画”会给你很多可能有帮助的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-13T20:35:54.933

这是 Swift 5.3+ 版本。

# 斯威夫特 5.5

```
let view = UIView(frame: CGRect(x:200, y:200, width:100, height:100))
view.layer.cornerRadius = 50
view.backgroundColor = .blue
self.view.addSubview(view)

let scaleAnimation = CABasicAnimation(keyPath: "transform.scale")
scaleAnimation.duration = 1.33
scaleAnimation.repeatCount = Float.infinity
scaleAnimation.autoreverses = true
scaleAnimation.fromValue = 1.5;
scaleAnimation.toValue = 0.75;
view.layer.add(scaleAnimation, forKey: "scale") 
```

最好的。

# python - 打印带有撇号的字符串时如何修复语法错误？

> ID：14104728
> 
> 赞同：15
> 
> 时间：2012-12-31T18:03:37.930
> 
> 标签：python, syntax-error, apostrophe

当我试图打印一个像下面这样在句子中使用撇号的字符串时，

```
print(''I am jack's raging bile duct'') 
```

我收到语法错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-31T18:30:04.873

您可以同时使用`"`和`'`在 Python 中编写字符串，双`'`( `''`) 将无效。

如果您使用`"`，您的案例的语法将是

```
print("I am jack's raging bile duct") 
```

但如果您使用`'`，您可能需要按如下方式转义撇号：

```
print('I am jack\'s raging bile duct') 
```

通常，如果您使用`"`，并且您的字符串也有`"`，您将需要转义`"`字符串中的每个，除了关闭的那个，同样会发生`'`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-04T06:08:32.803

有2种方式：

```
print('I am jack\'s raging bile duct') 
```

或者：

```
print("I am jack's raging bile duct") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T18:04:54.137

不要使用 double `'`，使用`"`.

```
print("'I am jack's raging bile duct'") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-05T06:18:06.807

使用双引号就可以了。print("我是杰克的胆管") 我试过了，效果很好。快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T18:04:44.733

`''`不是双引号。
你想要`"`。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2021-10-01T06:53:08.853

你有3种方式：

*   """ 这是蟒蛇"""
*   “这是蟒蛇”
*   '它是蟒蛇'

一般来说，你可以使用不同的标记它maean使用“in'或使用'in”。

# java - 无法从 ListActivity 类型对非静态方法 getListAdapter() 进行静态引用

> ID：14104736
> 
> 赞同：-1
> 
> 时间：2012-12-31T18:04:02.373
> 
> 标签：java, android, listadapter

```
public class AdapterHelp extends ListActivity{

public static ListAdapter returnAdapter(){
    ListAdapter adapter = (ListAdapter) getListAdapter();
    return adapter;
}
} 
```

嗨，我对这个简单的课程有疑问。它向我显示了一个错误。 **无法从 ListActivity 类型对非静态方法 getListAdapter() 进行静态引用**

所以任何人都可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:21:09.180

出于实际目的，静态方法和变量不需要类的实例来调用或使用它们，而任何其他方法都需要使用类的实例，这意味着您不能调用非静态静态方法中的方法，如果你这样做，没有人可以保证会有一个类的实例来让所需的方法工作。

另一方面，如果您在静态方法中创建具有 getListAdapter() 方法的类的实例，您将能够调用它。有关静态方法和变量的更多信息，您可以查看[Wikipedia](http://en.wikipedia.org/wiki/Static_variable)

# distance - 如何从谷歌 api 调用中获取单个目的地的多条驾驶路线结果？

> ID：14104752
> 
> 赞同：3
> 
> 时间：2012-12-31T18:05:33.767
> 
> 标签：distance

我正在向谷歌 API 发送 curl 调用以获取两点之间的行驶距离。但是，它给了我最短驾驶时间的路线，而不是我正在寻找的最短驾驶距离路线。当我在带有谷歌地图的浏览器中拨打电话时，插入经纬度，我得到 3 条不同的路线。第二条路线是我正在寻找的路线，但 API 调用仅返回距离更长但时间更短的第一条路线。

我在 API 文档中看到有一个名为“alternatives”的参数，但它似乎对我的调用没有任何影响。这是我正在调用的 URL：

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=46.839382,-100.771373&destinations=46.791115,-100.763650&sensor=false&alternatives=true&units=imperial](http://maps.googleapis.com/maps/api/distancematrix/json?origins=46.839382,-100.771373&destinations=46.791115,-100.763650&sensor=false&alternatives=true&units=imperial)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:29:33.290

好的，想通了。问题是我需要使用方向 api，而不是距离矩阵 api。然后解析出最短距离。

[http://maps.googleapis.com/maps/api/directions/json?origin=46.839382,-100.771373&destination=46.791115,-100.763650&units=imperial&alternatives=true&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=46.839382,-100.771373&destination=46.791115,-100.763650&units=imperial&alternatives=true&sensor=false)

# mysql - 查询多列和日期

> ID：14104757
> 
> 赞同：2
> 
> 时间：2012-12-31T18:06:03.090
> 
> 标签：mysql

我有一张桌子，有 4`columns(date,gr1,gr2,gr3)`列`(gr)`，等级从（a 到 f）不等。

```
date        gr1 gr2 gr3
2012-1-1    a   b   c
2011-11-31  b   d   c
2011-11-30  c   a   f
2011-11-29  a   b   f
2011-11-28  f   b   c
2011-11-27  a   c   d
2011-11-26  c   a   b 
```

我需要查询以下内容：我需要选择任何列值在第二天有一个“a”后跟一个“f”等级，无论哪些列有等级。

我是新手，任何帮助将不胜感激......祝大家新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:36:55.967

进行比较时，一种方法是将要比较的记录放在同一行中。由于您要比较从“当前到第二天”的记录，您可以将表本身连接起来，日期相差一天。这是通过`DATEDIFF`计算两个日期之间不同天数的函数来完成的。

**查询 1**：

```
select
  today.*,
  followingday.date as ndate, followingday.gr1 as ngr1,
  followingday.gr2 as ngr2, followingday.gr3 as ngr3
from mytable today
join mytable followingday on DATEDIFF(followingday.date, today.date) = 1 
```

这将给出以下结果，将连续一天的值与前一天结合起来（我已将列重命名为`followingday`前缀为，`n`以便所有列都具有唯一的名称，否则它们不会全部显示在结果集中）：

**结果（[演示](http://www.sqlfiddle.com/#!2/cee16/4)）**：

```
|                            DATE | GR1 | GR2 | GR3 |                           NDATE | NGR1 | NGR2 | NGR3 |
------------------------------------------------------------------------------------------------------------
| November, 30 2011 00:00:00+0000 |   c |   a |   f | December, 01 2011 00:00:00+0000 |    b |    d |    c |
| November, 29 2011 00:00:00+0000 |   a |   b |   f | November, 30 2011 00:00:00+0000 |    c |    a |    f |
| November, 28 2011 00:00:00+0000 |   f |   b |   c | November, 29 2011 00:00:00+0000 |    a |    b |    f |
| November, 27 2011 00:00:00+0000 |   a |   c |   d | November, 28 2011 00:00:00+0000 |    f |    b |    c |
| November, 26 2011 00:00:00+0000 |   c |   a |   b | November, 27 2011 00:00:00+0000 |    a |    c |    d | 
```

现在结果被组合成一行，我们可以对数据应用一些逻辑。在这种情况下，规则是“任何列的值在第二天都有一个'a'，后跟一个'f'等级，无论哪个列有等级。” 因此，任何一个成绩都是`a`当天的成绩，然后任何成绩都是第二天的成绩`f`：

**查询 2**：

```
...
where (today.gr1 = 'a' or today.gr2 = 'a' or today.gr3 = 'a')
  and (followingday.gr1 = 'f' or followingday.gr2 = 'f' or
         followingday.gr3 = 'f') 
```

**结果（[演示](http://www.sqlfiddle.com/#!2/cee16/5)）**：

```
|                            DATE | GR1 | GR2 | GR3 |                           NDATE | NGR1 | NGR2 | NGR3 |
------------------------------------------------------------------------------------------------------------
| November, 29 2011 00:00:00+0000 |   a |   b |   f | November, 30 2011 00:00:00+0000 |    c |    a |    f |
| November, 27 2011 00:00:00+0000 |   a |   c |   d | November, 28 2011 00:00:00+0000 |    f |    b |    c | 
```

结果显示，有一个等级`a`，`11-27-11`其次是一个等级`f`。`11-28-11`同样，有一个等级`a`on `11-29-11`，然后是一个等级`f`on `11-30-11`。这些应该是满足规则的唯一结果。

# git - 如何在没有 ssh auth 的情况下设置 git 服务器

> ID：14104759
> 
> 赞同：5
> 
> 时间：2012-12-31T18:06:13.877
> 
> 标签：git, ssh, webserver, authorization

前段时间，我偶然发现了一个关于如何以某种方式通过 Web 服务器设置 git 身份验证的解释。这样，客户端就不需要 ssh 密钥交换。
真可惜，我既没有为它的链接添加书签，也记不起这项技术。

我只是想念扔掉一个用户名：密码组合来访问一些一次性存储库。在对一些虚拟机设置进行原型设计时，这是我最后一次感觉到这种需要，快照并不是一个理想的解决方案。

**是否可以仅通过基于密码的授权使用 git？**

我听说的另一个示例用例是在大学里，这种方法每学期为 30 人设置新帐户的组织开销要少得多。想象一下，从一群难以*生成自己的密钥对*的人那里收集 ssh 密钥，更不用说人们不了解 VCS 甚至是什么或它的用途。

当然，解决这个问题的方法是只使用 SVN 进行版本控制。但是当你可以拥有 git 时是否有必要使用 SVN？

为了防止误解，我有自己的服务器运行一个有效的 gitolite 设置，并且在客户端和服务器方面使用 ssh 密钥非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:51:24.890

您可以将 gitolite 与任何能够提供身份验证的服务一起使用（因此排除没有身份验证的 git 协议）。

我的[https 配置](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L107-L112)将使用 apache 服务器将提供给 gitolite 脚本的 id 调用 gitolite。

```
ScriptAlias /hgit/ @H@/sbin/gitolite-shell/
SetEnv GIT_HTTP_BACKEND "@H@/usr/local/apps/git/libexec/git-core/git-http-backend"
<Location /hgit>
   ...
</Location> 
```

# cmake - 是否可以绕过 add_subdirectory() 命令的新范围创建？

> ID：14104765
> 
> 赞同：4
> 
> 时间：2012-12-31T18:06:50.810
> 
> 标签：cmake

我目前有以下架构

```
`-- system
    |-- CMakeLists.txt
    |-- dll
    |   |-- CMakeLists.txt
    |   |-- UnixDLoader.cpp
    |   |-- ...
    |   `-- WinDLoader.hh
    |-- sockets
    |   |-- CMakeLists.txt
    |   |-- crossplateform_utils.h
    |   |-- ...
    |   `-- Udp.hh
    `-- threads
        |-- CMakeLists.txt
        |-- IMutex.hh
        |-- ...
        `-- WinThread.hh 
```

我的根`CMakeLists.txt`如下

```
project(system)

add_subdirectory(dll)
add_subdirectory(sockets)
add_subdirectory(threads)

add_library(${PROJECT_NAME}
    ${${PROJECT_NAME}_HEADERS}
    ${${PROJECT_NAME}_SOURCES}
) 
```

`threads/`例如，我有以下

```
list(APPEND ${PROJECT_NAME}_HEADERS
    IThread.hh
    UnixThread.hh
    WinThread.hh
    IMutex.hh
    UnixMutex.hh
    WinMutex.hh
)
set(${PROJECT_NAME}_HEADERS ${${PROJECT_NAME}_HEADERS} PARENT_SCOPE)

list(APPEND ${PROJECT_NAME}_SOURCES
    UnixThread.cpp
    WinThread.cpp      
    UnixMutex.cpp
    WinMutex.cpp    
    PARENT_SCOPE
)
set(${PROJECT_NAME}_SOURCES ${${PROJECT_NAME}_SOURCES} PARENT_SCOPE)

if(UNIX)
    target_link_libraries(${PROJECT_NAME} pthread)
endif(UNIX) 
```

但是，当`add_subdirectory()`创建一个新范围时，我的`${PROJECT_NAME}_*`变量是空的。我读过，但路径变得无效，无论如何cmake在`set(... PARENT_SCOPE)`调用时会产生错误。又是范围问题。`target_link_libraries()``system/threads/CMakeLists.txt``Cannot specify link libraries for target "system" which is not built by this project.`

因此，如果我找到一个绕过范围创建的解决方案，我会很好，但我会采用任何能保持我的架构逻辑的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T21:48:08.693

我认为你有几个合理的选择。

该`add_subdirectory`命令通常用于包含一个目录（它实际上不必是文件系统意义上的子目录），该目录实际上包含一个独立模块，例如库或可执行文件；一个可以在没有父 CMakeLists 文件帮助的情况下构建的。在这种情况下，子模块的 CMakeLists.txt 将包含它自己的`project`命令，从而使全局`${PROJECT_NAME}`变量的使用变得困难。

在您的情况下，您似乎只是希望子目录的 CMakeLists 文件将文件列表附加到父范围中定义的变量。您可以通过使用[`CMAKE_CURRENT_LIST_DIR`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable:CMAKE_CURRENT_LIST_DIR)从属 CMakeLists 中的 CMake 变量来实现此目的：

```
set(${PROJECT_NAME}_HEADERS
    ${${PROJECT_NAME}_HEADERS}
    ${CMAKE_CURRENT_LIST_DIR}/IThread.hh
    ${CMAKE_CURRENT_LIST_DIR}/UnixThread.hh
    ${CMAKE_CURRENT_LIST_DIR}/WinThread.hh
    ${CMAKE_CURRENT_LIST_DIR}/IMutex.hh
    ${CMAKE_CURRENT_LIST_DIR}/UnixMutex.hh
    ${CMAKE_CURRENT_LIST_DIR}/WinMutex.hh
    PARENT_SCOPE
)

set(${PROJECT_NAME}_SOURCES
    ${${PROJECT_NAME}_SOURCES}
    ${CMAKE_CURRENT_LIST_DIR}/UnixThread.cpp
    ${CMAKE_CURRENT_LIST_DIR}/WinThread.cpp      
    ${CMAKE_CURRENT_LIST_DIR}/UnixMutex.cpp
    ${CMAKE_CURRENT_LIST_DIR}/WinMutex.cpp    
    PARENT_SCOPE
) 
```

确保子目录的 CMakeLists 文件中*没有*`project`命令。

在这种情况下，可以通过将`add_subdirectory`命令与[`include`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:include)命令交换来稍微简单一些，从而避免范围问题。

为此，请`PARENT_SCOPE`从命令中删除 args `set`，并在顶级 CMakeLists.txt 中：

```
~~add_subdirectory(dll)
add_subdirectory(sockets)
add_subdirectory(threads)~~
include(dll/CMakeLists.txt)
include(sockets/CMakeLists.txt)
include(threads/CMakeLists.txt)
```

您与此相关的另一个问题仅仅是在命令*之后*调用定义库的命令这一`target_link_libraries(${PROJECT_NAME} pthread)`事实。您最简单的选择可能是将命令移动到父 CMakeLists.txt`add_library``${PROJECT_NAME}`*`target_link_libraries``target_link_libraries`*

# java - JUnit的超时消息可以控制吗？

> ID：14104768
> 
> 赞同：4
> 
> 时间：2012-12-31T18:07:01.043
> 
> 标签：java, build, junit

假设我有一个 JUnit 单元测试，它有两个部分，我不想将这些部分分成单独的[`@Test`](http://junit.sourceforge.net/javadoc/org/junit/Test.html)方法。还假设我想要一个[`timeout`](http://junit.sourceforge.net/javadoc/org/junit/Test.html#timeout%28%29)测试参数。

如何更改/拦截/控制超时断言失败消息以指示测试的哪一部分超时？

这是一个不起作用的尝试：

```
@Test(timeout = 1000)
public void test() {
    try {
        // part one of the test
    } catch (Throwable e) {
        Assert.fail("Part one failed");
    }

    try {
        // part two of the test
    } catch (Throwable e) {
        Assert.fail("Part two failed");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:15:57.227

只是阅读文档，没有。超时自动使测试失败。这不会引发异常——它是由测试运行器完成的。您可以编写自己的测试运行程序，但您仍然很难找出失败的地方。我建议以不同的方式构建您的测试。可能有你自己的计时器，只是没有通过测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:14:55.600

正如您所发现的，JUnit 的超时功能相当有限。对于需要更多功能的时间相关测试，我使用[了 awaitility](https://code.google.com/p/awaitility/wiki/Usage)。您可以使用“命名等待”来自定义消息：

```
with().pollInterval(ONE_HUNDERED_MILLISECONDS)
    .and().with().pollDelay(20, MILLISECONDS)
    .await("customer registration").until(
            costumerStatus(), equalTo(REGISTERED)
); 
```

# ruby-on-rails - redactor rails 和carrierwave - 图片尺寸

> ID：14104773
> 
> 赞同：5
> 
> 时间：2012-12-31T18:07:35.443
> 
> 标签：ruby-on-rails, redactor

我正在使用带有载波的 redactor_rails gem。有两个地方我需要带有图片上传的文本编辑器，我想为每个编辑器制作不同的图片大小。

如果我使用版本，那么每张图片都有两种尺寸，我不知道如何在文本字段中更改图片版本。

主要思想是为 redactor_rail_picture_uploader 中的每个编辑器上传器运行它自己的调整大小过程

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:40:51.523

可能这不是完美的方法，但它确实有效。

我在以下位置制作了几个版本的上传文件：**redactor_rails_picture_uploader.rb**

```
version :item_text do
  process :resize_to_limit => [478, 478]
end

version :thumb do
  process :resize_to_fill => [100, 100]
end 
```

在那里创建了类**RedactorRails::PicturesController**的初始化程序并重新定义了方法“create” 。现在它通过“版本”参数保存我通过表单传递的版本。

```
RedactorRails::PicturesController.class_eval do
  def create
    @picture = RedactorRails::Picture.new

    file = params[:file]
    version = params[:version]

    @picture.data = RedactorRails::Http.normalize_param(file, request)
    if @picture.respond_to?(:user_id)
      @picture.user = current_user
      @picture.assetable = current_user
    end

    if @picture.save
      if version 
        file_link = @picture.send(:url, version)
      else 
        file_link = @picture.url
      end 

      render :text => { :filelink => file_link }.to_json 

    else
      render :nothing => true
    end
  end
end 
```

最后添加了隐藏输入，其中包含我想以这种形式保存的上传者的版本值：

```
%input{:id => 'redactor_version', :value => 'item_text', :type => 'hidden'} 
```

像这样的东西。

# android - onPause 后的处理程序 postDelayed

> ID：14104776
> 
> 赞同：1
> 
> 时间：2012-12-31T18:07:39.120
> 
> 标签：android

我正在使用处理程序 postDelayed 稍后将活动移动到后台。

如果活动在处理程序触发回调之前进入暂停模式会发生什么？它会发生什么？是删除还是恢复后倒计时？

例如，如果活动在恢复后暂停，有 5 秒回调触发，它会在 5 秒后触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:22:14.270

您应该取消`onPause()`.

> 我正在使用处理程序 postDelayed 稍后将活动移动到后台。

暂停任何已经暂停的 Activity 是没有意义的。它甚至会被操作系统破坏，所以你不能依赖 Handler 是否执行它的回调。

您可以使用任何 Handler 的`remove___()`方法，例如[`removeCallbacks(Runnable)`](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29).

# regex - 正则表达式匹配任何不包含 '/'

> ID：14104777
> 
> 赞同：0
> 
> 时间：2012-12-31T18:07:47.667
> 
> 标签：regex

例如

```
Season           // matches
Season/Winter    // wont match
Season/Spring    // wont match 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:12:57.347

无论如何，我真的怀疑您是否需要任何语言的正则表达式：

```
^[^/]*$ 
```

[http://regexr.com?339e2](http://regexr.com?339e2)

您通常可以使用字符串搜索方法，例如 JavaScript 的`indexOf`字符串方法或 PHP 的`strpos`函数来尝试查找`/`，大多数语言都提供比正则表达式更快且更好的解决方案的原生字符串方法，对于如此简单的事情更是如此。
**编辑：**对于作为 OP 的 mongodb，regex 似乎是最合适的解决方案。我相信它应该比使用另一种语言的字符串函数遍历所有记录更优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:14:18.300

您正在寻找一个*字符类*。这些是`[`和`]`字符。在里面，您指定要查找的字符。您还可以添加`^`字符，以指示否定字符类，其中包含除您指定的之外的任何内容。所以，你的正则表达式是：

```
^[^/]*$ 
```

但是，大多数字符串库都有查找特定字符的工具。例如，在 C# 中，您可以执行以下操作：

```
if (! String.Contains("/")) { /* your logic here */ } 
```

# python - 使用python为文件设置执行位

> ID：14104778
> 
> 赞同：16
> 
> 时间：2012-12-31T18:07:53.043
> 
> 标签：python, macos, file-io

在 Mac OS 上使用 python，我想打开一个文件进行写入并将一些 shell 命令放入其中。稍后在终端中运行。

```
with open("my_script.sh", "w") as fd:
    fd.write("#!/bin/sh\n")
    fd.write("echo $PATH\n") 
```

这将创建文件，但我不知道如何设置执行位，所以当我在终端中运行它时，我不会得到：

```
sh: my_script.sh: Permission denied 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-31T18:10:21.663

```
import os
os.chmod("my_script.sh", 0744) 
```

不过，请正确选择值。有些值可能不安全。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-31T19:47:44.460

您始终可以在终端 shell 中执行此操作，然后再运行它，使用[`chmod`](http://www.manpagez.com/man/1/chmod/)：

```
chmod a+x my_script.sh 
```

如果您想从 Python 中执行此操作，您可以使用其中之一[`chmod`](http://docs.python.org/library/os.html#os.chmod)或[`fchmod`](http://docs.python.org/library/os.html#os.fchmod)在`os`模块中使用。既然你已经打开了文件，我会做后者：

```
with open("my_script.sh", "w") as fd:
    fd.write("#!/bin/sh\n")
    fd.write("echo $PATH\n")
    os.fchmod(fd.fileno(), stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH | stat.S_IXOTH) 
```

不幸的是，正如您所看到的，没有直接等同于为每个人`chmod a+x`添加`x`标志而将其他所有内容都放在一边。`chmod`但是您可以执行命令行工具实际执行的相同操作：[`stat`](http://docs.python.org/library/os.html#os.stat)文件（或在本例中[`fstat`](http://docs.python.org/library/os.html#os.fstat)为 ）获取现有权限，然后修改它们：

```
with open("my_script.sh", "w") as fd:
    fd.write("#!/bin/sh\n")
    fd.write("echo $PATH\n")
    mode = os.fstat(fd.fileno()).st_mode
    mode |= stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH
    os.fchmod(fd.fileno(), stat.S_IMODE(mode)) 
```

`S_IMODE`（在大多数平台上，您实际上并不需要该步骤，因为要么`st_mode`没有任何额外的位，要么 (f)`chmod`无害地忽略它们——就像 OS X 那样。但最好做正确的事情，使您的代码可移植并且面向未来。）

大多数人认为“友好”的名字`S_IXUSR`并不是特别友好，一旦你学会用八进制来考虑模式，它实际上比试图记住 POSIX 如何缩写事物更容易，所以你可能更喜欢这个：

```
with open("my_script.sh", "w") as fd:
    fd.write("#!/bin/sh\n")
    fd.write("echo $PATH\n")
    mode = os.fstat(fd.fileno()).st_mode
    mode |= 0o111
    os.fchmod(fd.fileno(), mode & 0o7777) 
```

`111`表示可由用户、组和其他人执行（与各个位相同）`|`，`ST_IX*`并且`7777`是您被允许传递给 (f)的所有位`chmod`（与此相同`S_IMODE`）。

# php - 从数据库中获取短语或缓存它

> ID：14104781
> 
> 赞同：0
> 
> 时间：2012-12-31T18:08:26.613
> 
> 标签：php, caching, memcached

我有我的多语言脚本。每种语言都有自己的短语。我从数据库中`global.php`检索数据，并将所有短语放在一个数组中。

主要问题，有很多人没有`Memcached`在那里托管。在**不**使用`Memcached`.

我曾尝试使用`sessions`，但每个访问者的脚本将创建另一个`session`。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:19:20.100

任何持久性存储都是您问题的答案。它可能是文件系统，可能是 memcache（内存），可能是数据库，也可能是 N 个其他东西。内存显然是性能最高的。

如果您正在开发一个打算分发缓存层的应用程序，则应该构建这样的后端（持久存储）可以随时轻松换出。然后使用回退实现最佳情况缓存，一直到文件然后是黑洞。但是你的缓存的实现不应该关心它。

```
$cache = new Cache; // Automatically selects the best cache-mechanism to use
$cacheId = 'languages';

if (!$languages = $cache->load($cacheId) {

  // ... Do the leg-work to get the languages ...

  $cache->save($cacheId, $languages);
}

return $languages; 
```

# php - laravel 不会上传照片

> ID：14104788
> 
> 赞同：1
> 
> 时间：2012-12-31T18:09:00.700
> 
> 标签：php, upload, laravel

没看懂，怎么上传不了照片

在我的中有以下内容`Input::all()`：

```
Array
(
    [name] => p17fp1pnaa1gpr5otdg1ba3fd4v.jpg
    [file] => Array
        (
            [name] => tumblr_ltaruq6XCH1qc4lrfo4_400.jpg
            [type] => image/jpeg
            [tmp_name] => C:\xampp\tmp\php9A20.tmp
            [error] => 0
            [size] => 48382
        )

) 
```

我尝试将文件上传到 tmp 目录，但它不会这样做......

```
$tmp_input = Input::all();
#$tmp_input = $tmp_input['file'];
Input::upload('photo', path('public').'uploads/tmp', $tmp_input['file']['name']); 
```

`$tmp_input['file']['name']`或者`$tmp_input['name']`, 也不起作用

是的，该`uploads/tmp`文件夹存在。我是否遗漏了不会上传的语法中的某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:37:09.537

就像其他人可能知道的那样，我不得不使用`move_uploaded_file()`函数，因为我无法使用 Laravel 的任何函数上传文件。

所以这就是我所做的

```
$tmp_input   = Input::all();
$destination = $this->tmp_dir.$tmp_input['name'];
move_uploaded_file($tmp_input['file']['tmp_name'], $destination); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:09:01.453

我认为您调用的文件名不正确，如果您查看临时文件夹中的文件，则它的名称与原始文件不同，`[tmp_name] => C:\xampp\tmp\php9A20.tmp` 因此您需要从临时文件夹移动到您`path('public').'uploads/tmp'`的文件是 php9A20。 tmp 在此之后，如果您愿意的话，您应该使用原始名称重命名文件。它应该以这种方式。`[name] => tumblr_ltaruq6XCH1qc4lrfo4_400.jpg`，试试下面的代码。

```
Input::upload('photo', path('public').'uploads/tmp', $tmp_input['file']['tmp_name']); 
```

# c# - 如何在没有显式单元格引用的情况下在 OpenXml 中创建和处理合并的单元格？

> ID：14104797
> 
> 赞同：1
> 
> 时间：2012-12-31T18:10:14.967
> 
> 标签：c#, openxml

我在 Google 上搜索并找到了很多关于如何使用 OpenXml 创建合并单元格的代码示例。但是它们都假设您已经知道要合并的单元格的字面单元格引用。

在我的特定情况下，我正在从报告数据生成电子表格，其列和行由我要显示的数据确定。在几个地方，我需要合并可变数量的单元格，具体取决于有多少数据值共享一个组值。

请有人提供代码（或参考）来演示如何生成具有水平和垂直单元格合并的电子表格，而不知道合并单元格的显式单元格引用是什么？

# javascript - iframe 中的打开窗口

> ID：14104801
> 
> 赞同：16
> 
> 时间：2012-12-31T18:10:34.423
> 
> 标签：javascript, html, iframe, window.open

我正在制作一个有趣的简单网页，我是 JavaScript 的菜鸟，我想在点击时打开窗口，我想在 iframe 中打开它们，我想给它一个普通 window.open 的所有功能而且我还希望它最大化窗口，但在 iframe 内部而不是外部。我知道关于 window.open 并开始工作我只想让窗口在 iframe 内部而不是外部工作。我使用记事本作为我的编辑器。这是我的第一个问题，如果我犯了任何错误，请原谅我，谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-31T18:36:37.320

### 如果你想在一个`window`内打开一个`iframe`：

1.  创建`iframe`一个名称。

    ```
     <iframe name="theFrame"></iframe> 
    ```

2.  现在使用`script`这种方式：

    ```
     window.open(url, "theFrame"); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:14:01.220

如果您为 iFrame 提供名称属性，则可以在链接的目标属性中引用该名称。

```
<a href="http://www.microsoft.com" target="IFrame">Link Text</a> 
```

# xcode - 让文档项列表在 XCode 4 中始终可见？

> ID：14104803
> 
> 赞同：1
> 
> 时间：2012-12-31T18:10:50.757
> 
> 标签：xcode, xcode4

在处理包含许多方法的大型类时，快速浏览文件内容非常有帮助。在 XCode 4 中，Jump Bar 的 Document Info 部分是它所在的位置：（请参阅[Is it possible to open jump bar in xcode without mouse?](https://stackoverflow.com/questions/7833614/is-it-possible-to-open-jump-bar-in-xcode-without-mouse)）

我在其他环境中编程过，例如 MonoDevelop 和 Visual Studio，它们也将此列表公开为可停靠面板控件，因此它始终可见。对我来说，这似乎是一个不费吹灰之力的功能，将其隐藏在选择框控件中似乎过于简化。

我知道您可以 Command-Click 跳转栏的末尾以查看排序的列表，并且我知道您可以通过 Control-6 触发它，但是有没有人找到或编写了可以将其作为选项卡放在右侧的扩展程序-side Utilities 面板或左侧导航器区域？

如果没有，是否有可以建议这些功能的地方？XCode 开发人员是否响应用户界面反馈？

# c++ - 如何在 C++ 游戏中处理大量对象

> ID：14104804
> 
> 赞同：6
> 
> 时间：2012-12-31T18:10:53.300
> 
> 标签：c++, game-engine

## 问题

抱歉标题，似乎找不到更短/更好的描述..

情况如下：我正在制作一个简单的游戏，其中有一张大地图（简单，但尺寸非常大）。那张地图上也有很多敌人，但行动完全围绕主角（在一定半径内，占地图的一小部分）。

在每个“滴答”（或步骤，或任何你称之为的）处，每个对象都会调用一个特定的函数来确定它们的下一步动作。出于性能原因，由于我不关心在我的视野范围之外发生的事情（或者至少是非常遥远的事情），我不想在非常陌生的对象上调用该函数。

**如何管理这些对象以确保我始终拥有在地图上移动时更新的附近对象列表？**

（我知道它是用 C++ 标记的，但任何语言都可以——我不是在寻找那么多代码——更多的是关于这个想法）

* * *

## 我已经尝试过的

我尝试了一些替代方案：

*   **备选方案 1：**将我的地图分成“区域”并在每个区域中存储敌人列表。问题是当我在这些区域的边缘和（更糟）我在拐角处（我周围的 4 个不同区域）时会发生什么。此外，如果我从一个区域跑到另一个区域，就更难让敌人切换区域（但我已经想出了一些可行的方法......）
*   **备选方案 2：**每次移动`x`距离时扫描整个地图并刷新活动敌人列表。这要好一些，因为我不必担心像备选方案 1 这样的边界，但我每次都必须扫描整个地图。

我现在正在研究**Alternative 3**，即将这两种解决方案混合在一起。

但是，我想确保没有更明显的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:21:15.330

将您的敌人存储在[kd 树](http://en.wikipedia.org/wiki/K-d_tree)中，并每隔几次迭代进行一次空间范围搜索。但是，您需要一个相当复杂的实现，它支持条目移动和重新平衡 - 有时称为自适应 kd 树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:27:11.797

好的，如果您能回答以下问题，我相信我们中的一些人可以帮助您解决正确的数据结构和过程。地图有多大？实际尺寸？告诉我们一些敌人的密度？平均有多少？我猜你会在每场比赛中使用随机数量的敌人，或者可能会增加每个级别的敌人数量。无论如何您计划拥有的最大敌人数量？

只有当所有角色/敌人都移动而不是围绕主角移动时才会非常好。只有这样才能让游戏真正令人兴奋。我相信你会使用很多随机数来移动，但试着看看如果你能为他们的动作想出简单而现实的算法，而不是完全依赖随机动作。我用了一点随机，他们绝对没有什么有趣的地方。也许你可以慢慢地将那些非常靠近主角移动离得很远的人很快。你可以随着等级的增加增加敌人的速度和力量。尽量让它尽可能的刺激。你可以试试凯撒三世的游戏，看看人的动作有多好，简单的动作但真的很好. 底线是想想你将如何移动敌人，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:42:18.807

200x200 不大。对于每个位置，如果它在范围内，更新敌人将起作用，除非您计划在计算器上运行它，或者希望每秒更新 1000 次。

不要过度设计，保持简单。只需在需要时轻松更改即可。

# ios - iOS 5 多部分 HTTP 流缺少标头

> ID：14104808
> 
> 赞同：2
> 
> 时间：2012-12-31T18:11:12.210
> 
> 标签：ios, ios5, http-headers

我通过 HTTP multipart/x-mixed-replace 响应获取 MJPEG 流。在每个边界之后，还有一组额外的标头，其中包含 Content-Type、Content-Length 和用于录制视频的自定义 X-Date。

在 iOS 6 中，我可以很好地使用 NSURLHttpResponse 并获取我需要提取这些图像的日期和长度的所有标题，但在 iOS 5 中，它似乎缺少我提到的最后两个标题。我在 Wireshark 中验证了服务器正在将这些标头发送到 iOS 6 和 5 设备/模拟器。然而，只有 iOS 5 设备没有注意到它们或其他东西。我想知道这是否不受官方支持，或者是否必须进行更深入的操作才能访问它们。

# java - box2d 联系听众固定装置订单

> ID：14104813
> 
> 赞同：0
> 
> 时间：2012-12-31T18:11:55.063
> 
> 标签：java, box2d

我试图了解它是如何工作的。

在我的游戏中，我使用 box2d 物理，来处理我使用联系人监听器的联系人，例如：

```
ContactListener contactListener = new ContactListener()
{
    @Override
    public void beginContact(Contact contact)
    {
        final Fixture x1 = contact.getFixtureA();
        final Fixture x2 = contact.getFixtureB(); 

        if (x1.getBody().getUserData() != null && x2.getBody().getUserData() != null)
        {                   
            if (x1.getBody().getUserData().equals("player"))
            {                                               
                player.increaseFootContacts();
            }
        }
    } 
```

这里的问题是，这些固定装置有什么顺序吗？(x1 or x2) 经过2次测试，我发现在这种情况下，我的播放器将是x1，而其他对象是x2，我是否也应该检查反向顺序？（如果 x2 是播放器等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:41:09.560

不，不能保证哪个夹具是哪个。您必须检查这两种可能性，如下所示：

```
if ( (userdataA.equals("player") && userDataB.equals("ground")) ||
     (userdataA.equals("ground") && userDataB.equals("player")) )
         player.increaseFootContacts(); 
```

# java - ImageIcon 的 getResources() - java

> ID：14104816
> 
> 赞同：4
> 
> 时间：2012-12-31T18:12:02.643
> 
> 标签：java, imageicon

我的第一个问题：

几天来我一直试图弄清楚这一点，但我到了失去耐心的地步。以下是一些代码和我的项目结构。

**问题：**我怎样才能`getResources()`在 eclipse 中工作并在被导入 jar 之后？

谢谢您的帮助。

```
public enum Icons {
    XXX("src/resoruces/icons/xyz.png");
    private ImageIcon icon;
    Icons(String path) {
       try {
           // will fail miserably in eclipse and after exporting to jar
           URL imageURL = getClass().getClassLoader().getResource(path);
           icon = new ImageIcon(imageURL);
       } catch (Exception e) {
           // works like a char in eclipse and after creating the jar file
           // with the files in the same directory
           System.out.println("getResoruce() did not work");
           icon = new ImageIcon(path);
       }
   } 
```

![项目结构](../Images/bbdb34c86937ff3b8bc0700e1f6cb684.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T19:01:26.140

通常从 Eclipse 导出 JAR 文件时，导出的内容`src/resources`减去路径*名*`src`本身。要从您的 JAR 中加载图像，您可以执行以下操作：

```
InputStream stream = getClass().getResourceAsStream("/resources/icons/xyz.png");
ImageIcon icon= new ImageIcon(ImageIO.read(stream)); 
```

确定的一种方法是检查：

```
jar tvf yourjar.jar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T18:25:00.127

如果 png 文件已打包到 JAR 中与它们在原始 src 目录中相同的位置，则

```
XXX("resources/icons/xyz.png"); 
```

应该产生正确的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:17:19.347

`src`目录在类路径中不可用

```
InputStream imageInputStream = getClass().getClassLoader().getResourceAsStream("resources/icons/xyz.png");
byte[] imageData = org.apache.commons.io.IOUtils.toByteArray(in)

ImageIcon imageIcon = new ImageIcon(imageData, "description about image"); 
```

# excel - 将包含数据的行移到顶部

> ID：14104817
> 
> 赞同：-1
> 
> 时间：2012-12-31T18:12:16.590
> 
> 标签：excel, excel-2003, vba

我想知道是否有人可以帮助我。

为了保持给定的“输入范围”，我正在尝试编写一个脚本，该脚本从用户选择的一行或多行中删除单元格内容。如果填充了从第 7 行开始的“A”列，则将所有包含数据的行移动到我的电子表格的顶部。

我已经整理了下面的代码，该代码从行中删除了单元格内容，但我不知道如何将包含数据的行“向上移动”移动到另一个之下，省略数据之间的任何空白行。

```
Sub DelRow()
    Dim msg

        Sheets("Input").Protect "password", UserInterFaceOnly:=True
        Application.EnableCancelKey = xlDisabled
        Application.EnableEvents = False
        msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
        If msg = vbNo Then Exit Sub
        With Selection
            Application.Intersect(.Parent.Range("A:R"), .EntireRow).Interior.ColorIndex = xlNone
            Application.Intersect(.Parent.Range("S:AD"), .EntireRow).Interior.ColorIndex = 37
            Application.Intersect(.Parent.Range("AF:AQ"), .EntireRow).Interior.ColorIndex = 42
            Selection.SpecialCells(xlCellTypeConstants).ClearContents
        End With
        Application.EnableEvents = True

End Sub 
```

我已经组合了一个如下所示的“排序”宏，虽然这适用于包含数据的两个连续行，但它不适用于我使用了“删除”宏的行。

例如，如果我填充“输入范围”的第一行和第二行，则代码使用“B”列作为排序标准正确地对电子表格进行排序。但是如果我删除第一行的内容，从而创建一个空白行，“排序”脚本不会向上移动第二行。

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Application.EnableCancelKey = xlDisabled
    With Sheets("Input")
        If .Range("A7").Value = "" Then Exit Sub
        .Range("B7:AS400").Sort Key1:=Range("$B$1"), _
        Order1:=xlAscending, _
        Header:=xlGuess, _
        OrderCustom:=1, _
        MatchCase:=False, _
        Orientation:=xlTopToBottom, _
        DatOption1:=xlSortNormal
    End With
End Sub 
```

我只是想知道是否有人可以看看这个，并就我需要如何调整我的代码提供一些指导，以便我可以添加排序功能。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:07:13.033

在互联网上进行更多搜索后，我找到了以下文章： [http ://www.access-programmers.co.uk/forums/showthread.php?t=178521](http://www.access-programmers.co.uk/forums/showthread.php?t=178521)

使用它，我已将我的“删除行”代码修改为以下完美工作：

```
Sub DelRow()
    Dim msg

        Sheets("Input").Protect "handsoff", UserInterFaceOnly:=True
        Application.EnableCancelKey = xlDisabled
        Application.EnableEvents = False
        msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
        If msg = vbNo Then Exit Sub
        With Selection
            Application.Intersect(.Parent.Range("A:R"), .EntireRow).Interior.ColorIndex = xlNone
            Application.Intersect(.Parent.Range("S:AD"), .EntireRow).Interior.ColorIndex = 37
            Application.Intersect(.Parent.Range("AF:AQ"), .EntireRow).Interior.ColorIndex = 42
            Selection.SpecialCells(xlCellTypeConstants).ClearContents
        End With
       Application.EnableEvents = True
            With Range("A7:AS400" & Cells(Rows.Count, "A").End(xlUp).Row)
            .Sort Key1:=Range("B7"), _
            Order1:=xlAscending, _
            Header:=xlNo, _
            OrderCustom:=1, _
            MatchCase:=False, _
            Orientation:=xlTopToBottom, _
            DataOption1:=xlSortNormal
End With

End Sub 
```

非常感谢所有愿意提供帮助的人。

非常感谢，新年快乐。

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:15:16.997

要根据您的代码删除该行，您最好的选择是：

`Selection.Delete Shift:=xlUp`

如果您想确保删除整行，那么您需要：

`Selection.EntireRow.Delete Shift:=xlUp`

至于之后的排序，如果有必要，您应该查看[Range.Sort](http://msdn.microsoft.com/en-us/library/office/ff840646.aspx)

* * *

编辑：如果您想删除该行的一部分，但具体而言，您可以执行以下操作：

`Range(Cells(Selection.Row,5),Cells(Selection.Row,8)).Delete Shift:=xlUp`这会将删除应用于列`E-H`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:44:07.697

尝试将 Header 更改为 xlNo 而不是 xlGuess。Excel 可能会“认为”您有一个标题行，它不会包含在要排序的行中，因此您的空白顶行将保留在那里。

也就是说， `Header:=xlGuess`改为`Header:=xlNo`

# javascript - Kendo UI：TreeView - 添加节点时是否有捕获事件？

> ID：14104821
> 
> 赞同：0
> 
> 时间：2012-12-31T18:12:56.950
> 
> 标签：javascript, kendo-ui, kendo-treeview

我正在尝试通过按需加载在树视图上捕获事件。我要捕获的事件是我手动添加节点时。现在发生的事情是在添加一个节点之后，树视图向服务器请求我要添加到的父级的子级（我忽略它以避免重复问题）。但是，添加节点后，我没有收到任何事件。我在视觉上添加节点之前得到一个事件（requestEnd），但之后没有。我认为扩展事件也会被抛出，但我也没有得到。有什么我可以参与的活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:38:37.493

将新节点添加到 Treeview 时应引发[dataBound事件。](http://docs.kendoui.com/api/web/treeview#databound)

# wcf - 如何维护同一个wcf服务的多个版本

> ID：14104823
> 
> 赞同：5
> 
> 时间：2012-12-31T18:13:02.933
> 
> 标签：wcf

假设我在生产 PC 中运行 wcf 服务。只是指导我需要在代码中添加什么来为我的服务提供版本。

我是否需要分别维护服务合同和数据合同的版本....只需给我一个创建至少两个版本的 wcf 服务的小例子。

如果少数几个客户正在使用我的服务，并且如果我更改任何现有的服务合同方法或向服务合同添加更多方法，那么会发生什么......在这种情况下，客户可以调用我的服务或者他们需要再次创建代理以获取服务合同的更改。如果有人用小的示例代码讨论我的所有观点以清楚地了解这个想法，那将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T10:31:29.440

您需要考虑几件事情。首先，您需要将命名空间添加到您的合同和模式/消息中。为什么？好吧，因为如果版本 1 和 2 具有相似的操作和消息，它们可能会相互冲突。添加命名空间将使代码/客户端知道他正在处理 2 个不同的实现。

其次，您可能想问为什么要更改服务合同。是不是因为需要添加需求操作。或者它是一个全新的功能，可以分离到一个新的 WCF 服务中。如果您想维护版本，请将全新的功能放入新服务中，如果它必须是当前服务的一部分，请复制合同并创建单独的版本。

更改服务合同将破坏当前正在使用该合同的客户端。为服务创建单独的版本将允许您当前的客户端继续使用以前的版本，直到您更新该客户端。所以你会得到这样的东西。

```
namespace MyNamespace.Contracts.V1
{
    [ServiceContract(Namespace = "urn:company:project:servicename:v1")]
    public interface IService
    {
        [OperationContract]
        void RequirementA();
    }
}
namespace MyNamespace.Contracts.V2
{
    [ServiceContract(Namespace = "urn:company:project:servicename:v2")]
    public interface IService
    {
        [OperationContract]
        void RequirementA();

        [OperationContract]
        void RequirementB();
    }
} 
```

两个版本都将单独托管，您的实现也会有所不同。但是，您可以让实现将您的操作委托给某种（业务）控制器，它支持这两个版本，您的流程看起来像这样。

*   V1.IService - V1.Implementation 将调用委托给 MyServiceController
*   V2.IService - V2.Implementation 还将调用委托给 MyServiceController

通过这种方式，您可以让 1 个控制器处理需要执行的任何（业务）逻辑，从而防止任何可能的重复代码。

# c# - 以更好和更快的方式将 IEnumerable 的十进制字段与其他两个字段重新设置基准

> ID：14104824
> 
> 赞同：0
> 
> 时间：2012-12-31T18:13:19.143
> 
> 标签：c#, linq

这里有一个情况，虽然我有几种方法可以解决这个问题，但我非常觉得这不是我现在正在做的最好的解决方法。让我先尝试解释我的问题。从数据库中，我得到一个 NavReturnModelSP 的 IEnumerable，其中 NavReturnModelSP 是一个简单的模型类，例如

```
public class NavReturnModelSP
{
    public string Scheme_Name { get; set; }
    public DateTime Date { get; set; }
    public double ReInvest_Nav { get; set; }
} 
```

现在我需要先按 Scheme_Name 和 Date 对集合进行排序，然后需要将每个 Scheme 和 Date 对值重新设置为 100 的基数，以便从第一个日期开始在方案之间进行适当的比较。**我无法更改数据库输出**。下面是一张图片供您参考，希望它能更好地解释您的问题。

![问题](../Images/1e99de95a4dc00f49ce18bc5c6196ca7.png)

我现在只是通过循环来解决它......其中“数据”是 NavReturnModelSP 的 IEnumerable

```
var preModel = data.OrderBy(x => x.Scheme_Name).ThenBy(x => x.Date).ToList();
var preScheme = "";
var firstNav = 0d;
for (int i = 0; i < preModel.Count(); i++)
{
    if (preModel[i].Scheme_Name != preScheme)
    {
        firstNav = preModel[i].ReInvest_Nav;
        preModel[i].ReInvest_Nav = 100;
    }
    else
    {
         if (preModel[i - 1].ReInvest_Nav != 0) // Just a check, nothing special.
             preModel[i].ReInvest_Nav = 100 * preModel[i].ReInvest_Nav / firstNav;
    }
    preScheme = preModel[i].Scheme_Name;
} 
```

现在，我在 ReInvest_Nav 列中拥有带有重新定位数据的“preModel”。但我觉得我没有使用适当的 CPU 功能，我可以使用并行编程/PLINQ 来最小化时间框架，因为 100000 行循环会很慢。有人可以指导我吗。

谢谢和新年快乐:) 桑杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:39:19.483

试试这个：

```
var preModel = data.GroupBy(x => x.Scheme_Name)
                   .Select(x => new {
                                      Scheme_Name = x.Key, 
                                      Max = x.Max(m => m.ReInvest_Nav), 
                                      Data = x
                                    })
                   .SelectMany(x => x.Data.Select(y => new {
                                       y.Scheme_Name, 
                                       y.Date, 
                                       y.ReInvest_Nav, 
                                       Rebased = y.ReInvest_Nav / x.Max * 100
                                     }))
                   .OrderBy(x => x.Scheme_Name)
                   .ThenBy(x => x.Date)
                   .ToList(); 
```

我不能保证这会更快，但它避免了显式循环。

# php - 尝试在 PHP 中创建随机颜色生成器

> ID：14104828
> 
> 赞同：-1
> 
> 时间：2012-12-31T18:13:45.190
> 
> 标签：php, html, random, generator

```
<?php
$_50Shades = array("#150517", "#250517", "#2B1B17", "#342826");

$randKeys = array_rand($_50Shades, 1);

print_r ("<BODY BGCOLOR=\"$randKeys\">");
?> 
```

这是我使用 php 手册和随机颜色生成器教程整理的代码。我是 PHP 和一般编程的初学者，所以我仍在努力掌握一些东西。结果只是黑屏，而不是生成我输入的随机颜色之一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:16:28.630

`array_rand`返回一个键，而不是实际值。做这样的事情。

```
<?php
$_50Shades = array("#150517", "#250517", "#2B1B17", "#342826");

$randKeys = array_rand($_50Shades, 1);

print_r ("<BODY BGCOLOR=\"".$_50Shades[$randKeys]."\">");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:16:40.720

`array_rand`返回与所选值相对应的*键*，而不是值。

尝试这个：

```
$_50Shades = array(.....);
$randcol = $_50Shades[array_rand($_50Shades)];
echo "<body style=\"background-color:".$randcol.";\">"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:16:16.620

```
$_50Shades = array("#150517", "#250517", "#2B1B17", "#342826");
$randKeys = $_50Shades[rand(0,count($_50Shades)-1)];
print_r ("<BODY BGCOLOR=\"$randKeys\">"); 
```

或者如果您坚持使用[array_rand](http://php.net/manual/en/function.array-rand.php)：

```
$randKeys = $_50Shades[array_rand($_50Shades)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T18:18:20.460

查看[PHP 文档](http://php.net/manual/en/function.array-rand.php)：

> 如果您只选择一个条目，array_rand() 将返回随机条目的键。否则，它返回随机条目的键数组。

# linux - 在解压缩文件时删除文件已解压缩部分的方法？

> ID：14104832
> 
> 赞同：0
> 
> 时间：2012-12-31T18:13:59.513
> 
> 标签：linux, bash, compression, tar, bzip2

我想知道是否有一种方法可以在文件解压缩时删除文件的已解压缩部分。我有压缩文件的外部备份，所以我不担心丢失数据。该文件是bz2。我希望这样做，因为驱动器上只有 50 GB 可用空间，压缩文件为 33 GB。如果我在解压时无法删除文件的某些部分，那么解压后的文件将没有足够的空间。

我可以做其他事情来解决这个问题，但我很想知道我上面提到的是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:19:59.977

通常，无法删除文件的初始部分 - 您只能截断文件的尾随部分。

[然而，较新的 Linux 内核支持使用](http://lwn.net/Articles/414032/)[系统调用](http://lwn.net/Articles/414032/)*在特定文件系统*的文件中打孔。有一个[相应的实用程序](http://manpages.courier-mta.org/htmlman1/fallocate.1.html)可以用于相同的目的，尽管您需要一个相对较新的版本（2.21 或更高版本）来支持该实用程序中的打孔支持。[`fallocate()`](http://lwn.net/Articles/414032/)`util-linux`

请记住，打孔仍然相对较新，[内核错误仍然会弹出](http://comments.gmane.org/gmane.comp.file-systems.ext4/35957)- 您最好只清理文件系统以释放一些空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:58:38.153

如果我理解正确，您希望在压缩文件开头的部分被读取、解压缩和写入后删除。

这通常是不可能的，因为在 Unix 下，如果不重写文件的其余部分就无法删除文件的初始部分（可以在不重写的情况下从末尾*截断*文件，但这并不能解决手头的问题）。*不过，带有漏洞*概念的文件系统可能是一种选择。

但是，也许您可​​以创建更小的压缩文件，例如 33 个 1GB 的压缩文件。然后很容易删除您已经解压缩的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:39:49.397

最明显的解决方案是编写一个过滤器来处理解压缩的输出，在输出中查找您需要的任何内容。

```
bunzip2 -c compressedfile.bz2 | yourfilterprogram 
```

`-c` [指示 bunzip2 解压缩到 stdout](http://www.bzip.org/1.0.5/bzip2.txt)。

使用这种技术，未压缩的文件根本不会存储在磁盘上。

# requirejs - RequireJS 如何从 jam 文件包部分指定 shim 依赖项

> ID：14104835
> 
> 赞同：0
> 
> 时间：2012-12-31T18:14:13.030
> 
> 标签：requirejs, amd, jamjs

我正在一个带有骨干样板的项目中工作，该项目使用 RequireJS 加载模块和 JamJS 来管理它们。我的要求`config.js`文件如下：

```
require.config({
  deps: ["../vendor/jam/require.config", "main"],
  paths: {
    "backbone.localStorage": "../vendor/backbone.localStorage-1.0/backbone.localStorage"
  },
  shim: {
    "backbone.localStorage": {
        deps: ['backbone']
    }
  }
}); 
```

如您所见，来自 jam 配置文件的 RequireJS 加载配置`jam/require.config.js`指定了主干、jquery 和下划线。接下来是一段文件：

```
 "packages": [
        {
            "name": "backbone.layoutmanager",
            "location": "../vendor/jam/backbone.layoutmanager",
            "main": "backbone.layoutmanager.js"
        }
        {
            "name": "backbone",
            "location": "../vendor/jam/backbone",
            "main": "backbone.js"
        }
    ],
    "version": "0.2.11",
    "shim": {
        "backbone.layoutmanager": {
            "deps": [
                "jquery",
                "backbone",
                "lodash"
            ],
            "exports": "Backbone.LayoutManager"
        }
        "backbone": {
            "deps": [
                "jquery",
                "lodash"
            ],
            "exports": "Backbone"
        }
    }
}; 
```

我想要在我`config.js`的主干.localStorare 库中指定取决于包部分中定义的主干。此外，如果我按如下方式指定主干路径，那么它会找到主干库，但会发现一条错误消息，指出未加载下划线：

```
require.config({
  deps: ["../vendor/jam/require.config", "main"],
  paths: {
    "backbone": "../vendor/jam/backbone/backbone",
    "backbone.localStorage": "../vendor/backbone.localStorage-1.0/backbone.localStorage"
  },
  shim: {
    "backbone.localStorage": {
        deps: ['backbone']
    }
  }
}); 
```

我可以使用 jamjs 添加backbone.localStorage 库，但是可用包的版本很旧，所以我更喜欢手动下载最后一个并手动包含。

任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:31:33.763

感谢asgoth，我可以解决问题。我把文件放在下面。

使用此配置，我可以将 shim 库放置在我的`config.js`文件中，这取决于文件中由 jam 管理的包`require.config.js`。

这`config.js`

```
// Set the require.js configuration for your application.
require.config({

  // Initialize the application with the main application file and the JamJS
  // generated configuration file.
  deps: ["../vendor/jam/require.config", "main"],

  // Packeges defined at jam/require.config.js required by shim libraries
  packages: [
    {"name" : "backbone"}, 
    {"name" : "jquery"}
  ],

  paths: {
    // Put paths here.
    "codemirror" : "../vendor/codemirror-3.0/lib/codemirror",
    "codemirror-markdown": "../vendor/codemirror-3.0/mode/markdown/markdown",
    "backbone.localStorage": "../vendor/backbone.localStorage-1.0/backbone.localStorage",
    "bootstrap" : "../vendor/bootstrap-2.2.2/js/bootstrap"
  },

  shim: {
    // Put shims here.
    "codemirror-markdown": {
      deps: ["codemirror"]
    },
    "backbone.localStorage": {
      deps: ['backbone']
    },
    "bootstrap": {
      deps: ['jquery']
    }
  }

}); 
```

这`require.config.js`

```
var jam = {
    "packages": [
        {
            "name": "jquery",
            "location": "../vendor/jam/jquery",
            "main": "jquery.js"
        },
        {
            "name": "backbone.layoutmanager",
            "location": "../vendor/jam/backbone.layoutmanager",
            "main": "backbone.layoutmanager.js"
        },
        {
            "name": "underscore",
            "location": "../vendor/jam/underscore",
            "main": "underscore.js"
        },
        {
            "name": "backbone",
            "location": "../vendor/jam/backbone",
            "main": "backbone.js"
        },
        {
            "name": "lodash",
            "location": "../vendor/jam/lodash",
            "main": "./lodash.js"
        }
    ],
    "version": "0.2.11",
    "shim": {
        "backbone.layoutmanager": {
            "deps": [
                "jquery",
                "backbone",
                "lodash"
            ],
            "exports": "Backbone.LayoutManager"
        },
        "underscore": {
            "exports": "_"
        },
        "backbone": {
            "deps": [
                "jquery",
                "lodash"
            ],
            "exports": "Backbone"
        }
    }
};

if (typeof require !== "undefined" && require.config) {
    require.config({packages: jam.packages, shim: jam.shim});
}
else {
    var require = {packages: jam.packages, shim: jam.shim};
}

if (typeof exports !== "undefined" && typeof module !== "undefined") {
    module.exports = jam;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:20:39.480

Backbone 需要[Underscore 和 jQuery](https://stackoverflow.com/a/10805823/1916258)：

```
shim: {
    "backbone": {
       "deps": [ "underscore", "jquery" ],
       "exports": "Backbone"  //attaches "Backbone" to the window object
    },
    "underscore": {
       "exports": "_"
    }
} 
```

所以我认为你最好调整你的`jam/require.config.js`.

**编辑：**

接下来，`packages`您问题中的部分，这是`jam/require.config.js`? 位置是否相对于 的位置`jam/require.config.js`？

您是否尝试`packages`在自己的 config.js 中添加一个部分：

```
"packages": ["backbone", "backbone.layoutmanager"] 
```

# django - Django get_absolute_url 空白

> ID：14104838
> 
> 赞同：0
> 
> 时间：2012-12-31T18:14:24.400
> 
> 标签：django

我使用 get_absolute_url 方法返回一个 slug 字段，它将在我的 url 中替换。

由于某种原因，返回的值是空白的，

模型.py

```
class Category(models.Model):
    """ model class containing information about a category in the product catalog """
    name = models.CharField(max_length=50)
    slug = models.SlugField(max_length=50, unique=True,
                            help_text='Unique value for product page URL, created automatically from name.')
    description = models.TextField()
    is_active = models.BooleanField(default=True)
    meta_keywords = models.CharField(max_length=255,
                                     help_text='Comma-delimited set of SEO keywords for keywords meta tag')
    meta_description = models.CharField(max_length=255,
                                        help_text='Content for description meta tag')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    #objects = models.Manager()
    #active = ActiveCategoryManager()

    class Meta:
        db_table = 'categories'
        ordering = ['name']
        verbose_name_plural = 'Categories'

    def __unicode__(self):
        return self.name

    @models.permalink
    def get_absolute_url(self):
        return ('catalog_category', (), { 'category_slug': self.slug }) 
```

网址.py

```
urlpatterns = patterns('catalog.views', 
        (r'^$', 'index', { 'template_name':'catalog/index.html'}, 'catalog_home'), 
        (r'^category/(?P<category_slug>[-\w]+)/$',   
            'show_category', { 'template_name':'catalog/category.html'},'catalog_category'),  
        (r'^product/(?P<product_slug>[-\w]+)/$',  
            'show_product', { 'template_name':'catalog/product.html'},'catalog_product'), 

) 
```

目录标签.py

```
@register.inclusion_tag("tags/category_list.html") 
def category_list(request_path): 
    print 'catalog_tags-request_path', request_path
    #active_categories = Category.objects.filter(is_active=True) 
    active_categories = Category.objects.all() 
    return { 
          'active_categories': active_categories, 
          'request_path': request_path 
     } 
```

目录列表.html

```
<h3>Categories</h3> 
<ul id="categories">
{% with active_categories as cats %} 
    {% for c in cats %} 

    <li>
     {% ifequal c.get_absolute_url request_path %} 
          {{ c}}<br /> 
     {% else %} 
          <a href="{{ c.get_absolute_url }}" class="category">{{ c.name }}</a><br /> 
     {% endifequal %} 
     </li>
    {% endfor %} 
{% endwith %} 
</ul> 
```

上述 html 中的 c.get_absolute_url 返回空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:17:39.050

用这个：

```
from django.core.urlresolvers import reverse

def get_absolute_url(self):
    return reverse('catalog_category', kwargs={'category_slug': self.slug}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T02:09:38.883

您是在进行数据输入时要求用户设置 slug 还是从名称字段以编程方式创建 slug？

帮助文本建议后者，但我没有看到代码？您需要覆盖保存方法：

[如何在 Django 中创建一个独特的 slug](https://stackoverflow.com/questions/3816307/how-to-create-a-unique-slug-in-django)

# php - 如何使用 PHP 计算多个 CSV 文件中的值的实例？

> ID：14104839
> 
> 赞同：1
> 
> 时间：2012-12-31T18:14:35.170
> 
> 标签：php, csv

我有一个不断变化的 CSV 文件目录，我希望阅读并计算某个单词在某个“列”中出现的次数。我正在使用以下代码通过单个文件成功完成此操作：

```
$file = 'Some\Random\Directory\myfile.txt');

$fh = fopen($file, 'rb');

$tag = array();

while($col = fgetcsv($fh)) {
    if (isset($tag[$col[2]])) {
       $tag[$col[2]]++;
    } else {
       $tag[$col[2]] = 1;
    }
}
fclose($fh);

$foo = ($tag['foo']);
$bar = ($tag['bar']);
echo $foo; 
```

但是，当我试图用这段代码解析整个目录时，我已经挂断了：

```
$files = glob('Some\Random\Directory\*.txt');
foreach($files as $file){
    $fh = fopen($file, 'rb');

    $tag = array();

    while($col = fgetcsv($fh)) {

        if (isset($tag[$col[2]])) {
            $tag[$col[2]]++;
        } else {
            $tag[$col[2]] = 1;
        }
    }
    fclose($fh);

    $foo = ($tag['foo']);
    $bar = ($tag['bar']);
    $foo_sum = array_sum($foo);    
}
echo $foo_sum; 
```

此代码不会在页面上显示任何内容。如果我删除该`array_sum()`函数并将其`echo`放在循环内，`foo`则会显示 的所有实例，但每个文件一个数字。是什么让我无法获得所有`foo`s 的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:19:40.093

每次循环时都会重置数组。在你的循环之前拉它并在之后评估它

```
$tag = array();
$files = ...;
foreach (...) {
...
}

$foo = ($tag['foo']);
$bar = ($tag['bar']);
$foo_sum = array_sum($foo);    
echo $foo_sum; 
```

如果你只需要`foo`s的计数，你也可以这样做

```
echo $tag['foo']; 
```

不需要`array_sum()`，因为只有一个`$tag['foo']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:25:11.413

试试`$foo_sum += array_sum($foo);`。每次循环时都会覆盖该值。

# python - 加号等于python中的子类

> ID：14104842
> 
> 赞同：0
> 
> 时间：2012-12-31T18:15:07.337
> 
> 标签：python, subclass

我希望能够`+=`与 python 中的子类一起使用。也就是说，我希望能够`+=`在 python 中附加到超类中的值：

```
class a():
  a = 2
class b(a):
  a += 4

b = b()

assert b.a == 6 
```

我知道我可以这样做

```
class b(a):
  a = a.a + 4 
```

但我想以更简洁的方式做到这一点。另外，我似乎无法使用上述内容`super()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T18:25:54.153

你不能做你想做的事。这些是 Python 设计的有意方面。

你不可以做这个：

```
class a():
    a = 2
class b(a):
    a += 4 
```

因为最后一行没有`a`范围。您必须明确说明`a`可以找到的名称空间。

您将找不到使其与`super`. 原因是`super`至少需要一个类型作为参数，但在您想要使用它的点（在 的定义内`b`），`b`还不存在。所以，你不能把它交给`super()`.

最后，你回答了你自己的问题。您正在做正确的事情，因为[显式优于隐式](http://www.python.org/dev/peps/pep-0020/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:25:04.927

@Phil Frost 是对的，你不能使用你想要的直接语法来做到这一点。但是，您可以使用类装饰器。这在定义类之后运行，因此它可以访问超类的变量。但是，您将不得不使用稍微繁琐的语法。这是一种可能性：

```
class InheritedPlus(object):
    def __init__(self, toAdd):
        self.toAdd = toAdd

def addInherited(cls):
    for attr, val in vars(cls).iteritems():
        if isinstance(val, InheritedPlus):
            setattr(cls, attr, getattr(super(cls, cls), attr)+val.toAdd)
    return cls

class A(object):
    x = 2

@addInherited
class B(A):
    x = InheritedPlus(3)

>>> B.x
5 
```

这不允许您使用`+=`，但它确实可以让您获得在基于超类值的子类中创建类属性的效果。更聪明一点，您可以创建一个通用`Inherited()`类来实现各种运算符并存储操作数，以允许`x = Inherited() + 3`.

我认为有一些合法的用例可以在类定义时访问超类属性，这种方法可以解决这个问题。但是，如果您只有一个像示例中那样的简单案例，则可能不值得这种复杂程度，您应该`a.a + 4`明确使用。

# php - Facebook API：将身份验证详细信息从 Javascript SDK 发送到 PHP SDK

> ID：14104843
> 
> 赞同：0
> 
> 时间：2012-12-31T18:15:16.820
> 
> 标签：php, facebook, codeigniter, facebook-javascript-sdk, facebook-php-sdk

我已经在 codeIgniter 中集成了 Facebook 的 PHP SDK 并能够使用它登录。但是一些文章建议使用 Javascript SDK 进行客户端身份验证可以提供更好的性能。
但是，如果我能够使用 JS SDK 成功验证用户身份，那么我将如何将此信息传递给 PHP SDK，以便服务器端代码可以获取登录用户的 Graph 详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:43:39.437

如果我没记错的话，会话是用 cookie 完成的。因此，当您在身份验证后将它们发送到 php 页面时，由 javascript sdk 设置的 cookie 将自动与所有正常标头一起发送到您的服务器，并且 PHP SDK 应该了解它们是已登录的事实脸书用户。玩弄它，看看你得到了什么。

# python - 跨索引数组 Numpy 广播

> ID：14104844
> 
> 赞同：3
> 
> 时间：2012-12-31T18:15:33.557
> 
> 标签：python, numpy, array-broadcasting

我正在寻找一种 Numpy（即希望更快）的方式来执行以下操作：

```
import numpy as np                                                              

x = np.array([1,2,3,4,5],dtype=np.double)                                       
arr = [[1,2],[0,4,3],[1,4,0],[0,3,4],[1,4]]                                 

ans = np.array([ x[item] - x[i] for i, item in enumerate(arr) ]) 
```

我想摆脱列表理解并做这样的事情（虽然，我知道这行不通）

```
x[arr[:]] - x[:] 
```

`arr`始终是长度等于 的长度的整数的嵌套列表`x`。内部列表的长度不一定相同（即`arr`是一个参差不齐的列表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:19:46.770

我已经提出了一个足以满足我使用 Numpy 掩码数组的应用程序的解决方案。在我的应用程序中，`arr`列表不是“过于粗糙”（即任何内部列表的最大长度与任何内部列表的最小长度没有太大区别）。`arr`因此，我先用s填充`-1`，然后根据 s 的位置创建掩码`-1`。我执行我的操作并在结果数组上使用掩码。在这种情况下，有一些额外的计算是不必要的（在填充的条目上），但这仍然比 Python 循环更快（几乎是 2 倍）。示例代码如下：

```
import numpy as np                                                              
import numpy.ma as ma

x = np.array([1,2,3,4,5],dtype=np.double)                                       
arr = [[1,2],[0,4,3],[1,4,0],[0,3,4],[1,4]]                                     

max_arr_length = max([ len(item) for item in arr ])                          

arr_padded = [ np.pad(i,(0,max_arr_length-len(i)), mode='constant', 
    constant_values=-1) for i in arr ]
arr_masked = ma.masked_equal(arr_padded,-1)

ans_masked = ma.masked_array(x[arr_masked] - x[:, None], mask=arr_masked.mask) 
```

这有点骇人听闻，但对我来说效果很好。如果 Numpy 支持不规则数组就好了。

# javascript - 将声音添加到滑块

> ID：14104848
> 
> 赞同：1
> 
> 时间：2012-12-31T18:16:04.140
> 
> 标签：javascript, jquery, audio, web-audio-api

我有 13 张照片，我将它们放入一个滑块中。我想为每个图像附加一个声音，例如，当我到达图像 10 时，声音 10 开始播放。

我对 jQuery 完全陌生，我考虑过使用[Orbit](http://www.zurb.com/playground/orbit-jquery-image-slider)作为滑块，但我不知道如何将声音集成到其中。

有什么简单的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:25:24.633

如果您不需要旧版浏览器支持，请查看 Web Audio API。 [https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)

这是一个例子：[http ://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

```
//call the init function on window load
window.onload = init;
var context;
var bufferLoader;
//create 2 audio sources... as there were 2 in the example linked above
var source1 = context.createBufferSource();
var source2 = context.createBufferSource();

function init() {
  //initialise the audio context
  context = new webkitAudioContext();

  //init preloading of sounds
  bufferLoader = new BufferLoader(
    context,
    [
      '../sounds/br-jam-loop.wav',
      '../sounds/laughter.wav',
    ],
    finishedLoading  // <- callback function when finished loading
    );

  bufferLoader.load();
}

function finishedLoading(bufferList) {
  //set the buffers of the sources from the loaded bufferlist
  source1.buffer = bufferList[0];
  source2.buffer = bufferList[1];

  //connect the sources to the output
  source1.connect(context.destination);
  source2.connect(context.destination);
} 
```

然后，您可以使用您的插件回调函数之一来触发声音，如：

```
$('#featured').orbit({
     afterSlideChange: function(){
       source1.noteOn(0);
       source2.noteOn(0);
     }
}); 
```

像这样的东西应该可以解决问题。

**...还有一些框架可以为您完成一些工作。 [http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)是一个不错的选择。**

# java - 如何在格式化值时避免由 NumberFormat(Locale).format() 方法完成的自动舍入？

> ID：14104856
> 
> 赞同：3
> 
> 时间：2012-12-31T18:17:04.917
> 
> 标签：java, currency-formatting

好的，所以我的问题是.. 当我尝试将数字格式化为货币字符串（例如 10.23 到 $10.23）时，使用 NumberFormat 类的格式方法，它会自动四舍五入该值。当我将日语/韩语语言环境传递给 NumberFormat 的 getCurrencyInstance() 方法时，就会发生这种情况。如果是美国语言环境，一切正常。这是可以清楚地说明问题的片段：

```
 NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.JAPAN);
        BigDecimal bd = new BigDecimal(123.456);
        String str = formatter.format(bd);
        JOptionPane.showMessageDialog(null, str); // Output is coming ¥123 instead of ¥123.456 
```

我不确定我是否遗漏了什么或做了一些不合逻辑的事情。如果没有，那么有没有办法防止这种情况发生？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:20:55.890

看来你需要`setMaximumFractionDigits`设置`NumberFormat`

```
 NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.JAPAN);
    BigDecimal bd = new BigDecimal(123.456);  
    formatter.setMaximumFractionDigits(4); //Replace 4 with whatever value applicable for you.
    String str = formatter.format(bd); 
```

输出：

```
￥123.456 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:06:13.047

南巴里是对的。看看这个：

```
NumberFormat nf = NumberFormat.getCurrencyInstance(Locale.JAPAN);
BigDecimal bd = new BigDecimal(123.456);
String str = nf.format(bd);
System.out.println("" + nf.getMaximumFractionDigits()); //prints out 0
System.out.println(str); 
```

似乎日本的默认小数位数设置为 0。当我对 Locale.US 执行相同操作时，它显然默认为 2。使用 Nambari 的答案和 setMaximumFractionDigits。

至于为什么，感谢@Lee Meador 在评论中指出，日本货币不使用小数位（也就是你可以使用的单一日元）。

来自关于日元的维基百科文章：

*“1953 年 12 月 31 日，面值小于 1 日元的硬币在小额货币处置和支付小数四舍五入法的实施后失效”*

由于我懒得查韩币，我只是假设他们有类似的情况。

# c# - 如何将 Debug.Write 与动态数据一起使用？

> ID：14104865
> 
> 赞同：33
> 
> 时间：2012-12-31T18:17:52.917
> 
> 标签：c#, visual-studio-2010

我正在编写 Adob​​e InDesign 的一些脚本。他们的 COM 实现确实是为 VB 设计的，因此报告数据类型并不严格，偶尔需要使用动态。

我正在尝试调试一段如下所示的代码：

```
foreach (dynamic pi in current.PageItems)
{
    if (pi is TextFrame)
    {
        var frame = pi as TextFrame;
        var str = frame.Contents.ToString();
        Debug.WriteLine(str);
    }
} 
```

这给了我一个像这样的 RuntimeBinderException：

> 附加信息：无法动态调用方法“WriteLine”，因为它具有条件属性

我知道问题在于，使用条件属性，需要处理动态在运行时解析为的类型的代码版本可能已经编译出来，但我明确地将我想要调试的内容转换为字符串，所以我不明白为什么这仍在发生。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-31T18:22:19.230

我猜你被你在`var`这里的使用所咬伤。

我假设`Contents`是`dynamic`。

考虑这个例子：

```
dynamic d = null;
var s = d.ToString(); 
```

`s`不是。`dynamic`_`string`

您需要`object`在调用之前将对象强制转换为`ToString`，或者将结果强制`ToString`转换为 a `string`。关键是在某个时候，某个地方，你需要一个演员来摆脱这个`dynamic`循环。

这就是我解决它的方法：

```
string str = ((object)frame.Contents).ToString();
Debug.WriteLine(str); 
```

或者

```
string str = frame.Contents.ToString() as string;
Debug.WriteLine(str); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-31T18:21:43.660

> 但我明确地将要调试的内容转换为字符串

事实并非如此。

```
var str = frame.Contents.ToString(); 
```

这条线仍然是完全动态的。

您需要将其显式声明为`string`.

`frame`或者，您可以通过显式声明为更早地进行静态化`TextFrame`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T18:23:58.103

没有人这么说，所以我会。

改变

```
 var str = frame.Contents.ToString(); 
```

到

```
 string str = frame.Contents.ToString(); 
```

# django - 在 django 中使用 couchdbkit 访问 couchdb 表单

> ID：14104868
> 
> 赞同：3
> 
> 时间：2012-12-31T18:18:56.890
> 
> 标签：django, forms, couchdbkit

我能够从[couchdbkit 表单 django 扩展成功地重现问候示例](http://couchdbkit.org/docs/django-extension.html)

但是，我基本上复制了相同的示例以使用名为 projects 的现有 couchdb 数据库，但出现以下错误：

异常值：
无异常位置：/usr/lib/python2.7/site-packages/couchdbkit/schema/util.py in wrap, line 29 所以我想知道是什么造成了这个异常

这是我的models.py

```
from django.db import models
# Create your models here.
from couchdbkit.ext.django.schema import *
from couchdbkit.ext.django.forms import *
from datetime import datetime
from couchdbkit import Document
from couchdbkit import *
from couchdbkit.ext.django.forms  import DocumentForm
from couchdbkit.ext.django.forms  import *
class project(Document):
    name = StringProperty()
    type = StringProperty(required=True,default="project")
    created_at = DateTimeProperty(default=datetime.utcnow) 
```

这是我的forms.py

```
from django.db import models
# Create your form here.
from couchdbkit.ext.django.schema import *
from couchdbkit.ext.django.forms import *
from datetime import datetime
from couchdbkit import Document
from couchdbkit import *
from couchdbkit.ext.django.forms  import DocumentForm
from couchdbkit.ext.django.forms  import *
class projectForm(DocumentForm):    
     class Meta:
         document = project 
```

这是我的意见.py

```
# Create your views here.
from django.shortcuts import render_to_response as render
from django.shortcuts import render_to_response
from django.http import HttpResponse
from datetime import datetime
from couchdbkit import Document
from couchdbkit import *
from couchdbkit.ext.django.forms  import DocumentForm
from couchdbkit.ext.django.forms  import *
from django import forms
from django.template import Context, Template
from django.template import RequestContext, loader, Context
from django.http import HttpResponseRedirect
from projects.models import project
from projects.models import Building
from couchdbkit.ext.django.loading import get_db

db = get_db('projects')
class projectForm(DocumentForm):    
    class Meta:
        document = project
class BuildingForm(DocumentForm):    
     class Meta:
         document = Building
def home(request):
    project.set_db(db) 
    greet = None
    if request.POST:
        form = projectForm(request.POST)
        if form.is_valid():
            greet = form.save()
            return render_to_response('dbcontent.html',{'row':db})
    else:
        form = projectForm()
    projects = project.view("projects/all")
    return render("home.html", {
        "form": form,
        "greet": greet,
        "projects": projects,
    }, context_instance=RequestContext(request)) 
```

这是我的 home.html

```
{% extends "base.html" %}
{% load i18n %} 
{% block content %}
            <form contact="/project/" method="post"> {% csrf_token %}
                <table>
                {{ form.as_table }}
                </table>
                <input type="submit" id="submit" value="submit">
            </form>
            {% if greet %}
            {{ greet.get_id }} was added
            {% endif %}
            <h2>Projects</h2>
            <table>
            {% for p in projects %}
                <tr>
                    <td>{{ p.timestamp|timesince }} </td>
                    <td>{{ p.name }} </td>
                    <td>{{ p.type }}</td>
                </tr>
            {% endfor %}
            </table>
        {% endblock content %} 
```

所以 Django 将我 home.html 上的以下行索引为异常的起源

```
{% for p in projects %} 
```

并给我上面提到的错误。

但是请注意，在我的 home.html 中，如果我替换`{% for p in projects %}`为`{% for p in home %}`错误消失了，但只显示了表单，并且没有从 couchdb 检索数据

我非常有信心在我看来这个错误与这个陈述有关 `projects = project.view("projects/all")`

那么我在这里错过了什么？提前致谢，如果您在我的声明中看到一些冗余，我深表歉意。

# c++ - QLabel 在调整大小时切断文本

> ID：14104871
> 
> 赞同：6
> 
> 时间：2012-12-31T18:19:08.057
> 
> 标签：c++, qt, layout, qlayout

我有一个自定义小部件，它具有 QVBoxLayout 的整体布局。它包含几个标签、一个 QFormLayout、一个按钮和一个用来吃掉所有多余空间的拉伸。其中一个标签可能非常大，因此我试图确保不会出现文本不可读的奇怪情况。小部件包含在 QScrollArea 中，以确保如果用户缩小整个窗口，仍然可以看到小部件的所有方面。

QLabel 似乎可以很好地调整大小，但是一旦达到某个狭窄点，它就会切断标签的底部几行并将空间分配给小部件底部的拉伸。

我在没有设计器的情况下在代码中完成这一切，所以我完全有可能只是遗漏了一些东西。子组件按以下顺序添加到整体 QVBoxLayout：

```
OverallLayout = new QVBoxLayout(this);
Title         = new QLabel();
Description   = new QLabel();
SubRegion     = new QFormLayout();
Button        = new QButton();
...
// set text values, wordWrap(true), and Font for labels
OverallLayout->addWidget(Title);
OverallLayout->addWidget(Description);
OverallLayout->addLayout(SubRegion);
OverallLayout->addStrut(MIN_DIST);
OverallLayout->addWidget(Button);
OverallLayout->addStretch(STRETCH_FACTOR); 
```

测试结果：检查 QLabel 的 sizeHint() 函数返回的结果，返回的值似乎没有随着小部件水平收缩而改变。但是，QLabel 确实会扩展以占用更多的垂直空间（153 与 103 的提示），只是不足以容纳所有文本。当 QLabel 首次显示时，它的像素比它的 sizeHint 少，但对于它的 heightForWidth 量仍然足够。当它被调整大小时，它比它的 heightForWidth 量少 30，但比它的 sizeHint 多。

我已经检查过，大型 QLabel 的 hasHeightForWidth() 和 wordWrap() 值设置为 true。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:26:07.187

我最终采用了覆盖小部件`resizeEvent(QResizeEvent *evt)`函数的方法，以便动态设置 QLabel 的最大值。

```
void MyWidget::resizeEvent (QResizeEvent *evt) {
   int newHeight = Description.heightForWidth(Description.width());
   Description.setMaximumHeight(newHeight);
   QWidget::resizeEvent(evt); 
   // Note: I'm not sure if this last step is necessary
} 
```

需要注意的一个有趣的项目是，如果您同时这样做`setMinimumHeight(newHeight)`，`setMaximumHeight(newHeight)`标签将垂直增长以适应文本，但当标签水平增长并且不需要额外空间时它永远不会缩小。我的猜测是`heightForWidth(int w)`返回小部件的 minimumHeight 和实际需要的像素之间的最大值。奇怪的是，它似乎并不关心返回大于当前最大高度的值。

# asp.net - 在 asp.net 中 48 小时后过期确认电子邮件

> ID：14104872
> 
> 赞同：2
> 
> 时间：2012-12-31T18:19:16.317
> 
> 标签：asp.net, email, confirmation-email

我向我的用户发送确认`email`，当他们单击它时，他们的帐户将变为活动状态。我唯一想要的是在 48 小时后使链接失效，并且用户可以再次注册`username`。有谁能够帮助我？这是我的电子邮件代码：

```
 Session["UserName"] = TextBox_email.Text;

   MailMessage msg = new MailMessage();
   StringBuilder bodyMsg = new StringBuilder();

   MembershipUser user = Membership.CreateUser(TextBox_email.Text, TextBox_Pass.Text, TextBox_email.Text);

   Roles.AddUserToRole(TextBox_email.Text, "Author");
   user.IsApproved = false;
   Membership.UpdateUser(user);

 //  StringBuilder bodyMsg = new StringBuilder();

   Guid userID = (Guid)user.ProviderUserKey;

   msg.Subject = "Submission Confirmation";
   bodyMsg.Append("<html><head><img src=" + "http://waag.ir/images/header.jpg" + ">" + "<title>CONFIRMATION EMAIL:</title></head><body>");
   bodyMsg.Append("<br/>");
   string link = string.Format("http://www.waag.ir/Activate.aspx?userID={0}", userID.ToString());
   bodyMsg.Append("Dear " + RadioButtonList_Prefix.SelectedItem.Text + " " + name.Text + " " + middle.Text + " " + lastname.Text + ":<br> Thank you for registering with Avestia Publishing manuscript submission system. To confirm and complete your registration, please follow the link below:</br>" + link + "</br>This link is active for 48 hours. If the link is not visited within this time frame, your registration will be discarded and you will need to register again.</br></br></br>Best regards,</br>Avestia Publishing</br>http://avestia.com");

   msg.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8");
   msg.Priority = MailPriority.High;

   msg.Body = bodyMsg.ToString();
   msg.IsBodyHtml = true;
   msg.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8");
   msg.Priority = MailPriority.High;

   //  msg.ReplyTo = new MailAddress(TextBox2.Text);
   msg.From = new MailAddress("goldenstudio@goldenstudio.ir");
   msg.To.Add(new MailAddress(TextBox_email.Text));
   SmtpClient mailsender = new SmtpClient();

   mailsender.Host = "SmtpClient.goldenstudio.ir";

   mailsender.Port = 587;
   mailsender.EnableSsl = true;
   mailsender.Credentials = new System.Net.NetworkCredential("goldenstudio@goldenstudio.ir", "classaspnet");

   SmtpClient smtp = new SmtpClient();
   //Literal1.Text = "<script>alert(' ')</script>";
   smtp.Send(msg); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:22:46.643

在您的表中添加一列`Users`（我假设您有一个）调用`ConfirmationDueDate`并将其设置为从用户单击`OK`创建帐户开始的 48 小时。当用户单击链接时，如果当前时间超过该`ConfirmationDueDate`值，则将其带回帐户创建页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:23:38.563

您需要在数据库中记录电子邮件的发送时间，然后将该日期与用户单击链接的日期进行比较。因此，例如，您在 2012 年 12 月 31 日 18:22 发送电子邮件，而我在 2013 年 1 月 1 日 18:22 单击链接，则只有 1 天。

您需要将逻辑构建到存储过程或在检查 DateSent 字段的确认页面上运行的 asp.net 代码中

**编辑**
您通过使其仅在特定日期之前有效来使链接“过期”。如果用户在该日期之后尝试使用该链接，则您将其视为已过期并显示相关消息。但是您需要将日期存储在数据库中，在我最初的建议中，我说过要存储您发送电子邮件的日期（在 DateSent 字段中）并与之进行比较，另一个答案建议设置链接到期的日期（在ExpiryDate 字段）。任何一种方法都行得通，它们只是从问题的不同端来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T11:35:49.360

您需要在数据库中记录电子邮件的发送时间，然后将该日期与用户单击链接的日期进行比较。因此，例如，您在 2012 年 12 月 31 日 18:22 发送电子邮件，而我在 2013 年 1 月 1 日 18:22 单击链接，则只有 1 天。

您需要将逻辑构建到存储过程或在检查 DateSent 字段的确认页面上运行的 asp.net 代码中

编辑您通过使其仅在特定日期之前有效来使链接“过期”。如果用户在该日期之后尝试使用该链接，则您将其视为已过期并显示相关消息。但是您需要将日期存储在数据库中，在我最初的建议中，我说过要存储您发送电子邮件的日期（在 DateSent 字段中）并与之进行比较，另一个答案建议设置链接到期的日期（在ExpiryDate 字段）。任何一种方法都行得通，它们只是从问题的不同端来解决问题。

# ruby-on-rails - 更改 Ruby 中的日期格式？

> ID：14104879
> 
> 赞同：0
> 
> 时间：2012-12-31T18:20:03.167
> 
> 标签：ruby-on-rails, ruby

我正在使用 Rails 并尝试导入日志文件。日志的日期格式是`yyyymmdd;hhmmss`：

```
20121216;233550 
```

我的 MySQL 服务器使用它来插入语句：

```
 MM/DD/YYYY HH:MM:SS 
```

如何将此字符串格式转换为日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:29:04.093

```
require 'date'
DateTime.strptime('20121216;233550', '%Y%m%d;%H%M%S').strftime('%m/%d/%Y %H:%M:%S') 
```

没有魔法，真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:26:00.830

假设格式保持固定且不包含错误，您可以创建一个 Time 对象：

```
d="20121216;233550"
Time.mktime(d[0..3], d[4..5],d[6..7],d[9..10],d[11.12],d[13..14]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:26:52.150

如果您使用的是 Rails（加载 ActiveSupport），则该格式似乎可以使用[Time#parse](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse)进行解析：

`Time.parse(source_dt).strftime('%m/%d/%Y %H:%M:%S')`

# javascript - 仅使用 JavaScript 将 Remove Class 添加到 DOM 元素，以及这两种方法中的最佳方法

> ID：14104881
> 
> 赞同：10
> 
> 时间：2012-12-31T18:20:24.733
> 
> 标签：javascript

使用 JavaScript 向 DOM 元素添加类的好方法是什么。并删除也。

我遇到了以下**添加**代码：

1：

```
Element.prototype.addClassName = function (cls) {
    if (!this.hasClassName(cls)) {
        this.className = [this.className, cls].join(" ");
    }
}; 
```

2：

```
document.querySelector(element).classList.add(cls) 
```

他们两个似乎都为我工作。它们之间有什么区别，哪个是最好的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-31T18:53:50.013

**1** . 如果你被**原型**这个词打动，你可能想查看[MDN Docs-Inheritance 和原型链](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)。

**2** . 您提到的第一个代码是向元素添加类的正常跨浏览器方式。
它不是一个函数声明，而是作为一个**方法**添加到**Element**的原型中——这样当你通过它的`id`（好的 ol' JavaScript ）查询一个 Element 时，你可以简单地在元素本身上调用该方法。

**3** . 您发布的第二个代码是根据**新的 DOM 规范**。[**W3 链接**](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#dom-element-classlist)。它只适用于那些实现 DOM Level 4 Specs 的浏览器。它不适用于旧浏览器。

这就是区别。

对于最佳方法，**本机方法始终是最好和最快的**。
所以对于支持的浏览器，`clasList`第二个应该是最好的。不过，根据我的观点，在事情（草案）尚未最终确定之前，您可能需要考虑一种可以跨浏览器工作并与 JavaScript (ECMA-3) 和受支持的 DOM 规范兼容的方法。

一个简单的想法应该是更改`className`在所有新旧浏览器中都可以访问的属性，并将您`class`作为字符串附加到它：

```
var el = document.getElementById(id);
el.className = el.className + " " + cls; 
// mind the space while concatening 
```

当然，您可以添加验证方法，例如`regex`在添加和删除时使用用于修剪空格。

顺便说一句，我得到了您作为第一个示例发布的代码的完整部分：

```
Element.prototype.hasClassName = function(name) {
    return new RegExp("(?:^|\\s+)" + name + "(?:\\s+|$)").test(this.className);
};

Element.prototype.addClassName = function(name) {
    if (!this.hasClassName(name)) {
        this.className = this.className ? [this.className, name].join(' ') : name;
    }
};

Element.prototype.removeClassName = function(name) {
    if (this.hasClassName(name)) {
        var c = this.className;
        this.className = c.replace(new RegExp("(?:^|\\s+)" + name + "(?:\\s+|$)", "g"), "");
    }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-31T18:41:34.953

## 这是jquery的代码。

**[jQuery 的 addClass](http://api.jquery.com/addClass/)**
和**[jQuery 的 removeClass](http://api.jquery.com/removeClass/)**的改编版本

如果您查看 jQuery 源代码，他们就是这样做的。这改编自他们，但几乎完全由 jQuery 编写并且是他们的代码。我不是原作者，我只是展示如何使用一个片段而不是整个库。

jQuery 的 addClass：

```
//This code is jQuery's
function AddClassToElement(elem,value){
 var rspaces = /\s+/;
 var classNames = (value || "").split( rspaces );
 var className = " " + elem.className + " ",
 setClass = elem.className;
 for ( var c = 0, cl = classNames.length; c < cl; c++ ) {
  if ( className.indexOf( " " + classNames[c] + " " ) < 0 ) {
   setClass += " " + classNames[c];
  }
 }
 elem.className = setClass.replace(/^\s+|\s+$/g,'');//trim
} 
```

jQuery 的 removeClass：

```
//This code is jQuery's
function RemoveClassFromElement(elem,value){
 var rspaces = /\s+/;
 var rclass = /[\n\t]/g
 var classNames = (value || "").split( rspaces );
 var className = (" " + elem.className + " ").replace(rclass, " ");
 for ( var c = 0, cl = classNames.length; c < cl; c++ ) {
  className = className.replace(" " + classNames[c] + " ", " ");
 }
 elem.className = className.replace(/^\s+|\s+$/g,'');//trim
} 
```

这是一个工作小提琴：http: [//jsfiddle.net/C5dvL/](http://jsfiddle.net/C5dvL/)

# eclipse - 我无法安装 eclipse jaxb builder 插件

> ID：14104882
> 
> 赞同：1
> 
> 时间：2012-12-31T18:20:37.277
> 
> 标签：eclipse, eclipse-plugin, jaxb

我目前正在使用构建在 Eclipse 版本 3.4.2 上的产品。

我正在尝试安装[jaxb builder](http://www.viewstreet.com/joomla/index.php?option=com_newsfeeds&view=category&id=39&Itemid=80)插件，但它不起作用。

到目前为止，我已经尝试过：

*   将文件夹解压缩到 Eclipse 插件文件夹中，然后重新启动 Eclipse
*   使用 -clean 标志重新启动 Eclipse
*   将文件夹解压缩到产品的（构建在 Eclipse 上）插件文件夹中，然后使用和不使用 -clean 重新启动
*   将文件夹解压缩到 dropins 文件夹中，然后重新启动 Eclipse

我认为这个版本的 jaxb builder 可能不支持我的 Eclipse 版本，但我不知道如何找到该信息。我尝试通过电子邮件将“联系我们”页面上的地址发送给我，但它马上就回来了。

该产品是否可能已停产？我怎样才能知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:20:19.603

原来是应用程序的错。我不完全确定问题出在哪里，但是当我在常规 Eclipse 环境中执行完全相同的操作时，它没有出现任何问题。

如果我得到更多信息，我会编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:56:48.093

停产？我不知道，但最后一次构建是从 2011 年 5 月开始的。它是针对 Eclipse 3.4 构建的（请参阅 plugin.xml）。“不工作”是什么意思？例外？Eclipse 错误日志/视图中的条目？

# codeblocks - 代码块没有运行

> ID：14104883
> 
> 赞同：1
> 
> 时间：2012-12-31T18:20:42.807
> 
> 标签：codeblocks

我使用 ubuntu 12.1 64db，我安装了代码块，但是当我运行一个项目“c project”时，它给了我“这个项目似乎还没有构建，你想现在构建它吗？” 当我单击是时，它会提供链接控制台可执行文件：bin/Debug/test /bin/sh: 1: g++: not found

那么我该如何运行这个项目呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:22:30.837

我假设你想执行你的代码。在这种情况下，当你想要`run`它时，你必须首先单击是来构建项目。因为您必须首先将代码编译并链接到最终的可执行文件中才能运行。

编辑：他没有`g++`>。>

安装`g++`，`sudo apt-get install g++`应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T13:14:55.870

> --1。首先**下载MinGW**：[https](https://sourceforge.net/projects/mingw/) ://sourceforge.net/projects/mingw/ [][1]

```
 [1]: https://i.stack.imgur.com/XJndz.png 
```

> --2。双击**mingw-set-up.exe**并按**Install**。[][1]

```
 [1]: https://i.stack.imgur.com/Pz5Jf.png 
```

> --3。**不要更改**安装目录并按**继续**

```
 [1]:https://i.stack.imgur.com/boOGj.png 
```

> --4。**等**安装好了...

```
 [1]: https://i.stack.imgur.com/8WCnJ.png 
```

> --5。然后按**继续并再次等待**..

> --6。**标记所有**要安装的文件

```
 [1]: https://i.stack.imgur.com/qtq08.png 
```

> --7。去：**安装->应用更改**。再次按**应用**并**等待**下载包。

```
 [1]: https://i.stack.imgur.com/mNvtB.png 
```

> --8。按**“自动关闭对话，..”**并**等待**...

```
 [1]: https://i.stack.imgur.com/65efE.png 
```

> --9.你可以关闭MinGW。

> --10.复制新MinGW bin文件的地址，应该是C:\MinGW\bin

> --11.右键单击**开始**并按**系统**

> --12。按**高级系统设置**-->**环境变量**

```
 [1]: https://i.stack.imgur.com/Pr2sL.png
   [2]: https://i.stack.imgur.com/TZ1oK.png 
```

> --13。在**系统变量**中单击**路径**，然后单击**编辑**。

```
 [1]: https://i.stack.imgur.com/9pCEO.png 
```

> --14。然后按**New**并将文件 MinGW 中的文件“bin”的地址粘贴到 Documents 中（步骤 10），应该是 C:\MinGW\bin。然后按 OK-->OK-->OK。

```
 [1]: https://i.stack.imgur.com/pQmFF.png 
```

> --15。打开**cmd**。我的意思是右键单击您的开始并按命令提示符。编写
> **g++ --version**并按 Enter。[如果是这样你没有问题][1]

```
 [1]: https://i.stack.imgur.com/a52LH.png 
```

> --16。**打开 Codeblocks**去**settings-->Compiler**。**选择**“GNU GCC 编译器”。

```
 [1]: https://i.stack.imgur.com/hU9pB.png 
```

> --17。转到**工具链执行文件**并填写屏幕截图中的空白。文件必须在 C:\MinGW\bin 的本地磁盘中，从那里选择。

警告！！！！此屏幕截图适用于 32 位系统。我不确定 64 位系统。[32 位系统][1]

```
 [1]: https://i.stack.imgur.com/8JJh0.png 
```

> --18。**如果您有 64 位，请** **不要**执行第 17 步并尝试是否有效。如果无效，请执行第 17 步。如果再次无效，请尝试放置文件（到“C 编译器”、“c++ 编译器”和“链接器”对于动态 li")，其名称与屏幕截图中的文件几乎相同。

# java - HashMap 上的 NegativeArraySizeException

> ID：14104897
> 
> 赞同：4
> 
> 时间：2012-12-31T18:22:40.697
> 
> 标签：java, hashmap

由于某种原因，我的程序`NegativeArraySizeException`在运行一段时间后突然抛出一个。抛出它的代码在我在抛出异常之前输入的命令后面。

我使用的代码主要用于调试目的，如下所示：

```
final HashMap<String, Integer> busy = new HashMap<>();
//this map gets filled and emptied in threads

System.out.println("Busy tables: " + Arrays.toString(this.busy.keySet().toArray()));
System.out.println("Time busy: " + Arrays.toString(this.busy.values().toArray()));
//map gets read (from the input handler thread) 
```

异常会在第一`System.out.println()`行抛出，但我可以想象如果它继续运行，它也会被抛出到另一行。

可能是某种线程问题还是原因可能在其他地方？

谷歌（多年来第一次）没有给我任何可用的结果。Set 怎么会有一个负大小呢？

编辑：例外：

```
Exception in thread "Thread-1" java.lang.NegativeArraySizeException
    at java.util.AbstractCollection.toArray(Unknown Source)
    at nl.lolmewn.statsglobal.Main.handleInput(Main.java:61)
    at nl.lolmewn.statsglobal.Main.access$000(Main.java:20)
    at nl.lolmewn.statsglobal.Main$1.run(Main.java:200)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T18:34:03.393

如果没有有关您的代码的更多信息，我会认为对`HashMap`对象的不受保护的多线程访问是主要嫌疑人。[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，相反[`Hashtable`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)，*不*同步，需要显式锁才能在多线程环境中工作，直接或通过通过`keySet()`or返回的集合`entrySet()`。

由于处于不一致的内部状态，否则会产生许多*有趣*的副作用。`HashMap`我建议使用调试器来中断该异常并更好地了解正在发生的事情。

# java - Struts 2 向 struts.xml 添加一个动作

> ID：14104903
> 
> 赞同：1
> 
> 时间：2012-12-31T18:23:47.530
> 
> 标签：java, eclipse, struts2

我想向我添加一个动作，`struts.xml`但是当我这样做时，我的 webapp 停止工作，我不知道为什么。我在这里发布了我的 webapp 的一些细节。

`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>ILIMobileLeborgne</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <filter>
   <filter-name>struts2</filter-name>
   <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

`struts.xml`（在 Eclipse 的 src 文件夹中）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

<constant name="struts.devMode" value="true" />
<constant name="struts.custom.i18n.resources" value="ilimobile" />

<package name="ilimobile" namespace="/" extends="struts-default">

    <action name="index">
        <result>/index.jsp</result>
    </action>

    <action name="registerIllimite">
        <result>/registerIllimite.jsp</result>
    </action>

      <!-- When i try to do add the following action my app doesn't working, the browser said me that the ressource asked is unavailable and when i delete it my (little) app works correctly -->
    <action name="registerClientInfo"  class="action.SubscribeAction">
        <result name="success">/paiement.jsp</result>
    </action>

</package>

</struts> 
```

我的订阅操作（在源文件夹的操作包中）：

```
package action;

import model.*;

import com.opensymphony.xwork2.ActionSupport;

public class SubscribeAction extends ActionSupport {
private Client client;
private String abonnement;

public String getAbonnement() {
    return abonnement;
}

public void setAbonnement(String abonnement) {
    this.abonnement = abonnement;
}

@Override
public String execute() throws Exception {
    // TODO Auto-generated method stub
    return SUCCESS;
}

public Client getClient() {
    return client;
}

public void setClient(Client client) {
    this.client = client;
}
} 
```

我的 JSP 页面使用了定义的动作：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%> 
<%@ taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Insert title here</title>
 </head>
 <body>
<s:form action="registerClientInfo">
    <s:textfield key="client.nom"/>
    <s:textfield key="client.prenom"/>
    <s:textfield key="client.email"/>
    <s:textfield key="client.adresse"/>
    <s:textfield key="client.ville"/>
    <s:textfield key="client.cp"/>

    <s:submit/>
</s:form>
 </body>
</html> 
```

如果你需要一些额外的信息问我，但我想你可以明白为什么我的应用程序不想工作：/我很确定这只是一个小错误，但我找不到它......

谢谢大家，祝大家新年快乐：）

（对不起我的英语我是法国学生^^）

编辑：我在这里发布了 Eclipse 堆栈跟踪，它告诉我他找不到我的动作类，但我不知道为什么：/我有一个我的老师制作的 struts 示例，我认为他没有做一些在 Eclipse 上使用 tomcat 服务器部署应用程序的额外步骤

堆栈跟踪：

```
Unable to load configuration. - action - file:/home/blackmario/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ILIMobileLeborgne/WEB-INF/classes/struts.xml:20:68
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Caused by: Action class [action.SubscribeAction] not found - action - file:/home/blackmario/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ILIMobileLeborgne/WEB-INF/classes/struts.xml:20:68
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:480)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:424)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:541)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:290)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:239)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    ... 18 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:01:38.920

因此，听起来您的应用程序在添加该操作时无法启动，对吗？没有任何效果，即使是以前有效的。因此，您应该查看正在使用的 servlet 容器的日志。没有什么比找到日志所在的位置并熟悉它们更重要的了。

当您查看日志时，我猜您会看到

1) 一个错误，抱怨 struts.xml 的语法不好，应用程序在尝试解析它时失败。

或者

2) ClassNotFoundException 因为该操作的类文件不在应用程序的类路径上。如果是这种情况，请确保该操作的类文件实际上已放入 WAR 文件的 WEB-INF/lib 或 WEB-INF/classes 目录中；这就是 webapp 的类加载器查找类文件的地方。如果您对此不太了解，则应该阅读有关[Java Servlets](https://stackoverflow.com/questions/704313/brief-idea-about-servlets)的更多信息。

这两种情况都可能导致应用程序无法成功启动。您必须查看日志；他们几乎总是会告诉您该应用程序存在特定问题。如果您在此论坛上询问该特定问题，您将得到非常有用的答案。否则，我有点猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:06:59.520

尝试改变

```
<action name="registerClientInfo"  class="action.SubscribeAction">
    <result name="success">/paiement.jsp</result>
</action> 
```

至

```
<action name="registerClientInfo"  class="SubscribeAction">
    <result name="success">/paiement.jsp</result>
</action> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T19:20:36.847

默认情况下，`.action`扩展由`struts-default`您扩展的包使用。当您将`url`放在浏览器中时，请确保您使用了正确的`url`.

# java - 如何通过 JPA 将数据插入到具有复合主键的表中？

> ID：14104906
> 
> 赞同：0
> 
> 时间：2012-12-31T18:24:10.430
> 
> 标签：java, jpa, insert, composite-primary-key

用户表

用户名 pk fname lname

群主

组名 pk 用户名 pk, fk

我想在 GroupMaster 中插入数据，但我的问题是它有复合主键

如何通过实体管理器对象在表中插入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:29:52.870

这可以通过`@Embeddable`注释来完成。设置一个包含主键值的新类——在本例中，一个带有`GroupName`和`UserName`字段的类，用 注释该类，然后在需要主键的 中`@Embeddable`存储一个实例。`@Entity`

看看下面的例子：

[在 Hibernate 中使用复合键](http://java-aap.blogspot.com/2006/04/hibernate-annotations-composite.html "在 Hibernate 中使用复合键")

# javascript - 通过 JSP 或 JS 进行 Hibernate 和 SQL 2008 连接的前端

> ID：14104907
> 
> 赞同：5
> 
> 时间：2012-12-31T18:24:13.133
> 
> 标签：javascript, hibernate, jsp, jndi

我正在开发`GWT`用作前端和`Hibernate 4.0`框架的应用程序。我正在使用**SQL 2008 (R2)。**我的应用程序纯粹是数据库驱动的。并且该应用程序将使用不同的数据库同时在多个门户网站上启动。现在，我面临的问题是，我必须为每个 Portal 部署尽可能多的数据库。Hibernate 有什么方法可以使其可配置？意味着在输入**数据库名称、数据库用户名和数据库密码**后加载我的主页后，它会连接到数据库。

我还会通知您，我的**主页**已加载到`JSP`. 登录后它正在调用**GWT Entrypoint**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:49:13.140

正如@ToddMurray 在评论中所说，您应该使用可配置的 JNDI 数据源。这是使用 JBoss 等容器的首选方式。有关配置示例，请参见[此处](https://stackoverflow.com/questions/5303671/configure-hibernate-to-connect-to-database-via-jndi-datasource)。

另一种方法是使用 Hibernate 属性：阅读[此处](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-hibernatejdbc)的文档。

# android - 如何在 WebView 中显示 Google Play 商店条目

> ID：14104908
> 
> 赞同：1
> 
> 时间：2012-12-31T18:24:17.570
> 
> 标签：android, google-play

我在浏览器中看到了这个链接：https: [//play.google.com/store/apps/details?id=com.instagram.android](https://play.google.com/store/apps/details?id=com.instagram.android)

我可以将它加载到 WebView 中，但这种体验并不理想，因为

1.  用户必须登录才能安装应用程序
2.  如果用户有多个绑定到他的帐户的 Android 设备，他必须选择发送应用程序的哪一个。
3.  该网站不适合移动设备

我希望将 Google Play 体验封装到一个 WebView 中……或者只是一个可以放入我的 Activity 的视图，以便我可以为用户提供一个“取消”按钮并返回到我的应用程序中的另一个 Activity。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:36:56.383

Play 商店并非旨在嵌入到应用程序中。

`ACTION_VIEW` `Intent`欢迎您为此使用`Uri`（或`market://`等效的）并`startActivity()`打开 Play 商店应用程序以查看所需应用程序的列表。

# excel - VBScript 可以在 Excel 的受保护工作表上运行吗？

> ID：14104911
> 
> 赞同：0
> 
> 时间：2012-12-31T18:24:52.277
> 
> 标签：excel, vbscript, protection, wsh, vba

我正在使用 VBScript 在同一工作簿的不同工作表上进行大量计算。现在一个问题是，如果有人以某种方式删除了任何工作表，那么该脚本将导致大量数据丢失。有什么方法可以保护它免受用户的侵害吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:00:56.583

（确保您阅读了此答案末尾的编辑）

我制作了类似的工作簿，使用数据库等工作表，所以我理解您对保护信息的担忧。如果您正在保护工作簿，它将阻止您的宏对工作表/书籍执行某些更改。但是，如果您只想保护工作表内容，则可以使用设置 UserInterfaceOnly，这将允许您的宏自由运行，同时仍保护工作表免受用户的侵害。您可以检测纸张在打开时是否受到保护，如果没有，则保护它们。

```
Sub test()

dim mySheet as worksheet
dim myPass as string

myPass = "password"
set mySheet = Excel.ActiveSheet
if mySheet.ProtectContents = False then
   mySheet.Protect Password:=myPass, UserInterfaceOnly:=True
end if

'Enter your code here

mySheet.Unprotect Password:=myPass

End Sub 
```

此外，如果您希望用户能够在收到警告后取消保护工作表，则可以使用自定义 UI 编辑器从审阅选项卡中删除保护/取消保护工作表组，然后将其替换为自定义按钮。我过去做过这个，它实际上对以后维护床单很有帮助。我在下面的自定义 UI 编辑器中包含了几个链接。

*   [自定义 UI 编辑器下载](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2006/05/26/customuieditor.aspx)
*   [自定义 UI 编辑器教程 - 在 Excel 2007 或 2010 中更改功能区](http://www.rondebruin.nl/ribbon.htm)

编辑：

乍一看，我认为这个问题与 VBA（我的错）有关。我相信上面的代码仍然可以应用，只需将代码放在标签中并正确设置工作簿和工作表变量（而不是上面设置的方式）。如果您还不知道如何设置/引用您的工作簿/工作表对象，[此论坛帖子将](http://www.visualbasicscript.com/VBScript-amp-Excel-m32435.aspx)展示如何设置/引用您的工作簿/工作表对象。虽然我通常不使用 VBscript，但论坛看起来是正确的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T22:36:05.933

我nw这是几年前的事了，但是我在寻找答案时遇到了它，希望有人对此有所帮助。

首先向您的工作簿添加密码，这样其他用户只能以只读方式打开。

[http://www.k2e.com/tech-update/tips/728-tips-adding-a-password-to-make-an-excel-workbook-read-only](http://www.k2e.com/tech-update/tips/728-tips-adding-a-password-to-make-an-excel-workbook-read-only)

然后在打开 excel 文件时作为 vbscript 的一部分

```
Set oExcel = CreateObject("Excel.Application")
Set oWorkbook = oExcel.Workbooks.Open(file.path,,,,"password","password",True,,True,True) 
```

可以在此处找到完整的开关列表：http: [//msdn.microsoft.com/en-us/library/office/ff194819%28v=office.15%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff194819%28v=office.15%29.aspx)

希望对您有所帮助，我花了几个小时才弄清楚这一点。

# sql - 使用 WebMatrix Razor 将 HTML 代码插入数据库 SQL

> ID：14104912
> 
> 赞同：2
> 
> 时间：2012-12-31T18:24:55.473
> 
> 标签：sql, html, webmatrix-2, razor-2

我在数据库中的专栏是：`nvarchar(MAX)`

我需要将 HTML 代码添加到我的数据库中：从`CKEditor`. 我收到以下错误。

```
A potentially dangerous Request.Form value was detected from the client (Description="<h1>Heding 1&nbsp;</..."). 
```

我正在使用以下代码：

```
var String=Request["String"]; 
```

我什至使用了以下内容：

```
 var String= HttpUtility.HtmlEncode(Request["String"]);
String=Request["String"]; 
```

这是我的代码的一部分：

```
 if(IsPost){
    var Description =Request.Unvalidated["Description"];
    // Here I insert into Database 
```

和 FORM 部分是：

```
<form action="" enctype="multipart/form-data" method="post">
<div class="row">
    <div class="two columns offset-by-two"><br/><label> Description: </label><br/></div>
    <div class="eight columns"><textarea name="Description"></textarea></div> 
```

我想将“描述”中的文本存储到我的数据库中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:32:18.993

如果您不希望在 ASP.NET 网页框架中启动 ASP.NET 请求验证，您只需使用 Request.Unvalidated 来引用包含 HTML 的输入：

```
var text = Request.Unvalidated["myTextBox"]; 
```

或者：

```
var text = Request.Unvalidated("myTextBox"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:34:26.803

看起来`HtmlEncoding`应该可以解决问题。

您是否尝试过以下操作：

```
var myColumnData = HttpUtility.HtmlEncode(Request["String"]); 
```

然后将此 myColumnData 和所有其他列传递给您的数据库表。

**编辑：**除上述内容外，您可能还想查看项目设置，正如以下博客中所推荐的那样 -[从客户端检测到潜在危险的请求值](http://geekswithblogs.net/renso/archive/2011/08/26/a-potentially-dangerous-request-value-was-detected-from-the-client.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T12:50:23.067

这对我有用。

var text = Request.Unvalidated["myTextBox"];

谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T07:05:14.550

安全规则.....在将其推送到数据库之前，我建议您过滤掉可疑标签，例如脚本标签。

```
var x = Request.Unvalidated("MyField");

if(x.Contains("<script>") || x.Contains("</script>")){
    //no script tag allowed.
} 
```

# youtube-api - 列出 YouTube API 3.0 中视频的所有评论

> ID：14104914
> 
> 赞同：4
> 
> 时间：2012-12-31T18:25:00.683
> 
> 标签：youtube-api

是否可以使用新的（实验性）YouTube API v 3.0 获取视频的所有评论？

我只找到了如何获取来自给定帐户的“活动”（在他们的术语中，评论是一种活动）。

api 页面显示 api 功能不完整，因此很有可能功能尚未提供。虽然我可能只是错过了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:57:16.857

不支持使用 API v3 检索评论。我们目前无法承诺添加对读/写评论的支持，因此如果您的应用程序依赖它们，则需要使用 v2。

# php - 查询结果错误

> ID：14104920
> 
> 赞同：3
> 
> 时间：2012-12-31T18:25:18.240
> 
> 标签：php, mysql

我有这个简单的查询

```
SELECT * 
FROM  `book` 
WHERE  `BookID` =  '7u'
LIMIT 1 
```

我期待空结果但我看到一个结果，书 id = 7。BookID 是自动递增的。为什么查询忽略'u'字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:27:16.183

因为`7u`不是数字，所以显然 mysql 忽略了`u`.

也许您正在考虑一些使用后缀来限定数字类型的高级编程语言？在 C 派生语言中，7u 将是一个值为 7 的无符号整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:00:53.293

仅仅因为两个原因：

1.  可能只有一个记录。

2.  您使用的是 LIMIT 1。它只显示输出中的一条记录。所以使用限制 5 或 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:34:38.583

mysql 将字符串视为 7u，因此当您尝试执行此操作时，它会在字符串中进行转换，但 mysql 未处于严格模式，因此它将字符串转换为整数，因为您的 id 是整数，并且其 7u 的舍入变为 7，这就是它显示的原因一条记录尝试不带引号 7u 而不是 '7u' 然后它给出错误

# c# - 在回发时访问动态添加的控件

> ID：14104927
> 
> 赞同：2
> 
> 时间：2012-12-31T18:26:20.283
> 
> 标签：c#, asp.net

我正在尝试获取`Control`导致回发的动态。所有`Controls`都被动态添加到`Panel`.

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
    <asp:Panel runat="server" ID="panel"></asp:Panel>
</asp:Content> 
```

我已经读过以下两种方法应该找到回发`Control`（此时我不关心`Buttons`导致回发，但会）。

```
private Control GetPostBackControl()
            {
            Control toReturn = null;
            string controlName = page.Request.Params.Get("__EVENTTARGET");
            if (!String.IsNullOrEmpty(controlName))
            {
                toReturn = RecurseControls(this.Page, controlName);
            }
           return toReturn;
    }

 private Control RecurseControls(Control root, String toFind)
        {
            String s = root.UniqueID;
            if (root.UniqueID == toFind)
            {
                return root;
            }
            foreach (Control c in root.Controls)
            {
                Control t = RecurseControls(c, toFind);
                if (t != null)
                {
                    return t;
                }
            }
            return null;
        } 
```

单步执行调试器时，递归会找到面板，但其中没有子面板`Controls`。`Controls`我假设我对这些方法如何工作的理解最初是关闭的，并且在为此重新创建它们之前找不到动态添加的`Post`。如果是这种情况，是否有另一种方法可以找到`Control`触发回发的动态？如果没有，有没有办法让页面在`Control's` `EventHandler`?

请注意，我使用的是母版页。我是否使用我发布的递归方法，或者`RecurseControls(this.Master, toFind);`我仍然没有看到`Panel's`child `Controls`。 `GetPostBackControl()`也称为内`Page_Init()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:17:14.877

通常，动态添加的控件需要在每次服务器往返时重新添加。维护 ViewState 的控件的控件内容除外。确保在加载 ViewState 之前发生的 PageInit 期间添加您的控件。

然后你可以简单地引用你的控件来获取它们的内容、值、选定的索引等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:42:54.080

如果您只需要查找在任何动态添加的控件上输入的值，您总是可以通过简单地访问`Request.Params`集合来找到这些值。例如，如果你动态添加一个名为“MyTextBox”的TextBox控件，当页面回传时，无论该控件是如何添加的，Request.Params["MyTextBox"]都会有用户输入的值；再次，只要您为控件分配名称。

快速示例：

```
TextBox b= null;
for (int i = 0; i < 4; i++)
{
      b=new TextBox();
      b.ID="textbox"+i;
      //asp.net will assign the name the same as the ID of the element
      placeHolder.Controls.Add(b); //placeHolder is the container for all dynamically-added controls
} 
```

当页面回发时，您可以获得例如在“textbox1”上输入的值，如下所示：

```
if (IsPostBack)
{
    Response.Write(Request.Params["textbox1"]);
} 
```

最后，递归迭代以找到一个控件是非常低效的。随着更多控件添加到页面，性能呈指数级下降。小心，如果您仔细构建页面而不是搜索整个页面，您只需搜索父容器，几乎总能在 O(1) 或至少 O(n) 中找到一个控件。

# android - 居中 AChartEngine 表盘图

> ID：14104929
> 
> 赞同：2
> 
> 时间：2012-12-31T18:26:52.683
> 
> 标签：android, android-layout, achartengine

我完全迷失在这里。它应该很简单，但我不能在我的布局中居中来自 AChartEngine 的拨号图表。

我正在严格按照演示示例进行操作，但它仍然对我不起作用，而且我没有想法！

我最后的布局测试如下：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="horizontal" >
<TextView
    android:id="@+id/txt"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:text="TEST-TEST" />

<LinearLayout
    android:id="@+id/graph1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center" />
</LinearLayout> 
```

我得到一个完美居中的“TEST-TEST”文本和右侧的刻度盘，但大约是屏幕尺寸的 55%，明显位于它应该居中的左侧。由于边距，它实际上并没有被剪辑到第二个布局（我也在使用演示版）。

如果我将图表更改为另一个文本视图，我会得到它完全居中的预期。

任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:26:05.403

尝试添加此调用：

```
renderer.setInScroll(true); 
```

这在将图表视图添加到自定义布局时会有所帮助。

# colors - HSB / HSV 的所有 3 个通道是否需要相同的精度？

> ID：14104930
> 
> 赞同：1
> 
> 时间：2012-12-31T18:26:57.890
> 
> 标签：colors

在 RGB 中，所有 3 个通道通常都是 8 位的，这意味着它们都同样“精确”。

如果我也想以 24 位存储 HSB / HSV（用于颜色操作 / 艺术创作，而不是渲染），所有通道是否也同样重要，或者为 H 提供更高的精度不是更有意义吗？说 10/7/7 位而不是 8/8/8 位？或者可能是 9/8/7 或 9/7/8 位？

或者，我可以使用 32 位，但我真的负担不起每个通道使用一个浮点数，这在 HSB 中很常见。并且 32 不能被 3 整除，所以我仍然需要不同的通道位深度。

换句话说，每个通道的位深度组合映射到最大数量的 RGB 颜色，因为这是它在渲染时必须映射到的？

# javascript - JavaScript：动态执行跟踪代码

> ID：14104933
> 
> 赞同：0
> 
> 时间：2012-12-31T18:27:17.350
> 
> 标签：javascript, jquery, ajax, tracking, wizard

我有一个从`Step 1`to收集数据的向导`Step 6`。现在，根据收集的数据，最终的消息传递和可用资源会发生变化......但我想弄清楚的是根据结果执行一些 JavaScript 的最佳方式......但没有页面加载，我不知道如何做到这一点。

```
<script type="text/javascript" src="https://asd.mydomain.com/a.aspx?o=5969&st=1000&**result=0002**"></script> 
```

如您所见，`result`参数需要根据用户在向导期间选择的内容进行更改...但是由于此块是在页面加载时呈现的，因此如何动态执行调用？jQuery AJAX？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:35:39.630

多种选择：

动态添加脚本标签

```
function pingValue (value) {
    var script = document.createElement("script");
    script.src = "https://asd.example.com/a.aspx?o=5969&st=1000&result=" + value;
    document.body.appendChild("script");
} 
```

只需用图像调用它

```
function pingValue (value) {
    var img = new Image();
    img.src = "https://asd.example.com/a.aspx?o=5969&st=1000&result=" + value;
} 
```

覆盖现有元素

```
function pingValue (value) {
    var script = document.getElementById("myScriptId");
    script.src = "https://asd.example.com/a.aspx?o=5969&st=1000&result=" + value;
} 
```

进行 Ajax 调用是另一个或 jQuery 有[getScript()](http://api.jquery.com/jQuery.getScript/)

# ajax - Grails remoteLink ajax 问题填充 JQuery 手风琴

> ID：14104934
> 
> 赞同：0
> 
> 时间：2012-12-31T18:27:19.363
> 
> 标签：ajax, jquery-ui, grails, grails-2.0

遵循 Jquery 中的简单示例：[手风琴示例](http://jqueryui.com/accordion/#collapsible)

使用`remoteLink`来自 grails ( **AJAX** ) 的函数，信息从控制器中拉回并发送回 GSP，这工作正常。但是，我确实希望将这些数据放置在 Accordion 容器中...单击此处查看当前功能的[屏幕截图](http://d.pr/i/pi3z)。

（事件创建页面渲染表单模板）_form - GSP：

```
<g:remoteLink controller="event"  action="showContacts" method="GET" update="divContactList">Show Contacts!</g:remoteLink>

<div id="divContactList">
     <g:render template="contactListAjax" model="[contactList: contactList]" />
</div>

<script type="text/javascript">
$(document).ready(function()
{
    alert("Checking if I'm ready :)");

    $( "#accordion" ).accordion({
        header: 'h3',
        collapsible: true
    });
});
</script> 
```

_contactListAjax - GSP 模板

```
<div id="accordion">
<g:each in="${contactList}" status = "i" var="contact">
    <h3>${contact.contactForename}</h3>
    <div><p>${contact.email}</p></div>
</g:each>
</div> 
```

不太确定我在这里做错了什么，因为我正在用带有 id 手风琴的 div 封装数据，但没有加载。请参阅上面的屏幕截图链接以查看当前发生的情况。

**更新**

事件（标准生成的 CRUD，仅显示相关导入的位置）创建 - GSP

```
<link rel="stylesheet" href="${resource(dir: 'css', file: 'jquery.ui.accordion.css')}"/>
<g:javascript src="jquery-1.7.1.min.js"></g:javascript>
<g:javascript src="jquery-ui.min.js"></g:javascript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:58:27.210

尝试更换：

```
$(function() {
    $( "#accordion" ).accordion({
        collapsible: true
    });
}) 
```

和

```
$( "#accordion" ).accordion({
    collapsible: true
}); 
```

编辑：

请求完成后您不能使用`<r:script />`标签。服务器已经布局了所有的资源。将其更改为标准的 javascript 标记。此外，您的 javascript 和 css 文件的包含应该在页面的其他位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:42:30.343

我解决了这个问题......（*好吧，Hack & Slash 现在......不是最好的，但目前唯一可行的解​​决方案*）

`var whatever`是由 AJAX 生成的存储 HTML 并放入`divContactList`. `update function`手风琴被删除然后重建（*不是我意识到的最佳方法*）

```
var whatever = $('#divContactList').html();

$('#accordion').append(whatever)
         .accordion('destroy').accordion({
             collapsible: true,
             active: false
        }); 
```

# jquery - 加载网站特定部分的 iframe

> ID：14104935
> 
> 赞同：0
> 
> 时间：2012-12-31T18:27:23.260
> 
> 标签：jquery, html

我想使用 jQuery 和 AJAX 加载一部分外部网站内容，因为我已经读过您可以这样做。我只想加载网站的一部分，如本文[iframe 中所述，仅显示页面的特定部分](https://stackoverflow.com/questions/3272071/iframe-to-only-show-a-certain-part-of-the-page#answers-header)。

我对尝试加载的网站拥有完全的版权许可。谢谢，埃特里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:25:59.627

为此，您可以在主页中创建一个 div

```
<div id='iframediv'>
</div> 
```

然后在您的 JS 代码中提及以下行

```
$('#iframediv').load('https://www.google.co.in #DIVNAME'); 
```

在这里，您必须替换`https://www.google.co.in`为目标 URL。并替换为目标页面中`DIVNAME`的**目标 div id**。

**更新：**

如果您由于安全问题访问不同域中的页面，此方法将不起作用。在这种情况下，您可以执行以下操作

1.  在您的 Web 应用程序中创建一个`New Server-side Page (say GetContent.aspx)`（以便域相同）。
2.  然后在服务器端，您可以加载所需的页面（来自不同的域）并提取所需的部分。如果您无法提取该部分，请加载完整页面。
3.  然后将此内容加载到`New Server-side Page (say GetContent.aspx)`
4.  现在你可以`GetContent.aspx`使用`.load`函数来展示它。如果您使用的是完整页面（不提取），则使用以下代码加载所需的内容 div。

    $('#iframediv').load('https://www.google.co.in #DIVNAME');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:40:45.223

您声明这是一个外部网站。如果网站在同一个域中，您可以使用 jquery 的加载方法来执行此操作

```
$('#iframediv').load('https://www.google.co.in #DIVNAME'); 
```

如果页面是外部的，您将无法执行此操作。您可以查看外部页面，看看是否有命名锚。如果有，您可以在 iframe 的 src 中使用该锚点，以使 iframe 开始滚动到该位置。我不认为它会得到你想要的东西，但它是你能得到的最接近外部域的页面。

```
<iframe src="http://externalsite.com/page.html#nameofanchor"/> 
```

# java - 如何在命令行中为 Tomcat 编译 servlet？错误：包 javax.servlet 不存在

> ID：14104937
> 
> 赞同：3
> 
> 时间：2012-12-31T18:27:30.900
> 
> 标签：java, tomcat, servlets, compiler-errors, osx-mountain-lion

编译 Java 文件时收到此错误消息：

```
error: package javax.servlet does not exist 
```

我为 Jave EE SDK 安装了一个大的 .SH 文件，Java 版本给了我这个：

```
java version "1.7.0_10"
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

我需要安装其他东西吗？

我使用 Tomcat 7 作为位于`/Library/Tomcat/` 命令行的简单文本编辑器中的 Servlet 容器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:30:59.140

您需要`servlet-api`在编译时类路径中包含 JAR。

如果您使用的是 maven，请将其添加为 pom.xml 中的依赖项。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency> 
```

这将包括编译时的依赖项，并在运行时使用 Tomcat 的依赖项。

如果没有，您应该通过 Eclipse 添加 Tomcat 作为项目目标运行时。

这个问题有一些关于将这些包含在 Eclipse 项目中的有用信息： [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project)

如果您使用命令行来构建项目，您很可能需要将这些添加到类路径参数中`javac`以将这些 jars 添加到类路径中。

看到这个问题：[如何从命令提示符编译 servlet？](https://stackoverflow.com/questions/10363742/how-to-compile-servlets-from-command-prompt)

关键部分是：

```
javac -classpath C:\apache-tomcat-7.0.23\lib\servlet-api.jar MyTestServlet.java 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T09:10:11.340

一个 Windows 用户：

我自己也遇到了这个问题，这是一个很好的解决方案

**只需将此路径添加到您的 CLASSPATH 环境变量“C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\servlet-api.jar”**

jar 名称之前的路径可能因您的安装而异。只需转到您的tomcat的lib文件夹并复制整个目录即可。

初学者的更多信息：您可以在此处找到环境变量 MyComputer -> 属性 -> 高级设置 -> 高级选项卡

现在您可以简单地转到 cmd 提示符并键入“javac Myclass.java”

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T19:27:22.393

**[在 Wikipedia 上](http://en.wikipedia.org/wiki/Classpath_%28Java%29)阅读有关 java 类路径的信息。**

准备好“概述和架构”下的最后一段。

**在你的例子中**

javax.servlet 包不是引导包或扩展包的一部分，因此必须手动将其添加到类路径中。ALJI 向您展示了如何从命令行执行此操作。上面的 Wikipedia 链接也提供了示例。

**推荐**

每个人在开始一门新语言时都会遇到这些类型的问题。Google 有很多教程可以帮助您对 Java 类路径有一个基本的了解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T18:50:25.260

```
javac -classpath /Library/Tomcat/lib/servlet-api.jar *.java 
```

# php - PHP shuffle vs rand - 产生更好的随机性

> ID：14104938
> 
> 赞同：1
> 
> 时间：2012-12-31T18:27:34.280
> 
> 标签：php

有谁知道随机数生成的两种选择中的哪一种会产生更好的随机性：

```
<?php
$array = array(1,2,3,4,5,6);

shuffle($array);
echo $array[0];

//// OR ////

echo rand(1,6);

?> 
```

或者也许还有我不知道的更好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T18:28:28.427

两者都使用相同的[PRNG](http://en.wikipedia.org/wiki/PRNG)，因此它们的随机性同样好/坏。显然，平原`rand(1,6)`更快，因为它只是数学而不是数学和数组的东西。除此之外，[`array_rand()`](http://php.net/array_rand)如果您想要一个数组中的随机元素，您会使用它。

PHP 也有[mersenne twister](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/efaq.html) ( [`mt_rand()`](http://php.net/mt_rand))，它“更好”但不适合密码学（可能与您的情况无关）。

如果您需要*真正的*随机性，您可以考虑从中读取`/dev/random`- 但如果没有可用的随机性，则读取可能会阻塞。您还可以使用基于某些物理效果为您提供更好随机性的硬件设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:33:09.547

在大多数系统上，使用随机值播种随机数生成器。在大多数应用程序中，使用当前时间的低阶部分（如秒和微秒）是一个非常好的策略。这是否适合您取决于应用程序。

在 Linux 系统上，该程序还可以从随机数生成器中读取几个字节`/dev/random`或将其作为种子。`/dev/urandom`它是来自设备驱动程序和其他难以预测的现象的随机熵的集中。

# json - 将服务引用添加到引用了 JSON.NET 库的项目时出现奇怪的问题

> ID：14104939
> 
> 赞同：5
> 
> 时间：2012-12-31T18:27:50.860
> 
> 标签：json, visual-studio-2010, wcf, json.net, service-reference

该项目是与内部 WCF 服务通信的标准普通[ASP.NET MVC 3 应用程序。](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)我们的 ASP.NET MVC 应用程序引用了一些外部库，包括流行的 JSON.NET 库。

仅当 JSON.NET 库是项目中的引用时，才会出现此问题。我尝试使用 WebForms 和[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)项目重新创建此问题，并且发生了同样的事情。

当向我们的 WCF 服务添加服务引用时，JSON.NET 是我们项目中的引用，它会像这样构建服务引用：

在项目中引用 JSON.NET - 注意请求/响应类和奇怪的属性，如 Id1 和 IdSpecified

![使用 JSON.NET](../Images/c8b2a90803ecef000f0d5be120fe2466.png)

但是删除对 JSON.NET 的引用并更新服务引用会按照我们想要的方式构建它，如下所示：

项目中没有引用 JSON.NET

![没有 JSON.NET](../Images/26b5bcea0791fe0ff84b74f32a3c804a.png)

...

到底是什么原因造成的？WCF 项目中没有引用 JSON.NET，所以我非常怀疑那里可能存在某种混淆。

一些可能有帮助的信息：

*   尝试检查“添加服务引用”对话框中的各种选项，例如*“在引用的程序集中重用类型”* - 但同样的事情发生了
*   视觉工作室 2010
*   WCF 服务使用实体框架进行数据访问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T19:50:25.813

添加服务引用时，默认情况下，WCF 将重用程序集中与将生成的类匹配的类。

发生这种情况是因为，例如，您可能同时开发服务和客户端，并且您可能希望拥有一个包含两个项目中引用的所有类的类库。这也确保使用 .NET 默认类型（如数组、列表、日期时间）。

您可以像这样更改此默认行为：

1.  选择“添加服务参考”后单击“*高级”按钮*

2.  选择“在指定的引用程序集中重用类型”

3.  检查所有程序集，除了您不想使用的程序集

请注意，如果您不检查系统程序集，您还将在代理文件中为每个 .NET 类型（如数组、列表）生成一个新类型。

# php - 在php中匹配以大写字母开头的单词？

> ID：14104947
> 
> 赞同：-1
> 
> 时间：2012-12-31T18:28:38.140
> 
> 标签：php, regex, preg-match, preg-split

我有一个字符串

```
 $str="NassarWellerGomez-GarciaSanchez-RenedoLoeches-SanchezGomez-GarciaMunoz-FerrerasSanchez-RenedoChiaoHakkarainenWernerValkamaHarounPlett"; 
```

我只想匹配以大写字母开头的单词，例如：Nassar Weller Gomez-Garcia 等

```
I used this : 

preg_match('/[A-Z][a-z]+/', $str,$match); 
```

但它不起作用，请在这里帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:43:46.613

```
preg_match_all('/[A-Z][a-z]*(?:-[A-Z][a-z]*)*/', $str, $match);
var_dump($match[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:33:14.457

尝试这个：

```
$result = preg_split('/[A-Z]/', $str, null, PREG_SPLIT_DELIM_CAPTURE);
var_dump($result); 
```

我还没有测试过它，但我认为它会起作用，或者至少为你指明正确的方向。

它不适用于带连字符的名称。为此，我相信您需要使用（正面或负面）lookbehind，但我不知道如何解释这一点。您必须查找它，但至少现在您知道要查找什么。

* * *

查看[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)作为快速参考，看起来这可能是您需要的带有负面后视的正则表达式：

```
'/(?<!-)[A-Z]/' 
```

*这基本上意味着“匹配任何不*带连字符的大写字母”。

# pentaho - 在 Kettle/Spoon/Pentaho 中循环

> ID：14104950
> 
> 赞同：1
> 
> 时间：2012-12-31T18:29:00.247
> 
> 标签：pentaho, kettle

我有一个这样的查询：

```
SELECT count(distinct ID) FROM TBLC WHERE date BETWEEN ? AND ?; 
```

我正在使用 Pentaho Spoon。我正在使用“执行 SQL 脚本”/语句。我看到的选项是对每一行执行、作为单个语句执行和变量替换。

如果我需要更改我的查询或需要其他步骤来实施，请回复。

**编辑：**

我正在使用 Pentaho Spoon 将数据从 Infobright 数据库（table1、table2）传输到 Infobright 数据库（table3）。

查询类似于：

```
SELECT table1.column1, table2.column2
FROM table1 JOIN table2 ON table1.id=table2.id
WHERE table2.date BETWEEN '2012-12-01' AND '2012-12-30' 
```

我想要一种方法，这样我就不必在每次运行转换时手动指定日期范围。我想自动化日期范围。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:31:39.153

根据您所描述的，我相信您可以通过使用生成行步骤将行注入包含所需日期的流中来完成您想要的操作，然后为流中的每个日期行生成所需的查询以获取所有您想要从源表中获取的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T09:35:07.950

您可以将 execute 用作单个语句和变量替换，因为它们最适合您的用例。

将参数 StartDate 和 EndDate 添加到您的转换中，并在查询中使用它们，如下所示。[在执行 SQL 脚本](http://wiki.pentaho.com/display/EAI/Execute+SQL+script)步骤中启用“变量替换” 。

```
SELECT table1.column1, table2.column2
FROM table1 JOIN table2 ON table1.id=table2.id
WHERE table2.date BETWEEN **$StartDate** AND **$EndDate** 
```

在执行转换时提供 StartDate 和 EndDate 的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-29T13:14:01.760

我猜日期在数据库中的表或文件中，您可以做的是：创建一个作业，将这些参数获取到蒸汽并设置变量。在下一份工作中，您可以使用 {date_from} {date to} 将它们用作查询的变量

这样，每次运行作业时，您当然需要在数据库中更新 date_from 和 date_to

# mysql - MYSQL 查询慢 - 子查询和临时表

> ID：14104953
> 
> 赞同：5
> 
> 时间：2012-12-31T18:29:22.537
> 
> 标签：mysql, subquery

我有这个复杂的查询，它在大约 50 毫秒内产生 3744 行。

```
 SELECT 
  srl.event_id as eid
 , srl.race_num as rnum
 , bts.boat_id as bid_id
 , srl.series_year as yr
 , srl.id as id 
 , IFNULL(rfi.fleet,fleet_def) as flt_old,flt_match,s.series_id as sid
 , s.series_year as syr
  ,IFNULL(ovr_pts,POINTS('4',IFNULL(ovr_place,place),num_start)) as points

 FROM

 (SELECT en1.boat_id,en1.boat_name,MAX(fleet) as fleet_def FROM entries en1 
 JOIN series_race_list srl1 ON srl1.event_id=en1.event_id 
              AND srl1.series_year=en1.race_year 
 LEFT JOIN entries_race er1 ON en1.boat_id= er1.boat_id 
                           AND srl1.event_id=en1.event_id      
                           AND srl1.series_year =en1.race_year 
 WHERE srl1.series_id ='3' AND srl1.series_year ='2012' 
                            AND en1.entry_deleted='N'      
 GROUP BY boat_id) bts 

 JOIN series_race_list srl LEFT JOIN series as s ON s.series_id=srl.series_id 
 AND s.series_year =srl.series_year 

 LEFT JOIN entries as en ON srl.event_id=en.event_id 
  AND srl.series_year =en.race_year AND bts.boat_id =en.boat_id 

 LEFT JOIN entries_race er ON er.race_id= srl.event_id AND er.race_num=srl.race_num 
                        AND er.yr = srl.series_year AND bts.boat_id =er.boat_id

 LEFT JOIN event_race_info as eri ON eri.race_id= srl.event_id 
     AND eri.race_num=srl.race_num AND eri.yr = srl.series_year 
     ANd er.line=eri.line     AND status REGEXP 'prelim|final' 

 LEFT JOIN race_results as rr ON srl.event_id=rr.race_id 
     AND srl.race_num= rr.race_num   AND srl.series_year =rr.yr 
     AND bts.boat_id= rr.boat_id AND checked_in='Y' 

LEFT JOIN race_fleet_info as rfi ON rfi.race_id= srl.event_id 
     AND rfi.yr=srl.series_year AND srl.race_num= rfi.race_num 
     AND rfi.fleet=rr.flt AND complete='Y'

LEFT JOIN series_pts_override as spo ON srl.id =spo.id AND en.boat_id =spo.bid

WHERE s.series_id ='3' AND s.series_year ='2012' AND approved ='Y' 
```

对不起，长度。正如我所说，这个查询在大约 50 毫秒内执行。现在我想使用这些数据并对这 3744 行结果执行查询。一旦我用这样的查询包装它

```
SELECT eid FROM(
     ......previous query here.....
         ) data 
```

执行时间从 50 毫秒变为 2.5 秒

我尝试创建一个临时表，那是一样的。（实际上这是我的首选方法，因为我需要对这个结果集进行一些不同的查询。

在这个网站上阅读我不认为这是一个相关的子查询，但似乎表现得像一个。

似乎创建别名表的行为是我的问题，因为子查询具有派生表别名，而临时表显然是一个表。

我怎样才能在没有时间损失的情况下访问这 3744 行数据？

如果有帮助，我可以弄清楚如何发布说明。

解释更长的查询：

```
id      select_type   table       type    possible_keys               key        key_len  ref                                                   rows    Extra
1       PRIMARY       <derived2>  ALL     NULL                        NULL       NULL     NULL                                                  3744
2       DERIVED       s           const   PRIMARY                     PRIMARY    5                                                              1
2       DERIVED       srl         ref     series_id,series_id_2       series_id  5                                                              16      Using where
2       DERIVED       <derived3>  ALL     NULL                        NULL       NULL     NULL                                                  208     Using join buffer
2       DERIVED       en          eq_ref  PRIMARY,event_id,event_id_2 PRIMARY    9        race_reg_test.srl.event_id,bts.boat_id                1       Using index
2       DERIVED       er          ref     PRIMARY,boat_id,boat_id_2   boat_id_2  5        bts.boat_id                                           5
2       DERIVED       eri         eq_ref  PRIMARY                     PRIMARY    13       race_reg_test.srl.event_id,race_reg_test.srl.race_... 1
2       DERIVED       rr          ref     PRIMARY,boat_id             boat_id    4        bts.boat_id                                           9
2       DERIVED       rfi         eq_ref  PRIMARY                     PRIMARY    31       race_reg_test.srl.event_id,race_reg_test.srl.race_... 1
2       DERIVED       spo         ref     PRIMARY                     PRIMARY    8        race_reg_test.srl.id,race_reg_test.en.boat_id         1
3       DERIVED       srl1        ref     series_id,series_id_2       series_id  5                                                              16      Using index; Using temporary; Using filesort
3       DERIVED       en1         ref     PRIMARY,event_id,event_id_2 PRIMARY    5        race_reg_test.srl1.event_id                           11      Using where
3       DERIVED       er1         ref     boat_id,boat_id_2           boat_id    4        race_reg_test.en1.boat_id                             9       Using index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:52:00.620

您说您尝试创建一个临时表，我不确定您是否指的是视图。

我将使用该查询创建一个视图，然后在视图上执行任何必要的查询。

```
CREATE VIEW massive_query_view AS 
SELECT 
  srl.event_id as eid
 , srl.race_num as rnum
 , bts.boat_id as bid_id
 , srl.series_year as yr
 , srl.id as id 
 , IFNULL(rfi.fleet,fleet_def) as flt_old,flt_match,s.series_id as sid
 , s.series_year as syr
  ,IFNULL(ovr_pts,POINTS('4',IFNULL(ovr_place,place),num_start)) as points

 FROM

 (SELECT en1.boat_id,en1.boat_name,MAX(fleet) as fleet_def FROM entries en1 
 JOIN series_race_list srl1 ON srl1.event_id=en1.event_id 
              AND srl1.series_year=en1.race_year 
 LEFT JOIN entries_race er1 ON en1.boat_id= er1.boat_id 
                           AND srl1.event_id=en1.event_id      
                           AND srl1.series_year =en1.race_year 
 WHERE srl1.series_id ='3' AND srl1.series_year ='2012' 
                            AND en1.entry_deleted='N'      
 GROUP BY boat_id) bts 

 JOIN series_race_list srl LEFT JOIN series as s ON s.series_id=srl.series_id 
 AND s.series_year =srl.series_year 

 LEFT JOIN entries as en ON srl.event_id=en.event_id 
  AND srl.series_year =en.race_year AND bts.boat_id =en.boat_id 

 LEFT JOIN entries_race er ON er.race_id= srl.event_id AND er.race_num=srl.race_num 
                        AND er.yr = srl.series_year AND bts.boat_id =er.boat_id

 LEFT JOIN event_race_info as eri ON eri.race_id= srl.event_id 
     AND eri.race_num=srl.race_num AND eri.yr = srl.series_year 
     ANd er.line=eri.line     AND status REGEXP 'prelim|final' 

 LEFT JOIN race_results as rr ON srl.event_id=rr.race_id 
     AND srl.race_num= rr.race_num   AND srl.series_year =rr.yr 
     AND bts.boat_id= rr.boat_id AND checked_in='Y' 

LEFT JOIN race_fleet_info as rfi ON rfi.race_id= srl.event_id 
     AND rfi.yr=srl.series_year AND srl.race_num= rfi.race_num 
     AND rfi.fleet=rr.flt AND complete='Y'

LEFT JOIN series_pts_override as spo ON srl.id =spo.id AND en.boat_id =spo.bid

WHERE s.series_id ='3' AND s.series_year ='2012' AND approved ='Y' 
```

然后，您可以对视图执行查询。

```
SELECT * FROM massive_query_view; 
```

希望能加快速度。您可以做的另一件事是检查您的索引。索引使 where 子句更快，但插入速度更慢。有关更多信息，请查看有关 MySQL 如何使用索引的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:06:09.790

有几件事，但我看到的最大的一个是在您的原始查询中......

boat_id) bts JOIN series_race_list srl LEFT JOIN series as s

您在 bts 和 srl 之间没有“ON”条件，这将导致笛卡尔结果，并且可能对您来说是一个大杀手。对于 bts 中的每条记录，它在 srl 中创建一个条目，然后从该产品加入到系列。从 srl 到系列是可以的，因为它加入了明显的有效标准/键。

接下来，您有一些不是 alias.field 的字段，例如最内层查询中的 max(fleet) 别名为“bts”。此外，如果 MAX(fleet) 按我将解释为主键并且是唯一的船 ID 分组，为什么 MAX(fleet)... 一艘船会改变它的船队吗？如果是这样，这是准确的吗？如果您有一个船队表（也有自己的自动序列 ID），并且一艘船将所有权/赞助船（无论如何）更改为预先存在的船队，例如... 船队 93 到已经拥有 ID 的新船队在 47 的档案中，即使 47 是最新的关系，但和旧的预先存在的 ID……那是你真正想要的吗？最大限度（）？

无别名字段的附加字段：ovr_pts 和 ovr_place，放置在字段列表中（以及 POINTS() 函数是什么...`status`在正则表达式中，在比赛结果中签入，并在比赛车队信息中完成，最后在最后的 where 子句。次要，但可能有助于索引优化。

最后，您的查询在特定的“s.series_id... 和 s.series_year...”上有 WHERE 子句，但您在查询的前面有一个 LEFT-JOIN。这基本上取消了它的左连接组件并将其转换为隐含的 INNER JOIN，因为您不允许将 NULL 作为包含的有效选项。

经过一些澄清后，我什至可能会建议围绕一些更改查询，但我看到的最重要的事情是从一开始......没有“ON”条件加入 bts 和 series_rate_list 表。

# java - 无法捕获 JsonMappingException

> ID：14104956
> 
> 赞同：12
> 
> 时间：2012-12-31T18:29:43.493
> 
> 标签：java, jackson

我的 IDE 给了我该`Unhandled Exception com.fasterxml.jackson.databind.JsonMappingException`行`mapper.readValue`的错误

```
ObjectMapper mapper = new ObjectMapper();
try {
    if (response.isEmpty()) {
        //Http 204 (No Content) returned from MCC
        //We should handle this differently
        user = new User();
    } else {
        user = mapper.readValue(response, User.class);
    }
} catch (IOException ioe) {
    logger.log(Level.SEVERE, ioe.getLocalizedMessage());
}
return user; 
```

我试过捕捉，`JsonMappingException`但它并没有使错误消失。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-03T06:23:15.870

当我只添加`jackson-mapper-asl`jar 时，我遇到了这个问题。当我添加`jackson-core-asl`jar 时，它起作用了。

杰克逊 2 也是如此。如果仅包含`jackson-databind`. 你也需要包括在内`jackson-core`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T19:01:49.233

`JsonMappingException`extends `IOException`，所以你的 IDE 本身就有一些更深层次的麻烦——也许库导入搞砸了？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-03T11:20:20.917

我遇到了同样的问题，因为 org.codehaus.jackson.map.JsonMappingException 扩展了 JsonProcessingException （不是任何 Throwable 直接）并且包中缺少这个。在做了一些研究之后，我直接下载了 jars（而不是使用 Maven）并手动将它们添加到类补丁中：

*   杰克逊注释-2.1.2
*   com.fasterxml.jackson.core
*   com.fasterxml.jackson.databind

这三个包的组合解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T11:59:56.717

我遇到过同样的问题。该类继承的类似乎`JsonMappingException`不在JAR文件中。我刚刚恢复到没有问题的 1.9 版。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-04T08:07:45.493

我有同样的问题，当我添加[json-core](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.6.3/)时，它​​对我有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-31T18:34:36.217

你也试过这个吗？

`user = mapper.readValue(response.getEntity(String.class),User.class);`

PS：假设，`response`是类型`com.sun.jersey.api.client.ClientResponse`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-17T18:51:55.577

添加jackson-core-asl.jar，它会工作

# python - 使用列表作为列表框变量而不是元组

> ID：14104966
> 
> 赞同：1
> 
> 时间：2012-12-31T18:30:11.247
> 
> 标签：python, tkinter

是否可以将列表作为 Tkinter Listbox 列表变量？或者它必须是一个元组？我真的很想在列表中进行更改，因此我不能使用元组。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:20:50.967

您是否尝试过使用`list()`和/或`tuple()`功能？使用这些，您可以将列表制作成元组或将元组制作成列表。

```
alist = [1,2,3]
atuple = (4,5,6)

new_tuple = tuple(alist)   # returns (1,2,3) which is a tuple
new_list = list(atuple)    # returns [4,5,6] which is a list 
```

因此，如果列表变量以元组的形式返回数据，那么您可以读取列表（使用`get()`方法），将其更改为列表类型（使用`list()`），进行更改并将数据传回（使用`tuple()`and`set()`方法）。但是，一般来说，如果某些小部件仅适用于给定的变量类型，请考虑为什么会这样以及为什么您的数据不是同一类型。

* * *

这里有几个关于何时/为什么在 Python 中使用列表或元组的好问题。

[python：列表与元组，何时使用每个？](https://stackoverflow.com/q/1708510/404469)

*   接受的答案表明元组通常用于异构数据，而列表通常用于同类数据
*   另一个答案指出元组是不可变的（数据一旦分配就不能就地更改），而列表是可变的

另一个问题（[Python 中的 list 和 tuples 有什么区别？](https://stackoverflow.com/q/626759/404469)）提到了这些相同的点并链接到有关该主题的几篇文章。

[最后， Listbox 小部件](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/listbox.html)上的这个链接提到了 the`listvariable`和它的`get`/`set`方法。

# php - 带有按钮的网格到详细信息页面

> ID：14104969
> 
> 赞同：0
> 
> 时间：2012-12-31T18:30:48.957
> 
> 标签：php, atk4, agiletoolkit

我有一个显示联系人姓名的网格。我希望能够有一个链接到另一个页面（详细信息）的详细信息按钮，它将显示联系方式，例如姓名、地址、注释等...

我知道如何将按钮添加到网格，但我正在寻找显示详细信息页面的最佳方法。我见过一个包含只读数据的表单，也见过制作自定义模板。我确信两者都有用例。什么是最好的？

最后，我如何将 id 传递给链接页面？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:39:00.973

我现在不会给出完整的答案（现在不在我的开发笔记本电脑上），但简而言之：

*   您可以使用“扩展器”类型的网格列。$grid->addColumn('expander',...);

*   您可以使用“按钮”类型的网格列 $b=$grid->addColumn('button',...) 并在单击按钮时添加一些代码，例如 if($b->isClicked()){... }。

在这两种情况下，您都会收到带有网格行记录 ID 的 $_GET[xxx] 参数，其中 xxx 是 addColumn() 方法中设置的扩展器/按钮列的名称。

您可以使用几周前制作的新插件 Romans。它是关于如何打开“内页” - 在父页面类中“注入”的新弹出页面。

* * *

**编辑：** 如果您想简单地重定向到设置了 id=xxx 的详细信息页面，那么您可以这样做：

```
// Add button column to grid
$grid->addColumn('button','details','Details');

// Action to do when details button is clicked
// This must return JavaScript (use execute() method to do that immediately)
if(isset($_GET['details'])) {
    // redirect to page foo/bar&id=xxx
    $this->js()->univ()
        ->location($this->api->url('foo/bar',array('id'=>$_GET['details'])))
        ->execute();
} 
```

如果您需要一些 JS 回调功能，您还可以使用 redirect(url,callback) 或 redirectURL(url,callback) 而不是 location(url)。

# javascript - 猫鼬的奇怪错误

> ID：14104973
> 
> 赞同：1
> 
> 时间：2012-12-31T18:31:30.637
> 
> 标签：javascript, node.js, mongodb, express, mongoose

```
app.get('/showme', function (req, res){

    console.log(req.session.user);

     UserModel.findOne({ user: req.session.user }, function (err, user){

     if (err) throw err;

         console.log(user);
         res.send('Look');

     });

}); 
```

执行此操作时，我在终端中正确收到了用户，但是之后，应用程序突然崩溃了，这就是错误`TypeError: Cannot read property '_id' of null`。已`req.session.user`定义，并且在应用程序中。这不是第一次`UserModel.findOne({ user: req.session.user }`调用，而是唯一返回此错误的调​​用！为什么会这样？

编辑：

这是用户的模式

```
var userschema = new mongoose.Schema({

   user: String,
   pass: String,
   mail: String,
   avatar: String,

}); 
```

编辑：

我不知道为什么，但我没有收到任何错误`UserModel.find()`。它只发生在`UserModel.findOne()`.

编辑：

```
app.get('/showme', function (req, res){

  UserModel.find({ user: req.session.user }, function (err, user){ 

    for (var i = 0; i <= user[0].following.length; i++) {

       UserModel.find({ _id: user[0].following[i] }, function (err, users){

              var userss = [];
              users[i] = users[i];
              console.log(users);  

        });

     }   

 });

 res.send('Hello');

}); 
```

在这段代码中，第一次`UserModel`不会返回任何错误，但第二次会！这是我在终端收到的：

```
[ { __v: 2,
   _id: 50e1d852d7b6f9e1be000003,
   avatar: './users/rodridev/full_Mgs-solid-snake.jpg',
   user: 'rodridev',
   notification: [],
   followers: [ '50e1cfda6e63107eb6000003' ],
   following: [ '50e1cfda6e63107eb6000003' ],
  ,
  ,
  undefined ]
  [ , , , undefined ]
  [ { __v: 1,
   _id: 50e214171553600000000003,
    avatar: './users/kirbo/8816.masterchief.jpg-610x0.jpg',
    user: 'kirbo',
    followers: [ '50e1cfda6e63107eb6000003' ],
    following: [],
    imagen: [] },
 ,
 ,
 undefined ] 
```

这就是出现的错误。和之前一样：`TypeError: Cannot read property '_id' of null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:42:28.763

尝试

```
UserModel.findOne({ _id: req.session.user._id }, function (err, user) { 
```

问题是您正在询问一个用户，该用户拥有一个名为`user`其值为当前用户的属性。您真正想要的（我假设）是数据库中的用户项，即当前会话用户。

或者，更好的是，我喜欢做

```
UserModel.findById(req.session.user._id, function (err, user) { 
```

# objective-c - 检查 NSStatusItem 当前是否显示在 OS X NSStatusBar 主菜单栏中

> ID：14104975
> 
> 赞同：2
> 
> 时间：2012-12-31T18:31:42.047
> 
> 标签：objective-c, macos, cocoa, menubar, nsstatusitem

我的应用程序在 OS X 菜单栏中放置了一个 NSStatusItem。在某些时候，我想从系统 NSStatusBar 中删除菜单栏图标。（此时我仍想保留 NSStatusItem，并向其发送消息……只是没有显示。）

我正在使用此方法从状态栏中删除 statusItem：

```
[[NSStatusBar systemStatusBar] removeStatusItem:statusItem]; 
```

我想在稍后的某个时间检查 statusItem 当前是否显示在状态栏中。我不希望通过布尔值等来跟踪这一点。

我认为这个检查会起作用：

```
if ([[NSStatusBar systemStatusBar] isEqualTo:[statusItem statusBar]])
{
    NSLog(@"statusItem's bar == system bar, before");
}

NSLog(@"removing from systemStatusBar");
[[NSStatusBar systemStatusBar] removeStatusItem:statusItem];

if ([[NSStatusBar systemStatusBar] isEqualTo:[statusItem statusBar]])
{
    NSLog(@"statusItem's bar == system bar, after removal");
} 
```

这输出：

```
statusItem's bar == system bar, before removal

removing from systemStatusBar

statusItem's bar == system bar, after removal 
```

所以 statusItem 的 statusBar 没有明显的变化。

NSStatusBar[类引用](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSStatusBar_Class/Reference/Reference.html)似乎不包含任何适用的方法。

有没有办法检查某个 NSStatusItem 是否在主系统栏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:45:30.730

我找到了私有财产`_statusItems`。
这是我写的一个小分类，我不确定它是否有效，但你可以尝试一下。

* * *

## 状态栏类别

```
@implementation NSStatusBar (statusItemCheck)
- (NSArray *)items {
    return [self valueForKey:@"_statusItems"];
}
- (BOOL)statusItemIsShown:(NSStatusItem *)statusItem {
    if ([self items]) {
        NSInteger index = [[self items] indexOfObject:statusItem];
        if (index != -1) return YES;
    }

    return NO;
}
@end 
```

* * *

## 编辑

您应该考虑添加一个`BOOL`标志，而不是访问私有方法。
我的类别只是一个例子，如果你想将你的应用上传到 MAS，你一般不应该使用私有方法。

# mysql - 使用 Create view X as - MySql 已经存在表 X

> ID：14104976
> 
> 赞同：0
> 
> 时间：2012-12-31T18:31:43.917
> 
> 标签：mysql, view, create-table

我正在做 ：

```
create view WritersCouples as
select researcher.serial_number as S1, researcher.firstname as S2
from researcher, researcher as rs
where researcher.serial_number <> rs.serial_number; 
```

我收到以下错误：

```
Error Code: 1050\. Table 'WritersCouples' already exists 
```

我在 mySql 上使用工作台

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:34:42.330

添加以下内容：

```
create or replace view myview
as
select .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:33:49.463

您是否已经创建了视图？或者你已经有一个名为的表`WritersCouples`？

你可以试试这个：

```
create or replace view WritersCouples as
select researcher.serial_number as S1, researcher.firstname as S2
from researcher, researcher as rs
where researcher.serial_number <> rs.serial_number; 
```

如果视图已经存在，它将替换视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T18:34:21.497

如果视图已经存在，添加`OR REPLACE`子句：

```
create OR REPLACE view WritersCouples as
select researcher.serial_number as S1, researcher.firstname as S2
from researcher, researcher as rs
where researcher.serial_number <> rs.serial_number; 
```

# android - 如何防止“MainActivity屏幕”显示

> ID：14104977
> 
> 赞同：0
> 
> 时间：2012-12-31T18:31:48.457
> 
> 标签：android

我有一个 Android 应用程序，其中第一个屏幕是菜单显示。在它进入菜单显示之前，它会在顶部显示一个带有启动器图标和“主要活动”的页面。如何防止这种显示？清单文件有这个：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.menu"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

- - 编辑

所以显示菜单的类叫做 MainActivity.java。也许不是一个好主意，如果只是因为这不是一个好习惯。所以我将它重命名为 MenuActivity.java 并相应地更改了清单（如下）。但行为仍然相同。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".MenuActivity"
        android:label="@string/menu_activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:39:25.607

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.menu"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".YourCustomActivity"
        android:label="@string/custom_activity_title" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:54:05.427

我的理解是，您根本不希望 ActionBar 出现在您的 MenuActivity 中。由于您的目标 API 是 11，您可以添加`android:theme="@android:style/Theme.Holo.NoActionBar"`到活动声明中。

```
<activity
        android:name=".MenuActivity"
        android:label="@string/menu_activity" 
        android:theme="@android:style/Theme.Holo.NoActionBar" > 
```

# c# - 在未修改项目的地方修改了集合

> ID：14104979
> 
> 赞同：4
> 
> 时间：2012-12-31T12:20:45.973
> 
> 标签：c#

我正在使用 C# 的 XNA 库开发一个简单的游戏。在下面的代码片段中，我得到了

> 收藏已修改；枚举操作可能无法执行。

第二个 foreach 循环顶部的错误。在我（相对有限的）C# 经验中，尝试在循环期间修改基础集合时会发生这种情况。但是，据我所知，我并没有以任何方式修改enemy_positions 集合。这段代码中的所有集合都是类型`List<Vector2>`。

这里发生了什么？

```
//defines collision behaviour when enemy is hit
int be_no = 0;
List<Vector2> tmp_bullets = bullet_i_position;
List<Vector2> tmp_enemy = enemy_positions;

foreach (Vector2 bullet in bullet_i_position)
{
    //get bullet collision box
    Rectangle bullet_col = new Rectangle(Convert.ToInt32(bullet.X - 12), Convert.ToInt32(bullet.Y - 12), 25, 26);

    int en_no = 0;

    foreach (Vector2 enemy in enemy_positions)
    {
        //get enemy collsion box
        en_box = new Rectangle(Convert.ToInt32(enemy.X), Convert.ToInt32(enemy.Y), 75, 75);

        if (temp_r.Intersects(en_box))
        {
            //remove all colliding elements
            tmp_enemy.RemoveAt(en_no);
            tmp_bullets.RemoveAt(be_no);
            bullet_direction.RemoveAt(be_no);

        }
        en_no++;
    }
    be_no++;
}

//update actual lists
bullet_i_position = tmp_bullets;
enemy_positions = tmp_enemy; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T12:25:56.160

这些行：

```
List<Vector2> tmp_bullets = bullet_i_position;
List<Vector2> tmp_enemy = enemy_positions; 
```

没有克隆列表，他们只是创建对同一列表的本地引用。直接的解决方案是将这两行更改为：

```
List<Vector2> tmp_bullets = new List<Vector2>(bullet_i_position);
List<Vector2> tmp_enemy = new List<Vector2>(enemy_positions); 
```

但这将在每次调用该方法时分配一个新列表，这对于垃圾收集（尤其是在游戏中）来说是很糟糕的，因此更好的解决方案是删除您的 foreach 循环并用反向 for 循环替换它们。这是有效的，因为只有在使用枚举器迭代集合时才会出现该异常。同样的问题不适用于常规 for 循环。例如：

```
for (int i = bullet_i_position.Count - 1; i >= 0; i--)
{
    Vector2 bullet = bullet_i_position[i];

    // ...
} 
```

**反向**迭代的原因还在于，在定期迭代时删除元素意味着您将在删除元素之后跳过该元素（因为索引向下移动 1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:28:26.090

```
List<Vector2> tmp_enemy = enemy_positions; 
```

不复制enemy_positions 并将其分配给tmp_enemy。相反，tmp_enemy 指向enemy_positions。因此，tmp_enemy 的任何变化都会反映在enemy_positions 中。如果要制作实际副本，这是一种更好的方法：

```
List<Vector2> tmp_enemy = new List<Vector2>(enemy_positions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:02:16.127

正如其他人所提到的，您遇到了引用类型和值类型之间的区别

我建议你用类似于下面的东西替换 foreach 循环

```
for(int i = 0; i<bullet_i_position.count;i++)
  {
     bool hascollided = false;
     for(int j = 0; j<enemy_positions.count;j++)
        {
          if(collisionOccurs)
               {
                hasCollided = true;
                enemy_positions.RemoveAt(j);
                j--;
               }
       }
   if(hasCollided)
      {
         bullet_i_position.RemoveAt(i);
         i--;
      }
} 
```

您需要考虑如果在上面的示例中子弹同时与 2 个敌人相撞会发生什么

# arrays - 如何在 c# 中将表单集合添加到字符串数组

> ID：14104984
> 
> 赞同：1
> 
> 时间：2012-12-31T18:32:19.220
> 
> 标签：arrays, string, c#-4.0

大家好，我有一个表单集合的字符串 []，看起来像这样

```
string[] formCollSkuOptionValueId=form.GetValues("txtskuopvaluetid");
string[] formCollSkuOptionNames=form.GetValues("txtSkuoptionName");
string[] formCollSkuOptionValues=form.GetValues("txSkuoptionvalues"); 
```

此 formcollection 中的值如下所示

```
formCollSkuOptionNames={color,color,color,size,size,size,fit,fit}
formCollSkuOptionValueId={37,38,39,40,41,42,50,51}
formCollSkuOptionValues={Red,Black,Blue,X,Xl,XXl,Regular,Fit} 
```

我要做的是，我必须连接`formCollSkuOptionValues`选项名称与此相同的位置

我希望结果是这样的数组

```
string[] SkuOptionValueId={37_38_39},{40_41_42},{50_51}
string[] SkuOptionValues={Red_Black_Blue},{X_Xl_XXl},{Regular_Fit} 
```

我该怎么做，任何人都可以帮助我做到这一点是我一直试图做的是

```
string SkuOptionName = string.Empty;
string SkuOptionValues = string.Empty;
string SkuOptionValueId = string.Empty;
for (int i = 0; i < formCollSkuOptionValues.Length; i++)
{
    int count = 0;
    arrays.Clear();
    SkuOptionName = formCollSkuOptionNames[count];
    if (count != 0)
    {
        if (SkuOptionName == formCollSkuOptionNames[i])
        {
            SkuOptionValues = SkuOptionValues + formCollSkuOptionValues[i] + ",";
            SkuOptionValueId = SkuOptionValueId + formCollSkuOptionValueId[i] + ",";
        }
        arrays.Add(SkuOptionValues);
        count++;
    }
    SkuOptionValues = SkuOptionValues + formCollSkuOptionValues[i] + ",";
    SkuOptionValueId = SkuOptionValueId + formCollSkuOptionValueId[i] + ",";
    //str.Remove(str.IndexOf(','));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:18:24.353

您可以利用`linq`并以这种方式编写它：

```
var namesAndIndexes = formCollSkuOptionNames.Select((e, i) => new { Name = e, Index = i }).ToList();

var nameValueIds = namesAndIndexes.Select(e => new { ValueId = formCollSkuOptionValueId[e.Index], Name = e.Name});
var nameValues = namesAndIndexes.Select(e => new { Value = formCollSkuOptionValues[e.Index], Name = e.Name });

var groupNameValueIds = nameValueIds.GroupBy(e => e.Name, a => a.ValueId);
var groupNameValues = nameValues.GroupBy(e => e.Name, a => a.Value);

var skuOptionValueId = groupNameValueIds.Select(e => e.Aggregate((a, b) => a + "_" + b)).ToArray();
var skuOptionValues = groupNameValues.Select(e => e.Aggregate((a, b) => a + "_" + b)).ToArray(); 
```

我认为这是现代的写作方式。忘记`for`和`if`:)

# php - Codeigniter/PHP - 在同一视图中显示两个相关查询的结果，博客应用程序

> ID：14104986
> 
> 赞同：0
> 
> 时间：2012-12-31T18:32:31.873
> 
> 标签：php, codeigniter, activerecord, codeigniter-2

我是 PHP 和 Codeigniter(v2.0) 框架的新手。希望你能帮助我通过我的第一个 webapp 找到我的方式。详情如下，在此先感谢您！

**目标/问题摘要：** 我想在我的视图中显示附加到每个特定 blog_Post 的所有 blog_Comments。

**详细信息：**我的 blog_Posts 表包含所有原始博客文章 [id(int)、title、entry、author (all varchar) 和 date(timestamp)]。我的 blog_Comments 表[id(int), entry_id(int), author, comment(varchar)] 包含*所有*评论；它们通过 *entry_id* 属性与原始 blog_Post 相关联。

**控制器：**

```
$query1 = $this->blog_model->get_posts();
$query2 = $this->blog_model->get_comments();
$data = array();
$data['posts'] = $query1;
$data['comments'] = $query2; 
```

**模型：**

```
function get_posts() {
$query = this->db->get('blog_Posts');
return $query->result;
}

function get_comments() {
$query = this->db->get('blog_Comments');
return $query->result;} 
```

**看法：**

```
<?php if(isset($posts)) : foreach($posts as $posts=>$row) : ?>
     <?php $row->title; ?>
     <?php $row->author; ?>
     <?php $row->entry; ?>

<?php foreach($comments as $comments=>$com) : ?>
    <?php if($com->entry_id == $row->id) : ?>
        <p>author: <?php echo $com->author; ?></p>
        <p>comment: <?php echo $com->comment; ?></p>
    <?php endif; ?>
<?php endforeach; ?>

<?php endforeach; ?>
<?php else : ?> <p>no blog_Posts found</p>
<?php endif; ?> 
```

* * *

**编辑/更新：**

我尝试显示评论被粘贴到上面的视图代码块中，我还列出了它给我的两个问题。现在我有 2 个示例原始博客文章，以及与每个相关的评论。

问题：

1.  第一个博客条目（第一次通过循环）显示所有评论，包括与其他 entry_id 相关的评论。
2.  第二个博客条目（第二次通过循环），它抛出以下错误：“为 foreach() 提供的参数无效”，并指向我视图中包含 foreach for $comments 的行。

简而言之，我试图只浏览那些 entry_id 与原始帖子“id”匹配的评论。

再次感谢您的帮助和时间。

-AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:33:35.233

好吧，既然您不需要一次显示所有评论，您可以像下面这样更改您的 get_comments 函数以返回每个帖子的评论，当然还可以按照您的方式显示它们，按创建日期排序，最后一个条目等：

所以对于模型部分：

```
function get_comments($post_id){
$query = $this->db->query("select * from `blog_Comments` where `entry_id` = $post_id ORDER BY `created_on` DESC");

  if($query->num_rows() != 0){
   return $query->result();
 }else{
   return false;
 }
} 
```

在您的视图文件中：

```
foreach($posts as $row){
 echo 'Title: ' . $row->title .
 'Author: ' . $row->author .
 'Entry:' . $row->entry;
 $comments = $this->blog_model->get_comments($row->id);
 if(!$comments){ 
  echo 'No comments'; 
 }else{
  foreach($comments as $com){
    echo $com->comments . '<br/>' . $com->user . '<br/>' . etc etc
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:06:21.113

我懒得测试，但我认为你正在尝试使用 $row，但你在定义它的 foreach 之外。你在这里介绍 $row

```
 <?php if(isset($posts)) : foreach($posts as $posts=>$row) : ?> 
```

然后你关闭 foreach - 所以 $row 在这里不再可用：

```
 <?php if($com->entry_id == $row->id); ?> 
```

是的。但*实际上*你应该在控制器和模型中做尽可能多的逻辑和检查。验证您的数据对象 - 如帖子 - 然后控制器确定正确的视图。因此，如果没有任何帖子可显示 - 您认为您没有混乱的“如果没有帖子怎么办”条件。您只需调用无帖子视图文件。

# c# - 实现单实例应用程序的正确 .NET 方式

> ID：14104988
> 
> 赞同：17
> 
> 时间：2012-12-31T18:32:42.463
> 
> 标签：c#, .net, single-instance

我在 StackOverflow 上看到了至少三种不同的方法来实现这一点。

1.  Using a MUTEX: [Accepted answer to this SO question](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application)

2.  使用 Microsoft.VisualBasic 库的 WindowsFormsApplicationBase：[此 SO 问题的第二高投票答案](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application/19326#19326)

3.  使用 Process.GetProcessNames 检查您的应用程序是否正在运行：[此处的方法](https://web.archive.org/web/20141224204707/http://bobpowell.net/singleinstance.aspx)已发布为对此[SO 问题的答案](https://stackoverflow.com/questions/3211529/net-4-single-application-instance)

我相信还有更多方法可以做到这一点。

我只是想知道其中之一是否是首选，如果我选择“错误”的可能会产生什么后果。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-31T19:16:37.200

如有疑问，请*始终*首选 .NET 框架中包含的实现。您可以期望这样的实现已经过数十万程序员的测试，经过仔细审查的安全性和可用性，并将在未来几年内得到维护。

互斥锁方法很容易上手。然而，它存在一个相当严重的安全问题。*拒绝服务*攻击很容易上手，您不能将互斥锁的名称保密，任何人都可以轻松创建同名互斥锁并阻止您的程序启动。

出于同样的原因，进程名称方法存在严重缺陷。不能保证进程名称是唯一的。不仅容易被利用，而且很容易被意外触发。

WindowsFormsApplicationBase 在 C# 程序员眼中存在图像问题。他们对命名空间名称感到窒息，并认为他们的程序会以某种方式感染 vb-isms。这是胡说八道，它只是一个可以在任何语言中使用的普通 .NET 类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T19:56:21.030

为什么没有人提到勾选[这个复选框](https://stackoverflow.com/questions/1328792/make-single-instance-application-what-does-this-do)？

![在此处输入图像描述](../Images/6a68eea9c6f4e04220ed6af95cf76ad8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T19:13:35.790

这真的是一个品味问题，但我喜欢这种`Mutex`方法，仅仅是因为它不需要依赖于 VisualBasic 库，并且 using`Process.GetProcessNames`是一个非理想的解决方案（如前所述，进程名称并不总是会映射到你的认为他们可能）

# javascript - HTML 标记内的高级 JavaScript 正则表达式替换

> ID：14104992
> 
> 赞同：0
> 
> 时间：2012-12-31T18:33:04.740
> 
> 标签：javascript, regex

我有运行良好的 javascript 代码，例如：

```
var rgx = /MyName/g;
var curInnerHTML = document.body.innerHTML;
curInnerHTML = curInnerHTML.replace(rgx, "<span><span class='myName'>MyNameReplace</span></span>"); 
```

问题是它匹配正则表达式，即使在它包含在 HTML 属性中的情况下也是如此。如何修改正则表达式，使其**只能**在 HTML 内容中找到它？例如，在这个字符串中

```
 <div class="someclass" title="MyName">
MyName
</div> 
```

它目前的结果如下（注意标题属性的变化）：

```
 <div class="someclass" title="<span><span class='myName'>MyNameReplace</span</span>">
<span><span class='myName'>
    MyNameReplace</span></span>
    </div> 
```

但我需要它（保持标题属性不变）：

```
 <div class="someclass" title="MyName">
<span><span class='myName'>MyNameReplace</span></span>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:43:45.503

您最好的选择，它比听起来容易得多，**不是**尝试使用正则表达式来解析 HTML，而是利用 DOM 已经具有并递归处理文本节点的事实。

这是一个现成的：

```
// We use this div's `innerHTML` to parse the markup of each replacment
const div = document.createElement('div');

// This is the recursive-descent function that processes all text nodes
// within the element you give it and its descendants
function doReplacement(node, rex, text) {
    // What kind of node did we get?
    switch (node.nodeType) {
        case Node.ELEMENT_NODE:
            // Probably best to leave `script` elements alone.
            // You'll probably find you want to add to this list
            // (`object`, `applet`, `style`, ...)
            if (node.nodeName.toUpperCase() !== "SCRIPT") {
                // It's an element we want to process, start with its
                // *last* child and work forward, since part of what
                // we're doing inserts into the DOM.
                let sibling;
                for (const child = node.lastChild; child; child = sibling) {
                    // Before we change this node, grab a reference to the
                    // one that precedes it
                    sibling = child.previousSibling;

                    // Recurse
                    doReplacement(child, rex, text);
                }
            }
            break;
        case Node.TEXT_NODE:
            // A text node -- let's do our replacements!
            // The first two deal with the fact that the text node
            // may have less-than symbols or ampersands in it.
            // The third, of course, does your replacement.
            div.innerHTML = node.nodeValue
                                .replace(/&/g, "&amp;")
                                .replace(/</g, "&lt;")
                                .replace(rex, text);

            // Now, the `div` has real live DOM elements for the replacement.
            // Insert them in front of this text node...
            insertChildrenBefore(div, node);
            // ...and remove the text node.
            node.parentNode.removeChild(node);
            break;
    }
}

// This function just inserts all of the children of the given container
// in front of the given reference node.
function insertChildrenBefore(container, refNode) {
    let sibling;
    const parent = refNode.parentNode;
    for (const child = container.firstChild; child; child = sibling) {
        sibling = child.nextSibling;
        parent.insertBefore(child, refNode);
    }
} 
```

你会这样称呼它：

```
doReplacement(
    document.body,
    /MyName/g,
    "<span><span class='myName'>MyNameReplace</span></span>"
); 
```

现场示例：

```
// We use this div's `innerHTML` to parse the markup of each replacment
const div = document.createElement('div');

// This is the recursive-descent function that processes all text nodes
// within the element you give it and its descendants
function doReplacement(node, rex, text) {
    // What kind of node did we get?
    switch (node.nodeType) {
        case Node.ELEMENT_NODE:
            // Probably best to leave `script` elements alone.
            // You'll probably find you want to add to this list
            // (`object`, `applet`, `style`, ...)
            if (node.nodeName.toUpperCase() !== "SCRIPT") {
                // It's an element we want to process, start with its
                // *last* child and work forward, since part of what
                // we're doing inserts into the DOM.
                let sibling;
                for (let child = node.lastChild; child; child = sibling) {
                    // Before we change this node, grab a reference to the
                    // one that precedes it
                    sibling = child.previousSibling;

                    // Recurse
                    doReplacement(child, rex, text);
                }
            }
            break;
        case Node.TEXT_NODE:
            // A text node -- let's do our replacements!
            // The first two deal with the fact that the text node
            // may have less-than symbols or ampersands in it.
            // The third, of course, does your replacement.
            div.innerHTML = node.nodeValue
                                .replace(/&/g, "&amp;")
                                .replace(/</g, "&lt;")
                                .replace(rex, text);

            // Now, the `div` has real live DOM elements for the replacement.
            // Insert them in front of this text node...
            insertChildrenBefore(div, node);
            // ...and remove the text node.
            node.parentNode.removeChild(node);
            break;
    }
}

// This function just inserts all of the children of the given container
// in front of the given reference node.
function insertChildrenBefore(container, refNode) {
    let sibling;
    const parent = refNode.parentNode;
    for (let child = container.firstChild; child; child = sibling) {
        sibling = child.nextSibling;
        parent.insertBefore(child, refNode);
    }
}

setTimeout(() => {
    doReplacement(
        document.body,
        /MyName/g,
        "<span><span class='myName'>MyNameReplace</span></span>"
    );
}, 800);
```

```
<p>MyName</p>
<p>This is MyName in a sentence.</p>
<p>This is <strong>MyName nested</strong></p>
<p>How 'bout <strong><em>making MyName nested more deeply</em></strong></p>
<p>This is MyName in an element with &lt; and &amp; in it.</p>
```

# perl - 在 windows xp 上安装 ffmpeg（perl 包）

> ID：14104996
> 
> 赞同：0
> 
> 时间：2012-12-31T18:33:40.797
> 
> 标签：perl, ffmpeg, cpan

我正在尝试通过在命令提示符下键入“cpan install FFmpeg”来安装[ffmpeg 。](http://search.cpan.org/~allenday/FFmpeg-6036/FFmpeg.pm)我已经安装了 Image::Magick、Image::PBM、Image::Magick::Iterator，据我所知，这是我需要的一些先决条件，但似乎这还不够。[这里](http://www.cpan.org/authors/id/A/AL/ALLENDAY/FFmpeg-6036.readme)有一些额外的信息。我收到错误消息：

```
Note (probably harmless): No library found for -lavcodec
Note (probably harmless): No library found for -lavformat
Note (probably harmless): No library found for -lz
Note (probably harmless): No library found for -ldl
Note (probably harmless): No library found for -lmp3lame
Note (probably harmless): No library found for -logg
Note (probably harmless): No library found for -lvorbis
Note (probably harmless): No library found for -lvorbisenc
In file included from ffmpeg.h:2,
             from FFmpeg.xs:16:
./ffmpeg-6036.c:21:22: avformat.h: No such file or directory
./ffmpeg-6036.c:22:21: swscale.h: No such file or directory
./ffmpeg-6036.c:23:23: framehook.h: No such file or directory
./ffmpeg-6036.c:24:21: dsputil.h: No such file or directory
./ffmpeg-6036.c:25:17: opt.h: No such file or directory
./ffmpeg-6036.c:44:21: version.h: No such file or directory
./ffmpeg-6036.c:45:22: cmdutils.h: No such file or directory 
```

我猜我需要安装这些文件并告诉安装程序在哪里可以找到它们。如果这是我需要做的，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:46:58.950

从[FFmpeg](http://search.cpan.org/~allenday/FFmpeg-6036/)页面：

> FFmpeg（在本模块中，此处称为 FFmpeg-Perl）是基础项目 FFmpeg（此处称为 FFmpeg-C）的 Perl 接口。

看起来 Perl FFmpeg 模块只是 C 库的包装器。如果您使用的是 MinGW，则可能是您的 MinGW 环境（C 库）中没有安装 FFMpeg。您需要先安装它，然后尝试安装 FFmpeg（Perl 库）再次。

# powershell - 在 Powershell 中转义以获取 git log

> ID：14104998
> 
> 赞同：1
> 
> 时间：2012-12-31T18:34:02.230
> 
> 标签：powershell, git-log

我知道转义字符是 (`)，即反引号，但即使我尝试使用它来转义 < 字符，我也会收到错误...

```
git log ORIG_HEAD --no-merges --date=short --pretty="format:<tr><td>%h</td><td>%ad</td><td>%an</td><td>%s</td></tr>" > test.txt
< was unexpected at this time. 
```

我怎样才能像上面那样格式化我的 git 日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:46:33.263

如果在 PowerShell v3 上试试这个：

```
$out = git log ORIG_HEAD --% --no-merges --date=short --pretty="format:<tr><td>%h</td><td>%ad</td><td>%an</td><td>%s</td></tr>"
$out > test.txt 
```

--% 将 PowerShell 置于更适合本机可执行文件的不同解析模式。有关更多详细信息，请参阅此[博客文章](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)。

如果您不使用 PowerShell v3，我建议您使用[PowerShell Community Extensions](http://pscx.codeplex.com)中的 echoargs来查看 git.exe 从 PowerShell 接收的参数，例如：

```
PS> echoargs log ORIG_HEAD --no-merges --date=short --pretty="format:<tr><td>%h</td><td>%ad</td><td>%an</td><td>%s</td></tr>"
Arg 0 is <log>
Arg 1 is <ORIG_HEAD>
Arg 2 is <--no-merges>
Arg 3 is <--date=short>
Arg 4 is <--pretty=format:<tr><td>%h</td><td>%ad</td><td>%an</td><td>%s</td></tr>>

Command line:
"C:\Program Files (x86)\PowerShell Community Extensions\Pscx3\Pscx\Apps\EchoArgs.exe"  log ORIG_HEAD --no-merges --date=short --pretty=format:<tr><td>%h</td><td>%ad</td><td>%an</td><td>%s</td></tr> 
```

如果您可以看到 PowerShell 如何将参数传递给 exe，那么您就有机会弄清楚如何处理通常涉及使用额外引号的参数。