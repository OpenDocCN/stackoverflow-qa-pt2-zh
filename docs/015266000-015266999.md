# StackOverflow 问答 15266000-15266999

# sql-server - 如何使用 SQL 查询以随机顺序显示数据

> ID：15266001
> 
> 赞同：1
> 
> 时间：2013-03-07T08:03:35.950
> 
> 标签：sql-server, data-binding, datalist

这是绑定到我的 DataList 的 SQL 查询。你能告诉我如何以随机顺序返回数据吗？

```
SELECT
   CONVERT(varchar(6), a.lastdate, 6) as lastdate, * 
FROM
   alz_jobpost AS a 
INNER JOIN
   (SELECT * 
    FROM alzome_SuperAdmin AS b 
    INNER JOIN alzome_Renewal AS c ON b.S_id = c.supid 
    WHERE c.product = 'HI-TOUCH' AND c.Payed = 1) AS aa ON a.oid=aa.businessid 
WHERE
   a.status = 1 
   AND a.lastdate > GETDATE() 
ORDER BY 
   a.startdate DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:16:01.203

要以随机顺序获取结果，您可以更改：

`ORDER BY a.startdate DESC`

类似于：

`ORDER BY NEWID()`

# iphone - 如何使用 ObjectForKey 从 NSDictionary 获取对象

> ID：15266002
> 
> 赞同：0
> 
> 时间：2013-03-07T08:03:36.510
> 
> 标签：iphone, ios

我有 3`NSMutableArray`秒: `_parssedArrayOfName`, `_parssedArrayOfbirthdate`,`_CopyOFSelectedFaceBookFriends`

里面有`_parssedArrayOfName`很多像下面这样的名字

```
2013-03-07 13:15:40.003 birthdate reminder 2[1102:15803] asdas{
        (
        "Nishith Shah",
        "Rupal Shah",
        "Viral Nagori",
        "Malay Shah",
        "Heather Joy",
        "Jatin Patel",
        "Bhushan H Trivedi",
        "Umang Patel",
        "Harshal Arolkar",
        "Nida Shaikh",
        "Yuriko Ramirez",
        "Aysu Can",
        "Bhargav Khatana",
        "Rahul Vador",
        "Viral Dave", 
```

在`_parssedArrayOfbirthdate`里面有像下面这样的生日

```
13-03-07 13:15:29.833 birthdate reminder 2[1102:15803]  this is what im here(
        (
        "<null>",
        "07/27",
        "06/11/1980",
        "08/22/1990",
        "<null>",
        "03/17/1985",
        "<null>",
        "10/17/1989",
        "<null>",
        "07/20",
        "12/08",
        "04/14/1992",
        "10/16",
        "<null>", 
```

并且`_CopyOFSelectedFaceBookFriends` 是用户选择的朋友列表，只是说 Anand Kapadiya

我将名称中的所有名称和出生率添加`NSDictionary`为键，将出生日期添加为值，然后我想使用以下方法从本词典中获取 anand kapadiya 出生日期`ObjectForKey`：

但我得到空值我的代码如下请帮助我

注意：不同数组中的 Birthdate 和 Names 的数量相同，并且所选数组值始终在 names 数组中

注意2：这可能是这个问题的原因吗？在选择器名称中没有“”，而在名称数组中所有名称都带有“”

注3：如您所见，我的生日数组包含空值，这可能是问题吗？

```
NSArray *objArr = [[NSArray alloc] initWithArray:_parssedArrayOfbirthdate];
NSArray *keyArr =[[NSArray alloc] initWithArray:_parssedArrayOfName];
NSArray *selector =[[NSArray alloc] initWithArray:_CopyOFSelectedFaceBookFriends];     NSDictionary *dic = [[[NSDictionary alloc] autorelease] initWithObjects:objArr forKeys:keyArr];
NSLog(@"asdas%@",dic.description);
 NSMutableArray *matches = [NSMutableArray array];
 for (NSString *key in selector) {
 NSLog(@" see it%@",key);
  NSMutableArray *array1 = [dic objectForKey:key];
        NSLog(@" matched%@",array1);
        [matches addObject:array1];
        NSLog(@" matched%@",matches); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:24:34.763

你的问题和这段代码很难理解。但是，我认为问题在于键字符串并不总是代表 dic 字典中的有效键。如果您尝试检查选择器数组的哪些元素是有效键，则需要首先使用 if 语句来检查它们是否存在。

您的代码中也有自动释放，但所有内存管理都应由 ARC 处理。

试试这个：

```
NSArray *birthdates = [[NSArray alloc] initWithArray:_parssedArrayOfbirthdate];
NSArray *names =[[NSArray alloc] initWithArray:_parssedArrayOfName];
NSArray *fbFriends =[[NSArray alloc] initWithArray:_CopyOFSelectedFaceBookFriends];    
NSMutableArray *matches = [[NSMutableArray alloc] initWithCapacity:1];    

NSDictionary *birthdayDictionary = 
[[NSDictionary alloc] initWithObjects:birthdates forKeys:names];

NSLog(@"asdas%@",birthdayDictionary.description);
NSStrging *birthday;
for (NSString *friend in fbFriends) {
    NSLog(@"see it %@",friend);
    if ([birthdayDictionary objectForKey:friend])
    {
        NSLog(@"matched %@",birthday);
        [matches addObject:birthday];
        NSLog(@"matched %@",matches);
    }
} 
```

# java - 静态方法调用单例

> ID：15266008
> 
> 赞同：0
> 
> 时间：2013-03-07T08:04:07.540
> 
> 标签：java, concurrency, cxf, static-methods

考虑一下我在继承的应用程序中遇到的这种“模式”：

```
public class BusinessUtil{
    public static void doBusiness(IService myService, String arg1, int arg2){
        //something something
        myService.doStuff(arg1, arg2);
    }
} 
```

*myService* bean 是一个 springBean (=singleton) 。它实际上是一个 cxf-client (=生成的 webservice-client)

这是在 web 应用程序中，因此从不同的并发线程调用静态*doBusiness()*方法。这种方法是线程安全的吗？

在你问之前：我知道这是一个奇怪的“模式”。我知道*doBusiness()*方法是非常多余的，因为我们可以直接调用*myService.doStuff()*而不是将它传递给调用它的静态方法。正如我所说，我继承了一个应用程序，这种“模式”无处不在。我不知道为什么。该应用程序（有时）有一些奇怪的行为，我正试图找到问题的根源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:06:22.030

没有任何东西`doBusiness()`使它成为线程不安全的。是否线程安全取决于线程安全性`myService.doStuff(arg1, arg2);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:22:15.323

是否线程安全取决于 myService.doStuff(arg1, arg2); 既然是 cxf-client 这篇文章[CXF 客户端代理线程安全吗？](https://stackoverflow.com/questions/13136167/are-cxf-client-proxies-thread-safe) 可能有用

# java - 使用 Windows 7 安装 Hadoop

> ID：15266013
> 
> 赞同：2
> 
> 时间：2013-03-07T08:04:20.660
> 
> 标签：java, windows-7, hadoop

我正在成功安装**cygwin**，但是当我运行**hadoop1.1.1**并键入命令以查找 hadoop 版本时出现错误

![在此处输入图像描述](../Images/6b8f9a7fc4d236dabeeae34bcd519a76.png)

注意：1）将java安装在**C:\Java\jdk1.6.0_43**和运行环境**C:\Java\jre1.6.0_43**。
2）同时设置环境变量

# mongodb - Mongo：数组字段在给定数组中没有值？

> ID：15266018
> 
> 赞同：0
> 
> 时间：2013-03-07T08:04:40.083
> 
> 标签：mongodb

我正在尝试编写一个 mongo 查询，以查找“steps”字段在数组参数中没有值的所有条目。

例如，给定两个具有值的条目：

```
Entry1:
  steps: [3, 4]

Entry2:
  steps: [3, 5] 
```

对于输入数组 [4, 8, 10]，查询应该返回 entry1，而不是 entry 2。我对 mongo 很陌生 - 任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:22:41.843

你的意思是你有一些记录：

> db.foo.find() { "_id" : 1, "steps" : [ 3, 4 ] } { "_id" : 2, "steps" : [ 3, 5 ] }

然后你会查询：

```
> db.foo.find({steps:{$in:[4,8,10]}})
{ "_id" : 1, "steps" : [ 3, 4 ] } 
```

$in 子句将选择其中任何存储元素与查询中提供的数组中的任何术语匹配的记录

# ruby-on-rails - public_activity rails 未初始化的常量 ::PublicActivity

> ID：15266021
> 
> 赞同：1
> 
> 时间：2013-03-07T08:04:49.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在努力研究如何将 public_activity 添加到我的 rails 应用程序中。

我已添加 gemfile 并成功捆绑

在我的guidelines.rb（模型）中，我有

```
class Guideline < ActiveRecord::Base
  include PublicActivity::Model
 tracked

    def to_param
        "#{id} #{title}".parameterize
    end

  attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty, :updated_by, :current_user, :subtitle, :slug, :comments

 belongs_to :user
 has_many :favourite_guidelines 
```

但我得到了错误

```
uninitialized constant Guideline::PublicActivity 
```

我是否需要添加其他内容才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:08:48.453

检查您是否正确命名了文件，这可能是一个错字。你有 public_activitiy.rb 或 publicactivity.rb 吗？因为它应该是第一个。希望这有帮助:)

或者可能是本杰明所说的，重新启动你的服务器:)

# dart - 飞镖剪贴板数据始终为空

> ID：15266023
> 
> 赞同：0
> 
> 时间：2013-03-07T08:04:52.077
> 
> 标签：dart, dart-html

以下

**main.html**

```
<!DOCTYPE html>

<html>
  <head>
    <title>test</title>
  </head>
  <body>
    <p id="test" draggable="true">hello world</p> 
    <script type="application/dart" src="main.dart"></script>
    <!-- for this next line to work, your pubspec.yaml file must have a dependency on 'browser' -->
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

和**main.dart**

```
import 'dart:html';
void main() {
  var elem = query('#test');
  elem.onDragStart.listen((evt) {
    evt.clipboardData.setData('text/html', elem.innerHtml);
  });
} 
```

正在产生异常

```
The null object does not have a method 'setData'.

NoSuchMethodError : method not found: 'setData'
Receiver: null
Arguments: ["text/html", "hello world"] 
```

我已经搜索过，但找不到关于我可能做错什么的相关信息，或者根本没有关于 dart 中的 clipboardData 的相关信息（即使 API 对这个问题保持沉默，源 dart:html 文件只是指向“本机代码"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:41:05.127

（从我对原始问题的评论）

改用这个：

```
evt.dataTransfer.setData('text/html', elem.innerHtml); 
```

它是[（api ref）](http://api.dartlang.org/docs/bleeding_edge/dart_html/MouseEvent.html#dataTransfer)而不是基类的[属性`MouseEvent`](http://api.dartlang.org/docs/bleeding_edge/dart_html/MouseEvent.html#dataTransfer)`Event`，您可以通过显式声明它`evt`的类型来获得自动完成和删除编辑器警告`MouseEvent`：

```
elem.onDragStart.listen((MouseEvent evt) {
  evt.dataTransfer.setData('text/html', elem.innerHtml);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:54:33.837

`clipboardData`似乎已在没有警告的情况下被弃用。在 web_ui 组件中（我第一次观察到这一点），编辑器无法将 dataTransfer 属性识别为`Event`. 我在网络上找不到任何关于为什么进行此更改的参考（API 文档没有说明此事，我在讨论板上找不到任何最近的帖子）...

# java - 使用存储和保存方法写入属性文件

> ID：15266026
> 
> 赞同：0
> 
> 时间：2013-03-07T08:05:08.300
> 
> 标签：java, properties

*   使用 store 和 save 方法写入属性文件有什么区别？
*   两者都做同样的事情吗？

> 保存（输出流输出，字符串注释）
> 
> 存储（输出流输出，字符串注释）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:07:18.607

从[java.util.Properties.save](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#save%28java.io.OutputStream,%20java.lang.String%29)上的文档：

> **已弃用。**如果在保存属性列表时发生 I/O 错误，此方法不会引发 IOException。保存属性列表的首选方法是通过 store(OutputStream out, String comments) 方法或 storeToXML(OutputStream os, String comment) 方法。调用 store(OutputStream out, String comments) 方法并抑制抛出的 IOExceptions。

所以，`save`做同样的事情，但吞下任何例外。不像`store`是`Deprecated`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:07:33.923

该`save`方法已弃用。您应该改用`store`方法。

更多：[保存](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#save%28java.io.OutputStream,%20java.lang.String%29)和[存储](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store%28java.io.OutputStream,%20java.lang.String%29)

# autocomplete - VS2012 IntelliSense Suggestion Mode 永久设置？

> ID：15266031
> 
> 赞同：2
> 
> 时间：2013-03-07T08:05:34.823
> 
> 标签：autocomplete, visual-studio-2012, intellisense

有没有办法使 VS2012 IntelliSense 建议模式永久化，通过在 TOOLS -> Options 中的某处设置它？或者也许通过在注册表中的某个地方设置它？

我真的很喜欢这个概念，如果您知道 IntelliSense 不会自动完成您的新类名，它会使 TDD 变得容易得多。但是，VS2012 并不总是在新的解决方案/项目上记住这个设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T08:56:49.013

您可以在 Visual Studio 2012 中按 键在完成模式和建议模式之间切换`Strg + Alt + Space`。这在这两种模式之间切换。

或者您可以使用`Edit -> IntelliSense -> Toggle Completion Mode`.

目前没有办法将`Suggestion Mode`所有项目设为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T15:17:25.753

MSDN 列出了可以使用**/Command**开关解决此问题的[Devenv 命令行开关。](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx) 附加到快捷方式的 Target 属性。 **`/Command "Edit.ToggleCompletionMode"`**

 **或者从命令行启动 Visual Studio：`devenv /Command "Edit.ToggleCompletionMode"`**

# iphone - 在选择器视图 iphone 中选择行时出错

> ID：15266040
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:06:13.480
> 
> 标签：iphone, ios, datepicker

我想显示带有年份的选择器视图，我将年份数组存储在我的 userDC 实体类中，但我在日志消息中收到错误

```
 -(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    userdc = [years objectAtIndex:row];
    NSLog(@"%d",userdc.user_year);

} 
```

我的错误是这样的

```
-[__NSCFString user_year]: unrecognized selector sent to instance 0xaaa7220 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:08:52.817

如果您的 user_year 是字符串，那么

```
NSLog(@"%@",userdc.user_year); 
```

如果它是整数，那么

```
NSLog(@"%@",[NSString stringWithFormat:@"%d",userdc.user_year]); 
```

如果你的 userdc 是字典，那么使用

```
NSLog(@"%@",[NSString stringWithFormat:@"%d",[userdc objectForKey:@"user_year"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:24:35.213

yeppii .. 我解决了我自己的问题:):) 通过这样做，感谢所有帮助我的人，干杯

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    userdc=[[userDC alloc]init];
    userdc.user_year = [years objectAtIndex:row];

    NSLog(@"%@",userdc.user_year);

} 
```

# mysql - 如何在zend2中编写复杂的sql查询

> ID：15266042
> 
> 赞同：1
> 
> 时间：2013-03-07T08:06:25.093
> 
> 标签：mysql, zend-framework2

我想在 zend 框架 2 中编写如下的 mySQL 查询。

如何在 zend Db 选择约定中转换它？

```
 SELECT profiles.*, 
    user.email,
    user.first_name,
    user.last_name,
    portfilio_images.profileImage,
    images.url AS imgurl
    FROM profiles

    INNER JOIN user ON user.user_id = profiles.ownerId

    LEFT JOIN (
        SELECT *
        FROM portfilio_images
        WHERE portfilio_images.profileImage = '1'
    ) as portfilio_images ON portfilio_images.profileId = profiles.id

    LEFT JOIN images ON images.id = portfilio_images.imageId

    WHERE profiles.ownerId != '4' AND (profiles.name LIKE '%a%' OR user.first_name LIKE '%a%' OR user.last_name LIKE '%a%')

    GROUP BY user.user_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:16:06.417

您还可以使用 Zend\Db\Sql\Select，它允许您以编程方式构建复杂的查询。请参阅此处的文档：

[http://zf2.readthedocs.org/en/release-2.1.1/modules/zend.db.sql.html#zend-db-sql-select](http://zf2.readthedocs.org/en/release-2.1.1/modules/zend.db.sql.html#zend-db-sql-select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:13:02.813

您总是可以只执行原始查询：

```
$sql = "SELECT * FROM test";

$statement = $abAdapter->query($sql);
$result = $statement->execute();

$resultSet = new ResultSet;
$resultSet->initialize($result);

return $resultSet; 
```

或者如果你想添加一些参数

```
$sql = "SELECT * FROM test where col = ?";

$statement = $dbAdapter->query($sql);
$result = $statement->execute(array(99));

$resultSet = new ResultSet;
$resultSet->initialize($result);

return $resultSet; 
```

# c# - 将新项目添加到数据库后如何自动更新列表视图

> ID：15266044
> 
> 赞同：0
> 
> 时间：2013-03-07T08:06:32.987
> 
> 标签：c#, wpf, listview

我正在使用 C# WPF MVVM。所以在 XAML 中有一个列表视图，它绑定到一个对象，用于根据选项卡显示来自 sql 数据库的不同信息。

例如。我有两种形式：一种是显示信息，另一种是用于输入信息。在另一种形式中输入新信息后，如何自动更新一种形式的列表视图？因为现在我必须切换标签才能更新列表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:02:14.243

After you enter new information into a form, try to invoke your own method, which will update your information into a list view. So you can use some event eg. `DataContentChanged` or your update method can be called when u click the button which adds new data into your form. Example of refresh method should look like this:

```
public void lbRefresh()        
{
    //create itemsList for listbox
    ArrayList itemsList = new ArrayList();
    //count how many information you wana to add
    //here I count how many columns I have in dataGrid1
    int count = dataGrid1.Columns.Count;
    //for cycle to add my strings of columns headers into an itemsList
    for (int i = 0; i < count; i++)
    {
        itemsList.Add(dataGrid1.Columns[i].Header.ToString());
    }
    //simply refresh my itemsList into my listBox1
    listBox1.ItemsSource = itemsList;
} 
```

EDIT: To finish and solve your problem, try to use this snippet of code:

```
//some btn_Click Event in one window 
//(lets say, its your callback " to update" button in datagrid)
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    //here you doing somethin
    //after your datagrid got updated, try to store the object, 
    //which u want to send into your eg. listbox

    data[0] = data; //my stored data in array

    //for better understanding, this method "Button_Click_1" is called from Window1.xaml.cs
    //and I want to pass information into my another window Graph1.xaml.cs

    //create "newWindow" object onto your another window and send "data" by constuctor
    var newWindow = new Graph1(data); //line *
    //you can call this if u want to show that window after changes applied
    newWindow.Show();
} 
```

After that your Graph1.xaml.cs should look like this:

```
public partial class Graph1 : Window
{//this method takes over your data u sent by line * into previous method explained
    public Graph1(int[]data) 
    {
        InitializeComponent();
        //now you can direcly use your "data" or can call another method and pass your data into it
        ownListBoxUpdateMethod(data);

    }
    private void ownListBoxUpdateMethod(int[] data)
    {
        //update your listbox here and its done ;-)
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:17:25.500

这个元素的绑定方向应该暴露给 **TwoWay** (Mode=TwoWay)

像这样：

> x:Name="list" ItemsSource="{Binding ....... , Path=........., Mode=TwoWay}}" ......

除了默认绑定（一种方式）之外，您还可以将绑定配置为两种方式，一种方式到来源，等等。这是通过指定 Mode 属性来完成的。

**OneWay**：导致对源属性的更改自动更新目标属性，但源未更改 **TwoWay**：源或目标中的更改自动导致对另一个更新 **OneWayToSource**：导致对目标属性的更改自动更新源属性目标未更改 **OneTime**：仅导致对源属性的第一次更改会自动更新目标属性，但源不会更改，后续更改不会影响目标属性

你可以看看这个：http: [//msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# html - 动态添加未构成正确查询字符串的元素后提交表单

> ID：15266047
> 
> 赞同：0
> 
> 时间：2013-03-07T08:06:52.123
> 
> 标签：html, forms, query-string, form-submit

我在 jQuerymobile 页面中创建了一个带有 2 个输入文本字段的表单。但是在单击此表单之外的某个按钮时，我会在 div“ratingInfo”内动态地向该表单添加 2 个输入字段。

```
<form id="rate" method="GET" action="Ratings" data-ajax="false"  onsubmit="return getRating();">
                    <label for="regid">Enter Registration ID : </label>
                    <input type="text" placeholder="regid" id="regid" name="regid" data-mini="true" data-ajax="false" style="width:240px;"/>
                    <fieldset style="margin-top:30px;" data-role="controlgroup" data-type="horizontal" >
                        <legend>Rate the session our of 5 :</legend>
                        <input type="radio" name="radio" id="rating1" value="1" checked="checked">
                        <label for="rating1">1</label>
                        <input type="radio" name="radio" id="rating2" value="2">
                        <label for="rating2">2</label>
                        <input type="radio" name="radio" id="rating3" value="3">
                        <label for="rating3">3</label>
                        <input type="radio" name="radio" id="rating4" value="4">
                        <label for="rating4">4</label>
                        <input type="radio" name="radio" id="rating5" value="5">
                        <label for="rating5">5</label>
                    </fieldset>
                    <div id="ratingInfo" style="margin-top:20px; margin-bottom:20px; color:rgb(177, 175, 175);"></div>                  
                    <button data-inline="true" data-rel="back" data-theme="c" type="reset" >Reset</button>
                    <button data-inline="true" data-transition="flow" type="submit" name="submit" id="submit" data-ajax="false" data-theme="b">Submit</button>
            </form> 
```

我在 getRating() 方法中用于添加动态元素的 jQuery 是：

```
$( "#ratingInfo" ).empty();
$( "#ratingInfo" ).append( "<span >Session ID - </span><input type='text' style='width:240px; color:rgb(177, 175, 175);' name='eventId' id='eventId' disabled='true'>" );
$("#eventId").val(eventId);
$( "#ratingInfo" ).append( "<br/><span>Session Description - </span><input type='text' style='width:240px; color:rgb(177, 175, 175);' name='eventDesc' disabled='true' id='eventDesc'>" );
$("#eventDesc").val(eventDesc); 
```

当我提交表单时，查询字符串（在 URL 中）只有 2 个参数，即“regId”和“radio”。其余 2 个输入字段“eventId”和“eventDesc”也未添加到 URL 中。但是单击重置按钮时，包括动态添加的字段在内的所有字段也会被重置。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:43:08.997

到目前为止，我已经解决了这个问题。

在“ratingInfo”div 中，我创建了输入元素。对于他们，我通过 jquery 给出了值。

我已将样式添加到“ratingInfo”div 为：

```
display:none; 
```

使其不可见。

谢谢。

# sql - 哪个 SQL 会起作用？

> ID：15266048
> 
> 赞同：0
> 
> 时间：2013-03-07T08:06:56.117
> 
> 标签：sql, database, sqlite

我正在尝试为我的应用程序制定最佳的数据库结构和 SQL。

场景是这样的：

> Jim 和 John 需要每周针对不同的项目更新他们的时间表。当他们这样做时，他们使用 html 表单来插入基于一周最后一天的日期的小时数。

这很好，将插入一个包含名称、项目、日期和时间的新行

但是，如果 jim 和 john 的工作时间比他们预期的要多，并且需要更新他们的时间表，我希望他们能够使用该表格，并且`UPDATE`如果名称、项目名称和日期与提交了什么。

要插入的 SQL：

```
INSERT OR REPLACE INTO RESOURCE(NAME, DATE, PROJECT, HOURS) VALUES ('"+ name+ "', '"+ date+ "', '"+ project+ "','" + hours + "'); 
```

工作至今：

我在 SQLITE DB 上创建了以下 DB 结构。

```
CREATE TABLE RESOURCE (
    name VARCHAR(16),
    date DATE,
    project VARCHAR(16),
    hours VARCHAR(16)
) 
```

我创建了以下索引来尝试解决我的问题。

```
CREATE UNIQUE INDEX myindex ON RESOURCE(NAME, DATE, PROJECT) 
```

但是，问题是当 jim 更新与 john 相同的日期、项目和时间的工作时间时，Johns 行被替换，只剩下 jims。

希望我已经清楚地解释了这个问题，如果没有，请告诉我，我会提供其他需要的东西。

我的问题是：我可以用我的 SQL 或我的数据库结构来改变什么，以允许上述场景工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:44:15.110

我得到的是，当 jim/jhon 再次进入他的时间时，会执行一个更新查询来更新整个记录，而不是更新 jim/jhons 自己的记录。主要原因是您的表上没有任何唯一键/主键，这就是您的查询更新很多的原因。

您需要做的是有一个键列，并根据该键更新他们的记录，您将在 where 子句中使用类似的内容

WHERE RESOURCE_ID = @RID //特定资源的 ID

# windows - windows audio waveOutSetVolume 交叉连接 midiOutSetVolume

> ID：15266050
> 
> 赞同：1
> 
> 时间：2013-03-07T08:06:58.857
> 
> 标签：windows, audio

我有一个程序可以生成 midi 和 wav 音频。我需要能够分别控制 MIDI 和音频的音量和平衡，理论上，我需要做的似乎就是打电话

```
 unsigned short left = (unsigned short)(wavvol*wavbal/100.0);
  unsigned short right = (unsigned short)(wavvol*(100-wavbal)/100.0);
  MMRESULT err = waveOutSetVolume(hWaveOut, left | (right<<16)); // for audio 
```

和

```
 unsigned short left = (unsigned short)(midivol*midibal/100.0);
  unsigned short right = (unsigned short)(midivol*(100-midibal)/100.0);
  MMRESULT err = midiOutSetVolume(s_hmidiout, left | (right<<16)); // for midi 
```

为中音

问题在于，控制 midi 音量会设置波形音量和签证，就像它们在窗户内粘合在一起

有谁知道是否有办法解开它们？

顺便说一句，我在 Windows 7 上，我知道微软在 win7 中搞砸了音频。在 XP 上，我有一个音频控制面板，带有单独的 midi 和 wave 控件，这似乎已经消失了。我想他们现在只是在内部混合它，即使在 API 级别也不公开它，所以也许我已经回答了我自己的问题。

仍然有兴趣知道是否有更好的答案。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T21:42:36.517

我不认为他们可以分开。您可以移至较新的[IAudioClient](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370865%28v=vs.85%29.aspx)界面并使用两个[WASAPI](http://msdn.microsoft.com/en-us/library/ms679162.aspx)会话分别控制音量 - 一个用于 wav，一个用于 midi。这在 Vista 下的任何东西上都不起作用。

或者，您可以在代码中跟踪音量级别，只要您不同时播放 wav 和 midi，请在播放前重置它们。

# ruby-on-rails - OAuth::Unauthorized 401 Unauthorized for omniauth-twitter in rails

> ID：15266051
> 
> 赞同：5
> 
> 时间：2013-03-07T08:06:59.610
> 
> 标签：ruby-on-rails, twitter, localhost, omniauth

当我单击 [http://127.0.0.1:3000/auth/twitter] 时，我在 Rails 中收到 OAuth::Unauthorized 401 Unauthorized 错误。我正在关注 Railscast 视频 #241，以使用我的 rails 应用程序进行 Twitter 身份验证。我用谷歌搜索了很多，但找不到答案。

```
 Info regarding app on twitter:
 Callback URL: [http://127.0.0.1:3000/auth/twitter/callback]
 Website: [http://127.0.0.1:3000]

### omniauth.rb 
Rails.application.config.middleware.use OmniAuth::Builder do
  # provider :developer unless Rails.env.production?
  provider :twitter, ENV['75UOAIDmKrRXvXKBhNvKA'],    ENV['GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A']
end

### routes.rb
Chilli::Application.routes.draw do
  resources :posts
  root :to => 'posts#index'
  #match '/auth/:twitter/callback' => 'sessions#create', :as => :auth_callback
  match 'auth/twitter/callback', to: 'sessions#create'
end

### application.html.erb
<div id="user_nav">
<%= link_to "Sign in with Twitter", "/auth/twitter"%>
</div>

### sessions_controller.rb
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env['omniauth.auth'])
    session[:user_id] = user.id
    redirect_to root_url, notice: "Signed in."
  end
end

### user.rb
class User < ActiveRecord::Base
  attr_accessible :name, :provider, :uid
  def self.from_omniauth(auth)
    where(auth.slice("provider", "uid")).first || create_from_omniauth(auth)
  end

  def self.create_from_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["nickname"]
     end
   end
 end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T08:17:11.060

在`omniauth.rb`什么
`ENV['75UOAIDmKrRXvXKBhNvKA'], ENV['GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A']`？

如果`75UOAIDmKrRXvXKBhNvKA`和`GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A`是你的`APP_ID`，`APP_SECRET`那么它应该写成：

```
provider :twitter, '75UOAIDmKrRXvXKBhNvKA', 'GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T15:33:43.403

我有同样的问题，解决我的问题是：

改变：

```
ENV['75UOAIDmKrRXvXKBhNvKA'],ENV['GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A'] 
```

到：

```
'75UOAIDmKrRXvXKBhNvKA', 'GrIaBI0tQy2TtjOtaFL9VxT6s9qq1sV7h9yRaZW4A' 
```

并在此处的 'auth' 之前放置一个 '/'：

```
match '/auth/:provider/callback', to: 'sessions#create', via: 'get'
match '/auth/failure', to: redirect('/'), via: 'get' 
```

# angularjs - 为什么这个 angularjs 示例不适用于 plunker？

> ID：15266052
> 
> 赞同：6
> 
> 时间：2013-03-07T08:07:00.833
> 
> 标签：angularjs, angularjs-directive

在这个角度文档中： http: [//docs.angularjs.org/guide/concepts](http://docs.angularjs.org/guide/concepts)，有一个关于`Directives`.

> ## 指令
> 
> 指令是由自定义属性、元素名称或类名称的存在触发的行为或 DOM 转换。指令允许您以声明方式扩展 HTML 词汇表。以下是为 HTML 中的 contenteditable 启用数据绑定的示例。

它提供了两个现场演示，一个用于 plunker，另一个用于 jsfiddle。

*   plunker：[http ://plnkr.co/edit/nsAUafYFA1tHPo52TWUm?p=preview](http://plnkr.co/edit/nsAUafYFA1tHPo52TWUm?p=preview)
*   jsfiddle：http: [//jsfiddle.net/rnL84/](http://jsfiddle.net/rnL84/)

为什么 jsfiddle 一个很好用，而 plunker 一个不行？它们具有完全相同的代码，并且控制台中没有错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-21T18:17:06.173

将 Plunker 提供的脚本替换为

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T08:25:32.847

plunker 有`ng-app`而不是`ng-app='directive'`在**index.html**中。

需要在[ng-app中指定](http://docs.angularjs.org/api/ng.directive%3angApp)**script.js** javascript 文件中定义的模块（在此示例中命名为**指令**），以便它获取 contenteditable 指令：

 **`angular.module('directive', [])...`

请参阅[此 plunker](http://plnkr.co/edit/eZhDz8hIPjM6sjcnAOhz?p=preview)以获取工作版本。**

# c++ - 3rd 方库冲突的定义/重新定义

> ID：15266053
> 
> 赞同：3
> 
> 时间：2013-03-07T08:07:08.670
> 
> 标签：c++, c, qt, typedef, c-preprocessor

我正在使用两个独立的库在 Qt 平台上工作。我面临的问题是他的两个库对 int32_t 有不同的声明。

第一个图书馆有：

```
#ifdef _WIN32
#if ULONG_MAX == 0xffffffff 
typedef long int32_t;
#else
typedef int int32_t;
#endif
#endif 
```

第二个图书馆：

```
typedef signed __int32    int32_t;
typedef unsigned __int32  uint32_t; 
```

我得到的错误是：

> C:\Program Files (x86)\SiliconSoftware\Runtime5.1\include\msinttypes\stdint.h:91：错误：C2371：'int32_t'：重新定义；不同的基本类型 c:\program files (x86)\matlab\r2008a\extern\include\mclmcr.h:216：参见“int32_t”的声明

我尝试在 stackoverflow 上关注这篇文章：

[两个 3rd 方库中 uint32 的 Typedef 重新定义 (C2371)](https://stackoverflow.com/questions/4416932/typedef-redefinition-c2371-for-uint32-in-two-3rd-party-libraries)

我试图在我的代码中实现它：

```
#define int32_t VicTorv3_int32_t
#include"mclmcr.h"
#undef int32_t
#define int32_t Silicon_int32_t
#include "stdint.h"
#undef int32_t 
```

我仍然得到同样的错误。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T16:47:22.710

stdint.h 也是一个系统包含文件。它很有可能在定义/取消定义解决方法之前被包含在内。当您尝试再次包含该文件时，包含保护会执行其工作。您可以使用以下方法检查情况： [在 Visual Studio 中显示 C++ 文件的#include 层次结构](https://stackoverflow.com/questions/1137966/displaying-the-include-hierarchy-for-a-c-file-in-visual-studio)

我建议将包含 stdint.h 的部分移到文件的最顶部，在所有其他包含之前。

请注意，使用另一个版本隐藏系统包含文件 stdint.h 会导致问题。

# iphone - 我可以在我的应用程序中使用 whatsapp 发送消息吗

> ID：15266063
> 
> 赞同：5
> 
> 时间：2013-03-07T08:07:58.590
> 
> 标签：iphone, ios, whatsapp

我想在我的应用程序中使用 whatsapp 向其他手机发送消息。我在 Github 上看到了这个用于 whatsapp 的公共 API，[在这里](https://github.com/venomous0x/WhatsAPI)。但我没有找到适用于 iOS 的 API。那么可以在iOS应用程序中使用whatsapp吗？那合法吗？我在哪里可以找到适用于 iOS 的 whatsapp 的公共 API？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-21T12:29:04.497

是的，您可以使用 whatsapp 通过您的 ios 应用程序发送文本/图像。有两种方法可以做到这一点 1\. URL 方案

```
NSURL *whatsappURL = [NSURL URLWithString:@"whatsapp://send?text=Hello%2C%20World!"];
if ([[UIApplication sharedApplication] canOpenURL: whatsappURL]) {
    [[UIApplication sharedApplication] openURL: whatsappURL];
} 
```

2.  UIDocumentInteraction 见下面的链接 [http://www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-09T02:28:46.913

是的，您可以通过：

1.  网址方案
2.  UIDocumentInteraction

正如@NSAnant 提到的

万一您正在编写混合应用程序（Cordova、phonegap 等），使用 Whatsapp FAQ 中的 URL 方案的简单锚点将解决问题（[将 WhatsApp 集成到我的应用程序中）](http://www.whatsapp.com/faq/en/iphone/23559013)

```
<a href="whatsapp://send?text=666isthenumberofthebeast" id="my_button" class="button_default button_color">Send Whatsapp Friendly Message</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T07:46:51.927

就这么简单。希望能帮助到你 ;-）

```
NSURL *whatsappURL = [NSURL URLWithString:@"whatsapp://send?text=Hello%20world"];
if ([[UIApplication sharedApplication] canOpenURL: whatsappURL]) {
    //WhatsApp is installed in your device and you can use it.
    [[UIApplication sharedApplication] openURL: whatsappURL];
} else {
    //WhatsApp is not installed or is not available
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T10:14:37.773

在**iOS 9**中：您需要在 info.plist 中设置密钥

```
<key>LSApplicationQueriesSchemes</key>
<array>
 <string>fbapi</string>
 <string>fbauth2</string>
 <string>fbshareextension</string>
 <string>fb-messenger-api</string>
 <string>twitter</string>
 <string>whatsapp</string>
 <string>wechat</string>
 <string>line</string>
 <string>instagram</string>
 <string>kakaotalk</string>
 <string>mqq</string>
 <string>vk</string>
 <string>comgooglemaps</string>
</array> 
```

设置键后，以下代码在 iOS 9 中运行。

```
NSString * msg = @"mahesh";
NSString * urlWhats = [NSString stringWithFormat:@"whatsapp://send?text=%@",msg];
NSURL * whatsappURL = [NSURL URLWithString:[urlWhats stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
if ([[UIApplication sharedApplication] canOpenURL: whatsappURL]) {
    [[UIApplication sharedApplication] openURL: whatsappURL];
} else {
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"WhatsApp not installed." message:@"Your device has no WhatsApp installed." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-07T08:10:46.623

不 这不合法。你不能在你的应用程序中使用 watsapp。

# yii - CListView - 添加序列号

> ID：15266068
> 
> 赞同：2
> 
> 时间：2013-03-07T08:08:24.127
> 
> 标签：yii

```
<table border="1">
    <tr>
        <th width="35">S.No.</th>
        <th align="left">Club Member</th>
        <th width="155">Schedule</th>
        <th width="155">Point</th>
    </tr>
        <?php $this->widget('zii.widgets.CListView', array(
            'dataProvider'=>$dataProvider,
            'itemView'=>'_reportSchedule',
        )); ?>
</table> 
```

我怎样才能获得像 1,2,3 之类的序列号？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:16:32.190

在视图文件“_reportSchedule”中使用：

```
<?php echo ++$index;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:19:26.733

在您的**_reportSchedule.php**部分视图中，您可以使用以下命令将其回显：

```
echo $data->serial_number; 
```

这假定 serial_number 是您使用的任何模型的属性。正如 Sudhanshu Saxena 所说，如果您只是想要索引（集合中项目的编号），请使用：

```
echo $index 
```

这是一个从零开始的编号系统（第一条记录的索引为 0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T05:35:00.543

只需在视图文件中使用“_reportSchedule”

```
$widget->dataProvider->getPagination()->currentPage * $widget->dataProvider->getPagination()->pageSize + $index + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T14:50:37.930

`$index`表示从 开始的行号`0`，是在所有页面上显示正确的数字需要进行计算：

```
$widget->dataProvider->getPagination()->currentPage * $widget->dataProvider->getPagination()->pageSize + $index + 1 
```

# iphone - iOS 确定以编程方式创建的按钮

> ID：15266069
> 
> 赞同：0
> 
> 时间：2013-03-07T08:08:28.497
> 
> 标签：iphone, ios, uibutton

我使用for循环制作了一个带有图像和按钮的水平滚动视图，我现在要做的是当按下按钮时，打开它对应于全屏的图像。我遇到的问题是确定按下了哪个按钮。我在用 ：

```
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后 ：

```
-(void)buttonPressed:(UIButton *)sender {} 
```

我能做些什么来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:34:26.663

> 按下了哪个按钮

创建一个`property`来存储一个`tag`。在`buttonPressed`方法中将属性设置为`sender.tag`

现在您可以知道最后按下的按钮是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:34:44.520

这`sender`是用户点击的按钮，因此当您创建按钮时，您可以使用该`tag`属性并将其设置为保存图像的数组的索引。但是，如果您更改图像或按钮的顺序或数量，这可能会有点不稳定，因此请准备好进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:36:05.810

一种方法是保留您的按钮的引用（使用属性，类中的属性）并测试它是否是您的 buttonPressed 方法中的好按钮

```
- (void)buttonPressed:(UIButton *)sender {
  if (sender == self.myButton) {
    // DO YOUR WORK HERE
  }
} 
```

您还可以为此创建一个方法，并且只有一个按钮

顺便说一句，最好说

```
- (IBAction)buttonPressed:(UIButton *)sender 
```

然后您可以在界面构建器界面中设置按钮的目标

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T08:38:38.500

为for循环中的每个按钮设置标签`but.tag=i;`

> -(void)buttonPressed:(UIButton *)sender {
> 
> if (sender.tag==1){
> 
> //显示图片1
> 
> }
> 
> 否则如果……
> 
> }

# java - 使用 Hadoop 自定义数据类型时出现 EOF 异常

> ID：15266076
> 
> 赞同：1
> 
> 时间：2013-03-07T08:08:56.857
> 
> 标签：java, hadoop, mapreduce

我是第一次在 Hadoop 中使用自定义数据类型。这是我的代码：

自定义数据类型：

```
public class TwitterData implements Writable {

private Long id;
private String text;
private Long createdAt;

public TwitterData(Long id, String text, Long createdAt) {
    super();
    this.id = id;
    this.text = text;
    this.createdAt = createdAt;
}

public TwitterData() {
    this(new Long(0L), new String(), new Long(0L));
}

@Override
public void readFields(DataInput in) throws IOException {
    System.out.println("In readFields...");
    id = in.readLong();
    text = in.readLine();
    createdAt = in.readLong();
}

@Override
public void write(DataOutput out) throws IOException {
    System.out.println("In write...");
    out.writeLong(id);
    out.writeChars(text);
    out.writeLong(createdAt);
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getText() {
    return text;
}

public void setText(String text) {
    this.text = text;
}

public Long getCreatedAt() {
    return createdAt;
}

public void setCreatedAt(Long createdAt) {
    this.createdAt = createdAt;
}
} 
```

映射器：

```
public class Map extends Mapper<Object, BSONObject, Text, TwitterData>{

@Override
public void map(Object key, BSONObject value, Context context) throws IOException, InterruptedException {
    BSONObject user = (BSONObject) value.get("user");
    String location = (String) user.get("location");

    TwitterData twitterData = new TwitterData((Long) value.get("id"),
            (String) value.get("text"), (Long) value.get("createdAt"));

    if(location.toLowerCase().indexOf("india") != -1) {
        context.write(new Text("India"), twitterData);
    } else {
        context.write(new Text("Other"), twitterData);
    }
}
} 
```

主要工作代码：

```
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(TwitterData.class); 
```

我在映射过程之后抛出了这个异常。我很惊讶为什么它会显示这个错误。谁能帮帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:24:29.243

你写字符，你读行。这是两个不同的序列化过程。

你需要做的是这样做：

```
@Override
public void readFields(DataInput in) throws IOException {
    id = in.readLong();
    text = in.readUTF();
    createdAt = in.readLong();
}

@Override
public void write(DataOutput out) throws IOException {
    out.writeLong(id);
    out.writeUTF(text);
    out.writeLong(createdAt);
} 
```

# android - 如何知道android中使用的wifi直接命令？

> ID：15266077
> 
> 赞同：0
> 
> 时间：2013-03-07T08:09:00.130
> 
> 标签：android, linux, command, wifi, wifi-direct

我有兴趣知道 Android 中使用了哪些命令？我看了一下 p2p WIFI direct 但我没有收到这些命令！

我从这个[链接](http://dishingtech.blogspot.com/2012/01/realtek-wi-fi-direct-programming-guide.html)中看到了这些在 Linux 中使用的命令。

但它们是否用于 android 框架件？如果是的话，我如何在有根设备上访问它们？

我看到`iwconfig`Android 不支持无线包，并查看链接显示如何安装它！

# c - 使用 32 位地址获取 64 位值

> ID：15266078
> 
> 赞同：3
> 
> 时间：2013-03-07T08:09:00.710
> 
> 标签：c

我有一个 32 位地址

```
uint32_t ptrToValue; 
```

我想从这个内存位置获得一个 64 位的值。

如果我喜欢这样

```
uint64_t value = *(uint64_t*) ptrToValue; 
```

我收到警告“使指针具有不同的整数大小”

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:13:01.587

使用正确大小的整数类型：`intptr_t`. 这是一个整数类型，保证可以转换为指针并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:27:36.097

> 我有一个 32 位地址

可能您的意思是您有一个指向 32 位（4 字节）内存的指针。

> uint32_t ptrToValue;

你是这个意思？：

> uint32_t* ptrToValue;

当您添加 * 时，警告应该消失。

正如 jogojapan 在评论中提到的那样，这忽略了对齐问题，所以让我解释一下。

如果组合的 64 位值在 64 位边界上（字节地址可被 8 整除），那么如果您想转换指针并立即读/写 64 位，则没有问题。但是，如果不是，**并且**您的机器不支持非对齐访问，那么就会发生不好的事情（即程序崩溃）。

如果您希望代码在任何机器上工作（至少那些*可以*一次存储 64 位的机器），您将不得不使用联合：

```
typedef union {
    uint32_t b32[2];
    uint64_t b64[1];
} bits64; 
```

然后，您可以声明一个类型变量`bytes8`并使用`b32[0]`和`b32[1]`或`b64[0]`取决于您是否要将其解释为 32 位或 64 位值。

# c# - 错误 95“System.Array”不包含“FindIndex”的定义

> ID：15266079
> 
> 赞同：1
> 
> 时间：2013-03-07T08:09:00.960
> 
> 标签：c#, arrays, windows-phone-7, windows-phone-8

我正在将现有的 Windows Phone 8 应用程序转换为 WP 7.1。但是我遇到了一个错误

```
'System.Array' does not contain a definition for 'FindIndex' 
```

在这一行。我错过了什么？

```
index = Array.FindIndex(AnswerLevelArr, s => s.Contains(CurrentFileName)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:17:14.800

Windows Phone 7.1 不支持[Array.FindIndex 方法（T[]，谓词） 。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/03y7c6xy%28v=vs.105%29.aspx)

> 版本信息
> 
> Windows Phone 操作系统
> 支持：8.0

相反，您可以使用`Linq`（确保添加`using System.Linq;`到文件顶部）：

```
index = AnswerLevelArr
    .Select((i, position) => new { Item = i, IndexOf = position })
    .First(s => s.Item.Contains(CurrentFileName)).IndexOf; 
```

或者：

```
int index=0;
var result = AnswerLevelArr.SkipWhile((s, ind) =>
{
    if (!s.Contains(CurrentFileName))
    {
        index++;
        return false;
    }
    else
    {
        return true;
    }
}).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:11:01.677

根据msdn

```
public static int FindIndex<T>(
    T[] array,
    Predicate<T> match
) 
```

[http://msdn.microsoft.com/en-us/library/03y7c6xy.aspx](http://msdn.microsoft.com/en-us/library/03y7c6xy.aspx)

你需要包括类型？

编辑：`index = Array.FindIndex<T>(AnswerLevelArr, s => s.Contains(CurrentFileName));`

EDIT2：为历史而保留，但在进一步检查后是错误的......

如果您想要一个类似于您的方法的查找索引，您可以提供覆盖

```
int FindIndex(string s)
{
    int size = this.length;
    for(int i = 0; i < size; i++)
    {
    if(this[i] = s)
        return i;
     }
     return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:18:49.803

从[`Array.FindIndex<T> Method (T[], Predicate<T>)`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/03y7c6xy%28v=vs.105%29.aspx)

```
Version Information
Windows Phone OS
Supported in: 8.0 
```

看起来这种方法不支持`Windows Phone 7.1`

# asp.net-mvc - 第二个 DDL 未触发

> ID：15266083
> 
> 赞同：0
> 
> 时间：2013-03-07T08:09:30.433
> 
> 标签：asp.net-mvc, jquery, cascadingdropdown

> 美好的一天，为什么当我选择父下拉列表时我的第二个 DDL 没有触发。**任何人都可以在m=>m.StateModel**旁边的视图中详细说明脚本和**[ 0]**
> 
>  **对于最后一个问题，如何使这个 DDL 动态化，如何使用数据库数据填充它？**

 ****模型**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Kaskid.Models
{

    public class State
    {
        public int Id { get; set; }
        public string StateName { get; set; }
    }

    public class City
    {
        public int Id { get; set; }
        public int StateId { get; set; }
        public string CityName { get; set; }
    }
    public class CountryModel
    {
        public List<State> StateModel { get; set; }
        public SelectList FilteredCity { get; set; }

    }
} 
```

**控制器**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Kaskid.Models;

namespace Kaskid.Controllers
{
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {

            CountryModel objCountryModel = new CountryModel();
            objCountryModel.StateModel = new List<State>();
            objCountryModel.StateModel = GetAllState();
            return View(objCountryModel);
        }

         [HttpPost]
        public ActionResult GetCityByStateId(int stateId)
        {
            List<City> objCity = new List<City>();
            objCity = GetAllcity().Where(m => m.StateId == stateId).ToList();
            SelectList obgcity = new SelectList(objCity, "Id", "CityName", 0);
            return Json(obgcity);

        }

        public List<State> GetAllState()
        {
            List<State> objState = new List<State>();
        objState.Add(new State {Id = 0,StateName="Select State"});
        objState.Add(new State {Id = 1,StateName = "State 1"});
        objState.Add(new State {Id = 2, StateName="State 2"});
        objState.Add(new State {Id = 3, StateName="State 3"});
         return objState; 

        }

        public List<City> GetAllcity()
        {
        List<City> objCity = new List<City>();
        objCity.Add(new City{Id = 1,StateId = 1, CityName = "City1-1" });
        objCity.Add(new City{Id = 2,StateId=2,CityName = "City2-1"});
        objCity.Add(new City{Id = 3,StateId=4,CityName="City4-1"});
        objCity.Add(new City{Id = 4,StateId=1,CityName="City1-2"});
        return objCity;
        }

    }
} 
```

**看法**

```
@model Kaskid.Models.CountryModel
@{
    ViewBag.Title = "Index";
}
<script language="javascript">
    function GetCity(_stateId) {
        var procemessage = "<option value='0'> Please wait...</option>";
        $('#ddlcity').html(procemessage).show();
        var url = "/Home/GetCityByStaeId/";

        $.ajax({
            url: url,
            data: { stateid: _stateId },
            cache: false,
            type: "POST",
            success: function (data) {
                var markup = "<option value='0'>Select City</option>";
                for (var x = 0; x < data.length; x++) {
                    markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
                }
                $('#ddlcity').html(markup).show();
            },
            error: function (reponse) {
                alert("error : " + reponse);
            }
        });

    }
</script>
<h4>
    MVC3 Cascading Dropdown List Using Jquery</h4>
@using (Html.BeginForm("", ""))
{
    @Html.DropDownListFor(m => m.StateModel[0].Id, new SelectList(Model.StateModel, "Id", "StateName"), new { @id = "ddlstate", @style = "width:200px;", @onchange = "javascript:GetCity(this.value);" })
    <br />
    <br />
    <select id="ddlcity" name="ddlcity" style="width: 200px">
    </select>

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:13:27.420

你有一个错字：

```
var url = "/Home/GetCityByStaeId/"; 
```

但是您的控制器操作被调用`GetCityByStateId`而不是`GetCityByStaeId`. 你也可以看看[`similar example`](https://stackoverflow.com/a/4459084/29407)我曾经写过的一篇文章，你可以从中获得一些关于改进代码的想法。**

# jquery - 背景图像过渡的jQuery后备

> ID：15266084
> 
> 赞同：1
> 
> 时间：2013-03-07T08:09:30.757
> 
> 标签：jquery, background-image, css-transitions, fallback

我有一个脚本，它以设定的间隔在一组预加载的图像之间旋转以更改背景图像。我正在使用转换 ( `transition: background-image 2s ease`) 进行旋转交叉淡入淡出，但目前仅在 Chrome 中支持。

我可以使用 jQuery 修改脚本以动画元素淡出、更改源然后淡入，但启用此脚本会覆盖 Chrome 的行为。作为一个侧面/替代问题，是否可以使用 jQuery 模拟交叉淡入淡出？

如何允许 Chrome 使用 CSS 过渡并强制所有其他浏览器使用 jQuery 动画？

我正在使用 Modernizr，但我认为功能检测不会像大多数其他现代浏览器一样工作，`csstransitions`即使它们不支持某些特定的转换，例如`background-image`，但如果有人能证明我错了，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:14:11.637

您可以使用导航器对象来查找客户端是否是 chrome 浏览器广告将您的代码置于条件下。

```
$.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase()); 
if($.browser.chrome){
/*code for chrome browser*/

}
else{
/*code for other browser*/
} 
```

希望这有帮助

# html - 使用 CSS 获取 CSS 样式

> ID：15266085
> 
> 赞同：2
> 
> 时间：2013-03-07T08:09:32.087
> 
> 标签：html, css

这个问题故意很短，但我很好奇是否可能。

您可以在“带有”CSS 的 CSS 样式表中获取其他样式吗？

有点像用 jQuery 做这个：

```
var header_height = $('#header').css('height'); 
```

所以我可以做这样的计算：

```
#content {
    height: calc(100% - property('#header', 'height') - property('#footer', 'height'));
} 
```

例如， where 属性将代表另一个标签的 CSS 样式的获取。

此问题不允许使用 JavaScript ^^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:12:22.940

一个简短的回答：不，纯 CSS 是不可能的。您只能使用 JavaScript 或在生成纯 css的[SASS](http://sass-lang.com/)或[LESS等语言中进行限制。](http://lesscss.org/)但如果尺寸动态变化，两者都无济于事。

你在 CSS 中唯一的机会是百分比

```
#content {
    height: 80%;
} 
```

高度会根据父母的身高而变化。但这当然只适用于父元素。

# java - java - 如何在java swing中的jtabel中按数据显示分组？

> ID：15266086
> 
> 赞同：1
> 
> 时间：2013-03-07T08:09:32.053
> 
> 标签：java, mysql, database, swing

我必须面对一个问题，我想在 GroupWise 中显示数据 java swing jtable 中有这种类型的字段。

数据库表是：

**1] 类别**

*   类别ID int
*   类别名称变量

**2] 产品**

*   产品ID int
*   产品名称 var
*   浮动数量
*   categoryId 类别的 int 参考 [ **categoryid** ]

现在在 jTable java Swing 中显示 group by 查询数据，该类型格式

* * *

```
cat.Id | cat.Name | prod.Id | Prod.Name | qty | sub Tot | Tot Qty
1      | Mobile _____________________________________   |20 
```

*   1 诺基亚 5233 [10]
*   2 诺基亚 Lumiya 510 [10]

* * *

```
2      |  Pen Drive__________________________________   |50 
```

*   1 便士 [20]
*   2 生命值 [20]
*   3 索尼 [10]

## 总量为_ ***_* __ *_* __ *_* __ *_* __ *_* ___** _70

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:29:57.290

您可以尝试 EnvelopeTableModel [http://java-sl.com/envelope.html](http://java-sl.com/envelope.html) 只需加载您的数据并根据带有分组列的初始模型创建包装模型

# spring-mvc - 在 Spring Mvc 中的 jsp 中引用命令对象

> ID：15266098
> 
> 赞同：2
> 
> 时间：2013-03-07T08:10:03.797
> 
> 标签：spring-mvc

我是 Spring MVC。我的控制器类扩展了 AbstractWizardFormController 类。

我的命令对象 UpdateStockBean 包含 List。我的命令类如下所示

```
public class UpdateStockBean {
@SuppressWarnings("rawtypes")
private List dimensionStones =
    LazyList.decorate(new ArrayList(),FactoryUtils.instantiateFactory(DimensionStoneBean.class));
String productiondate;
long openbalance;

public UpdateStockBean() {
    super();
}

@SuppressWarnings("rawtypes")
public List getDimensionStones() {
    return dimensionStones;
}
public void setDimensionStones(@SuppressWarnings("rawtypes") List dimensionStones) {
    this.dimensionStones = dimensionStones;

}
} 
```

我已经使用表单支持对象来填充 JSP 中的字段。它看起来像下面。

```
protected Object formBackingObject(HttpServletRequest request)throws Exception {

            UpdateStockBean updateStockBean=new UpdateStockBean();

            updateStockBean.setDimensionStones(dimensionStoneBeans);//here dimensionStoneBeans is a list

    return updateStockBean;
    } 
```

我的问题出在我的jsp中

```
 <c:forEach items="${updateStockBean.dimensionStones}" var="DimensionStones" varStatus="i" begin="0">
              <tr class="dimensionStone">    
                 <td><form:input path="dimensionStones[${i.index}].stoneNo" id="stoneNo${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].length" id="length${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].breadth" id="breadth${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].height" id="height${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].dimension" id="dimension${i.index}" cssClass="controlStock"/></td>                 
                 <td><form:checkbox path="dimensionStones[${i.index}].isIssued" id="isIssued${i.index}" cssClass="check"/></td>
                 <td><a href="#" class="removeDimensionStone"><img src="images/plus3.png" width="20" height="20" title="Remove Dimension Stone"/></a></td>
              </tr>
            </c:forEach>  
            <c:if test="${empty updateStockBean.dimensionStones}">
                <tr class="dimensionStone defaultRow">    
                            <td><input type="text" name="dimensionStones[].stoneNo" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].length" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].breadth" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].height" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].dimension" value="" Class="controlStock"/></td>                            
                            <td><input type="checkbox" name="dimensionStones[].isIssued" value="Yes" Class="controlStock"/></td> 
                            <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>
                        </tr>
            </c:if> 
```

${updateStockBean.dimensionStones} 是空的。我们如何在我的 jsp 中引用由 formBacking() 方法填充的**updateStockBean对象。请解决我的问题**

servlet conf 如下所示

```
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
 <property name="mappings">
    <props>
      <prop key="updateStock.nic">UpdateStockController</prop>
    <props>
 </property>
</bean>

<bean id="UpdateStockController" class="mams.web.UpdateStockController">
    <property name="commandName"><value>updateStock</value></property>
    <property name="commandClass"><value>nic.mams.web.beans.UpdateStockBean</value>
    </property>
    <property name="stockRegisterService" ref="StockRegisterService"></property>
    <property name="dimensionStoneService" ref="DimensionStoneService"></property>
    <property name="validator" ref="UpdateStockValidator"></property>
    <property name="pages">
    <list>      
          <value>addOrEditOpenDimensionStone</value> //this value corresponds to my jsp
    </list>
    </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:27:11.997

这里**updateStockBean.dimensionStones**，updateStockBean 必须是命令名，而不是formbackingObject()方法返回的对象名。即

```
<form commandname="updateStock">

<c:forEach items="${updateStock.dimensionStones}" var="DimensionStones" varStatus="i" begin="0">
              <tr class="dimensionStone">    
                 <td><form:input path="dimensionStones[${i.index}].stoneNo" id="stoneNo${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].length" id="length${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].breadth" id="breadth${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].height" id="height${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].dimension" id="dimension${i.index}" cssClass="controlStock"/></td>                 
                 <td><form:checkbox path="dimensionStones[${i.index}].isIssued" id="isIssued${i.index}" cssClass="check"/></td>
                 <td><a href="#" class="removeDimensionStone"><img src="images/plus3.png" width="20" height="20" title="Remove Dimension Stone"/></a></td>
              </tr>
            </c:forEach>  
            <c:if test="${empty updateStock.dimensionStones}">
                <tr class="dimensionStone defaultRow">    
                            <td><input type="text" name="dimensionStones[].stoneNo" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].length" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].breadth" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].height" value="" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].dimension" value="" Class="controlStock"/></td>                            
                            <td><input type="checkbox" name="dimensionStones[].isIssued" value="Yes" Class="controlStock"/></td> 
                            <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>
                        </tr>
            </c:if>
</form> 
```

# java - 我怎样才能替换骡事件上下文？

> ID：15266100
> 
> 赞同：0
> 
> 时间：2013-03-07T08:10:06.763
> 
> 标签：java, mule

我在一个进程中有三个配置文件

他们都有`vm://BOUNDPATH`入站。

当它运行时，我将上下文全部放入缓存中

我可以通过在缓存中获取上下文来路由到任何配置

我正在使用此代码使用组件

```
DefaultLocalMuleClient client = (DefaultLocalMuleClient) mContext.getClient();
client.send("vm://BOUNDPATH", msg) 
```

工作正常。

但是，我想在没有的情况下路由`client.send`

```
vm:outbound-endpoint address="vm://BOUNDPATH" exchange-pattern="request-response"/> 
```

像这样通过覆盖或替换 eventcontext 这可能吗？

谢谢。

# openerp - OpenERP fields.related 崩溃

> ID：15266101
> 
> 赞同：0
> 
> 时间：2013-03-07T08:10:20.293
> 
> 标签：openerp, odoo

openerp的后续问题[覆盖 onchange 行为而不影响基础](https://stackoverflow.com/questions/15244031/openerp-override-onchange-behavior-without-affecting-base) [15244031](https://stackoverflow.com/questions/15244031/openerp-override-onchange-behavior-without-affecting-base)

以下代码确实会被触发，但当任何相关字段具有值时，我会收到服务器错误 500。

当我查看日志时，它显示 JSON 序列化问题。

```
TypeError: browse_record(product.mycount, 1) is not JSON serializable 
```

请提出解决方案。

```
class purchase_order_line_custom(osv.osv):
_name = 'purchase.order.line'
_inherit = 'purchase.order.line'

def onchange_product_id(self, cr, uid, ids, pricelist_id, product_id, qty, uom_id, partner_id, date_order=False, fiscal_position_id=False, date_planned=False, name=False, price_unit=False, context=None):
values = super(purchase_order_line_custom, self).onchange_product_id(cr, uid, ids, pricelist_id, product_id, qty, uom_id, partner_id, date_order, fiscal_position_id, date_planned,name, price_unit, context=context)
  if product_id:
    product = self.pool.get('product.product').browse(cr, uid, product_id, context=context)
    values['value'].update({
                            'qualified_name':product.qualified_name,
                            'product_type' : product.product_type or None,
                            'product_subtype' : product.product_subtype,
                            'count_id':product.count_id or None 
    })
  return values   

  _columns={
      'product_type': fields.related('product_id','product_type',type='selection', string='Product Type', selection=[('X','X'),('Y','Y'),('Z','Z')]),
      'product_subtype': fields.related('product_id','product_subtype',type='char', size=64, string='Sub-Type'),
      'qualified_name': fields.related('product_id','qualified_name',type='char', size=64, string='Qualified Name'),
      'count_id': fields.related('product_id','count_id',type='many2one',relation='product.mycount',string='Count')
      }

purchase_order_line_custom() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:20:28.113

在该行`'count_id':product.count_id or None`中，我认为 count_id 是 product.you 中的 many2one 字段。您试图将 object 传递给 product.order.line 中的 count_id 字段，您需要通过 product.count_id.id 来获取 id。

# cocos2d-iphone - 在 cocos2d 上收到一些警告，任何人都可以告诉我如何解决这些问题

> ID：15266106
> 
> 赞同：-3
> 
> 时间：2013-03-07T08:10:38.397
> 
> 标签：cocos2d-iphone, box2d-iphone, levelhelper

我使用 levelHelper 开发的游戏运行良好，但我在日志中收到一些错误或某种警告

> 2013-03-07 12:59:59.744 RobotRunner[3970:c07] cocos2d：****警告**** CC_ENABLE_GL_STATE_CACHE 已禁用。要提高性能，请通过编辑 ccConfig.h 启用它
> 
> 2013-03-07 12:59:59.745 RobotRunner[3970:c07] cocos2d: cocos2d v2.0.0 2013-03-07 12:59:59.745 RobotRunner[3970:c07] cocos2d: 使用导演类型：CCDirectorDisplayLink
> 
> 2013-03-07 12:59:59.761 RobotRunner[3970:c07] Retina Display 不支持
> 
> 2013-03-07 12:59:59.765 RobotRunner[3970:c07] cocos2d：动画以帧间隔开始：60.00
> 
> 2013-03-07 12:59:59.766 RobotRunner[3970:c07] cocos2d：表面尺寸：480x320
> 
> 2013-03-07 12:59:59.767 RobotRunner[3970:c07] cocos2d: CCTexture2D: 使用 RGB565 纹理，因为图像没有 alpha
> 
> 2013-03-07 13:00:00.905 RobotRunner[3970:c07] cocos2d：CCSpriteBatchNode：将 TextureAtlas 容量从 [29] 调整为 [40]。

任何人都可以告诉我如何解决这些问题以及为什么会出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:58:58.350

只有第一个是您可以修复的警告。它告诉你如何做到这一点。

其余的只是来自 cocos2d 的噪音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:16:12.443

这些不是警告，这些是信息\调试消息。

# asp.net-mvc - 如何在 MVC 视图中更改日期时间显示格式？

> ID：15266107
> 
> 赞同：0
> 
> 时间：2013-03-07T08:10:46.000
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在使用 MVC 应用程序，我想更改视图中日期的显示格式

现在我有下面的评论，你可以看到显示的日期，因为它来自 DB

**Akash Sharma** 于 2013 年 3 月7 日下午 12:55:24*发表评论*
你好....

我想把它改成 ---> 2013 年 3 月 7 日 12:55 PM

这个怎么做 ？

我在视图中编写了以下代码。

`$('p.p12-'+'@ViewBag.EId').append('<br /><div style="background-color:#FAFAFA;">Recently Added... <br /><a href="@Url.Action("Details", "Employee", new { id = "__id__" })'.replace('__id__', data.OwnerID) + '">' + data.OwnerName + '</a>'+ data.cmtDateTime + <input type="button" id=comment' + data.Id + ' class="deleteComment" value="Delete" /><br/>' + data.msg + '<div>');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:16:37.247

您可以在返回视图模型的控制器操作中格式化日期。在您展示的代码中，您正在使用一些`data.cmtDateTime`属性，我认为这`data`是您使用 AJAX 调用的控制器操作的 JSON 结果。因此，您可以做的是使用视图模型并在控制器操作中执行格式化：

```
public ActionResult GetComments()
{
    IEnumerable<Comment> comments = ...
    return Json(
        comments.Select(c => new 
        {
            cmtDateTime = c.cmtDateTime.ToString("d MMM yyyy hh:mm tt"),
            Id = c.Id,
            OwnerID = c.OwnerID,
            OwnerName = c.OwnerName,
            msg = c.msg
        }), 
        JsonRequestBehavior.AllowGet
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:18:02.810

您必须使用正确的`ToString()`格式化程序。在这里，您已经全部解释了：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

# extjs - ExtJS GridPanel“分组显示”不显示/不工作

> ID：15266112
> 
> 赞同：0
> 
> 时间：2013-03-07T08:10:52.770
> 
> 标签：extjs, extjs4, aem

我在 ExtJs 的 GridPanel 功能上遇到了一些奇怪的行为。我已经包含了一个 groupField 配置选项，它没有显示，也没有工作。也许你们可以给我一个想法为什么？

```
createStore : function(itemPath) {
                        return new 
                             CQ.Ext.data.GroupingStore({

                                 proxy : new CQ.Ext.data.HttpProxy(
                                            {
                                                url : "/bin/test/private/folder/check.json",
                                                method : "GET"
                                            }),
                                //method: "GET",
                                reader: new CQ.Ext.data.JsonReader({
                                        root: 'variables',
                                        fields: [
                                            {name: 'group', type: 'string'},
                                            {name: 'path', type: 'string'},
                                            {name: 'status', type: 'string'}
                                        ]
                                }),
                              updateData : function() {

                                    // request the data 
                                    this.load({
                                        params : {                  
                                            path : itemPath         
                                        }
                                    });
                                },
                                sortInfo: {field: 'path', direction:'ASC'},
                                groupField: 'group',
                                groupOnSort: true,
                                autoLoad : true
                         });
                    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:56:58.363

如果您希望您的组显示在网格面板中，您还需要将[分组功能](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping)添加到您的网格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:52:21.637

updateData 来自哪里？我在任何地方的文档中都没有看到它。那段代码会导致问题吗？

以下是 Sencha 的示例：http: [//dev.sencha.com/deploy/ext-3.4.0/examples/grid/grouping.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/grouping.html)

确保您也在查看 3.4 文档。

# linux - 在 Linux 中读取没有磁盘缓存的文件

> ID：15266115
> 
> 赞同：13
> 
> 时间：2013-03-07T08:10:55.000
> 
> 标签：linux, io

**我有一个只每周运行一次的 C 程序，并且只**读取一次大量文件。由于 Linux 还会缓存所有读取的内容，因此它们会不必要地填满缓存，这会大大降低系统速度，除非它有 SSD 驱动器。

那么如何在不填满磁盘缓存的情况下打开和读取文件呢？

**笔记：**

磁盘缓存是指当您两次读取文件时，第二次是从 RAM 中读取，而不是从磁盘中读取。即，一旦从磁盘读取的数据将留在 RAM 中，因此后续读取同一文件将不需要从磁盘重新读取数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T08:14:05.470

我相信传递`O_DIRECT`给[`open()`](http://linux.die.net/man/2/open)应该会有所帮助：

> **O_DIRECT（自 Linux 2.4.10 起）**
> 
> 尽量减少进出该文件的 I/O 的缓存影响。一般来说，这会降低性能，但在特殊情况下很有用，例如当应用程序进行自己的缓存时。文件 I/O 直接与用户空间缓冲区进行。O_DIRECT 标志自己努力同步传输数据，但不保证 O_SYNC 传输数据和必要的元数据。为了保证同步 I/O，除了 O_DIRECT 之外，还必须使用 O_SYNC。

[手册页](http://linux.die.net/man/2/open)`O_DIRECT`底部有更详细的注释，包括来自 Linus 的有趣引用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T08:24:01.383

您可以使用[`posix_fadvise()`](http://man7.org/linux/man-pages/man2/posix_fadvise.2.html)该`POSIX_FADV_DONTNEED`建议来请求系统释放您已阅读的页面。

# c# - 在 Windows 商店应用程序中拉伸图像

> ID：15266116
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:10:58.600
> 
> 标签：c#, xaml, windows-8

我想实现拉伸图像功能，用户可以拖动每个角来拉伸和捏合图像以使其变小或变大。任何人都可以帮忙吗？我使用 C# 和 xaml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:39:02.747

基本上你必须在自己身上写下以下内容：

1.  在 XAML 中添加图像
2.  添加四个正方形
3.  将正方形定位到边缘
4.  将 mousedown 处理程序添加到正方形并将 mousedown 上的正方形保存到属性
5.  将 mousemove 处理程序添加到您的应用程序，检查属性是否已填充
6.  通过计算图像大小来调整图像大小。例如右下角（伪代码）：

    image.width=square.offset.x-image.offset.x

    image.height=square.offset.y-image.offset.y

7.  将 mouseup 处理程序添加到您的应用程序并释放 square-property。

这是非常基本的。那里有很多很好的示例，主要用于 WPF，但您可以在 Windows 8 中重复使用它。[这](http://www.codeproject.com/Articles/20245/WPF-Interactive-Image-Cropping-Control)是一个很好的示例，但用于图像裁剪。

# php - 通过 onmousedown 为新添加的 ajax 运行 js 函数

> ID：15266117
> 
> 赞同：0
> 
> 时间：2013-03-07T08:11:00.870
> 
> 标签：php, jquery, ajax

我正在使用 JQuery ajax 将新内容加载到页面中，在服务器端我加载了一个新的 div：

```
<div id="newFuncDiv" onmousedown="javascript:newFunc("VAR");">Click me</div> 
```

在以前的情况下，我使用了如下函数：

```
function newFunc(){$("#newFuncDiv").click(function(){alert("something");});} 
```

但是在这种情况下，这个 div 的 onclick 我需要传递一个变量，我从服务器端的 db 中提取该变量，我怎样才能实现这一点，即使我添加了 newFunc(); 使用ajax响应它不起作用，

编辑：

顺便说一句，忘了说我正在循环来自服务器的响应，所以我需要传递的变量对于每个 div 都是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:24:27.447

因为您使用的是 jquery，所以我构建了单击处理程序 jquery 样式并将数据对象附加到 html 元素：

```
<div id="newFuncDiv" data-foo="bar">Click me</div>

$("#newFuncDiv").on('click',function(){
    alert("something" + $(this).data('foo'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:17:45.400

您可以使用`this`来引用该 div。

```
function newFunc(myVar) {
    $(this).click(function(){
        alert(myVar);
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T08:25:55.890

您可以将变量保存到每个 div 的某个属性中，并像这样为每个 div 分配相同的类 a

```
<div class="clickme" id="youvar1"></div>
<div class="clickme" id="youvar3"></div>
<div class="clickme" id="youvar3"></div> 
```

然后在jQuery中

```
 $(document).ready(function(){
    $(".clickme").click(function(){
    var uniquevar = $(this).attr('id');
    /*your ajax code here*/
    });

}); 
```

希望这有帮助

# google-maps-sdk-ios - 关于定位自己，一些问题

> ID：15266118
> 
> 赞同：1
> 
> 时间：2013-03-07T08:11:01.137
> 
> 标签：google-maps-sdk-ios

我是 google map sdk for ios 的新手。我在视图上添加了一张地图。当我进入这个 mapView 时，我想定位自己。所以我写道：

```
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                        longitude:151.2086
                                                             zoom:6];
_iMapView = [GMSMapView mapWithFrame:CGRectMake(0, 0, 320, 480) camera:camera];
self.iMapView.myLocationEnabled = YES;
self.iMapView.delegate=self;

GMSMarkerOptions *annotation = [[GMSMarkerOptions alloc] init];
annotation.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);
annotation.title = @"Sydney";
annotation.snippet = @"Australia";
//annotation.infoWindowAnchor=CGPointMake(0.5, 0.5);
[self.iMapView addMarkerWithOptions:annotation];

//[self.view  addSubview:self.iMapView];
self.view=self.iMapView; 
```

但是我在坐标（33.8683,151.2086）中找到了mapView视图，我只想将mapView移动到wyposition。我还发现谷歌没有回调函数参考
`self.iMapView.myLocationEnabled = YES;`

谢谢你的回复。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T10:02:30.917

要将相机设置为动画/设置到您的当前位置，您首先必须：

```
self.googleMapsView.myLocationEnabled = YES; 
```

然后在 GMSMapView 头文件的文档中你会发现如下注释：

```
/**
* If My Location is enabled, reveals where the user location dot is being
* drawn. If it is disabled, or it is enabled but no location data is available,
* this will be nil.  This property is observable using KVO.
*/ 
@property (nonatomic, strong, readonly) CLLocation *myLocation; 
```

因此，您可以在 viewWillAppear 方法中设置键值观察器，然后使用 GoogleMaps SDK 的位置管理器获取位置更新。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    // Implement here to check if already KVO is implemented.
    ...
    [self.googleMapsView addObserver:self forKeyPath:@"myLocation" options:NSKeyValueObservingNew context: nil]
} 
```

然后观察属性。

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"myLocation"] && [object isKindOfClass:[GMSMapView class]])
    {
        [self.googleMapsView animateToCameraPosition:[GMSCameraPosition cameraWithLatitude:self.googleMapsView.myLocation.coordinate.latitude
                                                                                 longitude:self.googleMapsView.myLocation.coordinate.longitude
                                                                                      zoom:self.googleMapsView.projection.zoom]];
    }
} 
```

不要忘记在 viewWillDisappear 中注销您的观察者。

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    // Implement here if the view has registered KVO
    ...
    [self.googleMapsView removeObserver:self forKeyPath:@"myLocation"];
} 
```

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:18:40.307

**注意：**这个答案是错误的，请参阅罗伯特的答案。

适用于 iOS 的 Google Maps SDK 没有任何代理可以让您知道设备的位置何时发生变化。

您需要自己使用[`CLLocationManager`](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)该类，以获取设备的当前位置，然后更新地图视图。

**更新：**

要从`CLLocation`位置管理器提供的新地图视图更新地图视图，您可以执行以下操作：

```
GMSMapView* mapView = ...;
CLLocation* location = ...;
GMSCameraPosition* camera = [GMSCameraPosition 
    cameraWithLatitude: location.coordinate.latitude
    longitude: location.coordinate.longitude
    zoom: 6];
mapView.camera = camera; 
```

或者，如果您希望地图视图以动画方式显示到新位置，请使用以下命令：

```
[mapView animationToCameraPosition: camera]; 
```

# php - 我们如何更改 magento 模块的方法名称？

> ID：15266123
> 
> 赞同：0
> 
> 时间：2013-03-07T08:11:24.097
> 
> 标签：php, magento

我们如何更改 magento 模块的方法名称。

即，我有一个按日期向客户交付产品的模块。它的 config.xml 将方法名称定义为

```
 <default>
        <carriers>
          <deliverybydate>
               <active>0</active>
               <model>deliverybydate/carrier_deliverybydate</model>
               <title>Delivery date of your choice</title>
               <name>Delivery By Date</name>
               <deliveridatenote>Delivery on date of your choice</deliveridatenote>
               <deliverydate>1</deliverydate>
               <deliverytime>0</deliverytime>
               <deliverydatetoday>0</deliverydatetoday>
               <deliverydaterange>7</deliverydaterange>
               <deliverytimerange>08.00-09.00 AM,</deliverytimerange>
               <price>10.00</price>
               <specificerrmsg>This shipping method is currently unavailable. If you would like to ship using this shipping method, please contact us.</specificerrmsg>
            </deliverybydate>
         </carriers>
    </default> 
```

我们怎样才能`<name>Delivery By Date</name>`动态改变。我搜索了一段时间，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:20:19.340

您应该查看选项卡下的管理员

```
System -> Configuration -> Shipping methods 
```

更改运输方式的名称和其他设置。

您在此处向我们展示的配置是给定运输方式的默认设置。添加配置时（来自 system.xml），它将在 config.xml 中查找应放入的默认设置。

**如果这不能立即起作用，请清空缓存！**

# c# - 从 Form1 中调用方法或从另一个类中调用按钮和文本字段？

> ID：15266127
> 
> 赞同：0
> 
> 时间：2013-03-07T08:11:41.730
> 
> 标签：c#, class, methods, call

好吧：

我在 Form1 中有一个`restart()`方法可以重新启动我的游戏，它还会将标签、文本字段、组框等更改为再次可见。

我需要这个方法`Game.cs`，问题是，当我把这个方法放进去时，C#给了我很多错误`Game.cs`

所以我想知道我怎么能 - 从 Game.cs 中调用 Form1 方法 - 使 txts、lbls 等更改与 Game.cs 一起工作

太感谢了。

编辑：这是重启方法

```
public void restart() {
    lblBeschrijving.Visible = true;
    gbNaam.Visible = true;
    lblNaam.Visible = true;
    txtNaam.Visible = true;
    gbMuren.Visible = true;
    cmbMuren.Visible = true;
    lvlMuren.Visible = true;
    gbMoeilijkheid.Visible = true;
    cmbMoeilijkheid.Visible = true;
    lblMoeilijkheid.Visible = true;
    picBeginscherm.Visible = true;
    btnSpelen.Visible = true;
    tmrSnake_Tick.Enabled = false;
    nFoodTeller = 0;
    foodExtra.nEnabled = true;

    nScore = System.Convert.ToInt32(snakeScoreLabel.Text);

    snake = new Snake();

    DialogResult error;
    error = MessageBox.Show("Oh no! You killed the snake!\nDo you wish to play Again?\n\nYou scored " + nScore, "Snake Game Error", MessageBoxButtons.YesNo, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1);
    // ..and the snake's dead!

    if (error == DialogResult.No) {
        Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:30:24.870

我假设我在 c# 上编程游戏方面与您处于同一水平。所以这是我的经验：

游戏逻辑和 UI 是 2 个独立的实体，UI 控制游戏而不是相反。这样可以确保如果 UI 发生更改，游戏仍然可以正常工作。实现这一点的方法是声明您的主 UI 可以挂钩的事件和委托。因此，当您触发事件时，UI 会收到信息。例如，我使用事件来更新俄罗斯方块的分数：

[https://subversion.assembla.com/svn/xand-tetris/trunk/](https://subversion.assembla.com/svn/xand-tetris/trunk/)

祝你探索顺利

# xcode4.3 - 寻找一个工作示例以在 xcode 中向视频添加 srt 字幕

> ID：15266128
> 
> 赞同：2
> 
> 时间：2013-03-07T08:11:48.010
> 
> 标签：xcode4.3

任何人请帮助我......我的应用程序基于在视频下显示字幕......我通过使用 developer.apple 的电影播放器​​项目做了一点点，我可以在播放和暂停视频时播放和暂停字幕。我在如何将视频与字幕同步时遇到问题，例如前进、后退、滑块、进入全屏。我正在寻找一个示例，例如在 Xcode 中将 .srt 文件与 MPMoviePlayerController 以及其他文件同步。请与我讨论您的想法...谢谢

# grails - Grails 可搜索插件 - 过滤结果集

> ID：15266130
> 
> 赞同：5
> 
> 时间：2013-03-07T08:11:56.500
> 
> 标签：grails, grails-2.0, lucene, compass-lucene

我目前正在使用 Lucene。我的要求就像 facebook 搜索框。用户搜索人和朋友。但在我的要求中，用户有隐私设置，如姓名、位置、电子邮件地址对所有人或只有朋友可见。他可以向朋友和社区的其他成员显示和隐藏这些字段。

我已经实现了基于姓名、位置和电子邮件地址的简单搜索。但现在我正在根据隐私设置修改搜索。

**这是我的场景**..

**用户 A**有隐私设置：
姓名只显示给朋友
电子邮件显示给每个人
位置不显示给任何人。

如果**用户 X在搜索框中键入****用户 A**的位置，那么它不应该出现在结果中。但是如果用户 X 在搜索框中输入*用户 A*的名称，则应该显示它，因为*用户 A*没有限制名称，并且在隐私设置中对他的朋友可见。

你能指导我的方法吗？

如果我没有清楚地写下我的要求，请告诉我。

我分析了以下方法，
1- IndexSearcher 的解释方法（它会影响整体性能）
2- 探索过滤器但不能得到太多

**我的方法：**

根据名称
获取结果集 根据位置
获取结果集 根据电子邮件地址获取结果集

循环每 3 个结果集并应用与隐私设置相关的条件，并根据隐私设置排除项目。最后合并所有 3 个结果集。

如果有其他方法吗？请与我分享。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:42:38.013

可能您可以在可搜索插件中使用 lucene 查询语法来根据要求创建 lucene 查询。

你可以在[这里](http://grails.org/Searchable+Plugin+-+Mapping+-+Searchable+Reference)或[这里找到](http://grails.org/Searchable+Plugin+-+Mapping+-+Not+All+Properties)

您可以通过覆盖默认属性设置来限制搜索。你只需要这样申请......

```
class A {
      String x
      String y
      String z

    static searchable = [only: ['x', 'y']] 
    // …
} 
```

使用它可以限制可搜索的属性。

# java - 为什么 PMD 建议将字段设为 final？

> ID：15266133
> 
> 赞同：0
> 
> 时间：2013-03-07T08:12:10.160
> 
> 标签：java, android, pmd

我创建了 Android 应用程序并在其上运行静态分析工具 PMD。我不明白为什么它给我警告并说在可能的情况下声明字段最终，就像在这个例子中一样。

```
final City selectedItem = (City) arg0.getItemAtPosition(arg2);
new RequestSender(aaa).execute(xxx, selectedItem.getId()); 
```

它只是启动内部 AsyncTask 实例。将其宣布为最终风格是一种好风格吗？为什么？为了可读性，我创建了一个新对象，但 PMD 说它应该是最终的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:24:28.170

这里有两件不同的事情（你在谈论静态和最终）。

关于[final](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables)，如果您创建一个不会更改的引用（对象本身可以修改），最好将其声明为 final ，原因有两个：

*   它有助于编译器能够进行小的性能优化
*   它可以帮助您（或您的开发人员）了解此引用不会被更改 - 它给出了一个信号。

关于[静态](https://stackoverflow.com/questions/797964/what-is-the-exact-meaning-of-static-fields-in-java)（对于变量，关键字对于不同类型的结构具有不同的含义），它将使您的 cityItems 对于其封闭类的所有对象都是唯一的。如果所有对象都可以使用相同的值，则复制它没有任何好处。同样，不仅要考虑编译器/性能方面，还要考虑信号：如果我看到一个带有“静态”的字段，我知道它是在所有对象之间共享的——我不需要额外的信息或文档。

在您的示例中，该字段可能应该是公共静态（如果它是共享的）或私有（公共或“[包保护](http://en.wikipedia.org/wiki/Java_package#Package_access_protection)”字段正在破坏封装）。

# javascript - 淘汰赛排序 - 耗时的任务

> ID：15266144
> 
> 赞同：1
> 
> 时间：2013-03-07T08:12:26.283
> 
> 标签：javascript, knockout.js

使用 knockout.js - 我需要对绑定到 HTML 表的 observableArray 进行排序。单击列标题将对数组 ASC 或 DESC 进行排序 - 非常常见的任务。

问题是排序会冻结 UI 大约 5 秒。我知道这是因为 JS 是单线程的。

我的问题是 - 是否有任何解决方法可以解决耗时的淘汰赛排序？我的意思是如何显示一些加载程序指示符或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:56:48.880

问题“解决了”——排序数组实际上非常快。问题是在页面上重新渲染 HTML 元素。

**给其他用户的建议**：对底层 JS 数组进行排序似乎（但我没有测量）比对 observable 数组进行排序要快一些，例如：

这更快：

```
anObsArray().sort(--sorting func here--); // notice brackets after name of anObsArray
anObsArray().valueHasMutated(); // <-- this line is important 
```

比这个：

```
anObsArray.sort(--sorting func here--); 
```

# java - 在 Android 中使用 Intent 时出现 Nullpointer 异常

> ID：15266148
> 
> 赞同：1
> 
> 时间：2013-03-07T08:12:59.057
> 
> 标签：java, android

我有一个关于 Intent 的问题。

A级

```
Intent i=new Intent(getApplicationContext(),JobOffer.class);
i.putExtra("From",aryListBean.get(arg2).getUser());
i.putExtra("StartDate",aryListBean.get(arg2).getStartDate());
i.putExtra("DueDate",aryListBean.get(arg2).getEndDate());
startActivity(i); 
```

B类

```
 Bundle b=getIntent().getExtras();
      String user=b.getString("From");
      String startdate=b.getString("StartDate");
      String duedate=b.getString("DueDate");
      ArrayList<String> hr_offerdet=b.getStringArrayList("AryHrOffer");

    tvUser.setText("   "+user);
    tvStarDate.setText("   "+startdate);
    tvDueDate.setText("   "+duedate); 
```

C 类：返回 B 类按钮

现在，我已经成功地将数据发送到 A 类到 B 类。我将数据发送到 B 类，现在当我从 B 类移动到 C 类，然后又回到 B 类时，出现 Nullpointer 异常。你有什么不同的方法来解决这个问题吗？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:24:52.110

在您的代码中，您无法使用键“AryHrOffer”传递数组列表。

此外，您应该始终先检查捆绑包是否存在。

例如。`if(b!=null){ //... }`

然后，所有需要打开 Activity B 的类都应该传递所需的参数，如果确实需要它们，则如果 bundle 为 null，则忽略它们。

编辑：

重新阅读您的问题后，我注意到您说“..再次**回到**B 类，出现 Nullpointer 异常”

问题可能不在于意图传递额外内容，而在于您的 Activity B 的 onResume 上的某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:45:20.710

首先：请提供 logcat 以及您在哪条指令上拥有 NullPointer。

你必须检查这些事情：

```
if (getIntent() != null && getIntent().getExtras() != null) {
    Bundle b = getIntent().getExtras();
    String user = b.getString("From");
    String startdate = b.getString("StartDate");
    String duedate = b.getString("DueDate");
    ArrayList < String > hr_offerdet = b.getStringArrayList("AryHrOffer");

    tvUser.setText("   " + user);
    tvStarDate.setText("   " + startdate);
    tvDueDate.setText("   " + duedate);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:17:08.387

您必须检查是否`bundle`存在`null`。

```
if(b!=null){

 // your code

} 
```

# spring - spring batch：如何调用我的 RollBack 实现

> ID：15266154
> 
> 赞同：1
> 
> 时间：2013-03-07T08:13:10.697
> 
> 标签：spring, spring-batch

我有自己的 Spring Batch Job ( **MyTaskletJob** )，它实现了我的接口**IJobBase** ，它实现了**Tasklet**，

我的工作需要什么来实现另一种称为**rollBack的方法**

公共接口**IJobBase**扩展**Tasklet** {

```
 void rollBack(); 
```

}

公共类**MyTaskletJob** IJobBase{

```
 public RepeatStatus execute(StepContribution arg0, ChunkContext arg1){

            …}
    public void rollBack(){

            …} 
```

}

弹簧配置：

```
<bean id="jobTaskletStep1" class="com....job.MyTaskletJob ">
    <property name="message" value="Hello..." />
</bean>
<batch:job id="backgroundJob">
<batch:step id="step0">
        <batch:tasklet ref="jobTaskletStep1"/>
        </batch:step>
</batch:job> 
```

这是我运行我的工作的方式：

// 根据作业名创建作业

**Job job = (Job) applicationContext.getBean(“backgroundJob”);**

// 运行作业**——jobLauncher**将运行**MyTaskletJob** * *execute* * 方法

**JobExecution myJobExecution = jobLauncher.run(job, jobParameters);**

// 检查退出状态

**If(myJobExecution.getExitStatus().equals(ExitStatus.FAILED)){**

// 需要在**MyTaskletJob上运行****rollback()**方法

 ****我的问题是当 JobExecution FAILED 时如何调用方法 rollback() 方法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:03:58.120

简单的方法是使用 JobExecutionListener#afterJob(JobExecution)。您可以将对 jobTaskletStep1 的引用注入到侦听器中。从那里您可以检查 JobExecution 中设置的状态并根据需要调用该方法。**

# javascript - Javascript 调用 WCF 服务，但未定义错误命名空间

> ID：15266158
> 
> 赞同：1
> 
> 时间：2013-03-07T08:13:26.783
> 
> 标签：javascript, wcf, service, call, undefined

我正在网站的维护阶段工作，但遇到了问题。存在与尝试调用 WCF 服务的 Javascript 相关的问题，该服务在 javascript 'Uncaught ReferenceError' 上引发错误

这是该脚本的范围：

```
$(document).ready(function() {   
    Utility.blockUI();
    AwmsUI.Actions.page_id = Utility.UrlParam("pid");
    AwmsUI.Actions.mode = Utility.UrlParam("mode");
    wcf.wmsService.GetAllOnlineComponentType(AwmsUI.Actions.page_id, AwmsUI.Actions.newComponentType); 
```

这只是整个长函数的一部分。
错误发生在它应该在命名空间“wcf”中调用服务“wmsService”的最后一行。

```
[ServiceContract(Namespace = "wcf")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class wmsService
{ blah blah ... } 
```

我检查了托管在本地 iis 中的 wcf 服务，但似乎没有找到（显示空白）。
我检查了托管在客户开发环境中的 wcf 服务，它显示“找不到端点”。
该页面在客户的开发环境中运行良好，但卡在我的网站上。
我确实获得了最新的源代码，并与那里的责任进行了比较，以确保没有进行任何更改。

我想我一定在配置的某个地方犯了错误，但我不知道应该纠正什么。
你们能帮帮我吗？

我正在使用 AppPool Classic 2.0 在 IIS 7 上运行

感谢和问候
黄

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:31:43.413

我自己设法弄清楚了这个问题

解决方案是：

运行 cmd.exec 并执行：

C:\Windows\Microsoft.NET\Framework64\v3.0\Windows Communication Foundation\servicemodelreg.exe -i

或 32 位：

C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation>ServiceModelReg.exe -i

# java - 如何从字符串中删除匹配的单词

> ID：15266161
> 
> 赞同：3
> 
> 时间：2013-03-07T08:13:29.853
> 
> 标签：java, string, replace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:21:52.347

```
String[] str = {"PTE", "LTD", "PRIVATE", "LIMITED"};
String company = "PTE      Basit PTE";
for(int i=0;i<str.length;i++) {
    company = company.replaceAll(str[i], "");
}
System.out.println(company.replaceAll("\\s","")); //remove whitespaces 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:21:58.620

Use [**String#replaceAll(regex, str)**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

```
 String company = "PRIVATE Basit PTE";
    System.out.println(company.replaceAll("PTE|LTD|PRIVATE|LIMITED", "")); 
```

output:

Basit

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:14:49.493

```
String company = //your string
company.replaceAll("PTE|LTD|PRIVATE|LIMITED", ""); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T08:14:21.050

`"PTEBasitLTDMasoodPRIVATE".replaceAll("PTE|LTD|PRIVATE|LIMITED","");`

will result in

> BasitMasood

# javascript - mongoose、express 和 node.js 中回调函数的参数

> ID：15266162
> 
> 赞同：3
> 
> 时间：2013-03-07T08:13:41.367
> 
> 标签：javascript, node.js, callback, express, mongoose

我遵循 MCV 方法来开发我的应用程序。我遇到一个问题，我不知道参数是如何传递给回调函数的。

动物.js（模型）

```
var mongoose = require('mongoose')
, Schema = mongoose.Schema

var animalSchema = new Schema({ name: String, type: String });
animalSchema.statics = {
     list: function(cb) {
         this.find().exec(cb)
     }
}
mongoose.model('Animal', animalSchema) 
```

动物.js（控制器）

```
var mongoose = require('mongoose')
, Animal = mongoose.model('Animal')

exports.index = function(req, res) {
    Animal.list(function(err, animals) {
        if (err) return res.render('500')
        console.log(animals)
    }
} 
```

我的问题来了：为什么模型中的“列表”可以只执行回调而不传递任何参数？错误和动物实际上来自哪里？

我想我可能会错过一些与 node.js 和 mongoose 中的回调相关的概念。如果您能提供一些解释或指出一些材料，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:26:59.223

函数列表想要传递一个回调函数。

所以你传递一个回调函数。

`this.find().exec(cb)`也想要一个回调函数，所以我们传递从`list`函数中获得的回调。

然后该函数使用参数和它接收到的对象`execute`调用回调（执行它） ，在本例中为.`err``animals`

在列表函数内部发生了一些类似于`return callback(err, objects)`最终调用回调函数的事情。

您现在传递的回调函数有两个参数。这些是`err`和`animals`

关键是：回调函数作为参数传递，但在被`exec`. `err`该函数使用映射到和的参数调用它`animals`

编辑：

由于接缝不清楚，我将做一个简短的示例：

```
var exec = function (callback) {
    // Here happens a asynchronous query (not in this case, but a database would be)
    var error = null;
    var result = "I am an elephant from the database";
    return callback(error, result);
};

var link = function (callback) {
    // Passing the callback to another function 
    exec(callback);
};

link(function (err, animals) {
    if (!err) {
        alert(animals);
    }
}); 
```

可以在这里找到小提琴：http: [//jsfiddle.net/yJWmy/](http://jsfiddle.net/yJWmy/)

# php - jQuery 相关选择传递附加参数

> ID：15266164
> 
> 赞同：0
> 
> 时间：2013-03-07T08:13:53.143
> 
> 标签：php, jquery, ajax

这是它最基本的代码（我正在使用[这个](http://www.erichynds.com/examples/jquery-related-selects/)）

```
$("form").relatedSelects({
        onChangeLoad: 'datasupplier.php',
        selects: ['stateID', 'countyID', 'townID', 'villageID']
    }); 
```

由于某种原因，我需要再传递几个参数。我通常的ajax代码是这样的

```
$.post("ajax/template.php", {myparams: $("#myparams").val(), action: "SEARCH_MEMBER_DETAILS" },
                    function (data){
                        var returnCode = data.returnCode;
                        if (returnCode == "1"){
                            $("#data").val(data.name);
                        }

                },"json"); 
```

问题是，如何将 myparams 和 action 等参数发送到 jQuery 相关选择代码？

我试过类似的东西

```
 $("form").relatedSelects({
            onChangeLoad: 'datasupplier.php',
                data: {action: "SEARCH_MEMBER_DETAILS"},
            selects: ['stateID', 'countyID', 'townID', 'villageID']
        }); 
```

但似乎没有发送额外的参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:56:49.223

relatedScripts 插件不提供任何工具来操作 ajax 请求。

但是可以稍微改变它以达到要求。

如果您准备好对插件进行更改，请执行以下步骤

在`populate($caller,$select,o)`插件的方法中进行以下更改

```
beforeSend: function(){
    return o.onLoadingStart.apply($select, Array.prototype.slice.call(arguments,0));
}, 
```

就是现在`beforeSend: function(){ o.onLoadingStart.call($select); },`

然后改变你的脚本

```
$("#example-2").relatedSelects({
    onChangeLoad : 'datasupplier.php',
    loadingMessage : 'Please wait',
    selects : ['stateID', 'countyID', 'townID', 'villageID'],
    onLoadingStart : function(jqxhr, settings) {
        console.log('st', arguments, settings.url);
        settings.url += '&t=tttt'
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/AU6GG/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:26:50.503

我已经浏览了插件的文档，似乎没有办法实现你所需要的。

如果您不想扩展插件并自己实现功能，可以尝试通过在 onChangeLoad 中创建参数并将它们作为 GET 参数传递，如下所示：

```
$("form").relatedSelects({
        onChangeLoad: 'datasupplier.php?myparams='+$("myparams").val()+'&action=SEARCH_MEMBER_DETAILS',
       selects: ['stateID', 'countyID', 'townID', 'villageID']

}); 
```

# c++ - qt5 结合 QGroupBox 和 QPushButton

> ID：15266166
> 
> 赞同：1
> 
> 时间：2013-03-07T08:14:04.133
> 
> 标签：c++, qt5, qpushbutton

我正在尝试创建一个带有下拉列表的按钮，但同时，我希望当前选定的文本能够像 QPushButton 一样被激活。这是我在寻找之前和之后的几张照片。（来自 MS Paint 的线条）

我想要它，所以如果用户单击该行的左侧，它将重新发送显示的任何项目的信号。如果用户单击下拉箭头，该列表将显示，从那时起将像普通的组框一样工作，直到选择另一个项目。

[http://imgur.com/a/tFoLv](http://imgur.com/a/tFoLv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:19:17.100

您可以使用 a`QToolButton`和 a `QMenu`：

```
QToolButton *btn = new QToolButton();
btn->setPopupMode(QToolButton::MenuButtonPopup);

QMenu *btnMenu = new QMenu;
QAction *action1 = btnMenu->addAction("action1");
QAction *action2 = btnMenu->addAction("action2");
btn->setMenu(btnMenu);

connect(btn, SIGNAL(clicked()), this, SLOT(btnSlot()));
connect(action1, SIGNAL(triggered()), this, SLOT(action1Slot()));
connect(action2, SIGNAL(triggered()), this, SLOT(action1Slot())); 
```

# java - 在组合框中显示数据库中的空白项

> ID：15266167
> 
> 赞同：1
> 
> 时间：2013-03-07T08:14:04.590
> 
> 标签：java

我尝试了下面的代码，其中我想在 WHERE 条件满足时获取所有值。我的 MS Access 数据库也包含 NULL 值，但是当我从数据库中获取项目到组合框中时，我不想在我的组合中使用 NULL 值......下面的代码也获取空值..

我试过的代码：

```
 if(e.getSource()==cmb_dest)
    {
             cmb_route.removeAll();

             try
            {
               Connection con;
               DriverManager.registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());
               Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
               con = DriverManager.getConnection("jdbc:odbc:dsnproj","","");
               Statement s = con.createStatement();
            // String qry="select c_id,p_category from product";
               String qry2="select * from trans_dest where 
               dest='"+cmb_dest.getSelectedItem()+"'";    
               System.out.println(qry2); 
               ResultSet rs=s.executeQuery(qry2);
             //ResultSet rs1=s1.executeQuery(qry2);
               while(rs.next())
               {                           
                       cmb_route.add(rs.getString("rout1"));
                       cmb_route.add(rs.getString("rout2"));
                       cmb_route.add(rs.getString("rout3"));
                       cmb_route.add(rs.getString("rout4"));
               }   
            }
             catch(Exception re)
             {
                 System.out.println(re.getMessage());
             }
        } 
```

没有错误，但组合框也包含空白项目....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:31:02.117

你需要建立一个有 4 个字段的对象才能做你想做的事

```
 while(rs.next())
           {                           
                   cmb_route.add(rs.getString("rout1"));
                   cmb_route.add(rs.getString("rout2"));
                   cmb_route.add(rs.getString("rout3"));
                   cmb_route.add(rs.getString("rout4"));
           } 
```

你需要这样做

```
 your_object vo = null;
           while(rs.next())
           {       
                   vo = new your_object();
                   vo.setRout1(rs.getString("rout1"));
                   vo.setRout2(rs.getString("rout2"));
                   vo.setRout3(rs.getString("rout3"));
                   vo.setRout4(rs.getString("rout4"));
                   cmb_route.add(vo);

           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:36:17.477

如果列的值为 SQL ，则[getString](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getString%28java.lang.String%29) from`ResultSet`返回。所以只需检查返回的值对 java并且只有当它没有将它添加到你的列表中`null``NULL``null`

```
String rout1 = rs.getString("rout1");
if(rout1 != null) {
    cmb_route.add(rout1);
} 
```

# java - 正确使用 BigDecimal

> ID：15266170
> 
> 赞同：1
> 
> 时间：2013-03-07T08:14:13.373
> 
> 标签：java, double, bigdecimal

我不确定我这样做是否正确。

我正在做需要尽可能准确的科学计算，因此我将现有的使用转换`Double`为`BigDecimal`.

```
// before
double tmp = x - (y / z);

// after
BigDecimal tmp = new BigDecimal(
        x.value().subtract(y.value().divide(z.value())).toString()); 
```

这是合乎逻辑的还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:19:41.347

在将结果转换为 BigDecimal 之前，您正在使用双精度数进行算术运算。这样你就不会获得任何精度。

您应该尽快将每个数字转换为 BigDecimal，然后在 BigDecimal 表示上使用 BigDecimals 的方法（减法、除法等）来进行算术运算。

```
BigDecimal bdX = new BigDecimal(x);
BigDecimal bdY = new BigDecimal(y);
BigDecimal bdZ = new BigDecimal(z);

BigDecimal tmp = bdX.subtract(bdY.divide(bdZ)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:17:16.763

`BigDecimal`具有所有运算符的方法。您应该改用它们。您还可以控制（指定）比例和舍入。

避免使用双打，而是`BigDecimal`从头开始使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:26:34.383

假设 x、y 和 z 是双精度数

```
BigDecimal tmp = new BigDecimal(x).subtract(
           new BigDecimal(y).divide(new BigDecimal(z), MathContext.DECIMAL64)); 
```

请参阅 BigDecimal.divide API 以了解为什么要使用 MathContext

# hive - 无脑开发 Hive UDAF 遇到 ClassCastException

> ID：15266178
> 
> 赞同：0
> 
> 时间：2013-03-07T08:14:49.980
> 
> 标签：hive, classcastexception

`public class GenericUdafMemberLevel implements GenericUDAFResolver2 { private static final Log LOG = LogFactory .getLog(GenericUdafMemberLevel.class.getName());

```
@Override
public GenericUDAFEvaluator getEvaluator(GenericUDAFParameterInfo paramInfo)
        throws SemanticException {
    return new GenericUdafMeberLevelEvaluator();
}

@Override
//参数校验
public GenericUDAFEvaluator getEvaluator(TypeInfo[] parameters)
        throws SemanticException {
    if (parameters.length != 2) {//参数大小
        throw new UDFArgumentTypeException(parameters.length - 1,
                "Exactly two arguments are expected.");
    }
    //参数必须是原型，即不能是
    if (parameters[0].getCategory() != ObjectInspector.Category.PRIMITIVE) {
        throw new UDFArgumentTypeException(0,
                "Only primitive type arguments are accepted but "
                        + parameters[0].getTypeName() + " is passed.");
    }

    if (parameters[1].getCategory() != ObjectInspector.Category.PRIMITIVE) {
        throw new UDFArgumentTypeException(1,
                "Only primitive type arguments are accepted but "
                        + parameters[1].getTypeName() + " is passed.");
    }

     return new GenericUdafMeberLevelEvaluator();
}

public static class GenericUdafMeberLevelEvaluator extends GenericUDAFEvaluator {
    private PrimitiveObjectInspector inputOI;
    private PrimitiveObjectInspector inputOI2;
    private DoubleWritable result;

    @Override
    public ObjectInspector init(Mode m, ObjectInspector[] parameters)
            throws HiveException {
        super.init(m, parameters);
        if (m == Mode.PARTIAL1 || m == Mode.COMPLETE){
            inputOI = (PrimitiveObjectInspector) parameters[0];
            inputOI2 = (PrimitiveObjectInspector) parameters[1];
            result = new DoubleWritable(0);
        }
        return PrimitiveObjectInspectorFactory.writableLongObjectInspector;
    }

    /** class for storing count value. */
    static class SumAgg implements AggregationBuffer {
        boolean empty;
        double value;
    }

    @Override
    //创建新的聚合计算的需要的内存，用来存储mapper,combiner,reducer运算过程中的相加总和。
    //使用buffer对象前，先进行内存的清空——reset
    public AggregationBuffer getNewAggregationBuffer() throws HiveException {
        SumAgg buffer = new SumAgg();
        reset(buffer);
        return buffer;
    }

    @Override
    //重置为0
    //mapreduce支持mapper和reducer的重用，所以为了兼容，也需要做内存的重用。
    public void reset(AggregationBuffer agg) throws HiveException {
        ((SumAgg) agg).value = 0.0;
        ((SumAgg) agg).empty = true;
    }

    private boolean warned = false;
    //迭代
    //map阶段调用，只要把保存当前和的对象agg，再加上输入的参数，就可以了。
    @Override
    public void iterate(AggregationBuffer agg, Object[] parameters)
            throws HiveException {
        // parameters == null means the input table/split is empty
        if (parameters == null) {
            return;
        }
        try {
            double flag = PrimitiveObjectInspectorUtils.getDouble(parameters[1], inputOI2);
            if(flag > 1.0)   //参数条件
                merge(agg, parameters[0]);   //这里将Map之后的操作，放入combiner进行合并
          } catch (NumberFormatException e) {
            if (!warned) {
              warned = true;
              LOG.warn(getClass().getSimpleName() + " "
                  + StringUtils.stringifyException(e));
            }
          }

    }

    @Override
    //combiner合并map返回的结果，还有reducer合并mapper或combiner返回的结果。
    public void merge(AggregationBuffer agg, Object partial)
            throws HiveException {
        if (partial != null) {
            //通过ObejctInspector取每一个字段的数据
            double p = PrimitiveObjectInspectorUtils.getDouble(partial, inputOI);
            ((SumAgg) agg).value += p;
        }
    }

    @Override
    //reducer返回结果，或者是只有mapper，没有reducer时，在mapper端返回结果。
    public Object terminatePartial(AggregationBuffer agg)
            throws HiveException {
        return terminate(agg);
    }

    @Override
    public Object terminate(AggregationBuffer agg) throws HiveException {
        result.set(((SumAgg) agg).value);
        return result;
    }
} 
```

}`

为了理解理论，我使用了一些中文注释代码。实际上，UDAF 的思路如下： select test_sum(col1,col2) from tbl ; 如果 col2 满足某些条件，则求和 col1 的值。大部分代码都是从官方的 avg() udaf 函数复制而来的。

我遇到了一个疲倦的异常： `java.lang.RuntimeException: Hive Runtime Error while closing operators at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:226) at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57) at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436) at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136) at org.apache.hadoop.mapred.Child.main(Child.java:249) Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ClassCastException: org.apache.hadoop.io.DoubleWritable cannot be cast to org.apache.hadoop.io.LongWritable at org.apache.hadoop.hive.ql.exec.GroupByOperator.closeOp(GroupByOperator.java:1132) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:558) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:193) ... 8 more Caused by: java.lang.ClassCastException: org.apache.hadoop.io.DoubleWritable cannot be cast to org.apache.hadoop.io.LongWritable at org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableLongObjectInspector.get(WritableLongObjectInspector.java:35) at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:323) at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serializeStruct(LazyBinarySerDe.java:255) at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:202) at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.processOp(ReduceSinkOperator.java:236) at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:474) at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:800) at org.apache.hadoop.hive.ql.exec.GroupByOperator.forward(GroupByOperator.java:1061) at org.apache.hadoop.hive.ql.exec.GroupByOperator.closeOp(GroupByOperator.java:1113) ... 13 more`

我的UDAF有问题吗？请指出。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:56:29.873

将 init 方法中的 PrimitiveObjectInspectorFactory.writableLongObjectInspector 替换为 PrimitiveObjectInspectorFactory.writableDoubleObjectInspector。

# iphone - 获取特定日期 - Objective c iphone

> ID：15266187
> 
> 赞同：2
> 
> 时间：2013-03-07T08:15:54.300
> 
> 标签：iphone, objective-c, date

我想在目标 C - iphone 中获得从今天起 45 天内的日期。我是目标 C 的新手 :)

我知道我可以做类似的事情：

```
NSString *dateStr = @"Tue, 16 April 2013 13:00:00 +0000";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EE, d LLLL yyyy HH:mm:ss Z"];
NSDate *date = [dateFormat dateFromString:dateStr]; 
[dateFormat release]; 
```

但是，我不想要静态分配......它应该是动态的。从今天起，我每天都需要输入`*date`变量 45 天的日期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T08:22:07.573

试试这个方法：

```
NSDate *today=[NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components=[[NSDateComponents alloc] init];
components.day=45;
NSDate *targetDate =[calendar dateByAddingComponents:components toDate:today options: 0]; 
```

# drupal-7 - Drupal 模块与外部数据库同步

> ID：15266189
> 
> 赞同：0
> 
> 时间：2013-03-07T08:16:13.180
> 
> 标签：drupal-7

我一直在尝试将 Drupal 7 用户帐户与外部数据库同步。谁能建议我这样做的最佳模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:21:27.663

您将外部数据用于什么目的？如果您尝试获取自定义数据库输出，您很可能会编写自己的模块。处理来自外部数据库的数据的最佳方法是在您的 settings.php 文件中进行设置。完成后，您可以主动切换到查询任何模块中的第二个数据库。查看此信息以获取信息 - [http://drupal.org/node/18429](http://drupal.org/node/18429)

# javascript - 寻找一种快速的方法来更新闭包内的数组

> ID：15266191
> 
> 赞同：0
> 
> 时间：2013-03-07T08:16:24.410
> 
> 标签：javascript, arrays, function

我正在寻找一种通过闭包更新数组的方法。有什么比这更有效的。

ps 我实际上并没有以这种方式使用输入来设置值。它们是通过另一个函数传递的。只需要一种简单的方法来表达我的主要观点。

```
 <script>
    sampleArrayValues=['copy','this','array'];
a="none";   

function updateArr(val,index,action) {
    var v=value;
    var i=index;
    var a=action;
    var arr=[];

    return function(v,i,a) {
        if(a=="none"){
        }
        if(a=="copy"){
            arr=sampleArrayValues;  
        }
        if(a=="update"){
            arr[index]=val; 
        }
        return arr;
    }
} 

updateArr.update1 = updateArr(0,0,a);

function scoopValues(){
    var val=0 || document.getElementById('one').value;
    var index=0 || document.getElementById('two').value;
    var action="none" || document.getElementById('three').value;
    alert(updateArr.update1(val,index,action))
} 
```

```
 Enter value: <input id="one" style="width:20px;height:20px"/>
    <br>
      Enetr index: <input id="two"style="width:20px;height:20px"/>
     <br>
  Enter Action  "none" "copy" or "update": <input id="three"style="width:60px;height:20px"/>
  <br>
   <input type="button" onclick="scoopValues()" value="click to update"style="width:100px;height:25px"/> 
```

# ubuntu - 我的 YouCompleteMe Vim 插件不支持 STL

> ID：15266194
> 
> 赞同：10
> 
> 时间：2013-03-07T08:16:39.423
> 
> 标签：ubuntu, vim, plugins

我刚刚按照 Github 上的介绍编译安装了 Vim、Vundle 和[YouCompleteMe插件。](https://github.com/Valloric/YouCompleteMe)但是 YouCompleteMe 插件在我的 Vim 中不能很好地工作。它可以自动完成变量的名称，但它不会自动完成 STL 对象（向量、映射）的操作。它甚至不能自动完成课程中的“this->”。它总是告诉我“（^U^N^P）找不到模式。” 你们以前见过这个吗？我使用 Ubuntu 12.04。我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-13T02:53:25.203

该插件的[github repo](https://github.com/Valloric/YouCompleteMe)上的自述文件现在解决了这个问题。

> 这是由 libclang 的问题引起的。从 clang 编译二进制文件使用正确的默认头文件搜索路径，但从 libclang.so 编译则没有。这个问题似乎对某些操作系统的影响比其他操作系统更大。似乎 OS X Mavericks 尤其在这方面存在问题。
> 
> 当前的解决方法是调用 echo | clang -v -E -x c++ - 并查看 #include <...> 搜索从此处开始的路径：标题。您应该采用这些路径，将 -isystem 添加到每个单独的路径，并将它们全部附加到您从 .ycm_extra_conf.py 文件中的 FlagsForFile 函数返回的标志列表中。

您可能还想查看相应的[问题](https://github.com/Valloric/YouCompleteMe/issues/303)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T09:47:09.590

我也来这里寻找答案，我不知道 python 并且以前从未破解过其他东西。所以这就是我的做法。

1.  查找错误消息。我去了 ~/.vim/bundle/YouCompleteMe 并寻找 "builtin includes" 。为什么？因为那是错误信息的一部分

    *   一个。我没有在那里找到它，所以去了更高的级别（cd ..）并重复。
    *   湾。发现它见下文./vundle/plugin/libclang.py：打印“警告：NxD libclang 找不到内置包含。”
2.  修改错误消息以确保该文件正在运行（我的姓名缩写 NxD） - 有效。

3.  该消息由 initClangComplete 打印
4.  在此调用 builtinHeaderPath = getBuiltinHeaderPath(library_path) 之后打印消息，因此我们深入研究 builtinHeaderPath
5.  getBuiltinHeaderPath 在已知目录上运行一个循环。我有 2 个 clang 安装

    *   一个。~/Downloads 目录 - 世界上所有软件都被转储的地方
    *   湾。/usr/local 因为我想要克隆、编译和构建的最新 clang

    我将两个路径都添加到了这个数组：knownPaths

    ```
     "/usr/local/include",
      "/usr/local/lib/clang/3.3",
      "/home/nxd/Downloads/clang+llvm-3.2-x86_64-linux-ubuntu-12.04/clang/3.2" 
    ```

    我注意到“，”是python中数组元素的分隔符。我之前还注意到 print -> 在 python 中输出一条消息，参数是 c 风格的 %s、%d 等工作 - （这就是“内置包含”消息首先出现在屏幕上的方式）

6.  我还将一些打印语句转储到循环中，以便查看它看到了什么以及它在做什么。

    部分代码修改函数“getBuiltinHeaderPath”

    ```
     print "active path from knownPaths is |%s|" %path
      files = os.listdir(path)
      print " files in path is |%s|" % files
      print " len (files) is |%d|" % len(files)
      if len(files) >= 1:
        files = sorted(files)
        subDir = files[-1]
      else:
        subDir = '.'
      # nxd -
      subDir = '.'
      path = path + "/" + subDir + "/include/"
      print " len (files) is |%d|" % len(files)
      print " files[-1] is |%s|" % files[-1]
      print "searching in path : |%s| " % path 
    ```

7.  我意识到 files[-1] 的预期行为不是作者的意图，并在 if 条件之后对其进行了修改以保持不变。

8.  使用新的 cpp 文件重新启动 vim 并查看 :messages - 它有效。

    希望有帮助。

# c# - 使用 Entity Framework 保存对象时会发生什么？

> ID：15266200
> 
> 赞同：1
> 
> 时间：2013-03-07T08:17:00.687
> 
> 标签：c#, entity-framework, guid

可能听起来像一个愚蠢的问题，但有一个方面我想知道：

我正在使用具有 PrimaryKeys 的 Guid 属性的对象，该属性在数据库中自动生成。我正在使用实体框架，代码优先。如果我在保存之前使用此属性执行 Console.WriteLine，则值为
`00000000-0000-0000-0000-000000000000`.

在上下文中使用 Add 和 SaveChanges 后，如果我`Console.WriteLine`再次使用相同的属性，我有一个值：
615f98eb-4ced-422a-877f-b9caa6f2b91f

显然，内存中的对象已经被更新了。但我想知道怎么做。Guid 是在数据库中生成的，那么会发生什么？

对象的 Guid 属性是简单地通过 EF 从数据库中更新，还是 EF 在将整个对象保存到数据库后将其重新加载到内存中？

我想知道，因为这将决定我`NUnit-tests`在同一个项目中的设计方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:28:00.443

EF 不仅提交一个插入/更新语句，同时它还执行一个 get 语句来检索生成的主键。事实上，它是一个单一的查询。然后使用检索到的主键更新您实体的主键。这背后没有魔法。

这也是不支持批量更新/插入的原因之一。每个实体都必须自行更新/插入。

这是在插入具有计算的 int 主键的实体时执行的查询：

```
insert [dbo].[TestTable]
       ([Name])
values ('myname' /* @0 */)

select [ID]
from   [dbo].[TestTable]
where  @@ROWCOUNT > 0
       and [ID] = scope_identity() 
```

如您所见，插入语句后跟一个检索计算列（在本例中为 ID）的 select 语句。如果有更多的计算列，它们都在这里被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:28:34.753

当您调用 domainContext.SaveChanges(); 时，您的 EF 对象会更新；您的新 ID 由 SQL 数据库生成，ID 的值是数据库的返回值。对于数据类型 int、Guid 和类似的数据类型也是如此。

# sql - 在 sql Server 的选择投影中使用函数的结果

> ID：15266203
> 
> 赞同：0
> 
> 时间：2013-03-07T08:17:04.517
> 
> 标签：sql, sql-server-2008

我写了 sql 查询，在 where 子句中我使用函数来过滤一些行。

我的问题是：我想在选择投影中使用结果函数。我怎么能做这项工作，因为我不喜欢再次调用 dbo.func 来执行？

我的查询是：

```
Declare @pDate datetime=gatdate()
Select tb1.ID,tb1.Date1,dbo.Func(tb1.Date1,@pDate2)   From tb1 Where 30<=dbo.Func(tb1.Date1,@pDate2) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T08:08:33.860

If you want to avoid using the Func function in select part AND the where part for performance reasons, then you can create a subquery like the following

```
DECLARE @pDate DATETIME = GETDATE()
SELECT T.ID, T.Date1, T.mDate
FROM (SELECT tb1.ID, tb1.Date1, dbo.Func(tb1.Date1,@pDate2) AS mDate FROM tb1) AS T
WHERE 30 <= T.mDate 
```

However I don't know if it really helps performance, because I did no testing on that case and maybe the sql server does some optimization. If I would need to use the function i wouldn't care even use the next construct

```
SELECT tb1.ID, tb1.Date1, dbo.Func(tb1.Date1, GETDATE()) 
FROM tb1 
WHERE 30 <= dbo.Func(tb1.Date1, GETDATE()) 
```

Would be nice if you can make some performance test on this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:23:51.017

你的问题不清楚，但我还是会回答。

为了在 SQL 查询中使用函数，它必须接受 SQL 数据类型的所有参数，并且必须返回 SQL 数据类型的数据。任何专为仅在 Transact-SQL 过程和函数中使用而设计的类型都不能传递给函数或从函数返回。不过，该函数可以在内部使用这些 T-SQL 数据类型。

如果您的函数满足此条件，那么您使用的语法是正确的。

# iphone - 应用程序中有两个目标的命名约定

> ID：15266208
> 
> 赞同：1
> 
> 时间：2013-03-07T08:17:12.260
> 
> 标签：iphone, ios, objective-c

我的申请有两个目标。一个是免费的，另一个是付费的。现在我需要为两个目标添加不同的图标。现在的问题是我不能像现在使用 icon_free.png 和 icon_paid.png 那样使用苹果命名约定。我的问题当我添加 512px 图标时，iOS 会自动为每个构建选择正确的图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:23:36.953

有两种方法。

第一个选项：您可以使用苹果命名约定。只需将图标存储在不同的子目录中。在创建第二个目标时，创建了一个合适的子目录。但是，您可以创建一个新的。

将具有默认名称的文件放在每个目录中。在 xcode 的导航树中为它们创建单独的组。在创建第二个目标时，无论如何都应该完成。因此，您可以在导航树中的不同分支上使用相同名称的两个版本的图标。

然后转到每个目标的复制构建设置，并确保每个目标都包含适当的版本。

第二个选项：或者给图标（和默认等）文件不同的名称，并在 plist.info 中明确命名它们。然后 plist.info 针对每个目标都存在。对于 plist.info，xcode 无论如何都应该创建单独的文件。您可以在靠近构建选项选项卡的项目设置的信息选项卡上找到它。

总的来说，我发现使用单独的文件夹很好地保持整洁。在使用较新的应用程序有两个目标时遇到难题后，我总是有一个包含所有共享资源的子目录和一个用于每个目标的子目录。它可以更容易地为每个目标相应地绑定复制和编译设置。

还有一个：当您以这种方式对捆绑应用程序进行更改时，您应该从模拟器和测试设备中彻底​​删除应用程序。如果您不这样做，那么您可能会遇到难以找到根本原因的情况。那就是设备上有一些资源的旧版本。它们不会与新版本一起更新。然后，您将在 3rd 方设备上拥有最好的缺失资源，在最坏的情况下，您将追逐错误，并且您尝试的所有内容都不会对设备/模拟器产生影响，因为本地现有资源没有被更新。很难弄清楚。

# c++ - 为什么要矢量 [] 和矢量 > 似乎表现相同？

> ID：15266209
> 
> 赞同：-4
> 
> 时间：2013-03-07T08:17:12.417
> 
> 标签：c++, stl, stdvector

鉴于这两个声明：

```
vector<int> list[N]; 
```

和

```
vector<vector<int>> list; 
```

为什么 list[1].push_back(2); 两者都适用？理论上第一个是一维数组，第二个是二维数组。（如果我错了，请纠正我）？但令我惊讶的是，我发现 list[1].push_back(2) 两者都适用。

谁能解释这是怎么发生的？

请解释，问候和感谢

`

```
 #include <cstdio>
 #include <vector>
 using namespace std;
 int main(void) {
  vector<int>g[100100];
  int n,m,k;
  scanf("%d%d%d",&n,&m,&k);
  for(int i=0,a,b;i<m&&2==scanf("%d%d",&a,&b);++i)g[a].push_back(b),g[b].push_back(a);
  int s[100100]={0,1},v[100100]={0,1};
  for(int u=0;;++u){
    int a=s[u];
    for(int i=g[a].size();i-->0;){
      int b=g[a][i];
      if(v[b]){
        if(u-v[b]>=k){
          printf("%d\n",u-v[b]+1);
          for(int j=v[b];j<=u;++j)printf("%d ",s[j]);
          return 0;
        }
      }
      else{
        s[v[b]=u+1]=b;
        break;
      }
    }
  }
} 
```

`

此代码用于查找长度超过“K+1”的循环，这是我正在研究的一个问题..您可以通过示例输入和输出自行检查

```
input
3 3 2
1 2
2 3
3 1
output
3
1 2 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:26:03.463

如果有效，因为您要声明一个向量*数组*。

如果你想要一个特定大小的向量，你需要将大小传递给构造函数：

```
std::vector<int> g(size); 
```

但是，请注意，`push_back`对上面声明的向量执行 a 会在*添加值时**增加*大小。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:07:46.557

这两个声明有点相似：第一个是 C 风格的 int 向量数组，第二个是 int 向量的向量。索引时，C 样式数组和向量的行为相似：表达式`list[1].push_back(2)`使用外部容器（C 样式数组或向量）上的索引，这对两者都有效。

话虽如此，这两个声明之间存在*重要*区别。第一个 ( `vector<int> list[N]`) 创建一个包含**N**个向量的 C 样式数组；生成的容器具有恒定的大小，永远无法更改。第二个 ( `vector<vector<int> > list;`) 创建一个空的向量向量：开始时*没有*元素，`list`对它的索引是未定义的行为。另一方面，您可以在内存允许的范围内动态扩展它。

作为一般规则，您应该避免使用 C 样式的数组。特别是作为局部变量，尤其是在元素数量相当大的情况下。即使在 C 中也是如此，因为堆栈大小通常是有限的。

另外：无论是处理 C 风格的数组*还是*向量，在没有首先检查值是否在范围内之前，您都不应该使用用户提供的值对它们进行索引。您的代码充满了未定义的行为，具体取决于输入。格式也很差。并且使用逗号运算符将两个语句放在 a 中`for`而不使用`{...}`是可怕的。您可能应该将其分解为几个功能。神奇数字 100100 的含义是什么？或者使用第二个元素 1 和所有其他元素 0 初始化`s`and的事实。`v`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:21:18.587

和

```
vector<int> list[1];
list[0].push_back(2); 
```

您正在将 a 推回`int(2)`名为 的数组的第 0 个元素中`list`。

和

```
vector< vector<int> > list[1];
list[0].push_back(2); 
```

您正在将 a 推回到`vector<int>(2)`名为 的数组的第 0 个元素中`list`。您要推回的元素是一个初始大小为 2 的整数向量。

`vector<T>(size_t)`注意：如果是，则不会发生这种情况`explicit vector<T>(size_t)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T08:22:58.690

`std::vector`有一个构造函数，它接受一个大小参数，并默认将许多对象构造到其中。

对于 C++ 11，这个构造函数是显式的，但我猜你正在 C++ 98 模式下编译，在这种情况下，推`1`入`vector<vector<int> >list`将导致`1`被隐式转换为`vector<int>(1)`.*

# google-chrome-extension - 新更新的扩展无法安装

> ID：15266212
> 
> 赞同：2
> 
> 时间：2013-03-07T08:17:17.063
> 
> 标签：google-chrome-extension, chrome-web-store

***找到答案*** [开发人员 Chrome 扩展程序：包无效。详细信息：“无法 uzip 扩展”](https://stackoverflow.com/questions/15259125/developer-chrome-extension-package-is-invalid-details-could-not-uzip-extensi)

Chrome 网上应用店开发者仪表板的最新更新破坏了一些功能。包括“用户反馈”，但最重要的是，任何用户都无法通过网络商店下载任何新上传的 zip 包，如果已安装扩展，它们也不会更新。

我有一个我昨天更新的活动扩展，但自从更新以来，用户无法安装最新版本，收到“无法解压缩”消息。我认为这可能是打包程序的问题。

其他人有这个问题，有没有人知道解决它的方法？

我尝试过：重建 zip 并增加版本号重建 manifest.json 和 utf8 编码

扩展 URL 是 [https://chrome.google.com/webstore/detail/custom-google-background/jepibmfmhopgkplegmkjgifmhabbjadg](https://chrome.google.com/webstore/detail/custom-google-background/jepibmfmhopgkplegmkjgifmhabbjadg)

在过去的几天里，这里似乎还有其他人遇到同样的问题 [https://groups.google.com/a/chromium.org/forum/?fromgroups=&nomobile=true#!topic/chromium-extensions/d56BP7CTU-米](https://groups.google.com/a/chromium.org/forum/?fromgroups=&nomobile=true#!topic/chromium-extensions/d56BP7CTU-M)

# tomcat - 如何在 myeclipse 8.5 上创建 Tomcat 项目

> ID：15266216
> 
> 赞同：0
> 
> 时间：2013-03-07T08:17:25.673
> 
> 标签：tomcat, myeclipse

我继承了一个已经在 Web 应用程序表单中的项目。该项目作为java项目导入，然后定义为tomcat项目。这对 MyEclipse 6 来说很容易，但我对 MyEclipse 8.6 有一些问题。

在 MyEclipse 6.0 中有一个将项目配置为 tomcat 项目的选项。这是通过检查来完成的

`<right click on project>->property->tomcat-><checking 'this is a tomcat project'>`.

我在 MyEclipse 8.6.1 中找不到相同的选项。任何机构都可以帮助我解决这个问题。

有没有转机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:10:29.190

没有特定设置可以使项目特定于特定服务器（尽管 MyEclipse Blue Edition 对 WebSphere 项目有点模糊）。只需部署到Tomcat。[如果您在部署时遇到问题，最好在 MyEclipse 网站](http://www.myeclipseide.com/forums)上寻求支持。

8.6.1 版现在有点旧了。您可以免费升级到最新版本 10.7.1（即将发布 11）。

# java - 使用 JSoup 测量下载页面/图像/...所需的时间

> ID：15266217
> 
> 赞同：0
> 
> 时间：2013-03-07T08:17:31.753
> 
> 标签：java, time, jsoup, pageload, measure

我正在用 java 制作一个基本的“webmonitoring 工具”，我正在使用库[jsoup](http://jsoup.org/)。一切正常，但问题是我无法弄清楚我什么时候实际（下载）了一些东西。以此为例；

```
Long start = System.nanoTime();
Document doc = Jsoup.connect("http://hln.be").get();
Long end = System.nanoTime();
long elapsedTime = end - start;
double seconds = (double) elapsedTime / 1000000000.0; 
```

这是了解完全（下载）页面需要多长时间的准确方法吗？get() 方法的定义是： ***将请求作为 GET 执行，并解析结果。***

所以我想这就是我正在寻找的，还是有更好的方法？

同样的问题，但仅适用于图像；如何知道我已经下载了所有图像而没有将它们实际保存在我的电脑上？我目前正在做这样的事情；我有一个所有图片 url 的列表，然后在 for 循环中我去

```
url = new URL(element.absUrl("src"));
in = url.openStream();
reader = new BufferedReader(new InputStreamReader(is)); 
```

在我打开流并使用 BufferedReader 读取它之后，这是否意味着我“下载”了它们？如果是这样，我可以测量执行这 3 行所需的时间，以了解下载图像需要多长时间？

我希望我清楚自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:50:25.283

您可以只使用该[`execute()`](http://jsoup.org/apidocs/org/jsoup/Connection.html#execute%28%29)方法，该方法仅获取页面而不解析响应。

例如

```
Document doc = Jsoup.connect("http://hln.be").execute(); 
```

# tomcat - CORE3282：标准输出：org.xml.sax.SAXParseException：文档根元素“taglib”，必须匹配 DOCTYPE 根“null”

> ID：15266219
> 
> 赞同：5
> 
> 时间：2013-03-07T08:17:40.053
> 
> 标签：tomcat, jakarta-ee, xml-parsing

我在我的一个应用程序中遇到错误 -

```
 CORE3282: stdout:
  org.xml.sax.SAXParseException: Document root element "taglib", mustmatch  DOCTYPE root "null" 
```

应用程序只有一个 servlet，只有一个 web.xml 和一个 pom.xml。

WEB.XML =======

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" 
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <display-name>Test</display-name>
    <description>Test Servlet</description>

    <servlet>       
        <servlet-name>open</servlet-name>
        <servlet-class>com.test.openRateServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>open</servlet-name>
        <url-pattern>/email</url-pattern>
    </servlet-mapping>

</web-app> 
```

这个问题是否与我的网络应用程序和 tomcat 版本不匹配有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-23T07:18:29.287

我遇到了与我在 Eclipse 中配置 tomcat 相同的问题，但是当我使用终端运行我的 tomcat 时，它只需一分钟即可工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T20:21:08.023

尝试使用下面

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_3.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_3.xsd" version="2.3"> 
```

# asp.net - 查询格式

> ID：15266221
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:17:50.553
> 
> 标签：asp.net, sql

我有下面几行的表格

> ### 姓名 月份 工资费用
> 
> 约翰一月 1000 50
> 约翰二月 5000 2000
> 杰克一月 3000 100

我想以以下格式获得输出。如何实现这一点。

> ### 姓名 1 月 2 月
> 
> 约翰 1000 50 5000 2000
> 杰克 3000 100 0 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:23:05.193

这个 sql(-server) 查询可以工作：

```
select name,
  isnull(max(case when month='jan' then salary end), 0) as Salary_jan,
  isnull(max(case when month='feb' then salary end), 0) as Salary_feb
  -- and so on
group by name 
```

# c# - c# 和 Cosmos 的 NAsm 错误

> ID：15266223
> 
> 赞同：2
> 
> 时间：2013-03-07T08:17:59.090
> 
> 标签：c#, visual-studio-2010, nasm, cosmos

我正在尝试使用 c# 和 Cosmos 构建一个小型操作系统。首先，
这一切都很好，只是从一个时刻到另一个它停止工作并给了我以下错误：

> 调用 NAsm 时发生错误。
> OSBoot.asm Line: 241424 Code: push dword System_Void__System_IO_Stream_Dispose__
> OSBoot.asm Line: 242633 Code: push dword System_Void__System_IO_Stream_Dispose__ t OSBoot.asm Line: 247640 Code: push dword System_Void__System_IO_Stream_Dispose__
> OSBoot.asm Line: 248618 Code: push dword System_Void__System_Collections_Generic_List_1_Enumerator__Commands_ICommand_ICommandBase_ *Dispose* _

我什至在新系统上安装了带有 cosmos 的 Microsoft Visual Studio 的新安装并从头开始，起初它可以工作，但再次没有任何问题它停止工作

```
using System;
using Commands;
using Sys = Cosmos.System;

namespace OS
{
public class Kernel : Sys.Kernel
{
    private Env SysEnv { get; set; }
    private InputHandeler InputHandler { get; set; }

    protected override void BeforeRun()
    {
        Console.WriteLine("Creating Enviriment...");
        SysEnv = new Env();
        InputHandler = new InputHandeler(new CommandLister());
        Console.WriteLine("Enviriment build");
        Console.Clear();
        Console.WriteLine("Os booted successfully.");
    }

    protected override void Run()
    {
        Console.Write(SysEnv.ConsolCommandPrefix);
        var input = Console.ReadLine();
        try
        {
            InputHandler.ExecuteInput(input);
        } catch(Exception)
        {
            //TODO good exeption and the use of it
        }
    }
}
} 
```

环境类

```
namespace OS
{
public class Env
{
    public string CurrentUser { get; set; }
    public string CurrnetDir { get; set; }
    private string prefix;
    public string ConsolCommandPrefix
    {
        get { return CurrentUser + "@" + CurrnetDir + prefix; }
        set { prefix = value; }
    }

    public Env()
    {
        ConsolCommandPrefix = "> ";
        CurrentUser = "Admin";
        CurrnetDir = "/";
    }
}
} 
```

CommandLister 类

```
using System;
using System.Collections.Generic;
using Commands.Command;
using Commands.Command.SystemCommands;
using Commands.ICommand;

namespace Commands
{
public class CommandLister
{
    private List<ICommandBase> KnownCommands { get; set; }
    private Unkown UnkownCommand { get; set; }

    public CommandLister()
    {
        KnownCommands = new List<ICommandBase>();
        addCommand(new Help());
        UnkownCommand = new Unkown();
    }

    public void addCommand(ICommandBase command)
    {
        KnownCommands.Add(command);
    }

    public ICommandBase getCommand(String input)
    {
        foreach (var command in KnownCommands)
        {
            if(true)
            {
                return command;
            }
        }
        return UnkownCommand;
    }

}
} 
```

其他类只包含一些文本，并且只向控制台打印一些内容

我有两个问题： - 是什么原因造成的 - 我该如何解决这个问题

**编辑：**我在另一个操作系统上再次尝试了它（我第一次使用 vista），这次我使用的是 Windows 7。同样的事情一开始就发生了（我又从头开始了..）但经过几次构建和运行它不知何故又坏了。即使撤消我所做的更改。它不会再建立了。

亲切的问候，

江户邮筒

# php - 如何从 php 到 Android 通信

> ID：15266226
> 
> 赞同：6
> 
> 时间：2013-03-07T08:18:05.393
> 
> 标签：php, android, request

我正在制作一个位置应用程序，用户可以在其中参数一些来自服务器的功能，所以我希望服务器开始与用户的电话进行通信。但首先，我想从 php.ini 打开与 android 的通信。

有没有办法从 php 服务器与 android 手机通信？

我已经使用了从 android 与 HTTP 到服务器的通信，返回值为`JSONObject`，但我找不到任何用于 php 调用 android 的东西。

我认为它就像可以让您的手机响铃的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:25:01.657

## GET 方法

您需要让 Android 客户端连接到您的服务器并传递您的 JSON 消息。如果客户端需要从服务器获取一些数据并断开连接，那么您可以使用普通的 HTTP 类型 GET。

## WebSocket 方法

但是，如果您决定需要一个长时间运行的 TCP 连接双向传递 JSON，那么您应该考虑使用 WebSockets 之类的东西。我写了一个[Android WebSocket 演示](https://github.com/palmerc/SecureWebSockets)。默认情况下，Android 客户端连接到 websocket.org 回显服务器，但可以轻松更改。

我还发现了一个[PHP WebSockets implementation](http://socketo.me)。

## 推送方法

现在，如果您的计划是在没有客户端启动连接的情况下将消息从服​​务器推送到客户端，您将需要 GCM（谷歌云消息传递）之类的东西。这是一篇涵盖[GCM 和 PHP](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:26:55.573

查看[适用于 Android 的 Google 云消息传递](http://developer.android.com/google/gcm/index.html)。

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。这可能是一条轻量级消息，告诉您的应用程序要从服务器获取新数据（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此即时消息等应用程序可以直接消费消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:29:44.280

通常，创建从服务器端到客户端的连接很复杂，因为：

1.  客户端可能使用私有 IP 地址。
2.  如果设备在防火墙后面连接，入站连接可能会被拒绝。
3.  如果可以在后台运行并监视服务器以获取新消息，则需要安装应用程序。

使用 Web：这取决于浏览器如何支持 JavaScript API，尤其是新的 HTML5 功能，例如[服务器发送事件](http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#server-sent-events)

> 为了使服务器能够通过 HTTP 或使用专用的服务器推送协议将数据推送到网页，本规范引入了 EventSource 接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T08:53:10.543

请使用下面的链接使用 php 在 mysql 中存储数据，并且您需要创建 web 服务，您将从 php 服务器获得两个响应

1) json

2) xml

如果您显示示例，请访问以下链接 [在 php 中创建基本 Web 服务](https://stackoverflow.com/questions/6507726/creating-a-basic-web-services-in-php)

还可以访问此链接以获得更好的描述 [http://phpmaster.com/lets-talk-1/](http://phpmaster.com/lets-talk-1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T08:57:30.267

您可以使用 HTTpReq 类：

```
public class HttpReq {

public   String send (String url){
    //send a http request and get the result    
    InputStream is = null;
    String result = "";

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

      try
        {
           BufferedReader reader = new BufferedReader(new InputStreamReader(is),8);
           StringBuilder sb = new StringBuilder();
           String line = null;

           while ((line = reader.readLine()) != null) 
            {
               sb.append(line + "\n");
            }

             is.close();
             result=sb.toString();

         }catch(Exception e){
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    return result;
} 
```

}

然后你使用这个类来建立连接并调用你的 php 文件来获取数据作为 JSonObject 。

```
 ht = new HttpReq();
             // send a http request with GET 
             x=ht.send("http://10.0.2.2/myFolder/myFile.php");
             JSONArray jArray;
            JSONObject json_data;

         String h[]=x.split("<");

           try {

                jArray = new JSONArray(h[0]);
                json_data = jArray.getJSONObject(0);
                url=json_data.getString("url");

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

在您的 Php 文件中，您可以使用此方法获取 JSON 数据或将其发送到 android App

```
Json_decode($string); 
```

和

```
Json_encode($string); 
```

我希望这会帮助你:)

# html - vertical-align:middle 用于 span 元素

> ID：15266227
> 
> 赞同：2
> 
> 时间：2013-03-07T08:18:09.037
> 
> 标签：html, css

我试图让跨度中的文本相对于相邻文本在中间垂直对齐。这很容易实现，但是当跨度中的文本占据两行时，文本会被截断。为了解决这个问题，当文本占据两行时，跨度需要扩大高度，或者以某种方式将文本与中间对齐。

该问题的一个工作示例在这里[http://jsfiddle.net/BxLnN/](http://jsfiddle.net/BxLnN/)

任何建议或解决方案将不胜感激。

包含元素的当前尺寸必须保持不变。

干杯!

html

```
<div class="divisions_container">
    <div class="division">
        <div class="div_head">
            DIVISION 1 <span>SIX WINNING NUMBERS</span>
        </div>
        <div class="div_head">
            DIVISION 2
            <div>
                <span>FIVE WINNING NUMBERS PLUS ONE OF THE TWO SUPPLEMENTARY NUMBERS</span>
            </div>
        </div>
    </div>
</div> 
```

的CSS

```
/* division winnings */
.divisions_container {
    font-size: 13px;
    padding: 0 10px;
    width: 7.4cm;
    height: 8.5cm;
}
.div_head {
    margin-top: 20px;
    text-align: left;
    padding-left: 5px;
    position: relative;
    background-color: #000;
    color: #fff;
    max-height: 6mm;
    font-weight: bold;
    font-size: 1.2em;
    }
/* # winning numbers */
.div_head span {
    font-size: 0.5em;
    vertical-align: middle;
    font-weight: 200;
    border: 1px solid red;
    display: inline-block;
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    left: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:24:03.570

你有`span`with `position: absolute;`。当你让一个元素绝对定位时，它会变成一个`block`没有任何边距的元素，你不能`vertical-align`在它们上使用，因为它只适用于`inline`和`inline-block`元素。

所以我建议这个CSS：

```
/* division winnings */
.divisions_container {
    font-size: 13px;
    padding: 0 10px;
    width: 7.4cm;
    height: 8.7cm;
}
.div_head {
    margin-top: 20px;
    text-align: left;
    padding-left: 5px;
    position: relative;
    background-color: #000;
    color: #fff;
    max-height: 6mm;
    font-weight: bold;
    font-size: 1.2em;
    }
/* # winning numbers */
.div_head span {
    font-size: 0.5em;
    vertical-align: middle;
    font-weight: 200;
    border: 1px solid red;
    display: inline-block;

}

.div_head div {position: absolute;
    right: 0;
    top: -2px;
    bottom: 0;
    left: 100px;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/BxLnN/1/](http://jsfiddle.net/praveenscience/BxLnN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:26:34.293

如果您可以为您的跨度设置一个固定的高度，例如`20px`左右，那么您可以使用：`line-height: 20px`在您的`.div_head span`风格中。然后会自动将文本居中`span`。

您也不需要设置 a`display: inline-block`和`vertical-align: middle`那种方式。

示例：http: [//jsfiddle.net/BxLnN/2/](http://jsfiddle.net/BxLnN/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:41:02.737

试试这个作品......您必须指定相对的跨度和位置的宽度，并增加或减少顶部和左侧的值；

```
.div_head span {
    font-size: 0.5em;
    vertical-align: middle;
    font-weight: 200;
    border: 1px solid red;
    display: inline-block;
    position: relative;
    right: 0;
    top: -20px;
    bottom: 0;
    left: 100px;
    text-align: left;
    width: 200px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T03:12:34.717

试试这个作品......您必须指定相对的跨度和位置的宽度，并增加或减少顶部和左侧的值；

```
.div_head span {
    font-size: 0.5em;
    vertical-align: middle;
    font-weight: 200;
    border: 1px solid red;
    display: inline-block;
    position: relative;
    right: 0;
    top: -20px;
    bottom: 0;
    left: 100px;
    text-align: left;
    width: 200px;
} 
```

**好人在这里** *HTML*

```
<div class="Division_Container">
<span>Division 1</span>
<span class="Inner_Container">
six winning numbers
</span>
</div>
<div class="Division_Container">
<span>Division 2</span>
<span class="Inner_Container">
five winning numbers and rest of the nubmers to be displayede winning numbers and rest of the nubmers to be displayed
</span>
</div>
<div class="Division_Container">
<span>Division 2</span>
<span class="Inner_Container">
five winning numbers and rest of the nubmers to be displayede winning n
</span>
</div> 
```

*CSS*

```
.Division_Container{display: block; width: 300px; background: #000; color: #fff; margin: 10px;}
.Inner_Container{display: inline-block; vertical-align: middle; left: 200px;  width: 200px; margin-left: 20px; border: 1px solid red;}
/* If you want to specify height add following */
.Division_Container:before{content: "."; display: inline-block; height: 100px; vertical-align: middle; visibility: hidden;} 
```

# java - 隐藏在 actionperformed 中的全局变量

> ID：15266230
> 
> 赞同：1
> 
> 时间：2013-03-07T08:18:23.003
> 
> 标签：java, variables, methods, global, hidden

我包括我的代码片段。变量 fnh 是在类范围内声明的（就在类定义之后）。然而，我不能让它与最后一条语句一起打印。如果放置在 actionPerformed 方法内，它会打印变量的值，而不是在它之外。可能是什么问题？任何及时的建议将不胜感激。

```
public class Lamp  {
   int fnh;
   Lamp()  {
     // More code here

  String[] numberOfRunners = { "8", "9", "10", "11", "12",
                                "13", "14", "15", "16", "17",
                                "18", "19", "20", "21", "22" };

   runners = new JComboBox( numberOfRunners );
   runners.setMaximumRowCount(5);        
   runners.addActionListener( new ActionListener() {
        @Override
        public void actionPerformed( ActionEvent ae ) {
           String  runnersNumber = ( String )runners.getSelectedItem();
           fnh = Integer.parseInt( runnersNumber );           
           reducedFNH = reduce( fnh );
       }}
   );     
   middle.add( runners );
   System.out.println( fnh );

    // More code here

} 
```

// 更多代码

} 课程结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:27:53.653

最后不见了`}`。

我曾经给出的最简单的答案:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:29:29.163

问题是 fnh 的值在您要打印时仍然为空。它第一次获得值是在 actionperfomed 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:41:47.320

You register your actionListener, and after that you output `fnh`. It has not changed yet, since no action was performed, so your listener was not called.

Maybe it's easier to understand like this:

```
public class Lamp  {
   int fnh;
   ...

   private ActionListener actionListener = new ActionListener() {
       @Override
       public void actionPerformed( ActionEvent ae ) {
          // This is only called, when user performs an action on runners
          String  runnersNumber = ( String )runners.getSelectedItem();
          fnh = Integer.parseInt( runnersNumber );
      }};

    public Lamp()  {
        ...
        runners = new JComboBox(numberOfRunners);
        runners.addActionListener(actionListener);
        System.out.println( fnh );
    }
} 
```

# sql - SqlServer 中的 XML 专用

> ID：15266232
> 
> 赞同：8
> 
> 时间：2013-03-07T08:18:30.020
> 
> 标签：sql, sql-server-2008, for-xml

我们有一个简单的表，需要转换为 XML

```
 Declare @Person TABLE
(   [BusinessEntityID] [int] NOT NULL,
    [PersonType] [varchar](2) NULL,
    [Title] [varchar](30) NULL,
    [FirstName] [varchar](30) NULL,
    [MiddleName] [varchar](30) NULL,
    [LastName] [varchar](30) NULL)

Insert Into @Person Values(10001,'IN','Article','Carolyn','Jo','Alonso') 
```

我们需要这个 xml 用于在 sql server 中使用 For XML 输出

```
<?xml-stylesheet type='text/xsl' href='result.xsl'?>
<documents>
  <document>
    <field name="BusinessEntityID">10001</field>
    <field name="PersonType">IN</field>
    <field name="Title">Article</field>
    <field name="FirstName">Carolyn</field>
    <field name="MiddleName">Jo</field>
    <field name="LastName">Alonso</field>
  </document>
 </documents> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T08:54:18.380

以下 XML PATH 查询应该可以帮助您了解大部分情况。您只需要添加样式表标题。

```
SELECT 
'BusinessEntityID' AS 'document/field/@name'
,   BusinessEntityID AS 'document/field'
,   '' AS 'document'
,   'documentType' AS 'document/field/@name'
,   PersonType AS 'document/field'
,   '' AS 'document'
,   'Title' AS 'document/field/@name'
,   Title AS 'document/field'
,   '' AS 'document'
,   'FirstName' AS 'document/field/@name'
,   FirstName AS 'document/field'
,   '' AS 'document'
,   'MiddleName' AS 'document/field/@name'
,   MiddleName AS 'document/field'
,   '' AS 'document'
,   'LastName' AS 'document/field/@name'
,   LastName AS 'document/field'
,   '' AS 'document'
FROM @Person
FOR XML PATH(''), ROOT('documents') 
```

# mysql - 传递 IN sql 语句以运行到 mysql 中的过程

> ID：15266240
> 
> 赞同：0
> 
> 时间：2013-03-07T08:18:57.973
> 
> 标签：mysql

我想创建程序以使用`limit`选项`insert into`.. `with select`.. 或`create table as select`.....

我想`limit`一次只插入 50 万条记录，所以我使用 while 循环，这次我设置了 count3，因为我试图插入 150 万条记录。

```
call proc1( with long sql statement......................)

DELIMITER //               
CREATE PROCEDURE proc1(IN sqllines text)               
   BEGIN    

   DECLARE valFrom INT;                   
   DECLARE valTo   INT;                         
   DECLARE count INt  default 0;                

       SET @sqlin = sqllines;         
       SET valFrom = 0;          
       SET valTo = 500000;          
       SET @sql = ('@sqlin LIMIT valFrom , valTo');      

 WHILE count < 3 
 DO  

  PREPARE stmt from @sql;           
  EXECUTE stmt;       

  SET valFrom = valFrom+500000;          
  SET valTo = valTo+500000;           
  set count = count + 1;            

END WHILE;           

END;              
//          
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:28:16.050

很抱歉，您不能将变量传递给 T-SQL 中的动态 SQL 语句。

您可以在我本人在[此处](https://stackoverflow.com/questions/9206251/is-it-possible-to-use-local-table-variables-in-a-procedure-inside-an-sql-query-c)发布的问题中找到更多信息。这里的答案对此有详细的解决方案。

# codeigniter - 中间有变量的 CodeIgniter 路由

> ID：15266241
> 
> 赞同：0
> 
> 时间：2013-03-07T08:19:03.703
> 
> 标签：codeigniter, routing

我需要编写一个 CI 路由，以便它加载正确的控制器。我有：

```
$route['en/(:any)/events'] = "en/catalog/events_for_route/$1"; 
```

它应该从`en/VAR1/events`去到`en/catalog/events_for_rout/VAR1`

为什么它不工作？

# javascript - 循环通过返回的 mongo 集合无法向 JSON 添加新值

> ID：15266246
> 
> 赞同：0
> 
> 时间：2013-03-07T08:19:34.250
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在使用我的节点应用程序返回一个 Mongo 集合（使用 Mongoose），并在它返回时尝试循环遍历它以增加每个集合项的新值。

我每个都使用下划线，但由于某种原因，它没有将我添加到列表中的内容附加到列表中。我究竟做错了什么？

我的代码：

```
Submission.find({}).sort('date', -1).execFind(function (err, submissions) {

    _.each(submissions, function (submission, key) {
        submissions[key]['newValue'] = 'test';
    });
}); 
```

但它没有添加 newValue : 'test'。

当我 console.log 它时，我得到了这个：

```
[{
    user_id: 1234,
    title: 'testing tyhe slug generation',
    description: '',
    topic: 'movies',
    source: 'http://www.apple.com',
    ip: '127.0.0.1',
    approved: false,
    slug: 'testing-tyhe slug generation',
    _id: 5133a60e16661e41db000001,
    created: Sun Mar 03 2013 11:35:42 GMT-0800 (PST),
    thumbnail: '9146edb190a960c1cc3b0eda7d9f719d'
}, {
    user_id: 1234,
    title: 'New submission test slug',
    description: '',
    topic: 'food-drink',
    source: 'http://www.apple.com',
    ip: '127.0.0.1',
    approved: false,
    slug: 'new-submission-test-slug',
    _id: 5133a6c8adcde860db000001,
    created: Sun Mar 03 2013 11:38:48 GMT-0800 (PST),
    thumbnail: 'd80003cf9c81a4982fbb81c99abb52dc'
}] 
```

这是一个异步问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:52:44.517

@bob_cobb，Mongoose 将结果作为“文档”的集合返回。我的意思是一组 javascript 对象而不是 JSON。所以在这些文档中的任何粗心操作也会影响数据库内容。

这里根据我的理解，您想在文档中添加动态或添加的属性。因此，请执行以下操作，

```
Submission.find({}).sort('date', -1).execFind(function (err, submissions) {

    _.each(submissions, function (submission, key) {
        //Here you are converting javascript object into JSON. 
        //That is remove all the functions associated with "submission" object.
        submissions[key] = submissions[key].toJSON(); 
        submissions[key]['newValue'] = 'test';

        //Note: Here submission.save() won't work.
    });

}); 
```

# gwt - 在数据的顶部和底部显示 SimplePager 分页菜单

> ID：15266247
> 
> 赞同：2
> 
> 时间：2013-03-07T08:19:37.037
> 
> 标签：gwt, pagination, simplepager

我有一些数据显示在 SimplePager 内的 CellTable 中。分页导航选项显示在底部，我想知道是否可以在数据的顶部和底部显示这些选项。

我想这样做是因为根据浏览器的大小，用户可能看不到控件。我希望导航控件在表格数据之前和之后显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:45:07.677

是的，只需添加两个寻呼机：

```
final AbstractPager pager = new SimplePager();
pager.setDisplay(cellTable);
contentPanel.add(pager);

contentPanel.add(cellTable);

final AbstractPager pager2 = new SimplePager();
pager2.setDisplay(cellTable);
contentPanel.add(pager2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:46:04.447

如果在布局中添加单元格表之前添加分页器，分页器将显示在顶部。

```
 CellTable table=new CellTable();
         VerticalPanel containerPanel = new VerticalPanel();
         SimplePager pager1 = new SimplePager(TextLocation.CENTER);
         containerPanel.add(pager);
         containerPanel.add(table);
         SimplePager pager2 = new SimplePager(TextLocation.CENTER)
         containerPanel.add(pager2) 
```

因此，您必须创建两个寻呼机并在它们之间添加 celltable。

# javascript - this.getDoc() 在使用 tinymce 的 FF 中为空

> ID：15266250
> 
> 赞同：5
> 
> 时间：2013-03-07T08:19:42.627
> 
> 标签：javascript, tinymce, rte

我遇到的问题是，当我加载页面时，我立即收到错误消息：`this.getDoc() is null`

调用gets函数`getBody()`，`Editor.js`文档好像不可用

```
getBody : function() {
    return this.bodyElement || this.getDoc().body;
}, 
```

在这种情况下，getBody() 已由壁虎代码块中的 destroy() 函数触发。

```
destroy : function(s) {
        var t = this;

        // One time is enough
        if (t.destroyed)
            return;

        // We must unbind on Gecko since it would otherwise produce the pesky "attempt to run compile-and-go script on a cleared scope" message
        if (isGecko) {
            Event.unbind(t.getDoc());
            Event.unbind(t.getWin());
            Event.unbind(t.getBody()); // here is the relevant getBody() call
        } 
```

销毁已由 tinymce.js 的函数 addUnload 触发

```
o.func.call(o.scope, 1); 
```

我能做些什么来避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:35:47.537

当我升级jquery时发生在我身上..

要解决它，只需将 jquery 升级到最新版本，还将 tinymce 升级到最新版本..

我在搜索网络时找到了解决此问题的其他解决方案。尝试删除文件管理器、图像管理器表单插件列表。如果设置不正确，可能会导致一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-22T08:24:35.337

虽然这已经得到解答，但我遇到了同样的问题，但解决方案与此处列出的任何内容不同。基本上即使使用最新最好的 jQuery 和 TinyMCE，我发现如果 tinymce.init() 的选项中的“external_plugins”为空，则在卸载/删除 tinymce 元素时会发生此错误。

对于上下文，它在使用 tinymce 关闭引导模式后发生在我身上，并且仅在此期间发生，并且仅在“external_plugins”为空（null、空对象或空字符串）时发生，它不喜欢它，除非有什么是定义。

# reporting-services - 如何在 ssrs 的工具提示上打印两个不同条目的计数值

> ID：15266251
> 
> 赞同：0
> 
> 时间：2013-03-07T08:19:46.433
> 
> 标签：reporting-services, count, tooltip, row, expression

我坚持要传递一个表达式来计算男性和女性成员的数量。我正在使用印度地图 .shp 文件，我想在工具提示上打印州名和男性和女性的单独计数。例如**“州：-德里，男性：- 23454，女性：- 45454。**但我'我没有得到正确的表达，我怎么能做到这一点。在我的数据库中有列性别，其中男性和女性条目按行排列。

请帮帮我。

谢谢你。

100ROV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:17:01.227

你有没有为你的**Tooltip**尝试过类似下面的表达式？

```
="State:- " & Fields!State.Value
  & ", Male:- " & CStr(Sum(IIf(Fields!Gender.Value = "M", 1, 0)))
  & ", Female:- " & CStr(Sum(IIf(Fields!Gender.Value = "F", 1, 0))) 
```

这假设有称为`State`和的字段`Gender`。

# paypal - Paypal 在结帐时无法检测到移动设备

> ID：15266252
> 
> 赞同：0
> 
> 时间：2013-03-07T08:19:46.913
> 
> 标签：paypal, paypal-ipn, express-checkout, paypal-buttons

我正在使用 PayPal 支付标准。在[x.com](http://x.com)上它说：

> 移动 PayPal 支付标准 (MPPS) 基于 PayPal 支付标准 (PPS)。PPS 是将 PayPal 支付流程集成到网站的最简单方法，一旦集成到网站，移动 **功能会自动提供**给使用移动设备访问您网站的用户。

一切都在结帐，但它始终是 PC 版本。尝试使用 iOS 和 Android 手机、BlueStacks 模拟器和来自 Chrome 开发者工具的不同用户代理设置。两者都不起作用。

这是我的按钮：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" name="paypal_form">
    <!-- Things you should change on per order -->

    <input type="hidden" name="item_name" value="<?=$paypalItemName?>"> <!-- Description of goods -->
    <input type="hidden" name="amount" value="<?=$total_amount?>"> <!-- Amount to bill customer -->
    <input type="hidden" name="invoice" value="<?=$paypalID?>"> <!-- Unique sales ID number -->

    <!-- Things you only need to change on setup -->

    <input type="hidden" name="business" value="name@mydomain.com">   <!-- Master Paypal Email -->
    <input type="hidden" name="currency_code" value="USD"> <!-- Currency -->
    <input type="hidden" name="return" value="http://www.mydomain.com/order-success.php?ppl=1&subscription_id=<?php echo $paypalID; ?>"> <!-- Your thank you page -->
    <input type="hidden" name="cancel_return" value="http://www.mydomain.com/order-declined.php">  <!-- Page incase of error-->

    <!-- Things you should not change -->

    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="undefined_quantity" value="1"> <!-- Quantity - Keep One -->
    <input type="hidden" name="item_number" value="1"> <!-- Item Number-->
    <input type="hidden" name="charset" value="utf-8"> <!-- Leave as is -->
    <input type="hidden" name="no_note" value="1"> <!-- No note required by customer -->
    <input type="hidden" name="notify_url" value="https://www.mydomain.com/api/paypal.php"> <!--Leave as is-->

    <input type="image" src="http://images.paypal.com/images/x-click-but01.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

使用`cmd="_express-checkout"`版本，我可以`cmd="_express-checkout-mobile"`在我的表单上将其更改为，但对于`cmd="_xclick"`.

那么，我应该`Exrepess Checkout`为移动设备实施还是有办法通过 PayPal Payments Standard 来实现呢？

**可能重复：** [针对 PayPal 网站付款标准的移动优化结帐](https://stackoverflow.com/questions/9538548/mobile-optimized-checkout-for-paypal-website-payments-standard) 在接受的答案中，它说要检查电子邮件。我无法访问它，但我尝试使用我的个人电子邮件，它没有任何额外的运费税和税收规则设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:55:29.293

如果您正在专门为移动设备构建页面，那么我建议您使用移动设备的 Express Checkout。但是，如果您想使用网站支付标准，则没有代码可以专门通过移动流程引导买家。PayPal 页面会发现它是移动设备，并通过移动流程引导买家。但是，情况并非总是如此。有些事情会导致买家通过常规网络流程而不是移动流程，即使他们在移动设备上也是如此。这可能取决于他们使用的按钮类型或代码中传递的变量，因为移动流程不支持所有变量。

# nginx - nginx 将所有通配符子域重写为 www.site.com

> ID：15266253
> 
> 赞同：14
> 
> 时间：2013-03-07T08:19:58.403
> 
> 标签：nginx, url-rewriting

使用 nginx，我想重定向 to 的所有子`example.com`域`www.example.com`。

我在这里看到重定向将非 www 重定向到 www 或反之亦然，但我也想`www2.site.com blabla.site.com`被重定向。我有一个域的通配符 dns。

对于 apache，这可以通过以下方式轻松完成：

```
RewriteCond %{HTTP_HOST} !www.example.com [NC]
RewriteRule (.*) http://www.example.com%{REQUEST_URI} [R=301,L] 
```

以下似乎可行，但根据[ifisevil page](http://wiki.nginx.org/IfIsEvil)不建议这样做。

```
if ($http_host !~ "www.site.com"){
    rewrite ^(.*)$ http://www.example.com$request_uri redirect;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T10:20:57.920

在 nginx 中执行此操作的最佳方法是结合使用两个服务器块：

```
server {
  server_name *.example.org;
  return 301 $scheme://example.org$request_uri;
}

server {
  server_name www.example.org;

  #add in further directives to serve your content
} 
```

我已经在我的笔记本电脑上对此进行了测试，因为您报告它无法正常工作。我在本地得到以下结果（在将`www2.test.localhost`和添加`www.test.localhost`到我的`/etc/hosts`，以及 nginx 配置位并重新加载 nginx 之后）：

```
$ curl --head www2.test.localhost
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.6
Date: Thu, 07 Mar 2013 12:29:32 GMT
Content-Type: text/html
Content-Length: 184
Connection: keep-alive
Location: http://www.test.localhost/ 
```

所以是的，这绝对有效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-07T10:27:10.967

```
server {
    server_name .example.com;
    return 301 http://www.example.com$request_uri;
}

server {
    server_name www.example.com;
    [...]
} 
```

参考：

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)
*   [http://nginx.org/r/server_name](http://nginx.org/r/server_name)
*   [http://nginx.org/r/return](http://nginx.org/r/return)

# javascript - 如何在网站中嵌入在线 ruby /javascript 代码执行器

> ID：15266255
> 
> 赞同：0
> 
> 时间：2013-03-07T08:20:15.840
> 
> 标签：javascript, ruby, parsing, ide

我正在尝试构建一个测试我的 ruby​​ 代码的小应用程序。我用谷歌搜索但没有多大帮助（可能是错误的单词选择）。我正在尝试创建`codecademy`/ `codeschool`/`tryruby`站点提供的功能。它们提供了一个在线运行代码的集成环境。我无法找到从哪里开始，即为什么这次没有代码:(。只需要知道什么具体`technologies`/`links`我必须为这个功能深入研究。

如果存在此类功能，请提供任何在线阅读资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:56:59.233

如果您想为 ruby​​ 执行此操作，还可以[查看 tryruby.com](http://tryruby.com)的来源。请参阅[https://github.com/Sophrinix/TryRuby](https://github.com/Sophrinix/TryRuby)（它不是当前版本的来源）。

回购似乎不是太最新，但它可以作为一个起点，或者其中一个分叉将。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:02:01.807

无法给出所有步骤，但基础很清楚（Ruby 的示例）：

*   创建一个基本的前端 - 可能只是一个大的 textarea 表单和一个提交按钮
*   在服务器上，获取表单的内容，使用[eval](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-eval)执行它并将输出返回到页面（使用简单的 erb）
*   如果您希望它具有某种交互性，您可以用已经存在的内容来补充表格。

之后，是时候玩交互了（以 ajax 风格进行以避免刷新并提供更好的体验），但这是锦上添花，我将从上面的基础开始。

警告：执行最终用户发送的任意代码可能（并且将会）很危险。这看起来更像是一个实验，如果它变得更多，请务必检查您的安全性（您基本上授予我在您的服务器上执行我想要的任何代码的权利）。

执行任意代码的上下文中的安全性是一个庞大而复杂的主题。从某事开始：

*   您的问题类似于“[代码注入](http://en.wikipedia.org/wiki/Code_injection)”问题-除了您实际上是在开门。基本示例：如果我提交的指令会停止进程怎么办？如果我开始删除您服务器机器上的所有文件夹？
*   您可能想查看[Ruby 安全级别](http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html)
*   更好的是，看看 Sven Fuch用于解析和执行代码的“[安全模式”](https://github.com/svenfuchs/safemode)

您的目标应该是完全“沙箱化”代码的执行：让它在一个单独的专用进程（甚至是 VM）中运行，在更糟糕的情况下，它可能会在不影响其他进程的情况下被销毁，并且对资源的访问非常有限。

祝你好运 ！

# ios - 何时为嵌入式 viewController 调用 prepareForSegue？

> ID：15266259
> 
> 赞同：1
> 
> 时间：2013-03-07T08:21:07.157
> 
> 标签：ios, segue, uistoryboardsegue

我在 viewController 中嵌入了一个 tableViewController。问题是我想将 tableViewController 的原型单元格内的一些 UITextFields 值传递到主 viewController 中。我的策略是使用 prepareForSegue 来获取 tableViewController 中的所有内容。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"DiveGearDetail"]) {
        DiveGearDetailTableViewController *DGTVC = [segue destinationViewController];
        gear_name = DGTVC.nameLabel.text;
        NSLog(@"Gear name: %@", gear_name);
    }
} 
```

这是一个好策略吗？在 viewDidLoad 之后什么时候调用这个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:12:33.237

先写在tableview的didSelectRowAtIndexPath方法中

```
[self performSegueWithIdentifier:@"DiveGearDetail" sender:nil]; 
```

此方法将调用 prepareForSegue ，您可以在目标类中分配要分配的值，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"DiveGearDetail"]) {
        DiveGearDetailTableViewController *DGTVC = [segue destinationViewController];
        DGTVC.gear_name = @"Your value"; // OR [[segue destinationViewController] setYourObject:value];
        NSLog(@"Gear name: %@", gear_name);
    }
} 
```

# java - 我怎么知道给我上课的班级的名字？我不需要被调用者提供任何关于它的类的信息

> ID：15266260
> 
> 赞同：2
> 
> 时间：2013-03-07T08:21:08.870
> 
> 标签：java

我需要对此提出建议

```
 class A{
    B b;
 }

 Class B{
    P String  something();
 } 
```

在

```
 class test{
    B b = new B();
    b.something();
 }

something() 
```

必须返回 cal-lee 类的名称，就像有人打电话给我（按名字）我应该知道他的名字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T08:24:32.000

一种解决方案是以编程方式生成堆栈跟踪：

```
private static String getCallerName() {
    StackTraceElement[] stElements = Thread.currentThread().getStackTrace();
    for (int i=1; i<stElements.length; i++) {
        StackTraceElement ste = stElements[i];
        if (!ste.getClassName().equals("B") && ste.getClassName().indexOf("java.lang.Thread")!=0) {
            return ste.getClassName();
            // you could also use ste.getMethodName() or ste.getLineNumber()
        }
    }
    return null;
} 
```

你会像这样使用它，例如：

```
public void something() {
   System.out.println("called by " + getCallerName());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:23:54.390

如果有人直呼你的名字，你不会知道，除非有人已经告诉过你。

这里也一样。

把你的名字从 A 级传到 B 级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:32:48.060

由于这个问题似乎有点不同寻常，一个架构替代方案。我不知道它是否更适合我。

```
class A {
    class C extends B {
        String something() {
            ... A.this
        }
    }
} 
```

# android - WebTextView 无法转换为 android.view.SurfaceView

> ID：15266262
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:21:09.973
> 
> 标签：android, webview, surfaceview

我为 webview 设置了 SurfaceView，如下所示：

```
wv.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() {  
        @Override
        public void onChildViewRemoved(View parent, View child) {}
        @Override
        public void onChildViewAdded(View parent, View child) {
            if(child.getClass().getName().equals("com.adobe.flashplayer.FlashPaintSurface")){
                Log.i("flash", "surface is open");
                ((SurfaceView)child).setZOrderOnTop(false); 
                ((SurfaceView)child).dispatchWindowFocusChanged(isHidden());
        }}
    }); 
```

但...

当我单击 WebViewText 时，尝试在那里写一些我的应用程序崩溃，并显示该错误日志：

```
03-07 10:14:37.425: E/AndroidRuntime(7378): FATAL EXCEPTION: main
03-07 10:14:37.425: E/AndroidRuntime(7378): java.lang.ClassCastException: android.webkit.WebTextView cannot be cast to android.view.SurfaceView 
```

我是个白痴——忘了把括号放在 if(){} 中。请不要降低我的价格！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:29:11.043

您在`if`...之后缺少括号

```
wv.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() {  
    @Override
    public void onChildViewRemoved(View parent, View child) {}
    @Override
    public void onChildViewAdded(View parent, View child) {
        if(child.getClass().getName().equals("com.adobe.flashplayer.FlashPaintSurface")) {
            Log.i("flash", "surface is open");
            ((SurfaceView)child).setZOrderOnTop(false); 
            ((SurfaceView)child).dispatchWindowFocusChanged(isHidden());
        }
    }
}); 
```

# matlab - Matlab 使用 ode45 进行四阶 ode

> ID：15266264
> 
> 赞同：2
> 
> 时间：2013-03-07T08:21:10.617
> 
> 标签：matlab

```
y'''' + (a1 + a2*v(t)^2)*y'' + (a3 + a4*v(t)^2)*y = 0 
y(0) = 2, Dy(0) = 0, D2y(0) = 0, D3y(0) = 0 
```

我试图用 Matlab 解决上述 4 阶 ode，`dsolve`但我得到的结果非常大。正如我现在所了解的，`dsolve`在这里行不通，我将不得不使用`ode45`来解决这个方程。

我试图按照 Matlab 在[ode45](http://www.mathworks.in/help/matlab/ref/ode45.html)上的文档进行操作，但我无法完全理解。此外，在我的情况下，系数也是时间相关的。

我怎样才能把这个方程转换成可以理解的格式`ode45`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:09:52.553

这是一个四阶 ODE，你不能直接解决这个问题。您必须将其重写为一阶 ODE 系统：

```
y_3' = -(a1+a2*v(t))*y_2 - (a3+a4*v(t)^2)*y
y_2' = y_3
y_1' = y_2
y' = y_1 
```

和

```
y(0) = 2
y_1(0) = 0
y_2(0) = 0
y_3(0) = 0 
```

这个，你可以喂给ODE45 ...

# django - 姜戈。RSS订阅

> ID：15266265
> 
> 赞同：1
> 
> 时间：2013-03-07T08:21:11.907
> 
> 标签：django, rss

我使用标准 django RSS：

```
from django.contrib.syndication.views import Feed

class RSSFeed(Feed):
    title = "MyBlog"
link = "/news/"
description = "Last news:"
item_link=link

    def items(self):
        return BlogPost.objects.all()[:10]

    def item_title(self, item): 
        return item.title

    def item_description(self, item):
        return item.description 
```

网址：

```
(r'^feed/$', RSSFeed()), 
```

结果，我为每个帖子获得了[http://mysite.com/news/](http://mysite.com/news/)。如何为每个帖子创建唯一链接？

帖子有自己的网址：

```
url(r'^news/(?P<slug>[^\.]+).html', view_post, name='view_blog_post'), 
```

看法：

```
def view_post(request, slug):
return render_to_response('post.html', {
    'post': get_object_or_404(BlogPost, slug=slug),
}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:35:17.123

在新闻模型中写道，

def get_absolute_url() 方法，返回每篇文章的url

# java - 写入文件时出错

> ID：15266267
> 
> 赞同：-4
> 
> 时间：2013-03-07T08:21:25.340
> 
> 标签：java

> ```
> package test_package2;
> 
> import java.io.*;
> 
> public class File_Directory_Operations {
> 
>     public void FileOperation() {
>         try {
>             byte[] bWtite = { 11, 12, 13, 14, 15 };
>             OutputStream objOS = new FileOutputStream("F:/Shiju/Test Programmes/Eclipse/testjava.txt");
>           for (int iCount = 0; iCount < bWtite.length; iCount++) {
>                 objOS.write(bWtite[iCount]);
>             }
>             objOS.close();
> 
>         } catch (Exception e) {
>               System.out.println(e.toString());
>         }
>     }
> } 
> ```

我是 Java 新手。我能够创建文件并将其写入其中，但是我在文件中得到了一系列字符，而不是预期的字节数组。为什么我无法打印数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:51:22.940

您可以使用以下代码来读取字节数组。

```
 InputStream objIS = new FileInputStream("F:/Shiju/Test Programmes/Eclipse/testjava.txt");

        int iSize = objIS.available();
        byte[] bytesToBeRed = new byte[ iSize ];
        objIS.read( bytesToBeRed  );
        objIS.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:39:26.917

If you want a byte array, convert `char[]` to `byte[]` then use `print` statement.

# jquery - ajax jquery中post的缺点

> ID：15266281
> 
> 赞同：0
> 
> 时间：2013-03-07T08:22:25.717
> 
> 标签：jquery, ajax

我面临一个普遍的问题...我在 ajax 中遇到过该帖子有时无法正常工作...这是我多年来一直在使用的代码...有时它可以工作，而有时却无法正常工作相同的代码....

```
$(function() {
var response = '179793678ActualWinter.jpg';
var rand_key = '77983890233423';
var id = 1;
    $("#btn").click(function () {
    $.post("ajax_files/test.php", { name: response, rand_key: rand_key,rentals_id:id }, function(data) {
        alert(data);

        });
    });
}); 
```

即使我回显“HI”，警报也是空的；在 test.php 上...可能是什么原因？这与浏览器有关吗？或者这种方法在新更新的 jquery 中是倾斜的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:27:54.600

`live()`已弃用并从最新的 jquery 版本中删除。

也许ajax 调用并不总是成功的。如果您使用的是 jquery 1.5 或更高版本，您可以使用以下方法检查错误：

```
$.post("ajax_files/test.php", { name: response, 
                                rand_key: rand_key,
                                rentals_id:id },
function(data) {
         alert(data);
}).fail(function(jqXhr){
     alert(jqXhr.responseText);
}); 
```

对于旧版本：

```
$.ajax({
    url: 'ajax_files/test.php',
    type: 'POST',
    success: function(){ },
    error: function(jqXhr){  
        alert(jqXhr.responseText);
    }
}); 
```

# excel - 在 Excel 中创建 AVERAGEIFS

> ID：15266283
> 
> 赞同：0
> 
> 时间：2013-03-07T08:22:35.200
> 
> 标签：excel, vba

我以前从未使用`AVERGEIFS`过，它对我来说有点太复杂了，所以请帮助我。

我有一个范围，我想平均列 A 中列值 B 等于 2 和列 A 值小于 3 的行的列值，所以这是正确的：

```
    WorksheetFunction.averageifs(columnA, columnA, "<3", columnB, "2") 

```

**编辑** 我得到一个“类型不匹配”

ColumnA 和 ColumnB 是范围，在 if 句子中，这就是我想要的

```
IF columnA < 3 AND columnB = 2 Then Average(columnA) 
```

~~**编辑**~~

我假设这一定与我的类型有关，然后`1004 cannot get the averageifs property of class worksheetfunction`当我输入参数时，averageifs 会抛出 a，但是 countifs 会`13 Type Mismatch`在给定相同参数的情况下抛出：

```
For Each column In importsheet.UsedRange.Columns
    colcount = .CountIfs(column, column, "<3", importsheet.UsedRange.Columns(DepColumn), sec)
Next 
```

~~DepColumn 和 colcount 是整数，sec 是一个字符串，~~ 上面有一个整数（“2”）clufuck错误，将其删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:33:49.500

假设`columnA`和`columnB`是相同大小的范围，您的公式是正确的：

```
WorksheetFunction.Averageifs(Range("A:A"),Range("A:A"),"<3",Range("B:B"),"2") 
```

将返回 A<3 且 B=2 的 A 列的平均值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:51:58.273

您发布的代码的语法是正确*的*

*   你已经`Dim`'ed`columnA`和`columnB`as `Range`'s`Set`然后到有效范围
*   您工作表上的数据返回结果（即至少有一行符合条件）

带有错误处理的演示：

```
Sub Demo()
    Dim columnA As Range
    Dim columnB As Range
    Dim v
    Set columnA = [A:A]
    Set columnB = [B:B]

    On Error Resume Next
    v = WorksheetFunction.AverageIfs(columnA, columnA, "<3", columnB, "2")
    If Err.Number = 1004 Then
        'No matching data
        v = CVErr(xlErrNA)
    End If
    On Error GoTo 0

End Sub 
```

# php - 从 ci_sessions 查找在线朋友

> ID：15266284
> 
> 赞同：0
> 
> 时间：2013-03-07T08:22:43.497
> 
> 标签：php, codeigniter, session

我在 codeigniter 中实现了一个聊天系统，所以现在我想显示在线朋友。现在我想知道如何查找在线朋友的人数/姓名，我有一个 ci_sessions 表，我在其中存储会话，codeigniter 自动存储它你知道的。我有一个表呼叫朋友，其中我有我的朋友列表表的结构是这样的

```
 id      user_id      friend_id
  1           1             2
  2           1             3
  3           1             4 
```

像这样。所以我想根据朋友表了解来自 ci_session 的在线用户。所以我在视图或html中使用了这个

```
 <?php

        $this->db->where("user_data <>","");
        $query = $this->db->get('ci_sessions');
        $result=$query->result();

        foreach ($result as $row) 
        {
            $user_data=$row->user_data;
            foreach (unserialize($user_data) as $k => $v) 
            {
                // here is something will be done if i m not wrong 
            } 

        }

    ?> 
```

假设我所有的朋友都在线，那么我怎样才能找到他们的人数/姓名/身份证。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:35:01.153

*类似的*东西

 *```
SELECT 
   user.name 
FROM users 
WHERE user_ID IN(SELECT friend_ID FROM friends WHERE user_ID='$current_user') AND
      user_ID IN(SELECT user_ID FROM ci_sessions)` 
```

应该管用。

然后`$db->num_rows;`用于计数。

**更新**

每次创建用户对象时都会运行：

```
UPDATE users SET last_activity=NOW() WHERE entity_ID=? 
```

然后查询使用这个：

```
SELECT 
    entities.UUID, 
    users.entity_ID, users.first_name, users.last_name, userinfo.image_ID 
FROM users 
LEFT JOIN entities ON entities.ID=users.entity_ID 
LEFT JOIN friends ON users.entity_ID=friends.user_ID_1 OR 
                     users.entity_ID=friends.user_ID_2 
LEFT JOIN userinfo ON users.entity_ID=userinfo.user_ID
WHERE 
    (friends.user_ID_1=? OR friends.user_ID_2=?) AND friends.approved=1 AND 
    users.entity_ID!=? AND (TIMESTAMPDIFF(MINUTE, users.last_activity, CURRENT_TIMESTAMP) < 15) 
ORDER BY first_name DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:19:50.057

我已经通过在 ci_sessions 表中添加 usir_id 列然后通过这个查询加入这个来完成这个，但首先你应该创建你的会话库，并且一点代码将在会话的内置中进行更改，可以在系统/库中找到你首先查看这篇文章来改变这一点，你会知道如何 [使用 ci_sessions 查找在线朋友](http://ellislab.com/forums/viewthread/207643/)

然后使用此代码获取数据。我在我看来使用它。你可以随意使用它。

```
 $data = array();

    $this->db->select('*');
    $this->db->from('ci_sessions');
    $this->db->join('users', 'users.user_id=ci_sessions.user_id');
    $this->db->join('friends', 'friends.user_id=ci_sessions.user_id or friends.sender_id=ci_sessions.user_id');

     $this->db->where('ci_sessions.user_id !=', $this->session->userdata('user_id'));
    $this->db->where('friends.sender_id', $this->session->userdata('user_id'));
    $this->db->or_where('friends.user_id', $this->session->userdata('user_id'));
    $this->db->where('users.user_id !=' , $this->session->userdata('user_id'));

    $this->db->where('friends.status', 1);

    $this->db->where('user_data !=', '');

    $query = $this->db->get();
    $num_rows   =   $query->num_rows(); 
```

然后用它来显示朋友的名字，你可以随意改变。

```
 <?php 

            if ($num_rows <= 0){?> 

             foreach ($query->result() as $row)
             {
                $udata = unserialize($row->user_data);
                /* put data in array using username as key */
                $data[$udata['name']] = $udata['name'];

                $time=$row->last_activity;
                $timeOut = time() -  150; 

                if ($time >= $timeOut)
                { //display name} else
                      echo $data[$udata['name']];

               }

        }} ?> 
```*

# css - （OOP 技术）继承与接口 --- 相同的概念？--- （CSS 技术）样式标签与样式类？

> ID：15266286
> 
> 赞同：0
> 
> 时间：2013-03-07T08:22:51.713
> 
> 标签：css, oop, inheritance, interface, multiple-inheritance

原谅那个疯狂的标题...

我试图理解面向对象编程中继承与接口的概念。所以我试图将它与我已经知道的东西联系起来，那就是 CSS。

在 CSS 中，您可以选择在允许元素“继承”样式的层次结构中设置样式：

*（就像 OOP 中的继承？）*

```
 a   { color:red; text-decoration:underline; }
    p   { background:black; color:white; padding:20px; } 
    img { background:silver; padding:2px;  } 
```

或者，使用 .class 样式（这是一种更好的做法）：

```
 .main-links      { color:red; text-decoration:underline; } 
    .main-paragraphs { background:black; color:white; padding:20px; }
    .main-images     { background:silver; padding:2px;  } 
```

*（像 OOP 中的接口？）*

## 我的问题是：

CSS 中的这个概念是否类似于继承与接口（用于 OOP）？还是我有完全错误的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:28:57.623

简短的回答：你有**完全**错误的想法。绝对**没有**人可以使用 CSS 向您解释 OOP 继承/接口。

继承和接口是编程概念（非常基本的设计模式），而 CSS 不是编程语言（不是图灵完备的）。

网上有很多非常易于理解的教程/文章，可以让您很好地理解这两个概念。我建议你阅读它们。

*编辑*：好吧，再想一想，也许，只是也许，继承可以用*CSS*来解释。就像 CSS 中的样式属性级联一样，类方法和属性“级联”到派生类。但是，阅读介绍性教程比尝试通过 CSS 理解这些概念要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:52:27.523

如果将 OOP 与 CSS 进行比较，您会发现可以将接口与样式进行比较，但 CSS 中没有继承这样的东西。

OOP 中的接口几乎就像将类应用于元素一样。就像你可以给一个元素添加几个类来组合不同的外观一样，你可以给一个类添加几个接口来组合不同的行为。

如果你在 CSS 中有继承，它会是这样的：

```
.main-links { color: red; }

.info-links { @inherits: .main-links; font-weight: bold; } 
```

在这里，一个规则将继承另一个规则，因此您可以仅将类`info-links`应用于一个元素以获得`main-links`.

（当然这在 CSS 中是行不通的，因为规则没有名称，只有选择器，而且选择器甚至不必是唯一的，因此它们不能用于识别规则。）

# javascript - 有 javascript 中的代码但没有 HTML

> ID：15266291
> 
> 赞同：-3
> 
> 时间：2013-03-07T08:23:13.827
> 
> 标签：javascript, html

我在这里有人的帮助下有这段代码，为了打印两种不同的样式。问题是我有javascript脚本但没有html，请帮助我

```
function print(o) {
    var head = document.getElementsByTagName('head')[0].innerHTML;
    if (o == 'client') {
        head += '<link rel="stylesheet" href="../css/style.css" media="screen, projection,print" />';
    }
    if (o == 'member') {
        head += '<link rel="stylesheet" href="../css/style1.css" media="screen, projection,print" />';
    }
    document.getElementsByTagName('head')[0].innerHTML = head;
} 
```

那么，HTML 应该是怎样的呢？它应该是2个按钮或其他东西......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:29:42.390

例如，此 HTML 应与您的代码一起使用：

```
<button onclick="print('client')">Client</button>
<button onclick="print('member')">Member</button> 
```

顺便说一句，您正在重新定义浏览器原生`print`功能。

*升级版*。您只需要一种`print`使用参数（`client`或`member`）调用函数的方法。您可以将此行为附加到任何 HTML 元素，只需`onclick`为其添加一个属性（这是最简单的方法）。例如链接：

```
<a onclick="print('client')">Client</a>
<a onclick="print('member')">Member</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:39:00.373

```
<htmL>
<head>
<script>
  window.onload = function () {
     print("client");
  };

  function print(o) {
         var head  = document.getElementsByTagName('head')[0];
         var link  = document.createElement('link');
         link.rel  = 'stylesheet';
         link.type = 'text/css';
         if (o == 'client') {
           link.href = 'css/style1.css';
         }
         if (o == 'member') {
           link.href = 'css/style2.css';
         }

         link.media = 'screen, projection,print';
         head.appendChild(link);
 }
 </script>
  </head>
  <body>
   <input type="button" name="clientStyle" value="Client Style" onclick="print('client');">
   <input type="button" name="memberStyle" value="Member Style" onclick="print('member');">
  </body>
  </html> 
```

可能是……你想要这样吗……？请

# oracle - 如何删除 Oracle 中 Blob 列的重复记录

> ID：15266297
> 
> 赞同：0
> 
> 时间：2013-03-07T08:23:37.510
> 
> 标签：oracle, duplicates, blob

当我想检测 oracle 表中的重复记录（具有 3 列 A1、A2 和 A3）时，可以使用以下查询：

```
Select  A1, A2, A3,count(1) 
from T 
group by A1, A2, A3 
having count(1) > 1; 
```

但如果 A3 是 Blob 类型，则此查询将返回错误消息“ORA-00932：不一致的数据类型：预期 - 得到 BLOB”，因为 blob 列不能按语句分组。那么我们如何使用 Blob 列查询重复记录呢？非常感谢。

# mysql - 用于仓库或任何其他标准的另一张桌子

> ID：15266300
> 
> 赞同：0
> 
> 时间：2013-03-07T08:23:54.327
> 
> 标签：mysql, sql, database, database-design, inventory

下面给出了三种进出仓库的交易

1-pick list 2-return list 3-DA list

DA 清单包含库存管理员从经销商处购买多少库存的信息（进货）
挑选清单是他提供给不同销售人员进行销售（出库）的库存退货清单是那些不是销售人员销售的库存，他返回它给库存管理员（进货）

库存管理员希望这些查询必须启用

1-可以按日期、销售人员查看以前的各种清单（PL RL DA 清单） 2-仓库中有多少库存

表格在下面

```
sku(id, name, type, category)
batch(sku_id, batch, price , date)
salesman(id, name)
transaction_type(type_id, transaction_name)
transaction_header(list_id , salesman_id, route )
transaction_detail(list_id, sku_id , Qty) 
```

列表 id 主键包含前缀，如 da-34244 pl-453 rs-3432，基于它识别哪种类型的列表是

所以问题是如何更新这个仓库表

```
warehouse(sku_id, qty , typeofsku) 
```

我想的可能性可能是

当用户输入列表时，他会在表单上给他一个按钮，这是列表，当用户按下此按钮时，首先在 transaction_detail 中输入详细信息，然后从该表中选择数量并根据列表类型添加或减去从仓库中获取数量然后更新仓库。

是否还有其他有效且良好的方法，请建议并提供详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:46:37.113

首先，每个表都应该有一个盲主键或集群键。盲密钥是与底层数据无关的密钥。盲键通常是自动递增的整数或长整数，或其他一些唯一 ID。

> 列表 ID 是一个主键，它包含一个前缀，例如 da-34244 pl-453 rs-3432，用于标识它是什么类型的列表。

您永远不应该在数据库列中有这样的组合字段。您应该将该字段分解为列表代码（da、pl、rs）和一个数字。您在生成输出时组合这些字段，以便用户看到他们熟悉的列表 ID。我假设这些数字只是递增整数。将列表类型与数据库中的列表编号分开可以更轻松地跟踪使用的编号。

> 按日期、按销售人员查询以前的各种列表（PL RS DA 列表）

您不会在任何表中存储时间戳，因此无法按日期查询。另外，您需要决定列表类型是在数据库中存储为大写还是小写。您已经使用了小写和大写的列表类型。

> 查询仓库有多少库存

您最后提到了一个仓库表，其中包含您需要的数量值。

**交易**

编辑添加：有时，您必须执行多个 SQL 语句才能完成事务。

您有一个交易抬头表、一个交易明细表和一个仓库表。

假设交易明细表来自退货清单，这意味着我们将库存数量添加回仓库表。

您的程序必须执行以下 SQL 步骤

*   将信息插入事务标题行。
*   对于退货列表中的每个 sku：
    *   将信息插入交易明细行。
    *   选择具有相同 sku_id 的仓库行。
    *   将交易明细行的数量添加到仓库行的数量。如果这是一个拣货清单，您将从仓库行的数量中减去交易明细行的数量。
    *   更新仓库行上的数量。
*   提交数据库更改。

上述所有步骤都成功发生，或者上述步骤都没有成功发生。这就是所谓的交易。这就是您提交（或回滚）对数据库的更改的原因。

交易的同步是保持您的库存数量正确的原因。想象一下，如果将交易明细行写入数据库，但仓库数量没有更新，在真实仓库中会发生什么情况。

是的，您必须完成上述所有步骤。没有捷径可走。

# javascript - Google 授权弹出窗口卡在 chrome 扩展中

> ID：15266305
> 
> 赞同：6
> 
> 时间：2013-03-07T08:24:16.493
> 
> 标签：javascript, google-api, google-drive-api, google-api-js-client

我在 chrome 扩展中使用[gapi](https://code.google.com/p/google-api-javascript-client/wiki/GettingStarted)客户端来访问 Google Drive。第一步是授权我的应用程序。我正在使用 gapi.auth.authorize 来启动授权。在我通过 gapi 启动的弹出窗口授权应用程序后，窗口永远不会关闭并卡住，如下图所示。但是后台授权已经成功，因为如果我手动关闭窗口，下次我就看不到卡住的弹出窗口了。有人能指出我做错了什么吗？

**在授权弹出窗口上单击“允许访问”后，**

![在此处输入图像描述](../Images/555a1fe8f82f1064ad86f2c9c3b93a55.png)

**然后它显示一个空白弹出窗口，它被卡住了**

![弹窗卡住了](../Images/981473c79cdbe0840eda8a7ced8b6e82.png)

**我正在使用的代码**

```
function handleClientLoad(){
      gapi.client.setApiKey('My API key');
      window.setTimeout(checkAuthAuto, 1);
}

var checkAuthAuto = function () {
    console.log('checkAuthAuto');
    gapi.auth.authorize({
        client_id: 'My client id',
        scope: 'https://www.googleapis.com/auth/drive.file',
        immediate: true
    }, handleAuthResult);
}

 function handleAuthResult(authResult) {
        console.log('handleAuthResult');
        var authButton = document.getElementById('authorizeButton');
        var filePicker = document.getElementById('filePicker');
        var addButton = document.getElementById('addButton');
        authButton.style.display = 'none';
        filePicker.style.display = 'none';
        addButton.style.display = 'none';
        if (authResult && !authResult.error) {
          addButton.style.display = 'block';
          addButton.onclick = uploadFile;
          console.log('handleAuthResult:noerror');

        } else {
          // No access token could be retrieved, show the button to start the authorization flow.
          authButton.style.display = 'block';

          console.log('handleAuthResult:error');
          console.log(authResult);

          authButton.onclick = function() {
              console.log('authButton.onclick');
              gapi.client.setApiKey('My api key');
              gapi.auth.authorize({
                  client_id: 'My client id',
                  scope: 'https://www.googleapis.com/auth/drive.file',
                  immediate: false
              }, handleAuthResult);
              return false;
          };
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T14:23:33.763

即使使用 chrome 扩展，您也可以使用 chrome.identity 并且弹出窗口会按照我们的预期关闭。

用一个名为 gapi.auth.authorize 的包装器包装 chrome.identity.getAuthToken。参考：[https ://github.com/GoogleChrome/chrome-app-samples/blob/master/gapi-chrome-apps-lib/gapi-chrome-apps.js](https://github.com/GoogleChrome/chrome-app-samples/blob/master/gapi-chrome-apps-lib/gapi-chrome-apps.js)

问题是当前的稳定版 chrome 28 不允许您这样做，您最好进行版本检查或等待一段时间，直到稳定版获得此功能。尽管如此，仍然不确定，即使我能够做到这一点，也可以通过扩展来做到这一点......

# c - 带字符串的 if 语句

> ID：15266310
> 
> 赞同：1
> 
> 时间：2013-03-07T08:24:30.503
> 
> 标签：c

我对编程完全陌生。

我只想输入 Dave，然后它应该显示“祝你有美好的一天”

所以我这样写：

```
 {
  char str[100];
  printf("\nwhat is your name?\n");
  scanf("%s",str);
  if (str="Dave")
     {
        printf("\nhave a nice day\n");
      }
  } 
```

最终，它什么也没有显示。它出什么问题了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T08:25:51.867

您的代码正在分配`str`指向字符串字面量`"Dave"`。我猜你的意思是比较（使用`==`）？这也将失败，比较两个`char`数组的地址。在 C 中，您应该使用[strcmp](http://linux.die.net/man/3/strcmp)来比较字符串

```
if (strcmp(str, "Dave") == 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:27:33.460

字符串比较需要一个库函数。代替

```
if (str="Dave") 
```

和

```
if(strcmp(str, "Dave") == 0) 
```

一开始，包括

```
#include<string.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:26:21.403

c中的字符串比较可以通过`strcmp()`from来完成`#include <string.h>`

```
if (strcmp(str,"Dave")==0)
     {
        printf("\nhave a nice day\n");
      } 
```

# magento-1.7 - 统一运费方式

> ID：15266315
> 
> 赞同：0
> 
> 时间：2013-03-07T08:24:38.317
> 
> 标签：magento-1.7, shipping

我需要启用统一运费，但不希望它显示在前端任何地方请帮我这样做谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:16:23.017

我想你想为此创建一个自定义模块。

我为此创建了一个管理员免费送货模块。这是我的模型文件。这可能对你有用。

```
<?php

class Namespace_Shipping_Model_Carrier_Customrate
    extends Mage_Shipping_Model_Carrier_Abstract
    implements Mage_Shipping_Model_Carrier_Interface
{
    protected $_code = 'my_customrate';
    protected $_isFixed = true;

    public function collectRates(Mage_Shipping_Model_Rate_Request $request)
    {

        if (!$this->getConfigFlag('active')) {
            return false;
        }
        if (!Mage::app()->getStore()->isAdmin()) {
            return false;
        }
        if ($request->getAllItems()) {
            foreach ($request->getAllItems() as $item) {

                if ($item->getProduct()->isVirtual() || $item->getParentItem()) {
                    continue;
                }

                if ($item->getHasChildren() && $item->isShipSeparately()) {
                    foreach ($item->getChildren() as $child) {
                        if ($child->getFreeShipping() && !$child->getProduct()->isVirtual()) {
                            $freeBoxes += $item->getQty() * $child->getQty();
                        }
                    }
                } elseif ($item->getFreeShipping()) {
                    $freeBoxes += $item->getQty();
                }
            }
        }

        $result = Mage::getModel('shipping/rate_result');

        $method = Mage::getModel('shipping/rate_result_method');
        $method->setCarrier('proporta_customrate');
        $method->setCarrierTitle($this->getConfigData('title'));
        $method->setMethod('proporta_customrate');
        $method->setMethodTitle($this->getConfigData('name'));
        $method->setPrice(0);
        $method->setCost(2);

        $result->append($method);

        return $result;
    }

    public function getAllowedMethods()
    {
        return array('proporta_customrate' => $this->getConfigData('name'));
    }
} 
```

# php - CodeIgniter 标头已经发送，并且在 index.php 开头的 ob_start()

> ID：15266322
> 
> 赞同：3
> 
> 时间：2013-03-07T08:25:05.113
> 
> 标签：php, codeigniter

在我的应用程序中，我可以确保没有这样的“非故意”空白或其他任何东西。我不在控制器或模型上执行“回显”，但日志文件上总是出现“标头已发送”错误（浏览器中未显示任何内容）。我也没有任何关闭 php 标记。唯一“可疑”的事情是我在模型和控制器上都加载了会话和输入库。

这实际上不是什么大问题，但是如果我使用 CLI 请求，错误会变得很糟糕。

浏览了一会儿，我在堆栈溢出时找到了这个答案： [https](https://stackoverflow.com/a/13783368/755319) ://stackoverflow.com/a/13783368/755319 它说我可以在 index.php 的开头添加 ob_start() 用于输出缓冲

```
<?php
ob_start();
/*
 *---------------------------------------------------------------
 * APPLICATION ENVIRONMENT
 *--------------------------------------------------------------- 
```

难道是省了做这种事？

**编辑：**好的，我可能错了，在这里错过了一些东西。有什么程序化的方法可以找出问题所在吗？（一个程序来查找错误的 php 标签、空格或其他东西）？

**再次编辑：**该错误仅在 CLI 模式下生成。错误如下：

```
<h4>A PHP Error was encountered</h4>

<p>Severity: Notice</p>
<p>Message:  Undefined index: REMOTE_ADDR</p>
<p>Filename: core/Input.php</p>
<p>Line Number: 351</p>

</div><div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">

<h4>A PHP Error was encountered</h4>

<p>Severity: Warning</p>
<p>Message:  Cannot modify header information - headers already sent by (output started at /home/gofrendi/public_html/No-CMS/system/core/Exceptions.php:185)</p>
<p>Filename: libraries/Session.php</p>
<p>Line Number: 675</p> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T13:16:08.930

Output generated by the first warning will trigger the second warning (i.e: *Cannot modify header information* ). In theory, if you solve the first warning, the second should auto-fix.

Open `system/core/Input.php` and at line #351 replace:

```
$this->ip_address = $_SERVER['REMOTE_ADDR']; 
```

with:

```
$this->ip_address = $this->server('remote_addr'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:32:11.150

避免输出缓冲的一般原因是它缓冲了输出。这似乎很明显，但是如果您的输出被保存在缓冲区中直到事情结束，那么它直到过程结束才被传送到浏览器，一次。这意味着您的页面似乎不再逐渐加载，但整个事情必须先运行，使其看起来更慢。

所以通常，当除了输出缓冲没有其他方法可以做到这一点时，你可能有一个很好的理由来做同样的事情。

# java-me - j2me 波兰语文本字段

> ID：15266325
> 
> 赞同：0
> 
> 时间：2013-03-07T08:25:16.990
> 
> 标签：java-me, j2mepolish

我有一个带有 TextField 的表单。当 TextField 接受 DECIMAL 值时，表单将 123 放在左上角。当 TextField 接受字母表时，当我运行模拟器时，表单将“abc”放在左上角。![数字的问题](../Images/31dadaf5d8dd606e7fd1c78ef6b9b9b8.png).![有问题](../Images/d37bf743161baf9f065081ab4df015ad.png)

（我已经用红色圆圈通知它）它会产生一些不必要的数据问题。谁能回答我如何从表格的左上角删除这个“123”或“abc”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T20:17:54.563

## 我在 j2me-polish 文档中找到了答案

> **停用输入指示灯**
> 
> 通过将“polish.TextField.showInputInfo”变量设置为“false”，可以全局禁用信息项：
> 
> ```
> <variable name="polish.TextField.showInputInfo" value="false" /> 
> ```

访问[http://www.enough.de/products/j2me-polish/documentation/lush-ui/visual-guide/gui-item-textfield.html#textfield-deactivate](http://www.enough.de/products/j2me-polish/documentation/lush-ui/visual-guide/gui-item-textfield.html#textfield-deactivate)

# bash - 在使用 zenity --progress 从管道读取进度条的 bash 脚本中，如何安全地终止管道进程？

> ID：15266329
> 
> 赞同：1
> 
> 时间：2013-03-07T08:25:28.753
> 
> 标签：bash, progress, fifo, zenity

我在 bash 脚本中显示命令进度。命令输出通过管道传送到 zenity --progress 并最终可以运行很长时间。如果我取消 zenity 对话框，我想中止它（杀死该命令）：

```
( echo 0; command; echo 100 ) | if ! zenity --progress
                                then DO_SOMETHING_TO_KILL_command
                                fi 
```

我找到的所有解决方案：

1.  一般用 pgrep、pidof、pkill、killall 等杀死“命令”。这不是我想要的，因为可能有很多这样的“命令”正在运行。

2.  创建一个fifo来输出“command”的PID（command & echo $!>some_fifo; wait），然后在管道之后从中读取。

解决方案 2\. 做我想做的事，但是以一种过于复杂的方式（参见例如[此处](http://forum.ubuntu-fr.org/viewtopic.php?pid=6995391#p6995391)的示例（法语））。如果可能，我想避免使用 fifos 或临时文件。似乎最多可以通过将输出重定向到文件描述符来完成，但我无法确切地知道如何。

注意：带有重定向的整个组的命令替换，例如 $( ( ... command& echo >&3 ... | zenity --progress ) 3>&1 ) - 这是这种类型的通用解决方案 - 确实在这里不起作用，因为 $(...) 等到整个子shell完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:02:41.673

最强大的实现之一：

```
#!/bin/bash

( # the pipe creates an implicit subshell; marking it explicit
 (
  sleep 10 & echo $! >&3
  wait
  echo 100 # to stdout, first pipe
 ) | (
  if ! zenity --progress
  then echo zen_progress_aborted >&3
  fi
 )
) 3>&1 | (
      read FD3_FIRST
      read FD3_SECOND
      # the PID comes first and the zenity output second almost always
      #+but we cannot be sure so:
      if [ "$FD3_SECOND" = "zen_progress_aborted" ]
       then kill $FD3_FIRST
      elif [ "$FD3_FIRST" = "zen_progress_aborted" ]
       then kill $FD3_SECOND
      fi
     )
# 'echo 100' after 'wait' means zenity does not exit after the command ends
#+so no need to kill it in this case

exit 0 
```

它比使用“coproc”复杂得多，但它是 POSIX 可移植的，并且在第二个“echo”超过第一个的极少数情况下它是强大的（例如，zenity 由于错误而失败并且子进程恰好稍后启动）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:53:52.950

一个简单的 POSIX 版本：

```
( # the pipe creates an implicit subshell; marking it explicit
 ( sleep 10; echo 100 )& echo $!
) | (
 read PIPED_PID; zenity --progress || kill $PIPED_PID
) 
```

如果`zenity`失败，这也有效。即使删除第一个`command`（`sleep 10`在这种情况下），`echo $!`总是会首先输出到管道，所以我们在运行进度条之前读取它。

当 long `command`（`sleep 10`上面）不输出进度数字时，一个更简单的变体：

```
sleep 10 & PIPED_PID=$!
tail -f /dev/null --pid $PIPED_PID | ( zenity --progress || kill $PIPED_PID ) 
```

`wait`在这里不起作用，因为管道创建了一个子进程的同级子shell `&`。这适用于 bash 以外的 shell，但`tail --pid`不是 POSIX 标准。一个 POSIX 版本：

```
sleep 10 & PIPED_PID=$!
while kill -s 0 $PIPED_PID; do sleep .1; done | ( zenity --progress || kill $PIPED_PID ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:39:26.177

这应该有效：

```
coproc { echo 0; command; echo 100; }
zenity --progress <&${COPROC[0]} || kill $! 
```

# python - Python2.7 从sqlite生成带有format()和buffer对象的sql查询

> ID：15266331
> 
> 赞同：1
> 
> 时间：2013-03-07T08:25:33.130
> 
> 标签：python, sqlite, binary, format

我尝试使用 .format() 和二进制内容构建一个 sql 查询字符串（注入没有问题）。最小示例需要相同路径中的示例图像。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sqlite3 as lite
import sys

try:
    con = lite.connect(':memory:')

    cur = con.cursor()
    binary = lite.Binary(open("woman.jpg", "rb").read())

    cur.execute("CREATE TABLE 'Images' ('Data' BLOB)") 
    cur.execute("INSERT INTO Images(Data) VALUES (?)", (binary,) )

    query = "INSERT INTO Images(Data) VALUES ({0})".format(binary)
    cur.execute(query) # <- doesn't work obviously

    con.commit()    

except lite.Error, e:

    if con:
        con.rollback()

    print "Error %s:" % e.args[0]
    sys.exit(1)

finally:

    if con:
        con.close() 
```

就像来自[http://zetcode.com/db/sqlitepythontutorial/](http://zetcode.com/db/sqlitepythontutorial/)但带有 .format() 查询生成的插入图像示例

有没有办法用 .format() 实现这一点？我想使用一致的方式将数据插入数据库。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:57:31.503

您可以根据[SQLite 文档](http://www.sqlite.org/lang_expr.html)将 BLOB 数据格式化为 BLOB LITERAL 值，例如

```
X'53514C697465' 
```

二进制数据可以编码为十六进制数字字符串，然后使用格式插入。

```
with open(path, 'rb') as f:
    "X'{0}'".format(r.read().encode('hex')) 
```

# postgresql - PostgreSQL - CSV 文件导入错误

> ID：15266338
> 
> 赞同：4
> 
> 时间：2013-03-07T08:26:05.407
> 
> 标签：postgresql, csv, postgresql-9.2

我正在尝试将 csv 文件导入 PostgreSQL 表（9.2）。我收到一列值输入语法错误的错误，但似乎 PostgreSQL 不匹配列及其值。

我正在使用以下命令导入 CSV：

```
\copy project_task from '/home/user/downloads/project_task_export.csv' WITH DELIMITER ',' CSV HEADER 
```

错误如下所示：

```
ERROR:  invalid input syntax for integer: "4.25"
CONTEXT:  COPY project_task, line 3, column sequence: "4.25" 
```

我的 csv 数据如下所示：

```
id,create_uid,create_date,write_date,write_uid,remaining_hours,date_start,description,sequence,date_end,active,planned_hours,partner_id,delay_hours,user_id,name,date_deadline,notes,type_id,company_id,priority,total_hours,state,progress,user_group_id,project_id,effective_hours,context_id,timebox_id
185,8,2012-06-05 09:51:09.562849,2012-09-10 08:52:05.789792,26,4.25,2012-06-19 15:54:07,"asdcxzzsrt ab cdefgqwer tyuipok asmmdmksa kmsaaqqwerr.
",10,,t,12,,0.0,6,byrteqwas oeirklm askeiurjqqpl,,,,1,2,12.0,open,64.579999999999998,,9,7.75,1,4 
```

如果您仔细查看此 CSV 数据和错误，则列序列是第 9 列，并且显示的错误看起来像 PostgreSQL 使用第 6 列值作为 9 列。为什么这样做？或者也许我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:32:07.647

估计问题是CSV文件中列的顺序与目标表中的顺序不匹配。您会认为这`COPY`会根据第一行的标题映射列，但它实际上忽略了第一行，如本[文档摘录](http://www.postgresql.org/docs/9.2/static/sql-copy.html)中所述：

> HEADER
> 指定文件包含一个标题行，其中包含文件中每一列的名称。输出时，第一行包含表中的列名，输入时，**第一行被忽略**。仅当使用 CSV 格式时才允许使用此选项。

您需要`\copy`在表格名称后的括号中添加列列表，按文件中的顺序排列：

```
\copy project_task(id,create_uid,.....,context_id,timebox_id) from '/path/to/file'... 
```

# sql-server - 如何在不同的 SQL Server 之间传输数据？

> ID：15266342
> 
> 赞同：0
> 
> 时间：2013-03-07T08:26:33.923
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, stored-procedures, sql-server-2008-r2

我想将数据从一个 SQL Server 传输到另一个 SQL Server。

Sql Server 凭据

```
 sql server name = Test
 UserName = sa
 Password = test1 
```

另一个 Sql Server 凭据

```
 sql server name = Test1
 UserName = sa1
 Password = test12 
```

现在我想将数据从服务器测试传输到服务器测试1，我该如何在存储过程中做？

另外我不想使用备份文件，我只想正确存储过程。

提前致谢

问候阿米特维亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:50:29.473

有几种方法可以实际设置它。

1.) 链接服务器 [http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

2.) OpenRowSet [http://msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

3.) 复制 [http://msdn.microsoft.com/en-us/library/ms151198.aspx](http://msdn.microsoft.com/en-us/library/ms151198.aspx)

根据您的需要，您需要选择最适合您的一种。

如果您希望您的第二个数据库中的数据可以在您的原始数据库中访问，就像它自己的数据一样，对于查询、存储过程......等等，请查看链接服务器。

如果您想要一次性访问数据，请查看 OpenRowSet。

如果您在两个数据库上都有相同的表并希望自动保持该数据同步，我会查看 Replication。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T08:34:51.737

您可以在 Test1 服务器上为 Test 服务器设置[Linked 服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx)，然后在 Test1 服务器的查询和存储过程中使用来自 Test 服务器的数据。例如

```
select * from Test.somedb.dbo.SomeTable

exec Test.somedb.dbo.SomeProc 
```

或者如果您想将数据从第一台服务器上的表自动传输到另一台服务器上的表，您可以使用[复制](http://msdn.microsoft.com/en-us/library/ms151198.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:08:03.347

你试过 `DTSWizard`吗？它是一个基于 GUI 的工具。

# postgresql - 在 Postgres 9.0+ 中使用 PL/pgSQL 在表上循环

> ID：15266345
> 
> 赞同：30
> 
> 时间：2013-03-07T08:26:37.277
> 
> 标签：postgresql, variables, loops, plpgsql, tablename

我想遍历我所有的表来计算每个表中的行数。以下查询给我一个错误：

```
DO $$
DECLARE
    tables CURSOR FOR
        SELECT tablename FROM pg_tables
        WHERE tablename NOT LIKE 'pg_%'
        ORDER BY tablename;
    tablename varchar(100);
    nbRow int;
BEGIN
    FOR tablename IN tables LOOP
        EXECUTE 'SELECT count(*) FROM ' || tablename INTO nbRow;
        -- Do something with nbRow
    END LOOP;
END$$; 
```

错误：

> ```
> ERROR:  syntax error at or near ")"
> LINE 1: SELECT count(*) FROM (sql_features)
>                                           ^
> QUERY:  SELECT count(*) FROM (sql_features)
> CONTEXT:  PL/pgSQL function inline_code_block line 8 at EXECUTE statement 
> ```

`sql_features`是我的数据库中的表名。我已经尝试使用`quote_ident()`但无济于事。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-07T18:29:35.477

我不记得上次我实际上需要使用显式游标在 plpgsql 中循环。
使用[**`FOR`**循环](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-RECORDS-ITERATING)的隐式游标，这更干净：

```
DO
$$
DECLARE
   rec   record;
   nbrow bigint;
BEGIN
   FOR rec IN
      SELECT *
      FROM   pg_tables
      WHERE  tablename NOT LIKE 'pg\_%'
      ORDER  BY tablename
   LOOP
      EXECUTE 'SELECT count(*) FROM '
        || quote_ident(rec.schemaname) || '.'
        || quote_ident(rec.tablename)
      INTO nbrow;
      -- Do something with nbrow
   END LOOP;
END
$$; 
```

您需要包含架构名称以使其适用于所有架构（包括不在您的架构中的架构`search_path`）。

此外，您实际上*需要*使用[`quote_ident()`](https://www.postgresql.org/docs/current/functions-string.html)or [`format()`](https://www.postgresql.org/docs/current/functions-string.html)with `%I`or[`regclass`](http://ttps://www.postgresql.org/docs/current/datatype-oid.html)变量来防止 SQL 注入。*表名几乎*可以是双引号内的任何内容。看：

*   [表名作为 PostgreSQL 函数参数](https://stackoverflow.com/questions/10705616/table-name-as-a-postgresql-function-parameter/10711349#10711349)

小细节：转义模式`_`中的下划线 ( )`LIKE`使其成为*文字*下划线：`tablename NOT LIKE 'pg\_%'`

### 我该怎么做：

```
DO
$$
DECLARE
    tbl   regclass;
    nbrow bigint;
BEGIN
   FOR tbl IN
      SELECT c.oid
      FROM   pg_class     c
      JOIN   pg_namespace n ON n.oid = c.relnamespace
      WHERE  c.relkind = 'r'
      AND    n.nspname NOT LIKE 'pg\_%'         -- system schema(s)
      AND    n.nspname <> 'information_schema'  -- information schema
      ORDER  BY n.nspname, c.relname
   LOOP
      EXECUTE 'SELECT count(*) FROM ' || tbl INTO nbrow;
      -- raise notice '%: % rows', tbl, nbrow;
   END LOOP;
END
$$; 
```

Query[`pg_catalog.pg_class`](https://www.postgresql.org/docs/current/catalog-pg-class.html)而不是`tablename`，它提供了表的 OID。

[对象标识符类型`regclass`](https://www.postgresql.org/docs/current/datatype-oid.html)便于简化。特别是，表名在必要时自动被双引号和模式限定（也防止[SQL 注入](https://stackoverflow.com/questions/10705616/table-name-as-a-postgresql-function-parameter/10711349#10711349)）。

此查询还排除临时表（临时模式在`pg_temp%`内部命名）。

要仅包含给定模式中的表：

```
 AND    n.nspname = 'public' -- schema name here, case-sensitive 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-07T08:46:10.410

游标返回一条记录，而不是标量值，因此“tablename”不是字符串变量。

连接将记录转换为如下所示的字符串`(sql_features)`。如果您选择了例如带有表名的模式名，则记录的文本表示将是`(public,sql_features)`.

因此，您需要访问记录中的列来创建您的 SQL 语句：

```
DO $$
DECLARE
    tables CURSOR FOR
        SELECT tablename
        FROM pg_tables
        WHERE tablename NOT LIKE 'pg_%'
        ORDER BY tablename;
    nbRow int;
BEGIN
    FOR table_record IN tables LOOP
        EXECUTE 'SELECT count(*) FROM ' || table_record.tablename INTO nbRow;
        -- Do something with nbRow
    END LOOP;
END$$; 
```

您可能希望使用`WHERE schemaname = 'public'`而不是`not like 'pg_%'`排除 Postgres 系统表。

# puppet - Puppet - 测试一个包是否已经定义？

> ID：15266347
> 
> 赞同：19
> 
> 时间：2013-03-07T08:26:42.833
> 
> 标签：puppet

我正在编写一些木偶模块并在两个模块中定义了一个包，因此出现以下错误：

```
err: Could not retrieve catalog from remote server: Error 400 on SERVER: Duplicate definition: Package[gnome-session-fallback] is already defined in file /etc/puppet/modules/vnc4server/manifests/init.pp at line 3; cannot redefine at /etc/puppet/modules/vino/manifests/init.pp:7 on node l 
```

因此要确保该包尚未定义，但以下内容不起作用：

```
if ! defined ('gnome-session-fallback') {
    package { 'gnome-session-fallback':
        ensure => installed,
    }
} 
```

任何人都可以建议如何解决这个问题，并且在更广泛的范围内，避免模块中此类冲突的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-09T23:13:39.870

您在定义的（）中缺少包 []。正确的做法：

```
if ! defined(Package['gnome-session-fallback']) {
    package { 'gnome-session-fallback':
        ensure => installed,
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-09T19:34:36.603

最干净的方法是使用[puppetlabs-stdlib](https://forge.puppetlabs.com/puppetlabs/stdlib)`ensure_resource`中的函数：

`ensure_resource('package', 'gnome-session-fallback', {'ensure' => 'present'})`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T13:58:46.717

要回答我自己关于什么是“正确”方法的问题：这个问题在[https://groups.google.com/forum/?fromgroups=#!topic/puppet-users/julAujaVsVk](https://groups.google.com/forum/?fromgroups=#!topic/puppet-users/julAujaVsVk)和 jcbollenger 提供了看起来像“最佳实践”解决方案 - 多次定义的资源应移动到它们自己的模块中，并包含在它们所依赖的类中。我应用了这个并解决了我的问题。

这实际上并没有回答为什么“如果！定义”失败了......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-24T18:28:25.893

一种更简洁的方法（在多种方法中）是创建一个虚拟包资源，然后实现它。您可以多次实现同一个虚拟包而不会出错。

```
@package { 'gnome-session-fallback':
    ensure => installed,
} 
```

然后在你需要的地方：

```
realize( Package[ 'gnome-session-fallback' ] ) 
```

# javascript - jQuery 加载函数处理会话超时

> ID：15266350
> 
> 赞同：1
> 
> 时间：2013-03-07T08:26:53.577
> 
> 标签：javascript, jquery, jsp, session-timeout

jQuery 加载函数很好，但是你如何处理会话超时？我用它来将新内容添加到 div 中，但如果我的会话超时，登录屏幕会出现在该 div 中，而不是完整页面中。

有没有办法处理这个？

我在 JSP 页面中使用它。

我是否应该将其全部替换为 jsp:include pages 并在每次需要调整页面时刷新页面，或者是否有办法使用 jQuery 加载功能来执行此操作并正确处理会话超时？

我曾尝试在调用之前验证会话，但由于没有对服务器的任何调用，因此会话似乎仍然有效，直到加载请求发现它已过期。所以当前页面中session不为null，但是当执行加载检索其他页面时，会取而代之的是登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:37:10.903

我想您的登录页面是重定向。然后您可以使用`complete`回调（第三个参数，请参阅[doc](http://api.jquery.com/load/)）来检查响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T02:49:24.827

我遇到了同样的问题，并解决了。所以我将分享我自己的答案。

起初我想检查响应代码是否为 301，[但您无法在`complete`回调中捕获 301 重定向。](https://stackoverflow.com/a/5344276/6653855)它只是抛出 200，这是重定向的结果。

所以我改为阅读`xhr.responseText`并检查它是否以`"<html>"`. 因为如果是，则意味着响应包含重定向的登录页面而不是模态内容。

```
 $(".modal-wrapper").load("/modal" + e, function(response, status, xhr){
      if (xhr.responseText.trim().startsWith("<html>")) {
          console.log("redirect to login page");
          window.location.href = "/";
      }
  }); 
```

实际上，`window.location.href = "/";`我想做的不是 ，而是`document.write(xhr.responseText);`无法发出不必要的请求。但由于一些 UI 问题，我无法做到这一点；P

# java - 在 Swing 中制作 F1 快捷键

> ID：15266351
> 
> 赞同：4
> 
> 时间：2013-03-07T08:26:54.740
> 
> 标签：java, swing, keyboard-shortcuts

我有一个 Java Swing 应用程序，我可以在其中使用以下代码设置快捷键。例如`Ctrl`+ `K`。

```
keyHelp.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_K, Event.CTRL_MASK));
keyHelp.setMnemonic((int) 'K');//This is the Line I need Help in 
```

我只是不知道如何添加与`F1`快捷方式相同的使用键...有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:36:27.947

使用[此处](https://stackoverflow.com/a/5129757/230513)和[此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html#eg)[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)所示的，可以使这些设置更易于管理。还要考虑而不是假设。`getMenuShortcutKeyMask()``Event.CTRL_MASK`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T08:35:37.317

采用，

**按键事件.VK_F1**

我想它会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T07:49:13.173

如果你需要让你的快捷键只是“F1”而不用CTRL，它应该是这样的，

```
keyHelp.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0)); 
```

# python - python中的线程错误

> ID：15266356
> 
> 赞同：0
> 
> 时间：2013-03-07T08:27:14.693
> 
> 标签：python

可能我忽略了一些非常基本的东西。我有一个功能

```
def execution(command):
    os.system(command) 
```

还有另一个功能

```
def start_this_thread():
    server_thread = threading.Thread(target=execution, args=(exec_str))
    server_thread.start() 
```

我收到一个错误：

```
self.run()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 483, in run
    self.__target(*self.__args, **self.__kwargs)
TypeError: execution() takes exactly 1 argument (233 given) 
```

显然字符串长度（命令）的长度为 233??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:36:17.597

好的。。我想通了。。

代替

```
 server_thread = threading.Thread(target=execution, args=(exec_str)) 
```

它应该是

```
 server_thread = threading.Thread(target=execution, args=(exec_str,)) 
```

虽然很想知道为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:43:09.660

`args`被简单地解释为一系列参数。您传入的`(args_str)`是一个字符串（因为这对括号被简单地解释为分组，而不是元组构造函数）。因此，字符串作为一个序列扩展为 233 个单独的参数（字符串中的每个字符一个）。

改为使用`(args_str,)`（注意尾随逗号）来创建单元素元组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:39:10.637

Your problem is that args gets expanded, which afaik means that exec_string is going from 1 item into 233\. Try putting a comma after exec_string to make it a literal tuple instead of parentheses. I'm on mobile right now but will edit tomorrow sometime for formatting and clarity.

In python, (something)==something, but (something,) is a tuple of 1 item with something as the only element.

# css - 如何垂直对齐多行内容？

> ID：15266357
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:27:26.037
> 
> 标签：css, html, alignment, vertical-alignment

我有三个 div，它们在锚中包含多行内容。我尝试使用 display:table-cell 或 top:50% 和 margin-top:50% 但没有效果。我再次希望 .box_content 以 .box_item 为中心。

[这](http://jsfiddle.net/A453K/)是我的代码：

```
<div id="boxes_onze">
   <a href="#">
       <div class="box_item">
        <div class="box_content">Equity Funds</div>
       </div>
   </a>
   <a href="#">
      <div class="box_item">
        <div class="box_content">Fixed Income Funds</div>
      </div>
   </a>
   <a href="#">
      <div class="box_item">
        <div class="box_content">Mixed Funds</div>
      </div>
   </a>
</div> 
```

和 CSS：

```
#boxes_onze{width:100%; margin-top:50px;}
#boxes_onze a{text-decoration:none; color:#3c9ccc; font-size:24px; font-family:HelveticaNeueTh; line-height: 24px;}
#boxes_onze .box_item{width:33%; margin-right:1px; height:77px; display:table-cell; vertical-align:middle;   background:lightblue; url(imagini/arrow_fondsen.png); position:relative; background-repeat:no-repeat; background-position: 95% center;}
#boxes_onze .box_item .box_content{width:136px; margin-left:13px;}
div{float:left;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:39:35.403

我经常使用这种技术：

CSS：

```
.valign-content:before { content : ''; display : inline-block; width : 0; height : 100%; vertical-align : middle; }

.valign-content>* { vertical-align : middle; display : inline-block; } 
```

将类添加到元素中，所有第一级子级都将垂直对齐。

演示：http: [//jsfiddle.net/pavloschris/A453K/2/](http://jsfiddle.net/pavloschris/A453K/2/)

# netbeans - NetBeans 格式化设置文件

> ID：15266361
> 
> 赞同：2
> 
> 时间：2013-03-07T08:27:42.520
> 
> 标签：netbeans, formatting, editor, settings

NetBeans 在哪里存储代码格式设置？我想将它们导出到另一台计算机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T08:42:51.190

*   在 Mac 中

进入主菜单：

Netbeans，首选项

*   在 Windows 中

转到主 nemu：

窗口，选项

*   然后，在两者中的任何一个

您必须选择任何可用的选项卡（编辑器、字体和颜色，...），然后单击导出按钮

获得 zip 文件后，您可以将其导入到另一个 Netbeans 的安装中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-04T13:28:19.877

我知道这是一篇旧帖子，但由于它是您搜索“netbeans php 导出格式”时的最佳结果，并且它出现在已批准答案的评论中：

每个模块（因此每种语言）都必须支持导出。AFAIK Java 多年来一直得到支持（[https://netbeans.org/bugzilla/show_bug.cgi?id=143494](https://netbeans.org/bugzilla/show_bug.cgi?id=143494)），但其他语言仍然缺少它（如 Netbeans 8.2）。

我今天提交了一个 PHP 补丁，希望能被添加：[https ://netbeans.org/bugzilla/show_bug.cgi?id=269978](https://netbeans.org/bugzilla/show_bug.cgi?id=269978)

如果导出对话框中缺少您的语言，则您的语言模块尚不支持它。因此，前往 Netbeans 并请求它作为功能或提交补丁。

干杯巴斯蒂安

# windows-phone-7 - 隐藏代码隐藏文件中的模板元素

> ID：15266362
> 
> 赞同：0
> 
> 时间：2013-03-07T08:27:44.880
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我有一个由列表和按钮组成的 LongListHeaderTemplate。您将在下面的代码中看到它们是如何分布的。我的问题是我有时需要在代码隐藏文件中隐藏按钮。我怎么能这样？！XAML：

```
 <toolkit:LongListSelector Grid.Row="1" ListHeader="{Binding EpsLaterItems}" IsFlatList="True" ItemsSource="{Binding EpsItems}" x:Name="EPS" SelectionChanged="EPS_SelectionChanged_1">
                    <toolkit:LongListSelector.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding ImageUrl, Converter={StaticResource BmpConverter}}" Width="100" Height="100" VerticalAlignment="Top" Margin="0,10,18,0"/>
                                <StackPanel Margin="0,0,0,20" Width="300">
                                    <TextBlock Text="{Binding Date, ConverterCulture=ru-RU, StringFormat=f}" 
                                       FontSize="22" FontWeight="Bold" Foreground="#FFD65B2D" />
                                    <TextBlock Text="{Binding Title}" TextWrapping="Wrap" FontSize="22" Foreground="Aqua" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:LongListSelector.ItemTemplate>
                    <toolkit:LongListSelector.ListHeaderTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <ListBox x:Name="listbox1" ItemsSource="{Binding}" ScrollViewer.VerticalScrollBarVisibility="Disabled" >
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="{Binding ImageUrl, Converter={StaticResource BmpConverter}}" Width="100" Height="100" VerticalAlignment="Top" Margin="0,10,18,0"/>
                                                <StackPanel Margin="0,0,0,20" Width="300">
                                                    <TextBlock Text="{Binding Date, ConverterCulture=ru-RU, StringFormat=f}" 
                                       FontSize="22" FontWeight="Bold" Foreground="#FFD65B2D" />
                                                    <TextBlock Text="{Binding Title}" TextWrapping="Wrap" FontSize="22" Foreground="Aqua" />
                                                </StackPanel>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Button x:Name="footerEpsLater" Content="more..." 
                    FontSize="30" Foreground="SteelBlue" Style="{StaticResource StyleForButton}" BorderBrush="#FFFF2121"/>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:LongListSelector.ListHeaderTemplate>
                    <toolkit:LongListSelector.ListFooterTemplate>
                        <DataTemplate>
                            <Button Content="more..." FontSize="30" Foreground="SteelBlue" Click="footerEPS_Click_1" Style="{StaticResource StyleForButton}"/>
                        </DataTemplate>
                    </toolkit:LongListSelector.ListFooterTemplate>
                </toolkit:LongListSelector> 
```

如果我这样做，`footerEpsLater.Visibility = Visibility.Collapsed;`我会收到错误：footerEpsLater 在此上下文中不存在

# request - 如何在 Struts 1.3 中 action 的 execute 方法之前和之后做一些事情？

> ID：15266363
> 
> 赞同：2
> 
> 时间：2013-03-07T08:27:45.073
> 
> 标签：request, struts, struts-1

我想做一些记录，在动作类的执行方法之前和之后。我正在使用 struts 1.3 。这更像是方面编程。

我通过覆盖它尝试了 RequestProcessor 的 processPreprocess() ，但这仅在 execute() 之前调用。另外，我想在两个地方（之前和之后）访问 ActionMapping。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:43:26.080

我想你应该尝试过滤来满足你的要求。创建一个过滤器做映射`web.xml`和覆盖`doFilter`方法，如下面的代码。

```
 public void doFilter(ServletRequest request, ServletResponse response,

       FilterChain chain) throws IOException, ServletException {

        beforeMethod(request,response);

        chain.doFilter(request, response);

        afterMethod(request,response);

    } 
```

如果过滤器不适用或不符合您的要求，请尝试以下逻辑。

*   创建一个 Action 类，比如说`MyAction`，通过扩展`org.apache.struts.action.Action`.
*   `Action classes`通过扩展在您的 Web 应用程序中创建所有其他`MyAction`.

在`MyAction`中，创建一个方法`operate()`，如

```
public abstract ActionForward operate(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException; 
```

*   `before()`在 MyAction 中，向应用程序添加一个或多个通用方法，例如`after()`.

*   如果所有 Action 类都必须实现此方法，则将其设为`abstract`.

*   如果某些 Action 类将提供特定于案例的实现，请将方法声明为 protected 并为其提供默认实现。

在 MyAction 中覆盖执行方法，如下面的代码

```
public ActionForward execute (ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException
 {

           before();

           ActionForward forward = operate(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response)

           after();

           return forward ;

} 
```

# objective-c - 为什么在强引用消失后我的弱引用没有被清除？

> ID：15266367
> 
> 赞同：28
> 
> 时间：2013-03-07T08:28:01.293
> 
> 标签：objective-c, weak-references, reference-counting, strong-references

我有点固执，但我想很好地理解弱引用和强引用，所以我再次问你。

**考虑一下：**

```
__weak NSString* mySecondPointer = myText;   
NSLog(@"myText: %@", myText); 
```

结果`myText: (null)`很明显——弱引用在赋值后被设置为空，因为没有对指向对象的强引用。

**但在这种情况下：**

```
__strong NSString* strongPtr = [[NSString alloc] initWithFormat:@"mYTeSTteXt %d"]; 
// weak pointer points to the same object as strongPtr
__weak NSString* weakPtr = strongPtr;
if(strongPtr == weakPtr) 
     NSLog(@"They are pointing to the same obj");        
NSLog(@"StrongPtr: %@", strongPtr);
NSLog(@"weakPtr: %@", weakPtr);

NSLog(@"Setting myText to different obj or nil");

// after line below, there is no strong referecene to the created object:
strongPtr = [[NSString alloc] initWithString:@"abc"];  // or myText=nil;

if(strongPtr == weakPtr) 
     NSLog(@"Are the same");
else
     NSLog(@"Are NOT the same");
NSLog(@"StrongPtr: %@", strongPtr);
// Why weak pointer does not point to nul
NSLog(@"weakPtr: %@", weakPtr); 
```

**输出：**

```
2013-03-07 09:20:24.141 XMLTest[20048:207] They are pointing to the same obj
2013-03-07 09:20:24.142 XMLTest[20048:207] StrongPtr: mYTeSTteXt 3
2013-03-07 09:20:24.142 XMLTest[20048:207] weakPtr: mYTeSTteXt 3
2013-03-07 09:20:24.143 XMLTest[20048:207] Setting myText to different obj or nil
2013-03-07 09:20:24.143 XMLTest[20048:207] Are NOT the same
2013-03-07 09:20:24.144 XMLTest[20048:207] StrongPtr: abc
2013-03-07 09:20:24.144 XMLTest[20048:207] weakPtr: mYTeSTteXt 3   // <== ?? 
```

**我的问题：**

为什么在`strongPtr = [[NSString alloc] initWithString:@"abc"];`弱指针值没有更改为 nil 之后（为什么在开始时创建的对象仍然存在于内存中，尽管它没有任何强引用？ - 或者它可能有？）

* * *

我试过那个：（但我想添加评论并不好）。我在@autorealesepool 中包含了创建strongPtr 的代码。我不确定它是否是正确的解决方案，但它可以工作......

```
 __strong NSString* strongPtr;
    __weak NSString* weakPtr;
    @autoreleasepool {

        strongPtr = [[NSString alloc] initWithFormat:@"mYTeSTteXt %d", 3];

        // weak pointer point to object create above (there is still strong ref to this obj)
        weakPtr = strongPtr;
        if(strongPtr == weakPtr) NSLog(@"They are pointing to the same obj");        

        NSLog(@"StrongPtr: %@", strongPtr);
        NSLog(@"weakPtr: %@", weakPtr);

        NSLog(@"Setting myText to different obj or nil");   

    // after line below, there is no strong referecene to the created object:
     strongPtr = [[NSString alloc] initWithString:@"abc"];  

    }

    if(strongPtr == weakPtr) 
        NSLog(@"Are the same");
    else
        NSLog(@"Are NOT the same");
    NSLog(@"StrongPtr: %@", strongPtr);
    // Why weak pointer does not point to nul
    NSLog(@"weakPtr: %@", weakPtr); 
```

**输出：**

```
2013-03-07 09:58:14.601 XMLTest[20237:207] They are pointing to the same obj
2013-03-07 09:58:14.605 XMLTest[20237:207] StrongPtr: mYTeSTteXt 3
2013-03-07 09:58:14.605 XMLTest[20237:207] weakPtr: mYTeSTteXt 3
2013-03-07 09:58:14.606 XMLTest[20237:207] Setting myText to different obj or nil
2013-03-07 09:58:14.607 XMLTest[20237:207] Are NOT the same
2013-03-07 09:58:14.607 XMLTest[20237:207] StrongPtr: abc
2013-03-07 09:58:14.608 XMLTest[20237:207] weakPtr: (null) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T09:21:11.293

从汇编代码可以看出，访问会`weakPtr`产生`objc_loadWeak`调用。

根据[Clang 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#arc-runtime-objc-loadweak)，`objc_loadWeak`保留和自动释放对象，相当于

```
id objc_loadWeak(id *object) {
  return objc_autorelease(objc_loadWeakRetained(object));
} 
```

这（希望）解释了为什么两者

```
if(strongPtr == weakPtr) ... 
```

和

```
NSLog(@"weakPtr: %@", weakPtr); 
```

创建其他自动发布的引用。

这不是一个特殊的`NSString`问题，我可以使用自定义（普通）类重现相同的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T08:46:43.650

首先，不要在 上试验弱引用或其他内存管理行为`NSString`，那个类有太多的魔力。并不是说弱引用不起作用`NSString`，只是行为比您预期的要复杂一些，并且很容易导致错误的结论。请参阅这些先前的问题：

*   [弱属性不能按预期工作](https://stackoverflow.com/questions/14116993/objective-c-weak-attritube-dont-work-as-expected)
*   [为什么弱 NSString 属性没有在 iOS 中发布？](https://stackoverflow.com/questions/11107729/why-do-weak-nsstring-properties-not-get-released-in-ios)
*   [NSString 保留计数](https://stackoverflow.com/questions/1390334/nsstring-retain-count)

当您使用自动释放池包装代码示例并随后记录弱字符串指针时，`nil`确实如此。甚至可能会出现与类以外的类似行为的情况`NSString`——您根本无法保证弱引用会在您丢失对对象的最后一个强引用的那一刻被清除。或者也许你是，但是很难说最后一个强引用到底什么时候消失了，因为自动释放池正在发挥作用，正如这个例子所暗示的那样（马丁的回答很好地解释了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:46:04.923

当你这样做时

> strongPtr = [[NSString alloc] initWithString:@"abc"]

你 strongPtr 指向新分配的对象，并且由于它指向的前一个对象也没有被释放，弱指针仍然指向一个有效的地址。

顺便提一句。你可以打印一个对象的内存地址

> NSLog(@"%@", [NSString stringWithFormat:@"%p", theObject])

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-01T20:25:28.067

不确定 OP 的问题和/或此处接受的答案是否仍然有效，至少与我在 iOS9/Xcode7 中看到的结果不同。

这是OP代码的（稍微清理过的）版本......

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        NSString* __strong strongPtr = [[NSString alloc] initWithFormat:@"Life, Universe, Everything: %d", 42];
        NSString* __weak   weakPtr   = strongPtr;

        NSLog(strongPtr == weakPtr ? @"Same" : @"Different");
        NSLog(@"  StrongPtr: %@", strongPtr);
        NSLog(@"  weakPtr:   %@", weakPtr);

        NSLog(@"Changing strongPtr to something else...");
        // After this is set, there is no strong reference to the created object
        strongPtr = [[NSString alloc] initWithFormat:@"Drink: %@", @"Pan-galactic Gargle Blaster!"];

        NSLog(strongPtr == weakPtr ? @"Same" : @"Different");
        NSLog(@"  StrongPtr: %@", strongPtr);
        NSLog(@"  weakPtr:   %@", weakPtr);
    }

    return 0;
} 
```

这是（截断的）输出......

```
Same
  StrongPtr: Life, Universe, Everything: 42
  weakPtr:   Life, Universe, Everything: 42

Changing strongPtr to something else...

Different
  StrongPtr: Drink: Pan-galactic Gargle Blaster!
  weakPtr:   (null)

Program ended with exit code: 0 
```

在这里访问条件中的弱引用（根据接受的答案的解释）不会保留自动释放的引用，正如您在输出中的 (null) 所看到的那样。

...或者我是否不小心将 OP 的问题更改为我隐藏了他所看到的内容？或者可能是因为现在 ARC 默认开启？

# memory-management - 列出垃圾收集

> ID：15266370
> 
> 赞同：1
> 
> 时间：2013-03-07T08:28:20.510
> 
> 标签：memory-management, garbage-collection, erlang

如果我执行以下操作：

```
List2 = [V || V <- List1, ...] 
```

似乎 List2 指的是 List1 和 erlang:garbage_collect() 不清除内存。如何创建没有引用的新列表并丢弃旧列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:40:00.333

在任何带有垃圾收集的语言中，您只需要“丢失”对一条数据的所有引用，然后它就可以被垃圾收集。简单地从生成原始列表的函数返回，而不是将其存储在任何其他“持久”位置（例如进程字典），应该允许回收内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:02:52.753

虚拟机应该管理垃圾收集。如果您使用 gen_server，或者如果您使用“自制” server_loop(State)，则应该始终使用相同的模式：

```
server_loop(State) ->
   A = somefunc(State),
   B = receive
          mesg1 -> func1(...);
          ...
       after Timeout ->
          func2(...)
       end,
   NewState = func3(...),
   server_loop(NewState). 
```

只要一个进程还活着，执行这个循环，VM就会分配和管理内存区域来存储所有需要的信息（变量，消息队列......+一些余量）据我所知，有一些空闲内存分配给进程，并且如果 VM 在释放内存后没有尝试很快恢复内存，但是如果您强制进行垃圾收集，使用 erlang:garbage_collect(Pid) 您可以验证内存是否空闲 - 请参见下面的示例。

```
startloop() -> spawn(?MODULE,loop,[{lists:seq(1,1000),infinity}]).

loop(endloop) -> ok;
loop({S,T}) ->
    NewState = receive
        biglist -> {lists:seq(1,5000000),T};
        {timeout,V} -> {S,V};
        sizelist -> io:format("Size of the list = ~p~n",[length(S)]),
                            {S,T};
        endloop -> endloop
    after T ->
        L = length(S) div 2,
        {lists:seq(1,L),T}
    end,
    loop(NewState).
    %% Here, NewState is a copy of State or a totally new data, depending on the
    %% received message. In general, for performance consideration it can be 
    %% interesting to take care of the function used to avoid big copies, 
    %% and allow the compiler optimize the beam code 
    %% [H|Q] rather than Q ++ [H] to add a term to a list for example 
```

和VM中的结果：

```
2> P = lattice:startloop().
<0.57.0>
...
6> application:start(sasl).  
....
ok
7> application:start(os_mon).
...
ok
...
11> P ! biglist.
biglist
... 
```

**% get_memory_data() -> {Total,Allocated,Worst}。**

```
14> memsup:get_memory_data().
{8109199360,5346488320,{<0.57.0>,80244336}}
...
23> P ! {timeout,1000}.             
{timeout,1000}
24> memsup:get_memory_data().
{8109199360,5367361536,{<0.57.0>,80244336}} 
```

**最坏的情况是循环过程：{<0.57.0>,80244336}**

```
...
28> P ! sizelist.            
Size of the list = 0
sizelist
...
31> P ! {timeout,infinity}.
{timeout,infinity}
32> P ! biglist.                    
biglist
33> P ! sizelist.          
Size of the list = 5000000
sizelist
...
36> P ! {timeout,1000}.      
{timeout,1000}
37> memsup:get_memory_data().
{8109199360,5314289664,{<0.57.0>,10770968}} 
```

**%% 注意上一行中的垃圾收集：{<0.57.0>,10770968}**

```
38> P ! sizelist.            
sizelist
Size of the list = 156250
39> memsup:get_memory_data().
{8109199360,5314289664,{<0.57.0>,10770968}}
...
46> P ! sizelist.            
Size of the list = 0
sizelist
47> memsup:get_memory_data().
{8109199360,5281882112,{<0.57.0>,10770968}}
...
50> erlang:garbage_collect(P).
true
51> memsup:get_memory_data(). 
{8109199360,5298778112,{<0.51.0>,688728}} 
```

**%% 在 GC 之后，进程 <0.57.0> 不再是最坏的情况**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:24:38.477

如果您像这样创建新列表，新列表将包含第一个列表中的元素，一些元素将在两个列表之间共享。如果你把第一个列表扔掉，共享元素仍然可以从新列表中访问，并且不会被视为垃圾。

你如何检查第一个列表是否被垃圾收集？您是否在 erlang 控制台中对此进行了测试？控制台存储每个表达式的评估结果，这可能是您看不到垃圾收集列表的原因。

# c++ - 带有 NFS 的 inotify/工具

> ID：15266373
> 
> 赞同：0
> 
> 时间：2013-03-07T08:28:48.710
> 
> 标签：c++, linux, nfs, inotify

我已经安装了 inotify 来监视文件更改。我们还有 NFS 服务器，我们在其中提交我们的作业以及服务器在我的工作目录中创建文件的响应。我发现 inotify 不会创建任何事件并且会长时间挂起。所以我的问题。

1）可以将NFS服务器创建的监视文件导入本地机器（目录）。

2）如果没有，是否可以使用任何可以捕获NFS延迟的c ++库（unix）。

我确信这是很常见的事情，但我想不出任何解决方案。我的应用程序也不是服务器客户端应用程序。这是提交作业的简单作业提交应用程序，我们在当前目录中获得了一些输出文件。(c++中的代码

[使用 NFS 通知](https://stackoverflow.com/questions/4231243/inotify-with-nfs)

我从进行文件监视的工具中获得了很多信息。但是，如果有人使用具有 NFS 延迟的工具，我想付出努力。以前我试过（libev，inotify）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:59:05.280

Inotify 工具永远不会对 NFS 提供可预测的行为。我们通常可以在同一个文件和文件夹中使用，但 NFS 你可能不会得到想要的行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:56:01.970

我发现了一个 SGI [FAM](http://oss.sgi.com/projects/fam/)使用主管守护程序来监视文件修改。它支持NFS

# asp.net-mvc - 用于确认的 MVC 额外控制密码

> ID：15266375
> 
> 赞同：0
> 
> 时间：2013-03-07T08:28:52.267
> 
> 标签：asp.net-mvc, asp.net-mvc-4

对于某些操作，我希望用户重新输入他的密码。我通过额外的登录进行检查，这是否正确，并且第二次登录有任何不良副作用吗？

```
[Authorize(Roles="Administrator")]
public ActionResult SpecialAction()
{
   ...
}

[HttpPost]
public ActionResult SpecialAction(string pwd)
{
    if(!string.IsNullOrEmpty(pwd) && WebSecurity.Login(User.Identity.Name, pwd))
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:55:37.670

> 我通过额外的登录进行检查，这是否正确，并且第二次登录有任何不良副作用吗？

如果您让用户访问非常敏感的区域或信息，这是**完全合法和正确的方式。**

例如，如果您允许用户在电子商务网站上查看他的通行证交易，那么您可以再次要求输入密码。其次，您似乎向网站管理员询问密码，所以在您的情况下，您让他可以访问您网站的非常敏感区域，所以这是正确的。

# asp.net-mvc - asp.net mvc 表单值显示

> ID：15266379
> 
> 赞同：1
> 
> 时间：2013-03-07T08:28:59.857
> 
> 标签：asp.net-mvc, razor

我是 asp.net mvc 的新手。基本上我来自php程序员。`echo $_POST;`在我的 php 文件中，我可以使用or`print_r($_POST);`或显示来自 html 页面或表单的所有值`var_dump($_POST)`。但是在 asp.net 中，我如何实现这一点来检查从 UI 页面到控制器的所有值是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:31:31.713

你可以看看`Request.Form`楼盘：

```
public ActionResult SomeAction()
{
    var values = Request.Form;
    ...
} 
```

您可以设置断点并分析值。或者简单地使用浏览器中的 javascript 开发工具栏（例如 FireBug 或 Chrome 开发者工具栏）来查看发送到服务器的确切内容。

但通常你不应该直接访问原始值。在 ASP.NET MVC 中有一个模型绑定器，它可以根据发送到服务器的值实例化一些模型。

例如，您可能有以下模型：

```
public class MyViewModel
{
    public int Age { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后让您的控制器操作将此模型作为参数：

```
public ActionResult SomeAction(MyViewModel model)
{
    ... you could use the model properties here
} 
```

现在您可以调用此控制器操作，或者使用 GET 请求传递查询字符串 ( `/someaction?age=10&firstname=foo&lastname=bar`) 中的参数，或者使用 POST 并将它们发送到正文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:35:47.437

您可以通过查看原始数据`Request.Form`。

但这不是 ASP.NET MVC 的精神。最好将模型放入控制器中。您已经通过称为模型绑定器的特殊模块完成了所有类型安全映射。

因此，除非您处理某些特殊情况，否则您只需将模型添加到控制器操作：

```
public ActionResult SomeAction(SomeModel model)
{
    //Handle SomeModel data further ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:38:18.473

您可以创建一个操作，该操作将接受来自 UI 页面的参数，如下所示：

```
[HttpPost]
public ActionResult SomeAction(string param1, int param2)
{
    //Now you can access the values here
} 
```

或做出将接受模型的动作

```
public ActionResult SomeAction(SomeModel model)
{
     //Access the model here
} 
```

# node.js - 将 Express 与 Node.js 一起使用时出错

> ID：15266380
> 
> 赞同：0
> 
> 时间：2013-03-07T08:29:06.963
> 
> 标签：node.js, express

我用 npm express 写了一个小程序。当我运行程序时，我收到如下错误。（我是 node.js 的新手）

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'express'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\node\node_modules\app.js:1:77)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:35:52.677

在您的应用程序中，您显然`require`是`express`模块，可能是这样的：

```
var express = require('express'); 
```

要使这条线正常工作，您需要将 Express 安装到应用程序的本地上下文中。为此运行

```
$ npm install express 
```

在您的应用程序的文件夹中。这将（如果尚不存在）创建一个文件夹`node_modules`，用于存放所有依赖项。

此外，我建议您将 Express 放入您`package.json`的`dependencies`块内，例如：

```
"dependencies": {
  "express": "3.1.0"
} 
```

当然，您可以将版本号调整为您使用的任何版本。为所有依赖项完成此操作后，您只需运行即可立即安装它们

```
$ npm install 
```

那应该解决它。

PS：对于这种情况，您是否全局安装 Express 都没有关系。全局安装仅适用于在`express`系统范围内使用引导程序。该`require`函数始终只在本地应用程序上下文中搜索。

# ios - 无法在 SDK 3.2 中保存 Facebook accessToken

> ID：15266391
> 
> 赞同：1
> 
> 时间：2013-03-07T08:29:56.077
> 
> 标签：ios, objective-c, facebook, facebook-access-token

我一直在使用旧的 Facebook SDK 并将 and`accessToken`保存`expirationDate`在`NSUserDefaults`. 但是现在在 new`Facebook SDK 3.2`中有一个新类`FBAccessTokenData`，我可以使用以下方法从那里获取 accessToken：

```
[FBSession activeSession].accessTokenData.accessToken
[FBSession activeSession].accessTokenData.expirationDate 
```

我的问题是当我重新启动我的应用程序并再次单击 Facebook 按钮时，尽管我在 3 分钟前使用了该应用程序，但它会转到 Facebook 请求新令牌，登录 Facebook 并获得新令牌。所以令牌没有被保存。

我正在尝试将新的保存`accessToken`到`[FBSession activeSession]`但`accessToken`并且`expirationDate`是**只读**属性。

我已经阅读了几次 Facebook SDK 文档，搜索了 stackOverflow 和网络，但仍然不知道如何做到这一点。

这是我的代码：

```
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError *)error
{
    switch (state)
    {
        case FBSessionStateOpen:
        {
            // This is how i'm trying to save the token, like the old Facebook SDK.
            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            [defaults setObject:[FBSession activeSession].accessTokenData.accessToken forKey:@"FBAccessTokenKey"];
            [defaults setObject:[FBSession activeSession].accessTokenData.expirationDate forKey:@"FBExpirationDateKey"];
            [defaults synchronize];

            NSLog(@"FB: Session is open!");
        }
            break;

        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
        {
            NSLog(@"FB: Session is closed or login failed");

            [self closeSession];
        }
            break;

        default:
            break;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:FBSessionStateChangedNotification
                                                        object:session];

    if (error)
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                            message:error.localizedDescription
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
        [alertView show];
    }
}

- (void)openSession
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:
     ^(FBSession *session, FBSessionState state, NSError *error)
    {
         [self sessionStateChanged:session state:state error:error];
    }];
}

- (void)closeSession
{
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:39:02.940

所以我在搜索更多后找到了答案，如果有人对新的有问题`Facebook SDK 3.2` `accessToken`，请查看此[**链接**](http://developers.facebook.com/docs/howtos/token-caching-ios-sdk/)。你会找到你正在寻找的东西。

基本上，您创建一个处理令牌保存和加载的类。比你将它保存到本地 plist 文件中 - 非常简单。

享受！:)

# java - ADF 中只有一个类的自定义 ResourceBundle

> ID：15266393
> 
> 赞同：0
> 
> 时间：2013-03-07T08:30:17.783
> 
> 标签：java, locale, oracle-adf, jdeveloper, resourcebundle

由于我的项目的要求，我实现了一个自定义的 java ResouceBundle 类来从 web.xml 中配置的目录中获取资源数据。我的意图是项目中只有**一个 ResourceBundle 类**，以后添加的任何资源和语言都可以在**不重新部署整个项目的情况下**完成。例如：MainBundle.java

```
public MainBundle() {
    super();
    this.locale = ADFContext.getCurrent().getLocale();
    readBundle();
}

public MainBundle(Locale locale) {
    super();
    this.locale = locale;
    readBundle();
}

private void readBundle() {
    bundleFileName = baseBundleName + "_" + locale.toString();
    // do some file reading here
} 
```

我已经实现了 ResourceBundle 类以根据当前语言环境加载正确的语言。但是，如果我只有一个 ResourceBundle 类，**当用户登录时，所有其他并发用户的语言环境都会更改为该用户的语言环境**，从而改变他们的语言。例如：一个英语用户正在使用我的网站。一个法国用户登录，这个英文用户突然被迫使用法语网站。

为了解决这个问题，我必须为每个语言环境创建一个类，该类扩展 MainBundle 类，例如 MainBundle_en_US、MainBundle_fr 等。这些类仅在其构造函数中包含 super() 调用，仅此而已。然而，这违背了在添加新语言时**不必修改项目的目的。**

我的问题是：

我怎样才能解决这个问题并且只有一个资源包类？

有没有办法实现我想要的，当添加新语言时不必修改项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:18:41.363

不要从 ResouceBundle 类扩展你的类并实现你自己的本地化/国际化框架，那么你将完全控制你的设计方法。

# javascript - 当我在标记中包含 jquery.js 时，页面中的其他 javascript 函数不会触发

> ID：15266398
> 
> 赞同：1
> 
> 时间：2013-03-07T08:30:33.070
> 
> 标签：javascript, jquery, asp.net, html

我有一个大型的 asp.net 2.0 应用程序。在当前页面中，我有一个

`<head id="head1" runat="server">`带有一些元信息，并且原始开发人员已在`<body>`标签中编写了所有 Javascript 函数。现在我想实施

```
$(document).ready(function load()
    // My code 
}); 
```

当我在我的 head/body 标签中包含 jquery-1.8.3.js 时，其他 javascript 函数无法正常工作。我能做些什么来解决这个问题？

```
 <head id="Head1" runat="server">`
 <script language="javascript" type="text/javascript" src="JScript/jquery-1.8.3.js"/>`
 <meta http-equiv="Expires" content="0" />
 <meta http-equiv="Cache-Control" content="no-cache" />
 <meta http-equiv="Pragma" content="no-cache" />
 <title>HMS</title>
 <link href="Css/MyStyleSheet.css" rel="stylesheet" type="text/css" />
 </head> 
```

**身体**

```
<body>
<script language="javascript" type="text/javascript" src="JScript/MediReckonerJscript.js">
</script>
//some javascript functions here that are not firing since i added jquery reference in the head section. if that is removed this function works well. 
```

**我在正文中使用 jQuery 库的脚本。**

```
<script type="text/javascript" language="javascript"> 
//This is my script in the <body> tag.
jQuery.noConflict();
$(document).ready(function load() {
  var iFrame = $('#PageFrame');

iFrame.bind('load', function() { //binds the event
    alert('iFrame Reloaded');
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:49:15.240

也许这可能是版本问题，请检查同一库的一些较低版本，也可以使用 jQuery.noConflict(); 对于 jQuery 是冲突的或 $.noConflict(); 如果 $ 是冲突的。

像这样使用 noConflict()

```
 <script type="text/javascript" language="javascript"> 
//This is my script in the <body> tag.
var j = jQuery.noConflict();
j(document).ready(function load() {
  var iFrame = j('#PageFrame');

iFrame.bind('load', function() { //binds the event
    alert('iFrame Reloaded');
});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:35:34.020

如果您的页面中有其他库，请添加此内容。

```
jQuery.noConflict(); 
```

像原型这样的库使用与 jQuery 相同的“$”，因此它们会发生冲突。

# javascript - 将 window.bluetooth 对象添加到 Chrome

> ID：15266400
> 
> 赞同：4
> 
> 时间：2013-03-07T08:30:35.650
> 
> 标签：javascript, google-chrome-extension, bluetooth, npapi

我想演示一个网页，该网页用于与支持 Web 的设备（Mac/Windows/Linux 笔记本电脑）接近的物理对象进行交互。为此，我想`window.bluetooth`在 Javascript 中创建自己的对象，该对象将通过串行端口配置文件为主机设备的蓝牙控制器提供接口。现在它只是一个演示，但我可能想开发一个通用 API 来抽象 Javascript 中的蓝牙驱动程序。

在这一点上，我并不特别关心可移植性或通用解决方案。我只是想看看它是否可以在我的笔记本电脑上使用我正在使用[BlueSMiRF Silver](https://www.sparkfun.com/products/10269)调制解调器构建的设备。我知道 Google Chrome 扩展能够[将 Javascript](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)注入用户访问的每个页面，并且[NPAPI](http://developer.chrome.com/extensions/npapi.html)能够将本机操作系统代码编译成可以与 Javascript 通信的形式。看起来有人在稍微更具体的应用程序之前做过一些[模糊相似的事情。](https://code.google.com/p/browntooth/source/browse/branches/communicator-extension-patch/extension/npapi/SConstruct?spec=svn9&r=9)

我的问题是，带有 NPAPI 的 Chrome 扩展是最好的方法吗？替代方案可能是 Flash 或 Java 小程序，但这些都是 1996 年的解决方案。以下是我用来评估解决方案的指标：

*   可行性。可能吗？
*   易于开发。需要多少行代码？
*   杠杆作用。有没有其他东西已经做了类似的事情？

对于那些认为浏览器监控较低级别的网络状态是荒谬的人来说，Wi-Fi[已经完成了。](http://html5demos.com/offline)

# javascript - 浏览器后退按钮的 IE9 中 url 中的哈希更改

> ID：15266408
> 
> 赞同：0
> 
> 时间：2013-03-07T08:31:23.703
> 
> 标签：javascript, facebook, internet-explorer-9

我正在开发一个 facebook 画布应用程序，并希望使后退、前进和刷新浏览器按钮与我的 ajax 调用一起使用。有几个 jquery 插件支持此操作，例如 jquery.address 或 history.js。

对于 IE9 - 仍然是 HTML4 - 我不能使用历史 pushState 或 replaceState，因此需要依赖哈希标签。如果我完全拥有一个网站，这很有效，但如果我们遇到像 Facebook 这样的情况，其中 iFrame 与父级 (facebook.com) 位于不同的域中，我会迷路 - 由于相同的来源策略。

我可以使用散列更改设置 parent.location.href，但是当散列更改时，我无法在 iFrame 内接收事件。

在 iFrame 中设置散列在 IE9 中不起作用 - 单击浏览器后退按钮会忽略我在 iFrame 中所做的散列更改。

任何人都看到我做错了什么，或者在 IE9 中无法使用带有 Ajax 调用的 iFrame 内部的浏览器按钮？或者有没有办法从 iFrame 父级接收 hashchange 事件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:35:42.813

我建议捕获退格按钮，大多数人使用它返回并为 IE 用户制作只有特殊的后退按钮，类似于 ie9 的那些，所以他们的直觉是使用这些。

```
<!--[if lte IE 9]>
   html code for IE users, explaining why they are ignorant... giving them a back button, catching the backspace key and using that....
<![endif]--> 
```

# c++ - 替换 C++ 中的函数

> ID：15266410
> 
> 赞同：-2
> 
> 时间：2013-03-07T08:31:28.233
> 
> 标签：c++, replace

我有一个字符串 AB C。我需要在 C++ 中用下划线（_）替换空格。有没有像我们在 perl 或 java 中那样的函数？

输入：

```
 char* string =  "A B C" 
```

输出

```
 A_B_C 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T08:33:51.513

有`std::replace`

```
#include <algorithm>
...
std::replace (s.begin(), s.end(), ' ', '_'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T08:33:56.493

有`std::replace`功能

```
std::replace( s.begin(), s.end(), 'x', 'y'); // replace all 'x' to 'y' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T08:34:39.917

是的，`std::replace()`定义在`<algorithm>`：

```
#include <algorithm>
#include <string>

int main() {
  std::string input("A B C");
  std::replace(input.begin(), input.end(), ' ', '_');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T08:38:19.923

没有等效的`replace`成员函数。

您必须先[`search`](http://www.cplusplus.com/reference/string/string/find/)获取空间，然后再使用[`std::string::replace`](http://www.cplusplus.com/reference/string/string/replace/)

```
char *string = "A B C";
std::string s(string);
size_t pos = s.find(' ');
if (pos != std::string::npos)
    s.replace(pos, 1, "_"); 
```

只需 a `char*`，将其放在 a 中`std::string`，然后在此处应用其中一个答案。

如果您想完全避免`std::string`和`std::string`方法，请使用[`std::replace`](http://www.cplusplus.com/reference/algorithm/replace/)已经建议的其他答案

```
std::replace(string, string + strlen(string), ' ', '_'); 
```

或者如果您已经知道字符串长度

```
std::replace(string, string + len, ' ', '_'); 
```

但请记住，您不能修改常量字符串文字。

如果你想手动做，[c](/questions/tagged/c "显示标记为“c”的问题")风格

```
static inline void manual_c_string_replace(char *s, char from, char to)
{
    for (; *s != 0; ++s)
        if (*s == from)
            *s = to;
} 
```

# amazon-web-services - 在 nant 构建文件中包含 AWSSDK 引用

> ID：15266415
> 
> 赞同：0
> 
> 时间：2013-03-07T08:32:07.587
> 
> 标签：amazon-web-services, build-automation, nant, nantcontrib

我正在制作一个构建文件来构建一个使用 NANT 用 C#.net 编写的网站，但我无法将 AWSSDK 程序集包含到该文件中。它给了我错误

`error CS0234: The type or namespace name 'S3' does not exist in the namespace 'Amazon'`

AWSSDK 位于 c:/windows/assembly 文件夹中

这就是我尝试过的

`<references> <include name="/WINDOWS/assembly/AWSSDK.dll" /> </references>`

笔记 ：-

`<Reference Include="AWSSDK, Version=1.3.19.0, Culture=neutral, PublicKeyToken=cd2d24cd2bace800, processorArchitecture=MSIL"> <SpecificVersion>False</SpecificVersion> <HintPath>/WINDOWS/assembly/</HintPath> </Reference>`

不起作用，我猜`Reference Include=`这不是 NANT 的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:54:18.300

确保您正在导入正确的命名空间。
`<imports>
<import namespace="Amazon.S3" />
</imports>`

# javascript - 用户单击浏览器的后退按钮时如何重新加载当前页面

> ID：15266418
> 
> 赞同：0
> 
> 时间：2013-03-07T08:32:17.020
> 
> 标签：javascript, asp.net, internet-explorer

当用户单击返回按钮时，我可以重新加载当前页面吗？我会给你一个我的问题的背景，以了解我为什么要这样做。我有一个 asp.net web 应用程序 3.5 框架，可将生成的 pdf 文件显示到 ajax modalpop。完成这项任务并不容易，因为我遇到了一些跨浏览器问题，并设法处理了所有这些问题，只给我留下了一个问题。我设法在 ajax modalpopup 中的 iframe 上显示 pdf 文件，并且此设置与 Chrome、Firefox、Safari 和 Opera 兼容，但在 IE 上不兼容。我设法使用 response.binarywrite 在 IE9 64bit 上找到了一个解决方案，并且 pdf 文件将显示在 Adob​​e Acrobat Reader（v11 和 v10）的新实例上，但在 IE9 32bit 上，这不是它呈现 pdf 的方式，它呈现在当前页面本身我不 不想那样做，当用户单击浏览器的后退按钮时，它将重定向到最后访问的页面，而不是我单击按钮以显示 pdf 的页面上。我知道，通过查看浏览器，它仍然在触发加载 pdf 的当前页面上。现在可以通过单击后退按钮重新加载当前页面，并将其重新加载到 pdf 文件不可见的页面上。请参阅下面的代码以了解我到目前为止所做的事情。现在可以通过单击后退按钮重新加载当前页面，并将其重新加载到 pdf 文件不可见的页面上。请参阅下面的代码以了解我到目前为止所做的事情。现在可以通过单击后退按钮重新加载当前页面，并将其重新加载到 pdf 文件不可见的页面上。请参阅下面的代码以了解我到目前为止所做的事情。

```
<script type="text/javascript">
  window.onunload = function {
     alert(document.URL);
     window.location = document.URL;
     window.history.go(-1);
  }
</script> 
```

当我尝试返回浏览器但下面的代码没有执行时，警告框提示，可能它已执行但对页面没有影响。请我真的需要帮助提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T15:47:42.290

```
function SetCookie (name, value) {
var argv=SetCookie.arguments;
 var argc=SetCookie.arguments.length;
 var expires=(argc > 2) ? argv[2] : null;
 var path=(argc > 3) ? argv[3] : null;
 var domain=(argc > 4) ? argv[4] : null;
 var secure=(argc > 5) ? argv[5] : false;
 document.cookie=name+"="+escape(value)+
  ((expires==null) ? "" : ("; expires="+expires.toGMTString()))+
((path==null) ? "" : ("; path="+path))+
((domain==null) ? "" : ("; domain="+domain))+
((secure==true) ? "; secure" : ""); 
```

}

```
 function getCookie(c_name)
 {
var c_value = document.cookie;
var c_start = c_value.indexOf(" " + c_name + "=");
if (c_start == -1)
{
    c_start = c_value.indexOf(c_name + "=");
}
if (c_start == -1)
{
    c_value = null;
}
else
{
    c_start = c_value.indexOf("=", c_start) + 1;
    var c_end = c_value.indexOf(";", c_start);
    if (c_end == -1)
    {
        c_end = c_value.length;
    }
    c_value = unescape(c_value.substring(c_start,c_end));
}
return c_value;
 }   

 if (getCookie('first_load'))        
 {
if (getCookie('first_load')==true)
{
    window.location.reload(true); // force refresh page-liste
    SetCookie("first_load",false);
}
 }
  SetCookie("first_load",true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:04:43.370

我不完全理解您要实现的目标，但可能的解决方案是最初将用户发送到一个 html 页面，该页面的唯一目的是将用户重新路由到所需的页面。当他们点击后退按钮时，它会将他们带到这个重新路由的 html 页面，基本上将他们置于一个循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T15:39:26.537

我正在使用这种技术..

```
angular.element(document).ready(function() {
  var State = History.getState();
  //........ now use State variable 
});
```

希望这会帮助你。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T15:05:28.747

这里：

```
<script>    
history.pushState(null, null, document.URL);
   window.addEventListener('popstate', function () {
   history.pushState(null, null, document.URL);
   location.reload();
});
</script> 
```

# list - Sencha Touch 2：List 和 ListItem 数据字段

> ID：15266419
> 
> 赞同：0
> 
> 时间：2013-03-07T08:32:26.510
> 
> 标签：list, sencha-touch-2, listitem

我想知道如何通过组合不同的 JSON 数据字段来自定义 ListItem 内容。

我有三个 JSON 字段：{caption}、{subCaption}、{source}。

到目前为止，我已经能够使用 dataMap 并使用自定义类来包装额外的文本和样式。但是，我能够添加内容的唯一方法是使用应用/更新函数按顺序添加内容。结果，我的 ListItems 在他们自己的行中只是 {caption}、{subCaption}、{source}。

这是我希望每个 ListItem 的样子：

1.  结合 {caption} 和 {subCaption} 文本并创建一个短篇故事并将其作为面板添加到 ListItem
2.  在步骤 1 中创建的面板右下方停靠的小面板中渲染 {source}。

我该怎么做以上？提炼出来的问题是：如何访问和组合来自不同 JSON 字段的数据并呈现到 ListItem 中？

我当前的 ListItem 代码复制如下以供参考。

一如既往，非常感谢任何帮助！谢谢！

穆罕默德

加利福尼亚州圣何塞

```
 Ext.define('qxtapp.view.ResultsListItem', {
    extend: 'Ext.dataview.component.ListItem',
    requires: [
        'qxtapp.view.ResultsListItemCaption'
        ],
    xtype : 'resultslistitem',
    alias : 'widget.resultslistitem',

    config: {
        caption: true,
        subCaption: true,
        source: true,
        dataMap: {
            getCaption: {
                setHtml: 'caption'
            },
            getSubCaption: {
                setHtml: 'subCaption'
            },
            getSource: {
                setHtml: 'source'
            }
        },
        layout: {
            type: 'vbox'
        }
    },
    applyCaption: function(config) {
        return Ext.factory(config, qxtapp.view.ResultsListItemCaption, this.getCaption());
    },
    updateCaption: function(newCaption) {
        if (newCaption) {
            this.add(newCaption);
        }
    },
    applySubCaption: function(config) {
        return Ext.factory(config, Ext.Component, this.getSubCaption());
    },
    updateSubCaption: function(newSubCaption) {
        if (newSubCaption) {
            this.add(newSubCaption);
        }
    },
    applySource: function(config) {
        return Ext.factory(config, Ext.Component, this.getSource());
    },
    updateSource: function(newSource) {
        if (newSource) {
            this.add(newSource);
        }
    }
});

Ext.define('qxtapp.view.ResultsListItemCaption', {
    extend: 'Ext.Component',
    applyHtml: function(caption) {
        // do some customization to caption and return it
        return caption;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:28:27.327

我不确定你为什么需要经历所有这些麻烦，为什么不在简单列表中使用项目模板？

```
Ext.define('qxtapp.view.ResultsList', {
  extend: 'Ext.dataview.List',
  alias: 'widget.resultslist',
  config: {
    ...
    itemTpl: new Ext.XTemplate(
      "<div class='result-item'>",
        "<p class='result-story'>",
          "{[this.getStoryHtml(values.caption, values.subCaption)]}",
        "</p>",
        "<img src='{source}' alt='{caption}' />",
      "</div>",
      {
        // This is a new function on the template created above and can be called 
        // from within the template html
        getStoryHtml: function(caption, subCaption) {
          // customize the text to your needs, then return the html to insert
        }
      }
    ),
    ...
  }
}); 
```

当然，您随后需要使用 CSS 设置这些项目的样式，但这应该是容易的部分。;)

# c# - 在使用引用数组调用方法之前定义数组大小

> ID：15266420
> 
> 赞同：0
> 
> 时间：2013-03-07T08:32:27.400
> 
> 标签：c#, arrays, pass-by-reference

我需要从一个看起来像这样的 COM 接口使用一个方法：

```
void method(ref string[] output); 
```

由于在方法调用之前我不知道数组的大小，我该如何设置我的引用变量：

```
string[] output = new string[???]; 
```

有没有一种聪明的方法可以做到这一点，还是我需要通过提供一个“足够大”的数组并在之后“缩小”它来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:02:18.863

通常，当方法签名没有请求大小时，这意味着您的数组将由方法代码初始化，您应该将“ref”视为“out”。

但是，情况可能并非如此。如果是这样，我相信，您建议的解决方案是您唯一的选择（如果您不知道预期的数组大小）。

# php - 使用 php 中的变量更新 int 列

> ID：15266422
> 
> 赞同：2
> 
> 时间：2013-03-07T08:32:33.610
> 
> 标签：php, sql, prepared-statement

我正在使用以下查询

```
$abilityPts = xxx;
$statement = $conn->prepare('UPDATE players SET ability = (ability + $abilityPts) WHERE id = :myPlayerId'); 
```

但是它给了mer错误..

```
$abilityPts column not found 
```

我该如何解决这个问题？

```
{"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column '$abilityPts' in 'field list'"} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T08:34:21.357

1.  您正在使用准备好的语句。**所以使用准备好的语句**。使用`:abilityPts`和绑定`$abilityPts`方式与您绑定的方式相同`:myPlayerId`。

    ```
    $conn->prepare('UPDATE players SET ability = (ability + :abilityPts) WHERE id = :myPlayerId'); 
    ```

    通过连接创建 SQL 查询并将 PHP 变量嵌入字符串是一种非常糟糕的做法，它会使您的代码容易受到 SQL 注入的影响，这是一项严重的业务。准备好的语句更清晰、更安全，并且被社区普遍接受为最佳实践。如果您已经在使用准备好的语句，那么您做得很好，请继续使用它们。

2.  *您应该执行我在 1\. 中描述的操作*，但还要注意PHP 中的`'`和之间的区别。`"`

    `'` **[（单引号）：](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)**

    > 与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

    这基本上意味着以下内容：

    ```
    $a = 15;
    echo 'My favorite is $a.'; //My favorite is $a.
    echo "My favorite is $a."; //My favorite is 5. 
    ```

    有关详细信息，请阅读[有关字符串的 PHP 手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T08:35:02.337

将变量放在单引号中不会对变量进行评估。使用双引号或字符串连接。

为了避免对我相当笼统的答案的进一步惩罚：通常，您不应该直接在对数据库的查询中使用变量，尤其是在使用准备好的语句时。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-07T08:36:15.383

```
$statement = $conn->prepare(sprintf('UPDATE players SET ability = (ability + %d) WHERE id = :myPlayerId', $abilityPts)); 
```

试试这个

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-07T08:36:17.370

尝试执行以下操作：

```
$statement = $conn->prepare("UPDATE players SET ability = (ability + " . $abilityPts . ") WHERE id = :myPlayerId"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-07T08:36:40.083

请尝试以下代码：

```
$abilityPts = xxx;
$statement = $conn->prepare("UPDATE players SET ability = (ability + ".$abilityPts.") WHERE id = :myPlayerId"); 
```

# html - 将滚动添加到内部 div

> ID：15266431
> 
> 赞同：0
> 
> 时间：2013-03-07T08:33:23.710
> 
> 标签：html, web

我有：

```
<div id = "first" style="overflow-y:auto;">
<td colspan="2" style="background: #EFF4F8;"><div
id="second" style='height: 100px; word-wrap: break-word; overflow-y: auto; width: 100%; min-width: 580px; line-height: 200%;'>
<pre style="white-space: pre-wrap;">${some_text}</pre>
</div></td>
</div> 
```

如果“some_text”宽度大于我的屏幕，所以我在所有屏幕上都滚动，我只希望滚动 div ="second" 或我的 pre 标签。问题是我无法更改 div="first"，我必须按原样使用它。你能帮助我吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:38:49.200

Your markup seems wrong, but this should be your solution. Let me know how it turns out and I will update the answer to your needs. And use CSS:

**CSS**

```
#first {
    overflow-y:auto;
}

#second {
    height: 100px;
    word-wrap: break-word;
    overflow-y: scroll;
    width: 100%; /* This might still mess up the overflows of parent- and child-tags in different browsers */
    min-width: 580px; /* This does not work well in all browsers */
    line-height: 200%;
}

#second pre {
    white-space: pre-wrap;
} 
```

**HTML**

```
<div id="first">
    <table>
        <tbody>
            <tr>
                <td colspan="2" style="background: #EFF4F8;">
                    <div id="second">
                        <pre>${some_text}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:03:04.893

您想要滚动宽度，即水平滚动条。您应该添加溢出-x

# r - ggplot2：在单个图中具有不同且不规则日期间隔的两个时间序列

> ID：15266432
> 
> 赞同：-2
> 
> 时间：2013-03-07T08:33:29.910
> 
> 标签：r, ggplot2

使用 ggplot2 包，我想获得一个包含两个时间序列的图，这些时间序列在不同日期有数据点。

例如，一个数据框如下所示：

```
date1, value1  
2010-01-05, 2921.74  
2010-01-08, 2703.89  
2010-01-14, 3594.21  
2010-01-20, 3659.22 
```

另一个数据框看起来像

```
date2, value2  
2010-01-01, 285.85  
2010-01-02, 229.20  
2010-01-05, 333.91  
2010-01-06, 338.27  
2010-01-07, 272.85  
2010-01-08, 249.04  
2010-01-09, 240.07  
2010-01-10, 255.06  
2010-01-11, 275.42  
2010-01-12, 252.39 
```

我想将这两个时间序列绘制在同一个图中，日期在 X 轴上，值在 Y 轴上。{base} 情节相当容易，但我想用 ggplot 来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:35:27.323

您可以简单地使用带有不同参数的两个`geom_point`'s ：`data`

```
ggplot(aes(x = date, y = value)) + geom_point(data = df1) + geom_point(data = df2) 
```

这假设您的数据集被称为`df1`and `df2`，并且它们具有相同的列名。

更简单的方法是将两个数据集组合起来，并添加一个标识列：

```
df1$id = "one"
df2$id = "two"
df = rbind(df1, df2)
ggplot(df, aes(x = date, y = value, color = id)) + geom_point() 
```

最后一个解决方案更符合`ggplot2`. 请注意，这种方法对`geom_line`.

一个例子：

```
ggplot(diamonds, aes(x = carat, y = depth, color = cut)) + geom_point() 
```

![在此处输入图像描述](../Images/a934acaaca3fa1784f3971dcadaad340.png)

# tsql - ssas mdx 和 t-sql 给出不同的值

> ID：15266433
> 
> 赞同：2
> 
> 时间：2013-03-07T08:33:30.390
> 
> 标签：tsql, ssas, mdx, olap

我的情况：

有一个工作数据库。每天它都会被复制到另一个名为 RetailDB 的数据库中。SSAS 的事实表和维度表基于 RetailDB 中表的 VIEW 对象。

所以，我有问题：

MDX 查询：

```
SELECT {[Date].[Y-M-D].[Day].[01.01.2013]} ON 0,
   { [Measures].[Quantity]} ON 1
FROM [Company] 
```

给我NULL值

同时t-sql查询：

```
SELECT SUM([Quantity])
FROM [RetailDB].[dbo].[fact_Income]
WHERE Day = '2013-01-01' 
```

给我 7937338,023

在其他日期，MDX 查询可以返回正确的值。

在其他日期，MDX-query 可以返回非 NULL 值，但它不等于 t-sql 值。

请帮助纠正这个问题。我应该在我的多维数据集中检查什么来解决这个问题？

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:44:30.527

如果您使用正确的日期维度，则表明您需要处理多维数据集以与数据库同步。

尝试恢复所有数量/日期，以查看数据是否似乎已处理到某个点

```
SELECT {[Measures].[Quantity]} ON 0,
   { [Date].[Y-M-D].[Day]} ON 1
FROM [Company] 
```

# sql - Ant SQL事务目标，在x条语句后提交？

> ID：15266434
> 
> 赞同：0
> 
> 时间：2013-03-07T08:33:33.213
> 
> 标签：sql, ant, commit, autocommit

Ant SQL Transaction 目标似乎可以选择在完成后提交，或者在每个语句后自动提交。目标似乎没有接受在读取 x 语句后将提交的属性。如果我在读取了 1000 条语句后手动生成“提交”语句，Ant 目标的行为是否正确，或者当 Ant 目标到达终点时会发生什么？即使部分已经提交，它是否会再次尝试重新提交整个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:19:00.003

在验证这一点之后，显然一次可以使用 Ant 目标在 INSERT 语句之间放置 COMMIT 语句，并创建一个新的工作单元。因此，Ant 最终只会提交新的工作单元，而不是提交所有语句。

# wcf - 通过 WCF 返回实体框架对象

> ID：15266435
> 
> 赞同：3
> 
> 时间：2013-03-07T08:33:35.817
> 
> 标签：wcf, linq, object

我们有一个关于实体框架对象和通过 WCF 发送它们的问题。我们有一个数据库，Entity Framework 从该数据库创建类，在这种特殊情况下是一个“钱包”类。

我们尝试使用以下代码转移钱包：

```
public Wallet getWallet()
{
    Wallet w = new Wallet();
    w.name = "myname";
    w.walletID = 123;
    return w;
} 
```

我们需要转移那个 Wallet 类，但它不起作用，我们总是遇到同样的异常：

“接收对 localhost:8860/ComplementaryCoins.svc 的 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能由于服务关闭）。有关更多详细信息，请参阅服务器日志。”

我们在互联网上搜索，有可能是由于需要对Entity Framework-objects进行序列化。

我们完全不知道是否会出现这种情况，如果是这种情况，如何解决。我们的 DataContract 看起来像这样（非常简单）：

```
[DataContract]
public partial class Wallet
{
    [DataMember]
    public int getwalletID { get { return walletID; } }
    [DataMember]
    public string getname { get { return name; } }
} 
```

有没有人遇到过这个问题？

编辑：我们的实体框架创建的类如下所示：

```
namespace ComplementaryCoins
{
    using System;
    using System.Collections.Generic;

    public partial class Wallet
    {
        public Wallet()
        {
            this.Transaction = new HashSet<Transaction>();
            this.Transaction1 = new HashSet<Transaction>();
            this.User_Wallet = new HashSet<User_Wallet>();
            this.Wallet_Item = new HashSet<Wallet_Item>();
        }

        public int walletID { get; set; }
        public string name { get; set; }

        public virtual ICollection<Transaction> Transaction { get; set; }
        public virtual ICollection<Transaction> Transaction1 { get; set; }
        public virtual ICollection<User_Wallet> User_Wallet { get; set; }
        public virtual ICollection<Wallet_Item> Wallet_Item { get; set; }
    }
} 
```

感谢您帮助我们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-02T09:07:58.697

前段时间我遇到了同样的问题，解决方案是：

实体框架返回的是序列化类而不是普通类。例如。Wallet_asfawfklnaewfklawlfkawlfjlwfejlkef 代替 Wallet

要解决这个问题，您可以添加以下代码：

```
base.Configuration.ProxyCreationEnabled = false; 
```

在您的上下文文件中。由于上下文文件是自动生成的，您可以将其添加到 Context.tt 中，在 Context.tt 文件中，可以在第 55-65 行附近添加它：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext
{
public <#=code.Escape(container)#>()
    : base("name=<#=container.Name#>")
{
base.Configuration.ProxyCreationEnabled = false;
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
    this.Configuration.LazyLoadingEnabled = false;
<# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:54:34.013

尝试为属性指定一个设置器，如下所示：

```
[DataContract]
public partial class Wallet
{
    [DataMember]
    public int getwalletID { get { return walletID; } set { } }
    [DataMember]
    public string getname { get { return name; } set { } }
} 
```

如果它仍然不起作用，您可以考虑为此创建一个中间 POCO 类，并使用[AutoMapper](http://automapper.org/)或[ValueInjecter](http://valueinjecter.codeplex.com/)等映射器库从 EF 对象传输数据。

POCO 类应具有与您的 EF 类相同的属性：

```
[DataContract]
public class WalletDTO
{
    [DataMember]
    public int walletID { get; set; }
    [DataMember]
    public string name { get; set; }
} 
```

并修改您的方法以返回此类：

```
public WalletDTO getWallet()
{
    Wallet w = new Wallet(); // or get it from db using EF

    var dto = new WalletDTO();        
    //assuming we are using ValueInjecter, this code below will transfer all matched properties from w to dto
    dto.InjectFrom(w); 
    return dto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:43:41.773

你想收到一个`IEnumerable<Wallets>`吗？如果 - 是，请修改您的服务器类，它返回`IEnumerable`通过添加`.ToArray()`方法

# jsf-2 - Prime faces 手风琴的选项卡更改事件在前两次没有触发

> ID：15266440
> 
> 赞同：0
> 
> 时间：2013-03-07T08:34:02.923
> 
> 标签：jsf-2, primefaces

Prime Faces 手风琴的选项卡更改事件在前两次没有触发。我使用的是 primeFaces3.4 和 jsf2。任何机构都可以解决这个问题。

# ruby - 无法安装 bson_ext 1.8.2 gem

> ID：15266444
> 
> 赞同：5
> 
> 时间：2013-03-07T08:34:14.883
> 
> 标签：ruby, gem, bson, bson-ext

我无法在我的 mongo 项目目录中安装 bson_ext 1.8.2 gem。具体来说，我尝试跑步`bundle install`和`gem install bson_ext -v '1.8.2'`

我尝试了论坛上的其他解决方案，但徒劳无功。

```
Installing bson_ext (1.8.2) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /home/jayanth/.rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb 
checking for asprintf()... yes
checking for ruby/st.h... yes
checking for ruby/regex.h... yes
checking for ruby/encoding.h... yes
creating Makefile

make
compiling bson_buffer.c
compiling encoding_helpers.c
compiling cbson.c
cbson.c: In function ‘write_utf8’:
cbson.c:118:36: warning: pointer targets in passing argument 1 of ‘check_string’ differ in signedness [-Wpointer-sign]
In file included from cbson.c:66:0:
encoding_helpers.h:26:10: note: expected ‘const unsigned char *’ but argument is of type ‘char *’
cbson.c: In function ‘write_element’:
cbson.c:301:20: warning: unused variable ‘values’ [-Wunused-variable]
cbson.c: In function ‘objectid_generate’:
cbson.c:936:9: warning: implicit declaration of function ‘htonl’ [-Wimplicit-function-declaration]
cbson.c:944:5: warning: implicit declaration of function ‘htons’ [-Wimplicit-function-declaration]
cbson.c: In function ‘write_element’:
cbson.c:316:17: warning: ignoring return value of ‘asprintf’, declared with attribute warn_unused_result [-Wunused-result]
linking shared-object bson_ext/cbson.so

make install
/usr/bin/install -c -m 0755 cbson.so /home/jayanth/.rvm/gems/ruby-2.0.0-p0@mongo-tools/gems/bson_ext-1.8.2/ext/bson_ext/bson_ext
/usr/bin/install: cannot create regular file `/home/jayanth/.rvm/gems/ruby-2.0.0-p0@mongo-tools/gems/bson_ext-1.8.2/ext/bson_ext/bson_ext': No such file or directory
make: *** [install-so] Error 1

Gem files will remain installed in /home/jayanth/.rvm/gems/ruby-2.0.0-p0@mongo-tools/gems/bson_ext-1.8.2 for inspection.
Results logged to /home/jayanth/.rvm/gems/ruby-2.0.0-p0@mongo-tools/gems/bson_ext-1.8.2/ext/cbson/gem_make.out

An error occurred while installing bson_ext (1.8.2), and Bundler cannot continue.
Make sure that `gem install bson_ext -v '1.8.2'` succeeds before bundling. 
```

gem install bson_ext -v '1.8.2 失败并出现同样的错误。

这里的解决方案（[https://jira.mongodb.org/browse/RUBY-551?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.mongodb.org/browse/RUBY-551?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)）说它是固定的......但我仍然面临相同的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-09T10:57:46.670

尝试更新 ruby​​gems，然后安装 bson_ext。

```
gem update --system
gem install bson_ext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T14:50:57.387

我使用红宝石 2.0.0p0

当我安装 bson-1.9.2.gem 时出现此错误：

```
ERROR:  Error installing bson_ext:
    ERROR: Failed to build gem native extension.

/home/albert/.rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb 
```

以下对我有用：

```
gem update --system
gem install bson_ext 
```

# c++ - 从文件读取文本到无符号字符数组，尝试使用示例时出错

> ID：15266448
> 
> 赞同：0
> 
> 时间：2013-03-07T08:34:27.340
> 
> 标签：c++, arrays, file, unsigned-char

我正在尝试使用以下示例：

[https://stackoverflow.com/a/6832677/1816083](https://stackoverflow.com/a/6832677/1816083) 但我有：

```
invalid conversion from `unsigned char*' to `char*'
initializing argument 1 of `std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::read(_CharT*, std::streamsize) [with _CharT = char, _Traits = std::char_traits<char>]' 
invalid conversion from `void*' to `size_t' 
```

排队：

```
size_t bytes_read = myfile.read((unsigned char *) buffer, BUFFER_SIZE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:36:51.980

首先，`read()`需要 a`char*`而不是`unsigned char*`. 其次，它不返回读取的字符数。

相反，请尝试：

```
myfile.read((char*)buffer, BUFFER_SIZE);
std::streamsize bytes_read = myfile.gcount(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:42:55.143

恕我直言，编译器的输出已经足够了。它告诉您，您正在尝试赋予`unsigned char*`功能，等待`char*`。顺便说一句，甚至还有一个函数名

```
std::basic_istream<_CharT, _Traits>::read(_CharT*, std::streamsize)
[with _CharT = char ... 
```

如果您需要`unsigned chars buffer[ ... ]`，请将其转换为`char*`

```
unsigned char buffer[ BUFFER_SIZE ];
ifstream myfile("myfile.bin", ios::binary);
if (myfile)
{
    myfile.read((char*) buffer, BUFFER_SIZE);
    //          ^^^^^^^
    size_t bytes_read = myfile.gcount();
} 
```

# php - PHP curl不起作用，如果我将字符串作为url传递，而不是从db获取url而不是curl返回错误

> ID：15266460
> 
> 赞同：2
> 
> 时间：2013-03-07T08:35:14.883
> 
> 标签：php, codeigniter, curl

工作代码

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://###.#####.###/####/####/T0103/templateCustomWebPage.do?webId=1209221452326&editCurrentLanguage=1209221452328&customWebPageId=1292822288140001019");
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$data = curl_exec($ch);
curl_close($ch);
echo $data;[/code] 
```

但如果我使用数据库中的 url 而不是它不起作用。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $r->url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$data = curl_exec($ch);
curl_close($ch);
echo $data; 
```

将显示以下错误...

```
parameter is wrong ,please check your input url.
Your input URL:
http://###.#####.###/####/####/T0103/templateCustomWebPage.do?webId=1209221452326&editCurrentLanguage=1209221452328&customWebPageId=1292822288140001019 
```

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T08:45:20.190

您的 url 与 html 实体一起存储在数据库中。CURL 调用不接受这些。

试试这个：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, html_entity_decode($r->url));
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$data = curl_exec($ch);
curl_close($ch);
echo $data; 
```

我添加了**html_entity_decode** [http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

# string - Bash，在命令构造中转义引号，

> ID：15266462
> 
> 赞同：1
> 
> 时间：2013-03-07T08:35:22.997
> 
> 标签：string, bash

我有一个数字数组 - `sipPeers`。

我想遍历该数组并将每个值传递给命令

`asterisk -rx "sip show peer 1234"`- 其中 1234 显然是一个扩展名。

的输出通过`sip show peer`管道传输和操作两次以输出一个我想存储在第二个数组中的值`sipUserAgent`。

```
temp="asterisk -rx \"sip show peer "${sipPeers[q]}"\" | grep Useragent |  awk \'{print$3}\'" #(1)
echo $temp #(2)
sipUserAgent[q]=$($temp) #(3) 
```

一次迭代的输出将构造的命令生成为字符串 (2) 并尝试执行它 (3)：

```
asterisk -rx "sip show peer 564" | grep Useragent | awk '{print }'
No such command '"sip' (type 'core show help sip' for other possible commands) 
```

如果我复制并粘贴 echo'd 命令，它会运行，但是当脚本执行时，我会收到该错误。`"`当 scipt 执行字符时，字符在某处改变了含义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:43:14.250

在执行命令之前，不要尝试将命令存储在变量中。这样做会遇到各种各样的问题，并且您会遇到其中的几个问题（请参阅[BashFAQ #50：我正在尝试将命令放入变量中，但复杂的情况总是失败！](http://mywiki.wooledge.org/BashFAQ/050)）。只需将管道直接放在`$( ... )`它所属的位置即可：

```
sipUserAgent[q]=$(asterisk -rx "sip show peer ${sipPeers[q]}" | grep Useragent |  awk '{print $3}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:00:21.520

## 第一个问题

在步骤 (1) 中，您编写：`awk \'{print$3}\'`

在 (2) 的输出中，您会收到：`awk '{print }'`

问题是错过了逃脱`$3`

再次尝试`awk \'{print\$3}\'`在 (1)

## 第二个问题

`sipUserAgent[q]=$($temp)`尝试调用命令`asterisk_-rx...`

这肯定不是你想要的。解决方案是使用`eval`-`help eval`有关更多信息，请参阅。

### 例子

```
cmd="echo TEST"
$(${cmd}) 
```

给出：

> 测试：找不到命令

```
cmd="echo TEST"
eval ${cmd} 
```

给出：

> 测试

## 代码风格注意事项

如果可能，最好避免通过`eval`. 如果适用，最好编写更简单的代码。所以你应该使用（正如戈登戴维森在另一个答案中提到的那样）：

```
sipUserAgent[q]=$(asterisk -rx "sip show peer ${sipPeers[q]}" \
 | grep Useragent \
 |  awk '{print $3}' \
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:19:54.797

我不知道在命令替换期间转义引号的方法，但一种解决方法是使用`eval`. 请参见以下示例：

```
$ cat test.sh 
echo "$1"
$ temp="./test.sh \"2 34 434\" "
$ echo "$temp"
./test.sh "2 34 434"
$ result=$(eval $temp)
$ echo "$result"
2 34 434
$ result=$($temp)
$ echo "$result"
"2 
```

请注意，`eval`在大多数情况下，使用通常被认为是不好的做法，如果可以避免的话。

# c - MSVC 中的复合 C99 文字等价物

> ID：15266463
> 
> 赞同：1
> 
> 时间：2013-03-07T08:35:23.033
> 
> 标签：c

```
options->dict_size = UINT32_C(1) << (uint8_t []){
        18, 20, 21, 22, 22, 23, 23, 24, 25, 26 }[level]; 
```

[http://svn.r-project.org/R/trunk/src/extra/xz/lzma/lzma_encoder_presets.c](http://svn.r-project.org/R/trunk/src/extra/xz/lzma/lzma_encoder_presets.c)

```
#ifndef UINT32_C
#   if UINT_MAX != 4294967295U
#       error UINT32_C is not defined and unsigned int is not 32-bit.
#   endif
#   define UINT32_C(n) n ## U
#endif 
```

为windows编译这个。但是出现语法错误

```
error C2059: syntax error : '{'

error C2143: syntax error : missing ';' before '{'

error C2337: 'level' : attribute not found

typedef struct {
    uint32_t dict_size;
    // ...
} lzma_options_lzma; 
```

有没有人试过这个？

另外，我从未见过像这样的代码`uint8_t []{...}[level]`；

这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:26:09.617

```
const static uint8_t shift_lookup[] = {
    18, 20, 21, 22, 22, 23, 23, 24, 25, 26 };
options->dict_size = UINT32_C(1) << shift_lookup[level]; 
```

`shift_lookup`代码中尚未使用的名称在哪里。

`(uint8_t []){...}`是 C99 复合文字，它是数组类型的未命名对象。MSVC 没有实现 C99。要在 C89 中获得等价物，您必须为其命名。

`(uint8_t []){...}[level]`是数组的普通索引运算符，应用于文字。

对于这种特殊情况，数组恰好是字符类型，C89 实际上已经有一种可以工作的文字：字符串文字。

```
options->dict_size = UINT32_C(1) << "\x12\x14\x15\x16\x16\x17\x17\x18\x19\x1a"[level]; 
```

不过我不推荐它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T08:38:46.697

那是一个[C99 复合文字](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Compound-Literals.html)。

它定义了一个数组，然后在同一个表达式中对数组进行索引。如果`level`是 0，它将移动 18 位，如果它是 1，它将移动 20 位，依此类推。

如果您尝试使用 Visual Studio 构建它，那就是您的问题，因为 Visual Studio 不支持 C99。

修复它需要重构以删除内联数组，并将其改为常规数组。

# php - php系统命令linux

> ID：15266466
> 
> 赞同：0
> 
> 时间：2013-03-07T08:35:32.243
> 
> 标签：php, linux, login, command, system

我有一组需要先登录到 shell 的 linux 系统命令。我怎么能在 php 中做到这一点？

例如：

```
$output2 = shell_exec('ls -lrt /opt/test 2>&1'); 
```

由于 /opt/test 只能由用户/所有者 XXX 访问，我需要使用该用户名登录。runuser 命令可能会有所帮助，但我需要指示。

实际上，我需要通过系统命令运行应用程序，但在该用户必须登录才能访问该应用程序之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:52:06.930

一种方法是创建一个 shell 脚本，其中包含您需要以特权登录用户身份运行的所有命令，然后使用 sudo 运行该 shell 脚本。

您将需要更改您的 sudoers 文件，以便脚本的执行可以由运行脚本的用户运行。

例如：

```
 Cmnd_Alias HTTP_COMMANDS = /usr/local/my_ls_script
 XXXX ALL=(ALL) NOPASSWD: HTTP_COMMANDS 
```

这样做时要小心！确保 sudoers 行只能运行您指定的命令。

另外，请确保您至少切换到用户一次，并运行 sudo，否则，网络服务器将无法为该用户运行 sudo。

此外，您可能需要在 sudoers 文件中禁用 NO_TTY。

您将命令更改为：

```
$output2 = shell_exec('sudo -u XXXX /usr/local/my_ls_script 2>&1'); 
```

# java - 爪哇。编写模式以将命令行拆分为间隙

> ID：15266472
> 
> 赞同：1
> 
> 时间：2013-03-07T08:35:46.597
> 
> 标签：java, split, command-line-arguments, design-patterns

请帮助编写一个模式以仅在命令及其参数之间的空格上拆分命令行：

**我的代码：**

```
String commands = "gedit /home/ant/Documents/Txt Books/1.txt /home/ant/Documents/1.txt";

String[] arrCommands = Pattern.compile("\\\s[^\\\s\\\w]").split(commands);

for (int i = 0; i < arrCommands.length; i++) {
     System.out.println(arrCommands[i]);
} 
```

**程序给出以下结果：**

> gedit
> home/ant/Documents/Txt Books/1.txt
> home/ant/Documents/1.txt

**并且有必要这样做：**

> gedit
> /home/ant/Documents/Txt Books/1.txt
> /home/ant/Documents/1.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:42:56.733

您也可以尝试使用 split() 方法拆分字符串

例如 ：

请帮助编写一个模式以仅在命令及其参数之间的空格上拆分命令行：

```
String commands = "gedit /home/ant/Documents/Txt Books/1.txt /home/ant/Documents/1.
String[] commandsToArray=commands.split("\\s+");//this wil ignore multiples whitespaces 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:37:14.787

您需要使用此正则表达式来拆分

```
\\s+(?=[^\\w\\s]) 
```

* * *

在你的正则表达式`[^\\\s\\\w]`中会吃空格后的**第一个**字符..因此结果..

使用`lookahead`它只会检查模式但不会吃掉它......

# android - Android LogCat：TextLayoutCache::replaceThai 和错误打开跟踪文件

> ID：15266486
> 
> 赞同：5
> 
> 时间：2013-03-07T08:36:41.017
> 
> 标签：android, logging, logcat

有人可以解释一下这些 Log in LogCat。这真的很烦人，我在谷歌上找不到任何关于它的信息。
这不会发生在模拟设备上，但会发生在我的 Galaxy S3 上。
日志示例如下：

```
03-07 15:15:09.480: E/Trace(4912): error opening trace file: No such file or directory (2)
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 74
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 74
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[1] is 61
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 74
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[1] is 61
03-07 15:15:09.565: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[2] is 43
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 21
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 21
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[1] is 64
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[0] is 21
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[1] is 64
03-07 15:15:09.570: D/TextLayoutCache(4912): TextLayoutCache::replaceThai, prevBuffer[2] is 6c 
```

我在我的代码中找不到泰语的任何内容。它填满了 LogCat，所以我必须找到我的日志......

此外，我在“跟踪”文件中找不到任何内容。

如果有人可以解释这一点以及如何摆脱它，将不胜感激。

问候，韦伯

# oop - MATLAB OOP，我可以调用调用类方法吗？

> ID：15266490
> 
> 赞同：0
> 
> 时间：2013-03-07T08:36:59.240
> 
> 标签：oop, matlab

例如：我有两个这样的类：在 B 类评论中查找问题，向下。

```
classdef A < handle
    properties
        classBobj; % class B is a property of class A
    end

    methods
        MethodFromA (obj)
        end
    end
end

classdef B <handle
    methods
        MethodFromB (obj)
            % I is possible to call class A method MethodFromA here
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:43:12.467

有两种方法可以做到这一点：

1.  您尝试从类 A 调用静态方法，但是您必须将其定义为：

    ```
    classdef A < handle

        properties
            classBobj; % class B is a property of class A
        end

        methods (Static)
            MethodFromA()
        end

    end 
    ```

这可以在代码中的任何地方调用（不引用 A 的实例），如下所示`A.MethodFromA()`

2.  你有一个 A 类实例的引用，而不是调用`MethodFromB(obj)`，你应该全部`MethodFromB(obj, classAobj)`

# cakephp - cakephp 2.2 树行为 - 递归计算给定类别中的产品和所有子子项

> ID：15266494
> 
> 赞同：0
> 
> 时间：2013-03-07T08:37:10.680
> 
> 标签：cakephp

**CakePHP 2.2**

我使用树行为为我的类别构建了一个嵌套的垂直菜单。在这些类别中有产品。我想要实现的是类别名称旁边包含指定类别中的产品数量。这是一个例子：

```
Automobile (100) > SUV (35)
                 > Pickup (25)
                 > Berline (40) 
```

在类别旁边，我们可以看到其中的产品数量。

我在网上查了一下，找到了这个教程：[http](http://mrphp.com.au/blog/fun-tree-behaviour-cakephp) ://mrphp.com.au/blog/fun-tree-behaviour-cakephp 在“查找你的数据”最后一部分中有一行显示了如何实现这一点：

```
 // count the posts in the given category and all subchildren recursively
        $id = 123;
        $postCount = $this->Category->postCount($id); 
        debug($postCount); 
```

此代码中的问题是它使用 postCount() 但在我的情况下，我的类别没有帖子而是产品，换句话说，我使用 Product 模型和 ProductsController 所以它不能工作。我能做到吗？

[编辑]

我找到了解决方案。首先，我在类别表中创建了一个新字段并将其命名为 product_count（关联表的单数名称）。然后我在我的 ProductsController.php 中添加了一个 belongsTo。如下：

```
public $belongsTo = array(
        'Category' => array(
            'counterCache' => true
            )
        ); 
```

最后在我的垂直菜单的 foreach 中，我只是在类别名称旁边添加了这个：

```
$v['Category']['product_count'] 
```

现在它正在工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:51:20.163

将 postCount 函数替换为：

```
function productCount($id, $direct=false){
    if (!$direct) {
        $ids = array($id);
        $children = $this->children($id);
        foreach ($children as $child) {
            $ids[] = $child['Category']['id'];
        }
        $id = $ids;
    }
    $this->Product->recursive = -1;
    return $this->Product->findCount(array('category_id'=>$id));
} 
```

# java - 由于哈希图未填充或可能未填充，我的代码中出现空指针异常

> ID：15266500
> 
> 赞同：0
> 
> 时间：2013-03-07T08:37:44.420
> 
> 标签：java, interface, nullpointerexception

我得到了这个练习：实现以下加载和打印一组数据值的类。

```
import java.util.Iterator;
public class MyLoader {
    public void loadAndPrintValues(Iterator<String> keysToLoad, Data data, Printer printer) {

        // Load data values like this:
        // String value = data.loadValue(key);

        // Print loaded data value like this:
        // printer.printEntry(key, value);
    }
} 
```

然而，当我做练习时，我得到了一个`NullPointerException`，可能来自`while (keysToLoad.hasNext())`或来自`key = keysToLoad.next();`。我想我得到了例外，因为“数据”没有被填满，但我不知道该怎么做。这是我的代码和错误消息

```
public interface Data{
    //I made this method
     public void makeEntry(String key, String value);
    //given
     public String loadValue(String key);
}

public interface Printer {
     public void displayEntry(String key, String value);
}

import java.util.Iterator;
import java.util.HashMap;

public class MyLoader implements Data, Printer {
    Data data; // = new MyLoader();
    Printer printer; // = new MyLoader();
    Iterator<String> iter; // = new MyLoader();

      String key = "";
String value = "";

HashMap<String, String> ht = new HashMap<String, String>();

public MyLoader(){
//  this.database = null;
//  this.key = null;
//  this.value = null;
//  this.ht = null;
//  this.iter = null;
    System.out.println("now in the constructor");
}

public MyLoader(Iterator<String> iter, Data data, Printer printer){
    this.data = data;
    this.printer = printer;
    this.iter = iter;
}

public void loadAndPrintValues(Iterator<String> keysToLoad, Data data, Printer printer) {
    try {
        if (ht.isEmpty()){
            System.out.println("ht is empty");
            throw new NullPointerException("Database is empty."); 
        }else {
            this.data = data;
        }
           while (keysToLoad.hasNext()){               
           // Load data values like this:
           key = keysToLoad.next();
           value = data.loadValue(key);
           // Print loaded data value like this:
           printer.printEntry(key, value);
       }
    }catch (NullPointerException npe){
        System.out.println("caught null pointer ");
        System.out.println(npe.getMessage());
    }
}

@Override
public void makeEntry(String key, String value){
    ht.put(key, value);
}

@Override
public void printEntry(String key, String value) {  
        System.out.println("[" + key + " : " + value + "]");
}

@Override
public String loadValue(String key) {
    System.out.println("loadValue:" + key);
    if(this.ht.containsKey(key))            
        return this.ht.get(key);
    else {
        System.out.println("No key in database.");
        throw new NullPointerException("No key in data."); 
    }
}

}

public class test {
public static void main(String[] args) {
    try {
    MyLoader mdbl = new MyLoader();

    mdbl.makeEntry("0", "zero");
    mdbl.makeEntry("1", "One");
    mdbl.makeEntry("2", "Two");
    mdbl.makeEntry("3", "Three");

    mdbl.loadAndPrintValues(mdbl.iter, mdbl.data, mdbl.printer);

    }
    catch(NullPointerException e){
        System.out.println(e.getMessage());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:18:43.173

在这一行 mdbl.loadAndPrintValues(mdbl.iter, mdbl.data, mdbl.printer); 你没有初始化 mdbl.data 和 mdbl.printer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:47:12.150

`mdbl.iter`永远不会分配一个值，即是`null`（默认情况下，因为您使用的`MyLoader`构造函数没有`iter`未分配的参数）。因此，当您将它传递给尝试对其进行操作的方法时，您自然会得到一个`NullPointerException`（不是错误）。

你不应该

```
try{ /* ... */ } catch (NullPointerException npe){ /* ... */ } 
```

块，因为任何体面的 IDE 都将允许您一键到达引发异常的行，如果您捕获异常并简单地打印一条消息到`System.out`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:47:45.020

**您正在为方法loadAndPrintValues()**的 Iterator、Data 和 Printer 参数传递空值，这将导致**NullPointerException**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T09:24:17.807

永远不要捕获 NullPointerException。使用 NullPointerException 删除 catch 块，运行它，然后发布堆栈跟踪。

# c# - Error handling in C# for SAP GUI Logon (GuiSession)

> ID：15266504
> 
> 赞同：1
> 
> 时间：2013-03-07T08:37:54.153
> 
> 标签：c#, api, user-interface, error-handling, sap

I'm new to the SAP Gui API; but I manage to create a simple program (with C#) to automate data entry into SAP with reference from [how-do-i-automate-sap-gui-with-c-sharp](https://stackoverflow.com/questions/13130176/how-do-i-automate-sap-gui-with-c-sharp).

For the past few days I have tried to enhance the program by putting in error handling mechanism so that the program will able to show friendly message, if connection time or invalid logon info provided during logon. ***Catch all system/error messages from SAP*** *and display them in my program.*

However I have tried many ways to catch the error message via GuiSession.ErrorList and GuiSession.Error but it is not working - either return null or the program failed to compile.

Any help/advice on this will be appreciated. Thanks.

# forms - 带有树枝的 symfony2 中实体的表格视图

> ID：15266511
> 
> 赞同：3
> 
> 时间：2013-03-07T08:38:22.897
> 
> 标签：forms, symfony, twig

我一直在寻找各种类似的问题和答案，但没有一个适合这个或解决我的问题。我觉得我遗漏了一些明显的东西，因为这似乎非常简单和常见。无论如何：

我想构建一个表格视图，用户可以从中选择实体进行进一步处理。显然，我需要显示的不仅仅是一个名称，我还想添加大量数据。

“实体”表单类型似乎是自然的选择，所以我定义了一个表单类型，包括：

```
 $builder->add('items', 'entity', array(
        'multiple'=>true,
        'expanded'=>true,
        'class'=>'MySiteBundle:Item', 'property'=>'name', 'query_builder'=>function(EntityRepository $er) use ($catagory) {
            return $er->createQueryBuilder('s')->where('s.category = :cat')->andWhere('s.available=true')->orderBy('s.name')->setParameters(array('cat'=>$category));
    })); 
```

认为这会以某种方式让我访问树枝中的实体。但无论我尝试什么，通过 form.items.vars 或 .get("value") 或其他两打类似问题的建议，都没有任何效果。

我想要的只是一个包含项目数据（名称、价格等）的表格，我不敢相信这有这么难。我错过了什么简单、明显的事情？

我需要使用表单，因为用户需要输入其他数据并且我想使用验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:09:06.270

您无法`entity`从表单视图访问类型背后的实体。因此，您需要在单独的查询中获取项目。为方便起见，请使项目数组的键对应于它们的 ID。如果您将`items`数组发送到模板，您可以像这样输出它：

```
<table>
    {% for item in form.items %}
        {% set id = item.get('value') %}
        <tr>
            <td>{{ form_widget(item) }}</td>
            <td>{{ items[id].name }}</td>
            <td>{{ items[id].category.name }}</td>
            <td>{{ items[id].available ? 'Yes' : 'No' }}</td>
            {# and so on ... #}
        </tr>
    {% endfor %}
</table> 
```

# c - c、doug lea的malloc——不正确的free不会崩溃。为什么？

> ID：15266512
> 
> 赞同：1
> 
> 时间：2013-03-07T08:38:28.760
> 
> 标签：c, crash, dynamic-allocation

我在以下代码中使用 Doug Lea 的[malloc.c](http://gee.cs.oswego.edu/pub/misc/malloc.c)和[malloc.h ：](http://gee.cs.oswego.edu/pub/misc/malloc.h)

```
#include <stdio.h>
#include <string.h>
#include "dlmalloc.h"

#define USE_DL_PREFIX

int main() 
{
    char *test = dlcalloc(5, 1);

    strcpy(test, "helloextra");    
    dlfree(test);                  /* Shouldn't this crash? */

    printf("%s", test);

    return 0;
} 
```

并`test`正确打印！有人可以解释一下吗？我在想我没有正确调整这个 malloc。以前有人遇到过这个问题吗？

[遇到这个问题](https://stackoverflow.com/questions/14919548/c-realloc-succeeds-in-windows-7-but-fails-in-windows-xp-why)后，我开始使用 Doug Lea 的 malloc 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:39:51.150

您的代码[在](http://en.wikipedia.org/wiki/Undefined_behavior). `strcpy()`允许崩溃，但不是必须的。

基本上，一旦行为未定义，*任何事情都可能发生*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:40:43.657

我认为您期望释放内存也会使内容无效，但事实并非如此。效率太低了。（想想大量的内存）

所发生的一切是内存块（再次）被标记为“可供 malloc 使用”，因此它们的内容可能会在其他进程写入时随时更改，这意味着“所有赌注都关闭”，也称为“未定义”行为”。

如果您希望内存为空，请查看[memset](http://linux.die.net/man/3/memset)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:00:00.317

如果您希望它崩溃，请根据您链接到的[malloc.h中的此片段定义 FOOTERS：](http://gee.cs.oswego.edu/pub/misc/malloc.c)

> 定义FOOTERS时，除了范围检查外，我们还
> 验证了inuse chunk的footer字段，可以用来保证
> 控制malloc/free的mstate是完整的。

快速浏览一下，如果缓冲区溢出，那*应该*调用。`dlfree``abort()`

# .net - 了解主机文件的工作

> ID：15266513
> 
> 赞同：0
> 
> 时间：2013-03-07T08:38:31.867
> 
> 标签：.net, windows, host

嗨，我特别了解主机文件的工作原理

例如，在我的项目中，如果我在连接字符串中写下我的服务器的名称，例如

```
 faisal:1468;user=abc;password=cde 
```

在主机文件中我喜欢下面

```
 faisal 192.1.1.1 
```

该项目将自动映射到主机文件中的 ip

但是让我们说在我的连接字符串中我有以下

```
 faisal.mydomain.com:1468;user=abc;password=def 
```

我是否还需要针对上述服务器名称输入主机文件，或者它本身就是自给自足的。Windows实际上如何知道它必须根据项目中编写的名称（可以是java或.net）查看主机文件的另一件事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:43:57.023

IP 地址首先出现在 Hosts 文件中，因此您的示例应该是

```
192.1.1.1 faisal 
```

主机名必须完全匹配。因此，如果您有一个映射，`faisal`那将*只*匹配主机名`faisal`。它不会匹配`test.faisal`或`faisal.com`。

在您的示例中，您需要为`faisal.mydomain.com`您的主机文件添加一个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:43:36.533

> Windows实际上是如何知道它必须在主机文件中查找的

操作系统（不仅是 Windows）总是`hosts`首先检查，然后继续进行 DNS 查找。

结论：您也应该添加`faisal.mydomain.com`到主机文件中，除非您的 DNS 已注册...

推荐阅读：[域名系统（维基百科）](http://en.wikipedia.org/wiki/Domain_Name_System)

> 在我的主机文件中，这台机器没有条目，我们只使用 faisal.abcworld.com，它连接到也在 abcworld.com 域上的机器 faisal

这意味着：

1.  `faisal.abcworld.com`在主机文件中检查--未找到
2.  询问 DNS
3.  DNS 找到注册的 faisal.abcworld.com 域（实际上比这更复杂，这可能需要几个步骤才能最终找到。阅读 Wiki 上的文章。如果您想继续在网络环境中工作，这非常值得。 ..)
4.  它解析服务器
5.  服务器解析您的请求，并做出适当的响应

# java - Run J2me application with Nokia mobile c200

> ID：15266518
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:38:55.090
> 
> 标签：java, netbeans, java-me, derby

I created a j2me application for contact list and it is storing in the local database derby.In emulator it is working properly and the data is also storing in local db perfectly.But when i run in nokia mobile c200 it is not working.Please tell me how to wok j2me application with mobile.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:50:59.463

derby 数据库示例的链接

数据库/ConnecttoDerbydatabase.htm">http://www.java2s.com/Tutorial/Java/0340_Database/ConnecttoDerbydatabase.htm [http://www.ibm.com/developerworks/library/os-ad-trifecta1/index.html](http://www.ibm.com/developerworks/library/os-ad-trifecta1/index.html)

请清楚地发布你的问题。如果你在模拟器中运行你的代码，它也应该在设备中完美运行。检查你的德比罐，你可能会错过。

# html - HTML 行间距不正确

> ID：15266522
> 
> 赞同：1
> 
> 时间：2013-03-07T08:39:09.007
> 
> 标签：html

我有下面的 HTML 页面，其中包含 1 个主表中的 2 2 个表。

```
 <%-- 
    Document   : P2
    Created on : Mar 7, 2013, 1:19:55 PM
    Author     : u0138039
--%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form name="form1" method="post" action="">
          <table width="722">
            <tr>
              <td width="334">
              <table width="255" >
                <tr>
                  <td width="128"><p>PARTS Updated&#13;</p></td>
                  <td width="111"><label for="PARTS_Updated"></label>
                    <select name="PARTS_Updated" id="PARTS_Updated" >
                      <option value=""></option>
                      <option value="N/A">N/A</option>
                    </select></td>
                </tr>
                <tr>
                  <td><p>TSI OK&#13;</p></td>
                  <td><label for="TSI_OK"></label>
                    <select name="TSI_OK" id="TSI_OK">
                      <option value="N/A">N/A</option>
                      <option value="TSI Query">TSI Query</option>
                    </select></td>
                </tr>
                <tr>
                  <td><p>Special Ins OK&#13;</p></td>
                  <td><label for="Special_Ins_OK"></label>
                    <select name="Special_Ins_OK" id="Special_Ins_OK">
                      <option value="N/A">N/A</option>
                      <option value="SI Query">SI Query</option>
                    </select></td>
                </tr>
              </table></td>
              <td width="376"><table width="279" align="center" height="44">
                <tr>
                  <td width="87"><p>Shipment ID&#13;</p></td>
                  <td width="97"><label for="Ship_ID"></label>
                  <input type="text" name="Ship_ID" id="Ship_ID"></td>
                </tr>
              </table></td>
            </tr>
          </table>
        </form>
        <h1>&nbsp;</h1>
    </body>
</html> 
```

当我评论以下部分时

```
<%-- 
    Document   : P2
    Created on : Mar 7, 2013, 1:19:55 PM
    Author     : u0138039
--%> 
```

我得到了我想要的表格，但是当我取消注释时，行空间正在改变，即它正在增加。请让我知道如何减少行空间并评论上述部分。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:16:03.580

检查此代码：

```
<%-- Part 1 (Replace % with ! for HTML comment)
    Document   : P2
    Created on : Mar 7, 2013, 1:19:55 PM
    Author     : u0138039
-->
<!DOCTYPE html>
<%-- Part 2 (Replace % with ! for HTML comment)
   Document   : P2
   Created on : Mar 7, 2013, 1:19:55 PM
   Author     : u0138039
-->

<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
</head>
<body>
    <form name="form1" method="post" action="">
      <table width="722" border=1>
        <tr>
          <td width="334">
          <table width="255"  border=1>
            <tr>
              <td width="128"><p>PARTS Updated&#13;</p></td>
              <td width="111"><label for="PARTS_Updated"></label>
                <select name="PARTS_Updated" id="PARTS_Updated" >
                  <option value=""></option>
                  <option value="N/A">N/A</option>
                </select></td>
            </tr>
            <tr>
              <td><p>TSI OK&#13;</p></td>
              <td><label for="TSI_OK"></label>
                <select name="TSI_OK" id="TSI_OK">
                  <option value="N/A">N/A</option>
                  <option value="TSI Query">TSI Query</option>
                </select></td>
            </tr>
            <tr>
              <td><p>Special Ins OK&#13;</p></td>
              <td><label for="Special_Ins_OK"></label>
                <select name="Special_Ins_OK" id="Special_Ins_OK">
                  <option value="N/A">N/A</option>
                  <option value="SI Query">SI Query</option>
                </select></td>
            </tr>
          </table></td>
          <td width="376"><table width="279" align="center" height="44" border=1>
            <tr>
              <td width="87"><p>Shipment ID&#13;</p></td>
              <td width="97"><label for="Ship_ID"></label>
              <input type="text" name="Ship_ID" id="Ship_ID"></td>
            </tr>
          </table></td>
        </tr>
      </table>
    </form>
    <h1>&nbsp;</h1>
</body>
</html> 
```

案例 1：如果您评论“Part1”和“Part2”。然后： ![在此处输入图像描述](../Images/7301159984124d53e67d049bd6125ea2.png)

案例 2：如果您取消注释“Part1”并评论“Part2”。然后： ![在此处输入图像描述](../Images/5857654b83407258e8458093e08e2036.png)

案例 3：如果您评论“Part1”并取消评论“Part2”。然后： ![在此处输入图像描述](../Images/c9752070ed63eae46b40c0f4840f87f0.png)

因为***“DOCTYPE html”***声明是对 Web 浏览器的指示，说明页面是用什么版本的 HTML 编写的。

在 Case2 中，第一行不是这个***“DOCTYPE html”***，因此网络浏览器无法知道 html 上的版本，因此无法格式化其余标签。

在 Case3 中，第一行是***“DOCTYPE html”***，因此网络浏览器能够知道 html 上的版本，因此它能够格式化其余标签。所以我们得到了格式化的表格。

# jquery - jQuery 添加/删除类只工作一次

> ID：15266524
> 
> 赞同：0
> 
> 时间：2013-03-07T08:39:21.893
> 
> 标签：jquery, html, forms

我对一些基本的 jQuery 有一个小/（奇怪的？）问题。在 HTML 表单中，我有两个元素：

```
<label for="service-webdesign">
     <input type="checkbox" name="service-web" id="service-webdesign" value="Webdesign" />
     <span id="service-webdesign-span">Webdesign</span>
</label>
<label for="service-SEO" title="Search Engine Optimization">
     <input type="checkbox" name="service-web" id="service-SEO" value="SEO" />
     <span class="service-SEO-span">SEO</span>
</label> 
```

现在，我想做的是添加/删除一个名为“active”的类，以便在这些元素被击中时设置不同的样式。这是实现这一点的jQuery：

```
$('#service-webdesign').click(function(){
    if($('#service-webdesign-span').hasClass('active')){
        $('#service-webdesign-span').removeClass('active')
        } else ($('#service-webdesign-span').addClass('active'))
    });

$('#service-SEO').click(function(){
    if($('#service-SEO-span').hasClass('active')){
        $('#service-SEO-span').removeClass('active')
        } else ($('#service-SEO-span').addClass('active'))
    }); 
```

尽管它们都是相同的（功能明智），但只有第一个按预期工作。我确信这与他们的订单无关，因为交换 jQuery 并没有任何区别。我昨天才开始使用 jQuery，所以我可能缺乏看穿这种行为的能力。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:43:05.103

service-SEO-span 是一个类，但 service-webdesign-span 是一个 id，您将它们都作为 id 来定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:43:25.837

你应该使用[toggleClass](http://api.jquery.com/toggleClass/)

你应该使用评论中已经提到的 Juhana 的正确选择器！

```
$('#service-webdesign-span').toggleClass('active'); 
```

# unix - 关闭子进程中打开的文件描述符

> ID：15266531
> 
> 赞同：8
> 
> 时间：2013-03-07T08:39:53.853
> 
> 标签：unix, fork, parent-child, file-descriptor, setrlimit

有没有办法遍历已经打开的文件描述符（由父进程打开）并在子进程中一个一个地关闭它们？

操作系统：Unix。

关闭原因： setrlimit() 的 RLIMIT_NOFILE 限制限制了一个进程可以分配的文件描述符的数量。如果我们想通过设置这个限制来限制我们的子进程，它取决于已经分配的文件描述符。

尝试在子进程中设置此限制会受到限制，因为父进程有一些打开的文件描述符，因此我们不能将此限制设置为小于该数字。

示例：如果父进程分配了 10 个文件描述符，并且我们希望将子进程的文件描述符数限制为小于 10（例如 3），我们需要关闭子进程内的 7 个文件描述符。

对此的解决方案可以使所有希望限制其子进程创建新文件或打开新网络连接的人受益。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-01T16:56:26.187

以下成语并不少见（取自[MIMEDefang](http://www.mimedefang.org/)的 C 部分）：

```
/* Number of file descriptors to close when forking */
#define CLOSEFDS 256
...

static void
closefiles(void)
{
    int i;
    for (i=0; i<CLOSEFDS; i++) {
        (void) close(i);
   }
} 
```

（那是从 mimedefang-2.78 开始的，实现[在以后的版本中略有改变](https://github.com/The-McGrail-Foundation/MIMEDefang/blob/v2.86/mimedefang.c#L2681)。）

这有点像 hack（正如 MIMEDefang 代码自由承认的那样）。`STDERR_FILENO+1`在许多情况下，从 FD 3（或）开始而不是 0 会更有用。`close()`返回`EBADF`无效的 FD，但这通常不会出现问题（至少在 C 中不会，在其他语言中可能会引发异常）。

由于您可以确定文件描述符上限，`getrlimit(RLIMIT_NOFILE,...)`其[定义](http://pubs.opengroup.org/onlinepubs/000095399/functions/getrlimit.html)为：

> RLIMIT_NOFILE
> 
> 这是一个大于系统可以分配给新创建的描述符的最大值的数字。如果超出此限制，分配文件描述符的函数将失败，并将 errno 设置为 [EMFILE]。此限制限制了进程可以分配的文件描述符的数量。

您可以使用它（减去 1）作为循环的上限。上面的和`ulimit -n`，`getconf OPEN_MAX`和`sysconf(OPEN_MAX)`应该都同意。

由于`open()`总是分配最低的空闲FD，所以打开文件的最大数量和最高的FD+1是同一个数。

要确定哪些 fd 是打开的，而不是使用如果 fd 未打开则返回`close()`的 no-op （虽然调用条件没有明显的好处）。的循环超过 0 ..调用/ 。`lseek(fd, 0, SEEK_CUR)``EBADF``lseek()``close()``socat``filan``FD_SETSIZE``fstat()``fstat64()`

守护任意进程的[libslack`daemon`实用](http://libslack.org/daemon/)程序也使用这种蛮力方法（同时确保在使用时保持前三个描述符打开`inetd`）。

在您的程序可以跟踪文件句柄的情况下，最好这样做，或者`FD_CLOEXEC`在可用的情况下使用。但是，如果您希望进行防御性编码，您可能更愿意不信任您的父进程，例如由浏览器启动的外部处理程序/查看器进程，例如 Unix 平台上这个[长期存在且古老的 Mozilla 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=147659)。

对于偏执狂（您是否希望您的 PDF 查看器继承每个打开的 Firefox FD，包括您的缓存和打开的 TCP 连接？）：

```
#!/bin/bash
# you might want to use the value of "ulimit -n" instead of picking 255
for ((fd=3; fd<=255; fd++)); do
  exec {fd}<&- # close
done
exec /usr/local/bin/xpdf "$@" 
```

**15 年后更新**此问题已在 Firefox 58 (2018) 中解决，当时进程创建从 Netscape Portable Runtime (NSPR) API 更改为使用 LaunchApp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:44:11.530

据我所知，没有通用的方法来迭代 Unix/POSIX 中的打开文件描述符。处理您所描述的问题的传统方法是在您自己的代码中跟踪它们，如果需要，使用数组或列表等数据结构，并在子进程之后`fork()`但之前关闭它们`exec()`。

`exec()`但是，如果您在创建子进程后调用，某些操作系统会提供潜在的解决方案。通过使用或与操作系统的标志一起[设置`FD_CLOEXEC`文件描述符`fcntl()`](https://stackoverflow.com/q/6125068/507519)的标志，指示在调用之前关闭该特定文件描述符。您必须查阅目标操作系统的文档，以了解是否支持这些标志以及哪些标志受支持。`O_CLOEXEC``open()``exec()`

# ruby-on-rails - public_activity rails 未定义的方法 user_path

> ID：15266532
> 
> 赞同：0
> 
> 时间：2013-03-07T08:39:58.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`public_activity`我在添加到我的 Rails 应用程序时进展缓慢。

它正在工作，但我在调用正确的方法和链接以使其看起来像样时遇到问题

当我的活动.index.html 刚刚有

```
<% @activities.each do |activity| %>
    <%= activity.inspect %>
<% end %> 
```

在我看来，我可以看到

```
#<PublicActivity::ORM::ActiveRecord::Activity id: 2, trackable_id: 41, trackable_type: "Guideline", owner_id: 12, owner_type: "User", key: "guideline.create", parameters: {}, recipient_id: nil, recipient_type: nil, created_at: "2013-03-07 08:25:45", updated_at: "2013-03-07 08:25:45"> #<PublicActivity::ORM::ActiveRecord::Activity id: 1, trackable_id: 40, trackable_type: "Guideline", owner_id: nil, owner_type: nil, key: "guideline.create", parameters: {}, recipient_id: nil, recipient_type: nil, created_at: "2013-03-07 08:21:09", updated_at: "2013-03-07 08:21:09"> 
```

当我的`activities/index.html`观点有

```
<% @activities.each do |activity| %>
    <div class="activity">
    <%= link_to activity.owner.profile_name, activity.owner if activity.owner %>
    added guideline to <%= link_to activity.trackable.guideline.title, activity.trackable.guideline %>
</div>
<% end %> 
```

错误是

```
undefined method `user_path' 
```

这与我的路线有关吗？ `routes.rb`是

```
 Guidelines::Application.routes.draw do

  get "activities/index"

  # get "user/index"

  ActiveAdmin.routes(self)

  devise_for :admin_user, ActiveAdmin::Devise.config

  get "guidelines/topic"
  get "guidelines/topichospital"
  get "guidelines/topicspecialty"
  get "guidelines/favourite"
  get "profiles/show"
  get "guidelines/show"

  devise_for :users

  devise_scope :user do
    get 'signup', to: 'devise/registrations#new', as: :register
    get 'login', to: 'devise/sessions#new', as: :login
    get 'logout', to: 'devise/sessions#destroy', as: :logout
    get 'edit', to: 'devise/registrations#edit', as: :edit
    put 'users' => 'devise/registrations#update', :as => 'user_registration'
    get 'about', to: 'about#about', as: :about
  end

  resources :guidelines
  get 'guidelines', to: 'guidelines#index', as: :guidelines
  get 'favourites', to: "favourites#show", as: :favourites
  get 'topics', to: 'guidelines#list', as: :topics
  get 'hospitals', to: 'guidelines#listhospital', as: :hospitals
  get 'specialties', to: 'guidelines#listspecialty', as: :specialties

 resources :activities

  root :to => 'guidelines#index'

end 
```

运行 rake 路线给了我

```
activities_index GET        /activities/index(.:format)                           activities#index
                    admin_root            /admin(.:format)                                      admin/dashboard#index
batch_action_admin_admin_users POST       /admin/admin_users/batch_action(.:format)             admin/admin_users#batch_action
             admin_admin_users GET        /admin/admin_users(.:format)                          admin/admin_users#index
                               POST       /admin/admin_users(.:format)                          admin/admin_users#create
          new_admin_admin_user GET        /admin/admin_users/new(.:format)                      admin/admin_users#new
         edit_admin_admin_user GET        /admin/admin_users/:id/edit(.:format)                 admin/admin_users#edit
              admin_admin_user GET        /admin/admin_users/:id(.:format)                      admin/admin_users#show
                               PUT        /admin/admin_users/:id(.:format)                      admin/admin_users#update
                               DELETE     /admin/admin_users/:id(.:format)                      admin/admin_users#destroy
               admin_dashboard            /admin/dashboard(.:format)                            admin/dashboard#index
 batch_action_admin_guidelines POST       /admin/guidelines/batch_action(.:format)              admin/guidelines#batch_action
              admin_guidelines GET        /admin/guidelines(.:format)                           admin/guidelines#index
                               POST       /admin/guidelines(.:format)                           admin/guidelines#create
           new_admin_guideline GET        /admin/guidelines/new(.:format)                       admin/guidelines#new
          edit_admin_guideline GET        /admin/guidelines/:id/edit(.:format)                  admin/guidelines#edit
               admin_guideline GET        /admin/guidelines/:id(.:format)                       admin/guidelines#show
                               PUT        /admin/guidelines/:id(.:format)                       admin/guidelines#update
                               DELETE     /admin/guidelines/:id(.:format)                       admin/guidelines#destroy
      batch_action_admin_users POST       /admin/users/batch_action(.:format)                   admin/users#batch_action
                   admin_users GET        /admin/users(.:format)                                admin/users#index
                               POST       /admin/users(.:format)                                admin/users#create
                new_admin_user GET        /admin/users/new(.:format)                            admin/users#new
               edit_admin_user GET        /admin/users/:id/edit(.:format)                       admin/users#edit
                    admin_user GET        /admin/users/:id(.:format)                            admin/users#show
                               PUT        /admin/users/:id(.:format)                            admin/users#update
                               DELETE     /admin/users/:id(.:format)                            admin/users#destroy
   batch_action_admin_comments POST       /admin/comments/batch_action(.:format)                admin/comments#batch_action
                admin_comments GET        /admin/comments(.:format)                             admin/comments#index
                               POST       /admin/comments(.:format)                             admin/comments#create
                 admin_comment GET        /admin/comments/:id(.:format)                         admin/comments#show
        new_admin_user_session GET        /admin/login(.:format)                                active_admin/devise/sessions#new
            admin_user_session POST       /admin/login(.:format)                                active_admin/devise/sessions#create
    destroy_admin_user_session DELETE|GET /admin/logout(.:format)                               active_admin/devise/sessions#destroy
           admin_user_password POST       /admin/password(.:format)                             active_admin/devise/passwords#create
       new_admin_user_password GET        /admin/password/new(.:format)                         active_admin/devise/passwords#new
      edit_admin_user_password GET        /admin/password/edit(.:format)                        active_admin/devise/passwords#edit
                               PUT        /admin/password(.:format)                             active_admin/devise/passwords#update
              guidelines_topic GET        /guidelines/topic(.:format)                           guidelines#topic
      guidelines_topichospital GET        /guidelines/topichospital(.:format)                   guidelines#topichospital
     guidelines_topicspecialty GET        /guidelines/topicspecialty(.:format)                  guidelines#topicspecialty
          guidelines_favourite GET        /guidelines/favourite(.:format)                       guidelines#favourite
                 profiles_show GET        /profiles/show(.:format)                              profiles#show
               guidelines_show GET        /guidelines/show(.:format)                            guidelines#show
              new_user_session GET        /users/sign_in(.:format)                              devise/sessions#new
                  user_session POST       /users/sign_in(.:format)                              devise/sessions#create
          destroy_user_session DELETE     /users/sign_out(.:format)                             devise/sessions#destroy
                 user_password POST       /users/password(.:format)                             devise/passwords#create
             new_user_password GET        /users/password/new(.:format)                         devise/passwords#new
            edit_user_password GET        /users/password/edit(.:format)                        devise/passwords#edit
                               PUT        /users/password(.:format)                             devise/passwords#update
      cancel_user_registration GET        /users/cancel(.:format)                               devise/registrations#cancel
             user_registration POST       /users(.:format)                                      devise/registrations#create
         new_user_registration GET        /users/sign_up(.:format)                              devise/registrations#new
        edit_user_registration GET        /users/edit(.:format)                                 devise/registrations#edit
                               PUT        /users(.:format)                                      devise/registrations#update
                               DELETE     /users(.:format)                                      devise/registrations#destroy
                      register GET        /signup(.:format)                                     devise/registrations#new
                         login GET        /login(.:format)                                      devise/sessions#new
                        logout GET        /logout(.:format)                                     devise/sessions#destroy
                          edit GET        /edit(.:format)                                       devise/registrations#edit
             user_registration PUT        /users(.:format)                                      devise/registrations#update
                         about GET        /about(.:format)                                      about#about
                    guidelines GET        /guidelines(.:format)                                 guidelines#index
                               POST       /guidelines(.:format)                                 guidelines#create
                 new_guideline GET        /guidelines/new(.:format)                             guidelines#new
                edit_guideline GET        /guidelines/:id/edit(.:format)                        guidelines#edit
                     guideline GET        /guidelines/:id(.:format)                             guidelines#show
                               PUT        /guidelines/:id(.:format)                             guidelines#update
                               DELETE     /guidelines/:id(.:format)                             guidelines#destroy
                    guidelines GET        /guidelines(.:format)                                 guidelines#index
                    favourites GET        /favourites(.:format)                                 favourites#show
                        topics GET        /topics(.:format)                                     guidelines#list
                     hospitals GET        /hospitals(.:format)                                  guidelines#listhospital
                   specialties GET        /specialties(.:format)                                guidelines#listspecialty
                    activities GET        /activities(.:format)                                 activities#index
                               POST       /activities(.:format)                                 activities#create
                  new_activity GET        /activities/new(.:format)                             activities#new
                 edit_activity GET        /activities/:id/edit(.:format)                        activities#edit
                      activity GET        /activities/:id(.:format)                             activities#show
                               PUT        /activities/:id(.:format)                             activities#update
                               DELETE     /activities/:id(.:format)                             activities#destroy
                          root            /                                                     guidelines#index
            guideline_comments GET        /guidelines/:guideline_id/comments(.:format)          comments#index
                               POST       /guidelines/:guideline_id/comments(.:format)          comments#create
         new_guideline_comment GET        /guidelines/:guideline_id/comments/new(.:format)      comments#new
        edit_guideline_comment GET        /guidelines/:guideline_id/comments/:id/edit(.:format) comments#edit
             guideline_comment GET        /guidelines/:guideline_id/comments/:id(.:format)      comments#show
                               PUT        /guidelines/:guideline_id/comments/:id(.:format)      comments#update
                               DELETE     /guidelines/:guideline_id/comments/:id(.:format)      comments#destroy
                               GET        /guidelines(.:format)                                 guidelines#index
                               POST       /guidelines(.:format)                                 guidelines#create
                               GET        /guidelines/new(.:format)                             guidelines#new
                               GET        /guidelines/:id/edit(.:format)                        guidelines#edit
                               GET        /guidelines/:id(.:format)                             guidelines#show
                               PUT        /guidelines/:id(.:format)                             guidelines#update
                               DELETE     /guidelines/:id(.:format)                             guidelines#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:28:32.197

您得到一个未定义的方法`user_path`，因为您的路由文件不包含用户显示视图的路由。您必须为此创建一个。首先，您应该创建一个 users_controller 并在其中定义您的 show 方法。

```
class UsersController << ApplicationController   
  def show
    @user = User.find(params[:id])
  end
end 
```

然后，在您的 routes.rb 文件中，您将要创建路线。

```
match '/users/:id', :to => 'users#show', :as => :user 
```

:as 参数告诉路由器将路由命名为什么（然后您可以将 _path 或 _url 添加到 :as 参数的任何内容）。你想调用这个用户是因为当你像用户一样直接链接到一个 ActiveRecord 模型时，Rails 会尝试将该模型转换为 model_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:49:55.283

```
<%= link_to activity.owner.profile_name, activity.owner if activity.owner %> 
```

说 activity.owner 是 user 类型并链接到 user_path(activity.owner)

尝试做一个耙路线。并查看是否定义了 user#show。

# javascript - jquery attr('checked','checked') 只工作一次

> ID：15266533
> 
> 赞同：26
> 
> 时间：2013-03-07T08:40:03.673
> 
> 标签：javascript, jquery, checkbox, checked

我在寻找以下 jquery/checkbox 行为的原因时遇到问题。

```
$( this.obj + ' table.sgrid-content > thead > tr > th > input.select_all' ).on( 'click' , {grid:this} , function(event){

var grid = event.data.grid;

if( $(this).is(':checked') ){

    $( grid.obj + ' table.sgrid-content > tbody > tr > td > input.select ' ).attr('checked','checked');
    $( grid.obj + ' .sgrid-content > tbody > tr > td > input.select ' ).parents('tr').addClass('ui-state-highlight');

} else {

    $( grid.obj + ' table.sgrid-content > tbody > tr > td > input.select ' ).removeAttr('checked');
    $( grid.obj + ' table.sgrid-content > tbody > tr > td > input.select ' ).parents('tr').removeClass('ui-state-highlight');

}

}); 
```

该代码的工作原理如下： - 单击 input.select_all 触发事件 - 如果 input.select_all 被选中：将选中的属性添加到 table.sgrid-content 中标记为 .select 的所有复选框 - 如果不是：删除“选中” ' 所有 input.select 项目的属性。

另一个简单的网格函数。它有效。奇怪的是，它只工作一次。我的意思是，您可以选择所有复选框并取消选择它们。之后，“全选”功能停止工作。

另一个奇怪的事情是，当我用 firebug 检查 dom 元素时，它们都变成了应该的 check='checked' attr，但它们的显示和行为就像没有被检查一样。

选择器可以正常工作。添加/删除*ui-state-highlight*的代码部分一直有效。

解释的词： *grid* - 是我传递给 grid.obj 的对象（基本上是某个 div 的 ID）

请给我你的意见。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-07T08:44:10.000

使用**prop('checked', true / false)**而不是 removeAttr

```
$('input[name=foo]').prop('checked', true);
$('input[name=foo]').prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-17T09:20:39.570

您可以更改属性，如果元素未触及，这也会更改属性。一旦元素离开此初始状态，更改属性将不再影响属性。确切的行为可能因浏览器而异。

`Instead of .attr('checked', 'cheked') use .prop('checked', true)`

# console - 将文本输出到 Octave 控制台

> ID：15266535
> 
> 赞同：12
> 
> 时间：2013-03-07T08:40:08.160
> 
> 标签：console, line, octave, output

假设我有一个变量`A=5`，我想输出它，但在它的前后添加了一些文本。像这样的东西：（ `"There are 5 horses."` 注意`5`应该是可变变量`A`）

如果我写：`disp("There are "),disp(A),disp(" horses.")` 我得到：

```
There are 
5
 horses. 
```

但我希望一切都在一条线上。

我怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T09:40:43.117

您可以使用：

```
A = 5
printf("There are %d horses\n", A) 
```

输出：

```
There are 5 horses 
```

甚至

```
disp(["There are ", num2str(A), " horses"]) 
```

甚至

```
disp(strcat("There are ", num2str(A), " horses")) 
```

但是您必须添加一些内容，因为 octave/matlab 不允许在字符串末尾放置空格，因此输出为：

```
ans = There are5 horses 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-14T13:14:06.480

根据[官方文档](https://octave.org/doc/v4.4.1/Terminal-Output.html)，

> 请注意，输出`disp`始终以换行符结尾。

因此，为了避免换行，您应该使用替代方法来输出每个字符串的数据，或者先连接一个字符串，然后再连接`disp`它。

这[列出了选项](https://stackoverflow.com/a/15267714/2707864)。

# c# - 选择 ListView 项目

> ID：15266538
> 
> 赞同：0
> 
> 时间：2013-03-07T08:40:24.010
> 
> 标签：c#, android, listview, xamarin

我创建了一个包含足球俱乐部的 ListView。我想选择一个项目，它会打开一个包含所选项目信息的新活动。

这是我的列表视图：

```
base.OnCreate (bundle);
        clubs = new string[] {
            "AC Milan",
            "Borussia Dortmund",
            "Chelsea London",
            "FC Barcelona",
            "Manchester United",
            "Manchester City",
            "Real Madrid"
        };

        ListAdapter = new ArrayAdapter<String> (this, Android.Resource.Layout.SimpleListItem1, clubs);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:42:47.607

1.  创建 OnItemClickListener
2.  获取选中的项目
3.  用细节开始新的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:50:36.750

您需要覆盖`OnListItemClick`以从 ListView 获取选定项目：

```
protected override void OnListItemClick(ListView listview, 
                                           View view, int pos, long id)
  {
     var selectedvalue = clubs[pos];
    // start new Activity here....
    var intent = new Intent(this, typeof(Your_Next_Activity));
    intent.PutExtra("selectedvalue", selectedvalue);
    StartActivity(intent);
  } 
```

# paypal - How to check if payment completed in MPL?

> ID：15266540
> 
> 赞同：0
> 
> 时间：2013-03-07T08:40:31.347
> 
> 标签：paypal

Using PayPal MPL, how could the back-end server check whether the payment completed? As I understand the MPL controls the entire flow, no need for back-end server calls - but what if the server needs to validate and register the purchase completion.

**UPDATE** First of all, thank you for the answers so far. We have two requirements/preferences that can guide us to refine our process:

1.  The payment should be validated as soon as possible. Customer should access the paid services right after the purchase.
2.  For the validation process we should use minimum proof data from the app. Consider the following scenario: purchase completed, but the back-end server went offline - so the client app needs to store the proof data (transaction id, payment id) in order to validate later. But what if the client looses the proof data (app reinstall, etc.) in the meantime- how can then the client and the back-end server get back in sync?

Because of *req #1*, we don't prefer IPN. According to the [IPN documentation](https://www.x.com/developers/paypal/products/instant-payment-notification):

> > Although PayPal usually processes IPN messages immediately, IPN is not synchronized with actions on your website. Internet connectivity is not always 100% reliable and IPN messages can be lost or delayed. The IPN service automatically resends messages until the listener acknowledges them. The service resents messages for up to 4 days. Because IPN is not a real-time service, your checkout flow should not wait for the IPN message before it is allowed to complete. If the checkout flow is dependent on receiving an IPN message, processing can be delayed by system load or other reasons. Configure your checkout flow to handle a possible delay.

The process described in the iOS SDK docs involves various API calls to verify the payment, but those calls need some proof data from the client app. But what if the client looses proof data? (*req #2*) Maybe the proof data could be sent to the back-end **before** the payment? In that case the back-end server could store the proof data until it can be validated. That process would go like this:

1.  Client app initiates a PayPal payment
2.  Client app sends proof data/payment info to the back-end server
3.  Back-end server stores payment info
4.  Client app follow through the payment process with PayPal
5.  Client app notifies back-end that the payment can be validated (no additional data needed)
6.  Back-end server validates payment using the data from step 2.

For this we need an API call with a parameter that is available in step 2, but most id-s are available only after payment completed. Any advices?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:58:59.670

您应该会收到回复，表明付款已完成。但是，如果您想要在响应之外进行一些验证并注册购买完成，您从 MPL 中返回，您将不得不使用 API 调用或 IPN。您可以使用 API 调用检查交易状态或使用 IPN 并连接到您的数据库并验证订单是否完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:20:50.590

请参阅[https://developer.paypal.com/webapps/developer/docs/integration/mobile/verify-mobile-payment/](https://developer.paypal.com/webapps/developer/docs/integration/mobile/verify-mobile-payment/)。

这些文档适用于今天发布的新 iOS SDK，但验证应该与旧 MPL 相同。（当然希望你会比旧的 MPL 更喜欢新的 SDK）

# c# - 实体框架良好实践

> ID：15266543
> 
> 赞同：1
> 
> 时间：2013-03-07T08:40:45.570
> 
> 标签：c#, asp.net, entity-framework

我目前正在使用实体框架在 asp.net 中创建一个网站，我想知道实例化的好方法是`Entity Container`什么？

目前，我正在这样做（其中 MyDB 是我的实体框架容器）：

```
public partial class User : System.Web.UI.MasterPage
{
     private myDb ctx;
      protected void Page_Load(object sender, EventArgs e)
     {
         if (!IsPostBack) ctx = new myDb();
     }
} 
```

我在许多功能中使用上下文。

但是，在许多网站上，我看到了这种处理方式：

```
using (var ctx = new myDb())
{
} 
```

但是如果使用第二个，我必须把它放在我班级的许多功能中。所以重新实例化`Entity Container`.

什么是更好的？你能解释一下为什么它更好吗？如果两者都很好，为什么在不同的情况下我必须多使用一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:10:09.160

处置`Entity Container`的习惯来自于处置昂贵的资源如sql连接到数据库的习惯，如

```
 using (SqlConnection connection = new SqlConnection(connectionString))
 {} 
```

但是，`Entity Framework`它足够智能，仅在执行查询时才打开连接，因此`Entity Container`不代表 sql 连接。所以在这个意义上没有真正的优势，除了早一点收集垃圾。

此外，如果您要处理上下文，则不能使用延迟加载。您应该使用与负载相关的数据`Include`。更多信息在这里[Entity Framework - 在处理实体对象上下文后加载引用键](https://stackoverflow.com/questions/7011490/entity-framework-load-reference-keys-after-disposing-entity-object-context)

总之，我看不出每个请求方法一个上下文的任何缺点。相比之下，没有延迟加载对我来说是一个重要的缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:07:52.063

*我想我会添加我的评论作为答案。*

在您的情况下，您可以调用`ctx.Dispose();`事件`Page_Unload`并达到与

```
using (var ctx = new myDb()) 
{ 
} 
```

[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)适用于实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的类。当 using 块完成时，将`.Dispose()`调用该方法。然后你处理一个对象来释放资源并释放内存。示例中的数据库对象继承自[DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)并实现 IDisposable，因此当调用[Dispose()](http://msdn.microsoft.com/en-us/library/gg696657%28v=vs.103%29.aspx)时，它也会关闭与数据库的连接。

如果您有很多请求，这当然会很方便。您不希望有数以千计的开放连接到数据库并占用大量内存。

需要注意的一件事是，如果在 Page_Unload 之前引发了任何未处理的异常，则不会触发 unload 事件并且不会释放数据库对象。

那么最好使用[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，因为它总是调用`.Dispose()`对象。

# r - 将日内时间序列转换为每日

> ID：15266546
> 
> 赞同：1
> 
> 时间：2013-03-07T08:40:55.460
> 
> 标签：r, xts

我一直使用 xts 包中的 to.daily 来实现这一点，但是由于升级 R 遇到了该功能的已知错误，所以想找到一种替代方法。

如果可能的话，我想使用 Base R 中的函数。看起来我可以用聚合来做到这一点。我不知道如何开始，所以任何提示将不胜感激。

```
z <- read.csv("R H2007-EIR_5.csv", sep=",",  header=F)
names(z) <-c("date","time","open","high","low","close","volume")

> head(z,20)
         date  time   open   high    low  close volume
1  13/03/2007 09:10 107.66 107.66 107.66 107.66     10
2  13/03/2007 09:40 107.63 107.63 107.63 107.63     50
3  13/03/2007 09:45 107.64 107.64 107.64 107.64      8
4  13/03/2007 10:00 107.62 107.62 107.62 107.62      7
5  13/03/2007 10:45 107.64 107.65 107.64 107.65     94
6  13/03/2007 11:20 107.77 107.77 107.77 107.77      2
7  14/03/2007 09:00 108.00 108.00 108.00 108.00     10
8  14/03/2007 09:05 108.00 108.01 108.00 108.01     45
9  14/03/2007 11:15 108.05 108.05 108.05 108.05      5
10 14/03/2007 11:25 108.05 108.05 108.05 108.05      1
11 14/03/2007 11:40 108.10 108.10 108.10 108.10     25
12 14/03/2007 12:00 108.10 108.10 108.10 108.10      5
13 14/03/2007 12:30 108.05 108.05 108.05 108.05      5
14 14/03/2007 12:55 108.05 108.05 108.05 108.05    800
15 14/03/2007 13:05 108.02 108.02 108.02 108.02     89
16 14/03/2007 13:30 108.00 108.00 108.00 108.00      5
17 14/03/2007 14:25 107.95 107.95 107.95 107.95      5
18 14/03/2007 15:05 107.95 107.95 107.95 107.95      2
19 14/03/2007 16:00 108.01 108.01 108.01 108.01      6
20 15/03/2007 08:05 107.86 107.90 107.86 107.90      2

> dput(z)
    structure(list(date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
3L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 10L, 10L, 10L, 
10L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L), .Label = c("13/03/2007", "14/03/2007", 
"15/03/2007", "16/03/2007", "19/03/2007", "20/03/2007", "21/03/2007", 
"22/03/2007", "23/03/2007", "26/03/2007", "27/03/2007", "28/03/2007"
), class = "factor"), time = structure(c(8L, 11L, 12L, 13L, 20L, 
26L, 6L, 7L, 25L, 27L, 28L, 29L, 33L, 34L, 35L, 37L, 42L, 46L, 
54L, 2L, 3L, 24L, 45L, 46L, 11L, 44L, 55L, 11L, 23L, 31L, 32L, 
48L, 10L, 43L, 1L, 14L, 15L, 20L, 31L, 53L, 54L, 36L, 46L, 47L, 
49L, 50L, 51L, 12L, 16L, 30L, 40L, 19L, 31L, 38L, 39L, 4L, 27L, 
31L, 33L, 41L, 43L, 50L, 52L, 5L, 7L, 9L, 12L, 17L, 18L, 20L, 
21L, 22L, 23L), .Label = c("08:00", "08:05", "08:10", "08:30", 
"08:55", "09:00", "09:05", "09:10", "09:15", "09:30", "09:40", 
"09:45", "10:00", "10:05", "10:15", "10:25", "10:30", "10:35", 
"10:40", "10:45", "10:50", "10:55", "11:00", "11:10", "11:15", 
"11:20", "11:25", "11:40", "12:00", "12:05", "12:15", "12:20", 
"12:30", "12:55", "13:05", "13:25", "13:30", "13:35", "13:55", 
"14:00", "14:15", "14:25", "14:30", "14:35", "14:45", "15:05", 
"15:10", "15:15", "15:20", "15:25", "15:30", "15:40", "15:55", 
"16:00", "16:10"), class = "factor"), open = c(107.66, 107.63, 
107.64, 107.62, 107.64, 107.77, 108, 108, 108.05, 108.05, 108.1, 
108.1, 108.05, 108.05, 108.02, 108, 107.95, 107.95, 108.01, 107.86, 
107.86, 107.88, 107.8, 107.79, 107.78, 107.64, 107.75, 107.61, 
107.6, 107.55, 107.55, 107.48, 107.4, 107.43, 107.39, 107.48, 
107.53, 107.56, 107.47, 107.39, 107.39, 107.37, 107.3, 107.3, 
107.29, 107.29, 107.29, 107.16, 107.13, 107.11, 107.06, 106.8, 
106.72, 106.7, 106.72, 106.62, 106.72, 106.58, 106.58, 106.62, 
106.66, 106.73, 106.67, 106.61, 106.6, 106.6, 106.57, 106.61, 
106.6, 106.59, 106.6, 106.62, 106.65), high = c(107.66, 107.63, 
107.64, 107.62, 107.65, 107.77, 108, 108.01, 108.05, 108.05, 
108.1, 108.1, 108.05, 108.05, 108.02, 108, 107.95, 107.95, 108.01, 
107.9, 107.86, 107.89, 107.8, 107.79, 107.78, 107.64, 107.75, 
107.61, 107.6, 107.55, 107.55, 107.48, 107.4, 107.43, 107.39, 
107.48, 107.53, 107.56, 107.47, 107.39, 107.39, 107.37, 107.3, 
107.3, 107.29, 107.29, 107.29, 107.16, 107.13, 107.11, 107.06, 
106.8, 106.72, 106.7, 106.72, 106.62, 106.72, 106.58, 106.58, 
106.62, 106.66, 106.73, 106.67, 106.62, 106.6, 106.6, 106.57, 
106.61, 106.6, 106.63, 106.6, 106.65, 106.65), low = c(107.66, 
107.63, 107.64, 107.62, 107.64, 107.77, 108, 108, 108.05, 108.05, 
108.1, 108.1, 108.05, 108.05, 108.02, 108, 107.95, 107.95, 108.01, 
107.86, 107.86, 107.88, 107.8, 107.79, 107.78, 107.64, 107.75, 
107.61, 107.6, 107.55, 107.55, 107.48, 107.29, 107.43, 107.39, 
107.48, 107.53, 107.56, 107.47, 107.39, 107.39, 107.37, 107.3, 
107.3, 107.29, 107.29, 107.29, 107.16, 107.13, 107.11, 107.06, 
106.8, 106.72, 106.7, 106.72, 106.62, 106.72, 106.58, 106.58, 
106.62, 106.66, 106.73, 106.67, 106.61, 106.6, 106.6, 106.57, 
106.61, 106.6, 106.59, 106.6, 106.61, 106.65), close = c(107.66, 
107.63, 107.64, 107.62, 107.65, 107.77, 108, 108.01, 108.05, 
108.05, 108.1, 108.1, 108.05, 108.05, 108.02, 108, 107.95, 107.95, 
108.01, 107.9, 107.86, 107.89, 107.8, 107.79, 107.78, 107.64, 
107.75, 107.61, 107.6, 107.55, 107.55, 107.48, 107.3, 107.43, 
107.39, 107.48, 107.53, 107.56, 107.47, 107.39, 107.39, 107.37, 
107.3, 107.3, 107.29, 107.29, 107.29, 107.16, 107.13, 107.11, 
107.06, 106.8, 106.72, 106.7, 106.72, 106.62, 106.72, 106.58, 
106.58, 106.62, 106.66, 106.73, 106.67, 106.61, 106.6, 106.6, 
106.57, 106.61, 106.6, 106.61, 106.6, 106.65, 106.65), volume = c(10L, 
50L, 8L, 7L, 94L, 2L, 10L, 45L, 5L, 1L, 25L, 5L, 5L, 800L, 89L, 
5L, 5L, 2L, 6L, 2L, 4L, 178L, 5L, 5L, 10L, 1L, 1L, 1L, 2L, 50L, 
44L, 100L, 400L, 91L, 1L, 100L, 100L, 3L, 1L, 79L, 21L, 28L, 
80L, 20L, 20L, 31L, 49L, 5L, 1L, 25L, 1L, 20L, 284L, 2368L, 454L, 
18L, 43L, 11L, 547L, 18L, 1L, 3L, 253L, 200L, 5L, 35L, 30L, 50L, 
50L, 172L, 99L, 1728L, 82L)), .Names = c("date", "time", "open", 
"high", "low", "close", "volume"), class = "data.frame", row.names = c(NA, 
-73L)) 
```

期望的输出：

```
 date   open   high    low  close
 1 13/03/2007 107.66 107.77 107.62 107.77
 2 14/03/2007 108.00 108.10 107.95 108.01
 3 15/03/2007 107.86 107.90 107.86 107.90 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:57:46.697

是这样的吗？

```
o <- aggregate(data = z, open ~ date, head, 1)
o$max <- aggregate(data = z, high ~ date, max)$high
o$min <- aggregate(data = z, low ~ date, min)$low
o$close <- aggregate(data = z, close ~ date, tail, 1)$close

#         date   open    max    min  close
# 1 13/03/2007 107.66 107.77 107.62 107.77
# 2 14/03/2007 108.00 108.10 107.95 108.01
# 3 15/03/2007 107.86 107.90 107.86 107.90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:58:11.143

这样的事情应该可以解决问题：

```
todaily <- function(z){
    zperiod<-split(z,cut(strptime(paste(z$date, z$time), "%d/%m/%Y %H:%M"), "day"))
    zperiod<-zperiod[sapply(zperiod,nrow)!=0]
    res<-do.call(rbind,lapply(zperiod, 
                  function(x)c(x$open[1],
                               max(c(x$open,x$max, x$min,x$close), na.rm=TRUE),     
                               min(c(x$open,x$max, x$min,x$close), na.rm=TRUE), 
                               x$close[nrow(x)])))
    colnames(res)<-c("open","max","min","close")
    res
    }
todaily(z)
             open    max    min  close
2007-03-13 107.66 107.77 107.62 107.77
2007-03-14 108.00 108.10 107.95 108.01
2007-03-15 107.86 107.90 107.86 107.90 
```

当然，您可以在可以处理的任何时间段内对其进行修改`cut.POSIXt`（请参阅`?cut.POSIXt`）：

```
toperiod <- function(z, period="day"){
    zperiod<-split(z,cut(strptime(paste(z$date, z$time), "%d/%m/%Y %H:%M"), period))
    zperiod<-zperiod[sapply(zperiod,nrow)!=0]
    res<-do.call(rbind,lapply(zperiod, 
                  function(x)c(x$open[1],
                               max(c(x$open,x$max, x$min,x$close), na.rm=TRUE),     
                               min(c(x$open,x$max, x$min,x$close), na.rm=TRUE), 
                               x$close[nrow(x)])))
    colnames(res)<-c("open","max","min","close")
    res
    } 
```

使用您上传的完整数据集，这是最后一个函数可以执行的操作：

```
toperiod(z, "weeks")
                      open    max    min  close
2007-03-12 00:00:00 107.66 108.10 107.62 107.75
2007-03-19 00:00:00 107.61 107.61 107.06 107.06
2007-03-26 01:00:00 106.80 106.80 106.57 106.65

toperiod(z, "2 weeks")
                      open   max    min  close
2007-03-12 00:00:00 107.66 108.1 107.06 107.06
2007-03-26 01:00:00 106.80 106.8 106.57 106.65 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:30:10.113

这是一个混合`xts`和`base`功能的解决方案。

首先，我创建我的 xts 对象。

```
INDEX <- strptime(paste(dat[,1],dat[,2],sep=' '),'%d/%m/%Y %H:%M')
dat.xts <- xts(dat[,-c(1,2)],INDEX) 
```

最终解决方案是此 xts 对象的子集。我`endpoints`用来获取最终数据的子集，但使用了错误的核心数据。

```
dat.xts[INDEX,-c(5)]
                      open   high    low  close
2007-03-13 11:20:00 107.77 107.77 107.77 107.77
2007-03-14 16:00:00 108.01 108.01 108.01 108.01
2007-03-15 08:05:00 107.86 107.90 107.86 107.90 
```

现在我计算核心数据，使用`lapply`

```
xx <- lapply(1:(length(INDEX) - 1), function(y) {
  xi <- as.data.frame(dat.xts[(INDEX[y] + 1):INDEX[y + 1]])
    res <- c(
      xi$open[1],
      max(c(xi$open,x$max, xi$min,xi$close), na.rm=TRUE),     
      min(c(xi$open,x$max, xi$min,xi$close), na.rm=TRUE), 
      x$close[nrow(xi)])
  })

coredata(res) <- do.call(rbind,xx) 
```

要获得所需的结果：

```
 open   high    low  close
2007-03-13 11:20:00 107.66 107.77 107.62 107.77
2007-03-14 16:00:00 108.00 108.10 107.95 108.05
2007-03-15 08:05:00 107.86 107.90 107.86 107.66 
```

# winforms - Windows 窗体 DataGridView 中的级联组合框

> ID：15266553
> 
> 赞同：0
> 
> 时间：2013-03-07T08:41:12.573
> 
> 标签：winforms, entity-framework, datagridview, entity-framework-5, cascadingdropdown

我被困在一个通常我什至不会面对的问题上，但在这种情况下，这似乎很重要。

首先，为了避免混淆，尽管我已经在标题中写了它，但我们谈论的是 Windows 窗体（不是 WPF，也不是与 Web 相关的应用程序）。

我有一个 DataGridView，其数据源来自实体的导航属性（实体框架 5，代码优先）。

除其他字段外，此数据网格还具有“IdEquipment”和“IdConfiguration”。两列都是 DataGridViewComboBoxEditingControl 类型。IdEquipment 由 BindingSource 控件填充，即“设备”：

```
 _context.Equipments.Local.ToBindingList(); 
```

“配置”表作为外键“IdEquipment”和组合框必须如何在数据网格的每一行中作为该表的子集。为此，经过一些不成功的测试并在 SO 和其他地方进行搜索后，我找到[了这个解决方案](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/e7746ddf-3294-478c-a072-8a2eb83ba20c)，特别关注`dataGridView1_EditingControlShowing`和`dataGridView1_CellValueChanged`。

这似乎是正确的方向，但是，问题是当我过滤 IdEquipment 组合框的数据源时（这也是另一个绑定到 `_context.Configurations.Local.ToBindingList();`.

我在某处读过，因为我正在使用实体，所以我应该调用`.ToList()`而不是`.ToBindingList()`，但即使在这种情况下，过滤也不会发生（无论如何我认为 BindingList 仍然可以）。

我可以使用的另一个选项是利用第一个组合框的选定值/实体，并获取 Equipment.Configuration 导航属性，但我不知道如何使用 DataGridViewComboBoxEditingControl 来做到这一点。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:23:23.597

在挣扎了几个小时之后，我最终找到了最适合我需求的解决方案：虽然我不知道这是否是解决方案。

*   摆脱了组合框使用的所有 BindingSource 控件。
*   在 DataGrid DataBindingComplete 事件中：使用非过滤列表配置两个组合的数据源并设置 DisplayMember 和 DisplayValue 属性（两个列表都有第一个“null”元素）。
*   在 DataGrid EditingControlShowing 事件中：使用基于 IdEquipement 的当前值（如果有）的过滤列表更改第二个组合的数据源并保留第一个空元素。
*   在 DataGrid CellValueChanged 事件中：如果更改了列 id IdEquipement，则将包含 IdConfiguration 的列的值设为 null

到目前为止，这很有效。我希望以更简单的方式达到相同的结果，但据我所知，没有选择。

# url - multiple languages in htaccess rewriterule

> ID：15266557
> 
> 赞同：1
> 
> 时间：2013-03-07T08:41:30.593
> 
> 标签：url, url-rewriting

This rewrite rule in my htaccess works fine:

```
Options +FollowSymLinks
RewriteEngine On 
RewriteBase / 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+?/)?([^/]+).html$ /$1content.php?page=$2&lang=en [L] 
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ (/.*?)?/content.php\?page=([^&\ ]+) 
RewriteRule ^(.+?/)?content.php$ /$2%3.html? [L,R=301] 
```

Question: I like to use another language. In the end of the first RewriteRule it says.... &lang=en What do I need to do to make also e.g. a dutch language work? &lang=nl ?

# ruby - 在 ruby 中反转哈希和合并键

> ID：15266558
> 
> 赞同：0
> 
> 时间：2013-03-07T08:41:35.613
> 
> 标签：ruby, hash, key, reverse, key-value

我的哈希是：

```
h = { 'a' => ['x' ,'y'], 'b' => ['x','z']} 
```

我想反转键和值并以某种方式合并新键，从而导致

```
 res = { 'x' => ['a','b'], 'y' => ['a'], 'z' => ['b']} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:50:52.703

```
res = {}
h.each{|k, v| v.each{|vv| res[vv] ||= []; res[vv].push(k)}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:49:05.307

使用来自 Facets 的[Enumerable#map_by](http://rdoc.info/github/rubyworks/facets/master/Enumerable#map_by-instance_method)的函数式方法：

```
require 'facets'
h.flat_map { |k, vs| vs.product([k]) }.map_by { |k, v| [k, v] }
#=> {"x"=>["a", "b"], "y"=>["a"], "z"=>["b"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:15:51.710

试试这个..

```
rev = {}
h.collect{|k, v| v.each{|vv| rev.has_key?(vv)? rev[vv] << k : (rev[vv] = [k])}} 
```

我测试了它，它正在工作。

# javascript - Giving map markers a unique ID then accessing outside of the canvas

> ID：15266563
> 
> 赞同：0
> 
> 时间：2013-03-07T08:41:41.400
> 
> 标签：javascript, google-maps-api-3

I have created an array of markers on a map. And I have a list of these markers outside of the canvas. I would like to learn about and create some interaction between these.

My markers are created like so:

```
var markers = [];
var marker = [];
var i;  

// var places is an array of locations
for (var i=0;i<places.length;i++) {

        var place = places[i];
        var latLng = new google.maps.LatLng(place[1], place[2]);

         marker[i] = new google.maps.Marker({
            position: new google.maps.LatLng(place[1], place[2]),map: map
        });

        marker[i].set('id','marker_'+i);

        markers.push(marker[i]);

} 
```

I thought perhaps by using [MVCObject](https://developers.google.com/maps/documentation/javascript/reference#MVCObject) I could set the id of the marker, and perhaps my marker would have an id of 'marker_1' for example, which I could access in the DOM with jquery via something like:

```
$('#marker_0').doSomething(); 
```

But this doesn't seem to be the case.

How can I give each marker a unique Id to access in the DOM outside the map canvas and API?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:01:17.407

回答我的问题，[这个答案在这里](https://stackoverflow.com/questions/3436165/google-maps-adddomlistener-on-div-added-by-jquery-only-sees-last-iteration-of-lo)。

我在谷歌地图的初始化函数中创建了一个函数 var：

```
var markers = [];
var marker = [];
var i;  

// var places is an array of locations
for (var i=0;i<places.length;i++) {

    var place = places[i];
    var latLng = new google.maps.LatLng(place[1], place[2]);

     marker[i] = new google.maps.Marker({
        position: new google.maps.LatLng(place[1], place[2]),map: map
    });

    marker[i].set('id','marker_'+i);

    markers.push(marker[i]);

    var mouseoverListener = (function(i) {
        return function() {

            alert[i];

        };
    })(i);

} 
```

然后像这样启动[addDomListener](https://developers.google.com/maps/documentation/javascript/events#DomEvents)：

```
 google.maps.event.addDomListener(document.getElementById('place'+i+''), 'mouseover', mouseoverListener); 
```

当我将鼠标悬停在我的列表项上时，它会提醒它应该出现的标记的索引，因此我可以访问对每个标记的控制权，而不是 alert[i]。

# javascript - jquery treeview selected node path

> ID：15266564
> 
> 赞同：0
> 
> 时间：2013-03-07T08:41:42.963
> 
> 标签：javascript, jquery, path, treeview

I'm using [jquery treeview plugin](http://bassistance.de/jquery-plugins/jquery-plugin-treeview/) to list a directory into a treeview. I need to select path of selected node. for example, have a look at the structure below.

![enter image description here](../Images/4aa2e43d60dd6113ac370d20092b1e97.png)
If **config.php** gets clicked then i need the path like **SITE/classes/config.php**

Can somebody help me to get around this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:28:09.310

这个演示应该解释一切，只需将其粘贴到正文部分。确保您在页面上链接了 jQuery。

JavaScript 循环遍历父元素并组成面包屑路径。

```
<div id="path">click some element</div>

<ul>
    <li><a href="#">SITE</a>
        <ul>
            <li><a href="#">classes</a>
                <ul>
                    <li><a href="#">class.file1.php</a></li>
                    <li><a href="#">class.file2.php</a></li>
                    <li><a href="#">class.file3.php</a></li>
                    <li><a href="#">class.file4.php</a></li>
                    <li><a href="#">class.file5.php</a></li>
                </ul>
            </li>
            <li><a href="#">img</a></li>
        </ul>
    </li>
</ul>

<style type="text/css">
li a { cursor: pointer; text-decoration: none }
li.active > a { color: red }
</style>

<script>
function getPath(a) {
    var path = $(a).text();
    var $parent = $(a).parents("li").eq(1).find("a:first");

    if ($parent.length == 1) {
        path = getPath($parent) + "/" + path;
    }

    return path;
}

$(function(){
    $("ul a").click(function(){
        $("#path").text(getPath(this));

        $("li.active").removeClass("active");
        $(this).closest("li").addClass("active");
        this.preventDefault();
    });
});
</script> 
```

# c# - 向 dataset.tables[i] 添加新行并更新数据库

> ID：15266565
> 
> 赞同：0
> 
> 时间：2013-03-07T08:41:46.897
> 
> 标签：c#, sql-server, winforms

我有两个 sql 服务器（其中一个在我的 Web 服务器中：服务器 A，另一个在本地：服务器 B）

我使用下面的代码将 SQL SERVER A 中的表上的数据复制到 SQL SERVER B 中的另一个表：（不同的服务器和不同的数据库..**这两个表在列中是相同的**）

服务器 A 开启

服务器 B 关闭

```
 string strsql = "SELECT * FROM **serverA_table**";
        ONda = new SqlDataAdapter(strsql, ONcon);
        ONds = new DataSet();
        ONda.Fill(ONds, "serverA_table");

        strsql = "SELECT * FROM serverB_table";
        OFFda = new SqlDataAdapter(strsql, OFFcon);
        OFFds = new DataSet();
        OFFda.Fill(OFFds, "serverB_table");

        DataRow[] newRow = ONds.Tables["serverA_table"].Select();

        DataTable dtTarget = new DataTable();
        dtTarget = OFFds.Tables["serverB_table"].Clone();

        foreach (DataRow temp in newRow)
        {
            dtTarget.ImportRow(temp);
        }

        SqlCommandBuilder cb = new SqlCommandBuilder(OFFda);
        OFFda.InsertCommand = cb.GetInsertCommand();
        OFFda.UpdateCommand = cb.GetUpdateCommand();
        OFFda.DeleteCommand = cb.GetDeleteCommand();
        OFFda.Update(OFFds.Tables["serverB_table"]); 
```

但是什么都没有发生，也没有任何行被添加（导入）到我的 serverB_table ！

请帮助我使用此代码或让我知道执行此操作的新方法！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:08:20.393

您必须`DataRow.SetAdded`在导入行之前使用。尝试以下操作：

```
string strsql = "SELECT * FROM ServerATable";

using (ONcon = new SqlConnection(conString))
using (ONda = new SqlDataAdapter(strsql, ONcon))
{
    ONcon.Open();
    ONds = new DataSet();
    ONda.Fill(ONds, "serverA_table");
}

strsql = "SELECT * FROM ServerBTable";

using (OFFcon = new SqlConnection(conString))
using (OFFda = new SqlDataAdapter(strsql, OFFcon))
{
    OFFcon.Open();
    OFFds = new DataSet();
    OFFda.Fill(OFFds, "serverB_table");

    DataRow[] newRow = ONds.Tables["serverA_table"].Select();

    foreach (DataRow temp in newRow)
    {
        temp.SetAdded();
        OFFds.Tables["serverB_table"].ImportRow(temp);
    }

    SqlCommandBuilder cb = new SqlCommandBuilder(OFFda);
    OFFda.InsertCommand = cb.GetInsertCommand();
    OFFda.UpdateCommand = cb.GetUpdateCommand();
    OFFda.DeleteCommand = cb.GetDeleteCommand();
    OFFda.Update(OFFds.Tables["serverB_table"]);
} 
```

# java - Selecting a Language for desktop application

> ID：15266567
> 
> 赞同：3
> 
> 时间：2013-03-07T08:41:50.440
> 
> 标签：java, c, visual-c++, desktop-application

I have an idea and want to build a desktop application

Requirements: Open Source, portable, cross platform, easy to install, easy to make setup, simple GUI, high speed draft printing.

I have some options:

1.  Java : easy to make jar file but don’t know how to make setup executable, swing is easy to implement
2.  C#: Easy to make setup file but tools for open source are limited, difficult to implement
3.  Python: Python eggs are setup file, difficult to make interface, is easy to develop, fast programmable
4.  Ruby: Don’t know anything about ruby
5.  C/C++ : I had used C builder and Codelite product in C and C++, it is difficult to work with crafter widgets
6.  Visual Basic: Easy to build nice GUI but portability, reporting and setup issues
7.  Visual Fox Pro: Microsoft open sourced version but database support is limited to sql and Microsoft Access
8.  and other: Don’t know much about other languages

I want

1.  An Application setup should be fast and easy to create
2.  Easy to build GUI not like C++ crafter or any other external source
3.  Multiple options for open source reporting tools
4.  And it could run on different platforms: Linux,Windows 7/8 and others

Please, can you suggest me a language or any other resources and links that could help me to find the best solution.

I want to know how desktop applications are made from start to end in open source.

When I see setup of applications I download for various needs of requirement it doesn't speaks how it developed and what language is used for it...but its beautiful to use it..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:46:09.093

在整个 DropBox 项目中使用 Python 和 WxPython 来实现跨平台 GUI。Bittorrent 也首先在 python 中实现。

所以我会提倡Python。- 使用 py2exe 和 py2app 的简单部署选项

如果您真的不介意 Qt 和 C++，那么这也是一个选项或带有 WxWidgets 的 C++

# asp.net - ASP.NET Dropdownlist: value of ddl.text becomes the value of ddl.selectedvalue in selectedindexchanged

> ID：15266570
> 
> 赞同：2
> 
> 时间：2013-03-07T08:42:17.790
> 
> 标签：asp.net, drop-down-menu, selectedvalue, selectedindexchanged

ASP.NET 4.0 & SQL 2008

I would like to ask for help in my coding, I don't know what's wrong or what am I missing. What I want to do is when I select an item in `dropdownlist`, it will give me the ID `(ddlSchool.selectedvalue)` and the value of the text `(ddlSchool.text)`.

Below is the code that populates the dropdownlist. I'm getting the value of ID and Text from the database, it works perfectly fine; When I debug it, it gives the correct value of the ID `(newItem.Value = .dr("fnorglevelid"))` and the correct value of Text `(newItem.Text = .dr("fcorgcode").ToString()`

```
 Protected Sub populateDDLDepartment()

    If Not IsPostBack Then
        Dim newItem As New ListItem()
        newItem.Text = "Select a Department..."
        newItem.Value = "0"
        ddlSchool.Items.Add(newItem)

        Try
            With connSchool
               .conn = New SqlConnection(.strCNN_ADMtoGRAD) : .conn.Open()
               .strSQL = "select fnorglevelid, rtrim(fcorganization) as 'fcorgcode'"& _
                            "from hris_organization " & _
                            "where flschool = 1 " & _
                            "order by fcorgcode asc"
               .cmd = New SqlCommand(.strSQL, .conn)
               .dr = .cmd.ExecuteReader()

                While .dr.Read
                    newItem = New ListItem()
                    newItem.Text = .dr("fcorgcode").ToString()
                    newItem.Value = .dr("fnorglevelid")
                    ddlSchool.Items.Add(newItem)
                End While

            End With
        Finally
            With connSchool
                .conn.Close()
                .conn = Nothing
                .strSQL = vbNullString
                .strSQL = Nothing
                .cmd.Dispose()
                .cmd = Nothing
                .dr = Nothing
            End With
        End Try
    End If
End Sub 
```

But when I select an item, the value of ddlSchool.text becomes the same as the value of ddlSchool.selectedValue. I put it in the message box first:

```
 Protected Sub ddlSchool_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlSchool.SelectedIndexChanged
         MsgBox("Text:" & ddlSchool.Text & "   ID:" & ddlSchool.SelectedValue)
    End Sub 
```

What am I missing? What do I have to do? It seems that `selectedValue` is the same as Text.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:50:03.753

您可以使用

**价值**

```
ddlSchool.SelectedValue 
```

或者

```
ddlSchool.Text 
```

**文本**

```
ddlSchool.SelectedItem.Text for 
```

谢谢你

# browser - .pptx files are not opening in firefox browser

> ID：15266571
> 
> 赞同：0
> 
> 时间：2013-03-07T08:42:19.047
> 
> 标签：browser

Opening a .pptx document fails in Firefox. Firefox tries to open the .pptx file as a .potx (MS PowerPoint template).

While opening the .pptx file , it prefixes with .potx extension. eg . **abcDocument.pptx.potx**

Does anybody knows the cause?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:49:57.667

您必须打开工具-> 选项-> 应用程序并找到 Power Point Presentation 和编辑操作以保存或使用其他软件打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:51:43.837

我认为这可能是服务器 MIME 类型的问题。

# jquery - Ajax Call Delayed by SetInterval

> ID：15266572
> 
> 赞同：0
> 
> 时间：2013-03-07T08:42:22.437
> 
> 标签：jquery, setinterval

I have this ajax call which is a recurring call every 10 seconds. This works perfectly However, the Visits counter only updates 10 seconds after page load. Until then, it is empty. If I set it to 60 seconds, which is more practical I think, then the area is BLANK for 60 seconds and only then the data appears.

How can I modify this to get the value of Visits immediately on page load and then continuously refresh it every 10 seconds?

```
<script type="text/javascript">
var Visits = 0; 

$(document).ready(function() {
  $("#counter").flipCounter(); 
  setInterval("ajaxd()",10000);
});

function ajaxd(){   // this function is called only after 10 seconds after page load
  $.ajax({
  type: "POST",
  cache:false,
  url: "getVisits.asp?dx=1,   // returns a number
  dataType: "text",
  data: "",
  success: function(data){
       Visits= parseFloat(data).toFixed(2);
  }
});
/// update value in <div> 
```

```
$("#counter").flipCounter(
"startAnimation", // scroll counter from the current number to the specified number
{
start_number: 0, // the number we want to scroll from
end_number: Visits, // the number we want the counter to scroll to
numIntegralDigits: Visits.length-3, // number of places left of the decimal point to maintain
numFractionalDigits:2, // number of places right of the decimal point to maintain
easing: jQuery.easing.easeOutCubic, // this easing function to apply to the scroll.
duration: 3000 // number of ms animation should take to complete
});   
} 
```

FINALLY, this part where the counter is to appear:

```
<div id="counter" class="bb_box">
<input type="hidden" name="counter-value" value="00.00"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:40:44.590

试试这个（见 ajaxd() 在函数之后）

```
setInterval(function() {
ajaxd();

}, 10000);

function ajaxd(){   // this function is called only after 10 seconds after page load
  $.ajax({
  type: "POST",
  cache:false,
  url: "getVisits.asp?dx=1,   // returns a number
  dataType: "text",
  data: "",
  success: function(data){
       Visits= parseFloat(data).toFixed(2);
  }

 ajaxd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:44:13.843

改变

```
$(document).ready(function() {
  $("#counter").flipCounter(); 
  setInterval("ajaxd()",10000);
}); 
```

至

```
$(document).ready(function() {
  $("#counter").flipCounter(); 
  setInterval(ajaxd,10000);
  ajaxd();  // add this to call ajax once immediately
}); 
```

并将此代码块移动到脚本块的末尾，以避免调用未定义的函数。

**更新** 你可能会这样尝试：

```
var Visits = 0; 

function ajaxd(){   
  $.ajax({
  type: "POST",
  cache:false,
  url: "getVisits.asp?dx=1,   // returns a number
  dataType: "text",
  data: "",
  success: function(data){
       Visits= parseFloat(data).toFixed(2);
       $("#counter").flipCounter("setNumber", Visits);
  }
});

$(document).ready(function() {
  $("#counter").flipCounter(); 
  setInterval(ajaxd, 10000);
  ajaxd();
}); 
```

# javascript - 如何在 kendo ui 中拖放面板栏？

> ID：15266582
> 
> 赞同：1
> 
> 时间：2013-03-07T08:43:01.000
> 
> 标签：javascript, kendo-ui

在我的项目中，我需要拖放带有图表的面板栏，是否可以拖放？如果可能的话，任何人都可以提供剑道用户界面的例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:17:55.000

有可以简化您的开发的 Kendo UI Widget（非官方）。

如果您将面板内容定义为：

```
<div class="panel-container">
    <div class="panel">
        <ul id="panelbar0" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected">Graph #0</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
            </li>
        </ul>
        <ul id="panelbar1" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected"> Graph #1</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
            </li>
        </ul>
        <ul id="panelbar2" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected"> Graph #2</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
        </ul>
        <ul id="panelbar3" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected"> Graph #3</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
            </li>
        </ul>
        <ul id="panelbar4" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected"> Graph #4</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
            </li>
        </ul>
        <ul id="panelbar5" class="ob-panel-bar">
            <li class="k-state-active">
                <span class="k-link k-state-selected"> Graph #5</span>
                <div><div>Hello, world!</div><div>Hello, world!</div><div>Hello, world!</div></div>
            </li>
        </ul>
    </div>
</div> 
```

以及以下用于初始化面板的 JavaScript：

```
$("#panelbar0").kendoPanelBar({
    expandMode: "multiple"
});
$("#panelbar1").kendoPanelBar({
    expandMode: "multiple"
});
$("#panelbar2").kendoPanelBar({
    expandMode: "multiple"
});
$("#panelbar3").kendoPanelBar({
    expandMode: "multiple"
});
$("#panelbar4").kendoPanelBar({
    expandMode: "multiple"
});
$("#panelbar5").kendoPanelBar({
    expandMode: "multiple"
}); 
```

您只需要添加：

```
$(".panel-container").kendoOBSortableGrid({
    hint: function (element) {
        return element.clone().addClass("ob-being-dragged");
    }
}); 
```

在这里查看演示：http: [//jsfiddle.net/OnaBai/WxUUL/](http://jsfiddle.net/OnaBai/WxUUL/)

# python - 如何将列表项分组为元组？

> ID：15266593
> 
> 赞同：4
> 
> 时间：2013-03-07T08:43:36.250
> 
> 标签：python, list, tuples

我有一个数字列表，如何将每个`n`数字分组为一个元组？

例如，如果我有一个列表`a = range(10)`，并且我想将每 5 个项目分组为一个元组，那么：

```
b = [(0,1,2,3,4),(5,6,7,8,9)] 
```

我怎样才能做到这一点？`len(a)`如果不是 的整数倍，我也想引发错误`n`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T08:46:31.207

```
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> [tuple(a[i:i+5]) for i in range(0, len(a), 5)]
[(0, 1, 2, 3, 4), (5, 6, 7, 8, 9)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:58:45.387

```
In [18]: def f(lst,n):    
    ...:     if len(lst)%n != 0:
    ...:         raise ValueError("{} is not a multiple of {}".format(len(lst),n))
    ...:     return zip(*[iter(lst)]*n)

In [19]: lst = range(10)

In [20]: f(lst,5)
Out[20]: [(0, 1, 2, 3, 4), (5, 6, 7, 8, 9)]

In [21]: f(range(9),5)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-21-814a68e0035f> in <module>()
----> 1 f(range(9),5)

<ipython-input-18-3ca911a04fd3> in f(lst, n)
      1 def f(lst,n):
      2     if len(lst)%n != 0:
----> 3         raise ValueError("{} is not a multiple of {}".format(len(lst),n))
      4     return zip(*[iter(lst)]*n)

ValueError: 9 is not a multiple of 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:09:15.650

确定 N 是您的组长度

```
if (len(your_list)%n==0):
    wish_list = [ tuple(your_list[i:i+N]) for i in range(0, len(your_list), N) ]
else:
    raise Exception("not divisible by N") 
```

# php - Prestashop 添加带有 ID 的类别

> ID：15266596
> 
> 赞同：1
> 
> 时间：2013-03-07T08:43:42.260
> 
> 标签：php, sql, prestashop

我在通过 php 脚本向 Prestashop 添加类别时遇到了小问题。一位好人帮助我添加类别的脚本：

```
$cat = new Category();
$cat->id = 301;
$cat->id_category = 301;
$cat->id_category_default = 301;
$cat->name = 'category name';
$cat->active = 1;
$cat->link_rewrite = Tools::link_rewrite($cat->name);
$cat->id_parent = Configuration::get('PS_HOME_CATEGORY');
$cat->add(); 
```

如您所见，用于设置类别 ID 的尝试 id、id_category 和 category_default，但它不起作用，因为在数据库中它填充 id auto_incrementaly。

如何使用自己的 ID 创建类别？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:26:27.080

是的，它不起作用，因为您正在通过调用 add 函数来使用 PS CRUD。如果要添加自己的自动递增值或 ID，则应编写自己的数据库插入查询。在最新的 PS 1.5.x 中很容易。如果您使用的是 PS 1.5.x，请按以下方式操作。

```
$data = array(
          'id_category' => 301,
          'active' => 1,
  ...... and so one with other no language fields 
```

)

之后调用插入函数

```
 Db::getInstance()->insert('category', $data); 
```

现在为语言数据插入创建另一个数组，如下所示

```
 $dataLang = array (

'id_category' => 301,
'id_lang' => 1,
'name' => 'my category',

 ..... and so on

); 
```

现在也像上面一样插入它

```
 Db::getInstance()->insert('category_lang', $dataLang); 
```

请注意，如果您使用多种语言，那么您必须在循环中为所有语言惰性语言数据，或者为每种语言插入它们而不使用循环，这对您来说很容易。

注意：以上代码未经测试，仅为示例代码。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T11:20:07.743

可以修改webservice的API。

您必须注释这行文件 WebserviceRequest.php

```
/*elseif ($this->method == 'POST' && count($ids) > 0)
{
    $this->setError(400, 'id is forbidden when adding a new resource', 91);
    return false;
}*/ 
```

# javascript - 在jQuery中替换HTML字符串中的属性

> ID：15266597
> 
> 赞同：1
> 
> 时间：2013-03-07T08:43:42.357
> 
> 标签：javascript, jquery

我有一个带有 HTML 的字符串。我想用数据类属性中的值（如果有的话）替换类属性。这应该仅适用于 HTML 的特定标签/部分。

我已经写了一些，但希望有一个指针来完成它：

```
html = "<div class='hello' data-class='class-name'>Content</div><div class='123'>Content</div><div data-class="class-111"></div>";

var html_out = $('<div/>').html(html).contents();

var final_html = $(html_out).find('[data-class]').attr('class', 'new-value'); 
```

所以上面应该返回：

```
<div class='class-name' data-class='class-name'>Content</div><div class='123'>Content</div><div class="class-111" data-class="class-111"></div> 
```

至于它是否维护数据类部分或将其删除，这并不重要。

关键是 HTML 字符串将包含 data-class 属性的使用，我需要用这个值覆盖 class 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:54:09.620

尝试

```
$('div[data-class]').attr('class', function() { return $(this).data('class') }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:48:22.033

好的，我想这就是你要找的 -

```
html_out.find('[data-class]').each(function() {
    this.attr('class', this.attr('data-class');
}) 
```

查看有关属性选择器和[attr 函数的](http://api.jquery.com/attr/)[jquery 文档](http://api.jquery.com/attribute-equals-selector/)。

# css - CSS3快速链接容器背景

> ID：15266598
> 
> 赞同：0
> 
> 时间：2013-03-07T08:43:56.300
> 
> 标签：css

我有以下用于快速链接容器的 CSS3 代码。我不知道为什么，但渐变背景不在文本下方。如果我删除`float: left`from `div.quicklinks`，我将显示渐变背景，但我想要一些文字在左边。谢谢

```
div.quickLinksContainer {
    clear:both;
    border-top: 1px solid #999999;
    text-align:center;
    margin: auto;
    width: 100%;
    padding: 10px;
    background-image: linear-gradient(bottom, rgb(179,175,176) 49%, rgb(237,237,237) 75%);
}
div.quickLinks {
    font-size: 12px;
    float:left;
}
.quickLinks h2 {
  color:#666666;
  font-size:14px;
  font-weight:bold;
  margin-bottom:10px;
}
.quickLinks li a {
  color:#555555;
  text-decoration:initial;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:14:01.350

背景不在内容背后的原因是因为

```
div.quickLinks {
    float:left;
} 
```

如果您宁愿将背景渐变直接放在里面`div.quickLinks`，它会起作用。

请参阅[此小提琴](http://jsfiddle.net/MADXd/)进行演示。

**编辑** 关于评论的背景：

当您浮动内容时，在这种情况下`quickLinksContainer`，父容器不知道内容有多大。因此，要使容器具有正确的大小，您必须指定它。例如像这样：

```
div.quickLinksContainer {
    height: 150px;
} 
```

查看[更新的小提琴](http://jsfiddle.net/MADXd/1/)

# extjs - Ext.data.Store getTotalCount() 加载后不计算

> ID：15266605
> 
> 赞同：3
> 
> 时间：2013-03-07T08:44:14.090
> 
> 标签：extjs, extjs4, store

调用时，我的商店并不总是返回正确数量的记录`getTotalCount()`。这个问题出现在我`load()`商店之后。我知道在检查时商店里有记录。
我正在使用 ExtJs 4.1.3

```
//this.grid = reference to my grid
var count = this.grid.getStore().getCount(), //50
    total = this.grid.getStore().getTotalCount(); //16000

    this.grid.getStore().load();

    count = this.grid.getStore().getCount(); //50
    total = this.grid.getStore().getTotalCount(); //0 
```

**如果 Store 包含所有数据，如何获取可以加载到 Store 中的记录数？**

* * *

我的商店配置。

```
store: Ext.create('Ext.data.Store', {
                model: me.modelName,
                remoteSort: true,
                remoteFilter: true,
                pageSize: 50,
                trailingBufferZone: 25,
                leadingBufferZone: 50,
                buffered: true,
                proxy: {
                    type: 'ajax',
                    actionMethods: { read: 'POST' },
                    api: {
                        read: me.urls.gridUrl
                    },
                    extraParams: Ext.applyIf({ FilterType: 0 }, me.urlParams.gridUrlParams),
                    simpleSortMode: true,
                    reader: {
                        type: 'json',
                        root: 'data',
                        totalProperty: 'total'
                    }
                },
                autoLoad: true
            }) 
```

我可以确认我`total`的所有请求都已发送该属性。

```
{
    "succes": true,
    "data": [
    //50 records
    ],
    "total": 16219,
    "errors": []
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T12:43:01.573

`Load`是异步的。当您调用它时，商店会删除总计数属性，并且当您在加载后到达两行时，服务器可能还没有返回更新属性：

```
this.grid.getStore().load();

// Server hasn't returned yet for these two lines.
count = this.grid.getStore().getCount();
total = this.grid.getStore().getTotalCount(); 
```

你真的应该写：

```
this.grid.getStore().load({
    scope: this,
    callback: function(records, operation, success) {
        count = this.getCount();
        total = this.getTotalCount();
    }
}); 
```

# c - 为什么时间在 IPC 的代码中打印相同

> ID：15266609
> 
> 赞同：1
> 
> 时间：2013-03-07T08:44:25.073
> 
> 标签：c, ipc

我写了一段代码来了解IPC和读、写功能的基础。由于读取功能是阻塞的，读取将等待数据被其他进程写入管道的另一端。我在父进程中的 write() 之前进行了睡眠调用。在 read() 之前和之后的子进程中，我已经打印了时间。

```
#include <stdio.h>

int main()
{
    int fd[2], err, pid;
    FILE *fp;
    char *buf;

    buf = malloc(12);
    fp = fopen("BE1.txt","w");
    err = pipe(fd);
    if(err == -1)
        printf("Error while creating pipe");
    pid = fork();
    if(pid == -1)
        printf("Error while creating process");
    if(pid == 0)
    {
        fprintf(fp,"before read %s\n", __TIME__);
        //    fflush(fp);
        read(fd[0], buf, 12);
        fprintf(fp,"%s\n", buf);
        //   fflush(fp);
        fprintf(fp,"after read %s\n", __TIME__);
    }
    else
    {
        sleep(50);
        write(fd[1], "this is it", 12);
    }
    fclose(fp);
    return 0;
} 
```

由于 read 处于阻塞模式，子进程应该在上面的代码中打印不同的时间。但它的打印时间与

# 输出：

```
before read 19:48:16
this is it
after read 19:48:16 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T08:47:59.387

`__TIME__`是一个预定义的`#define`宏，在编译时被评估，即当编译器看到 时`__TIME__`，他将用当前时间替换它。

gcc 文档说：

> `__TIME__`
> 
> 该宏扩展为一个字符串常量，描述预处理器运行的时间。字符串常量包含八个字符，看起来像`"23:59:01"`.
> 
> 如果 GCC 无法确定当前时间，它将发出警告消息（每次编译一次）并`__TIME__`扩展为`"??:??:??"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T08:48:25.620

```
__TIME__ 
```

定义编译时间！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T08:49:28.357

`__TIME__``__FILE__`与and一样`__LINE__`，是一个预处理器宏，可扩展至*预处理器运行*的时间（通常作为编译器的一部分）。所以，它是一个固定的字符串——你的代码最终会像这样编译

```
fprintf(fp,"after read %s\n", "19:49:16"); 
```

取决于您编译代码的确切时间。

要为操作计时，请`clock`改用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T08:51:16.407

添加到上述所有优秀答案：

如果你想打印时间，那么如何：

```
void printCurrentTime()
{
  time_t rawtime;
  struct tm * timeinfo;
  char buffer [80];

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );

  strftime (buffer,80,"%Y-%m-%d-%H-%M-%S",timeinfo);
  puts (buffer);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T08:52:17.773

如前所述，`__TIME__`在编译时而不是运行时进行评估。

如果你想要运行时的实际时间，你需要使用类似的东西： -

```
 time_t t;
 time(&t);
 printf("%s", ctime(&t)); 
```

还有其他打印时间的方法和获取不同格式的方法。

PS。您需要包含 time.h

# iphone - UIImage 奇怪的缩放比例

> ID：15266610
> 
> 赞同：0
> 
> 时间：2013-03-07T08:44:32.990
> 
> 标签：iphone, ios, objective-c, uiimage

我有一些文件大小（例如 1000x1000）。

我想加载它并使它变小

```
UIImage *newImage = [UIImage imageWithCGImage:[UIImage imageWithContentsOfFile:filename].CGImage scale:(1.0f / scale) orientation:UIImageOrientationUp];
NSLog(newImage size: %f, %f", newImage.size.width, newImage.size.height);
// shows correct scaled size -> 50, 50 
```

然后我想保存这个缩放的图像

```
NSData* imageData = UIImageJPEGRepresentation(newImage, 1.0);
[imageData writeToFile:otherFileName atomically:NO]; 
```

我很困惑地看到新图像是以第一个起始尺寸（1000x1000）保存的。

这怎么可能，该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:51:27.707

只需制作一种方法：

```
-(UIImage *)scaleImage:(UIImage *)image toSize:(CGSize)newSize {

    float width = newSize.width;
    float height = newSize.height;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect: CGRectMake(0, 0, width, height)];

    UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return smallImage;
} 
```

并像这样设置您需要的大小：

```
UIImage *resizedImg = [self scaleImage:[UIImage imageWithData:imageData] toSize:CGSizeMake(150.0f,150.0f)]; // i have taken 150 you can change value here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:49:15.173

您可以使用波纹管方法创建具有较小尺寸的图像而没有划痕图像：-

您可以调用以下方法：-

```
newImage=[self scaleImage:newImage toSize:CGSizeMake(250, 250)];

- (UIImage*) scaleImage:(UIImage*)image toSize:(CGSize)newSize {
    CGSize scaledSize = newSize;
    float scaleFactor = 2.0;
    if( image.size.width > image.size.height ) {
        scaleFactor = image.size.width / image.size.height;
        scaledSize.width = newSize.width;
        scaledSize.height = newSize.height / scaleFactor;
    }
    else {
        scaleFactor = image.size.height / image.size.width;
        scaledSize.height = newSize.height;
        scaledSize.width = newSize.width / scaleFactor;
    }

    UIGraphicsBeginImageContextWithOptions( scaledSize, NO, 0.0 );
    CGRect scaledImageRect = CGRectMake( 0.0, 0.0, scaledSize.width, scaledSize.height );
    [image drawInRect:scaledImageRect];
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return scaledImage;
} 
```

# android - Android 9 补丁图像的奇怪行为

> ID：15266614
> 
> 赞同：0
> 
> 时间：2013-03-07T08:45:00.377
> 
> 标签：android, nine-patch

我正在为此开发一个聊天应用程序，我正在使用 9 补丁泡泡

在屏幕上显示气泡的功能

```
 static void showMessage(String message, boolean leftSide) 
    {
        Log.d("abc","show");
        final TextView textView = new TextView(activity);
        textView.setTextColor(Color.BLACK);
        textView.setText(message);

        int bgRes = R.drawable.left_message_bg;

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);

        if (!leftSide) 
        {
            bgRes = R.drawable.right_message_bg;
            params.gravity = Gravity.RIGHT;

        }

        textView.setLayoutParams(params);

        textView.setBackgroundResource(bgRes);

         messagesContainer.addView(textView);

                // Scroll to bottom
         if (scrollContainer.getChildAt(0) != null) 
                  {

                    scrollContainer.scrollTo(scrollContainer.getScrollX(), scrollContainer.getChildAt(0).getHeight());

               }

                scrollContainer.fullScroll(View.FOCUS_DOWN);

            } 
```

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>

<EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/messageEdit"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:autoText="true"
        android:hint="message text"
        android:layout_alignParentRight="false"
        android:layout_toLeftOf="@+id/sendButton"
        android:layout_marginRight="10dp"/>
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send"
        android:id="@+id/sendButton"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"/>

<ScrollView
        android:id="@+id/scrollContainer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="false"
        android:layout_alignParentTop="false"
        android:layout_marginBottom="20dp" android:layout_above="@+id/messageEdit"
        android:layout_below="@+id/meLabel" android:layout_marginTop="10dp">
    <LinearLayout
            android:id="@+id/messagesContainer"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
    </LinearLayout>
</ScrollView>
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/headerforchat"
        android:text="Me"
        android:id="@+id/meLabel" android:layout_gravity="left|center_vertical" android:singleLine="false"
        android:textSize="20dp"/>
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/headerforchat"
        android:text="Friend"
        android:id="@+id/friendLabel" android:layout_alignParentRight="true" android:textSize="20dp"/>

</RelativeLayout> 
```

但是在 android 2.3 上测试时会出现奇怪的行为。它在三星 Glaxy S3 中看起来不错

![Glaxy s3 结果](../Images/87a4282f7395da1f099974411e77a579.png)

![在此处输入图像描述](../Images/7c5745dd02cef55fdb4bbf89066c1193.png)

第一张是 Galaxy S3 截图。第二个 Android 2.3 屏幕截图。蓝色气泡在 android 2.3 中显示很奇怪

```
left_message_bg-->The orange bubble which will display after sending message

right_message_bg-->The blue bubble which will display after receiving message 
```

9 个补丁图像

![在此处输入图像描述](../Images/453787b00af2e035111e5859ab4bead6.png) ![在此处输入图像描述](../Images/1049697aafbe56324d7a137232ccfca4.png)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:48:58.803

我的猜测是您只将 9-patch 放在了一个可绘制文件夹 ( `drawable-xhdpi`) 中。当放置在*不是*xhdpi 的设备上时，它会按比例缩小（包括定义的外部黑色像素）并且不再能够被解释为 9-patch，因此它会失败。制作缩放的 mdpi 和 hdpi 版本，或将其放入`drawable-nodpi`.

# javascript - 如何使垂直框中内容框的高度大于按钮的实际大小

> ID：15266615
> 
> 赞同：0
> 
> 时间：2013-03-07T08:45:07.190
> 
> 标签：javascript, jquery, html, css, height

我怎样才能使我的垂直标签的内容框是动态的，并且他的高度与按钮一样长，或者更大是有更多的内容？这是算法[JSFIDDLE CLICK](http://jsfiddle.net/2jryD/)

html

```
<body>
<div id="wrapper">
    <h1>Vertical Tabs</h1>

    <!-- Text Example -->
    <div class="verticalslider" id="textExample">
        <ul class="verticalslider_tabs">
            <li><a href="#">Lorem Ipsum</a></li>
            <li><a href="#">Praesent Pulvinar</a></li>
            <li><a href="#">Nunc Adipiscing</a></li>
            <li><a href="#">Praesent Dapibus</a></li>                        
        </ul>
        <ul class="verticalslider_contents">
            <li>
            <h2>Lorem Ipsum</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut accumsan placerat bibendum. Etiam ut nunc sed purus tempus varius. Donec id magna massa, posuere consectetur neque. Mauris tortor lacus, iaculis a pulvinar luctus, lobortis vel velit. In elementum lorem eu felis fermentum placerat et sit amet ligula. Integer euismod augue eu massa tincidunt consectetur. Suspendisse potenti. Donec in enim sollicitudin enim dignissim imperdiet ut et dolor. Phasellus nec risus vel nunc hendrerit auctor. Sed rhoncus sapien at nisl aliquam luctus. </p>
            <h2>Overflow Content</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut accumsan placerat bibendum. Etiam ut nunc sed purus tempus varius. Donec id magna massa, posuere consectetur neque. Mauris tortor lacus, iaculis a pulvinar luctus, lobortis vel velit. In elementum lorem eu felis fermentum placerat et sit amet ligula. Integer euismod augue eu massa tincidunt consectetur. Suspendisse potenti. Donec in enim sollicitudin enim dignissim imperdiet ut et dolor. Phasellus nec risus vel nunc hendrerit auctor. Sed rhoncus sapien at nisl aliquam luctus. </p>            </li>
            <li>
            <h2>Praesent Pulvinar</h2>
            <p>Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo. Vestibulum et rhoncus tellus. Curabitur mauris enim, vehicula sit amet euismod a, eleifend at dui. Vivamus sollicitudin, nunc pharetra porttitor lobortis, felis odio hendrerit mi, id ultricies urna enim quis lectus. Suspendisse convallis ipsum egestas velit fermentum ac volutpat dui dictum. Pellentesque sed ultrices justo. Ut lacus odio, porttitor quis tincidunt at, imperdiet vel eros. Duis ac velit neque. Integer semper egestas odio id suscipit. Maecenas eu diam in urna fringilla viverra eget sit amet ipsum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p></li>
            <li>
            <h2>Nunc Adipiscing</h2>
            <p>Nunc adipiscing purus id orci rutrum placerat. Nam posuere elementum ipsum quis faucibus. Fusce fermentum turpis ac erat mollis sit amet varius mi placerat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut ante justo, varius quis dignissim nec, condimentum in dui. Nulla sed lectus eu nunc vehicula vulputate vel nec velit. Integer eu purus nunc. Donec odio augue, sagittis pellentesque adipiscing id, dignissim vel enim. Maecenas a risus est.</p></li>
            <li>
            <h2>Praesent Dapibus</h2>
            <p>Praesent dapibus metus vitae velit blandit tempor. Donec dignissim tempus neque, a vestibulum massa aliquam sed. Vestibulum velit quam, facilisis vel pharetra nec, bibendum eget mauris. In vitae ligula ac justo varius ullamcorper. Nullam vitae urna eu metus pellentesque vehicula vel sit amet nibh. Cras nec velit dictum neque imperdiet congue in nec eros. Suspendisse ante felis, eleifend sed pellentesque id, sagittis ut magna. .</p></li>                        
        </ul>
    </div> 
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:56:01.853

我这样做的方法是首先从 中删除 230px 宽度`.verticalslider_tabs a:link, .verticalslider_tabs a:visited`，然后修改`display`列表项以显示为`table`：

```
.verticalslider_tabs li{ display:table; } 
```

[JSFiddle 示例](http://jsfiddle.net/2jryD/2/)。

要修复边框，您还需要将以下内容添加到链接中（因为这就是您拥有当前边框的内容）：

```
border-bottom: 1px solid #666;
margin-bottom: -1px; 
```

# android - 旋转后webview调整大小

> ID：15266617
> 
> 赞同：0
> 
> 时间：2013-03-07T08:45:09.613
> 
> 标签：android, webview

我在屏幕的一半大小上有 webview。如果设备在内容下旋转到水平位置，由于内容调整大小而出现空闲空间，但 webview 占据屏幕的一半以上，并且不会与文本一起调整大小。如何调整 webview 的大小？

UPD。感谢你所做的一切！问题是因为我在清单文件中使用了偏好：android:configChanges="orientation"。如果关闭此选项，webview 会自动调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:06:52.260

将此代码用于**webview**以适合您的布局位置。

```
 ourBrow.getSettings().setBuiltInZoomControls(true);
    this.ourBrow.getSettings().setLoadWithOverviewMode(false);
    this.ourBrow.getSettings().setUseWideViewPort(false); 
```

# javascript - 在jquery find中转义括号

> ID：15266618
> 
> 赞同：0
> 
> 时间：2013-03-07T08:45:10.007
> 
> 标签：javascript, jquery

这是我所拥有的：

```
item.find('div:contains(' + name + ')') 
```

但是，在某些情况下，名称包含括号。在一种情况下，名称具有以下值：

```
"brown (ok xl (1))" 
```

并且 item.find('div:contains(' + name + ')') 不起作用。括号是问题所在。如何逃脱他们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:54:38.333

To use any of the meta-characters `( such as !"#$%&'()*+,./:;<=>?@[\]^'{|}~)` as a literal part of a name, it must be escaped with with two backslashes: `\\` For example, an element with `id="foo.bar"`, can use the selector `$("#foo\\.bar")`.

Here is a function to escape special characters and return a valid jQuery selector. Pass your string to this function before use:

```
function jqSelector(str)
{
    return str.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, '\\$1');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:52:43.000

几天前我遇到了同样的问题，但由于某些奇怪的原因@Zeta 的解决方案对我不起作用，所以我想出了

```
name = name.replace(/(\(|\)).*/g,"");
item.find("div:contains(" + name +")"); 
```

它并不完美，但它有效:)

**编辑**

更好的正则表达式：

```
name = "(d)test thingie(assaf)(asdads".replace(/\(([^\)])*\)/g,"$1 ").replace(/\(|\)(.)*/g,"$1 "); 
```

如果您想消除括号之间的所有内容，以便包含您可以使用的工作：

```
name = "(d)test thingie(assaf)(asdads".replace(/\(([^\)])*\)/g,"").replace(/\(|\)(.)*/g,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:47:41.250

> 与属性值选择器一样，:contains() 括号内的文本可以写成裸词或用引号括起来。[（来源）](http://api.jquery.com/contains-selector/)

所以简单地使用

```
item.find('div:contains(\'' + name + '\')')
/* or */
item.find('div:contains("' + name + '")') 
```

`name`请注意，如果有任何引号，则需要转义其中的其他引号。

# c# - 在文件提取期间，while 循环永远不会结束

> ID：15266632
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:13.910
> 
> 标签：c#, asp.net, file-io, extraction

我正在提取文档并以 txt 文件格式存储所有数据。对于提取，我使用[http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files](http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files)这个库。对于文档提取，我使用以下代码：

```
public static  void ExtractDocument()
    {
        List<string>  lstFiles= new List<string>();
        lstFiles.Add("123.txt");
        lstFiles.Add("123.doc");
        lstFiles.Add("123.docx");
        foreach (var fileName in lstFiles)
        {
            string newFileName = Path.Combine("D://extractFiles//downloadPath", fileName);
            string outputFilefiname = "D://extractFiles//vij.txt";
            using (var target = new FilterReader(newFileName, 0x1000))
            {
                target.Init();
                const int blockSize = 1024;
                var buffer = new Char[blockSize];
                var readblockBufferSize = target.ReadBlock(buffer, 0, blockSize);
                while (readblockBufferSize > 0)
                {
                    if (buffer[0] != '\0')
                    {
                        using (var writer = new StreamWriter(outputFilefiname, true))
                        {
                            writer.Write(buffer, 0, readblockBufferSize);
                        }
                        readblockBufferSize = target.ReadBlock(buffer, 0, blockSize);
                    }
                    else
                    {
                        readblockBufferSize = readblockBufferSize - 1; --"may be due to this Line I have lost data"
                    }
                }
            }
            // Write Delimete.  
            using (StreamWriter sWriter = new StreamWriter(outputFilefiname, true))
            {
                sWriter.WriteLine(string.Format("{0} 1111111111--2222222222-333333333-444444444-555555555 {0}", Environment.NewLine));
            }
        }
    } 
```

在这个方法中提取工作正常，但我在提取过程中丢失了一些数据

`else { readblockBufferSize = readblockBufferSize - 1; --"may be due to this Line I have lost data" }`

但是当我使用下面的代码进行提取时：

```
public static void ExtractDocument()
    {
        List<string> lstFiles = new List<string>();
        lstFiles.Add("123.txt");
        lstFiles.Add("123.doc");
        lstFiles.Add("123.docx");
        foreach (var fileName in lstFiles)
        {
            string newFileName = Path.Combine("D://extractFiles//downloadPath", fileName);
            string outputFilefiname = "D://extractFiles//vij.txt";
            using (var target = new FilterReader(newFileName, 0x1000))
            {
                target.Init();
                const int blockSize = 1024;
                var buffer = new Char[blockSize];
                var readblockBufferSize = target.ReadBlock(buffer, 0, blockSize);
                while (target.ReadBlock(buffer, 0, blockSize) > 0)
                {
                    if (buffer[0] != '\0')
                    {
                        using (var writer = new StreamWriter(outputFilefiname, true))
                        {
                            writer.Write(buffer, 0, readblockBufferSize);
                        }
                    }
                }
            }
            // Write Delimete.  
            using (StreamWriter sWriter = new StreamWriter(outputFilefiname, true))
            {
                sWriter.WriteLine(string.Format("{0} 1111111111--2222222222-333333333-444444444-555555555 {0}", Environment.NewLine));
            }
        }
    } 
```

在这种情况下，While 循环永远不会结束（无限循环）。我无法分析我在哪里做错了。

**更新方法**

```
 public ResponseOutput ExtractFile(string outputFilefiname,string downloadedFileLocation,List<string> lstfiles)
    {
       var responseOutput = new ResponseOutput();
       responseOutput.IsSuccessful = false;
       int filescount = 0;
       if (!Directory.Exists(downloadedFileLocation) || string.IsNullOrWhiteSpace(downloadedFileLocation))
       {
           return responseOutput;
       }
       try
       {
           foreach (var fileName in lstfiles)
           {
               responseOutput = new ResponseOutput();
               responseOutput.IsSuccessful = false;
               string finalExtractedFile = Path.Combine(downloadedFileLocation, fileName);
               using (var target = new FilterReader(finalExtractedFile, 0x1000))
               {
                   target.Init();
                   var buffer = new Char[1024];
                   int blockSize = buffer.Length;
                   int readBlockBufferSize = 0;
                   while ((readBlockBufferSize = target.ReadBlock(buffer, 0, blockSize)) > 0)
                   {
                       if (buffer[0] != '\0')
                       {
                           using (var writer = new StreamWriter(outputFilefiname, true))
                           {
                               writer.Write(buffer, 0, readBlockBufferSize);
                           }
                       }
                   }
                   filescount = filescount + 1;
                   if (filescount != lstfiles.Count)
                   {
                       using (StreamWriter sWriter = new StreamWriter(outputFilefiname, true))
                       {
                           sWriter.WriteLine(string.Format("{0} {1} {0}", Environment.NewLine, FileSepratorDelimiter));
                       }
                   }
               }
               if(File.Exists(finalExtractedFile))
               {
                   //File.Delete(finalExtractedFile);
               }
           }
       }
       catch (Exception ex)
       {
         //
       }
        return responseOutput;
    } 
```

请建议我在哪里做错了，或者我需要做什么来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:45:53.453

问题在于这段代码：

```
var readblockBufferSize = target.ReadBlock(buffer, 0, blockSize);
while (target.ReadBlock(buffer, 0, blockSize) > 0)
{
    ....
} 
```

在第一行中，您正在读取一个块并将大小存储在`readBlockBufferSize`. 然后你*再次*阅读（这会丢弃第一次阅读的缓冲区内容），但你*不* 更新`readBlockBuffersize`.

代码应如下所示：

```
int readBlockBufferSize = 0;
while ((readBlockBufferSize = target.ReadBlock(buffer, 0, blockSize)) > 0)
{
   if (buffer[0] != '\0')
   {
       using (var writer = new StreamWriter(outputFilefiname, true))
       {
           writer.Write(buffer, 0, readblockBufferSize);
       }
   }
} 
```

# java - Java 框架在 while 循环期间无法正确显示

> ID：15266634
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:22.417
> 
> 标签：java, swing, netbeans, concurrency, jframe

这是我在使用 jFrame 时遇到的一个严重问题。我有一个“主框架”，一切都在其中完成，但是我有另一个框架，其中有一个 gif 图像（正在加载，那个圆圈转来转去），用作启动画面，上面写着“正在处理，请稍候” ，但是当我拉过那个框架并且我的while循环运行时，框架变为空白，直到循环之后才显示任何内容。

我假设这是由于 while 循环消耗计算机资源并“阻止”任何其他进程运行。

请告知我应该怎么做。

声明新框架的代码是标准的，但无论如何我都会在下面发布。

```
Processing nc = new Processing();
nc.setVisible(true); 
```

这是我的完整代码，因此您可以看到我试图实现的目标：

第 1 帧的代码（Excel 提取器）：

```
Processing nc = new Processing();
    nc.setVisible(true);

    JFileChooser chooser = new JFileChooser();
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    int option = chooser.showOpenDialog(this); // parentComponent must a component like JFrame, JDialog...
    if (option == JFileChooser.APPROVE_OPTION) {
    File selectedFile = chooser.getSelectedFile();
     directory = selectedFile.getAbsolutePath();
     System.out.println(directory);

    }

   //create a input stream for your excel file from which data will be read. 
   DateFormat dateFormat = new SimpleDateFormat("yyyy_MM_dd");
   SimpleDateFormat sdf = new SimpleDateFormat("HHmmss");
   String curdate = dateFormat.format(new Date());
   Calendar cal = Calendar.getInstance();
   cal.getTime();
   String curtime = sdf.format(cal.getTime());
try{

FileInputStream excelSheetInput = new FileInputStream(path);
//POIFSFileSystem myFileSystem = new POIFSFileSystem(excelSheetInput);
    XSSFWorkbook myWorkBook = new XSSFWorkbook(excelSheetInput);
    //get first work sheet in your excel file.
    Sheet sheet = myWorkBook.getSheetAt(0);
    //we will read data in first rows(0) second column(1)
    Iterator<Row> rowIterator = sheet.iterator();
    Row myRow1 = sheet.getRow(0);
    Cell myCell1 = myRow1.getCell(0);
    String header="";
    Iterator<Cell> cellIterator1 = myRow1.cellIterator();
    int rowCount = 0;

    while(cellIterator1.hasNext()) {

                            Cell cell1 = cellIterator1.next();

                            switch(cell1.getCellType()) {
                                case Cell.CELL_TYPE_BOOLEAN:
                                    header = header + "\""+cell1.getBooleanCellValue()+"\"" + ",";
                                    break;
                                case Cell.CELL_TYPE_NUMERIC:
                                    cell1.setCellType(Cell.CELL_TYPE_STRING);
                                     header = header + "\""+cell1.getStringCellValue()+"\""+",";
                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_STRING:
                                    header = header + "\""+cell1.getStringCellValue()+"\""+",";
                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    break;
                            }
    }

    Row myRow = sheet.getRow(1);
    Cell myCell= myRow.getCell(0);
    Iterator<Cell> cellIterator;
    String firstCell = myCell.getStringCellValue();
    int count =1;
    String nextCell;
    String Matter = "Matter Number: "+firstCell;
    String num = firstCell;
    System.out.println(Matter);
    fWriter = new FileWriter(new File(directory, num+"_"+curdate+"_"+curtime+".csv"));
    writer = new BufferedWriter(fWriter);
    writer.write(Matter);
    writer.newLine();
    writer.write(header);
    writer.newLine();
    String temp;
    while(rowIterator.hasNext())
    {

        //temp = "" + rowCount;
        //jLabel5.setText(temp);
        myRow = sheet.getRow(count);
        cellIterator = myRow.cellIterator();
        Cell myCell2 = myRow.getCell(0);
        nextCell= myCell2.getStringCellValue();

        if(nextCell.equals(firstCell))
        {

            while(cellIterator.hasNext()) {

                            Cell cell = cellIterator.next();

                            switch(cell.getCellType()) {
                                case Cell.CELL_TYPE_BOOLEAN:
                                    System.out.print(cell.getBooleanCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_NUMERIC:
                                    cell.setCellType(Cell.CELL_TYPE_STRING);

                                     System.out.print(cell.getStringCellValue()+",");

                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+",");
                                    break;
                                case Cell.CELL_TYPE_STRING:
                                    System.out.print(cell.getStringCellValue()+",");
                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+",");
                                    break;
                            }
                        }
            System.out.println();
            writer.newLine();
            count++;
            rowCount++;

        }
        else
        {          

            writer.close();
            myRow = sheet.getRow(count);
            myCell2= myRow.getCell(0);
            nextCell=myCell2.getStringCellValue();
            firstCell=nextCell;
            Matter = "Matter Number: "+firstCell;
            num = firstCell;
            System.out.println(Matter);
            fWriter = new FileWriter(new File(directory, num+"_"+curdate+"_"+curtime+".csv"));
            writer = new BufferedWriter(fWriter);
            writer.write(Matter);
            writer.newLine();
            writer.write(header);
            writer.newLine();
        }

    }
}
catch (Exception e)
{
}

  try {
    nc.dispose();
    writer.close();
} catch (IOException ex) {
    Logger.getLogger(FileChooser.class.getName()).log(Level.SEVERE, null, ex);
}
} 
```

第二帧代码（Processing）：

```
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel1.setText("Processing, Please Wait...");

    jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/loading.gif"))); // NOI18N

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jLabel2)
            .addContainerGap())
    );

    pack();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:16:01.197

在不知道您尝试做的全部范围的情况下，您不可能完全得到准确的答案。

从您尝试在事件调度线程的上下文中运行长时间运行的任务的声音来看。除其他外，该线程负责处理重绘请求。

阻塞这个线程，防止 Swing 重新绘制自己。

据我所知，您想使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。这将允许您在后台线程中执行您的工作，同时将更新重新同步回 EDT

**更新了示例**

我知道你说不“想要”使用 a `SwingWorker`，但老实说，它只是更简单、更安全......

![在此处输入图像描述](../Images/1bcdb2afde8a39c5bf9cb7f8967ee1ad.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class LongRunningTask {

    public static void main(String[] args) {
        new LongRunningTask();
    }

    public LongRunningTask() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                new BackgroundWorker().start();

            }
        });
    }

    public class BackgroundWorker extends SwingWorker<Object, Object> {

        private JFrame frame;

        public BackgroundWorker() {
        }

        // Cause exeute is final :P
        public void start() {
            ImageIcon icon = new ImageIcon(getClass().getResource("/spinner.gif"));
            JLabel label = new JLabel("This might take some time");
            label.setIcon(icon);

            frame = new JFrame("Testing");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new GridBagLayout());
            frame.add(label);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);

            execute();
        }

        @Override
        protected Object doInBackground() throws Exception {

            System.out.println("Working hard...");
            Thread.sleep(1000 + (((int)Math.round(Math.random() * 5)) * 1000));
            System.out.println("Or hardly working...");

            return null;

        }

        @Override
        protected void done() {
            frame.dispose();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T09:05:05.013

您使用 java.util 包中的 Timer 类并安排 timertask 在一段时间（例如 2 分钟）或任务完成后关闭启动屏幕。

```
 final Processing nc = new Processing();
 nc.setVisible(true);
 Timer timer = new Timer():
 TimerTask task = new TimerTask() {
      public void run() { 
          nc.setVisible( false );
          // to do disposing nc
      }
 };
 timer.schedule( task, 1000 * 3 ); // dispose the processing frame after 3 minutes 
```

# php - 有什么方法可以将我的数据库表中的数据与系统中的excel文件进 行比较

> ID：15266635
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:23.373
> 
> 标签：php

我正在制作一个系统，我们可以在其中读取 excel 、csv 格式的文件。并且有国家代码和城市代码之类的列，国家只有一个值，城市可以用逗号分隔，如

国家代码 CityCode

230 91、92、01-03、1-3

我的数据库中有很多这样的行。我的最终输出应该是

最终代码 CountryCode 城市代码

23091 230 91

23092 230 92

23001 230 01

23002 230 02

23003 230 03

2301 230 1

2302 230 2

2303 230 3

**我得到了像上面这样的正确输出。并将上传的文件移动到我服务器上的目录中。**

我正在使用 [http://phpexcel.codeplex.com/上给出的库](http://phpexcel.codeplex.com/)

**我正在使用这个函数来获取像 01-03 和 1-3 这样的代码范围如下**

```
function getRangeOfCodes($mystring)

    {

                     $findme   = '-';

         $pos = strpos($mystring, $findme);

         if($pos === false)
         {
             $length   = strlen($mystring);
             $range    = range(preg_replace("/[^0-9]+/", "",$mystring),preg_replace("/[^0-9]+/", "",$mystring));
         }
         else
         {
             $ct       = explode("-",$mystring);
             $length   = strlen($ct[0]);
             $range    = range(preg_replace("/[^0-9]+/", "",$ct[0]), preg_replace("/[^0-9]+/", "",$ct[1]));
         }

         $result['range']  = $range;
         $result['length'] = $length;
         return $result;
    } 
```

**错误地我在文件中进行了更改并且忘记修剪代码并且带有空格的城市代码被读取为**

最终代码 CountryCode 城市代码

23091 230 91

230092 230 092

230001 230 001

230002 230 002

230003 230 003

23001 230 01

23002 230 02

23003 230 03

那么有什么办法可以在从数据库下载这些代码时，通过给出路径将其与目录中上传的表格进行比较，这样如果城市代码与国家代码对应的城市代码不匹配，那么我可以为此显示错误。

**可能是我在问一个错误或不可行的问题。但我想确定我的输出。因此，如果可能的话，任何人都可以帮助我，那么我应该采用什么标准方法来做到这一点。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:54:46.697

IMO 解决问题是可能的，但方法错误。如果您可以阅读excel，那么您可以直接从中输出。那为什么要放到数据库里呢？其次，您的数据库表未标准化。

如果您有 excel 表，请正确上传。双重检查是不值得的。

# download - WiX ExePackage：无法向 URL 发送请求

> ID：15266638
> 
> 赞同：2
> 
> 时间：2013-03-07T08:46:31.967
> 
> 标签：download, wix, burn

使用 WiX Burn v3.7.1224，我无法通过 ExePackage 获取远程有效负载。我通常会成功使用类似的 ExePackage 元素，所以我认为问题可能与我尝试下载的特定 URL 有关。

这个特定的“exe URL”是[http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe](http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe)

准确地说：交互式页面位于[http://code.google.com/p/tesseract-ocr/downloads/detail?name=tesseract-ocr-setup-3.02.02.exe](http://code.google.com/p/tesseract-ocr/downloads/detail?name=tesseract-ocr-setup-3.02.02.exe)并点击下载锚点“似乎”会导致上面列出的直接“exe URL”。我说“似乎”是因为我必须深入页面源代码才能找出最终的“exe URL”，这可能是个问题。

这是感兴趣的 WiX 片段：

```
<Fragment>
    <util:RegistrySearch Id="TesseractLookup"
                         Variable="TESSERACT_REGVALUE"
                         Root="HKLM"
                         Key="SOFTWARE\Tesseract-OCR" 
                         Value="CurrentVersion" />   

    <PackageGroup Id="Tesseract">
        <ExePackage Compressed="no" 
                    PerMachine="yes" 
                    Permanent="yes" 
                    Vital="yes" 
                    Name="redist\tesseract-ocr-setup-3.02.02.exe"                    
                    InstallCondition="NOT TESSERACT_REGVALUE"
                    DetectCondition="TESSERACT_REGVALUE"
                    DownloadUrl="http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe">

            <RemotePayload Description="Tesseract-OCR - open source OCR engine" 
                           Hash="35C61604AAAC961C24CD28F959566B2E39244541" 
                           ProductName="Tesseract-OCR" 
                           Size="13525781"
                           Version="3.02.02.0" />
        </ExePackage>
    </PackageGroup>        
</Fragment> 
```

我在几秒钟内就成功使用了我尝试过的浏览器（Firefox 和 Internet Explorer）以及一个基本的“wget”命令。但是Burn失败了。所有这些都提供了相同的“exe URL”。为了以防万一，我什至尝试禁用防火墙和防病毒软件，但无济于事。

你对可能发生的事情有任何暗示吗？

以下是安装日志中的相关行：

```
[27F8:1FE8][2013-03-07T08:36:46]w343: Prompt for source of package: tesseract_ocr_setup_3.02.02.exe, payload: tesseract_ocr_setup_3.02.02.exe, path: D:\soft\audiveris\dist\redist\tesseract-ocr-setup-3.02.02.exe
[27F8:1FE8][2013-03-07T08:36:46]i338: Acquiring package: tesseract_ocr_setup_3.02.02.exe, payload: tesseract_ocr_setup_3.02.02.exe, download from: http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe
[27F8:1FE8][2013-03-07T08:36:47]e000: Error 0x80070002: Failed to send request to URL: http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe
[27F8:1FE8][2013-03-07T08:36:47]e000: Error 0x80070002: Failed to connect to URL: http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe
[27F8:1FE8][2013-03-07T08:36:47]e000: Error 0x80070002: Failed to get size and time for URL: http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe
[27F8:1FE8][2013-03-07T08:36:47]e000: Error 0x80070002: Failed attempt to download URL: 'http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe' to: 'C:\Users\herve\AppData\Local\Temp\{7715fbb6-5bc5-442f-86a0-655fa082bd7d}\tesseract_ocr_setup_3.02.02.exe'
[27F8:1FE8][2013-03-07T08:36:47]e000: Error 0x80070002: Failed to acquire payload from: 'http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe' to working path: 'C:\Users\herve\AppData\Local\Temp\{7715fbb6-5bc5-442f-86a0-655fa082bd7d}\tesseract_ocr_setup_3.02.02.exe' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:13:47.340

根据 Rob 的建议（谢谢！），我安装并使用 Fiddler 进行了调查。HTTP 请求实际上是一个 HEAD 请求，服务器返回 404。

我从另一个站点提取了另一个软件，仍然使用 Burn，以发现 Fiddler 应该看到的内容：它是一个 HEAD 请求，然后是一个 GET 请求。这是有道理的：据我所知，HEAD 类似于 GET，但没有返回内容，主要用于在启动实际传输之前进行调整。

然后，回到 Tesseract 站点，我用 Fiddler 伪造了一个全新的 HEAD 请求，如下所示：

```
HEAD http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe HTTP/1.1
Accept: */*
User-Agent: Burn
Host: tesseract-ocr.googlecode.com
Connection: Keep-Alive
Pragma: no-cache 
```

响应是：“HTTP/1.1 404 Not Found”（就像对初始刻录请求的响应一样）

然后我伪造了一个 GET 请求（只是将“HEAD”替换为“GET”）：

```
GET http://tesseract-ocr.googlecode.com/files/tesseract-ocr-setup-3.02.02.exe HTTP/1.1
Accept: */*
User-Agent: Burn
Host: tesseract-ocr.googlecode.com
Connection: Keep-Alive
Pragma: no-cache 
```

而这一次，我得到了：“HTTP/1.1 200 OK”，然后是 13525781 字节的内容...... BINGO！

所以现在，我们剩下：

1.  服务器如何响应 404 HEAD 请求但正确响应类似的 GET 请求？

2.  如果 Tesseract Google 站点在 HEAD 请求方面存在问题，有没有办法告诉 Burn 跳过 HEAD 请求并直接处理 GET 请求？

3.  还有其他修复吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T15:09:30.487

这是一个已知问题，应该在 v4.0 中得到修复 - [https://github.com/wixtoolset/issues/issues/6331](https://github.com/wixtoolset/issues/issues/6331)。

# c# - 如何在 WP7 中旋转网格

> ID：15266640
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:36.740
> 
> 标签：c#, silverlight, windows-phone-7, xaml

在我的 WP7 应用程序中，我想将网格旋转一些度数。页面方向改变时是否可以反向旋转。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:01:43.713

旋转网格

```
 <Grid RenderTransformOrigin="0.5,0.5" >
    <Grid.RenderTransform>
        <CompositeTransform Rotation="180"/>
    </Grid.RenderTransform>
 </Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:44:08.593

您也可以在设计区域中旋转它，方法是单击角并在获得弯曲箭头符号后旋转。

# regex - 在自由文本中查找字符模式的正则表达式

> ID：15266641
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:38.797
> 
> 标签：regex

我有一个解析文件并将它们转换为 XML 的应用程序。应用程序中的处理模块之一使用正则表达式来查找自由文本中的模式。我正在尝试识别 2 种模式，但不是很成功。

模式 1：2 个字母（不包括元音）后跟 2 个数字 (1-9)，然后是 2 个字母（不包括元音），然后再定义 2 个字母（例如：WP、NL、GP、EC 等）。每个组之间可能有也可能没有空格。

例子：

```
BQ 12 RT WP
BQ12RTGP
BQ12RT GP 
```

模式 2：3 个字母 (az) 后跟 3 个数字 (1-9)，后跟 2 个已定义的字母（例如：WP、NL、GP、EC 等）。每个组之间可能有也可能没有空格。

例子：

```
ABC 123 GP
ABC123GP
ABC123 GP 
```

这是在文本中查找特定单词的正则表达式示例：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T09:28:59.563

由于您显然对正则表达式没有太多经验，因此我将在这里解释很多。

首先是一点背景：正则表达式有标记和量词。标记是匹配某物的事物，例如`A`与拉丁大写字母 A 匹配的标记。量词通过放置在标记之后来应用于标记，并修改该标记可以连续匹配的频率，例如`+`是一个量词，以便前面的标记匹配至少一次，所以`A+`匹配`A`, `AAAA`, 或`AAAAAAAAA`.

有了这些，您将需要一些关于不同类型令牌的入门知识。

1.  我们已经提到过的一个：文字字符，例如`A`，`1`或其他。对于可以采用几个定义值之一的部分，您将需要它。`WP`将匹配`WP`，但没有别的。

2.  有字符类。这些写在方括号中，包含各种字符，每个字符都可以匹配。字符类*将*`[AB]`匹配*或* 。也可以有字符范围，因此将匹配作为 ASCII 一部分的任何大写拉丁字母，将匹配从到的任何数字。`A` *`B``[A-Z]``[1-9]``1``9`*

 *然后我们需要一些量词：

1.  `?`导致前面的标记根本不匹配或仅匹配一次，因此`AB?`（请记住，`?`仅适用于`B`- 直接前面的标记）将匹配`A`或`AB`。如果可能，它将始终尝试匹配`AB`。

2.  精确的重复可以写成`{5}`- 即花括号中的数字。`A{2}`将匹配`AA`。

好的，我们现在可以开始构建正则表达式了。

首先，我们需要一个包含没有元音字母的字符类。`[A-Z]`显然会包括它们，所以这还不够。但是我们可以使用多个范围：

```
[B-DF-HJ-NP-TV-Z] 
```

不漂亮，但有效。一些正则表达式引擎对实际设置操作有规定，例如设置差异以使用字符类并再次排除某些字符，但现在就足够了。

但是，我们需要其中两个，因为有两个字母：

```
[B-DF-HJ-NP-TV-Z]{2} 
```

然后有一个空间，也可能没有。有一个包含所有空格（包括空格和制表符）的速记字符类：`\s`. 我们可以使用它，除非严格要求只能出现空格：`\s?`. 为了增加健壮性，我们还可以使用`\s*`which 将匹配任意数量的空格，即使没有空格也可以不匹配。

然后我们需要来自 : 的数字，`1`实际上`9`还有`[1-9]`两个数字：`[1-9]{2}`。到目前为止，我们有以下内容：

```
[B-DF-HJ-NP-TV-Z]{2}\s*[1-9]{2} 
```

然后我们需要两个不带元音的字母，再带空格或不带空格：

```
[B-DF-HJ-NP-TV-Z]{2}\s*[1-9]{2}\s*[B-DF-HJ-NP-TV-Z]{2}\s* 
```

在那之后，有一部分是可能的几个定义的选项之一。这些可以用竖线交替书写`|`。我们首先需要一个用括号编写的组，就像在数学中一样，以限制交替的优先级（再次，就像在数学中一样）。在它们里面，我们只列出所有可能的选项，用 分隔`|`：

```
(WP|NL|GP|EC|etc.) 
```

这就像字符类，只是它将匹配多个字符（但仍然只有一个选项）。

把它们放在一起，我们有

```
[B-DF-HJ-NP-TV-Z]{2}\s*[1-9]{2}\s*[B-DF-HJ-NP-TV-Z]{2}\s*(WP|NL|GP|EC|etc.) 
```

然后是一件小事。即使周围有字符，它也会匹配，因为大多数引擎中的正则表达式默认匹配子字符串。我们从来没有说过我们上面匹配的内容需要是一个单一的“单词”，可以这么说，它可能是我们在`khdgdfgergBQ12RTGPrteryefg`某个地方找到的。为了防止某些断言本身不会匹配任何字符，而是将匹配项与特定位置联系起来。其中一个很方便的是，它将匹配字符 from （在实践中完全无用的速记字符类，包括字母、数字和下划线）和字符 not from`\b`之间存在边界的任何地方。对于快速和肮脏的黑客攻击足以确保我们匹配单词的开头或结尾，例如`\w``\w``\b``\bfoo\b`将匹配`foo`in`a foo b`但不在`foobar`. 有些选项更健壮，但编写时间也更长。所以我们可以使用以下对于某些目的应该足够好的：

```
\b[B-DF-HJ-NP-TV-Z]{2}\s*[1-9]{2}\s*[B-DF-HJ-NP-TV-Z]{2}\s*(WP|NL|GP|EC|etc.)\b 
```

不过，我现在将第二个模式的构建留给您。你现在应该足够了解自己来做这件事了。

顺便说一句，一个非常好的学习正则表达式的网站是[regular-expressions.info](http://regularexpressions.info)。事情的解释比我做的更好，它对于学习和作为参考同样有用*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:17:58.370

你可以用这个正则表达式来做到这一点

```
^(?!.*[aeiou].*(WP|NL|GP|EC))[a-zA-Z]{2}\s*\d{2}\s*[a-zA-Z]{2}\s*(WP|NL|GP|EC)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:08:08.360

你可以尝试这样的事情：

**模式1：**

```
[^\W\d_.AEIOUYaeiouy]{2}\s*\d{2}\s*[^\W\d_.AEIOUYaeiouy]{2}\s*(?:WP|NL|GP|EC) 
```

非常简单，使用反转组，因为它比 短`[bcdfghjklmnpqrstvwxzBCDFGHJKLMPQRSTVWXZ]`，如果你可以让它不区分大小写或者知道它总是大写，你可以让它更短。添加更多的 2 个字母“单词”可以通过添加`|XX`到最后一部分（括号内）来完成。

**模式2：**

```
[A-Za-z]{3}\s*\d{3}\s*(?:WP|NL|GP|EC) 
```

根据您使用的语言，您可能需要更改一些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T09:10:00.687

假设字母必须是大写的：

模式一：`[BCDFGHJ-NP-TV-Z]{2}\s*[1-9]{2}\s*[BCDFGHJ-NP-TV-Z]{2}\s*(?:WP|NL|GP|EC)`

模式二：`[A-Z]{3}\s*[1-9]{3}\s*(?:WP|NL|GP|EC)`

`\b`如果您要求字符串以非单词字符或字符串的开头/结尾为边界，您可能还需要考虑添加到每个字符串的开头和结尾。*

# silverlight - 默认情况下在浏览器外运行 Silverlight 应用程序

> ID：15266643
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:42.697
> 
> 标签：silverlight, out-of-browser

我们公司有一个 silverlight 应用程序，它托管在一个 Web 应用程序中。当我想测试应用程序时，我应该启动 Web 应用程序，然后右键单击页面，然后单击安装按钮以安装浏览器版本的应用程序。每次对 C# 代码进行更改时，我都应该这样做。

有什么方法可以默认以浏览器外模式启动我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:09:06.653

右键单击您的项目转到“属性”->“Silverlight”。

启用这样的选项

![在此处输入图像描述](../Images/437ca161cada649c8d8fd80a3c8cfaaf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:37:07.367

您必须将 silverlight 应用程序设置为启动项目，并在项目属性中设置“已安装的浏览器外应用程序”以调试您的项目。

你可以在这里一步一步地看到这个：http: [//blogs.msdn.com/b/jamlew/archive/2009/07/28/debugging-silverlight-applications-in-out-of-browser-mode.aspx](http://blogs.msdn.com/b/jamlew/archive/2009/07/28/debugging-silverlight-applications-in-out-of-browser-mode.aspx)

# iphone - 用户点击后立即显示活动指示器代替登录按钮

> ID：15266645
> 
> 赞同：0
> 
> 时间：2013-03-07T08:46:51.297
> 
> 标签：iphone, ios, objective-c, xcode

当我的应用程序正在检查用户身份验证时，我想显示一个活动指示器来代替我的右侧 UIBarButtonItem。

当前发生的情况是用户单击登录按钮，然后 UI 暂停并等待 Web 调用返回。有人建议我使用调度队列在不同的线程上运行它，但我不确定如何组合这两段代码：

**调度队列：**

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^ {
//show your indicator button
dispatch_async(dispatch_get_main_queue(), ^ {
    //stop indicator when user has logged in
});
}); 
```

**登录方式：**

```
- (void) loginAction{

UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] 
initWithFrame:CGRectMake(0, 0, 20, 20)];
[activityIndicator startAnimating];
UIBarButtonItem *activityItem = [[UIBarButtonItem alloc] 
initWithCustomView:activityIndicator];
self.navigationItem.rightBarButtonItem = activityItem;

if ([userNameTextField.text isEqualToString:@""] || [passwordTextField.text 
isEqualToString:@""]) {

UIBarButtonItem *btnGo = [[UIBarButtonItem alloc] initWithTitle:@"Login" 
style:UIBarButtonItemStyleBordered target:self action:@selector(loginAction)];
self.navigationItem.rightBarButtonItem = btnGo;
[self.navigationItem.rightBarButtonItem setTintColor:[UIColor colorWithRed:44.0/255.0 
green:160.0/255.0 blue:65.0/255.0 alpha:1.0]];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Invalid Login" message:@"" 
delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
    return;
}

if (loginSuccess== true) {

    //continue
}

}else
{
UIBarButtonItem *btnGo = [[UIBarButtonItem alloc] initWithTitle:@"Login" 
style:UIBarButtonItemStyleBordered target:self action:@selector(loginAction)];
self.navigationItem.rightBarButtonItem = btnGo;
[self.navigationItem.rightBarButtonItem setTintColor:[UIColor colorWithRed:44.0/255.0 
green:160.0/255.0 blue:65.0/255.0 alpha:1.0]];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Invalid Login" message:@"" 
delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
return;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:01:53.347

我也遇到过同样的问题。我已经这样修复了。在 viewdidload 中，我将活动指示器添加为子视图，并在单击登录按钮时开始为指示器设置动画。然后使用 performSelector 我调用了一个包含登录服务调用的方法，最后我只是停止了指标。它对我来说工作正常。使用此代码..

.h UIActivityIndi​​catorView *activityIndi​​cator;

在.m

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [activityIndicator setFrame:CGRectMake(0, 0, 37, 37)];
    [activityIndicator setCenter:self.view.center];
    [activityIndicator setHidesWhenStopped:YES];
    [self.view addSubview:activityIndicator];
    [self setDisplayStatusOfControls];

}

  -(IBAction)loginButton
  {

     [activityIndicator startAnimating];
     [self performSelector:@selector(Loginauthentication) withObject:nil afterDelay:0.1f];

  }

- (void) loginAction
{
//Log in authentication..

[activityIndicator stopAnimating];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:51:02.173

做这样的事情：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^ {
    //show your indicator button
    dispatch_async(dispatch_get_main_queue(), ^ {
        //stop indicator when user has logged in
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:07:00.050

UI 只能在主线程上更新。当主线程正在执行其他操作时，无法更新 ui。要更新您的活动指标，您可以执行以下操作：

```
[self performSelectorOnMainThread:@selector(loginAction:) withObject:anObject waitUntilDone:NO]; 
```

# arrays - Bash：DNS查找，将NS放入数组

> ID：15266648
> 
> 赞同：1
> 
> 时间：2013-03-07T08:46:58.580
> 
> 标签：arrays, bash, dns, awk, lookup

我需要为几个域查找 NS，并且需要将结果放入一个数组中。现在我只能设法得到第一个结果来回显，但我需要所有结果，最好是在一个数组中。

有谁知道这是怎么做到的吗？

例如，`dig google.com ns`给了我 4 个`ns[1-4].google.com` 我刚刚完成的结果：

```
dig google.com ns | awk '/^;; ANSWER SECTION:$/ { getline ; print $5 '} 
```

但这只会打印第一行。我不知道如何将所有结果放入数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:57:46.740

您真的需要数组中的答案还是只想输出`ANSWER SECTION`：

```
$ dig google.com ns | awk 'p{print $5}/^;; ANSWER SECTION:$/{p=1}/^$/{p=0}'
ns3.google.com.
ns1.google.com.
ns4.google.com.
ns2.google.com. 
```

`ADDITIONAL SECTION`结果相同，但通过解析而不是awk 更简洁`ANSWER SECTION`：

```
$ dig google.com ns | awk '/^ns/{print $1}'
ns1.google.com.
ns4.google.com.
ns2.google.com.
ns3.google.com. 
```

你想对结果做什么？

# actionscript-3 - 如何使用 actionscript3 定位 windows/mac 的文件路径？

> ID：15266652
> 
> 赞同：1
> 
> 时间：2013-03-07T08:47:14.793
> 
> 标签：actionscript-3

我正在开发一个应用程序，当我在我的计算机上使用它时没问题，因为我需要执行一个 .exe 脚本并且我知道该文件的路径在哪里。但问题是，我怎样才能自动改变它？我的意思是，我只是传递 .exe 名称，然后为我找到这条路径...

我正在使用 nativeProcess ... 我有这个：

`f = new File();
f.nativePath = "C:/projects/SDK/Adobe Gaming SDK 1.0.1/Utilities/ATFTools/Windows/png2atf.exe";`

这很完美......我只是想让它更自动..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:00:15.280

使用`File.applicationDirectory`. 这是自动找到您的项目根目录。

如下：

`new File(File.applicationDirectory.nativePath);`

如果你想定位文件路径 Win/Mac。试试这个：

```
//Mac
if (Capabilities.os.search("Mac") >= 0)
{

}
//Windows
else if (Capabilities.os.search("Windows")>=0)
{

} 
```

# android - 无法解析目标“android-16”

> ID：15266653
> 
> 赞同：50
> 
> 时间：2013-03-07T08:47:16.830
> 
> 标签：android, android-sdk-2.3

我使用的是安卓 4.2.2。安装最新的 SDK 后，当我打开 Eclipse 时，我可以看到所有在构建过程中出现问题的项目。以下是我得到的错误。请让我知道如何解决这个问题？

```
Unable to resolve target 'android-16' 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-07T08:56:16.860

我也遇到了同样的问题，更新后出现了类似的错误。

可以修复手动编辑`project.properties`文件并将`android-16`部件更新到您安装的最新版本。在您当前的情况下，即`android-17`.

我想它也可以使用 Android ADT 进行配置，但我想不通，这更快

此外，您还必须更新清单，确保您已`android:targetSdkVersion`设置为 17。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-08-06T02:01:50.090

如果您使用的是 Eclipse，请尝试将目标构建更改为高于 API 17 的内容（右键单击 -> 属性 -> Android -> 项目构建目标）。

如果这消除了错误，只需在之后将目标构建更改回 API 17。

我在导入 android-support-v7-appcompat 时遇到了这个问题，并且来回更改目标构建解决了我的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-20T22:48:21.320

值得注意：

我在 project.properties 中的目标似乎设置为 target=Google Inc.:Google APIs:18。但是，它似乎在其他地方设置为 16。我不得不更改为 target=Google Inc.:Google APIs:16，保存，然后将其保存回 18，然后它就可以工作了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-10T08:29:59.127

从 Android SDK 管理器中，安装适用于 API 版本 16 的 Android SDK 工具。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-25T22:01:29.120

即使项目属性和`android:targetSdkVersion`（在 AndroidManifest.xml 中）都是相同的当前 SDK 版本，有时也会发生这种情况。

**如果一切都是最新的并且匹配，请尝试重新启动 Eclipse。**（这有时确实有效。）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-04T18:56:16.517

要解决“无法解析目标 'android-16'”的问题，请设置库项目的 targetSDKversion，例如“android-support-v7-appcompat”。

1.  展开图书馆项目
2.  从库中打开清单文件（不是您的应用程序中的那个）
3.  在标签下将“目标 SDK 版本”指定为安装的 SDK 版本（例如 18）
4.  重建库和应用程序（或重新启动 Eclipse）

那应该解决它。

![在此处输入图像描述](../Images/6f59e1fa865407deca62cd5a62de86bd.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-04T08:59:38.520

还值得注意 - 在 Ubuntu 12.04 下，我安装了 API 版本 16 的 Android SDK 工具，退出并重新启动 Eclipse，它解决了问题，而无需将目标更改为版本 16 并返回到 18

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-22T13:20:03.380

检查了两个项目`project.properties`文件，它们的目标是版本 18，找不到版本 16。重新启动 Eclipse 以某种方式解决了这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-27T06:55:32.030

无法解析目标“android-16”

确保您使用的是哪个版本并在提到的文件中设置该版本

为了解决这个问题，我们需要更改 3 个文件，如下所示。

project.properties（目标=android-18）

AndroidManifest.xml (android:targetSdkVersion="18")

\bin\AndroidManifest.xml (android:targetSdkVersion="18")

如上所述，这 3 个文件具有相同的版本号。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-12-03T13:16:48.660

**在 Eclipse 中，我完成了上述所有操作，但错误并没有消失。**

然后我只是重新启动了eclipse并解决了它;）

所以，执行上述操作，然后重新启动 eclipse！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-17T10:27:08.720

转到项目文件夹中的 project.properties 并更改`android:targetSdkVersion`或`target`标记。

例如，如果 project.properties 文件包含`android:targetSdkVersion=16`or `target=android-16`，请将其更改为您已安装的目标之一（您可以从 Android SDK 管理器中检查已安装的目标）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-01T10:43:11.587

设置您的代理设置。sdk 管理器-> 选项。然后你可以安装你想要的 API。它对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-09T06:36:12.100

**右键单击项目。转到属性。在左侧站点上选择 Android。在右侧，您可以看到 android API 版本列表。选择合适的版本（android API 16）。单击应用。**

如果您没有看到正确的版本，请转到 windows。**转到 Android SDK Manager 并下载 android API 16 (Android 4.1.2)。重复上述步骤。**

在下图中，您可以看到 API 16。如果在那里找不到，您可以使用 android sdk manager 下载 API 16。如果您已经单击了 android 4.1.2 旁边的复选框，请单击应用，然后单击确定。

![在此处输入图像描述](../Images/cc3bff435ba154b13b46d706a1e4ae86.png)

要从 Eclipse 中的 sdk 管理器下载 sdk，请转到 windows，Android SDK 管理器。您应该看到以下窗口并检查 android 4.1.2 哪个 API 16 并单击安装。**下图是 API-15 的示例（您必须为 API-16 执行此操作）** ![在此处输入图像描述](../Images/e9f7c0beb484b2c6fecb0fc1db897d83.png)

# parallel-processing - CUDA 和并行搜索

> ID：15266654
> 
> 赞同：1
> 
> 时间：2013-03-07T08:47:17.260
> 
> 标签：parallel-processing, cuda

我想做以下事情：假设我有一个大小为 N（N 相当大）的排序数字向量和一个数字 x。我想并行搜索此向量中数字 x 的正确位置。例如：

myVector = [ 1, 2, 3, .... , 10000] 和 x = 3.2,

然后我必须返回 3。第一个找到正确位置的线程应该中断其他线程的工作。那么花费的时间将会最小化： t= min(t_1, t_2,......, t_number of threads) 你认为使用多线程来寻找正确的位置会更快吗？线程之间的通信呢？由于一旦某个值被线程变为红色并且与搜索不匹配，其他线程必须在搜索期间跳过该值（可能是一个必须更改的布尔值..

你对这个算法有什么建议要分享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:25:05.127

无需在线程和块之间进行通信。您可以检查当前索引处的值是否大于预期。如果是这样返回。大多数线程将无法通过此检查。

现在您只有具有索引值小于预期值的线程。检查下一个值是否大于或等于查询并返回适当的索引。

这是我早上 5 点写的未经测试的内核。

```
template<typename ty>
__global___ static void search(int *out, ty *list, ty val, int n)
{
    int start = threadIdx.x + blockIdx.x * blockDim.x;
    for (int idx = start; idx < n; idx += gridDim.x * blockDim.x) {
        if (list[idx] >= val) return;
        ty next = list[idx + 1];
        if (idx == n-1 || next >= val) {
            *out = next == val ? (idx + 1) : idx;
            return;
        }
     }
} 
```

也就是说，你真的不想这样做。在使用 CPU 时，您可以获得 O(log n) 的最坏情况性能。这意味着搜索十亿个元素可以分 32 步完成。除非您已经在 gpu 上拥有数据并且想要避免内存复制，否则这在 CPU 上要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:26:46.900

前段时间我写了下面的代码做类似的事情：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>
#include <stdlib.h>

__global__ void fast_finder(unsigned int *g_found, float x, float *y)
{
    unsigned int i = blockIdx.x * blockDim.x + threadIdx.x;
    unsigned int pos = (unsigned int)(x == y[i]);
    g_found[i * (1 - pos)] = i * pos;
}

int main(int argc, char *argv[])
{
    int N = 65536;
    unsigned int h_found, *d_found;
    float *h_y = (float *)malloc(N * sizeof(float)), *d_y, x = 5.0f;
    int nThreads = 1024, nBloks = N / nThreads;

    for (int i = 0; i < N; ++i) h_y[i] = (float)(N - i - 1);

    if (x != h_y[0]) {
        cudaSetDevice(0);
        cudaMalloc((void **)&d_found, N * sizeof(unsigned int));
        cudaMalloc((void **)&d_y, N * sizeof(float));
        cudaMemcpy(d_y, h_y, N * sizeof(float), cudaMemcpyHostToDevice);

        fast_finder<<<nBloks, nThreads>>>(d_found, x, d_y);
        cudaThreadSynchronize();

        cudaMemcpy(&h_found, d_found, sizeof(unsigned int), cudaMemcpyDeviceToHost);
        if (h_found) printf("%g found on %d. position!\n", x, h_found);
        else printf("%g not found!\n", x);

        cudaFree(d_y);
        cudaFree(d_found);

    } else printf("%g found on the first position!\n", x);

    free(h_y);

    getchar();
    return EXIT_SUCCESS;
} 
```

这里每个线程检查全局线程索引 in 提供的值`y`是否等于`x`。如果它是真的，线程将它的索引写入`g_found`数组的第一个位置，否则将 0 写入`g_found`它的索引提供的位置。对于`y`长度为 16 的，`y`输出中第 11 位包含值 5 如下：

```
g_found = { 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } 
```

在这种情况下`y`，不需要排序，但必须只包含唯一值。此代码可以很容易地更改为`x`将插入提供的查找（设备部分）索引，如下所示：

```
__global__ void fast_finder(unsigned int *g_found, float x, float *y)
{
    unsigned int i = blockIdx.x * blockDim.x + threadIdx.x;
    unsigned int pos = (unsigned int)(x >= y[i] || x <= y[i+1]);
    g_found[i * (1 - pos)] = (i + 1) * pos;
} 
```

这个版本的输出与我的相似。当`g_found`位置 0 为 0`x`时，数组中不存在的值`y`。的第一个元素`y`是否等于`x`由主机代码检查，甚至在内核被调用之前。更改此部分以应用您想要的条件也不是问题。

如您所见，在这样的解决方案中，所有线程一起工作，并且不需要任何执行终止，只要`x`找到。还可以应用数据包搜索，这意味着分配一个线程在 的一小部分中搜索`y`，从而允许`y`更大。

# c++ - 将 QLineEdit 的属性添加到 Qt 中的 QTable Widget

> ID：15266657
> 
> 赞同：0
> 
> 时间：2013-03-07T08:47:30.980
> 
> 标签：c++, qt

我想`Table Widget`在我的应用程序中添加一个。但是我想要的一些属性不支持`Table Widget`，但可以用于`QLineEdit`. 例如`Validator`,`PlaceHolderText`等来自 的属性`QLineEdit`。我想为`Table Widget`. 我不想添加`QLineEdit`我的`GUI`，只有`Table Widget`. 是否有可能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:55:06.613

创建一个`QStyledItemDelegate`像平常一样绘制文本或占位符文本的子类（它可以在不重新实现的情况下做到这一点），但生成一个`QLineEdit`作为它的编辑器小部件。

使用添加它`QTableWidget::setItemDelegate(QAbstractItemDelegate* delegate)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:01:25.430

我认为，您可以将这些单元格更改为`QLineEdit`by [`setCellWidget`](http://qt-project.org/doc/qt-4.8/qtablewidget.html#setCellWidget)，并使用其功能：

```
the_table_widget->setCellWidget(row, col, new QLineEdit); 
```

# android - 如何启动第二个启动器，其意图类似于打开外部应用程序？

> ID：15266658
> 
> 赞同：1
> 
> 时间：2013-03-07T08:47:31.603
> 
> 标签：android, android-intent, android-launcher

我制作了一个自定义启动器应用程序，我试图获得一个按钮来启动原始启动器。现在它看起来像这样：

```
public void click(View v)
    {
        Intent intent = getPackageManager().getLaunchIntentForPackage("com.android.launcher2");
        startActivity(intent);
    } 
```

是否无法像启动其他外部应用程序一样启动启动器？

# xcode - 没有可用于签名的身份 - 在 xcode 中发布应用程序

> ID：15266661
> 
> 赞同：4
> 
> 时间：2013-03-07T08:47:47.313
> 
> 标签：xcode, distribution, archive, keychain

我与这个问题斗争了两天。我已经完成了我的应用程序`xcode 4.6`，我创建了应用程序`Itunes Connect`并且状态是`Waiting For Upload`。我还拥有所有证书（开发人员和分发），并且`Distribution Provisioning Profiles`我有我的个人资料。

[关联](http://img19.imageshack.us/img19/3537/schermatamac.jpg)

在`xcode`我通过命令创建存档时`Product -> Archive`，一切正常。但是当我点击`validate`或`Submit`出现错误消息时：（ `No identities are available for signing` 在我的钥匙串中一切正常）。

[关联](http://img706.imageshack.us/img706/7965/schermata032456359alle0.png)

即使我按下`Download Identities`没有任何反应。

我不知道如何解决这个问题。按照说明，我花了两天时间在这里和其他论坛中寻找解决方案，但我没有找到任何东西......

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:02:32.477

您是否完成了代码签名部分？

如果您从 Xcode 左侧的检查器顶部选择您的项目名称，请单击`Build Settings`而不是找到该`Code Signing`部分：

![在此处输入图像描述](../Images/255e6064c4a70caffb7e15711dc04703.png)

# permissions - Ubuntu更改特定用户的默认文件/文件夹权限

> ID：15266662
> 
> 赞同：0
> 
> 时间：2013-03-07T08:47:53.040
> 
> 标签：permissions, ubuntu-12.04, user-permissions

如何使某个用户创建的任何文件夹或文件在 Ubuntu 中始终是公共的（775）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:35:32.573

我从 AskUbuntu 得到这个。希望它可以帮助任何人。

> 您编辑该用户的用户文件创建模式掩码 (umask)。有几种方法可以做到这一点，一种方法是将 umask xxx（xxx 是您想要的 umask）添加到您的 ~/.profile 并重新登录。不过，这不会影响已经存在的文件。
> 
> 有关 umask 以及如何计算的信息，请参阅 Wikipedia umask。

# java - 找到尽可能多的配对

> ID：15266666
> 
> 赞同：4
> 
> 时间：2013-03-07T08:47:58.117
> 
> 标签：java, algorithm, graph

我正在尝试解决一个问题，但不幸的是我的解决方案对于这项任务来说并不是最好的。

任务：

在一次聚会上，有 N 位客人（0 < N < 30000）。所有客人都告知他们何时参加派对以及何时离开（例如 [10;12]）。任务是在聚会上为尽可能多的人拍照。在一张照片上只能有 2 个人（一对），每个人只能在一张照片上。当然，只有在两个人同时在聚会时才能拍照。当他们的出勤间隔重叠时就是这种情况。

我的想法：我写了一个程序，它从间隔创建一个连接图。从图中我搜索连接数最少的人。从关联的人中，我还选择了关联最少的人。然后这两个被选为照片上的一对。两者都从图中删除。该算法一直运行到没有连接为止。

这种方法有效，但是程序计算有 10 秒的限制。如果有 1000 个条目，它会在 2 秒内运行，但即使有 4000 个条目，它也需要很长时间。此外，当我尝试使用 25000 个数据时，程序因内存不足错误而停止，因此我什至无法正确存储连接。

我认为这里需要一种新方法，但我找不到其他方法来完成这项工作。

谁能帮我找出适合这项任务的算法？

非常感谢你！

样本数据：

```
10
1 100
2 92
3 83
4 74
5 65
6 55
7 44
8 33
9 22
10 11 
```

第一行是客人的数量，进一步的数据是参加聚会的人的间隔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:26:46.980

这里不需要创建图，这个问题可以在区间结构上很好地解决。按离开时间的升序（间隔结束点）对人员进行排序。然后按排序顺序遍历它们：如果当前人没有与任何人相交，那么他应该被删除。如果他与多个人相交，则以离开时间最早的人为一组。在迭代期间，您应该只将每个人与下一个人进行比较。

证明这种方法并不难，所以希望你能自己证明。关于运行时间，简单的解决方案是 O(N^2)，但我认为它可以减少到 O(N * logN)。无论如何，O(N^2) 将适合普通 PC 上的 10 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:34:27.083

对我来说，这似乎是一个经典的[最大匹配](http://en.wikipedia.org/wiki/Maximum_matching)问题。

您构建一个图，其中可能被描绘在一起的人（他们的时间间隔相交）与一条边相连，然后找到最大匹配，例如，使用 [Edmond 的 Blossom 算法](http://en.wikipedia.org/wiki/Edmonds%27s_matching_algorithm)。

我不会说，这很容易实现。[但是，您可以使用Kuhn 算法在](http://apps.topcoder.com/forums/?module=Thread&threadID=684427)**二分**图中获得最大匹配的相当好的近似值。这个很容易实现，但不会给你确切的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:28:35.590

我有一些非常简单的想法：

假设，派对将占用 Xh，每小时制作 X 组，添加合适的人。当然，在那里待的时间超过一小时的人会在几组中。现在，如果有 2 套“一起”，偶数个 ppl，你可以为每套拍摄 n/2 张照片。如果有 2 组奇数人，您正在寻找将在这 2 组中的每一组的人，并将他移动到其中一组（所以您有 2 组偶数组的人将同时在派对）。

请记住删除所有使用过的 ppl（考虑一些`class`-`Man`列出他/她的所有时间）。

我的想法可能应该扩展到更高级的“移动人”算法，通过多个相邻集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T11:33:56.890

我认为以下可以做到：

首先，读取所有客人的数据，并将它们按时间升序排列成一个数组。然后，获取数组的第一个元素并遍历下一个元素，直到找到第一个时间匹配（下一个客人的进入时间小于该客人的离开时间），如果找到，则将两者作为一对从数组中删除，并在其他地方报告. 如果没有，请移除客人，因为它根本无法配对。重复直到数组为空。

最坏的情况也是 N^2，因为聚会就像`[1,2],[3,4],...`没有客人可以配对，算法会一直搜索所有 30000 名客人都是徒劳的。所以我不认为这是最佳算法，但它应该给出一个准确的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T09:35:25.847

你说你已经有了一个图结构表示。我假设您的顶点代表客人和他们在聚会上的时间间隔，而边缘代表各自时间间隔的重叠。那么你要解决的是图论[最大匹配问题](http://en.wikipedia.org/wiki/Maximum_matching)，这个问题之前已经解决了。

然而，正如我在上面的评论中所指出的，我认为你可以利用问题的性质，尤其是传递性，比如“如果 A 在 B 离开之前离开，B 在 C 到达之前离开，那么 A 和 C 也不会相遇”，比如这：

等到下一位未拍照的客人即将离开，然后与在场的下一位离开的客人合影留念。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-07T08:59:27.257

您可能会成功地想到可以拍摄照片的最早时间：这是第二个人到达聚会的时间。

所以作为一名摄影师，以第一个人的身份参加派对并等待。每当有人到达时，请与他/她以及聚会上的所有其他人合影。由于一个人只出现一次，因此您不会有任何重复。

在拍照时（即遍历客人列表），删除那些实际离开聚会的客人。

# android - 谷歌登录安卓应用

> ID：15266669
> 
> 赞同：2
> 
> 时间：2013-03-07T08:48:09.053
> 
> 标签：android, gmail

如何集成 Gmail(Google) 以登录我的 APP。我搜索了这个网站，但没有成功。在我的应用程序中使用 Gmail 登录的任何链接或任何源代码或任何教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:57:21.440

试试看这里

[https://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)

这应该给出如何完成的想法。

重复问题：[使用谷歌凭据在我的应用中登录 Android](https://stackoverflow.com/questions/4553004/android-login-in-my-app-with-google-credentials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:13:26.230

你应该看看这个：

[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

# javascript - 角度 ng-repeat 反向

> ID：15266671
> 
> 赞同：230
> 
> 时间：2013-03-07T08:48:18.193
> 
> 标签：javascript, arrays, angularjs, reverse, angularjs-ng-repeat

我怎样才能获得角度的反转数组？我正在尝试使用 orderBy 过滤器，但它需要一个谓词（例如“名称”）来排序：

```
<tr ng-repeat="friend in friends | orderBy:'name':true">
      <td>{{friend.name}}</td>
      <td>{{friend.phone}}</td>
      <td>{{friend.age}}</td>
<tr> 
```

有没有办法在不排序的情况下反转原始数组。像那样：

```
<tr ng-repeat="friend in friends | orderBy:'':true">
      <td>{{friend.name}}</td>
      <td>{{friend.phone}}</td>
      <td>{{friend.age}}</td>
<tr> 
```

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-03-07T09:42:22.787

我建议使用这样的自定义过滤器：

```
app.filter('reverse', function() {
  return function(items) {
    return items.slice().reverse();
  };
}); 
```

然后可以像这样使用：

```
<div ng-repeat="friend in friends | reverse">{{friend.name}}</div> 
```

在这里看到它的工作：[Plunker Demonstration](http://plnkr.co/edit/REU7mTsfG5HISCnLKEr8?p=preview)

* * *

该过滤器可以根据您的需要进行定制。我在演示中提供了其他示例。一些选项包括在执行反向操作之前检查变量是否为数组，或者更宽松地允许对更多事物（例如字符串）进行反向操作。

* * *

## 回答 #2

> 赞同：206
> 
> 时间：2014-04-12T13:23:31.223

这是我用的：

```
<alert ng-repeat="alert in alerts.slice().reverse()" type="alert.type" close="alerts.splice(index, 1)">{{$index + 1}}: {{alert.msg}}</alert> 
```

**更新：**

对于旧版本的 Angular，我的回答是可以的。现在，您应该使用

`ng-repeat="friend in friends | orderBy:'-'"`

或者

```
ng-repeat="friend in friends | orderBy:'+':true" 
```

来自[https://stackoverflow.com/a/26635708/1782470](https://stackoverflow.com/a/26635708/1782470)

* * *

## 回答 #3

> 赞同：124
> 
> 时间：2014-10-29T16:26:24.810

很抱歉在一年后提出这个问题，但是有一个新的、*更简单的解决方案*，它**适用于 Angular v1.3.0-rc.5 及更高版本**。

[文档](https://docs.angularjs.org/api/ng/filter/orderBy)中提到：“如果没有提供属性（例如'+'），则数组元素本身用于比较排序位置”。因此，解决方案将是：

`ng-repeat="friend in friends | orderBy:'-'"`或者

`ng-repeat="friend in friends | orderBy:'+':true"`

这个解决方案似乎更好，因为它**不修改数组并且不需要额外的计算资源**（至少在我们的代码中）。我已经阅读了所有现有的答案，并且仍然更喜欢这个答案。

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2016-10-03T09:04:13.813

简单的解决方案：-（无需制作任何方法）

```
ng-repeat = "friend in friends | orderBy: reverse:true" 
```

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2013-09-22T18:01:19.510

您可以通过 $index 参数反转

```
<tr ng-repeat="friend in friends | orderBy:'$index':true"> 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-03-07T09:10:58.967

您可以在您的范围内调用一个方法来为您反转它，如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    angular.module('myApp', []).controller('Ctrl', function($scope) {
        $scope.items = [1, 2, 3, 4];
        $scope.reverse = function(array) {
            var copy = [].concat(array);
            return copy.reverse();
        }
    });
    </script>
</head>
<body ng-controller="Ctrl">
    <ul>
        <li ng-repeat="item in items">{{item}}</li>
    </ul>
    <ul>
        <li ng-repeat="item in reverse(items)">{{item}}</li>
    </ul>
</body>
</html> 
```

请注意，由于修改了原始数组，因此`$scope.reverse`会创建数组的副本。`Array.prototype.reverse`

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-05-07T10:11:40.040

如果您使用的是 1.3.x，则可以使用以下内容

```
{{ orderBy_expression | orderBy : expression : reverse}} 
```

**示例**按出版日期降序排列书籍

```
<div ng-repeat="book in books|orderBy:'publishedDate':true"> 
```

来源：[https ://docs.angularjs.org/api/ng/filter/orderBy](https://docs.angularjs.org/api/ng/filter/orderBy)

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2016-06-02T13:36:24.227

如果您使用 angularjs **1.4.4 及更高版本**，一个简单的排序方法是使用“ **$index** ”。

```
 <ul>
  <li ng-repeat="friend in friends|orderBy:$index:true">{{friend.name}}</li>
</ul> 
```

[查看演示](http://plnkr.co/edit/MXN3MvnA2YyOdtcqhw7r?p=preview)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-14T00:42:19.543

在 .NET 和 Angular 中使用 MVC 时，您始终可以在执行数据库查询时使用 OrderByDecending()，如下所示：

```
var reversedList = dbContext.GetAll().OrderByDecending(x => x.Id).ToList(); 
```

然后在 Angular 方面，它已经在某些浏览器（IE）中被反转。当支持 Chrome 和 FF 时，您需要添加 orderBy：

```
<tr ng-repeat="item in items | orderBy:'-Id'"> 
```

在此示例中，您将按 .Id 属性的降序排序。如果您使用分页，这会变得更加复杂，因为只有第一页会被排序。您需要通过控制器的 .js 过滤器文件或以其他方式处理此问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-14T12:31:38.537

您也可以使用 .reverse()。这是一个原生数组函数

`<div ng-repeat="friend in friends.reverse()">{{friend.name}}</div>`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-06T08:23:12.490

那是因为您使用的是 JSON 对象。当您遇到此类问题时，请将您的 JSON 对象更改为 JSON 数组对象。

例如，

```
{"India":"IN","America":"US","United Kingdon":"UK"} json object
[{"country":"India","countryId":"IN"},{"country":"America","countryId":"US"},{"country":"United Kingdon","countryId":"UK"}] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-14T20:12:28.020

从Angular 1.4.5 开始，`orderBy`过滤器执行[稳定的排序](https://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。（请参阅 GitHub 拉取请求[https://github.com/angular/angular.js/pull/12408](https://github.com/angular/angular.js/pull/12408)。）

因此，使用*常量*谓词并`reverse`设置为就足够了`true`：

```
<div ng-repeat="friend in friends | orderBy:0:true">{{friend.name}}</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-26T14:05:54.970

我发现了类似的东西，但是我使用对象而不是数组。

这是我的对象解决方案：

添加自定义过滤器：

```
app.filter('orderObjectBy', function() {
    return function(items, field, reverse){

        var strRef = function (object, reference) {
            function arr_deref(o, ref, i) {
                return !ref ? o : (o[ref.slice(0, i ? -1 : ref.length)]);
            }
            function dot_deref(o, ref) {
                return !ref ? o : ref.split('[').reduce(arr_deref, o);
            }
            return reference.split('.').reduce(dot_deref, object);
        };

        var filtered = [];

        angular.forEach(items, function(item) {
           filtered.push(item);
        });
        filtered.sort(function (a, b) {
           return (strRef(a, field) > strRef(a, field) ? 1 : -1);
        });
        if(reverse) filtered.reverse();
        return filtered;
    };
}); 
```

然后可以像这样使用

```
<div ng-repeat="(key, value) in items | orderObjectBy:'field.any.deep':true"> 
```

* * *

如果您需要旧的浏览器支持，则需要定义 reduce 函数（仅在 ECMA-262 [mozilla.org](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Compatibility)中可用）

```
// Production steps of ECMA-262, Edition 5, 15.4.4.21
// Reference: http://es5.github.io/#x15.4.4.21
if (!Array.prototype.reduce) {
Array.prototype.reduce = function(callback /*, initialValue*/) {
'use strict';
  if (this == null) {
    throw new TypeError('Array.prototype.reduce called on null or undefined');
  }
  if (typeof callback !== 'function') {
    throw new TypeError(callback + ' is not a function');
  }
  var t = Object(this), len = t.length >>> 0, k = 0, value;
  if (arguments.length == 2) {
    value = arguments[1];
  } else {
    while (k < len && !(k in t)) {
      k++; 
    }
    if (k >= len) {
      throw new TypeError('Reduce of empty array with no initial value');
    }
    value = t[k++];
  }
  for (; k < len; k++) {
    if (k in t) {
      value = callback(value, t[k], k, t);
    }
  }
  return value;
};
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-12T14:49:27.787

我自己对这个问题感到沮丧，所以我修改了@Trevor Senior 创建的过滤器，因为我的控制台遇到了一个问题，说它不能使用反向方法。我还想保持对象的完整性，因为这是 Angular 最初在 ng-repeat 指令中使用的。在这种情况下，我使用了愚蠢（键）的输入，因为控制台会因为说有重复而感到不安，而在我的情况下，我需要通过 $index 进行跟踪。

筛选：

```
angular.module('main').filter('reverse', function() {
    return function(stupid, items) {
    var itemss = items.files;
    itemss = itemss.reverse();  
    return items.files = itemss; 
  };
}); 
```

HTML： `<div ng-repeat="items in items track by $index | reverse: items">`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-17T10:23:47.587

我添加了一个没有人提到的答案。如果您有服务器，我会尝试让服务器执行此操作。如果服务器返回大量记录，客户端过滤可能会很危险。因为您可能会被迫添加分页。如果您有来自服务器的分页，那么客户端过滤器将在当前页面中。这会使最终用户感到困惑。因此，如果您有服务器，则通过调用发送 orderby 并让服务器返回它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-11-12T20:37:24.040

**有用的提示：**

你可以用 vanilla Js 反转你的数组： yourarray **.reverse()**

注意：反向是破坏性的，所以它会改变你的数组，而不仅仅是变量。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-09-14T13:40:13.607

我建议使用数组本机反向方法总是比创建过滤器或使用`$index`.

```
<div ng-repeat="friend in friends.reverse()">{{friend.name}}</div> 
```

[Plnkr_demo](http://plnkr.co/edit/0LrUfjcnwgR5huADpSGu?p=preview) .

# php - 强制 Twig 语言环境

> ID：15266673
> 
> 赞同：32
> 
> 时间：2013-03-07T08:48:19.350
> 
> 标签：php, symfony, twig

我想使用 Twig 模板系统来模板化我的电子邮件。电子邮件的区域设置应基于用户设置，而不是会话或请求区域设置。渲染 Twig 模板时如何强制使用语言环境？

该手册确实提到了如何[强制 Translator 的语言环境](http://symfony.com/doc/master/book/translation.html#forcing-the-translator-locale)。但我想将此语言环境传递给 render() 方法，以便在此语言环境中呈现 twig 模板内的翻译。

*这与在模板中使用into*不同，因为我认为这会强制在特定语言环境中的模板内进行翻译。

所以，以 Symfony 为例，我正在寻找这样的东西：

```
public function indexAction($name)
{
    $message = \Swift_Message::newInstance()
        ->setSubject('Hello Email')
        ->setFrom('send@example.com')
        ->setTo('recipient@example.com')
        ->setBody(
            $this->renderView(
                'HelloBundle:Hello:email.txt.twig',
                array('name' => $name),
                'nl_NL' // <-- This would be nice!
            )
        )
    ;
    $this->get('mailer')->send($message);

    return $this->render(...);
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T15:30:33.287

当您使用 trans 过滤器时，您可以将语言环境作为参数传递（参见差异：[https](https://github.com/symfony/symfony/commit/3ea31a02630412b1c732ee1647a0724378f67665) ://github.com/symfony/symfony/commit/3ea31a02630412b1c732ee1647a0724378f67665 ）。

因此，您可以在控制器的渲染方法中传递另一个 user_locale 变量（或传递整个用户对象，而不是分别传递 name 和 user_locale，或者如果用户将登录，则在模板中使用 app.user 等... （显然取决于您的应用程序）），然后在您的电子邮件模板中，您可以使用以下内容：

```
{{ 'greeting' | trans({}, "messages", user_locale) }} {{ name | title }}
{# rest of email template with more translation strings #} 
```

然后在该语言环境的翻译文件中（假设您使用的是 yaml）中只有这样的内容，并且翻译会在运行中很好地为您工作：

```
# messages.fr.yml    
greeting: 'Bonjour' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-26T09:14:17.093

在渲染模板之前获取 Translator 组件并更改其语言环境。此解决方案**不需要**将额外的值传递给 render() 方法的参数数组并痛苦地重构所有 Twig 文件。

```
public function indexAction($name)
{
    $translator = $this->get('translator');

    // Save the current session locale
    // before overwriting it. Suppose its 'en_US'
    $sessionLocale = $translator->getLocale();

    $translator->setLocale('nl_NL');

    $message = \Swift_Message::newInstance()
        ->setSubject('Hello Email')
        ->setFrom('send@example.com')
        ->setTo('recipient@example.com')
        ->setBody(
            $this->renderView(
                'HelloBundle:Hello:email.txt.twig',
                array('name' => $name)
            )
        )
    ;

    $this->get('mailer')->send($message);

    // Otherwise subsequent templates would also
    // be rendered in Dutch instead of English
    $translator->setLocale($sessionLocale);

    return $this->render(...);
} 
```

用户邮件的一种常见方法是将用户的语言环境存储在 User 实体中并将其直接传递给翻译器，例如在以下代码片段中：

```
$translator->setLocale($recipientUser->getLocale()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-16T10:05:11.210

这是一个解决方案（效果很好，除了子模板（Twig：render（controller（'AppBundle：Invoice/Index：productTotalPartial'）））

```
<?php

namespace Main\BoBundle\Service;

use Symfony\Component\Translation\TranslatorInterface;

/**
 * Class LocaleSwitcher
 *
 * @package Main\BoBundle\Service
 */
class LocaleSwitcher
{
    /**
     * @var TranslatorInterface
     */
    private $translator;

    /**
     * @var string
     */
    private $previousLocale;

    /**
     * @param TranslatorInterface $translator
     */
    public function __construct(TranslatorInterface $translator)
    {
        $this->translator = $translator;
    }

    /**
     * Change the locale
     *
     * @param string $locale
     */
    public function setLocale($locale)
    {
        $this->previousLocale = $this->translator->getLocale();

        $this->translator->setLocale($locale);
        $this->setPhpDefaultLocale($locale);
    }

    /**
     * Revert the locale
     */
    public function revertLocale()
    {
        if ($this->previousLocale === null) {
            return;
        }

        $this->translator->setLocale($this->previousLocale);
        $this->setPhpDefaultLocale($this->previousLocale);

        $this->previousLocale = null;
    }

    /**
     * Use temporary locale in closure function
     *
     * @param string $locale
     * @param \Closure $c
     */
    public function temporaryLocale($locale, \Closure $c)
    {
        $this->setLocale($locale);

        $c();

        $this->revertLocale();
    }

    /**
     * Sets the default PHP locale.
     * Copied from Symfony/Component/HttpFoundation/Request.php
     *
     * @param string $locale
     */
    private function setPhpDefaultLocale($locale)
    {
        // if either the class Locale doesn't exist, or an exception is thrown when
        // setting the default locale, the intl module is not installed, and
        // the call can be ignored:
        try {
            if (class_exists('Locale', false)) {
                /** @noinspection PhpUndefinedClassInspection */
                \Locale::setDefault($locale);
            }
        } catch (\Exception $e) {
        }
    }
} 
```

例子：

```
if ($this->getLocale()) {
    $this->localeSwitcher->setLocale($this->getLocale());
}

$html = $this->templating->render($templatePath);

if ($this->getLocale()) {
    $this->localeSwitcher->revertLocale();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T11:04:54.810

你可以这样做：将参数（例如语言环境）发送到模板

```
public function indexAction($name)
{
    $message = \Swift_Message::newInstance()
        ->setSubject('Hello Email')
        ->setFrom('send@example.com')
        ->setTo('recipient@example.com')
        ->setBody(
            $this->renderView(
                'HelloBundle:Hello:email.txt.twig',
                array('name' => $name, 'locale' => 'nl_NL'),
            )
        )
    ;
    $this->get('mailer')->send($message);

    return $this->render(...);
} 
```

# mysql - MySQL 最大值——时间和频率

> ID：15266677
> 
> 赞同：3
> 
> 时间：2013-03-07T08:48:31.663
> 
> 标签：mysql, performance, max

如果我有类似的查询

```
SELECT (MAX(b.A)/a.A) AS c
FROM a
INNER JOIN b
ON a.b_id = b.id
GROUP by a.id 
```

MySQL 是为每一行评估“MAX(bA)”的值还是只评估一次？

我感兴趣的是是否有性能改进的空间。

谢谢！

**更新**

好的，让我们继续看一个真实世界的例子：我想计算用户喜欢与最大用户喜欢的比例值。

仅读取 users.likes 最大值（已编入索引）的查询需要 0.0003

```
SELECT MAX(likes) 
FROM users 
```

所以我现在知道 max-user-likes 的值，假设它是 10000，所以我可以像这样查询需要 0.0007 秒：

```
SELECT (users.likes/10000) AS weight 
FROM posts
INNER JOIN users ON posts.author_id = users.id 
```

因此，人们希望将两个查询加在一起为 0.0003 + 0.0007 秒，但需要 0.3 秒：

```
SELECT (users.likes/(SELECT MAX(likes) FROM users)) AS weight 
FROM posts
INNER JOIN users ON posts.author_id = users.id 
```

所以我的数据库似乎仍然有问题 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:58:38.070

由于您没有`GROUP BY`子句，因此结果将只有一行，您无法知道的值来自哪一行`a.A`。的值`MAX(b.A)`只会被评估一次。

当您有一个`GROUP BY`子句时，`MAX(b.A)`将对每个**group**进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:21:50.820

通常，对聚合函数中的表达式求值并检查每一行是否为 NULL。在遍历索引的情况下当然可以进行优化`MIN`，但我对此表示怀疑。`MAX`

`MAX(id)`顺便说一句，当您在大表上执行时，您可以轻松地检查这一点。您将看到执行时间与 for 相同`COUNT(id)`（并且可能远远超过`COUNT(*)`取决于引擎）。

# android - 选项卡视图活动 roload

> ID：15266678
> 
> 赞同：0
> 
> 时间：2013-03-07T08:48:36.820
> 
> 标签：android, android-tabhost, android-tablelayout, android-tabs

`tab`离开该选项卡时如何关闭 a 。

或者

每次`activity`单击时如何启动。`tab`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:51:41.367

您需要设置选项卡更改侦听器

```
getTabHost().setOnTabChangedListener(new OnTabChangeListener() {

@Override
public void onTabChanged(String tabId) {

int i = getTabHost().getCurrentTab();
 Log.i(" ANN CLICK TAB NUMBER",  + i);

    if (i == 0) {
            Log.i("Inside onClick tab 0", "onClick tab");

    }
    else if (i ==1) {
            Log.i("Inside onClick tab 1", "onClick tab");
    }

  }
}); 
```

取决于您的活动堆栈，如果您的当前活动恰好位于父活动之上，您只需完成当前活动，它将转到上一个活动。如果您想清除所有活动堆栈并重新开始新活动，请尝试

```
Intent intent1 = new Intent(context, activity.class);
             intent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
             intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
            startActivity(intent1); 
```

# eclipse - 在 VM 中访问 Hadoop 后，Eclipse Europa 中的 DFS 位置

> ID：15266681
> 
> 赞同：3
> 
> 时间：2013-03-07T08:49:07.173
> 
> 标签：eclipse, hadoop, mapreduce, virtual-machine

我对hadoop很陌生。我需要安装它并使用示例。

所以我参考了这个[教程](http://developer.yahoo.com/hadoop/tutorial/module3.html)。我已经安装了该教程中给出的沙盒。我需要在提到虚拟机位置的窗口中配置 ECLIPSE，如下图所示，该位置在教程中给出。 ![在此处输入图像描述](../Images/75b559b810557b8c74b94123189e08d7.png) 我已经安装了 eclipse europa 和 hadoop 插件。然后在 Map/Reduce Locations 中，我为主机名提供 VM Ip，在 UserName 中提供 Linux 用户名，在 Map/Reduce 端口中提供 9001，在 DFS 端口中提供 9000。

在高级选项卡中，我将 mapred.system.dir 的值设置为 /hadoop/mapred/system

并且没有 hadoop.job.ugi 可以提供用户名。 ![在此处输入图像描述](../Images/2929ab16df0e86ef19d8ff2001871d70.png)

单击确定后，我无法在 ECLIPSE 的 DFS 位置下获取 HDFS 文件系统。请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T12:16:01.830

我也遇到了同样的问题。这里的问题与hadoop配置无关，而是与eclipse有关。要解决此问题，请转到“ **\workspace\.metadata\.plugins\org.apache.hadoop.eclipse\locations** ”。在这里打开 XML 文件，只需添加属性“ **hadoop.job.ugi** ”，其值为“ **hadoop-user,ABC** ”，然后重新启动 Eclipse。它对我有用。

我尝试只给出一个值，即没有 ABC，但它不起作用，我不知道这个逗号分隔值的重要性，但由于我刚刚开始本教程，我希望尽快得到这个答案:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T23:31:05.613

我也遇到了同样的问题。我安装了 RedHad cgywin（openssh 和 openssl 包）并使用 cgywin/bin ( ) 的路径更新了“Path”环境变量`c:\rhcygwin\bin`。然后我的 Eclipse DFS 位置能够连接到虚拟机上的 Hadoop。一旦成功，我就会看到选项“hadoop.job.ugi”。

[http://v-lad.org/Tutorials/Hadoop/00%20-%20Intro.html](http://v-lad.org/Tutorials/Hadoop/00%20-%20Intro.html)描述了安装 cgywin。

注意：我在 Windows Vista 上运行 Hadoop VM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T10:02:41.627

我从 Cygwin 中生成了 Eclipse，它对我来说工作得很好（即我可以看到“hadoop.job.ugi”参数）。此外，我没有对我的 PATH 环境变量进行任何更改。

# java - 将 int 值转换为资源 uri

> ID：15266683
> 
> 赞同：1
> 
> 时间：2013-03-07T08:49:19.597
> 
> 标签：java, android, uri

我已经实现了一个播放随机歌曲的 android 项目。所以我有一个这样的整数数组：

```
int [] playlist_stadt    = {R.raw.black_a, R.raw.black_b, R.raw.black_c}; 
```

对于随机播放，我写道：

```
Random r = new Random();
int i = playlist_stadt[r.nextInt(playlist_stadt.length)];
PlayMusic(i); 
```

我不明白的是：

```
textView.setText(i); 
```

文本视图显示：`res/raw/black_c.mp3`

```
Log.e("Output: ", "" + i);
String uriPath = "android.resource://" + getPackageName() + i; 
```

在日志中我是一个数字，而不是文本视图中的相同字符串：

```
Output: 2130968577
203-06 13:09:23.680: E/Output:(31456): android.resource://com.example.testproject2130968577 
```

可以解释一下这个以及如何转换 int 值，我将它用作资源 uri 路径吗？提前谢谢我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:59:24.107

getResources().getResourceEntryName(i) 应该为您提供您正在寻找的 mp3 名称。

i 是 gen/R.java 中 aapt 生成的资源 ID

[Android 访问资源文档](http://developer.android.com/guide/topics/resources/accessing-resources.html)

textView.setText(i) 返回 mp3 资源名称的原因是因为您实际上是在调用 setText(int resId)

[setText(int resId) JavaDoc](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)

您正在传递一个 int 参数，Android 将其解释为资源 ID 并为您执行 getResourceEntryName 转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:52:04.963

尝试使用“valueOf(i)”，否则它会尝试查找 i 的位置而不使用 i 的值。

# hash - 哈希函数编程

> ID：15266685
> 
> 赞同：0
> 
> 时间：2013-03-07T08:49:31.673
> 
> 标签：hash

我有一个哈希函数的程序：

```
 H(a || b || g || y1 || y2) 
```

其中 a、b、g、y1 和 y2 是输入。`SHA-2`如果我将这些输入用作哈希函数，谁能告诉我如何处理这些输入？这是否意味着我必须连接所有输入、执行 OR 操作或其他操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:52:36.487

如果这些输入是数字，您可以对它们进行异或运算，如果它们是字符串，则可以使用哨兵将它们连接起来。

# c# - SignalR 自托管服务器 500 错误

> ID：15266687
> 
> 赞同：4
> 
> 时间：2013-03-07T08:49:46.337
> 
> 标签：c#, signalr, signalr-hub

我最近对 ​​SignalR 产生了兴趣，但是无论多么简单，我都还没有生产出一个可以工作的服务器。

我遵循了 GitHub Self Host[文档](https://github.com/SignalR/SignalR/wiki/Self-host)，但收到了令人讨厌的 500 错误。

我使用的代码如下（基本上是 GitHub 代码）：

```
class Program
{
    static void Main(string[] args)
    {
        string host = "http://localhost:2804";

        using (WebApplication.Start<InitialConf>(host))
        {
            Console.WriteLine("Server started on {0}", host);
            Console.ReadKey();
        }
    }
}

class InitialConf
{
    public void Configuration(IAppBuilder appBuilder)
    {
        var config = new HubConfiguration
        {
            EnableCrossDomain = true
        };

        // Map to default /signalr route
        appBuilder.MapHubs(config);
    }
}

class fooHub : Hub
{
    public void DisplayTimeOnServer()
    {
        Console.WriteLine(DateTime.Now.ToString());
    }
} 
```

浏览以`http://localhost:2804/signalr`产生 500 错误：

```
HTTP/1.1 500 Internal Server Error
Content-Length: 0
Server: Microsoft-HTTPAPI/2.0 
```

我在应用程序中没有收到异常/错误，所以我不确定它为什么会这样。

有人对这些问题有任何经验吗？或者也许可以引导我获得关于此事的更好的文档？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-13T12:38:10.980

问题是您的 Hub 类是私有的。只需将其更改为公开即可。

```
public class fooHub : Hub
{
    public void DisplayTimeOnServer()
    {
        Console.WriteLine(DateTime.Now.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:55:01.583

您是否尝试在服务器上进行调试？

而且您在 Hub 中缺少一个功能/定义来通知您的客户：

```
Clients.All.addMessage(message); 
```

除此之外，我建议您检查以下资源：

SignalR 主页 - 教程：[http ://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

Scott 的介绍：[http ://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:34:02.703

为您的连接设置路由似乎有任何问题。应用程序运行后，您应该能够转到 /signalr/hubs 并查看有关集线器的详细信息。

# asp.net-mvc-3 - asp.net mvc3中的分页，其中列表来自目录条目

> ID：15266694
> 
> 赞同：0
> 
> 时间：2013-03-07T08:50:15.417
> 
> 标签：asp.net-mvc-3, pagination

我必须分页的列表实际上是目录中的条目。我没有从数据库中获取数据。我的控制器部分：

```
public ActionResult Index()
{
  // Iterate over all folders in the SCORM folder to find training material

  UrlHelper urlHelper = new UrlHelper(HttpContext.Request.RequestContext);
  string scormRelativePath = urlHelper.Content("~/ScormPackages");
  string scormRootDir = HttpContext.Server.MapPath(scormRelativePath);
  string scormSchemaVersion = string.Empty;
  string scormTitle = string.Empty;
  string scormDirectory = string.Empty;
  string scormEntryPointRef = string.Empty;
  string scormIdentifierRef = string.Empty;
  Int16 scormLaunchHeight = 640;
  Int16 scormLaunchWidth = 990;
  bool scormLaunchResize = false;
  string scormRelativeHtmlPath = string.Empty;

  List<ScormModuleInfo> modules = new List<ScormModuleInfo>();

  foreach (var directory in Directory.EnumerateDirectories(scormRootDir))
  {
    ScormModuleInfo module = new ScormModuleInfo();
    //more code
  }  
 } 
```

在我看来：

```
 <% int idx = 0;
   foreach (var module in Model)
   { %>
      //lists names of the folders in the ScormPackages directory
   } 
```

![在此处输入图像描述](../Images/eac9f4176e7e47a514852f3d28aba99a.png)

那么在这种情况下我将如何处理分页呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:16:37.097

您可以使用模块列表中类的`Skip`和`Take`扩展方法对列表进行分页。`Enumerable`

下面是一个完整的控制台应用程序，演示了如何执行此操作：

```
class Program
{
    static void Main(string[] args)
    {
        IList<string> lst = new List<string>
        {
            "One",
            "Two",
            "Three",
            "Four",
            "Five",
            "Six",
            "Seven",
            "Eight",
            "Nine",
            "Ten",
        };

        int pageSize = 3;
        int page = 2;

        var pagedLst = lst
                       .Skip((page - 1) * pageSize)
                       .Take(pageSize);

        foreach (string item in pagedLst)
        {
            Console.WriteLine(item);
        }
    }
} 
```

我会在您的控制器操作方法中进行分页和排序，并将排序列表传递给视图，这将使您的视图代码保持不变（您的视图不应该真正进行分页和排序本身）。

您的操作方法中的代码如下所示：

```
List<ScormModuleInfo> modules = new List<ScormModuleInfo>();

var pagedModules = modules
                   .Skip((page - 1) * pageSize)
                   .Take(pageSize); 
```

# mysql - 我的查询运行超过 4 秒帮助我在不到 1 秒的时间内获得结果

> ID：15266700
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:50:30.237
> 
> 标签：mysql, performance, query-performance

1.  我的查询运行时间超过 4 秒。
2.  我希望在不到 1 秒的时间内得到结果
3.  帮帮我。

询问：

```
SELECT a.index_id,
       title
FROM fb_indices a,
     fb_catalog_indices b FORCE INDEX (idx_1986)
WHERE a.index_id = b.index_id
  AND type = 'international'
  AND title IS NOT NULL 
```

解释计划：

```
mysql> explain select a.index_id,title from fb_indices a, fb_catalog_indices b force index (idx_1986) where a.index_id = b.index_id and type='international' and title is not NULL;
+----+-------------+-------+------+-----------------+----------+---------+----------------+------+-------------+
| id | select_type | table | type | possible_keys   | key      | key_len | ref            | rows | Extra       |
+----+-------------+-------+------+-----------------+----------+---------+----------------+------+-------------+
|  1 | SIMPLE      | a     | ref  | idx_836,idx_450 | idx_450  | 53      | const          |   79 | Using where |
|  1 | SIMPLE      | b     | ref  | idx_1986        | idx_1986 | 103     | cms.a.index_id |  590 | Using where |
+----+-------------+-------+------+-----------------+----------+---------+----------------+------+-------------+
2 rows in set (0.00 sec) 
```

结构：

```
mysql> show create table fb_indices\G
*************************** 1\. row ***************************
       Table: fb_indices
Create Table: CREATE TABLE `fb_indices` (
  `row_mod` datetime DEFAULT NULL,
  `row_create` datetime DEFAULT NULL,
  `index_id` varchar(100) COLLATE latin1_bin DEFAULT NULL,
  `description` varchar(255) COLLATE latin1_bin DEFAULT NULL,
  `country_id` varchar(2) COLLATE latin1_bin DEFAULT NULL,
  `index_level` int(11) DEFAULT NULL,
  `type` varchar(50) COLLATE latin1_bin DEFAULT NULL,
  `approval_flag` int(11) DEFAULT NULL,
  `username` varchar(255) COLLATE latin1_bin DEFAULT NULL,
  `search_product_type` int(11) DEFAULT NULL,
  `search_color` int(11) DEFAULT NULL,
  `search_price` int(11) DEFAULT NULL,
  UNIQUE KEY `idx_836` (`index_id`),
  KEY `idx_450` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin
1 row in set (0.00 sec)

mysql> show create table fb_catalog_indices\G
*************************** 1\. row ***************************
       Table: fb_catalog_indices
Create Table: CREATE TABLE `fb_catalog_indices` (
  `row_mod` datetime DEFAULT NULL,
  `row_create` datetime DEFAULT NULL,
  `index_id` varchar(100) COLLATE latin1_bin DEFAULT NULL,
  `website_id` varchar(50) COLLATE latin1_bin DEFAULT NULL,
  `title` varchar(100) COLLATE latin1_bin DEFAULT NULL,
  `subheading` longtext COLLATE latin1_bin,
  `product_ids` longtext COLLATE latin1_bin,
  `sub_index_ids` longtext COLLATE latin1_bin,
  `mapped_index_ids` longtext COLLATE latin1_bin,
  `username` varchar(100) COLLATE latin1_bin DEFAULT NULL,
  `content` longtext COLLATE latin1_bin,
  `meta_description` longtext COLLATE latin1_bin,
  `meta_tag_keyword` longtext COLLATE latin1_bin,
  `mapped_link_text` longtext COLLATE latin1_bin,
  `mapped_alt_tags` longtext COLLATE latin1_bin,
  `long_title` varchar(255) COLLATE latin1_bin DEFAULT NULL,
  `html_content` longtext COLLATE latin1_bin,
  `use_html_content` int(11) DEFAULT '0',
  `flash_size` longtext COLLATE latin1_bin,
  `custom_index_ids` longtext COLLATE latin1_bin,
  `html_header_1` longtext COLLATE latin1_bin,
  `html_header_2` longtext COLLATE latin1_bin,
  `search_product_type` int(11) DEFAULT NULL,
  `search_color` int(11) DEFAULT NULL,
  `search_price` int(11) DEFAULT NULL,
  `disable_rankings` int(11) DEFAULT NULL,
  `html_footer_1` longtext COLLATE latin1_bin,
  `dramashot_html` longtext COLLATE latin1_bin,
  `quickshop_image` longtext COLLATE latin1_bin,
  `sort_by_price_css` longtext COLLATE latin1_bin,
  `pagination_css` longtext COLLATE latin1_bin,
  `suppress_navigation` int(11) DEFAULT NULL,
  `suppress_quickshop_image` int(11) DEFAULT NULL,
  `mvt_control_script` longtext COLLATE latin1_bin,
  `mvt_tracking_script` longtext COLLATE latin1_bin,
  `enable_gbb_mouse` int(11) DEFAULT NULL,
  `enable_gbb_click` int(11) DEFAULT NULL,
  `last_modified_time` datetime DEFAULT NULL,
  `seo_footer_content` longtext COLLATE latin1_bin,
  `alternate_gfi` int(11) DEFAULT NULL,
  `zip_finder_html_content` longtext COLLATE latin1_bin,
  `disable_quick_view_widget` int(11) DEFAULT NULL,
  `indexpromo_title` varchar(255) COLLATE latin1_bin DEFAULT NULL,
  `indexpromo_style` longtext COLLATE latin1_bin,
  `background_color` text COLLATE latin1_bin,
  `sameday_text` text COLLATE latin1_bin,
  `productdesc_text` text COLLATE latin1_bin,
  `productprice_text` text COLLATE latin1_bin,
  `gbbcatalog_text` text COLLATE latin1_bin,
  `max_products_display` int(11) DEFAULT NULL,
  UNIQUE KEY `idx_1986` (`index_id`,`website_id`),
  KEY `idx_1055` (`website_id`),
  KEY `idx_836` (`index_id`),
  KEY `idx_1812` (`last_modified_time`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:02:16.947

创建以下索引：

```
CREATE INDEX idx_999 ON fb_indices (index_id, type); 
```

之后，此查询与您的查询等效，并且应该可以快速运行：

```
SELECT a.index_id,
       b.title
FROM fb_indices a
JOIN fb_catalog_indices b ON (a.index_id = b.index_id)
WHERE a.type = 'international'
  AND b.title IS NOT NULL 
```

提示：尽量不要强制使用索引 - 在你的情况下，这很痛苦。相反，创建一个适当的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:05:56.827

```
SELECT a.index_id,
       title
FROM fb_indices a,
     (
        SELECT 
            index_id 
        FROM 
            fb_catalog_indices 
        WHERE  
            type = 'international'
     ) as b 
WHERE a.index_id = b.index_id
  AND title IS NOT NULL 
```

# node.js - 使用 TCP 负载均衡器代理 WebSockets 而没有粘性会话

> ID：15266702
> 
> 赞同：37
> 
> 时间：2013-03-07T08:50:34.277
> 
> 标签：node.js, tcp, websocket, socket.io, load-balancing

我想使用 Amazon Elastic Load Balancer 将 WebSocket 连接代理到多个 node.js 服务器。由于 Amazon ELB 不提供实际的 WebSocket 支持，因此我需要使用它的 vanilla TCP 消息传递。但是，我试图了解如果没有某种粘性会话功能，这将如何工作。

我了解 WebSockets 通过首先从客户端发送 HTTP 升级请求来工作，该请求由服务器通过发送正确处理密钥身份验证的响应来处理。在服务器发送该响应并得到客户端的批准后，该客户端和服务器之间就建立了双向连接。

但是，假设客户端在批准服务器响应后，将数据发送到服务器。如果它将数据发送到负载均衡器，然后负载均衡器将该数据中继到未处理原始 WebSocket 升级请求的不同服务器，那么这个新服务器将如何知道 WebSocket 连接？还是客户端会自动绕过负载平衡器，直接将数据发送到处理初始升级的服务器？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-07T12:08:26.007

我认为为了回答这个问题，我们需要了解的是，在整个 WebSocket 创建过程中，底层 TCP 连接究竟是如何演变的。您将意识到*WebSocket*连接的关键部分是底层 TCP 连接本身。我不确定您在 WebSockets 上下文中的“会话”是什么意思。

在高层次上，启动“WebSocket 连接”需要客户端向 HTTP 服务器发送 HTTP GET 请求，而该请求包含`Upgrade`标头字段。现在，为了让这个请求发生，客户端需要建立到 HTTP 服务器的 TCP 连接（这可能很明显，但我认为在这里明确指出这一点很重要）。随后的 HTTP 服务器响应随后通过**相同**的TCP 连接发送。

请注意，现在，在发送服务器响应后，如果客户端或服务器没有主动关闭 TCP 连接，TCP 连接仍然是打开/活动的。

现在，根据 RFC 6455，WebSocket 标准，在[第 4.1 节](https://www.rfc-editor.org/rfc/rfc6455#section-4.1)的末尾：

> 如果服务器的响应按照上面的规定进行验证，则
> 表示*WebSocket 连接已建立*并且
> WebSocket 连接处于 OPEN 状态

我从这里读到，客户端在发送初始 HTTP GET（升级）请求之前启动的同一 TCP 连接将保持打开状态，从现在开始将用作全双工 WebSocket 连接的传输层。这是有道理的！

关于您的问题，这意味着负载均衡器只会在发出初始 HTTP GET（升级）请求*之前*发挥作用，即*在*两个通信端点之间建立所述 WebSocket 连接创建所涉及的唯一一个 TCP 连接之前. 此后，TCP 连接保持建立，并且不能被中间的网络设备“重定向”。

我们可以得出结论——在你的会话术语*中——TCP 连接定义了会话*。只要 WebSocket 连接处于活动状态（即未终止），它就*根据定义*提供并存在于自己的会话中。没有什么可以改变这个会话。然而，在这张图片中，两个独立的 WebSocket 连接不能共享同一个会话。

如果您使用“会话”来引用其他内容，那么它可能是应用层引入的会话，我们无法对此发表评论。

**编辑关于您的评论：**

> 所以你说负载均衡器不参与 TCP 连接

不，这不是真的，至少在一般情况下是这样。它肯定会影响 TCP 连接的建立，从某种意义上说，它可以决定如何处理客户端连接尝试。具体取决于负载均衡器的确切类型（*，见下文）。重要提示：在两个端点之间建立连接后——虽然我不认为负载均衡器是一个端点，但我指的是 WebSocket 客户端和 WebSocket 服务器——这两个端点在 WebSocket 连接的生命周期内将不再改变. 负载均衡器可能*仍在网络路径中，但可以假定不再受到影响。

> 因此全双工连接是在客户端和端服务器之间？

是的！

***有不同类型的负载平衡。根据类型的不同，负载均衡器在两个端点之间建立连接后的作用是不同的。例子：

*   如果负载平衡发生在 DNS 基础上，那么负载平衡器根本不参与最终的 TCP 连接。它只是告诉客户端必须**直接**连接到哪个主机。
*   如果负载均衡器的工作方式类似于 AWS 的第 4 层 ELB（[此处](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-listener-config.html)的文档），那么可以说代理 TCP 连接。因此，客户端实际上会将 ELB 本身视为服务器。然而，发生的情况是 ELB 只是在两个方向上转发包，而不做任何更改。因此，它仍然大量参与 TCP 连接，只是透明的。在这种情况下，实际上涉及两个永久 TCP 连接：一个从您到 ELB，一个从 ELB 到服务器。在您的 WebSocket 连接的整个生命周期内，这些都是永久性的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T16:26:06.400

WebSocket 使用持久的 TCP 连接，因此需要将该 TCP 连接的所有 IP 数据包转发到同一后端服务器（在 TCP 连接的生命周期内）。

它需要有粘性。这与能够基于每个 HTTP 请求进行调度的 L7 HTTP LB 不同。

LB 可以通过不同的方法进行粘性工作，即

*   将源 IP/端口散列到一组活动的后端服务器
*   在 TCP 连接建立后，选择一个后端服务器并记住

# java - 在 Rest Web Service Java 中从 ios 接收 NSData

> ID：15266705
> 
> 赞同：2
> 
> 时间：2013-03-07T08:50:42.513
> 
> 标签：java, ios, json, web-services, restful-url

```
ConfirmChallenge:(id)sender{
//  NSError *err;
NSStringEncoding encoding;
NSError *error;
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
SBJsonWriter *jsonWriter = [[SBJsonWriter alloc] init];
// NSString *jsonString = [jsonWriter stringWithObject:appDelegate.userSelection];
//    NSString *sendChallengeInfo = [appDelegate.URL stringByAppendingString: [NSString                stringWithFormat:@"FirstPickService/SaveChallenge?jsonChallengeDTO=%@",appDelegate.userSelection]];
 NSData* jsonData = [NSJSONSerialization dataWithJSONObject:appDelegate.userSelection options:kNilOptions     error:&error];

NSString *sendChallengeInfo = [appDelegate.URL stringByAppendingString:[NSString     stringWithFormat:@"FirstPickService/SaveChallenge?jsonChallengeDTO=%@",jsonData]];

//NSLog(@"send challenge info%@",appDelegate.userSelection);
//NSURL *JsonURLIN = [NSURL URLWithString:sendChallengeInfo];
//NSString *JsonDataIN = [[NSString alloc] initWithContentsOfURL:JsonURLIN  usedEncoding:&encoding  error:&error];
//NSLog(@"return value=%@",JsonDataIN);
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:sendChallengeInfo]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json;charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setHTTPBody:jsonData];
NSLog(@"jsondata=%@",sendChallengeInfo);
//NSLog(@"working");
[NSURLConnection connectionWithRequest:request delegate:self];
} 
```

从上面 jsonData 作为参数发送到下面的 RestFul 服务

```
@Produces("text/plain")
@GET              
@Path("/SaveChallenge")   
public String saveChallenge(@QueryParam("jsonChallengeDTO") JSONObject jsonObject) {                                                   
    String  data = jsonBusiness.createChallenge(jsonObject); 
    return data;             
} 
```

这里的问题是“无法接收从 ios 发送的数据”。

提前致谢

# wordpress - 将 Wordpress 元框添加到菜单管理页面

> ID：15266714
> 
> 赞同：1
> 
> 时间：2013-03-07T08:51:04.187
> 
> 标签：wordpress, menu, icons, meta-boxes

我知道如何在页面和帖子等中制作元框。但是如何为每个菜单项在外观-> 菜单页面中将元框添加到菜单页面。

添加的时候，菜单项有框：“导航标签”和“标题属性”。但是我想为每个菜单项设置另一个元框，以便管理员可以键入或选择一个 CSS 类，比如一个图标。

菜单项“主页”应该有一个主页图标，“关于”一个关于图标等等。

我该如何做到这一点？还是有其他我不知道的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:59:18.243

此功能是内置的。几乎所有的屏幕都有一个`Screen Options` [功能](http://codex.wordpress.org/Administration_Screens#Screen_Options)。在`Appearence -> Menus`，它有一个高级选项`CSS Classes`：

![导航菜单的 CSS 类](../Images/41a7d50594146b65a237c05198b90965.png)

# java - 阅读推特公开流

> ID：15266716
> 
> 赞同：0
> 
> 时间：2013-03-07T08:51:12.577
> 
> 标签：java, twitter4j

我正在尝试阅读 twitter 公共流，我使用了 twitter4j Java 库来执行此操作。

[示例代码](http://twitter4j.org/en/code-examples.html)部分“流式 API”中给出的示例表明它应该像下面这样编码

```
StatusListener listener = new MyStatusListener();
TwitterStream twitterStream = new TwitterStreamFactory(listener).getInstance(); 
```

这里 MyStatusListener 实现了 StatusListener 接口。但是在创建 TwitterStreamFactory 对象时出现错误（无法解析构造函数 TwitterStreamFactory(twitter4j.Listener)），有没有人遇到过这个问题。请评论任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:13:17.593

您使用`TwitterStreamFactory`不正确。

试试这个：

```
StatusListener listener = new MyStatusListener();
TwitterStream twitterStream = new TwitterStreamFactory().getInstance();
twitterStream.addListenter(listener); 
```

您还需要向`FilterQuery`实例`twitterStream`添加一个

# android - 上下文菜单不适用于可扩展列表视图项

> ID：15266719
> 
> 赞同：1
> 
> 时间：2013-03-07T08:51:22.963
> 
> 标签：android, contextmenu, expandablelistview

我想为 android 中的可扩展列表子项实现上下文菜单。我正在使用以下代码 -

```
mExpandableListView.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View view,
                    int arg2, long arg3) {

                int type =ExpandableListView.getPackedPositionType(arg3);

                int groupPos = ExpandableListView.getPackedPositionGroup(arg3);
                int childPos = ExpandableListView.getPackedPositionChild(arg3);

                if(type==ExpandableListView.PACKED_POSITION_TYPE_CHILD){
                    registerForContextMenu(getExpandableListView().getChildAt(arg2));
                    Toast.makeText(getApplicationContext(), "Hello Hello"+"  "+groupPos+" "+childPos, 0).show();
                }
                return true;
            }
        });

@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        ExpandableListView.ExpandableListContextMenuInfo info =
            (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;

        int type =
            ExpandableListView.getPackedPositionType(info.packedPosition);

        int group =
            ExpandableListView.getPackedPositionGroup(info.packedPosition);

        int child =
            ExpandableListView.getPackedPositionChild(info.packedPosition);

        menu.setHeaderTitle("CCM");
        menu.setHeaderIcon(R.drawable.ic_launcher);
        menu.add(0, v.getId(), 0, "HelloCCM");      

    } 
```

但是根本没有打开上下文菜单。

请帮我弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T09:18:09.400

你加了吗

```
registerForContextMenu(mExpandableListView); 
```

初始化视图时？

# powershell - 活动目录 PowerShell

> ID：15266729
> 
> 赞同：0
> 
> 时间：2013-03-07T08:51:45.387
> 
> 标签：powershell

对于 PowerShell 2.0

我的意思是使用 Windows PowerShell 管理 Active Directory。我有一个应用程序服务器，我在其中安装了带有 ActiveDirectory PowerShell CmdLets 的 RSAT。例如，当我为 AD cmdlet 运行命令时；Get-ADOrganizationalUnit 它给了我一条错误消息。“找不到运行 Active Directory Web 服务的默认服务器。”

经过研究，我发现了2篇文章：

[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=2852](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=2852) - 安装 AD 管理网关服务。

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/08/29/use-active-directory-cmdlets-with-powershell-to-find-users.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/08/29/use-active-directory-cmdlets-with-powershell-to-find-users.aspx)

问题：

由于所有域控制器都在 Windows Server 2003 上运行，是否真的需要安装 AD 管理网关服务？

还有其他 EASY :) 像 AD CmdLets 这样查询 AD 的方法吗？我知道 Quest 是另一条路线，但我不能使用它，因为我被禁止安装任何 3rd Party CMDLETS。

提前致谢，

拉吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:39:46.213

> 由于所有域控制器都在 Windows Server 2003 上运行，是否真的需要安装 AD 管理网关服务？

**是的。**

> 还有其他 EASY :) 像 AD CmdLets 这样查询 AD 的方法吗？我知道 Quest 是另一条路线，但我不能使用它，因为我被禁止安装任何 3rd Party CMDLETS。

最简单的方法是 Quest 模块，但如果您无法安装它，我建议您使用 .net 类

[system.directoryservices.accountmanagement](http://richardspowershellblog.wordpress.com/2008/05/25/system-directoryservices-accountmanagement/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:17:19.343

也许可以使用 ADSI 接口？

查看以下文章： [http ://social.technet.microsoft.com/wiki/contents/articles/4231.working-with-active-directory-using-powershell-adsi-adapter.aspx](http://social.technet.microsoft.com/wiki/contents/articles/4231.working-with-active-directory-using-powershell-adsi-adapter.aspx)

/弗雷德里克

# android - android中listview的无限滚动

> ID：15266732
> 
> 赞同：3
> 
> 时间：2013-03-07T08:51:50.007
> 
> 标签：android, listview, scrollview

现在我应该实现无限滚动到列表视图，为此我找到了一个最简单的代码，即

```
 @Override
 public void onScroll(AbsListView view, int firstVisibleItem,
    int visibleItemCount, int totalItemCount) {
//leave this empty
 }

  @Override
  public void onScrollStateChanged(AbsListView view, int scrollState) {
   if (scrollState == SCROLL_STATE_IDLE) {
    if (listView.getLastVisiblePosition() >= listView.getCount() - threshold) {
        currentPage++;
        //load more list items:
        loadElements(currentPage);
    }
     }
    } 
```

但现在我不知道如果 loadElements(current Page) 包含什么内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T09:11:55.560

这是给您的示例代码。此列表无限滚动并使用线程，它会自动滚动。（停顿片刻，然后继续……）

当您触摸列表时，列表滚动会暂停，当您松开它时会继续自动滚动。

如果您触摸不到 100 毫秒，那么它会被视为点击项目。

您也可以向下或向上滚动，它最终会继续自动滚动。

想想看，它已经变成了类似网络的列表。耻辱。:(

///////////////////////////////////////// ///////////////////

列表项 XML 布局：item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp"
    android:orientation="vertical" >
    <TextView 
        android:background="#00ff00"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:id="@+id/name"
        android:textColor="#000000"
        android:textSize="26sp"
        android:gravity="center"
        android:textStyle="bold"/>

</LinearLayout> 
```

///////////////////////////////////////// ///////////////////

活动布局：activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="25dp"
    android:gravity="center"
    tools:context=".MainActivity" >

   <ListView 
       android:id="@+id/list"
       android:layout_width="fill_parent"
       android:layout_height="450dp"
       android:background="#bbbbbb"
       android:divider="#000000"/>

</RelativeLayout> 
```

///////////////////////////////////////// ///////////////////

活动代码（包括适配器和可运行线程）：MainActivity.java

```
public class MainActivity extends Activity {
    ListView  list;
    long startTime;
    long endTime;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        list = (ListView) findViewById(R.id.list);
        List<String> mList = new ArrayList<String>();
        String str;
        for(int i=0;i<10;i++){
            str = new String("Data --- "+i);
            mList.add(str);
        }
        LAdapter adapter = new LAdapter(this,0,mList);
        list.setAdapter(adapter);
        final YourRunnable runy = new YourRunnable();

        list.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_DOWN ){

                    startTime= (new Date()).getTime();
                    runy.onPause();//pausing thread actually pauses scrolling
                }
                if(event.getAction() == MotionEvent.ACTION_UP){
                    endTime= (new Date()).getTime();
                    if((endTime - startTime)<=100){//100 mill second limit for click

                        //Log.i("ITEM CLICK() ", "item : ");
                    }

                    runy.onResume(); //resume scrolling         
                }

                return false;
            }

        });

        new Thread(runy).start();

    }

    class YourRunnable implements Runnable {
        private Object mPauseLock;
        private boolean mPaused;
        private boolean mFinished;

        public YourRunnable() {
            mPauseLock = new Object();
            mPaused = false;
            mFinished = false;
        }

        public void run() {
            while (!mFinished) {
                //for loop is not infinite but enough as Integer.MAX_VALUE
                 for (int index = 0; index < list.getAdapter().getCount(); index++) {
                        list.smoothScrollToPositionFromTop(list.getLastVisiblePosition() + 1, 0, 10000);
                        try {
                            // it helps scrolling to stay smooth as possible (by experiment)
                            Thread.sleep(10000);
                            synchronized (mPauseLock) {
                                while (mPaused) {
                                    try {
                                        mPauseLock.wait();//putting thread in wait list of mPauseLock object
                                    } catch (InterruptedException e) {
                                    }
                                }
                            }
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }

            }
        }

        /**
         * Call this method to pause thread.
         */
        public void onPause() {
            synchronized (mPauseLock) {
                mPaused = true;
            }
        }

        /**
         * Call this method to resume thread.
         */
        public void onResume() {
            synchronized (mPauseLock) {
                mPaused = false;
                mPauseLock.notifyAll();//notify all object that are waiting on the wait list of mPauseLock object
            }
        }

    }
    private class LAdapter extends ArrayAdapter{

        List<String> mlist;
        Context mContext;
        LayoutInflater inflater;
        public final int HALF_MAX_VALUE = Integer.MAX_VALUE/2;
        public final int MIDDLE;

        public LAdapter(Context ctx,int resId, List<String> objects){
            super(ctx, resId, objects);
            mContext = ctx;
            mlist = objects;
            inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            MIDDLE = HALF_MAX_VALUE - HALF_MAX_VALUE % mlist.size();

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return Integer.MAX_VALUE;
        }

        @Override
        public String getItem(int position) {
            // TODO Auto-generated method stub
            int relativePos = position %  mlist.size();
            Log.i("RELATIVE : "," POS:"+relativePos);
            return mlist.get(relativePos);
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

//          Log.i("POSITION TAG", "POSITION : "+position);
//          if(position>(getCount()-1)){
//              return null;
//          }
            ViewHolder holder = null;

            if (convertView == null) 
            {
                holder = new ViewHolder();
                convertView = inflater.inflate(R.layout.item, parent, false);
                holder.name = (TextView) convertView.findViewById(R.id.name);
                convertView.setTag(holder);
            } 
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }

            String model = getItem(position);
            holder.name.setText(model);

            convertView.setOnClickListener(new ListenerT(model) {

                @Override
                public void onClick(View v) {
                    Log.i("CLICK", "ITEM---"+name );

                }
            });

            return convertView;

        }

    }

    //use your own listener to pass parameter
    private class ListenerT implements OnClickListener{

        String name;
        public ListenerT(String nm){
            name = nm;
        }
        @Override
        public void onClick(View v) {

        }

    }
    private class ViewHolder{
        TextView name;
    }

} 
```

# android - 从静音模式切换时出现问题

> ID：15266736
> 
> 赞同：0
> 
> 时间：2013-03-07T08:51:59.303
> 
> 标签：android

我正在做一个检测来电的程序，如果应用程序处于静音模式，它会切换到一般模式并响铃。我曾使用广播接收器来监听来电，并从中启动服务。

我正在使用的广播接收器是

```
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    AudioManager am = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);

    switch (am.getRingerMode()) {
        case AudioManager.RINGER_MODE_SILENT:
            Log.i("MyApp","Silent mode");
            Intent IncomingNumberIntent = new Intent(context,RingOnSilent.class);  
  //             IncomingNumberIntent.putExtra("PhoneNumber", phonenumber);
             context.startService(IncomingNumberIntent); 
            break;
        case AudioManager.RINGER_MODE_VIBRATE:
            Log.i("MyApp","Vibrate mode");
            break;
        case AudioManager.RINGER_MODE_NORMAL:
            Log.i("MyApp","Normal mode");
            break;
    }
} 
```

从那里开始服务，

```
 @Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
  @SuppressWarnings("deprecation")
 @Override
  public void onStart(Intent intent, int startId) {
// TODO Auto-generated method stub
am = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
super.onStart(intent, startId);
} 
```

问题出在第一次安装后切换正常但不响铃。但在那之后它响了。任何人都可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:16:41.970

也许你应该在你的服务中首先调用“super”。像这样：

```
 @SuppressWarnings("deprecation")
    @Override
    public void onStart(Intent intent, int startId) {
      // TODO Auto-generated method stub
      super.onStart(intent, startId); 
      am = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
      am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    } 
```

否则在调用其他东西时你的服务可能还没有准备好。应该始终首先调用 Super 以从其父类“初始化”东西。

# php - MySQL：重复输入时，更新不同的数据库？

> ID：15266737
> 
> 赞同：0
> 
> 时间：2013-03-07T08:51:59.510
> 
> 标签：php, mysql

如果条目已存在于数据库中，我使用以下代码插入详细信息或仅更新成本。

```
$update = mysql_query
("
    INSERT INTO details (id, name, team, cost) 
    VALUES ('$id', '$name', '$team', '$cost') 
    ON DUPLICATE KEY UPDATE cost = '$cost' 
") 
or die (mysql_error()); 
```

使用 PHP 和/或 MySQL，我将如何使用仅当发生更改时的日志来更新单独的不同数据库。我要存储的信息是 ID、姓名、团队、旧成本、新成本。我已经设置了数据库，但不知道如何让我的页面识别重复，然后在发生重复时运行代码。

基本上它是一个价格变化的足球网站。我想在价格变化时更新数据库。

感谢您提供的任何建议，或者如果这个问题不清楚，请告诉我。

# oracle - 在 oracle 中运行字符串作为查询

> ID：15266740
> 
> 赞同：2
> 
> 时间：2013-03-07T08:52:08.153
> 
> 标签：oracle, sequence, execute-immediate, ora-06512

我在 Oracle 中遇到了一个小问题。我尝试创建一个序列，用于在已包含数据的表中生成 ID。我尝试使用以下匿名块。

```
declare y varchar2(2000);
BEGIN
  SELECT 'CREATE SEQUENCE ID_SEQ MINVALUE 1 MAXVALUE 9999999999 START WITH ' || (max(ID)+1) || ' INCREMENT BY 1 CACHE 20;' INTO y FROM TEST_TABLE;
  --dbms_output.put_line(y);
  execute immediate y;
end; 
```

我收到以下错误：

```
Error report:
ORA-00911: invalid character
ORA-06512: at line 5
00911\. 00000 -  "invalid character" 
```

如果我执行 y 变量的值，它会完美运行。我使用 SQL Developer 作为输入接口并在 11g r2 Oracle 服务器上工作。我发现了类似的代码，其中“INCREMENT BY”参数是由脚本生成的。有人可以解释我的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T08:58:00.400

当 you 时`execute immediate`，您运行的命令不应以分号结尾；这是 SQL Developer（以及[SQL*Plus](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_four.htm#autoId8)和其他客户端）中的命令分隔符，而不是 SQL 语句本身的一部分。

```
SELECT 'CREATE SEQUENCE ID_SEQ MINVALUE 1 MAXVALUE 9999999999 START WITH '
    || (max(ID)+1) || ' INCREMENT BY 1 CACHE 20' INTO y FROM TEST_TABLE; 
```

这在[普通 SQL 的示例中](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#autoId5)显示。只是为了帮助您混淆，如果您在动态 SQL 中使用 PL/SQL，您仍然需要适合 PL/SQL 本身的分号 - 尽管不是`/`您用来直接从客户端运行它的执行。这在[其他示例](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#autoId6)中有所体现。

# php - Drupal 错误：未定义偏移量：0 错误和 Fastcgi

> ID：15266749
> 
> 赞同：0
> 
> 时间：2013-03-07T08:52:44.367
> 
> 标签：php, drupal, fastcgi, plesk

感谢您阅读本文。如果有一个简单的解决方案，我深表歉意，但我已经通过论坛/谷歌找到了解决方法，但还没有运气。

我收到通知：未定义的偏移量：0 错误。着陆页呈现，但所有链接都直接指向“未找到”错误页面。

这两个问题有关系吗？我在某处读到，Notice: Undefined offset: 0 error 是因为没有 fastcgi 作为 php 渲染引擎。这个对吗？这会解决这个问题吗？

服务器是基于 Windows 的 Plesk。

您可以在此处查看问题 [http://southbaypontoons.com.au/](http://southbaypontoons.com.au/)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:01:44.700

第一个问题，您的所有链接都收到 404 文件错误，这看起来可能是重写问题。

我不确定您在 Plesk for Windows 中使用的是什么网络服务器，但很可能是 IIS——Windows 附带的网络服务器。

请参阅此页面以获取重写规则：[http://drupal.org/node/3854](http://drupal.org/node/3854)

如果您有 IIS 的 IIS 重写插件（[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)），这将起作用。如果它不是您自己的服务器，您可能需要让您的虚拟主机启用它。

至于丢失的图像-它们就在那里。例如在[http://southbaypontoons.com.au/sites/default/files/banner/slider-img1.jpg](http://southbaypontoons.com.au/sites/default/files/banner/slider-img1.jpg) ... 这是主页顶部的图像。

似乎您需要浏览所有的 drupal 内容并删除所有图像前面的 /drupal/ 。

# c# - 在 MVC3 中，如何获取发布到我的操作的 DataContract 属性对象？

> ID：15266756
> 
> 赞同：1
> 
> 时间：2013-03-07T08:53:05.530
> 
> 标签：c#, .net, asp.net-mvc-3, datacontract

我必须实现一个我这样声明的方法：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = @"whatever")]
void MyMethod(InputContainer input); 
```

where`InputContainer`被声明为`DataContract`：

```
[DataContract(Namespace = "whatever")]
public class InputContainer : IExtensibleDataObject
{
    //[DataMember]s inside
} 
```

现在在我的代码中，我有一个调用将映射到的操作：

```
[HttpPost]
ActionResult MyMethod()
{
    // How do I get the InputContainer object here?
} 
```

我只见过使用[`ReadAsAsync()`](https://stackoverflow.com/q/10399324/57428)它的样本，它依赖于我不想避免的另一个程序集。无论如何，我怀疑`ReadAsAsync()`是一些我可以复制的辅助方法。

如何将`DataContract`-attributed 对象`POST`添加到我的 MVC3 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:49:22.990

这不会开箱即用。如果我在`InputContainer`我的操作中添加一个类型的参数 - 它将被默认初始化，POST 正文中的值将被忽略。

[需要从这里](http://gregbeech.com/blog/deserializing-the-request-body-into-a-parameter-with-asp-net-mvc)额外接线。首先需要一个实现来`IModelBinder`访问 HTTP 请求`InputStream`并使用`DataContractSerializer`. 然后需要一个从其实现`CustomModelBinderAttribute`返回上述实现的子类。让我们假设它被称为。完成所有这些后，只需将属性添加到参数：`IModelBinder``GetBinder()``MagicAttribute`

```
[HttpPost]
ActionResult MyMethod([Magic] InputContainer input)
{
} 
```

# registration - GCMRegistrat.getRegistrationId(this) 返回一个空字符串

> ID：15266768
> 
> 赞同：1
> 
> 时间：2013-03-07T08:53:45.370
> 
> 标签：registration, google-cloud-messaging

我知道网上有很多关于这个话题的类似问题，但我觉得我做了每个人所说的一切。当我说

```
final String regId = GCMRegistrar.getRegistrationId(this); 
```

它正在回馈一个 amty 字符串。但后来在我的 LogCat 中，它指出该设备确实是使用 regId 注册的。

这是我的代码：

PushAndroidActivity.java

```
package com.w.v;

import static com.w.v.CommonUtilities.SENDER_ID;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.w.v.ServerUtilities;
import com.google.android.gcm.GCMRegistrar;

public class PushAndroidActivity extends Activity {

private String TAG = "** pushAndroidActivity **";
private TextView mDisplay;
AsyncTask<Void, Void, Void> mRegisterTask;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    checkNotNull(SENDER_ID, "SENDER_ID");

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);

    Intent i = getIntent();
    String name         = i.getStringExtra("namepass");
    String email        = i.getStringExtra("emailpass");
    String password     = i.getStringExtra("passwordpass");
    String id           = i.getStringExtra("idpass");

    //setContentView(R.layout.main);
    //mDisplay = (TextView) findViewById(R.id.display);

        final String regId = GCMRegistrar.getRegistrationId(this);
            Log.i(TAG, "registration id =====  "+regId);

            if (regId.equals("")) {
                GCMRegistrar.register(this, SENDER_ID);
                Toast.makeText(getApplicationContext(), "Registered with GCM", Toast.LENGTH_LONG).show();
                Log.d("SENDER_ID =",SENDER_ID);
            } else {
                // Device is already registered on GCM
                if (GCMRegistrar.isRegisteredOnServer(this)) {
                    // Skips registration.              
                    Toast.makeText(getApplicationContext(), "Already registered with GCM", Toast.LENGTH_LONG).show();
                } else {
                    // Try to register again, but not in the UI thread.
                    // It's also necessary to cancel the thread onDestroy(),
                    // hence the use of AsyncTask instead of a raw thread.
                    final Context context = this;
                    mRegisterTask = new AsyncTask<Void, Void, Void>() {

                        @Override
                        protected Void doInBackground(Void... params) {
                            // Register on our server
                            // On server creates a new user

                            Intent i = getIntent();
                            String name         = i.getStringExtra("namepass");
                            String email        = i.getStringExtra("emailpass");
                            String password     = i.getStringExtra("passwordpass");
                            String id           = i.getStringExtra("idpass");

                            ServerUtilities.register(context, name, email, regId);

                            Log.d("name",name);
                            Log.d("email",email);
                            Log.d("regId",regId);

                            return null;
                        }

                        @Override
                        protected void onPostExecute(Void result) {
                            mRegisterTask = null;
                        }

                    };
                    mRegisterTask.execute(null, null, null);
                }
            }

            Intent dashboard = new Intent(getApplicationContext(), WebViewActivity.class);
                dashboard.putExtra("namepass", name);
                dashboard.putExtra("emailpass", email);
                dashboard.putExtra("passwordpass", password);
                dashboard.putExtra("idpass", id);
                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(dashboard);

            //mDisplay.setText("ffffff        "+regId);
        }

    private void checkNotNull(Object reference, String name) {
        if (reference == null) {
            throw new NullPointerException(getString(R.string.error_config, name));
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        GCMRegistrar.unregister(this);
    }
} 
```

GCMIntentService.java

```
package com.w.v;

import static com.w.v.CommonUtilities.SENDER_ID;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService{

    public GCMIntentService() {
        super(SENDER_ID);
    }

    private static final String TAG = "===GCMIntentService===";

    @Override
    protected void onRegistered(Context arg0, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
    }

    @Override
        protected void onUnregistered(Context arg0, String arg1) {
        Log.i(TAG, "unregistered = "+arg1);
    }

    @Override
        protected void onMessage(Context arg0, Intent arg1) {
        Log.i(TAG, "new message= ");
    }

    @Override
        protected void onError(Context arg0, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
    }

    @Override
        protected boolean onRecoverableError(Context context, String errorId) {
        return super.onRecoverableError(context, errorId);
    }
} 
```

在 android 4.2.2 中运行应用程序时的 LogCat

```
03-07 09:39:29.001: W/Bundle(20972): Key idpass expected String but value was a java.lang.Integer.  The default value <null> was returned.
03-07 09:39:29.001: W/Bundle(20972): Attempt to cast generated internal exception:
03-07 09:39:29.001: W/Bundle(20972): java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String
03-07 09:39:29.001: W/Bundle(20972):    at android.os.Bundle.getString(Bundle.java:1069)
03-07 09:39:29.001: W/Bundle(20972):    at android.content.Intent.getStringExtra(Intent.java:4302)
03-07 09:39:29.001: W/Bundle(20972):    at com.w.v.PushAndroidActivity.onCreate(PushAndroidActivity.java:36)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.Activity.performCreate(Activity.java:5104)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-07 09:39:29.001: W/Bundle(20972):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 09:39:29.001: W/Bundle(20972):    at android.os.Looper.loop(Looper.java:137)
03-07 09:39:29.001: W/Bundle(20972):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-07 09:39:29.001: W/Bundle(20972):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 09:39:29.001: W/Bundle(20972):    at java.lang.reflect.Method.invoke(Method.java:511)
03-07 09:39:29.001: W/Bundle(20972):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-07 09:39:29.001: W/Bundle(20972):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-07 09:39:29.001: W/Bundle(20972):    at dalvik.system.NativeStart.main(Native Method)
03-07 09:39:29.001: I/** pushAndroidActivity **(20972): registration id =====  
03-07 09:39:29.001: D/GCMRegistrar(20972): resetting backoff for com.w.v
03-07 09:39:29.001: V/GCMRegistrar(20972): Registering app com.w.v of senders 611573915552
03-07 09:39:29.016: D/SENDER_ID =(20972): 611573915552
03-07 09:39:29.040: D/GCMRegistrar(20972): resetting backoff for com.w.v
03-07 09:39:29.040: V/GCMRegistrar(20972): Unregistering app com.w.v
03-07 09:39:29.079: D/dalvikvm(20972): GC_CONCURRENT freed 579K, 6% free 11104K/11712K, paused 4ms+4ms, total 45ms
03-07 09:39:29.133: D/webviewglue(20972): nativeDestroy view: 0x5cf71940
03-07 09:39:29.211: V/GCMBroadcastReceiver(20972): onReceive: com.google.android.c2dm.intent.REGISTRATION
03-07 09:39:29.211: V/GCMBroadcastReceiver(20972): GCM IntentService class: com.w.v.GCMIntentService
03-07 09:39:29.211: V/GCMBaseIntentService(20972): Acquiring wakelock
03-07 09:39:29.297: V/GCMBaseIntentService(20972): Intent service name: GCMIntentService-611573915552-5
03-07 09:39:29.297: D/GCMBaseIntentService(20972): handleRegistration: registrationId = APA91bFJW_CNYh5AYKomkUPvVGvQay0WgL_GH8DdoxooBXcJSo1ryONrB4VcsRysYedx-oKjgDiPSzhrXR6s8HBH7pIl47SvYR5chuJtJWlymZVRm8j7E77F3TirMqF3ag5D8lbOScTVzzA6ZqWMhTDdiAYPkYc5Hw, error = null, unregistered = null
03-07 09:39:29.297: D/GCMRegistrar(20972): resetting backoff for com.w.v
03-07 09:39:29.297: V/GCMBroadcastReceiver(20972): onReceive: com.google.android.c2dm.intent.REGISTRATION
03-07 09:39:29.297: V/GCMBroadcastReceiver(20972): GCM IntentService class: com.w.v.GCMIntentService
03-07 09:39:29.297: V/GCMBaseIntentService(20972): Acquiring wakelock
03-07 09:39:29.297: V/GCMRegistrar(20972): Saving regId on app version 2
03-07 09:39:29.321: I/===GCMIntentService===(20972): Device registered: regId = APA91bFJW_CNYh5AYKomkUPvVGvQay0WgL_GH8DdoxooBXcJSo1ryONrB4VcsRysYedx-oKjgDiPSzhrXR6s8HBH7pIl47SvYR5chuJtJWlymZVRm8j7E77F3TirMqF3ag5D8lbOScTVzzA6ZqWMhTDdiAYPkYc5Hw
03-07 09:39:29.321: V/GCMBaseIntentService(20972): Releasing wakelock
03-07 09:39:29.329: D/GCMBaseIntentService(20972): handleRegistration: registrationId = null, error = null, unregistered = com.w.v
03-07 09:39:29.329: D/GCMRegistrar(20972): resetting backoff for com.w.v
03-07 09:39:29.329: V/GCMRegistrar(20972): Saving regId on app version 2
03-07 09:39:29.344: I/===GCMIntentService===(20972): unregistered = APA91bFJW_CNYh5AYKomkUPvVGvQay0WgL_GH8DdoxooBXcJSo1ryONrB4VcsRysYedx-oKjgDiPSzhrXR6s8HBH7pIl47SvYR5chuJtJWlymZVRm8j7E77F3TirMqF3ag5D8lbOScTVzzA6ZqWMhTDdiAYPkYc5Hw
03-07 09:39:29.344: V/GCMBaseIntentService(20972): Releasing wakelock 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.w.v"
    android:versionCode="2"
    android:versionName="1.1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission android:name="com.w.v.permission.C2D_MESSAGE"
                android:protectionLevel="signature" />
    <uses-permission android:name="com.w.v.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/v_icon_72_72"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >

        <activity android:name=".OpenApp" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".LoginActivity" >
            <intent-filter>
                <action android:name="com.w.v.LoginActivity" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".WebViewActivity"
            android:label="WebView" 
            android:noHistory="true">
        </activity>

        <activity
            android:name=".PushAndroidActivity"
            android:label="PushAndroid" >
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.w.v" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />

    </application>

</manifest> 
```

[我在本](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)教程的帮助下构建了这个应用程序

任何帮助将不胜感激！！提前Tnx！

PS：我知道这里有一些我目前不使用的代码。它是为了将来的目的

# sencha-touch-2 - sencha touch~加载更多事件触发时重置额外参数

> ID：15266769
> 
> 赞同：1
> 
> 时间：2013-03-07T08:53:47.197
> 
> 标签：sencha-touch-2, refresh, paging, param

当加载更多甚至火时，我需要重新分配额外的参数。但我没有任何想法

这是我的代码

List.js

```
Ext.define('bluebutton.view.BlueButton.TestingList', {
    extend: 'Ext.List',
    xtype: 'testinglistcard',
    requires: [
        'Ext.field.Select',
        'Ext.field.Search',
//        'bluebutton.view.BlueButton.MemberDetail',
         'Ext.plugin.ListPaging',
        'Ext.plugin.PullRefresh',
        'Ext.dataview.Override'

    ],
    config: {

        styleHtmlContent: true,
        scrollable: 'vertical',
        indexBar: true,
        singleSelect: true,
        onItemDisclosure: true,
        grouped: true,
        variableHeights : false,
          store : { xclass : 'bluebutton.store.BlueButton.Testing'},
            itemHeight :100,
        loadingText : 'loading',
        id :'testinglist',

                       plugins: [

                            { xclass: 'Ext.plugin.PullRefresh',
                                refreshFn: function() {             

                                        var transaction = Ext.ModelMgr.getModel('bluebutton.model.BlueButton.Testing');
                                        var proxy  = transaction.getProxy();
                                         proxy.setExtraParam('refresh', 'true' );

                                            Ext.getStore('testingstore').load();

                                    },

                            },

                          { 
                               xclass: 'Ext.plugin.ListPaging',
                                 autoPaging: true,
                                  loadNextPage: function() {

                                   var transaction = Ext.ModelMgr.getModel('bluebutton.model.BlueButton.Testing');
                                        var proxy  = transaction.getProxy();
                                         proxy.setExtraParam('refresh',  );

                                            Ext.getStore('testingstore').load();

                                 }

                        },
                ],

         masked: {
                xtype: 'loadmask',
                message: 'loading...'
            }, // masked

        emptyText: '<p class="no-search-results">No member record found matching that search</p>',
        itemTpl: Ext.create(
            'Ext.XTemplate',
            '<div class="tweet-wrapper">',
                '<table>',
                    '<tr>',

                        '<td>',
                        '   <div class="tweet">',
                        '       <h3>{invoiceId}</h3>',
                        '      <h3>Name: {billNumber}</h3>',
                        '       <h3>Point Avalaible : {invoiceDate} , Last Visited : {invoiceAmount}</h3>',

                        '   </div>',
                        '</td>',
                    '</tr>',
                '</table>',
            '</div>'

        ),

    },

}); 
```

Store.js

```
 Ext.define('bluebutton.store.BlueButton.Testing', {
    extend: "Ext.data.Store",
    requires: ['bluebutton.model.BlueButton.Testing'],
    config: {

      grouper: {
            groupFn: function (record) {
                return record.get('invoiceId')[0];
            }
        },
         model :'bluebutton.model.BlueButton.Testing',
      storeId :'testingstore',
        autoLoad: true,
          pageSize: 5,
            clearOnPageLoad: false, 

    }
}); 
```

模型.js

```
 Ext.define('bluebutton.model.BlueButton.Testing', {
    extend: 'Ext.data.Model',
    config: {

        idProperty: 'testingModel',
        fields: [
            {  name :'invoiceId'},
            {  name: 'billNumber' },
            {  name: 'invoiceDate' },
            {  name: 'invoiceAmount' },
            {  name :'downloadLink'},
            {  name: 'refresh' },

        ],

        proxy: {
            type: 'rest',
           url: 'http://192.168.251.108:8080/RESTFulExample/rest/json/metallica/invoicejsonPost',
            reader: 'json',
            actionMethods: {
                create: 'POST',
                read: 'GET',
                update: 'PUT',
                destroy: 'DELETE'
            },

                noCache: false, // get rid of the '_dc' url parameter

//                    extraParams: {
//                    userid: "test",
//                    // add as many as you need
//                },

            reader: {
                type: 'json',
                rootProperty: 'invoice'
            },

            writer: {
                type: 'json',

            },
        }

    }

}); 
```

当我刷新列表时，我需要将额外的参数“**刷新”分配给 true。**另一方面，如果加载更多事件触发，我需要将参数**刷新**分配为 false。请给我解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T08:39:01.207

我不认为你可以按照你要求的方式去做。但是您可以收听 load 事件并在那里更改刷新参数。

```
{
xtype: 'store',
//Your Code
listeners: {
load: function(store){
  store.getProxy.setExtraParam('refresh', false);
}
}
} 
```

希望能帮助到你

# spring - Spring Batch 读取文件及相关记录

> ID：15266771
> 
> 赞同：-1
> 
> 时间：2013-03-07T08:54:07.370
> 
> 标签：spring, batch-processing, spring-batch

我正在使用弹簧批处理来读取平面文件。该文件有相关记录。即，可以有一个父记录和任意数量的子记录，我想读取所有记录并调用 Web 服务来存储它。我还想捕获关系并将其存储。一个挑战是子记录可以在文件中的任何位置。而且孩子也可以有很多孩子的记录。我无法用spring batch找到这个问题的解决方案。请提供您的建议

更新：我没有任何选择使用数据库作为数据的临时存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:05:21.697

我通过多次处理文件解决了这个问题。

在每次通过时，我都会尝试使用这样的 alg 读取\处理文件中的每条记录：

*   如果记录有父级 - 检查父级是否已存储。如果没有 - 我在处理器中跳过它
*   如果记录未更改（或者如果无法更新，则已存储）- 在处理器中跳过它
*   else - 存储在数据库中

然后声明循环和决策者：

```
 <batch:step id="processParentAndChilds" next="loop">
        <batch:tasklet>
            <batch:chunk reader="processParentAndChildsReader"
                         commit-interval="1000">
                <batch:processor>
                    <bean class="processParentAndChildsProcessor"/>
                </batch:processor>
                <batch:writer>
                    <bean class="processParentAndChildsWriter"/>
                </batch:writer>
            </batch:chunk>
        </batch:tasklet>
    </batch:step>
    <batch:decision decider="processParentAndChildsRetryDecider" id="loop">
        <batch:next on="NEXT_LEVEL" to="processprocessParentAndChilds"/>
        <batch:next on="COMPLETED" to="goToNextSteps"/>
    </batch:decision> 

public class ProcessParentAndChildsRetryDecider implements JobExecutionDecider{
@Override
public FlowExecutionStatus decide(JobExecution jobExecution, StepExecution stepExecution) {
    // if no on record written - no sense to try again
    if (stepExecution.getWriteCount() > 0) {
        return new FlowExecutionStatus("NEXT_LEVEL");
    } else {
        return FlowExecutionStatus.COMPLETED;
    }
} 
```

}

# javascript - 使用 javascript 绘制动画线（没有 Raphael 或其他插件）

> ID：15266775
> 
> 赞同：-2
> 
> 时间：2013-03-07T08:54:26.130
> 
> 标签：javascript, line, animated

我正在尝试在 SVG 元素内绘制一条动画线。即这条线在一段时间内绘制。

我已经搜索过，但所有答案通常都指向 Raphael 库。但是，我不能使用互联网上的任何图书馆。

需要一些关于从哪里开始的指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T11:46:02.937

我从来没有，曾经在我的生活中使用过 SVG，但在快速谷歌搜索后的 10 分钟内，我想出了：

```
<svg width=200 height=200>
    <line id="myLine" x1="5" y1="10" x2="5" y2="10" stroke-width=".5" stroke="red"/>
</svg>
<script>
var line = document.getElementById('myLine');
var count = 0;
var interval = window.setInterval(function() {
    line.setAttribute('y2', 2 + +line.getAttribute('y2'));
    line.setAttribute('x2', 1 + +line.getAttribute('x2'));
    if (count++ > 75)
        window.clearInterval(interval);
}, 100);
</script> 
```

见：http: [//jsfiddle.net/YSmDH/](http://jsfiddle.net/YSmDH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:59:43.657

您应该使用该`<canvas id='mycanvas' width='300' height='300' />`元素并像这样画线：

```
function drawShape(){
  // get the canvas element using the DOM
  var canvas = document.getElementById('mycanvas');

  // Make sure we don't execute when canvas isn't supported
  if (canvas.getContext){

   // use getContext to use the canvas for drawing
   var ctx = canvas.getContext('2d');

   // Stroked triangle
   ctx.beginPath();
   ctx.moveTo(125,125);
   ctx.lineTo(125,45);
   ctx.lineTo(45,125);
   ctx.closePath();
   ctx.stroke();

  }
} 
```

通过添加[超时](http://www.w3schools.com/js/js_timing.asp)并[清除](http://simonsarris.com/blog/346-how-you-clear-your-canvas-matters)您的 2D 上下文，然后创建新的，您可以为您的线条制作动画

[这](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial)是一个非常好的画布操作教程。

# cakephp - 无法更新数据库中的用户配置文件数据

> ID：15266777
> 
> 赞同：0
> 
> 时间：2013-03-07T08:54:30.453
> 
> 标签：cakephp

在我的控制器中

```
public function profile() {
    $UserInfo = $this->Auth->user()
    if(!empty($this->data)) {
            print_r($this->data);
         $this->User->save($this->data);
    } 
    if(!empty($UserInfo['id'])){
        $this->data = $this->User->find('first',array('conditions'=>array('id'=>$UserInfo['id'])));

    }

} 
```

当我提交数据时，它没有提交给数据库，我只得到以前的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:15:36.683

你为什么在这里查询会话？当然，这总是会在保存后再次为您提供旧数据。

像往常一样使用数据库，再次更新数据库，然后才可能覆盖会话（您似乎使用的是 cake 1.3）：

```
public function profile() {
    $uid = $this->Session->read('Auth.User.id');
    if (!empty($this->data)) {
        $this->data['User']['id'] = $uid;
        if ($this->User->save($this->data, true, array('email', 'first_name', 'last_name', 'id', ...))) {
            // if you rely on auth session data from the user, make sure to update that here
            $this->Session->write('Auth.User.email', $this->data['User']['email']); // etc
            ...
            // OK, redirect
        } else {
            // ERROR
        }
    } else {
        $this->data = $this->User->find('first', ...);
    }
} 
```

如您所见，我更新了已更改的会话密钥。

如果您使用的是 2.x（您现在没有指定），您也可以使用

```
$this->Auth->login($this->request->data['User']); // must be the User array directly 
```

尽管您必须小心传递之前会话中的所有数据。如果您打算使用 login()，最好再次查找（首先）更新的记录，然后将其传递给 login()。

但就个人而言，我更喜欢只更新实际更改的字段。

请参阅[编辑自己的帐户/个人资料](http://www.dereuromark.de/2011/10/05/common-cakephp-problems-and-solutions/)

# java - IllegalThreadStateException一次又一次发生..停止后需要重新启动线程

> ID：15266779
> 
> 赞同：1
> 
> 时间：2013-03-07T08:54:34.473
> 
> 标签：java, multithreading

需要制作一个音乐播放器作为我的简单 java 项目。它打开一个文件并在文本字段中加载名称。当按下播放时，名称被包围在文本字段中，当按下暂停时，包围暂停。播放暂停是 JTogglebuttons，我有一个按钮名称停止。使用多线程，我可以播放和暂停字符串，但是在我按一次 Stop 之后.. 如果我再次打开一个新的音乐文件并按播放，它会显示非法线程状态异常。请在这里帮帮我.. 注意：我还没有放在其中播放音乐的代码中..一旦解决了这个问题，我就会把它放进去。非常感谢你

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import sun.audio.*;

public class search extends Thread implements ActionListener
{
JFrame f;
JButton stop,open;
JToggleButton play;
JTextField tf,text;
JTextArea ta;
JLabel lab,lab1;
String str,dest;
JScrollPane scrol;
File fl;
int myfl=0,myfl1=0,myfl2=0;
search()
{
    f=new JFrame("Music Player");
    f.setLayout(null);
    f.setSize(620,300);

    play=new JToggleButton("play");
    play.setBounds(100,150,270,30);
    play.addActionListener(this);
    f.add(play);
    play.setEnabled(false);

    stop=new JButton("stop");
    stop.setBounds(400,150,120,30);
    stop.addActionListener(this);
    f.add(stop);
    stop.setEnabled(false);

    open=new JButton("open");
    open.setBounds(100,200,420,30);
    open.addActionListener(this);
    f.add(open);    

    tf=new JTextField();
    tf.setBounds(25,50,565,40);
    tf.setFont(new Font("DK BabySitter",Font.BOLD,20));
    tf.setHorizontalAlignment(JTextField.CENTER);
    f.add(tf);

    f.setVisible(true);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

public void actionPerformed(ActionEvent ae)
{
   if(ae.getActionCommand().equals("open"))
    {
        FileDialog fd=new FileDialog(f,"Open Box",FileDialog.LOAD);
        fd.setSize(300,300);
        fd.setVisible(true);
    String s1="mp3";
    str=fd.getFile();
    dest=fd.getDirectory()+fd.getFile();
    if(str.toLowerCase().endsWith(s1))
    {

            tf.setText(str);
        //pause.setEnabled(true);
        play.setEnabled(true);
        stop.setEnabled(true);
    }
    else
    {
        JOptionPane.showMessageDialog(f, "Select a valid file format"); 
    }

    }

   if(ae.getActionCommand().equals("stop"))
    {   

    play.setLabel("play");
    myfl1=1;
        tf.setText(" "); 
    stop();

    }

   if(ae.getActionCommand().equals("play"))
    {   
    try
    {
        play.setLabel("pause");

        if(myfl==1 && myfl1==0)
        {
            resume();
        }

        if(myfl==0 || myfl1==1)
        {
            start();
        }
    }
    catch(IllegalThreadStateException e)
    {
        tf.setText("error a gya re");
        Thread newth= new Thread();
        newth.start();

    }
    }
   if(ae.getActionCommand().equals("pause"))
    {
    play.setLabel("play");
    myfl=1;
    suspend();
    }

} 

public void run()
{
    try
    {
        String rot=tf.getText();
    char rotn[]=new char[rot.length()];
    int flag=rot.length();
    int move=0;
    rotn=rot.toCharArray();
    tf.setText(" ");
    for(;;)
    {
        for(;;)
        {   
            sleep(100);
            tf.setText( tf.getText() + rotn[move]);
            move++;

            if(move==(flag-1))
            {   

                move=0;
                break;
            }

        }
    tf.setText(" ");    
    }
    }

    catch(Exception e)
    {
        tf.setText("error occured");
    }                 

}
    public static void main(String args[])
    {
      try {
            // Set System L&F
        UIManager.setLookAndFeel(
            UIManager.getSystemLookAndFeelClassName());
    } 
    catch (UnsupportedLookAndFeelException e) {
       // handle exception
    }
    catch (ClassNotFoundException e) {
       // handle exception
    }
    catch (InstantiationException e) {
       // handle exception
    }
    catch (IllegalAccessException e) {
       // handle exception
    }
        new search();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:12:11.440

你不应该使用[`Thread.stop()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#stop%28%29),[`Thread.suspend()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#suspend%28%29)或[`Thread.resume()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#resume%28%29). 这些方法已被弃用，并被明确记录为具有严重影响（如潜在的死锁等）。另请参阅[为什么不推荐使用 Thread.stop、Thread.suspend 和 Thread.resume？](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html).

`start()`在这种特定情况下，会发生异常，因为您不能`Thread`多次。您需要对线程进行编码（或者更好的是：不要扩展`Thread`，而是实现`Runnable`），以便它正确处理应用程序的暂停、启动、停止等，而无需使用`Thread`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:49:28.190

您收到此错误的原因是您试图手动操作正在运行的线程的状态。

您在这里使用的方法都已弃用`stop, resume, suspend`- 这些都应该避免。

考虑程序如何运行的更好方法是线程要么处于活动状态，要么不处于活动状态。它可能不会在实际`run`方法中执行任何操作，但您绝不会暂停/暂停/停止实际线程 - 您只是暂停/停止其中的应用程序逻辑。

您所看到的一个非常快速的解决方法是将所有停止/暂停/恢复替换为以下内容：

```
private volatile boolean paused = false;
private void pausePlayer(boolean pause) {
    this.paused = pause;
}

then everywhere you need to pause the player use:
pausePlayer(true);

and when you want to resume it use:
pausePlayer(false); 
```

在 run 方法中，将第二个 for 循环替换为：

```
for (; ; ) {
    while(!paused) {
        // do your work 
```

请注意，尽管我认为该程序存在更大的结构性问题 - 将普通线程与 Swing 混合可能会出现问题。我建议您改为使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)进行调查，因为这是专门为您尝试做的事情而设计的。

# jsf - 右键单击丰富的面孔组件

> ID：15266787
> 
> 赞同：0
> 
> 时间：2013-03-07T08:55:00.897
> 
> 标签：jsf, richfaces, jsf-1.2

只是我需要在富面孔组件中的右键单击事件，特别是在 `suggestionbox`.

我需要在鼠标右键单击和左键单击时提供一些功能。我认为它会用丰富的脸来完成，`contextMenu`但它不适用于`suggestionbox`.

在每个输出文本上，我想传递 id 并显示模态面板（右键单击和左键单击有不同的模型面板要显示）。

jsf 1.2 + Richfaces 3.3

我的代码

```
<h:inputText id="templateName"  style="text-align:left" size="45"
                    value="#{templateMaintenanceBean.templateName}"
                    onblur="upperCase(this)" >

                <sc:suggestionbox height="200" width="300" id="properySuggestBox" for="templateName"  
                    oncomplete="testFunction();" nothingLabel="No Template Found" reRender="selectedMedicationDiv"
                    suggestionAction="#{templateMaintenanceBean.autocomplete}" var="result" border="2" minChars="0"
                     immediate="true" shadowDepth="10"   >

                    <h:column>  
                          <h:outputText value="#{result.templateName}" id="temp" /> 

                    </h:column>

                </sc:suggestionbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:13:36.273

在丰富的面孔或任何面孔中没有直接的方法来获得右键单击事件（contextMenu 除外）（这在此处不起作用）。

只有 jquery 才有可能：

示例`suggestionbox`：

```
<script type="text/javascript">

        jQuery.noConflict();
        jQuery(document).ready(function($){

        var temp = $('#templateListForm\\:properySuggestBox div div table tbody tr td div table tbody tr td');

        temp.live('contextmenu', function(ev){
            ev.preventDefault();
            //alert("Value:::"+$(this).parent().index('tr'));   
            //alert($(this).text());
          if(ev.which == 3)
          {
             var templateName = $(this).text();

        //    handle Events(Link any button click) which we have to perform 

          }

            });  
        });

    </script> 
```

在`temp`变量中，我得到了建议框的表格 tr。

# matlab - 图片调整大小问题

> ID：15266794
> 
> 赞同：1
> 
> 时间：2013-03-07T08:55:36.823
> 
> 标签：matlab, image-processing

这似乎是一个微不足道的问题，但结果很奇怪，在我出错的地方完全迷失了。有一个输入 RGB 图像需要转换为灰度并调整为 1000 x 1000 像素。这就是我所做的

```
img=imread('flowers.jpg');
flowers_gray=rgb2gray(img);
flowers_resize=imresize(flowers_gray,[1000 1000]); 
```

但奇怪的是，输出图像不是 1000 x 1000 像素。此外，matlab 没有保存图像（尝试使用 SaveAs 选项和 File --->Export Setup）灰度模式![花调整大小](../Images/903d06ad188cb765f497bbc8b8359b64.png)

而且尺寸不正确，因为当我打开保存的图像时

```
img1=imread('flowers_resize.jpg')
s=size(img1) 
```

它给了

```
s=586   665     3 
```

并且图像`flowers_resize.jpg`保存在图像文件夹中，并带有白色边框。所以，我去Paint toolbox选择图像A1并手动删除周围的背景并调整图像大小。但是，虽然尺寸正确，但它以3个颜色通道保存图像而不是灰度模式！有人可以指出将大小调整为 1000 x 1000 像素并以灰度模式保存而保存的输出文件周围没有白色边框的正确方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:29:47.493

当您使用图像导出处理时，您将保存整个图形，包括图形周围的空间（空白）。

相反，请使用 imwrite 命令。在你的情况下：

```
imwrite(A1,'flowers_resize.jpg','jpg'); 
```

# javascript - 使用 Javascript 减少 base64 图像内存大小

> ID：15266795
> 
> 赞同：1
> 
> 时间：2013-03-07T08:55:40.600
> 
> 标签：javascript, jquery, image, base64

我正在使用 canvas.toDataURL() 并以 base64 格式获取图像。但是在将它上传到服务器之前，我可以将图像的内存大小减少到 10KB 吗？如何使用 JavaScript 或 jquery 做到这一点？我使用的代码是：

```
var context = canvas.getContext("2d");
context.drawImage(imageObj, c.x, c.y, c.w, c.h, 0, 0, canvas.width, canvas.height);
var vData = canvas.toDataURL(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:59:50.520

如果你想压缩字符串，你可以尝试[这里](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)提到的一种压缩算法，但是 DataURL 已经被相当压缩了，所以这应该没什么区别。

另一种选择是使用`toDataURL`指定 JPG 质量的第二个参数，该参数通常可以安全地降低，而不会对图像质量产生明显影响。

> 如果请求的类型是image/jpeg或image/webp，那么第二个参数，如果它在0.0和1.0之间，则视为表示图像质量；如果第二个参数是其他参数，则使用图像质量的默认值。其他参数被忽略。

# python-2.7 - 删除标点符号然后使用python计算每个单词出现的次数

> ID：15266802
> 
> 赞同：1
> 
> 时间：2013-03-07T08:56:10.370
> 
> 标签：python-2.7

大家好，我是 python 新手，需要编写一个程序来消除标点符号，然后计算字符串中的单词数。所以我有这个：

```
import sys
import string
def removepun(txt):
    for punct in string.punctuation:
        txt = txt.replace(punct,"")
        print txt
        mywords = {}
        for i in range(len(txt)):
            item = txt[i]
            count = txt.count(item)
            mywords[item] = count
    return sorted(mywords.items(), key = lambda item: item[1], reverse=True) 
```

问题是它返回字母并计算它们，而不是我希望的单词。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:22:38.873

这个怎么样？

```
>>> import string
>>> from collections import Counter
>>> s = 'One, two; three! four: five. six@#$,.!'
>>> occurrence = Counter(s.translate(None, string.punctuation).split())
>>> print occurrence
Counter({'six': 1, 'three': 1, 'two': 1, 'four': 1, 'five': 1, 'One': 1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:00:15.973

去掉标点符号后

```
numberOfWords = len(txt.split(" ")) 
```

假设单词之间有一个空格

编辑：

```
a={}
for w in txt.split(" "):
   if w in a:
     a[w] += 1
   else:
     a[w] = 1 
```

这个怎么运作

1.  a 设置为 dict
2.  txt中的单词被迭代
3.  如果 dict a[w] 已经有一个条目，则添加一个
4.  如果没有条目则设置一个，初始化为1

输出与 Haidro 的优秀答案相同，一个带有单词键和每个单词计数值的字典

# c# - 多语言 TTS 引擎

> ID：15266804
> 
> 赞同：0
> 
> 时间：2013-03-07T08:56:25.277
> 
> 标签：c#, .net, windows, text-to-speech

我正在为我的应用程序寻找多语言`TTS`引擎。`.Net`

我需要说话的语言是

1.  英语
2.  俄罗斯
3.  韩国
4.  日本
5.  泰国

是否有任何免费的框架或 SDK 可以满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:59:47.773

快速回答：不。英语的 TTS 很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T05:06:08.580

我会说现在有很多框架并且不确定是否免费，因为具有基本功能的框架将是免费的，但具有高级功能的框架可能不会..

请参阅[Google TTS（文本到语音）](http://www.codeproject.com/Articles/69335/Fun-with-Google-Text-To-Speech-eBook-reader-using)项目..

此链接包含代码和详细信息以及一些可以参考的 27 种语言详细信息，

我相信这会做:)

# objective-c - NSMutableData 正确吗？

> ID：15266815
> 
> 赞同：0
> 
> 时间：2013-03-07T08:57:04.293
> 
> 标签：objective-c, cocoa, memory-management

我有一个被多次调用的函数，它创建数据以通过 tcp 发送到服务器。我想我在某处丢失了数据。

我想知道正确的方法是什么：

1.  在程序开始时使用 `finalData=[[NSMutableData alloc]init];`，而不是发送函数就像（被多次调用）：

    ```
    -(NSMutableData*)setProtocolDataForString:(NSString*)data{ 
    finalData=nil;
    //here construct new finalData.. 
    ```

或者，在函数中，保留它：

```
 -(NSMutableData*)setProtocolDataForString:(NSString*)data{

finalData=[[NSMutableData data]retain]; //but its wrong because it happens many times
//construct a finalData to send 
```

我没有使用 ARC 。第一种方式崩溃，第二种方式-我想我正在失去他..

我应该使用财产吗？如果是，那么这样做的确切方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:00:27.210

好的，您每次调用时都会发送大量数据

```
 -(NSMutableData*)setProtocolDataForString:(NSString*)data; 
```

您可以执行以下操作：

```
if(finalData){
 [finalData release];
 finalData = nil;
}

finalData = [[NSMutableArray alloc] init]; 
```

# mysql - MySql 视图显示部分列数据

> ID：15266816
> 
> 赞同：0
> 
> 时间：2013-03-07T08:57:04.777
> 
> 标签：mysql, views

对于 Wordpress/Woocommerce 网上商店，我创建了一个透视视图，显示所有订单，例如：

```
CREATE VIEW vwOrderPivot AS
SELECT  
    PM.post_id,
        GROUP_CONCAT(IF(PM.meta_key = '_billing_first_name',PM.meta_value,NULL)) AS FirstName,
        GROUP_CONCAT(IF(PM.meta_key = '_billing_last_name',PM.meta_value,NULL)) AS LastName,
        GROUP_CONCAT(IF(PM.meta_key = '_billing_address_1',PM.meta_value,NULL)) AS Address,
        GROUP_CONCAT(IF(PM.meta_key = '_billing_postcode',PM.meta_value,NULL)) AS Postcode,
        GROUP_CONCAT(IF(PM.meta_key = '_billing_phone',PM.meta_value,NULL)) AS Phone,
        GROUP_CONCAT(IF(PM.meta_key = '_order_total',PM.meta_value,NULL)) AS OrderTotal,
        GROUP_CONCAT(IF(PM.meta_key = '_pickup_location',PM.meta_value,NULL)) AS PickupLocation,
        GROUP_CONCAT(IF(PM.meta_key = '_pickup_time',PM.meta_value,NULL)) AS PickupTime,
        GROUP_CONCAT(IF(PM.meta_key = '_order_items',PM.meta_value,NULL)) AS OrderItems
FROM    goe_postmeta AS PM
GROUP BY PM.post_id 
```

只有一个小问题。de OrderItems（序列化字段）中的数据仅包含 Original 字段中的一半数据。有什么办法可以解决这个问题吗？我没有线索。有人可以指出我正确的方向吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:00:41.917

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)告诉你，`GROUP_CONCAT()`输出的大小受限于`group_concat_max_len`系统变量的长度。这不止一次地咬了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:00:47.897

据[记载](https://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)：

> 结果被截断为由 group_concat_max_len 系统变量给出的最大长度，其默认值为 1024。该值可以设置得更高，尽管返回值的有效最大长度受 max_allowed_pa​​cket 值的限制。在运行时更改 group_concat_max_len 值的语法如下，其中 val 是无符号整数：
> 
> ```
> SET [GLOBAL | SESSION] group_concat_max_len = val; 
> ```

所以在这里你是一个解决方法，尽管最好的最终解决方案是在从 PHP 读取时重写查询和分组行。

# magento - Magento 1.7 - 覆盖 system.xml

> ID：15266817
> 
> 赞同：1
> 
> 时间：2013-03-07T08:57:06.790
> 
> 标签：magento, system, field

我想仅向特定客户群显示付款方式，因此我想在后端付款方式中添加一个配置字段。我试图在我的自定义模块中覆盖 Mage_Payment system.xml：

MyNamespace_OverwriteCfg.xml

```
<config>
    <modules>
        <MyNamespace_OverwriteCfg>
            <active>true</active>
            <codePool>local</codePool>
        </MyNamespace_OverwriteCfg>
    </modules>
</config> 
```

系统.xml：

```
<config>
<sections>
    <payment>
        <groups>
            <invoice>
                <fields>
                    <specificgroup translate="label">
                        <label>Payment on specific customer groups</label>
                        <frontend_type>multiselect</frontend_type>
                        <sort_order>51</sort_order>
                        <source_model>adminhtml/system_config_source_customer_group</source_model>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </specificgroup>
                </fields>
            </invoice>
        </groups>
    </payment>
</sections>
</config> 
```

如果我在支付核心 system.xml 中添加它，它可以正常工作，但我不会编辑核心文件，但覆盖不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:00:19.257

The solution was, i simply had a mistake in my xml node structure. To add a field to "cash on delivery" of course it has to be like this:

```
<config>
   <sections>
        <payment>
            <groups>
                <cashondelivery> <!--Here was the mistake -->
                    <fields>
            //...
                    </fields>
                </cashondelivery> <!--Here was the mistake -->
            </groups>
         </payment>
    </sections>
</config> 
```

# python - python和快速查找节点具有多个属性和值的树

> ID：15266818
> 
> 赞同：0
> 
> 时间：2013-03-07T08:57:12.677
> 
> 标签：python, tree, hashtable, binary-tree, binary-search-tree

我需要一个非常快的python树对象。查找速度比内存更重要。叶节点是我想要的值。因此，如果给定 state=NY、postion=3、hourOfDay=2 和 dayOfWeek=3，我需要快速获得值 =100。带 * 的节点是叶节点。

```
0) root
    1) {state: [NY,LA]}
        2) {howOfDay:[1,2,3,4,5], postion:[1,2,3]}
                             *3) {dayOfWeek:[234]} => value:100
            4) {state: [FL,NV,……rest of the states]}
                5) {howOfDay:[1,6,7,8,9….23]}
                      *6) {dayOfWeek:[1,5,6,7]} => value:120 
```

在我的数据库中，我的数据看起来像这样，属性为 json 对象。

```
parent child attribute value

0 1 state NY,LA
1 2 {howOfDay:[1,2,3,4,5], postion:[1,2,3]}
2 3 dayOfWeek dayOfWeek [2,3,4] 100
0 3 state  [FL,NV,……rest of the states]
4 5 howOfDay:[1,6,7,8,9….23]
5 6 dayOfWeek:[1,5,6,7] 120 
```

那么，我应该使用什么 python 库和树结构来最好地找到一个值？如何将数据转换为最好的快速查找？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:01:23.997

`tuple(state, position, hourOfDay, dayOfWeed)`如果您重视速度而不是内存，您可以使用 a作为键将所有数据放入字典中。

```
data = dict() 
```

现在，对于每个离开节点，将数据插入到字典中：

```
data[state, position, hourOfDay, dayOfWeed] = value 
```

然后，您使用

```
value = data[state, position, hourOfDay, dayOfWeed] 
```

这比任何树遍历都快，因为它使用哈希字典的底层优化 CPython 实现。

# java - 使用 Netbeans 创建表模型组件

> ID：15266821
> 
> 赞同：0
> 
> 时间：2013-03-07T08:57:21.953
> 
> 标签：java, swing, netbeans, tablemodel

我正在尝试创建一个自定义表模型，但我被卡住了。

我想创建一个表模型并使用 Netbeans GUI 绑定它。但是，正如您在屏幕截图中看到的那样，“组件”下拉菜单处于非活动状态。

我怎样才能创建这样一个模型组件，我应该把它放在哪里？

![在此处输入图像描述](../Images/5b8ad9d5dbdde374eac65f4ea5d005f7.png)

# python - 使用 Bottle 从 Azure Blob 存储下载文件

> ID：15266826
> 
> 赞同：0
> 
> 时间：2013-03-07T08:57:42.147
> 
> 标签：python, azure-blob-storage, bottle

我正在使用带有 azure blob 存储的瓶子 python：

```
 @route('/download/:filename')
    def getDownload(filename):
      try:
        raw = blob.get_blob('picture', filename)
        return raw 
```

我的代码下载文件是否正确？

**编辑**

> 您是如何实例化 blob 的，例如：`blob = BlobService(account_name, account_key)`？

```
 blob = BlobService(account_name='xxx', account_key='O6asd7ET+ssadsadNvVLAZ46nB6iHDadavpKbJilKvy0uOJ4/g37923983991djkdjk‌​kajd==') 
```

**更新**

这不起作用：

```
blob = BlobService(account_name='xxx', account_key='O6asd7ET+ssadsadNvVLAZ46nB6iHDadavpKbJilKvy0uOJ4/g37923983991djkdjk‌​kajd==')  

 @route('/download/:filename')
        def getDownload(filename):
          try:
            raw = blob.get_blob('picture', filename)
            return raw 
```

这项工作部分：

```
@route('/download/:filename')
            def getDownload(filename):
              try:
blob = BlobService(account_name='xxx', account_key='O6asd7ET+ssadsadNvVLAZ46nB6iHDadavpKbJilKvy0uOJ4/g37923983991djkdjk‌​kajd==')  
                raw = blob.get_blob('picture', filename)
                return raw 
```

为什么？并`return raw`给出套接字异常。

# gpu - GPU 如何将线程分组到扭曲/波前？

> ID：15266829
> 
> 赞同：2
> 
> 时间：2013-03-07T08:57:51.560
> 
> 标签：gpu, gpgpu, gpu-warp

我的理解是warp是在运行时通过任务调度程序定义的一组线程，CUDA的一个性能关键部分是warp中线程的分歧，有没有办法很好地猜测硬件将如何构建warp在线程块内？

例如，我在一个线程块中启动了一个具有 1024 个线程的内核，如何安排扭曲，我可以从线程索引中判断（或至少做出一个好的猜测）吗？

因为通过这样做，可以最大限度地减少给定warp中线程的分歧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T09:27:39.703

经线内的线程排列取决于实现，但 atm 我总是经历相同的行为：

一个warp由32个线程组成，但是warp调度器每次都会发出1条指令用于halp一个warp（16个线程）

*   如果您使用 1D 块（只有 threadIdx.x 维度有效），那么 warp 调度程序将为**threadIdx.x = (0..15) (16..31)** ... 等发出 1 条指令

*   如果您使用 2D 块（threadIdx.x 和 threadIdx.y 尺寸有效），那么 warp 调度程序将尝试按照以下方式发出：

**threadIdx.y = 0 threadIdx.x = (0 ..15) (16..31)** ... 等等

因此，具有连续 threadIdx.x 组件的线程将以 16 个为一组执行相同的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:18:35.633

一个 warp 由 32 个线程组成，它们将同时执行。在任何给定时间，一批 32 将在 GPU 上执行，这称为*warp*。

我还没有发现任何地方可以说明您可以控制接下来要执行的w​​arp，您唯一知道的是它由32个线程组成，并且线程块应该始终是该数字的倍数。

> 单个块中的线程将在单个多处理器上执行，共享软件数据缓存，并可与同一块中的线程同步和共享数据；warp 将始终是来自单个块的线程子集。

关于内存操作和延迟，还有这个：

> 当 warp 中的线程发出设备内存操作时，由于长的内存延迟，该指令将花费很长时间，可能需要数百个时钟周期。主流架构会添加缓存层次结构以减少延迟，Fermi 确实包含一些硬件缓存，但大多数 GPU 是为流或吞吐量计算而设计的，其中缓存无效。相反，这些 GPU 通过使用高度的多线程来容忍内存延迟。Tesla 在每个多处理器上最多支持 32 个活动 warp，而 Fermi 最多支持 48个。**当一个 warp 在内存操作上停止时，多处理器会选择另一个就绪的 warp 并切换到那个。**通过这种方式，只要有足够的并行度让内核保持忙碌，内核就可以高效工作。

[来源](http://www.pgroup.com/lit/articles/insider/v2n1a5.htm)

关于将线程块划分为经线，我发现了这一点：

> 如果块是 2D 或 3D，线程按第一个维度排序，然后是第二个维度，然后是第三个维度 - 然后分成 32 个经线

[来源](http://people.maths.ox.ac.uk/gilesm/pp10/lec2_2x2.pdf)

# javascript - 三个.js 网格顶点

> ID：15266832
> 
> 赞同：0
> 
> 时间：2013-03-07T08:58:00.957
> 
> 标签：javascript, three.js, webgl

我是新的 THREE.js 并在其中制作游戏。我想问一下 THREE.js 中是否有任何命令可以找出网格中的光线准确到达另一个网格的顶点。就像一束光线从汽车发出并撞到马路上一样，所以我想找出汽车发出的光线撞到马路上的确切点。我搜索了这个找到一个命令，但它没有给出解决方案

```
for(var i = 0; i < Mesh.geometry.vertices.length; i++){
 Mesh.geometry.vertices[k].x;
} 
```

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:03:53.203

有 - 看看[Raycaster](http://mrdoob.github.com/three.js/docs/56/#Reference/Core/Raycaster)类，它完全符合你的要求。文档还可以，但值得查看[源代码](https://github.com/mrdoob/three.js/blob/master/src/core/Raycaster.js)以确切了解它的作用。

这是一个未经测试的示例：

```
var rc = new THREE.Raycaster(from, direction);
var results = rc.intersectObjects(your_scene_objects);
if (results[0])
  alert('hit at ' + results[0].point); 
```

# c# - 自动完成框单击项目

> ID：15266833
> 
> 赞同：1
> 
> 时间：2013-03-07T08:58:01.733
> 
> 标签：c#, .net, wpf, wpftoolkit

我正在使用`AutoCompleteBox`：

```
<my:AutoCompleteBox Grid.Column="1" Name="SearchTextBox" Height="23" Width="240"  
                            Populating="SearchTextDidChange" FilterMode="None" SelectionChanged="SearchBoxDidSelectItem" /> 
```

这是方法：

```
private void SearchTextDidChange(object sender,System.Windows.Controls.PopulatingEventArgs e)
{
    if (!String.IsNullOrEmpty(SearchTextBox.Text))
    {
        google.GetSuggestFromGoogle(SearchTextBox.Text);
    }
}

private void SearchBoxDidSelectItem(object sender, SelectionChangedEventArgs e)
{
    AutoCompleteBox item = (AutoCompleteBox)sender;
    string searchString = (string)item.SearchText;
    this.SendSearchRequest(searchString);
} 
```

问题是我想在用户按下它并进行搜索时获取选定的字符串，但是每次用户向文本框输入新字符时都会调用函数“SearchBoxDidSelectItem”。知道如何解决吗？我怎样才能获得点击项目的方法？

# angularjs - 如何理解指令的“终端”？

> ID：15266840
> 
> 赞同：66
> 
> 时间：2013-03-07T08:58:55.513
> 
> 标签：angularjs, angularjs-directive

在此页面中： http: [//docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

> ## 指令定义对象
> 
> ### 终端
> 
> 如果设置为 true，则当前优先级将是最后一组将执行的指令（当前优先级的任何指令仍将执行，因为相同优先级的执行顺序未定义）。

我不太明白。是什么`current priority`意思？如果有这样的指令：

1.  具有{优先级：1，终端：假}的指令1
2.  具有{优先级：10，终端：假}的指令2
3.  具有{优先级：100，终端：假}的指令3
4.  directive4 with { priority: 100, terminal: true} // 这是真的
5.  具有{优先级：1000，终端：假}的指令5

请注意`directive4`has`terminal:true`和 others have `false`。

如果有一个 html 标签包含所有 5 个指令：

```
<div directive1 directive2 directive3 directive4 directive5></div> 
```

5个指令的执行顺序是什么？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-07T09:06:28.703

**优先事项**

仅当您在一个元素上有多个指令时，优先级才相关。优先级决定了这些指令的应用/启动顺序。在大多数情况下，您不需要优先级，但有时当您使用 compile 函数时，您希望确保您的 compile 函数首先运行。

**终端**

终端属性也只与同一 HTML 元素上的指令相关。也就是说，如果您有`<div my-directive1></div> <div my-directive2></div>`,`priority`并且`terminal`在您的指令中`my-directive1`并且`my-directive2`不会相互影响。如果你有，它们只会相互影响`<div my-directive1 my-directive2></div>`。

terminal 属性告诉 Angular 跳过该元素后面的所有指令（优先级较低）。所以这段代码可能会清除它：

```
myModule.directive('myDirective1', function() {
    return {
        priority: 1,
        terminal: false,
        link: function() {
            console.log("I'm myDirective1");
        }
    }
});

myModule.directive('myDirective2', function() {
    return {
        priority: 10,
        terminal: true,
        link: function() {
            console.log("I'm myDirective2");
        }
    }
});

myModule.directive('myDirective3', function() {
    return {
        priority: 100,
        terminal: false,
        link: function() {
            console.log("I'm myDirective3");
        }
    }
}); 
```

为此，您只会在控制台中看到“I'm myDirective2”和“I'm myDirective3”。

```
<div my-directive1 my-directive2 my-directive3></div> 
```

但是为此，您也会看到“I'm myDirective1”，因为它们位于不同的元素上。

```
<div my-directive1></div>
<div my-directive2></div>
<div my-directive3></div> 
```

*原帖*

在您的示例中，优先级为 100 和 1000 的指令是唯一将被应用的指令，因为优先级较高的指令首先应用，因此优先级为 1000 的指令将首先应用。

在这种情况下，如果您有两个优先级为 100 的指令，则它们都将被应用，因为具有相同优先级的指令的顺序未定义。

请注意，这仅适用于同一元素上的指令。

# yii - Yii CListView 寻呼机延伸很多

> ID：15266845
> 
> 赞同：0
> 
> 时间：2013-03-07T08:59:05.683
> 
> 标签：yii

我使用 Yii CListView 小部件对结果进行分页。

我有一个容器 div 位置：相对和浮动：左。

我有 2 个 div，每个都有 float:left 在容器内。

问题是，如果我有很多页的结果，第二个 div 属于第一个 div。

我需要它们，在同一行，如图 2 所示。

yii的clistview有没有设置pager中回显的最大页数的属性？

我不需要 clistview 来打印从 60 到 69 的页面；从 60 到 65 就足够了，因此限制为 6 就足够了。

有任何想法吗？

![图片在这里](../Images/e577a0941653ffd1ca68776473f4342f.png)

![图片在这里](../Images/1862af9eb31938aeccf06c61a3ef77b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:32:12.783

您必须将[`maxButtonCount`](http://www.yiiframework.com/doc/api/1.1/CLinkPager#maxButtonCount-detail)属性设置[`CLinkPager`](http://www.yiiframework.com/doc/api/1.1/CLinkPager)为 5。`CLinkPager`属性可以通过[`pager`](http://www.yiiframework.com/doc/api/1.1/CBaseListView#pager-detail)属性指定[`CListView`](http://www.yiiframework.com/doc/api/1.1/CListView)

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_item_view',  
    'pager'=>array(
         'class'=>'CLinkPager',
         // This attribute species how many buttons are displayed
         'maxButtonCount'=>5
    ),
   .....,
   .....
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:11:30.487

您可以将它传递给 pager 属性，它会覆盖默认值：`'pager' => array( 'maxButtonCount' => 5 ),`

# symfony - symfony2 assets:install 输出目录

> ID：15266850
> 
> 赞同：6
> 
> 时间：2013-03-07T08:59:32.767
> 
> 标签：symfony

我正在尝试将 symfony 的默认“web”目录更改为其他内容，例如 public_html。

我按照这里的手册完成了大部分工作-> [http://symfony.com/doc/master/cookbook/configuration/override_dir_structure.html](http://symfony.com/doc/master/cookbook/configuration/override_dir_structure.html)

该文档的最后一部分解释了如何更改资产，以便资产：转储将输出到正确的目录，这样可以正常工作，并且网站也可以正常工作。

但是该文档似乎没有解释如何更改 assets:install 命令的输出目录。

当我运行这个命令时，它仍然输出到 web 目录。有谁知道如何改变这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:03:41.827

`assets:install`需要一个参数来告诉在哪里安装资产：

```
app/console assets:install path 
```

只需提供您的路径而不是`web`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:06:28.967

您可以将路径参数设置为 assets:install
但我认为在某些情况下最好不要覆盖目录结构，最好是创建指向 web 目录的符号链接。

# iphone - 使用动画删除 UITableView Cell

> ID：15266858
> 
> 赞同：4
> 
> 时间：2013-03-07T08:59:54.500
> 
> 标签：iphone, uitableview, animation, core-graphics

我想删除 UITableView 的单元格但带有动画。我想要如下解释的动画：

需要在 UITableViewCell 的内容上画一条线，当我的触摸结束时，内容会消失，然后单元格将被删除。你可以从这里附上的图片中得到一个想法。![在此处输入图像描述](../Images/6f158fa25a7d4a0779e93fe12dfd7210.png)

我想用这个流程来实现这一点：

1.  我需要在内容上画一条线，使用 CoreGraphics
2.  在`- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event`中，我将调用 step3
3.  称呼`- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath`

如果我在某些方面错了，或者您有其他选择，请告诉我。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:16:53.583

我只是用谷歌搜索并从[http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13获得了最佳解决方案](http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13)

检查这个完整的教程，我发现下面的屏幕：-

![在此处输入图像描述](../Images/ad6e6d1434884b5caa685dcf0f377d2b.png)

跟随链接示例希望你得到你的解决方案

在代码的下方还提供了链接中的演示，当您将单元格从左向右拖动时，它的单元格显示为绿色并带有水平线。当您从左向右拖动课程时，然后从表格视图中删除单元格，这是一个了不起的演示。

# doctrine-orm - Zend Framework 2 中服务中的实体管理器

> ID：15266862
> 
> 赞同：3
> 
> 时间：2013-03-07T09:00:08.770
> 
> 标签：doctrine-orm, zend-framework2

我为我的模块编写了一个自定义服务。该服务提供了应验证给定令牌的公共静态函数。

现在我想实现另一个公共静态函数来检查 Doctrine-Entity 是否存在。对于这种情况，我需要服务中的对象管理器或服务定位器。

```
class ApiService 
{
    const KEY_LENGTH = 10;
    const USE_NUMBERS = true;
    const USE_CHARS = true;

    public static function isValid($apiKey) {
        $isValid = false;
        # more code tbd
        $isValid = self::exists($apiKey);
        return $isValid;
    }

    public static function exists($apiKey) {
    # Insert Object-Manager here

        $validator = new \DoctrineModule\Validator\ObjectExists(array(
           'object_repository' => $objectManager->getRepository('Application\Entity\User'),
           'fields' => array('email')
        )); 
    }
} 
```

1.  将我的函数实现为公共静态并将它们称为静态方法是“最佳实践”吗？

2.  将对象管理器注入我的`doesEntityExist()`函数的最佳实践是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T10:36:37.803

最好的方法是从您的类中完全删除静态方法。ZF2 使通过名称获取服务变得非常容易，因此对于这样的用例，您实际上不需要静态方法。

首先，清理你的服务：

```
namespace MyApp\Service;

use Doctrine\Common\Persistence\ObjectRepository;
use DoctrineModule\Validator\ObjectExists;

class ApiService
{
    // ...

    protected $validator;

    public function __construct(ObjectRepository $objectRepository)
    {
        $this->validator = new \DoctrineModule\Validator\ObjectExists(array(
           'object_repository' => $objectRepository,
           'fields'            => array('email')
        )); 
    }

    public function exists($apiKey)
    {
        return $this->validator->isValid($apiKey);
    }

    // ...
} 
```

现在为它定义一个工厂：

```
namespace MyApp\ServiceFactory;

use MyApp\Service\ApiService;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class ApiServiceFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $entityManager = $serviceLocator->get('Doctrine\ORM\EntityManager');
        $repository = $entityManager->getRepository('Application\Entity\User');

        return new ApiService($repository);
    }
} 
```

然后将服务名称映射到工厂（通常在您的模块中）：

```
namespace MyApp;

use Zend\ModuleManager\Feature\ConfigProviderInterface;

class Module implements ConfigProviderInterface
{
    public function getConfig()
    {
        return array(
            'service_manager' => array(
                'factories' => array(
                    'MyApp\Service\ApiService'
                        => 'MyApp\ServiceFactory\ApiServiceFactory',
                ),
            ),
        );
    }
} 
```

**注意**：您可能希望简单地使用闭包而不是定义单独的工厂类，但是当您不使用该服务时，拥有工厂类会给您带来小的性能提升。此外，在配置中使用闭包意味着您无法缓存合并的配置，因此请考虑使用此处建议的方法。

这是一个没有工厂类的例子（同样，考虑使用上面解释的方法）：

```
namespace MyApp;

use Zend\ModuleManager\Feature\ServiceProviderInterface;

class Module implements ServiceProviderInterface
{
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'MyApp\Service\ApiService' => function ($sl) {
                    $entityManager = $serviceLocator->get('Doctrine\ORM\EntityManager');
                    $repository = $entityManager->getRepository('Application\Entity\User');

                    return new MyApp\Service\ApiService($repository);
                },
            ),
        );
    }
} 
```

现在您可以在控制器中使用该服务：

```
class MyController extends AbstractActionController
{
    // ...

    public function apiAction()
    {
        $apiService = $this->getServiceLocator()->get('MyApp\Service\ApiService');

        if ( ! $apiService->isValid($this->params('api-key')) {
            throw new InvalidApiKeyException($this->params('api-key'));
        }

        // ...
    }

    // ...
} 
```

您也可以在拥有服务管理器的任何地方检索它：

```
$validator = $serviceLocator->get('MyApp\Service\ApiService'); 
```

作为附加建议，请考虑简化您的服务。由于`isValid`已经是您的验证器的一个方法，您可以简单地返回验证器本身（为了简单起见，这里使用闭包方法）：

```
namespace MyApp;

use Zend\ModuleManager\Feature\ServiceProviderInterface;
use DoctrineModule\Validator\ObjectExists;

class Module implements ServiceProviderInterface
{
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'MyApp\Validator\ApiKeyValidator' => function ($sl) {

                    $entityManager = $serviceLocator->get('Doctrine\ORM\EntityManager');
                    $repository = $entityManager->getRepository('Application\Entity\User');
                    new ObjectExists(array(
                       'object_repository' => $objectRepository,
                       'fields'            => array('email')
                    )); 
                },
            ),
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:41:58.000

就个人而言，我会将服务设为“服务”并将其放在 ServiceManager 中。另外我会考虑重构代码。现在，您依赖于 ObjectExists 验证器，而后者又依赖于实体存储库，而这又依赖于实体管理器。在服务之外组合验证器并从工厂注入它会简单得多。这样，如果你需要使用不同的验证器，你只需交给它一个不同的验证器。

```
class ApiService
{
    protected $validator;

    public function isValid($apiKey)
    {
         // other code
         $isValid = $this->exists($apiKey);
    }

    public function exists($apiKey)
    {
        return $this->getValidator()->isValid($apiKey);
    }

    public function setValidator(\Zend\Validator\AbstractValidator $validator)
    {
         $this->validator = $validator;
         return $this;
    }

    public function getValidator()
    {
        return $this->validator;
    }
} 
```

在 Module.php 中，将服务创建为工厂方法，或者更好的是作为工厂类，但这留给你作为练习:)

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'ApiService' => function($sm) {
                $em = $sm->get('Doctrine\ORM\EntityManager');
                $repo = $em->getRepository('Application\Entity\User');
                $validator = new \DoctrineModule\Validator\ObjectExists($repo, 
                   array('fields' => array('email')));
                $service = new ApiService();
                $service->setValidator($validator);
                return $service;
            },
        ),
    );
} 
```

现在，如果您需要不同的 EntityManager、不同的 Entity 存储库，甚至是完全不同的验证器，您只需要更改上面的几行代码，而不必深入研究您的服务代码。

# mysql - MySQL：在带逗号的 varchar 上使用 sum？

> ID：15266871
> 
> 赞同：0
> 
> 时间：2013-03-07T09:00:19.143
> 
> 标签：mysql, varchar

我有一个名为 net_amount 的列，它包含 244,98 之类的值。它是一个 varchar 列。当我尝试使用 sum 函数对其求和时，它仅对 244 求和并跳过小数位。我尝试将其转换为十进制，如下所示：

```
select cast(net_amount as decimal) from mytable 
```

这也跳过了小数位......知道可能出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:02:12.313

您可以使用 REPLACE 将逗号替换为点：

```
SELECT REPLACE('244,98', ',', '.') * 1 
```

或者你可以像这样使用 CAST：

```
cast(REPLACE(net_amount, ',', '.') as decimal(8,2)) 
```

# java - maven 没有从我的本地存储库中选择依赖项

> ID：15266878
> 
> 赞同：2
> 
> 时间：2013-03-07T09:00:48.020
> 
> 标签：java, maven

我正在研究我的 Maven 全局存储库中可用的模块（比如说 A，版本 1）。我现在已经修改了这个模块中的代码并将版本升级到版本 2。现在，这个模块的代码还没有提交，全局存储库现在也没有关于这个新版本。但是，我已经构建了项目，并且版本 2 在我的本地 .m2 文件夹中可用。

我现在正在开发一个依赖于模块 A 版本 2 的新模块（比方说 B）。maven 没有拾取对模块 A 的依赖。而且我的代码没有链接到模块 A 中的类。

任何帮助将非常感激。

编辑：我已经执行了模块 A 的全新安装，并且可以在本地存储库中看到这些类。

最好的，普吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:07:29.350

好吧，如果您使用的是 IDE，我想您会这样做（您使用的是 maven），您可以尝试更新项目配置并更新依赖项。还要确保在 pom.xml 文件中引用了正确版本的模块。当然，这一切都假设您已经执行了“A 版本 2”的全新安装。祝你好运！

# razor - MVC4：模型中的接口对象

> ID：15266881
> 
> 赞同：1
> 
> 时间：2013-03-07T09:00:53.087
> 
> 标签：razor, asp.net-mvc-4

我对 MVC 很陌生。我有以下模型类：

```
public class Store
{   
  public PriceList PriceListInfo { get; set; }
  public IStore storeData;
}    

public class PriceList
{
  public int id { get; set; }
  public string codice { get; set; }
}    

public interface IStore
{
 [...]
}    

public class Silo2Store : IStore
{
  public int S2 { get; set; }
  public int S3 { get; set; }
} 
```

我想在我看来使用这个模型：

```
@model Store

@Html.TextBoxFor(model => ((Silo2Store)Model.storeData).S3) 
```

对应的Controller方法为：

```
public ActionResult Customer()
{
    using (Store t = (Store)Session["Store"])
    {
        if (t.PriceListInfo == null)
        {
            t.PriceListInfo = new PriceList();
        }
        t.PriceListInfo.codice = "XXX";
        return View(t);
    }
} 
```

我想在我的控制器中检索模型：

```
[HttpPost]
public ActionResult Customer(Store modelStore)
{
    var test = ((Silo2Store)Model.storeData).S3;
} 
```

但`Model.storeData`在我看来，属性没有初始化，它是`null`. 然后，我无法检索控制器中的值。

无论如何我应该改变我的模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:19:32.377

您必须为`IStore`.

摘自[MSDN 杂志上关于 MVC 模型绑定的这篇文章](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)：

> 例如，尽管 Microsoft .NET Framework 为面向对象的原则提供了出色的支持，但 DefaultModelBinder 不支持绑定到抽象基类和接口。

# jquery - SVG中的图像元素不占据整个矩形 - jquery

> ID：15266882
> 
> 赞同：0
> 
> 时间：2013-03-07T09:01:02.173
> 
> 标签：jquery, svg, jquery-svg

请参考下面的 SVG。

```
<svg width="5cm" height="4cm" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">

<rect x="0" y="0" width="150px" height="150px"/>

    <image xlink:href="firefox.jpg" x="0" y="0" height="150px" width="150px"/>
</svg> 
```

输出如下所示。

![在此处输入图像描述](../Images/87012a7ac920abb62deb618155a9cc5a.png)

**如何使图像占据整个矩形？**

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:19:41.217

适用于与矩形具有相同纵横比的图像：http: [//jsfiddle.net/M24gX/](http://jsfiddle.net/M24gX/)

```
<svg width="8cm" height="8cm" version="1.1">
    <rect x="0" y="0" width="150px" height="150px" fill="red"/>
    <image xlink:href="http://lorempixel.com/150/150/sports/"
        x="0" y="0" height="150px" width="150px"/>
</svg> 
```

不适用于与您的矩形具有不同纵横比的图像：http: [//jsfiddle.net/5v9bd/](http://jsfiddle.net/5v9bd/)

```
<svg width="8cm" height="8cm" version="1.1">
    <rect x="0" y="0" width="150px" height="150px" fill="red"/>
    <image xlink:href="http://lorempixel.com/300/150/sports/"
        x="0" y="0" height="150px" width="150px"/>
</svg> 
```

如果您希望图像填充矩形的完整 150x150 像素，而不管其纵横比如何，您：

*   分配 height="150px" 和 width="150px" （就像你已经做过的那样）
*   **分配 preserveAspectRatio="none"**以允许图像具有非均匀缩放

示例：http: [//jsfiddle.net/Fq96J/](http://jsfiddle.net/Fq96J/)

```
<svg width="8cm" height="8cm" version="1.1">
    <rect x="0" y="0" width="150px" height="150px" fill="red"/>
    <image xlink:href="http://lorempixel.com/300/150/sports/"
        x="0" y="0" height="150px" width="150px" preserveAspectRatio="none"/>
</svg> 
```

preserveAspectRatio 是你在使用 SVG 时绝对应该知道的属性，所以我建议阅读一些文档并尝试一下。很好的解释可以在

*   [https://developer.mozilla.org/en-US/docs/SVG/Attribute/preserveAspectRatio](https://developer.mozilla.org/en-US/docs/SVG/Attribute/preserveAspectRatio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:21:06.047

它在[我的 JSFiddle](http://jsfiddle.net/XbzRX/)上运行良好。你能在 JSFiddle 上重现它吗？

```
<svg width="8cm" height="8cm" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">

<rect x="0" y="0" width="150px" height="150px" stroke="red" stroke-width="3"/>

    <image xlink:href="firefox.jpg" x="0" y="0" height="150px" width="150px"/>
</svg> 
```

# javascript - IE8 和 Safari 中的 Javascript + 日期转换

> ID：15266883
> 
> 赞同：2
> 
> 时间：2013-03-07T09:01:05.690
> 
> 标签：javascript, datetime

我正在尝试将日期时间（UTC 的原始格式：2012-12-05T21:55:00）转换为可读的本地时间格式，但输出因浏览器而异：

```
DateTime = new Date(DateTime);
alert(DateTime); 
```

**在 Chrome 中，它显示为：**

```
Wed Feb 20 2013
05:31:00 GMT +0800
(Malay Peninsula
Standard Time) 
```

**在 IE 中：**

```
Wed Feb 20 05:31:00
UTC+0800 2013 
```

因此，我对其应用了**.format**：

```
DateTime = new Date(DateTime);
DateTime.format('dd MMM, yyyy hh:mm tt')
alert(DateTime); 
```

这种格式在 Chrome 和 IE9 中看起来很好且一致：

```
20 Feb, 2013 05:31 AM 
```

但在 IE8 和 Safari 中显示时存在问题，它显示日期为：

```
NaN, 000NaN
NaN:NaN AM 
```

我尝试了其他 JS 插件，例如 date ninja，但也没有帮助。谁能建议如何解决 NaN 问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:03:20.193

几个月前，我遇到了“完全相同”的问题。使用[moment.js](http://momentjs.com/)。它在 Chrome、FF 和 IE（包括 IE 8）中提供一致的日期格式

# wcf - log4net 未插入数据库但对文件工作正常

> ID：15266884
> 
> 赞同：0
> 
> 时间：2013-03-07T09:01:12.080
> 
> 标签：wcf, log4net

我在 VS 2012 的 WCF 应用程序中使用此代码，SQL Express 是 2008 R2。

我已经包含了 fileAppendor 和 Database Appendor，File Appender 工作正常，但它没有将数据插入数据库。

我已经验证了相同的连接字符串工作正常并将记录插入表中。

另外我将缓冲区值设置为1，仍然没有运气

```
<bufferSize value="1" /> 
```

这是我的配置文件

```
 <?xml version="1.0"?>
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>    

  <log4net>

    <appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
      <bufferSize value="1" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <connectionString value="server=(local)\\SQLEXPRESS;database=Log_DB;Integrated Security=SSPI;Connection Timeout=360;" />
      <connectionString value="data source=[(local)\\SQLEXPRESS];initial catalog=[Log_DB];integrated security=SSPI" />

      <commandText value="INSERT INTO [Error_Log] ([Date_time] ) VALUES (@Date_time)" />
      <parameter>
        <parameterName value="@Date_time" />
        <dbType value="DateTime" />
        <!--<layout type="log4net.Layout.RawTimeStampLayout" />-->
        <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
      </parameter>
             </appender>

    <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
       <file value="log-file.txt"/>
      <appendToFile value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%ndc] ID=%property{EventID} - %message%newline" />
      </layout>
    </appender>

    <!-- Setup the root category, add the appenders and set the default level -->
    <root>
      <level value="ALL" />
      <appender-ref ref="LogFileAppender" />
      <appender-ref ref="AdoNetAppender" />
    </root>
  </log4net>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="log4net.Internal.Debug" value="true"/>
  </appSettings>
 ...

</configuration> 
```

我还缺少其他东西吗？

此外，通过将 Internal.Debug 设置为 true，我也没有获得任何信息。如何获取 log4net 的内部调试详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:29:14.950

最后我得到了答案，我在这里分享，因为它可以帮助其他人。

需要在连接字符串中使用**系统/机器名称**而不是**（本地） 。**即使使用 dotnet 应用程序（本地）工作，但对于 log4net 需要使用系统名称。

# javascript - 如何知道脚本块或 javascript 代码的生命周期？

> ID：15266886
> 
> 赞同：5
> 
> 时间：2013-03-07T09:01:20.313
> 
> 标签：javascript, jquery, lifetime

我想知道一旦加载，javascript 块/函数是否始终可用。因为我已经测试了一些东西，现在我有点困惑。我在 div 中定义了一个脚本块。脚本块有一个事件处理函数，用于使用 ajax 重新加载 div。ajax 调用返回 div 的纯 html 并将其替换为当前的。但这意味着替换也执行执行的脚本。我坚持认为该脚本将在替换语句后停止执行。但它没有。执行替换语句后的代码行那么这些东西是如何工作的。你如何描述脚本块的生命周期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T09:03:02.637

当`script`评估元素中包含的代码时，该代码评估的结果将成为页面运行时环境的一部分。移除`script`元素不会从环境中移除生成的结构（函数等）。

因此，如果脚本定义了函数，或将事件处理程序挂钩到元素，或在现有对象（包括全局对象）上创建新属性，那么即使`script`定义它们的函数、处理程序和属性已从 DOM 中删除，这些函数、处理程序和属性也会保留在内存中（服从通常的 JavaScript 垃圾收集；例如，未在任何地方引用的对象都符合 GC 条件，但`script`元素与此无关）。`script`元素只是将代码传送给浏览器的一种机制。

# encryption - 为什么不应将密码用作会话密钥

> ID：15266897
> 
> 赞同：1
> 
> 时间：2013-03-07T09:02:00.043
> 
> 标签：encryption, passwords, cryptography, sessionid

用于 Alice 和 Bob 之间的安全通信，如果他们有预先共享的密码。为什么该密码不应用作通信的会话密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T09:03:59.937

因为在此通信会话中，您可能会传输大量数据。此数据可用于发现密码。

如果您使用会话密钥，它仅在一个会话期间有效，因此即使它被泄露，密码仍然是安全的。此外，发现此会话密钥的可能性较小，因为它会定期更改，因此攻击者可用的数据量将受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:30:21.863

想象一下，攻击者发现了从用户发送到服务器的数据。如果您使用密码作为会话密钥，则攻击者可以完全访问您的帐户。

如果您使用随机密钥，攻击者只能在会话密钥有效期间（几分钟、几小时左右）访问您的帐户。

密码也可能在其他网站（例如您的邮件）中使用，因此攻击者可以获得更多帐户的访问权限。

然而，这个例子并不现实，因为会话密钥通常与用户的 IP 和其他相关信息相关联。这意味着攻击者还必须伪造自己的 IP 才能使用您的会话密钥。

这也是为什么有些网站在不输入旧密码的情况下不允许您更改密码的原因。这是因为如果攻击者劫持了您的会话，他将无法劫持您的帐户。您帐户中的每个重要更改（电子邮件、密码等）都应使用“输入您的密码”字段进行保护，以便会话劫持不会成为严重的安全问题（这是一个安全问题，但只是暂时的而不是关键的） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:25:40.730

密码通常太短，它们远非随机，因此它们的熵可能会受到攻击，并且它们保持不变，因此可以在未来的会话中使用获得的知识。你最终得到的是一种自 1850 年以来已知可破解的 Vigenère 密码。你必须自己决定，这是否“足够好”。

# java - 标记是一种数据挖掘形式吗？

> ID：15266899
> 
> 赞同：0
> 
> 时间：2013-03-07T09:02:05.067
> 
> 标签：java, database, search, data-mining, cluster-analysis

我正在实施一个小型 CRM 系统。预测和发现机会和趋势的数据挖掘概念对于此类系统至关重要。一种数据挖掘方法是**聚类**。这是一个非常小的 CRM 项目，使用 java 提供从数据库中检索信息的接口。

我的问题是，当我将客户插入数据库时​​，我有一个文本字段，允许客户在进入数据库的途中被标记，即注册点。

您会将标记技术视为**聚类**吗？如果是这样，这是一种**数据挖掘**技术吗？

我确信有复杂的 API，例如允许数据挖掘的 Java Data Mining API。但是为了我的项目，我只是想知道使用诸如 stackoverflow 之类的关键字标记用户是否允许在发布问题上标记关键字是一种数据挖掘形式，因为通过这些标记的单词，人们可以通过搜索轻松找到趋势和模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:31:44.173

简而言之，是的，标签是额外的信息，可以使以后更容易进行数据挖掘。

不过，它们可能还不够。标签链接到实体，根据您计算它们的方式，它们可能不会显示不同实体之间的有趣关系。使用您的标记系统，我看到的唯一可用关系是“具有相同的标记”，这可能还不够。

可以使用社区检测技术对使用您的数据和实体之间的关系构建的图进行聚类。这个例子是在 Python 中并使用 networkx 库，但它可能会让你知道我在说什么：[http://perso.crans.org/aynaud/communities/](http://perso.crans.org/aynaud/communities/)

# ruby-on-rails - web_step.rb 中用于更新表的动态步骤

> ID：15266905
> 
> 赞同：0
> 
> 时间：2013-03-07T09:02:36.663
> 
> 标签：ruby-on-rails, cucumber, capybara

我想要一个步骤来使用用户在其中一个黄瓜场景中提供的值更新表。步骤是：

```
Given /^I Update the (.+) field of the (.+) table by setting it as (.+)$/ do |col_name, table_name, value|

end 
```

我想要类似的东西

```
table_name.update_column('#{col_name}',value) 
```

或者它适用于所有桌子的东西。

# android - 不是 DRM 文件，正常打开

> ID：15266906
> 
> 赞同：13
> 
> 时间：2013-03-07T09:02:41.327
> 
> 标签：android, imageview, android-view, android-bitmap

我正在寻找有关由调用 BitmapFactory.decodeFile 引起的重复日志打印的解决方案。

在我的应用程序中，我有一个`ListView`每秒被计时器重绘的内容。有`ListView`一个`ImageView`从本地存储获取的图像源，（不是来自网络）

图像存储在：

```
filePath = /data/data/com.xxx.testlib/files/b22a1a294fd6e5ad3ea3d25b63c4c735.jpg 
```

我正在使用以下代码重绘图像，并且工作正常。毫无例外。

```
try
{
 File filePath = context.getFileStreamPath(imageName);

 if(filePath.exists()){

    bMap = BitmapFactory.decodeFile(filePath.getPath());

 }

}catch (Exception e) 
{

 e.printStackTrace();

} 
```

但是在执行以下行时：

```
bMap = BitmapFactory.decodeFile(filePath.getPath()); 
```

我在日志中打印如下：

```
03-07 09:55:29.100: I/System.out(32663): Not a DRM File, opening notmally
03-07 09:55:29.105: I/System.out(32663): buffer returned 
.... 
```

我怎样才能从打印读取到日志。

谢谢你

**编辑**

每当执行此操作时，它也会滞后于手机。这种性能下降特别明显，尤其是当手机处于运行状态`Waked up`并且我们使用此代码返回活动时。

OP已经一年多了，仍然没有找到答案。如果有人找到解决方案，请发布。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T13:50:50.060

DRM 代表数字版权管理。它通常是内容所有者使用的特殊密钥，以确保您的设备有权查看/播放内容。iTunes 多年来一直因此而臭名昭著。

它所做的只是让您知道您正在打开的资料不受 DRM 保护，因此可以正常打开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T06:18:34.937

希望，这可能对你有所帮助。

当我尝试将相机捕获的图像直接保存到：/data/data/com.xxx.testlib/images/b22a1a294fd6e5ad3ea3d25b63c4c735.jpg 时，我也遇到了同样的异常。

然后我首先将图像保存到相机使用的默认位置并将其复制到：/data/data/com.xxx.testlib/images/b22a1a294fd6e5ad3ea3d25b63c4c735.jpg。

现在从日志中删除“不是 DRM 文件，正常打开”并成功保存图像。

结论：文件夹：-“/data/data/com.xxx.testlib/”是私有的，只能从应用程序内部访问。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-14T10:11:25.227

可能是权限错误。您是否在 Manifest 中添加了正确的权限？

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

# emacs - 如何让 Emacs org-mode done 统计信息通过非 todo 标题进行过滤？

> ID：15266913
> 
> 赞同：9
> 
> 时间：2013-03-07T09:03:04.760
> 
> 标签：emacs, org-mode

如何获取 org-mode DONE 统计信息以过滤非待办事项标题并更新统计信息 cookie？

我有一个 org-mode 文件，如下所示：

```
* <2013-03-06 Wed> [0%]
** work
*** training
**** TODO email Anne
**** DONE call Raymond
*** reports
**** DONE collect research
**** DONE compile data
*** white papers
**** TODO collect client files
*** sales
**** DONE email Wendy                         
** housekeeping
*** DONE go to post office! 
```

父标题不是 TODO 任务；它们是概念类别。

我希望 org-mode 在我将任务标记为 DONE 时计算完成百分比统计信息。

我尝试设置`org-hierarchical-todo-statistics`但`t`没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T14:45:09.143

您已将变量向后设置，请尝试：

```
(setq org-hierarchical-todo-statistics nil) 
```

如果您只希望它对某些（单个）树产生影响，请使用该属性`:COOKIE_DATA: recursive`

从变量定义：

```
org-hierarchical-todo-statistics is a variable defined in `org.el'.
Its value is nil
Original value was t

Documentation:
Non-nil means TODO statistics covers just direct children.
When nil, all entries in the subtree are considered.
This has only an effect if `org-provide-todo-statistics' is set.
To set this to nil for only a single subtree, use a COOKIE_DATA
property and include the word "recursive" into the value. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:41:37.053

做一个

```
(setq org-hierarchical-todo-statistics nil) 
```

为我工作！您还可以将 COOKIE_DATA 属性设置为递归：

```
* <2013-03-06 Wed> [71%]
  :PROPERTIES:
  :COOKIE_DATA: recursive
  :END:
** work
*** training
**** TODO email Anne
**** DONE call Raymond
*** reports
**** DONE collect research
**** DONE compile data
*** white papers
**** TODO collect client files
*** sales
**** DONE email Wendy
** housekeeping
*** DONE go to post office! 
```

# asp.net - 如何迭代DataTable中给定行中的所有项目

> ID：15266916
> 
> 赞同：10
> 
> 时间：2013-03-07T09:03:15.610
> 
> 标签：asp.net, vb.net, datatable

如何`items`在`DataTable`. 我有以下代码来迭代所有行，我想要另一个 For 循环来迭代给定行中的所有单元格？

```
For Each row As DataRow In dt.Rows

Next row 
```

我可以访问每一行，但我想访问行上的每一列，因为我不知道列的名称和数量，..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T09:15:27.967

您必须遍历[DataRow.ItemArray](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)。在`C#`中，我们可以通过以下代码来实现：

```
 foreach (DataRow dr in dt.Rows)
   {
     foreach (var item in dr.ItemArray)
       {
                Console.WriteLine(item);
       }
   } 
```

这相当于下面的 VB.NET 代码。

```
For Each dr As DataRow In dt.Rows
    For Each item In dr.ItemArray
        Console.WriteLine(item)
    Next
Next 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-31T12:48:29.207

```
For Each row As DataRow In dt.Rows
    For Each column As DataColumn in dt.Columns
        Console.WriteLine(row(column))
    Next column
Next row 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T09:07:28.747

你的代码是正确的。您使用此代码...

```
Dim tbl As New DataTable()
Dim datarow As DataRow

tbl.Columns.Add("column1")

datarow = tbl.NewRow()
datarow("column1") = "Data1"

tbl.Rows.Add(datarow)
For Each dr As DataRow In tbl.Rows
    For Each value In dr.ItemArray
       Label1.Text = value.ToString()
    Next
Next 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-07T09:13:34.793

你也可以[用来](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx) `DataRow.ItemArray`做这项工作

代码看起来像这样

```
For Each item As var In Row.ItemArray
    //do something
Next 
```

# javascript - 记住输入密码对话框，无需重新加载页面

> ID：15266919
> 
> 赞同：1
> 
> 时间：2013-03-07T09:03:23.993
> 
> 标签：javascript, forms, cross-browser

我正在寻找一种方法，让浏览器在提交表单而不更改当前页面（例如使用提交事件）时询问用户是否要记住他的密码。

我做了一个 jsfiddle 来展示这个：http: [//jsfiddle.net/HeFFh/2](http://jsfiddle.net/HeFFh/2)。

```
<form action="javascript:">
    <input type="text" value="user" />
    <input type="password" value="pass" />
    <input type="submit" />
</form> 
```

当您按下提交按钮时，浏览器会询问您是否必须记住密码。

它仅适用于 Firefox。难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:24:03.040

我相信您必须将操作属性设置为“javascript：”以外的其他内容，并且输入应该具有名称属性。

尝试这个：

```
<form action="/" >
    <input type="text" value="user" name="username" />
    <input type="password" value="pass" name="password" />
    <input type="submit" />
</form> 
```

这不会覆盖浏览器设置，但如果用户未关闭该功能，则允许使用该功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:12:03.067

它基于浏览器设置而不是代码。

对于 chrome：转到 -> 设置 -> 显示高级设置 -> 密码和论坛 -> 选择“提供保存我在网络上输入的密码”

如需更多帮助，请访问此[链接](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95606)

# haskell - 在 Haskell 中以程序方式生成大量值 - 最惯用的方法？内存管理？

> ID：15266920
> 
> 赞同：3
> 
> 时间：2013-03-07T09:03:24.963
> 
> 标签：haskell, idioms

我有一个函数，它采用一系列随机数/浮点数，并使用它们来生成一个值/结构（即，采用随机速度和球被抛出的点的位置并输出它会降落的坐标） . 我需要连续生成数千个。

我实现所有东西的方式是每个计算都接受一个 stdGen，用它来生成几个数字，并传递一个新的 stdGen 以允许它链接到另一个。

为了对 10000 个项目执行此操作，我制作了一个列表，`generate_item n`从中基本上输出一个`(value,gen)`元组（该值是我要计算的值），其中的值`gen`是从获取的计算中递归输出的 stdGen值来自`generate_item n-1`

但是，该程序在大约一千个结果左右时似乎爬行得慢得不切实际。而且似乎绝对不可扩展。这可能与我将所有`generate_item`结果都存储在内存中这一事实有关吗？

或者有没有比我上面描述的更惯用的方法在 Haskell 中使用 Monads 或其他方法来解决这个问题？

请注意，即使在 ruby​​ 和 python 等高级脚本语言中，从随机值生成算法的代码也会在几秒钟内生成 10k；这些计算几乎不密集。

代码

```
-- helper functions that take in StdGen and return (Result,new StdGen)
plum_radius :: StdGen -> (Float,StdGen)
unitpoint   :: Float -> StdGen -> ((Float,Float,Float),StdGen)
plum_speed  :: Float -> StdGen -> (Float,StdGen)

-- The overall calculation of the value
plum_point  :: StdGen -> (((Float,Float,Float),(Float,Float,Float)),StdGen)
plum_point gen  = (((px,py,pz),(vx,vy,vz)),gen_out)
  where
    (r, gen2)         = plum_radius gen
    ((px,py,pz),gen3) = unitpoint r gen2
    (s, gen4)         = plum_speed r gen3
    ((vx,vy,vz),gen5) = unitpoint s gen4
    gen_out           = gen5

-- Turning it into some kind of list
plum_data_list  :: StdGen -> Int -> (((Float,Float,Float),(Float,Float,Float)),StdGen)
plum_data_list seed_gen 0  = plum_point seed_gen
plum_data_list seed_gen i  = plum_point gen2
  where
    (_,gen2)  = plum_data_list seed_gen (i-1)

-- Getting 100 results
main = do
  gen <- getStdGen
  let data_list = map (plum_data_list gen) [1..100]
  putStrLn List.intercalate " " (map show data_list) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:08:34.560

考虑只使用 mersenne-twister 和[vector-random](http://hackage.haskell.org/packages/archive/vector-random/latest/doc/html/Data-Vector-Random-Mersenne.html)包，它们专门针对生成大量高质量随机数据进行了优化。

列表不适合分配大量数据——最好使用打包表示——除非你正在流式传输。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T09:18:03.630

首先，您所描述的模式——获取一个`StdGen`然后返回一个带有值的元组，另一个`StdGen`被链接到下一个计算中——*正是*[`State`](http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/Control-Monad-State-Lazy.html)monad 编码的模式。重构代码以使用它可能是开始熟悉一元模式的好方法。

至于你的性能问题，`StdGen`是出了名的慢。我对这些东西做的不多，但我听说[mersenne twister](http://hackage.haskell.org/package/mersenne-random-pure64)更快。

但是，您可能还想发布您的代码，因为在您生成大型列表的情况下，根据您的操作方式，懒惰确实对您有利或不利。但是如果没有看到你在做什么，很难给出具体的建议。一个经验法则，以防万一你来自另一种函数式语言，如 Lisp——在生成列表（或其他惰性数据结构——例如树，但不是 a `Int`）时，**避免**尾递归。它更快的直觉不会转移到惰性语言。例如使用（没有我会在实践中实际使用的单子风格编写）

```
randoms :: Int -> StdGen -> (StdGen, [Int])
randoms 0 g = (g, [])
randoms n g = let (g',  x)  = next g
                  (g'', xs) = randoms (n-1) g'
              in (g'', x : xs) 
```

这将允许“流式传输”结果列表，因此您可以在生成后面的部分之前访问它的早期部分。（在这种情况下，它有点微妙，因为访问结果`StdGen`必须生成整个列表，所以在你使用完列表之前，你必须小心避免这样做——我希望有一个快速的随机生成器支持良好的`split`操作，那么您可以完全不必返回生成器）。

哦，以防万一你在处理 monads 时遇到了麻烦，这是上面用 state monad 编写的函数：

```
randomsM :: Int -> State StdGen [Int]
randomsM 0 = return []
randomsM n = do
    x <- state next
    xs <- randomsM (n-1)
    return (x : xs) 
```

看到信件了吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T13:15:15.610

其他张贴者有优点，`StdGen`性能不是很好，您可能应该尝试使用 State 而不是手动传递生成器。但我认为最大的问题是你的`plum_data_list`功能。

它似乎旨在进行某种查找，但由于它是在没有任何记忆的情况下递归实现的，因此您所做的调用必须递归到基本情况。也就是说，`plum_data_list seed_gen 100`需要随机生成器 from`plum_data_list seed_gen 99`等，直到`plum_data_list seed_gen 0`。当您尝试生成这些值的列表时，这将为您提供二次性能。

可能更惯用的方法是让`plum_data_list seed_gen`生成一个无限的点列表，如下所示：

```
plum_data_list :: StdGen -> [((Float,Float,Float),(Float,Float,Float))]
plum_data_list seed_gen = first_point : plum_data_list seed_gen'
  where
    (first_point, seed_gen') = plum_point seed_gen 
```

然后您只需将代码修改为`main`类似`take 100 $ plum_data_list gen`的内容，即可恢复线性性能。

# facebook - 使用分享按钮将 Youtube 视频分享到 Facebook，没有缩略图

> ID：15266922
> 
> 赞同：1
> 
> 时间：2013-03-07T09:03:28.573
> 
> 标签：facebook, youtube, share, facebook-sharer

我在使用 facebook 分享按钮从我的网站分享 youtube 视频时遇到问题，该网站包含从 Youtube 导入的文章、图片和视频，所有元标记的格式和提供都很好。但只有当我尝试分享视频缩略图时才使用 youtube 不显示！！！在另一边，描述和标题都显示出来了，而且是正确的。我试图通过（developers.facebook.com/tools/debug）检查 facebook 从我的网站识别的内容，缩略图在那里！！！我还尝试直接从 youtube 获取视频 url 并将其粘贴到 facebook 并显示缩略图，只有当我从我的网站单击共享按钮以共享 youtube 视频时，缩略图才会消失。

请提前帮助和感谢。

# c++ - VS2010 C++优化是否循环展开

> ID：15266923
> 
> 赞同：3
> 
> 时间：2013-03-07T09:03:36.883
> 
> 标签：c++, visual-studio-2010, optimization

我有以下一段简单的代码，它可能会被执行数亿次；

```
for (int i = 0; i < 8; i++)
    if (((p[i].X >= x) && (p[i].X <= x + d))
        &&((p[i].Y >= y) && (p[i].Y <= y + d))
        &&((p[i].Z >= z) && (p[i].Z <= z + d)))
      return 1; 
```

Visual C++ 2010 编译器中的优化器会为我展开这个循环，还是我最好手动完成？我查看了[其他类似的问题](https://stackoverflow.com/questions/7691215/how-do-optimizing-compilers-decide-when-and-how-much-to-unroll-a-loop)，但没有看到任何具体结果。我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:43:32.660

真正的问题是，你从展开中得到什么？

每次“展开”时，展开都会刮掉一个分支 ( `if i >= 8 stop`)。

您的循环体已经包含 6 个分支（`if`* 1、`||`* 2、`&&`* 3）；那么展开它有什么好处呢？

看看代码是如何优化的可能会很有趣；但我不确定*展开*是否应该是您的主要关注点，我更担心如何处理复杂的条件！

# c# - 请求的数据库未在配置中定义

> ID：15266924
> 
> 赞同：0
> 
> 时间：2013-03-07T09:03:38.893
> 
> 标签：c#, .net

我正在开发的一个应用程序是使用 Microsoft Practices Enterprise 来处理数据库交互。

这一切都很好，但是在某些时候它只是停止了工作。我唯一能想到的是，我从部署在另一台机器上的另一个数据库恢复了我正在处理的数据库（由具有与我现在使用的帐户不同的帐户的用户访问）。

我创建了 2 个小测试（1 个解决方案，1 个项目有 1 个类，`Program.cs`），第一个有效：

```
 static void test1()
        {
            // Create a connection
            SqlConnection sdwDBConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["Test"].ToString());

            // Open the connection
            sdwDBConnection.Open();

            // Create a String to hold the query.
            string query = "SELECT * FROM [TestDB].[dbo].[Test1]";

            // Create a SqlCommand object and pass the constructor the connection string and the query string.
            SqlCommand queryCommand = new SqlCommand(query, sdwDBConnection);

            // Use the above SqlCommand object to create a SqlDataReader object.
            SqlDataReader queryCommandReader = queryCommand.ExecuteReader();

            // Create a DataTable object to hold all the data returned by the query.
            DataTable dataTable = new DataTable();

            // Use the DataTable.Load(SqlDataReader) function to put the results of the query into a DataTable.
            dataTable.Load(queryCommandReader);

            // Example 1 - Print your  Column Headers
            String columns = string.Empty;
            foreach (DataColumn column in dataTable.Columns)
            {
                columns += column.ColumnName + " | ";
            }
            Console.WriteLine(columns);

            // Close the connection
            sdwDBConnection.Close();
            System.Console.Read();
        } 
```

产量：

> ID1 | 价值1 | 价值2 | 价值3 |

但是第二个失败了：

```
 static void test2()
        {
            try
            {
                Database db = DatabaseFactory.CreateDatabase("Test");    //Line 59
                using (DbCommand cmd = db.GetSqlStringCommand("SELECT * FROM [TestDB].[dbo].[Test1]"))
                {
                    using (IDataReader reader = cmd.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            System.Console.WriteLine("{0} {1} {2}", reader.GetInt64(0)      
                            , reader.GetString(1) 
                            , reader.GetString(2));
                        }
                    }
                }
            }
            catch (Exception e)
            {
                System.Console.WriteLine(e.Message + "\n" + e.StackTrace);
            }
            finally
            {
                System.Console.Read();
            }
        } 
```

产量：

```
The requested database Test is not defined in configuration.
   at Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ObjectBuilder.EnterpriseLibraryFactory.BuildUp[T](IReadWriteLocator locator, ILifetimeContainer
 lifetimeContainer, String id, IConfigurationSource configurationSource)
   at Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ObjectBuilder.EnterpriseLibraryFactory.BuildUp[T](String id, IConfigurationSource configuration
Source)
   at Microsoft.Practices.EnterpriseLibrary.Data.DatabaseFactory.CreateDatabase(String name)
   at ....Program.test2() in ...\Program.cs:line 59 
```

这是我的`app.config`

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />    
  </configSections>  
  <dataConfiguration defaultDatabase="Test" />
  <connectionStrings>       
  <add name="Test" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=TestDB;Integrated Security=SSPI; Connect Timeout=120" providerName="System.Data.SqlClient" />    
  </connectionStrings>  
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration> 
```

我*认为*，如果有任何连接/配置问题，第一个也会失败。我也尝试过使用空构造函数，但这只会引发另一个异常，即`String`参数不能为`null`空或为空。

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:15:02.887

事实证明，微软产品之间存在*冲突。*就我而言，它是 ESB Toolkit 安装。更多信息可[在此处](http://gloriousmonster.blogspot.co.uk/2009/06/esb-toolkit-20-has-surprise-for.html)获得。

就我而言，卸载 ESB 工具包是可行的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T18:20:48.157

如果你使用

```
Database sda = DatabaseFactory.CreateDatabase("DBConnectionString"); 
```

确保你有这个设置`App.config`

```
"connectionStrings
    add name="DBConnectionString" connectionString="server=DBServerNameHere;database=DatabaseNameHere;Integrated Security=true;" providerName="System.Data.SqlClient"
  connectionStrings" 
```

# c# - 输出流问题

> ID：15266930
> 
> 赞同：1
> 
> 时间：2013-03-07T09:03:53.463
> 
> 标签：c#, asp.net

嗨，我正在尝试显示使用 GDI+ 创建动态的图像，这是我的代码

```
 Font font = new Font("Impact", 20, FontStyle.Regular);
    Bitmap image = new Bitmap(300,50);
    Graphics g = Graphics.FromImage(image);
    g.DrawString("This is a test", font, Brushes.Blue,10,5);
    image.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Gif);
    g.Dispose();
    image.Dispose(); 
```

问题是当我使用 FireFox 时，输出是这样的：

![在此处输入图像描述](../Images/7d0768668173b731b55ed462de14a53e.png)

但在 IE 中它显示正确（没有在任何其他浏览器中测试）。是什么错误。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:06:41.043

确保您正在设置[`Response.ContentType`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.contenttype.aspx).

```
HttpContext.Current.Response.ContentType = "image/gif"; 
```

在这里找到：[http ://forums.asp.net/t/1572453.aspx/1](http://forums.asp.net/t/1572453.aspx/1)

# twitter - 如何为 Twitter 数据设计 HBase 模式？

> ID：15266933
> 
> 赞同：2
> 
> 时间：2013-03-07T09:04:01.770
> 
> 标签：twitter, nosql, hbase

我有以下 Twitter 数据，我想为相同的数据设计一个模式。我需要执行的查询如下：获取时间间隔的推文量、具有相应用户信息的推文、具有相应主题信息的推文等...根据以下数据，任何人都知道架构设计在哪里是正确的..（将行键设为 id+timestamp，列族作为用户，其他分组到主列中。有什么建议吗？

```
{
   "created_at":"Tue Feb 19 11:16:34 +0000 2013",
   "id":303825398179979265,
   "id_str":"303825398179979265",
   "text":"Unleashing Innovation Conference Kicks Off - Wall Street Journal (India)              http:\/\/t.co\/3bkXJBz1",
   "source":"\u003ca href=\"http:\/\/dlvr.it\" rel=\"nofollow\"\u003edlvr.it\u003c\/a\u003e",
   "truncated":false,
   "in_reply_to_status_id":null,
   "in_reply_to_status_id_str":null,
   "in_reply_to_user_id":null,
   "in_reply_to_user_id_str":null,
   "in_reply_to_screen_name":null,
   "user":{
      "id":948385189,
      "id_str":"948385189",
      "name":"Innovation Plaza",
      "screen_name":"InnovationPlaza",
      "location":"",
      "url":"http:\/\/tinyurl.com\/ee4jiralp",
      "description":"All the latest breaking news about Innovation",
      "protected":false,
      "followers_count":136,
      "friends_count":1489,
      "listed_count":1,
      "created_at":"Wed Nov 14 19:49:18 +0000 2012",
      "favourites_count":0,
      "utc_offset":28800,
      "time_zone":"Beijing",
      "geo_enabled":false,
      "verified":false,
      "statuses_count":149,
      "lang":"en",
      "contributors_enabled":false,
      "is_translator":false,
      "profile_background_color":"131516",
      "profile_background_image_url":"http:\/\/a0.twimg.com\/profile_background_images\/781710342\/17a75bf22d9fdad38eebc1c0cd441527.jpeg",
      "profile_background_image_url_https":"https:\/\/si0.twimg.com\/profile_background_images\/781710342\/17a75bf22d9fdad38eebc1c0cd441527.jpeg",
      "profile_background_tile":true,
      "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/3205718892\/8126617ac6b7a0e80fe219327c573852_normal.jpeg",
      "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/3205718892\/8126617ac6b7a0e80fe219327c573852_normal.jpeg",
      "profile_link_color":"009999",
      "profile_sidebar_border_color":"FFFFFF",
      "profile_sidebar_fill_color":"EFEFEF",
      "profile_text_color":"333333",
      "profile_use_background_image":true,
      "default_profile":false,
      "default_profile_image":false,
      "following":null,
      "follow_request_sent":null,
      "notifications":null
   },
   "geo":null,
   "coordinates":null,
   "place":null,
   "contributors":null,
   "retweet_count":0,
   "entities":{
      "hashtags":[

      ],
      "urls":[
         {
            "url":"http:\/\/t.co\/3bkXJBz1",
            "expanded_url":"http:\/\/dlvr.it\/2yyG5C",
            "display_url":"dlvr.it\/2yyG5C",
            "indices":[
               73,
               93
            ]
         }
      ],
      "user_mentions":[

      ]
   },
   "favorited":false,
   "retweeted":false,
   "possibly_sensitive":false
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:59:25.413

如果您 100% 确定 ID 是唯一的，则可以将其作为行键来存储大量数据：

303825398179979265 -> 数据_CF

您的列族 data_CF 将在这些行中定义：

```
"created_at":"2 月 19 日星期二 11:16:34 +0000 2013"
“id_str”：“303825398179979265”
...
"user_id":948385189 { 请注意我正在对您的字典进行非规范化}
"user_name":"创新广场"

```

列表有点棘手。解决方案是在类别前添加一些使其唯一的东西：

```
"entities_hashtags_":"\x00" { 这里 \x00 是一个虚拟值 }

```

对于 URL，如果顺序不重要，您可以在其前面加上 UUID。它将保证它是独一无二的。

这种方法的优点是如果您需要更新此数据中的字段，它将以原子方式完成，因为 HBase 保证行原子性。

对于第二个问题，如果您需要即时汇总信息，您将不得不预先计算它并将其存储在另一个表中。如果您希望通过 M/R 生成此数据，如果要基于时间，您可以输入时间戳 + 行 ID。按主题将类似于主题 + 行 ID。这允许您编写带有开始停止行的前缀扫描，其中仅包含时间范围或您感兴趣的主题。

玩得开心 ！

# c# - 在列表中附加（不添加）对象的项目

> ID：15266935
> 
> 赞同：0
> 
> 时间：2013-03-07T09:04:08.800
> 
> 标签：c#, list, object, append, add

这是我的疑问之一：如果我有一个像 ABC 这样的类并且它具有 A、B、C 等三个项目（字符串类型）。我为 A 运行一个循环，然后在 List 中添加 obj。我再次为 B 运行一个循环，然后将 obj 添加到列表中。和 C 一样。

现在这不是我想要的。我从不想在每个循环之后添加 obj 。相反，我想在最后添加它们，以便列表只包含一个计数而不是三个。是否可以？

我知道如何将列表添加到另一个等，但我希望追加（而不是添加）。更新：嗯，我已经在我的问题中提到了这一点，我正在进一步解释。

```
public List<ABC> Method()
    {
     //Linq Query to get records
        List<ABC> Lst = new List<ABC>();
        foreach (var result in Linq)
        {
            ABC obj = new ABC (); 
       //here I make sub query to get A and add obj in list and adding in list
        }
        foreach (var result1 in Linq)
        {
            ABC obj = new ABC (); 
       //here I make sub query to get B and add obj in list and adding in list
        }
       foreach (var result1 in Linq)
        {
            ABC obj = new ABC (); 
       //here I make sub query to get C and add obj in list and adding in list
        }
        return Lst;
    }

In my List I get:
Count1=A,null,null
Count2=null,B,null
Count3=null,null,C 
```

我想得到

```
Count1=A,B,C. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:08:26.227

如果您希望所有值都是唯一的，您可以使用 HashSet，请参阅[http://msdn.microsoft.com/en-us/library/bb359438.aspx](http://msdn.microsoft.com/en-us/library/bb359438.aspx)

如果您仍然需要一个列表，您可以在最后使用 ToList 进行转换。

# javascript - 如何使跨度重叠 td 内的文本？

> ID：15266936
> 
> 赞同：3
> 
> 时间：2013-03-07T09:04:12.840
> 
> 标签：javascript, jquery, css, twitter-bootstrap

这是一个示例[http://jsfiddle.net/9nvGM/](http://jsfiddle.net/9nvGM/)

当用户将鼠标悬停在`long text`跨度上时，跨度会扩大并且大小会`td`发生变化。我想阻止这种变化。`td`无论内部跨度有多长，我都希望具有相同的尺寸。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T09:10:55.593

尽管您可以使 td 的宽度更大，但就标签的长度而言，这仅提供有限的选项，但另一个更安全的解决方案是将跨度绝对相对于现有跨度定位，如下所示：[http:// jsfiddle.net/9nvGM/6/](http://jsfiddle.net/9nvGM/6/)

HTML：

```
<span class="label"><span class="long label">long long long text</span>long text</span> 
```

CSS：

```
.label{
    position:relative;
}
.long{
    position:absolute;
    left:0px;
    top:0px;
    display:none;
} 
```

JS：

```
handlerIn = function(e) {
  span.find(".long").show(); 
}
handlerOut = function(e) {
  span.find(".long").hide();   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:07:37.573

将 td 设置为相对位置，将跨度设置为绝对定位，然后设置跨度的位置，也许还有宽度。跨度也需要显示为块。这应该会导致跨度保持在原来的位置，并且它将与任何东西重叠。跨度的行为应该有点像工具提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:07:59.010

试试这个：

基本上的想法是固定 td 或 span 的宽度

```
span
{
    width:50px;
    overflow-x:scroll; /* or hidden */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T09:08:00.493

只需添加此 CSS 规则

```
td {
    max-width: 87px;
} 
```

[在这里](http://jsfiddle.net/markus85/9nvGM/4/)试试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T09:17:27.253

尝试为你的 td 使用 min-width 和 max-width 然后你就有了你想要的

CSS

```
.tds{
max-width: 60px;min-width: 60px;
} 
```

[看演示](http://jsfiddle.net/9nvGM/16/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T09:34:29.230

.lable 类中没有包装样式。
只需将 white-space 设置为 normal 即可将其删除。

```
.label{
    width:55px;
    word-wrap:break-word;
    white-space: normal !important;
} 
```

像这样：http:
[//jsfiddle.net/9nvGM/17/](http://jsfiddle.net/9nvGM/17/)

# javascript - iphone html5 视频触摸事件

> ID：15266938
> 
> 赞同：2
> 
> 时间：2013-03-07T09:04:17.340
> 
> 标签：javascript, iphone, html, video

**iphone唯一的**问题

[演示](http://jsfiddle.net/TLAkf/9/)（尝试触摸视频）

```
<div class="video">
  <div class="empty"></div>
  <video id="player1" width="540" height="303" preload="none">
    <source src="http://mediaelementjs.com/media/echo-hereweare.mp4" type="video/mp4" />
  </video>
</div>

.video {
  position : relative;
  width    : 540px;
  height   : 303px;
}
.video .empty {
  position : absolute;
  z-index  : 1;
  width    : 100%;
  height   : 100%;
}

$("*").add(document).add(window)
.bind(
  "touchstart touchend touchcancel touchleave touchmove",
  function() { alert(1); }
); 
```

html5 视频控件无法关闭，但视频控件不会传播任何事件（尤其是触摸事件）。

有什么解决方法吗？

# mysql - 是否可以以更好的方式编写此 mysql 语句？清洁工？更具可读性？快点？

> ID：15266940
> 
> 赞同：0
> 
> 时间：2013-03-07T09:04:30.857
> 
> 标签：mysql

我有两个表，用户和结果。

结果包含`user_id`与用户表相同的列。

我想获取结果表，求和 results_value 列，然后使用 user_id 从用户表中获取其他信息....我想出了这个：

```
SELECT results.user_id, SUM(results.result_value), users.user_name, users.user_pic, users.user_level 
FROM results, users 
WHERE users.user_id = results.user_id 
GROUP BY results.user_id 
ORDER BY SUM(results.result_value) DESC
LIMIT 4 
```

它确实有效，但作为一个完整的 mysql 初学者，我想知道我是否在做一些愚蠢的事情，或者它可能有效但有更好的方法（更快）做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:16:22.980

你的方法其实很好。不用 也可以写`GROUP BY`，可能更容易理解：

```
SELECT
    u.user_id,
    (   SELECT sum(r.result_value)
        FROM results r
        WHERE r.user_id = u.user_id
    ) AS rsum,
    u.user_name,
    u.user_pic,
    u.user_level
FROM users u
ORDER BY 2 DESC
LIMIT 4 
```

您可能会注意到，使用表别名有助于提高查询的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:17:14.573

基本款看起来不错。主要是确保你有合适的索引。此外，您应该拥有在 GROUP BY 子句中命名的所有非聚合列（在 MySQL 中不是 100% 必需的，但在其他一些 SQL 风格中，不这样做会导致为这些列返回不确定的值）。

您还可以使用更现代的语法进行 JOIN：-

```
SELECT results.user_id, SUM(results.result_value) AS Asum, users.user_name, users.user_pic, users.user_level 
FROM results
INNER JOIN users 
ON users.user_id = results.user_id 
GROUP BY results.user_id, users.user_name, users.user_pic, users.user_level 
ORDER BY Asum DESC
LIMIT 4 
```

# paypal - 贝宝权限 API

> ID：15266943
> 
> 赞同：0
> 
> 时间：2013-03-07T09:04:51.313
> 
> 标签：paypal, express-checkout

我正在建立一个商店，商家（卖家）可以将他们的商品出售给客户。我使用 PayPal Expresscheckout 进行付款。我已经用我自己的 API 凭据进行了测试，它运行良好。

但是，为了能够将 ExpressCheckout API 用作特定商家，我必须获得它的权限。

他们可以直接从他们的个人资料中给我他们的权限吗？我不想实施一些特殊的工作流程来从他们那里获取权限。

然后我应该将每个商家的凭据存储在我自己的数据库中吗？

它是什么类型的凭证？商家如何/在哪里可以获得这些并发送给我？

我已经阅读了一些 Permission API 文档，但我不确定我是否真的理解它。所以很高兴能从已经有这方面经验的人那里得到直接的回答。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:00:56.510

他们需要从他们的账户向您提供他们的 API 凭证，或者他们需要向您的 API 用户名授予第 3 方权限，以便能够在他们的账户上执行 API 调用。

# mysql - 从mysql数据库中删除重复数据

> ID：15266945
> 
> 赞同：1
> 
> 时间：2013-03-07T09:04:58.017
> 
> 标签：mysql, sql

从事与数据库相关的工作。大多数情况下，当客户以 excel 表格的形式向您发送其数据并在一些 excel 操作后将该数据推送到数据库表时，它就完成了。我也做过很多次。

这种方法面临的一个非常常见的问题是，它有时可能会导致重复行，因为发送的数据主要来自人力资源和财务等部门，人们不太了解数据规范化技术 [:-)]。

我将使用 Employee 表，其中列名是 id、name、department 和 email。

*以下是用于生成测试数据的 SQL 脚本。*

创建模式TestDB；

```
CREATE TABLE EMPLOYEE
(

   ID INT,
   NAME Varchar(100),
   DEPARTMENT INT,
   EMAIL Varchar(100)
);

INSERT INTO EMPLOYEE VALUES (1,'Anish',101,'anish@howtodoinjava.com');

INSERT INTO EMPLOYEE VALUES (2,'Lokesh',102,'lokesh@howtodoinjava.com');

INSERT INTO EMPLOYEE VALUES (3,'Rakesh',103,'rakesh@howtodoinjava.com');

INSERT INTO EMPLOYEE VALUES (4,'Yogesh',104,'yogesh@howtodoinjava.com'); 
```

***--这些是重复的行***

```
INSERT INTO EMPLOYEE VALUES (5,'Anish',101,'anish@howtodoinjava.com');
INSERT INTO EMPLOYEE VALUES (6,'Lokesh',102,'lokesh@howtodoinjava.com'); 
```

***解决方案：***

```
DELETE e1 FROM EMPLOYEE e1, EMPLOYEE e2 WHERE e1.name = e2.name AND e1.id > e2.id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:30:08.050

在将记录插入数据库之前，您始终可以确保该记录是否已经存在，在您的情况下，您可以对其唯一键有条件，这对于每个员工来说都是不同的。此外，您可以将单个列作为唯一键或使用多个列来唯一标识记录的复合键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:15:38.170

在名称字段上添加唯一约束并使用下面的查询 INSERT INTO EMPLOYEE VALUES 请参考[“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:12:01.933

使用过滤器删除excel表本身中的所有重复记录，然后将这些记录插入到您的数据库中

使用 distinct 关键字表示唯一

[如何将不同记录从表 A 插入到表 B（两个表具有相同的结构）](https://stackoverflow.com/questions/5171328/how-to-insert-distinct-records-from-table-a-to-table-b-both-tables-have-same-st) 检查此堆栈溢出链接

# python - Python - 无法使用 LXML.HTML 访问某些标签

> ID：15266946
> 
> 赞同：1
> 
> 时间：2013-03-07T09:04:58.557
> 
> 标签：python, regex, parsing, lxml

改天另一个问题，对不起所有的帖子。昨天用户“JF Sebastian”给了我一个很好的提示，让我使用 LXML.HTML 而不是只使用 LXML。

我今天将它用于另一个提要`http://feeds.bbc.co.uk/iplayer/search/tv/?q=news`，但我无法访问内容元素中的几个标签。

以下是 Feed 数据示例：

```
 <entry>
    <title type="text">BBC News at Six: 06/03/2013</title>
    <id>tag:feeds.bbc.co.uk,2008:PIPS:b01r27mt</id>
    <updated>2013-03-07T00:20:38Z</updated>
    <content type="html">
      &lt;p&gt;
    &lt;a href=&quot;http://www.bbc.co.uk/iplayer/episode/b01r27mt/BBC_News_at_Six_06_03_2013/&quot;&gt;
      &lt;img src=&quot;http://ichef.bbci.co.uk/programmeimages/episode/b01r27mt_150_84.jpg&quot; alt=&quot;BBC News at Six: 06/03/2013&quot; /&gt;
    &lt;/a&gt;
      &lt;/p&gt;
      &lt;p&gt;
    National and international news stories from the BBC News team, followed by weather.
      &lt;/p&gt;
    </content>
    <category term="News" />
    <category term="TV" />
    <link rel="alternate" href="http://www.bbc.co.uk/iplayer/episode/b01r27mt/BBC_News_at_Six_06_03_2013/" type="text/html" title="BBC News at Six: 06/03/2013">
      <media:content>
    <media:thumbnail url="http://ichef.bbci.co.uk/programmeimages/episode/b01r27mt_150_84.jpg" width="150" height="84" />
      </media:content>
    </link>
    <link rel="self" href="http://feeds.bbc.co.uk/iplayer/episode/b01r27mt" type="application/atom+xml" title="06/03/2013" />
    <link rel="related" href="http://www.bbc.co.uk/programmes/b007mpkn/microsite" type="text/html" title="BBC News at Six" />
  </entry> 
```

内容标签中的标签似乎是文本，无法正确解析。这是我的代码：

```
tree = html.parse("http://feeds.bbc.co.uk/iplayer/search/tv/?q=news")
for show in tree.xpath('//entry'):
    select = lambda expr: show.cssselect(expr)[0]
    icon_url=select("thumbnail").get('url')
    print "icon_url: ", icon_url
    name=select('title').text_content()
    print "name: ", name
    stream=select('id').text_content()
    print "stream: ", stream
    date=select('updated').text_content()
    print "date: ", date
    content=select('content').text_content()
    print "content: ", content
    #links = (re.compile ('\n      &lt;p&gt;\n        &lt;a href=&quot;.+?&quot;&gt;\n          &lt;img src=&quot;(.+?)&quot; alt=&quot;.+?&quot; /&gt;\n        &lt;/a&gt;\n      &lt;/p&gt;\n      &lt;p&gt;\n     ').findall(content))
    #print "links: ", links
    #short=links
    #print "short: ", short 
```

我想将带有程序描述的第二个 p 标签放入上面的短变量中，但我似乎无法使用 lxml 选择这个标签，而且我无法让正则表达式在选择我想要的行时工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:40:09.687

您需要取消引用该文本以获取`html`然后再次解析它。

从[这里](https://stackoverflow.com/a/2474992/790439)

```
from xml.sax import saxutils as su

unqoutedHtml = su.unescape(content)
newElement = html.document_fromstring(unqoutedHtml) 
```

# android - Android：获取从通话记录中调用的唯一联系人

> ID：15266952
> 
> 赞同：0
> 
> 时间：2013-03-07T09:05:15.600
> 
> 标签：android, performance, calllog

假设我的通话记录中有 100 个通话。我想找到他们被调用的唯一联系人（不是号码）。问题是，如果一个联系人有两个电话号码（例如，对于联系人 A，我有一个家庭号码和另一个手机号码），我将计算该联系人两次！

我尝试了以下。我正在阅读通话记录。然后对于每个通话记录号码，我调用以下自定义函数：

```
private String getContactID (String number) 
{
    String contactID = "";
    ContentResolver context = getContentResolver();

    /// number is the phone number
    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,Uri.encode(number));

    String[] mPhoneNumberProjection = { PhoneLookup._ID };

    Cursor cur = context.query(lookupUri,mPhoneNumberProjection, null, null, null);
    try 
    {
       if (cur.moveToFirst()) 
       {
          contactID = cur.getString(0);
          return contactID;
       }
    } 
    finally 
    {
        if (cur != null)
            cur.close();
    }
    return contactID;
} 
```

因此，我有一个带有联系人 ID 和通话时间戳的通话记录，并使用 Set 我得到了唯一的......上面的代码工作正常，但性能如果很差！我在新的 Google Nexus 4 中尝试过，大约需要 1600 毫秒！我不想考虑旧的智能手机...

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:46:39.650

使用后台线程**延迟加载**ListView 中的信息。

最初只获取大约 10 个结果并将它们显示在列表中。这应该很快发生。之后，在后台线程中，继续获取信息，一次 10 个，然后继续将它们添加到您的列表中。

# vb.net - 动态获取控件（按钮）的名称

> ID：15266954
> 
> 赞同：4
> 
> 时间：2013-03-07T09:05:21.840
> 
> 标签：vb.net, winforms, controls

我有10个按钮，`button01`即`button02`...... `button10`我想要的是如何操作它。

```
For x=1 to 10
  button(x).text = "blah" 'from database...or something
next 
```

我需要这样做，因为我有 10 个或更多按钮，并且我想通过初始化来操作它。这样我就不会一一手动进行。我不知道该怎么做。我还是 .NET 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T09:17:56.583

您不需要以这种容易出错的方式执行此操作，只是为了节省一些代码行。但如果你真的想要......

您可以使用`Panel`对相关控件进行逻辑分组的容器控件或其他容器控件。然后使用`MyPanel.Controls.OfType(Of Button)()`过滤并找到那里的所有按钮。

```
For Each btn As Button In MyPanel.Controls.OfType(Of Button)()
    btn.Text = "blah" 'from database...or something
Next 
```

另一种方法是将它们全部放在一个数组或其他集合类型中，例如`List(Of Button)`first 然后循环它们：

```
Dim myButtons = {button1, button2, button3, button4, button5, button6}
For Each btn In myButtons
    btn.Text = "blah" 'from database...or something
Next 
```

最后，您可以使用它[`ControlCollection.Find`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find.aspx)来查找具有给定字符串名称的控件：

```
For i As Int32 = 1 To 10
    Dim btns = Me.Controls.Find("button" & i, True)
    If btns.Length > 0 Then
        btns(0).Text = "blah" 'from database...or something
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:19:50.173

您必须遍历这些按钮的父容器。

假设您将这些控件放在一个名为 的面板`PnlTest`中，那么您必须这样做：

```
For Each xControls As Control In PnlTest.Controls

    If TypeOf xControls Is Button Then
        xControls.Text = "blah" 'from database...or something
    End If

Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:40:24.657

简单地：

```
For i As Integer = 1 To 10
    Me.Controls("button" & i.ToString("00")).Text = "blah"
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T09:15:21.497

您可以尝试使用WebControl中的[FindControl方法：](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)

```
For x=1 to 10
    FindControl("button" & if(x < 10, "0" & x, x) = "blah" 'from database...or something
next 
```

**编辑：**我主要使用 C#，而不是 VB，所以它可能需要一些改动。但是，我相信这种方法是一样的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-11-04T01:35:48.213

zeroyevi cubosoft.cl -- DevExpress -- la clave esta (bar.button.item) en Me.RibbonControl.Items("NAME_BUTTON" ).Enabled = True or false

```
Private Sub GetSearchPerfilModulosBotones(ByVal _id_perfil As String)

    Dim dt As New DataTable
    Dim _act_btns As Boolean

    Dim _name_btns As String
    Dim _name_module As String = Me.Name.ToString()
    Try

        Dim _ControlDatosSistema As New ControlDatosSistema()
        With _ControlDatosSistema
            dt = .GetSearchPerfilModulosBotones(_id_perfil, _name_module )'SQL QUERY

          If (dt.Rows.Count >= 1) Then
                For Each row As DataRow In dt.Rows

                    _act_btns = row("ACT_BTNS") 'BOTONES PERFIL True or False
                    _name_btns = row("NAME_BTNS").ToString()'NOMBRE BOTONES TABLA
                    Me.RibbonControl.Items(_name_btns ).Enabled = _act_btns 
                Next
            End If

        End With
        _ControlDatosSistema = Nothing
        dt.Dispose()

    Catch ex As Exception

    End Try
End Sub 
```

# sql-server - 架构更改以集成 Facebook 和 Google 登录

> ID：15266955
> 
> 赞同：0
> 
> 时间：2013-03-07T09:05:23.050
> 
> 标签：sql-server, database-design

我有一个`Users`表来存储用户详细信息和密码，并且应用程序的身份验证可以很好地处理这个问题。

但是我们想在我们的系统中集成`Facebook`和`Google`登录，所以请告知相关的架构修改。

```
创建表 dbo.Users(
    UserId int IDENTITY(1, 1) 主键，
    UserTypeId int, -- Admin = 1, End User = 2。（我们为此有一个主表，但为简单起见，此处省略）
    用户名 nvarchar(16) 非空唯一，
    用户密码 nvarchar(16),
    名字 nvarchar(64),
    姓氏 nvarchar(64),
    DateOfBirth 日期，
    性别字符（1），
    电话号码 nvarchar(16),
    电子邮件 nvarchar(128) 唯一，
    IsActive 位，
    UpdateTime datetime 默认 CURRENT_TIMESTAMP )

```

**这就是我的想法：**
1）一旦用户从 Facebook 或 Google 进行身份验证，那么应用程序将拥有声明（emailId）
2）应用程序应验证用户表中的 emailId 存在，如果存在，它将允许登录。

Q1> 那么这是否需要对用户表中的现有行进行任何更新？
Q2> 如果用户记录不存在（基于 emailId 声明记录），那么我认为我们应该在 users 表中添加新记录？
Q3> 如果添加：用户名和密码值是什么？
Q4> 用户（添加的记录）可以在没有Facebook登录的情况下进行正常登录吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:15:06.247

为了接受 OpenID 登录，您必须接受并存储用户的 OpenID-URL。该 URL 可以像电子邮件地址一样识别用户。

Q1：取决于：如果您希望同一用户同时允许 OpenID 登录和正常登录，则必须在表中添加另一列。如果您不允许混合登录，您可以使用您的`Email`列来存储 OpenID URL。

Q2：是的，如果您看到一个新的 OpenID-URL，请像处理未知电子邮件地址一样处理它

Q3：您必须要求用户选择一个用户名——我假设您对当前用户也这样做。如果您想允许同一用户同时登录，则必须要求用户设置密码 - 否则他们只能通过其 OpenID 提供商登录。

Q4：仅当您确实要求提供用户名和密码时（请参阅 Q3）

请注意，允许同一用户通过 OpenID 登录并使用传统的用户名/密码会带来潜在的安全问题：用户可能不会明白您是在要求他们*设置*密码并输入他们的 Facebook（或 Google）密码。或者他们可能只是不在乎并在任何地方使用相同的密码。如果他们这样做并且您的数据库没有正确加密密码，您的数据库将存储 Facebook 名称*和*未加密的密码......即使只有 10% 的人在您的网站上使用相同的密码 - 想象一下他们可以用它做什么。

# c# - 将控件绑定到对象集合

> ID：15266965
> 
> 赞同：0
> 
> 时间：2013-03-07T09:06:01.213
> 
> 标签：c#, collections, binding

我需要数据绑定方面的帮助。想象一下这种情况。我有两个类，一个名为 Isotope，另一个名为 Photon。同位素类包含 BindingList 光子。我还有一个静态类 StaticVariables，我在其中放置了 BindingList 同位素。现在，我想制作一个表格，让我可以浏览同位素列表。我创建了一个组合框 CBIsotopes，绑定到 StaticVariables.Isotopes：

```
 CBIsotope.DataSource = StaticVariables.Isotopes;
 CBIsotope.ValueMember = "IsotopeName";
 CBIsotope.DisplayMember = "IsotopeName"; 
```

到目前为止，一切正常。现在我想创建一个 datagridview DGVPhotons，它将显示所选同位素的所有光子。我的第一个直觉是沿着这条路做点什么

```
DGVPhotons.DataSource = StaticVariables.ListOfIsotopes.Photons 
```

这当然行不通。我尝试的另一件事是使用 ComboBox 的 SelectedItem 属性：

(1)

```
DGVPhotons.DataSource = (CBIsotope.SelectedItem as Isotope).Photons; 
```

这行得通，但不如我想的那么好。如果我在加载时执行此操作，则不会发生任何事情，因为 ComboBox 是空的。如果我在 ComboBox 中实际选择了一个项目时这样做，那么它可以工作，但是当我更改 ComboBox 中的选择时，DataGridView 保持不变。解决方案是将第 (1) 行放在 ComboBox 的 SelectedIndexChanged 中，但这对我来说似乎是一种蛮力方法，我觉得我的方法从根本上是错误的......有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:12:19.100

好的，这里的关键是使用`DataBind`解决方案。更改`source`元素后，不要忘记使用`DataBind`方法，以便绑定新数据。

而且，在`PageLoad`事件中，不要忘记使用`IsPostBack`符号，以便仅在第一次处理请求时才初始化页面。

# c# - 在另一个线程中运行进度条

> ID：15266967
> 
> 赞同：1
> 
> 时间：2013-03-07T09:06:19.637
> 
> 标签：c#

我试图在单击按钮时显示进度条，并在工作完成时将其隐藏。但是当我在按钮事件处理程序中显示进度条时，它不起作用，只有在工作完成后才会显示。

这是我的代码：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    this.Dispatcher.BeginInvoke((Action)(() =>
        {
            loadingprgoress.Visibility = Visibility.Visible;
        }));

    int usresult, psresult;

    con.Open();

    SqlDataReader data = null;
    String myQueryEdit1 = @"SELECT Username, Password FROM [dbo].[Table]";
    com.CommandText = myQueryEdit1;
    com.Connection = con;
    data = com.ExecuteReader();
    Random rnd = new Random();
    int newrnd = rnd.Next(1, 100);

    if (data.Read())
    {

        string userhash = GenerateHashWithSalt(data["Username"].ToString(), newrnd.ToString());
        string passhash = GenerateHashWithSalt(data["Password"].ToString(), newrnd.ToString());
        string userhash1 = GenerateHashWithSalt("admin", newrnd.ToString());
        string passhash1 = GenerateHashWithSalt(pasbox.Password, newrnd.ToString());

        usresult = userhash.CompareTo(userhash1);
        psresult = passhash.ToString().CompareTo(passhash1);
        if (usresult == 0 && psresult == 0)
        {
            con.Close();
            dental_main_Window neww = new dental_main_Window();
            neww.Show();
            Close();
        }
        else
        {
            con.Close();
            pasbox.Password = "";
        }

        Thread.Sleep(3000);

        this.Dispatcher.BeginInvoke((Action)(() =>
           {
               loadingprgoress.Visibility = Visibility.Hidden;
           }));
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:15:37.737

发生这种情况是因为您的 UI 线程正在完成所有工作（访问数据库），并且在完成之前，它无法处理更多消息（例如显示进度条）。

您需要做相反的事情，在没有 BeginInvoke 的 UI 线程中显示进度条，并在另一个线程中进行数据库访问。当您其他线程完成时，您需要在 UI 线程上执行 BeginInvoke 以隐藏进度条。

这是另一个重要的注意事项：this.Dispatcher.BeginInvoke 不会产生线程。它将命令“推送”到 UI 线程的队列，因为所有 UI 操作都必须从 UI 线程执行。

这是你要做的：

私人无效Button_Click_1（对象发送者，RoutedEventArgs e）

1.  显示进度条
2.  使用任务启动您的后台进程
3.  将延续任务添加到您的第一个任务，以将消息发送到流程已完成的 UI
4.  在延续任务中使用 this.Dispatcher.BeginInvoke 以便 UI 人员发生在 UI 线程上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:11:48.563

WPF 中的 UI 需要在 UI 线程上执行。你认识到这一点，因为我可以看到你`Dispatcher.BeginInvoke`用来与你的进度窗口进行交互。

不过，您的问题是您也在 UI 线程上执行长时间运行的任务。当你这样做时，你不会给进度窗口一个操作的机会。该线程被长时间运行的任务消耗，因此无法为 UI 提供服务。

解决方案是远离 UI 线程执行长时间运行的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:31:56.980

看看后台工作人员（[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)）

它允许您在单独的专用线程上运行操作。在后台计算期间，您可以引发**ProgressChanged**事件以通知 UI 并相应地更新 ProgressBar：

```
private BackgroundWorker _worker;

public Form1(string[] args)
{
    InitializeComponent();

    _worker = new BackgroundWorker();
    _worker.WorkerReportsProgress = true;

    _worker.RunWorkerCompleted += worker_WorkCompleted;
    _worker.DoWork += worker_DoWork;
    _worker.ProgressChanged += worker_ProgressChanged;

}

private void worker_DoWork(object sender, DoWorkEventArgs e)
{
    DoStuff();
}
private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
}
private void worker_WorkCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    _running = false;
    UpdateUi();
}

private bool DoStuff()
{
        //...
        _worker.ReportProgress(20);
        //...
        _worker.ReportProgress(20);

        return true;

}

private void btnUpdate_Click(object sender, EventArgs e)
{
    _worker.RunWorkerAsync();
} 
```

# javascript - 使用 jsonp 来自 Jquery 的 REST WCF url 中的 javascript 错误

> ID：15266975
> 
> 赞同：2
> 
> 时间：2013-03-07T09:06:43.447
> 
> 标签：javascript, jquery, .net, rest

当我尝试从 jsonp 执行 REST WCF 服务时出现 javascript 错误。

网页错误详情

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.2) 
```

时间戳：2013 年 3 月 7 日星期四 09:00:24 UTC

```
Message: Expected ';'
Line: 1
Char: 22
Code: 0
URI: https://google.com/ISCSOrderList/OrderListService.svc/RestService/GetOrderList?request=B36733DC-6DB5-4FB6-9A63-B25CE858CA28;FR;2010-06-27;2010-10-05&callback=jsonp1362646767878&_=1362646774807 
```

我正在使用以下代码：

```
<script type="text/javascript">
     function GetRestData() {
         debugger;
            var Guid = $('#txtUserGuid').val();
            var CountryCode = $('#txtCountryCode').val();
            var FromDate = $('#txtFromDate').val();
            var ToDate = $('#txtToDate').val();
            //jQuery.support.cors = true;

            $.ajax({
                url: "https://google.com/ISCSOrderList/OrderListService.svc/RestService/GetOrderList?request=B36733DC-6DB5-4FB6-9A63-B25CE858CA28;FR;2010-06-27;2010-10-05",
                dataType: "jsonp",
                type: "GET",                
                jsonpCallback: "MyCallback",
                success: function(data, textStatus, jqXHR) {
                alert(JSON.stringfy(data));
                },
                error: function(jqXHR, textStatus, errorThrown) {
                alert(JSON.stringfy(errorThrown));
                },
                complete: function(jqXHR, textStatus) {
                alert(JSON.stringfy(jqXHR));
                }
            });
        }
        function MyCallback(data) {
            alert(JSON.stringfy(data));
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:50:32.727

操作，

您遇到的问题可能与您的*实际*URL/资源中的错误有关。除非我们可以复制错误，否则我们无法帮助您解决它。为代码提供对 URL 的请求，503 不会让我们到达任何地方，而且会令人困惑。

您可以克隆您的私有资源并在敏感信息所在的位置插入虚拟数据吗？

或者，如果您查看您的资源，您可以复制并粘贴您找到的内容`Line: 1 Char: 22`吗？也许前后几行是安全的。

# c++ - 获取指向 IUpdate2 接口的指针

> ID：15266978
> 
> 赞同：1
> 
> 时间：2013-03-07T09:06:53.527
> 
> 标签：c++, com, window, windows-update

我有以下代码片段，

```
IUpdateSession *iUpdate;
IUpdateSearcher *updateSearcher;
ISearchResult* pISearchResults;
IUpdateCollection* pIUpdateCollection;
IStringCollection *pIStrCollCVEs;
IUpdate2 *pIUpdate;
long lUpdateCount; 
```

...

```
CoCreateInstance(
            CLSID_UpdateSession,
            NULL,
            CLSCTX_INPROC_SERVER,
            IID_IUpdateSession,
            (LPVOID*)&iUpdate
            );

iUpdate->CreateUpdateSearcher(&updateSearcher);

printf("\n Searching updates");

updateSearcher->Search(_bstr_t(_T("IsInstalled = 0")), &pISearchResults);
printf("\n Following updates found..\n");

pISearchResults->get_Updates(&pIUpdateCollection);
pIUpdateCollection->get_Count(&lUpdateCount);

LONG lCount;
BSTR buff;
while (0 != lUpdateCount)
{
    pIUpdateCollection->get_Item(lUpdateCount, &pIUpdate);

    pIUpdate->get_CveIDs(&pIStrCollCVEs);

    pIStrCollCVEs->get_Count(&lCount);

    pIUpdate->get_Title(&buff);
    printf("TITLE : %s \n", buff);
    while(0 != lCount)
    {
        pIStrCollCVEs ->get_Item(lCount, &buff);
        _bstr_t b(buff);

        printf("CVEID = %s \n", buff);

        lCount --;
    }

    printf("\n");
    lUpdateCount --;
}

::CoUninitialize();
getchar(); 
```

错误：错误 C2664：“IUpdateCollection::get_Item”：无法将参数 2 从“IUpdate2 * *”转换为“IUpdate * *”

@Line43

如何获取指向 IUpdate2 接口的指针，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:50:56.363

您`get_Item()`的集合成员需要一个`IUpdate`接口指针；不是`IUpdate2`接口指针。

注意：这段代码绝对**充满**了错误、不良做法和内存泄漏。在他们中间：

*   从不释放的接口指针
*   BSTR 永远不会被释放。
*   从未检查过的 HRESULT。
*   从零开始的集合中的索引无效

仅举几个。不管以下应该解决您的接口不匹配问题。这个动物园的其余部分我留给你：

```
while (0 != lUpdateCount)
{
    IUpdate* pIUpd = NULL;
    HRESULT hr = pIUpdateCollection->get_Item(lUpdateCount, &pIUpd);
    if (SUCCEEDED(hr) && pIUpd)
    {
        hr = pIUpd->QueryInterface(__uuidof(pIUpdate), (LPVOID*)&pIUpdate);
        pIUpd->Release();

        if (SUCCEEDED(hr) && pIUpdate != NULL)
        {
            pIUpdate->get_CveIDs(&pIStrCollCVEs);
            pIStrCollCVEs->get_Count(&lCount);

            pIUpdate->get_Title(&buff);
            printf("TITLE : %s \n", buff);
            while(0 != lCount)
            {
                pIStrCollCVEs ->get_Item(lCount, &buff);
                _bstr_t b(buff, false);
                printf("CVEID = %s \n", buff);
                lCount --;
            }
        }
    }

    printf("\n");
    lUpdateCount--;
} 
```

# c# - 插件 dll C# wpf 中的字符串的本地化

> ID：15266979
> 
> 赞同：2
> 
> 时间：2013-03-07T09:06:54.463
> 
> 标签：c#, wpf, localization, culture

我正在创建一个 wpf 应用程序，其中包含几个由我的主应用程序访问的自包含插件 dll。有没有办法提供本地化支持，使所有本地化字符串都来自 dll 内部？

示例：主应用根据场景使用预定义的接口访问Plugin1或Plugin2。Plugin1 和 Plugin2 根据情况执行完全不同的功能，并从插件 dll 中显示相应的字符串。（这些字符串必须本地化为当前文化）

注意：1.一旦设置，主应用程序不应有任何插件更改（显然）2.插件不应有外部资源

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:27:29.153

我可能遗漏了一些东西，所以请纠正我。

在我的商店中，我们只是在引用的 DLL 中包含资源文件。我们获取这些资源文件并将它们发送到翻译服务。我认为只要您将所有可本地化的字符串存储在资源文件中，而不是对它们进行硬编码，就本地化而言应该没问题。

然而，要考虑的另一件事是屏幕空间。某些字符集比其他字符集占用更多空间。当我们将美国英语翻译成中文时，这通常是我们的一个问题。

# sql-server - 一次读取与结果集中每条记录相关的多条记录

> ID：15266980
> 
> 赞同：0
> 
> 时间：2013-03-07T09:06:55.393
> 
> 标签：sql-server, union, sap-ase, sql-cte

我有 3 张桌子：

*   **`Message`**具有`MsgID`, `MsgText`,`MsgDate`列的**表。**`MsgId`是PK。
*   **`MessageSender`**表有`MsgId`, `SenderId`, `SenderName`. `MsgId`是FK。
*   **`MessageTo`**表有`MsgId`, `ToId`, `ToName`. `MsgId`是FK。

每条消息都会有**一个 Sender**。但它可以有**很多 Recipients**。即对于表中的每条记录，`Message`表中将有一条记录，并且`MessageSender`表中将**有多条记录**`MessageTo`。

**我想*在一个查询中或一次***获取所有消息的所有详细信息。例如，对于特定消息，谁是发件人，谁都是收件人。

我怎样才能做到这一点？

我正在使用 MSSQL Server 2005 和 Sybase 15。

注意：我在这里只给出了表格的相关细节。而且我无法更改表模式，因为它已经在生产中存在了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:45:54.430

```
select distinct M.MsgID, M.MsgText, MS.SenderID, MS.SenderName, 
MT.ToName, MT.ToId 
from Message M, MessageSender MS, MessageTo MT
where M.MessageID = MS.MessageID and 
M.MessageID = MT.MessageID 
and MsgDate like '%20130307%' -- To get the messages sent on 07-Mar-2013 
```

# javascript - 在sencha touch 2中滚动面板时的文本字段焦点问题

> ID：15266981
> 
> 赞同：3
> 
> 时间：2013-03-07T09:06:56.367
> 
> 标签：javascript, ios6, sencha-touch-2, cordova

我正在开发一个科尔多瓦 iOS 应用程序（iPad）。我有一个表单面板，里面有一些煎茶字段。在我将焦点放在任何字段上后，如下所示 ![编辑测试字段](../Images/20687f4df190a5aec740db5ab924d02b.png)

并滚动封闭面板，焦点光标不会滚动，它只停留在那里，如下所示。

![光标问题](../Images/7f36384cc0deb80801537233e9bdbf7c.png)

我该如何解决这个问题。

并且在 ios6 中发生了另外一项观察，但在 ios5 中没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:43:38.240

解决了问题，在编辑（onFocus）任何字段时，我正在禁用面板的滚动条。

```
myPanel.getScrollable().getScroller().setDisabled(true); 
```

onBlur 启用滚动条的任何字段。

```
myPanel.getScrollable().getScroller().setDisabled(false); 
```

这不会解决问题，但解决了目的。

# java - 使用 Android 设备读取 Wi-Fi 标签

> ID：15266985
> 
> 赞同：0
> 
> 时间：2013-03-07T09:07:06.197
> 
> 标签：java, android

如果 aeroscout Wi-Fi 标签配置为信标模式，它将发送信标。我需要知道我们是否可以通过在 Android 手机上使用与 Wi-Fi 接入点的 RSSI 值相同的 Wi-Fi API 从这些信标中获取 RSSI 值。我有三星 SII 手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:10:47.153

根据 API 文档，ScanResult（由 WifiManager 触发）包含“检测到的信号电平，单位为 dBm”。另请参阅[http://developer.android.com/reference/android/net/wifi/ScanResult.html](http://developer.android.com/reference/android/net/wifi/ScanResult.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:13:26.720

这是代码

```
 WifiManager mWifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
            WifiInfo wifiInfo = mWifiManager.getConnectionInfo();
    if (mWifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLED) {
     mWifiManager.getConnectionInfo().getRssi()
     mWifiManager.getConnectionInfo().getSsid()
    } 
```

# jquery - jQuery toggleClass - 回到正常课堂？

> ID：15266999
> 
> 赞同：0
> 
> 时间：2013-03-07T09:07:41.983
> 
> 标签：jquery, css, show-hide, toggleclass

因此，当按下 div 时，我必须`toggleClass`更改某些 div 的类（它会更改背景）。当按下另一个 div 时，我需要将 bg 恢复正常，然后关闭`".subtitle"`，并切换您按下的新 div。

现在，关闭和打开功能工作正常，但背景没有改变。

标准类是`.title`，我也有一个`.title.close`只包含其他背景的。

我可以在这里得到一些帮助吗？

```
CSS: 
.title: contains the normal bg
.title.open: contains the "open" bg
.title.close: contains the bg of title(the normal bg)

jQuery
$(document).ready(function()
{
    $(".title").click(function()
    {
        var $element = $(this);

        //What I've tried
        $('open').toggleClass('');
        $('.subtitle').hide(500);

//This is changing the bg, and show the ".subtitle" you've pressed
        $element.toggleClass('open');
        $element.children('.subtitle').toggle(500);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:09:27.967

当您不想切换，但特别想添加或删除一个类而不考虑当前状态时，您可以使用`.addClass()`甚至`.removeClass()`清除所有类。一些例子：

```
// remove the "open" class from a particular element
$element.removeClass("open");

// remove the "open" class from all elements that have it
$(".open").removeClass("open"); 
```