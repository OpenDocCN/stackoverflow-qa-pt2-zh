# StackOverflow 问答 15774000-15774999

# google-maps - 如何在 GWT 中为 GoogleMap Api3 设置适当的缩放级别

> ID：15774001
> 
> 赞同：0
> 
> 时间：2013-04-02T20:45:53.400
> 
> 标签：google-maps, gwt, google-maps-api-3, zooming

我正在使用 GWT2.5 和 GoogleMap Api3。

我有 2 个场景： 1\. 我有地图的中心纬度，上面有几个标记。2\. 任何县和很少的标记。

因此，应适当缩放地图以适合标记。

有没有办法自动检测缩放级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:38:45.280

谷歌地图没有“ `fitAllMarkers`”功能/方法，但您应该能够简单地使用该`fitBounds`方法合理地实现这一点。

我还**没有**测试过以下代码，但是这样的东西应该可以工作：

```
// A list of all your markers.
List<Marker> markers;

// Get the current bounds of your map.
LatLngBounds latLngBounds = googleMap.getBounds();

for(Marker marker : markers) {
  // Extend the bounds of your map to fit the position (LatLng) of each marker.
  latLngBounds.extend(marker.getPosition()); 
}

// This may not be needed - test it.
// Tell the map to zoom to fit the bounds that you defined for your markers.
googleMap.fitBounds(latLngBounds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:02:28.437

以下是一些使用 GWT maps v3 api 的示例。我想我在这些例子中涵盖了你所有的问题。

[https://github.com/branflake2267/GWT-Maps-V3-Api/tree/master/gwt-maps-showcase/src/main/java/com/google/gwt/maps/testing/client/maps](https://github.com/branflake2267/GWT-Maps-V3-Api/tree/master/gwt-maps-showcase/src/main/java/com/google/gwt/maps/testing/client/maps) - 示例地图

[https://github.com/branflake2267/GWT-Maps-V3-Api](https://github.com/branflake2267/GWT-Maps-V3-Api) - api 主页

# ios - 更改 iOS 窗口的根视图控制器

> ID：15774003
> 
> 赞同：68
> 
> 时间：2013-04-02T20:46:03.197
> 
> 标签：ios, rootviewcontroller

iOS Window 的根视图控制器通常在开始时初始化一次为标签栏控制器或导航控制器吗？可以在应用程序中多次更改根视图控制器吗？

我有一个场景，顶视图根据用户操作而有所不同。我正在考虑拥有一个导航控制器，其顶部视图控制器具有启动画面的图像，并根据需要推送/弹出视图控制器。或者，我可以不断更改窗口的顶视图控制器。哪个会是更好的方法？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-10-16T11:19:58.013

iOS 8.0，Xcode 6.0.1，启用 ARC

你的大部分问题都得到了回答。但是，我可以解决一个我最近不得不自己处理的问题。

**可以在应用程序中多次更改根视图控制器吗？**

答案是**肯定**的。我最近必须这样做才能在作为应用程序一部分的初始 UIView 之后重置我的 UIView 层次结构。不再需要启动。换句话说，您可以在应用程序之后的任何时间从任何其他 UIViewController 重置您的“rootViewController”。“didFinishLoadingWithOptions”。

**去做这个...**

1）声明对您的应用程序的引用。委托（名为“测试”的应用程序）.​​..

```
TestAppDelegate *testAppDelegate = (TestAppDelegate *)[UIApplication sharedApplication].delegate; 
```

2) 选择一个 UIViewController 你希望你的“rootViewController”；从情节提要或以编程方式定义...

```
UIStoryboard *mainStoryBoard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];

NewRootViewController *newRootViewController = [mainStoryBoard instantiateViewControllerWithIdentifier:@"NewRootViewController"]; 
```

```
UIViewController *newRootViewController = [[UIViewController alloc] init];
newRootViewController.view = [[UIView alloc] initWithFrame:CGRectMake(0, 50, 320, 430)];
newRootViewController.view.backgroundColor = [UIColor whiteColor]; 
```

3）把它们放在一起......

```
 testAppDelegate.window.rootViewController = newRootViewController;
[testAppDelegate.window makeKeyAndVisible]; 
```

4）你甚至可以加入动画......

```
testAppDelegate.window.rootViewController = newRootViewController;
    [testAppDelegate.window makeKeyAndVisible];

newRootViewController.view.alpha = 0.0;

    [UIView animateWithDuration:2.0 animations:^{

        newRootViewController.view.alpha = 1.0;

    }]; 
```

希望这对某人有帮助！干杯。

> 窗口的根视图控制器。
> 
> 根视图控制器提供窗口的内容视图。将视图控制器分配给此属性（以编程方式或使用 Interface Builder）将视图控制器的视图安装为窗口的内容视图。如果窗口具有现有的视图层次结构，则在安装新视图之前删除旧视图。此属性的默认值为 nil。

*2015 年 9 月 2 日更新

正如下面的评论所指出的，当新的视图控制器出现时，您必须处理旧视图控制器的移除。你可以选择有一个过渡视图控制器来处理这个问题。以下是有关如何实现此功能的一些提示：

```
[UIView transitionWithView:self.containerView
                  duration:0.50
                   options:options
                animations:^{

                    //Transition of the two views
                    [self.viewController.view removeFromSuperview];
                    [self.containerView addSubview:aViewController.view];

                }
                completion:^(BOOL finished){

                    //At completion set the new view controller.
                    self.viewController = aViewController;

                }]; 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-04-02T21:10:08.667

更常见的是使用“呈现的视图控制器”（`presentViewController:animated:completion:`）。您可以拥有任意数量的这些，有效地出现在（并且基本上替换）根视图控制器的前面。如果您不想要，则不必有任何动画，或者可以有。您可以关闭呈现的视图控制器以返回原始根视图控制器，但您不必这样做；如果您愿意，呈现的视图控制器可以永远存在。

这是我书中关于呈现视图控制器的部分：

[http://www.aeth.com/iOSBook/ch19.html#_presented_view_controller](http://www.apeth.com/iOSBook/ch19.html#_presented_view_controller)

在这张图中（来自该章前面的部分），呈现的视图控制器已经完全接管了应用程序界面；根视图控制器及其子视图不再在界面中。根视图控制器仍然存在，但这是轻量级的，无关紧要。

![在此处输入图像描述](https://i.stack.imgur.com/jD7rQ.png)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-01-08T14:37:36.960

从对 serge-k 的回答的评论中，我构建了一个有效的解决方案，当在旧的 rootViewController 上存在一个模态视图控制器时，它可以解决奇怪的行为：

```
extension UIView {
    func snapshot() -> UIImage {
        UIGraphicsBeginImageContextWithOptions(bounds.size, false, UIScreen.mainScreen().scale)
        drawViewHierarchyInRect(bounds, afterScreenUpdates: true)
        let result = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return result
    }
}

extension UIWindow {
    func replaceRootViewControllerWith(_ replacementController: UIViewController, animated: Bool, completion: (() -> Void)?) {
        let snapshotImageView = UIImageView(image: self.snapshot())
        self.addSubview(snapshotImageView)

        let dismissCompletion = { () -> Void in // dismiss all modal view controllers
            self.rootViewController = replacementController
            self.bringSubview(toFront: snapshotImageView)
            if animated {
                UIView.animate(withDuration: 0.4, animations: { () -> Void in
                    snapshotImageView.alpha = 0
                }, completion: { (success) -> Void in
                    snapshotImageView.removeFromSuperview()
                    completion?()
                })
            }
            else {
                snapshotImageView.removeFromSuperview()
                completion?()
            }
        }
        if self.rootViewController!.presentedViewController != nil {
            self.rootViewController!.dismiss(animated: false, completion: dismissCompletion)
        }
        else {
            dismissCompletion()
        }
    }
} 
```

要替换 rootViewController 只需使用：

```
let newRootViewController = self.storyboard!.instantiateViewControllerWithIdentifier("BlackViewController")
UIApplication.sharedApplication().keyWindow!.replaceRootViewControllerWith(newRootViewController, animated: true, completion: nil) 
```

希望这会有所帮助:) 在 iOS 8.4 上测试；还测试了导航控制器支持（应该也支持标签栏控制器等，但我没有测试它）

**解释**

如果有一个模态视图控制器出现在旧 rootViewController 上，则替换 rootViewController，但旧视图仍然挂在新 rootViewController 的视图下方（例如可以在水平翻转或交叉溶解过渡动画期间看到）和旧视图控制器层次结构保持分配状态（如果多次发生替换，可能会导致严重的内存问题）。

因此唯一的解决方案是关闭所有模态视图控制器，然后替换 rootViewController。屏幕快照在关闭和更换期间放置在窗口上方，以隐藏丑陋的闪烁过程。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-02T21:03:45.690

您可以在整个应用程序生命周期中更改窗口的 rootViewController。

```
UIViewController *viewController = [UIViewController alloc] init];
[self.window setRootViewController:viewController]; 
```

当您更改 rootViewController 时，您可能仍希望将 UIImageView 添加为窗口上的子视图以充当启动图像。我希望这是有道理的，像这样：

```
- (void) addSplash {
    CGRect rect = [UIScreen mainScreen].bounds;
    UIImageView *splashImage = [[UIImageView alloc] initWithFrame:rect];
    splashImage.image = [UIImage imageNamed:@"splash.png"];
    [self.window addSubview:splashImage];
}

- (void) removeSplash {
    for (UIView *view in self.window.subviews) {
      if ([view isKindOfClass:[UIImageView class]]) {
        [view removeFromSuperview];
      }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-07T04:21:57.407

对于iOS8，我们还需要将下面两个参数设置为YES。

```
providesPresentationContextTransitionStyle
definesPresentationContext 
```

这是我在 iOS 6 及更高版本的导航控制器下呈现透明模型视图控制器的代码。

```
ViewController *vcObj = [[ViewController alloc] initWithNibName:NSStringFromClass([ViewController class]) bundle:nil];
UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:vcObj];

if ([[UIDevice currentDevice].systemVersion floatValue] >= 8.0) {

    navCon.providesPresentationContextTransitionStyle = YES;
    navCon.definesPresentationContext = YES;
    navCon.modalPresentationStyle = UIModalPresentationOverCurrentContext;

    [self presentViewController:navCon animated:NO completion:nil];
}
else {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [self presentViewController:navCon animated:NO completion:^{
        [navCon dismissViewControllerAnimated:NO completion:^{
            appDelegate.window.rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext;
            [self presentViewController:navCon animated:NO completion:nil];
            appDelegate.window.rootViewController.modalPresentationStyle = UIModalPresentationFullScreen;

        }];
    }];
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-18T05:35:17.173

对于尝试更改**iOS 13 及更高版本**的根视图控制器的人，您需要使用`SceneDelegate`的`window`属性更改根视图控制器。

```
class SceneDelegate: UIResponder, UIWindowSceneDelegate {

  var window: UIWindow?
  static let shared = SceneDelegate()

  func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {

    guard let _ = (scene as? UIWindowScene) else { return }

    //other stuff
  }
} 
```

创建了一个实用程序类，它具有更改根视图控制器的方法。

```
class AppUtilities {

  class func changeRootVC( _ vc: UIViewController) {

    SceneDelegate.shared.window?.rootViewController = vc
    SceneDelegate.shared.window?.makeKeyAndVisible()
  }
} 
```

您可以通过以下方式更改根视图控制器。

```
//Here I'm setting HomeVC as root view controller

if let homeVC = UIStoryboard(name: "Main", bundle: nil)?.instantiateViewController(identifier: "HomeVC") as? HomeVC {

    let rootVC = UINavigationController(rootViewController: homeVC)
    AppUtilities.changeRootVC(rootVC)

  }
} 
```

# ember.js - 夹具适配器过滤

> ID：15774006
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:12.637
> 
> 标签：ember.js, ember-data

我目前正在编写一个依赖于夹具数据的应用程序（将遵循 REST API），我遇到了一些问题或误解。

我展示了许多不同类别的产品，我的索引路线例如应该只展示包含特殊标志的产品。

```
TM.IndexRoute = Ember.Route.extend({
model: function() {
    return TM.Product.all().toArray().filter(function(item){
                        return item.get('featured') === 1;
                    });
}}); 
```

我的问题：第一次加载索引路由后，模型为空。切换到不同的路由并返回到索引路由会按预期加载数据。我对其他过滤也有同样的问题，不知道为什么会这样。它总是在没有过滤器的情况下立即工作 - 所以我的绑定必须是正确的。

我正在使用最新版本的 ember (1.0.0-rc2) 和 ember-data (rev 12)。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:13:56.387

我想我发现了我的问题。.find() 方法不会同步返回完整对象，它们会异步填充，即使使用夹具适配器也是如此 - 毕竟这是有道理的。

我想正确的解决方案是返回 TM.Product.find({featured: 1}) 作为我的模型 - 这不是在夹具适配器中实现的。ember-data 的 Rev. 11 没有给我警告，但 rev 12 幸运的是。

最后，我对夹具适配器同步返回结果的 .find() 错误期望导致了我的问题。

# mysql - 使用 SQL 查询检测 db 列中的行之间的“步长变化”？

> ID：15774007
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:18.473
> 
> 标签：mysql, sql

我在 MySQL 表中有一个列，其行值之间的间隔几乎相等（类型是日期时间）。在某些时候，这个间隔变得小得多，并且一直很小，直到表格结束。我需要获取与间隔中突然跳跃相对应的单元格的值。

当然我可以下载整个东西，扫描值并检测步进变化，但是这个应用程序是基于网络的，我想避免不必要的负载。我可以通过纯粹的 MySQL 方法检测到突然发生步进变化的值吗？

例子：

```
# step is 1 month for some rows...
1960.01.01 00:00:00
1960.02.01 00:00:00
1960.03.01 00:00:00 <- at this point, step changes to just 1 hour
1960.03.01 01:00:00 
1960.03.01 02:00:00
1960.03.01 03:00:00 
```

我需要一个返回值“1960.03.01 00:00:00”的查询，即步进突然改变的点。

提前致谢， 阿斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:04:49.880

您可以尝试以下方法：

```
select *
from (select t.*,
             (select MIN(t.dt) from t t2 where t2.dt > t.dt
             ) as nexttime,
             (select MAX(t.dt) from t t2 where t2.dt < t.dt
             ) as prevtime
      from t
     ) t
where to_seconds(t.dt) - to_seconds(t.prevtime) <> to_seconds(t.nexttime) - to_seconds(t.dt) 
```

子查询使用相关子查询计算 ( ) 之前的最大时间和 ( `prevtime`) 之后的第一次时间`nexttime`。然后它检查前一次和下一次之间每一行的时间差。当差异（以秒为单位）不同时，选择该行。

如果您在列上有索引`datetime`，它应该表现良好。

# asp.net-web-api - 微风改变 ComplexType 类的顺序

> ID：15774009
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:28.277
> 
> 标签：asp.net-web-api, breeze

我正在尝试加载从 ComplexType 属性 (p1) (嵌套 ComplexType) 调用的“ComplexType”属性 (p2)。获取元数据后，我看到这两个类都被识别为复杂类型，但在微风.debug

```
toArray(schema.complexType) 
```

它首先看到 p1（外部复杂类型），所以当它尝试解析它的一个属性类型时，它是一个 complexType，p2。它正在阅读

```
var type = typeMap[qualTypeName]; 
```

并且由于“typeMap”没有p2并且“okNotFound”是假的，所以它会抛出一个错误

```
Uncaught Error: Unable to locate an 'Type' by the name: Address:#Domain 
```

有人遇到过同样的问题吗？我错过了一些非常明显的东西吗？有没有一种方法可以告诉 MVC4 Web API 中的 EFContextProvider 在创建元数据时在 p2 之前渲染 p1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:07:47.530

**编辑**：这是一个错误，自 v 1.3.2 起已修复。

* * *

这可能是一个错误。我们尚未对嵌套复杂类型进行广泛测试。我会在今天或明天尝试确认。

# google-maps - GoogleMaps addListener 仅适用于最后一个标记

> ID：15774011
> 
> 赞同：1
> 
> 时间：2013-04-02T20:46:42.957
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有下面显示的代码，它在 GoogleMap 上显示 3 个标记，位置数据位于 JSON 对象中。

标记显示正确，但侦听器 (addListener) 仅在最后一个标记上工作，而不是在前 2 个标记上工作。我的代码有什么问题？

我看了很多例子，就是看不出来。：（ 谢谢你的帮助！

```
 (function() {
window.onload = function() {

// Creating a map
var options = {  
  zoom: 3,  
  center: new google.maps.LatLng(37.09, -95.71),       
  mapTypeId: google.maps.MapTypeId.ROADMAP  
};  
var map = new google.maps.Map(document.getElementById('map'), options);  

// Creating a JSON object with weather data
var weatherData = {'weather': [
  {
    'lat': 40.756054,
    'lng': -73.986951 
  },
  {
    'lat': 47.620973, 
    'lng': -122.347276 
  },
  {
    'lat': 37.775206,
    'lng': -122.419209 
  }
]};

var infoWindow = new google.maps.InfoWindow({
  content: 'Hello world'
}); 

// Looping through the weather array in weatherData
for (var i = 0; i < weatherData.weather.length; i++) {

    // creating a variable that will hold the current weather object
    var weather = weatherData.weather[i];

    // Creating marker
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(weather.lat, weather.lng), 
        map: map
    });  

    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.open(map, marker);
    }); 

}

  }
 })(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T21:45:56.700

简短的回答是您需要移动创建标记并将事件侦听器添加到其自己的函数中的代码。然后在循环中，为每个标记调用该函数：

```
(function() {
    window.onload = function() {

        // Creating a map
        var options = {
            zoom: 3,
            center: new google.maps.LatLng( 37.09, -95.71 ),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map( document.getElementById('map'), options );

        // Creating an object with weather data
        var weatherData = {
            weather: [
                { lat: 40.756054, lng: -73.986951 },
                { lat: 47.620973, lng: -122.347276 },
                { lat: 37.775206, lng: -122.419209 }
            ]
        };

        var infoWindow = new google.maps.InfoWindow({
            content: 'Hello world'
        });

        // Looping through the weather array in weatherData
        for( var i = 0;  i < weatherData.weather.length;  i++ ) {
            addWeatherMarker( weatherData.weather[i] );
        }

        function addWeatherMarker( weather ) {
            // Creating marker
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng( weather.lat, weather.lng ),
                map: map
            });

            google.maps.event.addListener( marker, 'click', function() {
                infoWindow.open( map, marker );
            });
        }
    }
})(); 
```

原始代码不起作用的原因是`marker`在循环和事件监听器中使用了变量。但是代码中只有一个`marker`变量，在循环开始时设置。因此，当点击处理程序被触发时 - 在所有其他代码已经完成运行很久之后 - 该`marker`变量具有您在循环中最后一次设置它的值。

早期标记的事件侦听器不会以某种方式获得自己的变量副本-整个程序中`marker`只有一个变量。`marker`

将代码移动到函数中可以解决此问题。现在，每次调用函数时，都会*为*每次调用创建一个新`marker`变量（以及一个新`weather`变量）。因此，函数内部的事件侦听器可以将`marker`变量用于函数的特定调用。

有关更多信息，请阅读[JavaScript 闭包](https://www.google.com/search?q=javascript+closure)。

# javascript - 导航栏下方的搜索文本框

> ID：15774012
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:44.143
> 
> 标签：javascript, jquery, html, css, datatables

我正在使用 jquery 数据表...我想将数据表的搜索文本框移动到页面中心和导航栏下方....问题是搜索文本框带有数据表插件所以不要不知道如何移动它......在下面提供我的代码......

[http://jsfiddle.net/bz2C4/](http://jsfiddle.net/bz2C4/)

```
<div class="dataTables_filter" id="vendortable_filter" style="margin-left: 80%;"><label>Search: <input type="text" aria-controls="vendortable"></label></div>

<script type="text/javascript" >
$(document).ready(function() {
    $('#inventoryTable').dataTable( {
        "bFilter": true,
        "bLengthChange": false,
        //"bJQueryUI": true,
        "bSort": false,
        "iDisplayLength": 20,
        "sPaginationType": "full_numbers"
    } );
    $('.dataTables_length').remove();
    $('.dataTables_info').remove();
    $('.dataTables_filter').css("float", "right");
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:20:59.763

您可以使用 jquery 移动它，但不是建议的方法，但如果您无法更改源代码是唯一的方法。看看这样的东西

```
$(function() {
  var search = $('.dataTables_filter').detach();
  $('.page-title').before(search);
  var left = ($('.page-title').width() / 2) - (search.width() / 2);
  search.css('margin-left',left+'px');
  search.css('float',''); 
```

});

看看在这里工作[jsfiddle](http://jsfiddle.net/bz2C4/10/)

# java - 用 JAVA 更快地编写 SQL 数据库

> ID：15774014
> 
> 赞同：-3
> 
> 时间：2013-04-02T20:46:45.953
> 
> 标签：java, sql, performance

我可以更快地写入sql数据库吗？我想用更少的时间获得 TestLetturaScritturaDatabase.sqlite。阅读不是问题，但写作对我来说不是很好。我的软件每秒多次写入小部分；是否不可能减少这些部分的数量并增加每个部分的记录数量。

```
package sql;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class TestLetturaScritturaDatabase {

    public static void main(String[] args) throws ClassNotFoundException,
            SQLException {
        double tempoPRINCIPALE = System.nanoTime();
        double tempo = System.nanoTime();
        int i;
        int j;
        int k;
        int CAMPI = 100;
        int RECORD = 100000;
        Double[][] MATRICE = new Double[RECORD][CAMPI];
        for (j = 0; j < RECORD; j++) {
            for (k = 0; k < CAMPI; k++) {
                MATRICE[j][k] = (double) (j - k);
            }
        }
        Class.forName("org.sqlite.JDBC").getInterfaces();
        String nome = "jdbc:sqlite:TestLetturaScritturaDatabase.sqlite";
        Connection conn = DriverManager.getConnection(nome);
        Statement stat = conn.createStatement();
        stat.executeUpdate("DROP TABLE IF EXISTS matrice");
        String TABELLA = "CREATE TABLE matrice (id INTEGER PRIMARY KEY AUTOINCREMENT";
        for (i = 0; i < CAMPI; i++) {
            TABELLA = TABELLA + ", '" + i + "' REAL";
        }
        TABELLA = TABELLA + ")";
        String Inserisci = "INSERT INTO matrice ('";
        stat.executeUpdate(TABELLA);
        for (j = 0; j < RECORD; j++) {
            for (k = 0; k < CAMPI; k++) {
                if (k < CAMPI - 1) {
                    Inserisci = Inserisci + k + "', '";
                } else {
                    Inserisci = Inserisci + k + "') VALUES ('";
                }
            }
            for (k = 0; k < CAMPI; k++) {
                if (k < CAMPI - 1) {
                    Inserisci = Inserisci + MATRICE[j][k] + "', '";
                } else {
                    Inserisci = Inserisci + MATRICE[j][k] + "')";
                }
            }
            stat.executeUpdate(Inserisci);
            Inserisci = "INSERT INTO matrice ('";
        }
        System.out.println("Database creato con successo!\n");
        ResultSet rs = stat.executeQuery("SELECT * FROM matrice");
        System.out.println("Contenuto matrice:\n");
        while (rs.next()) {
            for (k = 1; k <= CAMPI + 1; k++) {
                if (k <= CAMPI) {
                    System.out.print(rs.getString(k) + " ");
                } else {
                    System.out.println(rs.getString(k));
                }
            }
        }
        conn.close();
        stat.close();
        rs.close();
    }
} 
```

**有错误的新代码：**

```
public static void main(String[] args) throws ClassNotFoundException,
            SQLException {
        Class.forName("org.sqlite.JDBC").getInterfaces();
        Connection conn = DriverManager
                .getConnection("jdbc:sqlite:test.sqlite");
        conn.setAutoCommit(false);
        Statement stat = conn.createStatement();
        stat.executeUpdate("DROP TABLE IF EXISTS people");
        stat.addBatch("CREATE TABLE people (id INTEGER PRIMARY KEY AUTOINCREMENT, nome TEXT NOT NULL, occupation, vote NULL)");
        stat.addBatch("INSERT INTO people (nome, occupation) VALUES ('Peruzzo','Unable')");
        stat.addBatch("INSERT INTO people (nome, occupation) VALUES ('Piyush','Clever')");
        stat.addBatch("INSERT INTO people (nome, occupation,vote) VALUES ('Stackoverflow', 'Professionals','10')");
        stat.addBatch("UPDATE people SET nome = 'Mario Peruzzo' WHERE nome = 'Peruzzo';");
        stat.executeBatch();
        ResultSet rs = stat.executeQuery("SELECT * FROM people");
        while (rs.next()) {
            System.out.println("Nome: " + rs.getString("nome"));
            System.out.println("Lavoro: " + rs.getString("occupation"));
            System.out.println("Voto: " + (rs.getDouble("vote") * 2));
        }
        conn.close();
        stat.close();
        rs.close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:49:24.110

您可以与[Sun 文档](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/spec2/jdbc2.1.frame6.html)中列出的`Batch Updates`组合使用。在使用批量更新之前关闭`PreparedStatements``Auto Commit``conn.setAutoCommit(false)`

# workflow - Liferay 如何比较网页内容的 2 个版本（例如突出差异）

> ID：15774015
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:46.120
> 
> 标签：workflow, compare, liferay, webcontent

我正在使用 Liferay 6.1.1 和 tomcat 7。我正在寻找一种方法来比较 Web 内容的 2 个版本。假设用户编辑 Web 内容并将其提交以供发布。内容审阅者在批准（或拒绝）新提交的内容之前可能想知道究竟发生了什么变化。有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:19:54.843

JournalArticleLocalServiceUtil 是您的朋友。您可以从这样的文章中获取内容：

```
final JournalArticleDisplay articleDisplay = JournalContentUtil.getDisplay(groupId,     
                                                  article.getArticleId(),
                                                  article.getTemplateId(), 
                                                  languageKey, 
                                                  themeDisplay);

String content = articleDisplay.getContent(); 
```

您必须从 ThemeDisplay 获取其他参数。

祝你好运

# r - 2因子直方图分析

> ID：15774017
> 
> 赞同：8
> 
> 时间：2013-04-02T20:46:48.890
> 
> 标签：r, ggplot2

我已经寻找这个问题的答案很长时间了，但我一直无法找到答案。

这是问题所在：我有一个包含以下变量的[数据框](https://cidra.sharefile.com/d/s79d13298a4c43398)：流速 1 (CH_SONAR)、流速 2 (CH_SONAR_2T)、密度 (CH_DENSITY) 以及两种流速之间的百分比差异 (per_diff)。我为流速 1 创建了一个 5 级因子，为密度创建了另一个 5 级因子。

```
f.factor <- cut(p.pipeline$CH_SONAR_2T, 5, labels = c('Very Low','Low', 'Medium', 'High', 'Very High'))

d.factor <- cut(p.pipeline$CH_DENSITY, 5, labels = c('Water', 'Very Sparce', 'Sparce', 'Dense', 'Very Dense')) 
```

我已经使用每个因子作为填充变量使用 ggplot2 绘制了两者：

```
qplot(per_diff, data = p.pipeline, geom = "histogram", binwidth = 1, xlim = c(-5, 15), fill = f.factor)

qplot(per_diff, data = p.pipeline, geom = "histogram", binwidth = 1, xlim = c(-5, 15), fill = d.factor) 
```

现在我想用 ggplot 创建一个直方图，让我看到流速和密度之间的关系（水和非常低、非常稀疏和低、稀疏和低等所有 25 种可能的组合）。我已经尝试创建新因素，将 d.factor 和 f.factor 绑定到数据框，将这两个因素绑定在一起等，但没有结果，你们知道如何解决这个问题吗？

我试过包括我制作的直方图，但我认为我没有足够的声誉来做这件事。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T20:55:37.817

您可以使用`fill=interaction(f.factor, d.factor)`. 未出现在图例中的组合（例如“Low.Very Sparce”）表示不存在属于这两个类别的观测值。

![在此处输入图像描述](https://i.stack.imgur.com/JrmKk.jpg)

如果您希望相邻级别的颜色更加突出，您可以做的一件事是使用 生成颜色`rainbow`，然后将其他颜色与轮盘上相反的颜色交换。

```
col <- rainbow(length(levels(interaction(f.factor, d.factor))), v=.75, s=.5)
col.index <- ifelse(seq(col) %% 2, 
                    seq(col), 
                    (seq(ceiling(length(col)/2), length.out=length(col)) %% length(col)) + 1)
mixed <- col[col.index]
qplot(per_diff, data = p.pipeline, 
      geom = "histogram", binwidth = 1, xlim = c(-5, 15), 
      fill = interaction(f.factor, d.factor)) + scale_fill_manual(values=mixed) 
```

![在此处输入图像描述](https://i.stack.imgur.com/bBb0Q.jpg)

# javascript - 我从哪里开始调试 jQuery/Javascript 函数，它在我的服务器上调用 API

> ID：15774020
> 
> 赞同：0
> 
> 时间：2013-04-02T20:46:52.343
> 
> 标签：javascript, jquery, iis, asp.net-web-api

我从哪里开始调试 jQuery/Javascript 函数，它在我的服务器上调用 API，当它在本地运行良好时 - 但是当上传到服务器时，只返回 HTTP500 错误？

我试过 fiddler，但它在 JSON/XML 中什么也没显示——它唯一显示的是在 Auth 部分：

![提琴手图片](https://i.stack.imgur.com/AtCHp.png)

服务器事件日志在我尝试测试的时候没有显示任何内容。

Fiddler 响应是否表明有任何问题，或者任何人都可以建议我可能需要在事件查看器中打开什么来捕获这 500 个错误可能是什么？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:01:33.720

尝试添加一些围绕 javascript 调用并在回调函数中的 console.log() 消息。这样做会让您知道故障发生在哪里。调试 javascript 时，我通常坚持使用 Chrome 开发人员工具和 Firebug 中的网络选项卡。通过使用这些工具，您可以从 console.log() 消息中获得正确的输出。

具体来说，在您的 jquery 结果处理程序中，我将添加以下内容：

```
console.log(resultObject); 
```

这将输出整个对象树，以便您可以从 Firebug 或 Chrome 开发人员工具中深入了解内容......如果需要。

如果出于某种原因，您反对在代码中乱扔日志消息，那么请检查在您从服务器进行测试时调用是否实际发生。您应该通过在 Fiddler 或基于浏览器的工具中查看您的网络流量来了解 javascript 是否正在发送 HTTP 请求。如果请求没有发生，那么您的代码在调用之前就中断了，在您的情况下，这可能意味着环境差异。

是否正确引用和配置了所有内容？检查由于配置不当或错误引用而导致的空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:59:50.363

500 is a "server error", which basically means something (could be almost anything) broke at the server side.

I would recommend:

1.  Investigate your options for exception handling: [http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)
2.  Consider setting the `IncludeErrorDetailPolicy` to `Always`, though note that this is a setting that shouldn't be left in-use on a production environment - [Error messages returned from Web API method are omitted in non-dev environment](https://stackoverflow.com/questions/10246942/error-messages-returned-from-web-api-method-are-omitted-in-non-dev-environment/10436684#10436684)
3.  Examine server-side error logging. I'm a big fan of [ELMAH](https://code.google.com/p/elmah/). You'll need a little extra effort to get it working properly in Web API - [http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx](http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx)

# xcode - 不能让 UISlider 在左：-0 到 -50 和右：0 到 50 之间移动

> ID：15774022
> 
> 赞同：0
> 
> 时间：2013-04-02T20:47:02.257
> 
> 标签：xcode, scroll, uislider

我的滑块电流是 50。如果我向右滚动。我想得到 -0 到 - 50。如果向右滚动，我想得到 0 到 50。我不需要 1 到 100。

帮助。

```
- (IBAction)sliderValueChanged:(UISlider *)sender {

    if ([myLabel.text length] > 50){
      // Make - 0 to -50 
      myLabel.text =  [NSString stringWithFormat:@"%d", -(int)sender.value];
    }else  if ([myLabel.text length] < 50){   
      // Make 0 to 50
      myLabel.text =  [NSString stringWithFormat:@"%d", (int)sender.value];
    }else{
      myLabel.text =  [NSString stringWithFormat:@"%d", (int)sender.value];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:08:54.997

设置滑块最小值最大值：

```
 slider.maximumValue = 100;
        slider.minimumValue = 0;
        slider.value = 50; 
```

行动

```
- (void)sliderMoved:(id)sender  {
        //DLog(@"slider moved");
        UISlider*timeSlider = (UISlider*)sender;
        if (timeSlider.value < 0)   {
            timeSlider.value = -50;
        }
        else if (timeSlider.value < 30) {
            timeSlider.value = -30;
        }
        else if (timeSlider.value < 50) {
            timeSlider.value = 0;
        }
        else if (timeSlider.value < 80) {
            timeSlider.value = 30;
        }
        else if (timeSlider.value < 100)    {
            timeSlider.value = 50;
        }

        else    {
            timeSlider.value = 0;
        }
        _chosenDuration = timeSlider.value;
        [_timeLabel setText:[NSString stringWithFormat: NSLocalizedString(@"time%@", nil) , _chosenDuration]];
    } 
```

设置所有条件你想要什么......

# bash - cp：沉默“省略目录”警告

> ID：15774023
> 
> 赞同：11
> 
> 时间：2013-04-02T20:47:03.537
> 
> 标签：bash, cp

我`cp ./* "backup_$timestamp"`在 bash 脚本中使用该命令将目录中的所有文件备份到子目录中的备份文件夹中。这工作正常，但脚本不断输出警告消息：

```
cp: omitting directory `./backup_1364935268' 
```

我如何告诉 cp 闭嘴而不消除我可能想知道的任何其他警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-01T18:41:12.653

对我有用的解决方案如下：

```
find -maxdepth 1 -type f -exec cp {} backup_1364935268/ \; 
```

它从当前目录复制所有（包括以点开头的）文件，不接触目录，也不抱怨它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:51:26.177

可能您想`cp -r`在该脚本中使用。这将递归地复制源，包括目录。目录将被复制，消息将消失。

* * *

如果您不想复制目录，可以执行以下操作：

*   使用重定向标准错误到标准输出`2>&1`
*   管道输出到 grep -v

```
script 2>&1 | grep -v 'omitting directory' 
```

引用 grep 手册页：

> ```
>  -v, --invert-match 
> ```

```
 Invert the sense of matching, to select non-matching lines. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-07T14:49:37.377

复制目录时，请确保使用 -R

# cp -R source source_duplicate_copy_name

-R, -r, --recursive 递归复制目录

```
 --reflink[=WHEN]         control clone/CoW copies. See below
  --remove-destination     remove each existing destination file before
                             attempting to open it (contrast with --force)
  --sparse=WHEN            control creation of sparse files. See below
  --strip-trailing-slashes  remove any trailing slashes from each SOURCE 
```

# android - 日历实例提供程序源代码？

> ID：15774026
> 
> 赞同：2
> 
> 时间：2013-04-02T20:47:06.547
> 
> 标签：android, android-calendar

我正在查看 android 日历源代码，`Instances Content Provider`以了解它是如何工作和填充的。

原因是我试图在我的应用程序中复制它的工作原理，但我还没有找到它从源中填充的位置。

我知道 Instances 数据库不能被写入，但是自从它被填充后，它必须被写入某个地方。我只是想看看他们如何对这些值进行一些计算。

我唯一能找到的`Instances`就是[这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/provider/CalendarContract.java#CalendarContract.Instances) ，但这并没有告诉我我想知道什么，只是告诉我值背后的代码`query`而不是代码。`uri's`

有谁知道它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:57:04.157

处理以开头的 Content Provider URI 的代码`content://com.android.calendar/instances/*`位于[packages/providers/CalendarProvider/src/com/android/providers/calendar/CalendarProvider2.java](https://android.googlesource.com/platform/packages/providers/CalendarProvider/+/master/src/com/android/providers/calendar/CalendarProvider2.java)中。

从该文件中可以查找进一步的实现细节。例如，很多初始化代码，比如`CREATE TABLE`调用，都在同一个项目的[CalendarDatabaseHelper.java中。](https://android.googlesource.com/platform/packages/providers/CalendarProvider/+/master/src/com/android/providers/calendar/CalendarDatabaseHelper.java)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:44:41.143

***在CalendarInstancesHelper.java中的“*** ***updateInstancesLocked*** ”方法中填充了实例。另请检查同一文件中的“ ***performInstanceExpansion*** ”方法。

 **链接到[GrepCode中的上述方法](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.2.2_r1/com/android/providers/calendar/CalendarInstancesHelper.java#CalendarInstancesHelper.updateInstancesLocked%28android.content.ContentValues%2Clong%2Cboolean%2Candroid.database.sqlite.SQLiteDatabase%29)

我提供了以下方法的片段

```
 /**
 * Updates the instances table when an event is added or updated.
 * @param values The new values of the event.
 * @param rowId The database row id of the event.
 * @param newEvent true if the event is new.
 * @param db The database
 */
private void updateInstancesLocked(ContentValues values,
        long rowId,
        boolean newEvent,
        SQLiteDatabase db) {

    // If there are no expanded Instances, then return.
    MetaData.Fields fields = mMetaData.getFieldsLocked();
    if (fields.maxInstance == 0) {
        return;
    }

    Long dtstartMillis = values.getAsLong(Events.DTSTART);
    if (dtstartMillis == null) {
        if (newEvent) {
            // must be present for a new event.
            throw new RuntimeException("DTSTART missing.");
        }
        if (Log.isLoggable(TAG, Log.VERBOSE)) {
            Log.v(TAG, "Missing DTSTART.  No need to update instance.");
        }
        return;
    }

    Long lastDateMillis = values.getAsLong(Events.LAST_DATE);
    Long originalInstanceTime = values.getAsLong(Events.ORIGINAL_INSTANCE_TIME);

    if (!newEvent) {
        // Want to do this for regular event, recurrence, or exception.
        // For recurrence or exception, more deletion may happen below if we
        // do an instance expansion.  This deletion will suffice if the exception
        // is moved outside the window, for instance.
        db.delete("Instances", "event_id=?", new String[] {String.valueOf(rowId)});
    }

    String rrule = values.getAsString(Events.RRULE);
    String rdate = values.getAsString(Events.RDATE);
    String originalEvent = values.getAsString(Events.ORIGINAL_EVENT);
    if (isRecurrenceEvent(rrule, rdate, originalEvent))  {
        // The recurrence or exception needs to be (re-)expanded if:
        // a) Exception or recurrence that falls inside window
        boolean insideWindow = dtstartMillis <= fields.maxInstance &&
                (lastDateMillis == null || lastDateMillis >= fields.minInstance);
        // b) Exception that affects instance inside window
        // These conditions match the query in getEntries
        //  See getEntries comment for explanation of subtracting 1 week.
        boolean affectsWindow = originalInstanceTime != null &&
                originalInstanceTime <= fields.maxInstance &&
                originalInstanceTime >= fields.minInstance - MAX_ASSUMED_DURATION;
        if (insideWindow || affectsWindow) {
            updateRecurrenceInstancesLocked(values, rowId, db);
        }
        // TODO: an exception creation or update could be optimized by
        // updating just the affected instances, instead of regenerating
        // the recurrence.
        return;
    }

    Long dtendMillis = values.getAsLong(Events.DTEND);
    if (dtendMillis == null) {
        dtendMillis = dtstartMillis;
    }

    // if the event is in the expanded range, insert
    // into the instances table.
    // TODO: deal with durations.  currently, durations are only used in
    // recurrences.

    if (dtstartMillis <= fields.maxInstance && dtendMillis >= fields.minInstance) {
        ContentValues instanceValues = new ContentValues();
        instanceValues.put(Instances.EVENT_ID, rowId);
        instanceValues.put(Instances.BEGIN, dtstartMillis);
        instanceValues.put(Instances.END, dtendMillis);

        boolean allDay = false;
        Integer allDayInteger = values.getAsInteger(Events.ALL_DAY);
        if (allDayInteger != null) {
            allDay = allDayInteger != 0;
        }

        // Update the timezone-dependent fields.
        Time local = new Time();
        if (allDay) {
            local.timezone = Time.TIMEZONE_UTC;
        } else {
            local.timezone = fields.timezone;
        }

        computeTimezoneDependentFields(dtstartMillis, dtendMillis, local, instanceValues);
        mDbHelper.instancesInsert(instanceValues);
    }
} 
```

希望这可以帮助！！！

让我知道你是否期待不同的东西**

# dart - Dart - 一个 dart 项目如何在不使用 pub 的情况下从另一个 dart 项目导入代码？

> ID：15774030
> 
> 赞同：12
> 
> 时间：2013-04-02T20:47:19.467
> 
> 标签：dart, dart-webui, dart-pub

假设我有两个飞镖项目

项目 A 包含使用 Web 组件创建一堆 UI 小部件的代码（类似于[https://github.com/kevmoo/widget.dart](https://github.com/kevmoo/widget.dart)）

项目 B 包含我的前端代码，这些代码将重用我在项目 A 中创建的 UI 小部件。

如果我不想将我的项目 A 发布到 pub，是否可以将项目 B 链接到项目 A 而无需手动将文件从项目 A 复制到 B？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T20:57:08.040

查看`pub`文档中的此部分：路径依赖项：

[http://pub.dartlang.org/doc/dependencies.html#path-packages](http://pub.dartlang.org/doc/dependencies.html#path-packages)

假设`project_a`有一个名为的库文件`myprojecta.dart`

```
dependencies:
  project_a:
    path: /Users/me/project_a   <-- root of project a 
```

在您的代码中，您将`project_a`使用

```
import 'package:project_a/myprojecta.dart' 
```

注意 - 如果您不想将项目发布到 pub，您始终可以将`git`其用作依赖项而不是`path`依赖项 - 这使您团队中的其他人可以使用您的项目，而无需依赖*您的*文件系统布局。

# javascript - 从 javascript 对象中过滤结果

> ID：15774031
> 
> 赞同：0
> 
> 时间：2013-04-02T20:47:20.967
> 
> 标签：javascript, jquery

我确定在 javascript 或 jquery 中内置了某种过滤器功能，但我似乎无法弄清楚如何使用 jquery 来做到这一点`filter()`

有没有办法从具有特定值的 javascript 对象中过滤所有元素并返回该对象？

我追求的功能是这样的，虽然不是很长，但我只是想知道是否有更简单的东西。

谢谢！

```
(function(){
  var obj = {
    a: true,
    b: true,
    c: false,
    d: true,
    e: true

  },
  f = [],
  true_obj = {};

  for (var i in obj){
    if (obj[i] === true){
      f.push(i);
    }
  }
  for (var c = 0; c < f.length; c++){
    true_obj[c] = f[c];
  }
  console.log(true_obj);

}()); 
```

[JSBIN](http://jsbin.com/alijek/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:56:32.947

使用 jQuery 的内置`map`方法怎么样？[http://api.jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/)

```
(function(){
  var obj = {
    a: true,
    b: true,
    c: false,
    d: true,
    e: true
  },
  f,
  true_obj = {};

  f = $.map(obj, function (val, key) {
      return (val === true) ? key : null;
  });
  for (var c = 0; c < f.length; c++){
    true_obj[c] = f[c];
  }
  console.log(true_obj);
}()); 
```

[http://jsfiddle.net/gVZVL/](http://jsfiddle.net/gVZVL/)

如果值不是/ ，则回调中评估的值`map`将添加到结果数组中。`null``undefined`

此外，如果您希望将`f`数组复制到`true_obj`，只需使用`slice`（而不是`for`循环）- [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
true_obj = f.slice(0); 
```

[http://jsfiddle.net/gVZVL/1/](http://jsfiddle.net/gVZVL/1/)

**更新：**

如果您只是想过滤 中的项目`Object`，请尝试以下操作：

```
for (var key in obj) {
    if (obj[key] !== true) {
        delete obj[key];
    }
} 
```

如果您尝试复制它（也保留原件`Object`），您可以使用：

```
var final_obj = {};
for (var key in obj) {
    if (obj[key] === true) {
        final_obj[key] = obj[key];
    }
} 
```

在其中任何一个中，如果您从以下内容开始：

```
var obj = {
    a: true,
    b: true,
    c: false,
    d: true,
    e: true
}; 
```

你最终会得到

```
{
    a: true,
    b: true,
    d: true,
    e: true
} 
```

（覆盖或复制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:05:25.650

```
function filterObject(object, predicate) {
  var result = {};
  for(var prop in object) {
    if(predicate(object[prop])) {
      result[prop] = object[prop];
    }
  }
  return result;
}
(function(){
  var obj = {
    a: true,
    b: true,
    c: false,
    d: true,
    e: true

  };
  var true_obj = filterObject(obj, function(item) {
    return item === true;
  });
  console.log(true_obj);

}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:06:23.940

最好避免扩展原型。我的解决方案是这样的：

我为 obj 对象创建了一个过滤器方法，它使用[HasOwnProperty()](https://developer.mozilla.org/pt-PT/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)来检查属性是直接指向对象还是来自原型链。

```
(function(){
      var obj = {
        a: true,
        b: true,
        c: false,
        d: true,
        e: true
      },
     true_obj = {};

     obj.filter = function (value) {
        var result = [];

        for (var key in this) {
           if (this.hasOwnProperty(key)) {
             if (this[key] === value){
               result.push(key);  
              }
           }
        }

        return result;
     };

    var f = obj.filter(true);

    for (var c = 0; c < f.length; c++){
      true_obj[c] = f[c];
    }
    console.log(true_obj);

}()); 
```

这是一个[JSBIN](http://jsbin.com/alijek/2/edit)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T20:53:41.573

您可以简单地在 JavaScript 中扩展对象的原型`Object`以包含这样的函数。

我不确定`filter`你想要什么样的功能，但这里有一个例子：

```
Object.prototype.filter = function(val){
    for (var e in this) {
        if (this[e] === val) delete this[e];
    }
}

// Object.defineProperty(Object.prototype, "filter", { value:Object.prototype.filter, enumerable:false }); // this line will make the new method not enumerable, see discussion with Ian

// Example:
var obj = {a:"1", b:"2", c:"1"};
obj.filter("1");
alert(obj.a); // undefined 
```

# c++ - int* 品脱是什么意思？品脱 = (int*) 数据；意思是？

> ID：15774033
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:47:39.603
> 
> 标签：c++, pointers

我正在阅读指针如何[在这里](http://www.cplusplus.com/doc/tutorial/pointers/)工作，因为我试图理解 qsort()。但是指南给出了这个代码：

```
// increaser
#include <iostream>
using namespace std;

void increase (void* data, int psize)
{
  if ( psize == sizeof(char) )
  { char* pchar; pchar=(char*)data; ++(*pchar); }
  else if (psize == sizeof(int) )
  { int* pint; pint=(int*)data; ++(*pint); }
}

int main ()
{
  char a = 'x';
  int b = 1602;
  increase (&a,sizeof(a));
  increase (&b,sizeof(b));
  cout << a << ", " << b << endl;
  return 0;
} 
```

没有解释什么线

```
pint=(int*)data; 
```

和

```
pchar=(char*)data; 
```

方法。我理解其余的意思，但对我来说 (char*)data 可能意味着什么很有意义。它指向char的值吗？但是，如果 char 是变量类型，那怎么可能呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T20:51:15.657

这条线`pint = (int*)data`正在做两件事

1.  这`(int*)data`是从`void*`到的转换`int*`
2.  是`pint = ...`赋值给`pint`

最终，这个函数试图做的是将所指向的值增加`data`一个值。虽然它有点缺陷，因为a）签名接受任何指针类型，但实现只适用于一组固定的类型，b）它错误地将大小与类型相关联。

鉴于这是 C++，更好的编写方法是使用模板。它接受所有支持的输入类型`++`。

```
template <class T>
void increase(T* pValue) {
  ++(*pValue);
} 
```

理想情况下，尽管您只使用参考

```
template <class T>
void increase(T& value) {
  ++value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:50:51.757

```
(int*)data; 
```

和

```
(char*)data; 
```

是从一种指针类型到另一种类型的转换，在这种情况下是从`void*` to`int*`和`char*`. 然后将结果分配给`pint`和`pchar`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:52:08.223

数据作为 void* 传递

(int*)data 将其转换为 int*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T20:50:49.610

```
pint=(int*)data; 
```

和

```
pchar=(char*)data; 
```

将这些变量转换为指针，就像您将 aa`double`转换为 an一样`int`，反之亦然。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T20:55:50.667

`pchar`是指向 a 的指针`char`- 这就是声明

```
char* pchar; 
```

方法。因此，分配后

```
pchar=(char*)data; 
```

指针指向`pchar`- 所指向的块的开始，`data`当你偏移`pchar`一个数字（比如 5 - `*(pchar+5)`）时，它将指向一个内存位置，该位置距离 所指向的位置“五个字符” `data`。由于 a`char`是一个字节长，这意味着您将位置增加 5。由于`pint`已被声明为`int* pint`，相同的构造`*(pint+5)`将指向一个`5*sizeof(int)`远离的位置......所以`+5`根据指针的声明方式，这意味着不同的事情！

换句话说 - 声明告诉编译器如何处理指针指向的对象，以及当您偏移指针时要做什么（递增、递减等）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T21:00:52.130

指针不可变。它不具有常规价值。它所做的只是通过保存地址来记住内存中的某个位置。

在内存中的任何地方都可以启动任何类型的任何变量。通过将指针转换为其他类型，而不是为它创建的类型（`(char*)`例如），您可以让程序知道，他应该使用内存中的那个位置，就好像它是给定类型的变量一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T21:10:51.403

指针指向内存中的一个位置（在 32 位系统中，所有指针的宽度为 32 位，而 64 位系统为 64 位）。当您编写时，`void* pointer`您是在告诉编译器内存中的数据没有类型，因此编译器采用默认宽度来读取内容（例如 8 位）。请记住，指针本身始终是 32/64 位的，但它指向的数据不同。

例如，当您说 char* 指针时，它知道数据是一个字符，并为它读取 2 个字节（32 位）。int* 等也是一样。或者对于 long* 指针，它读取 4 个字节。

当你写`pchar = (char*)data`你告诉CPU（实际上是MMU）存储在pchar地址的数据是一个字符，因此当我说读它时，为我读2字节。当您说（短*）时，您是在告诉 MMU 为该指针读取 1 个字节。

如果您使用 void*，系统将使用它的默认大小，我认为是 1 字节。

# iphone - 有没有办法为 iOS 应用禁用 Game Center？

> ID：15774036
> 
> 赞同：4
> 
> 时间：2013-04-02T20:48:07.900
> 
> 标签：iphone, ios, game-center

假设您有一个应用程序在某个时候启用了 Game Center。有没有办法告诉 Apple 该应用程序不再使用 Game Center 以便它不会出现在 Game Center 排行榜等中？该应用程序尚未使用 Game Center SDK，因此它不共享任何内容。iTunes connect 或 Provisioning Portal 上似乎没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:10:12.713

一旦您的应用程序获得批准，您必须单击每个版本，并且在版本详细信息中，EULA 上方和屏幕截图下方是用于启用/禁用该版本的 Game Center 的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:52:20.190

[http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html)

查看此页面的底部：

> 分发游戏中心应用程序
> 
> 您可以在将应用程序提交到 App Store 时为 Game Center 启用应用程序版本。此时，您可以选择要使用该版本的应用程序提交的排行榜和成就。此外，您可以选择您希望应用程序兼容的应用程序和版本。
> 
> 如果您使用多人兼容功能，您还需要在“版本详情”页面选择与您的该版本应用兼容的应用。
> 
> 为 Game Center 启用应用程序版本 使用您的 Apple ID 用户名和密码登录 iTunes Connect。
> 
> 单击管理您的应用程序。
> 
> 单击您要管理的应用程序。
> 
> 在版本部分中，单击要编辑的版本旁边的查看详细信息。
> 
> 在游戏中心部分，单击禁用。
> 
> 如果您有要与此版本的应用程序一起提交的排行榜，请单击排行榜部分中的编辑。
> 
> 单击排行榜部分中的编辑。
> 
> 选择您要提交的排行榜。
> 
> 单击保存。如果您有要使用此版本的应用程序提交的成就，请单击“成就”部分中的“编辑”。
> 
> 单击成就部分中的编辑。选择您要提交的成就。单击保存。如果您有应用程序要添加到多人游戏兼容性列表或想要更改版本，请单击多人游戏兼容性部分中的编辑。
> 
> 按照“更改设置的多人游戏兼容性设置”中所述的相同步骤进行操作。</p>
> 
> 单击准备上传二进制文件。
> 
> 如果您的应用程序的某个版本之前获得批准，则您不能再为您的应用程序的所有版本禁用 Game Center。相反，您必须单独更改每个版本的应用程序的 Game Center 属性。如果您为 Game Center 禁用某个版本的应用，它可能会更改“多人游戏兼容性测试”中所述的多人游戏兼容性设置。</p>
> 
> 为 Game Center 禁用应用程序版本 转到要编辑的应用程序版本的详细信息页面。
> 
> 在游戏中心部分中，单击启用。
> 
> 有时，您可能需要提交未启用组和多人游戏兼容性的应用版本（也许您需要修复错误但尚未准备好发布组和多人游戏兼容性版本）。为此，您需要从组中删除该应用程序并取消选择该应用程序的版本或您从多人游戏兼容性设置中添加的任何其他应用程序。有关如何从组中删除应用程序的信息，请参阅“创建和编辑组”，有关如何更改多人游戏兼容性设置的信息，请参阅“多人游戏兼容性测试”。

# java - Memcached 未返回存储的字节数组

> ID：15774037
> 
> 赞同：4
> 
> 时间：2013-04-02T20:48:09.823
> 
> 标签：java, memcached, spymemcached, amazon-elasticache

Amazon Elasticache 用作 Memcached 来存储 Inputstream（转换为字节数组），就像这样

```
private static final int MEMCACHED_TIME_TO_LIVE = 15 * 60;
InputStream stream = item.openStream();

byte[] byteArray = IOUtils.toByteArray(stream);

MemcachedClient memcachedClient = new MemcachedClient(new InetSocketAddress(AMAZON_ELASTICACHE_CLUSTER_ENDPOINT,AMAZON_ELASTICACHE_CLUSTER_PORT));
String key = name;

Future<Boolean> result = memcachedClient.set(key, MEMCACHED_TIME_TO_LIVE,byteArray);

memcachedClient.shutdown(); 
```

存储的 byteArray 是这样读取的

```
MemcachedClient memcachedClient = new MemcachedClient(new InetSocketAddress(AMAZON_ELASTICACHE_CLUSTER_ENDPOINT,
                    AMAZON_ELASTICACHE_CLUSTER_PORT));

String key = name;
byte[] byteArray = (byte[]) memcachedClient.get(key);
memcachedClient.shutdown(); 
```

返回的字节数组始终为“null”，除非应用程序第一次启动。

**我的问题**

1.  为什么 Memcached 除了第一次返回空字节数组？
2.  如何检查字节数组是否成功写入 Memcached？

# asp.net - facebook等流行网站使用的Ajax技术

> ID：15774038
> 
> 赞同：2
> 
> 时间：2013-04-02T20:48:13.607
> 
> 标签：asp.net, ajax, asp.net-mvc-4, web

我对使用 facebook 使用的类似 ajax 技术很感兴趣。例如，在您的主页上，当您单击侧面的组时，它会加载主要部分中的内容，但不必重新渲染顶部破折号或侧面组件。我已经弄乱了部分视图并根据请求加载它们，但它仍然不一样，因为它看起来不像一个“动作”，因此它不会更改 url，并且后退按钮只会让你从以前的行动，不从局部来看。

我想知道是否有人可以向我指出有关 ASP.NET MVC 4 的这种技术的教程或参考资料。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:35:54.230

要构建一个类似于 facebook 的 Web UI，你需要一个强大的 JavaScript 客户端 GUI 库，像 MVC3/4 ASP.NET 这样的服务器端技术在这里不会有帮助。

在此处查看 sencha extjs 库：[http ://www.sencha.com/products/extjs/examples/](http://www.sencha.com/products/extjs/examples/)

有关最流行的 JS GUI 库的概述，请查看：http: [//javascriptlibraries.com/](http://javascriptlibraries.com/)

# mysql - 在 mysql 中创建主机表以供用户使用 phpmyadmin 访问

> ID：15774039
> 
> 赞同：4
> 
> 时间：2013-04-02T20:48:13.480
> 
> 标签：mysql, phpmyadmin

我正在尝试在 phpMyAdmin 中创建一个主机表以供用户访问，虽然下面有此选项，但我找不到此表来添加主机，也找不到任何创建主机的说明。

我错过了什么吗？

字段：使用主机表 说明：当使用主机表时，该字段被忽略，而使用主机表中存储的值。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-18T19:15:03.207

### 从 MySQL 5.6.7 开始，主机表不再包含在 MySQL 的安装中。

*   [https://dev.mysql.com/doc/refman/5.6/en/grant-tables.html](https://dev.mysql.com/doc/refman/5.6/en/grant-tables.html)

过去，您可以使用主机表（位于`mysql`. `host`）为特定数据库定义允许的主机。它的工作原理是这样的：

1.  用户会尝试做某事（比如说 INSERT）。
2.  服务器将在`mysql`. `user`表以查看用户是否具有全局 INSERT 权限。
3.  如果用户没有全局 INSERT 权限，则服务器将在`mysql`. `db`表以查看用户是否具有 DB 特定权限。
4.  如果用户具有 DB 特定权限并且`mysql`. `db`. `Host`字段为空，服务器将在`mysql`. 与 .字段`host`匹配的任何主机的表。. 场地。`Db``mysql``db``Db`
5.  假设它找到匹配项，它将允许 INSERT。

### 如果您想为给定用户拥有多个主机，请阅读以下内容：

*   [http://dev.mysql.com/doc/refman/5.6/en/account-names.html](http://dev.mysql.com/doc/refman/5.6/en/account-names.html)

### 由于 MySQL 用户名实际上是 'name'@'host' 你总是可以添加多个具有相同名称但不同主机的用户并赋予他们相同的权限。

# 为什么 phpmyadmin 还包含这个功能？

我只能假设它是用于遗留支持。

# opencv - 使用openCV分别跟踪点

> ID：15774043
> 
> 赞同：0
> 
> 时间：2013-04-02T20:48:29.200
> 
> 标签：opencv, video, tracking

我正在尝试跟踪视频中的 3 个点……我有 X 射线图像的视频……这 3 个点在帧上移动。

我试图让用户在第一帧中选择 3 个点......我想分别跟踪每个点......这 3 个点不会作为一个对象一起移动......每个点都有不同的移动。

我的问题是，如何让用户在第一帧中选择这 3 个点，然后跟踪它们（我想要每帧中每个点的坐标）...

我需要建议方法来执行此操作....我有显示要跟踪的点的图像...但我不知道如何上传

提前致谢

# c - C typedef 中令人困惑的语法

> ID：15774045
> 
> 赞同：1
> 
> 时间：2013-04-02T20:48:32.130
> 
> 标签：c, typedef, c-preprocessor

希望有人能帮我破译这个 C 片段：

```
typedef int (DEFCALL *getFieldVal)(int key, int fieldSelect, char *name) 
```

DEFCALL 在代码的前面定义，但仅作为

```
#define DEFCALL 
```

所以，我认为`DEFCALL`只是一个空白，我正在有效地查看

```
typedef int (*getFieldVal)(int key, int fieldSelect, char *name) 
```

它将 getFieldVal 定义为一个指向函数的指针，该函数接受 args int、int 和 char*，并返回一个整数。但`DEFCALL`我想知道。想确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:57:19.970

宏为向函数类型添加调用约定留出了空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:57:30.223

`typedef`正在定义函数指针类型。这`DEFCALL`是一个预处理器宏，可以定义为指定函数使用的任何平台特定的调用约定信息。在这种情况下，它被定义为什么都没有导致编译器生成默认调用约定，通常是`cdecl`.

# c - 在纯c中的字符串（char *）中查找int

> ID：15774046
> 
> 赞同：2
> 
> 时间：2013-04-02T20:48:33.730
> 
> 标签：c, string, parsing, char, int

有一个带有一行文本的字符串。比方说：

```
char * line = "Foo|bar|Baz|23|25|27"; 
```

我必须找到数字。

我在想这样的事情：

1.  如果给定的 char 是一个数字，让我们把它放到一个临时的 char 数组中。（缓冲）
2.  如果下一个字符不是数字，让我们将缓冲区设为一个新的 int。

问题是......我如何在这样的字符串中找到数字？
（我对 C99/gcc 不太熟悉。）

使用的编译器：gcc 4.3（环境是Debian Linux *stable*。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:56:22.523

我将采用以下方法：

*   考虑到'|' 作为分隔符，对文本行进行标记，即将行拆分为多个字段。
*   对于每个令牌：
    *   如果令牌是数字：
        *   将令牌转换为数字

一些可能有用的库函数是`strtok`, `isdigit`, `atoi`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:44:08.720

[此答案](https://stackoverflow.com/a/15774209/1025391)中建议的方法的一种可能实现基于[sscanf](http://linux.die.net/man/3/sscanf)。

```
#include <stdio.h>
#include <string.h>

void find_integers(const char* p) {
    size_t s = strlen(p)+1;
    char buf[s];
    const char * p_end = p+s;
    int n;
    /* tokenize string */
    for (; p < p_end && sscanf(p, "%[^|]%n", &buf, &n); p += (n+1))
    {
        int x;
        /* try to parse an integer */
        if (sscanf(buf, "%d", &x)) {
            printf("got int :) %d\n", x);
        }
        else {
            printf("got str :( %s\n", buf);
        }
    }
}

int main() {
    const char *  line = "Foo|bar|Baz|23|25|27";
    find_integers(line);
} 
```

输出：

```
$ gcc test.c && ./a.out 
got str :( Foo
got str :( bar
got str :( Baz
got int :) 23
got int :) 25
got int :) 27 
```

# javascript - 当我使用 alert() 时，它在控制台中返回未定义，为什么会这样？

> ID：15774051
> 
> 赞同：1
> 
> 时间：2013-04-02T20:49:02.810
> 
> 标签：javascript

我的问题是为什么我在使用 alert() 时在控制台中得到“未定义”。

这是代码。

警报（“你好世界”）；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:52:28.263

你是`alert("Hello World");`从控制台运行的吗？

undefined 是 alert() 的返回值；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:53:02.777

如果您在控制台中执行一行，它会返回表达式的值。警报返回`undefined`

你可以用`var x = alert("test");`

`x`将是未定义的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:52:47.637

如果您使用的是交互式控制台，“未定义”是您键入的最后一个表达式的结果。由于警报没有返回任何内容，因此它显示您“未定义”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-20T23:41:53.477

我有同样的问题。如果您从浏览器中选择了**禁用警报**（例如 google chrome），您将在运行时收到*undefined*

```
alert("Something"); 
```

或者

```
prompt("Say demo","demo") 
```

使用新标签打开相同的网址，然后重试

# debugging - C++ Builder 附加源

> ID：15774053
> 
> 赞同：2
> 
> 时间：2013-04-02T20:49:04.137
> 
> 标签：debugging, c++builder

我有一个用于翻译的第 3 方 lib 文件。我可以访问源代码，并且很好奇是否有一种简单的方法可以将该源代码连接到我的项目，以便我可以使用调试器单步执行该代码并查看问题出在哪里。例如，单步执行 Delphi 代码，而不是查看汇编语言代码。

过去我用 eclipse 和 java 做过类似的过程，所以我希望有一个简单的方法可以用 C++ Builder 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T01:12:25.997

在项目选项下有一个“调试路径”选项。将源代码所在的任何文件夹添加到该路径中，它应该“正常工作”。如果没有，您可以按以下顺序尝试三件事：

1.  确保您的主应用程序（EXE 或 DLL）在调试模式下编译（即，您可以在自己的应用程序中单步执行代码，对吗？）

2.  确保 LIB 是在调试模式下编译的（我不确定这是否真的重要，但值得一试），因为你有源代码，如果需要，你应该能够重建

3.  最后的手段..因为你有源代码，你可以只在你自己的项目中包含源代码（添加所有文件）而不使用 LIB。

所有这些都假设您指的是静态库，而不是仅链接到外部 DLL（动态库）的 LIB。如果它实际上是一个 DLL，那么 DLL 必须在调试模式下构建，并且通常有一个带有调试信息的单独文件 (TDS)——该文件必须位于加载 DLL 的同一位置。

# mysql - 为其他表投影具有相同表的数据库

> ID：15774055
> 
> 赞同：-3
> 
> 时间：2013-04-02T20:49:17.513
> 
> 标签：mysql, database

我是数据库新手。

我有两张桌子：

*   银行
*   交换器

这些表中的每一个都可以有一个或多个电话号码。例如，银行 A 可能有两个电话，而交换机 B 可能有 5 个电话号码。

我可以这样做：为银行创建链接表`bank_phones`，也为交换器创建链接表。但是我将有两个结构几乎相同的表。这可以吗，还是我可以做得更好？

我想到了类似的东西：带有字段 id、main_id（其他表的链接，作为银行或交换器）、类型（将在此处写为银行或交换器）、phone_number 的桌面电话。这是一个好主意吗？如果没有，我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:24:16.980

简而言之，我会做很长的路要走。也就是说，我会有名为`bank_phone`and的表`exchanger_phone`。这意味着，如果您愿意`InnoDB`在 MySQL 中使用表类型，您可以使用`FOREIGN KEY`引用来确保电话号码只能附加到实际存在的银行和交易所（[请参阅此处](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的更多信息）。

同样，如果存在电话号码，这将防止银行或交易所被删除，这通常是一件好事。这称为*引用完整性*，有助于保持表之间的引用井井有条。

# sql - 在 SQL 中度过周末

> ID：15774059
> 
> 赞同：0
> 
> 时间：2013-04-02T20:49:27.197
> 
> 标签：sql, sql-server-2008, date, weekend

我正在使用 SQL Server 2008 并且有一个每天运行的查询。
其中 [Order Date] = getdate()-1 我需要一个语句，该语句将在星期一运行，并在可能的情况下汇总星期五、星期六和星期日的数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:05:41.177

您可以执行以下操作来选择一定范围内的所有记录：

```
SELECT *
FROM your_table
WHERE ((DATEPART(dw, date_created) + @@DATEFIRST) % 7) IN (5,6,0) 
```

在哪里：

5 = 周五
6 = 周六
0 = 周日

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T20:55:51.160

```
select
case DATEPART(weekday,getdate())
when 2 then SUM(weekend just gone)
else SUM(yesterday)
end as totalamount
from
etc... 
```

不过，您需要检查星期一的工作日编号！

# php - android + 从 mysql 数据库中检索数据

> ID：15774068
> 
> 赞同：0
> 
> 时间：2013-04-02T20:49:51.483
> 
> 标签：php, android, mysql, error-handling

我正在创建一个可以访问外部数据库以检索一些数据的移动应用程序，但问题出在日志猫中我收到错误任何人都可以帮助我，我将不胜感激

如日志 cat 系统错误在 * *HttpResponse response = httpclient.execute(httppost);* *那么如何解决这个问题？

# TestExternalDatabaseActivity.java

```
package com.taseen.apps;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.DefaultClientConnection;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.R.array;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class TestExternalDatabaseActivity extends Activity {

    TextView resultView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.testexternaldatabase);

    resultView =(TextView)findViewById(R.id.result);
    getData();

    }

   public void getData() 
   {
       String  result = "";
       InputStream isr = null;

       try {
        HttpClient httpclient = new DefaultHttpClient();
           HttpPost httppost = new  HttpPost("127.0.0.2/getAllCustomers.php");
           HttpResponse response  = httpclient.execute(httppost);
           HttpEntity entity = response.getEntity();
           try {
            isr = entity.getContent();
        } catch (IllegalStateException e4) {
            // TODO Auto-generated catch block
            e4.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        Log.e("log-tag", "Error in  connection"+e.toString());
        resultView.setText("could not connect to database");

        //convert response to string 

        try {
            BufferedReader reader = new  BufferedReader(new InputStreamReader(isr, "iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine())!= null)
            {
                sb.append(line + "\n");

            }
            isr.close();

            result = sb.toString();
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            Log.e("Log-tag", "Error converting  result" +e.toString());

    //parse json data

            try {
                String s ="";
                JSONArray jArray = new JSONArray(result);

                for(int i = 0; i<jArray.length(); i++)
                {
                    JSONObject json = jArray.getJSONObject(i);
                    s =  s +
                            "Name: "+json.getString("FirstName")+" "+json.getString("LastName")+"\n"+
                            "Age: "+json.getString("Age")+"\n"+
                            "Mobile Used: "+json.getString("Mobile")+"\n\n";

                }

                resultView.setText(s);
            } catch (JSONException e2) {
                // TODO Auto-generated catch block
                Log.e("log-tag", "Error parsing data"+e.toString());
            }

    } catch (IOException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }

   } catch (IOException e5) {
        // TODO Auto-generated catch block
        e5.printStackTrace();
    }

  }
} 
```

# 原木猫

```
04-02 20:47:58.223: E/log-tag(699): before the first try
04-02 20:47:58.223: E/log-tag(699): after the httpclient
04-02 20:47:58.282: E/log-tag(699): after the httppostt
04-02 20:47:58.352: W/System.err(699): org.apache.http.conn.HttpHostConnectException: Connection to http://127.0.0.2 refused
04-02 20:47:58.362: W/System.err(699):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:178)
04-02 20:47:58.362: W/System.err(699):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-02 20:47:58.362: W/System.err(699):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-02 20:47:58.362: W/System.err(699):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
04-02 20:47:58.372: W/System.err(699):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-02 20:47:58.372: W/System.err(699):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-02 20:47:58.372: W/System.err(699):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-02 20:47:58.372: W/System.err(699):  at com.taseen.apps.TestExternalDatabaseActivity.getData(TestExternalDatabaseActivity.java:60)
04-02 20:47:58.372: W/System.err(699):  at com.taseen.apps.TestExternalDatabaseActivity.onCreate(TestExternalDatabaseActivity.java:38)
04-02 20:47:58.372: W/System.err(699):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-02 20:47:58.372: W/System.err(699):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-02 20:47:58.372: W/System.err(699):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-02 20:47:58.475: W/System.err(699):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-02 20:47:58.475: W/System.err(699):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-02 20:47:58.475: W/System.err(699):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 20:47:58.475: W/System.err(699):  at android.os.Looper.loop(Looper.java:123)
04-02 20:47:58.475: W/System.err(699):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-02 20:47:58.475: W/System.err(699):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 20:47:58.475: W/System.err(699):  at java.lang.reflect.Method.invoke(Method.java:507)
04-02 20:47:58.482: W/System.err(699):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-02 20:47:58.482: W/System.err(699):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-02 20:47:58.482: W/System.err(699):  at dalvik.system.NativeStart.main(Native Method)
04-02 20:47:58.482: W/System.err(699): Caused by: java.net.ConnectException: /127.0.0.2:80 - Connection refused
04-02 20:47:58.493: W/System.err(699):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
04-02 20:47:58.493: W/System.err(699):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
04-02 20:47:58.493: W/System.err(699):  at java.net.Socket.connect(Socket.java:983)
04-02 20:47:58.493: W/System.err(699):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
04-02 20:47:58.493: W/System.err(699):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
04-02 20:47:58.493: W/System.err(699):  ... 21 more
04-02 20:47:58.493: E/log-tag(699): error in the get data function 
```

# 获取所有客户.php

```
<?php

$con = mysql_connect("localhost", "root", "root")or die(mysql_error());

mysql_select_db("TestDatabase", $con) or die("can not connect to the database");
$result = mysql_query("SELECT * FROM customer")or die(mysql_error());

while($row = mysql_fetch_assoc($result))
{
    $output[] = $row;
}
  print(json_encode($output));

  mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:04:02.267

好的，我有一个类似的问题。

我解决了它如下

在您的计算机中访问 c​​md 并键入 ipconfig，获取您的 IP 地址并替换 127.0.0.2 的位置

类似的东西（如果是我的电脑）：

```
HttpPost httppost = new  HttpPost("192.168.0.5/getAllCustomers.php"); 
```

我希望它有效

如果不起作用，请尝试关闭您的防病毒软件，在我的情况下，avast 阻止了我的访问。

# windows-7 - Windows 7 中的 ADODB 记录集绑定

> ID：15774069
> 
> 赞同：0
> 
> 时间：2013-04-02T20:49:59.770
> 
> 标签：windows-7, vb6, 64-bit, adodb

我有一个旧的 VB6 应用程序，它使用带有 ODBC 连接的 ADODB 重新设置。多年来，该应用程序在 Windows XP 上运行良好。我尝试在 3 台不同的 Windows 7 64 位机器上安装它，但出现错误 545 - 无法绑定到字段或 DataMember：'FieldName'。

这是发生错误的代码：

```
 For Each oText In Me.txtFields
        Set oText.DataSource = rsLocationInfo
        oText.Locked = True
    Next 
```

谢谢你的帮助。我整天都在努力研究和解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:07:29.787

我想到了。我不确定哪个数据（MDAC？）组件不正确，但只需在机器上安装 Access 2007 运行时即可解决问题。如果我们继续使用旧的 VB6 应用程序，我们需要重新访问我们的安装包。现在，在我们重写旧应用程序之前，我们很高兴。

# laravel - Laravel Routes - 是否可以完全不使用它们？

> ID：15774071
> 
> 赞同：0
> 
> 时间：2013-04-02T20:50:16.680
> 
> 标签：laravel, laravel-routing

我是具有 CI 背景的 Laravel 3.x 初学者。

我非常熟悉使用控制器而不是路由，并且在尝试在 Laravel 中使用控制器时遇到了问题。

例如：假设我有 home_controller 和“关于”操作。我的问题是我只能通过设置指向它的路由来访问“关于”操作 - 我认为这是不可取的。

有没有办法在不设置路线的情况下让“关于”动作起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:13:44.040

在 laravel 中，一切都可以使用路由和/或控制器来完成。

但是，**建议同时使用路由和控制器以获得极大的灵活性**。有关如何将路由与控制器组合的更多信息和一些示例，请参阅[本文。](http://jasonlewis.me/article/laravel-routes-or-controllers)

无论如何，如果您想使用控制器（这是完全可以接受的），您需要先在您的`routes.php`with中注册它们，`Route::controller('yourcontroller')`然后才能使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:09:33.763

一切都必须在 Laravel 中路由。但是，您不必手动路由每种方法。你可以做一些类似的事情`Route::controller('admin')`。

见这里： http: [//laravel.com/docs/routing#controller-routing](http://laravel.com/docs/routing#controller-routing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:56:49.430

您必须像上面的示例一样注册所有控制器。它是每个控制器的一行代码，它是规则。但如果你有一个静态页面或登录动作（页面），一个好的做法是创建一个 Route 控制器（匿名函数），而不是经典控制器（在 controllers 文件夹中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T18:53:08.897

我喜欢 Mike Anthony 的解决方案。当您仅使用控制器时，此检测方法就是您必须做的一切 - 这将自动注册您的所有控制器。迄今为止最好的免提解决方案。正如已经提到的那样，通常的控制器注册是：

```
Route::controller('controllername'); 
```

# jquery - Internet explorer 9+ box shadow 和 jQuery hide()

> ID：15774072
> 
> 赞同：1
> 
> 时间：2013-04-02T20:50:19.347
> 
> 标签：jquery, internet-explorer, css

我对 Internet Explorer 9+ 有一个奇怪的错误，例如带有 box-shadow 的可隐藏标签：

**CSS**

```
label {
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);
} 
```

**jQuery**

```
$('label').click(function() {
    $(this).hide();
}); 
```

[此处](http://jsfiddle.net/LaYFE/3/)有关 jsFidle 的更完整示例

以下是没有 Internet Explorer 的用户的结果 (2)：

![在此处输入图像描述](https://i.stack.imgur.com/qBCDu.png)

所以问题是：如果您单击通知将其隐藏，则 Internet Explorer 9 和 10 上的阴影仍然存在。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:49:14.127

正如[@adeneo](https://stackoverflow.com/questions/15774072/internet-explorer-9-box-shadow-and-jquery-hide#comment22423795_15774072)在评论中所说，问题在于 IE 如何`box-shadow`处理`display:inline`.

解决方案是将元素设置为`inline-block`但要注意这会改变元素的位置。

# r - 使用 rworldmap 库和地图功能突出显示特定国家（埃塞俄比亚、乌干达、肯尼亚）

> ID：15774073
> 
> 赞同：7
> 
> 时间：2013-04-02T20:50:22.173
> 
> 标签：r, maps, rworldmap

我正在使用包**mapdata**使用此代码，但是它只显示我选择的三个国家，我看不到世界其他地区的地图边界。

```
map("world", 
    regions=c("ethiopia", "kenya", "uganda"), 
    exact = TRUE, 
    fill=TRUE, 
    col=c(1,2,3)) 
```

如何在突出显示我选择的三个国家的同时显示世界其他地区的地图边界？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T21:11:13.723

这是一个没有 rworldmap 的示例：

```
require(mapdata)

# get the names
cc <- map('world', names = TRUE, plot = FALSE)
take <- unlist(sapply(c("ethiopia", "kenya", "uganda"), grep, tolower(cc), value = TRUE))

# world
map()
# add the selected countries in grey to the plot
map('world', regions=take, fill=TRUE, col='grey50', add = TRUE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/3o03R.png)

# javascript - 强制IE8在margin-left后重绘/重绘

> ID：15774076
> 
> 赞同：1
> 
> 时间：2013-04-02T20:50:26.823
> 
> 标签：javascript, internet-explorer-8

我在 IE8 中并将`margin-left`元素的设置为`-1000px;`

`DOM`不更新。如果我去找检查员，请取消选中该部分中的下一个框`margin-left`，`Trace Styles`然后重新选中该框 - 它会更新。

我已经尝试了一切，从设置`opacity`之后，到`display`，到`visibility`。我什至试过`zoom`。我还尝试更改元素父级的这些属性，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T09:09:34.700

我遇到了同样的问题，导致对微软开发人员的过度胆汁和仇恨。

这对灵魂或我的环境都不好，幸运的是我找到了解决方法。

我也没有应用边距，但是当您在 F12 开发工具中更改或添加 css 时，它的生命就解决了。

我的示例是使用 js 设置 CSS，然后像这样添加元素 -

`this.pvText.style.setAttribute("margin-top","80px"); this.pvTextPlaceholder.node.appendChild(this.pvText);`

重置 cssText 似乎强制重新绘制 -

`var tmp = this.pvText.style.cssText; this.pvText.style.cssText = ""; this.pvText.style.cssText = tmp;`

啊，在星期五早上……是的……^_^

[http://www.youtube.com/watch?v=7fEoFlhm1u4](http://www.youtube.com/watch?v=7fEoFlhm1u4)

# ms-access - Access SQL 中 Select Case 的等价物是什么？

> ID：15774078
> 
> 赞同：50
> 
> 时间：2013-04-02T20:50:32.670
> 
> 标签：ms-access, select-case

我有一个查询，其中包括名为*openingbalance*和*Commissions*的字段。我想根据*openingbalance计算**佣金*值，类似于Access VBA 中的这个块：*`Select Case`*

 *```
Select Case OpeningBalance
   Case 0 To 5000
        commission = 20
   Case 5001 To 10000
        commission = 30
   Case 10001 To 20000
        commission = 40
   Case Else
        commission = 50
End Select 
```

但是由于 Access 不允许`Select Case`在查询中，我如何才能在 Access SQL 中实现我的目标？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-02T23:59:36.320

将[Switch 函数](http://office.microsoft.com/en-us/access-help/switch-function-HA001228918.aspx)`IIf()`视为多个表达式的替代方案。它将返回表达式计算为 True 的第一个表达式/值对的值，并忽略任何剩余的对。该概念类似于`SELECT ... CASE`您引用的方法，但在 Access SQL 中不可用。

如果要将计算字段显示为`commission`：

```
SELECT
    Switch(
        OpeningBalance < 5001, 20,
        OpeningBalance < 10001, 30,
        OpeningBalance < 20001, 40,
        OpeningBalance >= 20001, 50
        ) AS commission
FROM YourTable; 
```

如果您想将该计算值存储到名为 的字段中`commission`：

```
UPDATE YourTable
SET commission =
    Switch(
        OpeningBalance < 5001, 20,
        OpeningBalance < 10001, 30,
        OpeningBalance < 20001, 40,
        OpeningBalance >= 20001, 50
        ); 
```

无论哪种方式，看看您是否发现`Switch()`更容易理解和管理。随着条件数量的增加，多重`IIf()s`可能变得令人难以置信。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T20:53:36.137

您可以使用 IIF 获得类似的结果。

请注意，您可以嵌套 IIF 语句来处理多种情况。这里有一个例子：[http ://forums.devshed.com/database-management-46/query-ms-access-iif-statement-multiple-conditions-358130.html](http://forums.devshed.com/database-management-46/query-ms-access-iif-statement-multiple-conditions-358130.html)

```
SELECT IIf([Combinaison] = "Mike", 12, IIf([Combinaison] = "Steve", 13)) As Answer 
FROM MyTable; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:55:48.040

你可以在下面做：

```
select
iif ( OpeningBalance>=0 And OpeningBalance<=500 , 20, 

                  iif ( OpeningBalance>=5001 And OpeningBalance<=10000 , 30, 

                       iif ( OpeningBalance>=10001 And OpeningBalance<=20000 , 40, 

50 ) ) ) as commission
from table 
```*

# android - 收藏夹 - 我将如何实现收藏夹按钮，以便在按下它时将 textView 文本保存到名为收藏夹的活动中？

> ID：15774079
> 
> 赞同：0
> 
> 时间：2013-04-02T20:50:34.290
> 
> 标签：android, eclipse, favorites

我正在创建一个带有 textView 框的应用程序。当按下按钮时，文本会使用随机生成器发生变化。如何实现一个收藏按钮，以便在按下它时创建一个 toast 并将 textView 文本保存到一个名为收藏夹的活动中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:53:37.153

我会将“textView”内容保存`SharedPreference`为`onClick()`.`Button`

当用户访问收藏夹活动时，我会`SharedPreference`通过`Extras Bundle`

根据您必须在哪里管理存储的收藏值列表以及有多少，您可能必须使用数据库而不是`SharedPreference`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:05:03.783

为此，我们`intents`为...

假设您想将数据从活动 A 发送到 B

1>然后在A的oncreate()中调用这个

```
Intent i = new Intent(this,your.class);
i.putExtra("key", value);
startActivity(i); 
```

2>在 B 的 oncreate() 中使用这个

```
int value = getIntent().getExtras().getInt("key"); 
```

我想你明白我的意思了……试试看……

# node.js - 带有 ExpressJS 错误的 Node.js：无法读取未定义的属性“原型”

> ID：15774085
> 
> 赞同：8
> 
> 时间：2013-04-02T20:51:00.347
> 
> 标签：node.js, express, requirejs

运行 node.js v0.10.2 和 express v3.1.1（此时最新）并收到此错误：

```
/root/dmr-addresses/node_modules/jquery/lib/node-jquery.js:10
window.XMLHttpRequest.prototype.withCredentials = false;
                     ^
TypeError: Cannot read property 'prototype' of undefined
  at create (/root/dmr-addresses/node_modules/jquery/lib/node-jquery.js:10:26)
  at /root/dmr-addresses/node_modules/jquery/lib/node-jquery.js:9503:18
  at Object.<anonymous> (/root/dmr-addresses/node_modules/jquery/lib/node-jquery.js:9505:2)
  at Module._compile (module.js:449:26)
  at Object.Module._extensions..js (module.js:467:10)
  at Module.load (module.js:356:32)
  at Function.Module._load (module.js:312:12)
  at Module.require (module.js:362:17)
  at require (module.js:378:17)
  at Object.<anonymous> (/root/dmr-addresses/address/log.js:1:71) 
```

log.js 的第 1 行是：

```
var $ = require('jquery'); 
```

我试过跑步`npm install jquery`，但它没有解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-03T15:10:29.880

检查这个：

同样的错误在这里......我不知道我在做什么，但我改变了**node-jquery.js 第四到第五行**，它开始工作了:)

老的：

```
if(window == null ) {
    window = require('jsdom').jsdom().createWindow(); 
```

新的：

```
if(!window || !window.document) {
    window = require('jsdom').createWindow();
    window.document = require('jsdom').jsdom(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:47:24.793

您*实际上*在 Node 服务器代码中没有原型对象，它全部存储在更好的[**__ *proto* __**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto) 对象中，您应该使用[Object.create/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)。

你到底想做什么？使用 Node 运行 ajax 查询？如果是这样，您应该使用[节点 http.request](http://nodejs.org/docs/latest/api/http.html#http_event_request)

一个例子可能是：

```
require('request').post({
    "uri"     : "http://example.com/",
    "headers" : {
        'content-type': 'application/json'
    },
    "body"    : "hello=world"
},
function(e,r,b){
    // e = errors, r = response and b = returned body
    console.log(b,r.statusCode));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T15:27:23.647

看起来这是 node-jquery 所依赖的 jsdom 模块的问题。看来这是一个已知问题，并且已修复，但尚未发布到 npm。

看看：[https ://github.com/coolaj86/node-jquery/issues/52](https://github.com/coolaj86/node-jquery/issues/52)

# twitter - twitter 引导程序和 ajax 模态

> ID：15774086
> 
> 赞同：3
> 
> 时间：2013-04-02T20:51:06.817
> 
> 标签：twitter, twitter-bootstrap

我在我的 asp.net 项目中使用 twitter bootstrap，我拥有的是顶部的菜单栏。一些菜单项应该打开一个带有外部 HTML 内容的模式。我尝试在要成为模态的 div 中放置一个 iFrame。这不能很好地工作，因为它我无法让模态窗口自动调整大小以适应外部 HTML 页面的内容。

我很想知道是否有关于如何正确使用带有外部内容的模式窗口或任何其他与 twitter bootstrap 一起正常工作的 jQuery 插件的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T05:29:51.237

万一其他人从谷歌来到这里......我发现[http://blog.assimov.net/blog/2012/03/09/ajax-content-in-twitter-bootstrap-modal/](http://blog.assimov.net/blog/2012/03/09/ajax-content-in-twitter-bootstrap-modal/)很有帮助。

相关代码（从博客复制，不试图声称信用）：

```
<a class="btn" href="/path/to/your/page.html" data-toggle="modal" data-target="#myModal">Launch Modal</a>

<div class="modal fade" id="myModal"></div>

$("a[data-toggle=modal]").click(function() {
  var target, url;
  target = $(this).attr('data-target');
  url = $(this).attr('href');
  return $(target).load(url);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:50:30.013

[https://github.com/jschr/bootstrap-modal](https://github.com/jschr/bootstrap-modal)

您可以通过 ajax 加载内容。我个人使用这个。也可以随意查看[www.bootsnipp.com](http://www.bootsnipp.com/)很棒的资源，包括这个可以在那里找到。

# html - Zurb 的基础 3.2.5 顶栏和切换顶栏

> ID：15774087
> 
> 赞同：1
> 
> 时间：2013-04-02T20:51:07.477
> 
> 标签：zurb-foundation, html, css, zurb-foundation, right-to-left

我的网站是 RTL 网站。我下载了使用 rtl 方向定制的[zurb-foundation](/questions/tagged/zurb-foundation "显示标记为“zurb-foundation”的问题") 3.2.5。但是，该网站的导航使用粘性固定顶栏，以相反的顺序呈现导航链接，如屏幕截图所示： ![在此处输入图像描述](https://i.stack.imgur.com/6CQ2G.png)

顺序应如以下屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/XqhUv.png)

为了获得第二个所需的屏幕截图，**我尝试**在 app.css 中设置以下内容：

```
.top-bar ul>li {
float: right;
} 
```

这里的问题出现在小屏幕中的切换顶栏上，其中切换顶栏箭头仅在展开菜单之前呈现，之后它在第一项下消失。请看以下屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/QzRJd.png)

当使用上述 CSS 在大屏幕中正确排序导航项时，上面的屏幕截图显示了小屏幕上的导航栏。它没有显示切换箭头！

以下屏幕截图显示了正确的切换栏，但在大屏幕上的顺序不正确： ![在此处输入图像描述](https://i.stack.imgur.com/MpO5r.png)

以下是用于生成此导航的 HTML 代码：

```
 <div class="contain-to-grid fixed">
<nav class="top-bar">
<ul>   
  <li class="name"><h1><a href="#"></a></h1></li>
   <li class="toggle-topbar"><a href="#"></a></li>  
</ul>
  <section>
    <ul class="left">    
  <li class = "active"><a href="/quran/" class="selected"><img src="/quran/img/home.png" alt="" />الرئيسية</a></li>
  <li class = ""><a href="/quran/contacts" class=""><img src="/quran/img/contact.png" alt="" />اتصل بنا</a></li>
  <li class = ""><a href="/quran/pages/about" class=""><img src="/quran/img/about.png" alt="" />عن الموقع</a></li>
    </ul>
    <ul class="right">
  <li class="">  
<div class="row collapse">
  <form controller="qurans" class="" id="QuranSearchForm" method="get" action="/quran/search">  <div class="nine mobile-three columns">
              <input name="q" type="text" id="QuranQ" title="بحث!" class="inline" placeholder="كلمات البحث..." value="" />  </div>
  <div class="three mobile-one columns">
                <a href="#" id="searchbutton" class="button expand postfix" title="بحث!" >بحث!</a>
</div>
  </form>
</div>              
  </li>
</ul>
  </section>
</nav>
 </div> 
```

> **这个问题中最奇怪的行为**：当我尝试从与项目相关的foundation.min.css属性列表中Google chrome的inspect元素更改.top-bar ul>li浮动属性并将浮动更改为正确时，它两边都可以正常工作（在大屏幕上顺序正确，在小屏幕上会出现用于扩展和缩小菜单的切换箭头）！！！

现场演示可以在[此链接](http://quran.2index.net)中找到，但请注意，在生活演示中，搜索框位于左侧。即不像屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:02:06.533

最后我得到了取决于@media 查询的解决方案。我在*app.css*做了以下事情：

```
.top-bar ul>li{
  float:right;  
}
@media only screen and (max-width: 940px) { .top-bar ul>li{
  float:none;  
}

} 
```

在上面的解决方案中，我在小屏幕的情况下使用@media 取消了 float:right。[从此链接](http://quran.2index.net)查看现场演示。

# prolog - Prolog 从句的英文句子？

> ID：15774096
> 
> 赞同：0
> 
> 时间：2013-04-02T20:51:24.873
> 
> 标签：prolog

我最近正在学习 Prolog，我提出了一个问题。

我怎么说：

任何员工在 Prolog 条款中开车、步行、乘车或乘飞机上班？

“任何”是我遇到问题的地方。

* * *

这是我的思考过程。

```
Employee(tom).     %tom is an employee (fact)

drives(X) :- Employee(X).    
walks(X) :- Employee(X).    
rides(X) :- Employee(X).   
flies(X) :- Employee(X). 
```

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:55:26.110

我认为这是相反的方式：

```
employee(X):- drives(X).
employee(X):- walks(X).
employee(X):- rides(X).
employee(X):- flies(X). 
```

`drives`加上,`walks`等的事实。

无论是哪位员工，其中一位必须持有。如果没有，则`employee(X)`失败。

那么，这就是*在这个 Prolog 数据库下的*含义，即“任何员工要么坐飞机，要么坐飞机，等等”。

你所写的意思是，给定一个成立的，每个，`X`等，也将成立。即“任何员工走路、开车、骑车和坐飞机”上班。（当然，谓词必须始终以小写字母开头）。`employee(X)``drives(X)``walks(X)`

# perl - 如果文件已排序，为什么 Tie::File 会添加一行？

> ID：15774100
> 
> 赞同：7
> 
> 时间：2013-04-02T20:51:28.463
> 
> 标签：perl, tie

我有这个应该对文件进行排序的小 perl 脚本：

```
#!/usr/bin/perl
use strict;
use warnings;

use Tie::File;

tie my @lines, 'Tie::File', 'fileToBeSorted.txt' or die $!;

printf "line count before: %d\n", scalar @lines;

@lines= sort @lines;

printf "line count after: %d\n", scalar @lines;

untie @lines; 
```

使用此输入运行时 ( `fileToBeSorted.txt`)

```
one;4;1
two;3;2
three;2;3
four;1;4 
```

脚本输出

```
line count before: 4
line count after: 5 
```

事实上，排序后的文件包含一个空的第五行。为什么会这样，我该如何防止呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:00:47.067

正如现在已删除的[答案](https://stackoverflow.com/a/15774535/100754)中所述，这似乎是一个已知的错误。

临时分配给非绑定列表变量是一种解决方法

```
my @dummy = sort @lines;
@lines = @dummy; 
```

但这对我来说仍然像一个错误，你应该[报告它](https://rt.cpan.org/Public/Bug/Report.html?Queue=Tie-File)。

**更新**：[已经报告](https://rt.cpan.org/Public/Bug/Display.html?id=39196)（由我们自己的[ikegami](https://stackoverflow.com/users/589924/ikegami)报告，不少于）。Perlmonks 讨论[在这里](http://www.perlmonks.org/?node_id=710580)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:11:36.323

如[相关 PerlMonks 讨论](http://www.perlmonks.org/?node_id=710580)中所述，`@lines = ((), sort @lines);`可用于解决该错误。

# php - PHP 多个 IF 语句（带回显），更简单的方法？

> ID：15774101
> 
> 赞同：0
> 
> 时间：2013-04-02T20:51:30.603
> 
> 标签：php

好的，所以我所有的代码都在工作，我只是想知道是否有更简单的方法来做到这一点。编码：

```
if($_POST['A'] == ""){echo "A";}
if($_POST['B'] == ""){echo "B";}
if($_POST['C'] == ""){echo "C";}
if($_POST['A'] == "" && $_Post['B'] == ""){echo "A and B";}
if($_POST['A'] == "" && $_Post['C'] == ""){echo "A and C";}
if($_POST['B'] == "" && $_Post['C'] == ""){echo "B and C";} 
```

现在，我想知道的很简单，有什么办法可以让这更简单吗？它适用于三个变量，但如果我要（例如）圈出整个字母表，如果我对统计数据的记忆是正确的，那就是 26！等于 4.0329146e+26。见鬼，连前 7 个字母都圈出来了，7！是我必须编码的 5040 种可能的组合。

我正在寻找的是不一定要回显“A和B”的东西，但是如果A是唯一发布到回显A的东西；如果发布 A 和 B 以回显“A”和“B”并在它们之间回显“and”；如果发布 A、B 和 C 以回显“A”、“B”和“C”，并在前两个之间回显一个“，”，并在倒数第二个和最后一个之间回显一个“and”。

我不知道我是否想要一个函数、一个类或其他东西。这可能是一个简单的问题到底运行，如果是，请原谅我的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:56:16.487

对于像“A 和 B”这样的简单消息，以下内容可以完成这项工作：

```
$variables = range('A', 'Z');
echo implode(' and ', $variables); 
```

如果您有 $_POST ，您可以执行以下操作：

```
if($_POST){
    echo implode(' and ', array_keys($_POST));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:05:38.070

```
function format_list( $items )
{
    if ( count( $items ) == 0 )
        return '';
    if ( count( $items ) == 1 )
        return $items[0];

    $last_item = array_pop( $items );
    $list_text = join( ', ', $items ) . ' and ' . $last_item;

    return $list_text;
}

$items = array();
$keys = array( 'A', 'B', 'C' );
foreach ( $keys as $key )
{
    if ( !empty( $_POST[$key] ) )
        $items[] = $key;
}
echo format_list( $items ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:04:55.410

```
$count = count($_POST);
$a = 1;
$str = '';
foreach ( $_POST as $key => $value )
{
     // if u wanna use values just replace $key to $value
     if ( $count > $a++ )
         $str .= $key . ', ';
     else
     {
         $str = rtrim( $str, ', ' );
         $str .= ' and ' . $key;
         $str = ltrim( $str, ' and ' );
     }
} 
```

# css - 如何使用 HTML-CSS 表格获取垂直文本省略号？

> ID：15774102
> 
> 赞同：7
> 
> 时间：2013-04-02T20:51:32.227
> 
> 标签：css, html, html-table, ellipsis

我想在只能容纳两行的小空间中显示文本。当文本太长时，我正在寻找一种在第二行末尾获得省略号的方法。

![在此处输入图像描述](https://i.stack.imgur.com/SdMX6.jpg)

我用了一张桌子，但它不起作用，我不能限制单元格的高度。

```
<td style="overflow-x: hidden;overflow-y:hidden;text-overflow: ellipsis;max-height:50px">text</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:48:13.983

我创建了一个带有演示的小提琴：http: [//jsfiddle.net/sandro_paganotti/N35Hw/](http://jsfiddle.net/sandro_paganotti/N35Hw/)。不幸的是，您必须提前知道文本是否会溢出才能显示`before`选择器。

## HTML

```
<p><span>
    lalla al lalla lalla la lallalla 
    llal alla alla alllla la la al allla
    lalall alla alla alla alla alla
    lla alla lalla lalla alla alla allalla lla
    llala lall lalla lal
</span></p> 
```

## CSS

```
p{
    width: 200px;
    border: 5px solid black;
    position: relative;
}
p:after{
    content: '...';
    display: block;
    position: absolute;
    bottom: 6px;
    right: 10px;
    background: #FFF;
}

span{
    display: block;
    margin: 10px;
    height: 50px;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:41:45.747

上次我遇到同样的问题时，我选择了 jQuery 选项。它被打包在一个[插件](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)中。我不记得我只在 CSS 中找到任何令人满意的东西。但是你在[这里](http://mattsnider.com/css-string-truncation-with-ellipsis/)有你可以实现的例子，我不相信它可以走得更远。

编辑：你看过[这个例子](http://jsfiddle.net/jasongennaro/UeCsk/)吗？它基本上用`<span>...</span>`. 肮脏的未经建议的黑客攻击，但它可以满足您的需求。

# objective-c - 从 Cocoa 桌面应用程序执行终端命令

> ID：15774103
> 
> 赞同：0
> 
> 时间：2013-04-02T20:51:32.537
> 
> 标签：objective-c, macos, nstask

我正在尝试在我的 Cocoa 桌面应用程序中执行创建 Cordova 项目的命令，但它不起作用。

那是我的代码：

```
NSTask *task = [NSTask new];
    [task setLaunchPath:@"/Documents/Cordova/bin/ ./create ~/Documents/Cordova/HelloWorld2 org.apache.cordova.HelloWorld2 HelloWorld2"];
    [task setArguments:[NSArray arrayWithObjects:@"-l", @"-a", @"-t", nil]];

    NSPipe *pipe = [NSPipe pipe];
    [task setStandardOutput:pipe];

    [task launch];

    NSData *data = [[pipe fileHandleForReading] readDataToEndOfFile];

    [task waitUntilExit];
   // [task release];

    NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog (@"got\n%@", string); 
```

这就是输出：

```
2013-04-02 23:48:18.968 Phonegap-ProjectCreator[2209:303] launch path not accessible
2013-04-02 23:48:18.970 Phonegap-ProjectCreator[2209:303] (
    0   CoreFoundation                      0x00007fff8b2b80a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff88d7e3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8b2b7e7c +[NSException raise:format:] + 204
    3   Foundation                          0x00007fff8bd21cd2 -[NSConcreteTask launchWithDictionary:] + 409
    4   Phonegap-ProjectCreator             0x0000000100002a4a -[MainWindow createProject:] + 314
    5   AppKit                              0x00007fff94506a59 -[NSApplication sendAction:to:from:] + 342
    6   AppKit                              0x00007fff945068b7 -[NSControl sendAction:to:] + 85
    7   AppKit                              0x00007fff945067eb -[NSCell _sendActionFrom:] + 138
    8   AppKit                              0x00007fff94504cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855
    9   AppKit                              0x00007fff94504521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504
    10  AppKit                              0x00007fff94503c9c -[NSControl mouseDown:] + 820
    11  AppKit                              0x00007fff944fb60e -[NSWindow sendEvent:] + 6853
    12  AppKit                              0x00007fff944f7744 -[NSApplication sendEvent:] + 5761
    13  AppKit                              0x00007fff9440d2fa -[NSApplication run] + 636
    14  AppKit                              0x00007fff943b1cb6 NSApplicationMain + 869
    15  Phonegap-ProjectCreator             0x00000001000011d2 main + 34
    16  libdyld.dylib                       0x00007fff89ced7e1 start + 0
    17  ???                                 0x0000000000000003 0x0 + 3
) 
```

我不明白这是什么问题？找不到执行路径还是无法执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:04:26.190

启动路径是要启动的路径，而不是要调用的命令行。它应该只包含要运行的可执行文件的路径。

arguments 数组是应该传递的参数。你正在混合两者。

* * *

您的可执行文件看起来是“/Documents/Cordova/bin/create”

参数似乎是这样的：

```
 NSArray *args = @["-l", "~/Documents/Cordova/HelloWorld2", "-a", "org.apache.cordova.HelloWorld2", "-t", "HelloWorld2"]; 
```

即参数具有值，并且这些值与参数数组中的参数交错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:22:05.007

我找到了解决方案。我是目标 c 的新手，我意识到我犯了很多错误。

这就是解决方案：

```
/** Path to Application **/
NSString *path = @"/Users/username/Documents/Cordova/bin/create"; 

/** Arguments **/
NSArray *args = [NSArray arrayWithObjects:@"/Users/username/Documents/Cordova/HelloWorld3",@"org.apache.cordova.HelloWorld3",@"HelloWorld3", nil];
[[NSTask launchedTaskWithLaunchPath:path arguments:args] waitUntilExit]; 
```

# html - 网站不会在带有 fb HTML 属性的 IE 中显示 Facebook Like 按钮

> ID：15774105
> 
> 赞同：0
> 
> 时间：2013-04-02T20:51:39.117
> 
> 标签：html, web, wordpress, wordpress-theming

任何帮助将不胜感激。我一直在四处寻找并试图解决这个问题好几个星期，但无济于事。

我的 Wordpress 网站拒绝在 IE 中显示我的 Facebook 按钮。是的，我已将 facebook HTML 属性放入代码中，但仍然没有。我有两个实例，我一直在尝试使用 Like 按钮，这是一个 Wordpress 小部件（Simple Facebook Connect）以及 HTML 代码。这是我第一次在我的一个网站上遇到这样的问题，在这家公司上线之前我只需要一些可怕的帮助。再次，任何帮助将不胜感激。代码如下所示。

```
<!DOCTYPE HTML>
<html xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/">
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="ie ie9" lang="en"> <![endif]-->
<!--[if !IE]><!--><html <?php language_attributes(); ?> <!--<![endif]-->
<head> 
```

喜欢按钮代码：

```
<div id="fb-root"></div>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=546891755321471";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<fb:like href="http://www.facebook.com/livecarepc" send="false" layout="standard' width="200" show_faces="true" colorscheme="dark"></fb:like> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:28:33.640

Internet Explorer 可能非常注重具有正确的类型信息集（doctype、css、脚本等）。在这种情况下，`<script>`标签不足以触发 IE 显示 Facebook 喜欢按钮，这在旧版本的 IE 中可能尤其如此。

修复Like 按钮代码中的`<script>`替换`<script language="JavaScript">`。

# java - 使用矩形数组的简单嵌套 for 循环的越界异常

> ID：15774111
> 
> 赞同：0
> 
> 时间：2013-04-02T20:51:58.553
> 
> 标签：java, nested-loops, multidimensional-array

我有一个简单的嵌套 for 循环，可以完美地输出结果，但随后抛出：

线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：4

该数组是 4 行 4 列，我试图总计列，所以我基本上只是反转了嵌套循环。

```
 rowIndex = 1;
        for (int i = 0; i < regions[i].length; i++)
        {
            int sum = 0;
            for (int j = 0; j < regions.length; j++)
            {
                sum += regions[j][i];
            }
            System.out.println("Q" + rowIndex + ": " + currency.format(sum));
            rowIndex++;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:54:57.553

这不应该看起来像......

```
 rowIndex = 1;
    for (int j = 0; j < regions.length; j++) // here regions.length
    {
        int sum = 0;
        for (int i = 0; i < regions[j].length; i++) // here index j
        {
            sum += regions[j][i];
        }
        System.out.println("Q" + rowIndex + ": " + currency.format(sum));
        rowIndex++;
    } 
```

认为你混淆了指数......干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:55:16.537

您正在弄乱数组的索引。我猜你的代码应该是这样的：

```
 rowIndex = 1;
    for (int i = 0; i < regions.length; i++)
    {
        int sum = 0;
        for (int j = 0; j < regions[i].length; j++)
        {
            sum += regions[i][j];
        }
        System.out.println("Q" + rowIndex + ": " + currency.format(sum));
        rowIndex++;
    } 
```

# javascript - 延迟加载不显示我的图像

> ID：15774116
> 
> 赞同：1
> 
> 时间：2013-04-02T20:52:13.160
> 
> 标签：javascript, jquery, html, lazy-loading

我有大量内容图像。这就是我决定使用延迟加载的原因：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

我的页面是这个：[http ://www.mysecretathens.gr/kulte_test/osterman.html](http://www.mysecretathens.gr/kulte_test/osterman.html)

我遵循了所有必需的说明，但不明白为什么我想测试延迟加载功能的第一张图像不显示

在我的头部分是这样的：

```
 <script src="jquery.js" type="text/javascript"></script>
<script src="lazyload.js" type="text/javascript"></script> 
```

图片：

```
 <img class="lazy" src="grey.gif" data-original="osterman/ost21.jpg" width="900" height="602" > 
```

和JS代码

```
 <script type="text/javascript">

 $("img.lazy").lazyload();

</script> 
```

为什么只显示 gray.gif 而不是实际图像？有任何想法吗？我有错误的 jquery 文件吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:00:06.400

您的 JS 似乎确实引发了错误。在您的`jquery.js`文件底部似乎是无效代码：

```
...
})( window );
Window size: x 
Viewport size: x 
```

最后两行导致错误并阻止任何进一步的 JS 执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:13:25.060

chrome调试器中的错误：

未捕获的 SyntaxError：意外的标识符 jquery.js:9598

未捕获的 SyntaxError：意外的标识符lazyload.js:228

未捕获的 ReferenceError：$ 未定义 osterman.html:205

# dao - MyBatis parameterClass 的多种类型和迭代

> ID：15774117
> 
> 赞同：1
> 
> 时间：2013-04-02T20:52:13.740
> 
> 标签：dao, mybatis

我需要在 MyBatis dao xml 文件中进行查询，该文件将接收两个参数：一个字符串对象和一个字符串列表。它应该看起来像这样：

```
 <select id="findMinTime" parameterClass="????" resultClass="java.lang.Integer">
      select min(time) from table_$first_parameter$ where name in <iterate over second_parameter>
  </select> 
```

关于如何格式化此查询以及如何指定这两个不同参数的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:46:30.713

您不能以这种方式传递两个参数。您应该创建新类，例如`MyParam`使用以下两个字段：

```
public class MyClass {
  private String param1;
  private List<String> param2;

  // getters and setters
} 
```

并在您的查询中使用该类。在查询中按名称访问这些字段，就像访问任何其他字段一样。

# msdeploy - 如何使用 webdeploy 定位已经存在的应用程序池？

> ID：15774122
> 
> 赞同：12
> 
> 时间：2013-04-02T20:52:26.827
> 
> 标签：msdeploy, webdeploy, microsoft-web-deploy

我正在尝试确保将我的应用程序部署到使用 Web 部署时已经存在的特定应用程序池。应用程序池应该由用户在通过 IIS 管理器安装应用程序时使用 GUI 进行配置，或者在通过命令行从 Web 包安装时更改 .setparameters.xml 文件中的值。将以下参数条目插入到我的 parameters.xml 中并不能解决问题。

```
<parameter name="Application Pool" description="Application Pool for this site" tags="iisApp" defaultValue="ASP.NET v4.0">
    <parameterEntry kind="providerPath" scope="IisApp" match="applicationPool" />
</parameter> 
```

有没有一种简单的方法可以做到这一点？如果没有，我将如何完成这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-17T19:43:44.550

这是我在 SO 和其他地方大量阅读后通过命令行或 SetParameters.xml 设置应用程序池的方法：

1.  将 Parameters.xml 文件添加到项目中。

    ```
    <?xml version="1.0" encoding="utf-8" ?>
    <parameters>
      <parameter name="AppPool" defaultValue="ASP.NET 4.0">
        <parameterEntry kind="DeploymentObjectAttribute" scope="application" match="applicationPool/@applicationPool" />
      </parameter>
    </parameters> 
    ```

    *   资料来源：
        *   [如何从 MSbuild 指定 MSDeploy 参数](https://stackoverflow.com/questions/8160017/how-to-specify-msdeploy-parameters-from-msbuild)
        *   [http://vishaljoshi.blogspot.com/2010/07/web-deploy-parameterization-in-action.html](http://vishaljoshi.blogspot.com/2010/07/web-deploy-parameterization-in-action.html)
2.  创建包时在msbuild中添加两个参数：

    ```
    /P:IncludeIisSettings=true
    /P:IncludeAppPool=true 
    ```

    *   资源：
        *   [https://stackoverflow.com/a/13678143/448876](https://stackoverflow.com/a/13678143/448876)
3.  通过 SetParameters.xml 设置：

    ```
    <setParameter name="AppPool" value="Some AppPoolName"/> 
    ```

    **或者**

    使用命令行参数（`msdeploy`或`*.deploy.cmd`）：

    ```
    "-setParam:'AppPool'='Some AppPoolName'" 
    ```

# .net - Entity Framework Code First v 4.3 中的死锁

> ID：15774124
> 
> 赞同：2
> 
> 时间：2013-04-02T20:52:28.407
> 
> 标签：.net, entity-framework, entity-framework-4

我有一个通过 EF 代码优先模型更新的数据库。该数据库包含一个“父”表和 10 或 12 个“子”表。父表和子表之间存在外键关系。

最初，当我想在子表中创建记录时，我会使用 EF 创建父行，获取主键，然后使用 EF 创建子行，将主键用作子表中的外键.

最近我重构了我的模型以使用 TPT 继承。所以现在我有一个基类（对应于我的基表）和子类（对应于我的子表）。所以现在如果我想创建一个子记录，我创建一个子类型的对象，填充所有必需的字段并使用上下文进行保存。我假设（因为它是合乎逻辑的）EF 生成的 SQL 与我手动执行的操作几乎相同：

1.  创建父记录。
2.  获取新父记录的主键
3.  创建子记录

现在的问题是，使用 TPT 继承时，我遇到了死锁错误。每天 5-10 次尝试在此数据库中创建条目时会出现死锁错误。这个数据库是一个网站的日志数据库，所以我会说 90% 的操作都是写入。我用它来记录网站上的活动。

如果我在我的网站的测试实例上施加足够的负载，我可以很容易地让错误发生得非常频繁。我正在尝试从我的 DBA 获取 SQL 跟踪，因为我自己没有能力这样做（即使在测试中）。我知道这将是最有帮助的，当我得到它时，我会把它发回这里，但我的第一个问题是，有什么**明显**的我做错了吗？我在网上对此进行了研究，试图找出 EF 使用哪种类型的并发，反应不一。有人说它使用 SQL 服务器默认值（读取已提交），而另一些人则说，由于它将查询包装在 TransactionScope 对象中，因此它使用默认的 TransactionScope 隔离级别，即 Serializable。

任何人都可以确定使用什么隔离级别，和/或当您创建作为 TPT 继承树一部分的实体时生成什么 SQL？

谢谢。

**编辑** 因此，为了响应@usr对我原始帖子的评论的建议，我尝试使用 ReadCommitted 级别将我的保存包装在事务范围中，就像这样

```
TransactionOptions options = new TransactionOptions();
options.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
using (TransactionScope scope = new     TransactionScope(TransactionScopeOption.RequiresNew, options))
{
    retVal = AuditEventContext.SaveChanges();
    scope.Complete();
} 
```

我仍然遇到同样的死锁错误。我正在从我的 DBA 获取 SQL 跟踪。

为了在这个应用程序周围添加更多上下文，我将添加我的上下文（上面代码中的 AuditEventContext）正在被 MVC 应用程序使用。每个控制器都有自己的 AuditEventContext 实例，因此我在多个线程中有多个上下文来更新同一个数据库。我确定这是导致死锁的原因，我只是不明白为什么，特别是因为我的原始代码模仿了我认为 EF 为基于继承的插入所做的事情。

**编辑＃2以回答以下问题**

还有其他应用程序可以读取这些数据，但是当我知道什么都没有读取时，我可以使这个错误发生。我一次在我的网站上扔了 50 个左右的用户，这几乎是马上发生的。幸运的是，我们的网站上同时没有 50 个用户，但是 :) 我们没有插入很多行。这是一个审计数据库，因此我们在整个站点中编写“审计事件”，即页面请求、接受法律条款、注销等。因此插入的内容非常少。上下文存在于控制器的生命周期中，因此可以使用相同的上下文来插入多个事件，但每个事务都很小。我希望我们不会生成重复的键，因为父表上的键是自动生成的整数标识。管理它是 SQL Server 的工作。父表上有 4 个索引，ALLOW_ROW_LOCKS=ON 和 ALLOW_PAGE_LOCKS=ON。我没有设置这些，我只是保留了 SQL 默认值。索引也有 IGNORE_DUP_KEY=OFF

@RuneG，上下文是由Unity（依赖注入）生成的。我不是直接创建它。我正在调用 Dispose，但是，当拥有上下文的控制器被释放时，我正在调用 Dispose，而不是在调用保存更改之后立即调用，就像我使用 using 语句创建上下文时那样。这会引发问题吗？对多个更新使用相同的上下文？

**编辑 #3 - 死锁 SQL**

终于得到了一个 SQL 跟踪。下面是一个死锁 SQL 的例子

```
exec sp_executesql N'insert [dbo].[PFIAccessLog]([AuditEventID], [Screen],     [PolicyNumber], [CoverageSequence], [PersonTypeID])
values (@0, @1, @2, @3, @4)
select [PFIAccessLogID]
from [dbo].[PFIAccessLog]
where @@ROWCOUNT > 0 and [AuditEventID] = @0',N'@0 bigint,@1 nvarchar(100),@2   nvarchar(50),@3 nvarchar(50),@4    int',@0=2035631,@1=N'ContractList',@2=N'220001197',@3=N'1',@4=1 
```

和

```
exec sp_executesql N'insert [dbo].[PFIAccessLog]([AuditEventID], [Screen],     [PolicyNumber], [CoverageSequence], [PersonTypeID])
values (@0, @1, @2, @3, @4)
select [PFIAccessLogID]
from [dbo].[PFIAccessLog]
where @@ROWCOUNT > 0 and [AuditEventID] = @0',N'@0 bigint,@1 nvarchar(100),@2     nvarchar(50),@3 nvarchar(50),@4     int',@0=2035630,@1=N'ContractList',@2=N'220001197',@3=N'1',@4=1 
```

PFIAccessLog 是我的 TPT 层次结构中的子表之一。

**编辑 4**

好的，所以现在我的代码是这样的，但我仍然遇到死锁：

```
TransactionOptions options = new TransactionOptions();
options.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
using (TransactionScope scope = new     TransactionScope(TransactionScopeOption.RequiresNew, options))
{
    context.Database.Connection.Open();
    context.Database.Connection.EnlistTransaction(Transaction.Current);
    retVal = context.SaveChanges();
    scope.Complete();
} 
```

我还对代码进行了更改，以在每次编写时创建一个新上下文，而不是在 MVC 控制器的生命周期内共享上下文（可能是多次写入）。

**编辑#5**

好的，在@RuneG 的建议下，我将隔离级别设置为未提交并解决了问题。但是，我对此有点紧张。如果您查看死锁的示例语句，我正在阅读的部分内容是主键值。如果我可以从另一个事务中读取未提交的数据，并且这些键是由数据库自动生成的，那么当我回读时是否有可能获得一些其他记录 ID？

假设这些 SQL 片段中的每一个都在事务中执行，并且由于它们对同一个表进行 1 次写入和 1 次读取，因此我假设死锁是这样发生的

事务 1 写入它的数据。它获得并释放排他锁。
事务 1 为读取获取共享锁。事务 2 为其插入获取写锁。

Bam，在读取提交下出现死锁，对吧？事务 1 无法继续，因为存在写锁。事务 2 无法继续，因为有一个共享锁来防止事务 2 写入数据 事务 1 可能被视为脏。

所以假设我现在正在阅读未提交的内容。

事务 1 写入它的数据。事务 1 读取它的数据 事务 2 写入它的数据 事务 2 读取它的数据。

其中一个进程可以用独占锁阻塞另一个进程，但不会获得任何共享锁。所以我关心的是主键的生成如何适应所有这些。我假设它是在桌子上有排他锁时生成的，所以我的钥匙没有被“混淆”的风险？我真的不在乎其他进程是否会读取最终回滚的脏数据。钥匙是我关心的。

而且，这是多个线程运行同一种 SQL 语句的结果。线程是我的 MVC 应用程序中的请求。这似乎是一个标准场景。我假设如果我让我的代码线程安全（即一次只有一个线程在代码中），我可以使用读取提交？

抱歉这么啰嗦。我倾向于在解决问题时:)

# objective-c - Obj-C：它在旋转之前改变中心

> ID：15774125
> 
> 赞同：0
> 
> 时间：2013-04-02T20:52:30.127
> 
> 标签：objective-c

这是我的代码：

```
[UIView animateWithDuration:0.4f
                      delay:0.1f
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     CGAffineTransform rotate = CGAffineTransformMakeRotation( 30.0 / 180.0 * 3.14 );
                     [needleBig setTransform:rotate];

                 }
                 completion:^(BOOL finished){

                 }]; 
```

这是旋转前后的图片：
![旋转前](https://i.stack.imgur.com/wOE6S.png) ![旋转后](https://i.stack.imgur.com/mKamY.png)

它似乎在旋转之前改变了中心，但我不想要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:09:50.890

使用创建`CGAffineTransformMakeRotation(angle)`的旋转使坐标系围绕其原点旋转。文档说“角度=该矩阵旋转坐标系轴的角度，以弧度为单位。”
从您的图片来看，您的坐标系的原点似乎位于时钟所在正方形的左上角。如果相应地设置视图的图层属性，
则可以围绕任何其他点旋转。`anchorPoint`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:27:13.667

这有效：

```
needleBig.layer.anchorPoint=CGPointMake(0.5f, 0.5f);

[UIView animateWithDuration:0.4f
                      delay:0.01f
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                    CGAffineTransform rotate = CGAffineTransformMakeRotation(180.0f * (M_PI / 180.0f));

                    [needleBig setTransform:rotate];

                 }
                 completion:^(BOOL finished){

                 }]; 
```

# django - Django-registration：如何让帐户创建要求输入名字/姓氏

> ID：15774127
> 
> 赞同：4
> 
> 时间：2013-04-02T20:52:45.553
> 
> 标签：django, django-registration

我正在使用 Django-Registration 包让用户创建帐户、对其进行身份验证并登录到我的 webapp。

但是，用于创建帐户的表单/视图不会要求用户输入名字/姓氏（这些字段是模型 BTW 的一部分）。它只询问他们的电子邮件地址、登录 ID 和密码（两次）。我希望它询问用户的名字/姓氏（这些字段可以是可选的......但它仍然应该询问）。我找不到要修改的表单和查看文件，因此它要求提供此信息。我已经修改了模板文件。但是没有表单和视图的修改是没有用的。这是怎么做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:07:52.953

在您的 forms.py 中，扩展 DjangoRegistration 表单，如：

```
class MyExtendedForm(RegistrationForm):
    first_name = forms.CharField(widget=forms.TextInput(label="first_name"))
    last_name = forms.CharField(widget=forms.TextInput(label="last_name")) 
```

在 中`urls.py`，告诉 django-registration 使用这个扩展形式：

```
# using my registration form to override the default
(r'^register/$', 
    register, 
    {'backend': 'registration.backends.default.DefaultBackend',
     'form_class': MyExtendedForm}), 
```

定义`user_created`保存额外信息：

```
def user_created(sender, user, request, **kwargs):
    """
    Called via signals when user registers. Creates different profiles and
    associations
    """
    form = MyExtendedForm(request.Post)
    # Update first and last name for user
    user.first_name=form.data['first_name']
    user.last_name=form.data['last_name']
    user.save() 
```

然后，注册来自 django-registration 的信号以在处理任何注册后调用您的函数：

```
from registration.signals import user_registered
user_registered.connect(user_created) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-19T04:24:59.327

[一旦你完成了这里](https://stackoverflow.com/a/61283399/3842788)所示的所有设置，请使用以下 CustomUserForm：

```
class CustomUserForm(RegistrationForm):
    class Meta(RegistrationForm.Meta):
        model = CustomUser
        fields = ['first_name','last_name','username','email','password1','password2'] 
```

# python - Django 模板标签中的详细模式

> ID：15774132
> 
> 赞同：6
> 
> 时间：2013-04-02T20:52:53.433
> 
> 标签：python, django, django-templates

是否有可能在调试模式下将有关模板生成的详细信息写入生成的视图？例如它可以生成这样的输出：

base.html：

```
<html>
<body>
{% block content %}
{% endblock %}
</body>
</html> 
```

page.html：

```
{% extend "base.html" %}
{% block content %}
Foo
{% include "inner.html" %}
Bar
{% endblock %} 
```

变成这样的形式：

```
<html>
<body>
<!-- block content -->
<!-- from "page.html" -->
Foo
<!-- include "inner.html" -->
Bar
<!-- endblock content -->
</body>
</html> 
```

为什么？因为有时仅通过 IDE 就很难探索一些更大的依赖项。或者，也许您知道一些便于导航（生成图表等）的好工具？当然，这些信息只能在调试模式下生成。在生产中它们应该消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:37:13.873

您也许可以使用中间件来实现这一点。我在跟踪模板和调用它们的视图时遇到了类似的问题，所以我编写了一个中间件片段，在 html 响应的顶部添加了一个注释块。它并不能完全满足您的要求，但您可能能够适应它。

```
COMMENT_BLOCK = """
<!--
[ url      ] >> http://%(host)s%(path)s
[ referer  ] >> %(referer)s
[ module   ] >> %(module)s
[ function ] >> %(function)s, line %(line)s
[ args     ] >> args=%(args)s, kwargs=%(kwargs)s, defaults=%(defaults)s
[ template ] >> %(template)s
-->

"""

# Add any additional template types you wish to add the comment block to.
MIMETYPES = (
    "text/html",
    "text/xml",
)

class HtmlTemplateFinder:

    def __init__(self):
        self.host = None
        self.referer = None
        self.path = None
        self.module = None
        self.function = None
        self.line = None
        self.args = None
        self.kwargs = None
        self.defaults = None
        self.template = None
        self.valid_template = False

    def _populate_comment_block(self):
        return COMMENT_BLOCK % {
                                'host': self.host,
                                'referer': self.referer,
                                'path': self.path,
                                'module': self.module,
                                'function': self.function,
                                'line': self.line,
                                'args': self.args,
                                'kwargs': self.kwargs,
                                'defaults': self.defaults,
                                'template': self.template,
                               }

    def process_view(self, request, view_func, view_args, view_kwargs):
        self.host = request.META.get('HTTP_HOST', None)
        self.referer = request.META.get('HTTP_REFERER', None)
        self.path = request.path
        self.module = view_func.func_code.co_filename
        self.function = ('.').join((view_func.__module__, view_func.func_name))
        self.line = view_func.func_code.co_firstlineno
        self.args = view_args
        self.kwargs = view_kwargs
        self.defaults = view_func.func_defaults
        return None

    def process_template_response(self, request, response):
        from mimetypes import guess_type
        # Use this rather than response.template_name, this always returns str
        self.template = response.resolve_template(response.template_name).name
        self.valid_template = guess_type(self.template)[0] in MIMETYPES
        return response

    def process_response(self, request, response):
        from <your app> import settings
        if settings.DEBUG:
            if self.valid_template:
                block = self._populate_comment_block()
                response.content = "%s%s" % (block, response.content)
        return response 
```

# sql-server - 内连接或条件（SQL 服务器）

> ID：15774137
> 
> 赞同：-4
> 
> 时间：2013-04-02T20:53:06.543
> 
> 标签：sql-server

我有2个表如下：

```
create table table1 (id int not null, c1 varchar(10))       

create table table2 (id int not null, value varchar(10))

insert into table1 values (10, 'record 1')  
insert into table1 values (20, 'record 2')

insert into table2 values (10, 0) 
```

我的要求是...

> 我必须从 table1 中获取所有记录，其中 table2 中的“值”为 0 或 table2 中没有记录。对于 id=20，table2 中没有记录，但我仍然想在结果中显示它。

**我不想使用 LEFT JOIN。**我想在 INNER JOIN 中使用 OR 条件。

我目前的查询是...

```
select a.* 
from table1 a 
inner join table2 b
on a.id = b.id and b.value = 0 
```

我正在寻找的结果是......

10 record1（将在结果中，因为它在 table2 中的值为 0） 20 record2（将在结果中，因为 table2 中没有 20 的值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:06:04.430

如果您不能使用外连接，则可以将测试移至 where 子句以满足条件，这是在支持声明式连接之前您应该做的：

```
select a.* from table1 a, table2 b where a.id = b.id or b.value = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:16:41.000

既然我们知道您要求我们不使用左连接的原因是肤浅的，至少有些误导，请尝试以下查询：

```
SELECT a.id, a.c1 
FROM dbo.table1 AS a 
LEFT OUTER JOIN dbo.table2 AS b
ON a.id = b.id 
AND b.value = 0; 
```

如果这没有得到您正在寻找的结果，那么请用您正在寻找的结果更新问题，而不是告诉我们您必须在不使用左连接的情况下执行左连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:08:21.133

这是一个罗斯文的例子。

```
select * from [dbo].[Customers] custs where 
not exists ( select null from dbo.[Orders] innerOrds where innerOrds.CustomerID = custs.CustomerID  )
OR
exists ( select null from dbo.[Orders] innerOrds where innerOrds.CustomerID = custs.CustomerID and innerOrds.EmployeeID = 7 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T21:03:48.800

恕我直言，你的要求有点奇怪，但你可以在没有加入的情况下尝试这个

```
SELECT * 
FROM table1 
WHERE id NOT IN(SELECT DISTINCT id FROM table2 WHERE value<>0 OR value IS NULL) 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/42494/4)**

# jquery - jquery hide/show on mouse over 仅适用于一个 div

> ID：15774138
> 
> 赞同：1
> 
> 时间：2013-04-02T20:53:07.363
> 
> 标签：jquery, html, css

我有几个 div 向左浮动，每个都有一个 CHILD DIV 应该隐藏在鼠标上。它仅适用于第一个容器/父 div。对于其他它没有。

我希望实现，当鼠标悬停父 DIV 子 div 隐藏时，在 mouseout 子 div 上出现。这应该适用于所有容器/父 div，*当悬停任何 div1 隐藏所有 div2 时，我不是在寻找 :)。功能必须部分适用于每个容器。

[小提琴](http://jsfiddle.net/T7USy/10/)

HTML：

```
<div id="div1">
    <div id="div2">asdsds</div>
</div>
<div id="div1">
    <div id="div2">asdsds</div>
</div>
<div id="div1">
    <div id="div2">asdsds</div>
</div>

<div class="clear"></div> 
```

jQuery：

```
$(function() {
      $('#div2').show();
      $('#div1').hover( function() { $('#div2').fadeToggle(); } );
}); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:56:14.020

使用类而不是`id`. 您只能拥有任何给定 ID 中的一个。

试试这个：

```
<div class="div1"><div class="div2">asdsds</div></div>
<div class="div1"><div class="div2">asdsds</div></div>
<div class="div1"><div class="div2">asdsds</div></div>

<div class="clear"></div>

<script>
    $(function() {
      $('.div1').hover( function() {
          $(this).find('.div2').fadeToggle();
      } );
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:55:05.147

使用 jQuery 时，ID 必须是唯一的。对于组，请改用类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:01:53.773

正如每个人已经说过的，id 应该是唯一的，你绝对应该使用 classes。话虽如此，您可以通过更改选择器以包含标记名来“作弊”，即：

```
$(function() {
      $('div#div2').show();
      $('div#div1').hover( function() {
          $(this).find('div#div2').fadeToggle();
      } );
}); 
```

即使您的 id 不是唯一的，这在大多数浏览器中也应该有效，因为它会改变底层的选择过程。

另请注意，您必须使用`.find()`（或类似方法）仅切换作为当前悬停项目的子元素的元素 - 您会注意到我`$(this).find(...`在悬停处理程序中使用。

演示：http: [//jsfiddle.net/nnnnnn/T7USy/12/](http://jsfiddle.net/nnnnnn/T7USy/12/)

但我真的不推荐“作弊”方法，您绝对*应该*更改您的 html 标记以不具有重复的 id：

```
<div class="div1">
    <div class="div2">asdsds</div>
</div>
<!-- etc --> 
```

随着您的 CSS 和 JS 的相应更改：

```
 $('.div1').hover( function() {
      $(this).find('.div2').fadeToggle();
  } ); 
```

演示：http: [//jsfiddle.net/nnnnnn/T7USy/16/](http://jsfiddle.net/nnnnnn/T7USy/16/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T21:00:16.450

主要问题是您重复了 ID。您应该为此任务使用类：

```
$('.div2').show();
$('.div1').hover(function() {
    $('.div2', this).stop().fadeToggle();
}); 
```

另一个问题：`$('#div2').fadeToggle();`。您可能希望一次只切换一个 div，当前处于悬停状态，因此您应该提供一个上下文：

```
$('.div2', this).stop().fadeToggle(); 
```

或者

```
$(this).find('.div2').stop().fadeToggle(); 
```

[http://jsfiddle.net/T7USy/13/](http://jsfiddle.net/T7USy/13/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T21:01:52.240

问题是您使用了太多的 id，但这里有一种方法可以解决您的特定问题。这使用[以](http://api.jquery.com/attribute-starts-with-selector/)选择器开头：

```
<div id="up1">
    <div id="sub1">asdsds</div>
</div>
<div id="up2">
    <div id="sub2">asdsds</div>
</div>
<div id="up3">
    <div id="sub3">asdsds</div>
</div> 
```

和jQuery：

```
$(function() {
      $('[id^=sub]').show();
      $('[id^=up]').hover( function() { $('[id^=sub]').fadeToggle(); } );
}); 
```

这将显示/隐藏每个相应的元素。

希望这可以帮助

# servicestack - ServiceStack：错误未序列化到响应状态

> ID：15774139
> 
> 赞同：2
> 
> 时间：2013-04-02T20:53:11.040
> 
> 标签：servicestack

我是服务堆栈的新手，并且已经挣扎了几个小时，试图让服务堆栈为我工作。目前主要的表演障碍是我无法使异常部分起作用。我按本书注册了所有插件，服务适用于 REST、Soap、CSV、XML 和 JSV。该项目包含 4 种基本测试方法，用于对客户对象进行 crud 操作。抛出错误时，我没有得到预期的错误：未设置 ResponseStatus 并生成一般错误。有人可以帮我找出原因吗？

[https://dl.dropbox.com/u/101619220/TestingServiceStack.zip](https://dl.dropbox.com/u/101619220/TestingServiceStack.zip)

编辑：感谢您的评论:)

我创建了一个简单的 AppHost 文件：

命名空间 TestingServiceStack { public class AppHost : AppHostBase { public AppHost() : base("StarterTemplate ASP.NET Host", typeof(CustomersService).Assembly) { }

```
 public override void Configure(Container container)
    {
        Plugins.Add(new ValidationFeature());
        Plugins.Add(new RequestLogsFeature());

        SetConfig(new EndpointHostConfig
            {
                DebugMode = true, //Enable StackTraces in development
            });

        LogManager.LogFactory = new Log4NetFactory(true);

        JsConfig.EmitCamelCaseNames = true;
        JsConfig.DateHandler = JsonDateHandler.ISO8601;

        Routes.Add<GetCustomers>("/customers", "GET")
              .Add<GetCustomers>("/customers/{Id}", "GET")
              .Add<AddCustomer>("/customers", "POST")
              .Add<UpdateCustomer>("/customers/{Id}", "PUT")
              .Add<DeleteCustomer>("/customers/{Id}", "DELETE");
    }

    public static void Start()
    {
        new AppHost().Init();
    }
} 
```

}

还有一项服务：

命名空间 TestingServiceStack { 公共类 CustomersService : 服务 { #region 日志记录

```
 private static readonly ILog Log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

    #endregion

    public object Any(GetCustomers request)
    {
        GetCustomersResponse response = null;
        try
        {
            if (request.Id != "0")
                throw HttpError.NotFound("Id {0} throws error".Fmt(request.Id));

            response = new GetCustomersResponse {Id = request.Id ?? "notset", Name = "GetCustomers"};
        }
        catch (Exception ex)
        {
            Log.Error(base.RequestContext.Get<IHttpRequest>(), ex);
            throw;
        }

        return response;
    }

    public object Any(AddCustomer request)
    {
        return new AddCustomerResponse {Id = request.Id, Name = "AddCustomer"};
    }

    public object Any(UpdateCustomer request)
    {
        return new UpdateCustomerResponse {Id = request.Id, Name = request.Name};
    }

    public object Any(DeleteCustomer request)
    {
        return new DeleteCustomerResponse {Id = request.Id, Name = "DeleteCustomer"};
    }
} 
```

}

交换的对象是：

使用 System.Runtime.Serialization；使用 ServiceStack.ServiceInterface.ServiceModel；

命名空间 TestingServiceStack { [DataContract] public class GetCustomers { [DataMember] public string Id { get; 放; } }

```
[DataContract]
public class UpdateCustomer
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }
}

[DataContract]
public class AddCustomer
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }
}

[DataContract]
public class DeleteCustomer
{
    [DataMember]
    public string Id { get; set; }
}

[DataContract]
public class GetCustomersResponse : IHasResponseStatus
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public ResponseStatus ResponseStatus { get; set; }
}

[DataContract]
public class UpdateCustomerResponse : IHasResponseStatus
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public ResponseStatus ResponseStatus { get; set; }
}

[DataContract]
public class AddCustomerResponse : IHasResponseStatus
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public ResponseStatus ResponseStatus { get; set; }
}

[DataContract]
public class DeleteCustomerResponse : IHasResponseStatus
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public ResponseStatus ResponseStatus { get; set; }
} 
```

}

我使用 SoapUi 调用 GetCustomers 方法，如果 id 等于 0，则会引发错误，我希望设置 ResponseStatus，但事实并非如此。从 SoapUi 调用时，出现以下错误：

我不知道如何正确设置 reponsestatus，任何提示都表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:23:25.197

**我通过本书注册了所有插件，并且服务适用于 REST、Soap、CSV、XML 和 JSV** 。为了回应 @mythz，通过错误或异常示例明确说明的问题来回答直接问题要容易得多。我对上述陈述/概括的问题是我不知道“按书本”是什么意思，也不知道您的工作概念是什么（可能构建成功，显示元数据页面等）

**未设置 ResponseStatus 并生成一般错误。**

在您的 CustomersService 类中，您似乎正在抛出错误 (HttpError) 并捕获/记录它。然后代码将继续返回空响应。ServiceStack 原生支持抛出异常。如果你添加一个`throw`到你的`catch`（假设你想保留捕获用于记录目的）你应该得到一个填充的 ResponseStatus。

```
 GetCustomersResponse response = null;
        try
        {
            if (request.Id != "0")
                throw HttpError.NotFound("Id {0} throws error".Fmt(request.Id));

            response = new GetCustomersResponse {Id = request.Id ?? "notset", Name = "GetCustomers"};
        }
        catch (Exception ex)
        {
            Log.Error(base.RequestContext.Get<IHttpRequest>(), ex);
            throw; //Let ServiceStack do its thing.
        }

        return response; 
```

**肥皂界面**

此更改可能会解决soapUI 的问题，但我不清楚您收到的“一般错误”是什么。我猜这个问题可能是由于“反序列化”一个空响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:30:03.077

ServiceStack 不支持使用 3rd 方 SOAP 库或客户端代理进行故障排除。

有关集成测试中的异常示例，请参阅[WebServicesTests.cs](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/WebServicesTests.cs)。对于 SOAP，您还需要阅读[ServiceStack 的 SOAP 支持及其限制](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T11:47:14.290

我们遇到了未填充 ResponseStatus 的问题 - 我们使用 DataContract/DataMember 修饰了 Response DTO，但没有使用 ResponseStatus 属性。一旦我们添加了那个装饰，一切都很愉快。

# ruby-on-rails - WEBrick 的 Rails 连接池大小

> ID：15774140
> 
> 赞同：0
> 
> 时间：2013-04-02T20:53:16.870
> 
> 标签：ruby-on-rails, database-connection, webrick

我正进入（状态

```
ActiveRecord::ConnectionTimeoutError (could not obtain a database connection within 5 seconds (waited 5.000798 seconds). The max pool size is currently 1; consider increasing it.) 
```

当我尝试使用池大小 1 运行 WEBrick（rails 服务器）时，并且池大小更大没有问题。

WEBrick 在什么上使用第一个连接，单线程应用程序的最佳池大小是多少？这是特定于 WEBrick 的问题，还是适用于任何其他服务器（如 Unicorn）？

Rails 版本是 3.2.13

更新。刚刚用独角兽验证了这一点，它适用于单连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:18:07.537

如果我没记错的话，Rails 会在启动时保留与数据库的连接，并使用连接池中剩余的可用连接来处理请求。即使您在请求的生命周期中从未接触过 ActiveRecord 对象，Rails 仍会尝试为每个请求从池中保留一个连接，或者会阻塞直到有一个可用，直到超时限制。

默认池大小为 5 个连接：1 个为 Rails 保留 + 4 个可用于请求。

Rails 这样做是为了维护应用程序中的线程安全。

如果您的应用程序是单线程的，并且一次只处理一个请求而不考虑并发性，那么池中的连接数应至少设置为 2。不过，我仍然建议使用默认值 5，这样您就有了一些喘息的空间，以防每个请求需要使用多个连接。

这不是 WEBrick 特有的。无论运行什么应用程序服务器，连接池限制对应用程序的影响都是相同的。

# php - 警告：getimagesize()。显示错误但上传。(PHP)

> ID：15774145
> 
> 赞同：2
> 
> 时间：2013-04-02T20:53:35.990
> 
> 标签：php, getimagesize

这里有一个非常奇怪的问题。是我上传照片的时候。当我上传照片时总是出现错误： **警告：getimagesize（C:\xampp\tmp\php2D6C.tmp）：无法打开流：C:\xampp\htdocs\classes\Funcoes.php 中没有这样的文件或目录第 545 行**

当我转到第 545 行时，它是“getimagesize()”方法。好吧，发生错误，但我实际上可以上传照片。我已经更改了很多次并且也删除了。

我做错了什么？（是的，权限是777）

```
 function UploadImagem()
{
  $Mensagem = "";
  $Error = array();
  $Data = new Database();
  $Usuario = $_SESSION["sessionUsuario"];

    $Foto = $_FILES["change_foto"];

        if (!empty($Foto["name"]))
        {
            $Largura = 1000;
            $Altura = 1000;
            $Tamanho = 350000; // 1000 = 1kb

            if(!preg_match("/^image\/(pjpeg|jpg|jpeg|png|gif|bmp)$/", $Foto["type"]))
            {
                    $Error[1] = "This is not an image.";
            }

            $Dimensoes = getimagesize($Foto["tmp_name"]); // LINE 545

                if($Dimensoes[0] > $Largura)
                    $Error[2] = "The max image width is " . $Largura . " pixels.";

                if($Dimensoes[1] > $Altura)
                    $Error[3] = "The max image height is " . $Altura . " pixels.";

                if($Foto["size"] > $Tamanho)
                    $Error[4] = "The max image size is " . $Tamanho . " bytes (or " . $Tamanho/1000 . " kilobytes).";

                if (count($Error) == 0)
                {
                    $Data->Conecta();

                    $PegarUsuarioID = "SELECT id_usuario, foto FROM usuarios WHERE nick = '$Usuario'";
                    $ResulPegarUsuarioID = mysql_query($PegarUsuarioID, $Data->link) or die (mysql_error());
                    $UsuarioID = mysql_result($ResulPegarUsuarioID, 0, 'id_usuario');
                    $FotoUsuario = mysql_result($ResulPegarUsuarioID, 0, 'foto');

                    preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $Foto["name"], $ext);

                    $NomeImagem = $UsuarioID . "." . $ext[1];
                    $PathImagem = "../uploads/images/" . $NomeImagem;

                    if (move_uploaded_file($Foto["tmp_name"], $PathImagem))
                    {
                        $InserirFotoUsuario = "UPDATE usuarios SET foto = '$NomeImagem' WHERE id_usuario = $UsuarioID";
                        $ResulInserirFotoUsuario = mysql_query($InserirFotoUsuario, $Data->link) or die (mysql_error());
                    }

                    $Data->Desconecta();

                    return "Correto";
                }
                else
                {
                    foreach ($Error as $Erro)
                        $Mensagem .=  $Erro . "<br />";

                    return $Mensagem;
                }
        }
} 
```

错误在此方法“UploadImagem()”中。先谢谢了。

# c# - MVC C# 应用程序，将文件内容放入字符串或列表

> ID：15774152
> 
> 赞同：0
> 
> 时间：2013-04-02T20:53:50.053
> 
> 标签：c#, asp.net-mvc

我正在使用以下方法将文件上传到控制器中 -

```
 [HttpPost]
    public ActionResult Index(HttpPostedFileBase file)
    {
        if (file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);

            //I want to put file contents into a string or List<string>

        }
    } 
```

我想要么将文件的内容放入一个字符串中，然后遍历该字符串，这将是一个分隔列表，

*或者*

循环遍历传入的流本身，从中创建一个字符串列表。我也不知道该怎么做。我想我会`file.InputStream`以某种方式使用？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:00:54.220

尝试使用`StreamReader`，像这样：

```
string s = (new StreamReader(file.InputStream)).ReadToEnd();
string[] ss = s.Split(","); // replace "," with your separator; 
```

# c++ - WT 小部件未在 boost 线程中更新

> ID：15774153
> 
> 赞同：0
> 
> 时间：2013-04-02T20:53:56.057
> 
> 标签：c++, widget, boost-thread, wt

我遇到了一个有趣的 WT 问题，我已经解决了，但我不明白为什么我的解决方案解决了这个问题。我已经翻阅了小部件的 WT 文档并且到目前为止空手而归，所以也许对 WT 有更多了解的人可以在这里帮助我。

无论如何，问题在于提升线程中的 WComboBox 小部件在单击并更改其选择时未更新其数据。

我在一个类中创建了一个提升线程

```
 class MyConsole: public WApplication
    {
    private:
    boost::shared_ptr<boost::thread> _thread;
    WComboBox* _combo_box;
    bool running;

    //Thread function
    void my_thread(Wt::WApplication *app);
    } 
```

然后我用数据填充组合框，让我们使用“foo”和“goya”作为 2 个条目。我为线程创建了一个函数，并在其中放入了一个循环。

```
 void MyConsole::my_thread(Wt::WApplication *app)
    {
     while(running)
     {
      std::string test;
      Wt::WApplication::UpdateLock lock(app);
      if(lock)
      {
       test = _combo_box->valueText().narrow();
      }
      if (strcmp("foo", test.c_str()) == 0)
      {
        cout << "we got foo" << endl;
      }
      else if (strcmp("goya", test.c_str()) == 0)
      {
        cout << "we got goya" << endl;
      }
     }
    } 
```

在不改变组合框的初始选择的情况下，上面的代码总是进入 foo if 语句，这是意料之中的。但是，当我将 _combo_box 的选择更改为“goya”时，上面的代码仍然输入“foo” if 语句，这是非常意外的。进一步调查此事，例如在 if 语句之前打印出组合框的当前索引显示它始终为 0，并且在选择更改时永远不会增加。

我修复它的方法是将组合框 changed() 信号连接到我添加到类中的无操作函数。

```
 class MyConsole: public WApplication
    {
    private:
    ...
    void WWidgetForceUpdate(void)
    {

    }
    ...
    }
    ...
    _combo_box->changed().connect(this, &MyConsole::WWidgetForceUpdate); 
```

通过在选择更改时添加该函数调用，“foo”和“goya” if 语句正常工作，并在 if 语句确认索引现在正在更改之前打印出组合框的当前索引。

为什么将 changed() 信号连接到无操作函数可以解决这种情况？我确信这里没有看到更大的问题:(任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:47:52.227

当事件发生时，Wt 将更改从浏览器发送到服务器。如果您的程序对某个事件不感兴趣，则不会发生这种同步（否则，您在输入框中输入的文本的每个字符，每次鼠标移动，......即使您的应用程序没有进行同步，也会发生同步任何东西）。没有连接到 changed() 意味着对该特定事件没有任何兴趣，并且浏览器在发生时不会通知服务器。

正在侦听的任何事件都会将所有小部件的所有更改发送到服务器，以便同步完整的小部件树。因此，如果您有一个带有 clicked() 侦听器的按钮和一个没有 changed() 侦听器的组合框，那么当您单击按钮时，组合框的状态仍将在小部件树中更新。

但是，您的代码中有一个错误：您不能只从随机线程访问小部件树而不获取更新锁 (WApplication::UpdateLock)。

# sql - 基于选择更新的 SQL Server 查询 - 问题

> ID：15774155
> 
> 赞同：1
> 
> 时间：2013-04-02T20:54:01.147
> 
> 标签：sql, sql-server, sql-update

我正在编写一个查询，该查询基本上将 EstimatedDepartureDate 的所有日期字段更新为指定日期。我正在使用我创建的视图来提取帐户列表以更新并针对包含所有员工记录的 tnpEmployee 表运行它。但是，在运行此查询时，它始终具有类似于以下内容的输出：

> （1 行受影响）
> 
> （55 行受影响）

例如，它首先影响一行，然后影响其余的行。当我在我创建的视图中运行 SQL 以查看感兴趣的人员列表时，每次运行查询时它会减少一条记录，并且在该底部（受影响的 55 行）中减少一条记录)，因此下一次运行将显示 54。

这是我正在运行的查询：

```
UPDATE tnpEmployee 
SET tnpEmployee.EstimatedDepartureDate='2014-04-01 13:37:43.000'
FROM tnpEmployee
INNER JOIN vnpGetActiveAccountsAgainstToBeDisabled
ON tnpEmployee.EmployeeID=vnpGetActiveAccountsAgainstToBeDisabled.EmployeeID
WHERE tnpEmployee.Email=vnpGetActiveAccountsAgainstToBeDisabled.Email 
```

任何帮助将不胜感激，它正在杀死我！所需要做的就是让行设置该日期字段，仅此而已，它们应该都填充在我创建的非常基本的视图中，而不是每次运行时都少一个。此外，当我运行该视图并减少一条记录时，所有记录都已更新为新日期..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:33:53.443

您可以尝试重写您的 SQL 语句：

```
UPDATE tnpEmployee 
SET tnpEmployee.EstimatedDepartureDate='2014-04-01 13:37:43.000'
WHERE tnpEmployee.EmployeeID IN (
SELECT vnpGetActiveAccountsAgainstToBeDisabled.EmployeeID
FROM vnpGetActiveAccountsAgainstToBeDisabled
WHERE tnpEmployee.Email=vnpGetActiveAccountsAgainstToBeDisabled.Email
); 
```

正如专家已经建议的那样，您的结果看起来像是您的查询调用了触发器。

# c# - 依赖失败尝试的异常是返回布尔值的可接受方式吗？

> ID：15774160
> 
> 赞同：1
> 
> 时间：2013-04-02T20:54:06.583
> 
> 标签：c#, refactoring, compact-framework, windows-ce, .net-1.0

这个查询：

```
string.Format("SELECT COUNT(*) FROM {0}", tableName); 
```

...我将其用作“isValidTable(string tableName)”方法的核心，如果 tableName 不存在（特别是“指定的表不存在”），则会引发异常。

既然如此（它玩得不好，如果它不识别表名，它就会举手）让我想知道这段代码是否：

```
public bool isValidTable(string tableName)
{
    bool validTable = false;
    string tblQuery = string.Format("SELECT COUNT(*) FROM {0}", tableName);
    try
    {
        SqlCeCommand cmd = new SqlCeCommand();
        cmd.CommandText = tblQuery;
        object objcnt = cmd.ExecuteScalar();
        if ((objcnt != null) && (objcnt != DBNull.Value)) 
        {
            validTable = Int32.Parse(objcnt.ToString()) > 0;
        } 
        else 
        {
            MessageBox.Show("NULL returned from isValidTable(). Remove this line."); //<- I never see this; if this is the case, an exception has been thrown
        }
    }
    catch 
    {
        return false;
    }
    return validTable;
} 
```

...可以/应该简化为：

```
public bool isValidTable(string tableName)
{
    string tblQuery = string.Format("SELECT COUNT(*) FROM {0}", tableName);
    try
    {
        SqlCeCommand cmd = new SqlCeCommand();
        cmd.CommandText = tblQuery;
        cmd.ExecuteScalar();
    }
    catch 
    {
        return false;
    }
    return true;
} 
```

?

## 更新

jp2code 认为：“在存在时选择案例（（从 information_schema.tables 中选择 *，其中 table_name = '{0}'））然后 1 else 0 end”

是否有类似的代码来检查列是否存在？目前我的 isValidTable() 和 isValidColumn() 查询是相似的：

```
string tableQuery = string.Format("SELECT COUNT(*) FROM {0}", tableName);
string columnQuery = string.Format("SELECT COUNT({0}) FROM {1}", columnName, tableName); 
```

...但是如果我能够将其用于 isValidTable()：

```
string.Format("select case when exists((select * from information_schema.tables where table_name = '{0}')) then 1 else 0 end",
tableName); 
```

...是否还有可用于检查有效列的扩展？就像是：

```
string.Format("select case when exists((select * from information_schema.tables where table_name = '{0}' and column_name = '{1}')) then 1 else 0 end",
tableName, columnName); 
```

？？？

## 更新 2

我意识到建议的 sql 比“我的方式”“更好”，但无论出于何种原因，当我使用“首选方法”时，所需的数据表不会被识别为存在（尽管它们确实存在） . 我正在使用的旧版软件不接受嵌套选择/子选择，或者......？？？

无论如何，评论讲述了这个故事：

```
string tblQuery = string.Format("SELECT COUNT(*) FROM {0}", tableName);
// This is doubtless "more better," but when I use it, I get "No current work; no inventory file"
//string tblQuery = string.Format("select case when exists((select * from information_schema.tables where table_name = '{0}')) then 1 else 0 end", tableName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:11:29.850

您应该只对异常（超出规范）的事物使用异常，无法找到表被认为是该方法的正常执行，因此不应依赖异常发生。

对于您的示例来说，超出标准的事情是连接超时，这不是您的方法的标准操作。

相反，您应该查询`sys.tables`or`INFORMATION_SCHEMA.TABLES`表以查看您的表是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:04:52.983

如果我遇到同样的问题，我更喜欢在系统表中查找，正如 Matthew 指出的那样，检查表是否存在，以及我使用的数据库是否不给我这样做的可能性，我将通过创建一个跟踪现有表的表来模拟它。查询该表，而不是将代码包装在 by try catch 块中。不是一个优雅的解决方案，但在我谦虚的角度来看更干净

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:34:54.827

如果您继续使用它，至少指定一个`SqlCeException`您捕获并忽略的，这样您就不会在不知不觉中忽略可能发生的其他错误。

至于检查表是否存在，请参阅这篇热门帖子：

[检查 SQL Server 中是否存在表](https://stackoverflow.com/q/167576/153923)

真的，如果你的代码有效，你就不应该有任何例外。所以在调试并且你的代码准备好发布之后，它应该看起来更像这样：

```
public bool isValidTable(string tableName)
{
  bool validTable = false;
  string tblQuery =
    string.Format("select case when exists((select * from information_schema.tables where table_name = '{0}')) then 1 else 0 end",
    tableName);
  SqlCeCommand cmd = new SqlCeCommand();
  cmd.CommandText = tblQuery;
  try
  {
    cmd.Connection.Open();
    object objcnt = cmd.ExecuteScalar();
    if ((objcnt != null) && (objcnt != DBNull.Value)) 
    {
      validTable = Int32.Parse(objcnt.ToString()) > 0;
    } 
  }
  finally
  {
    cmd.Connection.Close();
  }
  return validTable;
} 
```

该特定 SQL 查询使用此 SO question 的解决方案：

[检查是否存在 SQL 表](https://stackoverflow.com/q/464474/153923)

**更新：这个**[DataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedatareader%28v=vs.71%29.aspx) Check 例程怎么样：

```
public bool isValidTable(string tableName)
{
  bool validTable = false;
  string tblQuery =
    string.Format("select * from information_schema.tables where table_name='{0}'",
    tableName);
  SqlCeCommand cmd = new SqlCeCommand();
  cmd.CommandText = tblQuery;
  try
  {
    cmd.Connection.Open();
    // I don't know if this works because I don't have .NET 1.1
    SqlCeDataReader r = cmd.ExecuteReader();
    validTable = r.Read();
  }
  finally
  {
    cmd.Connection.Close();
  }
  return validTable;
} 
```

[MSDN 上关于 DataReader 1.1](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedatareader.read%28v=vs.71%29.aspx)的文档说（在备注中）*SqlCeDataReader 的默认位置在第一条记录之前。要开始访问任何数据，您必须调用 Read。*因此，它应该从 Index = -1 开始，并且需要一个 Read 调用才能进入数据的第一步。

# regex - .htaccess 漂亮的 URL 无法通过重定向正确显示

> ID：15774161
> 
> 赞同：0
> 
> 时间：2013-04-02T20:54:07.760
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试使用 mod_rewrite 在我的 .htaccess 文件中配置动态 mod 重写规则。我非常接近弄清楚这一点。我正在尝试获取这样的 URL：

```
http://www.mysite.com/index.php?service=14&title=events
http://www.mysite.com/index.php?service=48&title=planning 
```

要自动重写为这些：

```
http://www.mysite.com/service/14/events
http://www.mysite.com/service/48/planning 
```

到目前为止，这是我的代码：

```
RewriteRule ^service/(.*)/(.*)$ index.php?service=$1&title=$2 [NC,L]
RewriteCond %{QUERY_STRING} ^service=$1&title=$2 [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index.php [NC]
RewriteRule ^index.php$ /service/$1/$2 [L,R=301] 
```

我认为最后一行可能有问题？我不是最擅长正则表达式，所以任何帮助将不胜感激。编辑：只是想清楚漂亮的 URL 确实有效。但是，旧 URL 不会重定向，并且仍在浏览器中显示。

我不确定这是否会更容易，但如果我能让 URL 看起来像这样：

```
http://www.mysite.com/service/14/title/events
http://www.mysite.com/service/48/title/planning 
```

那么这也行得通。我真的不需要将第二个查询标题放在 URL 中，但如果将其留在 URL 中更容易，那就没什么大不了的。

**编辑：已回答非常感谢所有为解决方案做出贡献的人。我为我的重写规则得到了这个：**

```
RewriteRule ^index/service/(.*)/(.*)/$ index.php?service=$1&title=$2 
```

**一旦我添加了“索引”，它就可以与两个查询字符串一起使用。就重定向而言，我编辑了我的 php 脚本并在那里进行了所有 URL 重定向，这要容易得多。特别感谢 mkjasinski 指出这一点。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:25:45.203

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^service/([0-9]+?)?/([a-zA-Z\-]+?)$ index.php?service=$1&title=$2 [L,NC] 
```

如果我已经运行：`http://localhost/service/12/This-is-text`in `$_GET`in `index.php`：

```
array (size=2)
  'service' => string '12' (length=2)
  'title' => string 'This-is-text' (length=12) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:57:21.157

您不能将以前重写规则中的特殊持有者（$1，$2...）用于 rewritecond。

将您的代码更改为：

```
RewriteRule ^service/(.*)/(.*)$ index.php?service=$1&title=$2 [NC,L]

RewriteCond %{QUERY_STRING}  (?:^|&)service=([0-9]+)(&|$) [NC]
RewriteCond %{QUERY_STRING}  (?:^|&)title=([a-z]+)(&|$) [NC]   
RewriteRule ^index.php$ /service/%1/%3? [L,R=301] 
```

# java - 配置 Apache Camel 死信处理程序

> ID：15774163
> 
> 赞同：1
> 
> 时间：2013-04-02T20:54:08.647
> 
> 标签：java, apache-camel, smooks, dead-letter

我使用 Spring DSL 定义了以下路由：

```
<camelContext id="myapp-camel-ctx" errorHandlerRef="deadLetterErrorHandler"
xmlns="http://camel.apache.org/schema/spring">
    <route id="myapp-camel-route">
        <from uri="timer://runOnce?repeatCount=1&amp;delay=10" />

        <to uri="bean:fizzBean?method=doFizz" />

        <!-- What I call the "Smooks processor" -->
        <to uri="smooks://my-smooks-config.xml" />

        <to uri="bean:buzzBean?method=doBuzz" />
    </route>
</camelContext>

<bean id="deadLetterErrorHandler" class="org.apache.camel.builder.DeadLetterChannelBuilder">
    <property name="deadLetterUri" value="bean:errorCatcher" />
</bean>

<bean id="errorCatcher" class="com.me.myorg.myapp.ErrorCatcher">
    <property name="foo" value="BAR" />
</bean> 
```

有时，根据 的输出（出站消息）`fizzBean`，Smooks 处理器会抛出异常并挂起整个应用程序。当它这样做时，我可以在应用程序日志中看到抛出的异常（它实际上是一个 MySQL 异常），但不知道如何包装/捕获它并继续处理。我*认为*，鉴于`ErrorCatcher`上面的设置，抛出的 MySQL 异常将被处理，并且路由将继续处理。相反，我从来没有在我的应用程序日志中看到`ErrorCatcher#handle`当这些 Smooks/MySQL 异常被抛出时该方法被执行的证据。

我在这里配置了什么不正确吗？我还能做些什么（通过 Smooks 处理器的 URI 配置或其他方式）来防止从该处理器内部引发的异常挂起整个应用程序？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:08:29.167

这取决于 Smooks 团队如何实现他们的 Camel 组件。Camel 错误处理程序仅在引发异常时才会启动，C​​amel 可以捕获该异常；或者使用 setException 在 Exchange 上显式设置了异常。如果 Smooks 不这样做（也许他们捕获了异常，并且不将其传播回 Camel），那么 Camel 就无法检测到该异常并对其做出反应。

如果您想查看运行时发生的情况，可以启用跟踪器 [http://camel.apache.org/tracer](http://camel.apache.org/tracer)

另请注意，当您使用 bean 通过错误处理程序处理异常时。然后阅读此常见问题解答如何访问导致的异常：[http ://camel.apache.org/why-is-the-exception-null-when-i-use-oneexception.html](http://camel.apache.org/why-is-the-exception-null-when-i-use-onexception.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:25:39.600

您的配置似乎是正确的，如果您想查看它是否有效，您可以更改您的句柄方法签名，如下所示

```
public void handle(Exception exception, Exchange exchange) {
    System.out.println("Got Exception..."+exception.getMessage());
    System.out.println("Exchange is :"+exchange);
    } 
```

现在您可以在控制台上看到结果...

# c# - 在网格视图中格式化标签以隐藏社会安全号码的前 5 位数字

> ID：15774164
> 
> 赞同：0
> 
> 时间：2013-04-02T20:54:09.770
> 
> 标签：c#, asp.net

我在显示社会安全号码的 griview 的模板字段中有一个数据绑定标签。它目前显示的是 SSN，即 123-45-6789。我需要隐藏前 5 位数字，使其显示为 ###-##-6789。有没有人有我如何做到这一点的例子。

这是模板字段的标记：

```
 <asp:TemplateField HeaderText="Social Security Number" SortExpression="SSN">
         <ItemTemplate>
              <asp:Label ID="lblSSN" runat="server" Text='<%# Bind("SSN") %>'></asp:Label>
         </ItemTemplate>
    </asp:TemplateField> 
```

将解密的 SSN 添加到网格的代码块：

```
 table.Columns.Add("SSN");
            foreach (DataRow row in table.Rows)
            {
                row["SSN"] = DecryptSSN(row["EncryptedSSN"].ToString());                   
                row.AcceptChanges();
            } 
```

我是编程新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:05:35.210

这是一个辅助方法。

```
public static string GetMaskedNumber(string number)
{
    if (String.IsNullOrEmpty(number))
        return string.Empty;

    if (number.Length <= 5)
        return number;

    string last5 = number.Substring(number.Length - 5, 5);
    var maskedChars = new StringBuilder();
    for (int i = 0; i < number.Length - 5; i++)
    {
        maskedChars.Append(number[i] == '-' ? "-" : "#");
    }
    return maskedChars + last5;
} 
```

## 结果

123-123-1234 到 ###-##-1234

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:59:42.153

使用它并替换`row["SSN"]`下面的代码，您可以使用它来测试它的功能，因此如果值为`"123-45-6789"`

```
foreach (DataRow row in table.Rows)
{
    var newMaskedSSN = DecryptSSN(row["EncryptedSSN"].ToString().Replace("-", string.Empty)); 
    if (newMaskedSSN.Length > 4)
    {
        Console.WriteLine(
            string.Concat(
               "".PadLeft(9, '*'), 
        newMaskedSSN.Substring(newMaskedSSN.Length - 4)));
        row["SSN"] = newMaskedSSN; 
        row.AcceptChanges();
    }
} 
```

`results: *****6789`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:17:20.543

这个怎么样？

```
 select '###-##-'+right(ssn_coumn,4) as ssn  from your_table 
```

# vim - Vim 编程编辑器速度

> ID：15774167
> 
> 赞同：5
> 
> 时间：2013-04-02T20:54:24.287
> 
> 标签：vimrc时，, vim, , sh, vimrc, vim, osx, bash, vim

**问题是：当我将以下行添加到我的[vimrc时，](/questions/tagged/vimrc "show questions tagged 'vimrc'") [vim](/questions/tagged/vim "显示标记为“vim”的问题")变慢了：**

```
set foldmethod=syntax 
set foldlevelstart=1 
let javaScript_fold=1 " JavaScript 
let perl_fold=1 " Perl 
let php_folding=1 " PHP 
let r_syntax_folding=1 " R 
let ruby_fold=1 " Ruby 
let sh_fold_enabled=1 " sh 
let vimsyn_folding='af' " Vim script 
let xml_syntax_folding=1 " XML 
```

上下文：*在编辑* [sh](/questions/tagged/sh "显示标记为“sh”的问题") *文件时*

我认为在以下情况下放慢速度是公平的：

*   打开一个新文件，重新计算基于语法的折叠（例如折叠函数 defs）
*   创建一个新的函数定义

……但是……让它*无处不在*？

您是否使用/看到相同的内容？如果有的话，可以做些什么来改善这种呆滞状态？

* * *

*我花了一天的时间来确定这一点，并在我的（虚拟和非）机器上的任何地方成功地复制它，通过* [vimrc](/questions/tagged/vimrc "显示标记为“vimrc”的问题") *二进制搜索过程消除了导致整体缓慢的候选因素。*

* * *

### 我的环境

[vim](/questions/tagged/vim "显示标记为“vim”的问题") **VIM - Vi IMproved 7.3（2010 年 8 月 15 日，2013 年 3 月 12 日 14:05:25 编译）**

[osx](/questions/tagged/osx "显示标记为“osx”的问题") **OS X v10.8.3 (build 12D78)**

[bash](/questions/tagged/bash "显示标记为“bash”的问题") **v3.2.48(1)-发布**

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:20:54.130

你可以玩一些[自动命令](http://vimdoc.sourceforge.net/htmldoc/autocmd.html)。根据文件类型开启功能，vim可以提速。例子：

```
autocmd BufRead *.pt set filetype=xml
au FileType xml setlocal foldmethod=syntax 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:03:30.673

```
set foldmethod=indent 
```

比`syntax`.

另外，添加`" PHP`after有什么意义`let php_folding=1`？

不管怎样，你应该给自己买[一个合适的 Vim](http://code.google.com/p/macvim/)：Mac OS X 提供的那个既过时又残废。使用最新的可用版本可能无法解决您的问题，但它为询问和提供帮助提供了最佳基准。

# mongodb - mongodb：删除具有多个条件的整个子元素

> ID：15774168
> 
> 赞同：0
> 
> 时间：2013-04-02T20:54:24.740
> 
> 标签：mongodb

今天是我使用 MongoDB 的第一天

我的收藏格式：

```
{ "_id" : "ObjectId" :"4f2ff1d00cf2f86576f91a91"),
"fishStuff" : [
{
    "name" : "GreatWhite",
    "fID" : 50
},
{
    "name" : "Hammerhead",
    "fID" : 51
},
{
    "name" : "White",
    "fID" : 60
}
], "fishSpecies" : "Oceanic" 
```

...

我想在shell（直接mongo）中编写一个查询，它将删除第三个孩子（名字：White），因为第一个孩子存在于这组“fishStuff”中。

我相信“where”子句应该是：

{fishSpecies:"Oceanic","fishStuff.fID":50, "fishStuff.fID:60}

那么如何删除整个“60”子元素呢？当“50”也在同一个“fishStuff”组/数组中时，我想删除集合中的每个“60”元素。此外，我在“where”子句中包含 fishSpecies 的原因是因为 fishSpecies 的可能性不止一种。

更新：

我已经尝试了下面两位评论者留下的建议，仍然得到 7 个包含 fID 50 和 60 的子对象集实例（在运行下面的计数之后）：

```
> db.fish.update({fishSpecies:"oceanic","fishStuff.fID":50}, {$pull : {"fishStuff" : { fID : 60}}},false, true)
> db.fish.find({"fishSpecies":"oceanic","fishStuff.fID":50, "fishStuff.fID":60}).count()
7 
```

multi: true 标志不起作用（或者我没有正确实现它），因为更新了零记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:26:46.387

如果您尝试根据它的序号位置（索引）删除，那么您不能直接删除。

您可以使用一种技术 $unset 数组中的项目，然后 $pull 它。

```
db.mycollection.update({}, {$unset : {"fishStuff.50" : 1 }})
db.mycollection.update({}, {$pull : {"fishStuff" : null}}) 
```

值得注意的是，这没有考虑 fId，仅依赖于文档在数组中的位置。

要提取与您的 fId 匹配的项目，您需要：

```
 db.mycollection.update({}, {$pull : {"fishStuff" : { fId : 50}}}) 
```

编辑：

如果您想从文档数组包含 fId == 50 和 fId == 60 的数组中删除 fId == 50 的元素，您应该能够：

```
db.mycollection.update({
    "fishSpecies":"oceanic",
    "fishStuff.fId": { $all : [50,60]}}, 
    // update
    {$pull : {"fishStuff" : { fId : 50}}
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:03:46.297

我相信这就是你要找的...

检查 mycollection 中匹配 fishSpecies 与 Oceanic AND fID = 50 的文档 - 如果是，则删除 fID = 60 元素。multi:true 扫描整个集合。

```
db.mycollection.update({'fishSpecies': 'Oceanic','fishStuff':{fID:50}}, {$pull:{'fishStuff': {fID: 60}}}, {multi:true}) 
```

# svg - d3.js - 单击时缩放和居中 - 地图比例，点不

> ID：15774169
> 
> 赞同：1
> 
> 时间：2013-04-02T20:54:27.087
> 
> 标签：svg, maps, d3.js, zooming, map-projections

我正在调整[http://bl.ocks.org/mbostock/2206340](http://bl.ocks.org/mbostock/2206340)上的可缩放和可点击地图来绘制一些点并做一些其他事情。现在，我正在尝试使其在缩放和单击操作中，绘制的点也移动/尊重缩放。我不确定这里的代码有什么问题，因为我似乎在缩放 + 单击中调用 red.circle 和 blue.circle 对象 - 任何人都可以识别问题吗？谢谢！data.csv 的格式如下：

```
lon_0,lat_0,lon_1,lat_1
-122.1430195,37.4418834,-122.415278,37.778643
-122.1430195,37.4418834,-122.40815,37.785034
-122.4194155,37.7749295,-122.4330827,37.7851673
-122.4194155,37.7749295,-122.4330827,37.7851673
-118.4911912,34.0194543,-118.3672828,33.9164666
-121.8374777,39.7284944,-121.8498415,39.7241178
-115.172816,36.114646,-115.078011,36.1586877 
```

这是 d3.js 脚本。

```
.background {
  fill: none;
  pointer-events: all; 
}

#states path {
  fill: #aaa;
  stroke: #fff;
  stroke-width: 1.5px;
}

#states path:hover {
  stroke: white;
}

</style>
<body>
<script>

var width = 1920/2,
    height = 1000/2;

var projection = d3.geo.albersUsa()
    .scale(width)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var zoom = d3.behavior.zoom()
    .translate(projection.translate())
    .scale(projection.scale())
    .scaleExtent([height, 50 * height])
    .on("zoom", zoom);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .attr("style", "stroke:black; stroke-width:2px");

var states = svg.append("g")
    .attr("id", "states")
    .call(zoom);

var dataset = [];

states.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height);

d3.json("us-states.json", function(json) {

  states.selectAll("path")
      .data(json.features)
    .enter().append("path")
      .attr("d", path)
      .on("click", click);

 d3.csv("data.csv", function(data) {
   states.selectAll(".blue.circle")
     .data(data)
     .enter()
     .append("circle")
     .attr("cx", function(d) {
               return projection([d["lon_0"], d["lat_0"] ])[0];
               })
     .attr("cy", function(d) {
               return projection([d["lon_0"],d["lat_0"] ])[1];
               })
     .attr("r", 5)
     .attr("class", "blue circle")
     .style("fill", "blue");
   states.selectAll(".red.circle")
     .data(data)
     .enter()
     .append("circle")
     .attr("cx", function(d) {
               return projection([+d["lon_1"], +d["lat_1"] ])[0];
               })
     .attr("cy", function(d) {
               return projection([+d["lon_1"],+d["lat_1"] ])[1];
               })
     .attr("r", 5)
     .attr("class", "red circle")
     .style("fill", "red");
  });

});

function click(d) {
  var centroid = path.centroid(d),
      translate = projection.translate();

  projection.translate([
    translate[0] - centroid[0] + width / 2,
    translate[1] - centroid[1] + height / 2
  ]);

  zoom.translate(projection.translate());

  states.selectAll("path").transition()
        .duration(1000)
        .attr("d", path);

  states.selectAll("red.circle").transition()
        .duration(1000)
        .attr("d", circle);
  states.selectAll("blue.circle").transition()
        .duration(1000)
        .attr("d", circle);       

}

function zoom() {
  projection.translate(d3.event.translate).scale(d3.event.scale);
  states.selectAll("path").attr("d", path);
  states.selectAll("red.circle").attr("d", path);
  states.selectAll("blue.circle").attr("d",path);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T17:14:47.070

您在加载地图时正在设置圆圈的坐标，因此当您单击缩放功能时，会显示您的圆圈但不使用相同的坐标 - 我认为 - 如果您可以创建一个[http://bl.ocks.org](http://bl.ocks.org)看到这个。

也许这可能会有所帮助[http://bl.ocks.org/nkhine/3150901](http://bl.ocks.org/nkhine/3150901)只有英国、美国和阿富汗有效，但我基本上是重新投影辅助地图以适应新的缩放级别。

# c# - Unity & Prism Modularity - 负载问题

> ID：15774171
> 
> 赞同：0
> 
> 时间：2013-04-02T20:54:30.063
> 
> 标签：c#, wpf, prism, unity-container

我再次需要你的帮助。我正在开发一个具有模块化概念的应用程序。

我想为此使用 Prism 和 Unity。我查看了 Prism 的快速入门示例，还阅读了 MSDN 上的这篇[文章](http://msdn.microsoft.com/en-us/library/gg405479%28v=pandp.40%29.aspx)。

我的实际代码如下所示：

```
public class Bootstrapper : UnityBootstrapper
{
    protected override DependencyObject CreateShell()
    {
        return this.Container.Resolve<Shell>();
    }

    protected override void InitializeShell()
    {
        base.InitializeShell();

        var window = this.Shell as Window;
        if (window != null)
        {
            Application.Current.MainWindow = window;
        }
        else
        {
            throw new ArgumentException("The shell has to be a window.");
        }
    }

    protected override IModuleCatalog CreateModuleCatalog()
    {
        return new ConfigurationModuleCatalog();
    } 
} 
```

我的配置：

```
<configuration>
  <configSections>
    <section name="modules" 
             type="Microsoft.Practices.Prism.Modularity.ModulesConfigurationSection, Microsoft.Practices.Prism"/>
  </configSections>
  <modules>
    <module assemblyFile="Modules/MyApp.Module1.dll"
            moduleType="MyApp.Module1.Module1Module, MyApp.Module1"
            moduleName="Module1" />
  </modules>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
</configuration> 
```

我现在有两个问题，第一个是目录没有正确加载。对我来说，似乎没有调用 load 方法，或者类似的东西。

第二个问题是我认为第一个问题的结果，即我的模块中的初始化方法没有被调用。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:12:42.140

我在 Desktop Prism 项目中采用了您的代码，但它按预期工作。

在您的应用程序的某个地方，您将需要（至少）：

```
var bootstrapper = new Bootstrapper();
bootstrapper.Run(); 
```

我相信对于 config 部分，默认是在启动时加载模块，所以一旦 Bootstrapper 运行，你的模块应该被加载和初始化。这正是我在当地发生的事情。

这就是我的模块“初始化”的样子：

```
using System;
using System.Windows;
using Microsoft.Practices.Prism.Modularity;

namespace MyApp.Module1
{
    class Module1Module : IModule
    {
        public void Initialize()
        {
            MessageBox.Show("Hello world!");
        }
    }
} 
```

最后要检查的一件事是查看它是否可以在它正在查找的目录中找到 ，但如果不是这种情况`MyApp.Module1.dll`，您会在第一次机会异常`ModuleTypeLoadingException`之后 得到一个。`FileNotFoundException`

**编辑：**这是我制作的测试解决方案[的完整源代码](http://www.subbot.net/personal/external/stackoverflow/PrismSandbox.zip)。我想不出有什么区别使它对我有用，但对你没有用。看看这个。

# ios - ios: NSLog 显示十进制值

> ID：15774175
> 
> 赞同：0
> 
> 时间：2013-04-02T20:54:50.803
> 
> 标签：ios, nslog, nsdecimalnumber

```
NSNumber *weekNum = [dictionary valueForKey:@"inSeasonFor"];
NSDecimalNumber *newWeekNum = ([weekNum intValue]  *2)/4;
NSLog(@"%", [newWeekNum decimalValue]); 
```

如何将 weekNum*2 除以 4 并保留十进制值并打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:58:03.163

你的意思是你也想要小数部分，对吧？

```
NSNumber *weekNum = [dictionary valueForKey:@"inSeasonFor"];
// multiplication by 2 followed by division by 4 is division by 2
NSLog(@"%f", [weekNum intValue] / 2.0f); 
```

//我们也可以使用intfloat来解析。

# android - 如果带有 Google 地图的 Android 应用程序上的 GPS 关闭怎么办

> ID：15774178
> 
> 赞同：1
> 
> 时间：2013-04-02T20:54:56.100
> 
> 标签：android, google-maps, android-layout, android-edittext

如果 GPS 离线，我想要一个 GUI，以便用户可以输入当前地址。

我正在使用 Google 地图在 Eclipse 中构建一个 Android 应用程序。我的一项活动在打开时会显示一个地图视图。我想做的是如果 GPS 没有打开而不是加载地图我希望活动显示一个 EditText 文本视图，用户可以在其中输入他们当前位置的地址，然后地图视图会在输入后显示这个地址。我拥有所有逻辑来获取 GPS 布尔值以显示 GPS 是否打开，但我真正需要的是 Activity.java 和布局 xml 逻辑，它们将基于 GPS 开启显示这些 GUI 项目中的任何一个。因此，如果 GPS 在地图视图上将显示，如果 GPS 不在活动上，将显示一个区域以输入地址和一个按钮，一旦单击该按钮，此逻辑将在地图视图上显示用户输入的位置.

活动.java 文件

```
 @SuppressLint("ShowToast")
      public class MapViewActivity extends FragmentActivity {
            static LatLng currentLatLng;
            LatLng currentLocation;
            private GoogleMap map;
            boolean firstPass = true;
            double currentLat;
            double currentlong;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_view);

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    boolean isGPS = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);

    showCurrentLocationOnMap(); 
    try {
        showSheltersAndFuelStops();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
//This will change when SQL connection string is implemented.
private void showSheltersAndFuelStops() throws IOException {
    List<McDonalds> mcdList = new ArrayList<McDonalds>();
    List<Subway> subwayList = new ArrayList<Subway>();
    String subwayRoswell1 = "1307 N Main St, Roswell, NM, 88203";
    String subwayRoswell2 = "1701 W Second St, Roswell, NM, 88201";
    String subwayLC1 = "2001 E Lohman, Las Cruces, NM, 88001";
    String subwayLC2 = "2821 N Telshor, Las Cruces, NM 88011";
    String mcdonaldsRoswell1 = "720 N Main St, Roswell, NM, 88201";
    String mcdonaldsRoswell2 = "1804 S Main St, Roswell, NM, 88203";
    String mcdonaldsLC1 = "4810 Mesa Grande, Las Cruces, NM, 88012";
    String mcdonaldsLC2 = "571 Walton Blvd, Las Cruces, NM, 88001";

    Subway subway = new Subway(" 1307 N Main St, Roswell, NM, 88203", 1.58, 8.0);
    subwayList.add(subway);
    Subway subway1 = new Subway(" 1701 W Second St, Roswell, NM, 88201", 2.47, 12.0);
    subwayList.add(subway1);
    Subway subsLC = new Subway(" 2001 E Lohman, Las Cruces, NM, 88001", 147.99, 185.0);
    subwayList.add(subsLC);
    Subway subsLC1 = new Subway(" 2821 N Telshor Drive, Las Cruces, NM, 88011", 147.12, 200.0);
    subwayList.add(subsLC1);

    //This will be replaced by a Read Only Stored procedure that gets the List of Shelters
    McDonalds mcdonalds = new McDonalds(" 720 N Main St, Roswell, NM, 88201", 1.08, 8.0);
    mcdList.add(mcdonalds);
    McDonalds mcdonalds1 = new McDonalds(" 1804 S Main St, Roswell, NM, 88203", 2.9, 12.0);
    mcdList.add(mcdonalds1);
    McDonalds mcdonaldslc = new McDonalds(" 4810 Mesa Grande, Las Cruces, NM, 88012", 143.2, 185.0);
    mcdList.add(mcdonaldslc);
    McDonalds mcdonaldslc1 = new McDonalds(" 571 Walton Blvd, Las Cruces, NM, 88001", 147.62, 200.0);
    mcdList.add(mcdonaldslc1);

    showFuelStops(subwayRoswell1);
    showFuelStops(subwayRoswell2);
    showFuelStops(subwayLC1);
    showFuelStops(subwayLC2);
    showShelters(mcdonaldsRoswell1);
    showShelters(mcdonaldsRoswell2);
    showShelters(mcdonaldsLC1);
    showShelters(mcdonaldsLC2);
}

private void showFuelStops(String location) throws IOException{
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());  
    List<Address> addresses;

    addresses = geocoder.getFromLocationName(location, 1);
    if(addresses.size() > 0) {
        BitmapDescriptor subwayBitmapDescriptor = BitmapDescriptorFactory.fromResource(R.drawable.fillingstation);
        currentLat= addresses.get(0).getLatitude();
        currentlong= addresses.get(0).getLongitude();
        LatLng subLoc = new LatLng(currentLat, currentlong);
        Marker fuelMarker = map.addMarker(new MarkerOptions().position(subLoc).icon(subwayBitmapDescriptor).title("Subway, " + location));

    }       
}

private void showShelters(String location) throws IOException{
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());  
    List<Address> addresses;

    addresses = geocoder.getFromLocationName(location, 1);
    if(addresses.size() > 0) {
        BitmapDescriptor subwayBitmapDescriptor = BitmapDescriptorFactory.fromResource(R.drawable.shelter);
        double latitude= addresses.get(0).getLatitude();
        double longitude= addresses.get(0).getLongitude();
        LatLng subLoc = new LatLng(latitude, longitude);
        Marker hamburg = map.addMarker(new MarkerOptions().position(subLoc).icon(subwayBitmapDescriptor).title("McDonalds, " + location));

    }       
}

private void showCurrentLocationOnMap(){
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    SupportMapFragment mf= (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);

    map = mf.getMap();
    //map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    LocationListener ll = new Mylocationlistener();
    boolean isGPS = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);

    if (!isGPS){
        Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
        intent.putExtra("enabled", true);
        sendBroadcast(intent);
    }

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 10, ll);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.map_view, menu);
    return true;
}
/**
 *Mylocationlistener class will give the current GPS location 
 *with the help of Location Listener interface 
 */
private class Mylocationlistener implements LocationListener {
    private boolean zoomed = false;
    @Override
    public void onLocationChanged(Location location) {

        if (location != null) {
            // ---Get current location latitude, longitude---

            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
            currentLatLng = new LatLng(location.getLatitude(), location.getLongitude());
            Marker currentLocationMarker = map.addMarker(new MarkerOptions().position(currentLocation).title("Current Location"));
            // Move the camera instantly to hamburg with a zoom of 15.
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(currentLatLng, 15));
            // Zoom in, animating the camera.
            if (!zoomed) {
                map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);
                zoomed = true;
            }
            if (!firstPass){
                currentLocationMarker.remove();
            }
            firstPass = false;
            Toast.makeText(MapViewActivity.this,"Latitude = "+
                    location.getLatitude() + "" +"Longitude = "+ location.getLongitude(),
                    Toast.LENGTH_LONG).show();

        } else {

        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
      }

  } 
```

活动地图.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" >

     <fragment
         android:name="com.google.android.gms.maps.SupportMapFragment"
         android:id="@+id/map"
         android:layout_width="match_parent"
         android:layout_height="match_parent" />
 </LinearLayout> 
```

基于我在 Activity.java 文件中设置的 isGPS 布尔值，我可以将其用作布尔值开关。有没有办法根据需要更改 gui？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:21:16.727

你能告诉我如果用户输入地址会发生什么吗？它应该显示在地图上吧？但是为此，您需要获得相应的`LatLng`点。为此，您需要访问`GPS service`或至少访问网络服务以获取坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:59:13.060

当然有！只需根据 GPS 状态切换地图/编辑视图的可见性。例如，您可以让地图默认不可见，如下所示：

```
<fragment
         android:name="com.google.android.gms.maps.SupportMapFragment"
         android:id="@+id/map"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:visibility="gone" />
<EditText ...put stuff here... /> 
```

然后从您的代码中检查 GPS 是否已打开：

```
if (gpsIsOn)
{
    mapView.setVisibility(View.VISIBLE);
    editText.setVisibility(View.GONE);
} 
```

# .net - 是否可以以编程方式检查枚举是否设置了初始化程序？

> ID：15774182
> 
> 赞同：0
> 
> 时间：2013-04-02T20:55:12.840
> 
> 标签：.net, enums, initializer

我想将枚举作为 int 获取，但前提是它应用了初始化程序 - 这样我就知道该值是明确定义的，而不仅仅是默认值。这是因为我使用枚举来表示具有定义的 int 代码的映射。有没有办法用枚举做到这一点，或者我将不得不使用其他东西，比如字典？

这是一个示例 - 我有以下映射：

苹果 = 1，香蕉 = 2，梨 = 4，菠萝 = 7

我想确保如果枚举是

```
public enum Fruit
{
Apples,
Bananas,
Pears,
Pineapples
} 
```

它不会尝试获取 int 值，因为枚举中的值 1 对应于香蕉，而不是苹果，就像它应该的那样。让我知道我是否需要更清楚。

**更新：**

我使用可为空的枚举来检查值是否已设置（或未知元素），但这不是我在这里要问的。我不认为我解释得很好，所以我会再试一次。

我希望能够得到一个我一无所知的枚举，获取底层的 int 然后用它做一些事情。我唯一关心的是枚举已初始化，因为它告诉我它上面定义了实际代码。我不介意它是否为空。这是我检查的事情之一。但如果它不为空，我想确保显式定义 int 代码。代码 0 是完全可以接受的——即使这意味着它是未定义的——只要这是原始映射指定的。

**另一个更新：**

我从[Microsoft 文档](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.71%29.aspx)中得到了“初始化”这个术语，我认为它会引起混淆。我的意思是一个枚举，它具有明确定义的底层整数的值。IE，

```
public enum MyEnum
{
One = 1,
Two = 2,
Three = 3
} 
```

与没有的相反。IE，

```
public enum MyEnum
{
One,
Two,
Three
} 
```

我认为这也引起了混淆，我将这些称为设置了默认值，这很容易与默认设置第一个元素的不可空枚举混淆。

我使用它的方式是我有一个方法，它使用反射来获取具有某些自定义属性的属性的值。出于我的目的，我只想从具有明确定义代码的枚举中获取值。否则我不能假设 int 值具有任何商业意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:58:40.320

在 IL 级别，枚举只是一个整数（除非它被装箱）；你不能`0`从显式中区分隐式`0`。A `Nullable<SomeType>`(aka `SomeType?`) 可能是一个可行的想法。除此之外：你必须想出一些关于零与默认值的本地定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:58:55.793

枚举实际上是下面的序数值类型，因此它们不能是`null`，并且不能应用类似的解决方案。

最佳解决方案是添加对应于值 0 的枚举条目。例如

```
public enum Fruit
{
    Unknown = 0,
    Apples,
    Bananas,
    Pears,
    Pineapples
}

Fruit someFruit;
if (someFruit == Fruit.Unknown)
    Console.WriteLine("fruit is not initialized");
else
    Console.WriteLine("fruit is initialized"); 
```

另一种解决方法是将值包装到 Nullable 中。这样，您将允许将变量设置为`null`.

```
public enum Fruit
{
    Apples,
    Bananas,
    Pears,
    Pineapples
}

Fruit? someFruit;
if (!someFruit.HasValue)
    Console.WriteLine("fruit is not initialized");
else
    Console.WriteLine("fruit is initialized"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:18:18.490

（不可为空的）枚举值*始终*是有效整数。因此，可以获得枚举中任何常量都未使用的值：

```
Fruit myFruit = (Fruit)12345;    // Some random integer 
```

反过来：你*总是*可以得到任何枚举的整数值，不管它的值是否被定义为常量。

```
Fruit myFruit = (Fruit)12345;
int myFruitInt = (int)myFruit; 
```

因此，如果您想确保枚举的值是定义中定义的值之一`enum`，您可以使用[`Enum.IsDefined`方法](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)，如下所示：

```
Fruit myFruit;
bool isDefined;

myFruit = Fruit.Bananas;
isDefined = Enum.IsDefined(typeof(Fruit), myFruit); // true, Bananas

myFruit = (Fruit)1;
isDefined = Enum.IsDefined(typeof(Fruit), myFruit); // true, Bananas

myFruit = Fruit.Bananas | Fruit.Pineapples;
isDefined = Enum.IsDefined(typeof(Fruit), myFruit); // false

myFruit = (Fruit)12345;
isDefined = Enum.IsDefined(typeof(Fruit), myFruit); // false 
```

当然，您可以`Type`在方法中放入 any，而不仅仅是`typeof(Fruit)`.

* * *

你谈论*初始化*的枚举。哪有这回事。枚举可以有*任何*整数值。值类型（包括枚举）的默认值为 0。但完全有可能（甚至建议）存在一个值为 0 的枚举常量（通常命名为`None`，`Unknown`或`Default`）。因此，以下内容在语义上*完全相同*：

```
private Fruit myFruit;

private Fruit myFruit = (Fruit)0;

private Fruit myFruit = Fruit.Unknown; 
```

您无法在运行时分辨出区别，因为没有区别。

* * *

`enum`显然，关于状态的 MSDN 文档：

> 默认情况下，第一个枚举器的值为 0，之后每个枚举器的值都增加 1。例如，在以下枚举中，Sat 为 0，Sun 为 1，Mon 为 2，以此类推。
> 
> ```
> enum Days {Sat, Sun, Mon, Tue, Wed, Thu, Fri}; 
> ```
> 
> 枚举器可以使用*初始化器*来覆盖默认值，如下例所示。
> 
> ```
> enum Days {Sat=1, Sun, Mon, Tue, Wed, Thu, Fri}; 
> ```
> 
> 在此枚举中，元素的序列被强制从 1 而不是 0 开始。但是，建议包含一个值为 0 的常量。

我不确定文档调用这些*初始化程序*的内容，因为没有初始化任何内容。它只是让你的生活更轻松的语法。您也可以指定等效项：

```
enum Days {Sat=1, Sun=2, Mon=3, Tue=4, Wed=5, Thu=6, Fri=7}; 
```

也许他们的意思`1`是编译器将从该*初始值*开始计数以将常量整数值分配给它后面的枚举常量。例如：

```
enum Days {Sat, Sun=2, Mon, Tue=10, Wed, Thu, Fri=11}; 
```

相当于：

```
enum Days {Sat=0, Sun=2, Mon=3, Tue=10, Wed=11, Thu=12, Fri=11}; 
```

同样，*什么都没有初始化*。

# ruby - 西纳特拉和问号

> ID：15774187
> 
> 赞同：10
> 
> 时间：2013-04-02T20:55:33.107
> 
> 标签：ruby, get, sinatra, params

我需要用 Sinatra 做一些方法，看起来像：

> http//:localhost:1234/add?string_to_add

但是当我这样声明时：

```
get "/add?:string_to_add" do
...
end 
```

它没有看到`string_to_add`参数。

我应该如何声明我的方法并使用这个参数来使事情起作用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T14:53:50.127

在 URL 中，问号将[路径](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)部分与[查询](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)部分分开。查询部分通常由名称/值对组成，通常由 Web 浏览器构建以匹配用户输入表单的数据。例如，一个 url 可能看起来像：

```
http://example.com/submit?name=John&age=93 
```

这里的路径部分`/submit`和查询部分是`name=John&age=93`指键的值“John” `name`，而`age`.

在Sinatra 中[创建路由时，只需指定路径部分。](http://www.sinatrarb.com/intro.html#Routes)然后 Sinatra 解析查询，并使其中的数据在`params`对象中可用。在此示例中，您可以执行以下操作：

```
get '/submit' do
  name = params[:name]
  age = params[:age]
  # use name and age variables
  ...
end 
```

如果`?`在定义 Sinatra 路由时使用字符，它会使部分 url 成为可选的。在您使用 ( `get "/add?:string_to_add"`) 的示例中，它实际上将匹配任何以 开头的 url `/ad`，然后是可选的另一个`d`，然后将其他任何内容放入`:string_to_add`params 哈希的键中，并且将单独解析查询部分。换句话说，问号使前面的`d`字符可选。

如果要在 Sinatra 中获取查询字符串的“原始”文本，可以使用[object的](http://www.sinatrarb.com/intro.html#Accessing%20the%20Request%20Object)[`query_string`方法`request`](http://www.sinatrarb.com/intro.html#Accessing%20the%20Request%20Object)。在您的示例中，它看起来像这样：

```
get '/add' do
  string_to_add = request.query_string
  ...
end 
```

请注意，路线不包括`?`角色，只包括 base `/add`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:58:26.193

您应该将其声明为：

```
get "/add?:string_to_add?" do
...
end 
```

# python - python：如何绘制以节点为中心的二维不连续数据？

> ID：15774199
> 
> 赞同：4
> 
> 时间：2013-04-02T20:55:51.520
> 
> 标签：python, matplotlib

我有一个二维数据和二维四边形网格，描述了一个细分为补丁的域。数据在每个网格节点上定义。数据中的不连续性存在于补丁边界处，即数据在同一位置被多次定义。

**如何使用 Python 在节点之间使用线性插值绘制这些数据，并正确表示每个补丁面的不连续值？**

下面是三个示例元素或补丁，每个元素或补丁都有六个节点值。

![三个示例元素或补丁的图形，每个具有六个节点值。](https://i.stack.imgur.com/6uTTx.png)

节点位置和值数据可能存储在`[Kx3x2]`数组中，其中 K 是元素的数量。例如，

```
x = np.array( [
[ [0.0, 1.0], [0.0, 1.0], [0.0, 1.0]  ],  #element 0
[ [1.0, 2.0], [1.0, 2.0], [1.0, 2.0]  ],  #element 1
[ [2.0, 3.0], [2.0, 3.0], [2.0, 3.0]  ],  #element 2
] )

y = np.array( [
[ [0.0, 0.0], [0.5, 0.5], [1.0, 1.0]  ],  #element 0
[ [0.0, 1.0], [0.5, 1.5], [1.0, 2.0]  ],  #element 1
[ [1.0, 1.0], [1.5, 1.5], [2.0, 2.0]  ],  #element 2
] )

z = np.array( [
[ [0.0, 0.5], [0.0, 0.8], [0.0, 1.0]  ],  #element 0
[ [0.3, 1.0], [0.6, 1.2], [0.8, 1.3]  ],  #element 1
[ [1.2, 1.5], [1.3, 1.4], [1.5, 1.7]  ],  #element 2
] ) 
```

我考虑过`pyplot.imshow()`。这不能同时考虑整个域并且仍然代表多值不连续节点。`imshow()`为每个补丁单独调用可能会起作用。但是，我将如何在同一轴上绘制每个补丁图像？ `imshow()`对于非矩形补丁也是有问题的，这是我的一般情况。

我考虑过`pyplot.pcolormesh()`，但它似乎只适用于以细胞为中心的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:43:00.617

一种选择是通过对所有元素进行三角测量，然后使用[`tripcolor()`](http://matplotlib.org/api/axes_api.html?highlight=tri#matplotlib.axes.Axes.tripcolor)我现在发现的 matplotlib 函数进行绘图。[这里](http://matplotlib.org/examples/pylab_examples/tripcolor_demo.html)和[这里](http://matplotlib.org/examples/pylab_examples/triplot_demo.html?highlight=triangulation)有两个有用的演示。

我的全局域的自动三角剖分可能会出现问题，但单个四边形的 Delaunay 三角剖分效果很好： ![仅显示中心元素的三角剖分](https://i.stack.imgur.com/hWDMI.png)

我通过附加每个元素的三角剖分来创建全局三角剖分。这意味着共享节点实际上在位置数组和值数组中是重复的。这允许元素面上的不连续数据。 ![为所有元素显示三角剖分](https://i.stack.imgur.com/9cebS.png)

可以使用`tripcolor()`函数实现所需的线性插值和不连续性绘图，提供节点位置和每个节点的值。 ![最终解决方案 pcolor](https://i.stack.imgur.com/6dVFS.png)

我有点担心等高线绘图可能如何工作，因为元素面不再在逻辑上连接。 `tricontour()`仍然按预期工作。（此处显示叠加了三角测量） ![覆盖三角剖分的等高线图](https://i.stack.imgur.com/IO7PU.png)

使用以下代码复制：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.tri as tri

x = np.array( [
[ [0.0, 1.0], [0.0, 1.0], [0.0, 1.0]  ],  #element 0
[ [1.0, 2.0], [1.0, 2.0], [1.0, 2.0]  ],  #element 1
[ [2.0, 3.0], [2.0, 3.0], [2.0, 3.0]  ],  #element 2
] )

y = np.array( [
[ [0.0, 0.0], [0.5, 0.5], [1.0, 1.0]  ],  #element 0
[ [0.0, 1.0], [0.5, 1.5], [1.0, 2.0]  ],  #element 1
[ [1.0, 1.0], [1.5, 1.5], [2.0, 2.0]  ],  #element 2
] )

z = np.array( [
[ [0.0, 0.5], [0.0, 0.8], [0.0, 1.0]  ],  #element 0
[ [0.3, 1.0], [0.6, 1.2], [0.8, 1.3]  ],  #element 1
[ [1.2, 1.5], [1.3, 1.4], [1.5, 1.7]  ],  #element 2
] )

global_num_pts =  z.size
global_x = np.zeros( global_num_pts )
global_y = np.zeros( global_num_pts )
global_z = np.zeros( global_num_pts )
global_triang_list = list()

offset = 0;
num_triangles = 0;

#process triangulation element-by-element
for k in range(z.shape[0]):
    points_x = x[k,...].flatten()
    points_y = y[k,...].flatten()
    z_element = z[k,...].flatten()
    num_points_this_element = points_x.size

    #auto-generate Delauny triangulation for the element, which should be flawless due to quadrilateral element shape
    triang = tri.Triangulation(points_x, points_y)
    global_triang_list.append( triang.triangles + offset ) #offseting triangle indices by start index of this element

    #store results for this element in global triangulation arrays
    global_x[offset:(offset+num_points_this_element)] = points_x
    global_y[offset:(offset+num_points_this_element)] = points_y
    global_z[offset:(offset+num_points_this_element)] = z_element

    num_triangles += triang.triangles.shape[0]
    offset += num_points_this_element

#go back and turn all of the triangle indices into one global triangle array
offset = 0
global_triang = np.zeros( (num_triangles, 3) )
for t in global_triang_list:
    global_triang[ offset:(offset+t.shape[0] )] = t
    offset += t.shape[0]

plt.figure()
plt.gca().set_aspect('equal')

plt.tripcolor(global_x, global_y, global_triang, global_z, shading='gouraud' )
#plt.tricontour(global_x, global_y, global_triang, global_z )
#plt.triplot(global_x, global_y, global_triang, 'go-') #plot just the triangle mesh

plt.xlim((-0.25, 3.25))
plt.ylim((-0.25, 2.25))
plt.show() 
```

# android - HoloEverywhere：深色操作栏和对话框

> ID：15774201
> 
> 赞同：3
> 
> 时间：2013-04-02T20:55:53.670
> 
> 标签：android, dialog, styles, android-holo-everywhere

我正在使用 HoloEverywhere 库，我需要使用 Holo Dark 主题设置操作栏和对话框（ProgressDialog 和 AlertDialog）的样式，并使用 Holo Light 设置其余控件的样式。

我将应用程序主题设置为 Holo.Theme.Light.DarkActionBar （这是迄今为止我需要的最接近的），但是有了这个我得到了 Light 对话框。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T10:40:44.750

为对话框创建新的上下文包装器：

```
Context dialogContext = new ContextThemeWrapper(this, R.style.Holo_Theme);
Dialog dialog = new AlertDialog.Builder(dialogContext).create(); 
```

# ember.js - EmberJS 没有渲染我的模板

> ID：15774203
> 
> 赞同：0
> 
> 时间：2013-04-02T20:56:12.390
> 
> 标签：ember.js

我正在使用外部模板

```
Ember.TEMPLATES["application"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var stack1, functionType="function", escapeExpression=this.escapeExpression;

  if (stack1 = helpers.outlet) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.outlet; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  return escapeExpression(stack1);
  });

Ember.TEMPLATES["teams"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;

  buffer += "<div class=\"container-fluid hero team-banner\"><i class=\"icon-cheer\"></i><h1>Fan a Team</h1><span>Choose one or more teams from the list below to get started.</span></div><div class=\"container\"><div class=\"row-fluid team-tab\"><ul class=\"row-fluid nav nav-tabs\"><li class=\"active\"><a>3A</a></li><li><a>2A</a></li><li><a>1A</a></li><li class=\"title\">Conference:</li></ul></div><div class=\"tab-content\"><div class=\"row-fluid tab-pane active\"><div class=\"row-fluid division\"><div class=\"row-fluid division-header\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.Team),stack1 ? stack1.call(depth0, depth0.Name, options) : helperMissing.call(depth0, "Team", depth0.Name, options)))
    + "</div><div class=\"row-fluid division-content\"><table class=\"table table-bordered\"><tr><td class=\"team-logo\"><div class=\"img-wrapper\"></div></td><td class=\"name\">Golden St. Elites, Golden Eagles</td><td class=\"location\">San Mateo, CA</td><td class=\"options\"></td></tr><tr><td class=\"team-logo\"><div class=\"img-wrapper\"></div></td><td class=\"name\">Golden St. Elites, Golden Eagles</td><td class=\"location\">San Mateo, CA</td><td class=\"options\"><input /></td></tr><tr><td class=\"team-logo\"><div class=\"img-wrapper\"></div></td><td class=\"name\">Golden St. Elites, Golden Eagles</td><td class=\"location\">San Mateo, CA</td><td class=\"options\"><input /></td></tr><tr><td class=\"team-logo\"><div class=\"img-wrapper\"></div></td><td class=\"name\">Golden St. Elites, Golden Eagles</td><td class=\"location\">San Mateo, CA</td><td class=\"options\"><input /></td></tr></table></div></div></div><div class=\"text-centered\"><a class=\"btn btn-large btn-success\">Start Spinning</a></div></div></div>";
  return buffer;
  }); 
```

我可以确认已加载并且不会引发错误。

然后我有我的应用程序控制器和团队控制器，它们都已加载并且没有抛出错误。

```
App.ApplicationController = Ember.Controller.extend();

App.TeamsController = Ember.Controller.extend
  content: [] 
```

然后我有我的视图，这些视图已加载并且不会引发错误并且与模板相关

```
App.ApplicationView = Ember.View.extend({
  templateName: "application"
});

App.TeamsView = Ember.View.extend({
  templateName: "teams"
}); 
```

最后我有一个路由器

```
 App.Router.map ->
     this.route('teams', {path: '/'}) 
```

我对它如何知道将外部模板的插座粘贴在哪里感到困惑。

我也不知道这对路由器是否重要，但页面位于 '/teams.html' 而不是 '/'

如果有人可以提供帮助，我将不胜感激，我只需要知道如何开始，现在我看不到任何生命迹象。

如果语法看起来不对，我一直在慢慢地将一些东西转换为咖啡脚本。

```
DEBUG: -------------------------------
DEBUG: Ember.VERSION : 1.0.0-rc.1
DEBUG: Handlebars.VERSION : 1.0.0-rc.3
DEBUG: jQuery.VERSION : 1.9.1 
DEBUG: ------------------------------- 
```

# javascript - 从 DOM 获取 .append 值

> ID：15774207
> 
> 赞同：0
> 
> 时间：2013-04-02T20:56:17.077
> 
> 标签：javascript, jquery

在下面的函数中，我找到了 ID 的最大计数，然后加 1。一切正常，除了没有看到添加到 DOM 的新值，因此在第二次调用该函数时它们不会递增。

我没有正确地将新值添加到 DOM 中吗？

```
function addEdu(){
    var currentCount = $('input.uniqueId').val();
    currentCount = Math.max(currentCount);
    var nextCount = parseInt(currentCount) + 1;
    var newEdu = "<input type='hidden' name='fieldId[]' value='" + nextCount + "' class='uniqueId' /><p class='dual'><input type='text' name='educationTitle[]' "; //Shortened for clarity
    $("#eduHistory").append(newEdu); 
    $( ".datepicker" ).datepicker();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:01:38.070

`$('input.uniqueId').val()`将为您提供 class 的第一个输入的值`uniqueId`。如果您只期望有一个这样的输入，只需更改输入的值。否则，您可能必须选择最后一个输入`$('input.uniqueId:last').val()`。

Math.max 也有 2 个参数，它的目的是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:27:14.643

你试图确定下一个的方式`.uniqueId`是错误的。
首先，`$("input.uniqueId").val()`会给你选择中第一个元素的值。
第二个问题是`Math.max(currentCount)`which 将始终返回`currentCount`哪个值，如前所述，第一个元素的值。

这应该按预期工作：

```
// get an array with all uniqueIds
var currentIds = $("input.uniqueId").map(function() {
    return parseInt($(this).val(), 10);
});

// determine the biggest uniqueId
var currentCount = Math.max.apply(Math, currentIds);

// next uniqueId (if there is no "input.uniqueId" then currentCount will be -Infinity)
var nextCount = (currentCount === -Infinity ? 0 : currentCount) + 1;

// ... 
```

# java - 使用智能卡的 Java HttpClient 身份验证

> ID：15774212
> 
> 赞同：0
> 
> 时间：2013-04-02T20:56:36.687
> 
> 标签：java, httpclient, smartcard, smartclient

每天我都需要做一个例行程序，连接到远程地址，使用我的智能卡进行身份验证，然后在这个远程地址检查我的用户名的任何新信息。

我想自动执行此例程，创建一个连接到该地址的 Java 应用程序，使用智能卡进行身份验证，然后检查是否有任何新信息。

我试过了，但是用智能卡设置 HttpClient 环境没有成功，我将卡插入我的机器并设置 Cronjob 运行，它返回关于没有插入卡的警告。

代码如下：

```
HttpClient httpClient = new DefaultHttpClient();
            // Secure Protocol implementation.
            SSLContext ctx = SSLContext.getInstance("SSL");
            // Implementation of a trust manager for X509 certificates
            X509TrustManager tm = new X509TrustManager() {

                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }

                public void checkClientTrusted(java.security.cert.X509Certificate[] arg0, String arg1)  throws java.security.cert.CertificateException {
                    // TODO Auto-generated method stub
                }

                @Override
                public void checkServerTrusted(
                        java.security.cert.X509Certificate[] arg0, String arg1)
                        throws java.security.cert.CertificateException {
                    // TODO Auto-generated method stub

                }
            };
            ctx.init(null, new TrustManager[] { tm }, null);
            SSLSocketFactory ssf = new SSLSocketFactory(ctx);

            ClientConnectionManager ccm = httpClient.getConnectionManager();
            // register https protocol in httpclient's scheme registry
            SchemeRegistry sr = ccm.getSchemeRegistry();
            sr.register(new Scheme("https", 443, ssf));

            HttpGet httpget = new HttpGet("http://remoteserver.com/login.seam");
            HttpParams params = httpclient.getParams();

            params.setParameter("param1", "paramValue1");

            httpget.setParams(params);
            System.out.println("REQUEST:" + httpget.getURI());
            ResponseHandler responseHandler = new BasicResponseHandler();
            String responseBody;

            responseBody = httpclient.execute(httpget, responseHandler);

            System.out.println(responseBody); 
```

有什么帮助吗？我搜索了很多，但我无法使用智能卡进行连接...

在此先感谢并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T21:44:35.003

我们没有看到您关于智能卡读卡器的代码。在第一次您必须从您的智能卡中获取信息。尝试查看如何使用 smartcardio 库。然后将所有信息从您的应用程序发送到网络。

我认为如果我理解你的问题，它可以帮助你。

# ios - 在 OpenGL ES 2.0 iPhone 6.1 上使用 `GL_RGB8_OES` 扩展的`glCopyTexImage2D`

> ID：15774215
> 
> 赞同：0
> 
> 时间：2013-04-02T20:56:42.617
> 
> 标签：ios, opengl-es-2.0

当我打电话

```
glCopyTexImage2D( GL_TEXTURE_2D, 0, GL_RGB8_OES, 0, 0, w, h, 0 ); 
```

我明白了`GLERROR 1281 GL_INVALID_VALUE`。如果我使用

```
glCopyTexImage2D( GL_TEXTURE_2D, 0, GL_RGB, 0, 0, w, h, 0 ); 
```

它工作正常。

好像`GL_RGB8_OES`不支持`glCopyTexImage2D`！如此明显的遗漏，我很难相信。如何拯救 Alpha 通道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:13:36.450

您是否尝试过使用 GL_RGBA ？

[http://www.opengl.org/sdk/docs/man/xhtml/glCopyTexImage2D.xml](http://www.opengl.org/sdk/docs/man/xhtml/glCopyTexImage2D.xml)

# php - 如果文件有一定长度，PHP会删除文件中的第二行

> ID：15774230
> 
> 赞同：1
> 
> 时间：2013-04-02T20:57:30.117
> 
> 标签：php, fwrite

当用户在我的网站上注册一个帐户时，他们自己的页面被创建，称为 USERNAME.php。
每当用户名“bob”登录时，就会在 bob.php 中添加一个新行，其中包含该登录的时间、日期和 IP 地址。

我想要做的是该文件中最多有 20 行，这样文件就不会随着时间的推移变得太大。
我的第一行是“ **bob**的登录检索”，然后是底部的最新登录结果。所以第一行不应该被删除，但是第二行应该在每次登录时被删除（只有当行数大于 20 时）。这样做的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:00:46.577

我假设`.php`未使用扩展名，并且该文件最多有二十行。

您可以使用该`file()`函数按行展开文件，`shift`取出第一行以保存它，然后使用`array_splice()`提取最后 19 行，`unshift`将第一行返回到新数组中以获得最多 20 个条目。`join`它们并将它们重写回原始文件。

更好的是，将它们写入一个新文件，然后如果一切顺利，将新文件重命名为新文件。

```
 /**
     * @param $file    the input file
     * @param $n       total number of meaningful lines to keep (default 20)
     * @param $m       prefix lines to keep (default 1)
     *
     * @return         number of lines in case something was done
     *                 0 nothing to do
     *                 -1 file not found
     *                 -2 file not readable
     *                 -3 file not writeable
     *                 -4 write error
     *                 -8 bad parameter
     */

    function trim_file($file, $n = 20, $m = 1)
    {
            if (!file_exists($file))
                    return -1;
            if (!is_readable($file))
                    return -2;
            if (!is_writeable($file))
                    return -3;
            if ($m > $n)
                    return -8;
            $lines  = file($file);
            $num    = count($lines);

            // If file is short, no need to do anything
            if ($num <= $n)
                    return 0;

            $header = array_slice($lines, 0, $m);
            // Remove lines from 0 to ($num-($n-$m))
            // and replace them with the first $m lines
            array_splice($lines, 0, $num-($n-$m), $header);

            // Write file with new contents
            $fp = fopen($file . '.tmp', 'w');
            if (!$fp)
                    return -4;
            fwrite($fp, join('', $lines));
            fclose($fp);

            // Replace the file in one fell swoop.
            rename($file . '.tmp', $file);
            return count($lines);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:02:10.823

如果只有20行。将文件读取到数组并以这种方式操作会很容易。可以轻松取消设置数组元素并将总数保持在 20。然后将新信息写回文件

# java - 更改动态数据列表显示的宽度

> ID：15774233
> 
> 赞同：2
> 
> 时间：2013-04-02T20:57:37.967
> 
> 标签：java, list, dynamic, width, liferay

我正在尝试在 Liferay 门户的电子表格视图中更改动态数据列表显示的宽度。在非电子表格视图中，列表与屏幕一样宽，但在选择电子表格视图布尔值的情况下，列表具有预定的固定宽度。有谁知道我如何将其更改为百分比以利用全屏而不是 700 以及它预先确定的某些像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:27:20.947

你可以创建钩子插件并覆盖

`/html/portlet/dynamic_data_lists/view_spreadsheet_records.jsp`

在该文件中找到类似

```
A.Plugin.DataTableScroll,
{
    height: 700,
    width: 900,
} 
```

并将其更改为

```
A.Plugin.DataTableScroll,
{
    height: 700,
    width: A.one('#<portlet:namespace />dataTable').width()
} 
```

在文件末尾放置

```
<style>#<portlet:namespace />dataTableContent table {width: 100%;}</style> 
```

**请注意**，如果您设置`width: "100%"`网格容器将永远不会获得它自己的滚动条，并且您将拥有完整页面的水平滚动条，这不适用于控制面板页面。

# android - 如何为 List 实现 parcelable

> ID：15774236
> 
> 赞同：8
> 
> 时间：2013-04-02T20:57:47.087
> 
> 标签：android

我正在尝试在我的 parcelable 中传递一个列表：

```
public class MetaDados implements Parcelable {

private List<Long> sizeImages;

public MetaDados(List<Long> sizeImages){
this.sizeImages = sizeImages;
}

public List<Long> getSizeImages() {
        return sizeImages;
    }

    public void setSizeImages(List<Long> sizeImages) {
        this.sizeImages = sizeImages;
    }

@Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

@Override
    public void writeToParcel(Parcel dest, int flags) {
dest.writeList(sizeImages);
}

    public static final Parcelable.Creator<MetaDados> CREATOR = new Parcelable.Creator<MetaDados>() {
        @Override
        public MetaDados createFromParcel(Parcel in) {
            return new MetaDados(in);
        }

        @Override
        public MetaDados[] newArray(int size) {
            return new MetaDados[size];
        }
    };

private MetaDados(Parcel in) {
//HERE IS THE PROBLEM, I'VE tried this:

sizeImages = in.readList(sizeImages, Long.class.getClassLoader());

//but what i got: Type mismatch: cannot convert from void to List<Long>
}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T21:00:32.857

试试这个：

```
sizeImages = new ArrayList<Long>(); // or any other type of List
in.readList(sizeImages, null); 
```

[Android 文档`Parcel.readList`](http://developer.android.com/reference/android/os/Parcel.html#readList%28java.util.List,%20java.lang.ClassLoader%29)说：

> 从包裹中读入现有的列表对象

因此，您需要先创建`List`.

# gwt - GWT：避免在 Web 应用程序加载时设置 window.name

> ID：15774237
> 
> 赞同：1
> 
> 时间：2013-04-02T20:57:48.530
> 
> 标签：gwt

我想使用 window.name 作为某些标识符的持有者，以便在页面刷新发生（或被强制）时使用。但是，我注意到 GWT 将其设置为`rename-to`模块定义中定义的属性值。有什么办法可以避免吗？

PS 我知道我可以使用 sessionStorage，甚至可能使用其他一些机制。我只是对这个特定案例感到好奇——想知道我如何覆盖这种 GWT 行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:39:58.653

您确定窗口正在更改其名称吗？我记得该模块会更改它加载到的 iframe，但不会更改全局窗口。还是您使用不同的链接器？或者将窗口称为 jsni 中的窗口而不是`$wnd`?

```
private native void setWindowName(String newName) /*-{
  $wnd.name=newName;
}-*/; 
```

# html - 如何在一个样式表中为多个页面设置背景页面

> ID：15774239
> 
> 赞同：-3
> 
> 时间：2013-04-02T20:57:52.913
> 
> 标签：html, css

我希望我的样式表能够控制每个页面的背景图像，能够为每个页面使用不同的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:07:59.127

你可以给每个`body`元素一个`id`. 然后，您可以使用多个 id 选择器自定义 CSS：

```
body#index-page { 
  background: red;
}

body#about-us { 
  background: blue; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:02:17.757

您可以使用放置在每个页面顶部的 css 来做到这一点。

以以下方式：

```
<head>
     ...
     <style type="text/css">
          body {background: url(path to page specific bg image);}
     </style>
</head> 
```

这个 css 将克服样式表中的一般 css，并且您将为每个页面指定不同的 bg。

希望能帮助到你

# c# - 如何调试实体框架迁移 LoaderExceptions？

> ID：15774247
> 
> 赞同：1
> 
> 时间：2013-04-02T20:58:16.490
> 
> 标签：c#, entity-framework, powershell, entity-framework-migrations

我正在尝试`update-database`在其他机器上运行的 Entity Framework 5 项目中运行。

我下载了代码，重建了项目，运行时`update-database`出现如下错误：

```
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.RuntimeModule.GetTypes()
   at System.Reflection.Assembly.GetTypes()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.FindType[TBase](String typeName, Func`2 filter, Func`2 noType, Func`3 multipleTypes, Func`3 noTypeWithName, Func`3 multipleTypesWithName)
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.FindConfiguration()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information. 
```

我认为发生此错误是因为我的环境中缺少某些程序集，或者可能是因为在 GAC 中发现了不兼容的程序集。但是不知道哪种类型无法加载，我一无所知，所以这是一个非常难以调试的问题。

如何找出未能加载的类型或程序集？该消息说“检索 LoaderExceptions 属性以获取更多信息”，但是鉴于迁移在包管理器控制台中运行，而不是在我自己的代码中运行，我该怎么做？

在控制台中键入`$Error[0].Exception`会显示异常消息，但我如何列出它的其他属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:03:38.970

我不确定这是否可以帮助你，但只是提出一个想法......

您可以尝试从代码运行迁移 - 在那里您可能会获得更好的异常处理。例如

[没有 nuget 的 EF Code First DbMigration](https://stackoverflow.com/questions/11271445/ef-code-first-dbmigration-without-nuget)

```
DbMigrator migrator = new DbMigrator(new YourConfiguration());
migrator.Update(); // or update specific migrations.. 
```

您也可以通过配置打开它 - 甚至在不重新编译的情况下打开它（用于生产） - 如果您启用了日志记录/跟踪，您可能会从中得到一些错误......

```
 <contexts>
        <context type="YourNS.YourContext, YourAssembly">
            <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[YourNS.YourContext, YourAssembly], [YourNS.YourConfiguration, YourAssembly]], EntityFramework" />
        </context>
    </contexts>

</entityFramework> 
```

# sql-server - 将多条记录合并为一行

> ID：15774249
> 
> 赞同：0
> 
> 时间：2013-04-02T20:58:32.940
> 
> 标签：sql-server, sql-server-2005, pivot

我有一个 SQL Server 2005 表，它记录了一个过程的每个步骤，如下所示

```
ResourceID    EventType         Time
ABC123        Job Activated     2013-01-08 10:01:31.000
ABC123        Download Complete 2013-01-08 10:03:32.000
ABC123        Job Complete      2013-01-08 10:07:42.000
XYZ789        Job Activated     2013-01-08 12:05:11.000
XYZ789        Download Complete 2013-01-08 12:08:52.000
XYZ789        Job Complete      2013-01-08 12:14:21.000 
```

我想做的是显示一个结果，每个结果都有一行`ResourceID`，显示每个事件的时间。

```
ResourceID  Job Activated             Download Complete        Job Complete
ABC123      2013-01-08 10:01:31.000   2013-01-08 10:03:32.000  2013-01-08 10:07:42.000
XYZ789      2013-01-08 12:05:11.000   2013-01-08 12:08:52.000  2013-01-08 12:14:21.000 
```

关于如何做到这一点的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:04:56.087

正如评论所建议的，你可以很容易地做到这一点`PIVOT`：

```
DECLARE @x TABLE(ResourceID CHAR(6), EventType VARCHAR(32), [Time] DATETIME);

INSERT @x SELECT 'ABC123','Job Activated    ','2013-01-08 10:01:31.000'
UNION ALL SELECT 'ABC123','Download Complete','2013-01-08 10:03:32.000'
UNION ALL SELECT 'ABC123','Job Complete     ','2013-01-08 10:07:42.000'
UNION ALL SELECT 'XYZ789','Job Activated    ','2013-01-08 12:05:11.000'
UNION ALL SELECT 'XYZ789','Download Complete','2013-01-08 12:08:52.000'
UNION ALL SELECT 'XYZ789','Job Complete     ','2013-01-08 12:14:21.000';

SELECT ResourceID,[Job Activated],[Download Complete],[Job Complete]
FROM @x
PIVOT 
(
   MAX([Time]) FOR EventType IN (
    [Job Activated],[Download Complete],[Job Complete]
)) AS p; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:08:09.843

您可以使用带有`CASE`表达式的聚合函数来透视数据：

```
select resourceid,
  max(case when EventType = 'Job Activated' then [time] end) as [Job Activated],
  max(case when EventType = 'Download Complete' then [time] end) as [Download Complete],
  max(case when EventType = 'Job Complete' then [time] end) as [Job Complete]
from yourtable
group by resourceid 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/65623/1)。

或者你可以在你的表上使用多个连接：

```
select ja.resourceid,
  ja.[time] as [Job Activated],
  dc.[time] as [Download Complete],
  jc.[time]  as [Job Complete]
from yourtable ja
left join yourtable dc
  on ja.resourceid = dc.resourceid
  and dc.EventType = 'Download Complete'
left join yourtable jc
  on ja.resourceid = jc.resourceid
  and jc.EventType = 'Job Complete'
where ja.EventType = 'Job Activated' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/65623/3)

# c# - 无法使用 Queryable(PageSize=1) 属性检索 xml 列

> ID：15774255
> 
> 赞同：2
> 
> 时间：2013-04-02T20:59:03.623
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, entity-framework-5, odata

我正在尝试使用带有 ASP.NET Web API 的 OData 通过实体框架从 SQL Server 检索行。当其中一列是 xml 类型时，我遇到了问题。如果我在以下控制器中使用 [Queryable] 返回整个集合，则没有问题：

```
public class TradesController : ODataController
{
    private readonly HermesContext _db = new HermesContext();

    [Queryable]
    public IQueryable<Trade> GetTrades()
    {
        return _db.trades;
    }
} 
```

但是当我在我的操作中使用 [Queryable(PageSize = 1)] 时，我收到以下错误：

```
The XML data type cannot be compared or sorted, except when using the IS NULL operator. 
```

这是因为Entity Framework已经生成的sql（通过profiler查看）是：

```
SELECT 
[Extent1].[trade_reference] AS [trade_reference], 
[Extent1].[trade_id] AS [trade_id], 
[Extent1].[last_updated] AS [last_updated], 
[Extent1].[client_application_code] AS [client_application_code], 
[Extent1].[trade_markup] AS [trade_markup]
FROM [dbo].[Trade] AS [Extent1]
ORDER BY [Extent1].[client_application_code] ASC, [Extent1].[last_updated] ASC,     [Extent1].[trade_id] ASC, [Extent1].[trade_markup] ASC, [Extent1].[trade_reference] ASC 
```

[trade_markup] 是一种 xml 类型，它包含在 ORDER BY 子句中会导致错误。如果我删除 '[Extent1].[trade_markup] ASC'，并（手动）运行 sql 的其余部分，它执行得很好。

贸易的映射是：

```
public class tradeMap : EntityTypeConfiguration<Trade>
{
    public tradeMap()
    {
        // Primary Key
        this.HasKey(t => t.trade_reference);

        // Properties
        this.Property(t => t.trade_id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(t => t.trade_reference)
            .IsRequired()
            .IsFixedLength()
            .HasMaxLength(50);

        this.Property(t => t.client_application_code)
            .IsRequired()
            .IsFixedLength()
            .HasMaxLength(10);

        // Table & Column Mappings
        this.ToTable("Trade");
        this.Property(t => t.trade_id).HasColumnName("trade_id");
        this.Property(t => t.trade_reference).HasColumnName("trade_reference");
        this.Property(t => t.last_updated).HasColumnName("last_updated");
        this.Property(t => t.client_application_code).HasColumnName("client_application_code");
        this.Property(t => t.trade_markup).HasColumnName("trade_markup");
    }
} 
```

它使用基本的 POCO：

```
public partial class Trade
{
    public int trade_id { get; set; }
    public string trade_reference { get; set; }
    public System.DateTime last_updated { get; set; }
    public string client_application_code { get; set; }
    public string trade_markup { get; set; }
} 
```

有没有办法在使用 [Queryable(PageSize = 1)] 时指定我希望将 xml 列从 ORDER BY 子句中排除？我希望在映射的某个地方做到这一点，但我不知道如何做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:25:28.813

好问题。

让我解释一下：当您添加 PageResult 或使用 $skip 或 $top 时，Web API 会自动为您添加默认排序，以便结果稳定。您可以像这样关闭默认排序：

```
[Queryable(PageSize = 1, EnsureStableOrdering=false)] 
```

如果您的数据库尚未对结果进行排序，您可能仍希望向 IQueryable 添加某种排序。

# javascript - 如何始终在 Lightbox 2 上显示导航按钮？

> ID：15774257
> 
> 赞同：3
> 
> 时间：2013-04-02T20:59:24.843
> 
> 标签：javascript, css, lightbox2

我正在使用 Lightbox 2 [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

我想要的是当 Lightbox 2 打开时它总是显示导航按钮。我试图查看 CSS，但实际上`display:none`元素`.lb-nav, .lb-prev, .lb-next`中没有任何`display:block`内容`.lb-prev, .lb-next`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:35:14.913

您还可以在 javascript 文件中将导航设置为 true。您也可以将其添加到您希望效果发生的页面

```
$('a.StockNumber').lightBox({
    fixedNavigation: true
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:01:36.037

Lightbox 使用简单的 CSS 图像交换。在 lightbox.css 之后的某处应用 :hover 伪类中的样式：

```
.lb-next {
    background: url("../images/next.png") no-repeat scroll right 48% transparent;
}
.lb-prev {
    background: url("../images/prev.png") no-repeat scroll left 48% transparent;
} 
```

[https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

[https://developers.google.com/chrome-developer-tools/docs/overview](https://developers.google.com/chrome-developer-tools/docs/overview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T11:29:10.680

在灯箱 2 上，这对我有用：

```
.lb-nav a.lb-next,
.lb-nav a.lb-prev{
  opacity:1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-21T05:01:29.820

在 lightbox.js 中，第 329 行，更改

var alwaysShowNav = false;

至

var alwaysShowNav = true;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-19T16:50:51.550

当我使用下面的 css 代码时，它工作得很好。

```
<style>
.lb-nav a.lb-next,
.lb-nav a.lb-prev{
opacity: 0.4 !important;
}

.lb-nav a.lb-next:hover,
.lb-nav a.lb-prev:hover{
opacity: 0.8 !important;
}
</style> 
```

在此代码中必须包含“！important”。否则，您的目的将无法实现

# javascript - 从ajax查询中检索数据

> ID：15774258
> 
> 赞同：0
> 
> 时间：2013-04-02T20:59:28.327
> 
> 标签：javascript, c#, ajax

所以我有一个网站，我想点击一个按钮，检查用户是否有某些权限，如果有，弹出一个窗口到一个新的网页。在java脚本上，我有这样的东西：

```
function sendAjax(methodName, dataArray, success, error, category) {
    var error2 = error || function () { };
    $.ajax({
        type: 'POST',
        url: '/PermissionChecker' + methodName,
        data: JSON.stringify(dataArray),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (r, s, x) { if (!success || success(r, s, x) != false) if (typeof (window.ChangeLogAdd) == 'function') { ChangeLogAdd(category); } },
        error: error2
    });
}

function CheckPermissions() {
    sendAjax("CheckPermission", null, function (data) { var permission = eval('(' + data + ')'); if (permission == true) { alert('yay'); } else { alert('nay'); } }, null, 'Check Permission');
} 
```

而 C# 端是一个简单的函数，它执行 if 检查并返回一个 bool。函数调用正常，但是当它返回布尔值时，我得到一个javascript错误“预期']'”。我认为这与我的成功功能有关：

```
 function (data) { 
        var permission = eval('(' + data + ')'); 
        if (permission == true) { 
            alert('yay'); 
        } 
        else { 
            alert('nay'); 
        } 
    } 
```

看到在我尝试在那里做的事情之前我没有收到这个错误，所以我想知道如何从 ajax 调用中获取数据以通过`permission == true`if/else 检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:04:50.083

不要为此目的使用 eval 。这是不安全的，也是许多错误的来源。只需让服务器响应 JSON 并使用 $.getJSON。

# sql - SQL 查询用 NULL 替换行中的值，如果该值等于前一行的值

> ID：15774262
> 
> 赞同：1
> 
> 时间：2013-04-02T20:59:32.387
> 
> 标签：sql, oracle11g

我有以下 sql 查询：

从供应商的营业额订单中选择供应商、名称、日期、营业额

```
 supplier      name        date       turnover
  --------      ---------   ---------- ----------
       001      supplier1   01.01.2012     129,67
       001      supplier1   02.05.2012  12.145,89
       001      supplier1   03.07.2012   6.830,90 
       002      supplier2   01.01.2012     -11,55
       002      supplier2   03.09.2012   4.500,61 
```

是否可以用 NULL 替换重复值，所以结果表看起来像这样（见下文）？

```
 supplier      name        date       turnover
  --------      ---------   ---------- ----------
       001      supplier1   01.01.2012     129,67
                            02.05.2012  12.145,89
                            03.07.2012   6.830,90 
       002      supplier2   01.01.2012     -11,55
                            03.09.2012   4.500,61 
```

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:06:15.357

你可以使用`row_number`：

```
select case row when 1 then supplier_orig else null end as supplier,
  case row when 1 then name_orig else null end as name,
  date, turnover
from (
  select supplier AS supplier_orig, name AS name_orig, date, turnover,
  row_number() over (partition by supplier order by date) as row
  from turnover 
)
order by supplier_orig, date 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!4/41908/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:03:22.937

你可以使用解析函数`LAG`和`NULLIF`函数。就像是

```
SQL> ed
Wrote file afiedt.buf

  1  select nullif(deptno,
  2                lag(deptno) over (order by deptno, ename)) formatted_deptno,
  3         ename
  4    from emp
  5*  order by deptno, ename
SQL> /

FORMATTED_DEPTNO ENAME
---------------- ----------
              10 CLARK
                 KING
                 MILLER
              20 ADAMS
                 FORD
                 JONES
                 SCOTT
                 SMITH
              30 ALLEN
                 BLAKE
                 JAMES
                 MARTIN
                 TURNER
                 WARD

14 rows selected. 
```

# git - 可以“撤消”我在 Git 中的最后一次“撤消”吗？

> ID：15774264
> 
> 赞同：1
> 
> 时间：2013-04-02T20:59:38.900
> 
> 标签：git

我做了：

```
git reset --soft ^HEAD 
```

当我想我的意思是：

```
git reset --soft HEAD 
```

现在我一天的所有工作都“消失”了。有没有可能回到梯子上来捕捉我今天所做的事情

我进行重置的原因是因为我最初是这样做的：

```
git commit -a -m "xyz" 
```

代替：

```
git commit -m "xyz" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:08:53.533

`git reflog`是围绕所有精彩的 git 疯狂的安全网。您可以使用它来定位“撤消”之前的提交的哈希值，将其签出到一个分支（为了安全起见），然后从那里恢复您的工作树。

更多细节[在这里](http://alblue.bandlem.com/2011/05/git-tip-of-week-reflogs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:11:23.567

使用`git-reflog`：

```
git reflog
# find SHA of commit which you "lost"
git reset --hard SHA 
```

找到确切的提交可能很棘手，但您可以使用`git show`.

# wordpress - Wordpress 和 CakePHP 之间 SSO 的密码散列

> ID：15774265
> 
> 赞同：1
> 
> 时间：2013-04-02T20:59:40.500
> 
> 标签：wordpress, cakephp, authorization, cakephp-2.0, single-sign-on

我们有一个 Wordpress 站点，我们将使用 cakePHP 框架逐步重建它。我们将逐步替换 Wordpress 站点的不同部分，因此我们需要实现某种单点登录，以便在两个框架并行运行期间允许跨两个框架进行授权。

我们有一个很好的策略来做到这一点。简而言之，我们将在两个不同的表中复制所有用户行：一个用于 Wordpress ( `wp_users`) 的表和另一个用于 Cake ( `users`) 的表。[[此处](https://stackoverflow.com/questions/15188261/single-sign-on-sso-between-wordpress-and-cakephp)概述的更多详细信息（如果您有兴趣）。]

这意味着当我们在 Wordpress 或 Cake 中创建用户时，我们也会在另一个表中创建相同的用户。这是“几乎无害的”......

**我们正在为 Wordpress 和 Cake 之间不同的密码散列策略而苦苦挣扎。**为了在两个表中保存*相同*的用户密码，我们需要弄清楚如何对其进行哈希处理，以便每个各自的框架都可以检查它。

Wordpress 使用了一种非常先进的散列算法：[PHPass](http://www.openwall.com/phpass/)。Cake（默认情况下）似乎提供了更传统的算法选择：SHA1、md5、blowfish... 可选加盐。我们坚持 Wordpress 生成/通过电子邮件向新用户发送默认密码，然后立即保存数据库中的散列版本。这个密码的散列版本对 cake 来说毫无用处，除非我们能弄清楚如何复制所有的 Wordpress 授权协议（这对于新的 Cake 用户来说似乎有些令人生畏）。

这个问题有优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:17:48.490

我建议将用户*管理*集中在 Wordpress 或 CakePHP 中，直到迁移到 CakePHP 完成。

从 CakePHP 2.3 开始，bcrypt/blowfish 正式支持散列密码； [http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-bcrypt-for-passwords](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-bcrypt-for-passwords)

但是，如果您已经使用单点登录，为什么不暂时让密码同步*呢*？一旦迁移到 CakePHP 完成，请考虑以下选项；

*   向所有用户发送包含唯一链接的电子邮件以重置其密码；重置密码实际上会在 CakePHP 中*创建*一个散列密码并启用新帐户。之后，唯一链接应该失效（还要确保链接在一段时间后过期）
*   因为 CakePHP 和 PHPass 都使用 bcrypt/blowfish，所以您可以在迁移完成后将散列密码复制到 CakePHP。但是，您需要确定“如何”存储 PHPass 密码和盐（单独的字段？带分隔符的单个字段？）。您可能必须编写自己的[授权对象](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authorize-objects)，该对象将从数据库中选择正确的“盐”

# ios - 如何根据表中的字符串执行segue？

> ID：15774268
> 
> 赞同：1
> 
> 时间：2013-04-02T20:59:53.343
> 
> 标签：ios, xcode4.6

我有一个疑问；我有一个包含字符串的动态填充表。它附加了搜索功能，我如何根据所选的字符串/单元格执行转场？

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:09:59.383

前段时间我遇到了类似的问题，这段代码真的帮助了我。

我假设您的搜索功能完全正常。

这一切都基于 else if 语句。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
  {
if (tableView == self.searchDisplayController.searchResultsTableView) {
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellcontent = selectedCell.textLabel.text;

    if ([cellcontent isEqualToString:"CellOne"]) [self performSegueWithIdentifier:@"CellOne" sender:self];
    else if ([cellcontent isEqualToString:"CellTwo"]) [self performSegueWithIdentifier:@"CellTwo" sender:self];        
} 
```

}

您可能会注意到，这只适用于搜索 RESULTS 表中的 segues。您的非结果表需要一段非常相似的代码。我相信你能想出这个小小的改变。

如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:10:01.523

实现适当的委托方法并断言单元格的 textLabel 文本。执行适当的序列...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
  if ([cell.textLabel.text isEqualToString:@"SomeText"]) {
    [self performSegueWithIdentifier:@"MySegue" sender:cell];
  }
} 
```

# ios - 无法显示uilabel的文字，自定义view

> ID：15774273
> 
> 赞同：0
> 
> 时间：2013-04-02T21:00:11.783
> 
> 标签：ios, objective-c, core-graphics

按照[我第一篇文章](https://stackoverflow.com/questions/15772630/text-is-disappearing-when-filling-the-gradient-for-uilabel-custom-uilabel/15773688?noredirect=1#15773688)中的一些说明，我正在做的是

```
1\. create a class ( subclass of uiview)
2\. fill it with gradient
3\. add a uilabel on it 
```

我正在做的是：

```
1\. in xib, i drag and drop uiview onto the screen

2\. change to 'customViewBackGround' in 'custom class' 
```

和 customViewbackGround 如下所示：

```
-(void) layoutSubviews {

    CGFloat height                  =   20.0;
    CGFloat x                       =   5;
    CGFloat y                       =   3;
    CGRect rect                     =   CGRectMake(x, y, self.bounds.size.width - 2 * x, height);

    titleLabel.frame                =   rect;
    titleLabel                      =   [[UILabel alloc] init] ;
    titleLabel.textAlignment        =   NSTextAlignmentLeft;
    titleLabel.opaque               =   NO;
    titleLabel.backgroundColor      =   [UIColor clearColor];
    titleLabel.font                 =   [UIFont systemFontOfSize:15];
    titleLabel.textColor            =   [UIColor blackColor];
    [self addSubview:titleLabel];

}

- (void)drawRect:(CGRect)rect {
    titleLabel.text                 =   @"How to redeem your e-gift card online";
    CGContextRef context            =   UIGraphicsGetCurrentContext();

    CGColorRef whiteColor           =   [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
    CGColorRef lightGrayColor       =   [UIColor colorWithRed:230.0/255.0
                                                        green:230.0/255.0
                                                         blue:230.0/255.0
                                                        alpha:1.0].CGColor;
    CGColorRef separatorColor       =   [UIColor colorWithRed:208.0/255.0 green:208.0/255.0 blue:208.0/255.0 alpha:1.0].CGColor;

    CGRect paperRect                =   self.bounds;

    // Fill with gradient
    drawLinearGradient(context, paperRect, whiteColor, lightGrayColor);

    // Add white 1 px stroke
    CGRect strokeRect           =   paperRect;
    strokeRect.size.height     -=   1;
    strokeRect                  =   rectFor1PxStroke(strokeRect);

    CGContextSetStrokeColorWithColor(context, whiteColor);
    CGContextSetLineWidth(context, 1.0);
    CGContextStrokeRect(context, strokeRect);

    // Add separator
    CGPoint startPoint          =   CGPointMake(paperRect.origin.x, paperRect.origin.y + paperRect.size.height - 1);
    CGPoint endPoint            =   CGPointMake(paperRect.origin.x + paperRect.size.width - 1, paperRect.origin.y + paperRect.size.height - 1);
    draw1PxStroke(context, startPoint, endPoint, separatorColor);
} 
```

但是， uilabel 的文本毕竟没有显示出来。关于这个问题的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:12:00.473

您不能在 titleLabel 初始化之前设置它的框架。交换这两行：

```
titleLabel                      =   [[UILabel alloc] init] ;
titleLabel.frame                =   rect; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:15:49.910

在`layoutSubviews`您创建之前在 titleLabel 上设置框架。创建标签后设置它。

# java - 整数会调用一个类，但不会调用另一个类？

> ID：15774276
> 
> 赞同：1
> 
> 时间：2013-04-02T21:00:19.920
> 
> 标签：java, graphics, integer, coordinates

我正在尝试制作“Snake”游戏，但我被困在了尾巴上。现在，我只是想让第一个尾部块与头部具有相同的坐标。这就是我所拥有的。对于主类：

```
public class Game extends JPanel implements ActionListener {
Snake p;
RandomDot r;
Trail trail; 
Point w;
Image img;
Timer time;
int t=75;
int score = 0;
int count = 0;
int x, y;

boolean lost = false;

public Game(){
    p = new Snake();
    r = new RandomDot();
    trail = new Trail();
    w = new Point();
    addKeyListener(new AL());
    setFocusable(true);
    ImageIcon i = new ImageIcon("C:/Matt's stuff/background.png");
    img = i.getImage();
    time = new Timer(t, this);
    time.start();
} 

@Override
public void actionPerformed(ActionEvent e)
{
    p.move();
    p.moveup();
    w.points();
    trail.getFirstDot();
    trail.findCoords();
    if (score>=1)
    {
    trail.getFirstDot();
    }
    if (lost==true)
    {
        score++;
        r.getRandom();
        lost = false;
    }
    repaint();
    checkCollisions();
}

public int score()
{
    return score;
}

public boolean getLost()
{
    return lost;
}

public void checkCollisions()
{
    Rectangle r1 = r.getBounds();
    Rectangle r2 = p.getBounds();
    if (r1.intersects(r2))
    {
        lost = true;
    }
}

@Override
public void paint(Graphics g)
{
        super.paint(g);
                    Graphics2D g2d = (Graphics2D) g;
                    g2d.drawImage(img, 0, 0, null);
                    g2d.drawImage(p.getImage(), p.getX(), p.getY(), null);
                    g2d.drawImage(r.getImage2(), r.getX2(), r.getY2(), null);
                    if (score>=1)
                    {
                        g2d.drawImage(trail.getImage(), trail.getX(), trail.getY(),       null);
                    }
                    System.out.println(score + "00");
}

private class AL extends KeyAdapter{
    @Override
    public void keyReleased(KeyEvent e)
    {
        p.keyReleased(e);
    }
    @Override
    public void keyPressed(KeyEvent e)
    {
        p.keyPressed(e);
    }
}

} 
```

对于蛇头类：

```
public class Snake {
Integer x = 480, y = 280, dx = 0, dy = 0, h, m;
boolean dead = false;
boolean didmove = false;
Image still;
RandomDot r;
Game g;
Trail t;

public Snake(){
    ImageIcon i = new ImageIcon("C:/Matt's Stuff/snake.png");
    still = i.getImage();
}

public Rectangle getBounds(){
    return new Rectangle(x,y, 10, 10);
} 

public void move(){ 
    x = x + dx;
    h = x;
    didmove = true;
    if (x>=990||x<=5){
    dead = true;
    x = 480;
    y = 280;
    dx = 0;
    dy = 0;
    didmove = false;
    }
} 

public void moveup(){
    y = y + dy;
    m = y;
    didmove = true;
    if (y>=590||y<=0){
    dead = true;
    x = 480;
    y = 280;
    dx = 0;
    dy = 0;
    didmove = false;
    }
}

public Integer getX(){
return x;
}

public Integer getY(){
return y;
}

public Image getImage(){
return still;
}
public boolean getBoolean(){
return dead;
}

public boolean didmove(){
return didmove;
}

public void keyPressed(KeyEvent e){
int key = e.getKeyCode();

if (key == KeyEvent.VK_LEFT){
     if (dead == false){
        dx = -10;
        dy = 0;
    } else {
        x = 480;
        y = 280;
        dx = 0;
        dy = 0;
    }
}

if (key == KeyEvent.VK_RIGHT){
    if (dead == false){
        dx = 10;
        dy = 0;
    } else {
        x = 480;
        y = 280;
        dx = 0;
        dy = 0;
    }
}

if (key == KeyEvent.VK_UP){
    if (dead == false){
        dy = -10;
        dx = 0;
    }else {
        x = 480;
        y = 280;
        dx = 0;
        dy = 0;
    }
}

if (key == KeyEvent.VK_DOWN){
    if (dead == false){
        dy = 10;
        dx = 0;
    }else {
        x = 480;
        y = 280;
        dx = 0;
        dy = 0;
    }
}
}

public void keyReleased(KeyEvent e){
int key = e.getKeyCode();

}

} 
```

最后是尾巴：

```
public class Trail {
Image still;
Integer x = 500, y = 500, dx, dy, dx2, dy2;
Game g;
Snake p;
Point d;
int count=0;

boolean visible = false;
public Trail(){
    ImageIcon i = new ImageIcon("C:/Matt's Stuff/Dot.png");
    still = i.getImage();
    p = new Snake();
    d = new Point();
}

public void getFirstDot(){
    visible = true;
}

public void findCoords(){
    if (visible == true)
    { 
        x = p.getX();
        y = p.getY();
    }
}

public Integer getX(){
    return x;
}

public Integer getY(){
    return y;
}

public Image getImage(){
    return still;
}
} 
```

现在我的问题是：尾部类中的`p.getX()`and`p.getY()`不起作用！尾块就在蛇头最初开始的地方！我不知道发生了什么，我的研究似乎没有任何帮助！请帮帮我？为什么会这样`p.getX()`并且`p.getY()`会在主要的游戏类中工作，而不是在尾巴的？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:06:57.687

您正在构造函数`new Snake()`内部创建一个`Trail`，然后引用*它* `Snake`而不是已知的那个`Game`。您应该传入对构造函数的引用，而不是创建一个*new* `Snake`，以便调用实际正在更新的对象的方法：

```
// In the Trail class
public Trail(Snake s) {
    p = s;
    // other stuff
}

// In the Game class:
trail = new Trail(p);
// ... 
```

现在，当您调用`p.getX()`等时，您实际上将指向正确的`Snake`，因此您应该正确看到您的位置更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:07:25.560

您应该将现有`Snake`对象的引用传递给`Trail`构造函数以使其工作。例如在`Game`课堂上你的代码应该是这样的：

```
public Game(){
    p = new Snake();
    r = new RandomDot();
    trail = new Trail(p);//Pass the reference of Snake so that you get all information w.r.t the current Snake in consideration
    w = new Point();
    addKeyListener(new AL());
    setFocusable(true);
    ImageIcon i = new ImageIcon("C:/Matt's stuff/background.png");
    img = i.getImage();
    time = new Timer(t, this);
    time.start();
} 
```

并将 Trail 构造函数更改如下：

```
public Trail(Snake p){
    ImageIcon i = new ImageIcon("C:/Matt's Stuff/Dot.png");
    still = i.getImage();
    this.p = p;
    d = new Point();
} 
```

# android - Surfaceview 上的 Drawtext 仅适用于模拟器，但不适用于设备

> ID：15774278
> 
> 赞同：2
> 
> 时间：2013-04-02T21:00:23.637
> 
> 标签：android, android-canvas, surfaceview, drawtext

我在 SurfaceView 上使用 canvas.drawText 并且输出在模拟器上看起来是正确的，但是当我将应用程序部署到我的设备（三星 Galaxy S3）时，文本是从上到下写的，如下所示：

```
T
E
s
t 
```

![设备三星 Galaxy S3 上的错误输出](https://i.stack.imgur.com/0GWxz.png)

看起来像在文本的每个字符之后添加了一个换行符。

设备是否是横向的并不重要，它永远不会工作，我不知道为什么。

我究竟做错了什么？

![模拟器正确显示输出](https://i.stack.imgur.com/5aa3C.png)

在 AndroidManifest.xml 我使用：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" /> 
```

我正在使用的代码：

```
public class MainActivity extends Activity {

    DemoView renderView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        renderView = new DemoView(this);
        setContentView(renderView);
    }

    @Override
    public void onResume() {
        super.onResume();
        renderView.resume();
    }

    @Override
    public void onPause() {
        super.onPause();
        renderView.pause();
    }

    private class DemoView extends SurfaceView implements Runnable{
        Thread renderThread = null;
        SurfaceHolder holder;
        volatile boolean running = false;

        public DemoView(Context context){
            super(context);
            this.holder = getHolder();
        }

        public void resume() {
            running = true;
            renderThread = new Thread(this);
            renderThread.start();
        }

        public void run() {
            Canvas canvas;

            while(running) {
                if(!holder.getSurface().isValid())
                    continue;
                Paint test = new Paint(Color.YELLOW);
                test.setColor(Color.YELLOW);
                canvas = holder.lockCanvas();
                canvas.drawText("TEst", 10, 10, test);
                holder.unlockCanvasAndPost(canvas);
            }
        }

        public void pause() {
            running = false;
            while(true) {
                try {
                    renderThread.join();
                    break;
                } catch (InterruptedException e) { // retry
                }
            }
        }
    }
} 
```

谢谢你的帮助！斯蒂芬妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:28:09.620

你的使用`SurfaceHolder`很奇怪。我认为意外的行为是由于这个原因。这就是我过去使用 SurfaceView 的方式：

```
public void run() {
        Canvas canvas;

        while(running) {
            try {
              if(!holder.getSurface().isValid())
                continue;
              canvas = holder.lockCanvas();
              synchronized (surface) {
                //Code to draw text/etc
              }
            } catch (...) {
            } finally {
              holder.unlockCanvasAndPost(canvas);
            }                
        }
    } 
```

请注意您缺少的`lockCanvas`表达式以实际分配画布并与`unlockCanvasAndPost`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:40:46.507

问题是我初始化`Paint test`错误！

错误的：

```
Paint test = new Paint(Color.YELLOW); 
```

正确的：

```
Paint test = new Paint();
test.setColor(Color.YELLOW); 
```

一件很小的事，却有很大的作用！

# mysql - Mysql查询以获取每月计数

> ID：15774280
> 
> 赞同：13
> 
> 时间：2013-04-02T21:00:37.580
> 
> 标签：mysql, count, group-by

我有一个表格供我的用户使用，其中有一个名为“created”的字段，其中包含注册日期。

如何获取包含过去 12 个月内每月注册数计数的列表？像这样：

```
Month   Count
1        1232
2        2222
3         122
4        4653
...       ...
12       7654 
```

我不习惯使用 mysql，所以直到现在我只知道如何计算去年的注册数量，而不是如何将过去 12 个月的数量分组。提前致谢！

更新

现在我得到了这个，使用@fthiella 解决方案：

```
+------------------------------+-------------------------------+----------+
| Year(FROM_UNIXTIME(created)) | Month(FROM_UNIXTIME(created)) | Count(*) |
+------------------------------+-------------------------------+----------+
|                         2012 |                             4 |     9927 |
|                         2012 |                             5 |     5595 |
|                         2012 |                             6 |     4431 |
|                         2012 |                             7 |     3299 |
|                         2012 |                             8 |      429 |
|                         2012 |                            10 |     3698 |
|                         2012 |                            11 |     6208 |
|                         2012 |                            12 |     5142 |
|                         2013 |                             1 |     1196 |
|                         2013 |                             2 |       10 |
+------------------------------+-------------------------------+----------+ 
```

我如何强制查询给我count = 0的月份？

@fthiella 的解决方案（非常感谢！）：

```
 SELECT y, m, Count(users.created)
     FROM (
      SELECT y, m
      FROM
         (SELECT YEAR(CURDATE()) y UNION ALL SELECT YEAR(CURDATE())-1) years,
         (SELECT 1 m UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
           UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8
           UNION ALL SELECT 9 UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12) months) ym
       LEFT JOIN users
       ON ym.y = YEAR(FROM_UNIXTIME(users.created))
          AND ym.m = MONTH(FROM_UNIXTIME(users.created))
     WHERE
       (y=YEAR(CURDATE()) AND m<=MONTH(CURDATE()))
       OR
       (y<YEAR(CURDATE()) AND m>MONTH(CURDATE()))
     GROUP BY y, m; 
```

结果：

```
+------+----+----------------------+
| y    | m  | Count(users.created) |
+------+----+----------------------+
| 2012 |  5 |                 5595 |
| 2012 |  6 |                 4431 |
| 2012 |  7 |                 3299 |
| 2012 |  8 |                  429 |
| 2012 |  9 |                    0 |
| 2012 | 10 |                 3698 |
| 2012 | 11 |                 6208 |
| 2012 | 12 |                 5142 |
| 2013 |  1 |                 1196 |
| 2013 |  2 |                   10 |
| 2013 |  3 |                    0 |
| 2013 |  4 |                    0 |
+------+----+----------------------+ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T21:03:18.883

如果 created 是一个 INT 字段，您应该使用[FROM_UNIXTIME](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)函数将其转换为日期字段，然后使用[MONTH](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)函数提取月份：

```
SELECT Month(FROM_UNIXTIME(created)), Count(*)
FROM yourtable
WHERE FROM_UNIXTIME(created) >= CURDATE() - INTERVAL 1 YEAR
GROUP BY Month(FROM_UNIXTIME(created)) 
```

这将计算过去 12 个月内创建的所有行。请注意，最好也按年份分组：

```
SELECT Year(FROM_UNIXTIME(created)), Month(FROM_UNIXTIME(created)), Count(*)
FROM yourtable
WHERE FROM_UNIXTIME(created) >= CURDATE() - INTERVAL 1 YEAR
GROUP BY Year(FROM_UNIXTIME(created)), Month(FROM_UNIXTIME(created)) 
```

如果您需要计算注册号而不是行数，您可以使用类似

```
COUNT(registration_number) 
```

跳过空值，或

```
COUNT(DISTINCT registration_number) 
```

只计算不同的。

**编辑**

如果您还需要显示 count=0 的月份，我会使用这样的查询来返回当前和上一年的所有月份：

```
SELECT y, m
FROM
  (SELECT YEAR(CURDATE()) y UNION ALL SELECT YEAR(CURDATE())-1) years,
  (SELECT 1 m UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
    UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8
    UNION ALL SELECT 9 UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12) months; 
```

然后我会使用 LEFT JOIN，它返回第一个查询的所有行，并且只返回匹配的第二个查询的行：

```
SELECT y, m, Count(yourtable.created)
FROM (
  SELECT y, m
  FROM
    (SELECT YEAR(CURDATE()) y UNION ALL SELECT YEAR(CURDATE())-1) years,
    (SELECT 1 m UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
      UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8
      UNION ALL SELECT 9 UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12) months) ym
  LEFT JOIN yourtable
  ON ym.y = YEAR(FROM_UNIXTIME(yourtable.created))
     AND ym.m = MONTH(FROM_UNIXTIME(yourtable.created))
WHERE
  (y=YEAR(CURDATE()) AND m<=MONTH(CURDATE()))
  OR
  (y<YEAR(CURDATE()) AND m>MONTH(CURDATE()))
GROUP BY y, m 
```

（请注意，我在这里只考虑过去 12 个月，所以如果我们在 2013 年 4 月中旬，它将在 2012 年 5 月至 4 月 13 日期间计算行数，如果这不是正确的行为，请告诉我）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-02T21:03:28.957

```
SELECT MONTH(reg_date) , COUNT(reg_date) 
FROM your_table
WHERE reg_date >= NOW() - INTERVAL 1 YEAR
GROUP BY MONTH(reg_date) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-24T16:58:04.617

如果这对其他人有帮助，我还想要这个查询，但是对于给定的时间间隔，不一定是过去 12 个月（也有日期的时间戳）：

```
set @start='2013-05-01 00:00:00';
set @end='2015-03-31 00:00:00';

SELECT YEAR(FROM_UNIXTIME(yourtable.created_date)), MONTH(FROM_UNIXTIME(yourtable.created_date)), COUNT(yourtable.created_date) 
FROM yourtable
WHERE created_date BETWEEN UNIX_TIMESTAMP( DATE(@start) ) AND UNIX_TIMESTAMP( DATE(@end) )
GROUP BY YEAR(FROM_UNIXTIME(yourtable.created_date)), MONTH(FROM_UNIXTIME(yourtable.created_date))
ORDER BY YEAR(FROM_UNIXTIME(yourtable.created_date)), MONTH(FROM_UNIXTIME(yourtable.created_date)); 
```

# android - （支持）MapFragment 生命周期调用

> ID：15774282
> 
> 赞同：2
> 
> 时间：2013-04-02T21:00:46.330
> 
> 标签：android, supportmapfragment, mapfragment

我刚刚开始使用 MapFragment（或者实际上是 SupportedMapFragment，因为我的目标是 API 8）。我过去从未使用过 MapView (V1)。

我注意到的是，在 MapView 上，有人被告知要从 Activity 进行生命周期调用（onPause() 等），但是在（支持的）MapFragment 中没有任何关于这样做的记录，尽管它似乎具有与 MapView 相同的方法.

有没有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:23:11.390

`Fragment`s 处理他们自己的生命周期，这是他们非常好的事情之一。如果您问是否必须在 a 上明确调用`onResume`,`onPause`等... `MapFragment`，答案是否定的。

s 的意义`Fragment`在于拥有模块化的 UI，您可以将其放入应用程序的不同部分。例如，您可以在手机上切换地图片段和列表片段，但在平板电脑上将它们并排放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-03T22:26:23.703

快速参考：[https ://developer.android.com/guide/components/fragments.html#Lifecycle](https://developer.android.com/guide/components/fragments.html#Lifecycle)

对于**MapFragment**，您在**onPause(** )之前有**onMapReady(** ) 。

 **[![在此处输入图像描述](https://i.stack.imgur.com/IKp4M.png)](https://i.stack.imgur.com/IKp4M.png)**

# javascript - ESRI utils.createMap JSON 操作层

> ID：15774292
> 
> 赞同：0
> 
> 时间：2013-04-02T21:01:02.257
> 
> 标签：javascript, arcgis, esri

我正在使用 esri utils.createMap 从 JSON 创建一个 webmap。我的问题是我有一个图层，其中实际上包含单独的信息，在这种情况下，它包含自行车道、远足径、人行道等。地图只是一次显示了它们。我想知道是否有办法在 JSON 实现中拆分各个路径，以便它们都存在“自己的”操作层……这是该层的代码……

```
"url": "http://../mymapserver/8",
            "visibility": false,
            "opcaity": 0.85,
            "title": "Trails",
            "visibleLayers": 1,
            "layerDefinition": {
                "minScale": 0
            } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:54:24.870

由于 setLayerDefinitions 对我不起作用，我找到了不同的解决方案。我使用 JSON 创建了单独的 featureLayers，并在初始地图创建后将它们添加到地图中。

谢谢。

# ruby - EventMachine.add_timer(0)

> ID：15774294
> 
> 赞同：1
> 
> 时间：2013-04-02T21:01:09.273
> 
> 标签：ruby, eventmachine, reactor

我遇到了一个添加超时计时器的代码`0`：

```
EventMachine.add_timer(0) {
  ...
} 
```

这有意义吗？这怎么可能有用？这与使用有什么不同`next_tick`吗？

```
EventMachine.next_tick {
  ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:04:52.273

因为我自己是古玩，所以我快速浏览了 Eventmachine 源代码：

[http://eventmachine.rubyforge.org/EventMachine.html#run-class_method](http://eventmachine.rubyforge.org/EventMachine.html#run-class_method)

我在事件循环中找到了这个：

```
...
if @next_tick_queue && !@next_tick_queue.empty?
  add_timer(0) { signal_loopbreak }
end
... 
```

这几乎意味着当您在内部定义 next_tick 时，它将使用 add_timer(0) {..} 。

唯一的区别可能是执行顺序，我不确定此时排队的计时器是以哪种方式执行的。

# android - 允许用户更改 Android 中的默认应用程序图标

> ID：15774301
> 
> 赞同：1
> 
> 时间：2013-04-02T21:01:42.740
> 
> 标签：android, icons, manifest

事情是这样的...

我想允许用户更改默认应用程序图标，该图标设置在 android:icon 属性的标记内的清单中。

那么，我该怎么做呢？有任何想法吗？

# string - 如何将字符串变量传递给需要 PChar 的函数？

> ID：15774302
> 
> 赞同：7
> 
> 时间：2013-04-02T21:01:44.287
> 
> 标签：string, delphi, pchar

我有这个代码：

```
ShellExecute(Handle, 'open',
             'C:\Users\user\Desktop\sample\menu\WTSHELP\start.html',
             nil, nil, sw_Show); 
```

如何用字符串变量替换第三个参数中的文字？如果我使用下面的代码，它不会编译。

```
var
  dir: string;

dir := 'C:\Users\user\Desktop\sample\menu\WTSHELP\start.html';
ShellExecute(Handle, 'open', dir, nil, nil, sw_Show); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T21:04:15.733

我假设那`dir`是 type `string`。然后

```
ShellExecute(Handle, 'open', PChar(dir), nil, nil, SW_SHOWNORMAL); 
```

应该管用。事实上，编译器会告诉你这一点；它说的是

```
[DCC Error] Unit1.pas(27): E2010 Incompatible types: 'string' and 'PWideChar' 
```

（另请注意，您通常`SW_SHOWNORMAL`在调用时使用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T21:05:27.577

`ShellExecute`是一个 Windows API。因此，您需要将`PChar`类型传递给它。

如果我正确假设您的 dir 变量是一个字符串，那么您可以将字符串转换为 PChar，并按`ShellExecute`如下方式调用：

```
ShellExecute(Handle,'open', PChar(dir) ,nil,nil,sw_Show); 
```

# javascript - Onclick 文档元素永久禁用？

> ID：15774304
> 
> 赞同：0
> 
> 时间：2013-04-02T21:01:49.490
> 
> 标签：javascript, html

嗨，我正在尝试操作一个复选框。如果选中此复选框，其余复选框将被禁用。到目前为止我所拥有的作品。除非您取消选中它。复选框仍然被禁用。我可能正在寻找一种方法来取消选中 disabled false 。

```
 <input name="Package" type="checkbox" id="Package" on   onClick="document.getElementById('Gala').checked = this.checked; document.getElementById('Gala').disabled=true; " value="1" maxlength="1" <?=($fullPackageYes)?> /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:14:53.223

```
 <input name="Package" onclick="disable_checkboxes(this)" type="checkbox" id="Package" value="1" maxlength="1" <?=($fullPackageYes)?> />

<script>
function disable_checkboxes(ele){

    if(ele.checked == 'checked'){
        document.getElementById('Gala').checked = 'checked'; 
        document.getElementById('Gala').disabled='disabled';
    }else {
        document.getElementById('Gala').checked = ''; 
        document.getElementById('Gala').disabled='';   
    }
 }
 </script> 
```

显然，@david 解决了您的问题，但是我强烈建议您将其切换为更像上述代码的内容，内联 javascript 根本不是很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:22:30.450

现场演示：[JSFIDDLE](http://jsfiddle.net/3AaPP/2/ "JSFIDDLE")

```
<input id="package" name="Package" type="checkbox" id="Package" value="1" maxlength="1" <?=($fullPackageYes)?> checked />

<input type="checkbox" id="Gala" value="1" maxlength="1"/> Gala

<script>
var Gala = document.getElementById('Gala');

document.getElementById('package').onclick=function(){
    Gala.disabled = this.checked ? "" : "disabled";
    Gala.checked = this.checked ? Gala.checked : "";
}
</script> 
```

# node.js - 在 Mongoose 中对嵌套对象使用“唯一”

> ID：15774314
> 
> 赞同：0
> 
> 时间：2013-04-02T21:02:13.880
> 
> 标签：node.js, mongodb, mongoose

所以我有一个带有嵌套*配置文件*属性的用户模式，我想确保当配置文件属性存在时所有配置文件 ID 都是唯一的：

```
UserSchema = new Schema {
    ...
    ...
    profile : {
        id : {
           type : String
           unique : true
           sparse : true
        }
        ...
        ...
    }
} 
```

然而，在运行我的测试时，我可以使用相同的 profile.id 值保存两个不同的用户。嵌套文档是否没有强制执行唯一属性？我错过了什么吗？

打开日志记录后，我可以看到这样的输出（我已经删除了大部分字段）：

```
Mongoose: users.ensureIndex({ email: 1 }) { safe: undefined, background: true, unique: true }  
Mongoose: users.insert({ profile: { id: '31056' }) {}  
Mongoose: users.ensureIndex({ 'profile.id': 1 }) { safe: undefined, background: true, sparse: true, unique: true }  
Mongoose: users.insert({ profile: { id: '31056' }) {} 
```

仍在插入重复值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:12:30.823

也许它仅在嵌套属性内验证为唯一。我从不相信`unique`自己，总是去手动验证，这样我就可以拥有更多的控制权：

从来没有在 Mongoose 中处理过嵌套文档，也不太确定它是否会起作用，但至少让你有一个想法：

```
User.schema.path('profile.id').validate(function(value, respond) {  
  mongoose.models["User"].findOne({ profile.id: value }, function(err, exists) {
    respond(!!exists);
  });
}, 'Profile ID already exists'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:25:35.487

[Aaron](https://stackoverflow.com/users/1325058/aaronheckmann)的建议修复了由异步创建的索引引起的竞争条件。我等待执行我的用户模式的单元测试，直到发出索引事件：

```
User.on('index', function (err) { ... }) 
```

# c# - 选择具有部分匹配字符串的列表框成员

> ID：15774316
> 
> 赞同：1
> 
> 时间：2013-04-02T21:02:29.587
> 
> 标签：c#, winforms, listbox

我目前正在使用这种方法来匹配确切的字符串并在列表框中选择它所属的索引：

```
private void searchbtn_Click(object sender, EventArgs e)
{
    string term  = searchbox.Text;
    int index = memlist.FindString(term);
    if (index != -1)
        memlist.SetSelected(index, true);
} 
```

是否可以选择所有部分匹配的字符串？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:13:15.980

您可以使用以下代码选择项目的索引，这些索引以您的字符串开头，然后遍历它们并设置选定的项目：

```
memlist.ClearSelected(); // clear previous selection
memlist.Items.Cast<object>()
       .Select((item, index) => new { Text = memlist.GetItemText(item), Index = index })
       .Where(x => x.Text.StartsWith(term, StringComparison.CurrentCultureIgnoreCase))
       .ToList()
       .ForEach(x => memlist.SetSelected(x.Index, true)); 
```

顺便说一句，不要忘记将`SelectMode`ListBox 设置为多选。

* * *

您还可以在 foreach 循环中选择项目：

```
var indexesToSelect = memlist.Items.Cast<object>()
      .Select((item, index) => new { Text = memlist.GetItemText(item), Index = index })
      .Where(x => x.Text.StartsWith(term, StringComparison.CurrentCultureIgnoreCase))
      .Select(x => x.Index);

foreach(int index in indexesToSelect)
     memlist.SetSelected(index, true); 
```

# angularjs - 过滤角度重复

> ID：15774318
> 
> 赞同：0
> 
> 时间：2013-04-02T21:02:40.117
> 
> 标签：angularjs, angularjs-ng-repeat

尝试为 Angular.js 创建一个过滤器

Controller.js 示例片段：

```
function TitleListCtrl($scope) {
  $scope.titles = [
    { "name": "Foobar",
      "editions": 
        [{"print": true, 
          "ebook": false,
          "audio": false }]
    },
   { "name": "FooBarBar",
      "editions": 
        [{"print": false, 
          "ebook": false,
          "audio": false }]
   }
];} 
```

角HTML：

```
<ul ng-controller="TitleListCtrl">
        <li class="TitleList" ng-repeat="title in titles 
                                         | filter:isUpcoming 
                                         | orderBy:'date'">{{title.name}}</li>
</ul> 
```

现在，我试图只返回那些没有活动版本的标题（没有版本数组的成员设置为 true）。发现很难在网上找到这样的例子......

```
$scope.isUpcoming = function(title) {
return title.editions[0] & title.editions[1] & title.editions[2]===false;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:02:40.117

我使用 data-ng-show 代替了上述方法：

```
<ul ng-controller="TitleListCtrl">
<li class="TitleList" data-ng-show="!(title.upcoming)" 
                                    ng-repeat="title in titles 
                                    | filter:query 
                                    | orderBy:'date'">{{title.name}}</li>
</ul> 
```

`"upcoming": true,`并在需要的地方添加了一对新的标题。

```
function TitleListCtrl($scope) {
  $scope.titles = [
    { "name": "Foobar",
  "editions": 
    [{"print": true, 
      "ebook": false,
      "audio": false }]
    },
   { "name": "FooBarBar",
  "editions": 
    [{"print": false, 
      "ebook": false,
      "audio": false }],
  "upcoming": true
   }
];} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:09:34.967

请查看 plunker [http://plnkr.co/edit/SkXnZhwic8KHWvj0JyFI?p=preview](http://plnkr.co/edit/SkXnZhwic8KHWvj0JyFI?p=preview)。

它实现了一个自定义过滤器，将长列表过滤到即将到来的列表中，然后呈现即将到来的列表

# php - 用跳过解析表中的大表？

> ID：15774321
> 
> 赞同：0
> 
> 时间：2013-04-02T21:02:44.087
> 
> 标签：php, arrays, json

我正在开发一个解析 json 并查找两个相同单词的 android 应用程序。对于当天。

但我现在只是在询问将所有 HTML 代码解析为 Json 的最佳方法。所以[这个网站](http://www.rsgrijks.nl/Groepenrooster%20internet/GroeHTML_V2A.htm)是荷兰语的。但我会试着指导你一点，

最上面的表格表示`Maandag`through `vrijdag`，翻译过来的，是从左到右的天数（周一到周五）。

我需要跳过这些单元格。来自那个的单元格也说：从上到下的1、2、3、4、5。

但现在！“主”表中的单元格中有一个表。所以一个单元格中的表格。我只需要单元格中表格中的第三个单元格。

例如：

在“Vrijdag”，“1”它说：“L119”

我只需要将这些与日期和数字**放在一起。**所以这可能是一个 3D 数组 json。

如果需要，我可以做进一步的解释。

但是得出一个结论：我需要一种方法来将教室（例如“L119”、“D60”、“S-5”、“C162”）连同左侧的日期和数字解析为 3D json 数组。

如果您可以发送*源代码*，那就太棒了，但如果您这样做，请提供一些简单的解释。如果你愿意，我也会把你的名字放在学分中。但这将是一个荷兰应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:20:23.307

NVM 我自己弄的。如果你想知道我是怎么做到的：

我使用了一个叫做“Simple_HTML_Dom.php”的东西，我用它来找到正确的表格和内容！

***-蒂姆***

# typo3 - TYPO3 Extbase 存储库查询：如何在 M:N 关系中查找给定 N 的多个值的记录？

> ID：15774323
> 
> 赞同：1
> 
> 时间：2013-04-02T21:02:50.637
> 
> 标签：typo3, extbase, typo3-flow

我们有一个简单的模型*公司*。每个公司可以有一个或多个*部门*。每个部门都属于某种类型*Type*。

现在我们需要查询返回所有公司，其中至少有一个 X 类型的部门**和**一个 Y 类型的部门（即每个返回的公司有两个或多个部门，至少一个 X 和一个 Y）。

如何通过查询来完成？

如果 getTypes 返回多于一种类型，则此查询不会给出任何结果。

```
if (count($types = $demand->getTypes()) > 0) {
    foreach ($types as $type)
        $constraints[] = $query->contains('dept.type', $type);
}

$result = $query->matching($query->logicalAnd($query->logicalAnd($constraints)))->execute(); 
```

此查询返回 X**或**Y类型的结果

```
if (count($types = $demand->getTypes()) > 0) {
    $constraints[] = $query->in('dept.type', $types);
} 
```

表格如下所示（简化）：

```
CREATE TABLE IF NOT EXISTS `company` (
  `uid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(128) NOT NULL,
  PRIMARY KEY (`uid`)
);

CREATE TABLE IF NOT EXISTS `dept` (
  `uid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(128) NOT NULL,
  `company` int(10) unsigned NOT NULL,
  `type` int(10) unsigned NOT NULL,
  PRIMARY KEY (`uid`)
);

CREATE TABLE IF NOT EXISTS `type` (
  `uid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(128) NOT NULL,
  PRIMARY KEY (`uid`)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:44:51.447

```
if (count($types = $demand->getTypes()) > 0) {
    foreach ($types as $type)
        $constraints[] = $query->contains('dept.type', $type);
} 
```

你没有显示进一步的处理。

如果您需要 AND 操作，请使用：

```
$result = $query->matching($query->logicalAnd($query->logicalAnd($constraints)))->execute(); 
```

如果您需要 OR 操作，请使用：

```
$result = $query->matching($query->logicalAnd($query->logicalOr($constraints)))->execute(); 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T00:53:45.840

我发现 $query->contains() 只适用于普通的 _mm 表。

所以这就是我所做的：我刚刚向数据库添加了一个视图，其中包含 _mm 表的必填字段：

```
CREATE VIEW `company_type_mm` AS
SELECT 
    `company` AS `uid_local`, 
    `type` AS `uid_foreign`,
    0 AS `sorting`,
    0 AS `sorting_foreign` 
FROM `dept`; 
```

*然后我在company*表的 TCA 中添加了一个新字段*dept ：*

 *```
'type' => array(
    ...
    'config' => array(
        'foreign_table' => 'type',
        'MM' => 'company_type_mm',
        ...
    )
) 
```

**现在，对于具有 A 类和**B 类部门的公司，我得到了正确的结果，如下所示：

```
if (count($types = $demand->getTypes()) > 0) {
    foreach ($types as $type)
        $constraints[] = $query->contains('type', $type);
} 
```*

# php - Yii URL 配置

> ID：15774324
> 
> 赞同：0
> 
> 时间：2013-04-02T21:02:54.233
> 
> 标签：php, yii

我正在创建一个 yii 应用程序并对其进行了一些更改：

我创建了一个默认文件夹和管理文件夹，并将所有文件夹（MVC）放在每个文件夹中，然后我将所有未知请求重定向，例如：127.0.0.1/myframework 到 127.0.0.1/myframework/default 和 .htaccess，它工作得很好。

当我转到默认页面时它可以工作，但是当我想深入到另一个控制器（如 127.0.0.1/myframework/default/contactus）时，它返回未找到（我为 contactus 制作了 MVC），所以我想我应该对 main.js 进行更改。 php 在'urlManager'部分，但我不知道我所有的努力是如何失败的。所以任何帮助将不胜感激。

我的结构是这样的：

> 根
> 
> ```
> admin
> 
>     asset
> 
>     protected
> 
>     ...
> 
> default
> 
>     asset
> 
>     protected
> 
>     ... 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:09:14.220

谢谢大家的评论，他们引导我找到解决方案，解决方案是：

首先 - 完整的 URL 类似于：

> 127.0.0.1/myframework/default/index.php/services

与我以前的配置一起工作，我只是错过了键入 index.php，在 main.php 中没有任何配置与“urlManager”部分，很明显，我知道。

为了摆脱 URL 中烦人的“index.php”，.htaccess 发挥了神奇的作用。

所以我在我的项目中放了两个 .htaccess，一个在根目录中，另一个在默认文件夹中。

根 htaccess 包含：

> 重写引擎开启
> 
> RewriteRule ^$ http://[local-host]/myframework/default/index.php

和默认文件夹 htaccess：

> 重写引擎开启
> 
> RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d
> 
> 重写规则。索引.php

# android - 将照片从 C++ 服务器发送到安卓手机

> ID：15774328
> 
> 赞同：0
> 
> 时间：2013-04-02T21:03:23.720
> 
> 标签：android, c++, opencv

我需要将照片从 C++ 服务器发送到 android 手机我的照片是使用 open cv libray 加载的，我在 android 中收到它但我无法将它以位图形式显示在 android 手机中我的服务器代码看起来像这样

```
void sendMat(Mat m , SOCKET client) //send an Image to the cleint called client
char chNum[1];
chNum[0] = m.channels();
send(client , chNum , 1 , 0);
if(m.channels() == 1)
{
char *buf = new char[m.cols * m.rows];
for(int i = 0 ; i < m.rows ; i++)
    for(int j = 0 ; j < m.cols ; j++)
      buf[i*m.cols+j] = m.at<char>(i,j); 
for(int i = 0 ; i < m.cols * m.rows ; i++)
    cout << (int)buf[i] << endl;
send(client , buf , m.rows*m.cols , 0);

}
else  //m.channels == 3
{
    char *buf[3];
    for(int i = 0 ; i < 3 ; i++)
        buf[i] = new char[m.rows * m.cols];
    for(int i = 0 ; i < m.rows ; i++)
        for(int j = 0 ; j < m.cols ; j++)
        {
            buf[0][i*m.cols+j] = m.at<Vec3b>(i,j)[0];
            buf[1][i*m.cols+j] = m.at<Vec3b>(i,j)[1];
            buf[2][i*m.cols+j] = m.at<Vec3b>(i,j)[2];
        }
    send(client , buf [0], m.rows*m.cols , 0);
    send(client , buf [1], m.rows*m.cols , 0);
    send(client , buf [2], m.rows*m.cols , 0);

} 
```

}

我的客户代码是这样的

```
client = new Socket("10.0.2.2" , 2222);
                    OutputStream out = client.getOutputStream();
                    InputStream in = client.getInputStream();
                    int img[] = recData(in , chN);
                    This.im = Bitmap.createBitmap(img, WIDTH, HEGIHT, Bitmap.Config.ARGB_8888); 
```

我的问题是如何实现这个方法（recData）我尝试了很多方法但我失败了

# sql - JPQL 查询：不区分大小写地使用 ORDER BY

> ID：15774330
> 
> 赞同：1
> 
> 时间：2013-04-02T21:03:35.523
> 
> 标签：sql, jakarta-ee, jpa, jpql, openjpa

使用[这个](https://stackoverflow.com/questions/9934494/jpa-perform-case-insensitive-order-by)线程（这很有帮助）所以我对可能 jpql 查询做同样的事情（非常简单，只需选择所有记录但需要按“名称”字段排序）：

```
SELECT o, LOWER(o.name) AS nameInOrder FROM UserGroup o ORDER BY nameInOrder ASC 
```

我正在使用 openjpa，不幸的是该应用程序给了我

```
 java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to com.myname.app.UserGroup 
```

运行整个jpql的代码是这样的：

```
public static List<UserGroup> findAllUserGroups(){
    return entityManager().createQuery("SELECT o, LOWER(o.name) AS nameInOrder FROM UserGroup o ORDER BY nameInOrder ASC", UserGroup.class).getResultList();
} 
```

我的猜测，似乎 entityManager`o`作为一个对象，但`LOWER(o.name)`作为另一个？

请帮忙，真的没有看到任何问题，但 OpenJPA(v2.2) 不合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:26:38.617

根据您链接到的线程，此查询的返回类型是`List<Object[]>`and not `List<UserGroup>`。

`UserGroup`一种选择是让查询保持原样并通过循环从 List 中拉出s：

```
List<Object[]> results = entityManager().createQuery("SELECT o, LOWER(o.name) AS nameInOrder FROM UserGroup o ORDER BY nameInOrder ASC", UserGroup.class).getResultList();
List<UserGroup> userGroups = new ArrayList<UserGroup>();
for(Object[] result : results) {
    userGroups.add( result[0] );
}
return userGroups; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:47:21.947

作为记录，这是我按照 jonc 的建议执行的

```
// find all groups in order
public static List<UserGroup> findAllUserGroups(){
    List<Object> results = entityManager().createQuery("SELECT o, LOWER(o.name) AS nameInOrder FROM UserGroup o ORDER BY nameInOrder ASC", Object.class).getResultList();
    List<UserGroup> userGroups = new ArrayList<UserGroup>();
    for(Object result : results) {
        Object[] resultArray = (Object[])result;
        userGroups.add((UserGroup)resultArray[0]);
    }
    return userGroups;
} 
```

考虑`result`从查询中返回的每个记录集

```
resultArray[0] is `o`,
resultArray[1] is `LOWER(o.name) AS nameInOrder`, which can be ignored and only use for ordering purpose. 
```

# sql-server - 结合数据库中的格式化和数据绑定

> ID：15774332
> 
> 赞同：0
> 
> 时间：2013-04-02T21:03:48.557
> 
> 标签：sql-server, vb.net, data-binding, string-formatting, datarepeater

我在 DataRepeater 中有一组标签。标签从 SQL 数据库中的表中获取它们的值（假设 GetSQLResults 从 SQL 数据库中获取数据并返回一个 DataTable）。

```
Dim salesDataTable As DataTable = GetSQLResults() 
```

而对于绑定

```
SalesLabel.DataBindings.Add("Text", salesDataTable , "Sales") 
```

其中 SalesLabel 是表单中的标签，“Sales”是数据库中列的名称。

我想要做的是将假设美国货币格式应用于来自数据库的这个销售值。我不知道如何将格式信息与我上面为 DataBinding 编写的命令结合起来。它是一个 Windows 窗体应用程序，我使用的是 VB .Net。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:22:18.813

该类`Binding`有一个[`FormatString`](http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.formatstring.aspx)属性，您应该能够提供您想要的标准或自定义[格式字符串](http://msdn.microsoft.com/en-us/library/26etazsy.aspx)。

我想也许是这样的：

```
Dim salesBinding As Binding = new Binding("Text", salesDataTable , "Sales")
salesBinding.FormatString = "C"
SalesLabel.DataBindings.Add(salesBinding) 
```

会做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:20:49.830

我根据 nkvu 的回答和[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/c860168f-46e5-4786-a68d-ac69c6a7a248/上的帖子尝试了这个](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/c860168f-46e5-4786-a68d-ac69c6a7a248/)

```
Dim WithEvents salesBinding As Binding 
```

* * *

```
salesBinding = New Binding("Text", salesDataTable , "Sales")
SalesLabel.DataBindings.Add(salesBinding) 
```

* * *

```
Private Sub salesBinding_Format(ByVal sender As Object, ByVal e As System.Windows.Forms.ConvertEventArgs) Handles salesBinding .Format
    If e.Value Is DBNull.Value Then
    Else
        e.Value = Format(e.Value, "c")
    End If
End Sub 
```

这对我有用。

# breeze - Breeze EFContextProvider 返回与标准 DbContext 不同的数据

> ID：15774334
> 
> 赞同：0
> 
> 时间：2013-04-02T21:03:52.410
> 
> 标签：breeze

我有一个微风控制器，它返回的 JSON 与常规的 ole APIController 不同。

我的 Breeze.js 控制器有一个如下所示的方法：

```
[HttpGet]
public IQueryable<Application> Applications()
{
var admin = _contextProvider.Context.Administrators.Include(i => i.Applications).Single(o => o.Name == User.Identity.Name);
    return admin.Applications.AsQueryable();
} 
```

我有一个传统的 ApplicationsController: ApiController 有这样的方法：

```
 public IEnumerable<Application> Get()
    {
        var admin = myDbContext.Administrators.Include(i => i.Applications).Single(o => o.Name == User.Identity.Name);
        return admin.Applications.AsQueryable();
    } 
```

基本上，代码是相同的。但是，响应正文值不是。Breeze 响应正文包含 {$ref: "3"},{$ref: "4"} 而传统的 WebAPI 控制器响应显示正确的对象值。

想法？

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:01:57.203

我能够通过将 LINQ 重写为以下内容来解决我的问题：

```
 return from u in context.Administrators
               where u.Name == administratorName
               from d in u.Applications
               select d; 
```

我重新阅读了 Breeze 提供的文档，他们强调不返回循环引用。对于那些阅读本文的人，请确保您的 DbContext 在其构造函数中具有以下内容。

```
 Configuration.ProxyCreationEnabled = false;
        Configuration.LazyLoadingEnabled = false; 
```

我还删除了所有“虚拟”导航属性。

我原来的 LINQ 有一个 Include 语句，它会返回循环引用。在使用 BreezeController 之前，标准的 APIController 将数据准确地返回给客户端，只是重复的数据。一个 BreezeController 被循环引用绊倒了，返回的数据只是......好吧......奇怪和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:06:24.227

ApiController 上的 [BreezeController] 属性更改了默认的 JSON.net 序列化设置，以便微风可以序列化实体图，而无需多次重复同一实体。默认序列化程序不这样做。如果您将 [BreezeController] 属性应用于您的 api 控制器，您应该会看到“$ref”值出现。

# php - 表格数据仅显示条目的第一个字母

> ID：15774354
> 
> 赞同：1
> 
> 时间：2013-04-02T21:04:59.940
> 
> 标签：php, html-table

我正在将 mysql 表中的数据打印到我网页上的表中。这是代码

```
 Print "<table border cellpadding=5>"; 
      Print "<tr><th>Name:</th> <th>Size:</th> <th>Depth:</th> <th>Boat Access:</th>  
      <th>All Sports:</th> <th>Public Beach:</th> <th>Fish Species:</th> <th>Comments:
      </th></tr>"; 
       while($info = mysql_fetch_array( $data )) 
      {
       Print "<tr>"; 
       Print " <td>".$info['member'] . "</td> "; 
       Print "<td>".$info['size'] . " </td>";
       Print " <td>".$info['depth'] . "</td> "; 
       Print " <td>".$info['access'] . "</td> "; 
       Print " <td>".$info['sports'] . "</td> "; 
       Print " <td>".$info['beach'] . " </td>";
       Print" <td>".$info['bluegill'] ."   </td>";
       Print " <td>".$info['comments'] . "</td> "; "</tr>"; 
       } 
       Print "</table>"; 
```

它按原样工作得很好，但我的问题是如何将多个值放在同一个表数据中。我尝试了几种不同的方法，但没有任何效果。如果我把它 $info['bluegill'][beach] 它只输入第一个条目的第一个字母到表中。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:07:35.897

像这样连接每个打印

```
Print " <td>". $info['member'] . $info['thing'] . "</td> "; 
```

这将允许您在每个表格框中回显额外的值

# android - Google Maps Android API V2 在不使用 Places API 的情况下在地图上显示餐厅

> ID：15774363
> 
> 赞同：0
> 
> 时间：2013-04-02T21:05:28.270
> 
> 标签：android, google-places-api, google-maps-android-api-2

有什么方法可以在不使用 Places API 的情况下在我的地图上显示当地餐馆，如果不是，在我的 Android 应用程序中使用 Places API 将点覆盖到我的地图上的最简单方法是什么？

谢谢你

# php - PayPal 托管页面和定期计费（附加：定期计费暂停）

> ID：15774366
> 
> 赞同：1
> 
> 时间：2013-04-02T21:05:39.060
> 
> 标签：php, curl, paypal, paypal-subscriptions

我真的很想自己做这件事，但是在阅读了 Paypal 关于他们的服务和 API 和插件服务的文档将近一周之后，我放弃了。我需要帮助。

我有一个网站，每月订阅三个不同的套餐，我想使用 PayPal 的托管页面。现在，我面临一些问题。

~~首先，他们的文档非常混乱，以至于我仍然不明白他们提供什么以及我需要什么。因此，任何帮助将不胜感激。目前我已经设置了带有定期计费插件和托管结帐页面的高级付款。我的第一个问题是，当我进行 API 调用以获取 SecureTokenID 时，我得到响应 1（用户身份验证失败），但登录详细信息是正确的，我检查了多次。这是我进行此调用的代码：~~

 ~~~~```
/* - build NVP to be sent to paypal - */
$post['PARTNER']='paypal';
$post['VENDOR']='*';
$post['USER']='*';
$post['PWD']='*';
$post['TRXTYPE']='S';
$post['AMT']='5';
$post['CREATESECURETOKEN']='Y';
$post['SECURETOKENID']=md5(time().rand().time());
$post['MODE']='TEST';

$url='https://pilot-payflowpro.paypal.com';
/* - do cURL request to PayPal's API - */
 $ch = curl_init();
 curl_setopt ($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_VERBOSE, 1);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
// curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
// I know, inhere should be a certificate and it will be in final version

 curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
 curl_setopt($ch, CURLOPT_POST, 1);

 curl_setopt ($ch, CURLOPT_POSTFIELDS, $post);

// curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 10); // 3 seconds to connect
// curl_setopt ($ch, CURLOPT_TIMEOUT, 10); // 10 seconds to complete

 $output = curl_exec($ch);
 if(curl_errno($ch)){
  echo'error:' . curl_error($ch);
 }
 curl_close($ch); 
```~~  ~~~~第二个问题是，我究竟可以在哪里输入一个自定义变量字段，它代表一个数据库条目，所以我会从 IPN 知道哪个用户订阅/取消订阅？~~

第三，是否可以在 PayPal Manager 界面中设置订阅选项，或者我必须在每笔交易中发送订阅详细信息？

第四，我这样走对吗？从他们的网站和文档中，我了解到我需要高级付款和定期计费，仅此而已。要求是用户不能离开网站，所以我想使用托管结帐页面。

**编辑**：我解决了第一个和第二个问题（这是我在这里发布问题后第二次自己弄清楚了:)），但我需要第三点和第四点的帮助。

我还有其他问题。可以在用户选定的期间暂停定期计费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:56:33.050

要回答您的第三个问题，您需要将详细信息发送过来。您将无法在管理器中将订阅选项设置为每次创建配置文件时的默认配置。您在管理器中唯一能做的就是登录并在需要时根据您每次手动设置的条款设置个人资料。

至于您的其他问题，您可以使用 pro 并让买家留在您的网站上并进行 API 调用并完全控制流程，或者您可以使用信用卡部分位于 PayPal 页面上的托管页面。您可以在您网站的 iFrame 中包含此部分，因此商家似乎仍在您的网站上。如果您愿意，也可以使用透明重定向。~~~~

# phpunit - PHPUnit 从不使用正确的 include_path

> ID：15774367
> 
> 赞同：0
> 
> 时间：2013-04-02T21:05:39.290
> 
> 标签：phpunit

我最近在 Mac (10.8.3) 上安装了 PHPUnit（运行 PHP 5.4.7）。例如，当我尝试运行测试`phpunit testfile.php`时，我收到：

```
Warning: require_once(File/Iterator/Autoload.php): failed to open stream: No such file or
directory in /Users/myusername/pear/share/pear/PHPUnit/Autoload.php on line 64

Fatal error: require_once(): Failed opening required 'File/Iterator/Autoload.php' 
(include_path='.:') in /Users/myusername/pear/share/pear/PHPUnit/Autoload.php on line 64 
```

文件，`/Users/myusername/pear/share/pear/File/Iterator/Autoload.php`存在。

`php.ini`正确列出包含路径中的梨目录：

`.:/php/includes:/usr/local/apache/lib/php:/Users/myusername/pear/share/pear/`

然而，当我`var_dump(get_include_path());`进入`PHPUnit/Autoload.php`文件时，它打印出来`.:`就好像它是空的一样。

`php_ini_loaded_file`相反，转储 的值，只需返回`false`.

使用`php -i |grep php\.ini`并且`php --ini`只显示一个正在使用/加载的 php.ini：

```
Configuration File (php.ini) Path => /usr/local/apache/lib
Loaded Configuration File => /usr/local/apache/lib/php.ini 
```

我从命令行运行的一个简单的 test.php 文件中重复了 include_path 的 var_dumps 和 loaded_ini_file，它们打印出**正确**的信息。因此，与 phpunit 相关的东西没有加载正确的/任何 php.ini。

我没有使用任何不同于默认配置的配置——phpunit 今天刚刚安装在这台机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:10:04.403

确保您使用的 php.ini 文件是为 cli php 加载的文件。至少在我在 Linux 上安装 PHP 时，我有两个 php.ini 文件，一个位于 /etc/php/cgi-php5.4/php.ini，另一个位于 /etc/php/cli-php5.4/ php.ini。如果更改 cgi 版本，默认情况下不会影响 cli 版本，并且会导致包含路径为空。

* * *

另一个需要检查的地方是 phpunit.xml 文件。它有一个部分来指定包含路径。 [有关可用选项，请参见此处](http://www.phpunit.de/manual/3.6/en/appendixes.configuration.html)。我不确定为什么 phpunit 会重置路径，但这可能是解决问题的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:46.667

解决方案是：

运行后

```
`pear config-get php_bin` -i | grep -E Configuration\ File\|include_path 
```

它表明 Pear 使用的 ini 路径与 php-cli 不同：

```
Configuration File (php.ini) Path => /etc
Loaded Configuration File => (none)
include_path => .: => .: 
```

事实证明，Pear 是由 PHP 的原始/默认 Mac OS 副本配置的，而不是我后来安装的自定义版本。

一个可能不是最好的长期快速修复方法是符号链接它试图找到的 ini 文件：

`sudo ln -s /usr/local/apache/lib/php.ini /etc/php.ini`

之后，`phpunit FakeTest`命令生效，测试运行。

最终我需要重新安装/重新配置 Pear 以使用我加载的 php 版本。

# python - 使用 lxml 加载子元素会覆盖以前加载的元素

> ID：15774370
> 
> 赞同：0
> 
> 时间：2013-04-02T21:05:44.683
> 
> 标签：python, lxml

我已经用 Python 编写了一些自定义类，其中有两个函数可以使用 lxml 将类加载和保存到 xml 文件中。保存功能和大部分加载功能都有效，但我在加载 xml 时遇到问题。`<flows>`当我在标签和元素中读取and`<flow>`时，在每次迭代中，以前的值都会被覆盖。例如，我有三个`<step>`带有元素的`<flow>`元素： 1 `<flow>`the first `<step>`， 2 `<flow>`the second`<step>`和 3 `<flow>`the third `<step>`。值似乎已成功加载，但最终每个值都被以下内容覆盖`<step>`，因此我以加载 3`<step>`和每个相同的 3结束`<flow>`。

这是xml：

```
<step>
  <stepnumber>0</stepnumber>
  <steptitle>first step</steptitle>
  <participation>None</participation>
  <tools>tools</tools>
  <rules>rules</rules>
  <actors>
    <actor>first actor</actor>
    <actor>second actor</actor>
  </actors>
  <picture>none</picture>
  <flows>
   <flow>
     <number>0</number>
     <type>Information flow</type>
     <what>bits</what>
     <direction>From the first actor to the second one</direction>
     <firstactor>second actor</firstactor>
     <secondactor>first actor</secondactor>
   </flow>
  </flows>
</step>
<step>
 <stepnumber>1</stepnumber>
 <steptitle>second step</steptitle>
 <participation>None</participation>
 <tools>tools</tools>
 <rules>rules</rules>
 <actors>
   <actor>first actor</actor>
   <actor>second actor</actor>
   <actor>third actor</actor>
 </actors>
 <picture>none</picture>
 <flows>
   <flow>
     <number>0</number>
     <type>Financial flow</type>
     <what>none</what>
     <direction>From the first actor to the second one</direction>
     <firstactor>third actor</firstactor>
     <secondactor>first actor</secondactor>
   </flow>
   <flow>
     <number>1</number>
     <type>Information flow</type>
     <what>bits</what>
     <direction>From the first actor to the second one</direction>
     <firstactor>second actor</firstactor>
     <secondactor>first actor</secondactor>
   </flow>
 </flows>
</step>
<step>
 <stepnumber>2</stepnumber>
 <steptitle>third step</steptitle>
 <participation>None</participation>
 <tools>tools</tools>
 <rules>rules</rules>
 <actors>
   <actor>first actor</actor>
   <actor>second actor</actor>
 </actors>
 <picture>none</picture>
 <flows>
   <flow>
     <number>0</number>
     <type>Financial flow</type>
     <what>none</what>
     <direction>Both directions</direction>
     <firstactor>first actor</firstactor>
     <secondactor>second actor</secondactor>
   </flow>
   <flow>
     <number>1</number>
     <type>Information flow</type>
     <what>bits</what>
     <direction>From the first actor to the second one</direction>
     <firstactor>first actor</firstactor>
     <secondactor>second actor</secondactor>
   </flow>
   <flow>
     <number>2</number>
     <type>Information flow</type>
     <what>bits</what>
     <direction>Both directions</direction>
     <firstactor>first actor</firstactor>
     <secondactor>second actor</secondactor>
   </flow>
 </flows> 
```

这是python代码：

```
 steplist = doc.xpath("//project/step")
    for k,m in enumerate(steplist):
        stepelements = m.getchildren()
        for l in stepelements:
            if l.tag == "stepnumber":
                self.steps[k] = step()
                self.steps[k].stepnumber = l.text
            elif l.tag == "steptitle":
                self.steps[k].title = l.text
            elif l.tag == "participation":
                self.steps[k].participation = l.text
            elif l.tag == "tools":
                self.steps[k].tools = l.text
            elif l.tag == "rules":
                self.steps[k].rules = l.text
            elif l.tag == "actors":
                self.steps[k].actors = []
                for j,i in enumerate(l.getchildren()):
                    self.steps[k].actors.append(l.getchildren()[j].text)
            elif l.tag == "picture":
                self.steps[k].picture = l.text
            elif l.tag == "flows":
                for s,r in enumerate(l.getchildren()):
                    self.steps[k].flows[s] = flow()
                    self.steps[k].flows[s].number = r.getchildren()[0].text
                    self.steps[k].flows[s].type = r.getchildren()[1].text
                    self.steps[k].flows[s].what = r.getchildren()[2].text
                    self.steps[k].flows[s].direction = r.getchildren()[3].text
                    self.steps[k].flows[s].actor1 = r.getchildren()[4].text
                    self.steps[k].flows[s].actor2 = r.getchildren()[5].text 
```

结果（最后三个流程也为前面的流程重复）是：

```
Flow0 {0: <__main__.flow instance at 0x1005008c0>, 1: <__main__.flow instance at 0x100500830>, 2: <__main__.flow instance at 0x100500680>}
Flow1 {0: <__main__.flow instance at 0x1005008c0>, 1: <__main__.flow instance at 0x100500830>, 2: <__main__.flow instance at 0x100500680>}
Flow2 {0: <__main__.flow instance at 0x1005008c0>, 1: <__main__.flow instance at 0x100500830>, 2: <__main__.flow instance at 0x100500680>} 
```

我怎样才能解决这个问题？完整文件可在此处获得： [https ://github.com/OpenP2PDesignOrg/OpenMetaDesignApp/blob/load/classes.py](https://github.com/OpenP2PDesignOrg/OpenMetaDesignApp/blob/load/classes.py) [https://github.com/OpenP2PDesignOrg/OpenMetaDesignApp/blob/load/test2.meta](https://github.com/OpenP2PDesignOrg/OpenMetaDesignApp/blob/load/test2.meta)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:31:29.857

您的声明`step.__init__`搞砸了，因为 flow 参数的默认参数为 flow 成员的所有值分配了相同的 dict 实例和相同的 flow 实例。这是在加载定义时评估的，而不是在每次执行函数时评估的。

当您想要传递的内容是可变/通过引用时，在 Python 中执行默认参数的更常用方法是将默认值设为 None，然后在函数中包含一些逻辑，您可以在其中执行任何操作

```
if flows is None:
    self.flows = {0: flows()}
else:
    self.flows = flows 
```

或者

```
self.flows = flows if flows is not None else {0: flows()} 
```

或类似的规定。

# eclipse - Eclipse 在建议弹出窗口中冻结

> ID：15774371
> 
> 赞同：2
> 
> 时间：2013-04-02T21:05:47.073
> 
> 标签：eclipse, windows-7, freeze

我在 Eclipse 中遇到问题，每当我添加一个句点时它就会冻结（尝试使用可能的方法调出内容辅助弹出窗口）。我可以移动鼠标，但是闪烁的文本光标消失了，我无法切换选项卡或保存，我需要使用任务管理器关闭 Eclipse。所有 Java 项目/文件都会发生这种情况。

我以前从未在 Eclipse 上遇到过这样的问题，并且不知道是什么开始的。在做了几次谷歌搜索后，我发现的只是[这个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=304718)。但是，我没有看到解决方案，并且运行的是 Windows 7，而不是 Linux。另外，我从未听说过 Xulrunner。有人有解决方案或解释吗？是 Eclipse 设置，还是我的电脑有问题？

错误日志：[https](https://dl.dropboxusercontent.com/u/101364250/eclipse_freeze.log) ://dl.dropboxusercontent.com/u/101364250/eclipse_freeze.log 当我查看错误视图时，似乎输出了很多“未处理的事件循环异常”。

目前，我已禁用内容辅助，这似乎可以解决问题。但是，此功能非常有用，因此感谢您的任何回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:59:59.067

尝试打开首选项并勾选“暂停所有验证者”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T13:16:49.563

尝试禁用悬停功能：

[eclipse 菜单：Wndow > Preference](https://i.stack.imgur.com/d8feM.png)

# mysql - MySQL存储过程在调用时抛出错误

> ID：15774375
> 
> 赞同：0
> 
> 时间：2013-04-02T21:06:14.063
> 
> 标签：mysql, database, stored-procedures

当我创建这个存储过程时，我没有收到任何错误，并且它被创建得很好。

```
DELIMITER $$

CREATE DEFINER=`portaluser`@`%` PROCEDURE `sp_CreateDatabaseAndTablesByIdAndName`(
 IN p_vendorId VARCHAR(256),
 IN p_name VARCHAR(256)
)

BEGIN

SET @db_create = CONCAT('CREATE DATABASE IF NOT EXISTS xx_client_', p_vendorId, '_', p_name);    
PREPARE stmt FROM @db_create;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END 
```

当我调用此存储过程时，它会创建数据库，但会引发警告：1295 准备好的语句协议尚不支持此命令。

```
CALL sp_CreateDatabaseAndTablesByVidAndName('11111', 'xx'); 
```

我似乎在网上找不到任何地方可以确切地告诉我为什么会引发错误，好像这是一个相当简单的查询。我见过其他人基本上做同样的事情而没有任何问题。我需要第二双眼睛来告诉我哪里出错了。任何帮助表示赞赏。

**注意：我之前已将 p_VendorId 更改为 INT(11) 并按以下方式调用它，但仍然遇到相同的错误：

```
CALL sp_CreateDatabaseAndTablesByVidAndName(11111, 'xx'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:23:38.263

原来是因为我这样做了：

```
END 
```

而不是：

```
END $$
DELIMITER ; 
```

# java - 在自定义工具箱的 Matlab Simulink 块中存储自定义 java 对象

> ID：15774376
> 
> 赞同：1
> 
> 时间：2013-04-02T21:06:14.070
> 
> 标签：java, matlab, simulink

我正在构建一个自定义 Simulink 块作为 Matlab 工具箱。为了避免使用matlab的语言来编写系统，我想尽可能用Java来制作系统。我研究了 Matlab <-> Java 接口，似乎可以做到这一点。但是，我找不到任何相关信息的一件事是将我的自定义 Java 对象（保存块的数据）存储在 Simulink 块中。

我进行了快速测试，似乎可以存储 Java.lang.String 实例。然而，这是一个相对简单的测试。在开始之前，我想检查一下这是否可能。有没有人有类似设置的经验？该对象是否只需要可序列化才能工作？

对于背景信息，我希望在 Java 中实现非数学部分（GUI 代码、处理等）。与数学相关的元素可能会保留在 matlab 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:36:33.767

要将 Java 对象存储在块中，您应该使用其`UserData`块参数。根据文档，您可以在此参数中放置任何数据类型。

我能看到的唯一问题是保存/加载和创建新块。保存/加载**应该**使用序列化来解决，但您必须尝试才能看到。如果这不起作用，那么您可以为您的块创建一个隐藏的掩码参数，将您的 Java 对象序列化为一个字符串，并在`PreSaveFcn`回调期间将数据保存在此掩码中。数据可以从`LoadFcn`回调中的掩码参数反序列化。

要创建新块，您应该设置`PreCopyFcn`库块的回调并在那里创建新的 Java 对象。我有一种感觉，如果你不这样做，那么 MATLAB 会从 UserData 复制对你的对象的引用（如果那里已经存在的话），这可能不是你想要的。

您可能还想覆盖`OpenFcn`回调，因为您的目标是将您的 Java 对象用作一种增强的掩码，以便当用户双击该块时，您可以显示您的自定义 UI。

有关块回调参数的更多信息，请参阅[此](http://www.mathworks.co.uk/help/simulink/ug/block-callbacks.html#btoy_jj)。

# android - 在 Android 上登录总是失败 Paypal MPL

> ID：15774377
> 
> 赞同：0
> 
> 时间：2013-04-02T21:06:14.640
> 
> 标签：android, paypal, paypal-sandbox, android-library

我正在构建一个 Android 应用程序，用户通过 PayPal 支付预订费用。这只是从用户到企业的一次性简单付款，仅此而已。

我从这里获得了 SDK [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

我选择了 Mobile Payment Libraries 而不是 Mobile Express Checkout Library，你认为我选对了吗？MPL 允许我动态创建一个 paypal 支付按钮，并且布局完美。

我遵循了 SDK 附带的指南，它的标题是“Mobile Payments Library Developer Guide and Reference – Android OS Edition”

**主要问题**是当我测试按钮时，我点击它在沙箱中进行测试支付，它要求我登录，我尝试通过我的个人帐户登录它总是失败，我也尝试过朋友的帐户登录，仍然总是失败。

这是我使用的部分代码：

```
paypalObject = PayPal.initWithAppID(getApplicationContext(), "APP-80W284485P519543T", PayPal.ENV_SANDBOX); // SANDBOX

CheckoutButton launchPayPalButton = paypalObject.getCheckoutButton(M_PaymentOptions.this, PayPal.BUTTON_278x43, CheckoutButton.TEXT_PAY);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
params.bottomMargin = 10;
launchPayPalButton.setLayoutParams(params);
launchPayPalButton.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        PayPalPayment newPayment = new PayPalPayment();
        newPayment.setSubtotal(BigDecimal.valueOf(10.f));
        newPayment.setCurrencyType("GBP");
        newPayment.setRecipient("private@private.co.uk"); // changed the email deliberately for privacy reasons
        newPayment.setMerchantName("My Company");
        Intent paypalIntent = PayPal.getInstance().checkout(newPayment, M_PaymentOptions.this);
        M_PaymentOptions.this.startActivityForResult(paypalIntent, 1);
    }
});

((RelativeLayout) findViewById(R.id.m_RelativeLayout)).addView(launchPayPalButton); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:50:47.853

我试图在沙箱中使用真实的贝宝帐户登录，这是错误的，必须从这里创建一个测试帐户[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

感谢马雷克的评论

> 有可用的日志吗？我怀疑您的测试环境不允许使用真实帐户，您需要创建测试/开发帐户来测试它。– 马雷克·塞贝拉

# c++ - 创建qt线程事件循环

> ID：15774386
> 
> 赞同：6
> 
> 时间：2013-04-02T21:06:37.957
> 
> 标签：c++, windows, multithreading, qt

我正在使用 Qt 来编写 GUI 应用程序。

主线程负责 GUI 并创建 QThread 以便对对象进行一些工作。

```
class Worker
{
    void start() {
        QTimer* timer = new Timer();
        connect(timer,SIGNAL(timeout()),this,SLOT(do()));
    }

    void do() {
        //do some stuff
        emit finished();
    }
}

class GUI
{
    //do some GUI work then call startWorker();

    void startWorker() {
        QThread* thread = new Thread();
        Worker* worker = new Worker();

        worker->moveToThread(thread);

        connect(thread, SIGNAL(started()), worker, SLOT(start()));
        connect(worker, SIGNAL(finished()), workerthread, SLOT(quit()));
        connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
    }
} 
```

现在我有几个问题：

1.  我工人班的计时器不工作。也许是因为[新线程没有事件循环](https://stackoverflow.com/questions/3374034/qtimer-in-a-thread-events-not-processing)，但我不知道如何创建这样一个。我试过了

    `connect(workerthread, SIGNAL(started()), workerthread, SLOT(exec()));`

    但它也不起作用。

2.  当我尝试等待新线程时，信号永远不会发送

    ```
    class GUI
    {
        void exit() {
            thread->wait();
        }
    } 
    ```

我认为这也是因为没有事件循环，因此没有发出信号。

有人知道如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:04:59.983

this is a sample code for you :

```
QThread* thread = new QThread();
Worker* worker = new Worker(3000);
worker->moveToThread(thread);
QObject::connect(thread, SIGNAL(started()), worker, SLOT(start()));
thread->start();`

class Worker : public QObject
{
    Q_OBJECT
public:
    explicit Worker(qint32,QObject *parent = 0);
    qint32 myTime;

signals:
    void   workFinished();

public slots:
    void doWork();
    void start();
    private:
    QTimer *timer;
};

#include "worker.h"
#include <QTimer>
#include <QDebug>
Worker::Worker(qint32 t,QObject *parent) :
    QObject(parent)
{
    myTime=t;
}

void Worker::start()
{
    timer = new QTimer();
    timer->start(myTime);
    qDebug()<<QString("start work in time:%1").arg(myTime);
    connect(timer,SIGNAL(timeout()),this,SLOT(doWork()));
}

void Worker::doWork()
{
    qDebug()<<"dowork";
    timer->stop();
    emit workFinished();
} 
```

`Debug` results :

`start work in time:3000`

I hope this helps you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:09:41.707

为什么不使用 qthreadpool，而不是让你的任务类继承自 qrunnable 和 qobject，这样你就可以使用信号和槽将数据从一个线程传递到另一个线程，实现起来更简单，并且通过不重新创建线程或拥有来提高性能一个一直在睡觉

```
class myTask : public QObject, public QRunnable{
Q_OBJECT

protected:
void run(); //where you actually implement what is supposed to do

signals:
void done(int data);//change int to whatever data type you need

}

//moc click example, or use a timer to call this function every x amount of time
void button_click(){
   myTask *task = new myTask();
   task->setAutoDelete(true);
   connect(task,SIGNAL(done(int)),this,SLOT(after_done(int)),Qt::QueuedConnection);
   QThreadPool::globalInstance()->start(task);
} 
```

默认情况下，您的应用程序会自动获得 1 个线程，您可以使用它来处理图形，而不是使用 qthreadpool 按需处理数据/对象，您甚至可以设置应用程序可用于处理新请求的最大线程数，其他人将留在队列中，直到释放一个线程

```
QThreadPool::globalInstance()->setMaxThreadCount(5); 
```

# visual-studio-2010 - 如何在 .NET 安装项目中包含任意文件

> ID：15774388
> 
> 赞同：0
> 
> 时间：2013-04-02T21:06:47.603
> 
> 标签：visual-studio-2010, setup-project, visual-studio-setup-proje, visual-studio-setup

我们有一个文本文件文件夹，在部署应用程序时需要将其复制到服务器。目前，我们通过手动复制/粘贴文件夹的内容来处理这个问题。

如何将此作为自动化步骤包含在 MSI 中？

我希望将文件夹（及其内容）包含在 MSI 中。然后，在安装时，我希望 MSI 中的文件覆盖现有文件（在给定的本地目录中）。

这些文件在源代码控制 (TFS) 中，但它们不是任何 .NET 项目的一部分。

我以前使用过[Nullsoft 安装程序](http://nsis.sourceforge.net/)（除其他外），这基本上就是它所做的一切（你告诉它要拉入哪些文件以及在安装时将其放在哪里）。Visual Studio 自动完成了很多工作......但我只是看不到在哪里完成基本任务。

# meteor - 对发布/订阅和返回结果感到困惑

> ID：15774389
> 
> 赞同：1
> 
> 时间：2013-04-02T21:06:52.580
> 
> 标签：meteor, publish-subscribe

我正在使用流星，我对发布/订阅文档和使用车把`#each items`助手查询/返回集合之间的关系有点困惑。

我知道通过发布和订阅某些文档，当事情发生变化时，我可以在客户端浏览器上进行响应式更新。

我发现我自己编写了非常复杂的（面向角色的）发布函数，并编写了等效的函数以将项目返回给客户端。例如，

```
Meteor.publish("directory", function () {
    var user = Meteor.users.findOne({_id:this.userId});
    //role and logic left out on purpose
    return Meteor.users.find({}, {fields:{emails:1, profile:1}});
}); 
```

和订阅

```
if (Meteor.userId() != null) {
    Meteor.subscribe("directory");
} 
```

模板称为 show people 和 helper 'users'

```
 Template.show_people.users = function () {
     users = Meteor.users.find({}).fetch();
     return users;
 }; 
```

我的问题是，事情应该这样做吗？我们是否返回我们用于发布的相同查询的列表助手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:00:52.527

您可以为#each Handlebars 函数提供一个查询光标。事实上，它是推荐的。通过这种方式，DOM 将会智能更新：当一个文档被添加到 Cursor 时，Handlebars 只会为该文档创建新的 DOM 节点，而不会为已经存在的文档重新创建 DOM 节点。当您提供数组时，情况**并非如此。**

所以第三段代码可以是：

```
Template.show_people.users = function () {
     return Meteor.users.find({});
}; 
```

另请注意，在客户端完成的*collection.find()*只会查看 miniMongo 存储中的文档...您**不是**在搜索整个服务器数据库，而只是通过服务器已发布到的文档你。

因此，只有在 Meteor.publish() 函数内部才需要复杂的、面向角色的逻辑。

# c# - XNA - 保持更长时间跳得更高

> ID：15774393
> 
> 赞同：0
> 
> 时间：2013-04-02T21:07:04.283
> 
> 标签：c#, xna

我正在为我的游戏寻找一种简单的方法，这样当你按住空格键时，你会跳得更高。当您“点击”时，您不会跳到最大高度。需要有一个最大值，但是是的，我不知道如何进行编程。

任何帮助，非常感谢。将给予反馈。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:26:11.603

在处理跳跃的更新函数中，您可以让它跟踪角色离开地面的时间，并让它的向上速度在一段时间后停止增加。

例如，类似下面的东西应该可以工作

```
class Player
{
    private const int gravity = 2; //force of gravity on the object
    private const int maxHeight = 5; //change as needed
    private const int msecsToMax = 1500; //change as needed

    private int yPos = 0;
    private int timeOffGround = 0;
    private yVel = 0;

    //other functions and stuff

    void update(GameTime gt)
    {
        //check if the player is on the ground and update as necessary
        if(isOnGround())
            timeOffGround = 0;
        else
            timeOffGround += gt.ElapsedGameTime.TotalMilliseconds;

        //update the player's velocity
        yVel -= isOnGround() ? 0 : gravity; //no velocity when on the ground
        if(Keyboard.GetState().IsKeyDown(Keys.SPACE) && timeOffGround < msecsToMax))
            yVel += (maxHeight / msecToMax);

        yPos += yVel;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:39:11.977

在跳跃的重音期间，Y 速度完全被功率曲线覆盖。在体面期间，重力接管。跳跃速度由`jumpTime`测量当前跳跃重音的时间的场控制。

首先你需要一些简单的全局变量，

```
public bool isJumping; //Is the player in a jump?
private bool wasJumping; //Did the player just exit a jump?
private float jumpTime; //Time the player has been in a jump (Useful for adding a power curve or to max out on jump height)

MaxJumpTime = .8f; //If you want to max out a jump, otherwise remove the relevant parts of the code
JumpLaunchVelocity = -3000.0f; //How much velocity to "jump" with, this may depend on your speed of your player, so it will need some ajustment 
```

这是完成大部分工作的函数：

```
 private float DoJump(float velocityY, GameTime gameTime)
        {
            // If the player wants to jump
            if (isJumping)
            {
                // Begin or continue a jump
                if ((!wasJumping && IsOnGround) || jumpTime > 0.0f)
                {
                    //Do things like animate, or play a sound here
                    jumpTime += (float)gameTime.ElapsedGameTime.TotalSeconds;
                }

                // If we are in the ascent of the jump
                if (0.0f < jumpTime && jumpTime <= MaxJumpTime)
                {
                    // Fully override the vertical velocity with a power curve that gives players more control over the top of the jump (If you dont want this you can remove the Math.Pow)
                    velocityY = JumpLaunchVelocity * (1.0f - (float)Math.Pow(jumpTime / MaxJumpTime, JumpControlPower));
                }
                else
                    jumpTime = 0.0f;   // Reached the apex of the jump
            }
            else
            {
                // Continues not jumping or cancels a jump in progress
                jumpTime = 0.0f;
            }
            wasJumping = isJumping;

            return velocityY;
        } 
```

在计算位置和内容时的更新中：

```
velocity.Y = DoJump(velocity.Y, gameTime); 
```

如果遇到任何问题，请查看[Platformer Starter Kit ！](http://msdn.microsoft.com/en-us/library/dd254918%28v=xnagamestudio.31%29.aspx)

# ajax - 将 Ajax 与 Sharepoint 2013 Web 部件一起使用的最佳/最简单方法是什么？

> ID：15774394
> 
> 赞同：1
> 
> 时间：2013-04-02T21:07:06.050
> 
> 标签：ajax, sharepoint-2013

我正在开发一个 Sharepoint 2013 WebPart。（我们使用的是 Web 部件而不是新的应用程序模型，因为我们正在利用来自旧项目的大量现有 Web 部件）。

就我而言，我有一些 javascript 对象我想使用 AJAX 将其发送回服务器，因为我习惯于使用 MVC 和 Web API 进行开发，而这正是我所习惯的。对我来说最简单/最好的方法是什么？

# java - Restlet getIdentifier() 错误

> ID：15774397
> 
> 赞同：0
> 
> 时间：2013-04-02T21:07:14.683
> 
> 标签：java, rest, restlet, restlet-2.0

当我尝试执行“FirstResource”示例时：

> [http://restlet.org/learn/2.0/firstResource](http://restlet.org/learn/2.0/firstResource)

我在这一行中有一个由***getIdentifier()***引起的错误：

> itemResource = new ClientResource(r.getIdentifier());

如何解决此错误？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T07:39:51.317

restlet2.1.2 和restlet2.0.* 之间有一些变化，你可以阅读你的安装路径\src\org.restlet.example 包中的例子，然后你会发现两个版本之间的变化点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T18:27:44.090

我认为这个方法已经被 Representation#getLocationRef 取代了

# java - 将节点附加到Java中的xml

> ID：15774398
> 
> 赞同：0
> 
> 时间：2013-04-02T21:07:18.953
> 
> 标签：java, xml, servlets, append

我无法正确地将一些信息附加到我的 xml 文件中。这就是 scrivi 功能

```
 public String scrivi (Document doc, File dest)
   {
     try
     {

        DOMSource sorgente = new DOMSource (doc);
        StreamResult sr = new StreamResult (dest);        
        TransformerFactory tf =
            TransformerFactory.newInstance();
        Transformer transf = tf.newTransformer();
        transf.transform (sorgente, sr);
        return "Tutto ok";
     }
     catch (TransformerConfigurationException tce)
     {

        System.out.println(tce.getMessage());
        return  "<h1> Config </h1>";
     }
     catch (TransformerException te)
     {

        System.out.println(te.getMessage());
        return "<h1> Transformer Errore </h1>";
     }
   } 
```

并且 tath 是我的代码：

```
 try {
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document document = db.parse(getClass().getResourceAsStream("/azioni.xml"));

            Element root = document.getDocumentElement(); 
            Element new_azione = document.createElement("azione");
            Element id = document.createElement("id_azione");
            id.setTextContent(id_azione);
            Element nome = document.createElement("nome_azione");
            nome.setTextContent(nome_azione);
            Element prezzo_a = document.createElement("prezzo");
            prezzo_a.setTextContent(prezzo);
            new_azione.appendChild(id);
            new_azione.appendChild(nome);
            new_azione.appendChild(prezzo_a);
            document.getDocumentElement().appendChild(new_azione);

            String nomexmlOut="/azioni.xml";

            File filedest = new File(nomexmlOut); 

            out.println(this.scrivi(document, filedest));

} 
```

我收到错误 Transformer Errore ... 我该如何解决？怎么了？ *** 更新 *** 错误信息

```
java.io.FileNotFoundException: /azioni.xml (Permission denied) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:48:19.320

没有实际的异常跟踪或消息很难说，但我猜你的问题是输出流。

```
File("/azioni.xml"); 
```

不一样

```
getClass().getResourceAsStream("/azioni.xml") 
```

尝试将输出定向到系统输出，看看它是否有效。即声明 scrivi

```
public String scrivi (Document doc, OutputStream out) 
```

并调用它

```
scrivi(document, System.out); 
```

更新：

要写入相同的文件位置，请尝试这样的操作（未经测试）

文件输出 = new File(getClasss().getResource("...").getFile());

并确保在尝试写入之前关闭最初读取的输入流。

# php - PHP、PDO 和 MYSQL：lastInsertId() 返回 NULL

> ID：15774403
> 
> 赞同：1
> 
> 时间：2013-04-02T21:07:49.437
> 
> 标签：php, mysql, sql, pdo

我对基于 PDO 的 MySQL 相当陌生，但遇到了问题。

这是我正在执行的方法：

```
public function insert( $table, $data )
{
  // utility functions to auto-format the statements
  $keys = $this->getKeys($data);
  $placeholders = $this->getPlaceholders($data);

  $q = "INSERT INTO $table ($keys) VALUES ($placeholders)";

  // this simply returns a new PDO object
  $dbh = $this->createSession();

  $stmt = $dbh->prepare($q);
  $stmt->execute( array_values($data) );

  return $dbh->lastInsertId();
} 
```

之后，我运行我的方法并将返回的值存储在一个变量中：

```
$new_user_id = $U->insert( $data );

var_dump($new_user_id); 
```

我得到

```
NULL 
```

**请注意**，查询实际上已执行，并且我的数据已正确插入到我的表中；那边没问题。似乎它无法按照我的要求获取最后一个插入 ID。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:21:20.200

不确定是否有任何特定于 PDO 的问题，但默认情况下，如果数据库中有 auto_increment 整数字段（通常但不一定是主键），MySQL 只会返回插入 ID。如果您的表不包含此内容，则 $dbh->lastInsertId() 不会返回任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:24:40.797

我再次查看了代码，发现我的值没有返回，因为中间方法没有将值正确传递给顶层方法。

从源头检查值显示没有问题。

无论如何感谢您的回复。

# javascript - 如何通过 Ajax 登录 Twitter？

> ID：15774405
> 
> 赞同：1
> 
> 时间：2013-04-02T21:07:51.657
> 
> 标签：javascript, jquery, ajax, twitter

抱歉，如果以前有人问过这个问题，我已经找了一段时间，没有找到任何相关的东西。我最近开始研究 AJAX/Javascript，为了好玩，我很好奇是否可以通过 AJAX 调用登录 Twitter。

所以我查看了登录页面的[源代码](https://twitter.com/)，看起来在第 198 行和第 202 行（Chrome 源代码查看器）上分别设置了用户名和密码密钥，以及它被发送到的页面。所以从那里我写了这个：

```
$.post('https://twitter.com/sessions', 
    {"session[username_or_email]" : "USERNAME",
    "session[password]": "PASSWORD"},
    function(data) {
        $('body').html(data);
}); 
```

它返回的内容类似于“用户名/密码”是不正确的。字段错了吗？我的方法有根本缺陷吗？如果是这样，如何达到类似的效果？谢谢！

编辑：后续问题，如果我发送一个 ajax 请求并且该页面应该创建/设置一个 cookie，那么该 cookie 会发生什么？它只是蒸发了，还是为浏览器设置的？

# java - OnLongClick 停止 OnClick

> ID：15774408
> 
> 赞同：2
> 
> 时间：2013-04-02T21:07:57.657
> 
> 标签：java, android, list, adapter, onclicklistener

我正在使用列表视图。在实施 OnLongClick 之前，我的 onListItemClick 工作得很好，但是现在，在实施 OnLongClick 之后，长点击工作和正常的列表点击什么都不做。它似乎隐藏了您已经使用的 onListItemClick() 函数

谁能看到为什么/提出解决方案？

```
public class CombChange extends ListActivity {
    @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

setListAdapter(new ListEdit(this, symbols));

@Override
 protected void onListItemClick(ListView l, View v, int position, long id) {

  String selectedValue = (String) getListAdapter().getItem(position);
  if (lastPressed.equals(selectedValue) ){
   count++;}
}

public class ListEdit extends ArrayAdapter<String> implements OnLongClickListener{
 private final Context context;
 private final String[] values;

 public ListEdit(Context context, String[] values) {
  super(context, R.layout.activity_comb_change, values);
  this.context = context;
  this.values = values;
 }

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
  LayoutInflater inflater = (LayoutInflater) context
   .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  View rowView = inflater.inflate(R.layout.activity_comb_change, parent, false);
  TextView textView = (TextView) rowView.findViewById(R.id.label);
  ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
  textView.setText(values[position]);
  rowView.setOnLongClickListener(new OnLongClickListener(){

            public boolean onLongClick(View arg0) {
             context.startActivity(new Intent(context,RestoreOriginal.class));
                return false;
            }
        });
 // Change icon based on name
  String s = values[position];

  if (s.equals("a")) {
   imageView.setImageResource(R.drawable.a);

return rowView;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:24:02.733

我认为你不应该这样做***rowView.setOnLongClickListener***。

尝试这样的事情：

```
this.getListView().setLongClickable(true);
this.getListView().setOnItemLongClickListener(new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
// whatever you wanna do
        return true;
    }
}); 
```

我从[如何捕获 ListActivity 的 Listeview 项的长按事件中获取代码？](https://stackoverflow.com/questions/6141882/how-to-capture-long-press-event-for-listeview-item-of-a-listactivity)

希望这可以帮助。

# c# - 为多个用户创建一个应用程序，该应用程序将共享一个存储在共享驱动器中的公共 SQL 数据库

> ID：15774417
> 
> 赞同：1
> 
> 时间：2013-04-02T21:08:37.133
> 
> 标签：c#

我想使用 VS 2010 和 SQL 数据库创建一个应用程序。因此，我使用 VS 2010 创建了一个项目，并将其附加到由安装在我的系统上的 SQL 服务器创建的 SQL 数据库中。现在我已经创建了这个项目的 setup.exe 文件。它在我的系统上运行良好，因为我的系统上安装了 SQL 服务器。但是当我试图在没有安装 SQL 服务器的其他系统上运行它时，它没有运行。您能否建议我如何为此创建一个 .exe 文件。

我想为多个用户创建一个应用程序，该应用程序将共享一个存储在共享驱动器中的公共 SQL 数据库。

# security - 我可以通过加盐现有的 MD5 哈希并使用 Scrypt 或 PBKDF2 HMACSHA256 对结果进行哈希处理来提高 MD5 哈希密码的安全性吗？

> ID：15774418
> 
> 赞同：7
> 
> 时间：2013-04-02T21:08:39.987
> 
> 标签：security, md5, password-encryption, pbkdf2, scrypt

我有一个使用 MD5 加盐和散列的旧密码数据库。我想更新系统以使数据更安全。

第一个选项是在用户登录并在一段时间后停用旧用户时将用户转换到新的哈希方案（Salt + Scrypt 或 PBKDF2 HMACSHA256），因此他们必须使用密码恢复功能，该功能会自动更新他们的哈希值。

另一个可以让我立即升级每个人的选项是采用现有的 MD5 哈希值，为每个哈希值添加一个新的随机盐值，然后使用新的哈希方案（Salt + Scrypt 或 PBKDF2 HMACSHA256）对结果进行哈希处理并存储该值到数据库并删除旧值。

然后当用户登录时，我必须先应用旧方法，然后再应用新方法。我更喜欢第二个选项，因为它允许我迟早从数据库中删除所有旧的不安全哈希。

对现有哈希进行加盐和重新哈希是否安全？MD5 是否如此损坏以至于我可以运行一个脚本来对密码进行去散列并使用新方案对其进行重新散列？

或者也许最好的解决方案是结合这两种选择？这样我就不必在数据库中保留现有的 MD5 哈希值，并且可以在一段时间内将用户迁移到新系统？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T21:49:55.723

MD5 并没有破坏到您可以轻松地对所有密码进行去散列处理，但是假设密码的质量不太好，那么您可能会暴力破解它们并将它们转换为新的、更安全的格式。MD5 的破坏性源于它相对较小的长度（更多的碰撞表面）和计算简单的计算（意味着蛮力攻击比具有较大运行时复杂度的算法（如 SHA2）更可行）

如果我是你，我会使用你列出的两种方法（因为正如你所提到的，如果你的数据库被黑客入侵，快速移动密码很重要）。首先，我将暴力破解所有暴力破解 MD5 密码并将它们转换为新格式。我过去曾这样做过，到目前为止，最好的结果是使用[HashCat](http://hashcat.net/oclhashcat-plus/)（最好是 Cuda 或 OCL 风格，因为它们使用 GPU 并且速度快 200 倍）。如果 Hashcat 太难（学习曲线可能很陡），那么试试[John the Ripper](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://www.openwall.com/john/&ei=VFJbUendMMaJiAKQ_4CwDw&usg=AFQjCNFrCSIEQUjDNDqEEFWYWSjUb6yA8g&sig2=HwhJMfCAyB3HCJBS-VpO3A&bvm=bv.44697112,d.cGE)。它比 HashCat 慢很多，但更容易使用。

对于您无法破解的密码，请使用户的帐户过期并让他们重置密码。或者为了对您的用户更好，只需在下次登录时通过发送两个哈希值将数据库中的密码更新为新格式。如果 MD5 检出，则将其销毁并替换为新格式。这些只是一些想法。

编辑：

忘了提一下，如果您只想将 MD5 密码散列成新的格式，这在安全方面会很好，尽管它会为您的代码增加另一层复杂性，并且存在复杂性的地方存在实现缺陷的空间。只是想一想。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-03T17:33:11.107

这实际上是您的一个非常巧妙的想法。通常我会：

*   等到用户返回
*   意识到他们存储的密码需要更新
*   现在我在内存中有他们的（已知有效）密码：用新算法重新哈希它
*   将新的哈希存储在数据库中

只使用 MD5 的缺点是它很容易被暴力破解。通过在应用真正的 scrypt/Argon2 之前（暂时）将 MD5 结果视为中间步骤，您可以阻止暴力破解尝试。

*在“真实”*密码散列之前使用快速散列算法作为预处理步骤并非闻所未闻 - 甚至可能很有用。

*   BCrypt 的已知密码长度限制为 72 个字节（71 个 utf-8 字符，然后是一个空终止符）。Dropbox在通过 bcrypt 运行之前[将 SHA2-512 应用于传入的明文密码。](https://blogs.dropbox.com/tech/2016/09/how-dropbox-securely-stores-your-passwords/)通过首先通过哈希运行长密码，他们克服了 71 个字符的限制。
*   这不仅克服了密码长度限制（避免必须截断或限制密码大小），而且当[有人提供非常长的密码](http://arstechnica.com/security/2013/09/long-passwords-are-good-but-too-much-length-can-be-bad-for-security/)时，它可以防止拒绝服务攻击。BCrypt 和 Scrypt 容易受到使用较长密码的攻击（我不知道 Argon2）。

因此，使用预散列（尽管不一定是 MD5）是有好处的。

我不知道您当前如何存储 MD5 哈希值。MD5 是 128 位的。假设您将其存储在 Base64 中，您可以轻松识别它：

*   **MD5**：`nMKuihunqT2jm0b8EBnEgQ==`

期望的最终目标类似于 scrypt：

*   **MD5**：`nMKuihunqT2jm0b8EBnEgQ==`
*   **加密**：`$s0$e0801$epIxT/h6HbbwHaehFnh/bw==$7H0vsXlY8UxxyW/BWx/9GuY7jEvGjT71GFd6O4SZND0=`

因此，在针对保存的哈希验证凭据时，您可以确定它是哪个哈希并使用适当的算法。您的中间步骤（增加了计算复杂性）正在定义您自己的格式：

> MD5 + 加密

就像是：

*   **MD5**：`nMKuihunqT2jm0b8EBnEgQ==`
*   **MD5 + 加密**：`$md5s0$e0801$eX8cPtmLjKSrZBJszHIuZA==$vapd0u4tYVdOXOlcIkFmrOEIr1Ml2Ue1l2+FVOJgbcI=`
*   **加密**：`$s0$e0801$epIxT/h6HbbwHaehFnh/bw==$7H0vsXlY8UxxyW/BWx/9GuY7jEvGjT71GFd6O4SZND0=`

现在您可以根据保存的哈希识别正在使用的算法，并且可以分段升级密码。

# android - GET方法解析

> ID：15774419
> 
> 赞同：0
> 
> 时间：2013-04-02T21:08:43.053
> 
> 标签：android, xml-parsing, android-parser

有人可以帮助我更好地理解这段代码。

```
// request method is GET
DefaultHttpClient httpClient = new DefaultHttpClient();
String paramString = URLEncodedUtils.format(params, "utf-8");
url += "?" + paramString;
HttpGet httpGet = new HttpGet(url);
HttpResponse httpResponse = httpClient.execute(httpGet);
HttpEntity httpEntity = httpResponse.getEntity();
is = httpEntity.getContent(); 
```

主要是我只需要帮助弄清楚 URL 部分。

> 网址+=“？” + 参数字符串；

我怎样才能更好地自定义那部分代码？

在定制时，我想使用我当前的网址

> Academic_programs_xml/oncampus-departments.xml

并将其更改为

> Academic_programs_xml/oncampus-associates.xml

我的想法是您可以获取该位置的网址

> Academic_programs_xml/

然后将参数添加到 url 然后添加 .xml

像这样的东西？

> 网址 += 参数字符串 + ".xml";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:16:46.587

在这里，我们将参数添加到 URL 让我们举个例子。

```
Base URL : www.example.com/index.php 
```

如果我们要添加参数 { search = hello }

我们会这样做

```
Param URL : www.example.com/index.php?search=hello 
```

基本上，之后的任何东西？URL末尾的标记，是键值对参数。

现在回到你的代码，你在代码中创建一个键值对字符串参数

```
String paramString = URLEncodedUtils.format(params, "utf-8"); 
```

然后在使用代码添加问号后将其附加到 URL

```
url += "?" + paramString; 
```

我希望这很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:16:13.090

在弄清楚：“？” 标记 URI 路径部分的结尾和查询字符串的开头。查询字符串通常用于对参数进行编码，例如在调用 Web 服务期间。

关于定制，不清楚你的意思。

# loops - 具有十进制值的多个变量的每个循环的 SCSS

> ID：15774421
> 
> 赞同：2
> 
> 时间：2013-04-02T21:08:56.833
> 
> 标签：loops, foreach, sass

我在使用小数的多个变量的 SASS @each 循环中遇到问题。我可以让它在基本级别上工作，但想添加小数，这会引发错误。

例如..

```
$columns: 100, 25, 33;

@each $proportion in $columns {
  .col_#{nth($proportion, 1)} {
    width: percentage($proportion/100);
  }
} 
```

...将成功编译为...

```
.col_100 {
    width: 100%;
}

.col_25 {
    width: 25%;
}

.col_33 {
    width: 33%;
} 
```

但是，尝试向变量列表添加小数会引发错误。例如，我怎样才能让它工作......

```
$columns: 100, 25, 33.333; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:26:15.593

您可以对类名的值进行四舍五入：

```
@each $proportion in $columns {
  .col_#{floor(nth($proportion, 1))} {
    width: percentage($proportion/100);
  }
} 
```

输出：

```
.col_100 {
  width: 100%;
}

.col_25 {
  width: 25%;
}

.col_33 {
  width: 33.333%;
} 
```

# database - 如何设置RRD存储2年？

> ID：15774423
> 
> 赞同：8
> 
> 时间：2013-04-02T21:09:05.210
> 
> 标签：database, linux, rrdtool, rrd, ganglia

我正在监视 300 多台服务器，为此我正在使用[Ganglia](http://ganglia.sourceforge.net/)。它`RRD`用作数据库来收集和存储与每个服务器的资源相关的数据。我想有2年以上的历史，所以看了这篇[文章](http://www.cuddletech.com/articles/rrd/ar01s02.html)，我觉得我的`RRA`配置应该是：

```
RRAs "RRA:AVERAGE:0.5:1:17520" 
```

17520 = (365 天 [年] x 2) * 24 [小时]

这是 Ganglia 默认配置，今天正在运行：

```
#
# Round-Robin Archives
# You can specify custom Round-Robin archives here (defaults are listed below)
#
# RRAs "RRA:AVERAGE:0.5:1:244" "RRA:AVERAGE:0.5:24:244" "RRA:AVERAGE:0.5:168:244" "RRA:AVERAGE:0.5:672:244" \
#      "RRA:AVERAGE:0.5:5760:374"
# 
```

这是我的思维方式还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T14:19:17.610

在研究了这个主题一段时间后，我想出了一个答案，将来可能会对某人有所帮助。这两篇文章我看了很多遍，推荐。首先阅读这个，[创建一个初始 RRD](http://www.cuddletech.com/articles/rrd/ar01s02.html) ，然后阅读这个。[如何创建 RRDTool 数据库](http://apfelboymchen.homeunix.net/gnu/rrd/create/)：

我将尝试简单地解释它。格式`RRA:CF:xff:steps:rows`：

```
RRA: Round Robin Archive
CF: Consolidation Factor
XFF: Xfile Factor
steps
rows 
```

`steps`对我来说最大的问题是发现和的正确值`rows`。阅读后，我想出了这个解释：

```
1 day - 5-minute resolution
1 week - 15-minute resolution
1 month - 1-hour resolution
1 year - 6-hour resolution

RRA:AVERAGE:0.5:1:288 \
RRA:AVERAGE:0.5:3:672 \
RRA:AVERAGE:0.5:12:744 \
RRA:AVERAGE:0.5:72:1480 
```

请记住，我们的`step`is `300 seconds`，所以想法很简单：如果我想解析`one day`which has `86400 seconds`，如第一个示例所示，我需要多少行？答案是`288 rows`。为什么？

```
`86400 seconds [1 day] / 300 seconds [5 minutes`] = 288 rows 
```

另一个例子，如果我想解决：
1 周`[ = 604800 seconds ]`15 分钟`[ = 900 seconds ]`= 604800/900 =`672 rows`

其他值也是如此。这样你就可以知道`rows`你需要多少。找出`steps`你需要多少是非常简单的，你只需要采取你的步骤的乘数。

让我解释一下：我们`steps`是`300 seconds`，对吧？

所以如果我们想解决 5 minutes `[ = 300 seconds ]`，我们只需要乘以 1 ，对吗？因此，15 分钟意味着 300 秒 x 3，1 小时意味着 300 x 12，6 小时意味着 300 x 72 等等。

在我的具体情况下，我想`steps`成为`30 seconds`，所以我想出了这些结构：

```
1   every time           30 seconds      1 * 30s = 30s
2   every second time     1 minute       2 * 30s = 1m
4   every third time      2 minutes      4 * 30s = 2m
10  every 10th time       5 minutes     10 * 30s = 5m
20  every 20th time      10 minutes     20 * 30s = 10m
60  every 60th time      30 minutes     60 * 30s = 30m
80  every 80th time      40 minutes     80 * 30s = 40m
100 every 100th time     50 minutes    100 * 30s = 50m
120 every 120th time      1 hour       120 * 30s = 1h
240 every 240th time      2 hours      240 * 30s = 2h
360 every 360th time      3 hours      360 * 30s = 3h

RRA:AVERAGE:0.5:1:120 \
RRA:AVERAGE:0.5:2:120 \
RRA:AVERAGE:0.5:4:120 \
RRA:AVERAGE:0.5:10:288 \
RRA:AVERAGE:0.5:20:1008 \
RRA:AVERAGE:0.5:60:1440 \
RRA:AVERAGE:0.5:80:3240 \
RRA:AVERAGE:0.5:100:5184 \
RRA:AVERAGE:0.5:120:8760 \
RRA:AVERAGE:0.5:240:8760 \
RRA:AVERAGE:0.5:360:8760 \ 
```

意思是：

```
1 hour    -  30 seconds  resolution
2 hours   -  1 minute    resolution
4 hours   -  2 minutes   resolution
1 day     -  5 minutes   resolution
1 week    - 10 minutes   resolution
1 month   - 30 minutes   resolution
3 months  - 40 minutes   resolution
6 months  - 50 minutes   resolution
1 year    -  1 hour      resolution
2 year    -  2 hour      resolution
3 year    -  3 hour      resolution 
```

好吧，我希望这对某人有所帮助，仅此而已。

# asp.net - 模型的对象引用在视图中丢失

> ID：15774424
> 
> 赞同：0
> 
> 时间：2013-04-02T21:09:07.447
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我正在尝试实现一个视图，在该视图中我将一个对象传递给它，该对象具有对其他对象的某些引用，编辑一些字段并将其恢复为持久化，问题是一旦我取回对象，这些引用就会返回为空，这是我的执行：

这是我传递给视图的模型：

```
public class TicketCreationModel
{

    public SupportItem item { get; set; }
    public Ticket ticket{ get; set; }
    public Employee employee{ get; set; }

} 
```

非常简单，模型有一张票、一个支持项目和一个员工。现在这是我将模型传递给视图的方法：

```
public ActionResult AssignSupportItem(int supportItemId)
    {

        Ticket ticket = GetTicket();
        ticket.Item = repo.GetSupportItemFromId(supportItemId);
        TicketCreationModel model = new TicketCreationModel();
        model.employee = ticket.AccountableEmployee;
        model.item = ticket.Item;
        model.ticket = ticket;
        return View(model);
    } 
```

第一行的 GetTicket() 方法返回会话对象，下面是实现：

```
private Ticket GetTicket()
    {
        Ticket ticket = (Ticket)Session["Ticket"];
        if (ticket == null)
        {
            ticket = new Ticket();
            Session["Ticket"] = ticket;
        }
        return ticket;
    } 
```

现在是采用模型并为工单启用一些编辑字段的视图：

```
@model WebUI.Controllers.TicketCreationModel

@{
ViewBag.Title = "AssignSupportItem";
}

<h2>AssignSupportItem</h2> 
```

@using (Html.BeginForm()) { @Html.ValidationSummary(true)

```
<fieldset>
    <legend>Creación ticket</legend>

    <label>Descripción del problema</label>
    <div class="editor-field">
        @Html.EditorFor(model => model.ticket.Description)
        @Html.ValidationMessageFor(model => model.ticket.Description)
    </div>

    @Html.HiddenFor(model => model.ticket.TicketId)
    @Html.HiddenFor(model => model.item)
    @Html.HiddenFor(model => model.employee)

    <label>Solución aportada</label>
    <div class="editor-field">
        @Html.EditorFor(model => model.ticket.Solution)
        @Html.ValidationMessageFor(model => model.ticket.Solution)
    </div>

    <label>Estado</label>
    <div class="editor-field">
        @Html.EditorFor(model => model.ticket.Status)
        @Html.ValidationMessageFor(model => model.ticket.Status)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

最后是接收模型对象的视图上的表单调用的方法：

[HttpPost] public ActionResult AssignSupportItem(TicketCreationModel 模型) {

```
 Ticket final = model.ticket;
        final.Item = GetTicket().Item;
        final.AccountableEmployee = GetTicket().AccountableEmployee;

        repo.SaveTicket(final);
        ViewBag.Message = "Su ticket ha sido agregado al sistema";
        return View("AssignSupportItemResponse");

    } 
```

**问题是我收到的模型对象的员工和项目属性为空，为什么会发生这种情况？我在我的模型上发送这些对象，为什么它们会丢失？我尝试使用会话对象恢复它们，但是一旦我尝试在我的上下文类中保留对象，我就会得到**

“一个实体对象不能被多个 IEntityChangeTracker 实例引用”</p>

例外。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:14:17.707

您的模型实际上相当复杂。控制器无法从提交的数据中重新组装您拥有的模型。尝试创建一个仅包含您实际需要显示的“简单”属性（即字符串、int 等）的视图模型。提交后，您必须从商店获取员工和商品，然后更新它们的值。

# haskell - fmap 如何为 List 工作

> ID：15774428
> 
> 赞同：5
> 
> 时间：2013-04-02T21:09:35.227
> 
> 标签：haskell, functor

[向你学习一个 haskell](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#the-functor-typeclass)给出了关于 Functor 类型类的描述。

我可以看到对于列表，它的实现如下：

```
instance Functor [] where  
fmap = map 
```

但这是如何工作的？

在类型类 Functor 中，fmap 甚至没有实现。它所拥有的只是这样的类型声明：

```
class Functor f where  
fmap :: (a -> b) -> f a -> f b 
```

仅仅通过类型声明，Haskell 如何正确计算 List 的映射操作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T21:12:15.273

`map`只是 type 的普通函数`(a -> b) -> [a] -> [b]`。与 不同`fmap`的是，它*不是*类型类的一部分`Functor`。它完全按照您的想法工作。

类型类背后的想法是您使用类型来确定要使用的实现。当我们说 时`instance Functor [] where ...`，我们是在告诉编译器`fmap`for `[]`（列表类型）的实现是什么。

在这种情况下，实现`fmap`是 just `map`，这是一个正常的功能。

# google-search-appliance - Google Search Appliance：结合使用实体识别和文档日期

> ID：15774440
> 
> 赞同：1
> 
> 时间：2013-04-02T21:10:04.743
> 
> 标签：google-search-appliance

是否可以使用定义的实体作为文档日期进行排序？

我创建了一个实体，它成功地显示在动态导航中并响应搜索：

```
inmeta:gsaentity_pubdate 
```

我在文档日期部分中输入了一个主机模式，其中 a `Locate Date In`of`Meta Tag`和`Meta Tag Name`of `gsaentity_pubdate`。

使用`sort=D:S:d1`or检查生成的搜索 XML 时`sort=D:L:d1`，返回的结果没有日期：

```
<FS NAME="date" VALUE=""/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:55:37.060

我得出的结论是，从固件 7.0 开始，在 GSA 的某些区域中无法使用实体识别生成的元数据。

该`getfields=`参数不返回`gsaentity_`结果中的元数据字段（使用时**除外**`getfields=*`，请参阅迈克尔的评论）；它只从原始文档中选择实际的元数据字段。这表明在 GSA 中这两类元数据之间存在逻辑上的分离，实体识别生成的类型 2 元数据不能在许多类型 1 元数据可以使用的地方使用。

# php - PHP比较电子邮件

> ID：15774442
> 
> 赞同：-1
> 
> 时间：2013-04-02T21:10:07.767
> 
> 标签：php, mysql

我正在尝试将存储在数据库中的电子邮件地址与输入中输入的电子邮件地址进行比较，但它无法识别：

我正在尝试从我的数据库中选择一个列：

```
$query = mysql_query("SELECT * FROM `men` WHERE `Email`=$user_email"); 
```

但是，即使电子邮件完全相同，查询也会返回 0。这里有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:16:57.417

有很多问题。此查询将插入`Email = email@example.com`MySQL 中的语法错误。

*   你应该在`mysql_query`使用类似的东西之后检查错误`mysql_query($query) or echo mysql_error()`
*   您需要`$user_email`用引号括起来，以便它插入到`Email = 'email@example.com'`，这是有效/所需的查询。
*   您甚至根本不应该使用[`ext/mysql`](http://www.php.net/manual/en/function.mysql-connect.php)；它已被弃用。见粉红色的大盒子。
*   您的代码容易受到注入的影响，因为查询未正确参数化。

更好的选择是（在 PDO 中）：

```
$query = $pdo->prepare("SELECT * FROM `men` WHERE `Email` = ?");
$query->execute(array($user_email));
$result = $query->fetch(); 
```

请注意，我关于错误检查和参数化的评论仍然适用于 PDO。

# asp.net - 如何在使用sql语句进行数据绑定的asp.net页面的下拉列表中将初始值设置为Select

> ID：15774450
> 
> 赞同：1
> 
> 时间：2013-04-02T21:10:38.063
> 
> 标签：asp.net, sql, vb.net

我正在使用选择语句绑定位置下拉列表

```
Select location_id, location_name,businessid from inventory.tbl_location order by location_name 
```

我想将第一个元素作为“选择位置”。现在我正在获取所有位置。如何在使用sql语句进行数据绑定的asp.net页面的下拉列表中将初始值设置为***Select ？***

```
In the aspx page :

        <asp:DropDownList ID="ddlAllLocations" runat="server" DataSourceID="SqlDataSourceBusinessLocations"
                            DataTextField="Location_Name" DataValueField="Location_ID" AutoPostBack="True">
                        </asp:DropDownList> 
```

和

```
 <asp:SqlDataSource ID="SqlDataSourceBusinessLocations" runat="server" ConnectionString="<xxxxxx>"
            ProviderName="<%$ zzzzz %>" SelectCommand="Select location_id, location_name,businessid from inventory.tbl_location order by location_name" FilterExpression="businessid in ({0})">
            <FilterParameters>
                <asp:SessionParameter DefaultValue="0" Name="BUID" SessionField="BusinessUnitIDs" />
            </FilterParameters>
        </asp:SqlDataSource> 
```

我按照 page_load 事件中的建议添加了代码，这是另一个问题，每次将**选择位置**添加到列表项

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If IsPostBack() Then
            lblError.Text = ""
            ddlAllLocations.Items.Insert(0, New ListItem("Select location"))
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:49:43.633

试试这个：

```
<asp:DropDownList ID="ddlAllLocations" runat="server"
       DataSourceID="SqlDataSourceBusinessLocations"
       DataTextField="Location_Name" 
       DataValueField="Location_ID" 
       AutoPostBack="True"
       AppendDataBoundItems="True">
   <asp:ListItem value="" selected="True">
      Select
   </asp:ListItem>
</asp:DropDownList> 
```

不要忘记`AppendDataBoundItems`属性。在更新面板中使用它时要小心：每次更新都会重新附加所有项目，您最终会得到重复项。在这种情况下，您可以通过禁用控件的 ViewState 来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:15:37.440

不确定您如何进行数据绑定，但我希望您在代码隐藏中进行...

在这种情况下，它非常简单：

```
mydroplist.DataSource = someSource;
mydroplist.DataBind();
mydroplist.Items.Insert(0, new ListItem("Select location")); 
```

**根据您的编辑进行编辑：**
在您的 UI 中使用 SQL 不是一个好主意。这是一个非常糟糕的设计。对适当的编程架构、如何分离层等进行一些研究。然后您将在代码隐藏中进行数据绑定，我的示例将为您提供帮助。

如果你坚持使用你的做事方式，你可以简单地在下拉列表数据绑定时连接事件并添加这段代码（当然绑定部分除外）

# unicode - Sublime Text 2 中的奇怪字符：`SOH` 和 `ACK`

> ID：15774451
> 
> 赞同：6
> 
> 时间：2013-04-02T21:10:40.080
> 
> 标签：unicode, sublimetext2

在将旧笔记从`org`语法`mmd`转换为 . 将文本粘贴回 Sublime Text 2 时，我注意到几个奇怪的字符。我不太关心他们为什么在那里，我只想知道这些字符是什么，以及它们是否可以使用正则表达式进行搜索？

![非Unicode字符？](https://i.stack.imgur.com/Mg2gQ.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T16:21:02.967

它们是[控制字符](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)，它们没有可打印的表示。我不知道它们是如何出现在你的文件中的。

在正则表达式中，您可以搜索`SOH`with`\u0001`和 `ACK`with`\u0006`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T20:08:50.153

我说我当时不在乎原因。下次发生这种情况时，我最终确实发现了问题所在。原来它与在后台运行 LaTeX 自动构建工具有关。它已经在一个 shell 中编译并由于错误而挂起。下次我尝试编译时，这些控制字符开始出现在我的编辑器中。

我不再假设我正在运行的进程数量。`ps aux | grep <whatever>`是你的朋友。

# mysql - 无法连接两张表，一张有多行

> ID：15774452
> 
> 赞同：0
> 
> 时间：2013-04-02T21:10:43.140
> 
> 标签：mysql, jointable

我有两个表试图加入 MySQL：

评论：

```
|  review_id  |  comment       |  reviewer_id  | user_id  |
-----------------------------------------------------------
|  1          |  some text.    |  501          | 100      |    
|  2          |  lorem ipsum   |  606          | 100      |
|  3          |  blah blah.    |  798          | 120      |
|  4          |  foo bar!      |  798          | 133      |
----------------------------------------------------------- 
```

审查状态：

```
 |  review_id  |  status  | timestamp   |
 ----------------------------------------
 |  1          |  10      | 1364507521  |
 |  1          |  101     | 1364508057  |
 |  2          |  100     | 1364509033  |
 |  1          |  150     | 1364509149  |
 |  2          |  120     | 1364509283  |
 |  2          |  122     | 1364855948  |
 |  3          |  120     | 1364509283  |
 |  3          |  122     | 1364855948  |
 |  1          |  110     | 1364855945  |
 |  4          |  100     | 1364509283  |
 |  4          |  115     | 1364855948  |
 |  4          |  210     | 1364855945  |
 ---------------------------------------- 
```

我想要的是一个看起来像这样的结果：

结果

```
 | review_id | comment     |  reviewer_id | user_id | status | timestamp  |
 --------------------------------------------------------------------------
 | 1         | some text.  |  501         | 100     | 200    | 1364855945 | 
 | 2         | lorem ipsum |  606         | 120     | 122    | 1364855948 |
 -------------------------------------------------------------------------- 
```

我追求的是：1）review_status 表中的最新条目 2）一定范围的状态代码（在这种情况下为 100 - 199） 3）以及 review 表中的多个 user_id。

这是目前我的查询，我无法为我的生活工作：

```
SELECT r.review_id, r.comment, r.reviewer_id, r.user_id
FROM reviews AS r 
INNER JOIN 
   (SELECT s.status, max(s.timestamp)
    FROM review_status AS s
    WHERE s.status < 200
    AND s.status > 99;
    GROUP BY s.review_id) AS r_s
ON r.review_id = r_s.review_id
WHERE r.user_id IN (100,120); 
```

任何帮助是极大的赞赏！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:23:18.897

您当前的查询存在一些问题。

*   子查询没有返回`review_id`，所以你不能在连接中使用它
*   您在子查询中有一个额外的分号

我可能会建议重写查询以使用以下内容：

```
SELECT r.review_id, r.comment, r.reviewer_id, r.user_id,
  rs.status, rs.timestamp
FROM reviews AS r 
INNER JOIN review_status rs
  ON r.review_id = rs.review_id
INNER JOIN 
(
  SELECT s.review_id, max(s.timestamp) MaxDate
  FROM review_status AS s
  WHERE s.status < 200
    AND s.status > 99
  GROUP BY s.review_id
) AS r_s
  ON rs.review_id = r_s.review_id
  AND rs.timestamp = r_s.MaxDate
WHERE r.user_id IN (100,120)
  and rs.status < 200
  AND rs.status > 99 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/928af/13)。

以这种方式编写查询的主要原因是因为在您当前的查询中，您正在分组，`review_id`但返回的是`status`. MySQL 对该子句使用了扩展，该`GROUP BY`子句将允许将选择列表中的项目排除在一个`GROUP BY`或聚合函数中，但这可能会导致意外结果。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:17:20.767

试试这个：

```
SELECT r.*, r_s.*
FROM review_status r_s LEFT JOIN reviews r
ON r.review_id = r_s.review_id
WHERE r_s.user_id > 100 AND r_s.user_id < 120
ORDER BY r_s.timestamp DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:27:17.550

```
SELECT r.review_id, r.comment, r.reviewer_id, r.user_id, tt.status,tt.timestamp
FROM (
    SELECT rs2.review_id,rs2.status,rs2.timestamp
    FROM (
        SELECT MAX(rs.timestamp) as mts
        FROM reviews rr
        JOIN review_status AS rs ON rs.review_id = rr.id
        WHERE rs.status < 200 AND rs.status > 99
        AND rr.user_id IN (100,120)
        GROUP BY rs.review_id
    ) as t
    JOIN review_status rs2 ON rs2.timestamp = t.mts
    GROUP BY rs2.review_id #remove duplicate statuses with the same timestamp
) as tt
JOIN reviews as r ON r.id = tt.review_id 
```

user_id 和 status 过滤器必须在最里面的查询中，以避免每次都选择和连接整个 statuses 表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T21:42:52.987

`JOIN`这是我对 one和 one的尝试`correlated sub-query`：

```
SELECT r.*, rs.*
FROM Reviews AS r 
INNER JOIN Review_status AS rs ON r.review_id = rs.review_id 
WHERE rs.status BETWEEN 99 AND 200 AND
      r.user_id IN (100,120) AND
      rs.timestamp = (SELECT MAX(timestamp) FROM Review_status 
                      WHERE review_id = r.review_id
                      ORDER BY timestamp DESC)
ORDER BY r.review_id; 
```

它的 SQL 小提琴：[http ://sqlfiddle.com/#!2/02f18/6](http://sqlfiddle.com/#!2/02f18/6)

# java - 我需要一个网络爬虫吗？或者也许是一个网络爬虫？

> ID：15774458
> 
> 赞同：0
> 
> 时间：2013-04-02T21:11:03.927
> 
> 标签：java, web-scraping, web-crawler

我需要自动化这个过程： - 登录到一个网站 - 导航到一个页面 - 检索一条信息

这应该发生在 Java 程序中。我知道有一些开源 Java 库（JSpider、 crawler4j 和其他），但我不明白它们是否符合我的需求。

我是蜘蛛/爬虫我需要什么？如果没有，我需要什么，它是否存在？

# python - 我无法在我的 tkinter 图像上显示文本

> ID：15774459
> 
> 赞同：8
> 
> 时间：2013-04-02T21:11:07.563
> 
> 标签：python, image, python-2.7, tkinter, python-imaging-library

我正在尝试在我的图像上显示文本，但我不能这样做，任何人都可以帮忙。

代码：

```
# import Image and the graphics package Tkinter
import Tkinter
import Image, ImageTk

class simpleapp_tk(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):
##    def create_widgets(self):
        # create welcome label
        label1 = Tkinter.Label(self, text = "Update User")
        label1.grid(row = 0, column = 1, columnspan = 2, sticky = 'W')

# open a SPIDER image and convert to byte format
im = Image.open('C:\Users\JOHN\Desktop\key.jpg')

root = Tkinter.Tk()  # A root window for displaying objects

 # Convert the Image object into a TkPhoto object
tkimage = ImageTk.PhotoImage(im)

Tkinter.Label(root, image=tkimage).pack() # Put it in the display window

root.mainloop() # Start the GUI 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T01:07:22.300

Label 构造函数接受一个参数`compound`。将图像和文本都传递给构造函数，并传入`compound`as`Tkinter.CENTER`以将文本重叠到图像上。此功能的文档位于[http://effbot.org/tkinterbook/label.htm](http://effbot.org/tkinterbook/label.htm)

```
import Tkinter
import Image, ImageTk

# open a SPIDER image and convert to byte format    
im = Image.open(r'C:\Users\JOHN\Desktop\key.jpg')

root = Tkinter.Tk()  # A root window for displaying objects

# Convert the Image object into a TkPhoto object
tkimage = ImageTk.PhotoImage(im)

Tkinter.Label(root, image=tkimage, text="Update User", compound=Tkinter.CENTER).pack() # Put it in the display window

root.mainloop() # Start the GUI 
```

另请注意，您不应该混合使用包和网格。您应该选择其中之一。参考：[http ://effbot.org/tkinterbook/grid.htm](http://effbot.org/tkinterbook/grid.htm)

PS以防万一您希望文本垂直高于图像，您可以使用与上面相同的代码，除了 set `compound=Tkinter.BOTTOM`。

# javascript - 在响应表中，第二列值与第一列值重叠

> ID：15774460
> 
> 赞同：0
> 
> 时间：2013-04-02T21:11:08.970
> 
> 标签：javascript, jquery, html, css, responsive-design

当您缩小浏览器窗口时，您将看到表格的不同布局，因为我使用的是响应式表格......问题出在 iphone 屏幕布局中，一些第二列值与第一列值的相应行重叠。 ...如何避免重叠...

[http://jsfiddle.net/bz2C4/embedded/result/](http://jsfiddle.net/bz2C4/embedded/result/)

```
/* 
    Max width before this PARTICULAR table gets nasty
    This query will take effect for any screen smaller than 760px
    and also iPads specifically.
    */
    @media 
    only screen and (max-width: 760px),
    (min-device-width: 768px) and (max-device-width: 1024px)  {

        /* Force table to not be like tables anymore */
        table, thead, tbody, th, td, tr { 
            display: block; 
        }

        /* Hide table headers (but not display: none;, for accessibility) */
        thead tr { 
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        tr { border: 1px solid #ccc; }

        td { 
            /* Behave  like a "row" */
            border: none;
            border-bottom: 1px solid #eee; 
            position: relative;
            padding-left: 50%; 
        }

        td:before { 
            /* Now like a table header */
            position: absolute;
            /* Top/left values mimic padding */
            top: 6px;
            left: 6px;
            width: 45%; 
            padding-right: 10px; 
            white-space: nowrap;
        }

        /*
        Label the data
        */
        td:nth-of-type(1):before { content: "MFG P/N"; }
        td:nth-of-type(2):before { content: "MFG Name"; }
        td:nth-of-type(3):before { content: "Part ID"; }
        td:nth-of-type(4):before { content: "Description"; }
        td:nth-of-type(5):before { content: "Cost"; }
        td:nth-of-type(6):before { content: "Price"; }
        td:nth-of-type(7):before { content: "On Hand"; }
        td:nth-of-type(8):before { content: "On Order"; }
        td:nth-of-type(9):before { content: "Allocated"; }
        td:nth-of-type(10):before { content: "Shipped"; }
        td:nth-of-type(11):before { content: "Report"; }
        td:nth-of-type(12):before { content: "RMA"; }
        td:nth-of-type(10):before { content: "File"; }
        td:nth-of-type(10):before { content: "Add Part"; }
    }

    /* Smartphones (portrait and landscape) ----------- */
    @media only screen
    and (min-device-width : 320px)
    and (max-device-width : 480px) {
        body { 
            padding: 0; 
            margin: 0; 
            width: 320px; }
        }

    /* iPads (portrait and landscape) ----------- */
    @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
        body { 
            width: 495px; 
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:34:14.140

您需要删除“位置：绝对；” 从生成的内容 - 见 [http://jsfiddle.net/ffYTa/](http://jsfiddle.net/ffYTa/)

```
td:before{position:static;} 
```

# java - 在Java中编写使用多维数组的基本方法

> ID：15774461
> 
> 赞同：0
> 
> 时间：2013-04-02T21:11:11.083
> 
> 标签：java, getter-setter

我有一点点代码

```
_grid[4][4].setText(_square[4][4].getTopColor() + ": "
            + _square[4][4].getHeight()); 
```

最终在我的程序中，文本会改变，因为 get.Height 的值会改变。有没有办法编写一个简单的程序，根据多维数组的坐标设置文本？

因此，如果调用 updateText 方法，我可以执行 _grid[4][4].updateText(); 它与上面的代码相同。或者，如果我执行了 _grid[0][12].updateText()，它会执行与此相同的操作：

```
_grid[0][12].setText(_square[0][12].getTopColor() + ": "
            + _square[0][12].getHeight()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:12:28.137

将该行重构为同一类中的方法很容易。

```
private void updateText(int row, int col) {
    _grid[row][col].setText(_square[row][col].getTopColor() + ": "
                + _square[row][col].getHeight());
} 
```

如果您想使其成为`grid`项目的方法，则必须提供更多详细信息。网格中的项目是否知道它们对应`_square`的 s？

# c#-2.0 - 如何在 JD Edwards Enterprise one 9.0 和 .Net 之间进行通信

> ID：15774463
> 
> 赞同：0
> 
> 时间：2013-04-02T21:11:15.847
> 
> 标签：c#-2.0, jdedwards

我有问题，如何与.Net 沟通 Jd Edwards Enterprise one 9.0，我的项目经理告诉我看一下“fatclient”，因为它充当这两者之间的中间件，但我的搜索没有运气，谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:26:38.400

回复这个旧帖。希望这将帮助有类似需求的人：

看看我们的产品 LynX Business Integrator。它经过 Oracle 验证，允许您在 C# 中**本地**创建集成流程并将其作为 Web 服务发布。因此，您可以编写如下代码：

```
private bool CallAddressBookBsfn(BusinessDocument businessDocument, Transaction transaction)
{     
  AddressBookMaster abm = businessDocument.document.input.AddressBook;

  // create an instance of the Address Book Master Business function
  // note the use of JDE Transactions
  AddressBookMasterMBF bsfn = new AddressBookMasterMBF(transaction);

  // set parameters - most of this code is auto-generated
  bsfn.DpmnAddressBookNumber.InValue = (long)abm.AddressNumber;
  bsfn.DpszSearchType.InValue = abm.AddressType;
  bsfn.DpszAlphaName.InValue = abm.Name;
  bsfn.DpszAddressLine1.InValue = abm.AddressLine1;
  bsfn.DpszAddressLine2.InValue = abm.AddressLine2;
  bsfn.DpszAddressLine3.InValue = abm.AddressLine3;
  bsfn.DpszAddressLine4.InValue = abm.AddressLine4;
  bsfn.DpszPostalCode.InValue = abm.ZipCodePostal;
  bsfn.DpszCity.InValue = abm.City;
  bsfn.DpszState.InValue = abm.State;
  bsfn.DpszCountry.InValue = abm.Country;
  bsfn.DpcActionCode.InValue = 'A';
  bsfn.DpcUpdateMasterFile.InValue = '1';

  // execute the business function
  if (bsfn.Execute() != BusinessFunctionResult.Success)
  {
    // get errors
    return false;
  }

  // assign output
  businessDocument.document.output.AddressNumber = bsfn.DpmnAddressBookNumber.OutValue;
  businessDocument.document.output.AddressNumberSpecified = true;
  return true;
} 
```

看看我们的 YouTube 频道[http://www.youtube.com/user/aelliuslynx](http://www.youtube.com/user/aelliuslynx)和我们的产品页面[http://www.aellius.com/products/lynx-business-integrator](http://www.aellius.com/products/lynx-business-integrator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:31:52.243

我使用的是旧版本 8.0，如果通过“通信”你的意思是能够从 .NET 应用程序直接运行 JDE BSFN，那么我会让你失望，但我不知道有任何方法。

也许事情在 9.0 中发生了变化，但我对此表示怀疑。

就个人而言，每当我想与我们的 JDE（基于 AS400）通信时，我都在使用：

前端

-.NET Web Api 服务 -C# winforms 应用程序 -ASP.NET

后端

- 用于业务逻辑和数据访问层的自定义 Dll。

# javascript - HTML5 中的多个相同元素 ID - 这应该如何与脚本一起使用？

> ID：15774464
> 
> 赞同：8
> 
> 时间：2013-04-02T21:11:16.317
> 
> 标签：javascript, jquery, html

我已经回答了数百个 jQuery 问题。新手常见的错误之一是使用多个元素 ID，如下所示：

```
<div id="a">....</div>
<div id="a">....</div> 
```

然后他们会做这样的事情并询问为什么它不能按预期工作：

```
$('#a').hide(); 
```

我通常会回复：

> ```
> IDs must be unique 
> ```

...有人总是回应：

> 但不是在 HTML5 中！

**问题**：如果 HTML5 中允许使用多个相同的 ID，脚本应该如何处理它们，或者我们仍然应该避免使用多个相同的元素 ID？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T21:15:02.083

仅引用[HTML5](http://www.w3.org/TR/html5/dom.html#the-id-attribute)

> id 属性指定其元素的唯一标识符 (ID)。[DOMCORE]
> 
> 该值在元素的所有 ID 中必须是唯一的，`home subtree` 并且必须包含至少一个字符。该值不得包含任何空格字符。

我想在一般意义上，`ID`可能是用词不当。但是，它应该在子树上下文中有效。

主子树是：

> 节点的[主子树](http://www.w3.org/TR/html5/infrastructure.html#home-subtree)是以该节点的根元素为根的子树。当一个节点在一个文档中时，它的主子树就是那个文档的树

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:15:20.960

我投票避免使用多个相同的 ID。 ~~Jquery 根据选择器返回一个元素数组，这将隐藏对这个约定的滥用~~。

使用 ID 作为 jquery 选择器时，仅返回 1 个元素：[Jquery Docs](http://api.jquery.com/id-selector/)

我将继续保持我的 ID 独一无二。它只是使开发更容易。

# android - 如何为随机生成器创建一个后退按钮，以便显示以前的文本视图？

> ID：15774465
> 
> 赞同：0
> 
> 时间：2013-04-02T21:11:20.673
> 
> 标签：android, eclipse, button, random

问题真的就是这么简单。我有一个带有随机更改文本视图框文本的按钮的活动。如何添加另一个按钮来收集以前生成的数字，以便返回以前的 textview 文本 - 对于报价应用程序。我需要什么功能吗？我已经搜索过，但我找不到会在随机数生成器上“返回”的功能。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:22:41.077

您不需要返回生成器本身，只需记住以前的值即可。将其存储在变量中。这里我们使用 prev 作为数组，因为我们需要它是 final 的，所以我们可以在匿名内部类（点击处理程序）中访问它。但我们也需要改变它。所以我们使用这个`prev[0]`值。

在这里，我假设您有一个名为 nextNum 的按钮，它生成下一个随机数。但这可能是任何事情，没关系。当您生成一个新的随机数时，只需更新 prev 数组的第 0 个元素就可以了。

```
final String[] prev = new String[] { "" }

@Override
public void onCreate(Bundle bundle) {
    // ....
    Button BackQuote = (Button)findViewById(R.id.back); 
    final TextView display = (TextView) findViewById(R.id.textView1);

    // number generator button
    Button nextNum = (Button) findViewById(R.id.random);
    nextNum.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // generate a random number

            // store it in prev
            prev[0] = rndNum.toString();
        }
    });

    BackQuote.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) {
            display.setText(prev[0]); 
        } 
    });
} 
```

除非有特定原因要避免这种情况，否则这将非常有效。而且没有办法*回到*随机生成器上。根据定义，它是随机的！（是的，伪随机。尽管如此）

因此，如果您想保留历史记录，则必须自己实施这些记录。我还没有看到具有*历史*功能的随机生成器。如果我也这样做，我会感到惊讶。

# sencha-touch-2 - 如何加快 Sencha Touch 的加载时间

> ID：15774471
> 
> 赞同：0
> 
> 时间：2013-04-02T21:12:04.320
> 
> 标签：sencha-touch-2, cloud9-ide

我目前正在使用 Cloud 9 IDE 开发 Sencha Touch 应用程序。我在本地机器上创建了应用程序，然后将项目导入到 Cloud 9。一切正常，但令人烦恼的是我的页面的加载时间超过一分钟。我认为这与所有单独加载的文件有关。

加快 sdk 加载时间的最佳方法是什么？我不确定如何使用 sdk 工具，也不知道您是否可以将它们安装到 Cloud 9 中。放弃 sdk 工具并手动加载 Sencha 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:38:05.377

关键是缩小和聚合所有 JS 和 CSS，以便在更少的 http 调用中传输更少的字节数。Sencha Cmd 具有完成所有这些并创建打包构建以快速加载的功能，这是您必须从应用程序目录执行的操作：

```
sencha app build package 
```

这将使用您的应用程序的缩小版本创建 .>build>package 文件夹。

有关更多详细信息，请阅读[http://docs.sencha.com/touch/2-1/#!/guide/command](http://docs.sencha.com/touch/2-1/#!/guide/command)并查看此[http://vimeo.com/55148644](http://vimeo.com/55148644)以获取说明

# java - 在数组列表中保存和加载字符串并运行打印数组列表的方法

> ID：15774472
> 
> 赞同：0
> 
> 时间：2013-04-02T21:12:04.977
> 
> 标签：java

在过去的 5 天里，我一直在尝试解决这个问题。好的，我有 4 种方法，add 允许我将酒店添加到选定的地方。视图允许我查看我添加到某些地方的酒店列表。我也有一个保存方法和一个加载方法，我想找点乐子

```
import java.io.*;

public class ArrayLists   
{   bjectInputStream(inFileStream);

    in.readObject();
    in.close();

      } 
catch (FileNotFoundException ex) 
{
    System.out.println("Error");
} 
catch (IOException ex) 
{
    System.out.println("Error");
} 
catch (ClassNotFoundException ex) 
{
    System.out.println("Error");
}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:14:23.560

看起来您正在丢弃从文件中读取的对象：

```
in.readObject(); 
```

您可能应该将其更改为：

```
nyArray = (ArrayList<String>) in.readObject(); 
```

此外，由于您保存的文件的内容`ArrayList`不是文本的，我建议您将文件名更改为其他名称，例如，`hello.dat`而不是`hello.txt`.

# android - 如何发送带有参数 Spring MVC 的 getForObject 请求

> ID：15774475
> 
> 赞同：14
> 
> 时间：2013-04-02T21:12:19.367
> 
> 标签：android, rest, spring-mvc, get, resttemplate

我在服务器端有一个方法，它为我提供了有关在我的数据库中注册的特定名称的信息。我正在从我的 Android 应用程序访问它。

对服务器的请求正常完成。我要做的是根据我想要获取的名称将参数传递给服务器。

这是我的服务器端方法：

```
@RequestMapping("/android/played")
public ModelAndView getName(String name) {
    System.out.println("Requested name: " + name);

    ........
} 
```

这是对它的Android请求：

```
private Name getName() {
    RestTemplate restTemplate = new RestTemplate();
    // Add the String message converter
    restTemplate.getMessageConverters().add(
        new MappingJacksonHttpMessageConverter());
    restTemplate.setRequestFactory(
        new HttpComponentsClientHttpRequestFactory());

    String url = BASE_URL + "/android/played.json";
    String nome = "Testing";

    Map<String, String> params = new HashMap<String, String>();
    params.put("name", nome);

    return restTemplate.getForObject(url, Name.class, params);
} 
```

在服务器端，我只得到：

```
Requested name: null 
```

是否可以像这样向我的服务器发送参数？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-02T21:17:20.393

其余模板期望变量“{name}”在其中进行替换。

我认为您要做的是使用查询参数构建一个 URL，您有以下两种选择之一：

1.  使用 UriComponentsBuilder 并通过它添加参数
2.  字符串 url = BASE_URL + "/android/played.json?name={name}"

不过，选项 1 更加灵活。如果您只需要完成此操作，选项 2 会更直接。

**根据要求提供示例**

```
// Assuming BASE_URL is just a host url like http://www.somehost.com/
URI targetUrl= UriComponentsBuilder.fromUriString(BASE_URL)  // Build the base link
    .path("/android/played.json")                            // Add path
    .queryParam("name", nome)                                // Add one or more query params
    .build()                                                 // Build the URL
    .encode()                                                // Encode any URI items that need to be encoded
    .toUri();                                                // Convert to URI

return restTemplate.getForObject(targetUrl, Name.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-08T09:44:15.390

改变

```
String url = BASE_URL + "/android/played.json"; 
```

到

```
String url = BASE_URL + "/android/played.json?name={name}"; 
```

因为地图只包含 url 的变量！

# jsf-2 - 使用 ui:include、rich:popupPanel 和 navigation-rules 创建向导

> ID：15774477
> 
> 赞同：0
> 
> 时间：2013-04-02T21:12:25.087
> 
> 标签：jsf-2, richfaces, faces-config, uiinclude

我正在尝试使用 ui:include 在 RichFaces 4 popupPanel 和 faces-config.xml 中的导航规则构建一个向导，但是在完成后备 bean 中的操作时，页面不会导航到目标页面。我已经检查以确保 bean 按预期执行并且它提供了预期的结果。

下面列出了 JSF 页面和包含的页面：

```
<rich:popupPanel modal="true" id="addSvcAcctPanel" autosized="true">

        <rich:messages id="addSvcAcctPanelMessages" globalOnly="false"
            styleClass="message" />

        <a:outputPanel id="includeAddSvcAcct">          
            <ui:include src="/layout/addSvcAccPg2.xhtml" />
        </a:outputPanel>                    

        <h:form id="closeSvcAcctForm">
            <div class="buttons">
                <a:commandButton styleClass="save" id="closeAddSvcBtn"
                    value="close"
                    onclick="#{rich:component('addSvcAcctPanel')}.hide()"
                    render="hasAgentsAccItm,svcAccAccordItm,svcAcctsTab,svcAccInfo,agentPanel,ServiceAccts,noticesAccordion">
                    <rich:tooltip direction="topRight" mode="client" showDelay="300"
                        styleClass="tooltip" layout="block">

                        <span style="white-space: wrap">Click on the 'Close'
                            button to close this panel and return to the main screen. If you
                            have any unsaved information on this page, it will be lost when
                            you click close.</span>

                    </rich:tooltip>
                </a:commandButton>
            </div>              
        </h:form>
    </rich:popupPanel> 
```

插入的两个面板的 JSF 代码如下：

第 1 页……

```
<?xml version="1.0" encoding="UTF-8" ?>
<h:form xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:richext="http://java.sun.com/jsf/composite/richext"
    xmlns:a="http://richfaces.org/a4j">

    <rich:panel id="addSvcAcctPanelContent" headerClass="head2" style="height:100%;">
        <f:facet name="header">
            <h:outputText styleClass="med_black_type_bold_facet"
                value="Add a Service Account" />
        </f:facet>

        <h:panelGrid columns="3">
            <h:outputText styleClass="med_black_type_bold"
                value="Department" id="companyLabel" />

            <rich:select styleClass="med_black_type" id="companySelect"
                required="true" value="#{main.selected_company}" render="acctWarning, accountLabel1" valueChangeListener="#{main.determineProperAccountName}">
                <f:selectItem
                    itemLabel="Please select an Organisation"
                    itemValue="" />
                <f:selectItems value="#{country_companies}" />
                <a:ajax event="selectitem" render="acctWarning, accountLabel1, acctNumberExplain, acctIdHeader, acctIDHelp" execute="@this"/>               
            </rich:select>

            <rich:message for="companySelect" style=" width : 330px;" />

            <h:outputText styleClass="med_black_type_bold"
                value="Account 'Nickname'" id="nicknameLabel" />

            <h:inputText styleClass="med_black_type" id="nickname"
                value="#{main.alias}" onfocus="#{rich:component('nickNameHelpPanel')}.show()"
                onblur="#{rich:component('nickNameHelpPanel')}.hide()">
                <rich:validator />  

                <!-- <f:ajax event="focus" execute="@this" onevent="#{rich:component('nickNameHelpPanel')}.show()"/>        
                <f:ajax event="blur" execute="@this" onevent="#{rich:component('nickNameHelpPanel')}.hide()"/> --> 
            </h:inputText>
            <rich:message for="nickname" style=" width : 330px;" />

            <richext:spacer width="30" />
            <h:outputText id="acctWarning" styleClass="med_blue_type_bold"
                value="Enter the #{main.accountProperName} below - numbers and letters only! No dots or dashes." />
            <richext:spacer width="30" />

            <h:outputText styleClass="med_black_type_bold"
                value="#{main.accountProperName}" id="accountLabel1" />

            <h:inputText styleClass="med_black_type" id="account"
                value="#{main.account_id}" onfocus="#{rich:component('acctIDHelpPanel')}.show()"
                onblur="#{rich:component('acctIDHelpPanel')}.hide()">
                <rich:validator />

                <!-- <f:ajax event="focus" execute="@this" onevent="#{rich:component('acctIDHelpPanel')}.show()"/>      
                <f:ajax event="blur" execute="@this" onevent="#{rich:component('acctIDHelpPanel')}.hide()"/> --> 
            </h:inputText>
            <rich:message for="account" style=" width : 330px;" />
        </h:panelGrid>

        <div class="buttons">

            <a:commandButton styleClass="save" id="addServiceCompany"
                value="save" action="#{main.addAccount}" render="includeAddSvcAcct, includeAddSvcAcct1"/>
        </div>
    </rich:panel>

</h:form> 
```

第 2 页……

```
<?xml version="1.0" encoding="UTF-8" ?>
<h:form xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:richext="http://java.sun.com/jsf/composite/richext"
    xmlns:a="http://richfaces.org/a4j">

<rich:panel>
    <h:outputText value="The service account has been successfully added." styleClass="med_black_type"/>
</rich:panel> 
```

faces-config 的相关摘录如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.1" 
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">

 <navigation-rule>
  <from-view-id>/layout/addSvcAccPg2.seam</from-view-id>
  <navigation-case>
   <from-action>#{main.outcome}</from-action>
   <from-outcome>success</from-outcome>
   <to-view-id>/layout/addSvcAccPg3.seam</to-view-id>
  </navigation-case>
 </navigation-rule>

 <application>
  <locale-config>
   <default-locale>en</default-locale>
   <supported-locale>bg</supported-locale>
   <supported-locale>de</supported-locale>
   <supported-locale>en</supported-locale>
   <supported-locale>fr</supported-locale>
   <supported-locale>tr</supported-locale>
  </locale-config>
 </application>
</faces-config> 
```

来自 backing bean 的方法如下：

```
public String addAccount() {
        String retVal = "failed";
        try {

            getSAFctx.addService(getIntUserId(), 1, selected_company,
                    account_id, alias);         
            retVal = "success";
        } catch (Exception e) {

           System.out.println(e.getMessage());                  

        } finally {                     

            return retVal;
        }
} 
```

我曾尝试使用 pages.xml、*.pages.xml 和 rich:togglePanel（由于某种原因，它不允许 commandButtons 参与支持 bean）。有没有人有任何可以提供帮助的建议？有谁知道如何使这个向导工作？

提前致谢。

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:39:46.493

从上面的代码可以清楚地看出，一旦页面 /layout/addSvcAccPg2.seam 包含在 rich:popupPanel 中，那么它将导致单个页面中两个不同组件的 ID 相同的情况。

您已将 ID="addSvcAcctPanel" 用于rich:popupPanel 和rich:panel。这是 Richfaces 的常见问题，并会产生页面导航问题。

只是让它们不同，然后再试一次。

# ruby-on-rails - 如何合并 2 个对象（具有相同的数据结构）并在 rails 3.2.12 中渲染？

> ID：15774478
> 
> 赞同：0
> 
> 时间：2013-04-02T21:12:27.103
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, render

在我们的 rails 3.2.12 应用程序中，存在两个变量（存储具有相同数据结构的表的子集）返回并需要组合以在索引视图中呈现的情况。我们以@project1 和@project2 为例。@project1 和@project2 都有从`project`表中检索到的数据子集。在渲染之前，需要做一些事情：

```
1\. merge @project1 and @project2 into @project
2\. get rid of duplicate record in @project. like @project.uniq
3\. render @project as json 
```

对于合并，我们可能可以做`@project = @project1.to_json + @project2.to_json`. 然后`@project`是一个`json`对象。

如何摆脱相同的记录`@project`？我们不知道该怎么做。

对于渲染@project，我们可以做`render :json => @project in controller index (response_to do |format| format.json { render :json => @project })`吗？我们可以在没有任何更改的情况下使用相同`index.html.erb`的`render`json吗`@project`（我们 在索引视图中`helper method`应用了一个）？`each of @project`

有人可以评论上述步骤（工作与否）并阐明如何摆脱 json 对象中的重复记录吗？

还有像`@project = @project1 + @project2`现有的解决方案吗？这可能是一种天马行空的想象。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:24:51.397

将记录对象转换为散列，然后合并散列。

```
h1 = @project1.attributes;
h2 = @project2.attributes;
@project.attributes = h1.merge(h2); 
```

补充：在下面的评论中进行了一些交流后找到了正确的答案。

```
@project = @project1.merge(@project2).uniq 
```

# php - Yii - 在 CActiveDataProvider 中附加一个行为

> ID：15774485
> 
> 赞同：0
> 
> 时间：2013-04-02T21:12:54.717
> 
> 标签：php, yii, behavior

我正在寻找一种如何将行为附加到 Yii 框架中网格视图中显示的模型的方法。网格视图使用 CActiveDataProvider，我需要每个 $data 元素都附加一个行为。模型不应在构造后附加行为，因为它仅与网格视图相关。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:30:10.940

您可以创建以下类以用于创建数据提供者。

```
ActiveDataProvider extends CActiveDataProvider{

  public function getData(){
    $data = parent::getData();

    foreach($data as &$model){
       $model->attachBehavior('aName', new mybehavior());
    }
    return $data;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:39:28.527

另一种选择（而不是按照另一个答案中的建议创建 CActiveDataProvider 覆盖）是提前进行所有模型查询并将您的行为附加到控制器中。然后传递给 CArrayDataProvider。

嗯，考虑一下，我更喜欢另一种方法:-) 为了完整起见，我会留下这个。

# android - 在 python app-engine 端点上测试 android 应用程序

> ID：15774486
> 
> 赞同：0
> 
> 时间：2013-04-02T21:13:00.943
> 
> 标签：android, google-app-engine, google-cloud-endpoints

我的 python 应用程序引擎端点在本地主机上运行。如何将我的 android 应用程序指向它进行测试？现在，android 应用程序正在尝试`https:myapp.appspot.com/_ah/api`访问`appspot`. 我必须先将 python 端点服务器部署到`appspot`android 应用程序才能看到它吗？我可以将服务器部署到 localhost 并从那里测试 android 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:12:44.817

编辑：对不起，我可能误解了你的问题。我认为您应该能够根据此链接在本地对其进行测试 - [https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)。第 5 步和第 6 步是指在本地运行后端。你看过这个页面吗？

* * *

是的，您必须将其部署到 GAE。您可以通过 API 资源管理器在 GAE 上测试您的后端，通过[https://mapp.appspot.com/_ah/api/explorer](https://mapp.appspot.com/_ah/api/explorer)确保其工作正常。然后按照[https://developers.google.com/appengine/docs/python/endpoints/consume_android](https://developers.google.com/appengine/docs/python/endpoints/consume_android)的说明生成 android 客户端。

这里也有一些例子，

**APP 引擎后端** [https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-python](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-python)

**使用应用引擎后端的 Android 应用** [https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-android](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-android)

# validation - 无法使用 jQuery 表单插件在验证失败时阻止文件上传

> ID：15774487
> 
> 赞同：3
> 
> 时间：2013-04-02T21:13:01.120
> 
> 标签：validation, jquery-forms-plugin

这是我的表格：

```
<form id="frmUpload" action="../scripts/upload.php" method="post" enctype="multipart/form-data">
    <div id="sermonInfo">
        File: <input type="file" id="uploadedFile" name="uploadedFile" class="error"><br>
        <br>
        Title: <input type="text" id="title" name="sermonTitle" size="35" maxlength="100">
    </div>
</form>
<div id="uploadInfo">
    <div class="progress">
        <div class="statusBar" style="width: 0%;"></div>
        <div class="percent">0%</div>
    </div>

    <div id="status"></div>
    <br>
    <div id="required">Only mp3 files are allowed!</div>
</div> 
```

这是我正在使用的 JS：

```
<script>
    $(function() {
        /*
         * Upload
         */
        // Reset validation and progress elements
        var formValid = true,
            percentVal = '0%';
        $('#uploadedFile, #title').removeClass('error');
        $('#status, #required').empty().removeClass();
        $('.statusBar').width(percentVal)
        $('.percent').html(percentVal);

        $('form').ajaxForm({
            beforeSend: function(e) {

                if (!ValidateUploadForm()) {
                    formValid = false;
                    console.log('validateuploadform returned false');
                } else {
                    console.log('validateuploadform returned true');
                    formValid = true;
                }

                console.log('in beforeSend. formValid: ' + formValid);

                if (!formValid) {
                    return false;
                }

            },
            uploadProgress: function(event, position, total, percentComplete) {
                console.log('in uploadProgress function. formValid: ' + formValid);
                if (formValid) {
                    var percentVal = percentComplete + '%';
                    $('.statusBar').width(percentVal)
                    $('.percent').html(percentVal);    
                }
            },
            complete: function(xhr) {
                console.log('in complete function. formValid: ' + formValid);
                if (formValid) {
                    console.log('xhr.responseText: ' + xhr.responseText);
                    console.log('formValid: ' + formValid);

                    if (xhr.responseText === 'success') {
                        $('.statusBar').width('100%');
                        $('.percent').html('100%');
                        $('#status').html('Successfully uploaded the file.').addClass('successUpload');

                        // Clear the form
                        ClearForm();

                    } else if (xhr.responseText === 'fail') {
                        $('#status').html('There was a problem uploading the file. Try again.<br>If the problem persists, contact your system administrator.').addClass('errorUpload');
                    }
                }
            }
        }); // End Upload Status Bar
    });

    function ValidateUploadForm() {
        // Reset errors and clear message
        $('#uploadedFile, #title').removeClass('error');
        $('#required').empty();

        var result = true;
            title = $('#title').val(),
            fileName = $('#uploadedFile').val();
            extension = $('#uploadedFile').val().split('.').pop();

        if (fileName !== '' && extension !== 'mp3') {
            $('#uploadedFile').addClass('error');
            $('#required').html('Only mp3 files are allowed!');
            return false;
        } else if (fileName === '') {
            result = false;
        } else if (title === '') {
            $('#title').addClass('error');
            result = false;
        }

        console.log('returning ' + result + ' from the validateuploadform function');

        if (!result) { $('#required').html('All fields are required.'); }
            return result;
        }

        function ClearForm() {
            $('#uploadedFile, #title').val('').removeClass();
    }
</script> 
```

如您所见，我正在使用控制台输出来密切关注正在发生的事情。

我的问题是，如果选择了一个文件，该文件仍然会上传，无论 formValid（在 beforeSend 中）是真还是假。

我之前尝试过添加 preventDefault `return false;`。我也尝试过清除`if (!formValid) {}`块中的文件输入。如您所见，我已经包装了`uploadProgress`and`complete`函数来检查 formValid 是否为假。如果 uploadProgress 中的控制台输出显示 formValid 为**false**，则文件仍会上传。

我在这里想念什么？如果验证失败，如何防止文件上传？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:51:53.540

我终于弄清楚了这个问题：我正在将我的脚本与一些在线示例进行比较，并注意到示例的回调名为`beforeSubmit`，但我使用的是`beforeSend`.

奇怪的是，验证代码仍在执行，但返回 false 并没有停止上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:08:24.267

基本上，看起来您可能缺少`jquery.form.js`扩展名。如果没有 JavaScript 控制台输出，我只能猜测这应该是问题所在。尝试以下（整个）页面作为参考，停止上传工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Test Page</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js" type="text/javascript">
</script>
<script src="http://malsup.github.com/jquery.form.js" type="text/javascript">
</script>
<style type="text/css">
 div.c1 {width: 0%;}
</style>
</head>
<body>
<form id="frmUpload" action="%3C?php%20basename(__FILE__,%20'.php');%20?%3E" method="post" enctype="multipart/form-data" name="frmUpload">
<div id="sermonInfo">File: <input type="file" id="uploadedFile" name="uploadedFile" class="error"><br>
<br>
Title: <input type="text" id="title" name="sermonTitle" size="35" maxlength="100"></div>
<input type="submit" value="Submit"></form>
<div id="uploadInfo">
<div class="progress">
<div class="statusBar c1"></div>
<div class="percent">0%</div>
</div>
<div id="status"></div>
<br>
<div id="required">Only mp3 files are allowed!</div>
</div>
<script type="text/javascript">
    $(function() {
        /*
         * Upload
         */
        // Reset validation and progress elements
        var formValid = true,
            percentVal = '0%';
        $('#uploadedFile, #title').removeClass('error');
        $('#status, #required').empty().removeClass();
        $('.statusBar').width(percentVal)
        $('.percent').html(percentVal);

        $('form').ajaxForm({
            beforeSend: function(e) {

                if (!ValidateUploadForm()) {
                    formValid = false;
                    console.log('validateuploadform returned false');
                } else {
                    console.log('validateuploadform returned true');
                    formValid = true;
                }

                console.log('in beforeSend. formValid: ' + formValid);

                if (!formValid) {
                    return false;
                }

            },
            uploadProgress: function(event, position, total, percentComplete) {
                console.log('in uploadProgress function. formValid: ' + formValid);
                if (formValid) {
                    var percentVal = percentComplete + '%';
                    $('.statusBar').width(percentVal)
                    $('.percent').html(percentVal);    
                }
            },
            complete: function(xhr) {
                console.log('in complete function. formValid: ' + formValid);
                if (formValid) {
                    console.log('xhr.responseText: ' + xhr.responseText);
                    console.log('formValid: ' + formValid);

                    if (xhr.responseText === 'success') {
                        $('.statusBar').width('100%');
                        $('.percent').html('100%');
                        $('#status').html('Successfully uploaded the file.').addClass('successUpload');

                        // Clear the form
                        ClearForm();

                    } else if (xhr.responseText === 'fail') {
                        $('#status').html('There was a problem uploading the file. Try again.<br>If the problem persists, contact your system administrator.').addClass('errorUpload');
                    }
                }
            }
        }); // End Upload Status Bar
    });

    function ValidateUploadForm() {
        // Reset errors and clear message
        $('#uploadedFile, #title').removeClass('error');
        $('#required').empty();

        var result = true;
            title = $('#title').val(),
            fileName = $('#uploadedFile').val();
            extension = $('#uploadedFile').val().split('.').pop();

        if (fileName !== '' && extension !== 'mp3') {
            $('#uploadedFile').addClass('error');
            $('#required').html('Only mp3 files are allowed!');
            return false;
        } else if (fileName === '') {
            result = false;
        } else if (title === '') {
            $('#title').addClass('error');
            result = false;
        }

        console.log('returning ' + result + ' from the validateuploadform function');

        if (!result) { $('#required').html('All fields are required.'); }
            return result;
        }

        function ClearForm() {
            $('#uploadedFile, #title').val('').removeClass();
    }
</script>
</body>
</html> 
```

作为旁注，您可能想要使用

```
extension = $('#uploadedFile').val().split('.').pop().toLowerCase(); 
```

确保表单也接受`MP3`，因为这在野外也经常看到。

如果这不能解决您的问题，如果您可以上传相关页面的完整 HTML，将会有所帮助。

**更新**

关于上传的文件，您在第 91 行有一个简单的错字`testUpload.php`：

```
if ((fileName === '') || (extension !== 'mp3')) 
```

应该

```
if ((fileName === '') || (extension !== 'mp3')) { 
```

# python - 如何从网页中抓取正文？

> ID：15774489
> 
> 赞同：0
> 
> 时间：2013-04-02T21:13:06.413
> 
> 标签：python, web-scraping, beautifulsoup

我有一个从 ESPN NCAA 网站提取标题的代码。但我想刮掉整个网页。我是编码新手，如果您能帮助抓取网页，我将不胜感激。我发现很难理解 XML 标记并识别它们。请你们中的任何人修改此代码，以便打印此网页上的全部或大部分内容吗？谢谢！

```
from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import smtplib

site = urlopen('http://espn.go.com/college-football').read()
soup = BeautifulSoup(site)    

for i in soup.findAll('ul', {'class': 'headlines'}):
    for tag in i.findAll('li'):
        for a in tag.findAll({'a' : True, 'title' : False}):            
            print a.text
            print a['href']                                
            print "\n" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:28:13.587

如果您只想提取文本内容，可以使用继承自`HTMLParser`（来自标准库）的类：

```
from HTMLParser import HTMLParser
from StringIO import StringIO                                                             

class DeHTMLParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)
        self.text = StringIO()
    def handle_data(self, data):
        self.text.write(data.strip())

def text_from_html(html):
    parser = DeHTMLParser()
    parser.feed(html)
    parser.close()
    return parser.text.getvalue() 
```

当遇到 HTML 树中的文本内容时调用该类的`handle_data`函数。`DeHTMLParser`这些函数只是将值附加到一个`StringIO`对象（不进行字符串连接以避免创建多个临时对象）。使用`text_from_html`该类从字符串/unicode 中获取文本（查看`HTMLParser`模块文档以获取更多信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:20:02.480

您也可以使用[html2text](http://www.aaronsw.com/2002/html2text/)作弊:)

# python - 删除python中的换行符？

> ID：15774490
> 
> 赞同：2
> 
> 时间：2013-04-02T21:13:10.730
> 
> 标签：python, line-breaks

我正在开发一个简单的 python 游戏，玩家试图猜测单词中包含的字母。问题是，当我打印一个单词时，它会在末尾打印 \n 。

从我最初的研究来看，我认为我需要使用 r.string() 来删除它。但是，我不确定它会去哪里。

对不起新手问题。

```
import random
with open('wordlist.txt') as wordList:
    secretWord = random.sample(list(wordList), 1)

print (secretWord) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T21:15:10.237

您可以使用`.strip()`去除空格：

```
secret_word = random.choice(wordList).strip() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T21:17:06.047

我认为其他答案更好，但您也可以使用：

```
secretWord = secretWord.replace('\n', '')) 
```

编辑：OP 声明 secretWord 是一个列表，而不是一个字符串。

如果是字符串列表，请使用：

```
secretWord = [each.replace('\n', '') for each in secretWord] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T21:13:56.447

```
text = open("your file","r").read().replace('\n','')
x = set(text.split(" ")) 
```

# javascript - 如何防止一个特定的javascript在一页上运行？

> ID：15774492
> 
> 赞同：0
> 
> 时间：2013-04-02T21:13:22.760
> 
> 标签：javascript

我有一大堆头 javascript，都在一个文件中。其中一个脚本会检查访问者是否已经选择了一种布局格式（普通、平板电脑、移动设备）。如果没有，她/他会被提醒在索引页面上可以做出这样的选择。

但由于该选项是索引页面上描述的第一件事，因此如果请求索引页面本身，则不需要运行该脚本。但是如何防止该特定脚本仅在索引页面上运行？我试过这个

```
function informVisitor() {
    var layout = readCookie("layout");
    if (((layout == "") || (layout == null)) && (window.location.indexOf("index.php") != 0))
    {alert('Are you using a small device?\n Check the Welcome page for layout options.')}
}
informVisitor(); 
```

但 Firebug 说这`window.location.indexOf`不是一个函数。有可能吗，如果有，怎么做？还是我应该只使用`window.location`整个 http-url 而忘记本地故事？

# maven - 如何在 `settings.xml` 中使用 SingleKnownHostProvider？

> ID：15774493
> 
> 赞同：2
> 
> 时间：2013-04-02T21:13:23.763
> 
> 标签：maven, settings, rsa, maven-wagon-plugin

我想将我的 Maven 配置`settings.xml`为包含我们内部存储库的 RSA 指纹（ID 为“ `internal`”）。我找到了一个关于[如何忽略指纹](https://stackoverflow.com/questions/2685988/how-to-avoid-maven-builds-stall-on-ssh-host-authenticity-problem/2687946#2687946)的答案，并在同一个[包](http://maven.apache.org/wagon/apidocs/org/apache/maven/wagon/providers/ssh/knownhost/package-summary.html)中找到了一个名为[SingleKnownHost](http://maven.apache.org/wagon/apidocs/org/apache/maven/wagon/providers/ssh/knownhost/SingleKnownHostProvider.html)的类，上面写着“具有已知有线值的简单 KnownHostsProvider”，这听起来与我想要的完全一样，但是这种配置：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd
    ">
    <!-- http://maven.apache.org/settings.html -->
    <pluginGroups/>
    <servers>
        <server>
            <id>internal</id>
            <username>root</username>
            <password>p4ssw0rd</password>
            <configuration>
                <knownHostsProvider implementation="org.apache.maven.wagon.providers.ssh.knownhost.SingleKnownHostProvider">
                    <hostKeyChecking>yes</hostKeyChecking>
                    <key>81:66:27:b9:15:36:3a:91:ec:66:43:4f:69:a0:ef:c4:b9:15:36</key>
                </knownHostsProvider>
            </configuration>
        </server>
    </servers>      
</settings> 
```

但我得到了错误：

> [警告] 无法将内部配置应用于 wagon org.apache.maven.wagon.providers.ssh.jsch.ScpWagon:ClassNotFoundException：使用“实现”属性在配置中明确给出的类名：“org.apache.maven。 wagon.providers.ssh.knownhost.SingleKnownHostProvider' 无法加载

为什么会出现这种情况？我正在使用 Maven 3.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:44:56.997

AFAIU，Maven 将调用外部 SSH 命令，就像它连接到 SCM 时一样，例如[SVN](https://stackoverflow.com/questions/6605893/svn-ssl-handshake-failed-ssl-error-bad-packet-length/6607413#6607413)。为了摆脱连接提示，我们可能需要使用 SSH 至少连接到该主机一次。

```
#--I'm using CentOS release 5.4.

[my_user]$ ssh MY_USER@MY_HOST
The authenticity of host 'MY_HOST (MY_HOST_IP)' can't be established.
RSA key fingerprint is MY_FINGER_PRINT.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'MY_HOST,MY_HOST_IP' (RSA) to the list of known hosts. 
```

将`~/.ssh/known_hosts`包含 RSA 信息，如下例所示：-

```
MY_HOST,MY_HOST_IP ssh-rsa ..... 
```

然后下一次，当我们连接到该主机时，没有任何提示。其余的`settings.xml`应该在[设置参考：服务器中提到。](http://maven.apache.org/settings.html#Servers)

我希望这可能会有所帮助。

**编辑：** 关于 Windows，请尝试使用[PuTTY](http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html)。有无需任何安装即可运行的可执行文件。连接步骤如下： -

### 油灰

1.  打开`PUTTY.exe`
2.  与我们的主机建立连接。
3.  系统会提示是否保存远程 RSA 密钥。请保存。
4.  之后，远程 RSA 密钥将存储在 Windows 注册表中`HKEY_CURRENT_USER\SoftWare\SimonTatham\PuTTY\SshHostKeys`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T18:22:11.883

第一个问题`<key>81:66:27:b9:15:36:3a:91:ec:66:43:4f:69:a0:ef:c4:b9:15:36</key>`不是钥匙，而是钥匙的指纹。因此，即使可以通过这种方式指定密钥，它也无法工作。

要解决此问题，请将您的 wagon-ssh 扩展工件定义替换`pom.xml`为以下内容：

```
<build>
  <extensions>
    <extension>
      <groupId>org.apache.maven.wagon</groupId>
      <artifactId>wagon-ssh</artifactId>
      <version>3.0.1-SINGLE</version>
    </extension>
  </extensions>
</build> 
```

在此处下载并安装此编号为 3.0.1-SINGLE 的特定版本：[https ://github.com/AlexandreFenyo/maven-wagon](https://github.com/AlexandreFenyo/maven-wagon)

最后，`settings.xml`以这种方式更新您的：

```
<server>
        <id>internal</id>
        <username>root</username>
        <password>p4ssw0rd</password>
        <configuration>
                <hostKey>SERVERNAME HOSTKEY</hostKey>
            </knownHostsProvider>
        </configuration>
</server> 
```

将 SERVERNAME 替换为服务器 URL 中 scp: 之后的主机名。

将 HOSTKEY 替换为存储 SSHd 公共 RSA 密钥的文件的内容（通常是以下文件：）`/etc/ssh/ssh_host_rsa_key.pub`。

# java - 使用多个分隔符Java拆分字符串

> ID：15774500
> 
> 赞同：1
> 
> 时间：2013-04-02T21:13:46.263
> 
> 标签：java, string, split, delimiter

我想使用多个分隔符拆分字符串。现在我正在使用这个： `String delims = "[\\s;.,:'!?()]";` 这似乎对那些角色很有效，但是当我尝试添加`-`角色时，它对我大喊大叫。如何使用所有这些字符加上`-`分隔符来分割我的字符串？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:19:32.207

*   字符类里面有特殊的含义。它通常用于选择一系列字符，例如：[az] ...为了单独匹配破折号...保留在开头或结尾

我刚试过这个，它奏效了

```
 String regex = "[\\s;.,:'!?()-]";
  String text = "jatin-shah-testing";

  String[] tokens = text.split(regex);
  for(int i = 0; i < tokens.length; i++)
    System.out.println(tokens[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:18:57.383

`-`在字符类中有特殊含义，表示范围。（例如`[0-9]`将匹配任何数字。）

但是，如果你把它作为第一个字符或最后一个字符，它将被匹配为文字`-`。

# algorithm - 通过递归层次结构深处的某个 id 查找所有祖先

> ID：15774501
> 
> 赞同：-1
> 
> 时间：2013-04-02T21:13:47.463
> 
> 标签：algorithm

我想得到 ID 51 的所有祖先，它们是：1、11、22、31、41。

我不想要一个算法，我首先找到 ID 为 51 的对象，然后向上遍历父层次结构。

我想递归地向下层级并抓住所有祖先。

但我猜这样玩游戏不好吗？因为每次我能抓住一个祖先，我都不知道下一个孩子是否是 ID 52。有什么聪明的解决方法吗？

```
 1
-11
 -21
 -22
  -31
   -41
    -51
  -32
  -33
 -23
-12
-13 
```

**更新**

@Jim Mischel 询问我如何找到该对象并显示该代码：

```
public static T FindChild<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> selectorChildrenProperty, Predicate<T> condition) where T : class {

    if(source == default(T)) {
        throw new ArgumentNullException("source"); 
    }

    T t = default(T);
    foreach(T item in source) {
        if(condition(item)) {
            t = item;
            break;
        }
        else {
            t = selectorChildrenProperty(item).FindInHierarchy<T>(selectorChildrenProperty, condition);
            if(!Equals(t, default(T))) {
                break;
            }
        }
    }
    return t;
} 
```

这将找到具有特定属性的对象并将其返回。

当然，我可以编写第二个通用方法并从找到的对象开始并遍历层次结构，直到父对象为空，但是......

也许有一个聪明的算法我敢问......

比我聪明的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:49:57.040

一种可能的巧妙解决方法是一些规则，它告诉您在哪里可以找到父母的孩子。例如，在[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)中，当您查看父节点时，您知道哪个子节点将包含该节点。如果没有这样的规则，您将不得不在祖先中复制有关孩子的信息，这将重新创建已存储在树中的大部分信息。

# javascript - 谷歌地图（v3）将地理定位地址转换为方向 - 状态正常，但没有方向（找不到目标）

> ID：15774505
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:08.803
> 
> 标签：javascript, google-maps-api-3

所以我试图这样做：

*   输入地址
*   获取地址的纬度/经度
*   把它放在带有最终目的地（纬度/经度）的“方向”上
*   在我的两个 div 中获取路线

听起来很容易。该脚本返回“OK”状态。所以你应该认为它会起作用，但不是。

```
<div id="map_canvas" class="pic50"></div>
<div id="map_directions" class="text50"></div>

bring_me_back('map_canvas','map_directions','some address');
<script>
// bring me back
var directionDisplay;
var directionsService = new google.maps.DirectionsService();

function bring_me_back(call_back_map,call_back_directions,address) {
    var latlng = new google.maps.LatLng(51.764696,5.526042); // where you're at
  directionsDisplay = new google.maps.DirectionsRenderer();
  var myOptions = {
    zoom: 14,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false
  };

  var map = new google.maps.Map(document.getElementById(call_back_map),myOptions);
  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById(call_back_directions));
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    title:"My location"
  });

  // find the address
    geocoder = new google.maps.Geocoder (map);
    geocoder.geocode ( { 'address': address }, function(results, status)  {
    if (status == google.maps.GeocoderStatus.OK)  {
        var end = results [0].geometry.location; // where you need to go
      map.setCenter(results [0].geometry.location);
      marker.setPosition(results [0].geometry.location);
          var start = "51.764696,5.526042"; // where you're at (random place)
          var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.WALKING
          };
          directionsService.route(request, function(response, status) {
             alert("Directions was not successful for the following reason: " + status);
          });
    } 
    else {
      $('#'+call_back).html("Geocode was not successful for the following reason: " + status);
    }
  });
}
</script> 
```

我知道我在做一些愚蠢的事情，因为我的错误控制台显示：目标：[我的网站]# 未找到

有趣的是，地图确实以带有标记的地理定位器的正确位置为中心。所以除了推回方向它做得很好（我认为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:45:07.813

您在 DirectionsService 回调例程中不执行任何操作，除了输出消息“由于以下原因，路线不成功：” + 状态：

```
 directionsService.route(request, function(response, status) {
         alert("Directions was not successful for the following reason: " + status);
      }); 
```

如果要显示路线，需要调用[DirectionsRenderer](https://developers.google.com/maps/documentation/javascript/directions#RenderingDirections)

尝试这样的事情：

```
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  } else  alert("Directions was not successful for the following reason: " + status);
}); 
```

# c# - 如何使用 VSTO 在 Word 2010 文档中插入 HTML

> ID：15774508
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:28.507
> 
> 标签：c#, ms-word, vsto

我正在尝试将突出显示的代码（ColorCode-Lib）插入到文档的范围中。但我不知道如何使用格式化的 HTML。当我通过 '''Selection.Range.Text = highlightCode''' 添加它时；然后将插入纯 HTML 代码。如何实现插入格式化的 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:51:49.407

当您将 HTML 值复制/粘贴到单元格中时，会显示格式化的 HTML。您实际上可以在 VSTO 中执行此操作。[这个问题](https://stackoverflow.com/questions/13673373/how-can-i-paste-special-unformatted-plain-text-into-excel-using-c-sharp-and-vsto)可能会有所帮助。[这里](http://dailydoseofexcel.com/archives/2005/02/23/html-in-cells-ii/)还有一个宏可以复制/粘贴 HTML 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:54:04.507

如果 colourcodelib 返回 html 你有两个选择

1.  将 html 保存在文件中并尝试 Range.InsertFile([savedfile.html])。
2.  您可以使用 Range.InsertXML() 但为此您需要找到第三方库或编写自己的代码将 html 转换为 wordML

# javascript - Confluence - 在页面顶部播放 SWF

> ID：15774509
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:28.670
> 
> 标签：javascript, flash, media, playback, confluence

如果我在正常的 Web 编码环境中工作，我不确定如何执行此操作，更不用说我在 Confluence 中工作了。

我的经理要求我们在 Confluence 上的多媒体内容能够在用户单击链接时显示在浏览器页面顶部的灰色/半透明工作表上播放。我在网络上多次看到这个，它把灰色的形状放在页面上，一个带有界面的视频出现在页面上。通常有某种 X 来关闭它并返回您正在浏览的页面。

在网上搜索 How-To 时，我找到了一些教程，但它们需要 JavaScript 或更多，而且我还无法让 Confluence 接受我放在 Confluence 页面上的任何脚本。HTML 和 Confluence 自己的类/宏似乎是我的限制。

有没有人试图用 Confluence 做到这一点？我在这方面的转变预计会相当快。我已经解释说，由于我自己的局限性以及我在 Confluence 中的感知，我不愿意承诺这一点。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:36:05.017

为了在 Confluence 中使用 javascript，你需要去编辑 -> 管理 -> 编辑布局。在布局编辑器中，导航到 JS 选项卡。您可以在此处添加要用于整个空间的任何 javascript。除非您在`{html}`标签内工作，否则尝试在 Confluence 页面本身上添加 javascript 是行不通的，即便如此，我还是建议不要将它放在页面本身上，因为您永远不知道何时需要在不同的页面上重用该 javascript页。

这是一个描述如何在单个页面上插入 javascript 的页面： [https ://confluence.atlassian.com/display/CONFKB/How+to+Use+JavaScript+in+Confluence](https://confluence.atlassian.com/display/CONFKB/How+to+Use+JavaScript+in+Confluence)

这是一个描述如何在布局编辑器的 JS 选项卡中编辑 javascript 的页面：http: [//www.adaptavist.com/display/Builder/JS+Tab](http://www.adaptavist.com/display/Builder/JS+Tab)

# python - 命令行 STL 卷工具

> ID：15774510
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:28.617
> 
> 标签：python, 3d

我正在寻找一种工具，它可以让我在命令行上检查由[STL](http://en.wikipedia.org/wiki/STL_%28file_format%29 "STL")文件描述的对象的体积，就像`$ ./check_volume file.stl`. 这些文件可以是二进制或 ascii 格式，最好是代码适用于两者。

我做了一些谷歌搜索并找到了几个工具，但是[这个](https://github.com/mcanet/STL-Volume-Model-Calculator)给了我负的音量值，[这个](https://github.com/nrs/stl-volume)公开承认：

> 如果您的体积中有孔，即单独的表面，计算器可能会给出意想不到的结果。

我自己可能会写一些东西，但如果有人能指出我的方向是一个成熟的、经过良好测试的代码，或者任何可以使编码工作变得更简单的 Python 库，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:50:55.467

找到了一些看起来符合要求的东西，[https://sites.google.com/a/varlog.com/www/admesh-htm](https://sites.google.com/a/varlog.com/www/admesh-htm)，似乎工作得很好，以立方毫米为单位报告体积。

# jquery - 用新ID替换表单ID？

> ID：15774511
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:34.337
> 
> 标签：jquery

如何用新的 id 替换表单标签 id？

```
 <form method="post" action="contactus.aspx" id="ctl01"> 
```

替换`id="ctl01"`为`id="validForm"`

## 更新

看起来像`ctl01`由代码生成的 id。当我们更改 id 名称时，“crl01”还不可用。页面加载后如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:16:26.210

获取 Javascript 中的元素并更改它。

```
document.getElementById('ctl01').id = 'validForm'; 
```

您也可以使用`jQuery.attr();`.

```
$('#ctl01').attr('id','validForm'); 
```

要等待 DOM 加载，请使用以下命令：

```
$(document).ready({
  //DOM is ready
}); 
```

一个常见的语法也是这样的：

```
$(function() {
  //DOM is ready
}); 
```

还有其他方法，但这些是最常见的。

# wpf - 模拟对组合框选择/数据网格行选择的数据依赖性的行为

> ID：15774512
> 
> 赞同：0
> 
> 时间：2013-04-02T21:14:36.997
> 
> 标签：wpf, expression-blend, sketchflow

我已经有一个 Sketchflow 项目设置，它使用为组合框和数据网格生成的虚拟数据。我想做的是模拟相关行为，以便在组合框中进行选择时填充数据网格。例如，组合框有一个客户列表。选择客户端后，它们各自的文件应显示在数据网格中。

此外，在网格旁边，有一些文本块对应于所选文件的详细信息。（文件大小等）在数据网格中选择文件时（基本上是行选择），详细信息应动态填充。（例如“文件大小：500”）。

我意识到这可能是两个不同的问题，但它们似乎在两种情况下都适用相同的原则。这个想法是给定一些选定的值，虚拟数据应该填充一些其他相关的控件。我的研究使我相信这将是一种行为，但我找不到有关如何完成此操作的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T18:14:27.760

做一个主从绑定。从列表框和画布开始，尝试以下操作： 1.创建单个示例数据源 2.单击数据源上方的“列表”模式按钮（在“数据”选项卡中） 3.将字段拖到列表选择的列表视图 4.单击数据源上方的“详细信息”模式按钮（在“数据”选项卡中） 5.将其他字段拖到要显示详细信息的区域

您应该能够使用您的组合框作为主控和网格作为详细信息来制定类似的方法，然后如果您将文件信息添加到相同的原始数据集，您可以使用与 grid-textblock 相同的主详细信息方法

# vim - .vimrc 的来源不正确

> ID：15774516
> 
> 赞同：1
> 
> 时间：2013-04-02T21:14:53.517
> 
> 标签：vim, color-scheme

我的 vimrc 中有以下几行

```
colorscheme solarized 
```

这显然设置了日晒配色方案。我实际的 .vimrc 肯定比这长，我还为 solarized 指定了更多选项。但是，我面临的问题可以使用这个最小的 vimrc 文件来演示。

当我打开 vim（7.3 版）时，它以黑色背景和日晒配色方案开始。当我`:source ~/.vimrc`再次获取 vimrc 时，它会切换到浅色背景。之后，我可以多次获取 vimrc 并且背景仍然很亮。

除了这可能是 solarized 中的错误之外，我不明白同一个 vimrc 在 vi​​m 中获取时如何产生不同的行为。

我希望寻找有关如何进行调试的指示。

更新：

在@jim-stewart 发表评论后，我进行了更彻底的调试。在 my`.vimrc`和`solarized.vim`.

我发现，当我`.vimrc`运行时，`solarized.vim`来源并设置了正确的调色板（在我的情况下`elseif g:solarized_termcolors != 256 && &t_Co >= 16`）。

然后`.vimrc`到达终点（如果有，则执行其他命令），然后`solarized.vim`再次获取源，但这次调色板错误地设置为 ( `if(has("gui_running") && (g:solarized_degrade == 0))`)。我检查了此`if`语句中的变量，它们具有正确的值，不应设置此调色板。

我不知道为什么`solarized.vim`要两次采购，而第二次采购太错误了。一旦我进入 vim 并调用 `:echo g:colors_name`它，它就会产生`E121`错误并告诉我变量没有被设置。

现在，`vim`如果我从内部调用，`:colorscheme solarized`那么我会根据`background`. 此外，`:echo g:colors_name`返回`solarized`.

# vim - 自动展开小折

> ID：15774524
> 
> 赞同：2
> 
> 时间：2013-04-02T21:15:28.863
> 
> 标签：vim

使用 foldmethod=syntax 时，有没有办法自动展开小折叠（<10 行）？

我知道可以选择使用

```
set foldminlines=10 
```

但是如果我使用这个设置，即使我以后想这样做，我也无法折叠这些部分。

**编辑**

感谢**Ingo Karkat** ，我的配置现在可以满足我的要求。

```
au BufReadPre * if !exists('b:folddict') | let b:folddict = {} | endif
function! s:UnfoldSmallFolds( count )
  if empty(b:folddict)
    "fill list
    let l:_none = s:checkInnerFolds(['1',line('$')], a:count)
  else
    "folddict should be filled by now
    " check if lnum is in fold
    let l:index = s:checkFoldIndex(keys(b:folddict), getpos('.')[1])
    if l:index != 0
      "check if open -> close
      if b:folddict[l:index] == 1
        foldclose
        let b:folddict[l:index] = 0
      else
        foldopen
        let b:folddict[l:index] = 1
        let l:_none = s:checkInnerFolds(split(l:index,'-'),a:count)
      endif
    endif
  endif
endfunction

function! s:checkInnerFolds(index,count)
  let l:lnum = a:index[0]
  while l:lnum <= a:index[1]
    if foldclosed(l:lnum) == -1
      let l:lnum += 1
      continue
    endif

    let l:endLnum = foldclosedend(l:lnum)
    let l:innerIndex = l:lnum."-".l:endLnum
    if has_key(b:folddict,l:innerIndex)
      if b:folddict[l:innerIndex] == 1
        foldopen
        let l:_none = s:checkInnerFolds(l:innerIndex,a:count)
      endif
    else                        
      let b:folddict[l:innerIndex] = 0
      if l:endLnum - l:lnum < a:count
        execute printf('%d,%dfoldopen!', l:lnum, l:endLnum)
        let b:folddict[l:innerIndex] = 1
        let l:_none = s:checkInnerFolds(l:innerIndex,a:count)
      endif
    endif
    let l:lnum = l:endLnum + 1
  endwhile
endfunction

function! s:checkFoldIndex(folds, pos)
  let l:retLine = ['0','0']
  for line in a:folds
    let l:splitLine = split(line,'-')
    if a:pos >= l:splitLine[0] && a:pos <= l:splitLine[1]
      if a:pos-l:splitLine[0] < a:pos-l:retLine[0]
        let l:retLine = l:splitLine
      endif
    endif
  endfor
  return join(l:retLine,"-")
endfunction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:24:56.390

这可以通过一个自定义函数来完成，该函数检查所有关闭的折叠并打开那些只有几行的折叠，如下所示：

```
" [count]z<r        Open all small folds that contain up to 3 / [count] lines.
function! s:UnfoldSmallFolds( count )
    let l:openCnt = 0
    let l:lnum = 1
    while l:lnum <= line('$')
        if foldclosed(l:lnum) == -1
            let l:lnum += 1
            continue
        endif

        let l:endLnum = foldclosedend(l:lnum)
        if l:endLnum - l:lnum < a:count
            execute printf('%d,%dfoldopen!', l:lnum, l:endLnum)
            let l:openCnt += 1
        endif
        let l:lnum = l:endLnum + 1
    endwhile

    if l:openCnt == 0
        echo printf('No small folds over up to %d lines found', a:count)
    else
        echo printf('%d folds opened', l:openCnt)
    endif
endfunction
nnoremap <silent> z<r :<C-u>call <SID>UnfoldSmallFolds(v:count ? v:count : 3)<CR> 
```

# c# - 在方法覆盖中更改 params 修饰符

> ID：15774529
> 
> 赞同：16
> 
> 时间：2013-04-02T21:15:54.057
> 
> 标签：c#, overriding, params, virtual-functions, params-keyword

我知道`params`修饰符（将数组类型的一个参数转换为所谓的“参数数组”）特别不是方法签名的一部分。现在考虑这个例子：

```
class Giraffid
{
    public virtual void Eat(int[] leaves)
    {
        Console.WriteLine("G");
    }
}
class Okapi : Giraffid
{
    public override void Eat(params int[] leaves)
    {
        Console.WriteLine("O");
    }
} 
```

这编译没有警告。然后说：

```
var okapi = new Okapi();
okapi.Eat(2, 4, 6);  // will not compile! 
```

给出一个错误（`No overload for method 'Eat' takes 3 arguments`）。

现在，我知道编译器会将`params`修饰符转换为`System.ParamArrayAttribute`相关参数的应用程序。通常，将一个属性集合应用于虚拟方法的参数，然后在派生类的覆盖方法中用不同的属性集修饰“对应”参数是没有问题的。

然而编译器选择`params`默默地忽略我的关键字。相反，如果反过来，将其应用于`params`基类中的参数`Giraffid`，然后在覆盖中省略关键字，*则*`Okapi`编译器会选择用. 当然，我用 IL DASM 验证了这些东西。*`System.ParamArrayAttribute`*

 ***我的问题：**

*这是记录在案的行为吗？我已经彻底搜索了 C# 语言规范，但没有发现任何提及这一点。*

我可以说至少 Visual Studio 开发环境对此感到困惑。`2, 4, 6`在上述方法调用中键入时，**智能感知会在提示中显示`void Okapi.Eat(params int[] leaves)`我**。

* * *

`params`为了比较，我还尝试实现一个接口方法并更改接口和实现类中的存在/不存在，我尝试定义一个委托类型并`params`在委托类型定义或我分配给其方法组的方法中更改或不更改我的委托类型的变量。在这些情况下，完全有可能改变`params`-ness。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T21:38:20.727

编译器的行为是正确的，但这有点乱。我希望这至少是一个警告。

毫不奇怪，您在规范中找不到它说这是正确的地方。相关位是：

> M(A) 形式的方法调用的绑定时处理，其中 M 是方法组，A 是可选参数列表，包括以下步骤： 构造方法调用的候选方法集. 对于与方法组 M 关联的每个方法 F，如果 F 是非泛型的，则当 M 没有类型参数列表时，F 是候选方法，并且 F 适用于 A。

什么是“与方法组 M 相关的方法”？好吧，首先，什么是方法组？

> 方法组，它是由成员查找产生的一组重载方法...

好的，那么成员查找规则是什么？

> 否则，该集合由 T 中名为 N 的所有可访问成员组成，包括继承成员和对象中名为 N 的可访问成员。**包含覆盖修饰符的成员将从集合中排除。**

重点补充。

这里的实际结果是，**出于重载决议的目的，被覆盖的方法被认为是*最初声明*的方法，而不是被*覆盖*的方法。** 不幸的是，在这种情况下违反了这条规则：

```
virtual void M(int x, int y) { }
...
override void M(int y, int x) { } 
...
M(x = 1, y = 2); 
```

重载解析使用来自*更派生*版本的*名称。*这是在游戏后期添加命名参数这一事实的不幸结果。

 *简而言之：为了确定方法是否为“参数”，分析是在*原始方法*上完成的，而不是在*覆盖方法*上。

如果编译器在这里给你一个警告，那就太好了。

> 可以说至少Visual Studio开发环境对此感到困惑

正确的。IntelliSense 层始终显示重写方法的方法信息，而不是重写方法。研究表明，当方法看起来像是最初的声明方法而不是覆盖方法时，用户会感到困惑。当然，正如我之前提到的，这些是您将用于命名参数的参数名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T21:32:06.743

我认为它在 c# 规范的 1.6.6.4 段中有所描述：

> 可以在派生类中重写虚方法。当实例方法声明包含覆盖修饰符时，该方法会覆盖具有相同签名的继承虚拟方法。**虚拟方法声明引入了新方法，而覆盖方法声明通过提供该方法的新实现来专门化现有继承的虚拟方法。**

据此，`virtual`方法声明在这里非常重要。每次调用该`virtual`方法时都会使用方法声明。正确`override`的 n 个实现（如果指定）是在运行时进行的，与此`params`无关。

可以通过简单的测试来确认：

```
class Giraffid
{
    public virtual void Eat(params int[] leaves)
    {
        Console.WriteLine("G");
    }
}
class Okapi : Giraffid
{
    public override void Eat(int[] leaves)
    {
        Console.WriteLine("O");
    }
} 
```

有了那个宣言

```
var o = new Okapi();
o.Eat(1, 2, 3); 
```

100% 正常工作。**

# jquery - jquery追加项目（xml无限滚动）

> ID：15774531
> 
> 赞同：0
> 
> 时间：2013-04-02T21:15:58.677
> 
> 标签：jquery, xml, append, jquery-isotope

我尝试从 xml 数据文件中追加元素。

我成功地做到了。我在加载时附加了一定数量的元素。

我想使用此附加功能在单击时从相同的 xml 数据中添加下一个元素。

为此，我添加了条件 if 和变量。然而什么也没发生。。

我觉得我的 if 有问题。

这是我的脚本**编辑工作脚本**：

```
$(document).ready(function() {

var $container = $('#container');
var $items = $('.element');
var $filter = $('#filter a');

function initIsotope() {
    $container.isotope({
        itemSelector: $items,    
        animationOptions: {
            duration: 4000,
            easing: 'easeInOutQuad',
            queue: false
        } 
    });
        $filter.on('click', function(){
    $container.isotope({
        filter: this.getAttribute('data-option-value')
     })
    });
    $(' #container > div ').each( function() { $(this).hoverdir(); } );
}

$.get('data.xml', function (d){
        first = $(d).find("element").last().attr("id");
    last = $(d).find("element").first().attr("id");
    init();     
});

$('#next').on("click", function() {
    init(); 
        $('#container').isotope({
itemSelector: '.element',  
        });
});

function init(){

$.get('data.xml', function (d){

            var nbOfelemet = 1;
            var nbToappend = last - nbOfelemet; 
            alert(last);
            alert(nbToappend);  

$(d).find('element').each(function (){  

    if ( $(this).attr("id") <= last ) {

            var $element = $(this);
            var id = $element.attr("id");
            var size = $element.attr("size");
            var category = $element.attr("category");
            var urlpage = $element.find('urlpage').text();
            var urlimage = $element.find('urlimage').text();
            var title = $element.find('title').text();      

var $newelement = $('<div class="element '+ size +' '+category +'" id="_'+id+'"></div>').html('<a class= "link" href="' + urlpage + '"><img  src="' + urlimage + '" class="thumbnail" />' + '<div>' + '<span>' + '<i class="icon-pencil"></i>' + '&nbsp;&nbsp;' + title + '</span><span class="more">more.</span></div></a></div>');

$container.isotope( 'insert', $newelement)

var next = id;      
last = id -1 ;  
if (  first == next ) {     
$("#next-container").fadeOut(500);
}       
return ( id != nbToappend);
   }
            });
            initIsotope();      
    });
}

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:38:58.063

**jQuery同位素的解决方案：**

如果要重建同位素堆栈，请执行以下操作：

```
$(selector).isotope( 'destroy' )
  .isotope( 'insert', elem-previous, null )
  .isotope( 'insert', elem-current, null )
  .isotope( 'insert', elem-next, function(){focusIsotopToCurrentId();} );

// focusIsotopToCurrentId() is an optional function if you want to
// create a callback function to focus your click on something 
```

现在一切都已更正，将以下内容放在当前插入的位置并将变量传递给`elem-previous`,`elem-current`和`elem-next`.

# android - 包管理器死了

> ID：15774533
> 
> 赞同：13
> 
> 时间：2013-04-02T21:16:05.560
> 
> 标签：android, android-intent

我收到一个安装了很多应用程序的用户的邮件，当我的应用程序使用以下代码收集活动信息时，他遇到了问题：

```
getPackageManager().queryIntentActivities(mAinIntent, 0) 
```

整个来源：[https ://github.com/ligi/FAST](https://github.com/ligi/FAST)

这就是发生的事情

```
Caused by: java.lang.RuntimeException: Package manager has died
at android.app.ApplicationPackageManager.queryIntentActivities(ApplicationPackageManager.java:479)
at org.ligi.fast.BaseAppGatherAsyncTask.doInBackground(BaseAppGatherAsyncTask.java:34)
at org.ligi.fast.BaseAppGatherAsyncTask.doInBackground(BaseAppGatherAsyncTask.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 5 more
Caused by: android.os.TransactionTooLargeExceptionTransactionTooLargeException
at android.os.BinderProxy.transact(Native Method)
at android.content.pm.IPackageManager$Stub$Proxy.queryIntentActivities(IPackageManager.java:2230)
at android.app.ApplicationPackageManager.queryIntentActivities(ApplicationPackageManager.java:473)
... 9 more
Log:
0 D: Writing unhandled exception to: /data/data/org.ligi.fast/files/3.7-1364933885194.tracedroid 
```

似乎有一个问题，我在 1mb 边界上运行，但是如何离开那里？我还能如何获得所需的信息？有没有办法将数据分块？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-11T20:13:41.870

不久前，我在使用相同的用户输入时遇到了这个错误。虽然我抛出的事件不同。我最终捕获了异常并优雅地向用户报告安装了太多具有处理能力的应用程序。在数十万次安装中，我只在一个项目中看到这个错误不到五次，我知道这不是借口，但有些设备只是没有堆来处理索引每个已安装应用程序的意图在设备上。

# c++ - 如何从指针中获取数组的长度？

> ID：15774534
> 
> 赞同：20
> 
> 时间：2013-04-02T21:16:05.947
> 
> 标签：c++, arrays, pointers

我无法找到指针数组的长度。假设我有：

```
char array[40] = "hello"; // size 40
int length =  sizeof array / sizeof array[0]; // no problem returns 40 
```

//如何仅使用指向该数组中第一个元素的指针来获取数组的长度？

```
 char* pchar = array; 
```

//如果

```
std::strlen(pchar); // this returns the length of 5... i want length 40 
```

//如果

```
int count = 0;
while(true)
{
  if(*(pchar + count) == '\0') // returns 5...
    break;
   count++;
} 
```

如何让它仅从指向数组中第一个元素的指针返回长度 40？
我发现我可以做到这一点。

```
int count = 0;
    while(true)
    {
      if(*(pchar + count) == '\0' && *(pchar + count + 1) != '\0') 
             break;

       count++;
    } 
```

这返回 39，这很好，但我觉得在某些情况下这可能是错误的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T21:17:33.873

你不能，我害怕。您需要将数组的长度传递给需要它的任何人。或者您可以使用 a `std::array`or`std::vector`或类似的，它们自己跟踪长度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T21:33:25.483

C++ 有正确的字符串类型：

`std::string`

您可能会在这里找到帮助。即使您将它传递给接受的函数`const char*`，它也具有`.c_str()`允许您将其传递给接受指针的函数的方法。如果其他函数需要修改字符串，您可以使用`&str[0]`对许多 C++ 实现都有效且适用于 C++11 的函数。只需确保将它们 resize() 到正确的大小。

C++ 中的其他一些容器是：

`std::array`(C++11) 固定大小的数组。比普通的旧 C 数组更好，因为它有`size()`方法。 `std::vector`动态数组（Java`ArrayList`等效）

至于你的问题 - 没有办法找到一个指向数组的大小。你怎么能那样做？这只是一个愚蠢的指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T21:19:48.530

你不能。道德是，不要使用指针和数组，使用向量。你总是可以得到一个向量的大小。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-02T21:23:37.893

确实，您无法从指向数组元素的指针中获取数组大小。

如果您只有一个指针的原因是因为您正在实现一个将数组参数作为参数的函数，如下所示：

```
void foo (T *p) {
    // p is a pointer to T
} 
```

那么您可以使用模板函数来获取函数的数组大小。

```
template <unsigned N, typename T>
void foo (T (&p)[N]) {
    // p is a reference to an array[N] of T
    std::cout << "array has " << N << " elements" << std::endl;
    std::cout << "array has "
              << sizeof(p)/sizeof(p[0])
              << " elements"
              << std::endl;
}

int main ()
{
    int array[40];
    char array2[25];
    foo(array);
    foo(array2);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-20T19:47:44.257

如果您想保持简单而不使用`#include <array.h>`，您可以在数组大小所在的位置创建一个结构。有点像：

```
struct
{
    int* int_Array;
    int array_Size;
} 
```

这样，您可以随心所欲（例如删除您的实例或其他东西）

# python - 在 Blender 2.64 中打印'Bone'，self.name 错误

> ID：15774538
> 
> 赞同：0
> 
> 时间：2013-04-02T21:16:18.057
> 
> 标签：python, blender

我对搅拌机脚本一无所知，但是当我尝试导入 .Py 脚本时，它提出了这一行并说存在语法错误。

```
print 'Bone       ', self.name 
```

我过去做过一些其他的编程语言（如 VB 和 SB），但我希望你们中的一个人能启发我了解正在发生的事情。

完整的代码在[这里](http://www.sean.alyrica.net/supcom-importer.py)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:19:42.617

当前的 Blender 包括 Python 3.3。在 Python 3.3 中，`print`是一个函数，而不是一个语句。将其更改为：

```
print('Bone       ', self.name) 
```

您很可能需要对代码进行许多其他此类更改，这些代码显然是为在 Python 2.x 下运行而编写的。

# php - 所有资源的一个 MySQL 表 VS 每个资源的多个表

> ID：15774539
> 
> 赞同：1
> 
> 时间：2013-04-02T21:16:22.887
> 
> 标签：php, mysql, sql, database, database-design

我正在开发一个 Web 应用程序，用户可以在其中创建以下资源/内容：

```
Events | Music | Posts | Classifieds 
```

它们有很多共同的领域，例如：

```
created_date | title | desc | user_id 
```

现在我想知道是否应该为每个内容创建单独的表，或者将它们全部保存在一个表中，使用`type_id`指向`content_type`表的外键。当然，会有一些不同的字段，它们只会被特定的内容类型使用，对于那些不使用这些字段的人，我可以将其留空。

数据看起来更有条理，每种内容类型都有单独的表格，但在所有表格中搜索关键字正在成为一场噩梦（使用连接、联合等）。如果它只是一个表，搜索将非常容易。

我需要用户能够使用关键字搜索所有内容。他还可以搜索特定的内容，为此我将在该字段上做一个`WHERE`子句。`type_id`

我不知道每种方法的所有优点/缺点，但如果人们能给我建议，我将不胜感激，这样我就不会做出错误的决定，并且必须从头开始重做所有事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:02:15.213

也许考虑使用“有”关系。例如，一个事件“有一个”“web 项目句柄”附加到它，而“web 项目句柄”是一个带有描述、创建日期、标题、“所有者”等的事物......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:42:06.613

除非他们真的有相同的数据，否则我会使用单独的表格。拥有一张表，其中的某些字段仅由特定内容类型使用，这确实不是很好的数据库设计。

如果您真的想要一个包含基本数据的表，您可以按照您的建议创建一个包含 content_type 和公共字段的表，然后为每种类型创建 4 个单独的表以及其他不同的字段，然后在您执行内部联接时选择该类型的字段。但就我个人而言，我认为你最好只创建 4 个表。

# linux-kernel - 检查linux内核中的用户= root？

> ID：15774548
> 
> 赞同：3
> 
> 时间：2013-04-02T21:17:03.750
> 
> 标签：linux-kernel, file-permissions, user-permissions

我正在编写linux内核代码。我在 VFS 中，我想修改它。我想添加一个检查以查看用户是否是 root 并基于此做出决定。我该怎么做呢？是否有 getuid() 的内核版本？或者像“current->”这样的结构是否包含当前进程的用户信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:24:05.960

您可以使用`current_cred()`as defined in `include/linux/cred.h`，这将为您提供指向`struct cred`在同一标头中定义的自身的指针。就像是

```
 if (current_cred()->uid != 0)
     return -EPERM; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-01T02:58:16.810

如前所述`current_cred()->uid`，现在返回一个`struct kuid_t`. 要获得您需要的值`current_cred()->uid.val`和最终类型转换以消除警告。

```
if ((int)current_cred()->uid.val != 0)
     return -EPERM; 
```

# python - Python bdist_rpm -ba：未知选项错误：命令“rpm”失败，退出状态为 1

> ID：15774549
> 
> 赞同：8
> 
> 时间：2013-04-02T21:17:05.040
> 
> 标签：python, rpm

尝试为我的 Linux 发行版构建 Python RPM 包时出现以下错误。我在此过程中看到警告，但我认为这些与“-ba：未知错误”无关，有什么想法可以让它运行吗？

**错误：**

```
bdist_rpm -ba: unknown option error: command 'rpm' failed with exit status 1 
```

我正在运行以下 python setup.py 脚本：

```
setup(
    name='Tester',
    version='0.1.0',
    author='My Name',
    author_email='emailaddress@gmail.com',
    packages=['tester'],
    license='LICENSE.txt',
    description='IMAP Email Reader.',
    long_description=open('README.txt').read(),
    install_requires=[
        "Django >= 1.1.1",
        "caldav == 0.1.4",
    ],
) 
```

当我运行**python setup.py bdist_rpm**时，它会在以下位置创建一个 Tester.spec 文件`~/Tester/build/bdist.linux-x86_64/rpm/SPECS directory`：

```
%define name Tester
%define version 0.1.0
%define unmangled_version 0.1.0
%define release 1

Summary: Email Reader.
Name: %{name}
Version: %{version}
Release: %{release}
Source0: %{name}-%{unmangled_version}.tar.gz
License: LICENSE.txt
Group: Development/Libraries
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-buildroot
Prefix: %{_prefix}
BuildArch: noarch
Vendor: My Name <emailaddress@gmail.com>

%description

%prep
%setup -n %{name}-%{unmangled_version}

%build
python setup.py build

%install
python setup.py install -O1 --root=$RPM_BUILD_ROOT --record=INSTALLED_FILES

%clean
rm -rf $RPM_BUILD_ROOT

%files -f INSTALLED_FILES
%defattr(-,root,root) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-22T23:18:42.707

赶紧跑：

```
yum install rpm-build 
```

看来，如果 rpmbuild 命令不可用，setuptools 会回退到使用“rpm”命令，（据我了解）该命令（据我所知）很久以前就内置了 rpmbuild 功能，但此后已分离。因此，安装 rpm-build 包使 rpmbuild 命令可用，并且 setuptools 在构建包时使用它。

# android-maps-v2 - 无法在 Android 应用中显示地图

> ID：15774552
> 
> 赞同：0
> 
> 时间：2013-04-02T21:17:11.930
> 
> 标签：android-maps-v2

背景：

应用程序概述：我正在开发一个 Android 应用程序，它将在列表视图中显示地点列表，然后最终允许用户在用户单击按钮时在 Google 地图上显示这些地点（使用 Google Map v2 API）列表视图屏幕。在这个时间点，我只是想在列表视图中显示地点列表，并简单地显示我当前位置的地图，并带有显示我位置的标记。

当前状态：到目前为止，该应用程序正确显示了带有地点的列表视图，但是当单击按钮以显示地图时，我得到一个显示缩放控件的空白屏幕。您将在下面找到 LogCat。我相信关键错误信息如下：

> 04-03 09:52:24.295: E/Google Maps Android API(1896): 加载地图失败。无法联系 Google 服务器。

平台：我正在开发应用程序以在 Froyo 和更高版本上运行..但现在我只是想让它在 Froyo 上运行。

密钥：我创建了一个启用了以下服务的密钥：“Google Maps Android API v2”和“Places API”已打开。

这是完整的 LogCat。注意：LogCat 以无穷无尽的“无法联系 Google 服务器”结尾，所以我用这些消息中的最后 3 条将其切断。

```
04-03 09:42:17.447: D/Your Location(1896): latitude:32.91296010000001, longitude: -117.17031355

04-03 09:42:36.577: D/dalvikvm(1896): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
04-03 09:42:36.577: D/dalvikvm(1896): GC_FOR_MALLOC freed 6014 objects / 359192 bytes in 82ms
04-03 09:42:39.467: D/Places Status(1896): OK
04-03 09:43:53.437: D/dalvikvm(1896): GC_FOR_MALLOC freed 7413 objects / 369560 bytes in 226ms
04-03 09:43:54.537: D/dalvikvm(1896): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
04-03 09:43:54.537: W/dalvikvm(1896): VFY: unable to resolve instance field 23
04-03 09:43:54.537: D/dalvikvm(1896): VFY: replacing opcode 0x52 at 0x0012
04-03 09:43:54.537: D/dalvikvm(1896): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
04-03 09:43:56.117: D/dalvikvm(1896): GC_FOR_MALLOC freed 3000 objects / 314664 bytes in 84ms
04-03 09:43:56.307: W/dalvikvm(1896): Unable to resolve superclass of Lmaps/p/s; (425)
04-03 09:43:56.307: W/dalvikvm(1896): Link of class 'Lmaps/p/s;' failed
04-03 09:43:56.307: W/dalvikvm(1896): Unable to resolve superclass of Lmaps/y/bo; (3818)
04-03 09:43:56.307: W/dalvikvm(1896): Link of class 'Lmaps/y/bo;' failed
04-03 09:43:56.307: W/dalvikvm(1896): Unable to resolve superclass of Lmaps/i/k; (4206)
04-03 09:43:56.307: W/dalvikvm(1896): Link of class 'Lmaps/i/k;' failed
04-03 09:43:56.317: E/dalvikvm(1896): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
04-03 09:43:56.317: W/dalvikvm(1896): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
04-03 09:43:56.317: D/dalvikvm(1896): VFY: replacing opcode 0x22 at 0x006d
04-03 09:43:56.397: D/dalvikvm(1896): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
04-03 09:43:57.727: D/dalvikvm(1896): GC_FOR_MALLOC freed 4941 objects / 398416 bytes in 102ms
04-03 09:43:58.367: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers.
04-03 09:51:41.015: D/dalvikvm(1896): GC_FOR_MALLOC freed 5101 objects / 340064 bytes in 97ms
04-03 09:52:24.295: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers.
04-03 09:53:33.888: D/dalvikvm(1896): GC_EXTERNAL_ALLOC freed 1948 objects / 134008 bytes in 260ms
04-03 09:57:34.449: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers.
04-03 09:57:34.649: D/libEGL(1896): loaded /system/lib/egl/libGLES_android.so
04-03 09:57:34.679: D/libEGL(1896): loaded /system/lib/egl/libEGL_adreno200.so
04-03 09:57:34.869: D/libEGL(1896): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
04-03 09:57:34.879: D/libEGL(1896): loaded /system/lib/egl/libGLESv2_adreno200.so
04-03 09:57:35.009: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers.
04-03 09:57:35.109: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers.
04-03 09:57:35.199: E/Google Maps Android API(1896): Failed to load map.  Could not contact Google servers. 
```

负责显示地图的代码如下：

```
public class PlacesMapActivity extends FragmentActivity { 
 // Nearest places
PlacesList nearPlaces;  

private SupportMapFragment mMapFragment;

LatLng latLng;

double latitude;
double longitude;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_places);

    // Getting intent data
    Intent i = getIntent();

    // Users current geo location
    String user_latitude = i.getStringExtra("user_latitude");
    String user_longitude = i.getStringExtra("user_longitude");
    latLng = new LatLng(Double.parseDouble(user_latitude), Double.parseDouble(user_longitude));

    // Nearplaces list
    nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

    final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

    // Try to obtain the map from the SupportMapFragment.
    mMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

       // Not found so make a new instance and add it to the transaction for swapping
    if (mMapFragment == null) {
        mMapFragment = SupportMapFragment.newInstance();
        ft.add(R.id.map, mMapFragment);
    }

    ft.commit();
    }
        @Override
    public void onAttachedToWindow() {
    // Load the map here such that the fragment has a chance to completely load or else the GoogleMap value may be null
    GoogleMap googleMap;
    googleMap = (mMapFragment).getMap();    
    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    googleMap.addMarker(new MarkerOptions()
            .position(latLng)
            .title("My Spot")
            .snippet("This is my spot!")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
    googleMap.getUiSettings().setCompassEnabled(true);
    googleMap.getUiSettings().setZoomControlsEnabled(true);
    googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 10));
    super.onAttachedToWindow();
    }
        @Override
    public void onAttachFragment(Fragment fragment) {
        // TODO Auto-generated method stub
        super.onAttachFragment(fragment);
    } 
```

根据调试器结果，通过意图传入的额外值似乎都存在且正确。

这是地图布局的 XML：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment 
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"        
        class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

不知道为什么地图没有显示。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:44:12.540

缺少以下权限：

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

一旦我添加了权限，我就可以看到地图。

# java - 为大数据实现 java.util.Map

> ID：15774553
> 
> 赞同：2
> 
> 时间：2013-04-02T21:17:12.423
> 
> 标签：java, map, implementation

我正在尝试实现一个数据库支持`java.util.Map`，像 put 和 get 之类的大部分接口都很容易实现，但是我在找出实现的最佳方法时遇到了麻烦：

```
 @Override
    public Set<K> keySet() {
          // TODO Auto-generated method stub
           return null;
    }

    @Override
    public Collection<V> values() {
         // TODO Auto-generated method stub
         return null;
    }

    @Override
         public Set<Map.Entry<K, V>> entrySet() {
        // TODO Auto-generated method stub
        return null;
    } 
```

我担心的是键和值可能数以百万计的记录。因此，当访问这些方法时，我认为它的内存和 cpu 无法有效地获取和存储所有“键”或“值”。

有哪些选项可以实现内存有效的方式来实现这些？

为 entrySet 实现迭代器的策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:13:27.767

我推荐使用 Oracle 的 BerkeleyDB Java 版。com.sleepycat.collections.StoredContainer.StoredMap 类实现了 java.util.Map 接口，还将数据备份到磁盘。我用它来处理大约 8GB 数据的地图。

[存储地图： http](http://docs.oracle.com/cd/E17277_02/html/java/com/sleepycat/collections/StoredMap.html) ://docs.oracle.com/cd/E17277_02/html/java/com/sleepycat/collections/StoredMap.html

BerkeleyDB Java 版：[http ://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html](http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:43:37.223

老实说，看起来尽可能以最好的方式做到这一点，您还必须以这样一种方式实现 Set 和 Collection ，即它使用一种有效的方法来检索这些值，并且不会尝试将整个数据库拉入内存，并返回一个实现的 Set 或 Collection 接口的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T22:31:44.250

如果总数据量很大（千兆字节），则可能值得将数据移出堆，以避免长时间的 GC 暂停。作为一个真实的例子，请参阅这篇文章：[Going off-heap to increase latency and reduce AWS bill](https://plumbr.eu/blog/java/going-off-heap-to-improve-latency-and-reduce-aws-bill)。

# c++ - 词法转换 C++

> ID：15774554
> 
> 赞同：1
> 
> 时间：2013-04-02T21:17:15.220
> 
> 标签：c++, wrapper, lexical-cast

我们如何编写一个包装词法转换函数来实现如下行：

```
int value = lexical_cast<int> (string) 
```

我对编程很陌生，想知道我们如何编写函数。我不知道如何找出模板。我们也可以为 double 编写一个包装函数吗？像

```
double value = lexical_cast2<double> (string) 
```

??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:29:07.870

如您在示例中所述，拥有它：

```
#include <sstream>

template <class Dest>
class lexical_cast
{
    Dest value;
public:
    template <class Src>
    lexical_cast(const Src &src) {
        std::stringstream s;
        s << src;
        s >> value;
    }

    operator const Dest &() const {
        return value;
    }

    operator Dest &() {
        return value;
    }
}; 
```

包括错误检查：

```
 template <class Src>
    lexical_cast(const Src &src) throw (const char*) {
        std::stringstream s;
        if (!(s << src) || !(s >> value) || s.rdbuf()->in_avail()) {
            throw "value error";
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:24:08.597

你可以尝试这样的事情：

```
#include <sstream>
#include <iostream>

template <class T>
void FromString ( T & t, const std::string &s )
{
    std::stringstream str;
    str << s;
    str >> t;
}

int main()
{
   std::string myString("42.0");

   double value = 0.0;

   FromString(value,myString);

   std::cout << "The answer to all questions: " << value;

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:33:58.847

如果这不是练习，并且您的目标只是将字符串转换为其他类型：

如果您使用的是 C++11，则有新的转换函数。

所以你可以做类似的事情

```
std::stoi -> int
std::stol -> long int
std::stoul -> unsigned int
std::stoll -> long long
std::stoull -> unsigned long long
std::stof -> float
std::stod -> double
std::stold -> long double 
```

[http://www.cplusplus.com/reference/string/](http://www.cplusplus.com/reference/string/)

如果不是 C++11，你可以使用

```
int i = atoi( my_string.c_str() )
double l = atof( my_string.c_str() ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T09:43:37.427

您可以简单地使用[此](https://github.com/burner/sweet.hpp/blob/master/conv.hpp)标头。`to<std::string>(someInt)`并写出or之类的东西`to<unsigned byte>(1024)`。第二部分会抛出并告诉你你在做坏事。

# javascript - 加拿大邮政编码功能的高效正则表达式

> ID：15774555
> 
> 赞同：54
> 
> 时间：2013-04-02T21:17:16.127
> 
> 标签：javascript, regex

```
var regex = /[A-Za-z]\d[A-Za-z] ?\d[A-Za-z]\d/;
var match = regex.exec(value);
if (match){
    if ( (value.indexOf("-") !== -1 || value.indexOf(" ") !== -1 ) && value.length() == 7 ) {
        return true;
    } else if ( (value.indexOf("-") == -1 || value.indexOf(" ") == -1 ) && value.length() == 6 ) {
        return true;
    }
} else {
        return false;
} 
```

正则表达式查找模式 A0A 1B1。真实测试：

A0A 1B1

A0A-1B1

A0A1B1

A0A1B1C << 问题孩子

所以我添加了一个检查“-”或“”，然后检查长度。

是否有正则表达式或更有效的方法？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2017-10-15T23:26:20.437

用户种类，邮政编码严格，最有效的格式：

```
/^[ABCEGHJ-NPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][ -]?\d[ABCEGHJ-NPRSTV-Z]\d$/i 
```

允许：

*   h2t-1b8
*   h2z 1b8
*   H2Z1B8

不允许：

*   Z2T 1B8（前导Z）
*   H2T 1O3（含 O）

前导 Z、W 或包含 D、F、I、O、Q 或 U

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-04-02T21:20:47.090

将锚点添加到您的模式中：

```
var regex = /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/; 
```

`^`意思是“字符串的开头”，`$`意思是“字符串的结尾”。添加这些锚将防止`C`滑入匹配，因为您的模式现在期望整个字符串由 6 个（有时是 7 个 - 作为空格）字符组成。现在，这个额外的好处应该可以减轻您随后检查字符串长度的麻烦。

此外，由于您似乎希望允许使用连字符，因此您可以将其滑入一个可选的字符类中，其中包括您最初使用的空间。确保将连字符保留为第一个或最后一个字符；否则，您将需要转义它（使用前导反斜杠）以防止正则表达式引擎将其解释为字符范围的一部分（例如`A-Z`）。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-11-06T20:28:41.300

这个处理我们和 ca 代码。

```
function postalFilter (postalCode) {

    if (! postalCode) {
        return null;
    }

    postalCode = postalCode.toString().trim();

    var us = new RegExp("^\\d{5}(-{0,1}\\d{4})?$");
    var ca = new RegExp(/([ABCEGHJKLMNPRSTVXY]\d)([ABCEGHJKLMNPRSTVWXYZ]\d){2}/i);

    if (us.test(postalCode.toString())) {
        return postalCode;
    }

    if (ca.test(postalCode.toString().replace(/\W+/g, ''))) {
        return postalCode;
    }
    return null;
}

// these 5 return null
console.log(postalFilter('1a1 a1a'));
console.log(postalFilter('F1A AiA'));
console.log(postalFilter('A12345-6789'));
console.log(postalFilter('W1a1a1')); // no "w"
console.log(postalFilter('Z1a1a1')); // ... or "z" allowed in first position!

// these return canada postal less space
console.log(postalFilter('a1a 1a1'));
console.log(postalFilter('H0H 0H0'));

// these return unaltered
console.log(postalFilter('H0H0H0'));
console.log(postalFilter('a1a1a1'));
console.log(postalFilter('12345'));
console.log(postalFilter('12345-6789'));
console.log(postalFilter('123456789'));

// strip spaces
console.log(postalFilter(' 12345 ')); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-05-10T22:24:25.517

您对正则表达式有疑问 StatsCan 发布了关于什么是有效的加拿大邮政编码的规则：

> 邮政编码是由加拿大邮政公司 (CPC) 定义和维护的六字符代码，用于分拣和投递邮件。字符以“ANA NAN”的形式排列，其中“A”代表字母字符，“N”代表数字字符（例如，K1A 0T6）。邮政编码使用 18 个字母字符和 10 个数字字符。邮政编码不包括字母 D、F、I、O、Q 或 U，并且第一个位置也不使用字母 W 或 Z。

如果你想要它严格的话，正则表达式应该是。

```
/^[ABCEGHJ-NPRSTVXY][0-9][ABCEGHJ-NPRSTV-Z] [0-9][ABCEGHJ-NPRSTV-Z][0-9]$/ 
```

另外 \d 表示数字不一定`0-9`有一个错误的浏览器将其视为 unicode 空间中的任何数字，这可能会给您下游带来问题。

来自：[https ://trajano.net/2017/05/canadian-postal-code-validation/](https://trajano.net/2017/05/canadian-postal-code-validation/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-25T15:12:04.037

这是一项可以一次性为您完成所有工作的功能。接受带或不带空格的 AAA BBB 和 AAABBB。

```
function go_postal(){
        let postal = $("#postal").val();
        var regex = /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/;
        var pr = regex .test(postal);
        if(pr === true){
            //all good          
        } else {
            // not so much
        }
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-24T13:47:49.157

```
function postalFilter (postalCode, type) {

    if (!postalCode) {
        return null;
    }

    postalCode = postalCode.toString().trim();

    var us = new RegExp("^\\d{5}(-{0,1}\\d{4})?$");
   // var ca  = new RegExp(/^((?!.*[DFIOQU])[A-VXY][0-9][A-Z])|(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\ ?[0-9][A-Z][0-9]$/i);
    var ca = new RegExp(/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i);

    if(type == "us"){
        if (us.test(postalCode.toString())) {
            console.log(postalCode);
            return postalCode;
        }
    }

    if(type == "ca")
    {
        if (ca.test(postalCode.toString())) {
            console.log(postalCode);
            return postalCode;
        }
    }

    return null;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-29T17:12:29.997

```
regex = new RegExp(/^[ABCEGHJ-NPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i);
if(regex.test(value))
    return true;
else
    return false; 
```

这是原始问题的较短版本，其中**value**是任何文本值。此外，无需测试值长度。

# javascript - 即使页面刷新，如何保持上次登录时间固定

> ID：15774556
> 
> 赞同：0
> 
> 时间：2013-04-02T21:17:18.183
> 
> 标签：javascript, login, time

我正在尝试在我的页面上显示上次登录日期和时间。我能够做到，但问题是每次刷新或重新加载页面时，这次都会更改为刷新/重新加载的时间。我想在第一次登录时保持相同的登录时间而不改变页面刷新或类似的东西这是我的代码

```
var days = 730;
  var lastvisit=new Object();
  var firstvisitmsg=" Welcome!";
  lastvisit.subsequentvisitmsg="Last Login: <b>[displaydate]</b>";

  lastvisit.getCookie=function(Name){
  var re=new RegExp(Name+"=[^;]+", "i");
  if (document.cookie.match(re))
  return document.cookie.match(re)[0].split("=")[1];
  return'';
  }

  lastvisit.setCookie=function(name, value, days){
  var expireDate = new Date();

  var expstring=expireDate.setDate(expireDate.getDate()+parseInt(days));
  document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/";
  }

  lastvisit.showmessage = function() {
  var wh = new Date();
  if (lastvisit.getCookie("visitc") == "") {
  lastvisit.setCookie("visitc", wh, days);
  document.write(firstvisitmsg);
  }

  else {
  var lv = lastvisit.getCookie("visitc");
  var lvp = Date.parse(lv);
  var now = new Date();
  now.setTime(lvp);
  var day = new Array("Sun", "Mon", "Tues", "Wed", "Thur", "Fri", "Sat");
  var month = new Array ("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");
  var dd = now.getDate();
  var dy = now.getDay();
  dy = day[dy];
  var mn = now.getMonth();
  mn = month[mn];
  yy = now.getFullYear();
  var hh = now.getHours();
  var ampm = "AM";
  if (hh >= 12) {ampm = "PM"}
  if (hh >12){hh = hh - 12};
  if (hh == 0) {hh = 12}
  if (hh < 10) {hh = "0" + hh};
  var mins = now.getMinutes();
  if (mins < 10) {mins = "0"+ mins}
  var secs = now.getSeconds();
  if (secs < 10) {secs = "0" + secs}
  var dispDate = dy + ", " + mn + " " + dd + ", " + yy + " " + hh + ":" + mins + ":" + secs + " " + ampm
  var lastlogin = lastvisit.subsequentvisitmsg.replace("\[displaydate\]", dispDate);
  document.write(lastlogin);
  }

  lastvisit.setCookie("visitc", wh, days);

  }

<div id="lastcontent" style="margin-top:-30px;margin-left:30px;font-size:72%"><script>lastvisit.showmessage();</script></div> 
```

# xaml - WP8 XAML Binding List<> 与另一个 List<> 里面

> ID：15774560
> 
> 赞同：1
> 
> 时间：2013-04-02T21:17:26.247
> 
> 标签：xaml, windows-phone-8

我正在尝试将对象列表绑定到 Windows Phone 8 应用程序的列表控件，其中还包含另一个列表。我试图找出如何设置它，以便在从父列表中选择一个项目时，将子列表加载到单独的列表控件中，但找不到任何详细信息。任何帮助将不胜感激，因为我已经走到了死胡同。

我正在尝试使用如下列表：

然后列表包含一个列表，该列表也包含一个列表。我需要设置一个初始站点列表，用户将选择一个，然后将使用平台填充另一个列表，然后选择一个平台将加载火车列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:38:39.107

您应该将最外面的列表绑定到最外面的列表框（或您正在使用的任何列表控件）。

之后，您可以将外部列表的选定项绑定到子列表视图。

这是一个例子：

```
<ListBox ItemsSource="{Binding OuterList}" x:Name="OuterList" SelectionMode="Single" />

<ListBox ItemsSource="{Binding ElementName=OuterList, Path=SelectedItem}" x:Name="Innerlist1" />

<ListBox ItemsSource="{Binding ElementName=InnerList1, Path=SelectedItem}" /> 
```

# java - 在文本视图（android）上打印数组值

> ID：15774562
> 
> 赞同：0
> 
> 时间：2013-04-02T21:17:27.810
> 
> 标签：java, android, arrays, string, textview

我正在尝试在 textView 中打印目标地址及其与原点的距离。但是，我不断收到错误或只显示最后一个值。我不想更新文本视图，我希望在新值下打印新值这是我的代码

```
public class MainActivity extends Activity {
        private static final String TAG_ROWS = "rows";
    private static final String TAG_ELEMENTS = "elements";
    private static final String TAG_DISTANCE = "distance";
    private static final String TAG_VALUE = "value";
    private static final String TAG_ADDRESS = "destination_addresses";
    String Addresses[]= {"2906+west+Broadway+Vancouver+BC","4750+Kingsway+Burnaby+BC","2633+Sweden+Way+110+Richmond","943+Marine+Dr+North+Vancouver","4567+Lougheed+Hwy+Burnaby"};

    String data;
    HttpClient client;
    double minDistance=0;
    static JSONObject jObj = null;
    String destination_addresses;
    JSONArray rows;
    String destination;
    String distanceStr;
    String[] value_destination;
    String value;
    final static String URL= "http://maps.googleapis.com/maps/api/distancematrix/json?";
    TextView result;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
                result = (TextView) findViewById(R.id.text1);
                result.setText("Distace from the location" + destination + " is :" + distanceStr );

          new TestGoogleMaps().execute("");

        }
        public class TestGoogleMaps extends AsyncTask<String, Void, String>{
                @Override
                protected String doInBackground(String... params) {
                        // TODO Auto-generated method stub
                        try {
                    try {
                        ClosestObject();
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                finally {

                }
                        return null;
                }
                @Override
                protected void onPostExecute(String resuls) {
                        // TODO Auto-generated method stub
                        super.onPostExecute(resuls);
                 }
        }
        public void ClosestObject() throws JSONException, ClientProtocolException, IOException {

        // Creating JSON Parser instance
    StringBuilder url = new StringBuilder(URL);
    client=new DefaultHttpClient();
    for (int index=0; index<Addresses.length; index++){
    String str_parameters = "origins="+ URLEncoder.encode("1359+Richards+Street+Vancouver+BC","UTF-8")+"&destinations="+ URLEncoder.encode(Addresses[index],"UTF-8")+"&mode=driving&language="+ URLEncoder.encode("en-FR","UTF-8")+"&sensor=false";
    System.out.println("URL URl :: "+url+str_parameters);
   HttpGet get = new HttpGet(url+str_parameters);
   get.setHeader("Accept", "application/json");
   get.setHeader("Content-type", "application/json");
    HttpResponse r = client.execute(get);
    HttpEntity en = r.getEntity();
    data = EntityUtils.toString(en);
   System.out.println("ClosestObject Response :: "+data);

    try {
           jObj = new JSONObject(data);

            destination = jObj.getString("destination_addresses");
            // printing the destination and checking wheather parsed correctly
            Log.v("Destination", destination);

            JSONArray jarRow = jObj.getJSONArray("rows");
            for(int i=0;i<jarRow.length(); i++){
                // creating an object first
                JSONObject ElementsObj = jarRow.getJSONObject(i);
                // and getting the array out of the object
                JSONArray jarElements = ElementsObj.getJSONArray("elements");
                for(int j=0; j<jarElements.length(); j++){
                    JSONObject distanceObj = jarElements.getJSONObject(j).getJSONObject("distance");
                    distanceStr = distanceObj.getString("value");
                    Log.v("finally getting distance : ", distanceStr);

                }           }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        }     

        }
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
                // Inflate the menu; this adds items to the action bar if it is present.
                getMenuInflater().inflate(R.menu.main, menu);
                return true;
        }

} 
```

如何在我的 TextView 上打印所有成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:30:06.500

> 我希望在新值下打印新值

因此，如果您想以`TextView`最有效的方式打印所有目的地，例如使用`StringBuffer`创建最终分配给您的 TextView 的整个字符串。

我建议您将 ClosestObject 方法的返回类型更改为 StringBuffer（或 Builder），并在循环中将数据附加到它。还将 AsyncTask 的第三个参数更改为 StringBuffer。

**伪代码：**

```
@Override
protected StringBuffer doInBackround() {
    ...
    StringBuffer buff = ClosestObject();
    return buff;
} 
```

在您的 ClosestObject 方法中：

```
StringBuffer buff = new StringBuffer();
for (int i = 0; i < arr.length(); i++) {
   // getting values from JSON
   buff.append(value).append("\n"); // buff.append(value1 + "," + value2 + "\n")
}
...
return buff; 
```

最后更新您`TextView`的 onPostExecute() 方法，该方法已经在 UI 线程上运行并允许更新。

```
yourTextView.setText(result.toString()); 
```

## 笔记：

不要忘记，通过 Java 中的命名约定，方法的签名应该以小写字母开头，而不是大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:27:24.090

试试这个：

```
MainActivity.this.runOnUiThread(new Runnable() {
    public void run() {
        result.setText(result.getText().toString() + "\n" + distanceStr);
    }
}); 
```

如图所示，您必须更新`TextView`UI 线程上的 ，因为 JSON 响应是在与您的 不同的线程中接收的`AsyncTask`，否则您将收到`CalledFromTheWrongThreadException`.

# linq - 使用 EF 5 Code First 将视图映射到实体

> ID：15774566
> 
> 赞同：2
> 
> 时间：2013-04-02T21:17:40.307
> 
> 标签：linq, entity-framework

我使用 EF 5 和代码优先开发了一个非常好的网络应用程序。但是在运行基准测试时，我发现性能没有我想要的那么好......进一步看，我发现 EF 生成的所有查询都相似`Select * From`，这不是最佳实践。

在此处阅读此答案[Select Specific Columns from Database using EF Code First](https://stackoverflow.com/questions/11528988/select-specific-columns-from-database-using-ef-code-first)我明白我可以生成一个视图并将其映射到一个实体。我的问题是如何首先使用 EF 5 代码将视图映射到实体，反之亦然？

我问这个的原因是：我有一张非常宽的桌子，我在上面按名称执行“初步搜索”搜索项目，然后在一个案例中返回其余部分......在另一个案例中，我有一个大桌子和大多数时候我只使用标题和描述而不是 LOB 列......在所有情况下，我从数据库中获取一些我没有使用的东西......

因此，如果我确实可以将视图映射到实体，反之亦然，我可以在主干层和应用层之间节省大量带宽......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:10:29.607

这与您所说的不同——即不是一个确切的答案——而是通过 EF 所谓的“视图”来解决性能问题。

我建议您试用[EF Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d) - 和“生成视图”。

通过运行它 - 'views' 文件被添加到项目中 - 这是`.cs`一个 - 并且增强了核心 EF 性能（这是一个 EF 功能，不是代码优先 - 但我们现在可以使用电动工具代码优先）。

它没有添加“数据库视图”——但据我所知——它通过预先分析和代码生成 SQL 模板来工作。

> “在实体框架可以针对概念模型执行查询或保存对数据源的更改之前，它必须生成一组本地查询视图来访问数据库。这些视图是每个应用程序域缓存的元数据的一部分。如果您在同一个应用程序域中创建多个对象上下文实例，它们将重用缓存元数据中的视图，而不是重新生成它们。因为视图生成是执行单个查询的总成本的重要部分，实体框架使您能够预先生成这些视图并将它们包含在编译的项目中。有关更多信息，请参阅性能注意事项（实体框架）。
> [http://msdn.microsoft.com/en-us/library/bb896240.aspx](http://msdn.microsoft.com/en-us/library/bb896240.aspx)

我可以“感觉到”性能的提升。

注意：
**它有几个问题**- 你可能会在第一次运行它时遇到一些异常：

*   确保**你的类是文件中唯一的上下文**（它需要第一个），
*   **我不得不将项目从“解决方案目录”中移出**（这是我从 power-shell 控制台学到的技巧 - 需要相同）

此外，任何其他使用“真实”视图手动“调整”Db 的尝试 - 我认为都是徒劳的，因为它没有与 ORM 紧密集成（您需要不止一个 - 以及匹配的调用等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:29:28.653

我实现这一目标的方式不是很干净，但是：

*   我创建了一个类型
*   为该类型声明一个 dbset
*   如有必要，将表删除到数据库中
*   创建一个视图，命名为具有相同字段（类型和名称）的已删除表。

当然，所有这些都封装在种子方法中。

不干净，但正在运行。我认为如果您想“迁移”视图的结构，就会遇到一些麻烦。但这样一来，他的一切就好像你得到了一个实体一样。当然插入和更新可能很棘手，但这不是我的目的。

如果您尊重命名约定，即使加载策略也是可用的。

# image - 使用画布拖放和调整图像大小

> ID：15774568
> 
> 赞同：0
> 
> 时间：2013-04-02T21:17:58.903
> 
> 标签：image, canvas, drag-and-drop, transform, kineticjs

这是一个非常好的 canvas 和 kineticjs 演示。无论如何，如果将图像绘制到零像素大小，画布上的所有图像都会消失。我正在寻找纯 JS 中 kineticjs 的替代品，还是 kineticjs 是这项工作的最佳解决方案？

[链接] [http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:34:09.657

你可以用直接的 JS 很容易地做到这一点。在这里查看 Simon Sarrisss 的[教程](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)。

# jquery - JQuery Variable.parent().addclass 尝试不起作用

> ID：15774571
> 
> 赞同：1
> 
> 时间：2013-04-02T21:18:10.833
> 
> 标签：jquery

```
if (lastclicked == 'undefined'){
    $('#Info-Side-Tabs a:#Main').parent().addClass('active');
} else {
    $('#Info-Side-Tabs a:lastclicked').parent().addClass('active');
} 
```

lastclicked 可以告诉您您在我的侧选项卡切换器上单击的最后一个链接。单击显示/隐藏时不会更改。我想做的是，当您没有单击任何选项卡并隐藏选项卡时，活动类将切换到关闭/打开选项卡，但内容不会改变。因此，如果 lastclicked 未定义，这将是因为您没有单击其他任何内容，当您重新打开时，活动选项卡将切换回默认值。如果它不是未定义的，则情况相同，但当前可能有两个选项卡供活动类返回。

我的完整 JQuery 代码：

```
$('#Info-Side-Tabs a').click(function() {
    var clicked = $(this).attr('href');
    if (clicked == "#Map-Selection-Info-Close") {
        $('#Info-Side-Tabs li').removeClass('active');
        $(this).parent().addClass('active');
        $(this).attr("href","#Map-Selection-Info-Open");
        $(this).text('Open Me');
        $('#Map-Selection-Info').animate({marginLeft: '978px'}, 1000);
        $('#ATWI80C-Map').animate({width: '900px' }, 1000);
    } else if (clicked == "#Map-Selection-Info-Open") {
        $(this).parent().removeClass('active');
        $(this).attr("href","#Map-Selection-Info-Close");
        $(this).text('Close Me');
        $('#Map-Selection-Info').animate({marginLeft: '670px'}, 1000);
        $('#ATWI80C-Map').animate({width: '600px' }, 1000);
        if (lastclicked == 'undefined'){
            $('#Info-Side-Tabs a:#Main').parent().addClass('active');
        } else {
            $('#Info-Side-Tabs a:lastclicked').parent().addClass('active');
        }
    } else {
        lastclicked = clicked;
        switchback = $('clicked');
        $('#Info-Side-Tabs li').removeClass('active');
        $(this).parent().addClass('active');
        var activeTab = $(this).attr('href');
        $('#tab-content > div:visible').hide();
        $(activeTab).show();
    }
    //alert(lastclicked);
}); 
```

我已经尝试了各种方法，这只是当前的尝试。

实时视图：[https ://tornhq.com/WorkingOn/InteractiveMap/implementing.html#Map-Selection-Info-Close](https://tornhq.com/WorkingOn/InteractiveMap/implementing.html#Map-Selection-Info-Close)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:39:06.927

尝试更改此行：

```
if (lastclicked == 'undefined'){ 
```

对此：

```
if (typeof lastclicked === "undefined"){ 
```

小提琴：http: [//jsfiddle.net/UhDKq/1/](http://jsfiddle.net/UhDKq/1/)

要在小提琴中进行测试，请更改行

```
var lastclicked; 
```

到

```
var lastclicked = "#Anything"; 
```

然后再次切换回来。

如果单击“关闭我”或“打开我”，它不会一直`lastclick`设置，直到它完全下降。`if`

```
if (clicked == "#Map-Selection-Info-Close") {  // Close Me
    //code
} else if (clicked == "#Map-Selection-Info-Open") { // Open Me
    //code
    if (typeof lastclicked === "undefined") {
            alert("undefined");
            //$('#Info-Side-Tabs a:#Main').parent().addClass('active');
            $('#Info-Side-Tabs li#Main a').addClass('active'); 
        } else {
            alert("defined");
            //$('#Info-Side-Tabs a:lastclicked').parent().addClass('active');
            $('#Info-Side-Tabs a[href="' + lastclicked + '"').parent().addClass('active');
        } 
```

# .htaccess - 通用 htaccess 重写：始终使用 https 和 www

> ID：15774574
> 
> 赞同：1
> 
> 时间：2013-04-02T21:18:20.700
> 
> 标签：.htaccess

我正在寻找一个**通用**的htaccess 重写，它强制用户使用 https**和**www。因此，以下 URL 应全部重写为[https://www.domain.tld/some/path](https://www.domain.tld/some/path)：

*   [http://domain.tld/some/path](http://domain.tld/some/path)
*   [http://www.domain.tld/some/path](http://www.domain.tld/some/path)
*   [https://domain.tld/some/path](https://domain.tld/some/path)
*   [https://www.domain.tld/some/path](https://www.domain.tld/some/path)

它应该是一个通用的解决方案，以便域名不包含在规则中。最有可能的是，该规则将包含类似`%{HTTP_HOST}%{REQUEST_URI}`or的内容`%1/$1`。请描述您为什么使用其中一种。

尽管有很多与此类似的问题，但我没有找到结合了 https 和 www 重定向的解决方案。希望你能帮忙。

**编辑1：**

我尝试了@anubhava 的解决方案，但出现“重定向过多”错误。由于该站点是 Magento 站点，因此 htaccess 稍微困难一些。以下是我尝试过的两个 mod_rewrite 部分：

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

    RewriteCond %{HTTP_HOST} !^www\. [NC]
    RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

############################################
## you can put here your magento root folder
## path relative to web root

    #RewriteBase /magento/

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule> 
```

第二个版本：

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

    RewriteCond %{HTTPS} off [OR]
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^ https://www.domain.tld%{REQUEST_URI} [R=301,L]

############################################
## you can put here your magento root folder
## path relative to web root

    #RewriteBase /magento/

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule> 
```

有任何想法吗？

**编辑2：**

正如@anubhava 所建议的那样，仅将 Magento 设置为使用 https 作为安全和不安全的基本 URL 并不能解决问题。然后 URL [http://www.domain.tld/some/path](http://www.domain.tld/some/path)被重定向到[https://www.domain.tld](https://www.domain.tld)而不是[https://www.domain.tld/some/path](https://www.domain.tld/some/path)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:39:05.160

你可以试试这个：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # non www to https://www...
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

    # non https to http
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]
</IfModule> 
```

第一个重写规则检查主机名是否以 www 开头，如果不是，则使用 https 重定向并将 www 附加到主机名。标志 R=301 指示 apache 使用 HTTP 301 永久重定向，L 导致 mod_rewrite 停止处理规则集。有关详细信息，请查看文档：[http ://httpd.apache.org/docs/current/rewrite/](http://httpd.apache.org/docs/current/rewrite/)

第二个重写规则捕获带有 www 但没有 https:// 的请求。主机名和路径保持不变。感谢 Nicolás Echániz 和 Joseph Scott 在[http://joseph.randomnetworks.com/2004/07/22/redirect-to-ssl-using-apaches-htaccess/](http://joseph.randomnetworks.com/2004/07/22/redirect-to-ssl-using-apaches-htaccess/)上的博客指出第二条规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:53:23.483

首先清除浏览器缓存并重新启动浏览器。

### Magento 设置更改

打开管理面板并访问**`System -> Configration -> Web`**面板并将`Base URL`（安全和不安全）设置为`https://www.domain.tld/`.

然后设置

`Auto-redirect to Base URL`= 没有

`Use Secure URLs in Frontend`= 是的

`Use Secure URLs in Admin`= 是的

保存您的设置，清除您的 Magento 缓存

### Magento .htaccess 更改

将此代码放在`.htaccess`RewriteBase 行下方的基本 magento 目录中：

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# php - php 只改变了列表框

> ID：15774579
> 
> 赞同：0
> 
> 时间：2013-04-02T21:18:43.477
> 
> 标签：php, listbox

我有一个包含很多列表框的表单。提交表单后，我可以毫无问题地使用 PHP 循环处理所有列表框。但我正在寻找一种方法来只抓取那些已更改的内容，因为它可以节省大量的处理时间。

假设我有一百个列表框。他们的 ID 是“lb_1”...“lb_100”。我会像这样循环遍历它们：

```
foreach($_POST as $key=>$value) {
   if (substr($key,0,3)== "lb_" ) {
      ...do something...
   }
} 
```

然而，该循环将对所有一百个列表框值做一些事情。我只想抓住那些实际发生变化的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:33:51.647

好的，感谢您的提示，我想出了这个客户端解决方案：

我在每个包含原始值的列表框之前添加了一个隐藏的表单文本字段。隐藏字段和加框列表以相同的唯一后缀命名，因此我知道哪个属于哪个。

当表单被传递时，PHP 循环如下所示：

```
foreach($_POST as $key=>$value) {
   if (substr($key,0,3)== "lb_" ) {
      if ($_POST[hidden_name] != $value) {
         setNewValue($value);
      }
   }
} 
```

这比每次比较访问数据库要快得多，因为 $_POST 数组中的值已经可用。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:36:55.987

要扩展 @Tushar 给出的建议，您可以使用 Javascript 将任何未更改的字段的 Disabled 属性设置为 true。这样他们就不会存在于 POST 中。您知道哪些要禁用的唯一方法是存储初始值（在 JS 中可能是为了便于比较）。然后在表单提交时，遍历字段并禁用所有未更改的字段。

```
document.getElementById('lb_1').disabled = true;  // example of how to disable field 
```

如果您愿意，我可以提供更多示例代码。

# sql - 给定一组未排序的值，如何在相同类型的列中进行搜索？

> ID：15774580
> 
> 赞同：0
> 
> 时间：2013-04-02T21:18:47.817
> 
> 标签：sql, database, ms-access

我有一个系统，可以将用户收到的产品积压在一个盒子里。整个系统基于我们创建的这些套件，其中包含产品。

所以我得到了一个`Customers`，`Products`其中列出了我拥有的所有东西。我有一个`Boxes`表格，其中包含`ProductID1, ProductID2, ProductID3 and ProductID4`字段和`CustomerID`字段来指出哪个客户收到了哪个盒子。

我想做的就是，给定一组**不同顺序**的产品（例如：）`ID4, ID2, ID3, ID1`，我需要知道所有没有收到该组产品的客户。

我的数据库设计不好？执行此操作或如何进行`SELECT`查询的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:21:43.953

你可以做你想做的事：

```
where id4 not in (productid1, productid2, productid3, productid4) or
      id2 not in (productid1, productid2, productid3, productid4) or
      id3 not in (productid1, productid2, productid3, productid4) or
      id1 not in (productid1, productid2, productid3, productid4) 
```

您应该有一个名为类似的表`BoxesrProducts`，其中包含 a`BoxesId`和 a `ProductId`。这样，如果需要，盒子可以有不同的尺寸——甚至超过 4 个产品。

# assembly - 将标签地址获取到 ARM 上的寄存器？

> ID：15774581
> 
> 赞同：6
> 
> 时间：2013-04-02T21:18:53.843
> 
> 标签：assembly, arm

如何编写将标签引用的地址放入寄存器的指令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T22:03:42.760

有四种方法，[Sourceware 的 Gnu Assembler 手册](http://sourceware.org/binutils/docs/as/ARM-Opcodes.html)中记录了三种方法。我猜标签是这样的，

```
 target:
     .long 0xfeadbeef 
```

1.  `adr r0,target`
2.  `adrl r0,target`
3.  `ldr r0,=target`
4.  `sub r0,pc,#(.+8-target)`

前两个非常相似，并且生成`sub r0,pc,#offset`. 第三个将^(long)放入*文字池中*并通过加载它，`ldr r0,[pc,#offset2]`或者`mov`如果汇编器发现它可以使用它（通常是对齐的标签，如*0x8000*），它可能会使用它。最后一个版本是手动计算的。

`adr`和之间的区别`adrl`来自直接操作数。它们是由 2 的*倍数*旋转的 8 位。因此，如果地址很远，您可能需要执行两条指令，这通常比通过*数据缓存*或*内存*获得完整 32 位的第 3 变体^(更快) 。`ldr`

 **另请参阅：[汇编程序中的重定位](https://stackoverflow.com/questions/15671717/relocation-in-assembly%29)

* * *

Thumb2 添加组合`movw`和`movt`。例如，

```
label:
 ; data
...
movw    r0, :lower16:label - .
movt    r0, :upper16:label - . 
```

这会将偏移量放入`r0`. 它对 PC 相对没有用，但对绝对或直接加载常量很有用。

请参阅：[关于常量的 ARM 博客](https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/how-to-load-constants-in-assembly-for-arm-architecture)**

# java - 泽西岛：PerRequestTypeInjectableProvider 未拾取

> ID：15774583
> 
> 赞同：1
> 
> 时间：2013-04-02T21:19:06.713
> 
> 标签：java, google-app-engine, annotations, jersey

使用 Jersey 1.17.1，我实现了一个基本的 RESTful API，并将其作为一个 servlet 部署在 Google App Engine 1.7.5 中。我正在使用在 HTTP 请求标头参数中传输的令牌对用户进行身份验证。我成功`@HeaderParam`地提取了令牌并使用令牌对用户进行了身份验证，但我想创建一个自定义注释来为我处理身份验证。但是，泽西岛似乎没有选择提供者。

我定义了一个注释：

```
package com.kwogger.api.web.rs.ext;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ ElementType.PARAMETER, ElementType.METHOD, ElementType.FIELD })
@Retention(RetentionPolicy.RUNTIME)
public @interface AuthUser {
  boolean required() default true;
} 
```

和提供者：

```
package com.kwogger.api.web.rs.ext;

import com.googlecode.objectify.Key;
import com.sun.jersey.api.core.HttpContext;
import com.sun.jersey.core.spi.component.ComponentContext;
import com.sun.jersey.server.impl.inject.AbstractHttpContextInjectable;
import com.sun.jersey.spi.inject.Injectable;
import com.sun.jersey.spi.inject.PerRequestTypeInjectableProvider;
import com.kwogger.om.User;

@Provider
public class AuthUserProvider extends PerRequestTypeInjectableProvider<AuthUser, Key<User>> {
  public AuthUserProvider() {
    super(Key.class);
  }

  @Override
  public Injectable<Key<User>> getInjectable(ComponentContext ic, final AuthUser a) {
    return new AbstractHttpContextInjectable<Key<User>>() {
      @Override
      public Key<User> getValue(HttpContext ctxt) {
        // ... authenticate user here ...
      }
    };
  }
} 
```

在我的资源中，我修改了端点：

```
 @GET
  public JsonNode getVault() {
    Key<User> user = authUser();
  }

  private String userToken;

  @HeaderParam(Constants.HEADER_USER_TOKEN)
  public void setUserToken(String token) {
    if (token != null) {
      userToken = token;
    }
  }

  @CookieParam(Constants.COOKIE_USER_TOKEN)
  public void setUserTokenCookie(String cookie) {
    if (cookie != null) {
      userToken = cookie;
    }
  }

  private Key<User> authUser() {
    // ... authenticate user here ...
  } 
```

对此：

```
 @GET
  public JsonNode getItem(@AuthUser Key<User> user) {
    // do stuff...
  } 
```

* * *

但是，当我尝试访问端点时，我在日志中收到带有以下错误消息的 HTTP 415：

```
com.sun.jersey.spi.container.ContainerRequest getEntity: A message body reader for Java class com.googlecode.objectify.Key, and Java type com.googlecode.objectify.Key<com.kwogger.om.User>, and MIME media type application/octet-stream was not found.
The registered message body readers compatible with the MIME media type are:
application/octet-stream ->
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.RenderedImageProvider
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
  com.sun.jersey.core.impl.provider.entity.EntityHolderReader 
```

同一资源文件中的每个其他端点都可以正常工作。我已经`com.sun.jersey.config.property.packages`在 servlet 定义的 init-param 中指定了包，并且`ExceptionMapper`位于与自定义提供程序工作相同的包中。我*没有*使用 Spring 或 Guice。

我错过了什么？似乎泽西岛正在尝试`Key<User> user`从身体中读取，这让我认为提供者根本没有被捡起，但我似乎无法弄清楚如何让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:57:39.647

您的`Key<User>`类没有被拦截，因为在 Jersey 运行时注册的提供者需要一个原始类型 ( `Key`)，正如您的提供者构造函数中指定的那样：

```
public AuthUserProvider() {
    super(Key.class);
} 
```

但是您正在尝试注入参数化类型，因此您需要适当地调用超类构造函数。获得所需实际类型的最简单（可能也是唯一）方法是通过超类型标记。下面是一个使用 Jackson[`TypeReference`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/type/TypeReference.html)类作为助手的示例：

```
public AuthUserProvider() {
    super(new TypeReference<Key<User>>() {
    }.getType());
} 
```

这一行：

```
new TypeReference<Key<User>>() {}.getType() 
```

基本上允许您创建一个保留其通用信息的类型（在这种情况下，它表示一个`Key<User>`.

除了 Jackson TypeReference 类，您可以使用 Jersey Client [GenericType](http://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/client/GenericType.html)或 Gson [TypeToken](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/reflect/TypeToken.html)来完成同样的事情。

# python - 如何将列表元素作为参考传递？

> ID：15774584
> 
> 赞同：10
> 
> 时间：2013-04-02T21:19:08.617
> 
> 标签：python, python-2.7

我将列表的单个元素传递给函数。我想修改那个元素，因此也想修改列表本身。

```
def ModList(element):
    element = 'TWO'

l = list();
l.append('one')
l.append('two')
l.append('three')
print l
ModList(l[1])
print l 
```

但是这种方法不会修改列表。这就像元素是按值传递的。输出是：

```
['one','two','three']
['one','two','three'] 
```

我希望函数调用后列表的第二个元素为“TWO”：

```
['one','TWO','three'] 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-08T18:26:46.227

已经在这里的解释是正确的。但是，由于我想以类似的方式滥用 python，我将提交此方法作为解决方法。

从列表中调用特定元素直接返回列表中该元素的值的副本。即使复制列表的子列表也会返回对包含值副本的数组的新引用。考虑这个例子：

```
>>> a = [1, 2, 3, 4]
>>> b = a[2]
>>> b
3
>>> c = a[2:3]
>>> c
[3]
>>> b=5
>>> c[0]=6
>>> a
[1, 2, 3, 4] 
```

`b`仅值副本和`c`从 复制的子列表都`a`不能更改 中的值`a`。尽管它们有共同的起源，但没有联系。

但是，numpy 数组使用“原始”内存分配并允许返回数据视图。视图允许以不同的方式表示数据，同时保持与原始数据的关联。因此，一个工作示例是

```
>>> import numpy as np
>>> a = np.array([1, 2, 3, 4])
>>> a
array([1, 2, 3, 4])
>>> b = a[2]
>>> b
3
>>> b=5
>>> a
array([1, 2, 3, 4])
>>> c = a[2:3]
>>> c
array([3])
>>> c[0]=6
>>> a
array([1, 2, 6, 4])
>>> 
```

虽然提取单个元素仍然仅按值复制，但维护 element 的数组视图`2`会引用 的原始元素`2`（`a`尽管它现在是 的元素`0`）`c`，并且对`c`' 的值所做的更改也会更改`a`。

Numpy`ndarray`有许多不同的类型，包括通用对象类型。这意味着您可以为几乎任何类型的数据维护这种“按引用”行为，而不仅仅是数值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T21:21:26.437

Python 是一种按值传递的语言，因此您不能通过函数中的赋值来更改值`ModList`。您可以做的是将列表和索引传递到`ModList`然后以这种方式修改元素

```
def ModList(theList, theIndex) :
  theList[theIndex] = 'TWO'

ModList(l, 1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T21:20:56.323

Python[不会通过引用传递](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)。只需明确地这样做：

```
l[1] = ModList(l[1]) 
```

此外，由于这只更改了一个元素，我建议这`ModList`是一个令人困惑的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T14:03:17.087

在许多情况下，您还可以考虑让函数既修改又返回修改后的列表。这使得调用者代码更具可读性：

```
def ModList(theList, theIndex) :
          theList[theIndex] = 'TWO'
    return theList

l = ModList(l, 1) 
```

# ruby - 消息未发送到电子邮件 -ruby on rails-

> ID：15774585
> 
> 赞同：0
> 
> 时间：2013-04-02T21:19:09.667
> 
> 标签：ruby

我尝试使用 ruby​​ on rails 将消息发送到邮件，但它没有传递虽然代码中出现 0 错误

```
 mail(:to => user.email, :subject => "Welcome to My site") 
```

骗局

```
ActionMailer::Base.smtp_settings = {
 :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "gmail.com",
  :user_name            => "username",
  :password             => "password",
  :authentication       => "plain",
  :enable_starttls_auto => true
  }
     RegistedMailer.sendingmail(@profolio).deliver 
```

注意本地主机上的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:54:59.993

在开发模式下，Rails 不会发送电子邮件。确保[根据 Rails Guides Action Mailer Configuration for GMail](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration-for-gmail)页面进行设置：

```
config.action_mailer.delivery_method = :smtp 
```

如果已经设置好了，您可以发布您的日志吗？

您可能还想研究[MailCatcher](http://mailcatcher.me)之类的东西，它可以更轻松地在开发模式下测试电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:45:27.603

交货方式的设置是什么？它应该是：

```
config.action_mailer.delivery_method = :smtp 
```

# jsf - 当我将我的 jsf 页面上传到服务器主机时，我得到一个空白页面

> ID：15774586
> 
> 赞同：0
> 
> 时间：2013-04-02T21:19:15.073
> 
> 标签：jsf, tomcat, web.xml

我在eclipse上写了一个简单的jsf web app。当我在 eclipse 中的 tomcat 7 服务器上运行它时，我的 web 应用程序运行良好。现在我正在将其部署到服务器主机名 = cheetah.arvixe.com。

为此，我已将我的 Web 应用程序导出为 war 文件，并将此 war 文件解压缩到 arvixe 服务器的 public_html 文件夹中。

当我在浏览器上访问我的网站时，我得到一个空白页面。当我查看页面源代码时，我看到我的 index.xhtml 带有 jsf 标签。我想知道为什么我的页面没有显示。有任何想法吗？

这是我的 index.html 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
    <ui:define name="content">

        <h:form>

            <h:panelGrid columns="2">
                <h:outputText value="Name"></h:outputText>
                <h:inputText id="userid" value="#{user2.userId }"></h:inputText>

                <h:outputText value="Password"></h:outputText>

                <h:inputSecret id="password" value="#{user2.pincode}"
                    required="true"  requiredMessage= "#{vm['loginBean.password']}">
                    <h:messages for="password" style="color:red" />
                </h:inputSecret>
            </h:panelGrid>
            <h:commandButton value="Register" action="query_results"></h:commandButton>

        </h:form>

    </ui:define>
</ui:composition>

</html> 
```

这是我的 web.xml 代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>Redlancelogin</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.xhtml</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
</web-app> 
```

在我的 web-ing/lib 中，我有 jsf-api.jar 和 jsf-imp.jar

请告诉我为什么在部署到主机服务器时总是出现空白页。先感谢您！！！！

# localization - 复合C1表单渲染器本地化

> ID：15774587
> 
> 赞同：2
> 
> 时间：2013-04-02T21:19:17.630
> 
> 标签：localization, c1-cms

我创建了一个全局数据类型，并在页面中使用表单渲染器让用户填写数据并提交到网站。

默认英语工作正常。现在，当我尝试支持第二种语言时，我遇到了问题。根据复合文档：

1.在 ~/Frontend/CompositeForms/Renderer/Localization/ 添加你的空本地化文件，例如：Composite.FormsRenderer.de-de.xml 2.
将默认 Composite.FormsRenderer.en-us.xml 的内容复制到你的本地化文件。
3.翻译字符串。
4.在 ~/App_Data/Composite/Composite.config 中，找到 Composite.Plugins.FormsRenderer 的 add 部分并注册您的本地化文件

但是 ~/Frontend/CompositeForms/Renderer/Localization 不存在，Composite.FormsRendereren-us.xml 也不存在。

文档是否已过时？有没有人在用户定义的数据类型上本地化表单渲染器的经验？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T12:33:34.633

该文档目前已过时（并将很快更新 - 感谢您指出）。

在 4.0 或更高版本上按以下方式执行此操作：

1.  复制 ~/Composite/InstalledPackages/localization/Composite.Forms.Renderer.en-us.xml，将语言/文化代码从“en-us”更改为您的语言（例如 Composite.Forms.Renderer.de-de .xml）。
2.  翻译字符串。

无需再更改 ~/App_Data/Composite/Composite.config 中的任何内容。

# javascript - 插入音频元素会导致 CSS 错误

> ID：15774590
> 
> 赞同：2
> 
> 时间：2013-04-02T21:19:32.930
> 
> 标签：javascript, ios, html, dom, html5-audio

当我`audio`在我的 HTML 中插入一个标签时，它会搞砸页面，导致背景和随机元素消失。为什么会这样？

```
<audio style="display: none; "></audio> 
```

我让它不可见，因为我用它在后台播放音频。这发生在我的 iphone 5、ios 6.1 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:07:51.547

我不确定我们是否有同样的问题，但我在寻找我的答案时发现了你的问题。我还尝试`display:none;`在我的音频标签上使用它，它使我的 HTML 变得混乱。我试图隐藏它，因为我使用自定义控件来播放/暂停 btns，并且由于某种原因，我的文本和按钮之间存在巨大差距，但仅限于我的 iPad。来看看，音频元素有默认尺寸，30px x 200px，如果你愿意，你可以在 Chrome 的开发工具中看到这个。将我的元素分开的是默认尺寸。

无论如何，如果这就是您尝试隐藏音频元素的原因，请将高度和宽度设置为 0 而不是使用`display:none;`

```
audio {
height:0;
width:0;
} 
```

# java - 创建类和接口的arraylist

> ID：15774596
> 
> 赞同：2
> 
> 时间：2013-04-02T21:19:59.053
> 
> 标签：java, generics, arraylist

我正在尝试使用类型（是的，这是一个我的世界模组）创建一个`ArrayList`（显然是 java ）。`TileEntity`但是我还需要添加到的对象`ArrayList`来实现某个接口。

想到的第一个选项是创建该`TileEntity`已实现接口的抽象子类，并将其用作`ArrayList`类型。但是考虑到人们通常会创建自己的子类`TileEntity`并将它们用作他们通常子类的类，并且我希望人们能够连接到我的 mod，我不能指望他们将除`TileEntity`.

我目前的解决方案是`if(object instanceof MyInterface)`在添加之前进行检查，但这看起来很难看。当然，有一种方法可以设置 an 的类型，`ArrayList`要求一个对象既是 的子类，`TileEntity`又是 的实现者`MyInterface`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:34:44.473

您可以将使用 的方法或类设为通用`ArrayList`。例如，一个泛型方法：

```
public <T extends TileEntity & MyInterface> void doStuffWith(T obj) {
    List<T> yourList = new ArrayList<T>();
    yourList.add(obj);
    ...//more processing
} 
```

还有一个通用类：

```
public class ArrayListProcessor<T extends TileEntity & MyInterface> {
   List<T> theList;

   public void processList(T obj) {
      theList.add(obj);
      ...
   }

   public void someOtherMethod() {
      T listElem = theList.get(0);
      listElem.callMethodFromTileEntity();//no need to cast
      listElen.callMethodFromMyInterface();//no need to cast
   }
}

...//somewherein your code
//SomeObj extends TileEntity and implements MyInterface 
ArrayListProcessor<SomeObj> proc = new ArrayListProcessor<SomeObj>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:32:30.900

您可以将所需的任何方法添加`TileEntity`到您的界面中，然后制作`ArrayList`您的界面。可能有一些奇特的方法可以使用泛型以更好的方式解决问题，但我不确定如何。

**编辑：** dcernahoschi 的解决方案要好得多。

# pdb-files - Rational 工具 Purify/Quantify 查找 pdb 文件

> ID：15774600
> 
> 赞同：1
> 
> 时间：2013-04-02T21:20:07.647
> 
> 标签：pdb-files, purify, quantify

理性工具是否遵循 _NT_SYMBOL_PATH 来查找 .pdb 文件？从我的经验看来，它们不是，并且 .pdb 文件需要与我试图插入的 .dll 和 .exe 并置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:36:07.227

我最终找到了一些表明 pdb 和 dll/exe 需要并置的参考资料。

验证 .exe 或 .dll 的 .pdb 文件是否与对应的 .exe 或 .dll 位于[同一目录](http://wiki.scilab.org/Purify%207.0%20Recommended%20Settings%20for%20Visual%20Studio%20.NET%20and%20Visual%20Studio%202005)中。.pdb 文件包含 Microsoft 格式符号信息。如果将 .exe 或 .dll 移动到工作目录，则还必须移动相应的 .pdb 文件。

验证 pdb 文件是否存在于与应用程序模块[相同的文件夹](http://www-01.ibm.com/support/docview.wss?uid=swg21306997)中，以便可以在精确模式下检测模块。精确模式检测是错误检查检测的一个级别，它提供完整的运行时错误检测并精确定位程序中任何组件中的问题。如果应用程序没有正确的调试信息，PurifyPlus 将以最小模式进行检测，并且不会为该特定模块收集数据。

# php - 使用 phpSASS 指南针扩展

> ID：15774603
> 
> 赞同：1
> 
> 时间：2013-04-02T21:20:13.977
> 
> 标签：php, compass-sass

我正在努力使用 phpSASS 指南针扩展。

`@import`我正在使用以下代码来创建我的 css 文件，但是当我尝试使用Compass 中的任何内容时它不起作用：

```
require_once("libs/phpsass/SassParser.php");

$options = array(
'style' => 'nested',
'cache' => FALSE,
'syntax' => 'scss',
'debug' => TRUE,
'extensions' => array('Compass','Own')
);

$sass = new SassParser($options); 
$css = $sass->toCss( $scssFolder."/".$scssFile );

file_put_contents($cssFolder."/".$cssFile, $css); 
```

我哪里错了？

注意。如果我不使用 Compass mixins，那么它可以正常工作。

# ios - 为什么即使视图控制器没有显式添加为子项，外观方法也会被调用？

> ID：15774605
> 
> 赞同：2
> 
> 时间：2013-04-02T21:20:15.500
> 
> 标签：ios, uiviewcontroller

在研究容器视图控制器以尝试重构一些代码时，我遇到了一些我不理解的东西。

Apple 文档告诉我，为了让子视图控制器调用它们的外观方法，它们必须作为子视图控制器添加到父视图控制器中`addChildViewController:`

这让我感到困惑，因为我的代码没有使用任何容器视图控制器方法，但我所有的子视图控制器都收到了`viewWillAppear:`消息。

我将代码简化为这个简单的示例，尽管调用了`addChildViewController:`

```
@interface ChildViewController : UIViewController
@end

@implementation ChildViewController

- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 250.0f, 250.0f)];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"ChildViewController:viewWillAppear:");
}

@end

@interface RootViewController : UIViewController
@property (strong) ChildViewController *cvc;
@end

@implementation RootViewController
@synthesize cvc;
- (void)loadView {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 500.0f, 500.0f)];
    cvc = [[ChildViewController alloc] init];
    [view addSubview:[cvc view]];
    self.view = view;
}

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = [[RootViewController alloc] init];
    [self.window makeKeyAndVisible];

    return YES;
}

@end 
```

为什么这行得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:53:36.953

调用过程`addSubview`将导致视图出现，从而导致`loadView`, `viewDidLoad`, `viewWillAppear`,`viewDidAppear`等调用。（`addChildViewController`以及`didMoveToParentViewController`您也应该这样做的电话）不会影响这一点。

您调用`addChildViewController`以确保您的控制器层次结构与视图层次结构保持同步。如果您不这样做，您将无法将某些事件传递给您的子控制器（例如旋转事件）。此外，通过这样做`addChildViewController`，您的控制器将为您保留，而您无需维护自己的属性来跟踪子控制器。

如果您看到[WWDC 2011 - #201 Implementing UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)，它将讨论保持视图层次结构和控制器层次结构同步的重要性。

# git - git 添加 . 确实添加了 .gitignore 中列出的文件

> ID：15774606
> 
> 赞同：1
> 
> 时间：2013-04-02T21:20:18.093
> 
> 标签：git, gitignore

我想停止在 Git 中跟踪我添加到文件中的某些`.gitignore`文件。

我使用过`git rm --cached`（也尝试过`git rm -r --cached .`），但在运行之后`git add .`，a`git commit --dry-run`告诉我 gitignore 中的文件是“要提交的”。

该`.gitignore`文件的内容是：

```
/source/backup/*
/site/index.php
/site/userscript.user.js 
```

**这个 gitignore 有什么问题？**

当唯一的线路是`source/backup/*`. 一旦我添加了第二行，`source/backup/*`文件也将被提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:26:41.560

清除您的索引。

```
git reset 
```

停止跟踪备份文件夹中的文件。

```
git rm --cached source/backup/ 
```

自行提交此更改。

```
git commit -m "Removing backup folder from git." 
```

正常进行。如果您的忽略文件设置正确，此时被忽略的文件不应意外滑入。我建议在它前面加上一个斜杠（假设该文件夹存在于存储库的根目录中）。

```
#.gitignore
/source/backup/
/site/index.php 
```

打开 YouTube。吉特大师。[http://youtu.be/ZDR433b0HJY](http://youtu.be/ZDR433b0HJY)

# java - JComboBox 选择一个变量

> ID：15774607
> 
> 赞同：0
> 
> 时间：2013-04-02T21:20:22.937
> 
> 标签：java, swing, actionlistener, jcombobox

一个非常愚蠢的问题，所以它对你来说应该是一个简单的答案。我这里有一些代码：

```
 //Severity Row
     severity = new JLabel("Severity:");
     c.fill = GridBagConstraints.HORIZONTAL;
     c.gridx = 0;
     c.gridy = 4;
     c.gridwidth = 1;
     pane.add(severity, c);

     severityBox = new JComboBox(SEVERITY);
     c.fill = GridBagConstraints.HORIZONTAL;
     c.gridx = 1;
     c.gridy = 4;
     c.gridwidth = 1;
     pane.add(severityBox, c);
     severityBox.addActionListener(this); 
```

用户在 JComboBox 中选择的选项有：“Critical”、“Major”和“Minor”。

如何获得它，以便如果用户从 ComboBox 中选择“Major”，我可以让它打印出“red”而不是使用打印出“Major”的 getSelectedItem()？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:24:59.353

只需更改您要返回的值：

```
private String sValue;
@Override
public void actionPerformed(ActionEvent evt)
{
  if (evt.getSource() == severityBox )
  {
     sValue = (String)severityBox.getSelectedItem();
     if ( "Major".equals(sValue))
     {
        sValue = "Red";
     }
    System.out.println(sValue);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:42:59.950

[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)建议使用表示“状态名称”和“状态颜色”的特定对象。例如，此类可能如下所示：

```
class Item {

    private String name;
    private String color;

    public Item(String name, String color) {
        this.name = name;
        this.color = color;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    @Override
    public String toString() {
        return name;
    }
} 
```

现在，您可以使用上述类的实例构建组合框。请看我的例子：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JComboBox;
import javax.swing.JFrame;

public class SourceCodeProgram {

    public static void main(String argv[]) throws Exception {
        JComboBox<Item> comboBox = new JComboBox<Item>(new Item[] {
                new Item("Major", "red"), new Item("Critical", "dark"),
                new Item("Minor", "green") });
        comboBox.addActionListener(new ActionListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void actionPerformed(ActionEvent e) {
                JComboBox<Item> comboBox = (JComboBox<Item>) e.getSource();
                Item item = (Item) comboBox.getSelectedItem();
                System.out.println(item.getColor());
            }
        });
        JFrame frame = new JFrame();
        frame.add(comboBox);
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

如您所见，我将颜色和名称绑定在一个类中。我创建了这个类的 3 个实例并将其传递给`JComboBox<Item>`构造函数。
我们可以使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)类来链接这些属性，但我认为特定类是最好的解决方案。

# windows-phone-8 - 使用 SSML 的 Windows Phone 8 文本转语音 - 真实设备上的标签异常

> ID：15774609
> 
> 赞同：0
> 
> 时间：2013-04-02T21:20:32.290
> 
> 标签：windows-phone-8, text-to-speech, ssml

我正在 WP8 上实现简单的语音识别和合成（SSML）。当我在模拟器中测试应用程序时，一切都很好。但是当我在物理设备（HTC Windows Phone X8）上测试应用程序时，SSML 合成出现了一个问题。此 SSML 代码工作正常：

```
await synth.SpeakSsmlAsync(@"<speak version=""1.0""
                                 xmlns=""http://www.w3.org/2001/10/synthesis"" xml:lang=""en-US"">
                                 <voice gender=""female"">
                                     Volume level 100.
                                 </voice>
                             </speak>"); 
```

而这个 SSML：

```
await synth.SpeakSsmlAsync(@"<speak version=""1.0""
                                 xmlns=""http://www.w3.org/2001/10/synthesis"" xml:lang=""en-US"">
                                 <voice gender=""female"">
                                     <prosody volume=""100.0"">
                                         Volume level 100.
                                     </prosody>
                                 </voice>
                             </speak>"); 
```

抛出异常：

```
{System.FormatException:
      The text associated with this error code could not be found.
      at Windows.Phone.Speech.Synthesis.SpeechSynthesizer.SpeakSsmlAsync(String content)
      at PhoneApp1.MainPage.<voiceSynth_Click>d__9.MoveNext()}  System.Exception
{System.FormatException} 
```

任何人都有任何想法，为什么`<prosody>`标签在设备上不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:40:14.093

问题解决了！

```
<prosody volume=""100.0""> doesn't work because the number is not integer.
<prosody volume=""100""> it should look like this 
```

# ember.js - 使用对象 id 替换路由

> ID：15774617
> 
> 赞同：1
> 
> 时间：2013-04-02T21:20:47.450
> 
> 标签：ember.js, ember-router

我想在 ember 控制器中使用 replaceRoute 但需要传递一个对象 ID。类似于以下内容：

```
this.replaceRoute('projects.edit', 4) 
```

这完全有可能还是应该以不同的方式完成？它会去我告诉它的路线，但对象 id 为`undefined`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:53:24.767

> 这完全有可能还是应该以不同的方式完成？

`replaceRoute`期望传递路由的上下文，而不是 id。您可以使用 id 来定位上下文，例如：

```
this.replaceRoute('projects.edit', App.Project.find(4)); 
```

这是一个 jsfiddle 演示如何使用夹具适配器的这种方法

[http://jsfiddle.net/mgrassotti/mhyjG/1/](http://jsfiddle.net/mgrassotti/mhyjG/1/)

# c - SPARC 程序集，设置 C 标志

> ID：15774623
> 
> 赞同：0
> 
> 时间：2013-04-02T21:21:01.947
> 
> 标签：c, assembly, 32-bit, sparc

这让我感到困惑，我真的无法弄清楚为什么我会遇到这个问题。我要在 c 中创建一个程序，该程序在设置 C 标志之前输出一个无符号值，使用程序集通过 addcc 累积一个变量，并将该值发送回 c 中的 main。我相信我的 c 代码是正确的：

```
unsigned int func();

int main(void){
    printf("The max value before the C flag is set is: %u\n", func());
} 
```

现在问题出现在程序集上......

```
.global func
func: save %sp, -128, %sp
addcc %g0, 1, %g0
clr %l0

loop:
bcs away
mov %l0, %i0
addcc %i0, 1, %l0
ba loop
nop

away:
ret
restore 
```

这应该做的是累积 %l0，当设置 C 标志时，将值传递回 %i0 并返回它。当我运行这个时，我得到 0。这对我来说很有意义，因为我相信我应该得到一个更大的数字。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:36:36.577

问题是 Sparc 上的分支被延迟了——分支之后的下一条指令将在分支实际执行之前执行。所以当你有：

```
bcs away
mov %l0, %i0 
```

当设置了 C 标志并采用此分支时，`mov`仍将执行，用（添加后的值 -- 0）覆盖`%i0`（最后一次添加设置 C 之前的值）中的值。`%l0`

如果你在这里坚持：

```
bcs away
nop
mov %l0, %i0 
```

它应该给你你想要的价值。

# asp.net - 如何在服务器上处理某些内容时更新状态标签？

> ID：15774629
> 
> 赞同：2
> 
> 时间：2013-04-02T21:21:22.230
> 
> 标签：asp.net, ajax, updatepanel

当用户单击按钮时，我需要处理（服务器端）大量数据（文件）。我想显示正在处理的每个文件名的运行摘要。我一直在尝试使用 UpdatePanel 控件来实现，但只发生了最后一次更新。这是我为模拟问题而创建的一些简单代码（它应该从 1 计数到 10，而是等待 5 秒并输出 10）：

```
<%@ Page Language="C#" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script runat="server">
        protected void Page_Load(object sender, EventArgs e)
        {
            ScriptManager1.RegisterAsyncPostBackControl(Button1);
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            for (int i = 1; i <= 10; i++)
            {
                Label1.Text = i.ToString();
                System.Threading.Thread.Sleep(500);
                UpdatePanel1.Update();
            }
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" />
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

有没有办法使这项工作？或者也许有更好的方法来做到这一点？

在此先感谢，杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:39:55.427

您需要对服务器使用 ajax 调用。我从我以前的一个项目中复制了这段代码，它有点长。试试看，让我知道它是否有效。

**page1.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

    <script type="text/javascript">

        function BeginProcess() {
            // Create an iframe.
            var iframe = document.createElement("iframe");

            // Point the iframe to the location of
            //  the long running process.
            iframe.src = "Process.aspx";

            // Make the iframe invisible.
            iframe.style.display = "none";

            // Add the iframe to the DOM.  The process
            //  will begin execution at this point.
            document.body.appendChild(iframe);

            // Disable the button and blur it.
             document.getElementById('trigger').blur();
        }

        function UpdateProgress(PercentComplete, Message) {
            document.getElementById('ContentPlaceHolder2_lbDownload').setAttribute("disabled", "true");
            document.getElementById('trigger').value = PercentComplete + '%: ' + Message;

        }

  </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>

    <input type="submit" value="Start BackUp Process!" 
    id="trigger" onclick="BeginProcess(); return false;"
    style="width: 250px;" />

    </ContentTemplate>
   </asp:UpdatePanel>

     <asp:UpdateProgress ID="UpdateProgress1" 
     AssociatedUpdatePanelID="UpdatePanel1" runat="server">
<ProgressTemplate>  
         </ProgressTemplate> 
</asp:UpdateProgress>

</asp:Content> 
```

**进程.aspx.cs**

```
public partial class Process : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        StringBuilder SB = new StringBuilder();
        // Padding to circumvent IE's buffer.
        Response.Write(new string('*', 256));
        Response.Flush();

        // Initialization
        UpdateProgress(0, "Initializing task.");

        try
        {

            foreach (yourloophere)
            {

                        UpdateProgress(increment, db.Name + " Backup Started....");
                //your process code
                        UpdateProgress(increment, db.Name + " Backup Completed!");
  //your process code
                        SB.Append(db.Name + "BackUp Complted!");

        //your process code
                SB.Append("<br/>");

            }

            // All finished!
            UpdateProgress(100, "All Database BackUp Completed!");

        }
        catch (Exception ex)
        {
            UpdateProgress(0, "Exception: " + ex.Message);

            SB.Append("Back Up Failed!");
            SB.Append("<br/>");
            SB.Append("Failed DataBase: " + DBName);
            SB.Append("<br/>");
            SB.Append("Exception: " + ex.Message);

        }

    }

    protected void UpdateProgress(double PercentComplete, string Message)
    {
        // Write out the parent script callback.
        Response.Write(String.Format("<script type=\"text/javascript\">parent.UpdateProgress({0}, '{1}');</script>", PercentComplete, Message));
        // To be sure the response isn't buffered on the server.    
        Response.Flush();
    }

} 
```

# entity-framework - 填充导航属性集合惰性

> ID：15774631
> 
> 赞同：0
> 
> 时间：2013-04-02T21:21:27.807
> 
> 标签：entity-framework, ef-code-first

我在一对多关系中有两个相关的类。我可以访问其中一个类中的 Class 属性，但不能访问另一个类。

这是我的课程：

```
 public  class Seccion
    {

        public int Id { get; set; }           
        public string  Nombre { get; set; }   
       public  ICollection<TipoCaracteristica> TiposCaracteristicas;

    }

    public class TipoCaracteristica
    {
        public int Id { get; set; }         
        public int SeccionId { get; set; }
        [ForeignKey("SeccionId")]
        public Seccion Seccion { get; set; }
        public List<CaracteristicaAdicional> Caracteristicas;
    } 
```

使用此代码，我可以包含**Seccion**属性

```
 public IQueryable<TipoCaracteristica> GetTipoCaracteristicas
        {
            get { return db.TipoCaracteristicas.Include("Seccion"); }

        } 
```

我无法获得包含**TipoCaracteristicas列表的****Seccion**列表。我还需要获取每个**TipoCaracteristicas的****Caracteristicas**列表。

 ******这就是我正在尝试的

```
public IQueryable<Seccion> GetSecciones
        {
            get { return db.Secciones.Include("TiposCaracteristicas"); }
        } 
```

但我得到这个错误：

> 指定的包含路径无效。EntityType 'Seccion' 没有声明名为 'TiposCaracteristicas' 的导航属性。

**我怎样才能做到这一点？我也可以包括其他级别吗？**

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:02:04.723

您需要做的是使用`virtual`关键字通知实体框架您的属性是导航属性。您还需要提供访问修饰符：

```
public virtual ICollection<TipoCaracteristica> TiposCaracteristicas { get; set; } 
```******

# ruby - 设置嵌套数组中元素的值

> ID：15774634
> 
> 赞同：2
> 
> 时间：2013-04-02T21:21:34.813
> 
> 标签：ruby

我正在尝试创建一个简单的 10x10 数组，以便创建康威的生命游戏，但我遇到了一些奇怪的行为。首先我初始化电路板：

```
@board = Array.new(10, Array.new(10))
(0..9).each do |row|
    (0..9).each do |column|
        @board[row][column] = rand(0..1)
    end
end 
```

产生这个：

```
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111
1000000111 
```

看起来很可疑，但这完全有可能是随机生成的。当我尝试设置单个单元格的值时，真正的问题就开始了。当我更改值时，它将整个列设置为该值！例如，假设我更改了第一个单元格的值：

```
@board[0][0] = 0 
```

我得到的是：

```
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111
0000000111 
```

是什么赋予了？为什么第 0 列中所有单元格的值会发生变化，而不仅仅是 0、0 处的单元格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:30:09.937

我想到了。当我用 初始化`@board`时`Array.new(10, Array.new(10))`，它创建了一个包含 10 个相同数组的数组。也就是说，每个 Array 都有相同的 object_id。

```
@board[0].object_id
=> 22148328
@board[1].object_id
=> 22148328 
```

我使用以下`map`方法解决了这个问题：

```
@board = Array.new(10).map{ |x| Array.new(10) } 
```

# grails - 从 gsp 到控制器方法的每个循环的等效项

> ID：15774637
> 
> 赞同：2
> 
> 时间：2013-04-02T21:21:42.343
> 
> 标签：grails, groovy, gsp

假设这是当前在 gsp 中：

```
<g:each in="${prospectProjectStatuses}" var="statusObj">
    <%-- Number active and inactive projects --%>
    <g:if test="${statusObj?.project?.active == true}">
        <g:set var="numActiveProjects" value="${numActiveProjects + 1}"/>
    </g:if>
    <g:else>
        <g:set var="numInactiveProjects" value="${numInactiveProjects + 1}"/>
    </g:else>

    <%-- Number of hidden rows to show --%>
    <g:if test="${!statusObj?.project?.id.intValue() && !canEdit && statusObj?.status?.id}">
        <g:set var="numProjectsToShow" value="${numProjectsToShow + 1}"/>
    </g:if>

    <g:if test="${statusObj?.project?.active && statusObj?.status?.id}">
        <g:set var="numStatusSet" value="${numStatusSet + 1}"/>
    </g:if>
</g:each> 
```

控制器方法中的 each 循环的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:30:07.013

在您的收藏中调用 each()。因此，您的示例 gsp 的等效项如下所示：

```
prospectProjectStatuses.each { statusObj -> 
    if (statusObj?.project?.active) {
        numActiveProjects += 1
    } else {
        numInactiveProjects += 1
    }
    if (statusObj?.project?.id.intValue() && !canEdit && statusObj?.status?.id) {
        numProjectsToShow += 1
    }
    if {statusObj?.project?.active && statusObj?.status?.id) {
        numStatusSet += 1
    }
} 
```

# amazon-ec2 - 在弹性 beantalk 部署后保留内容

> ID：15774639
> 
> 赞同：0
> 
> 时间：2013-04-02T21:21:49.413
> 
> 标签：amazon-ec2, amazon-elastic-beanstalk

我有一个在 Amazon EC2 和 Elastic Beanstalk 上运行的 Symfony2 网站。每次我部署项目的 git 版本时，都会立即丢失文件夹的内容（“/web/uploads”）

有没有办法告诉 Elastic Beanstalk 这个内容不应该被覆盖？

我正在考虑在我的 .ebextention 文件中的 container_commands 参数上指定一个额外的命令，但我不确定这是解决问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:00:23.427

您无法保留该内容。您需要将其存储在外部位置，例如 S3、RDS、DynamoDB 等。关于 Elastic Beanstalk 的另一件事需要注意的是，如果它扩展了您的应用程序的另一个实例，它将没有您在本地存储的内容，并且将无法访问它。我知道这听起来很苛刻和限制，但从长远来看，自动配置/部署会减少麻烦，恕我直言。;)

# c# - Parallel For 不会导致静态构造函数死锁？

> ID：15774640
> 
> 赞同：3
> 
> 时间：2013-04-02T21:21:54.340
> 
> 标签：c#, .net, multithreading

我试图将线程添加到我拥有的静态类中，但遇到了一堆问题。我阅读[了这个线程](https://stackoverflow.com/questions/10465961/potential-pitfalls-with-static-constructors-in-c-sharp)和它链接到的博客文章，我想我明白发生了什么。但我不明白为什么 Parallel For 循环仍然像这个例子一样工作：

```
using System;
using System.Threading;
using System.Threading.Tasks; 

namespace ThreadingTest
{
    public static class TestClass
    {
        public static int AwesomeNum = 43; 

        static TestClass()
        {
            string[] x = { "deal", "witch", "panda"};

            //does not cause a deadlock? huh?
            Parallel.For(0, x.Length,  i =>
                {
                    Console.WriteLine(x[i]); 
                });

            //results in a deadlock
            //Parallel.Invoke(writesomething, writesomethingelse); 

            //results in deadlock
            Thread thread = new Thread(new ThreadStart(() =>
            {
                Console.WriteLine("there is a bear in my soup"); 
            }));

            thread.Start();
            thread.Join(); 
        }

        private static void writesomething()
        {
            Console.WriteLine("writing something"); 
        }

        private static void writesomethingelse()
        {
            Console.WriteLine("writing something else."); 
        }
    }
}

using System;

namespace ThreadingTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(TestClass.AwesomeNum.ToString()); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T21:35:34.120

以下*确实*会导致死锁：

```
Parallel.For(0, x.Length,  i => {
   Console.WriteLine(i); 
}); 
```

有什么不同？

我上面写的 lambda 表达式被编译为内部的一个方法`TestClass`。您在`new Thread`示例中编写的内容也是如此。

您在并行表达式中编写的 lambda`i => Console.WriteLine(x[i])`被编译成不同的编译器生成的类，因为它捕获`x`. 所以要执行它需要静态初始化闭包类，而不是`TestClass`.

`Parallel`所以它与任何其他线程机制无关。这只是需要生成闭包对象的 lambda 和不需要生成闭包对象的 lambda 之间的区别。

注意，我描述的是当前编译器的行为。这种行为可以在相关规范中找到，也可以是实现定义的。我没看过

# c# - 在静态方法中获取非静态方法名称

> ID：15774643
> 
> 赞同：2
> 
> 时间：2013-04-02T21:22:11.920
> 
> 标签：c#, reflection, delegates, static-methods

我正在尝试做一些相当简单的事情，但不确定是否有任何方法可以简单地创建我的类的虚拟实例。

我正在尝试使用一些简单的代码来简单地获取非静态方法的方法名称：

```
static string GetMethodName(Func<string, int> function  )
        {
            return function.Method.Name;
        } 
```

但是我试图像这样从 MyStaticMethod 调用它，当然它在抱怨：

```
private static void MyStaticMethod()
{
   var a = GetMethodName(MyNonStaticMethod);
}

private int MyNonStaticMethod(string param1)
{
  return 0;
} 
```

有没有办法在不创建包含类的虚拟实例的情况下完成此操作？显然我的情况更复杂，我不能简单地将我的非静态方法设为静态（它需要一个实例并具有依赖项绑定）。只是想知道这是否可能，因为我只需要名称（所以真的不需要实例）。我试图摆脱魔术字符串，并希望在事情发生变化时出现一些编译时错误。

编辑：我创建了一个静态助手类

我有一个通用方法：

```
 public static string GetMemberName<T>(
                Expression<Func<T, object>> expression)
            {
                if (expression == null)
                {
                    throw new ArgumentNullException("expression");
                }

                return _GetMemberName(expression.Body);
            }

private static string _GetMemberName(
            Expression expression)
        {   
            if (expression is MemberExpression)
            {
                var memberExpression =
                    (MemberExpression)expression;
                return memberExpression.Member.Name;
            }

            if (expression is MethodCallExpression)
            {
                var methodCallExpression = (MethodCallExpression)expression;
                return methodCallExpression.Method.Name;
            }

            if (expression is UnaryExpression)
            {
                var unaryExpression = (UnaryExpression)expression;
                return GetMemberName(unaryExpression);
            }

            throw new ArgumentException("Unrecognized expression");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:38:33.663

你当然可以这样做。像这样使用`Expression<Func<YourInstanceClass, TReturn>>`：

```
static string GetMethodName<TReturn>(Expression<Func<YourInstanceClass, TReturn>> function)
{
    var call = function.Body as MethodCallExpression;
    return call != null ? call.Method.Name : "not a single call expression";
} 
```

现在你可以

```
var name = GetMethodName(a => a.MyNonStaticMethod("1"));

Console.WriteLine (name); //prints MyNonStaticMethod 
```

在哪里

```
public class YourInstanceClass
{
    public int MyNonStaticMethod(string param1)
    {
        return 0;
    }
} 
```

我已经`MyNonStaticMethod`公开了，所以我可以在外面调用它，但是你可以将它保留为私有并在类内的静态方法中调用它

# web-services - 雅虎最近是否停止了他们的地理网络服务之一？

> ID：15774646
> 
> 赞同：2
> 
> 时间：2013-04-02T21:22:24.857
> 
> 标签：web-services, yahoo, geocode

我正在使用雅虎网络服务将邮政编码解析为地理信息。一个示例网址是

[http://where.yahooapis.com/geocode?q=35060,mx](http://where.yahooapis.com/geocode?q=35060,mx)

其中 35060 是区号，mx 是国家/地区。

当我这样做时，我现在收到 404。这项服务有变化吗？我现在看到雅虎提供的 GeoPlanet 也需要应用程序 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:51:03.520

尽管雅虎似乎没有正式宣布，但一直有报道称该服务不再有效。

作为“官方”替代方案，请考虑 Yahoo Placefinder，它需要应用程序 ID 和 2-legged OAuth 身份验证：http: [//developer.yahoo.com/boss/geo/docs/requests-pf.html](http://developer.yahoo.com/boss/geo/docs/requests-pf.html)

或者，您可以使用 YQL 来检索您需要的信息，而无需身份验证：

[http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20geo.placefinder%20where%20postal=%2236050%22%20and%20country=%22mexico%22&diagnostics=true](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20geo.placefinder%20where%20postal=%2236050%22%20and%20country=%22mexico%22&diagnostics=true)

# bower - 使用 bower 指定特定分支的最新版本

> ID：15774649
> 
> 赞同：63
> 
> 时间：2013-04-02T21:22:33.437
> 
> 标签：bower

我想将特定分支的最新版本指定为依赖项。具体来说，我想在 Bootstrap v3.0 发布之前使用它。

在凉亭中将其指定为依赖项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-12-29T00:24:53.780

您需要使用`#`,[附加到组件名称](https://github.com/bower/bower/issues/771)：

```
bower install bootstrap#version3-branch-name 
```

正如您所料，如果您添加`--save-dev`它，那么它将添加到您的`bower.json`文件中：

```
"bootstrap": "version3-branch-name" 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-03T11:49:12.503

您可以指定提交 SHA 而不是版本：

```
bower install bootstrap#37d0a30589 
```

*请注意，在生产或可重用模块中指定分支是不好的做法，因为它是一个移动目标，最终会破坏某些东西。[在这里](https://github.com/twitter/bower/issues/107)讨论它。*

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-03T21:04:32.750

直到 bower 能够像@Sindre 指出的那样[定位特定提交](https://github.com/twitter/bower/issues/275)，我正在利用 bower 定位任意 zip 文件的能力。我在我的 component.json 中指定了 github 的 bootstrap 3.0 分支的 zip：

`"bootstrap": "https://github.com/twbs/bootstrap/archive/3.0.0-wip.zip"`

我知道这是针对分支（而不是特定提交）的不好做法，但这对我来说现在是权宜之计。

# javascript - 如何在不使用单击按钮刷新页面的情况下将数据发送到数据库

> ID：15774657
> 
> 赞同：0
> 
> 时间：2013-04-02T21:23:09.590
> 
> 标签：javascript, jquery

如何在不使用单击按钮刷新页面的情况下将数据发送到数据库

**html:**

```
<body>
<form action="index.php" method="post">

<input name="a" type="text"/><br />
<input name="b" type="text"/><br />
<input name="c" type="text"/><br />
<input type="submit" value="go"/>

</form>

</body> 
```

**jQuery：**

```
<script>

var mm = {a:1000, b:1000, c:1000};
$.ajax({

url:"/index.php",

data:mm,
type:"POST",
success:function(data){
$(data).find("input[type=submit]").click();
return false;
}
});

</script> 
```

但是页面在这里刷新

如何通过单击按钮将数据发送到数据库而不通过 jquery 刷新页面？？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:25:47.420

将您已经拥有的内容包装在表单的提交处理程序中：

```
$('form').submit(function(e){
    e.preventDefault();
    var mm = {a:1000, b:1000, c:1000};
    $.ajax({
        url:"/index.php",
        data:mm,
        type:"POST",
        success:function(data){

        }
    });
}); 
```

# jpa - 重新部署同一应用程序后自身发生 ClassCastException `

> ID：15774661
> 
> 赞同：1
> 
> 时间：2013-04-02T21:23:15.843
> 
> 标签：jpa, netbeans, glassfish, classcastexception

我正在使用 Netbeans 和 Glassfish 开发 JSF 应用程序。当我更改某些内容并将 Netbeans 重新部署到 Glassfish 时，会在实体类本身上引发 ClassCastException。

```
Caused by: java.lang.ClassCastException: com.twibu.entity.Tipper cannot be cast to com.twibu.entity.Tipper
    at com.twibu.service.TipperService.findByUseridPwd(TipperService.java:22) 
```

这是如何引起的，我该如何解决？

* * *

作为参考，这是完整的堆栈跟踪：

```
WARNING: EJB5184:A system exception occurred during an invocation on EJB TipperService, method: public com.twibu.entity.Tipper com.twibu.service.TipperService.findByUseridPwd(java.lang.String,java.lang.String)
WARNING: javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at com.sun.proxy.$Proxy141.findByUseridPwd(Unknown Source)
    at com.twibu.service.__EJB31_Generated__TipperService__Intf____Bean__.findByUseridPwd(Unknown Source)
    at com.twibu.bean.AuthBean.login(AuthBean.java:122)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassCastException: com.twibu.entity.Tipper cannot be cast to com.twibu.entity.Tipper
    at com.twibu.service.TipperService.findByUseridPwd(TipperService.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 44 more 
```

这是实体：

```
@Entity
@Table(name = "tipper")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "Tipper.findAll", query = "SELECT t FROM Tipper t"),
@NamedQuery(name = "Tipper.findById", query = "SELECT t FROM Tipper t WHERE t.id = :id"),
@NamedQuery(name = "Tipper.findByName", query = "SELECT t FROM Tipper t WHERE t.name = :name"),
@NamedQuery(name = "Tipper.findByUserid", query = "SELECT t FROM Tipper t WHERE t.userid = :userid"),
@NamedQuery(name = "Tipper.findByPwd", query = "SELECT t FROM Tipper t WHERE t.pwd = :pwd"),
@NamedQuery(name = "Tipper.findByEmail", query = "SELECT t FROM Tipper t WHERE t.email = :email")})

@NamedNativeQueries({
@NamedNativeQuery(name = "Tipper.findByUseridPwd", query = "" +
        "SELECT a.id AS id, " +
        "       a.idgruppe AS idgruppe, " +
        "       a.name AS name, " +
        "       a.userid AS userid, " +
        "       a.pwd AS pwd, " +
        "       a.email AS email " +
        "FROM tipper AS a " +
        "WHERE     a.userid = ? " +
        "      AND a.pwd = MD5(?)",
            resultClass=Tipper.class)})

public class Tipper implements Serializable {
    private static final long serialVersionUID = 20130311L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "name")
    private String name;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 20)
    @Column(name = "userid")
    private String userid;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 32)
    @Column(name = "pwd")
    private String pwd;
    // @Pattern(regexp="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?", message="Invalid email")//if the field contains email address consider using this annotation to enforce field validation
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "email")
    private String email;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "tipper")
    private Collection<Zulassung> zulassungCollection;
    @JoinColumn(name = "idgruppe", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Gruppe idgruppe;

    public Tipper() {
    }

    public Tipper(Integer id) {
        this.id = id;
    }

    public Tipper(Integer id, String name, String userid, String pwd, String email) {
        this.id = id;
        this.name = name;
        this.userid = userid;
        this.pwd = pwd;
        this.email = email;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getUserid() {
        return userid;
    }

    public void setUserid(String userid) {
        this.userid = userid;
    }

    public String getPwd() {
        return pwd;
    }

    public void setPwd(String pwd) {
        this.pwd = pwd;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @XmlTransient
    public Collection<Zulassung> getZulassungCollection() {
        return zulassungCollection;
    }

    public void setZulassungCollection(Collection<Zulassung> zulassungCollection) {
        this.zulassungCollection = zulassungCollection;
    }

    public Gruppe getIdgruppe() {
        return idgruppe;
    }

    public void setIdgruppe(Gruppe idgruppe) {
        this.idgruppe = idgruppe;
    }

    public boolean isUser() {
        return idgruppe.getName().equals("user")  ||  idgruppe.getName().equals("admin");
    }

    public boolean isAdmin() {
        return idgruppe.getName().equals("admin");
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Tipper)) {
            return false;
        }
        Tipper other = (Tipper) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.twibu.entity.Tipper[ id=" + id + " ]";
    }

} 
```

这是服务类：

```
@Singleton
public class TipperService extends AbstractService {

    public Tipper findByUseridPwd(String userid, String pwd) {
        Query nq = getTwibuManager().createNamedQuery("Tipper.findByUseridPwd");
        nq.setParameter(1, userid);
        nq.setParameter(2, pwd);
        return (Tipper)nq.getSingleResult();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:48:39.783

似乎旧的应用程序没有被取消部署。

如果您不使用容器管理的持久性单元，则需要在取消部署时关闭 EntityManagerFactory。

# javascript - KnockoutJS 数据绑定：从 javascript 点击点击

> ID：15774663
> 
> 赞同：1
> 
> 时间：2013-04-02T21:23:17.267
> 
> 标签：javascript, knockout.js

假设我们有一张桌子

```
<table>
    <tbody data-bind="foreach: orderItems">
        <tr class='datarow'>
            <td data-bind="text: whatever"></td>
            <td><a id='anchor' href='#' data-bind='click: $root.save' onclick='alert("a");'>Text</a></td>
        </tr>
    </tbody>
</table> 
```

所以当我这样做的时候

```
document.getElementsById('anchor').click(); 
```

警报触发但 $root.save 没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:39:59.537

```
Try This

<script type="text/javascript">
    var viewModel = {

        Save: function() {

            alret("Hello");
        }
    };
ko.applyBindings(new MyViewModel());
</script>
<table>
    <tbody data-bind="foreach: orderItems">
        <tr class='datarow'>
            <td data-bind="text: whatever"></td>
            <td><a id='anchor' href='#' data-bind='click: $root.save' onclick='alert("a");'>Text</a></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:32:33.383

我看到代码有两个问题：

1.  getElementsById - 你确定这个方法存在吗？

每个 ID 在页面上应该只存在一次。当你想通过它的ID找到一个元素时，你可以调用getElementById（单数），它会返回一个元素。因为只有一个元素应该有一个给定的 ID，所以没有 getElementsById（复数）方​​法。

您的 foreach 绑定与硬编码的“锚” ID 相结合将产生多个元素的 ID 为锚。这是一个禁忌。也许使用“anchor”类而不是“anchor”的 id。

```
<a class='anchor' href='#' data-bind='click: $root.save' onclick='alert("a");'>Text</a> 
```

所以我的猜测是 getElementsById 没有返回任何可点击的内容。

1.  点击（）

即使您能够从 getElementsById 中取回一个元素，这些元素上也没有 click() 方法。

作为替代方案，您可以使用 jQuery 来获取元素，并且可以使用 jQuery 对象调用 click() 方法。或者您可以获取从 getElementById 返回的元素，将其包装在 jQuery 中，然后调用 click()。

```
$('.anchor').click(); 
```

这是一个工作示例：http: [//jsfiddle.net/tlarson/t4yZL/1/](http://jsfiddle.net/tlarson/t4yZL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:13:20.497

```
<table>
    <tbody data-bind="foreach: orderItems">
        <tr class='datarow'>
            <td data-bind="text: whatever"></td>
            <td><a id='anchor' href='#' onclick='alert("a"); viewModel.save(ko.dataFor(this));'>Text</a></td>
        </tr>
    </tbody>
</table> 
```

*   假设您将 viewModel 存储在其他地方。
*   ko.dataFor(element) - 返回可用于绑定元素的数据

你可以看看这个[链接](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

# php - 列出一个目录中的所有文件 PHP

> ID：15774669
> 
> 赞同：307
> 
> 时间：2013-04-02T21:23:29.393
> 
> 标签：php, list, directory

用 PHP 列出一个目录中的所有文件的最佳方法是什么？是否有 $_SERVER 函数可以执行此操作？我想列出 usernames/ 目录中的所有文件并使用链接遍历该结果，这样我只需单击文件名的超链接即可到达那里。谢谢！

* * *

## 回答 #1

> 赞同：688
> 
> 时间：2013-04-02T21:26:00.793

您正在寻找命令[scandir](http://php.net/manual/en/function.scandir.php)。

```
$path    = '/tmp';
$files = scandir($path); 
```

以下代码将从返回的数组中删除`.`和：`..``scandir`

```
$files = array_diff(scandir($path), array('.', '..')); 
```

* * *

## 回答 #2

> 赞同：294
> 
> 时间：2013-04-02T21:26:00.277

检查一下：[readdir()](http://php.net/manual/en/function.readdir.php)

这段代码应该列出某个目录中的所有条目：

```
if ($handle = opendir('.')) {

    while (false !== ($entry = readdir($handle))) {

        if ($entry != "." && $entry != "..") {

            echo "$entry\n";
        }
    }

    closedir($handle);
} 
```

* * *

**编辑**：miah 的解决方案比我的要优雅得多，你应该改用他的解决方案。

# java - .WAR 文件之外的属性文件

> ID：15774674
> 
> 赞同：1
> 
> 时间：2013-04-02T21:24:04.650
> 
> 标签：java

我需要能够读取位于我的战争之外的属性文件。我的问题是需要一个解决方案，让我可以告诉我的战争文件我的属性文件所在的位置。这可以通过 bashrc 变量和 windows env 变量来完成吗？

我需要这样做，因为我需要能够将属性文件放在可能远离 war 文件的不同位置。

我正在努力想出一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:31:57.600

这在很大程度上取决于属性文件的用途。一些库可以在命令行上设置它，而另一些库则允许您在代码中显式加载它们。

在后者的情况下， System.getProperties() 可能会很有帮助，因为它允许您使用“-D”标志读取传递给 JVM 的属性。例如

```
java -jar -Dfilelocation="yourfilelocation" yourapp.jar 
```

将使用字符串“yourfilelocation”填充系统属性“filelocation”。然后可以在您的代码中使用它来加载属性文件（或您想要对其执行的任何操作）。

由于您在某种应用程序服务器中运行，因此您可以通过不同的方式来完成它。对于码头，您可以将它们放在 start.ini 中（或者在启动码头时将它们简单地传递到命令行）

其中 tomcat 使用一个名为 JAVA_OPTS 的环境变量，所以

```
JAVA_OPTS='-Dfilelocation=yourfilelocation' start.sh 
```

启动tomcat时会设置系统属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:27:36.850

一种方法是通过传递 java 参数或设置环境变量来提供特定位置并从应用程序读取它以确定位置

并且作为后备（默认）应用程序应该宣布查看

```
${user.home}/appname/some.peroperties 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:29:24.530

您可以定义一个可能的目录列表...并尝试阅读每个目录...

我有一个使用默认目录结构读取文件系统中的属性文件的解决方案。

例如：c:\properties\code-suit\prd\application.properties

其中：code-suit 是由应用程序名称定义的变量；prd 是我将使用的环境

祝你好运

# javascript - 没有工作点击收音机。为什么？

> ID：15774677
> 
> 赞同：0
> 
> 时间：2013-04-02T21:24:08.383
> 
> 标签：javascript, jquery, click

当有人选择单选按钮时，尝试添加消息。但是只有在页面加载时，我才收到带有“0”的消息，而不是在我单击单选按钮时。你能告诉我为什么吗？

```
var a3 = 0;

    if(document.getElementById('q3know').checked) {
        a3 = 40;

    }else if(document.getElementById('q3no').checked) {
        a3 = 0;
    }

    function clicker(){
        document.getElementById('q3know').click().alert(a3);
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:51:41.547

好的，在上面的所有评论之后，我想我明白你想要做什么：

```
var a3 = 0;
document.getElementById('q3know').onclick = function() {
    if(document.getElementById('q3know').checked) {
        a3 = 40;
    } else if(document.getElementById('q3no').checked) {
        a3 = 0;
    }
    alert(a3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:56:25.283

```
 var a3 = 0;

if(document.getElementById('q3know').checked) {
    a3 = 40;

}else if(document.getElementById('q3no').checked) {
    a3 = 0;
}

function Clicker () {
    alert(a3);
} 
```

在 HTML 上：

```
<input type="radio" onclick="Clicker();"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:00:14.777

jQuery方式：

```
$('#q3know').on('click', function() {
  var a3 = 0;
  if($(this).is(':checked')) {
    a3 = 40;
  } else if($('#q3no').is(':checked')) {
    a3 = 0;
  }
  alert(a3);
}); 
```

# java - 改变面板

> ID：15774682
> 
> 赞同：0
> 
> 时间：2013-04-02T21:24:39.647
> 
> 标签：java, swing, timer, jpanel, jbutton

我试图让它显示一个 JPanel 并删除另一个取决于 java 中哪个计时器关闭。这是代码的片段。mainMenu 和 pongField 是 JPanel，这是在每毫秒执行一次的计时器内；

```
if (SwingUtilities.getAncestorOfClass(JFrame.class, pongField) != null){
    if (!pongField.getTimer().isRunning())
    {
        mainMenu = new MainMenu(screenX, screenY, myColor, background, contentPane);
        contentPane.remove(pongField);
    }}
    if (SwingUtilities.getAncestorOfClass(JFrame.class, mainMenu) != null){
    if (!mainMenu.getTimer().isRunning())
    {
        switch(mainMenu.getButton())
        {
        case 1:
            pongField = new PongField(screenX, screenY, 0, moderator, player1UpControl, player2UpControl, player1DownControl, player2DownControl, myColor, background, contentPane, speed);
            mainMenu.setButton(0);
            contentPane.remove(mainMenu);
            break;
        case 2:

            break;
        case 3:

            break;
        case 4:

            break;
        }
    }} 
```

让我更具体一点。我正在尝试制作 Pong，一个 JPanel 是实际游戏，另一个是主菜单。如果游戏结束计时器停止并且如果我按下主菜单上的按钮计时器停止并将 getButton() 设置为取决于按下的数字。例如，如果按下按钮单人玩家，它会创建游戏并摆脱当前的 Jpanel。但如果游戏结束，它会摆脱当前的 JPanel 并显示主菜单。此外，每个 JPanel 在创建时都会设置它自己的边界、背景颜色，并将其自身添加到 JFrame。

问题是当我运行它并且游戏结束时它不会变回来，除非我将它最小化并重新启动它，但然后按钮将不起作用。这是 MainMenu 的代码。PongField 的代码太长，但我想我总结了它做得足够好的地方，但如果你愿意，我也可以发布它。

公共类 MainMenu 扩展 JPanel { private static final long serialVersionUID = 1L;

```
//JButtons
private JButton singleJButton, multiJButton, settingsJButton, exitJButton;

//timer if game is still on
private Timer runningTimer;

//JLabel for title
private JLabel titleJLabel;

//screen size
int screenX, screenY;

//color of text and background
private Color myColor, background;

//Container of the JFrame
private Container contentPane;

//which button was clicked
private int buttonPressed;

public MainMenu(int x, int y, Color myC, Color backg, Container contentP)
{
    super();

    //Initialize all given variables
    screenX = x;
    screenY = y;
    myColor = myC;
    background = backg;
    contentPane = contentP;

    setBounds(0,0,screenX,screenY);
    setBackground(background);
    contentPane.add(this);
    setFocusable(true);
    requestFocusInWindow();

    singleJButton = new JButton();
    singleJButton.setBounds(100, 100, 100, 50);
    singleJButton.setText("Single Player");
    singleJButton.setFocusable(false);
    contentPane.add(singleJButton);
    singleJButton.addActionListener(new ActionListener()
    {public void actionPerformed( ActionEvent event )
    {singleJButtonAction(event);}});

    runningTimer = new Timer( 30, new ActionListener() 
    {public void actionPerformed( ActionEvent event )
    {}});

    runningTimer.start();
}

public Timer getTimer()
{
    return runningTimer;
}

public int getButton()
{
    return buttonPressed;
}

public void setButton(int val)
{
    buttonPressed = val;
}

private void singleJButtonAction(ActionEvent e)
{
    runningTimer.stop();
    buttonPressed = 1;
}

//make this panel have focus
public void focus()
{
    requestFocusInWindow();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:55:39.620

什么，它不起作用吗？我只是猜测，因为你没有说。

如果您正在动态创建和删除窗格，我首先看到的是。将它们隐藏起来会更有效。当然，我不知道你的布局是什么样的。另一种选择是在启动时使用所有其他 GUI 内容构建它们，然后继续添加和删除它们，但不要根据计时器重新创建它们。只需显示它们并根据需要隐藏它们。像这样：

```
mainMenu.setVisible( true );
mainMenu.setVisible( false ); 
```

每毫秒如果也很快。我看着棘轮向下，说一秒钟左右。当然，这取决于你在做什么。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:48:11.037

我仍然无法理解您的问题是什么？

代码中似乎缺少的一件事是添加您创建的 mainMenu 和 pongField。您将它们从 contentPane 中删除，这`contentPane.remove(pongField);`是`contentPane.remove(mainMenu);`您的问题吗？

# excel - 单元格值更改时运行的宏

> ID：15774685
> 
> 赞同：0
> 
> 时间：2013-04-02T21:24:46.690
> 
> 标签：excel, vba

我真的不确定这段代码有什么问题，或者我的工作表的格式是否有问题，但是当值`D8`更改时，以下代码不会自动运行：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Address = "$D$8" Then
   Toggle_Rows
End If
End Sub 
```

是格式问题还是代码问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:41:31.583

看到你的问题后[在这里](https://stackoverflow.com/questions/15772686/unhide-rows-based-on-cell-value)

我想让你试试这个：

在工作簿中，转到您希望更改 D8 值并运行代码的工作表。在 Excel 底部右键单击带有该工作表名称的选项卡，然后选择查看代码

在代码窗口的顶部，您应该会看到“（常规）”一词。

单击下拉菜单并选择“WorkSheet”，您应该会看到一个名为

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

End Sub 
```

您可以删除这些行。现在在您选择工作表的右侧有另一个下拉菜单，该下拉菜单应显示“SelectionChange”，然后单击该下拉菜单，然后从下拉菜单中选择“更改”一词。你应该看到另一个新的子

```
Private Sub Worksheet_Change(ByVal Target As Range)

End Sub 
```

在这两行之间是你想要的

```
If Target.Address = "$D$8" Then
   Toggle_Rows
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:54:57.523

不是答案，而是一种调试方式。因为这对我手动和通过代码都有效。

尝试以下方法之一来查看您获得的值：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    MsgBox Target.Address        

    Debug.Print Target.Address

    If Target.Address = "$D$8" Then 
       Toggle_Rows
    End If    
End Sub 
```

# php - PHP if status 和 !isset 或 !isset

> ID：15774687
> 
> 赞同：-2
> 
> 时间：2013-04-02T21:25:00.873
> 
> 标签：php

我正在尝试匹配一个条件，如果用户状态为 10 并且未设置*任何*POST 变量，则会触发错误：

```
if ($_SESSION['status']=='10' && !isset($_POST['a']) || !isset($_POST['B'])) {} 
```

我不能对任何`!isset`一个变量使用 && 条件，因为可以设置一个变量，而另一个变量可能没有。如果未设置一个或多个变量并且状态==10，我只希望条件匹配。

在测试`$_POST`变量时，我通过浏览器网络工具（例如 Firebug）从页面`!isset`中删除一个元素。`input`当表单提交时缺少变量，它*仍然*错误地通过验证。

如果分组条件，我也在寻找 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:28:32.133

如果您正在寻找*绝对任何*PHP 变量，我建议您这样做：

```
if (($_SESSION['status'] == 10) && (count($_POST) > 0)) { 
```

然后，您可以使用获取 _POST var 键的列表`array_keys($_POST)`。

如果您正在寻找特定的：

```
if (($_SESSION['status'] == 10) && (isset($_POST['A']) || isset($_POST['b']))) { 
```

括号的顺序很重要。您可以用括号分隔逻辑语句组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:29:17.860

那是你要找的吗？

```
$status = $_SESSION['status'];

if($status == '10'){
    if(!isset($_POST['a']) or !isset($_POST['B'])){
     //Triggers error.
    }else{
     //Another
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:51:51.540

尝试使它成为一个函数：

```
function checkAllVars($dataVars, $requestVars) {
    foreach($dataVars as $varname) {
        if(!isset($requestVars[$varname])) {
            return false;
        }
    }
    return true;
}

$dataVars = array (
"varName1",
"varName2",
"varName3",
"varName4",
);

$allVarsSet = checkAllVars($dataVars, $_REQUEST); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T21:27:47.443

你可能正在寻找

```
if($_SESSION['status']=='10' && (!isset($_POST['a']) || !isset($_POST['B']))){}
                                ^                                          ^ 
```

这意味着如果状态 = 10 并且（如果未设置“a”或未设置“B”，或者它们都可以不设置）做某事

或者你可能正在寻找

```
if(($_SESSION['status']=='10' && !isset($_POST['a'])) || ($_SESSION['status']=='10' && !isset($_POST['B']))){} 
```

# ios - 机场代码 - iOS

> ID：15774688
> 
> 赞同：7
> 
> 时间：2013-04-02T21:25:01.247
> 
> 标签：ios, objective-c

我正在开发一个需要检测用户位置的应用程序。

我需要提取用户的国家和城市代码。

我能够使用地标获取国家代码`locationManager: didUpdateToLocation: fromLocation:`，如下所示：

```
CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
    [geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {

        MKPlacemark * mark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];
        NSString * code = mark.countryCode;

        NSLog(@"country code: %@", code);

    }]; 
```

那么，是否有任何解决方案可以帮助我找到用户所在城市的[IATA 3 字母代码](http://www.nationsonline.org/oneworld/IATA_Codes/IATA_Code_D.htm)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T19:32:14.957

我建议您使用 OpenFlights 提供的数据库：http: [//openflights.org/data.html](http://openflights.org/data.html)（@Ben-G 间接链接）。

有一个有点“网络服务”的形式： http: [//openflights.org/html/apsearch](http://openflights.org/html/apsearch)但我认为考虑到数据库的大小（大约 9200 个条目），实际上最好将其导入应用程序并查询它直接，特别是如果你要查询很多（更多的查询......如果使用网络服务更多的流量，所以更多的延迟和降低的用户体验等）。

虽然我想知道为什么你不会根据用户的位置计算一个圆，然后在数据库中查询某个特定半径内的任何机场。这将为您提供下落的所有机场，显然还有城市和国家。如果主要由机场服务的城市与用户所在城市不对应，则获取给定用户所在城市的机场代码可能一无所获。

# firebase - 将动态子项添加到我的 Firebase 参考 URL

> ID：15774694
> 
> 赞同：2
> 
> 时间：2013-04-02T21:25:24.997
> 
> 标签：firebase

我一直在尝试将一个孩子动态添加到我的 firebase 数据引用 URL，但到目前为止没有运气。

假设我有以下数据结构：

MyApp
|-beta_signups
| -用户
|--fred
|----email "fred@test.com"

我希望能够根据“注册”部分下的电子邮件地址将注册的人添加为孩子。这是我尝试过的，但没有奏效。

```
var myDataRef = new Firebase("https://myapp.firebaseio.com/beta_signups/");
  $('#submit').click(function() {
      var email = $('#email').val();
      myDataRef.child(email).push({email: email, beta_key: false});
      $('#email').val('We got it.');
  }); 
```

关于如何动态添加孩子的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:58:14.877

您不能将电子邮件地址用作子路径的键，因为它包含无效字符。请参阅文档中的[创建参考](https://www.firebase.com/docs/creating-references.html)。

您还将基于电子邮件地址创建一个子电子邮件，然后使用`push`. 可能，您应该摆脱这个`.child(email)`位并使用 push 来创建记录。

```
var user_id = myDataRef.push({email: email, beta_key: false}).name(); 
```

首先要问的是您是否真的想通过电子邮件存储用户。通常，ID 会更有用（他们可能稍后会更改电子邮件，在这种情况下，您必须重新键入系统中的所有用户数据）。

如果这是一个要求，那么您将不得不对它们进行哈希处理或对其进行消毒。例如：

```
// replace all forbidden characters with something that won't appear in the email address
var key = email.replace(/[.$\[\]\/#]/, ','/);
myDataRef.child(key).set({email: email, beta_key: false}); 
```

# jquery - 每个动态行的jquery总计和小计仅计算第一行

> ID：15774698
> 
> 赞同：2
> 
> 时间：2013-04-02T21:25:48.110
> 
> 标签：jquery, asp.net-mvc, razor

我正在尝试构建一个动态网格样式计算器，以便用户可以建立某些东西的成本，他们可以根据需要添加尽可能多的行来捕获所有组件详细信息。我现在需要做的就是让我的 jQuery 也动态化，所以它会计算每一`Total`行`Line Total`添加的每一行。因为我现在有代码，它只适用于计算器的第一行

![计算器](https://i.stack.imgur.com/146bp.png)

```
$(document).ready(function () {
    $('.used-amount input[type="text"]')
           .on("propertychange, change, keyup, paste, input", function () {
        var usedtotal = $(this).val() * $('.used-cost input[type="text"]').val();
        $('.used-total').text(usedtotal);
    });

    $('.used-cost input[type="text"]')
           .on("propertychange, change, keyup, paste, input", function () {
        var usedtotal = $(this).val() * $('.used-amount input[type="text"]').val();
        $('.used-total').text(usedtotal);
    });

    $('.wastage-cost input[type="text"]')
           .on("propertychange, change, keyup, paste, input", function () {
        var usedtotal = $(this).val() * $('.wastage-amount input[type="text"]').val();
        $('.wastage-total').text(usedtotal);
    });

    $('.wastage-cost input[type="text"]')
           .on("propertychange, change, keyup, paste, input", function () {
        var usedtotal = $(this).val() * $('.wastage-amount input[type="text"]').val();
        $('.wastage-total').text(usedtotal);
    });

    $('.calculator input[type="text"]')
           .on("propertychange, change, keyup, paste, input", function () {
        var linetotal = 
            ($('.used-amount input[type="text"]').val()
          *  $('.used-cost input[type="text"]').val())
          + ($('.wastage-amount input[type="text"]').val()
          *  $('.wastage-cost input[type="text"]').val())
        $('.line-total').text(linetotal);
    });
}); 
```

每一行都是一个剃刀局部视图：

```
@model TheWorkshop.Web.Models.Edit.CalculatorViewModel

<tr class="calculator-detail">
  <td class="component-type">@Html.EnumDropDownListify("ComponentType", @Model.ComponentType)</td>
  <td class="component">@Html.DropDownListFor(model => model.SelectedComponentId, Model.ComponentSelectList, "Select...")</td>
  <td class="used-amount">@Html.EditorFor(model => model.UsedAmount)</td>
  <td class="used-cost">@Html.EditorFor(model => model.UsedCost)</td>
  <td class="used-total"></td>
  <td class="wastage-amount">@Html.EditorFor(model => model.WastageAmount)</td>
  <td class="wastage-cost">@Html.EditorFor(model => model.WastageCost)</td>
  <td class="wastage-total"></td>
  <td class="line-total"></td>
</tr> 
```

我在单击按钮时添加

```
$(document).ready(function ($) {
    $("button").click(function () {
        $.get('@Url.Action("AddCalculatorRow", "Workshop", 
                new { id = Model.Id } )', function (data) {
            $(data).hide().appendTo('.calculator tbody').fadeIn(2000);
        });
    });
}); 
```

和控制器

```
public ActionResult AddCalculatorRow()
{
    var components = Session.QueryOver<Component>()
                            .OrderBy(c => c.Name).Asc.List<Component>();
    var modelView = new CalculatorViewModel() { Components = components }; 

    return PartialView("_CalculatorRow", modelView);
} 
```

**编辑**
我已经得到了使用和成本总额以及浪费和成本总额。但似乎无法让 LineTotal 工作并遵循@JeffB 的评论，它现在看起来像这样：

```
$(document)
  .on("propertychange, change, keyup, paste, input",
      '.calculator input[type="text"]', function () {
         var linetotal = 
           ($(this).parent().siblings('.used-amount').find('input').val() *    
            $(this).parent().siblings('.used-cost').find('input').val())
         + ($(this).parent().siblings('.wastage-amount').find('input').val() * 
            $(this).parent().siblings('.wastage-cost').find('input').val());
         $(this).parent().siblings('.line-total').text(usedtotal);
      }); 
```

**编辑 2**
这将教我复制和粘贴...
上面代码中的错误是我已将所有 4 个单元格的总数分配给一个`linetotal`变量，但是在更新`line-total`单元格时 have `usedtotal`，这没什么！将其更改为 linetotal 变量已修复它，现在所有单元格都可以正确计算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:28:34.073

您正在使用 on() 的非委托版本，它不绑定到调用后添加的 UI 元素。尝试改变

```
$('.used-amount input[type="text"]')
       .on("propertychange, change, keyup, paste, input", function () {
    var usedtotal = $(this).val() * $('.used-cost input[type="text"]').val();
    $('.used-total').text(usedtotal);
}); 
```

到

```
$(document)
       .on("propertychange, change, keyup, paste, input", 
           '.used-amount input[type="text"]', function () {
    var usedtotal = $(this).val() * $('.used-cost input[type="text"]').val();
    $('.used-total').text(usedtotal);
}); 
```

有关更多信息，请参阅中的直接**和委托事件部分**

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# windows - 批处理文件 - 远程复制和执行问题

> ID：15774701
> 
> 赞同：1
> 
> 时间：2013-04-02T21:26:00.483
> 
> 标签：windows, vbscript, batch-file, psexec

我有一个批处理文件，其中一部分将文件夹及其内容复制到本地目录，然后继续执行批处理过程，然后尝试执行该文件夹的内容。在本地运行它适用于所有 wintel 操作系统并将文件从 \networkshare\folder*.* 复制到 %systemdrive%\temp\ 。

我曾尝试使用例如 psexec @serverlist.txt -c batfile.bat -s -f -d 来复制文件，然后远程执行它，但问题是远程运行时不会复制文件。我认为这是远程执行批处理文件后的身份验证问题，远程系统将不允许我访问/验证网络共享

我试过 xcopy 、 copy 、 robocopy 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:14:45.903

AFAIK 您只能使用隐式凭据对下一个跃点进行身份验证。即使您的用户具有所需的权限，从第一个跃点到第二个跃点的连接尝试也会失败。参见例如[here](http://www.ravichaganti.com/blog/?p=1230)以获得解释。

试试这个：

```
psexec @serverlist.txt -u %USERDOMAIN%\%USERNAME% -d -c batfile.bat 
```

使用显式凭据，以便您针对远程主机进行身份验证。这样，第二跳将成为您经过身份验证的会话的下一跳。不要将脚本作为 LOCAL SYSTEM ( `-s`) 运行，因为该帐户仅限于本地资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:06:38.250

我过去有过这个问题。如果可以的话，不要尝试复制/运行 BAT 文件，只需从 UNC 路径运行脚本即可。我认为问题在于 BAT 文件实际上无法像您想象的那样通过 PSEXEC 运行和复制。它是否提供退出代码？

这是我不久前用来安装 Adob​​e 阅读器的示例。我试图通过一个批处理文件来做，但没有骰子。无论我是否复制它，我都无法让它在批处理文件中运行。我不记得确切的原因，我认为它与在系统中调用批处理文件并在某种本地上下文中运行的方式有关。不要引用我的话，因为我不记得确切的原因。

这是我的代码示例：

```
psexec /accepteula \\%computer% -s cmd /c msiexec /i "\\UNC\Software\adobe\Adobe Reader 7.0.9.msi" TRANSFORMS="acrobat7.mst" /qn
```

# git - 在不提交的情况下应用多个存储

> ID：15774704
> 
> 赞同：0
> 
> 时间：2013-04-02T21:26:04.263
> 
> 标签：git, git-stash

无论如何，是否可以在我当前签出的分支中应用各种存储，而无需在此过程中进行提交（并最终重置 HEAD）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:46:31.787

没有诀窍：只需一个接一个地应用存储。

如果您的存储在堆栈中正确排序，您只需执行以下操作：

```
git stash apply
git stash drop 
```

重复此操作，直到应用所需的所有存储。您无需在申请和申请之间进行承诺。如果你想节省时间，可以使用更好的命令：而不是 first`apply`然后`drop`你可以只是`pop`stash

```
git stash pop 
```

如果存储的顺序不正确，则在命令中指定要应用或删除的存储：

```
git stash apply <stash>
git stash drop <stash> 
```

或者

```
git stash pop <stash> 
```

如果您的 stash apply 出现合并错误，则意味着您不允许应用此 stash。因此，在这种情况下**，您在提交更改之前无法应用它**。它可能很丑陋，但它就是它的工作原理。

# python - Python可以执行矢量化操作吗？

> ID：15774705
> 
> 赞同：2
> 
> 时间：2013-04-02T21:26:04.780
> 
> 标签：python, numpy, scipy

我想在 Python 中实现以下 Matlab 代码：

```
x=1:100;
y=20*log10(x); 
```

我尝试使用 Numpy 来做到这一点：

```
y = numpy.zeros(x.shape)
for i in range(len(x)):
    y[i] = 20*math.log10(x[i]) 
```

但这使用了一个 for 循环；有没有像在 Matlab 中那样做矢量化操作？我知道对于一些简单的数学运算，例如除法和乘法，这是可能的。但是这里的对数等其他更复杂的操作呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:28:16.910

```
y = numpy.log10(numpy.arange(1, 101)) * 20 
```

* * *

```
In [30]: numpy.arange(1, 10)
Out[30]: array([1, 2, 3, 4, 5, 6, 7, 8, 9])

In [31]: numpy.log10(numpy.arange(1, 10))
Out[31]:
array([ 0\.        ,  0.30103   ,  0.47712125,  0.60205999,  0.69897   ,
        0.77815125,  0.84509804,  0.90308999,  0.95424251])

In [32]: numpy.log10(numpy.arange(1, 10)) * 20
Out[32]:
array([  0\.        ,   6.02059991,   9.54242509,  12.04119983,
        13.97940009,  15.56302501,  16.9019608 ,  18.06179974,  19.08485019]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:29:07.780

是的，当然有。

```
x = numpy.arange(1, 100)
y = 20 * numpy.log10(x) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T21:31:44.850

Numpy 有很多内置的数组运算符，例如[log10](http://docs.scipy.org/doc/numpy/reference/generated/numpy.log10.html)。如果它没有在 numpy 的文档中列出，并且您无法通过组合内置方法生成它，那么就没有简单的方法可以有效地做到这一点。您可以实现一个 C 级函数来处理 numpy 数组并对其进行编译，但这比一两行 Python 代码要多得多。

对于您的情况，您几乎已经有了正确的输出：

```
y = 20*numpy.log10(x) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T21:32:35.853

您可能想查看 Numpy 文档。这是一个很好的起点：

[http://docs.scipy.org/doc/numpy/reference/routines.html](http://docs.scipy.org/doc/numpy/reference/routines.html)

特别与您的问题有关：

[http://docs.scipy.org/doc/numpy/reference/routines.math.html](http://docs.scipy.org/doc/numpy/reference/routines.math.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T21:46:43.327

如果你不想做任何复杂的事情，如果我没记错的话，原始代码也可以这样实现，而不需要使用 numpy。

```
>>> import math
>>> x = range(1, 101)
>>> y = [ 20 * math.log10(z) for z in x ] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-02T08:33:08.140

除了使用 numpy 标准向量化函数执行向量化操作外，您还可以使用 [numpy.vectorize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)制作自定义向量化函数。这是一个例子：

```
 >>> def myfunc(a, b):
    ...     "Return a-b if a>b, otherwise return a+b"
    ...     if a > b:
    ...         return a - b
    ...     else:
    ...         return a + b
    >>>
    >>> vfunc = np.vectorize(myfunc)
    >>> vfunc([1, 2, 3, 4], 2)
    array([3, 4, 1, 2]) 
```

# php - Javascript Onchange 格式化

> ID：15774708
> 
> 赞同：0
> 
> 时间：2013-04-02T21:26:14.640
> 
> 标签：php, javascript, html

如何在以下 onchange 中放置 2 个选项？

这意味着我希望它的结尾是这样的：`Select(select_2,'divShow',1-2);`

所以下拉菜单中的第一个或第二个选项都会触发 JS

```
 onchange="opConfig.reloadPrice();Select(select_2,'divShow',2); 
```

Lee 要求的 HTML 请注意，ID 都是由 magento 生成的，因此增加了一点难度。

```
 <select name="options[7]" id="select_7" class=" required-entry product-custom-option" title=""
onchange="opConfig.reloadPrice();Select(select_7,'divShow',2);">
<option value="" >-- Please Select --</option>
<option value="18" >No </option>
<option value="19" >Yes </option></select> 
```

Javascript

```
 <script type="text/javascript">
function Select(sel,id,nu){
document.getElementById(id).style.display=sel.selectedIndex==nu?'block':'none';
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:53:37.990

更安全的方法如下。

```
var eventListener = function(el, type, listener) {
    if(el.addEventListener) {
        el.addEventListener(type, listener, false);
    } else if(el.attatchEvent) {
        el.attatchEvent("on"+type, listener);
    } else {
        el["on"+type] = listener;
    }
};

var element = document.getElementById("el-ID"); //some kind of reference to your element

eventListener(element, "change", function() {
    opConfig.reloadPrice();
    Select(select_2,'divShow',2);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:29:18.067

我让它工作:) 我做了以下更改。

```
 <script type="text/javascript">
function Select(sel,id,nu){
document.getElementById(id).style.display=sel.selectedIndex!==nu?'block':'none';
}
</script> 
```

和

```
 onchange="opConfig.reloadPrice();Select(select_2,'divShow',0); 
```

# android - Google Play Android 订阅何时真正自动续订？

> ID：15774709
> 
> 赞同：5
> 
> 时间：2013-04-02T21:26:22.453
> 
> 标签：android, google-play, subscription

在 iOS 平台上，自动续订应用内订阅会在到期前 24 小时续订。

自动续订应用内订阅在 Android 上续订的等效时间是多少？我在到期后 24 小时内有一些订阅，但它们似乎没有续订/续订。在到期后 24 小时内，我有超过 200 个应用内订阅，但当我通过 Google 重新验证时，似乎没有一个订阅具有延长的到期日期。在这个数量的样本中，我的用户保留率实际上不太可能是 0%。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:10:03.703

看起来他们在[文档](http://developer.android.com/google/play/billing/billing_subscriptions.html)中相当模糊：

> 每月 - Google Play 在购买时和购买日期之后的每月向客户的 Google Checkout 帐户收费（确切的结算间隔可能会随着时间的推移而略有不同）

我觉得这意味着他们会尽量接近原始计费时间，尽管我不能确定。

# jquery - 如何使用 MVC3 在自动完成文本框中显示加载图像（动画 .gif 文件）

> ID：15774710
> 
> 赞同：5
> 
> 时间：2013-04-02T21:26:22.773
> 
> 标签：jquery, asp.net-mvc-3

我已经在我的 asp.net MVC3 应用程序中实现了自动完成文本框，但是在搜索期间我无法在文本框中显示加载图像。我的代码是

> **Javascript**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">

$(document).ready(function () {
    $("#txtPONO").autocomplete({
        source: "/Transection/GetPONO",
        minLength: 2,
        select: function (event, ui) {
            $("#hdnPurContID").val(ui.item.id);
        }
    });
});

</script> 
```

> **看法**

```
<div style="float: left; padding: 9px 5px 5px 5px; width: 80px; vertical-align: middle"
                                class="fieldHead">
                                Enter @Html.LabelFor(l => l.PurchaseContract.AOPLPONO)
                            </div>
                            <div style="float: left; width: 200px; padding: 5px 0px 5px 0px;">
                                @Html.TextBoxFor(m => m.PurchaseContract.AOPLPONO, new { @id = "txtPONO", @class = "textbox", @style = "width:100%" })
                            </div>
                            <div style="float: left; width: 50px; padding: 4px 0px 0px 5px;">
                                <img alt="search" src="../../Content/images/Search.png" />
                                @Html.HiddenFor(model => model.PurchaseContract.PurContID, new { @id = "hdnPurContID" })
                            </div> 
```

我想在右侧的文本框中显示一个小的加载图像

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T04:59:30.603

像这样添加一个css类。

```
.loading
{
    background:url('path to your image') no-repeat right center;
} 
```

现在触发搜索选项并打开自动完成选项

```
$("#txtPONO").autocomplete({
        source: "/Transection/GetPONO",
        minLength: 2,
        select: function (event, ui) {
            $("#hdnPurContID").val(ui.item.id);
        },
        search: function(){$(this).addClass('loading');},
        open: function(){$(this).removeClass('loading');}

    }); 
```

或者

更好的解决方案就是使用 css 类

```
.ui-autocomplete-loading { background:url('img/loading.gif') no-repeat right center } 
```

jQuery`ui-autocomplete-loading`在加载期间自动运行加载图像

希望能帮助到你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T13:41:31.383

你可以这样做-

```
.loadinggif {
    background:url('http://www.hsi.com.hk/HSI-Net/pages/images/en/share/ajax-loader.gif') no-repeat right center;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<input id='inputsource' />
<br>
<button onclick="$('#inputsource').addClass('loadinggif');">Show Loading</button>
<br>
<button onclick="$('#inputsource').removeClass('loadinggif');">Hide Loading</button>
```

# watir - 使用 watir-webdriver 加载带有扩展名的 chrome 会出现超时错误

> ID：15774711
> 
> 赞同：0
> 
> 时间：2013-04-02T21:26:25.050
> 
> 标签：watir, watir-webdriver, selenium-chromedriver

我在 chrome 中安装了 HTML Tidy 扩展。

当我做：

```
b = Watir::Browser.new :chrome 
```

Chrome 浏览器打开但没有扩展。

所以我使用了以下内容：

```
b = Watir::Browser.new (:chrome, :switches => %w[--load-extension=
"C:\Users\.....\AppData\Local\Google\Chrome\UserData\Default\Extensions\gljdonhfjnfdklljmfaabfpjlonflfnm"]) 
```

这将打开带有扩展程序的 Chrome 浏览器

但几秒钟后它给了我错误：

> [0402/141412:ERROR:proxy_launcher.cc(551)] 未能等待测试通道存在。test\automation\proxy_launcher.cc(477)：错误：值：automation_proxy_.get()
> 
> 实际：false 预期：true Timeout::Error: Timeout::Error

我进行了搜索，它看起来像一个 chromedriver 错误。

我正在使用 Chromedriver 版本：26.0.1383.0

有没有人遇到过这个问题？如果有可用的，有人可以建议解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:56:50.007

Ruby 库[Nokogiri 可以检查格式正确的标记](http://nokogiri.org/tutorials/ensuring_well_formed_markup.html)。然后你不依赖浏览器的东西。您可以从 Watir-Webdriver 捕获 html。或者您可以从[net/http](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html)捕获它。

```
require "net/http"
require "uri"
require "nokogiri"

uri = URI.parse("http://www.google.com")
response = Net::HTTP.get_response(uri)
puts parse_body(response.body)

def parse_body(response)
  begin
    return Nokogiri::XML(response) { |config| config.strict }
  rescue Nokogiri::XML::SyntaxError => e
    return "caught exception: #{e}"
  end
end 
```

# ajax - Meteor.http.call 客户端结果未定义

> ID：15774714
> 
> 赞同：1
> 
> 时间：2013-04-02T21:26:36.307
> 
> 标签：ajax, meteor

使用 Mashape Airbnb API：

以下内容位于 Clients->airbnb.js 文件中。我的结果未定义。但是使用相同的 API，[http://jsfiddle.net/ismaelc/FZ5vG/](http://jsfiddle.net/ismaelc/FZ5vG/) 工作得很好。

```
 function getListings(place) {
  alert(place);
  Meteor.http.call("GET", "https://airbnb.p.mashape.com/s",
                  {params : {location:place},
                  headers : {"X-Mashape-Authorization":"ffnGO1suGtJEjqgz4n7ykeuCbDP1hexv"}},
                  function (error, result) {
                    $('#listings').html(EJSON.stringify(result.data));
                    console.log("Status: "+result.statusCode);
                    console.log("Content: "+result.statusCode);
                    console.log("data: "+EJSON.stringify(result.data));
                    console.log("error: "+error.message);
                  }
                );
}

Template.where.events ({
    'click #find': function(event){
      var place = $('#location').val();
      getListings(place);
    }
  }); 
```

我的 Google Chrome Web Developers Tool 给了我奇怪的 HTTP 响应。IMG：这里[http://imgur.com/f5u2C7X](http://imgur.com/f5u2C7X)

此外，我暂时看到了我的 console.log，然后它就消失了。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:29:37.020

您可以使用 chrome 开发工具包中的网络选项卡，确保在您发出请求之前它已经打开，并且它应该只是添加，您可以查看其文本内容以找出哪里出了问题。

![在此处输入图像描述](https://i.stack.imgur.com/5iGdC.png)

响应选项卡应该有它返回的文本：

![在此处输入图像描述](https://i.stack.imgur.com/5t6Yp.png)

值得注意的是，只需检查您可能需要使用`params`（HTTP POST 参数）而不是`data`（正文中的 JSON 帖子）的 api，例如`{params : {location:place}`.

# c# - 在 C# 或 C++ 中使用 alpha 通道进行视频处理/播放

> ID：15774723
> 
> 赞同：2
> 
> 时间：2013-04-02T21:27:09.540
> 
> 标签：c#, c++, .net, ffmpeg, video-processing

## 我在追求什么

我一直在探索最好的方法来做到这一点，但在尝试播放视频然后用 alpha 通道 (ARGB) 抓取帧以进行进一步操作时似乎一直遇到问题。

我已经准备好一切，`AForge`然后发现 Alpha 在此过程中被剥离了。我考虑`OpenCV`过，但它`Emgu CV`有一个我不能使用的不同许可证，我也无法验证它是否也`OpenCV`可以读取 Alpha 通道。

我调查了`FFMPEG .NET wrappers`，但没有发现任何超出 alpha 阶段或有我可以使用它们的许可证（因为这可以用于商业目的并且不能开源）

所以我正在寻找一个最好是 C# 或 C++ 的库，它可以播放 .MOV 或 .AVI，同时在我将其制作成`Bitmap`.

## 摘要 [TL;DR]

我正在寻找库/示例代码

*   最好用 C# 编写，C++ 作为后备。希望足够容易使用。
*   可以播放`AVI`和`MOV`文件
*   将保留 Alpha 通道
*   将允许我直接访问每一帧的 ARGB 值
*   最好是使用的东西，`FFMPEG library`因为它能够读取我需要的大多数格式

# iphone - 如何在 MFMailComposeViewController 中更改邮件详细信息（电子邮件正文）？

> ID：15774733
> 
> 赞同：0
> 
> 时间：2013-04-02T21:27:57.757
> 
> 标签：iphone, ios6, nsuserdefaults, mfmailcomposeviewcontroller, xcode4.6

我似乎对某些事情不以为然，看起来应该很简单！

我现在如何使用用户在 NSUserDefaults 中输入的字符串填充电子邮件的正文？

基本上，还有一个按钮可以在 NSUserDetaults 中输入诸如“YES”之类的刺痛信息。如何使电子邮件正文存储那些字符串。

这是我目前拥有的代码：

```
- (IBAction)buttonPressed:(id)sender {
MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[controller setSubject:@"SYS"];
[controller setMessageBody:@"How do I make this the content of NSUSERDEFAULTS?" isHTML:NO];
controller.navigationBar.barStyle = UIBarStyleBlack;
[self presentViewController:controller animated:YES completion:nil]; 
```

任何帮助将不胜感激！

谢谢！

使用您的代码，字符串显示为：是，否，也许，没办法，

如何更改格式以使它们出现

是的，

不，

也许，

没门。

感谢你的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:35:54.277

你想要的是一个换行符，可以用`\n`（换行符）来实现。

```
NSArray *storedStrings = [[NSUserDefaults standardUserDefaults] objectForKey:@"yourStoredKey"];
NSMutableString *messageBody = [NSMutableString string];
for (NSString *aString in storedStrings) {
    [messageBody appendFormat:@"%@,\n\n", aString];
}
[messageBody deleteCharactersInRange:NSMakeRange(messageBody.length-3, 3)];
[controller setMessageBody:messageBody isHTML:NO]; 
```

我在 for 循环之后添加的那一行将从字符串中删除最后三个字符，即两个换行符和逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:20:18.170

试试这个方法

```
- (IBAction)buttonPressed:(id)sender {
MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[controller setSubject:@"SYS"];
[controller setMessageBody:[[nsstring stringwithformat@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"yourStoredKey"]]  isHTML:NO];
controller.navigationBar.barStyle = UIBarStyleBlack;
[self presentViewController:controller animated:YES completion:nil]; 
```

# java - 全屏方向更改android

> ID：15774734
> 
> 赞同：0
> 
> 时间：2013-04-02T21:28:04.727
> 
> 标签：java, android

我有这段代码可以将视图设置为全屏。我想做的是在方向更改为横向时将视图设置为全屏。我已经尝试了许多不同的解决方案，但无法正常工作，任何帮助将不胜感激。

```
public class FullScreen extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:00:28.577

这是 yarian 建议的代码：

```
public class FullScreen extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
    }
} 
```

这可能是最好的解决方案。

# ember.js - Emberjs 模板未显示

> ID：15774743
> 
> 赞同：1
> 
> 时间：2013-04-02T21:28:34.527
> 
> 标签：ember.js

我通过更新语法解决了几个路由器问题

我有以下路由器

```
App.Router.map ->
  this.route('teams', {path: '/'}) 
```

应用程序模板确实呈现

但里面是一个没有得到团队模板的出口

```
Ember.TEMPLATES["teams"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};

  return "<h1>I AM A TEST</h1>";
  }); 
```

给定我的路由器该模板应该正确呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:13:42.910

是的，鉴于该路由器并假设`{{outlet}}`您的应用程序模板中有一个团队模板应该呈现。

我根据您的代码创建了一个[jsfiddle ，在那里您可以看到团队模板正确呈现。](http://jsfiddle.net/VBT9H/)

```
App = Ember.Application.create({});

App.Router.map(function() {
  return this.route('teams', {path: '/'});
});

Ember.TEMPLATES["application"] = Ember.Handlebars.compile("<h1>APP TEMPLATE</h1><hr/>{{outlet}}");

Ember.TEMPLATES["teams"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
  helpers = helpers || Handlebars.helpers; data = data || {};
  return "<h1>I AM A TEST</h1>";
}); 
```

不得不猜测应用程序模板中的内容。

# django - 使用自定义模板标签时出错 - 对象不支持项目分配

> ID：15774760
> 
> 赞同：3
> 
> 时间：2013-04-02T21:29:44.250
> 
> 标签：django, django-templates

我正在尝试创建自己的模板标签。我是如何做到的：

文件夹结构：

```
my_app/
    __init__.py
    models.py
    views.py
    my_app/
        templates/
            show.html
    templatetags/
            __init__.py
            depos.py 
```

仓库.py：

```
# coding: utf-8
from django import template
from core.models import Depos

register = template.Library()

@register.inclusion_tag('show.html')
def show_dep():
    dep = Depos.objects.all().order_by('?')[0]
    return dep 
```

显示.html：

```
<div id="user_testimonial">
    <blockquote>
        <p>{{ dep.dep }}</p>
        <cite>{{ dep.name }}, {{ dep.from }}</cite>
    </blockquote>
</div> 
```

在我的模板中：

```
{% load depos %}
{% show_dep %} 
```

但我有这个错误：

```
TypeError at /cadastro  
'Depos' object does not support item assignment 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T21:38:55.580

您需要将字典对象从包含标签传递到包含标签模板。[它在文档中提到](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)：

> 首先，定义接受参数并为结果生成数据字典的函数。这里重要的一点是我们只需要返回一个字典，而不是更复杂的东西。

所以试试：

```
@register.inclusion_tag('show.html')
def show_dep():
    return {
        'dep' : Depos.objects.all().order_by('?')[0]
    } 
```

# cordova - phonegap android状态栏通知示例

> ID：15774771
> 
> 赞同：1
> 
> 时间：2013-04-02T21:30:14.550
> 
> 标签：cordova

我对phonegap很陌生，我发现了这个状态栏通知示例：

[http://manijshrestha.wordpress.com/2012/11/23/implementing-android-status-bar-notification-in-phonegapcordova-app/#comment-397](http://manijshrestha.wordpress.com/2012/11/23/implementing-android-status-bar-notification-in-phonegapcordova-app/#comment-397)

[https://github.com/manijshrestha/PhonegapStatusNotificationDemo](https://github.com/manijshrestha/PhonegapStatusNotificationDemo)

我正在使用[https://build.phonegap.com](https://build.phonegap.com)服务来在我的 android 设备中构建和部署它。

但是当我在我的设备上安装应用程序时，在 index.html 中我点击通知按钮没有任何反应..

我必须上传的文件到底是什么？只要

www 压缩文件夹？

我已经尝试了几种方法，但我无法让它工作..请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:46:46.633

首先确保 Phonegap 构建支持您的插件。如果不是，您必须自己构建/编译它。设置起来并不难。

# java - 嵌套的静态类方法不能被外部类访问？

> ID：15774772
> 
> 赞同：-1
> 
> 时间：2013-04-02T21:30:19.140
> 
> 标签：java, nested-class

我创建了一个这样的嵌套静态类：

```
public class OuterClass {

  public static class NestedClass {
    public static String getName() {
      //Some stuff
      return "Name";
    }
  }

  //Now am not able to call the method *getName()* inside *OuterClass*
  NestedClass.getName(); //Compile complains here
} 
```

但我可以从另一个班级做到这一点

```
public class TestOuterClass {
  public void testName() {
    OuterClass.NestedClass.getName();
  }
} 
```

我不明白为什么它在定义的类中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:32:05.940

放置`NestedClass.getName();`在方法中，例如`main`.

这可以正确编译并运行：

```
public class OuterClass {

  public static class NestedClass {
    public static String getName() {
      //Some stuff
      return "Name";
    }
  }

  public static void main(String[] args)
  {
      System.out.println(NestedClass.getName());
  }
} 
```

输出：

```
$ javac OuterClass.java
$ java OuterClass
Name
$ 
```

# hibernate - 将数据库的数据复制到另一个数据库的休眠方式

> ID：15774773
> 
> 赞同：1
> 
> 时间：2013-04-02T21:30:24.100
> 
> 标签：hibernate

hibernate 有什么方法可以获取实际的底层 JDBC 连接来创建一个新的数据库，然后将所有数据从现有的“模板”数据库复制到新的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:40:14.900

像这样的东西：

```
public boolean syncronize(Class hibernateClass, Session from, Session to) throws HibernateException
    {
            Transaction transaction = to.beginTransaction();
            List newData = from.createCriteria(hibernateClass).list();
            for (Iterator iter = newData.iterator(); iter.hasNext();)
                {
                    Object element = (Object) iter.next();
                    from.evict(element);
                    to.replicate(element,ReplicationMode.OVERWRITE);
                }
            transaction.commit();
     } 
```

# dependency-injection - Bower 和 AMD 模块

> ID：15774775
> 
> 赞同：3
> 
> 时间：2013-04-02T21:30:25.517
> 
> 标签：dependency-injection, requirejs, amd, gruntjs, bower

## 案子

我正在尝试建立一个大型 javascript 项目的最方便的解决方案。

要求是：

1.  模块化 javascript：如有必要，仅在全局命名空间中使用一个对象
2.  与凉亭组件兼容
3.  与 grunt 兼容：由 grunt 完成构建和部署（**contrib-usemin**或**contrib-requirejs**）

令我惊讶的是，这被证明是一项不平凡的任务。使用 AMD 时遇到以下问题：

1.  加载凉亭组件并不总是容易完成。例如，如果不修改源，就无法使用 AMD 加载 Raphael。在使用 bower 时，这确实不是一个选项，因为我只将依赖项列表推送到 git。另外：加载不支持 AMD 的 javascript 库，可以填充，但包含多个文件（如 jquery-ui）是有问题的；我需要一起破解它。
2.  De requirejs 优化器将所有内容构建到一个文件中，不允许将库与站点脚本分开。做一些看起来很理智的事情。

当我不使用 AMD 时，我遇到了其他问题：

1.  如何控制大型项目中的依赖关系？

## 一个可能的解决方案

所以我正在考虑一个解决方案：

1.  保持便携，不要将 AMD 强加给未来的用户
2.  防止全局命名空间混乱
3.  保持与凉亭兼容
4.  允许**usemin在****grunt**中构建整个批次

 **它将由一个小脚本组成，定义一个`require( <deps>, <factory> )`和一个 `define( , , ) 函数，该函数实现基本的模块定义和注入。它不会实现任何**异步加载**或对具有不匹配依赖项的脚本进行排队！

此外，我将使用命名模块模式而不是使用匿名模块来定义任何模块。即使这会牺牲最小的可移植性。

现在我可以结合手动加载使用**requirejs**或那个微小的**依赖注入器。**`<script src=""></script>`使用后一个选项时，我仍然需要使用以下方式注册加载的非 amd 库：

```
define( 'raphael', [], function() { return Raphael; }) 
```

你怎么看？我在做一些理智的事情吗？重新发明轮子？不必要的复杂？

## 更新

我想我可以使用**杏仁**（[https://github.com/jrburke/almond](https://github.com/jrburke/almond)）来完成上述目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T07:33:08.327

> 加载凉亭组件并不总是容易完成。例如 Raphael 不能在不修改源的情况下使用 AMD 加载

您可以使用 requirejs 中的 shim 配置来加载通常不可加载的 AMD 模块。（或者拉斐尔是一个真正的特例？）

> De requirejs 优化器将所有内容构建到一个文件中，不允许将库与站点脚本分开。做一些看起来很理智的事情。

那不是真的恕我直言。阅读[http://requirejs.org/docs/optimization.html#wholemultipage](http://requirejs.org/docs/optimization.html#wholemultipage)**

# php - PHP 操作没有日期的时间

> ID：15774776
> 
> 赞同：0
> 
> 时间：2013-04-02T21:30:31.657
> 
> 标签：php, timestamp

我正在开发一个日历应用程序，其中时间很重要，但日期和年份不重要。员工可以输入他们可用的时间（例如，上午 8:00 - 上午 9:30），然后我会根据其他值进行检查。

我正在使用 strtotime() 将时间放入数据库，没有意识到如果没有提供日期和年份，该函数会插入日期和年份。当我开始将员工的可用性与某个时间段进行比较时，我没有找到任何匹配项，因为所有员工的时间戳都表示他们昨天很忙。:P

有没有一种在数据库中存储时间的好方法，可以很容易地在 SQL 和 PHP 中比较它们？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:38:25.943

您正在寻找 mySQL[时间](http://dev.mysql.com/doc/refman/5.6/en/time.html)数据类型。[http://dev.mysql.com/doc/refman/5.6/en/time.html](http://dev.mysql.com/doc/refman/5.6/en/time.html)

Microsoft SQL Server(2008/2012) 也为您提供[时间](http://msdn.microsoft.com/en-us/library/bb677243.aspx)数据类型。[http://msdn.microsoft.com/en-us/library/bb677243.aspx](http://msdn.microsoft.com/en-us/library/bb677243.aspx)

两者都使您能够以“HH:MM:SS”格式存储时间。它们具有可比性。（对于 MS SQL，您的范围为 00:00:00.0000000 到 23:59:59.9999999）

如果您不能使用内置数据类型，您可以编写几个函数来从 hh:mm 转换为 int 并再次转换回来。

```
function HourMinuteSecToDecimal($hour_minute_sec) {
        $t = explode(':', $hour_minute_sec);
        return $t[0] * 60 + $t[1] * 60 + $t[2];
}

echo HourMinuteSecToDecimal("23:30:25");
return 3205

function DecimaltoHourMinuteSec($sec, $padHours = false) {
    $hms = "";
    $hours = intval(intval($sec) / 3600);
    $hms .= ($padHours) ? str_pad($hours, 2, "0", STR_PAD_LEFT) . ':' : $hours . ':';
    $minutes = intval(($sec / 60) % 60);
    $hms .= str_pad($minutes, 2, "0", STR_PAD_LEFT) . ':';
    $seconds = intval($sec % 60);
    $hms .= str_pad($seconds, 2, "0", STR_PAD_LEFT);
    echo $hms;
}

echo DecimaltoHourMinuteSec(3205);
return 23:30:25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:44:01.583

好吧，我在这里看到两种方法：

1：将您的时间戳保存为时间戳，然后修改您的查询，以便您从时间戳中选择时间。

2：使用字符串字段并以 hhmm 格式保存您的时间（例如，0112 是凌晨 1 点 12 分钟或 1547 是下午 3 点 47 分钟），然后使用您的选择。我知道，看起来不太好，但话又说回来：如果您使用 mysql 数据库并使用时间作为数据类型 - 它也将是一个格式化字符串。

# javascript - KineticJS 删除和添加图层

> ID：15774780
> 
> 赞同：0
> 
> 时间：2013-04-02T21:30:43.043
> 
> 标签：javascript, canvas, kineticjs

我觉得我非常愚蠢，但由于某种原因，我无法解决这个问题。

我想要 3 个单独的图层，每个图层上可以有多个对象/形状，然后单击我希望删除或隐藏可见图层并显示下一个图层。

我认为我的问题是在逻辑中死去并调用函数。这是函数和jsfiddle：

```
var version = 0;    
function layerVersion() {
  if (version === 1) {
    stage.add(layerBlue);
    layerBlue.on('click', function() {
      layerOrange.hide;
      version = 2;
    });
  } else if (version === 2) {
    stage.add(layerOrange);
  } else {
    stage.add(layerPink);
    layerpink.on('click', function() {
      layerPink.hide;
      version = 1;
    });
  }
} 
```

这是 jsFiddle 链接：http: [//jsfiddle.net/TJ96r/2/](http://jsfiddle.net/TJ96r/2/)

任何帮助将不胜感激，因为无法弄清楚我感到很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:13:14.417

看一下这个。 [http://jsfiddle.net/TJ96r/3/](http://jsfiddle.net/TJ96r/3/)

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 300,
    height: 300
});
var layerPink = new Kinetic.Layer();
layerPink.hide();
var layerBlue = new Kinetic.Layer();
var layerOrange = new Kinetic.Layer();
layerOrange.hide();

  // pink box
  var pink = new Kinetic.Rect({
    x: 50,
    y: 50,
    width: 100,
    height: 100,
    fill: 'pink',
    stroke: 'black',
    strokeWidth: 2
  });
  // blue box
  var blue = new Kinetic.Rect({
    x: 100,
    y: 100,
    width: 100,
    height: 100,
    fill: 'blue',
    stroke: 'black',
    strokeWidth: 2
  });
  // orange box
  var orange = new Kinetic.Rect({
    x: 150,
    y: 150,
    width: 100,
    height: 100,
    fill: 'orange',
    stroke: 'black',
    strokeWidth: 2
  });

  layerPink.add(pink);
  layerBlue.add(blue);
  layerOrange.add(orange);

  var version = 0;
      stage.add(layerBlue);
      stage.add(layerOrange);
      stage.add(layerPink);

layerBlue.on('click', function() {
        layerBlue.hide();
        layerOrange.show();
        layerPink.hide();
    stage.draw();
      });
layerOrange.on('click', function() {
        layerBlue.hide();
        layerOrange.hide();
        layerPink.show();
    stage.draw();
      });
layerPink.on('click', function() {
        layerPink.hide();
        layerOrange.hide();
        layerBlue.show();
    stage.draw();
      }); 
```

# asp.net-mvc - 上传文件：MemoryStream 与文件系统

> ID：15774784
> 
> 赞同：6
> 
> 时间：2013-04-02T21:30:50.497
> 
> 标签：asp.net-mvc, file-upload

在我正在创建的商业应用程序中，我们允许管理员上传包含某些数据的 CSV 文件，这些数据会被解析并输入我们的数据库（正在发生所有适当的错误处理等）。

作为升级到 .NET 4.5 的一部分，我不得不更新这段代码的一些方面，并且在我这样做的同时，我遇到了一个使用 MemoryStream 处理上传文件而不是临时保存到的人的[答案](https://stackoverflow.com/a/7163720/132528)文件系统。我没有真正的理由去改变（也许它甚至是不好的），但我想试一试来学习一下。因此，我迅速换掉了这段代码（由于上传了其他元数据，从强类型模型中）：

```
HttpPostedFileBase file = model.File;
var fileName = Path.GetFileName(file.FileName);
var path = Path.Combine(Server.MapPath("~/App_Data/Uploads"), fileName);
file.SaveAs(path);

CsvParser csvParser = new CsvParser();
Product product = csvParser.Parse(path);

this.repository.Insert(product);
this.repository.Save();

return View("Details", product); 
```

对此：

```
using (MemoryStream memoryStream = new MemoryStream())
{
    model.File.InputStream.CopyTo(memoryStream);

    CsvParser csvParser = new CsvParser();
    Product product = csvParser.Parse(memoryStream);

    this.repository.Insert(product);
    this.repository.Save();

    return View("Details", product);
} 
```

不幸的是，当我这样做时，事情就中断了——我的所有数据都带有空值，而且 MemoryStream 中似乎实际上没有任何内容（尽管我对此并不积极）。我知道这可能是一个很长的镜头，但是有什么明显的东西我在这里遗漏了，或者我可以做些什么来更好地调试它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:40:57.700

您需要添加以下内容：

```
model.File.InputStream.CopyTo(memoryStream);
memoryStream.Position = 0;

...

Product product = csvParser.Parse(memoryStream); 
```

当您将文件复制到 MemoryStream 中时，指针将移动到流的末尾，因此当您尝试读取它时，您将得到一个空字节而不是流数据。您只需要将位置重置为起点，即 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:41:40.867

我相信的问题是你的 memoryStream 的位置设置到最后，我猜你的 CSVParser 只是从那一点开始处理，没有数据。

要解决此问题，您只需在使用 csvParser 解析它之前将 memoryStream 位置设置为 0。

```
memoryStream.Position = 0; 
```

# jquery - jQuery Validate 插件不会删除错误消息

> ID：15774792
> 
> 赞同：3
> 
> 时间：2013-04-02T21:31:16.683
> 
> 标签：jquery, forms, jquery-validate

我“再次”询问 jQuery Validate 插件...

现在，我的问题是错误标签不会隐藏，直到我单击一次提交按钮并且需要第二次单击才能提交​​表单，知道吗？如果我的输入文本有效，我需要的是隐藏错误标签。

jQuery：

```
$("#form").validate({
            rules: {
                "name": {
                    required: true,
                    minlength: 3
                },
                "phone":{
                    required:true,
                    digits:true,
                    minlength: 9
                },
               "email":{
                    required: true
                },
                "storageoptions":{
                    required: true
                },
                "quantity":{
                    required:true,
                    digits:true
                }
            },
            messages: {
                "name": {
                    required: "Please enter a name"
                },
                "phone":{
                    required: "Required field"
                },
                "email":{
                    required: "Enter a valid email"
                },
                "storageoptions":{
                    required: "Please select an option"
                },
                "quantity":{
                    required: "This Field required"
                }               
            },
            errorPlacement: function(error, element) {
               error.insertBefore(element);
            },
            submitHandler: function (form) {    

               $.ajax({
                    type: 'POST',
                    data: $(form).serialize(),
                    url: 'file.php',
                    success: function () {
                        form.reset();
                        $('#submit').hide();
                        $('#success-line').show().fadeOut(7000, function(){
                            $('#submit').show("slow");
                        });
                    }
                });
                return false;
            }

        }); 
```

这是我的演示：http: [//jsfiddle.net/ujDC3/](http://jsfiddle.net/ujDC3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:41:34.060

默认情况下，jQuery Validate 插件会自动清除 blur 和 keyup 事件的错误消息。但是，[您的实现被无效的 HTML 破坏了](http://jsfiddle.net/ujDC3/)。

没有这样的事情`type="input"`：

```
<input type="input" name="name" id="name" class="longinput" /> 
```

将它们全部更改为`type="text"`：

```
<input type="text" name="name" id="name" class="longinput" /> 
```

**现在它按预期工作：http: [//jsfiddle.net/Y9RFt/](http://jsfiddle.net/Y9RFt/)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T21:41:22.567

submitHandler 函数仅在验证通过后才被点击，因此您点击提交按钮以通过验证，然后您必须再次点击它才能最终发送它。

我会使用：

```
form.submit() 
```

反而。

参考：

[Jquery Validate Plugin 防止双重提交验证](https://stackoverflow.com/questions/5996950/jquery-validate-plugin-prevent-double-submit-on-validation)

[jquery验证强制双击提交以提交到thickbox的表单](https://stackoverflow.com/questions/7954389/jquery-validation-is-forcing-a-double-click-on-submit-for-form-that-submits-to-t)

# silverlight-3.0 - Silverlight for Windows Embedded 的图表控制选项

> ID：15774794
> 
> 赞同：1
> 
> 时间：2013-04-02T21:31:39.450
> 
> 标签：silverlight-3.0, windows-embedded-compact

我想使用 Silverlight for Windows Embedded 为嵌入式设备制作图表控件。目前我正计划使用线条形状来绘制图形。

我的问题是它是否是一种好方法（性能方面）或者我应该寻找其他选择。或者是否有任何控件可用于 SWE。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:02:29.310

Silverlight 不是在 Windows Embedded Compact 设备上绘制图表的正确答案。您应该使用（或创建）本机 GDI 元素。如果性能非常重要（例如对于快速更新的图表），您还可以考虑 DirectDraw。

商业项目中**最好的方法**可能是使用现成的组件，例如[这个](http://www.resco.net/mobileformstoolkit/details.aspx?comp=CompactChart&p=WindowsMobile)。

[您可以在此处](http://social.msdn.microsoft.com/Forums/en-US/winembnatapp/thread/d070f6f5-6cfc-4c83-9644-be856b000956)找到其他人的经验和建议，以获取有关自己执行此操作时要查找的内容的指示。如果你用更多关于你实际想要达到的目标的细节来扩展你的帖子，我可能会给你一个更详细的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:17:42.637

答案是停止使用 Silverlight，因为微软正在放弃该产品。在 Flash 中执行，或者更好的是，使用 HTML5 和 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T17:03:56.317

在最近使用 windows 通用应用程序的 windows 嵌入式应用程序中，我强烈推荐 oxyplot。

[http://oxyplot.org/](http://oxyplot.org/)

这些图是迄今为止我在互联网上找到的最好的，并且非常易于使用。最重要的是，它们是免费的。您可以使用 NuGet 包管理器获取这些内容，这使得获取更新变得相当简单。

# javascript - 三.CurvePath 和自定义标记

> ID：15774796
> 
> 赞同：3
> 
> 时间：2013-04-02T21:31:41.770
> 
> 标签：javascript, three.js

我正在使用 Three.JS 创建游戏，我已经建模并成功导入了在 Sketchup 中创建的城市。我现在需要动态添加一些“跟我来”箭头（根据下面模型中的黄色箭头）。我相信我可能需要使用 Three.CurvePath 来实现这一点，但不确定这是否是最好的方法 - 我是否需要手动建模路径并计算每个箭头对象的切线，以便它们自然地指向拐角处（如在模型中每次左转）？

![在此处输入图像描述](https://i.stack.imgur.com/c8r81.png)

希望这是有道理的！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T15:23:58.127

我可能有一个解决方案。有一段时间没有使用three.js，所以不确定这是否是最优雅的解决方案。我从[形状示例](http://threejs.org/examples/webgl_geometry_shapes.html)开始，因为它显示：

1.  如何以程序方式构建路径（使用也处理曲线的命令）
2.  如何从这样的路径中提取点

所以我把问题分成：

1.  生成路径
2.  遍历路径和插值（位置和旋转）

**生成路径** 我重用了圆角矩形定义，它看起来类似于屏幕截图的一部分。

```
var roundedRectShape = new THREE.Shape();

                ( function roundedRect( ctx, x, y, width, height, radius ){

                    ctx.moveTo( x, y + radius );
                    ctx.lineTo( x, y + height - radius );
                    ctx.quadraticCurveTo( x, y + height, x + radius, y + height );
                    ctx.lineTo( x + width - radius, y + height) ;
                    ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );
                    ctx.lineTo( x + width, y + radius );
                    ctx.quadraticCurveTo( x + width, y, x + width - radius, y );
                    ctx.lineTo( x + radius, y );
                    ctx.quadraticCurveTo( x, y, x, y + radius );

                } )( roundedRectShape, 0, 0, 200, 200, 20 ); 
```

您的路径可能不是圆角矩形，但可用的曲线函数类型（quadraticCurveTo、bezierCurveTo、splineThru）非常有用。

想到的另一个想法是使用 Ruby 脚本将路径坐标从 Sketchup 导出到 three.js。要么从头开始编写，要么使用现有脚本。这是 在谷歌上很容易找到的[一个。](http://www.shyguysworld.com/index.php?topic=9679.0)

**穿越路径**

幸运的是，three.js 已经通过 Path 实现了这一点，`getPoint(t)`其中 t 是一个从 0.0 到 1.0 的数字，表示路径上的遍历。因此，获取位置与获取路径上的下一个插值位置一样微不足道。然后它只是一个使用`Math.atan2()`来获得旋转的问题：

```
t = (t + s)%1.0;//increment t while maintaining it between 0.0 and 1.0
                var p = path.getPoint(t);//point at t
                var pn = path.getPoint((t+s)%1.0);//point at next t iteration

                if(p != null && pn != null){
                    //move to current position
                    arrow.position.x = p.x;
                    arrow.position.y = p.y;
                    //get orientation based on next position
                    arrow.rotation.z = Math.atan2(pn.y-p.y,pn.x-p.x);

                } 
```

总之，下面是一个基本示例（使用立方体而不是箭头形状）来说明基于形状示例在 three.js 中生成和遍历路径：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>path interpolation</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <canvas id="debug" style="position:absolute; left:100px"></canvas>

        <script src="../build/three.min.js"></script>

        <script src="js/libs/stats.min.js"></script>

        <script>

            var container, stats;

            var camera, scene, renderer;

            var text, plane;

            var targetRotation = 0;
            var targetRotationOnMouseDown = 0;

            var mouseX = 0;
            var mouseXOnMouseDown = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init();
            animate();

            var t = 0.0;//traversal on path
            var s = 0.001;//speed of traversal
            var arrow;//mesh to move/rotate on path
            var path;//Path object to traverse

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 1000 );
                camera.position.set( 0, 150, 500 );

                scene = new THREE.Scene();

                parent = new THREE.Object3D();
                parent.position.y = 50;
                scene.add( parent );

                arrow = new THREE.Mesh( new THREE.CubeGeometry(20,10,10),new THREE.MeshBasicMaterial({color: 0x009900}));
                parent.add(arrow);
                //this is helpful as a visual aid but not crucial
                function addShape( shape, extrudeSettings, color, x, y, z, rx, ry, rz, s ) {

                    var points = shape.createPointsGeometry();
                    var spacedPoints = shape.createSpacedPointsGeometry( 50 );

                    // transparent line from equidistance sampled points

                    var line = new THREE.Line( spacedPoints, new THREE.LineBasicMaterial( { color: color, opacity: 0.2 } ) );
                    line.rotation.set( rx, ry, rz );
                    parent.add( line );

                    // equidistance sampled points

                    var pgeo = spacedPoints.clone();
                    var particles2 = new THREE.ParticleSystem( pgeo, new THREE.ParticleBasicMaterial( { color: color, size: 2, opacity: 0.5 } ) );
                    particles2.rotation.set( rx, ry, rz );
                    parent.add( particles2 );

                }

                // Rounded rectangle
                //generating the path and populating it is crucial tough
                var roundedRectShape = new THREE.Shape();

                ( function roundedRect( ctx, x, y, width, height, radius ){

                    ctx.moveTo( x, y + radius );
                    ctx.lineTo( x, y + height - radius );
                    ctx.quadraticCurveTo( x, y + height, x + radius, y + height );
                    ctx.lineTo( x + width - radius, y + height) ;
                    ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );
                    ctx.lineTo( x + width, y + radius );
                    ctx.quadraticCurveTo( x + width, y, x + width - radius, y );
                    ctx.lineTo( x + radius, y );
                    ctx.quadraticCurveTo( x, y, x, y + radius );

                } )( roundedRectShape, 0, 0, 200, 200, 20 );
                path = roundedRectShape;

                var extrudeSettings = { amount: 20 }; // bevelSegments: 2, steps: 2 , bevelSegments: 5, bevelSize: 8, bevelThickness:5
                extrudeSettings.bevelEnabled = true;
                extrudeSettings.bevelSegments = 2;
                extrudeSettings.steps = 2;

                addShape( roundedRectShape, extrudeSettings, 0x000000, -150, 150, 0, 0, 0, 0, 1 );

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setSize( window.innerWidth, window.innerHeight );

                container.appendChild( renderer.domElement );

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );

                //

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            //

            function onDocumentMouseDown( event ) {

                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;

                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length == 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {

                if ( event.touches.length == 1 ) {

                    event.preventDefault();

                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;

                }

            }

            //

            function animate() {

                requestAnimationFrame( animate );

                render();
                stats.update();

            }

            function render() {
                t = (t + s)%1.0;//increment t while maintaining it between 0.0 and 1.0
                var p = path.getPoint(t);//point at t
                var pn = path.getPoint((t+s)%1.0);//point at next t iteration

                if(p != null && pn != null){
                    //move to current position
                    arrow.position.x = p.x;
                    arrow.position.y = p.y;
                    //get orientation based on next position
                    arrow.rotation.z = Math.atan2(pn.y-p.y,pn.x-p.x);

                }

                parent.rotation.y += ( targetRotation - parent.rotation.y ) * 0.05;
                renderer.render( scene, camera );

            }

        </script>

    </body>
</html> 
```

以为我会直接在此页面上添加一个可运行的片段：

```
 var container;

            var camera, scene, renderer;

            var text, plane;

            var targetRotation = 0;
            var targetRotationOnMouseDown = 0;

            var mouseX = 0;
            var mouseXOnMouseDown = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init();
            animate();

            var t = 0.0;//traversal on path
            var s = 0.001;//speed of traversal
            var arrows;//mesh to move/rotate on path
            var path;//Path object to traverse

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 1000 );
                camera.position.set( 0, 150, 500 );

                scene = new THREE.Scene();

                parent = new THREE.Object3D();
                parent.position.y = 50;
                scene.add( parent );

                arrows = [];
                for(var i = 0 ; i < 50; i++){
                arrows[i] = new THREE.Mesh( new THREE.CubeGeometry(10,5,5),new THREE.MeshBasicMaterial({color: 0x009900}));
                parent.add(arrows[i]);
                }
                //this is helpful as a visual aid but not crucial
                function addShape( shape, extrudeSettings, color, x, y, z, rx, ry, rz, s ) {

                    var points = shape.createPointsGeometry();
                    var spacedPoints = shape.createSpacedPointsGeometry( 50 );

                    // transparent line from equidistance sampled points

                    var line = new THREE.Line( spacedPoints, new THREE.LineBasicMaterial( { color: color, opacity: 0.2 } ) );
                    line.rotation.set( rx, ry, rz );
                    parent.add( line );

                    // equidistance sampled points

                    var pgeo = spacedPoints.clone();
                    var particles2 = new THREE.ParticleSystem( pgeo, new THREE.ParticleBasicMaterial( { color: color, size: 2, opacity: 0.5 } ) );
                    particles2.rotation.set( rx, ry, rz );
                    parent.add( particles2 );

                }

                // Rounded rectangle
                //generating the path and populating it is crucial tough
                var roundedRectShape = new THREE.Shape();

                ( function roundedRect( ctx, x, y, width, height, radius ){

                    ctx.moveTo( x, y + radius );
                    ctx.lineTo( x, y + height - radius );
                    ctx.quadraticCurveTo( x, y + height, x + radius, y + height );
                    ctx.lineTo( x + width - radius, y + height) ;
                    ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );
                    ctx.lineTo( x + width, y + radius );
                    ctx.quadraticCurveTo( x + width, y, x + width - radius, y );
                    ctx.lineTo( x + radius, y );
                    ctx.quadraticCurveTo( x, y, x, y + radius );

                } )( roundedRectShape, 0, 0, 200, 200, 20 );
                path = roundedRectShape;

                var extrudeSettings = { amount: 20 }; // bevelSegments: 2, steps: 2 , bevelSegments: 5, bevelSize: 8, bevelThickness:5
                extrudeSettings.bevelEnabled = true;
                extrudeSettings.bevelSegments = 2;
                extrudeSettings.steps = 2;

                addShape( roundedRectShape, extrudeSettings, 0x000000, -150, 150, 0, 0, 0, 0, 1 );

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setSize( window.innerWidth, window.innerHeight );

                container.appendChild( renderer.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );

                //

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            //

            function onDocumentMouseDown( event ) {

                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;

                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length == 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {

                if ( event.touches.length == 1 ) {

                    event.preventDefault();

                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;

                }

            }

            //

            function animate() {

                requestAnimationFrame( animate );

                render();

            }

            function render() {
                t = (t + s)%1.0;//increment t while maintaining it between 0.0 and 1.0 - could map mouse x position/window width for fun :)
				for(var i = 0 ; i < 50; i++){//for each box
					var ti = ((i/50.0)+t)%1.0;//compute the traversval including each box's own offset on the path

					var p = path.getPoint(ti);//point at t
					var pn = path.getPoint((ti+s)%1.0);//point at next t iteration

					if(p != null && pn != null){
						//move to current position
						arrows[i].position.x = p.x;
						arrows[i].position.y = p.y;
						//get orientation based on next position
						arrows[i].rotation.z = Math.atan2(pn.y-p.y,pn.x-p.x);

					}
				}
                parent.rotation.y += ( targetRotation - parent.rotation.y ) * 0.05;
                renderer.render( scene, camera );

            }
```

```
 body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>
```

# ios - 如何使用 iOS SDK 发布包含地图的 Facebook 操作？

> ID：15774800
> 
> 赞同：0
> 
> 时间：2013-04-02T21:32:04.550
> 
> 标签：ios, facebook, sdk, maps, action

我想在 Facebook 上发布一个 Open Graph Fitness:runs 操作，并希望它使用我的路径图呈现。路径由下面的路径坐标定义。我该怎么做呢？下面的方法发布了操作，我可以在 Facebook 上的活动日志和时间轴中看到操作的文本。但是当我将鼠标悬停在已发布操作的任何元素上时，我看不到地图。我究竟做错了什么？

```
- (void) fbPost:(NSString *)txt toList:(NSString *)listId { // post

                [FBSession setActiveSession:[FacebookManager instance].facebook.session];

                NSMutableDictionary<FBGraphObject> *action = [FBGraphObject graphObject];
                action[@"course"] = @"http://samples.ogp.me/48586838281818";
                action[@"privacy"] = privacyStr;

                NSMutableArray *coords = [NSMutableArray arrayWithCapacity:59];
                for (int i = 0; i < 59; i++)
                {
                    NSMutableDictionary *coord = [[NSMutableDictionary alloc] initWithCapacity:3];

            #define TIMESTAMP @"fitness:metrics:timestamp"
            #define LATITUDE @"fitness:metrics:location:latitude"
            #define LONGITUDE @"fitness:metrics:location:longitude"
                    [coord setValue:[NSString stringWithFormat:@"2013-04-01T12:%2d:00+0000", i] forKey:TIMESTAMP];
                    [coord setValue:[NSString stringWithFormat:@"%f", 37.442564 + i * 0.00001] forKey:LATITUDE];
                    [coord setValue:[NSString stringWithFormat:@"%f", -122.164879 + i * 0.000001] forKey:LONGITUDE];
                    [coords addObject:coord];
                    NSLog(@"coord=%@ i=%d", coord, i);

                }

                action[@"path"] = [coords JSONString];
                action[@"message"] = txt;

                [FBRequestConnection startForPostWithGraphPath:@"me/fitness.runs"
                                                   graphObject:action
                                             completionHandler:^(FBRequestConnection *connection,
                                                                 id result,
                                                                 NSError *error) {
                                                 [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

                                                 if (!error) // it's a post, save id
                                                 {
                                                 }
                                                 else
                                                 {
                                                 }

                                             }];

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T10:30:54.390

```
NSMutableDictionary<FBGraphObject> *action = [FBGraphObject graphObject];
NSMutableDictionary<FBGraphObject> *course = [FBGraphObject openGraphObjectForPost];
course[@"og:title"] = @"My Workout";
course[@"og:type"] = @"fitness.course"; //very important
course[@"og:url"] = @"www.fitness.com"; // give a meaningful url here

course[@"fitness:duration:value"] = @"3000";
course[@"fitness:duration:units"] = @"s";

course[@"fitness:calories"] = @"100";

course[@"fitness:distance:value"] = 1.7;
course[@"fitness:distance:units"] = @"mi";

course[@"fitness:speed:value"] = @"2";
course[@"fitness:speed:units"] = @"m/s";

course[@"fitness:pace:value"] = @"0.5";
course[@"fitness:pace:units"] = @"s/m";
course[@"og:description"] = @"course_description";

NSMutableArray *locationDataPointsArray = [[NSMutableArray alloc] init];
locationDataPointsArray[0] = @{@"location:latitude": 12.91277, @"location:longitude": 77.56671};
locationDataPointsArray[1] = @{@"location:latitude": 12.91284, @"location:longitude": 77.56681};
locationDataPointsArray[2] = @{@"location:latitude": 12.91297, @"location:longitude": 77.56691};
course[@"fitness:metrics"] = locationDataPointsArray;

action[@"fb:explicitly_shared"] = @"true";
action[@"course"] = course;

NSString *path = @”me/fitness.runs”; 
//for custom story:    NSString *path = @”me/urNamespace:name of ur action”;

[FBRequestConnection startForPostWithGraphPath:path graphObject:action completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (!error) {
        NSLog(@"Posted fitness action, id: %@", [result objectForKey:@"id"]);

        NSString *alertText = @"Workout successfully posted to Facebook  :)";
        NSString *alertTitle = @"Success";
        [[[UIAlertView alloc] initWithTitle:alertTitle message:alertText delegate:nil cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
    }
    else {
                    NSLog(@"error in posting action  %@", error.description);

    }
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T23:29:23.483

我真的不知道如何回答您的问题，但是前几天我阅读了一些文件，它们可能对您有用...

**我会推荐**

您阅读了[本文档](https://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html)，希望您能够了解如何将其集成到您的应用程序中。

您可能还想阅读[this](http://www.appcoda.com/ios-programming-101-integrate-twitter-and-facebook-sharing-in-ios-6/) & [this](http://developers.facebook.com/docs/reference/ios/3.2)

快乐编码:)

# python - __setitem__ 在 Python 中用于 Point(x,y) 类的实现

> ID：15774804
> 
> 赞同：11
> 
> 时间：2013-04-02T21:32:10.400
> 
> 标签：python, python-2.7

我正在尝试在 python 中创建一个 Point 类。我已经实现了一些功能，例如 __ str__ 或 __ getitem__ ，并且效果很好。我面临的唯一问题是我的 __ setitem__ 的实现不起作用，其他的都很好。

这是我的 Point 类，最后一个函数是我的 __ setitem__：

```
class point(object):
    def __init__(self,x=0,y=0):
        self.x=x
        self.y=y

    def __str__(self):
        return "point(%s,%s)"%(self.x,self.y)

    def __getitem__(self,item):
        return (self.x, self.y)[item]

    def __setitem__(self,x,y):
        [self.x, self.y][x]=y 
```

它应该像这样工作：

```
p=point(2,3)
p[0]=1 #sets the x coordinate to 1
p[1]=10 #sets the y coordinate to 10 
```

（我说得对吗，setitem 应该像这样工作吗？）谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T21:37:24.007

让`self.data`并且只`self.data`保留坐标值。如果`self.x`并且`self.y`还要存储这些值，则有机会`self.data`并且`self.x`或`self.y`不会持续更新。

相反，make`x`和`y` [属性](http://docs.python.org/2/library/functions.html#property)从`self.data`.

```
class Point(object):
    def __init__(self,x=0,y=0):
        self.data=[x, y]

    def __str__(self):
        return "point(%s,%s)"%(self.x,self.y)

    def __getitem__(self,item):
        return self.data[item]

    def __setitem__(self, idx, value):
        self.data[idx] = value

    @property
    def x(self):
        return self.data[0]

    @property
    def y(self):
        return self.data[1] 
```

* * *

该声明

```
[self.x, self.y][x]=y 
```

很有趣但有问题。让我们把它分开：

`[self.x, self.y]`导致 Python 构建一个**新列表**，其中包含值`self.x`和`self.y`.

`somelist[x]=y`导致Python将值分配`y`给. 所以这个新列表得到更新。但这对或没有影响。这就是为什么您的原始代码不起作用的原因。`x``somelist``somelist``self.data``self.x``self.y`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:41:00.887

让我们把它精简到最低限度：

```
x, y = 2, 3
[x, y][0] = 1
print(x) 
```

这将打印出来`2`。

为什么？

嗯，`[x, y]`是一个包含两个元素的全新列表。当您将其第一个成员重新分配给`1`时，只会更改全新的列表，因此它的第一个元素现在`1`是`2`. 它不会把 number`2`变成 number `1`。

由于您的代码与此基本相同，因此存在相同的问题。只要您的变量具有不可变的值，您就不能改变变量。

* * *

您*可以*通过执行以下操作来修复它：

```
x, y = [2], [3]
[x, y][0][0] = 1
print(x[0]) 
```

现在你会得到`1`.

为什么？嗯，`[x, y]`是一个包含两个元素的新列表，每个元素都是一个列表。您不是用其他东西替换它的第一个元素，而是用其他东西替换它的第一个元素的第一个元素。但它的第一个元素与 的列表相同`x`，因此您还将`x`' 的第一个元素替换为其他元素。

* * *

如果这有点难以在你的脑海中保持直截了当……嗯，这通常表明你正在做一些你可能不应该做的事情。（此外，您使用`x`的参数表示“选择`x`或`y`”以及`y`表示“新值”的参数，这使得它更加混乱......）

有许多更简单的方法可以做同样的事情：

*   使用`if`/`else`语句而不是试图变得花哨。
*   使用单个`list`而不是两个整数值：`self.values[x] = y`. （这是unutbu的答案。）
*   使用 a`dict`而不是两个整数值：`self.values['xy'[x]] = y`.
*   使用`setattr(self, 'xy'[x], y)`.
*   使用 a`namedtuple`而不是尝试自己构建相同的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-21T22:10:24.037

这适用于 python 2.6 我猜它也适用于 2.7

**__** *setitem **__方法接受 3*****个***参数（self、index、value）*

 *在这种情况下，我们想使用 index 作为 int 从**__ *slots* __** tuple 中检索坐标的名称（检查**__ *slots* __**的文档对性能非常有用）

记住**__*插槽*__**只允许**x**和**y**属性！所以：

```
p = Point()
p.x = 2
print(p.x)  # 2.0

p.z = 4  # AttributeError
print(p.z)  # AttributeError 
```

这种方式使用**@property**装饰器可以更快地尊重（当您开始拥有10000多个实例时）

```
class Point(object):
    @property
    def x(self):
        return self._data[0]  # where self._data = [x, y]
... 
```

所以这是我给你的建议:)

```
class Point(object):

    __slots__ = ('x', 'y')  # Coordinates

    def __init__(self, x=0, y=0):
        '''
        You can use the constructor in many ways:
        Point() - void arguments
        Point(0, 1) - passing two arguments
        Point(x=0, y=1) - passing keywords arguments
        Point(**{'x': 0, 'y': 1}) - unpacking a dictionary
        Point(*[0, 1]) - unpacking a list or a tuple (or a generic iterable)
        Point(*Point(0, 1)) - copy constructor (unpack the point itself)
        '''
        self.x = x
        self.y = y

    def __setattr__(self, attr, value):
        object.__setattr__(self, attr, float(value))

    def __getitem__(self, index):
            '''
            p = Point()
            p[0]  # is the same as self.x
            p[1]  # is the same as self.y
            '''
        return self.__getattribute__(self.__slots__[index])

    def __setitem__(self, index, value):
            '''
            p = Point()
            p[0] = 1
            p[1] = -1
            print(repr(p))  # <Point (1.000000, -1.000000)>
            '''
        self.__setattr__(self.__slots__[index], value)  # converted to float automatically by __setattr__

    def __len__(self):
        '''
        p = Point()
        print(len(p))  # 2
        '''
        return 2

    def __iter__(self):
        '''
        allow you to iterate
        p = Point()
        for coord in p:
            print(coord)

        for i in range(len(p)):
            print(p[i])
        '''
        return iter([self.x, self.y])

    def __str__(self):
        return "(%f, %f)" % (self.x, self.y)

    def __repr__(self):
        return "<Point %s>" % self 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-11T10:15:11.943

这是很老的帖子，但是您的问题的解决方案非常简单：

```
class point(object):
    def __init__(self,x=0,y=0):
        self.x=x
        self.y=y

    def __str__(self):
        return "point(%s,%s)"%(self.x,self.y)

    def __getitem__(self,item):
        return self.__dict__[item]

    def __setitem__(self,item,value):
        self.__dict__[item] = value 
```

每个类都有自己的字典，其中包含在类中创建的所有属性和方法。因此，您可以调用：

```
In [26]: p=point(1,1)
In [27]: print p
point(1,1)
In [28]: p['x']=2
In [29]: print p
point(2,1)
In [30]: p['y']=5
In [31]: print p
point(2,5) 
```

它比你的“索引”更易读，比如参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-21T22:15:55.217

您可能会发现为此使用 namedtuple 会容易得多：

```
 from collections import namedtuple
 Point= namedtuple('Point', ['x','y'])

 fred = Point (1.0, -1.0)
 #Result: Point(x=1.0, y=-1.0) 
```

主要缺点是您不能将值插入命名元组 - 它是不可变的。在大多数应用程序中，这是一项功能，而不是错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T21:41:37.190

setitem 中发生的事情是它构建一个临时列表，设置值，然后在不更改 self.x 或 self.y 的情况下丢弃该列表。试试这个`__setitem__`：

```
def __setitem__(self,coord,val):
    if coord == 0:
        self.x = val
    else:
        self.y = val 
```

但是，这完全是对`__setitem__`. 无论您如何实现，使用 px 和 py 都将比 p[0] 和 p[1] 快得多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-08T05:42:46.660

这是一个例子：

```
from collections import namedtuple

Deck = namedtuple('cards',['suits','values'])

class FrenchDeck(object):

    deck = [str(i) for i in range(2,11)]+list('JQKA')
    suits = "heart clubs spades diamond".split()

    def __init__(self):
        self.totaldecks = [Deck(each,every) for each in self.suits for every in self.deck]
    def __len__(self):
        return len(self.totaldecks)
    def __getitem__(self,index):
        return self.totaldecks[index]
    def __setitem__(self,key,value):
        self.totaldecks[key] = value

CardDeck = FrenchDeck()
CardDeck[0] = "asdd"       # needs`__setitem__()`
print CardDeck[0] 
```

如果你不使用`__setitem__()`，你会得到一个错误

```
TypeError: 'FrenchDeck' object does not support item assignment 
```*

# emacs - emacs 24 自动完成 yasnippet

> ID：15774807
> 
> 赞同：9
> 
> 时间：2013-04-02T21:32:15.223
> 
> 标签：emacs, autocomplete, emacs24, yasnippet

我的问题已经有一段时间了，这让我非常头疼。我正在使用 emacs 24.2.1

下一个代码是我的自动完成配置，当我在没有 yasnippet 的情况下运行它时，一切运行顺利。

```
(add-to-list 'load-path "~/.emacs.d/autocomplete/")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/autocomplete/ac-dict")
(ac-config-default) 
```

这是我对 yasnippets 的配置

```
(add-to-list 'load-path "~/.emacs.d/yasnippet")
(require 'yasnippet)
(yas/global-mode t) 
```

在这段代码之后，yasnippet 可以正常工作，但自动完成功能对于 c-mode、c++-mode、java-mode 和 php-mode 停止工作，但它在 lisp 和 python 上运行良好（我只用这些语言进行了测试）。

我已经尝试过我发现的东西，比如这个自动完成代码

```
(set-default 'ac-sources
             '(ac-source-abbrev
               ac-source-dictionary
               ac-source-yasnippet
               ac-source-words-in-buffer
               ac-source-words-in-same-mode-buffers
               ac-source-semantic))

(ac-config-default)

(dolist (m '(c-mode c++-mode java-mode))
  (add-to-list 'ac-modes m))

(global-auto-complete-mode t) 
```

一段时间后，我意识到当我没有 yasnippet 时自动完成功能运行良好，所以这不是解决方案。我也尝试过*(yas/initialize)*和*(yas--initialize)*但它没有任何区别。我还在自动完成之前和之后启动了 yasnippets，结果是一样的。我也尝试过修改 yas/trigger-key 变量，但我总是得到相同的结果。希望你能帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:05:15.973

正如 jpkotta 所说，我只是将我的 ac-source-yasnippet 设置为 nil ，仅此而已。

```
(setq ac-source-yasnippet nil) 
```

# jquery - Jquery Mobile 图像未显示在 Phonegap 中

> ID：15774810
> 
> 赞同：3
> 
> 时间：2013-04-02T21:32:16.227
> 
> 标签：jquery, html, css, cordova, jquery-mobile

我有一个我在 Phonegap 构建中构建的应用程序，但是该应用程序不再在图标等中显示图像。例如，后退按钮显示但不显示后退按钮内的小箭头。我对我的应用程序所做的唯一更改是我将应用程序所需的所有 JS 文件都存储在本地并在本地引用。

无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:36:19.277

## 本地文件

您缺少对图像文件的引用。

它们可以在 css/images 目录中找到。或者，当您将库下载为 ZIP 文件时，您可以找到名为 images 的文件夹。

更具体：

HTML 文件，直接在根文件夹中

```
webapp/Index.html 
```

root/JS 文件夹下的脚本

```
webapp/js/jquery.mobile-1.3.0.min.css

webapp/js/jquery-1.8.2.min.js

webapp/js/jquery.mobile-1.3.0.min.js 
```

root/JS/images/ 文件夹下的图片

```
webapp/js/images/ajax-loader.gif

webapp/js/images/icons-18-black.png

webapp/js/images/icons-36-black.png

webapp/js/images/icons-18-white.png

webapp/js/images/icons-36-white.png 
```

这些位置取自[**Omar 的**](https://stackoverflow.com/users/1771795/omar)回答：[https ://stackoverflow.com/a/15762397/1848600](https://stackoverflow.com/a/15762397/1848600)

## 远程文件

一个更简单的解决方案是将所有内容链接到在线资源：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

如果它适用于他们，那么您的问题出在此目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:21:00.860

我自己只是用本机设备上缺少的图标来解决这个问题。当我使用上面发布的外部链接时，图标看起来很好。我担心 Apple 不批准我的应用程序中的外部下载代码，因此我继续尝试使用本地项目文件的选项。

我偶然发现了一个可行的本地设置，但可能不推荐。我尝试切换到 jquery.mobile-1.2.1.min.css，而不是 1.3.0，图标突然出现了！所以我的配置是：

```
<link href="jquery-mobile/jquery.mobile-1.2.1.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery-mobile/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jquery-mobile/jquery.mobile-1.3.0.min.js"></script> 
```

# emacs - 在 emacs 中加密区域

> ID：15774811
> 
> 赞同：0
> 
> 时间：2013-04-02T21:32:18.413
> 
> 标签：emacs, elisp

我一直在尝试编写一个小函数来加密 emacs 中的文件内容。以下是我遵循的步骤：

*   全选 ( `C-x h`)
*   `M-x epa-encrypt-region RET`
*   `C-c C-c`

完成这些步骤后，emacs 将提示输入密码，文件将被加密。这是我写的函数：

```
(defun encrypt ()
  "encrypt file"
  (interactive)
  (command-execute (kbd "C-x h M-x epa-encrypt-region RET C-c C-c"))
  )

(global-set-key (kbd "C-c C-e") 'encrypt) 
```

但它似乎有什么问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:47:21.173

使用函数`epa-encrypt-file`而不是编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:21:24.320

我很想知道您在哪里找到要使用的建议`command-execute`以及`kbd`以这种方式使用。这似乎是一件普遍*有效*的事情，但它显然不是这里最明智的选择（而且很少会如此）。我想这实际上是我第一次看到它。

简而言之，如果没有必要，不要试图伪造交互调用函数的过程。

```
(epa-encrypt-region (point-min) (point-max) nil nil nil) 
```

# android - 自定义着色器不适用于 Android 设备（使用 LibGDX）

> ID：15774812
> 
> 赞同：1
> 
> 时间：2013-04-02T21:32:18.790
> 
> 标签：android, compilation, glsl, shader, libgdx

我开始使用 LibGDX 为 PC 和 Android 进行开发。我目前正在做一个小项目，需要我在 GLSL 中编写自定义着色器（基于全屏四边形）。来自 HLSL 环境，我在设置整个着色器系统和 SpriteBatch 时遇到了一些麻烦（因为我想尽可能保持代码简单）。

我在桌面上有以下着色器代码：

**顶点着色器：**

```
attribute vec4 a_position;
uniform mat4 u_projectionViewMatrix;
void main()
{
    gl_Position = a_position * u_projectionViewMatrix;
} 
```

**片段着色器：**

```
uniform vec2 effectOrigin;
uniform vec2 effectDir;
void main()
{
    float distToOrigin = distance(effectOrigin.xy, gl_FragCoord.xy);
    gl_FragColor = vec4(mod(distToOrigin+effectDir.x*30, 30)-15, 0.0, 0.0, 1.0);
} 
```

正如我所说，它适用于桌面（Windows），并给我一个漂亮的圆形图案。但是在 Android 上它不能编译，只给我清除的背景颜色。我怀疑它与 Android 上的 OpenGL ES 2 权限有关，所以我在清单中添加了这一行： `<uses-feature android:glEsVersion="0x00020000" android:required="true" />`，但这似乎没有什么不同。

我还认为这可能与浮点数和向量的精度有关，但我无法弄清楚我必须如何更改它们才能修复它。

有人可以帮助我吗？我一直无法在其他地方找到答案！

提前致谢，

尤里

PS 有没有办法查看着色器编译过程中出了什么问题？我知道在着色器上调试很困难，但是至少知道在编译期间它可能出错的地方会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:43:22.403

使用 PT 关于记录编译的建议修复它！片段着色器有两个问题，固定着色器是这样的：

```
precision mediump float;
uniform vec2 effectOrigin;
uniform vec2 effectDir;
void main()
{
    float distToOrigin = distance(effectOrigin.xy, gl_FragCoord.xy);
    gl_FragColor = vec4(mod(distToOrigin+effectDir.x*30.0, 30.0)-15.0, 0.0, 0.0, 1.0);
} 
```

我在顶部添加了精度定义，并将常量值从整数更改为浮点数（例如 15 到 15.0）以修复它！

谢谢PT！

# html - 在下拉列表中组合选项值

> ID：15774813
> 
> 赞同：2
> 
> 时间：2013-04-02T21:32:21.730
> 
> 标签：html, select, option

我正在尝试使用特定值填充可搜索的下拉列表，但我想组合其中的两个值并让它们返回任一值的结果。例如：

```
 <td align="left" valign="top" nowrap>
                <select name="SPORTS" 
                        id="idCustom1" 
                        onChange="AddSearchItem(this);"
                        class="StuFindSelect">
         <option value="    ">No Attribute selected
                   <option value="BASEBALL">Baseball
                   <option value="BASKETBM">Mens Basketball
                   <option value="BASKETBW">Womens Basketball
                   <option value="CHEERLDS">Cheerleader
                   <option value="FOOTBALL">Football
                   <option value="GOLF">Golf
                   <option value="LACROSSW">Womens Lacrosse
                   <option value="SOCCERM">Mens Soccer
                   <option value="SOCCERW">Womens Soccer
                   <option value="TENNISM">Mens Tennis
                   <option value="TENNISW">Womens Tennis
                   <option value="TRACK">Track
                   <option value="VOLLEYBL">Volleyball
                   <option value="XCOUNTM">Mens Cross Country
                   <option value="XCOUNTW">Womens Cross Country
                </select>
            </td> 
```

当用户选择篮球时，我想组合返回 BASKETBM 或 BASKETBW 的结果。经过研究，我尝试以几种不同的方式组合它们，

```
<option value="[BASKETBM,BASKETBW]">Basketball
<option value="BASKETBM,BASKETBW">Basketball
<option value="BASKETBM|BASKETBW">Basketball 
```

以及我能找到的所有其他排列，但似乎没有任何效果。每次它在测试时返回零搜索结果。任何想法我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:43:52.253

我不知道`AddSearchItem(this);`作为一个函数有什么作用，但我猜问题就在那里。也许您可以详细说明您的问题的这一部分。

您可以毫无问题地选择这样的选项：

`<option value="BASKETBM,BASKETBW">Basketball`

并用于`this.value.split(',')`从中获取价值。

# xml - Schema xs:unique 未被验证

> ID：15774815
> 
> 赞同：1
> 
> 时间：2013-04-02T21:32:23.777
> 
> 标签：xml, xsd, schema, unique

我有一个简单的 xml 文件

```
<form xmlns="http://www.example.org/form-reader/form-description"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.example.org/form-reader/form-description form-description.xsd">
    <pages amount="1"/>
    <pages amount="1"/>
</form> 
```

我为它写了模式

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.example.org/form-reader/form-description"
xmlns="http://www.example.org/form-reader/form-description"
elementFormDefault="qualified">
    <xs:complexType name="pagesType">
    <xs:attribute name="amount" type="xs:string" use="required" />
    </xs:complexType>

    <xs:complexType name="formType">
    <xs:sequence minOccurs="1">
        <xs:element name="pages" minOccurs="0" maxOccurs="unbounded"
        type="pagesType" />
    </xs:sequence>
    </xs:complexType>

    <xs:element name="form" type="formType">
    <xs:unique name="pageNumberUnique">
        <xs:selector xpath="pages" />
        <xs:field xpath="@amount" />
    </xs:unique>
    </xs:element>
</xs:schema> 
```

我想验证 amount 属性的唯一性，但在所有验证器中，我的 xml 文件似乎是有效的，它不应该，为什么？

# 解决方案

应用@PetruGardea 修复后我的架构如下所示：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:tns="http://www.example.org/form-reader/form-description"
targetNamespace="http://www.example.org/form-reader/form-description"
xmlns="http://www.example.org/form-reader/form-description"
elementFormDefault="qualified">
    <xs:complexType name="pagesType">
    <xs:attribute name="amount" type="xs:string" use="required" />
    </xs:complexType>

    <xs:complexType name="formType">
    <xs:sequence minOccurs="1">
    <xs:element name="pages" minOccurs="0" maxOccurs="unbounded"
    type="pagesType" />
    </xs:sequence>
    </xs:complexType>

    <xs:element name="form" type="formType">
    <xs:unique name="pageNumberUnique">
    <xs:selector xpath="tns:pages" />
    <xs:field xpath="@amount" />
    </xs:unique>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:24:30.003

您必须为您的 targetNamespace 定义一个别名，并在您的 xpath 中将其用于选择器和字段。[请参阅SO 上](https://stackoverflow.com/questions/10356723/xsd-unique-constraint-on-attribute-of-sibling-elements-of-a-specific-type/10358114#10358114)的此答案，并阅读我所做的帖子和评论以获取更多详细信息。

# r - 为什么在 R 中的自举模型上使用超过四个内核时计算时间会增加？

> ID：15774816
> 
> 赞同：4
> 
> 时间：2013-04-02T21:32:29.717
> 
> 标签：r, parallel-processing, multiprocessing

在具有 64 个内核的 x86_64-redhat-linux-gnu 机器上运行下面的代码片段以在 R（2.15 版）中进行引导练习时，观察到的计算时间在使用超过 4 个内核后似乎会降低。R 是否需要进行额外的配置更改才能使用超过 4 个内核？

```
library(doMC)
library(plyr)
df <- empty <- data.frame(cores = numeric(), trial = numeric(), time = numeric())

for(i in 1:64){
     registerDoMC(cores=i)
     trials <- 1000
     stime <- system.time({
              r <- foreach(icount(trials), .combine=cbind) %dopar% {
                   ind <- sample(1000000, 1000000, replace=TRUE)
                   mean(ind)}})
     df<- rbind(df, data.frame(cores=i,trial=1,time=stime[3]))
}
df2 <- ddply(df, c("cores"), summarize, time_avg = mean(time)) 
```

以下是按内核数量划分的处理时间细分。

```
num_cores time(seconds)
1   16.544
2   8.198
3   5.627
4   4.313
5   7.045
6   8.898
7   10.412
8   11.539
9   12.382
10  13.329
11  13.786
12  14.375
13  14.977
14  15.095
15  14.984
16  15.393
17  15.728
18  15.983
19  16.039
20  15.947
21  16.101
22  16.365
23  16.549
24  16.687
25  17.022
26  17.116
27  17.212
28  17.548
29  17.605
30  17.672
31  18.067
32  18.158
33  16.884
34  17.2
35  17.167
36  17.178
37  17.516
38  17.425
39  17.449
40  17.845
41  17.758
42  17.74
43  18.093
44  14.481
45  14.25
46  18.441
47  18.294
48  18.311
49  18.694
50  18.692
51  15.936
52  16.495
53  16.512
54  18.627
55  19.019
56  18.631
57  13.916
58  19.227
59  19.225
60  13.606
61  18.029
62  19.392
63  19.378
64  19.753 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:22:24.587

我不认为这是配置 R 的问题：任务太小以至于您无法利用许多内核。从“1 个核心”时间开始，每个任务花费的时间不到 16.5 毫秒，而且可能要少得多。该`foreach`软件包不适用于那种细粒度的问题。

为了有任何希望，您可以尝试使用显式分块：

```
r <- foreach(n=idiv(trials, chunks=getDoParWorkers()), .combine='c') %dopar% {
  sapply(seq_len(n), function(i) mean(sample(1000000, 1000000, replace=TRUE)))
} 
```

我不知道您的目标是什么，但我会`mclapply`直接用于此类问题。

# magento - Magento Shipping 返回“抱歉，目前此订单没有报价。” 国际订单

> ID：15774824
> 
> 赞同：2
> 
> 时间：2013-04-02T21:32:54.550
> 
> 标签：magento, ups

我正在使用 magento 1.7.02 并且最近开设了我的商店以接受国际订单，但我似乎无法为他们退回任何运费。

我配置了 UPS 和 USPS，并为所有美国订单工作。我已允许在两种运输方式上选择所有国家/地区。但是，例如，当我输入英国地址时，它会返回“没有可用的报价”。我还允许在我的常规配置中选择所有国家/地区。

我可以对虚拟产品进行国际支付罚款。

这是我在 UPS 调试文件中找到的内容：

```
[accept_UPS_license_agreement] => yes 
[10_action] => 4 
[13_product] => GNDRES 
[14_origCountry] => US 
[15_origPostal] => 55555 
[origCity] => US City 
[19_destPostal] => 55555 
[22_destCountry] => US 
[23_weight] => 3.9 
[47_rate_chart] => Customer Counter 
[48_container] => 00 
[49_residential] => 01 
[weight_std] => lbs 
```

看起来dest的邮政和国家与原产地相同。我认为这是问题所在，但不知道如何解决。由于某种原因，它似乎没有拉出正确的目的地或国家。

我一直在使用英国地址进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:47:09.993

想出了解决办法。对我来说愚蠢的事情。我只需要通过管理面板启用国际运输选项。

# c++ - 如何使用 ODBC API 读取 SQL Server 列排序规则元数据？

> ID：15774828
> 
> 赞同：2
> 
> 时间：2013-04-02T21:33:12.320
> 
> 标签：c++, sql-server, odbc

我们的 C++ 应用程序能够使用 OLEDB API（使用 , 等）从 SQL Server 获取排序规则相关的列元数据`DBCOLUMN_COLLATINGSEQUENCE`，`DBCOLUMN_TDSCOLLATION`但我需要使用 ODBC，因为我们的应用程序必须是跨平台的。我们使用 ODBC API[`SQLColAttribute`](http://msdn.microsoft.com/en-us/library/ms131383%28v=sql.110%29.aspx)来读取行集元数据，但是这个 API 没有任何可以返回排序规则名称的标识符。

我尝试使用`SQL_CA_SS_COLUMN_COLLATION`(defined in `sqlncli.h`) 作为标识符，但`SQLColAttribute`只返回“排序规则名称”作为排序规则。

我还尝试使用`SQLGetStmtAttr`后跟`SQLGetDescField`，使用相同的标识符，然后我得到了“排序规则名称”。

我已经搜索了所有 MSDN 的答案，但没有找到任何答案。我可以从中获取排序规则名称[`INFORMATION_SCHEMA.COLUMNS`](http://msdn.microsoft.com/en-us/library/ms188348.aspx)，但这不适用于查询返回的计算列。

我正在寻找一种干净的方法来使用 ODBC 从结果集元数据中获取整理信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:25:47.227

此查询将返回当前数据库中存在的每一列的 collat​​ion_name。

```
SELECT o.name AS ObjectName, c.name AS ColumnName, c.collation_name 
FROM sys.columns c
    INNER JOIN sys.objects o ON c.object_id = o.object_id
    INNER JOIN sys.types ty ON c.system_type_id = ty.system_type_id
WHERE o.is_ms_shipped = 0
    AND ty.collation_name IS NOT NULL
    AND ty.name <> 'sysname'; 
```

# java - 让操作系统知道光标何时位于 JavaFX TextBox 中

> ID：15774829
> 
> 赞同：1
> 
> 时间：2013-04-02T21:33:22.170
> 
> 标签：java, user-interface, javafx

我正在编写一个 Java 应用程序，它将在安装了 Windows 7 的平板电脑上运行。用户通过触控笔和操作系统提供的屏幕键盘与设备进行交互。在带有*本机*文本框的应用程序中，屏幕键盘会在光标进入文本框时自动出现，并在光标离开时消失。这是非常理想的行为。

不幸的是，操作系统不知道 JavaFX 的文本框。因此，当光标进入我的应用程序中的文本框时，屏幕键盘不会自动出现。用户被迫手动将屏幕键盘从屏幕边缘拖到视图中。

有没有办法在 JavaFX 2.0中保留本*机文本框的这种行为？*

# javascript - 从 Chrome 打包的应用程序/扩展程序下载 Google Drive 文件夹

> ID：15774830
> 
> 赞同：2
> 
> 时间：2013-04-02T21:33:24.137
> 
> 标签：javascript, google-chrome-extension, google-drive-api

我想知道是否可以使用 Chrome 打包应用从 Google Drive 下载文件夹？因此，我的 Chrome 打包应用程序与 Google Drive 集成。当我点击“下载文件”时，它会将我带到 Google Drive 页面，在那里我可以看到所有文件夹，但每当我点击文件夹时，它就会打开并转到文件。我只想将整个文件夹下载到我的网络应用程序中。

# ajax - 在 Yesod 中允许跨域请求

> ID：15774833
> 
> 赞同：15
> 
> 时间：2013-04-02T21:33:37.593
> 
> 标签：ajax, haskell, bookmarklet, cors, yesod

我的应用程序使用了一个书签，我需要允许 CORS，`MyRouteR`以便我的书签代码可以将此路由用于 AJAX 请求。

在我的 config/routes 初稿中，我`MyRouteR`只支持一个请求方法，PUT。但事实证明（duh）我还需要支持 OPTIONS 方法，浏览器将其用于 CORS 预检请求。

我最终在 config/routes 中得到了以下内容：

```
/myroute MyRouteR PUT OPTIONS 
```

我有点希望在模板 Haskell 中有一些相关的机制来处理配置/路由，以便将 OPTIONS 添加到该路由的方法列表中会自动导致 CORS 支持，但没有骰子。不是世界末日，但这样会很有意义，感觉很优雅。

为了使 CORS 工作，我给路由一个 OPTIONS 处理程序：

```
optionsMyRouteR :: Handler RepPlain
optionsMyRouteR = do
    addHeader "Access-Control-Allow-Origin" "*"
    addHeader "Access-Control-Allow-Methods" "PUT, OPTIONS"
    return $ RepPlain $ toContent ("" :: Text)

putMyRouteR :: Handler RepJson
putMyRouteR = do
    addHeader "Access-Control-Allow-Origin" "*"
    -- more stuff ... 
```

这行得通，但感觉有点不像Yesodic，因为它太样板了。所以，两个问题：

1.  我们有比 Yesodic 更好的形容词吗？
2.  还有另一种更好的方法来让路由支持跨域请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T21:43:36.177

**更新：** 其他人为此发布了一些通用中间件：http: [//hackage.haskell.org/package/wai-cors](http://hackage.haskell.org/package/wai-cors)。

* * *

我目前正在做同样的事情，还没有实现解决方案，但是我想它可以通过`Middleware`类似于 wiki 页面上的示例代码的 WAI 来完成。 [Allowing WOFF fonts to be access from other domain (CORS)](https://github.com/yesodweb/yesod/wiki/Allowing-WOFF-fonts-to-be-accessed-from-other-domains-%28CORS%29)。这应该允许您编写一次 CORS 代码而无需重复自己。

上面链接中的示例代码为 WOFF 字体添加跨域访问：

```
addCORStoWOFF :: W.Middleware
addCORStoWOFF app = fmap updateHeaders . app
  where
    updateHeaders (W.ResponseFile    status headers fp mpart) = W.ResponseFile    status (new headers) fp mpart
    updateHeaders (W.ResponseBuilder status headers builder)  = W.ResponseBuilder status (new headers) builder
    updateHeaders (W.ResponseSource  status headers src)      = W.ResponseSource  status (new headers) src
    new headers | woff      = cors : headers
                | otherwise =        headers
      where woff = lookup HT.hContentType headers == Just "application/font-woff"
            cors = ("Access-Control-Allow-Origin", "*") 
```

# user-interface - PyQt4：使用 QPushButton 小部件从 QList 小部件中删除项目

> ID：15774836
> 
> 赞同：0
> 
> 时间：2013-04-02T21:33:55.030
> 
> 标签：user-interface, pyqt4, python-2.5, qlistwidget, qpushbutton

我正在学习 PyQt4（我使用的是 4.4.4 版），而且我对 Python（Python 2.5）还很陌生。我有一个带有 QListWidget 和 QPushButton 的 GUI。我希望用户能够单击以选择列表中的条目，然后单击 QPushButton 并使所选条目消失（从 QList 中删除）。一个多星期以来，我一直在努力解决这个问题，我将非常感谢一些帮助。

目前，我的 GUI 出现了，我可以选择不同的列表项（现在一次只能选择一个），但是当我单击 QPushButton 时，什么也没有发生。选择颜色从蓝色变为灰色，但不会删除条目。命令提示符 (Windows 7) 中未显示错误。

我已经定义了一个函数 remove()，我将它用作 QPushButton 的插槽。我相信 QPushButton.connect 是为 Qt Signal to Python Slot 正确定义的，基于我所看到的类似问题的答案，但这些项目没有被删除。但是，删除功能甚至没有被触发。我在函数中有一个打印语句，但是当我单击 QPushButton 时它没有被调用，这就是我知道该函数没有被调用的方式。

这是我最近的代码：（我在 meta-SO 上阅读了一篇关于大块代码的非常咆哮的帖子，因此我将其缩减为我认为相关的部分：列表创建、按钮创建和删除功能，我试图将其用作插槽。我在评论中留下了指示其他部分的内容，所以如果您认为我遗漏了一些可以提供帮助的内容，请告诉我，我会添加它回来了）

```
class questionGUI(QtGui.QWidget):
#This class is the window of the gui.

    def __init__(self):
        super(questionGUI,self).__init__()
        #Layout
        grid = QtGui.QGridLayout()
        grid.setSpacing(10)

        #Labels Needed
        ...

        #Question List
        self.qList = QtGui.QListWidget()
        #print self.qList
        self.qList.setSelectionMode(QtGui.QAbstractItemView.SingleSelection)
        entries = ['[Pick Image] <Default>','[Slider Question] <Default>', '[Comment Box] <Default>']

        for i in entries:
            item = QtGui.QListWidgetItem(i)
            self.qList.addItem(item)

        #Type select
        ...

        #Text insert Needed
        ...

        #Buttons Needed
        deleteButton = QtGui.QPushButton('Delete Question')
        deleteButton.connect(deleteButton,QtCore.SIGNAL('itemClicked(clicked)'),lambda: self.remove)

        addQuestionButton = QtGui.QPushButton('Add Question')
        ...

        doneButton = QtGui.QPushButton('Done')
        ...

        #Parameters Needed
        ...

        #Layout Placement and Window dimensions
        ...

    def addQuestion(self):
        ...

    def remove(self):
        print 'remove triggered'
        print self.qList.currentItem()
        self.qList.removeItemWidget(self.qList.currentItem())

... 
```

我试图发布图片，但我没有足够的声誉。如果您认为图片有用，请告诉我，我可以将其发送给您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:26:01.680

你混合了信号：

```
deleteButton.connect(deleteButton,QtCore.SIGNAL('itemClicked(clicked)'),lambda: self.remove) 
```

`deleteButton`是 a `QPushButton`，但`itemClicked(clicked)` *看起来像是*来自`QListWidget`签名错误的信号。因为，`QPushButton`没有这个信号，所以没有建立连接。Qt 不会为失败的连接引发错误，但`.connect`方法有一个`bool`返回值，指示尝试连接的成功/失败。

此外，`lambda: self.remove`作为一个插槽没有意义。Slot 应该是在信号发射时调用的可调用对象。当然，`lambda`创建一个函数，但你所做的只是*引用*方法`self.remove`。`lambda`会叫，`self.remove`不会。就像`self.remove`一个插槽就足够了。

您应该使用按钮的[`clicked()`](http://doc.qt.digia.com/4.3/qabstractbutton.html#clicked)信号（或者`clicked(bool)`，如果您关心`checked`值）：

```
deleteButton.connect(deleteButton, QtCore.SIGNAL('clicked()'), self.remove) 
```

**编辑**

另一个问题：你的`remove`方法没有达到你想要的效果。`removeItemWidget`不会删除*item*，它会删除item*内*的小部件（如果您设置了一个）。它与`setItemWidget`.

您应该使用`takeItem`删除项目。

```
def remove(self):
    self.qList.takeItem(self.qList.currentRow()) 
```

# html - 在容器中使用网格背景图像

> ID：15774840
> 
> 赞同：0
> 
> 时间：2013-04-02T21:34:00.043
> 
> 标签：html, css

我正在使用骨架框架来构建网站，并且在设计过程中我想将 960px 的网格图像作为背景，因为它更容易构建所有元素。

但是如果我将网格图像作为主体背景，图像与 960px 容器不匹配，如果我将网格图像作为 960px 容器的背景，则图像不会显示在浏览器中。

可能这很容易，但我不知道该怎么做。

也欢迎任何其他关于如何在设计过程中查看网格的提示。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:36:08.417

您需要将容器包装在带有背景的 div 中。然后只需将您的内容放入容器 div 中。很简单，还有很多其他方法可以做到这一点，这是我的首选方式，因为在未来的设计中，您会在向容器 div 添加内容时注意到填充和边距问题

```
.wrapper {

background-image: url ('../YOURSITE/IMAGE.JPG');
width: 960px;
background-repeat: repeat;
}
.container {

width: 960px;
}

<html>
<body>

<div class="wrapper">

<div class="container">

</div>
<!--end container-->
</div>
<!--end wrapper-->

</html>
</body> 
```

# asp.net - 发布应用程序找不到存在的文件

> ID：15774848
> 
> 赞同：13
> 
> 时间：2013-04-02T21:34:36.123
> 
> 标签：asp.net, .net, asp.net-mvc

我今天尝试发布我之前发布过多次的应用程序时遇到了这个问题。我正在尝试发布到目录。

我遇到的问题是，如果我转到我的应用程序目录`C:\www\clients\clientsite\app\clientproject\Properties\PublishProfiles`，下面的错误表明它找不到文件，我可以清楚地看到该`git.pubxml`文件。

`Copying file Properties\PublishProfiles\git.pubxml to obj\Release\Package\PackageTmp\Properties\PublishProfiles\git.pubxml failed. Could not find file 'Properties\PublishProfiles\git.pubxml'.`

我检查了目录安全设置，这些设置是正确的。我尝试删除我的`bin`，`obj`但没有任何改变。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-08T20:22:52.127

通常，这里的解决方案是在记事本中编辑项目文件本身。

找到受影响路径的技巧是检查 OUTPUT 窗口，而不是 ERROR LIST 窗口。

找到受影响的文件路径后，在项目文件中搜索它并删除引用。

在大多数情况下，项目文件中麻烦的行如下所示：

```
<Content include="{your path}" /> 
```

继续删除包含直到发布作品。

**重要提示：**如果在执行此操作时保持 Visual Studio 处于打开状态，则必须接受“全部重新加载”提示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-24T18:26:54.810

从我的文件系统中删除所有未版本控制的文件后，我遇到了这个问题（这导致一些`.pubxml.user`文件丢失。

如果您右键单击项目节点并单击“发布”，然后选择导致问题的发布配置文件，然后只需关闭发布对话框，Visual Studio 将询问您是否要保存更改...当您单击“是”时，它会重新生成该`.pubxml.user`文件和一切再次正常。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T22:51:56.467

您是否确保该文件确实存在**于项目中？**我在团队中工作时遇到问题，我编写的某些文件最终没有作为项目文件出现在 VS 中，所以当我们发布时，它在发布中不存在。如果在VS里面找不到，确保你没有调试，把文件放到项目文件结构中，然后正常发布。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T13:35:43.830

VS 说它找不到该文件，因为该`git.pubxml` 目录中的文件是 type`USER File`并且它需要是`PUBXML`. 当我从同一个项目的另一个版本添加正确的文件类型时，我能够再次发布该项目。我相信该`PUBXML`文件在源代码管理中被错误地删除了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-16T14:44:15.210

更新后的二进制文件通常会发生这种情况。一些包删除了它自己的 .xml 和 .pubxml 文件，而 Visual Studio 仍然认为它是项目的一部分。

除了项目目录树中的文件名之外，您需要检查**黄色三角形**并删除这些文件，它们没有用，因为您的项目编译时没有错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-03T14:59:37.867

尝试更改发布设置。如果您选中“发布期间预编译”，这将重新创建您的 .pubxml.user 文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-16T13:31:57.607

我查看了 PublishProfiles 部分下的解决方案资源管理器，发现该文件已被排除并且有一个“！” 通过它显示未找到文件的警告。我删除了它，然后进入我的发布设置来编辑配置文件。我改变了一些东西（让我在发布期间编译文件。）然后我尝试重新发布解决方案，它成功了！

# .net - MSMQ 不能与 .net 框架 4.5 跨服务器工作

> ID：15774849
> 
> 赞同：4
> 
> 时间：2013-04-02T21:34:36.350
> 
> 标签：.net, msmq, .net-4.5

安装 VS2012 并尝试使用多年未进行有意义修改的古老应用程序后，MSMQ 消息正在丢失。

研究证明它们正在目标服务器上进行处理，但由于响应队列不正确而无法正确返回。它使用的是 PRIVATE: 格式，而不是传递给构造函数的 DIRECT:OS: 格式。

具体来说，这是执行的：

`Dim lobj_Queue As New MessageQueue("FormatName:DIRECT=OS:" & astrServer & "\" & astrQueue)`

where`astrServer`是我的本地机器`astrQueue`的名称，也是我希望将响应放入的响应队列的名称。

生成的队列格式名称`"PRIVATE=d69f93e2-18f1-42eb-a468-84ca521efb5b\00000298"`不能用于跨林活动。

运行为 .net framework 3.5 构建的相同应用程序正常工作。

.net 4.5 似乎试图自动解析队列格式。在某一时刻，根据[http://connect.microsoft.com/VisualStudio/feedback/details/762194/accessing-messagequeue-formatname-throws-an-exception-on-queues-returned-by-getprivatequeuesbymachine-remotemachine-on- a-workgroup-computer#details](http://connect.microsoft.com/VisualStudio/feedback/details/762194/accessing-messagequeue-formatname-throws-an-exception-on-queues-returned-by-getprivatequeuesbymachine-remotemachine-on-a-workgroup-computer#details)此行为导致异常。

调试到`MessageQueue.FormatName`属性的来源显示，当前，抛出的异常已经被处理，并且它回退到之前的解析队列路径的方法。这会为目标服务器第一次生成有效的队列路径，因此消息到达服务器并被处理，但是在本地机器上生成响应队列时，调用成功并生成目标无法理解的格式名称服务器，因此永远不会收到服务器的响应，并且永远保留在传出队列中。

有没有办法继续使这项工作？据我所知，没有办法使用私有响应队列，因为您在本地生成的任何名称都只能在同一个林中理解。

我希望我缺少一些东西，鉴于完全缺乏针对这种特定情况的答案，有一个明显的解决方案可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:02:39.377

在处理了一段时间低效的解决方法后，我们的一位同事找到了解决该问题的方法：

在客户端计算机上，您需要卸载该`Directory Services Integration`功能，该功能位于`Message Queuing`和下`Message Queuing Services`。

然后请求能够被正确地路由回发送者。我不确定此功能是由 .NET 4.5 自动添加还是由它简单修改，但禁用它会立即解决问题（正在运行的 Web 应用程序甚至没有重新启动 - 下一个请求刚刚起作用）

# c# - WPF，窗口大小调整为文本框调整大小

> ID：15774854
> 
> 赞同：1
> 
> 时间：2013-04-02T21:35:13.873
> 
> 标签：c#, .net, wpf

所以我发布了这个问题，但建议的答案似乎不起作用。所以再一次，重新发布它，更简单的 XAML 版本。我们通常期望 TextBox 的大小随着 Window 的调整而调整。我想要“其他方式”的行为。占据整个窗口区域的文本框。文本框的大小增加/缩小，窗口跟随。请建议这样做的方法。

```
<Window>
    <Grid HorizontalAlignment="Stretch">
        <TextBox Width="Auto">            
        </TextBox>
    </Grid>
 </Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:42:38.957

```
<Window x:Class="MiscSamples.SizeToContent"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SizeToContent" SizeToContent="WidthAndHeight" ResizeMode="NoResize">
    <Grid HorizontalAlignment="Stretch">
        <TextBox Width="Auto" AcceptsReturn="True">
        </TextBox>
    </Grid>
</Window> 
```

请注意，您必须包含`ResizeMode="NoResize"`，因为如果用户手动调整窗口大小，则行为会丢失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T21:41:50.340

您可以为文本框命名，然后将窗口宽度绑定到文本框的大小，如下所示：

```
<Window Width="{Binding ElementName=txtbox, Path=ActualWidth}">
   <Grid HorizontalAlignment="Stretch">
      <TextBox x:Name="txtbox" Width="Auto">            
      </TextBox>
   </Grid>
</Window> 
```

我没有包含任何调整文本框大小的代码（我假设您将通过编程方式执行此操作），但是使用此 XAML，窗口应该调整为文本框宽度。

# c++ - 不直接使用字符串时CreateProcess@Unhandled异常

> ID：15774858
> 
> 赞同：1
> 
> 时间：2013-04-02T21:35:29.103
> 
> 标签：c++, string, winapi, createprocess

我正在尝试使用 CreateProcess 打开游戏 .exe，但我遇到了未处理的异常错误。我已经弄清楚了问题和解决方案，但是我需要从文件对话框中获取 CreateProcess 的第二个参数的路径（该部分已完成并且可以工作）。问题是：

对于 CreateProcess 的第二个参数，我需要声明一个带有它的值的变量（第二个参数），但是如果我“指向”它指向在文件对话框中选择的文件的路径变量，它不会不再工作了。

如果这是一个非常愚蠢的问题，我很抱歉，但我从 C++ 开始。

有效的代码在这里：

```
 wchar_t szGameDir[] = L"PATH_TO_EXE";

    if ( CreateProcess (
        NULL,
        szGameDir, NULL, NULL, FALSE,
        CREATE_UNICODE_ENVIRONMENT,
        NULL, NULL,
        &pstStartupInfo, &pstProcInfo ) ) 
```

但是当我将 szGameDir 设置为 'pszGameDir' 的值（用户选择的 EXE 的路径）时，它给出了未处理的异常错误......

```
wchar_t* szGameDir = pszGameDir;

if ( CreateProcess (
        NULL,
        szGameDir, NULL, NULL, FALSE,
        CREATE_UNICODE_ENVIRONMENT,
        NULL, NULL,
        &pstStartupInfo, &pstProcInfo ) ) 
```

这就是我初始化“pszGameDir”的地方：

```
OPENFILENAME DialogBox;
ZeroMemory ( &DialogBox, sizeof(DialogBox) );

DialogBox.lStructSize       = sizeof(OPENFILENAME);
DialogBox.hwndOwner         = NULL;
DialogBox.lpstrFilter       = L"Grand Theft Auto: Vice City (*.exe)\0*.exe\0";
DialogBox.lpstrFile         = (LPTSTR)this->pszGameDir;
DialogBox.nMaxFile          = MAX_PATH;
DialogBox.nMaxFileTitle     = sizeof ( L"gta-vc.exe" );
DialogBox.lpstrTitle        = L"Please, select 'gta-vc.exe'";
DialogBox.Flags             = 0x02000000 | 0x00001000 | 0x00000400 | 0x10000000 | 0x00020000 | 0x00000800 | 0x0000008;
DialogBox.nFileExtension    = (WORD)"exe";
DialogBox.lpstrDefExt       = L"exe";

return GetOpenFileName ( &DialogBox ) != 0 ? 1 : NULL; 
```

有人能帮我吗？（是的，我已经搜索过了，但老实说我还没有找到这个具体的东西，我也无法修复它..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:09:07.280

CreateProcess 需要命令行参数是可写的。阅读[MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425%28v=vs.85%29.aspx)上的论点描述：

> 此函数的 Unicode 版本 CreateProcessW 可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突。

恐怕它必须是可写的。

# javascript - javascript/jquery onClick 使浏览器全屏

> ID：15774864
> 
> 赞同：1
> 
> 时间：2013-04-02T21:35:56.397
> 
> 标签：javascript, jquery

我正在寻找一种创建按钮的方法，单击它时浏览器应该会全屏显示。*这应该是按钮。

请，任何想法！

我发现了这个类似的帖子，我想这就是解决方案！ [onclick go full screen](https://stackoverflow.com/questions/3900701/onclick-go-full-screen)但是这个问题稍后再回来，希望有人有新的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:38:30.767

你不能。没有办法自动全屏。相反，您可以指示/请求您的用户按 F11 手动进入全屏，但它应该是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:01:33.283

well here i what I found, it works but not sure for cross-browser support!

```
<div id="specialstuff" style="display: none;">
    </p><p>Status: <span id="fsstatus" class="fullScreenSupported">Back to normal</span></p>
</div>
<input type="button" value="Go Fullscreen" id="fsbutton">

<script>

/* 
Native FullScreen JavaScript API
-------------
Assumes Mozilla naming conventions instead of W3C for now
*/

(function() {
    var 
        fullScreenApi = { 
            supportsFullScreen: false,
            isFullScreen: function() { return false; }, 
            requestFullScreen: function() {}, 
            cancelFullScreen: function() {},
            fullScreenEventName: '',
            prefix: ''
        },
        browserPrefixes = 'webkit moz o ms khtml'.split(' ');

    // check for native support
    if (typeof document.cancelFullScreen != 'undefined') {
        fullScreenApi.supportsFullScreen = true;
    } else {     
        // check for fullscreen support by vendor prefix
        for (var i = 0, il = browserPrefixes.length; i < il; i++ ) {
            fullScreenApi.prefix = browserPrefixes[i];

            if (typeof document[fullScreenApi.prefix + 'CancelFullScreen' ] != 'undefined' ) {
                fullScreenApi.supportsFullScreen = true;

                break;
            }
        }
    }

    // update methods to do something useful
    if (fullScreenApi.supportsFullScreen) {
        fullScreenApi.fullScreenEventName = fullScreenApi.prefix + 'fullscreenchange';

        fullScreenApi.isFullScreen = function() {
            switch (this.prefix) {  
                case '':
                    return document.fullScreen;
                case 'webkit':
                    return document.webkitIsFullScreen;
                default:
                    return document[this.prefix + 'FullScreen'];
            }
        }
        fullScreenApi.requestFullScreen = function(el) {
            return (this.prefix === '') ? el.requestFullScreen() : el[this.prefix + 'RequestFullScreen']();
        }
        fullScreenApi.cancelFullScreen = function(el) {
            return (this.prefix === '') ? document.cancelFullScreen() : document[this.prefix + 'CancelFullScreen']();
        }       
    }

    // jQuery plugin
    if (typeof jQuery != 'undefined') {
        jQuery.fn.requestFullScreen = function() {

            return this.each(function() {
                var el = jQuery(this);
                if (fullScreenApi.supportsFullScreen) {
                    fullScreenApi.requestFullScreen(el);
                }
            });
        };
    }

    // export api
    window.fullScreenApi = fullScreenApi;   
})();

</script>

<script>

// do something interesting with fullscreen support
var fsButton = document.getElementById('fsbutton'),
    fsElement = document.getElementById('specialstuff'),
    fsStatus = document.getElementById('fsstatus');

if (window.fullScreenApi.supportsFullScreen) {
    fsStatus.innerHTML = 'YES: Your browser supports FullScreen';
    fsStatus.className = 'fullScreenSupported';

    // handle button click
    fsButton.addEventListener('click', function() {
        window.fullScreenApi.requestFullScreen(fsElement);
    }, true);

    fsElement.addEventListener(fullScreenApi.fullScreenEventName, function() {
        if (fullScreenApi.isFullScreen()) {
            fsStatus.innerHTML = 'Whoa, you went fullscreen';
        } else {
            fsStatus.innerHTML = 'Back to normal';
        }
    }, true);

} else {
    fsStatus.innerHTML = 'SORRY: Your browser does not support FullScreen';
}

</script> 
```

# php - 将 CallbackFunction 作为 Ajax-Request 的参数传递

> ID：15774865
> 
> 赞同：0
> 
> 时间：2013-04-02T21:35:56.523
> 
> 标签：php, javascript, ajax

我想异步获取我的网站的内容。现在我对我的服务器有多个请求，我认为将“连接东西”分离到另一个函数中会很棒：

```
function conToServerAsync( url, postParams, func )
{
   var xmlHttp;
   if( window.XMLHttpRequest )
   {
      xmlHttp = new XMLHttpRequest();
   }
   else
   {
      xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlHttp.onreadystatechange = func;
   xmlHttp.open("POST", url, true);
   xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   xmlHttp.setRequestHeader("Connection", "close");
   xmlHttp.send(postParams);
} 
```

现在我有另一个执行“conToServerAsync”函数的函数，如下所示：

```
function findSearchResult(value)
{
  conToServerAsync( "Classes/Async/liveSearch.php", "sVal="+value, function()
  {
    if(xmlHttp.readyState == 4 && xmlHttp.status == 200)
    {
    document.getElementById("searchResult").innerHTML = xmlHttp.responseText;
    document.getElementById("searchResult").style.border="1px solid #A5ACB2";
    }
  });
} 
```

现在，我的案例真正有趣的是，我已经检查了所有内容，并且传入的每个参数都是有效的。然后我尝试将最后一个参数“conToServerAsync("Classes...", "sVal..", function(){...}" 中给出的函数直接分配给 onreadystatechange：

```
...
xmlHttp.onreadystatechange = function()
        {
            if(xmlHttp.readyState == 4 && xmlHttp.status == 200)
            {
            document.getElementById("searchResult").innerHTML = xmlHttp.responseText;
            document.getElementById("searchResult").style.border="1px solid #A5ACB2";
            }
      } 
```

...而且它工作得很好：S 所以肯定错误是关于以错误的方式传递函数，我不知道。因为我的情况是具体的，我对此提出了自己的问题。

谢谢你的回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:38:47.710

您正在尝试`xmlHttp`从回调中使用，但它超出了范围。我建议采用以下方法：

```
function conToServerAsync( url, postParams, func )
{
   var xmlHttp;
   if( window.XMLHttpRequest )
   {
      xmlHttp = new XMLHttpRequest();
   }
   else
   {
      xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlHttp.onreadystatechange = function() {
      if(xmlHttp.readyState == 4 && xmlHttp.status == 200) {
         func.call(xmlHttp, xmlHttp);
      }
   }
   xmlHttp.open("POST", url, true);
   xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   xmlHttp.setRequestHeader("Connection", "close");
   xmlHttp.send(postParams);
}

function findSearchResult(value)
{
  conToServerAsync( "Classes/Async/liveSearch.php", "sVal="+value, function(xhr)
  {
    document.getElementById("searchResult").innerHTML = xhr.responseText;
    document.getElementById("searchResult").style.border="1px solid #A5ACB2";
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:50:39.697

在 XMLHttp 包装器的实现中，我使用[Function.prototype.call](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call)从 XMLHttp 对象范围调用回调函数，因此您可以使用关键字`this`访问属性，并且为了方便起见，我还将 responseText 作为参数传递。

```
if(typeof func=="function")
    func.call(xmlHttp, xmlHttp.responseText); 
```

您可以轻松地在回调上打印响应

```
function callback(response){
    alert(response);
} 
```

但是您仍然可以访问 XMLHttp 对象的所有属性

```
function callback(response){
    alert(this.status); //200
    alert(response);
} 
```

完整代码：

```
function conToServerAsync( url, postParams, func ){

   var xmlHttp;
   if( window.XMLHttpRequest ){
      xmlHttp = new XMLHttpRequest();
   }
   else{
      xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlHttp.onreadystatechange = function() {
      if(xmlHttp.readyState==4 && xmlHttp.status==200){
        if(typeof func=="function")
            func.call(xmlHttp, xmlHttp.responseText);
      }
   }
   xmlHttp.open("POST", url, true);
   xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   xmlHttp.setRequestHeader("Connection", "close");
   xmlHttp.send(postParams);
}

function findSearchResult(value){

  conToServerAsync( "Classes/Async/liveSearch.php", "sVal="+value, function(response){
    document.getElementById("searchResult").innerHTML = response;
    document.getElementById("searchResult").style.border="1px solid #A5ACB2";
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:16:53.310

由于您传递给的函数`xmlHttp.onreadystatechange`是作为上下文调用的，`xmlHttp`因此您可以使用它`this`来引用该对象。

```
function findSearchResult(value)
{
  conToServerAsync( "Classes/Async/liveSearch.php", "sVal="+value, function()
  {
    if(this.readyState == 4 && this.status == 200)
    {
    document.getElementById("searchResult").innerHTML = this.responseText;
    document.getElementById("searchResult").style.border="1px solid #A5ACB2";
    }
  });
} 
```

# jquery - jQuery 面板滑块闪烁

> ID：15774868
> 
> 赞同：0
> 
> 时间：2013-04-02T21:36:16.573
> 
> 标签：jquery, slider

我正在研究一个简单的连续滑块面板。它似乎可以找到，但是滑动时上一个方向会闪烁。我尝试移动 jQuery 操作的顺序，但似乎没有帮助，有什么想法吗？

[http://jsfiddle.net/isherwood/FWUSA/3](http://jsfiddle.net/isherwood/FWUSA/3)

```
$(".next").click(function () {
    $('.slides').animate({
        'marginLeft': '-=530px'
    }, function () {
        $('ul.slides li:last').after($('ul.slides li:first'));
        $(".slides").css('marginLeft', 0);
    });
});

$(".prev").click(function () {
    $('.slides').animate({
        'marginLeft': '530px'
    }, function () {
        $('ul.slides li:first').before($('ul.slides li:last'));
        $(".slides").css('marginLeft', 0);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:58:20.603

您将单个类应用于所有图像，并且您的代码适用于该类。

```
$(".slides").css('marginLeft', 0); 
```

这控制了所有具有幻灯片类的元素。由于您的所有图像都具有该类，因此它们都会立即移动。您需要找到一种方法来区分每个图像。尝试添加一个`.next()`. [http://api.jquery.com/next/](http://api.jquery.com/next/)

****** *** ** *** ****我的意见****** ** *** ** *** ******

 **我相信您正在尝试创建一个 JQuery 滑块？

几周前我沿着这条路走。虽然我有一个最终能正常工作，但它不是很好。需要大量的浏览器解决方法和黑客攻击。我建议使用插件。我正在使用 Flexslider。 [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

它可以定制，简单，使用JQuery，轻量级。**

# android - 如何添加新的表格列？

> ID：15774872
> 
> 赞同：0
> 
> 时间：2013-04-02T21:36:29.223
> 
> 标签：android, android-sqlite

这是我的 Android 项目。我试图创建一个新的表列：KEY_EXAMPLE。但它不起作用。我将把我的代码放在下面，我想解决这个问题。有人能帮助我吗？这很重要。我是新手。KEY_EXAMPLE 不起作用。这是我的代码，也是我正在尝试进行的锻炼。

字典数据库.Java

```
public class DictionaryDatabase {
private static final String TAG = "DictionaryDatabase";

public static final String KEY_WORD = SearchManager.SUGGEST_COLUMN_TEXT_1;
public static final String KEY_DEFINITION = SearchManager.SUGGEST_COLUMN_TEXT_2;
public static final String KEY_EXAMPLE = SearchManager.SUGGEST_COLUMN_INTENT_EXTRA_DATA;

private static final String DATABASE_NAME = "dictionary";
private static final String FTS_VIRTUAL_TABLE = "FTSdictionary";
private static final int DATABASE_VERSION = 3;

private final DictionaryOpenHelper mDatabaseOpenHelper;
private static final HashMap<String,String> mColumnMap = buildColumnMap();

public DictionaryDatabase(Context context) {
    mDatabaseOpenHelper = new DictionaryOpenHelper(context);
}

private static HashMap<String,String> buildColumnMap() {
    HashMap<String,String> map = new HashMap<String,String>();
    map.put(KEY_WORD, KEY_WORD);
    map.put(KEY_DEFINITION, KEY_DEFINITION);
    map.put(KEY_EXAMPLE, KEY_EXAMPLE);
    map.put(BaseColumns._ID, "rowid AS " +
            BaseColumns._ID);
    map.put(SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID, "rowid AS " +
            SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID);
    map.put(SearchManager.SUGGEST_COLUMN_SHORTCUT_ID, "rowid AS " +
            SearchManager.SUGGEST_COLUMN_SHORTCUT_ID);
    return map;
}

public Cursor getWord(String rowId, String[] columns) {
    String selection = "rowid = ?";
    String[] selectionArgs = new String[] {rowId};

    return query(selection, selectionArgs, columns);

}

public Cursor getWordMatches(String query, String[] columns) {
    String selection = KEY_WORD + " MATCH ?";
    String[] selectionArgs = new String[] {query+"*"};

    return query(selection, selectionArgs, columns);

}

private Cursor query(String selection, String[] selectionArgs, String[] columns) {

    SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
    builder.setTables(FTS_VIRTUAL_TABLE);
    builder.setProjectionMap(mColumnMap);

    Cursor cursor = builder.query(mDatabaseOpenHelper.getReadableDatabase(),
            columns, selection, selectionArgs, null, null, null);

    if (cursor == null) {
        return null;
    } else if (!cursor.moveToFirst()) {
        cursor.close();
        return null;
    }
    return cursor;
}

private static class DictionaryOpenHelper extends SQLiteOpenHelper {

    private final Context mHelperContext;
    private SQLiteDatabase mDatabase;

    private static final String FTS_TABLE_CREATE =
                "CREATE VIRTUAL TABLE " + FTS_VIRTUAL_TABLE +
                " USING fts3 (" +
                KEY_WORD + ", " +
                KEY_DEFINITION + 
                KEY_EXAMPLE + ");";

    DictionaryOpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        mHelperContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        mDatabase = db;
        mDatabase.execSQL(FTS_TABLE_CREATE);
        loadDictionary();
    }

    private void loadDictionary() {
        new Thread(new Runnable() {
            public void run() {
                try {
                    loadWords();
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }).start();
    }

    private void loadWords() throws IOException {
        Log.d(TAG, "Loading words...");
        final Resources resources = mHelperContext.getResources();
        InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] strings = TextUtils.split(line, "-");
                if (strings.length < 2) continue;
                long id = addWord(strings[0].trim(), strings[1].trim(), strings[2].trim());
                if (id < 0) {
                    Log.e(TAG, "unable to add word: " + strings[0].trim());
                }
            }
        } finally {
            reader.close();
        }
        Log.d(TAG, "DONE loading words.");
    }

    public long addWord(String word, String definition, String example) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_WORD, word);
        initialValues.put(KEY_DEFINITION, definition);
        initialValues.put(KEY_EXAMPLE, example);

        return mDatabase.insert(FTS_VIRTUAL_TABLE, null, initialValues);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + FTS_VIRTUAL_TABLE);
        onCreate(db);
    }
}

} 
```

DictionaryProvider.Java

```
public class DictionaryProvider extends ContentProvider {
String TAG = "DictionaryProvider";

public static String AUTHORITY = "com.pesquisa.dicionario.searchabledict.DictionaryProvider";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/dictionary");

public static final String WORDS_MIME_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE +
                                              "/vnd.pesquisa.dicionario.searchabledict";
public static final String DEFINITION_MIME_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE +
                                                   "/vnd.pesquisa.dicionario.searchabledict";

private DictionaryDatabase mDictionary;

private static final int SEARCH_WORDS = 0;
private static final int GET_WORD = 1;
private static final int SEARCH_SUGGEST = 2;
private static final int REFRESH_SHORTCUT = 3;
private static final UriMatcher sURIMatcher = buildUriMatcher();

private static UriMatcher buildUriMatcher() {
    UriMatcher matcher =  new UriMatcher(UriMatcher.NO_MATCH);
    matcher.addURI(AUTHORITY, "dictionary", SEARCH_WORDS);
    matcher.addURI(AUTHORITY, "dictionary/#", GET_WORD);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SEARCH_SUGGEST);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY + "/*", SEARCH_SUGGEST);

    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT, REFRESH_SHORTCUT);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT + "/*", REFRESH_SHORTCUT);
    return matcher;
}

@Override
public boolean onCreate() {
    mDictionary = new DictionaryDatabase(getContext());
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
                    String sortOrder) {

    switch (sURIMatcher.match(uri)) {
        case SEARCH_SUGGEST:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return getSuggestions(selectionArgs[0]);
        case SEARCH_WORDS:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return search(selectionArgs[0]);
        case GET_WORD:
            return getWord(uri);
        case REFRESH_SHORTCUT:
            return refreshShortcut(uri);
        default:
            throw new IllegalArgumentException("Unknown Uri: " + uri);
    }
}

private Cursor getSuggestions(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor search(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      DictionaryDatabase.KEY_EXAMPLE};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor getWord(Uri uri) {
  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      DictionaryDatabase.KEY_EXAMPLE};

  return mDictionary.getWord(rowId, columns);
}

private Cursor refreshShortcut(Uri uri) {

  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      DictionaryDatabase.KEY_EXAMPLE,
      SearchManager.SUGGEST_COLUMN_SHORTCUT_ID,
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWord(rowId, columns);
}

@Override
public String getType(Uri uri) {
    switch (sURIMatcher.match(uri)) {
        case SEARCH_WORDS:
            return WORDS_MIME_TYPE;
        case GET_WORD:
            return DEFINITION_MIME_TYPE;
        case SEARCH_SUGGEST:
            return SearchManager.SUGGEST_MIME_TYPE;
        case REFRESH_SHORTCUT:
            return SearchManager.SHORTCUT_MIME_TYPE;
        default:
            throw new IllegalArgumentException("Unknown URL " + uri);
    }
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    throw new UnsupportedOperationException();
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    throw new UnsupportedOperationException();
}

@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    throw new UnsupportedOperationException();
}

} 
```

SenseDictionary.Java（主要活动）

```
public class SenseDictionary extends Activity {

private TextView mTextView;
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.text);
    mListView = (ListView) findViewById(R.id.list);

    handleIntent(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }
}

private void showResults(String query) {

    Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                            new String[] {query}, null);

    if (cursor == null) {
        mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    } else {
        int count = cursor.getCount();
        String countString = getResources().getQuantityString(R.plurals.search_results,
                                count, new Object[] {count, query});
        mTextView.setText(countString);

        String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                       DictionaryDatabase.KEY_DEFINITION,
                                       DictionaryDatabase.KEY_EXAMPLE};

        int[] to = new int[] { R.id.word,
                               R.id.definition,
                               R.id.example};

        SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                      R.layout.result, cursor, from, to);
        mListView.setAdapter(words);

        mListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                String.valueOf(id));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        default:
            return false;
    }
}
} 
```

单词活动

```
public class WordActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.word);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    Uri uri = getIntent().getData();
    Cursor cursor = managedQuery(uri, null, null, null, null);

    if (cursor == null) {
        finish();
    } else {
        cursor.moveToFirst();

        TextView word = (TextView) findViewById(R.id.word);
        TextView definition = (TextView) findViewById(R.id.definition);
        TextView example = (TextView) findViewById(R.id.example);

        int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
        int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);
        int eIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_EXAMPLE);

        word.setText(cursor.getString(wIndex));
        definition.setText(cursor.getString(dIndex));
        example.setText(cursor.getString(eIndex));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        case android.R.id.home:
            Intent intent = new Intent(this, SenseDictionary.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:50:56.097

我想帮助你，但有一些问题。

第一：您一个小时前才发布了这个问题。一般来说，stackoverflow 社区不会急切地等待下一个问题的出现。您必须耐心等待。

第二：您只发布了您的程序。可能有人愿意一步一步地去解决问题，我祝他或她好运，但我会犹豫。stackoverflow 不是我的全职工作，所以我不能花 15-20 分钟来弄清楚你的程序做了什么（如果有的话）。这不是一个简单的程序。您有一个数据库、一个内容提供者和两个活动。

第三：您的程序没有一条评论。使调试变得更加困难。

第四：你说“我试图创建一个新的表列：KEY_EXAMPLE。但它不起作用。” 怎么了？为什么你认为它不起作用？你期望它做什么？

当您有一个让您难以理解的特定问题或问题时，stackoverflow“有效”。本质上，当您问“为我修复我的程序”时，它的效果最差。

说了这么多，我冒昧地猜测一下：您之前是否运行过这个应用程序并创建了以前版本的数据库？如果是这样，我看不到您要删除以前版本的任何地方。在删除旧版本之前，您将无法创建新版本，包括新列。您可以在“设置”>“应用程序”>“应用程序*名称*” >“清除数据”中执行此操作，也可以将其放入程序本身。

祝你好运！

# c++ - 无法重载对 *this 的引用

> ID：15774876
> 
> 赞同：4
> 
> 时间：2013-04-02T21:37:03.740
> 
> 标签：c++, c++11, reference, this, rvalue

这是我为 N2439（'this' 的引用限定符）编写的一个busybox，用于使用 gcc-4.8.1+ 中的新功能（我认为 clang-2.9+ 也应该这样做）：

```
class Foo
{
public:
  Foo(int i) : _M_i(i) { }
  int bar() & { return _M_i /= 2; }
  int bar() const & { return _M_i; }
  int bar() && { return 2 * _M_i; }

private:
  int _M_i = 42;
};

int
main()
{
  Foo ph(333);
  ph.bar();

  const Foo ff(123);
  ff.bar();

  Foo(333).bar();
} 
```

在我阅读标准 8.3.5 时，这三个 bar() 方法应该是可重载的。我得到一个链接器错误：

```
[ed@localhost ref_this]$ ../bin/bin/g++ -std=c++11 -o ref_this ref_this.cpp
/tmp/ccwPhzqr.s: Assembler messages:
/tmp/ccwPhzqr.s:73: Error: symbol `_ZN3Foo3barEv' is already defined 
```

如果我注释掉`int bar() const &`我无法解决`ff.bar();`：

```
[ed@localhost ref_this]$ ../bin/bin/g++ -std=c++11 -o ref_this ref_this.cpp
ref_this.cpp: In function ‘int main()’:
ref_this.cpp:26:10: error: no matching function for call to ‘Foo::bar() const’
   ff.bar();
          ^
ref_this.cpp:26:10: note: candidates are:
ref_this.cpp:11:7: note: int Foo::bar() &
   int bar() & { return _M_i /= 2; }
       ^
ref_this.cpp:11:7: note:   no known conversion for implicit ‘this’ parameter from ‘const Foo’ to ‘Foo&’
ref_this.cpp:13:7: note: int Foo::bar() &&
   int bar() && { return 2 * _M_i; }
       ^
ref_this.cpp:13:7: note:   no known conversion for implicit ‘this’ parameter from ‘const Foo’ to ‘Foo&&’ 
```

这是 gcc 错误还是标准的一部分？

我不在我的电脑上，但叮当声说什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:37:58.687

直到 4.8.0 版的 GCC 不支持此功能。[它应该得到 GCC 4.8.1 的支持，它还](http://gcc.gnu.org/projects/cxx0x.html)没有正式发布。

据我所知，目前唯一支持成员函数引用限定符的主要编译器是 Clang。从[这个例子](http://liveworkspace.org/code/48Ihhx%24254)中你可以看到，你的代码在 Clang 3.2 上编译得很好。

# jquery - 在页面加载时使用 JQuery 提交表单

> ID：15774877
> 
> 赞同：0
> 
> 时间：2013-04-02T21:37:07.017
> 
> 标签：jquery, html, forms, certificate-authority

我的 Microsoft Active Directory 证书服务器上有一个“用户证书”表单。表单托管在 URL 上：

```
 https://mycaserver/certsrv/certrqbi.asp?type=0. 
```

此表单的简化 html 为：

```
<html>
<body>
<Form Name=SubmittedData Action="certfnsh.asp" OnSubmit="return goNext();" Method=Post>
    <Input Type=Hidden Name=Mode>             <!-- used in request ('newreq'|'chkpnd') -->
    <Input Type=Hidden Name=CertAttrib>       <!-- used in request -->
    <Input Type=Hidden Name=FriendlyType>     <!-- used on pending -->
    <TR><TD></TD>
        <TD ID=locSubmitAlign Align=Right>
        <Input ID=locBtnSubmit Type=Submit Name=btnSubmit Value="Submit &gt;" >
    </TD></TR>
</Table>
</Form>
</body>
</html> 
```

我想要：

*   使用 Jquery 加载上面 html 页面的 URL 并自动单击提交按钮。
*   然后在单击提交后检查响应以搜索子字符串。

有人可以给我一些指示吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:13:20.257

在这里你有一个起点

```
$(document).ready(function(){
  $('form[name="SubmittedData"]').unbind().on('submit', function(){
    var t = $(this);
    $.ajax({
      type : t.attr( 'method' ),
      url : t.attr( 'action' ),
      data : t.serialize(),
      success : function( d ){
        //Check the result in firebug (chrome developer tools) console
        console.log( d );
        // do rest of stuff after submitting for is ok
        //alert( d ); //use this if you do not have firebug
      },
      error : function(xhr, opts, error){
        console.log( error );
      }
    });
  }).trigger( 'submit' );
}); 
```

我不明白第二点，你到底需要什么。也许在您向我们展示您在“成功”步骤中得到了什么之后，我们可以使用其余的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:59:38.310

You can use the [ajax post](http://api.jquery.com/jQuery.post/) to send your form and examine the result. Put an id 'SubmittedData' on the form to make things easier,

Also, you should be loading this when JQuery is loaded, rather than when the page is loaded (small difference there:

```
$(document).ready(function(){
    $.post('certfnsh.asp', $("#SubmittedData").serialize(), function(data) {
       alert(data);
    });
}); 
```

# sql-server - 将约束移动到连接中是否比连接和 where 子句更有效？

> ID：15774878
> 
> 赞同：9
> 
> 时间：2013-04-02T21:37:09.860
> 
> 标签：sql-server, sql-server-2008, tsql

我一直在尝试对此进行测试，但由于时间差异很大，我对我的测试表示怀疑。

```
-- Scenario 1
SELECT * FROM Foo f 
    INNER JOIN Bar b ON f.id = b.id 
    WHERE b.flag = true;

-- Scenario 2 
SELECT * FROM Foo f 
    INNER JOIN Bar b ON b.flag = true AND f.id = b.id; 
```

从逻辑上讲，场景 2 似乎会更有效，但我不确定 SQL 服务器是否足够聪明来优化它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T21:45:26.900

不知道为什么你认为场景 2 会“逻辑上”是`more efficient`. 一切基本上都是一个`INNER JOIN`过滤器，因此 SQL Server 可以将逻辑折叠到完全相同的底层计划形状。这是 AdventureWorks2012 的一个示例（[点击放大](https://i.stack.imgur.com/ibiXt.png)）：

![在此处输入图像描述](https://i.stack.imgur.com/ibiXt.png)

我更喜欢将连接条件与过滤条件分开，因此将始终以左侧的格式编写查询。但是@HLGEM 提出了一个很好的观点，这些子句在这种情况下是可以互换的，只是因为它是一个`INNER JOIN`. 对于 an `OUTER JOIN`，将过滤器放在连接条件中的外部表上非常重要，否则您会不知不觉地以 an 结束`INNER JOIN`并彻底改变查询的语义。所以我关于如何折叠计划的建议只适用于内部连接。

如果您担心性能，我会首先摆脱`SELECT *`并只提取您实际需要的列（并确保有一个覆盖索引）。

四个月后，出现了另一个答案，声称通常会有性能差异，并且将过滤条件放在`ON`子句中会更好。虽然我不会质疑这肯定是有可能发生的，但我认为这肯定不是常态，也不应该成为你总是将所有过滤条件都放在`ON`子句中的借口。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-08-03T09:24:23.297

接受的答案仅对您的测试用例是正确的。

如前所述，对标题问题的回答是***肯定***的，将约束移动到连接条件可以大大改善查询和确保。我见过类似的形式（但可能不完全）......

```
select * 
  from A
 inner join B
    on B.id = a.id
 inner join C
    on C.id = A.id
 where B.z = 1 and C.z = 2; 
```

...没有优化到与“加入时”等效项相同的计划，因此我倾向于使用“加入时”约束作为最佳实践，即使对于可能以任何方式得到最佳解决的更简单的情况也是如此。

# http - 从 http 网站批量下载最新文件（新版本的文件名更改）

> ID：15774880
> 
> 赞同：0
> 
> 时间：2013-04-02T21:37:19.050
> 
> 标签：http, batch-file, download, version

我需要一批从 http 网站 ( [http://www.rarlab.com/download.htm](http://www.rarlab.com/download.htm) ) 下载文件。在这个网站上，我只需要 32 位和 64 位英文程序的最新版本，它总是列在这个网站的顶部。

问题一：网站上下载的文件不止这两个

问题 2：文件的名称随着每个新版本的变化而变化

我如何在不知道确切文件名的情况下下载这 2 个文件（最新版本）（并且无需先访问网页以查找文件名）？

也许我可以使用 wget、curl 或 aria2 来完成该任务，但我不知道参数/选项。

谁能帮我解决这个问题？

（请只使用批处理解决方案 - 没有 vbs、java、jscript、powershell 等）

谢谢你。

抱歉，我忘了说我使用的是 Windows 7 32 位。而且我更喜欢批处理，因为脚本应该能够在所有 Windows 版本上运行，而无需为不同的 Windows 版本下载额外的程序或资源包（如 powershell 必须为 windows xp 等下载） - 因为我只理解批处理脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:48:11.773

这是一个批处理 + JScript 混合脚本。我知道你说没有 vbs、java、jscript 等，但你将很难用纯批处理抓取 HTML。但这确实符合您的其他标准——在所有 Windows 版本上运行，无需依赖可选软件（如 powershell 或 .Net）。* 使用 JScript 的`XMLHTTP`对象，您甚至不需要 3rd 方应用程序来获取 Web 内容。

至于不了解 JScript，除了一些专有的 ActiveX 对象之外，它就像 JavaScript。如果您不熟悉 JavaScript 或正则表达式，我添加了大量的注释来帮助您。希望无论我懒得评论什么，它的作用都很明显。

### 更新

该脚本现在检测系统区域设置，将其与 WinRAR 下载页面上的语言匹配，并下载该语言版本。

无论如何，使用`.bat`扩展名保存它并像运行任何其他批处理脚本一样运行它。

```
@if (@a==@b) @end /*

:: batch script portion

@echo off
setlocal

set "url=http://www.rarlab.com/download.htm"
set /p "savepath=Location to save? [%cd%] "

if "%savepath%"=="" set "savepath=%cd%"

cscript /nologo /e:jscript "%~f0" "%url%" "%savepath%"

goto :EOF

:: JScript portion */

// populate translation from locale identifier hex value to WinRAR language label
// http://msdn.microsoft.com/en-us/library/dd318693.aspx
var abbrev={}, a=function(arr,val){for(var i=0;i<arr.length;i++)abbrev[arr[i]]=val};
a(['1401','3c01','0c01','0801','2001','4001','2801','1c01','3801','2401'],'Arabic');
a(['042b'],'Armenian');
a(['082c','042c'],'Azerbaijani');
a(['0423'],'Belarusian');
a(['0402'],'Bulgarian');
a(['0403'],'Catalan');
a(['7c04'],'Chinese Traditional');
a(['0c04','1404','1004','0004'],'Chinese Simplified');
a(['101a'],'Croatian');
a(['0405'],'Czech');
a(['0406'],'Danish');
a(['0813','0413'],'Dutch');
a(['0425'],'Estonian');
a(['040b'],'Finnish');
a(['080c','0c0c','040c','140c','180c','100c'],'French');
a(['0437'],'Georgian');
a(['0c07','0407','1407','1007','0807'],'German');
a(['0408'],'Greek');
a(['040d'],'Hebrew');
a(['040e'],'Hungarian');
a(['0421'],'Indonesian');
a(['0410','0810'],'Italian');
a(['0411'],'Japanese');
a(['0412'],'Korean');
a(['0427'],'Lithuanian');
a(['042f'],'Macedonian');
a(['0414','0814'],'Norwegian');
a(['0429'],'Persian');
a(['0415'],'Polish');
a(['0816'],'Portuguese');
a(['0416'],'Portuguese Brazilian');
a(['0418'],'Romanian');
a(['0419'],'Russian');
a(['7c1a','1c1a','0c1a'],'Serbian Cyrillic');
a(['181a','081a'],'Serbian Latin');
a(['041b'],'Slovak');
a(['0424'],'Slovenian');
a(['2c0a','400a','340a','240a','140a','1c0a','300a','440a','100a','480a','080a','4c0a','180a','3c0a','280a','500a','0c0a','040a','540a','380a','200a'],'Spanish');
a(['081d','041d'],'Swedish');
a(['041e'],'Thai');
a(['041f'],'Turkish');
a(['0422'],'Ukranian');
a(['0843','0443'],'Uzbek');
a(['0803'],'Valencian');
a(['042a'],'Vietnamese');

function language() {
    var os = GetObject('winmgmts:').ExecQuery('select Locale from Win32_OperatingSystem');
    var locale = new Enumerator(os).item().Locale;

    // default to English if locale is not in abbrev{}
    return abbrev[locale.toLowerCase()] || 'English';
}

function fetch(url) {
    var xObj = new ActiveXObject("Microsoft.XMLHTTP");
    xObj.open("GET",url,true);
    xObj.setRequestHeader('User-Agent','XMLHTTP/1.0');
    xObj.send('');
    while (xObj.readyState != 4) WSH.Sleep(50);
    return(xObj);
}

function save(xObj, file) {
    var stream = new ActiveXObject("ADODB.Stream");
    with (stream) {
        type = 1; // binary
        open();
        write(xObj.responseBody);
        saveToFile(file, 2); // overwrite
        close();
    }
}

// fetch the initial web page
var x = fetch(WSH.Arguments(0));

// make HTML response all one line
var html = x.responseText.split(/\r?\n/).join('');

// create array of hrefs matching *.exe where the link text contains system language
var r = new RegExp('<a\\s*href="[^"]+\\.exe(?=[^\\/]+' + language() + ')', 'g');
var anchors = html.match(r)

// use only the first two
for (var i=0; i<2; i++) {

    // use only the stuff after the quotation mark to the end
    var dl = '' + /[^"]+$/.exec(anchors[i]);

    // if the location is a relative path, prepend the domain
    if (dl.substring(0,1) == '/') dl = /.+:\/\/[^\/]+/.exec(WSH.Arguments(0)) + dl;

    // target is path\filename
    var target=WSH.Arguments(1) + '\\' + /[^\/]+$/.exec(dl)

    // echo without a new line
    WSH.StdOut.Write('Saving ' + target + '... ');

    // fetch file and save it
    save(fetch(dl), target);

    WSH.Echo('Done.');
} 
```

### 更新 2

这是相同的脚本，经过一些小调整，使其还可以检测 Windows 的体系结构（32/64 位），并且只下载一个安装程序而不是两个：

```
@if (@a==@b) @end /*

:: batch script portion

@echo off
setlocal

set "url=http://www.rarlab.com/download.htm"
set /p "savepath=Location to save? [%cd%] "

if "%savepath%"=="" set "savepath=%cd%"

cscript /nologo /e:jscript "%~f0" "%url%" "%savepath%"

goto :EOF

:: JScript portion */

// populate translation from locale identifier hex value to WinRAR language label
// http://msdn.microsoft.com/en-us/library/dd318693.aspx
var abbrev={}, a=function(arr,val){for(var i=0;i<arr.length;i++)abbrev[arr[i]]=val};
a(['1401','3c01','0c01','0801','2001','4001','2801','1c01','3801','2401'],'Arabic');
a(['042b'],'Armenian');
a(['082c','042c'],'Azerbaijani');
a(['0423'],'Belarusian');
a(['0402'],'Bulgarian');
a(['0403'],'Catalan');
a(['7c04'],'Chinese Traditional');
a(['0c04','1404','1004','0004'],'Chinese Simplified');
a(['101a'],'Croatian');
a(['0405'],'Czech');
a(['0406'],'Danish');
a(['0813','0413'],'Dutch');
a(['0425'],'Estonian');
a(['040b'],'Finnish');
a(['080c','0c0c','040c','140c','180c','100c'],'French');
a(['0437'],'Georgian');
a(['0c07','0407','1407','1007','0807'],'German');
a(['0408'],'Greek');
a(['040d'],'Hebrew');
a(['040e'],'Hungarian');
a(['0421'],'Indonesian');
a(['0410','0810'],'Italian');
a(['0411'],'Japanese');
a(['0412'],'Korean');
a(['0427'],'Lithuanian');
a(['042f'],'Macedonian');
a(['0414','0814'],'Norwegian');
a(['0429'],'Persian');
a(['0415'],'Polish');
a(['0816'],'Portuguese');
a(['0416'],'Portuguese Brazilian');
a(['0418'],'Romanian');
a(['0419'],'Russian');
a(['7c1a','1c1a','0c1a'],'Serbian Cyrillic');
a(['181a','081a'],'Serbian Latin');
a(['041b'],'Slovak');
a(['0424'],'Slovenian');
a(['2c0a','400a','340a','240a','140a','1c0a','300a','440a','100a','480a','080a','4c0a','180a','3c0a','280a','500a','0c0a','040a','540a','380a','200a'],'Spanish');
a(['081d','041d'],'Swedish');
a(['041e'],'Thai');
a(['041f'],'Turkish');
a(['0422'],'Ukranian');
a(['0843','0443'],'Uzbek');
a(['0803'],'Valencian');
a(['042a'],'Vietnamese');

function language() {
    var os = GetObject('winmgmts:').ExecQuery('select Locale from Win32_OperatingSystem');
    var locale = new Enumerator(os).item().Locale;

    // default to English if locale is not in abbrev{}
    return abbrev[locale.toLowerCase()] || 'English';
}

function fetch(url) {
    var xObj = new ActiveXObject("Microsoft.XMLHTTP");
    xObj.open("GET",url,true);
    xObj.setRequestHeader('User-Agent','XMLHTTP/1.0');
    xObj.send('');
    while (xObj.readyState != 4) WSH.Sleep(50);
    return(xObj);
}

function save(xObj, file) {
    var stream = new ActiveXObject("ADODB.Stream");
    with (stream) {
        type = 1; // binary
        open();
        write(xObj.responseBody);
        saveToFile(file, 2); // overwrite
        close();
    }
}

// fetch the initial web page
var x = fetch(WSH.Arguments(0));

// make HTML response all one line
var html = x.responseText.split(/\r?\n/).join('');

// get OS architecture (This method is much faster than the Win32_Processor.AddressWidth method)
var os = GetObject('winmgmts:').ExecQuery('select OSArchitecture from Win32_OperatingSystem');
var arch = /\d+/.exec(new Enumerator(os).item().OSArchitecture) * 1;

// get link matching *.exe where the link text contains system language and architecture
var r = new RegExp('<a\\s*href="[^"]+\\.exe(?=[^\\/]+' + language() + '[^<]+' + arch + '\\Wbit)');
var link = r.exec(html)

// use only the stuff after the quotation mark to the end
var dl = '' + /[^"]+$/.exec(link);

// if the location is a relative path, prepend the domain
if (dl.substring(0,1) == '/') dl = /.+:\/\/[^\/]+/.exec(WSH.Arguments(0)) + dl;

// target is path\filename
var target=WSH.Arguments(1) + '\\' + /[^\/]+$/.exec(dl)

// echo without a new line
WSH.StdOut.Write('Saving ' + target + '... ');

// fetch file and save it
save(fetch(dl), target);

WSH.Echo('Done.'); 
```

# android - Editview按软键返回，失去焦点并隐藏键盘，如何？

> ID：15774885
> 
> 赞同：1
> 
> 时间：2013-04-02T21:37:40.423
> 
> 标签：android, textview

我正在开发一个 Android 应用程序，我有 2 个编辑视图和一个标签。用户可以输入 2 个值，标签显示使用来自编辑视图的输入进行的一些计算。我想要的是以下内容；

1.  用户使用软键盘输入任一值
2.  用户按下“返回”软键
3.  editview 应该失去焦点
4.  软键盘应该消失
5.  应该重新计算 textview 标签

现在，v.clearFocus 似乎只在有另一个小部件可以获得焦点（？）时才有效，所以我还添加了一个**虚拟零像素布局**，可以从第一个编辑视图“窃取”焦点。Return 键现在可以使用，但是当用户通过简单的点击将焦点从 edit1 切换到 edit2 时，**HideKeyboard() 就会崩溃**。我试过检查是否 inputMethodManager==null 但这没有帮助。

这一切都感觉就像我在欺骗 Android 做一些常见的 UI 行为，所以我不禁认为我在这里忽略了一些东西。

任何帮助将不胜感激。顺便说一句，我知道这类似于这个问题：[当按下软键盘中的“完成”按钮时，如何失去编辑文本的焦点？](https://stackoverflow.com/questions/11981740/how-to-lose-the-focus-of-a-edittext-when-done-button-in-the-soft-keyboard-is-p) 但我已经尝试过了，它不起作用。

所以我的布局xml是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- Dummy control item so that first textview can lose focus -->
    <LinearLayout
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_width="0px"
        android:layout_height="0px"/>

    <EditText
        android:id="@+id/editTest1"
        android:layout_width="250px"
        android:layout_height="wrap_content"
        android:inputType="numberDecimal"
        android:imeOptions="actionDone" >

    </EditText>

    <EditText
        android:id="@+id/editTest2"
        android:layout_width="250px"
        android:layout_height="wrap_content"
        android:inputType="numberDecimal"
        android:imeOptions="actionDone" >
    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="test123" />

</LinearLayout> 
```

来源是这样的：

```
public class CalcActivity extends Activity implements OnFocusChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab2_weight);

        EditText testedit = (EditText) findViewById(R.id.editTest1);

        testedit.setOnFocusChangeListener(this);

        testedit.setOnEditorActionListener(new OnEditorActionListener() {        

            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                if(actionId==EditorInfo.IME_ACTION_DONE){
                    //Clear focus here from edittext
                    Log.d("test app", "v.clearFocus only works when there are other controls that can get focus(?)");
                    v.clearFocus();
                }
            return false;
            }
        });
    }

    public void hideSoftKeyboard() {
        InputMethodManager inputMethodManager = (InputMethodManager) this.getSystemService(Activity.INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
    }

    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus == false) {
            Log.d("unitconverter", "onFocusChange hasFocus == false");
            // update textview label
            TextView bla = (TextView) findViewById(R.id.textView1);
            bla.setText(String.format("%s + %s", (((EditText) findViewById(R.id.editTest1)).getText()), (((EditText) findViewById(R.id.editTest2)).getText()))); 
            // hide keyboard
            hideSoftKeyboard();
        }
    }

} 
```

# linux - 返回块设备上的字节偏移和行匹配表达式？

> ID：15774888
> 
> 赞同：0
> 
> 时间：2013-04-02T21:37:58.370
> 
> 标签：linux, perl, grep

我想在块设备 (/dev/sdb) 上运行扫描以查找表达式“一些文本”并返回表达式的行“这是我找到的**一些文本”。**以及它的字节偏移量：

32768 - 这是我找到的一些文本。

我尝试使用`grep -a --byte-offset "some text" /dev/sdb`，但遇到`grep:line too long`错误。

我知道我的 LINE_MAX 是 2048，所以我想知道如何将该限​​制提高到任意大的值，或者在 PERL 中替换此函数？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:52:55.593

未经测试，即使正确也可能不是最佳的：

```
#!/usr/bin/env perl

use autodie;
use strict;
use warnings;

{
        use bytes;
        open my $h, '<', '/dev/sdb';

        my $offset = 0;

        while (my $line = <$h>) {
                while ($line =~ /ext?/g) {
                        printf "Line: %d\tByte: %d\n", $., $offset + $-[0];
                }
                $offset += length $line;
        }
} 
```

# c# - 从一个列表添加到另一个列表

> ID：15774890
> 
> 赞同：0
> 
> 时间：2013-04-02T21:38:04.707
> 
> 标签：c#, list, addrange

我一直在尝试将前两个元素从列表 A '传输'到列表 B 而不复制它们。

一开始，列表 A 有四个 int 值。最后，我希望 List A 和 B 都有 2 个 int 值。

我正在尝试这样的事情：

```
int a = 1;
int b = 2;
int c = 3;
int d = 4;

TestA.Add(a);
TestA.Add(b);
TestA.Add(c);
TestA.Add(d);

for (int i=0; i<2; i++)
{
    TestB.AddRange(TestA[i]);
} 
```

我收到一个 IEnummerable 转换错误。我确信我是以一种非常天真的方式来做这件事的，在这里我会很感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:42:32.947

简单`Take`/`Skip`组合有什么问题？

```
TestB = TestA.Take(2).ToList();
TestA = TestA.Skip(2).ToList(); 
```

[`Enumerable.Take`](http://msdn.microsoft.com/pl-pl/library/bb503062.aspx)- 从集合的开头获取 N 个元素。

[`Enumerable.Skip`](http://msdn.microsoft.com/pl-pl/library/bb358985.aspx)- 从集合的开头跳过 N 个元素并获取所有其他元素。

# .net - 线程开销

> ID：15774891
> 
> 赞同：1
> 
> 时间：2013-04-02T21:38:08.793
> 
> 标签：.net, multithreading

我需要对线程进行一些澄清。何时要求线程的 1 MB 内存开销？是在创建线程对象时（costructor）还是在调用 Start() 方法时？Start 方法是否立即返回（在线程真正开始之前）？

如果我有一个创建和启动 N 个线程 > ThreadPool 的 maxThreads 的循环，循环会快速完成还是会等到所有线程都创建并启动？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:41:12.173

> 是在创建线程对象时（costructor）还是在调用 Start() 方法时？

1mb（默认情况下，但可配置，因为它是线程的堆栈大小）是在线程实际启动时创建的。

> Start 方法是否立即返回（在线程真正开始之前）？

该`Start()`方法是异步的，并立即返回。 [Thread.Start](http://msdn.microsoft.com/en-us/library/system.threading.thread.start.aspx)的文档指定它“导致线程被**安排**执行”。

> 如果我有一个创建并启动 N 个线程 > ThreadPool 的 maxThreads 的循环，该循环会快速完成还是等待创建并启动所有线程？

它会很快完成（或者，至少不等待线程启动）。

# opencv - 带有 CUDA 的 OpenCV 不工作（VC++ 2010）

> ID：15774893
> 
> 赞同：1
> 
> 时间：2013-04-02T21:38:12.060
> 
> 标签：opencv, visual-studio-2010

我已经安装了 OpenCV 2.4.3，并使用 cmake 确保启用了 CUDA。

所以，我做到了： cmake WITH_CUDA 。

我得到了以下信息：

```
-- CUDA detected: 5.0
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode
m_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=
pute_20,code=compute_20
-- Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE) (Required
--
-- General configuration for OpenCV 2.4.3 =============================
--
--   Platform:
--     Host:                        Windows 6.1 x86
--     CMake:                       2.8.8
--     CMake generator:             Visual Studio 10
--     CMake build tool:            C:/PROGRA~2/MICROS~2.0/Common7/IDE/
--     MSVC:
--
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                cl
--     C++ flags (Release):         /DWIN32 /D_WINDOWS /W4  /GR /EHs  /
_SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /M
--     C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4  /GR /EHs  /
_SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /M
--     C Compiler:                  cl
--     C flags (Release):           /DWIN32 /D_WINDOWS /W3   /D _CRT_SE
RE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP8  /MD /O2 /Ob
--     C flags (Debug):             /DWIN32 /D_WINDOWS /W3   /D _CRT_SE
RE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP8  /D_DEBUG /M
--     Linker flags (Release):      /STACK:10000000 /machine:X86   /INC
--     Linker flags (Debug):        /STACK:10000000 /machine:X86   /deb
--     Precompiled headers:         YES
--
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features
gpu stitching ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java ocl python
--
--   GUI:
--     QT 4.x:                      NO
--     Win32 UI:                    YES
--     OpenGL support:              NO
--
--   Media I/O:
--     ZLib:                        build (ver 1.2.7)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--
--   Video I/O:
--     FFMPEG:                      YES (prebuilt binaries)
--       codec:                     YES (ver 53.61.100)
--       format:                    YES (ver 53.32.100)
--       util:                      YES (ver 51.35.100)
--       swscale:                   YES (ver 2.1.100)
--       gentoo-style:              YES
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     DirectShow:                  YES
--     XIMEA:                       NO
--
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use C=:                      NO
--     Use Cuda:                    YES (ver 5.0)
--     Use OpenCL:                  NO
--     Use Eigen:                   NO
--
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21 30
--     NVIDIA PTX archs:            20
--     Use fast math:               NO
--
--   Python:
--     Interpreter:                 NO
--
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
--
--   Install path:                  C:/opencv/install
--
--   cvconfig.h is in:              C:/opencv
-- ----------------------------------------------------------------- 
```

所以，很明显，CUDA 被检测到了。

我还构建了这个拼接程序： [https ://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/stitching.cpp?rev=6683](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/stitching.cpp?rev=6683)

而且，它有效，我可以看到它可以很好地缝合图像。

但是，无论我是否使用 WITH_CUDA，我都看不到性能差异！

当我检查这个时： gpu::getCudaEnabledDeviceCount() 它返回零！！！我相信这表明它没有使用 CUDA！

我错过了什么？我应该如何在这个例子中使用 CUDA？（我在调试/发布配置中都试过）

我是否需要为此代码构建一些特殊的东西才能开始使用 CUDA？谢谢，--鲁迪

# database-design - 如何设计一个“事件或日历”相关的数据库（我正在尝试发明一个与键相关的设计系统）

> ID：15774897
> 
> 赞同：0
> 
> 时间：2013-04-02T21:38:17.673
> 
> 标签：database-design, google-cloud-datastore, objectify

我将使用的技术是：**GAE Datastore 和 Objectify**。我的数据库与事件和地点有关（也许一些已经设计了类似于谷歌日历或 facebook 事件等数据库的专家可以帮助我）。

IMO，我需要以我应该真正快速加载和查找事件的方式设计我的数据库。所以我不知道我要解释的是否是其他人使用的模式......如果你能告诉我这是否是一个好主意......

诀窍是，**我假设数据存储中的键将按*字母顺序排列*（我想我已经读过可以这样**做......）。

我想为每个创建的新事件创建一个键（字符串），它将由以下组成：

**[year_month_day] [hour_minute] [country_city_zone_local] [eventName]**

*存储在数据存储中的密钥示例：*

[201304012200_fr_paris_quartierLatin_latinNightclub_superFiesta1] [201304022200_fr_paris_quartierLatin_latinNightclub_superFiesta2] [201304032200_fr_paris_quartierLatin_latin_latin_latin_latinNightclub_superFiesta3] [2013040422240Nquarlatin_superFiesta3]

在上面的示例中，在同一本地 (latinNightClub) 连续 4 天发生 4 个事件。

现在，假设我**在 50 个国家/地区有数百万个事件，**我应该快速加载 DAY_1 (2013/04/02) 和 DAY_2 (2013/04/04) 之间发生的事件。根据我的想法，我应该从 20130402 .....、20130403 ... 和 20130404 ......可能更快。

*问题 1*：这样设计我的数据库是个好主意吗？是否有可能使用提到的技术来做到这一点？

*问题 2*：在关键中，我还包括了与国家和事件发生地相关的信息......因为，如果用户只想要“latinNightClub”中发生的事件，那么我也可以快速获取结果（由于键是按字母顺序排列的......）所以这也是一个好主意吗？

就我而言，第一步很难做到，您的帮助可能真的很棒！如果我完全错了，请随时给我任何应该有帮助的链接。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:55:59.627

这是一个可怕的想法。

您将不可避免地需要更改事件的属性，而在现实世界的模式中更改键值几乎是不可能的。谷歌“自然密钥与合成密钥”——这场争论在传统的 RDBMS 中已经重复了数百万次，同样的教训也适用于这里。

只需在您尝试搜索的字段上创建一个多属性索引。问题解决了。

# python - 如何在 Postgres 的事务中使用 Sqlalchemy 创建表？

> ID：15774899
> 
> 赞同：0
> 
> 时间：2013-04-02T21:38:21.317
> 
> 标签：python, postgresql, sqlalchemy, ddl, flask-sqlalchemy

我在多租户 Flask 应用程序中使用 Sqlalchemy，并且需要在添加新租户时动态创建表。我一直在使用 Table.create 在新的 Postgres 模式中创建单独的表（以及 search_path 修改），并且效果很好。

我发现的限制是，如果当前事务中有任何待处理，Table.create 方法会阻塞。我必须在 .create 调用之前提交事务，否则它会阻塞。它似乎没有在 Sqlalchemy 中被阻止，因为您不能 Ctrl-C 它。您必须终止该进程。所以，我假设它在 Postgres 中更进一步。

我在其他答案中读到 CREATE TABLE 是事务性的并且可以回滚，所以我认为这应该可以工作。我尝试使用当前引擎启动新事务并将其用于表创建（与当前的 Flask 相比），但这也无济于事。

有谁知道如何在没有早期提交的情况下让它工作（并且冒着部分悬空数据的风险）？

这是 Python 2.7、Postgres 9.1 和 Sqlalchemy 0.8.0b2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:48:33.273

（复制评论）

~~假设`sess`是会话，你可以这样做`sess.execute(CreateTable(tenantX_tableY))`。~~

编辑：`CreateTable`只是调用时要做的事情之一`table.create()`。改为使用`table.create(sess.connection())`。

# blackberry-webworks - 在 Blackberry 10 Webworks 应用程序上检测手机运营商

> ID：15774905
> 
> 赞同：0
> 
> 时间：2013-04-02T21:38:43.673
> 
> 标签：blackberry-webworks, blackberry-10

有什么方法可以在黑莓10 Webworks应用中检测到用户手机运营商的名字吗？我在api中没有找到任何东西：

[http://developer.blackberry.com/html5/api/](http://developer.blackberry.com/html5/api/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:24:32.553

您可以使用以下 BlackBerry 10 WebWorks 扩展程序检测移动网络代码 (MNC) 值。

[https://github.com/blackberry/WebWorks-Community-APIs/tree/master/BB10/deviceInfo](https://github.com/blackberry/WebWorks-Community-APIs/tree/master/BB10/deviceInfo)

MNC 是一个可以与运营商关联的数值。例如，Rogers Wireless（加拿大运营商）的 MNC 是 720。更多信息请点击此处： [https ://en.wikipedia.org/wiki/Mobile_country_code](https://en.wikipedia.org/wiki/Mobile_country_code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:34:54.670

我不知道有什么方法可以检查运营商。但是您可以做的是根据 App World Vendor Portal 中的运营商交付不同的二进制文件。

![在此处输入图像描述](https://i.stack.imgur.com/CrwRX.png)

# php - 将数据库中的数据显示给特定用户（使用角色？）

> ID：15774918
> 
> 赞同：0
> 
> 时间：2013-04-02T21:39:43.617
> 
> 标签：php, javascript, mysql, user-roles

我想向特定用户显示一些数据。我已经做过类似的事情，但不同之处在于角色编号是静态的。例如，我添加了一列并将“1”分配给特定用户，所以我写了 if($role == 1) { do something }。这很好，因为它是一个静态数字。通过这种方式，我只向角色 1 的用户显示秘密信息。

现在我添加了一个新功能；管理员可以上传属于某个组的特定用户的信息。组的信息会有所不同。数据存储和检索都很好。那不是我的问题。例如，我想向 A 组中的用户 'a1'、'a2'、'a3' 显示文档 A（这是随机名称，我只是想让你更容易），向用户 'a4' 显示文档 B， 'a7','a35','a40'（属于 B 组）等等。

我知道如何存储/检索文档“A”并将其与用户“a1”、“a2”、“a3”和他们的组链接......但我不确定如何将每个文档显示给一个组。文档 A 只能与一组链接（对于 B、C、D.. 等也是如此）。

```
TABLES
DOCUMENTS
Number - Title - File
1 - Document A - A.doc
2 - Document B - B.doc

DOC_USERS
Doc N - User N
1 - 10
1 - 15
2 - 7

DOC_GROUPS
Doc N - Group N
1 - 1
2 - 2 
```

而不是像我以前那样说 if($role == 1).. 我需要像 if ($document == $group) 这样的东西。我不能输入“A”或“B”或其他任何内容，因为它不是静态的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:01:08.013

我会将这个逻辑移动到查询而不是视图中。传入 user_id 作为参数，只返回允许用户查看的记录。看起来您的架构允许您根据用户 ID 或用户与组的关联授予对文档的权限（表结构中似乎缺少该权限，但您在描述中提到了它）

```
select documents.*
from documents
     inner join doc_users on documents.number= doc_users.doc
where doc_users.user = ?

Union

select documents.*
from documents
     inner join doc_groups on documents.number= doc_group.doc
     inner join user_groups on user_groups.group = doc_groups.group
where user_groups.user = ? 
```

我确信这个查询可以在没有联合的情况下完成，但这很容易阅读和理解。

# linux - Linux如何在远程服务器上后台运行脚本？

> ID：15774921
> 
> 赞同：2
> 
> 时间：2013-04-02T21:40:03.043
> 
> 标签：linux, perl, shell, remote-server, gnu-screen

我在一台linux机器上。

我想在删除服务器上运行四个 perl 脚本。每个脚本都会生成一个输出文件，但可能需要数小时才能运行。我想在后台运行脚本，这样如果我与服务器断开连接或从 shell 提示符退出，它将继续运行。这些脚本还在运行时将行打印到命令终端。我希望能够检查`print`脚本正在打印到命令终端的语句。

我通常会使用该`screen -S`命令来创建一个屏幕。然后按`CTRL+A CTRL+D`解除连接并`screen -r`重新连接到屏幕，但我所在的远程服务器没有屏幕。而且我没有 sudo 访问权限来安装它。

如何在远程服务器的后台同时运行这 4 个 perl 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:42:10.030

GNU`screen`是最干净的方式。您不需要 root 权限来安装本地副本。您应该能够下载源代码并执行

```
tar -xzvf source.tar.gz
mkdir ~/local/
./configure -prefix=~/local/
make && make install 
```

那将安装`screen`在`~/local/bin`. 但是，如果缺少某些依赖项，则必须为每个依赖项都这样做。

# c# - 如何为邻接表构建适合 BFS 的数据结构？

> ID：15774922
> 
> 赞同：1
> 
> 时间：2013-04-02T21:40:11.700
> 
> 标签：c#, data-structures, graph, adjacency-list

关于构建和搜索邻接树的面试问题，但我以前从未与他们合作过，所以我不确定从哪里开始。

我有一个包含以下数据的文件：

```
2 13556 225 235
225 2212 226
2212 8888 2213
8888 144115 72629 141336 8889 146090 129948 167357
144115 160496 163089 144114 144116
... 
```

格式如下：

```
<parent node> <child node> [ <child node> [ …] ] 
```

每条边的长度为 1。

然后我需要计算两个节点之间的最短路径（这两个在问题中指定）。然后，我需要以大 O 表示法提供估计的复杂度。

后者我可能会捏造，尽管直到现在我什至从未听说过它，而且在理解如何将搜索功能分解为大 O 方面，维基百科对我没有多大帮助，但我稍后会担心（除非有人有一个很好的链接可以分享）。

我现在关心的是尝试对这些数据进行建模，然后搜索最短路径。就像我说的，我以前从未使用过这种结构，所以我什至不知道从哪里开始。[我在这里](https://stackoverflow.com/questions/13819744/graph-adjacency-list-implementation)发现了关于邻接列表的另一个问题，但它似乎并不是我想要的，除非我完全没有抓住重点。在我看来，输入数据需要重新组织以满足该问题中使用的结构，而我正在从文件中读取我的数据，所以我认为我需要遍历每个节点和节点列表确定我是否已经输入了父母，这可能需要很长时间。我也看不到如何使用该结构创建 bfs 搜索。

那里有很多搜索示例，所以我可能会整理出那部分，但是在启动数据模型方面的任何帮助都适合从数据文件加载并适合 bfs 搜索（或者，如果有那里有更好的搜索选项，请教我），会有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:54:27.030

您可能希望将此数据存储在`HashTable<int, List<int>>`（字典）（链接）中，键为 int (NodeID)，值为`List<int>`，其中这些是作为键的节点的可能目的地。

您需要另一个`HashTable<int, int>`(ShortestPathLastStep)，它将存储两个 NodeID。这将代表到达给定节点的最短路径的最后一步。您需要它才能回放最短路径。

要执行 BFS（广度优先搜索），您将使用`Queue<int>`(bfsQueue)。将开始节点（在您的问题中给出）推送到队列中。现在执行以下算法

```
-- currentNodeID = pop bfsQueue
---- children = Links[NodeID]
------ foreach (childNodeID in children)
--------- if (childNodeID == destinationNodeID)
----------- exit and playback shortest path
----------if (!ShortestPathLastStep.contains(childNodeID))
------------ ShortestPathLastStep.Add(childNodeID, currentNodeID);
----------bfsQueue.Push(childNodeID);
----------goto first line 
```

该解决方案假设在任何两个节点之间的旅行是一个恒定的成本。它是 BFS 的理想选择，因为当您第一次到达目的地时，您将采用最短路径（如果链接长度可变，则不是这样）。如果链接不是恒定长度，则在决定覆盖 ShortestPathLastStep 值时必须添加更多逻辑，在队列为 EMPTY 之前，您将无法退出，并且您只会将节点推送到队列中从未去过该节点（它不会出现在短路径列表中），或者您发现这种到达那里的新方式比到达那里的最后一种方式更短（现在您必须重新计算节点的最短距离您可以从此节点访问）。

# java - Java EE 到底是什么？

> ID：15774924
> 
> 赞同：102
> 
> 时间：2013-04-02T21:40:25.713
> 
> 标签：java, jakarta-ee

Java EE 为年轻的 Java 开发人员提供了一种“神秘的裹尸布”——我一直在努力提升自己，但收效甚微。

混乱源于：

*   Java EE 似乎既是一个库又是一个平台——有多种方法可以“获取”Java EE 库，通常来自 Oracle 的 Java EE SDK 下载。但是，除非您的代码正在运行或可以访问 Java EE 应用程序服务器（例如 JBoss、GlassFish、Tomcat 等），否则 Java EE 库将无法工作，也无法编译。为什么？库不能在应用程序服务器环境之外运行吗？为什么我需要像 JBoss 这样庞大的东西来编译简单的代码来发送电子邮件？

*   为什么 Java EE 库不是“标准的”并且包含在常规 JVM 下载和/或 SDK 中？

*   当标准 Java 真的只有两种主要风格（Oracle JVM/SDK | OpenJDK JVM/JDK）时，为什么会有这么多 Java EE 产品？

*   Java EE 可以做什么而标准 Java 无法做到？

*   使用标准 Java 可以做什么，而 Java EE 却无法做到？

*   开发人员何时决定他们“需要”Java EE？

*   开发人员何时决定他们不需要 Java EE？

*   为什么 Java EE 库版本与标准 Java 库版本不同步（Java EE 6 与 Java 7）？

谢谢你帮我清除鞭子！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-03T08:02:08.750

**为什么库不能在应用服务器环境之外运行？**

其实他们可以。大多数库可以直接独立使用（在 Java SE 中）或包含在 .war 中（实际上几乎总是 Tomcat）。Java EE 的某些部分，如 JPA，在其各自的规范中有明确的部分，说明它们应该如何工作和在 Java SE 中使用。

如果有的话，这里所涉及的不是应用服务器环境本身，而是所有其他库的存在以及将它们联合起来的集成代码。

正因为如此，所有类的注释只会被扫描一次，而不是每个库（EJB、JPA 等）都会一遍又一遍地扫描。也正因为如此，CDI 注释可以应用于 EJB bean，并且可以将 JPA 实体管理器注入其中。

**为什么我需要像 JBoss 这样庞大的东西来编译简单的代码来发送电子邮件？**

这个问题有几个问题：

1.  对于编译，您只需要 API jar，Web Profile 小于 1MB，完整配置文件则略多于 1MB。
2.  对于运行，您显然需要一个实现，但“大量”是夸大其词。例如，OpenJDK 大约 75MB，而 TomEE（一个包含邮件支持的 Web Profile 实现）只有 25MB。甚至 GlassFish（一个 Full Profile 实现）也只有 53MB。
3.  Mail 在 Java SE（以及因此 Tomcat）以及使用独立的[mail.jar 和 activation.jar](http://www.oracle.com/technetwork/java/javamail/index.html)时都可以正常工作。

**为什么 Java EE 库不是“标准的”并且包含在常规 JVM 下载和/或 SDK 中？**

Java EE 在某种程度上是第一次尝试将已经很庞大的 JDK 拆分成更易于管理和下载的块。人们已经在抱怨图形类（AWT、Swing）和小程序在 JRE 中，而他们所做的只是在无头服务器上运行一些命令。然后您还想在标准 JDK 中包含所有 Java EE 库吗？

随着模块化支持的最终发布，我们将拥有一个小型基础 JRE，其中包含许多可作为包单独安装的东西。也许有一天，现在构成 Java EE 的许多甚至所有类也将是这样的包。时间会证明一切。

**当标准 Java 真的只有两种主要风格（Oracle JVM/SDK | OpenJDK JVM/JDK）时，为什么会有这么多 Java EE 产品？**

Java SE 不仅有两种风格。至少有 IBM JDK、之前的 BEA JDK（JRocket，由于收购而被合并到 Oracle/Sun 中）、各种其他开源实现和大量用于嵌入式的实现。

Java SE 和 EE 成为规范的原因是许多供应商和组织可以实施它，因此它鼓励竞争并降低供应商锁定的风险。

与 C 和 C++ 编译器实际上并没有什么不同，在这些编译器中，您有许多相互竞争的产品，而且都遵循 C++ 标准。

**为什么 Java EE 库版本与标准 Java 库版本不同步（Java EE 6 与 Java 7）**

Java EE 建立在 Java SE 之上，所以它落后了。虽然版本确实对应。Java EE 5 需要 Java SE 5。Java EE 6 需要 Java SE 6，依此类推。只是大多数情况下，Java SE X 是最新的，Java EE X-1 是最新的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T23:54:06.190

以下是对您的问题的一些快速组合的答案...

*   **为什么 JavaEE 库不能在没有应用服务器的情况下运行？** JavaEE 提供的服务（容器管理的事务、容器管理的依赖注入、定时器服务等）固有地涉及符合 JavaEE 的应用服务器（例如：GlassFish、JBoss、WebSphere 等）。因此，如果没有这样的容器，JavaEE 库将毫无用处。“*为什么我需要像 JBoss 这样庞大的东西来编译简单的代码来发送电子邮件？* ”你不需要。有很多方法可以在没有 JavaEE 的情况下发送电子邮件……但如果您想以 JavaEE 方式发送电子邮件，您需要一个 JavaEE 容器。

*   **为什么 JavaSE 下载中不包含 JavaEE 库？** 与许多库不包括在内的原因相同：这将是矫枉过正。既然没有应用服务器就无法使用 JavaEE 库，为什么还要包含它们呢？如果开发人员安装应用程序服务器并决定使用 JavaEE，则应下载 JavaEE。

*   **为什么有这么多 JavaEE 产品？** 真的有“*这么多*”JavaEE 产品吗？如果有，请列出其中的一些。更准确地说，我相信同*一个 API*有*多种实现*。

**   **使用 JavaEE 可以做什么，而没有标准 Java 则无法做到？** 很多。如果没有 JavaEE，您就不能依赖应用服务器来管理事务或持久性上下文。您不能允许应用程序服务器在没有 JavaEE 的情况下管理 EJB 依赖项注入。如果没有 JavaEE，您将无法使用应用程序管理的计时器服务。这个问题的答案应该让第一个问题的答案很清楚了…… JavaEE 提供的大部分服务都需要 JavaEE 容器。

    *   **JavaSE 能做什么而 JavaEE 不能？** 嗯……我不知道。

    *   **开发人员何时决定他们*需要*JavaEE？** 这个问题完全是主观的……但是如果你需要 JavaEE 提供的任何服务，你就开始考虑它。如果您不知道 JavaEE 是什么……您可能不需要它。

    *   **开发人员何时决定他们不需要 JavaEE？** 请参阅上一个答案。

    *   **为什么 JavaEE 库版本与 JavaSE 版本不同步？** 好问题。我不会假装知道如何回答它......但我猜答案是：“因为它们不同步”。* 

 ** * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-03T00:44:16.693

从鸟瞰的角度来看，Java EE 是一个平台，即我们可以在其上构建的东西。

从更技术的角度来看，Java 企业版标准定义了一组通常用于构建企业应用程序的 API。这些 API 由应用服务器实现 - 是的，不同的应用服务器可以自由使用 Java EE API 的不同实现。

> 但是，除非您的代码正在运行或可以访问 Java EE 应用程序服务器（例如 JBoss、GlassFish、Tomcat 等），否则 java ee 库将无法工作，也无法编译。

您针对 Java EE API 进行编译，因此您只需要在编译时使用这些 API。在运行时，您还需要这些 API 的实现，即应用服务器。

> 为什么我需要像 JBoss 这样庞大的东西来编译简单的代码来发送电子邮件？

你没有。但是，如果您希望使用 Java EE API 发送邮件，则需要在运行时实现该 API。这可以由应用程序服务器提供，也可以由添加到类路径的独立库提供。

> 为什么 Java EE 库不是“标准的”并且包含在常规 JVM 下载和/或 SDK 中？

因为只有 API 是标准化的，而不是实现。

> 为什么有这么多 Java EE 产品

因为人们在实现某些功能的正确方法上存在分歧。因为不同的供应商争夺市场份额。

> Java EE 可以做什么而标准 Java 无法做到？

由于 Java EE 实现是使用“标准 Java”构建的：没有。但是，如果您要解决典型的企业问题，利用现有库可以节省大量精力，并且使用标准化 API 可以防止供应商锁定。

> 使用标准 Java 可以做什么，而 Java EE 却无法做到？

没什么，因为 Java EE 包含 Java SE。

> 开发人员何时决定他们“需要”Java EE？开发人员何时决定他们不需要 Java EE？

一般来说，Java EE API 解决了企业计算中典型的、反复出现的问题。如果你有这样的问题，使用标准解决方案通常是有意义的——但如果你有不同的问题，可能需要不同的解决方案。例如，如果您需要与关系数据库通信，您应该考虑使用 JPA。但是，如果您不需要关系数据库，JPA 不会帮助您。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-03T02:02:35.557

### 什么是 Java EE？

让我们从 wiki 上的规范定义开始：

> Java Platform, Enterprise Edition 或 Java EE 是 Oracle 的企业 Java 计算平台。该平台为开发和运行企业软件提供 API 和运行时环境，包括网络和 Web 服务，以及其他大规模、多层、可扩展、可靠和安全的网络应用程序。

这里的要点是 Java EE 是一个提供 API 的平台，而不是一些具体的库。

### Java EE 需要什么？

Java EE的主要范围是基于网络的应用程序，不像Java SE面向桌面应用程序开发，具有简单的网络支持。这是它们之间的主要区别。每个应用程序的可扩展性、消息传递、事务处理、数据库支持……随着网络的发展，所有这些方面的需求都在增加。当然，Java SE 提供的很多现成的解决方案对网络开发很有用，所以 Java EE 扩展了 Java SE。

### 为什么我们需要应用服务器来运行我们的代码？

为什么我们需要操作系统？因为我们需要做很多关于硬件的痛苦工作才能制作最简单的应用程序。如果没有操作系统，您需要一次又一次地这样做。过度简化的操作系统只是一个程序化容器，它为我们提供了一个全局上下文来运行我们的应用程序。

这就是应用服务器。它们允许我们在它们的上下文中运行我们的应用程序，并为我们提供了企业高负载网络应用程序所需的许多高级功能。我们不想编写自己的自行车来解决这个问题，我们想编写能够满足我们业务需求的代码。

这里的另一个例子可能是 Java 的 JVM。

### 为什么 Java EE 不包含板载应用服务器？

对我来说很难说。我认为，这样做是为了更灵活。Java EE 说他们应该做什么，他们决定如何去做。

### 为什么 JVM 不包含 Java EE？

因为他们针对不同的市场领域。Java EE 具有许多普通桌面不需要的功能。

### 为什么有这么多 Java EE 产品？

因为 Java EE 只描述行为。每个人都可以实施。

### Java EE 能做什么而 Java SE 不能做？

征服互联网。使用 Java SE 小程序和套接字真的很难做到 :)

### Java SE 能做什么而 Java EE 却不能？

如上所述，Java EE 扩展了 Java SE，因此使用 Java EE，您应该能够完成 Java SE 可用的所有操作。

### 开发人员何时决定他们“需要”Java EE？

当他们需要 Java EE 的强大功能时。上面提到的所有内容。

### 开发人员何时决定他们不需要 Java EE？

当他们编写通常的控制台或桌面应用程序时。

### 为什么 Java SE 和 Java EE 的版本不同步？

Java 的技术命名和版本控制总是存在问题。所以这种情况也不例外。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-03T07:37:48.727

Java EE 都是关于容器概念的。
容器是一个执行上下文，将在其中运行您的应用程序并提供最后一组服务。每种服务都由名为 JSR 的规范定义。例如 JSR 907、JTA（java transaction Api），它们提供了一种标准方法来管理针对不同资源的分布式事务。
对于给定的 JSR，通常有许多不同的实现，您将使用的实现取决于容器提供者，但您并不介意这一点，因为您确信行为尊重预定义的契约：JSR API。
因此，要利用 Java EE，您需要在容器内运行应用程序。两个主要是 EJB 和 servlet 容器，它们都存在于任何 Java EE 认证的应用程序服务器上。

所有这些的目的是定义一个标准的执行环境，以允许仅使用必需品 id.est 打包您的应用程序。你的事。它避免了依赖一组未知的和不同的第三方库，否则您必须打包并提供给您的应用程序，并且这些库可能与服务器上的其他应用程序发生冲突。在 Java EE 中，您知道所有标准的非功能性需求，如安全性、事务、可伸缩性、远程调用等等，都将由容器提供（针对在其中运行的所有应用程序进行分解），您只需将工作基于它。*

# android - 片段可单击和项目单击侦听器中的 ListView

> ID：15774925
> 
> 赞同：0
> 
> 时间：2013-04-02T21:40:29.310
> 
> 标签：android, listview, onclick, android-fragments, onclicklistener

我在片段中有一个列表视图，这是我当前的代码：

```
public static class AllSectionFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    public AllSectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_tasks_all,
                container, false);
        // /////////////////////////////////////////////////////////////////
        // Set up all components here:: ie text views , buttons lists etc.//
        // that correspond to the layout fragment xml file                //
        ////////////////////////////////////////////////////////////////////
        TextView dummyTextView = (TextView) rootView
                .findViewById(R.id.fragment_tasks_all_textView);
        dummyTextView.setText(Integer.toString(getArguments().getInt(
                ARG_SECTION_NUMBER)));

        ArrayList<String> arrayList = new ArrayList<String>();
        ListView allList = (ListView) rootView
                .findViewById(R.id.fragment_tasks_all_list);
        MyCustomAdapter mAdapter = new MyCustomAdapter(getActivity(),
                arrayList); // Class to populate a ListView with an
                            // ArrayList
        allList.setAdapter(mAdapter);
        // Populate array list
        for (int i = 0; i < 5; i++) {
            arrayList.add(" All Task " + i);
        }
        mAdapter.notifyDataSetChanged();

        return rootView;
    }

    public void onListItemClick(ListView l, View v, int position, long id) {
        System.out.println("pos: "+ position);
    }
} 
```

和我的 layout.xml 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".TasksActivity$DummySectionFragment" >

<TextView
    android:id="@+id/fragment_tasks_all_textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<ListView
    android:id="@+id/fragment_tasks_all_list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="0.41"
    android:cacheColorHint="#00000000"
    android:clickable="true"
    android:listSelector="@android:color/transparent"
    android:transcriptMode="alwaysScroll" >

</ListView> 
```

首先。我怎样才能使它可以单击列表中的项目，

其次，我如何为其添加 onclick 侦听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:01:11.817

为什么不直接使用 ListFragment：

```
 public static class ArrayListFragment extends ListFragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, Shakespeare.TITLES));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.i("FragmentList", "Item clicked: " + id);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:45:07.947

使用 ArrayAdapter 的替代构造函数，它允许您指定一个布局文件来托管您的列表视图：

```
public ArrayAdapter(Context context, int resource, int textViewResourceId, T[] objects) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T04:07:35.157

我有一个类似的问题，并通过**使用 onClick 方法创建一个接口**并在片段中实现它来解决。尝试这样做：

创建接口：

**MyOnViewClickListener.java**

```
public interface MyOnViewClickListener {
    public void myOnViewClickListener(View v);
} 
```

在您的自定义适配器类中，**创建一个**将 MyOnViewClickListener 作为参数传递的构造函数：

```
private Context context;
private MyOnViewClickListener itemListener;
private List<String> items;

public MyCustomAdapter(Context context, List<String> items, MyOnViewClickListener itemListener) {

        this.itemListener = itemListener;
        this.context = context;
        this.items = items;
} 
```

在**getView()**方法中，输入：

```
LayoutInflater inflater = getLayoutInflater();
View row = inflater.inflate(R.layout.your_row_layout, parent, false);

TextView textView1 = (TextView) row.findViewById(R.id.quizchallenge);
    textView1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            itemListener.myOnViewClickListener(v);
        }
}); 
```

最后，在您的片段类中，**实现新接口**：

```
public class ListFriendFragment extends Fragment implements MyOnViewClickListener  {
.
.
.
@Override
public void myOnViewClickListener(View v){
    //call your method
    quickQuiz();
} 
```

设置适配器：

```
adapter = new MyCustomAdapter(getContext(), myItemsList, MyFragment.this); 
```

# sql - 不存在使用 xmlnamespace 的结果

> ID：15774926
> 
> 赞同：0
> 
> 时间：2013-04-02T21:40:34.810
> 
> 标签：sql, xml-namespaces, exists

我是使用 WITH XMLNAMESPACES 的新手，并且在使用 exists() 方法产生结果时遇到了一些困难。我查询的xml列如下：

```
 <Root>
      <ProductDescription ProductID="1" ProductName="Road Bike">
        <Features>
          <Warranty>1 year parts and labor</Warranty>
          <Maintenance>3 year parts and labor extended maintenance is 
                       available       
          </Maintenance>
        </Features>
      </ProductDescription>
    </Root> 
```

我试图在结果集中返回一个 xml 命名空间，来自 Microsoft 的修改示例。但是，当我执行以下查询时，我得到 0 个结果。但是，从 WHERE 子句中删除别名确实会产生结果。

```
 WITH XMLNAMESPACES ('uri' as pd)

    SELECT 

        Trans_ID,
        Bike_Sales.query
        (
            '<ProductDescription Product_ID = "{ sql:column("Trans_ID")}"/>'        
        ) AS  Result                                                                            

    FROM XML_EXAMPLE

    WHERE 

        Bike_Sales.exist        
        (
             '/pd:Root/ProductDescription[(pd:Features)]'
        ) = 1 
```

所以基本上我只想返回存在 Features 元素的行。有什么建议么？

谢谢。

# sql - 使用 ON 的 Sybase IQ 12.7 子查询的执行速度是否比连接慢？

> ID：15774927
> 
> 赞同：0
> 
> 时间：2013-04-02T21:40:39.437
> 
> 标签：sql, sybase, sap-iq

我在 Sybase IQ 12.7 中有一个查询，如下所示：

```
select ip from iplookup where ip in (select ip from persisted_info) 
```

其中 iplookup 被定义为单列。

我看到了 IN 和子查询，并决定一定很慢（全表扫描），这将是首选：

```
select lk.ip from iplookup lk, persisted_info ps where lk.ip = ps.ip 
```

但我要小心并获得一些证据来支持我。Sybase IQ 不支持 EXPLAIN PLAN，使用 SET STATISTICS TIME ON 会返回语法错误。

为了解决这个问题，我想知道如何获得：

1.  时间信息
2.  执行计划信息

编辑：我正在使用 Mac 中的 sqsh 与 Sybase 对话，当我在查询之前添加 SET STATISTICS IO ON 时，我会在响应中获得额外信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:28:13.680

我认为您正在寻找（编辑语法，我处于 ​​ASE 模式）

```
set TEMPORARY OPTION NOEXEC = on;
set TEMPORARY OPTION QUERY_PLAN = on;
set TEMPORARY OPTION QUERY_TIMING = on; 
```

这些写入服务器日志，我不确定您是否有权访问。如果您可以在没有确切的 IO 和计时统计信息的情况下生活，那么您将不需要访问服务器日志并且可以执行以下操作...

如果您使用的是@@version 12.7 ESD3 或更高版本，您应该能够执行以下两个查询之一并将输出放入.html 或.xml 文件并查看它。

```
--XML
SELECT GRAPHICAL_PLAN ('select * from t1 where ip in (select ip from t2)')
--HTML
SELECT HTML_PLAN ('select * from t1 where ip in (select ip from t2)') 
```

更多信息的链接：http: //infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc74603.1270/html/iqrbwin/ [CIHEFAIF.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc74603.1270/html/iqrbwin/CIHEFAIF.htm)

# matlab - MATLAB：strmatch 与 strcmp

> ID：15774932
> 
> 赞同：4
> 
> 时间：2013-04-02T21:41:03.283
> 
> 标签：matlab

如果我使用 char 字符串作为针，使用 char 元胞数组作为 haysack，以下*每次都会*达到相同的结果吗？我正在查看他们的文档，但我没有看到任何其他建议。我也想咨询 SO 的社区。

基本上，

```
k = strmatch('abc', cellArray, 'exact');

k2 = find(strcmp('abc', cellArray)); 
```

其中`cellArray`是一个 Nx1 字符元胞数组，它在任意索引处具有“abc”值。例如，如果在索引 10、20 和 30 处具有。那么对于 any 来说，以下情况`cellArray`每次都*成立*吗？`abc`*`cellArray`*

 *```
k = [10 20 30];

k2 = [10 20 30]; 
```

此外，如果两种方法都返回相同的答案，那么您何时会在这种搜索场景中使用`strmatch`over （在相同数据类型的元胞数组中查找 char 字符串）？非常慢，如果有人想知道我为什么要问的话。`strcmp``strmatch`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:54:40.937

不，结果会有所不同。该函数`strmatch`返回一个*索引*向量，其中元胞数组 (haystack) 与字符串 (needle) 匹配：

```
>> arr = {'a', 'b', 'c', 'a', 'b'};
>> strmatch('a', arr, 'exact')
ans =
    1
    4 
```

该`strcmp`函数返回一个逻辑向量，其中`1`s 与 haystack 匹配，而 s 与`0`s 不匹配：

```
>> strcmp('a', arr)
ans =
    1   0   0   1   0 
```

另一方面，表达式`find(strcmp('a', arr))`等价于`strmatch('a', arr, 'exact')`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-04T00:49:38.480

`strmatch`不推荐。使用`strncmp`或`validatestring`代替。`strmatch`将从未来版本的 matlab 中删除。* 中给出的警告`Matlab 2017 a`。*

# java - OSGi 组件可通过 Apache Felix 进行配置

> ID：15774935
> 
> 赞同：3
> 
> 时间：2013-04-02T21:41:13.140
> 
> 标签：java, maven, osgi, apache-felix, sling

我在这方面完全是新手，所以我提前道歉。我正在尝试创建一个 OSGi 组件，它只显示一个 hello world 消息，并且可以通过 felix 的输入进行配置。然后在一个jsp页面上吐出来。我正在使用 scr 注释来帮助做到这一点。这是我的java代码

```
package com.training.cq5.trainingApp;

import org.apache.felix.scr.annotations.Activate;
import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Properties;
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.Reference;
import org.apache.felix.scr.annotations.Service;
import org.osgi.service.component.ComponentContext;
import org.apache.sling.commons.osgi.PropertiesUtil;

@Component(label= "Welcome Message",
        description = "Welcome Message for the training excercise",
        immediate = true, enabled = true, metatype=true)
@Properties({
    @Property(name = "welcome.message", value = "WelcomeMessage")
})
@Service(WelcomeMessage.class)
public class WelcomeMessage {

    private static String welcome_message = "Welcome";

    @Activate
    protected void activate(ComponentContext ctx) {
        welcome_message = PropertiesUtil.toString(ctx.getProperties().get(welcome_message), welcome_message);
    }

    public static String getMessage() { 
        return welcome_message;
    }
} 
```

这是我在 JSP 中调用它：

```
<%@ page import="com.training.cq5.trainingApp.WelcomeMessage" %>

<h2><%= WelcomeMessage.getMessage() %></h2> 
```

有什么理由不从felix更新吗？我得到的只是来自welcome_message 字符串的“欢迎”文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T03:43:15.250

您正在访问 WelcomeMessage.getMessage() 作为静态方法，但您想要的是实际服务。当您使用@Service 和@Component 注释来注释一个类时，您向OSGI 框架表明您希望将此类的实例注册为服务。此服务实例由 OSGI 框架管理，根据其生命周期（实例化时）或通过哪个类加载器加载适当的类。

但是，为了使用 @Component 和 @Service 注释，您必须使用[Apache Felix SCR 插件](http://felix.apache.org/documentation/subprojects/apache-felix-maven-scr-plugin.html)。一旦成功，您的服务将被实例化。

然后，您必须访问该服务。您似乎正在使用的 Sling 中最简单的方法是[SlingScriptHelper.getService()](http://sling.apache.org/apidocs/sling5/org/apache/sling/api/scripting/SlingScriptHelper.html#getService%28java.lang.Class%29)，它可以让您查找服务。

**更新**

在 OSGI 中，服务是按其类型注册的。当您使用@Service(MyClass.class) 声明一个服务时，该服务将注册在MyClass 类型下。要检索它，您将在服务注册表中查询给定类型的服务。在 Java 代码中，您将使用[getServiceReference(Class clazz)](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getServiceReference%28java.lang.Class%29) / [getService(ServiceReference reference)](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getService%28org.osgi.framework.ServiceReference%29) [@Reference](http://felix.apache.org/documentation/subprojects/apache-felix-maven-scr-plugin/scr-annotations.html#reference)注释。

在 Sling 系统上的 JSP 中，您可以使用 SlingScriptHelper，如前所述。这是一个简短的代码示例（假设导入正确）：

```
<%
SlingBindings bindings = (SlingBindings) req.getAttribute(SlingBindings.class.getName());
SlingScriptHelper scriptHelper = bindings.getSling();
MyService service = scriptHelper.getService(MyService.class);
// ... do stuff with service.
%> 
```

如果您打算更多地使用 OSGI，我强烈推荐[OSGI 规范](http://www.osgi.org/Specifications/HomePage)。它可以免费下载并详细解释所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:51:15.810

ilikeorangutans 是正确的，您不希望在您的 OSGi 服务上使用静态方法 - 这个想法是服务实现一个接口，客户端从其 OSGi 上下文中检索它并通过其服务接口使用它。

Apache Sling [webloader 示例](http://svn.apache.org/repos/asf/sling/trunk/samples/webloader)使用此技术在其请求处理脚本中访问 Webloader 服务。在这种情况下，脚本是 ESP（服务器端 javascript），但原理与 JSP 完全相同。

服务接口在[Webloader.java](https://svn.apache.org/repos/asf/sling/trunk/samples/webloader/service/src/main/java/org/apache/sling/samples/webloader/Webloader.java)中定义，[WebLoaderImpl.java](http://svn.apache.org/repos/asf/sling/trunk/samples/webloader/service/src/main/java/org/apache/sling/samples/webloader/internal/WebLoaderImpl.java)将其实现为 OSGi 服务。

然后，[html.esp](http://svn.apache.org/repos/asf/sling/trunk/samples/webloader/ui/src/main/resources/initial-content/apps/sling/webloader/html.esp)脚本使用 sling.getService 获取服务：

```
var loader = sling.getService(Packages.org.apache.sling.samples.webloader.Webloader); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T10:38:34.170

更改此行：- `welcome_message = PropertiesUtil.toString(ctx.getProperties().get(welcome_message), welcome_message);`

**到** `welcome_message = PropertiesUtil.toString(ctx.getProperties().get("welcome.message"), welcome_message);`

注意区别：-ctx.getProperties().get( **welcome_message** ) vs ctx.getProperties().get( **"welcome.message"** )

# sql - SSIS 和业务对象 SDK 错误：文件存储库服务器输入已关闭

> ID：15774939
> 
> 赞同：0
> 
> 时间：2013-04-02T21:41:29.960
> 
> 标签：sql, sdk, ssis, business-objects, business-objects-sdk

有没有人使用 SSIS 将文件推送到 BOE 服务器？我正在尝试开发一个 SQL Server 2008 SSIS 包，它将报告 (Excel) 文件推送到我们的 Business Objects Enterprise (BO XI 3.1) 服务器。通过脚本任务，我使用 Business Objects .NET SDK 组件来验证并连接到 BOE 服务器。

我有一个包的副本部署到我的 Windows XP 桌面上运行的 SQL Server 2008 的本地实例。包成功执行（通过 SQL 代理作业）并将文件传送到 BOE 服务器上的指定位置。

当我将包部署到我们的开发 SQL 服务器（Windows Server 2008 64 位上的 SQL Server 2008）并尝试通过 SQL 代理作业执行包时，当脚本执行时收到错误消息“文件存储库服务器输入已关闭”任务尝试将文件“提交”到 BOE 服务器。该包能够打开与 BOE 服务器的会话，创建一个新的信息对象，但在 infoStore.Commit 命令上失败。

我有另一个从我们的开发 SQL 服务器成功执行的 SSIS 包 - 它与 BOE 服务器通信并搜索用户会话。它不与输入文件存储库通信——这似乎是关键区别。

我发现与此错误相关的有限信息表明 SQL Server 和 BOE 服务器之间的防火墙和端口可能是原因。我已经查看了 BOE 管理员指南，但无济于事（很可能是由于我对防火墙和端口缺乏了解）。两台服务器都在同一个子网中，并且两台服务器都没有打开防火墙。BOE CMS 服务器和输入/输出文件存储库服务器的端口已设置为静态端口 ID。我们的网络人员表示，基于防火墙或端口设置，不应该有任何东西阻止服务器之间的通信。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:55:45.700

您是否尝试过所有常见的“以 32 位方式运行”解决方案？我猜你的 SDK 是 32 位的，而不是 64 位的。

[http://www.bidn.com/blogs/ShawnHarrison/ssis/2362/ssis-basics-running-a-package-in-32-bit-mode](http://www.bidn.com/blogs/ShawnHarrison/ssis/2362/ssis-basics-running-a-package-in-32-bit-mode)

然而，SDK 适用于不同服务的事实意味着它可以在 64 位中运行。因此，如果您想对端口进行故障排除，我发现此链接[http://scn.sap.com/thread/2027785](http://scn.sap.com/thread/2027785)表明 BOE 端口是 6400 到 6411。要检查给定端口是否打开，请转到 DOS提示并输入

```
TELNET hostname port 
```

因此，如果您的 BOE 服务器是 BOESERVER，那么您可以试试这个：

```
TELNET BOESERVER 6400 
```

测试端口 6400。您应该得到一个黑屏，表明它已连接。

但是，再一次，您似乎能够连接和操作但无法提交的事实意味着您可以连接并没有端口问题，只是无法提交。

京东方方面是否有任何日志可以让您更好地了解问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:37:50.313

已确定并验证了此问题的解决方案。SQL 代理作业用于执行 SSIS 包的代理所使用的 Windows AD 帐户在网络上没有足够的权限。我们的 DBA 为帐户提供了 SQL 服务器上的本地 Windows 管理员权限，这解决了我收到的“文件存储库服务器输入已关闭”错误。

感谢那些回应并给我其他调查想法的人。

# java - 具有 (PHP) 脚本支持的可嵌入基于 Java 的 HTTP 服务器

> ID：15774943
> 
> 赞同：1
> 
> 时间：2013-04-02T21:41:43.787
> 
> 标签：java, webserver, jython

对于我的 Java 项目，我需要嵌入一个 Web 服务器来向用户提供各种网页。到目前为止，我们使用的是“官方”的 com.sun.net.httpserver.HttpServer 类，它基本上可以正常工作。

但是，现在我们想要扩展我们的应用程序，以便不仅通过嵌入式 HTTP 服务器提供静态 HTML 页面，而且还提供动态内容（如果可能，PHP）。

有什么建议吗？

编辑：没关系，我发现在我的 Java 应用程序中集成 Jython 很容易 :)

# eclipse - IBM Worklight - 如何将 Worklight 代码导入 Eclipse？

> ID：15774949
> 
> 赞同：3
> 
> 时间：2013-04-02T21:42:31.683
> 
> 标签：eclipse, ibm-mobilefirst, worklight-studio

我正在寻找有关如何将现有 Worklight 代码导入支持 Worklight 的 Eclipse 环境的信息。

除了导入项目，好像还可以导入一个app和一个adapter。应用程序和适配器必须包含哪些子组件才能使它们可导入和可重用？网络上是否有此类可导入组件的示例？

[我知道 IBM 支持页面上的此讨论，](http://ibm.co/Z6S0ct)但我正在寻找更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:53:14.780

下面将导出和导入属于同一项目的应用程序和适配器。

**导出** - 在 Eclipse 中，右键单击项目并选择导出... 选择将项目导出为 zip 文件。 **Import** - 在 Eclipse 中，右键单击 Project Explorer 视图并选择 Import... 选择导入现有项目（您的 zip 文件）。

应用程序包含在应用程序文件夹内的 appName 文件夹中。并且适配器包含在适配器文件夹内的适配器名称文件夹中。

没有机制可以导出和导入适配器或应用程序的 CODE。您将需要手动复制粘贴文件/文件夹，并且可能会更改文件中的许多引用，因为许多位置根据您使用的项目名称具有不同的值。

Worklight 极力不推荐这种方法。

* * *

从 Worklight 6.1 开始，培训模块还包含有关如何导入项目的部分。

# php - 如何让 class="selected" 取决于当前页面/url 是什么

> ID：15774962
> 
> 赞同：9
> 
> 时间：2013-04-02T21:43:18.193
> 
> 标签：php, javascript, css, html

这是我的第一篇文章，请原谅，因为我只是 Web 开发领域的新手。

通常，当我尝试创建一个网站时，我会创建一个名为 header.html 和 footer.html 的文件，这样我就只在所有页面中更改一次数据，而不是在许多 html 文件中使用多个相同的标题。并将它们与内容和每页附带的 php 代码一起包含在一个 php 文件中。

现在我的问题是因为我只有 1 个标题，css 的设计方式是，无论当前菜单/选项卡是什么，它都会被标记为“已选择”，这样用户就可以清楚地看到他们当前所在的页面。

我的问题是如何解决这个问题：

1.)`class="selected"`取决于当前页面/网址是什么。

```
<!--Menu Starts-->
        <div class="menu">
            <div id="smoothmenu" class="ddsmoothmenu">
                <ul>
                    <li><a href="index.php" class="selected">Home</a></li>
                    <li><a href="about.php">About</a> </li>
                    <li><a href="services.php">Services</a> </li>
                    <li><a href="features.php">Features</a></li>
                    <li><a href="#">Support</a>
                        <ul>
                            <li><a href="support1.php">Support 1</a></li>
                            <li><a href="support2.php">Support 2</a></li>
                         </ul>
                    </li>
                </ul>
             </div>
        </div>
<!-- Menu Ends--!> 
```

谢谢你 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T21:54:43.670

如果您正在寻找非 javascript / php 方法...

首先，您需要确定应将哪个导航链接设置为活动，然后添加*所选*类。代码看起来像这样

**php文件中的HTML**

`<a>`在传递链接目标请求 uri的超链接标记中内联调用 php 函数

```
<ul>
    <li><a href="index.php" <?=echoSelectedClassIfRequestMatches("index")?>>Home</a></li>
    <li><a href="about.php" <?=echoSelectedClassIfRequestMatches("about")?>>About</a> </li>
    <li><a href="services.php" <?=echoSelectedClassIfRequestMatches("services")?>>Services</a> </li>
    <li><a href="features.php" <?=echoSelectedClassIfRequestMatches("features")?>>Features</a></li>
    <li><a href="#">Support</a>
        <ul>
            <li><a href="support1.php" <?=echoSelectedClassIfRequestMatches("support1")?>>Support 1</a></li>
            <li><a href="support2.php" <?=echoSelectedClassIfRequestMatches("support2")?>>Support 2</a></li>
         </ul>
    </li>
</ul> 
```

**PHP 函数**

php 函数只需要比较传入的请求 uri，如果它与正在呈现的当前页面匹配，则输出*所选*的类

```
<?php
function echoSelectedClassIfRequestMatches($requestUri)
{
    $current_file_name = basename($_SERVER['REQUEST_URI'], ".php");

    if ($current_file_name == $requestUri)
        echo 'class="selected"';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:48:28.470

给每个链接一个单独的 id，然后在各个页面上使用 jQuery。

```
 <li><a href="index.php" id="home">Home</a></li>
 <li><a href="about.php" id="about">About</a> </li>
 <li><a href="services.php" id="services">Services</a> </li>
 <li><a href="features.php" id="features">Features</a></li>
 <li><a href="#" id="support">Support</a>
     <ul>
         <li><a href="support1.php">Support 1</a></li>
         <li><a href="support2.php">Support 2</a></li>
     </ul>
 </li> 
```

在服务页面上：

```
$(document).ready(function(){
    $("#services").addClass("selected");
}); 
```

或者甚至更好，正如 robertc 在评论中指出的那样，甚至不需要为 id 而烦恼，只需将 jquery 设为：

```
$(document).ready(function(){
    $("[href='services.php']").addClass("selected");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:50:36.380

您可以标识每个链接并使用 JavaScript/Jquery 将`selected`类添加到适当的链接。

```
<!--Menu Starts-->
        <div class="menu">
            <div id="smoothmenu" class="ddsmoothmenu">
                <ul>
                    <li id="home-page"><a href="index.php" class="selected">Home</a></li>
                    <li id="about-page"><a href="about.php">About</a> </li>
                    <li id="services-page"><a href="services.php">Services</a> </li>
                    <li id="features-page"><a href="features.php">Features</a></li>
                    <li id="support-page"><a href="#">Support</a>
                        <ul>
                            <li id="support1-page"><a href="support1.php">Support 1</a></li>
                            <li id="support2-page"><a href="support2.php">Support 2</a></li>
                         </ul>
                    </li>
                </ul>
             </div>
        </div>
<!-- Menu Ends--!> 
```

在您的内容页面上，使用 jQuery 执行以下操作：

```
$(document).ready(function(){
    $("#features-page").addClass("selected");
}); 
```

您可以使用的另一种方法是：

[根据页面名称添加类元素](https://stackoverflow.com/questions/7943417/add-class-element-based-on-the-name-of-the-page)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T23:16:03.047

Chris 方法的一个变体是输出一个特定的类来标识页面，例如在`body`元素上，然后在菜单项上使用固定的类，以及一个针对它们匹配的 CSS 规则。例如，这个页面：

```
<DOCTYPE HTML>
<head>
  <title>I'm the about page</title>
  <style type="text/css">
         .about .about,
         .index .index,
         .services .services,
         .features .features {
           font-weight: bold;
         }
  </style>
</head>
<body class="<?php echo basename(__FILE__, ".php"); ?>">
  This is a menu:
  <ul>
    <li><a href="index.php" class="index">Home</a></li>
    <li><a href="about.php" class="about">About</a> </li>
    <li><a href="services.php" class="services">Services</a> </li>
    <li><a href="features.php" class="features">Features</a></li>
  </ul>
</body> 
```

...对动态代码很轻，但应该达到目标；如果将其保存为“about.php”，则 About 链接将是粗体，但如果将其保存为“services.php”，则 Services 链接将是粗体，等等。

如果您的代码结构适合它，您可以简单地`body`在页面的模板文件中对页面的类进行硬编码，而不是使用任何动态代码。这种方法有效地为您提供了一种将菜单系统的“逻辑”从菜单代码中移出的方法，菜单代码对于每个页面将始终保持不变，并达到更高的级别。

作为额外的奖励，您现在可以使用纯 CSS 来根据您所在的页面定位其他内容。例如，您可以使用更多 CSS 将页面`h1`上的所有元素变为`index.php`红色：

```
 .index h1 { color: red; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-16T09:50:40.557

您可以通过简单的 if 和 PHP page / basename() 函数来完成。

```
<!--Menu Starts-->
    <div class="menu">
        <div id="smoothmenu" class="ddsmoothmenu">
            <ul>
                <li><a href="index.php" <?php if (basename($_SERVER['PHP_SELF']) == "index.php") { ?> class="selected" <?php } ?>>Home</a></li>
                <li><a href="about.php" <?php if (basename($_SERVER['PHP_SELF']) == "about.php") { ?> class="selected" <?php } ?>>About</a> </li>
                <li><a href="services.php" <?php if (basename($_SERVER['PHP_SELF']) == "services.php") { ?> class="selected" <?php } ?>>Services</a> </li>
                <li><a href="features.php" <?php if (basename($_SERVER['PHP_SELF']) == "features.php") { ?> class="selected" <?php } ?>>Features</a></li>
            </ul>
         </div>
    </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-03T10:27:18.613

对不起我的英语不好，但可能会有所帮助。您可以使用 jQuery 来完成此任务。为此，您需要将页面 url 与菜单的锚点相匹配，然后将选择的类添加到其中。例如 jQuery 代码将是

```
 jQuery('[href='+currentURL+']').addClass('selected'); 
```

# ios - Apple 关于检查有效网络连接的规则

> ID：15774963
> 
> 赞同：0
> 
> 时间：2013-04-02T21:43:24.297
> 
> 标签：ios, networking, app-store

我听说过很多关于 Apple 检查有效网络连接的规则。我正在使用 Apple 的可达性示例来执行此操作。我的问题：在应用程序加载后运行此检查是否足够，或者每次我的应用程序想要连接到互联网时都必须执行此检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:45:36.147

**你根本不需要检查**！但是，如果您因缺乏有效的网络连接而没有提供某种回退，它可能会提供糟糕的用户体验。

我通常实现*超时*而不是依赖可达性。

如果您打算使用 Reachability，我建议为它创建一个包装器，以便您可以调用如下内容：

```
[MyReachability hasInternet];

+(BOOL) hasInternet
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    [reachability startNotifier];

    NetworkStatus status = [reachability currentReachabilityStatus];

    if(status == NotReachable) 
    {
       return NO;
    }
    else if (status == ReachableViaWiFi)
    {
        return YES;
    }
    else if (status == ReachableViaWWAN) 
    {
        return YES;
    }
    //etc.
} 
```

# android - android中textview.setbackground资源中的内存不足异常

> ID：15774967
> 
> 赞同：0
> 
> 时间：2013-04-02T21:43:38.757
> 
> 标签：android

我试图在我的 TextView 中放置一个图像作为背景。我希望通过按一个按钮来更改图像。在第一个图像被加载但当我下次尝试时它说 OutOfMemoryError。

我的代码：

```
int [] Quo = {R.drawable.wallpaper10,R.drawable.wallpaper2,R.drawable.wallpaper3,R.drawable.wallpaper4};
txtView.setBackgroundResource(Quo[j] ); 
```

如果我给它，它会完美地工作

```
txtView.setBackgroundResource(Quo[0]); 
```

我是android开发的新手，请帮我解决问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T22:37:31.173

图像内存使用基于多种因素：

1.  图像的分辨率。
2.  图像文件所在的位置（可绘制文件夹的密度限定符）与应用程序运行的屏幕密度相比。
3.  您使用了哪种位图格式。
4.  图像是否为 9-patch 图像。

因此，例如，如果您有一个 100x100 的图像，并且该文件位于“drawable-mdpi”中，但它在 xhdpi 设备上运行，并且位图格式是默认格式，并且它不是 9-patch 图像，位图将采取：

100*100 * 4 *4 = 160,000 字节。

100*100 是因为宽度和高度的像素数。

前 4 个是因为在默认位图格式上，每个像素占用 4 个字节。

第二个 4 是因为密度在宽度和高度上都是 2 倍（2*2=4）。

所以，如果这是你展示的唯一代码，我认为你因为你的图片而使用了太多的内存。

您可以做的一件事是对它们进行下采样。

# android - Android按下Button无法出现Webview程序的故障排除

> ID：15774971
> 
> 赞同：1
> 
> 时间：2013-04-02T21:43:53.970
> 
> 标签：android

我实现的Android webview 遇到一些问题 开始做一个OptionMenu，他会出现当你按下Menu的四个位置 我用鼠标点击taipei 他显示到Toast 但是我想实现的功能 Toast message screen webview display the specified网页我用Intent a = new Intent(Intent.ACTION_VIEW, Uri.parse(); startActivity(a); 可以成功显示网页但是我想webview实现网页使用setContentView(); 切换到taipei.xml <= webview，当我点击提交按钮时，使用webview无法显示网页 请帮我看看问题出在哪里，因为初学者刚刚学习，我希望尝试附上代码来解决我的问题。代码网址：【我实现的Android webview遇到一些问题开始做一个OptionMenu，当你按下Menu时他会出现四个位置我用鼠标点击台北他显示给Toast 但是我想实现Toast消息屏幕webview显示指定网页的功能我使用Intent a = new Intent(Intent.ACTION_VIEW, uri.parse("[http://www.taipei-101.com.tw/](http://www.taipei-101.com.tw/) ")); startActivity(a); 可以成功显示网页 但是我想webview实现网页使用setContentView(); 切换到taipei.xml <= webview，当我点击提交按钮时，使用webview无法显示网页请帮我看看问题出在哪里，因为初学者刚刚学习，我希望尝试附上代码来解决我的问题。

代码网址：[http](http://www.javaworld.com.tw/jute/post/view?bid=26&id=312960&sty=1#312960) ://www.javaworld.com.tw/jute/post/view?bid=26&id=312960&sty= 1#312960 并附在屏幕图片上

并附加在鳕鱼 URL 中的屏幕图片上执行请求帮助谢谢

# xpages - 使用富文本控件中的 replaceItemValue 设置文档字段？

> ID：15774972
> 
> 赞同：0
> 
> 时间：2013-04-02T21:43:56.073
> 
> 标签：xpages

如何使用丰富的 tect 控件中的 replaceItemValue 设置richText 值？

我在这里找到了这段代码：http: [//www.bleedyellow.com/blogs/martin/entry/save_a_richtext_field_from_a_xpage_to_a_document?lang=en_us](http://www.bleedyellow.com/blogs/martin/entry/save_a_richtext_field_from_a_xpage_to_a_document?lang=en_us)

```
var doc = configuratieformulieren.getDocumentByKey("ConfiguratieIVNL", true);
if(doc == null){
    return;
}else{    
    var titel = getComponent("inputTextIBPTitelIVNL").getValue();
    doc.replaceItemValue("IBPTitel",titel);    
   var inhoud = getComponent("inputRichTextIBPInhoudIVNL").getValue();
   if (inhoud != null){ 
   var contentType = doc.getMIMEEntity("IBPInhoud").getContentType();
   var encoding = doc.getMIMEEntity("IBPInhoud").getEncoding();
   var str = session.createStream();
   inhoud.toString();
   str.writeText(inhoud.toString());
   doc.getMIMEEntity("IBPInhoud").setContentFromText(str, contentType, encoding);    
 }

 doc.save(true, true);
}
sessionScope.put("FormulierIVNLInfoBeschPG","Lezen"); 
```

这是正确的吗？看起来此代码取决于该字段已存在的事实。如果该字段不存在，如何处理？是否有更简单的方法可以将字段值设置为富文本控件的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:34:47.110

让数据源完成繁重的工作。有关原因的冗长而无聊（但彻底）的解释，请阅读[这篇文章](http://www.timtripcony.com/blog.nsf/d6plinks/TTRY-942UPQ)。但这里是快速版本：

不要使用：

`getComponent("someID").getValue()`

相反，使用：

`someDataSource.getValue("someFieldName")`

这始终是访问数据的一种更有效的方式：不必通过组件树来查找匹配项，而是直接进入数据源，如果您询问它的值是什么，组件无论如何都必须询问它。

同样，不要使用：

`someDataSource.replaceItemValue("someFieldName", someValue)`

相反，使用：

`someDataSource.setValue("someFieldName", someValue)`

后者在输入类型上更加灵活。数据源已经包含了根据值是文本、日期、数字、富文本、文件上传等来确定要做什么的所有逻辑。无需在您自己的代码中复制任何逻辑。

因此，如果目标是根据当前文档中的数据更新单独的文档，只需定义一个单独的文档数据源，指向要更新的文档即可。那么它实际上就是这么简单：

```
configData.setValue("RichTextData", currentDocument.getValue("RichTextData"));
configData.save(); 
```

使用上面的代码，如果您在当前文档上指定的字段是富文本，那么它在另一个文档上创建的项目将是富文本。如果它是当前文档上的任何其他类型，则它将是其他文档上的相同类型。使用`getValue()`and `setValue()`，您不必注意数据类型......数据源会为您处理所有这些。

对于奖励积分，范围`configData`为`applicationScope`以便立即为所有用户缓存对它的任何更新......或者`sessionScope`如果您正在更新的文档是特定于用户的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:13:58.497

我能够解决我的原始问题。为了扩展我的问题，我在使用表单 A 上的对话框从表单/文档 A 创建表单/文档 B 时遇到问题。发生的事情是对表单 B 的任何更改都将保存到文档 A 的数据源中。

我在表格 B 的数据源上找到了 ingoreRequestParams，设置它并解决了表格 B 写入表格 A 文档的问题。

# c# - 数据电源连接错误

> ID：15774973
> 
> 赞同：1
> 
> 时间：2013-04-02T21:43:59.137
> 
> 标签：c#, .net, web-services, websphere, ibm-datapower

全部

有时，当向我们的 Web 服务发送请求时，DataPower 会发送带有以下错误代码/消息的失败警报

*   0x01130006: 建立后端连接失败
*   0x01130011：处理响应头失败

我不确定为什么会发生这种情况，但我猜想请求太大，DataPower 无法处理，超时，并向应用程序发送失败消息。

我发现一个[论坛](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14972592)建议增加 Websphere 服务器上的最大线程数，但从未确认它是一个有效的 [或无效的] 解决方案。

我想知道是否有人通过上述解决方案成功解决了这个问题，或者还有哪些其他成功的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:59:36.847

可能是有人试图达到不兴奋的 uri 。错误说未能建立后端连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T07:04:18.647

这可能有几个原因，1.您在关于后端系统的datapower路由表中有冲突的路由信息​​。在这种情况下，设备有时能够与后端连接，有时则不能。2.后端服务器无法在适当的时间响应[尝试增加'后端超时值]。

要准确调试问题，您需要在 datapower 和后端系统之间发布数据包跟踪 [以及您要连接到的 src 和目标 IP]。

您是否还在 datapower 上使用负载均衡器与后端连接？

*   阿吉塔布

# actionscript-3 - 空间运动FLASH中的Bug

> ID：15774975
> 
> 赞同：0
> 
> 时间：2013-04-02T21:44:06.903
> 
> 标签：actionscript-3, flash

我是 Flash 新手，在我的代码中找不到错误。我希望宇宙飞船能够以矢量加速，不能加速超过最大速度，在停止加速时保持该速度矢量但随后会受到摩擦（太空尘埃，））。（它发生在二维阶段。）

我认为我的数学是正确的，但我得到一个 velVector 的错误*有时会*返回 NaN - 这是我的代码：

```
var friction:Number = .96;
var force:Number = .1;
var maxVel:Number = 3;
var accVector:Object = new Object();
var velVector:Object = new Object();
var velocity:Number;
var acceleration:Number; 
```

如果船指向正确的方向，则执行“加速”功能，否则执行“漂移”功能。它总是执行'moveship'

```
function accelerate():void {
    curRotation.vx = Math.cos(rotation/180*Math.PI);
    curRotation.vy = Math.sin(rotation/180*Math.PI);

    var angle:Number = Math.atan2(curRotation.vy, curRotation.vx);

    velocity = Math.sqrt(velVector.vx^2 + velVector.vy^2); //get velocity in both directions
    acceleration = (maxVel - velocity)/maxVel*force; //this is to make it harder to accelerate when it approaches maxvelocity

    accVector.vx = Math.cos(angle) * acceleration; //accelerate in each dimension
    accVector.vy = Math.sin(angle) * acceleration;

    velVector.vx += accVector.vx; //add acceleration to velocity
    velVector.vy += accVector.vy;
}

function drift():void {
    velVector.vx *= friction; //decrease velocity when not accelerating
    velVector.vy *= friction;       
}

function moveShip():void {
    trace("velocity", velocity)
    x += velVector.vx; //move
    y += velVector.vy;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:05:40.060

我想，你的问题是在没有值验证的情况下使用不安全的数学运算。因此，您的 velVector 取决于 accVector 取决于加速度。您有一个计算“加速度”值的除法运算。就是这样：

```
acceleration = (maxVel - velocity)/maxVel*force; 
```

在 AS3 中你可以除以零，在这种情况下你会得到 Infinity。但是，如果您将零除以零，也有机会获得 NaN：

```
var acceleration:Number = 0 / 0;
trace(acceleration); //NaN 
```

如果您尝试使用 NaN 将结果写入 Number 或无类型变量（不是 int！），您将始终得到 NaN：

```
var a:Number = 5 * NaN;
trace(a); //NaN 
```

所以，我这里是一个例子，它给出了 NaN：

```
acceleration = 0 / 0; //NaN

accVector.vx = Math.cos(angle) * acceleration; //NaN regardless on "angel" value

velVector.vx += accVector.vx; //NaN regardless on "velVector" value. 
```

我希望这个能帮上忙。

# python - python属性错误？

> ID：15774979
> 
> 赞同：1
> 
> 时间：2013-04-02T21:44:11.443
> 
> 标签：python, attributes

我正在开发一个简单的 python 游戏，玩家试图猜测单词中包含的字母。问题是，当我打印一个单词时，它会在末尾打印 \n 。

看来我需要使用 .strip 来删除它。但是，当我按照以下代码中所示使用它时，我收到一个属性错误，指出列表对象没有属性“strip”。

对不起新手问题。

```
import random
with open('wordlist.txt') as wordList:
    secretWord = random.sample(wordList.readlines(), 1).strip()

print (secretWord) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:47:17.923

好吧，那是因为列表没有名为 的属性`strip`。如果您尝试`print secretWord`，您会注意到它是`list`（长度为 1），而不是`string`. 您需要访问该列表中包含的字符串，而不是列表本身。

```
secretWord = random.sample(wordList.readlines(), 1)[0].strip() 
```

当然，如果你使用`choice`而不是，这会更容易/更干净`sample`，因为你只抓住一个词：

```
secretWord = random.choice(wordList.readlines()).strip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:47:27.673

正确的。Python 中的字符串不是列表——您必须在两者之间进行转换（尽管它们的行为通常相似）。

如果您想将字符串列表转换为字符串，可以加入空字符串：

```
x = ''.join(list_of_strings) 
```

`x`现在是一个字符串。您必须执行类似的操作才能从`random.sample`（列表）中获得的内容变为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:47:37.413

print 添加一个换行符。您需要使用较低级别的东西，例如[os.write](http://docs.python.org/2/library/os.html#os.write)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T21:48:58.223

[`random.sample()`](http://docs.python.org/2/library/random.html#random.sample)将返回一个列表，看起来您正在尝试从列表中随机选择一个元素，因此您应该使用[`random.choice()`](http://docs.python.org/2/library/random.html#random.choice)：

```
import random
with open('wordlist.txt') as wordList:
    secretWord = random.choice(wordList.readlines()).strip()

print (secretWord) 
```

# c# - 诊断 WCF 通道故障，其中服务在方法返回后关闭套接字

> ID：15774980
> 
> 赞同：1
> 
> 时间：2013-04-02T21:44:12.270
> 
> 标签：c#, wcf

在合同方法在服务上完成的非常特殊的情况下，我在 WCF 客户端上收到异常 - 即异常发生在服务返回之后，客户端代理返回之前。

我已经确认这个问题与返回类型是给定类型的数组有关，而该数组包含派生类型的实例。对于非 WCF 使用，返回此数组完全没有例外（如代码所示），并且当从客户端调用该方法时，它会在服务端返回。

*现在，从我可以捕获的*方法中抛出的异常，或者如果我未能捕获，则接收客户端，但是这种问题显然被悄悄地吞下了，唯一可以从客户端异常收集的信息是套接字错误连接关闭后！

如果我们挂钩 Closing/Faulted 事件，我们确实会在服务端看到一个 Fault & Close，然后在异常之前在客户端看到一个 Fault。

遵循下面的最小案例，并注意我正在尝试多种方法来获取更多信息。注意：我省略了实际`ServiceContract`，因为它从实现中足够清楚（只有一种方法）。

```
public class BaseItem {}
public class DerivedItem : BaseItem {}

// Service implementation plus fault & error handling
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, IncludeExceptionDetailInFaults = true, UseSynchronizationContext = false)]
public class BasicService : IMyService, IErrorHandler {

    BaseItem[] IMyService.GetItems(bool useDerived) {
        return new BaseItem[] { useDerived ? new DerivedItem() : new BaseItem() };
    }

    public void ProvideFault(Exception error, MessageVersion version, ref Message fault) {}

    public bool HandleError(Exception error) { return false; }
}

public class ClientLauncher {
    public static void LaunchClient() {
        IMyService service = new BasicService();

        BaseItem[] items = service.GetItems(false); // Works fine
        items = service.GetItems(true); // Works fine

        ServiceHost host = new ServiceHost(service); // Singleton instance
        host.AddServiceEndpoint(typeof(IMyService), new NetTcpBinding(),
            "net.tcp://localhost:8000");
        host.Open();

        // Adding service as the implementation of IErrorHandler
        ((ChannelDispatcher)host.ChannelDispatchers[0]).ErrorHandlers.Add((IErrorHandler)service);

        var myFactory = new ChannelFactory<IMyService>(new NetTcpBinding(), new EndpointAddress("net.tcp://localhost:8000"));
        IMyService client = myFactory.CreateChannel();

        try {
            items = client.GetItems(false); // Works fine
            items = client.GetItems(true); // Results in channel faulted, then exception
        }
        catch (Exception ex) {
            string str = ex.ToString();
        }
    }
} 
```

直接调用可以`GetItems`正常工作，并且客户端调用`GetItems`可以工作，但前提是数组没有派生类型的实例。该数组是必需的 -`DerivedItem`如果方法返回 single ，则返回 a 没有问题`BaseItem`。

但同样，真正的问题更为普遍——*不管*具体的挑衅性问题是什么，当 1\. 异常似乎仅表明套接字已被服务关闭和 2\. IErrorHandler 时，我们如何才能找到有关它的任何信息补充，是不是叫？我真的很想使用 WCF，但如果这是所有例外都会告诉我的话，我的信心会非常动摇：

```
************** Exception Text **************
System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:00:59.9090000'. ---> System.IO.IOException: The read operation failed, see inner exception. ---> System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:00:59.9090000'. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   at System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)
   at System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   --- End of inner exception stack trace ---
   at System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.SessionConnectionReader.Receive(TimeSpan timeout)
   at System.ServiceModel.Channels.SynchronizedMessageSource.Receive(TimeSpan timeout)
   at System.ServiceModel.Channels.FramingDuplexSessionChannel.Receive(TimeSpan timeout)
   at System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceive(TimeSpan timeout, Message& message)
   at System.ServiceModel.Dispatcher.DuplexChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at KapLogic.Aegis.Drivers.P2000.Common.WCF.IMyService.GetItems(Boolean useDerived)
   at KapLogic.Aegis.Drivers.P2000.Common.WCF.ClientLauncher.LaunchClient() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:03:03.157

使用 KnownType 属性装饰 BaseItem 并将 DerivedItem 指定为属性中的已知类型应该可以解决问题。

例如 - 代码：

```
[DataContract]
[KnownType(typeof(DerivedItem))]
public class BaseItem { } 
```

摘自 MSDN：“KnownTypeAttribute 类允许您提前指定在反序列化过程中应考虑的类型。有关工作示例，请参阅已知类型示例。”

更多信息请访问：http: [//msdn.microsoft.com/en-us/library/ms730167.aspx](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

# c# - 更改 Json 或 ExtensionDataObject

> ID：15774981
> 
> 赞同：0
> 
> 时间：2013-04-02T21:44:13.937
> 
> 标签：c#, json, iextensibledataobject

我有一个无法更改的 Json 服务，因为它不是我的。他们的 Json 以一种难以解析的方式格式化。它看起来像这样。

```
"people": {
     "Joe Bob": {
              "name": "Joe Bob",
              "id": "12345"
     },
     "Bob Smith": {
              "name": "Bob Smith",
              "id": "54321"
     }
 }, 
```

我真的更希望它像 JSon 数组一样布局，但目前不是。我想知道这里最好的方法。我应该在解析它之前将 Json 更改为看起来像一个数组还是加载 ExtensionData 并从中解析它？

提要中还有其他我没有问题的项目。只是坚持这一节。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:03:11.330

您可以使用 json.net 对数据进行反序列化（您粘贴的 json，并且只进行一次解析，无需修改任何内容）。

使用比，您可以使用访问名称和值`dynamic foo = JsonConvert.DeserializeObject<dynamic>(data)` 来迭代列表。`foo.people`

您可以创建一个类（如果您知道架构是什么，并将数据反序列化为给定类的列表，例如：

```
 public class People
    {
        [JsonProperty(PropertyName="people")]
        public IDictionary<string, Person> Persons { get; set; }
    }

    public class Person
    {
        [JsonProperty(PropertyName="name")]
        public string Name { get; set; }

        [JsonProperty(PropertyName = "id")]
        public string Id { get; set; }
    } 
```

然后打电话：

```
var obj = JsonConvert.DeserializeObject<People>(data);
foreach (var item in obj.Persons.Values)
{
      //item is instance of Person      
} 
```

另一个好的和可能的选择是： [如何在 c# 中导航任何 JSON 树？](https://stackoverflow.com/questions/4946592/how-can-i-navigate-any-json-tree-in-c)

# multithreading - Scala 进程退出但不清理线程

> ID：15774987
> 
> 赞同：3
> 
> 时间：2013-04-02T21:44:35.720
> 
> 标签：multithreading, scala, process, phantomjs

我正在尝试使用 akka 演员从 scala 应用程序中运行 PhantomJS：

```
val process = Process("phantomjs --ignore-ssl-errors=yes " + myrenderscript.js + args ...)
val result = process.run(processLogger, true).exitValue() match {
  case ExitCode.SUCCESS => Left(Success)
  case ExitCode.TIMEOUT => Right(TimeoutError)
  case ExitCode.OPEN_FAILED => Right(NetworkError)
  case _ => Right(UnknownError)        
} 
```

myrenderscript.js 看起来像这样：

```
var version = "1.1";

var TIMEOUT = 30000,
EXIT_SUCCESS = 0,
EXIT_TIMEOUT = 2,
EXIT_OPEN_FAILED = 3;

if (phantom.args.length < 2) {
    console.log("Usage: phantomjs render.js parentUrl output [width height]");
    phantom.exit(1);
}
var url = phantom.args[0];
var output = phantom.args[1];

var width = parseInt(phantom.args[2] || 1024);
var height = parseInt(phantom.args[3] || 1024);
var clipwidth = parseInt(phantom.args[4] || 1024);
var clipheight = parseInt(phantom.args[5] || 1024);
var zoom = parseFloat(phantom.args[6] || 1.0);
var phantom_version = phantom.version.major + "." + phantom.version.minor + "." +    phantom.version.patch;
var userAgentString = "PhantomJS/" + phantom_version + " screenshot-webservice/" + version;

renderUrlToFile(url, output, width, height, clipwidth, clipheight, zoom, userAgentString, function (url, file) {
    console.log("Rendered '" + url + "' at size (" + width + "," + height + ") into '" + output + "'");
    phantom.exit(EXIT_SUCCESS);
    phantom = null;
});

setTimeout(function () {
    console.error("Timeout reached (" + TIMEOUT + "ms): " + url);
    phantom.exit(EXIT_TIMEOUT);
}, TIMEOUT);

function renderUrlToFile(url, file, width, height, clipwidth, clipheight, zoom,    userAgentString, callback) {
    console.log("renderUrlToFile start: " + url)
    var page = new WebPage();
    page.viewportSize = { width: width, height: height };
    page.clipRect = { top: 0, left: 0, width: clipwidth, height: clipheight};
    page.settings.userAgent = userAgentString;
    page.zoomFactor = zoom;
    page.open(url, function (status) {
        console.log("renderUrlToFile open page: " + url)
        if (status !== "success") {
            console.log("Unable to render '" + url + "' (" + status + ")");
            page.release();
            page.close();
            page = null;
            phantom.exit(EXIT_OPEN_FAILED);
        } else {
            console.log("renderUrlToFile open page success and pre-render: " + url)
            page.render(file);
            console.log("renderUrlToFile open page post-render: " + url)
            page.release();
            page.close();
            page = null;
            callback(url, file);
        }
    });
} 
```

在创建进程之前和完成运行之后，正在创建大约 4 个新线程。

每次调用创建进程的方法时，都会创建并启动新线程。该过程完成后，线程回到监视状态。最终我的应用程序需要超过 500 个线程（我正在捕获一个大型网站和内部链接）

如何让 scala 清理运行 phantomjs 时创建的线程？

编辑：

我已更改 scala 代码以执行以下操作：

```
val process = Process("phantomjs --ignore-ssl-errors=yes " + myrenderscript.js + args ...).run(processLogger, connectInput)
val result = process.exitValue() match {
  case ExitCode.SUCCESS => Left(Success)
  case ExitCode.TIMEOUT => Right(TimeoutError)
  case ExitCode.OPEN_FAILED => Right(NetworkError)
  case _ => Right(UnknownError)        
}
process.destroy() 
```

然而，线程仍然存在......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:26:27.950

我想通了为什么它没有清​​理线程，但我不完全理解它。因此，如果有人在这里发布真正的答案，我会投票赞成该答案。

问题是我将connectInput 值设置为true。当我将其设置为 false 时，线程会按预期销毁。我不确定为什么。

当设置为 true 时，线程转储显示其中一个线程正在阻塞其他线程：

```
Thread-3@2830 daemon, prio=5, in group 'main', status: 'RUNNING'
 blocks Thread-63@4131
 blocks Thread-60@4127
 blocks Thread-57@4125
 blocks Thread-54@4121
 blocks Thread-51@4103
 blocks Thread-48@4092
 blocks Thread-45@4072
 blocks Thread-42@4061
 blocks Thread-39@4054
 blocks Thread-36@4048
 blocks Thread-33@4038
 blocks Thread-30@4036
 blocks Thread-27@4008
 blocks Thread-24@3996
 blocks Thread-21@3975
 blocks Thread-18@3952
 blocks Thread-15@3939
 blocks Thread-12@3905
 blocks Thread-9@3885
 blocks Thread-6@3850
  at java.io.FileInputStream.readBytes(FileInputStream.java:-1)
  at java.io.FileInputStream.read(FileInputStream.java:220)
  at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
  at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
  at java.io.FilterInputStream.read(FilterInputStream.java:116)
  at java.io.FilterInputStream.read(FilterInputStream.java:90)
  at scala.sys.process.BasicIO$.loop$1(BasicIO.scala:225)
  at scala.sys.process.BasicIO$.transferFullyImpl(BasicIO.scala:233)
  at scala.sys.process.BasicIO$.transferFully(BasicIO.scala:214)
  at scala.sys.process.BasicIO$.connectToIn(BasicIO.scala:183)
  at scala.sys.process.BasicIO$$anonfun$input$1.apply(BasicIO.scala:190)
  at scala.sys.process.BasicIO$$anonfun$input$1.apply(BasicIO.scala:189)
  at scala.sys.process.ProcessBuilderImpl$Simple$$anonfun$2.apply$mcV$sp(ProcessBuilderImpl.scala:72)
  at scala.sys.process.ProcessImpl$Spawn$$anon$1.run(ProcessImpl.scala:22) 
```

我最初以为是进程记录器，但事实并非如此。

谁可以给我解释一下这个？

# xml - Groovy“查找”闭包...遍历递归 xml

> ID：15774988
> 
> 赞同：0
> 
> 时间：2013-04-02T21:44:39.123
> 
> 标签：xml, parsing, loops, groovy, gpath

如果我有这样的 GPath：

```
<Apple>
    <Mango>
        <id>5 </id>
    </Mango>
    <Mango>
        <id>10 </id>
    </Mango>
</Apple> 
```

要获得一个 ID 为 5 的芒果，我会这样做，

```
GPathResult result = Apple.find{
it.Mango.id=5
} 
```

但是如果我的 GPath 是递归的。我的意思是，一个苹果可以有一个芒果。芒果里面又可以放一个苹果。例如：

```
<Apple>
    <Mango>
        <id>10</id>
        <Apple>
            <Mango>
                <id>5 </id>
            </Mango>
         </Apple>
    </Mango>
</Apple> 
```

如何获得 id 为“5”的芒果。无论递归，GPath 可能是（ID 为“5”的芒果可以处于任何递归级别），我需要找到 ID 为“5”的芒果。我怎样才能通过 find 闭包来实现这一点？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:10:40.097

根据最匹配您的结构的内容，您可以使用[breadthFirst](http://groovy-lang.org/processing-xml.html#_flexible_navigation_with_children_depthfirst_and_breadthfirst)或[depthFirst ：](http://groovy-lang.org/processing-xml.html#_flexible_navigation_with_children_depthfirst_and_breadthfirst)

```
def xml = '''<Apple>
    <Mango>
        <id>10</id>
        <Apple>
            <Mango found="correct">
                <id>5</id>
            </Mango>
         </Apple>
    </Mango>
</Apple>'''

nodes = new XmlParser().parseText xml

mango = nodes.breadthFirst().find { it.id.text() == "5" }

assert mango.@found == "correct" 
```

# php - WURFL 内存分配致命错误

> ID：15774989
> 
> 赞同：0
> 
> 时间：2013-04-02T21:44:47.270
> 
> 标签：php, memory-leaks, wurfl

我使用 WURFL 很好，然后突然抛出这个错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 65484 bytes) in /var/wwwlibs/vnd/WURFL/lib/CustomDevice.php on line 118 
```

我在网上找到了一些关于 Tera-WURFL 的东西，但是（afaik）我没有使用它，而只是从[sourceforge](http://wurfl.sourceforge.net/php_index.php)下载的版本。有人建议更新 SimpleXML，但我只是对为什么 WURFL 超过顶部感到困惑。

我的包装类如下：

```
<?php
namespace vnd\WURFL;

use \WURFL_Configuration_InMemoryConfig;
use \WURFL_WURFLManagerFactory;
/**
 * File: WURFL_bootstrap.php
 * Sets up and readies the WURFL library for platform and browser detection.
 */
require_once 'WURFL/lib/Application.php';

// ----- WURFL constants ------ //
define('WURFL_ROOT', dirname(__FILE__).'/');

# Directories
define('WURFL_RESOURCES_DIR',     WURFL_ROOT.'resources/');
define('WURFL_PERSISTENCE_DIR', WURFL_RESOURCES_DIR.'storage/persistence');
define('WURFL_CACHE_DIR',         WURFL_RESOURCES_DIR.'storage/cache');

class WURFLBootstrap extends WURFL_Configuration_InMemoryConfig {    
    const WURFL_WATCH_MODE = "performance";
    const WURFL_VERSION = '2.3.3';
    const WURFL_CACHE_EXP = 36000;

    # Our WURFL Manager
    private $_manager;

    # Our device where the capabilities lie
    private $_device;

    public function __construct(){
        $zipPath = $this->getPath();

        if(!is_file($zipPath))
            die($zipPath.' is not a valid file.');
        if(!is_dir(WURFL_PERSISTENCE_DIR) || !is_dir(WURFL_CACHE_DIR))
            die(WURFL_PERSISTENCE_DIR.' or '.WURFL_CACHE_DIR.' are not valid directories.');

        $this->wurflFile($zipPath);
        $this->matchMode(self::WURFL_WATCH_MODE);

        $this->persistence('file', array('dir' => WURFL_PERSISTENCE_DIR));
        $this->cache('file',        array('dir' => WURFL_CACHE_DIR, 'expiration' => self::WURFL_CACHE_EXP));

        // Automatically reload the WURFL data if it changes
        $this->allowReload(true);

        // Create a WURFL Manager Factory from the WURFL Configuration
        $wurflManagerFactory = new WURFL_WURFLManagerFactory($this);

        // Create our factory and start the process.
        $this->_device = $wurflManagerFactory->create()->getDeviceForHttpRequest($_SERVER);
    }
    /**
     * Returns the path to our ZIP file 
     */
    private function getPath(){
        return WURFL_RESOURCES_DIR.'/wurfl-'.self::WURFL_VERSION.'.zip';
    }
    /**
     * Seeing as this is a wrapper class, any calls to our $wflManager (or whatever
     * we happened to be assigned to) should be passed on to the actual
     * manager object where all the goodies lie.
     * 
     */
    public function __call($name, $arguments){
        //return $this->device->$name($arguments);
    }
    public function getDevice(){
        return $this->_device;
    }
} 
```

运行它的计算机是一台旧笔记本电脑，所以它没有存储内存，但是有什么用呢？我删除了所有可能导致内存过度分配的东西，但到目前为止，WURFL 似乎只是不想运行。

我还尝试清除我的缓存和持久性目录并再次运行它，但没有骰子。

我在想的一件事是使用 XML 配置类而不是`WURFL_Configuration_InMemoryConfig`（基于我认为它将所有内容存储在内存中的名称，至少是暂时的，因此会崩溃），但我很好奇为什么突然抛出这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:45:10.393

[我不熟悉那个库，但总的来说，您可以通过注册关闭函数](http://php.net/manual/en/function.register-shutdown-function.php)并在那里打印最后一个错误来准确找出问题所在。

在脚本开头的某处添加以下代码（即在错误发生之前）：

```
function my_shutdown_function() {
  echo "SHUTDOWN!\n";
  $err = error_get_last();
  if($err) {
    print_r($err);

    // optionally, if you want a stack trace:
    $ex = new Exception;
    print_r($ex->getTraceAsString());
  }
}

register_shutdown_function('my_shutdown_function'); 
```

如果您愿意，您也可以享受类似的乐趣[`set_error_handler`](http://php.net/manual/en/function.set-error-handler.php)，[`set_exception_handler`](http://php.net/manual/en/function.set-exception-handler.php)尽管这两者都不会遇到致命错误（以及其他故障）。

# generics - FreePascal 是否有 Dictionary 对象？

> ID：15774991
> 
> 赞同：6
> 
> 时间：2013-04-02T21:45:06.410
> 
> 标签：generics, dictionary, freepascal

为 FreePascal 找到东西是难以置信的，因为所有搜索最终都在某种与 Delphi 相关的站点上。

有内置的 Dictionary 对象吗？

[此页面](http://wiki.freepascal.org/Templates#Generic_classes)引用了通用类部分下的“TDictionary”，但我不知道它可能在哪个单元中，或者它是否存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T10:55:10.610

该单元[`fgl`](http://wiki.freepascal.org/Generics#Introduction)包含`freepascal`.

在这些类中，最接近 a 的`TDictionary`是`TFPGMap`。

可以在此处找到如何使用此类的示例：[`Class Map or Dictionary, anyone?`](http://www.lazarus.freepascal.org/index.php?topic=18441.0).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-24T20:18:38.973

您可以使用 Generics.Collections 单元中非常兼容的 TDictionary：

*   [https://github.com/dathox/generics.collections](https://github.com/dathox/generics.collections)
*   [http://bugs.freepascal.org/view.php?id=27206](http://bugs.freepascal.org/view.php?id=27206)

适用于 FPC 主干转速。30239 及更新版本。

**编辑 05.08.2016**

Generics.Collections 库已作为 r34229 中的 rtl-generics 包添加到 FPC 主干。用于 Win32 + Lazarus 主干的预编译 FPC 主干（带有 Generics.Collections）的最新版本可在[http://newpascal.org](http://newpascal.org)获得。Generics.Collections 的存储库（[https://github.com/dathox/generics.collections](https://github.com/dathox/generics.collections)）仍将用于维护（应经常与 FPC 主干同步）。

# json - 将coldfusion json转换为结构

> ID：15774993
> 
> 赞同：8
> 
> 时间：2013-04-02T21:45:11.110
> 
> 标签：json, coldfusion, struct, cfml

我有一个来自 jQuery 应用程序的 JSON 变量输出，如下所示：

```
[{"id":1},
{"id":197,"children":[{"id":198},{"id":199},{"id":200}]},
{"id":2,"children":[{"id":3},{"id":4},{"id":143},{"id":6},{"id":5},{"id":7},{"id":8},{"id":9},{"id":10},{"id":11},{"id":12}]},
{"id":15,"children":[{"id":17},{"id":190},{"id":191},{"id":131},{"id":16},{"id":142},{"id":124}]},
{"id":149,"children":[{"id":150},{"id":160},{"id":161},{"id":184}]},
{"id":20,"children":[{"id":132},{"id":127},{"id":152},{"id":107},{"id":108},{"id":109},{"id":110},{"id":125},{"id":128},{"id":130},{"id":129},{"id":112}]},
{"id":162,"children":[{"id":163},{"id":164},{"id":165},{"id":166},{"id":186},{"id":187}]},
{"id":167,"children":[{"id":173},{"id":168},{"id":170},{"id":169},{"id":192},{"id":194}]},
{"id":174,"children":[{"id":176},{"id":175},{"id":188}]},
{"id":153,"children":[{"id":178},{"id":179},{"id":195},{"id":154},{"id":157}]},
{"id":180,"children":[{"id":181},{"id":182},{"id":183},{"id":189}]},
{"id":122},
{"id":21},
{"id":13},
{"id":92},
{"id":22},
{"id":113},
{"id":114}] 
```

我需要将此变量转换为结构，然后通过第一个`id`参数循环该结构以找到每个的子项`id`（如果有的话）。我试图将其转换为这样的结构，但出现错误：

```
<cfset jsonarray = deserializeJson(output)>
<cfloop collection="#jsonarray#" index="id">
<cfdump var="#jsonarray[id]#">
</cfloop> 
```

它不将变量识别为结构：

```
Invalid collection [{id={1}}, {children={[{id={198}}, {id={199}}, {id={200}}]},id={197}}, {children={[{id={3}}, {id={143}}, {id={4}}, {id={6}}, {id={5}}, {id={7}}, {id={8}}, {id={9}}, {id={10}}, {id={11}}, {id={12}}]},id={2}}, {children={[{id={17}}, {id={190}}, {id={191}}, {id={131}}, {id={16}}, {id={142}}, {id={124}}]},id={15}}, {children={[{id={150}}, {id={160}}, {id={161}}, {id={184}}]},id={149}}, {children={[{id={132}}, {id={127}}, {id={152}}, {id={107}}, {id={108}}, {id={109}}, {id={110}}, {id={125}}, {id={128}}, {id={130}}, {id={129}}, {id={112}}]},id={20}}, {children={[{id={163}}, {id={164}}, {id={165}}, {id={166}}, {id={186}}, {id={187}}]},id={162}}, {children={[{id={173}}, {id={168}}, {id={170}}, {id={169}}, {id={192}}, {id={194}}]},id={167}}, {children={[{id={176}}, {id={175}}, {id={188}}]},id={174}}, {children={[{id={178}}, {id={179}}, {id={195}}, {id={154}}, {id={157}}]},id={153}}, {children={[{id={181}}, {id={182}}, {id={183}}, {id={189}}]},id={180}}, {id={122}}, {id={21}}, {id={13}}, {id={92}}, {id={22}}, {id={113.... Must be a valid structure or COM object. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T22:01:47.017

在[JSON](http://json.org/)中，`[]`表示一个数组和`{}`一个结构（或对象）。所以你的输入实际上是一个结构数组。您需要使用`array`循环，而不是收集循环：

```
<cfset arrayOfStructs = deserializeJson(output)>
<cfloop array="#arrayOfStructs#" index="parent">
      <cfset parentID = parent.id />
      ... 
</cfloop> 
```

`children`也是一个结构数组。在外循环内部，检查该键是否存在。如果找到，循环遍历子数组并对每个 id 做一些事情：

```
 <cfif structKeyExists(parent, "children")>
      <cfloop array="#parent.children#" index="child">
          ...
      </cfloop>
  </cfif> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:19:51.110

一个整洁的 cfscript 版本。:)

```
<cfscript>
    structObj = deserializeJson(jsonString);

    for(i = 1; i LTE ArrayLen(structObj); i++){

        WriteOutput("parent id : " & structObj[i].id & "<br>"); 
        if(StructKeyExists(structObj[i], "children")){
            for(j = 1; j LTE ArrayLen(structObj[i].children); j++){
                WriteOutput("    -children id : " & structObj[i].children[j].id & "<br>");
            }
        }
    }
</cfscript> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T18:17:07.333

[我在这里](https://gist.github.com/richfergus/6c739b8100bf0cd1c6c7)创建了一个 Angular 1.4 ColdFusion 9 JSON Normalizer

```
 var myURL = 'myCfc.cfc?method=getItemsFromDb';
 var app = angular.module('angularOutput',[]);
 app.controller("sectionController", function($scope, $http) {
      $http.get(myURL).
        success(function(data, status, headers, config) {
          var log = []; 
          var output = '';
          angular.forEach(data.DATA, function(value, key) {
                    this.push(output +='{"value": ');
                    this.push(output += '"'+value[0]+'"');
                    this.push(output +=',"text":');
                    this.push(output += '"'+value[1]+'"');
                    this.push(output +='}');
                    this.push(output +=',');
                }, log);
              output = output.replace(/,\s*$/, "");/*had to remove the final comma */
              output = '['+output+']'; /*had to add the [] to corectally form the output*/

          $scope.sections = angular.fromJson(output);
        }).
        error(function(data, status, headers, config) {
          console.log(data);
        });
    }); 
```

# javascript - 检查 DIV 中的内容是否已更改

> ID：15774994
> 
> 赞同：0
> 
> 时间：2013-04-02T21:45:11.620
> 
> 标签：javascript, jquery

我正在使用 div 在 div 中加载一些内容`setInterval`，并且我不希望它每次都运行，所以我需要检查内容是否从上次运行时发生了变化。

**这是我目前正在使用但不起作用的东西**

```
var auto_refresh = setInterval(
function() {
    $('#loaddiv').load('/wzha/reload.php');
    $('#loaddiv').change(function() {
        var dddd = $('#loaddiv').text();
        alert(dddd);
    });
}, 1000); 
```

**例子：**

reload.php 只是`<?php echo 'something here'; ?>`. 当我保存 reload.php 时，它需要`something here`放入`#loaddiv`. 在我将 reload.php 重新保存到其他内容之前，它不应再加载 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:56:51.103

也许是这样的：

```
var content,
    auto_refresh = setInterval(function() {
        $.get('/wzha/reload.php&r=' + (new Date()).getTime(), function(data) {
            if (data != content) {
                content = data;
                $('#loaddiv').html(data);
            }
        });
}, 1000); 
```

# jquery - jQuery 与兄弟姐妹切换 img

> ID：15774996
> 
> 赞同：0
> 
> 时间：2013-04-02T21:45:13.600
> 
> 标签：jquery, radio-button, siblings

我想用我的图像制作单选按钮。所以我这样定义我的div：

```
<div id="LabBox">
    <img class="dlike" alt="dlike" src="images/dlike_OFF.png"/>
    <img class="check" alt="check" src="images/check_OFF.png"/>
    <img class="funny" alt="funny" src="images/funny_OFF.png"/>
    <img class="idea" alt="idea" src="images/idea_OFF.png"/>
    <img class="imp" alt="imp" src="images/imp_OFF.png"/>

</div> 
```

我想切换文件名。所以我使用以下 jqueqy 代码：

```
 $("#LabBox img").click(function () {

var src;    
var srcname = $(this).attr("src");

    // turn on!
if(srcname.toLowerCase().indexOf("off") >= 0){

    //(e.g images/dlike_OFF.png -> images/dlike_ON.png)
src = $(this).attr("src").replace("OFF", "ON");  
    $(this).attr("src", src);   
}   
    // All others turn off! for other words src swap.
  var src2 =$(this).siblings().attr("src").replace("ON", "OFF");
   // All images are the same pic. why?? ---> src="images/dlike_OFF.png"
  console.log(src2);
  $("#LabBox img").attr("src",src2);

    }); 
```

问题是当我想替换我选择的标签（图像）的所有“兄弟”时。所有 img 都更改为相同的 img，即“images/dlike_OFF.png”（第一个）。我如何使用兄弟姐妹（）更改我的所有 img？或者我如何调整我的脚本以交换所有图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:53:35.977

```
$("#LabBox img").click(function () {
    if (this.src.indexOf('OFF') != -1) {
        this.src = this.src.replace('OFF', 'ON');
    }
    $(this).siblings().attr('src', function(i,src) {
        return src.replace('ON', 'OFF')
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:01:26.230

`**[LIVE DEMO](http://jsbin.com/evahoh/3/edit)**`

```
$("#labBox").on('click','img[src$=OFF]',function () {
  this.src = this.src.replace('OFF', 'ON');
  $(this).siblings().each(function(){
     this.src = this.src.replace('ON', 'OFF');
  });
}); 
```

# c# - 如何在 DropDownFor 的 SelectList 中设置所选项目？

> ID：15774998
> 
> 赞同：3
> 
> 时间：2013-04-02T21:45:19.737
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

我是 MVC 的新手，但我已经阅读了关于这个主题的几个问题。不过，没有一个答案能解决我的问题。这是我的代码（只是相关的属性）：

**C# 类**

```
public class Customer
{
    public int CustomerId { get; internal set; }
    public string Name { get; set; }
}

public class Project
{
    public int ProjectId { get; internal set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Comment { get; set; }

    public Customer CurrentCustomer { get; set; }
} 
```

**控制器类**

```
public ActionResult Edit(int id)
{
    Project item = projectRepository.Get(id);

    ViewBag.AllCustomers = new SelectList(
        new CustomerRepository().Get(), // Returns a List<Customer> of all active customers.
        "CustomerId",
        "Name",
        (object) item.CurrentCustomer.CustomerId);

    return View(item);
} 
```

**看法**

```
<div class="editor-label">
    @Html.LabelFor(model => model.CurrentCustomer)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.CurrentCustomer, (SelectList)ViewBag.AllCustomers, "-- Select a Customer. --")
    @Html.ValidationMessageFor(model => model.CurrentCustomer)
</div> 
```

我已经尝试过不使用 ViewBag （在视图本身中进行 SelectList 实例化），这也不起作用。我尝试对 ID 进行硬编码，而不是使用 CurrentCustomer.CustomerId，但是当我在 SelectList 本身上设置断点时，我发现它可以正确处理所有内容。

所有其他 StackOverflow 问题都表明上述方法和属性名称应该可以正常工作，但对于我来说，我无法弄清楚这里出了什么问题。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:50:57.393

我怀疑您使用的是*EF Code-First*。您犯的错误是尝试将 int (id) 分配给 entity `CurrentCustomer`。唯一返回一个 id而`dropdownlist`不是一个实体。

您应该将 Id 发送到您的操作方法，然后查找并分配实体（或者可以说只是外键）

**在您的模型中添加一个 Id**

```
public class Project
{
    public int ProjectId { get; internal set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Comment { get; set; }

    public Customer CurrentCustomer { get; set; }
    public int CurrentCustomerId { get; set; }
} 
```

**在你看来**

```
@Html.DropDownListFor(model => model.CurrentCustomerId,
 (SelectList)ViewBag.AllCustomers, "-- Select a Customer. --") 
```

# matlab - x & y 中的翻译

> ID：15774999
> 
> 赞同：0
> 
> 时间：2013-04-02T21:45:23.567
> 
> 标签：matlab, image-processing

如何在 x 和 y 坐标中找到平移以对齐边缘检测到的图像。我有 3 个边缘检测到的图像，我想将第二部分和第三部分（G&R）与第一部分（B）对齐。

如何使用“circshift”功能来做到这一点。因为我想使用平方差度量的总和来衡量图像的匹配程度：

平方差之和： sum( (image1-image2).^2 )

我想记录 x&y 中用于对齐每个图像的部分的位移

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:48:27.353

图像处理工具箱有一个[imregister](http://www.mathworks.nl/help/images/ref/imregister.html)功能，它应该会产生一些不错的配准，而无需输入太多细节。