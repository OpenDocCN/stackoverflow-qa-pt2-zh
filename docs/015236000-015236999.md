# StackOverflow 问答 15236000-15236999

# mysql - ORDER BY 与组的优先级？

> ID：15236000
> 
> 赞同：0
> 
> 时间：2013-03-05T23:16:20.013
> 
> 标签：mysql, group-by

一个示例表：

```
NAME, PRIORITY, SORT
TEST1, 0, 11:10
TEST2, 1, 11:15
TEST3, 0, 11:20
TEST4, 1, 11:30 
```

我想通过订购来列出以下优先级列表`priority`：

```
TEST2 (first submitted with priority)
TEST1
TEST3
TEST4 
```

怎么做？我已经尝试过使用 GROUP BY 等，但没有成功！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:23:23.037

请试试这个。

```
 SELECT NAME 
    FROM table
   WHERE PRIORITY = 1
ORDER BY TIME ASC
   LIMIT 1
UNION 
  SELECT NAME 
    FROM table
ORDER BY TIME ASC 
```

那应该给

```
TEST2 (first submitted with priority) TEST1 TEST3 TEST4 
```

编辑忘记优先级

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T23:31:07.430

根据[http://blog.sqlauthority.com/2012/10/30/sql-server-union-all-and-order-by-how-to-order-table-separately-while-using-union-all/](http://blog.sqlauthority.com/2012/10/30/sql-server-union-all-and-order-by-how-to-order-table-separately-while-using-union-all/)您不能在工会的相对两侧有两个单独的订单。但是您可以做的是添加一个新列并按该列排序。

该网站建议类似（虽然这是用于 sql server，但我不知道 mysql 是否使用相同的语法）

```
Select name, priority, sort, '1' OrderKey from table where priority = 1 and sort <= (select min(t3.sort) from table t3 where t3.priority = 1)
union
select name, priority, sort, '2' OrderKey from table
order by OrderKey, time asc 
```

同样，这适用于 sql server，但不确定它是否适用于 mysql。

编辑：固定查询（希望...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:38:20.270

```
CREATE TABLE `name_priority_sort` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(31) DEFAULT NULL,
  `priority` int(11) DEFAULT NULL,
  `sort` time DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

INSERT INTO `name_priority_sort` (`id`, `name`, `priority`, `sort`)
VALUES
    (1,'Test1',0,'11:10:00'),
    (2,'Test2',1,'11:15:00'),
    (3,'Test3',0,'11:20:00'),
    (4,'Test4',1,'11:30:00');

select `name`, priority, sort from (
    select 1 `set`, `name`, priority, min(sort) sort from `name_priority_sort` where priority = 1
    union all
    select 2 `set`, `name`, priority, sort from `name_priority_sort` where `name` not in (
        select `name` from (
            select `name`, priority, min(sort) sort from `name_priority_sort` where priority = 1
        ) first_set
    ) 
) sets
order by `set`, sort

-- results

name    priority    sort
Test2   1   11:15:00
Test1   0   11:10:00
Test3   0   11:20:00
Test4   1   11:30:00 
```

# node.js - Mustache、Twitter Bootstrap、NodeJS 纯 HTML 返回

> ID：15236003
> 
> 赞同：0
> 
> 时间：2013-03-05T23:16:53.463
> 
> 标签：node.js, twitter-bootstrap, mustache

当我尝试使用此处的示例时： [https ://github.com/raycmorgan/Mu](https://github.com/raycmorgan/Mu)

```
var http = require('http')
  , util = require('util')
  , mu   = require('mu2');

mu.root = __dirname + '/templates';

http.createServer(function (req, res) {

  var stream = mu.compileAndRender('index.html', {name: "john"});
  util.pump(stream, res);

}).listen(8000); 
```

我得到了一个纯 HTML 文件（没有 twitter 引导程序的幻想）。

是否需要其他选项来允许它与 .html 文件一起提供 CSS 和诸如此类的东西？

我很想使用我在 connect 包中找到的简单性来提供文件（如果我不想使用 mustache，我可以提供 twitter bootstrapified html 文件没问题，当我尝试通过以下路由它时它不会'不起作用，但是如果我想要小胡子，我不确定最好的方法是什么，那里的大多数教程都使用 express.createServer，但我看到一条消息，它不再应该以这种方式使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:59:15.203

如果你想提供静态内容（例如 js/css），你必须告诉节点从哪里提供它以及它在哪里。但是，为简单起见，我建议您使用 Express。

如果您已经知道以下内容，我深表歉意，但我会说只是以防万一。

为了让您开始，您可以`npm install -g express`使用命令行工具全局安装 Express，然后运行`express`命令（在空目录中）以创建（超级）基本 Express 应用程序。在创建的 app.js 文件中，您将看到它使用 Connect 静态中间件来提供静态 css/js/img 文件，并创建了一些基本路由来帮助您入门。

您还会注意到它使用`var app = express();`（至少我相信它）创建了快速服务器。

# java - 当 p:autoComplete 移入自定义组件时，primefaces requiredMessage 会丢失

> ID：15236008
> 
> 赞同：0
> 
> 时间：2013-03-05T23:17:08.753
> 
> 标签：java, jsf, jsf-2, primefaces

我在一个非常标准的 Java Web 应用程序（jsf-2）中使用 PrimeFaces，当我将 ap:autoComplete 组件移动到它自己的自定义组件中时，我的所需消息显示出现问题。

首先，当它在页面本身上时 p:autoComplete - 这工作正常（简化）：

```
<h:panelGrid  id="newRoleAdminGrid" >

            <p:autoComplete id="newRoleAdminPerson"
                            style="position: relative; padding-right:5px"
                            value="#{roleList.newRoleAdminPerson}"
                            var="personVar" 
                            itemValue="#{personVar}" 
                            itemLabel="#{personVar.fullFamiliarName}"
                            forceSelection="true"
                            completeMethod="#{personAutoComplete.byGeneralCriteria}"
                            converter="PersonConverter"
                            minQueryLength="3"
                            maxResults="50" 
                            scrollHeight="400"
                            size="50"
                            required="true" 
                            requiredMessage="admin name is requiredd"
                            title="enter users first name, last name or login" >
            </p:autoComplete> 

            <h:message for="newRoleAdminPerson" class="redError"/>

            <p:commandButton value="add" ajax="true" 
                             update="roleAdminTable,newRoleAdminGrid"
                             id="addRoleAdminBtn"
                             actionListener="#{roleList.newRoleAdmin}"
                             style="margin:5px;"
                             icon="ui-icon-plus"/>
        </h:panelGrid> 
```

看到上面的 h:message 了吗？当值为空白或未通过 PersonConverter 时，它可以完美运行并显示...

但是我的应用程序中到处都有相同的组件，所以我创建了一个自定义组件。

这是组件：

```
<cc:interface>
    <cc:attribute name="id" type="String" required="true" />
    <cc:attribute name="person" type="com.foo.bar.model.Person" required="true" />
    <cc:attribute name="size" type="int" required="false" default="50" />
    <cc:attribute name="required" type="boolean" required="false" default="false" />
    <cc:attribute name="requiredMessage" type="String" required="false" default="required" />
</cc:interface>

<!-- IMPLEMENTATION -->

<cc:implementation>

    <p:autoComplete id="#{cc.attrs.id}"
                    style="position: relative; padding-right:5px"
                    value="#{cc.attrs.person}"
                    var="personVar" 
                    itemValue="#{personVar}" 
                    itemLabel="#{personVar.fullFamiliarName}"
                    forceSelection="true"
                    completeMethod="#{personAutoComplete.byGeneralCriteria}"
                    converter="PersonConverter"
                    minQueryLength="3"
                    maxResults="50" 
                    scrollHeight="400"
                    size="#{cc.attrs.size}"
                    required="#{cc.attrs.required}" 
                    requiredMessage="#{cc.attrs.requiredMessage}"
                    title="enter users first name, last name or login" >
    </p:autoComplete>

    <h:message for="#{cc.attrs.id}" class="redError"/>

</cc:implementation> 
```

这是现在的代码（使用自定义组件）：

```
<h:panelGrid  id="newRoleAdminGrid" >

            <my:personLookup id="newRoleAdminPerson"  
                             person="#{roleList.newRoleAdminPerson}"
                             required="true" requiredMessage="#{propUtil.appShortName} Admin Name is required"/>

            <h:message for="newRoleAdminPerson" class="redError"/>

            <p:commandButton value="add" ajax="true" 
                             update="roleAdminTable,newRoleAdminGrid"
                             id="addRoleAdminBtn"
                             actionListener="#{roleList.newRoleAdmin}"
                             style="margin:5px;"
                             icon="ui-icon-plus"/>

        </h:panelGrid> 
```

当我以这种方式运行它时，组件可以工作 - 如果用户将其留空，或者它没有通过验证，primefaces 边框会变为红色，但 h:message 永远不会显示实际错误（requiredMessage 或 PersonConverter 中设置的内容）

我已经尝试了很多不同的变体，例如仅在实现中设置 id 或仅在 my:personLookup 中设置 id，或两者兼而有之。

有没有人遇到过这个？我在做或设置不正确吗？谢谢你的时间！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:54:58.263

感谢@partlov 的解决方案。这是我正确显示消息的最终代码-

组件：

```
<!-- INTERFACE -->

<cc:interface>
    <cc:attribute name="person" type="com.foo.bar.model.Person" required="true" />
    <cc:attribute name="size" type="int" required="false" default="50" />
    <cc:attribute name="required" type="boolean" required="false" default="false" />
    <cc:attribute name="requiredMessage" type="String" required="false" default="required" />
</cc:interface>

<!-- IMPLEMENTATION -->

<cc:implementation>

    <p:autoComplete id="personAutoComplete"
                    style="position: relative; padding-right:5px"
                    value="#{cc.attrs.person}"
                    var="personVar" 
                    itemValue="#{personVar}" 
                    itemLabel="#{personVar.fullFamiliarName}"
                    forceSelection="true"
                    completeMethod="#{personAutoComplete.byGeneralCriteria}"
                    converter="PersonConverter"
                    minQueryLength="3"
                    maxResults="50" 
                    scrollHeight="400"
                    size="#{cc.attrs.size}"
                    required="#{cc.attrs.required}" 
                    requiredMessage="#{cc.attrs.requiredMessage}"
                    title="enter users first name, last name or login" >
    </p:autoComplete>

    <h:message for="personAutoComplete" errorClass="redError" class="redError"/>

</cc:implementation> 
```

在我的 xhtml 中调用：

```
<my:personLookup id="newRoleAdminPerson"  
                     person="#{roleList.newRoleAdminPerson}"
                     required="true" requiredMessage="Admin Name is required"/> 
```

# c# - 无法使用实体框架访问 LINQ 中的中间表？

> ID：15236012
> 
> 赞同：0
> 
> 时间：2013-03-05T23:17:28.563
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我在 LINQ 中进行查询时遇到问题。这是 SQL 中非常简单的一个。

这是我的表：

![数据库图](../Images/0e6c36566122e91d5eafe6abc448b5b5.png)

这是我要转换为 LINQ 的查询：

```
SELECT * FROM Recipe WHERE IDRecipe IN ( 
                    SELECT IDRecipe FROM RecipeTag 
                        INNER JOIN Tag ON Tag.IDTag = RecipeTag.IDTag  
                    WHERE Name LIKE '%{0}%') 
```

这是我尝试过的，但问题是奇怪的是，表RecipeTag 在上下文中不存在。它似乎在食谱中，但是当我做 db.Recipes.RecipeTag 它不存在...

```
var recipeTag = from rt in db.RecipeTag
                join tg in db.Tags on rt.IDTag equals tg.IDTag
                where tg.Name.Contains(str)
                select rt.IDRecipe;

IEnumerable<Recipe> recipesTemp3 = (from recipe in db.Recipes
                                    where recipeTag.Contains(recipe.IDRecipe)
                                    select recipe).ToList(); 
```

我对 LINQ 完全陌生，如果这是一个非常基本的问题，我很抱歉，但我找不到任何答案！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:21:02.663

LINQ 将多对多关系转换为每个外部表上的集合属性。
你根本不需要中间的桌子。

反而，

```
from recipe in db.Recipes
where recipe.RecipeTags.Any(t => t.Name.Contains(str))
select recipe 
```

或者，更简单地说：

```
from tag in db.RecipeTags
where tag.Name.Contains(str)
from recipe in tag.Recipes
select recipe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:21:38.823

```
var recipes = db.Recipes.Where(r=>r.RecipeTag.Any(t=>t.Tag.Name.Contains("whatever")).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:21:48.617

如果我理解正确你想要：

```
var recipeTags = db.RecipeTags.Where(p => p.Tag.Name.Contains(str)).Select(p => p.Recipe).ToList(); 
```

# hsqldb - Derby 或 HSQLDB 是否支持跨模式连接的 Sybase 语法？

> ID：15236015
> 
> 赞同：1
> 
> 时间：2013-03-05T23:17:37.267
> 
> 标签：hsqldb, derby, mybatis, sap-ase

在 Sybase ASE 15 上，我有一组看起来像这样的数据库模式：

模式 S1：

```
CREATE TABLE T1 (T1KEY INT) 
```

模式 S2：

```
CREATE TABLE T2 (T2KEY INT, T1FK INT) 
```

T2 的 T1FK 基本上是 T1 的 T1KEY 列的 FK（不是由实际的数据库业务规则强制执行，但值匹配）。

在 Sybase 中，跨这些模式执行连接是合法的，如下所示：

```
SELECT a.T1KEY, b.T2KEY
  FROM S1..T1 a
  LEFT OUTER JOIN S2..T2 AS b ON (a.T1KEY = b.T1FK) 
```

我还没有找到任何支持这种语法的嵌入式数据库。Derby 和 HSQLDB 似乎都对双点语法犹豫不决，即使该语法被替换为，例如`S1.dbo.T1`，也不是 DB。我正在使用 MyBatis 3.1.1 运行查询，这些查询在针对 ASE 服务器的实际部署中运行良好。

我希望能够在单元测试时站起来支持这样的查询，但我知道 Sybase 语法往往得不到很好的支持。我知道对于 Oracle，HSQLDB 支持一个标志来实现与 ORA 特定语法的兼容性。是否有一些我缺少的语法标志可以使这些数据库中的任何一个能够像上面那样处理 Sybase 查询语法？是否有任何替代产品支持此用例？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:48:25.763

HSQLDB 支持的语法是标准 SQL，它使用一个点。

```
SELECT a.T1KEY, b.T2KEY
  FROM S1.T1 a
  LEFT OUTER JOIN S2.T2 AS b ON (a.T1KEY = b.T1FK) 
```

由于标准 SQL 语法中从不出现双点，因此当您对 HSQLDB 运行查询时，您可以安全地将所有出现的双点替换为单点。

# sql - 组合字段以创建新字段 sql

> ID：15236016
> 
> 赞同：0
> 
> 时间：2013-03-05T23:17:54.667
> 
> 标签：sql, peoplesoft

我想将这三个字段合并为一个新字段：

```
DEPT  CRS  SC
-------------
BIO   101  A
BIO   101  B
BIO   105  A
CHEM  101  A 
```

首选输出：

```
NEW
-------------
BIO 101A
BIO 101B
BIO 105A
CHEM 101A 
```

我有一种感觉我会使用 NVL()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:26:10.233

尝试这个：`select DEPT||" "||CRS||SC as new from table`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:40:54.673

您还可以创建一个视图以使其在将来更易于使用。

```
CREATE VIEW SUMMARY AS
SELECT DEPT || ' ' || CRS || SC AS NEWCOL
FROM YOURTABLE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:25:54.757

您可以尝试使用此查询

```
SELECT A.DEPT, A.CRS || A.SC AS NEWCOLUMN
FROM YOURTABLE A 
```

# nginx - nginx 配置，websocket 代理，位置，如果

> ID：15236021
> 
> 赞同：2
> 
> 时间：2013-03-05T23:18:14.797
> 
> 标签：nginx, websocket, config

我有一个非常具体的 nginx 配置问题：

我需要 nginx 来：

*   代理 websocket 连接@/
*   使用 index.html 响应标准 http 请求 @ /

这是我能得到的最接近的：

```
 location = / {
   if ($http_upgrade != "websocket") {
    # Here lies my problem:
    # This returns a http: 302 where i just need it to return the contents
    # of index.html
    return https://admin.permaconn.com/index.html;
   }

   proxy_http_version 1.1;
   proxy_set_header Upgrade $http_upgrade;
   proxy_set_header Connection "upgrade";
   proxy_pass http://localhost:8080;
  } 
```

我正在对我的应用程序进行结构更改，从使用 nodejs 作为前端代理到使用 nginx 作为前端代理。

我必须以这种方式配置 nginx，因为许多程序已经安装了设备（又名旧版）的预期行为。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T14:43:49.843

您正在滥用该[`return`](http://nginx.org/r/return)指令。

```
location = / {
    index index.html;

    if ($http_upgrade = "websocket") {
        proxy_pass http://localhost:8080;  
    }

    proxy_http_version 1.1;
    proxy_set_header Upgrade websocket;
    proxy_set_header Connection upgrade;
} 
```

文件：

*   [http://nginx.org/r/if](http://nginx.org/r/if)
*   [http://nginx.org/r/index](http://nginx.org/r/index)

# windows - 批量合并大型 CSV 文件并删除重复标题

> ID：15236025
> 
> 赞同：0
> 
> 时间：2013-03-05T23:18:36.500
> 
> 标签：windows, csv, batch-file, cmd

我正在尝试将几个具有相同字段的大型 csv 文件组合起来。我能做的最好的是：

```
@echo off
setlocal
set first=1
for %%F in (*.csv) do (
  if defined first (
    type "%%F" >> new.csv
    set "first="
  ) else (
    more +1 "%%F" >> new.csv
  )
) 
```

这对小文件很有效，但是当文件较大时，more 命令会卡在每个屏幕转储的末尾。

尽我所能尝试，在将其写入 new.csv 时，我无法直接通过整个文件运行更多内容 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T23:47:31.510

```
@ECHO OFF
SET first=y
SET newfile=new.csv
for %%F in (*.csv) do IF NOT %%F==%newfile% (
  if defined first (
    COPY /y "%%F" %newfile% >nul
    set "first="
  ) else (
    FOR /f "skip=1delims=" %%i IN (%%F) DO >> %newfile% ECHO %%i
  )
) 
```

*编辑*
要支持 CSV 中的空白行，您可以将内部 FOR 替换为：
`for /f "skip=1 tokens=1* delims=:" %%i in ('findstr /n "^" %%F') do >> %newfile% echo.%%j`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:47:51.243

这是一种不同的方法：

1.  使用 copy 将所有文件连接到一个临时文件中，这既好又快。
2.  阅读标题行。
3.  将标头写入输出文件。
4.  将任何与标题不匹配的行写入输出文件。
5.  删除临时文件。

必须将文件复制两次是有代价的，但解析使用的是应该快速运行的简单函数。

```
@echo off
setlocal
set output=new.csv
set temp=temp.csv
copy *.csv %temp%
set /p header=<%temp%
echo %header%>%output%
findstr /v /C:"%header%" %temp%>>%output%
del %temp%
endlocal
goto :eof 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T17:56:47.743

Simple solution:

After cd'ing into the directory that has the .csvs:

awk 'FNR<=4 && NR>4{next;}{print}' `find . -type f -name '*.csv'` > combined.csv

Here I have assumed that every csv has 4 header lines, but you can substitute with whatever number you want.

# emacs - 在 .emacs 文件中包含 flyspell 的钩子时出错

> ID：15236028
> 
> 赞同：0
> 
> 时间：2013-03-05T23:18:50.873
> 
> 标签：emacs, elisp, flyspell

我正在尝试在 emacs 中自动启用 flyspell。特别是，我对对我的代码注释进行拼写检查很感兴趣。我遵循[EmacsWiki 中的文档](http://www.emacswiki.org/emacs/FlySpell)并将以下代码添加到我的 .emacs 中：

```
 (add-hook 'c++-mode-hook
          (lambda ()
            (flyspell-prog-mode)
            ; ...
          )) 
```

但是，我收到以下我不明白的错误，坦率地说，我被 emacs 作为错误提供的垃圾所淹没（已获得`emacs -debuginit`）：

```
Debugger entered--Lisp error: (wrong-number-of-arguments #[(hook function &optional append local) "\305$
^@^H\306L\210\307^H!\204^U^@\310^H\306\"\210    \203)^@\311^H!\2048^@\312^H!\313CL\210\2028^@^HJ:\2036^$
@\315=\203T^@
C^R^K
\235\204s^@^K;\203c^@\316^K!^S^L\203o^@\304
^KC\"\202r^@^K
B^R     \203\224^@^K9\203\216^@^K\317N\203\216^@^H\320N\204\216^@\321^H\320\317#\210^H
L\202\230^@\310^H
\")\207" [hook local hook-value function append boundp nil default-boundp set-default local-variable-if$
  add-hook(google-make-newline-indent)
  eval-buffer(#<buffer  *load*> nil "/Users/fons/.emacs" nil t)  ; Reading at buffer position 2136 
```

我也尝试过其他方法来添加钩子，例如这篇[博](http://trey-jackson.blogspot.nl/2008/04/emacs-tip-16-flyspell-and-flyspell-prog.html)文，但它们都导致了同样的问题。

**注意**：我正在运行 emacs 24，在 OSX 10.8 中安装了 macports

```
$ emacs --version | head -n 1
GNU Emacs 24.2.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:30:31.430

您的问题似乎是您`.emacs`文件中的一个不相关的表格。从该回溯中，它可能看起来像这样：

```
(add-hook 'google-make-newline-indent) 
```

问题是它`add-hook`需要两个参数，钩子和添加到钩子的函数，所以缺少一个参数。修复此`add-hook`调用或将其注释掉，它应该会更好地工作。

（您在回溯中看到的垃圾是字节编译的 Emacs Lisp 代码。当解释代码中发生错误时，相关函数的实际代码会出现在那里，但对于字节编译的情况，看到代码通常没多大用处. 如果 Emacs 能抑制它就好了...)

# c# - 我可以在 C# 的 JsonProperty 属性中使用资源字符串吗？

> ID：15236037
> 
> 赞同：0
> 
> 时间：2013-03-05T23:19:48.937
> 
> 标签：c#, json, serialization, attributes, json.net

我正在连接一个可能在未来几个月内进行重大修改的 API，并希望将相关的 API 标签存储在资源中，以确保在发生更改时可以轻松更新它们。

但是，当我尝试在 JsonProperty（通过 Newtonsoft）属性中使用这些资源字符串时，我遇到了以下错误：

```
An attribute argument must be a constant expression, typeof expression or array creation expression of an attribute parameter type 
```

我已经尝试创建一个自定义属性来解决这个问题，但是 JsonProperty 本身是密封的并且是不可继承的。

我有一个合理的方法来解决这个问题吗？我只是错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:28:53.880

控制您的`JsonPropertyAttribute`类如何序列化为 JSON 并返回。如果您在资源文件中定义了实际的 json 属性名称，那么您的类将被序列化的方式将随着这些资源文件的更新而改变，或者即使您的应用程序只是切换到不同的语言环境。这通常不是一个好主意。

但是，如果您的程序更改如此频繁以至于您希望能够在不重新编译的情况下修改您的类的序列化，或者如果您想要有多种方式来序列化您的类，我相信您将不得不编写自己的`IContractResolver`.

这是一个例子：

```
public class ResourceNameContractResolver : 
    CamelCasePropertyNamesContractResolver
{
    protected override IList<JsonProperty> CreateProperties CreatePropertiesInternal(Type type, MemberSerialization memberSerialization)
    {
        var list = base.CreateProperties(type, memberSerialization)
        foreach (JsonProperty p in list)
        {
            p.PropertyName = this.GetRealNameFromResourceFile(p.PropertyName);
        }

        return list;
    }

    private string GetRealNameFromResourceFile(string originalPropertyName)
    {
        // Look up name from resource file
    }
} 
```

并使用这个类

```
var settings = new JsonSerializerSettings()
{
     ContractResolver = new ResourceNameContractResolver()
};
JsonTextWriter writer = new JsonTextWriter(...);
JsonSerializer serializer = JsonSerializer.Create(settings);
serializer.Serialize(writer, myData); 
```

# wordpress - Wordpress 永久链接更改导致首页 404

> ID：15236038
> 
> 赞同：1
> 
> 时间：2013-03-05T23:19:55.067
> 
> 标签：wordpress, .htaccess, seo, http-status-code-404, permalinks

我最近安装了 Wordpress SEO 插件，该插件要求我更改我的永久链接设置。

现在，我这样做是为了获得包含帖子名而不是帖子 ID 的更好看的链接。

*进行更改后，我在首页上遇到了 404 错误。*

我的静态页面似乎工作正常 + 到我的博客文章的直接链接（通过后端访问）也可以工作。

但是我的首页只是给了我一个 404 而不是列出我的帖子。

**关于我的设置的一些信息**

我的博客被放置在一个子目录中，所以它的访问方式如下：

```
www.myhomepage.com/blog/ 
```

但是，我也有一个重定向，将**blog.myhomepage.com 定向**到**www.myhomepage.com/blog/**

我像这样在我的 htaccess 文件中添加了这个重定向

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^blog\.myhomepage\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.blog\.myhomepage\.com$
RewriteRule ^/?$ "http\:\/\/www\.myhomepage\.com\/blog" [R=301,L] 
```

我刚刚尝试从我的 htaccess 文件中删除此行，如果这样做，该站点将正常工作，但我实际上想要此重定向。

我怎样才能纠正它并使其正常工作？

我真的希望有人能比我聪明一点；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-27T09:12:28.860

*   登录到您的 WordPress 仪表板
*   转到设置→永久链接
*   选择默认设置
*   单击保存更改按钮
*   将设置更改回以前的配置（在默认之前选择一次）。如果您有自定义结构，请将其放回原处。
*   点击保存设置

如果您的站点位于主域上，例如[www.yoursite.com](http://www.yoursite.com)，请将此代码添加到您的 .htaccess 文件中：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T22:05:03.097

以下是如何将所有内容都设为 blog.myhomepage.com：

仪表板，设置，常规，有一个站点 URL。

将其更改为您的 blog.myhomepage.com。

然后，您可以将重定向 301 添加到 www.myhomepage.com 的 /.htaccess 文件中，以便将 www.myhomepage.com/blog 重定向到 blog.myhomepage.com 的 301。

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^myhomepage.com/blog/ [nc]
rewriterule ^(.*)$ http://blog.myhomepage.com/$1 [r=301,nc] 
```

这会将任何内容从whatever.myhomepage.com/blog/* 反弹到blog.myhomepage.com/samecontentlink。

在 /blog/.htaccess 文件中：

您只需要在此处使用默认的 wordpress .htaccess。

这将解决您的问题，您必须在仪表板、设置、常规中设置正确的站点域 URL。

如果您不想要 blog.myhomepage.com 而是想要 www.myhomepage.com/blog/ 的所有内容：

如果您希望您的子域被忽略，您可以简单地将其从 dns 中删除，然后确保您的博客在 Dashboard、settings、general 中的 URL 设置为 [http://www.mysite.com/blog/](http://www.mysite.com/blog/)

并确保 /blog/ 中的 .htaccess 文件包含博客的基础。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# silverlight - 在我的 Silverlight 应用程序的大型对象堆中，这个不断增长的字典是什么？

> ID：15236039
> 
> 赞同：2
> 
> 时间：2013-03-05T23:20:00.227
> 
> 标签：silverlight, xaml, memory-leaks, unmanaged

此应用程序存在内存泄漏并经常使浏览器崩溃。通过反复打开和关闭应用程序中的一项功能，我可以很快增加它的内存使用量。使用 ANTS Memory Profiler，我发现了一个神秘的不断增长的字典，我认为我的应用程序的代码不是直接实例化或引用的。任何人都可以提供对这本词典的见解，和/或关于下一步做什么以阻止泄漏的建议吗？

分析器说非托管内存增长最快。它有时还会给我一个内存碎片警报，“内存碎片正在限制可以分配的对象的大小”或“内存碎片正在影响可以分配的最大对象的大小”。

大对象堆上最大的对象是一个被 a 使用的数组`Dictionary<IntPtr, Object>`，它主要包含 WeakReferences。我认为随着这个字典的增长，它不得不重新分配它的内部数组（如[这里](http://msdn.microsoft.com/en-us/library/xfhwa508(v=vs.95).aspx)的备注部分所述）；并且由于 GC 从不压缩 LOH，我一定会得到碎片。

我还想知道这个字典是否连接到非托管内存增加，因为字典键是 IntPtrs。[在 Tess Ferrandez 的博客文章](http://blogs.msdn.com/b/tess/archive/2010/01/14/debugging-native-memory-leaks-with-debug-diag-1-1.aspx)的帮助下，我运行了 DebugDiag 几次，但这给了我很多我不知道如何分析的有趣信息。基本上，大部分内存分配是由`npctrl!CWindowsServices::OSMemoryAllocate`和完成的`coreclr:CExecutionEngine::ClrVirtualAlloc`。如果有人认为这会有所帮助，也许我可以提供内存压力分析和/或 .dmp 文件。

**[更新]**我认为这可能是 ManagedPeerTable。另请参阅下面的更新。**[/更新]**

以下是 ANTS 的一些屏幕截图。第一个来自一个会话，其余的都来自另一个会话。

![内存碎片](../Images/4b7100b6bbbf7b02f1027da9add68a6a.png)

![内存变化概览](../Images/c4be8d7f2df0a6136f18df769bffa813.png)

LOH 上大小变化最大的类型是字典条目数组。

![大对象堆上的对象列表](../Images/159b16d37edfa1fbf51551bac53597af.png)

这是字典条目引用的列表，其中大部分是 WeakReference 实例。

![字典条目引用的对象](../Images/70fa4176c54f8b850f0fb05e8a1db4d7.png)

包含这些条目的字典本身就存在于对象数组中。

![字典条目数组的保留图](../Images/3d6562bc0f2488f26e2cb698636e3d06.png)

对象数组似乎包含与 UI 相关的对象。

![包含不断增长的字典的对象数组的内容](../Images/2a102fb4a0a96767b8a3729541abe0cd.png)

泄漏功能有很多与之相关的 XAML，包含几个自定义控件、模板、样式和高度自定义的[RadGridView](http://www.telerik.com/products/silverlight/gridview.aspx)。所以接下来我想我将反复删除 XAML 的片段并重新测试，希望我能缩小可能的罪魁祸首的简短列表。

**更新：**

我删除的 XAML 越多，泄漏就越慢。我发现该功能的 UI 元素没有被清理，所以接下来我需要找出原因。

MS.Internal.ManagedPeerTable 静态类有一个私有字段 type `Dictionary<IntPtr, object>`，我敢打赌这就是我在这里看到的。显然，它用于维护非托管对象与其所代表的托管对象之间的链接。（另请参阅底部附近的此[链接](http://clivetong.wordpress.com/2011/09/05/down-to-the-mil/)。）因此，如果我的 XAML 中的元素较少，那么表和它所引用的非托管内存量都会增长得更慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:47:48.770

我发现了漏洞并通过升级到最新版本的 Telerik RadControls 来修复它。RadTreeView 中存在内存泄漏，已在[Q3 2012 SP1 版本](http://www.telerik.com/products/silverlight/whats-new/release_notes/q3-2012-sp1-version-2012-3-1129.aspx#treeview)中修复。RadTreeView 间接引用了我的 UI 的主 UserControl，因此我的 UI 中的每个控件和资源也都在内存中徘徊。

前： ![从 UI 中删除 RadTreeView 之前的私有字节图](../Images/0b13a3188fba9e045d4752da397882a2.png)

后： ![从 UI 中删除 RadTreeView 后的私有字节图](../Images/8ef06f9ff4ace974435adab0a822e12b.png)

此外，LOH 上的字典和非托管内存都没有像以前那样增长。我猜想字典是 ManagedPeerTable 使用的字典，虽然我很惊讶它出现在对象数组中而​​不是作为 GC 根。

# c# - Uri.UnescapeDataString 在不同的计算机上失败

> ID：15236048
> 
> 赞同：6
> 
> 时间：2013-03-05T23:20:30.027
> 
> 标签：c#, regex, parsing, uri

在我的开发计算机上，一切正常且花花公子，但是当我在另一台 Windows7 计算机上测试程序时，我得到一个`System.UriFormatException`：*无效的 URI：字符串中的序列无效。*在以下代码上：`Uri.UnescapeDataString(section);`

起初我以为第二台计算机正在从开发 pc 接收不同的数据，所以我将失败的 html 字符串复制到文件并将我的代码简化为：

```
static void Err(string s){/*Picked up by external logging*/}

private static void GetValue()
{
    try
    {
        var html = File.ReadAllText("ld.txt");

        //Retrieve section we want
        var section = Regex.Match(
            html,
            "etc_etc(.*): ",
            RegexOptions.Singleline)
                                .Groups[1].ToString();

        Uri.UnescapeDataString(section);
    }
    catch (Exception ex)
    {
        Err(ex.ToString());
    }
} 
```

在开发电脑上工作正常，但第二台电脑再次收到异常。他们都从完全相同的文件加载完全相同的html `ld.txt`，然后用它做完全相同的事情..并且两台PC都是x64 Win7。是什么赋予了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-12T11:04:16.513

UnescapeDataString 似乎在 CLR 4.0 和 4.5 之间发生了变化

我可以在两台安装了不同版本的 .Net 的机器上重现这一点（即使编译为目标 .Net 4.0）。

您的开发机器上是否有 VS 2012（因此是 .Net 4.5）而另一台计算机上只有 .Net 4？

此代码在 .Net 4.0 上引发异常，在 .Net 4.5 上传递

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("CLR version: " + Environment.Version);
        Console.WriteLine(Uri.UnescapeDataString("%"));
    }
} 
```

# javascript - JavaScript 循环遍历所有带有标记名、警报的元素

> ID：15236049
> 
> 赞同：7
> 
> 时间：2013-03-05T23:20:33.907
> 
> 标签：javascript

```
var all = document.getElementsByTagName("a");
for (var i=0, max=all.length; i < max; i++) {
  alert(x.innerHTML);
} 
```

这个脚本的目的很明显：它试图遍历所有带有标签 name 的元素`a`，并提醒每个元素的内容。

它运行不正确。
它工作正常，有一个元素，它会提醒它的内容，但是当有多个元素时，它开始`undefined`为每个元素回显。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T23:22:13.100

你应该使用`alert(all[i].innerHTML)`. `x`未定义

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T23:22:53.443

您没有为`x`. 试试这个：

```
var all = document.getElementsByTagName("a");
for(var i = 0, max = all.length; i < max; i++) 
{
    alert(all[i].innerHTML);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T23:27:07.420

`x`显然是未定义的。你需要有类似的东西：

```
var all = document.getElementsByTagName("a");

for (var i = 0, x; x = all[i++];)
    alert(x.innerHTML); 
```

但是`alert`循环真的很烦人，我建议`console.log`改用。

提示：在已经支持[for...of](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)的浏览器中，例如 Firefox，您可以简单地拥有：

```
var all = document.getElementsByTagName("a");

for (var x of all) 
    console.log(x.innerHTML); 
```

当然，你不能在跨浏览器的网页上使用它，这只是在即将到来的 ES6 中知道的好东西——或者如果你要编写一个 Firefox 的扩展。

# php - USPS 运费计算器 API 未返回有效响应

> ID：15236053
> 
> 赞同：3
> 
> 时间：2013-03-05T23:21:06.670
> 
> 标签：php, api, shipping, usps

我从 USPS 收到此错误，我在[http://production.shippingapis.com/ShippingAPI.dll?API=RateV4&XML=进行查询](http://production.shippingapis.com/ShippingAPI.dll?API=RateV4&XML=)

```
<Error>
    <Number>80040b1a</Number>
    <Description>Authorization failure.  You are not authorized to connect to this server.</Description>
    <Source>UspsCom::DoAuth</Source>
</Error> 
```

如果我在测试服务器[http://production.shippingapis.com/ShippingAPItest.dll?API=RateV4&XML=](http://production.shippingapis.com/ShippingAPItest.dll?API=RateV4&XML=)上进行相同的查询，则会出现以下错误

```
<Error>
    <Number>80040b1a</Number>
    <Description>API Authorization failure. RateV4 is not a valid API name for this protocol.</Description>
    <Source>UspsCom::DoAuth</Source>
</Error> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T15:06:34.203

Ravish-RateV4 不适用于测试服务器，因此您将无法获得任何响应。并且，关于生产服务器中的 RateV4，您需要获得 ICCC、USPS 的许可。希望能帮助到你。

# asp.net - 如何在 Visual Studio 中使用配置转换强制替换元素？

> ID：15236057
> 
> 赞同：4
> 
> 时间：2013-03-05T23:21:31.353
> 
> 标签：asp.net, .net, web-config, web-config-transform

我们知道 Visual Studio 有这个很棒的功能可以在发布时转换 Web.config。所以我们可以在 Web.Release.config 中使用类似下面的内容来替换 Web.config 中的原始值：

网络配置：

```
<add key="SomeKey" value="DebugValue"/> 
```

Web.Release.config：

```
<add key="SomeKey" value="ReleaseValue" xdt:Transform="Replace" xdt:Locator="Match(key)"/> 
```

只要您在转换配置中没有错字，这一切都很好。因此，例如，如果您的转换配置中有以下行：

```
<add key="SomeKeyTypo" value="ReleaseValue" xdt:Transform="Replace" xdt:Locator="Match(key)"/> 
```

然后“SomeKey”项不会被替换，因为转换将找不到密钥，并且会静默打印此警告：

```
...\Web.Release.config: Warning : No element in the source document matches '/configuration/appSettings/add[@key='SomeKeyTypo']' 
```

**问题**是，在某些情况下，例如，如果您更改主 Web.config 中的密钥而忘记在 Web.Release.config 中更改它，那么当您发布时，您很可能没有阅读发布输出消息并且您错过了警告，这可能会导致灾难，因为您的应用程序中将使用 Debug 值而不是 Release 值。

所以**问题**是，当您在 Web.Release.config 中定义转换时，是否有办法指示必须替换给定项目，如果找不到密钥，则*抛出和 ERROR 而不是 WARNING*并基本上以一些错误代码退出发布?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:41:56.170

您可以将 Visual Studio 选项设置为“将警告视为错误”，这会引发错误，阻止发布任务完成。您甚至可以将其配置为仅将此特定警告视为错误。

您可以通过转到要部署的项目的属性页面来找到该对话框，然后在底部附近的 Build 下找到您的选项。

# android - Android：如何通知从 1 ListAdapter 内部到第二个 ListAdapter 的更改？

> ID：15236060
> 
> 赞同：0
> 
> 时间：2013-03-05T23:21:39.933
> 
> 标签：android, android-asynctask

我有 2 个 ListViews 都包含自己的数据。

当用户单击第一个项目中的一个项目内的按钮`ListView`时，会发生一些数据更改，`ListView`应通知第二个项目。但是我似乎无法让它工作。下面是简化的相关代码：

这是第一个 ListFragment。在 AsyncTask 内部，第一个自定义 ListAdapter 设置为`setListAdapter()`during `onPostExecute()`。

```
public class FragmentAListSupport extends SherlockListFragment {
    String url = "omitted";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        AsyncTask<String, Integer, String[]> asynctask = 
            new DownloadFilesTask(this).execute(url);       
    }
} 
```

这是第二个 ListFragment。在 AsyncTask 中，第二个自定义 ListAdapter 设置为`setListAdapter()`during `onPostExecute()`。

```
public class FragmentBListSupport extends SherlockListFragment {
    String url = "omitted";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        AsyncTask<String, Integer, String[]> asynctask = 
            new DownloadDataTask(this).execute(url);        
    }
} 
```

在第一个 ListFragment (A) 使用的自定义适配器中，我有 onButtonPressed 处理程序。

```
 @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
  //code omitted
  viewHolder.button
    .setOnClickListener(new Button.OnClickListener() {
        @Override
        public void onClick(View buttonview) { 
            //code omitted that changes some local data 
            //I need to notify the other ListFragment (B) here that it should update 
        }             
     {    
   } 
```

现在我的问题...

如何正确使用第一个适配器 (A) 内部的 notifyDataSetChanged() 来通知第二个适配器 (B) 它应该更新 ListView？我对如何从第一个适配器内部检索对第二个适配器的正确引用感到困惑，因为它们都是在 AsyncTask 中初始化的。

你能帮忙的话，我会很高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:03:20.040

尝试做这样的事情：

从一个片段创建一个返回适配器实例的方法：

```
 public customAdapter getDataAdapter()
  {
       return dataAdapter;
  } 
```

并在第二个片段中获取第一个片段的实例：然后：

```
firstfragment.getDataAdapter().clear();
firstfragment.getDataAdapter().addAll(allDataSet); 
```

# ios - 在 iOS 中实现委托方法 shouldChangeCharactersInRange 时获取 IndexOutofBoundsException

> ID：15236062
> 
> 赞同：1
> 
> 时间：2013-03-05T23:21:51.743
> 
> 标签：ios, uitextfield, uitextfielddelegate

我的应用程序中有一个 UITextField，我想像计算器一样工作。我需要它具有默认值 0.00，并且当用户输入数字时，数字从右向左移动，一次替换 0.00 中的零，并且应用程序应该足够聪明，可以添加逗号 (,)每三位数字之后。为此，我正在实现委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {} 
```

如下：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

if([[string stringByTrimmingCharactersInSet:[NSCharacterSet controlCharacterSet]]
    isEqualToString:@""])
    return YES;

NSString *previousValue = [[[textField.text stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]] stringByReplacingOccurrencesOfString:@"." withString:@""] stringByReplacingOccurrencesOfString:@"," withString:@""];
string = [string stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]];
NSString *modifiedValue = [NSString stringWithFormat:@"%@%@",previousValue,string];
modifiedValue = [NSString stringWithFormat:@"%@.%@",[modifiedValue substringToIndex:modifiedValue.length-2],[modifiedValue substringFromIndex:modifiedValue.length-2]];//this is the line that is causing the error

NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
modifiedValue = [formatter stringFromNumber:[NSNumber numberWithFloat:[modifiedValue floatValue]]];

textField.text = modifiedValue;
return NO; 
```

}

但是，我收到以下错误：

```
'NSRangeException', reason: '*** -[__NSCFString substringToIndex:]: Range or index out of bounds' 
```

当我尝试在文本字段中输入数字时引发此错误。谁能看到我做错了什么？

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:31:17.980

是的，就在这里：

```
[modifiedValue substringToIndex:modifiedValue.length-2] 
```

似乎假设字符串的长度至少为 2。

这可能不是，至少当用户将他/她的第一个字符输入到空文本字段中时。

`shouldChangeCharactersInRange`如果长度大于两个字符，那么对整个事情进行长度检查怎么样？只做“”方法的胆量？

# html - IE 上固定定位的 iframe 的问题

> ID：15236067
> 
> 赞同：2
> 
> 时间：2013-03-05T23:22:07.610
> 
> 标签：html, css, iframe

我有一个像这样的 iframe：（这个框架始终出现在屏幕左侧）

```
<iframe src="frame/index.html" class="left"></iframe> 
```

和 CSS

```
.left
{
position: fixed;
top: 25%;
left: 1em;  
width:200px;
height:200px;
overflow:hidden;
margin-right:10px;
border-style:none;
} 
```

它在所有 web-kit 浏览器中都能完美运行，但在 IE 上，它出现在顶部（和中间），带有边框和异常高度。

我尝试弄乱很多定位，但无法正确定位。任何帮助，将不胜感激！提前致谢

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:06:16.350

似乎这个小提琴适用于我的 IE9 (9.0.8112.164)。不同浏览器的定位看起来是一致的。

[http://jsfiddle.net/5sbXG/2/](http://jsfiddle.net/5sbXG/2/)

我确实从您的示例中更改了 iframe 标记以摆脱滚动条（IE 似乎忽略了溢出：iframe 上的隐藏）。

```
<iframe src="http://www.rockpapershotgun.com" class="left" scrolling="no">
</iframe> 
```

从你的角度来看，它看起来不对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:55:22.733

添加：

```
frameBorder="0";
scrolling="no";
position:absolute;
allowtransparency="true"; 
```

工作！

# java - 从 LinkedList 中删除元素

> ID：15236071
> 
> 赞同：0
> 
> 时间：2013-03-05T23:22:21.633
> 
> 标签：java

我正在尝试从linkedList 中删除最后一个节点并将其返回。这是 Linkedlist 类的一部分。我编写的以下方法不会删除最后一个节点。有人知道为什么吗？

```
public int delete(){

    if(front==null){

        throw new NoSuchElementException(); 

    }else{

       ListNode current = front;

       while(current.next!=null){
          current = current.next;   
       }

       int delete = current.data;
       current = null;
       return delete;
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:26:56.133

设置`current`为 null 只会更改对 null 的引用。它绝不会影响链表数据结构。您需要找到倒数第二个节点并将其下一个指针设置为空：

```
int data = secondToLastNode.next.data;
secondToLastNode.next = null;
return data; 
```

当然，您需要处理列表中只有一个节点以上代码未考虑的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T23:30:17.310

您需要涵盖三种情况：

1.  您的列表中没有条目。通常在这种情况下你只是退出，但像你一样抛出异常应该没问题。
2.  您的列表中只有一个条目。在这种情况下，您的变量`front`将有一个值，但`front.next`将是`null`. 在这种情况下，您应该设置`front`为。`null`
3.  对于以上任何一项，您都应该**将`next`最后一个条目的 设置为`null`**。你还没有设法做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T23:25:27.480

您只是将本地参考设置`current`为`null`; 你没有改变你的清单。

假设这是一个单链表，您需要将倒数第二个`ListNode`设置`next`为`null`（或者如果它是唯一的项目，则设置为）`front`。`null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:29:29.857

记住具有空指针的节点之前的“当前”，并将该节点的“下一个”指针设置为空。这样，您将删除对最新节点的引用，而不仅仅是更新局部变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T23:27:00.477

[我在这里](https://stackoverflow.com/a/15161707/1339987)解释了这一点。

Jave 是一种按引用传递的语言并`=`重新分配引用。您只是在更改本地引用，请参阅上面链接中的示例代码并理解这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-07T02:03:48.340

试试这个

```
public int delete(){

    if(front==null){

        throw new NoSuchElementException(); 

    } else if(front.next===null){
           return front.data;
}else{

       ListNode current = front;

       while(current.next.next!=null){
          current = current.next;   
       }

       int deleted_node = current.next.data;
       current.next = null;
       return deleted_node;
    } 
} 
```

# c++ - 如何为结构正确重载“+”运算符

> ID：15236073
> 
> 赞同：-1
> 
> 时间：2013-03-05T23:22:26.813
> 
> 标签：c++, operator-overloading

我想为 A 重载“+”运算符，`struct`但我收到编译器警告这是我的尝试：

```
struct wektor{
    int x;
    int y=0;    
    int norm(){
        return x*x+y*y;
    }
};

wektor& operator +(wektor &a,wektor &b){
    wektor c;
    c.x=a.x+b.x;  // 12 line - warning here
    c.y=a.y+b.y;
    return c;
}; 
```

编译器警告：

> [警告] 非静态数据成员初始化器仅适用于 -std=c++11 或 -std=gnu++11 [默认启用] 在 12 行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T23:24:30.210

警告告诉你这条线：

```
int y=0; 
```

在 C++11 之前，您不能在非静态非常量成员上使用初始化程序。如果要初始化`y`为 0，则必须为`wektor`带有成员初始化列表的构造函数提供构造函数。

尽管如此，您的`operator+`参数应该是 type `const wektor&`。它也应该按值返回，因为此时您正在返回对将在函数结束时销毁的本地对象的引用，这很糟糕。它应该如下所示：

```
wektor operator +(const wektor &a, const wektor &b){
    wektor c;
    c.x=a.x+b.x;  // 12 line - warning here
    c.y=a.y+b.y;
    return c;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T23:24:58.670

首先，二元运算符+应该返回一个新值，而不是一个引用。如果根据作为输入的引用来实现，这些应该是 const：

```
wektor operator +(const wektor &a, const wektor &b); 
```

其次，警告是关于这个初始化的：

```
struct wektor{
    int x;
    int y=0;    // HERE! C++11 only
    int norm(){
        return x*x+y*y;
    }
}; 
```

您只能在 C++11 中执行此操作。您可以在 C++03 中使用构造函数。

```
struct wektor{
    wector() : y() {} // zero-initializes y
    int x;
    int y;
    int norm(){ return x*x+y*y;}
}; 
```

回到`operator+`，我会实现一个 member `operator+=`，然后在 non-member 中使用它`operator+`：

```
wektor operator +(wektor a, const wektor &b)
{
  return a+= b;
} 
```

或者，为and提供`wector`两个参数的构造函数：`x``y`

```
wector(int x, int y) : x(x), y(y) {} 
```

蚂蚁然后

```
wektor operator + (const wektor& a, const wektor &b)
{
  return wector(a.x + b.x, a.y + b.y);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T23:24:33.183

不是这样的。签名应该是

```
wektor operator +(const wektor &a, const wektor &b) 
```

即不要从`+`操作员通过引用返回，更重要的是，不要通过引用返回临时的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T23:34:52.957

这是一个警告，表明您正在使用 C++11 中的功能，该功能在以前的 C++ 标准中不可用。

当您知道您所编写的程序按照您的想法工作时，您可以通过执行以下操作来消除此错误：

如果您使用的是代码块：

1.  右键单击“构建选项...”
2.  选择“其他选项”选项卡
3.  添加“-std=gnu++11”

如果您使用的是命令行：将“-std=gnu++11”添加到命令 arg 中。

# accurev - Accurev 促销订单

> ID：15236083
> 
> 赞同：0
> 
> 时间：2013-03-05T23:23:29.677
> 
> 标签：accurev

我们正在使用 Accurev 5.6。我们在促销期间遇到了一个奇怪的问题。我们的一位开发人员在他的工作区中取消了一个文件 abc.txt 并在一个问题下将其提升到支持流。几天后，他意识到他需要他的档案。他创建了一个同名文件，并在同一问题下对其进行了推广。在发布之前，我们尝试将此问题推广到父流。Accurev 抱怨说文件 abc.txt 存在于父流中，并阻止我们推广它。

看起来 Accurev 促销活动的顺序有误。它试图首先促进abc.txt的创建活动，而不是首先取消abc.txt的活动。Accurev 应该做的是根据活动的时间来推广活动：首先，将父流中的 abc.txt 失效，然后在不同的元素 ID 下再次创建 abc.txt 文件。

这是 Accurev 错误吗？无论如何配置Accurev以根据单个问题中的活动时间进行推广？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:42:01.707

这不是 Accurev 中的错误。这是 Accurev 的细微差别。Accurev 给每个新元素一个 id。这个 id 对那个元素来说是唯一的，并且在它被解散、重命名、移动等时与该对象保持一致。这就是 Accurev 的工作原理，这使它成为一种祝福和诅咒。

解决步骤：

1.  重命名开发人员提升的第二个元素。
2.  取消此元素。
3.  使第一个元素失效。
4.  促进这两个变化。
5.  此时，可以将abc.txt 提升上去。
6.  然后，您可以清除（恢复为支持）已失效的（第二个元素）。一种。在这种情况下，您可能希望 Revert to Backed，因为您可能不关心该版本，因此它不会永远位于流的默认组中。

搜索双胞胎的[在线文档](http://www.accurev.com/download/docs/5.6.0_books/AccuRev_WebHelp/wwhelp/wwhimpl/js/html/wwhelp.htm#href=AccuRev_OnLine_Help/title_page.html)以获取更多详细信息。抱歉，我无法获得直接链接。

双胞胎很痛苦，但看起来 Accurev 一直在慢慢改进检测和修复它们。请参阅最新版本 (5.7)。

# android - 动态更改 LinearLayout 高度

> ID：15236084
> 
> 赞同：0
> 
> 时间：2013-03-05T23:23:42.947
> 
> 标签：android, layout, android-linearlayout

我试图`LinearLayout`在应用程序运行期间动态更改高度的高度，但我总是得到一个`NullPointerException`. 我尝试了处理程序：

```
LinearLayout.LayoutParams parms = new linearLayout.LayoutParams(width,height); 
```

我还尝试更改布局颜色并得到相同的错误。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:34:18.473

尝试这个：

```
LinearLayout.LayoutParams layoutparams = new LinearLayout.LayoutParams(100,100); 
linearLayout.setLayoutParams(layoutparams); 
```

# javascript - 在 JavaScript 中设置数组键值

> ID：15236091
> 
> 赞同：2
> 
> 时间：2013-03-05T23:24:22.430
> 
> 标签：javascript

这段代码显然在 JavaScript 中不起作用，但我如何在 JS 中做到这一点？

从代码中应该很明显，但我需要分配一个数组键值（在下面的示例中是“a”、“5”和“8”）——不幸的是，我确实需要一个字母，所以 0、1、2等等都不好。

我已经看到了与对象和 'a':'op1' 有关的东西，但它似乎不起作用，并且我收到诸如“意外令牌：”之类的错误 - 我敢打赌，当你知道怎么做时，这很容易？

```
var options = new Array('a' => 'op1', '5' => 'op2', '8' => 'op3');

for(x in options) {

    var value = options[x];

    alert("the key is " + value[0]);

    alert("the value is " + value[1]);

} 
```

jQuery 或本机 JS，以最好的为准（无论如何我在该页面上使用 jQuery）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:26:40.353

设置对象：

```
var options = { 'a' : 'op1', '5' : 'op2', '8' : 'op3' } 
```

在 for-in 循环中，*键*是`x`，*值*是`options[x]`，而不是`value[0]`和`value[1]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T23:28:52.977

它是 JavaScript 对象字面量表示法：

```
var options = {
"a": "op1",
"5": "op2",
"8": "op3"
}; 
```

您还应该知道，键的顺序不能保证，如果您需要特定的顺序，您应该将键保存在一个数组中并以此进行迭代。此外，如果您遍历一个对象，您可能需要确定是访问当前对象的属性还是遍历原型链。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T23:29:56.890

```
var options = {'a':'op1', '5':'op2', '8':'op3'};

for (var x in options) {
  alert("the key is " + x);
  alert("the value is " + options[x]);
} 
```

# php - PHP中过滤MySQL数据的下拉列表

> ID：15236102
> 
> 赞同：0
> 
> 时间：2013-03-05T23:25:17.357
> 
> 标签：php, dropdownlistfor

我正在尝试打印出我在 MySQL 表中的数据，但我希望它们根据列的值进行过滤。我希望这些值显示在下拉列表中，并且在选择其中一个之后，我不会让程序打印出满足该要求的所有记录。为了更清楚，我希望根据从下拉菜单中选择的类别打印图书馆中的书籍。我做了一些研究，并修改了一些代码。但这是我第一次用 PHP 编码，我显然做错了什么。我尝试执行的代码是这样的：

```
<form id="form1" name="form1" method="POST" action="">

Fusha e kërkimit:
<select Name='NEW'>
<option value="">---Zgjidh---</option>
<?
mysql_connect('localhost', '<password>', '<user>');
mysql_select_db("<mysql_db>");

if (isset ($select) && $select!=""){
$select=$_POST['NEW'];
}
?>
<?
$list=mysql_query("SELECT * FROM 'arkiva' ORDER BY 'Fusha'");
while($row_list=mysql_fetch_assoc($list)){
?>
  <option value="<?php echo htmlspecialchars($row_list['Fusha']);?>"> 
            <?php echo htmlspecialchars($row_list['Fusha']); ?> 
        </option> 
<?
}?>
</select>
<input type="submit" name="Submit" value="Dërgo" />
</form> 
```

但这只会打印出没有实际值的下拉框，而且我有一段缺失的代码在选择后打印出来。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:43:41.200

由于语法原因，您的查询排序不正确。添加反引号应该有助于：

`$list=mysqli_query("SELECT * FROM `arkiva` ORDER BY `Fusha`");`

[这个答案](https://stackoverflow.com/a/1962867/887078)解决了反引号在您的查询中的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:29:24.540

仍然无法让它在下拉列表中显示我的字段。我通过手动创建下拉列表的字段暂时解决了这个问题。Bur 它肯定会随着我的数据库的增长而变得非常混乱和漫长。所以我仍然需要解决这个问题以获得永久解决方案。无论如何，谢谢你们的帮助

# objective-c - 如何在Objective C中将数组存储在数组中？

> ID：15236105
> 
> 赞同：0
> 
> 时间：2013-03-05T23:25:28.237
> 
> 标签：objective-c

我的问题是，我有一个要求创建 3 个类的练习：

歌曲（创建和设置歌曲） 播放列表（创建和添加歌曲） MusicCollection（拥有播放列表的集合）现在这个类很棘手，我需要`library`在播放列表集合中有一个主播放列表，它将包含每首歌曲收藏...

因此，根据我看到的一些人在调用库的 Playlist 类型的 MusicCollection 属性中定义的内容，以及他们在初始化时所做的定义：

```
-(id) initWithName: (NSString *) theName  
{  
    self = [super init];  

    if (self) {  
        musicCollection = [[NSMutableArray alloc] init];  
        library = [[Playlist alloc] initWithName: @"library"];  
        [musicCollection addObject: library];  
    }  
    return self;  
} 
```

据我了解，每次用户初始化一个集合时，都会将一个播放列表对象添加到集合数组中......

问题是在集合的 addPlaylist 方法中，他们没有将此播放列表歌曲添加到库中......就像这样：

```
-(void) addPlaylist: (Playlist *) thePlaylist  
{  
    if ([musicCollection containsObject: thePlaylist] == NO)  
        [musicCollection addObject: thePlaylist];  
} 
```

有什么想法吗？我真的坚持这个：/

我虽然可能让库通过集合数组中的一个数组并遍历它以查看歌曲是否在库中，如果不添加它们..

现在，在 Playlist.m 中，addsong 方法是：

```
-(void) addSong:(Song *)theSong  
{  
    [playList addObject:theSong];  
} 
```

但我在 MusicCollection.m 中看到他们添加了一种添加歌曲的方法，将歌曲添加到库中：

```
-(void) addSong: (Song *) theSong toPlaylist: (PlayList *) thePlaylist  
{  
    if([thePlaylist.playList containsObject:theSong]==NO)  
        [thePlaylist addSong:theSong];  

    if([library.playList containsObject:theSong]==NO)  
        [library addSong:theSong];  

} 
```

但是，如果我创建一个播放列表并将其添加到 MusicCllection 怎么办？无需通过 MusicCollection 方法添加歌曲即可添加歌曲..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:09:25.693

为了使对象比较起作用

```
-(void) addPlaylist: (Playlist *) thePlaylist  
{  
    if ([musicCollection containsObject: thePlaylist] == NO)  
        [musicCollection addObject: thePlaylist];  
} 
```

你必须覆盖`isEqual:`方法`PlayList`

```
- (BOOL)isEqual:(id)other {

    if (other == self)
        return YES;

    if (!other || ![other isKindOfClass:[self class]])
        return NO;

    return [self isEqualToPlayList:other];

}

 //Assuming playListId is an unique identifier in `PlayList`
- (BOOL)isEqualToPlayList:(PlayList*)playList{

    if (self == playList)
        return YES;

    if (self.playListId != playList.playListId)
        return NO;
    //If you you a combinational uniqueness, check for them as well

    return YES;

} 
```

有关更多信息，请按照以下[链接中的对象比较](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Introspection/Introspection.html)

# jquery - .height() 将小数点添加到值

> ID：15236106
> 
> 赞同：0
> 
> 时间：2013-03-05T23:25:30.110
> 
> 标签：jquery

我有这个功能，它可以根据需要工作（我认为这是不言自明的）。但是，输出值为 473.4615384340286。我不想要所有的 .decimal 点。我真的想围观一下。的`.height()`为`#campaign-header`475px。

小数点是怎么回事？

```
// add billboard height value to modal input
var inputBillboard = $('#campaign-header').height();
$('.billboard-height').val(inputBillboard); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:28:54.063

要四舍五入，您可以使用`Math.ceil()`：

```
var inputBillboard = Math.ceil($('#campaign-header').height()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T23:29:19.743

如果你的 div 是 475px 高，那么**只有当**div 没有边框或填充`.height()`时才会返回 475 。如果它有边框或填充，它将返回减去这些尺寸的高度。如果您想要总高度，请使用：**`.outerHeight()`**

 **```
$('#campaign-header').outerHeight(false); 
```

参数（在这种情况下为 false）指示是否在计算中包括边距。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T23:26:56.047

`Math.ceil()`是你需要的：

```
var inputBillboard = Math.ceil($('#campaign-header').height());
$('.billboard-height').val(inputBillboard); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T23:34:59.103

您可能想要使用`.outerHeight()`而不是`.height()`. `outerHeight`将返回考虑到元素的填充等的高度：

```
// add billboard height value to modal input
var inputBillboard = $('#campaign-header').outerHeight();
$('.billboard-height').val(inputBillboard); 
```

通常情况下，这是人们期望`.height()`返回的。你得到的和你期望得到的不同让我想知道这是否也适用于你。

您还可以提供 true 来`outerHeight()`制作它，以便它也将元素边距考虑在内。

该函数总是返回一个整数。

参考：[http ://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

如果您不想要包含填充的大小，请按照 BenM 的建议在 .height 上使用 Math.ceil。

**编辑：** JeffB 打败了我。:)**

# java - 括号“（”上的 Groovy/Java 拆分字符串

> ID：15236108
> 
> 赞同：29
> 
> 时间：2013-03-05T23:26:06.887
> 
> 标签：java, groovy, escaping, pattern-matching

我正在尝试执行类似于以下的拆分：

```
println "Hello World(1)".split("W"); 
```

输出：

```
[Hello , orld(1)] 
```

我想执行这个拆分：

```
println "Hello World(1)".split("("); 
```

但我看到：

```
Caught: java.util.regex.PatternSyntaxException: Unclosed group near index 1 ( 
```

有没有办法可以逃避这个括号？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-05T23:29:50.803

```
println "Hello World(1)".split("\\("); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-05T23:28:36.733

该`split`方法采用正则表达式模式。

如果你想分割“只是一个普通的字符串”，你可以`Pattern.quote`先用引号括起来：

```
println "Hello World(1)".split(Pattern.quote("(")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T23:36:30.530

您必须正确转义括号字符

```
println "Hello World(1)".split("\\(") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T00:40:21.983

在使用 groovy 本机正则表达式语法时，您还可以使用单个转义：

```
assert "Hello World(1)".split(/\(/) == ["Hello World", "1)"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-11T06:54:34.900

由于*split*只接受正则表达式，因此您必须将其作为转义字符传递给它。为此，您必须在其前面附加一个反斜杠

```
\( 
```

但是上面有一个编译错误，因为它被解析为一个有效的转义字符，例如：

```
\t Tab
\n New Line or Line Feed
\r Carriage Return 
```

因此，您必须传递带有 2 个反斜杠的无意义字符（例如括号）：

```
\\( 
```

最后：

```
println "Hello World(1)".split("\\("); 
```

或者，您也可以通过名为*quote的类**Pattern*的 java 内置函数来做所有事情：

 *```
println "Hello World(1)".split(Pattern.quote("(")); 
```*

# c++ - 正确使用 ifstream 对象作为类的成员

> ID：15236111
> 
> 赞同：4
> 
> 时间：2013-03-05T23:26:13.193
> 
> 标签：c++, class, parsing, ifstream

我制作了一个解析器类来接收一个大的文本文件并做各种事情。作为这个类的成员，我有一个 ifstream 对象被定义为`ifstream fin`. 我有一个函数`void SetFile(char* filename)`，它采用 c 字符串文字，应该调用`fin.open()`以将流连接到文件，但由于某种原因，调用`fin.fail()`后立即返回 true `fin.open()`。这是我的解析器类，希望有人注意到我做错了什么！谢谢你的时间。

解析器.h

```
#ifndef PARSER_H
#define PARSER_H
#include <fstream>
#include <cstdlib>
#include "Heap.h"
#include "Word.h"

enum FILESTREAM_ERRORS{OPEN_ERROR};

class Parser
{
public:
    Parser();
    void SetFile(const char *filename);
    void LoadHeap();

//private:
    int word, line, paragraph;
    ifstream fin;
    Heap<Word> *wordheap;
    void LoadWord();
};

Parser::Parser()
{
    word = line = paragraph = 0;
}

void Parser::SetFile(const char* filename)
{
    fin.open(filename);
    if(fin.fail())
        throw OPEN_ERROR;
}

void Parser::LoadWord()
{
    QString wordstring;
    char c;
    fin.get(c);
    if (c == '\n')
    {
        char p = fin.peek();
        if (p == '\n')
        {
            fin.get(c);
            paragraph++;
        }
        line++;
        fin.get(c);
    }
    while (isblank(c))
        fin.get(c);
    while (!isblank(c))
        wordstring.append(c);
    word++;
    cout << qPrintable(wordstring) << endl;
}

#endif // PARSER_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:34:19.467

检查您的文件是否存在，您是否可以有效地阅读它。

激活[`std::ios`异常](http://www.cplusplus.com/reference/ios/ios/exceptions/)以获取有关错误的更多信息。

另一个可能的原因`fail`是`fstream`已经有一个与之关联的文件。`is_open`在尝试打开操作之前检查它。

* * *

来自 Drew Dormann 评论的更新：

如果您指定相对路径，即非绝对路径（通常以 Windows 上的驱动器号或 *nix 上的斜杠开头），您应该考虑*当前工作目录*(CWD) 的值。该值通常默认为您的可执行文件的目录，但某些操作系统或 IDE 可能会更改它，当然您的程序也可以更改它。

因此，如果您使用相对路径，还要检查 CWD（您可以`getcwd`在 *nix 上获取它），或者出于测试目的使用绝对路径。

# ios - iOS 6 UIPickerView 导致崩溃

> ID：15236124
> 
> 赞同：0
> 
> 时间：2013-03-05T23:27:25.113
> 
> 标签：ios, ios6

我在 iOS 6 中遇到此异常，但找不到原因。使用此库在表格视图中选择日期： [https ://github.com/TimCinel/ActionSheetPicker](https://github.com/TimCinel/ActionSheetPicker)

不确定是不是太快释放对象的库。

任何帮助，将不胜感激。

谢谢你。

```
Exception Type EXC_BAD_ACCESS Code KERN_INVALID_ADDRESS at 0x5c8372ab
com.apple.main-thread Crashed
0    libobjc.A.dylib     objc_msgSend + 29
1    UIKit   -[UIApplication sendAction:to:from:forEvent:] + 72
2    UIKit   -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
3    UIKit   -[UIControl sendAction:to:forEvent:] + 44
4    UIKit   -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 502
5    UIKit   -[UIPickerView _sendSelectionChangedForComponent:] + 86
6    UIKit   -[UIPickerTableView _scrollingFinished] + 140
7    UIKit   -[UIScrollView(UIScrollViewInternal) _stopScrollDecelerationNotify:] + 836
8    UIKit   -[UIScrollView(UIScrollViewInternal) _stopScrollingNotify:pin:tramplingDragFlags:] + 460
9    UIKit   -[UIScrollView(UIScrollViewInternal) _stopScrollingNotify:pin:] + 30
10   UIKit   -[UIScrollView(Static) _smoothScrollWithUpdateTime:] + 3362
11   QuartzCore  CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 160
12   QuartzCore  CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 64
13   IOMobileFramebuffer     IOMobileFramebufferVsyncNotifyFunc + 154
14   IOKit   IODispatchCalloutFromCFMessage + 192 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:32:54.937

只需编写以下代码

注意：datePicker 是我的 UIDatePicker

```
-(IBAction)dateClicked:(id)sender
{
    UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:nil
                                                      delegate:nil
                                             cancelButtonTitle:@"Done"
                                        destructiveButtonTitle:nil
                                             otherButtonTitles:nil];

    // Add the picker
    datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker addTarget:self
                   action:@selector(dateChange:)
         forControlEvents:UIControlEventValueChanged];
    [menu addSubview:datePicker];
    [menu showInView:self.view];        
    [menu setBounds:CGRectMake(0,0,320, 516)];
    [datePicker setFrame:CGRectMake(0, 85, 320, 216)];
    [self currentdate];
}

-(void)currentdate
{
    NSDate* date = [NSDate date];

    //Create the dateformatter object

    NSDateFormatter* formatter = [[[NSDateFormatter alloc] init] autorelease];

    //Set the required date format

    [formatter setDateFormat:@"MMMM dd, yyyy"] ; //]@"yyyy-MM-dd HH:MM:SS"];

    //Get the string date

    NSString* str = [formatter stringFromDate:date];

    //Set in the lable
    dateULine.frame=CGRectMake(10, 122,150 , 2);

    [btnGetDate setTitle:str forState:UIControlStateNormal];
}

- (void)dateChange:(id)sender
{
    NSDate *selected = [datePicker date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMMM dd, yyyy"];
    NSString *str = [formatter stringFromDate:selected];
    dateULine.frame=CGRectMake(10, 122,150 , 2);
    [btnGetDate setTitle:str forState:UIControlStateNormal];
} 
```

# prettyphoto - 没有 rel 属性的漂亮照片库

> ID：15236125
> 
> 赞同：2
> 
> 时间：2013-03-05T23:27:26.613
> 
> 标签：prettyphoto

我正在使用 prettyPhoto（[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)）

根据文档，它是由以下触发的：

```
$("a[rel^='prettyPhoto']").prettyPhoto(); 
```

但是，我只使用这个（根据 W3C，rel 属性无效并且不需要）：

```
$(".photo a").prettyPhoto(); 
```

但是我需要将我的照片作为画廊，根据使用它制作的文档：

```
<a href="images/1.jpg" rel="prettyPhoto[pp_gal]"><img src="images/1b.jpg" /></a> 
```

（rel 标签的画廊名称介于 之间`[` `]`）

* * *

有没有办法在没有 rel 标签的情况下定义画廊？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T10:02:29.137

通过上面的评论找到了解决方案：[prettyPhoto's rel 属性上的验证错误](https://stackoverflow.com/questions/12297854/validation-error-on-prettyphotos-rel-attribute/15765003#15765003)

像这样指定您的链接：`<a href="img.jpg" data-gal="prettyPhoto[gal]"></a>`并用于`$("a[data-gal^='prettyPhoto']").prettyPhoto({hook: 'data-gal'});`初始化 prettyPhoto。

# sql - SELECT 根据另一个表中的权重从一个表中返回汇总答案

> ID：15236126
> 
> 赞同：0
> 
> 时间：2013-03-05T23:27:34.423
> 
> 标签：sql, sql-server-2008

我有一个表格，其中的数据看起来像这样。和是值，索引基于`col1`, ,和`col2``nodeID``Date``Hour`

```
nodeID    col1    col2    Date      Hour
  1       8       4      1/1/2010     1
  2       2       7      1/1/2010     1
  3       1       2      1/1/2010     1
  4       6       3      1/1/2010     1     
 ...     ...     ...      ...        ...
  1       2       2      1/1/2013     1
  2       3       4      1/1/2013     1
  3       7       1      1/1/2013     1
  4       5       1      1/1/2013     1 
```

我有另一个表，它根据天（不是小时）具有不同的权重，它看起来像这样，除了“foo”之外还有很多名字。每个名称将位于多行中，并且这些行中的每一行都将具有节点 ID 的权重因子。

特定日期的每个名称的权重加起来为 1。

```
name       nodeID    weighting        Date
foo          1         .6            1/1/2010
foo          2         .4            1/1/2010
foo          1         .6            1/1/2013
foo          2         .3            1/1/2013
foo          3         .1            1/1/2013
...         ...        ...           ... 
```

我需要使用表 1 中父数据的加权平均值从所有名称中查询数据。

例如

```
name    col1     col2     Datecol    Hour
foo      5.6      5.2      1/1/2010    1
foo      2.8      2.5      1/1/2013    1 
```

请注意，权重从 2010 年 1 月 1 日更改为 2013 年 1 月 1 日，甚至包括一个额外的`nodeID`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:11:27.213

```
select 
    name, 
    sum(col1*weighting) as weightedCol1, 
    sum(col2*weighting) as weightedCol2,
    n.date, 
    [hour]
from
    nodes n
    inner join weights w
        on w.nodeid = n.nodeid
        and w.date = n.date
group by 
    name, n.date, [hour] 
```

# git - incomplete Git clone

> ID：15236130
> 
> 赞同：1
> 
> 时间：2013-03-05T23:27:51.153
> 
> 标签：git, github

I am working on a web project and we're using Git vcs. I am using the ubuntu distribution of linux. Please why isn't "clone" copying all the files in the repo to my local dev directory from the github? I've tried cloning several times, it does clone the repo but the files are incomplete(hidden files are missing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:29:45.623

Note that those files ( `.gitignore`, `.editorconfig`, `.travis.yml` and `.htaccess`) are not hidden (there is no hidden attribute in Unix like you have in Windows)
And git wouldn't store that metadata information anyway.

They simple aren't directly listed by a simple ls.

So `git clone` *does* clone everything.

But to see *all* the files, including the dotfiles, you need a `ls -a` (as [Steinar](https://stackoverflow.com/users/1969893/steinar) [comments](https://stackoverflow.com/questions/15236130/incomplete-git-clone#comment21482926_15236130)).

You can define an alias like:

```
 alias lh='ls -a | egrep "^\."' 
```

And '`lh`' would display *only* the dotfiles.

# ios - 排队进入 NSInputStream？

> ID：15236133
> 
> 赞同：11
> 
> 时间：2013-03-05T23:28:08.277
> 
> 标签：ios, nsstream, nsinputstream

我想向 NSInputStream 添加三个“部分”：一个 NSString，另一个流的输出，然后是另一个 NSString。思路如下：

第一个和最后一个 NSString 表示 SOAP 请求的开始和结束，而流的输出是加载一个非常大的文件并将其编码为 Base64 字符串的结果。所以，最后我会让最终的 NSInputStream 保存整个 SOAP 请求，如下所示：

<soap开头> <Base64编码数据> <soap结尾>

我希望将整个请求保存在 NSInputStream 中的原因有两个：

1.  我不会将非常大的数据文件加载到内存中
2.  我认为这是强制以 HTTP 1.1 块发送最终请求的唯一方法（我需要这样做，因为否则，如果请求变得太大，服务器将不会接受它）。所以，我知道这样做：

    ```
    NSInputStream *dataStream = ....; 
    [request setHTTPBodyStream:dataStream]; 
    ```

确保请求将作为 HTTP 1.1 块发送，而不是作为一个巨大的原始 SOAP 请求发送。

所以，我想知道这是如何实现的——也就是说，我如何将事物“排队”到 NSInputStream 中？甚至可以做到吗？有替代方法吗？

仅供参考，在Java中可以按如下方式完成

```
 Vector<InputStream> streamVec = new Vector<InputStream>();
 BufferedInputStream fStream = new BufferedInputStream(fileData.getInputStream());
 Base64InputStream b64stream = new Base64InputStream(fStream, true);
 String[] SOAPBody = GenerateSOAPBody(fileInfo).split("CUT_HERE");  
 streamVec.add(new ByteArrayInputStream(SOAPBody[0].getBytes()));
 streamVec.add(b64stream);
 streamVec.add(new ByteArrayInputStream(SOAPBody[1].getBytes()));
 SequenceInputStream seqStream = new SequenceInputStream(streamVec.elements()); 
```

因为 Java 有这些对象可用，但是 Objective-c 中的 NSStreams 看起来像非常低级的对象并且很难使用。

*注意：我完全重写了两天前提出的原始问题，因为我认为新的编辑更清楚地解释了问题所在。我希望它会帮助它更容易理解并回答*

## **更新 2**

到目前为止，这是我能够实现的目标：我没有尝试加入流，而是使用临时文件先写入 <soap beginning>，然后设置输入流以从文件中读取块，将每个块编码为 Base64 字符串并将其写入同一个临时文件，最后，当我的流关闭时，我将 <soap ending> 写入临时文件。然后我用这个文件的内容设置了另一个输入流，我将它传递给 NSMutableURLRequest：

```
 NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url];
        ...
        NSInputStream *dataStream = [NSInputStream inputStreamWithFileAtPath:_tempFilePath];
        [request setHTTPBodyStream:dataStream]; 
```

这确保了文件内容的 HTTP 1.1 分块传输。连接完成后，删除临时文件。

这似乎工作正常，但当然这是一个烦人的工作。我不想写一个临时文件，因为它本来可以由流处理（理想情况下。）如果有人还有更好的建议，请告诉我:)

## **更新 3**

好的，另一个更新是为了。虽然我的文件写入似乎有效，但我现在遇到了一个意外问题，我的一些请求无法上传到服务器。具体来说，一切都按计划进行，我正在将临时文件的内容读入一个流，并将我的请求的 HTTP 主体设置为这个流，它开始按照我的意愿传输 HTTP 1.1 块 - 但对于一些一些数据包被丢弃并且最终请求 - 这是我的猜测 - 格式错误并因此失败的原因。我认为丢弃数据包的问题是随机的，因为我在较大的请求中观察到它 - 也就是说，这个问题有更多的机会出现 - 而我的较小的请求通常会很好。这当然是与该问题中的原始问题不同的问题。如果有人知道可能导致这种情况的原因，[在 NSURLConnection 发送的分块 HTTP 1.1 请求期间丢弃的数据包](https://stackoverflow.com/questions/15300788/packets-dropped-during-chunked-http-1-1-request-sent-by-nsurlconnection)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-05T21:26:08.567

您的解决方案是一个不错的选择，但您可以使用流来完成。这意味着子类`NSInputStream`化，这不是微不足道的，因为您需要实现一堆方法。

基本上，您的子类最初会返回标题字节，然后它将字节从“内部”流返回到文件内容，然后当它用完时返回页脚字节。这意味着要记录页眉和页脚的大小以及到目前为止已经处理了多少，但这不是一个大问题。

[这里](https://github.com/bjhomer/HSCountingInputStream/blob/master/HSCountingInputStream/HSCountingInputStream.m)有一个创建子类的示例，它显示了您需要实现的棘手隐藏方法，以使流子类正常工作而不会引发异常。

# node.js - 在开发环境中使用 Heroku PG 在 GeddyJs 上出现 SSL 错误

> ID：15236134
> 
> 赞同：0
> 
> 时间：2013-03-05T23:28:11.743
> 
> 标签：node.js, postgresql, heroku, geddy

我正在使用 GeddyJs 和 heroku cedar 应用程序部署。我正在为数据库使用 Heroku Postgres 服务。

我已经在 geddyjs 的配置文件中配置了用户名/密码/主机名/数据库名，但是当我运行`node app.js`它时会抛出一个错误，因为`pg_hba.conf`我不知道这与远程访问数据库时未使用 SSL 有关，但我不知道如何在连接上强制 SSL..

# 这是错误日志：

```
error: no pg_hba.conf entry for host "70.199.196.17", user "12345", database "database1", SSL off
    at p.parseE (/Users/mikedevita/Web/Sites/gorelative.com/node/node_modules/pg/lib/connection.js:503:11)
    at p.parseMessage (/Users/mikedevita/Web/Sites/gorelative.com/node/node_modules/pg/lib/connection.js:363:17)
    at Socket.p.attachListeners (/Users/mikedevita/Web/Sites/gorelative.com/node/node_modules/pg/lib/connection.js:86:20)
    at Socket.EventEmitter.emit (events.js:96:17)
    at TCP.onread (net.js:397:14)
[Tue, 05 Mar 2013 22:39:49 GMT] ERROR Worker 843 died. 
```

# 我的 config/development.js 文件：

```
var config = {
  detailedErrors: true
, debug: true
, hostname: 'localhost'
, port: 3000
, model: {
    defaultAdapter: 'postgres'
  }
, db: {
    postgres: {
        port: 5432
      , password: 'foobar' 
      , database: 'database1'
      , host: 'ec2-107-21-126-45.compute-1.amazonaws.com'
      , user: '12345'
    }
  }
, sessions: {
    store: 'memory'
  , key: 'sid'
  , expiry: 14 * 24 * 60 * 60
  }
};

module.exports = config; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:03:27.270

您需要添加`ssl: true`到您的 postgres 配置中。

```
postgres: {
    port: 5432
  , password: 'foobar' 
  , database: 'database1'
  , host: 'ec2-107-21-126-45.compute-1.amazonaws.com'
  , user: '12345'
  , ssl: true
} 
```

Geddy 只是将这个配置对象传递给 pg 模块。查看[pg.client wiki 页面](https://github.com/brianc/node-postgres/wiki/Client#constructor)了解更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T23:39:29.120

如果您尝试从 Heroku 外部连接，则需要使用 SSL 连接。如果使用 SSL 加密，我们只允许来自 Heroku 外部的连接

`error: no pg_hba.conf entry for host "70.199.196.17", user "12345", database "database1", SSL off`说您无法连接 SSL 关闭。

此外，您可能正在使用 database1 清理您的数据库名称，但如果不是，我可以向您保证，您的数据库名称实际上不是 database1。

此外，您不应该**不**将您的凭据硬编码在文件中。从你的环境中读出它们。

# git - Git 无法从 ownCloud 的 webdav 界面克隆 repo

> ID：15236135
> 
> 赞同：4
> 
> 时间：2013-03-05T23:28:12.240
> 
> 标签：git, webdav, owncloud

我在 ownCloud 上有一些个人 git 存储库。我可以通过访问ownClouds webdav url从2台ubuntu机器和一台Windows PC克隆它：[http://myserver.a/remote.php/webdav/repos/repo.git](http://myserver.a/remote.php/webdav/repos/repo.git)

最近我使用 git 版本 1.8.1.5 安装了 Arch Linux，但它失败并显示以下错误消息：致命：[http://myserver.a/remote.php/webdav/repos/repo.git/info/refs?service=git-upload -pack](http://myserver.a/remote.php/webdav/repos/repo.git/info/refs?service=git-upload-pack) not found：你在服务器上运行过 git update-server-info 吗？

我确实添加了更新后挂钩，最终它可以在我的其他机器上运行。当 git 请求 ...info/refs?service... 时，服务器 error.log 显示 404

ubuntu git 1.7 从服务器请求相同的 url。但是在收到错误代码 404 后，它会请求 .../info/refs HTTP/1.1 并以代码 200 成功。

那么为什么较新的 git 会失败，我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T11:02:12.170

整件事`?service=...`是为了 1.6.6 中引入的 git 的智能 HTTP 支持。它比传统的 HTTP 支持效率更高，但需要在 Web 服务器上运行特殊的 CGI 二进制文件，并且不适*用于*WebDAV。

IMO，在任何未损坏的 WebDAV 实现中，都应该忽略它，但显然 ownCloud 认为它是文件名的一部分或其他东西，因此会产生错误。与 ownCloud 开发人员讨论这个可能是有意义的。

在旧版本中，git 会退回到没有该后缀的 URL，但这有其自身的问题。因此，在 1.8.0 中删除了第二个请求，并引入了一个新选项，您可以使用它来关闭智能 HTTP 并直接使用旧 URL（这应该可以解决问题）。它的工作原理是这样的，例如：

```
GIT_SMART_HTTP=0 git fetch 
```

如果您从不想使用智能 HTTP（但请注意，它确实可以在 Github 和所有其他理智的托管站点上运行，并且如果没有它，推送将无法正常工作），您可以在 shell 配置文件中导出该环境变量。

有关更改的详细信息，请访问[https://git.kernel.org/cgit/git/git.git/commit/?id=02572c2e3afcc200936260f48863447726212a7c](https://git.kernel.org/cgit/git/git.git/commit/?id=02572c2e3afcc200936260f48863447726212a7c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T15:15:57.650

我最近在将我的 Git 存储库推送到下一个云时遇到了同样的问题。我检查了存储库的内容，发现那里没有这样的文件信息/引用。

研究导致我进入这个线程：[无法通过 http 克隆 git repos；未找到信息/参考](https://stackoverflow.com/questions/19698352/cant-clone-git-repos-via-http-info-refs-not-found)

在存储库基目录中执行建议的命令`git update-server-info`会创建丢失的文件，并且我不再收到 404 错误。所以查询字符串不是这里的问题。

不幸的是，我收到另一个错误（“错误：没有 DAV 锁定支持 ...”），记录在此处[https://help.nextcloud.com/t/webdav-lock-on-file-doesnt-work/21451](https://help.nextcloud.com/t/webdav-lock-on-file-doesnt-work/21451)（带有指向 Nextcloud 项目的 github-issue 的链接）。

遗憾的是，Nextcloud 上还没有基于 WebDAV 的 Git 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-23T21:11:14.583

现在这可能更健壮：Git 使用 SHA-1 作为默认哈希算法构建的 SHA256 存储库中的“ [`git clone`](https://github.com/git/git/blob/bdff0419da0e81a6fb957d38fd6cff06e3ffb4e3/Documentation/git-clone.txt)” ^(（[man](https://git-scm.com/docs/git-clone)）)没有正确设置生成的存储库，已使用 Git 2.32（Q2 2021 年，8 年后）。

请参阅[Eric Wong ( ) 的](https://github.com/ele828)[提交 00bc839](https://github.com/git/git/commit/00bc8390d8cd764c52f0308b303a270e9bf57d84)（2021 年 5 月 11 日[）](https://github.com/ele828)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 bdff041](https://github.com/git/git/commit/bdff0419da0e81a6fb957d38fd6cff06e3ffb4e3))^(中，2021 年 5 月 20 日）)[`ele828`](https://github.com/ele828)
^([`gitster`](https://github.com/gitster))

> ## [`remote-curl`](https://github.com/git/git/commit/00bc8390d8cd764c52f0308b303a270e9bf57d84): 修复 sha256 repos 上的克隆
> 
> ^(签字人：Eric Wong)
> ^(签字人：brian m. 卡尔森)

> 远程 https 进程需要更新它自己的`the_repository' when it sees an HTTP(S) remote is using sha256\. Without this,` parse_oid_hex() `fails to handle sha256 OIDs when it's eventually called by`parse_fetch() 实例。
> 
> 经测试：
> 
> ```
> git clone https://yhbt.net/sha256test.git
> GIT_SMART_HTTP=0 git clone https://yhbt.net/sha256test.git
> (plain http:// also works) 
> ```
> 
> 通过 git:// 克隆 URL 不需要更改

# ruby-on-rails - 添加收藏还原到屏幕顶部

> ID：15236136
> 
> 赞同：0
> 
> 时间：2013-03-05T23:28:20.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 Rails 应用程序上有一个功能，用户可以通过按下按钮添加收藏夹。添加收藏夹后，页面将重新加载到屏幕顶部。用户喜欢的指南可能位于屏幕的一半，然后他们不得不再次开始在顶部查看，这很烦人。有没有办法将其更改为“最喜欢的”但保持用户在页面上的位置？

在 index.html.erb（视图）中

```
<% if !current_user.favourite_guidelines.select{|f| f.guideline_id==guideline.id}.any? %>
                    <%= link_to guidelines_favourite_path(guideline_id: guideline.id, type: "favourite"), method: "get", class: "btn btn-small main" do%>
                    <i class="icon icon-star"></i> Favourite
                    <% end %>
                <% end %>
                <% if current_user.favourite_guidelines.select{|f| f.guideline_id==guideline.id}.any? %>
                <%= link_to guidelines_favourite_path(guideline_id: guideline.id, type: "unfavourite"), method: "get", class: "btn btn-small main" do%>
                <i class="icon-star-empty"></i> Unfavourite
                <% end %> 
```

指南控制器.rb

```
def favourite
   type = params[:type]
   if type == "favourite"
      @guideline= Guideline.find_by_id(params[:guideline_id])
          current_user.favourite_guidelines.build(:guideline_id => @guideline.id).save
           redirect_to :back

    elsif type == "unfavourite"
      @guideline= Guideline.find_by_id(params[:guideline_id])

     current_user.favourite_guidelines.where(:guideline_id => @guideline.id).destroy_all
     redirect_to :back

    else
    # Type missing, nothing happens
   redirect_to :back, notice: 'Nothing happened.'
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:53:38.770

您通常会通过使用 AJAX 来实现这一点，以便仅重新加载页面的一部分，从而保持用户的滚动位置。Rails 指南在这里有一些不完整的信息：http: [//guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

还有一个关于这个主题的[RailsCast](http://railscasts.com/episodes/136-jquery-ajax-revised)。它们非常有用，值得购买。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:54:04.497

`redirect_to`加载页面，这就是为什么它在顶部。

*   如果您想在重定向后使用 javascript 滚动到该元素。我假设你会做这样的事情：

    [如何使用 JavaScript 滚动到元素？](https://stackoverflow.com/questions/5007530/how-do-i-scroll-to-an-element-using-javascript)

或者

*   您可以进行 AJAX 调用，这样页面就不会重定向。然后，您只需让响应更新用户所在的页面，因此用户不会被重定向到任何地方

# java - 如何在 Riak-Java 中注册 Scala Jackson 模块？

> ID：15236140
> 
> 赞同：0
> 
> 时间：2013-03-05T23:28:35.903
> 
> 标签：java, scala, jackson, riak

存储到 Riak 时需要支持 Scala 列表和选项。看起来杰克逊的 Scala 模块可以解决这个问题。但是，如何将它与 Riak 中的对象映射器挂钩？不确定我是否需要覆盖某些东西，或者是否有可以轻松解决它的注释。

[https://github.com/FasterXML/jackson-module-scala](https://github.com/FasterXML/jackson-module-scala)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:35:18.260

几个版本前，我根据某人的要求`getObjectMapper()`向 中添加了一个方法。`JSONConverter`如果您传入 POJO 并且尚未创建和传入您自己的，则这`Converter`是用于 fetch/store 操作的。

您想实例化`JSONConverter`自己并从中获取`ObjectMapper`：

```
JsonConverter<MyClass> converter = new JSONConverter<MyClass>(MyClass.class, bucketName);
ObjectMapper om = converter.getObjectMapper(); 
```

您现在可以使用 注册模块，`ObjectMapper`然后将`JSONConverter`用于您的获取/存储操作（使用and的`withConverter()`方法）。`StoreObject``FetchObject`

我想这就是你要找的。如果您需要对对象的序列化/反序列化进行更多控制，您也可以自己编写`Converter`- 我在这里写了一个关于该主题的食谱条目：[https ://github.com/basho/riak-java-client/wiki/Using-一个自定义转换器](https://github.com/basho/riak-java-client/wiki/Using-a-custom-Converter)

# c# - 将 ActionResult 渲染为字符串 - 以不正确的顺序出现

> ID：15236146
> 
> 赞同：3
> 
> 时间：2013-03-05T23:28:53.487
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个尝试将 an 渲染`ActionResult`到字符串的解决方案。我通过传入我自己的来做到这一点，`HttpContext`它将输出文本编写器替换为我自己的`TextWriter`.

这就是问题所在 - 元素呈现乱序。如果我通过浏览器直接查询来呈现部分视图，它工作正常。如果我通过我的替代文本编写器渲染它，那么剃刀视图中的任何 @Html.Action 元素都会首先渲染，而不管它们在视图中的位置如何。

所以，这是我的 Razor 观点：

```
@inherits System.Web.Mvc.WebViewPage<WebsitePresentationLayer.MgrScreenLayoutViewer>
@using  System.Web.Mvc.Html;

<div>
    @Model.DebugText
</div> 
@foreach (var item in @Model.Items)
{
    <div>@item.Title</div>
    @Html.Action(
                    "LayoutItem",
                    new
                    {
                        id = item.Id,
                        uniqueName = item.UniqueName
                    }
                  );

} 
```

如果我直接通过浏览器查询视图，它会以正确的顺序呈现：

*   @Model.DebugText
*   Item1.Title
*   Item1 动作渲染
*   Item2.标题
*   Item2 动作渲染

如果我将它呈现给我的 TextWriter，它会按以下顺序呈现：

*   Item1 动作渲染
*   Item2 动作渲染
*   @Model.DebugText
*   Item1.Title
*   Item2.标题

为什么？

这是我替换文本编写器的方式。（我从一个 ASP.NET WebForms 页面调用它，所以已经有一个现有的`HttpContext`）

```
public static class ActionResultExtensions
{
    internal class MyResponseWrapper : HttpResponseWrapper
    {
        private System.IO.TextWriter _textWriter;
        public MyResponseWrapper(HttpResponse wrappedResponse, System.IO.TextWriter textWriter)
            : base(wrappedResponse)
        {
            _textWriter = textWriter;
        }

        public override System.IO.TextWriter Output
        {
            get { return this._textWriter; }
            set { this._textWriter = value; }
        }
    }

    internal class MyHttpContextWrapper : HttpContextWrapper
    {
        private readonly System.IO.TextWriter _textWriter;
        public MyHttpContextWrapper(System.IO.TextWriter textWriter)
            : base(HttpContext.Current)
        {
            this._textWriter = textWriter;
        }

        public override HttpResponseBase Response
        {
            get
            {
                var httpResponse = HttpContext.Current.Response;
                return new MyResponseWrapper(httpResponse, this._textWriter);
            }
        }
    }

    public static void Render(this System.Web.Mvc.ActionResult result, System.IO.TextWriter textWriter, System.Web.Routing.RouteData routeData, System.Web.Mvc.ControllerBase controllerBase)
    {
        var httpContextWrapper = new MyHttpContextWrapper(textWriter);
        result.ExecuteResult(new System.Web.Mvc.ControllerContext(httpContextWrapper, routeData, controllerBase));
    }
}

public static class MvcUtils
{
    public static void RenderControllerAction<T>(Func<T, System.Web.Mvc.ActionResult> f, System.IO.TextWriter writer) where T : System.Web.Mvc.ControllerBase, new()
    {
        var controller = new T();
        // We have to initialise the RouteData so that it knows the name of the controller
        // This is used to locate the view
        var typeName = controller.GetType().Name;
        System.Text.RegularExpressions.Regex regex = new System.Text.RegularExpressions.Regex("(.*)Controller$");
        var match = regex.Match(typeName);
        if (match.Success)
        {
            typeName = match.Groups[1].Value;
        }
        var routeData = new System.Web.Routing.RouteData();
        routeData.Values.Add("controller", typeName);

        var actionResult = f(controller);
        actionResult.Render(writer, routeData, controller);
    }
} 
```

然后我最终使用以下代码将其输出到字符串：

```
StringBuilder sb = new StringBuilder();
StringWriter stringWriter = new StringWriter(sb);

CMS.Website.MvcUtils.RenderControllerAction<PlayerGroupController>
(
   c => c.ScreenLayout(this.MgrPlayerGroupViewer.ScreenLayoutId),
   stringWriter
);
stringWriter.Flush();
var generatedString = sb.ToString(); 
```

* * *

我已经为 编写了一个拦截器`TextWriter`，果然，它收到了三个调用`Write(string)`

*   写入（LayoutItem 1 动作内容）
*   写入（LayoutItem 2 动作内容）
*   Write(Model.DebugText 和这两项标题)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:11:40.540

我大约在 6 个月前经历过这个。目标是使用部分填充 jquery 弹出对话框。

问题是视图引擎想要以自己尴尬的顺序渲染它们......

尝试这个。LMK 如果需要澄清。

```
 public static string RenderPartialViewToString(Controller thisController, string viewName, object model)
    {
        // assign the model of the controller from which this method was called to the instance of the passed controller (a new instance, by the way)
        thisController.ViewData.Model = model;

        // initialize a string builder
        using (StringWriter sw = new StringWriter())
        {
            // find and load the view or partial view, pass it through the controller factory
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(thisController.ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(thisController.ControllerContext, viewResult.View, thisController.ViewData, thisController.TempData, sw);

            // render it
            viewResult.View.Render(viewContext, sw);

            //return the razorized view/partial-view as a string
            return sw.ToString();
        }
    } 
```

# java - Java的Random函数的反函数

> ID：15236151
> 
> 赞同：28
> 
> 时间：2013-03-05T23:29:02.710
> 
> 标签：java, random

Java 的 Random 函数接受一个种子并产生一系列“伪随机”数字。（它是基于 中讨论的一些算法实现的`Donald Knuth, The Art of Computer Programming, Volume 3, Section 3.2.1.)`，但这篇文章技术性太强，我看不懂）

它有反函数吗？也就是说，给定一个数字序列，是否有可能在数学上确定种子是什么？（这意味着，暴力破解不算是有效的方法）

[编辑] 这里似乎有很多评论......我想我会澄清我在寻找什么。

例如，该函数`y = f(x) = 3x`有一个反函数，即`y = g(x) = x/3`.

但是该函数`z = f(x, y) = x * y`没有反函数，因为（我可以在这里给出一个完整的数学证明，但我不想转移我的主要问题），直观地说，有不止一对`(x, y)`这样的`(x * y) == z`。

现在回到我的问题，如果你说函数不可逆，请解释原因。

（我希望从那些真正阅读并理解文章的人那里得到答案。像“这是不可能的”这样的答案并没有真正帮助）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-06T01:54:43.533

如果我们谈论的是 Oracle (née Sun) 的实现[`java.util.Random`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Random.java)，那么是的，一旦您知道足够多的位，就有可能。

`Random`使用 48 位种子和线性同余生成器。这些不是加密安全的生成器，因为状态大小很小（可暴力破解！）以及输出不是那么随机的事实（许多生成器在某些位中会表现出小的循环长度，这意味着即使这些位也可以很容易地预测如果其他位看起来是随机的）。

`Random`的种子更新如下：

```
nextseed = (seed * 0x5DEECE66DL + 0xBL) & ((1L << 48) - 1) 
```

这是一个非常简单的函数，如果你通过计算知道种子的所有位，它就可以倒置

```
seed = ((nextseed - 0xBL) * 0xdfe05bcb1365L) & ((1L << 48) - 1) 
```

从`0x5DEECE66DL * 0xdfe05bcb1365L = 1`mod 2 ^(48)开始。有了这个，任何时间点的单个种子值都足以恢复**所有过去和未来的种子**。

`Random`但是，它没有揭示整个种子的函数，所以我们必须有点聪明。

现在，显然，使用 48 位种子，您必须观察至少 48 位输出，否则您显然没有可使用的单射（因此是可逆的）函数。我们很幸运：`nextLong`返回`((long)(next(32)) << 32) + next(32);`，所以它产生了 64 位的输出（比我们需要的多）。事实上，我们可能会使用`nextDouble`（它产生 53 位），或者只是重复调用任何其他函数。请注意，由于种子的大小有限，这些函数不能输出超过 2 ^(48 个)唯一值（因此，例如，有 2 ^(64) -2 ^(48 个) `long`永远`nextLong`不会产生）。

我们来具体看看`nextLong`。它返回一个数字`(a << 32) + b`，其中`a`和`b`都是 32 位量。Let `s`be the seed before`nextLong`被调用。然后，让`t = s * 0x5DEECE66DL + 0xBL`,`a`是 的高 32 位`t`，让`u = t * 0x5DEECE66DL + 0xBL`,`b`是 的高 32 位`u`。令`c`和分别为和`d`的低 16 位。`t``u`

请注意，因为`c`和`d`是 16 位的量，我们可以强行使用它们（因为我们只需要一个）并完成它。这很便宜，因为 2 ^(16)只有 65536——对于计算机来说很小。但是让我们更聪明一点，看看是否有更快的方法。

我们有`(b << 16) + d = ((a << 16) + c) * 0x5DEECE66DL + 11`. 因此，做一些代数，我们得到`(b << 16) - 11 - (a << 16)*0x5DEECE66DL = c*0x5DEECE66DL - d`, mod 2 ^(48)。由于`c`和`d`都是 16 位的量，`c*0x5DEECE66DL`最多有 51 位。这有用地意味着

```
(b << 16) - 11 - (a << 16)*0x5DEECE66DL + (k<<48) 
```

最多等于6。（`c*0x5DEECE66DL - d`有`k`更复杂的方法来计算`c`和`d`，但由于边界`k`非常小，因此蛮力更容易）。

我们可以测试所有可能的值，`k`直到我们得到一个取反的余数 mod`0x5DEECE66DL`是 16 位的值（再次是 mod 2 ^(48)），这样我们就可以恢复 和 的低 16`t`位`u`。那时，我们有一个完整的种子，所以我们可以使用第一个方程找到未来的种子，或者使用第二个方程找到过去的种子。

演示该方法的代码：

```
import java.util.Random;

public class randhack {
    public static long calcSeed(long nextLong) {
        final long x = 0x5DEECE66DL;
        final long xinv = 0xdfe05bcb1365L;
        final long y = 0xBL;
        final long mask = ((1L << 48)-1);

        long a = nextLong >>> 32;
        long b = nextLong & ((1L<<32)-1);
        if((b & 0x80000000) != 0)
            a++; // b had a sign bit, so we need to restore a
        long q = ((b << 16) - y - (a << 16)*x) & mask;
        for(long k=0; k<=5; k++) {
            long rem = (x - (q + (k<<48))) % x;
            long d = (rem + x)%x; // force positive
            if(d < 65536) {
                long c = ((q + d) * xinv) & mask;
                if(c < 65536) {
                    return ((((a << 16) + c) - y) * xinv) & mask;
                }
            }
        }
        throw new RuntimeException("Failed!!");
    }

    public static void main(String[] args) {
        Random r = new Random();
        long next = r.nextLong();
        System.out.println("Next long value: " + next);
        long seed = calcSeed(next);
        System.out.println("Seed " + seed);
        // setSeed mangles the input, so demangle it here to get the right output
        Random r2 = new Random((seed ^ 0x5DEECE66DL) & ((1L << 48)-1));
        System.out.println("Next long value from seed: " + r2.nextLong());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T23:51:15.103

我通常不会只链接文章......但我发现了一个网站，有人对此进行了深入研究并认为值得发布。[http://jazzy.id.au/default/2010/09/20/cracking_random_number_generators_part_1.html](http://jazzy.id.au/default/2010/09/20/cracking_random_number_generators_part_1.html)

看来您可以这样计算种子：

```
seed = (seed * multiplier + addend) mod (2 ^ precision) 
```

其中乘数为 25214903917，加数为 11，精度为 48（位）。你不能只用 1 个数字来计算种子是什么，但你可以用 2 个数字来计算。

编辑：正如 nhahtdh 所说，在第 2 部分中，他深入研究了种子背后的更多数学。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T01:22:32.607

我想提出一个实现来反转由`nextInt()`.

程序将暴力破解被 丢弃的低 16 位`nextInt()`，使用 James Roper 博客中提供的算法找到前一个种子，然后检查 48 位种子的高 32 位是否与前一个数字相同。我们需要至少**2 个**整数来推导出前一个种子。否则，前一个种子将有 2 ^(16)种可能性，并且在我们至少有一个数字之前，它们都同样有效。

它可以`nextLong()`很容易地扩展，**1** `long`个数字就足以找到种子，因为我们有 2 个种子的高 32 位在一个中`long`，[由于它的生成方式](http://developer.classpath.org/doc/java/util/Random-source.html)。

请注意，在某些情况下，结果与您在`SEED`变量中设置为秘密种子的结果不同。如果您设置为秘密种子的数字占用超过 48 位（这是内部用于生成随机数的位数），则该方法`long`中将删除64 位的高 16 位`setSeed()`。在这种情况下，返回的结果将与您最初设置的结果不同，可能是低 48 位相同。

我想把大部分功劳归功于[这篇博客文章](http://jazzy.id.au/default/2010/09/21/cracking_random_number_generators_part_2.html)的作者 James Roper，它使下面的示例代码成为可能：

```
import java.util.Random;
import java.util.Arrays;

class TestRandomReverse {
  // The secret seed that we want to find
  private static long SEED = 782634283105L;

  // Number of random numbers to be generated
  private static int NUM_GEN = 5;

  private static int[] genNum(long seed) {
    Random rand = new Random(seed);
    int arr[] = new int[NUM_GEN];
    for (int i = 0; i < arr.length; i++) {
      arr[i] = rand.nextInt();
    }

    return arr;
  }

  public static void main(String args[]) {

    int arr[] = genNum(SEED);
    System.out.println(Arrays.toString(arr));

    Long result = reverse(arr);

    if (result != null) {
      System.out.println(Arrays.toString(genNum(result)));
    } else {
      System.out.println("Seed not found");
    }
  }

  private static long combine(int rand, int suffix) {
    return (unsignedIntToLong(rand) << 16) | (suffix & ((1L << 16) - 1));
  }

  private static long unsignedIntToLong(int num) {
    return num & ((1L << 32) - 1);
  }

  // This function finds the seed of a sequence of integer, 
  // generated by nextInt()
  // Can be easily modified to find the seed of a sequence 
  // of long, generated by nextLong()
  private static Long reverse(int arr[]) {
    // Need at least 2 numbers.
    assert (arr.length > 1);

    int end = arr.length - 1;

    // Brute force lower 16 bits, then compare
    // upper 32 bit of the previous seed generated
    // to the previous number.
    for (int i = 0; i < (1 << 16); i++) {
      long candidateSeed = combine(arr[end], i);
      long previousSeed = getPreviousSeed(candidateSeed);

      if ((previousSeed >>> 16) == unsignedIntToLong(arr[end - 1])) {
        System.out.println("Testing seed: " + 
                            previousSeed + " --> " + candidateSeed);

        for (int j = end - 1; j >= 0; j--) {
          candidateSeed = previousSeed;
          previousSeed = getPreviousSeed(candidateSeed);

          if (j > 0 && 
             (previousSeed >>> 16) == unsignedIntToLong(arr[j - 1])) {
            System.out.println("Verifying: " + 
                                previousSeed + " --> " + candidateSeed);
          } else if (j == 0) {
            // The XOR is done when the seed is set, need to reverse it
            System.out.println("Seed found: " + (previousSeed ^ MULTIPLIER));
            return previousSeed ^ MULTIPLIER;
          } else {
            System.out.println("Failed");
            break;
          }
        }
      }
    }

    return null;
  }

  private static long ADDEND = 0xBL;
  private static long MULTIPLIER = 0x5DEECE66DL;

  // Credit to James Roper
  // http://jazzy.id.au/default/2010/09/21/cracking_random_number_generators_part_2.html
  private static long getPreviousSeed(long currentSeed) {
    long seed = currentSeed;
    // reverse the addend from the seed
    seed -= ADDEND; // reverse the addend
    long result = 0;
    // iterate through the seeds bits
    for (int i = 0; i < 48; i++)
    {
      long mask = 1L << i;
      // find the next bit
      long bit = seed & mask;
      // add it to the result
      result |= bit;
      if (bit == mask)
      {
        // if the bit was 1, subtract its effects from the seed
        seed -= MULTIPLIER << i;
      }
    }

    return result & ((1L << 48) - 1);
  }
} 
```

# iphone - 通用应用程序未检测到 iPad 图像

> ID：15236152
> 
> 赞同：0
> 
> 时间：2013-03-05T23:29:03.273
> 
> 标签：iphone, image, ipad, xcode4, image-scaling

我有一个正在转换为通用二进制文件的应用程序。

该应用程序使用 Tabbar 控制器中的自定义表格视图，该视图根据检测到的 screenBound 高度绘制不同的大小。

它可以在不同的设备上很好地绘制表格，但表格视图中的行使用图像作为按钮。

image.png 和 image@2x.png 工作得很好，但应用程序无法识别 image~ipad.png（也尝试过 image-ipad.png）

所以无论我做什么，桌子都是在 iPad 上使用 iPhone 图像。

已经尝试了几个小时来找出原因。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T08:35:54.793

Check that your image is targeted to the app in Developer Tools. Select an image and then place a checkmark in Utility panel on the right

# google-chrome - 谷歌的 Doubleclick 响应中的“X-Frame-Options”标头无效

> ID：15236153
> 
> 赞同：14
> 
> 时间：2013-03-05T23:29:09.887
> 
> 标签：google-chrome, x-frame-options

我们使用来自 Google 的双击来跟踪 IFrame 中带有 Floodlight 标记的用户信息，但最近响应导致 Chrome 开发工具出现错误：

[加载“ http://123.fls.doubleclick.net/activityi;src=123;type=123;cat=123;ord=123](http://123.fls.doubleclick.net/activityi;src=123;type=123;cat=123;ord=123) ”时遇到无效的“X-Frame-Options”标头：“ALLOWALL”不是公认的指令。标题将被忽略。

这是关于此事的博客文章：http: [//ipsec.pl/node/1094](http://ipsec.pl/node/1094)

看起来最近添加了 ALLOWALL 以允许任何站点将代码用作 src（类似于根本不包括该选项），并且双击在其响应中包含此选项。在 IE、Firefox 和 Chrome 中，Chrome 是唯一引发错误的浏览器。这是否意味着谷歌在双击中使用了一个在他们自己的浏览器中不起作用的选项？很难想象 Google 团队不在 Chrome 中进行测试。

在我看来，如果标题被忽略，并且标题与不包括任何跨站点限制的 X-Frame-Options 具有相同的效果，则该错误不会影响任何事情。另外，由于错误发生在响应中，对原始请求进行的跟踪应该没问题，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:56:43.483

该问题已作为错误报告提交：
[错误 110857 - X-Frame-Options 应接受 ALLOWALL 作为有效值](https://bugs.webkit.org/show_bug.cgi?id=110857)
并已得到解决，并且一旦 Chrome 使用最新的 WebKit 引擎，该修复程序就在 WebKit 的主分支中，消息将消失。

有关更多信息，请参阅：[Webkit 变更集 144105](http://trac.webkit.org/changeset/144105)

# objective-c - 为什么 UITextField 子类背景图像不显示？

> ID：15236159
> 
> 赞同：0
> 
> 时间：2013-03-05T23:29:24.103
> 
> 标签：objective-c, xcode, oop, interface-builder

我在 Interface Builder 中设置了一个带有背景图像的 UITextField。背景显示得很好，但是当我（在 IB 中）将类名切换到我的 UITextField 子类（ValidatedTextField）时，背景图像不显示。谁能发现我的 UITextView 子类不应该有图像的任何原因？

**其他信息**
*不知道这是否有帮助，但 IB 也给我带来了一些麻烦——有时不允许我更改这些文本字段的类名。*

```
//ValidatedTextField.h
#import <UIKit/UIKit.h>
#import "MBValidated.h"

@interface ValidatedTextField : UITextView <MBValidated>

// the maximum characters allowed
@property (assign, nonatomic) int mbMaxLength;

// an visual indicator of the validation state (checkmark, etc)
@property (strong, nonatomic) UIImageView *mbStatusImageView;

// whether the field can be empty
@property (assign, nonatomic) BOOL mbIsRequired;

// whether we have succesfully validated
@property (assign, nonatomic) BOOL mbIsValid;

// validate and update stored validated state
-(BOOL)mbValidate;

@end

// ValidatedTextField.m
#import "ValidatedTextField.h"

@implementation ValidatedTextField

@synthesize mbMaxLength, mbStatusImageView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code        
    }
    return self;
}

// set any default values here
-(void)mbSetDefaults
{
    self.mbIsRequired = YES;
    self.mbIsValid = YES;
}

-(BOOL)mbValidate
{    
    // validate length
    if(self.text.length > self.mbMaxLength) self.mbIsValid = NO;

    // validate empty or filled
    if(self.text.length == 0 && self.mbIsRequired == YES) self.mbIsValid = NO;

    return self.mbIsValid;
}

- (void)awakeFromNib
{
    // set defaults
    [self mbSetDefaults];
}

@end

// MBValidated Protocol
#import <Foundation/Foundation.h>

@protocol MBValidated <NSObject>

// whether the field can be empty
@property (assign, nonatomic) BOOL mbIsRequired;

// whether we have succesfully validated
@property (assign, nonatomic) BOOL mbIsValid;

// validate the item
-(BOOL)mbValidate;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:00:02.333

你应该继承 UITextField 而不是 UITextView。

# python - 难以理解python中的Tkinter mainloop()

> ID：15236164
> 
> 赞同：0
> 
> 时间：2013-03-05T23:29:57.433
> 
> 标签：python, python-2.7, tkinter

好的，所以我有一个带有 EDIT 和 VIEW 按钮的基本窗口。正如我的代码所代表的那样， EDIT 和 VIEW 都返回一条消息“这个按钮没用”。我在“main_window”类下创建了这些。我创建了另一个类“edit_window”，希望在单击 EDIT 按钮时调用它。本质上，单击编辑按钮应该更改显示带有按钮添加和删除的新窗口。到目前为止，这是我的代码......下一个合乎逻辑的步骤是什么？

```
from Tkinter import *
#import the Tkinter module and it's methods
#create a class for our program

class main_window:
    def __init__(self, master):
        frame = Frame(master)
        frame.pack(padx=15,pady=100)

        self.edit = Button(frame, text="EDIT", command=self.edit)
        self.edit.pack(side=LEFT, padx=10, pady=10)

        self.view = Button(frame, text="VIEW", command=self.view)
        self.view.pack(side=RIGHT, padx=10, pady=10)

    def edit(self):
        print "this button is useless"

    def view(self):
        print "this button is useless"

class edit_window:
    def __init__(self, master):
        frame = Frame(master)
        frame.pack(padx=15, pady=100)

        self.add = Button(frame, text="ADD", command=self.add)
        self.add.pack()

        self.remove = Button(frame, text="REMOVE", command=self.remove)
        self.remove.pack()

    def add(self):
        print "this button is useless"

    def remove(self):
        print "this button is useless"

top = Tk()
top.geometry("500x500")
top.title('The Movie Machine')
#Code that defines the widgets

main = main_window(top)

#Then enter the main loop
top.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:00:30.250

只需创建 a[`Toplevel`](http://effbot.org/tkinterbook/toplevel.htm)而不是使用 a `Frame`：

```
class MainWindow:
    #...
    def edit(self):
        EditWindow()

class EditWindow(Toplevel):
    def __init__(self):
        Toplevel.__init__(self)
        self.add = Button(self, text="ADD", command=self.add)
        self.remove = Button(self, text="REMOVE", command=self.remove)
        self.add.pack()
        self.remove.pack() 
```

我已经根据 CapWords 约定更改了类名（请参阅[PEP 8](http://www.python.org/dev/peps/pep-0008/#class-names)）。这不是强制性的，但我建议您在所有 Python 项目中使用它以保持统一的样式。

# c# - 确定一个值是否设置为其类型的默认值的可维护方法是什么？

> ID：15236168
> 
> 赞同：8
> 
> 时间：2013-03-05T23:30:51.320
> 
> 标签：c#, .net

假设我有一些代码，如下所示：

```
var someCollection = new int[] {};
var result = someCollection.SingleOrDefault(); 
```

然后我想确定是否`result`是默认值。**但是，我想以可维护的方式这样做，以便如果元素类型发生`someCollection`更改，则其余代码不需要更改。**

这通常似乎完成的方式（在一般意义上）是`result == null`. 当然，在这种情况下，类型不是引用类型，所以这不起作用。

避免这种假设的改进是`result == default(int)`。但是，更改元素类型也需要将参数更改为`default`，因此仍然无法满足仅在一处更改类型的要求。

## 验收标准

1.  内置逻辑优于自定义逻辑。
2.  优雅简洁的代码是首选。
3.  高效的代码是首选。（对于引用类型，应该只进行引用比较。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:36:42.673

您可以使用[默认](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)关键字。由于您不知道类型是什么，您可以使用泛型。

```
public bool IsDefault<T>(T value)
{
    return EqualityComparer<T>.Default.Equals(value, default(T));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T23:35:57.303

从 Sam 那里窃取并改进它：

```
public static bool IsDefault<T>(this T value)
{
    return value == null || value.Equals(default(T));
} 
```

无需类型检查。JIT 将使它工作，因为它知道在 JIT 时间 T 是什么。

> 请注意，如果类型覆盖 Equals，那么即使它是`default(T)`，它也可能会说 false，即使不是，它也可能会说 true。——埃里克·利珀特评论

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T23:32:25.843

我认为这会奏效。

```
public static bool IsDefault<T>(this T value)
{
    var isValueType = typeof(T).IsValueType;

    if (isValueType)
        return value.Equals(default(T));
    else
        return value == null;
} 
```

但是，对于值类型，我认为这将调用它们的重载`Equals`方法，这可能是也可能不是问题。

# r - 如何在 R 中的条形图周围绘制边框，就像为箱线图绘制边框一样

> ID：15236174
> 
> 赞同：7
> 
> 时间：2013-03-05T23:31:20.147
> 
> 标签：r, plot

我试图以与 R 默认情况下隔离带边框的箱线图相同的方式获得隔离条形图的相同效果。换句话说，我希望出现在下面第一个图中的边框出现在第二个图中：

```
par(mfrow=c(2,1))

## boxplot on a formula:
boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
# *add* notches (somewhat funny here):
boxplot(count ~ spray, data = InsectSprays,
        notch = TRUE, add = TRUE, col = "blue")

require(grDevices) # for colours
tN <- table(Ni <- stats::rpois(100, lambda=5))
r <- barplot(tN, col=rainbow(20))
#- type = "h" plotting *is* 'bar'plot
lines(r, tN, type='h', col='red', lwd=2) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T23:45:21.467

您只需`box()`在条形图代码的末尾添加。

```
par(mfrow=c(2,1))
boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
boxplot(count ~ spray, data = InsectSprays,
        notch = TRUE, add = TRUE, col = "blue")
require(grDevices) # for colours
tN <- table(Ni <- stats::rpois(100, lambda=5))
r <- barplot(tN, col=rainbow(20))
box()
lines(r, tN, type='h', col='red', lwd=2) 
```

# iphone - 从一种视图切换到另一种视图

> ID：15236175
> 
> 赞同：0
> 
> 时间：2013-03-05T23:31:20.600
> 
> 标签：iphone, ios, objective-c

首先，我必须声明我是 Objective-C 和 iOS 编程的新手。

好的，所以我运行了一个简单的应用程序，但是在尝试从一种视图切换到另一种视图时遇到了一些问题。计划是在调用的视图中执行“登录逻辑”，`RootView`然后将用户发送到该视图`DataViewController`。我试过用谷歌搜索，但无论我如何尝试实现代码，它都会让 Xcode 哭泣。

我怎样才能达到想要的效果？

以下是以下文件：

**RootViewController.h**

```
#import <UIKit/UIKit.h>
@interface RootViewController : UIViewController <UIPageViewControllerDelegate>
@property (strong, nonatomic) UIPageViewController *pageViewController;
@end 
```

**根视图控制器.m**

```
@interface RootViewController ()

@end

@implementation RootViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

@end 
```

**数据视图控制器.h**

```
#import <UIKit/UIKit.h>
@interface DataViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *dataLabel;
@property (strong, nonatomic) id dataObject;
@end 
```

**数据视图控制器.m**

```
#import "DataViewController.h"

@interface DataViewController ()

@end

@implementation DataViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

@end 
```

它几乎只是一个空模板，但由于某种原因，它不适用于我之前尝试过的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:42:56.073

当你准备好继续前进时，在你的`RootViewController`（可以是你喜欢的任何方法）：

```
GeoPartyDataViewController *dataController = [[GeoPartyDataViewController alloc] initWithNibName:@"GeoPartyDataViewController.xib" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:dataController animated:TRUE]; 
```

不要忘记`#import "DataViewController.h"`在你的`RootViewController.m`.

根据您到目前为止提供的信息做出的假设，您`DataViewController`有一个`.xib`名为`GeoPartyDataViewController.xib`. 这只是一个例子。如果您正在使用故事板或其他机制，请在评论中告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:05:59.717

首先你需要添加`GeoPartyDataViewController.h` 到`RootViewController.m`这样的

```
#import "GeoPartyDataViewController.h" 
```

现在对于 go to `GeoPartyDataViewController`，您需要创建它的实例。

```
GeoPartyDataViewController *obj =[[GeoPartyDataViewController alloc] initWithNibName:@"GeoPartyDataViewController.xib" bundle:[NSBundle mainBundle]];
[self presentViewController:obj animated:YES completion:nil]; 
```

上面的代码写在你要进行的相关地方`GeoPartyDataViewController`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:47:30.873

使它与此一起使用：

```
- (void)viewDidAppear:(BOOL)animated
{
    UIStoryboard *storyboard = self.storyboard;
    UIViewController *mtvc = [storyboard instantiateViewControllerWithIdentifier:@"GeoPartyDataViewController"];
    [self presentViewController: mtvc animated:NO completion:nil];
} 
```

# iis-7 - 为什么 IIS7 ASP.Net MVC4 传输图像非常慢？

> ID：15236177
> 
> 赞同：2
> 
> 时间：2013-03-05T23:31:25.440
> 
> 标签：iis-7, asp.net-mvc-4

经过 8 年的 PHP 和大量的 VB 和 C# 之后，我开始使用 C# MVC4 进行开发。

我目前的问题是：应用程序提供图像的速度非常慢，但只有其中一些。应立即提供 32x32px 图像，但 439KB 的 PNG 图像在 30 多秒内被下载。这不是带宽问题，我检查了远程桌面连接到为文件提供服务的 VPS，那里的加载速度也很慢。

jquery.min（181.5KB 包）也是 12.14 秒（由萤火虫测量）。

我已经测试了静态和动态压缩开/关，没有改善。我也测试过

```
<modules runAllManagedModulesForAllRequests="false"></modules> 
```

断断续续，还是没有改善。我在 Windows 2008 SP1 和 Azure 上都遇到过这个问题。

问题出现在 IE9、FF、Chrome 和 Opera 上。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:53:57.693

感谢您的支持，问题是由 ISP 引起的，感谢他们的支持解决了它。

# r - 将R中的输出放入excel

> ID：15236179
> 
> 赞同：0
> 
> 时间：2013-03-05T23:31:47.517
> 
> 标签：r, excel, import, export

伙计们，我有一个代码可以生成 2 列数据（例如数字、中位数），这些数据指的是一个特定的人……但我已经对 7 个人进行了抽样，所以基本上我得到了这个输出：

```
[[1]
Number Median
1       5
2       3  
.....
[[2]]
Number Median
1       6
2       4
....
[[3]]
Number Median
1       3
2       5 
```

所以我基本上得到了这个输出....直到 [[7]] 我尝试使用这个代码在 excel 中传输这个输出

```
write.csv(cbind(data),"data1.csv") 
```

我得到这种类型的输出：

```
list(c(Median =.......It lists all the median on the rows 
```

但我希望它在 NOT ROWS 列中保存引用“中位数”和“数字”的数据

如果我只是输入

```
write.csv(data,"data1.csv") 
```

我收到一个错误

```
arguments imply differing number of rows: 157, 179, 178, 180 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:41:02.563

正如 Marius 所说，您有一个无法写入文件`list`的内容。你需要做：`data.frames``.csv`

```
NewDataFrame <- do.call("rbind", YourList)
write.csv(NewDataFrame, "Data.csv") 
```

`do.call`从 a 中获取每个元素`list`并将您告诉它的任何功能（在本例中`rbind`）应用于所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:37:34.960

这里有两个选项。两者都使用以下示例数据：

```
myList <- list(data.frame(matrix(1:4, ncol = 2)),
               data.frame(matrix(3:10, ncol = 2)),
               data.frame(matrix(11:14, ncol =2)))
myList
# [[1]]
#   X1 X2
# 1  1  3
# 2  2  4
# 
# [[2]]
#   X1 X2
# 1  3  7
# 2  4  8
# 3  5  9
# 4  6 10
# 
# [[3]]
#   X1 X2
# 1 11 13
# 2 12 14 
```

### 选项 1：编写一个 csv 文件，其中`data.frame`s 按原样显示`list`

```
sink("list_of_dataframes.csv", type="output")
invisible(lapply(myList, function(x) dput(write.csv(x))))
sink() 
```

如果您在文本编辑器中打开生成的“list_of_dataframes.csv”文件，您将得到如下所示的内容。当您将其读入电子表格程序时，第一列将包括行名并`NULL`分隔每个`data.frame`：

```
"","X1","X2"
"1",1,3
"2",2,4
NULL
"","X1","X2"
"1",3,7
"2",4,8
"3",5,9
"4",6,10
NULL
"","X1","X2"
"1",11,13
"2",12,14
NULL 
```

### 选项 2：编写或搜索`cbind`适应`data.frame`具有不同行数的 binding 的版本。

这是我编写的一个这样的函数。

```
cbind2 <- function(datalist) {
  nrows <- max(sapply(datalist, nrow))
  expandmyrows <- function(mydata, rowsneeded) {
    temp1 = names(mydata)
    rowsneeded = rowsneeded - nrow(mydata)
    temp2 = setNames(data.frame(
      matrix(rep(NA, length(temp1) * rowsneeded),
             ncol = length(temp1))), temp1)
    rbind(mydata, temp2)
  }
  do.call(cbind, lapply(datalist, expandmyrows, rowsneeded = nrows))
} 
```

这是应用于您的列表的功能：

```
cbind2(myList)
#   X1 X2 X1 X2 X1 X2
# 1  1  3  3  7 11 13
# 2  2  4  4  8 12 14
# 3 NA NA  5  9 NA NA
# 4 NA NA  6 10 NA NA 
```

该输出应该很容易`write.csv`与相关功能一起使用。

# python - 根据位置将文本文件的部分存储到多个字典条目中

> ID：15236180
> 
> 赞同：1
> 
> 时间：2013-03-05T23:31:49.287
> 
> 标签：python, parsing, dictionary

python的极端初学者（对编码有点陌生）。搜索了一下，得到了一些有用的提示，但我的特殊情况比其他相关的 stackoverflow 帖子要复杂一些（至少我可以找到）。

我有一个结果文本文件。文件中有一个特定的部分写着“摘要”，这是我想要集中收集的整个部分。**之后**_

```
Summary: 
```

行，有 5**个小节**，它们有自己的数据，我想将它们作为键存储在字典中。这些小节将被称为 level1、level2、-->level5。

每个小节的开头都有一行只有该小节的名称，即

```
level1: 
```

因此，总结一下：创建一个包含 5 个键（标记为 level1-->level5）的字典，每个键都包含该小节中的行数据，但要确保一旦达到后续级别，就停止保存前一个键的数据.

这是我到目前为止所拥有的（警告：以下是非常草率的代码，可能会给更有经验的编码人员带来痛苦）：

```
results = sys.argv[1]
seen_start = False
seen_1 = False
seen_2 = False
seen_3 = False
seen_4 = False
seen_5 = False
results_matrix = {}
j = 'level1'
k = 'level2'
l = 'level3'
m = 'level4'
n = 'level5'

with open(results, "r") as f:

    for line in f:
        if line.find("Summary:") ==0:
            seen_start = True
            continue

        if seen_start:

            if line.find(j) ==0:
                seen_1 = True
                continue

            elif line.find(k) ==0:
                seen_1 = False
                seen_2 = True
                continue
            elif line.find(l) ==0:
                seen_2 = False
                seen_3 = True
                continue
            elif line.find(m) ==0:
                seen_3 = False
                seen_4 = True
                continue
            elif line.find(l) ==0:
                seen_4 = False
                seen_5 = True
                continue

        if seen_1 and line <> '\n':
            results_matrix[j] = (line.rstrip('\n'))
            if line.find(k) ==0:
                seen_1 = False
                seen_2 = True
                continue

        if seen_2 and line <> '\n' :
            results_matrix[k] = (line.rstrip('\n'))
            if line.find(l) ==0:
                seen_2 = False
                seen_3 = True
                continue
            print results_matrix[k] 
```

* * *

信不信由你，代码实际上正确保存了最新的小节，但将*先前*的条目保存为该小节的最后一行。即 results_matrix[k] 将在这种情况下工作，但 results_matrix[j] 只有该部分的最后一行的条目

* * *

非常感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:41:08.337

`results_matrix[j] = (line.rstrip('\n'))`重写`results_matrix[j]`每一行，所以只看到最后一行。尝试在循环
`results_matrix[j] = ""`
之前添加：然后：使用将运行所有行。`for`
`results_matrix[j] = results_matrix[j] + line`
`rstrip`

# php - Colorbox 平滑淡入内容

> ID：15236187
> 
> 赞同：2
> 
> 时间：2013-03-05T23:32:44.193
> 
> 标签：php, javascript, jquery, css

我有这个问题：我使用 colorbox 来制作那些 jQuery 弹出窗口（[colorbox](http://www.jacklmoore.com/colorbox)）。问题是我想通过 ajax 平滑地淡入内容，而不需要加载 div，你可以在内容显示之前看到它。

当我通过不透明度禁用加载 div 时，它消失了，但我无法顺利淡入我的内容。它只是突然弹出。

```
<script type="text/javascript">
$(document).ready(function(){
    $(".register_link").colorbox({
        initialWidth:'886',
        initialHeight:'410',

        fixed:'true',
        scrolling:'false',
        transition:'fade',
        onOpen: function(){
             $("#colorbox").css("opacity", 0);
                },
        onComplete: function(){
             var title = 'Register';
             $('#cboxTitle').text(title);

             $("#colorbox").css("opacity", 1);
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:48:50.590

您可以使用 jQuery`animate()`函数，而不是`.css()`函数

```
onComplete: function(){
     var title = 'Register';
     $('#cboxTitle').text(title);

     $("#colorbox").animate({"opacity": 1});
} 
```

# php - 区分表单 - Jquery

> ID：15236191
> 
> 赞同：0
> 
> 时间：2013-03-05T23:33:35.307
> 
> 标签：php, jquery, html, forms

我在我的页面上使用了多个 html。

```
<form id="form1">
 <input type="text" name="foo" id="foo">
 <input type="submit" value="submit">
</form>

<form id="form2">
 <input type="text" name="foo" id="foo">
 <input type="submit" value="submit">
</form> 
```

提交表单后，我将按如下方式访问数据：bar

```
var bar=$(this).find('input[name=foo]').val(); 
```

这很好，但是假设我想在处理完提交的数据后将表单数据更改回 html 页面。如何参考提交的表格？

就像是：

```
$(this).$('#foo').val('Hello'); 
```

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:36:04.787

如果这是一个 ajax 调用，您可以在提交之前存储对表单的引用：

```
var form = $(this);
$.ajax (...).done(function (){
    form.find(...).val (...)
}); 
```

# php - 如果 date() 用作目录，PHP fopen() 将失败

> ID：15236194
> 
> 赞同：-1
> 
> 时间：2013-03-05T23:33:51.520
> 
> 标签：php, date, fopen

我的代码如下所示：

```
$fp = fopen( getcwd() . DIRECTORY_SEPARATOR . date('d-M-y') . DIRECTORY_SEPARATOR . "example.html", "w" ); 
```

由于我无法弄清楚的原因，此代码失败。

这段代码工作得很好：

```
$fp = fopen( getcwd() . DIRECTORY_SEPARATOR . "05-Mar-2013" . DIRECTORY_SEPARATOR . "example.html", "w" ); 
```

起初我认为 date() 没有返回字符串是一个问题，所以我尝试将其转换为字符串，但该函数明确声明它返回一个字符串，所以这不是问题。有没有人找到解决这个问题的方法？我需要使用 date() 函数动态插入它，但如果这不起作用，我将不得不找出一个仍然显示日期的替代目录结构。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:42:43.573

使用`date('d-M-Y')`而不是`date('d-M-y')`.

# opengl - OpenGL glTexImage2D 数据

> ID：15236196
> 
> 赞同：6
> 
> 时间：2013-03-05T23:33:57.017
> 
> 标签：opengl, textures

`CSV file`我正在尝试从包含预先计算的纹理的a 中读取浮点数，将其存储在 1 维数组中，然后将读取的数据放入 2 维纹理中。
我需要确保以下代码可以做到这一点，因为我在访问数据时遇到问题，而且我无法弄清楚错误出在哪里：

```
// Allocate memory  
float * image = new float [width * height * 3 ];  
for( int i = 0; i < height; i++)  
    {  
        for( int j = 0; j < width-1; j++)  
            {  
                fscanf( fDataFile, "%f,", &fData );  
                image[ 4 * i * j + 0 ] = fData;  
                image[ 4 * i * j + 1 ] = fData;  
                image[ 4 * i * j + 2 ] = fData;  
            }  
        fscanf( fDataFile, "%f", &fData );  
        image[ 4 * i * width-1 + 0 ] = fData;  
        image[ 4 * i * width-1 + 1 ] = fData;  
        image[ 4 * i * width-1 + 2 ] = fData;  
     } 
```

这里应该没有问题，但困扰我的是以下几点：

```
// create the texture  
glGenTextures(1, &texHandle);  
glBindTexture(GL_TEXTURE_2D, texHandle);   
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_FLOAT, &image[0]); 
```

只给出`glTexImage2D`指向我的一维数组的指针可以吗？
数组的大小是宽*高*3，纹理的格式应该是宽*高，有 3 个通道……所以我猜大小​​应该没问题？！我的程序仍然无法按预期工作，这是错误的一个潜在来源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:58:18.953

我解决了我搞砸的纹理阅读。我不知道发生了什么，但我的阵列的初始化纯属无稽之谈。这是我在尝试编写测试纹理时发现的更正代码：

```
// Allocate memory  
float * image = new float [width * height * 3 ];  
for( int i = 0; i < height; i++)  
{  
    for( int j = 0; j < width-1; j++)  
    {  
        fscanf( fDataFile, "%f,", &fData );  
        image[ 3 * (i * width + j) + 0 ] = fData;  
        image[ 3 * (i * width + j) + 1 ] = fData;  
        image[ 3 * (i * width + j) + 2 ] = fData;  
        //image[ 4 * i * j + 2 ] = 1.0f;  
    }  
    fscanf( fDataFile, "%f", &fData );  
    image[ 3 * (i * width + width-1) + 0 ] = fData;  
    image[ 3 * (i * width + width-1) + 1 ] = fData;  
    image[ 3 * (i * width + width-1) + 2 ] = fData;  
    //image[ 4 * i * width-1 + 2 ] = 1;  
} 
```

此外，它现在可以独立于内部格式工作。`GL_RGB, GL_RGBA, GL_RGB32F and GL_RGBA32F`在不改变我阅读纹理的方式的情况下一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:23:44.257

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_FLOAT, &image[0]); 
```

您应该使用[浮点内部格式](http://www.opengl.org/wiki/Image_Format#Color_formats)。例如，`GL_RGB32F`。那应该是第三个参数。

# ios - 允许在 App Store 中使用 ssziparchive 库吗？

> ID：15236198
> 
> 赞同：1
> 
> 时间：2013-03-05T23:34:10.690
> 
> 标签：ios, cryptography, app-store, ssziparchive

由于密码学出口规定，可以使用这个库吗？或者我可以使用哪一个来压缩/解压缩文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:53:04.893

我不知道 SSZipArchive 是否允许在分布式应用程序中使用，但我使用的库是[Objective-Zip](https://github.com/flyingdolphinstudio/Objective-Zip/)。

它可以很容易地集成到任何项目中。

压缩示例代码：

```
// create a zip file for writing
ZipFile *zipFile= [[ZipFile alloc] initWithFileName:pathOfTheFileToBeZipped mode:ZipFileModeCreate];

// Add a file, write to its stream and close it
ZipWriteStream *stream1= [zipFile writeFileInZipWithName:@"abc.txt" fileDate:[NSDate dateWithTimeIntervalSinceNow:-86400.0] compressionLevel:ZipCompressionLevelBest];
NSString *text= @"abc";
[stream1 writeData:[text dataUsingEncoding:NSUTF8StringEncoding]];
[stream1 finishedWriting];

// Add another file, write to its stream and close it
ZipWriteStream *stream2= [zipFile writeFileInZipWithName:@"x/y/z/xyz.txt" compressionLevel:ZipCompressionLevelNone];
NSString *text2= @"XYZ";
[stream2 writeData:[text2 dataUsingEncoding:NSUTF8StringEncoding]];
[stream2 finishedWriting];

// Close the zip file
[zipFile close]; 
```

解压示例代码：

```
// open the zip file for reading
ZipFile *unzipFile = [[ZipFile alloc] initWithFileName:pathOfTheFileToBeUnzipped mode:ZipFileModeUnzip];

// retrieve the info of the files inside
NSArray *infos= [unzipFile listFileInZipInfos];

// iterate over files
for (FileInZipInfo *info in infos) {        
    // locate the file in the zip
    [unzipFile locateFileInZip:info.name];

    // expand the file in memory
    ZipReadStream *read= [unzipFile readCurrentFileInZip];
    NSData *data = [read readDataOfLength:info.length];
    [read finishedReading];

    // construct the folder/file path structure
    NSString *unzipPathFilename = [unzipPath stringByAppendingPathComponent:info.name];
    NSString *unzipPathFoldername = [[unzipPathFilename stringByDeletingLastPathComponent] copy];
    NSError *errorw;

    // write the unzipped files, with some consistency checks
    NSRange range = [unzipPathFoldername rangeOfString:@"__MACOSX"];

    if (range.location == NSNotFound) {
        if ([fileManager createDirectoryAtPath:unzipPathFoldername withIntermediateDirectories:YES attributes:nil error:&errorw]) {
            if (![[unzipPathFilename pathExtension] isEqualToString:@""] && ![[[unzipPathFilename lastPathComponent] substringToIndex:1] isEqualToString:@"." ]) {
                [data writeToFile:unzipPathFilename atomically:NO];
            }
        }
        else {
            NSLog(@"Directory Fail: %@", errorw);
        }
    }
}

// close the zip file
[unzipFile close]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:05:17.240

实际上，您可以在 iOS 应用程序中进行加密。您只需向 NSA 提交申请，您是谁以及应用程序中的加密类型。回复您的注册号通常会在 30 分钟内完成。它是自动或半自动的。他们只是收集有关开发人员的信息。

注册为 iOS 开发者更简单。

我的意见：-

如果您不在 ZIP 库中使用加密，那么您应该提交任何申请。链接器将在优化后删除该代码。没有使用该代码。但是，如果您使用 iOS 附带的加密，那么您应该申请。例如，如果 UIWebView 打开 https:// URL（例如 Facebook），但如果您使用 UIWebView 打开非安全页面，则不应申请。

# php - if elseif elseif 是 if else 还是 if else ？

> ID：15236207
> 
> 赞同：-9
> 
> 时间：2013-03-05T23:34:34.833
> 
> 标签：php, if-statement

我是 php 的新手，我真的很困惑我的代码看起来是正确的，它可以工作但不完全。我正在尝试使用会话实现翻译，以便用户在使用 if elseif elseif 调用条件时实现一些其他功能，我是否需要将 hain if 语句与 if else else 一起使用，或者是否可能像我一开始那样。

```
<?php

if ($_GET['lang']=='fr') { 
include('fr.php');
session_start();
$_SESSION['lang']='fr';
} 

elseif ($_GET['lang']=='en') { 
include('gb.php');
session_start();
$_SESSION['lang']='en';
}

elseif ($_GET['lang']=='it') { 
include('it.php');
session_start();
$_SESSION['lang']='it';
}

elseif ($_SESSION['lang']=='fr')
{
include('fr.php');
}

elseif ($_SESSION['lang']=='en')
{
include('gb.php');
}

elseif ($_SESSION['lang']=='it')
{
include('it.php');
}

else
{
include('fr.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T23:38:25.120

您可以使用 switch 语句来获得更整洁的代码外观：

```
 switch($_SESSION['lang']) {
    case 'it':
        include(..);
        break;
    case 'en':
        include(..);
        break;

    etc..
} 

```

见[http://php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:47:30.173

我在这里注意到的第一件事是有很多重复的代码，本质上是从多个地方进行查找。如果你重构你的代码，你可以消除很多复杂性。这是以更简单的方式完成的相同操作：

```
<?php

define('DEFAULT_LANG', 'fr');
$lang_inc = array(
    'fr' => 'fr.php',
    'en' => 'gb.php',
    'it' => 'it.php',
);

session_start()

if ($_GET['lang'] && array_key_exists('lang', $_GET)) {
    $lang = $_GET['lang'];
} elseif ($_SESSION['lang'] && array_key_exists('lang', $_SESSION)) {
    $lang = $_SESSION['lang'];
} else {
    $lang = DEFAULT_LANG;
}

$lang_file = $lang_inc[$lang];
include($lang_file);

$_SESION['lang'] = $lang; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:58:15.767

我认为不需要 if/else 或 switch，因为您所做的只是包含一个名称的动态部分已在语言变量中定义的文件。

除非明确定义了 $_GET['lang']，否则您也不需要重置 $_SESSION['lang']。

这将更有效，并且少于使用 if/else 或基于 lang 值切换条件的代码的一半。

```
<?php
session_start();

// Only set $_SESSION[$lang] if it is not set
// or if $_GET['lang'] is explicitly defined
if (isset($_GET['lang']) || !isset($_SESSION['lang'])) {

    // Array of allowed languages
    $allowed = array('fr', 'en', 'it');

    // Set fr to default if lang isn't defined or not allowed
    $_SESSION['lang'] = isset($_GET['lang']) && in_array($_GET['lang'], $allowed) ? $_GET['lang'] : 'fr';
}

// dynamically include file
include($_SESSION['lang'] . '.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:41:29.097

使用会话时`session_start()`，无论是初始化会话还是恢复会话，都必须调用 ，因此将其从语句中取出并将其放在页面顶部。此外，我不完全了解您要达到的目标或失败的目标。

# html - 引导程序中的中心输入，带有输入前置

> ID：15236208
> 
> 赞同：1
> 
> 时间：2013-03-05T23:34:43.310
> 
> 标签：html, css, twitter-bootstrap

```
<body>
    <div class="container">
        <div class="row">
            <div class="offset4 span4">
                <h1 class="text-center">Days</h1>
                <form method="post" action="proc/days.php" id="jobs">
                    <div class="input-prepend">
                        <span class="add-on">Job Count</span>
                        <input type="text" class="day1">
                    </div>
                    <div class="input-prepend">
                        <span class="add-on">Day Name</span>
                        <input type="text" class="day2">
                    </div>
                </form>
            </div>
        </div>
    </div>
</body> 
```

是我的主要代码块（删除了所有其他内容）。我想让 input-prepend 占据 span4 中所有可用的宽度。

现在，我能找到的唯一技巧最终不起作用，或者变得很大。

另外，我正在使用 Cosmo Bootswatch 主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:00:01.350

将宽度设置`.day`为 1 到 76%（在考虑填充和边框等之后）将填满您的空间。那么问题是你有另一个取决于`.day1`类的元素。所以添加一个 id，或者像这样的例子：

```
<input type="text" class="day1" id="day1"> 
```

然后`#day1 {width:76%;}`在你的CSS中使用。您很可能需要随着屏幕宽度的变化（通过媒体查询）调整宽度大小。

# scala - ::和+有什么区别：

> ID：15236211
> 
> 赞同：1
> 
> 时间：2013-03-05T23:34:58.393
> 
> 标签：scala

```
scala> 3 :: List(1,2)
res5: List[Int] = List(3, 1, 2)

scala> 3 +: List(1,2)
res6: List[Int] = List(3, 1, 2) 
```

这两个运营商有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T23:37:21.390

不同之处在于它`+:`是 的抽象`::`，它作用于广义`Seq`s 而不仅仅是`List`s。例如，`+:`也适用于`Stream`s：

```
scala> 3 +: Stream(1,2)
res0: scala.collection.immutable.Stream[Int] = Stream(3, ?) 
```

当您将它与 a 一起使用时`List`，它在功能上与`::`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:50:01.740

类上定义的方法`+:`和`::`定义`List`具有[以下实现](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/immutable/List.scala#L1)，

```
override def +:[B >: A, That](elem: B)(implicit bf: CanBuildFrom[List[A], B, That]): That = bf match {
  case _: List.GenericCanBuildFrom[_] => (elem :: this).asInstanceOf[That]
  case _ => super.+:(elem)(bf)
}

def ::[B >: A] (x: B): List[B] =
  new scala.collection.immutable.::(x, this) 
```

该方法`+:`需要存在，因为它继承自`SeqLike`. 正如 pelotom 所说，这是更通用的方法。

但是，我不确定为什么`List.::`需要存在该方法。

**更新**：同样的问题[已经被问过了](https://stackoverflow.com/questions/11814675/whats-the-difference-between-and-for-prepending-to-a-list?rq=1)。在评论中建议该方法的`::`存在是出于历史原因。

# java - Java repaint() 使第二个画布绘图不出现

> ID：15236214
> 
> 赞同：0
> 
> 时间：2013-03-05T23:35:01.117
> 
> 标签：java, awt, repaint

我一直在制作一个绘画程序，我在光谱中的每种颜色都放入了一个色带，这样用户只需点击任何地方，它就会（大致）为他们提供所需的颜色。我的问题是它工作得很好，但是当程序运行时，你必须调整窗口的大小（AKA 调用 repaint()）几次，直到它真正工作。这是一些冗长的代码，但您可以略过可恶的布尔重置。

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.*;
import java.awt.*;

public class PaintHomework extends Applet implements ActionListener, MouseListener, MouseMotionListener
{
    Canvas c1;
    Canvas c2;

    Graphics myG;
    Graphics myG2;

    TextField t1;
    TextField currentColor;
    TextField currentMode;
    TextField currentShape;

    int xForStraightLine=0;
    int yForStraightLine=0;
    int x = 0;
    int y = 0;

    int counter = 0;
    int x11=1;
    int x22=0;
    int y11=1;
    int y22=200;

    int x1;
    int y1;
    int x2;
    int y2;
    int xSize=0;
    int ySize=0;

    float num1 = (float).01;
    float num2 = (float)1.0;
    float num3 = (float)1.0;
    float hueNum=0;

    int penSize = 10;
    String text = "";

    Button red;
    Button blue;
    Button green;

    Button oval;
    Button rect;
    Button sprayCan;
    Button straightLine;
    Button filled;
    Button empty;
    Button free;
    Button dragOval;
    Button dragRect;

    Button reset;

    boolean ovalTime;
    boolean rectTime;
    boolean sprayCanTime;
    boolean straightLineTime;
    boolean filledTime;
    boolean emptyTime;
    boolean freeTime;
    boolean dragOvalTime;
    boolean dragRectTime;

    public void init()
    {
        this.setSize(1350,651);

        c1 = new Canvas();
        add(c1);
        c1.setSize(900,450);

        c1.addMouseListener(this);
        c1.addMouseMotionListener(this);

        red = new Button("Red");
        add(red);
        red.addActionListener(this);
        red.setBackground(Color.red);
        red.addMouseListener(this);

        blue = new Button("Blue");
        add(blue);
        blue.addActionListener(this);
        blue.setBackground(Color.blue);
        blue.addMouseListener(this);

        green = new Button("Green");
        add(green);
        green.addActionListener(this);
        green.setBackground(Color.green);
        green.addMouseListener(this);

        oval = new Button("Oval");
        add(oval);
        oval.addActionListener(this);

        rect = new Button("Square");
        add(rect);
        rect.addActionListener(this);

        sprayCan = new Button("Spray Can");
        add(sprayCan);
        sprayCan.addActionListener(this);

        filled = new Button("Filled");
        add(filled);
        filled.addActionListener(this);

        empty = new Button("Empty");
        add(empty);
        empty.addActionListener(this);

        free = new Button("Free");
        add(free);
        free.addActionListener(this);

        straightLine = new Button("Straight Line");
        add(straightLine);
        straightLine.addActionListener(this);

        dragOval = new Button("Drag Oval");
        add(dragOval);
        dragOval.addActionListener(this);

        dragRect = new Button("Drag Square");
        add(dragRect);
        dragRect.addActionListener(this);

        t1 = new TextField("10");
        add(t1);
        t1.addActionListener(this);

        currentColor = new TextField("Black");
        add(currentColor);
        currentColor.addActionListener(this);

        currentMode = new TextField("Free");
        add(currentMode);
        currentMode.addActionListener(this);

        currentShape = new TextField("Oval");
        add(currentShape);
        currentShape.addActionListener(this);

        reset = new Button("Reset");
        add(reset);
        reset.addActionListener(this);

        c2 = new Canvas();
        add(c2);
        c2.addMouseListener(this);
        c2.setSize(900,200);

        ovalTime = false;
        rectTime = false;
        sprayCanTime = false;
        straightLineTime = false;
        filledTime = false;
        emptyTime = true;
        freeTime = true;
        dragOvalTime = false;
        dragRectTime = false;

        myG = c1.getGraphics();
        myG2 = c2.getGraphics();

        currentShape.setText("");
        drawRainbow();

    }

    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==red)
        {
            myG.setColor(Color.red);
        }
        if(e.getSource()==blue)
        {
            myG.setColor(Color.blue);
        }
        if(e.getSource()==green)
        {
            myG.setColor(Color.green);
        }
        if(e.getSource()==oval)
        {
            ovalTime = true;
            rectTime = false;

            freeTime = false;
            straightLineTime = false;
            emptyTime = true;

            currentMode.setText("Empty");
            currentShape.setText("Oval");
        }
        if(e.getSource()==rect)
        {
            ovalTime = false;
            rectTime = true;
            currentShape.setText("Square");
        }
        if(e.getSource()==sprayCan)
        {
            sprayCanTime = true;
            straightLineTime = false;
            filledTime = false;
            emptyTime = false;
            freeTime = false;
            dragOvalTime = false;
            dragRectTime = false;
            currentMode.setText("Spray");
            currentShape.setText("");
        }
        if(e.getSource()==straightLine)
        {
            straightLineTime = true;
            sprayCanTime = false;           
            filledTime = false;
            emptyTime = false;
            freeTime = false;
            dragOvalTime = false;
            dragRectTime = false;
            currentMode.setText("Line");
        }
        if(e.getSource()==filled)
        {
            filledTime = true;
            sprayCanTime = false;
            straightLineTime = false;
            emptyTime = false;
            freeTime = false;
            dragOvalTime = false;
            dragRectTime = false;
            currentMode.setText("Filled");
        }
        if(e.getSource()==empty)
        {
            emptyTime = true;
            sprayCanTime = false;
            straightLineTime = false;
            filledTime = false;
            freeTime = false;
            dragOvalTime = false;
            dragRectTime = false;
            currentMode.setText("Empty");
        }
        if(e.getSource()==free)
        {
            freeTime = true;
            sprayCanTime = false;
            straightLineTime = false;
            filledTime = false;
            emptyTime = false;
            dragOvalTime = false;
            dragRectTime = false;
            currentMode.setText("Free");

        }
        if(e.getSource()==dragOval)
        {
            dragOvalTime = true;
            freeTime = false;
            sprayCanTime = false;
            straightLineTime = false;
            filledTime = false;
            emptyTime = false;
            dragRectTime = false;
            currentMode.setText("Drag Oval");
        }
        if(e.getSource()==dragRect)
        {
            dragRectTime = true;
            dragOvalTime = false;
            freeTime = false;
            sprayCanTime = false;
            straightLineTime = false;
            filledTime = false;
            emptyTime = false;
            currentMode.setText("Drag Square");
        }
        if(e.getSource()==t1)
        {
            text = t1.getText();
            penSize = Integer.parseInt(text);
        }
        if(e.getSource()==reset)
        {

            myG.setColor(Color.white);
            myG.fillRect(0, 0, 900, 450);
            myG.setColor(Color.black);

            ovalTime = true;
            rectTime = false;
            sprayCanTime = false;
            straightLineTime = false;
            filledTime = false;
            emptyTime = true;
            freeTime = true;
            dragOvalTime = false;
            dragRectTime = false;

            t1.setText("10");
            penSize = 10;

            currentColor.setText("Black");
            currentMode.setText("Free");
            currentShape.setText("");

        }

    }

    public void paint(Graphics g)
    {
        c1.setLocation(0,0);
        g.drawRect(0, 0, 901, 450);
        free.setLocation(1050, 250);
        reset.setLocation(1275, 250);
        straightLine.setLocation(950,250);
        t1.setLocation(1100, 50);
        t1.setSize(40,20);
        g.drawString("Press Enter After Changing Size", 1050, 30);
        g.drawRect(1049, 18, 177, 20);
        currentColor.setLocation(990, 90);
        currentMode.setLocation(1200, 90);
        currentMode.setSize(65,20);
        currentShape.setLocation(1095, 90);
        dragOval.setLocation(1100,250);
        dragRect.setLocation(1175,250);

        c2.setLocation(0,495);
        drawRainbow();

    }

    public void drawRainbow()
    {
        counter = 0;
        x11=1;
        x22=0;
        y11=1;
        y22=200;
        num1 = (float).01;
        num2 = (float)1.0;
        num3 = (float)1.0;

        while(counter < 1349)
        {
            myG2.setColor(Color.getHSBColor(num1, num2, num3));
            myG2.drawLine(x11,y11,x22,y22);
            num1=(float)(num1+.001);
            x11++;
            x22++;
            counter++;
        }
    }

    public void mouseClicked(MouseEvent e) 
    {

    }

    public void mouseEntered(MouseEvent e) 
    {

    }

    public void mouseExited(MouseEvent e)
    {

    }

    public void mousePressed(MouseEvent e)
    {
        if(e.getSource()==red)
        {
            red.setBackground(Color.yellow);
        }

        if(e.getSource()==blue)
        {
            blue.setBackground(Color.magenta);
        }
        if(e.getSource()==green)
        {
            green.setBackground(Color.pink);
        }       
        if(straightLineTime)
        {
            xForStraightLine = e.getX();
            yForStraightLine = e.getY(); 
        }
        if(ovalTime)
        {
            if(!freeTime)
            {
                if(emptyTime)
                {
                    myG.drawOval(e.getX(),e.getY(),penSize,penSize);
                }
                if(filledTime)
                {
                    myG.fillOval(e.getX(),e.getY(),penSize,penSize);
                }
            }
        }
        if(rectTime)
        {
            if(!freeTime)
            {
                if(emptyTime)
                {
                    myG.drawRect(e.getX(),e.getY(),penSize,penSize);
                }
                if(filledTime)
                {
                    myG.fillRect(e.getX(),e.getY(),penSize,penSize);
                }
            }   
        }
        if(freeTime)
        {
            x = e.getX();
            y = e.getY();
            ovalTime = false;
            rectTime = false;
            currentShape.setText("");
        }
        if(dragOvalTime || dragRectTime)
        {
            x1=e.getX();
            y1=e.getY();
        }

        if(e.getSource()==c2)
        {
            hueNum = e.getX();
            hueNum = hueNum+70;
            hueNum = (float)(hueNum*.001);
            myG.setColor(Color.getHSBColor(hueNum,num2,num3));
        }

    }

    public void mouseReleased(MouseEvent e) 
    {
        if(e.getSource()==red)
        {
            red.setBackground(Color.red);
            currentColor.setText("Red");
        }

        if(e.getSource()==blue)
        {
            blue.setBackground(Color.blue);
            currentColor.setText("Blue");
        }
        if(e.getSource()==green)
        {
            green.setBackground(Color.green);
            currentColor.setText("Green");
        }
        if(straightLineTime)
        {
            myG.drawLine(xForStraightLine, yForStraightLine, e.getX(), e.getY());
        }
        if(dragOvalTime)
        {
            x2=e.getX();
            y2=e.getY();
            xSize = Math.abs(x2-x1);
            ySize = Math.abs(y2-y1);

            if(x2>x1 && y2>y1) //if top left to bottom right
            {
                myG.drawOval(x1,y1,xSize,ySize);
            }
            if(x2<x1 && y2<y1) //if bottom right to top left
            {
                myG.drawOval(x2,y2,xSize,ySize);
            }
            if(x2<x1 && y2>y1) //if top right to bottom left
            {
                myG.drawOval(x2,y1,xSize,ySize);
            }
            if(x2>x1 && y2<y1) //if bottom left to top right
            {
                myG.drawOval(x1, y2, xSize, ySize);
            }

            /* There are 4 possible cases, originally it draws on the initial press point.
             * Judge each of the cases be seeing which coordinates are larger than others, to know whether to start on draw or end point.
             */
        }
        if(dragRectTime)
        {
            x2=e.getX();
            y2=e.getY();
            xSize = Math.abs(x2-x1);
            ySize = Math.abs(y2-y1);

            if(x2>x1 && y2>y1) //if top left to bottom right
            {
                myG.drawRect(x1,y1,xSize,ySize);
            }
            if(x2<x1 && y2<y1) //if bottom right to top left
            {
                myG.drawRect(x2,y2,xSize,ySize);
            }
            if(x2<x1 && y2>y1) //if top right to bottom left
            {
                myG.drawRect(x2,y1,xSize,ySize);
            }
            if(x2>x1 && y2<y1) //if bottom left to top right
            {
                myG.drawRect(x1, y2, xSize, ySize);
            }

            /* There are 4 possible cases, originally it draws on the initial press point.
             * Judge each of the cases be seeing which coordinates are larger than others, to know whether to start on draw or end point.
             */
        }
    }

    public void mouseDragged(MouseEvent arg0) 
    {
        if(ovalTime)
        {
            if(emptyTime)
            {
                myG.drawOval(arg0.getX(),arg0.getY(),penSize,penSize);
            }
            if(filledTime)
            {
                myG.fillOval(arg0.getX(),arg0.getY(),penSize,penSize);
            }
        }
        if(rectTime)
        {
            if(emptyTime)
            {
                myG.drawRect(arg0.getX(),arg0.getY(),penSize,penSize);
            }
            if(filledTime)
            {
                myG.fillRect(arg0.getX(),arg0.getY(),penSize,penSize);
            }
        }
        if(sprayCanTime)
        {
            myG.drawOval(arg0.getX(),arg0.getY(),penSize,penSize);
            myG.fillOval(arg0.getX(),arg0.getY(),penSize,penSize);
        }

        if(freeTime)
        {
            myG.drawLine(arg0.getX(), arg0.getY(), x, y);
            x = arg0.getX();
            y = arg0.getY();
        }

    }

    public void mouseMoved(MouseEvent arg0) 
    {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:42:14.180

`Graphics`永远不要保留对您没有自己创建的任何上下文的任何引用

这...

```
myG = c1.getGraphics();
myG2 = c2.getGraphics(); 
```

不是如何执行自定义绘画。除了`getGraphics`可以返回的事实之外`null`，这些只是最后一个绘制周期的“快照”。此外，没有任何保证这些方法返回的引用将在下一个绘制周期中使用相同的引用。

我不确定您为什么使用 AWT 而不是 Swing，但这是您的选择。

创建自己的自定义版本`Canvas`并覆盖它的`paint`方法。`Graphics`使用过去的上下文执行此方法中的所有绘画。别忘了先打电话`super.paint`！

有关详细信息，请阅读[AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:13:14.010

有趣的节目。试试这个。

改变：

```
c2 = new Canvas(); 
```

到：

```
c2 = new Canvas() {
    public void paint(final Graphics g) {
        drawRainbow(g);
    }
}; 
```

在 drawRainbow(Graphics g) 中使用传递的图形对象 g 并删除对 drawRainbow() 的任何调用，如下所示：

```
public void drawRainbow(final Graphics g) {
...
   g.setColor(Color.getHSBColor(num1, num2, num3));
   g.drawLine(x11, y11, x22, y22);
... 
```

EDIT: Heed the advice concerning Graphics in the answer you accepted.

# php - 动态删除一个单元格/div后如何移动单元格/div内容？

> ID：15236217
> 
> 赞同：0
> 
> 时间：2013-03-05T23:35:29.630
> 
> 标签：php, html

我正在制作一个演示餐厅菜单订单页面。每个选定的菜单项都被推入一个会话数组（仅存储项目 ID）。然后我显示订单以进行确认。

我通过从数据库中提取行来动态创建和填充具有菜单项详细信息的 div，其中 1 行进入 1 个 div（彼此堆叠）。在每 4 个项目之后，我开始一个新的“列” - 一个浮动在第一个“列”/包含 div 旁边的包含 div，接下来的 4 个项目放在这个包含 div 中。每 12 个项目后，我开始一个新页面（比如开始一个新表）。所以页面上的排列是 3 列，每列 4 行。

我提供了从订单中删除菜单项的选项。我可以从数组中删除项目，但是当页面重新加载时，项目所在的位置有一个空白空间，并且我用于跟踪每 4 行或 12 行的计数系统不会重置，因此添加新项目或删除项目会搞砸我设置的 4 行系统。

有没有办法在每次删除项目时“移动”项目/重新填充 div，以便没有空格并且每个“列”总是最多 4 个项目？

我也可以使用一个实际的表格来显示项目（而不是 div），如果这样可以更容易地“移动”项目。

我是 PHP 新手，所以我编写的代码可能不是最好的方法（我还在学习！）

```
<section data-state="order">

<div class="pageContainer">

    <div class="menuColumn">
        <?php   
            // loop through session order array                                                 
            foreach ($_SESSION['order'] as $key => $value) {

                // get info from db for items in array
                $query = "SELECT id, name, price, image FROM tblMenuItems WHERE id = '$value'";

                $result = @mysqli_query($connect_db,$query);        

                while ($row = mysqli_fetch_row($result)) {
                    // store data in variables
                    $id = stripslashes($row[0]);
                    $name = stripslashes($row[1]);
                    $price = stripslashes($row[2]);
                    $image = stripslashes($row[3]);

                    $total += $price;

                    // after 4 items, start a new 'column'                              
                    if ($key % 4 == 0 && $key != 0) {
                        echo '
                        </div> <!-- end .menuColumn -->

                        <div class="menuColumn">
                        ';
                    }

                    // after 12 items, start a new section (page)
                    if ($key % 12 == 0 && $key != 0) {
                        echo '
                            </div> <!-- end .menuColumn -->
                            </div> <!-- end .pageContainer -->
                            </section> <!-- end section -->

                            <section data-state="order">
                            <div class="pageContainer">
                            <div class="menuColumn">';
                    }

                    // display ordered items and info on page
                    echo '
                    <form action="#" method="post">
                        <div class="menuItem">
                            <img class="imgMenuItem" src="images/'.$image.'" alt="Menu Item">
                            <h4>'.$name.'</h4> 
                            <h5>$'.$price.'</h5>
                            <input type="submit" name="btnRemoveItem" class="btnRemoveItem" value="Remove Item">    
                            <input type="hidden" name="remove" value="'.$id.'">           
                        </div> <!-- end .menuItem -->
                    </form>

                    <br class="clear">
                    ';
                } // end while

            } // end foreach 

        ?>

    </div> <!-- end .menuColumn -->

</div> <!-- end .pageContainer --> 
```

要从数组中删除一个项目，我在页面顶部有这个：

```
<?php
if (isset($_POST['btnRemoveItem'])) {       
    // remove menu item from array (including all multiples)
    foreach (array_keys($_SESSION['order'], $_POST['remove']) as $remove) {
        unset($_SESSION['order'][$remove]);         
    }
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:00:56.947

而不是`unset()`您可以将键设置为`null`，当您遍历数组时检查它是否为空并在该位置呈现一个空白 div。

# macos - Mac - 沙盒 - 无法生成开发者收据

> ID：15236219
> 
> 赞同：1
> 
> 时间：2013-03-05T23:35:33.413
> 
> 标签：macos, cocoa, sandbox, receipt

使用 Xcode 4.6、OS X 10.8.2 构建 Cocoa 应用程序。沙盒/权利/代码签名已启用。

（这是对 Mac App Store 上现有应用程序的更新。iTunes Connect 已使用最新版本信息进行更新，正在等待应用程序的上传。）

我正在尝试生成开发者收据，以便为 Mac App Store 更新它。

这是我所做的：

*   我在 Xcode 中构建了应用程序。在 Finder 中，我导航到 MyProject/build/MAS/Debug 并双击那里的应用程序。

*   在控制台中，我看到我的应用程序（正确）找不到收据，因此它以代码 173 中止。

*   在这个阶段，根据 Apple 的文档，我应该看到一个 iTunes Store 授权对话框，或者应该在我的应用程序包中放置一个收据。两者都不会发生。

我的控制台日志显示：

```
App Log Error: MAS receipt file not found.

com.apple.SecurityServer[15]: Session 100127 created

_softwareupdate[4510]: audit warning: allsoft

_softwareupdate[4511]: audit warning: closefile /var/audit/xxx.xxx

_softwareupdate[4512]: audit warning: soft /var/audit

App Log Error: Exiting (173)

kernel[0]: Sandbox: sandboxd(4513) deny mach-lookup com.apple.coresymbolicationd

sandboxd[4513]: ([4502]) MyAppName(4502) deny file-write-data /Users/me/Library/Preferences/com.apple.security.plist 
```

我努力了：

*   修复权限和磁盘修复

*   重新启动 Mac

*   以安全模式重新启动，然后重新启动

*   在 /Library/Caches/com.apple.coresymbolicationd 删除一个（1.31GB !! 文件夹）

无论如何，我不断得到：

```
**kernel[0]: Sandbox: sandboxd(4513) deny mach-lookup com.apple.coresymbolicationd** 
```

我也间歇性地看到这个：

```
AM mdworker[1375]: Unable to talk to lsboxd 
```

有人可以建议吗？

# php - 将 db 备份为 xml 时出现 mysqldump 问题

> ID：15236222
> 
> 赞同：0
> 
> 时间：2013-03-05T23:35:51.283
> 
> 标签：php, mysql, xml, shell, mysqldump

我正在尝试备份我的一个数据库，`mysqldump`并尝试将其导出到一个已经存在的 xml 文件中。这是我所拥有的：

```
<?php
$dbUser = 'user';    // db User
$dbPass = 'pass';    // db User Password
$dbName = 'db';      // db name
$dest   = $_SERVER['DOCUMENT_ROOT'] . 'backup'; // Path to directory

class MySQLDump {
private $cmd;

function MySQLDump($dbUser,$dbPass,$dbName,$dest) {
    $fname = $dbName.'.xml';
    $this->cmd='mysqldump -X -u'.$dbUser.' -p'.$dbPass.' '.$dbName.
        ' >'.$dest.'/'.$fname;
}

public function backup() {
    system($this->cmd, $error);
    if($error) {
        trigger_error ('Backup failed: ' . $error . '<br />Attempted: ' . $this->cmd);
    }
}
} // end class def

$mysqlDump = new MySQLDump($dbUser, $dbPass, $dbName, $dest);  
$mysqlDump->backup();
?> 
```

这总是会产生`backup`函数中抛出的错误。以下是`$cmd`' 的输出示例：

```
mysqldump -X -udan -pdanPass danDB >/var/www/prod/dan/web/backup/danDB.xml 
```

知道出了什么问题吗？我从来没有真正使用过`mysqldump`，所以我不确定我是否正确地接近这个。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:42:32.200

尝试在`-u`和之间添加一个空格`$dbUser`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:46:54.757

根据[mysqldump 是否返回状态？](https://serverfault.com/q/249853/69499)出事了，是的。我们不能说是警告还是错误，因为您没有共享返回码。

除此之外，您还可以通过查看命令返回的[STDERR 输出](https://stackoverflow.com/questions/6364180/stderr-what-is-it-what-are-its-common-uses)轻松了解究竟出了什么问题。`mysqldump`例如，您可以将其输入`database.err`：

```
mysqldump -X -udan -pdanPass danDB >/path/to/backup/danDB.xml 2>database.err
                                                              ^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-19T15:49:23.677

这对我有用

```
mysqldump --user=xxx --password=xxx  databasename  --xml > file.xml 
```

# c++ - 如何在 Qt 中删除绑定的对象？

> ID：15236223
> 
> 赞同：1
> 
> 时间：2013-03-05T23:35:54.017
> 
> 标签：c++, qt, signals-slots, qt5

有两个类：`Widget`和`Worker`。这是一个示意图代码。

```
class Widget
{
    Worker *m_worker;
    QTextEdit *m_edit;
public:

    Widget():m_edit(new QTextEdit){}

   ~Widget()
   {
       m_worker->ShouldStop = true;
       delete *m_worker;
   }

   void doWork()
   {
      m_worker = new Worker;

      if (!worker->doWork())
          m_edit->setText("failed");
   }
}

class Worker
{

    Worker() : ShouldStop(false){}

public:
    bool ShouldStop;

    bool doWork()
    {
        while(true && !ShouldStop)
        {
            QThread::sleep(1);
            QApplication::processEvents();
        }

        //consider the work undone if a stop was forced
        if (ShouldStop)
            return false;
    }
} 
```

在调用方法`doWork()`中的`Widget`执行循环之后。然后关闭一个小部件，并在其中一次调用期间调用它的析构函数。然后执行然后返回到. 它现在检查并返回的并尝试向. 但是对象已经死了。`doWork()``Worker``processEvents()``doWork()``Worker``ShouldStop``doWork()``Widget``m_edit``Widget`

问题：

1.  如何干净地删除 Worker？
2.  避免这种相互作用的最佳设计是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:26:20.230

理想情况下，工作线程应该只通过信号和槽机制返回数据，而不是直接访问原始对象。实际上创建一个线程并避免调用`QApplication::processEvents()`是避免问题的第一种方法。

此外，当你想在一个新线程中启动一个工作线程时，你应该考虑使用这样的设计。与其继承 QThread，不如创建一个通用的 QThread 并为其分配一个 QObject，如下所示：

```
Worker *worker = new Worker;
QThread *workerThread = new QThread(this);

connect(workerThread, &QThread::started, worker, &Worker::doWork);
connect(workerThread, &QThread::finished, worker, &Worker::deleteLater);
worker->moveToThread(workerThread);

// Starts an event loop, and emits workerThread->started()
workerThread->start(); 
```

如果您使用 Qt 5，请考虑围绕此模式重构您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T09:47:44.887

@Alex 的回答绝对是 q2 的必经之路。他只是忘了提及如何进行删除（q1）。假设`Widget`创建了 object `workerThread`，那么这是必要的：

```
 ~Widget(){
   if(workerThread->isRunning()){
         workerThread->terminate(); <--- this line, right there
         workerThread->wait(): 
   }
 ...
 } 
```

为什么？因为删除一个`QThread`只是删除线程对象[但不会停止线程运行，并且可能会使应用程序崩溃](http://doc.qt.digia.com/stable/qthread.html#dtor.QThread)。请注意，如果您正在使用

`connect(workerThread, &QThread::finished, worker, &Worker::deleteLater);`

`worker`正如 Alex 所提到的，那么在调用 to 之后访问是不安全的`terminate`，因为它会触发`finished()`信号，执行`worker->deleteLater`，并最终删除`worker`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T23:42:28.860

您可以让 Widget 使用信号通知 Widget 的所有者为 Widget 启动 Worker。

Owner 拥有 Widget 和 Worker。Widget 告诉 Owner 触发了某些事情，而 Owner 负责确定 Worker 的 doWork() 是正确的响应，并负责管理 Worker 和 Widget 的生命周期。Worker 和 Widget 互不了解，但 Owner 可能会将它们的一些信号和插槽连接在一起。

# php - PHP 文件操作

> ID：15236226
> 
> 赞同：0
> 
> 时间：2013-03-05T23:36:03.540
> 
> 标签：php, file, fopen, fwrite, chmod

```
<?
if(isset($_POST['Submit']))
{
   $password=$_POST['newpwd'];
   if(!empty($password))
   {
    $old_file = "password.txt";
    chmod($old_file,0777);
    $fh = fopen($old_file, 'w') or die("Can't open file");
    fwrite($fh,$password);
    fclose($fh);
    header("location:index.php");
  }
  else
  {
    echo "Please enter a valid password!";
  }
}
?> 
```

以上代码用于重置密码。更改密码时出现“无法打开文件”错误。chmod 操作也不起作用。文件权限如下：

```
-rwxr-xr-x 1 root root    4 Mar  5 13:55 password.txt 
```

我尝试取消链接以删除文本文件，它也失败了。

当我手动删除文本文件，然后将文件权限设置为 777 时，上面的代码正在工作。

任何帮助都应该不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:39:14.293

该脚本`root`由所有者拥有并且只能由所有者写入。这意味着没有其他人`root`可以更改其权限。您必须`sudo chown`手动`sudo chmod`更改文件的所有者或权限。

# magento - 在下拉列表中设置用户国家

> ID：15236228
> 
> 赞同：0
> 
> 时间：2013-03-05T23:36:19.693
> 
> 标签：magento

我有一项任务要求我为所有没有设置国家/地区的客户设置一个国家/地区（这是由以前的客户导入引起的错误），用于运输/账单地址。该国家现在可用于默认帐单/送货地址。

但是，在右侧，没有填充国家下拉列表。我一生都无法弄清楚如何更新它。它是否属于与送货/账单地址无关的不同地址？

截图：[http ://cl.ly/image/2G1s261v2a2V](http://cl.ly/image/2G1s261v2a2V)

这是我用来批量更新默认国家/地区的代码。

```
$customers = Mage::getResourceModel('customer/customer_collection');

foreach ($customers as $customer) {

    // get individual customer
    $customer = Mage::getModel('customer/customer')->load($customer->getId());

    // now get their address
    $address = Mage::getModel('customer/address');

    $address
        ->setCustomerId($customer->getId())
    ;

    $address_data = $address->getData();

    if ( !isset($address_data['country_id']) || $address_data['country_id'] == 'United States' ) {
        $address->setCountryId('US');
    }

    try {
        $address->save();
    } catch(Exception $e) {
        Mage::log(json_encode($e->getMessage()));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:56:51.623

```
 $default_country_id = "US";

   /*Loads Customer Collection*/ 
   $customers = Mage::getResourceModel('customer/customer_collection');
   foreach($customers as $customer):
      $customerDetails = Mage::getModel('customer/customer')->load($customer->getId());
      /*Loads customer addresses*/ 
      foreach ($customerDetails->getAddresses() as $address): 
        /*If country is not set then it will set the default country to the address*/
        if(!$address->getData('country_id')){
            $address->setCountryId($default_country_id)->save();
        }
      endforeach;
   endforeach; 
```

# python - 从列表中选择特定整数

> ID：15236232
> 
> 赞同：1
> 
> 时间：2013-03-05T23:36:41.167
> 
> 标签：python

我希望能够从列表中提取最大的奇数。到目前为止，我已经能够根据用户输入创建一个列表，但我无法弄清楚用于提取最大奇数的编码。

这是我到目前为止所拥有的

```
numberlist=[]
for iteration in range(10):
    number = int(raw_input('Give an integer'))
    numberlist.append(number)
print max(numberlist) 
```

附加信息：使用 Pythong 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:42:20.607

您可以使用生成器理解最轻松地做到这一点。

```
max(x for x in numberlist if x&1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:43:45.693

可能不是最有效的，但是..

```
numberlist=[1,2,3,4,5,6,7,8,9,10,11,23,17,19]
numerList = filter(lambda x: x %2 > 0, numberlist);
print max(numerList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:43:03.470

只需使用列表推导来迭代列表，并在调用 max() 时只保留奇数：

```
numberlist=[]
for iteration in range(10):
    number = int(raw_input('Give an integer'))
    numberlist.append(number)
print max(n for n in numberlist if n & 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:43:08.257

您可以使用函数`filter`从列表中获取赔率。`max`

```
print max(filter(lambda x: x % 2 == 1, numberlist)) 
```

过滤器使用 lambda 函数仅抓取奇数。

# bash - 使用 sed 用带斜线的定义变量替换带有空格的文本

> ID：15236237
> 
> 赞同：13
> 
> 时间：2013-03-05T23:37:04.443
> 
> 标签：bash, unix, sed

我正在尝试使用 sed 用已定义变量的空格替换一行。

例如，

我想用 $lan 和 lan="~/afile.py 替换“哑字符串”

我以为这条线是

```
sed "s/a dumb string/$lan/g" file.txt 
```

但这会在 file.txt 中将“哑字符串”部分留空。

我的问题似乎很简单。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T23:59:55.920

我确定因为我的@lan 变量中有斜杠，所以我需要使用 sed 命令：

例如

```
sed "s:a dumb string:$lan:g" file.txt 
```

这可能是一个新手错误，但我对 sed 不是很熟悉。感谢您的帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-06T00:00:21.503

`sed`不知道您正在传递一个变量——它将被解释为您正则表达式的另一部分。如果您的替换包含斜杠，最简单的做法是使用备用分隔符字符，如下所示：

```
sed "s|a dumb string|$lan|g" file.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-13T16:54:09.597

有时搜索字符串中的空间不起作用，因此需要在 centos 中使用 [[:space:]]。

```
 sed -i 's/User[[:space:]]daemon/User apache/' httpd1.conf 
```

# haskell - Haskell 软实时的当前状态

> ID：15236238
> 
> 赞同：31
> 
> 时间：2013-03-05T23:37:05.287
> 
> 标签：haskell, garbage-collection, real-time

我正在考虑将 Haskell 用于软实时应用程序。我可能会使用演员，因为它的价值。我想知道是否有人对 Haskell 的当前实时状态有所了解。具体来说，GC 暂停应用程序的问题。我在 Google 上进行了广泛的搜索，发现了 2 多年前的大量讨论，但没有最新的。以下是我找到的一些参考资料：

[将 Haskell 用于大型实时系统：如何（如果？）？](https://stackoverflow.com/questions/1263711/using-haskell-for-sizable-real-time-systems-how-if)

[Haskell 对游戏等软实时应用程序的 GC 性能如何？](https://stackoverflow.com/questions/4482987/how-about-haskells-gc-performance-for-soft-realtime-application-like-games)

我读过的许多旧资料表明，情况（当时）被认为正在改善。有吗？

即使在 2 多年前，也有一些评论表明 Haskell 应用程序可以调整为可靠地将 GC 暂停时间控制在一两毫秒。这看起来很现实吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-06T09:39:10.483

所以对“实时”的关注是 GC 集合引入的延迟。

GHC 使用多核垃圾收集器（并且有一个带有[每线程本地堆](http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/local-gc.pdf)[的分支](http://hackage.haskell.org/trac/ghc/wiki/Status/May11)）。最初开发是为了通过降低频繁停止世界同步的成本来提高多核性能（每个核心[可以独立收集](http://hackage.haskell.org/trac/ghc/blog/2010/9#new-gc-preview)），出于同样的原因，这恰好也有利于软实时。然而，截至 2013 年，per-thread local heap 尚未合并到 main GHC 中，尽管并行 GC 已经合并。

对于游戏，您应该能够通过使用线程来利用这一点，从而减少对 stop-the-world 本地集合的需求。

对于长期存在的对象，在全局堆中，您仍然冒着一些（毫秒）GC 的风险。但是，使用例如[ThreadScope](http://www.haskell.org/haskellwiki/ThreadScope#Features)进行仔细分析将消除这里的障碍。我已经看到通过 GHC 管理的网络堆栈流式传输实时 1080p 视频，而没有明显的 GC 暂停。

即使没有这些调整，事情“可能会奏效”。Frag 几乎不需要优化，并且在将近 10 年前的现在是软实时的。

最后，还有许多工具和 GHC 标志可以提高性能：

*   [ghc-gc-tune](http://hackage.haskell.org/package/ghc-gc-tune) - 获得最佳 GC 标志的图形分解
*   [关于吞吐量的建议](https://stackoverflow.com/a/3172704/83805)
*   [垃圾收集](http://www.haskell.org/ghc/docs/latest/html/users_guide/runtime-control.html#rts-options-gc)选项- （-Iseconds 可能很有用）

然后是编码：使用未装箱的类型（无 GC），最小化惰性结构分配。以打包形式保存长期存在的数据。测试和基准测试。

我想你会没事的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T01:01:34.867

你见过这些：

*   [Haskell 中垃圾收集的当前状态（2012 年 7 月）](http://comments.gmane.org/gmane.comp.lang.haskell.cafe/99583)
*   另外，请查看[Lambda the Ultimate 的以下讨论](http://lambda-the-ultimate.org/node/4268)

另外，我建议联系[Multicore Garbage Collection with Local Heaps](http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/local-gc.pdf)论文 (ISMM 2011) 的作者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:18:43.610

我没有遇到过 GC 暂停的问题，只要你不为所有事情都使用惰性列表，你就不应该产生太多垃圾。

然而，对于多线程应用程序来说，天空并不是那么明亮。GHC 仍然没有具有线程优先级的调度程序，如果您使用线程进行繁重的后台处理，您很容易使您的事件循环饿死。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-16T19:14:48.470

GHC 8.2.1 有一个名为 Compact Regions 的功能可能会有所帮助。

据我了解，这似乎是一种半手动的内存管理。您可以将长期存在的数据存储在 Compact Region 中，而垃圾收集器不会对其进行跟踪。如果对 Compact Region 中的任何内容有任何引用，则整个 Compact Region 都会保持活动状态。一旦没有对该区域中任何内容的引用，它将被释放。如果您对区域的内容进行功能更新，您可以在新区域中重新分配它，旧区域将被释放。

[http://ezyang.com/compact.html](http://ezyang.com/compact.html)
[https://hackage.haskell.org/package/compact-0.1.0.1/docs/Data-Compact.html](https://hackage.haskell.org/package/compact-0.1.0.1/docs/Data-Compact.html)

# angularjs - AngularJS - 通过控制器与视图完成时路由不同

> ID：15236241
> 
> 赞同：1
> 
> 时间：2013-03-05T23:37:27.260
> 
> 标签：angularjs

我有以下路线

```
$routeProvider
.when('/users/', { 
    auth: true,
    required: ['user_read'],
    templateUrl: '/js/app/views/templates/user/users.html',
    controller: 'UsersController'
}) 
```

在我的 LoginController 中，如果登录成功，我正在尝试使用将用户重定向到该路径

```
$location.path('/users'); 
```

我还有一个 rootScope 监听器来检查权限

```
$rootScope.$on('$routeChangeSuccess', function (current) {
    console.log($route.current.$route);
} 
```

为什么最后一个控制台日志只显示

```
Object
    redirectTo: "/users/"
    __proto__: Object 
```

当我从控制器进行重定向时？

但是，如果我在模板上有一个链接，它会显示

```
Object
    auth: true
    controller: "UsersController"
    reloadOnSearch: true
    required: Array[1]
    templateUrl: "/js/app/views/templates/user/users.html"
    __proto__: Object 
```

底部输出是我期望的输出。

谢谢，
三通

# django - 使用 Django 的密码散列器使用已经散列的密码

> ID：15236246
> 
> 赞同：0
> 
> 时间：2013-03-05T23:37:56.160
> 
> 标签：django, django-authentication

我有一个 API，设备对其进行身份验证以接收有时间限制的身份验证令牌。这些设备将有一个“记住我的密码”复选框，因此此身份验证可以自动进行。

我不会在设备上以明文形式存储用户密码。

我不能让令牌过期时间长，因为这些设备是展示性的和面向客户的。最终，令牌将在与客户一起使用期间过期，并且设备将无法发出请求或必须弹出身份验证对话框。对此有可接受的解决方法（例如，令牌持续 2 天；每天早上都需要重新授权），但我首先想看看避免将这种复杂性暴露给设备的选项。

我想尝试在设备上以加盐和散列形式¹存储密码。此散列密码将在身份验证请求中提交。在服务器端，API 身份验证依赖于 Django 的 contrib.auth。传统的密码工作流程是对请求密码进行哈希处理，并将其与存储的哈希值进行比较。因为我有一个已经散列的请求密码，所以在比较之前我需要*重新*散列存储的密码。

我尝试了这个解决方案，但似乎需要修改每个密码哈希。我仍然需要在网站的非 API 部分支持标准密码验证，所以我最终会为我想使用的每个哈希算法加倍哈希：`BCryptPasswordHasher`/`PreHashedBCryptPasswordHasher`等等。虽然我现在只想使用一个，但它是我不想让其他开发人员在尝试添加或更改哈希时必须弄清楚这种情况。

实现“预散列”的另一个选择是修改 django.contrib.auth，但我不希望维护它的一个分支。

我确定其他人之前已经解决了这个问题。我正在寻找关于如何在不削弱常规比较的情况下找到一个点来影响预哈希密码比较的具体建议，以及关于一般解决方案的建议。如果您有解决安全问题且明智的替代方法，我将很高兴听到它。

干杯

1.  这不会阻止有权访问哈希的顽皮人针对 API 进行身份验证，但它会保护在许多网站上使用同一个密码的用户不会被更广泛地暴露。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:15:37.857

让我看看我是否理解你的意图。您有一个 API，您可以使用 Tokens 对其进行身份验证。Token 是在会话开始时通过密码认证获得的。您希望启用一种“记住”密码的方法，这样用户就不必每次都登录，如果这是他们喜欢的方式，但您不想在设备中以纯文本形式存储密码。那是对的吗？

如果用户选择“记住我”，最简单的方法是使令牌永久化或有很长的有效期。这样，您可以在设备上存储一种不是密码的身份验证形式。

只要您还执行以下操作，这应该可以正常工作：

*   当用户更改密码时，使服务器端的所有令牌失效。
*   为每个设备生成令牌，向用户提供使用可在其个人资料中撤销的令牌的应用程序列表。

如果您使用双哈希密码，无论如何您基本上都是在创建一个令牌，但更糟糕的是因为它与密码相关联，如果令牌被泄露，则必须更改密码。

# typescript - 为什么 Typescript 定义文件不保护成员？

> ID：15236247
> 
> 赞同：0
> 
> 时间：2013-03-05T23:38:06.707
> 
> 标签：typescript

如果我将它*保存*为**`test.ts`**. 这是预期的，因为`cantSeeMe`它是隐藏的（`export`如果我希望它在模块之外看到，我需要它。

但是，如果我保存文件，因为**`test.d.ts`**它编译得很好。我也希望它不会编译。

为什么 Typescript 在编译为定义文件时不遵循相同的封装规则？

```
module blah {
  interface cantSeeMe { a: any; }
}

var variable: blah.cantSeeMe; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T00:15:42.737

定义文件中的`export`关键字是可选的，因为 .d.ts 文件的全部内容是描述您的*公共*表面积。

# java - 从 JSONArray 中检索特定元素

> ID：15236248
> 
> 赞同：1
> 
> 时间：2013-03-05T23:38:09.250
> 
> 标签：java, arraylist, arrays

如何从以下检索“B2”？JSON数组？

```
 JSONArray o = new JSONArray();
    for(int i = 0; i < 3; i++) {
        List<Object> list = new ArrayList<Object>();
        list.add("B" + i);
        list.add(100+i);
        o.put(list);
    } 
```

我认为它类似于以下内容，尽管这根本不正确。

```
o.get(2)[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:53:46.507

问题是您正在使用[`put()`](http://www.json.org/javadoc/org/json/JSONArray.html#put%28java.util.Collection%29)，其中：

> 在 JSONArray 中放置一个值，**该值将是一个**从 Collection 生成的 JSONArray。

因此，这会将一个数组添加到您的数组中。像这样的东西：

```
[
  [
    "B1", "B2"
  ]
] 
```

如果这是有意的，那么您首先需要获取内部数组，然后是第二个条目：

```
o.getJSONArray(0).getInt(1); 
```

否则，如果您想用 中的条目*填充*现有的，您将需要使用[-constructor](http://www.json.org/javadoc/org/json/JSONArray.html#JSONArray%28java.util.Collection%29)。`JSONArray o``List`[`JSONArray(Collection)`](http://www.json.org/javadoc/org/json/JSONArray.html#JSONArray%28java.util.Collection%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:57:39.213

您已经创建了一个二维数组。以下代码片段应该可以工作：

```
o.getJSONArray(2).getString(0); 
```

# objective-c - Xcode 4.6 将选定的行传递给新的 UItableview

> ID：15236249
> 
> 赞同：0
> 
> 时间：2013-03-05T23:38:17.353
> 
> 标签：objective-c, xcode, uitableview

我正在使用`xcode 4.6`创建一个 iPhone 应用程序。我有三个`ViewControllers`A、B 和 C。它们都是 tableview 控制器。`ViewcontrollerA`我希望用户在和中选择多行`ViewcontrollerB`。然后`ViewControllerC`将显示所选项目。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:36:39.807

首先，您应该`[self.tableView setAllowsMultipleSelection:YES]`为所有表格视图进行设置。从文档中，

`If you call indexPathsForSelectedRows, you can get the index paths that identify the selected rows.`

假设你的 C 中有一个 ViewControllerA/B * 属性，你可以这样做：

在 ViewControllerC.m 中：

```
- (void)makeCellsSelected
{
    for (NSIndexPath *indexPath in [self.viewControllerA indexPathsForSelectedRows]) {
        [[self.tableView cellForRowAtIndexPath:indexPath] setSelected:YES];
    }
} 
```

编辑更容易如下：ViewControllerB.m：

```
ViewControllerC *vcC = [ViewControllerC alloc] init];
    for (NSIndexPath *indexPath in [self.tableView indexPathsForSelectedRows]) {
        [[vcC.tableView cellForRowAtIndexPath:indexPath] setSelected:YES];
    }

[self.navigationController pushViewController:vcC animated:YES]; 
```

所以你的 C 会出现已经选择的行

# node.js - 玉多个模板文件

> ID：15236255
> 
> 赞同：0
> 
> 时间：2013-03-05T23:38:38.933
> 
> 标签：node.js, express, pug

我真的是 Node 新手，正在玩 Express 和 Jade，我所遵循的教程已经过时，我似乎无法弄清楚如何做到这一点。

在我的 app.js 文件中，我声明了以下路线：

```
app.get('/helloworld', function(req,res) {
    res.render('tasks/helloworld.jade', { title: 'Hello World!' });
}); 
```

所以对于我的观点，我有以下几点

**布局.jade**

```
doctype 5
html
 head
  title= title
  link(rel='stylesheet', href='http://twitter.github.com/bootstrap/assets/css/bootstrap.css')
 body
  section.container!= body 
```

尝试使用引导 css

然后**是任务/helloworld.jade**

```
extends ../layout

body
 h1 Hello World 
```

但是，这似乎并没有产生我认为应该的结果。如果我删除`extends ../layout`模板渲染但没有任何标题。如果我把它留在里面，我会收到一条错误消息`body is not defined`

知道如何让它正确渲染吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:46:58.347

在翡翠中，您使用块来扩展模板。试试这个：

布局.jade：

```
doctype 5
html
 head
  title= title
  link(rel='stylesheet', href='http://twitter.github.com/bootstrap/assets/css/bootstrap.css')
 body
   section.container
      block content 
```

helloworld.jade：

```
extends ../layout

block content
 h1 Hello World 
```

这将有效地用`block content`提供的新内容替换布局中的任何内容，在这种情况下`h1 Hello World`。

编辑：我`section.container`在布局中添加了一个，因为后来我意识到我认为您正在尝试将所有内容都包含在正文中。如果这不是您想要做的，您可以删除该行，但如果您这样做，请确保您修复缩进，因为玉关心这一点。

# opengl - 我不明白渲染到纹理教程 Apple 提供商的一部分

> ID：15236257
> 
> 赞同：0
> 
> 时间：2013-03-05T23:38:47.500
> 
> 标签：opengl, opengl-es, opengl-es-2.0

[我从这里](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_offscreen/opengl_offscreen.html#//apple_ref/doc/uid/TP40001987-CH403-SW10)不明白这个特定的部分

> 11 将内容渲染到纹理。在渲染内容之前，您必须确保将不同的纹理绑定到帧缓冲区对象或禁用纹理。如果您使用当前绑定和启用的相同纹理渲染到帧缓冲区对象纹理附件，则结果未定义。

首先，我刚刚在几步之前将纹理绑定到帧缓冲区`glFramebufferTexture2DEXT`，现在如何解除绑定？最重要的是，如果我必须在下一条指令中解除绑定，为什么我必须首先绑定？或者我应该用`glBindTexture(GL_TEXTURE_2D, texture);`. 如果我没有其他纹理怎么办？使用安全`glBindTexture(GL_TEXTURE_2D, 0);`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:53:23.950

他们正在讨论在初始化所有内容*后*在帧缓冲区之间切换时需要做什么。

但是，是的，您确实使用 glBindTexture( GL_TEXTURE_2D, 0 ) 来取消绑定当前纹理。在帧缓冲区之间切换时，请参阅这篇文章以获取绑定和解除绑定纹理的另一个示例：

[http://www.flashbang.se/archives/48](http://www.flashbang.se/archives/48)

# java - Maven测试组装jar

> ID：15236259
> 
> 赞同：0
> 
> 时间：2013-03-05T23:39:11.297
> 
> 标签：java, maven, integration-testing

单元测试很棒，但测试的最后一步是在测试环境中运行和验证组装好的 jar：

```
java -Dcom.foo.Environment=TEST -jar Foo-App-jar-with-depdendencies.jar 
```

到目前为止，我在 Surefire 和 Maven 插件中发现的内容假设您使用的是单独的测试资源，而不是生产产品并验证完成的项目本身。什么是在 Maven 中实现这一目标的常规方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:02:11.613

您所描述的是集成测试，并且由 maven 使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/)支持，这是在[包生命周期阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)之后，这意味着 jar-with-dependencies 的打包已经完成。

这可以通过使用一个单独的模块来完成，您可以在其中使用 maven-execute-plugin 来执行您的 jar-with-dependencies。

# web-services - Web 服务中的超时和错误处理 - 架构方法

> ID：15236264
> 
> 赞同：0
> 
> 时间：2013-03-05T23:39:40.373
> 
> 标签：web-services, architecture

我正在开发 Web 服务，并且对超时/异常处理方法有疑问。

我有一个 web 服务 (WS1) 和一个客户端 C。客户端从用户接收一些操作并调用 WS1 进行一些不需要向用户提供响应的操作。

我可以通过 2 种可能的方式设计应用程序中的错误处理 -

1.  从C调用WS。如果调用成功，WS会返回一个token。如果 C 出于任何原因（可能是 WS 中的故障或网络超时）没有获得令牌，它将存储在数据库中，并且某些作业将在稍后重试该操作。

2.  从 C 调用 WS 并结束帖子。如果有任何问题，WS 将 ping 回 C（在单独的调用中）。如果没有 ping 回，则假设事务已通过。

一般来说，有哪些选项可以确保 WS 调用成功。如果事务在第一次尝试中失败，有哪些方法可以重试操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:00:15.770

这两种方法都是有效的。你所拥有的只是一个同步操作和异步操作。例如，sockets 这两种模式都可以使用多年；例如文件读取功能也是如此。

选择归结为这一点 - 您的客户端程序是否有能力等待操作完成。如果可以，同步操作更易于编程。否则使用回调做异步模型。

就重试而言 - 这又取决于。重试多长时间？许多程序只是在失败时循环尝试 2-3 次。如果您的重试是在特定时间后重试的类型，那么您必须在某处存储有关您尝试执行的操作的信息。那个地方可能是程序内存，或者一些永久存储。同步和异步模式都需要用于重试的信息存储。异步更是如此，因为当您收到回电时，您需要检查您的商店以找出您正在尝试做什么。在同步模式下，信息多次隐式存储在程序堆栈中，用于数据变量中。

那么重试也应该在程序崩溃中幸存下来吗？如果是这样，那么您需要将信息存储在某个离线商店中。我曾经有一个电信应用程序；该电信应用程序会将呼叫详细记录写入数据库。如果由于某种原因失败，程序会简单地将 CDR 写入本地文件，然后继续。一个 cron 作业将通过将本地文件中的记录发送到数据库来清理它们。这样，提供计费信息的通话记录即使程序崩溃也能幸免于难。

有些人使用消息队列来做这样的事情。消息队列提供有保证的传递。客户端发送消息。服务器端得到它。仅当服务器能够成功处理消息时，服务器才会从 Q 中删除消息。否则消息会保留；这里的危险是消息可能有一些永久性的失败，然后它会进入一个无限循环。

由于某些永久性故障（例如向 WS 提供错误参数）而陷入无限循环，无论如何都是您必须处理的事情。

# r - 多维列联表R中的错误率

> ID：15236266
> 
> 赞同：1
> 
> 时间：2013-03-05T23:39:43.277
> 
> 标签：r, cross-validation, contingency

晚上好，

在处理列联表时，我发现R`classAgreement`中的包`e1071`中的函数非常有用且信息丰富。

它适用于二维。*但如果我有 3 个或更多维度，它就不起作用。*

我已经查看了几本书、论文和网页，但仍然找不到像 classAgreement() 一样具有超过 2 维的内置函数。

有人知道 R 中可以做到这一点的函数/包吗？

如果它不存在，有人能指出我正确的方向来构建一个在交叉验证中使用 3 维的函数吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:19:14.530

您可以将 apply 与第三个边距索引一起使用。例如：

```
g1 <- sample(1:5, size=1000, replace=TRUE) 
g2 <- sample(1:5, size=1000, replace=TRUE)
g3 <- sample(1:5, size=1000, replace=TRUE)
tab <- table(g1, g2,g3)
apply(tab,3,classAgreement) 
```

**编辑**以获取对角线元素

```
res <- apply(tab,3,classAgreement)
sapply(res, '[[','diag')
        1         2         3         4         5 
0.2146341 0.2029703 0.2227488 0.1513761 0.2073171 
sum(sapply(res, '[[','diag'))
[1] 0.9990465 
```

# php - 如何通过复选框发送多个值

> ID：15236271
> 
> 赞同：0
> 
> 时间：2013-03-05T23:40:10.237
> 
> 标签：php, ajax

我已经通过 ajax 编写代码以通过 ajax 发送名称和角色，名称发送成功，但选择超过 2 个角色时复选框不发送。

ajax代码

```
 var HttPRequest = false;

   function doCallAjax(Mode,Page,ID) {
      HttPRequest = false;
      if (window.XMLHttpRequest) { // Mozilla, Safari,...
         HttPRequest = new XMLHttpRequest();
         if (HttPRequest.overrideMimeType) {
            HttPRequest.overrideMimeType('text/html');
         }
      } else if (window.ActiveXObject) { // IE
         try {
            HttPRequest = new ActiveXObject("Msxml2.XMLHTTP");
         } catch (e) {
            try {
               HttPRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
         }
      } 

      if (!HttPRequest) {
         alert('Cannot create XMLHTTP instance');
         return false;
      }

      var url = 'AjaxRolesPermRecord.php';
      var pmeters = "troles_Name=" + encodeURI( document.getElementById("roles_Name").value) +
                    "&tper=" + encodeURI( document.getElementById("per").value) +
                    '&myPage='+Page +
                    "&tID=" + ID +
                    "&tMode=" + Mode;

        HttPRequest.open('POST',url,true);

        HttPRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        HttPRequest.setRequestHeader("Content-length", pmeters.length);
        HttPRequest.setRequestHeader("Connection", "close");
        HttPRequest.send(pmeters);

        HttPRequest.onreadystatechange = function()
        {

             if(HttPRequest.readyState == 3)  // Loading Request
              {
               document.getElementById("mySpan").innerHTML = "load ...";
              }

             if(HttPRequest.readyState == 4) // Return Request
              {
               document.getElementById("mySpan").innerHTML = HttPRequest.responseText;
              }

        }

   } 
```

我在这样的其他页面上得到它

```
foreach($selected as $key=>$val) 
{  
    $SqlInsertIntotable = mysql_query("INSERT INTO permissions_roles (id,permission_id,role_id) 
                                       value ('','".$val."','".$RoleID."')"); 
} 
```

问题是

```
Invalid argument supplied for foreach() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:16:13.447

[在Javascript中将所有复选框值作为数组传递](https://stackoverflow.com/questions/11791296/pass-all-checkboxes-values-as-an-array-in-javascript)

这处理您选择值并将它们传递给“tper”的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:55:18.723

复选框是否像数组一样定义？例如：

```
 <input type="checkbox" name="selected[]"> 
```

# actionscript-3 - 需要有关在 Flash Actionscript 3.0 中创建的射击游戏的建议

> ID：15236272
> 
> 赞同：0
> 
> 时间：2013-03-05T23:40:19.923
> 
> 标签：actionscript-3

我创建了一个射击游戏，它编译得很好，但是每次我运行测试时都会出错

“警告：由于您的发布设置，没有库被链接为运行时共享库​​ (RSL)：AIR for Android [SWF] alienshooter14.swf - 解压后 4132761 字节”

出现，当我尝试播放 .fla 文件时，除了外星对象之外的所有组件都在运行。如果您能够确定问题，我将附上脚本。我很感激你的帮助。谢谢

```
import flash.events.MouseEvent;
import flash.events.Event;
import flash.display.MovieClip;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

var btn_downIsDown:Boolean;
var btn_upIsDown:Boolean;
var KeyUp:Boolean;
var KeyDown:Boolean;
var Space:Boolean;

var score = 0;
var livesLost:Number = 3;

var gs:gunsound = new gunsound();
var ebs:ebulletsound = new ebulletsound();

btn_up.addEventListener(MouseEvent.MOUSE_DOWN,upDown);
btn_up.addEventListener(MouseEvent.MOUSE_UP,upUp);
btn_down.addEventListener(MouseEvent.MOUSE_UP,downUp);
btn_down.addEventListener(MouseEvent.MOUSE_DOWN,downDown);
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyIsDown);
stage.addEventListener(KeyboardEvent.KEY_UP, keyIsUp);

stage.addEventListener(Event.ENTER_FRAME,pulse);
stage.addEventListener(Event.ENTER_FRAME,Gunpulse);
btn_fire.addEventListener(MouseEvent.MOUSE_DOWN,shoot);

function upDown(evt:MouseEvent){btn_upIsDown=true;}
function upUp(evt:MouseEvent){btn_upIsDown=false;}
function downDown(evt:MouseEvent){btn_downIsDown=true;}
function downUp(evt:MouseEvent){btn_downIsDown=false;}

function keyIsDown(evt:KeyboardEvent)
 {
    if(evt.keyCode==40) KeyDown=true;
    if(evt.keyCode==38) KeyUp=true;
    if(evt.keyCode==32) Space=true;
 }

function keyIsUp(evt:KeyboardEvent)
 {
    if(evt.keyCode==40) KeyDown=false;
    if(evt.keyCode==38) KeyUp=false;
    if(evt.keyCode==32) Space=false;
}

function pulse(evt:Event)
{
    if (btn_upIsDown && !mc_gun.hitTestObject(tb_scores)) mc_gun.y-=5;
    if (btn_downIsDown && !mc_gun.hitTestObject(btn_down)) mc_gun.y+=5;
    if (btn_upIsDown && !mc_barrel.hitTestObject(tb_scores)) mc_barrel.y-=5;
    if (btn_downIsDown && !mc_barrel.hitTestObject(btn_down)) mc_barrel.y+=5;

    if (KeyUp)
    {   
        if (!mc_gun.hitTestObject(tb_scores)) {mc_gun.y-=5;}
        if (!mc_barrel.hitTestObject(tb_scores)) {mc_barrel.y-=5;}
        mc_barrel.y=mc_gun.y;

    }

    if (KeyDown)
    {
        if(KeyDown)
        if (!mc_gun.hitTestObject(btn_up)) {mc_gun.y+=5;}
        if (!mc_barrel.hitTestObject(btn_up)) {mc_barrel.y+=5;}
        mc_barrel.y=mc_gun.y;

    }

    if (Space)
    {
        if (bulletCounter<0) bulletCounter++;
        else bulletCounter=0;

        shootmc(bulletArray[bulletCounter]);  

        gs.play();
    }
    checkForHits();
 }

function checkForHits()
 {
    for (var i:Number=0; i<bulletArray.length; i++)
    for (var d:Number=0; d<numChildren; d++)
    {
        if (getChildAt(d) is enemybullet)
        {
            var ab:enemybullet = enemybullet(getChildAt(d));
            if (getChildAt(d).hitTestObject(mc_barrel) && ab.currentFrame==1)
            {
                mc_gun.gotoAndStop(mc_gun.currentFrame+1);
                ab.gotoAndStop(2);
                ab.visible = false
                livesLost-=1;
                ebs.play();
            }
            if (getChildAt(d).hitTestObject(bulletArray[i]) && ab.currentFrame==1)
            {
                var exp1:explosion1 = new explosion1();
                stage.addChild(exp1);
                exp1.x = ab.x;
                exp1.y = ab.y;
                bulletArray[i].x=-1000;
                ab.x=-1000;
            }
        }
    }
}

var bulletArray:Array = new Array();
bulletArray.push(mc_bullet1);
bulletArray.push(mc_bullet2);
bulletArray.push(mc_bullet3);
bulletArray.push(mc_bullet4);

var bulletCounter:Number = 0;

function Gunpulse(evt:Event)
{
    for(var i:Number=0; i<bulletArray.length; i++)
    {
        tb_lives.text = "" + livesLost;
        tb_scores.text = "" + score;

        if (mc_alien1.hitTestObject(bulletArray[i]))
        {
            bulletArray[i].y=-650;
            mc_alien1.y = 450;
            score+=20;
            mc_alien1.mySpeed();
        }
        if (mc_alien2.hitTestObject(bulletArray[i])) 
        {
            bulletArray[i].y=-650;
            score+=40;
            mc_alien2.y = 450;
            mc_alien2.mySpeed();
        }
        if (mc_alien3.hitTestObject(bulletArray[i])) 
        {  
            bulletArray[i].y=-650;
            score+=60;
            mc_alien3.y = 450;
            mc_alien3.mySpeed();
        }
        if (livesLost>=3) mc_gun.gotoAndStop(1);
        if (livesLost==2) mc_gun.gotoAndStop(2);
        if (livesLost==1) mc_gun.gotoAndStop(3);
        if (livesLost==0) endGame();

        return;
    }
}
function shoot(evt:MouseEvent)

{
    if (bulletCounter<3) bulletCounter++;
    else bulletCounter=0;

    shootmc(bulletArray[bulletCounter]);  

}

function shootmc(mc_gun:MovieClip)

{
    mc_gun.visible = true;
    mc_gun.x = mc_barrel.x;
    mc_gun.y = mc_barrel.y;
    mc_gun.gotoAndPlay(2);
}

function endGame()
{   
    stage.removeEventListener(Event.ENTER_FRAME,Gunpulse);
    btn_fire.removeEventListener(MouseEvent.MOUSE_DOWN,shoot);
    stage.removeEventListener(Event.ENTER_FRAME,pulse);
    mc_alien1.killMe();
    mc_alien2.killMe();
    mc_alien3.killMe();
    gotoAndStop(4);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:38:57.537

该错误告诉您：

> 由于您的发布设置，没有库被链接为运行时共享库​​ (RSL)

所以这就是你错了。

您的一个或多个类需要像这样编译为 RLS ->[单击此处](http://www.adobe.com/devnet/flash/articles/concept_runtime_library.html)

如果错误来自您的代码段，则为以下一项或多项：

gunsound ， ebulletsound ， explode1 （顺便说一句，您应该以大写开头的 Classnames，而您的标题并不能解决问题）

# ruby - 从 cron 执行 ruby 脚本

> ID：15236278
> 
> 赞同：6
> 
> 时间：2013-03-05T23:40:49.627
> 
> 标签：ruby, cron, rvm, tiny-tds

我的脚本使用 mysql、tiny_tds、fileutils 和 net/ftp。在红宝石 1.9.3 上运行。当我从文件夹内运行它时，它工作得很好。

但是，当我将它添加到 cron 选项卡时，tiny_tds 经常失败。我不知道是否有任何其他宝石失败，因为我无法通过此错误：

> require': 没有要加载的文件 -- tiny_tds (LoadError)

我尝试从 crontab 将使用的同一个 shell 执行它，但我得到了那个错误。

整个脚本只有 1 个文件。

我是 ruby​​ 新手，所以我的知识有限，无法以正确的方式设置环境。

在我的文件头

```
 #!/usr/bin/ruby
    require "mysql"
    require "fileutils";
    require "tiny_tds"  
    require "net/ftp" 
```

简而言之，我从 mysql 中获得了一个作业列表，将其与 MsSQL 进行比较，FTP 文件结束并在作业完成后再次更新 mysql。

我需要从 cron 运行它。

经过一番研究后，我尝试将宝石设置为全局，但是，我认为这可能行不通。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T23:47:20.713

这是因为当 crond 执行你的代码时，你在命令行上的环境变量没有设置。通常的嫌疑人是登录时设置的`PATH`、、`LD_LIBRARY_PATH`和别名。

你可以看到 crond 做了什么：使用`crontab -e`

```
* * * * *  set > /tmp/setvals 
```

创建上述条目。让它运行一段时间。返回`crontab -e`并删除该新条目。

当您在命令行上`/tmp/setvals`发出命令时，将其中的内容与您的 shell 提供的内容进行比较。`set`然后，您可以采取措施为您的 cron 作业环境修改内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T06:00:45.920

There are multiple ways for RVM to cooperate with cron, if you use script then the simplest is just to use RVM - which means do not use system ruby `#!/usr/bin/ruby` - just put in the first line `#!/path/to/rvm/wrappers/ruby-1.9.3-p392/ruby`

you can use aliases to prevent hardcoding one ruby path in a script:

```
rvm alias create my_app 1.9.3 
```

and then in script header (first line):

```
#!/path/to/rvm/wrappers/my_app/ruby 
```

# php - 从 wpcom_vip_file_get_contents、file_get_contents、浏览器、curl 获得不同的结果

> ID：15236279
> 
> 赞同：0
> 
> 时间：2013-03-05T23:40:52.653
> 
> 标签：php, json, file-get-contents

我正在尝试从这个 URL 的 json 页面加载内容：

[http://makeprojects.com/api/1.0/guide/4](http://makeprojects.com/api/1.0/guide/4)

当我通过 file_get_contents 加载时，我没有得到零件的数量和类型......这里有什么想法吗？

在这个要点上有几个不同响应的例子：

[https://gist.github.com/whyisjake/5095391](https://gist.github.com/whyisjake/5095391)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:53:53.890

并非每个实例`type`在您调用的 JSON 文件中都有值。[不过，您的要点](https://gist.github.com/whyisjake/5095391#file-browser-json-L457)确实表明您正在获得`type`以及`quantity`何时可用。

# java - 从网络服务器打印到热敏打印机，无需中介

> ID：15236293
> 
> 赞同：5
> 
> 时间：2013-03-05T23:42:04.993
> 
> 标签：java, zebra-printers, zpl, zpl-ii

我已经研究这个问题将近一个月了。似乎我正被推向各个不同的方向。我希望有人可以帮助我回答。

给出我正在寻找的简要模型：

我有一个网络服务器，其中包含我需要通过互联网到达热敏打印机进行打印的信息。我不希望计算机成为中介。进行必要的编程以实现这一点我没有问题。我的问题来自于找到我能够编程的设备。我遇到的第一个问题是找到一台热敏收据打印机，它有一个内置的网络服务器，我可以通过编程来轮询我的服务器以获取要打印的信息。目前没有可用于此目的的打印机。我已经与 Zebra、Epson、Brother 等进行了交谈。如果两个设备都在同一个网络上，例如手机打印机到手机连接到的同一网络上的打印机，大多数都有打印解决方案，并且大多数都有 SDK做。我需要打印机能够轮询我的网络服务器。所以我去找了一个替代品。也许我可以将无线 USB 迷你网络服务器连接到打印机以达到我的最终目标。我认为这将是一项简单的任务，但事实并非如此。我对 stackoverflow.com 用户的问题是，有没有人遇到过类似的问题并知道解决方案？我再次与不同的制造商交谈过，但他们都无法提供帮助。我想他们中的大多数人甚至无法理解我在说什么。我希望那些在这里编程的人能理解我的问题。com是有没有人遇到过类似的问题并知道解决方案？我再次与不同的制造商交谈过，但他们都无法提供帮助。我想他们中的大多数人甚至无法理解我在说什么。我希望那些在这里编程的人能理解我的问题。com是有没有人遇到过类似的问题并知道解决方案？我再次与不同的制造商交谈过，但他们都无法提供帮助。我想他们中的大多数人甚至无法理解我在说什么。我希望那些在这里编程的人能理解我的问题。

下面是我正在尝试做的一个本土的环形交叉路口解决方案。

[http://proto-pic.co.uk/internet-connected-thermal-printer-kit/](http://proto-pic.co.uk/internet-connected-thermal-printer-kit/)

上面的这个解决方案再次要求我从头开始构建它。berg cloud 是另一种选择，但它们不允许我控制我的网络服务器，一切都通过它们运行。请随时提出问题，因为我不希望快速回答​​这个问题。我希望有遇到类似问题的程序员。

另外参考我为这个问题选择的标签，我想也许我可以将一个设备（Web 服务器微控制器设置）连接到热敏打印机，该打印机可能有一个运行 Web 服务器的 JVM，然后我可以通过 USB 与打印机进行通信。我知道对于微控制器来说，Java 比 C 差得多，但它是我所知道的。很想听听任何替代解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-11T00:56:12.947

我强烈建议您此时重新考虑 Zebra websocket 解决方案。

最好的解决方案仍然可能是迷你 Web 服务器解决方案。

我对 Zebra websocket 解决方案的体验： 背景：

我最初尝试创建一个 node.js 解决方案（我在几个地方读到任何服务器都是可行的）。但是，即使在获得 Zebra 签名证书之后，在几次失败的连接尝试之后 - 并且打印机/服务器通过了成功的握手过程 - 它仍然失败并出现一个神秘的错误，当调查时与试图验证特定 Tomcat 的打印机有关正在使用版本/服务器！！！？？？

我确实收到了 Zebra 开发人员的回复，他正在开发 .Net 解决方案，但也无法使其正常工作，并且正在等待 Zebra 的“工程师”提供更多信息，然后才能完成解决方案。他们说他们会在收到信息后将其发送出去，并希望在一周内得到它（超过一周 - 还没有运气）。

所以 - 我决定组装一个 Tomcat 服务器 - Zebra 唯一可以工作的示例......我让示例 servlet 运行，但开始遇到新的证书问题（因为我已经更改了服务器/域等）这让我开始思考整个笨重的过程 - 并认识到第一个交易破坏者 - 非常严格的 ssl 身份验证和签名过程风险太大。

例如，假设您有 100 多个客户依赖此解决方案。如果您曾经遇到过证书问题（例如域名更改、服务器设置更改或证书失效/到期） - 那么所有 100 多个客户都没有他们的打印机。但是您不能自己修复它-修复/生成新证书等。重新签名过程很慢并且依赖于外部资源！（顺便说一句，这是一个手动 Zebra 流程 - 您通过电子邮件发送，然后在 Zebra 员工回复签名证书之前等待相当长的时间）。

这意味着所有 100 多位客户在相当长的时间内都没有打印机服务，但您别无选择，只能让 Zebra 签署您的证书。对我来说，这是一个不可接受的风险 - （websocket 解决方案不应依赖于 Zebra 签名证书 - 毕竟您正在安装您的（或您的客户）打印机，然后您将打印机配置为为其指定一个确切的域名/地址连接至）。

使用您的迷你服务器解决方案 - 如果客户有问题 - 它只会影响该单个客户，并且您不依赖外部公司签署证书来解决问题。

以下是已识别的问题及其相关风险。

问题 1) 实现得很差 - 我不能（他们也不能）让它连接到标准服务器，而不是非常特定的 Tomcat 设置！！！风险等级：低 - 即这是一个初始成本和时间负担 - 但是一旦工作，这个问题导致进一步问题的持续风险是最小的。风险：a) 将开发限制在非常具体的服务器和技术上。b) 增加初始开发/测试的时间和成本。

问题 2) 文档记录不完善 - 我已经确定（并且 Zebra 已经验证）文档中的几个错误 - 文档也分散，重要信息被放入一个很难找到的 readme.txt 文件中，与文档的其余部分分开。风险等级：低 - 即这是一个初始成本和时间负担 - 但是一旦工作，这个问题导致进一步问题的持续风险是最小的。风险：a) 减缓初始开发。b) 增加初始设置/开发的时间和成本。

问题 3) 打印机安全/ssl 身份验证计划和实施不当。它涉及多个步骤 - 非常严格，并且涉及缓慢的斑马签名过程，这会产生持续的风险。风险级别：高 - 即这是我们无法使用此解决方案的原因。风险：a) 将开发限制在非常具体的服务器和技术上。b) 减缓初始发展。c) 增加初始设置/开发的时间和成本。d) 对项目造成持续的高级别风险，如下所示： ---> 公司将依赖此打印机连接解决方​​案 - 因此任何潜在的停机时间都会导致重大业务中断。--->

摘要：IMO 问题 3 带来了不可接受的风险，在我重新考虑 Zebra websockets 之前，需要发生以下 2 件事。1) 他们需要有关 websockets 如何连接到服务器的适当文档，因为它是隐藏的，甚至 Zebra 员工目前也处于黑暗之中。2) 他们需要删除一些身份验证限制 - 这样您就可以解决任何问题而无需耗时的 Zebra 交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:17:25.377

Zebra 确实提供了可以通过 websocket 进行通信的打印机。如果您的 Web 服务器是公开可用的（即在“互联网”上可用），您可以在打印机和服务器之间打开一个 Web 套接字连接，并在有新信息提供服务时简单地发送数据。虽然听起来您需要打印机来启动对话，但也许拥有一个不断打开的 websocket 连接将帮助您满足您的需求。这消除了对任何中间计算机的需求，打印机直接与服务器对话。

Zebra Websocket 打印机：[http ://www.zebra.com/us/en/products-services/software/link-os/cloud-connect.html](http://www.zebra.com/us/en/products-services/software/link-os/cloud-connect.html)

斑马 (Java) SDK：[http ://www.zebra.com/us/en/products-services/software/link-os/link-os-sdk.html](http://www.zebra.com/us/en/products-services/software/link-os/link-os-sdk.html)

如果您需要支持此功能的热敏收据打印机，则 iMZ 型号应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T15:40:21.407

我已经成功创建了 mini websocket 服务器来与 ZD420 - LinkOS 驱动的 Zebra 打印机通信。

为了配置打印机，我编写了小型 python 实用程序（在 linux 上测试） [https://github.com/elops/zebra-wifi-tool](https://github.com/elops/zebra-wifi-tool)

此工具将设置打印机连接到 wifi 网络，并通过该 wifi 网络连接到 weblink 位置。weblink location 是您的 websocket 服务器的 URL 的 Zebra 名称。您可以通过 websocket 轻松调整配置、发送打印作业等等。

websocket 服务器的 Python 实现是用 python 3.5 编码的，使用`asyncio`和`websockets`

核心功能基本上是来自文档的 c/p [http://websockets.readthedocs.io/en/3.4/intro.html#both](http://websockets.readthedocs.io/en/3.4/intro.html#both)

你需要 3 个协程：

*   1x 连接处理程序
*   1x 制作人
*   1x 消费者

**连接处理程序：** 这个协程负责监听你的 websocket 上首先发生的事情，是数据接收还是数据发送。无论哪个先发生，另一个都被取消并循环。

**Producer：** 该协程用于通过活动的 websocket 将数据推送到 IoT 设备。

**消费者：** 这个协程被馈送到物联网设备通过 websocket 发送到服务器的数据。

Websocket 握手看起来像这样 `start_server = websockets.serve(handler, 'localhost', 6000, subprotocols=['v1.weblink.zebra.com'], extra_headers={'Content-Length': '0'})`

整个事情就像魅力一样，非常可靠且高度可配置且功能丰富的解决方案适用于您需要从 Web 应用程序打印到连接到 Internet 的打印机的各种场景。我已将条码扫描仪与 ZD420 打印机配对。扫描的数据可以通过用于打印的相同 websocket 打印机轻松发送到 websocket 服务器，因此您可以为网络上的 POS 环境创建强大的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-08T22:23:19.700

尝试使用支持应用程序启用打印 (AEP) 的 SATO 打印机（请参阅 SATO America 或 SATO Europe）。在这里，您可以使用 Cloud 或服务器设置 websocket。打印机还允许 https 请求以及 ftp 轮询。例如，您可以从通过 USB 主机端口连接到打印机的扫描仪或键盘触发打印作业。效果很好！并且不需要像前面描述的情况那样使用第二个云。

# wpf - 如何根据选定的值设置 WPF ComboBox 的 ToolTip？

> ID：15236294
> 
> 赞同：9
> 
> 时间：2013-03-05T23:42:10.093
> 
> 标签：wpf, combobox, triggers, tooltip, selectedvalue

我的 WPF 应用程序中有一个`ComboBox`。使用下面的代码我可以设置`ToolTip`为选定的值：

```
ToolTip="{Binding Path=SelectedValue, RelativeSource={RelativeSource Self}}" 
```

但是，如果我需要`ToolTip`根据`ComboBox`选择设置单独的值，则以下代码不起作用：

```
<controls:ComboBoxEx.Style>
    <Style TargetType="ComboBox" BasedOn="{StaticResource basicStyle}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=SelectedValue, RelativeSource={RelativeSource Self}}" Value="DAW">
                <Setter Property="ToolTip" Value="abc"/>
            </DataTrigger>

            <DataTrigger Binding="{Binding Path=SelectedValue, RelativeSource={RelativeSource Self}}" Value="generic">
                <Setter Property="ToolTip" Value="def"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</controls:ComboBoxEx.Style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T23:50:19.363

我不确定我是否理解正确，但如果您使用的是 a `Style`，则不必使用 a`DataTrigger`或`RelativeSource={RelativeSource Self}}"`访问`SelectedValue`，您应该能够通过 a`Trigger`使用`Property`

```
<Style TargetType="ComboBox">
    <Style.Triggers>
        <Trigger Property="SelectedValue"  Value="DAW">
            <Setter Property="ToolTip" Value="abc"/>
        </Trigger>
        <Trigger Property="SelectedValue" Value="generic">
            <Setter Property="ToolTip" Value="def"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T06:32:17.777

将工具提示绑定到所选项目的显示属性，在这种情况下，我有属性名称显示，如果您有声明性 ComboBox 项目，那将是

```
ToolTip="{Binding Path=SelectedItem.Content,ElementName=cmbbox_years}" 
```

其他代码下面的自定义对象将起作用

```
<ComboBox 
  Name="cmbbox_years" 
  DisplayMemberPath="display" 
  SelectedValuePath="value"
  ItemsSource="{Binding Years}" 
  SelectedItem="{Binding YearSelectedItem}" 
  ToolTip="{Binding Path=SelectedItem.display,ElementName=cmbbox_years}"/> 
```

# javascript - 在将 Google Closure Compiler 与 Grunt JS 一起使用时禁用 report.txt 的创建

> ID：15236300
> 
> 赞同：0
> 
> 时间：2013-03-05T23:42:36.497
> 
> 标签：javascript, obfuscation, google-closure-compiler, gruntjs

为了缩小和混淆我的 JS 代码，我尝试使用 Grunt 的[闭包编译器](https://github.com/gmarty/grunt-closure-compiler)插件。

我对结果非常满意，但是在运行 Grunt 之后，我`project.min.js.report.txt`在输出目录中获得了文件。我没有找到任何对此负责的[选项。](https://developers.google.com/closure/compiler/docs/api-ref?hl=ru#req)

我看到的唯一解决方案是创建另一个任务来删除文件。是否有更简单的方法可以避免此文件再次出现？

这是我的 gruntfile.js 内容：

```
module.exports = function(grunt) {
    grunt.initConfig({
        "concat": {
            js: {
                src: [
                    "js/project.js"
                ],
                dest: "js/project.all.js"
            }
        },
        "closure-compiler": {
            frontend: {
                closurePath: "path/to/gcc_jar_directory",
                js: "js/project.all.js",
                jsOutputFile: "js/project.min.js",
                maxBuffer: 500,
                options: {
                    compilation_level: "ADVANCED_OPTIMIZATIONS",
                    language_in: "ECMASCRIPT5_STRICT",
                }
            }
        },
        watch: {
            js: {
                files: ["js/project.js"],
                tasks: ["concat:js", "closure-compiler"]
            }
        }
    });

    grunt.loadNpmTasks("grunt-contrib-concat");
    grunt.loadNpmTasks("grunt-closure-compiler");
    grunt.loadNpmTasks("grunt-contrib-watch");

    grunt.registerTask("default", ["concat:js", "closure-compiler", "watch"]);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:33:28.990

你不能，因为它目前是[硬编码](https://github.com/gmarty/grunt-closure-compiler/issues/18)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T04:09:49.540

现在可以使用`noreport`选项（[阅读更多](https://github.com/gmarty/grunt-closure-compiler#minification-report)）：

```
'closure-compiler': {
    frontend: {
        closurePath: '/var/www/closure/',
        js: 'js/file.js',
        jsOutputFile: 'js/dist/file.min.js',
        maxBuffer: 500,
        options: {
            compilation_level: 'SIMPLE_OPTIMIZATIONS',
            noreport: true
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:59:29.563

很有趣，但这只是这个[Grunt 插件的问题](https://github.com/gmarty/grunt-closure-compiler/blob/master/tasks/closure-compiler.js)，而不是 Google Closure Compiler。

为此创建了一个问题。

# qt - 需要在 QML 中更改 SVG 图像的颜色

> ID：15236304
> 
> 赞同：4
> 
> 时间：2013-03-05T23:43:03.540
> 
> 标签：qt, qml

我正在尝试在 Qt-QML 中设计一个概要面板（用于桌面）。该界面应使用固定分辨率，因此我更喜欢为不同的图形元素使用 PNG 图像来创建模式（管道、管道曲线、管道-t、泵、阀门等）。现在的问题是如何更改不同组件的填充颜色：我希望用户可以选择颜色（在实际情况下可以使用不同的液体），但我在 QML 中找不到如何做到这一点。我想用我的 PNG 组件作为背景，然后画一个矩形，用 SVG 掩码遮盖。但在网上我只能找到 qt-components “MaskedItem” 不适用于桌面。我想知道是否没有办法用一种颜色（黑色和透明）将我的 PNG 放在我的 SVG 图像上，然后在 QML 中更改它的颜色属性。有人有什么想法吗？非常感谢。

（**编辑**更好地解释）

这个问题比我能解释的更复杂。我创建了几个具有特定属性的 QML 组件，每个组件都有一个透明的背景图像 (PNG)。现在，当主 QML 处于特定状态（由 Qt 应用程序设置）时，我需要使用可变颜色“x”填充 PNG 图像的定义区域。我的问题是：如何用 QML 中的可变颜色填充 PNG/SVG 的区域？我需要的是放置我的“背景”图像，然后在这个“矩形”组件（颜色“x”）上应用，最后在这个矩形上放置一个遮罩，以定义它的哪些区域必须是可见的，保留背景（之前的底部图像）。我希望我现在能更好地解释自己。

（**编辑**解决方案）经过很多小时，除了使用 qt-components MaskedItem 之外，我找不到任何其他解决方案。下面我发布了我使用的解决方案。感谢大家的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:47:05.543

找到的唯一解决方案是使用“ **qt-components MaskedItem** ”；它必须取自存储库，并且必须在 Qt 桌面下编译。现在可以在概要的任何 QML 组件中使用 MaskedItem。组件的 QML 代码将是这样的：

```
Item
{
    id: arrow
    property int  rotate: 0
    property bool active: false
    width: 32
    height: 32
    clip: true

    Image {
        smooth: true
        source: {
            if(rotate==90)
                "../res/arrow_1_bg.png"
            else if(rotate==180)
                "../res/arrow_2_bg.png"
            else if(rotate==270)
                "../res/arrow_3_bg.png"
            else
                "../res/arrow_0_bg.png"
        }
    }

    MaskedItem
    {
        visible: active
        anchors.fill: parent
        mask: Image
        {
            anchors.fill: parent
            smooth: true
            source: {
                if(rotate==90)
                    "../res/arrow_1_mask.png"
                else if(rotate==180)
                    "../res/arrow_2_mask.png"
                else if(rotate==270)
                    "../res/arrow_3_mask.png"
                else
                    "../res/arrow_0_mask.png"
            }
        }
        Rectangle
        {
            anchors.fill: parent
            color: active_color
            opacity: .6
        }
    }

} // Item: arrow 
```

'active' 属性表示组件是否必须“填充”，使用主 QML 中定义的全局属性“active_color”。

因此，所有组件（管道、管道角度、箭头、泵、阀门等）都有一个透明的背景图像 (PNG)。管道（具有“方向”属性，水平或垂直）是 PNG 1x32px 拉伸的。最终屏幕的示例可能是这样的：

[示例 1 http://imageshack.us/a/img9/2968/example1c.png](http://imageshack.us/a/img9/2968/example1c.png)。

所有组件也都有一个 MaskedItem，掩码图像用于定义 Rectangle 的可见区域（颜色为“x”），放置在主组件的背景图像上。2 个组件背景和蒙版图像的示例：

[示例 3 http://imageshack.us/a/img442/9863/example3y.png](http://imageshack.us/a/img442/9863/example3y.png)。

最终结果，如果 'active' 属性为真并且选择的颜色为绿色，则可能是这样的：

[示例 2 http://imageshack.us/a/img836/1968/example2c.png](http://imageshack.us/a/img836/1968/example2c.png)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:14:28.580

PNG 和 SVG 图像都支持 alpha 通道（即透明度），那么，为什么不将 SVG（在您想看到背景的地方带有透明部分）放在 PNG 背景上呢？

甚至反过来……您可以将 PNG 部分（带有透明“孔”）放在 SVG 图像上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T14:58:19.653

我遇到了同样的问题，最终创建了一个自定义图像渲染器，该渲染器将可选的颜色参数作为图像源字符串的一部分，然后在渲染之前替换了原始颜色。似乎比渲染图像只是为了再次渲染它更有效。

# opencv - FREAK 描述符参数

> ID：15236307
> 
> 赞同：3
> 
> 时间：2013-03-05T23:43:17.790
> 
> 标签：opencv

我对 OpenCV 2.4.3 中的 FREAK 函数有疑问。在 FREAK 的定义中，它说：

```
FREAK( bool orientationNormalized = true,
       bool scaleNormalized = true,
       float patternScale = 22.0f,
       int nOctaves = 4,
       const vector<int>& selectedPairs = vector<int>()); 
```

“patternScale”到底是什么意思？我在 FREAK 论文中找不到任何关于“规模”的信息。FREAK 中高斯的核大小是如何确定的？我问这个是因为 BruteForce Matcher 的匹配对取决于参数“patternScale”。

如果我将其保留为默认值，则匹配器会丢失一些关键点并且它们不匹配。但是，如果我将其更改为 1.0，匹配器会匹配每个点。有没有人知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:53:39.460

因此，这里有一些关于 FREAK 构造函数的代码以及它如何使用 OpenCV 自己的答案站点上的 patternScale 参数的一些见解：

[http://answers.opencv.org/question/5360/freaks-patternscale-parameter-tuning/](http://answers.opencv.org/question/5360/freaks-patternscale-parameter-tuning/)

结合[这篇](http://answers.opencv.org/question/879/does-freak-eat-keypoints-when-it-cant-find-any/)关于“吃”关键点的帖子（类似于你正在经历的，似乎）

这似乎表明 patternScale 用于“放大”原始模式的查找关键点。当它们超出图像本身的大小时，它们就会从计算中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:36:38.173

> “patternScale”到底是什么意思？

在找到的关键点周围，将构建一个模式来执行测试。如果您查看论文，您会看到这种受人类启发的模式。patternscale 定义了这个模式有多大。

> FREAK中的高斯核大小不是确定的吗？

是的。我会这么认为。

另外，您可以查看[OpenCV 的源代码。](http://fossies.org/dox/OpenCV-2.4.4/freak_8cpp_source.html)

# java - 如何在终端中杀死这个 tomcat 进程？

> ID：15236308
> 
> 赞同：57
> 
> 时间：2013-03-05T23:43:35.880
> 
> 标签：java, linux, unix, tomcat, terminal

使用`ps -ef | grep tomcat`我发现了一个正在运行的 tomcat 服务器。我试过`kill -9 {id}`了，但它返回“没有这样的过程”。我究竟做错了什么？

这是一个例子：

```
Admins-MacBook-Pro:test-parent tom.maxwell$ ps -ef | grep tomcat
2043706342 39707 39695   0  3:40PM ttys000    0:00.00 grep tomcat
Admins-MacBook-Pro:test-parent tom.maxwell$ kill -9 39707
-bash: kill: (39707) - No such process 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2015-04-02T05:50:39.497

不需要知道 Tomcat 的 pid（进程 ID）来杀死它。您可以使用以下命令杀死 Tomcat：

```
pkill -9 -f tomcat 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-07-07T19:53:49.210

> ps -ef | grep tomcat | awk '{打印 $2}' | xargs 杀死 -9

[https://gist.github.com/nrshrivatsan/1d2ea4fcdcb9d1857076](https://gist.github.com/nrshrivatsan/1d2ea4fcdcb9d1857076)

**第1部分**

> ps -ef | grep tomcat => 用tomcat grep 获取所有进程

**第2部分**

一旦我们有了流程详细信息，我们将其通过管道传输到脚本的第 2 部分

> awk '{打印 $2}' | xargs kill -9 => 获取第二列 [Process id] 并使用 -9 选项杀死它们

希望这可以帮助。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-05T23:46:24.283

Tomcat 没有运行。您的搜索向您展示了 grep 进程，该进程正在搜索 tomcat。当然，当您看到该输出时，grep 不再运行，因此 pid 不再有效。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-04-17T14:56:47.483

只需在终端中输入以下命令

```
ps -ef |grep 'catalina' 
```

复制进程 ID 的值，然后键入以下命令并粘贴进程 ID

```
 kill -9 processid 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-03-05T23:59:28.267

正如其他人已经指出的那样，您已经看到了 grep 过程。如果您想将输出限制为 tomcat 本身，您有两种选择

*   将第一个搜索到的字符包装在字符类中

    ```
    ps -ef | grep '[t]omcat' 
    ```

    这也搜索 tomcat，但错过了`grep [t]omcat`条目，因为它不匹配`[t]omcat`.

*   使用带有 ps 的自定义输出格式

    ```
    ps -e -o pid,comm | grep tomcat 
    ```

    这仅显示没有进程参数的进程的 pid 和名称。因此， grep 被列为`grep`而不是`grep tomcat`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-04-07T08:07:46.430

```
ps -Af | grep "tomcat" | grep -v grep | awk '{print$2}' | xargs kill -9 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-05-03T06:56:57.210

在`tomcat/bin/catalina.sh`

在评论部分结束后添加以下行：

```
CATALINA_PID=someFile.txt 
```

然后，要杀死正在运行的 Tomcat 实例，您可以使用：

```
kill -9 `cat someFile.txt` 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-05T23:48:26.887

```
ps -ef 
```

将列出您当前正在运行的所有进程

```
| grep tomcat 
```

将输出传递给`grep`并查找 tomcat 的实例。由于`grep`它本身就是一个进程，因此它是从您的命令返回的。但是，您的输出显示没有运行 Tomcat 的进程。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-03T16:32:51.433

这很好用（找到tomcat进程并强行杀死它们）

```
ps -ef | grep tomcat | awk '{print $2}' | xargs kill -9 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-14T11:49:45.227

这对我有用：

第 1 步：回声`ps aux | grep org.apache.catalina.startup.Bootstrap | grep -v grep | awk '{ print $2 }'`

上面的命令返回“process_id”

Step 2: kill -9 process_id
// 这个 process_id 和 Step 1: output 一样

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-24T10:48:33.800

```
kill -9 $(ps -ef | grep 8084 | awk 'NR==2{print $2}') 
```

NR 表示输入文件中的记录数。 `awk`可以查找或替换文本

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-06T16:31:40.013

正如@Aurand 所说，tomcat 没有运行。你可以使用

`ps -ef |grep java | grep tomcat`命令忽略`ps`程序。

在 shell scripte 文件中为我工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-10T11:57:38.357

要按名称终止进程，我使用以下命令

`ps aux | grep "search-term" | grep -v grep | tr -s " " | cut -d " " -f 2 | xargs kill -9`

与`tr -s " " | cut -d " " -f 2`相同`awk '{print $2}'`。`tr`将制表符空格压缩为单个空格，并作为分隔符`cut`提供，`<SPACE>`并请求第二列。输出中的第二列`ps aux`是进程 ID。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-30T10:32:47.353

对于 mac 用户，

这是唯一对我有用的解决方案。

```
sudo kill -9 `sudo lsof -t -i:8080` 
```

注意：将**8080**替换为您的端口号

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-16T08:30:41.233

我不得不终止服务器上许多java进程中的activeMQ java进程，而这个进程是由特定用户启动的（用户名是activemq）。如此好的分离方法可能是由特定用户启动一个进程：

```
ps -ef | grep "activemq" | awk '{print $2}' | xargs kill -9 
```

# perl - 文件关联锁定

> ID：15236309
> 
> 赞同：1
> 
> 时间：2013-03-05T23:43:40.883
> 
> 标签：perl, cgi, aptana

我正在做 perl cgi 编程，并安装了 Aptana。

Aptana 将 *.cgi “锁定”到 ruby​​，这意味着我收到关于实际上是 perl 脚本的 ruby​​ 错误报告。

是否有已知的解决方法，我目前正在编辑为 .pl 文件，然后复制到 cgi 进行测试.. 但这不是最佳的，因为错误具有误导性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T23:24:42.240

您可以通过在“问题”窗口中右键单击错误标记来删除它们。这对我有用，至少现在是这样。

# android - 单击 Android WebView 上的任意位置后重定向到特定 URL

> ID：15236311
> 
> 赞同：0
> 
> 时间：2013-03-05T23:43:45.600
> 
> 标签：android, click, touch, android-webview

我正在创建一个这样的 webview 应用程序。应用程序布局将 WebView 堆叠在另一个 WebView 之上；这意味着布局中有两个 webviews。

现在我想要的是 - 当用户单击第二个 web 视图（位于底部）上的任意位置时，具有新布局的新活动将打开加载特定 URL。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T23:24:46.670

您可以收听触摸侦听器，而不是像这样的点击：

```
webView = (WebView) findViewById(R.id.myWebViewId);

webView.setOnTouchListener(new View.OnTouchListener() {
          Uri uriUrl = Uri.parse("http://myurl.com");
          Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
          startActivity(launchBrowser);
          return true;
    }
}); 
```

# html - 优化 HTML 电子邮件

> ID：15236313
> 
> 赞同：0
> 
> 时间：2013-03-05T23:43:47.757
> 
> 标签：html, email, optimization

是否有将 HTML (css+html) 转换为电子邮件优化格式的服务？

**编辑：**优化的手段将在 99% 的电子邮件中显示相同/相似

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:46:13.247

这些服务可以满足您的需求：

*   [http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)
*   [http://inlinestyler.torchboxapps.com/](http://inlinestyler.torchboxapps.com/)

# python - Nuke 中的 Python：除了 StopIteration

> ID：15236316
> 
> 赞同：0
> 
> 时间：2013-03-05T23:44:06.740
> 
> 标签：python, scripting, nodes, compositing, nuke

基本上我目前正在尝试做的是使用 python 在 Nuke 中设置一个脚本，该脚本获取用户选择的节点并向它们添加 shuffle 节点，以实现简单的合成工作流程。但是，我坚持让 Nuke 将随机播放添加到选定的节点上。选择时它适用于 1 个节点，但如果选择了多个节点，则它仅适用于选择的第一个节点。我问了一个朋友，她说试试while循环，所以代码如下：

```
while True:
    if n in nuke.selectedNodes():
        name = n.name()
        node = nuke.toNode(name)
        blue.setInput(0,node)
        green.setInput(0,node)
        red.setInput(0,node)
    except StopIteration :
        break 
```

这一切都很好，直到除了部分。我在没有异常的情况下运行了脚本，它冻结了 Nuke，这表明它正在无限运行，但我需要它停止。Nuke 告诉我 except 是无效的语法。有谁知道我该如何解决这个问题或为我正在尝试的流程创建一个更好的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:32:54.130

也许您应该考虑一下自己在做什么，而不是仅仅将语法扔到问题上并希望它消失。`except`没有`try`块就没有意义，而且你没有分配到`n`任何地方。大概你的意思是这样的：

```
for n in nuke.selectedNodes():
    name = n.name()
    node = nuke.toNode(name)
    blue.setInput(0,node)
    green.setInput(0,node)
    red.setInput(0,node) 
```

`StopIteration`如果您使用这样的迭代器，则无需捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:48:05.890

使用名称捕获异常的正确语法`<exception_name>`是：

```
try:
    #code here...
except <exception_name>:
    #code here... 
```

**编辑：**
它接缝你的代码还有其他问题......

# maven - maven：在 pom 中指定 settings.xml 位置

> ID：15236321
> 
> 赞同：2
> 
> 时间：2013-03-05T23:44:23.150
> 
> 标签：maven, build, settings

**要求**：我们需要对 settings.xml 的某些部分进行集中控制，例如镜像配置

并且某些部分需要特定于用户[例如：凭据]

所以想法是将通用 settings.xml 置于源代码控制下（例如：svn）并配置父 pom 以便它可以在位置（例如`${user.home}/abc/def/settings.xml`）获取通用 settings.xml

我们需要为一些用户特定的东西包含用户特定的 settings.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:59:14.703

可以将 repo 设置以及例如配置文件设置[直接放入父 pom](http://maven.apache.org/pom.html#Repositories)中，因此您无需考虑 settings.xml 那里（尽管镜像配置似乎不可能）。但是，推荐的解决方案是使用 Nexus 或 Artifactory 之类的存储库管理器来控制存储库设置，并且用户只指向存储库管理器。这是对配置进行集中控制的方式，而不是 settings.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:00:03.987

正式的[Maven 设置参考](http://maven.apache.org/settings.html)通知我们如下： -

> settings.xml 文件中的 settings 元素包含用于定义以各种方式配置 Maven 执行的值的元素，例如 pom.xml，但**不应捆绑**到*任何特定项目*或*分发给受众*。其中包括本地存储库位置、备用远程存储库服务器和***身份验证信息***等值。

有 2 个有用的链接可获取更多信息，如下所示：-

1.[通过 Settings.xml 注入 POM 属性](http://maven.apache.org/examples/injecting-properties-via-settings.html)

2.[为存储库使用镜像](http://maven.apache.org/guides/mini/guide-mirror-settings.html)

我总是将 settings.xml 与 POM 一起使用，例如：-

## 设置.xml

```
 <properties>
      <svnHost>https://myhost/svn/</svnHost>
      <svnUser>the user id</svnUser>
      <svnPassword>the password</svnPassword>
  </properties> 
```

### pom.xml

```
<scm>
    <connection>
        scm:svn:${svnHost}/${project.artifactId}/trunk
    </connection>
    <developerConnection>
        scm:svn:${svnHost}/${project.artifactId}/trunk
    </developerConnection>
    <url>...</url>
</scm>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-scm-plugin</artifactId>
    <version>${my.maven.scm.version}</version>
    <configuration>
        <username>${svnUser}</username>
        <password>${svnPassword}</password>
    </configuration>
</plugin> 
```

我希望这可能对您有所帮助并给您一个想法。

# mongodb - 子文档的 Mongo 更新

> ID：15236322
> 
> 赞同：2
> 
> 时间：2013-03-05T23:44:28.603
> 
> 标签：mongodb, mongodb-query

在使用 MongoDB 时，我似乎遇到了障碍，并且想知道是否有任何方法，而无需修改我的数据库结构。现在我的数据库结构如下：

```
Company= 
{
   _id:1,
   properties:[
       {
           property_id: 1
           tags : [
             {
                 tag_id: 1
                 tag_value: 1000
                 channels: [
                       {
                          channel_id:1
                          channel_name:"test1"
                       },
                       {
                          channel_id:2
                          channel_name:"test2"
                       }]
             },
             {
                 tag_id:2
                 tag_value: 2500
                 channels: [
                       {
                          channel_id:2
                          channel_name:"test2"
                       },
                       {
                          channel_id:3
                          channel_name:"test3"
                       }]

             }]
       },
       {
           property_id: 2
           tags : [
             {
                 tag_id: 3
                 tag_value: 500
                 channels: [
                       {
                          channel_id:1
                          channel_name:"test1"
                       },
                       {
                          channel_id:3
                          channel_name:"test3"
                       }]
             },
             {
                 tag_id: 4
                 tag_value: 5000
                 channels: [
                       {
                          channel_id:1
                          channel_name:"test1"
                       }]                    
             }]
       }]       
} 
```

我遇到了一个问题，我无法找到更新属性中特定 tag_id 的方法。比如我想把属性2中tag_id 4的值改为100。或者我想给tag_id 3中的通道数组添加一个通道。

我想做的是类似于这样的事情：

```
db.company.update({_id:1, "properties.property_id":2, "tags.tag_id":4}, {"properties.$.tags.$.tag_value":100}); 
```

但是我知道当前版本的 MongoDB 不支持这一点，它已经在 J​​IRA 中。所以我的问题是，无论如何要更新文档的值，您需要指定两个不同的条件才能访问它。我知道我可以做 properties.1.tags.0，但是我不知道我的数组的顺序，我的查询将以编程方式运行。

任何帮助都会很棒，即使是我必须重组我的桌子的构造。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:33:42.757

展平一个数组可能会导致相当大的文档，因为对于每个内部数组元素，其外部元素的所有数据都必须重复（并且对于所有级别都是如此）。

因此，如果 flatten 不是一个选项，那么在等待提到的 Jira ( [SERVER-831](https://jira.mongodb.org/browse/SERVER-831) ) 中的增强功能时，这里有一个解决方法：

*   将文档读入变量
*   操作数组
*   更新文档，重写整个数组

鉴于您的示例，这将如下所示：

```
doc = db.xx.findOne( {_id:1} );
doc.properties.forEach( function(p) {
    if ( p.property_id == 2 ) { 
        p.tags.forEach( function(t) {
           if ( t.tag_id == 3 ) {
               t.tag_value = 100;
           }
           else if ( t.tag_id == 4 ) {
               newChannel = {};
               newChannel.channel_id = 5;
               newChannel.channel_name = "test5";
               t.channels.push(newChannel);
           }
        })
    }
});
db.xx.update({_id:1},{$set:{properties:doc.properties}}); 
```

结果是：

```
doc = db.xx.findOne({_id:1})
{
    "_id" : 1,
    "properties" : [
        {
            "property_id" : 1,
            "tags" : [
                {
                    "tag_id" : 1,
                    "tag_value" : 1000,
                    "channels" : [
                        {
                            "channel_id" : 1,
                            "channel_name" : "test1"
                        },
                        {
                            "channel_id" : 2,
                            "channel_name" : "test2"
                        }
                    ]
                },
                {
                    "tag_id" : 2,
                    "tag_value" : 2500,
                    "channels" : [
                        {
                            "channel_id" : 2,
                            "channel_name" : "test2"
                        },
                        {
                            "channel_id" : 3,
                            "channel_name" : "test3"
                        }
                    ]
                }
            ]
        },
        {
            "property_id" : 2,
            "tags" : [
                {
                    "tag_id" : 3,
                    "tag_value" : 100,
                    "channels" : [
                        {
                            "channel_id" : 1,
                            "channel_name" : "test1"
                        },
                        {
                            "channel_id" : 3,
                            "channel_name" : "test3"
                        }
                    ]
                },
                {
                    "tag_id" : 4,
                    "tag_value" : 5000,
                    "channels" : [
                        {
                            "channel_id" : 1,
                            "channel_name" : "test1"
                        },
                        {
                            "channel_id" : 5,
                            "channel_name" : "test5"
                        }
                    ]
                }
            ]
        }
    ]
} 
```

# android-sqlite - startManagedCursor (c) 与 c.close()？

> ID：15236324
> 
> 赞同：1
> 
> 时间：2013-03-05T23:44:44.457
> 
> 标签：android-sqlite, android-cursor

想知道 startManagedCursor() 如何作用于 / 与 db.close() 和 / 或 cursor.close() 读过文档，但我仍然对它很模糊 %-) ...并且了解 startManagedCursor() 已弃用 api >= 11\. 我*想*我必须将它用于 < android 2.3.x。

代码注释中有两个问题。谢谢 ！

***对不起！***......所以摇滚:)

```
Cursor c = null;
try {           
        dbHelper.open() ;
        c = dbHelper.getMyRecords() ;
        startManagingCursor(c) ;

        if ( c.moveToFirst() ) {  uberCool (stuff, here) ; }

        dbHelper.close() ;// <** Question 1 : Is cursor also closed here ?

    } catch (Exception e) {

        Log.d ("OOPS", Caught exception: " + e.toString() ) ;

    } finally {
        // ** Question 2 : Is the close() just below redundant 
        //               - will the managed cursor just close when function
        //                 goes out of scope  ?
        if (c != null) c.close() ; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:01:51.440

我的理解是托管游标归活动所有。我用过一个`ListView`里面有一个`ListActivity`. 这样做的主要原因是，`ListView`当`Cursor`. 我相信当管理它的人被杀死时，它就被`Cursor`关闭了。`Activity`在 finally 块中调用`close()`可能是多余的。首先取决于我的假设是否正确，以及何时执行此代码。

# python - python多处理根本不起作用

> ID：15236325
> 
> 赞同：4
> 
> 时间：2013-03-05T23:44:59.313
> 
> 标签：python, python-2.7, multiprocessing

所以我拿了下面的代码，运行它，实际上什么也没发生。Python 表现得好像它已经完成了一切（也许它已经完成了），但没有打印出来。任何帮助使它工作将不胜感激！

```
import multiprocessing

def worker(number):
    print number
    return

if __name__ == '__main__':
    test = multiprocessing.Process(target=worker, args=[0,1,2,3,4])
    test.start() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:55:48.957

您的代码实际上应该导致错误。的`args`参数`multiprocessing.Process()`不会为每个参数打开一个进程，它只是将列表中的参数提供给单个函数，然后在子进程中调用该函数。要像这样运行 5 个单独的实例，您必须执行以下操作：

```
import multiprocessing

def worker(number):
    print number
    return

if __name__ == '__main__':
    procs = []

    for i in range(5):
        procs.append(multiprocessing.Process(target=worker, args=[i]))

    [proc.start() for proc in procs] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:09:09.427

您的代码尝试`worker(0,1,2,3,4)`在新进程中运行。如果要`worker()`在多个进程中并行执行函数：

```
from multiprocessing import Pool

def worker(number):
    return number*number

if __name__ == '__main__':
    pool = Pool() # use all available CPUs
    for square in pool.imap(worker, [0,1,2,3,4]):
        print(square) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T13:52:07.737

当我运行它时，您的代码会导致错误。由于 args 使用逗号进行解析，因此您需要指定整个数组由单个参数组成。

```
import multiprocessing

def worker(number):
    print number
    return

if __name__ == '__main__':
    test = multiprocessing.Process(target=worker, args=([0,1,2,3,4],))
    test.start()
    test.join() 
```

另外，不要忘记在最后加入该过程。

# macos - 终端不能做 ls 或 cd

> ID：15236327
> 
> 赞同：0
> 
> 时间：2013-03-05T23:45:04.400
> 
> 标签：macos, terminal, ls, cd

谁能解释我的终端出了什么问题：

```

$ 回声 $PATH
=/usr/local/bin
$ ls
-bash: ls: 找不到命令
$光盘
-bash：查找：找不到命令

```

为什么这些命令不起作用？帮助？任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:51:49.347

我猜你的`.bash_profile`或`.bashrc`有一条看起来像的线

```
export PATH=/usr/local/bin 
```

这将覆盖所有需要在您的`$PATH`. 你需要改变这条线看起来像

```
export PATH=/usr/local/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:49:03.643

“ `ls`”住在“ `/bin`”和“ `find`”住在“ `/usr/bin`”。您需要将这些添加到您的 bash_profile 或 .bashrc 中的 $PATH。

# sql - Oracle 11g SQL 求和函数

> ID：15236335
> 
> 赞同：-1
> 
> 时间：2013-03-05T23:46:02.737
> 
> 标签：sql, oracle, oracle11g

我有两张表，一张名为 Bank_Account，另一张为 Transaction_history，结构如下：

```
Bank_Account
------------
BankID  
Balance

Transaction_history
------------
TransID  
BankID  
Value 
```

我需要将交易价值添加到银行账户的余额中，但是 Transaction_History 中的每个账户可能有不止一笔交易（例如，有人可以存入 1000 美元，然后在表中进一步提取 500 美元）。我将如何编码以便从正确的帐户余额中提取 500 美元？我提供了一个例子来尝试澄清。

```
Account 1 has a balance of $5000
Account 1 has $1000 deposited
Account 1 has $500 withdrawn
Account 1 current balance is $5500 
```

我当前的代码不是从新余额中取款，而是从原始代码中取款。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:02:44.750

做出以下假设

*   中的`VALUE`列`TRANSACTION_HISTORY`是存款为正，取款为负
*   您想将所有行应用`TRANSACTION_HISTORY`到当前余额`BANK_ACCOUNT`
*   并非表`BankID`中存在的每个都在表`BANK_ACCOUNT`中具有事务`TRANSACTION_HISTORY`

那么你需要一个相关的子查询。就像是

```
UPDATE bank_account acct
   SET balance = balance + (SELECT SUM(th.value)
                              FROM transaction_history th
                             WHERE th.bankID = acct.bankID)
 WHERE EXISTS( SELECT 1
                 FROM transaction_history th
                WHERE th.bankID = acct.bankID ) 
```

# android - 使用 onNavigationItemSelected 和 invalidateOptionsMenu 时的无限循环

> ID：15236338
> 
> 赞同：3
> 
> 时间：2013-03-05T23:46:19.340
> 
> 标签：android, android-actionbar, actionbarsherlock, infinite-loop, android-menu

我有一个包含列表导航和子菜单的操作栏。我想根据列表导航中的用户选择来更新子菜单项。我正在尝试调用`invalidateOptionsMenu()`，`onNavigationItemSelected()`但这会创建一个无限循环。

```
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    invalidateOptionsMenu();
    Log.i("onNavigationItemSelected", "onNavigationItemSelected called");
    return true;
} 
```

我正在使用`ActionBarSherlock`. 这是我的第一个 Android/Java 项目之一。

# c# - 使用 Watin 选择下拉列表中的每个项目

> ID：15236339
> 
> 赞同：0
> 
> 时间：2013-03-05T23:46:22.403
> 
> 标签：c#, watin

我想使用 Watin 遍历下拉列表。HTML 如下所示：

```
<select name="ctl00$Header1$ddlPropertyList" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$Header1$ddlPropertyList\&#39;,\&#39;\&#39;)&#39;, 0)" id="ctl00_Header1_ddlPropertyList" onmouseover="this.title=this.options[this.selectedIndex].title" style="width:325px;">
    <option selected="selected" value="0185795046:R:GPC:Eligible:F" title="0185795046 - ">0185795046 - </option>
    <option value="0325844068:R:GPC:Eligible:F" title="0325844068 - ">0325844068 - </option>
    <option value="0374795034:R:GPC:Eligible:F" title="0374795034 - ">0374795034 - </option>
    <option value="0510031035:C:GPC:Eligible:F" title="0510031035 - ">0510031035 - </option>
    <option value="1424795158:R:GPC:InEligible:F" title="1424795158 - ">1424795158 - </option>
    <option value="1550795037:R:GPC:Eligible:F" title="1550795037 - ">1550795037 - </option>

</select> 
```

当您单击下拉列表中的一个选项时，它会加载一个不同的页面，我想依次加载每个选项。基本上，我正在尝试做这样的事情：

```
SelectList ddl = browser.SelectList(Find.ById("ctl00$Header1$ddlPropertyList"));
            foreach (var item in ddl.AllContents)
            {
                ddl.Select(item);
            } 
```

但我很确定我的代码是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:50:42.647

在遍历项目列表时，有时我会遇到对象超出范围的情况，尤其是在使用页面对象模式时（使用它 - 很棒！）。所以我倾向于使用循环显式声明的计数，而不是引用要循环的列表。额外的好处：将计数存储在变量中并使用该变量比每次都引用浏览器对象要快；如果您有大量的项目要循环，则会有所不同。

一些粗略的未完成代码 - 基本上 alonp 所说的内容更加充实：

```
int numberOfItems = browser.SelectList(Find.ById("ctl00$Header1$ddlPropertyList")).count;

for(int i = 0; i < numberOfItems; i++)
{
    //this is one the "search" page
    browser.SelectList(Find.ById("ctl00$Header1$ddlPropertyList")).Options[i].Select;
    browser.yourGoAction();   <- assumes navigation isn't automatic when an item is selected.  EG:  button.Click() or something.

    //this is on the "results" page.
    do stuff

    //go back to the "search" page.
    browser.Back();
} 
```

# c++ - 我如何将可调用对象作为参数传递

> ID：15236340
> 
> 赞同：5
> 
> 时间：2013-03-05T23:46:23.880
> 
> 标签：c++, stl, lambda, callable, function-object

在 c++ 标准库中，几乎所有算法函数都将可调用对象作为参数。现在我想用我的程序试试这个东西。我打开了类似函数的标头，`find_if`但`search_n()`不太了解这些可调用对象参数的处理方式以及参数如何传递给它们，尤其是对于 lambda 对象（可`bind()`用于 lambdas，我不知道）

* * *

谁能解释一下这东西是如何工作的。提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T23:49:27.807

只需为类函数类型提供一个模板参数并采用该类型的参数：

```
template <typename Function>
void foo(Function func) {
  // Use func like so
  func(10);
} 
```

这就是标准库算法的做法。你可以像这样使用 lambda 调用它：

```
foo([](int x) { std::cout << (x * 2) << std::endl; }); 
```

当然，这要求您在文档中指定您期望作为类型的函数`Function`类型（直到我们得到（直到我们得到[Concepts](https://groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/concepts)）。它应该是一元的？二进制的？它应该采用什么类型的参数？它应该返回什么？

或者，您可以使用以下方法获取特定类型的函数`std::function`：

```
int foo(std::function<int(char)> func) {
  return func('a');
} 
```

这一次，`foo`将只接受带有`char`参数并返回的类函数对象`int`。但是，此方法有一个缺点，即编译器不太可能内联您作为`func`.

将函数作为参数的最基本方法是使用函数指针：

```
int foo(int (*func)(char)) {
  return func('a');
} 
```

但是，这*只会*采用函数指针（一些 lambda 可以转换为函数指针）。它不需要函子或任何其他类型的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:02:53.397

所有算法函数都必须获取一些函数来测试算法，例如 find_if 必须知道要在循环上测试哪个谓词。所有标准库都与模板一起使用，您可以将函数测试作为可调用对象传递。可调用对象是具有重载 operator() 的对象，有了它，std lib 将使用一些参数调用您发送的对象，并在必要时获取返回值。您可以在某些站点上找到所需的参数和返回值，特别是我总是使用[http://www.cplusplus.com/](http://www.cplusplus.com/)您可以在参考菜单中找到有关所有标准库的许多文档。

您的特殊示例： [http:](http://www.cplusplus.com/reference/algorithm/find_if/) //www.cplusplus.com/reference/algorithm/find_if/ find_if 将采用 2 个迭代器，一个作为第一个，另一个作为最后一个，以及一个可调用对象，它将采用您的迭代器指向的对象和返回一个布尔值。

# php - 正在处理实时 Magento 网站时的占位符页面

> ID：15236343
> 
> 赞同：0
> 
> 时间：2013-03-05T23:46:34.330
> 
> 标签：php, .htaccess, magento, hosting, magento-1.7

我正在将网站从 ASP 购物车转换为 Magento。我不得不将主机切换到 php 服务器。我正在测试的许多配置都要求我将站点托管在域上（SSL、模块密钥等）。

我设置了新主机，一切都设置好了数据库和 magento 明智的。但我想知道是否有办法在使用实时 url 上的 magento 站点时在根目录上有一个登录页面。因此，如果您访问 example.com，它会将您带到登录页面 (index.html)，但我可以通过访问 example.com/index.php 来绕过它。

我可以将它放在子域上，但这并不理想，因为我在子域上没有 SSL 证书，并且某些模块也不会在那里激活。

任何帮助将不胜感激，因为它现在已经启动并且不希望用户看到测试版网站。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:51:20.137

我使用了这个 .htaccess 文件，以便只有我可以访问该页面。

```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteCond %{REMOTE_ADDR} !^xxx\.xxx\.xxx\.xxx
 RewriteCond %{REQUEST_URI} !/index.html$ [NC]
 RewriteCond %{REQUEST_URI} !\.(jpe?g?|png|gif) [NC]
 RewriteRule .* /index.html [R=302,L]
</IfModule> 
```

（将“x”替换为您的 IP 地址）

这会将所有内容重定向到 index.html，除非它来自您的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:30:42.497

只需在根文件夹中创建一个文件并将其命名为“maintenance.flag”，magento 就会自动重定向到“Underconstruction”文件。您可能希望设置该文件的样式，因为默认设置相当难看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:50:19.850

如果您选择子目录版本，只需使用`.htaccess`验证访问权限：

[http://www.htaccesstools.com/htpasswd-generator/](http://www.htaccesstools.com/htpasswd-generator/)

否则，在根文件夹中，您可以执行以下操作

`.htaccess`：

```
DirectoryIndex index.html

AuthType Basic
AuthName "My Protected Area"
AuthUserFile .htpasswd
Require valid-user

<FilesMatch "index.html">
  Allow from all
  Satisfy any
</FilesMatch> 
```

# c# - 当在 clicked(this ,e) 处单击用户控件的按钮时引发 NullPointerException

> ID：15236344
> 
> 赞同：-2
> 
> 时间：2013-03-05T23:46:36.810
> 
> 标签：c#, winforms

在此代码中，Form1 假设侦听用户控件中的“添加”按钮并在 Form1 中显示消息。当我在调试模式下运行它时，它在 clicked(this,e) 处返回 NullPointerReference。有人可以帮我弄这个吗？谢谢。

用户控制：

```
public event EventHandler clicked;

public DataInput()
{
   InitializeComponent();
   Add.Click+= new EventHandler(Add_Click);
}

private void Add_Click(object sender, EventArgs e)
{
   items = textBox1.Text.PadRight(15) + textBox2.Text.PadRight(15) + textBox3.Text.PadRight(15);
   clicked(this, e);
} 
```

形式：

```
public Form1()
{
   InitializeComponent();
   dataInput.clicked+= new EventHandler(OnChanged);
}

public void OnChanged(Object sender, EventArgs e)
{
   MessageBox.Show("testing");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:52:40.377

因为没有订阅您的`clicked`事件，所以抛出异常。要么 Form1 尚未创建，也许您正在使用不同的构造函数，或者您稍后取消订阅。无论如何，在调用事件委托之前，您应该始终检查订阅。将您的代码更改`Add_Click`为：

```
EventHandler evnt = clicked;
if (evnt != null)
    evnt(this, e); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T23:52:26.560

不知道为什么“点击”事件处理程序为空。您应该始终确保在使用之前已初始化 EventHandler。IE

```
if(clicked != null)
{
    clicked(this, e);
} 
```

# java - 如何在 android eclipse 中创建一个较小的覆盖活动

> ID：15236345
> 
> 赞同：0
> 
> 时间：2013-03-05T23:46:38.433
> 
> 标签：java, android

我已经成功创建了一个覆盖活动，它允许将触摸输入发送到它后面的窗口。一切正常，但是，它显着减慢了设备的速度，我的猜测是因为它创建了如此大的覆盖？我真的不需要覆盖屏幕的整个区域，从技术上讲，它可以大到 2 x 2 像素。

这是我的代码

```
inflater = LayoutInflater.from(getApplicationContext());
final WindowManager.LayoutParams params = new  WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, WindowManager.LayoutParams.FLAG_FULLSCREEN, PixelFormat.TRANSLUCENT);

    params.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;
    params.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
    params.flags |= WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN;
    //params.flags |= WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;

    WindowManager wm = (WindowManager) getApplicationContext().getSystemService(WINDOW_SERVICE);
    ViewGroup mTopView = (ViewGroup)inflater.inflate(R.layout.dummy, null);
    getWindow().setAttributes(params);
    mTopView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
    wm.addView(mTopView, params); 
```

这正是我想要它做的，但就像我说的，它明显减慢了设备的速度。如何创建叠加层但仍保留系统性能？

# iis - 如何在 Windows Azure 上启用和下载 IIS 日志？

> ID：15236346
> 
> 赞同：3
> 
> 时间：2013-03-05T23:46:39.467
> 
> 标签：iis, azure, azure-storage, azure-diagnostics, iis-logs

有没有一种方法可以轻松地为 ASP 网站启用和下载 Windows Azure IIS 日志？我找到了几篇文章（关于将日志传输到存储），但对于应该随时可用的东西来说，这些似乎都太复杂了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:29:12.170

[阅读有关如何：为网站配置诊断和下载日志](http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-monitor-websites/#howtoconfigdiagnostics)的 Azure 文档的这一部分。基本上：

*   在配置管理页面的诊断部分配置日志记录
*   通过 FTP 为您的网站下载日志文件（参见网站仪表板管理页面并记下 FTP 站点）
*   使用描述的几种方法之一读取日志文件

# r - 在 R 中修改饼图中轮廓的宽度 - pie() 的 lwd 参数的等价物是什么？

> ID：15236347
> 
> 赞同：4
> 
> 时间：2013-03-05T23:46:44.657
> 
> 标签：r

我正在使用`base`R 绘图函数来生成饼图，并且我想更改每个饼图段轮廓的线条粗细。 `?pie`似乎表明我可以添加可选的图形参数，但添加`lwd=`似乎不起作用。任何人都知道我如何能够做到这一点。我还不精通在 中制作饼图`ggplot`，并且想坚持使用`base`R 绘图（如果可能的话）。

```
library(RColorBrewer)

x1 <- data.frame(V1 = c(200, 100)) ##  generate data

row.names(x1) <- c("A", "B")

x1$pct <- round((x1$V1/sum(x1$V1))*100, 1)

lbls1 <- paste(row.names(x1), "-(",x1$pct, '%)', sep='') ## add some informative stuff

pie(x1$V1, labels=lbls1, col=tail(brewer.pal(3, 'PuBu'), n=2), 
           main=paste('My 3.1415'), cex=1.1, lwd= 3) 
```

注意`lwd=`不会像在其他基础绘图中那样增加线条粗细。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T23:54:00.303

`polygon`对和`lines`内部的调用`pie`没有通过`...`或`lwd`

```
...
polygon(c(P$x, 0), c(P$y, 0), density = density[i], angle = angle[i], 
        border = border[i], col = col[i], lty = lty[i])
    P <- t2xy(mean(x[i + 0:1]))
    lab <- as.character(labels[i])
    if (!is.na(lab) && nzchar(lab)) {
        lines(c(1, 1.05) * P$x, c(1, 1.05) * P$y)
.... 
```

您可以通过在`par(lwd = 2)`外部和之前设置（或其他）来解决此问题`pie`

IE

```
# save original settings
opar <- par(no.readonly = TRUE)
par(lwd = 2)
pie(x1$V1, labels=lbls1, col=tail(brewer.pal(3, 'PuBu'), n=2), 
  main=paste('My 3.1415'), cex=1.1) 
```

![在此处输入图像描述](../Images/03b9d4015a94c11db0c3c4ec654b8ca7.png)

```
par(lwd = 3) 
```

![在此处输入图像描述](../Images/7f3d039c96859246314f559bad998ac4.png)

```
# reset to original
par(opar) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T23:53:18.107

目前，内部`pie`进行实际绘图的函数是`polygon`，下面是它的调用方式：

```
polygon(c(P$x, 0), c(P$y, 0), density = density[i], angle = angle[i], 
        border = border[i], col = col[i], lty = lty[i]) 
```

请注意，没有`lwd`参数，更关键的是，没有`...`参数可以接受可能没有硬编码的参数。

创建一个新的 pie2 函数。首先键入饼图，复制代码并进行一些更改：

```
pie2 <- 
   function (x, labels = names(x), edges = 200, radius = 0.8, clockwise = FALSE, 
             init.angle = if (clockwise) 90 else 0, density = NULL, angle = 45, 
             col = NULL, border = NULL, lty = NULL, main = NULL,  lwd=1,...) 

    {
       ................
     polygon(c(P$x, 0), c(P$y, 0), density = density[i], angle = angle[i], 
           border = border[i], col = col[i], lty = lty[i], lwd=lwd )
       .................

       }
  pie2(x1$V1, labels=lbls1, col=tail(brewer.pal(3, 'PuBu'), n=2), 
              main=paste('My 3.1415'), cex=1.1, lwd=5) 
```

# c# - 如何通过使用 StringBuilder 声明的 P/Invoke 传递 nullptr？

> ID：15236348
> 
> 赞同：2
> 
> 时间：2013-03-05T23:46:47.530
> 
> 标签：c#, winapi, pinvoke

考虑一个典型的 P/Invoke 声明，如下所示：

```
[DllImport("advapi32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern bool LookupAccountName(
string SystemName,
string accountName,
IntPtr pSid,
ref uint cbSid,
[MarshalAs(UnmanagedType.LPWStr)] StringBuilder ReferencedDomainName,
ref uint ReferencedDomainNameCount,
out SID_NAME_USE SIDUse); 
```

[LookupAccountName 的 MSDN 文档说明了](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379159.aspx)这一点`pSid`，如果客户愿意，`ReferencedDomainName`也可能如此。`nullptr`过关`nullptr`很`pSid`容易；只是通过`IntPtr.Zero`。但是一个人应该通过什么来获得 a `StringBuilder`？

我不想传递一个空的`StringBuilder`，因为我不希望这个调用失败`ERROR_INSUFFICIENT_BUFFER`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T23:50:48.070

你可以只传递`null`这个参数；它将被编组为空指针。

# reporting-services - 如何更改 SSRS 中参数下拉框的宽度？

> ID：15236349
> 
> 赞同：13
> 
> 时间：2013-03-05T23:46:47.887
> 
> 标签：reporting-services, ssrs-2008

有没有办法控制参数下拉框的大小？在我当前的下拉框中，宽度根据带有最长标签的选项增加，这导致我的报告宽度增加超出我的控制。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T15:23:50.540

这是一个常见的抱怨。没有简单的方法来控制参数界面，例如改变框的宽度。您也许可以使用一些 JavaScript 破解 html。或者，您可以全力以赴并构建自己的界面来收集参数，然后通过 Web 服务或 URL 访问调用 SSRS 报告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-27T15:28:50.080

我发现工作是使用 LEFT 函数来设置字段的长度。在我的情况下，我的参数（程序类型）的描述列被定义为 varchar(200)，因此绘制的下拉列表非常宽。当我将 SQL 更改为 SELECT ProgramID, LEFT(Description, 25)... 时，下拉列表的大小更好，而且大多数描述都少于 25 个字符。

# url-rewriting - IIS 8.0 目录 HttpRedirect

> ID：15236350
> 
> 赞同：1
> 
> 时间：2013-03-05T23:46:48.187
> 
> 标签：url-rewriting, web-config, http-redirect, url-rewrite-module, iis-8

IIS 中有没有办法重定向以下请求： `http://mysite/report1/img/logo.png`为`http://mysite/myapplication/report1/images/logo.png`img 目录中的所有图像而无需单独显式映射它们？

附加要求-我在映射到“report1”虚拟目录的驱动器上有数千个报告-每个都有自己的“img”目录-因此也没有合理的方法可以使用 IIS 管理器单独映射这些目录。

我正在寻找是否有某种方法可以在 IIS 服务器 web.config 文件中添加通配符（或其他）HttpRedirect 以正确映射所有报告的所有图像。我试过了：

```
<add wildcard="*res/img/" destination="/reporter/content/images/reportimages" /> 
```

但这似乎没有任何效果。

编辑：更多的研究表明，使用 URL Rewrite 模块可能有效......但到目前为止我还没有让它工作。

我的规则如下所示（在 web.config 中）：

```
<rules>
    <rule name="Redirect rule1 for ImageRedirect">
        <match url=".*" />
            <conditions>
                <add input="{ImageRedirect:{REQUEST_URI}}" matchType="Pattern" pattern="/res/img/(.+)" ignoreCase="true" negate="false" />
            </conditions>
            <action type="Redirect" url="{HTTP_HOST}/reporter/content/reporterimages/{C:1}" appendQueryString="false" />
     </rule>
</rules> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:27:44.703

您使用 URL Rewrite 模块走在正确的轨道上。
在您的情况下，最简单的规则是：

```
<rule name="Rewrite images" stopProcessing="true">
  <match url="^/report1/img/(.+)$" />
  <action type="Rewrite" url="/myapplication/report1/images/{R:1}" />
</rule> 
```

它会检查请求的 url 是否匹配`^/report1/img/(.+)$`，如果匹配，则触发对新文件夹的重写。

如果您想改用重定向：

```
<rule name="Redirect images" stopProcessing="true">
  <match url="^/report1/img/(.+)$" />
  <action type="Redirect" url="/myapplication/report1/images/{R:1}" />
</rule> 
```

（如果不指定，默认情况下重定向是永久的 (301)）

# c# - 什么是授权：< 标准 OAuth 凭据 >

> ID：15236352
> 
> 赞同：0
> 
> 时间：2013-03-05T23:47:02.633
> 
> 标签：c#, oauth, yahoo-api, yahoo-messenger

什么是`Authorization: < Standard OAuth credentials >`？以及如何通过 C# 中的 post 方法发送它？

我确实有 `OAuth`访问令牌，它是一个字符串

```
oauth_token=A%3Dvh....aRg--&oauth_token_secret=bd46a....c9239&oauth_expires_in=3600&oauth_session_handle=ALtT.....3J1N4Zg--&oauth_authorization_expires_in=784964948&xoauth_yahoo_guid=TUSKED5...NCIA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:56:31.927

这个特定的指南可能会对您有所帮助，他非常详细地解释了每个[过程](http://www.deanhume.com/Home/BlogPost/a-simple-guide-to-using-oauth-with-c-/49)。详细信息是将其与以下网站一起使用：

*   推特
*   推特图片
*   Facebook
*   弗里克
*   ETC

但它详细介绍了使用您收到的令牌并物理链接您的应用程序，以便您正确使用这些 OAuth 请求。

我不确定我是否误解了你并且你没有使用这样的 API，如果你能澄清我很乐意尝试帮助你。

# javascript - javascript函数不在html中执行

> ID：15236353
> 
> 赞同：0
> 
> 时间：2013-03-05T23:47:09.057
> 
> 标签：javascript, html

这必须是一个简单的问题，但我找不到答案。我试图在模态中调用我的javascript函数“Update_PointTracker_Account”，以便在打开模态时执行。由于某种原因，它不会执行。但是，Onclick 按钮完美地调用了该函数。我究竟做错了什么？

```
 <div class="modal hide fade" id="Refresh_PointTracker_Program" data-keyboard="false" data-backdrop="static" aria-hidden="true">
            <div class="modal-header" align='center'>
                <h3>Refreshing PointTracker Program</h3>
            </div>

            <div class="modal-body" style="text-align: center">
                <p> The points program is being refreshed</p>
            </div>

            <div style="text-align: center" id='updated_program_list'></div>

            <script>
                Update_PointTracker_Account();
            </script>

            <div class="modal-footer">
                <button onclick ="Update_PointTracker_Account()" class="btn"  aria-hidden="true">Update</button>
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:48:49.493

那是因为你根本没有定义函数`Update_PointTracker_Account()`。

它必须以内联 JS 或导入的 JS 文件的形式出现在页面中的某个位置，并且应该如下所示：

```
function Update_PointTracker_Account() {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:48:52.033

我假设这个模态正在`.innerHTML`某个地方加载。

`<script>`使用 .插入时，标签不会运行`innerHTML`。相反，您应该在分配`innerHTML`. 按钮单击起作用的原因是它的处理方式不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:50:13.423

尝试在调用模态时使用回调或验证是否`Update_PointTracker_Account()`在调用之前声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:54:13.890

第一：除非您在 html5 文档中您应该在脚本标签中添加 type 属性，第二：该函数是否存在？希望能帮助到你

# javascript - jquery $("#id").html(data) 不适用于 Firefox，但适用于 chrome

> ID：15236362
> 
> 赞同：1
> 
> 时间：2013-03-05T23:47:59.963
> 
> 标签：javascript, jquery, html, ajax, firefox

jquery 不适用于 Firefox，但适用于 chrome。
主要问题出在 $("#p1").html(data) 行，它没有在浏览器上显示数据。
谁能帮我弄清楚为什么？

html代码：
1）当我点击开始按钮时，后端会发回一个字符串。
2) 在handleData，$("#p1").html(data) 不在firefox 上显示该字符串（但在chrome 上，没关系）。

```
<html>
<head>
<script src="js/jquery/jquery-1.7.2.min.js" type="text/javascript"></script>

<script type="text/javascript">
    function handleData(data, status) {
        $("#p1").html(data);
    };

    $(document).ready(function() {
        $("#start").click(function() {
            $.get("testAsync?start=yes", handleData);
        });

        $("#submitResult").click(function() {
            // jquery get the result value.
            var $result = $("#result").val();
            $.get("testAsync?result=" + $result, handleData);
        });
    });
</script>
</head>
<body>

    <div id="content">
        <button id="start">Start Test</button>

        <p id="p1"></p>

        <input type="text" id="result" value="" /> <input type="button"
            id="submitResult" value="Submit" />
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:21:13.573

看起来 Firefox 对**"content-type"**非常严格，如果我不指定它，它会认为**"text/xml"**，因此导致浏览器无法正确呈现它。
如果我将它设置为**"text/html"**，那么我可以看到显示的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:18:25.543

您可能希望将返回 DataType 添加到 $.get [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/) Firefox 可能“猜测”（是的，jQuery API 这么说）返回类型错误。

# python - 找到第 9 个斐波那契素数

> ID：15236365
> 
> 赞同：0
> 
> 时间：2013-03-05T23:48:21.073
> 
> 标签：python, python-3.x, fibonacci

我不确定这是否是正确的地方，但我遇到了代码方面的问题。我试图找到第 9 个斐波那契数，这是一个素数，但遇到了问题。首先，我的检查数字是否为素数的函数对于单个素数（2、3、5、7）返回 None 。接下来，我认为我正在寻找的值是 514229，如此处所示[，](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibtable.html)但我的程序显示值 17711 作为第 9 个斐波那契素数，这是不正确的。我的代码发布在下面：

```
def isPrime(n):

    n = abs(int(n))

   if n < 2:
        return False

    elif n == 2:
        return True

    elif not n & 1:
        return False

    else:
        for x in range(3, n/2):
            if n % x == 0:
                return False
            return True

def chkFibonacci():

    num1 = 1
    num2 = 1
    mySum = 0
    ctr = 0
    choice = 'n'

    while (choice != 'y'):
        mySum = num1+num2
        #print mySum
        if (isPrime(mySum)== True):
            ctr = ctr + 1
            print mySum
            if (ctr == 9):
                print mySum
                break
        num1 = num2
        num2 = mySum    

chkFibonacci()
print isPrime(3) 
```

任何帮助表示赞赏。提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T23:51:06.807

`return True`在`else`分支的`isPrime`似乎缩进太多了。

# asp.net - Web 应用程序不适用于服务器名称和 Windows 身份验证，但适用于 IP 地址

> ID：15236367
> 
> 赞同：0
> 
> 时间：2013-03-05T23:48:30.103
> 
> 标签：asp.net, iis-6, ironspeed

我有一个在使用 Windows 身份验证的 II 6 开发服务器上运行的应用程序。这是一个 Iron Speed 应用程序，我更新了一些项目并将其部署到之前测试过的测试服务器上。部署后，当我使用全名 devweb.etc 时，应用程序无法使用 Windows 身份验证，甚至无法获得凭据登录。它显示 403 错误。但是，如果我使用 IP 地址，一切正常。如果取消 Windows 身份验证，应用程序会显示出来，但当然不能说它需要登录，但它确实正确解析了网址。我在没有窗口身份验证的 devweb 服务器上有其他应用程序可以正常工作。

有没有人知道什么可能导致应用程序以这种方式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:08:52.223

这最终成为与防火墙相关的问题。更具体地说，防火墙将服务器名称为 devweb 的各种网站切换到另一台运行良好的服务器。因此，当它看起来像服务器工作时，因为 devweb 站点正在工作，但我在 devweb 上的特定站点没有工作，除非使用 ipaddress。事实上，服务器工作不正常，这是一个 DNS 条目问题。总的来说，这是一部非常令人沮丧的错误喜剧，花了我太多时间。

# opengl - 如何将特定系统从搅拌机导出到 OBJ 文件

> ID：15236368
> 
> 赞同：0
> 
> 时间：2013-03-05T23:48:39.207
> 
> 标签：opengl, graphics, export, blender

我创建了一个图形引擎，它能够在 openGL 上下文中导入网格及其材质。现在我的目标是在 Blender 上创建一个特定的头发系统并将其导出为 OBJ + MTL 文件。我总是这样做，但没有材料配置（我只是创建了一个 UV 球体，使用头发特定系统在其上添加头发并将其转换为将头发与球体分离）。但是当我为特定系统配置特定材料时（例如，在 strand 选项中修改头发的根部尺寸和顶部尺寸（50 到 1））和接下来（转换后）我导出特定系统，材料不考虑。我希望头发看起来像三角形，但事实并非如此）。在“渲染”菜单中，如果我点击“渲染图像”，特定的系统外观很好，但如果我点击“渲染 openGL” 材料配置不像我在 OBJ 文件中的导出。你能解释一下为什么吗？

您知道出口如何考虑材料配置吗？

# python - Python Youtube API：尝试访问稍后观看会导致 URI 无效

> ID：15236369
> 
> 赞同：0
> 
> 时间：2013-03-05T23:48:39.327
> 
> 标签：python, youtube-api

相信已解决：Python API 仅支持 v1，而 watch later 是在 v2 中添加的。[源](https://groups.google.com/forum/#!topic/youtube-api-gdata/EQJKi-gjxX8/discussion "资源")
解决方案：使用“实验”API v3

* * *

我正在尝试使用 Youtube API 访问我的稍后观看播放列表。下面是我正在使用的代码。

```
import gdata.youtube
import gdata.youtube.service

yt_service = gdata.youtube.service.YouTubeService()
yt_service.ssl = True
yt_service.developer_key = 'REDACTED'
yt_service.email = 'REDACTED'
yt_service.password = 'REDACTED'
yt_service.ProgrammaticLogin()

playlist_uri = 'https://gdata.youtube.com/feeds/api/users/default/watch_later?v=2'
playlist_video_feed = yt_service.GetYouTubePlaylistVideoFeed(uri=playlist_uri)
for playlist_video_entry in playlist_video_feed.entry:
  print playlist_video_entry.title.text 
```

我收到以下错误。

```
Traceback (most recent call last):
  File "Youtube.py", line 21, in <module>
    playlist_video_feed = yt_service.GetYouTubePlaylistVideoFeed(uri=playlist_uri)
  File "/Library/Python/2.6/site-packages/gdata/youtube/service.py", line 393, in GetYouTubePlaylistVideoFeed
    uri, converter=gdata.youtube.YouTubePlaylistVideoFeedFromString)
  File "/Library/Python/2.6/site-packages/gdata/service.py", line 1108, in Get
    'reason': server_response.reason, 'body': result_body}
gdata.service.RequestError: {'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'} 
```

似乎 URI [https://gdata.youtube.com/feeds/api/users/default/watch_later?v=2](https://gdata.youtube.com/feeds/api/users/default/watch_later?v=2)无效。然而，这是在谷歌文档中使用的。是我用错了，还是这里有其他问题？

此外，如果我将 URI 更改为`http://gdata.youtube.com/feeds/api/playlists/63F0C78739B09958`它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:46:21.093

您应该检查您的身份验证。根据[检索和更新用户的“稍后观看”播放列表](https://developers.google.com/youtube/2.0/developers_guide_protocol#Retrieving_watch_later_playlist)：

> 同样，仅当满足以下任一条件时，该链接才会出现在配置文件条目中：
> 
> 您提交经过身份验证的请求以检索登录用户自己的个人资料。
> 
> watch_later 播放列表对您正在检索其个人资料的用户公开可用。
> 
> 如果您尝试检索 watch_later 播放列表并且上述条件均不成立，API 服务器将返回 40x HTTP 响应代码。

由于满足了第二个公开可用的条件，第二个链接很可能会起作用。我注意到您的示例中缺少的一件事是客户端 ID/来源：

```
# A complete client login request
yt_service.email = 'jo@gmail.com'
yt_service.password = 'mypassword'
yt_service.source = 'my-example-application'
yt_service.developer_key = 'ABC123...'
yt_service.client_id = 'my-example-application'
yt_service.ProgrammaticLogin() 
```

您应该对此进行调查并确保您的身份验证正常进行。

# sql - SQL 查询以选择“名称”，其最小“时间戳”按“group_fk”分组

> ID：15236379
> 
> 赞同：-2
> 
> 时间：2013-03-05T23:49:46.160
> 
> 标签：sql

考虑一个表“t1”：

```
+------------------------------+
| timestamp  | name | group_fk |
+------------+------+----------+
| 1362297600 | abc  | 41       |
| 1362384000 | bcd  | 41       |
| 1362470400 | cde  | 41       |
| 1362556800 | def  | 42       |
| 1362643200 | efg  | 42       |
+------------------------------+ 
```

我需要在每个“group_fk”中选择具有最小“时间戳”的“名称”。所以结果应该是：“abc”和“def”。

我知道这样做的丑陋（并不总是正确）的方式：

```
select name
from t1
where t1.timestamp IN (
  select min(t1_inner.timestamp)
  from t1 t1_inner
  group by t1_inner.group_fk
) 
```

有更好的解决方案吗？

-- DM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:53:50.970

这可以通过许多不同的方式完成，包括使用子查询：

```
select t1.name, t2.minval
from table1 t1
inner join
(
  select min(timestamp) MinVal,
    group_fk
  from table1
  group by group_fk
) t2
  on t1.timestamp = t2.minval
  and t1.group_fk = t2.group_fk 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/78ac1/4)。

或者，如果您的数据库具有窗口功能，您可以使用`row_number()`：

```
select name, timestamp
from 
(
  select name, timestamp,
    row_number() over(partition by group_fk order by timestamp) rn
  from table1
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/78ac1/6)

# c++ - RAD Studio，在设计模式下锁定项目位置

> ID：15236384
> 
> 赞同：1
> 
> 时间：2013-03-05T23:50:02.670
> 
> 标签：c++, c++builder, vcl

我已经为此搜索了文档，我觉得这个问题有点愚蠢，因为这似乎是常识。使用 GUI 设计器时必须锁定 VCL 控件，因为没有撤消操作，而且很容易意外移动某些东西，愚蠢的自动对齐会破坏某些东西的放置。

**我以前做过，但我找不到在设计模式下*锁定*元素的选项。**

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:41:51.393

AFAIK，表单设计器本身没有内置这样的选项来锁定控件的位置。您一定一直在使用第三方扩展插件来控制它。

# ios - 在哪里创建自定义 UI 元素？

> ID：15236388
> 
> 赞同：2
> 
> 时间：2013-03-05T23:50:15.400
> 
> 标签：ios, xcode, user-interface

一个想成为 iOS 开发者的快速问题。我想只以编程方式为没有 Interface Builder 的 iPhone 应用程序创建 UI。但是，我想坚持 MVC 建议并将 V 和 C 分开并拥有清晰可读的代码，因此：

*   我创建 UIView 类文件（例如 SplashView.h 和 SplashView.m）
*   我创建 UIViewController 类文件（SplashViewController.h 和 SplashViewController.m）
*   我在 UIView 类文件中定义我的 UI 元素（视图、子视图、按钮和文本字段）
*   我在视图控制器的 loadView 方法中加载主视图，然后在视图控制器的 viewDidLoad 方法中执行其他操作

这是一个正确的方法吗？

问题的第二部分，独立于第一部分的 Y/N 答案。我在哪里定义这些自定义 UI 元素？- 在视图的 initWithFrame: 方法中？- 在单独的（属性获取器？属性设置器？）方法中？即我是否必须首先在 .h 文件中将每个 UI 元素声明为属性？

如果这些问题听起来有点无知，那一定是因为它们是 :) 我在 StackOverflow 上找到了很多示例代码，但几乎没有说明你实际将它放在哪里。我将非常感谢任何帮助，特别是如果您可以粘贴/引用一些相关代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:08:36.533

你的清单是正确的。这就是我做所有应用程序的方式。没有界面生成器，只有代码。

`initXXX`每个自定义视图通常以适当的方法创建自己的子视图。这可能是`initWithFrame:`，但您可以根据需要定义其他人。子视图布局可以通过约束、自动调整掩码或通过实现`layoutSubview`.

每个视图控制器都会在`viewDidLoad`. 视图布局可以通过约束、自动调整掩码或通过实现`viewWillLayoutSubviews`.

属性的使用是完全可选的。为要从外部类设置/获取的任何内容创建公共属性。可以选择为实现内部的值创建私有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:24:16.413

前往[Apple 网站获取示例代码](http://bit.ly/WO1uPz)；下载与您的目标相似的应用程序的所有内容。

# c++ - Visual Studio 远程编译和运行

> ID：15236389
> 
> 赞同：7
> 
> 时间：2013-03-05T23:50:16.747
> 
> 标签：c++, visual-studio-2012, ide

我试图弄清楚是否可以将 Visual Studio 2012 用作完整的 linux 开发套件。我知道这不是这里的常规问题，但请与我合作。到目前为止，我能够使用 Visual Studio 作为文本编辑器在我的计算机上运行的 Linux 虚拟机中进行编辑。

我这样做的方法是设置一个永久的 ssh 门户，在我的 Windows 中充当硬盘驱动器。我使用一个名为 WebDrive 的程序完成了这项工作：

![在此处输入图像描述](../Images/8291a73be2997951f57dd59e91448a02.png)

这很酷，这意味着我能够从 Visual Studio 中全面查看我的 Linux c++ 项目。这提供了我喜欢 Visual Studio 的所有很酷的 C++ 编辑功能。

*那么从这里到哪里呢？*

基本上我现在拥有的是一个沉重的美化文本编辑器。

我想做的是让整个'shabam'工作。

**我希望能够在服务器地址上远程编译和运行来自 Visual Studio 的代码。**是否可以？代码是用 cmake 和 g++ 编译器构建的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T17:49:35.883

你最好的选择是[http://www.wingdb.com/](http://www.wingdb.com/)。WinGDB 允许在 VS studio 中工作并直接在远程 Linux 机器上编译。支持在 VS 中进行全步调试。对于 DLL，您可以附加到在 VS 内的 Linux 构建服务器上运行的远程进程。在更友好的 VS 开发环境中工作但仍具有 Linux 开发堆栈的全部功能的绝佳解决方案。也可以通过 VS 项目文件自动生成 makefile。希望这可以帮助。

# xml - 架构切片/瘦身工具

> ID：15236392
> 
> 赞同：3
> 
> 时间：2013-03-05T23:50:22.223
> 
> 标签：xml, xsd

我有 20,000 行+ ACORD（保险业的标准架构）架构。我想“精简”或“切片”模式以仅包含我们将在事务中使用的那些数据元素。虽然我当然可以手动完成，但这是一个艰苦的过程。

有没有人使用实用程序来促进这些子模式的定义？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:35:21.733

[QTAssistant](http://www.paschidev.com)（我与它相关联） XML Schema Refactoring (XSR) 是一个可以很容易做到这一点的工具。

从概念上讲，它涉及两个工作模块：

*   在架构集合中组织源 XSD。
*   使用一个或多个 XSD 文件集定义“发布”。

支持交互式（使用图形用户界面）和命令行，后者用于持续集成堆栈等。

假设您想要只发布 UserAuthRequest/Response 和所有其他依赖项。示例设置如下所示；主要内容是：

*   合集（这里是v2.26.0）
*   引用此特定版本的版本（ACORD 版本）。这个想法是，如果将来您添加另一个版本，您可以“升级”您的版本以引用新版本，从而轻松保持对新版本标准的遵守，而无需重做“编辑”。
*   带有关联过滤器的文件集（20% 发布）。在这种情况下，我设置了一个文件，该文件是“播种”的，其中包含两个元素 UserAuthRequest 和 UserAuthResponse。

![QTAsistant ACORD 设置](../Images/5fbd69a48bb97ed67493b79f0f6143ef.png)

然后，您可以通过注入序列、排除、重命名、重新键入、XML 命名空间“重定向”等来进一步定制内容模型——我们称之为“重构”。单击引用，然后展开局部排除（如果您想摆脱粒子等）。完成后，单击**生成**- 就完成了。

![QTAssistant 过滤 ACORD 版本](../Images/4ced5ac171fa18d9f2741bac7171d8c9.png)

然后可以将保存的 XSR 文件作为参数传递给命令行实用程序，以从标签生成相同的文件，并将生成的文件重新签入，传递给 xsd.exe 或 xjc

从统计数据可以看出，从 4633 个元素、1123 个复杂类型和 589 个简单类型中，剩下 40 个元素、14 个复杂类型和 6 个简单类型。

通过选择所需的特定组件，您可以根据需要在输出文件中添加/调整；重构引擎将自动引入所有依赖项。

默认情况下，生成的文件是排序的：简单类型、复杂类型、元素。您可以通过指向“模型文件”来覆盖它并保持“原始”布局 - 可以是原始 XSD 或任何其他文件。当人们出于任何合规原因想要依赖“愚蠢的”文本/xml比较工具时，这会派上用场。

![在此处输入图像描述](../Images/9aa91d6f57eb6ec124fd601d69f6fcbf.png)

额外的东西包括显示 XSD 组件之间关系的视图......

![在此处输入图像描述](../Images/da1e00e5683eb08f2944fd6657b1db83.png)

或者，在“可推断”的情况下，XSD 的关系视图（在 .NET 上称为 DataSet）：

![在此处输入图像描述](../Images/3363852605fd84a9b0613002f7b41a83.png)

# maven - 使用 maven 解压 EAR 文件

> ID：15236394
> 
> 赞同：1
> 
> 时间：2013-03-05T23:50:40.173
> 
> 标签：maven, ear

我有一个来自某个构建的 EAR 文件。我想将此 EAR 文件的内容提取到另一个文件夹中。我很困惑如何做到这一点。我已经查看并尝试了 [http://maven.apache.org/plugins/maven-ear-plugin/](http://maven.apache.org/plugins/maven-ear-plugin/) 和 [http://maven.apache.org/plugins/maven-dependency-plugin/usage.html](http://maven.apache.org/plugins/maven-dependency-plugin/usage.html)

但要么 maven 无法找到该文件，要么它有依赖问题。

由于我是 Maven 新手，我不明白如何设置这些插件。

使用以下插件时出现以下错误。

*[在http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)中找不到 ECM:ECM:ear:1.0被缓存在本地存储库中*

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.6</version>
            <executions>
                <execution>
                    <id>unpack</id>
                    <phase>package</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>ECM</groupId>
                                <artifactId>ECM</artifactId>
                                <version>1.0</version>
                                <type>ear</type>
                            </artifactItem>
                        </artifactItems>
                        <outputDirectory>${project.build.directory}/earoutput</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:38:22.877

您可以使用`dependency:unpack-dependencies`. 我只是修改了我的答案，因为根据您的评论，您的耳朵是由其他构建生成的。如果您没有可以部署您的 ear 工件的 Enterprise 存储库，则必须使用“系统”范围，但请注意，通常**不鼓励**这样做。

将以下依赖项添加到您的 pom.xml

> ```
> <dependency>
>     <groupId>ECM</groupId>
>     <artifactId>ECM</artifactId>
>     <version>1.0</version>
>     <type>ear</type>
>     <scope>system</scope>
>     <systemPath>/path/to/your/abc.ear</systemPath>
> </dependency> 
> ```

将以下插件添加到您的 postBuild 模块 pom.xml

> ```
>  <plugin>
>     <groupId>org.apache.maven.plugins</groupId>
>     <artifactId>maven-dependency-plugin</artifactId>
>     <version>2.6</version>
>     <executions>
>         <execution>
>             <id>unpack</id>
>             <phase>package</phase>
>             <goals>
>                 <goal>unpack-dependencies</goal>
>             </goals>
>             <configuration>
>                 <includeArtifactIds>ECM</includeArtifactIds>
>                 <outputDirectory>${project.build.directory}/earoutput</outputDirectory>
>             </configuration>
>         </execution>
>     </executions>
>  </plugin> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:01:22.323

[Maven 依赖插件](https://maven.apache.org/plugins/maven-dependency-plugin/)及其解[包](https://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)目标可以做到这一点。

示例配置：

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-dependency-plugin</artifactId>
 <version>2.6</version>
 <executions>
   <execution>
     <id>unpack</id>
     <phase>package</phase>
     <goals>
       <goal>unpack</goal>
     </goals>
     <configuration>
       <artifactItems>
         <artifactItem>
           <groupId>myear</groupId>
           <artifactId>myear</artifactId>
           <version>1.0</version>
           <type>ear</type>
         </artifactItem>
       </artifactItems>
       <outputDirectory>${project.build.directory}/earoutput</outputDirectory>
     </configuration>
   </execution>
 </executions>
</plugin> 
```

这将获取“myear.ear”工件并将其提取到“target/earoutput”目录。这也适用于 JAR、WAR 和任何其他类似 zip 的文件。执行的阶段是“包”——如果您需要在构建的其他部分使用这些资源，这可能为时已晚。如果需要，将阶段更改为更早的内容，例如“生成资源”。

您提到您已经尝试使用依赖插件。EAR 文件是否来自另一个 Maven 项目，是否已安装在本地 Maven 存储库中？如果它仍然不起作用，请发布您尝试使用的插件配置。

* * *

（编辑：更新依赖项和本地存储库的信息）

为此，需要将您的 EAR 文件放入本地 Maven 存储库（这只是您磁盘上的一个目录）。但是，如果其他人也需要构建您的项目，您有几个选择：

*   将 EAR 导入本地存储库，并部署到远程存储库，以便每个人都可以获取它（推荐，但需要您设置公司 Maven 存储库）
*   将 EAR 提供给每个人，并让他们使用几个 Maven 命令将其放入本地存储库（对于一些开发人员来说可能没问题，比设置整个存储库服务器的开销更少）
*   将依赖的 EAR 检入项目下的源代码控制中，并将其解包（不是推荐的做事方式）到项目的目标中

* * *

导入本地存储库很容易。[它与这些说明](https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)非常相似。

使用以下命令：

```
mvn install:install-file -Dfile=<path-to-EAR-file-on-local-filesystem> -DgroupId=myear
-DartifactId=myear -Dversion=1.0 -Dpackaging=ear 
```

（根据需要修改 path、groupId、artifactId 和 version）

组 ID 和工件 ID 只是为了唯一标识工件。

在本地存储库中安装它后，依赖插件应该可以工作并找到工件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:53:07.233

你看过[这个用于解压模块的 Maven EAR 插件示例了](http://maven.apache.org/plugins/maven-ear-plugin/examples/unpacking-a-module.html)吗？

# c# - Mono for Android 上 mvvmcross 中的意图

> ID：15236399
> 
> 赞同：1
> 
> 时间：2013-03-05T23:50:51.533
> 
> 标签：c#, xamarin.android, monodevelop, mvvmcross, xamarin-studio

我最近升级到在 Windows 上运行的 Xamarin Studio。我有一个简单的 mvvmcross TipCalculator 教程实现，它在 Android 和各种 Windows 版本上运行良好。升级后，Android 应用程序开始在 Main 活动中抛出 NullReferenceExceptions（如下）：

```
[Activity(Label = "TipCalculator.Android", MainLauncher = true, Icon = "@drawable/icon")]
public class TipCalculatorActivity : MvxBindingActivityView<TipCalculatorViewModel>

{
    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.TipView);//Throws NullReferenceException
    }

} 
```

在对 mvvmcross 代码做了一些挖掘之后，我在 MvxAndroidViewsContainer 类中找到了这个方法：

```
public virtual IMvxViewModel Load(Intent intent, Type viewModelTypeHint)
{
    if (intent == null)
    {
        // TODO - some trace here would be nice...
        return Activator.CreateInstance(viewModelTypeHint) as IMvxViewModel;
        //return null;
    }

    if (intent.Action == Intent.ActionMain)
    {
        // TODO - some trace here would be nice...
        return Activator.CreateInstance(viewModelTypeHint) as IMvxViewModel;
    }

    if (intent.Extras == null)
    {
        // TODO - some trace here would be nice...
        return Activator.CreateInstance(viewModelTypeHint) as IMvxViewModel;
        //return null;
    }

    IMvxViewModel mvxViewModel;
    if (TryGetEmbeddedViewModel(intent, out mvxViewModel))
        return mvxViewModel;

    return CreateViewModelFromIntent(intent);
} 
```

在原始代码中，有两种情况会返回 null。在其中的每一个中，我都将其替换为对 Activator.CreateInstance() 的调用。

我不确定原始实现背后的基本原理是什么，我有点担心我破坏了一些东西。任何人都可以解释为什么这种方法会返回 null 以及我是否破坏了 mvvmcross 中的一些基本内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:56:15.597

我不知道您当前的问题与新的 Xamarin 工具有什么关系。您对 NullReferenceExceptions、更改的文件和博客文章的描述让我迷失了……

我猜想你的开发设置和你的应用程序中可能有很多事情发生了变化。如果您可以一次退一步，那么您将能够弄清楚关键的变化是什么。

听起来您的代码更改可能会解决您当前的问题 - 但它绝对是在问题（无论它是什么）发生后应用的补丁，所以这不是我现在想要在核心代码中做的事情。

* * *

就您询问的代码而言：

```
 if (intent == null)
        {
            // TODO - some trace here would be nice...
            return null;
        } 
```

只有在没有 Intent 的情况下以某种方式创建了 Activity 时才会发生第一个 null - 我猜这不会发生？（除非在您当前的工具设置中的某个地方，这可能被设置为空？）

* * *

```
 if (intent.Action == Intent.ActionMain)
        {
            // TODO - some trace here would be nice...
            return Activator.CreateInstance(viewModelTypeHint) as IMvxViewModel;
        } 
```

这是直接启动活动的正常路径 - 此活动将没有用于构造 ViewModel 的额外参数。

通常这条路径不会发生在许多 MvvmCross 应用程序中 - 大多数应用程序通过启动屏幕活动启动。

* * *

```
 if (intent.Extras == null)
        {
            // TODO - some trace here would be nice...
            return null;
        } 
```

对于任何其他活动，Mvx 应该在 Extras 中插入了一些特殊的 ViewModel 信息——所以 Extras 不可能为空......如果发生这种情况，那么创建活动的代码是什么？

* * *

```
IMvxViewModel mvxViewModel;
if (TryGetEmbeddedViewModel(intent, out mvxViewModel))
    return mvxViewModel;

return CreateViewModelFromIntent(intent); 
```

这是已导航到的活动的正常启动路径。

* * *

如果有帮助，这里是最新的 v3 代码 - 添加了一些跟踪（但也增加了 savedState 的混乱 - 现在忽略这个！）：

```
 public virtual IMvxViewModel Load(Intent intent, IMvxSavedState savedState, Type viewModelTypeHint)
    {
        if (intent == null)
        {
            MvxTrace.Trace(MvxTraceLevel.Error, "Null Intent seen when creating ViewModel");
            return null;
        }

        if (intent.Action == Intent.ActionMain)
        {
            MvxTrace.Trace("Creating ViewModel for ActionMain");
            return Activator.CreateInstance(viewModelTypeHint) as IMvxViewModel;
        }

        if (intent.Extras == null)
        {
            MvxTrace.Trace(MvxTraceLevel.Error, "Null Extras seen on Intent when creating ViewModel - this should not happen - have you tried to navigate to an MvvmCross View directly?");
            return null;
        }

        IMvxViewModel mvxViewModel;
        if (TryGetEmbeddedViewModel(intent, out mvxViewModel))
        {
            MvxTrace.Trace("Embedded ViewModel used");
            return mvxViewModel;
        }

        MvxTrace.Trace("Loading new ViewModel from Intent with Extras");
        return CreateViewModelFromIntent(intent, savedState);
    } 
```

# javascript - Jquery脉动改变颜色或图像

> ID：15236408
> 
> 赞同：1
> 
> 时间：2013-03-05T23:51:49.063
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 脉动代码让 div 更改颜色，但我希望它从红色变为黑色，但我听说要做到这一点，您必须下载某个插件。所以我希望它脉动到图片。到目前为止，我有这两个代码：

```
 <img id="book" src="36.gif" alt="" width="105" height="105"
      style="position: absolute; top: 585px;
    left:585px;" />

and

<script>
  $(document).ready(function() {

$("#white36").click(function () {
    $('#book').animate({
      $(this).effect("pulsate", { times:3000 }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:00:43.423

你错了，你不应该使用 .animate() 方法。

同样要让 .pulsate() 工作，您需要在 html 文件中包含 jquery UI。

我还没有测试它，但它应该可以工作：

```
$(document).ready(function() {
    $('#white36').click(function () {
          $('#book').effect("pulsate", { times:3000 }, 500);
    });
}); 
```

[http://docs.jquery.com/UI/Effects/Pulsate](http://docs.jquery.com/UI/Effects/Pulsate)

# ios - TouchesEnded 第二次没有被调用

> ID：15236411
> 
> 赞同：0
> 
> 时间：2013-03-05T23:51:52.097
> 
> 标签：ios, uigesturerecognizer

我的问题如下：

我在标准视图控制器中显示带有附件的消息视图。当用户按住附件图标时，它会在屏幕上显示图像，当用户放手时，图像就会消失。这是为了在用户查看图像时帮助检测屏幕截图。

我使用长按手势识别器来检测触摸，然后使用 touchesEnded 或 touchesCancelled 来检测触摸的释放。

当用户用第二根手指按下屏幕时会出现我的问题，因为没有报告第二次触摸的释放。代码如下，方法按此顺序调用：

1.  第一次长按 -> attachmentLongPressed 调用
2.  第二次长按 -> attachmentLongPressed 调用
3.  释放第一根手指 -> touchesEnded 调用
4.  松开第二根手指 -> 什么都没有

    ```
    -(void)attachmentImageLongPressed:(UIImageView *)sender{

        if(!self.isAttachmentOpen){

            [self setAttachmentOpen:YES];

            // Show image...

        }
    }

    -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

        [self setAttachmentOpen:NO];

        // Remove image from view

    }

    -(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
    {
        if(self.isAttachmentOpen){

            [self screenshotDetected];

        }
    } 
    ```

结果是图像视图留在屏幕上，无法将其关闭。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:39:25.403

我认为松开第二根手指时应该将其称为 touchesEnded。您可以记录所有回调中的所有触摸，以找出正在调用的方法，

但是，长按手势可能会延迟触摸结束事件，因此请尝试将 delaysTouchesEnded 设置为 FALSE。

手势LongPressed.delaysTouchesEnded = FALSE

# javascript - 表单标签中的 data-ui-toggle

> ID：15236412
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:04.447
> 
> 标签：javascript, angularjs, toggle

我正在使用 Angular，并且在表单标签中有一个 data-ui-toggle：

```
<a href="" data-ng-click="NewForm=!NewForm">Click for New Form</a>
<form class="custom" name="NewForm" ng-submit="save()" novalidate data-ui-toggle="NewForm"> 
```

问题是新表单在页面加载时显示，然后当您单击“单击新表单”时，表单会切换。

我试图做相反的事情，没有出现在加载中，然后在您单击“单击以获取新表单”时切换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:18:31.977

从[表单指令文档](http://docs.angularjs.org/api/ng.directive%3aform)：

> 如果指定了 name 属性，则表单控制器以该名称发布到当前范围。

您`NewForm`对两者使用相同的标识符，范围变量引用由 form 指令自动实例化的 FormController，以及 ui-toggle 标志变量。

这就是为什么`NewForm`scope 属性被初始化为空 object的原因`{}`，这是一个告诉 ui-directive 显示表单的真实值。在此示例中，您需要为表单选择一个不同的名称：

```
<form class="custom" name="MyForm" ng-submit="save()" novalidate data-ui-toggle="NewForm"> 
```

# javascript - jQuery 验证，仅限数值

> ID：15236413
> 
> 赞同：2
> 
> 时间：2013-03-05T23:52:08.987
> 
> 标签：javascript, jquery

我正在尝试验证表单输入值。下面的函数状态是输入的值是一个低于 150 的数字，显示错误。正常工作。但是，我想添加它。如果该值包含除数值以外的任何值和/或小于 150 的值，则显示错误...

我该如何修改？

```
if ($('.billboard-height').val() < 150) {
    $('.sb-billboardalert').fadeIn(600);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:54:37.067

我建议使用正则表达式：

```
var intRegex = /^\d+$/;
var floatRegex = /^((\d+(\.\d *)?)|((\d*\.)?\d+))$/;

var str = $('#myTextBox').val();
if(intRegex.test(str) || floatRegex.test(str)) {
   alert('I am a number');
   ...
} 
```

或者按照@Platinum Azure 的建议使用单个正则表达式：

```
var numberRegex = /^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/;
var str = $('#myTextBox').val();
if(numberRegex.test(str)) {
   alert('I am a number');
   ...
} 
```

参考：[检查输入的数字是否是 jquery 中的数字](https://stackoverflow.com/questions/1272696/checking-if-number-entered-is-a-digit-in-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:16:44.960

由于无论如何您应该在服务器端进行更彻底的验证，因此您可以只使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)或[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)，具体取决于您期望的值类型。然后检查结果是否实际上是一个数字，并且它是否也符合您的约束：

```
var number = parseFloat($('.billboard-height').val()); // or parseInt depending on expected input
if (isNaN(number) || number < 150) {
    $('.sb-billboardalert').fadeIn(600);
} 
```

**编辑：**

根据您的评论，您正在进入正则表达式领域。我猜你只想要一个自然数（并且 parseInt/parseFloat 忽略尾随非数字字符（如 px、em 等）的方式并不好）。怎么样：

```
var val = $('.billboard-height').val();
var number = parseInt(val, 10);
if ( ! val.match(/^[0-9]{3,4}$/) || number < 150) {
    $('.sb-billboardalert').fadeIn(600);
} 
```

这应该只允许自然数 150-9999。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:13:08.550

不要忘记 parseInt() 中的 radix 参数：

```
if (parseInt($('.billboard-height').val(), 10) < 150) { 
```

它可能比使用正则表达式更快。正则表达式并不以速度快而著称，但它们非常强大。对于这种情况，这可能是矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:56:43.930

您可以尝试[HTML5 的内置表单验证](http://diveintohtml5.info/forms.html)：

```
<input type="number" min="150"> 
```

[浏览器支持仍然很不稳定](http://caniuse.com/#feat=input-number)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T00:07:46.340

尝试使用**parseInt**和**isNaN**函数检查值是否为数字且小于`150`：

```
var intVal = parseInt($('.billboard-height').val());
if(!isNaN(intVal)){ //not Number
    if (parseInt($('.billboard-height').val()) < 150) { //not less than 150
        $('.sb-billboardalert').fadeIn(600);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:09:38.130

```
// Displays an alert if s contains a non-numeric character.

function alertForNonNumeric(s) {
    var rgx = /[^0-9]/;
    if (s.search(rgx) !== -1) {
        alert("Input contains non-numeric characters!");
    }
} 
```

[JS小提琴在这里](http://jsfiddle.net/sjaDK/2)

**注意**：如果您还想检查负整数，可以在正则表达式中添加减号：

```
function alertForNonNumeric(s) {
    var rgx = /[^0-9-]/;
    if (s.search(rgx) !== -1) {
        alert(s + " contains non-numeric characters!");
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T00:12:02.750

来自输入或选择的任何值都将是 javascript 中的字符串。您需要使用或`parseInt()`使用运算符。如果您使用它来与类似的字符串进行比较，则可以使用`>``<``==``if ($('.billboard-height').val() == "150")`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T00:17:13.580

如果需要支持浮点数，可以使用以下方法检查变量是否有效：

```
function isNumber (n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}

var val = $('.billboard-height').val();
if (isNumber(val) && parseFloat(val) < 150) {
    $('.sb-billboardalert').fadeIn(600);
} 
```

如果您只需要支持整数，请使用`parseInt(n, 10)`，其中 10 是将字符串转换为的基数。

```
var val = parseInt($('.billboard-height').val(), 10);
if (val && val < 150) {
    $('.sb-billboardalert').fadeIn(600);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-30T07:28:44.480

我使用这个解决方案，我觉得它非常优雅 - 没有警报，用户实际上无法输入非数字字符。

这是 jQuery 示例：

```
function digitsOnly(){
    // extract only numbers from input    
    var num_val = $('#only_numbers').val().match(/\d+/);
         $('#only_numbers').val(num_val);
    } 
```

你的html：

```
<input type="text" name="only_numbers" id="only_numbers" on oninput="digitsOnly();"/> 
```

# c# - WinForm C# 高效搜索DataGridView（未绑定）

> ID：15236414
> 
> 赞同：1
> 
> 时间：2013-03-05T23:52:18.283
> 
> 标签：c#, winforms, datagridview

我有一个使用 dataGridGrid 的 C# winForm，我每秒接收大约 20 条消息，我有大约 1000 行......是否有任何“快速查找”方法和/或设计模式可以让我找到特定的行不遍历 dataGridView.Rows 集合？这似乎是一种非常低效的方法，但除了我“认为”是一个循环的 dataGridView.Rows.Remove() 之外，我似乎找不到其他任何东西，对吗？有人可以帮我吗？

提前致谢，

-DA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:20:14.500

您可能可以使用一些 LINQ 来查找该行，因为它是未绑定的。我不知道你在匹配什么，但希望这会有所帮助：

```
var x = (from DataGridViewRow r in dataGridGrid.Rows 
         where r.Cells[SomeCellIndex_OrName].Value == "Some Value"
         select r).FirstOrDefault();

if (x != null ) {

  //Do Something to x
  // x is your row
  // x == null when not found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:35:07.923

如果我正确理解您的问题，您想在 DataGridView 中查找特定行并删除它们。假设您正在使用 DataGridView 尝试将其 DataSource 绑定到 BindingSource ，然后您可以像这样找到（最后添加的）行：

```
 BindingSource.Position = BindingSource.Find(string PropertyName, object key); 
```

要删除选定的行，请将您的位置保存到变量中，然后：

```
 DataGridView.Rows.RemoveAt(your variable); 
```

希望有帮助

# oracle - “无法插入对象视图 REF 或用户定义的 REF”

> ID：15236415
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:19.427
> 
> 标签：oracle, oracle10g, oracle11g, object-oriented-database

我有一个 C_table 和 M_table 并且 C_table 和 M_table 之间存在对 1 的关系，我也有 L_table 这是一个 C_table 类型，我正在尝试使用 oracle SQL Developer 使用 OODBMS。我有以下类型和表格：

```
create type C_table as object
(
  se number(10), 
  sp number(10), 
  pr number(15), 
  me number(3), 
  ste S_type, 
  name ref M_type
)not final;

create type m_type as object
(
  name varchar2(25), 
  add varchar(25)
);

type L_type under computer_type
(
  w number(5)
); 
```

我也创建了他们的表，现在我试图插入到 L_table 中，如下所示，我收到以下错误：

```
insert into l_tab select 500,2,1600,4, S_type('Ms','Me'), REF(d),1.5 from m_tab d where 
d.name= 'Int';

SQL Error: ORA-22979: cannot INSERT object view REF or user-defined REF
22979\. 00000 -  "cannot INSERT object view REF or user-defined REF"
*Cause:    Attempt to insert an object view REF or user-defined REF in a
           REF column created to store system generated REF values"
*Action:   Make sure the REF to be inserted is not from an object view
           or from a user-defined REF column 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:51:39.053

很抱歉，由于机密权限，我无法加载完整的脚本。但我很高兴分享这个问题的解决方案。

```
create type C_table as object
(
  se number(10), 
  sp number(10), 
  pr number(15), 
  me number(3), 
  ste S_type, 
  name ref M_type
 )not final;

 create type m_type as object
 (
     name varchar2(25), 
     add varchar(25)
 );

 type L_type under computer_type
 (
   w number(5)
 ); 
```

基于ERD我们已经知道L_type Is-A C_type，并且我们知道C_type对M_type有一个引用。当我用这些类型创建表时，我不知道我还必须在 L_table 中定义 M_table 的外键，我在想既然 L_table 派生自 C_table，如果我在 C_table 中定义外键就足够了，但这还不够，我还必须像这样从 L_table 中的 M_table 定义一个外键

```
create table C_table of C_type
(foreign key (name) references M_table) 
object id primary key 
```

并且 ：

```
create table l_table of l_type
(foreign key (name) references M_table) 
object id primary key 
```

现在如果我使用这个查询我不会有任何问题或错误：

```
insert into l_tab select 500,2,1600,4, S_type('Ms','Me'), REF(d),1.5 from m_tab d where 
d.name= 'Int'; 
```

另外我在一些博客中读到，我们必须小心不要使用系统名称，并将预定义名称作为表中的属性，就像在这个例子中我在 M_table 中使用名称，这不是一个好方法，所以最后我将其更改为 M_name 而不是 name。

# jquery - 为 jquery 变量设置默认值

> ID：15236418
> 
> 赞同：1
> 
> 时间：2013-03-05T23:52:26.707
> 
> 标签：jquery

我想为变量设置默认值。

当主体加载时，它运行一个需要变量来获取数据的函数。
表单将执行相同的 onchange，但表单元素将被隐藏并仅在用户想要查看过滤器选项时添加

我目前的代码是

```
var grade = document.getElementById('grade').value; 
```

如果 id 等级在第一次加载时不可用，我希望等级默认为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:54:27.410

试试这个，它应该默认为零。

```
var grade = document.getElementById('grade') == null ? 0 : document.getElementById('grade').value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:55:19.517

尝试这个：

```
var grade = 0;
var grade_field = document.getElementById('grade');
if (grade_field)
{
    grade = grade_field.value;
} 
```

# java - 使用 RSA Bouncy Castle 加密/解密无法正常工作

> ID：15236419
> 
> 赞同：3
> 
> 时间：2013-03-05T23:52:28.707
> 
> 标签：java, encryption, rsa, bouncycastle

我正在尝试在充气城堡使用 RSAEngine 库进行加密/解密，密钥长度为 2048 位。我能够创建密钥，存储在不同的文件中并从文件中获取，但是当我解密图像时，它会产生一些我不知道解密的文件没有正确显示的东西。文件创建正确，我认为问题出在加密和/或解密时的 processBlock 方法。加密的代码如下：

```
InputStream clearTextFile;
    FileOutputStream textFileProcessed=new FileOutputStream(fileName);
            //getKey is a method I implemented and works correctly
    RSAKeyParameters key=getKey(keyFileName);
    RSAEngine rsaEngine=new RSAEngine();
    rsaEngine.init(true,key);           
    clearTextFile=new FileInputStream(nameClearTextFile);
    byte[] bytesReaded;
    int nBytesReaded;
    int inputBlockSize=rsaEngine.getInputBlockSize();
    do
    {
        bytesReaded = new byte[inputBlockSize];
        nBytesReaded=clearTextFile.read(bytesReaded);
        if(nBytesReaded>-1)
        {       //This is for the last block if it's not 256 byte length
            if(nBytesReaded<inputBlockSize)
            {
                byte[] temp=new byte[nBytesReaded];
                for(int i=0;i<nBytesReaded;i++)
                {
                    temp[i]=bytesReaded[i];
                }
                byte[] encryptedText=rsaEngine.processBlock(temp,0,nBytesReaded);
                textFileProcessed.write(encryptedText);
            }
            else
            {
                byte[] encryptedText=rsaEngine.processBlock(bytesReaded,0,inputBlockSize);
                textFileProcessed.write(encryptedText); 
            }
        }
    }while(nBytesReaded>-1);
    textFileProcessed.flush();
    textFileProcessed.close();
    textFileProcessed.close(); 
```

并解密：

```
InputStream encryptedTextFile=new FileInputStream(nameOfFile);
    OutputStream decryptedTextFile=new FileOutputStream(nameOfFile);
    RSAKeyParameters key=getKey(nameKeyFile);
    RSAEngine rsaEngine=new RSAEngine();
    rsaEngine.init(false,key);
    byte[] bytesReaded;
    int nBytesReaded;
    int inputBlockSize=rsaEngine.getInputBlockSize();
    do
    {
        bytesLeidos = new byte[inputBlockSize];
        nBytesReaded=encryptedTextFile.read(bytesReaded);
        if(nBytesReaded>-1)
        {
                byte[] decryptedText=rsaEngine.processBlock(bytesReaded,0,inputBlockSize);          
                decryptedTextFile.write(decryptedText);                 
        }
    }while(nBytesReaded>-1);
    decryptedTextFile.flush();
    decryptedTextFile.close();
    encryptedTextFile.close(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:38:53.763

RSAEngine 不添加填充，因此您将丢失数据块中的任何前导零。您还需要使用其中一种可用的编码模式。

我建议也使用对称密钥算法，并且只使用 RSA 来加密对称密钥。它会更快，并且取决于您的数据，也更安全。

问候，

大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:08:33.733

我认为您需要更改此行：

```
 if(nBytesReaded>1) 
```

对此

```
 if(nBytesReaded>-1) 
```

并在 decypt 部分更改它，也许是：

```
rsaEngine.init(false,clave); 
```

对此

```
rsaEngine.init(false,key); 
```

但可能还有更多。如果最后一个块不是完整大小，则您不会加密整个输入。

# c# - 从目录自动填充 xml

> ID：15236420
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:34.993
> 
> 标签：c#, asp.net, xml

正在建立一个照片库，我的客户将能够通过开源 CMS 解决方案管理内容。网站上的画廊将使用 XML 动态生成。

XML 结构的格式需要如下所示。我试图做的是看看是否有一种方法可以自动填充这个文件，无论是通过每晚在 Windows 中运行的脚本来更新它还是通过 C# 后端文件。

XML结构：

```
<image>
<title>Image Title</title>
</image> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:04:05.337

一种选择是使用 XmlSerializer

您可以创建一个用于序列化的对象

```
[XmlType("image")]
public class XmlImage
{
    [XmlType("title")]
    public string Title { get; set; }

    [XmlType("src")]
    public string Source{ get; set; }

} 
```

然后您可以创建此对象的列表并序列化为 xml 文件。

```
// make a list of the images you want to save
List<XmlImage> images = new List<XmlImage>(Directory.GetFiles("imageDir")
    .Select(file => new XmlImage
                        { 
                           Title = System.IO.Path.GetFileNameWithoutExtension(file),
                           Source = file
                        }));

// create an XmlSerializer for you list type
XmlSerializer xmlSerializer = new XmlSerializer(typeof(List<XmlImage>));

// open file stream
using (FileStream stream = new FileStream("destinationFile", FileMode.OpenOrCreate))
{
    // save list to xml
    xmlSerializer.Serialize(stream, images);
} 
```

# iphone - iOS xcode 4.6向应用程序添加音频

> ID：15236421
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:35.360
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试在我的应用程序的背景中播放音频文件，但它没有播放。我拥有的代码是：

```
SystemSoundID SoundID;
NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"HoHey" ofType:@"mp3"];
AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:soundFile], &SoundID);
AudioServicesPlaySystemSound(SoundID);
NSLog(@"%@ is playing\n", soundFile); 
```

NSLog 显示“HoHey.mp3 正在播放”，但我听不到它在播放。顺便说一句，我的音量调高了，因为我在播放视频时会听到播放的声音。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:01:59.040

您可能在途中的某个地方出现错误。尝试如下所示的代码：

```
SystemSoundID soundID;
NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"HoHey" ofType:@"mp3"];
if(soundFile)
{
    OSStatus status = AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:soundFile], &soundID);
    if(status == noErr)
    {
        AudioServicesPlaySystemSound(soundID);
        NSLog(@"%@ is playing\n", soundFile);
    } else {
        NSLog( @"no sound id created; error status code is %d", status);
    }
} else {
    NSLog( @"couldn't find sound file... is it really in your app bundle?");
} 
```

PS，不要大写Objective-C 变量名（例如“ `soundID`”而不是“ `SoundID`”）。

# android - android edittext 上下文菜单

> ID：15236423
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:43.993
> 
> 标签：android, android-edittext, android-contextmenu

在edittext长按创建上下文菜单。如何删除上下文菜单？我试过这个：

```
 et.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            return true;
        }
    });
    et.setCustomSelectionActionModeCallback(new ActionMode.Callback() {

        public boolean onCreateActionMode(ActionMode actionMode, Menu menu) {
            return false;
        }

        public boolean onPrepareActionMode(ActionMode actionMode, Menu menu) {
            return false;
        }

        public boolean onActionItemClicked(ActionMode actionMode,
                MenuItem item) {
            return false;
        }

        public void onDestroyActionMode(ActionMode actionMode) {
        }
    }); 
```

但后来我无法选择文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:21:38.253

我不确定您是否可以完全删除菜单，但您可以在 onPrepareActionMode 中调用 menu.clear() ，这将从菜单中删除所有菜单项。您必须删除 onLongClickListener 才能再次看到句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:49:46.873

您可以创建自己的扩展 EditText 的类并覆盖 performLongClick() 方法，这应该可以按预期工作

```
class MyET extends EditText{

    public MyET(Context context) {
        super(context);
    }

    @Override
    public boolean performLongClick() {
        // TODO Auto-generated method stub
        return true;
    }

} 
```

# c# - 在任何应用程序的窗口中获取鼠标指针下的文本

> ID：15236426
> 
> 赞同：1
> 
> 时间：2013-03-05T23:52:49.317
> 
> 标签：c#, vb.net

在执行添加此问题之前，我已在此站点中搜索了我的问题-根据网站的发布规则-我找到了这些链接，但对我没有帮助：

1.  [在鼠标指针下获取单词](https://stackoverflow.com/questions/11373103/get-word-under-mouse-pointer)
2.  [获取鼠标指针下的文本](https://stackoverflow.com/questions/4273860/get-the-text-under-the-mouse-pointer)
3.  [获取鼠标指针下的文本](https://stackoverflow.com/questions/2183335/getting-the-text-under-the-mouse-pointer)

我的问题是：我正在编写一本地质词典，它现在可供用户使用，但我想添加一个功能，让用户在特定时间段内移动鼠标时看到特定单词的翻译，并且该单词可能在任何应用程序中，如 MS Word、IE、Firefox 或任何其他应用程序（如果你知道的话，我从 Easy Lingo 词典中引用了这个想法），然后应用程序将在数据库中执行查询并将结果返回给用户鼠标位置的工具提示或类似的东西。那么，我怎样才能得到鼠标指针下的单词，是 API 还是什么？
请你帮帮我好吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T00:54:37.333

几乎每个视觉控件（如文本框或标签）都有 MouseHover 事件。

```
private void label1_MouseHover(object sender, EventArgs e)
{
  // get text by mouse-over
  string textOfTheLabel = ((Label) sender).Text;
  string translatedText = GetTranslationFromDB(textOfTheLabel);

  // tooltip
  System.Windows.Forms.ToolTip toolTip1 = new System.Windows.Forms.ToolTip();
  toolTip1.SetToolTip((Label) sender, translatedText);
} 
```

# java - 如何访问和打开 .class 文件

> ID：15236429
> 
> 赞同：0
> 
> 时间：2013-03-05T23:52:59.207
> 
> 标签：java, class

如何在 Windows 7 中打开 .class 文件？我收到一条消息，说我看不到该文件，我必须选择一个程序来打开它或在网上查找一个。是否有任何网站、解释或下载可以让我访问我提取或保存在我的文档中的任何 .class 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:01:37.663

您是否尝试反编译 .class 文件并查看源代码？您可以使用[Java 反编译](http://java.decompiler.free.fr/)器。它有一个独立的 GUI 和 Eclipse/IntelliJ 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:43:48.800

> 是否有任何网站、解释或下载可以让我访问我提取或保存在我的文档中的任何 .class 文件？

这取决于您所说的“访问”或“开放”是什么意思。它还取决于您提取 ... 的含义以及您从中提取它们的内容。

*   如果您尝试**运行**类文件，那么运行 Java 应用程序的标准方法是使用`java`命令，如 Oracle 网站上所述。例如： [http](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html) ://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html 。但是你如何使用它取决于你下载和/或提取的东西的性质。（一些“.class”文件不是应用程序。一些“.class”文件被设计为*无需*从其 JAR 文件容器中提取它们即可运行。）

*   如果你想**查看**类文件中的代码，你可以使用`javap`命令来反汇编它。或者您可以使用第三方工具对其进行反编译。但是，除非您对自己在做什么有一个线索，否则这不太可能有太大帮助。而且由于我无法真正猜出您要达到的目标，因此我无法为您提供任何有用的参考。

*   如果您尝试做其他事情，则需要解释它是什么。

无论哪种方式，您都需要在您的机器上安装 Java，然后才能执行任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:04:07.250

可以使用[javap](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html)命令查看反汇编后的类文件。它包含在 JDK 中。

# python - SciPy (Python) 中向量的 Romberg 积分

> ID：15236432
> 
> 赞同：0
> 
> 时间：2013-03-05T23:53:13.560
> 
> 标签：python, scipy

好吧，我做错了什么？Scipy 的 romberg 积分器应该能够处理矢量函数，但我得到一个错误......

```
import numpy
from numpy import array
from scipy import integrate

f = lambda x:array([1, x, x**2])
result = integrate.romberg(f, 0, 1, vec_func=True)
print(result) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:52:35.870

的文件`romberg`说：

> vec_func : 布尔型，可选
> 
> func 是否将数组作为参数处理（即它是否是“向量”函数）。默认为假。

所以，参数 x 可以是一个向量。

# php - 向 wp_mail 'message' 段添加额外内容

> ID：15236437
> 
> 赞同：0
> 
> 时间：2013-03-05T23:53:29.477
> 
> 标签：php, wordpress, email

我正在使用使用`wp_mail`函数的自定义 Wordpress 模板。

所以我在下面有这段代码，粗体部分给我带来了问题：

wp_mail($et_email_to, sprintf( '[%s] ' . esc_html($_POST['et_contact_subject']), $et_site_name ), **esc_html($_POST['et_contact_message'])** ,'From: "'.esc_html($_POST ['et_contact_name']) .'" <' .esc_html($_POST['et_contact_email']) .'>');

我想在 Message 部分包含额外的东西。`esc_html($_POST['et_contact_message'])`

当我尝试在那里添加任何额外内容时，它会给出各种 PHP 错误。

如果我用`esc_html()`“12345”之类的普通文本替换该部分，它就可以正常工作。

我想在邮件末尾添加的是：

```
"IP Address: ".$_SERVER['REMOTE_ADDR']."

Came From: ".$_SERVER['HTTP_REFERER']."

Browser: ".$_SERVER['HTTP_USER_AGENT'] 
```

如果我删除那`esc_html()`部分效果很好，但我不能让两者一起工作。

`esc_html()`它本身也可以正常工作，它会从联系人表单中打印消息。我只是不能让这两件事一起工作。

例如，这些将失败：

```
esc_html($_POST['et_contact_message']) 12345,

esc_html($_POST['et_contact_message'] $_SERVER['REMOTE_ADDR']), 
```

ETC...

请帮帮我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:26:10.557

查看 PHP 中的字符串连接 - 有很多方法可以做到这一点，我将重点介绍[http://www.php.net/manual/en/language.types.string.php中的一些](http://www.php.net/manual/en/language.types.string.php)

```
<?php
$foo = 'some';
$bar = 'baz';

$message = '';
$message .= 'Add ' . $foo;
$message .= ' variable to a string';

// You can do this all at once, in one line or many
$mesage = 'Add ' . $foo . ' variable to a string';

// Double-quotes are useful
$message = "Add {$foo} variable to a string";

// And there are other methods, like HEREDOC
$message = <<<TEXT
Add $foo variable to a string...in a HEREDOC

block.
TEXT;

// Some editors, like VIM, support syntax highlighting in HEREDOC
// Useful if you want to write out legeble code from other languages, like
// SQL.
$message = <<<SQL
SELECT
    *
FROM
    table
WHERE
    col = %s
SQL;

$wpdb->prepare($message, $foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:14:54.540

我终于找到了让它工作的方法！这是代码：

```
$message = $_POST['et_contact_message'];
$message .= '

IP Address: ' . $_SERVER['REMOTE_ADDR'];
$message .= '

Came From: ' . $_SERVER['HTTP_REFERER'];
$message .= '

Browser: ' . $_SERVER['HTTP_USER_AGENT'];
wp_mail($et_email_to, sprintf( '[%s] ' . esc_html($_POST['et_contact_subject']), $et_site_name ), $message,'From: "'. esc_html($_POST['et_contact_name']) .'" <' . esc_html($_POST['et_contact_email']) . '>'); 
```

# javascript - 如何向父模型添加新的多关系？

> ID：15236438
> 
> 赞同：0
> 
> 时间：2013-03-05T23:53:30.313
> 
> 标签：javascript, model-view-controller, ember.js, javascript-framework, ember-data

*免责声明：我试图对此做一个 jsfiddle，但如果没有 RESTAdapter 的公共源，我无法真正让它工作。*

我有一个带有 hasMany 子模型数组的模型。我需要向这个子数组添加一个新模型并保存到服务器：

```
App.FooModel = DS.Model.extend({
  'name': DS.attr('string'),
  'bars': DS.hasMany('App.BarModel')
});

App.BarModel = DS.Model.extend({
  'name': DS.attr('string'),
});

App.ApplicationController = Ember.Controller.extend({
  init: function() {
    var foo    = App.FooModel.find(101); // -- currently has bars[201, 202, 203]
    var newBar = loadFixture( App.BarModel, 204 );

    var self = this;
    setTimeout( function() { // -- just to be sure our models are loaded before we try this
      // foo.currentState: saved
      foo.get('bars').addObject(newBar);
      // foo.currentState: saved

      foo.store.commit(); // -- nothing happens
    }, 1000);
  }
});

App = Ember.Application.create({
  store: DS.Store.create({
    revision: 11
  })
}); 
```

但什么也没有发生。我的父模型没有被标记为脏，所以商店从不尝试提交。我应该以不同的方式将这种关系添加到父级吗？这是一个错误吗？

**当前解决方法：**

```
foo.get('bars').addObject(newBar);

var save = foo.get('name');    
foo.set('name', (save + '!'));
foo.set('name', save); // -- this marks our record as dirty, so a save will actually happen

foo.store.commit(); 
```

**编辑 1：**我知道 ember-data 只会序列化这个数据，如果它是嵌入开始的（[https://stackoverflow.com/a/15145803/84762](https://stackoverflow.com/a/15145803/84762)），但我已经覆盖了我的序列化程序来处理这个。我遇到的问题是商店甚至从未尝试保存此更改，因此我们甚至从未访问过序列化程序。

**编辑2：**我怀疑这*可能*与[这个错误](https://github.com/emberjs/ember.js/issues/2211)有关，但同时这意味着这对任何人都不起作用，我很难相信没有其他人遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:52:23.497

看起来您正在建模一对多关系，但您没有`belongsTo`在`App.BarModel`. 检查此链接：

[http://emberjs.com/guides/models/defining-models/#toc_one-to-many](http://emberjs.com/guides/models/defining-models/#toc_one-to-many)

```
App.Post = DS.Model.extend({
    comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
    post: DS.belongsTo('App.Post')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:02:32.723

据我了解，您没有使用`embedded`关系功能，而是覆盖了您的序列化程序来处理将`bars`对象序列化为`foo`对象。

我认为您的错误可能来自这里：如果您的关系未嵌入，则没有理由将`foo`对象标记为脏，因为当您将对象添加到他的`bars`关联时，应该更改的通常是您添加的对象的键`foo_id`，`bar`那么就没有`foo`要发送到 API的对象的更改。

# string - as.numeric 带逗号小数分隔符？

> ID：15236440
> 
> 赞同：48
> 
> 时间：2013-03-05T23:53:37.507
> 
> 标签：string, r, number-formatting

我有一个很大的字符串向量，形式如下：

```
Input = c("1,223", "12,232", "23,0") 
```

等等。也就是说，用逗号分隔的小数，而不是句点。我想将此向量转换为数值向量。不幸的是，`as.numeric(Input)`只是输出`NA`.

我的第一直觉是去`strsplit`，但在我看来，这可能会很慢。有人知道更快的选择吗？

有一个现有的问题表明`read.csv2`，但有问题的字符串不是以这种方式直接读取的。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-05T23:55:51.000

```
as.numeric(sub(",", ".", Input, fixed = TRUE)) 
```

应该管用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-03-14T14:19:58.570

该`readr`包具有从字符串中解析数字的功能。`locale`您可以通过参数设置许多选项。

对于逗号作为小数分隔符，您可以编写：

```
readr::parse_number(Input, locale = readr::locale(decimal_mark = ",")) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-06T01:04:06.373

```
scan(text=Input, dec=",")
## [1]  1.223 12.232 23.000 
```

但这取决于您的向量有多长。我曾经`rep(Input, 1e6)`制作一个长矢量，但我的机器只是挂起。`1e4`不过很好。@adibender 的解决方案要快得多。如果我们在 1e4 上运行，速度会快*很多*：

```
Unit: milliseconds
         expr        min         lq     median         uq        max neval
  adibender()   6.777888   6.998243   7.119136   7.198374   8.149826   100
 sebastianc() 504.987879 507.464611 508.757161 510.732661 517.422254   100 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-06T00:19:54.110

此外，如果您正在读取原始数据，则 the`read.table`和所有相关函数都有一个`dec`参数。例如：

```
read.table("file.txt", dec=",") 
```

当一切都失败时，`gsub`是`sub`你的朋友。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-05T14:32:37.977

基于@adibender 解决方案：

```
input = '23,67'
as.numeric(gsub(
                # ONLY for strings containing numerics, comma, numerics
                "^([0-9]+),([0-9]+)$", 
                # Substitute by the first part, dot, second part
                "\\1.\\2", 
                input
                )) 
```

我想这是一个更安全的比赛......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-09T17:15:19.173

如前所述，在导入文件时执行此操作要容易得多。Thw 最近发布的[reads](https://blog.rstudio.org/2016/08/05/readr-1-0-0/)包有一个非常有用的功能，在这里`locale`很好地解释[了](https://blog.rstudio.org/2015/10/28/readr-0-2-0/)`locale = locale(decimal_mark = ",")`，它允许用户使用作为参数导入带有逗号小数点的数字。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-16T14:37:18.583

当有多个逗号时，adibender 的答案不起作用。

在这种情况下，可以使用 use554546 的建议和 Deena 的回答。

```
Input = c("1,223,765", "122,325,000", "23,054")
as.numeric(gsub("," ,"", Input)) 
```

输出：

```
[1] 1223765 122325000 23054 
```

该函数`gsub`替换所有出现。该函数`sub`仅替换第一个。

# python - django 中 pool.map 中的错误只是返回存在错误的事实，而不是它在映射函数中的位置

> ID：15236445
> 
> 赞同：0
> 
> 时间：2013-03-05T23:53:53.807
> 
> 标签：python, django, python-multithreading, django-errors

我在 Django 中有一些相当庞大的代码，并且正在使用 pool.map() 来并行化它。

它的一个超级微不足道的分解将是这样的：

```
def addNumbers(server):
    conn = Connection(server)
    return conn.something.something

def home(request):
    c = {}
    pool = Pool(processes=4)
    c['myResult'] = pool.map(addNumbers, servers)
    pool.close()
    return render_to_response('homepage.html', c, context_instance=RequestContext(request)) 
```

主页视图调用 addNumbers 并将一些数据发送回页面。

然而，当一个像这样的函数`addNumbers`变得巨大时，我不可避免地会写一个错误，你会收到以下错误消息：

> ```
> /usr/lib/python2.6/site-packages/Django-1.4.3-py2.6.egg/django/core/handlers/base.py 
> ```
> 
> 在 get_response response = callback(request, *callback_args, **callback_kwargs) ...
> 
> ```
> ▶ Local vars
> /path-to-my-views/views.py in home
>     c['myResult'] = pool.map(addNumbers, servers) ...
> 
> ▶ Local vars
> /usr/lib64/python2.6/multiprocessing/pool.py in map
>         return self.map_async(func, iterable, chunksize).get() ...
> 
> ▶ Local vars
> /usr/lib64/python2.6/multiprocessing/pool.py in get
>             raise self._value ...
> 
> ▶ Local vars 
> ```

这只是告诉我在被并行化的函数中**某处**存在错误，但**实际上并没有告诉我可以在哪一行**找到错误，就像正常的错误消息一样。

超级令人沮丧，任何人都有任何想法（除了“编写更好的代码”：P）

# z3 - 在 z3 公式中替换函数符号

> ID：15236450
> 
> 赞同：4
> 
> 时间：2013-03-05T23:54:06.590
> 
> 标签：z3

在公式中替换函数符号（用另一个函数）的最佳方法是什么？Z3py`substitute`似乎只适用于表达式，而我现在所做的是尝试猜测可以应用该函数的所有可能的 consts/vars 组合，然后用另一个函数的应用程序替换这些组合。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:20:50.360

我们可以实现一个简单的自底向上重写器，给定一个 term ，`s`一个函数`f`和 term`t`将替换每个`f`-application `f(r_1, ..., r_n)`。我使用符号来表示通过将自由变量替换为术语, ...,获得的术语。`s``t[r_1, ..., r_n]``t[r_1, ..., r_n]``t``r_1``r_n`

重写器可以通过 Z3 API 实现。我使用 an`AstMap`来缓存结果，并使用`todo`list 来存储仍需处理的表达式。

这是一个简单的例子，它用in替换了`f`表单的 -applications 。`f(t)``g(t+1)``s`

```
x = Var(0, IntSort())
print rewrite(s, f, g(x + 1)) 
```

这是代码和更多示例。请注意，我只在一小部分示例中测试了代码。

```
from z3 import *

def update_term(t, args):
    # Update the children of term t with args. 
    # len(args) must be equal to the number of children in t.
    # If t is an application, then len(args) == t.num_args()
    # If t is a quantifier, then len(args) == 1
    n = len(args)
    _args = (Ast * n)()
    for i in range(n):
        _args[i] = args[i].as_ast()
    return z3._to_expr_ref(Z3_update_term(t.ctx_ref(), t.as_ast(), n, _args), t.ctx)

def rewrite(s, f, t):
    """
    Replace f-applications f(r_1, ..., r_n) with t[r_1, ..., r_n] in s.
    """
    todo = [] # to do list
    todo.append(s)
    cache = AstMap(ctx=s.ctx)
    while todo:
        n = todo[len(todo) - 1]
        if is_var(n):
            todo.pop()
            cache[n] = n
        elif is_app(n):
            visited  = True
            new_args = []
            for i in range(n.num_args()):
                arg = n.arg(i)
                if not arg in cache:
                    todo.append(arg)
                    visited = False
                else:
                    new_args.append(cache[arg])
            if visited:
                todo.pop()
                g = n.decl()
                if eq(g, f):
                    new_n = substitute_vars(t, *new_args)
                else:
                    new_n = update_term(n, new_args)
                cache[n] = new_n
        else:
            assert(is_quantifier(n))
            b = n.body()
            if b in cache:
                todo.pop()
                new_n = update_term(n, [ cache[b] ])
                cache[n] = new_n
            else:
                todo.append(b)
    return cache[s]

f = Function('f', IntSort(), IntSort())
a, b = Ints('a b')
s = Or(f(a) == 0, f(a) == 1, f(a+a) == 2)
# Example 1: replace all f-applications with b
print rewrite(s, f, b)

# Example 2: replace all f-applications f(t) with g(t+1)
g = Function('g', IntSort(), IntSort())
x = Var(0, IntSort())
print rewrite(s, f, g(x + 1))

# Now, f and g are binary functions.
f = Function('f', IntSort(), IntSort(), IntSort())
g = Function('g', IntSort(), IntSort(), IntSort())

# Example 3: replace all f-applications f(t1, t2) with g(t2, t1)
s = Or(f(a, f(a, b)) == 0, f(b, a) == 1, f(f(1,0), 0) == 2)
# The first argument is variable 0, and the second is variable 1.
y = Var(1, IntSort())
print rewrite(s, f, g(y, x))

# Example 4: quantifiers
s = ForAll([a], f(a, b) >= 0)
print rewrite(s, f, g(y, x + 1)) 
```

# javascript - jquery 使用来自 div 的值创建计数器

> ID：15236454
> 
> 赞同：0
> 
> 时间：2013-03-05T23:54:16.507
> 
> 标签：javascript, jquery, counter

我正在尝试使用 jquery 创建一个脚本，该脚本从指定的 div （下面的#counter）中提取一个数字并每秒添加 100 并更新 div 中的数字。我已经尝试了很多东西，但没有达到预期的结果。有小费吗？这是我目前拥有的：

```
<script type="text/javascript">

setInterval("counter()", 1000); // run counter function every second

function counter() {
  var count = $("#counter").val();  // get value of counter div
  var total = count+100;  // add 100 to value of counter div
  $("#counter").text(total); // update counter div
}

</script>

<div id="counter">1000</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:59:29.663

一些变化：

```
function counter() {
    var count = parseInt($('#counter').text(), 10);
    $('#counter').text(count + 100);
}

setInterval(counter, 1000); 
```

1.  不要将字符串传递给`setInterval`. 总是传递一个函数。
2.  `.val()`仅适用于`<input>`元素。您需要使用`.text()`（这将返回一个字符串），因此您需要将文本解析为带有`parseInt()`. `10`告诉`parseInt`假设base-10 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:56:46.050

编辑 - 像其他人提到的那样添加 parseInt 。

你没有正确调用 counter() ，你应该使用 .html() 而不是 val() 像这样：

```
<script type="text/javascript">

setInterval(counter, 1000); // run counter function every second

function counter() {
  var count = $("#counter").html();  // get value of counter div
  var total = parseInt(count)+100;  // add 100 to value of counter div
  $("#counter").text(total); // update counter div
}

</script>

<div id="counter">1000</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:58:24.500

这是工作代码：http: [//jsfiddle.net/FbJPY/3/](http://jsfiddle.net/FbJPY/3/)

问题是您的时间间隔不起作用，并且您没有从 div 的内容中解析数字。

修复：

*   Interval 应该引用一个函数，而不是一个变量，因此您可以键入不带引号的 counter。

*   您需要从 div 的内容中解析数字。

```
setInterval(counter, 1000); // run counter function every second

function counter() {
  var count = parseInt($("#counter").text(), 10);  // get value of counter div
  var total = count + 100;  // add 100 to value of counter div
  $("#counter").text(total); // update counter div
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T23:56:45.217

尝试将计数转换为整数？

```
var total = parseInt(count, 10) + 1000; 
```

除非是表单输入，否则应使用 jquery html() 而不是 val()。

```
var count = $('#counter').html(); 
```

还注意到您没有将函数引用正确传递给 setInterval()

```
setInterval(counter, 1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T23:57:22.763

利用

```
parseint($("#counter").html(), 10) // or ~~$("#counter").html() 
```

乃至

```
$("#counter").html(total) 
```

反而

# sql-server-2008 - ORDER BY with IF...ELSE SQL Server 2008 r2

> ID：15236456
> 
> 赞同：1
> 
> 时间：2013-03-05T23:54:28.383
> 
> 标签：sql-server-2008, tsql

我有一个非常基本的问题要解决（无论如何对我来说都是基本的），但我无法理解为什么一段代码可以独立工作，但是当你将它包装在 IF 语句中时，它不会不。

这工作得很好：

```
SELECT DISTINCT H.FB FROM I_HSE H WHERE H.AC IN (@AC) ORDER BY H.FB 
```

但是，当我尝试在 IF 语句中使用它时：

```
IF @FILTERBY = '2'
  BEGIN
    (SELECT DISTINCT H.FB FROM I_HSE H WHERE H.AC IN (@AC) ORDER BY H.FB)
  END 
```

我收到错误“关键字‘ORDER’附近的语法不正确

我做了一些搜索，但我似乎无法弄清楚为什么这不起作用。是否有另一种方式来排序返回的结果集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:00:19.240

把括号去掉

像这样：

```
IF @FILTERBY = '2'
  BEGIN
    SELECT DISTINCT H.FB FROM I_HSE H WHERE H.AC IN (@AC) ORDER BY H.FB
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:00:19.770

删除 ( 和 )：

```
IF @FILTERBY = '2'
BEGIN
    SELECT DISTINCT H.FB FROM I_HSE H WHERE H.AC IN (@AC) ORDER BY H.FB
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:00:36.567

取消 SELECT 周围的括号

# ruby-on-rails - postgresql 无法连接错误。

> ID：15236458
> 
> 赞同：0
> 
> 时间：2013-03-05T23:54:43.917
> 
> 标签：ruby-on-rails, postgresql, psql

这是我的错误。

```
PG::Error - could not connect to server: Connection refused
    Is the server running on host "localhost" (::1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (fe80::1) and accepting
    TCP/IP connections on port 5432? 
```

我使用自制软件将 postgresql 安装到 /usr/local/bin/psql 为了让它识别这个版本，我必须将它添加到我的 bash 文件中。

```
export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH" 
```

当我 cd 进入我的 rails 应用程序并运行命令时

```
rails s 
```

它从以下内容开始

```
=> Booting Thin
=> Rails 4.0.0.beta1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

然后，当我尝试查看应用程序时，`http://0.0.0.0:3000`我收到上述错误，任何人都可能知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:00:14.687

正如消息所述，此错误的最可能原因是您实际上并未运行 postgres 服务器。通常你会用 */etc/init.d/pg_ctl,* 来启动它，但是因为你是通过 brew 安装的，所以只需在终端窗口中运行以下命令

```
postgres 
```

服务器应该启动。如果您没有将此设置为在启动时自动启动，则每次重新启动计算机后都需要运行该命令。

# java - Java skydrive rest 文件上传

> ID：15236460
> 
> 赞同：1
> 
> 时间：2013-03-05T23:54:58.020
> 
> 标签：java, rest, onedrive

我尝试使用java中的rest api将文件上传到skydrive。

这是我的代码：

```
 public void UploadFile(File upfile) {
    if (upload_loc == null) {
        getUploadLocation();
    }

    HttpClient client = new DefaultHttpClient();
    client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
    HttpPost post = new HttpPost(upload_loc + "?" + "access_token=" + access_token);
    try {

        MultipartEntity mpEntity = new MultipartEntity(null,"A300x",null);
        ContentBody cbFile = new FileBody(upfile, "multipart/form-data");
        mpEntity.addPart("file", cbFile);

        post.setEntity(mpEntity);
        System.out.println(post.toString());
        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line2 = "";
        while ((line2 = rd.readLine()) != null) {
            System.out.println(line2);
        }

    } catch (IOException ex) {
        Logger.getLogger(Onlab.class.getName()).log(Level.SEVERE, null, ex);
    }
    client.getConnectionManager().shutdown();

} 
```

但是当我尝试运行它时，我得到了这个错误：

```
{
"error": {
  "code": "request_body_invalid", 
  "message": "The request entity body for multipart form-data POST isn't valid. The expected format is:\u000d\u000a--[boundary]\u000d\u000aContent-Disposition: form-data; name=\"file\"; filename=\"[FileName]\"\u000d\u000aContent-Type: application/octet-stream\u000d\u000a[CR][LF]\u000d\u000a[file contents]\u000d\u000a--[boundary]--[CR][LF]"
 }
} 
```

我最大的问题是我看不到请求本身。我找不到任何可用的 toString 方法。我尝试了这种强制边界格式，但我也尝试使用空构造函数。

我的文件现在是一个带有一些文本的 txt，我认为边界是主要问题，或者我应该配置更多参数。当我在调试模式下看到变量时，一切看起来都与 msdn 中的指南相同。

我是其他世界的新手，如果可能的话，我想用简单易用的 HttpClient 和 HttpPost 类来保留这个 apache 库。

在此先感谢，对不起我的英语。

编辑：好的，经过长时间的睡眠后，我决定尝试 PUT 方法而不是 POST。代码只需很少的更改即可正常工作：

```
public void UploadFile(File upfile) {
    if (upload_loc == null) {
        getUploadLocation();
    }
    HttpClient client = new DefaultHttpClient();
    client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
    String fname=upfile.getName();
    HttpPut put= new HttpPut(upload_loc +"/"+fname+ "?" + "access_token=" + access_token);
    try {
        FileEntity reqEntity=new FileEntity(upfile);
        put.setEntity(reqEntity);
        HttpResponse response = client.execute(put);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line2 = "";
        while ((line2 = rd.readLine()) != null) {
            System.out.println(line2);
        }
    } catch (IOException ex) {
        Logger.getLogger(Onlab.class.getName()).log(Level.SEVERE, null, ex);
    }
    client.getConnectionManager().shutdown();
} 
```

但是第一个问题还没有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:59:20.497

两件快速的事情：

1.  `MultipartEntity`除非确实需要，否则不应使用重载的构造函数。在这种情况下，您将 charset 设置为 null，这可能不是一个好主意。此外，您的边界分隔符不够复杂。

2.  您的文件正文内容类型应反映正在上传的实际文件的内容。`multipart-formdata 通常用于 HTML 表单数据，而不是文件。您应该将其更改为“text/plain”或“image/jpeg”，或任何反映文件真实 mime 类型的内容。

一些用于调试 REST 请求的好工具 - [REST 控制台 (Chrome)](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)、[REST 客户端 (Firefox)](https://addons.mozilla.org/en-us/firefox/addon/restclient/)。

关于您收到的错误消息的一些快速说明，它实际上有相当多的细节。该服务期望为正在发送的文件部分设置以下参数：

*   姓名：
*   文件名：
*   内容类型：应用程序/八位字节流

您可以使用以下代码让 HTTP 客户端设置其中的大部分：

```
ContentBody cbFile = new FileBody(
    upfile,
    "yourFileNameHere",
    "application/octet-stream",
    "UTF-8"); 
```

# c# - 如何确定控件是否具有文本属性

> ID：15236462
> 
> 赞同：7
> 
> 时间：2013-03-05T23:55:13.720
> 
> 标签：c#, .net, winforms, xaml

当我遍历表单上的一堆不同控件时，而不是尝试访问 Text 属性：

```
String text = String.Empty;
foreach(Control control in this.Controls)
{
   try
   {
      text = control.Text;
   }
   catch(Exception exception)
   {
      // This control probably doesn't have the Text property.
      Debug.WriteLine(exception.Message);
   }
} 
```

有没有办法确定给定控件*是否*具有 Text 属性？像这样的东西：

```
String text = String.Empty;
foreach(Control control in this.Controls)
{
   if(control has Text property)
   {
      text = control.Text;
   }
} 
```

我绝对鄙视 Try/Catch 块（当然，除非没有更好的选择）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T00:06:52.253

*所有`Control`对象都有一个[`Text`property](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.text.aspx)*，因此使用反射来确定它是没有意义的。它总会回来`true`的。

您的问题实际上是某些控件从其`Text`属性中抛出异常，因为它们不支持它。

如果您还希望能够使用事先不知道的自定义控件，则应坚持当前的解决方案并捕获异常。但是，您应该捕获*抛出的特定异常*，例如`NotSupportedException`.

如果您只遇到事先知道的控件，则可以选择您知道具有工作`Text`属性的控件。例如：

```
public static bool HasWorkingTextProperty(Control control)
{
    return control is Label
        || control is TextBox
        || control is ComboBox;
}

var controlsWithText = from c in this.Controls
                       where HasWorkingTextProperty(c)
                       select c;

foreach(var control in controlsWithText)
{
    string text = control.Text;
    // Do something with it.
} 
```

如果您实现自己的自定义控件，这些控件可能有也可能没有`Text`属性，那么您可以从指示这一点的基类派生它们：

```
public abstract class CustomControlBase : Control
{
    public virtual bool HasText
    {
        get { return false; }
    }
}

public class MyCustomControl : CustomControlBase
{
    public override bool HasText
    {
        get { return true; }
    }

    public override string Text
    {
        get { /* Do something. */ }
        set { /* Do something. */ }
    }
}

public static bool HasWorkingTextProperty(Control control)
{
    return (control is CustomControlBase && ((CustomControlBase)control).HasText)
        || control is Label
        || control is TextBox
        || control is ComboBox;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T00:02:10.320

你的问题是**如何确定 Control 是否有 Text 属性**，所以这里是你如何使用反射来做到这一点：

```
control.GetType().GetProperties().Any(x => x.Name == "Text"); 
```

**编辑：**如果你看一下这个`Control`类，你会看到它有一个`Text`属性。

现在，如果某些覆盖类的自定义控件在访问属性`Control`时抛出异常，**则违反了****[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)**。在这种情况下，我建议您确定这些控件，尽管您所做的似乎很好。`Text`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T00:00:29.120

看一下这个：

```
private void Form1_Load(object sender, EventArgs e)
{
     foreach (Control ctrl in this.Controls)
     {
          PropertyInfo[] properties = ctrl.GetType().GetProperties();
          foreach(PropertyInfo pi in properties)
              if (pi.Name == "Text")
              { 
                    //has text
              }
       }

} 
```

# c++ - websocket++ 使用 fastcgi++ 的会话示例

> ID：15236465
> 
> 赞同：2
> 
> 时间：2013-03-05T23:55:23.270
> 
> 标签：c++, session, virtual-inheritance, fastcgi++, websocket++

我是 C++ 的新手，对 web 协议或 websockets 几乎一无所知，所以这看起来很荒谬。

我制作了 100% ajax 的网站，并希望包含 websockets。Fastcgi++ 是我对 ajax 需求所希望的一切，但它没有 websockets，我选择 websocket++ 而不是 libwebsockets，因为 websocket++ 或多或少是一个简单的`#include`，所以我认为我可以将它合并到 fastcgi++ 中。

我想我已经弄清楚了 fastcgi++，看起来大部分操作都发生在`Fastcgipp::Request`会话`Fastcgipp::Http::Sessions`数据[http://www.nongnu.org/fastcgipp/doc/2.1/a00005.html](http://www.nongnu.org/fastcgipp/doc/2.1/a00005.html)中；但是，我认为我必须对 websocket++ 做同样的事情`server::handler`来处理 websocket [https://github.com/zaphoyd/websocketpp/wiki/Creating-Applications-using-WebSocket--](https://github.com/zaphoyd/websocketpp/wiki/Creating-Applications-using-WebSocket--)，现在我迷路了。

输入我对 c++ 的完全缺乏经验：我想我必须使用[虚拟继承](http://en.wikipedia.org/wiki/Virtual_inheritance)，但我不知道。另外，如果我什至可以正确地将两者“子类化”，我如何确保它们不会相互超越？

请向我展示 websocket++ 如何使用 fastcgi++ 的会话管理的基本示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:45:06.140

HTTP 请求/响应工作流无法处理 WebSocket 连接。为了在常规 HTTP 请求和 WebSocket 请求中使用 fastcgi++ 之类的东西，它需要有某种方法来识别 WebSocket 握手并将其传递给另一个处理程序，而不是将其作为 HTTP 处理。我在其文档中没有看到明显的那种通过模式，但我可能会遗漏一些东西。

如果存在这样的功能，WebSocket++ 可以在流模式下使用，它会禁用其所有网络元素，只处理从另一个网络库输入的字节流。

一些替代方案：

*   WebSocket++ 支持 HTTP 直通。这基本上与上面描述的相反。WebSocket++ 将用作网络层。它将处理传入的 WebSocket 连接并将 HTTP 请求传递给其他子系统。
*   WebSocket++ 和 fastcgi++ 可以在不同的端口或不同的主机名上运行。这可以在同一个程序或单独的程序中完成。将客户端请求定向到适当的主机/端口。

免责声明：我是WebSocket++的作者

# c++ - 使用 RapidXML 和 Dev C++ 解析 C++ 中的 XML 文件

> ID：15236471
> 
> 赞同：1
> 
> 时间：2013-03-05T23:56:11.903
> 
> 标签：c++, xml-parsing, tree, dev-c++, rapidxml

所以我必须在课堂上为我的 C++ 项目解析一个 XML 文件，并且我正在使用 RapidXML。rapidxml_iterators.hpp 文件给我带来了一些麻烦。顺便说一句，我正在使用 Dev C++

起初，我有以下代码：

```
typedef typename xml_node<Ch> value_type;
typedef typename xml_node<Ch> &reference;
typedef typename xml_node<Ch> *pointer;
typedef std::ptrdiff_t difference_type;
typedef std::bidirectional_iterator_tag iterator_category; 
```

在我的 main.cpp 中，我做了：#include "rapidxml_iterators.hpp" 并在我尝试编译它时给了我一个预期的嵌套名称说明符错误。我按照[compile rapidxml under linux with g++](https://stackoverflow.com/questions/3830822/compile-rapidxml-under-linux-with-g)的说明，将代码从顶部更改为以下内容：

```
typedef xml_node<Ch> value_type;
typedef xml_node<Ch> &reference;
typedef xml_node<Ch> *pointer;
typedef typename std::ptrdiff_t difference_type;
typedef typename std::bidirectional_iterator_tag iterator_category; 
```

现在，它给了我这些错误：

- 没有名为`ptrdiff_t' in`std' 的类模板 -ISO C++ 禁止声明没有类型的 `difference_type'

如果有人对如何修复此代码有任何想法，我将永远感激不尽。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:02:17.900

你缺乏 的定义`std::ptrdiff_t`。所以编译器告诉你你不能`typedef`这样做，因为它没有定义。

只需在文件顶部包含正确的标题，你就会很好（只有这个错误！），也就是说，添加：

```
#include <cstddef> 
```

# javascript - 使用 javascript 构造 HTML 并传递变量（onclick 函数） - 引号/双引号语法问题

> ID：15236484
> 
> 赞同：0
> 
> 时间：2013-03-05T23:57:24.220
> 
> 标签：javascript, html

我正在构建一个带有注入 div 的 JavaScript 函数的 HTML 片段。

无法弄清楚如何动态地为传递的变量进行引号/双引号包装。

```
var vLC = "zh-CN"

var vHtml = "<input type='radio' id='rbtn1' onclick='renderList(" + vLC + ");' />"; 
```

此代码呈现： onclick="renderList(zh-CN);"

我需要它来渲染：onclick="renderList('zh-CN');"

那里有知道代码的天才吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:00:50.083

不要通过将字符串混合在一起来修改您的文档。维护起来更痛苦，这是值得的。

```
var element = document.createElement('input');
element.type = "radio";
element.id = "rbtn1";
element.addEventListener('click', function () {
    renderList(vLC);
}); 
```

这是一般规则。如果您在另一种语言中处理一种语言（编程、模板、数据序列化等），您会遇到痛苦。当您添加另一层（此处为 JS 中的 HTML 中的 JS）时，您会感到非常痛苦。

始终要么使用 API 来构建文档，要么依次构建每一层并在通过转义例程运行后将其添加到下一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:06:01.123

```
var vLC = "zh-CN"

var vHtml = "<input type=\"radio\" id=\"rbtn1\" onclick=\"renderList('" + vLC + "');\" />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:48:43.793

www.jsbin.com 来救援！- 感谢 Remy Sharp @rem :-D

解决方案是为 onclick 操作使用一个变量。

```
var vLanguageCode = "us-EN";
var vOnclick = 'renderList("' + vLanguageCode + '")';
vHtml = "<input type='radio' id='rbtn1' onclick=" + vOnclick + " />"; 
```

简化，简化...

# c++ - 使用 cvSplit()：我得到的是 BW 图片而不是彩色图片

> ID：15236488
> 
> 赞同：1
> 
> 时间：2013-03-05T23:57:37.060
> 
> 标签：c++, opencv

我正在使用 cvSplit() 来分离 RGB 通道并将它们打印成 3 个不同的图像，显​​示颜色 r、g 和 b。但我只得到带有黑白照片的 BW 图像。这是使用 cvSplit() 时正确的输出吗？或者我必须做点什么让它上色？以下是我到目前为止的代码。

```
![#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"

using namespace std;

int main(){
IplImage* img = cvLoadImage("rgb.jpg");

IplImage* channelRed = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* channelGreen = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* channelBlue = cvCreateImage(cvGetSize(img), 8, 1);

IplImage* Result1 = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* Result2 = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* Result3= cvCreateImage(cvGetSize(img), 8, 1);

cvSplit(img, channelBlue, channelGreen, channelRed, NULL);

cvThreshold(channelBlue, Result1, 20, 255, CV_THRESH_BINARY);
cvThreshold(channelGreen, Result2, 20, 255, CV_THRESH_BINARY);
cvThreshold(channelRed, Result3, 20, 255, CV_THRESH_BINARY);

cvShowImage("original", img);

cvShowImage("blue", Result1);
cvShowImage("green", Result2);
cvShowImage("red", Result3);

cvWaitKey(0); 

return 0;
}][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:27:12.650

它不会以这种方式工作。当你有一个单通道图像时，opencv 假设它是灰度的。

您可以做的是创建一个大小相同的蓝色、红色和绿色滤镜图像，在感兴趣的通道中填充 255，在其他通道中填充为零。

然后你只需运行以下函数来获取你的蓝色图像：

```
cvAnd(original_img,bluefilter_img,blue_result_img) 
```

重复红色和绿色过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:01:48.317

如果您有一个 3 通道图像，当您使用`cvSplit`它时，它会为您提供 3 个灰度图像（而不是黑白），因为它们是单通道图像。

img(R,G,B) ==> chRed(R)、chGreen(G)、chBlue(B)，其中 R、G 和 B 从 0 到 255。

img 有 255*255*255 颜色，其他只有 256。

你最终得到黑白图像只是因为你事后对它们进行了阈值处理。您可能想要使用 OpenCV 2.4.4 的最新版本并做一些更自动化和更强大的事情，例如`threshold(imgIn, imgOut, 100, 255, CV_THRESH_OTSU);` （参见：[http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#cv。阈值](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#cv.Threshold)）

所以如果目标是有一些艺术观点，那么perfanoff所说的就是正确的方法。但是，如果您打算对颜色检测进行某种工作，则单通道图像中没有颜色（因为这是不可能的）。

我不知道这是否清楚，请告诉我。

# ruby - 如何使用 openssl 安装 ruby (rubygems)？

> ID：15236490
> 
> 赞同：7
> 
> 时间：2013-03-05T23:57:53.287
> 
> 标签：ruby, rubygems

运行时`rvm rubygems latest`出现错误。怎么修？

```
Error running 'env GEM_PATH=/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/
sjc/.rvm/gems/ruby-2.0.0-p0@global:/Users/sjc/.rvm/gems/ruby-2.0.0-p0:
/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/Users/sjc/.rvm/gem
s/ruby-2.0.0-p0 /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /Users/s
jc/.rvm/src/rubygems-2.0.0/setup.rb', please read /Users/sjc/.rvm/log/
ruby-2.0.0-p0/rubygems.install.log 
```

日志（rubygems.install.log）有这个：

```
[2013-03-05 20:31:37] /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
/Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- openssl (LoadError)
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/security.rb:8:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/package.rb:43:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/installer.rb:8:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/request_set.rb:5:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems.rb:195:in `finish_resolve'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/rdoc.rb:14:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/uninstaller.rb:10:in `<top (required)>'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:440:in `uninstall_old_gemcutter'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:144:in `execute'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command.rb:305:in `invoke_with_build_args'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:170:in `process_args'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:130:in `run'
    from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/gem_runner.rb:60:in `run'
    from setup.rb:45:in `<main>'
RubyGems 2.0.0 installed 
```

因为我不知道自己在做什么，所以我认为我之前安装 sass 的尝试可能导致了这种情况。我遵循了[这些说明](http://docs.rubygems.org/read/chapter/3)，因此在当天早些时候执行了这些命令。

```
$ export GEM_HOME=/home/mygemrepository
$ ruby setup.rb --prefix=/home/mystuff 
```

同样，我不认为这很重要，因为 GEM_HOME 和 GEM_PATH 似乎正确。

```
$ echo $GEM_HOME
/Users/sjc/.rvm/gems/ruby-2.0.0-p0
$ echo $GEM_PATH
/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T05:27:27.647

看起来你缺少 openssl。结帐：[https ://rvm.io/packages/openssl/](https://rvm.io/packages/openssl/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-04T20:14:26.187

ruby 2.3.1 的示例，或者可能是其他版本的 ruby​​。

无需重新安装 rvm：

```
rvm pkg install openssl
rvm install 2.3.1 --with-openssl-dir=$HOME/.rvm/usr 
```

或者重新安装 rvm：

```
rvm implode
\curl -sSL https://get.rvm.io | bash
rvm pkg install openssl
rvm install 2.3.1 --with-openssl-dir=$HOME/.rvm/usr 
```

或者使用 ruby​​ < 2.3 的自定义 ruby​​gems：

```
rvm pkg install openssl
rvm install 2.2.2 --rubygems 2.7.10 --with-openssl-dir=$HOME/.rvm/usr 
```

PS：毕竟可能要重新安装所有的ruby版本

```
rvm reinstall all --force 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T15:46:04.537

另一个可能的问题是您的默认 Ruby 版本是否过时。

大多数操作系统都预装了 Ruby，但使用的是旧版本的 Ruby (1.8.x)，而不是 2.x 甚至 1.9.x，这可能会导致新版本的 rvm 失败。

$ rvm list 查看安装的 ruby​​ 版本列表，并使用（“ruby use uby-1.9.3-p429”等效项）进行设置，然后尝试： $ rvm get stable（获取最新的错误修复和 ruby​​ 版本更新） $ rvm ruby​​gems 最新

我还更改了默认的 ruby​​：$ rvm --default use 1.9.2

为我工作！

# django - 在 Django 中请求 GET 参数

> ID：15236491
> 
> 赞同：2
> 
> 时间：2013-03-05T23:58:04.707
> 
> 标签：django, http, url, request

我有一个看起来像这样的传入请求，它来自第三方，所以它不在我的控制范围内。

`/external/endpoint?PRN=1234567&INPUT=1111;ABCDEF&CUSTOMER=555454545`

当我打印请求参数时，`request.GET`这就是我得到的。该`INPUT`参数被分成两个不同的参数。

```
Incoming dict: {u'INPUT': [u'1111'], u'ABCDEF': [u''],u'CUSTOMER': [u'555454545'], u'PRN': [u'1234567']} 
```

我可以自己破解请求 URL，但我对请求对象的默认行为感到惊讶。以为它只用“&”划分参数。其他人看到这个或知道这是否应该发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:01:46.810

根据 W3，“;” 实际上是 URI 的首选参数分隔符。

[http://www.w3.org/TR/html4/appendix/notes.html#hB.2.2](http://www.w3.org/TR/html4/appendix/notes.html#h-B.2.2)

> B.2.2 URI 属性值中的和号
> 
> 提交表单时构建的 URI 可以用作锚样式链接（例如，A 元素的 href 属性）。不幸的是，使用“&”字符来分隔表单字段与它在 SGML 属性值中用于分隔字符实体引用的使用相互作用。例如，要将 URI`http://host/?x=1&y=2` 用作链接 URI，它必须写为`<A href="http://host/?x=1&#38;y=2">`或 `<A href="http://host/?x=1&amp;y=2">`。
> 
> 我们建议 HTTP 服务器实现者，特别是 CGI 实现者支持使用“;” 代替“&”来省去作者以这种方式转义“&”字符的麻烦。

# ruby-on-rails - 如何使用 ActiveRecord 访问 Postgres 列的默认值？

> ID：15236497
> 
> 赞同：6
> 
> 时间：2013-03-05T23:58:37.857
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-activerecord

我试图在我的 Postgres 9.2 数据库中访问列的默认值。通过使用原始 SQL，我可以验证列默认值是“users_next_id()”：

```
> db = ActiveRecord::Base.connection
> db.execute("SELECT table_name,column_name,column_default 
FROM information_schema.columns 
WHERE table_name = 'users' and column_name ='id'").first

=> {"table_name"=>"users",
 "column_name"=>"id",
 "column_default"=>"users_next_id()"} 
```

但是当我使用 AR 的 'columns' 方法时，默认值似乎是 nil：

```
[26] pry(main)> db.columns('users')[0]=> #<ActiveRecord::ConnectionAdapters::PostgreSQLColumn:0x007feb397ba6e8
 @coder=nil,
 @default=nil,
 @limit=8,
 @name="id",
 @null=false,
 @precision=nil,
 @primary=nil,
 @scale=nil,
 @sql_type="bigint",
 @type=:integer> 
```

这不会引起任何问题（除了让我感到困惑），但这是预期的行为吗？我是否对“列”方法做出了不正确的假设？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T04:29:35.807

当 ActiveRecord 需要了解一个表时，它会执行与您的查询类似的`information_schema`查询，但 AR 将通过[PostgreSQL 特定的系统表](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L1285)来代替：

```
 SELECT a.attname, format_type(a.atttypid, a.atttypmod),
         pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
    FROM pg_attribute a LEFT JOIN pg_attrdef d
      ON a.attrelid = d.adrelid AND a.attnum = d.adnum
   WHERE a.attrelid = '#{quote_table_name(table_name)}'::regclass
     AND a.attnum > 0 AND NOT a.attisdropped
ORDER BY a.attnum 
```

在[PostgreSQL 适配器源](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb)中搜索“regclass”，您将看到 AR 将用来确定表结构的其他一些查询。

上述查询中的[`pg_get_expr`](http://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)调用是列的默认值的来源。

该查询的结果或多或少[直接进入`PostgreSQLColumn.new`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L853)：

```
def columns(table_name, name = nil)
  # Limit, precision, and scale are all handled by the superclass.
  column_definitions(table_name).collect do |column_name, type, default, notnull|
    PostgreSQLColumn.new(column_name, default, type, notnull == 'f')
  end
end 
```

构造[`PostgreSQLColumn`函数](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L36)将用于[`extract_value_from_default`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L134)Ruby-ify 默认值；in的[结尾`switch`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L181)`extract_value_from_default`很有趣：

```
else
  # Anything else is blank, some user type, or some function
  # and we can't know the value of that, so return nil.
  nil 
```

因此，如果默认值绑定到一个序列（`id`PostgreSQL 中的列将是），那么默认值将作为类似于以下的函数调用从数据库中出来：

```
nextval('models_id_seq'::regclass) 
```

这最终会出现在上面的`else`分支中，并且`column.default.nil?`是真的。

对于`id`列，这不是问题，AR 期望数据库为`id`列提供值，因此它不关心默认值是什么。

如果列的默认值是 AR 无法理解[的，例如函数调用，例如`md5(random()::text)`](https://stackoverflow.com/q/15152988/479863). 问题是 AR 会将所有属性初始化为它们的默认值——正如`Model.columns`你所见，而不是数据库所见——当你说`Model.new`. 例如，在控制台中，您会看到如下内容：

```
 > Model.new
=> #<Model id: nil, def_is_function: nil, def_is_zero: 0> 
```

So if `def_is_function` actually uses a function call as its default value, AR will ignore that and try to insert a NULL as that column's value. That NULL will prevent the default value from being used and you'll end up with a confusing mess. Defaults that AR can understand (such as strings and numbers) work just fine though.

The result is that you can't really use non-trivial default column values with ActiveRecord, if you want a non-trivial value then you have to do in Ruby through one of the ActiveRecord callbacks (such as `before_create`).

IMO it would be much better if AR left the default values up to the database if it didn't understand them: leaving them out of the INSERT or using DEFAULT in the VALUES would produce much better results; AR would, of course, have to reload newly created objects from the database in order to get all the proper defaults but you'd only need the reload if there were defaults that AR didn't understand. If the `else` in `extract_value_from_default` used a special "I don't know what this means" flag instead of `nil` then the "I need to reload this object after the first save" condition would be trivial to detect and you'd only reload when necessary.

* * *

The above is PostgreSQL-specific but the process should be similar for other databases; however, I make no guarantees.

# c# - 解析.net中的hstore列

> ID：15236500
> 
> 赞同：1
> 
> 时间：2013-03-05T23:58:49.700
> 
> 标签：c#, .net, postgresql

我想知道在 .net 中检索和处理 hstore 数据的最佳方法是什么。

如果我做一个基本的查询，那么它会输出一个这样格式化的字符串：

`"key1" => "value1", "key2" => "value2"`

看起来像我今天这样解析的 KeyValuePair ：

```
SimpleJson.SimpleJson
.DeserializeObject<Dictionary<string, string>> ("{" + tags.Replace ("=>", ":") + "}"); 
```

我可以通过以下方式手动完成：

*   先用“，”分割
*   然后循环并用“=>”分割
*   然后提取左键和右值

但是，如果一个值中有一个“，”或者一个值中有一个完整的元素，我应该进行递归解析吗？还有关于解析字符串的所有问题:)

您是否看到比 Json 的把戏更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T05:59:46.220

你有几个选择。我不能说是否有比你现在拥有的更好。我的建议实际上是在 9.3 处于 beta 版本后立即开始 beta 测试，并考虑将您的代码移到那里。9.3 的 hstore 可以转换为 json，因此您可以在 db 中执行此操作。这可能是计划成为早期采用者的一个很好的理由。本质上，在 9.3 中，您将能够：

```
SELECT my_hstore::json FROM mytable; 
```

第二种可能性是您可以在 PostgreSQL 的内存中创建一个结构（对于 9.1 和 9.2 中现有的支持版本），以将您自己的转换写入 json。有关如何做到这一点的见解，请参阅下面的 Andrew 的博客。

第三种可能性是使用 XML 的现有函数并编写 XML 转换。这[相当容易](http://people.planetpostgresql.org/andrew/index.php?/archives/63-hstore-and-XML-fun.html)。使用一个简单的功能，您可以轻松地执行以下操作：

从 mytable 中选择 my_hstore::xml；

最后一种可能性是在 .net 中进行字符串解析。这是我知之甚少的领域，但我也建议它是最后的选择，很大程度上是因为与其他人一样，您可以直接访问 hstore 数据接口，也因为您将使用的功能都有相对紧张的合同和很多其他用户。

# objective-c - 从 NSString 中删除最后一个字符

> ID：15236503
> 
> 赞同：0
> 
> 时间：2013-03-05T23:59:02.733
> 
> 标签：objective-c, string, macos, core-foundation

我有一个`NSString`，对于我的生活，我无法弄清楚如何去做`remove spaces`，然后接受`last 30 characters`它。

像这样的错误：

`3/5/13 3:38:30 PM *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType UTF8String]: unrecognized selector sent to instance 0x160bf20'`

或者

`3/5/13 3:30:51 PM *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType length]: unrecognized selector sent to instance 0x160bf20'`

我不明白这些错误。

代码：

```
NSString* m = (NSString*)CFDictionaryGetValue(diskDesc, kDADiskDescriptionVolumeUUIDKey);
[m stringByReplacingOccurrencesOfString:@" " withString:@""]    
NSString *newString = [m substringToIndex:[m length]-30]; 
```

另一个更新：

```
NSString * m = (NSString*)CFDictionaryGetValue(diskDesc, kDADiskDescriptionDeviceModelKey);
NSString * v = (NSString*)CFDictionaryGetValue(diskDesc, kDADiskDescriptionVolumeUUIDKey);

if(m)
{
    m = [m stringByReplacingOccurrencesOfString:@" " withString:@""];
}

if(v)
{
    if([v length] > 30)
    {
        NSString *newString = [v substringToIndex:[v length]-30];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:08:38.930

看起来是一个很好的错误检查机会。像这样：

```
NSString * m = (NSString*)CFDictionaryGetValue(diskDesc, kDADiskDescriptionDeviceModelKey);
if(m)
{
    m = [m stringByReplacingOccurrencesOfString:@" " withString:@""]
    if([m length] > 30)
    {
        NSString *newString = [m substringToIndex:[m length]-30];
    } else {
        NSLog( @"m isn't even 30 characters");
    }
} else {
    NSLog( @"I didn't get anything useful from my call to CFDictionaryGetValue");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:01:07.887

您应该注意 DADisk.h 头文件中的文档，该文件指定字典将为特定键保存的结果类型：

```
extern const CFStringRef kDADiskDescriptionVolumeUUIDKey;      /* ( CFUUID       ) */

extern const CFStringRef kDADiskDescriptionDeviceModelKey;     /* ( CFString     ) */ 
```

所有键本身都是`NSString`/ `CFString`s，但是当您向字典询问该键的值时，没有什么说它必须是字符串。右侧括号中的值显示了为该键保存的值的类型。

要获取密钥持有的字符串表示`CFUUID`，`kDADiskDescriptionVolumeUUIDKey`可以使用 CFUUIDCreateString()：

```
CFUUIDRef UUID = (CFUUIDRef)[(NSDictionary *)diskDesc
               objectForKey:(id)kDADiskDescriptionVolumeUUIDKey];

NSString *UUIDString = [(id)CFUUIDCreateString(NULL, UUID) autorelease]; 
```

此外，删除多余空格的代码`kDADiskDescriptionDeviceModelKey`应该如下：

```
NSString *deviceModel = [(NSDictionary *)diskDesc
              objectForKey:(id)kDADiskDescriptionDeviceModelKey];

NSLog(@"deviceModel == '%@'", deviceModel);

NSCharacterSet *whitespaceCharacterSet = [NSCharacterSet
                                  whitespaceAndNewlineCharacterSet];

deviceModel = [deviceModel stringByTrimmingCharactersInSet:whitespaceCharacterSet];

NSLog(@"deviceModel == '%@'", deviceModel); 
```

该代码为我记录了以下内容：

```
diskArbitrationFinagler[] deviceModel == 'WDC WD6400AAKS-41H2B0                   '
diskArbitrationFinagler[] deviceModel == 'WDC WD6400AAKS-41H2B0' 
```

您`stringByReplacingOccurrencesOfString:`会错误地删除 和 之间的`WDC`空格`WD64....`。

# iphone - 为什么存储在寄存器中的数据有内存地址？

> ID：15236511
> 
> 赞同：1
> 
> 时间：2013-03-05T23:59:33.650
> 
> 标签：iphone, objective-c, assembly

如果我有以下代码：

```
-(int)number {
    int i = 3;
    return i;
} 
```

我可以通过 &i 得到整数 i 的内存地址。（比如说在返回线上的断点处暂停）

然而，相应的程序集（ARM）将很简单：

```
MOV R0, #3 
```

没有地方需要内存（除了存储指令），那么怎么`i`会有内存地址呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T03:06:54.727

该代码可能不需要使用内存，但这并不意味着它不使用内存。编译器可以随心所欲地实现它。如果没有优化，这意味着变量可能都存储在内存中，无论它们是否需要。例如，考虑这个非常基本的程序：

```
int main() {
    int i = 0;
    return i;
} 
```

在禁用优化（默认情况下）的情况下，Apple clang 4.0 为我提供了以下程序集：

```
_main:
    sub   sp, sp, #4
    movw  r0, #0
    str   r0, [sp]
    add   sp, sp, #4
    bx    lr 
```

启用优化后，我得到了一个更简单的程序：

```
_main:
    mov   r0, #0
    bx    lr 
```

如您所见，未优化的版本将 0 存储在内存中，但优化的版本没有。如果您要在调试器中使用优化版本，它将无法为您提供`i`. 我实际上得到了一个`i`未定义的错误，因为它已经被完全优化了。

# javascript - 是否可以在运行时或运行后操纵每个 Javascript 变量、对象？

> ID：15236513
> 
> 赞同：1
> 
> 时间：2013-03-05T23:59:39.320
> 
> 标签：javascript

似乎没有办法完全隐藏源/加密某些内容以防止用户检查脚本背后的逻辑。

那么，除了查看源代码之外，是否可以在脚本运行时操纵每个变量、对象？这在某种程度上似乎是可能的：通过使用 Chrome 的开发者工具或 Firebug，您可以轻松地编辑变量，甚至在全局范围内调用函数。那么变量、实例化对象内部的函数或自调用匿名函数呢？这是一个例子：

```
var varInGlobal = 'On the global scope: easily editable';

function CustomConstructor()
{
    this.exposedProperty = 'Once instantiated, can be easily manipulated too.';

    this.func1 = function(){return func1InConstructor();}

    var var1InConstructor = 'Can be retrived by invoking func1 from an instantiated object';
                            // Can it be assigned a new value after this is instantiated?

    function func1InConstructor()
    {
        return var1InConstructor;
    }
}

var customObject = new CustomConstructor(); 
```

在浏览器上运行之后：

```
// CONSOLE WINDOW
varInGlobal = 'A piece of cake!';

customObject.exposedProperty = 'Has new value now!';
customObject.var1InConstructor; // undefined: the variable can't be access this way
customObject.func1(); // This is the correct way 
```

在这个阶段，用户是否可以在 customObject 中编辑变量“var1InConstructor”？

这是另一个例子：

> There is a RPG game built on Javascript. The hero in the game has two stats: strength and agility. the character's final damage is calculated by combining these two stats. It is clear that players can find out this logic by inspecting the source.

Let's assume the entire script is self invoked and stats/calculate functions are inside of objects' constructors so they can't be reached by normally after instantiated. My question is, can the players edit the character's str and agi while the game is running(by using Firebug or whatever) so they can steamroll everything and ruin the game?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:08:38.323

The variable `var1InConstructor` cannot be re-bound under normal ECMAScript rules as it is visible only within the lexical scope. However, as alex (and others) rightly say, the client should not be trusted.

Here are some ways the user can exploit the assumption that the variable is read-only:

1.  Use a JavaScript debugger (e.g. FireBug) and re-assign the variable while stopped at a breakpoint within the applicable scope.

2.  Copy and paste the original source code, but add a setter with access to the variable. The user could even copy the entire program invalidating almost every assumption about execution.

3.  Modify or inject a value at a usage site: an exploitation might be possible without ever actually updating the original variable (e.g. `player.power = function () { return "godlike" }`).

In the end, with a client-side program, there is no way to absolutely *prevent* a user from cheating without a centralized authority (read: server) auditing every action - and even then it still might be possible to cheat by reading additional game state, such as enemy positions.

JavaScript, being easy to read, edit, and execute dynamically is even easier to hack/fiddle with than a compiled application. Obfuscation is possible but, if someone wants to cheat, they will.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T00:09:43.330

I don't think this constitutes an answer, it could be seen as anecdotal, but it's a bit long for a comment.

Everything you do when it comes to the integrity of your coding on this issue has to revolve around needing to verify that the data hasn't changed outside of the logic of your game.

My experience with game development (via flash, primarily...but could be compared to javascript) is that you need to think about everything being a handshake where possible. When you are expecting data to come to the server from the client you want to make sure that you have some form of passage of communication that lessens the chance of someone simply sending false data. Store data on the server side as much as possible and use the client side code to call for it when it's needed, and refresh this data store often.

You'll find that HTML games tend to do a lot of abstraction of the logic to the server side, even for menial tasks. Attacking an enemy, picking up an item, these are calls to functions within server-side code, and is why the game animation could carry on in some of these games while the connection times out in the background, causing error messages to pop up and refresh the interface to the server's last known valid state.

Flash was easier in this regard as you didn't have any access to alter any data or corrupt it unless it left the flash environment

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T00:01:42.790

Yes, anything ran on the client should be untrusted if you're using the data from it to update a server side state.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:06:00.193

As you suggested, you can't hide the logic/client-side code. You can make it "harder" for people to read the source by obfuscating it, but it's very trivial to undo.

Assuming you're making a game from your example, the first rule of networked games is "never trust the client". You need to either run all the game logic on a server, or you need to validate all the input on a server. Never update the game state based on input from a client without validating it first.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T00:09:17.810

You can't hide any variable. Also, if the user is so good in javascript, he can easily edit your script, without editing the variables value through the console.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:15:09.593

JS code that is injected into an HTML using Ajax is pretty darn difficult to get your hands on, but it also has it's limitations. Most notably, you can't use JS includes in injected HTML . . . only inline JS.

I've been working with some of that recently actually and it's a real pain to debug. You can't see it, step into it, or add breakpoints to it in any way that I can figure out . . . in Firebug or Chrome's built-in tool.

But, as others have said . . . I still wouldn't consider it trusted.

# android - ViewPager 片段创建

> ID：15236519
> 
> 赞同：1
> 
> 时间：2013-03-06T00:00:08.977
> 
> 标签：android, android-fragments, android-viewpager

我有一个`ViewPager`2`Fragment`秒。我的问题是：什么时候`ViewPager`创建`Fragment`s？因为如果我尝试从我的活动中运行一些方法，例如：

```
MainFragment mf = (MainFragment) mPagerAdapter.getItem(0);
mf.setValues("blah"); 
```

在调试模式下，我可以看到它`mf`已经创建并且有它的 ID，但是`onCreate()`方法还没有被调用，我的视图是`null`但`mf`有 ID = `xxxxxxx`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:03:45.050

[`getItem(int position)`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html#getItem%28int%29)或[`instantiateItem(ViewGroup container, int position)`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html#instantiateItem%28android.view.ViewGroup,%20int%29)方法返回由 a 使用的[`FragmentPagerAdapter`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)新实例。`Fragment``ViewPager`

# perl - Perl 模块与外部命令

> ID：15236524
> 
> 赞同：1
> 
> 时间：2013-03-06T00:00:19.400
> 
> 标签：perl

我继承了一个文件传输环境，其中包含一组在 Linux 上运行的用 Perl 编写的脚本。简而言之，这些脚本只是在使用 SFTP 和 SMB/CIFS 协议的站点之间传输文件。

我注意到脚本使用 Net::SFTP::Foreign 进行 SFTP 连接处理。

与仅调用诸如`lftp`or之类的外部命令相比，使用 Perl 模块来完成连接和传输有什么优势`smbclient`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T00:15:31.747

您通常可以使用模块获得更好的错误检测和报告。我想不出任何充分的理由来更改已经工作的代码以使用外部命令。

# c++ - 我们可以在 C++11 中将 auto 与类成员初始化器一起使用吗？

> ID：15236533
> 
> 赞同：1
> 
> 时间：2013-03-06T00:00:47.050
> 
> 标签：c++, c++11, auto

在 C++ 中，我们有类成员初始化器，但我似乎无法对非静态成员使用自动/静态类型推导。

```
struct Foo {
    auto bar = []() { return 1; };
    auto baz = "test";
}; 
```

那行不通（至少在clang上：Apple LLVM 4.2版（clang-425.0.24））。

这只是一个编译器错误，还是标准不要求支持它（如果是，为什么不支持）？

# java - AsyncTask 可变参数的用途

> ID：15236541
> 
> 赞同：15
> 
> 时间：2013-03-06T00:01:02.167
> 
> 标签：java, android, android-asynctask

Google 使用`varargs`中的参数的原因是什么[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)？例如方法[`execute()`](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)，[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)并且[`publishProgress()`](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)都使用`[Type]...`符号。

我认为这使它“更难”使用，所以他们必须有一些我忽略的充分理由？

* * *

所以，要么我们没有参数，要么有一个参数，要么有多个参数。让我们分解一下：

1.  **无参数**（简单）：`Params`参数就是`Void`这样。（这些方法不能使用它......所以这很安全。）

2.  **一个参数**：在这里，我至少觉得有必要在`doInBackground()`方法的开头做一个检查。例如，这是一个接收`Integer`并产生类型结果的任务`Double`：

    ```
    public Double doInBackground(Integer... myParameters) {
        // we are only expecting one parameter
        if (myParameters.length != 1)
            throw new IllegalArgumentException("!= 1");

        return 100d * myParameters[0];
    } 
    ```

3.  **不止一个参数**。现在这里一定是谷歌做出正确选择的地方吗？但正如我所见，要么你对*相同类型*的参数列表感兴趣，要么你想要*不同类型*的参数。谷歌只解决了其中一种情况（对于不同的类型，您需要某种通用接口。在许多情况下，我最终`Object...`得到的结果并不是真正的类型安全......）

* * *

那么，如果我们完全删除它会出现什么问题`varargs`呢？这是方法的子集：

```
class AsyncTask<Param, Progress, Result> {

    abstract Result doInBackground(Param param);
    void publishProgress(Progress progress) { ... }
} 
```

这适用于上述所有情况。例如，如果我们想处理一个参数数组，我们可以只使用数组类型`param`：

```
class MyAsyncTask extends AsyncTask<String[], Integer, String> { 

    String doInBackground(String[] param) {
        return Arrays.toString(param);
    }
} 
```

我看不出它什么时候会有实际用途。但我确定我错过了一些我需要知道的东西。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:01:23.343

我认为 vararg 参数只是让您在调用*执行*`AsyncTask`.

只要我们想知道为什么 AsyncTask 是这样设计的：:-)

在我看来，`Param`和`Result`模板对于完成同样的事情并不是真正必要的。

当您编写自己的`AsyncTask`时，您将其子类化。除了为`Param`and声明实际类型`Result`，您还可以将 final 字段添加到您的子类 (Params) 并将可修改字段添加到您的子类 (Result)。例如：

```
public class MyAsyncTask extends AsyncTask<Void> {
    // Input Params
    private final int inParam1;
    private final String inParam2;

    // Output Results
    private Bitmap resultBitmap;

    public MyAsyncTask(int param1, String param2) {
        inParam1 = param1;
        inParam2 = param2;
    }

    @Override
    protected void doInBackground() {
        // use param1 and param2 as input to the background process.
        ...
        ...
        // Finished: assign to result
        resultBitmap = ....;
    } 

    @Override
    protected void onPostExecute() {
        // Send result to UI.
        ... resultBitmap ...
        ...
        resultBitmap = null;
    }
} 
```

不需要泛型，也许除了显示进度。

这是我通常会做的事情，特别是如果结果是`Bitmap`. 在所有设置和完成之后，返回`doInBackground`和处理的值未设置为 null，并且它以这种方式偷偷地“泄漏”（由 completed/finished 保存在内存中的位图引起的内存错误）。`onPostExecute``Bitmaps``AsyncTasks`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:29:25.703

我认为你是对的，类型参数的唯一用法`Params`是 in `Params...`，这意味着它确实`Params[]`是这里想要的。但是现在 API 只适用于数组类型，它遗漏了很多非数组类型。

可变参数的唯一优势是在调用站点，但也不是很多 -

谷歌版本：

```
AsyncTask<String> task = ...
task.execute("a", "b"); 
```

你的版本：

```
AsyncTask<List<String>> task = ...
task.execute(Arrays.asList("a", "b")); 
```

# mysql - MySQL 正则表达式不工作

> ID：15236542
> 
> 赞同：2
> 
> 时间：2013-03-06T00:01:12.593
> 
> 标签：mysql, regex, concat

我正在尝试更新我的产品数据库并在简化某些产品编号后查找重复项。

这是我正在尝试但不起作用的方法：

```
SELECT b.Id as OLDID, c.Id as NEWID
FROM productdata b, productdata c
WHERE b.ProdNum REGEXP CONCAT('^', c.ProdNum, '(\-|\s)[a-zA-Z0-9]+(\-|\s)[a-zA-Z0-9]+') 
```

旧货号：WR-101 3 Day（还有WR-101 1 Day等）

新产品编号：WR-101

所以基本上我需要一个 where 子句，它将新产品编号与带有“1 天”、“3 天”等的旧产品编号相匹配。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:08:56.913

MySQL 的正则表达式不支持`\s`空格。你需要使用`[[:space:]]`. 您也不需要转义破折号：

```
(-|[[:space:]])[a-zA-Z0-9]+(-|[[:space:]])[a-zA-Z0-9]+ 
```

# python - Django RuntimeError：超出最大递归深度

> ID：15236556
> 
> 赞同：3
> 
> 时间：2013-03-06T00:02:36.210
> 
> 标签：python, django, eclipse, pydev

我是 Django 的新手。我使用easy_install（在Mac上）和用于eclipse的PyDev Django插件安装了Django。我按照标准程序创建了一个新的 PyDev Django 项目。当我尝试将项目作为 PyDev: Django 运行时，出现以下错误。

```
Validating models...

RuntimeError: maximum recursion depth exceeded 
```

我也尝试在 manage.py 中添加以下行，但它没有用。

```
sys.setrecursionlimit(2000) 
```

这是部分堆栈跟踪。

```
Unhandled exception in thread started by <bound method Command.inner_run of    <django.contrib.staticfiles.management.commands.runserver.Command object at 0x10e2*****>>
Traceback (most recent call last):
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/core/management/commands/runserver.py", line 92, in inner_run
self.validate(display_num_errors=True)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/core/management/base.py", line 280, in validate
num_errors = get_validation_errors(s, app)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/core/management/validation.py", line 35, in get_validation_errors
for (app_name, error) in get_app_errors().items():
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/loading.py", line 166, in get_app_errors
self._populate()
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/loading.py", line 72, in _populate
self.load_app(app_name, True)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/loading.py", line 96, in load_app
models = import_module('.models', app_name)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/contrib/auth/models.py", line 370, in <module>
class AbstractUser(AbstractBaseUser, PermissionsMixin):
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/base.py", line 213, in __new__
new_class.add_to_class(field.name, copy.deepcopy(field))
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/base.py", line 265, in add_to_class
value.contribute_to_class(cls, name)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/fields/__init__.py", line 257, in contribute_to_class
cls._meta.add_field(self)
File "/Library/Python/2.7/site-packages/Django-1.5-py2.7.egg/django/db/models/options.py", line 179, in add_field
self.local_fields.insert(bisect(self.local_fields, field), field)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py", line 56, in <lambda>
'__lt__': [('__gt__', lambda self, other: other < self),
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py", line 56, in <lambda>
'__lt__': [('__gt__', lambda self, other: other < self),
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py", line 56, in <lambda>
'__lt__': [('__gt__', lambda self, other: other < self),
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py", line 56, in <lambda>
'__lt__': [('__gt__', lambda self, other: other < self), 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-17T16:55:41.583

问题出在 functools.py 文件中。该文件来自 Python。

要解决这个问题，请替换这个（关于 python\Lib\fuctools.py 中的第 56 行）：

```
 convert = {
    '__lt__': [('__gt__', lambda self, other: other < self),
               ('__le__', lambda self, other: not other < self),
               ('__ge__', lambda self, other: not self < other)],
    '__le__': [('__ge__', lambda self, other: other <= self),
               ('__lt__', lambda self, other: not other <= self),
               ('__gt__', lambda self, other: not self <= other)],
    '__gt__': [('__lt__', lambda self, other: other > self),
               ('__ge__', lambda self, other: not other > self),
               ('__le__', lambda self, other: not self > other)],
    '__ge__': [('__le__', lambda self, other: other >= self),
               ('__gt__', lambda self, other: not other >= self),
               ('__lt__', lambda self, other: not self >= other)]
} 
```

对此：

```
 convert = {
    '__lt__': [('__gt__', lambda self, other: not (self < other or self == other)),
               ('__le__', lambda self, other: self < other or self == other),
               ('__ge__', lambda self, other: not self < other)],
    '__le__': [('__ge__', lambda self, other: not self <= other or self == other),
               ('__lt__', lambda self, other: self <= other and not self == other),
               ('__gt__', lambda self, other: not self <= other)],
    '__gt__': [('__lt__', lambda self, other: not (self > other or self == other)),
               ('__ge__', lambda self, other: self > other or self == other),
               ('__le__', lambda self, other: not self > other)],
    '__ge__': [('__le__', lambda self, other: (not self >= other) or self == other),
               ('__gt__', lambda self, other: self >= other and not self == other),
               ('__lt__', lambda self, other: not self >= other)]
} 
```

另请阅读：[http ://regebro.wordpress.com/2010/12/13/python-implementing-rich-comparison-the-correct-way/](http://regebro.wordpress.com/2010/12/13/python-implementing-rich-comparison-the-correct-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:36:48.853

我删除了 PyDev、Django 和 Python 并重新安装了所有这些，现在它可以工作了。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T16:41:07.317

`pyenv virtualenvs`我在使用python 2.7.1时遇到过几次。我不想编辑核心文件，所以我升级到 2.7.5 并且它运行完美。希望这对你们中的一些人来说是一个选择。

# c - 各种平台上的指针地址范围

> ID：15236562
> 
> 赞同：0
> 
> 时间：2013-03-06T00:03:15.277
> 
> 标签：c, pointers, error-handling, memory-address, void-pointers

用 C 编码时的一个常见情况是编写返回指针的函数。如果在运行时编写的函数中发生错误，`NULL`可能会返回以指示错误。`NULL`只是特殊的内存地址 0x0，它从不用于任何事情，只是表示特殊情况的发生。

**我的问题是，是否有任何其他特殊的内存地址永远不会用于用户级应用程序数据？**

我想知道这一点的原因是因为它可以有效地用于错误处理。考虑一下：

```
#include <stdlib.h>
#include <stdio.h>

#define ERROR_NULL 0x0
#define ERROR_ZERO 0x1

int *example(int *a) {
    if (*a < 0)
        return ERROR_NULL;
    if (*a == 0)
        return (void *) ERROR_ZERO;
    return a;
}

int main(int argc, char **argv) {
    if (argc != 2) return -1;
    int *result;
    int a = atoi(argv[1]);
    switch ((int) (result = example(&a))) {
        case ERROR_NULL:
            printf("Below zero!\n");
            break;

        case ERROR_ZERO:
            printf("Is zero!\n");
            break;

        default:
            printf("Is %d!\n", *result);
            break;
    }
    return 0;
} 
```

知道一些用户级应用程序永远不会使用的特殊地址范围可以有效地用于更有效和更清洁的条件处理。如果您知道这一点，它适用于哪些平台？

我猜跨度将是操作系统特定的。我对 Linux 最感兴趣，但也很高兴了解 OS X、Windows、Android 和其他系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T00:07:28.897

> NULL 只是特殊的内存地址 0x0，它从不用于任何事情，只是表示特殊情况的发生。

这并不完全正确：有些计算机`NULL`内部的指针不是零（[链接](http://c-faq.com/null/machexamp.html)）。

> 是否有任何其他特殊的内存地址永远不会用于用户级应用程序？

Even`NULL`不是普遍的；考虑到用 C 语言编程的不同平台的数量，没有其他普遍未使用的内存地址，这并不奇怪。

但是，没有人阻止您在内存中定义自己的特殊地址，将其设置为全局变量，并将其视为错误指示器。这将适用于所有平台，并且不需要特殊的地址位置。

在标题中：

```
extern void* ERROR_ADDRESS; 
```

在 C 文件中：

```
static int UNUSED;
void *ERROR_ADDRESS = &UNUSED; 
```

此时，`ERROR_ADDRESS`指向一个全局唯一位置（即 的位置`UNUSED`，它是定义它的编译单元的本地位置），您可以使用它来测试指针是否相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:08:52.773

它完全取决于计算机和操作系统。例如，在像 Game Boy Advance 这样具有内存映射 IO 的计算机上，您可能不想将“左上角像素是什么颜色”的地址与用户空间数据混淆：

[http://www.coranac.com/tonc/text/hardware.htm#sec-memory](http://www.coranac.com/tonc/text/hardware.htm#sec-memory)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:09:58.760

作为程序员，你不应该担心地址，因为它在不同的平台上是不同的，在实际的硬件地址和你的应用程序之间你有很多层。在大多数现代操作系统上，物理到虚拟的转换是其中一项重要的转换，虚拟地址空间被映射到内存中，每个进程都有自己的地址空间，在硬件级别受到其他进程的保护。

您在此处指定的只是十六进制值，它们不会被解释为地址。设置为 NULL 的指针本质上是说它不指向任何东西，甚至不指向地址零。它只是空。无论它的价值是什么，都取决于平台、编译器和许多其他东西。

未定义将指针设置为任何其他值。指针是一个存储另一个地址的变量，你要做的是给这个指针一些其他的值而不是有效的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T03:22:11.920

答案很大程度上取决于您的 C 编译器以及您的 CPU 和操作系统，您编译的 C 程序将在其中运行。

您的用户级应用程序通常永远无法通过指向 OS 内核数据和代码的指针访问数据或代码。并且操作系统通常不会将此类指针返回给应用程序。

通常，它们也永远不会获得指向没有物理内存支持的位置的指针。您只能通过错误（代码错误）或有目的地构造这样的指针来获得这样的指针。

C 标准无论如何都没有定义指针的有效范围是什么，什么不是。在 C 中，有效指针是`NULL`指向生命周期尚未结束的对象的指针或指针，它们可以是全局变量和局部变量，也可以是在`malloc()'d`内存和函数中创建的变量。操作系统可以通过返回来扩展这个范围：

*   指向未在 C 程序的源代码级别明确定义的代码或数据对象的指针（操作系统可能允许应用程序直接访问其某些代码或数据，但这并不常见，或者操作系统可能允许应用程序访问它们的某些部分要么在应用加载时由操作系统创建，要么在编译应用时由编译器创建，一个例子是 Windows 让应用检查它们的可执行 PE 映像，你可以询问 Windows 映像在内存中的哪里开始）
*   指向操作系统为/代表应用程序分配的数据缓冲区的指针（在这里，通常，操作系统将使用它自己的 API 而不是您的应用程序的`malloc()`/ `free()`，并且您需要使用适当的操作系统特定函数来释放此内存)
*   无法取消引用且仅用作错误指示符的特定于操作系统的指针（例如，您可能拥有多个可引用的指针，例如`NULL`，您`ERROR_ZERO`是可能的候选者）

我通常不鼓励在程序中使用硬编码和魔术指针。

如果由于某种原因，指针是传达错误条件的唯一方法并且其中有多个错误条件，则可以这样做：

```
char ErrorVars[5] = { 0 };
void* ErrorPointer1 = &ErrorVars[0];
void* ErrorPointer2 = &ErrorVars[1];
...
void* ErrorPointer5 = &ErrorVars[4]; 
```

然后，您可以在不同的错误条件下返回，然后将返回的值与它们进行比较`ErrorPointer1`。`ErrorPointer1`不过，这里有一个警告。您不能使用`>`, `>=`, `<`,合法地将返回的指针与任意指针进行比较`<=`。只有当两个指针都指向或指向同一个对象时，这才是合法的。因此，如果您想要这样的快速检查：

```
if ((char*)(p = myFunction()) >= (char*)ErrorPointer1 &&
    (char*)p <= (char*)ErrorPointer5)
{
  // handle the error
}
else
{
  // success, do something else
} 
```

`p`只有当等于这 5 个错误指针之一时它才是合法的。如果不是，您的程序可以合法地以任何可以想象和无法想象的方式运行（这是因为 C 标准是这样说的）。为避免这种情况，您必须单独将指针与每个错误指针进行比较：

```
if ((p = myFunction()) == ErrorPointer1)
  HandleError1();
else if (p == ErrorPointer2)
  HandleError2();
else if (p == ErrorPointer3)
  HandleError3();
...
else if (p == ErrorPointer5)
  HandleError5();
else
  DoSomethingElse(); 
```

同样，指针是什么以及它的表示是什么，是特定于编译器和 OS/CPU 的。C 标准本身不要求有效和无效指针的任何特定表示或范围，只要这些指针按照 C 标准的规定运行（例如，指针算术与它们一起工作）。关于这个话题有一个[很好的问题](https://stackoverflow.com/q/15151377/968261)。

因此，如果您的目标是编写可移植的 C 代码，请不要使用硬编码和“魔术”指针，而更喜欢使用其他东西来传达错误条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T00:10:27.343

这段代码：

```
#define ERROR_NULL 0x0
#define ERROR_ZERO 0x1

int *example(int *a) {
    if (*a < 0)
        return ERROR_NULL;
    if (*a == 0)
        return (void *) ERROR_ZERO;
    return a;
} 
```

定义了一个函数，该函数`example`接受输入参数`a`并将输出作为指向 的指针返回`int`。同时，当错误发生时，该函数滥用强制转换`void*`来将错误代码返回给调用者，就像它返回正确的输出数据一样。这种方法是错误的，因为调用者必须知道**有时会收到有效的输出，但它实际上并不包含所需的输出，而是包含错误代码**。

> 是否还有其他永远不会使用的特殊内存地址...？
> ...它可以有效地用于错误处理

不要对可能返回的地址做任何假设。当您需要将返回码传递给调用者时，您应该以更直接的方式进行。您可以将指向输出数据的指针作为参数并返回标识成功或失败的错误代码：

```
#define SUCCESS     0x0
#define ERROR_NULL  0x1
#define ERROR_ZERO  0x2

int example(int *a, int** out) {
    if (...)
        return ERROR_NULL;
    if (...)
        return ERROR_ZERO;
    *out = a;
    return SUCCESS;
}
...
int* out = NULL;
int retVal = example(..., &out);
if (retVal != SUCCESS)
    ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:12:16.817

实际上 NULL(0) 是一个有效的地址。但这不是您通常可以写入的地址。

从内存中，NULL 可能是一些旧的 VAX 硬件与一些非常旧的 c 编译器不同的值。也许有人可以证实这一点。正如 C 标准定义的那样，它现在总是 0 - 请参阅这个问题[Is NULL always false?](https://stackoverflow.com/questions/459743/is-null-always-false)

通常，从函数返回错误的方式是设置 errno。如果错误代码在特定情况下有意义，您可以背负这一点。但是，如果您需要自己的错误，则可以执行与 errno 方法相同的操作。

就个人而言，我更喜欢不返回 void* 而是让函数采用 void** 并在那里返回结果。然后您可以直接返回错误代码，其中 0 = 成功。

例如

```
int posix_memalign(void **memptr, size_t alignment, size_t size); 
```

注意分配的内存在 mempr 中返回。结果代码由函数调用返回。不像malloc。

```
void *malloc(size_t size) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T10:59:02.663

在 Linux 上，在 64 位和使用 x86_64 架构（来自 Intel 或 AMD）时，仅使用 64 位总地址空间的 48 位（硬件限制 AFAIK）。基本上，**现在**可以使用2 ^(47)到 2 ^(62)之后的任何地址，因为它不会被分配。

 **在某些背景下，Linux 进程的虚拟地址空间由用户空间和内核空间组成。在上述架构中，前 47 位 (128 TB) 用于用户空间。内核空间用于频谱的末端，因此最后 128 TB 位于完整 64 位地址空间的末端。介于两者之间的是*无名之地*。尽管这可能会在未来的任何时候改变，而且这不是便携式的。

但是我可以想到许多其他方法来返回错误而不是您的方法，所以我看不到使用这种*hack*的优势。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-28T15:39:29.557

# TL;博士：

*   **`-1`**如果您只想在 NULL 旁边再添加*一个*错误条件，请使用

*   对于更特殊的情况，只需设置最低有效位，因为来自`malloc()`家庭的返回值或`new`保证与任何基本对齐方式对齐，并且低位始终为零，因此它们可以免费使用（例如在[标记指针](https://en.wikipedia.org/wiki/Tagged_pointer)）

    > 如果分配成功，则返回一个指针，该指针适用于任何具有基本对齐的对象类型。
    > 
    > [https://en.cppreference.com/w/c/memory/malloc](https://en.cppreference.com/w/c/memory/malloc)

    指向比 char 更宽的类型的指针也总是对齐的。如果您指向堆栈上的 char 或 char 数组，则只需根据需要对齐[`alignas`](https://en.cppreference.com/w/cpp/language/alignas)

*   对于更多条件，您可以限制分配地址的范围。这需要特定于平台的代码，并且不会有可移植的解决方案

* * *

正如其他人所说，这在很大程度上取决于。但是，如果您在*具有动态分配的平台上，*那么**`-1`（极有可能）是一个安全值**。

这是因为内存分配器以**BIG BLOCKS**的形式分配内存，而不仅仅是*单个字节*^§。因此，可以返回的最后一个地址是`-block_size`。例如，如果`block_size`是 4，那么最后一个块将跨越地址 { -4, -3, -2, -1 }，*最后一个可能的地址*将是 -4 = 0xFFFF...FFFC。结果，**家庭****永远不会返回-1`malloc()`**

Linux 上的各种系统函数也会**为无效指针返回 -1**而不是 NULL，例如[`mmap()`](http://man7.org/linux/man-pages/man2/mmap.2.html)and [`shmat()`](http://man7.org/linux/man-pages/man2/shmat.2.html)。返回句柄的 Win32 API 也可以为失败情况或格式错误的句柄返回 NULL (0) 或 INVALID_HANDLE_VALUE (-1)。他们必须这样做，因为[有时`NULL`是一个有效的内存地址](https://stackoverflow.com/q/24562691/995714)。事实上，如果您使用的是[哈佛架构](https://en.wikipedia.org/wiki/Harvard_architecture)，那么数据空间中的零位置非常有用。甚至在[冯诺依曼架构](https://en.wikipedia.org/wiki/Von_Neumann_architecture)上，你所说的

> “NULL 只是特殊的内存地址 0x0，它从不用于任何事情，只是表示发生了特殊情况”

仍然是错误的，因为**地址 0 也是有效**的。只是大多数现代操作系统以某种方式映射页面零以使其在用户空间代码取消引用它时陷入困境。然而，该页面可以从内核代码中访问。Linux内核中存在一些与[NULL指针取消引用错误相关的漏洞利用](https://lwn.net/Articles/342330/)

> 事实上，与零页最初的优先使用完全相反，一些现代操作系统，如 FreeBSD、Linux 和 Microsoft Windows，实际上使零页无法访问以捕获对 NULL 指针的使用。这很有用，因为 NULL 指针是用于表示不指向任何内容的引用值的方法
> 
> [https://en.wikipedia.org/wiki/Zero_page](https://en.wikipedia.org/wiki/Zero_page)

在 MSVC 和 GCC 中，指向成员的 NULL 指针也[*表示为 32 位机器上的位模式 0xFFFFFFFF*](https://stackoverflow.com/a/2761414/995714)。并且在 AMD GCN [NULL 指针中也有 -1 的值](https://stackoverflow.com/q/41102947/995714)

* * *

**通过利用指针通常对齐**的事实，您可以更进一步并返回更多错误代码。例如，`malloc`总是[*“对齐适合任何对象类型的内存（实际上，这意味着它对齐到`alignof(max_align_t))`”*](https://en.cppreference.com/w/c/memory/aligned_alloc)

*   [malloc 是如何理解对齐的？](https://stackoverflow.com/q/8752546/995714)
*   [malloc 对内存对齐有哪些保证？](https://stackoverflow.com/q/8575822/995714)

如今，默认对齐方式`malloc`是 8 或 16 字节，具体取决于您使用的是 32 位还是 64 位操作系统，这意味着您将至少有 3 位可用于错误报告或您的任何目的。如果你使用指向比 char 更宽的类型的指针，那么它**总是对齐**的。所以通常没有什么好担心的，除非你想返回一个不是输出的 char 指针`malloc`（在这种情况下你可以很容易地对齐）。只需检查最低有效位以查看它是否是有效指针

```
int* result = func();
if ((uintptr_t)result & 1)
    error_happened(); // now the high bits can be examined to check the error condition 
```

在 16 字节对齐的情况下，有效地址的最后 4 位始终为 0，有效地址的总数仅为位模式总数的 ¹⁄₁₆，这意味着您最多可以返回 ¹⁵⁄₁₆× 2 ^(64 个)错误代码，带有 64 位指针。然后是`aligned_alloc`如果你想要更多的最低有效位。

该技巧已用于在指针本身中存储一些信息。在许多 64 位平台上，您还可以使用高位来存储更多数据。请参阅[在 64 位指针中使用额外的 16 位](https://stackoverflow.com/q/16198700/995714)

* * *

在操作系统的帮助下，您甚至可以通过限制分配指针的范围来达到极端。例如，如果您指定必须在 2-3GB 范围内分配指针，那么任何低于 2GB 和高于 3GB 的地址都可供您使用以指示错误情况。关于如何做到这一点，请参阅：

*   [在 2GB 范围内分配内存](https://stackoverflow.com/q/54729401/995714)
*   [如何保证VirtualAlloc分配的虚拟内存地址在2-4GB之间](https://stackoverflow.com/q/63275557/995714)
*   [分配到低内存地址](https://stackoverflow.com/q/48631207/995714)
*   [如何在地址范围 > 4 GiB 中进行 malloc](https://stackoverflow.com/q/5343722/995714)
*   [自定义堆/内存分配范围](https://stackoverflow.com/q/45475282/995714)

# 也可以看看

*   [((void *) -1) 是有效地址吗？](https://stackoverflow.com/q/13306914/995714)

* * *

^§这很明显，因为需要存储有关分配块的一些信息以进行记账，因此块大小必须比块本身大得多，否则元数据本身将比 RAM 量更大。因此，如果您打电话`malloc(1)`，那么它仍然必须为您保留一个完整的块。**

# android - 将 java 创建的 ImageView 放在另一个 java 创建的 ImageView 旁边

> ID：15236564
> 
> 赞同：0
> 
> 时间：2013-03-06T00:03:19.127
> 
> 标签：android, android-layout

我正在尝试创建一个功能，允许用户点击一个按钮，将他们带到他们的 SD 卡。当用户选择一张图片时，它会通过 按钮返回屏幕并以`ImageView`. 如果用户再次点击该按钮，它会将用户返回到图库。当用户这次选择一张图片时，它应该出现在第一个的右侧`ImageView`。我已经阅读了关于这个主题的几乎所有答案并尝试了一切。不知何故，我似乎尝试了所有“完美”的东西，但它对我不起作用。每次，我放置第一张图片，它出现在左上角，然后我放置第二张，它只出现在第一张的顶部。我究竟做错了什么？请告诉我我很笨，只需要（填空）。这是我的代码：

```
public class PictureSelector extends Activity {

    final int PIC_CODE = 12345;
    int picCounter = 0;
    ImageView[] imgViewArray = new ImageView[10];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_picture_selector);
        Button bGallery = (Button) this.findViewById(R.id.bGallery);
        bGallery.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
                photoPickerIntent.setType("image/*");
                startActivityForResult(photoPickerIntent, PIC_CODE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

        if (requestCode == PIC_CODE) {
            if (resultCode == RESULT_OK) {
                Uri selectedImage = imageReturnedIntent.getData();
                InputStream imageStream = null;
                try {
                    imageStream = getContentResolver().openInputStream(
                            selectedImage);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Bitmap yourSelectedImage = BitmapFactory
                        .decodeStream(imageStream);

                if (picCounter == 0) {
                    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                            100, 100);
                    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_TOP,
                            RelativeLayout.TRUE);
                    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT,
                            RelativeLayout.TRUE);
                    imgViewArray[picCounter] = new ImageView(
                            PictureSelector.this);
                    imgViewArray[picCounter].setImageBitmap(yourSelectedImage);
                    imgViewArray[picCounter].setId(picCounter);
                    this.addContentView(imgViewArray[picCounter], layoutParams);
                    picCounter++;
                } else {
                    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                            100, 100);
                    layoutParams.addRule(RelativeLayout.RIGHT_OF,
                            imgViewArray[picCounter - 1].getId());
                    imgViewArray[picCounter] = new ImageView(
                            PictureSelector.this);
                    imgViewArray[picCounter].setImageBitmap(yourSelectedImage);
                    imgViewArray[picCounter].setId(picCounter);
                    this.addContentView(imgViewArray[picCounter], layoutParams);
                    picCounter++;
                }
            }
        }
    }
} 
```

这是 XML，如果它是相关的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rlGallery"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/bGallery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="50dp"
        android:text="Gallery" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:19:42.807

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html) 在这里你必须阅读不同类型的布局

# iphone - 自定义 UIPickerView 具有不可选择的第一行

> ID：15236566
> 
> 赞同：1
> 
> 时间：2013-03-06T00:03:22.240
> 
> 标签：iphone

我想`UIPickerView`在 iOS 中创建一个自定义，将选择器的元素呈现给用户，但在顶部有一个“空白”选择。如果用户没有选择任何内容，则结果`UIPickerView`为`nil`. 如果用户向下滚动以选择某些内容，那么它只会返回到列表中的正确索引。

的问题`UIPickerView`是当你进入它时，看起来用户至少选择了第一个元素。

我想“强迫”用户选择一些东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:34:32.410

你不能把数据源中的第一项设为@""吗？

# windows-phone-8 - Netframework v4 套接字中的 BeginRead 方法的等价物是什么

> ID：15236567
> 
> 赞同：0
> 
> 时间：2013-03-06T00:03:24.090
> 
> 标签：windows-phone-8

在网络框架 v2 中，套接字使用 Invoke (BeginRead) 方法来调用方法（例如 ReceiveMsg），如下所示：

客户端 = 新的 TcpClient();
client.Connect(SERVERIP, PORTNO);
数据 = 新字节 [client.ReceiveBufferSize];
SendMessage("你好\n");

client.GetStream().BeginRead(data, 0, System.Convert.ToInt32(client.ReceiveBufferSize), ReceiveMsg, null);

1.  这个socket的ReceiveMsg方法会一直处于“自动模式”，这样它就可以等待接收SocketServer广播的消息了吗？

2.  还是使用 System.Threading.Thread.Sleep() 使 ReceiveMsg 方法始终处于活动状态，以便在 SocketServer 广播消息时处于就绪模式以响应？

3.  如何在 Netframework v4 或 4.5 套接字中为此 ReceiveMsg 方法执行此操作，因为不再需要 BeginRead()。

谢谢。

下面是网络框架 v4 中套接字的代码：http: [//msdn.microsoft.com/en-us/library/hh202858](http://msdn.microsoft.com/en-us/library/hh202858(v=vs.92).aspx) (v=vs.92).aspx（适用于 WP mango/ Wp8）

客户端.连接（）；Client.Send(); Client.Receive();

```
公共字符串接收（）
        {

            //-- 接收来自服务器的回复

           string response = "接收操作超时";

            // 我们通过已建立的套接字连接接收
            如果（_socket！= null）
            {
                // 创建 SocketAsyncEventArgs 上下文对象
                SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
                socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;

                // 设置缓冲区以接收数据
                socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);

                // Completed 事件的内联事件处理程序。
                // 注意：这个偶数处理程序是内联实现的，以便使这个方法自包含。
                socketEventArg.Completed += new EventHandler(delegate(object s, SocketAsyncEventArgs e)
                {
                    如果（e.SocketError == SocketError.Success）
                    {
                        // 从缓冲区中取出数据

                        response = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
                        response = response.Trim('\0');
                    }
                    别的
                    {
                        响应 = e.SocketError.ToString();
                    }

                    _clientDone.Set();
                });

                // 将事件的状态设置为无信号，导致线程阻塞
                _clientDone.Reset();

                // 通过套接字发出异步接收请求
                _socket.ReceiveAsync(socketEventArg);

                // 最多阻塞 UI 线程 TIMEOUT_MILLISECONDS 秒。
                // 如果在这段时间内没有响应，则继续
                _clientDone.WaitOne(TIMEOUT_MILLISECONDS);
            }
            别的
            {
                response = "套接字未初始化";
            }

            返回响应；
        }

```

# python - 如何在python中使用正则表达式搜索所有大小写组合

> ID：15236568
> 
> 赞同：0
> 
> 时间：2013-03-06T00:03:25.967
> 
> 标签：python, regex

在 python 中，如何创建一个匹配单词的所有大写组合的正则表达式，而无需事先格式化数据。例如，假设我想匹配文件中与单词名称匹配的行，但是它是大写的。也就是说，名称可能如下所示

```
Name
nAMe
NAme 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:07:13.930

[`re.IGNORECASE`](http://docs.python.org/2/library/re.html#re.IGNORECASE)确保在调用匹配、查找或搜索时传递该选项。

对于您的示例，它将类似于：

```
import re
re.search('name', 'Name', re.IGNORECASE)
re.search('name', 'nAMe', re.IGNORECASE)
re.search('name', 'NAme', re.IGNORECASE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:09:36.820

python re 模块有一个标志`re.IGNORECASE`，它应该是你要找的。

> re.IGNORECASE
> 
> 执行不区分大小写的匹配；像 [AZ] 这样的表达式也将匹配小写字母。这不受当前语言环境的影响。

[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T23:32:45.717

如果你不打算使用`re.compile`with `re.IGNORECASE`，你可以这样做：

```
string_of_pattern = r'(?i)name' # i means ignore case 
```

当我们必须传递一个字符串时，这很有用。文档在这里：

(?iLmsux)

（来自集合'i'、'L'、'm'、's'、'u'、'x'的一个或多个字母。）组匹配空字符串；这些字母设置了相应的标志：re.I（忽略大小写）、re.L（取决于语言环境）、re.M（多行）、re.S（点匹配所有）、re.U（取决于 Unicode）和re.X（详细），用于整个正则表达式。（标志在模块内容中描述。）如果您希望将标志作为正则表达式的一部分包含在内，而不是将标志参数传递给 re.compile() 函数，这很有用。

请注意， (?x) 标志会更改表达式的解析方式。它应该首先在表达式字符串中使用，或者在一个或多个空白字符之后使用。如果标志前有非空白字符，则结果未定义。

# amazon-web-services - AWS Flow Framework 的开源等效项

> ID：15236575
> 
> 赞同：7
> 
> 时间：2013-03-06T00:04:10.120
> 
> 标签：amazon-web-services, workflow, amazon-swf

那里有许多工作流系统，但我想知道哪个开源工作流管理系统最接近 AWS Flow Framework（内置类似 Amazon SWF 的功能）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T02:09:28.377

[AWS Flow Framework 本身在Apache 2.0 许可](https://github.com/aws/aws-sdk-java/blob/master/LICENSE.txt)下是开源的。其源代码可在 github 上获得：[https](https://github.com/aws/aws-swf-flow-library) ://github.com/aws/aws-swf-flow-library 。

**更新：** 2017 年，Uber 发布了[Cadence](https://github.com/uber/cadence)，它是 SWF 服务和相关客户端库的开源版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:30:35.447

Amazon SWF 与其他现有工作流系统完全不同：

*   它并没有尝试实现 BPMN（我们可以说它比大多数工作流系统级别更低）
*   它专注于将任务分配给异构系统（因此您可以在任何平台上以任何语言运行活动。）

除了官方的 Java Flow Framework，我只知道：

*   [Gordon (Ruby)](http://www.slideshare.net/jweiss/amazon-swf-and-gordon)，但我不确定它是否开源
*   [aws-swf-toolkit (Javascript/Node.js)](https://github.com/neyric/aws-swf-toolkit) (免责声明：我是这个的作者)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T16:30:21.957

（无耻的帖子？）我开始编写自己的库（SimpleWorkflowFramework.NET）以在 C# 中使用，它可以在[https://github.com/sdebnath/SimpleWorkflowFramework.NET](https://github.com/sdebnath/SimpleWorkflowFramework.NET)获得。如果有人感兴趣，它肯定可以提供一些帮助。

# macos - 在不同的 Mac 上使用 SSH 密钥

> ID：15236579
> 
> 赞同：2
> 
> 时间：2013-03-06T00:04:51.017
> 
> 标签：macos, git, ssh, ssh-keys

我在 MacBook Air 上设置了 GIT 和我的存储库。我正在尝试在我的 iMac 上克隆存储库。我的理解是我需要将我的密钥从 MBA 上的 /.ssh 文件夹复制到同一文件夹 iMac。

但是，当我尝试在 iMac 上克隆存储库时，出现以下错误：

```
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我已经做了一些研究并证实了......

*   我有最新版本的 GIT，并且我的 user.name 和 user.email 变量配置正确。（[新 Mac - github 的新 SSH 密钥？](https://stackoverflow.com/questions/8029182/new-mac-new-ssh-keys-for-github)）

*   .gitconfig 文件和父文件夹的所有权和权限是 r/w 并归我的用户所有。（[使用我的 GitHub 帐户设置 Tower 时遇到问题 - 错误：无法锁定配置文件](https://stackoverflow.com/questions/10340581/trouble-setting-up-tower-with-my-github-account-error-could-not-lock-config-f)）

*   我的 $HOME 环境变量指向我的用户工作目录。（[使用我的 GitHub 帐户错误设置 git 时遇到问题：无法锁定配置文件](https://stackoverflow.com/questions/14959972/trouble-setting-up-git-with-my-github-account-error-could-not-lock-config-file)）

在这一点上，我完全没有想法，真的可以使用一些建议。

建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:08:34.503

不敢相信我在发布完这篇文章后立即找到了解决方案，但是对于那些将密钥复制到新机器的人来说，你必须让 SSH 知道密钥在那里。有关详细信息，请参阅此答案：

[https://stackoverflow.com/a/12100237/337824](https://stackoverflow.com/a/12100237/337824)

# symfony - symfony 2.1 应用程序无法在免费的 openshift 上运行

> ID：15236581
> 
> 赞同：1
> 
> 时间：2013-03-06T00:05:05.857
> 
> 标签：symfony, symfony-2.1, openshift

我已经在 openshift 上部署了我的 Symfony 2.1 应用程序，但它不起作用。

调用`app.php`服务器返回`200 OK`和一个白页（在我的本地服务器中运行良好）。

日志：

> => php-5.3/logs/error_log-20130306-000000-EST <== [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP 3.require_once() /var/lib/openshift /5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/bootstrap.php.cache:4 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP 4.require() /var /lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/autoload.php:5 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdda::::babbdd getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:7 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP致命错误：require（）：打开失败需要'/var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/kriswallsmith/assetic/src/functions.php' (include_path='.:/var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/ runtime/repo//libs/:/var/lib/openshift/5e487f6c4a484700999d9213755b64eb/php-5.3/phplib/pear/pear/php/:/usr/share/pear/') 在 /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app -root/runtime/repo/php/vendor/composer/autoload_real.php 在第 42 行 [Tue Mar 05 19:16:00 2013] [error] [client 127.5.146.1] PHP Stack trace: [Tue Mar 05 19:16 ：00 2013] [错误] [客户端 127.5.146.1] PHP 1\. {main}() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/web/app.php:0 [周二三月2013 年 5 月 19:16:00] [错误] [客户端 127.5.146.1] PHP 2。require_once() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/web/app.php:7 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP 3\. require_once() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/bootstrap.php.cache:4 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5 .146.1] PHP 4.require() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/autoload.php:5 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdd1b1ec7a::getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:7require_once() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/bootstrap.php.cache:4 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1 ] PHP 4.require() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/autoload.php:5 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5 .146.1] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdd1b1ec7a::getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:7require_once() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/bootstrap.php.cache:4 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5.146.1 ] PHP 4.require() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/app/autoload.php:5 [2013 年 3 月 5 日星期二 19:16:00] [错误] [客户端 127.5 .146.1] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdd1b1ec7a::getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:71] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdd1b1ec7a::getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:71] PHP 5\. ComposerAutoloaderInit12cecca862685bdd480babbdd1b1ec7a::getLoader() /var/lib/openshift/5e487f6c4a484700999d9213755b64eb/app-root/runtime/repo/php/vendor/autoload.php:7

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T01:59:54.793

由于文件不存在，您还没有“预热”您的缓存`bootstrap.php.cache`，看起来您只是推送您的存储库并且在 openshift 端什么都不做。

您需要首先配置您的 symphony 应用程序，即下载所有依赖项，填写所有数据库设置、邮件设置和所有其他内容。

使用这个命令 ssh 进入你的设备`rhc ssh -a <yourappname>`，cd 进入你的 symfony 根目录，然后运行`php composer.phar install`这将启动完全部署你的应用程序所需的一切

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:27:24.343

Seems like you're missing some of the files in your gear repository. Did you add-commit-push all of your files?

You can get list of the deployed *.php files by running:

```
ssh <INTO-YOUR-GEAR> 'cd ~/app-root/runtime/repo/php && find ./ -name \*.php' 
```

(obviously you need to substitute `<INTO-YOUR-GEAR>` with your SSH string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-08T10:20:45.707

将 Symfony 应用程序部署到 Openshift 的最佳方式是：

1.  确保您有一个 Symfony2 应用程序在 localhost（开发和产品）中运行良好
2.  您的项目必须使用 git。
3.  您的 .gitignore 文件忽略了供应商、缓存、引导程序、日志、作曲家等。
4.  您已提交所有待处理的更改。
5.  您需要一个使用 PHP 5.4 的 openshift 齿轮和一个 MySql 5.5 墨盒
6.  您需要安装和配置 rhc
7.  将您的装备配置为公开一个名为`release`：`rhc app-configure --deployment-branch release -a <app-name>`
8.  创建一个新的 php 文件，让 MySQL 访问您的应用程序：

* * *

```
<?php
# app/config/params.php
if (getEnv("OPENSHIFT_APP_NAME")!='') {
    $container->setParameter('database_host', getEnv("OPENSHIFT_MYSQL_DB_HOST"));
    $container->setParameter('database_port', getEnv("OPENSHIFT_MYSQL_DB_PORT"));
    $container->setParameter('database_name', getEnv("OPENSHIFT_APP_NAME"));
    $container->setParameter('database_user', getEnv("OPENSHIFT_MYSQL_DB_USERNAME"));
    $container->setParameter('database_password', getEnv("OPENSHIFT_MYSQL_DB_PASSWORD"));
}?> 
```

*这将告诉应用程序，如果是 openshift 环境，它需要加载不同的用户数据库*

9.  将此文件 (params.php) 导入您的 app/config/config.yml 文件：

* * *

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    - { resource: params.php }
... 
```

10.  提交您的更改。
11.  创建一个新分支，将您的更改推送到 Openshift：`git checkout -b release`
12.  从 openshift 添加您的远程存储库：`git remote add openshift -f <youropenshiftrepository.git>`
13.  合并两个存储库之间的差异`git merge openshift/master -s recursive -X ours`
14.  在新文件夹“/.openshift/action-hooks”（添加 openshift 存储库时创建）中创建一个“部署”文件（推送应用程序后在 openshift 中执行的文件）：

* * *

```
#!/bin/bash

# Symfony deploy
export COMPOSER_HOME="$OPENSHIFT_DATA_DIR/.composer"

if [ ! -f "$OPENSHIFT_DATA_DIR/composer.phar" ]; then
    curl -s https://getcomposer.org/installer | php -- --install-dir=$OPENSHIFT_DATA_DIR
else
    php $OPENSHIFT_DATA_DIR/composer.phar self-update
fi

unset GIT_DIR 
cd $OPENSHIFT_REPO_DIR/
php $OPENSHIFT_DATA_DIR/composer.phar install

php $OPENSHIFT_REPO_DIR/app/console cache:clear --env=dev

chmod -R 0777 $OPENSHIFT_REPO_DIR/app/cache
chmod -R 0777 $OPENSHIFT_REPO_DIR/app/logs

rm -r $OPENSHIFT_REPO_DIR/php
ln -s $OPENSHIFT_REPO_DIR/web $OPENSHIFT_REPO_DIR/php

rm -r $OPENSHIFT_REPO_DIR/php
ln -s $OPENSHIFT_REPO_DIR/web $OPENSHIFT_REPO_DIR/php

php $OPENSHIFT_REPO_DIR/app/console doctrine:schema:update --force 
```

15.  授予此文件执行权限。在 Windows 中：`git update-index --chmod=+x .openshift/action_hooks/deploy`在 Linux 和 Mac 中：`chmod +x .openshift/action_hooks/deploy`
16.  将新文件添加到 git 项目并提交。
17.  推送到 openshift：`git push openshift HEAD`
18.  您的控制台将向您展示它正在执行的每一步。
19.  回到你的主分支。`git checkout master`
20.  然后，您可以继续在您的项目上正常工作，提交您的更改并移动到`release`分支以部署您的新更改：`git checkout release` `git merge master` `git push openshift HEAD` `git checkout master`

这就是我使用 Symfony 和 Openshift 的方式。（这些说明是我阅读的多种方式的混合体，我通过一些更改进行了改进。它适用于我制作的每个应用程序。

# ruby-on-rails - EdgeNgram 与轮胎和 ElasticSearch

> ID：15236584
> 
> 赞同：0
> 
> 时间：2013-03-06T00:05:20.873
> 
> 标签：ruby-on-rails, elasticsearch, tire

如果我有两个字符串：

*   能源部，乔
*   能源部，乔纳森

我想实现这样的搜索：

*   “Doe”>“Doe，乔”，“Doe，乔纳森”
*   “Doe J”>“Doe，乔”，“Doe，乔纳森”
*   “Jon Doe”>“Doe，乔纳森”
*   “乔纳多”>“多伊，乔纳森”

这是我的代码：

```
settings analysis: {
    filter: {
      nameNGram: {
        type: "edgeNGram",
        min_gram: 1,
        max_gram: 20,
      }
    },
    tokenizer: {
      non_word: {
        type: "pattern",
        pattern: "[^\\w]+"
      }
    },
    analyzer: {
      name_analyzer: {
        type: "custom",
        tokenizer: "non_word",
        filter: ["lowercase", "nameNGram"]
      },
    }
  } do
  mapping do
    indexes :name, type: "multi_field", fields: {
      analyzed:   { type: "string", index: :analyzed, index_analyzer: "name_analyzer" }, # for indexing
      unanalyzed: { type: "string", index: :not_analyzed, :include_in_all => false } # for sorting
    }
  end
end

def self.search(params)
  tire.search(:page => params[:page], :per_page => 20) do
    query do
      string "name.analyzed:" + params[:query], default_operator: "AND"
    end
    sort do
      by "name.unanalyzed", "asc"
    end
  end
end 
```

不幸的是，这似乎不起作用......标记化看起来很棒，对于“Doe，Jonathan”，我得到类似“d”，“do”，“doe”，“j”，“jo”，“jon”的东西”、“jona”等，但如果我搜索“do AND jo”，我什么也得不到。但是，如果我搜索“jona”，我会返回“Doe, Jonathan”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:59:35.640

如果您想创建自动完成功能，您应该只使用 EdgeNgram。我怀疑您想使用模式过滤器来分隔单词我的逗号。

像这样的东西：

```
"tokenizer": {
    "comma_pattern_token": {
         "type": "pattern",
         "pattern": ",",
         "group": -1
     }
 } 
```

如果我弄错了并且您出于其他原因需要 edgeNGrams，那么您的问题是您的索引分析器忽略了停用词（例如单词 AND）而您的搜索分析器没有。您需要为您的 search_analyzer 创建一个不包含停用词过滤器的自定义分析器。

# php - 开发服务器和生产服务器之间的 Ajax 结果不同

> ID：15236592
> 
> 赞同：0
> 
> 时间：2013-03-06T00:06:34.593
> 
> 标签：php, ajax

我有一个小的 ajax 脚本，它获取一些 json 数据并在用户进行选择时填充一些表单字段。

今天早上我注意到，当我在开发服务器上运行 ajax 时出现错误，但在运行生产端时它可以工作。我假设这是由于服务器之间的错误报告存在一些差异，但我不知道为什么。

开发 PHP 版本：5.3.13 产品 PHP 版本：5.3.16

我已经跟踪了一些变量的错误，这些变量只有在额外的行从数据库中出来时才设置。我正在检索 1 到 3 行。

第一行分配给 $array1，其他行作为 $sec_row[0] 和 $sec_row[1] 进入它们自己的数组。

```
$array1 = ('Name'=>'George','Address'=>'52 Smith St',....etc);
$sec_row[0] = ('Alias1'=>'Jorge','Location'=>'SimCity',....etc);

echo json_encode(array('result1'=>$array1,'result2'=>$sec_row[0],'result3'=>$sec_row[1]); 
```

注意 $sec_row 仅在找到其他结果时设置。

在未定义 $sec_row 的实时站点上，ajax 将 result2 和 result3 返回为 NULL。但是在我的本地主机上的开发服务器上，它给了我一个“未定义的索引”（如果只设置了 $sec_row[0]）或“未定义的变量”（如果没有设置 $sec_row）错误。

我已经通过在编码 json 之前手动设置 $sec_row 在本地修复了错误，但我不明白为什么我需要在本地而不是在生产服务器上执行此操作。

关于什么设置可能导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:14:47.440

因为您可能已经`display_errors`打开，所以它会在 JSON 中间生成未定义的索引错误，使其无效 JSON 无法在 JS 端解析。

除了修复错误之外，最简单的方法是关闭 error_reporting。但是您应该通过检查是否设置了索引然后输出值来修复错误，或者`null`.

```
json_encode(array(
  'result1'=>$array1,
  'result2'=>isset($sec_row[0]) ? $sec_row[0] : null,
  'result3'=> isset($sec_row[1]) ? $sec_row[1] : null
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:16:59.813

实际上，我会尝试纠正错误而不是简单地忽略它......尝试做这样的事情：

```
$result = array('result1' => $array1);
if (isset($sec_row[0]))
    $result['result2'] = $sec_row[0];
if (isset($sec_row[1]))
    $result['result3'] = $sec_row[1];
echo json_encode($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:18:26.923

它与服务器上的 error_reporting 级别有关，因此要么关闭它们 - 将以下内容添加到脚本顶部，或者直接在 php.ini 中（如果您可以访问它） - 查找 display_errors，设置为 0

```
error_reporting(0);
@ini_set('display_errors', 0); 
```

或者为什么不预先构建你的 json_encode 即假设你总是只有 1 $result1

```
for($x = 0; $x <= count($sec_row); $x++) {
    $more_json .= "'result'".$x+2 ."=> ".$sec_row[$x]."," 
}
# strip the last comma off
$more_json = rtrim($more_json ,',');
echo json_encode(array('result1'=>$array1, $more_json); 
```

我没有测试过这个，所以语法可能不是 100%，但你明白了

# c# - 尝试过滤 GridView 时出现问题

> ID：15236601
> 
> 赞同：0
> 
> 时间：2013-03-06T00:07:49.007
> 
> 标签：c#, asp.net, gridview

我试图根据 Dropbox 列表和搜索词过滤我的 GridView 数据。

我的 GridView 目前是通过 ASP 服务器端使用 SQLdatasource 绑定的。

我正在尝试通过 C# 从 onclick_button 事件中过滤 GridView。

这是我的过滤代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

namespace ViewCDs
{
public partial class _Default : System.Web.UI.Page
{

    protected void btnSearch_Click(object sender, EventArgs e)
    {

        string connstring = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Dave\Documents\cdsCollections.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection sqlcon = new SqlConnection(connstring);
        string str = TextBox1.Text;
        string str2 = DropDownList1.Text;
        string set = "";

        if (str2 == "Artist")
        {
            set = "artist";
        }

        if (str2 == "CD Title")
        {
            set = "cdTitle";
        }

        if (str2 == "Music Genre")
        {
            set = "genre";
        }

        SqlCommand sqlcmd = new SqlCommand("select * from cds where " + set + " like '%" + str + "%'", sqlcon);
        SqlDataAdapter adp = new SqlDataAdapter(sqlcmd);
        DataSet ds = new DataSet();
        adp.Fill(ds);
        if (ds.Tables[0].Rows.Count > 0)
        {

            GridView1.DataSource = ds.Tables[0];
            GridView1.DataBind();
        }

    }

} 
```

}

以及事件是如何在 ASP 端触发的：

```
 <asp:Button ID="Button1" runat="server" Text="Search" onclick="btnSearch_Click" /> 
```

这是一个非常标准的布局，通配符查询的结果存储在数据集对象中，如果数据集的计数高于 0，那么它应该绑定到我的 GridView。但是这个绑定没有发生，我收到了这个错误：

```
Both DataSource and DataSourceID are defined on 'GridView1'.  Remove one definition.

Description: An unhandled exception occurred during the execution of the current web    request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Both DataSource and DataSourceID are defined on 'GridView1'.  Remove one definition. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:19:52.440

在没有看到您的 aspx 代码的情况下，您可能像这样定义了 GridView1：

```
<asp:GridView runat="server" ID="GridView1" DataSourceID="SOME_DATA_SOURCE" > 
```

注意`DataSourceID`. 如错误所述，您不能同时使用`DataSourceID`和`DataSource`。解决方案是仅使用`DataSource`将其设置为您的 DataSourceID 的*Select Query*是什么 - 在`Page_Load`事件中。

换句话说，定义没有 DataSourceId 的 GridView：

```
 <asp:GridView runat="server" ID="GridView1" ... > 
```

然后在后面的代码中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataSet ds =  // Get Data from DB
            GridView1.DataSource = ds.Tables[0];
            GridView1.DataBind();
        }

    } 
```

* * *

您遇到的另一个问题是***安全问题***- 您的代码容易发生**[Sql Injections](http://en.wikipedia.org/wiki/SQL_injection)** - 确保***参数化***查询

# java - 合并排序具有可变字数的多个文件

> ID：15236604
> 
> 赞同：0
> 
> 时间：2013-03-06T00:08:10.677
> 
> 标签：java, file, sorting, merge

我将一个 10 GB 的文件拆分为 100000 + 几百个单词的多个文件（因为当我遇到 100000 个单词时我读到了一行）。

```
private void splitInputFile(String path) {
    try{
        File file=new File(path);
        FileReader fr = new FileReader(file);
        BufferedReader br = new BufferedReader(fr);
        String temp;
        temp = br.readLine();
        String fileName="fileName";
        int fileCount = 1;
        while(temp!=null){
                //TODO Read 100000 words, sort and write to a file. Repeat for the entire file
            if(wordsToBeSorted.size()<=100000){
                startCounting(temp);
                temp=br.readLine();
            }//end of if ->  place 100000+ words inside the list
            else{
                Collections.sort(wordsToBeSorted);
                fileName = "fileName"+fileCount;
                fileCount++;
                File splitFile = new File(fileName);
                PrintWriter pr = new PrintWriter(splitFile);
                for(String word:wordsToBeSorted){   
                    pr.write(word);
                    pr.write("\n");//check if this works -> 1 word per line
                }//end of for
            }//end of else              
        }//end of while
        mergeSort(fileCount);
    }//end of try
    catch(Exception e){
        e.printStackTrace();
    }
}

private void startCounting(String sb) {
    StringTokenizer tokenizer = new StringTokenizer(sb);// Split by space
    while (tokenizer.hasMoreTokens()) {
        String text = tokenizer.nextToken();
        text = text.replaceAll("\\W", "");// Remove all symbols
        if("".equals(text.trim()))
            continue;
        wordsToBeSorted.add(text);
    }

} 
```

现在我想知道如何对这些文件进行排序。我发现我应该做一个合并排序。考虑到每个 splitFile 的字数可变（100000 + 几个额外的字）的事实，是否可以进行涉及可变字数文件的合并排序？还是我应该遵循其他方法来拆分文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:21:11.417

> 是否可以进行涉及可变字数文件的合并排序？

当然。我假设这里的目标是[外部排序](https://en.wikipedia.org/wiki/External_sorting)。只需打开所有输入文件（除非*真的有很多*，在这种情况下您可能需要多次运行），从每个文件中读取第一个单词。然后用最小的单词识别输入，将其放入输出并从该输入中读取下一个单词。关闭并删除任何变为空的输入，除非您没有更多输入。

如果你有很多输入，你可以使用[堆](https://en.wikipedia.org/wiki/Heap_%28data_structure%29)来组织你的输入，下一个单词作为键。您将删除最小对象，然后在继续下一个单词后重新插入它。

# linux - 在 Linux 中设置目录

> ID：15236613
> 
> 赞同：-3
> 
> 时间：2013-03-06T00:08:56.017
> 
> 标签：linux

有人请建议如何将目录设置为 chown root:root 和 chmod 0600，以便创建其中的所有内容或复制与配置目录相同的设置？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:13:49.657

你的问题不是很清楚......但我认为你正在寻找的可能是*递归*应用程序来应用`chown`和`chmod`设置到目录中的所有文件。这可以使用`-R`标志来完成（在这两种情况下），例如：

```
chown -R root:root mydir/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:13:59.807

我认为您正在寻找`chmod -R 0600 *`and `chown -R root:root *`，但您的问题并不完全清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:14:16.847

我认为您正在寻找 -R （递归）标志 - 您可以使用 `chown -R root:root /your/directory/full/path` 和 `chmod -R 0600 /your/directory/full/path`

相反，如果您正在复制现有目录并希望保留您可以使用 `cp -a /current/path /new/path` 的权限，并且 -a 标志将保持所有权和权限相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:46:21.537

我想我现在理解您的问题：您正在尝试为目录中的新文件设置*默认*权限和所有权。

对于**所有权**，如果您将自己添加到拥有该目录的组（`root`在这种情况下），那么您创建的新文件将归该组所有。

对于**权限，您可以使用**[umask](http://linuxzoo.net/page/sec_umask.html)为新文件设置默认权限：

```
umask 077  # grant only user r/w permissions 
```

或使用`setfacl`：有关更多信息，请参阅[此答案](https://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in-a-directory)。

# linux - 当 shell=True 时检测 Popen() 错误

> ID：15236621
> 
> 赞同：2
> 
> 时间：2013-03-06T00:09:23.560
> 
> 标签：linux, python-2.7, subprocess

我想在该用户的`$SHELL`. 该命令可能是短期的（如`ls`）或长期的（如`firefox`），它可能是单个命令、管道或任何其他 shell 支持的构造。

执行方法必须代表 shell 指示成功或失败，并且无论命令何时终止或是否终止，都*不得阻塞。*在执行方法返回并且我的程序继续之前，该命令可能*永远不会终止。*

`Popen()`with`shell=True`不会阻塞，但也不表示失败。辅助函数确实阻塞并且在`subprocess`这里没有用。`Popen.poll()`（在[这个问题](https://stackoverflow.com/questions/2861548)中建议）返回`None`直到命令终止并且不会立即返回非`None`失败（必须重复调用它直到 shell 终止）。

作为所需行为的示例

```
prog1 = shell_run('blocking_prog', stdin=PIPE, stdout=PIPE)
prog2 = shell_run('nonsense_prog', stdin=PIPE, stdout=PIPE) 
```

第一行应该将一个`Popen`对象分配给`prog1`，第二行应该提出一个`OSError`或类似的。

我认为在这些条件下不可能*可靠地*检测到错误是正确的吗？`Popen()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:23:04.183

我不会直接回答你的问题，但使用`plumbum`这些任务可以让你的生活变得更轻松。[http://plumbum.readthedocs.org/en/latest/](http://plumbum.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T07:06:43.140

如果您必须知道它是否失败才能知道是否输入数据，您可以这样做

```
prog2 = shell_run('nonsenseprog', stdin=PIPE, stdout=PIPE,
               shell=True, executable=os.getenv('SHELL'))
# If the program does not exist, it should fail immediately and .poll() knows about that.
# If it exists and runs, `.poll()` returns None.
if prog2.poll() is not None:
    raise Whatever # it failed 
```

或者，您可以检查您是否真的需要`shell=True`.

# couchdb - 如何在 couchdb 中指定单个数据库位置？

> ID：15236632
> 
> 赞同：1
> 
> 时间：2013-03-06T00:10:10.190
> 
> 标签：couchdb

我知道该`database_dir`选项控制默认情况下数据库的位置。但是是否有可能在不同的文件夹中（甚至在不同的磁盘上）有许多数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:40:23.173

您可以在数据库名称中使用斜杠`/`符号，CouchDB 将为此类数据库创建子目录。例如，具有名称的数据库`foo/bar/baz`将在文件系统上具有下一个结构：

```
/var/lib/couchdb/
+ -- foo/
     + -- bar/
          + baz.couch 
```

您可以在 CouchDB 使用它之前预先分配此类结构并设置符号链接 - CouchDB 可以轻松处理这种情况。唯一的要求是目标位置对于 CouchDB 应该是可读写的。

# ruby-on-rails-3 - 将 FactoryGirl 特征应用于 Mongoid 嵌入对象

> ID：15236638
> 
> 赞同：0
> 
> 时间：2013-03-06T00:10:51.720
> 
> 标签：ruby-on-rails-3, mongoid, factory-bot

我正在使用 Mongoid 构建 Rails 3.2.11 应用程序。我用 Cucumber 测试并用 FactoryGirl 创建测试对象。我有嵌入的对象。我希望能够将 FactoryGirl 特征与我的父对象和嵌入对象一起使用，以进行大量排列并保持事物干燥。

**问题：**我似乎无法将特征应用于嵌入对象。

**model.rb**（实际上是单独的模型文件）

```
class User    
   include Mongoid::Document

   #Fields and stuff
   embeds_one :car
end

class Car    
   include Mongoid::Document

   #Fields and stuff
   embedded_in :user 
end 
```

**规格/工厂.rb**

```
FactoryGirl.define do
  factory :user do

    status 'active'     # shared attribute  

    trait :bob do
     name 'Bob'
     email 'bob@bob.com'
    end

    trait :carol do
     name 'Carol'
     email 'carol@carol.com'
    end

    car  { [FactoryGirl.build(:car)] }

  end

  factory :car do

    number_of_tires 4   # shared attribute

    trait :red_ford do
     make 'Ford'
     color 'Red'
    end

    trait :blue_chevy do
     make 'Chevy'
     color 'Blue'
    end

  end
end 
```

**features/step_definitions/user_steps.rb**（不能正常工作）

```
Given /^There is a user Bob with a Blue Chevy$/ do
  FactoryGirl.create(:user, :bob, :car => [:car => :blue_chevy])
end 
```

如果我不使用嵌入式对象特征，我可以工厂创建用户对象。有什么方法可以使用所需的特征来构建嵌入式对象？谢谢！

**修复**

Thoughtbot [http://joshuaclayton.me](http://joshuaclayton.me)的 Joshua Clayton说：

> 将特征应用于关联没有简写语法；基本上，你必须做这样的事情：

```
cars = [FactoryGirl.build(:car, :blue_chevy)]
FactoryGirl.create(:user, :bob, cars: cars) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:28:49.377

因为是1对1的关系，所以在spec/factories.rb中构建汽车对象时不需要数组

`car { FactoryGirl.build(:car) }`

这也适用于黄瓜步骤。另外，据我了解，特征用作属性，因此您的步骤代码应如下所示

`FactoryGirl.create(:user, :bob, :car, :blue_chevy)`

# ruby-on-rails - Rails 邮件程序测试不解释 URL 帮助程序

> ID：15236641
> 
> 赞同：1
> 
> 时间：2013-03-06T00:10:57.837
> 
> 标签：ruby-on-rails

我有一个密码重置邮件，我希望能够在我的测试中执行以下操作：

```
assert_match edit_password_reset_path(user.password_reset_token), mail.body.encoded
# undefined method `edit_password_reset_path' for #<UserMailerTest:0xb6c2ea0> 
```

但它因为 URL 帮助程序而崩溃，所以我必须这样做才能让我的测试运行：

```
assert_match "\/password_resets\/#{user.password_reset_token}\/edit", mail.body.encoded 
```

效果很好，但看起来或感觉不太好。

似乎 ActionMailer::TestCase 不知道路径，因为以下失败：

```
assert_match "#{edit_password_reset_path(user.password_reset_token)}", mail.body.encoded
# undefined method `edit_password_reset_path' for #<UserMailerTest:0xb6c2ec8> 
```

你如何像`edit_password_reset_path(user.password_reset_token)`在测试单元中那样访问 URL 助手？

我从 RSpec 切换过来，这从来都不是问题，助手刚刚工作，我会这样做：

```
it "sends the user a password reset url" do
  mail.body.encoded.should match(edit_password_reset_url(user.password_reset_token))
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T00:26:09.397

对于将来有兴趣解决此问题的任何人，您可以将其粘贴到您的测试文件中：

```
include Rails.application.routes.url_helpers 
```

我不知道这是否是*你*这样做的方法，我不确定它会给你的测试增加多少开销，但它工作正常。

# javascript - 为窗口滚动的每 n 个像素做一些事情

> ID：15236645
> 
> 赞同：1
> 
> 时间：2013-03-06T00:11:29.580
> 
> 标签：javascript, jquery, scroll

我想为窗口每滚动 27px 做一些事情。我编写了以下代码，放置在`scroll`事件处理程序中：

```
scrollSpy++
if (scrollSpy > 27) {
    scrollSpy = 0;
    console.log("27px scrolled");
} 
```

但不知何故，它不起作用。
当我滚动非常慢时，事件会定期触发（尽管我无法判断它是否真的在 27px 之后），但是当我快速滚动时，事件似乎是随机触发的/根本不是触发的。

我猜错误在于假设`scroll`每个滚动像素都会触发事件，因为这是该`scrollSpy++`方法工作的要求。

但是，当然，我不确定这是否真的是错误。我该如何正确地做到这一点？

[注意：这个问题与这个问题](https://stackoverflow.com/questions/10428690/jquery-window-scroll-event-for-every-xx-pixels-scrolled)没有重复，因为接受的答案是针对卷轴的。

* * *

编辑：
所以根据答案，我写了这个 if 语句：

```
if (window.pageYOffset % 27 === 0) {
    // do something
} 
```

但它仍然无法正常工作。当我快速滚动时，功能失败。所以它与`scroll`事件的触发方式有关。你知道有什么解决办法吗？`setTimeout`或者`setInterval`也许？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:14:20.190

你的假设是正确的。你应该检查多少

```
document.documentElement.scrollTop + document.body.scrollTop 
```

函数调用之间的变化。如果它增加，则用户正在向下滚动，反之亦然。

使用这些知识来确定什么时候做你正在做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:13:26.320

不，`scroll`不会为滚动的每个像素触发事件。无论如何，您可以改用[MDN 文档中](https://developer.mozilla.org/en-US/docs/DOM/window.scrollY)`window.pageYOffset`描述的必要的后备，并检查每个事件的值在哪个方向和多少变化。[`pageYOffset`](https://developer.mozilla.org/en-US/docs/DOM/window.scrollY)`scroll`

# sql - SQL 效率也许我应该使用 Exist？

> ID：15236648
> 
> 赞同：1
> 
> 时间：2013-03-06T00:11:56.217
> 
> 标签：sql, postgresql

使用以下架构：

```
create table awards(
aid int primary key
, name varchar(100) not null );

create table institutions(
iid int primary key
, name varchar(100) not null );

create table winners(
aid int
, iid int
, year int
, filmname varchar(100)
, personname varchar(100)
, primary key (aid, iid, year)
, foreign key tid references awards(aid)
, foreign key cid references institutions(iid) ); 
```

我创建了以下查询：

```
SELECT nominees.personname as personname, awards.name as award, nominees.year as year 

FROM nominees, institutions, awards WHERE institutions.iid = nominees.iid and 
awards.aid = nominees.aid and personname is not null 

GROUP BY nominees.personname, awards.name, nominees.year 

HAVING ((awards.name, count(DISTINCT institutions.name)) in 
(SELECT awards.name as 
awards, count(DISTINCT institutions.name) 
FROM nominees, awards, institutions 
WHERE nominees.aid = awards.aid and nominees.iid = institutions.iid 
GROUP BY awards.name)) 

ORDER BY nominees.personname, awards.name; 
```

此查询旨在查找在特定年份授予该奖项的每个机构都提名了一个人的所有奖项。它本质上需要一个人并计算授予他们单个奖项的机构数量，并将该值与授予该奖项的最大机构数量进行比较。

所需的输出应如下所示：

```
"personname"    "award" "year"

"Alexandre"     "score" "2011"
"Skyfall"       "song"  "2013"
"Tangled"       "song"  "2011" 
```

这给出了我想要的集合，但是我不确定以不同的方式做它是否更有效。我试图让它与 EXISTS 一起工作，但我没有太多运气。

主要问题：有没有更有效的方法来做这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:39:36.453

像往常一样处理复杂查询，我使用 TDQD（测试驱动查询设计）分阶段解决问题。每个阶段都可以单独测试，并检查结果，确保您得到正确的答案。

我注意到您向我们展示了三张桌子；您的查询使用其中两个，但提到第四个，`nominees`. 我假设这`winners`与 相同`nominees`，因为您给了我们该架构并询问谁在给定年份从每个提供该奖项的机构中获得了该奖项。

### 第一阶段：一年有多少机构颁发了特定奖项？

```
SELECT aid, year, COUNT(*) AS num_awards
  FROM winners
 GROUP BY aid, year; 
```

### 第 2 阶段：一个人一年获得了多少次特定奖项？

```
SELECT aid, year, personname, COUNT(*) AS num_person_awards
  FROM winners
 GROUP BY aid, year, personname; 
```

### 第 3 阶段：两个计数相同的行？

```
SELECT n.aid, n.year, w.personname
  FROM (SELECT aid, year, COUNT(*) AS num_awards
          FROM winners
         GROUP BY aid, year
       ) AS n
  JOIN (SELECT aid, year, personname, COUNT(*) AS num_person_awards
          FROM winners
         GROUP BY aid, year, personname
       ) AS w
    ON n.aid = w.aid AND n.year = w.year AND n.num_awards = w.num_person_awards 
```

### 第 4 阶段：将结果集中的奖项 ID 替换为奖项名称

```
SELECT a.name AS awardname, a.year, w.personname
  FROM (SELECT aid, year, COUNT(*) AS num_awards
          FROM winners
         GROUP BY aid, year
       ) AS n
  JOIN (SELECT aid, year, personname, COUNT(*) AS num_person_awards
          FROM winners
         GROUP BY aid, year, personname
       ) AS w
    ON n.aid = w.aid AND n.year = w.year AND n.num_awards = w.num_person_awards
  JOIN awards AS a
    ON a.aid = n.aid; 
```

我没有尝试过这是否比您的查询更快，但它看起来更简单，所以我认为它有合理的机会更快地工作。

* * *

这就是我格式化您的查询的方式：

```
SELECT nominees.personname AS personname, awards.name AS award, nominees.year AS year
  FROM nominees
  JOIN institutions ON institutions.iid = nominees.iid
  JOIN awards ON awards.aid = nominees.aid
 WHERE personname IS NOT NULL 
 GROUP BY nominees.personname, awards.name, nominees.year 
HAVING (awards.name, COUNT(DISTINCT institutions.name) IN 
            (SELECT awards.name AS awards, COUNT(DISTINCT institutions.name) 
               FROM nominees, awards, institutions 
              WHERE nominees.aid = awards.aid and nominees.iid = institutions.iid 
              GROUP BY awards.name)
 ORDER BY nominees.personname, awards.name; 
```

# ruby-on-rails - 启动 Rails 服务器的问题

> ID：15236652
> 
> 赞同：0
> 
> 时间：2013-03-06T00:12:23.033
> 
> 标签：ruby-on-rails, github

我正在开发一个使用 Ruby on Rails 的应用程序。小组中有 5 个人，所以我们使用 GitHub。我在我的计算机上设置了 Rails，并且能够从头开始创建我自己的项目和数据库，但是当我从 GitHub 克隆我们现有的项目并尝试启动服务器时，我遇到了各种各样的问题。

我应该提到我正在使用 Windows 7 机器，并且最初的项目是在 Linux 机器上创建的。我想这可能是一些问题的根源。

最重要的是，当我在必要的文件夹中并键入时，`rails s`我会收到一条冗长的错误消息，开头为：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32
/lib/mysql2/client.rb:44:in `connect': Access denied for user 'root'@'localhost'
(using password: NO) (Mysql2::Error) 
```

我可以提供更多信息，但我不确定需要什么来帮助解决这个问题。我是一个初学者（使用 StackOverflow 和 RoR），所以我很抱歉没有更清晰和简洁。

提前致谢。

附加信息：

*   mysql：版本 14.14 Distrib 5.5.30，适用于 Win 64 (x86)
*   红宝石：版本 1.9.3p125
*   导轨：版本 3.2.0
*   mysql 宝石：版本 2.9.1
*   mysql2 宝石：版本 0.3.11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:20:25.253

您的 Rails 应用程序似乎正尝试使用错误的凭据登录 MySQL。

更新文件 config/databases.yml 以设置权限凭据。

请注意，不应将此文件签入版本控制，因为每个团队成员都不同。

# map - 查找坐标的投影基准类型

> ID：15236653
> 
> 赞同：0
> 
> 时间：2013-03-06T00:12:40.193
> 
> 标签：map, gis

我试图找到一种方法来获取以下坐标的投影类型。

我需要将这些坐标转换为 WGS84 纬度经度格式。我只有 1 个提示：这些坐标位于美国佛罗里达州（布劳沃德县）

```
<XCoordinate>9082520</XCoordinate>
<YCoordinate>6563620</YCoordinate> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:30:53.027

我怀疑您的数据在“SPC”（国家平面坐标）系统中。这通常用于“本地”坐标 - 它使诸如距离和路线之类的计算变得更加容易。如果是这种情况，并且所讨论的县是布劳沃德（即 0901 区），那么仍有一些猜测要做......因为在这个系统中可以使用“美国英尺”、“国际英尺”或米.

如果您访问[http://www.earthpoint.us/Convert.aspx](http://www.earthpoint.us/Convert.aspx)，您可以在“位置”框中输入您的坐标。根据你的选择，你会得到不同的答案。我建议您尝试看看哪个有意义（如果您怀疑坐标是邮局的并且您降落在湖中，那么您可能使用了错误的数字）：

```
0901 908252.0ftE 656362.0ftN gives 26°08'14.5036", -080°13'53.8483" 
```

这让你几乎站在公交车站的顶部——我猜这就是 Hastus 系统可能给你的……

![在此处输入图像描述](../Images/612cf1edb1683500ce558e46cee97a93.png)

# javascript - 来自不同颜色的 Jquery 脉动

> ID：15236654
> 
> 赞同：2
> 
> 时间：2013-03-06T00:12:47.897
> 
> 标签：javascript, jquery

我想从白色跳动到另一种颜色，但我不知道如何为这段代码添加颜色

```
 <script>
  $(document).ready(function() {
    $("#white36").click(function () {
          $('#book').effect("pulsate", { times:3000 }, 500);
    });
    });

  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:46:19.783

你将需要这个插件来用 jquery 动画颜色（它不是默认的）： http: [//www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

那么您可以执行以下操作：

```
var pulsateInterval = null, i = 0;
$(document).ready(function() {
    $('#white36').click(function() {
      // set interval to pulsate every 1500ms
      pulsateInterval = setInterval(function(){
          // animate back and forth
          $('#book').animate({
             background-color: 'red',
          }, 500).animate({
             background-color: 'white',
          }, 500);
          i++;
          // stop at 3000 pulsations
          if(i == 3000){
              clearInterval(pulsateInterval);
          }
      }, 1500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:18:56.823

Pulsate 只改变元素的不透明度，而不是颜色。您可以在元素下方放置一个具有白色背景的元素以获得所需的内容。

喜欢： `<div style="background:#ffffff;"><div id="my_elem" style="#006600"></div></div>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:34:38.720

您可以通过这种方式使用 animate 重新创建您想要的脉冲效果：

```
$(document).ready(function() {
    $('#white36').click(function() {
      $('#book').animate({
        background-color: 'red',
      }, 300).animate({
        background-color: 'white',
      }, 300).animate({
        background-color: 'red',
      }, 300);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:38:58.517

对于一些想法：

```
$(document).ready(function() {
  $("#white36").click(function () {
    $("#book").animate({ 
      width: "50%",
      opacity: 0.3,
      fontSize: "3em", 
      borderWidth: "10px",
      color: "black",
      backgroundColor: "green"
    }, 1500 );
  });
}); 
```

编辑：刚刚尝试运行上面的代码，但在指定背景颜色时它不起作用。如果我在没有那个参数的情况下运行它，它工作得很好。当我尝试使用“背景颜色”和“背景颜色”时，猜猜它有问题

# jquery - 当我们升级应用程序的 jQuery 库时，Google Maps 失败

> ID：15236658
> 
> 赞同：0
> 
> 时间：2013-03-06T00:13:09.477
> 
> 标签：jquery, google-maps

我们有一个在 jQuery 1.4.2 上运行的应用程序，我们正在慢慢升级到 jQuery 1.9.1

我们正在升级的页面之一现在有一个谷歌地图。从广义上讲，该页面包含...

```
<head>
  <script src="/javascripts/jquery-1.4.2.min.js?1362527887" type="text/javascript"></script>
  ...
  <script src="/javascripts/google_map.js?1362527225" type="text/javascript"></script>
</head>
<body>
  ...
  <script type="text/javascript">
    $(document).ready(function () {
      new GoogleMap($('#map_canvas'), '<%= APP_CONFIG['google_maps_api_key'] %>');
    });
  </script>
</body> 
```

这会加载 jQuery，然后加载初始化我们的 Google 地图的 javascript 文件，如下所示：

```
GoogleMap = function (mapElement, apiKey) {
  this.initialized = false;
  this.mapElement = mapElement;
  $.getJSON('http://maps.googleapis.com/maps/api/js?key=' + apiKey + '&sensor=false&callback=?', $.proxy(this.apiLoaded, this));
};

GoogleMap.prototype = {

  apiLoaded:function () {
    this.show();
    var mapOptions = this.defaultLocation();
    this.map = new google.maps.Map(this.mapElement[0], mapOptions);
    ...
  },

  ....
}; 
```

在 jQuery 1.4.2 上，这一切都有效。然而，当我们转移到 jQuery 1.9.1（或 1.6.3 和 1.9.1 之间的任何 jQuery 版本，不管它的价值）时，我在 Javascript 控制台中看到以下错误：

```
Uncaught TypeError: Property 'jQuery191006026467704214156_1362528404472' of object [object Window] is not a function 
```

此错误发生在 main.js 中，该文件在通过上述调用加载谷歌地图时出现。但是，将 jQuery 版本从 1.4.2 更改为 1.4.3 可以正常工作 - 所以破坏它的不仅仅是“任何更改”。

一个重新创建错误的 JSBin（尽管没有显示地图，即使有 1.4.2，可能因为我删掉了太多？）在这里：http: [//jsbin.com/okirac/4/](http://jsbin.com/okirac/4/)

对于更高版本的 jQuery，我是否需要以不同的方式调用谷歌地图？或者我是否应该以不同的方式使用 jQuery 以避免与谷歌地图发生冲突？

就像我说的，这些地图在 jQuery 1.4.2 和页面上的一大堆其他 javascript 调用中运行良好。但是后来的 jQuery 版本打破了页面上的谷歌地图，而所有其他的 javascript 调用似乎都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:52:04.827

感谢@Capitaine 和@i-- 的评论，我得到了它的工作。

似乎在 1.4.x 之后的 jQuery，您不能再依赖 jQuery.getJSON() 来对抗 Google Maps，它实际上返回的是 JS，而不是 JSON（请参阅我在原始问题评论中的链接）。

最后，我使用[Google Maps 文档](https://developers.google.com/maps/documentation/javascript/tutorial?hl=en#Loading_the_Maps_API)将我的页面内 javascript 代码更改为：

```
<script type="text/javascript">
  $(document).ready(function () {
    gmap = new GoogleMap($('#map_canvas'));

    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.googleapis.com/maps/api/js?key=<%= APP_CONFIG['google_maps_api_key'] %>&sensor=false&callback=gmap.apiLoaded";
    document.body.appendChild(script);
  });
</script> 
```

这会设置一个全局“gmap”对象，然后在 Google Maps API 上定义一个回调参数，这意味着在加载 Maps API 后，它会在我的 gmap 对象上调用 apiLoaded() 函数。

然后，这适用于旧版本和新版本的 jQuery。

# php - 在“。”处或附近推进 (PostgreSQL) 语法错误。

> ID：15236663
> 
> 赞同：1
> 
> 时间：2013-03-06T00:13:39.063
> 
> 标签：php, postgresql, propel

我建立了一个数据库（目前只有两个表：用户和电子邮件）并与 Propel 集成。注册用户时，我检查以确保电子邮件不存在（作为电子邮件表中的当前电子邮件或用户数据库中的原始电子邮件）。

为了简单地用推进来做到这一点，我使用以下内容：

```
if(EmailQuery::create()->filterByCurrent(TRUE)->findOneByEmailAddress($email) != NULL) {
    // email address being used currently
} else if(UserQuery::create()->findOneByOriginalEmail($email) != NULL) {
    // email address claimed on account already
} 
```

第一个查询工作正常，但第二个查询生成错误：`Syntax error: 7 ERROR: syntax error at or near "."` Propel 生成的 SQL 查询如下所示：

`SELECT user.id, user.original_email, user.password, user.accept_terms, user.paid, user.customer_id, user.trial_end, user.created_at, user.updated_at, user.ip_address FROM user WHERE user.original_email=:p1 LIMIT 1`

如果我将其复制并粘贴到 phpPgAdmin 中，它会返回相同的错误（并指向用户和列之间的每个 . ）。我是 PostgreSQL 的新手，我缺少一些语法吗？我使用过的所有其他 Propel 查询构建器都可以顺利运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T00:47:53.090

`minitech`来自评论的回答。

`user`是保留的 ANSI SQL 术语。要么`SELECT "user".id FROM "user"`必须使用，要么必须重命名表。我将表重命名为`account`，一切都很好。

# ruby-on-rails - 活动管理员不会接受我的路线

> ID：15236669
> 
> 赞同：5
> 
> 时间：2013-03-06T00:14:13.360
> 
> 标签：ruby-on-rails, devise, activeadmin

我在为我的应用程序运行路由时遇到了一些问题。

## 1.

我希望能够将活动管理员指向[http://admin.lvh.me:3000/](http://admin.lvh.me:3000/) 我尝试使用此代码，但它只显示索引页面。

```
# config/routes.rb
scope :admin, constraints: { subdomain: "admin" } do
  ActiveAdmin.routes(self)
  devise_for :admin_users, ActiveAdmin::Devise.config.merge(path: "/")
end

# config/initializers/active_admin.rb
config.default_namespace = :admin 
```

唯一有效的网址是[http://admin.lvh.me:3000/admin](http://admin.lvh.me:3000/admin) 是否可以避免`/admin`？

## 2.

我的应用程序中的每个考试都有很多部分。我想使用此代码为每个考试添加一个部件按钮。

```
# app/admin/exams.rb
ActiveAdmin.register Exam do
  # ...
  index do
    column :actions do |exam|
      link_to "Part", admin_exam_parts_path(exam)
    end

    default_actions
  end
  # ...
end 
```

问题是那`admin_exam_parts_path`不存在。

```
# config/routes.rb
scope :admin, constraints: { subdomain: "admin" } do
  resources :exams do
    resources :parts
  end

  ActiveAdmin.routes(self)
  devise_for :admin_users, ActiveAdmin::Devise.config.merge(path: "/")
end 
```

`rake routes | grep /admin/exams/:exam_id/parts`不返回任何东西。我做错了什么？

我在跑

*   活跃管理员 0.5.1
*   导轨 3.2.12
*   红宝石 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T16:37:59.913

"admin" is the default namespace for all resources.

you can turn off a resources namespace explicitly in the registration block like this:

```
ActiveAdmin.register Exam, :namespace => false  do
  ...
end 
```

as far as you `has_many: :parts` association, can you post the code for your registration block for `Parts`? There are several ways I might set up this relationship depending on what I was trying to accomplish. So the more context you can give me, the better

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T08:28:14.593

对于你的第一个问题，我的 routes.rb 上有这个

```
root to: "admin/dashboard#index" 
```

在资源之后和 devise_for 之前，工作得很好！

祝你好运！

# php - 通过分页出错

> ID：15236672
> 
> 赞同：2
> 
> 时间：2013-03-06T00:14:18.493
> 
> 标签：php, zend-framework2, zend-paginator

抛出下一个异常： Zend\View\Renderer\PhpRenderer::render: Unable to render template "./opt/lampp/htdocs/guest-book/module/Records/view/records/records/paginator"; 解析器无法解析为文件。我试图在不同的目录中以不同的方式设置路径，但仍然无法正常工作

控制器：

```
class RecordsController extends AbstractActionController
{
    protected $recordsTable;
    public function indexAction()
    {
        $field = (string) $this->params()->fromRoute('field', 'date');
        $order = (string) $this->params()->fromRoute('order', 'desc');
        $array = array('records' =>$this->getRecordsTable()->getByOrder($field, $order),);
        $paginator = new Paginator\Paginator(new Paginator\Adapter\ArrayAdapter($array));
        $paginator->setCurrentPageNumber($this->params()->fromRoute('page', 1));
        $paginator->setPageRange(3);
        $paginator->setDefaultScrollingStyle('Sliding');
        print_r($paginator);
        $pag = new Helper\PaginationControl();
        $pag::setDefaultViewPartial('opt/lampp/htdocs/guest-book/module/Records/view/records/records/paginator.phtml', 'default');
        $vm = new ViewModel($array);
        $vm->setVariable('paginator', $paginator);
        return $vm;
    } 
```

记录表：

```
class RecordsTable
{
    protected $tableGateway;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
    }

    public function getByOrder($field, $order)
    {
        $this->field = $field;
        $this->order = $order;
        $resultSet = $this->tableGateway->select(function (Select $select) {
        $select->order($this->field.' '.$this->order);        
        });
        return $resultSet;      
    } 
```

在视图中：

```
<?php if (count($this->paginator)): ?>
<ul>
<?php foreach ($this->paginator as $item): ?> 
```

要不就：

```
<? echo $this->paginator;?> 
```

还是有问题。

万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:47:10.543

为什么要在控制器内使用视图助手？摆脱那个..

```
$pag = new Helper\PaginationControl();
$pag::setDefaultViewPartial('opt/lampp/htdocs/guest-book/module/Records/view/records/records/paginator.phtml', 'default'); 
```

在模板文件中正确使用它：

```
<?php echo $this->paginationControl($paginatior, 'Sliding', 'records/records/paginator.phtml')  ?> 
```

# thrift - 在 TServer 之外的 Thrift 中写入输出流？

> ID：15236673
> 
> 赞同：0
> 
> 时间：2013-03-06T00:14:19.293
> 
> 标签：thrift, outputstream

我正在努力寻找 Thrift 文档来解释写入套接字的过程，而不是通过接口方法。

如果我希望服务器在不需要客户端发起请求的情况下写出数据，我应该查看 Thrift Library 的哪些组件？有没有很好的例子说明如何在我错过的地方做到这一点？一切似乎都依赖于使用 TServer 类。

查看[http://thrift.apache.org/docs/concepts/](http://thrift.apache.org/docs/concepts/)的直觉表明这是我感兴趣的 TProcessor 类？但是很难找到能很好地使用它的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:44:46.170

一旦在 上`TProtocol`建立了一个实例`TTransport`，就可以在其中编写任何 Thrift 结构。这只是几行代码：

```
TTransport trans = ....;
TProtocol prot = ....;
MyStruct myStruct = ....; //Any thrift structure that extends TBase
myStruct.write(prot);
trans.flush(); 
```

读取序列化结构也很容易：

```
TProtocol prot = ....;
MyStruct myStruct = new MyStruct();
myStruct.read(prot); 
```

类/方法语义的名称可能会根据实现语言而改变，但总体思路对于所有语言都是相同的。

对于示例，我建议查看 Thrift 编译器和`TSerializer`java 类生成的服务器代码。

# collections - oracle值存在于集合中

> ID：15236678
> 
> 赞同：0
> 
> 时间：2013-03-06T00:15:08.373
> 
> 标签：collections, plsql, oracle11g, exists, oracle-type

我有函数（在视图中使用），最终结果是逗号分隔值表中一行的唯一值列表。

基本上给出了一个表格：

```
studentid    classes
12345        MATH 1301, HIST 1301, POLS 1301
57495        MATH 2309, HIST 1301
39485        MATH 1301, HIST 1301 
```

我想看看

```
MATH 1301
MATH 2309
HIST 1301
POLS 1301 
```

如果源表很小，则以下代码可以完美运行，但是在查看包含 30,000 行的表时，会出现以下错误。`ORA-06532: Subscript outside of limit`

我很确定我的问题是集合变得太大，因为它得到了重复的值。只有当集合变得太大时，重复值本身才会成为问题。如何将重复值排除在集合之外？

我已经尝试过`childnames.exists(element)`，但我相信这只适用于查看索引值是否存在`element`正确的元素？我看过`member of`但我不明白如何实现它。有没有一种简单的方法来检查集合元素是否存在？还是我看得太简单了？`odcivarchar2list`除了允许更大的集合之外，还有其他类型吗？

```
CREATE OR REPLACE FUNCTION unique_values_from_csv ( p_del VARCHAR2 := ',')
   RETURN SYS.odcivarchar2list
IS
   childnames   SYS.odcivarchar2list := sys.odcivarchar2list ();
   tempvar VARCHAR2(255);
    l_idx    PLS_INTEGER;
    l_list2    VARCHAR2(32767) ;
    l_value VARCHAR2(32767);

   CURSOR tablewalker_cur
   IS
      SELECT distinct classes
        FROM studentclasses;

BEGIN
   FOR recordwalker_rec IN tablewalker_cur
   LOOP
   l_list2 := recordwalker_rec.classes;
      LOOP
         l_idx := INSTR (l_list2, p_del);

         IF l_idx > 0
         THEN

            childnames.EXTEND;            
            tempvar := (LTRIM (RTRIM (SUBSTR (l_list2, 1, l_idx - 1))));
            childnames (childnames.COUNT) :=  tempvar;
            l_list2 := SUBSTR (l_list2, l_idx + LENGTH (p_del));
           end if;

            childnames.EXTEND;
            childnames (childnames.COUNT) :=  (LTRIM (RTRIM (l_list2)));
            EXIT;

      END LOOP;
   END LOOP;

   RETURN childnames;
END unique_values_from_csv;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:01:03.213

```
select distinct
  regexp_substr(classes, '([^,]+)(,\s*|$)', 1, occ, '', 1) as class
from
  studentclasses,
  (
    select level as occ
    from dual
    connect by level <= (
      select max(regexp_count(classes, ','))+1 
      from studentclasses
  )
)
where
  regexp_substr(classes, '([^,]+)(,\s*|$)', 1, occ, '', 1) is not null
order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:38:29.930

```
create or replace function unique_values_from_csv(p_del varchar2 := ',')
return sys.dbms_debug_vc2coll is
    childnames sys.dbms_debug_vc2coll := sys.dbms_debug_vc2coll();
    l_idx    pls_integer;
    l_list2    varchar2(32767) ;

    procedure add_if_not_member(new_element varchar2) is
    begin
        if new_element not member of childnames then
            childnames.extend;
            childnames(childnames.count) := new_element;
        end if;
    end;
begin
    for recordwalker_rec in (select distinct classes from studentclasses)
    loop
        l_list2 := recordwalker_rec.classes;
        loop
            l_idx := instr (l_list2, p_del);
            if l_idx > 0 then
                add_if_not_member(trim(substr (l_list2, 1, l_idx - 1)));
                l_list2 := substr(l_list2, l_idx + length(p_del));
            else
                add_if_not_member(trim(l_list2));
            exit;
            end if;
        end loop;
    end loop;
    return childnames;
end unique_values_from_csv;
/ 
```

*   使用了 SYS.DBMS_DEBUG_VC2COLL，它是一个`TABLE OF VARCHAR2(1000)`并且应该支持任意数量的元素。虽然`l_list2 varchar2(32767)`会限制结果。
*   `MEMBER OF`是正确的条件。
*   添加了一个 ELSE - 原来的功能只是将列表一分为二。
*   删除了游标——对于这么小的查询，另一个级别的间接是不值得的。
*   使用 TRIM() 而不是 LTRIM(RTRIM())
*   最好的解决方案是丢弃这个函数并停止在数据库中存储非原子数据。

这是一些示例数据和使用该函数的查询：

```
create table studentclasses(studentid number, classes varchar2(4000));

insert into studentclasses
select  12345, 'MATH 1301,HIST 1301,POLS 1301' from dual union all
select  57495, 'MATH 2309,HIST 1301' from dual union all
select  39485, 'MATH 1301,HIST 1301' from dual;
commit;

select unique_values_from_csv from dual;

COLUMN_VALUE
MATH 1301
HIST 1301
POLS 1301
MATH 2309 
```

# java - Maven 只选择 src/main/java 或 src/main/scala 作为源文件夹，从不选择两者

> ID：15236687
> 
> 赞同：7
> 
> 时间：2013-03-06T00:15:55.690
> 
> 标签：java, eclipse, scala, maven

我正在使用带有 Java 6 和 Scala 2.10 的 Eclipse 3.7 w/m2e（两周前安装）。

每当我使用 m2e 更新项目配置时，根据我的 .pom 配置方式，它总是选择`src/main/java`&&`src/test/java`或选择`src/main/scala`&&`src/test/scala`作为我的源文件夹。我希望它将所有四个作为源文件夹。

这是我的 .pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>me.my.name</groupId>
<artifactId>ai.chess</artifactId>
<version>0.0.1-SNAPSHOT</version>
<name>chessAI</name>
<description>Chess AI</description>

<repositories>
    <repository>
        <id>scala-tools.org</id>
        <name>Scala-tools Maven2 Repository</name>
        <url>http://scala-tools.org/repo-releases</url>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>scala-tools.org</id>
        <name>Scala-tools Maven2 Repository</name>
        <url>http://scala-tools.org/repo-releases</url>
    </pluginRepository>
</pluginRepositories>

<dependencies>
    <dependency>
        <groupId>org.scala-lang</groupId>
        <artifactId>scala-library</artifactId>
        <version>2.10.0</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <!-- <sourceDirectory>src/main/scala</sourceDirectory> 
    <testSourceDirectory>src/test/scala</testSourceDirectory> -->
    <plugins>
        <plugin>
            <groupId>org.scala-tools</groupId>
            <artifactId>maven-scala-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <jvmArgs>
                    <jvmArg>-Xms64m</jvmArg>
                    <jvmArg>-Xmx1024m</jvmArg>
                </jvmArgs>
                <sources>
                    <source>src/main/scala</source>
                    <source>src/main/java</source>
                    <source>src/test/scala</source>
                    <source>src/test/java</source>
                </sources>
            </configuration>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.scala-tools
                                    </groupId>
                                    <artifactId>
                                        maven-scala-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.15.2,)
                                    </versionRange>
                                    <goals>
                                        <goal>compile</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

最终，我想创建一个包含所有必要依赖项的 UberJar，以便它可以在不支持 scala（但支持 Java）的服务器上运行。国际象棋游戏的框架是用 Java 给出的，所以我想将它与 Scala 一起使用

如果 Maven 仍然很痛苦，我可能会切换回使用 Ant 来构建。

PS 对于给定的 .pom，它使用 java 源文件夹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T10:46:46.783

scala-maven-plugin（[以前称为 maven-scala-plugin](https://github.com/davidB/scala-maven-plugin)）需要[一些额外的配置来执行混合 Scala/Java 项目](http://davidb.github.com/scala-maven-plugin/example_java.html)，但是如果您按照他们的说明（复制如下），它应该将所有必要的目录添加到您的构建路径.

```
<plugins>
    <plugin>
        <groupId>net.alchim31.maven</groupId>
        <artifactId>scala-maven-plugin</artifactId>
        <executions>
            <execution>
                <id>scala-compile-first</id>
                <phase>process-resources</phase>
                <goals>
                    <goal>add-source</goal>
                    <goal>compile</goal>
                </goals>
            </execution>
            <execution>
                <id>scala-test-compile</id>
                <phase>process-test-resources</phase>
                <goals>
                    <goal>testCompile</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <executions>
            <execution>
                <phase>compile</phase>
                <goals>
                    <goal>compile</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T00:41:03.700

您有两个选择：第一个是将您的项目拆分为具有两个模块的父项目，每个模块都有自己的 pom.xml 文件。这是使用 maven 执行此操作的更自然的方法，但由于我自己不是 scala 用户，因此我不完全确定在您的设置中是否可行。

```
 <parent> ai.chess (packaging: pom)
    <module> ai.chess.java (packaging: jar)
    <module> au.chess.scala (using <sourceDirectory>) 
```

第二个选项是保持布局不变，并使用[build-helper-maven-plugin](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)将源目录添加到构建中；像这样：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>add-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>src/main/scala</source>
              </sources>
            </configuration>
          </execution>
          <execution>
            <id>add-test-source</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>add-test-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>src/test/scala</source>
              </sources>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:00:54.330

1.  更新到 scala-maven-plugin (scala-tools.org 不再存在，因为 2 年)
2.  使用目标添加源（仅对 scala 执行与 build-helper-maven-plugin 相同的操作）

您还可以将 .java 和 .scala 文件存储在同一个 src/main/xxx 和 src/test/xxx 下，java 编译器忽略 *.scala，scala 编译器同时使用这两者。

# signalr - 更改页面时 hub.statechange 断开连接

> ID：15236688
> 
> 赞同：0
> 
> 时间：2013-03-06T00:15:56.360
> 
> 标签：signalr

所以我遇到了显示问题，想知道解决它的最佳方法。当 $.connection.hub.stateChanged 事件触发并且它处于断开连接状态时，我会向用户显示一个对话框，说连接丢失。但不幸的是，当我更改页面时，会触发此事件并在页面更改之前显示对话框，显示此错误几秒钟。

当我导航到其他按钮时，禁用 statechange 事件的最佳方法是什么？或者我可以在事件中进行一些检查，例如：

```
$.connection.hub.stateChanged(function (change) {
    if (change.newState === $.connection.connectionState.disconnected) {
        //Pseudo code:
        if (!pageIsChanging) {
            $('#lostConnectivityDiv').modal('show');
        }
    }
}); 
```

或者在集线器断开连接之前触发页面更改事件时是否有 jquery 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T05:16:00.287

如果您尝试通知用户连接已丢失，则更好的路线是绑定到重新连接状态（下面的*B*）。

请参阅以下问题的答案：[signalR 中的重新连接何时发生？](https://stackoverflow.com/questions/14455916/when-does-a-reconnect-in-signalr-occour/14465876)为背景。

**A）** 对于 SignalR，只有一个点会发生真正的连接丢失，上面链接中的**#4**。当我说真正的连接丢失时，我的意思是 SignalR 连接停止尝试重新连接的点。

**B）** 但是，根据您希望如何实现通知，您也可以争辩说它应该只在重新连接时触发（意味着网络已关闭但连接正在尝试恢复）。

话虽如此，您可以通过任何一种方式实现您的通知。

*A的实施：*

```
var tryingToReconnect = false;

$.connection.hub.reconnecting(function() {
    tryingToReconnect = true;
});

$.connection.hub.reconnected(function() {
    tryingToReconnect = false;
});

$.connection.hub.disconnected(function() {
    if(tryingToReconnect) {
        notifyUserOfDisconnect(); // Your function to notify user
    }
}); 
```

*B的实现：*

```
$.connection.hub.reconnecting(function() {
    notifyUserOfDisconnect(); // Your function to notify user
}); 
```

# java - WSSE Security Soap Header Web 服务请求在 SOAP UI 中正确返回响应，但在 Java 程序中抛出异常

> ID：15236690
> 
> 赞同：0
> 
> 时间：2013-03-06T00:16:18.840
> 
> 标签：java, soap, websphere, cxf, wsse

我有一个在 websphere 中运行的 servlet。我在客户端..我必须调用一个 Apache CXF Web 服务，该服务需要在肥皂头中加密的用户 ID 和密码......它需要使用 WSSE 安全头..现在这个请求在 SOAP UI 中触发时有效. 但是在Java中抛出安全异常..我在这里放入SOAP请求和异常..我错过了什么？我用谷歌搜索并没有找到什么帮助

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="0">
    <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="EXTSYSTEMSADMIN">
    <wsse:Username>lZvdO0sQNLqlxfDe4jUzgg==</wsse:Username>
    <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">za/jVwHhQROvEnGvXQHsOIbUiSdP3ZBrJXio6gQqMeU=</wsse:Password>
    </wsse:UsernameToken>
    </wsse:Security>
    </soapenv:Header>
    <soapenv:Body>
.......    
</soapenv:Body>
    </soapenv:Envelope> 
```

这是堆栈跟踪...

```
servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet xxxx in application XXX. Exception created : javax.xml.ws.soap.SOAPFaultException: An error was discovered processing the <wsse:Security> header
      at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1310)
      at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1036)
      at org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:558)
      at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.getFaultResponse(JAXWSProxyHandler.java:473)
      at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.createResponse(JAXWSProxyHandler.java:436)
      at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:351)
      at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:159)
      at $Proxy45.getDataFromClarity(Unknown Source)
      at legal.vzwcorp.com.TestWS.doGet(TestWS.java:116)
      at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
      at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
      at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1661)
      at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:937)
      at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
      at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
      at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3826)
      at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
      at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
      at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
      at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
      at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
      at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
      at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)
      at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
      at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
      at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
      at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
      at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
      at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
      at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
      at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
      at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
      at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550) 
```

# rabl - 仅返回子节点中的第一个子节点

> ID：15236691
> 
> 赞同：0
> 
> 时间：2013-03-06T00:16:22.383
> 
> 标签：rabl

我有一个故事模型和一个帖子模型。每个故事都有很多帖子。

在我的 story#index 操作中，我想使用 rabl 返回所有 @stories，@stories 中的每个故事还应该包含一个子节点，其中包含来自其最近创建的帖子的属性。

这是我最接近实现我正在寻找的东西：

```
#show.json.rabl

object @story

attributes  :id, :title, :username

child @story.posts.first => :latest_post do
  attributes  :id, :story_id, :contents, :username
end 
```

这在 stories#show 动作中效果很好。但是当我尝试使用 stories#index 操作扩展它时

```
#index.json.rabl

collection @stories

extends "stories/show" 
```

我收到以下错误：

```
ActionView::Template::Error (undefined method `posts' for nil:NilClass):
    1: collection @stories
    2: 
    3: extends "stories/show"
  app/views/stories/show.json.rabl:8:in `render' 
```

我相信我收到此错误是因为我没有设置 show.json.rabl 视图使用的 @story 实例变量。但我不确定如何解决这个问题并将 show.json.rabl 传递给正确的故事对象。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:27:44.700

我使用了一个 rabl 部分来解决这个问题。就是这样：

```
#story.show.json.rabl

object @story

attributes  :id, :title, :username

node :latest_post do |story|
  { :post => partial("posts/show", :object => story.posts.first)}
end 
```

* * *

```
#story.index.json.rabl

collection @stories

extends "stories/show" 
```

* * *

```
post.show.json.rabl

object @post

attributes  :id, :story_id, :contents, :username 
```

这完全符合要求。

# url - Joomla 中同一页面的多个 url

> ID：15236693
> 
> 赞同：0
> 
> 时间：2013-03-06T00:16:32.397
> 
> 标签：url, joomla, joomla-k2

我在joomla中有一个别名为“sprite creator”的页面（以k2术语表示的项目），其网址为：[http ://spritetools.com/index.php/software/item/3-sprite-creator](http://spritetools.com/index.php/software/item/3-sprite-creator)

然后我将相应项目的别名更改为“animator”，我的网址变为： [http ://spritetools.com/index.php/software/item/3-animator](http://spritetools.com/index.php/software/item/3-animator)

问题是现在两个网址都存在！（最糟糕的是第一个被谷歌索引而第二个没有！）

如何删除第一个网址？我只想有一个指向此页面的唯一链接。

感谢您的任何帮助。

Joomla 2.5 k2 2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:39:28.320

可能的答案来自[http://forum.joomla.org/viewtopic.php?f=618&t=699954](http://forum.joomla.org/viewtopic.php?f=618&t=699954)是在前端将机器人值设置为“no-index no-follow”

您可以从在线站点地图构建器[http://www.xml-sitemaps.com/](http://www.xml-sitemaps.com/)获得的所有现有（不包括可能的副本）url 的列表 但是如何获取旧的 url？

还没查。。。

还有其他建议吗？

# antlr4 - antlr4 解析器重用和预热

> ID：15236694
> 
> 赞同：8
> 
> 时间：2013-03-06T00:16:41.540
> 
> 标签：antlr4

在我的用例中，我必须使用生成的解析树上的访问者将数千个小的独立表达式解析为树表示。当前为每个解析操作创建新的流、词法分析器和解析器实例。

我认为这可能不是最佳的。哪些对象实例可以在这样的设置中重复使用以利用 ANTLR4 的预热属性？线程安全性如何——这些实例中的哪些应该是线程本地的？重用词法分析器或解析器实例是否需要某种类型的重置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T02:40:28.330

在 ANTLR 4 的早期（在其最初发布之前的几个月），自适应 DFA 缓存是基于每个实例创建的，因此使用`Lexer.setInputStream`or`Parser.setInputStream`对于实现良好性能至关重要。

这已不再是这种情况。后台缓存现在在所有解析器实例之间共享并且是线程安全的。`Lexer`和类的方法`Parser`不是线程安全的，因此如果要在多个线程上解析，则需要创建词法分析器和解析器的多个实例。

# javascript - .val() 没有从输入中获取更新的值

> ID：15236703
> 
> 赞同：4
> 
> 时间：2013-03-06T00:17:33.853
> 
> 标签：javascript, jquery, html

我有两个输入字段，我试图通过单击一个按钮使用 jquery 获取它们的值。这似乎是一个非常简单的操作，但对于我的生活，我无法让它工作。这是代码片段：

```
Name: <input type="text" id="name" value="test1"><br>
Message: <input type="text" id="line" value="test2"><br>
<button id="submitButton">Submit</button>

<script>
name1 = $("#name").val();
line1 = $("#line").val();

$("#submitButton").click(function(){
    alert("Name: " + name1 + "\nMessage: " + line1);
});

</script> 
```

如果我没有指定该值，则警报会返回两个变量的未定义。如果我更改输入的值并单击按钮，它仍然显示 test1 和 test2。我必须在这里缺少一些简单的东西，有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T00:20:36.150

在您的代码中，您在脚本初始化时获取值，然后在 click 函数中引用它们在该点的值，而不是获取当前值。

尝试：

```
$("#submitButton").click(function(){
    name1 = $("#name").val();
    line1 = $("#line").val();
    alert("Name: " + name1 + "\nMessage: " + line1);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:20:41.213

```
name1 = $("#name").val() 
```

创建一个新的字符串变量`name1`，其当前值为`$("#name").val()`。 `.val()`每次您尝试访问时都不会调用`name1`. 最简单的方法就是使用它`$("#name").val()`。

[http://jsfiddle.net/wTvku/](http://jsfiddle.net/wTvku/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T00:22:27.010

正如其他答案中提到的，问题在于您正在预先计算变量并期望它们神奇地改变。但是我强烈建议使用[Vanilla JS](http://vanilla-js.com/)

```
document.getElementById('submitButton').onclick = function() {
    var name1 = document.getElementById('name').value,
        line1 = document.getElementById('line').value;
    alert("Name: " + name1 + "\nMessage: " + line1);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:20:41.663

您应该将代码包装在 document.ready() 事件中...

```
$(document).ready(function() {  
name1 = $("#name").val();
line1 = $("#line").val();

$("#submitButton").click(function(){
    alert("Name: " + name1 + "\nMessage: " + line1);
});

// Handler for .ready() called.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T00:21:20.460

您已经在 click 函数之外设置了变量值。该值是在页面加载时设置的，而不是在您运行该函数时设置的。尝试这个：

```
Name: <input type="text" id="name" value="test1"><br> 
```

留言：
提交

$("#submitButton").click(function(){ name1 = $("#name").val(); line1 = $("#line").val(); alert("Name:" + name1 + "\n消息：" + line1); });

# php - Symfony2：模式名称更改后访问被拒绝

> ID：15236705
> 
> 赞同：0
> 
> 时间：2013-03-06T00:18:14.267
> 
> 标签：php, mysql, symfony, doctrine-orm

我在 Symfony 中重写了一个应用程序作为学习练习，它的 MySQL 模式几乎与原始模式相同，但名称有所更改。我这样做是为了在摆弄 Symfony 的同时继续使用原始应用程序。

为了查看重写是否可以上线，我构建了一个脚本来对生产模式进行微小的修改。然后我将 parameters.yml 中的数据库名称从 symfony 测试模式更改为实时模式名称。我可以进入登录屏幕，但除此之外的任何页面（所有页面都在防火墙后面）我得到

> request.ERROR: Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException: G:\Documents\workspace\sym\vendor\symfony\symfony\src\Symfony\Component\Security\Http\Firewall\ExceptionListener 的访问被拒绝（未捕获的异常）。第 100 行

Symfony 分析器显示我已完全通过身份验证。

去哪里看？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:36:11.753

错误 99：更换用户并重试！

我的错 - 未能充分更新用户表。角色不存在。现在是，一切都很好。

谢谢收听。

G

# c# - Mvc 本地化数据库值

> ID：15236711
> 
> 赞同：3
> 
> 时间：2013-03-06T00:18:45.250
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

本地化来自 db.data 的数据的最佳方法是什么？例如类别名称？

MVC C# .net 4,4.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:45:00.563

您需要在数据库中有翻译后的值。

如果语言很少，并且不会更改，则可以为每种语言添加一列（NameEn、NameEs、NameFr 等）。有点违反规范化规则，但让生活更轻松。

另一种数据库方法是拥有一个保存所有翻译的表：

```
Localize
 - Field
 - Locale
 - Translation 
```

然后对于类别名称，您将拥有三个记录，每种语言一个。您只需按字段和区域设置查询表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:52:29.803

一种非常常见的方法是通过您的数据库对它进行本地化，方法是为每个表创建一个单独的转换表，其中至少有一个需要本地化的列。这是我们在项目中通常会做的事情。数据库数据 -> 在数据库中本地化。查看/UI 字符串 -> 在 resx 文件中本地化。

在此处查看此答案：[用于存储本地化数据版本的良好数据库表设计](https://stackoverflow.com/questions/133313/good-database-table-design-for-storing-localized-versions-of-data)

编辑：与链接相反，我们通常将“默认”语言存储在原始表中，因此实际上不需要翻译条目。

例如，如果您的表“Categories”包含 Id 和 Name 列，则相应的 Translation 表“Categories_Translation”可能包含 CategoryId、LanguageCode、Name_Tx 列，而 Name_Tx 包含“LanguageCode”语言中“Name”的翻译文本。

# vb.net - 文本框不显示自动完成，文本框只是闪烁

> ID：15236716
> 
> 赞同：0
> 
> 时间：2013-03-06T00:19:38.977
> 
> 标签：vb.net, winforms, autocomplete, textbox

我读过的每一条评论都说这段代码有效..但是当我尝试在文本框中输入文本时，没有自动完成出现，它只是闪烁..请帮助，我是 winforms 新手

```
Private Sub txsCusID_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txsCusID.TextChanged
    Dim cmd As New SqlClient.SqlCommand("SELECT DISTINCT fname + ' ' + lname AS clist FROM tblclient WHERE id LIKE '%" + txsCusID.Text.ToString + "%'", sqlconstr)
    Dim ds As New DataSet
    Dim da As New SqlClient.SqlDataAdapter(cmd)
    da.Fill(ds, "list")
    Dim col As New AutoCompleteStringCollection
    Dim i As Integer
    For i = 0 To ds.Tables(0).Rows.Count - 1
        col.Add(ds.Tables(0).Rows(i)("clist").ToString())
    Next
    txsCusID.AutoCompleteSource = AutoCompleteSource.CustomSource
    txsCusID.AutoCompleteCustomSource = col
    txsCusID.AutoCompleteMode = AutoCompleteMode.Suggest
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:16:51.013

在这里试一试...我建议设置您的表格，然后在添加到您的源时循环...

```
 Dim dtCustomerNames As DataTable
    dtCustomerNames = ds.Tables(0)

    For Each row As DataRow In dtCustomerNames.Rows
        'You have to continue to add your data here...'
        txsCusID.AutoCompleteCustomSource.Add((row.Item("clist").ToString))
    Next

    txsCusID.AutoCompleteMode = AutoCompleteMode.Suggest
    txsCusID.AutoCompleteSource = AutoCompleteSource.CustomSource 
```

让我知道它对你有什么影响...

谢谢！

# iphone - 当我在模拟器上运行 iphone 应用程序时，屏幕是白色的

> ID：15236719
> 
> 赞同：0
> 
> 时间：2013-03-06T00:19:49.323
> 
> 标签：iphone, xcode, crash

我不知道应用程序有什么问题，它运行良好，直到我尝试将带有 textlabel 的内容更改为 textview 然后它崩溃了。所以我试着把它改回它工作的时候，它仍然崩溃。有任何想法吗？

```
 #import "TestViewController.h"

@implementation TestViewController

@synthesize labelsText;

-(void)setup {
    titles = [NSArray arrayWithObjects:@"Title 1",@"Title 2",@"Title 3",@"Title 4", nil];
}

-(IBAction) nextclicked:(id)sender{
    titles = [NSArray arrayWithObjects:@"iology is the scientific study of life. Bam",@"This works? Wow",@"Still Works.",@"garret is the coolest awesome person awesome wowowowwwwwwwwwwwwwwwwwwwwwwwwwww", nil];
        if (step<titles.count-1) {
        step++;
    }
    else
    {
        step= 0;
    }
    labelsText.text = [titles objectAtIndex:step];
    }  

-(IBAction) prevClicked:(id)sender{
    titles = [NSArray arrayWithObjects:@"Biology is the scientific study of life. Bam",@"This works? Wow",@"Still Works.",@"garret is the coolest awesome person awesome wowowowwwwwwwwwwwwwwwwwwwwwwwwwww", nil];
    if (step>0) {
        step--;
    }
    else
    {
        step =titles.count-1;
    }
    labelsText.text = [titles objectAtIndex:step];
    }  

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
        self.labelsText=nil;
}

- (void)dealloc {
    [super dealloc];
    [labelsText release];
}

@end 
```

.h 文件：

```
#import <UIKit/UIKit.h>

@interface TestViewController : UIViewController {
        UILabel *labelsText;
    UIButton *btn;
    int step;
    NSArray *titles;
                }
@property (nonatomic, retain) UILabel *labelsText;
 -(IBAction) nextclicked:(id)sender;
-(IBAction) prevClicked:(id)sender;

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:29:56.803

我想你错过了这个：

在您的示例中，它也应该是**标签文本**和按钮。

![在此处输入图像描述](../Images/a3bd8542655abc157580ff4795bf5867.png)

# javascript - 对象不支持属性或方法删除

> ID：15236722
> 
> 赞同：0
> 
> 时间：2013-03-06T00:20:13.493
> 
> 标签：javascript, extjs, internet-explorer-9, extjs4.1

我正在使用 extjs 并尝试像这样动态删除 dom 元素-

```
if (Ext.getElementById('a'))
    Ext.getElementById('a').remove(); 
```

这在 Chrome 中运行良好。我也在 IE9 上运行应用程序，但它抛出错误——对象不支持属性或方法删除

请让我知道是否有解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:17:45.707

`Ext.getElementById()`是一种私有方法 - 您可能需要考虑`Ext.get()`改用。

无论如何，如果它在 Chrome 而不是在 IE 中工作，很可能您的 dom 无效 - 搜索缺少的结束标签，或者使用在线验证器验证您的 dom。也看到[这个](https://stackoverflow.com/questions/2860757/prototype-element-remove-not-working-in-ie)。

# iis - 在 IIS 中重新创建默认网站

> ID：15236724
> 
> 赞同：1
> 
> 时间：2013-03-06T00:20:24.223
> 
> 标签：iis, iis-6

我看过[这个问题](https://stackoverflow.com/questions/750632/recreate-the-default-website-in-iis)，但是当我创建网站时，我需要知道使用什么用户进行直通身份验证：

![添加默认网站](../Images/fdfc493d9317e71b19a9f95bb414c2db.png)

在文件资源管理器中查看 wwwroot ，我可以看到它有`IIS_IUSERS`，我尝试完全控制它。我认为解决方案不是将我的管理员帐户作为身份验证。

在我删除它之前，它很好，所以我错过了什么？也许原来的默认网站没有使用直通身份验证，或者我可能遗漏了其他东西。

什么是*正确*的解决方案？

# android - 升级 Android SDK 后 Android Emulator 未显示

> ID：15236727
> 
> 赞同：0
> 
> 时间：2013-03-06T00:20:26.450
> 
> 标签：android

我有个问题。在我将 SDK 升级到 4.2.2 之前，我的 AVD 工作正常。在我单击`Start`AVD 管理器的按钮后，它没有出现。我试图删除设备，但收到错误消息`The Android Virtual Device 'Test Device 4' is currently running in an emulator and cannot be deleted`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:12:25.917

检查 AVD 文件 (emulator-user.ini) 可能坐标是错误的，将它们重置为 0。然后它会出现在你的屏幕上。

# python - IMAP 搜索未找到新电子邮件

> ID：15236732
> 
> 赞同：1
> 
> 时间：2013-03-06T00:20:42.490
> 
> 标签：python, email, imap

我的测试代码发送了一封带有附件的电子邮件，并在主题和正文中保存了一个哈希值。然后，我有一个函数可以对其进行哈希搜索，获取 uid 并获取返回附件数据的电子邮件。

我遇到的问题是，当我发送消息然后搜索电子邮件服务器说没有匹配的 uid 的哈希时，但是如果我运行脚本的另一个副本，它确实会找到它！即使第二个脚本先运行！它首先找到它，但原来的没有；虽然是晚了！

输出

```
$ python test_server_file_functions.py 
Creating mail server
S: '* OK Gimap ready for requests from [ip] [data]'
C: '0001 CAPABILITY'
S: '* CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH AUTH=XOAUTH2'
S: '0001 OK Thats all she wrote! [data]'
C: '0002 LOGIN "user@gmail.com" "password"'
S: '* CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE'
S: '0002 OK user@gmail.com Anonymous Test authenticated (Success)'
C: '0003 SELECT INBOX'
S: '* FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen)'
S: '* OK [PERMANENTFLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen \\*)] Flags permitted.'
S: '* OK [UIDVALIDITY 1] UIDs valid.'
S: '* 0 EXISTS'
S: '* 0 RECENT'
S: '* OK [UIDNEXT 132] Predicted next UID.'
S: '0003 OK [READ-WRITE] INBOX selected. (Success)'
Does not exists
Created mail server
Sending email
Sent email
Waiting 3 minutes to make sure it isn't a simple delay with the email being relayed
Downloading Data...
C: '0004 SEARCH SUBJECT "EMS Data ID: 622904923b1825d5742ed25fb792fafe2e710c40ceea09660a604be8fabac35ae9b006c43c7a992159b8b0df376383830a6d4c54ed5b141c8429a4feec89cd8b"'
S: '* SEARCH'
S: '0004 OK SEARCH completed (Success)'
Unhandled Error
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/mail/imap4.py", line 2455, in _defaultHandler
    cmd.finish(rest, self._extraInfo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/mail/imap4.py", line 382, in finish
    d.callback((send, lastLine))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 368, in callback
    self._startRunCallbacks(result)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 464, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/Users/user/Documents/gms/gms/mail_backend.py", line 178, in process_download_uid
    raise IOError("Hash not found, however database indicates it was uploaded")
exceptions.IOError: Hash not found, however database indicates it was uploaded
There was an error retrieving the email
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/mail/imap4.py", line 2455, in _defaultHandler
    cmd.finish(rest, self._extraInfo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/mail/imap4.py", line 382, in finish
    d.callback((send, lastLine))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 368, in callback
    self._startRunCallbacks(result)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 464, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/Users/user/Documents/gms/gms/mail_backend.py", line 178, in process_download_uid
    raise IOError("Hash not found, however database indicates it was uploaded")
exceptions.IOError: Hash not found, however database indicates it was uploaded
Quiting... 
```

代码

```
import os
# logging
from twisted.python import log

import sys
import time
import email

from Utils import BLOCK

# IMAP
from IMAPBackend import connectToIMAPServer, Command
# SMTP
from SMTPBackend import connectToSMTPServer

# Hash Database
from HashDatabase import HashDatabase, hash

# deferreds
from twisted.internet.defer import Deferred, DeferredList, succeed
from twisted.internet.task import deferLater
#reactor
from twisted.internet import reactor

BLOCK_SIZE = BLOCK / 1024 # convert from bytes (needed for FTP) to kilobytes

def createMailServer(username, password, smtp_server, imap_server, hash_db = "hash.db"):
    # create smtp connection
    smtp_d = connectToSMTPServer(smtp_server, username, password)
    # create imap connection
    imap_d = connectToIMAPServer(imap_server, username, password)

    dl = DeferredList([smtp_d, imap_d])
    dl.addCallback(lambda r: [ MailServer(r[0][1], r[1][1], username, hash_db) ][0]  )
    return dl

class ServerManager(object):

    def __init__(self, mail_servers):

        self.mail_servers = mail_servers

    def get_server(self, accnt):
        for ms in self.mail_servers:
            if ms.account == accnt:
                return succeed(ms)

    def return_server(self):
        # retrieve the size avialable on the servers
        get_space_deferreds = []
        for ms in self.mail_servers:
            d = ms.get_space()
            d.addCallback(lambda r: (ms, r))
            get_space_deferreds.append(d)

        dl = DeferredList(get_space_deferreds, consumeErrors = True)
        dl.addCallback(self.parse_sizes)
        return dl

    def parse_sizes(self, results):
        for no_error, result in results:
            server = result[0]
            result = result[1]
            if no_error:# not an error so a potential server
                for argument in result[0]:
                    if argument[0] == "QUOTA":
                        print "Argument"
                        print argument
                        print "/Argument"
                        used, total =  argument[2][1:3]
                        available_kb = int(total) - int(used)
                        if available_kb >  BLOCK_SIZE:# server with more then our block size
                            return server
            else:
                print "Error from account %s" % server.email_address

        # no free space was found :-(
        raise IOError("No free space was found.")

class MailServer(object):
    "Manages a server"

    size = 0
    used_space = 0

    def __init__(self, smtp_connection, imap_connection, email_address, hash_db = "hash.db"):
        self.smtp_connection = smtp_connection
        self.imap_connection = imap_connection
        self.hash_database = HashDatabase(hash_db)
        self.email_address = email_address
        self.account = email_address

        # current uploads
        self.current_uploads = {}

        # current downloads
        self.current_downloads = {}
    def get_space(self):
        cmd = Command("GETQUOTAROOT", "INBOX", ["QUOTAROOT", "QUOTA"])
        d = self.imap_connection.sendCommand(cmd)
        return d

    def upload_data(self, data):
        """
            Uploads data to email server returns deferred that will return with the imap uid
            """
        data_hash = hash(data)
        if data_hash in self.current_uploads:
            d = Deferred()
            self.current_uploads[data_hash].append(d)
            return d

        if self.hash_database.hash_in_list(data_hash):
            print "Data hash is in the database; not uploading"
            return succeed(data_hash)

        else:
            d = Deferred()
            self.current_uploads[data_hash] = [d]
            id = "EMS Data ID: %s" % data_hash
            connection_deferred = self.smtp_connection.send_email(self.email_address, self.email_address, id, id, [["raw_ems", "ems.dat", data] ])

            connection_deferred.addCallback(self.upload_success, data_hash)
            connection_deferred.addErrback(self.upload_error, data_hash)
            connection_deferred.addBoth(self.notify_uploaders, data_hash)

        return d

    def notify_uploaders(self, result, data_hash):
        for waitingDeferred in self.current_uploads.pop(data_hash):
            # if r is a Failure, this is equivalent to calling .errback with
            # that Failure.
            waitingDeferred.callback(result)

    def upload_success(self, result, data_hash):

        # add to hash table
        self.hash_database.add_hash(data_hash)

        # immediatly searching doesn't seem to work so search on data retrieval
        return data_hash

    def upload_error(self, error, data_hash):
        # upload error
        log.msg("Erroring uploading file")
        log.err(error)
        return error # send error to uploader

    def download_data(self, data_hash):
        """
            Downloads data from the email server returns a deferred that will return with the data
            """
        d = Deferred()
        if data_hash in self.current_downloads:
            self.current_downloads[data_hash].append(d)
            return d

        if not self.hash_database.hash_in_list(data_hash):
            print "Data Hash has never been uploaded..."
            raise IOError("No such data hash exists")

        else:
            self.current_downloads[data_hash] = [d]
            id = "EMS Data ID: %s" % data_hash
            connection_deferred = self.imap_connection.search("SUBJECT", "\"EMS Data ID: %s\"" % data_hash, uid = False)
            connection_deferred.addCallback(self.process_download_uid)
            connection_deferred.addErrback(self.download_error, data_hash)
            connection_deferred.addBoth(self.notify_downloaders, data_hash)
            return d

        return d

    def process_download_uid(self, id):
        if len(id) == 0:
            raise IOError("Hash not found, however database indicates it was uploaded")
        d = self.imap_connection.fetchMessage(id[-1])
        d.addCallback(self.process_download_attachment, id[-1])
        return d

    def process_download_attachment(self, data, id):
        email_text = data[id]["RFC822"]
        msg = email.message_from_string(email_text)
        for part in msg.walk():
            type = part.get_content_type()
            print repr(type)
            if "raw_ems" in type:
                log.msg("Found Payload")
                return part.get_payload(decode = True)

        log.msg("No attachment found")
        raise IOError("Data not found")

    def download_error(self, error, data_hash):
        log.msg("Error downloading file")
        log.err(error)
        return error

    def notify_downloaders(self, result, data_hash):
        for waitingDeferred in self.current_downloads.pop(data_hash):
            # if r is a Failure, this is equivalent to calling .errback with
            # that Failure.
            waitingDeferred.callback(result)

    def delete_data(self, data_hash):
        if not self.hash_database.hash_in_list(data_hash):
            raise IOError("No such data hash uploaded")

        else:
            # delete it to prevent anyone from trying to download it while it is being deleted
            self.hash_database.delete_hash(data_hash)
            d = self.imap_connection.search("SUBJECT", "\"EMS Data ID: %s\"" % data_hash, uid = False)
            d.addCallback(self.delete_message)
            d.addErrback(self.deletion_error, data_hash)
            return d

    def deletion_error(self, error, data_hash):
        print "Deletion Error"
        log.err(error)
        # restore hash to database
        self.hash_database.add_hash(data_hash)

        raise IOError("Couldn't delete message hash")

    def delete_message(self, id):
        if len(id) == 0:
            raise IOError("Hash not found, however database indicates it was uploaded")
        d = self.imap_connection.setFlags(id[-1], ["\\Deleted"])
        d.addCallback(lambda result: self.imap_connection.expunge())
        return d

## Main Code ##

if __name__ == "__main__":

    def deleted_email(result):
        print "Deleted the email succesfully"
        print "====Result===="
        print result
        print "====Result===="
        print "Quiting..."
        os._exit(0)

    def error_deleting(error):
        print "There was an error deleting the email"
        error.printTraceback()
        print "Quiting..."
        os._exit(0)

    def retrieved_data(result, ms, hash):
        print "Retrieved data"
        print "=====Data===="
        print result
        print "Deleting email"

        d = ms.delete_data(hash)
        d.addCallback(deleted_email)
        d.addErrback(error_deleting)

        return d

    def email_retrieval_error(error):
        print "There was an error retrieving the email"
        error.printTraceback()
        print "Quiting..."
        os._exit(0)

    def sent_email(hash, ms):
        print "Sent email"
        print "Waiting 3 minutes to make sure it isn't a simple delay with the email being relayed"
        time.sleep(3 * 60)
        print "Downloading Data..."
        d = ms.download_data(hash)
        d.addCallback(retrieved_data, ms, hash)
        d.addErrback(email_retrieval_error)

        return d

    def email_sending_error(error):
        print "There was an error sending the email"
        error.printTraceback()
        print "Quiting..."
        os._exit(0)

    def mail_server_created(ms):
        # created mail server
        print "Created mail server"
        print "Sending email"
        d = ms.upload_data("this is the attachment data I am sending to my email account")
        d.addCallback(sent_email, ms)
        d.addErrback(email_sending_error)

        return d

    def mail_server_error(error):
        print "Error creating mail server"
        error.printTraceback()
        print "Quiting..."
        os._exit(0)

    # create mail server object
    print "Creating mail server"
    d = createMailServer("user@gmail.com", "password", "smtp.gmail.com:587", "imap.gmail.com:993", hash_db = "testhash.db")
    d.addCallback(mail_server_created)
    d.addCallback(mail_server_error)

    from twisted.internet import reactor
    reactor.run() 
```

我在想我可能需要重新选择邮箱？我查看了 RFC3501 选择和搜索命令，没有发现任何关于这样的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:17:37.353

搜索命令适用于通过解析 Select 命令选择的整个邮件文件夹收集的数据

您必须再次选择邮件文件夹才能更新邮件条目。

除非服务器实现了 IDLE/NOOP 功能，否则搜索结果不会有新的邮件输入（同样它完全取决于邮件服务器）

# php - 使用php将表单数据传递到另一个页面

> ID：15236733
> 
> 赞同：11
> 
> 时间：2013-03-06T00:20:44.193
> 
> 标签：php, forms

我的主页上有一个表单，提交后，它会将用户带到我网站上的另一个页面。我想将输入的表单数据传递到下一页，例如：

```
<?php echo $email; ?> 
```

`$email`用户在表单中输入的电子邮件地址在哪里。我究竟如何做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-06T00:27:02.103

最好的方法是使用 POST，这是一种超文本传输​​协议[https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)

**索引.php**

```
<html>
<body>

<form action="site2.php" method="post">
Name: <input type="text" name="name">
Email: <input type="text" name="email">
<input type="submit">
</form>

</body>
</html> 
```

**站点2.php**

```
 <html>
 <body>

 Hello <?php echo $_POST["name"]; ?>!<br>
 Your mail is <?php echo $_POST["mail"]; ?>.

 </body>
 </html> 
```

**输出**

你好“名字”！

您的电子邮件是“whatyou@addonindex.com”。

# c++ - 在 MongoDB C++ 中过滤重复项

> ID：15236734
> 
> 赞同：1
> 
> 时间：2013-03-06T00:20:49.757
> 
> 标签：c++, mongodb, duplicates

我希望通过根据日期标记重复项来查找我的收藏中的所有重复项。以下是我的尝试，但我不确定如何在更新中使用 cmdResult。有什么线索吗？

```
//filter duplicates
bson::bo cmdResult;
bool ok = c.runCommand(dbcol, BSON("distinct" << "date"), cmdResult);
c.update(dbcol,Query("date"<<cmdResult<<NOT<<"_id"), BSON("$set"<<BSON("noise"<<"true")), false, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:55:49.363

“distinct”命令将返回集合中所有唯一“日期”值的列表。但是您需要的是一个多次出现的“日期”值列表。

您可以使用聚合命令获取此列表，方法是按“日期”分组并计算条目，然后匹配计数 > 1：

```
aggregate([
    { $group: { "_id": "$name", count: {$sum:1} } },
    { $match: { $gt: [ count, 1 ] } }
]) 
```

然后，您将通过在该列表中查询“日期”来更新您的集合（多：真），设置“噪声”字段：

```
update( {"name": {$in: [<list>]} },{$set: {"noise": true} }, true, false ) 
```

有关聚合的帮助，请参阅[http://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

# php - php中数组的快速排序和插入排序

> ID：15236736
> 
> 赞同：0
> 
> 时间：2013-03-06T00:21:12.557
> 
> 标签：php, mysql

```
 <?php
$db=mysql_connect  ("localhost", "root",  "") or die ('I cannot connect to the database  because: ' . mysql_error());
//-select  the database to use
$mydb=mysql_select_db("address");

$aArray = array();
$sSQL = sprintf("SELECT * FROM address1",
mysql_real_escape_string($ir['fname'])
);
$rResult = mysql_query($sSQL);
while ($aRow = mysql_fetch_assoc($rResult))
{
$aArray[] = $aRow;
}
//print_r($aArray);
 echo"<br>";
  echo"<br>";
  echo"<br>";

$unsorted = $aArray;

function quicksort($array)
{
    if (count($array) == 0)
        return array();

    $pivot = $array[0];
    $left = $right = array();

    for ($i = 1; $i < count($array); $i++) {
        if ($array[$i] < $pivot)
            $left[] = $array[$i];
        else
            $right[] = $array[$i];
    }

    return array_merge(quicksort($left), array($pivot), quicksort($right));
}

$sorted = quicksort($unsorted);

print_r($sorted);
?> 
```

我正在尝试从 MySQL 数据库（2500 行数据）中提取一些数据，然后将该数据存储到一个数组中，然后对该数组进行快速排序。我不知道我的方法是否错误，因此将不胜感激。到目前为止，我不断收到错误消息：

> 致命错误：达到“100”的最大函数嵌套级别，正在中止！在第 25 行的 C:\wamp\www\koolbi\heapsearch.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:23:56.383

我会将评论总结为答案以供将来参考。最好的解决方案是在 MySQL 查询中对结果进行排序；在这种情况下`SELECT * FROM address1 ORDER BY [your field] ASC|DESC`；其中 ASC|DESC 将选择订单。有关 MySQL 排序的更多信息，请查看[此](http://www.w3schools.com/php/php_mysql_order_by.asp)文档或[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)。

同样，正如 Mark Ba​​ker 所说，如果您需要在 PHP 中执行此操作，请使用内置函数。大多数语言的内置函数在他们所做的事情上都会非常有效（事实上我相信大多数 PHP 都是用 C 原生编写的），这使得它们比你自己编写的任何东西都要快得多。

当然，如果这是您需要实施快速排序算法的学校作业，您可能应该查看[这个社区维护的解释](http://en.wikipedia.org/wiki/Quicksort)。

# jquery - 每次之后 标签插入一个div

> ID：15236741
> 
> 赞同：0
> 
> 时间：2013-03-06T00:21:41.250
> 
> 标签：jquery, html, css

我想在每个`<p>`标签之后插入一个 div，当然是用 id 定义的。

使用*jQuery*很容易使用[insertAfter](http://api.jquery.com/insertAfter/ "插入之后")，如下所示：

```
$('#id').insertAfter('p'); but how about using css? 
```

在选择器可以提供帮助*后*，我看不到 css 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T00:24:32.420

CSS3 标准中肯定有 :after 选择器。但是 CSS 用于样式。插入 DOM 元素是通过脚本完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:26:20.807

您可以插入内容（但正如 David Thomas 指出的那样，它不能通过附加元素来改变 DOM 结构）。不幸的是，对于您的要求，此内容会自动转义，并且这种方法实际上是为了解决/创建不同的问题。

拿这个 HTML+CSS：

```
<p>A P element</p>
<style>
p:after
{
  content:"<div>A DIV element</div>";
}
</style> 
```

产生这个：

```
A P element<div>A DIV element</div> 
```

（[演示](http://jsfiddle.net/sperske/Mzder/)）

# json - Python GAE：仅在生产服务器上使用 json.loads 引发 ValueError(Unpaired high surrogate)

> ID：15236742
> 
> 赞同：2
> 
> 时间：2013-03-06T00:21:47.713
> 
> 标签：json, google-app-engine, python-2.7, urlfetch

在使用 Python 的 GAE 上，我使用 urlfetch 从 Flickr 获取 json 字符串。当我尝试在生产服务器上使用 json.loads 加载该字符串时，抛出异常“raised ValueError(Unpaired high surrogate)”。

当我尝试在开发控制台中 json.loads 字符串时，它会按预期加载到字典中（见下文）。我已经使用相同的代码从 Flickr 成功加载了其他几个 json 字符串。下面的 json 字符串有些内容仅在生产服务器上引发 ValueError 异常。

```
import json

s = """{"photo":{"id":"191019103", "secret":"d7a8bb95bc", "server":"72", "farm":1, "dateuploaded":"1153079847", "isfavorite":0, "license":"1", "safety_level":"0", "rotation":0, "originalsecret":"d7a8bb95bc", "originalformat":"jpg", "owner":{"nsid":"13968020@N00", "username":"\ud800dc80 jgraham", "realname":"", "location":"", "iconserver":"38", "iconfarm":1}, "title":{"_content":"By the Year 2000 All Our Food Will be in the Form of Tiny Pills"}, "description":{"_content":""}, "visibility":{"ispublic":1, "isfriend":0, "isfamily":0}, "dates":{"posted":"1153079847", "taken":"2006-07-15 14:31:16", "takengranularity":"0", "lastupdate":"1282690106"}, "views":"984", "editability":{"cancomment":0, "canaddmeta":0}, "publiceditability":{"cancomment":1, "canaddmeta":0}, "usage":{"candownload":1, "canblog":0, "canprint":0, "canshare":1}, "comments":{"_content":"18"}, "notes":{"note":[]}, "people":{"haspeople":0}, "tags":{"tag":[{"id":"1207251-191019103-2909", "author":"13968020@N00", "raw":"Birmingham", "_content":"birmingham", "machine_tag":0}, {"id":"1207251-191019103-77552", "author":"13968020@N00", "raw":"Bullring", "_content":"bullring", "machine_tag":0}, {"id":"1207251-191019103-463", "author":"13968020@N00", "raw":"Abstract", "_content":"abstract", "machine_tag":0}, {"id":"1207251-191019103-1174", "author":"13968020@N00", "raw":"Architecture", "_content":"architecture", "machine_tag":0}, {"id":"1207251-191019103-141", "author":"13968020@N00", "raw":"Blue", "_content":"blue", "machine_tag":0}, {"id":"1207251-191019103-2194948", "author":"13968020@N00", "raw":"i500", "_content":"i500", "machine_tag":0}, {"id":"1207251-191019103-11820", "author":"13968020@N00", "raw":"Explore", "_content":"explore", "machine_tag":0}, {"id":"1207251-191019103-3254511", "author":"13968020@N00", "raw":"utata_feature", "_content":"utatafeature", "machine_tag":0}]}, "urls":{"url":[{"type":"photopage", "_content":"http:\/\/www.flickr.com\/photos\/jgraham\/191019103\/"}]}, "media":"photo"}, "stat":"ok"}"""

print json.loads(s) #prints dict 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T15:00:10.270

sudo pip install simplejson==3.6.5

```
import simplejson
simplejson.loads('{"":"\\ud800"}') 
```

我对低代理（\udfb6）有同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T19:29:47.470

此问题已针对 Python 2.7.7 及更高版本修复。

[http://bugs.python.org/issue11489](http://bugs.python.org/issue11489)

[https://hg.python.org/cpython/raw-file/v2.7.7/Misc/NEWS](https://hg.python.org/cpython/raw-file/v2.7.7/Misc/NEWS)

但是，截至 2016 年 3 月 11 日，Google App Engine 正在生产中运行 Python 2.7.5，它没有 json 模块的补丁 11489。

我就这个问题与 GAE 支持团队进行了交谈，他们提出了一个 Google Public Issue Tracker：

[https://code.google.com/p/googleappengine/issues/detail?id=12823](https://code.google.com/p/googleappengine/issues/detail?id=12823)

与此同时，按照[mihaicc的建议，使用](https://stackoverflow.com/users/648904/mihaicc)[simplejson](https://pypi.python.org/pypi/simplejson/)模块而不是标准 json 模块，看起来是最好的解决方案。我测试了 simplejson 版本 3.8.2，它都可以在 GAE 上运行并且没有产生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T22:57:07.030

如果您有一个每行一条记录的大 json 文件，并且不介意遗漏某些行，则可以忽略这些行。

```
grep -v "\\\\ud" file.json > file2.json 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T22:54:54.857

GAE Standard 的 Python 2 运行时[在 2017 年 6 月从 2.7.5 迁移到 2.7.12](https://cloud.google.com/blog/products/gcp/enhancing-the-python-experience-on-app-engine)，因此这应该不再是问题。您可以在[https://shell-hrd.appspot.com/](https://shell-hrd.appspot.com/)上进行测试：

```
Google App Engine/1.9.86
Python 2.7.12 (default, Jun 12 2019, 11:33:04) 
[GCC 4.2.1 Compatible Clang google3-trunk (trunk r361749)]

>>> import json
>>> json.loads('{"":"\\ud800"}')
{u'': u'\ud800'} 
```

# windows-phone-8 - Windows Phone 模拟器需要缺少 Hyper-V

> ID：15236746
> 
> 赞同：11
> 
> 时间：2013-03-06T00:22:38.347
> 
> 标签：windows-phone-8, hyper-v, windows-phone-8-emulator

我是 Windows Phone 8 的初学者，我安装了 Windows Phone 8 SDK，当我启动模拟器时出现此错误消息

> “Windows Phone 模拟器需要 Hyper-V。您的 PC 缺少运行 Hyper-V 所需的以下先决条件：Windows 8 Professional（64 位）”

我的笔记本电脑上有 Windows 8 Professional（64 位）操作系统，我在“打开/关闭某些 Windows 功能”中查找，发现 Hyper-V 丢失，我进入 BIOS 但没有结果。

处理器类型 Intel Core i7-3630，支持 SLAT。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T21:45:22.783

假设您有 SLAT 支持，您使用的是 Windows 8 Professional（64 位），并且您在 BIOS 中启用了虚拟化......

如何启用 Hyper-V：

1.  删除 VMware、VirtualBox 或任何其他虚拟化软件的所有实例。

2.  转到控制面板（从桌面视图右键单击左下角）

3.  选择程序

4.  选择“打开和关闭 Windows 功能”

5.  确保选中 Hyper-V 框并点击 OK。

如果所有这些事情都正确完成，Hyper-V 应该已启用并正常工作。

# java - 启动Android需要一些指导线

> ID：15236748
> 
> 赞同：0
> 
> 时间：2013-03-06T00:22:58.360
> 
> 标签：java, android, database, wcf, business-intelligence

我在这里寻求您的帮助我是软件开发人员我已经在 ASP.NET、Silverlight、WPF、WCF 服务、SQL 等多种技术中开发业务应用程序一段时间了，基本上是 Microsoft 技术这是我的背景，我最近有开始进入 Android\Java，我正在寻找一些关于在哪里投入时间的指南（最佳实践），这样我就可以尽可能快地学习并使用我工作以来已经拥有的大部分知识这是在我的工作时间之后，时间不多:(

我的目标是在 Android 中开发商业应用程序和游戏：

*   **服务器通信**

    1.  我可以利用我拥有的 WCF 服务知识并使用它们吗？有什么替代方案？

    2.  SOAP 还是 REST？

    3.  JSON 还是 XML？

    4.  安全 SSL？我买不起证书什么是最好的选择？加密够吗？

*   **数据存储**

    1.  推荐使用数据库引擎？

    2.  文件 -> 加密？

*   **发展**

    1.  我一直使用 Eclipse 自带的 Android SDK (ADT Bundle) 作为 IDE 推荐？

其他建议更受欢迎：D

非常感谢您抽出宝贵的时间，很抱歉发了这么长的帖子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:35:19.320

阅读有关数据库的 SQLite，它类似于您必须使用的 sql 数据库。ADT 捆绑包很好。

阅读 Android 开发者指南：http: [//developer.android.com](http://developer.android.com)

这应该是一个很好的起点。

# hibernate - Apache derby in-memory db schema dump with Hibernate 4+

> ID：15236750
> 
> 赞同：1
> 
> 时间：2013-03-06T00:23:20.160
> 
> 标签：hibernate, jpa, schema, derby

我在单元测试中使用 Apache Derby 10.9.x 和 Hibernate Entitymanager 4.1.9.Final。Derby db 模式是从 JPA 注释实体生成的。只有一个 persistence.xml 配置文件。我想在单元测试期间/之前/之后转储生成的 Derby db 模式。这样做的程序化方式是什么？

解决方案：

```
 // should not be required because Hibernate already started Derby:
    //Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();

    try (Connection conn = DriverManager.getConnection ("jdbc:derby:memory:unit-testing;")) {
        String cat = null;
        String schema = "ROOT";

        DatabaseMetaData md = conn.getMetaData();
        ResultSet rs = md.getTableTypes();
        ResultSetUtils.dump(rs);
        rs = md.getTables(cat, schema, null, new String[]{"TABLE"});
        ResultSetUtils.dump(rs);
        rs = md.getColumns(cat, schema, null, null);
        ResultSetUtils.dump(rs);
    } 
```

公共类 ResultSetUtils {

```
private static final Logger logger = Logger.getLogger(ResultSetUtils.class.getName());
private static final String COL_SEPARATOR = ";";

public static int getColForLabel(ResultSet rs, String labelname) throws SQLException {
    ResultSetMetaData rsmd = rs.getMetaData();

    for (int i = 1; i <= rsmd.getColumnCount(); i++) {
        if (labelname.equals(rsmd.getColumnLabel(i))) {
            return i;
        }
    }

    throw new SQLException("Invalid label name " + labelname);
}

public static void dump(ResultSet rs) throws SQLException {

    // the order of the rows in a cursor
    // are implementation dependent unless you use the SQL ORDER statement
    ResultSetMetaData meta = rs.getMetaData();
    int colmax = meta.getColumnCount();
    int i;
    Object o;

    StringBuilder sb = new StringBuilder(512);
    for (i = 0; i < colmax; ++i) {
        if(i>0) {
            sb.append(COL_SEPARATOR);
        }
        String s = meta.getColumnName(i + 1);
        sb.append((s == null) ? "NULL" : s);
        s = meta.getColumnTypeName(i + 1);
        sb.append((s == null) ? "(NULL)" : "("+s+")");
    }
    logger.info(sb.toString());

    // the result set is a cursor into the data.  You can only
    // point to one row at a time
    // assume we are pointing to BEFORE the first row
    // rs.next() points to next row and returns true
    // or false if there is no next row, which breaks the loop
    for (; rs.next();) {
        sb = new StringBuilder(512);
        for (i = 0; i < colmax; ++i) {
            if(i>0) {
                sb.append(COL_SEPARATOR);
            }
            o = rs.getObject(i + 1);    // Is SQL the first column is indexed
            sb.append((o == null) ? "NULL" : o.toString());
        }

        logger.info(sb.toString());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:47:36.177

访问模式的编程方式是使用 DatabaseMetaData 类：[http ://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)

从 getTables() 方法开始，打印出返回的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T00:22:42.957

pom.xml：

```
<dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derbytools</artifactId>
    <version>10.9.1.0</version>
</dependency> 
```

代码：

```
new dblook(new String[]{"-d", "jdbc:derby:memory:unit-testing;", "-verbose"}); 
```

没有参数来打印帮助：

```
new dblook(new String[]{}); 
```

结果是：

```
-- Timestamp: 2013-03-09 00:19:49.733
-- Source database is: memory
-- Connection URL is: jdbc:derby:memory:unit-testing;
-- appendLogs: false

-- ----------------------------------------------
-- DDL Statements for schemas
-- ----------------------------------------------

CREATE SCHEMA "ROOT";

-- ----------------------------------------------
-- DDL Statements for tables
-- ----------------------------------------------

CREATE TABLE "ROOT"."BLOG" ("DTYPE" VARCHAR(31) NOT NULL, "ID" BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), "BODY" VARCHAR(255), "CREATEDAT" TIMESTAMP, "RAWDATA" BLOB(2147483647), "SUBJECT" VARCHAR(255), "SENDER" VARCHAR(255));

-- ----------------------------------------------
-- DDL Statements for keys
-- ----------------------------------------------

-- primary/unique
ALTER TABLE "ROOT"."BLOG" ADD CONSTRAINT "SQL130309001949220" PRIMARY KEY ("ID"); 
```

JDBC 元数据操作似乎缺少一些东西，如索引、触发器等。

# javascript - Mouseleave 不适用于 .each 和延迟？

> ID：15236753
> 
> 赞同：0
> 
> 时间：2013-03-06T00:23:27.167
> 
> 标签：javascript, jquery, mouseenter, mouseleave

我编写了一些代码来更改 a 标签内每个字母的颜色，并在悬停链接时显示一个弹出窗口。

mouseenter 功能可以正常工作，但是当您将鼠标悬停在链接上时，我想做与原始更改相反的操作（因此改回原始颜色）。

我将延迟从它的工作中移除，但效果并不好。我很困惑为什么这在输入时有效但在休假时无效？

另一件事要提到的是，当它确实将颜色变回灰色时，mouseenter 功能不再起作用，这有点烦人。

这是该网站的链接，因此您可以看到我在说什么，该链接是底部的链接，上面写着“触摸营销”

[http://dev.touch-akl.com/colin/](http://dev.touch-akl.com/colin/)

请问有什么帮助吗？

我的 jQuery 看起来像这样

```
$('#copyright a').mouseenter(function(){

    var $letters = $(this).find('span'),
    $sayhi = $(this).find('img'),
    delay = 0;

    $sayhi.animate({top:-30, 'opacity':1}, 500, "easeInOutExpo");

    $letters.each(function(){

        $(this).delay(delay).queue(function(){
            $(this).css({'color':'#333'});
        });

        delay+=35;      

    }); // end each

}).mouseleave(function(){

    var $letters = $(this).find('span'),
    delay = 0;

    $letters.each(function(){

        $(this).delay(delay).queue(function(){
            $(this).css({'color':'#333'});
        }); 

        delay+=35;      

    });

}); // end leave 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:36:01.687

jQuery`.queue()`使用起来很复杂，所以除非你需要与 jQuery 动画队列中的其他东西交互，否则像这样使用它通常要简单得多`setTimeout()`。您还应该创建`delay`一个局部变量，因此它不是隐式全局变量。

```
}).mouseleave(function(){
    var delay = 0;
    $(this).find('span').each(function(){
        var item = $(this);

        setTimeout(function(){
            item.css({'color':'#333'});
        }, delay); 

        delay+=35;      
    });
}); // end leave 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T00:36:12.140

很可能问题出在 mouseenter 和 mouseleave 中的函数创建的闭包上。它们都引用相同的**延迟**变量。您可能想将它们分开：

```
delayEnter = 0;
delayLeave = 0; 
```

# c - 为什么 strtok() 在 C 中拆分单词并将单词限制为 7 个字符？

> ID：15236755
> 
> 赞同：2
> 
> 时间：2013-03-06T00:23:34.417
> 
> 标签：c

在过去的两天里，我一直在到处寻找，但无法弄清楚。这是输出的一个小样本：

它应该是“并找到乐趣”：

和

F

工业

一个

p

休闲

=================

长度计数

=================

1 9054

2 10102

3 9336

4 5944

5 3311

6 1656

7 1292

=================

平均 2.86

=================

下面是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include<string.h>

#define DELIM " ,.;:'\"&!? -_\n\t\0"

int process(int *count, char *buffer);
int printOut(int *count);

int main() {
    char *buffer = (char *) calloc(1, 50*sizeof(char*));
    int *count =(int*) calloc(50, 50*sizeof(long));

    while (fgets(buffer, sizeof buffer, stdin)) {
        process(count, buffer);
    }

    printOut(count);
    free(count);
    return 0;
}

int process(int *count, char *buffer) {
    int word_len=0, i;
    char *pch;
    pch = strtok(buffer, DELIM);
    while (pch != NULL) {
        for(i=0; pch[i] != '\0'; i++) {
                word_len++;
        }
        count[word_len]++;
        word_len=0;
        printf("%s\n", pch);
        pch = strtok(NULL, DELIM);
    }
    return 0;
}

int printOut(int *count) {
    int i;
    double num=0;
    double total=0;
    double average=0;
    printf("================\n");
    printf("len  count\n");
    printf("================\n");
    for(i=0;i<50;i++){
        if(count[i]!=0){
            num=count[i]+num;
            total=total+(count[i]*i);
            printf("%d   %d\n",i,count[i]);
        }
    }
    average = total/num;
    printf("================\n");
    printf("average %.2f\n", average);
    printf("================\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:33:43.220

这是错误的：

```
 char *buffer = (char *) calloc(1, 50*sizeof(char*)); 
```

它应该是：

```
 sizeof(char) // or since this is always 1: 'calloc(1, 50)' 
```

但真正的问题在这里：

```
fgets(buffer, sizeof buffer, stdin); 
```

Sizeof 缓冲区是 4 （或任何 sizeof 指针），因为它是一个指针，你需要这样做：

```
fgets(buffer, 50, stdin); 
```

此外，`sizeof(long)`在 calloc 调用中`count`也不是重点，`sizeof(int)`否则您可能需要分配比您打算分配更多的字节（取决于体系结构）。所以这可以是：

```
int *count =(int*) calloc(50, sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:39:51.937

这个反例可能会有所帮助：

```
/*
 * Sample output:
 *   word= and, length(word)= 3
 *   word= find, length(word)= 4
 *   word= a, length(word)= 1
 *   word= pleasure, length(word)= 8
 *   Done.
 */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define BUF_LEN 50
#define DELIM " ,.;:'\"&!? -_\n\t\0"

void process(int *count, char *buffer);

int main() {
  char buffer[BUF_LEN];
  int count[BUF_LEN];

  strcpy (buffer, "and find a pleasure");
  process(count, buffer);

  printf ("Done.\n");
  return 0;
}

void process(int *count, char *buffer) {
  char *pch = strtok(buffer, DELIM);
  while (pch) {
    printf ("word= %s, length(word)= %d\n",
      pch, strlen(pch));
    pch = strtok (NULL, DELIM);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:37:21.193

```
int main() {
    char *buffer =  calloc(50, 1);
    int  *count  =  calloc(50, sizeof(int));

    while (fgets(buffer, 50, stdin)) {
        process(count, buffer);
    } 
```

您的原始 fgets 仅“读取” sizeof 指针：4 或 8 字节，而不是输入缓冲区或 50 char ，这就是您想要的。

# sql - 限制联合查询中的列

> ID：15236758
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:14.977
> 
> 标签：sql

我有一个联合查询，它从两个不同的请求中检索信息，比较它们并根据第三行的比较显示 YES、NO、NA。

**下面是我的 SQL 查询**

```
SELECT CAST(RR.reqestno AS VARCHAR(MAX)) reqestno,
CAST(RR.receiveddate AS VARCHAR(MAX)) AS receiveddate,
CAST(RR.rptcomments AS VARCHAR(MAX)) AS rptcomments,
CAST(RR.reportfrequency AS VARCHAR(MAX)) AS reportfrequency,
CAST(RR.schedule AS VARCHAR(MAX)) AS schedule,
CAST(RR.schedulebasedon AS VARCHAR(MAX)) AS schedulebasedon,
CAST(RR.clmsrvdtfrom AS VARCHAR(MAX)) AS clmsrvdtfrom,
CAST(RR.clmsrvdtthru AS VARCHAR(MAX)) AS clmsrvdtthru,
CAST(RR.clmpddtfrom AS VARCHAR(MAX)) AS clmpddtfrom,
CAST(RR.clmpddtthru AS VARCHAR(MAX)) AS clmpddtthru,
CAST(RR.customer AS VARCHAR(MAX)) AS customer
from REPORT_REQUEST RR 
where RR.reqestno = xxxxxx
UNION ALL
SELECT CAST(RR.reqestno AS VARCHAR(MAX)) reqestno,
CAST(RR.receiveddate AS VARCHAR(MAX)) AS receiveddate,
CAST(RR.rptcomments AS VARCHAR(MAX)) AS rptcomments,
CAST(RR.reportfrequency AS VARCHAR(MAX)) AS reportfrequency,
CAST(RR.schedule AS VARCHAR(MAX)) AS schedule,
CAST(RR.schedulebasedon AS VARCHAR(MAX)) AS schedulebasedon,
CAST(RR.clmsrvdtfrom AS VARCHAR(MAX)) AS clmsrvdtfrom,
CAST(RR.clmsrvdtthru AS VARCHAR(MAX)) AS clmsrvdtthru,
CAST(RR.clmpddtfrom AS VARCHAR(MAX)) AS clmpddtfrom,
CAST(RR.clmpddtthru AS VARCHAR(MAX)) AS clmpddtthru,
CAST(RR.customer AS VARCHAR(MAX)) AS customer
from REPORT_REQUEST RR 
where RR.reqestno = yyyyyy
UNION ALL
SELECT 
      CASE WHEN A.reqestno = B.reqestno THEN 'Yes' ELSE 'No'  END as reqestno,
      CASE WHEN A.receiveddate = B.receiveddate THEN 'Yes' ELSE 'No' END as receiveddate,
      CASE  WHEN A.rptcomments is null and B.rptcomments is null then 'NA' WHEN A.rptcomments = B.rptcomments THEN 'Yes' ELSE 'No' END rptcomments,
      CASE WHEN A.reportfrequency = B.reportfrequency THEN 'Yes' ELSE 'No' END as reportfrequency,
      CASE WHEN A.schedule = 'NONE' and B.schedule = 'NONE' THEN 'NA'WHEN A.schedule = B.schedule THEN 'Yes' ELSE 'No' END as schedule,
      CASE WHEN A.schedulebasedon = 'NONE' and B.schedulebasedon = 'NONE' THEN 'NA' WHEN A.schedulebasedon = B.schedulebasedon THEN 'Yes' ELSE 'No' END as schedulebasedon,
      CASE WHEN A.clmsrvdtfrom is null and B.clmsrvdtfrom is Null Then 'NA' WHEN A.clmsrvdtfrom = B.clmsrvdtfrom THEN 'Yes' ELSE 'No' END as clmsrvdtfrom,
      CASE WHEN A.clmsrvdtthru is null and B.clmsrvdtthru is null then 'NA' WHEN A.clmsrvdtthru = B.clmsrvdtthru THEN 'Yes' ELSE 'No' END as clmsrvdtthru,
      CASE WHEN A.clmpddtfrom is Null and B.clmpddtfrom is null then 'NA' WHEN A.clmpddtfrom = B.clmpddtfrom THEN 'Yes' ELSE 'No' END as clmpddtfrom,
      CASE WHEN A.clmpddtthru is null and B.clmpddtthru is null then 'NA' WHEN A.clmpddtthru = B.clmpddtthru THEN 'Yes' ELSE 'No' END as clmpddtthru,
      CASE WHEN A.customer = B.customer THEN 'Yes' ELSE 'No' END as customer

FROM
            (SELECT  reqestno,receiveddate,rptcomments,reportfrequency,schedule,schedulebasedon,clmsrvdtfrom,
clmsrvdtthru,clmpddtfrom,clmpddtthru,customer  FROM REPORT_REQUEST WHERE reqestno = xxxxxx) AS A
INNER JOIN
                 (SELECT  reqestno,receiveddate,rptcomments,reportfrequency,schedule,schedulebasedon,clmsrvdtfrom,
clmsrvdtthru,clmpddtfrom,clmpddtthru,customer  FROM REPORT_REQUEST WHERE reqestno = yyyyyy) AS B
      ON 1 = 1 
```

**问题** 我应该如何编辑上述查询，使其在比较前两行后仅显示第三行中只有值为“NO”的列，并以某种方式隐藏其他列，只要比较返回 YES 或 NA。我想要查看所有 3 行（2 行数据 + 1 行比较

需要帮助，请提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:13:10.673

您可能希望将您的`ON`表达式更改`INNER JOIN`为由 连接的“否”条件`and`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:16:42.467

基本上，您将 UNION 查询放入子查询并对其进行限制。我不会复制你的怪物查询——请阅读 SSCCE（[简短、独立、正确的示例](http://sscce.org/)）——但是：

```
 SELECT r.*
   FROM (SELECT Value1, Value2
           FROM SomeWhere
          WHERE SomeColumn = 234
         UNION
         SELECT Value1, Value2
           FROM ElseWhere
          WHERE ElseColumn = 432
        ) AS r
  WHERE Value1 > 37 OR Value2 < 91 
```

您可能还需要对 OLAP 代码做一些事情；您提到有问题的“第三行”-SQL 是一种基于集合的语言，并且排序不自然（但可以做到）。

# configuration - 在 Linux 服务器上配置 Mule 端口

> ID：15236760
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:16.817
> 
> 标签：configuration, port, mule

对于那些在 linux 上运行 Mule 的人来说，这可能是一个非常简单的问题。我在 Windows 8 机器上开发了 Mule ESB 3.3 应用程序，并通过调用我的应用程序进行测试以获得所需的结果

```
 http://localhost:8081/myFlowPath 
```

现在，我已成功将相同的应用程序部署到防火墙后面的 linux 机器上，但无法在[http://linuxDomainname.com:8081/myFlowPath](http://linuxDomainname.com:8081/myFlowPath)访问它。连接被拒绝。我在配置 mule 以在 linux 上运行时遗漏了什么吗？

我们正在独立运行 Mule CE 3.3 作为 linux 恶魔。我是否必须在 wrapper.conf 中明确指定端口或主机名之类的内容？请告诉我。非常感谢任何帮助。

谢谢，珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-30T18:03:25.960

您必须将 HTTP 侦听器主机配置为 0.0.0.0（从 localhost 更改）。检查 HOME_MULE/logs/mule.log 或 webservice.log 中的 log mule 部署应用后，您必须在 HOME_MULE/apps/nameofyourapp/webservice.xml 中拥有（或文件 mule-deploy.properties 中的“config.resources”中定义的文件名）这个：

它对我有用。我在 Ubuntu 16.04 LTS、Mule ESB 3.8.1 上部署我的 mule 应用程序。

如果这不起作用，则意味着您在这台机器（或防火墙）上阻止了该端口（8081）。检查 iptables 或其他您的第 3 方防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-23T16:39:58.407

Mule 使用应用程序属性轻松处理它。为每个环境创建属性文件`local|develop|prod`。

**本地属性**

api.host=0.0.0.0

api.port=8080

**产品属性**

api.host=127.0.0.1

api.port=9090

[在https://docs.mulesoft.com/mule-runtime/3.9/configuring-properties](https://docs.mulesoft.com/mule-runtime/3.9/configuring-properties)阅读有关 mule 服务配置管理的更多信息。

# javascript - 更新形状属性时的对象一致性

> ID：15236761
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:20.823
> 
> 标签：javascript, d3.js

我对 D3 和 Javascript 非常陌生，所以如果我的代码看起来有点丑陋或组织不佳，请原谅我。

我一直在研究一个利用 3 个指标的图：x 和 y 轴，以及圆的半径作为图的数据指标。我正在读取的数据是一个二维数组，每一行是一个不同的指标，每一列是一个新的数据点。我已经成功地实现了一种通过从下拉框中选择不同的度量来动态更改圆半径的方法，但这是在无休止地解决一个非常特殊的问题之后 - 我的数据被分配到了错误的圆！

当我最初创建我的圆圈时，我首先使用 sort() 从默认半径度量（在我的代码中，它的“impactcpu”）按降序对圆圈进行排序。这样做是为了解决在较小圆圈之后绘制的较大圆圈阻碍较小圆圈的问题，因此我想先“绘制”最大的圆圈。

我能够通过首先对我的计算数据数组进行排序，然后将其分配给圆圈来解决这个问题，这保留了默认顺序。但是，我现在正尝试对我的 X 和 Y 轴做类似的事情。虽然我的下拉菜单正确地将度量值分配给圆圈，但它正在为错误的圆圈这样做。我还没有找到解决这个问题的方法，因为在分配之前对数组重新排序就像我在半径不工作时所做的那样（这是我所期望的）。关于如何确保将正确的数据点分配给正确的圆圈有什么建议吗？最好是不需要对我的其余代码进行大修的一个:)

请查看我的 jsfiddle 以了解上述情况的示例：

[http://jsfiddle.net/kingernest/YDQR4/3/](http://jsfiddle.net/kingernest/YDQR4/3/)

我最初创建圈子的示例：

```
var circles = svg.selectAll("circle")
    .data(dataset, function(d) { return d.id })
    .enter()    
    .append("circle")
    .sort(function(a, b){    //Sort by radius size, helps reduce obstruction of circles
        return d3.descending(a[14], b[14]);
    })
    .attr("cx", function(d){ //x axis is Req IO, col index 9
        return xScale(d[9]);
    })
    .attr("cy", function(d){ //y axis is Req CPU, col index 8
        return yScale(d[8]);
    })
    .attr("r", function(d){ //radius is based off Impact CPU, col 14

        console.log("Rad: " + d[14])
        return d[14] * 1.5;
    })
    .attr("class", "dataCircle") 
```

ETC

我目前如何改变我的半径：

```
function changeRad() {
     console.log(this.value); 
     var myRadData = [];
     var index = metricHash[this.value];
     var weight; //to adjust data to fit appropriately in graph
    switch(this.value) 
    {
        case "impactcpu": 
            weight = 1.5;
            break;
        case "spool": 
            weight = .0000001;    //spool is normally a very large value
            break;
        case "pji": 
            weight = 8;
            break;
        case "unnecio": 
            weight = 12;
            break;
        case "duration": 
            weight = .0002;
            break;
        default: alert("Invalid value: " + this.value); 
            break;
    }
     for(var i=0; i < dataset.length; i++)
     {         
         console.log(dataset[i][index]);
         myRadData.push(dataset[i][index] * weight);
     }

    myRadData.sort(function(a,b){return b-a});

    d3.selectAll("circle")
        .data(myRadData)
        .transition().duration(500)
        .attr("r", function(d){
            return d;
        });

    circles.data(dataset); //reassign old data set (with all data values)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:07:58.747

我不确定我是否掌握了你的整个代码（它很长），但我认为解决方案如下：

1 - 最初创建圆圈时，请使用键功能。很好，你正在这样做：

```
.data(dataset, function(d) { return d.id; }) 
```

2 - 使用相同的函数为圆圈赋予 ID 属性：

```
.attr("ID", function(d) { return d.id; }) 
```

3 - 然后，当您需要单独修改特定圆圈时，您可以像这样选择它：

```
svg.select('#' + myCircleID).attr('blahblah', somevalue) 
```

我还注意到您在构建 myRadData 数组时丢失了 ID 属性。这将阻止代码将它们加入正确的圈子。由于您在开始时有一个 ID 属性，因此您最好始终使用键功能，而不是尝试使用排序来排列。

如果您想要更具体的答案，我认为您需要将示例归结为重现问题的最简单形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:37:08.473

我在您的代码中看到了两件事：

1.  数据绑定上的键功能不一致 - 您在初始创建圆（`.data(dataset, function(d) { return d.id })`）时正确使用它，但在更新它们时不要引用它，在更新上添加相同的键将确保您更新相同的元素。

2.  DOM 排序 - 您在最初创建圈子时使用 selection.sort 似乎合乎逻辑且合适（`.sort(function(a, b){ return d3.descending(a[14], b[14]); })`）我建议将其扩展到您的更新函数，而不是重新绑定数据。

我已经对您的代码进行了这些快速更新，它似乎可以解决您的问题：http: [//jsfiddle.net/AbHfk/3/](http://jsfiddle.net/AbHfk/3/)

# android - 我应该使用 MapView 还是 MapFragment

> ID：15236762
> 
> 赞同：51
> 
> 时间：2013-03-06T00:24:26.097
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2, mapfragment

我不确定我应该使用`MapView`还是坚持使用`MapFragment`. 我的应用程序是一个应用程序，它可以找到离您最近的一组地点。我希望能够添加位置，在按下标记时显示标记的详细信息，当用户沿地图移动时，我希望能够获取地图中心的坐标并显示定义的最近位置半径。如果我继续使用，我会处于劣势还是应该在我还有机会的时候`MapFragments`切换到？`MapView`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-06T00:31:33.727

首先，很快 MapView 和 Google Maps API V1 将停止支持并且不会收到任何新的更新。很快所有的支持都会消失。

其次，现在 MapFragment 可能不太灵活，但呈现的地图，操控起来看起来要好得多。我猜它的功能会随着时间的推移而改进。

所以我肯定会继续使用 MapFragments。

**更新：** 正如@Brian White 在评论中指出的那样，今天`MapView`在**Google API V2**中有一个，当你想在片段中嵌入地图时应该使用它。这样你就可以避免在不必要的时候级联碎片。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-01-06T05:35:37.453

**MapFragment**

*   Use it if you want to add a map into Activity class (not fragment because it will create a nested fragment and it´s a mess).
*   Use SupportMapFragment if you want to support just android versions lower than v12.

**MapView**

*   Use it if you are going to add a map into a fragment. (you need to update each lifecicle to MapView).

# android - 同步和互斥

> ID：15236763
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:27.257
> 
> 标签：android, synchronization, location, ipc, mutex

有 2 个 android 应用程序：`App1`with `Process1`and `Service1`，`App2`with `Process2`and `Service2`。

还有一个应用程序`AppManager`，它只是一个名为`ManagerService`. `ManagerService`基本上做两件事：

1.  注册监听器以使用手机上的传感器
2.  在这些监听器的帮助下获取数据。*注意*：获取数据可能需要一些时间。

现在，通过定义的 AIDL，我可以绑定`Service1`和`ManagerService`绑定`Service2`. 和现在`ManagerService`都可以调用远程方法来请求在 中定义的注册侦听器，然后从 中获取保存在列表中的共享传感器数据。`Service1``Service2``A(...)``ManagerService``ManagerService`

如果现在`Service1`正在执行远程方法`A(...)`以从中获取传感器数据`ManagerService`，例如：

```
List A(...) {
    // ...
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
            0, 0, locationListener);
    // ...
    return list;
}

private final LocationListener locationListener = new LocationListener() {

    public void onLocationChanged(Location location) {
        SaveLocationToList(location);
    }
} 
```

我如何保证只有在完成上述“request-registration-updateList-getList”过程`Service2`后才会请求获取传感器数据？`Service1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:46:20.780

```
List A(...) 
{
    // ...
    synchronized(this)
   {
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
            0, 0, locationListener);
    // ...
    return list;
   }
} 
```

# mysql - Yii 数据库结构

> ID：15236764
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:29.263
> 
> 标签：mysql, database, database-design, yii

我正在为 Yii Web 应用程序设计数据库，但我不确定我做的是否正确。

```
CREATE TABLE user
(
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(128) NOT NULL,
    password VARCHAR(128) NOT NULL,
    email VARCHAR(128) NOT NULL,
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE post
(
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(128) NOT NULL,
    description TEXT NOT NULL,
    media TEXT NOT NULL,
    tag_id INTEGER NOT NULL,
    status INTEGER NOT NULL,
    create_time INTEGER,
    update_time INTEGER,
    user_id INTEGER NOT NULL,
    CONSTRAINT FK_post_user FOREIGN KEY (user_id)
        REFERENCES user (id) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE comment
(
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    content TEXT NOT NULL,
    status INTEGER NOT NULL,
    create_time INTEGER,
    user_id INTEGER NOT NULL,
    post_id INTEGER NOT NULL,
    CONSTRAINT FK_comment_post FOREIGN KEY (post_id)
        REFERENCES post (id) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE tag
(
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(128) NOT NULL,
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

问题：

1.) 在 post 表中我有 tag_id。我正在考虑将所有现有和新添加的标签存储在标签表中，然后当有人使用已经存在的标签或制作新标签以添加为 tag_id 以使用“，”发布表时。这是最好的解决方案吗？

2.) 在评论表中我有 user_id 和 post_id。我认为外键如何工作应该在评论表中设置2个外键？我试过了，但出错了。

3.）在帖子表中有媒体行。我将存储在此行位置以上传图像或嵌入来自 youtube/或任何其他来源的代码。可以只使用同一行还是应该分开使用？1 用于图像，1 用于嵌入代码？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:56:31.877

1) In case I'd use column with name `tags` instead `tag_id` where i'd keep serialized array of tag_id's from table `tags`

2) The problem i think because you tried add foreign keys with same name. Try to use

```
CONSTRAINT FK_comment_post FOREIGN KEY
CONSTRAINT FK_comment_post_2 FOREIGN KEY 
```

3) What will be if you'll decide to add another media info in post(pdf_file, or music). Add new column in table post it's not correct. i'd recommend you create additional table `postmeta` where you can create any type of content, and instead `media` use `post_text`. Like in wordpress.

# javascript - 一个大的 javascript 文件还是多个较小的文件？

> ID：15236767
> 
> 赞同：60
> 
> 时间：2013-03-06T00:24:38.180
> 
> 标签：javascript, jquery, performance, web

好的，所以我有一个合理大小的项目，我使用 jquery 主干和其他几个 javascript 库。我想知道是否应该为我的 javascript 库提供一个文件，为我的自定义代码提供另一个文件。或者一堆单独的 javascript 文件。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-06T00:27:42.397

减少 HTTP 请求通常是个好主意。所以你应该尽可能地减少文件的*数量*。

我个人的偏好是拥有三个 JavaScript 文件“组”：

1.  核心文件。包含几乎无处不在的功能和其他有用的页面初始化东西。
2.  模块文件。包含在多个地方使用但并非无处不在的代码。可以放入以提供附加功能。例如，如果您有一个处理日期输入的脚本，您可以将其作为模块文件包含在内，并将其添加到具有日期输入的页面中。
3.  特定于页面的文件。这些文件包含仅在一处使用的代码。它们被添加为单独文件而不是页面本身的一部分的唯一原因是出于缓存原因。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-06T00:26:39.187

一个大文件。当代码投入生产时，您应该缩小代码，如果它很大，则压缩它。您希望向服务器发出尽可能少的请求以提高页面性能

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-06T00:25:58.023

最好把它分开，但不要过分热心。这样您以后就可以重用您的库代码。此外，每个人都更喜欢使用单独的文件，因为它使事情更有条理。

也就是说，最好给用户一个压缩文件，这样所有的东西都可以很容易地被缓存，这也减少了页面请求的数量。例如，Rails 3 在资产管道中自动执行此操作。你可以编写一个脚本来运行你最喜欢的压缩器。但是你不应该为此牺牲代码的可读性——你可以吃蛋糕也可以吃！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-06T00:29:42.427

一个大文件或两个文件：一个小文件和一个大文件。需要明确的是，在开发过程中最好有单独的文件——也许使用类似[requireJS](http://requirejs.org/)的东西。但是当您部署它时，最好将所有内容压缩到一个文件中，以减少 HTTP 延迟和请求。

我提到了两个文件。在某些情况下，最好有一个小文件来处理“引导”操作，同时下载“大文件”——特别是如果它*真的*很大的话。这对于第一次访问特别有用，因为用户还没有缓存您的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T00:28:57.170

通常，我会尽可能少地使用，以减少对服务器的请求数量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:28:35.313

正如建议的那样，使用较小的文件很好，但是对于生产代码，您的构建过程应该包括优化。该优化的一部分应该是最小化文件大小和网络流量优化，通过组合成一个 js 文件来减少浏览器的调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T00:29:11.040

取决于您的应用程序的大小。但通常总是更好地对您的 javascript 文件进行适当的分组，以获得更好的可维护性和可重用性。

你可以使用像[RequireJS](http://requirejs.org/)这样的 JS 模块加载器来加载你的 JavaScript。至少文件将被组织起来。您可以通过确保这些文件可以缓存在用户的浏览器上来提高服务器性能，以便他们只下载一次。

# virtualbox - Vagrant“等待VM启动。这可能需要几分钟”很慢

> ID：15236768
> 
> 赞同：2
> 
> 时间：2013-03-06T00:24:49.277
> 
> 标签：virtualbox, vagrant

我正在研究 Chef 食谱，并且经常需要通过销毁 VM 并将其恢复来使用干净的盒子来测试完整的运行。但是，这意味着我在 Vagrant/VirtualBox 中收到此消息：

```
Waiting for VM to boot. This can take a few minutes. 
```

常常。我可以采取哪些步骤来加快启动速度？

我知道这是一个“意见”问题，并欢迎提出一些建议以使其更容易接受，除了将其分解为一堆小问题，例如“切换到 SSD 会使我的 VirtualBox 启动更快吗？会减少转发端口的数量让我的 VirtualBox 启动更快”等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T00:26:25.513

我会选择使用 LXC 容器而不是 VirtualBox。这为您提供更快的反馈周期。

这是对[vagrant-lxc 提供者的](https://github.com/fgrehm/vagrant-lxc)[一个很好的介绍](http://fabiorehm.com/blog/2013/04/28/lxc-provider-for-vagrant/)。

[您可以使用 LXC 容器（例如，像这个 dev-box](https://github.com/tknerr/dev-box/)）为 Vagrant / Chef 开发设置一个 VirtualBox VM 。然后获取此[示例食谱](https://github.com/tknerr/sample-toplevel-cookbook)并通过运行[ChefSpec](https://github.com/sethvargo/chefspec)单元测试`rake test`或[通过](http://kitchen.ci/)`rake integration`. 您会发现 LXC 比使用 VirtualBox（或任何其他完全虚拟化管理程序）要快得多。

除此之外：

*   是的，SSD 有很大帮助 :-)
*   使用[vagrant-cachier](https://github.com/fgrehm/vagrant-cachier)通过缓存加速其他事物的负载
*   使用最新的 Vagrant 版本，它使用 Ruby 2.0+（比 1.9.3 快得多）
*   不要总是运行完整的集成测试，有些东西已经可以通过单元测试/chefspec 捕获
*   使用 SSH 连接共享和持久连接
*   ETC...

作为另一种选择，您也可以使用[chef-runner](https://github.com/mlafeldt/chef-runner)，它明确尝试解决快速反馈问题

# php - 用我的 javascript / php 代码中的数据填充任何 url 的文本框

> ID：15236769
> 
> 赞同：0
> 
> 时间：2013-03-06T00:24:50.407
> 
> 标签：php, javascript, html, textbox

我有一个问题，但我只是举一个例子来说明我想加载任何 URL 页面，比如 facebook 登录页面，并用数据填充文本框（用户名和密码）。我想从 PHP 或 Javascript 中做到这一点。

这意味着 - 每次加载我的 php / javascript 页面时，都会显示 facebook 登录页面，并且文本框会自动填充数据

我可以这样做吗？我知道浏览器（CHROME 或 EXPLORER）会这样做，但也许只能使用浏览器而不是 PHP / JS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:28:03.883

Javascript 是不可能的，因为当 Facebook 页面加载时您无法加载 Javascript。如果您认为 iframe 浏览器将阻止一个框架中的 Javascript 在另一个框架中工作，如果它不是来自同一个域。

如果是针对 Facebook，您应该真正研究一下他们的 API。许多网站（比如这个）现在允许用户使用他们的 Facebook 登录名登录，因此 API 可能是最简单的途径。同样对于 Facebook 等主要网站，可能有一些第三方库可以提供帮助。

现在，如果 Facebook 只是一个示例，并且您需要将它用于其他一些站点，那么使用 cURL 或 SOAP 的 PHP 可能是可能的，但它可能非常棘手。您需要意识到黑客会使用类似的技术进行暴力攻击，以查找用户名和密码。因此，像 Facebook 这样的网站已经做了几件事来限制自动填写登录表单（或任何表单）的可能性。此外，对于 Facebook 等主要网站，使用这些技术可能会违反服务条款，因此您应该先检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T12:24:01.150

如果这是给你自己的，你可以在你的 bookmart 中编写 javascript:code 并在每次打开 Facebook（或其他页面）时执行它，例如

# css - 如何防止 CSS :after 伪元素与其他内容重叠？

> ID：15236773
> 
> 赞同：4
> 
> 时间：2013-03-06T00:25:56.730
> 
> 标签：css, dom, pseudo-element

我有一个缩略图库，我正在尝试使用 display:inline-block 而不是浮动来布局，以便我可以使用:after 伪通过 attr() 包含标题。布局有效，但 :after “对象”与“下方”的项目重叠。

这是我的 HTML：

```
<div id="bg">
    <div class="thumbs">
        <a href="img.png" style="background-image:url('img.png')" title="This is the outside of the house." /></a>
        <a href="img.png" style="background-image:url('img.png')" title="This is another example of a description. This is another example of a description. This is another example of a description. This is another example of a description." /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Here is yet another description." /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
        <a href="img.png" style="background-image:url('img.png')" title="Image 001" /></a>
    </div> 
```

这是我的CSS：

```
.thumbs a{
width:120px;
height:120px;
display:inline-block;
border:7px solid #303030;
box-shadow:0 1px 3px rgba(0,0,0,0.5);
border-radius:4px;
margin: 6px 6px 40px;
position:relative;
text-decoration:none;

background-position:center center;
background-repeat: no-repeat;

background-size:cover;
-moz-background-size:cover;
-webkit-background-size:cover;

vertical-align:top;
}

.thumbs a:after{
background-color: #303030;
border-radius: 7px;
bottom: -136px;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
color: #FFFFFF;
content: attr(title);
display: inline-block;
font-size: 10px;
max-width: 90px;
overflow: auto;
padding: 2px 10px;
position: relative;
text-align: center;
white-space: no-wrap;
} 
```

这是一个显示示例的小提琴：http: [//jsfiddle.net/befxe/9/](http://jsfiddle.net/befxe/9/)

如您所见，第二个描述与其下方的缩略图重叠。是否可以根据 :after 内容的大小自动将第二行“推”下（朝向屏幕底部）？我尝试将“.thumbs a”和“.thumbs a:after”设置为各种显示类型（内联块、块等），但更改定位无济于事。我还尝试将整个“a”包装在一个 div 中并更改 div 的显示类型，但这也不起作用。

:before 和 :after 之类的伪元素似乎是处理此类添加少量内容的好方法，但它们在布局方面的功能确实让我感到困惑，因为它们似乎不像其他 DOM 对象那样“工作”。（我想这是有充分理由的，因为它们并不是真正的 DOM 对象。：P）

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T18:55:12.677

如上所述：

> 它与伪元素无关。您已经玩弄了它的定位，任何其他元素都会对您提供的样式做同样的事情。除非您的图像纯粹是装饰性的（它们具有标题/描述的事实清楚地表明它们不是装饰性的），否则您应该使用图像元素而不是背景属性。

# javascript - jQuery 悬停效果在某些计算机上的 Google Chrome 中不起作用

> ID：15236777
> 
> 赞同：0
> 
> 时间：2013-03-06T00:26:15.033
> 
> 标签：javascript, jquery, google-chrome, browser

这是我正在做的事情的链接

我遇到的问题是 Chrome 浏览器导航中的鼠标悬停（悬停）效果。jquery 似乎适用于所有其他浏览器而不是 chrome。

[http://squ4reone.com/domains/ottawakaraoke/index.php](http://squ4reone.com/domains/ottawakaraoke/index.php)

但这是最重要的，我在 12 台不同的计算机上尝试过，它们都显示网站正常，只有 2 台计算机（包括客户端的）在左侧显示导航时出现问题。

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:32:29.367

您应该考虑使用 CSS 解决此问题，而不是根据鼠标悬停更改类。

如果你改变你的CSS：

```
.inactive{
    font-size:115%;
    margin-top:3%;
    padding:1%;
}

.active{
    text-decoration:none;
    background:#e1edff;
    font-size:115%;
    margin-top:3%;
    padding:1%;
} 
```

至：

```
.menu-element{
    font-size:115%;
    margin-top:3%;
    padding:1%;
}

.menu-element:hover {
    text-decoration:none;
    background:#e1edff;
} 
```

然后，您应该通过删除基于 mouseover/leave 切换 CSS 类的代码，并将其设置`.menu-element`为所有元素，从而在不同浏览器中获得一致的行为。

**编辑：**正如@iGanja 在下面指出的那样，我没有注意到某些功能，即在悬停属于菜单项的部分时应突出显示菜单项。

我仍然建议在 CSS 中为菜单本身做鼠标悬停效果，而不是从事件中删除容器 ID：

```
$('#home').mouseenter(function(){
    $('li#NAVhome').removeClass('inactive').addClass('active');
});

$('#home').mouseleave(function(){
    $('li#NAVhome').removeClass('active').addClass('inactive');
});

//faqs div      
$('#faqs').mouseenter(function(){
    $('li#NAVfaqs').removeClass('inactive').addClass('active');
});
$('#faqs').mouseleave(function(){
    $('li#NAVfaqs').removeClass('active').addClass('inactive');
}); 

//book div
$('#book').mouseenter(function(){
    $('li#NAVbook').removeClass('inactive').addClass('active');
});
$('#book').mouseleave(function(){
    $('li#NAVbook').removeClass('active').addClass('inactive');
});

//connect div
$('#connect').mouseenter(function(){
    $('li#NAVconnect').removeClass('inactive').addClass('active');
});
$('#connect').mouseleave(function(){
    $('li#NAVconnect').removeClass('active').addClass('inactive');
}); 
```

这将使菜单效果更加可靠，同时保留鼠标悬停在部分上时的悬停效果。您可以通过使用`.toggleClass()`而不是`if..else`构造来缩短代码。( [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:35:36.303

在尝试调试此类问题时，始终最好确保您的代码经过验证。

你可以在这里查看：http: [//validator.w3.org/](http://validator.w3.org/)

通过在您的网站上运行验证，您似乎缺少必需的属性：在您的脚本标签上键入。

尝试将您的代码更改为以下内容：

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){
        ... 
```

对于奖励积分，您可以重构鼠标悬停。

例如，而不是这个：

```
$('#home, li#NAVhome').mouseleave(function(){
    $('li#NAVhome').removeClass('active').addClass('inactive');
}); 
```

做这个：

```
$("ul.nav li").hover(function() {
    $(this).removeClass("inactive").addClass("active");
}, function() {
    $(this).removeClass("active").addClass("inactive");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:37:45.833

我知道这听起来有点明显，但**您的客户端是否启用了 JavaScript**？这可以在 Chrome 中的设置/高级设置/隐私/内容设置/JavaScript 下找到。

**chris-mv**使用 CSS 而不是 JavaScript的答案是比使用 JQuery 更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:38:11.927

![在此处输入图像描述](../Images/0c2ce4e8569f0d3c3664d2d039650bd2.png)

当您单击一项时，它看起来像这样

# java - 日历时区表现异常

> ID：15236784
> 
> 赞同：0
> 
> 时间：2013-03-06T00:26:57.837
> 
> 标签：java, windows-7, timezone

我最近下载并安装了 Java 1.6.0_43（32 位版本）。我正在使用 64 位处理器的 Windows 7 上运行。我找到以下行：

```
System.out.println(Calendar.getInstance().getTimeZone().getDisplayName()); 
```

打印“委内瑞拉时间”......就像我在芝加哥一样，这相当令人惊讶！

我已经搜索过，但找不到其他人有这个问题。有谁知道这里发生了什么？即使是关于我如何尝试调试此问题的提示也会很有用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:38:42.863

进入控制面板并检查您的日期和时间设置。这个答案只是故障排除，更多可以填补这个空间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:01:56.897

我几乎 100% 确定这不是 Java 问题。

在这里您可以看到如何在 Windows 7 中设置时区：

[http://windows.microsoft.com/en-us/windows7/set-the-clock](http://windows.microsoft.com/en-us/windows7/set-the-clock)

另一方面，在 Windows 7 中，您可以在命令提示符下使用**TZUtil /L**来查看所有时区名称并识别您的时区名称。

[http://technet.microsoft.com/en-us/library/ff715394(WS.10).aspx](http://technet.microsoft.com/en-us/library/ff715394(WS.10).aspx)

之后，您可以修改**custom.ini**文件中包含的**TimeZoneName**变量的值

# postgresql - 如何使用 Play 框架中的演变在 PostgreSQL 中创建函数？

> ID：15236788
> 
> 赞同：10
> 
> 时间：2013-03-06T00:27:13.210
> 
> 标签：postgresql, jdbc, playframework-2.1, postgresql-9.2, playframework-evolutions

**使用 Play 框架 2.1**

我在进化过程中定义了以下 SQL：

```
CREATE OR REPLACE FUNCTION idx(myArray anyarray, myElement anyelement) RETURNS int AS $$
 SELECT i FROM (
  SELECT generate_series(array_lower(myArray,1),array_upper(myArray,1))
 ) g(i)
 WHERE myArray[i] = anyElement
 LIMIT 1; $$ LANGUAGE sql IMMUTABLE; 
```

当我执行进化时，我收到以下错误：

```
We got the following error: ERROR: unterminated dollar-quoted string at or near 
"$$ SELECT i FROM ( SELECT generate_series(array_lower(myArray,1),
 array_upper(myArray,1)) ) g(i) WHERE myArray[i] = anyElement LIMIT 1" Position:
 87 [ERROR:0, SQLSTATE:42601], while trying to run this SQL script: 
```

我正在使用 PostgreSQL 驱动程序版本 9.1-901.jdbc4。

我查看了 postgres 查询日志，发现 Play 正在尝试执行以下操作：

```
LOG:  execute <unnamed>: insert into play_evolutions values($1, $2, $3, $4, $5, $6, $7)
PST DETAIL:  parameters: $1 = '1',
                         $2 = 'c834d463ebd9916b0a3388040300a0926514faef',
                         $3 = '2013-03-05 00:00:00',
                         $4 = '-- THE EVOLUTION UP STATEMENTS GO HERE',
                         $5 = '-- THE EVOLUTION DOWN STATEMENTS GO HERE',
                         $6 = 'applying_up',
                         $7 = '' 
```

因此，出于某种原因，Play 试图将 SQL 插入文本列而没有正确转义。有没有其他人找到解决这个问题的方法？您认为这是 JDBC 问题而不是 Play 问题吗？另外，有没有人让 Liquibase 与 Play 2.1 一起工作？

此外，仅将 $$ 更改为 ' 也不起作用。在这种情况下，我们会得到一个不同的错误，但我们仍然无法执行进化。

编辑：我添加了一个来自全新游戏项目的示例。请在以下网址下载：[http ://elijah.zupancic.name/files/play_evolution_problem.tar.gz](http://elijah.zupancic.name/files/play_evolution_problem.tar.gz)

要使示例正常工作，您需要创建一个新数据库，如进化 1.sql 的第一条评论所示。然后你需要配置你的 conf/application.conf 以在正确的端口和正确的用户上连接到 postgres。

~~我刚刚做了一个实验，我尝试将创建函数 sql 完全插入到播放框架之外。示例在这里：[http](http://elijah.zupancic.name/files/PgCreateFunction.tar.gz) ://elijah.zupancic.name/files/PgCreateFunction.tar.gz <~~

~~事实证明，它是非常可重复的。~~

编辑：事实证明我无法在 Java 中重现它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T13:56:27.650

这是 Play 如何解析进化的产物。由于它使用分号解析每个语句，因此它无法处理存储过程定义。该问题已在 Play 2.1 中解决，允许您通过加倍指定嵌入的分号。例如，参见[https://github.com/playframework/Play20/pull/649](https://github.com/playframework/Play20/pull/649)。

使用`;;`Play 2.1 为我解决了类似的问题。我建议你重新定义你的进化如下，然后再试一次：

```
CREATE OR REPLACE FUNCTION idx(myArray anyarray, myElement anyelement) RETURNS int AS $$
 SELECT i FROM (
  SELECT generate_series(array_lower(myArray,1),array_upper(myArray,1))
 ) g(i)
 WHERE myArray[i] = anyElement
 LIMIT 1;; $$ LANGUAGE sql IMMUTABLE; 
```

# java - Java中对象的==运算符

> ID：15236805
> 
> 赞同：5
> 
> 时间：2013-03-06T00:29:31.200
> 
> 标签：java, casting

我无法理解在以下代码中创建 obj 和 obj2 对象的方式的区别。特别是，我不确定如何将原语转换为对象。看看这里的其他一些问题，我认为这是不可能的。但以下程序编译并运行良好。在第一种情况下，输出为假，在第二种情况下，输出为真。

```
public class Test {

    public static void main(String args[]){

        Integer num = new Integer(3) ;
        Object obj = num;
        Integer[] integerArr = {1, 2, 3, 4};
        Object[] objArr = integerArr;
        boolean contains = false;

        for (int i = 0; i < objArr.length; i++){
            if (objArr[i] == obj){
                contains = true;
                break;
            }
        }

        System.out.println(contains);

        int num2 = 3 ;
        Object obj2 = num2;
        Integer[] integerArr2 = {1, 2, 3, 4};
        Object[] objArr2 = integerArr2;
        boolean contains2 = false;

        for (int i = 0; i < objArr2.length; i++){
            if (objArr2[i] == obj2){
                contains2 = true;
                break;
            }
        }

        System.out.println(contains2);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:32:38.190

对象之间的`==`运算符测试*身份*（如果两个对象完全相同），而`equals()`方法测试*相等*（两个对象是否具有相同的值）。

大多数时候，你会对平等感兴趣。碰巧，您在问题中提供的示例实际上*有效*，因为`Integer`对象被缓存（通常在 -127 到 127 的范围内，尽管这是可配置的），但是如果您使用更大的数字测试身份，则测试很可能将失败。

例如，这将评估为`true`：

```
Integer a = 127;
Integer b = 127;
a == b // true 
```

而这将评估为`false`！

```
Integer a = 128;
Integer b = 128;
a == b // false 
```

底线：安全起见，始终`equals()`用于测试对象之间的相等性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T00:33:22.153

你必须从`java.lang.Integer`

```
public static Integer valueOf(int i) {
    assert IntegerCache.high >= 127;
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

在第一种情况下，您创建一个新`Integer`对象，而在第二种情况下，编译器通过使用缓存为您进行转换。

> ```
> /**
>  * Cache to support the object identity semantics of autoboxing for values between
>  * -128 and 127 (inclusive) as required by JLS.
>  *
>  * The cache is initialized on first usage.  The size of the cache
>  * may be controlled by the -XX:AutoBoxCacheMax=<size> option.
>  * During VM initialization, java.lang.Integer.IntegerCache.high property
>  * may be set and saved in the private system properties in the
>  * sun.misc.VM class.
>  */ 
> ```

下面是相关的字节码，看看它如何最终调用`Integer`构造函数或`Integer.valueOf`：

```
0: new #2; //class java/lang/Integer
3: dup
4: iconst_3
5: invokespecial #3; //Method java/lang/Integer."<init>":(I)V
8: astore_1
9: aload_1
10: astore_2
11: iconst_4
12: anewarray #2; //class java/lang/Integer
15: dup
16: iconst_0
17: iconst_1
18: invokestatic #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
21: aastore
...
90: iconst_3
91: istore 6
93: iload 6
95: invokestatic #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
98: astore 7
100: iconst_4
101: anewarray #2; //class java/lang/Integer
104: dup
105: iconst_0
106: iconst_1
107: invokestatic #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
110: aastore
111: dup
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:36:58.910

**==**如果 object1 和 object2 是引用类型，则 == 检查 object1 和 object2 是否都是对同一对象的引用。

**equals**如果你使用 object1.equals(object2) 那么它会比较对象的实际值

**例子：**

使用**String.equals(String other)**函数来比较字符串，而不是 == 运算符。

该函数检查字符串的实际内容，== 运算符检查对对象的引用是否相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:36:04.927

在第二种情况下，您将原语`int`与对象`Integer`数组进行比较。JVM正在“解包”对象`Integer`并与原语进行比较。因此在这种情况下你确实得到了相等匹配。

在第一种情况下，您总是将一个对象与另一个对象进行比较，在您的示例中，它们永远不会相等。

# asp.net - 比较 ASP.NET 中的 URL

> ID：15236808
> 
> 赞同：0
> 
> 时间：2013-03-06T00:29:54.487
> 
> 标签：asp.net, url

我有一个应用程序可以抓取网站以获取唯一链接 url（即 hrefs），然后将这些 url 保存到数据库中。我将确保网站中的每个页面都有 url。下面是获取保存到数据库的字符串的代码。

```
'url is the url obtained from the link's href
Dim uriReturn As Uri = New Uri(url, UriKind.RelativeOrAbsolute)

'Make it absolute if it's relative
If Not uriReturn.IsAbsoluteUri Then
     Dim baseUri As New Uri(BaseUrl)
     uriReturn = New Uri(baseUri, uriReturn)
End If

Return LCase(uriReturn.ToString) 
```

在应用程序的另一部分，我有部分使用当前页面的 url 查询数据库。下面是获取当前页面 url 的代码。

```
Dim CurrentURL As String = lcase(HttpContext.Current.Request.Url.AbsoluteUri 
```

我的问题是我可以确定我会使用当前页面 url 在数据库中找到匹配项吗？那就是从href得到的字符串和从当前页面返回的字符串即使指向同一个页面也会有区别吗？有没有办法转换网址以确保它们始终匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:12:00.120

Since `BaseURl` is not defined, can't tell if you got it correct. But `BaseUrl` should be = `Request.Url`.

And your

```
Dim CurrentURL As String = lcase(HttpContext.Current.Request.Url.AbsoluteUri 
```

Since you are doing store/retrieve, I suggests you standardize your methods. In store section, you use `uriReturn.ToString()`, so in the retrieve section, you should also use `ToString()` instead of `AbsoluteUri`.

# c# - Request.cookies 没有返回所有的 cookie

> ID：15236812
> 
> 赞同：0
> 
> 时间：2013-03-06T00:30:15.367
> 
> 标签：c#, cookies, configuration, httpwebrequest

我知道 Request.Cookies 会返回 cookie。但我确实有一个在我的应用程序期间创建的 cookie，我想稍后检索它。但是 Request.Cookies["cookie name"] 没有返回。我可以在 FF 的 CookieManager 中看到该 cookie 仍然存在。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:32:31.770

*   检查是否过期。
*   检查发布它的域是否与读取它的域相同。
*   检查 cookie 是否不是使用 SSL 发出的，并且正在尝试通过非加密连接读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T12:02:00.720

根据@Heather 的回答，在 vb.net 中发现了同样的问题。我意识到我正在阅读的 cookie 需要 SSL 连接。`isSecure`当在 Cookie 管理器下将标志设置为 false时，可以检查这是否有效。

我的解决方案通过配置 Visual Studio 以使用 IIS Express 并设置为使用 SSL/HTTPS。[这个链接](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)帮助了我。

# ios - 如何淡入淡出图层？

> ID：15236815
> 
> 赞同：1
> 
> 时间：2013-03-06T00:30:36.277
> 
> 标签：ios, objective-c, core-animation

我需要实现一个非常简单的动画，我必须使用 Core Animation 来完成它。动画是在我单击一个按钮后，一个视图淡入 2 秒，10 秒后淡出，但我不知道如何用 Core Animation 做到这一点，我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:45:40.377

Core Animation Programming Guide 有一个非常好的基本示例，说明您想要使用显式 CABasicAnimation 对象做什么：

```
theAnimation=[CABasicAnimation animationWithKeyPath:@"opacity"];
theAnimation.duration=2.0;
theAnimation.fromValue=[NSNumber numberWithFloat:0.0];
theAnimation.toValue=[NSNumber numberWithFloat:1.0];
[theLayer addAnimation:theAnimation forKey:@"animateOpacity"]; 
```

至于您想要的 10 秒延迟，您可以使用 GCD 等待 10 秒，然后反向执行完全相同的操作：

```
dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, 10000000000); // 10 seconds
dispatch_after(time, dispatch_get_main_queue(), ^()
{
    // Same thing, but with the fromValue/toValue reversed
}); 
```

**编辑：修复了 fromValue/toValue 值

# java - 蓝牙仅发送一次传感器数据

> ID：15236830
> 
> 赞同：1
> 
> 时间：2013-03-06T00:32:29.640
> 
> 标签：java, android, bluetooth, arduino, accelerometer

因此，对于我的研究，我必须将加速度计数据作为恒定流发送到 arduino mega。我将模块通过串行连接到 arduino。但是，当我运行代码时，它只运行一次。我试图将代码的蓝牙连接部分放在我的代码的准确性更改部分中，但它一直冻结设备。这是我的代码：

```
package com.example.arduino_bluetooth2;

//=================================================================================================
//Imports
//=================================================================================================
import java.io.IOException;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;
import android.os.Bundle;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.view.Menu;
import android.widget.TextView;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class MainActivity extends Activity implements SensorEventListener {

    // Setup necessary sensor objects
    private Sensor acc;
    private SensorManager sm;
    private TextView t1;
    private double value;
    // Bluetooth Object
    private BluetoothAdapter bAdapter;
    private BluetoothDevice device;
    private BluetoothSocket mmServerSocket;
    private OutputStream btoutput;
    private static final UUID SPP_UUID = UUID
            .fromString("00001101-0000-1000-8000-00805F9B34FB");
    private static final int DISCOVERY_REQUEST = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        accelerometer_initialization();
        bluetooth_initialization();
    }

    // Setsup the accelerometer object
    private void accelerometer_initialization() {
        sm = (SensorManager) getSystemService(SENSOR_SERVICE);
        acc = sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        sm.registerListener(this, acc, SensorManager.SENSOR_DELAY_NORMAL);
    }

    // Setup bluetooth object
    private void bluetooth_initialization() {
        bAdapter = BluetoothAdapter.getDefaultAdapter();
        startActivityForResult(new Intent(
                BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE),
                DISCOVERY_REQUEST);
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mReceiver, filter);
        bAdapter.startDiscovery();
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        value = event.values[0];
    }

    @Override
    public void onAccuracyChanged(Sensor arg0, int arg1) {
    }

    final BroadcastReceiver mReceiver = new BroadcastReceiver() {

        public void onReceive(Context context, Intent intent) {
            if (BluetoothDevice.ACTION_FOUND.equals(intent.getAction())) {
                device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                if (new String(device.getName()).equals("BT UART")) {
                    bAdapter.cancelDiscovery();

                    try {
                        BluetoothSocket test = null;
                        test = device
                                .createInsecureRfcommSocketToServiceRecord(SPP_UUID);
                        mmServerSocket = test;
                        mmServerSocket.connect();
                        String message = Double.toString(value);
                        byte[] send = message.getBytes();
                        btoutput = mmServerSocket.getOutputStream();
                        btoutput.write(send);
                        btoutput.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        };
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:23:13.540

我不确定您是否应该在广播接收器中创建和连接蓝牙套接字。我在活动的 onResume() 中进行蓝牙连接管理。

此外，我使用一个线程来管理从 arduino 和设备之间的串行数据连接获取数据，它被生成并在后台连续运行。有一种写入方法可以发送我从活动中调用的数据

```
 /* Call this from the main activity to send data to the remote device */
    public void write(String message) {
        System.out.println("...Data to send: " + message + "...");
        byte[] msgBuffer = message.getBytes();
        try {
            mmOutStream.write(msgBuffer);
        } catch (IOException e) {
            System.out.println("...Error data send: " + e.getMessage() + "...");     
          }
    } 
```

然后tread的run()方法负责取回数据

[有关在 Android 中通过蓝牙接收 xml 字符串](https://stackoverflow.com/questions/15053358/error-with-receiving-xml-strings-via-bluetooth-in-android/15055201#15055201)的示例错误，请参见我在此线程中的答案

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T03:20:12.367

从 arduino 中查看此页面：http://arduino.cc/en/Reference/Loop[问题](http://arduino.cc/en/Reference/Loop) 是它只运行一次，因为它不是一个循环，直到设备关闭或以其他方式被告知。

# python - 如何在 /usr/bin/python 中重新安装目录

> ID：15236832
> 
> 赞同：11
> 
> 时间：2013-03-06T00:32:33.450
> 
> 标签：python, directory, installation, bin

我已经研究了几个小时无济于事。

我想我在安装 python 3 时删除了 /usr/bin/python 的目录，因为我收到了这个错误：`-bash: /usr/bin/python: No such file or directory.`

我试过`sudo ln -s /usr/bin/python2.7 /usr/bin/python`了，这给了我`ln: /usr/bin/python: File exists`

但是，它仍然不会在 /usr/bin/python 中永久安装目录。如何永久恢复此目录？

我在Mac上。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-06T00:45:02.713

您的文件 /usr/bin/python 存在，因为您收到以下消息：

```
ln: /usr/bin/python: File exists 
```

但我看到它是指向不存在的东西的损坏链接，因为您收到以下消息：

```
-bash: /usr/bin/python: No such file or directory 
```

你必须做的是解决这个问题：

```
sudo rm /usr/bin/python    # because that's a corrupted file
sudo ln -s /usr/bin/python2.7 /usr/bin/python    # this line will work if your file /usr/bin/python2.7 is OK. 
```

希望有帮助！

# sql - SQL Server：根据指向单个表的 id 选择数据

> ID：15236834
> 
> 赞同：0
> 
> 时间：2013-03-06T00:32:45.700
> 
> 标签：sql, sql-server-2008

我正在尝试基于两个表创建一个视图。

成员：

```
ID  Lang1_ID  Lang2_ID - all tinyint
1   2         3
2   2         4
3   1         4 
```

语言：

```
ID  Title - tinyint, varchar(50)
1   English
2   French
3   Spanish
4   Portuguese 
```

我希望创建一个包含所有标题的视图：

```
member_id, Lang1_Title, Lang2_Title 
```

需要的结果：

```
1  French  Spanish
2  French  Portuguese
3  English Portuguese 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:38:28.960

```
SELECT m.id member_id, l.Title Lang1_Title, l2.Title Lang2_Title
  FROM Member m LEFT JOIN 
       Language l ON m.Lang1_ID = l.ID LEFT JOIN
       Language l2 ON m.Lang2_ID = l2.ID 
```

输出

```
| MEMBER_ID | LANG1_TITLE | LANG2_TITLE |
-----------------------------------------
|         1 |      French |     Spanish |
|         2 |      French |  Portuguese |
|         3 |     English |  Portuguese | 
```

**[sqlfiddle 示例](http://sqlfiddle.com/#!3/a1d43/6)**

和视图

```
CREATE VIEW viewname
AS
SELECT m.id member_id, l.Title Lang1_Title, l2.Title Lang2_Title
  FROM Member m LEFT JOIN 
       Language l ON m.Lang1_ID = l.ID LEFT JOIN
       Language l2 ON m.Lang2_ID = l2.ID 
```

并使用它

```
SELECT * FROM viewname 
```

**[sqlfiddle 示例](http://sqlfiddle.com/#!3/00656/1)**

# twitter - Twitter API 1.1：返回包含特定主题标签或由特定用户发布的所有推文

> ID：15236835
> 
> 赞同：2
> 
> 时间：2013-03-06T00:32:51.190
> 
> 标签：twitter

是否有一个 API 调用将返回包含特定主题标签（#example）的所有推文以及来自某个用户（@example）的所有推文？

寻找一个 API 调用，它返回一个包含这两个条件的 JSON 对象。我知道我可以使用两个单独的 API 调用，但我试图用一个来做到这一点。可能[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)是最好的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T06:21:32.733

当您同时使用多个术语时，Twitter 搜索默认执行 AND 操作。IE

[https://dev.twitter.com/docs/api/1.1/get/search/tweets.json?q=from%3AJoeMayo%20%23twitterapi](https://dev.twitter.com/docs/api/1.1/get/search/tweets.json?q=from%3AJoeMayo%20%23twitterapi)

仅返回来自 JoeMayo 并包含 #twitterapi 的推文。

您可以在 Twitter 的[搜索](https://twitter.com/search/#)页面上进行试验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T05:17:43.720

[https://api.twitter.com/1.1/search/tweets.json?q=shrmi14](https://api.twitter.com/1.1/search/tweets.json?q=shrmi14)

是我用的那个。

万一你觉得有问题。请参阅[https://dev.twitter.com/console](https://dev.twitter.com/console)以生成您自己的查询。

# java - java下不同平台定义重音字符

> ID：15236836
> 
> 赞同：0
> 
> 时间：2013-03-06T00:32:51.770
> 
> 标签：java, character-encoding

我对不同平台中的重音字符有疑问。

当我在我的机器上登录**fedora**（默认字符集为 UTF-8）时，它会正确打印为**Sacré Coeur。**

但是当我更新到另一个在**RedHat**上运行的服务器（默认字符集是 ISO-8859-1）时，它打印为 **Sacré Coeur。**

我想将它记录在 RedHat 服务器中，就像在我的 Fedora 机器上一样。我怎样才能做到这一点？

**我的锻炼：**

*   我试图改变 System.setProperty("file.encoding", "ISO-8859-1"); 在本地执行反向版本 System.setProperty("file.encoding", "UTF-8"); 在 RedHat Server 中，如果它改变了在本地的登录方式。但什么都没有改变。
*   我注意到有几个关于重音字符的线程，但没有回答我。这就是为什么我问了一个新问题。
*   我也试过[这个](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding/623036#623036)，但没有用。

    `System.setProperty("file.encoding","ISO-8859-1"); Field charset =Charset.class.getDeclaredField("defaultCharset"); charset.setAccessible(true); charset.set(null,null);`

*   但我没有尝试在 JVM 启动时设置字符集。如果可行，请解释我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:17:26.390

要从所有环境中获得类似的输出，而不取决于服务器操作系统默认字符编码，当您启动程序或服务器环境（Jboss tomcat 或 jetty）时，将 -Dfile.encoding 传递给启动脚本

（让我们说 jboss 中的 run.sh，将 -Dfile.encoding=UTF-8 添加到 JAVA_OPTS）

-Dfile.encoding=UTF-8

# sql - 直接查询或子查询之间的区别？

> ID：15236837
> 
> 赞同：1
> 
> 时间：2013-03-06T00:32:52.067
> 
> 标签：sql, sql-server, tsql

我遇到了一个存储过程，它有一些错误。一个是，开发人员这样做了：

```
SELECT alias.firstname, alias.surname, alias.id
FROM
    (SELECT firstname, surname, id, address, anotherfield, etc, etc
     FROM TableName
     WHERE afield = avalue) alias 
```

因此，这显然与以下内容相同：

```
SELECT firstname, surname, id
     FROM TableName
     WHERE afield = avalue 
```

这被重复了很多次。所以，我的问题是，执行子查询是否会降低性能？我知道这是没用的……最好的办法就是把它改正——我做到了。但是，离开它是否有任何性能损失？

我猜查询优化器会理解它，并且做正确的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:45:12.423

[*在外部查询中只涉及投影*](http://en.wikipedia.org/wiki/Projection_%28relational_algebra%29)的情况下，两个查询之间的执行计划应该绝对没有差异。在内部和外部查询中使用“where”子句的更复杂的查询可能会测试查询优化器的限制，并且可能会为两级查询生成较差的查询计划，但在您的情况下，计划和执行速度应该是完全相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:58:53.733

在像这样的简单情况下，SQL Server 会将这些查询折叠到同一个执行计划中。

我在 AdventureWorks2012 上试过这个：

```
SELECT CarrierTrackingNumber, ProductID, UnitPrice, LineTotal
FROM 
(
  SELECT *
    FROM Sales.SalesOrderDetail
    WHERE ProductID = 781
) AS Alias;

SELECT CarrierTrackingNumber, ProductID, UnitPrice, LineTotal
FROM Sales.SalesOrderDetail
     WHERE ProductID = 781; 
```

这些计划是相同的，运行时指标的差异是无法区分的。

![在此处输入图像描述](../Images/c20d0b0679910cd2eeaa66ee013ddf51.png)

我还尝试了以下方法，特意选择了一个复杂类型（地理）的表：

```
 SELECT AddressLine1, City, StateProvinceID 
 FROM Person.Address
   WHERE StateProvinceID = 9;

 SELECT AddressLine1, City, StateProvinceID 
 FROM 
 (
   SELECT * FROM Person.Address
   WHERE StateProvinceID = 9
 ) AS x;

 SELECT AddressLine1, City, StateProvinceID 
 FROM 
 (
   SELECT * FROM Person.Address
 ) AS x
 WHERE StateProvinceID = 9; 
```

同样的事情，在每种情况下，优化器都会崩溃到索引扫描并忽略似乎被引用的其他列：

![在此处输入图像描述](../Images/3cdd71d176ee15cbaa258d3677ef4ca7.png)

您是否可以依靠这种相同的优化来处理更复杂的查询，我不确定。优化器并不总是完美或可预测的......所以我当然可以设想更多涉及的查询，其中这种崩溃不会可靠地发生。

我不确定我是否理解您所看到的模式的价值。也许那里有一些例子实际上可以达到某种目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:38:34.480

两个查询的执行计划在性能方面是相同的。优化器只会丢弃未使用的列。

# css - 我应该使用像素，em还是都不使用？

> ID：15236838
> 
> 赞同：-3
> 
> 时间：2013-03-06T00:32:53.943
> 
> 标签：css, html, xhtml, em

我试图在 css 中得到明确的答案。我想弄清楚我是否应该使用

```
line-height: 1.5; 
```

或者

```
line-height: 1.5em; 
```

或者

```
line-height: 15px; 
```

一些网站说不要指定`em`或`px`. 所以在那张纸条上，我应该说类似的话：

```
margin: 10px; 
```

或者

```
margin: 10em; 
```

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:38:19.297

[如MDN line-height 文档](https://developer.mozilla.org/en-US/docs/CSS/line-height#Notes)中所述，无单位数字特别适合`line-height`其他单位可能存在继承问题。

对于其他属性，这将完全取决于您想要什么，以及您是否希望事物是固定大小的，还是相对于您的文本的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:34:48.810

Em 允许您的网站具有弹性，因此它可以根据屏幕大小调整大小，但是，如果您真的希望它能够正常工作，那么您可以使用 EM 进行页面上的所有测量。我发现我的大部分布局都使用 EM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T00:39:16.030

显然，这取决于很多事情。

作为一般规则，使用 em 表示任何与文本相关的内容，使用 px 表示任何与装饰相关的内容。所以填充和边框应该是 px，文本大小、宽度、高度等应该是 em 或 %（或者更好的是，流畅的布局）。

想象一下你正在使用大文本显示；*你*想要更大的元素是什么？使边框更大可能会为文本留下更少的空间，所以这确实是一件消极的事情。

对于行高，您不应该使用单位（或 em，但这会浪费 2 个字符）；它是字体大小的比例。如果您使用 px，您最终可能会得到一个小于文本的 line-height，这很*糟糕*。

这个网站提出了一个关于无单位与 em 的有趣观点：http: [//meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/](http://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/)。这个想法是使用 em 将为所有孩子设置一个固定的行高，即使字体大小不同，而不使用任何单位将使用一个始终相对于字体大小的行高。在大多数情况下，后者会更可取，但我可以想到您也想要前者的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:55:54.743

尽可能不要在定义边距时使用**px 。**使用**em** 或**%**等相对单位，因为它是可重排布局。我们必须始终想象并考虑布局在小型设备和调整大小的文本上的样子。

*   对于垂直文本边距（margin-top 或 margin-bottom）使用 ems，因为这取决于字体大小

*   对于水平宽度，使用 %

*   对于左边框附近的边距，如果它小于 50px，我们可以使用 px。

*   确保所有图像都包含在 div/figure 元素中，img 设置为 100%，高度设置为 auto

*   建议将横向尺寸的图像设置为 50% 宽度并左右浮动

*   建议将纵向尺寸的图像设置为 33% 宽度并左右浮动

# python - 对于仿真系统，哪种数据结构最合适？

> ID：15236840
> 
> 赞同：3
> 
> 时间：2013-03-06T00:33:18.860
> 
> 标签：python, python-2.7, simulation, database-performance

我正处于构建模拟的规划阶段，需要基于内存和速度考虑如何表示数据的想法。

在每个时间步，模拟过程创建 10^3 到 10^4 个新数据记录，并查看每个新记录或现有记录（其中有 10^6 到 10^8 个），然后删除或修改它。

每条记录有 3-10 个简单字段，每个字段要么是整数，要么是由几个 ASCII 字符组成的字符串。此外，每条记录还有 1-5 个其他字段，每个字段都是一个包含整数的可变长度列表。一条典型的记录重 100-500 字节。

修改或删除过程是这样工作的：对于这条记录，计算一个函数，其参数是这条记录的某些字段的值，以及另一条记录的这些字段的值。根据结果​​，该过程准备以某种方式删除或修改其字段。

然后为彼此重复记录。然后移动到下一条记录并重复。处理完所有记录后，模拟就可以进入下一个时间步了。

就在移动到下一个时间步之前，按照准备应用所有删除和修改。

允许的记录越多，模拟就越好。如果所有记录都在 RAM 中，则缺点是模拟大小，可能优点是速度。模拟不需要是实时的，但显然我不希望它太慢。

为了表示内存中的每条记录，我知道这些选项：列表或字典（其中嵌套了一些列表）或类实例。为了存储所有记录并在另一天继续模拟，按我熟悉的顺序排列的选项是：一个 csv 文件，其中每一行都是一个记录，或者只是将所有记录放在 RAM 中，然后将它们放入一个文件中（也许使用pickle），或使用某种数据库。

我已经学习了 Python 基础知识以及一些诸如生成器之类的概念，但还没有学习过数据库，没有尝试过酸洗，显然需要学习更多。如果可能的话，我会避免使用多台计算机，因为我只有 1 台，而并发因为看起来太吓人了。

关于如何在内存中表示记录，以及如何存储模拟系统，您有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:20:33.423

如果我们采用最坏的情况，10**8 条记录和每条记录 500 字节，那将是很多 RAM，因此值得设计一些灵活性并假设并非所有记录都将始终驻留在 RAM 中。您可以创建一个抽象类来隐藏记录所在位置的详细信息。

```
class Record(object):
    def __init__(self, x, y, z):
        pass # code goes here
    def get_record(id):
        pass # code goes here 
```

`get_record()`您可以使用名称而不是使用名称`__index__()`，然后您的类将像列表一样运行，但可能会输出到数据库，或引用 RAM 缓存，或其他任何东西。只需使用整数作为 ID 值。然后，如果您对持久性存储改变主意（从数据库切换到 pickle 或其他），实际代码不会改变。

您也可以尝试制作一个非常大的交换文件，并让虚拟内存系统处理进出实际 RAM 的混洗记录。这很容易尝试。它没有任何简单的方法来中断计算并保存状态。

您可以将每条记录表示为一个元组，甚至是一个命名元组。我相信元组在 Python 中的任何“容器”对象的开销都是最低的。（命名元组只将名称存储在一个地方一次，因此开销也很低。）

# javascript - HighCharts - 自定义重绘处理程序 borks 缩放？

> ID：15236842
> 
> 赞同：0
> 
> 时间：2013-03-06T00:33:26.847
> 
> 标签：javascript, highcharts

我正在尝试在 HighCharts 中制作一个带有注释的柱形图，这些注释在图表调整大小或缩放时会正确重新定位。

[http://jsfiddle.net/2tJ3G/](http://jsfiddle.net/2tJ3G/)

您可以通过调整图表周围的框架来了解我的意思。注释保留在应有的位置。

仅当从缩放中调用此重绘函数时才会出现问题。图表只是重新加载。我已经成功地为重绘事件提供了一个功能，但这完全破坏了选择缩放（它只显示所有数据）。这是我的处理程序：

```
function drawIt() {
    var optionsTmp = options;  
    chart = new Highcharts.Chart(optionsTmp, function(chart) {

    var text, box, point;
    var count = 0;
    for (var annotX in annots) {
        var annot = annots[annotX];
        if (annot.length > 0) {
           //draw rectangles / text with annot vals
        }
        count++;
    }
});
options = optionsTmp;
} 
```

有可能我没有正确地通过缩放 ( `options.xAxis.min`) 的新极端，但试图将它传递给处理程序并没有给我太多运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:27:37.913

问题是您正在尝试删除图表并创建新图表-仅通过设置空容器是不可能的-您还需要销毁图表。但这仍然不可能在重绘时破坏图表 - 它会导致错误。

我认为您应该尝试另一种解决方案，例如更新该注释。类似的事情在这里做了额外的点线，见：[http ://www.highcharts.com/jsbin/oyadep/4/edit#javascript,live](http://www.highcharts.com/jsbin/oyadep/4/edit#javascript,live)

当然，它还没有完成，但在放大时可以正常工作。

```
function drawPaths(options) {
var maxNum = 2;

//add the paths
group_init = options.renderer.g().add();
// console.log(options);
for (i = 0; i < maxNum; i++) {

    $.each(options.series[i].data, function(i2, point) {
        var xpos = options.xAxis[0].translate(this.x);
        var ypos = options.yAxis[0].translate(this.y, false, true);
        var gr = this.y; //gross revenue
        var p_gr = 0; //for tests
        var eq; //equation
        var my;
        //console.log(this);
        eq = gr + 1; //equation
        my = options.yAxis[0].translate(eq, false, true);
        //console.log(xpos, ypos, my);
        options.renderer.path(['M', xpos + 105, ypos + 5, 'L', xpos + 105, my + 5]).attr({
            'stroke-width': 1,
            stroke: '#ad2b2b'
        }).add(group_init);

    });
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:57:42.060

长话短说，我的 setExtremes 函数（在完全重绘图表之前被调用）正踩在下面的重绘函数的脚上。我不得不在那里设置阈值并尽早将其静音。

```
 setExtremes: function(e) {
                doZoom = true; 
                min= e.min; 
                max = e.max;
                e.preventDefault();
                e.stopPropagation();
            } 
```

更正的小提琴：

[http://jsfiddle.net/9LgUf/1/](http://jsfiddle.net/9LgUf/1/)

# java - Java 日志覆盖工具

> ID：15236845
> 
> 赞同：6
> 
> 时间：2013-03-06T00:33:43.983
> 
> 标签：java, log4j, code-coverage

是否有任何工具或策略可以在（Java、log4j）上生成“日志覆盖率”报告？就像代码覆盖率一样，但要确保没有不记录任何内容的大型方法、类或包。

在编写 Web 服务时，我的团队不会编写很多日志语句。当调试运行中的实时问题时，生产代码，我们总是希望我们有。我们不可避免地会尝试在我们的测试环境中通过附加调试器或添加额外的日志语句来重现错误，这可能非常困难，具体取决于所涉及的结构和互操作。

有人将其用作代码质量指标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:07:33.277

代码覆盖率需要特殊的检测，因为您试图找出一段生产代码是否被任何测试执行。你要问的有点模糊，可能更容易（“是否为这个大类完成了任何日志记录？”）或者更难到不可能的地步（“我们是否记录了将在生产中中断的方法？”）。

对于第一个问题，您可以快速编写一个 shell 脚本来完成这项工作。例如，这是 Perl 中的一个骨架。在这里，我假设我们正在使用 SLF4J，并且看到“LoggerFactory”的导入足以证明存在记录器。

```
while ($filename = shift) {
    open my $in, "<$filename";
    my $loc = 0;
    my $log = "NO LOGGER";
    while (<$in>) {
        $loc++;
        if (m/import org.slf4j.LoggerFactory/) {
            $log = "has logger";
        }
    }
    print "$filename : $loc LOC $log\n";
    $total{$log} += $loc;
}
print "\n\nTOTAL LOGGED: $total{'has logger'}\nTOTAL UNLOGGED: $total{'NO LOGGER'}\n"; 
```

我可以从我的 shell 运行它来运行一个小项目中的所有 Java 文件

```
$ find . -name \*.java -exec perl haslog.pm {} \+ 
```

这仅适用于小型项目，并且相当脆弱，但制作更强大的版本并不是一件容易的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:36:39.860

许多日志可能是噪音，根据我的经验，我总是发现通过日志进行跟踪很痛苦。话虽如此，如果日志管理得当，您可以获得良好的诊断/报告。代码未正确测试的原因之一是生产代码中有大量日志。开发人员倾向于在开发时添加一条日志语句以检查代码是否有效，因此它鼓励不要使用正确的断言编写测试。您需要的是许多经过良好测试的小类组合在一起。断言应该准确地告诉您测试失败的原因。

假设在您的代码路径中，您期望发生一些事情，这是它的主要职责（例如，创建了一个数据库条目来注册用户/或登录的人），当我说它的主要职责时，我不是在谈论发生在你的代码路径。如果您在主代码路径中有错误情况，则应将异常一直抛出堆栈，您可以记录并将其转换为用户友好的消息。RuntimeExceptions 在这里很好，因为您不希望捕获这些异常，直到它一直到视图层。也可以记录副作用，因为它们就像信息/警告。

# ios - iOS UILocalNotification - 徽章图标和通知声音

> ID：15236848
> 
> 赞同：1
> 
> 时间：2013-03-06T00:33:46.380
> 
> 标签：ios, notifications, uilocalnotification, badge

我有一个简单的问题。

首先，我将从发布代码开始：

```
-(void)notification
{
UILocalNotification *localNotification = [[UILocalNotification alloc] init];

if (!localNotification)
    return;

// Current date
NSCalendar *calendar = [NSCalendar currentCalendar]; // gets default calendar
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]]; // gets the year, month, day, hour and minutesfor today's date
[components setHour:19];
[components setMinute:30];
[components setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"EST"]];

localNotification.fireDate = [calendar dateFromComponents:components];

localNotification.repeatInterval = NSDayCalendarUnit;

[localNotification setAlertBody:@"Your 'Daily Quote' is ready!"];

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];

localNotification.applicationIconBadgeNumber = 1;

localNotification.soundName = UILocalNotificationDefaultSoundName; 
```

}

似乎显示了 localNotification，但从未显示和播放徽章和声音。可能是因为这是由于“repeatInterval”而循环的吗？

我怎样才能让这些显示出来？通知正在指定时间显示，但徽章图标未更改...

谢谢！

-亨利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:26:23.480

你应该改变你的代码顺序：</p>

```
localNotification.applicationIconBadgeNumber = 1;

localNotification.soundName = UILocalNotificationDefaultSoundName; 
```

取之前的代码：

```
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

同样的逻辑在 iOS 5.1 对我有用，但代码顺序。在通知应用到系统后，您重置了 badgeNumber 和 soundName。NotificationCenter 需要本地通知对象包含的信息，而不是对象本身，因此，在那个时候，NotificationCenter 无法获取 soundName 或 badgeNumber。很高兴有帮助:-)

# android - 定期阅读电子邮件

> ID：15236849
> 
> 赞同：0
> 
> 时间：2013-03-06T00:33:49.007
> 
> 标签：android, android-asynctask, android-service, alarmmanager, android-broadcast

我要做的是编写一个应用程序，该应用程序登录到我的电子邮件帐户并在用户设置的定期时间检查收件箱和已发送项目。

我有一些疑问，所以我希望这不会因为它的长度而被忽略。

1.  我想我需要在手机完成启动后启动`BroadcastReceiver`。`AlarmManager`
2.  我需要`AsyncTask`从主 UI 线程中读取电子邮件。但是，我读`Service`的 s 也运行在单独的线程上？
3.  从中（为什么这是`PendingIntent`不正常的？）我应该选择还是？`AlarmManager``PendingIntent``Intent``getBroadcast()``getService()`
4.  我对整个过程的理解是：
    *   手机完成启动，触发广播
    *   `BroadcastReceiver`获取事件并设置`AlarmManager`
    *   `AlarmManager``Intent`在特定时间开火
    *   `BroadcastReceiver`获取事件
    *   `BroadcastReceiver`开始`Service`
    *   `Service`开始`AsyncTask`

那正确吗？似乎很啰嗦。如果我选择`getService()`而不是`getBroadcast()`as`PendingIntent`我可以跳过在上述步骤中调用第二个广播，并直接转到`Service`？

重读这篇我想我没有问具体问题，但我更想知道我的理解是否正确或者我是否完全迷失了（我觉得我是！）

更新：我想我会使用他们听起来不错的意图服务，因为我可以直接从警报管理器中调用它们。然而，阅读它似乎服务可能不会保持足够长的时间，所以我可能不得不使用广播接收器才能使用唤醒锁，我现在正在进一步调查。

Commonsware 编写了一个名为 WakefulIntentService 的有用包装器，我想我会用它来帮助我自己做唤醒锁的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:00:40.283

您可以使用( )`AlarmManager`开始。以及在 UI 线程上运行的注释。所以你*不能*在 a 中建立网络连接（以避免）。正如[文档所述](http://developer.android.com/reference/android/os/AsyncTask.html)，您需要类似in your , don't use的东西：`Service`[`getService()`](http://developer.android.com/reference/android/app/PendingIntent.html#getService%28android.content.Context,%20int,%20android.content.Intent,%20int%29)[`Service`](http://developer.android.com/reference/android/app/Service.html)*`Service`[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)`Thread``Service``AsyncTask`*

 *> 理想情况下，AsyncTasks 应该用于短操作（最多几秒钟。）

另一个选择是[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)，它运行在一个单独的工作线程上，你可以在那里做网络作业。请注意：*所有请求都在单个工作线程上处理——它们可能需要尽可能长的时间（并且不会阻塞应用程序的主循环），但一次只会处理一个请求。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:49:28.393

我没有给你所有的答案，但我会告诉你我所知道的：

3.`PendingIntent`是一个等待的 Intent，不同之处在于这个 Intent 打算在将来发送，而不是像常规 Intent 那样立即发送。

> 服务启动 AsyncTask

服务不需要启动`AsyncTask`，您可以在后台运行一个服务，该服务将不断在不同的线程上运行。或者您可以使用`AsyncTask`将创建一个线程，执行它的工作并在最后终止线程。*

# php - Kohana 3.3 使用 ORM 模型的自定义 SQL

> ID：15236850
> 
> 赞同：0
> 
> 时间：2013-03-06T00:33:57.293
> 
> 标签：php, sql, kohana

我正在尝试在 Kohana 中执行自定义 SQL 语句。我有一个已经在整个站点中广泛使用的 ORM 模型，但是出现了对高级查询的需求。有没有办法使用 ORM 模型执行查询？查询的一个例子是

```
SELECT
    sum(TotalSales) AS sum,
    DATE(adddate(SaleDate, INTERVAL (6-weekday(SaleDate)) DAY)) AS dt
FROM Sales
GROUP BY dt
ORDER BY dt DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:47:48.643

Kohana 有直接访问数据库的方法（[http://kohanaframework.org/3.0/guide/api/DB#query](http://kohanaframework.org/3.0/guide/api/DB#query)）。只需像这样创建一个函数：

```
$query = DB::query(Database::SELECT, 'SELECT
    sum(TotalSales) AS sum,
    DATE(adddate(SaleDate, INTERVAL (6-weekday(SaleDate)) DAY)) AS dt
FROM Sales
GROUP BY dt
ORDER BY dt DESC'); 
```

$qresult = $查询->执行（）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:31:45.090

这样的声明不应该（也可能不能）通过 Kohana 的 ORM 完成。ORM 旨在将表行作为对象处理并管理它们之间的关系。

无论如何，在 Kohana 中，您可以使用 Kohana 出色的查询构建器方法，例如：

```
$result = DB::select(
        array(
            DB::expr('sum(`TotalSales`)'),
            'sum'),
        array(
            DB::expr('DATE(adddate(`SaleDate`, INTERVAL (6-weekday(`SaleDate`)) DAY))',
            'dt')))
    ->from('Sales')
    ->group_by('dt')
    ->order_by('dt', 'DESC')
    ->execute(); 
```

然后简单地说：

```
$rows = $result->as_array(); 
```

请务必记住，您应该[`DB::expr()`](http://kohanaframework.org/3.3/guide-api/DB#expr)在查询构建器中使用 for 表达式 -[这是 Kohana 3.3.0 中的新功能](http://kohanaframework.org/3.3/guide/kohana/upgrading#query-builder-identifier-escaping)。

# scheme - 本地球拍

> ID：15236851
> 
> 赞同：4
> 
> 时间：2013-03-06T00:34:15.040
> 
> 标签：scheme, racket

我正在阅读书中有关本地定义的内容，并且遇到了这个示例-

```
(local ((define (f x) (+ x 5))
    (define (g alon)
      (cond
        [(empty? alon) empty]
        [else (cons (f (first alon)) (g (rest alon)))])))
  (g (list 1 2 3))) 
```

究竟在`local`这里做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T00:45:24.200

`local`在[此处](http://docs.racket-lang.org/htdp-langs/advanced.html?q=local#%28form._%28%28lib._lang%2Fhtdp-advanced..rkt%29._local%29%29)作为一种 HtDP 语言的一部分或在[此处](http://docs.racket-lang.org/reference/local.html?q=local)作为`local`模块的一部分进行了记录。让我们依次看看每一个。首先是 HtDP 中的一个：

> `(local [definition ...] expression)`将相关定义分组以在表达式中使用。每个定义都可以是定义或定义结构。本地求值时，依次求值每个定义，最后求值主体表达式。只有局部内的表达式（包括定义和表达式的右侧）可以引用定义定义的名称。如果在本地定义的名称与顶级绑定相同，则内部绑定会“遮蔽”外部绑定。也就是说，在本地内部，对该名称的任何引用均指内部名称。

接下来，`local`模块中的那个：

> `(local [definition ...] body ...+)`与 letrec-syntaxes+values 一样，只是绑定的表达方式与顶层或模块体中的方式相同：使用 define、define-values、define-syntax、struct 等。定义与非通过部分扩展定义形式定义（参见部分扩展）。就像在顶层或模块体中一样，begin-wrapped 序列被拼接到定义序列中。

因此，根据使用的语言/模块，您会知道`local`您找到的是哪个。显然，它不是标准的特殊形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:49:04.450

Local 用于在特定函数的范围内定义一些辅助函数。例如，我正在编写一个函数来将 5 添加到给定列表的所有元素中，

```
(define (add-5-to-list list)
    (local
        ( ;; definition area start
         (define (f x) (+ x 5))
         (define (g alon)
            (cond
               [(empty? alon) empty]
               [else (cons (f (first alon))
                           (g (rest alon)))]))
        ) ;; definition area end
        (g list)
    ) ;; local end
) ;; define end 
```

您可以在本地定义任意数量的函数。但是只能在主函数的范围内使用（这里的主函数是add-5-to-list）。

# java - 如何在 SWT 中用圆角填充矩形做透明度？

> ID：15236861
> 
> 赞同：1
> 
> 时间：2013-03-06T00:35:47.713
> 
> 标签：java, graphics, swt

我正在使用 SWT 4.2`Tree`小部件。我需要将颜色代码与`TreeItem`列表中的每个相关联。我正在使用`TreeItem`'s来执行此操作`setImage(...)`，其中创建的图像如下：

```
private Image createImage(int imageSize)
{
    Image image = new Image(Display.getDefault(), imageSize, imageSize);
    GC gc = new GC(image);
    gc.setAntialias(SWT.ON);
    gc.setBackground(... a Color object ...);
    gc.fillRoundRectangle(0, 0, imageSize, imageSize, 5, 5);
    gc.dispose();
    return image;
} 
```

这实际上效果很好，除了一个细节：圆角矩形*外*的角不透明——它们保持白色。效果是带有白色条纹的圆形彩色正方形。当用户选择 中的项目时，这一点尤其明显`Tree`，因为选择颜色使白色角非常明显。

我`Image.setBackground(...)`在创建之前尝试过使用`GC`，因为该方法的文档指出：*“设置将透明像素映射到的颜色”*。但是，据我所知，将颜色设置为白色或`TreeItem`图像设置位置的颜色（无论如何都是白色）没有任何效果。我还尝试在上面的代码中设置 alpha 值`GC`，但似乎无法获得正确的咒语来将 GC 的背景设置为透明但填充的矩形*不透明*。

我究竟做错了什么？如何使填充矩形外部的区域透明，以便填充圆角矩形外部的图像角在出现在`Tree`列表中时正确透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:04:36.493

您可以执行许多照片编辑工具可以执行的“颜色到 Alpha/透明度”之类的操作：

如果您想了解更多详细信息，请阅读本文：[查看 SWT 图像](http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html#Transparency)

像这样的东西应该工作：

```
ImageData data = yourImage.getImageData();
// Assuming the corners are white
int whitePixel = data.palette.getPixel(new RGB(255,255,255));
data.transparentPixel = whitePixel;
Image transparentImageCorners = new Image(display, data); 
```

如果您担心这可能会影响您绘制的图像中包含的颜色，请先使用您知道图像中不包含的独特颜色为背景着色。

# javascript - 通过使用 Javascript 按下按钮来更改链接

> ID：15236867
> 
> 赞同：-2
> 
> 时间：2013-03-06T00:36:16.377
> 
> 标签：javascript, html, hyperlink

我正在尝试创建代码，以便当您按下按钮时，链接会更改。这是HTML代码：

```
<div id="body">
<div class="mainbody">
<p id="para"></p>
<h1>Here is my next Javascript Example</h1><br />
<p id="link1"><a href="index.html" title="Portfolio main" target="_blank">Portfolio Main</a></p>
<input type="button" value="Change Link" id="bttn2" onClick="changeLink();" />    
</div> 
```

这是Javascript代码：

```
// JavaScript Document
function changeLink()
    {
    document.getElementById("link1").innerHTML="Paramore";
    document.getElementById("link1").href="http://www.paramore.com";
    document.getElementById("link1").target="_blank";
    } 
```

我的问题是，当我按下按钮时，链接会发生变化，但出现“Paramore”的单词实际上并不是一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:40:03.020

> 链接发生了变化，但出现“Paramore”的单词实际上并不是一个链接。

那是因为您只用静态文本替换了链接`Paramore`，因为通过设置段落的文本，您已经清除了链接。

如果将`id="link1"`属性从`p`元素移动到`a`元素，则会对其进行排序。

或者，执行以下操作：

```
var anchor = document.getElementById("link1").getElementsByTagName('a')[0];
anchor.innerHTML="Paramore";
anchor.href="http://www.paramore.com";
anchor.target="_blank"; 
```

但我不得不说，在点击时更改锚点是非常狡猾的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:39:53.953

ID 需要在`<a>`元素上。不是`<p>`元素。试试这个：

```
<div id="body">
<div class="mainbody">
<p id="para"></p>
<h1>Here is my next Javascript Example</h1><br />
<p ><a id="link1" href="index.html" title="Portfolio main" target="_blank">Portfolio Main</a></p>
<input type="button" value="Change Link" id="bttn2" onClick="changeLink();" />    
</div> 
```

在这里完成的方式相同：[http ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_elmnt_innerhtml](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_elmnt_innerhtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:40:31.353

document.getElementById("link1") 将为您提供**段落 <p>**元素，您想要的是**锚 <a>**元素。我可以建议你把属性*id="link1"*放在你的**反而？**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:41:58.440

[1] id="link1" 应该在锚标签而不是段落标签中

[2] 对 javascript DOM 对象使用 .setAttribute 方法

```
obj = document.getElementById("link1");
obj.setAttribute("href","http://www.paramore.com");
obj.setAttribute("target","_blank"); 
```**

# php - 带有推送通知的实时聊天系统 (php)

> ID：15236868
> 
> 赞同：0
> 
> 时间：2013-03-06T00:36:22.787
> 
> 标签：php, server-push, livechat

我正在开发一个约会网站，其中包括一个实时聊天系统，人们可以在其中进行私人对话（如 facebook 聊天或 badoo 消息系统）。

实时聊天的最佳方法是什么？我正在考虑一个推送系统。我是否必须将聊天日志存储在 mysql 表中，或者我可以使用纯日志文件吗？

我们的服务器在 CentOS 5.3 上运行 PHP 5.3。感谢您的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:42:33.687

我个人不想在聊天系统上从头开始。你看过 Mibew ( [http://mibew.org/](http://mibew.org/) ) 吗？我已经在几个项目中使用过它，并且每次都根据需要对其进行修改。它是开源的并且相对容易修改。

# c++ - 从模板基类派生时找不到类型

> ID：15236870
> 
> 赞同：1
> 
> 时间：2013-03-06T00:36:26.490
> 
> 标签：c++, templates, inheritance, compiler-errors, type-deduction

我很难理解为什么以下两段代码存在差异，编译器到底在做什么。

我有以下一些琐碎的代码，可以按预期编译没有任何问题：

```
class base
{
public:
   typedef int booboo;
};

class derived : public base
{
public:
   int boo()
   {
      booboo bb = 1;
      return bb;
   }
};

int main()
{
   derived d;
   d.boo();
   return 0;
} 
```

我从上面获取代码并添加一些模板参数，并开始收到与 booboo 类型无效相关的错误：

```
template <typename T>
class base
{
public:
   typedef T booboo;
};

template <typename T>
class derived : public base<T>
{
public:
   //typedef typename base<T>::booboo booboo; <-- fixes the problem
   booboo boo()
   {
      booboo bb = T(1);
      return bb;
   }
};

int main()
{
   derived<int> d;
   d.boo();
   return 0;
} 
```

错误：

```
prog.cpp:13:4: error: ‘booboo’ does not name a type
prog.cpp:13:4: note: (perhaps ‘typename base<T>::booboo’ was intended)
prog.cpp: In function ‘int main()’:
prog.cpp:23:6: error: ‘class derived<int>’ has no member named ‘boo’ 
```

[http://ideone.com/jGKYIC](http://ideone.com/jGKYIC)

.

我想详细了解，典型的 c++ 编译器如何编译代码的模板版本，它与编译原始示例有何不同，这是与代码的多次传递有关的问题，以及类型相关的外观 - UPS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:41:05.227

在第二个版本中，`booboo`是一个*依赖名称*，因此它不会在模板中自动可见。您可以添加`using typename base<T>::booboo;`到派生类，或者使用您的 typedef 解决方案，或者说`typename base<T>::booboo bb = T(1);`.

# iphone - 添加微调器时 UIView 动画失败？

> ID：15236874
> 
> 赞同：0
> 
> 时间：2013-03-06T00:36:50.100
> 
> 标签：iphone, ios, objective-c, uianimation

我目前正在构建一个 UI 插件。这个插件有 2 个图像视图，一个在另一个之上。

当用户在屏幕上滑动时：如果滑动大于某个阈值，则前面的imageView会以与滑动相同的方向离开屏幕，然后出现在后面的imageView后面。

所以我们计划将它用于图像队列。滑动成功后，前面的imageView会离开屏幕，然后居中在后面的ImageView（现在是前面）的后面，然后它会改变里面的图像。

当没有更多图像时，我设置了一个微调器以指示我们正在从服务器下载更多图像。

我们遇到了一个我们自己无法解释的错误——**当我们将微调器添加到我们的视图中时，我们的动画出现故障**。

滑动后的 imageView 不再离开屏幕而是回到原来的位置。

我们对此感到非常困惑，并确认

```
 [self.view addSubview:spinner]; 
```

将导致我们的动画出现意外行为。

附请细动方法：

```
- (void)move:(UIPanGestureRecognizer *)sender {
    CGPoint translatedPoint = [sender translationInView:self.frontView];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
        _firstX = self.frontView.center.x;
        _firstY = self.frontView.center.y;
    }

    translatedPoint = CGPointMake(_firstX+translatedPoint.x, _firstY+translatedPoint.y);
    [self.frontView setCenter:translatedPoint];

    if ([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {
        // Calculate the if the x-movement is greater than a threshold
        float xTravelled = 0;
        if (self.frontView.center.x > _firstX)
            xTravelled = self.frontView.center.x - _firstX;
        else
            xTravelled = _firstX - self.frontView.center.x;

        // Only move if xTravelled is greater than threshold
        if (xTravelled > self.frontView.window.frame.size.width / 3) {
            NSLog(@"Swipe detected, currentIndex:%d", currentIndex);

            // Lock view from panning until animation is finished.
            self.view.userInteractionEnabled = NO;

            float newXPosition;
            if (self.frontView.center.x > _firstX) {
                newXPosition = (float) self.view.frame.size.width * 2;
            } else {
                newXPosition = (float) -2 * self.view.frame.size.width;
            }

            // We should trigger a fetch as soon as the back image is empty.
            if (![self getBackView].image) {
                double delayInSeconds = 2.0;
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    //[self fetchComplete];
                    [spinner stopAnimating];
                    [spinner removeFromSuperview];
                    self.view.userInteractionEnabled = YES;
                });

                // Pop up spinner if necessary
                if (![spinner isAnimating]) {
                    self.view.userInteractionEnabled = NO;
                    [spinner setCenter:CGPointMake(_firstX, _firstY)];
                    [spinner startAnimating];
                    /* THIS BREAKS OUR ANIMATION - Enable it to see 
                     [self.view addSubview:spinner];
                     */
                }
            }

            // Animate the rest of the swipe
            [UIView \
             animateWithDuration:0.5f delay:0.0f options:UIViewAnimationOptionTransitionNone
             animations:^{
                 // Use smooth animation to move the top image out of the way
                 [self.frontView setCenter:CGPointMake(newXPosition, self.frontView.center.y)];
             }
             completion:^(BOOL finished){
                 // Set it to be physically behind the back image
                 [self.view sendSubviewToBack:self.frontView];
                 //[self.frontView setCenter:CGPointMake(_firstX, _firstY)];  // why not necessary??

                 // Now change the picture
                 UIImage *next = [self nextImage];
                 self.frontView.image = next;

                 // update self.top to reference the new back image
                 self.frontView = [self getBackView];

                 // Do not override spinner's block 
                 if (![spinner isAnimating])
                     self.view.userInteractionEnabled = YES;
             }];
        } else {
            NSLog(@"Swipe NOT detected");
            [UIView \
             animateWithDuration:0.5f delay:0.0f options:UIViewAnimationOptionAllowUserInteraction
             animations:^{
                 [self.frontView setCenter:CGPointMake(_firstX, _firstY)];
             } completion:^(BOOL finished) {
                 self.view.userInteractionEnabled = YES;
             }];
        }
    } 
```

我知道这相当冗长，但我已将此错误隔离到一个示例项目中，您可以下载并在您的计算机上运行。这个示例项目在这里：[http ://bit.ly/WO4cEI](http://bit.ly/WO4cEI)

我们怀疑向 self.view 添加子视图会导致 [self.view sendSubviewToBack:self.frontView] 失败。但我们也不确定为什么这会导致我们的动画失败。

谢谢您的帮助！！

**编辑**

@user2113425 的建议解决了这个问题！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:57:36.860

首先，无论如何您都不必在那时添加微调器。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:1];

    [panRecognizer setDelegate:self];
    [self.view addGestureRecognizer:panRecognizer];
    self.view.userInteractionEnabled = YES;

    // Index starts at zero so we pick even.
    self.frontView = self.evenImage;

    // Setting the images
    images = [[NSArray alloc] initWithObjects:@"a.jpeg", @"b.jpeg", nil]; // @"c.jpeg", @"d.jpeg", @"e.jpeg", nil];

    currentIndex = 0;
    self.evenImage.image = [self nextImage];
    self.oddImage.image = [self nextImage];

    // Spinner
    spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    **spinner.hidesWhenStopped = YES;
    [self.view addSubview:spinner];**
} 
```

您可以在 viewDidLoad 中添加微调器并设置 hidesWhenStopped 以隐藏它，并在移动功能中删除 [微调器 removeFromSuperview]; 这条线。

addSubView 的问题是它改变了子视图的 zorder，它可能与此有关，但不确定..

有很多方法可以解决这个问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:02:43.783

原因可能是微调器的动画。当viewController包含一个tableView刷新频率很高时也会出现同样的现象。图层的重绘会破坏动画。如果spinner即将成为视图的子视图，就会发生这种现象。

# namespaces - Laravel 4 目标接口不可实例化

> ID：15236878
> 
> 赞同：7
> 
> 时间：2013-03-06T00:37:35.377
> 
> 标签：namespaces, ioc-container, laravel, laravel-4

这与这个问题有关[How to register a namespace in laravel 4](https://stackoverflow.com/questions/15204103/how-to-register-a-namespace-in-laravel-4)但我相信我已经解决了，并且命名空间现在正在工作。

我遇到了一个新问题。我相信错误来自尝试在控制器构造函数中键入提示，并且与使用命名空间和使用 ioc 有关。

```
BindingResolutionException: Target [App\Models\Interfaces\PostRepositoryInterface] is not instantiable. 
```

在我尝试引入命名空间之前，下面的方法运行良好。我可以删除所有命名空间并将接口和存储库放在同一目录中，但想知道如何使命名空间与这种使用 ioc 的方法一起工作。

以下是相关文件。

路由.php

```
Route::resource('posts', 'PostsController'); 
```

PostController.php

```
<?php
use App\Models\Interfaces\PostRepositoryInterface;
class PostsController extends BaseController {

    public function __construct( PostRepositoryInterface $posts )
    {
        $this->posts = $posts; 
    }

} 
```

PostRepositoryInterface.php

```
<?php namespace App\Models\Interfaces;
interface PostRepositoryInterface {
    public function all();
    public function find($id);
    public function store($data);
} 
```

EloquentPostRepository.php

```
<?php namespace App\Models\Repositories;
use App\Models\Interfaces\PostRepositoryInterface;
class EloquentPostRepository implements PostRepositoryInterface {

    public function all()
    {
        return Post::all();
            //after above edit it works to this point
            //error: App\Models\Repositories\Post not found
            //because Post is not in this namespace
    }

    public function find($id)
    {
        return Post::find($id);
    }

    public function store($data)
    {
        return Post::save($data);
    }
} 
```

你可以看到 composer dump-autoload 完成了它的工作。

作曲家/autoload_classmap.php

```
return array(
    'App\\Models\\Interfaces\\PostRepositoryInterface' => $baseDir . '/app/models/interfaces/PostRepositoryInterface.php',
    'App\\Models\\Repositories\\EloquentPostRepository' => $baseDir . '/app/models/repositories/EloquentPostRepository.php',

    ....
    ) 
```

任何想法我需要更改哪些地方或哪些内容才能使其与命名空间一起工作，就像没有它们一样？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-09-26T19:27:30.573

我知道这个问题已经得到解答，但我想提醒未来的读者，这个“ `target interface is not instantiable`”错误的另一个常见原因是忘记在`app/config/app.php`.

这仅适用于您扩展 ServiceProvider 类的情况，而不适用于使用`App::bind()`.

我犯了太多次这个错误，所以没有发布关于它的东西。因此，在您走上上述漫长道路之前，请务必注册这些提供商！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-06T04:32:11.610

好的，简短的回答：使用 App::bind() 中的完整命名空间来修复第一个错误。然后在 EloquentPostRepository.php 中，因为它有一个声明的命名空间，它会尝试将任何其他外部类调用视为在同一个命名空间中。添加一个简单的“使用帖子；” 让 PHP 知道“Post”不在同一个命名空间（App\Models\Repositories）中。我认为这是因为一旦使用了命名空间，其他类默认具有任何类名的命名空间。我认为重新发布所有更正并正常工作的代码是最简单的。

**路由.php**

```
<?php

App::bind('App\Models\Interfaces\PostRepositoryInterface',  'App\Models\Repositories\EloquentPostRepository');

Route::resource('posts', 'PostsController'); 
```

**PostController.php**

```
<?php
use App\Models\Interfaces\PostRepositoryInterface;

class PostsController extends BaseController {

    public function __construct(PostRepositoryInterface $posts)
    {
        $this->posts = $posts;
    } 
```

**EloquentPostRepository.php**

```
<?php namespace App\Models\Repositories;
use App\Models\Interfaces\PostRepositoryInterface;
use Post;
class EloquentPostRepository implements PostRepositoryInterface {

    public function all()
    {
        return Post::all();
    }

    public function find($id)
    {
        return Post::find($id);
    }

    public function store($data)
    {
        return Post::save($data);
    }
} 
```

**PostRepositoryInterface.php**

```
<?php namespace App\Models\Interfaces;
interface PostRepositoryInterface {
    public function all();
    public function find($id);
    public function store($data);
} 
```

**Post.php** *除了显示它没有声明的命名空间之外，这里没有任何相关内容*

```
<?php
class Post extends BaseModel {

    public static $rules = [
        'title' => 'required',
        'body' => 'required',
        'author_id' => 'required|numeric'
    ];

    public static $factory = [
        'title' => 'string',
        'body' => 'text'
    ];

    public function user()
    {
        return $this->belongsTo('User', 'author_id');
    }

} 
```

# session-variables - PHP 奇怪，本地工作，但服务器不

> ID：15236879
> 
> 赞同：0
> 
> 时间：2013-03-06T00:37:40.530
> 
> 标签：session-variables, php

我正在使用 PHP 处理这个网页。我正在使用 easyphp 版本进行本地测试：5.3.9 我做了一个通常的登录，注销功能。当我在本地测试时，按预期工作。但是当我通过 FTP 将它上传到 Godaddy 托管服务时，它开始做一些奇怪的事情。

*   会话变量无法正常工作，有时会起作用，有时会不起作用！db 上的登录连接和验证工作正常！但是在从另一个失败的文件中读取 SESSION 变量时。

会是什么呢？php版本？但我只是使用简单的 $_SESSION['name'] 变量。漏洞？请帮忙！

这是我已经尝试过的：

*   使用其他浏览器。
*   重新上传源（多次）
*   清除缓存、cookies等。
*   逐步测试，但就像我说的那样，它可以很好地在本地托管网页。

最后一件可能很重要的事情是数据库托管在服务器上（这不是我的本地 pc ofc），并且与该数据库的连接在这两种情况下都可以正常工作。

这是我的代码：

login.php（如果你想知道 xD）：

```
<div class="xxx">Log in</div>
    <div class="xxx">
        <form class="xxxx" method="post" action="Bean.php">
            <input type="hidden" value="login" name="oper">
            <input type="text" placeholder="E-mail" name="mail"/>
            <input type="password" placeholder="Password" name="pass"/>
            <input type="submit" value="LOG IN!" />
        </form>
    </div> 
```

豆.php

```
if (!isset ($_COOKIE[ini_get('name')])) {
session_set_cookie_params(0, '/');
session_name('name');
session_start();
}
if($oper=="login")
{
$user=$cws->VerifyUser($_POST['mail'],$_POST['pass']);//$cws is a class that connects to the server with the db via WS
if(strlen($user->body->mail)>5)//this is because if the user is not found it returns blank or '@.'
{
    $_SESSION['session_mail']=$user->body->mail;
    $_SESSION['session_name']=$user->body->name;
    $_SESSION['session_miniPicture']=$user->body->miniPicture;
    $_SESSION['session_on']=true;
    //This are the variables I can't read later!

    echo("<script type=\"text/javascript\" >                                             location.replace(\"../home.php\");
                                </script>");
}
else{
    echo("<script type=\"text/javascript\" >
                                    alert(\"E-mail or password incorrect \");                                   location.replace(\"../landing.php\");
                                </script>");
  }

} 
```

主页.php：

```
if (!isset ($_COOKIE[ini_get('name')])) {
session_set_cookie_params(0, '/');
session_name('name');
session_start();
}
//In this check, the variable $_SESSION['session_on'] is NOT set! WHY???
if(!isset($_SESSION['session_on']) || $_SESSION['session_on']==false)
{
   echo("<script type=\"text/javascript\" >
                                        location.replace(\"landing.php\");
                                        </script>");

}
echo ( "mail: ".$_SESSION['session_mail']."<br/>"); // for debug
echo ( "name: ".$_SESSION['session_name']."<br/>"); // for debug
echo ( "on: ".$_SESSION['session_on']."<br/>"); // for debug

 Welcome <?php echo $_SESSION['session_name']; ?> &nbsp;- <a href="signout.php">Sign out</a> 
```

签出.php：

```
if (!isset ($_COOKIE[ini_get('name')])) {
session_set_cookie_params(0, '/');
session_name('name');
session_start();
}

if(isset($_SESSION['session_on']) && $_SESSION['session_on']==true)
{
  $_SESSION['session_on']=false;
  echo("<script type=\"text/javascript\" >

                                       location.replace(\"landing.php\");
                                    </script>");

} 
```

请帮忙！我应该联系 Godaddy 支持吗？这与php版本有关吗？会是什么呢？谢谢你

亚历杭德罗·卡萨斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:49:37.757

好的，我明白了-您的问题如下：

仅当没有会话 cookie 时，您才开始会话。但是，如果您注销，您的会话和 cookie 不会被破坏。情况是这样的。您在 File1.php 中的会话中编写了一些内容，并希望在 File2.php 中读取它。但在 File2.php 中，会话永远不会启动，因为您有一个会话 cookie。您必须在任何文件中启动会话，因此请从您的代码中删除 $_COOKIE 条件。

```
session_set_cookie_params(0, '/');
session_name('name');
session_start(); 
```

# random - 在 Asterisk 服务器上创建多位随机数

> ID：15236880
> 
> 赞同：0
> 
> 时间：2013-03-06T00:37:43.953
> 
> 标签：random, asterisk

我有一个非常基本的星号服务器，它可以获取来电者 ID 和来自来电者的号码。我试图让它也生成一个简单的 5 位数字，以便在挂断之前回读给呼叫者。我试图使用 RAND，但这只会给我 1 位数。我已经尝试了所有我能想到并在网上找到的东西。

关于如何让这个功能工作的任何想法？我只需要在其他一切都在运行时创建一个“随机”的 5 位数字。

感谢您对此的任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:48:45.993

rand(10000,99999) 应该给你 5 位数字

# wso2 - 向 ESB 集群添加功能

> ID：15236884
> 
> 赞同：1
> 
> 时间：2013-03-06T00:38:02.717
> 
> 标签：wso2

你有一个 WSO2 ESB 集群。您只能在集群的 manager 实例中访问管理控制台，worker 通过 G-Reg 获取配置和注册表，而本地 artefacts 通过 SVN 共享。

然后从 p2-repo 添加新功能（假设您将 DSS 添加到 ESB），然后重新启动服务器，管理服务器添加了新功能。

在集群中传播这个新特性的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:23:32.780

我将再次回答我自己的问题，以防其他人发现它有用。

无法在集群内共享要素。您必须要么通过主控制台连接到工作节点，要么在工作人员中启动控制台，然后手动添加功能。

我尝试使用master创建一个镜像来克隆到worker，但是我在集群的SVN上遇到了问题，所以没有成功。

如果您在云环境中工作，请不要忘记更改克隆您的工作人员的工作人员映像。

请注意，如果您将角色添加到主节点，这些角色**将**被传播到工作人员（即使功能没有）。

# c - 如何检测点是否位于线段

> ID：15236891
> 
> 赞同：0
> 
> 时间：2013-03-06T00:38:49.460
> 
> 标签：c, geometry, computational-geometry

目前我可以使用以下代码检测该点是否属于线段：

```
uint8_t point_lies_onSegment(const POINT2D *point, const POINT2D *linea, const POINT2D *lineb) {
double slope, intercept;
  double px, py;
  double left, top, right, bottom; // Bounding Box For Line Segment
  double dx, dy;

px = point->x;
py = point->y;

dx = lineb->x - linea->x;
dy = lineb->y - linea->y;

  slope = dy / dx;
  // y = mx + c
  // intercept c = y - mx
  intercept = linea->y - slope * linea->x; // which is same as y2 - slope * x2

  // For Bounding Box
  if(linea->x < lineb->x) {
    left = linea->x;
    right = lineb->x;
  } else {
    left = lineb->x;
    right = linea->x;
  }
  if(linea->y < lineb->y) {
    top = linea->y;
    bottom = lineb->y;
  } else {
    top = linea->y;
    bottom = lineb->y;
  }

  //"Equation of the line: %.2f X %c %.2f\n", slope, ((intercept < 0) ? ' ' : '+'), intercept;

  if( slope * px + intercept > (py - FP_TOLERANCE) &&
    slope * px + intercept < (py + FP_TOLERANCE)) {
      if( px >= left && px <= right && 
          py >= top && py <= bottom ) {
            return VG_TRUE;
      }
      else
        return VG_FALSE;
  }
  else
    return VG_FALSE;
} 
```

但是如果这条线是垂直的，它就不能按预期工作。例如：

线段 = (10, 10) - (10, 30) 点 = (10, 20)

这返回 FALSE。

怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:49:31.113

一条垂直线将使您的程序除以零。我很惊讶你能得到任何输出——我原以为它会崩溃。由于它没有崩溃，您可能会`NaN`进入`slope`，这会导致您的其余问题。您可能会想要使用与当前使用不同的算法 - 例如，不需要您计算斜率的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:49:47.527

如果直线是垂直的，则需要检查相关点的 x 坐标。如果该点的 x 坐标与垂直线段的 x 坐标相同 - 然后检查该点的 y 坐标是否在垂直线段的 y 坐标之间。

# php - mod.rewrite 多个规则相同的目录

> ID：15236899
> 
> 赞同：1
> 
> 时间：2013-03-06T00:39:34.600
> 
> 标签：php, apache, mod-rewrite

我正在使用以下代码...

```
#Fix Rewrite
Options -Multiviews

# Mod Rewrite
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)?$ index.php?q=$1 [L] 
```

变成`www.website.com/index.php?q=Keyword`_`www.website.com/Keyword`

效果很好……但是……

我也（在同一目录中）有一个名为的文件`spec.php`，它接受`GET`一个`eid`.

我还需要有一个规则可以变成`www.website.com/spec.php?eid=00000`或`www.website.com/00000`不`www.website.com/spec/00000`实际移动`spec.php`到子目录中。

任何帮助将不胜感激，我的眼睛被谷歌烧伤了。我发现一些做类似的事情，但是当我试图将它与我的情况相匹配时，我遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:02:28.793

所以这条线在这里

```
RewriteRule ^(.*)?$ index.php?q=$1 [L] 
```

是匹配一切，如果你想有`website.com/Keyword`工作和`website.com/spec/0000`工作那么你需要添加另一个条件

我认为这会奏效

```
RewriteRule ^/spec/(.+)$ /spec.php?eid=$1 [L]
RewriteRule ^(.*)?$ /index.php?q=$1 [L] 
```

**这是什么话？**

First part is a regular expression, second part is the URL to map it to and the last part is the flags. In this instance we put the `/spec/` condition first so that it is hit first as the second condition will match everything else and then make sure the `[L]` flag is set as that tells mod_rewrite to stop if the current condition matches.

# c# - WPF 应用程序不响应 WM_CLOSE

> ID：15236912
> 
> 赞同：1
> 
> 时间：2013-03-06T00:40:21.110
> 
> 标签：c#, c++, wpf

我正在尝试从 c++ 应用程序关闭 C# .NET 4 WPF 应用程序。C++ 应用程序使用枚举窗口的标准技术，找到与给定进程 ID 对应的窗口，通过 PostMessage 向窗口发送 WM_CLOSE，然后是 WaitForSingleObject(pid, 5000)。但是，我的 WPF 应用程序永远不会关闭，即 WaitForSingleObject 超时。

我的 WPF 应用程序覆盖了 Window::OnClosed()：

*   如果我通过单击窗口的 X 手动关闭 WPF 应用程序，则会调用此方法。
*   同样，如果在 Windows 的“应用程序”选项卡中的任务管理器中，我在 WPF 进程上执行“结束任务”，则会调用此方法（显然在该选项卡上使用 WM_CLOSE 消息，而在“进程”选项卡上，结束任务使用 WM_QUIT 消息）。
*   当我的 C++ 应用程序发送 WM_CLOSE 时，永远不会调用此方法
*   当我的 C++ 应用程序改为发送 WM_QUIT 时（因此所有 C++ 源代码都未更改，除了发送的消息），我的 WPF 应用程序被终止。
*   我尝试在 WPF 应用程序中创建自己的 WndProc() 处理程序，如果我将鼠标悬停在 WPF GUI 上，方法会被调用，但是当我的 C++ 应用程序再次发送 WM_CLOSE 时，这个方法永远不会被调用，它几乎就像我的 WPF 应用程序没有收到 WM_CLOSE 消息。
*   我创建了一个 C# 应用程序，从中可以使用 Process.GetProcessById(pid) 和 proc.CloseMainWindow()，这应该与 WM_CLOSE 相同。这个可行： OnClosed() 方法被调用。

PostMessage(hwnd, WM_CLOSE) 是从 C++ 应用程序优雅地关闭 WPF 应用程序的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:07:46.463

我最终确实找到了答案，而且非常简单：问题是与“查找与给定进程 ID 对应的那个”相关的代码。问题是我没有做太多低级win32的东西，所以我错过了一个重要的细节。这是正在发生的事情和解决方案，以防它帮助某人：

C++ 函数 closeProc() 打开必须关闭的现有进程的句柄，并为 win32 函数 EnumWindows 找到的每个窗口调用回调函数 requestMainWindowClose()，并假定 requestMainWindowClose() 已发送关闭消息到感兴趣的进程，所以它等待进程退出。如果进程在一定时间内没有退出，它将尝试通过 TerminateProcess() 强制终止它。如果还是不行，那就放弃。closeProc() 看起来像这样：

```
void closeProc()
{
    HANDLE ps = OpenProcess( SYNCHRONIZE | PROCESS_TERMINATE, FALSE, dwProcessId );
    if (ps == NULL)
        throw std::runtime_error(...);

    EnumWindows( requestMainWindowClose, dwProcessId );

    static const int MAX_WAIT_MILLISEC = 5000; 
    const DWORD result = WaitForSingleObject(ps, MAX_WAIT_MILLISEC);
    if (result != WAIT_OBJECT_0)
    {
        if (result == WAIT_TIMEOUT)
        {
            LOGF_ERROR("Could not clcose proc (PID %s): did not exit within %s ms",
                dwProcessId << MAX_WAIT_MILLISEC);
        }
        else
        {
            LOGF_ERROR("Could not close proc (PID %s): %s", 
                dwProcessId << getLastWin32Error());
        }

        LOGF_ERROR("Trying to *terminate* proc (PID %s)", dwProcessId);
        if (TerminateProcess(ps, 0))
            exited = true;
        }
    }

    CloseHandle( ps ) ;
} 
```

问题出在 requestMainWindowClose 中，这里是原始代码：

```
BOOL CALLBACK 
requestMainWindowClose( HWND nextWindow, LPARAM closePid )
{
    DWORD windowPid;
    GetWindowThreadProcessId(nextWindow, &windowPid);
    if ( windowPid==(DWORD)closePid )
    {
        ::PostMessage( nextWindow, WM_CLOSE, 0, 0 );
        return false;
    }

    return true;
} 
```

如上所述，回调函数确定 EnumWindows() 赋予它的窗口句柄 (nextWindow) 的进程 ID，并与我们想要关闭的所需进程 (closePid) 进行比较。如果匹配，该函数向它发送一个 CLOSE 消息并返回。

到目前为止一切都很好。问题是它返回 false，因此 EnumWindows() 只会将消息发送到进程的一个窗口，并且看起来 WPF 应用程序有多个窗口：即使您的代码只创建一个窗口，隐藏的窗口也会在幕后创建通过 WPF。它们都被 EnumWindows 发现；但第一个很少是主应用程序窗口。所以 requestMainWindowClose() 从来没有将 CLOSE 发送到我的 WPF 应用程序的主窗口，从来没有机会。

事实上，修复就是这么简单，即不要返回 false：

```
BOOL CALLBACK 
requestMainWindowClose( HWND nextWindow, LPARAM closePid )
{
    DWORD windowPid;
    GetWindowThreadProcessId( nextWindow, &windowPid );
    if ( windowPid==(DWORD)closePid )  
        ::PostMessage( nextWindow, WM_CLOSE, 0, 0 );

    return true; 
} 
```

Only the top app window of a WPF will respond to the CLOSE message.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:44:13.900

系统菜单上的关闭命令的直接等效项是：

```
PostMessage(hwnd, WM_SYSCOMMAND, SC_CLOSE, 0); 
```

你可以试试那个。

# java - gwan没有重新编译java文件

> ID：15236914
> 
> 赞同：2
> 
> 时间：2013-03-06T00:40:29.070
> 
> 标签：java, g-wan, dynamic-class-loaders

我针对运行在 Ubuntu 12.04 服务器上的 gwan 服务器附带的标准 hello.java 和 hello.c 进行了测试。G-WAN 4.3.1 64 位（2013 年 3 月 1 日 17:36:39）

一旦我运行 gwan

须藤 ./gwan -d

我还注意到在没有 daemon 选项的情况下运行相同的行为。

然后浏览到 192.168.0.2:8080/?hello.c 我得到“Hello, ANSI C!”的预期输出。我更改 hello.c 中的文本并刷新浏览器并获得预期的更改。

如果我对 hello.java 文件做同样的事情，在我重新启动 gwan 之前不会出现对文本的更改。

有谁知道我是否遗漏了一些在文件更改时会导致重新编译的简单设置？我正在使用 OpenJdk 7。（刚刚将其安装在全新安装的 ubuntu 12.04 上）我什至尝试将其称为 192.168.0.2:8080/?hello.java&n=1 以消除缓存的可能性，然后是另一个浏览器，然后是另一台机器不同的网络。同样的事情，在我重新启动服务器之前似乎不会发生更改。（对于 java，它适用于 .c 文件）

谢谢-史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:46:54.403

你说的对。这是一个长期未解决的问题，因为我们没有找到如何编写和使用*“JNI 自定义类加载器”*，即动态卸载和重新加载 Java 类的方法。

当我们寻求帮助时，一些 Java 用户将我们重定向到支持此功能的巨大（数百 MB）Java 包，但由于这只是几行 JNI ANSI C 代码的问题，我们希望在 C 中实现它G-WAN 程序本身（我们只是缺乏执行它的 JVM 知识）。

来自 Java 社区的任何帮助将不胜感激（贡献者将在到期时获得信用）。我们仍然缺少这个 Java 特性。

# xcode - 基本国际化按语言设置隐藏/显示我的视图

> ID：15236916
> 
> 赞同：0
> 
> 时间：2013-03-06T00:40:33.100
> 
> 标签：xcode, ios6, internationalization

我在 XCode 中使用“基础国际化”来本地化我的故事板。

设置语言后：德语，英语，在 Xcode 中检查“使用基本国际化”我有一个非常奇怪和烦人的行为：当我向情节提要元素添加视图并在模拟器中运行它时，我只能看到添加的视图我的模拟器语言是英语，但是当我将其设置为德语时，我可以看到一个完全空白的白色 ui。

有人见过类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:27:16.387

最后我已经解决了。

XCode 的这个特性非常有问题，需要时间来适应它令人讨厌的行为。

创建项目后，在检查基础国际化之前，您应该至少打开所有情节提要一次。您还应该打开本地化字符串文件。在你必须清理你的项目之后。

在这些步骤之后，您可以设置基本国际化。

最后它起作用了。

真实的故事。

# spring - 在转换特殊字符的字段集中使用 h:panelGroup 的 Ajax 请求

> ID：15236917
> 
> 赞同：0
> 
> 时间：2013-03-06T00:40:45.637
> 
> 标签：spring, jsf, primefaces

当我的值包含 á、ã、ó 等特殊字符时，我在请求中遇到问题。我有一个带有一些 inputText 字段的字段集。

该片段显示了正在发生的事情：

```
<h:panelGroup id="filter">
   <fieldset>
     <legend>Filter</legend>
        <div class="grid_6">
           <div class="row">
           <div class="leftt">Value:</div>
           <div class="rightt">
               <h:inputText id="value" maxlength="50" size="50" value="#{controller.value}" />
           </div>
           <div class="clearr"></div>
         </div>
    </fieldset>
</h:panelGroup>

<p:commandButton id="search" action="#{controller.find }" 
ajax="true" onclick="dialogStatus.show();"    update="dataTable,status,statusDialog,msgs,filter" value="Find" /> 
```

当我插入值

> 若昂

，然后点击查找按钮，它将其转换为

> 若奥

如果我删除 panelGroup，它可以正常工作。谁能为我解释这种行为？

我正在使用 PrimeFaces 2.2、JBoss 4.2.3 和 Spring 3.1.0。

# python - Scrapy - 分割导出文件的好方法？

> ID：15236924
> 
> 赞同：1
> 
> 时间：2013-03-06T00:41:17.600
> 
> 标签：python, scrapy, web-crawler, screen-scraping

每当蜘蛛解析了一定数量的项目（MAX_ITEMS）时，我想将 JsonLinesItemExporter 导出的文件拆分为多个文件。下面的代码是一个可行的解决方案，但我需要对这里的方法进行一些输入。我担心在某些时候可能会出错，因为我明确调用 spider_opened() 和 spider_closed() 来关闭旧文件并打开一个新文件。任何想法/最佳实践表示赞赏:)

```
# Define your item pipelines here
#
# Don't forget to add your pipeline to the ITEM_PIPELINES setting
# See: http://doc.scrapy.org/topics/item-pipeline.html

from scrapy import signals
from scrapy import log
from scrapy.contrib.exporter import JsonLinesItemExporter

MAX_ITEMS = 10000
class DmozPipeline(object):
    def process_item(self, item, spider):
        return item

class JsonLinePipeline(object):
    def __init__(self):
        self.files = {}
        self.ids_seen = set()
        self.fileid = 0
        self.filetype = ".json"

    @classmethod
    def from_crawler(cls, crawler):
        pipeline = cls()
        crawler.signals.connect(pipeline.spider_opened, signals.spider_opened)
        crawler.signals.connect(pipeline.spider_closed, signals.spider_closed)
        return pipeline

    def spider_opened(self, spider):
        file = open("items-" + str(self.fileid) + self.filetype, 'w+b')
        self.files[spider] = file
        self.exporter = JsonLinesItemExporter(file)
        self.exporter.start_exporting()

    def spider_closed(self, spider):
        self.exporter.finish_exporting()
        file = self.files.pop(spider)
        file.close()

    def process_item(self, item, spider):
        i = len(self.ids_seen)
        if i % MAX_ITEMS + 1 == True and i > 0:
            self.spider_closed(spider)
            self.fileid = self.fileid + 1
            self.spider_opened(spider)

        if item['link'][0] in self.ids_seen:
            raise DropItem("Duplicate site found: %s" % item)
        else:
            self.ids_seen.add(item['link'][0])
            self.exporter.export_item(item)
            return item 
```

# php - 如何通过恢复以前的登录会话来克服 FireFox 的“恢复以前的会话”

> ID：15236925
> 
> 赞同：0
> 
> 时间：2013-03-06T00:41:52.313
> 
> 标签：php, session, firefox, wamp

在 FireFox 中，如果用户登录 Web 应用程序并关闭浏览器，下次打开浏览器并选择“恢复上一个会话”时，用户仍将处于登录状态。

此行为已在[此处讨论](https://stackoverflow.com/questions/777767/firefox-session-cookies)。

我想知道的是如何防止这种情况？我决定用户在关闭浏览器时应该注销。我正在使用 WAMP，默认情况下`session.cookie_lifetime=0`在 php.ini 文件中。这不应该在浏览器关闭时破坏会话cookie，还是“恢复以前的会话”以某种方式保留不受此影响的备份？我不确定，但这可能是 WAMP 的问题，而不是其他任何问题。

这绝对是可能的，因为这个网站做到了[http://www.mathhelpboards.com/private.php](http://www.mathhelpboards.com/private.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:44:36.013

Firefox 恢复会话功能的全部意义在于它不会在浏览器关闭和重新打开时破坏会话 cookie。由个人用户做出决定，而不是网站的所有者。

也就是说，在某些情况下它可能是合适的——例如银行网站或类似网站。然后解决方案是使服务器端的会话无效 - 如果用户在一定时间内处于非活动状态，则关闭会话并要求他们再次登录。

# fortran - 在 Fortran 中如何分配 c_ptr？

> ID：15236926
> 
> 赞同：0
> 
> 时间：2013-03-06T00:41:52.877
> 
> 标签：fortran, fortran-iso-c-binding, fortran2003

给定一个 Fortran 派生类型，其字段为 c_ptr（来自 iso_c_binding）和两个变量 A 和 B 的所述类型，如何定义赋值 A = B？如果指针是 fortran 指针，它们实际上会在赋值期间被取消引用。c_ptr 也一样吗？

```
USE, intrinsic :: iso_c_binding
...
type all_mine
    real    :: E
    type(c_ptr) :: ptr_to_some_c
end type all_mine
...
type(all_mine)  :: A, B
...
A = B   ! What happens here? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:59:06.040

存储在 C_PTR 派生类型对象中的 C 地址不会像（顶级）Fortran 指针那样取消引用。右侧对象内的 C 地址分配给左侧对象。

（它更类似于 Fortran 非多态标量指针赋值。）

从概念上讲，就好像 C_PTR 类型只有不可分配的非指针组件，并且它们是通过内在分配规则进行分配的。

# linq - EF 5 Linq 相关实体始终为空

> ID：15236928
> 
> 赞同：0
> 
> 时间：2013-03-06T00:42:08.967
> 
> 标签：linq, c#-4.0, entity-framework-5

我有一个实体 AllocatedContainers，它具有 InventoryContainerDetails 的外键。

当我执行下面的 linq 查询时，它返回 AllocatedContainers 中没有相关表条目的记录，但是当 AllocatedContainer 中应该有连接记录时，不会返回整行。想不通为什么？

这是类，注意与 AllocatedContainer 的虚拟关系

```
public partial class InventoryContainerDetail
{
    public InventoryContainerDetail()
    {
        this.AllocatedContainers = new HashSet<AllocatedContainer>();
    }

    public int Id { get; set; }
    public int InventoryContainerHeaderId { get; set; }
    public int ItemId { get; set; }
    public Nullable<int> ReceiptDetailId { get; set; }
    public decimal QtyInContainer { get; set; }

    public virtual InventoryContainerHeader InventoryContainerHeader { get; set; }
    public virtual Item Item { get; set; }
    public virtual ICollection<AllocatedContainer> AllocatedContainers { get; set; }
} 
```

这是查询：

```
IQueryable<InventoryContainerDetail> containerDtlsToAllocateOLD = 
                repository
                    .SearchFor(
                        x => x.InventoryContainerHeader.FacilityId == intFacilityId
                        && x.ItemId == intItemId
                        && (x.QtyInContainer - x.AllocatedContainers.Sum(a => a.AllocatedQty)) > 0
                    )
                    .OrderBy(x => x.CreatedOn); 
```

这提出了这个SQL：

```
SELECT 
[Project2].[Id1] AS [Id], 
[Project2].[Id] AS [Id1], 
[Project2].[InventoryContainerHeaderId] AS [InventoryContainerHeaderId], 
[Project2].[ItemId] AS [ItemId], 
[Project2].[ReceiptDetailId] AS [ReceiptDetailId], 
[Project2].[QtyInContainer] AS [QtyInContainer], 
[Project2].[CreatedById] AS [CreatedById], 
[Project2].[CreatedOn] AS [CreatedOn], 
[Project2].[ModifiedById] AS [ModifiedById], 
[Project2].[ModifiedOn] AS [ModifiedOn], 
[Project2].[C1] AS [C1], 
[Project2].[Id2] AS [Id2], 
[Project2].[AllocationNeedId] AS [AllocationNeedId], 
[Project2].[AllocatedContainerDetailId] AS [AllocatedContainerDetailId], 
[Project2].[AllocatedQty] AS [AllocatedQty], 
[Project2].[CreatedById1] AS [CreatedById1], 
[Project2].[CreatedOn1] AS [CreatedOn1], 
[Project2].[ModifiedById1] AS [ModifiedById1], 
[Project2].[ModifiedOn1] AS [ModifiedOn1]
FROM ( SELECT 
    [Project1].[Id] AS [Id], 
    [Project1].[InventoryContainerHeaderId] AS [InventoryContainerHeaderId], 
    [Project1].[ItemId] AS [ItemId], 
    [Project1].[ReceiptDetailId] AS [ReceiptDetailId], 
    [Project1].[QtyInContainer] AS [QtyInContainer], 
    [Project1].[CreatedById] AS [CreatedById], 
    [Project1].[CreatedOn] AS [CreatedOn], 
    [Project1].[ModifiedById] AS [ModifiedById], 
    [Project1].[ModifiedOn] AS [ModifiedOn], 
    [Project1].[Id1] AS [Id1], 
    [Extent4].[Id] AS [Id2], 
    [Extent4].[AllocationNeedId] AS [AllocationNeedId], 
    [Extent4].[AllocatedContainerDetailId] AS [AllocatedContainerDetailId], 
    [Extent4].[AllocatedQty] AS [AllocatedQty], 
    [Extent4].[CreatedById] AS [CreatedById1], 
    [Extent4].[CreatedOn] AS [CreatedOn1], 
    [Extent4].[ModifiedById] AS [ModifiedById1], 
    [Extent4].[ModifiedOn] AS [ModifiedOn1], 
    CASE WHEN ([Extent4].[Id] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
    FROM   (SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[InventoryContainerHeaderId] AS [InventoryContainerHeaderId], 
        [Extent1].[ItemId] AS [ItemId], 
        [Extent1].[ReceiptDetailId] AS [ReceiptDetailId], 
        [Extent1].[QtyInContainer] AS [QtyInContainer], 
        [Extent1].[CreatedById] AS [CreatedById], 
        [Extent1].[CreatedOn] AS [CreatedOn], 
        [Extent1].[ModifiedById] AS [ModifiedById], 
        [Extent1].[ModifiedOn] AS [ModifiedOn], 
        [Extent2].[Id] AS [Id1], 
        [Extent2].[FacilityId] AS [FacilityId], 
        (SELECT 
            SUM([Extent3].[AllocatedQty]) AS [A1]
            FROM [dbo].[AllocatedContainers] AS [Extent3]
            WHERE [Extent1].[Id] = [Extent3].[AllocatedContainerDetailId]) AS [C1]
        FROM  [dbo].[InventoryContainerDetail] AS [Extent1]
        INNER JOIN [dbo].[InventoryContainerHeader] AS [Extent2] ON [Extent1].[InventoryContainerHeaderId] = [Extent2].[Id] ) AS [Project1]
    LEFT OUTER JOIN [dbo].[AllocatedContainers] AS [Extent4] ON [Project1].[Id] = [Extent4].[AllocatedContainerDetailId]
    WHERE (([Project1].[QtyInContainer] - [Project1].[C1]) > cast(0 as decimal(18))) AND ([Project1].[FacilityId] = 1) AND ([Project1].[ItemId] = 3027)
)  AS [Project2]
ORDER BY [Project2].[CreatedOn] ASC, [Project2].[Id1] ASC, [Project2].[Id] ASC, [Project2].[C1] ASC 
```

这是存储库方法。请注意，我正在通过 .Include 诱导急切加载，希望它能够正常工作，但没有运气：

```
public override IQueryable<InventoryContainerDetail> SearchFor(Expression<Func<InventoryContainerDetail, bool>> predicate, Expression<Func<InventoryContainerDetail, bool>> orderbylinq = null)
        {
            if (orderbylinq == null)
            {
                return DbSet.Include("AllocatedContainers").Where(predicate);
            }
            else
            {
                return DbSet.Include("AllocatedContainers").Where(predicate).OrderBy(orderbylinq);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:46:38.930

Ok, actually it is working...I changed `"&& (x.QtyInContainer - x.AllocatedContainers.Sum(a => a.AllocatedQty)) > 0"` to this `"&& (x.QtyInContainer - (x.AllocatedContainers.Count() == 0 ? 0 : x.AllocatedContainers.Sum(a => a.AllocatedQty))) > 0"`.

Thanks Ladislav for showing me that trick...you can then take that actual sql and paste it in SQL Server and help debug from there too, which is great

# django - Meta：为什么没有基于自定义类的视图？

> ID：15236931
> 
> 赞同：0
> 
> 时间：2013-03-06T00:42:32.217
> 
> 标签：django, django-class-based-views

这似乎是一个非常有用的明显模式，可以帮助开发人员遵守 DRY。例如，定义可以传递给每个视图的特定上下文。据我所知，没有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:35:48.883

如文档中所定义，所有基于类的通用视图都可以扩展并覆盖它们的方法。例如，如果您想在视图定义的变量之外定义额外的上下文变量，只需使用以下`get_context_data`方法添加它们：

```
class CustomDetailView(DetailView):
    model = MyModel
    def get_context_data(self, **kwargs):
        context = super(CustomDetailView, self).get_context_data(**kwargs)
        context.update({
            "foo": "bar",
            "baz": 999,
        })
        return context 
```

或者，您可能想要定义一个特定的 mixin，它将根据需要包含在每个视图中。

# grails - 无法从扩展 SpringSecurity User 类的类中获取字段（在 Grails 项目中）

> ID：15236933
> 
> 赞同：0
> 
> 时间：2013-03-06T00:42:45.400
> 
> 标签：grails, spring-security, field, extends

我有 2 个子类，它扩展了 Grails 项目中的 SpringSecurity User 类。例子：

```
class MyUserOne extends User {
   def email
   def address
}

class MyUserTwo extends User {
   def company
   def town
} 
```

我在 BootStrap 中创建了一些 MyUserOne 和 MyUserTwo 对象并将它们保存到测试数据库中，但是......当我像 MyUserOne 用户一样登录并尝试在 .gsp 文件中访问*电子邮件*字段时：

```
<sec:loggedInUserInfo field="email"/> 
```

它抛出一个异常，说“电子邮件”不是用户类的属性，这是真的，但是，我怎样才能访问子类的字段？我用这个代码片段“解决了”这个问题：

```
def user = springSecurityService.currentUser
[userInstance: user] 
```

在任何控制器中，然后我可以访问该字段

```
${userInstance.email} 
```

...但是这样做我有两次相同的用户对象（*userInstance*和*springSecurityService*，**我认为这不是正确的方法**。

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:31:11.377

您是否指定了 springSecurity 应用作 User 对象的类？

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'com.project.MyUserOne' 
```

# arrays - 变量名中的 Visual Basic 变量

> ID：15236937
> 
> 赞同：-1
> 
> 时间：2013-03-06T00:43:21.203
> 
> 标签：arrays, vb.net, variables

在 VB 中，我想根据文本框中的整数值调用一个数组。

数组命名如下：arr1、arr2、arr3 等。

所以，

```
Dim num1 as Integer = TextBox1.Text 
```

如果 num1 = 6，那么在下面的代码中，我希望它调用 arr6。

```
TextBox1.AppendText(arr(num1)) 
```

任何帮助或指导表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:49:40.787

.NET 中没有动态变量名（如 PHP 或其他脚本语言）。此外，您应该确保它`TextBox1.Text`实际上是一个整数，否则您将引发异常。

```
Dim num1 as Integer
If Integer.TryParse(TextBox1.Text, num1) then
'some logic here because it parsed, otherwise its not a number!

end if 
```

如果您确实需要以不同方式“命名”的数组，则可以使用 List 或其他通用集合来保存数组并通过它们在列表中的索引来引用它们。

```
Dim lst As New List(Of Integer())

Dim arr1 As Integer() = {1, 2, 3, 4, 5}
Dim arr2 As Integer() = {2, 4, 6, 8, 9}
lst.Add(arr1)
lst.Add(arr2)

dim arrToUse as Integer() = lst.Item(num1) 
```

# c# - 如何读取文本文件中的二进制字段

> ID：15236939
> 
> 赞同：1
> 
> 时间：2013-03-06T00:43:28.243
> 
> 标签：c#, binary, streamreader

我有一个固定宽度的文本文件，我现在正在使用 streamreader/readline() 来阅读。

当我在记事本++中打开时，有一个字段如下所示

[NUL][NUL][NUL][SUB]

其他一切都是普通文本。我知道这个字段是 4 个字符，代表一个计数，所以应该看起来像这个 '0001'

我怎样才能阅读它并转换成'0001'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:48:11.780

我不确定“SUB”是什么意思 - 但如果它读作 U+0001，你总是可以使用：

```
for (int i = 0; i < 4; i++) {
    chars[i + index] = (int) chars[i + index] + '0';
} 
```

（假设您有一个`char[]`被调用`chars`的 ，4 个字节从 开始`index`。）

首先要检查的是您是否真正正确地阅读了这些字符。坦率地说，有一个带有二进制数据的“文本”文件开始有点狡猾，但如果它只有字节 0-9，那么在*大多数*编码中，我希望它对应于 U+0000 到 U+0009。

# php - Wordpress 分类 > 文章 Orderby

> ID：15236949
> 
> 赞同：0
> 
> 时间：2013-03-06T00:44:34.967
> 
> 标签：php, wordpress, sql-order-by, categories

我正在尝试按标题对帖子进行排序，但我无法让它工作，我试图将 orderby 插入到 query_posts 但我认为当你可以添加多个设置时，我不明白你如何编写 query_posts 值的逻辑&。

这是我的代码。

```
<?php
$cat_id = get_query_var('cat');
$catlist = get_categories('hide_empty=0&child_of=' . $cat_id);
$cat_child = get_field('frontend_name' , 'category_'  . get_query_var('cat' ));

foreach($catlist as $categories_item) {
    echo "<ol>";
    echo '<h3><a href="' . get_category_link( $categories_item->term_id ) . '" ' . '>' . $categories_item->description .'</a> </h3> ';
    query_posts("cat=" . $categories_item->term_id . "&post_per_page=9999");

if (have_posts()) : while (have_posts()) : the_post(); ?>
    <li><a href="<?php the_permalink();?>">
      <?php the_title(); ?>
   </a></li>
<?php endwhile; endif; ?>
<?php echo "</ol>"; ?>
<?php } ?> 
```

如果您能提供帮助，真的很感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:54:12.540

我发现传递一个关联数组使它更容易消化。试试这个：

```
// Refactored query arguments
query_posts(array(
  'cat' => $categories_item->term_id,
  'posts_per_page' => 9999,
  'order' => 'ASC', //order ascending
  'orderby' => 'title' //order by title
)); 
```

# sql - SQL MERGE 到远程（链接）服务器表

> ID：15236961
> 
> 赞同：14
> 
> 时间：2013-03-06T00:45:39.287
> 
> 标签：sql, sql-server-2008, sql-merge

是否可以在链接服务器的数据库表上使用 SQL MERGE 功能？最终目标是将远程表与我们的本地 SQL 服务器表同步。我在网上做了一些研究，找不到任何相关信息。如果可能，您将如何设置源语句和目标语句？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-06T17:39:16.520

重申@Mikael Eriksson 的评论，是的，你可以。MERGE的*目标*不能是远程的，但 MERGE 的*源*可以是远程的。因此，如果您可以在 FL 中从您的服务器运行 MERGE 语句，那么这是很有可能的。例如，您可以在 FL 的删除服务器上运行类似这样的操作：

```
MERGE INTO "local FL table" USING "CT server"."database"."schema"."same table" ON ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T16:02:09.597

显然我的研究还不够好，它在 MSDN 上是正确的：“target_table 不能是远程表”......所以回答了这个问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-12T05:35:51.063

这不是这个问题的确切答案。但是在链接服务器中更新远程表的替代方法。

```
UPDATE [RemoteItem] 
SET    [RemoteItem].[AccountID] = [I].[AccountID] 
FROM   OPENQUERY
(
    [LINKEDSERVER],
    'select AccountID from [RemoteDb].dbo.[Item]'
) [RemoteItem] 
INNER JOIN [LocalDB].[dbo].[Item] AS [I] 
    ON p.ProductID = oq.ProductID 
```

参考这个[链接](https://social.msdn.microsoft.com/forums/sqlserver/en-US/436634c6-07de-44ce-b27c-cafa62d781cb/how-to-update-remote-table-using-openquery)

未测试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-13T16:41:33.647

Yoy 始终可以在您的服务器中使用 EXEC('SQL CODE HERE')AT YOUR_LINKED_SERVER，也许作为存储过程。

这将在链接服务器上执行您想要的查询，以便您可以将本地表 (target_table) 与服务器表 (source) 合并。

这是我在服务器中的存储过程中使用的代码，它是从客户端调用的。服务器->服务器执行查询中的客户端执行存储过程，以使用相同的信息（员工）更新不同的链接服务器（客户端）

```
 EXEC('
SET IDENTITY_INSERT PVBC.DBO.empleadas ON

MERGE INTO PVBC.DBO.empleadas A
USING(
    SELECT id_empleada, nombre, apellidos
    FROM SERVIDOR.PVBC_SERVIDOR.DBO.empleadas) TA
ON (A.id_empleada =TA.id_empleada)
WHEN MATCHED THEN
UPDATE 
    SET A.nombre=TA.nombre,
        A.apellidos=TA.apellidos
WHEN NOT MATCHED THEN

    INSERT 
        (id_empleada, nombre, apellidos)
    VALUES
        (id_empleada, nombre, apellidos);

SET IDENTITY_INSERT PVBC.DBO.empleadas OFF
')AT MEGA --This is one of my linked servers 
```

# javascript - 验证 ddslick 下拉值被选中

> ID：15236966
> 
> 赞同：1
> 
> 时间：2013-03-06T00:46:00.477
> 
> 标签：javascript, jquery, drop-down-menu, jquery-selectbox

我有一个正在处理的页面，需要选择 ddslick 创建的下拉框的值才能提交。下拉菜单正在运行，选择时的值传递到我正在使用 PHP 解析 POST 值的目标页面。但是，我在验证此 ddslick 下拉框时遇到问题。确保在提交之前选择了一个值。

这是我拥有的选择框：

```
<select name="backing" id="backing" class="ddslick-select">
<option value="">Select Back Style</option>
<option value="red">Red</option>
<option value="orange">Orange</option>
</select> 
```

我正在使用此代码来获取支持值：

```
<script type="text/javascript">
$('#backing').ddslick({
  showSelectedHTML: false,
  onSelected: function(data){
      alert(data.selectedData.value);
  }
});
</script> 
```

当我提交它时，#backing 的 $_POST 值正在传递。但是，我在验证它以确保选择了一个值时遇到了问题。

在表单中，我有一个提交按钮，我通过这个 onsubmit 函数验证了 Quantity 和 Back 样式：

```
<a href="#" class="btn btn-cart right" onclick="javascript:return validateCart();">Add to cart</a> 
```

这是 Javascript 函数，数量正在验证，但带有 ddslick 的下拉列表不是。如果我从下拉列表中删除 class="ddslick-select" 将其变为正常的下拉框，则验证工作正常。

这是 ValidateCart() 的 Javascript 函数：

```
function validateCart(){
var error = "";

if(document.getElementById("qty").value == '') {
    error += "You must select Quantity\n";      
}
if(document.getElementById("backing").value == '') {
    error += "You must select a Backing Design\n";      
}

if(error !== '') {
    alert(error);
    return false;
} else {
    document.productorder.submit();
}

} 
```

我的问题是，如何修改我现在拥有的内容来验证下拉框？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:55:14.727

我能够使用以下代码验证 ddslick：

```
if($('.dd-selected-value').val() == "") {
  error += "You must select a Backing\n";       
} 
```

# php - 如果导入了 css，如何将版本号添加到 css？

> ID：15236967
> 
> 赞同：2
> 
> 时间：2013-03-06T00:46:05.993
> 
> 标签：php, css

假设我有这个名为imported.css的css文件，然后在imported.css文件中，网站中使用的所有css都转储在其中，例如

```
@import url('a.css');
@import url('b.css');
@import url('c.css');
@import url('d.css');
@import url('e.css');
@import url('f.css'); 
```

所以import.css文件在主布局中被调用......现在的问题是，css在最终用户的浏览器中被缓存有问题......我如何将版本号添加到导入中的那些css。 css 文件 ?.. 将例如

```
@import url('a.css?v=1'); 
```

工作 ？

还是我应该在 import.css?v=1 中添加版本号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:49:32.050

您应该为每个文件添加一个版本号 - 缓存机制不关心它们是如何加载的，只关心它们的 URL 是什么。

# ruby-on-rails - Actionmailer - 未定义的“用户” - PDF 附件

> ID：15236974
> 
> 赞同：0
> 
> 时间：2013-03-06T00:46:28.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wicked-pdf

我正在尝试将我的 PDF 附加到电子邮件中。但是，当我单击链接时，出现以下错误`undefiined method 'user'`，我有以下设置：

**控制器**

```
 def index
    @hospital_bookings = HospitalBooking.scoped
    hospital_booking = @hospital_bookings
    @user = User.all

    if params[:format] == "pdf"
      @hospital_bookings = @hospital_bookings.where(:day => Date.today.beginning_of_month..Date.today.end_of_month)
    end

    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "#{Date.today.strftime("%B")} Overtime Report",
               :header => {:html => {:template => 'layouts/pdf.html.erb'}}
        OvertimeMailer.overtime_pdf(hospital_booking).deliver
      end
    end
  end 
```

**overtime_mailer.rb**

```
class OvertimeMailer < ActionMailer::Base

  default :from => DEFAULT_FROM

  def overtime_pdf(hospital_booking)
    @hospital_bookings = hospital_booking
    attachments["Overtime Report.pdf"] = WickedPdf.new.pdf_from_string(
        render_to_string(:pdf => "Overtime Report",:template => 'layouts/pdf.html.erb'))
    mail(:to => hospital_booking.user.email, :subject => "Overtime Report")
  end
end 
```

错误发生在以下行`mail(:to => hospital_booking.user.email, :subject => "Overtime Report"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:49:30.783

`hospital_booking`在这段代码上

```
OvertimeMailer.overtime_pdf(hospital_booking).deliver 
```

是一个`ActiveRecord::Relation`对象。您可能想打电话`HospitalBooking.scoped.first`或只是`HospitalBooking.first`在您的控制器中。

# macos - 如何从崩溃的 emacs 会话中恢复文件

> ID：15236975
> 
> 赞同：2
> 
> 时间：2013-03-06T00:46:31.800
> 
> 标签：macos, emacs, crash

我在 iTerm2 的 OSX 上的 emacs 中运行 haskell-mode。每隔一段时间，emacs 就会冻结，我将不得不关闭 iTerm2。由于我经常在 emacs 内（在 iTerm2 内）运行 ghci，它会使我的整个 cpu 崩溃，导致意外重启（灰屏死机）。这一次，崩溃非常严重，以至于它带走了文件（第一次这样做）。我在 git 中将我的文件置于源代码控制之下，但有一段时间没有提交（200 行）。现在我的文件看起来像这样。

我运气不好还是有办法在这种状态下恢复文件？（注意：我尝试了`M-x recover-file`) 选项。

**更新：**我的`~/.emacs.d/auto-save-list`. 当我尝试恢复它们时，它说`"not current"`

```
;;; Automatically generated by `recentf' on Tue Mar  5 18:16:41 2013.

(setq recentf-list
      '(
        "/Users/Dave/Desktop/Jaskell/Parser/VMTranslator.hs"
        "/Users/Dave/Desktop/Jaskell/Parser/Decs.hs"
        "/Users/Dave/Desktop/Jaskell/Parser/SymbolTable.hs"
        "/Users/Dave/Desktop/Jaskell/Parser/Parser.hs"
        "/Users/Dave/.emacs.d/init.el"
        "/Users/Dave/Desktop/Jaskell/Parser/Printer.hs"
        "/Users/Dave/.emacs.d/elpa/yasnippet-0.8.0/snippets/c++-mode/io"
        "/Users/Dave/Desktop/Jaskell/11/Average/Main.jack"
        "/Users/Dave/.emacs.d/elpa/w32-browser-21.0/w32-browser-autoloads.el"
        ))

(setq recentf-filter-changer-current 'nil)

;; Local Variables:
;; coding: utf-8-emacs
;; End: 
```

最后有一堆空值。

# mysql - 如何确定两个字符串在 sql 中有交集？

> ID：15236976
> 
> 赞同：0
> 
> 时间：2013-03-06T00:46:35.783
> 
> 标签：mysql, sql

两个字符串用 ',' 分割，如下所示：

**a:'1,2,3,4,5'**
**b:'6,2,1,3,9'**

我想确定这些字符串是否有交集..

有什么功能可以在mysql中处理吗？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T03:10:37.280

I must stress that just asking the question makes clear that your data structure is wrong. You should have a table for each of the pairs. It would have rows like:

```
a    1
a    2
. . .
b    6
b    2
etc. 
```

And this question would be easily solved using standard SQL.

That said, if you are forced for some reason to do this, MySQL has some functions that can help. You can do something like:

```
where find_in_set(substring_index(substring_index(a, ',', 1), ',', -1), a) > 0 or
      find_in_set(substring_index(substring_index(a, ',', 2), ',', -1), a) > 0 or
      find_in_set(substring_index(substring_index(a, ',', 3), ',', -1), a) > 0 or
      find_in_set(substring_index(substring_index(a, ',', 4), ',', -1), a) > 0 or
      find_in_set(substring_index(substring_index(a, ',', 5), ',', -1), a) > 0 or
      . . . 
```

The expression `substring_index(substring_index(a, ',', 5), ',', -1)` is a MySQL expression that returns the nth value in a string.

# opencv - 在没有 sse 的情况下编译 OpenCV 以在 ROS 中使用

> ID：15236978
> 
> 赞同：3
> 
> 时间：2013-03-06T00:46:44.113
> 
> 标签：opencv, sse, ros

所以我遇到了一个似乎与在不支持 SSE 的处理器上使用 ROS 中的 OpenCV 相关的问题。具体来说，每当尝试使用 OpenNI 或 freenect 与 Xbox Kinect 交互时，就会出现此问题。每当我尝试启动其中任何一个时，都会收到“非法指令”错误。根据我的阅读，这个问题可以追溯到 opencv 并且它使用 SSE，这在我的处理器上不受支持（Roboard RB100 上的 Vortex86DX）。我找到了有关如何从源代码编译 OpenCV 以及使用标志在没有 SSE 的情况下进行编译的说明，但无法弄清楚如何在 ROS 中使用它。有人知道如何在 ROS 中使用自定义编译版本的 OpenCV 来缓解这个问题吗？

谢谢！

如果您需要任何进一步的信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T21:20:23.333

如果您在尝试在旧 CPU 上使用 opencv 和 ROS 时遇到“非法指令”错误，请尝试构建不带 SSE3 的 opencv 库，然后将它们复制到 ROS 版本上。

例如，像这样：

```
$ cd ~/opencv-2.4.9
$ mkdir build && cd build && cmake -DENABLE_SSE3=OFF .. && make && sudo make install
$ sudo cp `ls /usr/local/lib/libopencv*.2.4.9` /opt/ros/hydro/lib 
```

然后看看它是否有效：

```
$ python
> import cv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T16:17:50.750

我遇到了类似的问题。检查旧库是否不在 ROS 库路径中，例如`/opt/ros/groovy/lib`.

您还可以更新环境变量以确保之前加载了新的库。

# javascript - 不同颜色的脉动

> ID：15236985
> 
> 赞同：-2
> 
> 时间：2013-03-06T00:47:39.370
> 
> 标签：javascript, jquery

我想从白色跳动到另一种颜色，但我不知道如何为这段代码添加颜色

```
 <script>
  $(document).ready(function() { 
$("#white36").click(function () {
      $(this).effect("pulsate", { times:3000 }, 500);
});

  });
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:53:47.737

如果你有一个白色元素并且你想跳动到另一种颜色（比如蓝色），只需在白色元素后面放一个蓝色元素。白色会消失，蓝色会显露出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:02:45.447

您可以使用 jQeury.Color[插件](https://github.com/jquery/jquery-color)。使用此插件，您可以执行以下操作：

使用此插件，您可以使用以下内容：

```
 jQuery("#block").animate({
      backgroundColor: jQuery.Color({ saturation: 0 })
  }, 1500 ); 
```

[**例子**](http://jsfiddle.net/6FbTT/)

# playframework-2.0 - SecureSocial 2 / PlayFramework 2 - 向 IdentityObject 添加元素并更改工作流程顺序

> ID：15236989
> 
> 赞同：2
> 
> 时间：2013-03-06T00:48:08.927
> 
> 标签：playframework-2.0, playframework-2.1, securesocial

我目前正在我的 Play 2 应用程序中使用`UsernamePasswordProvider`.

**注册**表单显示在对象实例中收集的以下信息`Identity`：

*用户名，名字，姓氏，密码，确认。密码。*

是否可以向`Identity`对象添加一些数据，例如人的**性别**？

或者，也许 SecureSocial 已经在单独的数据库/表对象中设想了详细的用户数据。

其次，默认情况下，“注册”流程开始显示单输入表单：“电子邮件”旨在向用户发送邮件，以便继续详细的用户数据。

我可以以某种方式配置库，以便在填写所有用户数据后发送邮件吗？意思是直接显示整个表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:48:38.373

您必须扩展到`Identity`Trait，这是社交用户的最小表示（只是认为社交网络可能不会要求其成员指定其性别）。

在我的项目中，我想向我的用户添加信息，例如上次登录时间。所以我刚刚创建了一个`User`扩展类，`Identity`并将数据存储在数据库中`User`。SecureSocial 以这种方式运行良好。

对于您的第二个问题，我认为目前无法配置插件以使其按您所说的那样工作，但是您当然可以在 github 上拉一个请求。

# jquery - 如何判断用户是否使用 jquery 在文本区域中输入了文本

> ID：15236991
> 
> 赞同：1
> 
> 时间：2013-03-06T00:48:16.810
> 
> 标签：jquery, forms, validation, twitter-bootstrap, textarea

我正在做一些表单验证，我有一个文本区域，其中有一个初始占位符，我正在尝试检查用户是否在文本区域中输入了任何数据。

如果我使用 jquery 进行检查`.text()`，它看不到在浏览器级别添加的文本，并且如果我不使用`.val()`任何内容，则首先在那里更新。那么在提交表单之前进行此检查的正确方法是什么？

```
<div>
   <textarea class="myUserText"></textarea>
</div>

function validateForm(){
   if($('.myUserText').text()==""){
        //do something here
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:50:27.883

`.val()`应该管用。同时捕获提交事件：

```
$('form').submit(function(e) {
    if (!$('.myUserText').val() == '') {
        e.preventDefault();
        // The form won't submit
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:49:39.610

> 如果我使用 .val() ，则首先没有任何更新。那么在提交表单之前进行此检查的正确方法是什么？

`val`是正确的检查，`!= ""`如果用户在 textarea 中输入了某些内容。

当然，他们输入的内容可能只是一个换行符，这可能不是您想要的。所以你可能会考虑：

```
if($('.myUserText').val().replace(/^\s+/, "") === "") 
```

...忽略前导空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:26:37.250

...或者如果您有兴趣使用一些最新的 HTML5 选项：

*   对各种输入字段使用表单验证（例如电子邮件、url、req'd：[http ://bit.ly/Z8ZEHe](http://bit.ly/Z8ZEHe)

*   使用 modernizr 检查访问者的浏览器是否支持 HTML5 表单，以及是否不加载备用 polyfill： [http ://modernizr.com](http://modernizr.com)
    [https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-填充物](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

祝你好运！

# c# - 计算代码指标忽略代码契约

> ID：15236994
> 
> 赞同：1
> 
> 时间：2013-03-06T00:48:27.707
> 
> 标签：c#, visual-studio-2010, code-contracts, code-metrics

是否有计算 VS 2010 Ultimate 解决方案的代码指标，但忽略代码合同？

现在，我最好的想法是进行计算，转储 Excel 文件，然后反映每个类的 IL，计算引用合同的行数，然后从该方法的代码行中减去该数量。问题是它的工作量远远超过它的价值，我只能削减代码行，但我仍然有由此产生的圈复杂度度量等）更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:47:34.277

如果您决心这样做（像 Ira 一样，我不会特别推荐），从指标中排除合约的一种相当简单的方法是在不启用运行时合约检查的情况下进行编译，然后针对已编译的指标运行指标版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:52:58.400

转到项目的属性，然后在*Code Contracts*选项卡上将选项设置`Perform Runtime Contract Checking`为`None`. 然后重新编译您的项目并让您的分析器分析生成的程序集。

但是，如果您有复杂的合同，那么我建议您将它们提取到一个方法中，如下所示：

```
[Pure]
public void IsNotNullOrEmpty(object input)
{
    if (typeof(string).IsAssignableFrom(typeof(TInput)))
        return !string.IsNullOrEmpty((string)(object)input)
    else
        return typeof(TInput).IsValueType
            || !ReferenceEquals(input, null);
}

Contract.Requires<ArgumentException>(IsNotNullOrEmpty(input),
    "Input object must represent an actual value."); 
```

# postgresql - Heroku Postgres对生产模式的硬限制？

> ID：15236996
> 
> 赞同：0
> 
> 时间：2013-03-06T00:48:43.403
> 
> 标签：postgresql, heroku, limit

据我所知，Heroku 目前即使在生产数据库上也有 1TB 的硬限制。这是真的？

那么为什么设置这个限制并且没有办法超过这个限制呢？或者我应该制作多个数据库实例并将它们分片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:56:56.333

据推测，Heroku 只是没有为数据库大小配置存储容量的数据库节点。您应该创建多个数据库实例并将它们分片。如果您的数据库比这大得多，尽管可能是时候为您的某些数据类型寻找关系数据库的替代品了。分片通常会首先放弃使用 SQL 的一些优势，此时更好的可扩展性替代方案开始看起来更具吸引力。

# javascript - 通过书签使用 Facebook API

> ID：15236999
> 
> 赞同：0
> 
> 时间：2013-03-06T00:49:01.980
> 
> 标签：javascript, facebook-graph-api, web-applications, bookmarklet

我正在尝试开发一个小书签，它可以抓取用户当前的网页并存储从中提取的一些数据。在我自己的网站上，我的用户通过 Facebook API 登录。

使用书签时，我可以成功呈现 Facebook 登录模式，但在登录 API 时会引发异常：

指定的 URL 不属于应用程序。

我是新手，但大概这是因为访问小书签的当前页面与我自己的域不匹配？

我正在从托管在该域上的外部文件中运行 javascript *-*这还不够吗？

或者，我该如何解决这个问题？不幸的是，我无法提供自己的帐户管理功能，我依靠 Facebook 进行用户管理。

任何解释和创造性的想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:37:27.690

解决方案是在当前页面的 iframe 或新选项卡或新弹出窗口中在您自己的域中托管登录步骤。无论如何，任何更少的东西都太不安全了。

可能的步骤：

1.  Bookmarklet 运行并抓取数据。
2.  Bookmarklet 使用 src="http://yourdomain.com/bookmarklet-widget?data=...." 创建 iframe
3.  如果尚未登录，则小部件内容页面首先需要登录步骤。

如果数据太大而无法使用 GET 提交，则可以使用 POST。步骤就像

1.  Bookmarklet 运行并抓取数据。
2.  Bookmarklet 创建名称为“mywidgetframe”的空 iframe。
3.  Bookmarklet 使用 method=post target=mywidgetframe 和 action="http://yourdomain.com/bookmarklet-widget" 创建表单
4.  Bookmarklet 提交表单。
5.  如果尚未登录，则小部件内容页面首先需要登录步骤。

如果您需要 iframe/window 和当前父页面之间的直接通信，请查看[http://enable-cors.org/](http://enable-cors.org/)