# StackOverflow 问答 15520000-15520999

# h.264 - 将 VP8 RTP 视频流转换为 H.264

> ID：15520007
> 
> 赞同：3
> 
> 时间：2013-03-20T09:43:53.983
> 
> 标签：h.264, vp8

我是视频编码的新手，对它的深度感到困惑。

目标：将 VP8 编码的 RTP 视频流转换为 H.264 编码的 RTP 视频流

问题：我的方法应该是什么？

我看待它的方式，

1.  接收视频流 (VP8)
2.  一帧一帧提取
3.  解码每一帧（使用 WebM 工具）
4.  编码帧（使用 ffmpeg）
5.  写入传出流

这是应该的吗？另外，请指出我的其他资源。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:52:55.057

这实际上应该合并到超级用户，但是您可以完全使用 FFmpeg 来完成此操作（从读取到写入）。由于您是视频转码新手，请查看[FFmpeg，所有命令行之母](http://smorgasbork.com/component/content/article/35-linux/92-ffmpeg-the-mother-of-all-command-lines)，这是一个关于此主题的精彩教程。它解释了这个项目所需的几乎每一个步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:20:47.887

你所有的步骤都是正确的。我建议将 ffmpeg 用于 VP8 解码和 H264 编码。在这两个步骤中使用 ffmpeg 的优点是您可以利用 ffmpeg 视频帧数据结构；这将使上述转码更容易一些。

最新的 ffmpeg 版本支持 VP8 编码/解码（从 v0.6 开始就一直存在）。您可以在此处获取最新的 Windows 预构建 ffmpeg 库：http: [//ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)

# shell - 意外的令牌错误：awk

> ID：15520009
> 
> 赞同：2
> 
> 时间：2013-03-20T09:43:57.513
> 
> 标签：shell, awk

嗨，我已经使用此代码片段输入文件并计算每行中的制表符数量并将结果打印到输出文件，但我收到错误

awk：命令。行：1：意外的令牌

可能是什么错误

```
#!/bin/sh
#
FILE='unit-1-slide.txt'
OUTPUTFILE='output-for'-$FILE
COUNT=$(awk '{print gsub(/\t/,"")}'$FILE)
OUTPUT_PATH='/home/user/Desktop'
echo $COUNT > $OUTPUTFILE
echo "Done!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:46:19.423

`$FILE`之前缺少一个空格

```
COUNT=$(awk '{print gsub(/\t/,"")}'$FILE) 
```

因此文件名被视为 awk 脚本的一部分。当外壳执行**引号删除**时，引号将被删除，而不是替换为空格。

# git - git trac 接收后挂钩

> ID：15520010
> 
> 赞同：1
> 
> 时间：2013-03-20T09:44:00.360
> 
> 标签：git, trac, git-post-receive

我最近将 trac 从 0.10 升级到 1.0，并成功地将 trac 实例链接到 svn 和 git 存储库。

但是，在设置 git 存储库 post-receive 挂钩期间，我遇到了一些主要问题。

我在这里尝试了插件脚本：

[http://trac-hacks.org/wiki/GitPlugin#post-receivehookscripts](http://trac-hacks.org/wiki/GitPlugin#post-receivehookscripts)

但这不起作用，因为 git post receive 似乎没有在标准输入中提供 $OLD_REV 和 $NEW_REV 。

wiki还提到，一个只需要调用以下

```
 trac-admin TRAC_ENV changeset added <commitid(s)> 
```

所以我在git的post-receive脚本中放了以下内容，

```
REV=$(git rev-parse HEAD)

trac-admin <trac-repo>  changeset added <repo-name> $REV 
```

它在大多数情况下都有效。但是，如果用户尝试一次推送多个提交，则`git rev-parse HEAD`只会检索最后一次提交 ID（而不是属于最后一次推送的提交 ID 列表），因此 Trac 会丢失一些提交（来自`node_change`trac 表D b）。

我想知道是否有一些方法可以获取最新 git push 的所有提交 ID？或者我实际上在这里忽略了一些东西，还有一些更简单的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:40:17.140

好的，我刚刚找到了这个链接：

[git：接收后挂钩中的空参数](https://stackoverflow.com/questions/3762084/git-empty-arguments-in-post-receive-hook)

这给了我一个很好的提示，这就是我解决问题的方法

在`post-receive`git 中：

```
read oldrev newrev refname
REV=$(git rev-list $oldrev..$newrev)
trac-admin <trac-repo>  changeset added <repo-name> $REV 
```

ps 这意味着修订信息确实通过标准输入传递到脚本中，只是 trac 插件由于某种原因无法获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T00:19:49.980

请查看以下要点，当您使用多个分支时，该要点可防止重复提交：

[https://gist.github.com/kenaniah/5471280](https://gist.github.com/kenaniah/5471280)

# java - 日志文件已创建但文件为空

> ID：15520014
> 
> 赞同：2
> 
> 时间：2013-03-20T09:44:07.807
> 
> 标签：java, logging, log4j

我正在使用 log4j.properties 文件在我的 java 项目中生成日志。我只想要自定义日志语句和与该语句对应的日志文件。我的日志文件是这样的：

```
log4j.logger.org.apache.axis.enterprise=DEBUG, stdout,Rollfile
log4j.rootLogger=off
log4j.logger.com.gridsense.server.automode=Rollfile,stdout
log4j.appender.Rollfile=org.apache.log4j.RollingFileAppender
log4j.appender.Rollfile.Threshold=DEBUG
log4j.appender.Rollfile.File=D:/javaProjects/AutomodeGS_Prachi/AutoGS.log
log4j.appender.Rollfile.MaxFileSize=2MB
log4j.appender.Rollfile.layout=org.apache.log4j.PatternLayout
log4j.appender.Rollfile.layout.ConversionPattern=[%t] %-5p %c %d{dd/MM/yyyy HH:mm:ss}  – %m%n

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Threshold=DEBUG
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%-4r [%t] %-5p %c %x – %m%n 
```

但是当我运行程序时，日志语句会打印在控制台上并创建空日志文件。我不明白什么是问题。为什么我的日志文件是空的？在我的课堂上，我写了声明

```
private static  Logger logger = Logger.getLogger(Driver.class); 
```

我正在进口

```
import org.apache.log4j.Logger; 
```

实际上，我阅读了您针对与“Log4J 文件为空”相关的问题给出的解决方案，并对我的代码进行了一些更改。我将导入语句更改为

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory; 
```

在我的课堂上：

```
static Log   logger = LogFactory.getLog(Driver.class); 
```

我仍然遇到同样的问题。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:57:17.293

代替

```
log4j.rootLogger=off 
```

和

```
log4j.rootLogger=DEBUG,stdout,Rollfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:58:21.720

您的早期代码没有问题，但较新的代码更好，因为您的代码未绑定到 log4j API。

您确定您的应用程序正在加载此日志文件吗？

rollfile 将仅从包 com.gridsense.server.automode 下的类中获取日志消息。您确定有一些日志消息正在执行吗？

通常我一直使用

```
log4j.rootLogger=DEBUG, stdout,Rollfile 
```

而不是下面，所以不确定它是否有任何冲突。

```
log4j.logger.org.apache.axis.enterprise=DEBUG, stdout,Rollfile
log4j.rootLogger=off 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-13T13:30:06.303

解决方法很简单： **将“Log4j.properties”文件移到项目主目录**中。

*   如果您在任何内部包或文件夹下有 Log4j.properties 文件，则将其移动到主项目文件夹。

[属性文件结构](https://i.stack.imgur.com/0nbtD.jpg)

# primefaces - PrimeFaces（selectoneMenu、comandlink 和 inplace）在 chromium 浏览器上不起作用

> ID：15520015
> 
> 赞同：0
> 
> 时间：2013-03-20T09:44:08.447
> 
> 标签：primefaces

Primefaces（selectoneMenu、comandlink 和 inplace）无法在 chromium 浏览器上运行请参阅下面的代码，让我知道我在这里做错了什么。selectOneMenu 仅显示第一个元素（单击下拉菜单时未显示全部） commondlink 和 inplace 也不起作用。firefox 17.0.1 工作正常，但在 19.0.2 中不行。这很奇怪。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui">

       <h:head>
          <title>Facelet Title</title>
       </h:head>
       <h:body>

          <h:outputText value="Basic Usage: " />

          <h:panelGrid columns="3" styleClass="formpanel" rowClasses="prop" columnClasses="name,value,message">
             <h:outputLabel for="selectLocation">Location:</h:outputLabel>
             <h:form>
                <p:selectOneMenu id="selectLocation" value="#{assetManager.currentLocation}">
                   <f:selectItems value="#{assetManager.selectItemManagedLocations}" />
                      <p:ajax update=":locationform:assetlist" />
                </p:selectOneMenu>
             </h:form>

          </h:panelGrid>

       <h:form id ="locationform">
             <p:dataTable emptyMessage="No assets for branch."
                          value="#{assetManager.assetsByLocation}" var="a" styleClass="workflowtable" 
                          id="assetlist" >
                <f:facet name="header" >
                   Assets for #{assetManager.currentLocationName}
                </f:facet>

             <p:column id="lftype" width="95px">
                <f:facet name="header">
                   <h:outputText value="Type"></h:outputText>
                </f:facet>
                <h:outputText value="#{a.model.make.type.description}"></h:outputText>
             </p:column>

             <p:column id="lfmake" width="110px">
                <f:facet name="header">
                   <h:outputText value="Make"></h:outputText>
                </f:facet>
                <h:outputText value="#{a.model.make.description}"></h:outputText>
             </p:column>

             <p:column id="lfmodel" width="110px">
                <f:facet name="header">
                   <h:outputText value="Model"></h:outputText>
                </f:facet>
                <h:outputText value="#{a.model.description}"></h:outputText>
             </p:column>

             <p:column id="lfserialNo" width="110px">
                <f:facet name="header">
                   <h:outputText value="Serial No"></h:outputText>
                </f:facet>
                <h:outputText value="#{a.serialNo}"></h:outputText>
             </p:column>

             <p:column id="lfstatus" width="90px">
                <f:facet name="header">
                   <h:outputText value="Status"></h:outputText>
                </f:facet>

                   <p:selectOneMenu  value="#{a.status}" style="width: 60px;" >
                      <f:selectItems value="#{assetManager.assetStatuses}" />
                      <p:ajax listener="#{assetManager.updateStatus(a)}" />
                   </p:selectOneMenu>

             </p:column>

             <p:column id="lfaddedby" width="100px">
                <f:facet name="header">
                   <h:outputText value="Added By"></h:outputText>
                </f:facet>
                <h:outputText rendered="#{assetHelper.getAddLog(a) eq null}" value="Unknown"></h:outputText>
                <h:outputText rendered="#{assetHelper.getAddLog(a) ne null}" value="#{assetHelper.getAddLog(a).employeeName}"></h:outputText>
             </p:column>

             <p:column id="lfaction" width="50px">
                <f:facet name="header">
                   <h:outputText value="Action"></h:outputText>
                </f:facet>

                   <p:commandLink style="margin-right:20px;"  action="/asset/edit.xhtml?faces-redirect=true">  
                      <f:setPropertyActionListener target="#{maintenanceManager.asset}" value="#{a}" />
                      <h:graphicImage value="/images/EditSmall.png" />
                   </p:commandLink>  

             </p:column>

             <p:column id="lfcomments" width="210px" >
                <f:facet name="header">
                   <h:outputText value="Comments"></h:outputText>
                </f:facet>

                   <p:inplace id="ajaxCommentsInplace" editor="true" emptyLabel="Click here to add comments">
                      <p:inputText value="#{a.comments}"
                                   required="false" label="text" id ="commentsText"/>
                      <p:ajax event="save" listener="#{assetManager.updateStatus(a)}" />

                   </p:inplace>

             </p:column>

          </p:dataTable>
       </h:form>
       </h:body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:50:40.877

在视图中包含所有组件，形成层次结构。IE，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <f:view>
        <h:head />
        <h:body>
            <h:form>
                <p:somecomponentofyourchoice>
            </h:form>
        </h:body>
    </f:view>
</html> 
```

那一定有帮助。

# windows-phone-8 - 如何将 WP8 应用分发给测试人员？

> ID：15520018
> 
> 赞同：2
> 
> 时间：2013-03-20T09:44:12.553
> 
> 标签：windows-phone-8

我创建了一些 WP8 应用程序。我有 .xap 文件。我如何将它发送给测试人员，以便他们可以在他们的设备上测试应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T20:20:22.453

有一种不同的方式。如果他们的设备是开发人员解锁的，他们可以使用“应用程序部署”工具（随 SDK 一起安装）将 .xap 文件直接部署到他们的设备。您可以使用“Windows Phone 开发者注册”工具（也与 SDK 一起安装）在一个 DevCenter 帐户上解锁最多三台设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:25:08.623

在 dev.windowsphone.com 上的 Windows Phone 仪表板下，可以选择通过电子邮件发送“测试版”应用程序。

您必须设置开发者帐户并支付 99 美元的费用。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T13:13:03.757

还有windows phone power tools，支持windows 7，轻量级，不需要安装visual studio：

[http://wptools.codeplex.com/releases/view/97029](http://wptools.codeplex.com/releases/view/97029)

# c# - 从 Designer 生成的代码中恢复损坏的数据集

> ID：15520025
> 
> 赞同：0
> 
> 时间：2013-03-20T09:44:19.297
> 
> 标签：c#, vb.net, xsd, designer

任何人都知道如何从设计器生成的代码文件中恢复 Visual Studio (2010) DataSet XSD 文件。

我有几个数据集，其中一些已损坏，损坏发生在数据集的设计器部分，这意味着 XSD 文件能够以图形方式更改表、列等。我的 Designer.vb/cs、xsc 和 xss 文件仍然完好无损。但为了对这些数据集进行更改，我需要 Designer xsd 文件。

你们中有人知道将 Designer.vb/cs 文件管理器反向工程回 XSD 文件的方法吗？

我们正在谈论大型数据集，因此通过分析代码文件手动重做它们是最后的手段。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:21:51.787

在记事本中打开您的 XSD 文件，您应该会看到一个 XML 格式的文档，您可以将其发布在此处以防任何人发现任何内容，或者尝试在其中查看自己。

# windows - 在谷歌浏览器中批量打开网站

> ID：15520027
> 
> 赞同：0
> 
> 时间：2013-03-20T09:44:20.857
> 
> 标签：windows, internet-explorer, google-chrome, batch-file, cmd

我想使用以下代码创建一个带有批处理的链接。

```
explorer "http://www.mysite.com" 
```

但是，如果有人使用其他浏览器程序（如 Chrome）会产生什么影响？

我该如何处理它以使其适用于任一浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:52:10.293

试试这个（命令行或脚本）：

```
start "" "http://www.mysite.com" 
```

# iphone - 无法在表格单元格中查看图像

> ID：15520033
> 
> 赞同：1
> 
> 时间：2013-03-20T09:44:36.553
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

伙计们

我正在做[本](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)教程，但是在编写代码后，我在表格单元格中看不到任何图像->它们是白色的！

我在Supporting Files文件夹中添加了图片文件，再看一遍教程，但无法解决这个问题！拜托，谁能帮我解决这个问题？

```
@interface CarTableViewController ()

@end

@implementation CarTableViewController

@synthesize  carMakes = _carMakes;
@synthesize carImages = _carImages;
@synthesize carModels = _carModels;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.carMakes = [[NSArray alloc] initWithObjects:@"Chevy", @"BMW", @"Toyota", @"Volvo", @"Smart", nil];
    self.carModels = [[NSArray alloc] initWithObjects:@"Volt", @"Mini", @"Venza", @"S60", @"Fortwo", nil];
    self.carImages = [[NSArray alloc] initWithObjects:@"chevy_volt.jpg", @"mini_clubman.jpg", @"toyota_venza.jpg", @"volvo_s60.jpg", @"smart_fortwo.jpg", nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.carModels count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"carTableCell";

    CarTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CarTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                        reuseIdentifier:CellIdentifier];
    }
        cell.makeLabel.text = [self.carMakes objectAtIndex:[indexPath row]];
        cell.modelLabel.text = [self.carModels objectAtIndex:[indexPath row]];
        UIImage *carPhoto = [UIImage imageNamed:[self.carImages objectAtIndex: [indexPath row]]];
        cell.carImage.image = carPhoto;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:13:10.597

尝试这个 ：：

```
UIImage *im = [UIImage imageNamed:[NSString stringWithFormat:@"%@", self.carImages objectAtIndex: [indexPath row]]];
cell.imgCar.image = im; 
```

如果仍然无法正常工作，则您的图像未正确复制到您的项目中。请删除并重新添加。

**不要忘记@synthesize**你的imageView

谢谢，快乐编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:27:53.560

尝试设置方面适合 xib 或通过以下代码

```
cell.imgCar.image.imageViewContentmode = UIViewContentModeAspectFit; 
```

# cocos2d-x - cocos2d-x 用颜色填充圆圈并且无法达到 50% 的不透明度（用于透明效果）

> ID：15520035
> 
> 赞同：1
> 
> 时间：2013-03-20T09:44:38.690
> 
> 标签：cocos2d-x

您好我正在尝试用颜色填充原始圆圈，然后将颜色不透明度设置为 50% 透明。我在网上搜索并没有找到任何解决方案，只有 cocos2d-iphone 的东西。我创建了继承自精灵，它确实给我画了一个圆圈。

```
void CircleSprite::draw(void)
{

 glLineWidth(2);
 cocos2d::ccDrawColor4B(0, 255, 255, 255);
 cocos2d::ccDrawCircle( ccp(100/2, 100/2), 50, CC_DEGREES_TO_RADIANS(90), 50, false);

}

#ifndef __CIRCLESPRITE_H__
#define __CIRCLESPRITE_H__

#include "cocos2d.h" 

class CircleSprite : public cocos2d::CCSprite
{
    public :
        virtual void draw(void);
    private:

};

#endif

in the main loop :
CCSize winSize = CCDirector::sharedDirector()->getWinSize();
        CCSprite* cloud = drowCloud();
        cloud->setPosition(ccp(cloud->getContentSize().width/2,winSize.height/2));
        this->addChild(cloud);

CCSprite* HelloWorld::drowCloud()
{
    CCSprite * pCloud = new CircleSprite();
    return pCloud;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T20:58:58.997

前：

*this->addChild(云);*

只需添加以下行：

**云->setOpacity(128);**

不透明度值从 0 到 255

干杯，阿德里亚诺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T09:34:17.800

为了更好地使用各种自定义绘图`DrawNode`，但不幸的是，基本的 DrawNode 无法自行处理不透明度（此功能在 cocos2d-4.* 的计划中）。因此，如果类 AlphaNode 继承自 DrawNode，我们可以像这样定义 setOpacity（在 cocos2dx-3-13 测试）：

```
void AlphaNode::setOpacity(GLubyte opac) {
    mOpacity = opac;
    if (_bufferCount) {
        for (int i = 0; i < _bufferCount; i++) {
            _buffer[i].colors.a = mOpacity;
        }
    }

    if (_bufferCountGLPoint) {
        for (int i = 0; i < _bufferCountGLPoint; i++) {
            _bufferGLPoint[i].colors.a = mOpacity;
        }
    }

    if (_bufferCountGLLine) {
        for (int i = 0; i < _bufferCountGLLine; i++) {
            _bufferGLLine[i].colors.a = mOpacity;
        }
        _dirtyGLLine = true;
    }
    _dirty = true;
} 
```

在用于生产之前，最好在目标平台上检查它的性能，因为它是“未经授权”的解决方案。

啊，是啊，画圆有方法`drawSolidCircle`和`drawCircle`。

# dashboard - xwiki 删除仪表板列

> ID：15520043
> 
> 赞同：2
> 
> 时间：2013-03-20T09:44:52.750
> 
> 标签：dashboard, xwiki

一个简单的问题：

如何从我的 xwiki 仪表板中删除列？我只想要一列。有一个用于创建列的按钮，但不是用于删除它..

问候，文斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:06:33.047

没有删除一列的按钮，但是当最后一列变为空时，保存时会自动删除。

# iphone - 每 x 分钟从服务器获取数据的计时器：iphone

> ID：15520051
> 
> 赞同：-2
> 
> 时间：2013-03-20T09:45:12.800
> 
> 标签：iphone, ios, ios6, timer

在我的 iPhone 应用程序中，我需要每 60 分钟从服务器获取一次数据，即使该应用程序在后台。是否可以在 appdelegate 中放置一个每 60 分钟调用一次的计时器和方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:51:34.670

我不认为这是可能的。您可以获得某些事情的后台特权；GPS 跟踪、音乐播放器、Skype 类型的应用程序。您还可以在后台完成任务时要求额外的时间。额外的时间不会是 60 分钟。但是没有用户干预是无法“唤醒”应用程序的。

您可能希望设置一个本地通知，让用户每小时打开一次应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:21:12.687

当应用程序在后台时，不可能以您想要的方式请求数据。

如果数据仅在应用程序打开时对用户很重要，我是否建议在用户重新打开应用程序时轮询服务器以获取尚未下载的所有数据？

否则，如果您希望在应用程序关闭时进行后台计算，那么很遗憾，我无法为您提供帮助。

# javascript - 表单的输入 type="submit" 似乎没有触发 onsubmit 处理程序

> ID：15520057
> 
> 赞同：1
> 
> 时间：2013-03-20T09:45:30.740
> 
> 标签：javascript, html, forms, validation, onsubmit

我正在尝试通过 onsubmit 触发 javascript 函数来验证我的表单。

我知道该函数本身可以工作，因为我可以在表单标记之后立即在脚本标记中调用它，并且我收到我的 console.log 消息并且它创建的错误消息出现在表单上。

PHP 验证本身有效，但我只能通过`.submit`放置在 div 上的 javascript 实际提交表单。显然，因为这绕过了任何客户端验证，所以我不能那样做，因此我`div id="submit"`用`input type="submit"`.

我一直在查看其他示例，包括我过去自己编写的、我知道有效但似乎完全没有答案的表格。这可能非常容易，并且由于某种原因，在过去的 6 个小时里我无法也无法看到它。o_O

这是我的表单的标记：

```
<form name="emailus" id="emailus" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="return validateForm();">
    <a href="mailto:example@email.com">
        <h3><i class="icon-envelope-alt icon-large"></i>Send us an email<span>: example@email.com</span></h3>
    </a>

    <div class="half">
        <fieldset class="name">
            <label for="cf_name"><h4>Name <span>*</span></h4></label>
            <input type="text" name="cf_name" class="textualformfield" alt="Jane Doe" pattern="^[a-zA-Z'\s]+$">
        </fieldset>
        <fieldset class="emailaddress">
            <label for="cf_email"><h4>E-mail <span>*</span></h4></label>
            <input type="text" name="cf_email" class="textualformfield" alt="janedoe@email.com" pattern="{long string of regex}">
        </fieldset>
        <fieldset class="phonenumber">
            <label for="cf_phonenumber"><h4>Phone</h4></label>
            <input type="tel" name="cf_phonenumber" class="textualformfield" alt="555-555-5555">
        </fieldset>
        <fieldset class="eventdate">
            <label for="cf_eventdate"><h4>Event Date</h4></label>
            <input type="text" name="cf_eventdate" class="textualformfield" alt="May 25th, 2012">
        </fieldset>
        <fieldset class="location">
            <label for="cf_location"><h4>Location</h4></label>
            <input type="text" name="cf_location" class="textualformfield" alt="The Church">
        </fieldset>
    </div>

    <div class="half">
        <textarea name="cf_message" class="textualformfield" alt="Your Message"></textarea>
    </div>

    <input type="submit" for="emailus" name="submit" id="submit" value="Submit">
</form> 
```

我已经尝试了几次不同的迭代——有`onsubmit="return validateForm();"`或没有分号，写成`onSubmit`或`onsubmit`……我不知道。我根本看不出这有什么问题。任何人？

下面是要调用的函数`onsubmit`，`validateForm`。它位于另一个文件中，但是当表单存在时，该文件始终包含在内，并且我确保此函数不在其中，`$(document).ready`并且在全局范围内可用，因为我直接在表单后面的脚本标记中调用了它。

```
var validateForm = function() {
    var valid = true;

    jQuery('p.validationhelpers').remove();

    if (document.emailus.cf_email.value == "" || document.emailus.cf_email.value == "janedoe@email.com") {
        jQuery('.emailaddress').append("<p class='validationhelpers'>Please enter an email address.</p>");
        jQuery('.emailaddress>input').focus();
        valid = false;
    }

    if (document.emailus.cf_name.value == "" || document.emailus.cf_name.value == "Jane Doe") {
        jQuery('.name').append("<p class='validationhelpers'>Please enter your name.</p>");
        jQuery('.name>input').focus();
        valid = false;
    }
    console.log("I was triggered");

    return valid;
} 
```

编辑 2：添加 PHP 验证/邮政编码：

```
<?php if (!empty($_POST) ) { 
    $field_name = $_POST['cf_name'];
    $field_email = $_POST['cf_email'];
    $field_phone = $_POST['cf_phonenumber'];
    $field_eventdate = $_POST['cf_eventdate'];
    $field_location = $_POST['cf_location'];
    $field_message = $_POST['cf_message'];

    $mail_to = 'example@email.com';

    //final attempt at validation or email submission preventation
    if ($field_name == "Jane Doe" || empty($field_name) || $field_email == "janedoe@email.com" || empty($field_email)) {
        return false;
    }

    if (!($field_eventdate == "May 25th, 2012") && !empty($field_eventdate) && !($field_name == "Jane Doe") && !empty($field_name)) {
        $subject = 'Request for '.$field_date. ' from '.$field_name . 'via thiswebsite.com';
    } else {
        $subject = $field_name . ' has contacted you via thiswebsite.com';
    }

    if (!($field_name == "Jane Doe") && !empty($field_name)) {
        $body_message = 'Client\'s Name: '.$field_name."\n\n";
    }
    if (!($field_email == "janedoe@email.com") && !empty($field_email)) {
        $body_message .= 'E-mail: '.$field_email."\n\n";
    }
    if (!($field_phone == "555-555-5555") && !empty($field_phone)) {
        $body_message .= 'Phone: '.$field_phone."\n\n";
    }
    if (!($field_eventdate == "May 25th, 2012") && !empty($field_eventdate)) {
        $body_message .= 'Event Date: '.$field_eventdate."\n\n";
    }
    if (!($field_location == "The Church") && !empty($field_location)) {
        $body_message .= 'Location: '.$field_location."\n\n";
    }
    if (!($field_message == "Your Message") && !empty($field_message)) {
        $body_message .= 'Message: '. "\n".$field_message;
    }

    $headers = 'From: '.$field_email."\r\n";
    $headers .= 'Reply-To: '.$field_email."\r\n";

    $mail_status = mail($mail_to, $subject, $body_message, $headers);

    $body_message = stripslashes($body_message);

    if ($mail_status) { ?>
        <script language="javascript" type="text/javascript">
            jQuery(document).ready(function () {
                jQuery('#contactus').before("<hr class='confirmationhelpers'><p class='confirmationhelpers'>Your e-mail has been sent!<br/>Thank you! We'll contact you shortly.</p><hr class='confirmationhelpers'>");
            });
        </script>
    <?php
    }
    else { ?>
        <script language="javascript" type="text/javascript">
            jQuery(document).ready(function () {
                alert('It seems there\'s been an error. Please, send an email to example@email.com to request your appointment.');
            });
        </script>
    <?php
    }
}

?> 
```

明确一点——当我点击提交按钮时，绝对没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:44:03.133

您的 jQuery 在这里阻止了表单提交：

```
//this hides the contact form if the overlay is clicked. children is there to prevent the children from also having this effect.
    $('.overlay_vertical_align').click(function() {
        $('.grey_overlay').fadeOut('slow');
    }).children().click(function(e) {
        return false;
    }); 
```

我的意思是，当我调试您的站点并按下提交按钮时，我到达了`return false;`上面，之后事件处理就结束了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:57:43.540

没有发生任何事情的原因是您使用了新的 html5 'pattern' 属性，该属性试图在输入到达您的验证功能之前对其进行正则表达式验证。删除模式属性，然后重试。

# ruby-on-rails - Rails FactoryGirl 错误“LoremIpsum:Module (NoMethodError) 的未定义方法‘生成’”

> ID：15520062
> 
> 赞同：2
> 
> 时间：2013-03-20T09:45:45.413
> 
> 标签：ruby-on-rails, factory-bot

我在测试环境中安装了“lorem-ipsum”gem

```
group :development, :test do
gem "lorem-ipsum"
end 
```

但我得到了 NoMethodError。

这是我的代码片段

```
sequence(:random_string) {|n| "#{LoremIpsum.generate}#{n}" } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:29:25.587

您正在使用的[lorem-ipsum gem](https://github.com/maafy6/lorem-ipsum)没有类方法`generate`，您可能打算使用[lorem-ipsum-me](https://github.com/zachinglis/lorem-ipsum)，但确实如此。

**编辑** 尽管如此，您几乎肯定不想在测试中调用外部 API 只是为了生成一个随机字符串（这就是 lorem-ipsum-me 所做的）。您为什么不直接将“Lorem Ipsum Blah Blah Blah”复制到您的工厂来代替`LoremIpsum.generate`调用，然后留下`#{n}`来保持字符串的唯一性？

# java - sql server 发送查询并返回一个数组而不创建数据库

> ID：15520067
> 
> 赞同：-1
> 
> 时间：2013-03-20T09:45:52.337
> 
> 标签：java, sql

我有一个问题。我正在使用 sql 数据库在 java 中编写程序。我想计算数据库表的特定原始数据中有多少重复项。我找到了一个查询，该查询可以找到重复项的数量，但它会创建数据库表中的新原始数据以保存数据。因为我不想更改数据库结构（我只想从中读取数据）。我如何获取查询的数据而不必在数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:52:48.347

您可以通过使用`TABLE`变量或`temp table`然后选择该输出来执行此操作`TABLE`

但首先，您应该在此处编写查询或其逻辑。因为在餐桌上**创建新的 raw**不是强制性的。

# cordova - 从一页导航到另一页时在 Android 2.3 上闪烁：电话间隙

> ID：15520070
> 
> 赞同：1
> 
> 时间：2013-03-20T09:46:02.320
> 
> 标签：cordova

我正在使用cordova 2.2开发一个电话间隙应用程序，它一切正常，但是从一个页面导航到另一个页面时，在android v 2.3上没有平滑的过渡，它在v 4.0及更高版本上运行良好，我四处寻找和谷歌但没有我得到的任何相关解决方案，我都使用一个 HTML 文件来使用 Div 标记的整个应用程序，我尝试使用

```
.ui-mobile-viewport-transitioning .ui-page {
width: 100%;
height: 100%;
overflow: hidden;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
 }

.ui-page
 {
   -webkit-backface-visibility: hidden;
 } 
```

但根本不起作用。导航时出现白色闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T15:35:18.703

试试这个**解决方案**`<meta name="viewport" content="width=device-width, initial-scale=1">`：标签中使用似乎有一些问题`<head>`，这个解决方案停止了闪烁。但是然后缩放将不起作用（我猜）......

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

# testing - 是否有任何 phpunit/selenium 文档？

> ID：15520071
> 
> 赞同：2
> 
> 时间：2013-03-20T09:46:05.880
> 
> 标签：testing, selenium, phpunit

我已经搜索和搜索 - 但我找不到任何东西。有很多页面声称是文档，但其中大多数只是没有参数或使用信息的方法列表，或者只是不涵盖整个库的指南。

有没有人有完整文档的链接？

我不得不猜测命令使用什么语法，因为其中一半只是“通过”命令，甚至没有在 PHP 中实现。

例如 - 我如何使用 assertSelectOptions()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:55:59.903

老实说，我能找到的唯一一个半有用的完整文档（只有半有用，因为它自 09 年以来没有更新）是这样的：

[http://release.seleniumhq.org/selenium-core/1.0/reference.html](http://release.seleniumhq.org/selenium-core/1.0/reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T11:00:47.197

我同意没有为“新” Selenium 2 版本设置明确的文档，这令人沮丧。

Leet 是对的 - 这也是我找到的最好的文档，但它不是特定于 PHP 的，因此有时在返回类型、错误处理等方面含糊不清。实际上这里有一个小版本更新： [http ://release.seleniumhq.org /selenium-core/1.0.1/reference.html](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)

似乎最后一次主站点包含有关实际方法的文档是在 v3.3 [http://phpunit.de/manual/3.3/en/selenium.html](http://phpunit.de/manual/3.3/en/selenium.html)左右。如果您更改版本号，您会看到方法列表越来越短！您可能会在此处找到一些较旧的信息。

最近 Github 问题中也有关于新的 @method 语法以及与文档和 IDE 代码辅助的兼容性的讨论，所以也许他们正忙于处理新文档？ [https://github.com/sebastianbergmann/phpunit-selenium/issues/251](https://github.com/sebastianbergmann/phpunit-selenium/issues/251)

我刚刚尝试使用 phpDocumentor2 从源代码构建文档，确实有很多关于新的@method 语法的错误，并且生成的文档集的信息非常少！我猜这是通过 __call 访问的方法的副作用，而不是真正的方法，这使它有点晦涩难懂。

更新：在对 v1 和 v2 的文档进行大量研究后，我写了这篇文章。

[http://scipilot.org/blog/2013/06/30/re-learning-unit-testing-selenium-2-phpunit-selenium/](http://scipilot.org/blog/2013/06/30/re-learning-unit-testing-selenium-2-phpunit-selenium/)

# clojure - 如何以编程方式检查阅读器宏

> ID：15520076
> 
> 赞同：0
> 
> 时间：2013-03-20T09:46:13.020
> 
> 标签：clojure

我有一个可以包含任意数据的向量。我想检查任何元素是否是阅读器宏，我该怎么做？

`(is-reader-macro? #<DateTime 2012>) ;=> true`

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:02:26.910

一旦字符串是`read`，您就无法通过结果数据来判断创建它的确切阅读器构造是什么。你刚才读到的数据项不是阅读器宏，它只是数据。

在您的具体示例中，您得到的是 jodatime DateTime 对象的打印表示，该对象无法读取 - 该`#< ... >`构造旨在防止这种情况。像这样打印的实际对象只是一个 jodatime DateTime 对象，而不是读取器宏。

# android - 我想通过 adobe air 获取 android 的版本

> ID：15520077
> 
> 赞同：2
> 
> 时间：2013-03-20T09:46:12.793
> 
> 标签：android, actionscript-3, flash, air, android-version

我想通过 adobe air 获取 android 的版本。我搜索了问题，但没有结果。所以，如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:32:19.440

[我认为您的问题与如何在 Adob​​e AIR 中检测 Android 操作系统版本](https://stackoverflow.com/questions/11293236/how-can-i-detect-the-android-os-version-in-adobe-air)重复？

Capabilities.os 怎么样？

# javascript - How to check if thumbnail background image equals the showcase image in jQuery?

> ID：15520083
> 
> 赞同：0
> 
> 时间：2013-03-20T09:46:29.033
> 
> 标签：javascript, jquery, fadein

I want to fade in a thumbnail when it's not yet loaded in the showcase. Otherwise I don't want the fade in, because the image is allready loaded and the fade in looks odd.

How do I check if the thumbnail image currently is loaded as background-image in the showcase?

My HTML-part:

```
<div class="showcase pink hidden-phone">
<div class="detail">
                <div class="image">
                    <div id="myCarousel" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item" style="background-image: url('img/520x300.gif');">1</div>
                            <div class="item" style="background-image: url('img/520x300.gif');">2</div>
                            <div class="item" style="background-image: url('img/520x300.gif');">3</div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                    </div>                
                </div>
                <div class="text">
                    <span class="head">Locatie</span><br />
                    Hoogstraat te Eindhoven (centrum)<br />
                    <br />
                    <span class="head">Locatie</span><br />
                    Hoogstraat te Eindhoven (centrum)<br />
                    <br />
                    <span class="head">Verkoopprijs</span><br />
                    <span class="price">&euro; 449.000 k.k.</span><br />
                    <br />
                    <a href="#" class="info btn">Meer informatie</a>
                    <br />
                </div>
            </div>
            <div class="choice hidden-phone">
                <div class="row-fluid">
                    <a href="#" class="span2 border-pink" style="background-image: url('img/140x105.gif');" rel="0"></a>
                    <a href="#" class="span2 border-blue" style="background-image: url('img/140x105.gif');" rel="1"></a>
                    <a href="#" class="span2 active border-pink" style="background-image: url('img/140x105.gif');" rel="2"></a>
                    <a href="#" class="span2 border-blue" style="background-image: url('img/140x105.gif');" rel="3"></a>
                    <a href="#" class="span2 border-pink" style="background-image: url('img/140x105.gif');" rel="4"></a>
                    <a href="#" class="span2 border-blue" style="background-image: url('img/140x105.gif');" rel="5"></a>                    
                </div>
            </div>
        </div> 
```

Jquery-part:

```
if($('div.showcase .row-fluid').length)
{
    $('div.showcase .row-fluid').on('click','a',function(i,obj){
        var itemId =   $(this).attr('rel');
        var data   =   showcaseData[itemId];

        var htmlImg =   '';
        $.each(data.imagedirectory, function(i,obj2) {
            firstClass  =   (i == 0) ? ' active':'';
            htmlImg += '<div class="item'+firstClass+'" style="background-image: url(img/'+obj2.imgFile+');"></div>';
        });

        if (...){
            $("div.showcase div.carousel-inner").html(htmlImg);
            console.log(itemId);    
        } else {
            $('div.showcase div.carousel-inner').fadeTo(100, 0.2, function() 
            {
                $(this).html(htmlImg)
            }).fadeTo(300, 1);
            console.log(htmlImg);
        }

        $('span.location').html(data.street+' '+data.housenumber+' te '+data.city);
        $('span.metrage').html(data.metrage);
        $('span.price').html('&euro; '+number_format(data.price,2,',','.'));
        $('div.showcase a.info').attr('href',data.detail_url);
    });
}

if($('div.catalogDetail .row-fluid .thumbImages').length)
{
    $('div.catalogDetail .row-fluid .thumbImages').on('click','a',function(i,obj){
        var newImage =   $(this).attr('rel');
        $('.catalogDetail .mainImage').css('background-image','url('+newImage+')');
    });
} 
```

...

Thank you! Teun

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:33:39.370

您的意思是查看缩略图中实际设置的背景图像还是图像资源是否已完成加载？第一个选项：您应该能够访问元素的背景图像属性

`$('element').css('background-image');`

因此，您始终可以将其输出与您要检查的图像 URL 是否已加载进行比较。第二种选择：使用类似的东西

```
$('img.class').load(function() { do_things_when_loaded(); }); 
```

这将在实际加载图像资源时触发。希望那有所帮助！

# c# - Lock file in c# and later, in another thread unlock it?

> ID：15520084
> 
> 赞同：1
> 
> 时间：2013-03-20T09:46:30.097
> 
> 标签：c#, file, locking

I understand the the following code coulde be used to lock a file:

```
using (FileStream fs = 
         File.Open("MyFile.txt", FileMode.Open, FileAccess.Read, FileShare.None))
{
   // use fs
} 
```

However, I have an application based on actions which runs in different threads. So I want to lock a file first, exit that thread, and then later (maybe hours later) unlock the file. Is this possible?

# android - 设置背景图像警报对话框

> ID：15520086
> 
> 赞同：2
> 
> 时间：2013-03-20T09:46:32.277
> 
> 标签：android, android-alertdialog

我正在尝试`AlertDialog`使用`Buttons`和创建自定义`RadioGroup`。我想为此在我的可绘制对象中保存一个背景图像`AlertDialog`。

```
AlertDialog.Builder alert = new AlertDialog.Builder(AutoGenerate.this);                    
alert.setTitle("Select color"); 
```

有没有其他选择`alert.setbackgrounddrawable(R.drawable.img)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:56:30.533

你可以使用布局文件来做到这一点。检查下面的代码

```
LayoutInflater inflater = (LayoutInflater) this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View dialoglayout = inflater.inflate(R.layout.dialog_layout, null);
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(dialoglayout);
builder.show(); 
```

对话框布局.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

您还可以在 xml 中使用不同的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-26T15:07:10.470

是的，有一个相对简单的变体可以与 AlertDialog 一起使用：

```
// your code above
AlertDialog.Builder alert = new AlertDialog.Builder(AutoGenerate.this);                    
alert.setTitle("Select color");
// first show the dialog, then access its window and there set the background
alert.show();
alert.getWindow().setBackgroundDrawable(R.drawable.img); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:56:08.143

带有自定义视图的自定义对话框。

```
 Dialog d = new Dialog(AutoGenerate.this);
    d.requestWindowFeature(Window.FEATURE_NO_TITLE);
    d.setContentView(R.layout.alertdialog);// custom layour for dialog.
    Button thankyou = (Button) d.findViewById(R.id.thankyou);
    d.show(); 
```

警报对话框.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/dialog_layout_root"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF"
android:orientation="vertical"
android:padding="10dp"
 >
<Button
    android:id="@+id/thankyou"
    android:layout_width="100dp"
    android:layout_height="60dp"
    android:layout_gravity="center_horizontal" 
    android:text="hello"

    android:padding="5dp">

          </Button>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

</LinearLayout> 
```

编辑 ：

```
 rb= (RadioButton) findViewById(R.id.radioButton1);
    rb.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showAlertDialog();
        }

    });       

     public void showAlertDialog() {

        final Dialog d = new Dialog(MainActivity.this);
        d.requestWindowFeature(Window.FEATURE_NO_TITLE);
        d.setContentView(R.layout.alertdialog);
        // Thank you Button Listener.
        final TextView tv = (TextView) d.findViewById(R.id.textView1);
        final Button thankyou = (Button) d.findViewById(R.id.thankyou);
        thankyou.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent event) {
                // TODO Auto-generated method stub
                      tv.setText("Button Clicked");

                return true;
            }

        });

        d.show();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:50:33.587

您可以像这样将图标设置为警报对话框

```
alert.setIcon(R.drawable.image); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:09:30.427

查看[在 android 中创建自定义警报对话框](http://androidtrainningcenter.blogspot.in/2012/04/in-android-sometimes-we-want-to-display.html)。

# c# - C# 按字符串拆分 [] 分隔符仅匹配精确字

> ID：15520089
> 
> 赞同：4
> 
> 时间：2013-03-20T09:46:49.830
> 
> 标签：c#, regex, split

我有字符串，它的值应该由字符串分隔符分割。例如，我的分隔符是“at”，我只想通过精确的“at”关键字分割字符串值。下面是我的示例字符串值

```
 var sampleStr= "at Metadata at quota at what at batter"; 
```

如果我使用下面的代码，其中带有“at”的单词也会被拆分。

```
var result= sampleStr.Split(new string[] { "at" }, StringSplitOptions.None); 
```

我想要的结果是一个数组，如果组合起来将是“元数据配额什么击球手”。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:53:47.713

也许：

```
IEnumerable<string> wordsWithoutAt = sampleStr.Split()
    .Where(w => !StringComparer.OrdinalIgnoreCase.Equals(w, "at"));
string result = string.Join(" " , wordsWithoutAt); 
```

[**演示**](http://ideone.com/mITFGo)

如果情况很重要，请更换`StringComparer.OrdinalIgnoreCase`零件`!= "at"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:02:14.973

```
 splitted = Regex.Split(text,@"\bat\s*\b"); 
```

\b 表示任何单词边界。\s* 将匹配“at”之后的空白字符。

```
splitted : string [] = [|""; "Metadata "; "quota "; "what "; "batter"|] 
```

如果您**不需要空白空间**，请尝试如下...

```
List<string> splitted = Regex.Split(phrase, @"\bat\s*\b",StringSplitOptions.RemoveEmptyEntries);

splitted : string [] = [| "Metadata "; "quota "; "what "; "batter"|] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:49:24.190

对此没有任何可靠的解决方案，因为这是非常*语言*和您的字符串可能结构特定的。

为了*更容易*，您可能会考虑按`" at "`(`at`前后有空格) 分割，但这并不能解决所有可能的问题。

例子：

`"I was loooking at the tree"`, 会失败，因为这里的“at”不是分隔符，而是真实短语中的一个词*。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:55:34.137

你应该利用周围的空白......

首先，将原始文本包装在一些空格中以应对开头和/或结尾的“at”：

```
sampleStr = " " + sampleStr + " "; 
```

然后你是这样分裂的：

```
var result = sampleStr.Split(new string[] { " at " }, StringSplitOptions.RemoveEmptyEntries); 
```

然后你就有了你想要的结果。

# php - Wordpress query another wordpress database for loop

> ID：15520092
> 
> 赞同：0
> 
> 时间：2013-03-20T09:46:57.300
> 
> 标签：php, mysql, wordpress

I've been really stuck on this and on a tight deadline, basically there is two different wordpress installations. I will call the database which would be to main content: database1 and the one that the content would be loop onto: database2

Basically what I need to happen is the content from database1 to be displayed onto database2 in a loop, with metabox information, title, date, and featured image. This is how far I have gotten so far, this only shows the title and the date.

```
 <?php
        $originaldb = new wpdb('blank', 'blank', 'blank', 'blank');
        $results = $originaldb->get_results( "SELECT * FROM $wpdb->posts WHERE post_type='press' AND post_status='publish' ORDER BY post_date DESC LIMIT 30" ); 
        if($results):
          foreach($results as $post): setup_postdata($post);?>

              <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

                  <!-- Post Thumbnail -->

                          <?php the_post_thumbnail(); ?>

                  <!-- /Post Thumbnail -->

                  <div class="caption">
                      <div class="presslink"><a href="<?php $key_1_value = get_post_meta($post->ID, 'presslink', true); if($key_1_value != '') { echo $key_1_value; } ?>" target="_blank" title="<?php the_title(); ?>"><?php the_title(); ?></a></div>
                      <div class="pressdate"><a href="<?php $key_1_value = get_post_meta($post->ID, 'presslink', true); if($key_1_value != '') { echo $key_1_value; } ?>" target="_blank" title="<?php the_title(); ?>"><?php echo get_the_date('M Y'); ?></a></div>
                  </div>

              </article>
        <?php endforeach; ?>
        <?php else: ?>  
        Testing has failed
        <?php endif; ?> 
```

Any help would be great, I'm not that versed in PHP and SQL.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:13:27.517

您可能需要使用[XML-RPC](http://codex.wordpress.org/XML-RPC_WordPress_API)接口来使两个 WordPress 站点进行通信或实现您自己的 API 来导出数据（主机 WP），例如在另一个 WP 上的 json 和导入器中，它将收集这些数据并返回回到所需的格式（两个单独的插件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:08:58.573

```
<?php  query_posts('showposts'); while(have_posts()):the_posts(); the_title(); the_content(); the_post_thumbnail(); endwhile; wp_reset_query(); ?> 
```

试试这个代码希望它会帮助你：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:58:33.080

如果您正在获取帖子 ID。你可以尝试使用

```
<?php 
$post_id=get_the_ID();
echo get_the_post_thumbnail( $post_id); ?> 
```

希望这对你有用

# vbscript - Catch multiple commands in one script

> ID：15520097
> 
> 赞同：0
> 
> 时间：2013-03-20T09:47:16.653
> 
> 标签：vbscript, command, prompt

I use LANDesk for managing the devices in my company. This tool is great but it lacks te possibility to e-mail the device owner.

Therefore I created a right-click option called "Sent e-mail". This option executes a bat file. The e-mail adress is the commandline parameter.

If I select lets say 50 devices, the batch file will be executed 50 times. This is annoying, does anyone know how redirect all 50 ex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:30:39.910

我不知道向批处理文件发送 50 个或更多参数的问题出在哪里。如果问题是如何遍历多个可变数量的参数，那么：

```
FOR %%A IN (%*) DO (
    REM --Code goes here--
    ECHO %%A
) 
```

我希望这有帮助。

# android - remote() 的实现

> ID：15520098
> 
> 赞同：1
> 
> 时间：2013-03-20T09:47:21.240
> 
> 标签：android, linux, ipc, rpc, android-source

我试图找到 remote() 的实现，如：

```
remote()->transact(CODE, data, &reply); 
```

你们知道它在哪里吗？搜索谷歌结果是徒劳的。或者，如果您知道该功能的作用，那对我将有很大帮助。非常感谢

更新：似乎 remote() 将返回一个指向 BBinder、IBinder、BpBinder 或 IPCThreadState 类型对象的指针，但我不确定是哪一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:09:05.887

的实现`remote`很简单：

```
class BpRefBase : public virtual RefBase
{
protected:
                            BpRefBase(const sp<IBinder>& o);
    virtual                 ~BpRefBase();
    virtual void            onFirstRef();
    virtual void            onLastStrongRef(const void* id);
    virtual bool            onIncStrongAttempted(uint32_t flags, const void* id);

    inline  IBinder*        remote()                { return mRemote; }
    inline  IBinder*        remote() const          { return mRemote; }

private:
                            BpRefBase(const BpRefBase& o);
    BpRefBase&              operator=(const BpRefBase& o);

    IBinder* const          mRemote;
    RefBase::weakref_type*  mRefs;
    volatile int32_t        mState;
}; 
```

将`ServiceManager`管理所有已注册的服务，对于它的工作方式，请检查[现有答案](https://stackoverflow.com/a/15513172/1365960)。当你`getService`from`ServiceManager`时，它会返回一个`IBinder`代表那个服务的对象，然后这个`IBinder`对象会被放入一个`BpInterface`. 那是你的遥控器。然后，您可以使用它`BpInterface`来与实际的`service(BnInterface)`.

```
template<typename INTERFACE>
class BpInterface : public INTERFACE, public BpRefBase
{
public:
                                BpInterface(const sp<IBinder>& remote);

protected:
    virtual IBinder*            onAsBinder();
}; 
```

`BpXXX`一切似曾相识`BpCamera`，`BpCameraService`自始至终`BpInterface`。

# ios - 摆脱表格视图单元格中的重叠图像

> ID：15520099
> 
> 赞同：0
> 
> 时间：2013-03-20T09:47:21.953
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我已将按钮添加到 tableviewcell，现在我将背景图像添加到以数组形式获取的那些按钮。我已经添加了它们`[arrName objectatindex:indexPath.row]`。我遇到了一个问题，我的 tableview 单元格是在将单元格从一个交换到另一个时动态添加的。在添加一个已经有图像的单元格后，我遇到了一个问题，即按钮图像相互重叠。请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:54:53.303

也许`Clip Subviews`会有所帮助。在您定义`UITableViewCell`选择的 XIB 中，`UIButton`并在界面构建器中选择“剪辑子视图”-

![在此处输入图像描述](../Images/7f8387cff071f1394f78c1eff973a00f.png)

# excel - 应用程序结束后保持 Excel 打开（德尔福自动化）

> ID：15520100
> 
> 赞同：1
> 
> 时间：2013-03-20T09:47:22.637
> 
> 标签：excel, delphi, ms-office, ole, delphi-2007

我正在使用 Delphi 2007 的 ExcelXP 组件，如此处所述[，](http://www.djpate.freeserve.co.uk/AutoExcl.htm)连接到 MS Excel 并填充工作表中的一些字段。这可以正常工作，我可以随心所欲地修改工作表。

但是，我希望 Excel 在应用程序结束后保持打开状态，但前提是 Excel 中有打开的工作表。我可以使用 获取打开的工作簿的数量`ExcelApplication.Workbooks.Count`，因此在应用程序结束时检查是否打开了任何工作簿，并在此期间关闭 Excel 将是一项简单的任务`OnDestroy`。

现在我被困在Excel关闭的情况下，无论我的应用程序结束后是否有任何打开的工作簿。不是由于任何`.Disconnect`或`.Quit`电话，当我把它们全部拿出来时，它仍然会这样做；一旦我的应用程序关闭，Excel 仍然会关闭。

有没有人知道如果有打开的工作簿，我如何让 Excel 保持打开状态，并在没有工作簿时关闭它？

更新：`AutoQuit`我的 TExcelApplication 的属性设置为`True`. 原来这一直是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:56:11.990

以下[Deborah Pate 的页面](http://www.djpate.freeserve.co.uk/AutoExcl.htm#CloseExcel)向我建议，如果没有 Delphi 对象引用 ExcelXP，ExcelXP 会自动关闭 Excel。这不是 MS Interop 组件的问题：

> 但是请注意，除非您释放了所有工作簿和工作表变量，否则 Excel 将在内存中徘徊，不可见地运行。断开任何组件，将任何接口变量设置为 nil，并将任何变体设置为 Unassigned 以防止这种情况发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:00:21.247

在回答我自己的问题时，我的同事注意到 TExcelApplication 组件有一个`AutoQuit`属性。将其设置为`False`Excel 保持打开状态。现在我可以在我的`OnDestroy`活动中手动退出/断开 Excel。

# java - Deploying OSGI bundles through Maven

> ID：15520105
> 
> 赞同：0
> 
> 时间：2013-03-20T09:47:47.400
> 
> 标签：java, maven-2, osgi, equinox

Is there any way to deploy osgi bundles in a running equinox container through maven commands?

Any plugin available for the same?

I am posting this question after a lot of searching. I found that PAX-RUNNER could be useful. But it is working good with felix and not for equinox. Also it seems that pax runner starts a new instance of the container every time. I want my osgi bundles to be deployed in a running equinox environment and that needs to be done through maven commands.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:07:09.010

哎哟。部署*必须*在正在运行的 OSGi 框架内完成。现在，一些框架公开了从外部执行此操作的工具，但是如果您需要跨框架一致工作的东西，您将需要自己编写，组件之间的编排将是令人讨厌的 - 想想 OSGi 包，它公开了一个 HTTP 端点接受发布的捆绑包进行安装，以及可以发送它们的 Maven 插件。如果你写它，不要为自己保留它。

# android - onBackPressed 方法无法正常工作

> ID：15520107
> 
> 赞同：6
> 
> 时间：2013-03-20T09:47:57.407
> 
> 标签：android, android-keypad

在我的应用程序中有一个`EditText`. 为此，我在我的活动中调用了键盘显示`EditText`。键盘显示和工作正常。

现在，我必须按两次后退按钮，一次用于隐藏键盘，另一次用于执行某些任务（例如将数据保存到数据库）。**我不想按两次后退按钮。**

请指导我，或建议

这里有一些来自`onBackPressed()`

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    hideKeypad();

    //saving EditText data to db.
} 
```

代码形式`hideKeypad()`

```
private void hideKeypad() {
       InputMethodManager imm = (InputMethodManager) 
        getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(edittext1.getWindowToken(), 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:58:17.033

使用此方法与您已经完成的方法相似，但我对其进行了少许修改。注册主布局的侦听器并将其对象作为参数传递，以便当您单击编辑文本的一侧时，即 主布局键盘将消失。

```
/** Close Keypad on touch.
 * @param view on which click happens. */

 public void closeKeyPad(View view)
    {
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(view.getWindowToken(), 0);    
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:06:58.487

按返回关闭键盘是 UI 的标准功能。你为什么要改变这个？

习惯于在 Android 设备上使用软键盘的用户将习惯于按一次后退关闭键盘，然后再按一次返回应用程序。

如果您在显示键盘时让应用程序中的后退按钮向后移动，这会使导航与标准的 Android 导航不同，许多用户可能会对此感到沮丧。

除此之外，你`onBackPressed`没有被调用，因为当键盘显示时，`onBackPressed`键盘**运行**- 正如我们所见 - 隐藏键盘 - 而**不是**你的`onBackPressed`应用程序。

如果您确实想这样做，Mr.Me 的回答是这样做的方法，但我不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:04:32.437

问题是**键盘**消耗了第一个`BackPressed`事件。你无能为力。要解决这个问题，只需听键盘隐藏事件并完成您的活动。

执行此操作的代码：

```
 edit.setOnEditorActionListener(
     new EditText.OnEditorActionListener() {
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
if (actionId == EditorInfo.IME_ACTION_SEARCH ||
        actionId == EditorInfo.IME_ACTION_DONE ||
        event.getAction() == KeyEvent.ACTION_DOWN &&
        event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
    if (!event.isShiftPressed()) {
       // the user is done typing.  finish the activity
       finish();
       return true; // consume.
    }                
}
return false; // pass on to other listeners. 
}
}); 
```

# arrays - 你能从 $_POST 中提取变量的名称吗？

> ID：15520108
> 
> 赞同：0
> 
> 时间：2013-03-20T09:48:02.233
> 
> 标签：arrays, variables, post, reverse

您可以将 $_POST 数组提取到分配的值...

```
foreach($_POST as $key=>$value){ $$key=$value;} 
```

但是如何找到变量本身的名称？

如果我做了一个表格说

```
<input Name = "Turtle" value = "Slow"> 
```

然后我做一个：

```
foreach($_POST as $key=>$value) 
```

我出来了

```
$Turtle = "Slow" 
```

但是我怎样才能知道$_Post 数组中是否包含哪些 $Turtle*变量名称？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:01:46.527

array_keys 函数将为您提供所有键。

```
$keys = array_keys($_POST); 
```

[array_keys 的 PHP 手册](http://us2.php.net/array_keys)

# android - 安卓通用图片加载器

> ID：15520110
> 
> 赞同：2
> 
> 时间：2013-03-20T09:48:10.343
> 
> 标签：android, caching, universal-image-loader

我有自`ListFragment`定义`ListAdapter`和四个导航选项卡与其他内容。我需要显示一些需要从其中的 URL 下载的图像`Fragment`。

我试过使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它工作正常，但它似乎没有兑现我的文件，虽然我已经设置好了。每次我打开另一个选项卡然后回到这个图像开始再次下载。

我是`displayImage(String url, ImageView view, DisplayImageOptions options)`从打来`getView()`的`ListAdapter`。

**问题**：

如何让 UIL 在每次重新创建`Activitiy`或时不下载图像`Fragment`？

```
DisplayImageOptions options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.blue_background)
    .cacheInMemory()
    .cacheOnDisc()
    .build();
    imageLoader.init(ImageLoaderConfiguration.createDefault(context)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:31:17.727

您确定它会再次下载图像吗？除非您指定了较小大小的磁盘缓存，否则不应发生这种情况，或者因为它仅将图像保存在内存中，当达到您为内存指定的最大大小时，它会删除旧图像！尽量不要使用 inMemory 缓存而只使用磁盘缓存，并尝试指定更多时间来加载图像，默认值为 1000ms ：

```
options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.ic_empty)
    .showImageForEmptyUri(R.drawable.ic_empty)
    .showImageOnFail(R.drawable.ic_empty)
    .resetViewBeforeLoading()
    .cacheOnDisc()
    .imageScaleType(ImageScaleType.IN_SAMPLE_INT) // default
    .bitmapConfig(Bitmap.Config.RGB_565) // default
    .displayer(new SimpleBitmapDisplayer()) // default
    .handler(new Handler()) // default
    .build(); 
```

# c++ - 解析带有多行字段和转义双引号的 CSV 文件

> ID：15520113
> 
> 赞同：3
> 
> 时间：2013-03-20T09:48:12.920
> 
> 标签：c++, csv

解析具有**多行字段和转义引号**的 CSV 文件的最佳方法是什么？

例如，这个 CSV

```
First field of first row,"This field is multiline

but that's OK because it's enclosed in double qoutes, and this
is an escaped "" double qoute" but this one "" is not
   "This is second field of second row, but it is not multiline
because it doesn't start 
with an immediate double quote" 
```

在 Excel 中看起来像这样：

![在此处输入图像描述](../Images/8cf34f7bfb8049b7098c6402395d41bb.png)

我是否只是以某种方式保留状态，有一个标志说明我现在正在阅读的字段是否以 qoute 等开头？另外，如果有双引号但不在字段开头的情况下会发生什么情况，即`, "ABC"`，或者`,"item "" item" ""`那些被认为无效的情况？此外，`""`如果不在带引号的字段内，引号是否会转义？Excel似乎没有。

还有其他我可能错过的**极端案例吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:38:15.003

您的示例数据在 'double qoute' (sic) 之后有一个单双引号，它终止了字段的双引号开头，但您必须继续阅读直到下一个逗号或行尾。这是一个格式错误的多行字段，但您会看到 Excel 对它的作用。您可以在（优秀的）《[编程实践》](http://cm.bell-labs.com/cm/cs/tpop/index.html)一书中找到对此的描述（*死链接*— [Internet 存档副本](https://web.archive.org/web/20080919012027/http://cm.bell-labs.com:80/cm/cs/tpop/code.html)；[普林斯顿大学](http://www.cs.princeton.edu/~bwk/tpop.webpage/)的实时链接），其中包括 C 中的 CSV 解析库和 C++ 中的重新实现，并讨论了这个级别的细节。[RFC 4180](http://www.ietf.org/rfc/rfc4180.txt) “Common Format and MIME Type for Comma-Separated Values”中还有一个CSV标准，你也可以学习[维基百科](http://en.wikipedia.org/wiki/Comma-separated_values)就此主题而言。

* * *

在另一个答案中是一些示例代码，仍在测试中。它在其限制范围内非常有弹性。在这里，它被修改为 SSCCE（[简短、自包含、正确的示例](http://sscce.org/)）。

```
#include <stdbool.h>
#include <wchar.h>
#include <wctype.h>

extern const wchar_t *nextCsvField(const wchar_t *p, wchar_t sep, bool *newline);

// Returns a pointer to the start of the next field,
// or zero if this is the last field in the CSV
// p is the start position of the field
// sep is the separator used, i.e. comma or semicolon
// newline says whether the field ends with a newline or with a comma
const wchar_t *nextCsvField(const wchar_t *p, wchar_t sep, bool *newline)
{
    // Parse quoted sequences
    if ('"' == p[0]) {
        p++;
        while (1) {
            // Find next double-quote
            p = wcschr(p, L'"');
            // If we don't find it or it's the last symbol
            // then this is the last field
            if (!p || !p[1])
                return 0;
            // Check for "", it is an escaped double-quote
            if (p[1] != '"')
                break;
            // Skip the escaped double-quote
            p += 2;
        }
    }

    // Find next newline or comma.
    wchar_t newline_or_sep[4] = L"\n\r ";
    newline_or_sep[2] = sep;
    p = wcspbrk(p, newline_or_sep);

    // If no newline or separator, this is the last field.
    if (!p)
        return 0;

    // Check if we had newline.
    *newline = (p[0] == '\r' || p[0] == '\n');

    // Handle "\r\n", otherwise just increment
    if (p[0] == '\r' && p[1] == '\n')
        p += 2;
    else
        p++;

    return p;
}

static void dissect(const wchar_t *line)
{
    const wchar_t *start = line;
    const wchar_t *next;
    bool     eol;
    wprintf(L"Input: %d [%.*ls]\n", wcslen(line), wcslen(line)-1, line);
    while ((next = nextCsvField(start, L',', &eol)) != 0)
    {
        wprintf(L"Field: [%.*ls] (eol = %d)\n", (next - start - eol), start, eol);
        start = next;
    }
}

static const wchar_t multiline[] =
   L"First field of first row,\"This field is multiline\n"
    "\n"
    "but that's OK because it's enclosed in double quotes, and this\n"
    "is an escaped \"\" double quote\" but this one \"\" is not\n"
    "   \"This is second field of second row, but it is not multiline\n"
    "   because it doesn't start \n"
    "   with an immediate double quote\"\n"
    ;

int main(void)
{
    wchar_t line[1024];

    while (fgetws(line, sizeof(line)/sizeof(line[0]), stdin))
        dissect(line);
    dissect(multiline);

    return 0;
} 
```

### 示例输出

```
$ cat csv.data
a,bb, c ,d""e,f
1,"2","",,"""",4
$ ./wcsv < csv.data
Input: 16 [a,bb, c ,d""e,f]
Field: [a,] (eol = 0)
Field: [bb,] (eol = 0)
Field: [ c ,] (eol = 0)
Field: [d""e,] (eol = 0)
Field: [f] (eol = 1)
Input: 17 [1,"2","",,"""",4]
Field: [1,] (eol = 0)
Field: ["2",] (eol = 0)
Field: ["",] (eol = 0)
Field: [,] (eol = 0)
Field: ["""",] (eol = 0)
Field: [4] (eol = 1)
Input: 296 [First field of first row,"This field is multiline

but that's OK because it's enclosed in double quotes, and this
is an escaped "" double quote" but this one "" is not
   "This is second field of second row, but it is not multiline
   because it doesn't start 
   with an immediate double quote"]
Field: [First field of first row,] (eol = 0)
Field: ["This field is multiline

but that's OK because it's enclosed in double quotes, and this
is an escaped "" double quote" but this one "" is not] (eol = 1)
Field: [   "This is second field of second row,] (eol = 0)
Field: [ but it is not multiline] (eol = 1)
Field: [   because it doesn't start ] (eol = 1)
Field: [   with an immediate double quote"] (eol = 1)
$ 
```

我说的是“在其范围内”；它的局限性是什么？

首先，它隔离原始字段，而不是转换后的字段。因此，必须修改它隔离的字段以产生“真实”值，去掉封闭的双引号，并将内部的双引号替换为单引号。将原始字段转换为实际值模仿了`nextCsvField()`函数中的大量代码。输入是字段的开头和字段的结尾（分隔符）。这是第二个带有额外函数的 SSCCE，上面显示`csvFieldData()`的`dissect()`函数已修改为调用它。解剖输出的格式略有不同，因此看起来更好：

```
#include <stdbool.h>
#include <wchar.h>
#include <wctype.h>

extern const wchar_t *nextCsvField(const wchar_t *p, wchar_t sep, bool *newline);

// Returns a pointer to the start of the next field,
// or zero if this is the last field in the CSV
// p is the start position of the field
// sep is the separator used, i.e. comma or semicolon
// newline says whether the field ends with a newline or with a comma
const wchar_t *nextCsvField(const wchar_t *p, wchar_t sep, bool *newline)
{
    // Parse quoted sequences
    if ('"' == p[0]) {
        p++;
        while (1) {
            // Find next double-quote
            p = wcschr(p, L'"');
            // If we don't find it or it's the last symbol
            // then this is the last field
            if (!p || !p[1])
                return 0;
            // Check for "", it is an escaped double-quote
            if (p[1] != '"')
                break;
            // Skip the escaped double-quote
            p += 2;
        }
    }

    // Find next newline or comma.
    wchar_t newline_or_sep[4] = L"\n\r ";
    newline_or_sep[2] = sep;
    p = wcspbrk(p, newline_or_sep);

    // If no newline or separator, this is the last field.
    if (!p)
        return 0;

    // Check if we had newline.
    *newline = (p[0] == '\r' || p[0] == '\n');

    // Handle "\r\n", otherwise just increment
    if (p[0] == '\r' && p[1] == '\n')
        p += 2;
    else
        p++;

    return p;
}

static wchar_t *csvFieldData(const wchar_t *fld_s, const wchar_t *fld_e, wchar_t *buffer, size_t buflen)
{
    wchar_t *dst = buffer;
    wchar_t *end = buffer + buflen - 1;
    const wchar_t *src = fld_s;

    if (*src == L'"')
    {
        const wchar_t *p = src + 1;
        while (p < fld_e && dst < end)
        {
            if (p[0] == L'"' && p+1 < fld_s && p[1] == L'"')
            {
                *dst++ = p[0];
                p += 2;
            }
            else if (p[0] == L'"')
            {
                p++;
                break;
            }
            else
                *dst++ = *p++;
        }
        src = p;
    }
    while (src < fld_e && dst < end)
        *dst++ = *src++;
    if (dst >= end)
        return 0;
    *dst = L'\0';
    return(buffer);
}

static void dissect(const wchar_t *line)
{
    const wchar_t *start = line;
    const wchar_t *next;
    bool     eol;
    wprintf(L"Input %3zd: [%.*ls]\n", wcslen(line), wcslen(line)-1, line);
    while ((next = nextCsvField(start, L',', &eol)) != 0)
    {
        wchar_t buffer[1024];
        wprintf(L"Raw Field: [%.*ls] (eol = %d)\n", (next - start - eol), start, eol);
        if (csvFieldData(start, next-1, buffer, sizeof(buffer)/sizeof(buffer[0])) != 0)
            wprintf(L"Field %3zd: [%ls]\n", wcslen(buffer), buffer);
        start = next;
    }
}

static const wchar_t multiline[] =
   L"First field of first row,\"This field is multiline\n"
    "\n"
    "but that's OK because it's enclosed in double quotes, and this\n"
    "is an escaped \"\" double quote\" but this one \"\" is not\n"
    "   \"This is second field of second row, but it is not multiline\n"
    "   because it doesn't start \n"
    "   with an immediate double quote\"\n"
    ;

int main(void)
{
    wchar_t line[1024];

    while (fgetws(line, sizeof(line)/sizeof(line[0]), stdin))
        dissect(line);
    dissect(multiline);

    return 0;
} 
```

### 示例输出

```
$ ./wcsv < csv.data
Input  16: [a,bb, c ,d""e,f]
Raw Field: [a,] (eol = 0)
Field   1: [a]
Raw Field: [bb,] (eol = 0)
Field   2: [bb]
Raw Field: [ c ,] (eol = 0)
Field   3: [ c ]
Raw Field: [d""e,] (eol = 0)
Field   4: [d""e]
Raw Field: [f] (eol = 1)
Field   1: [f]
Input  17: [1,"2","",,"""",4]
Raw Field: [1,] (eol = 0)
Field   1: [1]
Raw Field: ["2",] (eol = 0)
Field   1: [2]
Raw Field: ["",] (eol = 0)
Field   0: []
Raw Field: [,] (eol = 0)
Field   0: []
Raw Field: ["""",] (eol = 0)
Field   2: [""]
Raw Field: [4] (eol = 1)
Field   1: [4]
Input 296: [First field of first row,"This field is multiline

but that's OK because it's enclosed in double quotes, and this
is an escaped "" double quote" but this one "" is not
   "This is second field of second row, but it is not multiline
   because it doesn't start 
   with an immediate double quote"]
Raw Field: [First field of first row,] (eol = 0)
Field  24: [First field of first row]
Raw Field: ["This field is multiline

but that's OK because it's enclosed in double quotes, and this
is an escaped "" double quote" but this one "" is not] (eol = 1)
Field 140: [This field is multiline

but that's OK because it's enclosed in double quotes, and this
is an escaped " double quote" but this one "" is not]
Raw Field: [   "This is second field of second row,] (eol = 0)
Field  38: [   "This is second field of second row]
Raw Field: [ but it is not multiline] (eol = 1)
Field  24: [ but it is not multiline]
Raw Field: [   because it doesn't start ] (eol = 1)
Field  28: [   because it doesn't start ]
Raw Field: [   with an immediate double quote"] (eol = 1)
Field  34: [   with an immediate double quote"]
$ 
```

我没有测试过`\r\n`（或普通的`\r`）行尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:39:58.287

我编写了一个函数（我仍在测试），它试图尽可能地解析它。

```
// Returns a pointer to the start of the next field, or zero if this is the
// last field in the CSV p is the start position of the field sep is the
// separator used, i.e. comma or semicolon newline says whether the field ends
// with a newline or with a comma
static const wchar_t* nextCsvField(const wchar_t *p, wchar_t sep, bool *newline, const wchar_t **escapedEnd)
{
    *escapedEnd = 0;
    *newline = false;

    // Parse quoted sequences
    if ('"' == p[0]) {
        p++;
        while (1) {
            // Find next double-quote.
            p = wcschr(p, L'"');
            // If we didn't find it then this is the last field.
            if (!p)
                return 0;
            // Check for "", it is an escaped double-quote.
            if (p[1] != '"') {
                *escapedEnd = p;
                break;
            }
            // If it's the last symbol then this is the last field
            if (!p[1])
                return 0;
            // Skip the escaped double-quote
            p += 2;
        }
    }

    // Find next newline or comma.
    wchar_t newline_or_sep[4] = L"\n\r ";
    newline_or_sep[2] = sep;
    p = wcspbrk(p, newline_or_sep);

    // If no newline or separator, this is the last field.
    if (!p)
        return 0;

    // Check if we had newline.
    *newline = (p[0] == '\r' || p[0] == '\n');

    // Handle "\r\n", otherwise just increment
    if (p[0] == '\r' && p[1] == '\n')
        p += 2;
    else
        p++;

    return p;
} 
```

# ruby-on-rails - 如何在数据库 after_save 或 before_save 中保存计算的年龄

> ID：15520114
> 
> 赞同：1
> 
> 时间：2013-03-20T09:48:14.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

用户需要在保存他的个人资料之前输入他的生日。我在配置文件表中也有一个年龄列。但我不希望用户必须填写他的出生日期和年龄。我已经有一种方法可以根据用户的生日计算用户年龄。问题是如何在计算后将用户年龄保存在数据库中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:53:38.693

我建议您不要将其保存在数据库中，在应用程序需要时计算它。

如果您将其保存在数据库中，那么您可能会冒着它们变老而没有更新值的风险！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:39:12.430

您可以在模型中有一个抽象属性（而不是数据库中的列），它将为您计算年龄。例如：

`dob`= 数据库表中的列
`age`= 抽象属性

```
class User < ActiveRecord::Base
  attr_accessible :dob
  attr_accessor :age

  def age
    Time.now.year - self.dob.year
  end

end 
```

通过这种方式，您可以轻松找到用户的年龄：

```
u = User.find(1)
u.dob
=> Thu, 20 Mar 2008 
u.age
=> 5 
```

但是，我建议你看看[这篇文章](https://stackoverflow.com/questions/819263/get-persons-age-in-ruby?answertab=votes#tab-top)，因为有一些关于闰年的问题，你可能想调整你的`age`方法。

**编辑**-无论如何，如果您有充分的理由`age`在表格中添加该列，则应该使用`before_save`它，因为它将在`create`和上触发`update`。

```
class User < ActiveRecord::Base
  attr_accessible :dob, :age
  before_save :set_age

  def set_age
    self.age = Time.now.year - self.dob.year
  end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:55:32.907

在 HTML 页面的应用程序中，使用 java-script 函数可以通过 jquery - date 方法计算用户的年龄。

`calculate_age()`只需在 JS 文件中编写一个函数即可。并将该值放在隐藏字段之一中。您可以使用该隐藏字段将年龄存储在数据库中。

在您正在收集出生日期的那个输入框中，只需编写 onblur 事件来调用 calculate_age() 函数。

**HTML 代码**

```
<input type='text' id='dob' name='dob' onblur='calculate_age(this);' />
<input type='hidden' id='age' name='age' /> 
```

**JS代码**

```
function calculate_age(element_id){
    var date_of_birth = $('#'+element_id).val();
   // JS code for calculating age using date of birth
   $('#age').val(age);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T10:12:58.000

```
class User < ActiveRecord::Base

before_create :calculate_age

def calculate_age
   self.age= Time.now - self.birthday # do calculate yourself, I don't know your parameters
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T09:52:30.887

你确实需要保存它。年龄应在运行时从 DOB 列计算。

# c# - Get the inner elements of the richtextbox

> ID：15520122
> 
> 赞同：0
> 
> 时间：2013-03-20T09:48:37.273
> 
> 标签：c#, windows-phone-8

I had a rich textbox like this:

```
 <RichTextBox x:Name="richtextbox">
            <RichTextBox.Template>
                <ControlTemplate>
                    <StackPanel Orientation="Horizontal">
                        <HyperlinkButton  x:Name="txtnam" HorizontalAlignment="Left" VerticalAlignment="Center" Width="3" />
                        <TextBlock x:Name="txttextblock" Width="452"/>
                    </StackPanel>
                </ControlTemplate>
            </RichTextBox.Template>
        </RichTextBox> 
```

Now i want to insert a text in textblock using button click event.If textblock is out of richtextbox we can access like this.txttextblock.text ="content". But how access this textblock now in button click.Can any one please help me to find the solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T18:58:56.940

您可以使用“FindName”方法来查找子元素。

```
((TextBlock)richtextbox.FindName("txttextblock")).Width 
```

输出：452

# php - 从 PHP 的下拉列表中获取多个值

> ID：15520126
> 
> 赞同：0
> 
> 时间：2013-03-20T09:48:54.577
> 
> 标签：php, drop-down-menu

我正在从数据库中填充 PHP 中的选择框（下拉框）。

```
function selBox(){
    conDB();
    $sql1 = "SELECT cname FROM course";
    $selResult = mysql_query($sql1);
    echo"<option value = 'default'>Select Course</option>";
        $rowNum = 0;
        while($selRows = mysql_fetch_array($selResult)){
        echo"<option value = " . $selRows[0] . ">" . $selRows[0] . </option>";
        }
    mysql_close();
} 
```

上面的函数在 html 中被调用，如下所示：

```
<select name="delCourse"><?php selBox();?></select> 
```

在同一页面上，我得到了在下拉框中选择的值。

```
$Selected = $_POST['delCourse'];
            echo $Selected; 
```

发生的事情是我在数据库中有很多课程填充到保管箱。用户进行选择，然后将其放入 $Selected 以转发到另一个函数。

问题：与 $Selected 相呼应会遇到双重答案，例如 ScienceScience 或数学数学。我也许可以对此进行一些字符串操作以获得正确的答案。是否有另一种方法可以从 Dropbox 中选择的内容中只获得一个答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:10:33.663

好的，通过使用该功能，我得到了问题的答案。我的函数现在看起来像这样：

```
function selBox($selValue){
    conDB();
    $sql1 = "SELECT cid, cname FROM course";
    $selResult = mysql_query($sql1);
    echo"<option value = 'default'>Select Course</option>";
        while($selRows = mysql_fetch_array($selResult)){
            $id = htmlspecialchars($selRows["cid"]) ;
            $course = htmlspecialchars($selRows["cname"]);
            echo "<option value='$id'>$course</option>";
        }
    $selValue = $_POST['delCourse'];
    mysql_close();
    return;
} 
```

该函数从我的其他页面被这样调用：

```
 <select name="delCourse"><?php selBox($selValue);?></select> 
```

switch 语句中检查选择的部分现在看起来像这样：

```
 case "Delete Course":
            $selValue = "";
            $Selected = $selValue;
            echo $Selected;
            break; 
```

我现在通过执行上述操作获得单打值。现在我可以再次将该值传递给下一个函数。

# spring - STS first springmvcproject "servlet-context.xml" & "root-context.xml" error

> ID：15520127
> 
> 赞同：1
> 
> 时间：2013-03-20T09:48:57.637
> 
> 标签：spring, model-view-controller

i downloaded 3.8.3(64) sts tools zip file and i try to crate my first springmvcproject i get errors "servlet-context.xml" and "root-context.xml" compiler didn't show any error but show me red sign on corner of the files. I try to run show I got the error 404\. how fixed the problem

edit: here is screenshot

[http://www.flickr.com/photos/94224113@N04/8574687076/in/photostream/lightbox/](http://www.flickr.com/photos/94224113@N04/8574687076/in/photostream/lightbox/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T09:22:33.433

```
**root-context.xml File**

    <!-- Root Context: defines shared resources visible to all other web components -->

   <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/schema" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean> 
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="emf"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

 <context:component-scan base-package="com.comp.project.serviceImpl" /> 

    <bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>        
        <property name="packagesToScan" value="com.comp.project.Domain"/>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">50</prop>
                <prop key="hibernate.jdbc.batch_size">10</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>  
             <!--    <prop key="hibernate.SQL">TRACE</prop> 
                <prop key="hibernate.type">TRACE</prop>  -->

            </props>        
        </property>
    </bean>    
  <!--   <context:annotation-config/> -->    
    <jpa:repositories base-package="com.comp.project.repository"
                      entity-manager-factory-ref="emf"
                      transaction-manager-ref="transactionManager"/> 
   </beans>

**Servlet-context.xml**

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->
     <context:annotation-config />
    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <!-- <resources mapping="/resources/**" location="/resources/" /> -->

    <mvc:resources location="/, classpath:/META-INF/web-resources/" mapping="/resources/**"/>

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.comp.project" />

    <mvc:view-controller path="/" view-name="home" />

    <interceptors>
        <beans:bean
            class="org.springframework.web.servlet.theme.ThemeChangeInterceptor" />
         <beans:bean
            class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
            p:paramName="lang" /> 
    </interceptors>

    <beans:bean
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        id="messageSource" p:basenames="WEB-INF/i18n/messages"
        p:fallbackToSystemLocale="false" />
    <beans:bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
        id="localeResolver" p:cookieName="locale" />
    <beans:bean
        class="org.springframework.ui.context.support.ResourceBundleThemeSource"
        id="themeSource" />
    <beans:bean class="org.springframework.web.servlet.theme.CookieThemeResolver"
        id="themeResolver" p:cookieName="theme" p:defaultThemeName="standard" />
    <!-- Enable file upload functionality -->
    <beans:bean id="multipartResolver"
      class="org.springframework.web.multipart.commons.CommonsMultipartResolver">

<!-- one of the properties available; the maximum file size in bytes -->
<!--  <bean:property name="maxUploadSize" value="10000000" />  -->
</beans:bean>

</beans:beans> 
```

# c++ - LNK2019 函数中未解析的外部符号引用

> ID：15520138
> 
> 赞同：0
> 
> 时间：2013-03-20T09:49:21.263
> 
> 标签：c++, visual-studio, linker-errors, cocos2d-x, lnk2019

在 Visual Studio 中运行的基本 cocos2dx 应用程序中出现链接器错误。当 AppDelegate 的“applicationDidFinishLaunching”方法调用“MyGameScene”的“singleton”方法时发生。我已经检查了 MyGameScene.h 中定义的方法是否在 MyGameScene.cpp 类中实现

**错误信息**

```
Error   1   error LNK2019: unresolved external symbol "public: static class
MyGame * __cdecl MyGame::singleton(void)" (?singleton@MyGame@@SAPAV1@XZ) 
referenced in function "public: virtual bool __thiscall 
AppDelegate::applicationDidFinishLaunching(void)" 
(?applicationDidFinishLaunching@AppDelegate@@UAE_NXZ)   D:\Dev\cocos2d-2.0-x-
2.0.4\MyGame\proj.win32\AppDelegate.obj MyGame 
```

**AppDelegate.h**

```
#ifndef  _APP_DELEGATE_H_
#define  _APP_DELEGATE_H_

#include "CCApplication.h"

/**
@brief    The cocos2d Application.

The reason for implement as private inheritance is to hide some interface call by   CCDirector.
*/
class  AppDelegate : private cocos2d::CCApplication
{
public:
AppDelegate();
virtual ~AppDelegate();

/**
@brief    Implement CCDirector and CCScene init code here.
@return true    Initialize success, app continue.
@return false   Initialize failed, app terminate.
*/
virtual bool applicationDidFinishLaunching();

/**
@brief  The function be called when the application enter background
@param  the pointer of the application
*/
virtual void applicationDidEnterBackground();

/**
@brief  The function be called when the application enter foreground
@param  the pointer of the application
*/
virtual void applicationWillEnterForeground();
};

#endif // _APP_DELEGATE_H_ 
```

**AppDelegate.cpp**

```
#include "AppDelegate.h"
#include "cocos2d.h"
#include "MyGameScene.h"

USING_NS_CC;

AppDelegate::AppDelegate()
{

}

AppDelegate::~AppDelegate()
{
}

bool AppDelegate::applicationDidFinishLaunching()
{
// initialize director
CCDirector *pDirector = CCDirector::sharedDirector();
pDirector->setOpenGLView(CCEGLView::sharedOpenGLView());

// turn on display FPS
pDirector->setDisplayStats(true);

// set FPS. the default value is 1.0/60 if you don't call this
pDirector->setAnimationInterval(1.0 / 60);

// create a scene. it's an autorelease object
MyGame *MyGame = MyGame::singleton();
CCScene *pScene = MyGame->scene();

// run
pDirector->runWithScene(pScene);

return true;
}

// This function will be called when the app is inactive. When comes a phone call,it's be invoked too
void AppDelegate::applicationDidEnterBackground()
{

CCDirector::sharedDirector()->pause();

// if you use SimpleAudioEngine, it must be pause
// SimpleAudioEngine::sharedEngine()->pauseBackgroundMusic();
}

// this function will be called when the app is active again
void AppDelegate::applicationWillEnterForeground()
{

CCDirector::sharedDirector()->resume();

// if you use SimpleAudioEngine, it must resume here
// SimpleAudioEngine::sharedEngine()->resumeBackgroundMusic();
} 
```

**我的游戏场景.h**

```
#ifndef __MYGAME_SCENE_H__
#define __MYGAME_SCENE_H__

#include "cocos2d.h"
#include "Box2D/Box2d.h"

#define PTM_RATIO 32

USING_NS_CC;
class MyGame: public cocos2d::CCLayer {
public:

    cocos2d::CCSprite *_ball;

    // implement the "static node()" method manually
    CREATE_FUNC(MyGame)
    ;

    static MyGame *singleton();

    MyGame();
    ~MyGame();

    // Here's a difference. Method 'init' in cocos2d-x returns bool, instead of returning 'id' in cocos2d-iphone
    virtual bool init();

    // there's no 'id' in cpp, so we recommand to return the exactly class pointer
    cocos2d::CCScene* scene();

    // a selector callback
    void menuCloseCallback(CCObject* pSender);

    void Tick(float dt);

private:
    CCScene *_scene;

    int mWidth;
    int mHeight;

};

#endif // __MYGAME_SCENE_H__ 
```

**我的游戏场景.cpp**

```
 #include "MyGameScene.h"
//#include "SimpleAudioEngine.h"
#include "Shaders.h"

using namespace cocos2d;
//using namespace CocosDenshion;

#define COCOS2D_DEBUG 1

extern "C" {
#include <pthread.h>
#include <unistd.h>
}

static MyGame *_MyGameSingleton = NULL;
static bool mIsNewFrameReceived;

MyGame* MyGame::singleton() {
    // 'layer' is an autorelease object
    if (_MyGameSingleton == NULL) {
        _MyGameSingleton = MyGame::create();

    }
    return _MyGameSingleton;
}

CCScene* MyGame::scene() {
    if (!_scene) {
        // 'scene' is an autorelease object
        _scene = CCScene::create();

        // add layer as a child to scene
        _scene->addChild(this);
    }

    // return the scene
    return _scene;
}

// on "init" you need to initialize your instance
bool MyGame::init() {
    _scene = NULL;

    if (!CCLayer::init()) {
        return false;
    }
//  CCLOG("init");
//  CCSize winSize = CCDirector::sharedDirector()->getWinSize();
//  mWidth = winSize.width;
//  mHeight = winSize.height;
    this->schedule(schedule_selector(MyGame::Tick));

    return true;
}

void MyGame::menuCloseCallback(CCObject* pSender) {
    CCDirector::sharedDirector()->end();

#if (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
    exit(0);
#endif
}

MyGame::~MyGame() {

}

MyGame::MyGame() {

}

void MyGame::Tick(float dt) {
    CCDirector *director = CCDirector::sharedDirector();
    CCSize windowSize = director->getVisibleSize();
    mWidth = windowSize.width;
    mHeight = windowSize.height;
} 
```

**更新** 我在 Visual Studio 本身的项目中创建了一个新类，并将 MyGame 类的所有变量和成员函数复制到它。然后，我能够引用新类并正确编译。

[在此处复制我的评论仅供参考] 我可以使用 cygwin 在 Windows 上编译现有的 cocos2dx 游戏，我的同事可以使用 XCode 在 Mac 上编译相同的东西。问题仅在使用 Visual Studio 编译时出现

我认为 Visual Studio 没有编译 MyGame 文件。如何确保该类将被编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:44:19.737

您是否尝试在 .cpp 文件的顶部设置静态 MyGame 变量？

```
static MyGame *singleton(); 
```

如果未在任何地方设置，则生成此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:44:07.770

我想这是一个错字。错误消息确实包含足够的信息。“公共：静态 ----- `class`---- MyGame * __cdecl ...”

```
MyGame *MyGame 
```

应该

```
MyGame *myGame 
```

在 AppdDeleate.cpp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:48:48.323

从模板创建项目后，我发现我没有正确链接 cocos2dx 库。这就是链接器错误的原因[尽管错误将我指向了不同的方向]。
感谢大家的帮助！
我打算列出正确的步骤，我稍后使用，在现有 cocos2dx 项目中的 Visual Studio 2012 中创建一个 win32 项目，供任何访问此问题并遇到类似问题的人使用。

# java - 如何向方法或类添加描述

> ID：15520142
> 
> 赞同：19
> 
> 时间：2013-03-20T09:49:30.470
> 
> 标签：java, netbeans, javadoc

如何在 Java 中添加方法描述？我使用 NetBeans IDE。

![JavaDoc 示例](../Images/0c9b3d423d8d3cfcd012aa487d5e214f.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-20T10:12:20.363

您可以使用 javadocs 使用 /** 注释 */

对于一种方法，基本上你可以拥有

```
/**
The Desciption of the method to explain what the method does
@param the parameters used by the method
@return the value returned by the method
@throws what kind of exception does this method throw
*/ 
```

您可以使用此链接获取更多帮助[http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#descriptions](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#descriptions)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-20T09:50:41.827

使用 javadoc 注释 - /** 这是一条注释 */

检查此链接以获取详细文档[http://en.wikipedia.org/wiki/Javadoc](http://en.wikipedia.org/wiki/Javadoc)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T09:54:19.353

在您的方法上方写评论应该做您想要的示例：

```
/** 
This method does some serious stuff 
*/
public int getN()
{
return n;
} 
```

如果您使用 javadocs，它应该是方法的描述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T09:52:12.840

请参阅[指南](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)并查看[一些标准 Java 类的源代码](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/StringBuilder.java/?v=source)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T10:08:21.047

都在这里： [http](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/index.html) ://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/index.html 。

我添加这句话是因为我上面的答案对于 SO 来说太短了。:-)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T10:12:25.013

我想 IDE 正在寻找源文件中的 javadoc 定义。因此，您需要将源附加到项目中使用的库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-12T07:53:55.327

```
@Description("method name")
methodName<String> getset(){...}

@Description("class name")
class ClassName{..} 
```

# ios5 - How to make a sprite move within a circular boundary using accelerometer in cocos2d

> ID：15520143
> 
> 赞同：0
> 
> 时间：2013-03-20T09:49:33.183
> 
> 标签：ios5, cocos2d-iphone

I am trying to move a sprite(ball) within a circular boundary using an accelerometer. I am able to move the sprite(ball) on an empty screen with no difficulties. But now I need to set a circular boundary so that the movement is restricted within the circle. I have a background image which is a circle kind of an image. And if at all the sprite(ball) is moving then it should be only within this circular image and I don't want the ball to move out of the circle image. I want to know how to set the boundary on the circular background image. Please help me. Thanks.

Code:

```
if((self=[super init])) 
{
  bg=[CCSprite spriteWithFile:@"challenge-game.png"];
      bg.position=ccp(240,160);
      bg.opacity=180;
      [self addChild:bg];

   ball1=[CCSprite spriteWithFile:@"ball.png"];
   ball1.position=ccp(390,180);
   [self addChild:ball1];

    ball2=[CCSprite spriteWithFile:@"ball1.png"];
    ball2.position=ccp(240,20);
    [self addChild:ball2];

    ball3=[CCSprite spriteWithFile:@"ball2.png"];
    ball3.position=ccp(100,180);
    [self addChild:ball3];

    size = [[CCDirector sharedDirector] winSize];
    self.isAccelerometerEnabled=YES;
    [self scheduleUpdate];
  }

 -(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration 
    {
    ballSpeedY = acceleration.x*20;
     ballSpeedX = -acceleration.y*10;       
   }

-(void)updateBall1 { 
float maxY1 = size.height - ball1.contentSize.height/2;
float minY1 = ball1.contentSize.height/2;
float newY1 = ball1.position.y + ballSpeedY;
newY1 = MIN(MAX(newY1, minY1), maxY1);

float maxX1 = size.width - ball1.contentSize.width/2;
float minX1 = ball1.contentSize.width/2;
float newX1 = ball1.position.x + ballSpeedX;
newX1 = MIN(MAX(newX1, minX1), maxX1);
NSLog(@"MAXY: %f MINY: %f NEWY: %f",maxY1,minY1,newY1);
ball1.position = ccp(newX1, newY1);    
 }

-(void)setPosition:(CGPoint)position
{
 float dx=position.x-240;
 float dy=position.y-160;
 float r=bg.contentSize.width/2-ball1.contentSize.width/2;
 if((dx*dx+dy*dy)>(r*r))
 {
    position.x=100;
    position.y=100;
 }
 [super setPosition:position];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:25:41.527

Not sure what the remaining requirements are, but have you considered using Box2D and playing around with the gravity based on the accelerometer to move the sprite around? In this case, you can simply make a circular object representing your allowed world.

If this is not suitable, I guess you could force the position of you sprite to be always within your circle (override setPosition and make sure that x and y are always with a circle given by the mathematical formula).

Something like this (note that you need to decide where to place your ball when it is about to move outside the circle):

```
-(void) setPosition:(CGPoint)pos
{
    float dx = pos.x - centerX;
    float dy = pos.y - centerY;

    if ((dx * dx + dy * dy) > (r * r))
    {
        // Change pos.x and pos.y to stay within the circle.
    }

    [super setPosition:pos];
} 
```

Also, the radius of the circle (`r` in the above code) should actually be the radius of your target circle minus the radius of your ball.

**Another example using the `update`**

```
// In your scene/layer initialization register update callback, like this
[self scheduleUpdate];

// Then modify your update method
- (void) update:(ccTime)delta
{
    // Your update logic

    // Here you take care of your sprite.
    float dx = ballSprite.position.x - centerX;
    float dy = ballSprite.position.y - centerY;

    if ((dx * dx + dy * dy) > (r * r))
    {
        // Change the position of ballSprite to stay within the circle.
        ballSprite.position = ccp(newX, newY);
    }
} 
```

# c# - 合并几个DataTables DataRows

> ID：15520145
> 
> 赞同：3
> 
> 时间：2013-03-20T09:49:36.923
> 
> 标签：c#, linq

我有一个具有相同结构的 DataTables 数据集。**我想在SINGLE** linq 查询中从这些表中获取单个 DataRows 集合

```
from sourceTab in ds.Tables.OfType<DataTable>() 
select sourceTab 
```

然后我需要从每个表中选择数据行并将它们组合成一个列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:51:35.393

用于`SelectMany`从每个表中选择所有行并将它们展平为一个序列：

```
from row in ds.Tables.Cast<DataTable>().SelectMany(t => t.AsEnumerable())
// filter, etc 
select row 
```

如果您只想要所有行，请使用

```
ds.Tables.Cast<DataTable>().SelectMany(t => t.AsEnumerable()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T09:52:20.950

你不需要查询语法来做到这一点。简单的方法查询就可以了：

```
var results = ds.Tables.Cast<DataTable>().SelectMany(t => t.AsEnumerable()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T09:53:32.043

尝试[`Cast<T>`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)和[`SelectMany<T>`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

```
var r = ds.Tables.Cast<DataTable>().SelectMany(n => n.AsEnumerable()) 
```

# jquery-ui - 如何禁用某些可排序元素的拖动行为

> ID：15520147
> 
> 赞同：0
> 
> 时间：2013-03-20T09:49:38.467
> 
> 标签：jquery-ui

我有以下`div`元素，我只想对没有的元素进行排序`class="nodragorsort"`。

```
<div id="1" class="one">
    <div>one </div>
    <div class="nodragorsort">this should be fixed </div>
    <div class="nodragorsort">this should be fixed </div>
    <div>one </div>
</div> 
```

在 jQuery 可排序中使用 connect with 连接多个 div。我希望 div 中存在的某些元素不与其他排序 div 连接，甚至用户也不能拖动那些元素索引应该固定或需要固定的元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T10:50:13.943

您可以使用[items](http://api.jqueryui.com/sortable/#option-items)选项来指定可以对哪些元素进行排序

```
$('.one').sortable({
    items: '> :not(.nodragorsort)'
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/LNj7E/)

# smartgwt - How can i extract the an image i have uploaded using the UploadItem in SmartGWT, as a byte array?

> ID：15520148
> 
> 赞同：0
> 
> 时间：2013-03-20T09:49:40.380
> 
> 标签：smartgwt

I would like to get the binary content of an image i uploaded using the UploadItem of SmartGWT but the UploadItem.getValue() method returns only the URL of the image. I looked through the API and there doesnt seem to be a method that can achieve what i require. Did i miss something? Does anyone have an idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:28:11.913

对我来说，你得到的行为是正常的，你得到的值是 formItem 的值，即输入的值，所以在你的情况下是图像的 url。要获取二进制内容，您需要使用正确的编码、正确的 http 方法设置表单并提交表单。在服务器端，您必须处理请求，发回图像内容。在 submitComplete 事件上返回客户端，您必须恢复响应中的图像内容。就我个人而言，我从不混合`gwt`小部件，`smartgwt` 除了上传（我真的不记得为什么......:)）我使用 gwt 的地方`FileUpload`。希望它可以帮助

# html - Form to Set body of E-mail via mailto in E-Mail Newsletter

> ID：15520150
> 
> 赞同：0
> 
> 时间：2013-03-20T09:49:47.850
> 
> 标签：html, forms, email, mailto

Is there something we're missing to get the following code working in E-Mail clients / Web Mail:

```
<form action="mailto:a@b.com">
<input type="hidden" name="Subject" value="Email subject">
<textarea style="resize:none;" rows="5" cols="22" value="Body" name="Body">Default text area</textarea><br />
<input type="submit" name="Ask Question" >
</form> 
```

The idea is that the recipient can ask a question of our team by typing their question into a text area ('Body') and clicking the button will open their default mail client/web mail with the message nicely composed for them to review and click send.

Clearly any kind of PHP or scripting is off limits as this strictly to be used in an e-mail newsletter template.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:05:32.097

尝试使用这个

```
<a href="mailto:someone@example.com?subject=MySubject&body=Mymessage"> Send mail </a> 
```

您需要从表单中获取消息和主题值并将其添加到链接中。也尝试与您的表格一起使用

```
<form action="mailto:myforms@mydomain.com" enctype="text/plain" > 
```

你也可以试试这个

```
<form action= "mailto:myforms@mydomain.com?subject=myform_submission" enctype="text/plain" onsubmit="location.href='thanks.html';" > 
```

# ruby-on-rails - Rails 4 身份验证

> ID：15520151
> 
> 赞同：18
> 
> 时间：2013-03-20T09:49:53.320
> 
> 标签：ruby-on-rails, authentication, ruby-on-rails-4

哪个 gem 最适合 Rails 4 中的身份验证？我尝试使用设计，但我遇到了问题。

```
.rvm/gems/ruby-2.0.0-p0/gems/activemodel-4.0.0.beta1/lib/active_model/deprecated_mass_assignment_security.rb:14:in `attr_accessible': `attr_accessible` is extracted out of Rails into a gem. Please use new recommended protection model for params(strong_parameters) or add `protected_attributes` to your Gemfile to use old one. (RuntimeError)
    from /home/leapfrog/projects/kathloc/app/models/user.rb:8:in `<class:User>'
    from /home/leapfrog/projects/kathloc/app/models/user.rb:1:in `<top (required)>'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:423:in `load'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:423:in `block in load_file'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:615:in `new_constants_in'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:422:in `load_file'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:323:in `require_or_load'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:462:in `load_missing_constant'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:183:in `const_missing'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/inflector/methods.rb:226:in `const_get'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/inflector/methods.rb:226:in `block in constantize'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/inflector/methods.rb:224:in `each'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/inflector/methods.rb:224:in `inject'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/inflector/methods.rb:224:in `constantize'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:534:in `get'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:565:in `constantize'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise.rb:261:in `get'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/mapping.rb:77:in `to'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/mapping.rb:72:in `modules'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/mapping.rb:89:in `routes'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/mapping.rb:156:in `default_used_route'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/mapping.rb:66:in `initialize'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise.rb:291:in `new'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise.rb:291:in `add_mapping'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/rails/routes.rb:193:in `block in devise_for'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/rails/routes.rb:192:in `each'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/devise-1.5.4/lib/devise/rails/routes.rb:192:in `devise_for'
    from /home/leapfrog/projects/kathloc/config/routes.rb:2:in `block in <top (required)>'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:320:in `instance_exec'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:320:in `eval_block'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/routing/route_set.rb:298:in `draw'
    from /home/leapfrog/projects/kathloc/config/routes.rb:1:in `<top (required)>'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `load'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `block in load'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:213:in `load_dependency'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:222:in `load'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `each'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/file_update_checker.rb:75:in `call'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/file_update_checker.rb:75:in `execute'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application/finisher.rb:69:in `block in <module:Finisher>'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:30:in `instance_exec'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:30:in `run'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:180:in `each'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component'
    from /home/leapfrog/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/initializable.rb:54:in `run_initializers'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application.rb:213:in `initialize!'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/leapfrog/projects/kathloc/config/environment.rb:5:in `<top (required)>'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `require'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `block in require'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:213:in `load_dependency'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/activesupport-4.0.0.beta1/lib/active_support/dependencies.rb:228:in `require'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/application.rb:187:in `require_environment!'
    from /home/leapfrog/.rvm/gems/ruby-2.0.0-p0/gems/railties-4.0.0.beta1/lib/rails/commands.rb:45:in `<top (required)>'
    from bin/rails:4:in `require'
    from bin/rails:4:in `<main>' 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-20T10:21:35.863

这是因为在**rails-4**中，`ActiveModel::MassAssignmentSecurity`已从 ActiveModel 中取出。但是设计使用**attr_accessible ，因此要使用它，只需在您的****Gemfile**中添加以下 gem并尝试再次加载。

```
gem 'protected_attributes' 
```

**编辑：**

现在设计支持rails-4。将此包含在您的 Gemfile 中。

```
gem 'devise', '3.0.0.rc' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-26T00:43:42.550

**编辑**：现在有一个支持 Rails 4 的设计版本：[设计 3.0.0.rc](https://rubygems.org/gems/devise/versions/3.0.0.rc)

**上一个答案**：我最终为使其正常工作所做的事情是......

1.  在 Gemfile 中： `gem 'devise', github: 'plataformatec/devise', branch: 'rails4'`

2.  在生成的模型中，删除这些`attr_accessible`东西。

3.  为设计启用强参数而不是 attr_accessible。为此，请使用该内容创建一个新的初始化程序：

    ```
    DeviseController.class_eval do
      def resource_params
        unless params[resource_name].blank?
          params.require(resource_name).permit(:email, :password, :password_confirmation, :remember_me)
        end
      end
    end 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T11:37:50.193

不要`attr_accessible`在您的项目中使用 with devise，请按以下方式使用 accesssibles -

就像我们有 attr_accessible :email, :password, :password_confirmation, :remember_me 一样，出于安全原因，我们可以将它们转换为私有方法：

```
private

def user_params  
  params.require(:user).permit(:email, :password, :password_confirmation, :remember_me)

end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-09T20:10:53.063

这真的取决于你需要宝石做什么。有很多选择，Devise 绝对是顶级的。我建议通过 Thoughtbot 进行清除（[https://github.com/thoughtbot/clearance](https://github.com/thoughtbot/clearance)）。它经过了很好的测试，并且经常更新。对我来说，当我需要核心身份验证功能而不是像 Devise 这样的 gem 附带的所有其他东西时，它非常有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-01T10:15:07.203

在 GemFile 中写入 gem "devise", "~> 3.0.0.rc"。并按照此处提供的说明[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

我希望你的问题能得到解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T10:58:15.500

如果您在使用 Devise 时遇到问题，请尝试使用“Authlogic”进行身份验证。

您可以使用 gem 'authlogic' '~3.2.0' 这是支持 Rails 4.0 的最新版本

Ruby 工具箱有一个最受欢迎的列表：[http ://ruby-toolbox.com/categories/rails_authentication.html](http://ruby-toolbox.com/categories/rails_authentication.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-06T13:09:10.733

我已经修复了 rails 4 设计中的问题。您现在可以毫不费力地实施它。

只需将 gem 'devise' 添加到您的 Gemfile 并进行捆绑。

谢谢

# debugging - Xcode 4.6.1 调试器局部变量不可用

> ID：15520156
> 
> 赞同：4
> 
> 时间：2013-03-20T09:50:07.390
> 
> 标签：debugging, xcode4.6

我最近将 Xcode 4.6 升级到 4.6.1，我注意到以下异常行为：

1.  有时，局部变量在断点处不可用

2.  当在断点上暂停时，在 Step Into 和 Step Over 时，编辑器会突出显示代码中不正确的行。

LLVM 4.2 编译器 - 代码生成/优化级别设置为无调试。我试过清理项目、模拟器等。没有运气。

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:25:25.553

问题是在我的运行配置中，我选择了*Release*而不是*Debug*。也许对于 Release，编译器做了一些代码优化，因此编译后的代码和源代码不同步。

附件是我犯错的地方：

![在此处输入图像描述](../Images/d41098551905ac4c478ee2217c2c1db7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T14:29:48.893

如果您在“Scheme > RUN > Diagnostics”中启用地址 Sanitizer 等选项，也可能会发生这种情况

[![诊断](../Images/7e4a490fe3edff7fe6d1e62ad163bda1.png)](https://i.stack.imgur.com/62SCp.png)

# symfony - Symfony2 中的 Doctrine2 迁移在创建索引时抛出异常

> ID：15520161
> 
> 赞同：0
> 
> 时间：2013-03-20T09:50:49.193
> 
> 标签：symfony, doctrine-orm, database-migration, doctrine-migrations

# 问题

没有以前的迁移待处理，我运行：

```
app/console doctrine:migration:diff
app/console doctrine:migration:migrate 
```

我收到了这个错误：

```
ALTER TABLE session ADD CONSTRAINT FK_9955C22EA76ED395 FOREIGN KEY (user_id) REFERENCES user(id)
Migration 20130320103822 failed during Execution. Error SQLSTATE[HY000]: General error: 1005 Can't create table 'mydb.#sql-3e4_75e0' (errno: 150)

[PDOException]                                                                                    
  SQLSTATE[HY000]: General error: 1005 Can't create table 'mydb.#sql-3e4_75e0' (errno: 150) 
```

# 额外知识

1.  我通过课堂上的注释来声明我的实体。
2.  此代码正在运行（但我必须手动运行一些在出现此类异常后未运行的操作）

# 我想知道的

1.  是什么导致了那个错误？
2.  有什么办法可以解决吗？（例如通过 Doctrine 更新或一些 MySQL 参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:25:35.437

@Ocramius 和 @Lighthart 建议，这是一个纯 SQL 问题。它来自产生不一致 SQL 的有缺陷的 Doctrine 实体声明。

问题中描述的错误与列级别的不一致有关，键是 int(11) 和外键 varchar(255)。

# apache - Mod将www.domain.com/branch重写为www.website.com/，反之亦然

> ID：15520163
> 
> 赞同：0
> 
> 时间：2013-03-20T09:50:52.037
> 
> 标签：apache, url, mod-rewrite

我有一个特殊的需求，我想对使用 .htaccess mod_rewriting 的正确解决方案有一些见解。

基本上我需要将一个域映射到另一个域的子文件夹。所有对 www.website.com 的请求都应重定向到 www.domain.com/branch 上的内容，同时将 www.website.com 保留在浏览器的地址栏中。对 www.website.com/subpage 的请求也应该重定向到 www.domain.com/branch/subpage，因此 www.website.com/subpage URL 被保留。

对 www.domain.com/branch 的请求应重写为 www.website.com，对 www.domain.com/branch/subfolder 的请求应重写为 www.website.com/subfolder。

我正在使用表达式引擎模板系统，但这应该不是问题。什么是正确的 mod_rewriting？

稍后我将不得不“嗅探”网址，以便为相同的内容提供不同的徽标和颜色，但我想我可以用 javascript 制作它吗？

到目前为止，我一直在用这样的说明来探索这个问题：

```
RewriteCond %{HTTP_HOST} ^(www\.)?website.com\.com [NC]
RewriteRule ^/(.*) /branch/$1 [L] 
```

但整个事情似乎要复杂得多……专家能否正确地指出我使用 mod_rewrite 获得所需的一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:51:26.227

```
RewriteEngine On
RewriteBase /

#internally redirect request for website.com to the /branch folder
RewriteCond %{HTTP_HOST} ^(www\.)?website\.com [NC]
RewriteCond %{REQUEST_URI} !^/branch
RewriteRule ^(.*) /branch/$1 [L]

# redirect direct request for /branch to the website.com
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com [NC]
RewriteRule ^branch/(.*) http://www.website.com/$1 [R=302,L] 
```

I'm assuming you are putting these rules into htaccess, otherwise you would need leading slashes in the RewriteRules

# css - IE8 不显示第二个自定义字体

> ID：15520173
> 
> 赞同：1
> 
> 时间：2013-03-20T09:51:45.147
> 
> 标签：css, fonts, internet-explorer-8, font-face

我的网页上有两种自定义字体，一种可以完美加载，另一种很遗憾没有。

我用[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)构建了我的字体文件，它通常总是有效的。

```
@font-face {
    font-family: 'cartoonistkooky';
    src: url('#{$fontsDir}cartoonist_kooky-webfont.eot');
    src: url('#{$fontsDir}cartoonist_kooky-webfont.eot?#iefix') format('embedded-opentype'),
         url('#{$fontsDir}cartoonist_kooky-webfont.woff') format('woff'),
         url('#{$fontsDir}cartoonist_kooky-webfont.ttf') format('truetype'),
         url('#{$fontsDir}cartoonist_kooky-webfont.svg#cartoonistkooky') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'hastypudding';
    src: url('#{$fontsDir}hasty_pudding-webfont.eot');
    src: url('#{$fontsDir}hasty_pudding-webfont.eot?#iefix') format('embedded-opentype'),
         url('#{$fontsDir}hasty_pudding-webfont.woff') format('woff'),
         url('#{$fontsDir}hasty_pudding-webfont.ttf') format('truetype'),
         url('#{$fontsDir}hasty_pudding-webfont.svg#hasty_puddingregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

Cartooniskooky 没有在 IE8 中显示，也没有错误。

# mysql - 基于两个数字的百分比变化，总数未知（MySQL）

> ID：15520174
> 
> 赞同：1
> 
> 时间：2013-03-20T09:51:55.907
> 
> 标签：mysql

我有一个包含正常价格和折扣价格的 MySQL 数据库。我正在尝试计算从这些数字中的最高数字到当前最低数字的百分比变化。

当正常价格低于折扣价时，百分比不正确。

代码：

```
SELECT brand_price, brand_discount_price,
((brand_discount_price - brand_price)/brand_price) * 100 as percentage
FROM brand 
```

我如何调整计算以考虑哪一个是当前的“总数”？

我想我需要更改计算或有条件地比较两个数字的最高/最低并动态更改 SELECT？有任何想法吗？

样本数据：

```
brand_price     brand_discount_price percentage
8.7451          9.3345              6.73977427%
7.9537          7.9538              0.00125728%
4.5832          2.2482              -50.94693664%
3.2331          11.8412             266.24911076% 
```

例子：

品牌价50 优惠价100

(100 - 50/50) * 100 = 100% 变化

品牌价 100 优惠价 50

(50 - 100/50) * 100 = -100% 变化 = 错误（？）

基本上，这是由于计算的方式，因为我无法弄清楚如何插入更大的数字作为总数（我认为，百分比不是我擅长的东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:57:26.530

只需使用 if（虽然我不太确定为什么正常价格会低于折扣价）：

```
SELECT brand_price, brand_discount_price,
IF(brand_discount_price > brand_price, ((brand_discount_price - brand_price)/brand_discount_price) * 100, ((brand_price - brand_discount_price)/brand_price)*100)  as percentage
FROM brand 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:43:04.727

我看到你对价格和折扣价格和百分比也有问题，

这是一个例子：

```
 $15.00      original price   
     - 1.50       - discount       // here the discount should be lower then original price.
      $13.50       sale price 
```

以及我在您的查询中猜想的百分比，您希望从原始价格中获得折扣金额的百分比。所以它会是这样的

```
 SELECT round(brand_price,4) as price, round(brand_discount_price,4) as discount,
     if(brand_discount_price < brand_price,
     round((( brand_discount_price ) * 100) / brand_price , 2), 'discount chould be   less then the original price') as percentage
      FROM `brand` 
```

[**在这里演示**](http://sqlfiddle.com/#!2/ce21e/7)

# vb.net - 使用字符串的一部分进行比较

> ID：15520176
> 
> 赞同：0
> 
> 时间：2013-03-20T09:52:02.460
> 
> 标签：vb.net

我有一个问题，我有两个字符串。

```
dim a as string = "Online" & ";" & 50 & ";" 4 & ";" & "2013-02-11"
dim b as string = "Online" & ";" & 100 & ";" 2 ";" & "2013-02-11"

dim arry as arrylist

arry.add(a)
arry.add(b) 
```

在另一页上，我有两个整数

```
dim x as integer = 5
dim y as integer = 8 
```

我的问题是如何使用 x 和 y 与 arry 中的字符串 a 和 b 进行比较。如果我需要检查 a 和 b 字符串中是否存在 x 和 y 整数，我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:24:22.003

用这个：

```
Dim flag1 As Boolean = arry.Cast(Of String)().Any(Function(i) i.Contains(x))
Dim flag2 As Boolean = arry.Cast(Of String)().Any(Function(i) i.Contains(y)) 
```

导入系统.Linq

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:20:35.790

假设您想检查数字之间是否存在`;`：

```
Dim bIsIn As Boolean = a.Replace(" ", "").Split(";"c).Contains(x.ToString()) 
```

或扩展它以确保您做得很好：

```
Dim sAux As String = a.Split(";"c)
Dim bIsIn As Boolean = False

For Each str As String In sAux
    str = str.Trim()
    If str.Equals(x.ToString(), StringComparison.InvariantCultureIgnoreCase) Then
        bIsIn = True
        Exit For
    End If
Next 
```

您可以创建一个函数来避免重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:01:26.570

如果您只想检查字符串中是否存在整数，请使用

`.Any`林克。您需要导入`System.Linq`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:04:21.580

如果要检查字符串是否*包含*数字：

```
Dim aContainsX = a.Contains(x.ToString())
Dim bContainsX = b.Contains(x.ToString())
' ... ' 
```

如果您想知道是否有带有该数字的“单词”（由空格分隔）：

```
Dim aContainsX = a.Split().Contains(x.ToString())
Dim bContainsX = b.Split().Contains(x.ToString())
' ... ' 
```

如果您想用另一个字符分割（如示例中的分号）：

```
Dim aContainsX = a.Split(";"c).Contains(x.ToString())
Dim bContainsX = b.Split(";"c).Contains(x.ToString())
' ... ' 
```

# mysql - 删除列在 MySQL Workbench 中不起作用

> ID：15520187
> 
> 赞同：0
> 
> 时间：2013-03-20T09:52:26.240
> 
> 标签：mysql, mysql-workbench, mysql-error-1025

这更像是一个元问题，而不是我需要的实际帮助，但我在其他地方找不到有关它的信息。今天，我尝试从数据库中删除两个表，并在尝试时收到“外键约束失败”的错误消息。没问题，只需删除外键即可。所以我的查询如下所示：

```
ALTER TABLE Database.mytable
DROP FOREIGN KEY abc_ibfk_1;
ALTER TABLE Database.mytable
DROP COLUMN abc; 
```

我收到另一条错误消息，上面写着“错误代码：1025。将'./Database/#sql-461_somerandomnumbers'重命名为'./Database/mytable'（errno：150）时出错”

我想我会使用内置的右键单击，在编辑表中删除列，因此我使用它并意识到它也使用“删除索引”。因此，我将代码更改为与 Workbench 完全一样：

```
ALTER TABLE Database.mytable
DROP FOREIGN KEY abc_ibfk_1;
ALTER TABLE Database.mytable
DROP COLUMN abc, DROP INDEX abc; 
```

现在，这与 Workbench 完全一样，只是当我自己键入时它不会执行（错误消息上方），但是当我允许 Workbench 执行查询时它工作正常。

所以，我的问题是，**当我无法复制/粘贴时，为什么 Workbench 能够执行放置查询？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:41:41.523

可能您手动执行的查询（错误地）增加了，例如添加了自动 LIMIT 子句。运行该查询后，查看输出区域（操作输出）。它包含发送到服务器的确切查询。它是否包含任何不寻常的东西？或者，使用管理部分查看常规日志（如果启用）以查看发送的查询。

# wpf - 让 Caliburn.micro 更新包装 winforms 组件的用户控件

> ID：15520189
> 
> 赞同：2
> 
> 时间：2013-03-20T09:52:33.760
> 
> 标签：wpf, caliburn.micro

我正在尝试使用 Caliburn.micro 在 WPF 应用程序中创建一个 winforms 图（System.Windows.Forms.DataVisualization）。

我有一个用户控件，它基本上包装了图表并将其呈现在控件中。它看起来像这样：

```
<DockPanel LastChildFill="true">
    <WindowsFormsHost x:Name="WindowsFormsHost">
        <winformchart:Chart x:Name="WinformChart" Dock="Fill" MouseClick="ChartControl_MouseClick">
            <winformchart:Chart.Series>
                <winformchart:Series Name="series" ChartType="Line"/>
            </winformchart:Chart.Series>
            <winformchart:Chart.ChartAreas>
                <winformchart:ChartArea/>
            </winformchart:Chart.ChartAreas>
        </winformchart:Chart>
    </WindowsFormsHost>
</DockPanel> 
```

该控件用于具有相应视图模型的视图中。我想让视图模型更新图表。

这就是我将图表连接到视图模型的方式：

```
_view = IoC.Get<MyView>();
Chart = _view.ChartControl1.WinformChart; 
```

其中`ChartControl1`是视图中图表的 XAML 名称，并且`Chart`是视图模型中的属性。

**1）将用户控件连接到视图模型真的是个好主意吗？**

我的视图模型更新了图表值 ( `Chart.Series[0].Points[i].SetValueXY(i, data[i])`)，然后它失效`Chart`以更新用户控件。但是，控件中不显示任何内容。

**2）这种方法可能有什么问题？**

**2.a) Caliburn.micro 是否需要一些特殊指令来更新用户控件？**

# php - 如何在 Symfony2 中使用日期选择器

> ID：15520191
> 
> 赞同：0
> 
> 时间：2013-03-20T09:52:38.253
> 
> 标签：php, symfony, jquery-ui-datepicker

我想在我的代码中添加日期选择器。我下载了 bootstrap-datepicke。但是如何添加正确的这个组件呢？我尝试过这样的事情

```
<form action="{{ path('pattient_test') }}" method="post" >
   <input type="text" id="pick" value="02/16/12" data-date-format="mm/dd/yy" class="datepicker" >
   <input type="submit" value="Prześlij zmienione dane"/>
</form> 
```

然后在控制器中

```
 var_dump( $this->get('request')->request->get('pick')); 
```

但我仍然得到 NULL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:54:46.093

尝试通过将`name`属性添加到您的选择输入字段，

```
name="pick" 
```

**还，**

`var_dump( $this->get('request')->request->all());`允许您检查所有 POST 参数，它可以帮助您找出问题所在。

# asp.net - 在c#中将文本文件转换为zip文件

> ID：15520195
> 
> 赞同：0
> 
> 时间：2013-03-20T09:52:48.153
> 
> 标签：asp.net, c#-4.0

我正在尝试将文本文件转换为 zip 文件。这是我的代码

```
zipFile.AddItem(@"D:\Inbox\GRN.txt"));
zipFile.Save(Common.GetFileName(@"D:\Inbox\GRN.zip")); 
```

从这里我可以压缩文件。但它的压缩完整路径。我想在 Grn 文件夹下只有 GRN.txt 应该可用。

但目前正在发生这样的事情 = GRN- Inbox-GRN.txt

请对此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:59:33.240

您需要将第二个参数`directoryPathInArchive`作为`string.empty`. 所以试试这个

```
zipFile.AddItem(@"D:\Inbox\GRN.txt",""); 
```

# c# - MVC4 检索上传的文件

> ID：15520200
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:06.233
> 
> 标签：c#, jquery, asp.net-mvc, file-upload

我正在使用 ASP.NET MVC4 来开发 Intranet 应用程序。主要功能之一是允许用户上传将存储在我的数据库中的文件。为了做到这一点，我正在使用 jQuery。但是，我不知道我必须做什么来操作上传的文件。我已经知道我必须将它们操纵到对应的控制器中，但是在阅读了互联网上的一些提示之后，我就是看不出我应该怎么做。

这是我的观点：

```
 @model BuSIMaterial.Models.ProductAllocationLog
@{
    ViewBag.Title = "Create";
}
<h2>Create</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>ProductAllocationLog</legend>
        <div class="editor-label">
            Date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Date, new { @class = "datepicker"})
            @Html.ValidationMessageFor(model => model.Date)
        </div>
        <div class="editor-label">
            Message :
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>
        <div class="editor-label">
            Allocation :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductAllocation", String.Empty)
            @Html.ValidationMessageFor(model => model.Id_ProductAllocation)
        </div>
        <div class="demo" style="float:left; margin-top:5px;">

            <div id="aupload" style = "border:2px dashed #ddd; width:100px; height:100px; margin-right:10px; padding:10px; float:left;"></div>
            <div id="uploaded" style = "border: 1px solid #ddd; width:550px; height:102px; padding:10px; float:left; overflow-y:auto;"></div>

        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我绝对不是要求预先制作的代码示例，而只是要求一种继续进行的方法。这将是非常友好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:06:18.210

您需要做三件事。首先，在视图中添加一个图片上传字段：

```
<input type="file" name="file-upload" /> 
```

..使您的表格“多部分”..

```
@using (Html.BeginForm("Action", "Controller", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
} 
```

...然后在您的控制器中，通过请求对象上的“文件”集合访问文件：

```
Request.Files["file-upload"]; 
```

如果您希望使用 ajax/jquery 提交表单，则需要做更多工作来序列化文件。这篇文章将帮助您：[Sending multipart/formdata with jQuery.ajax](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T14:51:00.280

```
 @model MVCDemo.Models.tbl_Images
@{
    ViewBag.Title = "Create";
}
<h2>Create</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>ProductAllocationLog</legend>
        <div class="editor-label">
            Date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Date, new { @class = "datepicker"})
            @Html.ValidationMessageFor(model => model.Date)
        </div>
        <div class="editor-label">
            Message :
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>
        <div class="editor-label">
            Allocation :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductAllocation", String.Empty)
            @Html.ValidationMessageFor(model => model.Id_ProductAllocation)
        </div>
        <div class="demo" style="float:left; margin-top:5px;">

            <div id="aupload" style = "border:2px dashed #ddd; width:100px; height:100px; margin-right:10px; padding:10px; float:left;"></div>
            <div id="uploaded" style = "border: 1px solid #ddd; width:550px; height:102px; padding:10px; float:left; overflow-y:auto;"></div>

        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

# crf++ - CRF++ 中的词袋

> ID：15520203
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:11.980
> 
> 标签：crf++

CRF++ 模板文件中词袋功能的语法是什么？

模板示例：

```
#Unigrams
U00:%x[0,0]
U01:%x[0,1]
U02:%x[1,0]

#Bigrams
B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:06:35.317

我认为是这样的：

```
#Unigrams
U00:%x[0,0]
U00:%x[0,1]
U00:%x[1,0]

#Bigrams
B 
```

使用相同的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T11:57:55.380

词袋的语法可能是这样的：

```
#Unigrams
U00:%x[0,0]/%x[0,1]/%x[1,0]

#Bigrams
B 
```

[使用 CoNLL 2000 模板对词袋进行 CRF++ 的描述](http://crfpp.googlecode.com/svn/trunk/doc/index.html?source=navbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T10:45:19.643

这是使用 Bag of (3) Words 的正确模板：

```
#Unigrams
U00:%x[-1,0]
U00:%x[0,0]
U00:%x[1,0]

#Bigrams
B 
```

请注意，标识符是相同的 (U00)。

```
[-1,0] -> previous word
[0,0] -> current word
[1,0] -> next word 
```

# asp.net-mvc - 路由/解析asp.net mvc

> ID：15520208
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:19.710
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个问题一直在思考。

从我在浏览器中输入 URL 并单击 enter 到相应控制器中的代码实际执行时会发生什么？

假设我有一个 asp.net mvc 应用程序和一个像这样的普通控制器：

```
public class HomeController : Controller
{
  public ActionResult About(int id = 25)
  {
    //code
  }
} 
```

因此，如果我输入这样`myUrl/home/about?id=56`的控制器就会被调用。我知道有一个`{controller}/{action}/{id}`默认声明的路由模式。但是，如果一个 URL 与该模式匹配，则创建了一个控制器实例，或者会发生什么？是否有一些解析器类或类似的？是否存在包含所有控制器的列表，因此 URL 中的“主页”与`HomeController`？

我知道控制器签名中的 id 参数将在模型绑定的帮助下绑定到请求上下文中的相应 id 值。但这里肯定发生了很多其他的魔法。

希望有人可以帮助一个新困惑的 asp.net mvc 用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:39.753

简而言之：

1.  `DefaultControllerFactory`使用反射按名称查找并实例化控制器（[更多信息](http://dotnetslackers.com/articles/aspnet/Inside-the-ASP-NET-MVC-Controller-Factory.aspx)）
2.  `ControllerActionInvoker`使用反射按名称查找并调用动作（[更多信息](http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx)）

可以在[这里](http://msdn.microsoft.com/en-us/magazine/dd695917.aspx)找到良好的整体描述。

# c# - 对象初始化期间接口集合成员的奇怪行为

> ID：15520209
> 
> 赞同：3
> 
> 时间：2013-03-20T09:53:20.457
> 
> 标签：c#, .net, initializer

`NullReferenceException`我在以下代码中遇到运行时异常：

```
public class Container
{
    public IList<string> Items { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var container = new Container() { Items = {"Test"} };
    }
} 
```

编译器无法创建接口实例是合乎逻辑的，但我遇到了运行时异常，而不是编译时间。当我进一步调查这种行为时，我更加困惑：

```
 var container = new Container() { Items = {} }; //Legal, Items is null after initialization

    var container = new Container() { Items = { "Test" } }; //Legal, throws exception
    container.Items = {}; //Illegal doesn't compile
    container.Items = {"Test"}; //Illegal doesn't compile 
```

这是某种错误还是我不明白？我正在使用.net framework 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:59:22.987

它编译，因为编译器不知道*是否`List`已经在其他地方初始化*。您可以通过在构造函数中添加初始化来使其工作：

```
public class Container
{
    public IList<string> Items { get; set; }

    public Container()
    {
        Items = new List<string>();
    }
} 
```

或者更改属性以隐藏字段，该字段在创建类实例时初始化：

```
private IList<string> items = new List<string>();
public IList<string> Items
{
    get { return items; }
    set { items = value; }
} 
```

然后，`var container = new Container() { Items = { "Test" } };`工作得很好。

在运行时`.Add()`为集合初始化程序组中的每个项目调用方法。当属性未初始化时，`new List<string>`它具有`null`值，这`NullReferenceException`就是抛出的原因。

[对象和集合初始化器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

> 通过使用集合初始化器，您不必在源代码中指定对类的 Add 方法的多次调用；**编译器添加调用**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:55:42.450

你没有初始化`List`

```
 var container = new Container() { Items = new List<string>() { "Test" } }; 
```

顺便说一句，对于编译器来说，以下是合法的，它没有任何问题（语法正确等）

```
var container = new Container() { Items = {} }; 
```

但是因为编译器不知道`Items`list 没有被初始化（你没有在集合初始化器中传递任何项目`{}`）该`.Add`方法不会被调用`List`并且运行时不会知道该`Items`对象是 null

另一方面，以下对于编译器是合法的，但它在运行时引发异常，因为您尝试初始化传递项目的列表（由于上述相同的原因，它对编译器是正确的）所以当运行时将调用后台的方法，由于没有初始化`.Add`，会抛出空引用异常`Items`

```
 var container = new Container() { Items = { "Test" } }; 
```

# javascript - 如何在 node.js 中呈现 html 文件

> ID：15520212
> 
> 赞同：1
> 
> 时间：2013-03-20T09:53:31.770
> 
> 标签：javascript, html, node.js, render

我试图渲染 html 文件，但我得到了这个错误。我在公共文件夹中有 login.html。如何呈现 html 文件。提前谢谢。

我的服务器端编码

```
var express = require('express');

var app = express();

app.configure(function(){

  app.set("view options", {layout: false});

  app.use(express.static(__dirname + '/public'));

 });

app.get('/', function(req, res) {

    res.render('login.html');

});

app.listen(8000) 
```

错误：无法查找视图“login.html”

```
at Function.render (/home/aware/local/src/node_modules/express/lib/application.js:493:17)
at ServerResponse.render (/home/aware/local/src/node_modules/express/lib/response.js:753:7)
at /home/aware/local/src/health/demo2.js:17:9
at callbacks (/home/aware/local/src/node_modules/express/lib/router/index.js:161:37)
at param (/home/aware/local/src/node_modules/express/lib/router/index.js:135:11)
at pass (/home/aware/local/src/node_modules/express/lib/router/index.js:142:5)
at Router._dispatch (/home/aware/local/src/node_modules/express/lib/router/index.js:170:5)
at Object.router [as handle] (/home/aware/local/src/node_modules/express/lib/router/index.js:33:10)
at next (/home/aware/local/src/node_modules/express/node_modules/connect/lib/proto.js:199:15)
at resume (/home/aware/local/src/node_modules/express/node_modules/connect/lib/middleware/static.js:60:7) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:58:52.513

最接近将 html 用于节点视图的是 EJS（嵌入式 JavaScript）

这样您就可以编写普通的 HTML，通过节点传递数据并使用以下标签显示它们：`<%= var %>`

[http://embeddedjs.com/](http://embeddedjs.com/)

[https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-21T12:31:03.273

您可以使用嵌入式 JavaScript(ejs) 使用 Nodejs 呈现 HTML 页面。在这里你可以通过 - [ejs的文档](https://ejs.co/#docs)

要使用 ejs，首先创建名称为 views 的目录，在该目录中创建一个扩展名为 .ejs 的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:25:32.217

我今天刚接触到 connect 并想解决一个类似的问题，提供一个简单的 HTML 文件。就我而言，我想在任何以前的中间件都没有完成请求时显示 404。

我创建了一个函数 show404 然后你可以做类似`app.use(show404)`. 这是我的 CoffeScript，主要受连接 errorHandler 源代码的启发。

```
show404 = (req, res, next) ->
    res.statusCode = 404
    res.setHeader 'Content-Type', 'text/html; charset=utf-8'
    html_path = require("path").resolve('.tmp/404.html')
    require('fs').readFile html_path, (err, data)->
        throw err if err
        console.log "DATA:", data
        res.end data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:13:34.453

您保留在公用文件夹中的文件不会被呈现，因为它们被设置为静态，因此它们将按原样提供。将呈现此之外的所有其他文件。记得设置渲染引擎。

# r - 如何使 R-GUI 成为独立应用程序或可执行平台独立软件

> ID：15520215
> 
> 赞同：3
> 
> 时间：2013-03-20T09:53:35.427
> 
> 标签：r, rgui

我已经做了一个 R-GUI，现在我想把它做成一个应用程序，可以作为软件使用而无需在“R”平台上运行代码，这意味着一个可执行文件可以像任何其他图像处理软件一样在每个 Windows 平台上运行或任何其他软件，如 ERDAS 或 R 本身……是否可以用 R 本身制作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:57:53.453

从人们不再需要安装 R 的意义上说，您无法制作可执行文件。您可以做的是查看`Rscript`. 这使您能够创建可以使用快捷方式运行的 R 程序，例如您的 GUI。请注意，这仍然需要您的用户安装 R，并将 R 可执行文件集（R、Rscript 等，都在 中`$R_HOME/bin`）的位置添加到他们的`$PATH`环境变量中。

另请参阅[此 SO 帖子](https://stackoverflow.com/questions/4918553/what-are-the-ways-to-create-an-executable-from-r-program)。

# android - Android - 自定义标记在缩放时远离其位置

> ID：15520216
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:37.543
> 
> 标签：android, google-maps

我只是想在 Android 上的地图上添加标记。我正在使用这个基于谷歌示例的代码

```
 map = mMap.addMarker(new MarkerOptions().position(AREA_C_CENTER)
                                .title("Area c")
                                .snippet("Pubblico")
                                .icon(BitmapDescriptorFactory.fromResource(R.drawable.pin_red))); 
```

标记已正确添加到地图中，但是当我开始缩放时，它会失去位置并开始移开。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:46:02.000

如果你想在屏幕的中心放置一些东西，不要添加标记，而是在布局文件中放置一个带有 layout_gravity="center" 的 ImageView，并放置在 SupportMapFragment 旁边。

# excel - Excel更改单元格颜色

> ID：15520218
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:39.790
> 
> 标签：excel

只是为了确认这不仅仅是条件格式！我正在使用 Excel 2010。

我使用了[http://www.cpearson.com/excel/colors.aspx](http://www.cpearson.com/excel/colors.aspx) ColorIndexOfOneCell 函数，但它似乎无法识别有条件格式的单元格颜色。已使用以下代码，C89 中具有相关的单元格颜色：

```
=SUMPRODUCT(--(colorindex(L6:L82)=ColorIndexOfOneCell($C$89,FALSE,1))) 
```

有任何想法吗？

PS。当手动更改单元格颜色时（“在”条件格式后面），ColorIndexOfCell 会选择它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:04:33.203

谷歌搜索“excel 条件格式颜色应用 vba”会产生一个链接：[http](http://www.cpearson.com/excel/cfcolors.htm) ://www.cpearson.com/excel/cfcolors.htm（heay 相同的来源）。它建议检查他们的`ActiveCondition`脚本。

或者：“vba excel check active condition”在此页面上产生一个替代代码：

[http://en.kioskea.net/faq/1409-excel-vba-a-function-that-returns-the-color-of-an-active-mfc](http://en.kioskea.net/faq/1409-excel-vba-a-function-that-returns-the-color-of-an-active-mfc) 更加优雅。

两者都归结为循环可能`FormatConditions`，然后在满足条件时检查脚本。当满足条件时，采用该条件的颜色。

# php - 没有 $_POST 数据？

> ID：15520219
> 
> 赞同：2
> 
> 时间：2013-03-20T09:53:43.073
> 
> 标签：php, post

**编辑**- 我已经关闭了这篇文章，因为我只能得出结论，服务器上当前的 PHP 版本存在问题。PHP 接受 $_GET 变量没有问题，但任何接收/发送 $_POST 变量的尝试都会完全失败。

我有一个愚蠢的小形式：

```
<form action="http://www.domain.com/login" method="POST">
    <input type="hidden" name="loginPage" value="login">
    <table class="login">   
        <tr><td>Email Address</td><td><input type="text" class="txt" name="usr"></td></tr>
        <tr><td>Password</td><td><input type="password" class="txt" name="psw"></td></tr>
        <tr><td colspan=2><input type="submit" class="submit right" value="Log in"></td></tr>
    </table>
</form> 
```

而且我的 $_POST 中没有收到任何数据。在我转储的页面顶部：

```
var_dump($_POST); 
```

我得到：

```
array(0) { } 
```

这很烦人。

有谁知道为什么？

**编辑**

存在 url 重写，请参见以下内容（来自 .HTACCESS）：

```
Options +FollowSymlinks
RewriteEngine on
RewriteOptions MaxRedirects=10

AddType "text/html; charset=UTF-8" html
AddType "text/plain; charset=UTF-8" txt

RewriteRule ^login$ "login.php" [NC]
RewriteRule ^login/$ "login.php" [NC] 
```

但我看不出有什么问题，当我们设置它时，它工作正常吗？只是似乎最近发生了一些变化（它不是我的服务器）？但还有什么可能阻碍呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:58:42.493

如果没有看到真实的 URL，很难确定，但可能的解释是：

您的 PHP 程序确实`/login/index.php`如此，当浏览器向`/login`服务器发出POST 请求时，会以`301 Redirect`to响应`/login/`。

这会导致浏览器向其发出 GET 请求`/login/`并将`$_POST`为空。

如果是这种情况，解决方案是使用`action="http://example.com/login/"`（最后带有 a `/`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:55:10.477

改变这个

```
<form action="http://www.domain.com/login" method="POST"> 
```

至

```
<form action="http://www.domain.com/login.php" method="POST"> 
```

# javascript - Javascript 多个 if 条件

> ID：15520222
> 
> 赞同：0
> 
> 时间：2013-03-20T09:53:47.407
> 
> 标签：javascript

我需要多种`if`情况的帮助。

`if condition 1 & condition 2 true`意味着我想要两个条件动作：

```
if(condition 1 true) {
    $('.inner_wrapper').addClass('em-border-red');
    return false;
}

if(condition 2 true) {
    $('.cCal').addClass('em-border-red');
    return false;
}

if(condition 3 true){
    $('.cCal-row2').addClass('em-border-red');
    return false;
} 
```

但只有一个条件有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:56:31.127

您的每个`if`块都包含一个`return`语句。一旦满足一个条件，就不会执行其他代码。根据定义，这是[语句的](http://es5.github.com/#x12.9)[行为`return`](http://es5.github.com/#x12.9)：

> return 语句使函数停止执行并向调用者返回一个值

由于你所有的只是 return `false`，你应该能够`return`在条件之后移动 to ：

```
if(condition1) {
    $('.inner_wrapper').addClass('em-border-red');
}
if(condition2) {
    $('.cCal').addClass('em-border-red');
}
if(condition3) {
    $('.cCal-row2').addClass('em-border-red');
}
return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:57:18.247

删除`return false;`每个 if 块的表单并尝试在 if 条件之外的底部对其进行管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:58:52.973

```
retVal = true;
if(condition 1 true)
 {
     $('.inner_wrapper').addClass('em-border-red');
     retVal = false;

 }
if(condition 2 true)
 {
    $('.cCal').addClass('em-border-red');
     retVal = false;

 }
if(condition 3 true)
 {
    $('.cCal-row2').addClass('em-border-red');
     retVal = false;

 }
return retVal; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:59:08.417

你有两种方法：

```
 <!-- and condition //-->
    if (a == b && a != c) {
        // your stuff
    <!-- or condition //-->
    } else if (a == c || a ==b) {
        // other stuff
    <!-- otherwise //-->
    } else {
        // another stuff
    } 
```

否则你有“开关盒”。喜欢[这个页面](http://www.w3schools.com/js/js_switch.asp)。

# iphone - iOS (iPhone) 中的可滚动磁贴视图

> ID：15520224
> 
> 赞同：0
> 
> 时间：2013-03-20T09:54:02.470
> 
> 标签：iphone, ios, model-view-controller, tile

我不是最有经验的 iOS 开发人员，到目前为止我只使用过一些简单的设计，但现在我们计划基于图块构建视图，我不知道如何实现。我尝试寻找解决方案，但还没有真正找到可以提供帮助的东西。这是我们的计划：

第 1 行（修复）：平铺 1（修复）| 瓷砖 2（修复）
第 2 行（可滚动）：瓷砖 3 | 瓷砖 4 | 瓷砖 5 | Tile 6
*（不幸的是我不允许发布图片）*

每行两个图块应始终显示在屏幕上。

每个 tile 都应该包含自己的布局和控件，实际上每个 tile 都有一个 MVC。前两个图块应该固定在屏幕上，第二行包含四个应该可以水平滚动的图块。

有人可以指出我应该在这里使用的正确 MVC 架构吗？是否有可能已经支持此功能的 iOS 控件。任何关于如何开始和如何设计它的提示都非常感谢。或者教程的链接。

我遇到了 UICollectionView，但我不确定这是正确的方法。我打算为 iOS6 做这件事，所以我也可以使用最新的可用控件/类。

非常感谢你的帮助！！

内克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:58:22.287

制作一个视图和一个视图控制器。向此视图添加固定图块的子视图。将 UICollectionView 作为视图的子视图添加到屏幕的其余部分。将数据源和委托分配给 UICollectionView 并编写委托和数据源方法。你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:59:16.473

你可以使用`UIScrollView`类。`UIScrollView`您可以根据需要使其可滚动。

根据您的要求，您可以将`UIScrollView`其用作每一行。

# wpf - 从自定义控件扩展/合并/共享上下文菜单

> ID：15520226
> 
> 赞同：0
> 
> 时间：2013-03-20T09:54:11.063
> 
> 标签：wpf, wpf-controls

我在多个视图中使用自定义控件。在那个自定义控件中，我定义了一个带有通用 MenuItems 的上下文菜单，这些菜单项需要在不同的视图中可用。每个视图都可以通过它们自己的 MenuItems 扩展该上下文菜单。

我该如何做到这一点？我只能替换现有的上下文菜单，但不能扩展它。

我在这里阅读了有关合并上下文菜单的信息：[http](http://wpftutorial.net/ContextMenu.html) ://wpftutorial.net/ContextMenu.html 。但它没有显示如何与现有的合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:17:21.793

使用资源。您在窗口/用户控件的资源中定义所有菜单项，然后使用菜单项的键引用它们。

```
 <Window.Resources>
    <MenuItem Header="Add sub-folder"
              Command="{Binding FolderNewCmd}"
              x:Key="AddFolderMenu">
        <MenuItem.Icon>
            <Image Source="/YourAssemblyNameSpace;component/Images/16/abc.png"
                   Width="16"
                   RenderOptions.BitmapScalingMode="NearestNeighbor">
            </Image>
        </MenuItem.Icon>
    </MenuItem>
    ...  <--other menu items-->
 <Window.Resources> 
```

当您想在菜单（例如上下文菜单）中引用此菜单项时：

```
<TreeView.ContextMenu>
        <StaticResource ResourceKey="AddFolderMenu" />
        <StaticResource ResourceKey="OtherMenuItemInResource" />
        ...
</TreeView.ContextMenu> 
```

# java - 带循环的 BigInteger 数组。无法添加

> ID：15520227
> 
> 赞同：-4
> 
> 时间：2013-03-20T09:54:11.053
> 
> 标签：java, arrays, biginteger

```
package fibonacci;
import java.math.BigInteger;
import java.math.*;
public class fibo {
         public static void main(String[] args) {

             //number of elements to generate in a series
            BigInteger sum;
            BigInteger[] series= new BigInteger[4000000];

           //long[] series = new long[4000000];

             //create first 2 series elements
             series[0] = BigInteger.valueOf(1);
             series[1] = BigInteger.valueOf(2);

             //create the Fibonacci series and store it in an array
             for(int i=2; i < series.length; i++){
                     series[i] = series[i-1].add(series[i-2]);
                     if (series[i].mod(BigInteger.valueOf(2)) == BigInteger.valueOf(0)){
                   sum = sum.add(series[i]);  //error here
                     }

             }
             System.out.println("Fibonacci Series sum " + sum); //error here

             }

    } 
```

我正在尝试计算斐波那契的偶数之和。我需要在这里改变什么？还是应该使用 .subtract 重写整个程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T09:56:52.917

初始化`sum`（对 BigInteger 的引用）。局部变量没有默认值。你必须自己初始化它们。

```
 BigInteger sum= new BigInteger("0"); 
```

或者

```
 BigInteger sum= BigInteger.ZERO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:59:44.500

`sum`在向其中添加任何值之前，您需要对其进行初始化。

```
BigInteger sum= new BigInteger("0"); 
```

**[例子](http://ideone.com/iCU5pu)**

希望这可以帮助..

# ruby - 如何在 ruby Array Map 中构造对象？

> ID：15520231
> 
> 赞同：2
> 
> 时间：2013-03-20T09:54:27.127
> 
> 标签：ruby, performance, coding-style

```
class TestClass
  attr_accessor :name, :id
end

values = ["test1", "test2"]

mapped_values = values.map{|value|
  test_class = TestClass.new
  test_class.name = value
  test_class.id = #some random number
  return test_class
}

puts mapped_values 
```

显然这是行不通的，它只会返回第一个值，而不是整个新建列表。我有这个测试脚本，我想要实现的是它从 Array.map 操作返回带有值名称和 id 的 TestClass 列表。我只是想在 Ruby 中找到最好的方法。

我可以做这样的事情

```
tests = []

values.each do |value|
   test_class = TestClass.new
   test_class.name = value
   test_class.id = #some random number
   tests << test_class
end 
```

我相信必须有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:11:51.493

如果要使用地图，请删除返回调用。

```
mapped_values = values.map{|value|
  test_class = TestClass.new
  test_class.name = value
  test_class.id = #some random number
  test_class
} 
```

被传递的块是一个 Proc 并且 Procs 不允许显式返回调用。请参阅[为什么显式返回会在 Proc 中产生影响？](https://stackoverflow.com/questions/1435743/why-does-explicit-return-make-a-difference-in-a-proc)了解更多信息

# iphone - CGContextDrawPDFPage 锁定并且不返回（无限循环）

> ID：15520232
> 
> 赞同：2
> 
> 时间：2013-03-20T09:54:32.567
> 
> 标签：iphone, ios, objective-c

```
CGContextRef imageContext =
            CGBitmapContextCreate(imageBuffer, width, height, 8, width*4, colourSpace,
                    kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);

CGContextDrawPDFPage( imageContext, page1 ); 
```

此代码在另一个项目中运行良好。但是当我尝试在另一个 CGContextDrawPDFPage 中使用它时，就会陷入死循环。我在 Instruments 中看到 syscall_thread_switch 和 _spin_lock 在循环中被调用。

试图在主线程和后台线程中调用它。（原始应用程序在后台线程中使用它）

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T09:23:53.207

在绘制之前，我必须使用自定义字体实例化一个 UILabel 才能使其正常工作。

# c++ - 虚拟析构函数必须是公开的吗？

> ID：15520233
> 
> 赞同：17
> 
> 时间：2013-03-20T09:54:34.830
> 
> 标签：c++, destructor

我发现几乎每个虚拟析构函数的代码片段都将其作为公共成员函数，如下所示：

```
class Base
{
public:
    virtual ~Base()
    {
        cout << "~Base()" << endl;
    }
};
class Derived : public Base
{
public:
    ~Derived()
    {
        cout << "~Derived()" << endl;
    }
}; 
```

* * *

虚拟析构函数是否必须是公共的，或者是否存在非公共虚拟析构函数有意义的情况？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T10:11:29.497

> **虚拟析构函数是否必须是公共的，或者是否存在非公共虚拟析构函数有意义的情况？**

课程用马。如果您需要多态删除，则使用`public`虚拟析构函数，否则您的析构函数根本不需要是虚拟的。

听从**[Herb 的建议](http://www.gotw.ca/publications/mill18.htm)**：

> ***准则 #4：***基类析构函数应该是公共的和虚拟的，或者是受保护的和非虚拟的。
> 
> 简而言之，您将面临两种情况之一。任何一个：
> 
> 1.  您希望通过基指针允许多态删除，在这种情况下，析构函数必须是虚拟的和公共的；或者
> 2.  您不需要，在这种情况下，析构函数应该是非虚拟的并受到保护，后者是为了防止不必要的使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T09:58:58.330

就像非虚拟析构函数一样，它们*不一定*是`public`，但大多数时候它们是。

如果您的类是规则的例外，并且出于任何原因需要控制其实例的生命周期，那么析构函数必须是非`public`. 这将影响客户端如何（或不能）利用类的实例，但这当然是重点。而且由于析构函数是`virtual`，唯一的其他选择是`virtual protected`。

相关：[将受保护的析构函数设为虚拟是否有用？](https://stackoverflow.com/questions/8970466/is-there-a-use-for-making-a-protected-destructor-virtual)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T09:58:23.913

如果您计划通过特殊方法创建/销毁对象（例如，创建/销毁），则没有必要。但是，如果您在堆栈或堆上创建对象，则必须具有公共析构函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T10:42:47.990

这里的问题是关于虚拟析构函数，因此我假设为什么需要这种实现的原因的排列也应该包括继承情况。问题的答案取决于以下几点：

1）如果您不希望类被实例化，您可以使用私有构造函数/析构函数。不过，实例化可以通过同一个类中的另一个方法来完成。所以，当你想在类中使用像 MyDestructor() 这样的特定方法来调用析构函数时，仍然可以将析构函数置于私有状态。例如：单例设计模式。此外，在这种情况下，它会阻止类被继承

2）如果打算继承所有类，则不允许私有基类析构函数（引发编译错误）。但是，受保护的基类析构函数允许继承

3）受保护的虚拟析构函数的继承类型（公共和受保护）允许安全的多级继承方式A->B->C，以便在调用C的析构函数时更好地清理内存。

4）当使用new动态分配内存时，单独的私有析构函数不能允许删除（我不确定auto_ptr，但我认为即使这样也应该遵守使用“私有”析构函数的相同想法）。

在周围，我看到使用私有析构函数可能容易出错，特别是当不知道这种实现的人即将使用这样的类时。

protected 和 public 析构函数总是受欢迎的，其使用取决于上面给出的需求。

希望这可以澄清。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:15:44.110

这里涉及两个**单独**的规则。首先，如果您的设计要求通过指向基的指针删除派生类型的对象，则基中的析构函数**必须是**虚拟的。其次，如果一个成员函数（我广泛地包括析构函数）是受保护的或私有的，那么可以调用它的上下文比它是公共的（当然，如果析构函数是私有的，你可以） t 派生自类）。例如：

```
class C {
protected:
    virtual ~C();
    friend void destroy_me(C*);
};

void destroy_me(C *cp) {
    delete cp; // OK: destructor is accessible
}

void destroy_someone_else(C *cp) {
    delete cp; // Error: destructor is not accessible
} 
```

# wpf - MahApps 全景控件不显示照片

> ID：15520236
> 
> 赞同：0
> 
> 时间：2013-03-20T09:54:41.547
> 
> 标签：wpf, mahapps.metro

我想使用 MahApps PanoramaControl 来显示一堆照片。但是，我看到控件中只出现了字符串路径，如果您查看我的代码，这将是正确的。但我不知道如何让它显示图像而不是链接。

xml:

```
 <Controls:Panorama Grid.Row="2"
                   Grid.ColumnSpan="4"
                   ItemBox="140"
                   ItemsSource="{Binding PhotoCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

视图模型：

```
 string[] filePaths = Directory.GetFiles(@"D:\Google Drive\Images\Backgrounds");

  test = new PanoramaGroup("My Photo's", filePaths);
  PhotoCollection = new ObservableCollection<PanoramaGroup> { test }; 
```

有人知道如何让它显示图像吗？控件已加载，因为我可以在文本上横向滚动。他们的网站上没有太多关于如何让它工作的文档......

或者您是否在为 4.0 框架使用其他 Metro 风格库？

![全景控制](../Images/b62268a03ab7d0eb1dfa55b68fb9a8ce.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:23:40.580

为了获得 MahApps 全景控制，我将在下面提供以下解决方案。至于提供这种级别的详细现代 UI 体验的其他框架，我没有遇到任何但有兴趣知道你是否这样做。

希望解决方案对您有用。

您需要添加一个代表您正在显示的对象的数据模板。

首先在 POCO 类中定义对象（如下图所示）。然后在项目群中确保将它们转换为新创建的 POCO 对象，而不是将它们保留为字符串值。

```
public class Photo {
   public string Path { get; set; }
} 
```

接下来，在 XAML 窗口的定义中，您需要创建对 POCO 对象所在的命名空间的引用。

```
xmlns:model="clr-namespace:project.models;assembly=project" 
```

最后但并非最不重要的一点是，您希望随后创建一个 DataTemplate 来表示该对象。这被添加到窗口资源中。

```
<Window.Resources>
    <DataTemplate DataType="{x:Type model:Photo}">
        <Image Source="{Binding Path}"/>
    </DataTemplate>
</Window.Resources> 
```

这应该让渲染发生在它所属的界面中。希望这对你有用。

# hibernate - Grails 应用程序域未映射问题

> ID：15520238
> 
> 赞同：0
> 
> 时间：2013-03-20T09:54:47.823
> 
> 标签：hibernate, grails, dns

我们有一个 Grails 应用程序，我们已经维护了一年多。但最近我们开始收到类似的错误

```
org.hibernate.hql.ast.QuerySyntaxException: CareAlert is not mapped [from CareAlert p where p.code in (:code)]
    at $Proxy24.createQuery(Unknown Source)
    at com.deerwalk.FrontEndService.getAlertMessage(FrontEndService.groovy:492)
    at com.deerwalk.FrontEndService$getAlertMessage.call(Unknown Source)
    at com.deerwalk.MemberProfileService.getCareAlertData(MemberProfileService.groovy:81)
    at com.deerwalk.MemberProfileService$getCareAlertData.call(Unknown Source)
    at com.deerwalk.MemberSearchController$_closure6.doCall(MemberSearchController.groovy:891)
    at com.deerwalk.MemberSearchController$_closure6.doCall(MemberSearchController.groovy)
    at grails.plugin.springcache.web.GrailsFragmentCachingFilter.doFilter(GrailsFragmentCachingFilter.groovy:66)
    at net.sf.ehcache.constructs.web.filter.Filter.doFilter(Filter.java:86)
    at org.grails.plugin.resource.DevModeSanityFilter.doFilter(DevModeSanityFilter.groovy:44)
    at com.planetj.servlet.filter.compression.CompressingFilter.doFilter(CompressingFilter.java:270)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:106)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:106)
    at java.lang.Thread.run(Thread.java:662) 
```

我们在我们甚至没有接触过的模块中遇到了这种错误。问题似乎来自我们进行 GORM 查询的地方

> CareAlert.findAll("来自 CareAlert p where p.code in (:code)", [code:code])

（它不是特定于 CareAlert 域）似乎解决问题的方法是，如果我们 在查询之前`CareAlert.get(1)`或`CareAlert.findAll()`至少一次调用任何动态查找器，则该域的问题似乎消失了。所以现在我们只放了一堆像

> CareAlert.get(1)
> 
> 客户端.get(1)

在引导程序中。

有没有人遇到过类似的问题？

# c# - Visual Studio C# 调试器 - 当前不会命中断点

> ID：15520239
> 
> 赞同：6
> 
> 时间：2013-03-20T09:54:50.677
> 
> 标签：c#, debugging, visual-studio-2012, breakpoints

我知道这个问题已经被问过好几次了，这里很多人提出了不同的答案。虽然他们都没有为我工作。

我使用 Visual Studio 和 .NET 框架 4.0 创建了一个 Windows 窗体应用程序并添加了一个断点。但是，当我调试应用程序时，断点上会出现一个感叹号，上面写着..

> 当前不会命中断点。没有可执行代码与此行相关联。可能的原因包括：条件编译或编译器优化。

我已经尝试了几个建议的解决方案

*   清理项目
*   删除了 pdb
*   检查配置并确保它是调试的
*   将调试配置从“x86”设置为“任何 CPU”
*   尝试从头开始创建项目
*   尝试重新安装 .NET 框架
*   删除了临时 ASP.NET 文件

但是，它们似乎都不起作用。我能够在之前使用断点调试我的项目，但由于某种原因，发生了一些事情，我无法再调试项目了。我应该注意什么或修复什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-09T14:35:40.510

可能您的断点位于不依赖于“启动项目”的项目中。隐式地，这些项目不会在运行（按钮`F5`）上编译。

转到：菜单*Tools* → *Options* → *Project and Solutions* → *Build and Run* → 取消选中第一个复选框（**仅在 Run 上构建启动项目和依赖**项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T22:04:17.937

我最近遇到了这个问题，它困扰了我一段时间。最后我无意中将我的构建配置从 DEBUG 切换到另一个更优化并且没有“定义 DEBUG 常量”的配置：项目 > 属性 > 构建 >（第一个复选框）。

如果解决方案中的其他项目在解决方案配置管理器中设置为 DEBUG 以外的配置（通常是意外），也可能发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:58:23.300

在 Visual Studio 中，转到菜单栏，菜单*Debug* → *Windows* → *Modules*，找到您的代码所在的程序集并检查符号状态。您可能正在让 Visual Studio 加载与您的 PDB 文件不匹配的不同版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T12:48:57.747

我在这里遇到了同样的问题...

我使用的是 Visual Studio 2005 - 专业版，我的问题是当我尝试对 Windows 窗体应用程序进行断点时。

我在互联网上的许多论坛中搜索过，但没有找到任何答案。但是这个问题的解决方案比我预期的要容易。只需右键单击 Visual Studio 快捷方式（或 .exe）并取消标记*execute in compatible mode*。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-08-07T18:37:14.477

您最好的选择是创建一个新项目。然后导入上一个项目中的所有文件，包括您的表单（如果有）。

您现在设置为“确定”以继续。

# vba - ms word 2007 应用程序/对象特定运行时错误列表

> ID：15520241
> 
> 赞同：1
> 
> 时间：2013-03-20T09:54:51.567
> 
> 标签：vba, ms-word, word-2007

是否有任何可用的列表或在线资源可将 ms word 2007 中的应用程序和/或对象特定错误代码转换为有意义的信息？类似于 [此 ms 访问编译的](http://www.fmsinc.com/microsoftaccess/errors/errornumber_description.html)东西会很棒。

具体来说，我正在寻找保存文档时错误 5496 的解释。

提前谢谢

# django - Django 信号获取请求完整路径

> ID：15520246
> 
> 赞同：2
> 
> 时间：2013-03-20T09:54:57.830
> 
> 标签：django, path, request, signals

我在我的 django 项目中写了一个信号，在里面我想发送一封包含我网站完整路径的电子邮件。但要这样做，我需要在信号中获取请求对象，我该怎么做呢？谢谢。

```
 @receiver(pre_save, sender=AccessRequest)
    def email_if_access_true(sender, instance, **kwargs):
        #How can I get the full path of my website here?
        pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:25:51.470

如果您无权访问请求对象，则可以使用 Site 模型管理器的 get_current() 方法。

```
from django.contrib.sites.models import Site

@receiver(pre_save, sender=AccessRequest)
def email_if_access_true(sender, instance, **kwargs):
    current_site = Site.objects.get_current()
    if current_site.domain == 'foo.com':
        #do other stuff here
    else:
        pass 
```

您需要确保您`SITE_ID=1`在设置中定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:31:25.467

将以下代码放入您的`pre_save`信号接收器中：

```
from django.contrib.sites.models import get_current_site
current_site = get_current_site(request=None)
domain = current_site.domain
protocol = "http" 
```

您可以通过将所需的上下文变量传递给模板，在电子邮件中生成您网站的绝对 URL。如果`access_request`在您的情况下是实例并且您的模型中有一个[get_abosulte_url()](https://docs.djangoproject.com/en/1.4/ref/models/instances/#get-absolute-url)方法`AccessRequest`，那么电子邮件模板中的以下行将为您提供绝对 URL。

```
{{ protocol }}://{{ domain }}{% access_request.get_absolute_url %} 
```

参考 - [PasswordResetForm](https://github.com/django/django/blob/1.4.5/django/contrib/auth/forms.py#L189-L242)在`django.contrib.auth.form`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-05T06:55:07.463

如果您无权访问请求对象，则可以使用 Site 模型管理器的 get_current() 方法。

```
from django.contrib.sites.models import Site

@receiver(pre_save, sender=MyModel)
def my_function_without_request(sender, instance, **kwargs):
    current_site = Site.objects.get_current()
    domain = current_site.domain
    # Do something 
```

要启用站点框架，请执行以下步骤：

1.  将“django.contrib.sites”添加到您的 INSTALLED_APPS 设置中。
2.  定义 SITE_ID 设置：SITE_ID = 1
3.  运行迁移。

[来源：https://docs.djangoproject.com/en/3.2/ref/contrib/sites/](https://docs.djangoproject.com/en/3.2/ref/contrib/sites/)

要为您的项目设置正确的名称和域，您可以使用数据迁移。

首先，创建一个可以使用的空迁移文件（Django 会将文件放在正确的位置，建议一个名称，并为您添加依赖项）：

```
python manage.py makemigrations --empty yourappname 
```

然后，打开文件并创建一个新函数并让 RunPython 使用它。

```
from django.contrib.sites.models import Site
from django.db import migrations

def set_name_and_domain():
    one = Site.objects.all()[0]
    one.domain = 'yourdomain.com'
    one.name = 'Your Name'
    one.save()

class Migration(migrations.Migration):

    dependencies = [
        ('yourappname', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(set_name_and_domain),
    ] 
```

所有这些都会将您的域名和站点名称保存在您的数据库中，您可以在没有请求对象的情况下访问它。到目前为止，我还没有找到更好的方法来做到这一点。

[来源：https://docs.djangoproject.com/en/3.2/topics/migrations/#data-migrations](https://docs.djangoproject.com/en/3.2/topics/migrations/#data-migrations)

# dart - 如何在 DartEditor 中强制生成警告

> ID：15520249
> 
> 赞同：1
> 
> 时间：2013-03-20T09:55:08.920
> 
> 标签：dart

我正在寻找一种在我的代码（顶级、类、函数）中的任何位置生成警告的方法。因为我通常有一个 0 警告策略，这使我能够看到我在哪里进行了更改，我需要在提交之前恢复

例如在 Java 中，我可以这样做：

```
private int warning_revert_to_false;
boolean DEBUG = true; 
```

它会产生一个警告（根据我的设置）。使用 jslint/jshint 很容易（例如混合制表符/空格），在 C/C++ 中我可以使用 pragma ...

基本上我希望代码仍然可以编译和运行，到目前为止，在 Dart 中，我找不到一个简单的解决方案，我确信我错过了一个。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:50:46.987

将以下库添加到您的程序中：

```
library forced;    
import 'package:meta/meta.dart';

class Forced {
  @deprecated
  static void warning() {

  }
} 
```

无论您想要强制警告，您都可以简单地编写：

```
Forced.warning(); 
```

# javascript - 翻转多个图像javascript

> ID：15520254
> 
> 赞同：0
> 
> 时间：2013-03-20T09:55:17.263
> 
> 标签：javascript, flip, flippy

我想使用 javascript 翻转多张图像。我有 4 张图像，我可以同时翻转它们，这样效果会很好。我使用了 Flippy 插件，它适用于一张图片。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:08:40.097

我想像

```
$('.myImageClass').each(function(){
  $(this).flippy({
   //... options
  });
}); 
```

应该管用。

您可能还想看看 jQuery 中转： [http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

# sql - 将毫秒转换为时间戳

> ID：15520256
> 
> 赞同：5
> 
> 时间：2013-03-20T09:55:29.913
> 
> 标签：sql, oracle, timestamp, unix-timestamp, milliseconds

我知道以毫秒为单位的 Unix 时间戳转换为我可以使用的 SQL 时间戳

```
SELECT TO_DATE('1970-01-01','YYYY-MM-DD HH24:MI:SS') + 
       (:timestamp / (1000*60*60*24)) FROM DUAL; 
```

但我需要一个时间戳，所以我尝试了

```
SELECT TO_TIMESTAMP('1970-01-01 00:00:00','YYYY-MM-DD HH24:MI:SSFF3') + 
       (:timestamp) from DUAL 
```

这给了我错误：

> 错误：ORA-01841：（完整）年份必须介于 -4713 和 +9999 之间，并且不能为 0

似乎在时间戳上加 1 总是会将其转换为一天。

我怎样才能得到一个真正的时间戳？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T10:13:02.500

`timestamp`如果将 an 添加`interval`到 a 中，您将得到a `timestamp`（请参阅[日期/间隔算术](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#i48042)）。

正如[Benoit 注意到](https://stackoverflow.com/a/15520668/119634)的那样，当它们超过大约 2.1e9 时，您不能指定以秒为单位的间隔：

```
SQL> SELECT numtodsinterval(2.2e9, 'SECOND'),
  2         numtodsinterval(2.3e9, 'SECOND')
  3    FROM dual;

NUMTODSINTERVAL(2.2E9,'SECOND'  NUMTODSINTERVAL(2.3E9,'SECOND'
------------------------------- -------------------------------
+000024855 03:14:07.147483647   +000024855 03:14:07.147483647 
```

这就是为什么您应该使用不会丢失精度的分钟数。例如，假设`:TS`是unix时间戳（即一个数字）：

```
SQL> variable ts number;
SQL> -- determining unix timestamp with nanosecond precision
SQL> BEGIN
  2     :ts := (to_date('2099-01-01 01:02:03', 'yyyy-mm-dd hh24:mi:ss')
  3              - date '1970-01-01') * 1000*60*60*24
  4            + 123.456789;
  5  END;
  6  /

ts
---------
4070912523123,456789

SQL> select timestamp '1970-01-01 00:00:00'
  2         + numtodsinterval((:ts)/1000/60, 'MINUTE')
  3    from dual;

TIMESTAMP'1970-01-0100:00:00'+NUMTODSINTERVAL((:TS)/1000/60,'MINUTE')
---------------------------------------------------------------------------
2099-01-01 01:02:03.123456789 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:13:56.190

有两种类型：

*   时间戳
*   间隔

间隔是减去时间戳得到的，把时间戳加在一起是没有意义的。

如果您需要获得毫秒间隔，我建议使用第二个间隔并将其除以 1000：

我可以建议：

```
SELECT timestamp'1970-01-01 00:00:00' + (interval '1888' second(9) / 1000)
  FROM dual 
```

这里的问题是你不能在同一个时间戳文字中使用超过 9 个数字。

如果您需要向纪元添加 2,061,464,797,255 毫秒，我可以建议：

```
SELECT TIMESTAMP'1970-01-01 00:00:00'
       + INTERVAL '2' SECOND(9) * 1000000000
       + INTERVAL '061464797' SECOND(9)
       + INTERVAL '255' SECOND(3) / 1000
  FROM dual 
```

你得到 2035-04-29 13:06:37.255000000

它似乎受到 2038 错误的影响：TIMESTAMP'1970-01-01 00:00:00' + 30 亿秒不起作用，而它适用于 20 亿秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-26T13:06:51.537

我在[这里](https://stackoverflow.com/a/63597872/6866545)发布了一些将纳秒转换为时间戳和时间戳转换为纳秒的方法。这些方法不受时区影响，具有纳秒级精度。

您只需要调整它以使用毫秒而不是纳秒。

```
SELECT TIMESTAMP '1970-01-01 00:00:00 UTC' + numtodsinterval(
    1598434427263 --Replace line with desired milliseconds
/ 1000, 'SECOND') AS TIMESTAMP FROM dual;

TIMESTAMP
26/08/20 09:33:47,263000000 UTC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:03:18.800

采用

```
SELECT TIMESTAMP '1970-01-01 00:00:00.1234' + INTERVAL '1 00:00:00' DAY TO SECOND  
       AS ts
  FROM dual; 
```

# iphone - Cocos2d - CCSprite 图像纹理变得模糊

> ID：15520257
> 
> 赞同：1
> 
> 时间：2013-03-20T09:55:29.580
> 
> 标签：iphone, image, cocos2d-iphone, ccsprite

我正在使用最新的 cocos2d 创建一个游戏项目，我已经添加了具有各自视网膜和正常图像的图像。但是当我使用其初始化方法添加一个 ccsprite 时，initWithFileName:(NSString*)fileName ，图像纹理变得模糊而在视网膜和非视网膜设备中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:06:13.883

请在你的精灵上试试这个：

```
[myccsprite setAliasTexParameters]; 
```

它会告诉精灵不要抗锯齿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:58:42.727

适用于所有纹理或仅适用于某些纹理？如果它适用于所有纹理，则更改 pixelFormat。

在 AppController 中，将 backbuffer pixelFormat 设置为 kEAGLColorFormatRGBA8。

```
CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                                   pixelFormat:kEAGLColorFormatRGBA8    //kEAGLColorFormatRGBA8
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-20T10:41:17.267

在 AppController 中，我将 backbuffer pixelFormat 设置为 kEAGLColorFormatRGBA8。这确实有效

CCGLView *glView = [CCGLView viewWithFrame:[window_bounds] pixelFormat:kEAGLColorFormatRGBA8 //kEAGLColorFormatRGBA8 depthFormat:0 //GL_DEPTH_COMPONENT24_OES preserveBackbuffer:NO sharegroup:nil multiSampling:NO numberOfSamples:0];

# winforms - Visual Studio - 发布自动化

> ID：15520258
> 
> 赞同：0
> 
> 时间：2013-03-20T09:55:29.930
> 
> 标签：winforms, visual-studio, clickonce

我维护了一个通过 ClickOnce 部署到桌面的 Winform 应用程序。目前我使用 Visual Studio 发布向导来提供一个新版本。我想自动化这一步，最好是通过 MSBuild 脚本。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:02:20.247

When you invoke msbuild /target:publish at the command line, it tells the MSBuild system to build the project and create a ClickOnce application in the publish folder. This is equivalent to selecting the Publish command in the IDE.

This comes from the MSDN documentation for MSBuild

[http://msdn.microsoft.com/en-us/library/ms165431.aspx](http://msdn.microsoft.com/en-us/library/ms165431.aspx)

# angularjs - angularJS中的自定义验证

> ID：15520260
> 
> 赞同：0
> 
> 时间：2013-03-20T09:55:31.693
> 
> 标签：angularjs

我是 AngularJS 的新手。

在下面的小提琴中，当用户单击**“此提交触发验证。但我想将此按钮放在页面末尾”**按钮时。我可以看到警报/错误，但我想显示一条自定义消息，我正在努力做到这一点。

```
Header inputs:
    <input type="name" ng-model="sample" required/>
    <input type="name" ng-model="sampleX" required/>

    <input type="submit" value="This submit triggers validation. But I wanted to put this button at the end of the page"/>
</form>

<hr/>

Some other form here. Think line items

<hr />
<a class="btn" ng-click="triggerSubmit()">Wanted this submit to trigger the validation to the form on which this button doesn't belong, e.g. trigger to header</a> 
```

js小提琴链接 [http://jsfiddle.net/unWF3/6/](http://jsfiddle.net/unWF3/6/)

谢谢，
卡利安巴萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:26:57.600

要禁用本机浏览器验证，请将`novalidate`属性添加到表单元素：

```
 <form novalidate submit-on="myEvent" ng-submit="onSubmitted()"> 
```

# wordpress - 图片标签和the_post_thumbnail，在哪里？

> ID：15520269
> 
> 赞同：-1
> 
> 时间：2013-03-20T09:55:46.347
> 
> 标签：wordpress

`the_post_thumbnail()`函数正在创建一个图像标签 - 此代码位于何处？由于某种原因找不到它（它不是 on`post-thumbnail-template.php`也不是 on `media.php`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:02:09.227

请参阅 codex：[http](http://codex.wordpress.org/Function_Reference/the_post_thumbnail) ://codex.wordpress.org/Function_Reference/the_post_thumbnail，the_post_thumbnail() 位于 wp-includes/post-thumbnail-template.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:59:44.530

它位于根行号 45 上 wp-includes 文件夹中的 post-thumbnail-template.php

```
function the_post_thumbnail( $size = 'post-thumbnail', $attr = '' ) {
echo get_the_post_thumbnail( null, $size, $attr ); 
```

}

# ruby - 占有通用量词 {m,n}+ 未在 Ruby 1.9.3 中实现？

> ID：15520273
> 
> 赞同：7
> 
> 时间：2013-03-20T09:56:04.643
> 
> 标签：ruby, regex, oniguruma

占有量词是贪婪的并且拒绝回溯。正则表达式`/.{1,3}+b/`应该意味着：匹配除换行符以外的任何字符，1 到 3 次，尽可能多且不回溯。然后匹配字符`b`。

在这个例子中：

```
'ab'.sub /.{1,3}+b/, 'c'    #=> "c" 
```

与事实相反，不应进行替代。

这两个示例中的结果不同：

```
'aab'.sub /.{0,1}+b/, 'c'   #=> "c"
'aab'.sub /.?+b/, 'c'       #=> "ac" 
```

将此与 Scala 进行比较，他们给出了相同的答案：

```
scala> ".{0,1}+b".r.replaceAllIn("aab", "c")
res1: String = ac
scala> ".?+b".r.replaceAllIn("aab", "c")
res2: String = ac 
```

这是一个 Ruby 错误，还是有可能激发这种行为？`?`也许，Oniguruma 出于某种原因对所有量词,实现了所有格`*`，`+`除了通用量词`{m,n}`？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:14:30.180

## 真正发生的事情

似乎`+`后跟范围量词并没有为范围量词提供*所有格*属性。相反，它被视为前面重复一次或多次的任何内容。以`.{1,3}+b`为例，它将等效于`(?:.{1,3})+b`.

## 解决方法

您可以使用更通用的构造非回溯组（或*原子*分组）来解决此问题`(?>pattern)`。让我们以一般情况`pattern{n,m}+`为例，构造具有非回溯组的等效正则表达式（等效于 Java 与 匹配时的行为`pattern{n,m}+`）：

```
(?>(?>pattern){n,m}) 
```

为什么有 2 个级别的非回溯组？2 是必要的，因为：

*   当为`pattern`（一个重复实例）找到匹配项时，`pattern`不允许回溯。（注意，只要没有找到实例，`pattern`就允许在其中回溯）。这与内部非回溯组进行了模拟。
*   当找不到更多`pattern`的实例时，不允许回溯以删除任何实例。这与外部非回溯组进行了模拟。

*我不确定这里是否有任何警告。如果您发现此方法未模拟任何情况，请对我进行评论。*

## 测试

### 测试 1

起初，我测试了这个正则表达式：

```
(.{1,3}+)b 
```

[最初，我在没有捕获组的情况下进行了测试，但结果令人惊讶，我需要捕获组来确认发生了什么。]

在这个输入上：

```
2343333ab 
```

结果是**整个字符串匹配**，并且捕获的捕获组`2343333a`（没有`b`结尾）。这表明上限已经以某种方式被打破。

[**rubular 演示**](http://www.rubular.com/r/8aTRCXbNLH)

### 测试 2

第二个测试揭示了范围量词`{n}`的行为如何不能被修改为*所有格*，并且很可能这也适用于其他范围量词`{n,}`和`{n,m}`. 相反，以下`+`只会表现出重复 1 次或多次的行为。

[（我最初的结论是`+`覆盖了上限，但事实证明是错误的）。]

测试正则表达式：

```
(.{3}+)b 
```

输入字符串：

```
23d4344333ab
234344333ab
23434433ab 
```

在捕获组 1 中捕获的匹配都是 3 的倍数。从上到下，正则表达式分别跳过输入字符串的 2、1、0 个字符。

带注释的输入字符串（`[]`表示匹配整个正则表达式，`()`表示捕获组 1 捕获的文本）：

```
23[(d4344333a)b]
2[(34344333a)b]
[(23434433a)b] 
```

[**rubular 演示**](http://www.rubular.com/r/CmnSuayFRN)

### 测试代码以解决问题

这是 Java 中的测试代码，表明外部和内部非回溯组都是必要的。[**ideone**](http://ideone.com/FLJEXC)

```
class TestPossessive {
  public static void main(String args[]) {
    String inputText = "123456789012";
    System.out.println("Input string: " + inputText);
    System.out.println("Expected: " + inputText.replaceFirst("(?:\\d{3,4}(?![89])){2,}+", ">$0<"));
    System.out.println("Outer possessive group: " + inputText.replaceFirst("(?>(?:\\d{3,4}(?![89])){2,})", ">$0<"));
    System.out.println("Inner possessive group: " + inputText.replaceFirst("(?>\\d{3,4}(?![89])){2,}", ">$0<"));
    System.out.println("Both: " + inputText.replaceFirst("(?>(?>\\d{3,4}(?![89])){2,})", ">$0<"));

    System.out.println();

    inputText = "aab";
    System.out.println("Input string: " + inputText);
    System.out.println("Expected: " + inputText.replaceFirst(".{1,3}+b", ">$0<"));
    System.out.println("Outer possessive group: " + inputText.replaceFirst("(?>.{1,3})b", ">$0<"));
    System.out.println("Inner possessive group: " + inputText.replaceFirst("(?>.){1,3}b", ">$0<"));
    System.out.println("Both: " + inputText.replaceFirst("(?>(?>.){1,3})b", ">$0<"));
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:48:51.950

这似乎是在 Oniguruma 的意图。[文档](http://www.geocities.jp/kosako3/oniguruma/doc/RE.txt)说`{n,m}+, {n,}+, {n}+ are possessive op. in ONIG_SYNTAX_JAVA only`。我猜这是因为向后兼容的原因，还是？

# ruby - 为我的自定义 gem 添加一个生成器（Rails > 3）

> ID：15520281
> 
> 赞同：1
> 
> 时间：2013-03-20T09:56:26.797
> 
> 标签：ruby, ruby-on-rails-3, rubygems, generator

我正在尝试编写一个 Ruby gem（使用 Rails 3.2.13），我创建了一个生成器来进行文件复制。

以下是我的生成器代码

```
#<mygemname>/lib/generators/mygemname/mygemname_generator.rb

require 'rails/generators'
require 'rails/generators/migration'

module Mygemname
  module Generators
    class ConfigGenerator < Rails::Generators::Base
      p "testing generator"
    end 
  end
end 
```

然后我去我的测试应用程序`<mygemname>/spec/dummy`（我使用 Rspec 进行测试），所以从我的虚拟应用程序，当我运行

```
rails g I get 

Mygemname:
  mygemname:config 
```

但是当我跑步时`rails g endless:config`，我得到

```
Could not find generator endless:config. 
```

但是当我运行时`rails g endless`，我得到了正确的结果。但是我想将命令设置为`rails g endless:config`，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:41:21.507

尝试重命名文件：`/lib/generators/mygemname/config_generator.rb`

并且结构`config_generator.rb`有点不同：

```
class Mygemname
  class ConfigGenerator < Rails::Generators::Base
    p "testing generator"
  end 
end 
```

# java - Spring框架中的Java配置

> ID：15520282
> 
> 赞同：1
> 
> 时间：2013-03-20T09:56:29.843
> 
> 标签：java, spring, configuration, guice, constructor-injection

我有课程`A`，`B`以及他们的实现`AImpl`，`BImpl`.

```
interface A {
}
interface B {
}
interface C {
}
class AImpl{
    @Inject
    AImpl(B b){}
}
class BImpl{
    @Inject
    BImpl(String foo, C c){}
}
class CImpl{
} 
```

要在 Guice 中配置依赖项，我会像这样编写 smt

```
bind(A.class).to(AImpl);
bind(C.class).to(CImpl);
@Provides B provideB(C c){
   return new BImpl("foo", c)
} 
```

在春天我可以做 smt like

```
@Bean public A a() {
    return new AImpl(b())
}
@Bean public B b() {
    return new BImpl("foo", c());
}
@Bean public C c() {
    return new CImpl();
} 
```

有几个缺点

*   我应该写下 AImpl 在 2 个地方（构造函数和配置）需要 B。
*   我应该编写更多代码（CImp 和 AImpl 需要创建方法而不是一个表达式）

有没有办法在不做 xml 的情况下改进我的 spring 配置？

**upd** 我也不想用 @Component 之类的 spring 相关注释来污染我的类。我更喜欢构造函数注入而不是任何其他类型的注入。扫描也不是优选的解决方案。那么，我可以用 Guice 的方式做 Spring 吗？

**更新2**

**所以**我想要存档

*   自动装配
*   构造函数注入

没有

*   XML
*   路径扫描

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:02:52.033

您可以使用自动装配，而不是使用 java 代码创建 Bean。您可以在您的 java 配置中定义 ComponentScan。您不需要使用任何 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:20:18.343

这可以创建没有 xml 的 bean 并使用 Spring 注释污染 bean：

```
interface A {
}

interface B {
}

interface C {
}

class AImpl implements A {
    AImpl(B b) {
    }
}

class BImpl implements B {
    BImpl(String foo, C c) {
    }
}

class CImpl implements C {
}

@Configuration
class Config {
    @Bean public A a() {
        return new AImpl(b());
    }

    @Bean public B b() {
        return new BImpl("foo", c());
    }

    @Bean public C c() {
        return new CImpl();
    }
}

public class T1 {

    public static void main(String[] args) throws Exception {
        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(Config.class);
    }
} 
```

# visual-c++ - 如何在 Visual C++ 中小写环境变量？

> ID：15520285
> 
> 赞同：2
> 
> 时间：2013-03-20T09:56:31.400
> 
> 标签：visual-c++, environment-variables

是否可以从 Visual C++ 项目设置中小写环境变量，例如`$(TargetName)`等，`$(ConfigurationName)`而不必将这些指定为新的环境变量。我想将所有内容保持小写以匹配我的 unix 版本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-31T08:18:00.840

对的，这是可能的！

只需使用`$(MacroName.toLower())` or `$(MacroName.toUpper())`。

例如：

`$(Configuration)`==`Debug`

`$(Configuration.toLower())`==`debug`

`$(Configuration.toUpper())`==`DEBUG`

* * *

这适用于 Visual Studio 2017，但无法判断它是否适用于旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:08:08.693

[这里](http://msdn.microsoft.com/en-us/library/c02as0cs%28v=vs.71%29.aspx)说：

> 这些宏不区分大小写。

根据一些人的说法，$(Target..) 是小写的，而 $(OutputDir) 不一定是：

*   [http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/f83e967c-ae19-4073-a9a3-75f2e4482c74](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/f83e967c-ae19-4073-a9a3-75f2e4482c74)
*   [Visual Studio 2005 以小写字母创建输出目录](https://stackoverflow.com/questions/3359699/visual-studio-2005-creates-output-directories-in-lowercase)

但是，我不知道有任何文件证实了这一点。

# c# - 用c#在asp.net中加密和解密

> ID：15520289
> 
> 赞同：1
> 
> 时间：2013-03-20T09:56:39.980
> 
> 标签：c#, asp.net-mvc, encryption

我计划加密和解密在我的应用程序中输入的密码，我的加密正在工作并且数据库中的数据是加密形式，但是当涉及到从数据库中解密和检索数据的问题时，它显示了一个错误..

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more  than two padding characters, or a non-white space character among the padding characters. 
```

显示错误的行是..

```
 byte[] todecode_byte = Convert.FromBase64String(password); 
```

**代码**：

**new.aspx.cs:(加密)**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;

namespace WebApplication5
{
    public partial class WebForm6 : System.Web.UI.Page
    {
        SqlConnection connection;
        protected void Page_Load(object sender, EventArgs e)
        {
            connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
            con1.Open();

            SqlCommand cmd1 = new SqlCommand("select * from admin where USERNAME=@USERNAME and PASSWORD=@PASSWORD ", con1);
            cmd1.Parameters.AddWithValue("@username", txtUserName.Text);
            cmd1.Parameters.AddWithValue("@password", txtPassword.Text);
            SqlDataReader dr = cmd1.ExecuteReader();
            if (dr.HasRows)
            {
                ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('userName is already availables')</script>");

            }

            else
            {

                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
                con.Open();
                string strQuery = "insert into admin( USERNAME,PASSWORD) values('" + txtUserName.Text + 
                   "','" +  EncodePasswordToBase64(txtPassword.Text) + "')";
                connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
                connection.Open();
                SqlCommand cmd = new SqlCommand(strQuery, connection);
                cmd.ExecuteNonQuery();
                connection.Close();
                Response.Redirect("login.aspx");

            }

            con1.Close();
        }
        public static string EncodePasswordToBase64(string password)
        {
            try
            {
                byte[] encData_byte = new byte[password.Length];
                encData_byte = System.Text.Encoding.UTF8.GetBytes(password);
                string encodedData = Convert.ToBase64String(encData_byte);
                return encodedData;
            }
            catch (Exception ex)
            {
                throw new Exception("Error in base64Encode" + ex.Message);
            }
        }

    }
} 
```

**login.aspx.cs:(解密)**

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Security.Cryptography;
using System.Data.SqlClient;

namespace WebApplication5
{
    public partial class WebForm4 : System.Web.UI.Page
    {
        SqlConnection connection;
        protected void Page_Load(object sender, EventArgs e)
        {
            connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
            con1.Open();
            SqlCommand cmd1 = new SqlCommand("select * from admin where USERNAME=@USERNAME and DecodeFrom64(PASSWORD=@PASSWORD) ", con1);
            cmd1.Parameters.AddWithValue("@username", txtUserName.Text);
            cmd1.Parameters.AddWithValue("@password", DecodeFrom64(txtPassword.Text));
            SqlDataAdapter da = new SqlDataAdapter(cmd1);
            DataTable dt = new DataTable();
            da.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                Response.Redirect("emplist.aspx");
            }
            else
            {
                ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('Invalid Username and Password')</script>");
            }
            con1.Close();
        }
        protected void btnClear_Click(object sender, EventArgs e)
        {
            txtUserName.Text = "";
            txtPassword.Text = "";
        }
        public string DecodeFrom64(string password)
        {
            System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
            System.Text.Decoder utf8Decode = encoder.GetDecoder();
            byte[] todecode_byte = Convert.FromBase64String(password);
            int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
            char[] decoded_char = new char[charCount];
            utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
            string result = new String(decoded_char);
            return result;
        }

    }

} 
```

PLZ任何人都可以在这个过程中帮助我......，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:07:21.370

除了一切之外，您还错误地调用了该函数。你这样称呼它：

```
DecodeFrom64(txtPassword.Text) 
```

我可以告诉你，我认为它`txtPassword.Text`不包含 Base64 字符串。

* * *

您在 DecodeFrom64 函数中太努力了：

```
public string DecodeFrom64(string password)
{
    return System.Text.UTF8.GetString(Convert.FromBase64String(password));
} 
```

您必须反向执行与编码功能相反的操作：

```
byte[] encData_byte = new byte[password.Length];
encData_byte = System.Text.Encoding.UTF8.GetBytes(password);
string encodedData = Convert.ToBase64String(encData_byte); 
```

你做的最后一件事是`Convert.ToBase64String`你必须这样做`Convert.FromBase64String`。然后在此之前你使用`System.Text.Encoding.UTF8.GetBytes`. 该功能的反面是`System.Text.UTF8.GetString`。正如您在我的回答中看到的那样，您可以将所有内容放在一行中。：

```
System.Text.UTF8.GetString(Convert.FromBase64String(password)); 
```

* * *

但是你不加密密码，你只对它们应用混淆。如果我入侵了您的数据库并看到了这些密码，我可以轻松破解它们。我只需要在[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)之类的网站中输入它们，或者编写我自己的小程序，我就拥有所有普通密码。

如果要将密码保存到数据库中，最好使用散列。如果您创建密码哈希并将其保存到数据库，那么当黑客获取您的数据库时，他/她将看不到真正的密码，因为您无法反转哈希，例如 base64。

如果有人试图登录到您的站点，您创建输入密码的哈希值，然后查看哈希值是否等于保存的哈希值。如果是，密码是一样的。

作为散列算法，我会推荐 SHA512。它是目前最好的之一。MD5 较旧，并且有[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)可以立即破解 MD5。

# file-upload - IE9 中的隐藏输入字段仅在双击后触发

> ID：15520296
> 
> 赞同：3
> 
> 时间：2013-03-20T09:57:07.127
> 
> 标签：file-upload, input, internet-explorer-9

我的按钮上有一个隐藏`input type:file`字段，用于打开文件上传窗口，它适用于除 IE9 之外的所有浏览器。在 IE9 中，该窗口仅在双击该字段后打开。

# android - Android-Camera Intent 未在特定文件夹中找到照片

> ID：15520306
> 
> 赞同：2
> 
> 时间：2013-03-20T09:57:33.750
> 
> 标签：android, android-intent, android-camera

我的 android 应用程序有小问题。我的应用程序通过调用标准的 android 相机意图拍照：

```
Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, this.myURI);

startActivityForResult(cameraIntent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

在应用程序从相机意图返回后，我尝试在存储它的目录中查找照片（通过代码），但照片不存在。**当我关闭我的应用程序并再次打开它时，**那里的照片。

我虽然可能该文件夹已被我锁定，因此相机意图无法将新照片放在那里。

请问，有什么帮助吗？？

（我不知道是否有人问过这个问题（真的不知道要寻找什么），如果有，请告诉我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:05:37.827

你回来后试着把这条线

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

此行执行“刷新”并在手机识别出保存在手机中的新闻照片后。

# php - 两个 MySQL SELECT 查询合二为一

> ID：15520308
> 
> 赞同：0
> 
> 时间：2013-03-20T09:57:37.697
> 
> 标签：php, mysql, extjs

我正在开发一个 Extjs 应用程序，我需要获取两个选择查询的结果，在 Json 中对结果进行编码，然后将包含这些结果的存储绑定到 gridview。

我有一个包含两列的gridview，第一列是“name_scope”，第二列是一个组合框，应该包含范围的值（一个范围可以有多个值）。所以我在 mySQL 中创建了两个表，“scope”和“scope_value”，我想将“scope”表中的 scope_name 绑定到我的第一列，然后将“scope_value”表中的值绑定到组合列。

我认为为此创建两个商店不是一个好主意，因此我只想创建一个包含这两个查询的 php 脚本：

```
SELECT name_scope FROM scope 
```

和

```
SELECT value FROM value_scope WHERE name_scope = "'. $name_scope .'"'; 
```

这些是我的桌子：

```
create table scope (name_scope varchar(50) not null primary key, description varchar(100));
create table value_scope (id_value int not null primary key AUTO_INCREMENT,name_scope varchar(50), value varchar(100), 
            foreign key (name_scope) references scope(name_scope) on delete cascade); 
```

我的网格视图：

```
{
    xtype: 'container',
    id : 'grid_container',

    anchor: '100%',
     forceFit: true,
    items: [{
        xtype: 'gridpanel',
        id: 'scope_grid',
        layout : 'fit',
        frame: true,
        columnLines: true,
        iconCls: 'icon-grid',
        title: 'Prod/Rel added',
        store: 'GetScopeData',
        columns: [{
            id: 'n_scope',
            text: 'Scope',
            flex: 1,
            sortable: true,
            dataIndex: 'name_scope'},

           { header: 'Product Release',
            width: 220,
            fixed: true,
            hideable: false,
            dataIndex: 'value',
            editor: {
                xtype: 'combobox',
                displayField: 'value',
                valueField: 'value',
                mode: 'local',
        editable : false,
                typeAhead: false,
                triggerAction: 'all',
                lazyRender: true,
                emptyText: 'Select action',
                listClass: 'x-combo-list-small'

            }}
]} 
```

我的 php 脚本应该是什么样的？请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:03:02.580

您可以将这两个 select 语句合二为一，例如

```
SELECT value FROM value_scope WHERE name_scope in (SELECT name_scope FROM scope); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:03:49.000

您可以使用所需的结果集创建一个商店 - 2 个字段（name_scope 和 value），并使用 join 将您的查询合并为一个：

```
SELECT scope.name_scope,value  FROM scope
INNER JOIN value_scope ON(scope.name_scope = value_scope.name_scope)
WHERE scope.name_scope = "'. $name_scope .'"'; 
```

# .net - 在源代码中存储敏感信息的最佳实践

> ID：15520310
> 
> 赞同：2
> 
> 时间：2013-03-20T09:57:42.480
> 
> 标签：.net, security

我很好奇是否有任何建议在源代码中存储一些敏感信息。从一开始就让我自己清楚，我**不是**在谈论用户密码、信用卡号码等；我说的是 API 访问密钥、客户端机密和其他此类数据，它们与应用程序的用户没有直接关系，而是与应用程序对各种组件或第三方服务进行身份验证（还要考虑数据库连接字符串） web.config 文件）。

我正在寻找的是一种方法，如果可能的话，最好在源文件（避免以某种方式对它们进行硬编码）和输出二进制文件中隐藏此敏感信息（通常是字符串）的纯文本出现。对于二进制文件，我知道有混淆的“解决方案”；然而，对于来源，我想不出一个简单的来源。理想情况下，该解决方案应尽可能对源代码控制友好，允许授权开发人员简单地检查代码并构建它而无需额外步骤。

如果您对此有任何建议，我非常愿意听取他们的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:01:21.273

您可以加密您的密钥并存储在 xml 中。

应用程序可以解密并使用它。

参考：

[在 .NET 中加密/解密字符串](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)

此外，您可以使用至少比纯文本更好的[编码。](https://stackoverflow.com/questions/7185834/encode-and-decode-in-c-sharp-asp-net)

参考：

[编码和解码](https://stackoverflow.com/questions/7185834/encode-and-decode-in-c-sharp-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:11:32.960

我最终选择的解决方案是将所有敏感字符串移动到**web.config**文件（或**app.config**）中，然后加密其中的敏感部分。然后我让操作系统和 ASP.NET 运行时来处理加密/解密。并不完美（毕竟您确实需要拥有保存明文数据的原始 app/web.config 文件 - 但至少它不必在生产机器上），但非常方便。

# java - 需要使用 Map 和 @MapKeyColumn 来了解 @oneToMany

> ID：15520313
> 
> 赞同：0
> 
> 时间：2013-03-20T09:57:53.463
> 
> 标签：java, jpa, jpa-2.0

这是我的sql表结构，

```
create table TBL_DEPARTMENT_ONE(
   ID integer primary key generated always as  identity  (start with 50, increment by 1),
   name varchar(100)
)

create table TBL_EMPLOYEE_THREE(
   ID integer primary key generated always as  identity  (start with 100, increment by 1),
   name varchar(100),
   dept_ID integer references  TBL_DEPARTMENT_ONE
) 
```

在这里，我们完成了员工和部门之间的一对多关系结构，其中许多员​​工可以属于一个部门，

现在，这里是 JPA 映射代码如下，对于员工，

```
@Entity
@Table(name="TBL_EMPLOYEE_THREE")
public class EmployeeEntityThree implements Serializable{
    public EmployeeEntityThree(){}

    public EmployeeEntityThree(String name,String mobileNo,DepartmentEntityOne dept){
       this.empName = name;
       this.department = dept;
       this.mobileNo = mobileNo;
    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="ID")
    private Integer employeeId;

    @Column(name="MOBILE_NO")
    private String mobileNo;

    @ManyToOne(cascade={CascadeType.PERSIST,
                        CascadeType.MERGE},
            fetch= FetchType.LAZY,targetEntity=DepartmentEntityOne.class) 
    @JoinColumn(name="DEPT_ID")
    private DepartmentEntityOne department;
    .....
    ...
} 
```

下面的代码是部门实体的代码，

```
@Entity
@Table(name="TBL_DEPARTMENT_ONE")
public class DepartmentEntityOne implements Serializable{
    public DepartmentEntityOne(){ }

    public DepartmentEntityOne(String name){
             this.deptName = name;
    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="ID")
    private Integer deptId;

    @Column(name="NAME")
    private String deptName;

    @OneToMany(cascade= {   CascadeType.MERGE, 
                                  CascadeType.PERSIST},
                   fetch= FetchType.LAZY,mappedBy="department")
    @MapKeyColumn(name="xxxxx")
    private Map<String,EmployeeEntityThree> employees;
    ...
    ..
} 
```

这是我的主要测试方法中的代码，

```
DepartmentEntityOne deptOne = new DepartmentEntityOne("Mechanical Engineering");
Map<String,EmployeeEntityThree> empMap = new HashMap<String,EmployeeEntityThree>();
EmployeeEntityThree[] array = new EmployeeEntityThree[]{
     new EmployeeEntityThree("Amar","9000000001",deptOne),
     new EmployeeEntityThree("Akbar","9000000002",deptOne),
     new EmployeeEntityThree("Anthony","9000000003",deptOne)
};
empMap.put(array[0].getMobileNo(),array[0]);
empMap.put(array[1].getMobileNo(),array[1]);
empMap.put(array[2].getMobileNo(),array[2]);
deptOne.setEmployees(empMap);
em = emf.createEntityManager();
em.persist(deptOne); 
```

该代码可以正常工作，所有插入都成功完成

现在我的问题是针对使用@MapKeyColumn(name="xxxx") 的实体部门，其中“xxxx”是一些垃圾值，这里应该是什么名称=？因为在此之前它是 name = "mobileNo"，它是 Employee 实体中的属性。这也奏效了。

那么 @MapKetColumn(name= ?) 的实际价值应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:00:45.170

您应该参考表格的`name`列`Employee`。

```
@MapKeyColumn(name="NAME")
private Map<String,EmployeeEntityThree> employees; 
```

# c# - 将 C# 泛型类型作为参数传递

> ID：15520317
> 
> 赞同：3
> 
> 时间：2013-03-20T09:58:02.120
> 
> 标签：c#, .net, json, generics

我有一个接口声明为

```
public interface ISomething<T> where T : class 
```

在接口的某个地方我有一个成员声明为

```
[JsonProperty("someProperty")]
[JsonConverter(typeof(ConcreteTypeConverter<List<T>>))]
List<T> SomePropertyList{ get; set; } 
```

我`ConcreteTypeConverter<List<T>>`说它不能使用类型 (T) 作为参数时出现错误。我的 ConcreteTypeConverter 类采用类型 T 并返回 JSON 反序列化所需的 T 的具体实现。这里的场景是 T 可以有大约 20 种不同的类型。但我想避免拥有 20 个这样的接口——这就是我选择的原因一个通用接口。

用法类似于

```
ISomething<SomeType> variable = new Something<SomeType>();
var list = variable.SomePropertyList; 
```

其中 SomeType 是 T 的实际实现。在这种情况下有没有办法使用泛型？

我的 ConcreteConverterClass 派生自 JsonConverter（使用 Newtonsoft.Json）：

```
public class ConcreteTypeConverter<TConcrete> : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return true;
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            serializer.Serialize(writer, value);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            return serializer.Deserialize<TConcrete>(reader);
        }
    } 
```

我的确切错误是：

```
Attribute Argument cannot use type parameters 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:07:21.353

您只需要`ConcreteTypeConverter`if`SomePropertyList`不是具体类型，例如

```
[JsonProperty("someProperty")]
[JsonConverter(typeof(ConcreteTypeConverter<List<T>>))]
IList<T> SomePropertyList{ get; set; } 
```

如果这不是问题，只需将您的属性声明更改为

```
[JsonProperty("someProperty")]
List<T> SomePropertyList{ get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:31:21.320

报价：

```
[JsonConverter(typeof(ConcreteTypeConverter<List<T>>))]
List<T> SomePropertyList{ get; set; } 
```

> 我在 ConcreteTypeConverter 上收到错误

由于泛型参数不能出现在属性声明中，我给你一个建议：

```
public class ConcreteTypeConverter : JsonConverter 
```

删除了`TConcrete`. 由于`ReadJson`返回一个对象，泛型的威力就消失了。

第二，

```
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
{
    return serializer.Deserialize<object>(reader);
} 
```

替换`TConcrete`为一个对象。如果这还不足以让您的代码正常工作，请尝试解决它。你的方法`object`无论如何都会返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:24:12.153

请在实现接口的类上应用该属性。

```
[JsonProperty("someProperty")]
[JsonConverter(typeof(ConcreteTypeConverter<List<T>>))] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-19T07:35:39.760

正如之前所说，泛型参数不能出现在属性声明中，我遇到了同样的问题，以前的建议不适合我，我需要一个可以像泛型一样工作的 SingleValueToCollectionConverter。反思帮助了我：

```
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)   
{
   foreach (var prop in objectType.GetProperties())
   {
      var type = prop.PropertyType;

      if (!type.IsClass)
          continue;

      var destination = Activator.CreateInstance(objectType);
      var result = reader.TokenType == JsonToken.StartArray 
            ? serializer.Deserialize(reader, objectType) 
            : new List<object> { serializer.Deserialize(reader, type) };

      return Mapper.Map(result, destination, result.GetType(), destination.GetType());
   }

      return null;
 } 
```

并像这样使用（如果数据将是json中的对象，它将被转换为列表）：

```
public class BaseResponse<TData>
{
    [JsonConverter(typeof(SingleValueToCollectionConverter))]
    public List<TData> Data { get; set; }
} 
```

我希望它可以帮助某人

# javascript - 正则表达式，用于将值增加到最后一个空格

> ID：15520321
> 
> 赞同：0
> 
> 时间：2013-03-20T09:58:16.653
> 
> 标签：javascript, jquery

我有一个字符串值，我想将其拆分并保留所有字符直到最后一个空格。

```
e.g var x="item1 item2 item3 *stopMarker" 
var y=someRegOpr(x); and y will contain only "item1 item2 item3" 
```

如何通过正则表达式做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T10:00:10.503

如果您[`lastIndexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)改用：

```
var x = "item1 item2 item3 *stopMarker";
x.substring(0, x.lastIndexOf(" "));  // "item1 item2 item3" 
```

* * *

**更新：**破解一个没有空格的单词：

```
var x = "item1";
x.substring(0, Math.max(0, x.lastIndexOf(" ")) || Infinity);  // "item1" 
```

* * *

**UPDATE2：**都一样使用正则表达式：

```
"item1 item2 item3 *stopMarker".split(/ [^ ]*$/).pop();  // "item1 item2 item3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:00:09.327

```
var x = "item1 item2 item3 *stopMarker";
var ans = x.match(/(.*)\s[^\s]*/); 
```

然后答案将存储在`ans[1]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:02:43.460

这应该得到你想要的：

```
'item1 item2 item3 *stopMarker'.split(/(.*)\s.*$/) 
```

将导致

```
["", "item1 item2 item3", ""] 
```

然后你只需要`""`手动过滤掉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T10:04:50.113

如果你想拆分字符串并获得一个没有 *stopMarker 的*数组*，那么这就是你想要的：

```
var x="item1 item2 item3 *stopMarker";
var y = x.split(" ");
y=y.splice(0, y.length-1); 
```

如果没有，只需使用 .lastIndexOf 解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T10:19:01.487

使用“跟随”表达式：

```
"item1 item2 item3 *stopMarker".match( /^.*(?=\s)/i )
>> ["item1 item2 item3"] 
```

# c# - Lucene 索引字节[]

> ID：15520323
> 
> 赞同：2
> 
> 时间：2013-03-20T09:58:18.283
> 
> 标签：c#, lucene.net

在我的应用程序中，我`byte[]`使用 Lucene 2.9 读取系统文件并对其进行索引，下面是代码

```
byte[] readByteContent = File.ReadAllBytes(@"G:\pass.txt");
doc.Add(new Field("FILECONTENT", readByteContent,0,
                  readByteContent.Length, Field.Store.YES));
writer.AddDocument(doc); 
```

现在我想搜索索引数据，但是因为我的数据被索引了`byte[]`，所以创建`byte[]`数据查询的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:17:41.260

二进制字段没有索引，因此您不能对这些字段发出查询。

您用于添加字段的方法将存储它，但它的内容没有被索引。它旨在将任意二进制数据与`Document`.

# redirect - Liferay-根据用户群登陆不同的社区

> ID：15520326
> 
> 赞同：1
> 
> 时间：2013-03-20T09:58:23.157
> 
> 标签：redirect, liferay

我的要求是我有一个 liferay 门户，它有两种类型的用户创建过程：

1.  由管理员手动创建
2.  用户可以通过创建帐户创建

我想根据用户组将用户登陆到不同的登陆页面。用户创建 process1 属于一个组，process2 属于另一个组。如何实现它。通过设置默认登陆路径，Process1 工作正常，但我想将由 process2 创建的用户登陆到不同的登陆页面。

提前致谢！！

问候，
S.Ponraj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:38:46.857

[查看此处](http://www.opensourceforlife.com/2012/07/custom-landing-page-using-hook-liferay.html)的页面以获取有关如何创建登录页面挂钩的信息。

您还需要一种方法来确定用户是来自流程 1 还是流程 2。一种可能的方法是使用 liferay 自定义字段 (expando)。

# livecode - 我可以在 LiveCode iOS 项目中包含库堆栈吗？

> ID：15520330
> 
> 赞同：2
> 
> 时间：2013-03-20T09:58:26.043
> 
> 标签：livecode

我有一个包含在项目中的库堆栈。该库不是主堆栈的子堆栈，但是否可以为 iOS 构建而不使其成为子堆栈？

```
start using stack "LC-Library"
LC_LIB_generate 30, true 
```

我尝试在“独立应用程序设置”中使用“堆栈”和“复制文件”窗格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:05:24.927

您可以将其包含为子堆栈或尝试使用完整路径。“复制文件”窗格中包含的文件放置在引擎文件夹中，可以使用以下方式访问：

特殊文件夹路径（“引擎”）

# javascript - 访问每个 iframe 子项

> ID：15520335
> 
> 赞同：0
> 
> 时间：2013-03-20T09:58:40.213
> 
> 标签：javascript, iframe, children

我正在与一个客户项目合作，该客户项目正在与其他人内部的大量 iframe 合作。问题是我想从绝对父文档自动在所有 iframe 中添加一个 addEventListener，示例架构是这样的：

```
Document: iframe1, iframe2
Iframe1: iframe1.1, iframe1.2
Iframe1.1: iframe.1.1.1, iframe 1.1.2 
```

我想模拟这样的事情：

```
iframes[i].contentWindow.document.getElementsByTagName('iframe')[0].contentWindow.document.getElementsByTagName('iframe')[i] 
```

我写了这段代码，但我有一个“未定义”的错误：

```
 window.onload=function(){
    eventoIframe(document,null,1);
}

var eventoIframe=function(target,prev_target,lvl){
    console.log('Ejecuto funcion por '+lvl+' vez');
    var iframes=target.getElementsByTagName('iframe');
    if(lvl>2){
        var iframes=prev_target.target.getElementsByTagName('iframe');
    }
    if(iframes.length>0){
        for(var i=0;i<=iframes.length-1;i++){
            var iframe=iframes[i].contentWindow;
            iframe.addEventListener("click",function(event){
                console.log('click on:', event.target)
            },false);

            eventoIframe(iframe.document,target,lvl+1);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:23:49.373

好吧，我发现错误了，不知道为什么我想知道prev目标嘿嘿解决方法是

```
window.onload=function(){
    eventoIframe(document);
}

var eventoIframe=function(target){
    var iframes=target.getElementsByTagName('iframe');

    if(iframes.length>0){
        for(var i=0;i<=iframes.length-1;i++){
            var iframe=iframes[i].contentWindow;
            iframe.addEventListener("click",function(event){
                //code to be execute on each iframe
            },false);
            eventoIframe(iframe.document);
        }
    }

} 
```

# shell - 如何从shell脚本中的变量中删除回车

> ID：15520339
> 
> 赞同：49
> 
> 时间：2013-03-20T09:58:52.197
> 
> 标签：shell, unix

我是 shell 脚本的新手。`source`我正在使用该命令获取一个文件，该文件是在 Windows 中创建并具有回车符。在我添加一些字符后，它总是出现在行首。

`test.dat`（最后有回车）：

```
testVar=value123 
```

`testScript.sh`（以上文件来源）：

```
source test.dat
echo $testVar got it 
```

我得到的输出是

```
got it23 
```

如何`'\r'`从变量中删除？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-20T10:42:32.443

另一个解决方案使用`tr`：

```
echo $testVar | tr -d '\r'
cat myscript | tr -d '\r' 
```

该选项`-d`代表`delete`。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-20T10:06:12.370

您可以按如下方式使用 sed：

```
MY_NEW_VAR=$(echo $testVar | sed -e 's/\r//g')
echo ${MY_NEW_VAR} got it 
```

顺便说一句，试着`dos2unix`对你的数据文件做一个。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-08-03T14:39:29.200

由于您获取的文件以回车符结尾，其内容`$testVar`可能如下所示：

```
$ printf '%q\n' "$testVar"
$'value123\r' 
```

（第一行`$`是 shell 提示符；第二行`$`来自`%q`格式化字符串，表示[`$''`引用](https://www.gnu.org/software/bash/manual/bash.html#ANSI_002dC-Quoting)。）

要摆脱回车，您可以使用[shell 参数扩展](https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)和[ANSI-C 引用](https://www.gnu.org/software/bash/manual/bash.html#ANSI_002dC-Quoting)（需要 Bash）：

```
testVar=${testVar//$'\r'} 
```

这应该导致

```
$ printf '%q\n' "$testVar"
value123 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-20T10:01:22.650

将脚本文件复制到 Linux/Unix 后在脚本文件上使用此命令

```
perl -pi -e 's/\r//' scriptfilename 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-08-29T13:21:48.643

管道以从每个文本行`sed -e 's/[\r\n]//g'`中删除回车符 ( `\r`) 和换行符 ( )。`\n`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-27T22:59:22.743

对于无需调用外部程序的纯 shell 解决方案：

```
NL=$'\n'    # define a variable to reference 'newline'

testVar=${testVar%$NL}    # removes trailing 'NL' from string 
```

# java - 使用正则表达式获取 jsessionid

> ID：15520344
> 
> 赞同：0
> 
> 时间：2013-03-20T09:59:08.400
> 
> 标签：java, regex

我必须从 url 而不是 jsessionid 字符串中获取 jsessionid 代码。可以匹配某些东西并排除它吗？

[https://esgf-data.dkrz.de/esgf-idp/idp/login.htm;jsessionid=436100313FAFBBB9B4DC8BA3C2EC267B](https://esgf-data.dkrz.de/esgf-idp/idp/login.htm;jsessionid=436100313FAFBBB9B4DC8BA3C2EC267B)

```
Result = 436100313FAFBBB9B4DC8BA3C2EC267B 
```

从评论中添加的代码：

```
Pattern pattern = Pattern.compile("/jsessionid=([a-z0-9]+)/i"); 
Matcher matcher=pattern.matcher(connection.getURL().toExternalForm()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:41:49.003

试试这个：

```
 String data = "https://esgf-data.dkrz.de/esgf-idp/idp/login.htm;jsessionid=436100313FAFBBB9B4DC8BA3C2EC267B";
    Pattern pattern = Pattern.compile("jsessionid=(\\w+)");
    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {
        System.out.println("Result is : " + matcher.group(1));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T01:25:31.110

如果您的 JSESSIONID 末尾有一个路由标识符[1](http://tomcat.apache.org/connectors-doc/reference/workers.html) [2](http://tomcat.apache.org/tomcat-6.0-doc/config/engine.html) ，请注意，这些前面的正则表达式可能会失败。我发现这也会选择路由表达式（[Regex101](http://regex101.com/r/iB5cW9/2)）。

```
^([A-F0-9]+)((\.[A-Za-z0-9]+)*)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:01:27.040

`/=([A-Z0-9]+)/`将获取等号后的所有大写字母和数字`=`并将它们移动到反向引用#1

```
$subject = 'https://esgf-data.dkrz.de/esgf-idp/idp/login.htm;jsessionid=436100313FAFBBB9B4DC8BA3C2EC267B';
if (preg_match('/=([A-Z0-9]+)/', $subject, $regs)) {
    $result = $regs[1];
} else {
    $result = "";
} 
```

# mysql - 使用临时表不起作用 - MYSQL

> ID：15520354
> 
> 赞同：0
> 
> 时间：2013-03-20T09:59:40.893
> 
> 标签：mysql, sql, select

我的目标是优化按单词相关性排序的选择查询，

而不是搜索整个数据库两次，我在这里做了这个查询。

```
$query = "SELECT * INTO #TEMP_TABLE " .
                     "FROM cron_video ".
                     "where id LIKE '%" . $searchString . "%' " .
                     "union all " .
                     "SELECT * " .
                     "FROM #TEMP_TABLE ".
                     "WHERE id LIKE '". $searchString . "%' " ; 
```

但它给出了错误

> SQL 错误 1：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:03:59.640

在运行查询之前使用 CREATE TEMPORARY TABLE（定义适合您需要的结构）。

此外，为了保持一致性，仅使用 a-zA-Z_- 命名您的表。

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

另外，请将您的查询作为一个整体提供 MySQL，包括换行符，将来调试会更容易，即“第 6 行错误”，而不是“第 1 行错误”（因为总是只有被馈送到mysql的一条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:04:51.060

在运行时创建的临时表......所以写

`CREATE TEMPORARY TABLE`...语法， `INSERT INTO`因此...

从[`MySQL manual`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

> 创建表时可以使用 TEMPORARY 关键字。TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除。这意味着两个不同的

例如。

```
CREATE TEMPORARY TABLE tmp_film (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
`name` VARCHAR(50),
`last_updated_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(`id`)
)ENGINE=HEAP DEFAULT CHARSET=latin1;

INSERT INTO tmp_film(`name`) VALUES ('Keshav');

SELECT * FROM tmp_film; 
```

# jquery - 来自 USGS geojson 数据的 jqGrid

> ID：15520356
> 
> 赞同：2
> 
> 时间：2013-03-20T09:59:53.617
> 
> 标签：jquery, jqgrid, jsonp, geojson, jsonreader

我正在尝试在 jqGrid 中阅读并发布从 USGS 存储库中提取的一组地震 GeoJSON 数据。请求被接受，但在可能满足标头元数据时显示“Uncaught SyntaxError: Unexpected token”。

```
$(function () {
    'use strict';
    $.extend($.jgrid.search, {multipleSearch: true, multipleGroup: true, overlay: 0});
    $('#grid').jqGrid({
        url: 'http://earthquake.usgs.gov/earthquakes/feed/geojson/2.5/week?callback=?',
        datatype: 'json',
        colModel: [
            {name: 'mag', label: 'MAGNITUDO', width: 150, jsonmap: 'properties.mag', sorttype: 'number',
formatter: 'number', formatoptions: {decimalPlaces: 2}},
            {name: 'place', label: 'LOCALITA', width: 150, jsonmap: 'properties.place'},
            {name: 'url', label: 'URL', width: 150, jsonmap: 'properties.url'}
        ],
        toppager: true,
        gridview: true,
        rowList: [10, 20, 50, 10000],
        rowNum: 10,
        jsonReader: {
            root: 'features',
            repeatitems: false
        },
        loadonce: true,
        ignoreCase: true,
        height: 'auto'
    }).jqGrid('navGrid', '#grid_toppager', {add: false, edit: false, del: false})
      .jqGrid('filterToolbar', {stringResult: true, defaultSearch: 'cn', searchOnEnter: false});
    $("#grid_toppager option[value=10000]").text('All');
}); 
```

你有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:56:58.170

我查看了 geojson 的文档，我想我找到了问题的原因。似乎 GeoJSON(P)`eqfeed_callback`用作回调名称（请参见[此处](http://earthquake.usgs.gov/earthquakes/feed/)）。因此，我修复了一些 jqGrid 选项，这些选项用于以下内容：

```
url: 'http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week',
datatype: 'jsonp',
postData: '',
ajaxGridOptions: { jsonp: false, jsonpCallback: 'eqfeed_callback', cache: true}, 
```

[修改后的演示](http://www.ok-soft-gmbh.com/jqGrid/user2190221.htm)现在可以工作并显示如下结果

![在此处输入图像描述](../Images/06f68a4cd83f1a858f6d09449f248dd0.png)

**更新：** [修改后的演示](http://www.ok-soft-gmbh.com/jqGrid/OK/user2190221_.htm)使用 GeoJSON 的新 URL 和[免费 jqGrid](https://github.com/free-jqgrid/jqGrid)的新版本（4.14.1） 。

# extjs - ExtJs 4.2.0.663 使用 Searchfield 导致异常“PageMap 要求提供它没有的范围”

> ID：15520360
> 
> 赞同：5
> 
> 时间：2013-03-20T10:00:01.733
> 
> 标签：extjs, extjs4.2

因为 ExtJS 4.2 在缓冲网格（无限网格）上使用过滤器似乎有一个错误，所以我重写了我的代码，现在我只是使用一个简单的搜索字段让用户搜索整个网格的数据。只要找到某些东西，它就可以完美运行，但是如果没有找到任何东西，则 ext 会崩溃，但“页面地图要求提供它没有的范围”除外

我的javascript“包括”

```
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/Filter.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/BooleanFilter.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/DateFilter.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/ListFilter.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/NumericFilter.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/filter/StringFilter.js"></script>

<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/menu/ListMenu.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/menu/RangeMenu.js"></script>

<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/FiltersFeature.js"></script>
<script type="text/javascript" src="/js/ext-4.2.0.663/examples/ux/grid/TransformGrid.js"></script>

<script type="text/javascript" src="/ASDB4/js/ext-4.2.0.663/examples/ux/form/SearchField.js"></script> 
```

我的商店：

```
this._store = Ext.create('Ext.data.Store', {
     storeId: 'ActivityLogStore',
     model: 'ActivityLogModel',
     remoteGroup: true,
     autoDestroy: true,
     buffered: true,
     remoteSort: true,
     leadingBufferZone: 300,
     pageSize: 100,
     autoLoad: true,
     proxy: {
         type: 'ajax',
         url: '~myurl~',
         reader: {
             root: 'data[0].sActivityLogsArr',
             totalProperty: 'data[0].totalcount'
         },
         simpleSortMode: true,
         simpleGroupMode: true,
         groupParam: 'sort',
         groupDirectionParam: 'dir',
         filterParam: 'searchString',
         encodeFilters: function (filters) {
             return filters[0].value;
         }
     },
     listeners: {

         // This particular service cannot sort on more than one field, so if grouped, disable sorting
         groupchange: function (store, groupers) {
             var sortable = !store.isGrouped(),
                 headers = grid.headerCt.getVisibleGridColumns(),
                 i, len = headers.length;

             for (i = 0; i < len; i++) {
                 headers[i].sortable = (headers[i].sortable !== undefined) ? headers[i].sortable : sortable;
             }
         },

         beforeload: function () {
             // remove any selections - otherwise store loading crashes (another bug in extjs ...?)
             Ext.getCmp('activityLogmanagergrid').getSelectionModel().clearSelections();
         },

         // This particular service cannot sort on more than one field, so if grouped, disable sorting
         beforeprefetch: function (store, operation) {
             if (operation.groupers && operation.groupers.length) {
                 delete operation.sorters;
             }
         },

         load: function () {
             Ext.getCmp('activityLogmanagergrid').verticalScroller.scrollTo(0);
         }
     }
 }); 
```

我的搜索栏，位于工具栏：

```
 this._moduleToolbar = {
     xtype: 'toolbar',
     itemId: 'activityLogmanagerToolbar',
     items: [{
             iconCls: 'icon-arrow_refresh',
             text: '@menu_reload@',
             itemId: 'btnReload',
             scope: this,
             handler: function () {
                 // reset list display to top to avoid corrupted display
                 Ext.getCmp('activityLogmanagergrid').store.load();
             }
         }, {
             iconCls: 'icon-cross',
             text: '@menu_deleteAllActivityLog@',
             itemId: 'btnDeleteAll',
             scope: this,
             handler: this.DeleteAllActivityLog
         }, '->', {
             width: 300,
             fieldLabel: 'Search',
             labelWidth: 50,
             xtype: 'searchfield',
             store: scope._store
         }
     ]
 }; 
```

请帮忙 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T07:06:10.327

我也有这个问题。我发布到他们的论坛（和其他人一样）并打开了一张支持票。他们没有为 Ext JS 4.2 提出解决方案，但该错误（以及缓冲存储中的许多其他错误）在 4.2.1 版本中得到了修复。我认为那里几乎重建了大部分代码，所以他们没有选择对 4.2 进行廉价修补程序。

在我可以迁移到 4.2.1 之前，我用 try-catch 块包装了我所有的 find-record-calls。我还尝试在第 3383 行覆盖 Store.js 中的 getRange 函数，但它属于内部 PageMap 类，所以这是没有选择的。

# postgresql - 关系的权限被拒绝

> ID：15520361
> 
> 赞同：400
> 
> 时间：2013-03-20T10:00:06.543
> 
> 标签：postgresql, privileges, postgresql-9.2, grant

我尝试运行简单的 SQL 命令：

```
select * from site_adzone; 
```

我得到了这个错误

> 错误：关系 site_adzone 的权限被拒绝

这里可能是什么问题？

我也尝试为其他表做选择并遇到同样的问题。我也尝试过这样做：

```
GRANT ALL PRIVILEGES ON DATABASE jerry to tom; 
```

但我从控制台得到了这个回复

> 警告：没有授予“杰瑞”特权

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：486
> 
> 时间：2013-03-20T11:41:55.033

数据库上的 GRANT 不是您所需要的。直接授予表。

授予数据库权限主要用于授予或撤销连接权限。如果他们有足够的其他权限，这允许您指定谁可以在数据库中执行操作。

你想要：

```
 GRANT ALL PRIVILEGES ON TABLE side_adzone TO jerry; 
```

这将解决这个问题。

* * *

## 回答 #2

> 赞同：312
> 
> 时间：2016-05-23T11:22:31.163

发布 Ron E 对所有表授予权限的答案，因为它可能对其他人有用。

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO jerry; 
```

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2017-01-01T20:00:43.320

**首先连接到正确的数据库**，然后运行：

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO jerry; 
```

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2018-07-18T10:36:59.030

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public to jerry;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public to jerry;
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public to jerry; 
```

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2018-05-02T13:05:26.103

第一步也是**重要的**一步是连接到您的数据库：

```
psql -d yourDBName 
```

2步，授予权限

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO userName; 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2017-10-09T18:31:03.973

要授予架构中所有现有表的权限，请使用：

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA <schema> TO <role> 
```

要指定将应用于未来表的默认权限，请使用：

```
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema> 
  GRANT <privileges> ON TABLES TO <role>; 
```

例如

```
ALTER DEFAULT PRIVILEGES IN SCHEMA public 
  GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO admin; 
```

如果您使用`SERIAL`or`BIGSERIAL`列，那么您可能希望对 执行相同的操作`SEQUENCES`，否则您`INSERT`将失败（[Postgres 10`IDENTITY`](https://blog.2ndquadrant.com/postgresql-10-identity-columns/)不会遇到该问题，并且建议使用`SERIAL`类型），即

```
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema> GRANT ALL ON SEQUENCES TO <role>; 
```

另请参阅我对[PostgreSQL Permissions for Web App](https://stackoverflow.com/a/47955583/968244)的回答，了解更多详细信息和可重用脚本。

参考：

[授予](https://www.postgresql.org/docs/current/static/sql-grant.html)

[更改默认权限](https://www.postgresql.org/docs/current/static/sql-alterdefaultprivileges.html)

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-05-22T04:13:49.880

当您以用户 postgres 创建表，然后尝试以普通用户身份访问它时，经常会发生这种情况。在这种情况下，最好以 postgres 用户身份登录并使用以下命令更改表的所有权：

```
alter table <TABLE> owner to <USER>; 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-05-15T17:30:02.183

确保您以表的所有者身份登录 psql。找出谁拥有桌子使用`\dt`

`psql -h CONNECTION_STRING DBNAME -U OWNER_OF_THE_TABLES`

然后你可以运行 GRANTS

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-19T08:03:55.033

你应该：

1.  使用 postgres 用户通过 DBeaver 连接到数据库
2.  在左侧选项卡上打开您的数据库
3.  打开角色选项卡/下拉列表
4.  选择您的用户
5.  在右侧选项卡上按“权限选项卡”
6.  按您的架构选项卡
7.  按表格选项卡/下拉列表
8.  选择所有表
9.  选择所有必需的权限复选框（或按全部授予）
10.  按保存

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-08T15:33:45.903

当您正在寻找选择权限时，我建议您仅授予选择权限而不是所有权限。您可以通过以下方式做到这一点：

```
GRANT SELECT ON <table> TO <role>; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-20T19:02:27.823

在将用户切换到另一个也需要具有相同权限的用户后，我遇到了这个问题，我一直收到错误：“必须是关系 xx 的所有者”

解决方法是简单地将旧用户的所有权利授予新用户：

`postgres-# Grant <old user> to <new user>;`

# sockets - 当其中一个数据包被丢弃时，TCP 协议将如何延迟数据包传输？

> ID：15520366
> 
> 赞同：2
> 
> 时间：2013-03-20T10:00:15.437
> 
> 标签：sockets, tcp

如果客户端套接字发送：

1.  数据包 A - 丢弃
2.  数据包 B
3.  数据包 C

服务器套接字是否会接收 B 和 C 并将其排队，然后当接收到 A 时，B 和 C 将立即传递给服务器应用程序？或者B和C也会被怨恨？或者在 A 交付之前根本不会发送任何数据包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:57:43.967

TCP 是一种复杂的协议，它会根据当前的网络状态更改许多参数，有关该主题的书籍有很多。回答您的问题的最清楚的方法是说 TCP 通常保持给定的发送“窗口”大小（以字节为单位）。这是在成功返回之前发送的确认之前将发送的数据量。

在旧的 TCP 规范中，在该窗口内丢弃的数据包将导致从丢弃的数据包开始重新发送完整的数据。为了解决这个显然有点浪费的问题，TCP 现在采用了选择性确认 (SACK) 选项 ( [RFC 2018](https://www.rfc-editor.org/rfc/rfc2018) )。这将导致仅重新发送丢失/损坏的数据包。

回到您的示例，假设窗口大小足以包含所有三个数据包，并且假设您正在利用最新的 TCP 标准（不明白为什么不这样做），如果数据包 A 被丢弃，只有数据包 A 会怨恨。如果所有数据包都单独大于窗口，则必须按顺序发送和确认数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:10:32.880

这取决于延迟。一般来说，第一个 A 是重新发送的。如果客户端得到它并且已经有了 B 和 C，它也可以确认它们。

如果这种情况发生得足够快，B 和 C 就不会被怨恨，或者可能只有 B。

# ajax - 将一系列同步的AJAX请求转换为异步请求

> ID：15520367
> 
> 赞同：1
> 
> 时间：2013-03-20T10:00:18.377
> 
> 标签：ajax, jquery

如何在异步而不是同步的函数中发出第二个 AJAX 请求？ `result`是一个应该以“字符串开始”开头并以“字符串结尾”结尾的字符串，但在字符串的中间将是正在迭代的初始 AJAX 请求的结果。

```
Foo = {
    foo: function() {
        $(document).on("change", '.foo', function(e) {
            e.preventDefault();
            $.ajax({
                url: "foo.php",
                success: function(rows) {
                    $.each(rows, function() {
                        var result = 'start of string'; // START
                        $.ajax({
                            url: "bar",
                            async: false, // I DON'T want this
                            success: function(data) {
                                result += data; // MIDDLE
                            }
                        });
                        result += 'end of string'; // END
                    });
                }
            });
        });
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:08:06.263

您可以利用 jquery 延迟对象。您可以在不同的函数中有两个不同的 ajax 调用，然后您可以使用 .done() 方法确保在两个 ajax 调用都完成后获得最终字符串。

在这里阅读更多：

*   [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)
*   [http://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T00:47:03.177

在 jquery 中，链接一个接一个地执行的异步调用的方法是 using `promise.then()`，这`promise.pipe()`在以前的 jquery 版本中也被调用过。

```
Foo = {
    foo: function() {
        $(document).on("change", '.foo', function(e) {
            e.preventDefault();

            var param1 = {url: "foo.php"};
            var param1 = {url: "bar"};

            $.ajax(param1)
               .then(function(rows) {
                    var result = 'start of string'; //START
                    var fn = function(data) {
                       result += data;
                    }
                    var last, first;
                    $.each(rows, function() { // rows should be iterable
                        if (!last) { 
                           first = last = $.ajax(param2).done(fn)
                        } else {
                           last = last.then(function(res) {
                              return $.ajax(param2).done(fn);
                           });
                        }
                    });
                    last.done(fn).done(function() {
                       result += 'end of string'; // END
                    });
                    return first;
               });
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T10:35:50.210

最简单的方法确实是使用延迟对象，例如使用 jQuery`when`和`done`延迟语句的 JavaScript 示例；

```
$.when(ajaxCallOne()).done(ajaxCallTwo(rows));

function ajaxCallOne() {
    return $.ajax({
                url : "foo.php",
                async: true
            });
}

function ajaxCallTwo(rows) {
    var result = 'start of string';
    $.each(rows, function() {
        $.ajax({
            url : "bar",
            async : true,
            success : function(data) {
                result += data; // MIDDLE
            }
        });
        result += 'end of string'; // END
    });

    return result;
} 
```

我不是 JavaScript 或 jQuery 专家，但我认为你应该看看那些延迟对象。

*   [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)
*   [http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T10:58:37.920

我认为你应该看看`javascript promise design pattern`

让我向你解释一下：

> 这个promise是一种代理，代表了操作的未来结果。然后，您将在 Promise 上注册一个回调，一旦操作完成并且结果可用，该回调将由 Promise 执行。

使用 jQuery，您可以像这样定义 Promise：

```
var promise = $.getJSON('url'); 
```

然后使用你的 promise 变量，你可以定义当你的请求完成或失败时要做什么，甚至可以在它失败或成功的情况下执行一些功能。

```
promise.done(function(s) {alert('done successfully'); });
promise.fail(function(){ alert('get failed!'); });
promise.always(function(){ alert('this 'll executed anyway!'); }); 
```

有很多关于它的教程

[jQuery 中的 Promise 和 Deferred 对象](http://www.javacodegeeks.com/2013/03/promises-and-deferred-objects-in-jquery-and-angularjs.html)

[jQuery：延迟对象](http://api.jquery.com/category/deferred-object/)

[javascript 承诺](http://blog.thepete.net/blog/2011/07/02/javascript-promises/)

[CommonJS 中的“承诺”抽象有什么好处？](https://stackoverflow.com/questions/2160100/what-is-the-benefit-of-a-promise-abstraction-in-commonjs)

# mysql - 过去 3 个查询的 MySQL 数据回滚

> ID：15520368
> 
> 赞同：0
> 
> 时间：2013-03-20T10:00:19.743
> 
> 标签：mysql, sql, backup, recovery

我刚刚删除了公司的表，并意识到我所做的 SQL 备份是针对 STRUCTURE 而不是 DATA。我需要立即恢复数据....有没有办法做到这一点？我正在使用 PHPMyAdmin，到目前为止我所做的只是

`DROP TABLE USEFUL_TABLE` AND `CREATE TABLE IF NOT EXISTS USEFUL_TABLE` AND （​​绝望中） `ROLLBACK`

有没有办法找回数据记录？

## 编辑

感谢您的评论，感谢上帝，我在某个地方找到了一个可以恢复的模糊备份！正如对像我这样草率和粗心的人的提示一样，在进行任何备份/导出操作之前，**请始终确保** `Dump all rows`在导出数据以进行备份时选择了该选项。我没有，我什至没有检查以确认 SQL 是否已转储行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:14:41.990

DDL 命令不能在 MySQL 中回滚。您需要从备份中恢复。

如果您需要恢复自上次备份以来提交的数据，请使用二进制日志执行[时间点恢复。](http://dev.mysql.com/doc/refman/5.5/en/point-in-time-recovery.html)但这取决于启用二进制日志记录，以及自上次完整备份之日起拥有一组连续的二进制日志。

# xml - swf 未加载更新的 xml 数据

> ID：15520371
> 
> 赞同：0
> 
> 时间：2013-03-20T10:00:21.550
> 
> 标签：xml, flash

我有几个使用 AS 1/2 根据 xml 数据为状态图着色的 swf。这工作了几年，但现在 xml 文件已更新。swfs 不会加载新信息。就像他们曾经做过一次，现在已经一成不变了。我已经搜索了一周并尝试了几个缓存破坏者，但没有一个奏效。我尝试过的大多数事情都是基于向 xml 加载语句添加日期/时间戳。这些要么没有效果，要么破坏了应用程序。这是代码：

```
var dp = new Array();
dp_xml = new XML();
dp_xml.ignoreWhite = true;
dp_xml.load('dplaws.xml');
dp_xml.onLoad = function(sucess) {
        if (sucess) {
                parseFile(dp_xml);
                showArray();
        }
};

function Map(state, category, qid, question, response) {
        this.state = state;
        this.category = category;
        this.qid = qid;
        this.question = question;
        this.response = response;

        if((substring(response,1,3)=="Yes") && (qid == "b")) {
            myColor = new Color(state);
            myColor.setRGB(0xA2B5CD);
        } else if((substring(response,1,3)!="Yes") && (qid == "b")) {
            myColor = new Color(state);
            myColor.setRGB(0xcccccc);
        }
}

function parseFile(xmlDoc_xml) {
        temp = new Array();
        for (var a = 0; a<xmlDoc_xml.firstChild.childNodes.length; a++) {
                for (var b = 0; b<xmlDoc_xml.firstChild.firstChild.childNodes.length; b++) {
                        temp[b] = xmlDoc_xml.firstChild.childNodes[a].childNodes[b].firstChild.nodeValue;
                }
                n = new Map(temp[0], temp[1], temp[2], temp[3], temp[4]);
                dp.push(n);
        }
}

function showArray(){
for (var z = 0; z<dp.length; z++) {
        trace(dp[z].state);
        trace(dp[z].category);
        trace(dp[z].question);
        trace(dp[z].response);
        trace(dp[z].qid);
}
} 
```

谢谢你的帮助，黛比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:26:02.603

你需要知道三件事。

首先，您需要确保加载最新版本的 SWF 文件以引用新的 xml。只需更改文件名或在 swf 扩展名的末尾添加缓存破坏器查询，例如*map.swf?vers=2*。

其次，您需要检查 Flash 文件是否实际检索到已更新的正确且新的 XML 文件。

最后，我知道这听起来很傻，但在浏览器中打开 XML 文件并确认它是正确的。例如，直接查看它，例如*www.mydomain.com/dplaws.xml*。我遇到了很多服务器上的文件不是最新的或服务器本身正在缓存文件的情况。至少对于后者，您可以将其隔离为服务器的问题。

直接检查 XML 文件，例如*www.mydomain.com/dplaws.xml*并添加一个查询以结束，例如此处（可以是任何内容）*www.mydomain.com/dplaws.xml?cache=test9393*。附加查询后，它应该从服务器获取最新版本。

现在，一旦确认上述内容，请使用 Chrome 并打开[Developer Tools](https://developers.google.com/chrome-developer-tools/docs/overview)。转到[网络选项卡](https://developers.google.com/chrome-developer-tools/docs/network)并检查您的闪存是否使用最新版本。您可以看到，一旦 SWF 已加载，接下来的查询之一应该是 XML 文件。查看它是否引用了新的 XML 并附加了缓存破坏器查询。

当我按照上述步骤操作时，它通常对我有用。我希望它也能帮助你。

# android - 如何让安卓应用兼容多屏（不同尺寸和不同分辨率）

> ID：15520372
> 
> 赞同：2
> 
> 时间：2013-03-20T10:00:23.537
> 
> 标签：android, performance, android-layout, android-widget, android-resources

我正在开发一个**仅纵向视图**的 Android 应用程序。这适用于所有 android 版本（版本 2.2 到 4.2）中的 320 * 480 分辨率。

现在我也想支持这个应用程序的以下分辨率：

1.  960x540
2.  480x800
3.  1280x720

支持我的多屏幕应用程序的最佳方法是什么。

我有 3 种类型的图像：1x、1.5x 和 2x。

在 320 * 480 分辨率下，我使用 1x 图像。

我进行了很多搜索，但仍然不清楚哪种方法是**最好和正确的方法。**

我有几个选择：

1.  为每个分辨率使用**单个布局**（在 res/layout 下）和**单独**的可绘制对象（在 res/drawable-mdpi、res/drawable-hdpi 和 res/drawable-xhdpi 下）。
2.  为每个分辨率使用**单独的布局**（在 res/layout、res/layout-large 和 res/layout-xlarge 下）和**单独**的可绘制对象（在 res/drawable-mdpi、res/drawable-hdpi 和 res/drawable-xhdpi 下）。

或任何其他在支持多个屏幕时应始终使用的最佳方法。

Onr 更多问题：当我使用上述任何一种方法时，**我的更改不会出现在 hdpi 和 xhdpi 屏幕上。**

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:01:36.480

没有唯一正确的方法，我相信这个决定取决于您的应用程序。

在具有干净布局的应用程序中，我创建了一个独特的 xml_layout，并使用[android:layout_weight](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_weight)将元素分布在屏幕上。因此，在所有不同的屏幕分辨率下，我在可用空间上得到了类似的元素分布。

否则，当布局比较复杂时，需要创建不同的布局来支持不同的屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:08:52.617

最佳选项是 2，它是 Android 标准，推荐的资源提供方式。而且我认为您的问题是由于您没有指定正确的类型。对于布局替代方案，您还可以使用：

布局-h720dp

布局土地

布局-sw600dp

布局-sw600dp-土地

布局-sw720dp

布局-w720dp

请参考[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# java - 雨云作为默认值

> ID：15520374
> 
> 赞同：0
> 
> 时间：2013-03-20T10:00:27.283
> 
> 标签：java, netbeans-7, nimbus

我正在使用 java 7 update 17 和 netBeans IDE 7.3 我会将 nimbus 设置为每个 GUI 项目的默认值，但 oracle 网站指令不起作用。

> 如何为每个项目默认设置 nimbus？

我手动编写代码而不使用调色板或拖放。

并且此指令不起作用[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:46:52.987

以下在 main 开始时调用

```
try {
    for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        System.out.println("LAF: " + info.getName());
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            //break;
        }
    }
} catch (ClassNotFoundException | InstantiationException
    | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
    Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
} 
```

给了

```
LAF: Metal
LAF: Nimbus
LAF: CDE/Motif
LAF: Windows
LAF: Windows Classic 
```

它是从 NetBeans 中生成的 JFrame 表单的主代码中复制而来的。

在那之后

```
 EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            mainFrame.setVisible(true);
        }
    }); 
```

我想它一定是出了差错。

也许您有一些命令行选项、系统 java 设置、已经选择了 LAF 并“扩展”了 Nimbus（塑料左右）？

# php - Wordpress 图库显示附加到帖子/页面的所有图像

> ID：15520377
> 
> 赞同：0
> 
> 时间：2013-03-20T10:00:32.063
> 
> 标签：php, wordpress, gallery

在我看来，Wordpress 画廊有一种奇怪的工作方式。我解释：

*   Wordpress 图库仅在帖子中显示当前帖子中已上传的图像。如果您在图库中添加已经在媒体库中的图像，它将不会显示！

*   创建图库后，如果我从图库中删除图像，无论如何都会显示

*   画廊显示附加到帖子的所有图像（还包括缩略图和嵌入图像），尽管这些图像不包含在画廊中

我会把这一切都称为错误。

问题：**是否可以在帖子中仅显示图库中包含的图像（上传的图像和已经在媒体库中的图像）？**

**注意**：不使用简码`[gallery exclude="..."]`也不直接从媒体库上传图片？

PS 要在帖子中显示画廊，我正在使用此脚本：

```
<ul>
<?php $images = get_children('post_type=attachment&post_mime_type=image&post_parent=' . $post->ID . '&orderby=menu_order&order=ASC');
foreach( $images as $img_id => $img_r ) :
     $thumb = wp_get_attachment_image_src( $img_id, 'thumb', true );
     $full = wp_get_attachment_image_src( $img_id, 'full', true ); ?>
     <li>
        <a href="<?php echo $full[0] ?>">
             <img src="<?php echo $thumb[0] ?>" alt="<?php echo get_the_title( $img_id ) ?>" title="<?php echo get_the_title( $img_id ) ?>">
        </a>
     </li>

<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T04:55:37.813

这不是错误，这就是画廊的工作方式。它只会显示附加到帖子的图像，如果您想将已上传的图像添加到图库，则需要从“媒体”菜单将图像附加到帖子。

您可以使用图库短代码来显示图像，或者您可以使用[http://www.wpcodesnipps.com/display-images-attached-post/](http://www.wpcodesnipps.com/display-images-attached-post/)上的代码来显示图像。

# c# - 类对象的内存分配

> ID：15520378
> 
> 赞同：8
> 
> 时间：2013-03-20T10:00:36.723
> 
> 标签：c#, asp.net, class, memory, allocation

我在采访中被问到这个问题。请帮我找到答案。

假设您有一个 Employee 类。其中有 2 个变量 - 1\. String Name 2\. Int Age

现在，`Employee emp = new Employee();`

现在提出的问题是：

1.  对象 emp 存储在内存中的位置，即堆栈或堆中以及如何存储？
2.  name 和 age 变量存储在内存中的位置又如何？
3.  该语句中的每个单词是做什么的，即employee 做什么..then emp..then =.. then new.. then employee.. then ()..then ;
4.  上面的语句和Employee emp有什么区别；? 告诉内存分配。？

请回复您的宝贵意见。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-20T15:19:03.773

> 1.  对象 emp 存储在内存中的位置，即堆栈或堆中以及如何存储？

这个问题措辞不好。`emp`不是*对象*；`emp`是一个包含对对象*的引用的**变量*。

 *所以让我们改写这个问题：

> 1 (a) 引用的对象`emp`在内存中存储在哪里？

变量所指的对象`emp`存储在长期存储中，也称为“堆”。

> 图1(b)`emp`是一个变量，因此代表一个存储位置。该存储位置在内存中的什么位置？

这个问题没有提供足够的信息来说明。变量`emp`可以是静态字段、实例字段或局部变量。（由于分号，它不能是形式参数。）如果是局部变量，它也可以是 lambda 的封闭外部变量，或迭代器块的局部变量，或异步方法的局部变量。所有这些都会改变变量的存储是短期存储还是长期存储。如果它在短期存储中，它可能在堆栈上，也可能是一个寄存器。

> 2`name`和`age`变量存储在内存中的什么位置以及如何存储？

由于它们是类的字段，因此与这些变量关联的存储位置始终位于长期堆上。

由于`name`是 type `string`，它所指的东西——一个字符串——也在堆上。（或者，变量可能为空，在这种情况下它不引用任何东西。）

> 3 此语句中的每个单词是做什么的，即employee 做什么..then emp..then =.. then new.. then employee.. then ()..then ;

这个问题措辞非常糟糕。首先，那些不是“词”，那些是“令牌”。（并且`()`是*两个*标记。）其次，完全不清楚这个问题的“做”是什么意思。所以让我们问一个不同的问题：

> 3 详细描述此声明在运行时执行时执行的操作。

我们不能准确地说，因为问题中没有足够的信息。问题说它是一个声明，所以它不是一个字段声明。为简单起见，我们假设它不在迭代器块或异步方法中，并且 local 不是任何匿名函数的外部变量。

*   首先，为变量分配短期存储；它很可能被注册；如果没有，它将在堆栈上。它被分配了一个空引用。

*   其次，要求内存分配器为堆上的 Employee 实例产生空内存。它这样做并产生对该内存的引用。

*   第三，如果这是我们第一次看到 Employee 并且 Employee 有一个静态构造函数，那么静态构造函数就会运行。

*   第四，静态 ctor 完成后，Employee 的字段初始化程序运行。

*   第五，Employee 的基类构造函数运行。这可能会导致其他静态构造函数执行。

*   第六，Employee的构造函数体运行。

*   第七，构造函数完成，对现在初始化对象的引用被复制到它的存储中。

当然，所有这一切都假设在此过程中没有任何事情引发异常。

> 4 上面的语句和 有什么区别`Employee emp;`？告诉内存分配。

该问题没有包含足够的信息来给出准确的答案。如果从未使用过局部变量，则编译器可以自由地对其进行优化。如果它没有优化它，那么存储空间`emp`会从短期池中分配出来，初始化为 null，并且永远不会使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T10:06:41.063

你应该看到：**堆栈是一个实现细节**，[第一部分](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)和[第二部分](http://blogs.msdn.com/b/ericlippert/archive/2009/05/04/the-stack-is-an-implementation-detail-part-two.aspx?Redirected=true)，作者：Eric Lippert

> 1 - 对象 emp 存储在内存中的位置，即堆栈或堆中以及如何存储？

在**heap**上，因为它是一个引用类型，因为它`Employee` 是一个类。

> 2 - name 和 age 变量在哪里存储以及如何存储在内存中？

它们也存储在堆上。虽然 age 是一个值类型，但值类型存储在其容器引用所在的位置。

> 3 - 此语句中的每个单词是做什么的，即雇员做什么..然后 emp..then =.. 然后 new.. 然后雇员.. 然后 ()..then ；

创建一个`Employee`名为的类的新实例`emp`

> 4- 上述声明与Employee emp有什么区别；? 告诉内存分配。？

`Employee emp;`意味着只是声明，**而不是实例化**。这意味着没有为对象分配内存，它将保存`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:11:36.720

> 对象 emp 存储在内存中的位置，即堆栈或堆中以及如何存储？

*它是在heap*上分配的，正如你所说`Employee`的那样`class`。类在堆上分配。

> `name`和`age`变量存储在内存中的位置以及如何存储？

这取决于您如何使用它们，并且在不同的框架实现之间可能会有所不同*。*一般来说，把它想象成它们以对象的内存本身结束。

> 该语句中的每个单词是做什么的，即employee 做什么..then emp..then =.. then new.. then employee.. then ()..then ;

您为该类型分配了必要的内存`Employee`并将其分配给指针`emp`。指针`emp`被推送到*stack*或*heap*上，具体取决于它的使用方式。

> 上面的语句和Employee emp有什么区别；? 告诉内存分配。？

```
Employee emp; 
```

与 writing 相同 `Employee emp = default(Employee);`，对于引用类型，默认值为 a `null`，因此等于 writing `Employee emp = null;`。所以在分配方面*应该*没有任何区别。

进一步阅读：

[.NET 中的 C# 堆（ing）与堆栈（ing）：第一部分](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx)*

# jquery - 如果窗口宽度小于严格数量，则 jQuery 处理程序在窗口严格宽度和/或窗口调整大小时触发

> ID：15520382
> 
> 赞同：0
> 
> 时间：2013-03-20T10:00:45.513
> 
> 标签：jquery

抱歉标题过长，我正在寻求您的帮助来解决一个让我慢慢发疯的问题。

我试图找到一种在某些情况下可以运行函数的方法。这些情况如下：

*   如果页面加载时窗口宽度等于或小于特定值 (496)，函数将触发
*   如果窗口被调整为上述值或小于上述值，函数将运行
*   如果窗口宽度大于页面加载或窗口调整大小时的上述值，函数将不会运行

如果这让你们中的任何人感到困惑，我深表歉意，这是我迄今为止帮助进一步解释的代码。

jQuery：

```
if($(window).width() < 496 || ($(window).resize() && $(window).width() < 496)) {
    add_cta_arrows_for_mobile();
}

function add_cta_arrows_for_mobile() {
    $("#hori_ctas h4").addClass('arrow-down');

    $("#hori_ctas h4").click(function() {

        if($(this).attr('data-state') == 'dropped') {
            $(this).removeAttr('data-state').removeClass('arrow-up').addClass('arrow-down');
        } else {
            $(this).attr('data-state','dropped').removeClass('arrow-down').addClass('arrow-up');
        }
        $(this).next().children('div').slideToggle(800);
    });
} 
```

我没有包含 html 或 CSS，因为我觉得没有必要，因为这只是功能而非设计。

提前感谢任何花时间提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:29:14.350

```
// cache relevant elements
var $win = $(window),
    $target = $("#hori_ctas"),
    $titles = $target.find('h4');

function add_cta_arrows_for_mobile() {
    // add arrow and event handler class, remove otherwise
    if($win.innerWidth() < 496) {
        $titles.addClass('clickable arrow-down');
    } else {
        $titles.removeClass('clickable arrow-down');
    }
}

// no need to bind event handler on every resize, do it once with delegation
$target.on('click', '.clickable', function() {
    var $this = $(this),
        state = $this.data('state');

    // toggle class and state
    $this
        .data('state', state == 'dropped' ? '' : 'dropped')
        .toggleClass('arrow-up arrow-down')
        .next().children('div')
            .slideToggle(800);
});

$win.on('resize', function() {
    add_cta_arrows_for_mobile()
});

// initially set arrows
add_cta_arrows_for_mobile(); 
```

注意：不要总是在窗口调整大小时绑定和取消绑定事件处理程序，只需将函数绑定到具有委托的类并切换该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:15:44.053

试试下面的代码：

```
 function add_cta_arrows_for_mobile() {

                $("#hori_ctas h4").addClass('arrow-down');

                $("#hori_ctas h4").click(function() {

                    if($(this).attr('data-state') == 'dropped') {
                        $(this).removeAttr('data-state').removeClass('arrow-up').addClass('arrow-down');
                    } else {
                        $(this).attr('data-state','dropped').removeClass('arrow-down').addClass('arrow-up');
                    }
                    $(this).next().children('div').slideToggle(800);
                });
            }

        var $win = $(window);

        $win.load(function(){

        if($win.width() <= 496 ) {
               add_cta_arrows_for_mobile();
        }else{

         $("#hori_ctas h4").unbind('click'); 
        }

            });

            $win.resize(function(){

            if($win.width() <= 496 ) {
                add_cta_arrows_for_mobile();
            }else{

                $("#hori_ctas h4").unbind('click');

}

            }); 
```

**编辑：** 添加`if($win.width() <= 496 )`条件

**EDIT2：** `unbind`如果窗口宽度=> 496，则编辑单击事件

# xml - xsd 模式文件是否应该通过对自身的验证？

> ID：15520383
> 
> 赞同：0
> 
> 时间：2013-03-20T10:01:05.200
> 
> 标签：xml, validation, xsd

我有一个 Java 应用程序，我必须根据 XSD 模式验证用户提供的 xml 文件。在我的应用程序中，我使用 SAX 解析器。我用几个测试 xml 文件对其进行了测试，并对结果感到满意。但是，为了好玩，我放置了验证 xsd 模式本身，而不是输入 xml 文件。奇怪的是，它通过了验证。我想知道这是否是正确的行为。简单地说，xsd 模式文件是否应该通过对自身的验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:11:45.167

一般来说，没有。

当然也有例外，也就是说，有一些 XSD 模式的模式是一个有效的实例，例如那些有一个通配符允许任何内容只要它位于不同的命名空间中。

# testing - 如何在 selenium IDE 中执行自动完成文本框操作

> ID：15520385
> 
> 赞同：1
> 
> 时间：2013-03-20T10:01:08.353
> 
> 标签：testing, selenium, selenium-ide, functional-testing

我正在使用 Selenium IDE 测试 Magento POS 应用程序。有一个自动完成文本框，我需要在其中输入产品名称。随着自动完成文本框的工作，当我们开始输入时，它开始搜索。我尝试了很多，但我仍然无法弄清楚如何在 Selenium 中进行测试。我试过下面的命令

```
typeAndWait(selector,sony)
verifyText(class=ui-autocomplete:first-child,sony)
click(class=ui-autocomplete:first-child) 
```

但它不起作用。有什么帮助吗？没看懂，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:13:47.027

实际上，您需要触发与文本框关联的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T11:26:50.543

Try below code, it might work:

1.  Type the required auto-complete name like Sony (use `TypeAndWait` command & add auto-complete id)

2.  Use `typeKeysAndWait` command for auto-complete dropdown

3.  Click on auto-complete dropdown id

    ```
    TypeAndWait(class=ui-autocomplete:first-child,sony)
    typeKeysAndWait(class=ui-autocomplete:first-child,sony)
    click(class=ui-autocomplete:first-child) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:02:40.880

使用`waitForText`代替`verifyText`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:01:29.603

键入命令后使用`pause or waitfortext`命令

而不是`typeandwait`使用`type`命令

使用此代码

```
type(selector,sony)
pause 2000
verifyText(class=ui-autocomplete:first-child,sony) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:28:38.330

而不是 type 使用 typekeys 命令

并插入一个新命令

点击（自动完成文本框的路径）

并插入新命令

waitforvisible（要验证的值的路径）

现在输入您的命令验证文本（要验证的值的路径，索尼）

# magento - Magento - 订单摘要单页结帐

> ID：15520394
> 
> 赞同：2
> 
> 时间：2013-03-20T10:01:44.610
> 
> 标签：magento, checkout, summary

我正在使用 Magento 的单页结帐的 Magento 网站上工作。

我需要在结帐流程的右侧显示订单摘要（而不是“您的结帐流程块”）

理想情况下，摘要需要包括：产品名称、数量和价格 下面是小计、运费和总价。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:24:34.147

我的 checkout.xml 中有这个

```
<checkout_onepage_index translate="label">
        <label>One Page Checkout</label>

        <reference name="head">
            <remove name="cookielawHead" />
        </reference>
        <reference name="footer">
            <remove name="cookielawFooter" />
        </reference>

        <!-- Mage_Checkout -->
        <!--
        <remove name="right"/>
        -->

        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/2columns-checkout.phtml</template></action>
        </reference>

        <reference name="right">
            <action method="unsetChildren"></action> 

            <!--<block type="checkout/cart_sidebar" before="-" name="catalog.cart.sidebar" template="checkout/cart/sidebar.phtml"/> -->

            <block type="checkout/cart_sidebar" name="cart_sidebar" as="ajaxCart" template="ajaxcart/cart/sidebarcheckout.phtml" before="-">
                <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
            </block>

            <block type="checkout/cart_totals" name="total_sidebar" as="total_sidebar" template="checkout/onepage/review/totals_right.phtml">
                <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
            </block>    

            <block type="cms/block" name="checkout_contact_right">
                   <action method="setBlockId"><block_id>checkout_contact_right</block_id></action>
            </block>            
            <block type="cms/block" name="checkout_shipping_right">
                   <action method="setBlockId"><block_id>checkout_shipping_right</block_id></action>
            </block>

        </reference>

         <reference name="content">
             <block type="checkout/onepage" name="checkout.onepage" template="checkout/onepage.phtml">
                 <block type="checkout/onepage_login" name="checkout.onepage.login" as="login" template="checkout/onepage/login.phtml">
                     <block type="page/html_wrapper" name="checkout.onepage.login.before" as="login_before" translate="label">
                         <label>Login/Registration Before</label>
                         <action method="setMayBeInvisible"><value>1</value></action>
                     </block>
                 </block>
                 <block type="checkout/onepage_billing" name="checkout.onepage.billing" as="billing" template="checkout/onepage/billing.phtml"/>
                 <block type="checkout/onepage_shipping" name="checkout.onepage.shipping" as="shipping" template="checkout/onepage/shipping.phtml"/>
                 <block type="checkout/onepage_shipping_method" name="checkout.onepage.shipping_method" as="shipping_method" template="checkout/onepage/shipping_method.phtml">
                     <block type="checkout/onepage_shipping_method_available" name="checkout.onepage.shipping_method.available" as="available" template="checkout/onepage/shipping_method/available.phtml"/>
                     <block type="checkout/onepage_shipping_method_additional" name="checkout.onepage.shipping_method.additional" as="additional" template="checkout/onepage/shipping_method/additional.phtml"/>
                 </block>
                 <block type="checkout/onepage_payment" name="checkout.onepage.payment" as="payment" template="checkout/onepage/payment.phtml">
                     <block type="checkout/onepage_payment_methods" name="checkout.payment.methods" as="methods" template="checkout/onepage/payment/methods.phtml">
                         <action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>
                     </block>
                 </block>
                 <block type="checkout/onepage_review" name="checkout.onepage.review" as="review" template="checkout/onepage/review.phtml"/>
             </block>
         </reference>

    </checkout_onepage_index> 
```

这将在结账右侧添加购物车和总计。

# linq - 用于分组表的 Linq 帮助

> ID：15520396
> 
> 赞同：-3
> 
> 时间：2013-03-20T10:01:46.760
> 
> 标签：linq

我有主表帐户，带有 Id(PK)、CustomerId(FK) 和 AccountNumber。

一个客户可以有“n”个帐户。

```
Account
--------
1   |   1   |  93839200
2   |   1   |  93839201
3   |   1   |  93839202
4   |   2   |  93839200 
```

另一个表是带有 Id(PK)、AccountId(FK)、status 和 statusDate 的 AccountStatus。

```
AccountStatus 
--------------
1 | 1 | Created | 1/1/2013
2 | 1 | Verified| 2/1/2013
3 | 2 | Created | 9/1/2013
4 | 2 | Rejected| 11/1/2013
5 | 2 | Deleted | 12/1/2013
6 | 3 | Deleted | 12/1/2013 
```

帐户状态将插入此表中并带有状态日期。

我需要一个 Linq 语句来选择 CustomerID 的最新银行状态。

即，如果我将 CustomerID 传递为 1，我需要获取 BankAccount 的最新状态，例如

```
2 | 1 | Verified| 2/1/2013
5 | 2 | Deleted | 12/1/2013
6 | 3 | Deleted | 12/1/2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:55:44.257

```
var results = from a in Accounts
              join s in AccountStatuses on a.ID equals s.AccountID
              group new { a, s } by a.CustomerID into g
              let i = g.OrderByDescending(i => i.s.StatusDate).FirstOrDefault()
              select new
              {
                  AccountId = i.a.ID,
                  CustomerID = i.a.CustomerID,
                  Status = i.s.Status,
                  StatusDate = i.s.StatusDate
              }; 
```

# javascript - 如何从javascript中隐藏字段的值中删除单引号

> ID：15520398
> 
> 赞同：1
> 
> 时间：2013-03-20T10:01:56.590
> 
> 标签：javascript

我正在使用 javascript 读取隐藏字段值。我得到的值在单引号内（'78963'）。我可以删除这个单引号吗？我想要没有单引号的值（ 78963 ）。请帮我解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:04:24.360

我猜你只是想将你的字符串值转换为数字。

只需使用`parseInt()`：

```
parseInt("78963", 10);  // 78963 
```

如果值假装是浮动的，有`parseFloat()`方法：

```
parseFloat("78963.1");  // 78963.1 
```

还有一种制作铸造的捷径：

```
+"78963";  // 78963 
```

* * *

如果您只是想替换单引号，您可以使用：

```
"'78963'".replace(/'/g, "");  // "78963" 
```

（如其他人所述）或进行棘手的拆分：

```
"'78963'".split("'")[1];  // "78963" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:03:25.763

您可以在字符串上使用 .replace() 函数：http: [//www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:04:27.343

只是`$('#element').val()`，你会得到准确的价值。这里元素将是隐藏框的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:12:29.667

如果隐藏输入字段的值确实包含单引号，那么（在我看来）最佳答案是 JamesAllardice 在评论中提出的答案：

```
yourValue.replace(/'/g, ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:04:08.733

```
str.substr(1, str.length - 2); 
```

# powershell - 如何从 Start-Job 调用脚本中的 powershell 函数？

> ID：15520404
> 
> 赞同：11
> 
> 时间：2013-03-20T10:02:09.180
> 
> 标签：powershell, start-job

我看到了[这个问题](https://stackoverflow.com/questions/7162090/how-do-i-start-a-job-of-a-function-i-just-defined)和[这个问题](https://stackoverflow.com/questions/12293701/function-not-recognized-in-start-job)，但找不到我的问题的解决方案。

所以情况如下：我在脚本（.ps1）文件中有两个函数 DoWork 和 DisplayMessage。这是代码：

```
### START OF SCRIPT ###
function DoWork
{
  $event = Register-EngineEvent -SourceIdentifier NewMessage -Action {
      DisplayMessage($event.MessageData)
  }

  $scriptBlock =  {

    Register-EngineEvent -SourceIdentifier NewMessage -Forward

    $message = "Starting work"
    $null = New-Event -SourceIdentifier NewMessage -MessageData $message

    ### DO SOME WORK HERE ###

    $message = "Ending work"
    $null = New-Event -SourceIdentifier NewMessage -MessageData $message

    Unregister-Event -SourceIdentifier NewMessage
  }

  DisplayMessage("Processing Starts")

  $array = @(1,2,3)
  foreach ($a in $array)
  {
      Start-Job -Name "DoActualWork" $ScriptBlock -ArgumentList $array | Out-Null
  }

  #$jobs = Get-Job -Name "DoActualWork"
  While (Get-Job -Name "DoActualWork" | where { $_.State -eq "Running" } )
  {
      Start-Sleep 1
  }

  DisplayMessage("Processing Ends")

  Get-Job -Name "DoActualWork" | Receive-Job
}

function DisplayMessage([string]$message)
{
    Write-Host $message -ForegroundColor Red
}

DoWork

### END OF SCRIPT ### 
```

我正在创建 3 个后台作业（使用具有 3 个元素的 $array）并使用事件将消息从后台作业传递到主机。我希望powershell主机显示“处理开始”和“处理结束”1次，“开始工作”和“结束工作”各3次。但相反，我没有在控制台中显示“开始工作”/“结束工作”。

事件也被视为 powershell 中的作业，因此当我执行 Get-Job 时，我可以看到与事件作业相关的以下错误：

> {术语“DisplayMessage”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确，然后重试。}

我的问题：我们如何重用（或引用）在我调用 Start-Job 的同一脚本中定义的函数（在我的情况下为 DisplayMessage）？是否可以？我知道我们可以使用 -InitializationScript 将函数/模块传递给 Start-Job，但我不想编写两次 DisplayMessage 函数，一个在脚本中，另一个在 InitializationScript 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T10:27:19.843

在后台作业中包含本地函数的简单方法：

```
$init=[scriptblock]::create(@"
function DoWork {$function:DoWork}
"@)

Start-Job -Name "DoActualWork" $ScriptBlock -ArgumentList $array -InitializationScript $init | Out-Null 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T10:15:42.827

后台作业在单独的进程中运行，因此您创建的作业`Start-Job`不能与函数交互，除非您将它们包含在`$scriptblock`.

即使您在 , 中包含该函数`$scripblock`，`Write-Host`也不会将其内容输出到控制台，直到您用于`Get-Job | Receive-Job`接收作业结果。

**编辑**问题是您的`DisplayMessage`函数在本地脚本范围内，而您的事件处理程序在不同的父范围内运行（例如全局，它是会话范围），所以它找不到您的函数。如果您在全局范围内创建函数并从全局范围内调用它，它将起作用。

我已经修改了您的脚本来执行此操作。我还修改了 scriptblock 并在脚本完成后取消注册事件，因此当您多次运行脚本时不会收到 10x 消息 :-)

无标题1.ps1

```
function DoWork
{
  $event = Register-EngineEvent -SourceIdentifier NewMessage -Action {
      global:DisplayMessage $event.MessageData
  }

  $scriptBlock =  {

    Register-EngineEvent -SourceIdentifier NewMessage -Forward

    $message = "Starting work $args"
    $null = New-Event -SourceIdentifier NewMessage -MessageData $message

    ### DO SOME WORK HERE ###

    $message = "Ending work $args"
    $null = New-Event -SourceIdentifier NewMessage -MessageData $message

    Unregister-Event -SourceIdentifier NewMessage
  }

  DisplayMessage("Processing Starts")

  $array = @(1,2,3)
  foreach ($a in $array)
  {
      Start-Job -Name "DoActualWork" $ScriptBlock -ArgumentList $a | Out-Null
  }

  #$jobs = Get-Job -Name "DoActualWork"
  While (Get-Job -Name "DoActualWork" | where { $_.State -eq "Running" } )
  {
      Start-Sleep 1
  }

  DisplayMessage("Processing Ends")

  #Get-Job -Name "DoActualWork" | Receive-Job
}

function global:DisplayMessage([string]$message)
{
    Write-Host $message -ForegroundColor Red
}

DoWork

Get-EventSubscriber | Unregister-Event 
```

测试

```
PS > .\Untitled1.ps1
Processing Starts
Starting work 1
Starting work 2
Ending work 1
Ending work 2
Starting work 3
Ending work 3
Processing Ends 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T16:38:30.810

我让它按如下方式工作；

```
function CreateTable {
    $table = "" | select ServerName, ExitCode, ProcessID, StartMode, State, Status, Comment
    $table
}

$init=[scriptblock]::create(@"
  function CreateTable {$function:createtable}
"@) 
```

# python - 如何使用 ix 对 pandas 多索引进行索引

> ID：15520408
> 
> 赞同：3
> 
> 时间：2013-03-20T10:02:10.163
> 
> 标签：python, pandas

我已经设置了一些这样的代码：

```
import pandas as pd
import numpy as np
arrays = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
          ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two'],
          ['aaa', 'bbb', 'ccc', 'ccc', 'ddd', 'eee', 'eee', 'eee' ]]
tuples = zip(*arrays)
index = pd.MultiIndex.from_tuples(tuples, names=['A', 'B', 'C'])
df = pd.DataFrame(np.random.randn(8, 4), index=index)

df
Out[161]: 
                    0         1         2         3
A   B   C                                          
bar one aaa  0.682220 -0.598889 -0.600635 -0.488069
    two bbb -0.134557  1.614224 -0.191303  0.073813
baz one ccc -1.006877 -0.137264 -0.319274  1.465952
    two ccc  0.107222  0.358468  0.165108 -0.258715
foo one ddd  0.360562  1.759095 -1.385394 -0.646850
    two eee -1.113520  0.221483  2.226704 -0.994636
qux one eee -0.609271 -0.888330  0.824189  1.772536
    two eee -0.008346 -0.688091  0.263303  1.242485 
```

我想根据 A、B 和 C 组的条件组合找到匹配的行。

例如用 sql 术语：select * where A in ('foo', 'qux') and C='eee'

我可以用 ix 实现这个吗？例如：

```
df.ix(['foo', 'qux'],:,'eee') 
```

对于非常大的数据集，实现这一点的惯用方法是什么？

（我目前正在使用 pandas 0.7，但如果绝对必要可以升级）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:57:55.423

我会写一个函数来做这种事情：

```
import numpy as np
def ms(df, *args):
    idx = df.index
    for i, values in enumerate(args):
        if values is not None:
            if np.isscalar(values):
                values = [values]
            idx = idx.reindex(values, level=i)[0]
    return df.ix[idx] 
```

然后你可以很容易地做到这一点：

```
ms(df, ['foo', 'qux'], None, "eee") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:52:36.753

[从 Pandas 0.14 开始](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#multiindexing-using-slicers)，您可以将选择器元组传递给`df.loc`对 MultiIndex 进行切片：

```
In [782]: df.loc[(['foo','qux'], slice(None), 'eee'), :]
Out[782]: 
                    0         1         2         3
A   B   C                                          
foo two eee  1.615853 -1.327626  0.772608 -0.406398
qux one eee  0.472890  0.746417  0.095389 -1.446869
    two eee  0.711915  0.228739  1.763126  0.558106 
```

# html - 在谷歌浏览器中禁用 ime 模式

> ID：15520410
> 
> 赞同：3
> 
> 时间：2013-03-20T10:02:18.023
> 
> 标签：html, css, google-chrome, ime

如何使用 css 或任何其他方法禁用 IME？我的问题是，当将语言更改为日语时，在文本框中输入双字节数字，我需要防止这种情况

我用

```
 style="ime-mode:disabled" 
```

它适用于除谷歌浏览器之外的所有其他浏览器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-08T03:23:42.303

将属性类型更改为电话。它的工作原理就像 ime-mode 在 chrome 中处于非活动状态并且其他浏览器支持 html5。

```
element.setAttribute('type', 'tel'); 
```

我建议您同时使用**ime-mode**和**type="tel"**

**风格：ime模式**

```
Chrome          Firefox (Gecko)     IE        Opera             Safari (WebKit)
Not supported   3.0 (1.9)           5.0       Not supported     Not supported 
```

**输入类型="电话"**

```
Chrome      Firefox         IE      Opera           Safari      Safari Mobile
6+          4+              10+     10.6+           5.1+        iOS 3.1+ 
```

**两者都使用**

```
Chrome      Firefox         IE      Opera           Safari      Safari Mobile
6+          3.0 (1.9)       5.0     10.6+           5.1+        iOS 3.1+ 
```

# google-app-engine - 如何使用 Dropbox API 下载整个 Dropbox 文件夹？

> ID：15520411
> 
> 赞同：0
> 
> 时间：2013-03-20T10:02:19.430
> 
> 标签：google-app-engine, download, dropbox, dropbox-api

我正在使用 Dropbox REST API 对用户的 Dropbox Acount 执行不同的操作（使用 Google App Engine）。但是使用[文件（GET）](https://www.dropbox.com/developers/core/api#files-GET)下载文件夹会出现 404 错误：找不到文件。而如果我尝试下载单个文件，例如 .txt 或 .docx 文件，则相同的方法有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-08T03:29:22.213

只需添加`?dl=1`到 Dropbox 文件夹共享 URL 的末尾，您就会触发下载相关文件夹的 .zip。因此，`https://www.dropbox.com/sh/123456789`对于常规文件夹访问变成`https://www.dropbox.com/sh/123456789?dl=1`了下载 zip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:06:40.463

看起来您需要使用`/metadata`来获取文件列表，然后通过单独的调用下载每个文件。`/files`说它“下载文件”。文件夹不是文件。

# c - 检测到堆栈粉碎..在发送 ICMP 数据包时

> ID：15520413
> 
> 赞同：0
> 
> 时间：2013-03-20T10:02:25.123
> 
> 标签：c, icmp, stack-smash

我写了一个`C`程序来发送一个`ICMP`数据包。这是对应的代码..

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <stdlib.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <string.h>
#include <netdb.h>

int Seq_Num = 1;
struct icmp_header
{
unsigned char type;
unsigned char code;
unsigned short check_sum;
unsigned short id;
unsigned short seq_num;
 char msg[20];
   };

void make_icmp( struct icmp_header *I, char *msg_to_snd, int m_len )
{
I->type = 13;   //for timestamp 
I->code = 0;    // request..
I->id   = htons(713);   //some unique ID..
I->seq_num= htons(Seq_Num);
Seq_Num++;
/*computing the check sum..*/
unsigned int Sum = 0;
memset(I->msg, 0, 100);
unsigned short *ptr = (unsigned short*)I;
Sum += *ptr++;
ptr++;
Sum += *ptr++;
Sum += *ptr++;
strcpy(I->msg, msg_to_snd);

ptr = ( unsigned short*)I->msg;

int len = m_len;
if(len & 1)
    len++;

while(len >=0)
{
    Sum += *ptr++;  
    len -=2;
}   

Sum = (Sum >>16) + Sum& 0x0000ffff; /*add the carries..*/

Sum += (Sum>>16);   /*add the newly generated carries..*/

I->check_sum = ~Sum;    
}

int main(int argc, char* argv[])
{
if(argc ==1)
{
    perror("ip addr. required..\n");
    exit(1);
}

    int sock = socket(AF_INET, SOCK_RAW, 1);

    if(sock==-1)
    {
        perror("sock():");
        exit(1);
    }

    struct sockaddr_in Sk;
    bzero(&Sk, sizeof(Sk));
    Sk.sin_family = AF_INET;
    inet_pton(AF_INET, argv[1], &Sk.sin_addr);
    struct icmp_header Q;

        char buf[20];
        scanf("%s", buf);
        make_icmp(&Q, buf, strlen(buf));    

        if(sendto( sock, &Q, sizeof(Q), 0, (struct sockaddr*)&Sk, sizeof(Sk))<0)
        {
            perror("sendto..");
            exit(1);
        } 
        sleep(1);
    printf("sent successfully\n");

return 0;
} 
```

代码的问题是，当我运行它时，icmp 数据包已成功发送，我可以在`wire shark`. 但最后显示后`sent successfully`我得到以下错误..

```
*** stack smashing detected ***: ./a.out terminated 
```

请告诉我我错过了什么......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:05:10.823

Size of `I->msg`is just `20`，但您设置的超出了它的容量：

```
memset(I->msg, 0, 100); // 100 > 20 and it exceeds the array boundaries 
```

# android - 查询 android 日历甚至可以检索已删除的事件

> ID：15520417
> 
> 赞同：2
> 
> 时间：2013-03-20T10:02:32.230
> 
> 标签：android, events, calendar

我正在使用下面提到的代码从保存在 android 的本机日历应用程序中的所有日历中检索所有事件。现在，如果我从本机日历中删除某个事件，我的代码仍然会获取并显示该事件。这怎么可能。它是否设置了一些删除标志而不是实际删除事件。

```
Cursor cursor = cr.query(Uri.parse("content://com.android.calendar/events"),
                    projection, selection, selectionArgs, null); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T09:52:34.077

请检查是否设置了**“DELETED”标志**。

或者您也可以尝试在 SELECTION 中包含以下内容

```
AND (deleted != 1) 
```

所以选择字符串变成了，

```
String selection = "( ("+ "title" + " LIKE '"+name+"') AND ( deleted != 1 ) )"; 
```

有时，CalendarDB 需要一些时间才能删除事件。但是“已删除”的 COLUMN 将被标记为“1”，表示它们将很快被删除。延迟的原因可能是日历正在等待同步

ps：尝试使用这个工具——http: [//www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx](http://www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx)来可视化日历数据库。请检查数据库中的“已删除”和“脏”列

# php - MySQL选择字段名重复的多个表

> ID：15520420
> 
> 赞同：-2
> 
> 时间：2013-03-20T10:02:37.377
> 
> 标签：php, sql, pdo

当我通过这样的 PHP PDO 语句在 MySQL 中选择多个表时

```
$query = "SELECT * from offers, courts"; 
```

我如何输出重复的字段名，例如每个表中都有以下字段

```
offers.description and courts.description 
```

当我做一个while / foreach循环键时，我只能输出这样的东西

```
$row['caption'] 
```

我需要像这样艰难的东西

```
$row['courts.caption'] or $row['courts']['caption'] 
```

我将如何实现这一目标？

可悲的是，这些表没有任何关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:06:17.467

好吧，您可以选择以下字段：

```
$query = "SELECT o.description as OfferDescription, c.description as CourtsDescription from offers o, courts c"; 
```

然后使用：`$row['OfferDescription']`或`$row['CourtsDescription']`

# java - 什么是 CDI bean？

> ID：15520424
> 
> 赞同：21
> 
> 时间：2013-03-20T10:02:44.653
> 
> 标签：java, jakarta-ee, cdi

我有点困惑，我们将 CDI bean 称为使用`@Inject`注释注入它们的 bean 还是我们`@Inject`在其中使用的 bean？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-05-03T08:42:07.070

> **CDI bean**是 CDI 可以自动实例化、管理和注入以满足其他对象的依赖关系的类。几乎任何 Java 类都可以由 CDI 管理和注入。

例如，PrintServlet 依赖于 Message 实例，并由 CDI 运行时自动注入。

PrintServlet.java

```
@WebServlet("/printservlet")
public class PrintServlet extends HttpServlet {
    @Inject private Message message;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
        response.getWriter().print(message.get());
    }
} 
```

Message.java（**这个类是一个 CDI bean**）

```
@RequestScoped
public class Message {
    @Override
    public String get() {
        return "Hello World!";
    }
} 
```

干杯!

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-28T21:18:09.410

CDI**没有引入**一种称为*CDI Bean*的新 bean 类型，它具有自己独特的组件模型。

CDI**提供了一组**服务，这些服务*可由托管 bean 和*由其现有组件模型定义的 EJB 使用。

因此，**CDI 只是一个**处理 CDI 生命周期的 Bean（EJB 或托管 Bean），具有*Context*和其他旧功能*DI*的范围。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T10:10:13.553

`CDI bean`是由`CDI container`（例如 Weld）管理的 bean。

*   如果是`@injected`- 它是 bean

*   如果它是可能的`@injects`东西 - 它也是豆子。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-24T12:04:19.467

CDI 在 Java EE 6 中被引入，以提供一些早期可用于 EJB 的功能，仅适用于由容器管理的所有组件。因此 CDI bean 涵盖了 Servlet、SOAP Web 服务、RESTful Web 服务、实体、EJB 等。

> 因此，您可以互换使用所有这些术语：
> 
> *   CDI豆
> *   豆
> *   托管豆
> *   EJB bean
> *   容器管理 bean 等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-12T16:33:20.730

我认为这个术语`CDI bean`在技术上可能不正确。**托管 bean** 似乎更合适。

但是，**CDI bean的可能定义可能是：****由于类上存在 CDI 注释**或存档中存在文件而创建和注入的任何**托管 bean**。CDI bean 本身不是一个类，而是一个类的托管实例。**`beans.xml`**

 **例如下面的例子：

```
public class Logger{}
public class Producer {

    @Produces
    public Logger getLogger() {
        return new Logger();
    }
} 
```

`Logger`本身只是一个类。它在被生产者实例化并绑定到上下文后变为`managed bean`( )。`CDI bean`

CDI bean 只能存在于容器中。**容器**需要实现`CDI`规范。它扫描部分或全部类路径以查找 CDI 注释，并根据这些注释**创建和管理相应的 bean。** 从独立应用程序创建启用 CDI 的容器就像这样简单：

```
WeldContainer container = new Weld().initialize(); 
```**

# ruby-on-rails - 安装 mysql gem 时出错

> ID：15520427
> 
> 赞同：4
> 
> 时间：2013-03-20T10:02:50.443
> 
> 标签：ruby-on-rails, linux

我正在使用linux机器。我成功安装了 ruby​​ 并使用 sqlite 数据库创建了一个简单的应用程序。它也很好用。现在我尝试使用 mysql 创建一个应用程序，当我安装 mysql gem 时它显示以下错误。

```
[bathakarai@Project1-CO Rails]$ gem install mysql
/home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/bin/gem:4: warning: Insecure world writable dir /home/bathakarai in PATH, mode 040777
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
    ERROR: Failed to build gem native extension.

        /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
extconf.rb:12: warning: Insecure world writable dir /home/bathakarai in PATH, mode 040777
checking for mysql_ssl_set()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/bin/ruby
    --with-mysql-config
    --without-mysql-config
/home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:435:in `try_link0'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:440:in `try_link'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:552:in `try_func'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:797:in `block in have_func'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:276:in `postpone'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for'
    from /home/bathakarai/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:796:in `have_func'
    from extconf.rb:45:in `<main>'

Gem files will remain installed in /home/bathakarai/.rvm/gems/ruby-1.9.2-p320/gems/mysql-2.9.1 for inspection.
Results logged to /home/bathakarai/.rvm/gems/ruby-1.9.2-p320/gems/mysql-2.9.1/ext/mysql_api/gem_make.out 
```

请帮我看看问题出在哪里

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T10:10:48.347

试试这个。希望它对你有用

首先安装 libmysql-ruby

```
sudo apt-get install libmysql-ruby 
```

然后安装 libmysqlclient-dev

```
sudo apt-get install libmysqlclient-dev 
```

以上完成后安装mysql

```
sudo gem install mysql 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T10:13:31.113

这是因为本地的一些开发依赖项不可用。

安装以下

```
sudo apt-get install mysql-dev 
```

然后安装**mysql** gem

```
gem install mysql 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T05:38:35.200

**安装一些mysql2依赖**

```
sudo apt-get install libmysql-ruby libmysqlclient-dev 
```

**插入您的 GemFile**

```
gem 'mysql2', '~> 0.3.18' 
```

**然后捆绑安装**

```
bundle install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:12:31.497

警告：不安全的世界可写目录 /usr/local/mysql 在 PATH，模式 040777

解决方案是一个简单的单行，我每次都忘记。

```
sudo chmod o+w /usr/local/mysql/bin 
```

[点击这里了解更多详情](http://www.headhole.org/2010/05/18/insecure-world-writable-dir/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-15T13:29:03.717

请输入：

```
gem install mysql2 --no-rdoc --no-ri 
```

# android - 将文件从资产复制到 SD 卡

> ID：15520430
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:03:01.783
> 
> 标签：android, android-assets

我是开发 Android 应用程序的新手。关于我的问题，我找到了以下帖子，但我不确定如何将它实施到我现有的项目中。 [如何将文件从“资产”文件夹复制到 SD 卡？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)

我想将它实现到 ZhuangDict，一个能够读取 Stardict 文件的字典应用程序。 [http://code.google.com/p/zhuang-dict/source/browse/trunk/ZhuangDict/src/cn/wangdazhuang/zdict/ZhuangDictActivity.java](http://code.google.com/p/zhuang-dict/source/browse/trunk/ZhuangDict/src/cn/wangdazhuang/zdict/ZhuangDictActivity.java)

ZhuangDict 在第一次启动时会创建一个名为“zdict”的空目录。我想做的是将我自己的 stardict 文件从资产复制到 zdict 目录。

我的编程知识为零。如果您能给我提供一个查看 Google 代码中的 ZhuangDict 源代码的分步指南，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:07:40.543

看一下这个

```
private static String DB_PATH = "/data/data/com.packagename.myapp/databases/";

   try {
        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(
                "dbname.sqlite");
        // Path to the just created empty db
        String outFileName = DB_PATH + DATABASE_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[myInput.available()];
        int read;
        while ((read = myInput.read(buffer)) != -1) {
            myOutput.write(buffer, 0, read);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    } catch (IOException e) {
        Log.e(TAG, "copyDataBase Error : " + e.getMessage());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:20:49.743

您还可以将文件放在原始资源 (/res/raw) 文件夹中并使用此标准功能：

```
protected void CopyResource(int aInputIDResource, String aOutputFileName, boolean afForceWrite) {
        if (afForceWrite == false) {
            InputStream theTestExist;
            try {
                theTestExist = openFileInput(aOutputFileName);
                theTestExist.close();
                return;
            } catch (IOException e) {
            }
        }

        char[] theBuffer = new char[1024];
        int theLength;

        try {
            OutputStreamWriter out = new OutputStreamWriter(openFileOutput(
                    aOutputFileName, MODE_WORLD_READABLE), "ISO-8859-1");
            InputStreamReader in = new InputStreamReader(getResources()
                    .openRawResource(aInputIDResource), "ISO-8859-1");

            while ((theLength = in.read(theBuffer)) > 0)
                out.write(theBuffer, 0, theLength);

            out.flush();
            out.close();
        } catch (Exception e) {
            Log.e("TAG", "Error: " + e.getMessage());
        }
    } 
```

然后在您的应用程序或活动的 onCreate() 函数中，调用：

```
CopyResource(R.raw.your_database, "MR_SBusPlugin.so", false); 
```

# ios - 如何在不重新启动 ios 设备的情况下加载 launchDaemon.plist？

> ID：15520437
> 
> 赞同：2
> 
> 时间：2013-03-20T10:03:19.813
> 
> 标签：ios, daemon, jailbreak, launch

我写了一个launchDaemon.plist，并将其放入`/System/Library/LaunchDaemon/`.

如何在不重新启动 iOS 设备的情况下加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T00:00:22.133

如果您通过 登录到您的 iOS 设备`ssh`，您可以从命令行使用它：

```
launchctl load /System/Library/LaunchDaemons/launchDaemon.plist 
```

当然，要停止守护进程

```
launchctl unload /System/Library/LaunchDaemons/launchDaemon.plist 
```

**注意：**如果您打算将此作为*产品*发布，而不仅仅是供您自己使用，我建议您遵循正常的命名约定，并将您的 plist 文件命名为`com.mycompany.MyCrazyDaemon.plist`.

参考：[launchctl 上的 Apple OS X 文档](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/launchctl.1.html)。

# sql-server - 当我单击保存按钮时，数据存储在数据库中。使用 f5 刷新时数据保存两次

> ID：15520439
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:03:30.220
> 
> 标签：sql-server

当我单击保存按钮时，数据存储在数据库中。使用 f5 刷新时数据保存两次。我使用了更新面板，页面 response.redirect("samepage.aspx") 但没有使用 aspx 代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="AddCust.aspx.cs" Inherits="AddCust" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="Main" Runat="Server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
<div>
<div>
    <asp:TextBox ID="txtCustomername" runat="server"  >
    </asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="Enter The name" ControlToValidate="txtCustomername" ></asp:RequiredFieldValidator> 
    <asp:DropDownList ID="ddlcustomer" runat="server" 
        onselectedindexchanged="ddlcustomer_SelectedIndexChanged">
    </asp:DropDownList>
        </div> 
```

aspx 代码

asxcs代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;

using System.Web.UI.WebControls;
using odonovanTableAdapters;

public partial class AddCust : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        customerdropdown();

    } 
```

代码

```
public void ButtonSave_Click(object sender, EventArgs e)
{
    // ButtonSave.Attributes.Add("onclick", "return validate()");
    string name = txtCustomername.Text;

    string company = txtCompany.Text;
if (company == "")
{
    company = "0";
}
string address = txtaddress.Text;
if (address == "")
{
    address = "0";
}

long phonenumber = Convert.ToInt64(txtPhonenumber.Text);

string otherdetails = txtOtherDetails.Text;
if (otherdetails == "")
{
    otherdetails = "0";
} 
```

代码

```
tblCustomerdetailsTableAdapter tadaptor = new tblCustomerdetailsTableAdapter();
tadaptor.Insert(name, company, address, phonenumber, otherdetails);
//  Response.Write("<script>alert('saved successfully')</script>"); 
```

}

代码

```
 protected void customerdropdown()
        {
            //fill broker ddl
            ddlcustomer.DataSource = DropDowns.ddlcustomers();
            ddlcustomer.DataValueField = "CustomerName";
            ddlcustomer.DataTextField = "CustomerName";
            ddlcustomer.DataBind();
            ddlcustomer.Items.Insert(0, "-- Select --");
        } 
```

代码

```
 protected void ddlcustomer_SelectedIndexChanged(object sender, EventArgs e)
    {     
        string customername = ddlcustomer.SelectedValue;
        spddlcustselectedvalueTableAdapter cadaptor = new spddlcustselectedvalueTableAdapter();
        odonovan.spddlcustselectedvalueDataTable ctable = cadaptor.GetData(customername);
        txtCustomername.Text = ctable.Rows[0][1].ToString();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:03:20.140

成功保存记录后，您可以简单地将用户重定向到同一页面，以防止再次重复相同的操作（插入）。

在 Querystring 中传递一些令牌，以便您可以向用户显示成功消息。

# select - 具有空值的选择的angularjs过滤器

> ID：15520440
> 
> 赞同：2
> 
> 时间：2013-03-20T10:03:41.170
> 
> 标签：select, filter, angularjs

我在 AngularJS 中的过滤器有问题。在这里查看我的代码：http: [//jsfiddle.net/sqev9/7/](http://jsfiddle.net/sqev9/7/)

我有一个在 ng-options 字段中使用过滤器的选择：

```
ng-options="listitem as listitem.Name for listitem in MyList.Items|filter:FilterList" 
```

我还使用了一个空选项，因为此选择是可选的。

作为选择的 ng-model，我使用值“SelectedInList”

现在的问题是，当过滤器不匹配任何内容时，我的 $scope 中的“SelectedInList”变量不为空。

通过选择“item1”并按“Go”来模拟这一点：SelectedInList 现在正确地是 item1 对象。现在过滤器发生变化，列表为“空”：只有“-”项在那里，这也是预期的。现在再次按“go”应该会给我“null”作为 SelectedInList，但它仍然是 item1 对象，这是我没想到的。

这种方法的任何解决方案？

最好的问候，汤姆，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:17:10.147

似乎当列表被过滤并且值不再存在时，`ng-model`. 这看起来很像一个错误，但我需要更多的研究来理解原因。

无论如何，一个解决方案是在方法结束时设置`SelectedInList`为。`null``Add`

# c# - 解析大双值C#

> ID：15520441
> 
> 赞同：1
> 
> 时间：2013-03-20T10:03:41.313
> 
> 标签：c#, .net, floating-point

解析一个非常大的 double 值会返回错误的值。

例如

```
Double.Parse("987654321098765432109876543210987.99") 
```

返回`9.8765432109876547E+32`，这是错误的。如何处理？

我想在我的网页中用逗号分隔显示上述值。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:07:01.450

[转换](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)`double`为`string`. _ _ 默认情况下，它对大数字使用[科学记](http://en.wikipedia.org/wiki/Scientific_notation)数法，这不是公共网站的最佳选择。我`F`在示例中使用过，但考虑阅读**msdn**以查找最适合您需求的格式

```
var str = Double.Parse("987654321098765432109876543210987.99").ToString("F");

Console.WriteLine (str); 
```

印刷

```
987654321098765000000000000000000.00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:32:45.737

# 大整数

`double`精度有限，因此它只会存储您号码的前 15-16 位数字。为了更精确，请使用`System.Numerics.BigInteger`- 它不支持非整数，因此您必须自己添加小数点（如果您有固定的小数位数）。

> **大整数结构**
> 
> .NET 框架 4.0+
> 
> 表示任意大的有符号整数。

（来源：http: [//msdn.microsoft.com/en-us/library/dd268287%28v=vs.99%29.aspx](http://msdn.microsoft.com/en-us/library/dd268287%28v=vs.99%29.aspx)）

相关功能：

> **解析**
> 
> 将数字的字符串表示形式转换为其等效的 BigInteger。
> 
> 命名空间：System.Numerics
> 
> 程序集：System.Numerics（在 System.Numerics.dll 中）
> 
> ```
> public static BigInteger Parse(string value) 
> ```

（来源：http: [//msdn.microsoft.com/en-us/library/dd268231%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd268231%28v=vs.100%29.aspx)）

例子：

```
import System.Numerics.BigInteger;
BigInteger.Parse("98765432109876543210987654321098999").ToString(); // note, no dot 
```

您还需要引用 System.Numerics 程序集。

# 大定点数

如果需要在数字中有一些固定数量的小数，您可以自己实现定点运算和 I/O。在此示例中，我将使用两位小数，但可以轻松修改。

关键是不要使用原始数字，而是它的倍数。例如，如果您的号码是`X`，则它在内部表示为`X * 100`

## 加减

加法和减法无需修改即可工作。让我们考虑数字 X、Y 和 Z，以及它们的内部表示：

```
X + Y = Z

X*100 + Y*100 = Z*100 
```

两个方程都是正确的。

## 乘法和除法

乘法和除法需要一些算术。让我们修改前面的乘法示例：

```
X * Y = Z

(X*100) * (Y*100) = Z*100 <--- WRONG 
```

您需要稍微修改一下方程式：

```
X * Y = Z

(X*100) * (Y*100) = Z*100*100

Z * 100 = (X*100) * (Y*100) / 100 
```

所以你需要将结果除以 100 才能得到正确的内部表示。使用除法，您需要将两个操作数分别乘以 100。

## 输入输出

如果您的输入始终包含两位小数，您只需删除小数点即可获得该数字的内部表示。自由格式输入需要更多的工作。

在输出中，您必须在最后两位数字之前注入小数点才能获得正确的输入。此外，如果数字小于 0，则可能必须在前面插入零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T10:47:59.373

您可以使用[自定义格式](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

```
Double.Parse("987654321098765432109876543210987.99").ToString("0,0.00") 
```

输出：`"987,654,321,098,765,000,000,000,000,000,000.00"`

您还可以下载此[实用程序来测试各种形式](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=clrsamples&DownloadId=14861)

# mysql - 查询花费了太多时间并影响了我们的性能

> ID：15520442
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:03:43.140
> 
> 标签：mysql, sql, performance, query-performance

查询花费了太多时间。此查询来自网络应用程序。它影响了我们的表现。任何人请帮我重写它并与我分享您的宝贵建议。

使用解释计划查询：

```
mysql> explain SELECT DISTINCT(tab2.idnum) FROM (`tab2`) JOIN `tab1` ON tab1.question = tab2.idnum WHERE `department` = 'Biology' AND tab2.status != 'active' AND tab2.status != 'retired' AND (tab2.instructor = 164604 OR tab2.instructor = 194703) AND tab1.topic IN (SELECT `topic` FROM (`tab5`) JOIN `tab4` ON tab4.chapter = tab5.id WHERE `book` = 1000) AND tab2.idnum NOT IN (SELECT `question` FROM (`tab3`) WHERE `book` = 1000 AND `isPR` = 1) AND `questiontype` IN ('mult') limit 2;
+----+--------------------+-----------------+-----------------+------------------+---------+---------+-------------------------------+--------+-------------------------------------------+
| id | select_type        | table           | type            | possible_keys    | key     | key_len | ref                           | rows   | Extra                                     |
+----+--------------------+-----------------+-----------------+------------------+---------+---------+-------------------------------+--------+-------------------------------------------+
|  1 | PRIMARY            | tab1  | index           | question         | tq      | 8       | NULL                          | 149899 | Using where; Using index; Using temporary |
|  1 | PRIMARY            | tab2  | eq_ref          | PRIMARY          | PRIMARY | 4       | comp1.tab1.question |      1 | Using where                               |
|  3 | DEPENDENT SUBQUERY | tab3 | unique_subquery | qb,question,book | qb      | 8       | func,const                    |      1 | Using where                               |
|  2 | DEPENDENT SUBQUERY | tab4  | ref             | chapter,topic    | topic   | 4       | func                          |      1 |                                           |
|  2 | DEPENDENT SUBQUERY | tab5     | eq_ref          | PRIMARY          | PRIMARY | 4       | comp1.tab4.chapter  |      1 | Using where                               |
+----+--------------------+-----------------+-----------------+------------------+---------+---------+-------------------------------+--------+-------------------------------------------+
5 rows in set (0.00 sec) 
```

表结构：

```
mysql> show create table tab5\G
*************************** 1\. row ***************************
       Table: tab5
Create Table: CREATE TABLE `tab5` (
  `name` varchar(255) CHARACTER SET utf8 DEFAULT NULL,
  `descrip` mediumtext NOT NULL,
  `category` varchar(255) NOT NULL DEFAULT '',
  `order` int(11) NOT NULL DEFAULT '0',
  `department` varchar(255) NOT NULL DEFAULT '',
  `book` int(11) NOT NULL DEFAULT '0',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `is_trial` tinyint(1) NOT NULL DEFAULT '0',
  `is_live` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6305 DEFAULT CHARSET=latin1

mysql> show create table tab4\G
*************************** 1\. row ***************************
       Table: tab4
Create Table: CREATE TABLE `tab4` (
  `chapter` int(11) NOT NULL DEFAULT '0',
  `topic` int(11) NOT NULL DEFAULT '0',
  KEY `chapter` (`chapter`),
  KEY `topic` (`topic`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> show create table tab3\G
*************************** 1\. row ***************************
       Table: tab3
Create Table: CREATE TABLE `tab3` (
  `question` int(11) NOT NULL,
  `book` int(11) NOT NULL,
  `isPR` tinyint(1) unsigned NOT NULL DEFAULT '0',
  UNIQUE KEY `qb` (`question`,`book`),
  KEY `question` (`question`),
  KEY `book` (`book`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> show create table tab2 \G
*************************** 1\. row ***************************
       Table: tab2
Create Table: CREATE TABLE `tab2` (
  `idnum` int(11) NOT NULL AUTO_INCREMENT,
  `questiontype` enum('mult','CM','GO','FIB','AUD','HS','DD') NOT NULL DEFAULT 'def1',
  `question` mediumtext NOT NULL,
  `difficulty` int(3) DEFAULT '0',
  `createdby` int(11) NOT NULL DEFAULT '0',
  `createdwhen` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `status` enum('active','calibrating','onhold','retired') NOT NULL DEFAULT 'def1',
  `parent` int(11) NOT NULL DEFAULT '0',
  `child` int(11) NOT NULL DEFAULT '0',
  `family` int(11) NOT NULL DEFAULT '0',
  `department` varchar(255) NOT NULL DEFAULT '',
  `notes` text NOT NULL,
  `instructor` int(11) NOT NULL DEFAULT '0',
  `nmfilter` enum('everyone','majors only','undetermined') NOT NULL DEFAULT 'def1',
  `PR` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idnum`),
  KEY `family` (`family`)
) ENGINE=InnoDB AUTO_INCREMENT=186724 DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> show create table tab1\G
*************************** 1\. row ***************************
       Table: tab1
Create Table: CREATE TABLE `tab1` (
  `question` int(11) NOT NULL DEFAULT '0',
  `topic` int(11) NOT NULL DEFAULT '0',
  KEY `question` (`question`),
  KEY `topic` (`topic`),
  KEY `tq` (`topic`,`question`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:25:17.390

这是一个复杂的分析。尝试创建 sql fiddle 以更好地理解您的问题。我的建议是，尝试仅使用 JOIN 重写您的查询（删除嵌套查询）并尝试以下查询，

```
SELECT tab2.idnum
FROM (`tab2`) INNER JOIN `tab1` ON tab1.question = tab2.idnum INNER JOIN `tab3` ON tab2.idnum != tab3.question INNER JOIN `tab5` ON tab1.topic = tab5.topics
INNER JOIN `tab4` ON tab4.chapter = tab5.id 
WHERE 
tab5.department = 'Biology' AND tab2.status != 'active' AND tab2.status != 'retired' AND 
(tab2.instructor = 164604 OR tab2.instructor = 194703) 
AND tab5.book = 1000 AND tab3.book =  1000 AND tab3.isPR = 1
AND tab2.questiontype IN ('mult') 
```

注意：由于我不确定您要达到的目标，因此我删除了 DISTINCT、LIMIT 之类的一些内容。但我希望这会让你知道如何处理这个问题。

要给出更合适的答案，只需使用表格和数据更新您的帖子或创建 sqlfiddle 并解释您试图从这些表格中实现的目标以及您如何将它们关联起来。

编辑：

```
SELECT tab2.idnum
FROM (`tab2`) INNER JOIN `tab1` ON tab1.question = tab2.idnum AND (tab2.status != 'active' AND tab2.status != 'retired' AND (tab2.instructor = 164604 OR tab2.instructor = 194703) AND tab2.questiontype IN ('mult')) 
INNER JOIN `tab3` ON tab2.idnum != tab3.question AND tab3.book =  1000 AND tab3.isPR = 1
INNER JOIN `tab5` ON tab1.topic = tab5.topics AND tab5.department = 'Biology' AND tab5.book = 1000
INNER JOIN `tab4` ON tab4.chapter = tab5.id 
```

注意：为了提高速度，请确保您的索引、表中存在多少行并限制查询结果。

编辑2：

```
SELECT tab2.idnum
FROM `tab2` INNER JOIN `tab1` ON tab1.question = tab2.idnum AND (tab2.status != 'active' AND tab2.status != 'retired' AND (tab2.instructor = 164604 OR tab2.instructor = 194703) AND tab2.questiontype IN ('mult')) 
INNER JOIN `tab3` ON tab2.idnum != tab3.question AND tab3.book =  1000 AND tab3.isPR = 1
INNER JOIN `tab5` ON tab5.department = 'Biology' AND tab5.book = 1000
INNER JOIN `tab4` ON tab4.chapter = tab5.id
WHERE tab1.topic = tab4.topic 
```

# asp.net - 使用 ASP.NET 从外部文件服务器获取目录列表

> ID：15520445
> 
> 赞同：0
> 
> 时间：2013-03-20T10:03:49.407
> 
> 标签：asp.net

我想使用 ASP.net 从外部文件服务器获取目录列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:05:03.350

要从网络共享位置列出文件，您可以使用以下代码。

```
 string path= @"\\server\sharedfolder"; 
 DirectoryInfo di = new DirectoryInfo(path);
 FileInfo[] files = di.GetFiles("*.*");
 foreach(FileInfo fi in files)
 {
  //Your code goes here      
 } 
```

但是，请确保您的 ASP.NET Web 应用程序对共享文件夹具有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:16:23.380

您可以使用`Path.GetDirectoryName(path) method`

链接：http: [//msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)

你也可以使用

`var result = new FileInfo(path).Directory.FullPath`

# php - CI 将 CodeIgniter Disallowed Key Characters 留空有多大风险？

> ID：15520446
> 
> 赞同：2
> 
> 时间：2013-03-20T10:03:50.437
> 
> 标签：php, codeigniter

已经有一些关于不允许的关键字符的帖子，但这个有不同的问题。我想知道如果我留空会有多大风险`$config['permitted_uri_chars']`。会发生什么？原因？我需要`enable_query_strings FALSE`并且我使用阿拉伯语单词

网址：

```
www.mydomain.com/%D8%A7%D9%84%D8%B3%D9%84%D8%A7%D8%B7%D8%A9-%D8%A7%D9%84%D9%8A%D9%88%D9%86%D8%A7%D9%86%D9%8A` 
```

我从不依赖 URL 的值，我之前总是做一些清理工作。但我不确定 Codeigniter 如何处理路由以及它如何包含文件。他们是否依赖于这个单一的 allowed_uri_chars 规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:29:32.937

# emacs - Emacs24 自动完成错误：（void-variable ac-source-c）

> ID：15520447
> 
> 赞同：8
> 
> 时间：2013-03-20T10:03:54.060
> 
> 标签：emacs, autocomplete, elisp, emacs24

我尝试安装 auto-complete 和 auto-complete-clang-async。当我写类似的东西时`std::`，emacs 说“自动完成未激活”。

我的自动完成配置是：

```
(require 'auto-complete)
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/elpa/auto-complete/dict")
(set-default 'ac-c-sources
         '(ac-source-abbrev
           ac-source-dictionary
           ac-source-yasnippet
           ac-source-words-in-buffer
           ac-source-words-in-same-mode-buffers
           ac-source-semantic))
(ac-config-default)
(dolist (m '(c-mode c++-mode java-mode))
(add-to-list 'ac-modes m))
(global-auto-complete-mode t)

;auto-complete-clang-async
(require 'auto-complete-clang-async)

(defun ac-cc-mode-setup ()
  (setq ac-clang-complete-executable "~/.emacs.d/clang-complete")
  (setq ac-sources '(ac-source-clang-async))
  (ac-clang-launch-completion-process)
)

(defun my-ac-config ()
  (add-hook 'c-mode-common-hook 'ac-cc-mode-setup)
  (add-hook 'auto-complete-mode-hook 'ac-common-setup)
  (global-auto-complete-mode t))
(my-ac-config) 
```

错误是：

```
auto-complete error: (void-variable ac-source-c) 
```

# ios - 一个对象的更改应该影响同一类的其他对象

> ID：15520452
> 
> 赞同：1
> 
> 时间：2013-03-20T10:04:02.033
> 
> 标签：ios, design-patterns, delegates, singleton, customization

目前我正在开发一个 iOS 项目。其中我有两个从同一个类派生的视觉相似的对象。我想要的是当我对一个需要在对象 2 中更改相同的对象进行一些更改时。

**详细地：**

我有一个类`MyClass`，`obj1`并且`obj2`派生自`MyClass`. 当我对它执行一些操作时，`obj1`它会调用相应的委托方法`obj1`。现在我想要的是当`obj1`调用它的委托方法时，我还需要调用`obj2`. 就像：如果我改变`obj2`它会影响`obj1`. 我还需要在将来添加更多元素。

**我做了什么：**

我添加了一个 Singleton 类并在其上放置了一个数组并将对象添加到其中。

在委托方法中：

```
- (void)delegateMethod:(id)param
{
   NSMutableArray *arr = [[MySingleTon sharedObject] getArray];
   for(int loop = 0;loop<[arr count];loop++)
   {
      if(![arr objectAtIndex] == self)
      {
          [[arr objectAtIndex:loop] delegateMethod:param];
      }
   }
} 
```

**发生的事情是：**

但问题是它会导致无限循环。Obj2 会做同样的事情，所有其他对象也会做同样的事情。我被困在这里，我有大约 25 个委托方法，需要实现相同的功能。我无法通过添加额外的参数来更改委托方法。

有什么解决方案吗？请帮助我，在此先感谢。

**为什么我需要这个/实际的实现：**

我创建了一个可以缩放/旋转等的自定义视图。我创建了两个相同类的对象并将其添加到我的父视图中。现在，当我更改视图 1 上的任何内容时，它应该更改视图 2 中的类似内容。我还需要添加更多视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:34:31.520

基本上，因为您希望两个不同的对象引用完全相同的状态，您应该将这两个对象指向第三个对象 - 是具有静态状态的基类或具有静态状态的第三种类型，或者是单例。这样做的好处是 Object1 不必了解 Object2，这意味着如果您添加了 Object3，那么您不必更改代码。

因此，每当您的对象写入共享状态时，就可以读取新值。如果您希望对象在该更改时立即更改，那么您需要实现事件（我假设 iOS 具有）以便让 Object1 和 Object2 订阅共享状态的更改。

我不是iOS，而是pseduocode ...

```
abstract class BaseClass {
 protected static sharedArray = new sharedArray();

  void someMethod(int i, int aNewValue) {
   BaseClass.sharedArray[i] = aNewValue;
  }

  int getSharedValue(int i) {
    return BaseClass.sharedArray[i];
  }
}

class ObjectOne extends BaseClass {

}

class ObjectTwo extends BaseClass {

} 
```

请注意，这不是线程安全的，而且有点糟糕，但它可能会为您指明正确的方向。如果您引用的状态由每个对象引用的单例持有，那将会更加整洁（但仍然不是线程安全的）

```
//this isn't written as a singleton
class MySingleton {
    private SharedArray sharedArray = new sharedArray();

    void someMethod(int i, int aNewValue) {
       BaseClass.sharedArray[i] = aNewValue;
    }

    int getSharedValue(int i) {
       return BaseClass.sharedArray[i];
    }
}

class ObjectOne extends MyCustomViewObjectThing {
     private MySingleton mySingleton

     void doMyChangeActivity(int i) {
       mySingleton.someMethod(i, i);
     }
}

class ObjectTwo extends MyCustomViewObjectThing {
     private MySingleton mySingleton

     void doMyChangeActivity(int i) {
       mySingleton.someMethod(i, i*2);
     }      
} 
```

我知道这段代码很糟糕，但它只是为了说明我的意思:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:14:33.133

你可以做一件事。当您在 Object1 中更改时，您手动调用 Object2 的委托方法。因此，当您手动调用 Object2 的委托方法时，您已经在该委托方法中有参数，因此在您的参数列表中添加一个参数，该参数将指示从哪个对象调用此方法。因此，通过使用该参数，如果您的主要 object1 已更改并且您正在手动调用 Object2 的委托方法，并且通过设置条件，您可以解决问题。

希望这会帮助你。

如果您仍然需要任何帮助，我在这里。

一切顺利 ！！！

# intellij-idea - 在 IntelliJ IDEA 中以空格缩进的 java 源文件更快地导航

> ID：15520454
> 
> 赞同：2
> 
> 时间：2013-03-20T10:04:07.320
> 
> 标签：intellij-idea

我有一个项目，其中 java 源代码中的缩进带有空格（按 Tab 时有四个空格）。我想用箭头键左右移动，一次跳过 4 个空格，而不是一个空格。我知道如果我将空格缩进迁移到制表符缩进，我可以做到这一点，但我不能这样做。

IDEA 版本为 12.x

顺便说一句，这是允许向右箭头行尾并转到下一行开头的选项，如果您向下箭头一行以转到下一行的末尾，而不是在结束后很远的同一列上线：

[![在此处输入图像描述](../Images/1dd7833e04c483c7f798c9bb5de908e7.png)](http://mihail.stoynov.com/wp-content/uploads/2013/03/Screen-Shot-2013-03-20-at-11.45.18-AM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:57:45.300

`Ctrl`+ 箭头是你的朋友，它允许移动到上一个/下一个单词，并跳过空格。您还可以使用“行首”键（`Home`键），它允许您在第一个字符和第一个非缩进字符之间切换。

# java - 使用类的对象来获取对其内容的引用的术语或习语是什么？

> ID：15520463
> 
> 赞同：0
> 
> 时间：2013-03-20T10:04:26.407
> 
> 标签：java, oop, design-patterns, static, idioms

[先前关于静态引用](https://stackoverflow.com/a/14932169/262852)的问题因含糊不清而关闭。无论如何，我现在知道了答案（并且希望能记住“解决方案”），但是这种技术叫什么？

最受欢迎的答案是：

> 您的实例变量无法从静态上下文中引用。你需要一个类的对象来获取（引用）它的内容。

这个问题以前有人问过。这种方法肯定有一个流行语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:11:50.107

你的方法的问题是你有一个看起来不需要任何`static`成员的类，但是你试图在静态上下文中工作，因为一个`static main`方法让 Dr.Frankensteined 进入了这个类。

不要那样做。`main`换个班就行了。对另一个问题的公认答案对于快速而肮脏的解决方案是有益的，但它非常肮脏。

# c# - 使用属性时连接状态关闭

> ID：15520466
> 
> 赞同：1
> 
> 时间：2013-03-20T10:04:31.453
> 
> 标签：c#, asp.net, properties, sqlconnection

我正在尝试使用`Using()`带有`SqlConnection`.

我已经制作了`SqlConnection`这样的页面属性......

```
public SqlConnection baseConnection
{
    get { return new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString); }
} 
```

然后像这样创建`using()`语句...

```
using (baseConnection)
            {
                SqlCommand select = new SqlCommand("SELECT * FROM TABLE", baseConnection);
                baseConnection.Open();
                SqlDataReader reader = select.ExecuteReader();

                //... other irrelevant code
            } 
```

但是当代码运行时我得到一个异常

> 异常详细信息：System.InvalidOperationException：ExecuteReader 需要打开且可用的连接。连接的当前状态为关闭

我理解异常，我不明白的是，为什么我打开连接时连接没有打开`baseConnection.Open()`？

我在整个站点中都使用此连接，并且我想将它作为页面属性放入自定义基类中，这样我就不必继续输入它了。这是不允许的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T10:07:31.673

**我在你的例子中发现的问题**

> 每次请求*baseConnection*属性时都会获得新的 SqlConnection 对象

**有问题的代码：**

```
public SqlConnection baseConnection
{
    get { return new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString); }
} 
```

**更正的代码**

```
private SqlConnection _baseConnection;
public SqlConnection BaseConnection
{
    get { return _baseConnection = _baseConnection ?? new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString); }
} 
```

这`return _baseConnection = _baseConnection ?? new SqlConnection()`是使用 C# 中的 Null Coaleasing 运算符，即如果变量为空`??`，它将创建新实例。`_baseConnection`

**我的 Assumptions**
`BaseConnection`属性在某些中定义`BaseClass`，派生类未在子派生类中进一步扩展。通过这种方式，每个派生类类型都会使用一个 SqlConnection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:12:24.877

您的代码应该是：

```
using (var myConnection = baseConnection)
            {
                SqlCommand select = new SqlCommand("SELECT * FROM TABLE", myConnection );
                myConnection .Open();
                SqlDataReader reader = select.ExecuteReader();

                //... other irrelevant code
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T06:31:44.010

```
 string sQry = "Select * from TestEmp"; // Select Table
   SqlCommand cmd = new SqlCommand(sQry, conDB);// Pass Sql Query & Sql Connection in Sql Command
   conDB.Open();// Open DB
   SqlDataAdapter objAdapter = new SqlDataAdapter(cmd); // Create DisConnected Architecture
   DataTable objTable = new DataTable(); // Create Data Table
   objAdapter.Fill(objTable);// Fill Data Table using Adapter Object
   dgvDisplay.DataSource = objTable; // Display select result in DataGridView Box
   conDB.Close(); // Close Connection 
```

# security - JBoss AS6 如何安全使用 context.lookup

> ID：15520472
> 
> 赞同：1
> 
> 时间：2013-03-20T10:04:39.487
> 
> 标签：security, jboss6.x

我刚刚将我的应用程序从 JBoss 3 升级到 Jboss 6。我正在尝试使用上下文查找来获取 MBeanServerConnection，如您所见：

```
private MBeanServerConnection getAdapter() throws NamingException{
        String [] creds = getUserCreds();
        String username = creds[0];
        String pwd      = creds[1];
        setPrincipal(new SimplePrincipal(username));
        setCredential(pwd.toCharArray());
        return (MBeanServerConnection) context.lookup("jmx/invoker/RMIAdaptor"); 
```

当我通过取消注释以下行在 c:\App\EJBContainer\server\default\deploy\jmx-jboss-beans.xml 中启用安全性时：在 c:\App\EJBContainer\server\default 中定义应用程序策略后安全\conf\login-config.xml，我收到一个异常说我没有提供用户/密码：java.lang.SecurityException：JMXConnectorAuthenticator 需要传入用户名/密码凭据。有人可以告诉我我做错了什么? 谢谢。波阿斯。

# html - 链接悬停时如何隐藏浏览器左下角的url

> ID：15520474
> 
> 赞同：1
> 
> 时间：2013-03-20T10:04:42.220
> 
> 标签：html, google-chrome, url, firefox, hyperlink

当我用光标悬停链接时，我想隐藏显示的 url。我只想在我的浏览器上这样做。网上有很多关于这个的问题，但我没有找到任何可行的解决方案。我正在寻找 chrome 或 firefox 的解决方案。

为什么我需要这样做？我很快就会展示一个网站演示，我不希望人们识别网站 url，因为它还没有启动。我决定在没有地址栏的“弹出式”窗口中打开该站点，因此实现我的目标唯一缺少的部分是隐藏浏览器底部显示的 url。

你们有什么可以解决的吗？

**编辑：**最好用一些插件/插件在浏览器中进行更改，我不想替换我的 html 标记中的所有链接。但是通过在每个链接处循环来解决这个问题的 javascript 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:21:15.160

您需要为 firefox 安装一个名为 status-4-evar 的插件来实现这一点。 [状态 4-evar](https://addons.mozilla.org/firefox/addon/status-4-evar)

请按照[url](http://support.mozilla.org/en-US/questions/822487)查找有关如何执行此操作的更多信息。

您还可以更改锚标记并将其替换为跨度标记。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-16T01:07:51.193

如果它仅适用于您的浏览器（Firefox），您可以添加

```
statuspanel {display:none!important;} 
```

在文件中的`@namespace`行下方`userChrome.css`

从 61 版开始，它已更改为：

```
#statuspanel {display:none!important;} 
```

在 Firefox 中转到设置单击帮助，单击故障排除信息。向下滚动一点，将有一个打开文件夹按钮。单击它以转到您的用户个人资料。打开 chrome 文件夹，`userChrome.css`文件应该在那里。如果不只是创建一个名为 chrome 的文件夹。在里面创建一个文件并调用它`userChrome.css`。该文件需要具有：

```
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"); /* only needed once */ 
```

作为第一行。在下面添加：

```
statuspanel {display:none!important;} 
```

保存文件并重新启动 Firefox，您应该一切顺利。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T10:07:30.737

放置`href='javascript:;'`并尝试使用javascript函数重定向页面`window.location='page.html'.`

```
<a href="javascript:;" onclick="javascript:window.location=page.html" clas="">Anchor Text</a> 
```

或者您可以使用通用功能进行重定向。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-20T10:06:53.510

您可以使用 iframe 并将其嵌入到另一个页面中

你可以使用这个[http://www.vincemitchell.me/projects/iframe/](http://www.vincemitchell.me/projects/iframe/)

# php - disableOriginalConstructor() 和 will() 冲突

> ID：15520479
> 
> 赞同：2
> 
> 时间：2013-03-20T10:04:59.143
> 
> 标签：php, unit-testing, phpunit

我有一个使用数据库适配器的模型，我想测试它。数据库适配器的构造函数处理所有数据库连接，所以我想在测试期间避免它，否则它会返回关于未设置 db pass / db username 等的错误。

我当前正在运行的代码如下所示，正如您所看到的，我正在使用`disableOriginalConstructor()`它来防止调用构造函数。

问题是当我尝试使用`$mysql_stub`in时出现此错误`will()`：

> 传递给 PHPUnit_Framework_MockObject_Builder_InvocationMocker::will() 的参数 1 必须实现接口 PHPUnit_Framework_MockObject_Stub，给定的 Mock_Pages_MySQL_Page_46612429 实例，在第 185 行的 /Applications/MAMP/htdocs/lib/Pages/trunk/Tests/Unit/PageTest.php 中调用并定义

有人可以建议，正确的语法是什么？

```
class Page {

  public function getByUrl($url)
  {
      $db_page = $this->getDAOInterface();
      $db_page->getByUrl($url);
      $this->assign($db_page);
      return $this;
  }

}

class PageTest extends PHPUnit_Framework_TestCase
{
  public function testGetByUrl()
  {
      $test_url   = "foo-bar";
      $page_stub  = $this->getMock(
          'Pages_Model_Page', 
          array('getDAOInterface', 'assign')
      );

      $mysql_stub = $this->getMockBuilder('Pages_MySQL_Page')
                         ->setMethods(array('getByUrl'))
                         ->disableOriginalConstructor()
                         ->getMock();

      $mysql_stub->expects($this->once())
                ->method('getByUrl')
                ->with($this->equalTo($test_url));

      $page_stub->expects($this->once())
                ->method('getDAOInterface')
                ->with()
                ->will($mysql_stub);

      $page_stub->expects($this->once())
                ->method('assign')
                ->with($mysql_stub);

      $page_stub->geByUrl($test_url);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:17:12.057

好的，终于弄清楚它有什么问题了。错误是由于我的疏忽造成的。遗嘱应按以下方式调用：

```
$page_stub->expects($this->once())
          ->method('getDAOInterface')
          ->with()
          ->will($this->returnValue($mysql_stub)); 
```

# aspect-ratio - 实现 VGA 80x25 文本控制台纵横比

> ID：15520480
> 
> 赞同：5
> 
> 时间：2013-03-20T10:04:59.847
> 
> 标签：aspect-ratio, vga

我想实现一个具有旧 vga+crt 监视器图形配置外观和感觉的文本控制台。为此，我需要有关典型设置的渲染纵横比的信息。

*   使用 9 x 16 单元的 80 x 25 的比例为 720x400。我从未见过这种比例的显示器（比 16:9 略宽）。720x400 也是显示 windows 9x 启动图像时的分辨率。

*   我已经测量了视频 8088 损坏的比率。它给了我一个 3:2 的比例。

*   我一直在 4:3 显示器上工作，它在硬件文本模式下提供了巨大的拉伸

*   Dosbox 使用 8:5 的比例，这对于 320x200 分辨率是有意义的

那么渲染基于块字符的ansi-art（例如ENDOOM块）的正确比例是多少？

请注意，我说的是显示器上显示的纵横比。我知道我使用的 CRT:s 具有修改输出图像宽度和高度的选项，但如果存在，用户将如何设置这些选项。我将 v 控件设置为全屏尺寸，给出拉伸字符，但对于 win95 启动图像的比例正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:35:53.353

没有人说像素是正方形的。

事实上，在 VGA 出现并提供 640x480 之前，IBM 风格的 PC（我不知道 Macintosh 或 Amiga 是否这样做）没有常见的视频适配器/显示器组合呈现方形像素。

请记住，VGA 是为 CRT 设计的模拟技术。特别是分辨率和刷新率是由主板上的视频适配器控制的，而不是显示器。监视器电子设备可以从左到右和从上到下（在电子设备可以承受的频率范围内）运行电子束，以产生视频控制器卡想要输出的任何像素分辨率。像素是可寻址元素，而不是显示元素，它们的“矩形”程度取决于显示器（大多数显示器都有调整显示器 V 尺寸的控件，因此比例不固定）。

尽管有“标准”分辨率（这基本上意味着它们已明确列出并受到 IBM PC BIOS 的支持），但如果您知道您使用的是哪种硬件，您可能会重新编程视频适配器以呈现不寻常的分辨率。几个视频游戏就是这样做的。

我还记得一个实用程序，它对原始 IBM PC（“MDA”）的单色显示适配器进行了重新编程，以在文本模式下呈现 26 行，而不是 25 行。如果你愿意，该实用程序使用额外的行来输出“状态栏”， Caps Lock、Scroll Lock 和 Num Lock 状态（当时的键盘没有状态灯）。有趣的是，MDA 适配器没有足够的 RAM 来容纳一整行额外的文本，所以视频输出电路在缓冲区的末尾翻转，第 26 行的最后三分之一左右重复了第一行屏幕左上角的几个字符。你和那个一起生活。（该实用程序也适用于 Hercules 视频适配器，它使用相同的控制器芯片，但有更多的 RAM 来支持图形模式，因此不会出现重复字符溢出）。

您还没有听说过 720x400，因为没人关心。程序无法在此模式下处理单个像素，因为它们是由字符生成器电路动态生成的，所以这真的无关紧要。VGA 适配器电路显然可以以这个频率驱动显示器，所以理论上你可以有一个高分辨率的图形模式，但是适配器没有足够的 RAM 来支持它（电子设备中的其他限制也可能是存在；例如，是否可以足够快地扫描视频 RAM？我不知道。）

**编辑，有一些澄清：**

需要 V 尺寸调节旋钮，因为 CRT 电子设备无法以经济的方式精确精确。需要一些回旋余地和手动调整控制垂直扫描范围的电压，以考虑壁电流的电压变化、电子设备老化（特别是电容器）等。目的是使用旋钮调整结果高度，直到输出是“正确的”（大约 4x3）。当电子设备变得足够复杂以自动进行这些调整时，这些旋钮最终消失了。

要回答您的最后一个问题：您必须承认像素不是正方形的事实。忠实的外观需要您以您选择的分辨率将渲染图像 720x400 矩阵缩放（压缩或拉伸）为 4x3 比例。它不会很锋利，我可以计算像素；它不可能是。这与笔记本电脑制造商在 LCD 面板上呈现文本模式的问题相同。

# c - 如何在另一个结构中查看结构的值

> ID：15520494
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:05:35.473
> 
> 标签：c, struct

我有一个结构：

```
typedef struct {
  scalar_t x;   
  scalar_t y;
  scalar_t z;
 } vector_t; 
```

和

```
typedef struct {
      scalar_t x;   
      scalar_t y;
      scalar_t z;
     } point_t; 
```

在结构内部：

```
typedef struct {
    char *name;
    int lives;
    point_t pos; /* current position */
    vector_t vel; /* current velocity */
    .
    .
    .
    int score; /* players' score */
    .
    .
    .
    } player_data_t; 
```

在函数内部，我有计算玩家位置的逻辑。但是，现在当我想查看 x、y 和 z 的值时。当我尝试`printf("%d", plyr->pos.x)`或任何其他值时，我得到的只是 7。所以，我一定是把它弄错了，因为玩家在移动。他不是一直在 pos (7,7,7) 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:35:03.927

正如您在评论中提到的，`scalar_t`实际上是 a `double`，因此 `printf("%d")`解释错误。一个好主意是捆绑 `scalar_t`一个函数来打印出它的值，或者至少是一个包含正确`printf`格式说明符的常量。这样`typedef`就不会失去 ing 的灵活性。例如：

```
#define SCALAR_SPECIFIER "%d"
typedef double scalar_t;
...
scalar_t foo;
printf("Value of foo: " SCALAR_SPECIFIER, foo); 
```

或者

```
typedef double scalar_t;
void print_scalar_t(scalar_t value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:15:02.853

只是一个例子

```
player_data_t foo;

foo.pos.x = 10.;

printf ("%lf\n", foo.pos.x); 
```

# c++ - 解决编译器错误

> ID：15520497
> 
> 赞同：4
> 
> 时间：2013-03-20T10:05:50.093
> 
> 标签：c++, visual-studio, templates, compiler-bug

我有很大的计算几何库。它的内核有问题。我们有定义标量 taits 和自由函数形式的辅助访问器，可以简单地编写`cg::epsilon<T>()`而不是`cg::scalar_traits<T>::epsilon`. 但是在 vs2008 和 vs2010 下有时会争辩说它无法为`T`in推导出模板参数的问题`cg::epsilon<T>`。在 LWS 中的其他编译器上工作正常。

简化版重现：

```
namespace cg
{

template<class S>
S epsilon();

template<>
double epsilon<double>() {return 1;}
template<>
float epsilon<float>() {return 1;}

template<class S>
bool eq(S a, S b, S eps = cg::epsilon<S>())
{
   return true;
}

}

int main(int argc, char* argv[])
{
   cg::eq(0.0, 0.0);
   cg::eq(0.0f, 0.0f);
   return 0;
} 
```

是否有一些解决方法可以使访问器工作？

PS：我们使用`cg::scalar_traits<S>::epsilon()`，这有助于发生错误的地方，但是太冗长了

研究：甚至被宣布为

```
template<class S>
bool eq(S a, S b, S eps = cg::epsilon<double>()) 
```

编译器抱怨他无法为 cg::epsilon 推导出 S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:24:43.180

我的猜测是编译器`S eps = cg::epsilon<S>()`在扣除`S`. 为此，它需要查看声明，`cg::epsilon<S>()`但此时它还不知道`S`。

一种解决方法是避免使用第三个参数的默认值并添加两个不同的重载：第一个采用三个参数 ( `a`,`b`和`eps`)，第二个只采用两个 (`a`和`b`)。后者`eps`来自`cg::epsilon<S>()`（此时`S`已经推导出）并将调用委托给前者，如下面的代码所示：

```
template<class S>
bool eq(S a, S b, S eps)
{
    return true;
}

template<class S>
bool eq(S a, S b)
{
    S eps = cg::epsilon<S>();
    return eq(a, b, eps);
} 
```

# symfony - 在 Symfony2 (doctrine2) 中使用树结构：如何设置顺序？

> ID：15520498
> 
> 赞同：0
> 
> 时间：2013-03-20T10:05:51.060
> 
> 标签：symfony, doctrine-orm, twig

在我的 Symfony2 应用程序中，我有四个实体共同构成一个导航菜单：

{ 类别，Level1Item，Level2Item，Level3Item }

通过“父”和“子”属性将它们连接起来并形成层次结构。在 MySql-db 中，表有一个名为 parent_id 的字段（类别除外，因为它们位于根级别）。此外，还有一个属性“order”（映射到数据库字段“order_id”）。

我通过实体管理器将类别提供给 Twig 模板。如果存在，模板会遍历级别 1、2 和 3 中的项目。

所有项目的显示顺序与项目 ID 一致。但是，我想让 order-property 领先。

在大多数情况下，订单会降下来：{ parent_id, order_id }。因为每个父项的子项的顺序可能是 1、2、3，所以 order_id 本身不是唯一的。它们虽然在每个父池中，但没有两个子代，例如，父代号为 1 的 order_id 为 2。

我知道在使用 QueryBuilder 或在 entityRepository 中使用自定义函数时如何使用排序功能强制排序。但是如何为 Twig 将使用的 ->findAll() 方法设置默认结果顺序，深入到孩子们......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:50:13.960

您可以像这样在实体映射注释中指定顺序：

```
/**
 * @ORM\OneToMany(targetEntity="Category", mappedBy="parent")
 * @ORM\OrderBy({"name" = "ASC"})
 */
private $children; 
```

# java - 引发异常的 PowerMockito 模拟静态方法

> ID：15520499
> 
> 赞同：4
> 
> 时间：2013-03-20T10:05:51.110
> 
> 标签：java, testing, mocking, mockito, powermock

我有一些静态方法可以使用 Mockito + PowerMock 进行模拟。一切都是正确的，直到我尝试模拟一个只抛出异常的静态方法（并且什么都不做）。

我的测试类如下所示：

最佳：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({Secure.class, User.class, StringUtils.class}) 
```

身体：

```
 PowerMockito.mockStatic(Secure.class);
    Mockito.when(Secure.getCurrentUser()).thenReturn(user);

    PowerMockito.mockStatic(StringUtils.class);
    Mockito.when(StringUtils.isNullOrEmpty("whatever")).thenReturn(true);

    PowerMockito.mockStatic(User.class);
    Mockito.when(User.findById(1L)).thenReturn(user); // exception !! ;(

    boolean actualResult = service.changePassword(); 
```

和 changePassword 方法是：

```
 Long id = Secure.getCurrentUser().id;

  boolean is = StringUtils.isNullOrEmpty("whatever");

  User user = User.findById(1L);
  // ... 
```

前 2 个静态调用工作正常（如果我注释掉第 3 个），但最后一个（ User.findById(long id) ）在“Mockito.when”方法中调用时抛出异常。此方法如下所示：

```
 public static <T extends JPABase> T findById(Object id) {
        throw new UnsupportedOperationException("Please annotate your JPA model with @javax.persistence.Entity annotation.");
    } 
```

我的问题是如何模拟这种方法以获得我期望的结果？谢谢你的帮助。

* * *

编辑：

感谢所有回复。我找到了解决方案。我试图模拟一个方法 findById，它不是直接在 User.class 中，而是在 User 扩展的 GenericModel.class 中。现在一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:34:19.817

尝试改变这个：

```
PowerMockito.mockStatic(User.class);
Mockito.when(User.findById(1L)).thenReturn(user); 
```

对此：

```
PowerMockito.mockStatic(User.class);
PowerMockito.doReturn(user).when(User.class, "findById", Mockito.eq(1L)); 
```

请参阅此处的文档：

*   [PowerMockitoStubber javadoc](http://static.javadoc.io/org.powermock/powermock-api-mockito2/1.7.0/org/powermock/api/mockito/expectation/PowerMockitoStubber.html)
*   [PowerMockito 使用](https://github.com/powermock/powermock/wiki/Mockito)

# android - 从动态android评级栏获取评级值

> ID：15520504
> 
> 赞同：0
> 
> 时间：2013-03-20T10:06:01.963
> 
> 标签：android

由于显示超过 5 颗星，我正在`RatingBar`动态创建一个并将其分配给警报对话框。这是代码：

```
rater
    .setCancelable(false)
    .setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            //How to get the rating value here

    });
rater.setNegativeButton("Abbrechen", null);
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View final layout = inflater.inflate(R.layout.ratinglayout,null);
rater.setView(layout);
//rater.setView(getLayoutInflater().inflate(R.layout.ratinglayout, null));
rater.show(); 
```

XML 布局为`RatingBar`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<RatingBar
        android:id="@+id/ratingStars"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:numStars="5"
        android:stepSize="1"
        android:layout_gravity = "center_horizontal"
         />

</LinearLayout> 
```

如何在警报对话框的 OK 处理程序中获取评级值？我尝试了以下方法：

```
RatingBar rating = (RatingBar) findViewById(R.id.ratingStars); 
```

但是当我这样做时，我会收到一个空指针异常警告。因此，问题是如何获得评分值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:08:42.073

```
float rating = ((RatingBar)layout.findViewById(R.id.ratingStars)).getRating(); 
```

在你的确定点击处理程序中使用它。[请参阅此处](http://developer.android.com/reference/android/widget/RatingBar.html#getRating%28%29)的文档

您正在尝试行走`findViewById`，`Activity`我认为这就是它返回 null 的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T12:18:56.177

```
 private void showDialog() 
 {

final AlertDialog.Builder popdialog=new AlertDialog.Builder(this);
final RatingBar rating=new RatingBar(this);
popdialog.setIcon(R.drawable.ic_launcher);
popdialog.setTitle("Give us Rattings");
  popdialog.setView(rating);
   rating.setOnRatingBarChangeListener(new OnRatingBarChangeListener() 
{

@Override
public void onRatingChanged(RatingBar arg0, float arg1, boolean arg2) {

    ratevale=arg1;
}
}); 
```

# android - 在安卓游戏中创建场景

> ID：15520507
> 
> 赞同：0
> 
> 时间：2013-03-20T10:06:08.313
> 
> 标签：android, android-widget

我是使用 andengine 的 android 游戏开发的新手。我正在尝试创建一个由静态树和可以在某些控件的帮助下移动和控制的玩家组成的场景。我创建了一个正在移动的播放器，也可以用一些控制器控制，但是现在当我添加一个静态树时，它会出错。

这是代码和 logcat 错误：

```
package se.treplex.sketchytruck;

import javax.microedition.khronos.opengles.GL10;

import org.anddev.andengine.engine.Engine;
import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.camera.hud.controls.AnalogOnScreenControl;
import org.anddev.andengine.engine.camera.hud.controls.BaseOnScreenControl;
import org.anddev.andengine.engine.camera.hud.controls.AnalogOnScreenControl.IAnalogOnScreenControlListener;
import org.anddev.andengine.engine.handler.physics.PhysicsHandler;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.anddev.andengine.entity.modifier.ScaleModifier;
import org.anddev.andengine.entity.modifier.SequenceEntityModifier;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.scene.background.ColorBackground;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.entity.util.FPSLogger;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.anddev.andengine.opengl.texture.region.TextureRegion;

import android.widget.Toast;

public class demo1 extends BaseExample{
    private static final int CAMERA_WIDTH = 600;
    private static final int CAMERA_HEIGHT = 800;

    // ===========================================================
    // Fields
    // ===========================================================

    private Camera mCamera;

    private BitmapTextureAtlas mBitmapTextureAtlas;
    private TextureRegion mFaceTextureRegion;

    private BitmapTextureAtlas mOnScreenControlTexture,treeatlas;
    private TextureRegion mOnScreenControlBaseTextureRegion,treergn;
    private TextureRegion mOnScreenControlKnobTextureRegion;

    // ===========================================================
    // Constructors
    // ===========================================================

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    @Override
    public Engine onLoadEngine() {
        Toast.makeText(this, "Also try tapping this AnalogOnScreenControl!",
                Toast.LENGTH_LONG).show();
        this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new Engine(new EngineOptions(true, ScreenOrientation.PORTRAIT,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT),
                this.mCamera));
    }

    @Override
    public void onLoadResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(32, 32,
                TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory
                .createFromAsset(this.mBitmapTextureAtlas, this,
                        "face.png", 0, 0);

        this.mOnScreenControlTexture = new BitmapTextureAtlas(256, 128,
                TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mOnScreenControlBaseTextureRegion = BitmapTextureAtlasTextureRegionFactory
                .createFromAsset(this.mOnScreenControlTexture, this,
                        "onscreen_control_base.png", 0, 0);

        this.mOnScreenControlKnobTextureRegion = BitmapTextureAtlasTextureRegionFactory
                .createFromAsset(this.mOnScreenControlTexture, this,
                        "onscreen_control_knob.png", 128, 0);

        this.mEngine.getTextureManager().loadTextures(this.mBitmapTextureAtlas,
                this.mOnScreenControlTexture);

        //for tree 
                this.treeatlas = new BitmapTextureAtlas(1024, 1024,
                        TextureOptions.BILINEAR_PREMULTIPLYALPHA);
                this.treergn = BitmapTextureAtlasTextureRegionFactory
                        .createFromAsset(this.mOnScreenControlTexture, this,
                                "gfx/treedemo.png", 0, 0);
                this.mEngine.getTextureManager().loadTexture(treeatlas);
    }

    @Override
    public Scene onLoadScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

        //for tree
        final Sprite treesprt = new Sprite(10, 0,
                this.mFaceTextureRegion);

        scene.attachChild(treesprt);

        final int centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
        final int centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion
                .getHeight()) / 2;
        final Sprite face = new Sprite(centerX, centerY,
                this.mFaceTextureRegion);
        final PhysicsHandler physicsHandler = new PhysicsHandler(face);
        face.registerUpdateHandler(physicsHandler);

        scene.attachChild(face);

        final AnalogOnScreenControl analogOnScreenControl = new AnalogOnScreenControl(
                0, CAMERA_HEIGHT
                        - this.mOnScreenControlBaseTextureRegion.getHeight(),
                this.mCamera, this.mOnScreenControlBaseTextureRegion,
                this.mOnScreenControlKnobTextureRegion, 0.1f, 200,
                new IAnalogOnScreenControlListener() {
                    @Override
                    public void onControlChange(
                            final BaseOnScreenControl pBaseOnScreenControl,
                            final float pValueX, final float pValueY) {
                        physicsHandler
                                .setVelocity(pValueX * 100, pValueY * 100);
                    }

                    @Override
                    public void onControlClick(
                            final AnalogOnScreenControl pAnalogOnScreenControl) {
                        face.registerEntityModifier(new SequenceEntityModifier(
                                new ScaleModifier(0.25f, 1, 1.5f),
                                new ScaleModifier(0.25f, 1.5f, 1)));
                    }
                });
        analogOnScreenControl.getControlBase().setBlendFunction(
                GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        analogOnScreenControl.getControlBase().setAlpha(0.5f);
        analogOnScreenControl.getControlBase().setScaleCenter(0, 128);
        analogOnScreenControl.getControlBase().setScale(1.25f);
        analogOnScreenControl.getControlKnob().setScale(1.25f);
        analogOnScreenControl.refreshControlKnobPosition();

        scene.setChildScene(analogOnScreenControl);

        return scene;
    }

    @Override
    public void onLoadComplete() {

    }
} 
```

日志猫：

```
03-20 14:40:42.343: E/AndEngine(25980): Failed loading Bitmap in AssetBitmapTextureAtlasSource. AssetPath: gfx/face.png
03-20 14:40:42.343: E/AndEngine(25980): java.io.FileNotFoundException: gfx/face.png
03-20 14:40:42.343: E/AndEngine(25980):     at android.content.res.AssetManager.openAsset(Native Method)
03-20 14:40:42.343: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:314)
03-20 14:40:42.343: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:288)
03-20 14:40:42.343: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.<init>(AssetBitmapTextureAtlasSource.java:55)
03-20 14:40:42.343: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.<init>(AssetBitmapTextureAtlasSource.java:42)
03-20 14:40:42.343: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory.createFromAsset(BitmapTextureAtlasTextureRegionFactory.java:75)
03-20 14:40:42.343: E/AndEngine(25980):     at se.treplex.sketchytruck.demo1.onLoadResources(demo1.java:73)
03-20 14:40:42.343: E/AndEngine(25980):     at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:168)
03-20 14:40:42.343: E/AndEngine(25980):     at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
03-20 14:40:42.343: E/AndEngine(25980):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2103)
03-20 14:40:42.343: E/AndEngine(25980):     at android.view.View.dispatchWindowFocusChanged(View.java:3924)
03-20 14:40:42.343: E/AndEngine(25980):     at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:659)
03-20 14:40:42.343: E/AndEngine(25980):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
03-20 14:40:42.343: E/AndEngine(25980):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 14:40:42.343: E/AndEngine(25980):     at android.os.Looper.loop(Looper.java:130)
03-20 14:40:42.343: E/AndEngine(25980):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-20 14:40:42.343: E/AndEngine(25980):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 14:40:42.343: E/AndEngine(25980):     at java.lang.reflect.Method.invoke(Method.java:507)
03-20 14:40:42.343: E/AndEngine(25980):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-20 14:40:42.343: E/AndEngine(25980):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-20 14:40:42.343: E/AndEngine(25980):     at dalvik.system.NativeStart.main(Native Method)
03-20 14:40:42.367: E/AndEngine(25980): Failed loading Bitmap in AssetBitmapTextureAtlasSource. AssetPath: gfx/gfx/treedemo.png
03-20 14:40:42.367: E/AndEngine(25980): java.io.FileNotFoundException: gfx/gfx/treedemo.png
03-20 14:40:42.367: E/AndEngine(25980):     at android.content.res.AssetManager.openAsset(Native Method)
03-20 14:40:42.367: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:314)
03-20 14:40:42.367: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:288)
03-20 14:40:42.367: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.<init>(AssetBitmapTextureAtlasSource.java:55)
03-20 14:40:42.367: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.<init>(AssetBitmapTextureAtlasSource.java:42)
03-20 14:40:42.367: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory.createFromAsset(BitmapTextureAtlasTextureRegionFactory.java:75)
03-20 14:40:42.367: E/AndEngine(25980):     at se.treplex.sketchytruck.demo1.onLoadResources(demo1.java:94)
03-20 14:40:42.367: E/AndEngine(25980):     at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:168)
03-20 14:40:42.367: E/AndEngine(25980):     at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
03-20 14:40:42.367: E/AndEngine(25980):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2103)
03-20 14:40:42.367: E/AndEngine(25980):     at android.view.View.dispatchWindowFocusChanged(View.java:3924)
03-20 14:40:42.367: E/AndEngine(25980):     at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:659)
03-20 14:40:42.367: E/AndEngine(25980):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
03-20 14:40:42.367: E/AndEngine(25980):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 14:40:42.367: E/AndEngine(25980):     at android.os.Looper.loop(Looper.java:130)
03-20 14:40:42.367: E/AndEngine(25980):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-20 14:40:42.367: E/AndEngine(25980):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 14:40:42.367: E/AndEngine(25980):     at java.lang.reflect.Method.invoke(Method.java:507)
03-20 14:40:42.367: E/AndEngine(25980):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-20 14:40:42.367: E/AndEngine(25980):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-20 14:40:42.367: E/AndEngine(25980):     at dalvik.system.NativeStart.main(Native Method)
03-20 14:40:42.687: D/libEGL(25980): loaded /system/lib/egl/libGLES_hgl.so
03-20 14:40:42.757: E/(25980): Creating OpenGL 1.1 Session
03-20 14:40:42.796: D/BRCM_EGL(25980): eglCreateContext() context: 0x1b7618, VC context 1, Thread 26006
03-20 14:40:42.796: D/BRCM_EGL(25980): eglCreateWindowSurface() surface: 0x1dfcd0, VC surface: 1, Thread: 26006
03-20 14:40:42.796: D/BRCM_EGL(25980): eglMakeCurrent(0x1b7618, 0x1dfcd0, 0x1dfcd0) Thread: 26006
03-20 14:40:42.828: D/AndEngine(25980): onSurfaceCreated
03-20 14:40:42.851: D/AndEngine(25980): RENDERER: VideoCore IV HW
03-20 14:40:42.851: D/AndEngine(25980): VERSION: OpenGL ES-CM 1.1
03-20 14:40:42.851: D/AndEngine(25980): EXTENSIONS: GL_OES_compressed_ETC1_RGB8_texture GL_OES_compressed_paletted_texture GL_OES_texture_npot GL_OES_EGL_image GL_EXT_discard_framebuffer GL_OES_query_matrix GL_OES_framebuffer_object GL_OES_rgb8_rgba8 GL_OES_depth24 GL_OES_depth32 GL_OES_stencil8 GL_OES_draw_texture
03-20 14:40:42.851: D/AndEngine(25980): EXTENSIONS_VERXTEXBUFFEROBJECTS = true
03-20 14:40:42.859: D/AndEngine(25980): EXTENSIONS_DRAWTEXTURE = true
03-20 14:40:42.859: D/AndEngine(25980): onSurfaceChanged: pWidth=240  pHeight=320
03-20 14:40:42.882: E/AndEngine(25980): Failed loading Bitmap in AssetBitmapTextureAtlasSource. AssetPath: gfx/face.png
03-20 14:40:42.882: E/AndEngine(25980): java.io.FileNotFoundException: gfx/face.png
03-20 14:40:42.882: E/AndEngine(25980):     at android.content.res.AssetManager.openAsset(Native Method)
03-20 14:40:42.882: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:314)
03-20 14:40:42.882: E/AndEngine(25980):     at android.content.res.AssetManager.open(AssetManager.java:288)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.onLoadBitmap(AssetBitmapTextureAtlasSource.java:105)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas.writeTextureToHardware(BitmapTextureAtlas.java:156)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.Texture.loadToHardware(Texture.java:116)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:146)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:503)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:154)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:617)
03-20 14:40:42.882: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.run(GLSurfaceView.java:549)
03-20 14:40:42.890: E/AndEngine(25980): Error loading: AssetBitmapTextureAtlasSource(gfx/face.png)
03-20 14:40:42.890: E/AndEngine(25980): java.lang.IllegalArgumentException: AssetBitmapTextureAtlasSource: AssetBitmapTextureAtlasSource(gfx/face.png) returned a null Bitmap.
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas.writeTextureToHardware(BitmapTextureAtlas.java:159)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.Texture.loadToHardware(Texture.java:116)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:146)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:503)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:154)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:617)
03-20 14:40:42.890: E/AndEngine(25980):     at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.run(GLSurfaceView.java:549)
03-20 14:40:42.890: W/dalvikvm(25980): threadid=10: thread exiting with uncaught exception (group=0x40018578)
03-20 14:40:42.914: E/AndroidRuntime(25980): FATAL EXCEPTION: GLThread
03-20 14:40:42.914: E/AndroidRuntime(25980): java.lang.IllegalArgumentException: AssetBitmapTextureAtlasSource: AssetBitmapTextureAtlasSource(gfx/face.png) returned a null Bitmap.
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas.writeTextureToHardware(BitmapTextureAtlas.java:159)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.texture.Texture.loadToHardware(Texture.java:116)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:146)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:503)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:154)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:617)
03-20 14:40:42.914: E/AndroidRuntime(25980):    at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.run(GLSurfaceView.java:549)
03-20 14:40:43.046: D/dalvikvm(25980): GC_CONCURRENT freed 297K, 49% free 2927K/5639K, external 417K/517K, paused 3ms+4ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:35:36.743

错误中说的一切：

```
java.io.FileNotFoundException: gfx/face.png 
```

该方法`createFromAsset(...)`找不到图片。

您确定这是`gfx/face.png`访问的正确路径 ()`face.png`吗？这张图在`gfx`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T08:01:05.787

1.  图像 face.png 不存在 assets/gfx 文件夹中。在您的 logcat 中明确提到。
2.  一旦您将 gfx 设置为资产的基本路径

    ```
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/"); 
    ```

    然后无需在接下来的代码行中再次编写 gfx/ ，因为您已在此处编写了此内容。所以从下面的代码中删除 gfx/ 。

    ```
    this.treergn = BitmapTextureAtlasTextureRegionFactory
                    .createFromAsset(this.mOnScreenControlTexture, this,
                            "gfx/treedemo.png", 0, 0); 
    ```

# android - 如果我没有启动服务或活动，是否需要在广播接收器中设置唤醒锁？

> ID：15520509
> 
> 赞同：6
> 
> 时间：2013-03-20T10:06:13.340
> 
> 标签：android, broadcastreceiver, wakelock

我有一个由警报调用的广播接收器（与 AlarmManager 一起安排）。在这个接收器中，我只是从数据库中查询一个寄存器，并启动一个通知。我读到从广播接收器启动服务或活动时需要唤醒锁，但是，如果我只想显示通知（在通知面板中），是否需要唤醒锁？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T12:44:23.437

> 在这个接收器中，我只是从数据库中查询一个寄存器，并启动一个通知。

不要在主应用程序线程上执行数据库 I/O。

> 我读到从广播接收器启动服务或活动时需要唤醒锁，但是，如果我只想显示通知（在通知面板中），是否需要唤醒锁？

一般来说，不，您不需要 a `WakeLock`，`BroadcastReceiver`甚至不需要通过`_WAKEUP`警报调用的 a 。`AlarmManager`保证在这种情况下，它将使用自己的`WakeLock`.

但是，同样，在这种情况下，您真的不应该在主应用程序线程上执行数据库 I/O，`onReceive()`而是在主应用程序线程上调用。此处的正确模式是您将“从数据库中查询寄存器并启动通知”移动到`IntentService`由您启动的`BroadcastReceiver`，以便在后台线程上完成工作。这*将*需要一个`WakeLock`，因为您现在在`onReceive()`. 我有[一个为你`WakefulIntentService`管理的`WakeLock`](https://github.com/commonsguy/cwac-wakeful)，如果你想使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T10:24:59.283

是的，这是必要的。我记得在 Kernel 级别，CPU 会保持运行大约 5 秒。因此，如果您无法在 5 秒内完成发送通知，则必须抓住唤醒锁。并在完成工作后发布。

# php - 表单验证：通过 PHP 的复选框输入

> ID：15520512
> 
> 赞同：-4
> 
> 时间：2013-03-20T10:06:23.507
> 
> 标签：php, validation

嘿，我只是想知道我们如何在点击提交按钮后检查用户是否选中了表单中的复选框。我正在使用 PHP，所以任何有关这方面的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:09:38.680

你可以这样做：

```
if(isset($_POST['checkbox_name']) && $_POST['checkbox_name']!="")
{
    echo 'checkbox is checked'; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:10:59.773

```
<input type='checkbox' name='boxname' value='1' />

<?php
    if(isset($_POST['boxname'])
    {
        echo "check box is checked";
    }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:08:33.610

HTML

```
<input type='checkbox' name='theName' value='itsChecked'> 
```

PHP

```
if($_POST['theName'] == 'itsChecked'){} 
```

# javascript - Jquery 使用 firefox (JavaScript) 淡入淡出效果变化

> ID：15520514
> 
> 赞同：0
> 
> 时间：2013-03-20T10:06:33.470
> 
> 标签：javascript, jquery, firefox, fadein, fadeout

我在一张桌子上使用了 Jquery。如果我将鼠标移到一行上，它会改变颜色。以下Javascript是为IE7制作的，效果在这里完美。当我在 Firefox 中运行此脚本时，文本会随着背景消失。Firefox 中的此效果在淡出时显示空（白色）行。可能他这样做是因为效果是整个行。

有没有办法让文本始终可见？（文字在 a 中）

```
$(document).on({
         mouseenter: function(e) {
             $(this).fadeIn('fast', function() {
                $(this).addClass("white");
            });
         },
         mouseleave: function(e) {
             $(this).fadeOut('fast', function() {
                $(this).removeClass("white");
            });

            $(this).fadeIn('fast', function() {
                $(this).addClass("grey");
            });
         }
    }, 'table[id*="tbl_main"] tbody tr[id*="dataCell_"]'); 
```

表格一行的html：

```
<tr id="ctl00_contentHolder_dataCell_lbl_currencyMisc0" class="grey">
<td align="center"><input type="image" name="ctl00$contentHolder$0-181337" id="ctl00_contentHolder_0-181337" runat="server" src="img/plus.gif" style="border-width:0px;" /></td>
<td title="New Network Hub" align="center">181337</td><td align="center">11337.06</td>
<td align="center"><span id="ctl00_contentHolder_lbl_currencyMisc1">USD</span></td>
<td align="center">6</td><td align="center">31337.36</td><td align="center"><span id="ctl00_contentHolder_lbl_currencyReport1">USD</span></td>
<td align="center">12</td><td align="center">13371.3</td><td align="center">63.82%</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:19:01.507

您正在尝试`fadeIn`或元素。如果 Firefox 没有显示之后的内容，它会很好地工作，因为它应该被隐藏（使用 CSS -> ）。这就是:) 的使命——[看看 API](http://api.jquery.com/fadeOut/)。`fadeOut``tr``fadeOut``display:none``fadeOut`

如果我理解您的问题，您想以平滑的效果更改背景颜色。如果是，那么 JQuery UI[`.toggleClass(...)`](http://api.jqueryui.com/toggleClass/)就是您要搜索的内容。JQuery 库也有一个[`toggleClass(...)`](http://api.jquery.com/toggleClass/)方法，但没有任何效果。它会立即更改课程。

我在[JSFiddle](http://jsfiddle.net/dAde3/2/)上创建了一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:35:10.370

我认为你应该试试这个：

```
 var state = true;
 $( "#tab tr" ).hover(function() {
    if ( state ) {
       $(this).stop().animate({
        backgroundColor: "#f99"
       }, 500 );
   } else {
      $(this).stop().animate({
        backgroundColor: "#fff"
      }, 500 );
   }
   state = !state;
  });
}); 
```

### [检查垃圾箱](http://jsbin.com/ifikay/1/edit)

为此，`jQuery ui library`如果您想为颜色设置动画，您需要一个。

# iphone - 移除图像背景（身份证）并为 OCR 做好准备

> ID：15520515
> 
> 赞同：1
> 
> 时间：2013-03-20T10:06:33.557
> 
> 标签：iphone, ios, image-processing

我想将 OCR 集成到 iOS 应用程序中。我发现了一些有用的教程，特别是[这篇文章：如何：在 iOS (SDK 5) 上编译和使用 Tesseract (3.01)](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)，对我帮助很大。现在我可以从任何具有清晰背景的图像中读取纯文本。但是我想从根本没有明确背景的身份证中读取信息！

我还找到了一些关于在 stackoverflow 中删除背景的答案，例如：[Prepare complex image for OCR](https://stackoverflow.com/questions/9398374/prepare-complex-image-for-ocr)、[Remove Background Color or Texture Before OCR Processing](https://stackoverflow.com/questions/14224995/remove-background-color-or-texture-before-ocr-processing)和[How to use OpenCV to remove non text area from a名片？](https://stackoverflow.com/questions/10255013/how-to-use-opencv-to-remove-non-text-areas-from-a-business-card)

但这些解决方案不适用于 iOS。我理解这些步骤，但我需要一个 iOS 示例，如果它使用 Core Image，那对我来说会更好。

我在 OCR 端没有问题，但我的问题是删除背景。

初始图像：

![需要去掉背景](../Images/154536f8a72752f5103fd790dd55939e.png)

删除后，图像应如下所示：

![去除背景后](../Images/06e597e2d051f11cd91880be38220f5d.png)

你能给我一个iOS的例子吗？或者是否可以向我推荐一个 iOS 示例来删除所有没有黑色的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T03:19:44.103

检测卡片的最佳方法是训练级联分类器。培训不是一个很小的项目。样本图像的数量应该更多，感谢 10K。一旦你得到训练好的级联分类器，你就可以快速检测到卡片。在iOS上检测很快，但是tesseract识别不是很快，

# java - 如何在碧玉报告中传递 SUBREPORT_DIR

> ID：15520518
> 
> 赞同：1
> 
> 时间：2013-03-20T10:06:43.200
> 
> 标签：java, tomcat, deployment, jasper-reports

我使用*JasperReports*作为 Web 应用程序的报告工具。（JSP + 小服务程序）

我开发了一个`Report`名为. 我正在尝试将此报告部署在 tomcat 服务器上（位于不同的机器上）。`Cust``Sub Report``CustSub`

`Cust`调用`SUBREPORT_DIR`中有一个具有值的参数`"H:\\reports\\CustomerReport\\"`，当我从中运行报告时，此配置有效`local tomcat server`，但是当我尝试运行此报告时，`remote tomcat server`它会给出以下异常。

```
Resource Not Found, CustSub.jasper 
```

所以我认为它没有找到`Sub Report`命名的`CustSub`.

我尝试使用以下两个参数`SUBREPORT_DIR`，但它不起作用。

```
SUBREPORT_DIR = "./"
AND
SUBREPORT_DIR = "com/mycomp/myapp/reports/" 
```

那么我应该如何传递`SUBREPORT_DIR`给`Sub Report`named as `CustSub`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:17:56.530

您必须在 JapserReport 服务器上上传此子报表。

上传步骤。

1:-启动 JasperReport 服务器并右键单击要保存子报表的任何目录。

2：- 然后“添加资源”，然后“文件”，然后“JRXML”，浏览子报告并给出任何名称。

3：- 打开 iReport 并转到主报表，然后从调色板拖动“子报表”并从您的机器浏览子报表。

4：-添加参数以防万一。

5:- 选择子报表并转到属性部分和“子报表表达式”属性，编辑和更改表达式，如“repo:/jasperreport 中子报表 jrxml 的路径”

# android - pushnotification 中的注册 id 是 mobile 或 email id

> ID：15520521
> 
> 赞同：0
> 
> 时间：2013-03-20T10:06:52.633
> 
> 标签：android, push-notification

我正在尝试使用推送通知制作应用程序。我正在创建不同的 gmail 帐户，但我得到相同的注册 ID 以在 Php 服务器上发送我混淆注册 ID 是移动帐户还是 gmail 帐户？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:28:04.693

它使用设备ID。每次注册新设备时，GCM都会返回注册ID，可用于向相应设备推送通知

供您参考：http: [//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html) [http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm -php 和 mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# ios - 在 UITableViewCell 中添加图像作为附件视图未显示

> ID：15520525
> 
> 赞同：0
> 
> 时间：2013-03-20T10:07:01.567
> 
> 标签：ios, objective-c, uitableview, uiimageview

我正在尝试在 UITableViewCell 中添加一些标签和图像作为附件视图。但它没有显示在表格单元格中我的代码是

```
unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSWeekdayCalendarUnit;
NSDateComponents* parts = [[NSCalendar currentCalendar] components:flags fromDate:[NSDate date]];

UILabel *lbTime = [[UILabel alloc]initWithFrame:CGRectMake(-80, -21, 99, 20)];
[lbTime setBackgroundColor:[UIColor clearColor]];
[lbTime setTextColor:[UIColor grayColor]];
[lbTime setFont:[UIFont systemFontOfSize:13]];
int hour = parts.hour;
NSString *amPm = @"Am";
if (hour>12) {
    hour = hour -12;
    amPm = @"Pm";
}
lbTime.text = [NSString stringWithFormat:@"%.02d:%.02d %@",hour,parts.minute,amPm];

UIImageView *imgView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 15, 15)];
imgView.image = [UIImage imageNamed:@"imgWhiteAero.png"];
cell.accessoryView = imgView;

UIView *view = [[UIView alloc]init];
[view addSubview:lbTime];
[view addSubview:imgView];
cell.accessoryView = view;
[view release];
[imgView release]; 
```

标签显示成功，但当我只添加图像作为附件视图时，图像不显示 cell.accessoryView = imgView;

但是当我将它添加到上面提到的代码中的 UIView 中时，它没有显示

# c# - 如何tchart x轴日期和时间控制？

> ID：15520532
> 
> 赞同：0
> 
> 时间：2013-03-20T10:07:22.393
> 
> 标签：c#, .net, teechart

我使用的是 Teechart 版本的 .Net 和 VS2005。

日期和时间的图表类型的 X 轴，Y 轴被添加到线系列。

我不想表示 x 轴日期和时间的空值。

------数据表----------

![在此处输入图像描述](../Images/7c8489b3d073dbc29f15b5ff3b3f7c3a.png)

----- Techart x 轴显示 ------------

![在此处输入图像描述](../Images/06eb16293d218f47f4ab4988195b8a16.png)

红线是光标工具。我设置了'follow mouse = true'的值。光标工具将 x 轴的日期和时间值指示为文本。显示不在数据表中的时间。以下值 18:23:49 显示了 18:23:50 的示例。我想将数据表的日期和时间表示为 x 轴值。

```
my code:

private void TeeChartSet()
{
Steema.TeeChart.Styles.Line line = new Steema.TeeChart.Styles.Line();
TChart1.Series.Add(line);
line.XValues.DateTime = true;
TChart1.Axes.Bottom.Increment = Steema.TeeChart.Utils.DateTimeStep[(int)Steema.TeeChart.DateTimeSteps.OneSecond];
line.Stairs = true;            

TChart1.Series[i].XValues.DataMember = "SetTime";
TChart1.Series[i].YValues.DataMember = "Park Brk Pres Sw1";
TChart1.Series[i].DataSource = Datatable;

TChart1.Axes.Bottom.Labels.DateTimeFormat = "HH:mm:ss";
Steema.TeeChart.AxisLabelStyle.PointValue;
}

private void cursor1_Change(object sender, CursorChangeEventArgs e)
{
    TChart1.Invalidate();
    DateTime Time = DateTime.FromOADate(e.XValue);
    sli_CursorTime.Text = "Cursor Time : " + Time.ToString("yyyy-MM-dd HH:mm:ss");
}

private void MakeDt() //Make datatable Sample Code
{
    DataTable dt = new DataTable();
    dt.Columns.Add("SetTime");
    dt.Columns.Add("Park Brk Pres Sw1");

    DataRow row;

    for (int i = 0; i < 10; i++)
    {
        row = dt.NewRow();
        row["SetTime"] = DateTime.Now.AddSeconds(i * 5);
        row["Park Brk Pres Sw1"] = 0;
        dt.Rows.Add(row);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:11:58.593

非常感谢您提供的额外信息，它对我们非常有用。我做了一个代码，因为你可以用它来解决你的问题。为了编写代码，我使用了注释工具、光标工具和系列线，其中仅显示了注释工具中系列点的值。我还更改了系列的 DateTimeFormat。我添加了一行代码以将数据值导出为 excel 格式，因为您可以看到更改 DateTimeFormat 的结果，并且它以正确的方式工作。

```
 Steema.TeeChart.Tools.CursorTool cursorTool1;
 private Steema.TeeChart.Tools.Annotation ann;
 private double xval;
 private void InitializeChart()
 {
     tChart1.Aspect.View3D = false;
     //Tools
     cursorTool1 = new Steema.TeeChart.Tools.CursorTool(tChart1.Chart);
     cursorTool1.Style = Steema.TeeChart.Tools.CursorToolStyles.Vertical;
    // cursorTool1.Pen.Style = System.Drawing.Drawing2D.DashStyle.Dash;
     cursorTool1.FollowMouse = true;

   //  cursorTool1.OriginalCursor = Cursors.Arrow;
     ann = new Steema.TeeChart.Tools.Annotation(tChart1.Chart);
     ann.Shape.Pen.Visible = false;
     ann.Shape.Shadow.Visible = false;
     ann.Shape.ShapeStyle = Steema.TeeChart.Drawing.TextShapeStyle.RoundRectangle;
     //Series
     Steema.TeeChart.Styles.Line line1 = new Steema.TeeChart.Styles.Line(tChart1.Chart);
     line1.XValues.DateTime = true;
     line1.DateTimeFormat = "HH:mm:ss";
     cursorTool1.Series = line1;
     line1.Stairs = true;
     line1.XValues.DataMember = "SetTime";
     line1.YValues.DataMember = "Park Brk Pres Sw1";
     line1.DataSource = GetDataTable();

    tChart1.Axes.Bottom.Labels.DateTimeFormat = "HH:mm:ss";
    tChart1.Axes.Bottom.Labels.Style = Steema.TeeChart.AxisLabelStyle.PointValue;
    tChart1.Export.Data.Excel.Save("C:\\Test1.xls");
    //Events
    tChart1.AfterDraw += new PaintChartEventHandler(tChart1_AfterDraw);
    cursorTool1.Change += new CursorChangeEventHandler(cursorTool1_Change);
    tChart1.Draw();
 }

//DataTable
 private DataTable GetDataTable()
 {
     DataTable dataTable1 = new DataTable("DataSet");
     //Condition to filter
     //AddColumns in new Table
     DataColumn xval = new DataColumn("SetTime", typeof(DateTime));
     DataColumn yval = new DataColumn("Park Brk Pres Sw1", typeof(double));
     dataTable1.Columns.Add(xval);
     dataTable1.Columns.Add(yval);
     DateTime dt = DateTime.Now;
     for (int i = 0; i < 10; i++)
     {
         DataRow newRow = dataTable1.NewRow();
         newRow[xval] = dt.AddSeconds(i * 5);
         newRow[yval] = 0;
         dataTable1.Rows.Add(newRow);
     }
     return dataTable1;
 }
//Calculate Interpolate point
 private double InterpolateLineSeries(Steema.TeeChart.Styles.Custom series, int firstindex, int lastindex, double xvalue)
 {
     int index;
     for (index = firstindex; index <= lastindex; index++)
     {
         if (index == -1 || series.XValues.Value[index] > xvalue) break;
     }
     // safeguard
     if (index < 1) index = 1;
     else if (index >= series.Count) index = series.Count - 1;
     // y=(y2-y1)/(x2-x1)*(x-x1)+y1
     double dx = series.XValues[index] - series.XValues[index - 1];
     double dy = series.YValues[index] - series.YValues[index - 1];
     if (dx != 0.0) return dy * (xvalue - series.XValues[index - 1]) / dx + series.YValues[index - 1];
     else return 0.0;
 }

 private double InterpolateLineSeries(Steema.TeeChart.Styles.Custom series, double xvalue)
 {
     return InterpolateLineSeries(series, series.FirstVisibleIndex, series.LastVisibleIndex, xvalue);
 }
 private void cursorTool1_Change(object sender, Steema.TeeChart.Tools.CursorChangeEventArgs e)
 {
     xval = e.XValue;
     ann.Text = "";

    this.Text = e.ValueIndex.ToString();
    foreach (Steema.TeeChart.Styles.Series s in tChart1.Series)
    {
        ann.Text += DateTime.FromOADate(s.XValues[e.ValueIndex]).ToString("HH:mm:ss");
    }
 }
 private void tChart1_AfterDraw(object sender, Steema.TeeChart.Drawing.Graphics3D g)
 {
     int xs = tChart1.Axes.Bottom.CalcXPosValue(xval);
     int ys;
     g.Brush.Visible = true;
     g.Brush.Solid = true;
     for (int i = 0; i < tChart1.Series.Count; i++)

         if (tChart1.Series[i] is Steema.TeeChart.Styles.Custom)
         {
             ys = tChart1.Series[i].GetVertAxis.CalcYPosValue(InterpolateLineSeries(tChart1.Series[i] as Steema.TeeChart.Styles.Custom, xval));
             //Draw elipse above cursor tool.
             g.Brush.Color = tChart1.Series[i].Color;
             //Draw annotation as label above cursor tool.
             ann.Top = ys;
             ann.Left = xs;
         }
 } 
```

您能否告诉我们以前的代码是否可以帮助您解决问题？

我希望会有所帮助。

谢谢，

# c++ - 使用 openCv 和 C++ 创建 voronoi 图

> ID：15520537
> 
> 赞同：1
> 
> 时间：2013-03-20T10:07:26.730
> 
> 标签：c++, opencv, image-segmentation, voronoi

我有一个小问题。我需要使用 openCV 和 C++ 创建 BW 图像的 voronoi 图。我应该有类似 Matlab 函数 voronoin 的输出。

目标是为图表的每个区域创建一个掩码。

这是我在 Matlab 中制作的一个示例：

[matlab voronoi 图](http://www.hostingpics.net/viewer.php?id=860401Voronoi.png)

因此，对于每个区域，我应该创建一个蒙版或具有不同的颜色。我尝试了 openCV 函数 distanceTransform 以获得 voronoi 标签。

```
Mat bwCoresGoodInv = 255 - bwCoresGood;
distanceTransform(bwCoresGoodInv, distTr,voronoiLabels, CV_DIST_L2, CV_DIST_MASK_PRECISE, DIST_LABEL_PIXEL);

namedWindow( "voronoiDistLab", CV_WINDOW_AUTOSIZE );
voronoiLabels = voronoiLabels*5;
imshow( "voronoiDistLab", voronoiLabels ); 
```

结果如下图： [voronoi labels openCV](http://www.hostingpics.net/viewer.php?id=776373VoronoiDist.png)

正如您所看到的，每个区域都有不同的颜色（特别是与单元格相对应的东西），有没有办法只使用一种颜色？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T18:25:58.183

如果您询问如何获得与显示标签提供的灰度值不同的颜色，一种方法（可能不是最有效的）是`cv::findContours`在标签图像的边缘检测图像上运行，然后遍历找到的每个轮廓并将其绘制到新图像上，它可以被填充或勾勒出来。它不是非常精确，可能会留下间隙，可能需要对边缘图像进行一些膨胀。

如果 distanceTransform 返回一个将标签图像中的强度值范围映射到具有该值的每个像素的数据结构，那将是非常好的，可能带有二进制图像的向量，其中向量中的第 n 个图像是二进制掩码一个孤立的第 n 个标签区域 - 但我认为现在这必须由用户完成。

# php - jqgrid php无法填充网格

> ID：15520541
> 
> 赞同：1
> 
> 时间：2013-03-20T10:07:37.380
> 
> 标签：php, jqgrid

我正在尝试使用 jqgrid。我设置了列，并附加到该小部件。一切正常，除了网格不包含数据。它只包含一个空行。列、小部件（如日历）有效。

以下是我的网格设置的开始：

```
// Create the jqGrid instance 
$grid = new jqGridRender($conn);

// Write the SQL Query 
 $grid->SelectCommand = "SELECT * FROM `$table_name`";

 // set the ouput format to json 
 $grid->dataType = 'json';

 $grid->table = "$table_name";
  $grid->setPrimaryKeyId("matter_party_ID");
 $grid->serialKey = false;

$grid->setColModel();

// Set the url from where we obtain the data 
$grid->setUrl(????????);

$grid->addCol(array( etc. etc. 
```

如您所见，我正在使用数据库查询检索数据并将 jason 对象返回到网格：

```
// Write the SQL Query 
 $grid->SelectCommand = "SELECT * FROM `$table_name`";

 // set the ouput format to json 
 $grid->dataType = 'json'; 
```

但是数据不存在。经过几次无效搜索后，我被建议添加以下行：

```
$grid->setUrl(????????); 
```

但我不明白。如果已经使用 select 在当前 url 上获取数据，为什么我需要设置 url？你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:26:34.150

观看[链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid)。正如此处给出的，当您不将数组分配给**jqGrid**时，您需要提供一个`url`可以从中检索数据的位置。这是因为**jqgrid需要****json**或**xml**形式的格式化数据，并且不直接处理**结果集**。[您可以选择数据并按照链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid)所示的要求进行处理，然后将**php**用作`url`您的**jqgrid**的 a，该 jqgrid 在另一个**php**文件中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:26:57.417

我正在回答我自己的问题，以防有人需要解决相同或类似的问题。在里面：

```
 $grid->setUrl(????????); 
```

我传递了一个像 grid.php 这样的 php 文件，它调用了再次构建网格的函数！

```
$grid->setUrl('grid.php'); 
```

问题是，当我通过自己的 MVC 生成文件时，它会自动添加页眉和页脚，这会损害网格构造函数返回的 json 对象，并且不允许填充网格！我去掉了页眉和页脚，数据神奇地重新出现了！

# vba - 将文本着色时放置在 B 列中（VBA/Excel）

> ID：15520548
> 
> 赞同：0
> 
> 时间：2013-03-20T10:07:58.343
> 
> 标签：vba, excel, excel-2010

我一直在研究下面的代码。代码将为找到值“test”的每一行着色。当找到“测试”时，我希望程序也将“测试”放在 B 列中。

我已经尝试了一些东西，正如您在下面的“值”中看到的那样，但我无法弄清楚如何将 B 列分配给它。

```
Sub colorF()
  For i = 1 To 3000
    For Kolom = 1 To 25
    ColInd = ""

    If InStr(1, Cells(i, Kolom), "test") > 0 Then ColInd = 3: Value = "test"

    Rows(i).Select
    If Not ColInd = "" Then Selection.Interior.ColorIndex = ColInd
    Next Kolom
  Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:17:36.723

您应该将值链接到单元格：

```
range("B" & i).Value = "test" 
```

# php - 将多个下拉列表添加到填充有数据库值的表中

> ID：15520552
> 
> 赞同：0
> 
> 时间：2013-03-20T10:08:10.530
> 
> 标签：php, javascript

我创建了动态表，单击按钮后在末尾添加行。在`dropdown list`我想要包含数据库值的一列中。

这是我创建表的方式：

```
<script type="text/javascript">
    function createRow() {  
        var row = document.createElement('tr'); // create row node
        var col = document.createElement('td'); // create column node
        var col2 = document.createElement('td'); // create secondcolumn node
        var col3 = document.createElement('td'); // create next  node
        var col4 = document.createElement('td'); // create next column node
        var col5 = document.createElement('td'); // create next column node
        row.appendChild(col); // append first column to row
        row.appendChild(col2); // append second column to row
        row.appendChild(col3); // append next column to row
        row.appendChild(col4); // append next  column to row
        row.appendChild(col5); // append next column to row
        col.innerHTML = '<select name="search-alias-0017" id="hasla" title="Search in">' +
            '<option value="aps" selected="selected">--Wybierz z listy--</option> ' +
            '<option value="stripbooks">opcja</option>' +
            '<option value="popular">Haslo2</option>' +
            '</select>';

        c//rest columns
        var table = document.getElementById("tableToModify"); // find table to append to
        table.appendChild(row); // append row to table
    }
</script> 
```

现在我有`drop down list`两个选择。我修改了它并从我的数据库中加载了一些变量，我希望将这些值放入`<option>`标签中。其实我的`JS`样子：

```
<script type="text/javascript">
        function createRow() {  
<? $q = "select name from vulnerability";
        $result = $db - > query($q) - > fetchall(); ?>
        var options = '';
        options += '<select name="search-alias-0017" id="hasla" title="Search in">';
        for (var i = 0; i < <? echo $result(sizeof($result); ?> ; i++) {
            options += '< option > <? echo $result[i]['name ']; ?> < /option>';
    }
    options+='</select > ';
            var row = document.createElement('tr'); // create row node
            var col = document.createElement('td'); // create column node
            var col2 = document.createElement('td'); // create secondcolumn node
            var col3 = document.createElement('td'); // create next  node
            var col4 = document.createElement('td'); // create next column node
            var col5 = document.createElement('td'); // create next column node
            row.appendChild(col); // append first column to row
            row.appendChild(col2); // append second column to row
            row.appendChild(col3); // append next column to row
            row.appendChild(col4); // append next  column to row
            row.appendChild(col5); // append next column to row
            col.innerHTML = options;

            c//rest columns
            var table = document.getElementById("tableToModify"); // find table to append to
            table.appendChild(row); // append row to table
        }
    </script> 
```

但不知何故我的代码不起作用......有人可以给我一个提示我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:30:06.997

尝试先执行

```
col.innerHTML = '<select name="search-alias-0017" id="hasla" title="Search in">' +
            '<option value="aps" selected="selected">--Wybierz z listy--</option> ' +
            '<option value="stripbooks">opcja</option>' +
            '<option value="popular">Haslo2</option>' +
            '</select>'; 
```

进而

```
row.appendChild(col); 
```

`col`如果您在追加后进行更改，则不会进行任何更改。当您追加时，`appendChild()`函数会复制它的输入参数，因此之后您将无法按照您尝试的方式访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:03:29.570

我认为附加行的问题，所以尝试重新定义表变量：

```
var table = document.getElementById("tableToModify").getElementsByTagName("tbody")[0];
table.appendChild(row); 
```

# database-design - 为抽象策略游戏生成开局书和残局数据库

> ID：15520561
> 
> 赞同：1
> 
> 时间：2013-03-20T10:08:32.647
> 
> 标签：database-design, data-structures, artificial-intelligence

通过对我的抽象策略游戏与 AI 的测试，我注意到前几个动作和最后的动作比游戏中期花费更多的时间。

生成开局书和残局数据库的好方法是什么，这些数据库中应该存储什么？

也许可以使用 perft 功能：

```
private long perft(IBoard boardCopy, int depth)
{
    long nodes = 0;

    List<Move> moves = boardCopy.getMoves();

    if (depth == 1) return moves.size();

    for (int i = 0, n = moves.size(); i < n; i++) 
    {
        boardCopy.make(moves.get(i), true);
        nodes += perft(boardCopy, depth - 1);
        boardCopy.undo(moves.get(i));
    }

    return nodes;
} 
```

并且可以增强保存当前位置和分数的副本吗？

然后应该将此信息提供给移动生成功能还是搜索本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:14:44.900

对于开局，您需要有一种预先计算移动的方法。然后存储游戏状态的哈希值和要进行的移动。谷歌 Zobrist 哈希。

对于残局，根据游戏的不同，您可以从结束游戏的位置开始。谷歌残局表库。它们是通过动态编程从获胜位置构建的，通过“向后”玩游戏。任何可以强制获胜的位置都被标记为获胜位置等。存储获胜位置的哈希值、获胜的移动距离以及可能的最佳玩法。

# android - FragmentActivity 作为 TabHost 中的选项卡

> ID：15520566
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:08:37.240
> 
> 标签：android

我想获得一个示例代码来显示一个在我的主 FragmentActivity 中使用 TabHost 的新 FragmentActivity。FragmentActivity 由五个选项卡组成，其中一个选项卡必须显示具有选项卡的新活动。我的代码：

```
 TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() {

        @Override
        public void onTabChanged(String tabId) {

             fm =   getSupportFragmentManager();
             venueFragment = (FragmentVenue) fm.findFragmentByTag("venue");
             favoriteFragment = (FragmentFavorite) fm.findFragmentByTag("favorite");
             venueTrendingFragment = (FragmentVenueTrending) fm.findFragmentByTag("venuetrendingnow");
             searchFragment = (FragmentSearch) fm.findFragmentByTag("search");
             accountFragment = (FragmentAccount) fm.findFragmentByTag("account");

            android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();

            /** Detaches the venueFragment if exists */
            if(venueFragment!=null)
                ft.detach(venueFragment);

            /** Detaches the favoriteFragment if exists */
            if(favoriteFragment!=null)
                ft.detach(favoriteFragment);

            /** Detaches the venueTrendingFragment if exists */
            if(venueTrendingFragment!=null)
                ft.detach(venueTrendingFragment);

            /** Detaches the searchFragment if exists */
            if(searchFragment!=null)
                ft.detach(searchFragment);

            if(accountFragment!=null)
                ft.detach(accountFragment);

            /** If current tab is venue */
            if(tabId.equalsIgnoreCase("venue")){                

                if(venueFragment==null){        
                    /** Create venueFragment and adding to fragment transaction */
                    ft.add(R.id.realtabcontent,new FragmentVenue(), "venue");                       
                }else{
                    /** Bring to the front, if already exists in the fragment transaction */
                    ft.attach(venueFragment);                       
                }

            }else if(tabId.equalsIgnoreCase("favorite")){   /** If current tab is favorite */

                if(favoriteFragment==null){
                    /** Create favoriteFragment and adding to fragment transaction */
                    ft.add(R.id.realtabcontent,new FragmentFavorite(), "favorite");                     
                }else{
                    /** Bring to the front, if already exists in the fragment transaction */
                    ft.attach(favoriteFragment);                        
                }
            }else if(tabId.equalsIgnoreCase("venuetrendingnow")){   /** If current tab is venueTrendingFragment */

                if(venueTrendingFragment==null){
                    /** Create venueTrendingFragment and adding to fragment transaction */
                    ft.add(R.id.realtabcontent,new FragmentVenueTrending(), "venuetrendingnow");                        
                }else{
                    /** Bring to the front, if already exists in the fragment transaction */
                    ft.attach(venueTrendingFragment);                       
                }
            }else if(tabId.equalsIgnoreCase("search")){ /** If current tab is searchFragment */

                if(searchFragment==null){

                    /** Create searchFragment and adding to fragment transaction */
                    //ft.add(R.id.realtabcontent,new FragmentSearch(MainActivity.this), "search");
                    //Intent intent = new Intent(this,SecondTabhost.class);
                    Intent intent = new Intent(MainActivity.this, SecondTabhost.class);
                    startActivity(intent); 
                }else{
                    /** Bring to the front, if already exists in the fragment transaction */
                    //ft.attach(searchFragment);    
                    Intent intent = new Intent(MainActivity.this, SecondTabhost.class);
                    startActivity(intent);
                }
            }else if(tabId.equalsIgnoreCase("account")){    /** If current tab is accountFragment */

                if(accountFragment==null){
                    /** Create accountFragment and adding to fragment transaction */
                    ft.add(R.id.realtabcontent,new FragmentAccount(), "account");                       
                }else{
                    /** Bring to the front, if already exists in the fragment transaction */
                    ft.attach(accountFragment);                     
                }
            }

            ft.commit();                
        }
    }; 
```

在上面代码中的 else if(tabId.equalsIgnoreCase("search")) 内部，我使用 Intent 转到下一个活动，因此延迟显示下一个具有 tabhost 的 FragmentActivity。我想毫不拖延地显示活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:29:21.700

您必须有一个 MainActivity 并为您的 tabHost 设置一个适配器。此适配器扩展了 FragmentPageAdapter。在 MainActivity.onCreate 添加每个选项卡使用

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager) findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);
    mTabsAdapter.addTab(mTabHost.newTabSpec("form"), YourFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("form"), AnotherFragment.class, null);
    } 
```

在适配器中：

```
public static class TabsAdapter extends FragmentPagerAdapter implements TabHost.OnTabChangeListener,
        ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    public static final class TabInfo {
        private final String tag;
        private final Fragment fragment;
        private final Bundle args;

        TabInfo(String _tag, Fragment _fragment, Bundle _args) {
            tag = _tag;
            fragment = _fragment;
            args = _args;
        }

        public Fragment getFragment() {
            return fragment;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);

    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        Fragment fragment = Fragment.instantiate(mContext, clss.getName(), args);
        TabInfo info = new TabInfo(tag, fragment, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        Fragment fragment = Fragment.instantiate(mContext, clss.getName(), args);
        TabInfo info = new TabInfo(tag, fragment, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return info.getFragment();
    }
} 
```

# objective-c - 用户默认读取崩溃 - 非常不寻常

> ID：15520568
> 
> 赞同：3
> 
> 时间：2013-03-20T10:08:40.090
> 
> 标签：objective-c, nsmutablearray, nsuserdefaults

从`NSUserDefaults`. 我第一次读它很好。我得到数据并且没问题。第二次，我崩溃了/我得到了空值。

我已经检查过的事情：

*   不，我不会在其他地方删除它。
*   不，没有其他人同时调用它。
*   如果它为零？它不应该是零，也没有我擦除它的地方，并且在第一次（有数据）和第二次（崩溃）之间，甚至没有人触摸它。
*   它节省`NSMutableArray`了`NSData`，它可能很好，因为它在第一次调用时起作用。

会是什么呢？

```
return [[NSUserDefaults standardUserDefaults]objectForKey:@"tempImagesArray"]; 
```

我什至没有放代码来保存它，因为我在第一次启动应用程序时保存了它，第二次我什至没有保存任何东西，它从上次在内存中就在那里。（它在第一次调用而不是在第二次调用）

编辑::: 我在崩溃时看到的汇编程序：

```
0x19f8e2c:  movl   %eax, (%esp)
0x19f8e2f:  calll  0x1bcdfee                 ; symbol stub for: objc_msgSend
0x19f8e34:  jmp    0x19f8e38                 ; -[NSUserDefaults(NSUserDefaults) objectForKey:] + 74
0x19f8e36:  xorl   %eax, %eax
0x19f8e38:  addl   $20, %esp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:32:08.357

我想到了几件事：

*   您是`[[NSUserDefaults standardUserDefaults] synchronize]`在将数组设置为默认字典后调用吗？

***Obs.：***正如您的代码显示的那样`NSMutableArray`，我只想指出这一点（根据 Apple 的[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)）：

> 从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。例如，如果您将可变字符串设置为“MyStringDefault”的值，那么您稍后使用 stringForKey: 检索的字符串将是不可变的。

*   您存储的数据是否太大？我在 NSUserDefaults 上找不到实际“数据过多”的定义，但我猜如果数据集太大，可能会发生奇怪的事情。您是否可以尝试将这些数据存储在文件中？[这个 SO answer](https://stackoverflow.com/questions/7198654/how-much-is-too-much-to-store-in-nsuserdefaults)有一个非常简单的解决方案。

# javafx-2 - 如何在 JavaFX 2 中显示和隐藏窗口？

> ID：15520573
> 
> 赞同：1
> 
> 时间：2013-03-20T10:09:03.690
> 
> 标签：javafx-2, hidden-files

需要展示一个在 JavaFX 2 中显示和隐藏窗口的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:26:48.627

A`stage`是 javafx-2 中的一个窗口。它提供了[隐藏](http://docs.oracle.com/javafx/2/api/javafx/stage/Window.html#hide%28%29)和[显示](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#show%28%29)方法：

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

public class HideShowApp extends Application {
    public static void main(String[] args) {
        launch(args);
    }
    @Override
    public void start(Stage stage) throws Exception {
        final Stage window = new Stage();
        window.setX(10);
        Scene innerScene = new Scene(new Label("inner window"));
        window.setScene(innerScene);

        HBox root = new HBox(10d);
        Button showButton = new Button("show");
        showButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                window.show();
            }
        });
        Button hideButton = new Button("hide");
        hideButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                window.hide();
            }
        });
        root.getChildren().add(showButton);
        root.getChildren().add(hideButton);
        stage.setScene(new Scene(root));
        stage.show();
    }
} 
```

# c# - 从 .NET 中的 DBPedia 的大转储文件中提取内容

> ID：15520574
> 
> 赞同：2
> 
> 时间：2013-03-20T10:09:14.960
> 
> 标签：c#, sql-server, rdf, dbpedia, dotnetrdf

我想从[DBPedia 转储文件](http://live.dbpedia.org/dumps/)中提取每篇文章的标签、摘要、类别和相关日期。

我正在使用[dotnetrdf](http://www.dotnetrdf.org/)，我想将提取的数据保存到 MS SQL 数据库（我不想使用像 Virtuoso 这样的三重存储）。

由于转储文件的大小，我无法将转储文件加载到内存中。

有没有提取语句的解决方案？我能想象的唯一方法是将转储文件拆分为更小的块文件，这是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:47:45.520

实际上，dotNetRDF 中的所有内容都旨在支持流式解析，最常见的用例恰好是将内容加载到我们的内存结构中，但即便如此，它也使用引擎盖下的流式解析器子系统。

请参阅阅读 RDF 文档的[高级解析](https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Reading%20RDF#!advanced-parsing)部分，其中介绍了[处理程序 API](https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Handlers%20API)，该 API 使用户可以完全控制解析器生成的数据发生的情况。因此，您可以编写一个自定义处理程序，该处理程序接收流产生的数据并将其放入数据库中。

# android - 对 renderscript 的大量调用会产生错误“创建的 RS 线程数少于预期”

> ID：15520576
> 
> 赞同：1
> 
> 时间：2013-03-20T10:09:15.863
> 
> 标签：android, renderscript

我有一个带有很多项目和图像的微调器的应用程序。

每次用户选择列表中的一项时，都会执行一定数量（1 到 5）的渲染脚本脚本来更改图像的像素。

在做出大约 30 次选择后，应用程序因错误而崩溃。

这是堆栈跟踪。

```
03-20 13:56:59.366: ERROR/RenderScript(3405): Created fewer than expected number of RS threads.
03-20 13:57:02.990: ERROR/AndroidRuntime(3405): FATAL EXCEPTION: main
    java.lang.RuntimeException: createWindowSurface failed EGL_BAD_ALLOC
    at android.view.HardwareRenderer$GlRenderer.createSurface(HardwareRenderer.java:1064)
    at android.view.HardwareRenderer$GlRenderer.createEglSurface(HardwareRenderer.java:961)
    at android.view.HardwareRenderer$GlRenderer.initialize(HardwareRenderer.java:787)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1502)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    at android.view.Choreographer.doFrame(Choreographer.java:532)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

我想我应该以某种方式关闭 renderscript 使用的不必要的线程或什么？

更新：

有时错误是不同的：

```
03-20 16:09:42.293: ERROR/bcc(24984): !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
03-20 16:09:42.293: ERROR/bcc(24984): rslAssert [frameworks/compile/linkloader/include/ELFObject.h:86] SHNCommonDataPtr && "Must init common data size before use!"
03-20 16:09:42.293: ERROR/bcc(24984): !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
```

或者

```
03-20 15:46:27.315: ERROR/AndroidRuntime(19330): FATAL EXCEPTION: Thread-3582
    android.renderscript.RSRuntimeException: Loading of ScriptC script failed.
    at android.renderscript.ScriptC.<init>(ScriptC.java:60)
    at com.gfranq.android.ScriptC_BrightnessContrast.<init>(ScriptC_BrightnessContrast.java:41)
    at com.gfranq.android.filters.logic.ImageFilter.brightnessContrastRs(ImageFilter.java:1438) 
```

它指向线

```
 ScriptC_BrightnessContrast script = new ScriptC_BrightnessContrast(rs, context.getResources(),
            R.raw.brightnesscontrast); 
```

更新 2：

这是亮度对比过滤器。我想每次创建新的输入和输出分配和脚本对象都会占用内存。是否可以将一个分配用于一系列渲染脚本操作？例如，我从位图进行分配，然后对其应用亮度对比度过滤器，然后使用一些具有类似实现的不同过滤器？

```
public Bitmap brightnessContrastRs(Bitmap bmIn, int brightness, int contrast, Context context)
{
    Bitmap bmOut = Bitmap.createBitmap(bmIn.getWidth(), bmIn.getHeight(),
            bmIn.getConfig());
//  RenderScript rs = RenderScript.create(context);
    Allocation allocIn;
    allocIn = Allocation.createFromBitmap(rs, bmIn,
            Allocation.MipmapControl.MIPMAP_NONE,
            Allocation.USAGE_SCRIPT);
    Allocation allocOut = Allocation.createTyped(rs, allocIn.getType());
    ScriptC_BrightnessContrast script = new ScriptC_BrightnessContrast(rs, context.getResources(),
            R.raw.brightnesscontrast);
    script.set_in(allocIn);
    allocIn.destroy();
    script.set_out(allocOut);
    script.set_script(script);
    float rowContrast = ((100.0f + contrast) * (100.0f + contrast) / 10000.0f);
    float rowBrightness = brightness / 255.f;
    script.set_rowBrightness(rowBrightness);
    script.set_rowContrast(rowContrast);
    script.invoke_filter();
    allocOut.copyTo(bmOut);
    allocOut.destroy();
    return bmOut;
} 
```

除了在某些操作中，我还有相当大的 int 数组（360000 个 int），正如我所理解的，每次创建 S criptC 对象时，它都会为在渲染脚本中定义的每个数组分配内存，因此内存可能会很快泄漏。

当我发布问题时，每次创建 RenderScript 对象的注释行都没有被注释，并且内存泄漏得更快。

该设备是nexus 4。

例如这里是带有数组的 RS 文件（其他文件与此类似，但可能不包含数组）

```
rs_allocation out;
rs_allocation in;
rs_script script;

float opacity;
float alphas[360000];
int width;

void root(const uchar4* v_in, uchar4* v_out, const void* usrData, uint32_t x,
      uint32_t y)
{
    float4 current = rsUnpackColor8888(*v_in);
    current.a = alphas[width * y + x] * opacity;
    *v_out = rsPackColorTo8888(current.r, current.g, current.b, current.a);
}
void filter()
{
 #if !defined(RS_VERSION) || (RS_VERSION < 14)
rsForEach(script, in, out, 0);
 #else
rsForEach(script, in, out);
 #endif
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:53:19.693

是的，每次创建一个新的 ScriptC 对象确实需要大量内存。我将它们移到类字段变量中，一切正常。

# c# - XAML 绑定到带参数的静态方法

> ID：15520579
> 
> 赞同：23
> 
> 时间：2013-03-20T10:09:34.660
> 
> 标签：c#, wpf, xaml

我有一个静态类，如下所示：

```
public static class Lang
{
   public static string GetString(string name)
   {
      //CODE
   }
} 
```

现在我想在 xaml 中访问这个静态函数作为绑定。有没有这样的方法，例如：

```
<Label Content="{Binding Path="{x:static lang:Lang.GetString, Parameters={parameter1}}"/> 
```

或者是否有必要为每个可能的参数创建一个 ObjectDataProvider？

希望有人能够帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-28T07:47:11.143

我也有这个需求。我使用转换器“解决”了（就像[这里](http://goo.gl/Gd7bJH)建议的那样）。

首先，创建一个返回翻译后字符串的转换器：

```
public class LanguageConverter : IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
    if (parameter == null)
      return string.Empty;

    if (parameter is string)
      return Resources.ResourceManager.GetString((string)parameter);
    else
      return string.Empty;
  }

  public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
    throw new NotImplementedException();
  }
} 
```

然后将其用于 XAML：

```
<Window.Resources>
  <local:LanguageConverter x:Key="LangConverter" />
</Window.Resources>

<Label Content="{Binding Converter={StaticResource LangConverter}, 
                         ConverterParameter=ResourceKey}"/> 
```

问候。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T10:43:09.413

正确的方法是走 objectdataprovider 路线。虽然如果您只是绑定到文本而不是使用标签，我会使用文本块。

```
<ObjectDataProvider x:Key="yourStaticData"
                ObjectType="{x:Type lang:Lang}"
                MethodName="GetString" >
                <ObjectDataProvider.MethodParameters> 
                     <s:String>Parameter1</s:String> 
                </ObjectDataProvider.MethodParameters>
</ObjectDataProvider>

<TextBlock Text={Binding Source={StaticResource yourStaticData}}/> 
```

# android - Android HttpPost 从 Youtube 获取“无效请求 URI”

> ID：15520580
> 
> 赞同：0
> 
> 时间：2013-03-20T10:09:35.280
> 
> 标签：android, youtube, http-post

我正在尝试访问 Youtube 的这个 URL（电话没有代理设置，直接连接到互联网）

> [http://gdata.youtube.com/feeds/api/videos/-/music?q=gagamv&max-results=50&alt=json&v=2](http://gdata.youtube.com/feeds/api/videos/-/music?q=gagamv&max-results=50&alt=json&v=2)

上面的 URL 我放在任何 PC 浏览器中都可以正常工作（将返回纯 JSON 字符串），即使我没有登录 Youtube。

但是我试图通过 Android 的 HttpPost 访问的这个 URL，只有我能得到的是**Invalid Request URI**

这是我的代码：

```
 public static final String HEADER_TYPE="Content-Type";
    private static final String HEADER_TYPE_SET="application/text; charset=utf-8";
    public static final String HEADER_TYPE_2="Accept";
    private static final String HEADER_TYPE_SET_2="application/x-www-form-urlencoded";

    /** Socket操作逾時(3600秒) */
    public static final int TIMEOUT_SOCKET=7000;
    /** 連線逾時(3600秒) */
    public static final int TIMEOUT_CONECTION=7000;

    List<NameValuePair> params=new ArrayList<NameValuePair>();
    HttpParams httpP=null;
    DefaultHttpClient mHttpClient=null;
    UrlEncodedFormEntity entity=null;
    HttpResponse httpResp=null;
    String ret="";

    BasicHeader[] header=new BasicHeader[2];
    header[0]=new BasicHeader(HEADER_TYPE, HEADER_TYPE_SET);
    header[1]=new BasicHeader(HEADER_TYPE_2, HEADER_TYPE_SET_2);
    httpP=new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpP, TIMEOUT_CONECTION);
    HttpConnectionParams.setSoTimeout(httpP, TIMEOUT_SOCKET);
    String url=new String("http://gdata.youtube.com/feeds/api/videos/-/music?q=gagamv&max-results=50&alt=json&v=2");
    Log.d(Constants.TAG, "Youtube search URL: "+url);
    HttpPost post=new HttpPost(url);
    mHttpClient=new DefaultHttpClient(httpP);

    entity=new UrlEncodedFormEntity(params);
    post.addHeader(entity.getContentType());
    post.setEntity(entity);
    httpResp=mHttpClient.execute(post);

    String status=httpResp.getStatusLine().toString();
    ret=new String(EntityUtils.toString(httpResp.getEntity(), "UTF-8")); 
```

我能做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:16:17.737

您需要使用 HTTP GET 请求。问题是您使用的是 HTTP Post，当您使用 get 请求时，url 将返回数据。

尝试以下代码（我已将缓冲区大小设为 4096，但您可以根据您的要求将其更改为动态）：

```
 URL url = new URL("http://gdata.youtube.com/feeds/api/videos/-/music?q=gagamv&max-results=50&alt=json&v=2");
           HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
           try {
             InputStream in = new BufferedInputStream(urlConnection.getInputStream());
             byte buffer[] = new byte[4096];

             in.read(buffer);
             String str = new String(buffer);
             Log.d(TAG, " Data: " + str);

           } finally {
             urlConnection.disconnect();
           } 
```

# c# - 在打开的 xml 中查找特定表（在书签之后）

> ID：15520585
> 
> 赞同：4
> 
> 时间：2013-03-20T10:10:05.693
> 
> 标签：c#, openxml

我有一个包含多个表格的文档。我需要填写其中一些表格。我遇到的问题是如何找到它们？我可以通过它们互动

```
var doc = document.MainDocumentPart.Document;
var tables= doc.Body.Elements< Table >(); 
```

但是我如何找到一个特定的表？桌子可以改变，所以我不能依赖订单。我正在考虑在特定表格之前放置一个书签，然后在书签之后找到第一个表格，但我没有找到如何做到这一点......

那么，如何在文档中找到特定的表呢？

如果有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T17:58:42.357

给表格标题。

首先在Word中，创建表格，然后右键单击其中一个，表格属性，替换文本，填写标题框，保存，关闭。

现在在 OpenXML 中，找到带有特定标题的表。

```
IEnumerable<TableProperties> tableProperties = bd.Descendants<TableProperties>().Where(tp => tp.TableCaption != null);
foreach(TableProperties tProp in tableProperties)
{
    if(tProp.TableCaption.Val.Equals("myCaption")) // see comment, this is actually StringValue
    {
        // do something for table with myCaption
        Table table = (Table) tProp.Parent;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T17:25:05.703

本文描述了一个使用内容控件的简洁解决方案：

[http://msdn.microsoft.com/en-us/library/cc197932(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/cc197932(v=office.12).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:15:35.390

一个更优雅的解决方案，使用 bookmarkstart 作为定位器将是

```
BookmarkStart bookmark = YourBookMarkStart;
OpenXmlElement elem = bookmark.First().Parent;
//isolate tabel
while (!(elem is DocumentFormat.OpenXml.Wordprocessing.Table))
    elem = elem.Parent;
var table = elem; //found 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:52:25.993

我找到了解决方案。这不是我想出的最漂亮的解决方案，但它似乎有效。至少在我尝试过的文件上。

我创建我的表。在表格中的任意位置插入书签，然后找到该书签。

```
var bookmarkStart = doc.Body.Descendants<BookmarkStart>().Where(r => r.Name == "tableBookmark");
if (bookmarkStart != null)
{
    var test  = bookmarkStart.First().Parent.Parent.Parent.Parent;
    if (test.GetType() == typeof (DocumentFormat.OpenXml.Wordprocessing.Table))
        myTable = (Table)test;
} 
```

请随时给我一个更好的解决方案！！！:) 例如，我可能会创建一个递归方法来查找表，而不是使用 Parent.Parent.Parent.Parent

# comparison - Go中的比较和排序

> ID：15520590
> 
> 赞同：3
> 
> 时间：2013-03-20T10:10:20.430
> 
> 标签：comparison, operator-overloading, go, equality, comparable

Go 中是否有任何内部机制来实现相等和排序？（所以我们可以在类型上使用比较运算符 - ==、!=、<、>、<=、>=。）

注意：我看到一些类型有一个名为 Less 的方法，它似乎用于排序。但是我找不到那个或相等检查接口的文档（如果有的话）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:21:20.337

Go[不支持运算符重载](http://golang.org/doc/faq#overloading)，因此您将无法使用您的类型覆盖这些运算符的行为。如果您需要在您的类型上使用这些操作，则将它们定义为方法。

您可能在某些类型上看到的`Less`方法可能作为[`sort.Interface`](http://godoc.org/sort#Interface)接口的一部分存在，或者可能[`heap.Interface`](http://godoc.org/container/heap#Interface)（它扩展了排序接口）。

# javascript - 正则表达式替换回车

> ID：15520591
> 
> 赞同：2
> 
> 时间：2013-03-20T10:10:21.293
> 
> 标签：javascript, regex, carriage-return

我正在寻找改进 JavaScript 中的正则表达式，它查找新行或换行符并用回车替换它们。- 是的，Photoshop 的文字很老套。

*   “你好\n世界”
*   《你好
    世界》

应该全部替换为

-你好/rworld

是的，我知道上面的第二个示例被视为实际换行符

到目前为止，我不得不使用两个正则表达式，而我确实需要一个来查找这两个项目（多次），但是成功地将它们连接在一起却让我望而却步。

```
// replaces \n with \r carriage return
var rexp = new RegExp(/\\n/gi)
content = content.replace(rexp , "\r")

// replaces <br> with \r carriage return
rexp = new RegExp(/<br>/gi)
content = content.replace(rexp , "\r") 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:12:44.687

您可以使用[“特殊`|`或”](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-or)运算符：

```
content = content.replace(/\n|<br\s*\/?>/gi, "\r"); 
```

它将成功地适用于：

```
"hello\nworld"
"hello<br>world"
"hello<br />world" 
```

# android - 9 补丁转换为渐变

> ID：15520593
> 
> 赞同：6
> 
> 时间：2013-03-20T10:10:30.763
> 
> 标签：android, android-actionbar, actionbarsherlock, nine-patch

我想在我的 Android 应用程序上有一个带有底线的 ActionBar。这条线应该看起来像这样，只有 4 种颜色：![我想要的是](../Images/79e6f9090bf93ab8706f721e894d0387.png)

为了获得这种效果，我使用了 9patch 但不是显示 4 种颜色，而是用渐变替换它：![我得到了什么](../Images/a6b053579833e962822889223419dc72.png)

这是我正在使用的 9Patch。你知道我错在哪里吗，因为我不明白为什么：/

![我想要的是](../Images/a3576dfb19a71f4e7869c3af951f645b.png)

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:17:50.480

尝试编辑你的 9-patch，这样颜色块不是 1 像素宽，而是 3 宽，其中只有中间像素被标记为可拉伸。这可能会给你你需要的东西。

这样做是因为您已将颜色之间的边界标记为可拉伸，因此当它拉伸您的 9-patch 时，它会在边界处插入值，以便产生平滑的过渡。如果您将 9-patch 更改为我的建议，您会将边界标记为不可拉伸，这应该会删除渐变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:18:19.493

您需要使用这样的图像：

![在此处输入图像描述](../Images/28f2af02f4e1436a2b1ba41a5b5be988.png)

# iphone - NSInternalInconsistencyException - 无法在包中加载 NIB：

> ID：15520595
> 
> 赞同：3
> 
> 时间：2013-03-20T10:10:44.347
> 
> 标签：iphone, ios, uiviewcontroller, bundle, resourcebundle

我正在尝试将我所有的 .xib 资源捆绑到一个“ViewController.bundle”中，以便与“MyLibrary.framework”一起发布。如果我只是将所有 .xib 文件放在框架项目中，一切正常，但如果我将它们放在“ViewController.bundle”中，一切都会分开

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'Could not load NIB in bundle: 
'NSBundle </Users/administrator/Library/Application Support/iPhone Simulator/5.0/
Applications/8AD68FD1-158E-4926-AE03-8FEF870E7012/ios.app/ViewController.bundle> 
(not yet loaded)' with name 'FirstViewController_iPhone''
*** First throw call stack:
(0x160e052 0x1071d0a 0x15b6a78 0x15b69e9 0x3ff838 0x2a6e2c 0x2a73a9 0x2a75cb 0x2c2b89 0x2c29bd  
0x2c0f8a 0x2c0d7e 0x2c0a22 0x2bfd88 0x5e3ac 0x2df8 0x2e34 0x160fec9 0x1e45c2 0x1e455a 0x289b76 
0x28a03f 0x2892fe 0x209a30 0x209c56 0x1f0384 0x1e3aa9 0x1eedfa9 0x15e21c5 0x1547022 0x154590a    
0x1544db4 0x1544ccb 0x1eec879 0x1eec93e 0x1e1a9b 0x2452 0x2385) 
```

我尝试了各种方法： 1.在Finder中创建“ViewController.bundle”，将所有.xib放在那里，然后拖到xcode 2.为框架项目创建一个新Target，在“Framework & Library”下选择“Bundle”在“OS X”部分（注意：它必须是 OSX，因为我使用的 xcode 4.6 在其“框架和库”下没有“Bundle” - 它曾经有，我曾经创建包含 .png使用此向导的资源）

在这两种情况下，我都确保目标应用程序的“构建阶段”>>“复制捆绑资源”中存在“ViewController.bundle”。我还尝试在我的框架项目的“目标依赖项”下包含“ViewController.bundle”，但我所有的努力都导致了同样的崩溃。

我还尝试了各种加载 .xib 的方法，但均无济于事。但是，以下从同一“ViewController.bundle”加载 .png 资源的代码可以完美运行：

```
// Loading .png resource works perfectly
//  UIImage* closeImage = [UIImage imageNamed:@"ViewController.bundle/first.png"];
//  NSString *szBundlePath = [[NSBundle mainBundle] pathForResource:@"ViewController" ofType:@"Bundle"];
//  UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"showView" message:szBundlePath delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];
//  UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 10, 40, 40)];
//  [imageView setImage:closeImage];
//  [alertView addSubview:imageView];
//  [alertView show];
//  return; 
```

使用相同的代码加载 xib 失败：

```
NSBundle *bViewController = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"ViewController" withExtension:@"bundle"]];
if ( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone ) {
    self.m_pFirstViewController = [[[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:bViewController] autorelease];
    self.m_pSecondViewController = [[[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:bViewController] autorelease];
} else {
    self.m_pFirstViewController = [[[FirstViewController alloc] initWithNibName:@"ViewController.bundle/FirstViewController_iPad" bundle:nil] autorelease];
    self.m_pSecondViewController = [[[SecondViewController alloc] initWithNibName:@"ViewController.bundle/SecondViewController_iPad" bundle:nil] autorelease];
}

    /** It crash in this line!! Note however, both m_pFirstViewController and m_pSecondViewController is allocated and not nil */
self.viewControllers = @[self.m_pFirstViewController, self.m_pSecondViewController];

    /** never reach here already crash */
[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentViewController:self animated:YES completion:^{
    NSLog( @"presented!" );
}]; 
```

在过去的 8 个小时里，我一直在调试这个，谷歌搜索并尝试了 SO 的各种建议，但无济于事......非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:01:32.180

我尝试的第二种方法是最接近的......然后在 Build Settings 中将 OSX 捆绑包修改为 iOS 捆绑包。显然，我错过了几个步骤。我在这里遵循了 Matt Galloway 的教程和示例项目：

[http://www.galloway.me.uk/tutorials/ios-library-with-resources/](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)

现在一切都按预期工作。

感谢大家的帮助！

# ruby-on-rails - 如何为“where”行编写测试

> ID：15520598
> 
> 赞同：1
> 
> 时间：2013-03-20T10:10:52.100
> 
> 标签：ruby-on-rails, ruby, mongodb, omniauth, minitest

我想写控制器测试相关的密码更新测试。我在控制器的第一行找到了经过身份验证的人，条件是。我如何编写与这一行相关的测试。我不能放弃任何想法。

**更改密码控制器**

```
def update
  person = Person.where(_id: session[:user_id]).first
  identity = Identity.where(_id: person.user_id).first
  unless params[:new_password] != params[:new_password_confirmation]
    identity.password = params[:new_password].to_s
    identity.password_confirmation = params[:new_password].to_s
    identity.save
    redirect_to root_url, :notice => "Password has been changed." + person.user_id
  else
    redirect_to :back, :alert => "Password & password confirmation are not match" 
  end
end 
```

**ChangePasswordsController 测试**

```
describe ChangePasswordsController do

  setup do
    request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:identity] 
    @auth=request.env["omniauth.auth"]
  end

  it "should have edit action" do
    get :edit
    assert_response :success
  end

  it "should find person" do
     ... 
  end

  it "should find identity" do
     ... 
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:45:51.867

我不认为你应该写一个测试 where 是否找到一个人。在这种情况下，您最好只检查 update 方法是否使用给定参数调用 Person 上的 find 方法。使用这样的东西：

```
Person.should_receive(:find).with(id: <the userid you've setup for the test>) {[Person.new]} 
```

它应该也可以先检查，但我不记得了，与chaintubbing有关。

# c# - 验证列表中的布尔方法（约束）

> ID：15520601
> 
> 赞同：3
> 
> 时间：2013-03-20T10:11:00.467
> 
> 标签：c#, list, validation, constraints

我想知道这是否可能：

我想要一个列表，我可以在其中添加布尔方法并验证这些方法，当它们都为真时，返回真。当至少一个为假时，返回假。

问题是，当我做类似的事情时：

```
private int _value1, _value2, _value3, _value4;

private bool check2()
{
    return _value2 + _value3 > _value4;
}

private bool check2()
{
   return _value2 + _value3 > _value4;
}

List<bool> constraints = new List<bool>();
constrains.Add(check1());
constrains.Add(check2()); 
```

添加的布尔值当然是添加到列表时验证的结果。我明白了 ;-）

如何使用实际重新验证的方法制作列表？亲切的问候，

马蒂斯

**这就是我想要的。**

在以下答案的帮助下。我做的。可能对寻找相同事物的其他人有用。

```
public class TestClass
{
    private int _value1, _value2, _value3, _value4;

    private void button1_Click(object sender, EventArgs e)
    {
        ConstraintsList cl = new ConstraintsList();
        cl.Add(check1);
        cl.Add(check2);

        bool test1 = cl.AllTrue;
        bool test2 = cl.AnyTrue;

        _value4 = -5;

        bool test3 = cl.AllTrue;
        bool test4 = cl.AnyTrue;

        _value4 = 5;

        cl.Remove(check2);

        bool test5 = cl.AllTrue;
        bool test6 = cl.AnyTrue;
    }

    private bool check1()
    {
        return _value1 + _value2 == _value3;
    }

    private bool check2()
    {
        return _value2 + _value3 > _value4;
    }

} 
```

使用：

```
public class ConstraintsList
{
    private HashSet<Func<bool>> constraints = new HashSet<Func<bool>>();

    public void Add(Func<bool> item)
    {
        try
        {
            constraints.Add(item);
        }
        catch(Exception)
        {

            throw;
        }
    }

    public bool AllTrue { get { return constraints.All(c => c()); } }
    public bool AnyTrue { get { return constraints.Any(c => c()); } }

    public void Remove(Func<bool> item)
    {
        try
        {
            constraints.Remove(item);
        }
        catch(Exception)
        {
            throw;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:12:15.660

是的，有可能，您可以定义一个列表`Func<bool>`

```
List<Func<bool>> constraints = new  List<Func<bool>> 
```

因此，您可以将您的`bool`方法添加到此列表中：

```
constraints.Add(check1);
constraints.Add(check2); 
```

因此，您可以使用如下列表：

```
foreach (var method in constraints)
{
     bool flag = method();
     ... // Do something more
} 
```

或者如果需要，可以使用 LINQ 作为另一个答案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T10:16:47.237

试试这个

```
List<Func<bool>> constraints = new List<Func<bool>> ();

// add your functions
constraints.Add(check1);
constraints.Add(check2);

// and then determine if all of them return true
bool allTrue = constraints.All (c => c());

// or maybe if any are true
bool anyTrue = constraints.Any(c => c()); 
```

# objective-c - 如何生成uiscrollview的图像？

> ID：15520604
> 
> 赞同：0
> 
> 时间：2013-03-20T10:11:05.677
> 
> 标签：objective-c, xcode, uiscrollview

我有一个`UIScrollView`子视图`UILable`和 webviews。因此，当我单击一个按钮时，scrollveiw 的所有内容都应生成为图像。我试图生成它，但它并没有得到它的所有内容，`UIScrollView`只是显示了可见的视图。

我的代码是

```
[Scroll.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:18:22.830

这是因为您的`scrollView's`contentSize 更大，但它`scrollView.frame`仍然更小。

而不是`scrollview`，首先将您的内容添加到`UIView`（让我们说出来`containerView`）。`containerView`应该根据您的内容具有可拉伸的高度宽度。

之后将您的添加`containerView`到`scrollView`. 所以你的`scrollView`要求`contentSize = containerView.frame.size`

现在尝试为`IBOutlet`of截屏`containerView`，而不是`scrollView`.

我还没有尝试过，但我想它应该在这种情况下工作。

# node.js - 2台服务器上的护照会话

> ID：15520605
> 
> 赞同：0
> 
> 时间：2013-03-20T10:11:10.210
> 
> 标签：node.js, passport.js

我的 Web 应用程序生产部署在负载均衡器后面的 2 台服务器上。

我正在使用带会话的护照（本地策略）进行身份验证。

当应用程序在一台服务器上运行时，一切正常，但在生产中，一台服务器无法识别另一台服务器建立的 cookie/会话（每个请求随机发送到不同的服务器，我无法控制它）。

结果 - 我在尝试访问需要身份验证的页面时被重定向到登录页面（即使在我登录之后）。

**我怎样才能让两台服务器创建一个它们都识别的会话 cookie**（显然我对快速会话中间件使用了相同的秘密）。

谢谢，

阿隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:22:54.463

**选项1**

将负载均衡器配置为始终将相同的 ip 路由到同一台机器。对于更改网络的用户来说可能会有问题。

**选项二**

使用第三台运行数据库的机器并设置 express.session（以及与此相关的任何其他数据库连接）以将该机器用作存储。[这个问题/答案](https://stackoverflow.com/questions/10164312/node-js-express-js-passport-js-stay-authenticated-between-server-restart)提到了如何使用 mongoose/mongodb。

我认为这是更常见的解决方案，但如果您不需要第三台机器，当然会更昂贵。

# java - java拖放

> ID：15520610
> 
> 赞同：1
> 
> 时间：2013-03-20T10:11:24.263
> 
> 标签：java, swing, awt, drag-and-drop

我试图熟悉java中的拖放，但我发现的所有教程都是......（让我生气）

我想要的只是从 JList 中拖动一个“PublicUserLabel”（包含在一个名为“UserPanel”的自制 JPanel 中）并将其放入从 JTabbedPanel 初始化的自制类中。拖动对象本身而不是它的字符串表示非常重要！！！

这就是我到目前为止所拥有的：PublicUserLabel

```
public class PublicUserLabel extends JLabel implements DragSourceListener, DragGestureListener, Transferable
    {
        private DragSource ds;
        private PublicUser user;

        public PublicUserLabel(PublicUser user)
        {
            super(user.getName());
            this.user = user;
            ds = new DragSource();
            ds.createDefaultDragGestureRecognizer(this, DnDConstants.ACTION_COPY_OR_MOVE, this);
        }

        @Override
        public void dragGestureRecognized(DragGestureEvent e)
        {
            ds.startDrag(e, DragSource.DefaultCopyDrop, this, this);
        }

        @Override
        public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException
        {
            if (flavor.equals(PublicUserFlavor.publicUserFlavor))
            {
                return this;//TODO ?
            }
            throw new UnsupportedFlavorException(flavor);
        }

        @Override
        public DataFlavor[] getTransferDataFlavors()
        {
            DataFlavor[] df = new DataFlavor[2];
            df[0] = DataFlavor.stringFlavor;
            df[1] = PublicUserFlavor.publicUserFlavor;
            return df;
        }

        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor)
        {
            return flavor.equals(PublicUserFlavor.publicUserFlavor);
        }

    //some more methods
    } 
```

用户面板：

```
public class UserPanel extends JPanel
{
    private JTextField search;
    private List<PublicUser> allUser;
    private JList<PublicUserLabel> list;
    private JScrollPane scrollPane;
    private DefaultListModel<PublicUserLabel> listModel;

    public UserPanel()
    {
        allUser = new LinkedList<PublicUser>();
        listModel = new DefaultListModel<PublicUserLabel>();
        list = new JList<PublicUserLabel>(listModel);
        list.setDragEnabled(true); 
```

公共用户风格：

```
public class PublicUserFlavor extends DataFlavor
{
    public static DataFlavor publicUserFlavor;

    static
    {
        publicUserFlavor = new DataFlavor(PublicUser.class, "PublicUser");
    }
} 
```

选项卡面板：

```
public class TabPanel extends JTabbedPane implements DropTargetListener
{
    public TabPanel()
    {
        setTabPlacement(JTabbedPane.BOTTOM);
        addNewTabComponent("bla");
        addNewTabComponent("blub");
        setDropTarget(new DropTarget(this, this));
    }

    @Override
    public void drop(DropTargetDropEvent e)
    {
        Transferable transferable = e.getTransferable();
        if (transferable.isDataFlavorSupported(PublicUserFlavor.publicUserFlavor))
        {
            e.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
            try
            {
                Object o = transferable.getTransferData(PublicUserFlavor.publicUserFlavor);
                System.out.println(o);
                if (o instanceof PublicUserLabel)
                {
                    PublicUserLabel l = (PublicUserLabel)o;
                    PublicUser u = l.getUser();
                    System.out.println(u);
                }
            }
            catch (UnsupportedFlavorException e1)
            {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            catch (IOException e1)
            {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            e.getDropTargetContext().dropComplete(true);
        }
    } 
```

在 drop 方法中有一些 syso，如果用户被拖放到面板中，则应执行这些 syso。但事实并非如此。我做错了什么吗？谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:49:55.410

我可以看到的主要问题是您正在混合两种不同的 API。您正在使用低级 D'n'D API 和较新的“组件 D'n'D”API。

就个人而言，较新的 API 让我很恼火，所以我倾向于避免它。

我不明白为什么需要转移标签，什么时候转移底层`PublicUser`对象会更好，但这只是我。

![在此处输入图像描述](../Images/b549a9c12c6c9f710e1aa6d9a4c54f77.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DragGestureEvent;
import java.awt.dnd.DragGestureListener;
import java.awt.dnd.DragGestureRecognizer;
import java.awt.dnd.DragSource;
import java.awt.dnd.DragSourceDragEvent;
import java.awt.dnd.DragSourceDropEvent;
import java.awt.dnd.DragSourceEvent;
import java.awt.dnd.DragSourceListener;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.io.IOException;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestDnD {

    public static void main(String[] args) {
        new TestDnD();
    }

    public TestDnD() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JList list;

        public TestPane() {
            setLayout(new BorderLayout());
            list = new JList();
            DefaultListModel model = new DefaultListModel();
            model.addElement(new User("Shaun"));
            model.addElement(new User("Andy"));
            model.addElement(new User("Luke"));
            model.addElement(new User("Han"));
            model.addElement(new User("Liea"));
            model.addElement(new User("Yoda"));
            list.setModel(model);
            add(new JScrollPane(list), BorderLayout.WEST);

            DragGestureRecognizer dgr = DragSource.getDefaultDragSource().createDefaultDragGestureRecognizer(
                            list,
                            DnDConstants.ACTION_COPY_OR_MOVE,
                            new DragGestureHandler(list));

            JPanel panel = new JPanel(new GridBagLayout());
            add(panel);

            DropTarget dt = new DropTarget(
                            panel,
                            DnDConstants.ACTION_COPY_OR_MOVE,
                            new DropTargetHandler(panel),
                            true);

        }

    }

    public static class User {

        private String name;

        public User(String name) {
            this.name = name;
        }

        public String getName() {
            return name;
        }

        @Override
        public String toString() {
            return name;
        }

    }

    public static class UserTransferable implements Transferable {

        public static final DataFlavor USER_DATA_FLAVOR = new DataFlavor(User.class, "User");
        private User user;

        public UserTransferable(User user) {
            this.user = user;
        }

        @Override
        public DataFlavor[] getTransferDataFlavors() {
            return new DataFlavor[]{USER_DATA_FLAVOR};
        }

        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor) {
            return USER_DATA_FLAVOR.equals(flavor);
        }

        @Override
        public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
            Object value = null;
            if (USER_DATA_FLAVOR.equals(flavor)) {
                value = user;
            } else {
                throw new UnsupportedFlavorException(flavor);
            }
            return value;
        }

    }

    protected class DragGestureHandler implements DragGestureListener {

        private JList list;

        public DragGestureHandler(JList list) {
            this.list = list;
        }

        @Override
        public void dragGestureRecognized(DragGestureEvent dge) {
            Object selectedValue = list.getSelectedValue();
            if (selectedValue instanceof User) {
                User user = (User) selectedValue;
                Transferable t = new UserTransferable(user);
                DragSource ds = dge.getDragSource();
                ds.startDrag(
                                dge,
                                null,
                                t,
                                new DragSourceHandler());
            }

        }

    }

    protected class DragSourceHandler implements DragSourceListener {

        public void dragEnter(DragSourceDragEvent dsde) {
        }

        public void dragOver(DragSourceDragEvent dsde) {
        }

        public void dropActionChanged(DragSourceDragEvent dsde) {
        }

        public void dragExit(DragSourceEvent dse) {
        }

        public void dragDropEnd(DragSourceDropEvent dsde) {

            System.out.println("Drag ended...");

        }

    }

    protected class DropTargetHandler implements DropTargetListener {

        private JPanel panel;

        public DropTargetHandler(JPanel panel) {
            this.panel = panel;
        }

        public void dragEnter(DropTargetDragEvent dtde) {
            if (dtde.getTransferable().isDataFlavorSupported(UserTransferable.USER_DATA_FLAVOR)) {
                System.out.println("Accept...");
                dtde.acceptDrag(DnDConstants.ACTION_COPY_OR_MOVE);
            } else {
                System.out.println("Drag...");
                dtde.rejectDrag();
            }
        }

        public void dragOver(DropTargetDragEvent dtde) {
        }

        public void dropActionChanged(DropTargetDragEvent dtde) {
        }

        public void dragExit(DropTargetEvent dte) {
        }

        public void drop(DropTargetDropEvent dtde) {
            System.out.println("Dropped...");
            if (dtde.getTransferable().isDataFlavorSupported(UserTransferable.USER_DATA_FLAVOR)) {
                Transferable t = dtde.getTransferable();
                if (t.isDataFlavorSupported(UserTransferable.USER_DATA_FLAVOR)) {
                    try {
                        Object transferData = t.getTransferData(UserTransferable.USER_DATA_FLAVOR);
                        if (transferData instanceof User) {
                            User user = (User) transferData;
                            dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
                            panel.add(new JLabel(user.getName()));
                            panel.revalidate();
                            panel.repaint();
                        } else {
                            dtde.rejectDrop();
                        }
                    } catch (UnsupportedFlavorException ex) {
                        ex.printStackTrace();
                        dtde.rejectDrop();
                    } catch (IOException ex) {
                        ex.printStackTrace();
                        dtde.rejectDrop();
                    }
                } else {
                    dtde.rejectDrop();
                }
            }
        }

    }

} 
```

# visual-c++ - MFC 滚动绘制错误

> ID：15520616
> 
> 赞同：1
> 
> 时间：2013-03-20T10:11:42.250
> 
> 标签：visual-c++, mfc

我有一个 CDialog 并且在 Dialog 内部有一个包含滚动条的 CWnd。我写了一个函数来处理滚动。当我滚动时，项目会变得模糊和重复。但是当我最小化并再次打开它时，一切似乎都很好。这会是什么原因？？？？

![图像模糊](../Images/d553ccc722b117f6bb8adbda3d37fdab.png)

![最小化后再次打开](../Images/68e929ad6a3207ff0455d18a0429b0c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:06:50.773

在我覆盖 OnPaint() 方法后它起作用了。

```
void MyWnd::OnPaint()
{
    CPaintDC oDC(this);

    CRect oRect;
    GetClientRect(oRect);
    CBrush oBrush(RGB(255, 255, 255));

    oDC.FillRect(oRect, &oBrush); 
```

}

# jsrender - 如何在jsrender中设置评论

> ID：15520619
> 
> 赞同：6
> 
> 时间：2013-03-20T10:11:51.347
> 
> 标签：jsrender

当我使用 jsrender 模板引擎时，我想在代码中添加一些注释，但是我找不到注释标记。

我知道我可以使用 html 注释，但我根本不希望这些注释在 html 上呈现，所以这`<!-- -->`是不可取的。

所以，我想要的是：

```
<script id="row-template" type="text/x-jsrender">
{{// some comment that will not be rendered}}
{{if #data[0]}}
  <tr>
    {{for #data tmpl="#some-template"/}}
  </tr>
{{/if}}
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T17:44:30.167

JsRender 中有一个注释语法`{{!-- this is a comment --}}`。

它也可以用作多行，因此您可以注释掉 JsRender 标记的部分。它完全从输出中消除，因此它不会进入 DOM（与 HTML 注释不同）。

请参阅[http://www.jsviews.com/#commenttag](http://www.jsviews.com/#commenttag)。

有关内置标签的完整列表，请参阅： http: [//www.jsviews.com/#jsrtags](http://www.jsviews.com/#jsrtags)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:55:46.180

这里有一个简单但聪明的技巧。

```
{{if false}}
   This is my comment.
   It can be multi-line comment.
{{/if}} 
```

享受

# java - 如何使用java从新闻文章中提取发布时间和文章内容？

> ID：15520621
> 
> 赞同：1
> 
> 时间：2013-03-20T10:11:53.093
> 
> 标签：java, html

我必须从新闻链接中提取发布时间和文章内容。

例如：从此链接 [http://techcrunch.com/2013/03/19/jawbone-android/](http://techcrunch.com/2013/03/19/jawbone-android/)

我必须将发布时间和文章内容提取为

发布时间：昨天发布

文章内容：Jawbone 今天宣布，该公司的运动追踪腕带 UP 应用程序现在可以在 Google Play 上免费下载 Android 版本。129 美元的 UP 之前只与 iOS 兼容。腕带现在也可以购买了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:15:15.507

我认为你可以使用 jsoup

[http://jsoup.org/](http://jsoup.org/)

jsoup 是一个用于处理真实世界 HTML 的 Java 库。它提供了一个非常方便的 API 用于提取和操作数据，使用最好的 DOM、CSS 和类似 jquery 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T12:00:51.480

对于文章文本提取，您可以使用[BoilerPipe](http://github.com/kohlschutter/boilerpipe)

```
 ArticleExtractor extractor = ArticleExtractor.INSTANCE
 String articleText = extractor.getText(yourHTML); 
```

# css - 加载图像之前的 CSS 图像布局

> ID：15520623
> 
> 赞同：20
> 
> 时间：2013-03-20T10:11:55.583
> 
> 标签：css, image, layout

对于我的移动网站，我想显示具有两个约束的不同但已知高度/宽度的图像：

*   图片应该占据浏览器视图的整个宽度
*   高度应相应缩放（向下或向上）以保持比例

浏览器下载图像后，使用以下 CSS 非常容易：

```
<img src="myImageURl" style="width: 100%; height: auto;" /> 
```

但是由于图像的加载需要一些时间，我希望浏览器在下载图像之前对其进行布局。因此，浏览器在获取图像后不需要重新渲染页面。我尝试了以下方法，但失败了：

```
// The image is not layouted before fetched
<img src="myImageURl" height="myImageHeight" width="myImageWidth" style="width: 100%; height: auto;" /> 

// The image is layouted, but wrong: height is not proportional to the width anymore
<img src="myImageURl" style="width: 100%; height: myImageHeight;" /> 
```

我想在这里得到一些帮助。但是请在 CSS 中，如果我不需要，我不想使用 Javascript / jQuery。

**更新**

我想我不是唯一一个遇到这个问题的人：[https ://graphicdesign.stackexchange.com/questions/3274/fluid-images-how-to-set-width-and-height](https://graphicdesign.stackexchange.com/questions/3274/fluid-images-how-to-set-width-and-height)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-20T10:44:17.450

正如皮特已经说过的，在下载图像之前你不能进行任何（自动）计算，所以浏览器知道它的宽度和高度。

但是由于您能够事先确定图像的纵横比，您可以尝试通过在图像周围添加一个额外的占位符元素来尝试“解决方法”——并利用[`padding`以百分比给出的值总是基于**宽度**计算的事实一个元素，即使对于 padding-top/-bottom](http://www.w3.org/TR/CSS21/box.html#padding-properties)。

这可能看起来像这样：

```
<div style="position:relative; width:100%; height:0; padding-top:50%;">
  <img style="position:absolute; top:0; left:0; width:100%;" src="…">
</div> 
```

这是一个`div`没有高度的元素，但是有一个 padding-top——这将给它一个实际的“高度”，即计算出的 100% 宽度的 50%。（这将是一个宽高比为的图像`2:1`——因为`3:1`padding-top 值相应地必须是 33.333%——等等，基本上`height/width*100`。）

甚至在图像加载之前，这应该跨越我们的占位符。

图像本身绝对定位在这个相对定位的占位符内——确保它显示在文档中的相同位置。

The only thing that *might* be problematic is rounding that has to occur for values with decimal points – 33.333% of 1000 pixels would be 333.33 pixels, and the browser has to round that down to 333 pixels. Should the resized image have an actual height of 334 pixels however, it would just flow out of the area the placeholder div is spanning up by that one pixel. May depend on the actual layout (and your fetish for pixel-perfect accuracy) whether that’s acceptable or not.

# java - JSF char 比较无法按预期工作

> ID：15520637
> 
> 赞同：0
> 
> 时间：2013-03-20T10:12:32.590
> 
> 标签：java, jsf, char, el, logical-operators

我有一个 JSF 页面，我根据托管 bean 属性控制渲染器属性。

```
<p:commandLink action="#{smartphoneBean.drillDown(smartphone.ldapuser,smartphone.productGrp)}"
                            rendered="#{!(smartphone.ldapuser.charAt(0) ge '0' and smartphone.ldapuser.charAt(0) le '9')}"  value="#{smartphone.ldapuser}"> 
```

一旦我运行我的代码。这个值以任意数字开头的 commandLink 仍然会被渲染。

我希望比较 char 值的整数表示。

你对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:50:30.207

[`String#charAt(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)返回一个`char`（Unicode 代码点），它在 EL 中解释为[`Number`](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html). 被`'0'`评估为`String`，而不是`Number`。因此，比较总是会产生不希望的结果。

具有 Unicode 代码点的字符48`0`到[57](http://en.wikipedia.org/wiki/UTF-8#Codepage_layout)。所以，这应该这样做：`9`

```
rendered="#{!(smartphone.ldapuser.charAt(0) ge 48 and smartphone.ldapuser.charAt(0) le 57)}"  value="#{smartphone.ldapuser}"> 
```

### 也可以看看：

*   [如何比较 EL 中的 char 属性](https://stackoverflow.com/questions/14454261/rendered-attribute-not-working-on-a-character-property/14457612#14457612)

# arrays - PropertyGrid 控件 + 自定义对象数组

> ID：15520639
> 
> 赞同：0
> 
> 时间：2013-03-20T10:12:37.577
> 
> 标签：arrays, winforms, propertygrid

我有一个 PropertyGrid 控件，我将一个带有复杂对象数组的容器绑定到该控件：

```
// Collection
public class ParametersCollection
{
    private ParameterObject [] _parameters = null;

    [Category("SubReportParams")]
    public ParameterObject [] Parameters 
    { 
        get { return _parameters; }
        set { _parameters = value; } 
    }

    public ParametersCollection()
    {
        // _parameters initialization here...
    }
}

// Complex object
public class ParameterObject
{
    private string _name = "";
    private string _value = "";

    [Category("Information"), DisplayName("Name")]
    public string Name 
    { 
       get { return _name; } 
       set { _name = value; } 
    }

    [Category("Information"), DisplayName("Value")]
    public string Value 
    { 
       get { return _value; } 
       set { _value = value; } 
    }
} 
```

一切正常，除了两种情况：

1.  例如，如果数组 _parameters 只有 2 项，则默认数组大小为 4，索引为 2 和 3 的项为空。PropertyGrid 将这些项目显示为空字段。如何强制 PropertyGrid 忽略这些字段并且根本不显示它？

2.  _parameters 变量是一个数组类型，因此 _parameters 项的索引从 0 到 n 显示。是否可以使用属性 ParamObject.Name 中的名称而不是数组中的索引来显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:29:29.613

对于第一个问题，最简单的方法是添加从“真实”属性计算的“假”属性。它并不完美，但您可以使用各种属性来帮助：

*   DisplayName 为假财产赋予真实财产的名称
*   Browsable(false) 指示属性网格跳过真实属性
*   EditorBrowsable(never) 指示 Visual Studio 的智能感知不在外部代码中显示此属性。

    ```
     [Browsable(false)]
        public ParameterObject[] Parameters
        {
            get { return _parameters; }
            set { _parameters = value; }
        }

        [Category("SubReportParams"), DisplayName("Parameters")]
        [EditorBrowsable(EditorBrowsableState.Never)]
        public ParameterObject[] NonEmptyParameters
        {
            get
            {
                return _parameters.Where(p => p != null).ToArray();
            }
        } 
    ```

对于第二个问题，一种简单的方法是添加一个 ToString() 实现，如下所示：

```
public class ParameterObject
{
    public override string ToString()
    {
        return Name;
    }
} 
```

否则，您可以将自定义[TypeConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)添加到类中。

# android - 使用 Facebook 的访问令牌在 UIWebView 中显示带有经过身份验证的用户会话的粉丝页面

> ID：15520640
> 
> 赞同：6
> 
> 时间：2013-03-20T10:12:38.483
> 
> 标签：android, objective-c, uiwebview, access-token, facebook-page

我们正在为 iOS 和 Android 开发一个应用程序，它有一个相当奇怪的要求。该应用程序的其中一个选项卡打开了客户的 Facebook 页面。所以这是我们想要的功能：

1.  用户使用 Facebook 的 SDK 登录（适用于 iPhone 和 Android）
2.  我们检索访问令牌，我们的应用程序流程开始
3.  当用户单击 Facebook 页面选项卡时，我们加载指向 Facebook 页面 URL 的 UIWebView。
4.  用户应该能够立即与 Facebook 页面进行交互。

所以发生的是步骤 1-3 正常工作。但是，因为这`UIWebView`之前没有在 Facebook 上进行过身份验证，所以它没有有效的会话。因此，用户需要在此 Web 视图中再次登录才能与页面交互。

有没有办法在加载时使用我们从 Facebook 登录过程中获得的令牌`UIWebView`以避免再次登录？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:04:22.227

我没试过你在尝试什么。但我正在打开其他用户的个人资料页面，并且它正在工作。我正在这样做。 [https://graph.facebook.com/search?q=SEARCH_STRING&type=user&access_token=USER_ACCESS_TOKEN](https://graph.facebook.com/search?q=SEARCH_STRING&type=user&access_token=USER_ACCESS_TOKEN)。希望它会帮助你。

# ruby - 从 Ruby 内部使用 bundler 验证 gem 的版本

> ID：15520641
> 
> 赞同：10
> 
> 时间：2013-03-20T10:12:38.910
> 
> 标签：ruby, bundler

有没有办法从 Ruby 程序中验证我是否拥有最新版本的 gem？也就是说，有没有办法以`bundle outdated #{gemname}`编程方式进行？

我尝试查看 bundler 的源代码，但找不到直接的方法。目前我正在这样做，这很脆弱，很慢而且很不优雅：

```
IO.popen(%w{/usr/bin/env bundle outdated gemname}) do |proc|
  output = proc.readlines.join("\n")
  return output.include?("Your bundle is up to date!")
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T22:52:07.867

一种避免外部执行的方法：

对于捆绑器 1.2.x

```
require 'bundler/cli'

# intercepting $stdout into a StringIO
old_stdout, $stdout = $stdout, StringIO.new 

# running the same code run in the 'bundler outdated' utility
Bundler::CLI.new.outdated('rails')

# storing the output
output = $stdout.string 

# restoring $stdout
$stdout = old_stdout 
```

对于捆绑器 1.3.x

```
require 'bundler/cli'
require 'bundler/friendly_errors'

# let's cheat the CLI class with fake exit method
module Bundler
  class CLI 
    desc 'exit', 'fake exit' # this is required by Thor
    def exit(*); end         # simply do nothing
  end 
end

# intercepting $stdout into a StringIO
old_stdout, $stdout = $stdout, StringIO.new 

# running the same code run in the 'bundler outdated' utility
Bundler.with_friendly_errors { Bundler::CLI.start(['outdated', 'rails']) }

# storing the output
output = $stdout.string 

# restoring $stdout
$stdout = old_stdout 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T22:23:27.780

在 bundler中没有使用命令的编程方式`outdated`，因为代码位于 Thor CLI 文件中，该文件将输出打印给用户。Bundler 的测试也在向系统发出命令并检查输出（[链接到`outdated`测试](https://github.com/carlhuda/bundler/blob/master/spec/other/outdated_spec.rb)）。

`outdated`不过，编写自己的方法来反映cli.rb 中的方法正在做什么应该相当简单。请参阅此处突出显示的代码：[Link to outdated method in Bundler source](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb#L398-L451)。删除行`Bundler.ui`并根据值返回真/假`out_count`

**更新**：我已经将'bundle outdated'提取到一个没有控制台输出和出口的可重用方法中。你可以在这里找到要点：[链接到要点](https://gist.github.com/emilsoman/5353137)。我已经在 bundler 1.3 上对此进行了测试，它似乎可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T22:48:32.793

嗯，听起来你可能想要`bundle show`或`gem env`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:58:09.070

`bundle check`列出过时的宝石，您可能想要使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T00:10:15.873

令人失望的是，这看起来非常困难。

bundler 中有几个[未](https://github.com/carlhuda/bundler/issues/2113) [解决](https://github.com/carlhuda/bundler/issues/2065)的问题，官方似乎是：

> 目前，还没有记录在案的 ruby​​ API。不过，这是我们名单上的东西。

查看捆绑程序源代码[cli.rb](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb)，很明显从 ruby​​ 调用或以合理的方式重现代码会很棘手。

从 CLI 调用方法会很困难，因为它们到处都是[对 exit 的调用](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb#L449)。

重现代码看起来也不好玩，因为那里有很多捆绑器逻辑。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T07:12:25.710

检查最新捆绑器源代码的源代码

我可以想出这个

[https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb#L398](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb#L398)

```
$ irb
1.9.3p327 :001 > require 'bundler'
 => true 
1.9.3p327 :002 > def outdated_gems(gem_name,options={})
1.9.3p327 :003?>   options[:source] ||= 'https://rubygems.org'
1.9.3p327 :004?>   sources = Array(options[:source])
1.9.3p327 :005?>   current_spec= Bundler.load.specs[gem_name].first
1.9.3p327 :006?>   raise "not found in Gemfile" if current_spec.nil?
1.9.3p327 :007?>   definition = Bundler.definition(:gems => [gem_name], :sources => sources)
1.9.3p327 :008?>   options["local"] ? definition.resolve_with_cache! : definition.resolve_remotely!
1.9.3p327 :009?>       active_spec = definition.index[gem_name].sort_by { |b| b.version }
1.9.3p327 :010?>    if !current_spec.version.prerelease? && !options[:pre] && active_spec.size > 1
1.9.3p327 :011?>             active_spec = active_spec.delete_if { |b| b.respond_to?(:version) && b.version.prerelease? }
1.9.3p327 :012?>         end
1.9.3p327 :013?>       active_spec = active_spec.last
1.9.3p327 :014?>       raise "Error" if active_spec.nil?
1.9.3p327 :015?>   outdated = Gem::Version.new(active_spec.version) > Gem::Version.new(current_spec.version)
1.9.3p327 :016?>   {:outdated=>outdated,:current_spec_version=>current_spec.version.to_s,:latest_version=>active_spec.version.to_s}
1.9.3p327 :017?>   end
 => nil 
1.9.3p327 :018 > 
1.9.3p327 :019 >   
1.9.3p327 :020 >   
1.9.3p327 :021 >   
1.9.3p327 :022 >   outdated_gems('rake')
 => {:outdated=>true, :current_spec_version=>"10.0.3", :latest_version=>"10.0.4"} 
```

这可能不适用于早期版本的捆绑程序。

# c++ - 使用 std::map 给出警告：取消引用指针 '<anonymous>' 确实违反了严格的别名规则</anonymous>

> ID：15520642
> 
> 赞同：2
> 
> 时间：2013-03-20T10:12:40.100
> 
> 标签：c++, linux

我已将案例简化为如下所示的代码。编译时，这给出了以下内容：

```
$ g++  -std=c++0x -O2 -Wall t.cpp
t.cpp: In function ‘int main()’:
t.cpp:20: warning: dereferencing pointer ‘&lt;anonymous>’ does break strict-aliasing rules
t.cpp:19: warning: dereferencing pointer ‘&lt;anonymous>’ does break strict-aliasing rules
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_tree.h:175: note: initialized from here 
```

**这个警告告诉我什么？我能做些什么呢？**

```
#include <stdio.h>
#include <stdint.h>
struct TimeKey {

    uint64_t time_stamp;
    uint64_t msg_no;

    TimeKey(uint64_t tstamp, uint64_t no) :
        time_stamp(tstamp),
        msg_no(no)
    {}  

    bool operator < (const TimeKey &other) const 
    {   
        if (time_stamp == other.time_stamp)  //line 19
            return msg_no < other.msg_no;    //line 20
        else
            return time_stamp < other.time_stamp;
    }   
};

template <typename T>
class TimeBuffer {
public:
    uint64_t counter;
    std::map<TimeKey, T> messages;
    void AddMsg(uint64_t tstamp, T val) {
        messages[TimeKey(tstamp, counter++)] = val;
     }   
};  

int main(void)
{
    TimeBuffer<int> messages;
    messages.AddMsg(123456, 1); 
} 
```

请注意，这是在 gcc 4.4.6 附带的 RHEL 6.3 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:08:29.073

这是一个已知（且已修复）的编译器错误，请参阅[this](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=39390)和[this](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42087)。您应该更新您的工具链。

# javascript - 显示隐藏元素

> ID：15520646
> 
> 赞同：-3
> 
> 时间：2013-03-20T10:12:46.520
> 
> 标签：javascript, html

我有`div`并且隐藏`span`在它上面。我想通过单击按钮来显示它。我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>register page</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script type="text/javascript" src="/static/js/test.js"></script>
  </head>
  <body>
    <form id="register-form">           
        <label>Username<span id="register-username-label" class="label label-important" style="visibility: hidden;">Username can't be empty</span></label>
        <input id="register-username-input" type="text" placeholder="Type username..."/>
        <button id="register-submit" onclick="show_element('register-username-label')" class="btn">Register</button>
        </form>
    </div>
  </body>
</html> 
```

还有我的 js 文件：

```
function show_element (id) {
    document.getElementById(id).style.visibility = 'visible';
} 
```

当我单击按钮时，跨度不显示。为什么？它显示得非常快，而不是再次隐藏。

Chrome 开发者工具控制台也不会显示错误。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:47:42.443

尝试添加`return false`到您的按钮 onClick() 事件。像这样：

```
<button id="register-submit" onclick="show_element('register-username-label'); return false;" class="btn">Register</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:16:43.977

您需要在第一次调用该函数之前定义您的函数。通常可以通过将函数代码放在嵌套在`head`HTML 中的脚本标记中来实现。

像这样：

```
<head>
  <script type="text/javascript">
    function show_element (id) {
      document.getElementById(id).style.visibility = 'visible';
    }
  </script>
</head> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T10:15:36.960

抱歉，这段代码有效：

```
 <html>

    <head>

    <script>
    function show_element (id) {
        document.getElementById(id).style.visibility = 'visible';
    }
    </script>
    </head>
    <body>
    <div>
    <span id="register-username-label" class="label label-important" style="visibility: hidden">Username can't be empty</span>
      <button id="register-submit" onclick="show_element('register-username-label')" class="btn">Register</button>
    </div>

    </body>
    </html> 
```

**编辑**

我刚读了你的编辑。顺便说一句，我认为您的绝对路径可能会导致问题。

试试这个代码：

```
 <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8" />
        <title>register page</title>
        <link rel="stylesheet" href="./static/css/bootstrap.min.css">
        <script type="text/javascript" src="./static/js/test.js"></script>
      </head>
      <body>
        <form id="register-form">           
            <label>Username<span id="register-username-label" class="label label-important" style="visibility: hidden;">Username can't be empty</span></label>
            <input id="register-username-input" type="text" placeholder="Type username..."/>
            <button id="register-submit" onclick="show_element('register-username-label')" class="btn">Register</button>
            </form>
        </div>
      </body>
    </html> 
```

# backbone.js - Backbone-nested：渲染嵌套元素

> ID：15520653
> 
> 赞同：0
> 
> 时间：2013-03-20T10:13:01.407
> 
> 标签：backbone.js

我正在使用`Backbone-nested`插件，将我的声明`Models`为`Backbone.NestedModel.extend()`：[https ://github.com/afeld/backbone-nested](https://github.com/afeld/backbone-nested)

这使我可以这样检索数据：`this.model.get('tasks.title')`

我遇到的问题是渲染每个嵌套项目。我可以使用 1 输出`this.model.get('tasks[0].title')`。

但是，如果我编写一个循环来迭代每个嵌套的，当在方法`return this;`之后调用时，将 追加回，它会失败。`render()``$el``Collection $el`

**问题**

如何编写一种有效的方法将嵌套元素呈现到集合视图？

**集合视图**

```
App.Views.Tasks = Backbone.View.extend({

        el: '#taskList',

        initialize: function() {
            Event.on('tasks:show', this.show, this);
            this.collection.on('add', this.addOne, this);
        },

        render: function() {
            this.collection.each(this.addOne, this);
            return this;
        },

        addOne: function(project) {
            console.log(project.toJSON());
            var taskView = new App.Views.Task({ model: project });
            this.$el.append(taskView.render().el);
        },

        show: function(id) {
            var project = this.collection.get(id);
            var taskView = new App.Views.Task({ model: project });
            this.$el.html(taskView.render().el);
        }

    }); 
```

**数据（一个项目）**

```
[
  {
    "_id": "51497f8dc5c3e3ec28ce4571",
    "name": "First Project",
    "tasks": [
      {
        "title": "Second",
        "content": "Lots of content...",
        "deadline": "1-1-2011",
        "status": "in-progress",
        "_id": "51497f8d726694b230000002"
      },
      {
        "title": "Third",
        "content": "Lots of content...",
        "deadline": "1-1-2011",
        "status": "in-progress",
        "_id": "51497fa18aeb50c630000002"
      }
    ]
  }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:23:38.190

关于显示嵌套布局，我似乎多次遇到过这个问题。

有一个位于 Backbone.js 之上的 JavaScript 库，可以减少您必须编写的样板代码量，并且它们有一个 CompositeView 最适合嵌套集合。我已经包含了文档和一篇讨论使用它的文章。

[Marionette Composite 查看文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

[木偶复合材料 查看文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

[我之前回答的一个类似问题](https://stackoverflow.com/questions/15481666/nested-models-with-collection-of-itself-in-backbone-js/15489543#15489543)

希望这可以帮助。

# ip - 让 grunt 从“dest”运行并通过 IP 公开它

> ID：15520658
> 
> 赞同：2
> 
> 时间：2013-03-20T10:13:21.180
> 
> 标签：ip, port, gruntjs

我是使用 Grunt 构建工具的新手。假设如果我的“dest”文件夹中已经有所需的文件，我该如何使用 Grunt 将其简单地加载到服务器。此外，我目前能够访问在 9090 端口上的“localhost”上运行的 grunt 服务。但是，如果我用我的 IP 地址替换“localhost”，我会得到一个 404。我对我的 tomcat 服务器进行了同样的尝试，但我也可以通过 IP 地址访问 8080 端口上的 tomcat 服务器。请让我知道需要做什么才能允许通过 IP 访问？我正在使用 Windows PC

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-05T00:20:32.190

万一有人偶然发现了这个，只需在 gruntfile 中将 localhost 更改为 0.0.0.0。

这是参考：[https ://github.com/yeoman/generator-angular/commit/fbad1ab0ab789bb37fe5dfa40d5e8ada2f4fa0c5](https://github.com/yeoman/generator-angular/commit/fbad1ab0ab789bb37fe5dfa40d5e8ada2f4fa0c5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:37:25.010

听起来您在询问如何使用 Grunt 将文件复制到远程服务器。

如果是这样，如果您有远程服务器的 SFTP/SCP 访问权限，请尝试[grunt-ssh](https://npmjs.org/package/grunt-ssh) ；如果您只有 FTP 访问权限，请尝试[grunt-ftp-deploy 。](https://github.com/zonak/grunt-ftp-deploy)

# c# - 使用自定义按钮从 CRM 中执行存储过程的最佳方法

> ID：15520662
> 
> 赞同：2
> 
> 时间：2013-03-20T10:13:34.990
> 
> 标签：c#, javascript, asp.net, wcf, dynamics-crm-4

我正在寻找一些建议。我们有多个系统每晚从 Microsoft Dynamics 4 (CRM) 同步。但是，我经常被要求在白天手动执行 SP，因为有时需要立即进行同步。此 SP 与 CRM 位于不同的服务器上。

我想向 CRM 添加一个自定义按钮，允许用户在需要时自行将 CRM 同步到其他系统。我不希望这是每次更新记录时都会发生的工作流程，这将是用户的决定。

我已经做了一些谷歌搜索，我正处于一个十字路口，如何最好地解决这个问题.. 1）从按钮的 javascript 执行服务或 2）使用工作流执行 SSIS 并从按钮调用它。

如果我使用**Option 1**，创建 Web 服务的最佳方法是什么？考虑到同步过程可能需要几分钟才能运行，具体取决于站点之间的互联网速度，我必须小心超时。如果我使用 .Net 3.5 asmx Web 服务，有什么方法可以立即响应并在后台运行 SP？我知道我可以从 Javascript 调用它。我相信另一种选择是使用 WCF 工作流服务（这对我来说是全新的），这将允许后台处理 - 但这可以从 Javascript 调用吗？

如果我使用**选项 2**，如何从 CRM 执行本地 SSIS？我读过它是可能的，但我找不到一个例子。

对不起，文字墙。任何有关方法的指导或建议将不胜感激。非常感谢。

TL;DR：我正在寻找一些关于如何使用自定义按钮在 Dynamics 4 中的不同数据库上执行存储过程的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:43:49.247

您必须创建一个 Web 服务。它可以是 WCF 服务或经典的 ASMX 服务。在 CRM 服务器上部署它会稍微复杂一些，但可以完成（在 ISV 文件夹中部署应用程序，然后修改应用程序的 web.config 文件，以便它在自己的配置中恢复 CRM 设置的所有自定义内容）。如果您有一个单独的 Web 服务器（或至少在 CRM 服务器上有一个单独的网站），它会容易得多。

该服务必须标记为[**OneWay**](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx) - 以便在调用它时立即返回给调用者。不幸的是，这也意味着您将无法返回错误消息 - 这些消息必须写入日志。

现在在 CRM 表单中创建一个按钮并使用 JavaScript 调用该服务。您应该能够配置您的服务，以便可以通过在 URL 参数中传递任何参数来调用它。

# c# - 如何通过名称动态添加事件

> ID：15520665
> 
> 赞同：-4
> 
> 时间：2013-03-20T10:13:44.977
> 
> 标签：c#

> 我有`Delegate`类型和`function`字符串格式。我怎样才能在中添加该功能`delegate`？

数据表事件；

```
/* Having Records

Control Events      MethodName
ControlName     Validating      Leave       Enter
TextBox1        Textbox1_Validating TextBox1_Leave  --

*/

foreach(DataRow Row in Events.Rows)
{
    if (Row["Validating"].ToString() != "")
    {
//Here is I need a help that how can i add Textbox1_Validating event in 
//TextBox1.Validating
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:22:05.177

一些天真的实现是在从 lambda 调用时使用另一个级别的间接`MethodIndo`并将其分配给 type 的委托实例`Func<int, string>`。请注意，存在更复杂的委托转换：

```
void Main()
{
    string methodName = "SomeMethod";

    var methodInfo = this.GetType().GetMethod(methodName);

    Action<string> myFunc = str => methodInfo.Invoke(this, new object[]{str});

    MyEvent += myFunc;

    MyEvent("value");

}
public event Action<string> MyEvent = delegate{}; 
                                    //default so that not to check for null

public void SomeMethod(string val)
{
    Console.WriteLine ("event called with: " + val);
} 
```

印刷

```
event called with: value 
```

考虑有关此主题的另[一篇文章。](https://stackoverflow.com/questions/2933221/can-you-get-a-funct-or-similar-from-a-methodinfo-object)很难说你想要实现什么，但我认为你可以使用这个实现作为起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:23:30.277

委托是一种安全封装方法的类型，类似于 C 和 C++ 中的函数指针。与 C 函数指针不同，委托是对象

有关更多信息，您可以参考[msdn](http://msdn.microsoft.com/en-us/library/ms173172.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:36:02.013

您可以使用[Delegate.CreateDelegate](http://msdn.microsoft.com/library/9tz542wy.aspx)重载之一来实现此目的。但是您需要知道目标对象（该对象，其中包含您要在事件引发时调用的方法）

一个例子（伪代码）：

```
public void TextBox1_Validating(object sender, CancelEventArgs args)
{
    // handle the event
}

public void RegisterEvent()
{
    CancelEventHandler handler = (CancelEventHandler)Delegate.CreateDelegate(
        typeof(CancelEventHandler), 
        this,
        "TextBox1_Validating");
    textBox1.Validating += handler;
} 
```

您还可以阅读这篇 MSDN 文章，其中展示了其他一些方法：[如何：使用反射连接委托](http://msdn.microsoft.com/en-us/library/ms228976.aspx)

# windows-installer - 列出需要由 MSI "Repair" (msiexec) 修复的文件

> ID：15520666
> 
> 赞同：1
> 
> 时间：2013-03-20T10:13:48.990
> 
> 标签：windows-installer

我知道修复安装有不同的方法，使用 UI（控制面板）或 CLI（msiexec.exe），但是：

我如何只列出在没有真正修复的情况下执行的操作。即显示“文件 xyz 丢失”。或“自安装后修改了文件 abc”而不恢复它们。（文件安装为 Vital 和 KeyFile）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:53:26.463

Windows Installer 不会在该粒度级别公开有关其操作的信息。您可以编写一个外部 UI 处理程序来启动修复操作（`::MsiConfigureProduct()`设置后调用`::MsiSetExternalUI()`），然后在调用操作后评估组件状态`InstallValidate`。这应该能够让您获得与组件操作状态写入日志文件相同的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:29:37.200

这并不能回答您的问题，但根据您的兴趣，我建议您阅读：

[应用程序弹性：解锁 Windows Installer 的隐藏功能](http://msdn.microsoft.com/en-us/library/aa302344.aspx#wi_integration_topic4)

“挑战#1：自我调用的弹性”这个话题真的很有趣。它描述了应用程序与其安装程序之间的共生关系。MSI API 旨在供应用程序使用以增强运行状况检查，而不仅仅是通过 COM 激活和广告快捷方式的使用来简单地调用。

真的很不幸，在过去的 14 年里，很少有应用程序会费心把它带到这个水平。

# ruby-on-rails - 无法连接Mysql 太阳黑子

> ID：15520670
> 
> 赞同：1
> 
> 时间：2013-03-20T10:14:07.010
> 
> 标签：ruby-on-rails, gem, setup-deployment, sunspot

我在我的 ROR 应用程序 sunspot gem 中使用搜索。在我的本地计算机上它很好，但是在想要搜索任何内容时上传到服务器后我是一个错误：

> 无法连接到“127.0.0.1”上的 MySQL 服务器 (111)

我的 sunspot.yml ：

```
production:   

solr:    
hostname: localhost    
port:8983    
log_level:WARNING    

development:   solr:   
hostname: localhost    
port: 8982    
log_level:* INFO

test:  
solr:     
hostname: localhost    
port: 8981    
log_level: WARNING 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:51:03.783

而不是主机名 :localhost ，你会尝试给 -

主机名：根

密码：你的密码

端口：“生产端口号”

# mysql - 使用 SQL 聚合函数时修复数据截断

> ID：15520675
> 
> 赞同：1
> 
> 时间：2013-03-20T10:14:17.820
> 
> 标签：mysql, sql, aggregate-functions

我有下表：

```
avg_duration BIGINT UNSIGNED,
count BIGINT UNSIGNED 
```

我正在计算许多这样的记录的加权平均持续时间：`SUM({avg_duration}*{count})/SUM({count})`. 问题是当有很多记录和足够大的`count`值时，`SUM({avg_duration}*{count})`部分变得太大，我得到数据截断异常。我考虑过使用`DOUBLE`列类型而不是`BIGINT`. 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:33:48.317

您可以`DOUBLE`在查询中转换为，而不是更改表定义，例如`SUM((CONVERT(DOUBLE, avg_duration) * CONVERT(DOUBLE, count)) / SUM(CONVERT(DOUBLE, count))`

# ruby-on-rails - 在 Ubuntu 上将 Sidekiq 作为守护进程运行

> ID：15520676
> 
> 赞同：21
> 
> 时间：2013-03-20T10:14:18.837
> 
> 标签：ruby-on-rails, ruby, daemon, sidekiq

如何在 Ubuntu 上将 sidekiq 作为守护进程运行？

如果我运行`bundle exec sidekiq -D`我得到`invalid option: -D`了，有没有什么方法可以在没有其他控制器的情况下运行它，比如上帝，暴发户......？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-20T10:28:47.690

有一个 Daemonize sidekiq 的选项，只需通过`-d`选项

[犯罪](https://github.com/mperham/sidekiq/commit/7f9d4a39603d2c2cb618104e89e8aab523a48ad9)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-23T04:48:58.547

从 sidekiq 6.0 开始，守护进程将不起作用，如果您通过 -d，您将收到一条消息：

> Sidekiq 6.0 中删除了守护模式，请使用适当的进程管理器来启动和管理您的服务

在此处检查问题[#4045](https://github.com/mperham/sidekiq/issues/4045)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-04T07:06:15.637

`sidekiq`如果意外崩溃，作为守护进程运行不会重新启动。另一种方法是将sidekiq 作为服务运行（一个新贵的工作）。如果系统重新启动，那么新贵作业也将运行 sidekiq。 [**这**](http://jee-appy.blogspot.com/2016/02/sidekiq-upstart-job-or-sidekiq-as.html)是将 sidekiq 作为服务运行的完整脚本和方法。

将 sidekiq 作为服务运行后，您可以`start/stop/restart`通过命令简单地 sidekiq `sudo service sidekiq start/stop/restart`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-05T09:27:11.710

不支持用于 Sidekiq 版本 6 或更高版本的守护进程，将程序作为 Unix 运行。相反，我们必须将进程作为服务运行。

根据您的捆绑器位置编写脚本，或者您可以修改以下代码片段并将片段复制到`/usr/lib/systemd/system`（CentOS）或`/lib/systemd/system`（Ubuntu）

```
[Unit]
Description=sidekiq

After=syslog.target network.target

[Service]

Type=notify
WatchdogSec=10
WorkingDirectory=/home/deploy/apps/project_name

# If you use rbenv:
# ExecStart=/bin/bash -lc 'exec /home/deploy/.rbenv/shims/bundle exec sidekiq -e production'
# If you use the system's ruby:
# ExecStart=/usr/local/bin/bundle exec sidekiq -e production
# If you use rvm in production, don't.

#ExecStart=/home/deploy/.rvm/wrappers/ruby-2.6.5/bundle exec sidekiq -e production

# Use `systemctl kill -s TSTP sidekiq` to quiet the Sidekiq process
# !!! Change this to your deploy user account !!!

User=deploy

Environment=MALLOC_ARENA_MAX=2

# if the script crash, restart
RestartSec=1
Restart=on-failure

# output goes to /var/log/syslog (Ubuntu) or /var/log/messages (CentOS)
StandardOutput=syslog
StandardError=syslog

# This will default to "bundler" if we don't specify it
SyslogIdentifier=sidekiq
[Install]
WantedBy=multi-user.target 
```

确保您提供了正确的捆绑程序路径，`ExecStart`以便开始该过程。将其另存为`sidekiq.service`并运行`systemctl enable sidekiq`. 然后我们可以使用命令`systemctl start sidekiq`、`systemctl stop sidekiq`和来管理进程`systemctl restart sidekiq`。

我们可以通过使用查看最后 100 行日志`journalctl -u sidekiq -rn 100`。

# ibm-mobilefirst - 工作灯中的 BusyIndi cator 无法正常工作

> ID：15520678
> 
> 赞同：0
> 
> 时间：2013-03-20T10:14:19.410
> 
> 标签：ibm-mobilefirst

我最近问了这个问题：

Worklight busyindicator 无法正常工作。我的问题是我正在使用多页。在页面更改时，我调用 web 服务适配器并调用忙指示符，以便它在获取时显示正在进行的工作。但是会发生页面更改和指示符快速显示和隐藏但是适配器仍处于获取阶段，并且在成功调用了一段时间数据后，但在这些工作期间没有显示忙碌指示符。

```
var busyIndicator = null;

function wlCommonInit(){
busyIndicator = new WL.BusyIndicator();
} 
```

这是我在页面更改时调用的代码。

```
 busyIndicatorDemo();
    var viewPath = "views/add_fund_transfer.html";
    WL.Page.load(viewPath,
        {
                onComplete: function() {    

                PayAnyOne_Controller.GetBranches(GetBranchesProcedureName);
                busyIndicator.hide();

            }
        });

function busyIndicatorDemo() {
    busyIndicator.show();
    setTimeout(15000);
} 
```

在多页中使用时，busyindicator 似乎不适用于 adpater。请给我解决方案或我的代码中的问题。

并得到了这样的答复：

页面加载完成时：调用过程（异步调用），并隐藏忙指示符。因此，这会生成您报告的行为 - 一旦页面完成加载，busyindicator 会显示并快速隐藏，即使服务仍在获取数据（在异步调用中）

将busyindicator.hide移动到调用过程的onSuccess应该可以解决问题（也把它放在onFailure ...）希望这会有所帮助

给定的解决方案是一些工作原理..但是当我调用程序busyindicator显示几秒钟然后在程序仍然忙碌时消失时它现在发生了。我已经完成了上面给出的解决方案。——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:40:06.797

Worklight v5.0.6 中存在针对适配器调用期间消失的繁忙指示器的特定修复，请确保您已将开发环境更新到此版本。

您可以直接从 Eclipse 更新，转到帮助 >> 检查更新。

# sql-server - 使用 SQL hierarchyId 获取给定节点的父节点

> ID：15520679
> 
> 赞同：1
> 
> 时间：2013-03-20T10:14:19.583
> 
> 标签：sql-server, hierarchy

我有一个作为 CorporateStructure 的表格，如下所示，其中包含以下数据：

```
╔════╦════════╦═════════════╗
║ Id ║  Name  ║ HierarchyId ║
╠════╬════════╬═════════════╣
║  1 ║ john   ║ /           ║
║  2 ║ smith  ║ /1          ║
║  3 ║ John2  ║ /1/1/       ║
║  4 ║ Collin ║ /1/1/1      ║
╚════╩════════╩═════════════╝ 
```

我有 id 4，我想找到父母我该怎么做？

问候维沙尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:12:47.510

正如迈克尔指出 smith ( `/1`) 和 Collin ( `/1/1/1`) 的字面值似乎不是有效的`HierarchyId`

更正这些值，您可以使用获取父节点`GetAncestor`

尝试这个 ：-

```
Select * from YourTable
where [HierarchyId] in (
           Select [HierarchyId].GetAncestor([HierarchyId].GetLevel()-1).ToString()
           from YourTable
           where id=4
           ) 
```

[SQL FIDDLE](http://sqlfiddle.com/#!3/22211/4)演示

# backbone.js - 在集合更改事件上调用 model.save() 时的 Backbone.Backgrid 无限循环

> ID：15520682
> 
> 赞同：0
> 
> 时间：2013-03-20T10:14:29.550
> 
> 标签：backbone.js, coffeescript, infinite-loop, put, backgrid

当我在集合中保存更改的模型时，Backbone.Backgrid 进入 PUT 请求循环。该循环仅在我在 PUT 请求中返回更新（或旧）模型时发生，但在仅返回 200 响应时不会发生。

这是我的事件代码，它监听 Backgrid 更新并触发该行的保存：

```
AppRouter = Backbone.Router.extend(
    # ...

    initialize: ->
        @items = new Stock.Collections.Items() # collection with URL: /api/items

        @items.on 'change', (item) ->
            console.log 'collection changed'
            console.log(item)
            item.save() # this seems to be triggering additional change events
            return
    # ... 
```

为什么我的视图集合在保存时循环播放，我该如何防止它变成香蕉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:58:40.513

在阅读了 Backbone 和 Backgrid 源代码后，我通过`silent`在我的集合更改`save()`调用中设置选项来解决这个问题，以防止传播`model.set()`调用引发更改事件循环：

```
item.save null,
    silent: true # important!
    success: (model, res) ->
        console.log('model saved:')
        console.log(model)
    error: (model, res) ->
        console.log('error saving:')
        console.log(model) 
```

# iphone - 如何从 EKEvent 商店获取 eventIdentifier？

> ID：15520684
> 
> 赞同：0
> 
> 时间：2013-03-20T10:14:31.537
> 
> 标签：iphone, ios, objective-c, ekeventstore

现在我正在日历应用程序中处理 EKEvent mange。我成功地将一个事件添加到 eventStore。我需要从事件存储中获取一个事件标识符。我使用以下代码访问 eventIdentifier。但我的应用程序中的 evetnIdentifier 始终为空值。

```
EKEvent *event = [self eventAtIndexPath:indexPath];    
NSString *eventIdentifier]; = [[NSString alloc] initWithFormat:@"%@",event.eventIdentifier]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:44:57.363

尝试这个 ：：

在你的 .h

```
#import <EventKit/EventKit.h>

@property (nonatomic, retain) EKEventStore *eventStore;
@property (nonatomic, retain) EKCalendar *defaultCalendar;
@property (nonatomic, retain) NSMutableArray *eventsList; 
```

在你的 .m

```
- (void) fetchevents
{

    eventStore = [[EKEventStore alloc] init];

    eventsList = [[NSMutableArray alloc] init];

    EKEventStore *store = [[EKEventStore alloc] init];

    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        // handle access here
    }];

    // Get the appropriate calendar
NSCalendar *calendar = [NSCalendar currentCalendar];

    // Create the start date components
    NSDateComponents *oneDayAgoComponents = [[NSDateComponents alloc] init];
    oneDayAgoComponents.day = -1; // From which date you have to fetch Events from calander

    NSDate *oneDayAgo = [calendar dateByAddingComponents:oneDayAgoComponents
                                              toDate:[NSDate date]
                                             options:0];

    NSLog(@"%@", oneDayAgo);

    // Create the end date components
    NSDateComponents *oneYearFromNowComponents = [[NSDateComponents alloc] init];
    oneYearFromNowComponents.year = 0;
    NSDate *oneYearFromNow = [calendar dateByAddingComponents:oneYearFromNowComponents
                                                   toDate:[NSDate date]
                                                  options:0];
    NSLog(@"%@", oneYearFromNow);

    //Create the predicate from the event store's instance method
    NSPredicate *predicate = [store predicateForEventsWithStartDate:oneDayAgo endDate:oneYearFromNow                                                                                      calendars:nil];

    NSArray *events_Array = [eventStore eventsMatchingPredicate: predicate];

    for (EKEvent *eventToCheck in events_Array)
    {
       [eventsList addObject:eventToCheck.calendarItemIdentifier ];
    }
} 
```

希望它会帮助你。快乐编码。谢谢。

# asp.net-mvc - n2cms 中的链接项目集合

> ID：15520689
> 
> 赞同：1
> 
> 时间：2013-03-20T10:14:43.243
> 
> 标签：asp.net-mvc, n2cms, episerver-6

我使用 EpiServer CMS。我只是想知道 n2cms 是否有任何属性来收集链接。（如 EpiServer 中的 LinkItemCollection）。如果没有，请给我一个实施的想法。

参考：[http](http://sdk.episerver.com/library/cms6/Developers%20Guide/Core%20Features/Properties/How%20To/Use%20Link%20Collection%20property.htm) ://sdk.episerver.com/library/cms6/Developers%20Guide/Core%20Features/Properties/How%20To/Use%20Link%20Collection%20property.htm 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T05:25:57.973

您可以使用该`ContentList`部件执行此操作并创建一堆重定向页面。如果您想一次又一次地重复使用链接集合，这是最好的选择。

1.  在某处创建一个虚拟占位符页面，并使其不可见。
2.  在该占位符页面下，为每个链接创建一个重定向页面。
3.  在您希望链接集合出现的位置，拖放 a`ContentList`并将根指向虚拟占位符页面。然后，您可以编写自定义 HTML 模板来显示您喜欢的链接。

另一个想法是使用 N2CMS`Selection`部分，它为您提供站点中所有页面的复选框列表。您只需检查要列出`Selection`的页面，并将格式化您检查的所有页面的列表。

使用这两种方法，如果您链​​接到站点中的其他页面，如果您重命名任何目标页面（只要它们位于同一个 N2 站点中），N2 就会为您提供更新链接。

所有这些都记录在此处的 N2CMS 文档中：[https ://n2cmsdocs.atlassian.net/wiki/display/N2CMS/Linking+to+Content?src=search](https://n2cmsdocs.atlassian.net/wiki/display/N2CMS/Linking+to+Content?src=search)

在标题下查看*动态链接到内容项*

# applescript - Automator to Applescript 用于编辑代码

> ID：15520701
> 
> 赞同：1
> 
> 时间：2013-03-20T10:15:03.897
> 
> 标签：applescript, increment, automator

只是想知道我是否可以将 Automator 中的“看我做”事件转换为 applescript，然后编辑生成的代码？我有一个向谷歌输入查询（即 Apple1）的录音，但我希望查询为录音的每个循环增加 ++，所以结果是 Apple1，然后下一个循环是 Apple2、Apple3等。我知道增量在编程中是基本的，但我只是不确定如何使用 Automator 和/或 applescript 来做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-15T15:34:24.153

晚了几年，但你可以。

## 如何将 Watch Me Do 事件列表转换为 AppleScript：

**1.**记录 Watch Me Do 动作

**2.**在 Watch Me Do 窗口中选择您要编辑的所有事件

**3.**将这些事件拖到 Watch Me Do 窗口下方的空白位置（*您将在其中放置另一个 Automator 操作*）

**4.**编辑！

--------------------------------------------------**图片见下图**---------------------------------------------- ----

注意：*在第 3 步中，将操作拖到空白处时，您将看到一个带有白色加号的绿色圆圈图标。抱歉，我找不到确切的图标，但这里有一个看起来足够接近的图标，可以让您了解。*

[![绿色圆圈加号图标](../Images/ac175a7c988849353ba70b2e8c54782f.png)](https://i.stack.imgur.com/A7pot.png)

* * *

## 第1步

[![第1步](../Images/ae25e35b97b7eebde53d04213c32bc89.png)](https://i.stack.imgur.com/K5iN2.png)

## 第2步

[![第2步](../Images/c99611a2a63f6152e8e8289f4eb031fc.png)](https://i.stack.imgur.com/Ioq3P.png)

## 第 3 步

[![第 3 步](../Images/63717cf88a3fa74fd3c386104ead1cdf.png)](https://i.stack.imgur.com/IF5kE.png)

## 第4步

[![第4步](../Images/7ecb9cf7b70fd7a79df6d874fed87074.png)](https://i.stack.imgur.com/Um0jB.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T22:39:30.403

仅在 Applescript 中完成所有操作可能会更简单。

例子：

```
 set counter to 0
set theTerm to "apple"
repeat 4 times
    set counter to counter + 1
    open location "http://www.google.co.uk/#hl=en&output=search&sclient=psy-ab&q=" & theTerm & counter
end repeat 
```

运行此代码将使您的浏览器打开对 apple1 到 4 的新搜索

**更新：回复评论请求**：

此示例向您展示如何搜索 google 图像并使用不同的术语和数字随机化搜索。

```
set theTerms to {"apple", "orange", "banana", "pear"}
set termCount to count of theTerms

set searchLoc to "http://images.google.com/search?hl=en&site=&tbm=isch&source=hp&biw=2171&bih=1062&q="

repeat 4 times
    set termRandNumber to random number from 1 to termCount
    set randomSuffixNumber to random number from 1 to 7000
    open location searchLoc & item termRandNumber of theTerms & randomSuffixNumber
end repeat 
```

# javascript - 如何将scala列表转换为javascript数组？

> ID：15520703
> 
> 赞同：9
> 
> 时间：2013-03-20T10:15:11.420
> 
> 标签：javascript, scala, playframework-2.0, scala-template

有没有更简单的方法来做到这一点？

```
 $(document).ready(function () {
        var jsArray = []
        @if(scalaList != null) {
            @for(id <- scalaList) {
            jsArray.push('@id');
           }
        }
    ...
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T17:27:44.097

就像下面这样简单：

```
import play.api.libs.json.Json

val jsArr: JsValue = Json.toJson(scalaList) 
```

您也可以在模板中执行此操作：

```
@(list: List[Any])

@import play.api.libs.json.Json

<script type="text/javascript">
    $(document).ready(function () {
        var jsArr = @Json.toJson(list);
        console.log(jsArr);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:57:11.157

您可以为此使用 mkString。

```
 $(document).ready(function () {
    var jsArray = @if(scalaList != null) {
      [ @scalaList.mkString(",") ]} 
    else {[]};
  } 
```

您应该在视图中忽略此 if 语句。取而代之的是，在控制器中检查 null 并将空列表放入视图中，因此此代码在视图中可以更简单

```
 $(document).ready(function () {
    var jsArray = [ @scalaList.mkString(",") ];
 } 
```

你不需要这个引号''围绕id。在 javascript 中 1 == '1' 为真

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T12:54:57.433

我认为每个答案都很好但仍然不安全，因为每个答案都不关心包括'或"的值。幸运的是，play框架支持json，所以你应该使用json转换为javascript数组。

```
 @(json: String)
 <html>
 <head>
 </head>
 <body>
 <script>
 var json = @Html(json);
 var list = json.list;
 </script>
 </body>
 </html>
 package controllers

 import play.api._
 import play.api.libs.json._
 import play.api.mvc._

 object Application extends Controller {

   def index = Action {
     val list = List( "hoge\"hoge", "moge'mo\"ge" )
     val json = Json.stringify( Json.obj( 
       "list" -> JsArray( list.map( JsString(_) ) )
     ))
     Ok(views.html.index(json))
   }

 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T10:56:13.663

您是否尝试过类似的方法：

```
var jsArray = new Array(@scalaList.map(x => "\"" + x + "\"").mkString(",")); 
```

或者你可以使用像这样的文字

```
var jaArray = [    var jsArray = [@scalaList.map(x => "\"" + x + "\"").mkString(",")]; 
```

`if`也不需要检查。`For`理解就是那样聪明

```
$(document).ready(function () {
    var jsArray = [@scalaList.map(x => "\"" + x + "\"").mkString(",")];
    ...
} 
```

# xml - phpunit 模拟一个应该返回异常的方法

> ID：15520704
> 
> 赞同：0
> 
> 时间：2013-03-20T10:15:12.133
> 
> 标签：xml, exception, mocking, phpunit

我在一个解析一些 xml 的类中有一个方法。如果找到标签**<status >failure</status>**，则返回异常。

我想构建一个单元测试来检查此方法在 status=failure 时是否返回异常。

目前，我无法使用**phpunit**和**MOCKING**完成它？

例子：

```
<?php
$mock = $this->getMock('Service_Order_Http', array('getResponse'));
        $mock->expects($this->any())
            ->method('getResponse')
            ->will($this->throwException(new Exception()));

        $e = null;
        try {
            $mock->getResponse();
        } catch (Exception $e) {

        }
        $this->assertTrue($e instanceof Exception, "Method getResponse should have thrown an exception");

//phpunit sends back: PHPUnit_Framework_ExpectationFailedException : Failed asserting that exception of type "Exception" is thrown.
?> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:29:56.283

我认为您误解了单元测试中模拟的目的。

模拟用于替换您实际尝试测试的类的依赖项。

这可能值得一读：[什么是对象模拟，我什么时候需要它？](https://stackoverflow.com/questions/4314/what-is-object-mocking-and-when-do-i-need-it)

我认为您实际上是在寻找更多与您的测试类似的东西：

```
<?php

    // This is a class that Service_Order_Http depends on.
    // Since we don't want to test the implementation of this class
    // we create a mock of it.
    $dependencyMock = $this->getMock('Dependency_Class');

    // Create an instance of the Service_Order_Http class,
    // passing in the dependency to the constructor (dependency injection).
    $serviceOrderHttp = new Service_Order_Http($dependencyMock);

    // Create or load in some sample XML to test with 
    // that contains the tag you're concerned with
    $sampleXml = "<xml><status>failure</status></xml>";

    // Give the sample XML to $serviceOrderHttp, however that's done
    $serviceOrderHttp->setSource($sampleXml);

    // Set the expectation of the exception
    $this->setExpectedException('Exception');

    // Run the getResponse method.
    // Your test will fail if it doesn't throw
    // the exception.
    $serviceOrderHttp->getResponse();

?> 
```

# java - 与智能卡的 TLS 握手

> ID：15520705
> 
> 赞同：1
> 
> 时间：2013-03-20T10:15:14.150
> 
> 标签：java, key, smartcard, handshake

我的 TLS 握手仍然有一些问题（请参阅：[TLS-handshake with own random numbers in Java](https://stackoverflow.com/questions/15502544/tls-handshake-with-own-random-numbers-in-java)）。数字生成工作正常。

现在我遇到了问题，我需要在我的智能卡中生成 EC 密钥和预主密钥，并将这些密钥用于 Diffie-Hellman 密钥交换。我发现`KeyPairGeneratorSpi`应该做的工作。但我不知道，`KeyPairGenerator`在握手期间如何使用我自己的，也不知道如何读取“ServerKeyExchange”期间发送的客户端的曲线参数和公钥。

# php - 在 mysql 和 php 中使用 unicode 字符

> ID：15520707
> 
> 赞同：0
> 
> 时间：2013-03-20T10:15:20.037
> 
> 标签：php, mysql, sql, unicode

我正在使用 mysql_query 将我的 mysql 查询从 PHP 传递到 mysql。假设我的数据库中有两个名字 Théo 和 Theo。现在我在每个查询中都得到了两个名称：

```
mysql_query('select * from names where name="'. utf8_decode('Theo').'"');
mysql_query('select * from names where name="'. utf8_decode('Théo').'"'); 
```

有人可以解释发生了什么。谢谢 ：）

# jquery - 如何在Jquery Datepicker中首先显示年份下拉列表和第二个月份下拉列表

> ID：15520709
> 
> 赞同：0
> 
> 时间：2013-03-20T10:15:27.810
> 
> 标签：jquery, html, jquery-ui

我正在使用 jquery Ui datepicker，：

如何在Jquery Datepicker中**首先显示年份下拉**列表和**第二个月份下拉列表**

我想展示这样的东西：

![在此处输入图像描述](../Images/94109acd74e139e74f1e3aa275490869.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T11:46:49.253

您只需要添加选项`showMonthAfterYear:true`

IE

```
jQuery('input[name=calender]').datepicker({
     changeYear:true,
     changeMonth:true,
     showMonthAfterYear:true
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:28:17.723

**编辑：**

对此没有直接的解决方案，但您可以将其添加到您的 css

```
.ui-datepicker-month{
    float: right !important;
} 
```

我相信它会成功的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:25:25.270

我认为您必须更改格式。

所以改变这个（默认）

```
$( ".selector" ).datepicker({ altFormat: "yy-mm-dd" }); 
```

对此，如果您尚未指定此内容。将其添加到您的代码中。

```
$( ".selector" ).datepicker({ altFormat: "dd-mm-yy" }); 
```

初始化后获取或设置 altFormat 选项：

```
// getter
var altFormat = $( ".selector" ).datepicker( "option", "altFormat" );

// setter
$( ".selector" ).datepicker( "option", "altFormat", "yy-mm-dd" ); 
```

如此处所述 [http://api.jqueryui.com/datepicker/#option-altFormat](http://api.jqueryui.com/datepicker/#option-altFormat)

您可以使用 themeroller 更改主题：

[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

# .net - 为什么 JSON.NET 默认的 DateTime 序列化发生了变化？

> ID：15520717
> 
> 赞同：23
> 
> 时间：2013-03-20T10:15:44.647
> 
> 标签：.net, datetime, serialization, json.net

我一直在使用旧版本的 JSON.Net (4.0r4) 并且刚刚更新到最新版本 (4.5r11)。我注意到过去的日期格式如下：

> 2013-03-20T09:00:00.119Z

但现在是：

> 2013-03-20T09:00:00.119

Z最后不见了。根据维基百科：

> 如果时间为 UTC，则在时间后直接添加 Z，不带空格

这破坏了我的很多 JavaScript 代码，因为我有一个方法可以将其转换为`DateTime`对象并且它需要`Z`. 我可以通过更改我用来执行此操作的函数来修复它，并且我发现我可以将其设置为`DateTimeZoneHandling`，`DateTimeZoneHandling.Utc`但这意味着我必须在多个项目中更改大量 C# 代码。

我只是想知道为什么这已经改变了。

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-19T03:31:09.020

您在哪些浏览器中看到这种情况？由于您实际处理的问题是 Javascript 解析，因此根据我的经验，该问题实际上是毫秒舍入，而不是 Z 的存在与否。

在 IE9 中试试这个：http: [//jsfiddle.net/b9chris/HaBP8/](http://jsfiddle.net/b9chris/HaBP8/)

```
'2013-06-13T20:43:55.6',
'2013-06-13T20:43:55.61',
'2013-06-13T20:43:55.61Z',
'2013-06-13T20:43:55.611',
'2013-06-13T20:43:55.611Z' 
```

在大多数浏览器中，所有日期都可以解析；在 IE9 中，前 3 个失败，无论 Z 或否，因为 IE9 需要 3 个位置的毫秒数。第二个 2 成功，有和没有 Z。重要的是 3 毫秒数字 - Z 无关紧要，包括因为 Javascript 不包含像 .Net 那样的 DateTimeKind，所以 Z 与否与 Javascript 如何内化日期无关。因为毫秒位数有时会是 1 或 2，具体取决于时间，如果您传递时间戳，您将获得看似随机的失败。

[我在 Json.Net Codeplex 页面上将此报告为错误](https://json.codeplex.com/workitem/24417)；它在错误的评论中被维护者驳回并关闭。去开源。

您可以使用此答案中的代码解决此错误：

[https://stackoverflow.com/a/15939945/176877](https://stackoverflow.com/a/15939945/176877)

需要明确的是，如果 JSON.Net 没有为 DateTimeKind.UTC 发出它，则缺少 Z 是不正确的，但更一般地说，它不是无效的 ISO-8601 日期 - 没有 Z 隐含表示当地时间：

[http://en.wikipedia.org/wiki/ISO_8601#Times](http://en.wikipedia.org/wiki/ISO_8601#Times)

> 如果没有给出带有时间表示的 UTC 关系信息，则假定时间为本地时间。

并且如上所述，Javascript 的解析并不关心 Z，因此对于您的目的而言，这并不重要。

另请注意，您可能实际上并未将 UTC 传递给 JSON.Net 并触发此问题。C# 中的 DateTime 对象可以是[Local、Unspecified 或 UTC](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)类型。假设不是 UTC 的 DateTimes 实际上是 UTC 是不公平的。在没有时区信息的情况下传递它是最安全的选择。.Net DateTime 结构以时区为基础，因此 JSON.Net 别无选择，只能将默认 DateTimes (DateTimeKind.Unspecified) 作为本地发出，除非与[.Net TimeZone 库](https://github.com/b9chris/TimeZoneInfoLib.Net)集成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:29:47.190

您可以更改 DateTime 的序列化方式，请从 JSON.NET 作者处查看：[Good (Date)Times with Json.NET](http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-13T01:57:38.390

如果服务器上有 UTC 数据，则应显式设置 DateTimeZoneHandling 属性

```
 //serializer fix
        config.Formatters.Clear();
        config.Formatters.Add(new JsonMediaTypeFormatter()
        {
            SerializerSettings = new JsonSerializerSettings() {
                ContractResolver=new CamelCasePropertyNamesContractResolver(),
                DateTimeZoneHandling = DateTimeZoneHandling.Utc},

        }); 
```

在此 DateTime 末尾有“Z”之后：2017-05-11T00:35:20.8242381 **Z**

# ember.js - 嵌套模型 [ember-1.0.0-rc.1 + ember.data-11]

> ID：15520718
> 
> 赞同：1
> 
> 时间：2013-03-20T10:15:48.687
> 
> 标签：ember.js, ember-data

**问题 1** 我在 ember-1.0.0-rc.1 + ember.data-11 中创建嵌套模型的概念有什么问题？

**问题 2** 使用 var line = App.Line.find() 我应该得到这条线。如何获得嵌套在一行中的 Andon 或 Shift 作为对象？还是只有安东的颜色？

这是我的[jsFiddle](http://jsfiddle.net/gcRtu/2/)。

```
App.Line = DS.Model.extend({
    name: DS.attr('string'),
    shifts: DS.hasMany('App.Shift'),
});

App.Shift = DS.Model.extend({
    name: DS.attr('string'),    
    // shift 1 <-> 1 shifts
    line: DS.belongsTo('App.Line'),
    //  one-to-one relationship between Shift and Andon
    andon: DS.belongsTo('App.Andon')
 });

 App.Andon = DS.Model.extend({
    //  one-to-one relationship between Shift and Andon 
    shift: DS.belongsTo('App.Shift')
 }) 
```

控制器

```
 App.LinesController = Ember.ArrayController.extend({
     content: [],
 });

 App.linesController = Ember.ArrayController.create({
    content: [],
    init: function(){

    var self = this;
    self.pushObject(

        App.Line.createRecord(
                        {
                        ...
                        shifts: [ 
                          App.Shift.createRecord(
                          {
                            andon:  App.Andon.createRecord({...})
                          }),
                          App.Shift.createRecord(
                          {
                            andon: App.Andon.createRecord({...})
                          }),

                        ]   
                    },
                   ],
                }
            ),      
        );  
    }, 
 }); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:01:32.047

关于问题 2：

我认为您需要为每个 belongsTo 添加一个外键，即 Shift 中的 line_id 和 andon_id 以及 Andon 中的 shift_id，然后您需要创建一些可以嵌入/旁加载关联的序列化程序。不幸的是，我只熟悉 rails 中的 activeModel 序列化程序，在您的情况下可能无法使用，但也许[这个问题](https://stackoverflow.com/questions/11532282/how-can-i-update-a-ds-model-with-response-json-from-store-commit)的答案中的示例会对您有所帮助。

# wordpress - 如何授予 Wordpress 用户（编辑者）访问特殊管理页面的权限？

> ID：15520726
> 
> 赞同：0
> 
> 时间：2013-03-20T10:16:06.597
> 
> 标签：wordpress, administration, user-roles

我想授予用户角色编辑器访问我的插件设置页面的权限。

.../wp-admin/admin.php?page=myplugin_settingspage

默认情况下，只有管理员可以访问此页面。我实现了这段代码来保护配置页面。

```
if (!current_user_can('administrator') && !current_user_can('publish_posts')) exit('Admins only.'); 
```

但即使我删除了这一行，页面仍然受到保护并且仅供管理员使用。我猜这种保护是由 WP 核心完成的。那么如何使用 userrole Editor 使页面可供用户使用呢？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:40:21.440

这看起来是您需要阅读的内容：

[用户权限和您的插件](http://wp.tutsplus.com/articles/quick-tip-user-permissions-and-your-plugin/)

目前不确定您如何附加插件设置页面，但是当您这样做时：

```
add_menu_page( $page_title, $menu_title, $capability, $menu_slug, $function, $icon_url, $position ); 
```

您可以设置用户需要查看的功能。

希望有帮助！

# php - 如何在php中访问javascript变量

> ID：15520727
> 
> 赞同：1
> 
> 时间：2013-03-20T10:16:11.350
> 
> 标签：php, javascript, jquery

这是我的代码： 在函数中：

```
var daaa=document.getElementById('da').value= year+ "-" +month+ "-" +day;
    document.form1.bookingsession.focus();
var coords = {
    "lat": daaa
};
 $.get('bs.php', coords, function () {
    alert('data sent');
}); 
```

我的php代码是：

```
<?php
$output = isset($_GET['lat']) ? $_GET['lat'] : 0;
print("$output");
?> 
```

当我打印 $output 时，我得到的值为 0，但实际上必须得到变量 daaa 上的值。让我知道我在哪里犯了错误....提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:24:43.580

尝试改变

```
var daaa=document.getElementById('da').value= year+ "-" +month+ "-" +day; 
```

至

```
var daaa=document.getElementById('da').value + "-" + year+ "-" +month+ "-" +day; 
```

无论如何，在这种情况下，您的“第一”操作应该是检查变量是否真的设置在客户端。您可以通过 alert(daaa) 或 console.log(daaa) 来完成；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:18:55.583

改变这个

```
var coords = {
"lat": daaa
}; 
```

至

```
var coords = {
lat: daaa
}; 
```

你放错了双引号。

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

来自 jquery 的示例

```
//$.get("test.php", { name: "John", time: "2pm" } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:10:41.463

首先做@coramba提到的动作，

然后像这样修改你的javascript代码：

```
$.get('bs.php', coords, function (dataThatPhpPrints) {
    alert(dataThatPhpPrints);
}); 
```

..您将看到它实际上返回了您发送到 PHP 脚本的值，而 PHP 脚本返回了该值。

为了确保您的脚本打印出一些修改 PHP 代码的内容，如下所示：

```
<?php
$output = isset($_GET['lat']) ? $_GET['lat'] : 0;
print("$output - is response from the PHP!!!");
?> 
```

现在，当您运行 javascript 时，您将收到一条警报消息，例如

```
ActualValueOfLATYouSentToPHP - is response from the PHP!!! 
```

请记住，如果您想测试您的 PHP 是否有效，您不能只是简单地在浏览器中打开它并等待一些魔法发生，因为它使用 $_GET 来获取一些值，这意味着您需要将其作为QueryString 键为 'lat' ：

```
yourhost/bs.php?lat=someTestValue 
```

# json - 无法使 UISearchBar 代码正常工作

> ID：15520728
> 
> 赞同：0
> 
> 时间：2013-03-20T10:16:12.497
> 
> 标签：json, ios6, nsdictionary, uisearchbar

xcode 新手试图让 UISearchBar 功能正常工作。

我正在使用情节提要，并且我的 tableview 控制器在数组 json 的单元格中显示事件列表（标题、位置和开始日期）。当表格首次加载时，我的所有结果都显示正常。当我单击将一些文本放入搜索栏中（标题中存在的文本）时，视图控制器中不会显示任何内容（即它会过滤掉所有事件）。希望这更有意义。

我的头文件是

```
#import <UIKit/UIKit.h>

#define kGETUrl @"http://www.max-momentus.com/fetchevents.php5"

@interface MMAllEventsViewController : UITableViewController <UISearchBarDelegate, UITableViewDelegate, UITableViewDataSource> {
    NSMutableArray *json;
    NSMutableArray *jsonFiltered;
    BOOL isFiltered;
}

@property (weak, nonatomic) IBOutlet UISearchBar *eventSearchBar;
@property (strong, nonatomic) IBOutlet UITableView *eventTableView;

@property (strong, nonatomic) NSString *categorySelected;
@property (strong, nonatomic) NSString *displayDate;

@end 
```

我的实现文件是

```
#import "MMAllEventsViewController.h"
#import "MMEventDetailViewController.h"
#import "MMCategoryViewController.h"
#import "MMEventCell.h"

@interface MMAllEventsViewController ()

@end

@implementation MMAllEventsViewController

@synthesize categorySelected, displayDate;

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"EventDetailSegue"]) {

        // Segue code
    }
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void) getData:(NSData *) data {

    NSError *error;

    json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    [self.tableView reloadData];
}

-(void) start {

        NSURL *url = [NSURL URLWithString:kGETUrl];
        NSData *data = [NSData dataWithContentsOfURL:url];
        [self getData:data];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.eventSearchBar.delegate = self;
    self.eventTableView.delegate = self;
    self.eventTableView.dataSource = self;

    [self start];

}

-(void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    if (searchText.length == 0) {
        isFiltered = NO;
    }
    else {
        isFiltered = YES;
        for (int i = 0; i < [json count]; i++)
        {
            NSMutableDictionary *temp = (NSMutableDictionary*) [json objectAtIndex:i];
            NSString *name = [NSString stringWithFormat:@"%@", [temp valueForKey:@"Title"]];
            NSRange r = [name rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if(r.location != NSNotFound)
            {
                [jsonFiltered addObject:name];
            }
            i++;
        }
    }
    [self.eventTableView reloadData];

}

-(void) searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self.eventTableView resignFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if (isFiltered) {
        return [jsonFiltered count];
    }
    return [json count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"EventCell";
    MMEventCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[MMEventCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    if (!isFiltered) {
        NSDictionary *info = [json objectAtIndex:indexPath.row];

        cell.eventTitleLabel.text = [info objectForKey:@"Title"];
        cell.locationLabel.text = [info objectForKey:@"Location"];

        NSString *startDate = [info objectForKey:@"StartDate"];
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd"];
        NSDate *sdate = [dateFormatter dateFromString:startDate];
        [dateFormatter setDateFormat:@"EEE, d MMM yy"];
        NSString *convertedStartDate = [dateFormatter stringFromDate:sdate];

        NSString *endDate = [info objectForKey:@"EndDate"];
        [dateFormatter setDateFormat:@"yyyy-MM-dd"];
        NSDate *edate = [dateFormatter dateFromString:endDate];
        [dateFormatter setDateFormat:@"EEE, d MMM yy"];
        NSString *convertedEndDate = [dateFormatter stringFromDate:edate];

        if([sdate isEqualToDate:edate]) {
            displayDate = convertedStartDate;
        } else {
            displayDate = [convertedStartDate stringByAppendingString:@" to "];
            displayDate = [displayDate stringByAppendingString:convertedEndDate];
        }

        cell.datesLabel.text = displayDate;
    }
    else {
        NSDictionary *info = [jsonFiltered objectAtIndex:indexPath.row];

        cell.eventTitleLabel.text = [info objectForKey:@"Title"];
        cell.locationLabel.text = [info objectForKey:@"Location"];

        NSString *startDate = [info objectForKey:@"StartDate"];
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd"];
        NSDate *sdate = [dateFormatter dateFromString:startDate];
        [dateFormatter setDateFormat:@"EEE, d MMM yy"];
        NSString *convertedStartDate = [dateFormatter stringFromDate:sdate];

        NSString *endDate = [info objectForKey:@"EndDate"];
        [dateFormatter setDateFormat:@"yyyy-MM-dd"];
        NSDate *edate = [dateFormatter dateFromString:endDate];
        [dateFormatter setDateFormat:@"EEE, d MMM yy"];
        NSString *convertedEndDate = [dateFormatter stringFromDate:edate];

        if([sdate isEqualToDate:edate]) {
            displayDate = convertedStartDate;
        } else {
            displayDate = [convertedStartDate stringByAppendingString:@" to "];
            displayDate = [displayDate stringByAppendingString:convertedEndDate];
        }

        cell.datesLabel.text = displayDate;
    }
    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:08:36.920

你确定你有代表：在你的视图控制器 .h 文件中吗？此外，请确保您已从情节提要中选择“UISearchBar 和 UISearchDisplay 控制器”作为您的搜索栏对象（假设您正在使用情节提要）。确保您已将 SearchBar 链接到您的视图控制器作为其委托，并且它已连接到代码中的 IBOutlet 对象（再次假设您使用情节提要：

```
@property (strong, nonatomic) IBOutlet UISearchBar *searchBar; 
```

最后，让你声明一个 UISearchDisplayController 变量，将它链接到你的*UITableView*，然后确保在加载搜索结果时，检查你的

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

和

```
 - (NSInteger)numberOfRowsInTableView:(UITableView *)tableView 
```

如果：

```
 if(tableView == searchDisplay):
 {
      ...load results.
 }
 else
 {
      ...load normal view
 } 
```

# php - 无法从 php 代码设置 schtasks 警告帐户信息

> ID：15520730
> 
> 赞同：1
> 
> 时间：2013-03-20T10:16:14.507
> 
> 标签：php, windows, scheduled-tasks

我正在尝试从命令行运行 schtask，它可以正常工作，但是在尝试通过 PHP 运行时出现错误：“无法设置帐户信息”。我的 IIS 版本是 6.0

警告：已创建计划任务“BuildInstaller_6”，但可能无法运行，因为无法设置帐户信息。

我正在运行的命令行是：

```
schtasks /create /tn "BuildInstaller31" /tr "E:\\TCS\\build\\scripts_5.2\\build.bat" /sc ONCE /st 13:25:30 /RU "TCS-SJCBUILD\\Administrator" /RP "xxxx" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:13:47.980

对我来说，我只启用任务计划程序服务。以下是对我有用的：

```
FOR /F %%X IN (C:\list of workstations.txt) DO (
sc %%X config "Service name" start= auto
sc %%X start "Service Name"
schtasks /Create /TN "task name" /TR "path to task" /sc "daily" /st "time" /sd "date I want to start the task" /s \\%%X /U "username" /P "password"
pause 
```

# ios - UIView 图片背景

> ID：15520731
> 
> 赞同：0
> 
> 时间：2013-03-20T10:16:15.867
> 
> 标签：ios, uiview, background-image

在我的应用程序中，我想在 UIView 上设置背景图像。在模拟器 iOS 中，此代码有效。并在 iPhone 黑色背景上。这是代码：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    UIGraphicsBeginImageContext(self.view.frame.size);
    [[UIImage imageNamed:@"appBG.png"] drawInRect:self.view.bounds];
    UIImage *appbg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    self.view.backgroundColor = [UIColor colorWithPatternImage:appbg];
} 
```

更新：我决定了我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:36:36.720

更好的是，您将在 UIView 上使用 ImageView 并将图像设置为它。而不是将图像设置为 UIView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:32:22.053

Try this code:

```
UIImage*    backgroundImage = [UIImage imageNamed:@"appBG.png"];
CALayer*    aLayer = [CALayer layer];
CGFloat nativeWidth = CGImageGetWidth(backgroundImage.CGImage);
CGFloat nativeHeight = CGImageGetHeight(backgroundImage.CGImage);
CGRect      startFrame = CGRectMake(0.0, 0.0, nativeWidth, nativeHeight);
aLayer.contents = (id)backgroundImage.CGImage;
aLayer.frame = startFrame;
[self.view.layer addSublayer:aLayer];
[aLayer setNeedsDisplay]; 
```

Adjust startFrame value according to your requirement.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T10:59:29.627

尝试替换以下行：

```
[[UIImage imageNamed:@"appBG.png"] drawInRect:self.view.bounds]; 
```

使用以下行：

```
[[UIImage imageNamed:@"appBG.png"] drawInRect:self.view.frame]; 
```

可能是框架或绑定的问题。

# asp.net - ASP.Net 2012 使用 jQuery 进行不显眼的验证：现在怎么办？

> ID：15520740
> 
> 赞同：1
> 
> 时间：2013-03-20T10:16:40.387
> 
> 标签：asp.net

您想回答的第一件事是：参考这篇文章： [ASP.Net 2012 Unobtrusive Validation with jQuery](https://stackoverflow.com/questions/12452109/asp-net-2012-unobtrusive-validation-with-jquery)

现在，我遇到了同样的问题，并且我使用了对我有用的修复程序：

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> 
```

注意到我对 ASP 和 .NET 知之甚少，禁用 Unobtrusive Validation 有多安全/明智？

它会破坏任何东西吗？对问题的解决方法很弱吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T21:40:01.663

我认为您的答案在：ASP.NET 4.5 和 Visual Studio 2012 中的新增功能

我正在复制以下相关文本：

> **[不显眼的验证](http://www.asp.net/aspnet/overview/aspnet-and-visual-studio-2012/whats-new#_Toc318097392)**
> 
> 您现在可以配置内置验证器控件以使用不显眼的 JavaScript 进行客户端验证逻辑。这显着减少了在页面标记中内联呈现的 JavaScript 数量并减小了整体页面大小。您可以通过以下任何方式为验证器控件配置不显眼的 JavaScript：
> 
> *   通过将以下设置添加到`<appSettings>`Web.config 文件中的元素全局：
>     
>     
> *   通过将静态`System.Web.UI.ValidationSettings.UnobtrusiveValidationMode`属性设置为全局`UnobtrusiveValidationMode.WebForms`（通常在 `Application_Start`Global.asax 文件中的方法中）。
>     
>     
> *   通过将 Page 类的新 UnobtrusiveValidationMode 属性设置为 单独为页面 `UnobtrusiveValidationMode.WebForms`。

在此博客中：[Jupaol 的编码冒险](http://jupaol.blogspot.mx/2012/09/enabling-unobtrusive-validation-from.html)。我发现：

为了修复前面的异常，我们需要安装以下 Nuget 包：

*   jQuery
*   ASPNET.ScriptManager.jQuery
*   Microsoft.AspNet.ScriptManager.MSAjax
*   Microsoft.AspNet.ScriptManager.WebForms

还有这些 Nuget 包添加的代码的详细信息。

# java - 如何创建用“”初始化的StringBuilder数组？

> ID：15520744
> 
> 赞同：11
> 
> 时间：2013-03-20T10:16:46.300
> 
> 标签：java

如何通过调用 args 构造函数来创建数组？

```
StringBuilder[] sb=new StringBuilder[100]; 
```

但是如果我检查 sb[0] 它是空的。我希望 sb[0] 到 sb[99] 用“”初始化。

以下导致错误：

```
StringBuilder[] sb=new StringBuilder[100](""); 
```

**编辑：** 或者我必须这样做：

```
for(StringBuilder it:sb)
{
  it=new StringBuilder("");
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T10:21:12.087

您的所有代码将做的就是初始化一个为 100 个 StringBuilders 准备好的数组。它实际上不会填充它。

你可以这样做：

```
StringBuilder[] sb=new StringBuilder[100];

for (int i = 0; i < sb.length; i++) {
    sb[i] = new StringBuilder("");
} 
```

那应该为你做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:17:46.737

它将永远是`null`。如果你想`""`在那里，你必须手动初始化它。

相反，您可以通过一个方法访问数组，`""`如果值为`null`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T10:20:02.467

```
StringBuilder[] sb = new StringBuilder[100];
for(int i=0;i<100;i++) {
    sb[i] = new StringBuilder("");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T10:23:38.327

`null`除非设置了任何数组中的所有值...您需要手动初始化每个值

```
StringBuilder[] sb=new StringBuilder[100];
for(int i=0; i<sb.length; i++) {
    sb[i]=new StringBuilder();
} 
```

或者...

```
StringBuilder[] sb=new StringBuilder[]{new StringBuilder(), new StringBuilder(), etc} 
```

（我推荐第一种方法用于包含大量条目的数组）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-11T08:02:34.143

Java 中引用传递的有趣应用。

请注意，以下将起作用 -

```
StringBuilder[] array = new StringBuilder[10];
for (int i= 0; i < 10; i++) {
    array [i] = new StringBuilder("");
} 
```

但以下将不起作用 -

```
StringBuilder[] array = new StringBuilder[10];
for (StringBuilder sb: array) {
    sb = new StringBuilder("");
} 
```

这是因为在第二种情况下，变量`sb`被分配了对新 StringBuilder 的引用，而不是引用数组的元素。数组元素不会改变，因为`sb`失去了对它们的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-11T08:07:53.670

任何数组中的所有值都是空的，除非它们被设置......您需要手动初始化每个值

```
StringBuilder[] sb=new StringBuilder[100];
for(int i=0; i<sb.length; i++) {
    sb[i]=new StringBuilder();
} 
```

# ember.js - isLoaded 观察者不会在正确的时间触发

> ID：15520746
> 
> 赞同：1
> 
> 时间：2013-03-20T10:16:49.157
> 
> 标签：ember.js, ember-data

我想我做错了什么，但我不知道是什么。

当我的应用程序加载时，它需要检索所有公司，当这些公司到达时，它需要`activeCompany`在我的`ApplicationController`. `content.isLoaded`但是，当我在我的 is上绑定一个观察者时，`CompaniesController`会在数据加载之前触发。

**应用**

```
App = Ember.Application.create({
    ApplicationController : Ember.Controller.extend({
        needs: ['companies'],
        activeCompany: null,
        activateCompany: function(company) {
            this.set('activeCompany',company);
        }
    })
}); 
```

**路由器**

```
App.ApplicationRoute = Ember.Route.extend({
    enableLogging : true,
    setupController: function(controller, model) {
        this.controllerFor('companies').set('content', App.Company.find());
    }
}); 
```

**公司控制器**

```
App.CompaniesController = Em.ArrayController.extend({
    needs: ['application'],
    activateCompany: function() {
        console.log(this.get('content.length')); // 0
        console.log(this.get('content.isLoaded')); // true
        console.log(this.get('content.firstObject')); // undefined
        this.get('controllers.application').activateCompany(this.get('content.firstObject'));
    }.observes('content.isLoaded')
}); 
```

为什么`content.isLoaded`我的数据未加载时会触发？

也许我的概念是错误的，但我的应用程序的其余部分取决于`activeCompany`检索其他数据。我还有一个“公司切换器”，它也设置了`activeCompany`属性。

当我将观察者更改为`content.@each`它时，它会触发数组中的所有项目。

**编辑**

我可以像这样解决它：

```
App.CompaniesController = Em.ArrayController.extend({
    needs: ['application'],
    activateCompany: function() {
        if (this.get('content.length') > 0)
            this.get('controllers.application').activateCompany(this.get('content.firstObject'));
    }.observes('content.firstObject.isLoaded')
}); 
```

`firstObject`这仅在我的更改时触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:57:39.453

事实证明我应该使用`findQuery`. 我以前试过这样：`App.Store.findQuery(App.Company)`但这没有用。正确的做法是这样的：

```
this.controllerFor('companies').set('model', this.get('store').findQuery(App.Company)); 
```

我需要通过`this.get('store')`

# javascript - 如何在剑道网格中右对齐 footerTemplate 的值？

> ID：15520751
> 
> 赞同：6
> 
> 时间：2013-03-20T10:16:56.737
> 
> 标签：javascript, kendo-ui

我有一个剑道网格，我正在使用 footerTemplate 来查找网格中的值的总和。我已成功对齐网格中列的值。我的问题是如何对齐 footerTemplate 中的值以下是我正在使用的代码

```
{ 
    field: "covered_amount",
    width: "150px", 
    title: "Covered",
    sortable:false,
    attributes:  { style:"text-align:right;" },
    footerTemplate:"#= sum # "
}, 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T10:25:24.127

将页脚模板定义为：

```
footerTemplate: "<div style='float: right'>#= sum #</div>" 
```

或者：

```
footerTemplate: "<div style='text-align: right'>#= sum #</div>" 
```

您甚至可以使用 kendo.toString 对其进行格式化，例如：

```
footerTemplate: "<div style='float: right'>#= kendo.toString(sum, 'c2') #</div>" 
```

# c - 尝试使用按值调用和按引用调用的结构...代码编译没有任何错误..但是打印垃圾值？

> ID：15520752
> 
> 赞同：0
> 
> 时间：2013-03-20T10:17:03.477
> 
> 标签：c

嗨朋友们，因为我是 C 的新手，我努力练习以理解 C 中的所有 nitygrity 事物。在尝试结构时，我设法编写了一段代码，我试图通过值和引用将结构传递给函数。但是我认为我做错了什么...请帮助朋友...如果你们能指导我获得有关结构的适当深入教程，那将是一个很大的帮助...谢谢

```
 #include <stdio.h>
 #include <stdlib.h>

 struct foo{
        char arr[200];

        int x_val;
        int y_val;

        float result;

        };

 struct foo my_foo;

 int foo_fun(struct foo var);        //proto declearation 

 int foo_fun1(struct foo *var1);    //proto declearation 

 int main()
 {
     //As I was not getting prover string printed by using function foo_fun1
     // I have tried to print directrly calling another ptr here 

     int i = 0;

     struct foo *ptr;

     ptr = (struct foo *)malloc(sizeof(struct foo)*10);

     ptr->arr[0] = "calculator";

     printf("Ptr zero contains a string %s\n",ptr->arr[0]); //even here prints wrong value

     i = foo_fun(my_foo);

     printf("Result from foo_fun is %d\n",i);

    //Expecting this function to print string ....but getting some unexpected result

    foo_fun1(&my_foo);

    system("pause"); 

    return 0;  

 }

 // pass by value 

 int foo_fun(struct foo var)
 {
     int i;
     int total = 0;

for(i=0;i<sizeof(var.arr); i++)

            { var.arr[i] = i;

              total = total+var.arr[i];
             }
     var.x_val = 230;
     var.y_val = 120;

     return total;

     }

 // pass by reference  

 int foo_fun1(struct foo *var1)
 {
     int i = 0;

     var1 = (struct foo *)malloc(sizeof(struct foo)*20);

     var1->arr[0] = "A";

     printf("%s\n",var1->arr);

     return 0;

     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:19:30.167

以下是错误的：

```
ptr->arr[0] = "calculator"; 
```

（顺便说一句，你的编译器应该已经警告过你了。）

你应该`strcpy()`改用。

对于您使用类似构造的其他地方也是如此。

最后，`malloc()`in`foo_fun1()`是不必要的。您不仅要覆盖函数参数的值（为什么？），而且还会泄漏内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:25:08.643

您的代码中存在三个问题：

您不得将返回值从`malloc()`-

您正在尝试将常量字符串分配给索引数组 - 所以它应该是

`strcpy(ptr->arr, "calculator");`和 `strcpy(var1->arr,"A");`

此外 - 您的代码中存在大量内存泄漏。没有电话到`free()`任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:22:28.647

线

```
ptr->arr[0] = "calculator"; 
```

是错误的，您不能将字符串分配给单个字符，这就是所`ptr->arr[0]`代表的。

```
ptr->arr = "calculator"; 
```

也是错误的，因为您不能以这种方式将字符串分配给 char 数组，因此您必须使用[strcpy()](http://www.cplusplus.com/reference/cstring/strcpy/)。

```
printf("Ptr zero contains a string %s\n",ptr->arr[0]); 
```

也应该是

```
printf("Ptr zero contains a string %s\n",ptr->arr); 
```

因为您打印的是数组而不是单个字符

# grid - KENDOUI 给组头

> ID：15520754
> 
> 赞同：2
> 
> 时间：2013-03-20T10:17:12.957
> 
> 标签：grid, kendo-ui

因为我们可以在普通的 Telerik 网格中给出公共组标题，如下例所示，

[http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx)

我们可以为 KENDOUI - MVC 中的网格做同样的事情吗？我查看了演示，但没有发现类似的东西。

如果可能的话，你能举个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:20:42.043

遗憾的是，Kendo Grid 不支持多标题。但是，您可以尝试将一些 html 插入到 Grid 的头部并使其看起来像这样：

```
$('#grid').data().kendoGrid.thead.prepend("<tr><td colspan=2>foo</td><td colspan=3>bar</td></tr>") 
```

检查我创建的以下示例：

[http://jsbin.com/edamuj/605/edit](http://jsbin.com/edamuj/605/edit)

我希望这有帮助。

***编辑***

***从 2014 年第 3 季度开始，MultiHeaders 受支持，[此处](http://demos.telerik.com/kendo-ui/grid/multicolumnheaders)提供演示。***

# c++ - 高效流式滑动窗口处理的建议

> ID：15520763
> 
> 赞同：3
> 
> 时间：2013-03-20T10:17:45.157
> 
> 标签：c++, stream, real-time, time-series

在每个时间 t（每 10 毫秒）我收到一组整数

```
{i_{0,t}, i_{1,t}, i_{2,t}}_t 
```

进入单独的缓冲区：

```
seq_0 = [...,i_{0,t-2},i_{0,t-1},i_{0,t},...], seq_1 and seq_2 
```

我需要对一组不同大小的滑动窗口的序列进行实时计算。例如：对于大小为 的滑动窗口，`3`我将计算每个缓冲序列中在`f()`时间 接收的样本的函数。`t``t-1``t-2`

```
at time t for seq_0 I compute f([i_{0,t-2},i_{0,t-1},i_{0,t}]) 
```

我想要一些关于数据结构（c++）使用或代码设计的建议。在实践中，我想要 4 种不同大小的滑动窗口。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:30:25.687

您可以使用大小等于最大窗口宽度的[循环缓冲区。](http://en.wikipedia.org/wiki/Circular_buffer)

# gradle - 无法运行 Gradlew：在线程“main”中获取异常 java.net.SocketException：连接重置

> ID：15520766
> 
> 赞同：4
> 
> 时间：2013-03-20T10:17:49.470
> 
> 标签：gradle

我正在尝试运行 gradlew 来构建一些提供给我的代码。源代码是从[这里](https://github.com/SpringSource/spring-security-saml)下载的 ZIP ，我所做的只是打开命令提示符，cd 到该文件夹​​并运行 gradlew.bat。

我已经在我的 crash'n'burn 机器上完成了这项工作，但我无法让它在我的主要开发机器上工作。开发机器位于需要身份验证的代理后面，另一台机器不需要 - 它们位于不同的位置。

最初，我得到：

```
Exception in thread "main" java.net.UnknownHostException: services.gradle.org 
```

从[this](https://stackoverflow.com/questions/8938994/gradlew-behind-a-proxy)到 gradle.properties，我添加了：

```
systemProp.http.proxyHost=192.168.x.y 
systemProp.http.proxyPort=80
systemProp.http.proxyUser=myuserid
systemProp.http.proxyPassword=mypassword 
```

并再次运行它并得到：

```
C:\Users\tso259sa\workspace\spring-security-saml-master>gradlew.bat
Downloading http://services.gradle.org/distributions/gradle-1.4-bin.zip

Exception in thread "main" java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
    at sun.net.www.MeteredStream.read(MeteredStream.java:134)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3052)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3046)
    at org.gradle.wrapper.Download.downloadInternal(Download.java:67)
    at org.gradle.wrapper.Download.download(Download.java:49)
    at org.gradle.wrapper.Install.createDist(Install.java:51)
    at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:129)
    at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:48) 
```

有关信息，如果我尝试输入错误的密码或 ID，我会得到：

```
Exception in thread "main" java.net.ProtocolException: Server redirected too many  times (20) 
```

所以我认为排除了不正确的ID。有人有什么想法我可以尝试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:08:53.707

我不知道究竟是什么导致了连接重置，但我又试了几次，以防它是暂时的，一段时间后，响应变为：

```
Exception in thread "main" java.io.IOException: Server returned 
HTTP response code: 403 
```

怀疑我们的安全系统，我尝试使用浏览器下载该文件，并从其中一个安全框收到一条消息，说它已被阻止，因为它包含一个 .bat 文件：经常发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T15:33:51.403

查看您的 build.gradle 和 gradle.properties 并在所有链接中将“https://”编辑为“http://”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T01:26:02.637

我今天仍然遇到这个问题。不同的公司有不同的代理设置。经过调查，它对我有用：

```
org.gradle.daemon=true
systemProp.https.proxyHost=[server name]
systemProp.https.proxyPort=[port]
systemProp.https.proxyUser=[user name]
systemProp.https.proxyPassword=XXXXX
systemProp.https.nonProxyHosts= localhost
systemProp.http.proxyHost=[server name]
systemProp.http.proxyPort=[port]
systemProp.http.proxyUser=[user name]
systemProp.http.proxyPassword=XXXXX
systemProp.http.nonProxyHosts= localhost 
```

# objective-c - 如何在多个方法调用中保持变量值？

> ID：15520774
> 
> 赞同：2
> 
> 时间：2013-03-20T10:18:20.940
> 
> 标签：objective-c

我想在我的 Cocos2D 游戏中使用一次按钮。

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    int f = 0;
    if (![self buttonTouch:touch]) return NO;
    if (f !=  1) {
        f = 1;
        button1.color = ccc3(50, 50, 50);
    }
    return YES;
} 
```

该按钮工作完美，但我只希望它工作一次。正如您在开始时看到的 f=0 并且一旦动作被激活，它会检查它之前是否未使用过，然后更改为 f=1（使用按钮），因此无法再次播放动作。但由于某种原因它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:25:46.270

使用 static 或使其成为成员变量。

```
 static int f = 0; 
```

# coldfusion - 在 ColdFusion 中生成 32 个字符的密钥

> ID：15520777
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:18:22.820
> 
> 标签：coldfusion, coldfusion-9

在 ColdFusion 9 中有一个`GenerateSecretKey`功能。我们可以使用生成所需的长度密钥`GenerateSecretKey`吗？我需要为我的应用程序生成一个 32 字符的密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:01:33.040

GenerateSecretKey 根据算法生成密钥，可以指定密钥大小以位为单位，可以增加生成密钥的长度。生成 32 个字符的密钥可以使用 CreateUuid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:21:42.233

如果您只需要一个 32 个字符长的随机字符串，您可以使用[createUUID()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-70de.html)，但是：

> **退货**
> 
> ColdFusion 格式的 UUID，格式为 xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxxxxxx，其中 x 是十六进制数字（0-9 或 AF）。（字符组是 8-4-4-16。）

包括破折号，这是 35 个字符，但

```
replace(createUUID(),"-","", "all")
left(createUUID(),"32")
right(createUUID(),"32") 
```

会给你一个长度为 32 个字符的字符串，它可能对你有用。

# winforms - 在winforms文本框上吃滚轮事件

> ID：15520784
> 
> 赞同：1
> 
> 时间：2013-03-20T10:18:39.763
> 
> 标签：winforms, textbox, event-handling, scroll

如果 Control 键按下，我想处理 Winforms 文本框上的滚轮事件。虽然我当然可以，但它仍然滚动底层文本框，我可以以某种方式禁用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:17:59.797

我认为您必须在 Control 关闭时覆盖文本框的 WndProc 并忽略 EN_VSCROLL 消息。

# c# - 安装 SDK 1.8 后出现 WaHostBootstrapper 错误

> ID：15520785
> 
> 赞同：2
> 
> 时间：2013-03-20T10:18:51.317
> 
> 标签：c#, iis, azure, azure-worker-roles

我最近将我们的 Azure SDK 升级到 1.8（从 1.6 开始）。在部署我们所有的网络和工作人员角色时，除了 1 之外，没有任何问题。

这 1 个 worker 角色是唯一的 1 个有 2 个实例（其余为单实例）；所有 dll 都设置为 CopyLocal = "true"，连接字符串与成功上线的工作角色相同，我看不出代码有任何区别。

当我远程桌面进入其中一个实例时引发的错误是：

```
Faulting application name: WaHostBootstrapper.exe, version: 6.0.6002.18488, time stamp: 0x50a71329
Faulting module name: ntdll.dll, version: 6.1.7601.17696, time stamp: 0x4e8147f0
Exception code: 0xc0000374
Fault offset: 0x00000000000a0d6f
Faulting process id: 0x7d8
Faulting application start time: 0x01ce24b6e86ff75c
Faulting application path: E:\base\x64\WaHostBootstrapper.exe
Faulting module path: D:\Windows\SYSTEM32\ntdll.dll
Report Id: 33abe8c7-90aa-11e2-b534-00155d3a2649 
```

和：

```
A fatal error occurred when attempting to access the SSL server credential private key. 
The error code returned from the cryptographic module is 0x8009030d. 
The internal error state is 10001. 
```

在 Azure 管理门户中，角色会经历以下循环：

*   起始角色
*   准备节点
*   恢复角色

几个小时以来，我一直试图确定问题所在，但无济于事。

## 额外细节

下面是原始的 WaHostBoostrapperLog；有许多这样的日志，唯一的区别是每个日志中的 PID 都发生了变化。

```
<- WapXmlReadRoleModel=0x1
<- WapXmlReadContainerId=0x1
<- WapGetVirtualAccountName=0x1
<- WapGetAppCmdPath=0x1
<- WapSetDefaultEnvironment=0x1
<- WapXmlReadContainerId=0x1
<- WapGetVirtualAccountName=0x1
<- WapGetAppHostConfigPath=0x1
<- GetDebugger=0x1
<- GetStartupTaskDebugger=0x1
<- WapGetEnvironmentVariable=0x800700cb
<- WapGetEnvironmentVariable=0x800700cb
Executing Startup Task type=2 rolemodule=Diagnostics cmd="E:\plugins\Diagnostics\DiagnosticsAgent.exe" 
Executing "E:\plugins\Diagnostics\DiagnosticsAgent.exe" .
<- WapGetEnvironmentVariable=0x800700cb
<- WapGetEnvironmentVariable=0x800700cb
Registering client with PID 2180.
Client DiagnosticsAgent.exe (2180) registered.
Executing Startup Task type=0 rolemodule=Diagnostics cmd="E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup
Executing "E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup.
Registering client with PID 1468.
Client DiagnosticsAgent.exe (1468) registered.
Program "E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup exited with 0\. Working Directory = E:\plugins\Diagnostics
<- WapGetEnvironmentVariable=0x800700cb
<- WapGetEnvironmentVariable=0x800700cb
Executing Startup Task type=2 rolemodule=RemoteAccess cmd="E:\plugins\RemoteAccess\RemoteAccessAgent.exe" 
Executing "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" .
<- WapGetEnvironmentVariable=0x800700cb
<- WapGetEnvironmentVariable=0x800700cb
Registering client with PID 988.
Client RemoteAccessAgent.exe (988) registered.
Executing Startup Task type=0 rolemodule=RemoteAccess cmd="E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup
Executing "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup.
Registering client with PID 1624.
Client RemoteAccessAgent.exe (1624) registered.
Program "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup exited with 0\. Working Directory = E:\plugins\RemoteAccess
<- GetDebugger=0x1
<- GetRoleHostDebugger=0x1
<- WapXmlReadContainerId=0x1
<- WapGetVirtualAccountName=0x1
Executing base\x64\WaWorkerHost.exe .
Role host process PID: 2264.
Registering client with PID 2264.
Client WaWorkerHost.exe (2264) registered.
Client process 2264 is the role host.
Role host process registered.
Getting status from client DiagnosticsAgent.exe (2180).
Client reported status 0.
Getting status from client DiagnosticsAgent.exe (1468).
Failed to connect to client DiagnosticsAgent.exe (1468).
<- CRuntimeClient::OnRoleStatusCallback(0x000000000044EB40) =0x800706ba
Getting status from client RemoteAccessAgent.exe (988).
Client reported status 0.
Getting status from client RemoteAccessAgent.exe (1624).
Failed to connect to client RemoteAccessAgent.exe (1624).
<- CRuntimeClient::OnRoleStatusCallback(0x000000000044EBD0) =0x800706ba
Getting status from client WaWorkerHost.exe (2264).
Failed to connect to client WaWorkerHost.exe (2264).
<- CRuntimeClient::OnRoleStatusCallback(0x000000000044E5A0) =0x800706ba 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:02:38.923

在对有效的工作角色和导致上述错误的角色进行并排比较之后；我注意到无法启动的角色对**另一个**工作角色和单元测试项目都有不必要的引用。

虽然这在 SDK (1.6) 的早期版本中默默工作；1.8 版本似乎与其中一个参考有问题。

删除不必要的引用后，角色上线没有问题。

如果你遇到我推荐的 WaHostBootstrapper：

*   确保所有 dll 都设置为 CopyLocal = "true" （[如本问题所示](https://stackoverflow.com/questions/11604491/azure-deployment-continually-recycling-since-upgrading-the-june-2012-sdk-1-7)）
*   从项目中删除任何不必要的引用
*   删除任何可能导致冲突的引用

# ios - 在 UITabBarItem 上使用自定义选择和未选择的图像

> ID：15520786
> 
> 赞同：4
> 
> 时间：2013-03-20T10:18:53.540
> 
> 标签：ios, objective-c, uitabbarcontroller, uitabbar

我正在尝试将我自己的图像设置为 UITabBarItem 上的选定和未选定图像，但没有运气。我在视图控制器`viewDidLoad`和`viewWillAppear`方法中尝试了以下代码，但都不起作用：

```
[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"on_rojo"] withFinishedUnselectedImage:[UIImage imageNamed:@"on"]]; 
```

我究竟做错了什么？我也读过：[iOS 5: UITabBarItem setFinishedSelectedImage:withFinishedUnselectedImage: not working / ignored](https://stackoverflow.com/questions/8547669/ios-5-uitabbaritem-setfinishedselectedimagewithfinishedunselectedimage-not-wo)，但我已经在 IB 上创建了我的 UITabBarController，而不是以编程方式。这是问题吗？

先感谢您，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T11:06:35.633

您必须为每个选项卡项指定图像。以下代码对我有用

```
if ([[tabBarController.tabBar.items objectAtIndex:0] respondsToSelector:@selector(setFinishedSelectedImage:withFinishedUnselectedImage:)]) {

  [[tabBarController.tabBar.items objectAtIndex:0] setFinishedSelectedImage:[UIImage imageNamed:@"blabla1.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"bleble1.png"]];
  [[tabBarController.tabBar.items objectAtIndex:1] setFinishedSelectedImage:[UIImage imageNamed:@"blabla2.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"bleble2.png"]];
  [[tabBarController.tabBar.items objectAtIndex:2] setFinishedSelectedImage:[UIImage imageNamed:@"blabla3.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"bleble3.png"]];
  [[tabBarController.tabBar.items objectAtIndex:3] setFinishedSelectedImage:[UIImage imageNamed:@"blabla4.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"bleble4.png"]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:49:49.263

试试这个，我用这个：

[ALT标签栏](http://www.cocoacontrols.com/controls/altabbarcontroller)

# java - 从 String 中删除除 controlchars 之外的不可打印的 utf8 字符

> ID：15520791
> 
> 赞同：6
> 
> 时间：2013-03-20T10:19:03.823
> 
> 标签：java, regex, non-printing-characters

我有一个包含文本、控制字符、数字、变音符号（德语）和其他 utf8 字符的字符串。

我想去掉所有不是“语言的一部分”的 utf8 字符。（非完整列表）“:/\ßä,;\n \t”等特殊字符应全部保留。

可悲的是，stackoverflow 删除了所有这些字符，所以我必须附加一张图片（[链接](http://i.imgur.com/TUupDIg.png)）。

有任何想法吗？非常感谢帮助！

PS：如果有人知道不会杀死那些特殊字符的粘贴服务，我会很乐意上传字符串..我只是找不到..

[编辑]：我认为正则表达式“\P{Cc}”是我想要保留的所有字符。可以反转这个正则表达式，以便返回所有不匹配这个正则表达式的字符吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T10:29:01.227

您已经找到了 Unicode 字符属性。

您可以通过更改前导“p”的大小写来反转字符属性

例如

`\p{L}`匹配所有字母

`\P{L}`匹配所有没有属性字母的字符。

所以如果你认为`\P{Cc}`是你所需要的，那么`\p{Cc}`会适得其反。

[有关正则表达式](http://www.regular-expressions.info/unicode.html)的更多详细信息。信息

我很确定`\p{Cc}`它接近你想要的，但要小心，它确实包括制表符 (0x09)、换行符 (0x0A) 和回车符 (0x0D)。

但是您可以创建自己的角色类，如下所示：

```
[^\P{Cc}\t\r\n] 
```

这个类`[^...]`是一个否定字符类，所以它会匹配所有不是“非控制字符”的东西（双重否定，所以它匹配控制字符），而不是制表符、CR 和 LF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:24:34.993

您可以使用，

```
your_string.replaceAll("\\p{C}", ""); 
```

# java - 打开时默认最大化表单（JFrame）

> ID：15520795
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:19:22.320
> 
> 标签：java, swing

我如何`JFrame`在打开时默认最大化表单（）？我已经尝试过网络，但无法获得可以完成的适当代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T10:24:02.143

在使框架可见之前和调用 pack() 之后，调用它 -

```
this.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

假设“this”是 JFrame 的一个实例。

# bash - 用于列出文本文件中所有不同字符的脚本

> ID：15520796
> 
> 赞同：11
> 
> 时间：2013-03-20T10:19:27.277
> 
> 标签：bash, sed, awk

例如

给定一个文件`input.txt`，其内容如下：

```
He likes cats, really? 
```

输出将是：

```
H
e

l
i
k
s
c
a
t
,
r
l
y
? 
```

请注意输出中字符的顺序无关紧要。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T10:24:35.877

怎么样：

```
echo "He likes cats, really?" | fold -w1 | sort -u 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T10:38:11.910

一种`grep -o .`用于将每个字符放在换行符上并 `sort -u`删除重复项的方法：

```
$ grep -o . file | sort -u 
```

或者一个不需要的解决方案`sort -u`或多个命令纯粹用`awk`：

```
$ awk '{for(i=1;i<=NF;i++)if(!a[$i]++)print $i}' FS="" file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:40:06.403

一个尴尬的方式：

```
awk  '{$1=$1}1' FS="" OFS="\n" file | sort -u 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:25:51.917

您可以`sed`按如下方式使用：

```
sed 's/./\0\n/g' input.txt | sort -u 
```

# jquery - 为什么更新的值没有在 jqgrid 中发布

> ID：15520799
> 
> 赞同：0
> 
> 时间：2013-03-20T10:19:36.893
> 
> 标签：jquery, ajax, jqgrid, struts2, struts2-jquery

我正在使用 struts2-jqgrid-plugin 实现 jqgrid。我的问题是当我在表单元素中更改隐藏字段的值时，当我使用 jqgrid 发布这些隐藏字段时，更新的值不会反映。

**我的 jqgrid 表单**

```
<form name="adminFrm" id="adminFrm">
<div>
<s:url var="remoteurl" action="adminJsontable">
    </s:url>
    <sjg:grid
        id="gridtable"
        caption="Issue-Summary"
        dataType="json"
        href="%{remoteurl}"
        pager="true"
        gridModel="finalGridModel"
        rowList="10,20,25,30"
        rowNum="10"
        rownumbers="true"
        width="1250"
        loadingText="Dashboard is being Loaded..."
        formIds="adminFrm" // here I am sending all form-elements
        gridview="true"   
     >
        <sjg:gridColumn  name="issue_id"  id="issueId"   index="id" title="Issue-ID" formatter="integer" formatoptions="{thousandsSeparator: ''}"  sortable="false" width="100"/>
        <sjg:gridColumn name="issue_status"  index="issue_status" title="Current Status" search="true" searchoptions="{value:':Any;Completed:Completed;Assigned:Assigned;Denied:Denied'}"             searchtype="select"/>

    </sjg:grid>

</div>
<s:hidden name="hidden_field" id="hidden_field" value="123456"></s:hidden>   
  </form> 
```

**在这里，我正在尝试更新某些事件的隐藏字段值**

```
function x()
{
$("#hidden_field").val("Value changed");
} 
```

但是当**jqgrid**重新加载时，它仍然发布隐藏字段的先前值，即 12345，而不是更新值。我使用 firebug 检查了隐藏字段，这也表明隐藏字段的值已更改，那么为什么 jqgrid 仍将先前的值发布到页面上不存在的服务器（我通过 firebug 检查）。如何解决这个问题呢。[有关详细信息，您可以在 jqgrid 中使用 ajax call on paging](https://stackoverflow.com/questions/15132873/issue-with-ajax-call-on-paging-in-jqgrid)参考此帖子问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:51:35.340

好的，我想我明白了（我不做struts）。该值将在构建 jqGrid 时设置，并且您需要在它重新加载时对其进行更新，因为它看到了在 jqGrid 初始化时设置的值。

编辑：尝试通过以下方式更改隐藏字段后重置网格参数：

```
$('#gridName').jqGrid('setGridParam', { formIds: 'adminFrm').trigger('reloadGrid', [{ page: 1}]); 
```

# algorithm - 不均匀除法递归算法复杂度分析

> ID：15520801
> 
> 赞同：2
> 
> 时间：2013-03-20T10:19:49.403
> 
> 标签：algorithm, recursion, code-analysis

我被要求使用迭代方法分析以下递归方程的时间复杂度：

> T(n)=T(n/3)+T(2n/3)+n^2。
> 
> T(1)=1

当我尝试扩展方程式时，它会爆炸，我无法真正跟踪所有递归“调用”和常量。这是由于数据的不均匀划分（1\3 - 2\3）造成的。

有没有更简单的方法可以使用迭代方法来解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:13:28.733

It seems to be O(n^2) if I haven't missed anything...

First of all T grows monotonously (for several first values you can check this manually, for the rest it's by induction - if a function is monotonous in [1..10], then it will be monotonous on [1..15] and so on).

```
T(n)=T(n/3)+T(2n/3)+n^2<=2T(2n/3)+n^2
T(n)<=n^2+2*(2n/3)^2+4*(4n/9)^2+...
     =sum[k=0..log3(n)]((8/9)^k*n^2)
     =n^2*sum[k=0..log3(n)](8/9)^k
    <=n^2*sum[k=0..inf](8/9)^k
    <=C*n^2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:46:46.130

[这](http://www.cs.duke.edu/~reif/courses/alglectures/skiena.lectures/lecture3.2.pdf)是一篇论文，展示了一个类似公式的分析：T(n)=T(n/3)+T(2n/3)+n

使其迭代的一种方法需要使用类似于解析器\编译器工作方式的方法

应用你的公式： T(n)=T(n/3)+T(2n/3)+n^2 与 n = 1..9 产量

```
T(0) = 0

T(1) = T(1/3) + T(2/3) + 1

T(2) = T(2/3) + T(4/3) + 4

T(3) = T(1) + T(2) + 9

T(4) = T(4/3) + T(8/3) + 16

T(5) = T(5/3) + T(10/3) + 25

T(6) = T(2) + T(4) + 36

T(7) = T(7/3) + T(14/3) + 49

T(8) = T(8/3) + T(16/3) + 64

T(9) = T(3) + T(6) + 91

T(3m) = T(m) + T(2m) + 9m^2 
```

..也许这可以给你一些提示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:14:56.077

这里有帮助的是不要将任何数字相乘，而是根据幂写出所有内容。全部手工完成后，我在前几次扩展中得到了以下信息：

```
T(n) = T((1/3)n) + T((2/3)n) + n^2
     =    T((1/3^2)n) 
       + 2T((2/3^2)n) 
       +  T((2^2/3^2)n) 
       + [n^2]                      #constants from the first expansion
       + [((1/3)n)^2 + ((2/3)n)^2]  #constants from the second expansion
     =    T((1/3^3)n) 
       + 3T((2/3^3)n) 
       + 3T((2^2/3^3)n) 
       +  T((2^3/3^3)n) 
       + [n^2] 
       + [((1/3)n)^2 + ((2/3)n)^2] 
       + [((1/3^2)n)^2 + ((2/3^2)n)^2 + ((2^2/3^2)n)^2] #constants from 3rd expansion 
```

这有点难说，但似乎发生的是你得到了`T`s 的二项式系数，其中`x`th 展开看起来像这样：

```
T(n) = sum((x choose i) * T(((2^i)/(3^x))n), i from 0 to x)
       + constants 
```

在每一步中，在展开时添加的额外常量是from 展开`x`的参数，平方，因为它们最终都得到平方，这要归功于. 因此，给定展开式的所有*新*常数都等于：`T``x-1``n^2`*`y`*

 *```
NewConsts(y) = sum(((y - 1) choose i) * (((2^i)/(3^(y-1)))*n)^2, i from 0 to y - 1) 
```

并且*所有*展开时的常数`x`都等于

```
n^2 + sum(NewConsts(y), y from 1 to x) 
```

所以，假设以上所有内容都是正确的，我不能 100% 确定，我想你必须弄清楚常数什么时候不再重要——也就是说，等于 0——`x`你`((2^x / 3^x) * n)^2)`的答案是所有的总和那些常数...*

# facebook - 如何通过 FQL/Graph 获取评论的最后编辑时间？

> ID：15520802
> 
> 赞同：2
> 
> 时间：2013-03-20T10:19:50.870
> 
> 标签：facebook, facebook-fql

我们已经建立了一个系统，可以从我们的 FB 页面获取所有帖子和评论。

直播中的 updated_time 有以下描述“该帖子最后评论的时间”。

我们使用它来在帖子上发布新评论时得到通知。当这个日期发生变化时，我们调用 API 来获取新的评论。

但是，如果评论被编辑。好像没有办法通知？

帖子上的“updated_time”没有改变。[评论](https://developers.facebook.com/docs/reference/fql/comment)中也没有任何时间八卦有关所做的任何更改。我们唯一的评论日期列是时间列，但如果评论被编辑，则不会改变。

我认为 Facebook 也应该在评论中添加“updated_time”，并让编辑的时间反映在帖子的“updated_time”上。

但是要知道，有没有人有任何解决方案？

# php - 智能 Ajax/PHP 常见问题解答脚本

> ID：15520803
> 
> 赞同：3
> 
> 时间：2013-03-20T10:20:00.903
> 
> 标签：php, mysql, artificial-intelligence

我在一家大型旅行社担任程序员。我很有经验，但现在我遇到了一个需要建立某种人工智能的问题。我知道这类脚本无处不在，但我似乎找不到任何有用的东西。

基本上我们正在构建一个常见问题解答脚本。我们每天都收到相同类型问题的电子邮件，所以我们想建立一个联系表格，就像我写这篇文章时一样：在右侧它显示了一些已经回答的问题与我现在正在写的有点相似。当我写这个主题时，也会发生同样的事情。

好吧，言归正传。我正在制作联系表格，但是当客户正在编写主题和/或消息时，我希望在他们编写时为他们呈现一些预定义的问答。我相信我无法使用[`soundex`](http://php.net/manual/en/function.soundex.php)，因为常见问题解答将使用丹麦语，因此在语音上听起来不像英语。

所以..我将如何：

*   建立数据库？我应该使用全文还是标签，并从消息中提取已知标签？
*   构建 PHP 脚本？您认为我应该知道哪些功能？

基本上我正在研究，所以我会非常感谢简单的 SQL 查询以及为此目的设计的完整脚本！什么都有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:33:09.230

打算将此作为评论添加到 Zane，但它变得相当长：

根据丹麦语语法，您可能需要一些相当大的 Levenshtein 距离截止点才能找到可能的匹配项。

如果您有更多时间花在这方面，您可能希望在词边界处拆分，对单个词进行词干，然后将这些词干的数量与数据库中已有的数量进行比较。[在http://pecl.php.net/package/stem](http://pecl.php.net/package/stem)似乎有一个词干库（我从未使用过它，但它似乎支持丹麦语）。

由于 pecl-stem 似乎没有我能找到的正式文档（好吧，我很好奇），所以在安装 pecl 包后你会像这样使用它：

```
$stem = stem($myInputWord, STEM_DANISH); 
```

而且由于我一直在仔细阅读 PHP 手册，我不妨补充一下，对于大型应用程序（我不会*只*针对您的情况介绍它），您可能需要查看 PHP 手册的[搜索引擎部分](http://www.php.net/manual/en/refs.search.php)以进行设置Solr等。但同样，在你的情况下，这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:23:03.833

查看[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)

# c# - 字符串到十六进制整数数组？

> ID：15520806
> 
> 赞同：2
> 
> 时间：2013-03-20T10:20:14.797
> 
> 标签：c#, .net

是否可以将 HEX 字符串转换为整数数组？

```
// This string...
string a = "8FCC44";

// Should look like this:
int[] b = {0x8f,0xcc,0x44}; 
```

但我不知道如何做到这一点。

我找到[了这个](https://stackoverflow.com/questions/9499389/hex-string-to-int-array-conversion)问题，但我无法理解答案。我是 C# 新手，所以如果有人能给我一个例子，那就太好了。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:25:25.797

```
int[] ConvertToIntArray(string a)
{
    List<int> x = new List<int>();
    for(int i=0; i<a.Length-1; i+=2)
        x.Add(int.Parse(a.Substring(i, 2), System.Globalization.NumberStyles.HexNumber));

    return x.ToArray();
} 
```

然后，您可以使用 int (Int32) 类的 ToString() 重载将它们打印为十六进制或十进制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:40:52.440

其他方式：

```
var a = "8fcc44";
var b = Enumerable.Range(0, a.Length / 2).Select(x => 
          Convert.ToInt32(a.Substring(x * 2, 2), 16)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:29:15.997

```
 static void Main(string[] args)
        {
            string a = "8fcc44";            
            int itemNumber = 0;
            int[] iArray = new int[3];
            for (int i = 0; i < a.Length - 1; i += 2)
            {
                iArray[itemNumber] = (int.Parse(a.Substring(i, 2), System.Globalization.NumberStyles.HexNumber));
                itemNumber++;
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:33:49.073

答案侧重于 Java，但也可以在 C# 中以类似的方式执行此操作。基本上，您必须将字符串划分为子字符串，每 2 个字符长：

```
"8FCC44" -> "8F", "CC", "44" 
```

您可以使用`for`循环执行此操作：

```
for (int i = 0; i < a.Length; i += 2) 
```

循环变量`i`表示当前子字符串的起始索引，这就是为什么它总是增加 2。我们可以使用以下方法转换每个子字符串`Int32.Parse`：

```
Convert.ToInt32(a.Substring(i, 2), 16); 
```

最后一个参数表示源字符串的基数（HEX = 基数 16）。

现在我们需要一个数组来存储结果。数组的大小可以通过字符串的长度除以每个子字符串的长度（= 2）来计算：

```
int[] b = new int[a.Length / 2]; 
```

要将它们组合在一起，您的代码可能如下所示：

```
string a = "8FCC44";
int[] b = new int[a.Length / 2];

for (int i = 0, int j = 0; i < a.Length; i += 2, j++)
    b[j] = Convert.ToInt32(a.Substring(i, 2), 16); 
```

希望这可以帮助！

# xml - Postgresql xmlelement查询

> ID：15520811
> 
> 赞同：1
> 
> 时间：2013-03-20T10:20:21.037
> 
> 标签：xml, postgresql

我有一个查询：

```
SELECT xmlelement(name Place, Tokyo) 
```

输出如下所示：

```
<place>Tokyo</place> 
```

如何将查询更改为具有如下输出：

```
<n1:place>Tokyo</n1:place> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:07:11.597

.xml 命名空间（尚）不支持`XMLELEMENT`。

您将不得不通过某种后处理来做到这一点，也许使用 XSLT。

# php - 使用 PHP 将视频上传到服务器

> ID：15520818
> 
> 赞同：1
> 
> 时间：2013-03-20T10:20:43.787
> 
> 标签：php, video

我有视频，我想将其上传到服务器，该代码与我用于上传音频文件的代码相同，但是当我上传视频文件时，它不会上传

```
 <?php
      $uploaddir = 'pro/';
      $file = basename($_FILES['userfile']['name']);
      $uploadfile = $uploaddir . $file;

      if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
      echo "OK";
     } 
     else {
     echo "ERROR";
     }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:28:14.500

如果你的文件很大，

两个 PHP 配置选项控制最大上传大小：`upload_max_filesize`和`post_max_size`. 对于 10 兆字节的文件大小，两者都可以设置为“10M”。

但是，您还需要考虑完成上传所需的时间。PHP 脚本通常会在 30 秒后超时，但在正常的宽带连接上上传一个 10MB 的文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的 max_input_time 和 max_execution_time 设置为 300（以秒为单位指定 5 分钟）

在 .htaccess 添加此代码，

```
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_input_time 300
php_value max_execution_time 300 
```

或者您可以使用 php 页面本身进行设置`ini_set`

```
ini_set('upload_max_filesize', '10M');
ini_set('post_max_size', '10M');
ini_set('max_input_time', 300);
ini_set('max_execution_time', 300); 
```

参考：[http ://www.sitepoint.com/upload-large-files-in-php/](http://www.sitepoint.com/upload-large-files-in-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:40:56.203

您还可以检查应指定文件大小的答案[stackoverflow.com/questions/14076929/php-image-upload-script 。](https://stackoverflow.com/questions/14076929/php-image-upload-script)它可能是默认文件大小问题。

```
 <?php
  $uploaddir = 'pro/';
      $max_filesize = 10485760;
     //you should specify the value you want to be maximum of video.

    if(filesize($_FILES['userfile']['tmp_name']) > $max_filesize)
   die('The file you attempted to upload is too large.');

     $file = basename($_FILES['userfile']['name']);
      $uploadfile = $uploaddir . $file;

      if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
      echo "OK";
     } 
     else {
     echo "ERROR";
     }
  ?> 
```

# iphone - 在 UICollectionView 上重置滚动

> ID：15520819
> 
> 赞同：55
> 
> 时间：2013-03-20T10:20:45.597
> 
> 标签：iphone, objective-c, ipad, ios6, uicollectionview

我有一个水平`UICollectionView`的工作正常和滚动。当我点击一个项目时，我会更新我的数据并调用`reloadData`. 这有效，新数据显示在`UICollectionView`. 问题是滚动位置没有改变，它仍在查看最后一个位置。我想将滚动重置到顶部（或者在我的情况下是左侧）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-03-20T10:25:20.200

你想要`setContentOffset:`。它需要一个 CGPoint 作为参数，您可以使用 CGPointMake 将其设置为您想要的任何内容，但是如果您希望返回到集合的最开始，您可以简单地使用 CGPointZero。

```
[collectionView setContentOffset:CGPointZero animated:YES]; 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-20T10:25:52.533

您可以使用此方法滚动到您想要的任何项目：

```
- (void)scrollToItemAtIndexPath:(NSIndexPath *)indexPath 
               atScrollPosition:(UICollectionViewScrollPosition)scrollPosition 
                       animated:(BOOL)animated 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-10-30T11:38:06.603

我经常在我的应用程序的不同部分使用它，所以我只是扩展了 UIScrollView 以便它可以用于任何滚动视图和滚动视图子类：

```
extension UIScrollView {        
    /// Sets content offset to the top.
    func resetScrollPositionToTop() {
        self.contentOffset = CGPoint(x: -contentInset.left, y: -contentInset.top)
    }
} 
```

所以每当我需要重置位置时：

```
self.collectionView.resetScrollPositionToTop() 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-09-01T07:56:24.687

在斯威夫特：

```
collectionView.setContentOffset(CGPointZero, animated: true) 
```

如果您离开包含集合视图的视图，请在第二个视图控制器中进行更改，并且需要在返回时更新集合视图：

```
@IBAction func unwindTo_CollectionViewVC(segue: UIStoryboardSegue) {
    //Automatic table reload upon unwind
    viewDidLoad()
    collectionView.reloadData()
    collectionView.setContentOffset(CGPointZero, animated: true)
} 
```

在我的情况下，展开非常好，因为 viewDidLoad 调用将更新 CoreData 上下文，reloadData 调用将确保 collectionView 更新以反映新的 CoreData 上下文，然后 contentOffset 将确保表设置回顶部。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-28T05:38:17.520

如果您查看控制器包含安全区域，代码：

```
collectionView.setContentOffset(CGPointZero, animated: true) 
```

不起作用，因此您可以使用通用扩展：

```
extension UIScrollView {
    func scrollToTop(_ animated: Bool) {
        var topContentOffset: CGPoint
        if #available(iOS 11.0, *) {
            topContentOffset = CGPoint(x: -safeAreaInsets.left, y: -safeAreaInsets.top)
        } else {
            topContentOffset = CGPoint(x: -contentInset.left, y: -contentInset.top)
        }
        setContentOffset(topContentOffset, animated: animated)
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-07-14T08:05:26.127

在我的例子中，CGPointZero 改变了集合视图的内容，因为你没有计算内容插图。这对我有用：

```
 CGPoint topOffest = CGPointMake(0,-self.collectionView.contentInset.top);
    [self.collectionView setContentOffset:topOffest animated:YES]; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-07-14T12:05:55.777

抱歉，在撰写本文时我无法发表评论，但我使用的是 UINavigationController 并且`CGPointZero`它本身并没有让我达到最高点，所以我不得不使用以下内容。

```
CGFloat compensateHeight = -(self.navigationController.navigationBar.bounds.size.height+[UIApplication sharedApplication].statusBarFrame.size.height);
[self.collectionView setContentOffset:CGPointMake(0, compensateHeight) animated:YES]; 
```

希望这对将来的人有所帮助。干杯!

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-15T08:15:30.627

为了处理`UINavigationController`一个透明的导航栏，我必须计算额外的顶部偏移量以完美匹配第一个元素的位置。

斯威夫特 1.1 代码：

```
 let topOffest = CGPointMake(0, -(self.collectionView?.contentInset.top ?? O))
     self.collectionView?.setContentOffset(topOffest, animated: true) 
```

干杯!

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-25T09:55:21.733

*   SWIFT 4.2 解决方案-假设我有一个 tableView，每个 tableViewCell 包含一个 Horizo​​ntalCollectionView 由于单元格的重用，即使第一个 tableViewCell 向下滚动到第 4 页，其他单元格也设置为第 4 页。

这适用于这种情况 - 在 tableView 中的 cellForRowAt 函数中，让 cell = //使用 deque cell.myCollectionView.contentOffset = CGPoint(x:0,y:0) 声明一个单元格

# c# - 从 XML 文件填充 ListView

> ID：15520820
> 
> 赞同：2
> 
> 时间：2013-03-20T10:20:46.923
> 
> 标签：c#, winforms, linq-to-xml

我有以下示例 XML 文件，我需要从中填充 ListView。我已经玩了几个小时，但我不知道最好的方法。我想使用 Linq 来实现这一点，但我的知识有些缺乏。这是一个 Winforms c# 项目。

```
<DMs>
  <dataModule>
    <DMC>11111</DMC>
    <techName>Test Techname 1</techName>
    <infoName>info 1</infoName>
    <status>complete</status>
    <notes>Note 1</notes>
  </dataModule>
  <dataModule>
    <DMC>22222</DMC>
    <techName>Test Techname 2</techName>
    <infoName>info 2</infoName>
    <status>in work</status>
    <notes>Note 2</notes>
  </dataModule>
  <dataModule>
    <DMC>33333</DMC>
    <techName>Test Techname 3</techName>
    <infoName>info 3</infoName>
    <status>QA required</status>
    <notes>Note 3</notes>
  </dataModule>
  </DMs> 
```

我有以下非常基本的代码，它成功地使用 DMC 元素文本填充列表视图的第一列，但我需要兄弟元素（技术名称、信息名称、状态和注释）来填充列表视图的其他列。

```
XDocument doc = XDocument.Load(CSDBpath + projectName + "\\Data.xml");
            var DMCs = from item in doc.Descendants("dataModule")
                       select item.Element("DMC").Value;

                foreach (var dmc in DMCs)
                {
                    ListViewItem item = new ListViewItem(dmc);
                    listView1.Items.Add(item);

                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:39:19.197

您需要向 中添加适当的列`ListView`，并为每个项目填充子项目：

```
// Add required columns
listView1.Columns.Add("DMC");
listView1.Columns.Add("Tech Name");
listView1.Columns.Add("Info Name");
listView1.Columns.Add("Status");
listView1.Columns.Add("Notes");

XDocument doc = XDocument.Load(CSDBpath + projectName + "\\Data.xml");

foreach (var dm in doc.Descendants("dataModule"))
{
    ListViewItem item = new ListViewItem( new string[]
    {
        dm.Element("DMC").Value,
        dm.Element("techName").Value,
        dm.Element("infoName").Value,
        dm.Element("status").Value,
        dm.Element("notes").Value
    });
    listView1.Items.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:41:57.783

```
 XDocument doc = XDocument.Load(CSDBpath + projectName + "\\Data.xml");
 var DMCs = from item in doc.Descendants("dataModule")
            select new {
                        dmc: item.Element("techName").Value, 
                        techName: item.Element("DMC").Value, 
                        infoName: item.Element("infoName").Value, 
                        status: item.Element("status").Value, 
                        notes: item.Element("notes").Value, 

                       };

 ListViewItem item = null;
 foreach (var dmc in DMCs)
 {
     item = new ListViewItem(dmc);
     listView1.Items.Add(item);
 } 
```

我希望这会奏效，但尚未测试..

# java - 用一条线连接 2 个或更多 JLabel

> ID：15520822
> 
> 赞同：0
> 
> 时间：2013-03-20T10:20:52.550
> 
> 标签：java

目前，我有一个 JLabel，我可以在绘图板（另一个面板）的任何位置单击并创建它的新实例，我希望将另一个 JLabel 作为连接器，我可以选择它来链接绘图板上的 JLabel 实例. 例如，连接器将在 2 个 JLabel 之间创建一条线，以模拟它们都已链接起来。我该怎么做呢？

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.border.EmptyBorder;
import javax.swing.border.TitledBorder;

public class SimulatorGUI extends JFrame {
    private JPanel contentPane;
    JPanel southPanel;
    JPanel centerPanel;
    JPanel eastPanel;
    JPanel westPanel;
    int clickCount = 0;
    ByteArrayOutputStream baos;
    ByteArrayInputStream bais;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    SimulatorGUI frame = new SimulatorGUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public SimulatorGUI() {
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
        setTitle("Network Simulator Prototype");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 800, 600);

        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenuItem mntmNew = new JMenuItem("New");
        mnFile.add(mntmNew);

        JMenuItem mntmOpen = new JMenuItem("Open");
        mnFile.add(mntmOpen);

        JMenuItem mntmSave = new JMenuItem("Save");
        mnFile.add(mntmSave);

        JMenuItem mntmSaveAs = new JMenuItem("Save As");
        mnFile.add(mntmSaveAs);

        JSeparator separator = new JSeparator();
        mnFile.add(separator);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mnFile.add(mntmExit);

        JMenu mnEdit = new JMenu("Edit");
        menuBar.add(mnEdit);

        JMenuItem mntmCopy = new JMenuItem("Copy");
        mnEdit.add(mntmCopy);

        JMenuItem mntmPaste = new JMenuItem("Paste");
        mnEdit.add(mntmPaste);

        JSeparator separator_1 = new JSeparator();
        mnEdit.add(separator_1);

        JMenuItem mntmNewMenuItem = new JMenuItem("Undo");
        mnEdit.add(mntmNewMenuItem);

        JMenuItem mntmRedo = new JMenuItem("Redo");
        mnEdit.add(mntmRedo);

        JMenu mnOptions = new JMenu("Options");
        menuBar.add(mnOptions);

        JMenu mnView = new JMenu("View");
        menuBar.add(mnView);

        JMenu mnTools = new JMenu("Tools");
        menuBar.add(mnTools);

        JMenu mnExtentions = new JMenu("Extentions");
        menuBar.add(mnExtentions);

        JMenu mnHelp = new JMenu("Help");
        menuBar.add(mnHelp);

        southPanel = new JPanel();
        JLabel lblNode = new JLabel("Node");
        southPanel.add(lblNode);
        JLabel lblWire = new JLabel("Wire");
        southPanel.add(lblWire);
        class MyMouseAdapter extends MouseAdapter {
            @Override
            public void mouseClicked(MouseEvent e) {
                clickCount = 1;
                try {
                    copy((JLabel) e.getSource());
                } catch (Exception ex) {
                }
            }
        }
        lblNode.addMouseListener(new MyMouseAdapter());
        southPanel.setBorder(BorderFactory.createTitledBorder("Nodes"));
        contentPane.add(southPanel, BorderLayout.SOUTH);

        centerPanel = new JPanel();
        centerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createRaisedBevelBorder(), "Work Space", TitledBorder.CENTER, TitledBorder.TOP));
        centerPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (clickCount == 1) {
                    try {
                        pasteLabel(e.getX(), e.getY());
                    } catch (Exception ex) {
                    }
                }
            }
        });
        contentPane.add(centerPanel, BorderLayout.CENTER);
        centerPanel.setLayout(null);

        eastPanel = new JPanel();
        contentPane.add(eastPanel, BorderLayout.EAST);
        eastPanel.setBorder(BorderFactory.createTitledBorder("Configuration"));
        JButton btnSetting = new JButton("Settings");
        btnSetting.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                GUI gui = new GUI();
            }
        });
        eastPanel.add(btnSetting);

        westPanel = new JPanel();
        contentPane.add(westPanel, BorderLayout.WEST);
        westPanel.setBorder(BorderFactory.createTitledBorder("Reset"));
        JButton btnClear = new JButton("Clear");
        btnClear.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                centerPanel.removeAll();
                centerPanel.validate();
                centerPanel.repaint();
            }
        });
        westPanel.add(btnClear);
    }

    public void copy(JLabel label) throws Exception {
        baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(label);
        oos.close();
    }

    public void pasteLabel(int x, int y) throws Exception {
        if (clickCount == 1) {
            bais = new ByteArrayInputStream(baos.toByteArray());
            ObjectInputStream ois = new ObjectInputStream(bais);
            JLabel obj = (JLabel) ois.readObject();
            MyMouseAdapter myMouseAdapter = new MyMouseAdapter();
            obj.addMouseListener(myMouseAdapter);
            obj.addMouseMotionListener(myMouseAdapter);
            centerPanel.add(obj);
            obj.setBounds(x, y, obj.getWidth(), obj.getHeight());
            clickCount = 0;
            ois.close();
        }
    }

    class MyMouseAdapter extends MouseAdapter {
        private Point initialLoc;
        private Point initialLocOnScreen;

        @Override
        public void mousePressed(MouseEvent e) {
            Component comp = (Component) e.getSource();
            initialLoc = comp.getLocation();
            initialLocOnScreen = e.getLocationOnScreen();
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            Component comp = (Component) e.getSource();
            Point locOnScreen = e.getLocationOnScreen();

            int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
            int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
            comp.setLocation(x, y);
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            Component comp = (Component) e.getSource();
            Point locOnScreen = e.getLocationOnScreen();

            int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
            int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
            comp.setLocation(x, y);
        }
    }
}

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.border.EmptyBorder;

public class GUI extends JFrame {
    private JPanel contentPane;
    JPanel centerPanel;
    JPanel southPanel;

    public GUI() {
        setVisible(true);
        setResizable(false);
        setTitle("Settings");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 280, 167);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        centerPanel = new JPanel(new BorderLayout(3, 3));
        contentPane.add(centerPanel, BorderLayout.CENTER);
        JComboBox comboBoxConnection = new JComboBox();
        comboBoxConnection.setModel(new DefaultComboBoxModel(new String[] { "Wired", "Wireless" }));
        JComboBox comboBoxTransmission = new JComboBox();
        comboBoxTransmission.setModel(new DefaultComboBoxModel(new String[] { "UDP", "TCP" }));
        JComboBox comboBoxOrdering = new JComboBox();
        comboBoxOrdering.setModel(new DefaultComboBoxModel(new String[] { "FIFO" }));
        JTextField selectTrafficAns = new JTextField();

        JPanel labels = new JPanel(new GridLayout(0, 1));
        JPanel controls = new JPanel(new GridLayout(0, 1));
        centerPanel.add(labels, BorderLayout.WEST);
        centerPanel.add(controls, BorderLayout.CENTER);

        labels.add(new JLabel("Connection Type:"));
        controls.add(comboBoxConnection);
        labels.add(new JLabel("Transmission Type:"));
        controls.add(comboBoxTransmission);
        labels.add(new JLabel("Ordering:"));
        controls.add(comboBoxOrdering);
        labels.add(new JLabel("Amount of Traffic:"));
        controls.add(selectTrafficAns);
        southPanel = new JPanel();
        contentPane.add(southPanel, BorderLayout.SOUTH);
        JButton btnOk = new JButton("Ok");
        btnOk.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                dispose();
            }
        });
        southPanel.add(btnOk);
        JButton btnCancel = new JButton("Cancel");
        btnCancel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                dispose();
            }
        });
        southPanel.add(btnCancel);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:44:31.740

在这里，我添加了一些类并对您的代码进行了一些修改。看看它。

![在此处输入图像描述](../Images/3e1045e6f604b4573651f74596d87cd3.png)

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import javax.swing.border.*;
import java.util.*;
class Pair
{
    JLabel label1 ;
    JLabel label2 ;
    private Pair(){}
    public Pair(JLabel label1, JLabel label2)
    {
        this.label1 = label1;
        this.label2 = label2;
    }
    @Override
    public String toString()
    {
        return "{"+label1.getLocation()+","+label2.getLocation()+"}";
    }
    public int howToDraw()
    {
        Point point1 = label1.getLocation();
        Point point2 = label2.getLocation();
        if (point1.x > point2.x)
        {
            return 1;
        }
        else if (point1.x < point2.x)
        {
            return 2;
        }
        else if (point1.y > point2.y)
        {
            return 3;
        }
        else if (point1.y < point2.y)
        {
            return 4;
        }
        else
            return 5;
    }
    public JLabel getLabel1()
    {
        return label1;
    }
    public JLabel getLabel2()
    {
        return label2;
    }
    @Override
    public boolean equals(Object obj)
    {
        if (obj == this)
        {
            return true;
        }
        if (obj instanceof Pair)
        {
            Pair temp = (Pair)obj;
            if ((temp.toString()).equalsIgnoreCase(this.toString()))
            {
                return true;
            }
        }
        return false;
    }
}
public class SimulatorGUI extends JFrame {
    private JPanel contentPane;
    JPanel southPanel;
    JPanel centerPanel;
    JPanel eastPanel;
    JPanel westPanel;
    int clickCount = 0;
    ArrayList<Pair> listOfPairs;//Added for storing pairs of nodes
    Map <String,Point> map;//Stores Jlabel added on center panel and its location.
    ByteArrayOutputStream baos;
    ByteArrayInputStream bais;
    int counter = 0;//To know the number of routers pasted on center panel
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    SimulatorGUI frame = new SimulatorGUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public SimulatorGUI() {
        contentPane = new JPanel();

        listOfPairs = new ArrayList<Pair>();
        map = new LinkedHashMap<String,Point>();

        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
        setTitle("Network Simulator Prototype");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 800, 600);

        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenuItem mntmNew = new JMenuItem("New");
        mnFile.add(mntmNew);

        JMenuItem mntmOpen = new JMenuItem("Open");
        mnFile.add(mntmOpen);

        JMenuItem mntmSave = new JMenuItem("Save");
        mnFile.add(mntmSave);

        JMenuItem mntmSaveAs = new JMenuItem("Save As");
        mnFile.add(mntmSaveAs);

        JSeparator separator = new JSeparator();
        mnFile.add(separator);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mnFile.add(mntmExit);

        JMenu mnEdit = new JMenu("Edit");
        menuBar.add(mnEdit);

        JMenuItem mntmCopy = new JMenuItem("Copy");
        mnEdit.add(mntmCopy);

        JMenuItem mntmPaste = new JMenuItem("Paste");
        mnEdit.add(mntmPaste);

        JSeparator separator_1 = new JSeparator();
        mnEdit.add(separator_1);

        JMenuItem mntmNewMenuItem = new JMenuItem("Undo");
        mnEdit.add(mntmNewMenuItem);

        JMenuItem mntmRedo = new JMenuItem("Redo");
        mnEdit.add(mntmRedo);

        JMenu mnOptions = new JMenu("Options");
        menuBar.add(mnOptions);

        JMenu mnView = new JMenu("View");
        menuBar.add(mnView);

        JMenu mnTools = new JMenu("Tools");
        menuBar.add(mnTools);

        JMenu mnExtentions = new JMenu("Extentions");
        menuBar.add(mnExtentions);

        JMenu mnHelp = new JMenu("Help");
        menuBar.add(mnHelp);

        southPanel = new JPanel();
        JLabel lblNode = new JLabel("Router Label");
        lblNode.setBorder(BorderFactory.createLineBorder(Color.black,1));
        southPanel.add(lblNode);
        JLabel lblWire = new JLabel("Wire.png");//You don't need this now. 
        southPanel.add(lblWire);
        class MyMouseAdapter extends MouseAdapter {
            @Override
            public void mouseClicked(MouseEvent e) {
                clickCount = 1;
                try {
                    copy((JLabel) e.getSource());
                } catch (Exception ex) {
                }
            }
        }
        lblNode.addMouseListener(new MyMouseAdapter());
        southPanel.setBorder(BorderFactory.createTitledBorder("Nodes"));
        contentPane.add(southPanel, BorderLayout.SOUTH);

        //centerPanel = new JPanel();
        centerPanel = new MyJPanel();
        centerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createRaisedBevelBorder(), "Work Space", TitledBorder.CENTER, TitledBorder.TOP));
        centerPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (clickCount == 1) {
                    try {
                        pasteLabel(e.getX(), e.getY());
                    } catch (Exception ex) {
                    }
                }
            }
        });
        contentPane.add(centerPanel, BorderLayout.CENTER);
        centerPanel.setLayout(null);

        eastPanel = new JPanel();
        contentPane.add(eastPanel, BorderLayout.EAST);
        eastPanel.setBorder(BorderFactory.createTitledBorder("Configuration"));
        JButton btnSetting = new JButton("Settings");
        btnSetting.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                GUI gui = new GUI();
            }
        });
        eastPanel.add(btnSetting);

        westPanel = new JPanel();
        contentPane.add(westPanel, BorderLayout.WEST);
        westPanel.setBorder(BorderFactory.createTitledBorder("Reset"));
        JButton btnClear = new JButton("Clear");
        btnClear.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                centerPanel.removeAll();
                centerPanel.validate();
                centerPanel.repaint();
                listOfPairs.clear();map.clear();
                counter = 0;
            }
        });
        westPanel.add(btnClear);
        JButton button  = new JButton("DrawString");
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent evt)
            {
                String[] nodes = showGUIForNodeSelection();
                if (nodes == null || nodes[0]==null || nodes.length == 0 )
                {}
                else if (!nodes[0].equals(nodes[1]))
                {
                    String split[] = nodes[0].split(",");
                    Point p1 = new Point(Integer.valueOf(split[0]),Integer.valueOf(split[1]));
                    split = nodes[1].split(",");
                    Point p2 = new Point(Integer.valueOf(split[0]),Integer.valueOf(split[1]));
                    JLabel label1 = (JLabel)centerPanel.getComponentAt(p1);
                    JLabel label2 = (JLabel)centerPanel.getComponentAt(p2);
                    Pair pair = new Pair(label1,label2);
                    listOfPairs.add(pair);
                    centerPanel.repaint();
                }
                else
                {
                    JOptionPane.showMessageDialog(SimulatorGUI.this,"Nodes can't be same","Error",JOptionPane.ERROR_MESSAGE);
                }
            }
        });
        westPanel.add(button);
    }
    private String[] showGUIForNodeSelection() 
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(map.size(),2));
        ButtonGroup group1 = new ButtonGroup();
        ButtonGroup group2 = new ButtonGroup();
        final String nodes[] = new String[2];
        Set<String> keySet = map.keySet();
        for (String name : keySet)
        {
            JRadioButton rButton = new JRadioButton(name);
            rButton.setActionCommand(map.get(name).x+","+map.get(name).y);
            rButton.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent evt)
                {
                    nodes[0] = ((JRadioButton)evt.getSource()).getActionCommand();
                }
            });
            group1.add(rButton);
            panel.add(rButton);
            JRadioButton rButton1 = new JRadioButton(name);
            rButton1.setActionCommand(map.get(name).x+","+map.get(name).y);
            rButton1.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent evt)
                {
                    nodes[1] = ((JRadioButton)evt.getSource()).getActionCommand();
                }
            });
            group2.add(rButton1);
            panel.add(rButton1);
        }
        JOptionPane.showMessageDialog(SimulatorGUI.this,panel,"Choose the nodes pair",JOptionPane.INFORMATION_MESSAGE);
        return nodes;
    }
    private class MyJPanel extends JPanel//Creater your own JPanel and override paintComponentMethod.
    {
        @Override
        public void paintComponent(Graphics g)
        {
            super.paintComponent(g);
            for (Pair pair : listOfPairs )
            {
                JLabel label1 = pair.getLabel1();
                JLabel label2 = pair.getLabel2();
                Point point1 = label1.getLocation();
                Point point2 = label2.getLocation();
                int i = pair.howToDraw();
                if ( i == 1)
                {
                    g.drawLine(point1.x  , point1.y + label1.getHeight() / 2 , point2.x + label2.getWidth() , point2.y  +  label2.getHeight() / 2);
                }
                else if (i == 2)
                {
                    g.drawLine(point2.x , point2.y + label2.getHeight() / 2 , point1.x + label1.getWidth() , point1.y  +  label1.getHeight() / 2);
                }
                else if (i == 3)
                {
                    g.drawLine(point1.x + label1.getWidth() / 2 , point1.y , point2.x + label2.getWidth() / 2, point2.y + label2.getHeight());
                }
                else if (i == 4)
                {
                    g.drawLine(point2.x + label2.getWidth() / 2 , point2.y , point1.x + label1.getWidth() / 2, point1.y + label1.getHeight());
                }
            }
        }
    }
    public void copy(JLabel label) throws Exception {
        baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(label);
        oos.close();
    }

    public void pasteLabel(int x, int y) throws Exception {
        if (clickCount == 1) {
            bais = new ByteArrayInputStream(baos.toByteArray());
            ObjectInputStream ois = new ObjectInputStream(bais);
            JLabel obj = (JLabel) ois.readObject();
            MyMouseAdapter myMouseAdapter = new MyMouseAdapter();
            obj.addMouseListener(myMouseAdapter);
            obj.addMouseMotionListener(myMouseAdapter);
            centerPanel.add(obj);
            obj.setText("Router"+counter);
            //obj.setBounds(x, y, obj.getWidth(), obj.getHeight());
            obj.setLocation(x,y);
            clickCount = 0;
            ois.close();
            map.put("Router"+counter , obj.getLocation());
            counter++;
        }
    }

    class MyMouseAdapter extends MouseAdapter {
        private Point initialLoc;
        private Point initialLocOnScreen;

        @Override
        public void mousePressed(MouseEvent e) {
            Component comp = (Component) e.getSource();
            initialLoc = comp.getLocation();
            initialLocOnScreen = e.getLocationOnScreen();
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            Component comp = (Component) e.getSource();
            Point locOnScreen = e.getLocationOnScreen();

            int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
            int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
            comp.setLocation(x, y);
            map.put(((JLabel)comp).getText(),new Point(x,y));
            centerPanel.repaint();
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            Component comp = (Component) e.getSource();
            Point locOnScreen = e.getLocationOnScreen();

            int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
            int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
            comp.setLocation(x, y);
            map.put(((JLabel)comp).getText(),new Point(x,y));
            centerPanel.repaint();
        }
    }
}

class GUI extends JFrame {
    private JPanel contentPane;
    JPanel centerPanel;
    JPanel southPanel;

    public GUI() {
        setVisible(true);
        setResizable(false);
        setTitle("Settings");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 280, 167);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        centerPanel = new JPanel(new BorderLayout(3, 3));
        contentPane.add(centerPanel, BorderLayout.CENTER);
        JComboBox comboBoxConnection = new JComboBox();
        comboBoxConnection.setModel(new DefaultComboBoxModel(new String[] { "Wired", "Wireless" }));
        JComboBox comboBoxTransmission = new JComboBox();
        comboBoxTransmission.setModel(new DefaultComboBoxModel(new String[] { "UDP", "TCP" }));
        JComboBox comboBoxOrdering = new JComboBox();
        comboBoxOrdering.setModel(new DefaultComboBoxModel(new String[] { "FIFO" }));
        JTextField selectTrafficAns = new JTextField();

        JPanel labels = new JPanel(new GridLayout(0, 1));
        JPanel controls = new JPanel(new GridLayout(0, 1));
        centerPanel.add(labels, BorderLayout.WEST);
        centerPanel.add(controls, BorderLayout.CENTER);

        labels.add(new JLabel("Connection Type:"));
        controls.add(comboBoxConnection);
        labels.add(new JLabel("Transmission Type:"));
        controls.add(comboBoxTransmission);
        labels.add(new JLabel("Ordering:"));
        controls.add(comboBoxOrdering);
        labels.add(new JLabel("Amount of Traffic:"));
        controls.add(selectTrafficAns);
        southPanel = new JPanel();
        contentPane.add(southPanel, BorderLayout.SOUTH);
        JButton btnOk = new JButton("Ok");
        btnOk.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                dispose();
            }
        });
        southPanel.add(btnOk);
        JButton btnCancel = new JButton("Cancel");
        btnCancel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                dispose();
            }
        });
        southPanel.add(btnCancel);
    }
} 
```

# uml - UML 的使用是否可以显示参与者可以做的所有事情（功能）或参与者想要做的所有事情（目标）？

> ID：15520832
> 
> 赞同：0
> 
> 时间：2013-03-20T10:21:13.627
> 
> 标签：uml, use-case, requirements

假设我们有一个简单的在线商店。用户希望通过商店实现的目标是：

1.  注册（创建帐户）
2.  浏览项目
3.  将商品添加到购物篮
4.  结帐并付款
5.  查看账户信息
6.  修改账户信息等

但是，用户可以启动某些功能，但不是他们使用系统的主要目标：

1.  登录
2.  登出
3.  选择“电子”部门
4.  选择“车辆”部门
5.  输入送货详情等

我认为登录和注销之类的东西不应该出现在 UML 用例图中。原因是用户不想仅仅为了登录而去在线商店；他们总是有另一个目标，即查看/编辑帐户信息或浏览和购买东西。

同样，两个选择“语句”是浏览项用例的一部分。我不会使用泛化，因为可能有很多部门。

最后，输入交付详细信息是“结帐”或“编辑帐户信息”用例的一部分。我通常会将其与“编辑帐户信息”用例混为一谈，否则您可能还会有“编辑名称”、“编辑电子邮件”等用例。

我主要担心的是，如果你有一个非常复杂的用例图，它就会违背拥有一个的目的，因为它不容易阅读。

所以，我的问题如下。我这背后的想法正确吗？最好只在用例图中建模“真实”目标或参与者可以启动的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:56:18.077

> UML 的使用是否可以显示参与者可以做的所有事情（功能）或参与者想要做的所有事情（目标）？

它可以是任何一种——UML 规范在这方面没有规定。Alistair Cockburn[为用例创建了一个分类](https://en.wikipedia.org/wiki/Use_case)，表明他们关注的级别。

话说回来：

> 我主要担心的是，如果你有一个非常复杂的用例图，它就会违背拥有一个的目的，因为它不容易阅读。

这是一个非常现实的风险。就我个人而言，我发现通过关注用户和他们的目标，我从 UC 中获益最多。他们希望从系统中获得什么价值？

将其保持在该级别可以防止“只见树木不见森林”的情况 - 并且还会阻止 UC 成为完整的功能分解设计。

hth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:59:22.870

从图表中排除一些用例并没有错，而且确实可能​​是个好主意。例如，如果您要向业务部门展示您的图表，您可以绘制一个描述操作用例的 UML 模型。如果你要将你的图表交给程序员，你会想要给他们一个关于他们必须实现什么的完整描述。这些只是您系统的*模型*。

绘制用例图时，通常还会写下每个用例的行为（如自由文本描述、伪代码或使用交互图）。

UML 规范说：

> 用例是系统执行的一组操作的规范，它产生一个可观察的结果，通常对系统的一个或多个参与者或其他利益相关者有价值。

*用户可以观察到*登录*和*注销。*虽然用户不会以登录的唯一目的访问您的站点，但这样的用例肯定有一些您也想描述的执行流程。如果您不允许用户自己发起登录，则会出现**包含***login*功能的用例。用户也可能有兴趣在离开站点之前注销，以便没有会话数据将保留在他的计算机中。*

 **选择“电子”部门*，*选择“车辆”部门*......为什么不只是*选择部门*（我想他们并没有太大的不同）。

我会画出这个和其他用例，只要它们与模型相关。*

# javascript - 通过 .splice() 删除最后一个数组，如 [["1"]]，为什么 output = [[]] 而不是 []？

> ID：15520836
> 
> 赞同：0
> 
> 时间：2013-03-20T10:21:20.613
> 
> 标签：javascript, jquery, arrays

```
var arr=[["1"]];
arr[0].splice(0,1);
// arr = [[]] 
```

为什么我不能将最后一个数组删除为空白？

删除并且子数组（数组中的数组）为空白时我`arr = []`不需要`[[]]`

**演示：http:** [//jsbin.com/ehacof/1/edit](http://jsbin.com/ehacof/1/edit)

* * *

**编辑：**我只是一一删除就好了

```
var arr=[["1","2"],["1","2"]];
arr[0].splice(0,1);
arr[0].splice(0,1);
// arr = [[],["1","2"]]; 
```

我需要`arr = [["1","2"]];`

演示：http: [//jsbin.com/ehacof/9/edit](http://jsbin.com/ehacof/9/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:25:57.300

`"1"`您正在拼接从内部数组中删除的数组上的第一个元素`arr[0]`。此代码应删除第一个数组，而不是第一个数组的第一个元素。

```
arr.splice(0, 1); 
```

**编辑：**如果你想删除那个内部数组，如果它是空的，那么你需要像这样检查它。

```
arr[0].splice(0, 1);
if (arr[0].length === 0)
    arr.splice(0, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:24:34.710

您删除了`"1"`from ，`arr[0]`所以`arr[0]`现在包含一个空数组 : 。如果要删除数组本身， splice ，而不是`[]``arr``[[]]``arr``arr[0]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:27:20.253

```
var arr=[["1"]];
arr[0].splice(0,1);
if (arr[0].length === 0) {
    arr.splice(0,1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T10:30:54.523

1.  `Array.splice`删除一些元素并返回它们。您的数组数组仍将保留数组数组。

2.  将`JSON.stringify`一个空数组： 转换`[]`为`"[]"`，因此一个空数组数组：`[[]]`变为`"[[]]"`。

我在您的 jsbin 代码中添加了更多示例来说明您的代码实际执行的操作。

```
var arr=[["1"]];
var elem = arr[0].splice(0,1);

$("body").append(JSON.stringify(arr));
$("body").append(JSON.stringify(elem));
$("body").append(JSON.stringify([[]])); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T11:01:36.523

你不能只使用拼接来完成这项工作，我可以提出这个建议：

```
 Array.prototype.removeOne = function(i, j) {
      if(this[i] == undefined) return this;
      this[i].splice(j,1);
      if (this[i].length == 0) this.splice(i,1);
      return this;
  }; 
```

然后使用`arr.removeOne(0,0)`

第一个参数是主数组索引，第二个参数是要删除的子数组元素的索引。

**编辑**：还有另一种方法：

```
var arr=[["1"],["2"]];
arr[0].splice(0,1);
arr=arr.filter(function(ar){return ar.length}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T10:30:22.917

在你的演示中试试这个....

```
var arr=[["1"]];
arr.splice($.inArray(arr[0],arr)); 
```

# c++ - 以类型结尾的可变参数模板

> ID：15520839
> 
> 赞同：2
> 
> 时间：2013-03-20T10:21:30.167
> 
> 标签：c++, variadic-templates

我正在尝试编写一个可变参数函数，该函数将专注于提供的最后一个参数。

```
 // we take em all as long as they are convertible to string
    template<typename... Args>
    void warn(Args... args, string s){
        vector<string> joinable{args..., s};
        SMDiagnostic w(TUName, SourceMgr::DK_Warning,
                util::join(joinable));
        w.print("CGD.so", errs());
    }

    template<typename... Args>
    void warn(Args... args, Value const * v){
        string buffer;
        raw_string_ostream os(buffer);
        v->print(os);
        warn(args..., os.str());
    }

    template<typename... Args>
    void warn(Args... args, CallInst const * ci){
        warn(args..., dyn_cast<Value>(ci));
    } 
```

我试着打电话给他们

```
warn(me, someCallInst); 
```

但是clang给了我一个奇怪的错误

```
error: no matching member function for call to 'warn'
       warn("We found a function usage that is not a call!! Ignoring\n", inst);
       ^~~~
../llvm_opt_pass/cgd.cpp:1062:8: note: candidate function not viable: requires 1 argument, but 2 were provided
                void warn(Args... args, CallInst const * ci){
                     ^
../llvm_opt_pass/cgd.cpp:1054:8: note: candidate function not viable: requires 1 argument, but 2 were provided
                void warn(Args... args, Value const * v){
                     ^
../llvm_opt_pass/cgd.cpp:1046:8: note: candidate function not viable: requires 1 argument, but 2 were provided
                void warn(Args... args, string s){ 
```

我必须做什么才能使用这样的可变参数模板？

# haskell - 需要一些关于 Distribution.TestSuite 的解释

> ID：15520840
> 
> 赞同：6
> 
> 时间：2013-03-20T10:21:33.880
> 
> 标签：haskell, cabal, test-suite

我正在寻找一些描述如何使用`Distribution.TestSuite`. 当前的黑线鳕文档很差，用户指南也很差。我想为一个项目编写测试并通过 cabal 运行它们。我不想要`exitcode-stdio-1.0`测试界面。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:10:11.453

据我所知，您正在尝试使用该`detailed-1.0`界面，但这还没有真正准备好使用。2011 年末有一个关于此的问题，但遗憾的是我认为事情没有改变 - [Cabal Test Suite with type detail example](https://stackoverflow.com/questions/8266938/cabal-test-suite-with-type-detailed-example)。

你有什么不想使用的理由`exitcode-stdio`吗？

# c++ - 使用 std::list 放置新

> ID：15520846
> 
> 赞同：4
> 
> 时间：2013-03-20T10:21:44.433
> 
> 标签：c++, list, memory-management, c++11, placement-new

我正在寻求实现一个（双重）链表，**它只在**内部调用`placement new`，将所有内存定向到分配有类似以下内容的池：

```
char *memPool = new char[4096]; // One-off normal 'new' 
```

最初我打算实现我自己的类，它需要一个指向（管理一个）预分配内存池的指针。但是，我想首先确定我无法使用`std::list`. 特别是，[大卫罗德里格斯对这个 SO 问题的回答的第三部分让](https://stackoverflow.com/questions/5304048/stl-containers-allocation-placement-new)我感到担忧。

`std::list`必须在其组件节点上调用`new`and是有道理`delete`的，但我想修改此行为，以便将所有节点分配`placement new`到我的自定义池中。因此我的问题是：

有没有办法指定一个`placement new` `std::list`如：

```
std::list<std::shared_ptr<Cls>> myList = new (pool.getFreeAddr()) list<Cls>; 
```

还应该使用自定义分配器分配其节点，以便**所有内容**都严格存储在我自己的内存池中？

（*注意*：我知道`shared_ptrs`如果我也想在自定义内存池中使用自定义分配/删除函数。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:40:07.543

你必须：

*   `MyAllocator`编写满足要求的类模板`Allocator`（标准中的[allocator.requirements]）。
*   使用 a`std::list<T, MyAllocator<T> >`代替 a `std::list<T>`。

如果您需要明确的列表类型`std::list<T>`（例如，因为您想调用接受 a`std::list<T> &`并且您无法更改其接口的函数），那么您就不走运了，因为分配器类型是容器类型的一部分.

小心分配器的要求，它们很奇怪。特别是你需要`rebind`一个`list`，这有点棘手。

Furthermore, in C++03 there's no guarantee that allocator *instances* are respected, only the allocator *type*, which in effect means that the pointer to the pool you're allocating from needs to be stored with static duration rather than as an instance variable. I think that was changed in C++11, but I might be wrong. It only really matters if you want to use multiple different pools in your program.

# sql-server - 适用于 Windows XP 的 SQL Server 2012 管理工作室

> ID：15520853
> 
> 赞同：1
> 
> 时间：2013-03-20T10:22:00.860
> 
> 标签：sql-server, windows-xp, ssms

我已经搜索过它并尝试在我的 Windows XP 上安装 2012 版本（出现错误，我必须升级到 min.Win Vista）但是仍然有黑客或类似的东西来安装它吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:32:45.003

你不能。阅读最低要求。 [最低要求](http://msdn.microsoft.com/en-IN/library/ms143506.aspx)

但是您可以创建一个虚拟机“win7”并在其上运行 SSMS。

# jquery - 如何使用修复标题、滚动和列 Resizalble 制作表格

> ID：15520858
> 
> 赞同：2
> 
> 时间：2013-03-20T10:22:13.640
> 
> 标签：jquery, html, css

[仅在 IE 中演示作品](http://jsfiddle.net/9qkp8/65/)

```
$(function ()
  {
      resolutionIndependentScroll(); 
      $("#tableList").colResizable({
            liveDrag: true,
            gripInnerHtml: "<div class='grip'></div>",
            draggingClass: "dragging"
      });
  }); 
```

我必须修复滚动和 colResizalble 表的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:18:19.587

@Means：您的要求是三件事：固定标题、可调整大小的列和滚动。
此外，您还可以切换列顺序、隐藏/显示列。
这个例子将满足所有这些。
我们将您的示例与 Flexigrid 结合使用。
由于某些原因，指向 jsFiddle 的链接无法正常工作。所以，请在本地测试它。
您将需要下载：

1.  [flexigrid-1.1 包](http://code.google.com/p/flexigrid/downloads/detail?name=flexigrid-1.1.zip)
2.  [jquery-1.5.2.min.js](http://code.jquery.com/jquery-1.5.2.min.js)

并将它们提取到`css`和`js`文件夹中以在本地使用它们，如下所示：
**flexigrid.html**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>  
    <link rel="stylesheet" type="text/css" href="css/flexigrid.pack.css" />
    <script type="text/javascript" src="js/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="js/flexigrid.pack.js"></script>
    <script> 
        $(document).ready(function() {  $('.tableList').flexigrid();});
    </script>
</head>
<body>
    <table class="tableList" border="1">
        <thead>
            <tr>
                <th width="100" bgcolor="yellow">col1</th>
                <th width="100" bgcolor="yellow">col2</th>
                <th width="100" bgcolor="yellow">col3</th>
                <th width="100" bgcolor="yellow">col4</th>
                <th width="100" bgcolor="yellow">col5</th>
                <th width="100" bgcolor="yellow">col6</th>
                <th width="100" bgcolor="yellow">col7</th>
                <th width="100" bgcolor="yellow">col8</th>
                <th width="100" bgcolor="yellow">col9</th>
                <th width="100" bgcolor="yellow">col10</th>
                <th width="100" bgcolor="yellow">col11</th>
                <th width="100" bgcolor="yellow">col12</th>
                <th width="100" bgcolor="yellow">col13</th>
                <th width="100" bgcolor="yellow">col14</th>
                <th width="100" bgcolor="yellow">col15</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
            <tr>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
                <td>value</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

我希望它会有所帮助。欢迎任何意见。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:18:43.887

对于最低要求，您可以使用[**DataTable.js**](http://www.datatables.net/index)

请根据您的要求[**在这里**](http://jsfiddle.net/W5zuy/)找到自定义现场演示。

**HTML**

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
        </tr>
    </thead>
    <tbody>
        <tr class="odd gradeX">
            <td>Trident</td>
            <td>Internet
                 Explorer 4.0</td>
            <td>Win 95+</td>
            <td class="center">4</td>
            <td class="center">X</td>
        </tr>
        <tr class="odd gradeC">
            <td>Trident</td>
            <td>Internet
                 Explorer 5.0</td>
            <td>Win 95+</td>
            <td class="center">5</td>
            <td class="center">C</td>
        </tr>
        <tr class="odd gradeA">
            <td>Trident</td>
            <td>Internet
                 Explorer 5.5</td>
            <td>Win 95+</td>
            <td class="center">5.5</td>
            <td class="center">A</td>
        </tr>
        <tr class="odd gradeA">
            <td>Trident</td>
            <td>Internet
                 Explorer 6</td>
            <td>Win 98+</td>
            <td class="center">6</td>
            <td class="center">A</td>
        </tr>
        <tr class="odd gradeA">
            <td>Trident</td>
            <td>Internet Explorer 7</td>
            <td>Win XP SP2+</td>
            <td class="center">7</td>
            <td class="center">A</td>
        </tr>
        <tr class="odd gradeA">
            <td>Trident</td>
            <td>AOL browser (AOL desktop)</td>
            <td>Win XP</td>
            <td class="center">6</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Firefox 1.0</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Firefox 1.5</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Firefox 2.0</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Firefox 3.0</td>
            <td>Win 2k+ / OSX.3+</td>
            <td class="center">1.9</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Camino 1.0</td>
            <td>OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Camino 1.5</td>
            <td>OSX.3+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Netscape 7.2</td>
            <td>Win 95+ / Mac OS 8.6-9.2</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Netscape Browser 8</td>
            <td>Win 98SE+</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Netscape Navigator 9</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.0</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.1</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.1</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.2</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.2</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.3</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.3</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.4</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.4</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.5</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.5</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.6</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">1.6</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.7</td>
            <td>Win 98+ / OSX.1+</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Mozilla 1.8</td>
            <td>Win 98+ / OSX.1+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Seamonkey 1.1</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Gecko</td>
            <td>Epiphany 2.20</td>
            <td>Gnome</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>Safari 1.2</td>
            <td>OSX.3</td>
            <td class="center">125.5</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>Safari 1.3</td>
            <td>OSX.3</td>
            <td class="center">312.8</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>Safari 2.0</td>
            <td>OSX.4+</td>
            <td class="center">419.3</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>Safari 3.0</td>
            <td>OSX.4+</td>
            <td class="center">522.1</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>OmniWeb 5.5</td>
            <td>OSX.4+</td>
            <td class="center">420</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>iPod Touch / iPhone</td>
            <td>iPod</td>
            <td class="center">420.1</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Webkit</td>
            <td>S60</td>
            <td>S60</td>
            <td class="center">413</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 7.0</td>
            <td>Win 95+ / OSX.1+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 7.5</td>
            <td>Win 95+ / OSX.2+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 8.0</td>
            <td>Win 95+ / OSX.2+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 8.5</td>
            <td>Win 95+ / OSX.2+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 9.0</td>
            <td>Win 95+ / OSX.3+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 9.2</td>
            <td>Win 88+ / OSX.3+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera 9.5</td>
            <td>Win 88+ / OSX.3+</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Opera for Wii</td>
            <td>Wii</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Nokia N800</td>
            <td>N800</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>Presto</td>
            <td>Nintendo DS browser</td>
            <td>Nintendo DS</td>
            <td class="center">8.5</td>
            <td class="center">C/A<sup>1</sup></td>
        </tr>
        <tr class="gradeC">
            <td>KHTML</td>
            <td>Konqureror 3.1</td>
            <td>KDE 3.1</td>
            <td class="center">3.1</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeA">
            <td>KHTML</td>
            <td>Konqureror 3.3</td>
            <td>KDE 3.3</td>
            <td class="center">3.3</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeA">
            <td>KHTML</td>
            <td>Konqureror 3.5</td>
            <td>KDE 3.5</td>
            <td class="center">3.5</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeX">
            <td>Tasman</td>
            <td>Internet Explorer 4.5</td>
            <td>Mac OS 8-9</td>
            <td class="center">-</td>
            <td class="center">X</td>
        </tr>
        <tr class="gradeC">
            <td>Tasman</td>
            <td>Internet Explorer 5.1</td>
            <td>Mac OS 7.6-9</td>
            <td class="center">1</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeC">
            <td>Tasman</td>
            <td>Internet Explorer 5.2</td>
            <td>Mac OS 8-X</td>
            <td class="center">1</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeA">
            <td>Misc</td>
            <td>NetFront 3.1</td>
            <td>Embedded devices</td>
            <td class="center">-</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeA">
            <td>Misc</td>
            <td>NetFront 3.4</td>
            <td>Embedded devices</td>
            <td class="center">-</td>
            <td class="center">A</td>
        </tr>
        <tr class="gradeX">
            <td>Misc</td>
            <td>Dillo 0.8</td>
            <td>Embedded devices</td>
            <td class="center">-</td>
            <td class="center">X</td>
        </tr>
        <tr class="gradeX">
            <td>Misc</td>
            <td>Links</td>
            <td>Text only</td>
            <td class="center">-</td>
            <td class="center">X</td>
        </tr>
        <tr class="gradeX">
            <td>Misc</td>
            <td>Lynx</td>
            <td>Text only</td>
            <td class="center">-</td>
            <td class="center">X</td>
        </tr>
        <tr class="gradeC">
            <td>Misc</td>
            <td>IE Mobile</td>
            <td>Windows Mobile 6</td>
            <td class="center">-</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeC">
            <td>Misc</td>
            <td>PSP browser</td>
            <td>PSP</td>
            <td class="center">-</td>
            <td class="center">C</td>
        </tr>
        <tr class="gradeU">
            <td>Other browsers</td>
            <td>All others</td>
            <td>-</td>
            <td class="center">-</td>
            <td class="center">U</td>
        </tr>
    </tbody>
</table> 
```

**JavaScript**

```
$(document).ready( function() {
    $('#example').dataTable( {
        "sDom": "Rlfrtip",
        "sScrollY": "200px",
        "bPaginate": false
    });
}); 
```

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

对于更复杂的 Grid 功能，您可以使用这个简单的[**jqGrid**](http://www.trirand.com/blog/)。

jqGrid 的自定义演示在[**这里**](http://jsfiddle.net/Hcuj3/2/)。

**HTML**

```
<table id="grid"></table> 
```

**JavaScript**

```
var data = [[1, "Arcenal", "Barca"], 
            [2, "ManU", "Chelcea"],  
            [3, "RM", "Chelcea"],  
            [4, "ManU", "Arcenal"],  
            [5, "ManCity", "Chelcea"],  
            [6, "ManU", "ManCity"],  
            [7, "ManCity", "LiverPool"],  
            [8, "LiverPool", "Barca"], 
            [9, "RM", "Barca"],
            [10, "Chelcea", "LiverPool"]];

$("#grid").jqGrid({
    datatype: "local",
    height: 100,
    colNames: ['Match_no', 'Team1', 'Team2'],
    colModel: [{
        name: 'Match_no',
        index: 'Match_no',
        width: 60,
        sorttype: "int"},
    {
        name: 'Team1',
        index: 'Team1',
        width: 90,
        sorttype: "string"},
    {
        name: 'Team2',
        index: 'Team2',
        width: 90,
        sorttype: "string"}
    ],
    caption: "jqGrid sample demo",
});

var names = ["Match_no", "Team1", "Team2"];
var mydata = [];

for (var i = 0; i < data.length; i++) {
    mydata[i] = {};
    for (var j = 0; j < data[i].length; j++) {
        mydata[i][names[j]] = data[i][j];
    }
}

for (var i = 0; i <= mydata.length; i++) {
    $("#grid").jqGrid('addRowData', i + 1, mydata[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T14:02:38.247

那里有很多插件.. 但我的选择是[jQgrid](http://www.trirand.com/blog/)。

它是一个具有许多功能和选项的插件。它们还支持固定标题、固定列以及列大小调整 >> [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html) << 尝试高级 -> 调整大小。

它是最新的插件之一，所以试试看，让我们知道。

# java - JPA 我在哪里可以找到一些基本的解释

> ID：15520859
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:22:14.863
> 
> 标签：java, jakarta-ee, jpa

您可以在许多资源中找到信息。他们中的大多数只强调了一些方面。如果您想查看整体信息，您应该阅读一本书。

这个问题的目的是为您提供一些轻量级的文章，但它涵盖了您需要开始的所有基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:22:14.863

理解 JPA，第 1 部分：数据持久性的面向对象范例

[http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa1.html](http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa1.html)

理解 JPA，第 2 部分：JPA 方式的关系

[http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa2.html](http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa2.html)

# c# - 存储在模型上的结果集 - C# .NET 2.0

> ID：15520862
> 
> 赞同：4
> 
> 时间：2013-03-20T10:22:28.700
> 
> 标签：c#, model, resultset

我有一个函数可以获取数据库中的数据。下面是代码。

```
 public DataTable getAllTransaction(OleDbConnection conn)
        {
            OleDbDataAdapter oleAdapter = new OleDbDataAdapter();
            string query = "";
            DataTable tblResult = new DataTable();

            query = @"SELECT t.id AS `Transaction ID`,
                                  c.id AS `Client ID`,
                                  c.clientname AS `Client Name`,
                                  t.cashvalue AS `Cash Value`,
                                  t.amount AS `Amount`,
                                  t.transdate AS `Transaction Date`,
                                  t.remarks AS `Remarks`
                             FROM client AS c 
                            INNER JOIN `transaction` AS t 
                               ON c.id=t.clientid";
            oleAdapter.SelectCommand = new OleDbCommand(query, conn);
            oleAdapter.Fill(tblResult);

            return tblResult;
        } 
```

我的问题是，如何将结果集存储到模型中（例如，我不想返回 DataTable）。下面是我的模型类。

```
Class TransactionModel
{
    public int transID { get; set; }
    public int clientID { get; set; }
    public string clientName { get; set; }
    public double cashValue { get; set; }
    public double amout { get; set; }
    public DateTime transDate { get; set; }
    public string remarks { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:25:59.803

您可以使用`LINQ`并执行以下操作：

```
var tranModel = from r in tblResult.Tables[0]
                select new TransactionModel 
                {
                   transId = r.Field<int>("transID"),
                   clientId = r.Field<int>("clientId"),
                   clientName = r.Field<string>("ClientName")
                } 
```

请注意，由于您使用的`.NET 2.0.`LINQ 不能直接使用。你将不得不使用类似的东西`LINQBridge`： [http ://www.albahari.com/nutshell/linqbridge.aspx](http://www.albahari.com/nutshell/linqbridge.aspx)

另一种选择是遍历所有行，`tblResult`并有一个通用列表`TransactionModel`。例如：

```
 List<TransactionModel> tModels = new List<TransactionModel>();
 foreach (var row in tblResult.Tables[0].Rows) 
 {
     tModels.Add(new TransactionModel 
                 {
                   transId = row["TransId"],
                   clientId = row["ClientId"],     
                   clientName = row["clientName"]
                 });
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:05:16.433

**因为 LINQ 在 .NET 2 中不可用**，所以您必须自己遍历这些项目并将它们转换为您的类型。像这样的东西：

```
DataTable transactions = getAllTransactions();
List<TransactionModel> model = new List<TransactionModel>();

foreach (DataRow transaction in transactions.Rows)
{
    TransactionModel tran = new TransactionModel
                            {
                                transId = transaction.Field<int>("transID"),
                                clientId = transaction.Field<int>("clientId"),
                                clientName = transaction.Field<string>("ClientName")
                                //etc...
                            };

    model.Add(tran);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:28:48.747

执行以下操作：

```
List<TransactionModel> TransactionItems = tblResult.AsEnumerable().Select(r => 
new TransactionModel
    {
        transID  = r.Field<int>("TransactionID"),
        clientID = r.Field<int>("clientID"),
        and so on.....
    }).ToList();

return items; 
```

# sbt - specs2 的 JVM 内存设置

> ID：15520865
> 
> 赞同：7
> 
> 时间：2013-03-20T10:22:39.473
> 
> 标签：sbt, specs2, spray

[在我使用specs2](http://etorreborre.github.com/specs2/)和[spray-testkit](http://spray.io/documentation/spray-testkit/)进行的一些较大的验收风格测试中，SBT 一直内存不足。我有 10 个演出或 RAM 可用，目前我启动 SBT（使用[SBT extras 脚本](https://github.com/paulp/sbt-extras/blob/master/sbt)），MaxPermSize 为 512m，Xms 为 1024m，Xmx 为 2g。

验收测试以特定顺序贯穿客户的整个业务流程，因此将验收测试拆分为多个较小的测试并不容易。

任何我可以更好地配置我的环境的想法，或者我应该注意的问题都将不胜感激。

对于它的价值，我在 Ubuntu 下使用 Oracle Java，该项目使用 Scala 2.10、sbt 0.12.2、spray 1.1-M7 和 specs2 1.14。

在测试之外运行系统或使用较小的测试时，一切都像发条一样运行。只有在更大的测试中，事情才会变得疯狂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:13:55.880

您可以做的一件事是分叉您的测试，您可以直接在 build.sbt 中设置内存设置：

```
fork in Test := true

javaOptions in Test += "-Xmx2048m" // we need lots of heap space 
```

这意味着测试不依赖于您使用 SBT extras 脚本运行，并且设置不会影响 sbt 本身。您还可以设置各种其他选项（请参阅[Forking](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking.html)），包括更改工作目录，甚至是要使用的 JRE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T23:20:09.710

我怀疑您正在使用 specs2 不可变样式遇到指数问题。解决方案是简单地添加更多内存或将您的测试分解成更小的块。更多信息在这里：

[http://www.artima.com/articles/compile_time.html](http://www.artima.com/articles/compile_time.html)

# ruby-on-rails - spree + ror + 乘客

> ID：15520868
> 
> 赞同：1
> 
> 时间：2013-03-20T10:22:50.033
> 
> 标签：ruby-on-rails, ruby, passenger

无法在本地访问网站

我想知道我是否做错了什么因为即使我指向我网站的公共文件夹，我也只会看到它有效的页面

我的 apache2.conf

```
 LoadModule passenger_module /home/harssh/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
   PassengerRoot /home/harssh/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19
   PassengerRuby /home/harssh/.rvm/wrappers/ruby-1.9.3-p392/ruby   

PassengerMaxPoolSize 15
PassengerPoolIdleTime 10

<VirtualHost *:80>
      ServerName spree
      # !!! Be sure to point DocumentRoot to 'public'!
      DocumentRoot /home/harssh/Documents/spreebackup/mystore/public   
      RailsEnv development
      <Directory /home/harssh/Documents/spreebackup/mystore/public>
         # This relaxes Apache security settings.
         AllowOverride all
         # MultiViews must be turned off.
         Options -MultiViews
      </Directory>
       PassengerMinInstances 5

   </VirtualHost> 
```

我的错误日志文件内容

> [2013 年 3 月 20 日星期三 12:09:19] [通知] Apache/2.2.22 (Ubuntu) 已配置 -- 恢复正常操作
> 
> [Wed Mar 20 12:20:08 2013] [notice] 捕获 SIGTERM，正在关闭
> 
> [2013 年 3 月 20 日星期三 12:20:12] [通知] Apache/2.2.22 (Ubuntu) Phusion_Passenger/3.0.19 已配置 -- 恢复正常操作
> 
> [2013 年 3 月 20 日星期三 12:20:21] [错误] [客户端 127.0.0.1] 文件不存在：/var/www/favicon.ico
> 
> [2013 年 3 月 20 日星期三 12:22:50] [通知] 捕获 SIGTERM，正在关闭
> 
> [2013 年 3 月 20 日星期三 12:24:50] [通知] Apache/2.2.22 (Ubuntu) Phusion_Passenger/3.0.19 已配置 -- 恢复正常操作
> 
> [2013 年 3 月 20 日星期三 14:36:42] [通知] 捕获 SIGTERM，正在关闭
> 
> [2013 年 3 月 20 日星期三 14:36:47] [通知] Apache/2.2.22 (Ubuntu) Phusion_Passenger/3.0.19 已配置 -- 恢复正常操作
> 
> [2013 年 3 月 20 日星期三 14:46:26] [错误] [客户端 127.0.0.1] 文件不存在：/var/www/favicon.ico
> 
> [2013 年 3 月 20 日星期三 14:46:51] [通知] 捕获 SIGTERM，正在关闭
> 
> [2013 年 3 月 20 日星期三 14:46:58] [通知] Apache/2.2.22 (Ubuntu) Phusion_Passenger/3.0.19 已配置 -- 恢复正常操作
> 
> [2013 年 3 月 20 日星期三 14:47:08] [错误] [客户端 127.0.0.1] 文件不存在：/var/www/favicon.ico

当我浏览本地主机时，它只显示它工作页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:44:03.493

最后我找到了解决方案

我不得不添加听 1025

并添加端口代替 80

它工作不知道为什么仍然......

# php - PHP函数不适用于变量

> ID：15520869
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:22:51.057
> 
> 标签：php, function, variables, sorting

您好我有以下功能：

```
foreach($array_1 as &$arr){
usort($arr,"cmp");
}

function cmp($a, $b) {
    if ($a[2] == $b[2]) {
    return 0;
    }
    return ($a[2] < $b[2]) ? -1 : 1;
} 
```

如果我这样做，它可以工作，但如果我放置一个变量而不是 2 == 2 和一个数字，则该函数不起作用。为什么会这样，我该如何解决？我希望能够更改数字以根据变量输入对数组进行排序。

不起作用的代码是：

```
$type = 2;
foreach($array_1 as &$arr){
usort($arr,"cmp");
}

function cmp($a, $b) {
    if ($a[$type] == $b[$type]) {
    return 0;
    }
    return ($a[$type] < $b[$type]) ? -1 : 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:27:02.277

对于希望您应该使用的 PHP 5.3+，使用闭包的解决方案很简单：

```
$index = 2;

foreach ($array_1 as &$arr) {
    usort($arr, function ($a, $b) use ($index) {
        return $a[$index] - $b[$index];
    });
} 
```

对于 PHP 5.2-，您可以使用`global`变量 ( **YUCK!!** ) 或类：

```
class Sort {

    protected $index;

    public function __construct($index) {
        $this->index = $index;
    }

    public function compare($a, $b) {
        return $a[$this->index] - $b[$this->index];
    }

}

$index = 2;

foreach ($array_1 as &$arr) {
    usort($arr, array(new Sort($index), 'compare'));
} 
```

# rest - 在测试时在 RESTEasy 资源中注入 Spring bean

> ID：15520871
> 
> 赞同：1
> 
> 时间：2013-03-20T10:22:53.660
> 
> 标签：rest, junit, resteasy, spring-test

在单元/集成测试中，我尝试使用 RESTEasy 嵌入式服务器`TJWSEmbeddedJaxrsServer`或为了通过资源调用进行`POJOResourceFactory`模拟以进行测试。`MockHttpRequest.get("/data")`我的问题是，基于服务器或资源工厂的使用，我无法在我的资源中正常注入 Spring bean 的非空实例。

这是一些用于澄清的代码，在此先感谢。

**Spring应用程序上下文：**

```
<context:annotation-config />
<context:component-scan base-package="com.cdcfast.service" />
<bean id="simpleResource" class="com.cdcfast.rest.SimpleResource" /> 
```

**简单资源.java：**

```
@Component
@Path("/data")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class SimpleResource {

@Autowired
private SimpleService service;

@GET
@Produces(MediaType.APPLICATION_JSON)
public List<Data> getData() {
    return MockDataBase.getInstance().getRows();
} 
```

**单元测试 ：**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:/test/spring/testApplicationContext.xml" })
public class FakeTest {

private Dispatcher dispatcher;

@Before
public void before() {
    dispatcher = MockDispatcherFactory.createDispatcher();
    POJOResourceFactory noDefaults = new POJOResourceFactory(SimpleResource.class);
    dispatcher.getRegistry().addResourceFactory(noDefaults);
}

@Test
public void aTestThatAlwaysPass() throws URISyntaxException {
    MockHttpRequest request = MockHttpRequest.get("/data");
    MockHttpResponse response = new MockHttpResponse();
    dispatcher.invoke(request, response);
    Assertions.assertThat(response.getStatus()).isEqualTo(HttpServletResponse.SC_OK);
    Assertions.assertThat(response.getContentAsString()).isNotNull().isNotEmpty();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:36:29.123

我以前有过这个，因为 RESTEasy 工厂创建 POJO 而不是 Spring，所以它们不会被连接起来，这可以在完整的容器中解决，但在测试中不太容易。解决此问题的最佳方法是在工厂创建 POJO 后获取它的句柄，然后执行类似于此的操作：

```
SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(myPojo); 
```

我个人最终让 Spring 使用 RESTEasy-Spring 插件创建 RESTEasy bean，然后使用 Jetty 启动我的测试，但不确定这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T08:26:43.240

我遇到了同样的问题，我已经以与詹姆斯类似的方式解决了：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:spring-context-test.xml" })
public class TestMyService {

    Dispatcher dispatcher;
    private String username = "user";

    @Autowired
    ApplicationContext context;

    @Before
    public void setUp() {

    MyService g = new MyService(); //rest service with @autowired spring beans
    context.getAutowireCapableBeanFactory().autowireBean(g);
    dispatcher = MockDispatcherFactory.createDispatcher();
    dispatcher.getRegistry().addSingletonResource(g);
    }

    @Test
    public void TestRest() {
    MockHttpRequest request;
    try {
        request = MockHttpRequest.get("/rest/service").header("LOGON_USER", username);
        MockHttpResponse response = new MockHttpResponse();

        dispatcher.invoke(request, response);
        assertTrue("Error, unexpected status code: " + response.getStatus(), response.getStatus() == 200);
        LoggerFactory.getLogger(this.getClass()).info("********** " + response.getContentAsString());
    } catch (URISyntaxException e) {
        Log.error(e.getMessage(), e);
        fail(e.getMessage());
    }
    }

} 
```

# php - 如何在没有过期会话的情况下将会话数据保存在表中？

> ID：15520876
> 
> 赞同：0
> 
> 时间：2013-03-20T10:23:05.213
> 
> 标签：php, codeigniter, session

我是使用 codeigniter 的 php 新手。我对使用 codeigniter mvc 框架的 php 会话有疑问。当我使用 table(ci-sessions) 存储会话数据时，由于会话到期而无法登录我们的站点..

1.  我已经在 Session 类中设置了`var $sess_table_name = 'ci_sessions';`& 。`var $sess_use_database = TRUE;`
2.  我还在config.php 中设置了`$config['sess_use_database'] = TRUE;`& 。`$config['sess_table_name']= 'ci_sessions';`
3.  我已经在数据库中创建了表，例如-

    如果不存在则创建表 `ci_sessions`（ session_id varchar(40) DEFAULT '0' NOT NULL, ip_address varchar(45) DEFAULT '0' NOT NULL, user_agent varchar(120) NOT NULL, last_activity int(10) unsigned DEFAULT 0 NOT NULL, user_data文本非空，主键（session_id），键`last_activity_idx`（`last_activity`））；

给出好的解决方案。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:31:17.363

关于会话到期，转到 application->config->config.php 并将 $config['sess_expiration'] 设置为零（$config['sess_expiration']=0;）。这将取消会话到期。

关于将会话保存在表格中，请确保您的表格看起来像这样：

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(45) DEFAULT '0' NOT NULL,
user_agent varchar(120) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id),
KEY `last_activity_idx` (`last_activity`)
); 
```

当然，您可以向其中添加字段，但请记住该结构。

# java - # java 如何在画布中插入图像

> ID：15520879
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:23:15.417
> 
> 标签：java, swing, jpanel, java-2d

我正在用java开发汽车模拟。我的编码如下。我想放一个面板，它是与 180 度的速度计图像一起旋转的线。我的问题是我该怎么做？

```
 public class House extends JPanel implements ActionListener
    {
    MyCanvas canvas;
    JButton mybutton,mybutton1,mybutton2,mybutton3,mybutton4,mybutton5;
    JTextField text1,text2,text3;
    JSlider sliderTransX, sliderTransY, sliderRotateTheta, sliderRotateX,
      sliderRotateY, sliderScaleX, sliderScaleY, sliderWidth;
    `enter code here`int k = 0;

  double transX = 0.0;
  double transY = 0.0;
  double rotateTheta = 0.0;
  double rotateX = 345.0;
  double rotateY = 250.0;
  double scaleX = 1.0;
  double scaleY = 1.0;
  float width = 1.0f;
  Cargame game = new Cargame();

  public House() 
  {
    super(new BorderLayout());
    JPanel controlPanel = new JPanel(new GridLayout(3, 3));
    add(controlPanel, BorderLayout.NORTH);
    sliderRotateTheta = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 180,
        0, 90, 45);
    mybutton = new JButton("Accelerate");
    mybutton.addActionListener(this);
    mybutton1 = new JButton("ShiftUp");
    mybutton1.addActionListener(this);
    mybutton2 = new JButton("ShiftDown");
    mybutton2.addActionListener(this);
    mybutton3 = new JButton("Deaccelerate");
    mybutton3.addActionListener(this);
    mybutton4 = new JButton("Start Engine");
    mybutton4.addActionListener(this);
    mybutton5 = new JButton("Stop Engine");
    mybutton5.addActionListener(this);
    text1=new JTextField(5);
    text2=new JTextField(5);
    text3=new JTextField(5);

    sliderWidth = new JSlider(JSlider.HORIZONTAL, 0, 20, 1);
    sliderWidth.addChangeListener(new ChangeListener()
    {
      public void stateChanged(ChangeEvent e) {

        width = sliderWidth.getValue();
        canvas.repaint();
      }
    });

   JPanel widthPanel = new JPanel();
  widthPanel.setLayout(new GridLayout(3, 3));
    widthPanel.add(mybutton);
    widthPanel.add(mybutton1);
    widthPanel.add(mybutton2);
    widthPanel.add(mybutton3);
    widthPanel.add(mybutton4);
    widthPanel.add(mybutton5);
    widthPanel.add(text1);
    widthPanel.add(text2);
    widthPanel.add(text3);
    add(widthPanel, BorderLayout.SOUTH);

    canvas = new MyCanvas();
    add(canvas, "Center");
  }

  public void actionPerformed(ActionEvent e)
    {
      if (e.getSource() == mybutton)
      {
          game.Accelerate();
      }
      if (e.getSource() == mybutton1)
      {
          game.ShiftUp();
      }
       if (e.getSource() == mybutton2)
      {
          game.ShiftDown();
      }
        if (e.getSource() == mybutton3)
      {
          game.Deaccelerate();
      }

        JSlider tempSlider=new JSlider();
        rotateTheta= ((double)game.getLevel()) * Math.PI / 180;
        text1.setText(String.valueOf(game.getLevel()));
         text2.setText(String.valueOf(game.getGear()));
         text3.setText(String.valueOf(game.Speedometer()));
        canvas.repaint();
    }

  public JSlider setSlider(JPanel panel, int orientation, int minimumValue,
      int maximumValue, int initValue, int majorTickSpacing,
      int minorTickSpacing) {
    JSlider slider = new JSlider(orientation, minimumValue, maximumValue,
        initValue);

    slider.addChangeListener(new ChangeListener() {
      public void stateChanged(ChangeEvent e) {
        JSlider tempSlider = (JSlider) e.getSource();
sliderRotateTheta.setValue(k);
       if(tempSlider.equals(sliderRotateTheta))
       {
          rotateTheta = sliderRotateTheta.getValue() * Math.PI / 180;

          canvas.repaint();

          }}

    });
    slider.setVisible(false);
    panel.add(slider);
    return slider;
  }

  class MyCanvas extends Canvas {      
    public void paint(Graphics g) {
      Graphics2D g2D = (Graphics2D) g;
      g2D.rotate(rotateTheta, rotateX, rotateY);

      BasicStroke stroke = new BasicStroke(width);
      g2D.setStroke(stroke);

      drawHome(g2D);
    }

    public void drawHome(Graphics2D g2D) {
      Line2D line7 = new Line2D.Float(205f, 250f, 345f, 250f);
      g2D.draw(line7);
    }
  }

  public static void main(String[] a) {
    JFrame f = new JFrame();
    f.getContentPane().add(new House());
    f.setDefaultCloseOperation(1);
    f.setSize(700, 550);
    f.setVisible(true);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:08:42.347

使用[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)，您可以控制[`DialPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/dial/DialPlot.html)使用 a`JSlider`或`JSpinner`。此相关[示例](https://stackoverflow.com/a/15207445/230513)使用 a`JSlider`来控制折线图，​​更多示例可以在 JWS[演示](http://www.jfree.org/jfreechart/samples.html)中找到。

[附录：如此处](https://stackoverflow.com/a/2510048/230513)所示，您可以使用[圆方程的参数形式](http://en.wikipedia.org/wiki/Circle#Equations)来计算指标线的自由端点。

# c - 用一个值初始化整个二维数组

> ID：15520880
> 
> 赞同：95
> 
> 时间：2013-03-20T10:23:21.373
> 
> 标签：c, arrays, initialization

带有以下声明

```
int array[ROW][COLUMN]={0}; 
```

我得到全零的数组，但有以下一个

```
int array[ROW][COLUMN]={1}; 
```

我没有得到所有一个值的数组。默认值仍然是 0。

为什么会出现这种行为以及如何使用全 1 进行初始化？

编辑：我刚刚明白使用`memset`with value as 1，会将每个字节设置为 1，因此每个数组单元格的实际值不会是 1，而是`16843009`. 如何将其设置为 1？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-20T10:47:41.917

您会得到这种行为，因为***这并不***`int array [ROW][COLUMN] = {1};`意味着“将所有项目设置为一个”。让我尝试逐步解释这是如何工作的。

 *初始化数组的明确的、过于清晰的方法是这样的：

```
#define ROW 2
#define COLUMN 2

int array [ROW][COLUMN] =
{
  {0, 0},
  {0, 0}
}; 
```

但是，C 允许您省略数组（或结构/联合）中的一些项目。例如，您可以编写：

```
int array [ROW][COLUMN] =
{
  {1, 2}
}; 
```

这意味着，将第一个元素初始化为 1 和 2，其余元素“就好像它们具有静态存储持续时间一样”。C 中有一条规则说，所有静态存储持续时间的对象，没有被程序员显式初始化，必须设置为零。

所以在上面的例子中，第一行设置为 1,2，下一行设置为 0,0，因为我们没有给它们任何明确的值。

接下来，C 中有一条规则允许松散的大括号样式。第一个例子也可以写成

```
int array [ROW][COLUMN] = {0, 0, 0, 0}; 
```

虽然这当然是糟糕的风格，但更难阅读和理解。但是这条规则很方便，因为它允许我们写

```
int array [ROW][COLUMN] = {0}; 
```

这意味着：“将第一行中的第一列初始化为 0，以及所有其他项目，就好像它们具有静态存储持续时间一样，即将它们设置为零。”

因此，如果您尝试

```
int array [ROW][COLUMN] = {1}; 
```

它的意思是“将第一行中的第一列初始化为 1，并将所有其他项设置为零”。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-09-03T13:23:21.997

如果要将数组初始化为，`-1`则可以使用以下命令，

```
memset(array, -1, sizeof(array[0][0]) * row * count) 
```

但这会起作用`0`，而且`-1`只有

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-20T10:25:12.273

```
int array[ROW][COLUMN]={1}; 
```

*这仅将第一个*元素初始化为 1。其他所有元素都为 0。

在第一种情况下，您正在做同样的事情 - 将第一个元素初始化为 0，其余的默认为 0。

原因很简单：对于一个数组，编译器会初始化你没有用 0 指定的每个值。

使用`char`数组可以`memset`设置每个字节，但这通常不适用于`int`数组（尽管它适用于 0）。

一般`for`循环会很快做到这一点：

```
for (int i = 0; i < ROW; i++)
  for (int j = 0; j < COLUMN; j++)
    array[i][j] = 1; 
```

或者可能更快（取决于编译器）

```
for (int i = 0; i < ROW*COLUMN; i++)
  *((int*)a + i) = 1; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-10-13T20:29:52.403

要使用零初始化二维数组，请使用以下方法： `int arr[n][m] = {};`

**注意**：上述方法仅适用于初始化为 0；

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-03-04T20:13:01.837

请注意，GCC 对[指定的初始化](https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Designated-Inits.html#Designated-Inits)符号有一个扩展，这对上下文非常有用。它也被允许`clang`不加注释（部分是因为它试图与 GCC 兼容）。

扩展符号允许您使用`...`以下值来指定要初始化的元素范围。例如：

```
#include <stdio.h>

enum { ROW = 5, COLUMN = 10 };

int array[ROW][COLUMN] = { [0 ... ROW-1] = { [0 ... COLUMN-1] = 1 } };

int main(void)
{
    for (int i = 0; i < ROW; i++)
    {
        for (int j = 0; j < COLUMN; j++)
            printf("%2d", array[i][j]);
        putchar('\n');
    }
    return 0;
} 
```

不出所料，输出是：

```
 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1 
```

请注意，Fortran 66 (Fortran IV) 对数组的初始化程序有重复计数；当指定的初始化器被添加到语言中时，C 没有得到它们总是让我感到奇怪。并且 Pascal 使用`0..9`符号来指定从 0 到 9 的范围，包括 0 到 9，但是 C 不用`..`作标记，所以没有使用也就不足为奇了。

请注意，`...`符号周围的空格本质上是强制性的；如果它们附加到数字，则该数字被解释为浮点数。例如，`0...9`将被标记为`0.`, `.`, `.9`，并且浮点数不允许作为数组下标。使用命名常量，`...ROW-1`不会造成麻烦，但最好养成安全的习惯。

* * *

附加物：

*我顺便注意到 GCC 7.3.0 拒绝：*

```
int array[ROW][COLUMN] = { [0 ... ROW-1] = { [0 ... COLUMN-1] = { 1 } } }; 
```

*`1`标量初始化器( )周围有一组额外的大括号`error: braces around scalar initializer [-Werror]`。我不确定这是正确的，因为您通常可以在标量 in 周围指定大括号`int a = { 1 };`，这是标准明确允许的。我也不确定这是否不正确。*

我还想知道是否会有更好的表示法`[0]...[9]`——它是明确的，不能与任何其他有效语法混淆，并避免与浮点数混淆。

```
int array[ROW][COLUMN] = { [0]...[4] = { [0]...[9] = 1 } }; 
```

也许标准委员会会考虑这一点？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-29T06:10:16.750

改用**向量**数组：

```
vector<vector<int>> array(ROW, vector<int>(COLUMN, 1)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-11T14:34:28.823

```
char grid[row][col];
memset(grid, ' ', sizeof(grid)); 
```

这是为了将 char 数组元素初始化为空格字符。*

# javascript - 为什么要将变量声明为新对象？

> ID：15520882
> 
> 赞同：-2
> 
> 时间：2013-03-20T10:23:27.747
> 
> 标签：javascript

作为初学者，使用现有代码时，我遇到了以下问题：

```
var foo = {}; 
```

我认为这相当于：

```
var foo = new Object(); 
```

我的印象是任何变量都会自动成为对象，所以专门编码的目的是什么，而不是仅仅声明一个空变量：

```
var foo; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:25:01.197

> 我的印象是任何变量都会自动成为对象

那是一种错误的印象。如果您声明一个变量但不为其赋值，它会被初始化为`undefined`（如[规范中](http://es5.github.com/#x12.2)所述[并详细描述](http://es5.github.com/#x10.5)），它不是一个对象（它是一个原始值）：

```
var foo;
console.log(foo); // undefined 
```

如果您尝试设置未定义变量的属性，您将收到 TypeError：

```
var foo;
foo.example = "hello"; // TypeError: Cannot set property 'example' of undefined 
```

但是，如果您为该变量分配一个空对象，则上述代码将成功：

```
var foo = {}; // Now refers to an empty object (equivalent to `new Object()`)
foo.example = "hello";
console.log(foo); // '{example:"hello"}' 
```

* * *

我相信您的理解可能源于“JavaScript 中的一切都是对象”的普遍误解。**这不是真的**。JavaScript 中的许多东西都是对象，但原始值不是。例如：

```
var a = "hello"; // String primitive, not an object
var b = new String("hello"); // String instance, object
var c = 10; // Number primitive, not an object
var d = true; // Boolean primitive, not an object
var e; // Undefined value, not an object
var f = null; // Null value, not an object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:50:55.017

詹姆斯的回答是正确的。万一他太快地抛出太多信息（如果是这样，请稍后再参考），这里有一个快速总结。

你是对的： var foo = {} 和 var foo = new Object() 不仅是等价的，结果也是一样的。仅使用对象文字。（忽略 new Object()、new Array() 等）。

变富; 除了声明一个变量之外什么都不做。默认为“未定义”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T10:33:10.770

var foo = new Object() 还给新对象一个原型属性，可用于操作对象继承和调用由 javascript 定义的标准对象函数

有关如何操作 object.protype 的详细信息，请参见此处：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

# haskell - 在 Haskell 中制作位置的方阵

> ID：15520883
> 
> 赞同：0
> 
> 时间：2013-03-20T10:23:29.260
> 
> 标签：haskell, multidimensional-array

我试图制作一个 n*n 矩阵，如果 n = 2，则结果矩阵将是：

```
[[(1, 1), (1, 2)], [(2, 1), (2, 2)]] 
```

即 2*2 矩阵中的可用位置矩阵。

我尝试了以下方法：

```
myIndex :: Int -> [[(Int, Int)]]
myIndex (n+1) n  =  []
myIndex 1     n  =  [zip [1, 1..] [1, 2..n]] ++ myIndex 2 n 
```

但有些不对劲。究竟是什么问题？

为清楚起见，考虑另一个 n = 3 的示例：

```
[[(1, 1), (1, 2), (1, 3)], [(2, 1), (2, 2), (2, 3)], [(3, 1), (3, 2), (3, 3)]] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:36:09.703

您似乎想要一个元素列表的列表，例如`(x, y)`x 和 y 所在的位置`[1..n]`。我们就这么写吧：

```
myIndex n = map (\x -> map (\y -> (x, y)) [1..n]) [1..n] 
```

另一种说法是列表推导：

```
myIndex n = [ [(x, y) | y <- [1..n]] | x <- [1..n] ] 
```

# highcharts - 轴标签旋转

> ID：15520885
> 
> 赞同：0
> 
> 时间：2013-03-20T10:23:32.927
> 
> 标签：highcharts, highstock

嗨，我正在使用 HighStock 1.2.4

我确实有多个系列，每个系列都有单独的 yAxis。我正在计算`height`和`topPadding`创建堆叠系列。

现在，我面临两个问题。

1.  我已经使用`rotation`yAxis 来旋转标签，但它不能正确渲染。示例：http: [//jsfiddle.net/mhardik/uZaWz/9/](http://jsfiddle.net/mhardik/uZaWz/9/)

2.  我也使用`rotation`过 X 轴标签，但最后一个系列位置被 X 轴标签弄乱了。

[http://jsfiddle.net/mhardik/uZaWz/10/](http://jsfiddle.net/mhardik/uZaWz/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:26:47.373

1）我不确定为什么它不能正确渲染，如果你想向左移动一点，使用`x:`标题属性。

2）首先，我认为您需要`align`为 xAxis.labels 设置正确（右）。然后制作更高的图表以确保您有足够的空间放置图表。

和 jsFiddle：http: [//jsfiddle.net/Fusher/uZaWz/12/](http://jsfiddle.net/Fusher/uZaWz/12/)

# javascript - 用 extjs 显示同一模型的不同视图

> ID：15520887
> 
> 赞同：1
> 
> 时间：2013-03-20T10:23:40.760
> 
> 标签：javascript, extjs, extjs4

我尝试使用 ExtJS 显示同一模型的不同视图（每个视图显示模型的一个子集）。

我有一个加载以下 xml 的嵌套模型：

```
<results>
  <hitcount>1234</hitcount>
  <recommended>
     <title>foo</title>
  </recommended>
  <result>
    <title>title1</title>  
    <author>author1</author>  
  </result>
  <result>
    <title>title2</title>  
    <author>author2</author>  
  </result>
</results> 
```

我想要不同的小部件，每个小部件都显示这个模型的一部分（一个显示“结果”的列表，另一个显示“推荐”的列表，另一个显示命中计数的小部件）。

我不知道的是如何在每个小部件上声明商店以仅针对完整模型的一个子集。

听起来像是一种基本方法，但我找不到这样的示例（我发现了许多嵌套结构的示例，但没有一个在模型子集上具有存储范围的示例）。

请参阅下面的一些尝试，我尝试仅获得结果部分。

```
Ext.define("MySenchaApp.model.ResultModel", {
    extend:"Ext.data.Model",

    config:{
        associations: [
            {
                type:'hasMany',
                model:'MySenchaApp.model.Result',
                name:'results',
                associationKey:'result'
            }
        ],

        proxy:{

            type:"ajax",
            url:'Results.xml',

            reader:{
                type:'xml',
                rootProperty:'results'
            }
        }
    }
});

Ext.define("MySenchaApp.model.Result", {
    extend:"Ext.data.Model",

    config:{
        fields:['title', 'author'],
        belongsTo: 'MySenchaApp.model.ResultModel'
    }
});

Ext.define('MySenchaApp.view.Results', {
    extend:'Ext.navigation.View',
    xtype:'blog',

    config:{
        title:'Results',
        items: [
            {
                xtype:'list',
                itemTpl:'<b>{title}</b> - by <i>{author}</i>',

                store:{
                    autoLoad:true,
                    model:'MySenchaApp.model.Result' // ??
                }
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:01:23.703

您不能将关联存储作为配置提供，因为它们绝不是单例。

## 解释

考虑以下示例：

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',   type: 'int'},
        {name: 'name', type: 'string'}
    ],
    hasMany: {model: 'Product', name: 'products'}
}); 
```

现在完全有道理，有些人希望拥有一个用户商店，每个用户都有自己的产品关联。因此，如果`aUser1`并且`aUser2`是两个用户记录存储在用户存储中，则执行以下操作是完全合法的：

```
aUser1.products().add( ... );
aUser2.products().add( ... ); 
```

关键是，有了关联，就没有单例存储——每条记录都有一个存储。

您的 XML 建议不能超过 1 `results`，在这种情况下，您不应该真正使用关联。您应该按照以下方式做一些事情：

```
Ext.define("MySenchaApp.model.Results", {
    extend:"Ext.data.Model",

    fields:['title', 'author'],

    proxy:{

        type:"ajax",
        url:'Results.xml',

        reader:{
            type:'xml',
            rootProperty:'results'
        }
    }

}); 
```

并提供以下 XML：

```
<metadata>
    <hitcount>1234</hitcount>
    <recommended>
        <title>foo</title>
    </recommended>
</metadata>
<results>
    <result>
        <title>title1</title>  
        <author>author1</author>  
    </result>
    <result>
        <title>title2</title>  
        <author>author2</author>  
    </result>
</results> 
```

使用代理的`metachange`事件检查命中计数并推荐。

# grep - GREP "--prefix" 作为模式

> ID：15520895
> 
> 赞同：0
> 
> 时间：2013-03-20T10:24:08.887
> 
> 标签：grep

当我使用`grep -nrF '--prefix' *`我得到`unrecognized option --prefix`.

有没有办法找到这个特殊的字符，比如`--`使用 grep？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:26:26.190

用于`--`告诉 grep 其余的不是命令行选项

```
grep -nrF -- '--prefix' * 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:23:45.737

[**卡特曼**](https://stackoverflow.com/questions/15520895/grep-prefix-as-a-pattern/15520950#15520950)是对的，一般的方法是使用`--`，但`grep`具体的解决方案是使用`-e`：

```
grep -nrFe '--prefix' * 
```

来自`man grep`：

> ```
> -e PATTERN, --regexp=PATTERN 
> ```
> 
> 使用 PATTERN 作为模式。这可用于指定多个搜索模式，或保护以连字符**(-)****开头的模式。** （-e 由 POSIX 指定。）

# jakarta-ee - Java EE 6 @Startup 和 @Schedule 永远不会被执行

> ID：15520914
> 
> 赞同：6
> 
> 时间：2013-03-20T10:25:04.057
> 
> 标签：jakarta-ee, singleton, ejb, scheduling, startup

我有以下单例，应该在 Web 应用程序启动时执行但它没有，并且计划任务也没有运行。

```
@Singleton
@Startup
public class Scheduler {

    private static int count = 0;

    @PostConstruct
    public void onStartup() {
        System.out.println("Initialization success.");
    }

   @Schedule(second="*/10", minute="*", hour="*")
   public void execute() {
      System.out.println("its running count..."+count);
      count++;
   }
} 
```

我正在使用 Glassfish 服务器 3.1.2。

**编辑**

启动方法现在正在执行，但调度方法没有运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-26T07:56:21.100

我的问题是我使用了错误的`Singleton`课程，而`javax.inject.Singleton`不是`javax.ejb.Singleton`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T18:57:49.267

添加另一个答案，因为 Boreded 自己的答案有一些问题。

设置解决问题的原因可能是如果设置为 true`persistence=false`时已经存在，则不会重新创建持久计时器。`keepstate`

您应该在日志中看到以下内容

```
INFO: keepstate is true and will not create new auto timers during deployment. 
```

我认为我[在这里](https://stackoverflow.com/questions/13092567/automatic-ejb-timer-on-glassfish-server-not-triggering/13102822#13102822)的回答（连同 Roland Tiefenbrunner 对同一问题的回答）很好地涵盖了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-25T15:07:47.627

还要注意注释的默认值。小时、分钟和秒默认为 0 NOT *，而其他默认为 * ，因此例如 @Schedule(minute = "*/20", persistent = false) 只会在午夜过后 20 + 40 分钟触发。

```
@Target(value=METHOD)
@Retention(value=RUNTIME)
public @interface Schedule {
   String dayOfMonth() default "*";

   String dayOfWeek() default "*";

   String hour() default "0";

   String info() default "";

   String minute() default "0";

   String month() default "*";

   boolean persistent() default true;

   String second() default "0";

   String timezone() default "";

   String year() default "*";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T12:36:50.777

对于其他有类似问题的人，添加以下解决了我的问题：

```
persistent=false 
```

所以我的日程注释现在是

```
@Schedule(second="*/10", minute="*", hour="*", persistent=false) 
```

# solr - Solr 云结果分组

> ID：15520915
> 
> 赞同：0
> 
> 时间：2013-03-20T10:25:06.283
> 
> 标签：solr, faceted-search, solrcloud

我有一个包含很少索引字段的 solr 架构

现在我有不同类型的产品，它们以“类型”字段区分。我希望每个搜索请求最多 50 个搜索结果。但结果应包含每种类型的至少 5 个产品，如果它们是搜索的一部分。假设我搜索计算机硬件商店产品，我的搜索结果应包含 5 个 HDD，5 RAM、5 个 CPU、5 个主板等，如果这些产品是搜索的结果。

如果某些产品类型的总返回行数少于 5，则包括可用的行数。

我尝试过方面查询和聚类，但未能成功。

有任何想法吗 ？如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:47:01.910

检查[Solr 字段折叠](http://wiki.apache.org/solr/FieldCollapsing)，这将允许您按产品类型对结果进行分组。
此外，您可以控制要返回的组数和每组中的条目数。

# java - Eclipse 4.2.1 安装 Google 插件 4.2 时出错

> ID：15520916
> 
> 赞同：0
> 
> 时间：2013-03-20T10:25:06.550
> 
> 标签：java, eclipse, plugins

我是 eclipse 的新手，我正在尝试为 eclipse 安装 google 插件，我得到以下信息：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Google Plugin for Eclipse 4.2 3.2.0.v201302131858-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.0.v201302131858-rel-r42)
  Missing requirement: Google Plugin for Eclipse 4.2 3.2.0.v201302131858-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.0.v201302131858-rel-r42) requires 'org.eclipse.wst.css.core 0.0.0' but it could not be found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:04:41.850

正如 Kevin Fritz 所说，最好使用 Eclipse Java EE 包。如果您不想从头开始安装 Eclipse，您还可以从[Juno 更新站点](http://download.eclipse.org/releases/juno/)或[WTP 更新站点](http://download.eclipse.org/webtools/repository/juno)安装所需的插件。安装 WTP 包。只是问你是否不知道如何进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:23:45.427

取自此页面[http://www.shekhargovindarajan.com/tips-n-tricks/solved-requires-bundle-org-eclipse-wst-xml-core-error-while-installing-google-plugin-in-fedora-蚀/](http://www.shekhargovindarajan.com/tips-n-tricks/solved-requires-bundle-org-eclipse-wst-xml-core-error-while-installing-google-plugin-in-fedora-eclipse/)

> 启动 Eclipse。单击帮助>安装新软件。在随后出现的标题为“可用软件”的窗口中，单击蓝色链接“可用软件站点”。在软件站点列表中查找 URL [http://download.eclipse.org/releases/galileo](http://download.eclipse.org/releases/galileo)。选择并单击启用（右侧的按钮）。单击确定。
> 
> 返回“可用软件”窗口，在标有“使用：”的字段中键入 URL [http://dl.google.com/eclipse/plugin/3.5 。](http://dl.google.com/eclipse/plugin/3.5)单击添加。这将在底部窗格中显示插件和 SDK。选中它们对应的框，然后单击下一步。按照屏幕上的说明进行操作。这将安装 Google 插件和 SDK。出现提示时，重新启动 Eclipse。

您可能显然需要将链接更新为`4.2`代替`3.5`和`juno`代替`galileo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:34:31.737

使用 Eclipse Java EE，而不是 Eclipse SDK..

[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2)

# magento - Magento 1.7.0.2 致命错误：在非对象上调用成员函数 getAttributeCode()

> ID：15520917
> 
> 赞同：2
> 
> 时间：2013-03-20T10:25:08.020
> 
> 标签：magento, upgrade, categories, fatal-error

我刚刚将 Magento 安装从 1.4.1.0 升级到 1.7.0.2。现在尝试编辑类别时出现错误。

错误说：

```
Fatal error: Call to a member function getAttributeCode() on a non-object in /home/.../domains/.../public_html/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Attributes.php on line 137 
```

我在论坛上发现了一些关于同一问题的主题，但没有一个有解决方案。在这里也找不到解决方案。

当我将旧版本的 Attributes.php 与新版本进行比较时，唯一的区别是这个代码块（第 132 到 145 行）：

```
 if ($this->getCategory()->getLevel() == 1) {
        $fieldset->removeField('custom_use_parent_settings');
    } else {
        if ($this->getCategory()->getCustomUseParentSettings()) {
            foreach ($this->getCategory()->getDesignAttributes() as $attribute) {
                if ($element = $form->getElement($attribute->getAttributeCode())) {
                    $element->setDisabled(true);
                }
            }
        }
        if ($element = $form->getElement('custom_use_parent_settings')) {
            $element->setData('onchange', 'onCustomUseParentChanged(this)');
        }
    } 
```

如果我注释掉这整个块，一切似乎都很好。但是有更好的解决方法吗？我实际上不明白这个代码块的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:03:16.690

这表示

```
 $attribute->getAttributeCode(); // referring to invalid attribute ( object ) 
```

有一个属性分配给旧数据库中的类别，您没有迁移它

查找分配给 catalog_category 实体的旧属性（假定在 1.7 安装中为 id 3），并在迁移后从新数据库中查找

```
SELECT *
FROM `eav_attribute`
WHERE `entity_type_id` = '3' 
```

然后比较新旧数据库的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T23:24:20.143

```
if ($element = $form->getElement($attribute->getAttributeCode())) {
    $element->setDisabled(true);    
} 
```

替换为

```
if ($element = $form->getElement($attribute)) {
    $element->setDisabled(true);                           
} 
```

# php - 动态创建的单选按钮问题

> ID：15520919
> 
> 赞同：1
> 
> 时间：2013-03-20T10:25:10.477
> 
> 标签：php, radio-button

我有一个表单，我可以在其中订阅和取消订阅时事通讯的用户，“表单”本身如下所示：

![在此处输入图像描述](../Images/7a55a4f8e5cbcf50308f6807d257a177.png)

复选框是使用以下代码动态创建的：

```
<?php 
$i = 0;  
while($objResult1 = mysql_fetch_array($objQuery1))  
 {  
$i++;  
?>  
<tr>  
   <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
   <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub[]" value="10"> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub[]" value="90"> </div></td>
</tr>  
<?php  
 }  
?> 
```

我在另一个脚本中使用这些值，我将它们插入到这样的数据库中：

```
foreach($_POST['sub'] as $i=>$s){
$sql = mysql_query("INSERT INTO Subscriptions (Klant_ID, Mail_ID, Status, Datum) VALUES   ('".$Klant_ID."', '".$_POST['mailid'][$i]."', '".$s."', '".$Datum."')") or die(mysql_error());
} 
```

然而问题是可以选择每一行中的两个复选框（基本上我可以选择所有复选框）。当我将输入类型设置为“单选”时，我只能选择 6 个单选按钮中的 1 个。有什么办法可以让它工作，所以我可以在每一行上选择 1 个单选按钮？如果您有任何问题或需要更多信息，请在评论中提问。提前谢谢！

注意：并不总是 3 行，这些行是根据数据库中的行数动态创建的。

**编辑：感谢**[Jueecy 的回答](https://stackoverflow.com/a/15521098/2134785) ，我可以使用此代码：

```
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) : ?>
<tr>  
<td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]"     value="<?=$objResult1["ID"];?>"> </div></td>
<td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
<td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="10"> </div></td>  
<td><div align="center"><input type="radio" name="sub[<?php echo $i; ?>]" value="90"> </div></td>
<tr>
<?php endfor; ?> 
```

我现在只有 1 个其他问题，ID 为 1 的行不再显示。有人知道如何解决这个问题吗？^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:34:24.280

> 有什么办法可以让它工作，所以我可以在每一行上选择 1 个单选按钮？

当然有。您应该选择具有单选按钮并按名称对它们进行分组。只有同名的单选按钮将被限制为只有一个值：

```
<input type="radio" name="row1" value="x">X</input>
<input type="radio" name="row1" value="y">Y</input>

<input type="radio" name="row2" value="x">X</input>
<input type="radio" name="row2" value="y">Y</input> 
```

我认为你可以很容易地为此想出一个适当的循环。类似于以下内容：

```
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) : ?>
<tr>  
   <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
   <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub<?php echo $i; ?>" value="10"> </div></td>  
   <td><div align="center"><input type="checkbox" name="sub<?php echo $i; ?>" value="90"> </div></td>
<tr>
<?php endfor; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:29:57.063

为此，单选按钮的名称只能按行共享，因为名称定义了只能检查其中一个的单选按钮组。

解决这个问题显然会对您的其他解决方案产生影响，但我相信您可以解决这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:30:48.017

我举一个单选按钮的例子：

```
 <html>
    <head>
    <title>My Page</title>
    </head>
    <body>
    <form name="myform" action="http://www.mydomain.com/myformhandler.cgi" method="POST">
    <div align="center"><br>
    <input type="radio" name="group1" value="Milk" /> Milk<br />
    <input type="radio" name="group1" value="Butter" checked /> Butter<br />
    <input type="radio" name="group1" value="Cheese" /> Cheese
    <hr />
    <input type="radio" name="group2" value="Water"/> Water<br />
    <input type="radio" name="group2" value="Beer" /> Beer<br />
    <input type="radio" name="group2" value="Wine" checked /> Wine<br />
    </div>
    </form>
    </body>
    </html> 
```

要对单选框进行分组，请使用“名称”属性。我只是将您的示例更改如下：

```
 <?php 
    $i = 0;  
    while($objResult1 = mysql_fetch_array($objQuery1))  
     {  
    $i++;  
    ?>  
    <tr>  
       <td><div align="center"><?=$objResult1["ID"];?><input type="hidden" name="mailid[]" value="<?=$objResult1["ID"];?>"> </div></td>
       <td><div align="center"><?=$objResult1["Titel"];?> </div></td>  
       <td><div align="center"><input type="checkbox" name="sub1" value="10"> </div></td>  
       <td><div align="center"><input type="checkbox" name="sub1" value="90"> </div></td>

       <td><div align="center"><input type="checkbox" name="sub2" value="10"> </div></td>  
       <td><div align="center"><input type="checkbox" name="sub2" value="90"> </div></td>
    </tr>  
    <?php  
     }  
    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:57:58.757

您可以使用此代码：它 100% 有效

```
<tr>  
            <td><div align="center">1</div></td>
            <td><div align="center">2</div></td>  
            <td><div align="center"><input type="radio" name="sub[1]" value="10"> </div></td>  
            <td><div align="center"><input type="radio" name="sub[1]" value="90"> </div></td>
        </tr>  
        <tr>  
            <td><div align="center">1</div></td>
            <td><div align="center">2</div></td>  
            <td><div align="center"><input type="radio" name="sub[2]" value="10"> </div></td>  
            <td><div align="center"><input type="radio" name="sub[2]" value="90"> </div></td>
        </tr>  
        <tr>  
            <td><div align="center">1</div></td>
            <td><div align="center">2</div></td>  
            <td><div align="center"><input type="radio" name="sub[3]" value="10"> </div></td>  
            <td><div align="center"><input type="radio" name="sub[3]" value="90"> </div></td>
        </tr> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:31:20.610

Either **use one radio button group per row** or use javascript to deselect unsubscribe when selecting subscribe and vice versa.

# iphone - 架构 i386 的 6 个重复符号

> ID：15520921
> 
> 赞同：10
> 
> 时间：2013-03-20T10:25:14.140
> 
> 标签：iphone, ios, objective-c, compiler-errors, sbjson

```
duplicate symbol _OBJC_METACLASS_$_SBJsonParser in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonParser.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonParser.o)
duplicate symbol _OBJC_CLASS_$_SBJsonParser in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonParser.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonParser.o)
duplicate symbol _OBJC_IVAR_$_SBJsonWriter.sortKeys in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonWriter.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonWriter.o)
duplicate symbol _OBJC_IVAR_$_SBJsonWriter.humanReadable in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonWriter.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonWriter.o)
duplicate symbol _OBJC_METACLASS_$_SBJsonWriter in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonWriter.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonWriter.o)
duplicate symbol _OBJC_CLASS_$_SBJsonWriter in:
    /Users/Gaditek/Library/Developer/Xcode/DerivedData/DietBet-gyhoyhmdrobtqregldjyixtgmize/Build/Intermediates/DietBet.build/Debug-iphonesimulator/DietBet.build/Objects-normal/i386/SBJsonWriter.o
    /Users/Gaditek/Desktop/AliMaisamProjects/Dietbet/DietBet/libfacebook_ios_sdk.a(SBJsonWriter.o)
ld: 6 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T10:58:11.983

如您所见，链接器抱怨`SBJsonWriter`并`SBJsonParser`在 libfacebook_ios_sdk.a 和项目中定义为单个文件。

除了从目标中删除单个文件之外，您无法真正解决问题。

问题是 libfacebook_ios_sdk.a 的开发人员认为使用 json 框架是个好主意（不关心与主机应用程序中使用的代码冲突）。这是 iOS 上 SDK 的常见问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-15T06:54:13.697

我已经解决了问题，请按照步骤操作。

1.  转到应用程序的目标
2.  编译源
3.  使用 (-) 删除重复文件。![在此处输入图像描述](../Images/82ced37eadebf5f2ff739b83d3f0477a.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-14T07:18:48.643

问题很可能是由于包含标题时的拼写错误。检查以确保包含头文件 (.h) 而不是实现文件 (.m)。

这对我来说是个问题

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-27T02:12:57.327

如果没有其他方法，通常会有所帮助的是使用文本编辑器打开您的 .pbxcodeproj 文件，然后使用 grep 查找 Xcode 中的失败日志中出现的类的名称。可能有两条重复的行 - 删除其中一条。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T10:35:48.387

您必须在项目中添加了两次 SBJsonParser.h/.m。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T10:48:53.160

似乎您可能两次包含一些 .h/.m 文件，例如两次包含一些第三方 API/库，或者您创建了一些名称与项目中已有文件完全相同的新文件。检查您的项目文件夹中是否有任何重复的文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-16T20:55:36.527

如果您两次导入任何 .h 文件，就会发生这种情况。

例如，如果您同时导入任何 .h 文件 ....ViewController.h 和 ....ViewController.m 文件，它就会发生。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-02T21:23:05.830

您还可以：

1.  复制`.h`冲突文件`pods`。
2.  `pods`从中删除这些冲突`podfile`。
3.  将这些`.h`文件复制到项目中。
4.  将复制的文件重命名为`#import` `</.h>`to 。`".h"``.h`
5.  制作`pod install`和建造。

诀窍是您的代码没有错误，因为`.h`文件已导入，但`.o`文件链接正确。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-30T07:23:04.877

如果以上都不能解决您的问题，请检查您是否在两个不同的文件中声明了一个常量（我的意思是检查您是否有两个相同的（.h &.m）文件。重复文件不应该存在于您的项目中。

# ruby-on-rails - 如何在控制器规格中测试 strong_parameters？

> ID：15520928
> 
> 赞同：1
> 
> 时间：2013-03-20T10:25:36.460
> 
> 标签：ruby-on-rails, ruby, rspec, ruby-on-rails-4, strong-parameters

添加 strong_parameters gem 后，我想测试我的控制器，该怎么做？我试过：

**控制器**

```
class EventsController < ApplicationController
  def update
    @event = Event.find(params[:id])
    respond_to do |format|
      if @event.update_attributes(event_params)
        format.html { redirect_to(@event, :notice => 'Saved!') }
      else
        format.html { render :action => "new" }
      end
    end
  end

  private
  def event_params
    params.require(:event).permit!
  end
end 
```

**眼镜**

```
describe EventsController do
  describe "PUT update" do
    describe "with forbidden params" do
      let(:event) { Event.create! title: "old_title", location: "old_location", starts_at: Date.today }

      it "does not update the forbidden params" do
        put :update,
          id: event.to_param,
          event: { 'title' => 'new_title', 'location' => 'NY' }

        assigns(:event).title.should eq('new_title') # explicitly permitted
        assigns(:event).location.should eq("old_location")  # implicitly forbidden

        response.should redirect_to event
      end
    end
  end
end 
```

**错误**

```
1) EventsController PUT update with forbidden params does not update the forbidden params
   Failure/Error: assigns(:event).title.should eq('new_title') # explicitly permitted
   NoMethodError:
     undefined method `title' for nil:NilClass
   # ./spec/controllers/events_controller_spec.rb:13:in 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:41:32.763

我看到这里发生了一些事情。

它在第 13 行所说的事实`undefined method`是因为未分配 @event 变量，因此`assigns(:event)`返回 nil。您应该检查为什么会发生这种情况，也许您有一些身份验证阻止您更新记录？也许您可以查看测试日志以了解实际情况。
这可能是因为您正在使用`let()`which 是惰性的，并且当您尝试搜索它时该记录实际上还不可用，但我不完全确定。您可以尝试使用`let!()`，看看是否有帮助。

关于强参数的实际使用，如果您只希望标题可分配，则需要执行以下操作：

```
params.require(:event).permit(:title) 
```

如果使用`permit!`，则事件参数散列并且每个子散列都被列入白名单。

# extjs - 带有 geoext 的 WMS 点的工具提示

> ID：15520933
> 
> 赞同：1
> 
> 时间：2013-03-20T10:25:49.520
> 
> 标签：extjs, openlayers, geoserver, wms, geoext

我的想法是让工具提示包含有关点的信息，这些点从 WMS 层返回，我尝试了以下方法：

1-使用矢量图层时，在设置点样式时会出现“图形标题”并显示工具提示，但是使用 WMS，我无法找到将其用作 SLD（wms 样式）中的工具提示的属性。

2-当我使用 ext tooltip 时，它返回错误的位置，因为我不知道目标是什么。！

```
new Ext.ToolTip({
        target: 'no target',
        html: 'A very simple tooltip'       }).show();}) 
```

3-所以我想使用 geoext 。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:33:46.567

我发现了如何:)

通过使用：

```
showAt([e.xy.x,e.xy.y]); 
```

# asp.net-mvc-4 - 如何在运行时将 CSS 应用于 Html.ValidationSummary

> ID：15520940
> 
> 赞同：3
> 
> 时间：2013-03-20T10:25:59.140
> 
> 标签：asp.net-mvc-4

我正在构建我的第一个 MVC4 网站，我想在页面成功提交时显示成功消息。我已经通过使用实现了， `ModelState.AddModelError(("", "Data successfully saved.");`但它显示为红色。我想根据某些条件在运行时应用不同的 css。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T18:18:28.907

我建议使用 TempData 而不是更改验证摘要，@von 很好地描述了它。使用引导程序。你可以这样做：

**控制器**

```
[HttpPost]
    public ActionResult ManageUsers(UserViewModel model)
    {
        if (ModelState.IsValid)
        {
            User obj = new User();
            obj.UserName = model.Email;
            obj.FirstName = model.FirstName;
            obj.LastName = model.LastName;
            obj.Email = model.Email;
            obj.Phone = model.Phone;
            obj.Notes = model.Notes;
            obj.Authorized = model.Authorized;
            UserRepository.SaveUser(obj);
            TempData["Success"] = "Yes";
        }
        return View(model);
    } 
```

**看法**

```
@Html.ValidationSummary()
@if (TempData["Success"] != null)
{
                <div class="alert alert-success">
                    <a href="#" class="close" data-dismiss="alert">&times;</a>
                    <strong>Success!</strong> The User account was created.
                </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:05:04.550

通常，当操作方法的结果成功时，会发生重定向，也许这就是您想要的，特别是如果您的结果不是 json 结果。但是，如果您在发布后返回相同的视图，那么您做错了。如果在`ModelState`帖子上有效，即如果验证通过（例如提供了必填字段），并且您通过添加错误消息，`ModelState.AddModelError(("", "Data successfully saved.")`那么您将`ModelState`进入无效状态。这就是为什么你有红色的原因。

现在假设你真的想返回相同的视图，那么我想你有类似的东西：

```
 [HttpPost]
    public ActionResult YourActionMethod(YourModel model)
    {          
        // some code goes here

        ModelState.AddModelError(("", "Data successfully saved.")
        return View(", model);
    } 
```

你应该拥有的是这样的：

```
 [HttpPost]        
        public ActionResult YourActionMethod(YourModel model)
        {          
            // some code goes here

            ViewBag.SuccessMessage = "Data successfully saved.";
            return View(", model);
        } 
```

然后在你看来是这样的：

```
@Html.ValidationSummary(true)
if (!string.IsNullOrWhiteSpace(ViewBag.SuccessMessage)) {
            <div class="success-summary">
                <p>@ViewBag.SuccessMessage</p>
            </div>    
} 
```

请注意，您不需要`@`在 if 之前添加额外内容，该代码假定它在`form`标签内，使用`@using`. 然后对于CSS：

```
.success-summary {
    color: #3366FF;
} 
```

您实际上可以使用 ViewData 或 ViewBag。要了解更多关于两者的区别，您可以[访问这个 SO 页面](https://stackoverflow.com/questions/4705426/whats-the-difference-between-viewdata-and-viewbag)。

**更新：**

```
[HttpPost]        
            public ActionResult YourActionMethod(YourModel model)
            {          
                //
                If (ModelState.IsValid) {
                                @ViewBag.IsModelValid = true;
                                ModelState.AddModelError("", "Data successfully saved."); 
                                return View(model);  
                }

                ViewBag.SuccessMessage = "Data successfully saved.";
                return View(", model);
            } 
```

您的看法：

```
@Html.ValidationSummary(false, "", new { @class= (ViewBag.IsModelValid!=null && ViewBag.IsModelValid) ? "success-summary" : "" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T01:00:36.310

冯，我也很欣赏你的回答，但我同意 MaxPayne 的观点，即你没有完全提供这个问题的答案，更多的是围绕 IMO 的工作。我也在寻找一种无需使用 ViewBag 的额外包袱来设计 ValidationSummary 的方法。

我同意您不应该在发布后返回相同的视图，除非出现错误，但我确实相信有时人们可能想要动态更改 ValidationSummary 样式而不必使用 ViewBag。

到目前为止，这是我唯一的领导[http://westcountrydeveloper.wordpress.com/2011/07/06/mvc-validation-part-4-styling-the-validation-controls/](http://westcountrydeveloper.wordpress.com/2011/07/06/mvc-validation-part-4-styling-the-validation-controls/)

我想您可以使用一些 JQuery 根据验证响应更改元素的 css 属性。

```
var valid = $("#formID").validate().element("#ElementID");
//or
var valid = $('#formID').validate();
// Then use $(".ElementClass").css({}); to change the the style 
```

# java - 找不到实体

> ID：15520946
> 
> 赞同：0
> 
> 时间：2013-03-20T10:26:18.903
> 
> 标签：java, jpa

我有这个我想与 JPA 一起使用的数据库表

```
CREATE TABLE translations (
id  SERIAL NOT NULL, 
KEY VARCHAR(255), 
LANGUAGE VARCHAR(255), 
TRANSLATION VARCHAR(255)
) 
```

我创建了这个实体：

```
@Entity
@Table(name = "translations")
public class TranslationTestEntitie extends AbstractEntityWithId {

    private static final long serialVersionUID = 2029240552230401080L;

    @Column(name = "id", insertable=false, updatable=false)
    private long id;
    @Column(name = "key", insertable=false, updatable=false)
    private String key;
    @Column(name = "language", insertable=false, updatable=false)

    private String language;
    @Column(name = "translation", insertable=false, updatable=false)
    private String translation;

    public TranslationTestEntitie() {
    }

    // Getters and setters
    public Long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public String getTranslation() {
        return translation;
    }

    public void setTranslation(String translation) {
        this.translation = translation;
    }

} 
```

当我尝试进行此查询时`SELECT c FROM Translations c WHERE c.Id = 70`

我收到这条消息`The abstract schema type 'Translations' is unknown.`

根据数据库表，这个实体是否正确。

PS这是我用来获取数据的代码：

```
public TData td;

    public class TData {

        private long id;
        private String key;
        private String language;
        private String translation;

        public TData() {
        };

        public TData(long id, String key, String language, String translation) {
            // super();
            this.id = id;
            this.key = key;
            this.language = language;
            this.translation = translation;
        }

        public long getId() {
            return id;
        }

        public void setId(long id) {
            this.id = id;
        }

        public String getKey() {
            return key;
        }

        public void setKey(String key) {
            this.key = key;
        }

        public String getLanguage() {
            return language;
        }

        public void setLanguage(String language) {
            this.language = language;
        }

        public String getTranslation() {
            return translation;
        }

        public void setTranslation(String translation) {
            this.translation = translation;
        }

    }

    public TData getDataObj() {
        return td;
    }

    @PostConstruct
    public void loadData() {

        td = new TData();

        String query = "SELECT c FROM Translations c WHERE c.id = 70";
        td = (TData) dao.jpqlQuerySingle(query);//(query);//jpqlQuery(query);

    } 
```

但我仍然得到空对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:29:26.750

映射到您的数据库表的实体`translations`已命名`TranslationTestEntitie`。

`from TranslationTestEntitie c`那么应该适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:28:56.333

也许是因为你的表名不是`Translations`but `translations`。

```
SELECT c FROM translations c WHERE c.id = 70 
```

和小写的id。

# apache - .htaccess 阻止所有目录 exept index.php

> ID：15520951
> 
> 赞同：1
> 
> 时间：2013-03-20T10:26:28.570
> 
> 标签：apache, .htaccess, rewrite

我写了这个脚本来拒绝所有 exept index.php

```
Order allow,deny
Deny from All

<Files *>
  Order Deny,Allow
  Deny from all
</Files>

<Files index.php>
  Order Deny,Allow
  Allow from all
</Files> 
```

但是，仍然会显示[http://mywebsite.com/image.jpg 之类的链接。](http://mywebsite.com/image.jpg)这怎么可能？

# eclipse - PlayFramework 2.1、子模块和 Eclipse 有关于无效包名的错误

> ID：15520954
> 
> 赞同：0
> 
> 时间：2013-03-20T10:26:43.710
> 
> 标签：eclipse, playframework-2.1

使用 PlayFramework 2.1 和子模块，我在 Eclipse 中的所有控制器都出现错误：

> “声明的包“controllers.website”与预期的包“controllers”不匹配

当然，因为在我的模块中，我添加了控制器`modules/{submodule_name}/app/controllers/`，例如：`modules/website/app/controllers/`

但正如 Play 文档中所定义的，控制器必须具有包名称“controllers.{submodule_name}”（“controllers.website”）。

这会导致每个控制器在 Eclipse 中出现错误。

如何在 Eclipse 中解决这个问题？可以重命名文件夹吗？或者告诉 Eclipse 在这种情况下没关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:57:05.140

我也重命名了我的控制器包，只需重命名它，在路由中重命名它并运行以下命令：

`play clean`和

`play compile`和

`play eclipse`

阅读有关此主题的更多信息：[播放框架：如何更改播放默认包？](https://stackoverflow.com/questions/4816248/play-framework-how-to-change-play-default-packages/9994758#9994758)

# python - Python：pyqt 应用程序中的多处理

> ID：15520957
> 
> 赞同：3
> 
> 时间：2013-03-20T10:26:57.023
> 
> 标签：python, user-interface, pyqt, multiprocessing

我的计算机中有一个 i7 CPU，为了提高我的 pyqt 应用程序的时间计算性能，我正在尝试使用多处理模块；当我在 pyqt 应用程序中执行以下操作时：

```
import multiprocessing as multiprocessing

def foo(ii):
    print ii

pool = multiprocessing.Pool(8)
pool.map(foo, range(10)) 
```

然后应用程序生成 8 个 pyqt GUI，它们是第一个主窗口的克隆（我总共有 9 个 pyqt GUI，这当然是错误的，我想要做的是并行计算并且不克隆主 GUI xD）。

我也尝试了 joblib 库（[http://pythonhosted.org/joblib/](http://pythonhosted.org/joblib/)），但问题是一样的。

有没有办法在 pyqt 应用程序中使用 multiprocessing 或 joblib 模块进行并行计算？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:00:17.077

如果您在 Windows 上，多处理将启动导入主模块的新进程。确保通过将 GUI 创建代码放在下面来保护它`if __name__ == '__main__':`

更好的是，为了避免在子进程中不必要地导入 PyQt 的开销，创建一个简单的新主模块，如下所示：

```
if __name__ == '__main__':
    import old_main_module
    old_main_module.main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:38:56.883

您想为 pyqt 生成多个进程，还是想为应用程序的“逻辑”添加额外的进程？

更重要的是：不要多处理 pyqt 容器 - 如果您想要并行性，请在应用程序的逻辑上生成进程并将结果返回到您的视图层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T07:45:08.557

在遇到“multioprocessing.Pool() 上的多个 GUI”问题后，我来到这里。过了一会儿，我分别[在这里](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.freeze_support)[找到](https://stackoverflow.com/questions/2073942/multiprocessing-problem-pyqt-py2exe)了解决方案：

```
from multiprocessing import freeze_support

if __name__ == '__main__':
    freeze_support()

    a = QApplication(sys.argv)
    ... 
```

# android - Android Google Maps API V2：如何更改我的位置图标？

> ID：15520964
> 
> 赞同：4
> 
> 时间：2013-03-20T10:27:20.540
> 
> 标签：android, mylocationoverlay

在 Google Map API v1 中，我可以通过编写扩展 MyLocationOverlay 的类来更改“我的位置”图标。但我不知道如何在 Google API v2 中做到这一点。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:56:26.207

我认为，v2 不支持自定义位置图标，但您可以通过禁用您的位置并设置自定义位置侦听器来解决它，该侦听器会在每次位置更新时添加/更新您的自定义地面覆盖。

# android - 不幸的是，在 ADT 中，“应用程序名称”已停止

> ID：15520966
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:27:23.887
> 
> 标签：android, runtime-error

我的代码是 activity_show_location.xml

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="40dip"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="5dip"
            android:text="@string/lat"
            android:textSize="20sp" >
        </TextView>

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/unkwn"
            android:textSize="20sp" >
        </TextView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/TextView03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="5dip"
            android:text="@string/lon"
            android:textSize="20sp" >
        </TextView>

        <TextView
            android:id="@+id/TextView04"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/unkwn"
            android:textSize="20sp" >
        </TextView>
    </LinearLayout>

</LinearLayout> 
```

ShowLocationActivity.java

```
 public class ShowLocationActivity extends Activity implements LocationListener {

    private TextView latitudeField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_show_location);
         latitudeField = (TextView) findViewById(R.id.TextView02);
         longitudeField = (TextView) findViewById(R.id.TextView04);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);

        Activity a;
        new Thread(new Runnable() {

            @Override
            public void run() {
                Location location = locationManager
                        .getLastKnownLocation(provider);
                if (location != null) {
                    System.out.println("Provider " + provider
                            + " has been selected.");
                    onLocationChanged(location);
                } else {
                    latitudeField.setText("Location not available.");
                    longitudeField.setText("Location not available.");
                }
            }
        }).start();
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latitudeField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) { // TODO
                                                                                // Auto-generated
                                                                                // method
                                                                                // stub
    }

    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) { // Inflate the menu; this
                                                    // adds items to the action
                                                    // bar if it is present.
         getMenuInflater().inflate(R.menu.activity_show_location, menu);
        return true;
    }
} 
```

当我在 ADT eclipse logcat 中运行时显示

这是我的 LogCat 节目：

```
03-20 07:44:56.383: W/Trace(871): Unexpected value from nativeGetEnabledTags: 0 
03-20 07:44:56.383: W/Trace(871): Unexpected value from nativeGetEnabledTags: 0 
03-20 07:44:56.783: W/Trace(871): Unexpected value from nativeGetEnabledTags: 0 
03-20 07:44:56.783: W/Trace(871): Unexpected value from nativeGetEnabledTags: 0 
03-20 07:44:57.343: D/AndroidRuntime(871): Shutting down VM 
03-20 07:44:57.343: W/dalvikvm(871): threadid=1: thread exiting with uncaught exception (group=0x40a70930) 
03-20 07:44:57.373: E/AndroidRuntime(871): FATAL EXCEPTION: main 
03-20 07:44:57.373: E/AndroidRuntime(871): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.locationapi/com.example.locationapi.ShowLocationActivity}: java.lang.IllegalArgumentException: invalid provider: null 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.ActivityThread.access$600(ActivityThread.java:141) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.os.Handler.dispatchMessage(Handler.java:99) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.os.Looper.loop(Looper.java:137) 03-20 07:44:57.373: E/AndroidRuntime(871):   at android.app.ActivityThread.main(ActivityThread.java:5039) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at java.lang.reflect.Method.invokeNative(Native Method) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at java.lang.reflect.Method.invoke(Method.java:511) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at dalvik.system.NativeStart.main(Native Method) 03-20 07:44:57.373: E/AndroidRuntime(871): Caused by: java.lang.IllegalArgumentException: invalid provider: null 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.location.LocationManager.checkProvider(LocationManager.java:1594) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1138) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at com.example.locationapi.ShowLocationActivity.onCreate(ShowLocationActivity.java:32) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.Activity.performCreate(Activity.java:5104) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 
03-20 07:44:57.373: E/AndroidRuntime(871):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
03-20 07:44:57.373: E/AndroidRuntime(871):  ... 11 more 
03-20 07:45:39.193: I/Process(871): Sending signal. PID: 871 SIG: 9 
```

当模拟器运行为“不幸的是LocationAPI，已停止”时，我得到了。请告诉解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:11:20.507

我猜你没有在模拟器中传递位置，要在模拟器中测试 gps 位置，你需要使用 DDMS 传递值

这是你如何做到的：

1.  在eclipse中打开DDMS：
2.  转到模拟器 Controle
3.  在位置控制手动选项卡中提供 lang 和 lat 值并按发送按钮，然后启动应用程序。

让我知道它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:03:54.310

看这里的日志是调试

```
07:44:57.373: E/AndroidRuntime(871): Caused by: java.lang.IllegalArgumentException: invalid provider: null 
03-20 07:44:57.373: E/AndroidRuntime(871): at android.location.LocationManager.checkProvider(LocationManager.java:1594)
03-20 07:44:57.373: E/AndroidRuntime(871): at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1138) 
03-20 07:44:57.373: E/AndroidRuntime(871): at com.example.locationapi.ShowLocationActivity.onCreate(ShowLocationActivity.java:32) 
```

所以在`ShowLocationActivity.java:32`

```
Location location = locationManager.getLastKnownLocation(provider); 
```

你提供的`provider`基本上是空的。因此，您可能需要检查可能导致它为空的原因。

这是您应该检查的项目列表：

1.  是线程的原因吗？
2.  曾经被分配过吗？
3.  尝试给它一个默认值。

此外，您不应该从子线程中触摸您的 UI 线程。这样做

```
latitudeField.setText("Location not available.");
longitudeField.setText("Location not available."); 
```

也不是什么好主意。

尝试使用`AsyncTask`.

# spring - HTTP 状态 500 - 请求处理失败；嵌套异常是 org.hibernate.HibernateException: /hibernate.cfg.xml not found

> ID：15520973
> 
> 赞同：0
> 
> 时间：2013-03-20T10:28:07.090
> 
> 标签：spring, hibernate, spring-mvc, controller, hibernate-mapping

我是 Hibernate 和 Spring 的新手，在执行应用程序时遇到了上述异常。

我正在尝试从数据库中获取记录的值。

以下是我得到的例外： -

```
message Request processing failed; nested exception is org.hibernate.HibernateException: /hibernate.cfg.xml not found

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.HibernateException: /hibernate.cfg.xml not found
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
root cause

org.hibernate.HibernateException: /hibernate.cfg.xml not found
    org.hibernate.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:170)
    org.hibernate.cfg.Configuration.getConfigurationInputStream(Configuration.java:1497)
    org.hibernate.cfg.Configuration.configure(Configuration.java:1519)
    org.hibernate.cfg.Configuration.configure(Configuration.java:1506)
    com.me.app.HomeController.handleRequestInternal(HomeController.java:56)
    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.34 logs. 
```

以下是我的文件：-

**POJO**

```
public class Usertable {

    int id;
    String userName;
    String password;

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**控制器**

```
//@Controller
public class HomeController extends AbstractController{

    //private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
//  @RequestMapping(value = "/", method = RequestMethod.GET)
//  public String home(Locale locale, Model model) {
//      logger.info("Welcome home! The client locale is {}.", locale);
//      
//      Date date = new Date();
//      DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);
//      
//      String formattedDate = dateFormat.format(date);
//      
//      model.addAttribute("serverTime", formattedDate );
//      
//      return "home";
//  }

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        String userName = request.getParameter("userName");
        String password = request.getParameter("password");
        Usertable user;

        Configuration cfg = new Configuration();
        SessionFactory sf = cfg.configure().buildSessionFactory();
        Session hibsession = sf.openSession();

        Transaction tx = hibsession.beginTransaction();
        user = (Usertable)hibsession.get(Usertable.class, userName);

        System.out.println("UserName is "+ user.getUserName());
        System.out.println("Password is "+ user.getPassword());

        tx.commit();

        hibsession.close();

        return new ModelAndView("first","abc","abc");
    } 
```

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.password">tiger</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/contacts</property>
        <property name="hibernate.connection.username">root</property>

        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

        <mapping resource="Usertable.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

**用户表.hbm.xml**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 20 Mar, 2013 4:26:30 AM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.me.app.Usertable" table="USERTABLE">
        <id name="id" type="java.lang.Integer">
            <column name="UserID" />
            <generator class="native" />
        </id>
        <property name="userName" type="java.lang.String">
            <column name="UserName" />
        </property>
        <property name="password" type="java.lang.String">
            <column name="UserPassword" />
        </property>
    </class>
</hibernate-mapping> 
```

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->
    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />
    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <!--  <resources mapping="/resources/**" location="/resources/" /> -->

    <beans:bean id="urlMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />

    <beans:bean name="/books.htm" class="com.me.app.HomeController" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.me.app" />

</beans:beans> 
```

请帮我解决这个问题。在此先感谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:51:34.580

问题是你不应该在你的请求句柄中实例化你的休眠配置，而是让 spring 实例化你`session factory` 并将它注入你的控制器并从那里检索会话。这样做，您就不必为应用程序的每个请求实现会话工厂。

您可以查看此[问题](https://stackoverflow.com/questions/8121461/spring-hibernate-sessionfactory)或官方文档以详细了解如何通过 spring 实例化会话工厂。

这将（间接）解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:43:02.300

**benzonico**和**KHY**感谢您的投入。我犯的第一个错误是将 hibernate.cfg.xml 放在 src/main/java/com/me/app/ 中，它应该是 src/main/java/。这对我有用。关于 TypedMismatch 的下一部分是

```
user = (Usertable)hibsession.get(Usertable.class, userName); 
```

我试图从实际上是整数的数据库中获取字符串引用。这样就解决了 typedMismatchException。

我一定会尝试通过 spring 将会话工厂注入我的代码中。由于我是这个框架的新手，我在与您讨论和尝试新代码时学到了很多东西。

再次感谢您的宝贵反馈。

# jquery - 当数据不可用且某些给定日期高 FULL 日历时，停止在事件上显示悬停

> ID：15520974
> 
> 赞同：0
> 
> 时间：2013-03-20T10:28:10.870
> 
> 标签：jquery, calendar

嗨朋友们，我想**停止工具提示（隐藏）当 json 中不可用**的标题数据显示并想要显示一些**在月份中具有不同颜色的**手动给定日期，例如完整日历中的当前日期。这是我的代码

```
$('#calendar').fullCalendar({
            editable: true,
            events: 'calender_json.php?property_id='+propid,
            eventMouseover: function(calEvent, jsEvent) {
                var tooltip = '<div class="tooltipevetn"> '+ calEvent.customername +
                '<br/>'+ calEvent.title + 
                '<br/>'+ calEvent.test2 + 
                '<br/>'+ calEvent.test1 +
                '<br/></div>';
                $("body").append(tooltip);
                $(this).mouseover(function(e) {
                    $(this).css('z-index', 10000);
                    $('.tooltipevetn').fadeIn('500');
                    $('.tooltipevetn').fadeTo('10', 1.9);
                }).mousemove(function(e){
                        $('.tooltipevetn').css('top', e.pageY + 10);
                        $('.tooltipevetn').css('left', e.pageX + 20);
                });
            },
            eventMouseout: function(calEvent, jsEvent){
                $(this).css('z-index', 8);
                $('.tooltipevetn').remove();
            },      
            eventDrop: function(event, delta) {
                alert(event.title + ' was moved ' + delta + 'days\n' +
                '(should probably update your database)');
            }                       
        });
    }); 
```

任何人都可以帮助我，因为我的时间不多了，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:32:19.387

```
if(dynamicTitle="")
  $('#selectorId').removeAttr("title"); 
```

Like this you can remove title of element.

# php - 什么是安全令牌，为什么要在表单中使用它？

> ID：15520977
> 
> 赞同：3
> 
> 时间：2013-03-20T10:28:20.540
> 
> 标签：php, security

我在许多论坛和其他网站上看到他们在 POST 或 GET 方法中使用安全令牌（长字符串）。例如（POST 方法）：

```
<input
    type="hidden"
    name="securitytoken"
    value="1363774829-89afb5d0fbcd2f8d55db0b675061d62bd21ca94e"
/> 
```

GET 方法示例：

```
http://www.example.com?attribute=xyz&token=f0ec0e8e1622a030cbc543d3ac42729e 
```

这个安全令牌是什么？为什么要使用它？它提供什么类型的安全性？应该在哪里使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:32:51.373

It is probably a token to prevent "CSRF" (Cross Site Request Forgery).

For example,

*   you are logged in to the forum
*   you go to evilhacker.com
*   evilhacker has an auto-submitting form that sends spam to the forum
*   because you are logged in, you post (in your name) the spam.

But because the forum needs some token that is tied to your session (so evilhacker cannot guess it for his own form), the post is rejected and you did not post spam.

If you want to see some details, [read this paper](http://www.adambarth.com/papers/2008/barth-jackson-mitchell-b.pdf)

# php - 为什么在我的 HTTP (AJAX) responseText 之前添加了 '\n'？

> ID：15520979
> 
> 赞同：1
> 
> 时间：2013-03-20T10:28:33.383
> 
> 标签：php, javascript, ajax

这个特殊的 AJAX 调用在 responseText 返回的值前面返回“\n”。

它以前没有这样做，现在当我用它测试有效的返回代码`if (request.responseText == 100)`时失败了，因为它现在等于“\n100”。

我知道我可以去掉“\n”，但这将是一种解决方法，我更愿意找到原因并修复它。

这是我的客户端代码：

```
function AJAX(){

    var xmlHttp;

    try{
        xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
        return xmlHttp;
    }
    catch (e){
        try{
            xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
            return xmlHttp;
        }
        catch (e){
            try{
                xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                return xmlHttp;
            }
        catch (e){
            alert("Your browser does not support AJAX!");
            return false;
        }
        }
    }
}

function logDetails() {

    var request,
        Result  = document.getElementById('Result'),
        message = document.getElementById('message'),
        url = 'ajax/login.user.php?',
        us  = document.getElementById('username').value,
        pa  = document.getElementById('password').value;

    Result.innerHTML = 'Logging in...';

    if (document.getElementById) {

        request = AJAX();

    }

    if (request) {

        request.onreadystatechange = function() {

            if (request.readyState == 4 && request.status == 200) {

                var r = request.responseText;
//var r = 100;
                if (r == '100') {

                    Result.innerHTML        = 'You are now logged in.';
                    window.location.href    = "prebooks.php";

                }

                else if (r == '101' || r == '102') {

                    Result.innerHTML    = 'Your login attempt failed.';
                    resetDetails();

                }

                else if (r == '103') {

                    Result.innerHTML    = 'Sorry, you have no books subscription.';

                }

                else if (r == '999') {

                    Result.innerHTML    = 'You have no more attempts!';
                    message.innerHTML   = 'Please call us on (02) XXXXXXX so that we can assist you.';

                } else {

                    alert(r);

                }
            }
        };
    }
    // add my vars to url
    url += "arg1="+us+"&arg2="+pa;

    request.open("GET", url, true);
    request.send(null);
} 
```

这是我的服务器端代码：

```
<?= 100 ?> 
```

好的，我简化了它，但我尝试直接回显“100”，问题仍然存在。

**更新** 我误以为直接回显“100”并不能解决问题。确实如此。对此感到抱歉，感谢您为我指明了正确的方向。

但是，这确实让我试图找出服务器端的输出是如何被污染的。

在服务器端，我有一个处理身份验证并返回要回显的值（100）的类。这是行：

```
echo $L->doLogin($pkg); 
```

该`doLogin()`方法中与返回相关的行是：

```
$pkg[status]=100;
return $pkg[status]; 
```

并确保换行符不会在某个地方泄漏，如果我用它替换`echo $L->doLogin($pkg);`的`echo 100;`话。

**更新 2 -**已解决 事实证明，问题出在 doLogin() 方法中包含的一个包含类文件中，该方法最近已更新为在打开之前在文件顶部包含一个换行符`<?`。

非常感谢大家的投入（如果没有它，我仍然会在客户端代码中摸索）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T06:58:50.357

我遇到了同样的问题并发现（通过向 Ajax 添加 dataFilter 选项并显示返回的字符串化 JSON 的警报）确实是 PHP 脚本存在语法问题。然后 PHP 服务器会预先挂起一个 HTML 迷你文档来发出错误信号。但是，当回到 AJAX 时，由于 dataType 是 'json'，整个返回的 PHP 响应首先被 json 解析，从而剥离了所有前置的 HTML，只留下换行符。有效 JSON 返回数据前面的这些换行符导致 JSON 数据被视为语法错误，就是这样！使用 dataFilter 选项在警报中发送原始数据，我能够看到 PHP 脚本的初始错误，并且一旦更正，就没有更多的换行符了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-16T18:32:32.200

我遇到了同样的问题，我知道我在页面末尾多次点击了 Inter ，我把它放在我的页面上，当我删除它时，我的 responseText 显示没有 \n。:)

例子：

_enter _enter _enter

# c++ - 如何将 unsigned long long 位分成 3 个整数，每个整数都有 [1-2, 3-5, 6-7] 位？

> ID：15520983
> 
> 赞同：-6
> 
> 时间：2013-03-20T10:28:38.110
> 
> 标签：c++

有`unsigned long long a`如何将其位分成 3 个整数，每个整数都有 [1-2, 3-5, 6-7] 位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:33:21.727

```
unsigned long long a;
// bits 1 and 2 assuming 0 indexed
int first = static_cast<int>((a & (3ULL<<1))>>1);
// bits 3 and 5 assuming 0 indexed
int second = static_cast<int>((a & (3ULL << 3)) >> 3);
// bits 6 and 7 assuming 0 indexed
int third = static_cast<int>((a & (3ULL << 5)) >> 5); 
```

# sql - SQL子查询统计数字

> ID：15520985
> 
> 赞同：0
> 
> 时间：2013-03-20T10:28:47.100
> 
> 标签：sql, subquery

```
SELECT b.PlateNumber, BusModel, Count(DISTINCT d.StaffID) AS NumberOfDirvers
FROM Bus b, Trip t, Driver d, Staff s
WHERE b.PlateNumber = t.PlateNumber 
AND t.StaffID = d.StaffID
AND d.StaffID = s.StaffID
AND b.capacity = 72
AND EXTRACT(MONTH FROM s.DateOfBirth) BETWEEN '07' AND '12'
GROUP BY PlateNumber, BusModel; 
```

显然有些公共汽车还没有与任何司机一起旅行，但我的代码似乎无法将司机人数显示为 0。我该如何显示呢？

**问题：**

给定一个公共汽车容量，比如 72，找到具有指定容量的公共汽车集合。

对于集合中的*每辆*巴士，请列出：

*   (i) 巴士车牌号，
*   (ii) 模型，以及
*   (iii) 在 7 月至 12 月之间出生并同时驾驶过公交车的唯一司机总数（如果没有这样的司机，则预计为 0）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:34:54.657

用于 `IFNULL(value, 0)`显示`0`未找到驱动程序。此外，您可能希望通过使用来增强您的查询`JOINS`

```
SELECT b.PlateNumber, BusModel, IFNULL(Count(DISTINCT d.StaffID), 0) AS NumberOfDirvers
FROM Bus b LEFT JOIN Trip t ON b.PlateNumber = t.PlateNumber
LEFT JOIN Driver d ON t.StaffID = d.StaffID
LEFT JOIN Staff s d.StaffID = s.StaffID
WHERE EXTRACT(MONTH FROM s.DateOfBirth) BETWEEN '07' AND '12'
GROUP BY b.PlateNumber, BusModel; 
```

# apache-storm - Storm vs. Trident：什么时候不使用 Trident？

> ID：15520993
> 
> 赞同：39
> 
> 时间：2013-03-20T10:29:03.020
> 
> 标签：apache-storm, trident

我正在使用[Storm](http://storm-project.net/)，它适用于很多用例。最近我看了[Trident](https://github.com/nathanmarz/storm/wiki/Trident-tutorial)，它是 Storm 的高级抽象。它支持*一次性*处理并使有状态处理更容易。

但现在我想知道.. 为什么我不能总是使用 Trident 而不是 Storm？

到目前为止我读到的：

*   Trident 批量处理消息，因此吞吐时间可能会更长。
*   Trident 还不能处理拓扑中的循环。

使用 Trident 代替 Storm 时还有其他缺点吗？因为现在，我认为我上面列出的缺点是微不足道的。

**哪些用例不能用 Trident 实现？**

* * *

**后果：**

自从我提出这个问题后，我的公司决定先选择 Trident。我们只会在出现性能问题时使用纯 Storm。遗憾的是，这不是一个积极的决定，它只是成为默认行为（当时我不在）。

他们的假设是，在大多数用例中，我们需要状态或仅处理一次，或者我们将在不久的将来需要它。我理解他们的推理，因为从 Storm 迁移到 Trident 或返回不是一个简单的转换，但在我个人看来，没有状态的流处理的概念并没有被所有人理解，这是使用 Trident 的主要原因。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-10-10T06:21:37.487

回答您的问题：什么时候不应该使用 Trident？每当你负担得起的时候。

Trident 增加了 Storm 拓扑的复杂性，降低了性能并生成了状态。问自己一个问题：您是否需要 Trident 的“恰好一次”处理语义，或者您能否接受 Storm 的“至少一次”处理语义。只有一次，使用三叉戟，否则不要。

我还想强调一个事实，Storm 保证所有消息都会被处理。有些消息可能只被处理了不止一次。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-26T19:10:40.013

如果尽可能低的延迟是您的目标，并且您不需要完全一次处理，那么使用 Storm 比 Trident 更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-09T06:12:07.093

Trident 是在 Twitter Storm 之上进行实时计算的高级抽象，在 Storm 0.8.x 中可用。Storm 是无状态流处理框架，Trident 提供有状态流处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-06T14:59:59.547

Chris，由于这两个都是开源技术，所以 trident 作为风暴之上的一个场景的唯一实现，当然，这带来了性能开销。如果三叉戟无法满足您的要求，您可以在风暴之上创建自己的状态实现。Trident 及时产生了更高级别的项目，例如 Trident-ML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T08:59:01.847

假设我们想做过滤+向元组添加字段。如果我们使用 Storm，我们通常使用 2 个机器人进行过滤，添加字段。所以我们需要再次将元组发送到新的bolt，可能正在使用全局分组。所以这里的nw带宽可能会成为瓶颈。

通过使用 trident，我们可以在单台机器上使用 do above。所以在这种情况下不需要重新组合。除了“恰好一次”/“在东部一次”之外，这样的用例可以区分使用什么等。

三叉戟是一种分组逻辑分组

# sql - 查找列是否具有唯一约束

> ID：15520994
> 
> 赞同：9
> 
> 时间：2013-03-20T10:29:03.347
> 
> 标签：sql, oracle

在一个假设的场景中，我是一个没有表创建权限的用户。我想知道表中的列是否具有**UNIQUE CONSTRAINT**。**是否可以在字典**中查找它？我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-26T10:51:36.567

这里给出的两个答案都错过了一种在列上强制唯一性的方法：通过创建*唯一索引*（而不在列上定义唯一约束）。如果您不熟悉此选项，请参阅这两个链接（[一](https://community.oracle.com/thread/1033157)、[二）。](https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:36858373078604)

**除了**唯一约束检查​​之外，还应执行此检查：

```
select count(*) from
USER_IND_COLUMNS cols
where cols.table_name='YOUR_TABLE_NAME'
and cols.COLUMN_NAME='YOUR_COLUMN'; 
```

要检查唯一约束，请使用已提供的方法：

```
select count(*) cnt 
from user_constraints uc
where uc.table_name='YOUR_TABLE_NAME'
and uc.constraint_type='U'; 
```

或者，您也可以查看`ALL_CONSTRAINTS`和`ALL_IND_COLUMNS`视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T10:44:35.907

对于独特的约束，您可以执行以下操作：

```
select cons.constraint_type, 
       all_cols.owner, all_cols.constraint_name, 
       all_cols.table_name, 
       all_cols.column_name, 
       all_cols.position
  from all_cons_columns col
       inner join all_cons_columns all_cols
               on col.owner = all_cols.owner
              and col.constraint_name = all_cols.constraint_name
       inner join all_constraints cons
               on col.owner = cons.owner
              and col.constraint_name = cons.constraint_name
 where col.owner = 'SCHEMA'
   and col.table_name = 'FOO'
   and col.column_name = 'ID'
   and cons.constraint_type in ('U', 'P')
 order by owner, constraint_name, position; 
```

设置感兴趣的所有者、表和列，它将显示涵盖该列的所有约束

请注意，这不会显示列上存在唯一索引的所有情况（因为在不存在约束的情况下可能存在唯一索引）。

例子：

```
SQL> create table foo(id number, id2 number, constraint foo_con unique(id, id2), constraint foo_con2 unique(id));

Table created. 
```

现在列出涵盖的所有约束`id`：

```
SQL> col column_name format a20
SQL> col constraint_name format a20
SQL> col table_name format a15
SQL> select cons.constraint_type,
  2         all_cols.owner, all_cols.constraint_name,
  3         all_cols.table_name,
  4         all_cols.column_name,
  5         all_cols.position
  6    from all_cons_columns col
  7         inner join all_cons_columns all_cols
  8                 on col.owner = all_cols.owner
  9                and col.constraint_name = all_cols.constraint_name
 10         inner join all_constraints cons
 11                 on col.owner = cons.owner
 12                and col.constraint_name = cons.constraint_name
 13   where col.owner = user
 14     and col.table_name = 'FOO'
 15     and col.column_name = 'ID'
 16     and cons.constraint_type in ('U', 'P')
 17   order by owner, constraint_name, position;

C OWNER                          CONSTRAINT_NAME      TABLE_NAME      COLUMN_NAME            POSITION
- ------------------------------ -------------------- --------------- -------------------- ----------
U DTD_TRADE                      FOO_CON              FOO             ID                            1
U DTD_TRADE                      FOO_CON              FOO             ID2                           2
U DTD_TRADE                      FOO_CON2             FOO             ID                            1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T11:01:44.877

```
select count(*) cnt 
from user_constraints 
where table_name=your_table_name 
and constraint_type='U'; 
```

如果 count = 0 则没有`UNIQUE`约束，否则`UNIQUE`您的表上有约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-04T23:40:15.347

这是我刚刚尝试过的一个查询。它列出了每个唯一性约束，由强制它的索引标识，以及唯一的列：

```
select x.index_name, c.column_name, c.column_position
from USER_INDEXES x join USER_IND_COLUMNS c
     on x.index_name = c.index_name and x.table_name = c.table_name
     left join USER_CONSTRAINTS uc
     on x.index_name = uc.index_name and x.table_name = uc.table_name
where x.status = 'VALID' and
      (x.uniqueness = 'UNIQUE' or
       uc.constraint_type = 'U' and uc.status = 'ENABLED' and uc.validated = 'VALIDATED')
      and x.table_name='<your table name_in_caps>'
order by x.index_name, c.column_position; 
```

它似乎适用于主键、唯一索引和添加的唯一性约束。

# php - 将数据传递到另一个页面以用于 GD 图像生成功能

> ID：15520995
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:29:06.317
> 
> 标签：php, gd

我有一段代码可以将字符串转换为文本的图像。为了让它在我的实现中正常工作，它需要在一个单独的文件中。

所以我有这个：（generateimage.php）

```
<?php
$text = "this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test";

$arrText = explode("\n", wordwrap($text, 69, "\n")); //change number 75 here to check the wordwrap

$im = @imagecreate(650, 500); //creates an image (width,height)
$background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
$y = 5; //vertical position of text

foreach ($arrText as $key => $arr)
{
$white = imagecolorallocate($im, 255, 255, 255); //sets text color
//imagestring($im, 5, 15, $y, trim($arr), $white); //create the text string for image,added trim() to remove unwanted chars
putenv('GDFONTPATH=' . realpath('.'));
imagettftext($im, 16, 0, 15, 16 + $y, $white, 'font.ttf', trim($arr));
$y = $y + 16 + 4; // size of font + newline space
}

imagepng($im);
imagedestroy($im);
?> 
```

然后我在我的主页中调用它：

```
<img src="generateimage.php"> 
```

我想要做的是传递一个变量来填充generateimage.php 中的$text。我该怎么做呢？会有一篇文章要传递（超过 1000 字），我不认为通过 GET（URL）传递它会很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:40:40.930

恕我直言，最简单的方法是将您的字符串放入数据库或文件中，或者通过某个脚本将会话变量放入，为选定的文本实例设置一些短 ID，然后使用 GET 将此 ID 传递给 generateimage.php