# StackOverflow 问答 14430000-14430999

# c++ - 编译内联汇编代码时打开调试器

> ID：14430000
> 
> 赞同：0
> 
> 时间：2013-01-20T22:21:15.743
> 
> 标签：c++, inline, inline-assembly

我正在使用来自 Github 的一些代码，但它不会编译。调试器在代码编译过程中打开。这是一个个人项目，如果有人可以对代码进行有用的编辑，因为我是汇编新手，这将非常有帮助。

这是在调试器打开之前我得到的输出：

> “Assembly.exe”：已加载“C:\Users\Mayank\Desktop\Assembly\Debug\Assembly.exe”，已加载符号。“Assembly.exe”：已加载“C:\Windows\SysWOW64\ntdll.dll”，找不到或打开 PDB 文件“Assembly.exe”：已加载“C:\Windows\SysWOW64\kernel32.dll”，找不到或打开 PDB 文件“Assembly.exe”：已加载“C:\Windows\SysWOW64\KernelBase.dll”，找不到或打开 PDB 文件“Assembly.exe”：已加载“C:\Windows\SysWOW64\msvcr100d.dll” , 符号加载。Assembly.exe 中 0x011013fe 的第一次机会异常：0xC00000FD：堆栈溢出。Assembly.exe 中 0x011013fe 处的未处理异常：0xC00000FD：堆栈溢出。

这是代码：

```
//
//  main.cpp
//  MergeSortC
//
//  Copyright (c) 2012 Mayank. All rights reserved.
//

#include <iostream>
#include <cmath>
#include <stdio.h>

using namespace std;
const int ARRAYSIZE = 30;

int main()
{
    int arr[ARRAYSIZE];
    int temp_arr[ARRAYSIZE];
    int number;

    for(int x = 0; x < ARRAYSIZE; x++)
    {
        number = (rand() % 99) + 1;
        arr[x] = number;
    }

Merge_Sort:
    __asm
    {
        // EAX - Array start
        // ECX - array length

        // Merge_Sort (first half)
        // Length of the first half
        // ECX /= 2
        push  ECX
        shr   ECX, 2
        call  Merge_Sort
        pop   ECX

        // Merge_Sort (second half)
        push  arr
        push  EBX
        push  ECX

        // Length of the second half
        // ECX = ECX - ECX/2
        mov   EDX, ECX
        shr   EDX, 1
        sub   ARRAYSIZE, EDX
        imul  EDX, 4
        // Start index of the second half
        // EAX = EAX + (ECX/2) * 4
        add   arr, EDX
        push  EDX
        call  Merge_Sort
        pop   EDX

        pop   ECX
        pop   EBX
        pop   arr

        pushad
        // Merge (first half, second half)
        // Length of first half = ECX/2
        // Length of second half = ECX - ECX/2
        mov   EDX, ECX
        shr   ECX, 1
        sub   EDX, ECX

        // Start of second half = EAX + (ECX/2) * 4
        mov   EBX, EAX
        mov   EDI, ECX
        imul  EDI, 4
        add   EBX, EDI
        // Index of temp array = 0
        sub   EDI, EDI
        call  Merge
        popad

        // Copy back the merged array from temp_arr to arr
        call  Merge_Copy_Back_Temp

        ret
    };
Merge:
    __asm
        {
        // Merge two arrays contents.
        // The final merged array will be in temp_arr
        // Merging is done recursively.

        // Arguments:
        // EAX - First array's start
        // EBX - Second array's start
        // ECX - Length of first array
        // EDX - Length of second array
        // EDI - Index in temp array
        pushad

        // Handle the cases where one array is empty
        cmp   ARRAYSIZE, 0
        jz    First_Array_Over
        cmp   EDX, 0
        jz    Second_Array_Over

        // Compare first elements of both the arrays
        push  ARRAYSIZE
        push  EDI
        mov   ECX, [arr]
        mov   EDI, [ECX]
        cmp   ECX, EDI
        pop   EDI
        pop   ECX

        // Pick which ever is the least and update that array
        jl    Update_First_Array
        jmp   Update_Second_Array
        ret
    };

Update_First_Array:
   __asm
   {
        // min_elem = min (first elements of first array and second array)
        // Put min_elem into the temp array
        push  dword ptr [EAX]
        pop   dword ptr [temp_arr + EDI * 4]
        add   EAX, 4
        dec   ECX
        inc   EDI

        // Recursively call Merge on the updated array and the
        // other array
        call  Merge
        popad
        ret
   };

Update_Second_Array:
   __asm
   {
       // min_elem = min (first elements of first array and second array)
        // Put min_elem into the temp array
        push  dword ptr [EBX]
        pop   dword ptr [temp_arr + EDI * 4]
        add   EBX, 4
        dec   EDX
        inc   EDI

        // Recursively call Merge on the updated array and the
        // other array
        call  Merge
        popad
        ret
   };

Merge_Copy_Back_Temp:
   __asm
   {
        // Copy back the temp array into original array
        // Arguments:
        // EAX - original array address
        // ECX - original array length
        pushad

        // For copying back, the destination array is EAX
        mov   EBX, EAX
        // Now, the source array is temp_arr
        mov   EAX, temp_arr
        call  Copy_Array
        popad
        ret
   };

First_Array_Over:
   __asm
   {
        // Copy the rest of the second array to the temp arr
        // because the first array is empty
        pushad
        mov   EAX, EBX
        mov   ECX, EDX
        mov   EBX, temp_arr
        imul  EDI, 4
        add   EBX, EDI
        call  Copy_Array
        popad
        popad
        ret
   };

Second_Array_Over:
   __asm
   {
    // Copy the rest of the first array to the temp arr
    // because the second array is empty
    pushad
    mov   EBX, temp_arr
    imul  EDI, 4
    add   EBX, EDI
    call  Copy_Array
    popad
    popad
    ret
   }; 
Copy_Array:
   __asm
   {
    // Copy array to destination array
    // EAX - Array start
    // EBX - Destination array
    // ECX - Array length

    // Trivial case
    cmp   ECX, 0
    jz    Copy_Empty_Array

    push  ECX
    sub   EDI, EDI
   };
copy_loop:
   __asm
   {
    // Copy each element
    push  dword ptr [EAX + EDI * 4]
    pop   dword ptr [EBX + EDI * 4]
    inc   EDI
    loop  copy_loop

    pop   ECX
    ret
   };

Copy_Empty_Array:
   __asm
   {
    ret
   };

Read_Arr:
   __asm
   {
        // EAX - array start
        // ECX - array length
        mov   ESI, arr
        sub   EDI, EDI
   };
loop1:
   __asm
   {
        // Read each element
        lea eax,[esi+edx*4]
        inc   EDI
        loop  loop1
        ret
   };

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:31:31.450

我不敢相信*编译*期间调试器打开。也就是说，这段代码

```
Merge_Sort:
    __asm
    {
        // EAX - Array start
        // ECX - array length

        // Merge_Sort (first half)
        // Length of the first half
        // ECX /= 2
        push  ECX
        shr   ECX, 2
        call  Merge_Sort 
```

*运行时必须*溢出堆栈：压入ECX，移位ECX，调用自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:31:39.033

没有自己安装编译器，我建议你通过添加`#if 0 / #endif`一堆代码来完成代码，看看你是否能弄清楚编译器对哪些指令感到不安——这显然是编译器崩溃了，这是这不是一件好事，但确实会发生。

当然，那是在你用谷歌搜索错误消息等之后......;）

# c# - 视图状态在 response.redirect 上消失

> ID：14430003
> 
> 赞同：4
> 
> 时间：2013-01-20T22:21:43.510
> 
> 标签：c#, asp.net, viewstate

在我的 asp.net c# 页面上，我有两个带有 ajax CalendarExtenders 的文本框（开始日期和结束日期）。用户选择开始日期，然后选择结束日期。在选择结束日期时，我绑定我的网格，如下所示；

```
 protected void calEndDate_TextChanged(object sender, EventArgs e)
    {
        BindGrid();
    } 
```

在网格中，我有一个带有以下代码的命令按钮

```
 protected void gvAllRoomStatus_RowCommand(object sender, GridViewCommandEventArgs e)
    {    
        if (e.CommandName == "Manage")
        {    
            GridViewRow row = gvAllRoomStatus.Rows[Convert.ToInt16(e.CommandArgument)];    
            int BookingID = Convert.ToInt32(row.Cells[1].Text);              

            DataClassesDataContext context = new DataClassesDataContext();
                Session["BookingID"] = BookingID;
                Response.Redirect("CheckIn.aspx");
        }
    } 
```

当用户转到该页面并单击后退按钮时，所有选定的日期和 gridview 数据都会消失。任何想法为什么视图状态正在消失？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T22:23:49.543

`ViewState`属于当前`Page`。

看看： http: [//www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages](http://www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages)

> 是的，我们可以跨页面访问视图状态变量。这只有在使用 Cross Page Posting 或 Server.transfer 将用户重定向到其他页面时才有可能。**如果使用了 Response.redirect，那么 ViewState 不能跨页访问**。

因此，您可以`Server.Transfer`改用或使用`Session`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:39:08.300

在我看来，您遇到的问题是因为您`calEndDate_TextChanged`使用 Ajax 进行自动回发。

提交后，当您按下后退按钮时，浏览器将不记得使用 Ajax 调用的所有自动发布数据都无法保存您所做的更改，并且您会丢失它们。

对我来说，删除文本更改自动回发，删除 Ajax，因为您不需要，并在用户提交数据时定期进行完整回发。

然后，当您使用浏览器返回时，浏览器会加载先前的状态，并且大多数浏览器会记住用户的输入内容和所有内容。同样在背面，视图状态与以前的相同，因为 Ajax 没有变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T22:32:35.740

Viewstate 以非常简单的方式查看它是将其视为您当前所在页面的最后状态的副本或缓存。因此，重定向到任何页面，甚至是同一页面本身，本质上都是一个新的开始。视图状态不再适用于所有意图和目的，您在一个新页面上。

正如 Tim 在他的帖子中建议的那样，要么将所需的数据存储为会话变量，要么使用 server.transfer。

在这里查看视图状态的一个很好的概述：http: [//www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages](http://www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages)

# ruby-on-rails-3 - 为什么我的 Rails 模型不能保存到数据库中？

> ID：14430009
> 
> 赞同：0
> 
> 时间：2013-01-20T22:22:38.253
> 
> 标签：ruby-on-rails-3, model

```
 def self.build_prior_month(payee, as_of = Time.current, opts = {})    
    start_date, end_date, year, month = effective_dates(as_of)

    statement = payee.earnings_statements.build(
      :year => year,
      :month => month,
      :balance => 0,
      :revenue => 0
    )

    statement.generate(start_date, end_date, year, month)
    statement.update_totals

    statement
  end 
```

这是我在我的模型中的一个功能。它`statement`正确返回，但不保存到数据库中。这是为什么？

该`generate`函数如下所示：

```
 def generate_ledger_items(start_date, end_date, year, month)
    payee.ledger_entries.for_month_and_year(month, year).each do |entry|
      earnings_statement_items.build(
        :items => entry.item_group,
        :units => entry.units,
        :net_revenue => entry.net_revenue,
        :net_revenue_per_unit => [entry.net_revenue, entry.units].all? ? (entry.net_revenue / entry.units).round(2) : nil,
        :fees => entry.service_fees,
        :payments_collected => entry.spendings,
        :fee_terms => entry.terms || entry.description, # When would terms be set?
        :due => entry.credit || -entry.debit
      )
    end
  end

  def update_totals
    self.revenue  = earnings_statement_items.net_revenue
    self.balance = earnings_statement_items.total
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:48:01.823

您的`build`关联方法实际上并未将记录保存到数据库中。`create`将要。它类似于您的模型之间`new`和`create`模型上的差异。

```
statement = payee.earnings_statements.create(
  :year => year,
  :month => month,
  :balance => 0,
  :revenue => 0
) 
```

将保存您的记录。请参阅[文档](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:01:02.127

.build 不保存对象

称呼：

```
statement.save 
```

# css - div适合图像宽度

> ID：14430011
> 
> 赞同：2
> 
> 时间：2013-01-20T22:23:03.180
> 
> 标签：css, responsive-design, image, inheritance

我有一个带有缩放图像显示的投资组合页面。我有这个代码：[http ://codepen.io/Mpleandro/pen/LvrqJ](http://codepen.io/Mpleandro/pen/LvrqJ)

显示图像的 div`.display`在 HTML 的第 13 行有一个类 , 并且这个 div 的 css 格式是第 90 行。

图像宽度将是灵活的，所以我想要的是让包含的 div 继承图像的宽度。

我尝试了 css 属性`auto`，`inherit`并且`min-with`，但没有任何效果！

有人可以帮助我吗？

PS：我需要一个响应式的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-29T20:53:30.227

由于 1 年过去了，您可能对解决方案不感兴趣，但希望对其他人有所帮助。

我也遇到过这样的情况，我需要一个与图像宽度相同的 div，并且它必须是响应式的。

就我而言，我为 div 设置了固定宽度

```
.some-div{
   width: 250px;
} 
```

我也有响应图像：

```
img{
   display: block;
   max-width: 100%;
   height; auto;
} 
```

然后我添加了一个带有阈值的媒体查询，当固定宽度`div`开始影响响应性时，我简单地添加了这个：

```
@media screen and (max-width: 917px){
    .some-div{
        width: 100%;
    }
} 
```

对于我的项目，阈值是`917px`固定宽度开始影响的时间。

我想这是一个适合所有人的解决方案，因为`width: 100%`如果图像响应，在某个阈值之后将始终是图像的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:56:06.577

我不知道如何给你一个完美的答案，但我希望能把你送到正确的方向。首先，你可以忘记`inherit`或者`min-width`因为它们不是你想要的。

`auto`是默认值，我认为默认行为非常接近你想要的：div的宽度适应它的内容。如果这不是当前行为，这是由于许多其他原因，包括该 div 的定位。问题是，你不会有一个适当的中心和大小`<div class="display">`只有 CSS，因为它需要一个特定的显式宽度声明。

由于您已经使用 Javascript 来显示/隐藏好的图像，因此您可以在每次更改框中的图像时使用 Javascript 设置宽度。

我最好的建议是使用经过测试、批准并且看起来非常好的现有解决方案。2 秒的 Google 搜索将我指向[Fesco](http://www.frescojs.com/)，您可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:07:36.993

我不确定这是否是您的意思，但如果是，我希望它会有所帮助！

如果您希望图像填充 div，但要随浏览器缩放，请尝试设置 div 的宽度。接下来，应用`max-width="100%"; height: auto;`到您的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T12:23:27.240

最简单的解决方案是设置`.display`为`display: inline-block;`，这会将其大小调整为包含的图像。如果您也想响应，例如，您需要通过 定义一个上限`max-height: 80%`。

放在一起，它看起来像这样：[http ://codepen.io/anon/pen/IluBt](http://codepen.io/anon/pen/IluBt)

JS 第 17 行：

```
$(".display").css("display","inline-block"); 
```

CSS 为`.display`

```
.display {
    position: relative;;
    background: rgba(255,255,255,0.5);
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    max-height:80%; /* <-- limit the height */
    top:10%;
    left:0;
    margin:auto;
} 
```

并很好地对齐所有内容：

```
.loader {
    color: red;
    position: fixed;
    width: 100%; height: 100%;
    background: rgba(0,0,0, 1) url(../http://www.mpleandro.com.br/images/new/loader.gif) no-repeat center center;
    text-align: center;
} 
```

# assembly - 协处理器命令有问题（我想在图形模式下绘制 f(x)=x*sin(1/x) 曲线）

> ID：14430012
> 
> 赞同：1
> 
> 时间：2013-01-20T22:23:09.607
> 
> 标签：assembly, x86, nasm, x87

我是编程汇编的初学者。我想在图形模式下绘制 f(x)=x*sin(1/x) 曲线。我可以画出 f(x)=sin(x) 曲线，但我无法画出 f(x)=x*sin(1/x)。我怎么能这样做？

下面你可以看到我的工作 f(x)=sin(x) 代码。它正在工作并完美地绘制正弦曲线：

```
 org 100h                   
    mov al,13h
    int 10h

    xor bx,bx

    loopage:
    inc word [angle]

    fld dword [pie]
    fimul word [angle]
    fsin
    fimul word [xradius]
    fistp word [x]
    fimul word [yradius]
    fistp word [y]

    mov al,15

    mov dx,[x]
    add dx,ax
    mov cx,[y]
    add cx,bx

    ;xor ax,ax
    ;int 16h

    inc bl
    mov ah,0Ch
    mov al,bl
    int 10h

    cmp word [angle],360
    je endage
    jb loopage

    mov ax,0a000h
    mov es,ax
    xor ax,ax
    mov cx,32000
    rep stosw

    endage:
    xor ax,ax
    int 16h
    ret

    y dw 0
    x dw 0
    angle dw 0
    a dw -1
    pie dd 0.01756
    yradius dw 50
    one dw 1
    xradius dw 50
    float dd 0 
```

我想更改此代码以绘制 f(x)=x*sin(1/x) 曲线。

我已经尝试了几件事来更改上面代码中的以下部分：

```
 ...
    fld dword [pie]
    fimul word [angle]
    fsin
    fimul word [xradius]
    fistp word [x]
    fimul word [yradius]
    fistp word [y]
    ... 
```

然而到目前为止还没有任何结果。

请问你能帮帮我吗？

=========== 已编辑：====================

我试过你的代码。现在我的代码如下所示：

```
 ...
    loopage:
    ;inc word [angle]
    ; FP0 <- 1
    fld1
    ; FP0 = FP0 / [pie] / [angle], is equal to FP0 / ([pie] * [angle])
    fidiv dword [pie]
    fidiv word [angle]
    fsin
    fimul dword [pie]
    fimul word [angle]
    fimul word [yradius]
    fistp word [y]

    mov al,15

    mov dx,[angle]
    add dx,ax
    mov cx,[y]
    add cx,bx
    ... 
```

但是，此代码仅绘制一条线，而不是预期的 x*sin(1/x) 曲线。你能帮我弄清楚可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:13:51.430

您在“工作”代码中有错误：

```
....
; FP0 <- [pie] ~ Pi/180
fld dword [pie]
; FP0 = FP0 * [angle]
fimul word [angle]
; FP0 = sin(FP0)
fsin
; FP0 = FP0 * [xradius]
fimul word [xradius]
; [x] <- FP0
fistp word [x]
; **ERROR: no FP0!**
fimul word [yradius]
fistp word [y]
.... 
```

不要问它为什么起作用 ;) 实际上，您的 [x] 必须等于此代码中的 [angle]，公式为 [y] = ([pie] * [angle]) * sin(1/[pie]/[角度])，[x] = [角度]：

```
; FP0 <- 1
fld1
; FP0 = FP0 / [pie] / [angle], is equal to FP0 / ([pie] * [angle])
fidiv dword [pie]
fidiv word [angle]
fsin
fimul dword [pie]
fimul word [angle]
fimul word [yradius]
fistp word [y] 
```

所以删除 [x] 和 [xradius] 变量并更改此行：

```
mov dx,[x] 
```

对此：

```
mov dx,[angle] 
```

# joomla - 如何让 joomla 的首页只包含一篇文章或一节？

> ID：14430021
> 
> 赞同：0
> 
> 时间：2013-01-20T22:24:41.880
> 
> 标签：joomla

目前，joomla 首页包含最新消息和几篇文章和列表，基本上我想将其布局更改为仅一篇特定文章。

更改菜单页面上的主页按钮属性并不能解决问题，因为这与首页不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:15:05.467

转到菜单管理器并找到默认菜单项。它标有星号。编辑该项目。如果它使用的是首页/特色布局，您可以通过更改参数准确地告诉它显示了多少特色文章。或者，您可以更改单篇文章或类别或任何您想要的菜单项。

# c# - 取消隐藏并激活隐藏的表单/应用程序

> ID：14430027
> 
> 赞同：0
> 
> 时间：2013-01-20T22:25:12.577
> 
> 标签：c#, winforms

我有一个应用程序，我想隐藏而不是关闭以便在后台运行。如果我隐藏它，当我重新启动应用程序时，如何在取消隐藏/重新激活当前正在运行的应用程序时终止新实例？我可以终止当前实例；

```
 string currPrsName = Process.GetCurrentProcess().ProcessName;
        //Get the name of all processes having the same name as this process name 
        Process[] theProcessWithThisName = Process.GetProcessesByName(currPrsName);
        if (theProcessWithThisName.Length > 1)
        {
            string message = "'" + currPrsName + ".exe'" + " is already running.\nOperation canceled";
            string caption = "ALREADY RUNNING";
            MessageBox.Show(message, caption, MessageBoxButtons.OK, MessageBoxIcon.Error);
            Environment.Exit(0);    //Terminate this instance
        } 
```

我尝试了各种方法来取消隐藏应用程序，但均未成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:44:23.720

我认为有一个很好的演练可以回答你所有的问题。看看： http: [//www.codeproject.com/Articles/32908/C-Single-Instance-App-With-the-Ability-To-Restore](http://www.codeproject.com/Articles/32908/C-Single-Instance-App-With-the-Ability-To-Restore)

# python - 如何从头开始编写词法分析器？

> ID：14430030
> 
> 赞同：3
> 
> 时间：2013-01-20T22:26:17.747
> 
> 标签：python, algorithm, lexical-analysis

我想从头开始为 python 编写一个词法分析器。但我不知道从哪里开始以及如何开始。对于初学者，我想假设我们将有一个 python 程序作为一组传递给分析器的字符串。分析器应该找出新行在哪里以及要查看的适当空格。如何找出python源代码中的新行？我已经阅读了 python 的词汇规范，我们可以使用基于堆栈的方法来解决带有空格的缩进，但不知道如何查看。它只是用 '\n' 进行正则表达式检查还是有任何算法确定这一点的方法？

我故意不想使用 lex、yacc 或 flex 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:35:10.727

我最近开发了一个用于查找 SQL 语句的解析器。我知道规则不同，但方法可能相似。我使用python开发解析器。第一步是查找标记开头的正则表达式。然后我将该列表传递给一个有限状态机，该状态机确定令牌代表的内容。

规则需要考虑换行符、分号和字符串以及可以跨行的注释。在 python 中，你会更关心换行和缩进。

一旦您能够解析出单个语句，那么您应该将它们传递给可以解析语句的函数，它可能会采用类似的方法。

[您可以在https://github.com/PeterWooster/SQL-Tools/blob/master/SQLStatements.py](https://github.com/PeterWooster/SQL-Tools/blob/master/SQLStatements.py)找到 SQL 解析器。这说明了查找令牌并使用 FSM 处理它们的方法。是的，它处理跨越换行符的字符串。

# php - 仅针对自然流量显示内容

> ID：14430037
> 
> 赞同：-1
> 
> 时间：2013-01-20T22:27:40.460
> 
> 标签：php

我想只为来自搜索引擎的访问者显示一些内容，你能帮帮我吗？:)

我已经有这个 php，但它只显示 google.com 但我想要整个 google 和 yahoo :)

```
if(substr((trim($_SERVER['HTTP_REFERER'])), 0, 23) == "http://www.google.com/")
{
    echo "Show what I want";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:41:08.250

作为起点，考虑使用[stripos](http://php.net/manual/pl/function.stripos.php)作为测试字符串是否包含另一个字符串的有效方法：

```
if (stripos($_SERVER['HTTP_REFERER'], '.google.') !== false 
      || stripos($_SERVER['HTTP_REFERER'], '.yahoo.') !== false) {
    echo "Show what I want";
} 
```

google 和 yahoo 域（例如 google.co.uk）有很多变体，因此您希望匹配的严格程度取决于您。

# c - 在 Cygwin shell 上运行链接的 C 目标文件（从 C 和 x86-64 程序集编译），没有输出？

> ID：14430039
> 
> 赞同：2
> 
> 时间：2013-01-20T22:28:08.303
> 
> 标签：c, assembly, cygwin, x86-64, output

试图处理我的汇编语言任务......

有两个文件，hello.c 和 world.asm，教授要求我们使用 gcc 和 nasm 编译这两个文件并将目标代码链接在一起。

我可以在 64 位 ubuntu 12.10 下很好地使用原生 gcc 和 nasm。

但是当我通过 cygwin 1.7 在 64 位 Win8 上尝试相同的事情时（首先我尝试使用 gcc 但不知何故 -m64 选项不起作用，并且由于教授要求我们生成 64 位代码，我用谷歌搜索发现一个名为 mingw-w64 的包，它有一个编译器 x86_64-w64-mingw32-gcc ，我可以使用 -m64 ），我可以将文件编译为 mainhello.o 和 world.o 并将它们链接到 main.out 文件，但不知何故，当我输入“./main.out”并等待“Hello world”时，什么也没有发生，没有输出没有错误消息。

因此，新用户无法发布图片，对此感到抱歉，这是 Cygwin shell 中发生的情况的屏幕截图：

![在此处输入图像描述](../Images/e976a709339dcc07321477af53724efe.png)

我只是一个新手，我知道我可以在 ubuntu 下完成任务，但我只是好奇这里发生了什么？

感谢你们

你好ç

```
//Purpose:  Demonstrate outputting integer data using the format specifiers of C.
//
//Compile this source file:     gcc -c -Wall -m64 -o mainhello.o     hello.c
//Link this object file with all other object files:  
//gcc -m64 -o main.out mainhello.o world.o
//Execute in 64-bit protected mode:  ./main.out
//

#include <stdio.h>
#include <stdint.h> //For C99 compatability

extern unsigned long int sayhello();

int main(int argc, char* argv[])
{unsigned long int result = -999;
 printf("%s\n\n","The main C program will now call the X86-64 subprogram.");
 result = sayhello();
 printf("%s\n","The subprogram has returned control to main.");
 printf("%s%lu\n","The return code is ",result);
 printf("%s\n","Bye");
 return result;
} 
```

世界.asm

```
;Purpose:  Output the famous Hello World message.

;Assemble: nasm -f elf64 -l world.lis -o world.o world.asm

;===== Begin code area 

extern printf    ;This function will be linked into the executable by the linker

global sayhello

segment .data    ;Place initialized data in this segment

          welcome db "Hello World", 10, 0
          specifierforstringdata db "%s", 10,

segment .bss    

segment .text   

sayhello:        

;Output the famous message
mov qword rax, 0       
mov       rdi, specifierforstringdata
mov       rsi, welcome
call      printf

;Prepare to exit from this function
mov qword rax, 0                                  
ret;                                              

;===== End of function sayhello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:07:48.633

```
;Purpose:  Output the famous Hello World message.
;Assemble: nasm -f win64 -o world.o world.asm

;===== Begin code area

extern _printf    ;This function will be linked into the executable by the linker
global _sayhello

segment .data    ;Place initialized data in this segment
          welcome db "Hello World", 0
          specifierforstringdata db "%s", 10, 0

segment .text

_sayhello:
;Output the famous message
sub       rsp, 32 ; shadow space
mov       rcx, specifierforstringdata
mov       rdx, welcome
call      _printf
add       rsp, 32 ; clean up stack

;Prepare to exit from this function
mov qword rax, 0
ret

;===== End of function sayhello 
```

When linked together with the C wrapper in the question and run in plain cmd window it works fine:

![screenshot](../Images/b64aecd50987da6ce367e34fee72e0a3.png)

# php - 在 PHP 中将两个整数转换为长整数

> ID：14430040
> 
> 赞同：1
> 
> 时间：2013-01-20T22:28:18.350
> 
> 标签：php, integer, type-conversion, long-integer

我有两个整数，我需要将它们转换为长整数。我完全不知道如何做到这一点。我需要转换的两个整数是：

```
INT 1: 60850985 
INT 2: 59150141 
```

我需要一种将两个整数转换为长整数的方法。如果你能发一个，那就太好了。

当我说转换为 long 时，我想知道您将如何在 PHP 中从 java 中执行相当于 (long) 的操作

* * *

让我在这里完全清楚：我从客户端接收两个 int，然后我需要将它们转换为 long，然后单个 long 将再次用作单个 int。

本质上，我需要取两个整数并将它们转换为一个整数。在 java 中如何做到这一点的一个例子是：

```
 long $intA = (long) readInt();
  long $intB = (long) readInt();
  return ($intA << 32) + $intB; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:43:48.100

PHP 将数字存储为整数或浮点数，其中整数的大小取决于平台（但通常是 32 位，有符号）。如果您需要表示更大的数字，您应该使用[BC 数学](http://php.net/manual/en/ref.bc.php)函数。

使用 BCM 添加两个数字就像：

```
$a = '60850985';
$b = '59150141';
echo bcadd($a, $b); 
```

或相乘：

```
$a = '60850985';
$b = '59150141';
echo bcmul($a, $b); 
```

编辑：

如果你想得到，它应该如何看起来像 1 补码的 64 位有符号整数（如果有溢出），那么你必须进行一些手动转换以将值转换为`-2^63 .. 2^63-1`范围内：

例如，对于非负值，您可以首先将其转换为`0 .. 2^64-1`：

```
$long = bcmod($value, bcpow('2','64')); 
```

然后如果它大于`2^63-1`然后减去`2^63`它，然后减去这个值`-2^63`。

对于负值，先添加`2^64`，直到值为正，然后执行上述步骤。

但仅当您想检查字符串编号是否溢出时才需要上述步骤。通常你不需要这个，可能你甚至不需要使用 BCM，因为你的数字很容易适合 PHP 的有符号 32 位整数数据类型（不需要转换，转换是自动的）：

```
$a = '123'; // $a is a string
echo $a + 1; // will write 124, $a gets converted into int 
```

如果你愿意，你可以强制转换：

```
$a = $a+0; 
```

或者

```
$a = (int)$a; 
```

编辑2：

您仍然可以使用 BCM 函数进行数学运算：

```
$long = bcadd($low, bcmul($high, bcpow('2','32'))) 
// this essentially means:
// $long = $low + $high * 2^32
// which is
// $long = $low + $high << 32 
```

然后，如果结果大于`2^63-1`您可以进行一些额外的 BCM 计算，如上所述将无符号整数转换为有符号整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:40:04.130

我使用了常规添加：

```
$int1 = 60850985;
$int2 = 59150141;
$result = $int1 + $int2;//120001126 
```

这是 PHP 手册中的一段话：

> 整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

如果您想处理大量数字，请使用 GMP ( [http://www.php.net/manual/en/book.gmp.php](http://www.php.net/manual/en/book.gmp.php) ) 或 BCMath ( [http://www.php.net/manual/en/book。 bc.php](http://www.php.net/manual/en/book.bc.php)）。

为了详细说明 AgentConundrum 所说的，没有必要在 PHP 中将整数转换为 long。PHP 是一种动态语言，这意味着一般来说，对于基本类型的操作，不需要强制转换（除非它是出于某种明确的目的——例如将浮点数转换为整数），因为 PHP 会为您处理它。

# oracle - 过程 - 仅在不存在时插入

> ID：14430041
> 
> 赞同：1
> 
> 时间：2013-01-20T22:28:22.953
> 
> 标签：oracle, plsql

我有插入城市名称（并创建下一个 ID）的程序。如果名称已经存在，如何不让将城市名称插入表？谢谢！有我的代码：

```
create or replace 
PROCEDURE PlaceName(
          town IN City.Name%TYPE)
AS
  id_C City.Id_City%TYPE;
BEGIN
  SELECT NVL(Max(c.Id_City)+1,1) INTO id_C
  FROM City c;
  INSERT INTO City
  VALUES(id_C, town);
End; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:29:14.260

我同意 Ben 的观点，`UNIQUE`即表上应该有一个约束（假设这是一个有效的约束），但这可以通过以下`MERGE`语句更简单地完成：

```
MERGE INTO city c
USING ( SELECT 1 FROM dual )
   ON c.name = town
 WHEN NOT MATCHED THEN INSERT ( id, name )
      VALUES ( my_sequence.NEXTVAL, town ); 
```

`USING`这里实际上并不需要该子句，但它对于合并语句是强制性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:45:32.657

不，仅当它不存在时才插入。这需要两个操作。您必须检查它是否存在，然后您必须插入记录。

正确的方法是在您的表上创建一个[唯一约束。](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1642)您可以按照文档中的说明内联执行此操作，或者如果您的表已经存在，您可以更改它以添加约束：

```
ALTER TABLE table_name
add CONSTRAINT constraint_name UNIQUE (city); 
```

然后，您在插入一个已经存在的城市时捕获引发的异常，然后对获得的信息做任何您想做的事情。

您还错误地增加了您的 ID。您应该使用[SEQUENCE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6015.htm#SQLRF01314)，它可以为您节省另一个 SELECT。

```
CREATE SEQUENCE city_seq
     START WITH <current max ID>
   INCREMENT BY 1; 
```

然后您的程序变为：

```
create or replace procedure PlaceName (
          town in city.name%type ) is

begin
  insert into city
  values(city_seq.nextval, town);

-- Catch the raised exception if the city already exists.
exception when dup_val_on_index then
   <do something>;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:04:21.890

```
insert into City
  select seq.nextval, town
from dual where not exists (select 1 from City where name = town); 
```

我强烈建议使用序列作为人工键。“选择 nvl(max())” 非常非常糟糕。如果你需要解释，问我:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T22:35:08.943

查找 Oracle MERGE 命令。

# android - Android总是使用“tinyALSA”吗？

> ID：14430045
> 
> 赞同：2
> 
> 时间：2013-01-20T22:28:38.613
> 
> 标签：android, audio

今天我发现，我可以编写一个`libaudio.so`并将其放在我的 Android 文件夹 /system/lib/ 中用于自定义音频处理。

我的设备，带有 Android 4.2 的 Galaxy Nexus 正在使用`tinyAlsa`并且有一个`libtinyalsa.so`. 所以我想我可以使用这个项目（来自 的父亲）来构建一个自[定义](https://github.com/broonie/tinyhardware)`tinyAlsa`的 libaudio.so：https://github.com/broonie/tinyhardware

但是：有谁知道，如果`tinyAlsa`是三星或 omap 特殊的东西，或者有任何更新的 android 版本那种类型的音频处理？那么，我的定制`libaudio.so`可以在其他手机上携带吗？

如果没有，有谁知道我在哪里可以找到`libaudio.so`适用于默认值的`ALSA`？我知道 Android 市场的“AlsaMixer”使用它，但我会自己编译它。

提前致以亲切的问候和感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T22:21:37.793

Android 设备并不总是使用 tinyalsa，并且没有要求或建议他们这样做。但是，所有 Nexus 设备都使用 tinyalsa，并且没有计划改变这一点。

*   来自 tinyalsa 作者

# r - if，else语句在R错误中的for循环中

> ID：14430048
> 
> 赞同：0
> 
> 时间：2013-01-20T22:28:47.817
> 
> 标签：r, if-statement, for-loop

对于代码的混乱，我深表歉意，但我对 R 比较陌生，当我输入以下代码时：

```
for(t in 2:M)
{
alphcandidate=mvrnorm(1,Gibbsalph[,t-1],as.numeric(csquared*4.93)*Zyesinv)

r=exp((-1/2)*(t(rep(1,105))%*%Z%*%(alphacandidate-Gibbsalph[,t-1])+sum((lnyield-X%*%Gibbsbeta[,t-1])^2)%*%(exp(-Z%*%alphcandidate)-exp(-Z%*%Gibbsalph[,t-1]))+t(alphcandidate-rep(0,m))%*%(solve(as.numeric(100)*diag(m)))%*%(alphcandidate-rep(0,m))-t(Gibbsalph[,t-1]-rep(0,m))%*%(solve(as.numeric(100)*diag(m)))%*%(Gibbsalph[,t-1]-rep(0,m)))

if(runif(1)<min(1,r)) {
Gibbsalph[,t]=alphcandidate
} else{
Gibbsalph[,t]=Gibbsalph[,t-1]
}

Dbetanawinv=t(X)%*%(diag(as.vector(1/(exp(Z%*%Gibbsalph[,t])))))%*%X+solve(as.numeric(100)*diag(n))
Dbetach=chol(Dbetanawinv)
Dbetachinv=solve(Dbetach)
Dbeta=Dbetachinv%*%t(Dbetachinv)
dbeta=t(X)%*%(diag(as.vector(1/(exp(Z%*%Gibbsalph[,t])))))%*%lnyield+(solve(as.numeric(100)*diag(n))%*%(rep(0,n)))  
     Gibbsbeta[,t]=mvrnorm(1,Dbeta%*%dbeta,Dbeta)
} 
```

我收到以下错误：错误：意外的“如果”在：“如果”

错误：“}”中出现意外的“}”

错误：“}”中出现意外的“}”

我不确定为什么这个 if 语句不能正常工作。对不起，我还不知道如何在这个网站上正确地格式化我的问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:31:35.993

您`)`在行尾 (?)缺少 a`r = exp(...`

粘贴到 RStudio 会显示缩进级别：

```
 r=exp((-1/2)*(t(rep(1,105))%*%Z%*%(alphacandidate-Gibbsalph[,t-1])+sum((lnyield-X%*%Gibbsbeta[,t-1])^2)%*%(exp(-Z%*%alphcandidate)-exp(-Z%*%Gibbsalph[,t-1]))+t(alphcandidate-rep(0,m))%*%(solve(as.numeric(100)*diag(m)))%*%(alphcandidate-rep(0,m))-t(Gibbsalph[,t-1]-rep(0,m))%*%(solve(as.numeric(100)*diag(m)))%*%(Gibbsalph[,t-1]-rep(0,m)))

        if(runif(1)<min(1,r)) {
          Gibbsalph[,t]=alphcandidate 
```

# html - WebSocket 进度

> ID：14430050
> 
> 赞同：2
> 
> 时间：2013-01-20T22:29:02.527
> 
> 标签：html, websocket, progress

我有一个案例，我可能需要通过 WebSockets 向客户端发送 500KB - 1MB 的数据。因此，我想知道是否可以跟踪客户端接收到多少数据的进度。这样，当通过较慢的连接进行连接时，应用程序似乎不会无响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:01:59.043

没有内置的方法可以做到这一点。（也就是说，虽然 websocket 协议允许对消息进行分段，但任何使用 Javascript 的 websocket API 的客户端都无法访问它，并且仅在浏览器接收到所有消息片段并将其内容组合到单个缓冲区时才被通知。）

但是，您可以通过将单个大消息分成几个较小的消息来指示应用程序代码的进度。

如果这样做，您还需要定义自己的简单协议。至少，这可能是一条初始消息，通知客户端后面的消息将被合并并加起来最多 x 个字节。或者，如果您事先不知道数据的大小，则在最终数据传输之后的第二条消息指示您的碎片消息的结束。

# networking - 何时在 Weka 中使用测试和训练集？

> ID：14430051
> 
> 赞同：3
> 
> 时间：2013-01-20T22:29:15.103
> 
> 标签：networking, testing, weka, bayesian

我已经和 Weka 合作了一段时间，在我对它的研究中，我发现很多代码示例都使用了测试和训练集。例如，对于离散化和贝叶斯网络，他们的示例几乎总是使用测试集和训练集来展示。我可能在这里缺少对数据处理的一些基本理解，但我不明白为什么似乎总是如此。我在一个项目中使用离散化和贝叶斯网络，对于它们两者，我都没有使用过测试或训练集，也不明白为什么我需要这样做。我在 BayesNet 上执行交叉验证，所以我正在测试它的准确性。我是否误解了测试和训练集的用途？？？哦，请使用最简单的术语；我对数据处理领域的经验还不是很丰富。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T23:16:52.043

训练和测试集背后的想法是测试*泛化错误*。也就是说，如果你只使用一个数据集，你可以通过简单地学习这个数据集来达到完美的准确性（这就是最近邻分类器所做的，`IBk`在 Weka 中）。通常，这不是您想要的——机器学习算法应该学习您提供的示例数据背后的一般概念。测试是否发生这种情况的一种方法是使用单独的数据进行训练和测试。

如果您使用交叉验证，则您使用的是单独的训练集和测试集。这只是一种将整个数据集划分为训练和测试的方法。例如，如果您进行 10 折交叉验证，您的整个数据将被分成 10 组大小相等的集合。其中九个被组合起来用于训练，剩下的一个用于测试。然后重复该过程，将九个不同的集合组合起来进行训练，依此类推，直到所有十个单独的分区都已用于测试。

所以训练/测试集和交叉验证在概念上做同样的事情，交叉验证只是通过对整个数据集进行平均来采取更严格的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:07:43.760

训练数据是指用于“建立模型”的数据。例如，如果您使用算法 J48（树分类器）对实例进行分类，则训练数据将用于生成表示“学习概念”的树，该树应该是概念的概括。这意味着学习的规则、生成的树、调整后的神经网络或其他任何东西；将能够获得新的（未见过的）实例并对它们进行正确分类（“学习概念”不依赖于训练数据）。

测试集是用于测试模型是否正确学习概念的数据的百分比（它独立于训练数据）。

在 WEKA 中，您可以运行一个执行，将您的数据集拆分为训练数据（在 J48 的情况下构建树）和测试数据（测试模型以确定已学习该概念）。例如，可以将 60% 的数据用于训练，40% 用于测试（确定需要多少数据进行训练和测试是数据挖掘的关键问题之一）。

但我建议您快速浏览一下交叉验证，这是一种在 WEKA 中实现的强大测试方法。这里已经很好地解释了： [https ://stackoverflow.com/a/10539247/1565171](https://stackoverflow.com/a/10539247/1565171)

如果您有更多问题，请发表评论。

# android - facebook fql 为 hometown_location 返回不一致的数据

> ID：14430052
> 
> 赞同：0
> 
> 时间：2013-01-20T22:29:23.290
> 
> 标签：android, facebook, mobile, facebook-fql

我基本上是在尝试为我所有的 Facebook 朋友返回家乡信息。这是我要执行的查询：

```
SELECT name, uid, hometown_location FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

但是，由于某种原因，此查询为大多数用户的 hometown_location 返回“null”。是的，我的权限设置正确。

让我们随机选择一个用户，比如 id = 805246。如前所述，上面的查询返回一个空的家乡位置。但是，以下查询正确地返回 hometowm_location：

```
SELECT name, uid, hometown_location FROM user WHERE uid = 805246 
```

和这个一样：

```
SELECT name, uid, hometown_location FROM user WHERE uid IN (805246, 211375, 3438) 
```

那么给了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:25:25.233

这是 API 的一个错误，在这里：[https ://developers.facebook.com/bugs/487611667944115](https://developers.facebook.com/bugs/487611667944115) **（请务必转到错误帖子并标记您能够重现它，以便它得到更多关注FB修复。）**

您可以在这里找到类似的堆栈溢出帖子：http: [//facebook.stackoverflow.com/questions/14350661/facebook-api-friend-location-object-being-returned-with-empty-string-for-id-and](http://facebook.stackoverflow.com/questions/14350661/facebook-api-friend-location-object-being-returned-with-empty-string-for-id-and)

本质上是一个批量请求......就像使用 /me/friends?fields=id 访问图形 API，location 返回一些用户的位置结果为空，而只有少数用户拥有真实的位置数据。如果您随后单独请求任何具有空位置的朋友，他们会返回完整结果。

这开始与 Graph Search 的发布一起发生，因此它可能是相关的。

# android - AsyncTask onPostExecute 不输出

> ID：14430054
> 
> 赞同：0
> 
> 时间：2013-01-20T22:29:43.840
> 
> 标签：android, android-asynctask

我没有达到`onPostExecute`一个`AsyncTask`班级。

`onClick`我在对话框中以这种方式调用任务：

```
new HelpfulTask().execute(passing); 
```

注意：当我将鼠标悬停在上面的代码上时，我会收到一条警告：

> 为 varargs 参数创建了一个 ArrayList 的通用数组。

我不确定这意味着什么，如果这会阻止我的任务甚至运行？

这是任务代码：

```
protected class UnHelpfulTask extends
            AsyncTask<ArrayList<String>, Void, ArrayList<String>> {

        ArrayList<String> passed;

        protected ArrayList<String> doInBackground(ArrayList<String>... passing) {
            passed = passing[0];

            String url_select = "http://www.---.com/---/bad.php";

            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
            param.add(new BasicNameValuePair("item", passed.get(0)));
            param.add(new BasicNameValuePair("text", passed.get(1)));
            param.add(new BasicNameValuePair("category", passed.get(2)));

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // read content
                is = httpEntity.getContent();

            } catch (Exception e) {

                Log.e("log_tag", "Error in http connection " + e.toString());
            }

            return null;
        }

        InputStream is = null;
        String result = "";

        protected void onPostExecute(Void v) {

            Toast.makeText(getContext(), "You have voted this down!",
                    Toast.LENGTH_SHORT).show();

        }

    } 
```

我在运行时没有收到任何错误，在 中`onPostExecute`，Toast 从不显示。 *（注意：这是 an 内部的一个内部类`ArrayAdapter.`）* 我还添加了一个 toast 以查看我`ArrayList`是否正确展开并将其放入，`onPostExecute`但它也从未显示。

如何测试以查看此任务是否正在运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:32:54.473

改变

```
protected void onPostExecute(Void v) { 
```

所以它是

```
protected void onPostExecute(ArrayList<String> arr) 
```

**或**更改您的 AsyncTask 声明，使其

```
extends AsyncTask<ArrayList<String>, Void, Void> 
```

`null`自从你回来后，这是一个更好的主意`doInBackground()`。您没有得到祝酒词的原因是因为您使用的方法与 AsyncTask 指定的方法不同。这就是我们通常使用`@Override`注释的原因 - 它强制检查实际覆盖，您需要在 AsyncTasks 等类中执行此操作。

# android - Android：应用程序中某些操作的主屏幕快捷方式

> ID：14430055
> 
> 赞同：2
> 
> 时间：2013-01-20T22:29:44.477
> 
> 标签：android, shortcut, homescreen

在我正在制作的一个 android 应用程序中，我希望允许用户在他们的主屏幕上放置快捷方式，这将使我的应用程序执行某些操作。到目前为止，我已经成功创建了快捷方式（它们是通过启动器创建的，而不是直接通过应用程序创建的）。但是，当我单击它们时，它会说

> 您的手机上未安装应用程序

我认为这意味着我创建了错误的快捷方式。我用来创建快捷方式的代码是：

```
Intent shortcutIntent = new Intent(ShortcutActivity.this, com.example.myapp.MyActivity.class);
ShortcutIconResource iconResource = Intent.ShortcutIconResource.fromContext(ShortcutActivity.this, R.drawable.clean);
Intent intent = new Intent();
intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, shortcutName);
intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconResource);
setResult(RESULT_OK, intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:39:19.990

自己解决了。意识到我必须在清单中的活动中添加以下内容：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
</intent-filter> 
```

# css - 调试时 MVC CSS 未在 Visual Studio 中呈现

> ID：14430057
> 
> 赞同：5
> 
> 时间：2013-01-20T22:29:46.227
> 
> 标签：css, asp.net-mvc, iis, asp.net-mvc-4

我有一个问题，当我编译 MVC 项目并在 [https://localhost/MyApp.] 上查看它时，CSS 没有正确呈现。按钮和背景图像没有显示。它工作了一次，然后由于某种原因它停止工作。页面没有缓存的东西？我使用firebug检查页面是否丢失，没有发现错误。Visual Studio 2010 设置中的某些内容需要更改或 IIS？

但是，当我使用我在 IIS 7.5 中设置的 [https://localhost:444] 网站而不是在（默认网站）区域中将它发布到单个网站时，css 似乎渲染得很好。

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T23:00:22.223

MVC 4 网站上发生的一个常见问题是当您拥有 css 包时发布和调试之间的差异。不一定是你的情况，但你有症状。

我将举例说明。

如果您有如下所示的捆绑包：

```
var styles = new StyleBundle("~/Content/css").Include(
            "~/Content/toastr.css",
            "~/Content/flags/stylesheets/flags16.css",
            "~/Content/flags/stylesheets/flags32.css",
            "~/Content/Site.css") 
```

在 flags16.css 你有：

```
background:url('flags/images/flags16.png'); 
```

其中使用文件`~Content/flags/images/flags16.png`

这将在发布模式下工作（web.config 中的编译调试 =“false”），因为捆绑中的所有 css 文件都将作为 1 个文件提供，`~/Content/css`其相对路径`'flags/images/flags16.png'`指向正确的文件。但是，在调试模式下，ASP.NET MVC 将禁用缩小，如果您`@Styles.Render("~/Content/css")`在视图中使用，它将呈现指向捆绑包中包含的每个文件的链接，因此会有：

```
<link href="/WorkOrders.Web/Content/flags/stylesheets/flags16.css" rel="stylesheet"> 
```

并且从该路径开始，图像的相对路径不正确，因此 flags16.png 中的图像将不会被渲染。

解决此问题的一种方法是，您需要将包含对图像的引用的 .css 文件移动到 bundle 指向的位置（在本例中为 ~/Content），因此在提供缩小和原始文件时它将具有相同的路径。

**更新**由于您的应用程序不是 mvc4，并且当您的应用程序不在您网站的根目录中时（即当它在 localhost/myapp 中时）您会遇到问题，那么您需要检查对图片的引用中的路径。您可能绝对引用了它们 ( `'/somepath/mypic.png'`)，当您的应用位于 时`localhost/MyApp`，路径需要为`localhost/MyApp/somepath/mypic.png`. `@Url.Content(~/somepath/mypic.png)`如果您从 cshtml 使用它，您可以通过将路径替换为 来解决这个问题。如果路径在 css 中，那么您需要将相对路径放置到您的图片中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-31T15:42:57.447

我一直在与同样的问题作斗争 - 找不到或渲染图像、脚本和 css。（Visual Studio 2013，Windows 8.1。项目从 Visual Studio 2010 转移。）

问题是由 Web.config 中的一行引起的：

```
<mimeMap fileExtension=".mp4" mimeType="video/mp4" /> 
```

似乎因为 IIS Express application.host 文件已经包含了这个 mimeMap 定义，IIS Express 无法应对再次定义它。

从 Web.config 中删除这一行完全解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T09:49:15.673

看起来您的网站已配置为使用 SSL。除了在本地运行时，您可能没有证书颁发机构信任的有效 SSL 证书，并且客户端浏览器拒绝下载静态资源。解决此问题的一种方法是将地址添加为受信任的。因此，将 URL 复制粘贴到浏览器地址栏中的一些 CSS 文件中：

```
https://localhost/MyApp/Content/Main.css 
```

您将看到有关无效证书的警告，您可以通过向浏览器添加例外来忽略该警告。添加异常后点击`Ctrl+F5`强制刷新，您的应用程序应该开始正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T16:08:45.993

当我遇到这个问题时，我发现我的所有 CSS 和脚本文件在浏览器 (Firefox 33.0.2) 中下载时都遇到了 HTTP 500 错误。

在任务管理器中杀死我的浏览器实例，然后重新开始为我解决了这个问题。

# php - 使用 jquery mobile 时未在 PHP 中设置 URL 变量

> ID：14430059
> 
> 赞同：0
> 
> 时间：2013-01-20T22:29:54.933
> 
> 标签：php, jquery, html, jquery-mobile

我有几页，当输入被提交时，它将转到一个检查 url 变量的 php 文件，这可能是 executeeffects.php?option=blockuser

但是当我转到该页面时，该页面只是在executeeffects php文件中显示“未定义”，它具有检查是否设置了变量的检查功能，如果是，它会回显一件事，如果不是，它会回显另一件事，但是我没有让它回显未定义，所以我不知道它来自哪里，代码如下

有人可以告诉我这是 jquery mobile 的问题还是我遗漏了什么？

块.php

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Ryan Kelly</title> 

<meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no"> 

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="effects.js"></script>
    </head> 
    <body> 

    <div data-role="page">

<div data-role="header">
    <h1>Ryan Kelly</h1>
</div><!-- /header -->

<div data-role="content">   
    <label for="basic">Username:</label>
     <input type="text" name="name" id="basic" value="" />
     <input type="text" name="name" id="blocked" value="" />
     <a href="executeeffects.php?option=block" data-role="button" class="button">Submit</a>

     <?php include('listusers.php'); ?>
 </div><!-- /content -->

     </div><!-- /page -->

     </body>
   </html> 
```

执行效果.php

```
<?php

if(isset($_GET['option'])){

echo 'something is set!';
} else {

echo 'nothing is set!';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:45:33.297

你说“**我有几页，当输入提交时，它会转到一个检查 url 变量的 php 文件，这可能是 executeeffects.php?option=blockuser** ”

这个：

```
<input type="text" name="name" id="basic" value="" />
 <input type="text" name="name" id="blocked" value="" />
 <a href="executeeffects.php?option=block" data-role="button" class="button">Submit</a> 
```

不会提交输入的值，除非您使用某种类型的**jQuery**，但您没有发布在这种情况下，这需要以不同的方式完成。

提交您需要使用的输入值`<form>`

# javascript - 如何在javascript for循环中的每次迭代后延迟？

> ID：14430060
> 
> 赞同：0
> 
> 时间：2013-01-20T22:30:00.703
> 
> 标签：javascript, loops, for-loop, settimeout, sleep

> **可能重复：**
> [如何在 JavaScript 循环中添加延迟？](https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop)

javascript for 循环中的每次迭代完成后（或之前）如何延迟？这是我的代码，但是一旦它设置颜色，我需要让它“休眠”6 秒，然后它才能移动到列表中的下一个。

```
for (i = 0; i < switchers.length; i++) {
    $('#switchers ol li:nth-child(' + (i+1) + ')').css('color', 'green');
} 
```

我曾尝试嵌套一个 setTimeout，但没有成功，在谷歌搜索后，我决定在这里问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:42:06.497

您可以创建一个通用函数，该函数允许您以超时间隔循环。您通常在“for”循环中拥有的代码将进入您作为最后一个参数传入的函数中。

像这样：

```
var loopTimeout = function(i, max, interval, func) {
    if (i >= max) {
        return;
    }

    // Call the function
    func(i);

    i++;

    // "loop"
    setTimeout(function() {
        loopTimeout(i, max, interval, func);
    }, interval);
} 
```

*   **i** : 递增变量
*   **max** : 循环多少次
*   **间隔**：超时间隔，以毫秒为单位
*   **func** : 执行每次迭代的函数（“i”作为唯一参数传递）

**示例用法：**

```
loopTimeout(0, switchers.length, 6000, function(i){
    $('#switchers ol li:nth-child(' + (i+1) + ')').css('color', 'green');    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:34:39.477

您可以使用`.each()`.

```
// timeout, in milliseconds to delay each iteration
var actionTimeout = 6000;

$('#switchers ol li').each(function(i, li) {
    setTimeout(function() {
        $(li).css('color', 'green');
    }, i * actionTimeout);
}); 
```

**[JSFiddle](http://jsfiddle.net/adDBu/)**

# java - libGDX scene2d TextFieldListener 在 Android 上没有收到 DELETE 键

> ID：14430064
> 
> 赞同：2
> 
> 时间：2013-01-20T22:30:44.913
> 
> 标签：java, android, textfield, libgdx

我无法在我的 TextField（libgdx 中的 scene2d ui 元素）侦听器中注册 android“删除”键。这是我定义文本字段的代码：

```
 nameTextfield = new TextField("", skin);
    nameTextfield.setMessageText("Some Text");

    uiStage.addActor(nameTextfield); 
```

我试过这个监听器只是为了解码 DELETE 键的键码：

```
 nameTextfield.setTextFieldListener(new TextFieldListener() {
        public void keyTyped (TextField textField, char key) {
            textField.setText(String.valueOf(Integer.valueOf(key)));

        }
    }); 
```

尽管它为几乎所有按钮提供了代码，但它甚至对 DELETE 按钮都没有反应。

我在 Nexus 7 上对此进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:16:04.510

从[TextField.java 源代码](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/scenes/scene2d/ui/TextField.java#L319)看来，“DELETE”（和“BACKSPACE”、“TAB”和其他几个键）是由 TextField 专门处理的。这些密钥永远不会转发给任何侦听器。

内置处理程序应该做“正确的事情”（从字符串内容中删除字符）。

删除是否以某种方式对您的情况不正确，导致您尝试对其进行解码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T08:45:05.010

最新的夜间版本的 libgdx 解决了这个问题，这个问题在以下链接中是已知和讨论的： [nexus button](https://stackoverflow.com/questions/14560344/android-backspace-in-webview-baseinputconnection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:12:00.060

那么 DELETE 按钮应该以不同的方式实现。

我建议尝试验证按下的键是否是 DELETE 按钮。如果是，您只需`textField.getText()`将最后一个字母剪掉，然后用 . 设置新文本`setText`。

我确信有一种更优雅的方法可以做到这一点，但这是我能想到的唯一解决方法。毕竟， DELETE 并不是真正可以放入的字符`setText`。是吗？：/

**后期编辑：**

在侦听器中打印`key`变量，在此处放置一个断点，然后查看分配给它的值。

然后还打印（或查看 javadoc）`KeyEvent.KEYCODE_DEL`（[此处的文档](http://developer.android.com/reference/android/view/KeyEvent.html)）以查看此值的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T06:21:45.813

解决此问题的最佳方法如下：

您将需要收听来自另一个侦听器的输入，例如同一屏幕。

```
MainMenuScreen implements Screen, InputProcessor 
```

那么你需要创建一个多路复用器来让舞台和监听器的输入都被监听。

```
multiplexer = new InputMultiplexer(); 
```

然后添加两个监听器：

```
 multiplexer.addProcessor(this);
        multiplexer.addProcessor(stage); 
```

现在您只需从此处删除该字段：

```
 @Override
    public boolean keyDown(int keycode) {
             Gdx.app.log("Debug:", "keydown : "+keycode);
            //DO SMOTHING LIKE
            // if(keycode==...) deleteTextField();
            return true;
} 
```

如果您对此解决方案有任何疑问，请告诉我。对我来说效果很好。

# java - GAE 后端/任务队列 - 如何在参数中传递用户凭据？

> ID：14430068
> 
> 赞同：2
> 
> 时间：2013-01-20T22:31:10.817
> 
> 标签：java, google-app-engine, serialization, google-drive-api, google-api-java-client

在我们的 GAE 应用程序中，我们在谷歌驱动器中处理用户的文档，并且由于此过程有时需要超过 30 秒，因此我们会收到截止日期异常，因为它是 GAE 前端实例。

我们想使用**后端实例**。问题是如何通过凭据（com.google.api.client.auth.oauth2.Credentials）来初始化 Google 驱动 API。

如何将用户凭据传递到 GAE 任务队列，然后传递到后端实例以便稍后在任务运行时使用它们？

```
com.google.api.client.auth.oauth2.Credentials is not serializable ... 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:09:30.433

您需要保留凭证的输入，以便您可以在后端处理程序中重新创建它。

这可以是授权码，也可以是您为换取授权码而获得的访问令牌和刷新令牌。它们都是字符串，所以应该很容易序列化。

如果这一切听起来不熟悉，我很想知道您最初是如何获得证书的。以下有用文档的链接：

*   [将授权代码交换为刷新和访问令牌](https://developers.google.com/google-apps/tasks/oauth-authorization-callback-handler#exchangecode)
*   [检索和使用 OAuth 2.0 凭据](https://developers.google.com/drive/credentials)

值得注意的是，最后一个链接中的示例代码特别包含一个您应该实现的方法来隐藏访问/刷新令牌：

```
/**
 * Retrieved stored credentials for the provided user ID.
 *
 * @param userId User's ID.
 * @return Stored Credential if found, {@code null} otherwise.
 */
static Credential getStoredCredentials(String userId) {
  // TODO: Implement this method to work with your database. Instantiate a new
  // Credential instance with stored accessToken and refreshToken.
  throw new UnsupportedOperationException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:06:24.790

我建议使用[AppEngineCredentialStore](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.13.1-beta/com/google/api/client/extensions/appengine/auth/oauth2/AppEngineCredentialStore.html)来存储访问和刷新令牌。请查看[calendar-appengine-sample](http://samples.google-api-java-client.googlecode.com/hg/calendar-appengine-sample/instructions.html)作为示例用法。[这是来自Utils.java](http://code.google.com/p/google-api-java-client/source/browse/calendar-appengine-sample/src/main/java/com/google/api/services/samples/calendar/appengine/server/Utils.java?repo=samples)的示例代码片段：

```
 static GoogleAuthorizationCodeFlow newFlow() throws IOException {
    return new GoogleAuthorizationCodeFlow.Builder(
        HTTP_TRANSPORT,
        JSON_FACTORY,
        getClientCredential(),
        Collections.singleton(CalendarScopes.CALENDAR))
        .setCredentialStore(new AppEngineCredentialStore())
        .setAccessType("offline")
        .build();
  } 
```

注意：我是[google-api-java-client](https://code.google.com/p/google-api-java-client/)项目的所有者。

# ios - 如何在 ios 中使用 tableviewcontroller 呈现分层数据

> ID：14430069
> 
> 赞同：1
> 
> 时间：2013-01-20T22:31:16.607
> 
> 标签：ios

我是 ios 开发的新手。

构建一个简单的应用程序，让用户可以浏览分层数据。例如，导航目录结构。

我们构建了一个 TreeViewController 并将数据源设置为第一级。不清楚的是如何初始化同一个控制器并推送它以便可以表示下一个级别。

我尝试了以下方法：

```
UIStoryboard *storyboard = [self storyboard];
CVBrowseViewController *selfController = [storyboard instantiateViewControllerWithIdentifier:@"browseTable"];

//Push the new table view on the stack
[self.navigationController pushViewController:self animated:YES];

[selfController setFolderList:children]; 
```

但是，这会引发错误：不支持多次推送同一个视图控制器实例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:02:29.217

这一行：

```
[self.navigationController pushViewController:self animated:YES]; 
```

应该：

```
[self.navigationController pushViewController:selfController animated:YES]; 
```

# python - 斜杠上的 Django 404

> ID：14430075
> 
> 赞同：1
> 
> 时间：2013-01-20T22:32:06.480
> 
> 标签：python, django

当我使用以下 urlconf 时：

```
url(
    r'^titles/(?P<order_item_id>\d+)/localized$',
    'metadataorder.title.views.localized_metadata',
    name='localized_metadata',
    ), 
```

有用。但是，如果我使用尾部斜杠（我**所有**其他 url 都使用），它是 404s。

```
url(
    r'^titles/(?P<order_item_id>\d+)/localized/$',
    'metadataorder.title.views.localized_metadata',
    name='localized_metadata',
    ), 
```

为什么会发生这种情况，我需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:34:25.137

这与命名冲突有关。我将网址更改为：

```
r'titles/(?P<order_item_id>\d+)/metadata/localized/$', 
```

它奏效了。

# c# - 同时更新多个图片框

> ID：14430078
> 
> 赞同：3
> 
> 时间：2013-01-20T22:32:17.660
> 
> 标签：c#, .net, winforms, picturebox

我有四个`PictureBoxes`（每个 PictureBox 代表一个骰子）和一个每 100 毫秒更改一次源图片的[计时器](http://msdn.microsoft.com/en-us/library/xdh6857z.aspx)（作为 加载在内存中`List<Bitmap> imagesLoadedFromIncludedResources`）。

![在此处输入图像描述](../Images/31404b35111cd3a010274e23378b6914.png)

代码：

```
private List<PictureBox> dices = new List<PictureBox>();

private void timer_diceImageChanger_Tick(object sender, EventArgs e)
{
    foreach (PictureBox onePictureBox in dices)
    {
        oneDice.WaitOnLoad = false;
        onePictureBox.Image = //... ;
        oneDice.Refresh();
    }
} 
```

我需要一次**更改**所有**图像**- 此时，您可以看到图像正在**从左到右更改，并且有一点延迟**。

我尝试了一个变体`Thread`（`PictureBox`使用[这个答案](https://stackoverflow.com/a/661706/752142)[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/30s4t80c(v=vs.100).aspx)中的方法） - 它在视觉上稍微好一点，但并不完美。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T22:57:01.427

您可以尝试暂停表单的布局逻辑：

```
SuspendLayout();
// set images to pictureboxes
ResumeLayout(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:49:57.017

```
Parallel.ForEach
(
    dices,
    new ParallelOptions { MaxDegreeOfParallelism = 4 },
    (dice) =>
    {
        dice.Image = ...;
        dice.WaitOnLoad = false;
        dice.Refresh();
    }
); 
```

问题是 UI 控件只能从 UI 线程访问。如果要使用此方法，则必须创建 PictureBox 的副本，然后在操作完成后替换 UI 的。

另一种方法是创建两个 PictureBox，第一个位于另一个的顶部（隐藏后者）......您更改所有图像，然后，一旦处理完成，您就可以在后面迭代所有图像将它们放在顶部，这将减少延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:03:37.850

我会以不同的方式处理这个问题——我已经有一段时间没有玩过 WinForms 的东西了，但我可能会更好地控制图像的渲染。

在此示例中，我将图像全部放在一个垂直堆叠的源位图中，作为资源存储在程序集中：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private Timer timer;

        private Bitmap dice;

        private int[] currentValues = new int[6];

        private Random random = new Random();

        public Form1()
        {
            InitializeComponent();
            this.timer = new Timer();
            this.timer.Interval = 500;
            this.timer.Tick += TimerOnTick;

            this.dice = Properties.Resources.Dice;
        }

        private void TimerOnTick(object sender, EventArgs eventArgs)
        {
            for (var i = 0; i < currentValues.Length; i++)
            {
                this.currentValues[i] = this.random.Next(1, 7);
            }

            this.panel1.Invalidate();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (this.timer.Enabled)
            {
                this.timer.Stop();
            }
            else
            {
                this.timer.Start();
            }
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            e.Graphics.Clear(Color.White);

            if (this.timer.Enabled)
            {
                for (var i = 0; i < currentValues.Length; i++)
                {
                    e.Graphics.DrawImage(this.dice, new Rectangle(i * 70, 0, 60, 60), 0, (currentValues[i] - 1) * 60, 60, 60, GraphicsUnit.Pixel);
                }
            }
        }
    }
} 
```

如果有帮助，来源在这里：http: [//sdrv.ms/Wx2Ets](http://sdrv.ms/Wx2Ets)

# java - 如何使用 XML Framework Simple 生成以下 XML 文件

> ID：14430079
> 
> 赞同：2
> 
> 时间：2013-01-20T22:32:18.677
> 
> 标签：java, xml, simple-framework

如何使用 Simple 生成具有以下结构的 XML 请求文件？

```
<?xml version="1.0" encoding="UTF-8"?>
<ft>
    <request clientId="123" apiName="api_search_location_stops_nearby" apiVersion="2.0">
        <client clientId="123"/>
        <requestType>api_search_location_stops_nearby</requestType>
        <outputCoords>WGS84</outputCoords>
        <fromCoordName>WGS84</fromCoordName>
        <fromType>coords</fromType>
        <fromWgs84Lat>48.22</fromWgs84Lat>
        <fromWgs84Lon>16.39</fromWgs84Lon>
    </request>
</ft> 
```

生成零件`<request> ... </request>`很容易，但是如何添加 XML 打开标记`<?xml version="1.0" encoding="UTF-8"?>`和`<ft>`结束标记`</ft>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T22:53:41.043

如果您已经能够生成`<request>...</request>`标签，我假设您已经有一个`Request`具有正确字段的对象等等，所以实际上它真的很简单..

```
@Root
public class Ft {
    @Element
    private Request request;

    // constructor, getter, setter if needed
} 
```

为了生成 XML prolog，您需要`Formatter/Serializer`使用[`Format(String)`构造函数](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/stream/Format.html#Format%28java.lang.String%29)创建自己的：

```
Serializer serializer = new Persister(//
    new Format("<?xml version=\"1.0\" encoding= \"UTF-8\" ?>"));
Ft ft = new Ft(); 
ft.setRequest(myRequest);
serializer.write(ft, new File("ft.xml")); 
```

# wget - 我如何使这个 wget 进程不在后台运行

> ID：14430080
> 
> 赞同：0
> 
> 时间：2013-01-20T22:32:26.740
> 
> 标签：wget

现在我的 wget 是：

```
wget -Ncq -e \"convert-links=off\" --load-cookies /dev/null --tries=50 --timeout=45 --no-check-certificate \"$download\" -O $prefix$title.webm & 
```

它在后台运行，我不希望它在后台。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:34:22.753

```
wget -Ncq -e \"convert-links=off\" --load-cookies /dev/null --tries=50 --timeout=45 --no-check-certificate \"$download\" -O $prefix$title.webm #& 
```

`&`发送到后台 `#`是评论

# svn - TortoiseSVN - 如何在自定义深度结帐中结帐额外项目

> ID：14430084
> 
> 赞同：28
> 
> 时间：2013-01-20T22:33:16.227
> 
> 标签：svn, tortoisesvn

我正在运行 TortoiseSVN，我们的主干大约 6GB。

我最初检查了一个分支并选择了“选择项目”以仅选择我需要的项目（自定义深度）。

我发现我需要一些额外的文件，这些文件在初始自定义深度结帐时没有签出。我通常删除分支并重新签出文件。但这变得太耗时了，因为我们的后备箱太大了。

如何在自定义深度结帐中结帐额外项目。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-20T22:47:26.583

您只需在最后一个需要进行更深入结帐的文件夹中单击鼠标右键，从上下文菜单中单击**Tortoise SVN -> 更新到修订版**，您将获得与结帐时相同的窗口，您在*更新深度*下可以选择完全递归更新，或者在当前文件夹中选择要更新的项目。

# c++ - 在 ROI 中复制的图像不遵循相机 c++。如何解决这个问题？

> ID：14430086
> 
> 赞同：3
> 
> 时间：2013-01-20T22:33:30.697
> 
> 标签：c++, opencv, rotation, rectangles, roi

我在 C++ 语言上使用 opencv 和 Visual Studio 2010 在 Windows7 x64 上工作。

我创建了一个项目，在其中向我的相机展示了一个矩形区域（调用***squared_surface***）。这个区域是通过用opencv 文件`findSquare ()`和跟踪一个矩形来识别的。在这个矩形上，我创建了一个 ROI，并在那里复制了一个图像（我们称之为***copyed_image）***`drawSquares ()``squares.cpp`

 **我的问题是，当我旋转***squared_surface***（在相机前）时，***copyed_image***不会跟随它。

我想我需要使用 和 的功能`getPerpective ()`， `warpPerspective ()`但我不知道如何。谁能帮我？

这是代码：

```
int main(){
 vector<vector<Point> > squares;

 cv::VideoCapture cap(0);
 for (;;) {
    cv::Mat image;
    cap >> image;
    findSquares(image, squares);
    for (size_t i = 0; i < squares.size(); i++) {
    Rect rectangle = boundingRect(Mat(squares[i]));

    if((rectangle.width<=630)&& (rectangle.width >= 420) && (rectangle.height<= 490) &&(rectangle.height >= 250 )) {
        cv::Size dsize = Size(rectangle.width, rectangle.height);
        Mat img1 = imread("scacchiera.jpg");
    cv::resize(img1,img1,dsize,0,0, INTER_LINEAR);
        Rect roi (rectangle.x, rectangle.y,rectangle.width, rectangle.height);

    Mat imageRoi(image, roi);
       img1.copyTo(imageRoi);
       }
    } 
  drawSquares(image, squares);
  imshow("camera",image);
  if(waitKey(30) >= 0) break;
}
return 0;
} 
```

![在此处输入图像描述](../Images/3a22dee13633194c8db1c8f4f2edccb0.png) ![在此处输入图像描述](../Images/2f1c98eef65f8140e985193bd43b2acd.png)

谢谢！

**编辑。** 我正在考虑旋转**Copied_image**，所以它遵循**Squared_surface**，但我需要计算相机识别的矩形的旋转角度（在上图中以红色绘制）。有没有办法计算这个角度？

或者当我旋转 squared_surface 时，如何使**Copied_image**跟随**Squared_surface**？

请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:41:27.013

我想我找到了错误。`Rect rectangle = boundingRect(Mat(squares[i]));`这就是问题所在。您正在将变量创建`rectangle`为 中坐标的边界矩形`squares[i]`。所以你的代码总是试图找出边界矩形而不是实际的矩形。

尝试使用旋转矩形，而不是使用边界矩形。以下是如何使用它：[http ://www710.univ-lyon1.fr/~eguillou/documentation/opencv2/classcv_1_1_rotated_rect.html](http://www710.univ-lyon1.fr/~eguillou/documentation/opencv2/classcv_1_1_rotated_rect.html)

旋转矩形`RotatedRect (const Point2f &_center, const Size2f &_size, float _angle)`需要中心点位置、浮点角度和大小。由于您拥有所有坐标，我认为您可以使用基本数学和三角函数来计算矩形应如何旋转/定向的中心和角度。让我知道这是否有帮助。**

# java - Play Framework 2.1：在 Build.scala 中使用 play.api.Configuration

> ID：14430088
> 
> 赞同：12
> 
> 时间：2013-01-20T22:33:56.583
> 
> 标签：java, playframework, version, playframework-2.1

在[Play Framework 2: Read the application version defined in Build.scala](https://stackoverflow.com/questions/12369967/play-framework-2-read-the-application-version-defined-in-build-scala)的最佳答案中，建议在 .scala 中指定`conf/application.conf`并加载应用程序版本`Build.scala`号`play.api.Configuration`。我在`Play 2.1-RC2`构建时使用并收到以下错误消息：

```
[error] [...]/project/Build.scala:7: object Configuration is not a member of package play.api 
[error] val conf = play.api.Configuration.load(new File(".")) 
```

我认为这可能是由于 Play 2.1 的构建依赖项必须指定为 SBT 的插件，而`play.api.Configuration`不是 Play 的 SBT 插件的一部分。我猜我必须将 Play 的核心库包含在 中`project/plugins.sbt`，但我无法弄清楚如何。有任何想法吗？

（注意：如果我有足够的代表点，会在原始问题中发表评论）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T11:37:08.990

`2.1-RC2`如果您直接使用 typesafe 的配置库，而不使用 Play 的`Configuration`包装器，我就可以工作。[它是一个 Java API，因此它的使用与此答案](https://stackoverflow.com/a/12377155/897024)中描述的略有不同。

在`project/Build.scala`导入库中：

```
import com.typesafe.config._ 
```

并手动从文件中加载配置。需要调用`resolve()`来解决替换问题。

```
val conf = ConfigFactory.parseFile(new File("conf/application.conf")).resolve()

val appName    = conf.getString("app.name")
val appVersion = conf.getString("app.version") 
```

# java - java中的日期类型来填充MySQL数据库

> ID：14430090
> 
> 赞同：0
> 
> 时间：2013-01-20T22:34:16.047
> 
> 标签：java, mysql, jdbc

我的数据库（MySQL）中有一个日期类型（格式为 yyyy-mm-dd）的字段。我不使用什么数据类型将 MySql 的日期类型分配给 Java。我还必须将字符串转换为这种类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:45:10.620

使用 a`java.sql.Date`获取日期列的值：

```
java.sql.Date date = resultSet.getDate("theDateColumn"); 
```

要将字符串转换为 java.sql.Date，请使用 DateFormat 将字符串解析为 java.util.Date，然后将 java.util.Date 转换为 java.sql.Date：

```
String s = "01/28/2013";
DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
java.util.Date d = df.parse(s);
java.sql.Date date = new java.sql.Date(d.getTime()); 
```

# android - 为什么部署android应用程序时xalan.jar会崩溃eclipse

> ID：14430100
> 
> 赞同：2
> 
> 时间：2013-01-20T22:35:11.183
> 
> 标签：android, eclipse, out-of-memory, xalan

我正在在 Windows 7 64 位（8GB 内存）上运行的 Eclipse Juno 上开发一个 android 应用程序所以我有我的 android 项目，我将一些 jar 文件放在 /lib 文件夹中，以便我可以在我的应用程序中使用它们。这很好，直到我添加了作为 apache xml 解析器依赖项所需的 xalan.jar 文件。

当我尝试从 Eclipse 运行/部署我的应用程序以便它可以在我的手机上运行时，我开始在控制台中看到编译器警告，抱怨来自 xalan.jar 的类，然后 Eclipse 因内存不足堆空间异常而崩溃。

```
!ENTRY com.android.ide.eclipse.adt 4 0 2013-01-20 21:04:37.427
!MESSAGE Unable to execute dex: Java heap space
!STACK 0
java.lang.OutOfMemoryError: Java heap space
    at com.android.dx.ssa.SsaBasicBlock.getRopLabelSuccessorList(SsaBasicBlock.java:393)
    at com.android.dx.ssa.back.SsaToRop.convertBasicBlock(SsaToRop.java:299)
    at com.android.dx.ssa.back.SsaToRop.convertBasicBlocks(SsaToRop.java:260)
    at com.android.dx.ssa.back.SsaToRop.convert(SsaToRop.java:124)
    at com.android.dx.ssa.back.SsaToRop.convertToRopMethod(SsaToRop.java:70)
    at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:102)
    at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:73)
    at com.android.dx.dex.cf.CfTranslator.processMethods(CfTranslator.java:273)
    at com.android.dx.dex.cf.CfTranslator.translate0(CfTranslator.java:134)
    at com.android.dx.dex.cf.CfTranslator.translate(CfTranslator.java:87)
    at com.android.dx.command.dexer.Main.processClass(Main.java:487)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:459)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:398)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:422)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:333)
    at com.android.dx.command.dexer.Main.run(Main.java:209)
    at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:187)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:745)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:598)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618) 
```

我尝试在网上搜索，但我发现最接近的是 stackoverflow 问题[Eclipse crashing, getting heap exceptions - Out of Memory when trying to deploy an Android applicaiton](https://stackoverflow.com/questions/9212951/eclipse-crashing-getting-heap-exceptions-out-of-memory-when-trying-to-deploy) which instructs to increase the heap-space memory。我从 256m 到 1024 做的，我仍然得到错误。

我删除了 xalan.jar，一切正常部署。有什么解决办法吗？

**- - - - - - 编辑 - - - - - - -**

将最大内存更新为 2048 后

```
java.lang.OutOfMemoryError: GC overhead limit exceeded
    at com.android.dx.util.IntList.<init>(IntList.java:87)
    at com.android.dx.rop.code.RopMethod.calcPredecessors(RopMethod.java:174)
    at com.android.dx.rop.code.RopMethod.labelToPredecessors(RopMethod.java:95)
    at com.android.dx.ssa.SsaBasicBlock.newFromRop(SsaBasicBlock.java:158)
    at com.android.dx.ssa.SsaMethod.convertRopToSsaBlocks(SsaMethod.java:174)
    at com.android.dx.ssa.SsaMethod.newFromRopMethod(SsaMethod.java:104)
    at com.android.dx.ssa.SsaConverter.convertToSsaMethod(SsaConverter.java:45)
    at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:99)
    at com.android.dx.ssa.Optimizer.optimize(Optimizer.java:73)
    at com.android.dx.dex.cf.CfTranslator.processMethods(CfTranslator.java:273)
    at com.android.dx.dex.cf.CfTranslator.translate0(CfTranslator.java:134)
    at com.android.dx.dex.cf.CfTranslator.translate(CfTranslator.java:87)
    at com.android.dx.command.dexer.Main.processClass(Main.java:487)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:459)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:398)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:422)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:333)
    at com.android.dx.command.dexer.Main.run(Main.java:209)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:187)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:745)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:598)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:03:08.307

我给你找到了确定的东西。来自 www.xom.nu：

> **Java 1.3 和更早版本没有内置的 XML 解析器，因此在这些环境中，您还需要安装 XOM 的支持库。这些包括 xalan.jar、** xercesImpl.jar、normalizer.jar 和 xml-apis.jar，可以在 lib 目录中找到。与 JDK 捆绑的版本相比，XOM 附带的版本要快得多且错误更少，因此即使在 Java 1.4 及更高版本中您也可能希望使用它们。例如，
> 
> $ java -classpath xom-samples.jar:xom-1.1.jar:lib/xml-apis.jar:lib/xercesImpl.jar:lib/normalizer.jar:lib/xalan.jar nu.xom.samples.PrettyPrinter 文件名。 xml
> 
> 如果您不使用 nu.xom.xslt 中的任何类，则可以省略 xalan.jar。所有 Java 版本都需要 normalizer.jar。但是，它实际上仅由 Serializer 中的 setUnicodeNormalizationFormC() 方法使用。如果您不调用此方法，则可以在空间有限的环境中省略此存档。junit.jar 仅用于测试，XOM 正常运行不需要。

所以不要使用 xalan.jar。Android 的原生 javax.xml.transform 已经完成了所有这些工作（从 API 8 开始）。

顺便说一句，看起来你也可以放下一些其他的罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:40:30.367

此错误可能是由 JVM 的默认 Eclipse 配置引起的。确保向 JVM 堆添加更多空间。

```
-Xms512M -Xmx2048M 
```

以下是有关如何完成此操作的一些参考

[http://edwards.sdsu.edu/research/index.php/daniel/236-increasing-heap-size-in-eclipse](http://edwards.sdsu.edu/research/index.php/daniel/236-increasing-heap-size-in-eclipse)

[http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

此外，请仔细检查您的 ADT 插件和 Android SDK 工具是否已更新。

# ruby-on-rails-3 - Rails：获取嵌套资源的“新”路径

> ID：14430101
> 
> 赞同：7
> 
> 时间：2013-01-20T22:35:15.430
> 
> 标签：ruby-on-rails-3, url

我有一个嵌套资源，在我的路线中看起来像这样：

```
resource :reviews do
  resource :entries
end 
```

我正在尝试为新的入口路径创建一个链接，如下所示：

```
<%= link_to "New Entry", new_review_entry_path(@review) %> 
```

不幸的是，我不断收到此错误消息：

```
undefined method `new_review_entry_path' for #<#<Class:0x5150d78>:0x483c798> 
```

我检查了 rake 路线，结果发现路线应该复数为：

```
new_reviews_entries_path(@review) 
```

不幸的是，当我这样做时，我得到一个奇怪的网址：

```
/reviews/entries/new.1 
```

显然，这也行不通。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T22:48:13.490

是`resources`，不是`resource`。您的第一次尝试是正确的；）

```
resources :reviews do
    resources :entries
end 
```

您应该`resource`在资源“唯一”时使用。例如，如果用户有一个配置文件，你会这样做：

```
resources :users do
    resource :profile
end 
```

# php - PHP 如何正确托管大文件？

> ID：14430102
> 
> 赞同：2
> 
> 时间：2013-01-20T22:35:15.820
> 
> 标签：php, html, ftp, timeout, request

我目前正在使用以下 PHP 函数来允许用户选择一个文件然后下载它。这发生在 FTP 上。但是，如果用户选择了一个大文件，那么在下载过程中它会锁定服务器以接收任何其他请求。有什么方法可以在让 PHP 继续响应请求的同时托管文件？

我需要 PHP 来验证是否允许用户使用他们的凭据下载文件，因此我不能将其作为资产托管。该文件位于 FTP 服务器上。

```
function download($file) {
    $fileStream = "";
    if($this->get($file)) {
        //Send header to browser to receive a file
        header("Content-disposition: attachment; filename=\"$file\"");
        header("Content-type: application/octet-stream");
        header("Pragma: ");
        header("Cache-Control: no-cache");
        header("Expires: 0");

        $data = readfile($this->downloadDir . $file);
        $i=0;
        while ($data[$i] != "")
        {
            $fileStream .= $data[$i];
            $i++;
        }
        unlink($this->downloadDir . $file);
        echo $fileStream;
        exit;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:43:00.957

由于 PHP 是单线程的，因此您必须为每个请求创建一个结构。然后，不是一次只处理一个请求，您应该遍历结构并缓慢地同时处理所有请求（例如将几百 kb 发送到一个请求，然后转到下一个请求，等等）。

老实说，PHP 听起来并不适合做这项工作。为什么不使用专门构建的 FTP 服务器，例如 vsftp 或类似的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:17:06.450

PHP 不是此类工作的最佳解决方案，但它可以将工作委托给您正在使用的 Web 服务器。由于该文件与您的应用程序位于同一位置，因此可以正常工作。

[通常运行 PHP 应用程序（ Apache](https://tn123.org/mod_xsendfile/)、[lighttpd](http://redmine.lighttpd.net/projects/1/wiki/X-LIGHTTPD-send-file)和[nginx](http://wiki.nginx.org/XSendfile) ）的所有主要 Web 服务器都支持`XSendfile`.

要使用它，您必须首先在您的网络服务器中启用该功能（检查上面每个网络服务器的链接），然后在您的脚本中添加一个新标头：

阿帕奇：

```
header("X-Sendfile: $location_of_file_to_download"); 
```

轻量级：

```
header("X-LIGHTTPD-send-file: $location_of_file_to_download"); 
```

nginx：

```
header("X-Accel-Redirect: $location_of_file_to_download"); 
```

Web 服务器将从您的应用程序中捕获此标头，并将您的 PHP 响应的正文替换为该文件。当它将此文件提供给用户时，PHP 会畅通无阻并准备好为新用户提供服务。

（将保留其他标头，因此您可以保留 content-type 和 content-disposition 标头）

# video-streaming - 如何使用 GStreamer 转发 RTP 流？

> ID：14430104
> 
> 赞同：2
> 
> 时间：2013-01-20T22:35:29.627
> 
> 标签：video-streaming, gstreamer

在我的局域网中，我有一台 IP 摄像机和两台 PC。我能够记录和播放来自每台 PC 的流数据。

例如，要记录流数据：

```
gst-launch-0.10 rtspsrc location=rtsp://192.168.100.50/live.sdp latency=0 ! decodebin ! ffmpegcolorspace ! ffenc_mpeg4 ! avimux ! filesink location=sample.avi 
```

玩：

```
gst-launch-0.10 playbin uri=rtsp://192.168.100.50/live.sdp 
```

现在，我希望 PC1 根据 PC2 的要求接收和转发流数据。

GStreamer 可以吗？如果是，PC1 和 PC2 需要哪些命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T06:46:21.177

无需解码和编码即可直接转发..从而节省处理

rtspsrc 位置=rtsp://192.168.1.160:60661/test 延迟=0！rtph264depay！rtph264pay name=pay0 pt=96

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T23:01:00.367

嗯，问题解决了。

PC1 的管道：

```
gst-launch-0.10 rtspsrc location=rtsp://192.168.100.50/live.sdp latency=0 ! decodebin ! ffenc_mpeg4 ! udpsink host=192.168.100.95 port=51234 
```

PC2的IP地址：192.168.100.95

PC2 的管道：

```
gst-launch-0.10 udpsrc port=51234 ! decodebin ! ffmpegcolorspace ! autovideosink 
```

# html - 使用 jquery 从搜索结果中添加内容

> ID：14430105
> 
> 赞同：0
> 
> 时间：2013-01-20T22:35:34.373
> 
> 标签：html, ajax, jquery

我正在使用这个很酷的脚本[http://qpoit.com/marcofolio_demo/apple_search/](http://qpoit.com/marcofolio_demo/apple_search/)但是当我点击搜索结果时，我希望它作为 html 内容添加到我将使用的 id 中。我知道这是通过 $("#displayContent").html(data); 但是我需要我点击的搜索结果的内容，而不是找到的所有结果。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:56:36.967

搜索的 rpc.php 文件包含生成搜索输出的函数。在第 29 行，将内容更改为 JavaScript 函数，它会为您工作。

```
// Used in line 29 in rpc.php
echo '<a href="'.$result->url.'">';

// Change it to something like
echo '<a onclick="applyContent('.$result->url.')">' 
```

之后，返回 index.html（或您正在使用 apple-search 的文件），确保 jQuery 已加载并添加如下内容：

```
<script type="text/javascript">
// Use the same function name, as in the php-file
function applyContent (resultURL) {
    // Use jQuerys get-function to get the content of the file you've found in the search
    $.get(resultURL, function(data) {
        // Change '#finalResult' to the css-selector, of the element, which should contain the result at the end
        $('#finalResult').html(data);
    });
}
</script> 
```

单击搜索结果后，它应该使其成为#finalResult 的内容，或您选择的任何元素。

# java - TableLayout 中的 ScrollView

> ID：14430107
> 
> 赞同：0
> 
> 时间：2013-01-20T22:35:54.267
> 
> 标签：java, android, scrollview, tablelayout

我的整个活动是一个`TableLayout`. 我希望前几个`TableRow`在外面`ScrollView`并且总是可见的。然后我希望`ScrollView`启动并`TableRow`在`ScrollView`. 然后，我想要几个`TableRow`s 在`ScrollView`其中有按钮，这些按钮也始终可见且不滚动。

下面是我的代码的粗略草图。

```
<TableLayout>    
    <TableRow></TableRow>                       
    <TableRow></TableRow>        
    <TableRow>
        <ScrollView
            <TableLayout
                <TableRow></TableRow>
                <TableRow></TableRow>
            </TableLayout>
    </ScrollView>
   </TableRow></TableRow>
   <TableRow>
       <Button></Button>    
       <Button></Button>
   </TableRow>
</TableLayout> 
```

下面是我的实际代码。为了以防万一您想查看它，需要滚动很多代码。

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1"
    android:shrinkColumns="0"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="70dp"
    android:paddingBottom="50dp"
    android:background="@drawable/scroll" >    

    <TableRow
        android:id="@+id/header"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/category"
            android:layout_height="wrap_content"
            android:layout_width="0px"
            android:layout_weight="1"
            android:textStyle="bold"
            android:textSize="15sp"
            android:paddingTop="10dp"
            android:gravity="center_horizontal" />

        <TableLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <TableRow
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/points"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight=".25"
                    android:textSize="10sp"
                    android:gravity="left" 
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/percentage"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight=".3"
                    android:textSize="10sp"
                    android:gravity="left"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/total_score"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight=".45"
                    android:textSize="10sp"
                    android:gravity="left"
                    android:textStyle="bold" />
            </TableRow>
        </TableLayout>
    </TableRow>

    <View 
        android:layout_width="fill_parent"
        android:layout_height="1dp"       
        android:background="#000001" />

    <TableRow
        android:id="@+id/row3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/imageColumn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0" />

        <TextView
            android:id="@+id/questionColumn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".45"
            android:textSize="12sp"
            android:textStyle="bold|italic"
            android:gravity="center_vertical" />

        <TextView
            android:id="@+id/answerColumn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".3"
            android:textSize="12sp"
            android:textStyle="bold|italic"
            android:gravity="center_vertical" />

        <TextView
            android:id="@+id/verseColumn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".25"
            android:textSize="12sp"
            android:textStyle="bold|italic"
            android:gravity="center_vertical" />
    </TableRow>

    <TableRow
        android:id="@+id/row3a"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TableLayout
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TableRow
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q1Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q1Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q1Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q1Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row5"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q2Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q2Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q2Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q2Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row6"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q3Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q3Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q3Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q3Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row7"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q4Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q4Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q4Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q4Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row8"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q5Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q5Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q5Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q5Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row9"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q6Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q6Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q6Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q6Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row10"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q7Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q7Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q7Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q7Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row11"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q8Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q8Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q8Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q8Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row12"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q9Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q9Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q9Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q9Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>

                <View 
                    android:layout_width="fill_parent"
                    android:layout_height="1dp"       
                    android:background="#C2BEBF" />

                <TableRow
                    android:id="@+id/row13"
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:stretchColumns="0,1,2,3"
                    android:layout_weight="1" >

                    <ImageView
                        android:id="@+id/q10Image"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q10Question"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".45"
                        android:textSize="10sp"
                        android:paddingLeft="2dp"
                        android:paddingRight="2dp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q10Answer"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".3"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />

                    <TextView
                        android:id="@+id/q10Verse"
                        android:layout_width="0dip"
                        android:layout_height="wrap_content"
                        android:layout_weight=".25"
                        android:textSize="10sp"
                        android:layout_gravity="center_vertical" />
                </TableRow>
            </TableLayout>
        </ScrollView>
    </TableRow>

    <TableRow
        android:id="@+id/row14"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:stretchColumns="0,1"
        android:layout_weight="1" >

        <Button 
            android:id="@+id/mainmenuBtn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".33"
            android:textSize="10sp" />

        <Button 
            android:id="@+id/highscoresBtn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".33"
            android:textSize="10sp" />
        <Button 
            android:id="@+id/playBtn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".34"
            android:textSize="10sp" />
    </TableRow>
</TableLayout> 
```

下面是它输出的显示。在我尝试添加之前`ScrollView`，它都显示正确。我尝试添加的原因`ScrollView`是因为它的文本太多，我不得不使字体大小非常小以适应所有内容，但它不可读，因为它太小了。然后我决定把它做成 a`ScrollView`并使文本大小更大。

![在此处输入图像描述](../Images/6a0fc5dcba60fa2456813e5e03fbbda9.png)

写了很多，所以希望它有意义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:21:16.000

将整个活动包装在 LinearLayout 中，然后使用中间 TableLayout 上/周围的滚动视图，然后拥有三个单独的 TableLayout，这可能是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:31:53.430

*   采用父级相对布局
*   顶部有一个线性布局，可以封装你的几行这取决于你是选择tablelayout还是多个线性也可以完成工作
*   然后在底部取另一个线性，其中包含您需要的按钮
*   然后将 listview 放在可以滚动的 Lieanrs 之间。

我会更喜欢列表视图而不是滚动视图，因为它可以简化代码复杂性。

# php - 在 HABTM 关系中按标签排序帖子

> ID：14430109
> 
> 赞同：1
> 
> 时间：2013-01-20T22:36:11.173
> 
> 标签：php, cakephp, has-and-belongs-to-many

`Post`我已经正确建立了和之间的 HABTM 关系`Tag`。当用户导航到一个 URL 时，`http://site.com/tag/test`我想显示所有标记为`test`.

使用以下代码获取标签信息和所有具有该标签的帖子：

```
public function view($name) {
    $this->set('tag', $this->Tag->findByName($name));
} 
```

但是，它返回的帖子没有按其`created`列排序，它们似乎是在“先到先得”的基础上检索的。我试过这样做：

```
public function view($name) {
    $this->set('tag', $this->Tag->findByName($name, array(
        'order' => array('Post.created DESC')
    )));
} 
```

但是，这给了我一个 SQL 错误：

> 错误：SQLSTATE [42S22]：未找到列：1054 未知列“标记”。在“字段列表”中
> 
> SQL 查询： SELECT DISTINCT `Tag`。`` FROM`投资组合`.`标签`AS`Tag `WHERE`标签`.`名称` = 'test' LIMIT 1

有什么方法可以让我在查询中从最新到最旧排序帖子，还是我必须在我的控制器中重新格式化结果数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:40:13.880

您需要在`Post`模型上进行查找，然后强制从连接表到标签表的临时连接，设置条件`Tag.name = $name`并排序`Post.created DESC`

或者通过重新绑定一些模型。食谱中的示例：

```
$this->Recipe->bindModel(array(
    'hasOne' => array(
        'RecipesTag',
        'FilterTag' => array(
            'className' => 'Tag',
            'foreignKey' => false,
            'conditions' => array('FilterTag.id = RecipesTag.tag_id')
))));
$this->Recipe->find('all', array(
        'fields' => array('Recipe.*'),
        'conditions'=>array('FilterTag.name'=>'Dessert')
)); 
```

将其应用于您的案例（食谱 -> 发布和食谱标签 -> 帖子标签），然后添加您的排序

# java - JTA 与 PersistenceUnit

> ID：14430111
> 
> 赞同：3
> 
> 时间：2013-01-20T22:36:16.460
> 
> 标签：java, hibernate, jpa

可以`@PersistenceUnit`在 JPA 中与 JTA 一起使用吗？如果是这样，怎么可能？

根据[http://tomee.apache.org/jpa-concepts.html](http://tomee.apache.org/jpa-concepts.html)：

> 与`<persistence-unit transaction-type="RESOURCE_LOCAL">` *[...]*
> 
> *   您必须使用 EntityManagerFactory 来获取 EntityManager
> *   *[...]*
> *   EntityManagerFactory 只能通过@PersistenceUnit 注解注入（不是@PersistenceContext）
> 
> 与`<persistence-unit transaction-type="JTA">` *[...]*
> 
> *   EntityManager 只能通过@PersistenceContext 注解注入（不是@PersistenceUnit）

我有一个类似的代码，它同时使用 JTA `@PersistenceUnit`。但有时我`NullPointerException`在访问事务时遇到（定义为`@Resource`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:58:31.230

使用 JTA 意味着您将工作委托给容器。您可以使用`UserTransaction`. 您的报价包含您想知道的所有答案。用`PersistenceUnit`得到一个`EntityManager`不会工作。

如果您正在使用`RESOURCE_LOCAL`，您需要对交易本身负责，使用`EntityManager.getTransaction()`. 实体管理器由`EntityManagerFactory`. 要获得该工厂，您可以使用`PersistenceUnit`.

所以简单的答案是否定的，如果您依赖容器管理的实体管理器。

作为示例，请参见[http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html)

**Application Managed Entity Managers** =`RESOURCE_LOCAL`可以使用`UserTransaction`（它们是 JTA 的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T08:31:51.913

实体经理是什么意思？？？如果我是一个天真的程序员，我可以简单地解释一些管理实体的东西，实际上它的意思是一样的。

[![在此处输入图像描述](../Images/00674c8c165c1687994e0968e0d61819.png)](https://i.stack.imgur.com/OnAYo.png)

实体管理器是在实体管理器工厂的帮助下实例化的。与数据库的连接由实体管理器管理，即它提供对数据库执行操作的功能。因此我们可以说，如果应用程序需要多个数据库连接，将为特定数据库构建一个 EntityManagerFactory，它提供了一种构建多个 EntityManager 实例的有效方法（如果需要，即使是单个实体管理器实例也可以根据您可能的要求来工作选择多个实例）用于每个 HTTP 请求所需的数据库。我们将借助一个例子来理解这一点。假设我们有一个数据库：A，有一个关系表 B 和 C。所以对于 A，实体管理器工厂的一个实例将被实例化。现在，如果我们想要对表 B 执行任何更新并假设对表 C 进行删除操作，则可以实例化两个不同的实体管理器，或者可以对两者使用相同的实体管理器实例。实体管理器工厂本身的实例化被认为效率较低，但由于它是一次性活动，因此它是可管理的任务，因为实体管理器工厂一旦实例化，它将服务于整个应用程序实例化的实体管理器与持久性上下文相关联。

```
@PersistenceUnit(unitName = "MyDatabase")
EntityManagerFactory emf;
EntityManager entityManager = emf.createEntityManager(); 
```

或者

```
@PersistenceContext(unitName = "MyDatabase") 
private EntityManager entityManager; 
```

PersistenceUnit 注入一个 EntityManagerFactory，而 PersistenceContext 注入一个 EntityManager。除非您确实需要手动管理 EntityManager 生命周期，否则通常最好使用 PersistenceContext。EntityManagerFactory 定义了另一种实例化 EntityManager 的方法，该方法与工厂一样，将属性映射作为参数。当必须指定 EntityManagerFactory 的默认用户名和密码以外的用户名和密码时，此表单很有用：

```
Map properties = new HashMap(); 
properties.put("javax.persistence.jdbc.user", "kashyap");
properties.put("javax.persistence.jdbc.password","kashyap"); 
EntityManager em = emf.createEntityManager(properties); 
```

在持久性上下文中，管理实体实例及其生命周期。实体实例是指一个实体的实例，每个实体指定数据库中的关系表。实体管理器实际上是一个接口，它提供了创建和删除持久实体实例、通过主键查找实体以及查询实体的方法，因此这些功能一起分组在我们执行的操作下。修改数据库内容的操作需要活动事务。事务由从 EntityManager 获得的 Entity Transaction 实例管理。精确定义：- 实体管理器由持久性单元定义。持久性单元定义了由应用程序相关或分组的所有类的集合，并且必须在它们到单个数据库的映射中并置。下面我正在编写一个代码片段以便更好地理解：-

```
try {
        em.getTransaction().begin();
        // Operations that modify the database should come here.
        em.getTransaction
        /**
        *getTransaction() EntityManager's method Return the resource-level EntityTransaction object. See JavaDoc Reference Page
        */
        em.getTransaction().commit();
  }
  finally {
        if (em.getTransaction().isActive())
            em.getTransaction().rollback();
  } 
```

让我们按照 JPA 规范进行：- 1) 扩展与事务 - 范围：默认情况下，使用事务持久性上下文，这意味着所有更改都被刷新，并且所有托管实体在当前事务提交时都变得分离。扩展范围仅适用于有状态 EJB，它甚至非常有意义，因为有状态 bean 可以保存状态，因此可以说一种业务方法的结束并不一定意味着事务的结束。使用无状态 bean，它有一个不同的方面 - 我们有业务方法必须在业务方法完成时结束。===> 一种方法 = 一种交易；无状态 Bean 只允许事务范围的实体管理器您可以控制在 EntityManager 注入期间 EntityManager 是扩展的还是事务性的：-

```
@PersistenceContext (type = javax.persistence.PersistenceContextType.EXTENDED)
    EntityManager emng; 
```

默认情况下，它的 javax.persistence.PersistenceContextType.TRANSACTION Extended 和 Transaction Scoped PersistenceContext 仅在容器管理的 EntityManager 的情况下才允许使用。是时候加强一点了：容器管理与应用程序管理 2）容器管理与应用程序管理：

```
@PersistenceContext
EntityManager emng; 
```

上面的语句授权 Container 为你注入实体管理器，因此是 Container-Managed。或者，您可以使用 EntityManagerFactory 自己创建一个 EntityManager 但这次注入会有所不同 -

```
@PersistenceUnit
EntityManagerFactory emf; 
```

现在要获取您需要调用的 EntityManager

```
emf.createEntityManager(); 
```

在这里 - 您正在使用应用程序管理的持久性上下文。现在您负责创建和删除 EntityManager。在阅读下一段之前集中注意力，因为这就是纠结的上下文，我试图解决 - 如果你想控制创建的 EM，你可以使用 createEntityManager - 例如，如果你需要跨多个涉及的 bean 移动创建的 EntityManager trasaction - 容器不会为您执行此操作，并且每次调用 createEntityManager() 时，您都会创建一个连接到新 PersistenceContext 的 EntityManager。您可以将 CDI 用于 EntityManager 的共享。请继续关注 Entity Transaction - JPA 和 Resource-local，将发布关于它的详细讨论。希望它对上下文有一个简要的了解。＆随时发布查询。

[从这里](https://letslearnjava.quora.com/Java-Transaction-API-JTA-in-Entity-Transaction-Management)阅读第二部分

# c++ - 使用 std::accumulate，得到“参数太多”错误

> ID：14430117
> 
> 赞同：2
> 
> 时间：2013-01-20T22:37:02.543
> 
> 标签：c++, accumulate

`std::accumulate`应该能够接受三个或四个参数。在前一种情况下，只是当您想在容器中添加数字时；在后一种情况下，您想先应用一个函数，然后再添加它们。我编写了生成随机双精度向量的代码，然后对它们进行了一些处理：首先它使用 执行 x->x^2 变换`std::transform`，然后将它们与 相加`std::accumulate`，最后使用四个动作将这两个动作组合成一个-参数版本`std::accumulate`.

除第 3 步外，一切正常。查看[http://www.cplusplus.com/reference/numeric/accumulate/](http://www.cplusplus.com/reference/numeric/accumulate/)上的示例代码，我看不出有任何不应该工作的原因，但我编译时出现“参数过多错误”（我正在使用 XCode。出于某种原因，它没有告诉我行号，但我已将其范围缩小到 的第二种用法`std::accumulate`）。有什么见解吗？

```
#include <numeric>
#include <time.h>
#include <math.h>
using std::vector;
using std::cout;
using std::endl;

double square(double a) {
    return a*a;
}

void problem_2_1() {
    vector<double> original;

    //GENERATE RANDOM VALUES
    srand((int)time(NULL));//seed the rand function to time
    for (int i=0; i<10; ++i) {
        double rand_val = (rand() % 100)/10.0;
        original.push_back(rand_val);
        cout << rand_val << endl;
    }

    //USING TRANSFORM        
    vector<double> squared;
    squared.resize(original.size());

    std::transform(original.begin(), original.end(), squared.begin(), square);

    for (int i=0; i<original.size(); ++i) {
        std::cout << original[i] << '\t' << squared[i] << std::endl;
    }

    //USING ACCUMULATE
    double squaredLength = std::accumulate(squared.begin(), squared.end(), 0.0);
    double length = sqrt(squaredLength);
    cout << "Magnitude of the vector is: " << length << endl;

    //USING 4-VARIABLE ACCUMULATE
    double alt_squaredLength = std::accumulate(original.begin(), original.end(), 0.0, square);
    double alt_length = sqrt(alt_squaredLength);
    cout << "Magnitude of the vector is: " << alt_length << endl;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T22:39:06.553

[std::accumulate](http://en.cppreference.com/w/cpp/algorithm/accumulate)重载的第四个参数需要是**二元运算符**。目前您正在使用一元。

`std::accumulate`在容器中的连续元素之间执行二元运算，因此需要二元运算符。第四个参数*替换*了默认的二元运算加法。它不应用一元运算然后执行加法。如果你想对元素进行平方然后添加它们，你需要类似的东西

```
double addSquare(double a, double b)
{
  return a + b*b;
} 
```

然后

```
double x = std::accumulate(original.begin(), original.end(), 0.0, addSquare); 
```

# javascript - Windows 8 应用程序 - 单点登录应用程序 - 未加入域

> ID：14430118
> 
> 赞同：2
> 
> 时间：2013-01-20T22:37:10.297
> 
> 标签：javascript, authentication, windows-8, windows-runtime, windows-store-apps

我正在构建一个 Windows 8 应用程序，我将在其中使用 Password Vault 捕获和存储凭据。然后我想将它们用于对特定域的所有 HTTPS 请求。这对于单个请求来说很容易，但我希望它是无缝的。我无法在清单中使用企业身份验证功能，因为这些机器未加入域。我查看了 Web 身份验证代理，但这似乎是针对使用 OAuth 的。

我的问题是，有没有办法：

```
1) Enable Enterprise Authentication and white-list the domain to use
these credentials for (even though these machines are not domain joined)?

2) Use Web Authentication to somehow use
my credentials (that I capture during initial launch) for all HTTPS
requests without OAuth? 

3) If none of the above work, what is the
best way to use credentials that are in the Password Vault for all
HTTP requests to a specific domain, rather than pragmatically
submitting them with each request? (want this to be seamless so I
can write HTML without calling on this JavaScript function each
time.  Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T04:50:21.993

我认为这在 Windows 8 中是不可能的。您需要使用 `WinJS.xhr()`or为每个请求提交凭据`XMLHttpRequest.open()`，或者更新您的服务以支持 OAuth 或 OpenID。

# javascript - 播放 2.0.1 并设置 Access-Control-Allow-Origin

> ID：14430119
> 
> 赞同：13
> 
> 时间：2013-01-20T22:37:13.033
> 
> 标签：javascript, http-headers, xmlhttprequest, playframework-2.0

我有一个 Play 2.0.1 应用程序，我想使用托管在其他域上的 Javascript 来调用它。我的 Javascript 调用失败：

```
Origin http://mydomain.com is not allowed by Access-Control-Allow-Origin. 
```

我找到了许多如何在 Play 1 中设置正确的 HTTP 标头的示例，但没有找到 Play 2.0.1 的任何内容。阅读文档（http://www.playframework.org/documentation/2.0.2/JavaResponse）后，我尝试了以下操作以使工作正常：

```
public static Result myJsonWebService() {
  ...
  response().setHeader("Access-Control-Allow-Origin", "*");
  return ok(toJson(jsonObject));
} 
```

但我的 JS Web 服务调用仍然失败。

我需要做什么才能使它正常工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-11T13:44:24.710

仅对于 Scala 人来说，这是我目前正在使用的实现：

```
import play.api.mvc._
import scala.concurrent._
import play.api.http.HeaderNames._

/**
 * Action decorator that provide CORS support
 *
 * @author Giovanni Costagliola, Nick McCready
 */
case class WithCors(httpVerbs: String*)(action: EssentialAction) extends EssentialAction with Results {
    def apply(request: RequestHeader) = {
        implicit val executionContext: ExecutionContext = play.api.libs.concurrent.Execution.defaultContext
        val origin = request.headers.get(ORIGIN).getOrElse("*")
        if (request.method == "OPTIONS") { // preflight
            val corsAction = Action {
                request =>
                    Ok("").withHeaders(
                        ACCESS_CONTROL_ALLOW_ORIGIN -> origin,
                        ACCESS_CONTROL_ALLOW_METHODS -> (httpVerbs.toSet + "OPTIONS").mkString(", "),
                        ACCESS_CONTROL_MAX_AGE -> "3600",
                        ACCESS_CONTROL_ALLOW_HEADERS ->  s"$ORIGIN, X-Requested-With, $CONTENT_TYPE, $ACCEPT, $AUTHORIZATION, X-Auth-Token",
                        ACCESS_CONTROL_ALLOW_CREDENTIALS -> "true")
            }
            corsAction(request)
        } else { // actual request
            action(request).map(res => res.withHeaders(
                ACCESS_CONTROL_ALLOW_ORIGIN -> origin,
                ACCESS_CONTROL_ALLOW_CREDENTIALS -> "true"
            ))
        }
    }
} 
```

要使用它，只需按以下方式装饰您的操作：

```
def myAction = WithCors("GET", "POST") {
  Action { request =>
    ???
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T10:55:10.587

这里有一些背景信息...

*   1) http://www.html5rocks.com/en/tutorials/cors/ - 请注意，您需要阅读有关“不那么简单的请求”的内容，因为 JSON 属于此类。
*   2）http://stackoverflow.com/questions/9613210/cors-access-control-allow-origin-despite-correct-headers?rq=1
*   3) http://caniuse.com/#search=cors - 详细介绍支持 CORS 的浏览器
*   4）http://stackoverflow.com/questions/10748537/access-control-allow-origin-on-playframework（玩1不玩2）

所以这是我实现的：

由于不是那么简单的请求（参见上面的 1）进行飞行前调用，您需要将以下内容添加到路由文件中：

```
POST /url_to_json_webservice        controllers.myJsonWebServices.myJsonWebService
OPTIONS /url_to_json_webservice     controllers.myJsonWebServices.checkPreFlight 
```

然后在您的控制器中设置以下方法：

```
public static Result checkPreFlight() {
    response().setHeader("Access-Control-Allow-Origin", "*");       // Need to add the correct domain in here!!
    response().setHeader("Access-Control-Allow-Methods", "POST");   // Only allow POST
    response().setHeader("Access-Control-Max-Age", "300");          // Cache response for 5 minutes
    response().setHeader("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");         // Ensure this header is also allowed!  
    return ok();
} 
```

注意我可能在这里设置了比需要更多的标题，所以请检查你需要哪些！

还要记住将以下内容添加到返回实际 JSON 结果的控制器方法的末尾（如我上面的问题）：

```
public static Result myJsonWebService() {
  ...
  response().setHeader("Access-Control-Allow-Origin", "*");
  return ok(toJson(jsonObject));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-30T08:52:02.753

一个很好的方法是扩展动作：

```
package actions;

import play.*;
import play.mvc.*;
import play.mvc.Http.Context;
import play.mvc.Http.Response;

public class CorsAction extends Action.Simple {

public Result call(Context context) throws Throwable{
    Response response = context.response();
    response.setHeader("Access-Control-Allow-Origin", "*");

    //Handle preflight requests
    if(context.request().method().equals("OPTIONS")) {
        response.setHeader("Access-Control-Allow-Methods", "POST, GET, OPTIONS, PUT, DELETE");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept, Authorization, X-Auth-Token");
        response.setHeader("Access-Control-Allow-Credentials", "true");

        return ok();
    }

    response.setHeader("Access-Control-Allow-Headers","X-Requested-With, Content-Type, X-Auth-Token");
    return delegate.call(context);
}

} 
```

然后在你的控制器中添加这一行：

```
@With(CorsAction.class) 
```

然后所有 ok() 请求都将响应上述标头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-26T18:38:05.010

实现为 Scala 过滤器（播放 2.2.x）：

```
import scala.concurrent.ExecutionContext.Implicits.global
import play.api.mvc._
import play.api.mvc.Results._
import play.api.http.HeaderNames._

object Cors extends Filter {
  def apply(next: (RequestHeader) => Future[SimpleResult])(request: RequestHeader): Future[SimpleResult] = {
    val origin = request.headers.get(ORIGIN).getOrElse("*")
    if (request.method == "OPTIONS") {
      val response = Ok.withHeaders(
        ACCESS_CONTROL_ALLOW_ORIGIN -> origin,
        ACCESS_CONTROL_ALLOW_METHODS -> "POST, GET, OPTIONS, PUT, DELETE",
        ACCESS_CONTROL_MAX_AGE -> "3600",
        ACCESS_CONTROL_ALLOW_HEADERS -> s"$ORIGIN, X-Requested-With, $CONTENT_TYPE, $ACCEPT, $AUTHORIZATION, X-Auth-Token",
        ACCESS_CONTROL_ALLOW_CREDENTIALS -> "true"
      )
      Future.successful(response)
    } else {
      next(request).map {
        res => res.withHeaders(
          ACCESS_CONTROL_ALLOW_ORIGIN -> origin,
          ACCESS_CONTROL_ALLOW_CREDENTIALS -> "true"
        )
      }
    }
  }
}

object Global extends WithFilters(Cors) {...} 
```

# javascript - force.start (d3.js) 在后台工作吗？

> ID：14430120
> 
> 赞同：-1
> 
> 时间：2013-01-20T22:37:24.697
> 
> 标签：javascript, d3.js, force-layout

`force.start()`力布局如何工作？节点的位置是由后台进程（由 Start 启动）更新还是我必须自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:49:33.453

虽然文档不是那么清楚，但调用`start`足以让模拟开始。

[`force.start()`](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)( [source](https://github.com/mbostock/d3/blob/master/src/layout/force.js#L189) ) 根据您定义的节点和链接设置布局的内部状态。令人困惑的是，您还需要在更改节点或链接`start` *时调用。*

在幕后，`force.start()`调用`force.resume()`which call into `force.alpha()`which 代表您启动运行循环（反复调用`force.tick()`以推进模拟）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T22:47:03.850

你读过[文档](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)吗？在我看来，它好像是自动发生的——所以你不必担心它。

你真的试过这个吗？一般来说，SO问题应该与您遇到的特定问题有关，并且通常应该包含代码。

# mysql - 如果我添加另一列，Mysql DISTINCT 不起作用

> ID：14430121
> 
> 赞同：-3
> 
> 时间：2013-01-20T22:37:28.973
> 
> 标签：mysql, distinct

mysql> select DISTINCT title, id from myadmins;

```
+------+------------+
| id   | title      |
+------+------------+
|    1 | admin      |
|    2 | stack      |
|    3 | jeff       |
|    4 | admin      |
|    5 | stack      |
+------+------------+
1 row in set (0.00 sec) 
```

**编辑**

我想要的不是重复标题栏

```
+------+------------+
| id   | title      |
+------+------------+
|    2 | stack      |
|    3 | jeff       |
|    4 | admin      |
+------+------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:01:54.780

`DISTINCT`适用于整行数据。由于`ID`每一行都不同，因此您最终会得到重复的标题。

如果您需要`ID`，那么您可以使用聚合来获取`MAX(ID)`：

```
select max(id) id,
  title
from yourtable
group by title
order by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/dab7b/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:41:10.847

你会得到不同的（id，title）情侣。

行与`id=1 and title=admin`行不同`id=4 and title=admin`。

如果您只想从表中获得不同的标题：

```
select DISTINCT title from myadmins;

+------------+
| title      |
+------------+
| admin      |
| stack      |
| jeff       |
+------------+ 
```

# maven - 如何在maven中定义条件属性？

> ID：14430122
> 
> 赞同：18
> 
> 时间：2013-01-20T22:38:14.297
> 
> 标签：maven, maven-2

例如，如果有环境变量，我想将属性`Configuration`设置为，如果没有这样的环境变量，我想将属性设置为其他常量值。`${env:AAA}``AAA`

我如何在 Maven 2 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T22:46:07.043

好像您[有条件地激活了配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)...

```
<profiles>
  <profile>
    <activation>
      <property>
        <name>environment</name>
        <value>test</value>
      </property>
    </activation>
    ...
  </profile>
</profiles> 
```

当环境变量被定义为`test`以下命令中的值时，配置文件将被激活：

`mvn ... -Denvironment=test`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T14:53:59.793

如果系统属性不太可能被接受，您可以简单地在 POM 文件中定义该属性并在需要时覆盖：

```
<project>
...
  <properties>
     <foo.bar>hello</foo.bar>
  </properties>
...
</project> 
```

您可以在 POM 的其他地方通过引用来引用此属性`${foo.bar}`。要在命令行上覆盖，只需传递一个新值：

```
mvn -Dfoo.bar=goodbye ... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-21T13:15:25.053

您可以使用 maven-antrun-plugin 有条件地设置属性。示例设置`install.path`+ 回显值：

```
<plugin>
    <!-- Workaround maven not being able to set a property conditionally based on environment variable -->
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <phase>validate</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <exportAntProperties>true</exportAntProperties>
                <target>
                    <property environment="env"/>
                    <condition property="install.path" value="${env.INSTALL_HOME}" else="C:\default-install-home">
                        <isset property="env.INSTALL_HOME" />
                    </condition>
                    <echo message="${install.path}"/>
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# mysql - MySQL连接表问题

> ID：14430124
> 
> 赞同：0
> 
> 时间：2013-01-20T22:38:42.667
> 
> 标签：mysql

考虑到高尔夫比赛，我想计算一个球员有多少次让分盘被削减（handicap_adjustment = -1），但我也想包括根本没有被削减的球员。

```
PLAYER TABLE ...
PID Name
--- ----
1   Alan
2   Bob
3   Frank
4   Harry
5   Tom

CARD TABLE ...
PID HANDICAP_ADJUSTMENT
--- -------------------
1   -1
1   -1
2   0.2
2   0.2
2   0.2
2   0.2
3   0.2
3   0.2
4   -1
4   -1
4   -1
5   -1

RESULT I WANT IS ....
PID COUNT
--- -----
Alan   2
Bob    0
Frank  0
Harry  3
Tom    1 
```

查询的任何想法？

我可以在卡表中获得 handicap_adjustment = -1 的 pid 计数，但不确定如何将其返回给玩家查询，该查询返回所有玩家的计数：(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:43:40.870

```
SELECT p.name,a.count FROM players p
LEFT JOIN (SELECT pid,COUNT(*) AS count FROM handicap_adjustment GROUP BY pid WHERE handicap_adjustment = -1 ) a ON a.pid = p.pid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:54:09.290

您可以使用`COUNT`表达式`CASE`来获取总数。`CASE`仅包括具有`HANDICAP_ADJUSTMENT = -1`:

```
select p.name,
  count(case when HANDICAP_ADJUSTMENT = -1 then c.pid end) Total
from player p
left join card c
  on p.pid = c.pid
group by p.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/852041/4)

或者您可以使用`SUM()`来`CASE`获取总数：

```
select p.name,
  sum(case when HANDICAP_ADJUSTMENT = -1 then 1 else 0 end) Total
from player p
left join card c
  on p.pid = c.pid
group by p.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/852041/5)

两者都给出结果：

```
|  NAME | TOTAL |
-----------------
|  Alan |     2 |
|   Bob |     0 |
| Frank |     0 |
| Harry |     3 |
|   Tom |     1 | 
```

# regex - 没有前导零的正则表达式数字范围

> ID：14430127
> 
> 赞同：0
> 
> 时间：2013-01-20T22:39:06.943
> 
> 标签：regex

我正在尝试验证这种模式：

1.1.1.1 到 254.254.254.254，但没有前导零。所以 001.001.001.001 不应该匹配。

我有

```
/^([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-4])\.([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-4])\.([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-4])\.([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-4])$/ 
```

但这与前导零匹配。谁能推荐如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:43:34.797

每个元素将是：

```
[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4] 
```

零件分解：

```
(1-99)      (100-199)   (200-249)   (250-254) 
```

哦，还有一件事我应该提到......你需要处理`0`第2，第3和第4位的数字。`0`因此，只需在这些组中为单个数字添加一个额外的选项。我认为将零作为 IP 地址中的第一个数字是无效的（尽管如果它是掩码则有效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:46:09.690

这应该工作

```
^(([1-9][0-9]?|1[0-9]{2}|2[0-4][0-9]|25[0-4]))\.(?1)\.(?1)\.(?1)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T22:44:32.667

对于这样的重复模式，使用编号重复很方便。以下内容应与您所追求的相匹配

```
([1-9]\d{0,3}\.){3}[1-9]\d{0,3} 
```

编辑：我睡着了，错过了上限为 0.254 的部分。有机会我会更新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:10:17.867

尝试这个。

`([1-9]$|[1-9][0-9]$|[12][0-9][0-9]$)\.([0-9]$|[1-9][0-9]$|[12][0-9][0-9]$)\.([0-9]$|[1-9][0-9]$|[12][0-9][0-9]$)\.([1-9]$|[1-9][0-9]$|[12][0-9][0-9]$)`

# ios - 如何删除左 UIBarButtonItem 的背景

> ID：14430129
> 
> 赞同：2
> 
> 时间：2013-01-20T22:39:17.127
> 
> 标签：ios, uibarbuttonitem, uibarbuttonitemstyle

我试图删除左侧 UIBarButtonItem 的背景的背景。

![UIBarButtonItem](../Images/f8640ffff027a597f134367094a3a107.png)

我的图像只是带有线条的图标。但是有黑色背景。我的代码是：

```
paneViewController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"menuicon"] style:UIBarButtonItemStylePlain target:self action:@selector(navigationPaneBarButtonItemTapped:)];
paneViewController.navigationItem.leftBarButtonItem.tintColor = [UIColor clearColor]; 
```

我哪里错了？

更新：

```
UIImage *myImage = [UIImage imageNamed:@"menuicon"];
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton setImage:myImage forState:UIControlStateNormal];
myButton.showsTouchWhenHighlighted = YES;
myButton.frame = CGRectMake(0.0, 0.0, myImage.size.width, myImage.size.height);

[myButton addTarget:self action:@selector(navigationPaneBarButtonItemTapped:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *leftBarButton = [[UIBarButtonItem alloc] initWithCustomView:myButton];
paneViewController.navigationItem.leftBarButtonItem = leftBarButton; 
```

这对我有用。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T22:59:06.670

将对象创建为 UIButton（执行所有常规设置；框架、目标、背景图像...等），然后调用`initWithCustomView:`它`UIBarButtonItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T21:31:04.837

这也有效：

```
UIBarButtonItem *navButton = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"navbutton.png"]
                                                                  style:UIBarButtonItemStylePlain
                                                                 target:self
                                                                 action:@selector(buttonPressed)] autorelease];

NSArray *buttonArray = [NSArray arrayWithObjects:navButton, nil];

TransparentToolbar *toolbar = [[[TransparentToolbar alloc] initWithFrame:CGRectMake(0.0f, 0.0, 44.0f, 44.0f)] autorelease];
toolbar.items = buttonArray;

UIBarButtonItem *controls = [[[UIBarButtonItem alloc] initWithCustomView:toolbar] autorelease];
self.navigationItem.rightBarButtonItem = controls; 
```

# facebook - Facebook登录作为应用程序，访问令牌不起作用

> ID：14430130
> 
> 赞同：0
> 
> 时间：2013-01-20T22:39:18.687
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-access-token

我正在尝试通过 Ajax 从 Facebook 页面获取事件。

但是用户应该没有登录过程。出于这个原因，我试图通过遵循[此页面](https://developers.facebook.com/docs/howtos/login/login-as-app/)上的文档来实现“作为应用程序登录” 。

我通过正确获取访问令牌

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &client_secret=YOUR_APP_SECRET
   &grant_type=client_credentials 
```

但是，当我尝试使用此访问令牌查询 Facebook Graph API 时，我得到一个空结果集。

这是一个示例请求；

```
https://graph.facebook.com/FAN_PAGE/events?access_token=ACCESS_TOKEN 
```

我知道结果集不应该为空，因为使用 Graph Explorer 的相同请求会返回正确的值。

即使是这样的请求也 `https://graph.facebook.com/FAN_PAGE/events?access_token=ACCESS_TOKEN_FROM_GRAPH_EXPLORER`可以正常工作。

知道发生了什么吗？我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:01:47.347

实际上原因与访问令牌无关。原因是我想要获取事件的页面受到限制。这适用于不受限制的页面。

经过一番研究，我发现要阅读受限页面的事件（或帖子等），您需要一个用户访问令牌。您可以通过询问用户来获得此信息。（在登录流程中）

在不提示登录的情况下获取此数据的另一种解决方案是获取“页面访问令牌”。[您可以通过此](http://developers.facebook.com/docs/howtos/login/login-as-page/)链接生成页面访问令牌。

更多关于[访问令牌](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# ruby-on-rails - ActiveRecord 类似的地方可以找到

> ID：14430131
> 
> 赞同：0
> 
> 时间：2013-01-20T22:39:20.547
> 
> 标签：ruby-on-rails, rails-activerecord

Rails 有方法 where 返回 Relation 和 find 方法，它接受实体并基于主要的外观（你不应该明确指定它）。

有没有接受实体的 where 方法？

例如，`User.where(params[:id])`-> select .. from users where user.id = ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:44:19.283

如果你已经有了用户记录，为什么还需要用 where 再次找到呢？如果它是一个关联，你可以做类似的事情`User.where(:company_id => company.id)`，但你不能传递记录本身。

此外，`User.find(params[:id])`与 相同`User.where(:id => params[:id]).first`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:49:00.087

以下工作，但我不明白你为什么要寻找你已经拥有的对象？

```
User.where(:id => user) 
```

# python-2.7 - Apache 重启后 Python WSGI 应用程序无法重新加载？

> ID：14430134
> 
> 赞同：0
> 
> 时间：2013-01-20T22:40:11.587
> 
> 标签：python-2.7, mod-wsgi

我今晚开始发现 WSGI 并遇到了我无法完全理解的问题。我所做的是从 Apache + mod_wsgi 开始，并以嵌入式模式运行我的 WSGI“Hello World”应用程序。我刚刚将 WSGIScriptAlias 指向它，重新启动 Apache 并且“Hello World”就在那里。

然后我继续进行研究，发现如果我在嵌入模式下使用 WSGI 应用程序，我每次进行一些更改时都需要重新启动 Apache，所以我更改了 VirtualHost 配置，使其现在以守护模式运行：

```
WSGIDaemonProcess wsgi-app processes=2 threads=15
WSGIProcessGroup wsgi-app 
```

我已经重新启动了 Apache，但仍然有我的“Hello World”输出，尽管我完全改变了我的 WSGI 以输出不同的东西

```
def application(environ, start_response):
status = '200 OK'

if not environ['mod_wsgi.process_group']:
  output = 'EMBEDDED MODE'
else:
  output = 'DAEMON MODE'

response_headers = [('Content-Type', 'text/plain'),
                    ('Content-Length', str(len(output)))]

start_response(status, response_headers)

return [output] 
```

任何人都有任何解释或链接来帮助我找出问题所在？Apache 是否甚至在单独的进程下启动了 WSGI，或者重启后它仍然锁定在嵌入模式？我在将其更改为守护程序模式之前进行了此更改，所以这不应该是真的吗？如果是这样 - 即使 WSGI 触发了它自己的进程，它也必须将输出从“HelloWorld”更改为这个新的？

[抱歉，如果这个问题是初学者的错误 - 我只是在阅读http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)后无法理解它

再次感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:53:15.717

看起来这不是与 WSGI 相关的问题，而是我的 VM - 主机配置中的一些问题。更改后更改不会保存在 WSGI 文件中（为什么 - 我还不确定可能与运行此文件的进程有关）。无论如何 - 很抱歉浪费时间。

# android - 无法停止我的应用

> ID：14430137
> 
> 赞同：0
> 
> 时间：2013-01-20T22:40:39.533
> 
> 标签：android

我有一个应用程序，其中一项活动似乎无法停止。我有一个执行finish（）的按钮。无论我使用它还是使用手机上的后退按钮，应用程序都会继续运行。

通过在应用程序中点击它，我看到它仍在运行，并且启用了强制停止按钮。

这可能是什么原因造成的？谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:53:30.083

试试这个代码来停止你的活动/应用程序而不是完成（），

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:05:43.420

# 自杀（选项 1）

1.  调用***完成（）；***点击按钮
2.  将此行添加到 onDestroy 方法：

***android.os.Process.killProcess(android.os.Process.myPid());***

```
 public void onDestroy() {
        super.onDestroy();
        android.os.Process.killProcess(android.os.Process.myPid());
    } 
```

* * *

# 自杀（选项 2）

在按钮监听器中调用它

```
System.exit (0); 
```

# java - Java构造函数是否仅在参数化时调用？

> ID：14430139
> 
> 赞同：-3
> 
> 时间：2013-01-20T22:40:58.480
> 
> 标签：java, parameters, constructor, default-constructor

显然，Java 认为我的构造函数代码并不重要，因此它完全忽略它，然后当我尝试访问我认为已初始化的 ArrayList 时用 NullPointerException 对我大喊大叫。只有当我向构造函数添加任意参数时，Java 才会认为它值得一看。

```
import java.util.ArrayList;

public class DataManager {
    ArrayList<Variable> vars;

    public DataManager() {
        vars = new ArrayList<Variable>();
    }

    public void createVar(String type, String name, String strValue, int numValue) {
        vars.add(new Variable(type, name, strValue, numValue));
    }
} 
```

以及调用它的代码：

```
DataManager data = new DataManager();
data.createVar(...); 
```

变量类：

```
class Variable {
    String type;
    String name;
    String strValue;
    int numValue;

    public Variable(String type, String name, String strValue, int numValue) {
            this.type = type; this.name = name;
            this.strValue = strValue;
            this.numValue = numValue;
    }
} 
```

运行此结果

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 at Parser.start(Parser.java:25) at SudoCode.go(SudoCode.java:10) at SudoCode.main(SudoCode.java:6)

所以……有什么关系？为什么构造函数没有参数化时会被忽略？这不是很直观。这是某种我看不到明显含义的设计选择吗？如果有，请赐教。我应该添加一个任意参数以便执行构造函数，还是应该创建并显式调用一个专门用于初始化我的 ArrayList 的方法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T22:43:02.153

你的假设是错误的。如果不执行其构造函数，则无法实例化对象。

如果您定义一个没有构造函数的类，Java 将创建一个没有参数的隐式（“默认”）构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:01:43.083

如果可能，初始化类属性的最佳方法是在声明点。初始化将在构造函数中的代码之前执行，与您使用的构造函数无关。因此，如果您有多个构造函数，则可以节省代码行。在你的情况下使用：

```
public class DataManager {
    ArrayList<Variable> vars = new ArrayList<Variable>();

    public DataManager() {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T22:44:51.397

如果不定义构造函数，JAVA 使用默认构造函数：

```
public MyClass() {
} 
```

# google-play - Googleplay：我可以回答或发出评论吗？

> ID：14430141
> 
> 赞同：-1
> 
> 时间：2013-01-20T22:41:10.770
> 
> 标签：google-play

一位用户在 Google Play 上对我的应用发表了完全虚假的评论。在此之前，其他用户（更诚实，幸运的是）告诉了一些问题。尽管我在某处看到 Google 允许开发人员对评论给出答案，但我找不到任何方法来回答，或联系用户，甚至在评论明显错误时告诉谷歌。有没有人知道怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:45:39.973

这不是一个真正适合stackoverflow的问题。但无论如何回答评论是一个正在慢慢推出的新功能。目前，您必须成为“顶级开发人员”，尽管越来越多的开发人员正在慢慢获得该功能。所以现在你无能为力

# ruby-on-rails - 如何组织 HTML 表格中的数据字段？

> ID：14430143
> 
> 赞同：1
> 
> 时间：2013-01-20T22:41:17.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html

我正在构建一个视图来管理两个模型，`Doctor`并且`Schedule`.

我想创建一个`html`表来保存这些字段。每列（天）应保留八小时，以便用户友好。

例子：

```
---------------------------------------------------------------------------------------------
   Sunday   !   Monday   !   Tuesday   !   Wednesday   !   Thursday   !   Friday   !   ...   
---------------------------------------------------------------------------------------------
    hour1       hour1        hour1         hour1           hour1          hour1
    hour2       hour2        hour2         hour2           hour2          hour2
    ...         ...          ...           ...             ...            ...
    hour8       hour8        hour8         hour8           hour8          hour8
--------------------------------------------------------------------------------------------- 
```

_形式

```
<% @rows_per_column = 18 %>
<% @columns = 7 %>

<table class="table">
  <tbody>
    <tr>
    <th>Sunday</th>
    <th>Monday</th>
    <th>Tuesday</th>
    <th>Wednesday</th>
    <th>Thursday</th>
    <th>Friday</th>
    <th>Saturday</th>
    </tr>
    <% 0.upto(@rows_per_column).each do |row| %>
      <tr>
    <%= f.fields_for :schedules do |builder| %>     
        <% 0.upto(@columns - 1).each do |column| %>
        <% index = row + (column * @rows_per_column) %>
        <td><%= index %>

        <div class="field">
    <%= builder.label :day %>
    </div>

    </td>
        <% end %>
    <% end %>
      </tr>
    <% end %>
  </tbody>
</table> 
```

我的想法是通过一个数组为每一天和每一小时分配一个默认值，该表`Schedule`有一个 is_available 列来设置医生小时可用性（一个布尔值）。

我一直在尝试使用嵌套循环来解决这个问题，但我无法让它正常工作。关于如何实现这一目标的任何想法？

# javascript - 在js中使用正则表达式从字符串中提取正确的用户名

> ID：14430147
> 
> 赞同：1
> 
> 时间：2013-01-20T22:41:39.343
> 
> 标签：javascript, regex

我想从用户输入的字符串中提取用户名。问题是我不想只是简单地验证用户名，但我想向用户显示最终用户名是什么，即使用户输入了任何不允许的字符。

因此，例如，如果用户输入类似的`&%$User)(Nam-e`内容，它将显示`usernam-e`

有类似的问题，答案[正则表达式验证用户名](https://stackoverflow.com/questions/12018245/regular-expression-to-validate-username)，但不知何故，`Invalid group`当我尝试将它与 a `match`or`exec`函数一起使用时，它给了我一个关于 node.js 的错误。

无论如何，大多数在线示例仅根据正则表达式验证用户名，但实际上并未提供适当用户名的结果。

规则如下：

1.  仅包含字母数字字符、下划线、破折号和点。
2.  下划线、破折号和点不能位于用户名的末尾或开头（例如`_username`/ `username_`）。
3.  下划线、破折号和点不能相邻（例如 `user_-.name`）。
4.  下划线、破折号或点不能连续多次使用（例如 `user__name`）。

到目前为止，我只能通过使用`replace`函数次数来做类似的事情

```
value.replace(/[^\w-]*/g,'').replace(/^[^a-z]*/,'').replace(/-{2,}/g,'-').replace(/_{2,}/g,'_'); 
```

但这看起来不像是一个高效的代码，尤其是我实际上需要添加更多`replace`函数来提取适当的用户名。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:33:35.857

假设您希望名称以小写形式显示，如您的示例中所示：

```
function user( n ) {
    var name = n.replace( /^[^a-z]+|[^a-z\d_\-.]|[_\-.](?![a-z\d])/gi, '' );    
    if ( n != name ) {
        console.log( 'Username invalid' );
    }
    return name.toLowerCase(); 
}

user('&%$User)(Nam-e');    // Username invalid, usernam-e                                             
user('_Giedrius_one_');    // Username invalid, giedrius_one                                                                                                 
user('Giedrius--one');     // Username invalid, giedrius-one                                            
user('Giedrius-one');      // giedrius-one  
user('/.bob_/');           // Username invalid, bob 
```

# winapi - 哪种 Windows IPC 方法更适合短命令？

> ID：14430151
> 
> 赞同：0
> 
> 时间：2013-01-20T22:41:45.110
> 
> 标签：winapi, ipc, command-line-interface

我需要一种用于 2 个 Windows 应用程序（都在同一台机器上）的 IPC 方法。**如果我的应用程序是基于 CLI + windows service 的**，哪一个更好。

PS 我已经在单独的线程中实现了目标进程（CLI 应用程序）中的消息队列。并通过源进程（GUI 应用程序）发布我的消息`PostThreadMessage`。
所以。当两个应用程序都由同一个用户运行时 - 一切正常。当我在本地服务用户下通过任务计划程序运行我的目标应用程序时，我收到 1444 错误代码（错误的线程 ID）。
有任何想法吗？

来自 MSDN 的 PPS

> 此线程必须具有 SE_TCB_NAME 权限才能将消息发布到属于具有相同本地唯一标识符 (LUID) 但位于不同桌面的进程的线程。否则，函数将失败并返回 ERROR_INVALID_THREAD_ID。
> 
> 此线程必须与调用线程属于同一桌面或属于具有相同 LUID 的进程。否则，函数将失败并返回 ERROR_INVALID_THREAD_ID。

所以。我应该确定如何`SE_TCB_NAME`从我的源进程设置到我的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:30:39.800

WM_COPYDATA 消息或自定义消息代码（如果您不打算传输文本或二进制数据）将起作用。WM_COPYDATA 消息允许您传输二进制数据，Windows 会跨进程边界进行复制。

在 GUI -> CLI 应用程序中，您需要在 CLI 进程中创建一个不可见的窗口来接收消息（如果您希望消息被发送而不是从 GUI 应用程序发布）。如果您只是将消息从 GUI 发布到 CLI，那么 PostThreadMessage() 函数就足够了，并且不需要窗口。

在 CLI -> GUI 方向中根本没有复杂性，因为窗口已经（通常）存在于 GUI 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:07:31.133

还有一个不错的解决方案——来自 boost 库的[消息队列。](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue)

# java - 在 Java 中静默打开 HTTP 连接？

> ID：14430153
> 
> 赞同：-4
> 
> 时间：2013-01-20T22:41:57.097
> 
> 标签：java, http

我将如何以静默方式打开与 Java 中某个网站的 HTTP 连接？我试过`.openConnection()`了，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:47:41.643

你需要找出为什么`.openConnection()`不起作用。捕获该调用引发的异常并打印出异常的完整堆栈跟踪。这应该为您提供开始诊断所需的信息。

javadoc for[`URL.openConnection()`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection%28%29)是这样说的：

> *“需要注意的是，`URLConnection`实例在创建时并没有建立实际的网络连接。这只会在调用时发生`URLConnection.connect()`。”*

该调用可以显式或隐式发生；即当您尝试读取响应状态、标题或正文时。阅读有关 URLConnection 和 HttpURLConnection 的 javadocs 以了解更多详细信息。

所以这听起来像是`openConnection` *在*工作......但它并没有达到你的预期。

# matlab - nthroot --> 7throot: Matlab

> ID：14430156
> 
> 赞同：-2
> 
> 时间：2013-01-20T22:42:12.313
> 
> 标签：matlab

有人告诉我，“nthroot 是一个函数，可以为您提供实数的 n 次根。” 用 7 替换 n，我尝试了 '7throot(49)' 的变体，但无济于事。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:05:22.860

查看[nthroot](http://www.mathworks.com.au/help/matlab/ref/nthroot.html)的文档。

你需要使用`nthroot(49,7)`.

# qt - QGraphicsView 在 Qt 5.0 中不显示任何内容

> ID：14430158
> 
> 赞同：0
> 
> 时间：2013-01-20T22:42:29.973
> 
> 标签：qt

我是 Qt 5.0 的新手，我正在尝试在 QWidget 内使用大小为 700x400 的名为“missionView”的 QGraphicsView 来显示一个矩形。但是，在运行应用程序时，图形视图中没有显示任何内容。这是我正在做所有事情的 QWidget“MainView”的构造函数

```
MainView::MainView(QWidget *parent) :
QWidget(parent),
ui(new Ui::MainView)
{
ui->setupUi(this);
QGraphicsScene scene(0, 0, 500, 500);
QGraphicsRectItem* myrect = scene.addRect(QRectF(0,0,15,5),QPen(), QBrush());

ui->missionView->setScene(&scene);

ui->missionView->setVisible(true);
ui->missionView->show();
ui->missionView->update();
printf("QGraphicsScene scene's items: %d\n",scene.items().size());
    for (int i = 0; i < scene.items().size(); i++) {
        printf("%d\n",scene.items().at(i));
    }

} 
```

最后一个打印语句确实显示已添加一项，但仍然没有显示任何内容。我尝试过类似的方法，[但这](http://www.qtforum.org/article/25299/using-qgraphicsscene-and-qgraphicsview.html)太有用了。谁能解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:51:06.300

您正在堆栈上创建场景对象。因此，场景将在构造函数结束时立即被销毁，因此不会显示任何内容。在堆上创建场景和/或使其成为类成员，它应该可以工作。

# php - 如何在 wordpress 中检索图像链接（href 和 NOT src）？

> ID：14430159
> 
> 赞同：1
> 
> 时间：2013-01-20T22:42:34.133
> 
> 标签：php, wordpress

好的，所以我正在尝试修改一个显示图像的 wordpress 小部件，以便当您单击图像时，它应该指向图像的 href 属性中所述的 url。我一直试图让它工作一段时间......没有成功。请帮忙！

这是我所拥有的：

```
<a href="THE CODE I'M MISSING">
<?php echo wp_get_attachment_image( $attachment->ID, array( 370, 278 ) ); ?>
</a> 
```

谢谢各位！

# function - MATLAB 函数元素范围

> ID：14430160
> 
> 赞同：1
> 
> 时间：2013-01-20T22:42:34.390
> 
> 标签：function, matlab, range

很抱歉这个菜鸟问题，但我是 MATLAB 的初学者。我需要执行以下任务，但被卡住了。“编写一个接受三个参数 x、a、b 的函数，其中 x 是一个矩阵，a 和 b 是标量。该函数返回 x 中位于区间 [a, b] 中的元素数。” 这是我到目前为止所拥有的。

```
function y = count(x,a,b);
for value=a:b
    length(value)
end 
```

我需要在命令提示符下使用以下行调用该函数：

```
count(randn(20, 20), 0, 5) 
```

但是，我没有得到任何接近正确答案的东西。谁能指出我正确的方向？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:20:02.017

正如乔纳斯所建议的那样`nnz`，并且`sum`是比`numel(find(...))`,更快`sum`的选择，因此：

```
function y = count(x,a,b);
y = sum(x(:)>a & x(:)<b); 
```

# cross-browser - tasseo 身份验证失败

> ID：14430161
> 
> 赞同：0
> 
> 时间：2013-01-20T22:42:43.137
> 
> 标签：cross-browser, graphite

我想知道是否有人将[Tasseo](https://github.com/obfuscurity/tasseo#readme)用于他们的 Graphite 仪表板。我遇到了一些我不太明白的问题。基本上，Tasseo 轮询 Graphite 服务器以获取统计信息 - 如果您在 Graphite 服务器上启用了身份验证（http base auth），那么您必须将环境变量导出`GRAPHITE_URL`到`GRAPHITE_AUTH`运行 tasseo 的环境，即。如果您将 tasseo 作为 runit 服务运行，那么您的运行脚本应如下所示：

```
#!/bin/sh                                                                        

exec 2>&1                                                                        
export GRAPHITE_URL="https://graphite-url"                                      
export GRAPHITE_AUTH="user:password"                                
cd /app                                                                          
exec chpst -u tasseo bundle exec rackup -o 127.0.0.1 -p 5000 -s thin 
```

但我注意到的是，如果我没有在另一个选项卡中运行 Tasseo 的同一浏览器中对 Graphite 进行身份验证（通过运行，我的字面意思是运行，因为 Tasseo 只是一个完全内置在 javascript 中的 sinatra 应用程序，即它在您的浏览器），然后我无法显示任何图表。一旦我在同一个浏览器中对 Graphite 进行身份验证，一切正常。Tasseo 正在使用 CORS，即。它从 JavaScript 中轮询 Graphite，所以它可能会用它做点什么。

最烦人的是，每次我重新启动 tasseo 应用服务器时我都必须这样做 :-( 所以当我重新启动 tasseo 时，我必须重新加载 Graphite 页面 - 我假设这是重新验证？我也注意到，即使当我重新加载 Graphite 选项卡，Tasseo 工作了一段时间，然后过了一段时间（没有确切的措施）它停止工作 - 在 Chrome 的开发控制台中，我可以看到`OPTIONS`对 Graphite 的请求失败 - 所以`GET`请求也必须。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:33:28.700

如果有人在设置 Tasseo 时遇到这个问题，那么请确保您在 Graphite 服务器上使用自签名证书，那么他们必须受到运行 Tasseo 的 CORS java 脚本的浏览器的信任。否则，您会注意到上面描述的内容 - 一旦您将这些自签名证书设置为受信任，一切都会像魅力一样工作！

# php - 使用 PHP 在 HTML 表中显示 MySQL 结果

> ID：14430174
> 
> 赞同：3
> 
> 时间：2013-01-20T22:43:55.820
> 
> 标签：php, mysqli

**CodingBiz 更新：**

我把它放在我的代码中：

```
for($i=1;$i<=$numRows;$i++) {
    $output .= '<tr>';
    $row = $this->fetchAssoc($result);
    $colRow = $this->fetchAssoc($colResult);
    foreach($colRow as $colName) {
        $output .= "<td>".$row[$colName]."</td>";
    }
    $output .= '</tr>';
} 
```

代替

```
for($i=1;$i<=$numRows;$i++) {
    $output .= '<tr>';
    $row = $this->fetchAssoc($result);
    for($j=1;$j<=$colNumRows;$j++) {
        $colRow = $this->fetchAssoc($colResult);
        $output .= "<td>".$row[$colRow["COLUMN_NAME"]]."</td>";
    }
    $output .= '</tr>';
} 
```

这有什么问题吗？

**原帖：**

我正在 PHP 类中编写一个函数来在表中显示查询结果。我自己没有构建任何表格，我希望一切都使用 PHP 完成。到目前为止，这是我的代码：

```
function allResults($table,$cols) {
    if(isset($cols)) {
        $query = "SELECT $cols FROM $table";
    }
    else {
        $query = "SELECT * FROM $table";
    }
    $result = $this->query($query);
    $numRows =  $this->numRows($result);
    $colQuery ="SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA='shareride'  AND TABLE_NAME='$table'";
    $colResult = $this->query($colQuery);
    $colNumRows = $this->numRows($colResult);

    $output = '<table class="allResults">';
    $output .= '<tr>';
    for($i=1;$i<=$colNumRows;$i++) {
        $colRow = $this->fetchAssoc($colResult);
        $output .= "<td>".$colRow["COLUMN_NAME"]."</td>";
    }
    $output .= '</tr>';
    for($i=1;$i<=$numRows;$i++) {
        $output .= '<tr>';
        $row = $this->fetchAssoc($result);
        for($j=1;$j<=$colNumRows;$j++) {
            $colRow = $this->fetchAssoc($colResult);
            $output .= "<td>".$row[$colRow["COLUMN_NAME"]]."</td>";
        }
        $output .= '</tr>';
    }
    $output .= '</table>';
    return $output;
} 
```

不清楚时，`query`指`mysqli_query`，`numRows`指`mysqli_num_rows`，`fetchAssoc`指`mysqli_fetch_assoc`。数据库名称是“shareride”。

我知道我在这一行中遗漏了一些东西：

```
$output .= "<td>".$row[$colRow["COLUMN_NAME"]]."</td>"; 
```

但我只是不知道它是什么。现在，我得到了正确显示的所有表格列标题，并且得到了正确数量的内容行，但是我无法用数据库中的实际数据填充这些行。

我错过了什么？任何帮助将**不胜**感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:04:01.867

从同一结果集中获取数据和列名

```
 <?php
  $i = 0;
  $colNames = array();
  $data = array();
  while($row = ***_fetch_assoc($res)) //where $res is from the main query result not schema information
  {
     //get the column names into an array $colNames
     if($i == 0) //make sure this is done once
     {
        foreach($row as $colname => $val)
           $colNames[] = $colname;
     }

     //get the data into an array
     $data[] = $row;

     $i++;
  }

 ?> 
```

**更新：@YourCommonSense 建议替换上面的代码，它工作起来，简单且更短 - 一种获取列名/数组键的方法，无需像我一样循环**

```
 $data = array();
  while($row = mysql_fetch_assoc($res))
  {
     $data[] = $row;
  }

  $colNames = array_keys(reset($data)) 
```

像以前一样继续：打印表格

```
 <table border="1">
 <tr>
    <?php
       //print the header
       foreach($colNames as $colName)
       {
          echo "<th>$colName</th>";
       }
    ?>
 </tr>

    <?php
       //print the rows
       foreach($data as $row)
       {
          echo "<tr>";
          foreach($colNames as $colName)
          {
             echo "<td>".$row[$colName]."</td>";
          }
          echo "</tr>";
       }
    ?>
 </table> 
```

测试结果

![在此处输入图像描述](../Images/dddff1b267ff8c3ecaf56ae0a58d709b.png)

您可以看到我如何将数据检索与表生成分开。它们现在相互依赖，您可以通过使用静态数据填充数组来测试没有数据库的表生成

你也可以把它们做成单独的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T05:24:18.150

1.  **切勿**将您的数据库处理代码与 HTML 输出代码混用。这是两个**完全**不同的问题。让你的 allResults 函数只返回带有数据的数组，然后你可以让另一个函数以奇特的方式打印（而**不是**在数据库处理程序类中）。
2.  您不需要信息架构来获取列名 - 您已经在返回的数组键中拥有它。
3.  您也不需要 numRows - 使用 while() 和 foreach()
4.  **永远不要**像您那样直接将任何内容插入查询`$cols`- 最终会导致错误和注入。
5.  这样的函数，不接受查询的某些参数，**绝对没有意义**，特别是在从 mysql 迁移到 mysqli 的上下文中 - 你将使用它作为一个老式的 mysql 查询插入变量，而不是占位符。因此，它使迁移完全无用。
6.  要知道“代码有什么问题”，必须**运行**它，而不是观看。运行和调试您的代码，输出关键变量并确保您可以看到发生的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:02:35.250

我会尝试用类似的东西替换数据部分：

```
while($row = $this->fetchAssoc($colResult))
{
  echo "<tr>";
  foreach($row as $value)
  {
    echo sprintf("<td>%s</td>",$value)
  }
  echo "</tr>";
} 
```

我知道这不是一个正确的答案，但真的很难阅读该代码恕我直言

# bash - 如何循环 sed 以获取变量

> ID：14430175
> 
> 赞同：1
> 
> 时间：2013-01-20T22:44:11.797
> 
> 标签：bash, sed, while-loop

我有一个 15000 行的 CSV 文件。从列表中我想删除不需要的产品/制造商。我有一个制造商列表和源 CSV 文件。

我发现 sed 是合适的，但我在循环中徘徊。

```
while read line
do
    unwanted = $
sed "|"$unwanted|d" /home/arno/pixtmp/pixtmp.csv >/home/arno/pixtmp/pix-clean.c$
done < /home/bankey/shopimport/unwanted.txt 
```

任何帮助表示赞赏。

输入文件：

耗材；Inktpatronen voor 打印机；Inkt voor 打印机；B0137790；HP；Pakket 2 inktpatronen No339 - Zwart + Papier Goodway - 80 g/m² - A4 - 500 vel；Dit pakket van 2 inktpatronen nr 339 zijn ontworpen voor uw HP 打印机 enleveren afdrukken van kwaliteit.;47.19;6.99;47.19;http://pan8.fotovista.com/dev/8/5/32150358/l_32150358.jpg;库存;0.2;0.11201;9.99;;C9504EE;0;;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:52:56.813

我将`sed`分两步使用：

1.  `sed`从不需要的信息创建脚本。
2.  将创建的脚本应用到数据文件。

那可能是：

```
unwanted=/home/bankey/shopimport/unwanted.txt
datafile=/home/arno/pixtmp/pixtmp.csv
cleaned=/home/arno/pixtmp/pix-clean.csv

sed 's%.*%/,&,/d%' $unwanted > sed.script
sed -f sed.script  $datafile > $cleaned

rm -f sed.script 
```

第一次调用`sed`只需将描述不需要的记录的每一行的内容替换为一个`sed`命令，该命令将删除它作为数据行中间的逗号分隔字段。如果您还必须在开头或结尾处理不需要的字段，那么您必须更加努力。如果可能嵌入斜杠、逗号、引号等，您还必须更加努力。第二次调用`sed`将第一次创建的脚本应用于数据文件，生成清理后的文件。

您可以通过确保脚本文件名是唯一的，并在进程中断时捕获脚本文件来改进它：

```
tmp=$(mktemp /tmp/script.XXXXXX)
trap "rm -f $tmp; exit 1" 0 1 2 3 13 15 # EXIT, HUP, INT, QUIT, PIPE, TERM

unwanted=/home/bankey/shopimport/unwanted.txt
datafile=/home/arno/pixtmp/pixtmp.csv
cleaned=/home/arno/pixtmp/pix-clean.csv

sed 's%.*%/,&,/d%' $unwanted > $tmp
sed -f $tmp $datafile > $cleaned

rm -f $tmp
trap 0  # Cancel the exit trap 
```

使用 GNU `sed`，但不使用 Mac OS X (BSD) `sed`，您可以避免中间文件：

```
unwanted=/home/bankey/shopimport/unwanted.txt
datafile=/home/arno/pixtmp/pixtmp.csv
cleaned=/home/arno/pixtmp/pix-clean.csv

sed 's%.*%/,&,/d%' $unwanted |
sed -f - $datafile > $cleaned 
```

这告诉第二个`sed`从标准输入读取它的脚本。如果您有`bash`版本 4.x（在 Mac OS X 上不是标准版本），则可以使用进程替换：

```
unwanted=/home/bankey/shopimport/unwanted.txt
datafile=/home/arno/pixtmp/pixtmp.csv
cleaned=/home/arno/pixtmp/pix-clean.csv

sed -f <(sed 's%.*%/,&,/d%' $unwanted) $datafile > $cleaned 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:33:44.643

`sed`不如`awk`. 例如，假设您的输入文件和不需要的术语列表是用空格分隔的，您可以简单地执行以下操作：

```
awk 'NR==FNR { a[$0]++ } NR != FNR && !a[$1]' undesired input 
```

这将打印出文件“输入”文件，省略第一列与文件中的一行匹配的任何行`undesired`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:40:52.127

您必须确保每个循环循环都将前一个循环的输出文件作为输入文件，否则您将继续用原始文件的内容减去最后一个不需要的记录来覆盖输出文件。

如果您的`sed`命令支持内联编辑（选项`-i`），您可以这样做：

```
cp /home/arno/pixtmp/pixtmp.csv /home/arno/pixtmp/pix-clean.csv
while read line; do
  sed -i "/$line/d" /home/arno/pixtmp/pix-clean.csv
done < /home/bankey/shopimport/unwanted.txt 
```

否则，您必须自己处理临时文件：

```
cp /home/arno/pixtmp/pixtmp.csv /home/arno/pixtmp/pix-clean.csv
while read line; do
  sed "/$line/d" /home/arno/pixtmp/pix-clean.csv >/home/arno/pixtmp/pix-clean.c$
  mv -f /home/arno/pixtmp/pix-clean.c$ /home/arno/pixtmp/pix-clean.csv
done < /home/bankey/shopimport/unwanted.txt 
```

# authentication - IIS 的身份验证问题

> ID：14430181
> 
> 赞同：0
> 
> 时间：2013-01-20T22:44:36.820
> 
> 标签：authentication, iis, iis-6

使用 IIS 6

我有默认的网站，可以在用户连接时对域进行身份验证。

我创建了第二个网站siteb，将主机（a）记录放入DNS，只要我使用匿名访问，我就可以浏览到它，当我选择Windows身份验证时，它会失败......

不知道我在这里缺少什么...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:48:59.060

如果您使用的是集成 Windows 身份验证，这不仅仅是 IIS。您已经在 DNS 中创建了“siteb”，它允许您的用户连接到它，所以这很好。但是，当他们的浏览器从 Active Directory 请求“siteb”的 Kerberos 票证时，AD 可能会响应它找不到“siteb”。您可以使用 Wireshark 验证这一点。

解决方法是添加“siteb”（以及您希望用户访问该站点的任何其他排列）作为 AD 中服务器计算机帐户的附加 servicePrincipalName。您可以使用“setspn.exe”实用程序来完成此操作。它应该在您的域控制器上可用。如果没有，您可以从[Windows 2003 Support Tools](http://www.microsoft.com/en-us/download/details.aspx?id=15326)安装它。

在 DC 上使用 setspn 添加 UPN 别名的一些示例是：

```
setspn.exe –A HTTP/siteb <server hostname> 
setspn.exe –A HTTP/siteb.acme.com <server hostname> 
```

这应该立即生效。最后一步是确保浏览器“信任”新网站名称。在 Internet Explorer 中，要自动发生 IWA，服务器名称应列在受信任的站点或 Intranet 区域中。

当然，您可以通过让第二个网站以相同名称在不同端口上运行来避免所有这些喧嚣，例如：`http://sitea:81`

# opencv - OpenCV CV findHomography 断言错误 - 计数器 => 4

> ID：14430184
> 
> 赞同：5
> 
> 时间：2013-01-20T22:44:51.890
> 
> 标签：opencv, homography, ransac

我目前正在完成我的兴趣点检测器评估工具。在最后的步骤中，我发现了一个令人困惑的错误。

```
Mat findHomography(InputArray srcPoints, InputArray dstPoints, int method=0, double ransacReprojThreshold=3, OutputArray mask=noArray() ) 
```

`srcPoints`和`dstPoints`是存储匹配关键点的`vector<Points2f>`对应点。到目前为止没有什么特别的 - 就像在教程中一样。

但是当我使用 RANSAC 并且`vector<Points2f>`在 [0, ... , 4] 范围内时，我得到一个断言错误，而不是计数器应该大于或等于四。

**问题1：**算法是否需要至少四个点来描述什么属于当前模型并创建共识？

**问题 2：**是否有关于此的任何文档？（我看了看[文档](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomogr#cv.FindHomography)和[教程](http://docs.opencv.org/opencv_tutorials.pdf)。）

[请注意，我已经看过这个问题](https://stackoverflow.com/questions/8520250/opencv-cvfindhomography-runtime-error)。但对于 RANSAC 的行为，并没有令人满意的答案。还是我应该接受这种方法至少需要四个点才能找到单应性？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T00:38:28.863

A homography cannot be computed with less than 4 pairs of points. That is because with only 3 points there is a perspective ambiguity. Picture a triangle

```
a

b        c 
```

in image 1\. In image 2 the points have been transformed to look like this

```
a

b    c 
```

The distance between b and c has been cut in half. Unfortunately you don't know if that is because point c got closer to your or farther from you. With a 4th point the difference becomes clear.

```
a        d

b        c 
```

Here is a square in image 1

```
 d

a        

b    c 
```

here d and c rotated towards you

```
a     

     d
b    c 
```

and here they rotated away from you.

I don't see this requirement in the openCV documentation but if you find any resources on homography calculation you won't have to read very far before you find this requirement and a more rigorous proof of 4 points being sufficient.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T08:56:01.830

`srcPoints.size() >= 4`RANSAC 用于在更大的集合或对应关系中（即当）选择 4 对匹配点。这就是为什么如果`srcPoints.size() <=4`.

您至少需要 4 个对应关系，因为单应矩阵`H`有 8 个自由度，因此需要 8 个线性方程才能找到解。由于每对点都会生成两个线性方程（使用 x 和 y 坐标），因此您总共需要至少 4 个对应关系。

# javascript - 渲染图像操作哪个更快：HTML5 画布元素，或使用 JS/jQuery 操作 DOM 元素的 CSS？

> ID：14430191
> 
> 赞同：0
> 
> 时间：2013-01-20T22:45:14.960
> 
> 标签：javascript, jquery, css, html, canvas

如果我有多个（可能多达十几个）图像要对其进行更改位置、调整大小、淡入和淡出以及旋转等操作，我认为我的选项是 Flash（我真的不想使用） , `<canvas>`, 或者很多`<img>`标签和jQuery。

我确信这取决于很多因素——浏览器及其布局引擎，其中之一——但我想知道是否有可能概括这些方法中的一种可能比另一种更快。

我对浏览器的兼容性不太感兴趣——这是一个艺术项目——所以我真正关心的是速度，因为我以前看到过 jQuery 动画变得不稳定，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:32:13.370

如果您需要现代浏览器，那么为了获得最佳性能，请使用[CSS3 过渡](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)。

这些将在可能的情况下卸载到 GPU，并让浏览器完全自主地处理淡入淡出、旋转等。

如果您只需要触发操作，请使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:19:59.057

正如您所说，这取决于浏览器。js/jQuery 方式适用于除旋转之外的所有浏览器。HTML5 Canvas 不适用于旧浏览器，例如 IE 6、7、8（请参阅[http://caniuse.com/#feat=canvas](http://caniuse.com/#feat=canvas)）。Flash 可能无法在大多数手机上运行，​​需要下载。

# c - C语言将XML转换为JSON

> ID：14430192
> 
> 赞同：3
> 
> 时间：2013-01-20T22:45:15.197
> 
> 标签：c, xml, json

> **可能重复：**
> [C/C++ 中的 JSON <-> XML](https://stackoverflow.com/questions/7395072/json-xml-in-c-c)

是否有将 XML 转换为 JSON 的 C 函数或简单的 C 库？

例如，我希望该函数能够转换以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<reqTransDetails>
        <token>6xPVIl83hgyhtwZ/y0azu9MwMCQVSIVj/qM=</token>
        <ordering>desc</ordering>
        <status>A</status>
        <blockSize>999</blockSize>
    <blockNo>0</blockNo>
</reqTransDetails> 
```

至：

```
{
  "reqTransDetails": {
    "token": "6xPVIl83hgyhtwZ/y0azu9MwMCQVSIVj/qM=",
    "ordering": "desc",
    "status": "A",
    "blockSize": "999",
    "blockNo": "0"
  }
} 
```

谢谢您的帮助。

# objective-c - 如何检查 NSTextfield 是否已经截断了文本（...最后）

> ID：14430193
> 
> 赞同：9
> 
> 时间：2013-01-20T22:45:21.393
> 
> 标签：objective-c, macos, cocoa, truncate, nstextfield

我已经搜索了如何执行此操作，但找不到任何答案。
我想知道我`NSTextfield`是否已经在截断文本（最后...），而无需检查其`stringValue`. 我需要这样做才能知道是否应该在我的`NSTextfield`（就像一个简单的标签）上设置一个工具提示。
我不想检查文本字段长度`stringValue`的原因是因为有些字符比其他字符占用更多空间，所以这不是很准确
谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-08T20:53:46.033

对于未来的访问者，您可以使用该`-[NSCell expansionFrameWithFrame:inView:]`方法来确定是否正在发生截断。从标题：

> 如果 cellFrame 对于视图中的全部内容来说太小，则允许单元格返回扩展单元格框架。...<snip>...如果框架不是太小，返回一个空矩形，并且不会显示扩展工具提示视图。默认情况下，NSCell 返回 NSZeroRect，而一些子类（例如 NSTextFieldCell）会在需要时返回正确的帧。

简而言之，您可以判断 an`NSTextField`是否像这样截断：

```
 NSRect expansionRect = [[self cell] expansionFrameWithFrame: self.frame inView: self];
    BOOL truncating = !NSEqualRects(NSZeroRect, expansionRect); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T00:48:19.520

您最好的选择可能是使用 a`NSTextView`而不是 a `NSTextField`。如果您使用 an ，`NSTextView`您可以获得using属性`NSTextContainer`的。容器可以告诉您（绘制文本的空间）。`NSTextView``textContainer``containerSize`

`NSString`对象响应方法`sizeWithAttributes:`。如果使用给定的属性绘制，您可以使用生成的`NSSize`结构来获取文本的宽度。[请参阅NSAttributedString Application Kit Additions Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html)的“常量”部分来确定哪些属性是相关的。

如果`containerSize`宽度小于`sizeWithAttributes:`宽度，则文本将被截断。

**编辑：**抱歉，这仅适用于 no `lineFragmentPadding`，但默认`lineFragmentPadding`值为非零。要么减去`textContainer.lineFragmentPadding`from`containerSize.width`或使用`NSTextContainer` `setLineFragmentPadding:`方法将其设置为`0`。

我想你也可以对文本区域的大小做出一些假设，`NSTextField`并结合使用该`sizeWithAttributes:` `NSString`方法，但这并不那么干净。

**编辑 2：**我意识到我没有解决 OP 对使用省略号截断文本的兴趣。下面的示例代码在`NSTextView`. 我还想我不妨扔一些代码，`NSTextView`通过`NSTextField`把它放在一个`NSBox`. 添加大小检查以确定是否应显示工具提示将是使用上面已经提到的信息对以下代码的简单添加。

```
NSString* string = @"Hello World.";

// get the size the text will take up using the default font
NSSize textBounds = [string sizeWithAttributes:@{}];

// Create a border view that looks more or less like the border used around
// text fields
NSBox* borderView = [[NSBox alloc] initWithFrame:NSMakeRect(10, 10, 60, textBounds.height+4)];
[borderView setBoxType:NSBoxCustom];
[borderView setBorderType:NSBezelBorder];
[borderView setContentViewMargins:NSMakeSize(0, 0)];
[borderView setFillColor:[NSColor whiteColor]];

// Create the text view
NSTextView* textView = [[NSTextView alloc] initWithFrame:NSMakeRect(0, 0, 60, textBounds.height)];
[textView setTextContainerInset:NSMakeSize(2, 0)];
[textView.textContainer setLineFragmentPadding:0];
[textView setEditable:YES];

// Set the default paragraph style so the text is truncated rather than
// wrapped
NSMutableParagraphStyle* parStyle = [[NSMutableParagraphStyle alloc] init];
[parStyle setLineBreakMode:NSLineBreakByTruncatingTail];

// Do not let text get squashed to fit
[parStyle setTighteningFactorForTruncation:0.0];

[textView setDefaultParagraphStyle:parStyle];
[parStyle release];

// Set text
[textView setString:string];

// add NSTextView to border view
[borderView addSubview:textView];
[textView release];

// add NSBox to view you want text view displayed in
[self addSubview:borderView];
[borderView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:47:27.777

我认为您可以通过查看文本字段的字段编辑器的框架来做到这一点。您在 controlTextDidBeginEditing 中检查其宽度，然后在 controlTextDidEndEditing 中再次检查。如果后一个值较大，则文本已被截断。以下是在文本字段的委托中实现的（我为 initialWidth 创建了一个 ivar）：

```
- (void)controlTextDidBeginEditing:(NSNotification *)aNotification {
    if (! initialWidth) 
        initialWidth = ((NSTextView *)aNotification.userInfo[@"NSFieldEditor"]).frame.size.width;
}

- (void)controlTextDidEndEditing:(NSNotification *)aNotification {
    if (initialWidth) { //Make sure that beginEditing is called first
        NSInteger finalWidth = ((NSTextView *)aNotification.userInfo[@"NSFieldEditor"]).frame.size.width;
        if (finalWidth - initialWidth > 1) NSLog(@"We have truncation");
        NSLog(@"Final: %ld  Initial: %ld", finalWidth,initialWidth);
    }
} 
```

这似乎在大多数情况下都有效，包括如果您输入一个长字符串，然后删除直到它再次适合。在少数情况下，当我超出文本字段末尾一个字符时，它给了我日志消息，但在编辑结束时我没有得到省略号。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-23T18:03:01.700

使用 ipmcc 作为基础的 Swift 4 解决方案

它将一一调整大小，直到适合或 fontsize = 3

```
var size_not_ok = true

var conter = 0
let mininum_font_size = 3 // will resize ultil 3 
while size_not_ok || conter < 15 { // will try 15 times maximun
    let expansionRect = le_nstextfield.expansionFrame(withFrame: le_nstextfield.frame)

    let truncated = !NSEqualRects(NSRect.zero, expansionRect)

    if truncated {

        if let actual_font_size : CGFloat = le_nstextfield.font?.fontDescriptor.object(forKey: NSFontDescriptor.AttributeName.size) as? CGFloat {

            le_nstextfield.font = NSFont.systemFont(ofSize: actual_font_size - 1)

            if actual_font_size < mininum_font_size {
                break
            } 
        }
    } else {        
        size_not_ok = false
    }
    conter  = conter + 1
} 
```

# c# - 如何在运行时更改数据模板？

> ID：14430196
> 
> 赞同：2
> 
> 时间：2013-01-20T22:45:32.773
> 
> 标签：c#, wpf, xaml, datagrid, datatemplate

在我的应用程序中，我有一个`CheckBox`，我想在选中时显示一个`DataTemplate`，在未选中时显示另一个。

这是带有两个模板的片段

```
 <DataGrid x:Name="dataGrid" LoadingRow="dataGrid_LoadingRow_1" ItemsSource="{Binding Item3}"
        <DataGrid.RowHeaderTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding StudentId}"/>
            </DataTemplate>                
            <DataTemplate>
                <TextBlock Text="{Binding FullName}"/>
            </DataTemplate>
        </DataGrid.RowHeaderTemplate>
    </DataGrid> 
```

我不知道如何实现它，但我认为我需要`INotifyPropertyChanged`我的用户控件中的接口来触发或者只是确定什么时候发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:29:26.760

你只能通过触发器来做到这一点。如果以上是你的要求。您可以通过触发器简单地做到这一点。我试过了，它对我有用。

```
 <Window.Resources>
    <ControlTemplate x:Key="MyRowHeaderTemplate">
        <TextBlock x:Name="RowHeaderTxt" 
                   Text="{Binding StudentId, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=IsChecked, ElementName=MyCheckBox}" 
                         Value="True">
                <Setter TargetName="RowHeaderTxt" Property="Text" 
                        Value="{Binding FullName, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Window.Resources>
<StackPanel>
    <CheckBox x:Name="MyCheckBox"/>
    <DataGrid ItemsSource="{Binding Item3}" AutoGenerateColumns="True">
        <DataGrid.RowHeaderTemplate>
            <DataTemplate>
                <ContentControl Template="{StaticResource MyRowHeaderTemplate}"/>
            </DataTemplate>
        </DataGrid.RowHeaderTemplate>
    </DataGrid>
</StackPanel> 
```

尝试这个。

# python - 不使用 IF 语句

> ID：14430201
> 
> 赞同：1
> 
> 时间：2013-01-20T22:45:59.080
> 
> 标签：python

```
def get_weekday(d1, d2):
    ''' (int, int) -> int
    The first parameter indicates the current day of the week, and is in the 
    range 1-7\. The second parameter indicates a number of days from the current 
    day, and that could be any integer, including a negative integer. Return 
    which day of the week it will be that many days from the current day.
    >>> get_weekday(0,14)
    7
    >>> get_weekday(0,15)
    1
    '''
    weekday = (d1+d2) % 7
    if weekday == 0:
        weekday = 7
    return weekday 
```

如何在不使用 if 语句的情况下解决这个问题？

顺便说一句，星期日是 1，星期一是 2，.... 星期六是 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T22:49:39.727

怎么样

```
weekday = (d1-1+d2) % 7 + 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T22:49:19.670

尝试这个：

```
weekday = ((d1+d2-1) % 7) + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T22:48:44.513

使用`or`条件：

```
weekday = (d1+d2) % 7 or 7
return weekday 
```

条件中的语句`or`从左到右求值，直到`True`没有找到值，否则返回最后一个值。

所以在这里，如果第一部分是 0，那么它返回 7。

```
In [158]: 14%7 or 7       # 14%7 is 0, i.e a Falsy value so return 7
Out[158]: 7

In [159]: 15%7 or 7       #15%7 is  1, i.e a Truthy value so exit here and return 15%7
Out[159]: 1

#some more examples
In [161]: 0 or 0 or 1 or 2
Out[161]: 1

In [162]: 7 or 0
Out[162]: 7

In [163]: False or True
Out[163]: True 
```

# java - 使用 Apache Cayenne 将对象更新到数据库

> ID：14430205
> 
> 赞同：1
> 
> 时间：2013-01-20T22:46:08.457
> 
> 标签：java, apache-cayenne

我第一次在一个项目中使用 Cayenne。到现在为止，我一直在使用 SelectQuery 并且很喜欢它。我现在需要更新一个对象，例如我的`User`对象包含一个`emailId`属性。当用户需要更新他/她的电子邮件时，我会使用现有`User`对象并`emailId`使用用户提供的新值更新属性。

问题从现在开始，我不明白将更新持久化到数据库的方式。我的选项似乎仅限于`SQLTemplate`或使用`EJB QL`。我对吗？是否有更优雅的方式将更新的对象提供给`DataContext`数据库并将更新持久化到数据库？

我在 Web 应用程序中使用 Cayenne，并通过`WebApplicationContextFilter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:15:41.907

是的，当然有更优雅的方式。您对对象进行一个或多个更改，然后通过最初用于获取对象的 ObjectContext 提交它们：

```
ObjectContext context = ...
List<MyEntity> objects = context.performQuery(...); 
MyEntity o = objects.get(0);  
o.setXyz("new value"); // I assume you got to this point
...
context.commitChanges(); 
```

最后一行将您的所有更改发送到数据库。

# python - beautifulsoup find_all() 类快捷方式不起作用

> ID：14430207
> 
> 赞同：3
> 
> 时间：2013-01-20T22:46:09.717
> 
> 标签：python, html, parsing, beautifulsoup

我正在尝试`p`使用 class 查找所有标签`column`。

```
<p class="column">This is a column</p>
<p class="column">More columns heh</p> 
```

我试着做：

```
soup.find_all(class_='column') 
```

返回`[]`

然后我尝试了：

```
soup.find_all(attrs={'class': 'column'}) 
```

并得到了正确的结果。

这两个陈述不应该是相同的吗？有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-20T03:27:39.137

（这是我对堆栈溢出的第一个答案，所以我有点紧张！）

正如其他人所说，这两者完全相同。唯一的问题是您使用的是旧版本的 Beautiful Soup。[正如这里](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-by-css-class)所说。

> 在没有 class_ 快捷方式的旧版本 Beautiful Soup 中，您可以使用上面提到的 attrs 技巧。创建一个字典，其“类”的值是您要搜索的字符串（或正则表达式，或其他）。

希望它有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:01:18.050

这些陈述*完全相同*，我无法重现您的问题：

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup('''<div>
... <p class="column">This is a column</p>
... <p class="column">More columns heh</p>
... </div>''')
>>> soup.find_all(class_='column')
[<p class="column">This is a column</p>, <p class="column">More columns heh</p>]
>>> import bs4
>>> bs4.__version__
'4.1.3' 
```

请注意，该`class_`参数是在 4.1.2 版本中引入的，因此请确保您使用的是最新版本的 BeautifulSoup。从[*按 CSS 类搜索*部分](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-by-css-class)：

> 从 Beautiful Soup 4.1.2 开始，您可以使用关键字参数按 CSS 类进行搜索`class_`：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:08:59.433

```
>>> from bs4 import BeautifulSoup as BS
>>> soup = BS('''<p class="column">This is a column</p>
<p class="column">More columns heh</p>''')
>>> list1 = soup.find_all(class_='column')
>>> list2 = soup.find_all(attrs={'class': 'column'})
>>> list1 == list2
True 
```

没有区别。我不确定为什么它不适合你。也许你的 BeautifulSoup 模块已经过时了？我也无法重现您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T10:55:04.770

我有像你的帖子那样的保存情况，我发现我的 CentOS python 版本是 2.6.6，而 BeautifulSoup 4.1.0 他们在帮助文档中说：

“本文档中的示例在 Python 2.7 和 Python 3.2 中的工作方式应该相同。”

所以我根据这个链接将我的 python 2.6 升级到 2.7：

“ [http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/](http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/) ”

升级完成后，汤变得漂亮了。

# git - 将 git repo 存储在 repo 中？

> ID：14430210
> 
> 赞同：2
> 
> 时间：2013-01-20T22:46:36.347
> 
> 标签：git, bitbucket

我有一个存储到 bitbucket 的存储库，它存储了我的项目。对于这个项目，我依赖于几个工具，比如 Bootstrap。在我的存储库中，我克隆了 Bootstrap 存储库并进行了一些本地编辑，但它没有被拾取，我如何将存储库存储在存储库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:58:03.333

[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)就是答案，除非您需要引用 Bootstrap 存储库的[分支](https://stackoverflow.com/a/3903835/6309)[***而***](https://stackoverflow.com/a/3903835/6309)不是原始的 Bootstrap 存储库，因为您需要对其进行修改。

您可以分叉一个 Bitbucket 存储库，但是，如果 Bootstrap 不在 Bitbucket 上，您可以简单地在本地克隆它，然后将其推回您在 Bitbucket 上创建的空 Bootstrap 存储库。

# api - WSO2 - Identity Server 和 API Manager 一起工作

> ID：14430211
> 
> 赞同：4
> 
> 时间：2013-01-20T22:46:44.050
> 
> 标签：api, wso2, wso2is, wso2-am

我正在评估 WSO2 Identity Server 和 WSO2 API Manager。

我在 API Manager 上注册了一个 API 和一个应用程序。我可以成功调用资源。

我还可以将用户添加到 Identity Server 并使用 oAuth 身份验证登录。

但是，我不太清楚如何将这两个系统一起使用。我想使用 API Manager 将我的 API 公开给某些应用程序。而且，我想使用 Identity Server 来记录最终用户。那可能吗？我怎样才能“插入”这两个系统？

我不确定这是否是最好的方法，所以，请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T17:24:21.347

根据我对您的用例的理解，您需要安全地公开 API。所以你需要使用 WSO2 Identity Server 和 WSO2 API Manger。除此之外，您还需要针对上述用例的最佳方法。对于以上两种产品，我们有以下两种选择。

1.  [将 WSO2 Identity Server 配置为 WSO2 API Manager 中的密钥管理器](https://docs.wso2.com/display/CLUSTER420/Configuring+WSO2+Identity+Server+as+the+Key+Manager+in+WSO2+API+Manager)（此链接提供了两种产品的不同版本组合）

    在这里，我们需要为 WSO2 IS 添加密钥管理器功能。

2.  [使用 API Manager 1.9.0 配置预打包的 Identity Server 5.0.0](https://docs.wso2.com/display/CLUSTER44x/Configuring+the+Identity+Server+5.1.0+as+a+Key+Manager+with+API+Manager+1.10.0)

在这里第一个选项有手动配置。但是，第二个选项最小化了手动配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:29:48.910

使用 Identity Server 的目的不是很清楚。是否将身份验证/授权与 API Manager 实例分开？

默认情况下，API 管理器附带一个密钥管理服务器组件，该组件负责所有安全和密钥相关操作。这可以配置为根据定义的用户存储或多个用户存储对用户进行身份验证。授权基于 oAuth 2.0。但是，在生产部署中，我们建议将此组件部署为单独的服务器实例，以便它作为外部密钥管理服务器运行。

这是通过简单地使用 API Manager 分发的另一个副本并将其配置为 Key Manager 服务器节点来完成的。

希望这可以帮助。

问候，阿娇

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T15:10:16.140

我的理解是，

*   如果您想使用 WSO2 API 管理器 (AM) 作为 API 网关，则不需要单独的 IS，因为 AM 包含一个带有安全机制的 IS 引擎，例如密钥管理器。
*   如果您需要跨所有 AM 组件进行单点登录，并且您没有其他身份提供者 (IdP)，则需要单独的 IS

*   但是，如果您有单独的 IdP，则无需安装 IS 服务器即可为 AM 实施 SSO，尽管 IS 的文档可能会建议您这样做。例如，使用 PingFederate/PingIdentity 成功实施了 SSO。请参阅[如何将 WSO2 API Manager (AM) 1.10.0 与 PingFederate SAML 2.0 集成？](https://stackoverflow.com/questions/38176390/how-to-integrate-wso2-api-manager-am-1-10-0-with-pingfederate-saml-2-0)

# javascript - 字符串操作：如何在//模式中添加变量？

> ID：14430218
> 
> 赞同：0
> 
> 时间：2013-01-20T22:47:33.413
> 
> 标签：javascript, string-matching

```
var num = 1
var pattern = /hai/+num+/world/ 
```

它打印：

```
> "/hai/1/world/" 
```

虽然我希望它打印这个：

```
> /hai1world/ 
```

任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T22:49:43.680

```
var num = 1;
var pattern = new RegExp('hai' + num + 'world'); 
```

您不能`/.../`与变量一起使用。

# ado - ADOtable 单元格更新

> ID：14430223
> 
> 赞同：0
> 
> 时间：2013-01-20T22:48:12.187
> 
> 标签：ado, editbox

您好，这是我的问题：

我有显示一些变量的 EditBox。在同一个表单上，我有一个 ComboBox。两者都绑定到 ADOTable，但是当我单击并更改 ComboBox 时，文本框变为空白。一旦我在编辑框中显示变量，如何在不使用 Post 的情况下更新记录。希望这是有道理的。

s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:44:50.923

问题解决了。问题是编辑框已绑定到数据库，我试图为其赋值..而不是我直接更新了单元数据库。

# php - 改变 a 的“价值”在点击查询结果时，在多条记录时

> ID：14430225
> 
> 赞同：0
> 
> 时间：2013-01-20T22:48:25.827
> 
> 标签：php, javascript

我有一个脚本可以更改输入字段的值：

```
 <script language="javascript">
    function klientid() {
    var getid = document.getElementById("getidfromsearch");//results
    var klid = document.getElementById("idklienta"); //input field
    if(getid != "0") {
    klid.value = getid.textContent;
    }
    </script> 
```

一个搜索引擎，这是打印结果的方式：

```
 <?php
    while($rowmilion = mysqli_fetch_array($resultmilion)) {
    ?>
    <a href="javascript:klientid()">
    <table>
    <tr>
    <td style="font-weight:bold; width: 160px; text-align:right;">ID:</td>
    <td style="width:200px;" id="getidfromsearch"><?php echo $rowmilion['id']; ?></td>
    </tr>
    </table>
    </a>
    <?php } ?> 
```

现在，当结果只有一条记录并且我单击链接时，它确实会很好地更改输入字段的值。

当结果包含多个记录时，无论我单击哪个链接，它都会始终从第一条记录中获取值，例如：

```
ID: 100
ID: 200
ID: 300 
```

所以当我点击第三个位置时，它仍然会将输入字段的值更改为 100 而不是 300。

我怀疑，这是因为所有记录都获得相同的“ID”......但是，我仍然无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:01:11.810

您应该为每个结果提供一个唯一的 ID，否则它会搞砸您的 getElementById 搜索。

你的 JS 代码：

```
<script language="javascript">
    function klientid(domElmtId) {// ** I added a parameter
        var getid = document.getElementById(domElmtId);//results
        var klid = document.getElementById("idklienta"); //input field
        if(getid !== null) {// ** This is better
            klid.value = getid.textContent;
        }
    </script> 
```

你的 PHP 代码

```
<?php
    $count = 0;//** I added a variable to give each result a different ID
    while($rowmilion = mysqli_fetch_array($resultmilion)) {
    ?>
    <a href="javascript:klientid('result<?php echo $count; ?>')">
    <table>
    <tr>
    <td style="font-weight:bold; width: 160px; text-align:right;">ID:</td>
    <td style="width:200px;" id="result<?php ?>"><?php echo $rowmilion['id']; ?></td>
    </tr>
    </table>
    </a>
    <?php 
    $count += 1;//** to make different IDs
} ?> 
```

# php - php是否限制了输出带宽？通过 php 的相同数据比直接通过 apache 慢 20 倍

> ID：14430226
> 
> 赞同：2
> 
> 时间：2013-01-20T22:48:30.617
> 
> 标签：php, api, apache2

我有一个我无法处理的奇怪问题。我不知道该怎么做，我已经将 php.ini 设置为以下内容：

```
max_execution_time = 120
memory_limit = 1024M
output_buffering = on
compression is turned off 
```

网络服务器在大约 95% 时处于空闲状态，并且有 6GB 的可用内存。

我还调整了 apache MPM：

```
mpm_prefork_module:
StartServers          500
MinSpareServers       500
MaxSpareServers      1000
MaxClients          5500
MaxRequestsPerChild   0 
```

但这一切都无济于事（我也尝试了不同的值）。

我需要每分钟处理大约 3000 个传入的 API 请求。我需要为每个返回大约 50KB。

服务器可以处理该数量的传入请求。我测试了它。它只是不能把所有的数据都扔掉。有一种节流。但是在测试带宽时，我得到了完整的 100MBit。

这是我的问题：

当我通过 apache2 下载静态二进制文件时，我的速度为 12000 KiloByte/sec，所以这几乎是整个 100MBit 连接。

我创建了一个 php 文件，它执行所有 API 内容，但不返回结果。它只是返回一些特定大小的随机数据。现在我正在从不同的服务器加载具有许多线程（当时为 1000 个）的文件/数据。

现在我检查了服务器每分钟处理多少个请求。我计算了每秒的传输速率。

```
 0 byte = about 5000
   1000 byte = about 3000 =  50 Kilobyte/sec
  10000 byte = about 1600 = 266 Kilobyte/sec
  50000 byte = about  430 = 358 Kilobyte/sec
 100000 byte = about  337 = 561 Kilobyte/sec
 500000 byte = about   69 = 567 Kilobyte/sec 
```

这表明在不返回数据时，服务器可以处理所需数量的请求（它每分钟可以处理 5000 个，而不是我需要的 3000 个）。当我返回我需要的 50KB 时，我每分钟只收到 430 个请求。我返回随机数据还是真实数据都没有关系，使用真实的 PHP 文件或者只是一个返回一些随机 50KB 数据的虚拟数据。这没有任何区别。

我该怎么做才能解决 php 节流问题？

以下是一些会导致相同限制问题的源代码：

```
<?
$chars = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

for ($i = 0; $i < 50000; $i++) 
{
  echo $chars[rand(0, strlen($chars))];
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:02:29.327

这里可能有几个因素在起作用：

### PHP 的开销

即使对于只生成一个文件的基本脚本，PHP 也必须初始化它自己。这是有代价的。

### 内存开销

很有可能，您的 PHP 脚本导致将整个 50KB 的数据复制到内存中（这也是成本）。除非您跳过箍以流式传输结果，否则这很可能会发生。

### 缓冲

与上面类似，如果您没有对结果进行流式处理/分块 - PHP 必须先将整个数据块加载到内存中，然后再将其发送给请求者。

### 未知数

PHP 的内部有很多变化的部分，如果不剖析和分析您的特定脚本，就对减速的真正位置做出许多假设可能是不安全的。

### 解决它

像 apache 和 nginx 这样的 Web 服务器已针对提供静态文件进行了很好的优化。让他们这样做；它们*总是*比在它们之间引入一层间接更快。

我对您的具体问题知之甚少，但一般准则：

*   让 PHP 脚本进行基本处理，然后重定向到您的 Web 服务器直接提供的 URL。
*   如果您需要安全层；考虑设置一次性 URL 或服务器模块，可以快速检查请求者是否具有访问权限（但不必管理 w/ 流文件内容）

# javascript - javascript中不需要的事件侦听器的垃圾收集

> ID：14430232
> 
> 赞同：19
> 
> 时间：2013-01-20T22:49:10.880
> 
> 标签：javascript, jquery, google-chrome, memory-leaks, garbage-collection

我正在构建一个单页 webapp。这意味着在一段时间内我会获得新的 DOM 元素，删除不需要的元素。例如，当我获取一个新表单时，我只需用该表单 HTML 替换特定 div 的内容，并设置此表单元素独有的侦听器。一段时间后，我将这个表单的内容替换为一个新的表单实例（具有不同的 ID）。

我再次为这个新表单设置了事件监听器。现在以前的表单不再是 DOM 的一部分，所以我应该自动对 DOM 元素进行垃圾收集。我还期望指向从 DOM 中删除的元素的侦听器函数消失。

但是，从 Chrome 收集的以下配置文件表明，我的听众数量随着时间的推移而增加。你能告诉我为什么会这样吗？我尝试点击“收集垃圾”按钮。但这是我得到的个人资料。我构建应用程序的方式有问题吗？有问题吗？如果有，我应该如何解决？

![我的 web 应用程序的 Chrome 快照几分钟](../Images/82a28b07ef7c9c5e26e629b740b69f89.png)

万一这很重要，我将 JSP 模板语言与 jquery、jquery-ui 和其他一些插件一起使用。这就是我在页面上添加/删除的动态片段的样子。

```
<script>
  $(document).ready(function() {
    $("#unique_id").find(".myFormButton").button().click(
      function() {
        $.ajax({url: "myurl.html",
          success: function(response) {
                console.log(response);
          }
        });
    });
  });
</script>

<div id="unique_id">
    <form>
      <input name="myvar" />
      <button class="myFormButton">Submit</button>
    </form>
</div> 
```

**更新**

如果你想看看这里的实际代码是相关部分。 [此](https://github.com/C4G/V2V/blob/503f07f676e75f1af48689347627a4188de69e2c/war/WEB-INF/jsp/findDonorForm.jsp#L49)链接显示，当按下清除按钮时，将调用函数 clearFindForm，该函数使用 ajax 请求有效地重新获取内容（HTML 片段），并将此 jsp 中的整个 div 替换为获取的内容。refetchContent 函数的工作方式如下：[这](https://github.com/C4G/V2V/blob/503f07f676e75f1af48689347627a4188de69e2c/war/js/common.js#L448)是代码的链接，以防有助于提供更好的答案。

```
function refetchContent(url, replaceTarget) {
  $.ajax({
    url: url,
    data: {},
    type: "GET",
    success: function (response) {
       replaceTarget.replaceWith(response);
    },
    error:   function (response) {
       showErrorMessage("Something went wrong. Please try again.");
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T01:41:05.780

虽然 jQuery 非常擅长删除通过其方法删除的 DOM 元素的事件侦听器（包括 .html() - 只需阅读 API：[http](http://api.jquery.com/html/) ://api.jquery.com/html/ ） - 它不会删除事件DOM 元素的侦听器，这些元素可能在分离的 DOM 树中仍然具有对它们的引用。

例如，如果您执行以下操作：

```
$.ajax({
    ....
})
    .done(function(response,status,jqXHR) {

        //create a detached DOM tree
        form = $(response)

        //add an event listener to the detached tree
        form.find('#someIDInTheResponse').on('submit',function() {

        });

        //add the form to the html
        $('#someID').html(form);
    });

//at some other point in the code
$('#someIDInTheResponse').remove(); 
```

请注意，在上面的示例中，尽管您从 DOM 中删除了元素，但侦听器不会从内存中删除。这是因为该元素仍然存在于可通过全局变量“form”访问的分离 DOM 树的内存中（这是因为我没有创建使用“var”在 done 函数的范围内创建初始分离 DOM 树。 ...有一些细微差别，jQuery 无法修复糟糕的代码，它只能做到最好。

其他 2 件事：

在回调或事件侦听器中执行所有操作（例如在单击按钮时执行此操作）很快就会变成真正糟糕的意大利面条代码，并且很快就会变得难以管理。尝试将应用程序逻辑与 UI 交互分开。例如，不要使用回调点击事件执行一堆逻辑，使用回调点击事件调用执行一堆逻辑的函数。

其次，也不太重要，（我欢迎通过评论就这个观点提供反馈）我认为 30MB 内存对于 Web 应用程序来说是一个相当高的基线。我有一个非常密集的谷歌地图网络应用程序，经过一个小时左右的密集使用后达到 30MB，你真的会注意到当你这样做时开始注意到它的迟缓。天知道如果它达到 60MB 会是什么样子。我认为 IE<9 在这一点上将变得几乎无法使用，尽管就像我说的，我欢迎其他人对此想法的反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:12:55.243

我想知道当您替换片段时，您是否只是没有取消绑定/删除先前绑定的事件侦听器？

我简要查看了您在更新后的问题中链接到的代码的特定部分，但除了您在文档中所做的准备之外，没有看到任何事件侦听器绑定，所以我猜您在替换时正在做一些额外的绑定文档片段。我不是 jQuery 专家，但通常绑定或分配额外的事件侦听器不会自动替换以前绑定/分配的事件侦听器。

我的观点是，您应该查看是否通过“click()”（或通过其他方法）对现有元素进行绑定，而无需先取消绑定现有的事件侦听器。

您可能会看一下[moff](https://stackoverflow.com/a/741637/273628)对[这个问题](https://stackoverflow.com/questions/741628/how-to-overwrite-jquery-event-handlers)的回答，它特别提供了一个点击示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-27T13:28:51.853

由于声誉，我无法添加评论，但要回应亚当所说的话......

总结一下 Adam 提出的情况，它可能与 jQuery 无关，问题可能出在普通的 Javascript 中。但是，您没有提供足够的代码让任何人真正了解问题的根源。您对范围封装的使用可能非常好，问题可能出在其他地方。

我建议您搜索用于查找内存泄漏原因的工具（例如，可视化/遍历整个对象/范围/引用/函数树等）。

使用 jQuery 需要注意的一件事是插件和对 DOM 的全局插入！我见过很多 JS 库，不仅仅是 jQuery 插件，都没有提供销毁器和清理方法。最糟糕的违规者通常是带有弹出窗口和弹出窗口的东西，例如日期选择器、对话框等，它们有一个讨厌的习惯，即在正文中添加图层 div 等而不删除它们。

需要记住的是，如果很多人只是尽可能地构建事物但不处理破坏，尤其是在 JS 中，因为即使在当今时代，他们仍然希望您将提供正常的网页。您还应该检查插件的销毁方法，因为并非所有插件都会挂钩删除事件。其他人在 jQuery 中也以凌乱的方式使用事件，因此流氓处理程序可能会停止执行以下清理事件。

总之，jQuery 是一个很好的健壮库，但要注意，仅仅因为有人依赖它并不意味着它继承了 jQuery 的质量。

出于好奇...您检查过 document.ready 上的听众了吗？也许你需要手动 GC 那些。

# arduino - 用于 Arduino 的智能卡读/写器

> ID：14430233
> 
> 赞同：9
> 
> 时间：2013-01-20T22:49:11.883
> 
> 标签：arduino, smartcard, smartcard-reader

我希望通过芯片卡（智能卡）与我的 Arduino 项目建立普通用户与自动售货机的相同交互。我想限制用户玩玩具（我的项目）的时间，他们需要插入卡片，代码应该：

1.  读卡。
2.  要求输入 4 位密码。
3.  验证芯片上的密码。
4.  阅读时间平衡。
5.  在 LCD 上显示时间平衡。
6.  节省使用时间（通过 millis()）。
7.  从时间余额中减去使用量并显示新余额。
8.  记录使用时间和日期。

我有一个[智能卡阅读器](http://uk.farnell.com/amphenol/c702-10m008-232-40/smart-card-c702-wiping-xxs-3mm/dp/1849552)，数据表非常直接地说明了如何连接，但我在编写自己的函数时并不像我想的那样流利。有没有我可以使用的好图书馆？也许是一个示例 .ino 或 .pde 文件？提前致谢！

* * *

[更新#1]

[我在SourceForge](https://sourceforge.net/p/arduinosclib/wiki/Home/)中找到了 Angus71 的一个好看的项目，但我必须承认我不知道如何将库实现到 arduino 代码本身。作者写了 SCTest (example) 这对我来说还不够，所以我想检查一下你是否可以帮助我？

您可以从上面的链接下载库和示例，如果您能指出更好的方向，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-02T07:26:20.770

如果您对硬件仍然很灵活，您可能需要考虑使用 NFC 卡并将数据存储在您的读卡器中（如果您需要在多个设备中使用它，则可以使用 NFC 卡。有许多开放的 NFC 库可以完美运行。

# java - Android 2D 游戏简单引擎或框架

> ID：14430235
> 
> 赞同：4
> 
> 时间：2013-01-20T22:49:20.637
> 
> 标签：java, android, frameworks, 2d, game-engine

我想将我的简单 2D 游戏移植到 Android。

所以我需要一些方法/一个简单的框架，因为我是 Android 新手，创建自己的方法需要做很多工作。首先，我选择了很棒的 Kilobolt 框架 ( [http://kilobolt.com](http://kilobolt.com) )，但我想使用位图而不是图像。因此我无法使用 Screens，整个框架都是基于 Screens 的。

你知道任何可以完成这项工作的小型框架或引擎吗？我不需要恒定的 FPS，因为在用户触摸屏幕之前没有任何变化。所以很多框架/引擎都被“压倒”了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:53:46.607

我推荐[LibGDX](http://libgdx.badlogicgames.com/)。除了能够发布到 Android 之外，它还具有导出到 HTML、Mac、Linux、Windows 和 iOS 的功能。

# python - ValueError：布尔索引过多

> ID：14430244
> 
> 赞同：1
> 
> 时间：2013-01-20T22:50:24.693
> 
> 标签：python, numpy, matplotlib

我正在尝试使用 matpolid 可视化一些数据，但出现此错误

```
 File "C:\Python27\lib\site-packages\matplotlib\mlab.py", line 2775, in griddata
tri = delaunay.Triangulation(x,y)
 File "C:\Python27\lib\site-packages\matplotlib\delaunay\triangulate.py", line 98, in __init__
duplicates = self._get_duplicate_point_indices()
 File "C:\Python27\lib\site-packages\matplotlib\delaunay\triangulate.py", line 137, in _get_duplicate_point_indices
return j_sorted[mask_duplicates]
ValueError: too many boolean indices 
```

它发生在我调用函数时

```
 data=griddata(self.dataX,self.dataY,self.dataFreq,xi,yi) 
```

有谁知道我为什么会收到这个错误？我认为它带有参数，但我可以弄清楚是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T07:57:47.863

可能值得更新您的 matplotlib。三角测量代码已经进入 v1.3.0。

matplotlib v1.3.0 的新增功能页面可以在[http://matplotlib.org/users/whats_new.html#triangular-grid-interpolation找到](http://matplotlib.org/users/whats_new.html#triangular-grid-interpolation)

# javascript - js正则表达式删除某些标记表单文本字符串

> ID：14430246
> 
> 赞同：1
> 
> 时间：2013-01-20T22:50:25.190
> 
> 标签：javascript, regex, replace

我有一些带有 html 标签的字符串。

```
var str = '<a href="www.com">text</a>
<script>
//some code etc
</script>
............... etc
'; 
```

我需要使用带有 js 的 replace() 函数的正则表达式删除 <script>....</script> 。不知道该怎么做。

我的努力是：

```
/(<script).(</script>)/m 
/<script.*>([\s\S]*)</script>/m
/(<script)*(</script>)/
/<script*</script>/ 
```

没有成功=(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:52:16.823

尝试...

```
/<script>[\s\S]*<\/script>/ 
```

如果这是针对任意 HTML，请考虑改用 DOM 操作方法。

```
var fauxDocumentFragment = document.createElement("div");

fauxDocumentFragment.innerHTML = str;

var scriptElements = fauxDocumentFragment.getElementsByTagName("script");

while (scriptElements.length) {
    scriptElements[0].parentNode.removeChild(scriptElements[0]);
} 
```

如果您足够幸运，只需要支持*较新*的浏览器，请使用...

```
var fauxDocumentFragment = document.createElement("div");

fauxDocumentFragment.innerHTML = str;

[].forEach(fauxDocumentFragment.querySelectorAll("script"), function(script)
    script.parentNode.removeChild(script);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:52:49.943

您可以尝试以下方法：

```
str.replace(/<script.*?>.*?<\/script>/m, ""); 
```

# ios - 当我的 UITableViewCell 不再可见时，如何取消对象中的 NSOperation？

> ID：14430254
> 
> 赞同：2
> 
> 时间：2013-01-20T22:51:11.640
> 
> 标签：ios, multithreading, cocoa-touch, uitableview, nsoperation

是我的`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`代表我有以下代码：

```
if ([movie isDownloaded])
    cell.detailTextLabel.text = movie.duration;
else
{
    cell.detailTextLabel.text = @"";

    [movie downloadInQueue:self.downloadQueue completion:^(BOOL success) {

        UITableViewCell *updateCell = [tblView cellForRowAtIndexPath:indexPath];            
        if (updateCell)
        {
            updateCell.detailTextLabel.text = movie.duration;
            [updateCell setNeedsLayout];
        }
    }];
} 
```

调用 Movie.m 并运行以下代码：

```
- (void)downloadInQueue:(NSOperationQueue *)queue completion:(void (^)(BOOL success))completion
{
    if (!self.isDownloading)
    {
        self.downloading = YES;

        [queue addOperationWithBlock:^{
            BOOL success = NO;

            AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:self.fileURL];
            CMTime timeduration = playerItem.duration;
            float seconds = CMTimeGetSeconds(timeduration);
            self.duration = [self timeFormatted:seconds];

            self.downloading = NO;
            self.downloaded = YES;
            success = YES;

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                completion(success);
            }];
        }];
    }
} 
```

当我的单元格变得**不**`NSOperation`可见时，`Movie`如果对象尚未运行，我想取消它（将其从队列中删除）。我知道我可以继承`UITableViewCell`并做这样的事情：

```
- (void)willMoveToWindow:(UIWindow *)newWindow
{
    [super willMoveToWindow:newWindow];

    if (newWindow==nil) {
            // Cell is no longer in window so cancel from queue
    }
} 
```

问题......我如何`Movie` `NSOperation`从`UITableViewCell`代表呼叫中取消我的？与代表或`NSNotification`某种形式？我需要知道`indexPath`单元格以从我的数组中获取正确的 Movie 对象并取消操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T22:58:55.593

从 iOS 6 开始，您可以使用[UITableView 委托协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)的 tableView:didEndDisplayingCell:forRowAtIndexPath: 方法。当单元格从表格视图中移除时会调用它（当它不再可见时会发生这种情况）。

```
- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    // Cancel operation here for cell at indexPath
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:53:32.113

顺便说一句，我刚刚在这里看到了这个问题，但已经在[这里](https://stackoverflow.com/a/14425596/1271826)回答了。但我同意内布斯（他的回答应该被接受）。

正如 Nebs 所说，在 iOS 6 中，使用`didEndDisplayingCell`. 因此，它可能看起来像：

```
- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    Movie *movie = self.movies[indexPath.row];

    if ([movie isDownloading])
        [movie cancelDownload];
} 
```

但是在早期版本中，您必须执行诸如响应[`scrollViewDidScroll`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewDidScroll%3a)、手动查看哪些`indexPath`对象不再包含在其中`indexPathsForVisibleRows`以及从那里取消操作之类的操作

为了取消操作，您需要更改它`downloadInQueue`，以便不仅仅是调用`addOperationWithBlock`，它应该创建 a`NSBlockOperation`并将其添加到队列中，但还要保存`weak`对它的引用，以便您可以编写如下`cancelDownload`方法：

```
@interface Movie ()

@property (nonatomic, getter = isDownloaded) BOOL downloaded;
@property (nonatomic, getter = isDownloading) BOOL downloading;
@property (nonatomic, weak) NSOperation *operation;

@end

@implementation Movie

- (void)downloadInQueue:(NSOperationQueue *)queue completion:(void (^)(BOOL success))completion
{
    if (!self.isDownloading)
    {
        self.downloading = YES;

        NSOperation *currentOperation = [NSBlockOperation blockOperationWithBlock:^{
            BOOL success = NO;

            self.playerItem = [AVPlayerItem playerItemWithURL:self.webURL];
            if (self.playerItem)
            {
                success = YES;
                CMTime timeduration = self.playerItem.duration;
                float seconds = CMTimeGetSeconds(timeduration);
                self.durationText = [NSString stringWithFormat:@"%f", seconds];
            }
            self.downloading = NO;
            self.downloaded = YES;

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                completion(success);
            }];
        }];

        [queue addOperation:currentOperation];
        self.operation = currentOperation;
    }
}

- (void)cancelDownload
{
    if ([self isDownloading] && self.operation)
    {
        self.downloading = NO;
        [self.operation cancel];
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:01:48.037

看起来您应该将单元格或索引路径传递给`downloadInQueue:completion:`. 然后，您可以使用字典、数组或关联对象来维护单元格及其操作之间的连接。

# c++ - RegKeyValue 返回无意义的数据

> ID：14430256
> 
> 赞同：1
> 
> 时间：2013-01-20T22:51:25.103
> 
> 标签：c++, winapi

```
char value[255];
DWORD BufferSize = 8192;

RegGetValue(HKEY_LOCAL_MACHINE, L"SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion", L"ProductName", RRF_RT_ANY, NULL, &value, &BufferSize);

cout << value; 
```

RegKeyValue() 运行后，它的值似乎是

```
 value   0x0034f50c "ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ...  char[255] 
```

这里发生了什么？

**注意：** RegKeyValue() 返回 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:56:04.640

这里有两个问题。

1.  [确保RegGetValue](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724868%28v=vs.85%29.aspx)的返回值为`ERROR_SUCCESS`. 如果不是，则例程失败。此外，您可以检查写入的内容`BufferSize`，`RegGetValue`指定写入的字节数。

2.  您传入定义为 的缓冲区`char value[255];`，然后将其长度指定为`8192`。这可能会导致缓冲区溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:53:00.077

您没有检查`RegGetValue`. 很可能调用失败并且缓冲区`value`从未被分配任何东西。始终检查返回值。

从我们可以看到的代码中，我注意到您在缓冲区大小上撒谎。你说它是8192字节。但是您只分配了 255 个字节。您还调用了 API 的 Unicode 版本，但传入了一个`char`缓冲区。如果您期待字符串数据，那么您需要提供一个宽字符缓冲区。此 API 的 Unicode 版本将字符串数据作为 UTF-16 编码文本返回。

完成所有排序后，接下来需要检查该值中存储的类型。您正在为类型参数传递 NULL。传递一个指向变量的指针并找出一个字符串是否真的存储在那里。您还需要读取读取了多少字节并相应地在缓冲区中设置空终止符。

# haskell - Ole32 createObject“excel.application”在win7 64位中失败

> ID：14430258
> 
> 赞同：1
> 
> 时间：2013-01-20T22:51:54.717
> 
> 标签：haskell, com, ms-office

我设法使用了 com1.2.3 库，但如果它已经打开，我只能使用 excel。

我不知道为什么这段代码不起作用；

```
main = coRun $ do
     idEx <- createObject "Excel.Application" 
```

我在cmd中遇到了这个错误：

```
*** Exception: ComException {comException = ComError (-2147467262),
comExceptionMsg = "(0x80004002) This interface is not supported\r\n"}. 
```

我读到在 win7 中可能无法从 com32 启动 64b 应用程序。那是对的吗？

任何人都有可以从win7启动excel的工作代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:16:26.007

好的，我找到了。我在这里发帖是因为有人可能对解决方案感兴趣并且可能有灵感。我在某处读到应该使用 coCreateInstance 而不是 createObject 。所以下面的代码应该触发excel

```
import System.Win32.Com 
import System.Win32.Com.Automation

iidIDispatch_unsafe  = mkIID "{00020400-0000-0000-C000-000000000046}"

newExcel = coRun $ do 
   clsidExcel <- clsidFromProgID "Excel.Application"
   pIunknown <- coCreateInstance clsidExcel  Nothing LocalProcess iidIDispatch_unsafe
   let pExl = castIface pIunknown :: IDispatch ()
   propertySet "Visible" [inBool True]  pExl 
```

# php - MySql/php - 标签系统

> ID：14430259
> 
> 赞同：3
> 
> 时间：2013-01-20T22:51:56.030
> 
> 标签：php, mysql

我正在实施标签系统...

目前我有`tags`带有`name`, `description`,`createdby`字段的表格。

并且`images`有一个字段的表`tags`。在此字段中，我将放置表格中的标签名称`tags`，用逗号分隔。

但是，如果我想获取所有带有标签的图像，`Foo`我该如何形成查询？因为该字段将包含多个用逗号分隔的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:26:10.363

不确定您是否考虑过规范化图像表，但这将是这里的最佳解决方案。

而不是拥有

![在此处输入图像描述](../Images/4be1f8484173af92aab893a17f39bb65.png)

以这种方式构建您的表格

![在此处输入图像描述](../Images/01685d3e770fc069fb624324b6f77734.png)

然后你可以运行这个SQL语句来返回所有带有特定标签的图片

```
SELECT * FROM images
WHERE tags = 'forest'; 
```

或者，如果出于某种原因需要将表格保持为当前格式，则可以使用

```
SELECT * FROM images
WHERE tags LIKE '%forest%'; 
```

以上 2 个示例中的单词“森林”是您要搜索的标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:56:02.817

尝试这样的事情：

```
SELECT * FROM images WHERE tags = 'Foo' OR tags LIKE 'Foo,%' OR tags LIKE '%,Foo' OR tags LIKE '%,Foo,%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:03:38.333

将标签 ID 存储在`tags`如下字段中：',3,17,55,'

当您对数据库执行查询时，您将能够使用这样的*快速*构造：

```
SELECT * FROM images WHERE INSTR(tags,',$tag_id,')>'0' 
```

而不是使用*缓慢的“LIKE '%$tag_id'”*

# mysql - 为没有子查询的已知其他几列选择具有 MAX(column) 的一行

> ID：14430260
> 
> 赞同：2
> 
> 时间：2013-01-20T22:52:11.423
> 
> 标签：mysql, sql, subquery

我的表包含用户对不同项目的投票。它具有以下字段：

```
id, user_id, item_id, vote, utc_time 
```

我了解如何为*#item#获得**#user#*的​​最后一票，但它使用子查询：

 *```
 SELECT votes.*, items.name, items.price
        FROM votes JOIN items ON items.id = votes.item_id
        WHERE user_id = #user# AND item_id = #item#
            AND utc_time = (
                SELECT MAX(utc_time) FROM votes
                WHERE user_id = #user# AND item_id = #item#
            ) 
```

它有效，但对我来说看起来很愚蠢......应该有一种更优雅的方式来获得这张唱片。我尝试了这里建议的方法，但我还不能让它工作，所以我会很感激你的帮助：[我如何选择具有 MAX（列值）的行，DISTINCT 由 SQL 中的另一列？](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql/2276247#2276247)

这个问题还有第二部分：[Count rows with DISTINCT(several columns) and MAX(another column)](https://stackoverflow.com/questions/14430426/count-rows-with-distinctseveral-columns-and-maxanother-column)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:57:51.067

您只需要结果中的一行，即带有`MAX(utc_time)`. 在 MySQL 中，有一个`LIMIT`子句可以应用`ORDER BY`：

```
SELECT votes.*, items.name, items.price
    FROM votes JOIN items ON items.id = votes.item_id
    WHERE user_id = #user# AND item_id = #item#
    ORDER BY votes.utc_time DESC
        LIMIT 1 ; 
```

`(user_id, item_id, utc_time)`一个或一个索引`(item_id, user_id, utc_time)`将有利于效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:08:56.250

很简单：如果日期/时间是最大日期，则不存在“更高”（更新的）日期/时间（对于相同的 {user,item} ）。

```
SELECT vo.*
     , it.name, it.price
  FROM votes vo
  JOIN items it ON it.id = vo.item_id
 WHERE vo.user_id = #user# AND vo.item_id = #item#
   AND NOT EXISTS (
       SELECT *
       FROM votes nx
       WHERE nx.user_id = vo.user_id
       AND nx.item_id = vo.item_id
       AND nx.utc_time > vo.utc_time
       ); 
```*

# python - 创建返回pandas dataFrame的子类表单类

> ID：14430263
> 
> 赞同：4
> 
> 时间：2013-01-20T22:52:33.717
> 
> 标签：python, inheritance, pandas

在我的项目中，我构建了一个以 pandas DataFrame 为核心的类。数据框中的值取决于一些规范，我用一些代表我想要使用的数据的字母对其进行初始化。我把我所有的函数都放在一个里面创建数据框，`__init__`因为我知道这个函数是一次性的，初始化后不需要它们。此外，在我的课程在以后的代码中使用后，我也不想访问这些函数。（我不确定这是否是“pythonic”方式）。

在使用和 plotData() 方法构建基本类之后，`__str__`我想应用一些过滤器并构建一个新类，其中附加列是过滤器。我想这样做，`__init__`但保留已经完成的一切。换句话说，我不想重写整个`__init__`只想将新列添加到基本数据框。

以类似的方式，我想在 plotData() 函数中添加一个额外的图

我的原始代码已经有好几行了，但原理与下面列出的代码非常相似。

```
import pandas as pd
import pylab as pl
class myClass(object):
    def __init__(self, frameType = 'All'):
        def method1():
            myFrame = pd.DataFrame({'c1':[1,2,3],'c2':[4,5,6],'c3':[7,8,9]})
            return myFrame
        def method2():
            myFrame = pd.DataFrame({'c1':[.1,.2,.3],'c2':[.4,.5,.6],'c3':[.7,.8,.9]})
            return myFrame
        def makingChiose(self):
            if self.frameType == 'All':
                variable = method1() + method2() 
            elif self.frameType == 'a':
                variable = method1()
            elif self.frameType == 'b':
                variable = method2()
            else:
                variable =  pd.DataFrame({'c1':[0,0,0],'c2':[0,0,0],'c3':[0,0,0]})
            #print 'FROM __init__ : %s' % variable
            return variable           
        self.frameType = frameType      
        self.cObject = makingChiose(self) # object created by the class
    def __str__(self):
        return str(self.cObject)
    def plotData(self):
        self.fig1 = pl.plot(self.cObject['c1'],self.cObject['c2'])
        self.fig2 = pl.plot(self.cObject['c1'],self.cObject['c3'])
        pl.show()

class myClassAv(myClass):
    def addingCol(self):
        print 'CURRENT cObject \n%s' % self.cObject # the object is visible 
        self.cObject['avarage'] = (self.cObject['c1']+self.cObject['c2']+self.cObject['c3'])/3
        print 'THIS WORKS IN GENERAL\n%s' % str((self.cObject['c1']+self.cObject['c2']+self.cObject['c3'])/3) # creating new column works
    def plotData(self):
        # Function to add new plot to already existing plots
        self.fig3 = pl.plot(self.cObject['c1'],self.cObject['avarage'])
if __name__ == '__main__':
    myObject1 = myClass()
    print 'myObject1 =\n%s' % myObject1
    myObject1.plotData()
    myObject2 = myClass('a')
    print 'myObject2 =\n%s' % myObject2
    myObject3 = myClass('b')
    print 'myObject3 =\n%s' % myObject3
    myObject4 = myClass('c')
    print 'myObject4 =\n%s' % myObject4

    myObject5 = myClassAv('a').addingCol()
    print 'myObject5 =\n%s' % myObject5
    myObject5.plotData() 
```

大多数代码都可以工作，至少在初始化时是这样，但是当我尝试使用附加列创建新数据框时出现错误。当我把它作为新的时，`__init__`我创建了一个全新的初始化并且我失去了所有已经完成的事情。我创建了一个新函数，但在调用新类而不是新类中的函数后，我希望有附加列 代码的输出如下所示：

```
myObject1 =
    c1   c2   c3
0  1.1  4.4  7.7
1  2.2  5.5  8.8
2  3.3  6.6  9.9
myObject2 =
   c1  c2  c3
0   1   4   7
1   2   5   8
2   3   6   9
myObject3 =
    c1   c2   c3
0  0.1  0.4  0.7
1  0.2  0.5  0.8
2  0.3  0.6  0.9
myObject4 =
   c1  c2  c3
0   0   0   0
1   0   0   0
2   0   0   0
CURRENT cObject 
   c1  c2  c3
0   1   4   7
1   2   5   8
2   3   6   9
THIS WORKS IN GENERAL
0    4
1    5
2    6
myObject5 =
None
Traceback (most recent call last):
  File "C:\Users\src\trys.py", line 57, in <module>
    myObject5.plotData()
AttributeError: 'NoneType' object has no attribute 'plotData' 
```

问题是：我可以“部分”覆盖超类的方法，以使该方法中以前包含的内容具有一些新功能吗？我想将 myClassAv() 初始化为具有四列而不是像 myClass() 那样的三列的数据框，并且我想让 myClassAv().plotData() 绘制第三行，但保留两列来自基类。

我不知道如何解释错误以及为什么 myObject5 为 None，但我怀疑它与继承有关。

此外，如果您建议我应该以不同的方式完成我的所有想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T23:10:13.143

`myClass.__init__`在里面打电话怎么样`myClassAv.__init__`：

```
def __init__(self, frameType='All'):
    myClass.__init__(self, frameType)
    def addingCol(cObject): 
        ...
    addingCol(self.cObject) 
```

* * *

为了具体，

```
import pandas as pd
import pylab as pl
import numpy as np

class myClass(object):
    def __init__(self, frameType='All'):
        def method1():
            myFrame = pd.DataFrame(
                {'c1': [1, 2, 3], 'c2': [4, 5, 6], 'c3': [7, 8, 9]})
            return myFrame

        def method2():
            myFrame = pd.DataFrame(
                {'c1': [.1, .2, .3], 'c2': [.4, .5, .6], 'c3': [.7, .8, .9]})
            return myFrame

        def makingChoice(self):
            if self.frameType == 'All':
                variable = method1() + method2()
            elif self.frameType == 'a':
                variable = method1()
            elif self.frameType == 'b':
                variable = method2()
            else:
                variable = pd.DataFrame(
                    {'c1': [0, 0, 0], 'c2': [0, 0, 0], 'c3': [0, 0, 0]})
            # print 'FROM __init__ : %s' % variable
            return variable
        self.frameType = frameType
        self.cObject = makingChoice(self)  # object created by the class

    def __str__(self):
        return str(self.cObject)

    def plotData(self):
        self.fig1 = pl.plot(self.cObject['c1'], self.cObject['c2'])
        self.fig2 = pl.plot(self.cObject['c1'], self.cObject['c3'])
        pl.show()

class myClassAv(myClass):
    def __init__(self, frameType='All'):
        myClass.__init__(self, frameType)

        def addingCol(cObject):
            print 'CURRENT cObject \n%s' % cObject  # the object is visible
            cObject['average'] = cObject.mean(axis=1)
            # creating new column works
            print 'THIS WORKS IN GENERAL\n%s' % str(cObject['average'])
            return cObject

        addingCol(self.cObject)

    def plotData(self):
        # Function to add new plot to already existing plots
        self.fig3 = pl.plot(self.cObject['c1'], self.cObject['average'])

if __name__ == '__main__':
    myObject1 = myClass()
    print 'myObject1 =\n%s' % myObject1
    myObject1.plotData()
    myObject2 = myClass('a')
    print 'myObject2 =\n%s' % myObject2
    myObject3 = myClass('b')
    print 'myObject3 =\n%s' % myObject3
    myObject4 = myClass('c')
    print 'myObject4 =\n%s' % myObject4

    myObject5 = myClassAv('a')
    print 'myObject5 =\n%s' % myObject5
    myObject5.plotData() 
```

* * *

顺便说一句，而不是

```
self.cObject['avarage'] = (self.cObject['c1']+self.cObject['c2']+self.cObject['c3'])/3 
```

你可以使用`mean(axis = 1)`：

```
self.cObject['average'] = self.cObject.mean(axis=1) 
```

# jquery - 我怎样才能让 jquery toggleClass 像 css-transitions 一样将孩子动画到适当的类？

> ID：14430268
> 
> 赞同：2
> 
> 时间：2013-01-20T22:53:22.967
> 
> 标签：jquery, jquery-ui

说我有课：

```
.box {  background:red; }
.box .mini-box { background:green; }

.box.active {  background:purple; }
.box.active .mini-box { background:yellow; } 
```

如果我使用 css-transitions 我会简单地添加`transition:all 0.5s ease;`，当添加类时，`active`两个元素都会适当地动画。

如果我应用带有动画时间的 jQuery toggleClass（没有启用任何 css-transitions），它只会为目标元素设置动画。（即.box）。

```
$('.box').toggleClass('active', 500); 
```

当我将它应用于父方法时，jquery ui 的 toggleClass 方法不会发生这种情况。有没有办法让它表现得像 CSS 转换一样？

您可以在这里看到问题：http: [//jsfiddle.net/yg8rz/1/](http://jsfiddle.net/yg8rz/1/) 第二个（迷你）框没有过渡颜色。

您可以在此处看到所需的结果：http: [//jsfiddle.net/yg8rz/4/](http://jsfiddle.net/yg8rz/4/) 您必须使用 webkit 浏览器才能使其工作（在本例中）。

**注意：**为了更好的 css 实践（倾向于没有 javascript 转换的未来），元素从祖先继承活动类而不是直接将活动类应用于任何子元素是很重要的。

此解决方案使用 javascript 也很重要，因此它适用于 ie8+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:20:08.003

您遇到的问题是由 .mini-box（从您的选择器判断）在 .box 内引起的。当您将转换应用于 .box 元素时，它会正常工作，但 .box.active .mini-box 选择器根本不会选择您的 .mini-box，因为 .box 在转换之前没有 .active 类完成。

你可以做一个这样的解决方法

HTML：

```
 <div class="box">normal 1</div>
    <div class="box">
        normal 2
        <div class="box mini-box">
            mini
        </div>
    </div> 
```

CSS：

```
.box {  background:red; }
.box .mini-box, .box.mini-box { background:green; }

.box.active {  background:purple; }
.mini-box.active { background:yellow; } 
```

小提琴：http: [//jsfiddle.net/yg8rz/3/](http://jsfiddle.net/yg8rz/3/)

您需要对 .box 和 .mini-box 元素应用过渡，我更改了 css 类，因此相同的 jQuery 代码也选择了 mini box 并将 .active 也添加到其中。

要么是这个，要么是在你的类中添加 css 转换。您可以覆盖所有（主要）浏览器：

```
-webkit-transition: all 0.5 ease;
-moz-transition: all 0.5 ease;
-o-transition: all 0.5 ease;
transition: all 0.5 ease; 
```

您只能使不支持过渡的浏览器使用带有 Modernizr 的 javascript：

```
$(".box").toggleClass("active");
if(!Modernizr.csstransitions){
    $(".mini-box").toggleClass("active", 500);
} 
```

[http://jsfiddle.net/yg8rz/10/](http://jsfiddle.net/yg8rz/10/)

# android - Android OpenGL ES 2.0 官方教程中的矩阵乘法

> ID：14430269
> 
> 赞同：2
> 
> 时间：2013-01-20T22:53:24.287
> 
> 标签：android, opengl-es-2.0

我正在阅读[官方的 Android OpenGL ES 2.0 教程](http://developer.android.com/training/graphics/opengl/motion.html)，我注意到了一些东西。本教程中的代码将旋转矩阵乘以视图投影矩阵，如下所示：

```
Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0); 
```

但是，此方法的文档指定结果矩阵和任一操作数不应重叠，或者结果未定义：

> 将两个 4x4 矩阵相乘并将结果存储在第三个 4x4 矩阵中。在矩阵表示法中：结果 = lhs x rhs。由于矩阵乘法的工作方式，结果矩阵与先乘以 rhs 矩阵，然后乘以 lhs 矩阵的效果相同。这与您可能期望的相反。可以为结果、lhs 和/或 rhs 传递相同的浮点数组。但是，**如果结果元素与 lhs 或 rhs 元素重叠，则结果元素值未定义**。

因此，如果我们使用偏移量，我们可以将结果、lhs 和 rhs 存储在同一个数组中，但它们不应重叠。但是，在本教程的调用中，结果和 rhs 重叠，并且使用了零偏移量。

我读错了什么，还是谷歌的教程错了？

# c# - 嵌套中继器中的分页

> ID：14430272
> 
> 赞同：0
> 
> 时间：2013-01-20T22:53:35.917
> 
> 标签：c#, asp.net

我有一个带有 3 个中继器的嵌套中继器。这就是我的数据的样子：

**参考期刊文章**

*在新闻*

*   认可土著标签
*   新西兰的族群刻板印象
*   房屋资产和福祉

*2012*

*   全球金融危机后的公司治理
*   消费灵性与消费媒体叙事的灵性

**图书**

*2003年*

*   认可土著标签
*   新西兰的族群刻板印象
*   房屋资产和福祉

*2000*

*   全球金融危机后的公司治理
*   消费灵性与消费媒体叙事的灵性

我能够将数据提取到嵌套中继器中。但是，当我使用`ItemDataBound`事件在转发器中填充数据时，我面临如何将分页放入嵌套转发器的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:05:15.253

要在转发器中添加对分页的支持，您应该使用`PagedDataSource`

[在这里](http://www.4guysfromrolla.com/articles/081804-1.aspx)查看

# php - 使用 php curl 进行身份验证的基本 Web 服务

> ID：14430274
> 
> 赞同：1
> 
> 时间：2013-01-20T22:53:41.933
> 
> 标签：php, json, web-services, rest, curl

需要从需要用户名/密码才能访问的 Web 服务中使用一些数据。

以下返回 NULL

```
$service_url = 'https://example.com/2365139.json';
$curl = curl_init($service_url);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($curl, CURLOPT_USERPWD, "username:password");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $curl_post_data);
$curl_response = curl_exec($curl);
$response = json_decode($curl_response);
curl_close($curl);

var_dump($response); 
```

当我在浏览器中点击[https://example.com/2365139.json](https://example.com/2365139.json)时，它会提示输入 un/pw，当我输入它们时，它会显示 JSON，所以数据在那里，但我上面写的东西不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T00:29:43.403

原始代码工作正常，但由于资源是 https 它需要以下选项；

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

使用它的警告是“这基本上会导致 cURL 盲目地接受任何服务器证书，而不对哪个 CA 签署它以及该 CA 是否受信任进行任何验证。如果你完全关心你的数据”重新传递到服务器或从服务器接收，您需要正确启用此对等验证。” - 取自[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

# javascript - 如何在 Titanium.UI.CreateButtonBar 上添加图像作为标签？

> ID：14430282
> 
> 赞同：0
> 
> 时间：2013-01-20T22:54:38.790
> 
> 标签：javascript, titanium-mobile, titanium-modules

这是我的代码，我想用图像替换“开始”“暂停”和“停止”

```
var controlBar = Titanium.UI.createButtonBar({
        labels: ['START','PAUSE','STOP'],
         style: Titanium.UI.iPhone.SystemButtonStyle.BAR,
         backgroundColor: '#000080',
         top:10,
         width:200,
         height:40

      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:33:57.307

该[`labels`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.ButtonBar-property-labels)属性也可以是[BarItemType的数组](http://docs.appcelerator.com/titanium/latest/#!/api/BarItemType)

```
var controlBar = Titanium.UI.createButtonBar({
    labels: ['START','PAUSE', {
        image : '/path/to/image',
        title : 'Title',
        enabled : true
    }],
    style: Titanium.UI.iPhone.SystemButtonStyle.BAR,
    backgroundColor: '#000080',
    top:10,
    width:200,
    height:40
}); 
```

# tags - 我可以在没有安全 IC 的情况下使用 PN532 模拟标签吗？

> ID：14430285
> 
> 赞同：3
> 
> 时间：2013-01-20T22:55:05.377
> 
> 标签：tags, nfc, mifare, hce, contactless-smartcard

我正在尝试模拟 PN532 上的标签。我需要它与仅支持其 API 中的标签但不支持 LLCP 或其他 P2P 协议的设备进行交互。

我想使用主机控制器处理读/写。任何模拟标签类型都可以（Mifare、Felica 等），但我的解决方案不包含安全元素。

我认为 Mifare Ultralight 将是理想的选择。由于它不包括任何加密（只是普通的读写），它可能比任何其他都更容易模拟？

简而言之，是否可以在不使用 PN532 上的安全 IC 的情况下模拟可以回复来自发起者/阅读器的读/写命令的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:33:22.480

安全 IC 在模拟标签方面对您没有多大帮助，因为它们通常在 ISO14443 级别 4 下工作，其中标签仅处理 14443-3 命令。唯一的例外是 mifare，它在某些安全元件上受支持，但需要一些密钥来对其进行编程。

一般来说，大多数 NFC 芯片都支持标签仿真，但不使用 API 公开这一点。可能值得挖掘 libnfc-nxp 或 libnfc-nci 源代码，看看它们是否可以用来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T10:05:04.940

是的，PN532 支持带安全元件的卡仿真和主机卡仿真。

您正在寻找的命令（请参阅[PN532 用户手册](http://www.nxp.com/documents/user_manual/141520.pdf)`TgInitAsTarget`）是（将 PN532 带入主机卡仿真模式）和`TgGetData`/`TgSetData`然后与读卡器交换数据（有关如何将 PN532 带入 HCE 模式，请参阅[此答案）。](https://stackoverflow.com/a/23197444/2425802)

如果您想使用这种方法读取和写入 NDEF 消息，您可以模拟 NFC Forum Type 4 标签 (ISO/IEC 14443-4 Type A) 或 NFC Forum Type 3 标签 (FeliCa)。无论哪种情况，您都需要为该特定标签类型实现标签操作规范。

# javascript - 环聊中的高度和宽度返回零

> ID：14430287
> 
> 赞同：0
> 
> 时间：2013-01-20T22:55:15.283
> 
> 标签：javascript, jquery, google-plus, hangout

我正在尝试构建一个使用画布的简单环聊应用程序。我遇到的问题是，每当我尝试获取画布的高度和宽度时，我都会得到 0。当我在测试文件 (test.html) 中复制完全相同的代码时，一切似乎都运行良好。这是我的代码，我将所有的 css 和 html 放在一个地方以便于阅读：

```
<script src="https://hangoutsapi.talkgadget.google.com/hangouts/_/api/hangout.js?v=1.2"> </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
<div id="canvasDiv"></div>
<style>
#canvasDiv {
    width:100%;
    height:100%;
    position:relative;
}
</style>
<script>
$(window).load(function(){
    var canvasDiv = document.getElementById('canvasDiv'); 
    canvas = document.createElement('canvas');
    canvas.style.width='100%';
    canvas.style.height='100%';
    canvasDiv.appendChild(canvas);
    console.log($('#canvasDiv').height());
    canvas.width = $('#canvasDiv').width();
    canvas.height = $('#canvasDiv').height(); 
```

在前面的代码中，console.log 在 google hangouts iframe 中打印 0，但在测试文件中打印正确的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:29:27.297

设置百分比充其量是不确定的。根据我的经验，我更喜欢只使用 JavaScript 函数来获取页面宽度和高度，并将 div 尺寸设置为像素，而不是百分比。

```
var viewportwidth;
var viewportheight;

function resize() {
    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

    if (typeof window.innerWidth != 'undefined') {
        viewportwidth = window.innerWidth,
        viewportheight = window.innerHeight
    }

    // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

    else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
        viewportwidth = document.documentElement.clientWidth,
        viewportheight = document.documentElement.clientHeight
    }

    // older versions of IE

    else {
        viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
        viewportheight = document.getElementsByTagName('body')[0].clientHeight
    }

    canvas.style.width=viewportwidth+"px";
    canvas.style.height=viewportheight+"px";
} 
```

该函数将获取浏览器的高度和宽度。将您的`<body>`标签替换为

```
<body onload="resize()" onresize="resize()"> 
```

并且该函数将在页面加载时调用，并在每次调整页面大小时再次调用（以更新`<div>`.）的尺寸。通过这种方式，您将获得尺寸的实际像素，而不是百分比。

试试看，如果你有问题，请告诉我。在我的编码历史中，我多次使用过这个脚本，它已成为我的最爱和最常用的脚本之一。

# javascript - 在javascript中从精灵表中声明单个图像

> ID：14430288
> 
> 赞同：1
> 
> 时间：2013-01-20T22:55:26.297
> 
> 标签：javascript, sprite

我正在尝试从 javascript 中的精灵表定义和声明图像。我在外部样式表中定义了图像，如下所示：

```
#myimage{ background-position: 0 -751px; width: 21px; height: 21px; }

.dwg { background:url(spriteSheet.png) no-repeat;} 
```

我尝试了类似于以下的各种安排，当然，这些安排都不起作用。

```
myimage=new Image();
myimage.src="background:url('spriteSheet.png') 0 0; width: 35px; height: 16px;  no-repeat"; 
```

我使用图像如下：

```
document.stat.src = myimage.src; 
```

我的 Javascript 条件逻辑根据状态在各种图像之间切换。该代码可以很好地处理单个图像，但我已将它们组合成一个精灵表，现在需要从表中分配单个图像。为此，我需要将每个图像定义为 JavaScript 变量。

应该插入什么来代替`background: url...`字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T21:12:27.687

几个月后，我开始使用以下方法，这对我来说变得最简单：

JS代码：

```
 $('[class*=sprite-]').each(function(){
        var crr = this.className.match(/sprite\-(\d+)\-(\d+)/);
        if ( crr && crr[2]) {
            $(this).css('background-position', '-'+ crr[1] +'px -'+ crr[2] +'px');
            $(this).addClass('sprite');
        }
    }); 
```

CSS 代码：

```
.sprite {
    border: none;
    background-color: transparent;
    background-image: url(your-sprite-image.gif);
    background-repeat: no-repeat;
} 
```

HTML 代码（您可以用您的精灵坐标替换“50x50”）：

```
<img class="sprite-50-50" width="100" height="200" src="use-a-blank-image.gif" alt="" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:15:39.503

我不是 100% 确定您要做什么，因为代码有点奇怪。`src`属性是`src`图像的。如果你正在做一个精灵......那么你可能应该使用 div 标签，甚至不使用 img。精灵通常不是“img”标签，而通常是“div”标签，它们被格式化为使用背景图像仅显示精灵表的单帧。您只需要使用`backgroundImage`和属性调整 div 的背景属性`backgroundPosition`并显示您创建的精灵。没有理由在 javascript 中创建 Image 对象并尝试将其应用于您的代码。

# php - 组织和命名上传的文件

> ID：14430289
> 
> 赞同：0
> 
> 时间：2013-01-20T22:55:40.770
> 
> 标签：php, file-upload

ogranise 和命名上传文件的最佳方法是什么？

我可能错了，但我觉得将所有文件保存在一个目录中并不是一个好习惯，因为如果需要浏览文件，这会导致文件系统变慢？

欢迎所有想法和想法

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:59:58.633

我使用这样的函数为上传的文件生成 3 级文件夹树：

```
function get_1000_path($id)
{
  $id = strval($id);
  $id = str_repeat("0", 9 - strlen($id)).$id;

  $path = substr($id, 0, 3)."/".substr($id, 3, 3)."/".substr($id, 6, 3)."/";

  return $path;
} 
```

所以一个子文件夹中的最大文件数是 1000，文件系统可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:26:26.330

我认为这取决于您的系统/站点或需求，即。对于用户门户，这样可能会更好`user_images/USER-ID/filename-unid_id.jpg`。例如，这可能是`uploads/news_images/YYYY/MM/DD/filename-unid_id.jpg`新闻站点的有用类型。在这一点上，它不需要像 md5 这样的大 unid_id 或其他东西，您可以使用 php `hash`，如：`$unid_id = hash('crc32b', microtime())`。因为存在强硬勾结的可能性。

```
// in your upload file
$dir = "uploads/news_images/". date("Y-m-d");
if (!is_dir($dir)) {
    mkdir($dir, 0777, true);
    if (!is_writable($dir)) chmod($dir, 0777); // try again changing mod
} 
```

但是，在这两个示例中，您都需要存储每个文件的文件名/路径。这样，你就用这种方式来存储数据（我个人在存储很多数据时使用json格式，如果我不需要搜索的话）；

```
// table "news_images"
id | file_name | file_data
--------------------------
1  | blue fish | {"path":"2012/12/12", "slug":"blue-fish-9834a12b", "ext":"jpg" ... 
```

祝你好运。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:03:12.480

这取决于您的应用程序是如何工作的。

如果它类似于用户画廊，我会简单地为每个用户创建一个文件夹，然后是年 -> 月结构。

如果文件由所有用户共同共享，我会根据时间（年 -> 月 -> 周 -> 日）将它们组织在不同的目录中。如果您的网站预计不会有很多流量，那么一年 -> 月的划分就足够了。

我会使用[uniqid()](http://php.net/manual/en/function.uniqid.php)函数来重命名上传的文件，这样就不需要检查覆盖或重复。

# c++ - 为什么编译器不能通过逗号运算符扩展可变参数模板的参数？

> ID：14430290
> 
> 赞同：5
> 
> 时间：2013-01-20T22:55:45.573
> 
> 标签：c++, c++11, variadic-templates, comma

我知道[我们不能像使用逗号运算符链一样使用可变参数扩展](https://stackoverflow.com/questions/10226090/can-variadic-expansions-be-used-as-a-chain-of-comma-operator-calls)。在那个问题中，样本是这样的：

```
template<typename... Args>
inline void increment_all(Args&... args) 
{
    ++args...; 
} 
```

首先递增或扩展可能是模棱两可的，因此括号不会受到伤害：

```
template<typename... Args>
inline void increment_all(Args&... args)
{
    (++args)...; 
} 
```

或类似的东西：

```
template<typename... Args>
void cout_all(Args&&... args)
{
    (std::cout << std::forward<Args>(args))...; 
} 
```

我知道我们可以使用一些递归技巧来获得我们想要的东西，[就像这样](https://stackoverflow.com/questions/12342633/how-do-i-print-out-the-arguments-of-a-function-using-a-variadic-template)。我不知道为什么标准不描述这种行为？我的意思是，背后的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T23:29:20.437

允许包扩展的其他上下文是列表，其中逗号是列表元素之间的分隔符，而不是运算符。

例如，`f(args...)`展开为函数参数列表，`tuple<Args...>`展开为模板参数列表。

在您的示例中，包扩展形成一个语句，语句的子表达式之间的逗号是逗号运算符，它可能被重载，导致任意复杂的代码，并且与内置逗号运算符不同，*它不*强制从左到右评估. 如果您的`(std::cout << std::forward<Args>(args))...;` 示例以未指定的顺序写出 args，您会感到惊讶，因为参数包中的一种类型重载`operator<<`并且`operator,`破坏了评估顺序。

这样做不会是对当前规则的简单扩展，这将是一个完全不同的背景，具有非常不同的效果。

> 首先递增或扩展可能是模棱两可的，因此括号不会受到伤害：

No, it wouldn't be ambiguous. It's OK to use `f(++args...)` and it's clear and unambiguous. The difficulty with your suggestion is not how to parse `++args...` it's what happens after you expand it to a statement containing comma operators.

# php - PHP 多服务器会话

> ID：14430294
> 
> 赞同：2
> 
> 时间：2013-01-20T22:56:08.383
> 
> 标签：php, mysql, amazon-ec2, multiserver

我有一个 PHP 系统，如果需要，我想将其移植到多个服务器上。目前我只是以 PHP 的默认方式存储用户的当前会话信息（假设在内存中）。我可以获得一个我需要在我的 MySQL 数据库中的表中放入什么的示例以及一些实现示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:13:40.817

默认会话存储系统实际上是在文件系统上。一些系统缓存可用于从内存中提取它。

现在，为了进入多服务器设置，您的服务器基本上不需要相互共享任何内容。为此，会话需要存储在创建和访问它们的服务器之外。

在数据库中存储会话是一种选择，但它会增加数据库的负载，并且在某些情况下您必须小心锁定。默认会话处理具有锁定，它一次只允许一个线程访问给定会话，数据库处理程序可能不会这样做。如果您只是读取会话数据，这可能不会成为问题，但如果您正在更改它，则可能会出现问题。

memcached 扩展允许会话数据复制到 memcached 节点。我更喜欢这条路线，因为它允许您将会话保留在内存中并避免增加额外的数据库负载（这通常更难以扩展）

# c++ - 将 const 放在标题中

> ID：14430296
> 
> 赞同：14
> 
> 时间：2013-01-20T22:56:20.997
> 
> 标签：c++

从我正在阅读和测试的所有内容来看，没有办法（没有预处理器宏）在共享标头中定义一个常量并确保每个 TU 没有为该常量创建自己的存储。

我可以做这个：

`const int maxtt=888888;`

这与以下内容完全相同：

`static const int maxtt=888888;`

如果此标头是共享的，它将起作用，但每个 TU 都有自己的`maxtt`. 我也可以这样做，以防止：

`extern const int maxtt;`

但是我不能`maxtt`在这里定义；必须在 CPP 中完成以避免链接器错误。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-20T23:00:29.443

由于变量是常量，因此每个 TU 都有自己的副本这一事实通常是无关紧要的。

`static`由于这个原因，在 C++ 中，命名空间范围内的常量是隐含的。通常这允许比只有一个带有外部链接的实例*更好*的代码，因为（如果变量实际上是一个常量表达式）常量通常可以直接折叠到使用站点中并且根本不需要存储.

因此，除非您真的需要获取常量的地址或类似的东西，否则您应该坚持使用静态版本。（正如您已经观察到的，您可以通过添加来强制外部链接`extern`。）另一个原因可能是您正在动态初始化并且只需要*一次*调用初始化程序：

```
// header:
extern int const n;

// one implementation:
int const n = init_function_with_side_effects(); 
```

静态构造（`int const n = init();`在标头中）将导致函数在每个 TU 中调用一次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T23:30:32.640

你写，

> “从我正在阅读和测试的所有内容来看，没有办法（没有预处理器宏）在共享标头中定义常量并确保每个 TU 不会为该常量创建自己的存储。”

幸好这是***不正确***的。

对于一个小的整数值，您始终可以只使用`enum`. 权衡是你不能传递一个`enum`值的地址，因为它没有地址。这是纯粹的价值。

但是，为整数值节省空间是一件毫无意义的事情，因为它太小了。

所以，让我们考虑一件大事，

```
struct BiggyThingy
{
    unsigned char zeroes[1000000];
    BiggyThingy(): zeroes() {}
}; 
```

现在我们如何`BiggyThingy`在头文件中声明一个常量并确保整个程序只有一个常量？

## 使用内联函数。

那么最简单的就是这个：

```
inline BiggyThingy const& getBiggyThingy()
{
    static BiggyThingy const theThingy;
    return theThingy;
}

static BiggyThingy const& biggyThingy = getBiggyThingy(); 
```

如果您不希望引用在每个翻译单元中占用空间（如指针），则只需使用没有符号简化引用的函数。

## 使用模板常量技巧。

这是另一种提供常量的方法，而是利用模板的特殊规则：

```
template< class Dummy >
class BiggyThingyConstant_
{
public:
    static BiggyThingy const value;
};

template< class Dummy >
BiggyThingy const BiggyThingyConstant_<Dummy>::value;

typedef BiggyThingyConstant_<void> BiggyThingyConstant; 
```

可以像这样访问

```
foo( BiggyThingyConstant::value ) 
```

或者，如果您想要更好的符号，您可以为每个翻译单元添加一个参考，就像内联函数解决方案一样。

## 免责声明：

编译器未修改的代码。

但我想你明白了。;-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T23:00:15.763

仅当您应用任何需要常量地址的操作时，此代码才会在 TU 中生成一个常量。

```
static int maxtt = 888888;
int * pmaxtt = &maxtt; //address of constant requested. 
```

`maxtt`这也可以正常工作并避免链接器问题（尽管如果请求地址，它将存储在每个 TU 中）：

```
constexpr int maxtt = 888888; 
```

避免`extern`构造，因为它无法优化。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-20T23:06:01.183

如果您非常担心存储，请使用枚举：

```
enum { maxtt = 888888 }; 
```

枚举器是标量右值，因此不需要存储。说是违法的`&maxtt`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T23:05:38.850

确实，您对语义的理解是正确的。

在实践中，每个翻译单元可能无法获得整数存储的副本。一个原因是编译器可能将值实现为文字，无论它被引用到哪里。如果链接器发现它没有被引用，它也可能足够聪明地丢弃存储。

编译器可能无法自由地为您的常量使用文字。您可能会引用该整数，或获取指向它的指针。在这种情况下，您需要存储——甚至可能需要交叉编译的唯一性。如果您`const`在每个编译单元中获取符号的地址，您可能会发现它不同，因为每个对象都会获得一个唯一的静态副本。

如果您使用枚举，您可能会遇到类似的问题；您`const int`有存储空间，您可以获取该存储空间的地址。在将枚举数存储在某个地方之前，您无法获取枚举数的地址。

# node.js - HAProxy/Websockets 为什么不断创建新的套接字？

> ID：14430303
> 
> 赞同：2
> 
> 时间：2013-01-20T22:57:24.733
> 
> 标签：node.js, socket.io, haproxy

我正在尝试使用 HAProxy 设置 Websocket，配置如下：http 流量 -> haproxy -> varnish -> nginx -> 节点 ws 流量 -> haproxy -> 节点

一个子域强制使用 ssl，因此 haproxy 将任何 http 流量重定向到 https。（和 ws 到 wss）

一切都按预期工作，除了一个问题，不断创建新的套接字而不是一个（我可以在 Chrome 的调试控制台中看到它们每隔几秒钟创建一次）

当我使用 Varnish 做 Websockets 管道时，我没有遇到这个问题。

我怎样才能解决这个问题 ？

```
global
  daemon

defaults
  mode  http

frontend insecure
 # HTTP
  bind :80

  timeout client 5000

  # acl
  acl is_console hdr_end(host) -i console.mydomain.com
  acl is_client hdr_end(host) -i www.mydomain.com
  acl is_websocket hdr(Upgrade) -i WebSocket
  acl is_websocket hdr_beg(Host) -i ws

  # Redirect all HTTP traffic to HTTPS
  redirect location https://console.mydomain.com if is_console

  use_backend node_console if is_console is_websocket
  use_backend node_client if is_client is_websocket
  default_backend varnish

frontend secure
 # HTTPS
  bind :443 ssl crt /etc/ssl/console.mydomain.com.pem

  timeout client 5000

  # acl
  acl is_console hdr_end(host) -i console.mydomain.com
  acl is_client hdr_end(host) -i www.mydomain.com
  acl is_websocket hdr(Upgrade) -i WebSocket
  acl is_websocket hdr_beg(Host) -i ws

  use_backend dealspot_console if is_console is_websocket
  use_backend dealspot_client if is_client is_websocket
  default_backend varnish

backend varnish
  balance leastconn
  option forwardfor
  timeout server 5000
  timeout connect 4000
  server varnish1 127.0.0.1:6081

backend node_client
  balance leastconn
  option forwardfor
  timeout queue 5000
  timeout server 5000
  timeout connect 5000
  server client_node1 127.0.0.1:3000

backend node_console
  balance leastconn
  option forwardfor
  timeout queue 5000
  timeout server 5000
  timeout connect 5000
  server console_node1 127.0.0.1:3001 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:44:43.370

我设法通过在后端将“隧道超时”设置为一天来解决这个问题

# python - osx下子进程打开

> ID：14430305
> 
> 赞同：2
> 
> 时间：2013-01-20T22:57:50.397
> 
> 标签：python, macos, subprocess

我的 prog 中有一行用于启动程序的其他实例：

```
a=subprocess.Popen(__file__) 
```

在linux下它工作正常。

但是在 osx 下，它并没有按应有的方式创建一个新窗口（该程序是一个 Tkinter 程序），但它根本没有给出任何错误。（我检查了**_*文件*_**实际上是正在运行的程序的正确名称，它是可执行的）

回报是这样的：

```
>    pprint (vars(a))
{'_child_created': True,
 'pid': 38865,
 'returncode': None,
 'stderr': None,
 'stdin': None,
 'stdout': None,
 'universal_newlines': False} 
```

任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:39:03.220

你有一个尴尬的问题。你知道吗 ？您的窗口只是隐藏在之前创建的另一个窗口后面。

要看到这一点，请将最新创建的窗口显示在第一个窗口的前面，如下所示：

```
import Tkinter
import subprocess

if __name__ == "__main__":
    try:
        open('bluh_check')
    except IOError:
        open('bluh_check', 'w').close()
        x = subprocess.Popen(['python', __file__])
        print vars(x)
        title = 'there'
    else:
        title = 'hi'

    root = Tkinter.Tk()
    root.title(title)
    root.withdraw()
    root.deiconify()
    root.mainloop() 
```

# ruby-on-rails - 使用 accept_nested_attributes_for (b/t & has_many) 以单一形式创建单独的模型

> ID：14430307
> 
> 赞同：0
> 
> 时间：2013-01-20T22:58:03.813
> 
> 标签：ruby-on-rails, devise, nested-forms, mass-assignment

尝试使用嵌套属性在一个表单中创建一个`Organization`和一个。`User`我收到以下错误：*无法批量分配受保护的属性：用户（ActiveModel::MassAssignmentSecurity::Error）*

把我的头发拉出来

**组织.rb**

```
class Organization < ActiveRecord::Base  
  attr_accessible :name, :users_attributes
  has_many :users, dependent: :destroy      
  accepts_nested_attributes_for :users  
end 
```

**user.rb**（使用设计）

```
class User < ActiveRecord::Base
  attr_accessible :email     
  belongs_to :organization
end 
```

**新的.html.haml**

```
= form_for @organization do |f|

  = f.label :name, "Company Name"
  = f.text_field :name, placeholder: "Company Name"

  = f.fields_for :user do |ff| -# tried :users here and the form doesn't render
    = ff.label :email, "Email Address"
    = ff.email_field :email, placeholder: "Email Address"

= f.submit "Create Account" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:01:16.020

这已经在 Stackoverflow 上得到了很多回答。

```
f.fields_for :users 
```

在控制器中，您需要构建一个用户：

```
@organization.users.build 
```

你得到`Can't mass-assign protected attributes: user`是因为用户属性不可访问，因为它不存在。

# adobe - 如何从 Extendscript 中调用 python 或 shell 脚本？

> ID：14430312
> 
> 赞同：7
> 
> 时间：2013-01-20T22:58:58.743
> 
> 标签：adobe, photoshop, adobe-illustrator, extendscript, adobe-premiere

我有一个需要从 Extendscript 脚本中调用的 python 脚本。是否有任何可用的库函数可以做到这一点？我尝试在文档和许多其他在线资源中找到解决方案，但到目前为止对我没有任何帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T14:32:26.347

看看[这个例子](https://github.com/fabiantheblind/exec-term)。它在脚本文件旁边
创建一个[.term文件并执行它。](http://docstore.mik.ua/orelly/unix3/mac/ch01_03.htm)

这是一个干净的版本：

```
main();
function main() {
  var script_file = File($.fileName); // get the full path of the script
  var script_folder = script_file.path; // get the path from that
  var new_termfile = createTermFile("execute_something", script_folder);
  new_termfile.execute(); // now execute the termfile
}
/**
 * creates a .term file
 * @param  {String} term_file_name --> the name for the .term file
 * @param  {Strin} path --> the path to the script file
 * @return {File}                the created termfile
 */
function createTermFile(term_file_name, path) {
/*
http://docstore.mik.ua/orelly/unix3/mac/ch01_03.htm
1.3.1.1\. .term files
You can launch a customized Terminal window from the command line by saving some prototypical Terminal settings to a .term file,
then using the open command to launch the .term file (see "open" in Section 1.5.4, later in this chapter).
You should save the .term file someplace where you can find it later, such as ~/bin or ~/Documents.
If you save it in ~/Library/Application Support/Terminal, the .term file will show up in Terminal's File  Library menu.
To create a .term file, open a new Terminal window, and then open the Inspector (File  Show Info, or -I)
and set the desired attributes, such as window size, fonts, and colors. When the Terminal's attributes
have been set, save the Terminal session (File Save, or -S) to a .term file (for example, ~/Documents/proto.term).
Now, any time you want to launch a Terminal window from the command line, you can issue the following command:
 */
  var termfile = new File(path + "/" + term_file_name + ".term");
  termfile.open("w");
  termfile.writeln(
      "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
      "<!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\"" +
      "\"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n" +
      "<plist version=\"1.0\">\n" +
      "<dict>\n" +
      "<key>WindowSettings</key>\n" +
      "<array>\n" +
      " <dict>\n" +
      "<key>CustomTitle</key>\n" +
      "<string>My first termfile</string>\n" +
      "<key>ExecutionString</key>\n" +
      "<string>python\nprint \"Hello World\"\nexit()</string>\n" +
      "</dict>\n" +
      "</array>\n" +
      "</dict>\n" +
      "</plist>\n");
  termfile.close();
  return termfile;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T18:40:55.143

ExtendScript File 对象有一个 execute() 方法，如 Fabian 所示。我不知道 .term 文件，而是使用 .command 文件，这是一个纯 shell 脚本而不是 XML。

如果在 InDesign 中运行，您可以绕过 Terminal.app 并使用 AppleScript：

```
myScript = 'do shell script "diff f1 f2 > o" ';
app.doScript(myScript, ScriptLanguage.applescriptLanguage); 
```

# javascript - 选择选项时更改变量值，不再选择时返回先前的值

> ID：14430317
> 
> 赞同：1
> 
> 时间：2013-01-20T22:59:35.093
> 
> 标签：javascript, jquery, variables, select

我需要根据选择的下拉菜单选项来更新变量的值（在示例中我称之为“tot”）。如果我选择选项 1 或 2，tot 必须增加 10，如果我选择选项 3，变量“tot”不得增加。如果我选择选项 1，然后我改变主意并选择选项 3，则必须恢复 Tot 的值。

这是选择的html

```
<select name='hello' id='hello'>
   <option>Select an option...</option>
   <option id='one'>One</option>
   <option id='two'>Two</option>
   <option id='three'>Three</option>
</select> 
```

这是我编写的 jquery 脚本。我想我不明白 .change 函数的功能，因为它不像我预期的那样工作。

```
var extra = 0;
var tot = 0;

$(document).ready(function () {
   $('#hello').change(function(){
   if($('#one').is(':selected')) {
     extra = 10;
   }
   else if($('#two').is(':selected')) {
     extra = 10;
   }
   else if($('#three').is(':selected')) {
     extra = 0;
   }
     tot = tot + extra;
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:11:37.047

```
var extra = 0;
var tot = 0;
var initialTot = tot;

$(document).ready(function () {

   var previous = 0;
   var selected = 0;
   $('#hello').change(function(){
   if($('#one').is(':selected')) {
     previous = selected;
     selected = 1;
     extra = 10;
   }
   else if($('#two').is(':selected')) {
     previous = selected;
     selected = 2;
     extra = 10;
   }
   else if($('#three').is(':selected')) {
     previous = selected;
     selected = 3;
     extra = 0;
   }
     tot = tot + extra;
     if(previous === 1 && selected === 3) {
         tot = initialTot;
     }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:07:27.703

或者（如果我正确理解了您的要求）....

```
var tot = 120;  //some number picked at random
var helloed = false; // flag for whether incremented 

$(document).ready(function(){
    $("#hello").change(function(){
        var sel = $(this).find(":selected").attr("id")
        if (sel == "one" || sel =="two" ) {
            if (!helloed) {
                tot += 10;
                helloed = true;
            }
        } else { // 'three' selected
            if (helloed) {
                tot -= 10;
                helloed = false;
            }
        }
    alert ("Tot is now " + tot);    
    });
}); 
```

如果有更多选项，我会选择 switch 而不是 IF 但这将适用于这个例子

# three.js - 导入 SnappyTree (proctree) 模型

> ID：14430319
> 
> 赞同：1
> 
> 时间：2013-01-20T22:59:38.323
> 
> 标签：three.js

我正在尝试显示由 SnappyTree/Proctree ( [http://www.snappytree.com/](http://www.snappytree.com/) ) 创建的模型。

Proctree 旨在与 GLGE 一起使用，但我几乎可以使用 Three.js 中的库生成数据。基本上，我构建了一个自定义 json 对象，向其中添加 proctree 数据并使用 JSONLoader 生成最终的几何图形。

我怀疑正在发生的事情，顶点（点云）被正确导入，但数组面指的是错误的顶点或被错误地解释。

```
var tree = new Tree(json); // Proctree
// window.console.log(tree);
var model = { "metadata" : { "formatVersion" : 3.1, "generatedBy": "bb3d2proctree",      "vertices": 0,  "faces": 0, "description": "Autogenerated from proctree." },
  "materials": [{ // just testing...
  "diffuse": 20000
  }],
  "colors": [0xff00ff, 0xff0000] // just testing
};

model.vertices = Tree.flattenArray(tree.verts);
model.normals  = Tree.flattenArray(tree.normals);
model.uvs      = [Tree.flattenArray(tree.UV)];

model.faces    = Tree.flattenArray(tree.faces);

var loader = new THREE.JSONLoader();
loader.createModel(model, function(geometry, materials) {
    // cut out for brewity... see jsfiddle
} 
```

它几乎可以工作（还没有进入材料..）树看起来有点正确，但是面有点乱，我敢肯定有一些简单的格式差异，应该可以修改面数组，因此它可以与 Three.js 一起正常工作。

JSFiddle在这里：http: [//jsfiddle.net/nrZuS/](http://jsfiddle.net/nrZuS/)

如何将数据正确导入 Three.js？

这就是它的样子：[http ://www.snappytree.com/#seed=861&segments=10&levels=5&vMultiplier=0.66&twigScale=0.47&initalBranchLength=0.5&lengthFalloffFactor=0.85&lengthFalloffPower=0.99&clumpMax=0.449&clumpMin=0.404&branchFactor=2.75&dropAmount =0.07&growAmount=-0.005&sweepAmount=0.01&maxRadius=0.269&climbRate=0.626&trunkKink=0.108&treeSteps=4&taperRate=0.876&radiusFalloffRate=0.66&twistRate=2.7&trunkLength=1.55&trunkMaterial=1.55&trunkMaterial=TrunchType=TrunkType 2&](http://www.snappytree.com/#seed=861&segments=10&levels=5&vMultiplier=0.66&twigScale=0.47&initalBranchLength=0.5&lengthFalloffFactor=0.85&lengthFalloffPower=0.99&clumpMax=0.449&clumpMin=0.404&branchFactor=2.75&dropAmount=0.07&growAmount=-0.005&sweepAmount=0.01&maxRadius=0.269&climbRate=0.626&trunkKink=0.108&treeSteps=4&taperRate=0.876&radiusFalloffRate=0.66&twistRate=2.7&trunkLength=1.55&trunkMaterial=TrunkType2&twigMaterial=BranchType5) twigMaterial树枝，并且没有纹理，所以此时我只担心在 jsfiddle 中可以看到的树干形状）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:16:36.200

没关系，让它工作。

代替：

model.faces = Tree.flattenArray(tree.faces);

我愿意：

```
model.faces    = [];
for (var i = 0; i < tree.faces.length; i++) {
  var face = tree.faces[i];
  model.faces.push(0);
  model.faces.push(face[0]); // v1
  model.faces.push(face[1]); // v2
  model.faces.push(face[2]); // v3
} 
```

在这里更新了 jsFiddle：http: [//jsfiddle.net/KY7eq/](http://jsfiddle.net/KY7eq/)

# javascript - Underscore.js：集合中项目的总和

> ID：14430321
> 
> 赞同：17
> 
> 时间：2013-01-20T23:00:00.787
> 
> 标签：javascript, underscore.js

[我在这里](http://plnkr.co/edit/B5HGxhwvWsfvOR97z7TL?p=preview)做了一个小 plnkr来展示我想要实现的目标。我有一个大数据集，我喜欢将单个类型相加得到总数。

我可以考虑迭代并将结果添加到对象哈希中，但想知道用下划线解决它的更优雅的方法。我正在使用 underscore.js，但从未尝试过 map reduce 或其他功能范式。请更新 plnkr 以了解如何执行此操作。

[http://plnkr.co/edit/B5HGxhwvWsfvOR97z7TL?p=preview](http://plnkr.co/edit/B5HGxhwvWsfvOR97z7TL?p=preview)

```
var data = [ {'type': "A", 'val':2},
  {'type': "B", 'val':3},
  {'type': "A", 'val':1},
  {'type': "C", 'val':5} ];

 _.each(data, function (elm, index) {
   console.log(elm);  
 });

 /*
 Desired output

 out = [ {'type': "A", 'total':3},
  {'type': "B", 'total':3},
  {'type': "C", 'total':5} ];

 */ 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-20T23:31:47.967

```
var data = [ { type: "A", val: 2 },
             { type: "B", val: 3 },
             { type: "A", val: 1 },
             { type: "C", val: 5 } ];

var groups = _(data).groupBy('type');

var out = _(groups).map(function(g, key) {
  return { type: key, 
           val: _(g).reduce(function(m,x) { return m + x.val; }, 0) };
}); 
```

[演示](http://jsbin.com/otucik/37/edit)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T23:35:15.423

与@GregL 的答案几乎相同，只是多了一点下划线：

```
summed_by_type = _(data).reduce(function(mem, d) {
  mem[d.type] = (mem[d.type] || 0) + d.val
  return mem
}, {})

pairs = _(summed_by_type).map(function(v,k) { return {type: k, total: v} }) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T23:13:30.583

以下将起作用，但我认为它与您的想法相似。优点是通过使用对象散列来存储总数，您可以在类型上建立索引，这意味着您不必每次尝试查找具有正确类型的对象时都遍历散列。然后在最后遍历它一次以构建最终的输出数组。

Plunkr 来[了](http://plnkr.co/edit/z6fhMLU9rtvGhLgp5Dc4?p=preview)。

代码如下：

```
var data = [ {'type': "A", 'val':2},
  {'type': "B", 'val':3},
  {'type': "A", 'val':1},
  {'type': "C", 'val':5} ];

var totalPerType = {};
for (var i = 0, len = data.length; i < len; ++i) {
  totalPerType[data[i].type] = totalPerType[data[i].type] || 0;
  totalPerType[data[i].type] += data[i].val;
}
var out = _.map(totalPerType, function(sum, type) {
  return { 'type': type, 'total': sum };
});

 console.log('out = ', out); 
```

**编辑：**我创建了一个新的 plunkr，它甚至可以在此处生成 100 万个项目数组（有 6 种可能的类型）[的](http://plnkr.co/edit/z6fhMLU9rtvGhLgp5Dc4?p=preview)速度。从控制台输出可以看出，至少在 Chrome Canary 中，它的运行时间约为 1/3 秒。

我还做了一个[jsPerf 测试](http://jsperf.com/summing-per-type)，测试使用中间散列的速度有多快，结果大约快了 50%。

# mysql - 选择以特定字母开头的所有记录

> ID：14430323
> 
> 赞同：0
> 
> 时间：2013-01-20T23:00:12.020
> 
> 标签：mysql

我正在尝试创建一个 mySQL 语句，它将选择以特定字母开头的所有记录。

例如，选择所有带有字母“A”的产品名称。

这就是我希望结果集的样子：

```
result[0] = "Awesome Bracelets";
result[1] = "Abalone Earrings";
result[2] = "Aloe Gel";
result[3] = "Amscot Figure"; 
```

我**不**希望包含以下结果：

```
result[3] = "Basic Ashtray"; 
```

这是我尝试过的，虽然它似乎返回混合结果，其中一些 prod_name 记录没有任何以“A”开头的单词：

```
"SELECT * FROM products WHERE prod_name LIKE '%A'" 
```

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:03:23.580

你几乎是对的

```
"SELECT * FROM products WHERE prod_name LIKE 'A%'" 
```

# php - 正在创建 Cookie 但无法回显它们

> ID：14430326
> 
> 赞同：1
> 
> 时间：2013-01-20T23:00:23.417
> 
> 标签：php

在我的注册脚本结束时，我设置了一个 'loggedin' 的 cookie，如下所示

> setcookie("登录", $username, time()+60*60*24*30 );

然后只需重定向回主页。

我正在尝试回显该 cookie 的内容。当我右键单击 > 页面信息 > 安全性 > 查看 cookie 时，我可以看到它已创建。

cookie 的名称在那里，“登录”，内容设置为我注册的用户名。但是当我做类似的事情时

> print_r ($_COOKIE);

什么都没有显示。

做一个

> var_dump($_COOKIE);

给

```
array (size=0)
  empty 
```

如果按照前面提到的步骤可以看到 cookie 确实存在，为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:02:36.450

通常可能是因为您没有设置域/路径项。尝试使用：

```
setcookie("loggedin", $username, time()+60*60*24*30, '/', $domain); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:11:19.193

您应该在任何输出之前存储 cookie

因为 cookie 包含在 http 标头中，所以如果您开始输出 html 页面并在此之后存储 cookie - 将不会存储任何内容

# jquery - AppendTo 在网页上不起作用

> ID：14430329
> 
> 赞同：0
> 
> 时间：2013-01-20T23:00:41.937
> 
> 标签：jquery, appendto

我有这个 jQuery 脚本：

```
$('.company').each(function(i, item) {
  var tempTitle = item.title;
  $('Working').appendTo("div[title='" + tempTitle + "']");
}); 
```

这是HTML：

```
<li><div class="company" title="32"></div><div class="shortdescription">Short Description Here</div></li>
<li><div class="company" title="33"></div><div class="shortdescription">Short Description Here</div></li>
<li><div class="company" title="34"></div><div class="shortdescription">Short Description Here</div></li>
<li><div class="company" title="35"></div><div class="shortdescription">Short Description Here</div></li>
<li><div class="company" title="36"></div><div class="shortdescription">Short Description Here</div></li> 
```

并且没有在 div 中添加任何细节。

我犯的错误在哪里？o_o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:08:30.707

`appendTo`需要附加 HTML 或 jQuery 包装元素。您正在传递简单的字符串**工作**。

尝试这个：

```
$('.company').each(function(i, item) {
  var tempTitle = item.title;
  $('<div>appeded by jQuery</div>').appendTo("div[title='" + tempTitle + "']");
}); 
```

现在替换`<div>appeded by jQuery</div>`为您要附加的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:36:29.463

在保持简单的基础上 - OP 的代码看起来可能是机器生成的，因此他可以依赖结构保持不变

所以：

```
$('.company').each(function(i, item) {
  $(this).next().append('Working');
}); 
```

如果是这样的话会起作用。

或者

```
$(this).next('.shortdescription').append(' Working'); 
```

为了安全

# python - 用pygobject监听特定键的正确方法？

> ID：14430331
> 
> 赞同：0
> 
> 时间：2013-01-20T23:00:56.623
> 
> 标签：python, gtk, pygobject

我对使用 python 和 gtk 编程非常陌生。经过一天的谷歌搜索并尝试查找文档后，我想出了以下解决方案来对按下给定按钮做出反应：

```
from gi.repository import Gtk,Gdk

class BNWrestling(Gtk.Window):

    def __init__(self, bnt):
        self.connect("key_press_event",self.on_key_press)

    def on_key_press(self,widget,eventkey):
        keyval = eventkey.get_keyval()[1] #very ugly here
        if keyval == Gdk.KEY_Left:
            do_sth() 
```

这段代码做了它应该做的，但是，我不确定这是否是它应该做的方式。尤其是我检索 keyval 的方式似乎并不那么优雅。有没有更好的方法？

感谢您对某些文档的建议或指导（我找不到任何文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:38:52.730

您可以使用 keyval 名称（与没有前缀的 GDK_KEY_XXX 常量相同）：

```
def on_key_press_event(self, widget, event, user_data=None):
    key = Gdk.keyval_name(event.keyval)
    if key == "Left":
        do_something()
        return True
    return False 
```

# scala - 难以理解函数语法

> ID：14430334
> 
> 赞同：3
> 
> 时间：2013-01-20T23:01:05.377
> 
> 标签：scala

我可以理解这一点：

```
scala> def f(i: Int) = "dude: " + i
f: (i: Int)java.lang.String

scala> f(3)
res30: java.lang.String = dude: 3 
```

它定义了一个函数 f，它接受一个 int 并返回一个形式为 dude: + 传入的 int 的字符串。

现在可以像这样指定相同的函数：

```
val f: Int => String = x => "dude: " + x
scala> f(3)
res31: String = dude: 3 
```

*   为什么我们需要两个`=>`
*   是什么`String = x`意思？我认为当你想在 Scala 中定义某些东西时，你会做`x:String`什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T23:07:17.510

您应该将其解析为

```
val (f: Int => String) = (x => "dude: " + x) 
```

因此它指定 f 具有类型`(Int => String)`并被定义为一个匿名函数，它接受一个`Int`参数`(x)`并返回 a `String`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T23:27:41.973

只是为了澄清一点。`def`语句定义方法，而不是函数。

现在，对于功能。你可以这样写：

```
val f: (Int => String) = x => "dude: " + x 
```

它可以读作“f 是从 Int 到 String 的函数”。所以，回答你的问题，`=>`在类型位置意味着函数从类型到类型，而`=>`在值位置意味着接受参数`identifier`并返回`expression`。

此外，它还可以依赖于类型推断器：

```
val f = (x:Int) => "dude: " + x 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T02:24:24.023

Lee 和 pedrofurla 都给出了很好的答案。我还要补充一点，如果您希望将您的方法转换为函数（作为参数传递、用作部分应用的函数等），您可以使用神奇的下划线：

```
def foo(i: Int) = "dude: " + x
val bar = foo _  // now you have a function bar of type Int => String 
```

# java - 为什么我不能使用三元？运算符在两个函数调用之间进行选择？

> ID：14430335
> 
> 赞同：5
> 
> 时间：2013-01-20T23:01:08.207
> 
> 标签：java

我最近在编程并使用 ? : 操作数。这是我的代码。

```
 Random rand = new Random();
    for(int x = 0; x < 3; x++) {
        rand.nextInt(1) == 0 ? vertShip(board) : horizShip(board);
    } 
```

我的编译器向我抛出一个错误，指出该行的左侧 (rand.nextInt(1) == 0 ) 必须是一个变量。我尝试过变体，例如

```
 Random rand = new Random();
    int a = rand.nextInt(1);
    for(int x = 0; x < 3; x++) {
        a == 0 ? vertShip(board) : horizShip(board);
    } 
```

或左侧的 if 语句，但它们不能解决问题。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T23:03:21.107

不是每个表达式都是一个语句。在这里使用一个`if`声明。请参阅Java SE 7 Java 语言规范中的第[14.8 节表达式语句。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.8)

> 某些类型的表达式可以通过在它们后面加上分号来用作语句。
> 
> ```
> ExpressionStatement:
>     StatementExpression ;
> 
> StatementExpression:
>     Assignment
>     PreIncrementExpression
>     PreDecrementExpression
>     PostIncrementExpression
>     PostDecrementExpression
>     MethodInvocation
>     ClassInstanceCreationExpression 
> ```

以上各项的表达式语句示例：

```
x = y;
++x;
--x
x++;
x--;
fn(); // Or donkey.fn();, etc.
new Donkey(this); 
```

你不能做的是：

```
b ? f() : g();
f() + g(); 
```

但是，如果你一心想混淆你的代码，我想你可以这样写：

```
fn(a == 0 ? vertShip(board) : horizShip(board));
(a == 0 ? vertShip(board) : horizShip(board)).fn(); 
```

（我想。我手头没有编译器，通常不会写这样的代码。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T23:03:25.873

编译器是对的。三元运算符返回一些东西，所以你需要将它分配给一个变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T23:04:09.403

Java 不是 perl。使用 if 语句：

```
 if (rand.nextInt(1) == 0) {
    vertShip(board);
 } else { 
    horizShip(board);
 } 
```

您不能通过粘贴三元来构建函数调用语句？在前面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T23:17:13.107

```
a == 0 ? vertShip(board) : horizShip(board); // is an expression
if (a == 0) vertShip(board); else horizShip(board); // is a statement 
```

相比：

```
if (condition) 
{
    execute statement(s)
}
else
{
    execute statement(s)
} 
```

和：

```
 expression1 ? expression2 : expression3 
```

使用适当的构造。

# windows-7 - 如何播放文件夹中的随机视频文件并移动到下一个文件夹并对批处理脚本执行相同操作？

> ID：14430342
> 
> 赞同：1
> 
> 时间：2013-01-20T23:01:51.540
> 
> 标签：windows-7, random, batch-file, playlist

这有点令人困惑，所以我将尝试解释..（顺便说一句，我使用的是 Windows 7 pc）。

我是看我喜欢的节目长大的，多年来我把很多节目下载到我的外置硬盘上。我一直在寻找一种通过 Windows Media Player 为我的每个节目播放随机剧集的方法，但我似乎找不到任何东西。

几个月前，有人帮我写了一个批处理脚本，它几乎完全符合我的要求，但它似乎并没有为我的节目播放随机剧集。

例如，假设我在一个驱动器中有 X 个节目（例如，辛普森一家、评论家、比尔奈、加菲猫、蝙蝠侠等）

在每个节目中，有 X 集（例如辛普森一家有 85 集，评论家有 24 集，比尔尼 100 集，加菲猫 64 集等。）

我一直在寻找一种方法，以便脚本可以查看 Simpsons 文件夹，然后随机选择 1 集，然后转到 Critic 文件夹，随机选择 1 集，然后转到 BillNye 文件夹，依此类推。

当这一切都通过我的所有节目完成后，它会输出一个播放列表文件。所以我所要做的就是将播放列表加载到我的 Windows Media Player 中，而不是花很长时间手动挑选要观看的每一集。

好吧，几个月前有人为我写了这个，但经过数周的测试，它似乎并不是真正随机的，因为它似乎重复了上一个播放列表中的一些相同剧集。（有些文件夹有超过 100 个节目，所以我不明白为什么如果它试图随机播放它仍然会播放同一集）

我试图回到那个人，但我失去了联系，如果那里有人可以帮助我...... ^_^

这是这个脚本：

```
SET extensionList=avi mp4 mkv
SET cnt=0
:Loop
  SET /A cnt+=1
IF EXIST %cnt%.m3u GOTO Loop
>%cnt%.m3u ECHO.#EXTM3U
FOR /D %%a IN (c:\testing\*) DO CALL :PickFile "%%a"
GOTO :EOF

:PickFile
SET searchList=
FOR %%b IN (%extensionList%) DO CALL SET searchList=%%searchList%% "%~1\*.%%b"
FOR /F %%b IN ('2^>NUL DIR /A-D-H-S %searchList% ^| FIND "File(s)"') DO SET limit=%%b
SET /A fileNum=(%random% %% limit) + 1
FOR /F "tokens=2 delims=:" %%b IN ('2^>NUL DIR /A-D-H-S/B %searchList% ^| FINDSTR /N ".*" ^| FINDSTR "^%fileNum%:"') DO ^
CALL :AddList %1 "%%b" >>%cnt%.m3u
GOTO :EOF

:AddList
@ECHO.#EXTINF:-1,%~n2
@ECHO.%~f1\%~2
@GOTO :EOF 
```

在此脚本中，它会为我希望单击的每 X 次输出一个 *.m3u 文件 X 次。

这个脚本的问题是它似乎重复了某些节目的某些剧集，我想知道是否可以稍微修改一下，以便它可以真正随机，或者让最后一集不会重复再次出现在下一个播放列表中？

我希望我没有混淆任何人，而且我对编程知之甚少。几年前我在高中时尝试学习 C++，但我很难过。我只知道基础知识，但如果有人能帮助我~我会永远欠你的。

如果有人有任何问题，我会很乐意尽快回复~再次感谢^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:02:24.687

我认为这里需要进行一些测试:)

这是获取随机数的替代方法

```
%random% * 10 / 32768 + 1 
```

经过几次运行后，我发现它的平均值确实比您正在运行的版本略好。

为了测试我为每个版本做了 1000 次

***塔米脚本***

```
setlocal enabledelayedexpansion
for /l %%a in (1,1,1000) do (
call :RAND
echo !num! >>tammy.txt
)

:RAND
set /a num=(%random% %% 10) + 1 
```

***巴厘岛脚本***

```
setlocal enabledelayedexpansion
for /l %%a in (1,1,1000) do (
SET /A num=!random! * 10 / 32768 + 1
echo !num! >>bali.txt
) 
```

然后，计算每个数字出现的次数（本例中为 1-10）

```
for /l %%a in (1,1,10) do (
find /c "%%a" tammy.txt
) >>tammycount.txt

for /l %%b in (1,1,10) do (
find /c "%%b" bali.txt
) >>balicount.txt 
```

然后比较结果

***tammycount.txt***

```
---------- R2.TXT: 203

---------- R2.TXT: 103

---------- R2.TXT: 82

---------- R2.TXT: 101

---------- R2.TXT: 95

---------- R2.TXT: 87

---------- R2.TXT: 107

---------- R2.TXT: 118

---------- R2.TXT: 104

---------- R2.TXT: 99 
```

***balicount.txt***

```
---------- R.TXT: 201

---------- R.TXT: 90

---------- R.TXT: 91

---------- R.TXT: 101

---------- R.TXT: 108

---------- R.TXT: 97

---------- R.TXT: 101

---------- R.TXT: 105

---------- R.TXT: 106

---------- R.TXT: 106 
```

如您所见，`balicount`显示的平均数字略高（如您所料），所以也许值得尝试我的版本，看看它是否更好。

显然，您必须多次执行此操作才能获得任何实际结果，但如果您有时间，这可能是值得的。

# regex - 在bash中使用正则表达式验证输入

> ID：14430347
> 
> 赞同：1
> 
> 时间：2013-01-20T23:02:17.227
> 
> 标签：regex, bash, awk

我使用了[http://www.regular-expressions.info/examples.html](http://www.regular-expressions.info/examples.html)中的示例来验证以下代码

```
while [[ ! $name =~ ^[a-Z][ \t][a-Z]. ]]; do

                echo "Please enter your Firstname and Surname e.g Joe Bloggs"                           # (a)Ask for NAME,TELEPHONE NUMBER,DOB #
                read name
                echo
        done 
```

我只是想确保用户输入带有空格的名字和第二个名字，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:09:56.227

您的正则表达式有几个问题：

*   您正在检查`a`（小写）和`Z`（大写）之间的字符。这不会像您期望的那样，用于`[A-Za-z]`检查大小写字母。
*   您缺少重复字符；用于`+`匹配一个或多个字符。
*   匹配结束应该是`$`, not `.`（匹配任何单个字符）。

试试这个：

```
^[A-Za-z]+[\ \t][A-Za-z]+$ 
```

如果要验证大写的名字和姓氏，可以使用：

```
^[A-Z][a-z]+[\ \t][A-Z][a-z]+$ 
```

但这不适`Marty McFly`用于不遵循该规则的名称。

# android - 在哪里可以找到大量库存的 Android 绘图？

> ID：14430353
> 
> 赞同：0
> 
> 时间：2013-01-20T23:02:37.377
> 
> 标签：android, resize, stock

正如标题所说。我知道 android.R.drawables 中有drawables，但是因为它们太小了，放大后看起来很可怕。有谁知道我在哪里可以找到比文件夹中更大的当前 4.x 可绘制对象？

由于我对drawables了解不多，android.R.drawables中的股票drawables都是单一尺寸的，还是有多个版本支持不同密度的屏幕？如果是这样，我怎样才能访问这些更大的drawable？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:07:52.617

> 有谁知道我在哪里可以找到比文件夹中更大的当前 4.x 可绘制对象？

如果您的意思是大于`-xhdpi`那些，它们可能在谷歌的某个平面设计师的工作站上。

> android.R.drawables 中的股票drawables 都是单一尺寸的，还是有多个版本来支持不同密度的屏幕？

他们以多种密度运送。

> 如果是这样，我怎样才能访问这些更大的drawable？

它们位于您的 SDK 目录中`platforms/$VERSION/data/res/`，其中`$VERSION`是您已安装的可用 API 级别之一。

# emacs - Pymacs 没有在 Emacs24 上启动

> ID：14430358
> 
> 赞同：2
> 
> 时间：2013-01-20T23:03:15.087
> 
> 标签：emacs, emacs24, pymacs

我正在使用 Emacs 24 并且 Pymacs 似乎没有启动。

我从 ELPA 安装了 pymacs。当我写`M-x pymacs-eval`并给出一个任意表达式时，它给了我以下错误：

```
pymacs-report-error: Pymacs helper did not start within 30 seconds 
```

我在 Pymacs 缓冲区中收到以下消息：

```
Traceback (most recent call last):
File "<string>", line 1, in <module>
ImportError: cannot import name main

Process pymacs exited abnormally with code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:07:44.307

ELPA 包中的 pymacs 似乎不起作用。

从[github 存储库](https://github.com/pinard/Pymacs)手动下载和安装它使其工作。pymacs 的 ELPA 包上只有 Emacs lisp 文件（.el 文件），但存储库也包含 Python 文件，我还在`sudo python setup.py install`它的文件夹中运行了命令。

# php - Date being changed when updating MySQL field

> ID：14430365
> 
> 赞同：0
> 
> 时间：2013-01-20T23:03:51.290
> 
> 标签：php, mysql

I'm running into a weird issue where I'm posting a date in `Y-m-d` format yet it's being changed to a completely different date once I view in the actual MySQL table.

Here's the query

```
UPDATE $admins_table 
SET    expire=$expireu 
WHERE  identity='$donation_row[steam_id] 
```

The expire field is what I'm having issues with. The field itself is a varchar, and the $expireu variable is always a date in `Y-m-d` format ex. `2013-11-16`

When that query is run, with the date I gave as an example above, I get a weird result in the actual MySQL table. If I go to view the table, instead of it storing `2013-11-16` it has stored `1986` as the date. No month or day, just `1986`.

I may have made a very stupid/silly mistake, but at this point I'm unsure of what I've flubbed. Any help in the right direction would be much appreciated, thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T23:07:28.233

haha, use quotes!

```
UPDATE $admins_table SET expire='$expireu' WHERE identity='$donation_row[steam_id]' 
```

mysql substracts 2013-11-16 == 1986

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:07:38.257

the use of ' and " are your friends. you are passing a math problem into mysql which it is solving and then saving the result of. wrap that date in quotes.

# ruby-on-rails - 无法批量分配受保护的属性注册创建设计

> ID：14430368
> 
> 赞同：1
> 
> 时间：2013-01-20T23:04:14.453
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, associations

我使用两个资源设计，管理员和用户，管理员与 tatausaha 的关系和用户与大师的关系

关于与 tatausaha 的管理关系没有错误

但是关于与大师的用户关系我有错误无法批量分配受保护的属性

关于模型 user.rb

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :guru_attributes

  has_one :guru 
  accepts_nested_attributes_for :guru

end 
```

关于模型 guru.rb

```
class Guru < ActiveRecord::Base
  attr_accessible :namaguru, :nip, :user_id
  belongs_to :user
end 
```

在registrationusers_controller.rb

```
class RegistrationusersController < Devise::RegistrationsController
  layout :layout_by_resource3
  skip_before_filter :require_no_authentication
  before_filter :authenticate_admin!
  before_filter :resource_name

  def resource_name
    :user
  end

  def new
    @user = User.new
    @user.build_guru
  end

  def create
    build_resource

    if resource.save
      if resource.is_a?(User)
        redirect_to new_userguru_registrationuser_path, :notice => "Guru was successfully created."
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => new_user_session_path
      end

    else
      clean_up_passwords resource
      respond_with resource
    end

  end

end 
```

在路线.rb

```
 devise_for :users, :controllers => {:registrations => "registrationusers" } 
```

我得到了错误，例如

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attribut
es: guru_attributes):
  app/controllers/registrationusers_controller.rb:17:in `create' 
```

如果有人问我为什么不使用 cancan 或角色用户进行设计？我想试试这个。如何解决我的问题，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:05:24.600

好的，我已经解决了我的问题，将其添加到顶部 def create

```
@user = User.new(params[:user])
@user.guru.update_attributes(params[:guru])
if @user.save && @user.guru.update_attributes(params[:guru]) 
```

# c - 在 C 中执行 pragma pack(1) 的缺点是什么？

> ID：14430370
> 
> 赞同：1
> 
> 时间：2013-01-20T23:04:17.927
> 
> 标签：c, memory-alignment

> **可能重复：**
> [使用 pragma pack(1) 时是否存在性能问题？](https://stackoverflow.com/questions/7793511/are-there-performance-issues-when-using-pragma-pack1)

在 C 中执行 pragma pack(1) 的缺点是什么？我已经为通信协议定义了一些结构数据，我想关闭任何字节对齐，这样数据就在它应该在的位置，并且我得到了结构的实际大小（11 个字节）。关闭字节对齐有什么缺点？是性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:06:25.577

性能会变慢。

如果整数（和其他数据类型）位于“偶数”内存边界上（如果它们可以轻松访问），它们可能会“跨越”内存边界并需要两次提取（CPU 周期）来检索它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T02:07:23.010

有几个“缺点”：

1.  它不是 C。它是某些 C 编译器中特定于实现的 hack。

2.  它并不能真正帮助您解决通过网络发送二进制结构或将它们存储到磁盘的问题，因为您仍然需要处理字节顺序问题。

3.  If`st.foo`是`int`压缩结构的成员，`&st.foo`通常不是有效的`int *`. 当被调用函数尝试通过指针访问数据时，传递`&st.foo`给接受类型参数的函数可能会导致崩溃或内存损坏。`int *`

4.  是无偿的。正确设计的二进制交换结构已经具有零填充，因为所有字段都在与其大小相对应的边界上对齐。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T23:08:36.557

是的。由于处理器/内存连接的性质，在对齐的地址访问多字节值要快得多，如果我没记错的话，对齐也会影响缓存。

如果您将使用结构中的数据进行大量计算，我建议您在代码中使用未打包的版本，并在传输时转换为打包版本。另一方面，如果您没有使用结构中的值进行大量计算，那么这种转换将是浪费的。

# php - 如何保护当前表单会话免受冲突

> ID：14430373
> 
> 赞同：0
> 
> 时间：2013-01-20T23:04:42.540
> 
> 标签：php, forms, session-variables, multi-step

我有一个包含 3 个步骤的表格。我使用 SESSIONS 来逐步保持值。当我在另一个选项卡中打开相同的表单并完成第一步时，这会立即替换另一个表单中的 Session 值。

那么如何创建带有附加到特定表单的字段值的会话呢？我需要避免会话冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:31:42.327

我使用这个函数来处理表单输入：

```
function Hold_Form_Input($formname)
    {
    $FormPost = array();
        foreach ($_POST as $key => $entry)
            {
                $FormPost[$key]= $entry;
            }
     $_SESSION[$formname]= $FormPost;           
    } 
```

我通过隐藏输入传递表单名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:25:34.660

如果形式确实不同，则将其放入多维数组中：

```
$_SESSION['register']['field1']=$_POST['field1'];

$_SESSION['contact']['field1']=$_POST['field1']; 
```

如果它是同一个表单并且只是一个新选项卡，您可以检查该值是否之前设置并忽略它，设置一个标志以表示正在进行表单提交，或者完全删除旧会话值，以便新选项卡中的新表单没有附加值。

# sass - 试图让 susy 网格与骨骼主题一起工作

> ID：14430374
> 
> 赞同：0
> 
> 时间：2013-01-20T23:04:51.440
> 
> 标签：sass, config, susy-compass

**我有以下配置文件**

```
# Require any additional compass plugins here.
require 'susy'
# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "library/css"
sass_dir = "library/scss"
images_dir = "library/images"
javascripts_dir = "library/js"
fonts_dir = "library/fonts"

output_style = :nested 
```

**我还有以下 scss 文件正在被指南针监视**（我的内容周围有一个容器，所以我应该看到网格，但我没有看到它，所以 susy 显然不起作用，但我不知道为什么？任何帮助将不胜感激）

```
// ---------------------------------------------------------------------------
// Imports

@import "susy";

// ---------------------------------------------------------------------------
// Basic Grid

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

$show-grid-backgrounds  : true;

/*
.onecol    { width: 5.801104972%;  }       
.twocol    { width: 14.364640883%; }       
.threecol  { width: 22.928176794%; }       
.fourcol   { width: 31.491712705%; }       
.fivecol   { width: 40.055248616%; }      
.sixcol    { width: 48.618784527%; }      
.sevencol  { width: 57.182320438000005%; } 
.eightcol  { width: 65.74585634900001%; } 
.ninecol   { width: 74.30939226%; }        
.tencol    { width: 82.87292817100001%; }  
.elevencol { width: 91.436464082%; }       
.twelvecol { width: 99.999999993%; }      
*/

// layout & column defaults
.onecol, .twocol, .threecol, .fourcol, .fivecol, .sixcol, .sevencol, .eightcol, .ninecol, .tencol, .elevencol, .twelvecol {
  position: relative;
  float: left;
  margin-left: 2.762430939%;
}

.first {
  margin-left: 0;
}

.last {
  float: right;
}

/* -------------------------------------------------------------------------*/
/* Layout */

.container {
  @include container;
  @include susy-grid-background;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:15:17.007

哎呀原来我的 html 中有一个容器 id 而不是容器类。对不起。

# javascript - 您如何设置单个 JQuery 自动完成小部件的样式？

> ID：14430378
> 
> 赞同：0
> 
> 时间：2013-01-20T23:05:27.083
> 
> 标签：javascript, jquery, html, css, jquery-ui

我没有使用 JQuery UI Themeroller 的主题，我有以下内容：

**连同我的 .html 文件的内容：**

```
<input id="autocomplete"> 
```

**在我的 .html 文件末尾：**

```
$( "#autocomplete" ).autocomplete({
   source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ]
}); 
```

**我将以下内容附加到我的 .html 文件的顶部：**

```
<link rel="stylesheet" href="js/jquery-ui-1.10.0.custom.css" type="text/css">
<script src="js/jquery-1.9.0.js"></script>
<script src="js/jquery-ui-1.10.0.custom.js"></script> 
```

我的问题：我正在尝试设置**特定**的自动完成小部件（不是**所有**自动完成小部件）的样式。我该怎么做呢？

我已经通读了 JQuery UI 文档，我能找到的只是一个为所有自动完成小部件设置样式的解决方案，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:11:07.833

你可以这样做：

```
<div class="specific">
    <input id="autocomplete">
</div> 
```

并在主题下载器给它 css 范围`specific`。

# c# - 他们是一种阻止图片框在调整大小时闪烁的方法吗？

> ID：14430385
> 
> 赞同：3
> 
> 时间：2013-01-20T23:06:28.693
> 
> 标签：c#, .net, vb.net, visual-studio-2010, gdi+

我有一张想要包含在我的 vb.net 应用程序中的图像，所以我在 Photoshop 中将它切片并将其分成多个图片框，并相应地锚定它们，这样当我的应用程序调整大小时，它不会拉伸图像的所有部分。这一切都很好，它看起来很棒，几乎工作得很好..除了在调整表单大小时它会导致图片框闪烁的事实。

我知道图片框不是最快的控件，所以我猜它的刷新速度不够快。除了闪烁之外，即使图片框是透明的，它也会在下方显示为白色背景。

我尝试为背景添加 BG 颜色，希望它在加载时能更好地隐藏闪烁，但无济于事。

所以我的第一个问题是他们有什么方法可以防止这种情况发生吗？如果不是，他们是不是我可以使用的更快的控件？

也许有人知道的自定义图片框，或者即使您知道更快的控件。基本上，任何允许背景图像和透明 BG 颜色的控件都可以工作，只要它更快。

我真的很感激任何帮助。谢谢。PS：我的应用程序在 VB.net 中，但我也添加了一个 C# 标签，因为我很可能不得不切换控件而不是通过代码修复它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T09:39:38.670

两个避免在表单中的控件闪烁您可以使用以下功能仅将其复制并粘贴到form.vb中的任何位置

```
Protected Overrides ReadOnly Property CreateParams() As CreateParams
        Get
            Dim cp As CreateParams = MyBase.CreateParams
            cp.ExStyle = cp.ExStyle Or &H2000000
            Return cp
        End Get
    End Property 'CreateParams 
```

只粘贴到只读属性的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:00:41.277

处理这种情况的两种方法是：

a) 调整图片框中的图像大小，使其更小，重绘速度更快，或者

b) 使用计时器重绘图像，使其在最后一次调整大小事件后 100 到 350 毫秒后才开始重绘。

# php - mysqli 不工作，找不到模块

> ID：14430386
> 
> 赞同：0
> 
> 时间：2013-01-20T23:06:34.650
> 
> 标签：php, apache

我是 PHP 和 Web 服务器的新手，我打算使用 PHP 创建一个网站。我找到了一个使用 mysqli 的免费登录脚本。每次我进入页面时都说我没有mysqli？我正在使用 PHP3 运行 Apache。因此，脚本的 mysqli 部分是：

```
// if the connection is successfully established
if($conn = new mysqli($this->conn_datas['localhost'], $this->conn_datas['daztestc_testdaz'], $this->conn_datas['dj2403ms81'], $this->conn_datas['daztestc_daztest'])) {
  $sql = "SET NAMES 'utf8'";
  $conn->query($sql);
  $this->conn = $conn;          // add the connection in the $conn property
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:12:48.817

php3? mysqli 直到 php5 才引入。您在哪里找到具有如此旧的 php 副本的服务器？并且任何代码都有效吗？因为自 php3 以来大多数事情都发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:07:44.750

可能您没有安装 MySQLI 扩展。检查[此页面](http://php.net/manual/en/mysqli.installation.php)以了解如何启用它。啊……当然……你不能在 PHP3 上使用它……所以如果你真的想要，升级你的服务器。

# c - 将 ARM 转换为 C

> ID：14430389
> 
> 赞同：3
> 
> 时间：2013-01-20T23:06:44.467
> 
> 标签：c, arm

例如，给定以下 ARM 汇编代码，是否有任何直接的方法可以使用任何适当的变量名将其直接转换为 C？

```
 ADD $2  $0  #9
      ADD $3  $0  #3
      ADD $1  $0  $0
loop: ADD $1  $1  #1
      ADD $3  $0  $3, LSL #1
      SUB $2  $2  $1
      CMP $2  $1  
      BNE loop 
```

另外，由于我还在学习 ARM，循环将执行多少次，比如 SUB 或 ADD？有没有直接的方法来确定这一点？

谢谢您的帮助！任何其他不是特别旨在回答这个问题的见解也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:22:19.610

简而言之，`BNE`-Branch Not Equal 可以建议一个`do{...}while`循环或其他方式`while (...){...}`，甚至可能是一个`for( ...; ... < ....; ...){...}`循环，这是它可以走的最远的地方。

至于从某些寄存器中读取加法/减法（读取，C 上下文中的内存变量），您将不得不通过读取它来玩，并想出一个几乎等价的东西。

在这个阶段，反编译器可能对你没有帮助，使用几个 C 代码来练习并使用`-S`传递给 C 编译器的命令参数将其编译为汇编语言，看看你得到了什么，恐怕主要是反复试验，也就是说，如果您正在寻找上述问题中该代码的确切副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:56:34.843

```
unsigned int r0,r1,r2,r3;

r2=r0+9;
r3=r0+3;
r1=r0+r0;
do 
{
  r1=r1+1;
  r3=r0+(r3<<1);
  r2=r2-r1;
} while(r2!=r1); 
```

不知道 r0 在循环中发生了什么可能会发生几次或多次（比如数百万？数十亿？） r2 正在减少，r1 正在增加，如果它们在第一次通过时不与等于碰撞，它们将不得不滚动。每个循环 r1 都会变大，因此 r2 会更快地变小。应该很容易为 r0 添加 printf 和一些测试值，看看会发生什么。

例如，在输入此代码之前，r0 是 0。r2 是 r0+9 = 9；并且 r1 是双 r0，即 0。

第一个这么多循环会像这样使用四个变量 r0,r1,r2,r3

```
00000000 00000001 00000008 00000006
00000000 00000002 00000007 0000000C
00000000 00000003 00000006 00000018
00000000 00000004 00000005 00000030
00000000 00000005 00000004 00000060
00000000 00000006 00000003 000000C0
00000000 00000007 00000002 00000180
00000000 00000008 00000001 00000300
00000000 00000009 00000000 00000600
00000000 0000000A FFFFFFFF 00000C00
00000000 0000000B FFFFFFFE 00001800 
```

r2 和 r1 不会发生碰撞。

但如果 r0 是 1 则

```
00000001 00000003 00000009 00000009
00000001 00000004 00000008 00000013
00000001 00000005 00000007 00000027
00000001 00000006 00000006 0000004F 
```

r0 = 3

```
00000003 00000007 0000000B 0000000F
00000003 00000008 0000000A 00000021
00000003 00000009 00000009 00000045 
```

到目前为止，r0 必须是奇数。但是当您将 r0 设为 9 时

```
00000009 00000013 00000011 00000021
00000009 00000014 00000010 0000004B
00000009 00000015 0000000F 0000009F
00000009 00000016 0000000E 00000147
00000009 00000017 0000000D 00000297
00000009 00000018 0000000C 00000537
00000009 00000019 0000000B 00000A77
00000009 0000001A 0000000A 000014F7
00000009 0000001B 00000009 000029F7
00000009 0000001C 00000008 000053F7
00000009 0000001D 00000007 0000A7F7
00000009 0000001E 00000006 00014FF7
00000009 0000001F 00000005 00029FF7
00000009 00000020 00000004 00053FF7
00000009 00000021 00000003 000A7FF7
00000009 00000022 00000002 0014FFF7
00000009 00000023 00000001 0029FFF7
00000009 00000024 00000000 0053FFF7
00000009 00000025 FFFFFFFF 00A7FFF7
00000009 00000026 FFFFFFFE 014FFFF7 
```

基本上它对某些规则有点确定性，但如果比较没有发生，那么循环可能会永远运行或至少运行很多个循环。

# haskell - 关于函数单子

> ID：14430397
> 
> 赞同：11
> 
> 时间：2013-01-20T23:07:38.617
> 
> 标签：haskell, monads

我对函数 monad 有一些困惑。函数 monad 定义如下：

```
instance Monad ((->) r) where
     return x = \_ -> x
     h >>= f = \w -> f (h w) w 
```

我试图通过编写绑定操作来玩弄它：

```
( (*2) >>= (+10) ) 3 

(return 3) :: ((->) Int) 
```

但它导致了错误。而且我还尝试将函数 AddStuff 重写为绑定操作。

```
addStuff = do
           a <- (*2)
           b <- (+10)
           return (a+b) 
```

然后将此函数转换为

```
addStuff' w = (*2)  w >>= (\a ->
              (+10) w >>= (\b ->
              return (a+b) )) 
```

我检查新函数的类型，如

```
addStuff :: (Monad m, Num (m b), Num b) => m b -> m b 
```

这是为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T23:18:25.540

在`addStuff'`你写`(*2) w`和`(+10) w`。它们分别相当于`w*2`和`w+10`。所以`addStuff'`等价于：

```
addStuff' w = w*2 >>= \a ->
              w+10 >>= \b ->
              return (a+b) 
```

以这种方式编写应该很明显，这里的左操作数`>>=`是数字，而不是函数。这就是为什么推断类型告诉您您的函数仅适用于单子的数字。

消除`do`符号时，左操作数`>>=`应与 的右操作数完全相同`<-`。同样消除`do`符号不会向函数添加任何参数。所以正确的重写应该是这样的：

```
addStuff' = (*2) >>= \a ->
            (+10) >>= \b ->
            return (a+b) 
```

* * *

至于为什么您的早期代码不起作用：

```
( (*2) >>= (+10) ) 3 
```

运算符`>>=`具有类型`m a -> (a -> m b) -> m b`。为简单起见，我们假设这段代码中的所有数字都有 type `Int`，那么你的左操作数有 type`Int -> Int`或`m Int`if `m`is `(->) Int`。因此，对于某些类型`b`，正确的操作数应该有 type`Int -> ((->) Int) b`或者，更易读，`Int -> Int -> b`. 它实际上具有的类型是`Int -> Int`. 因此，您的表达方式错误。

```
(return 3) :: ((->) Int) 
```

`((->) Int)`has kind `* -> *`- 值的类型必须有 kind `*`。

或者以不同的方式处理这个问题：`return 3`有`m Int`一些`m`类型（为了简单起见，仍然假设所有整数文字都有类型`Int`）。所以如果`m`是`((->) Int)`，类型`return 3`将是`((->) Int) Int`或`Int -> Int`，不是`((->) Int)`。

# python - 我如何将布尔值设置为 True，并使其在满足条件时变为 False，但仅在一定时间内？

> ID：14430399
> 
> 赞同：1
> 
> 时间：2013-01-20T23:07:48.197
> 
> 标签：python, boolean

似乎应该有一个使用`time`模块或其他东西的简单解决方案，但我尝试了一些东西，似乎没有任何效果。我需要这样的东西才能工作：

```
hungry = True
if line.find ('feeds'):
    #hungry = False for 60 seconds, then hungry is true again 
```

有人对此有解决方案吗？

编辑：至于我试过的，我试过这段代码：

```
if hungry==True:
     print('yum! not hungry for 20 seconds')
     hungry = False
     i = 20
     while(i>0):
         i-=1
         time.sleep(1)
         if(i==0):
             hungry = True 
```

但这不起作用，因为程序只是暂停直到`hungry`再次为真，`hungry`而在程序睡眠时为假无济于事；在程序的其余部分工作时，它应该在一定时间内为假

编辑：看起来如果没有线程，这将是不可能的。我必须要么找到一个新的解决方案，要么学会使用线程。无论如何，感谢您的所有帮助，我非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:30:01.867

您可以将您想要的行为封装在一个`TimedValue`类中，但这在这里可能有点矫枉过正——我可能会做类似的事情

```
now = time.time()
hunger = lambda: time.time() > now + 60 
```

然后`hunger()`在我想要的值而不是`hungry`. 这样，代码不会阻塞，我们可以继续工作，但`hunger()`会给我们正确的状态。例如

```
import time
now = time.time()
hunger = lambda: time.time() > now + 60
for i in range(10):
    print 'doing stuff here on loop', i
    time.sleep(10)
    print 'hunger is', hunger() 
```

生产

```
doing stuff here on loop 0
hunger is False
doing stuff here on loop 1
hunger is False
doing stuff here on loop 2
hunger is False
doing stuff here on loop 3
hunger is False
doing stuff here on loop 4
hunger is False
doing stuff here on loop 5
hunger is True
doing stuff here on loop 6
hunger is True
doing stuff here on loop 7
hunger is True
doing stuff here on loop 8
hunger is True
doing stuff here on loop 9
hunger is True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:27:51.407

我不确定您需要什么样的准确性，但也许您可以只睡 60 秒，然后将变量设置为 true？

```
from time import sleep
hungry = True
if line.find('feeds'):
  hungry = False
  sleep(60)
  hungry = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T23:34:22.357

您可以按照以下方式做一些事情：

```
from threading import Timer
import time

class Time_out(object):
    def __init__(self,secs):
        self.timer = Timer(secs,self.set_false)
        self.hungry=True
        self.timer.start()

    def set_false(self):
        self.hungry=False

if __name__ == '__main__':
    x=Time_out(1)
    y=0
    t1=time.time()
    while x.hungry:
        y+=1
        # this loop -- do whatever... I just increment y as a test...

    print 'looped for {:.5} seconds, y increased {:,} times in that time'.format(time.time()-t1, y) 
```

印刷：

```
looped for 1.0012 seconds, y increased 5,239,754 times in that time 
```

我在这里使用的超时值为 1 秒，但您可以使用自己的值。然后在`while`循环中完成工作。这是一个非常原始但有效的回调。

优点是您可以拥有许多`Time_out`对象，并且循环将继续进行，直到没有人饿为止！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T23:47:57.440

您也可以使用类似下面的代码。这是一个优雅的 OOP 解决方案，使用和维护都很方便。

```
from time import time

class TimedProperty(object):

    def __init__(self, value1, value2):
        self.value1 = value1
        self.value2 = value2
        self.start_time = -1
        self.time_value = 0

    @property
    def value(self):
        if self.valuenum == 0:
            return self.value1
        else:
            return self.value2

    @property
    def valuenum(self):
        if time() - self.start_time > self.time_value:
            return 0
        else:
            return 1

    def switch_for(self, seconds, value=None):
        self.start_time = time()
        self.time_value = seconds
        if value is not None:
            self.value2 = value 
```

用法：

```
def main():
    p = TimedProperty(True, False)
    print p.value
    print p.valuenum
    p.switch_for(0.2)
    print p.value
    print p.valuenum
    sleep(0.5)
    print p.value
    print p.valuenum 
```

输出：

```
True
0
False
1
True
0 
```

codepad.org 上的示例：http://codepad.org/glujHgey [（](http://codepad.org/glujHgey) *在键盘上禁止 sleep()，它已被时间消耗 for 循环所取代）*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T23:23:21.140

简单的解决方案：

```
from time import time # time() is the time in seconds since the epoch (January 1st, 1970)
hungry = True
if line.find('feeds'):
    start, hungry = time(), False # it will be a fraction of a second off 
    while 1:                      # because hungry is set to False right 
        if (time() - start) >= 60:  # after start is set to the current time
            hungry = True             
            break 
```

注意：这可能不完全是 60 秒，因为`time()`（至少，我被告知）可能会受到程序内存使用的影响；因此，它可能会略微偏离。

此外，除非您使用线程，否则您实际上无法在程序中执行任何其他操作。`while`不过，您可以在循环中运行程序的其余部分。

编辑：您可以创建一个执行此操作的函数。因此，您可以让程序的一部分运行，然后检查是否是时候再次更改饥饿的值：

```
def isHungry(start):
     from time import time
     if (time() - start) >= 60: hungry = True # if 60 seconds has passed
     else: hungry = False
     return hungry

from time import time
# some code
if line.find('feeds'):
    start = time()
# a bit of code
hungry = isHungry(start)
# more code
hungry = isHungry(start) 
```

# javascript - jQuery点击不起作用

> ID：14430402
> 
> 赞同：1
> 
> 时间：2013-01-20T23:07:53.537
> 
> 标签：javascript, jquery

我对嵌套的 div 和 jQuery 的点击功能有疑问。单击 .header-fb、.header-twitter 或 .header-linkedin 不会给出任何结果。控制台没有错误。我不确定发生了什么事。这些类有背景图像，不确定是否也有问题。这是代码：

```
<div>
 <div id="header-social" class="four columns mobile-two">
 <div class="header-fb"><a href="http://www.facebook.com" >&nbsp</a></div>
 <div class="header-twitter"><a  href="https://twitter.com" >&nbsp</a></div>
 <div class="header-linkedin"><a  href="http://www.linkedin.com/">&nbsp</a></div>
</div> 
```

和 javascript：

```
 <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery(".header-fb").click(function(){
                  window.location=jQuery(this).find("a").attr("href");
                  return false;
            });
            jQuery(".header-twitter").click(function(){
                window.location=jQuery(this).find("a").attr("href");
                return false;
            });
            jQuery(function() {
                jQuery('.header-linkedin').click(function(){
                    window.location=jQuery(this).find("a").attr("href");
                    return false;
                });
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:29:09.097

如果你尝试怎么办：

```
$(function() {

   $(".header-fb").click(function(){
      window.location = $(this).find("a").attr("href");
   });

   $(".header-twitter").click(function(){
      window.location= $(this).find("a").attr("href");
   });

   $('.header-linkedin').click(function(){
      window.location = $(this).find("a").attr("href");
   });

}); 
```

您在代码底部添加了一个额外的 jQuery 方法（出于某种原因），并使用了大量的长手语法。你也不需要退货`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:31:07.410

如果您的 HTML 应如下所示：

```
<div id="header-social" class="four columns mobile-two">
   <div class="header-fb"><a href="http://www.facebook.com" >&nbsp</a></div>
   <div class="header-twitter"><a  href="https://twitter.com" >&nbsp</a></div>
   <div class="header-linkedin"><a  href="http://www.linkedin.com/">&nbsp</a></div>
</div> 
```

比你可以尝试：

```
(function( $ ){  // remap $ to jQuery
  $(function(){  // DOM ready shorthand

    $('#header-social').on('click','div',function(){

       var goTo = $(this).find('a').attr('href');
       window.location = goTo ;

    });

  });
})( jQuery ); 
```

[http://jsbin.com/uxowoj/1/edit](http://jsbin.com/uxowoj/1/edit)

# keyboard-shortcuts - 如何使用 autohotkey 更改快捷键？

> ID：14430404
> 
> 赞同：1
> 
> 时间：2013-01-20T23:08:02.237
> 
> 标签：keyboard-shortcuts, shortcut, autohotkey, dvorak

我使用德沃夏克键盘。`ctrl+x`、`ctrl+c`和等快捷键`ctrl+v`很难使用，那么有没有办法使用 AutoHotKey 将它们分别重新映射到`ctrl+q`、`ctrl+j`和？`ctrl+k`谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T00:02:12.213

确实很简单，只是为了达到您想要的效果，您需要以相反的方式对其进行编码：

```
^q::^x
^j::^c
^k::^v 
```

它转换为`<what-keys-you-press>::<what-is-sent-instead>`. 请注意，如果某些应用程序恰好定义了这些快捷方式，您可能会产生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:19:56.590

是的，这很简单。

```
^x::^q
^c::^j
^v::^k 
```

请注意，这不会改变原始快捷方式的行为。为此，您还必须重新映射它们。有关更多信息，请查看帮助文件中的“重新映射键或鼠标按钮”。它还描述了一种更直接地从注册表重新映射键的方法。

# ios - 如果用户在应用程序处于后台时进入/退出区域，则调用 localNotification

> ID：14430407
> 
> 赞同：0
> 
> 时间：2013-01-20T23:08:08.583
> 
> 标签：ios, objective-c, xcode, cllocationmanager

如果用户在应用程序处于后台模式时进入或退出区域，我需要执行调用 localNoification 的简单任务。只有一组坐标会触发通知。例如：

纬度：41.8500 经度：87.6500 半径：300

我知道如何调用 localNotification，以及如何使用 locationManager 的基本功能，但似乎无法在后台跟踪位置。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:32:39.993

你读过 CLLocationManager 的`startMonitoringForRegion:`方法吗？我认为这将完全符合您的要求。设置它的代码如下所示：

```
CLRegion * region = [[CLRegion alloc] initCircularRegionWithCenter: CLLocationCoordinate2DMake(41.8500, 87.6500) radius: 300 identifier: @"regionIDstring"];
CLLocationManager * manager = [[CLLocationManager alloc] init];
[manager setDelegate: myLocationManagerDelegate];
[manager startMonitoringForRegion: region]; 
```

之后，即使您的应用程序在后台，设备也会监控指定区域的入口/出口。当跨越一个区域时，代表将收到一个电话`locationManager:didEnterRegion:`或`locationManager:didExitRegion:`. 您可以利用这个机会发布`UILocalNotification`. 如果您的应用程序在跨区域时没有运行，它将在后台启动，您需要在`application: didFinishLaunchingWithOptions:`. 使用如下代码：

```
if ([launchOptions objectForKey: UIApplicationLaunchOptionsLocationKey] != nil) {
    // create a location manager, and set its delegate here
    // the delegate will then receive the appropriate callback
} 
```

请注意，应用程序在后台运行时只有很短的执行时间（几秒钟）；如果您需要执行更长的任务，请`beginBackgroundTaskWithExpirationHandler:`在您的应用收到跨区域通知后立即调用 Nebs 在他/她的回答中提到的方法。这将使您在后台运行大约 600 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:17:17.130

看看`beginBackgroundTaskWithExpirationHandler:`方法[`UIApplication`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。它允许您在应用程序处于后台时请求额外的时间来运行任务。

有关更多信息，我建议您阅读[iOS 应用程序编程指南的“](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)**后台执行和多任务处理**”部分。它详细解释了当应用程序进入后台时会发生什么以及您可以做什么。

具体来说，它显示了当应用程序进入后台时运行长任务的示例代码：

[*此代码取自上面链接的 Apple 指南*]

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

# javascript - 通过 id 对元素的 javascript 访问不同

> ID：14430415
> 
> 赞同：1
> 
> 时间：2013-01-20T23:09:46.320
> 
> 标签：javascript, jquery, element, getelementbyid

`document.getElementById('SOMEID')`和之间的真正区别是什么`$("[id$='SOMEID']")` ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T23:12:14.420

该`$(..)`变体使用[jQuery](http://jquery.com)，它允许您使用选择器来查找要搜索的内容（类、id、标签等）。这`getElementById()`是普通的 javascript，显然只按元素 id 搜索。

```
$("#foo") // select elements with id foo
$(".foo") // select elements with class foo
$("foo") // select foo-tags 
```

[您可以在这个官方jQuery 教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery#Find_me%3a_Using_selectors_and_events)中了解更多关于 jQuery 对选择器的支持。

# c - 没有从标准输入正确读取

> ID：14430421
> 
> 赞同：0
> 
> 时间：2013-01-20T23:10:41.737
> 
> 标签：c, unix, stdin, eof, cat

我试图模仿 unix 实用程序 cat 的行为，但是当我调用以下形式的命令时：

猫文件1-文件2-文件3

我的程序将正确输出 file1，然后从 stdin 读取，然后当我按 EOF 时，它将打印文件 2 然后是文件 3，而不是第二次从 stdin 读取。

为什么会这样？

```
 #include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define ASCII_LENGTH 255
int printfile(FILE *source, int N);

int main(int argc, char *argv[])
{
    int currentarg = 1; //the argument number currently being processed

    FILE *input_file;
    //if there are no arguments, dog reads from standard input
    if(argc == 1 || currentarg == argc)
    {
        input_file = stdin;
        printfile(input_file,0);
    }
    else
    {
        int i;
        for(i = currentarg; i < argc; i++)
        {
            printf("%d      %s\n",i,argv[i]);
            //if file is a single dash, dog reads from standard input
            if(strcmp(argv[i],"-") == 0)
            {
                input_file = stdin;
                printfile(input_file,0);
                fflush(stdin);
                fclose(stdin);
                clearerr(stdin);
            }
            else if ((input_file = fopen(argv[i], "r")) == NULL)
            {
                fprintf(stderr, "%s: %s: No such file or directory\n", argv[0], argv[i]);
                return 1;
            }
            else
            {
                printfile(input_file,0);
                fflush(input_file);
                fclose(input_file);
                clearerr(input_file);
            }
        }
    }
    return 0;
}

int printfile(FILE *source, int N) 
{
    //used to print characters of a file to the screen
    //characters can be shifted by some number N (between 0 and 25 inclusive)
    char c;
    while((c = fgetc(source)) != EOF)
    {
        fputc((c+N)%ASCII_LENGTH,stdout);
    }
    printf("*****    %c     %d",c,c==EOF);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:12:51.430

`stdin`一方面，您不能指望在关闭它后能够读取：

```
 fclose(stdin); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:36:37.707

`fflush(stdin);`是未定义的行为，就像`fflush`所有只为输入而打开的文件一样。这有点像冲马桶并期望废物从马桶中出来，因为`fflush`只为打开输出的文件定义！`for (int c = fgetc(stdin); c >= 0 && c != '\n'; c = fgetc(stdin));`如果您想丢弃一行的其余部分，我会建议您这样做。

此外，`fgetc`返回`int`是有原因的：在内部`int`将是一个`unsigned char`值或`EOF`。`c`应该是 int，而不是`char`. `EOF`不是人物！这是一个负值`int`。这将它与任何可能的字符区分开来，因为成功调用`fgetc`只会返回一个正整数而不是一个负整数`EOF`。`fputc`期望以值的形式输入`unsigned char`。`char`不需要是`unsigned`. 假设您的`fgetc`调用成功并且您将返回值存储到`int`中，`int`应该可以安全地传递给`fputc`.

# sql - 选择后提交

> ID：14430424
> 
> 赞同：14
> 
> 时间：2013-01-20T23:11:03.560
> 
> 标签：sql, oracle, select, commit

我已经阅读了DB2 和 MySQL 声明`commit`后可能需要a 的解释：`select`

[DB2 中的选择查询是否需要提交？](https://stackoverflow.com/questions/1521475/is-a-commit-needed-on-a-select-query-in-db2)

[我应该在单次选择后提交吗](https://stackoverflow.com/questions/13287749/should-i-commit-after-a-single-select)

我的问题是在使用 Oracle`commit`执行语句之后何时以及为什么重要？`select`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T10:25:56.587

我能想到的只有几种情况，您可能希望在选择后提交。

1.  如果您的选择加入数据库链接，则将创建一个事务。如果您尝试关闭此链接，除非您提交/回滚事务，否则您会收到错误消息。

2.  选择更新（如 DCookie 所说）以释放锁。

3.  如果设置或添加一个序列化隔离级别，则删除序列化隔离级别，如果您在调用此之前一直从数据库链接中进行选择。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T23:14:00.610

如果您这样做了`SELECT ... FOR UPDATE;`，您将需要一个 COMMIT 或 ROLLBACK 来释放为更新而保留的记录。否则，我想不出任何理由这样做。

# mysql - 使用 DISTINCT（几列）和 MAX（另一列）计算行数

> ID：14430426
> 
> 赞同：1
> 
> 时间：2013-01-20T23:11:08.930
> 
> 标签：mysql, sql, select

我的表包含用户对不同项目的投票。它具有以下列：

```
id, user_id, item_id, vote, utc_time 
```

只有**id**是唯一字段，并且**user_id**和**utc_time**的组合可能也是唯一的。但用户可以多次为任何项目投票。

投票不是一个数字，而是具有几个可能值之一（例如，“糟糕”、“糟糕”、“好”、“优秀”）。

我需要计算有多少不同的用户对给定的**#item#**投了最后一票作为“优秀”、“好”等。所以假设我只有四个不同的可能投票值，我需要获得以下四个记录领域：

```
vote, count_of_users 
```

我了解如何计算所有选票，而不仅仅是用户的最后一票：

```
SELECT vote, COUNT(id) FROM votes WHERE item_id=#item# GROUP BY vote; 
```

但我无法弄清楚如何只计算每个用户的 utc_time = MAX(utc_time) 的票数......感谢您的帮助。

这个问题与我的上一个问题有关：[Select one row with MAX(column) for known other several columns without subquery](https://stackoverflow.com/questions/14430260/select-one-row-with-maxcolumn-for-known-other-several-columns-without-subquery)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:17:46.170

如果适合您，请尝试此解决方案，

```
SELECT  a.item_ID,
        SUM(CASE WHEN a.vote = 'awful' THEN 1 ELSE 0 END) awful,
        SUM(CASE WHEN a.vote = 'bad' THEN 1 ELSE 0 END) bad,
        SUM(CASE WHEN a.vote = 'good' THEN 1 ELSE 0 END) good,
        SUM(CASE WHEN a.vote = 'excellent' THEN 1 ELSE 0 END) excellent
FROM    tableName a
        INNER JOIN
        (
            SELECT  user_ID, MAX(utc_time) max_time
            FROM    tableName
            GROUP   BY user_ID
        ) b ON a.user_ID = b.user_ID AND
                a.utc_time = b.max_time
-- WHERE   a.item_ID = 'valueHere'
GROUP   BY a.item_ID 
```

**更新 1**

```
SELECT  a.item_ID,
        a.vote,
        COUNT(*) totalCount
FROM    tableName a
        INNER JOIN
        (
            SELECT  user_ID, MAX(utc_time) max_time
            FROM    tableName
            WHERE   item_id = 'valueHere'
            GROUP   BY user_ID
        ) b ON  a.user_ID = b.user_ID AND
                a.utc_time = b.max_time
GROUP   BY a.vote 
```

# perl - 为什么我的 ($i) 索引不起作用？

> ID：14430430
> 
> 赞同：-1
> 
> 时间：2013-01-20T23:11:44.403
> 
> 标签：perl, indexing

我的程序是

```
#!\usr\bin\perl -w

my @one= ("sun", "moon", "star");
my $three="SON"; 
my $flag= 0;
my $tester_1=0 ; 
my $tester_2= 0;
my $i= 0;

push (@one, $three);

print @one; 
print join(" ", @one);

while (@one[$i]= $three) 
{
    #flag 1
    if (@one[$i] ne "moon"&& @one[$i] ne "star") 
    {
        $tester_1= 1; 
    }

    ##flag2 
    if ($i<= 99) 
    {
        $tester_2=1;
    }

    #real condition 
    if ($tester_1= 1)
    { 
        if ($tester_2= 1)   
        {
            print @one[$i];
            $i++; 
        }
    }
} 
```

我运行我的程序。循环运行了无数次。在标志 2 中，我设置了 $i<= 99; 的条件，因此我的程序应该在打印第 100 个 SON 后停止。但是，由于某些原因 $i<= 99 不起作用？是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T00:57:15.623

您显示启用了警告；您的代码会产生警告。 *修复*它们，您将解决您的问题。如果您无法理解警告，请尝试添加`use diagnostics;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T23:24:54.590

似乎问题在于您在比较中使用了“=”（例如`if($tester_1 = 1)`应该在哪里`if($tester_1 == 1)`）。当您运行脚本时，Perl 打印的警告中会出现这种错误。

您还应该替换：
`while (@one[$i]= $three)`by`while ($one[i] == $three)`和
`if (@one[$i] ne "moon"&& @one[$i] ne "star")`by`if ($one[$i] ne "moon"&& $one[$i] ne "star")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:20:53.793

```
#!\usr\bin\perl 
use strict;
use warnings;

my @one= ("sun", "moon", "star");
my $three="SON"; 
my $flag= 0;
my $tester_1=0 ; 
my $tester_2= 0;
my $i= 0;

push (@one, $three);    
print @one,"\n"; 
print join(" ", @one),"\n";   

while ($one[$i] eq $three) 
{
 if ($one[$i] ne "moon"&& $one[$i] ne "star") 
 {
    $tester_1= 1; 
 }
 if ($i<= 99) 
 {
    $tester_2=1;
 }
 if ($tester_1 == 1)
 { 
    if ($tester_2 == 1)   
    {
        print $one[$i];
        $i++; 
    }
 }
} 
```

这是我为上面显示的脚本得到的输出：

```
sunmoonstarSON
sun moon star SON 
```

# ruby-on-rails - 在 Rails 中过滤关系

> ID：14430431
> 
> 赞同：1
> 
> 时间：2013-01-20T23:11:55.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, arel

我的`Product`模型中有这种关系：

```
has_many :features, :class_name => 'ProductFeature', :source => :product_feature, :include => :feature 
```

所以我可以`Product.features`

效果很好。但我希望能够在`feature`必要时按表中的字段过滤它。例如在伪代码中：

```
find all product features where feature is comparable 
```

`compare`是 上的布尔字段`feature`。

我已经尝试了 2 个小时，但无法弄清楚（没有完全编写新查询）。我不知道如何`feature`从关系中访问表的字段`Product.features`，因为它似乎只能过滤`product_features`字段。

到目前为止，这是我想出的：

```
def features_compare
  features.feature.where(:compare => true)
end 
```

但它只是说`feature`这不是一个有效的方法，我理解。

# 编辑

我已经更新了我的模型，因此关系更加清晰：

产品.rb：

```
class Product < ActiveRecord::Base
  belongs_to :company
  belongs_to :insurance_type

  has_many :product_features
  has_many :reviews

  attr_accessible :description, :name, :company
end 
```

product_feature.rb：

```
class ProductFeature < ActiveRecord::Base
  belongs_to :product
  belongs_to :feature

  delegate :name, :to => :feature

  attr_accessible :value
end 
```

特征.rb

```
class Feature < ActiveRecord::Base
  attr_accessible :name, :compare
end 
```

我希望能够查询`product_features`属于 a`product`和`feature`where `Feature.compare`is 的`true`。像这样的东西：

产品.rb

```
def features_compare
  product_features.where(:compare => true)
end 
```

这会引发错误，因为`compare`在`Feature`模型中，不是`ProductFeature`. 我在 product_feature.rb 中尝试了以下内容：

```
delegate :compare, :to => :feature 
```

但我没有帮助。

我将在几个小时内为此添加赏金，所以请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:51:33.800

`find all product features where feature is comparable`只是

```
ProductFeature.joins(:feature).where(:feature => {:compare => true}) 
```

您可以通过引入范围使其更可重用：

```
#in product_feature.rb
scope :with_feature_like, lambda do |filter|
   joins(:feature).where(:feature => filter)
end

#elsewhere
ProductFeature.with_feature_like(:compare => true)

#all the product features of a certain product with at comparable features
some_product.product_features.with_feature_like(:compare => true) 
```

最后，如果您希望所有产品具有类似功能的产品功能，您需要类似：

```
Product.joins(:product_features => :feature).where(:feature => {:compare => true}) 
```

当然，您也可以将其变成`Product`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:18:35.610

这似乎是一个 has_many :through 关系。尝试改变这个：

```
has_many :features, :class_name => 'ProductFeature', :source => :product_feature, :include => :feature 
```

对此：

```
has_many :product_features
has_many :features, :through => :product_features 
```

只要您的 ProductFeature 模型有这个：

```
belongs_to :product
belongs_to :feature 
```

并且您在 product_features (product_id, feature_id) 上有相应的列，那么您应该能够访问该产品的功能以及 Product 和 ProductFeature 上的所有属性。

看这里：

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

编辑：这是按功能字段过滤的方法。

```
Product.joins(:features).where(:features => {:name => "Size"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:20:50.893

`@product.each |p| { p.features.where(:comparable => true) }`可能是您在这里最好的选择，但我愿意接受启蒙。

# simple.data - Simple.Data 转换为 ToList ()

> ID：14430438
> 
> 赞同：1
> 
> 时间：2013-01-20T23:13:18.787
> 
> 标签：simple.data

我正在使用 Simple.Data 并想知道是否可以选择单个列，然后将其转换为字符串值列表。例如使用下面的查询我得到错误：

无法将类型“Simple.Data.SimpleRecord”隐式转换为“字符串”

```
var result = _database.ParentRegionList.All()
            .Select(_database.ParentRegionList.RegionName)
            .Where(_database.ParentRegionList.RegionName.Like(startsWith + "%"))
            .Distinct()
            .ToList<string>(); 
```

但是，如果我创建一个具有字符串类型的单个公共属性“RegionName”的 LocationAutoComplete 类，则转换工作正常。

```
var result = _database.ParentRegionList.All()
            .Select(_database.ParentRegionList.RegionName)
            .Where(_database.ParentRegionList.RegionName.Like(startsWith + "%"))
            .Distinct()
            .ToList<LocationAutoComplete>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:15:59.837

ToList<T> Simple.Data 方法希望您将 SimpleRecord 的内容转换为对象，这就是它与 LocationAutoComplete 类一起使用的原因。完整的细节可以在[这里](http://simplefx.org/simpledata/docs/pages/Retrieve/WorkingWithPOCOs.htm)找到。

如果您只返回一个希望作为标量值或标量值列表返回的字段，请改用 ToScalar<T> 或 ToScalarList<T> 方法。完整的细节可以在[这里找到](http://simplefx.org/simpledata/docs/pages/Retrieve/ScalarValues.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:34:35.043

如果 RegionName 是 varchar，那么您只需要

```
var result = _database.ParentRegionList.All()                
            .Where(_database.ParentRegionList.RegionName.Like(startsWith + "%"))
            .Select(_database.ParentRegionList.RegionName)
            .Distinct()
            .ToList(); 
```

你不需要`<string>`

# c# - 如何“走”过 Word 文档对内容进行更改？

> ID：14430440
> 
> 赞同：2
> 
> 时间：2013-01-20T23:13:39.517
> 
> 标签：c#, .net, ms-word

我想用另一个替换文件中的每个字符。

现在我使用 Find.Execute() 方法来实现它，但在这种情况下，它会花时间搜索然后替换它，然后再次从文件开头搜索另一个字符，所以如果我想替换所有字母字母它将遍历整个文档 26 x2（小写和大写）= 48 次，但我希望它被 1 次查找替换，比如：它得到第一个字符，它是“a”替换为“a” , 如果下一个字符是 "c" 替换为 "s" 等，则通过一次查找进行查找，因此它只遍历整个文档一次。

我知道我可以通过编写自己的代码来实现它，但我想知道是否有一些内置类可以让我的生活变得轻松:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:59:08.877

关于什么：

```
using Word = Microsoft.Office.Interop.Word;

//...

Word.Application app = new Word.Application();
Word.Document myDoc = app.Documents.Add(pathToMyDoc);

for(int n = 0; n < myDoc.Characters.Count; ++n)
{
  myDoc.Characters[n].Text = LookupReplacement(myDoc.Characters[n].Text);
} 
```

完全未经测试，但可能会对您有所帮助。我查看的链接：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.documentclass (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.documentclass(v=office.11).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:53:21.767

试试这个作为参考，希望这会有所帮助：

[http://weblogs.asp.net/guystarbuck/archive/2008/05/13/automated-search-and-replace-in-multiple-word-2007-documents-with-c.aspx](http://weblogs.asp.net/guystarbuck/archive/2008/05/13/automated-search-and-replace-in-multiple-word-2007-documents-with-c.aspx)

# listview - QML，动态地将元素添加到列表视图

> ID：14430441
> 
> 赞同：9
> 
> 时间：2013-01-20T23:13:42.333
> 
> 标签：listview, qml, qtquick2

我需要一些帮助来将元素添加到 qml listview 中，我有一个 textarea 和一个按钮，当按下时会将 textarea 文本添加到 listview 项目中，这是我的尝试：

```
Component {
    id: delegate
    Item {
        width: 200; height: 28
        Label {
            text: score
        }
    }
}

ListView {
     id: p1scores
     model: p1model
     delegate: delegate
     anchors.top: p1name.bottom
     anchors.topMargin: units.gu(1)
}

ListModel {
     id: p1model
     ListElement { score: "0" }
}

TextArea {
     id: p1input
     width: units.gu(8)
     height: units.gu(3)
     horizontalAlignment: TextEdit.AlignHCenter
     inputMethodHints: Qt.ImhDigitsOnly
     contentHeight: units.gu(60)
     anchors.topMargin: units.gu(8)
}

Button {
     id:p1button
     text: i18n.tr("Add")
     width: units.gu(8)
     onClicked: {
        p1model.append({"score": p1input.text})
        p1input.text = ""
     }
} 
```

我尝试附加它，但没有出现在列表视图中......有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-20T14:48:53.177

尝试在“分数”周围不加引号，如下所示：

```
onClicked: {
    p1model.append({score: p1input.text})
    p1input.text = ""
} 
```

# c# - 为什么 Visual Studio 报告数据屏幕没有显示所有可用的数据集？

> ID：14430442
> 
> 赞同：6
> 
> 时间：2013-01-20T23:13:43.213
> 
> 标签：c#, visual-studio, visual-studio-2012, rdlc, microsoft-reporting

在下面的示例中，我有许多在命名空间中定义的公共类。这些将被实例化，绑定到 ReportDataSets 并传递给我的 ReportViewer 控件，以从我的报告定义文件中生成报告。但是，当我尝试在我的 .RDLC 文件的报表设计器的“报表数据”窗口中访问这些类时，它只显示了我定义的几个类。发生了什么事，其余的都在哪里？

```
namespace Namespace1
{
    public class Class1
    {
        public string String1 { get; set; }
    }

    public class Class2
    {
        public string String1 { get; set; }
    }
} 
```

注意：如果在需要Class2数据的报表页面中添加Class1定义，然后在报表生成前将Class2绑定到ReportDataSet，会抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:13:43.213

当有多个具有相同架构的类时（所有属性及其数据类型都相同），只会显示按字母顺序排列的第一个类。但两者都将显示在下面的示例中，因为它们的所有属性的名称不同（在本例中为一个字符串）。

```
namespace Namespace1
{
    public class Class1
    {
        public string String1 { get; set; }
    }

    public class Class2
    {
        public string String2 { get; set; }
    }
} 
```

# html5-video - VideoJS Flash后备根本不起作用

> ID：14430447
> 
> 赞同：3
> 
> 时间：2013-01-20T23:14:12.247
> 
> 标签：html5-video, video.js

我对 VideoJS 比较陌生；我已经在所有浏览器中成功使用了它，除了 ie < 9。我已经看到一些线程启动并回答了 RE IE 8 和更早版本的 Flash 后备。

我的问题是我根本无法让 Flash 后备工作。我正在使用 VideoJS 的 CDN 版本，并假设我不需要上传任何内容或对我的代码进行任何其他更改，除了 VideoJS 演示页面上概述的内容。

在 IE 7 和 8 中，我什么也得不到。我没有动态嵌入 SWF；当我检查我的日志并通过控制台进行一些调试时，我仍然可以看到标签；我假设我应该看到一个动态生成和嵌入的 .swf 文件作为后备。

我在几个线程中看到最新版本的 VideoJS 已损坏/Flash 后备无法正常工作。我还尝试了各种板上列出的一些解决方法——对我来说根本没有任何效果。

是否还有其他人遇到此问题/您是否设法解决了这个问题？*v* ( " path_to_swf") 修复不起作用...绝对路径不起作用... preload="none" 不起作用...

任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T04:07:49.910

如果没有示例代码，我不知道这是否会有所帮助，但 IE 不会初始化具有以下样式的嵌入式 Flash 对象：（`visibility: hidden;`包括该对象的任何父对象）。通过查看网络流量，您可能会看到请求 Flash 对象，但它不会触发任何 Video.js 事件，直到`visibility`设置为`visible`.

IE9 将使用 HTML5 播放器，而 IE7/8 将回退到 Flash 播放器（这就是为什么在 IE9 中无法观察到该问题，除非`techOrder`已更改为 list `flash`first）。

# c# - 创建没有方法的事件处理程序

> ID：14430448
> 
> 赞同：-1
> 
> 时间：2013-01-20T23:14:54.323
> 
> 标签：c#, events, buttonclick

我需要创建一个方法本地的事件处理程序。我可以这样做吗？

```
ddd.btnSave.Click += new RoutedEventHandler(
                void btnSave_Click(object sender, RoutedEventArgs e)
                {

                }
            ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:17:20.017

```
ddd.btnSave.Click += (sender, e) => {
    //handle event
}; 
```

或者使用以下`delegate`语法：

```
ddd.btnSave.Click += delegate(object sender, RoutedEventArgs e) {
   //handle event
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:17:12.750

您可以使用 lambda 表达式：

```
ddd.btnSave.Click += (sender, e) => {
  ...
}; 
```

# ruby - 仅在一页上显示 Sinatra 基本 HTTP 身份验证

> ID：14430452
> 
> 赞同：6
> 
> 时间：2013-01-20T23:15:50.460
> 
> 标签：ruby, sinatra

知道如何使 Sinatra HTTP 身份验证仅显示在模块化 Sinatra 应用程序的一页上吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T10:13:59.850

添加到@iain 答案，因为您已经询问了 HTTP 身份验证（我假设是基本身份验证）。

```
class MyApp < Sinatra::Base
  def authorized?
    @auth ||=  Rack::Auth::Basic::Request.new(request.env)
    @auth.provided? && @auth.basic? && @auth.credentials && @auth.credentials == ["CUSTOM_USERNAME","SECRET_PASSWORD"]
  end

  def protected!
    unless authorized?
      response['WWW-Authenticate'] = %(Basic realm="Restricted Area")
      throw(:halt, [401, "Oops... we need your login name & password\n"])
    end
  end

  get "/protected_content" do
    protected!
    "in secure"
  end

  get "/" do
    "anyone can access"
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T08:14:31.897

Vicky Chijwani 的评论是正确的，您应该提供更多信息（请注意！）但这是一个答案。

你可以通过几种方式做到这一点。如果我们假设您的身份验证方法被调用`protected!`：

```
class MyApp < Sinatra::Base # assumed for all examples

  get "/only-this-page-has-auth" do
    protected!
    "Only admin allowed!"
  end

  get "/this-wont-have-auth" do
    "Everybody can access this"
  end
end 
```

或者你可以使用[过滤器](http://www.sinatrarb.com/intro#Filters)

```
 before "/only-this-page-has-auth" do
    protected!
  end

  get "/only-this-page-has-auth" do
    "Only admin allowed!"
  end

  get "/this-wont-have-auth" do
    "Everybody can access this"
  end 
```

或者，如果您打算`Sinatra::Namespace`从[sinatra-contrib gem](https://rubygems.org/gems/sinatra-contrib)中使用（可能更多的是高级用法，但我经常使用它，因为我发现它是一种很好的做事方式）并且受保护的页面现在将位于“ /admin/only-this-page-has-auth"

```
 namespace "/admin" do
    before do
      protected!
    end
    get "/only-this-page-has-auth" do
      "Only admin allowed!"
    end
  end

  get "/this-wont-have-auth" do
    "Everybody can access this"
  end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-14T12:46:16.820

最好的方法是使用： [https](https://rubygems.org/gems/sinatra-basic-auth) ://rubygems.org/gems/sinatra-basic-auth 文档很棒：

```
require "sinatra"
require "sinatra/basic_auth"

# Specify your authorization logic
authorize do |username, password|
  username == "john" && password == "doe"
end

# Set protected routes
protect do
  get "/admin" do
    "Restricted page that only admin can access"
  end
end 
```

[http://www.rubydoc.info/gems/sinatra-basic-auth/0.1.0](http://www.rubydoc.info/gems/sinatra-basic-auth/0.1.0) 使用起来真的很简单

# node.js - Node.js 对 Kohana 的 POST 请求

> ID：14430453
> 
> 赞同：1
> 
> 时间：2013-01-20T23:15:56.280
> 
> 标签：node.js, kohana

当我通过`node.js`填充一些数据来进行 POST 查询时`Kohana`，我总是在`$this->request->post()`空数组中获取，但是当我通过浏览器本机`JavaScript`ajax 调用进行查询时 - 它会获取正确的数据 - 我已经发送了。

Node.js 代码（我正在使用[请求](https://github.com/mikeal/request)库） - 不工作：

```
request.post(
    'http://someurl',
    { id : 'ididididid' },
    function (error, response, body) {
        if (!error && response.statusCode == 200) {
            console.log('returned BODY:', body);
        }
    }
); 
```

Node.js 正在获取响应`(statusCode == 200)`，但它是空数组

jQuery 代码 - 运行良好：

```
$.ajax({
    type: 'POST',
    url : 'http://someurl',
    dataType : 'JSON',
    data : {
        id : 'idididid'
    },
    done : function(data) {
        console.log(data.responseText);    
    }
}); 
```

Kohana 代码（控制器内部）：

```
$data = $this->request->post();
echo json_encode($data); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:05:58.307

在 Kohana 中，您不使用`$this->request->post`全局`$_POST`变量，它用于内部（子）请求。

在您的情况下，您只需执行以下操作：

```
$this->response->body(json_encode($_POST)); 
```

确保您始终将响应分配给主体，因为这是在 Kohana 中执行此操作的正确方法

如果你愿意：

```
Request::factory('/someurl')->post(array('id' => 'idididid'))->execute(); 
```

然后你`$this->request->post`会返回数据

# python - 如何返回布尔列表以查看一个列表的元素是否在另一个列表中

> ID：14430454
> 
> 赞同：3
> 
> 时间：2013-01-20T23:16:14.617
> 
> 标签：python, list, matching

我有两个清单：

```
A = [1,2,3,4,5,6,7,8]
B = [2,3,4] 
```

并希望得到一个长度（A）的布尔列表，其中每个索引处的元素指示 A 中相同索引处的元素是否在列表 B 中的任何位置。返回值将是：

```
[False, True, True, True, False, False, False, False] 
```

编写一个函数很容易，但想知道在 Python 中是否有一种范式的方法。

在 R 中，对应的将是

```
which(A %in% b) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T23:17:24.970

使用列表理解：

```
In [164]: A = [1,2,3,4,5,6,7,8]

In [165]: B = [2,3,4]

In [166]: [x in B for x in A]
Out[166]: [False, True, True, True, False, False, False, False] 
```

如果`B`很大，那么最好将其转换为`set`第一个。因为，集合的成员资格测试`O(1)` 与`O(n)`列表中的比较。

```
In [167]: b=set(B)

In [168]: [x in b for x in A]
Out[168]: [False, True, True, True, False, False, False, False] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T23:38:02.837

```
In [1]: A = [1,2,3,4,5,6,7,8]

In [2]: B = [2,3,4]

In [3]: map(B.__contains__, A)
Out[3]: [False, True, True, True, False, False, False, False] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T23:21:06.863

另一种编写方式（但由于 lambda 的使用而速度较慢）：

```
>>> A = [1,2,3,4,5,6,7,8]
>>> B = [2,3,4]
>>> S = set(B)
>>> map(lambda x: x in S, A)
[False, True, True, True, False, False, False, False] 
```

# php - 将eval代码转换成普通的php代码

> ID：14430465
> 
> 赞同：0
> 
> 时间：2013-01-20T23:17:10.410
> 
> 标签：php

在这种情况下是否有可能只有普通的 php 代码而不使用`eval()`函数？

我的评估代码如下：

```
eval('$'.$var.'["'.$key.'"]="'.$value.'";'); 
```

我正在做的事情如下：

```
function config_update($array, $var="result")
{ 
    global $result, $dbi;

    while (list($key,$value)=each($array))
    {
        if (is_array($value))
        { 
            config_update($value, $var.'["'.$key.'"]'); 
        } 
        else
        { 
            for ($i=0; $i<count($value);$i++)
            {
                if ($value == "{FROM_DB}")
                {
                    $query = $dbi->prepare("SELECT `value` FROM `".PRE."config` WHERE `key`=?;")->execute($key)->results();

                    if (!$query) 
                    {
                        trigger_error("There is no such key as `{$key}` in config database",E_USER_ERROR);
                        exit;
                    }
                    else
                        $value = str_replace("{FROM_DB}",$query[0]['value'],$value);
                }
                eval('$'.$var.'["'.$key.'"]="'.$value.'";');
                //$$var[$key] = $value; #smth like that..
            }
        }
    }
} 
```

我基本上需要使用来自 DB 的值来​​更新带有 {FROM_DB} 的变量值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:41:24.997

从变量变量的 php 手册中，您应该在使用基于数组的变量变量时使用 {} 以避免未知行为。

```
${$var}[$key] = $value 
```

见[变量变量](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:37:12.823

如果您要使用：

```
$$var = array();
$$var[$key] = $value; 
```

它将评估为：

```
$result[$key] = $value; 
```

假设`$var = 'result'`.

# java - 我可以在 <=1.6 项目中检测 target>1.6 依赖项吗？

> ID：14430466
> 
> 赞同：5
> 
> 时间：2013-01-20T23:17:11.460
> 
> 标签：java, maven

在一个特定的项目中，我（目前）只允许使用 JRE6 来执行 Java 应用程序。因此，我`maven-compiler-plugin`为源和目标配置了 1.6。

在我的 Maven 依赖项中，我包含了一个依赖项，它本身以 1.7 为目标，并且还使用了 1.7 功能，例如 try-with-resources——我认为这会在我自己的项目中导致一些编译时错误或警告（我正在使用 Eclipse） . 但事实并非如此，所以我的问题是：在我的情况下是 JRE6 的特定目标 JRE 上运行应用程序（或测试）*之前是否可以检测到此类问题？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:30:02.400

虽然只是部分答案，但我找到了 Mihai 提到的具有不同库签名的问题的解决方案。有一个[Animal Sniffer Maven Plugin](http://mojo.codehaus.org/animal-sniffer-maven-plugin/usage.html)可以让你指定一个特定的 Java 运行时，它在某个阶段（例如测试）检查它。

但这并不能解决类文件版本问题，因为 Maven 只是吞下（-nowarn）来自 javac 的那些警告，正如对此问题[的评论](https://stackoverflow.com/questions/14430466/can-i-detect-target1-6-dependencies-in-a-1-6-project/14432075#comment20097102_14432075)中所解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:24:09.750

（我将把它变成一个交互式答案；我还没有答案。）

有点棘手。我知道一个可以梳理依赖版本的 Ning 插件，但我没有看到任何检查类文件版本的选项。我知道如果javac发现链接类的版本太新，它[会抱怨- 你能跟踪 Maven 输出并确认 javac 选项吗？](https://stackoverflow.com/questions/3535722/eclipse-wont-compile-bad-class-file-wrong-version)

无论如何，即使出现错误，您也不是 100% 安全的。我将不得不发布一个答案，这里的空间不足。这是我遇到的一个轶事。它以 Java 1.4 和 Java 5 为特色，但它有助于阐明为什么您仍然会遇到麻烦。

轶事将支持这样一种观点，即您应该努力使您的库保持与其使用者相同（或更低）的级别，并始终[使用正确的 JDK 进行编译](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)。

不管怎样，就到这里吧。假设您`new java.math.BigInteger(1)`为 Java 1.4 编译该行。您使用 Java 5 编译器和 1.4 目标，所以一切听起来都不错。但是 Java 5 核心库包含一个带参数的`BigInteger`构造`int`函数，因此您的类将使用对该构造函数的引用来构建。不幸的是，Java 1.4 没有此版本的`BigInteger`构造函数，如果您稍后在 1.4 JVM 中运行此代码，您将收到运行时错误。使用适当的 Java 1.4 编译器会发生的事情是，编译器会产生一个内部转换 from `int`to`double`以服务于采用双精度的适当构造函数。

# c - C控制台输出不连续，等到程序完成

> ID：14430472
> 
> 赞同：2
> 
> 时间：2013-01-20T23:17:20.383
> 
> 标签：c, windows, eclipse, console, output

我使用“GCC C 编译器”作为我的编译器，我有一个程序使用“fgets”将输入作为标准输入，然后由于某些输入，我使用多个 printf 来打印结果。

但是，我的问题是我希望输出发生在 fgets 之间，它们确实驻留在我的代码中，但是在我从 main 返回并且程序结束之前，目前什么都不会打印。

输入代码：

```
int get_inputs(char** operands, char* delim) {
  if (fgets(input,sizeof(input),stdin) == NULL) return 0;  /* End of file */

  /* Parse with StringParse, returns number of substrings */
  return StringParse(input, operands, delim, 2, "+-*/^ ");
} 
```

输出代码：（在 While(1) 循环中）

```
count = get_inputs(operands, delim);

switch(count) {
case 0:
    printf("User Terminated\n");
    return 0;  /* User Terminated */

case 1: /* Single Value Input */
    accumulator = atof(operands[0]);
    printf("%g\n", accumulator);
    break;

case 2:
    if(strlen(operands[0]) == 0) { /* Operation First use Accumulator as input */
        accumulator = doMath(accumulator, atof(operands[1]), delim[0]);
        printf("%g\n", accumulator);
    }
    else { /* Two new values, replace Accumulator */
        accumulator = doMath(atof(operands[0]), atof(operands[1]), delim[0]);
        printf("%g\n", accumulator);
    }
    break;

default:
    printf("Invalid Input\n"); /* Invalid Input or Error */
    break;
} 
```

每个其他函数都只是进行数学或字符串解析。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:21:15.833

这是因为 stdout 被缓冲以提高性能。数据仅以较大的块推送到输出管道。要强制这种情况发生在某个点，请添加

```
fflush(stdout); 
```

在写入标准输出的代码中。

# linux - 拦截系统调用

> ID：14430475
> 
> 赞同：5
> 
> 时间：2013-01-20T14:34:07.673
> 
> 标签：linux, kernel, linux-kernel

我一直在尝试在内核级别挂钩系统调用。我从这个问题中得到了基本的想法。我试图拦截的系统调用是`fork()`. 所以我找到了`sys_call_table`from的地址，`System.map`原来是0xc12c9e90。现在我编写了如下模块。

```
#include<linux/kernel.h>
#include<linux/module.h>
#include<linux/unistd.h>
#include<linux/semaphore.h>
#include<asm/cacheflush.h>
MODULE_LICENSE("GPL");
void **sys_call_table;
unsigned long addr;
asmlinkage int (*original_call)(struct pt_regs);
asmlinkage int our_call(struct pt_regs regs)
{
        printk("Intercepted sys_fork");
        return original_call(regs);
}
static int __init p_entry(void)
{
       struct page *pg;
       printk(KERN_ALERT "Module Intercept inserted");
       sys_call_table=(void *)0xc12c9e90;
       pg=virt_to_page(sys_call_table);
       addr=(unsigned long)page_address(pg);
       set_memory_rw(addr,1);
       original_call=sys_call_table[__NR_fork];
       sys_call_table[__NR_fork]=our_call;
       set_memory_ro(addr,1);
       return 0;
}
static void __exit p_exit(void)
{
       sys_call_table[__NR_fork]=original_call;
       set_memory_ro(addr,1);
       printk(KERN_ALERT "Module Intercept removed");
}
module_init(p_entry);
module_exit(p_exit); 
```

我编译了模块并尝试将其插入内核。不幸的是，dmesg 输出给了我如下消息**BUG：无法在 c12c9e98 处理内核分页请求，**这是 ellaborate dmesg 输出

![在此处输入图像描述](../Images/59721c64124c3d942d7054d8a4c565c9.png) ![在此处输入图像描述](../Images/676122d1c910f9578da7245ac05a662f.png)

作为找出问题的实验，我只是将这一行注释掉了

```
sys_call_table[__NR_fork]=our_call; 
```

之后我重复编译，然后插入。它没有显示任何错误。所以我得出结论，上面指定的将新函数分配给 sys_call_table 的行是问题所在。但我不知道是什么原因造成的以及如何解决它。任何人都可以帮我解决它吗？

# jakarta-ee - GlassFish 3.1.2.2 JDBC 领域错误

> ID：14430477
> 
> 赞同：0
> 
> 时间：2013-01-20T23:17:57.590
> 
> 标签：jakarta-ee, jsf-2, glassfish-3

我正在尝试在我的 JSF 应用程序中配置 JDBC Realm，然后我阅读了多个博客，但在所有情况下都出现以下错误。

> 严重：jdbcrealm.invaliduserreason 警告：WEB9102：Web 登录失败：>com.sun.enterprise.security.auth.login.common.LoginException：登录失败：安全异常

我提到了以下两个链接

[http://jugojava.blogspot.in/2011/02/jdbc-security-realm-with-glassfish-and.html](http://jugojava.blogspot.in/2011/02/jdbc-security-realm-with-glassfish-and.html)

[http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-b​​ased.html](http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-based.html)

[LoginException：登录失败：安全异常](https://stackoverflow.com/questions/7941713/loginexception-login-failed-security-exception)

我的 JDBC 连接池 Pings，并且我在 Configuration > Server-config 中指定了领域。我已将 JAAS 上下文指定为 jdbcRealm。我已将 JNDI 名称指定为 JDBC 资源名称。我已指定密码加密算法 = SHA-256（也尝试过 MD5）我已将编码指定为十六进制（也尝试过 Base64）我已将摘要算法指定为无（也尝试使用 SHA-256）

（我有一个非常基本的 web.xml 并尝试了 sun-web.xml/glassfish-web.xml）

有人可以让我知道我应该在哪里解决问题吗，有没有办法检查领域是否连接到数据库和领域的日志（我的意思是当控制权进入领域并从那里发生时会发生什么？到数据库等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:09:28.787

我不知道 Glassfish 领域如何为其他人工作，但为了解决我的问题，我必须为 user_table 和 group_table 添加模式名称和表名称。

喜欢（在 jdbcRealm 中） user-table = schema.user_table group-table = schema.group_table

# ruby-on-rails - Ruby on Rails - 加载缓慢并在垃圾收集器中花费大量时间

> ID：14430478
> 
> 赞同：4
> 
> 时间：2013-01-20T23:17:57.933
> 
> 标签：ruby-on-rails, ruby, garbage-collection, profiling

我有一个大型 Rails 应用程序，我希望提高（令人沮丧的）性能。

使用 ruby​​-prof 运行对我没有多大帮助，我得到与此类似的输出（在瘦的生产模式下运行）：

```
Thread ID: 9322800
Total: 1.607768
Sort by: self_time

 %self     total     self     wait    child    calls   name
 26.03      0.42     0.42     0.00     0.00     1657   Module#define_method 
  8.03      0.13     0.13     0.00     0.00      267   Set#initialize 
  4.41      0.07     0.07     0.00     0.00       44   PG::Result#values 
  4.28      0.07     0.07     0.00     0.00     1926   ActiveSupport::Callbacks::Callback#start 
  4.21      0.07     0.07     0.00     0.00    14835   Kernel#hash 
  4.13      0.08     0.07     0.00     0.01      469   Module#redefine_method 
  4.11      0.07     0.07     0.00     0.00       63  *<Class::ActiveRecord::Base>#with_scope 
  4.02      0.07     0.06     0.00     0.00      774   ActiveSupport::Callbacks::Callback#_compile_options 
  3.24      0.05     0.05     0.00     0.00       30   PG::Connection#async_exec 
  2.31      0.40     0.04     0.00     0.37     2130  *Module#class_eval 
  1.47      0.02     0.02     0.00     0.00        6   PG::Connection#unescape_bytea 
  1.03      0.05     0.02     0.00     0.03      390  *Array#select 

* indicates recursively called methods 
```

我猜可能它在垃圾收集器上花费了很多时间，所以由于我在[REE](http://www.rubyenterpriseedition.com/)上运行，我决定尝试使用 GC.enable_stats 来获取更多信息。我将以下内容添加到我的应用程序控制器中：

```
around_filter :enable_gc_stats

private

def enable_gc_stats
  GC.enable_stats

  begin
    yield
  ensure
    GC.disable_stats
    GC.clear_stats
  end
end 
```

在我的机器上以生产模式运行的一个相对较大的页面上，使用 REE 和瘦网络服务器（禁用 ruby​​-prof，因为它使它有点慢）我得到：

```
Completed 200 OK in 1093ms (Views: 743.1ms | ActiveRecord: 139.2ms)

GC.collections: 11
GC.time: 666299 us 666.299 ms
GC.growth: 461 KB

GC.allocated_size: 152 MB
GC.num_allocations: 1,924,773
ObjectSpace.live_objects: 1,015,195
ObjectSpace.allocated_objects: 12,393,644 
```

因此，对于一个耗时 1093 毫秒的页面，垃圾收集器似乎花费了将近 700 毫秒。以前有人遇到过这种问题吗？我意识到你无法帮助我的应用程序（它非常大，有很多宝石和东西） - 但是有没有技术或工具可以更好地了解为什么会产生这么多垃圾？

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T00:16:36.187

您的 rails 日志显示大部分时间 (75%) 都花在查看代码上。

您的个人资料报告显示了三个明显的热点：`Module#define_method`自拍时间、`Module#class_eval`总时间和`Set#initialize`.

`define_method`并`class_eval`表明可能有很多动态代码执行对我来说似乎过度 - 通常您希望尽早生成该代码并重用它，而不是重复地重新生成它。几乎可以肯定，这是您过多的对象分配问题的一部分。生成图表报告而不是平面报告应该可以帮助您找到落入这些昂贵路径的父方法，并且可以为您提供可以优化的指针。

`Set#initialize`可能是您的代码需要执行的真正工件，或者它可能表明存在一些重要的`Set[...]`或`Set::new`集合创建调用内联，可以执行一次并分配给常量或实例/类 var 以供重用。

ruby-prof 没问题，但您可能还想尝试[perftools.rb](https://github.com/tmm1/perftools.rb)，它很容易使用[rack-perftools_profiler](https://github.com/bhb/rack-perftools_profiler)连接到机架导轨。perftools 有一些增强的可视化工具，可以更容易地理解热执行路径。

由于您正在运行 REE 并且广泛的对象分配（因此垃圾收集）是一个问题，您可以尝试[memprof](https://github.com/ice799/memprof)以了解所有这些分配的来源和来源。

如果您找不到减少分配对象数量的途径，您可以通过[调整 GC](http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_performance_tuning)以预分配足够大的堆以容纳典型请求的分配需求，从而以更大的进程内存大小为代价来减轻 GC 负担。[Unicorn 为带外 GC](http://unicorn.bogomips.org/Unicorn/OobGC.html)提供了一个机架模块。您也许可以调整此模块的方法来处理瘦，并将所有 GC 时间转移到请求之间——您仍然需要支付 cpu 成本，但至少您不会延迟垃圾收集的响应。

# matplotlib - Matplotlib AxesDivider：子轴删除问题

> ID：14430480
> 
> 赞同：0
> 
> 时间：2013-01-20T23:18:12.083
> 
> 标签：matplotlib

我在尝试从画布中删除几个子轴时遇到了麻烦。下面的示例脚本显示了该问题：

```
from matplotlib.figure import Figure
from mpl_toolkits.axes_grid.axes_divider import make_axes_locatable
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

class Test(QWidget):
    def __init__(self):
        QWidget.__init__(self)
        self.resize(1000, 600)  
        self.fig = Figure(figsize=(100,100), dpi=75)  
        axes1 = self.fig.add_subplot(121)
        axes2 = self.fig.add_subplot(122)

        self.subaxes = []
        for ax in [axes1, axes2]:
            divider = make_axes_locatable(ax)
            self.subaxes.append(divider.append_axes("right", "40%", "20%"))

        b = QPushButton("Remove subaxes")
        b.clicked.connect(self.OnBtnClicked)
        l = QHBoxLayout()
        l.addWidget(FigureCanvas(self.fig))
        l.addWidget(b)
        self.setLayout(l)

    def OnBtnClicked(self):
        for sa in self.subaxes:
            self.fig.delaxes(sa)
            del sa
        self.fig.canvas.draw()

app = QApplication(sys.argv)  
win = Test()
win.show()
sys.exit(app.exec_()) 
```

主窗口由两个主轴和位于其右侧的两个子轴组成。如果单击窗口中的按钮，两个子轴会按我的预期消失，但原始轴不会调整大小。有什么我想念的吗？或者任何人都可以指出我是否有更好的方法来实现这一目标？

提前致谢！

# batch-file - 批量获取括号之间的字符串

> ID：14430481
> 
> 赞同：4
> 
> 时间：2013-01-20T23:18:23.510
> 
> 标签：batch-file

我只是决定学习一小批。

所以为了做一些有用的事情，我决定创建一个脚本来组织我的音乐。它们都是这种格式：

乐队（专辑） - TrackNumber - TrackName

我希望我的脚本创建一个带有乐队名称的文件夹，并在其中创建一个包含 albuns 名称的文件夹。所以我需要使用文件名，但我不知道如何使用 FINDSTR 或任何其他方法来获取“（”之前和括号之间的字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:08:48.330

这里有一些很好的资源可以帮助您：

**[Technet](http://technet.microsoft.com/en-us/library/cc772390%28v=ws.10%29.aspx)** \ **[DosTips](http://www.dostips.com)** \ **[SS64](http://ss64.com/)** \ **[Rob van de Woude](http://www.robvanderwoude.com/batchfiles.php)** \ **[ComputerHope](http://www.computerhope.com/jargon/c/commandi.htm)**

这是一个如何解析您列出的字符串的示例。请注意，如果乐队、专辑或曲目名称中有空格，则此示例将不起作用。

```
for /f "delims=()- " %%A in ("Band (Album) - TrackNumber - TrackName") do (
    echo Band = "%%~A"
    echo Album = "%%~B"
    echo TrackNumber = "%%~C"
    echo TrackName = "%%~D"
) 
```

输出：

```
Band = "Band"
Album = "Album"
TrackNumber = "TrackNumber"
TrackName = "TrackName" 
```

但是，此示例将通过不将空格用作分隔符来处理空格。不幸的是，这意味着不会从结果中删除空格。

```
for /f "delims=()-" %%A in ("Band Name (Album) - Track Number - Track Name") do (
    echo Band = "%%~A"
    echo Album = "%%~B"
    echo TrackNumber = "%%~C"
    echo TrackName = "%%~D"
) 
```

输出：

```
Band = "Band Name "
Album = "Album"
TrackNumber = " Track Number "
TrackName = " Track Name" 
```

可以从字符串中修剪空格，但我会让你学习这种技术:) 提示，请参阅上面的链接。

# c# - 在 Visual Studio 2010 中创建和使用本地数据库

> ID：14430485
> 
> 赞同：4
> 
> 时间：2013-01-20T23:18:47.947
> 
> 标签：c#, winforms, visual-studio-2010, sdf, local-database

我似乎找不到任何关于如何在使用本地数据库的 Visual Studio 2010 中使用 C# .NET 创建 Windows 窗体应用程序的直接指南。当我创建本地数据库时，一个 .sdf 文件，我不知道如何让我的表单访问它。我能找到的所有关于它的讨论似乎都假设我在这个主题上比我知道的更多。任何人都可以指导我获得有关该主题的直接初学者指南，或概述我需要采取的步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:52:39.030

检查[这里](http://www.dotnetperls.com/sqlce)，它将引导您完成您需要做的事情......如果您对链接流程的特定部分有任何具体问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T14:13:17.857

我发现这个库很有帮助

[https://github.com/martincostello/sqllocaldb](https://github.com/martincostello/sqllocaldb)

通过 nuget 添加后，它非常易于使用

```
ISqlLocalDbProvider provider = new SqlLocalDbProvider();
ISqlLocalDbInstance instance = provider.GetOrCreateInstance("MyInstance");

instance.Start();

using (SqlConnection connection = instance.CreateConnection())
{
    connection.Open();

    // Use the connection...
}

instance.Stop(); 
```

# c++ - c ++在析构函数中删除数组

> ID：14430487
> 
> 赞同：1
> 
> 时间：2013-01-20T23:18:52.277
> 
> 标签：c++

所以我得到了一个对象，它有一个数组作为实例之一：

```
private:
  int arr[100]; //this is a fix array 
```

当我调用对象的析构函数时，我应该写：

```
~MyBook(){delete []arr;} //just like I did with array pointer 
```

还是我应该写这样的东西

```
~MyBook(){} 
```

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:20:43.030

您是否使用 分配了数组`new[]`？不？那就不要用了`delete[]`。就这么简单。分别调用`delete([])`未分配的东西是未定义的行为`new([])`。

另外，如果不需要，请不要编写析构函数。在这种情况下，它不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:19:51.713

如果你只有数组，那么你不需要提供任何析构函数。编译器合成一个就可以了。即使出于其他原因确实需要析构函数，也不应尝试调用`delete[]`数组。您应该只对使用动态分配的数组执行此操作`new[]`。

# fonts - 压缩或修剪字体以使用字体

> ID：14430488
> 
> 赞同：2
> 
> 时间：2013-01-20T23:19:38.090
> 
> 标签：fonts, font-face

我正在开始一个使用[乌尔都语](http://en.wikipedia.org/wiki/Urdu)字体的网络项目，特别是使用 Jameel Nastaleeq 字体。我一直在研究使用 Cufon 或 @font-face。

该字体非常适合本地安装，但是对于任何实际的 Web 使用来说都是巨大的。

尺寸：

```
TTF  - 13   MB
EOT  - 13.5 MB
SVG  - 33   KB
WOFF -  8.7 MB 
```

由于大小，只有[Code And More](http://fontface.codeandmore.com/)甚至能够生成字体套件。其他的，比如[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)和[Cufon](http://cufon.shoqolate.com/generate/)断然拒绝使用这么大的字体文件。

有什么简单的方法可以让我“修剪”原始的 TTF 字体，这样我就只有我需要的 unicode 范围。或者压缩实际字体以便在线生成器可以正确处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:14:42.510

我相当确定有一种方法可以使用 fontsquirrel 的在线 webfont 生成器来做到这一点。尝试上传您的字体并选择“高级”选项。同样，我不完全确定它是否存在，但如果是，那么这是最简单的方法。我知道的唯一其他方法是使用可以操作字体的程序。据我所知，唯一有信誉的免费程序是inkscape。为此，我相信您需要 svg 格式的字体，您可以使用 fontsquirrel 获得该字体。inkscape 方法可能不值得付出努力，具体取决于您需要这样做的程度，但这是我知道如何做到这一点的仅有的两种方法。

编辑：对不起，我没有看到你关于 fontsquirrel 的注释。如果您真的需要这样做，请尝试找到另一种获取 svg 文件并使用 inkscape 的方法

# python - 如何在两个列表中查找匹配项的索引

> ID：14430501
> 
> 赞同：4
> 
> 时间：2013-01-20T23:20:50.170
> 
> 标签：python, list, list-comprehension

我目前正试图为以下列表理解问题找到一个很好的解决方案：

很容易在两个列表中找到具有相同索引的相等值，例如

```
>>> vec1 = [3,2,1,4,5,6,7]
>>> vec2 = [1,2,3,3,5,6,9]
>>> [a for a, b in zip(vec1, vec2) if a == b]
[2,5,6] 
```

但是，我只需要发生这些匹配的列表中的索引，而不是值本身。使用上面的例子，我想要的输出是：`[1,4,5]`

我四处修补，但我只能想到一个“多线”解决方案。有人知道我如何以更 Pythonic 的方式找到索引吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T23:22:04.603

你很接近，`enumerate()`在这里使用。

`enumerate()`返回一个元组，其中第一个元素是索引，第二个元素是从可迭代对象中获取的数据。

```
In [169]: vec1 = [3,2,1,4,5,6,7]

In [170]: vec2 = [1,2,3,3,5,6,9]

In [171]: [i for i,(a, b) in enumerate(zip(vec1, vec2)) if a == b]
Out[171]: [1, 4, 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:23:55.137

```
[i for i, (a,b) in enumerate(zip(vec1,vec2)) if a==b] 
```

# qt - 在 QML 中设置公共属性值，例如 QSS

> ID：14430503
> 
> 赞同：5
> 
> 时间：2013-01-20T23:20:56.130
> 
> 标签：qt, qml, qt-quick, qtquick2

例如，我有 2 个具有共同属性的不同 QML 元素，例如：

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360

    Text {
        id: t
        color: "red"
        text: qsTr("Hello World")
        anchors.top: parent.top
    }
    TextInput {
        text: qsTr("Hello all!")
        color: "red"
        anchors.top: t.bottom

    }
} 
```

您可以看到，Text 和 TextInput 具有相同的属性，称为“颜色”，具有相同的值。

在 QSS 中，我可以使用公共属性值，例如：

```
QWidget {
   background: "red"
} 
```

并且所有属于 qss 小部件的 QWidgets 也将具有红色背景。

是在 QML 中设置公共属性的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T06:01:35.403

不支持在 QML 中使用 QSS 进行自定义。但是您可以使用“样式对象”方法来设置属性并在所有 QML 文件中使用它们。

在此，您在“Style.qml”文件中定义一个 Style 对象，其属性定义该样式。在根组件中实例化，因此它将在整个应用程序中可用。

```
// Style.qml
QtObject {
    property int textSize: 20
    property color textColor: "green"
}

// root component
Rectangle {
    ...
    Style { id: style }
    ...
}

// in use
Text {
    font.pixelSize: style.textSize
    color: style.textColor
    text: "Hello World"
} 
```

[您可以在此处](http://qt-project.org/wiki/QmlStyling)找到更多信息。

# c++ - cv::FileStorage 在 Qt 中不起作用

> ID：14430510
> 
> 赞同：1
> 
> 时间：2013-01-20T23:21:36.567
> 
> 标签：c++, qt, opencv, read-write, file-storage

我有一个我在 Xcode 中编写的命令行 openCV 程序，它打开两个 XML 文件，分析然后比较它们。但是，我现在尝试使用 QtCreator 将该程序放入 GUI 中，以便更容易理解输出。

问题是，Qt 似乎不喜欢 cv::FileStorage。程序编译得很好，但是当我真正尝试执行 OpenCV 部分时，它崩溃了，给出了这个错误：

> OpenCV 错误：cvOpenFileStorage 中的空指针（NULL 或空缓冲区），文件 /tmp/OpenCV-2.4.3/modules/core/src/persistence.cpp，第 2702 行 Qt 已捕获从事件处理程序引发的异常。Qt 不支持从事件处理程序中抛出异常。您必须重新实现 QApplication::notify() 并在那里捕获所有异常。
> 
> 程序意外结束。

有谁知道为什么 Qt 似乎不喜欢运行这个程序？或者，如果有一种方法可以将 OpenCV 程序干净地集成到 Qt 中？

注意这是 Qt GUI 的样子：

![在此处输入图像描述](../Images/5d4cdd3fa4f1a36d9ba3a87e0fb24154.png)

用户使用相关按钮选择两个 XML 文件。然后将这些文件的路径存储并显示在按钮旁边的框中。然后，我使用以下命令将 QStrings 转换为 std::strings：

```
std::string file1path = file1Name.toUtf8().constData();
std::string file2path = file2Name.toUtf8().constData(); 
```

然后将 file1path 和 file2path 传递给 cv::FileStorage 命令，如下所示：

```
//Create File Storage
FileStorage storage1;
storage1.open(file1path, FileStorage::READ);

FileStorage storage2;
storage2.open(file2path, FileStorage::READ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:40:52.580

它不是专门针对 Qt 的。
OpenCV 在您使用 fileStorage 时抛出错误，文件不存在，不可读，或者您试图读取错误的类型。

Qt 给你这个错误是因为异常已经到达它的一般错误处理程序，用于未经检查的异常而不是 openCv，它会打印一个更有用的错误。

您可以通过向 QApplication 添加方法来向 Qt 应用程序添加全局异常处理程序

```
bool QApplication::notify ( QObject * receiver, QEvent * event )
    {
      try{
        return QApplication::notify( received, event );
      }
      catch ( const std::exception &e )
      {
        QApplication::postEvent( this, new MyEvent( e.what() );
      }
      catch ( ... )
      {

      } 
```

另见[http://qt-project.org/doc/qt-4.8/exceptionsafety.html](http://qt-project.org/doc/qt-4.8/exceptionsafety.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-11T01:33:04.963

如果您使用它，请尝试将“”替换为“/”

# mysql - 选择列值相差超过两年的行

> ID：14430511
> 
> 赞同：1
> 
> 时间：2013-01-20T23:21:37.697
> 
> 标签：mysql, sql

所以我的表有这样的记录

```
ID    PRODUCT      MAKE_DATE       ORDER_DATE
1       aaaa       2010-11-04      2051-12-11 16:13:43
2       bbb        2011-10-05      2010-11-11 00:00:00
3       cccc       2010-05-20      0000-00-00 00:00:00 
```

我的问题：如何显示与2 年`make_date`不同的结果`order_date`？

IM坚持这一点：

```
Select ID, Product, make_date, order_datetime
FROM `tbl_order`
WHERE make_date ??? order_datetime 
```

结果应该是：

```
1       aaaa       2010-11-04      2051-12-11 16:13:43
3       cccc       2010-05-20      0000-00-00 00:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:39:03.603

```
Select ID, Product, make_date, order_datetime
FROM tbl_order
WHERE make_date < order_datetime - INTERVAL 2 YEAR 
   OR make_date > order_datetime + INTERVAL 2 YEAR ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:25:01.167

对于 MySQL 使用`TIMESTAMPADD`函数：

```
SELECT ID, Product, make_date, order_datetime
FROM `tbl_order`
WHERE make_date > TIMESTAMPADD(YEAR, 2, order_datetime)
OR make_date < TIMESTAMPADD(YEAR, -2, order_datetime) 
```

# iphone - 如何在单个 animateWithDuration 调用期间缩放和旋转

> ID：14430512
> 
> 赞同：9
> 
> 时间：2013-01-20T23:21:48.043
> 
> 标签：iphone, ios, objective-c, animation, uikit

我正在`UIView`使用以下代码制作动画。这很好用，但我如何让它同时动画比例，我希望它在旋转时缩小到 0。

```
[UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                     recognizer.view.transform = CGAffineTransformMakeRotation(DegreesToRadians(540));
                     recognizer.view.backgroundColor = [[UIColor alloc] initWithRed:220.0/255.0 green:220.0/255.0 blue:220.0/255.0 alpha:1.0];   
                 }]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T23:30:38.717

只需使用`CGAffineTransformConcat`方法。尝试：

```
[UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                     recognizer.view.transform = CGAffineTransformConcat(CGAffineTransformMakeRotation(DegreesToRadians(540)), CGAffineTransformMakeScale(1.0, 1.0));
                     recognizer.view.backgroundColor = [[UIColor alloc] initWithRed:220.0/255.0 green:220.0/255.0 blue:220.0/255.0 alpha:1.0];   
                 }]; 
```

希望有帮助！

# c# - 加载时自动调整文本框宽度 -> 然后固定大小

> ID：14430514
> 
> 赞同：0
> 
> 时间：2013-01-20T23:21:49.143
> 
> 标签：c#, wpf, textbox, width, autosize

这是使用 C# 对 wpf 的一种新手问题。

我有一个`TextBox`，用户可以在其中输入时间。由于字体大小可能不同，我希望`TextBox`在加载表单时自动调整为其初始值“00:00:00”。

之后，我不想调整大小，因为如果`TextBox`调整用户输入的大小看起来很奇怪。

目前我在 xaml 文件中定义：

```
<TextBox Text="00:00:00" Name="myTextBox" /> 
```

这样做，TextBox 将自动调整为当前内容。

为了防止它在表单可见后调整大小，我使用：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    myTextBox.Width = myTextBox.ActualWidth;
} 
```

这给了我想要的结果。

但是，仅通过设置 xaml 属性是否也有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:40:43.757

我认为您需要使用当前字体确定文本的宽度，并将该大小设置为`TextBox`宽度。`FormattedText`您可以使用该类测量文本宽度（请参阅[FormattedText 方法](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext_methods.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:50:35.780

在 XAML 中执行此操作的问题在于，当将 绑定`Width`到时`ActualWidth`，的初始值`ActualWidth`通常为 0。因此它会将您的宽度设置为 0。

这可以通过使用`Converter`.

所以像这样创建你的`TextBox`：

```
<TextBox Text="00:00:00" Name="myTextBox" Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource Self}, Converter={StaticResource widthConverter}}" /> 
```

现在你的转换器应该是这样的：

```
class WidthConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {  
        double actualWidth;

        if (Double.TryParse(value.ToString(), out actualWidth))
        {
            if (actualWidth> 0)
            {
                return actualWidth;
            }
        }
        return null;
    }
} 
```

换句话说，只返回`ActualWidth`if > 0。

转换器实际上将被调用两次，第二次使用正确的值，这将在文本框的`Width`属性中设置。

# jquery-ui-draggable - 如何使用 jquery ui 制作可拖动的菜单？

> ID：14430518
> 
> 赞同：0
> 
> 时间：2013-01-20T23:22:49.013
> 
> 标签：jquery-ui-draggable

您将如何使用允许您拖动内容的[jQuery UI制作可拖动菜单？](http://jqueryui.com/draggable/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:22:49.013

通过使用`data-address`属性和一些代码，我想出了这个解决方案

HTML

```
<!doctype html>
<html>
<body>
<ul>
  <li><a href="javascript:void;" data-address="a.php">Blah</a>
  <li><a href="javascript:void;" data-address="b.php">Blah</a>
  <li><a href="javascript:void;" data-address="c.php">Blah</a>
  <li><a href="javascript:void;" data-address="d.php">Blah</a>
  <li><a href="javascript:void;" data-address="e.php">Blah</a>
  <li><a href="javascript:void;" data-address="f.php">Blah</a>
</ul>
<div class="ui-widget-header">
  <p>Drag a menu item over me!</p>
</div>
</body>
</html> 
```

CSS

```
ul li {
display:inline-block;
position:relative;
text-align:center;
}
@media screen and (min-width:480px) {ul li{width:33.33%;}}
@media screen and (max-width:479px) {ul li{width:50%;}}
@media screen and (max-width:195px) {ul li{width:100%;}}
ul li a {
display:block;
padding:20px 0;
text-decoration:none;
color: black;
text-transform:uppercase;
}
ul li:nth-child(1) a{background-color: green;}
ul li:nth-child(2) a{background-color: red;}
ul li:nth-child(3) a{background-color: #ff8400;}
ul li:nth-child(4) a{background-color: purple;}
ul li:nth-child(5) a{background-color: #49a7f3;}
ul li:nth-child(6) a{background-color: yellow; }
.ui-widget-header {
height:56px;
padding:18px 0;
margin:auto !important;
text-align:center;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box;
} 
```

jQuery

```
$(function () {
$("ul li").draggable({
    snap: ".ui-widget-header",
    snapMode: "inner",
    revert: "invalid"
});
$(".ui-widget-header").droppable({
    accept: "li",
    drop: function (event, ui) {
        location = $(ui.draggable).children('a').data('address');
    }
});
$(window).resize(function () {
    var droppable = $('.ui-widget-header');
    droppable.width($('li').outerWidth() - parseInt(droppable.css('borderLeftWidth'), 10) - parseInt(droppable.css('borderRightWidth'), 10));
}).resize();
}); 
```

[密码笔](http://codepen.io/burn123/pen/hlxFy)

# assembly - 有人可以将以下加载和存储指令解释为 ARM ISA 的一部分吗？

> ID：14430522
> 
> 赞同：4
> 
> 时间：2013-01-20T23:23:10.157
> 
> 标签：assembly, arm

我刚刚开始学习 ARM，但我无法理解加载和存储指令的确切作用。

加载说明：

```
ldrsb
ldrb
ldrsh
ldrh
ldr 
```

店铺说明：

```
strb
strh
str 
```

“加载半字”有符号或无符号是什么意思？还是“加载字节”有符号或无符号？有符号和无符号之间有什么区别，在哪些特定应用程序中某些加载/存储指令可以实际使用？总而言之，我正在寻找对这些指令作用的直观理解，因为我仍然对它们的工作方式和目的感到困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T23:51:14.077

在谈论 ARM 时，“字”是 32 位，“半字”是 16 位，“字节”是 8 位。如果您阅读 ARM Architectural Reference Manual 中的指令集文档（如果您不知道要获取哪一个，只需获取 ARMv5 的文档，infocenter.arm.com），您会看到 ldrb 将字节加载到低 8 位目标寄存器将高 24 位填充为零。ldrsb 将符号扩展而不是用零填充。半字也是如此。

如果你有这样的代码：

```
char a,b,c;
...
c = a+b;
if(c<0)
{
} 
```

并且在您需要进行此添加时，a 或 b 或两者都在内存中，那么理想情况下，您希望进行符号扩展（假设您已告诉编译器 char 已签名）加载以保存指令符号扩展寄存器因此您可以执行数学运算并为比较设置正确的标志。

从 ARM ARM。

LDRSB（加载寄存器有符号字节）从内存中加载一个字节，对其进行符号扩展以形成一个 32 位字，并将结果写入通用寄存器。

LDRB（加载寄存器字节）从内存中加载一个字节，对其进行零扩展以形成一个 32 位字，并将结果写入通用寄存器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-13T20:16:01.803

ARM 是一种 RISC（精简指令集计算）架构，这意味着必须使用您所指的指令、加载和存储指令将内存移入和移出寄存器。

> 加载指令从内存中获取单个值并将其写入通用寄存器。存储指令从通用寄存器中读取一个值并将其存储到内存中。
> 
> `Most Often Used Load/Store Instructions`
> 
> ```
> Loads            Stores      Size and Type
> LDR              STR         Word (32 bits)
> LDRB             STRB        Byte (8 bits)
> LDRH             STRH        Halfword (16 bits)
> LDRSB                        Signed byte
> LDRSH                        Signed halfword
> LDM              STM         Multiple words 
> ```

*（取自 ARM 汇编语言 - William Hohl）*

加载和存储指令（通常）采用以下形式：

```
LDR | STR {type}{cond}    Rt, [Rn {, #offset}] 
```

*（虽然根据您希望使用的寻址模式的类型存在一些差异，但我不会在这里讨论，如果您想了解更多的寻址模式，您应该查看**'ARM post-index and前索引寻址'**）*

“类型”是可选的，如上表所述，您可以在其中选择使用半字、字节以及有符号或无符号字节或半字。您还可以选择加载或存储多个寄存器。

您还可以选择向指令 (cond) 添加条件代码，该指令用于设置*当前程序状态寄存器 (CPSR)*中保存的条件标志- 如果您想了解更多相关信息，可以搜索对于*“ARM 条件执行”*和*“条件代码”*。

在 ARM 中，您必须提供源/目标寄存器，并且还必须提供一个寄存器，该寄存器包含引用内存中某个位置的地址。这是因为 ARM 指令是固定长度（32 位），其中一些位需要用于它自己的指令，因此不可能将 32 位内存地址封装在 32 位 ARM 指令中。

在上面的示例中，“Rt”是您从内存中加载的值所在的寄存器（或包含您正在存储到内存中的值的寄存器，如果您正在执行存储）。“Rn”是包含地址的寄存器。方括号用于告诉处理器我们正在使用包含地址的寄存器，我们正在使用*指针*。如果您想从基址寄存器偏移特定数量，则存在可选偏移量（这在各种有用的应用程序中都很方便，但我不会在这里介绍它们）。

我希望这能让您对 ARM 的加载和存储指令的工作方式有所了解！:)

# mysql - mysql从表中获取没有重复的数据

> ID：14430523
> 
> 赞同：-2
> 
> 时间：2013-01-20T23:23:20.043
> 
> 标签：mysql

> **可能重复：**
> [如果我添加另一列，Mysql DISTINCT 不起作用](https://stackoverflow.com/questions/14430121/mysql-distinct-not-working-if-i-add-another-column)

```
mysql> select DISTINCT number, id from table order by rand()

+------+------------+
| id   | number     |
+------+------------+
|    2 | 4          |
|    1 | 3          |
|    4 | 3          |
|    3 | 4          |
+------+------------+ 
```

我需要得到类似的东西

```
+------+------------+
| id   | number     |
+------+------------+
|    2 | 4          |
|    4 | 3          |
+------+------------+ 
```

刷新

```
+------+------------+
| id   | number     |
+------+------------+
|    3 | 4          |
|    1 | 3          |
+------+------------+ 
```

刷新....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:46:04.143

```
SELECT 
    ( SELECT tt.id 
      FROM tableX AS tt 
      WHERE tt.number = t.number
      ORDER BY RAND()
          LIMIT 1
    ) AS id,
    number
FROM 
    tableX AS t
GROUP BY
    number ; 
```

# subsonic3 - 无法决定要考虑哪个属性 - 您可以创建一个名为“ID”的属性或使用 SubSonicPrimaryKey 属性标记一个

> ID：14430526
> 
> 赞同：1
> 
> 时间：2013-01-20T23:23:26.580
> 
> 标签：subsonic3

我已经研究过这个问题的答案，但我无法找出问题所在。

我在保存记录时收到此错误

无法决定要考虑哪个属性 - 您可以创建一个名为“ID”的属性或使用 SubSonicPrimaryKey 属性标记一个

它与具有名为“ID”（int）的自动增量主键 ID 的表相关。我已经尝试将 [SubsonicPrimaryKey] 添加到公共属性（当然，如果它称为 ID 我不需要）。该表与我的 Save 方法中设置的另一个链接表具有完全相同的架构设计，这不会导致错误。

这是我的第一个 Subsonic 应用程序，我遇到了这个错误，不知道接下来要尝试什么。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:28:20.143

如果您查看 Subsonic 源代码，您将在 Object.cs（ToSchemaTable 方法）中看到确切的错误消息。

Subsonic 正在寻找以下内容：

在数据库中的表或 SubSonicPrimaryKeyAttribute 属性上设置的主键，然后用于

tableNameID 其中 tableName 是您的表的名称。或者

ID

钥匙

亚音速在这方面非常灵活。

你能提供你的表模式吗？

# android - Titanium Android - 在整个 Windows 中共享一个菜单

> ID：14430530
> 
> 赞同：0
> 
> 时间：2013-01-20T23:24:08.143
> 
> 标签：android, titanium, appcelerator, appcelerator-mobile, android-menu

我想知道是否有一种创建 NavGroup 的好方法，例如在 iOS 上，以共享一个菜单整个窗口。

假设我有几个窗口导致其他窗口像这样：

*   指数
*   *   地方
*   *   *   地点 1
*   *   *   地点 2
*   *   *   地点 3...
*   *   画廊
*   *   *   画廊 1
*   *   *   *   图片
*   *   选项
*   *   *   选项1
*   *   *   选项 2

上面的一切都是一个新窗口。

现在我想从选项 2 导航，回到地方，从图片到选项，反之亦然，等等。一切都通过 Android 菜单完成。

我需要在每个窗口的活动上附加菜单吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:07:53.987

你在使用 ActionBar 吗？我从来没有使用过钛，但这听起来像你在说什么。您可以创建一个下拉菜单，该菜单与 G+ 应用程序一样与所有窗口/片段类似。

[http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

[操作栏上的下拉菜单](https://stackoverflow.com/questions/11376101/drop-down-menu-on-action-bar)

[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Android.ActionBar](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Android.ActionBar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:36:09.727

您无法使用操作栏获得所需的结构。对于初学者，如果您查看官方 Android 文档，则应用程序图标旁边的下拉列表尚未实现。

您可以实现一个菜单，如 Facebook 应用程序的工作方式：

[具有 Facebook 应用导航样式的应用](http://developer.appcelerator.com/question/134112/app-with-facebook-app-navigation-style)

# algorithm - 康威人生游戏算法

> ID：14430534
> 
> 赞同：0
> 
> 时间：2013-01-20T23:24:35.043
> 
> 标签：algorithm, conways-game-of-life

有人知道如何在生命游戏中创造下一代，只知道活细胞在哪里，我的意思是它们的坐标（因此算法与活细胞的数量成线性关系）？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:33:13.870

维基[百科页面](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)详细介绍了所有可能的算法。虽然有一个“基本”的，但不只是一个；事实上，人们可以通过切换算法来创建不同的、有趣的模式，这一想法正是让生命游戏对大多数人如此着迷的原因。

您唯一需要了解的是在实际更改单元格之前检查它们的更改，以便首先读取它们然后再更改它们。您需要了解如何将这些数据临时存储为一种“废纸”概念。除此之外，这只是计算相邻单元格并随心所欲地行动的问题。

# python - 为什么我的游戏循环处理输入这么慢？

> ID：14430536
> 
> 赞同：0
> 
> 时间：2013-01-20T23:24:54.317
> 
> 标签：python, pygame

我目前正在使用 PyGame 模块使用 Python 制作游戏。我有两个课，一个游戏课和一个汽车课。游戏类有一个游戏循环方法，我让它循环不同的方法，一个是汽车类中的事件方法。当我运行程序时，一切正常。但是，当我尝试移动对象时，键盘输入的处理速度很慢，当我向移动键发送垃圾邮件时，某些输入根本无法识别。

我构建游戏循环的方式是否存在根本性错误？

游戏循环方法如下：

```
def game_loop(self):                                                                       

    running = True
    self.test_car = car()

    while running:

        pygame.display.set_caption("Project G")
        self.event_handler()
        self.screen.blit(self.background, (0,0))
        self.test_car.event_handler()
        self.test_car.update()
        pygame.display.flip() 
```

这是汽车类：

```
class car(game):

    def __init__(self):

        super(car, self).__init__()
        self.init_x_pos = 100
        self.init_y_pos = 100
        self.x_speed = 0
        self.y_speed = 0
        self.load_img = load()
        self.car_img = pygame.image.load(self.load_img.car_img)

    def event_handler(self):

        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()

            if event.type == KEYDOWN:
                if event.key == K_DOWN:
                    self.y_speed += 1
                    print "DOWN"
                elif event.key == K_UP:
                    self.y_speed -= 1
                    print "UP"
                elif event.key == K_RIGHT:
                    self.x_speed += 1
                    print "RIGHT"
                elif event.key == K_LEFT:
                    self.x_speed -= 1
                    print "LEFT"

    def update(self):

        self.screen.blit(self.car_img, (self.init_x_pos + self.x_speed, self.init_y_pos + self.y_speed)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:28:49.653

您可能应该只有一个循环调用`pygame.event.get()`；根据您按下按键时正在执行的代码部分，事件可能会被路由到其中一个或另一个。如果一个丢弃某些事件而另一个没有丢弃，那么每当第一个得到事件时，它将被忽略，而当第二个得到事件时，它会被正常处理。

# regex - 正则表达式以任何顺序匹配字符串，并且仅限于这些字符串

> ID：14430537
> 
> 赞同：0
> 
> 时间：2013-01-20T23:24:58.440
> 
> 标签：regex

[正则表达式以任何顺序匹配包含两个名称的字符串](https://stackoverflow.com/questions/4389644/regex-to-match-string-containing-two-names-in-any-order)很好地解释了如何以任何顺序匹配字符串。所以使用

```
(?=.*\bjack\b)(?=.*\bjames\b) 
```

将匹配

```
jack,james 
```

和

```
james,jack 
```

但是，它也会匹配

```
jack,james,jill 
```

我如何构造一个正则表达式以任何顺序匹配字符串，但只匹配那些字符串（即一个正则表达式，它将以任何顺序匹配 jack 和 james，但不匹配包含除 jack 和 james 之外的任何内容的字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:45:40.457

这取决于你所说的“除了杰克和詹姆斯之外的任何东西”的确切含义，但一般的想法是匹配一些数量的`\b(jack|james)\b`，被其他字符包围：

```
^\W*(\b(jack|james)\b\W*)*$ 
```

您可以指定匹配的确切数量或范围，而不是使用`*`. 例如，要准确匹配 2 或 3 个这样的词：

```
^\W*(\b(jack|james)\b\W*){2,3}$ 
```

# .net - 使用鼠标移动和击键来生成加密熵（如在 MEGA 上所见）

> ID：14430538
> 
> 赞同：3
> 
> 时间：2013-01-20T23:24:58.703
> 
> 标签：.net, encryption, random, entropy

我有兴趣从 .NET 中的鼠标移动和击键生成熵（出于加密目的，这可能是在通过应用程序本身的事件接收鼠标移动和击键数据的 Forms 应用程序中，也可能是在 Web 应用程序中鼠标移动和击键数据使用 JavaScript 记录并通过 Ajax 发送到服务器。

该技术目前正在新的 MEGA 站点上使用。

我自己做了一些研究，发现了一个看起来像 C++ 的好例子，但它有点超出了我的 C/C++ 知识。

[http://etutorials.org/Programming/secure+programming/Chapter+11.+Random+Numbers/11.21+Gathering+Entropy+from+Mouse+Events+on+Windows/](http://etutorials.org/Programming/secure+programming/Chapter+11.+Random+Numbers/11.21+Gathering+Entropy+from+Mouse+Events+on+Windows/)

```
 #include <windows.h>
    #include <wincrypt.h>
    #include <commctrl.h>

    #define SPC_ENTROPY_PER_SAMPLE  0.5
    #define SPC_MOUSE_DLGID         102
    #define SPC_PROGRESS_BARID      1000
    #define SPC_MOUSE_COLLECTID     1003
    #define SPC_MOUSE_STATIC        1002

    typedef struct {
      double     dEntropy;
      DWORD      cbRequested;
      POINT      ptLastPos;
      DWORD      dwLastTime;
      HCRYPTHASH hHash;
    } SPC_DIALOGDATA;

    typedef struct {
      POINT ptMousePos;
      DWORD dwTickCount;
    } SPC_MOUSEPOS;

    static BOOL CALLBACK MouseEntropyProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,
                                          LPARAM lParam) {
      SPC_MOUSEPOS    MousePos;
      SPC_DIALOGDATA  *pDlgData;

      switch (uMsg) {
        case WM_INITDIALOG:
          pDlgData = (SPC_DIALOGDATA *)lParam;
          SetWindowLong(hwndDlg, DWL_USER, lParam);
          SendDlgItemMessage(hwndDlg, SPC_PROGRESS_BARID, PBM_SETRANGE32, 0,
                             pDlgData->cbRequested);
          return TRUE;

        case WM_COMMAND:
          if (LOWORD(wParam) =  = IDOK && HIWORD(wParam) =  = BN_CLICKED) {
            EndDialog(hwndDlg, TRUE);
            return TRUE;
          }
          break;

        case WM_MOUSEMOVE:
          pDlgData = (SPC_DIALOGDATA *)GetWindowLong(hwndDlg, DWL_USER);
          if (pDlgData->dEntropy < pDlgData->cbRequested) {
            MousePos.ptMousePos.x = LOWORD(lParam);
            MousePos.ptMousePos.y = HIWORD(lParam);
            MousePos.dwTickCount  = GetTickCount(  );
            ClientToScreen(hwndDlg, &(MousePos.ptMousePos));
            CryptHashData(pDlgData->hHash, (BYTE *)&MousePos, sizeof(MousePos), 0);
            if ((MousePos.ptMousePos.x != pDlgData->ptLastPos.x ||
                 MousePos.ptMousePos.y != pDlgData->ptLastPos.y)  && 
                MousePos.dwTickCount - pDlgData->dwLastTime > 100) {
              pDlgData->ptLastPos = MousePos.ptMousePos;
              pDlgData->dwLastTime = MousePos.dwTickCount;
              pDlgData->dEntropy += SPC_ENTROPY_PER_SAMPLE;
              SendDlgItemMessage(hwndDlg, SPC_PROGRESS_BARID, PBM_SETPOS,
                                 (WPARAM)pDlgData->dEntropy, 0);
              if (pDlgData->dEntropy >= pDlgData->cbRequested) {
                EnableWindow(GetDlgItem(hwndDlg, IDOK), TRUE);
                SetFocus(GetDlgItem(hwndDlg, IDOK));
                MessageBeep(0xFFFFFFFF);
              }
            }
          }
          return TRUE;
      }

      return FALSE;
    }

    BOOL SpcGatherMouseEntropy(HINSTANCE hInstance, HWND hWndParent, 
                                  BYTE *pbOutput, DWORD cbOutput) {
      BOOL           bResult = FALSE;
      BYTE           *pbHashData = 0;
      DWORD          cbHashData, dwByteCount = sizeof(DWORD);
      HCRYPTHASH     hHash = 0;
      HCRYPTPROV     hProvider = 0;
      SPC_DIALOGDATA DialogData;

      if (!CryptAcquireContext(&hProvider, 0, MS_DEF_PROV, PROV_RSA_FULL,
                              CRYPT_VERIFYCONTEXT)) goto done;
      if (!CryptCreateHash(hProvider, CALG_SHA1, 0, 0, &hHash)) goto done;
      if (!CryptGetHashParam(hHash, HP_HASHSIZE, (BYTE *)&cbHashData, &dwByteCount,
                             0)) goto done;
      if (cbOutput > cbHashData) goto done;
      if (!(pbHashData = (BYTE *)LocalAlloc(LMEM_FIXED, cbHashData))) goto done;

      DialogData.dEntropy     = 0.0;
      DialogData.cbRequested = cbOutput * 8;
      DialogData.hHash        = hHash;
      DialogData.dwLastTime   = 0;
      GetCursorPos(&(DialogData.ptLastPos));

      bResult = DialogBoxParam(hInstance, MAKEINTRESOURCE(SPC_MOUSE_DLGID),
                               hWndParent, MouseEntropyProc, (LPARAM)&DialogData);

      if (bResult) {
        if (!CryptGetHashParam(hHash, HP_HASHVAL, pbHashData, &cbHashData, 0))
          bResult = FALSE;
        else
          CopyMemory(pbOutput, pbHashData, cbOutput);
      }

    done:
      if (pbHashData) LocalFree(pbHashData);
      if (hHash) CryptDestroyHash(hHash);
      if (hProvider) CryptReleaseContext(hProvider, 0);
      return bResult;
    }
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine,
                   int nShowCmd) {
  BYTE                 pbEntropy[20];
  INITCOMMONCONTROLSEX CommonControls;

  CommonControls.dwSize = sizeof(CommonControls);
  CommonControls.dwICC  = ICC_PROGRESS_CLASS;
  InitCommonControlsEx(&CommonControls);
  SpcGatherMouseEntropy(hInstance, 0, pbEntropy, sizeof(pbEntropy));
  return 0;
} 
```

如果有人可以阐明如何通过 .NET（C# 或 VB.Net 很好）来实现这一点，那将是最有帮助的。

提前致谢。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:00:09.413

您不必这样做，Microsoft 已经为您完成了。内置的 .NET 方法 RNGCryptoServiceProvider.GetBytes() 提供了从 Windows CryptGenRandom 派生的高质量真正随机字节。引用 RFC 4086：

> Windows CryptAPI 加密服务提供程序为每个用户存储一个种子状态变量。当调用 CryptGenRandom 时，它与调用中提供的任何随机性以及各种系统和用户数据（例如进程 ID、线程 ID、系统时钟、系统时间、系统计数器、内存状态、空闲磁盘集群和散列用户）相结合环境块。这些数据全部馈送到 SHA-1，输出用于播种 RC4 密钥流。该密钥流用于生成请求的伪随机数据并更新用户的种子状态变量。
> 
> Windows“.NET”的用户可能会发现使用 RNGCryptoServiceProvider.GetBytes 方法接口更容易。

无需重新发明轮子，它已经为您构建好了。

# php - PHP从数组创建两个无序列表

> ID：14430549
> 
> 赞同：0
> 
> 时间：2013-01-20T23:26:54.433
> 
> 标签：php, html-lists

我正在尝试从 PHP 数组创建两个无序列表，我发现[这个线程](https://stackoverflow.com/questions/8573717/php-count-items-in-array-split-total-by-two-create-two-ul-lists-with-equal-nu)几乎是我正在寻找的，但我希望第一个列表有 11 个项目，第二个列表有其余的。这是我的代码：

```
<?php if ($rows) : 

    $items = count($rows);
    $split = ceil($items/2);
    $firsthalf = array_slice($rows,$split);
    $secondhalf = array_slice($rows,0,$split);
?>

    <div class="tickets">

      <div class="col1">
        <ul>
          <?php foreach ($firsthalf as $item) : ?>
          <li><a href="">test 1</a></li>
          <?php endforeach; ?>
        </ul>
      </div>

      <div class="col2">
        <ul>
          <?php foreach ($secondhalf as $item) : ?>
          <li><a href="">test 2</a></li>
          <?php endforeach; ?>
        </ul>
      </div>

      <div class="clear"></div>
    </div>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:31:49.893

以下是如何将数组拆分为 11 个项目，然后[使用 array_slice()](http://php.net/manual/en/function.array-slice.php)将其余部分拆分为：

```
$firsthalf = array_slice($rows, 0, 11);
$secondhalf = array_slice($rows, 11); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:33:47.793

如果您查看[array_slice](http://php.net/manual/en/function.array-slice.php)文档，您可以看到您将拆分的大小指定为第三个参数，而第二个是偏移量：

```
<?php 
    if ($rows) : 
      $firsthalf = array_slice($rows, 0, 11); // returns 11 rows from the start
      $secondhalf = array_slice($rows, 11); // returns everything after the 11th row
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T23:34:49.717

```
// $items = count($rows);
// $split = ceil($items/2);
$firsthalf = array_slice($rows, 0, 11);
$secondhalf = array_slice($rows, 11); 
```

# kernel - QEMU 引导错误：“交换器使用了最大的堆栈深度”

> ID：14430551
> 
> 赞同：-1
> 
> 时间：2013-01-20T23:27:17.687
> 
> 标签：kernel, boot, qemu

我已经为 x86_64 编译了 3.7.3 内核，并在busybox的帮助下创建了一个根文件系统。

当我尝试使用 QEMU 启动系统时，如下所示：

```
$qemu-system-x86_64 -kernel bzImage -initrd rootfs.img.gz 
```

它给出了以下错误：

[![错误](../Images/6c1661e640187ecf475be0239f24bb99.png)](https://i.stack.imgur.com/yewwH.png)

我不确定是否应该提供更多详细信息，例如 rootfs 树或内核配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:06:17.877

使用 initrd ramdisk 时，必须编译下面的 linux 内核...

常规设置 –> 初始 RAM 文件系统和 RAM 磁盘支持

设备驱动程序 -> 块设备 -> RAM 块设备支持

# android - 通知服务在通知点击上加了额外的费用，如何？

> ID：14430552
> 
> 赞同：7
> 
> 时间：2013-01-20T23:27:18.910
> 
> 标签：android, android-intent, service, android-service, android-notifications

好吧，我有一个运行通知的服务，我想在用户单击通知时打开一个新的意图，所以当`MainActivity`打开时我可以得到额外的。我尝试了不同的方法，但我只是不知道如何让它工作。

这是我尝试过的：

这是我的服务

```
Intent intent = new Intent(MyService.this, MainActivity.class);
                    intent.putExtra("EXTRA", StringTEST);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                    PendingIntent contentIntent = PendingIntent
                        .getActivity(getApplicationContext(),
                                     0, intent, 0); 
```

这可以很好地打开活动，但我无法获得额外的？这就是我试图得到它的方式：

主要活动

```
@Override
public void onNewIntent(Intent intent){
    Bundle extras = intent.getExtras();
    if(extras != null){
        String name = extras.getString("EXTRA");
        System.out.println(name);
    }
}

@Override
protected void onResume() {
    Bundle extras = getIntent().getExtras();
    System.out.println(extras+"");
    if (extras != null) {
        try {
            onNewIntent(getIntent());
            Intent i = getIntent();
            String name = i.getStringExtra("EXTRA");
            System.out.println(name);
            currentDir = new File(name);

            changeFiles();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    super.onResume();
} 
```

这是我尝试过的两种方法，但我仍然为空......我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-21T09:43:12.467

我猜你的问题在这里：

```
PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(),
                           0, intent, 0); 
```

您正在传递`intent`并`getActivity()`期望您将获得`PendingIntent`与您的匹配`Intent`并包括您的附加功能。不幸的是，如果`PendingIntent`系统中已经有一个与您匹配的浮动对象`Intent`（**不**考虑您的`Intent`额外内容）`getActivity()`，那么它将返回给您`PendingIntent`。

要查看这是否是问题所在，请尝试以下操作：

```
PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(),
                           0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

这表示如果系统中已经有一个`PendingIntent`与您的某个位置匹配的，它应该用您的参数`Intent`中的那些替换额外的。`intent`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-14T01:10:03.603

我有同样的问题。你用过`getIntent().getExtras()`，但你应该用过`getIntent().getStringExtra(id)`。这里也提到了： [Android:intent.putExtra in a Service Class to get notifications](https://stackoverflow.com/questions/12820556/android-intent-putextra-in-a-service-class-to-get-notifications)

此外，正如您在评论中提到的那样，使用静态变量被认为不是一个好习惯，我建议您避免使用它。

# c++ - C++ 和可能的硬件故障

> ID：14430553
> 
> 赞同：2
> 
> 时间：2013-01-20T23:27:33.420
> 
> 标签：c++, visual-studio-2010, hardware

硬件故障（例如 RAM 损坏）能否在 C++ 程序中表现为非理性但一致的行为？

今天，我目睹了过去一年左右我一直在研究的一个程序的非常奇怪的行为。它是用 C++ 编写的，我使用的是 Visual Studio 2010。有两个莫名其妙的行为实例。

第一个涉及特定类的构造函数。在我进行了一些代码更改（在其他地方，而不是在构造函数中）并重建项目后，内存飙升至最大值并冻结了我的操作系统（类似于我一年前遇到的[问题](https://stackoverflow.com/questions/8489641/c-full-system-crash-release-mode-only)，这是由于优化，但这次优化被禁用） . 调试后，我意识到在构造函数中无法访问断点，这意味着没有生成任何代码。如果我在代码的其他地方的结构中添加了几个成员变量，构造函数又神奇地工作了。

第二个实例涉及方法 A 调用方法 B 并传递参数。调试时，传递的变量在传递给B之前是一个有效的字符串。一旦在B处，参数为空。系统重新启动使事情再次正常工作。

这让我觉得我的 RAM 可能有问题 - 重新启动后，程序可能会在内存的不同部分运行，因此不会遇到问题。我正在使用的机器过去确实遇到过几次蓝屏，但不是经常出现。运行 Windows 内存诊断工具并没有发现问题，但我仍然怀疑。

当您不知道为什么会发生时，很容易责怪环境，但我以前真的从未见过这样的事情。我只是想问一下，故障硬件影响这样的程序是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:59:16.223

如果您怀疑硬件，您应该尝试另一台计算机。也就是说，从我一直认为 RAM 故障是故障或编译问题的原因一直以来，都不是。最可能的原因是：

*   未定义的行为不仅适用于未初始化的变量，还适用于未在返回中完成的函数路径。你应该使用某种 Lint。
*   错误的编译脚本或 makefile。您认为您正在使用库版本 X，但实际上您正在链接到某个其他版本 Y，或者有时是相同版本但另一个不那么相等的文件，特别是使用不同的调试/测试/发布版本。
*   优化与未优化时库的不同行为。
*   线程。在每种可能的情况下检查您的写入/读取权限。如果可以，请使用一些强大且经过同行评审的稳定库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:32:34.633

不，您可以确定问题不是您的硬件。否则其他应用程序将有不正确的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:36:36.427

硬件故障往往会影响系统中的大多数事情，而不仅仅是一个应用程序。如果您怀疑您的机器有问题，请尝试运行内存测试 - 这也将测试 CPU 的行为（尽管它更不可能以仅影响某些软件的方式中断）。

我确实相信您的软件正在遭受“未定义的行为”而不是硬件故障......您要么在允许的区域之外编写，要么使用未初始化的变量，或者其他类似的东西。尽量简化你的代码，如果你能做到 15-50 行代码，请在此处发布。

# javascript - jQuery下拉导航突然消失了

> ID：14430558
> 
> 赞同：2
> 
> 时间：2013-01-20T23:27:58.007
> 
> 标签：javascript, jquery, drop-down-menu

经过4个月没有问题的工作，一个jQuery垂直下拉菜单突然消失了。我认为它与我链接到的 jQuery 版本的更新有关，这对于页面上的其他功能是必需的`http://code.jquery.com/jquery-latest.min.js`。该页面可以在[这里查看。](http://www.world-challenge-expeditions.com/morocco.html)

这是 HTML 的示例

```
<li><a href="#">Morocco</a>
<ul>
  <li><a href="?panel=0#morocco1">10 day Trek &amp; Camels </a></li>
  <li><a href="?panel=1#morocco2"> 14 day Trek &amp; Camels </a></li>
  <li><a href="?panel=2#morocco3">14 day Trek &amp; Service</a></li>
</ul> 
```

这是 jQuery/Javascript

```
<script type="text/javascript">
$(function () {
    $('#nav > li > ul')
        .hide()
        .click(function (e) {
        e.stopPropagation();
    });

    $('#nav > li').toggle(function () {
        $(this)
            .removeClass('waiting')
            .find('ul').slideDown();
    }, function () {
        $(this)
            .removeClass('waiting')
            .find('ul').slideUp();
    });

    $('#nav > li').hover(function () {
        $(this).addClass('waiting');
        setTimeout(function () {
            $('#nav .waiting')
                .click()
                .removeClass('waiting');
        }, 800);
    }, function () {
        $('#nav .waiting').removeClass('waiting');
    });
});
</script>

<script type="text/javascript">
$(document).ready(function () {
    $('#nav > li > a').eq(1).next().show();
});
</script> 
```

这是CSS：

```
}
#usexpeditionleftmenu {
width: 165px;
float: left;
background-color: #FFF;
margin-top: 15px;
padding-left: 12px;

    }
#nav {
float: left;
width: 155px;
border-top: 1px solid #999;
border-right: 1px solid #999;
border-left: 1px solid #999;

}
#nav li a {
display: block;
background: #d7d7d7;
border-top: 1px solid #d7d7d7;
border-bottom: 1px solid #afafaf;
text-decoration: none;
color: #EB5B00;
font-family: Arial, Helvetica, sans-serif;
font-size: 11px;
font-weight: bold;
padding-top: 1px;
padding-right: 2px;
padding-bottom: 2px;
padding-left: 5px;
}
ul#nav li ul li a {
font-family: Arial, Helvetica, sans-serif;
font-size: 10px;
color: #EB5B00;
}
#nav li a:hover, #nav li a.active {
color: #fff;
background-color: #8F8F8F;  
}
#nav li ul {
display: none; // used to hide sub-menus
}
#nav li ul li a {
background: #c1c1c1;
border-bottom: 1px dotted #ccc;
padding-top: 1px;
padding-right: 2px;
padding-bottom: 2px;
padding-left: 5px;

}

#nav, #nav ul, #nav li {list-style:none;} 
```

如果有人可以提供任何关于问题可能出在哪里以及如何解决问题的指示，我将非常感激。一直在扯我的头发！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:40:28.287

[`$.browser`](http://api.jquery.com/jQuery.browser/)您的 fancybox 插件使用了已从最新 jQuery 版本 ( [1.9](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/) ) 中删除的 deprecated 插件，这意味着您现在在该脚本中遇到了一个错误，它破坏了它的功能。

有2个解决方案：

*   降级回 jQuery 1.8.3，CDN 位于（使用其中任何一个）：

    ```
    http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js
    http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.3.min.js
    http://code.jquery.com/jquery-1.8.3.js 
    ```

*   使用 jQuery Migrate 插件来恢复旧的弃用行为。请参阅[此处](https://github.com/jquery/jquery-migrate/)的信息 - 有一个开发版本在使用弃用功能时输出控制台警告，还有另一个更适合生产的缩小版本。

* * *

附带说明一下，您不应该`http://code.jquery.com/jquery-latest.min.js`在生产环境中使用，因为您无法预见未来可能发生的变化。始终使用经过测试的稳定 jQuery 版本来维护您的网站。

# php - Javascript cookie 设置不工作

> ID：14430560
> 
> 赞同：0
> 
> 时间：2013-01-20T23:28:00.807
> 
> 标签：php, javascript, cookies

我有一个相当简单的代码，应该在点击时隐藏我的“cookie 策略”栏，但它似乎没有存储 cookie 来记住用户点击了“关闭”。我的功能：

```
function closeCookieBar() {
      document.getElementById('cookiespace').style.display = 'none';
          document.getElementById('cookiepolicy').style.display = 'none';
          var date = new Date();
          date.setTime(date.getTime()+(days*24*60*60*1000));
          var expires = "; expires="+date.toGMTString();
          document.cookie = cookiepolicy+"="+value+expires+"; path=/; domain=.mydomain.nl";

     } 
```

条形关闭得很好，所以前两行代码被执行。但是，如果我更新页面，该栏就会再次出现。这就是我有一个 cookie 栏：

```
<div id="cookiepolicy" <?php if(isset($_cookie['cookiepolicy'])){ echo "style=\"display:none\""; } ?>>
<div id="cookiepolicy-wrapper">
<div id="cookiepolicy-txt">
<span id="cookiepolicy-notice">Deze website maakt gebruik van cookies om de functionaliteit en het gebruiksgemak te vergroten. Als u onze website gebruikt, gaan wij er vanuit dat u hiermee akkoord gaat. </span>
<span id="cookiepolicy-accept-cookies" onclick="closeCookieBar();">Sluit</span>

</div>
</div>
</div> 
```

我把'。在我的域前面，希望这能解决我的跨域问题，但 cookie 甚至没有存储在主域中......

希望有人看到我的错误吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:49:34.447

这条线似乎不太正确-

```
document.cookie = cookiepolicy+"="+value+expires+"; path=/; domain=.mydomain.nl"; 
```

1.  它应该是这样的

    document.cookie = "cookiepolicy="+value+expires+"; path=/; domain=.mydomain.nl";

2.  是否设置了值变量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:29:48.823

尝试改变

```
<?php if(isset($_cookie['cookiepolicy'])){ echo "style=\"display:none\""; } ?> 
```

至：

```
<?php if(isset($_COOKIE['cookiepolicy'])){ echo "style=\"display:none\""; } ?> 
```

作为 Pointy 评论，您可能想要更改`document.cookie`并创建一个`value`变量，如下所示：

```
value =  document.getElementById('your_item').value;
document.cookie = "cookiepolicy="+value+"; "+expires+"; path=/; domain=.mydomain.nl"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:50:34.193

谢谢大家，但是您的两个建议似乎都没有解决我的问题。对于将来遇到类似问题的其他人来说，这段代码对我来说非常有效（即使在我的子域上）：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/; domain=.example.com";
}

createCookie('cookieee','stuff','22'); 
```

祝你好运！

# javascript - 焦点在另一个控件上，但按 Enter 会按下默认按钮

> ID：14430563
> 
> 赞同：0
> 
> 时间：2013-01-20T23:28:22.903
> 
> 标签：javascript, asp.net, html

当我按下回车键时，我想要一个当前具有焦点的超链接。

有人可以帮我处理javascript代码吗？

我确实在 javascript 中编写了一个代码，当焦点位于该按钮上时，它实际上会尝试单击该按钮 -

```
 if ((KeyCode == 13))
                {
                    evt.returnValue=false;
                    evt.cancel = true;

                    if((document.activeElement.name != 'btnChangeRep') && 
                        (document.activeElement.name != 'btnSubmitAndOpen') &&  
                        (document.activeElement.name != 'hypTaxID') && document.activeElement.name != 'hypCoTaxID') &&
                        (document.activeElement.name != 'hypFormerRegSearch'))
                {
                        btn = document.getElementById('btnSubmit');
                        if (btn == null)
                    {                       
                            document.getElementById('btnSave').click();                 
                    }
                        else
                    {                   
                            document.getElementById('btnSubmit').click();               
                    }
                }
                else 
                {
                    document.getElementById(document.activeElement.name).click();                   
                } 
```

它在 Firefox 中运行良好，但在 IE 中，链接无论如何都不会在按 Enter 时打开。

有人可以帮我解决我哪里出错了吗

**编辑**超链接的 HTML

```
<asp:hyperlink id="hypTaxID" runat="server"></asp:hyperlink> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:27:23.080

调用链接点击会触发链接的任何 javascript 点击事件，但并不总是会导致导航发生。

过去我不得不使用 javascript 来进行导航。你会想要类似下面的东西。（我也会使用 jquery 来简化它）

```
if ((KeyCode == 13))
{
   evt.returnValue=false;
   evt.cancel = true;

   if((document.activeElement.name != 'btnChangeRep') && 
     (document.activeElement.name != 'btnSubmitAndOpen') &&  
     (document.activeElement.name != 'hypTaxID') && 
      document.activeElement.name != 'hypCoTaxID') &&
     (document.activeElement.name != 'hypFormerRegSearch'))
  {
        btn = document.getElementById('btnSubmit');
        if (btn == null)
        {                       
            document.getElementById('btnSave').click();                 
        }
        else
        {                   
             document.getElementById('btnSubmit').click();               
        }
  }
  else 
  {  
      /*new code*/
      var link = document.getElementById(document.activeElement.name).getAttribute("href"); 
      document.location.href = link;
  }
} 
```

还要确保您的 ASP.net 元素的 ID 是您所期望的。网络表单因 ID 和名称篡改而臭名昭著。

我还将评估您为什么不使用 ASP.net 在服务器端处理此问题。使用 ASP.net 面板可让您为面板设置[默认按钮](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)，以便在按下 enter 按钮时单击该按钮。

# excel - 动态更改公式中的单元格引用？

> ID：14430568
> 
> 赞同：0
> 
> 时间：2013-01-20T23:29:07.947
> 
> 标签：excel, excel-formula

我会尽量简单地解释，因为真实的东西比我想要的要大一点。假设我有两张表，一张在产品旁边有每天的日期，另一张在价格旁边有特定日期：

```
Date     |   Product
--------------------
1/1/2013 |  Apple
--------------------
1/2/2013 |  Orange
--------------------
1/3/2013 |  Pineapple
--------------------
1/4/2013 |  Kiwi

ChangeDate | Price
-------------------
1/3/2013   | 1.99
--------------------
1/6/2013   | 0.95 
```

我需要做的是将价格列分配给第一个表，但它会根据 ChangeDate 列发生变化。因此，例如，第一个表的前两个条目的价格为 1.99，但在第三个条目之后，与第一个 changeDate 重合，价格变为 0.95，并且价格将保持不变，直到另一个条目重合与下一个更改日期。

我的问题是我不知道如何动态改变这种情况。我正在使用类似于 IF($F$1 < A1, G1, G2) 的东西，其中 F1 是 changeDate，A1 是第一个表的条目日期，G1 是 F1 旁边的价格，G2 是接下来的价格。我该怎么做，当 F1 大于 A# 时，下一次条件变为 F2？我需要使用 VBA 吗？（所有信息都已经在工作表上，不需要或使用用户输入）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:36:30.547

开始时不需要初始价格吗？我假设是这样，它是价格变化表中的第一个条目，输入日期为 2013 年 1 月 1 日。

然后，您将能够使用简单的 vlookup。如果您的产品在 A2:B5 中并且您的价格在 D1:E3 中（包括初始价格条目），那么产品表中第一个条目的公式将是：

```
 =VLOOKUP(A2,$D$1:$E$3,2) 
```

# c# - 将新项目添加到表时出现 InvalidCastException

> ID：14430574
> 
> 赞同：0
> 
> 时间：2013-01-20T23:29:30.773
> 
> 标签：c#, database, windows-phone-7, observablecollection

我正在尝试向表中添加一个新项目，但是下面的代码抛出了 InvalidCastException。

这是从添加项目页面将新项目添加到我的表中。WineDate 来自 DatePicker，WineStars 来自 ListPicker，Category 来自链接到表格的 listpicker

```
WineItem newWineItem = new WineItem
            {
                WineDate = wineDatepurchasedTextbox.Value.Value.Date,
                WineComments = wineCommentsTextBox.Text,
                WineStars = (string)StarList.SelectedItem,
                WineType = wineTypeTextbox.Text,
                WineVinyard = wineVineyardTextbox.Text,
                WineYear = wineYearTextbox.Text,
                Category = (WineCategory)winecategoriesListPicker.SelectedItem

            }; 
```

如果您需要任何进一步的信息来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:31:08.293

您只执行了两次转换：您正在转换`StarList.SelectedItem`为 a`string`并且您正在转换`winecategoriesListPicker.SelectedItem`为 a `WineCategory`。您应该附加调试器并查看这些值*实际上*是什么以确定您做错了什么。

（这假设没有任何属性设置器`WineItem`执行强制转换，但我首先要寻找明显的解决方案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:58:19.703

```
Category = (WineCategory)winecategoriesListPicker.SelectedItem 
```

如果`winecategoriesListPicker.SelectedItem`是继承 WineCategory 的类，则可以这样做，否则必须声明这样的类或创建接受以下类型的构造函数`winecategoriesListPicker.SelectedItem`：

```
Category = new WineCategory(winecategoriesListPicker.SelectedItem); 
```

# vb.net - ListBox.SelectedItem 与 ListBox.Items(SelectedIndex)

> ID：14430579
> 
> 赞同：0
> 
> 时间：2013-01-20T23:30:06.633
> 
> 标签：vb.net, winforms, listbox

`ListBox`当我进行更改并将它们提交到数据库时，我正在尝试更改项目的数据。但是，为 a 分配一个新值`ListBox.SelectedItem`似乎不起作用，但如果我使用`ListBox.Items(lstAlbums.SelectedIndex)`它，它似乎会改变我表单中的实际数据。

我也通过测试对象`GetHashCode`，他们似乎有它相同。`Boolean`如果我尝试比较它们也是如此。有谁知道为什么会这样？以下是我的代码的一部分：

```
Private Sub DataUpdatedCallback(ByVal updatedAlbum As Album)
    ' ( lstAlbums.Items(lstAlbums.SelectedIndex) Is _
    '                           lstAlbums.SelectedItem ) == TRUE
    ' for some reason using lstAlbums.SelectedItem doesn't change the object data
    lstAlbums.Items(lstAlbums.SelectedIndex) = updatedAlbum
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:44:57.373

请改用[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)。您的基础对象通常具有可用于此目的的关键字段。确保您已相应地设置了[ValueMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:39:59.973

传递给的引用`.SelectedItem`必须是列表中的现有项目之一，您不能使用该属性来修改`.Item`. 您当前的代码

`lstAlbums.Items(lstAlbums.SelectedIndex) = updatedAlbum`

是正确的。

# ajax - 将 URL 从 HTML / JSP / ERB / etc 传递给 Angular JS

> ID：14430582
> 
> 赞同：0
> 
> 时间：2013-01-20T23:30:34.907
> 
> 标签：ajax, url, angularjs

尝试将 AngularJS 连接到 Spring MVC 应用程序（这部分基本上无关紧要）并想知道将 URL 传递给 JS 控制器的*Angular 方式是什么。*

我看到很多示例（几乎所有示例）都将 URL/路径硬编码到 JS 文件中，作为一名长期的 MVC 开发人员，这让我很困扰

```
function MyController($scope, $http) {
    $scope.doSomething = function() {
        $http.get('/someUrl').success(successCallback);
    }
} 
```

我知道我可以在我的 JSP 中设置一个 JS 变量，但这感觉不是正确的前进方向。

那么*Angular*`<spring:url>`将 URL 从或 Rails 之类的东西传递`url_for(:action => 'some_action')`到 Angular 控制器的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T09:28:16.453

我为此使用了可以作为依赖项注入的常量，例如：

```
angular.module('myModule', [])
      .constant('urls', {
          'saveUrl': '<c:url value="/save"/>',
          'cancelUrl': '<c:url value="/cancel"/>'
      })
      .controller('someController', function($scope, urls) {
            $scope.saveUrl = urls.saveUrl;
        }); 
```

但是，如果我也想填充一些模型，它会变得有点困难。不知道如何处理这种情况，尽管现在我已经为每个服务创建了一个配置部分，它将通过在 spring 模型上循环来添加内容。但这可能会更好地通过让 Angular 执行提交到页面并通过 json 调用获取所有数据来完成。然而，这意味着调用页面应该已经能够做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:00:35.783

好的，我采用了这种方法，尽管我仍然非常渴望听取其他人的意见

```
<form name="myForm" ng-submit="submit('<spring:url value="/someUrl" />', myModel)" novalidate> 
```

...这在控制器中

```
$scope.submit = function(url, model) { // ... 
```

# azure - 为西方世界服务的最佳 Azure 数据中心

> ID：14430588
> 
> 赞同：7
> 
> 时间：2013-01-20T23:31:11.087
> 
> 标签：azure

为西欧、北美和日本提供服务的最佳 Microsoft Azure 数据中心是什么？

Stack Overflow 警告我，我的问题似乎是主观的，所以让我把它具体化。哪个数据中心将拥有这些地区人口加权的最佳平均 ping 时间？似乎 Azure 防火墙不会让 ping 通过，但我猜 HTTP 连接时间是一个不错的代理。

（从长远来看，我们可能会在多个数据中心托管我们的网站，但这需要额外的托管成本和额外的工作，所以现在我们不希望这样做。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T22:57:47.153

我想在@Leon Cullen 的答案中添加一些硬数字，因此我在三个 Azure 数据中心建立了一个可公开访问的 blob，并使用[Nimsoft](http://www.nimsoft.com/solutions/nimsoft-monitor.html)从许多不同的位置对其进行监控。这些数字是我通过浏览日志获得的 HTTP 连接时间的粗略平均值。

美国西部数据中心

*   西欧 170-180ms
*   北美 <80ms

美国东部数据中心

*   西欧 90-110ms
*   北美 <80ms

西欧数据中心

*   西欧 <30ms
*   北美 100-150

由此我得出结论：

*   @Leon Cullen 的回答是正确的。
*   西欧有快速互连。
*   美国东部数据中心非常适合将西方国家保持在 100 毫秒以下。
*   大西洋一跳大约需要 100 毫秒。（相比之下，从澳大利亚到美国的一跳大约需要 200 毫秒 :-( 但我们已经习惯了。整个亚洲的成本都差不多。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T23:40:50.250

如果你想为所有这些提供服务，你需要在所有这些位置都有一个数据中心。我会说使用这些：

*   西欧：`West Europe`位置（阿姆斯特丹，荷兰）
*   北美：要么`US West`（加利福尼亚，硅谷所在的地方）要么`US East`（弗吉尼亚，大多数美国人生活在东海岸）
*   日本：（`East Asia`香港）

如果您将软件放在西欧的服务器上（反之亦然），那么您的网站在日本就不会很快。

但是，如果您决定只选择 1 个地点，我会说选择`West Europe`，因为欧罗巴西部的人口约为 4.2 亿，美国东部的人口约为 1.2 亿，而日本的人口数量大致相同（但它相当远离东亚数据中心）。

您只需要记住，您的网站/服务对世界其他地方来说将非常缓慢。所以你服务于 3 个不同大陆的想法是行不通的。

# ios - 应用内购买可以用来“购买答案”吗？

> ID：14430592
> 
> 赞同：1
> 
> 时间：2013-01-20T23:31:56.873
> 
> 标签：ios, app-store, in-app-purchase

我正在开发一个应用程序，允许人们在 IOS 应用程序中提出某种问题，在后端有人（人类）回答这个问题。显然答案有一些延迟（10 分钟 - 1 小时）。我可以为此使用应用内购买模型（消耗品）吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:10:23.687

我强烈建议将购买步骤与提出问题脱钩，因为正如您所提到的，付款和回答不会同步进行。所以看起来我们在这里的事务处理有问题。至少有两种方法可以解决这个问题。

1.  让人们购买可用于购买答案的**代币。**这样，您的应用内购买将有两个单独的*干净交易*：在您从`SKPaymentQueue`. 然后，当应用程序下载答案时，令牌计数器将递减。

2.  另一个想法是在从服务器接收到**答案后只显示一半的答案**，然后使用应用内购买机制取消隐藏其余部分。这可能对用户更具吸引力，因为他们了解您的答案的质量。

当然，组合也是可能的，人们使用之前购买的代币来显示每个答案的其余部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T00:09:04.793

这与所有允许您购买应用内代币和相关物品的游戏没有什么不同。

将答案视为可消耗的应用内购买。也许可以通过应用程序给用户一个免费答案，然后让用户通过应用内购买购买更多答案。不要让用户提交问题，除非他们有能力得到答案。您可能需要在您的服务器上跟踪他们的信用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T00:09:18.527

您可以在[此处](https://developer.apple.com/news/pdf/in_app_purchase.pdf)查看 Apple 的应用内购买指南。

Apple 不允许通过应用内购买销售有形产品。Apple 允许应用内购买的内容有四类。他们是：

*   内容
*   功能性
*   服务
*   订阅

我相信您的情况应该属于“服务”类别。因为您的应用程序通常会提供问答系统，而您只是因为他们已经支付了费用而对他们的请求进行了优先排序，所以这在 IAP 指南中应该是可以接受的。

确定 Apple 是否接受您的 IAP 系统的最简单方法就是尝试提交应用程序以供审核。如果 Apple 拒绝您的应用程序，他们会告诉您原因，并允许您在再次提交之前进行必要的更改。试一试并没有什么坏处。

# command-line - QuickTime 使用 FFMPEG 对可读电影进行编码

> ID：14430593
> 
> 赞同：46
> 
> 时间：2013-01-20T23:31:57.980
> 
> 标签：command-line, ffmpeg

我正在尝试使用以下命令对图像序列进行编码：

```
ffmpeg.exe -i %d.png -f mp4 -vcodec h264 test.mp4 
```

但是，QuickTime 无法打开此文件或有时播放黑色电影，而此电影在 VLC 播放器中播放效果很好。有什么建议可以让它在 QuickTime 中发挥出色吗？

这是输出：

```
ffmpeg.exe -i %d.png -f mp4 -vcodec libx264 13.mp4
ffmpeg version N-49044-g89afa63 Copyright (c) 2000-2013 the FFmpeg developers
  built on Jan 19 2013 20:36:06 with gcc 4.7.2 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-av
isynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enab
le-libass --enable-libbluray --enable-libcaca --enable-libfreetype --enable-libg
sm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --e
nable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --e
nable-libspeex --enable-libtheora --enable-libtwolame --enable-libvo-aacenc --en
able-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable
-libxavs --enable-libxvid --enable-zlib --enable-filter=frei0r
  libavutil      52\. 15.100 / 52\. 15.100
  libavcodec     54\. 89.100 / 54\. 89.100
  libavformat    54\. 61.101 / 54\. 61.101
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 32.101 /  3\. 32.101
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[image2 @ 0221b940] max_analyze_duration 5000000 reached at 5000000 microseconds

Input #0, image2, from '%d.png':
  Duration: 00:01:19.36, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: png, rgb24, 639x480, 25 fps, 25 tbr, 25 tbn, 25 tbc
[libx264 @ 0221edc0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE
4.2 AVX
[libx264 @ 0221edc0] profile High 4:4:4 Predictive, level 3.0, 4:4:4 8-bit
[libx264 @ 0221edc0] 264 - core 129 r2230 1cffe9f - H.264/MPEG-4 AVC codec - Cop
yleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deb
lock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 m
e_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chro
ma_qp_offset=4 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 in
terlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b
_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecu
t=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0
 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to '13.mp4':
  Metadata:
    encoder         : Lavf54.61.101
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv444p, 639x480, q=-1--1
, 12800 tbn, 25 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (png -> libx264)
Press [q] to stop, [?] for help
frame=   76 fps=0.0 q=28.0 size=       3kB time=00:00:00.96 bitrate=  22.3kbits/
frame=  156 fps=155 q=28.0 size=       7kB time=00:00:04.16 bitrate=  14.7kbits/
frame=  219 fps=145 q=28.0 size=      12kB time=00:00:06.68 bitrate=  14.1kbits/
frame=  283 fps=141 q=28.0 size=      16kB time=00:00:09.24 bitrate=  14.2kbits/
frame=  352 fps=140 q=28.0 size=      25kB time=00:00:12.00 bitrate=  17.4kbits/ 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-21T11:10:18.980

尝试更改像素格式：`-pix_fmt yuv420p`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-28T23:28:09.580

我还在使用一系列 png 文件作为输入制作视频。我发现 Quicktime Player 7 可以以任何帧速率播放我的 mp4 文件。如果速率“-r”值低于 9，Quicktime Player 10 将显示一个带有一些块状的绿色窗口。通过指定如下值，我仍然可以得到低于播放速率的输入速率：

```
ffmpeg -r inputRate -i %d.png -qscale 1 -r 9 output.mp4 
```

注意：我使用的是 ffmpeg 0.5。

# multithreading - 在多个 R 会话中加载相同的图像

> ID：14430597
> 
> 赞同：0
> 
> 时间：2013-01-20T23:32:16.760
> 
> 标签：multithreading, r, hadoop, parallel-processing, hpc

我有一组要处理的公司。每个公司都需要一段时间来处理，所以我想并行化它。我有两个问题：

1.  我可以在 R 的多个实例中加载相同的 R 工作区图像（例如包含公司返回）并将结果吐出到 csv 文件（附加），从而以这种方式显式并行化事情吗？
2.  必须有更好的方法来做到这一点。我环顾了 HPC 任务视图，我认为像 MPI 这样的东西对于这个任务来说有点太复杂了？有什么建议么？

这是我在想的事情。这大大简化了，但非常清楚地传达了这一点：

```
require(data.table)
dtb = data.table(data.frame(a=1:100, id=1:2), key="id")
save(dataf, file="mydata.RData")

#now launch a session that accepts the id argument
args = commandArgs(trailingOnly = TRUE)
theid = as.integer(args[1])
load("mydata.RData")
r = dtb[id == theid,sum(a)]
write.csv(r, "myfile.csv", append=TRUE) 
```

这显然会工作得非常快，但我每个公司都在运行很多滚动回归，所以它有点慢，但每个过程都是独立的。请注意，我想在不同节点启动会话的 LSF 网格上运行它。目前我只是提交了几个带参数的作业。我想要一个更好的方法。

# facebook-like - facebook喜欢按钮不会显示评论框

> ID：14430598
> 
> 赞同：1
> 
> 时间：2013-01-20T23:32:19.880
> 
> 标签：facebook-like

我创建了一个包含 facebook 'like' 按钮的网站（请参阅[http://www.rupertheath.com](http://www.rupertheath.com)），它们可以正常工作，除非当您单击它们时，不会出现评论框。当我第一次安装按钮时，确实出现了注释框，但我花了一些时间来设置按钮的样式（用于定位）并且似乎已经停止了该功能的工作。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:02:10.283

问题是，您`overflow: hidden`在父容器上设置：

```
<div class="socialmediabuttons">
    ....
</div> 
```

删除该样式，评论框应该会重新出现。请注意，您需要更改其他样式，因为它会破坏社交媒体按钮周围的细线（但这是可行的）。

**编辑**

尝试以下方式：

```
.socialmediabuttons {
    border-bottom: 1px solid #CCCCCC;
    border-top: 1px solid #CCCCCC;
+   height: 26px;
    margin-bottom: 25px !important;
    margin-left: 20px;
-   overflow: hidden;
    padding: 5px 0 3px;
} 
```

# html - 为什么按钮的 div 不能“居中”？

> ID：14430599
> 
> 赞同：0
> 
> 时间：2013-01-20T23:32:22.530
> 
> 标签：html, center, centering

我的目标是让我的#header div 居中。它包含导航到不同页面的按钮。我尝试使用`<div align=center>`标签，但它不起作用。我只是希望它像我页面上的其他所有内容一样位于中心。

这是我的代码：

```
<style>
 #header ul {
margin: 0px;
padding: 0px;
list-style-type: none;
}
 #header ul li {
position:relative;
float:left;

}
 #header ul li ul li a {
font-size: 12px;
}
 #header ul li a {
display: block;
height: 35px;
width: 90px;
color: #666;
text-decoration: none;
font-family: Verdana, Geneva, sans-serif;
line-height: 35px;
text-align: center;
}
   #header ul li ul {
position: absolute;
top: 31px;
visibility: hidden;
}
    #header ul li a:hover {
color: #333;
font-weight: bold;
}
    #header ul li:hover ul {
visibility: visible;
}
#header {
width:100%;
margin: 0px auto 0px auto;
text-align:left;

}

 body {
padding-left:40px;
padding-right:40px;
text-align: center;
}
 </style>
 </head>

<body  bgcolor="#E6F7F4">
 <center>
   <p><img src="othlogo.gif"/><br />
   </p>
 <div id="header" align="right" >
  <ul>
<li><a href"blog.html">Blog</a>
   </li>
  </ul>
  <ul>
<li><a href"blog.html">More</a>
<ul>
<li><a href="more.html">Education</a></li>
<li><a href="more.html">Domestic</a></li>
    </ul>
   </li>
  </ul>
  <ul>
<li><a href"blog.html">Option3</a>
<ul>
<li><a href="more.html">Psychology</a></li>
<li><a href="more.html">Map</a></li>

    </ul>
   </li>
  </ul>
  <ul>
<li><a href"blog.html">About</a>
   </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:57:09.427

只要设置了宽度，您就可以使用它`margin: auto`来居中。`#header`

# java - URL 连接 HTTP POST 连接被拒绝

> ID：14430600
> 
> 赞同：0
> 
> 时间：2013-01-20T23:32:25.297
> 
> 标签：java, http, url, connection

我正在使用 Java 7 开发 Java 桌面应用程序。对于我的应用程序，我想通过 POST 将数据发送到服务器（使用 HTTP）。该服务器正在本地主机上的本地计算机上运行。但是，如果我尝试连接到服务器，则会返回连接重置 (SocketTimeoutException)。我无法连接，我也尝试连接到[http://www.google.de](http://www.google.de)之类的网页，但它也失败了。var 正文包含正确格式的 POST 数据。（我也尝试连接禁用的防火墙）我的代码：

```
body=body.substring(0,body.length()-2);
HttpURLConnection connection = null;
try {
    if (revision){ //Connect to the revision server
        this.urlRevision = new URL(this.settingsRevision.getAddress());
        connection = (HttpURLConnection) urlRevision.openConnection();
        connection.setRequestMethod("POST");
        connection.setConnectTimeout(10000);
        connection.setReadTimeout(10000);
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(true);
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        connection.setRequestProperty("Content-Length", String.valueOf(body.length()));
        connection.connect();
        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());
        writer.write(body);
        writer.flush();

        this.returnedData = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        for(String line; (line = returnedData.readLine()) != null;){
            System.out.println(line);
        }
        writer.close();
        this.returnedData.close();
    }
} catch (Exception e) {
        this.exception=e;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:43:42.273

您应该尝试像这样关闭连接：

```
} finally {
    if(connection != null) {
      connection.disconnect(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T14:37:02.157

我已经将它添加到评论中：

```
System.setProperty("java.net.preferIPv4Stack" , "true"); 
```

原因：Java 在我的计算机上使用 IPv6 功能，但 IPv4 用于 Internet 连接（在我的计算机上并由我的提供商 (T-Online)）。

# python - 从字符串中的单引号中去除双引号

> ID：14430606
> 
> 赞同：2
> 
> 时间：2013-01-20T23:33:24.440
> 
> 标签：python, quote

```
['00', '11"', 'aa', 'bb', "cc'"] 
```

这是在 Python 中。我想去掉双引号，这样我的输出就变成了

```
['00', '11', 'aa', 'bb', 'cc'] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T23:36:25.447

看起来您必须在`str.strip()`这里使用该功能两次。首先删除`"`，然后 `'`。

```
In [1]: lis=['00', '11"', 'aa', 'bb', "cc'"] 

In [2]: [x.strip('"').strip("'") for x in lis]
Out[2]: ['00', '11', 'aa', 'bb', 'cc'] 
```

或者正如@DSM 所建议的，我们不需要 2 次`strip()`调用：

```
In [14]: [x.strip("'" '"') for x in lis]
Out[14]: ['00', '11', 'aa', 'bb', 'cc'] 
```

因为，相邻的字符串文字会自动组合：

```
In [15]: "'" '"'
Out[15]: '\'"'

In [16]: "a"'b'"c"'d'
Out[16]: 'abcd' 
```

另一种选择可以是`regex`：

```
In [6]: [re.search(r'\w+',x).group() for x in lis]
Out[6]: ['00', '11', 'aa', 'bb', 'cc'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:45:51.827

Python 2.6 和更新的 Python 2.x 版本：

```
line = ['00', '11"', 'aa', 'bb', "cc'"] 
line = [x.translate(None,'\'\"') for x in line] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:47:36.963

您应该使用正则表达式。看看这个网站了解更多信息。

[http://www.regular-expressions.info/python.html](http://www.regular-expressions.info/python.html)

正则表达式是查找和替换的代码版本。您正在寻找的是使用诸如 r'[\'\"]' 之类的正则表达式并将其替换为空字符串。虽然 Python 不是我最大的优势，但这应该可以推动您朝着正确的方向前进。

# postgresql - 时间段的数据类型

> ID：14430607
> 
> 赞同：0
> 
> 时间：2013-01-20T23:33:31.583
> 
> 标签：postgresql, postgresql-9.1

我想在表格列中插入时间段。例如：我有一个有 7 列的表，每列是一周中的一天。是否有可能创建一个数据类型作为员工工作时间的时间段？假设从凌晨 1 点到 8 点。或 24 小时制。

如果没有，我应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:54:03.683

如果您正在构建一个包含营业时间之类的表格，则最好使用更少的列。

```
create table business_hours (
  day_of_week char(3) not null unique
    check (day_of_week in ('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun')),
  start_time time not null,
  end_time time not null 
    check (end_time > start_time)
);

insert into business_hours values
('Mon', '09:00', '17:00'),
('Tue', '09:00', '17:00'),
('Wed', '09:00', '17:00'),
('Thu', '09:00', '17:00'),
('Fri', '09:00', '17:00'),
('Sat', '11:00', '15:00'); 
```

您可以将该表与日历表连接起来（或使用 generate_series() 动态创建日历表）以生成本周的营业时间。

```
select c.cal_date, bh.*
from calendar c
inner join business_hours bh on bh.day_of_week = c.day_of_week
where cal_date between '2013-01-20' and '2013-01-27'
order by cal_date 
```

将这些数据排列成矩阵是一个表示级别的问题。使用应用程序代码来做到这一点。

可用于此类查询的最简单的日历表只有两列。（我的使用英文。根据需要调整缩写，但它们必须与“business_hours”表中的缩写匹配。）

```
CREATE TABLE calendar
(
  cal_date date NOT NULL,
  day_of_week character(3) NOT NULL,
  CONSTRAINT cal_pkey PRIMARY KEY (cal_date),
  CONSTRAINT cal_dow_values CHECK (day_of_week = 
CASE
    WHEN date_part('dow', cal_date) = 0 THEN 'Sun'
    WHEN date_part('dow', cal_date) = 1 THEN 'Mon'
    WHEN date_part('dow', cal_date) = 2 THEN 'Tue'
    WHEN date_part('dow', cal_date) = 3 THEN 'Wed'
    WHEN date_part('dow', cal_date) = 4 THEN 'Thu'
    WHEN date_part('dow', cal_date) = 5 THEN 'Fri'
    WHEN date_part('dow', cal_date) = 6 THEN 'Sat'
    ELSE NULL
END)
);

CREATE INDEX ON calendar (day_of_week); 
```

有很多不同的方法可以填充日历表——电子表格、PostgreSQL 函数、生成 CSV 文件的脚本语言等。

# php - 通过自动 PHP 脚本通过电子邮件存储用户名和密码

> ID：14430610
> 
> 赞同：0
> 
> 时间：2013-01-20T23:34:01.507
> 
> 标签：php, mysql, html, smtp

我在一个 Excel 表格和一个 MySQL 数据库中有 200 多个用户名、密码和电子邮件。我想创建一个 PHP 自动化脚本，将用户名和密码附加到一条普通文本中，并将其发送到同一行中的电子邮件地址。这可以通过 PHP 实现吗？我对此很陌生，希望有人能指出我正确的方向。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:38:27.887

您从数据库中检索数据，然后使用 PHP 的`mail`函数发送电子邮件。

来自 PHP 手册：

> 使用 mail() 发送一封简单的电子邮件：
> 
> ```
> <?php
> // The message
> $message = "Line 1\r\nLine 2\r\nLine 3";
> 
> // In case any of our lines are larger than 70 characters, we should use wordwrap()
> $message = wordwrap($message, 70, "\r\n");
> 
> // Send
> mail('caffeinated@example.com', 'My Subject', $message);
> ?> 
> ```

# magento - Magento 产品图片移至右侧

> ID：14430615
> 
> 赞同：0
> 
> 时间：2013-01-20T23:34:43.530
> 
> 标签：magento

有人可以帮我弄清楚为什么我的产品的图像文件突然向右移动并破坏了布局。我浏览了许多文件，但我无法弄清楚发生了什么。很困惑

[http://www.shadecontrol.com/index.php/view-by-shape/quick-order-classic/jmc0908as48.html](http://www.shadecontrol.com/index.php/view-by-shape/quick-order-classic/jmc0908as48.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:49:32.717

您当前的 html/css 是

```
<div class="product-shop">...</div>
<div class="product-img-box">...</div>

 .col1-layout .product-view .product-shop {
    float: left;
    width: 360px;
 }

 .product-view .product-img-box {
    float: left;
    width: 256px;
 } 
```

因为两个 div 都向左浮动，所以您将在产品图片之前看到产品详细信息。

您可以将 css 更改为

```
 .col1-layout .product-view .product-shop {
    float: right;
    width: 360px;
 } 
```

或更改 /app/design/frontend/default/[theme]/template/catalog/product/view.phtml 中 div 的顺序

```
<div class="product-img-box">...</div>
<div class="product-shop">...</div> 
```

# jsf-2 - 当我多次单击（选择）行时，JSF Datatable 数据消失了

> ID：14430618
> 
> 赞同：0
> 
> 时间：2013-01-20T23:35:00.910
> 
> 标签：jsf-2, primefaces

我的jsf代码是这样的

```
<p:dataTable var="item"  rowKey="#{item.brId}" value="#{bidsWinAction.resultsModel}" emptyMessage="#{msgs.comm_no_record}"  selectionMode="single"  id="data" > 
```

它绑定到 @ViewScoped bean：

```
public class BidsWinAction implements Serializable {
     public void onRowSelect(SelectEvent event) {
          this.selectedItems = (BidsResult)event.getObject();
      } 
```

当您单击表格中的蚂蚁行时，我可以工作，它可以在 onRowSelect 方法中获取正确的选定数据。

但是当我多次单击表中的不同行时，所有数据都变为空，包括数据表。我想 ViewScoped bean 是否可能已过期。为什么会导致这个问题？

# jsf - 抽象类和具体类中的依赖注入

> ID：14430623
> 
> 赞同：4
> 
> 时间：2013-01-20T23:36:08.953
> 
> 标签：jsf, dependency-injection, abstract-class, managed-bean

我正在使用 JSF 并且在一段时间内遇到了问题，我在很多地方进行了搜索，但找不到任何合适的答案。

我可以让依赖注入在抽象类（或更一般地说是层次结构中更高的类）类中工作吗？另外，在使用继承时我们应该如何处理注释？我读过，通常的做法是不注释抽象类，只注释具体的类，但是，这意味着没有对该抽象类的注入？

我的问题是一个（检查最后一条评论）：

## 抽象类

```
@ManagedBean
@ViewScoped
public abstract class AbstractController<T extends VersionedObject> implements Serializable {
    @ManagedProperty("#{libraryVersionController}")
    private LibraryVersionController libraryVersionController;

public List<T> loadFromDatasource(IVersionedServiceBase<T> service) {
        log.info("Loading generic VO from data source");

        VersionedObjectFilter filter = new VersionedObjectFilter();
        filter.setSelectedLibVersion(libraryVersionController.getSelectedItem());
        // etc
    }
    // getters, setters...
} 
```

## 具体类

```
@ManagedBean
@ViewScoped
public class DomainController extends AbstractController<Domain> implements Serializable {
private List<Domain> allItems;
   private Domain[] selectedItem;

   @ManagedProperty(value = "#{domainService}")
   private DomainService domainService;

   @PostConstruct
   public void loadFromDatasource() {
    allItems = super.loadFromDatasource(domainService);
        // !! DOES NOT WORK, null pointer exception on abstract class (libraryVersionController)
   // etc
} 
```

Getter 和 setter 设置正确，正如我在 .xhml 中看到的那样，它是我引用的具体类 (#{domainController.allItems})，只有一个 @PostConstruct。我正在使用 JSF2.1 和 Mojarra。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:21:09.010

至于您的 NullPointerException，我的猜测是 AbstractController.setLibraryVersionController 丢失了。据我了解，在构造 AbstractController 时（假设它具有隐式构造函数，即使它是抽象的），需要该方法来填充适当的值。

我知道你说所有的 getter 和 setter 都在那里，但是这个似乎很棘手，所以你可能错过了。如果向该方法添加日志记录，则可以检查 JSF 是否正在尝试填充该值，并检查该值是否为空。

关于依赖注入如何与继承层次结构一起工作的一般问题，我猜你的方法是可以的，并且依赖项是为基类注入的，然后是为派生类注入的，沿着链。

# mysql - MySQL中的“使用table1，table1作为vtable”是什么意思？

> ID：14430630
> 
> 赞同：3
> 
> 时间：2013-01-20T23:36:36.657
> 
> 标签：mysql, sql, join, syntax

我是 MySQL 新手，我很难弄清楚这意味着什么：

```
DELETE from keywords USING keywords, keywords as vtable 
WHERE (keywords.id > vtable.id) && (keywords.keyword=vtable.keyword) 
```

具体来说，这部分`USING keywords, keywords as vtable`是什么意思？

有没有更好的方法来编写这个等效的查询？我读过创建虚拟表效率不高。

另外，`.`表和列是分开的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:44:49.247

`vtable`是关键字表的别名，因此可以自联接。与任何别名没有什么不同，但特定别名的选择`vtable`可能会让您相信其中涉及一些特殊的虚拟表机制。没有。

从效率的角度来看，这看起来像是自联接的正常使用。如果 id 和可能的关键字字段上有索引，它应该是相当有效的。

此外 dot`.`确实将表和列名（或表别名和列名）分开。

这是具有不同别名的相同查询：

`DELETE from keywords
USING keywords, keywords as k2
WHERE (keywords.id > k2.id) && (keywords.keyword=k2.keyword)`

下面是整个查询的完成方式略有不同，但可能不那么令人困惑，使用 JOIN：

`DELETE keywords
FROM keywords
INNER JOIN keywords as k2 ON keywords.keyword = k2.keyword
WHERE keywords.id > k2.id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:02:09.493

这是一种非常棒的查询方法，因为每当您陷入某种情况时，您想通过比较同一张表的记录中的自身来在表中进行操作。

USING 关键字可以使用出现在两​​个表中的列的列表，相当于说 C.ID = O.ID AND S.ID = O.ID。

```
 mysql>
            mysql> CREATE TABLE Employee(
                ->     id            int,
                ->     first_name    VARCHAR(15),
                ->     last_name     VARCHAR(15),
                ->     start_date    DATE,
                ->     end_date      DATE,
                ->     salary        FLOAT(8,2),
                ->     city          VARCHAR(10),
                ->     description   VARCHAR(15)
                -> );
            Query OK, 0 rows affected (0.01 sec)

            mysql>
            mysql> create table job (
                ->   id         int,
                ->   title      VARCHAR(20)
                -> );
            Query OK, 0 rows affected (0.01 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->              values (1,'Jason',    'Martin',  '19960725',  '20060725', 1234.56, 'Toronto',  'Programmer');
            Query OK, 1 row affected (0.02 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(2,'Alison',   'Mathews',  '19760321', '19860221', 6661.78, 'Vancouver','Tester');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(3,'James',    'Smith',    '19781212', '19900315', 6544.78, 'Vancouver','Tester');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(4,'Celia',    'Rice',     '19821024', '19990421', 2344.78, 'Vancouver','Manager');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(5,'Robert',   'Black',    '19840115', '19980808', 2334.78, 'Vancouver','Tester');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(6,'Linda',    'Green',    '19870730', '19960104', 4322.78,'New York',  'Tester');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(7,'David',    'Larry',    '19901231', '19980212', 7897.78,'New York',  'Manager');
            Query OK, 1 row affected (0.02 sec)

            mysql>
            mysql> insert into Employee(id,first_name, last_name, start_date, end_Date,   salary,  City,       Description)
                ->               values(8,'James',    'Cat',     '19960917',  '20020415', 1232.78,'Vancouver', 'Tester');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> insert into job (id, title) values (1,'Tester');
            Query OK, 1 row affected (0.01 sec)

            mysql> insert into job (id, title) values (2,'Accountant');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (3,'Developer');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (4,'Coder');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (5,'Director');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (6,'Mediator');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (7,'Proffessor');
            Query OK, 1 row affected (0.00 sec)

            mysql> insert into job (id, title) values (8,'Programmer');
            Query OK, 1 row affected (0.01 sec)

            mysql> insert into job (id, title) values (9,'Developer');
            Query OK, 1 row affected (0.00 sec)

            mysql>
            mysql> select * from job;
            +------+------------+
            | id   | title      |
            +------+------------+
            |    1 | Tester     |
            |    2 | Accountant |
            |    3 | Developer  |
            |    4 | Coder      |
            |    5 | Director   |
            |    6 | Mediator   |
            |    7 | Proffessor |
            |    8 | Programmer |
            |    9 | Developer  |
            +------+------------+
            9 rows in set (0.00 sec)

            mysql> select * from Employee;
            +------+------------+-----------+------------+------------+---------+-----------+-------------+
            | id   | first_name | last_name | start_date | end_date   | salary  | city      | description |
            +------+------------+-----------+------------+------------+---------+-----------+-------------+
            |    1 | Jason      | Martin    | 1996-07-25 | 2006-07-25 | 1234.56 | Toronto   | Programmer  |
            |    2 | Alison     | Mathews   | 1976-03-21 | 1986-02-21 | 6661.78 | Vancouver | Tester      |
            |    3 | James      | Smith     | 1978-12-12 | 1990-03-15 | 6544.78 | Vancouver | Tester      |
            |    4 | Celia      | Rice      | 1982-10-24 | 1999-04-21 | 2344.78 | Vancouver | Manager     |
            |    5 | Robert     | Black     | 1984-01-15 | 1998-08-08 | 2334.78 | Vancouver | Tester      |
            |    6 | Linda      | Green     | 1987-07-30 | 1996-01-04 | 4322.78 | New York  | Tester      |
            |    7 | David      | Larry     | 1990-12-31 | 1998-02-12 | 7897.78 | New York  | Manager     |
            |    8 | James      | Cat       | 1996-09-17 | 2002-04-15 | 1232.78 | Vancouver | Tester      |
            +------+------------+-----------+------------+------------+---------+-----------+-------------+
            8 rows in set (0.00 sec)

            mysql>
            mysql>
            mysql>
            The syntax looks like the following:
            mysql>
            mysql> SELECT C.First_Name, C.Last_Name, O.title
                -> FROM Employee AS C
                -> LEFT JOIN job as O USING (ID);
            +------------+-----------+------------+
            | First_Name | Last_Name | title      |
            +------------+-----------+------------+
            | Jason      | Martin    | Tester     |
            | Alison     | Mathews   | Accountant |
            | James      | Smith     | Developer  |
            | Celia      | Rice      | Coder      |
            | Robert     | Black     | Director   |
            | Linda      | Green     | Mediator   |
            | David      | Larry     | Proffessor |
            | James      | Cat       | Programmer |
            +------------+-----------+------------+
            8 rows in set (0.00 sec)

            mysql>
            mysql>
            mysql>
            mysql> drop table job;
            Query OK, 0 rows affected (0.00 sec)

            mysql> drop table Employee;
            Query OK, 0 rows affected (0.01 sec)

            mysql>
            mysql>
            In this example, the USING keyword would be like using the ON keyword with C.ID = O.ID following it.
            This is another shortcut to save time.
            mysql> 
```

# javascript - How to convert text to binary code in JavaScript?

> ID：14430633
> 
> 赞同：63
> 
> 时间：2013-01-20T23:36:50.370
> 
> 标签：javascript, string, binary

# Text to Binary Code

**I want JavaScript to translate text in a textarea into binary code.**

For example, if a user types in "`TEST`" into the textarea, the value "`01010100 01000101 01010011 01010100`" should be returned.

I would like to avoid using a switch statement to assign each character a binary code value (e.g. `case "T": return "01010100`) or any other similar technique.

Here's a [JSFiddle](http://jsfiddle.net/fA24Y/) to show what I mean. Is this possible in native JavaScript?

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-20T23:51:42.573

What you should do is convert every char using `charCodeAt` function to get the Ascii Code in decimal. Then you can convert it to Binary value using `toString(2)`:

HTML:

```
<input id="ti1" value ="TEST"/>
<input id="ti2"/>
<button onClick="convert();">Convert!</button> 
```

JS:

```
function convert() {
  var output = document.getElementById("ti2");
  var input = document.getElementById("ti1").value;
  output.value = "";
  for (var i = 0; i < input.length; i++) {
      output.value += input[i].charCodeAt(0).toString(2) + " ";
  }
} 
```

And here's a fiddle: [http://jsfiddle.net/fA24Y/1/](http://jsfiddle.net/fA24Y/1/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-12-03T17:12:00.893

This might be the simplest you can get:

```
function text2Binary(string) {
    return string.split('').map(function (char) {
        return char.charCodeAt(0).toString(2);
    }).join(' ');
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-26T06:24:58.093

1.  traverse the string
2.  convert every character to their char code
3.  convert the char code to binary
4.  push it into an array and add the left 0s
5.  return a string separated by space

Code:

```
function textToBin(text) {
  var length = text.length,
      output = [];
  for (var i = 0;i < length; i++) {
    var bin = text[i].charCodeAt().toString(2);
    output.push(Array(8-bin.length+1).join("0") + bin);
  } 
  return output.join(" ");
}
textToBin("!a") => "00100001 01100001" 
```

Another way

```
function textToBin(text) {
  return (
    Array
      .from(text)
      .reduce((acc, char) => acc.concat(char.charCodeAt().toString(2)), [])
      .map(bin => '0'.repeat(8 - bin.length) + bin )
      .join(' ')
  );
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-11T23:35:13.017

Here's a pretty generic, native implementation, that [I wrote some time ago](https://gist.github.com/eyecatchup/6742657),

```
// ABC - a generic, native JS (A)scii(B)inary(C)onverter.
// (c) 2013 Stephan Schmitz <eyecatchup@gmail.com>
// License: MIT, http://eyecatchup.mit-license.org
// URL: https://gist.github.com/eyecatchup/6742657
var ABC = {
  toAscii: function(bin) {
    return bin.replace(/\s*[01]{8}\s*/g, function(bin) {
      return String.fromCharCode(parseInt(bin, 2))
    })
  },
  toBinary: function(str, spaceSeparatedOctets) {
    return str.replace(/[\s\S]/g, function(str) {
      str = ABC.zeroPad(str.charCodeAt().toString(2));
      return !1 == spaceSeparatedOctets ? str : str + " "
    })
  },
  zeroPad: function(num) {
    return "00000000".slice(String(num).length) + num
  }
}; 
```

and to be used as follows:

```
var binary1      = "01100110011001010110010101101100011010010110111001100111001000000110110001110101011000110110101101111001",
    binary2      = "01100110 01100101 01100101 01101100 01101001 01101110 01100111 00100000 01101100 01110101 01100011 01101011 01111001",
    binary1Ascii = ABC.toAscii(binary1),
    binary2Ascii = ABC.toAscii(binary2);

console.log("Binary 1:                   " + binary1);
console.log("Binary 1 to ASCII:          " + binary1Ascii);
console.log("Binary 2:                   " + binary2);
console.log("Binary 2 to ASCII:          " + binary2Ascii);
console.log("Ascii to Binary:            " + ABC.toBinary(binary1Ascii));     // default: space-separated octets
console.log("Ascii to Binary /wo spaces: " + ABC.toBinary(binary1Ascii, 0));  // 2nd parameter false to not space-separate octets 
```

Source is on Github (gist): [https://gist.github.com/eyecatchup/6742657](https://gist.github.com/eyecatchup/6742657)

Hope it helps. Feel free to use for whatever you want *(well, at least for whatever MIT permits)*.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-20T23:46:16.773

```
var PADDING = "00000000"

var string = "TEST"
var resultArray = []

for (var i = 0; i < string.length; i++) {
  var compact = string.charCodeAt(i).toString(2)
  var padded  = compact.substring(0, PADDING.length - compact.length) + compact

  resultArray.push(padded)
}

console.log(resultArray.join(" ")) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-01-18T06:39:03.780

The other answers will work for most cases. But it's worth noting that `charCodeAt()` and related don't work with UTF-8 strings (that is, they throw errors if there are any characters outside the standard ASCII range). Here's a workaround.

```
// UTF-8 to binary
var utf8ToBin = function( s ){
    s = unescape( encodeURIComponent( s ) );
    var chr, i = 0, l = s.length, out = '';
    for( ; i < l; i ++ ){
        chr = s.charCodeAt( i ).toString( 2 );
        while( chr.length % 8 != 0 ){ chr = '0' + chr; }
        out += chr;
    }
    return out;
};

// Binary to UTF-8
var binToUtf8 = function( s ){
    var i = 0, l = s.length, chr, out = '';
    for( ; i < l; i += 8 ){
        chr = parseInt( s.substr( i, 8 ), 2 ).toString( 16 );
        out += '%' + ( ( chr.length % 2 == 0 ) ? chr : '0' + chr );
    }
    return decodeURIComponent( out );
}; 
```

The `escape/unescape()` functions are deprecated. If you need polyfills for them, you can check out the more comprehensive UTF-8 encoding example found here: [http://jsfiddle.net/47zwb41o](http://jsfiddle.net/47zwb41o)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-07-13T22:34:41.413

8-bit characters with leading 0

```
'sometext'
        .split('')
        .map((char) => '00'.concat(char.charCodeAt(0).toString(2)).slice(-8))
        .join(' '); 
```

If you need 6 or 7 bit, just change `.slice(-8)`

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-01-29T22:12:50.067

Thank you **Majid Laissi** for your [answer](https://stackoverflow.com/a/14430733/3936149)

I made 2 functions out from your code:

the goal was to implement convertation of string to VARBINARY, BINARY and back

```
const stringToBinary = function(string, maxBytes) {
  //for BINARY maxBytes = 255
  //for VARBINARY maxBytes = 65535
  let binaryOutput = '';
  if (string.length > maxBytes) {
    string = string.substring(0, maxBytes);
  }

  for (var i = 0; i < string.length; i++) {
    binaryOutput += string[i].charCodeAt(0).toString(2) + ' ';
  }

  return binaryOutput;
}; 
```

and backward convertation:

```
const binaryToString = function(binary) {
  const arrayOfBytes = binary.split(' ');

  let stringOutput = '';

  for (let i = 0; i < arrayOfBytes.length; i++) {
    stringOutput += String.fromCharCode(parseInt(arrayOfBytes[i], 2));
  }

  return stringOutput;
}; 
```

and here is a working example: [https://jsbin.com/futalidenu/edit?js,console](https://jsbin.com/futalidenu/edit?js,console)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-01-20T23:42:11.950

Just a hint into the right direction

```
var foo = "TEST",
    res = [ ];

foo.split('').forEach(function( letter ) {
    var bin     = letter.charCodeAt( 0 ).toString( 2 ),
        padding = 8 - bin.length;

    res.push( new Array( padding+1 ).join( '0' ) + bin );
});

console.log( res ); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-04-15T18:50:46.277

this seems to be the simplified version

```
Array.from('abc').map((each)=>each.charCodeAt(0).toString(2)).join(" ") 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-01-10T00:33:47.137

Provided you're working in node or a browser with `BigInt` support, this version cuts costs by saving the expensive string construction for the very end:

```
const zero = 0n
const shift = 8n

function asciiToBinary (str) {
  const len = str.length
  let n = zero
  for (let i = 0; i < len; i++) {
    n = (n << shift) + BigInt(str.charCodeAt(i))
  }
  return n.toString(2).padStart(len * 8, 0)
} 
```

It's about twice as fast as the other solutions mentioned here including this simple es6+ implementation:

```
const toBinary = s => [...s]
  .map(x => x
    .codePointAt()
    .toString(2)
    .padStart(8,0)
  )
  .join('') 
```

If you need to handle unicode characters, here's this guy:

```
const zero = 0n
const shift = 8n
const bigShift = 16n
const byte = 255n

function unicodeToBinary (str) {
  const len = str.length
  let n = zero
  for (let i = 0; i < len; i++) {
    const bits = BigInt(str.codePointAt(i))
    n = (n << (bits > byte ? bigShift : shift)) + bits
  }
  const bin = n.toString(2)
  return bin.padStart(8 * Math.ceil(bin.length / 8), 0)
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-04-14T14:26:02.170

This is as short as you can get. It's based on the top-rated answer but transformed to a reduce function.

```
"TEST".split("").reduce(function (a, b) { return a + b.charCodeAt(0).toString(2)}, "") 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-01-03T21:46:04.437

```
const textToBinary = (string) => {
    return string.split('').map((char) => 
      char.charCodeAt().toString(2)).join(' ');
}

console.log(textToBinary('hello world'))
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-28T07:48:05.850

```
var UTF8ToBin=function(f){for(var a,c=0,d=(f=unescape(encodeURIComponent(f))).length,b="";c<d;c++){for(a=f.charCodeAt(c).toString(2);a.length%8!=0;){a="0"+a}b+=a}return b},binToUTF8=function(f){for(var a,c=0,d=f.length,b="";c<d;c+=8){b+="%"+((a=parseInt(f.substr(c,8),2).toString(16)).length%2==0?a:"0"+a)}return decodeURIComponent(b)}; 
```

This is a small minified JavaScript Code to convert UTF8 to Binary and Vice versa.

# jquery - 窗口位置替换仅在页面刷新时有效

> ID：14430634
> 
> 赞同：0
> 
> 时间：2013-01-20T23:36:56.530
> 
> 标签：jquery, hash

我正在寻找以下问题的任何创造性（和简单）解决方案 -

这个东西只适用于onload，而不适用于onclick：

```
<!--[if lt IE 9]> 
   <script type="text/javascript">
   if (window.location.hash == '#aciw') {
       window.location.replace("#checkout-counter-aciw");
   }
   </script>
<![endif]--> 
```

因此，如果用户访问 www.site.com，并单击将#aciw 插入浏览器的链接，则不会发生任何事情。另一方面，如果他在浏览器中使用 www.site.com/#aciw 刷新，哈希将更改为 www.site.com/#checkout-counter-aciw，一切正常。

当然，我不希望它只在加载时工作，我希望它在点击时特别有效，因为我有几个链接需要将 IE8 发送到完全不同的位置。

我一直在玩添加这个：

```
window.location.hash = "#" + checkout-counter-aciw; 
```

和这个：

```
window.location.reload(true); 
```

但到目前为止，它只是暂时将他们带到#checkout-counter-aciw，然后它会重新回到网站顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:39:26.817

听`hashchange`事件。当它改变时它会告诉你。

```
$(window).on("hashchange", function() {
    var hash = window.location.hash.substr(1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:59:22.627

我最终这样做了，它有效：

```
<!--[if lt IE 9]> 
<script type="text/javascript">

if (window.location.hash == '#aciw') {
    window.location.replace("http://www.site.com/#checkout-counter-aciw");
}

$(document).ready(function(){
        $('a.aciw').click(function(){  
           window.location.replace("http://www.site.com/#checkout-counter-aciw");
        });
});

</script>
<![endif]--> 
```

对于我自己的个人笔记：因此，如果初始请求的页面已经包含 #aciw 哈希，则第一部分（“if”）有效，如果他们首先到达 www.site.com（没有#aciw 哈希）然后单击 .aciw 链接。

# python - 是否可以使用 numpy 使用 get_lock() 锁定 ctypes 数组的列或行？

> ID：14430635
> 
> 赞同：0
> 
> 时间：2013-01-20T23:36:57.837
> 
> 标签：python, numpy, multiprocessing, ctypes

是否可以使用 get_lock() 锁定 ctypes 数组的列或行？

就像是：

```
lock = mp.Lock()
cArray = mp.Array(ctypes.c_int, 100*4, lock = lock)
numpyArray = np.frombuffer(cArray.get_obj())
numpyArray.shape = (100,4)

#In a function later called via multiprocessing.Process - for example
numpyArray[:,0].get_lock() #Also could be numpyArray.T[0].get_lock() 
```

我知道可以锁定整个 ctypes 数组，但它只是其中的一部分。我知道数组的大小，它将保持不变，因此我可以计算 ctypes 数组中的偏移量，但想知道 - 可以利用多处理锁的 numpy 切片的易用性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:59:12.970

如果你有`lock`你可以锁定任何代码块：

```
with lock:
    numpyArray[:,0] = 1
    a += 2 
```

Numpy 数组没有关联的多处理锁。为拿到它，为实现它; 您可以调用`cArray.get_lock()`或仅作为变量传递`lock`。

# python - 我可以将实例方法添加到 Python“模拟”对象吗？

> ID：14430636
> 
> 赞同：6
> 
> 时间：2013-01-20T23:37:07.310
> 
> 标签：python, python-mock

我想创建一个`mock.Mock()`对象，然后添加一个称为`session`实例方法的方法，该方法传递一个`self`对模拟对象的引用，允许该方法向模拟对象添加状态。这是否可能（无需手动使用`types.MethodType`，例如使用 mock 的内置 API），还是我应该找到解决方法？

请注意，我发现[了这个问题](https://stackoverflow.com/questions/4008681/how-to-mock-an-instance-method-of-an-already-mocked-object)，它是针对 Ruby 的，并且似乎涵盖了类似的内容，如果不是同一件事的话。不幸的是，我一点也不了解 Ruby。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:03:41.313

如果您想增强`mock.Mock`类的功能，只需子类化`Mock`并添加您自己的方法。

```
class MyMock(Mock):
    def session(self):
        # Save session data here? 
```

模拟[文档](http://www.voidspace.org.uk/python/mock/examples.html#mock-subclasses-and-their-attributes)解释说，当要创建一个新模拟时，它将与父级相同。这意味着该`session`函数也将在模拟期间创建的任何其他模拟上可用。

这不包括您需要将`session`函数动态附加到现有模拟对象的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-08T02:58:51.143

```
mock_answer = Mock()

def session():
    mock_answer.b = 1

mock_answer.session = session
mock_answer.session()
print(mock_answer.b)  # 1 
```

`self`你其实不需要。

# google-maps-api-3 - Gmaps 自定义叠加层

> ID：14430639
> 
> 赞同：1
> 
> 时间：2013-01-20T23:37:30.793
> 
> 标签：google-maps-api-3, overlay

我怎么能记得在旧版本的 Gmaps API 中是否有可能制作自定义叠加层以在其上添加标记，而不是从主地图中添加或删除。也可以制作不同的结果组并仅在一个命令中显示/隐藏它。在新参考中我找不到它，他们是否已重命名它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:44:26.340

您说的是 GLayer - [https://developers.google.com/maps/documentation/javascript/v2/reference#GLayer](https://developers.google.com/maps/documentation/javascript/v2/reference#GLayer)

事实上，它已从 v3 API 中删除。

在 API v3 中，由开发人员负责跟踪他们的叠加层并根据需要从地图中添加/删除它们。

最好的方法是把你的叠加层保存在一个数组（或一个对象）中并循环遍历它们。

例如，如果您有两组不同的叠加层（infoWindows 和标记），您可以执行以下操作：

```
var overlays = {
    markers : [],
    infoWindows : []
};

    //create a marker and put it in markers
    var marker = new google.maps.Marker();
    overlays.markers.push(marker);

    //create an infoWindow and put it in infoWindows
    var infoWindow = new google.maps.InfoWindow();
    overlays.infoWindows.push(infoWindow);

    //remove all infoWindows from the map
    for(var i=0;i<overlays.infoWindows.length;i++) {
      overlays.infoWindows[i].setMap(null);
    }

    //remove all markers from the map
    for(var i=0;i<overlays.markers.length;i++) {
      overlays.markers[i].setMap(null);
    } 
```

这是一个简单的示例，但希望您明白：在 v3 中添加、管理和删除叠加层的“组”由开发人员决定。

# ruby-on-rails - 如何在 Ruby on Rails 中使用 Devise 验证密码强度？

> ID：14430648
> 
> 赞同：15
> 
> 时间：2013-01-20T23:40:08.280
> 
> 标签：ruby-on-rails, devise, passwords

我想强制用户在注册时选择强密码。

我知道，那里有很多 jquery 密码强度计，我很可能也会使用其中一个。但这并不能真正强制任何人选择强密码。注册表单也必须在不启用 js 的情况下可用，因此仍然可能使用弱密码进行注册。

帐户必须是最安全的，因为如果您已登录，您可以看到其他帐户的数据，我不想在任何情况下暴露这些数据。所以我想在这里寻求最大的安全性，因此我认为，只允许强密码是最重要的。

所以，

**如何设置和自定义验证最低密码强度的要求？我只能在设计配置文件中找到密码长度。我应该使用另一个宝石来完成这项任务吗？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T00:49:06.120

您可以使用[Devise Security 扩展](https://github.com/phatworx/devise_security_extension)，您可以在其中定义密码正则表达式验证（除其他外）并强制执行您想要的密码强度。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-20T14:44:43.937

我最近发布了一个设计 gem，它使用 zxcvbn 库来拒绝弱密码：

[https://github.com/bitzesty/devise_zxcvbn](https://github.com/bitzesty/devise_zxcvbn)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-15T20:16:00.887

在撰写本文时（2018 年），我建议其他人在使用之前推荐的[Devise Security 扩展gem 之前考虑更新的](https://github.com/phatworx/devise_security_extension "设计安全扩展")[Devise Security](https://github.com/devise-security/devise-security "设计安全性")分支（截至 2016 年 3 月 v0.10.0 已过时，但*仍然是*OG AF mang！）

 *编辑：[这个](https://github.com/q-centrix/devise_security_extension "alt 设计安全性")看起来更新，但 idk。*

# c++ - 如何将我的类模板传递给函数？(C++)

> ID：14430651
> 
> 赞同：2
> 
> 时间：2013-01-20T23:40:43.143
> 
> 标签：c++, class, templates

我有一个“堆栈”类模板，我只需在其中选择堆栈中项目的类型及其大小。

这是我的主要内容：
编辑：
1\. 在 addItems/removeItems 中，有堆栈变量，而不是 intStack
2\. 更正 -> 为 . （我没有看就复制了它，我忘了更改这些运算符）
[http://pastebin.com/89M56ET6](http://pastebin.com/89M56ET6)
..和我的堆栈头： http:
[//pastebin.com/xKfQVD88](http://pastebin.com/xKfQVD88)

我想做的是在 main 中使用两个“while”循环，并将它们的内容放入 main 之外的单独函数中。我想制作（实际上，它们已经准备好了）名为“addItems”和“removeItems”的函数。
问题是，我的“添加/删除项目”函数实际上什么都不做（我的意思是，我的主要对象仍然是空的？）。当这些“while”循环正在做他们必须做的事情时，一切都很好（项目推入堆栈，然后正确弹出）。当我在 main 中使用我的“addItems”和“removeItems”而不是循环时，只添加作品（从函数返回后，一切都消失了）。
我试图动态地将我的 Stack 对象作为指针，但我遇到了类似的错误

> 对 void addItems(Stack -int-) 的未定义引用

或者

> 没有匹配的函数调用 addItems(Stack -int- *&)

问题是，我如何将我的 Stack 对象传递给这些函数？
还是我的堆栈标题中的错误？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:43:26.697

问题是您的函数`Stack<Type>`按值取值，这意味着它们有自己的副本。所以 main 中的对象不会被修改。：

```
template <class Type>
void addItems(Stack<Type> stack); 
```

您需要通过引用传递：

```
template <class Type>
void addItems(Stack<Type>& stack); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:48:23.613

> 无效添加项（堆栈堆栈）；

您正在按值传递堆栈，这意味着函数 addItems 接收堆栈对象的副本。通过引用传递它。

此外，您的 Stack 对象没有正确的复制构造函数，因此如果您尝试复制它，也会遇到一些内存问题。

# javascript - Angular 指令中的递归

> ID：14430655
> 
> 赞同：179
> 
> 时间：2013-01-20T23:40:51.620
> 
> 标签：javascript, recursion, angularjs

有几个流行的递归角度指令问答，它们都归结为以下解决方案之一：

*   根据运行时范围状态手动增量“编译”HTML
    *   [示例 1](http://jsfiddle.net/galloc/KNM4q/1/) [[堆栈溢出](https://stackoverflow.com/questions/11854514/is-it-possible-to-make-a-tree-view-with-angular)]
    *   [示例 2](http://jsfiddle.net/IgorMinar/CHVbb/423/) [[角度 jsfiddles 页面](https://github.com/angular/angular.js/wiki/JsFiddle-Examples)]
*   根本不使用指令，而是使用引用自身的 <script> 模板
    *   [示例 1](http://jsfiddle.net/ganarajpr/vzvmS/3/) [[谷歌群组](https://groups.google.com/forum/#!topic/angular/I5Z5oglW6Xw)]

**第一个**问题是除非您全面管理手动编译过程，否则您无法删除以前编译的代码。**第二种方法**的问题是......不是指令并且错过了其强大的功能，但更紧迫的是，它不能像指令一样被参数化；它只是绑定到一个新的控制器实例。

我一直在手动执行`angular.bootstrap`或`@compile()`在链接功能中玩，但这给我留下了手动跟踪要删除和添加的元素的问题。

有没有一种好方法来管理添加/删除元素以反映运行时状态的参数化递归模式？也就是说，具有添加/删除节点按钮和一些输入字段的树，其值向下传递到节点的子节点。也许是第二种方法与链式作用域的结合（但我不知道该怎么做）？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2013-09-04T09:04:06.287

受@dnc253 提到的线程中描述的解决方案的启发，我将递归功能抽象[为一个服务](https://github.com/marklagendijk/angular-recursion)。

```
module.factory('RecursionHelper', ['$compile', function($compile){
    return {
        /**
         * Manually compiles the element, fixing the recursion loop.
         * @param element
         * @param [link] A post-link function, or an object with function(s) registered via pre and post properties.
         * @returns An object containing the linking functions.
         */
        compile: function(element, link){
            // Normalize the link parameter
            if(angular.isFunction(link)){
                link = { post: link };
            }

            // Break the recursion loop by removing the contents
            var contents = element.contents().remove();
            var compiledContents;
            return {
                pre: (link && link.pre) ? link.pre : null,
                /**
                 * Compiles and re-adds the contents
                 */
                post: function(scope, element){
                    // Compile the contents
                    if(!compiledContents){
                        compiledContents = $compile(contents);
                    }
                    // Re-add the compiled contents to the element
                    compiledContents(scope, function(clone){
                        element.append(clone);
                    });

                    // Call the post-linking function, if any
                    if(link && link.post){
                        link.post.apply(null, arguments);
                    }
                }
            };
        }
    };
}]); 
```

使用如下：

```
module.directive("tree", ["RecursionHelper", function(RecursionHelper) {
    return {
        restrict: "E",
        scope: {family: '='},
        template: 
            '<p>{{ family.name }}</p>'+
            '<ul>' + 
                '<li ng-repeat="child in family.children">' + 
                    '<tree family="child"></tree>' +
                '</li>' +
            '</ul>',
        compile: function(element) {
            // Use the compile function from the RecursionHelper,
            // And return the linking function(s) which it returns
            return RecursionHelper.compile(element);
        }
    };
}]); 
```

请参阅此[Plunker](http://plnkr.co/edit/JAIyolmqPqO9KsynSiZp?p=preview)进行演示。我最喜欢这个解决方案，因为：

1.  您不需要使您的 html 不那么干净的特殊指令。
2.  递归逻辑被抽象到 RecursionHelper 服务中，因此您可以保持指令干净。

更新：从 Angular 1.5.x 开始，不再需要任何技巧，但仅适用于*template*，不适用于*templateUrl*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-22T14:01:21.073

手动添加元素并编译它们绝对是一种完美的方法。如果您使用 ng-repeat 那么您将不必手动删除元素。

演示：http: [//jsfiddle.net/KNM4q/113/](http://jsfiddle.net/KNM4q/113/)

```
.directive('tree', function ($compile) {
return {
    restrict: 'E',
    terminal: true,
    scope: { val: '=', parentData:'=' },
    link: function (scope, element, attrs) {
        var template = '<span>{{val.text}}</span>';
        template += '<button ng-click="deleteMe()" ng-show="val.text">delete</button>';

        if (angular.isArray(scope.val.items)) {
            template += '<ul class="indent"><li ng-repeat="item in val.items"><tree val="item" parent-data="val.items"></tree></li></ul>';
        }
        scope.deleteMe = function(index) {
            if(scope.parentData) {
                var itemIndex = scope.parentData.indexOf(scope.val);
                scope.parentData.splice(itemIndex,1);
            }
            scope.val = {};
        };
        var newElement = angular.element(template);
        $compile(newElement)(scope);
        element.replaceWith(newElement);
    }
}
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-02T00:30:54.523

我不确定是否在您链接的示例之一或相同的基本概念中找到了此解决方案，但我需要一个递归指令，并且我找到[了一个很棒、简单的解决方案](https://groups.google.com/forum/#!topic/angular/vswXTes_FtM)。

```
module.directive("recursive", function($compile) {
    return {
        restrict: "EACM",
        priority: 100000,
        compile: function(tElement, tAttr) {
            var contents = tElement.contents().remove();
            var compiledContents;
            return function(scope, iElement, iAttr) {
                if(!compiledContents) {
                    compiledContents = $compile(contents);
                }
                iElement.append(
                    compiledContents(scope, 
                                     function(clone) {
                                         return clone; }));
            };
        }
    };
});

module.directive("tree", function() {
    return {
        scope: {tree: '='},
        template: '<p>{{ tree.text }}</p><ul><li ng-repeat="child in tree.children"><recursive><span tree="child"></span></recursive></li></ul>',
        compile: function() {
            return  function() {
            }
        }
    };
});​ 
```

您应该创建`recursive`指令，然后将其包裹在进行递归调用的元素周围。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-28T09:34:41.243

从 Angular 1.5.x 开始，不再需要任何技巧，以下已成为可能。不再需要肮脏的工作！

这个发现是我为递归指令寻找更好/更清洁的解决方案的副产品。你可以在这里找到它[https://jsfiddle.net/cattails27/5j5au76c/](https://jsfiddle.net/cattails27/5j5au76c/)。它支持的版本是 1.3.x。

```
angular.element(document).ready(function() {
  angular.module('mainApp', [])
    .controller('mainCtrl', mainCtrl)
    .directive('recurv', recurveDirective);

  angular.bootstrap(document, ['mainApp']);

  function recurveDirective() {
    return {
      template: '<ul><li ng-repeat="t in tree">{{t.sub}}<recurv tree="t.children"></recurv></li></ul>',
      scope: {
        tree: '='
      },
    }
  }

});

  function mainCtrl() {
    this.tree = [{
      title: '1',
      sub: 'coffee',
      children: [{
        title: '2.1',
        sub: 'mocha'
      }, {
        title: '2.2',
        sub: 'latte',
        children: [{
          title: '2.2.1',
          sub: 'iced latte'
        }]
      }, {
        title: '2.3',
        sub: 'expresso'
      }, ]
    }, {
      title: '2',
      sub: 'milk'
    }, {
      title: '3',
      sub: 'tea',
      children: [{
        title: '3.1',
        sub: 'green tea',
        children: [{
          title: '3.1.1',
          sub: 'green coffee',
          children: [{
            title: '3.1.1.1',
            sub: 'green milk',
            children: [{
              title: '3.1.1.1.1',
              sub: 'black tea'
            }]
          }]
        }]
      }]
    }];
  }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
<div>
  <div ng-controller="mainCtrl as vm">
    <recurv tree="vm.tree"></recurv>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-19T21:35:12.553

在使用了几种解决方法一段时间后，我反复回到这个问题。

我对服务解决方案不满意，因为它适用于可以注入服务的指令，但不适用于匿名模板片段。

类似地，通过在指令中进行 DOM 操作来依赖特定模板结构的解决方案过于具体和脆弱。

我有一个我相信的通用解决方案，它将递归封装为它自己的指令，它对任何其他指令的干扰最小并且可以匿名使用。

下面是一个演示，您也可以在 plnkr 上玩：http: [//plnkr.co/edit/MSiwnDFD81HAOXWvQWIM](http://plnkr.co/edit/MSiwnDFD81HAOXWvQWIM)

```
var hCollapseDirective = function () {
  return {
    link: function (scope, elem, attrs, ctrl) {
      scope.collapsed = false;
      scope.$watch('collapse', function (collapsed) {
        elem.toggleClass('collapse', !!collapsed);
      });
    },
    scope: {},
    templateUrl: 'collapse.html',
    transclude: true
  }
}

var hRecursiveDirective = function ($compile) {
  return {
    link: function (scope, elem, attrs, ctrl) {
      ctrl.transclude(scope, function (content) {
        elem.after(content);
      });
    },
    controller: function ($element, $transclude) {
      var parent = $element.parent().controller('hRecursive');
      this.transclude = angular.isObject(parent)
        ? parent.transclude
        : $transclude;
    },
    priority: 500,  // ngInclude < hRecursive < ngIf < ngRepeat < ngSwitch
    require: 'hRecursive',
    terminal: true,
    transclude: 'element',
    $$tlb: true  // Hack: allow multiple transclusion (ngRepeat and ngIf)
  }
}

angular.module('h', [])
.directive('hCollapse', hCollapseDirective)
.directive('hRecursive', hRecursiveDirective)
```

```
/* Demo CSS */
* { box-sizing: border-box }

html { line-height: 1.4em }

.task h4, .task h5 { margin: 0 }

.task { background-color: white }

.task.collapse {
  max-height: 1.4em;
  overflow: hidden;
}

.task.collapse h4::after {
  content: '...';
}

.task-list {
  padding: 0;
  list-style: none;
}

/* Collapse directive */
.h-collapse-expander {
  background: inherit;
  position: absolute;
  left: .5px;
  padding: 0 .2em;
}

.h-collapse-expander::before {
  content: '•';
}

.h-collapse-item {
  border-left: 1px dotted black;
  padding-left: .5em;
}

.h-collapse-wrapper {
  background: inherit;
  padding-left: .5em;
  position: relative;
}
```

```
<!DOCTYPE html>
<html>

  <head>
    <link href="collapse.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script data-require="angular.js@1.3.15" data-semver="1.3.15" src="https://code.angularjs.org/1.3.15/angular.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" data-semver="2.1.1" data-require="jquery@*"></script>
    <script src="script.js"></script>
    <script>
      function AppController($scope) {
        $scope.toggleCollapsed = function ($event) {
          $event.preventDefault();
          $event.stopPropagation();
          this.collapsed = !this.collapsed;
        }

        $scope.task = {
          name: 'All tasks',
          assignees: ['Citizens'],
          children: [
            {
              name: 'Gardening',
              assignees: ['Gardeners', 'Horticulture Students'],
              children: [
                {
                  name: 'Pull weeds',
                  assignees: ['Weeding Sub-committee']
                }
              ],
            },
            {
              name: 'Cleaning',
              assignees: ['Cleaners', 'Guests']
            }
          ]
        }
      }

      angular.module('app', ['h'])
      .controller('AppController', AppController)
    </script>
  </head>

  <body ng-app="app" ng-controller="AppController">
    <h1>Task Application</h1>

    <p>This is an AngularJS application that demonstrates a generalized
    recursive templating directive. Use it to quickly produce recursive
    structures in templates.</p>

    <p>The recursive directive was developed in order to avoid the need for
    recursive structures to be given their own templates and be explicitly
    self-referential, as would be required with ngInclude. Owing to its high
    priority, it should also be possible to use it for recursive directives
    (directives that have templates which include the directive) that would
    otherwise send the compiler into infinite recursion.</p>

    <p>The directive can be used alongside ng-if
    and ng-repeat to create recursive structures without the need for
    additional container elements.</p>

    <p>Since the directive does not request a scope (either isolated or not)
    it should not impair reasoning about scope visibility, which continues to
    behave as the template suggests.</p>

    <p>Try playing around with the demonstration, below, where the input at
    the top provides a way to modify a scope attribute. Observe how the value
    is visible at all levels.</p>

    <p>The collapse directive is included to further demonstrate that the
    recursion can co-exist with other transclusions (not just ngIf, et al)
    and that sibling directives are included on the recursive due to the
    recursion using whole 'element' transclusion.</p>

    <label for="volunteer">Citizen name:</label>
    <input id="volunteer" ng-model="you" placeholder="your name">
    <h2>Tasks</h2>
    <ul class="task-list">
      <li class="task" h-collapse h-recursive>
        <h4>{{task.name}}</h4>
        <h5>Volunteers</h5>
        <ul>
          <li ng-repeat="who in task.assignees">{{who}}</li>
          <li>{{you}} (you)</li>
        </ul>
        <ul class="task-list">
          <li h-recursive ng-repeat="task in task.children"></li>
        </ul>
      <li>
    </ul>

    <script type="text/ng-template" id="collapse.html">
      <div class="h-collapse-wrapper">
        <a class="h-collapse-expander" href="#" ng-click="collapse = !collapse"></a>
        <div class="h-collapse-item" ng-transclude></div>
      </div>
    </script>
  </body>

</html>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-30T22:01:13.513

现在 Angular 2.0 已经推出预览版，我认为可以在其中添加一个 Angular 2.0 替代方案。至少它会在以后使人们受益：

关键概念是构建一个带有自引用的递归模板：

```
<ul>
    <li *for="#dir of directories">

        <span><input type="checkbox" [checked]="dir.checked" (click)="dir.check()"    /></span> 
        <span (click)="dir.toggle()">{{ dir.name }}</span>

        <div *if="dir.expanded">
            <ul *for="#file of dir.files">
                {{file}}
            </ul>
            <tree-view [directories]="dir.directories"></tree-view>
        </div>
    </li>
</ul> 
```

然后，您将树对象绑定到模板并观察递归处理其余部分。这是一个完整的例子：[http ://www.syntaxsuccess.com/viewarticle/recursive-treeview-in-angular-2.0](http://www.syntaxsuccess.com/viewarticle/recursive-treeview-in-angular-2.0)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-24T20:44:03.287

有一个非常简单的解决方法，根本不需要指令。

好吧，从这个意义上说，如果您假设您需要指令，它甚至不是原始问题的解决方案，但如果您想要具有 GUI 的参数化子结构的递归 GUI 结构，它是一个解决方案。这可能是你想要的。

该解决方案基于仅使用 ng-controller、ng-init 和 ng-include。只需按如下方式进行，假设您的控制器名为“MyController”，您的模板位于 myTemplate.html 中，并且您的控制器上有一个名为 init 的初始化函数，它接受参数 A、B 和 C，从而可以参数化你的控制器。那么解决方法如下：

我的模板.htlm：

```
<div> 
    <div>Hello</div>
    <div ng-if="some-condition" ng-controller="Controller" ng-init="init(A, B, C)">
       <div ng-include="'myTemplate.html'"></div>
    </div>
</div> 
```

我很巧合地发现，这种结构可以在普通的香草角度中随心所欲地递归。只需遵循此设计模式，您就可以使用递归 UI 结构，而无需任何高级编译修补等。

在您的控制器内部：

```
$scope.init = function(A, B, C) {
   // Do something with A, B, C
   $scope.D = A + B; // D can be passed on to other controllers in myTemplate.html
} 
```

我能看到的唯一缺点是你必须忍受笨拙的语法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-09T18:16:15.123

我最终为递归创建了一组基本指令。

IMO 它比这里找到的解决方案要基本得多，而且即使不是更多也一样灵活，所以我们不一定要使用 UL/LI 结构等……但显然这些是有意义的，但是指令没有意识到这一点事实...

一个超级简单的例子是：

```
<ul dx-start-with="rootNode">
  <li ng-repeat="node in $dxPrior.nodes">
    {{ node.name }}
    <ul dx-connect="node"/>
  </li>
</ul> 
```

'dx-start-with' 和 'dx-connect' 的实现位于：[https ://github.com/dotJEM/angular-tree](https://github.com/dotJEM/angular-tree)

这意味着如果您需要 8 个不同的布局，您不必创建 8 个指令。

在上面创建一个可以添加或删除节点的树视图将相当简单。如：[http ://codepen.io/anon/pen/BjXGbY?editors=1010](http://codepen.io/anon/pen/BjXGbY?editors=1010)

```
angular
  .module('demo', ['dotjem.angular.tree'])
  .controller('AppController', function($window) {

this.rootNode = {
  name: 'root node',
  children: [{
    name: 'child'
  }]
};

this.addNode = function(parent) {
  var name = $window.prompt("Node name: ", "node name here");
  parent.children = parent.children || [];
  parent.children.push({
    name: name
  });
}

this.removeNode = function(parent, child) {
  var index = parent.children.indexOf(child);
  if (index > -1) {
    parent.children.splice(index, 1);
  }
}

  });
```

```
<div ng-app="demo" ng-controller="AppController as app">
  HELLO TREE
  <ul dx-start-with="app.rootNode">
<li><button ng-click="app.addNode($dxPrior)">Add</button></li>
<li ng-repeat="node in $dxPrior.children">
  {{ node.name }} 
  <button ng-click="app.removeNode($dxPrior, node)">Remove</button>
  <ul dx-connect="node" />
</li>
  </ul>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
  <script src="https://rawgit.com/dotJEM/angular-tree-bower/master/dotjem-angular-tree.min.js"></script>

</div>
```

从这一点开始，如果有人愿意，控制器和模板可以包装在它自己的指令中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-12T13:35:22.480

您可以为此使用 angular-recursion-injector：[https ://github.com/knyga/angular-recursion-injector](https://github.com/knyga/angular-recursion-injector)

允许您使用条件进行无限深度嵌套。仅在需要时重新编译并仅编译正确的元素。代码中没有魔法。

```
<div class="node">
  <span>{{name}}</span>

  <node--recursion recursion-if="subNode" ng-model="subNode"></node--recursion>
</div> 
```

使其工作得比其他解决方案更快、更简单的一件事是“--recursion”后缀。

# android - 从片段设置 ViewPager 的当前项目

> ID：14430658
> 
> 赞同：0
> 
> 时间：2013-01-20T23:41:19.780
> 
> 标签：android, android-fragments, android-viewpager

我`ViewPager`在我的应用程序中使用 a ，初始片段是 a `ListView`，其他片段是`ListView`. 用户可以手动选择项目中的项目`ListView`或浏览各种详细信息。我有滑动工作，但我不确定如何让项目选择工作。我假设我需要在`onListItemClick`of 中做一些事情`ListView`并且我知道我可以使用`setCurrentItem`the `ViewPager`，但是 the `ViewPager`is 在 the`Activity`和 the `ListView`is 在片段中，所以我不确定如何让两者都工作。

这可能是显而易见的，但我是使用 a`ViewPager`的新手，而且那里似乎没有很多文档，主要是关于获得基本`ViewPager`工作的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:00:16.890

您可以通过三种方式设置片段/活动通信：

1.  您可以定义一个接口，也就是活动实现的侦听器。
    参考： http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)查看名为“为活动创建事件回调”的部分

2.  使用[Otto](https://github.com/square/otto)或 [EventBus](http://greenrobot.github.com/EventBus/)等 EventBus 库创建发布者/订阅者系统，其中您的活动是订阅者，您的片段发布事件。

3.  您可以使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)通过活动拦截的意图发送消息，方法是使用您指定的操作字符串创建 BroadcastReceiver。下面是一个典型用例的示例：[如何使用 LocalBroadcastManager？](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

# ruby-on-rails - 从 Rails 3 中的 JSON 响应中获取数据

> ID：14430660
> 
> 赞同：2
> 
> 时间：2013-01-20T23:41:30.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, xmlhttprequest

因此，我试图将推文从 Twitter 中提取出来，并将它们放入 rails 应用程序（注意，因为这是一项我不能使用 Twitter Gem 的任务），我很困惑。我可以以 JSON 字符串的形式获得我需要的推文，但我不确定从那里去哪里。我知道我正在进行的 Twitter API 调用会返回一个带有一堆 Tweet 对象的 JSON 数组，但我不知道如何获取 tweet 对象。我尝试了 JSON.parse 但仍然无法获取所需的数据（我不确定返回的内容）。这是我到目前为止的代码，我已经用注释/字符串清楚地说明了我正在尝试的内容。我对 Rails 非常陌生，所以这可能与我正在尝试做的事情相去甚远。

```
def get_tweets
require 'net/http'
uri = URI("http://search.twitter.com/search.json?q=%23bieber&src=typd")

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Get.new(uri.request_uri)
response = http.request(request)

case response
when Net::HTTPSuccess then #to get: text -> "text", date: "created_at", tweeted by: "from_user", profile img url: "profile_img_url"
  JSON.parse(response.body)
  # Here I need to loop through the JSON array and make n tweet objects with the indicated fields
  t = Tweet.new(:name => "JSON array item i with field from_user",  :text  "JSON array item i with field text", :date => "as before" ) 
  t.save
when Net::HTTPRedirection then
  location = response['location']
  warn "redirected to #{location}"
  fetch(location, limit - 1)
else
  response.value
end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:27:36.747

JSON.parse 方法返回表示 json 对象的 ruby​​ 哈希或数组。在您的情况下，Json 被解析为散列，带有“results”键（里面有您的推文）和一些元数据：“max_id”、“since_id”、“refresh_url”等。请参阅 twitter 文档有关返回字段的说明。因此，再次以您的示例为例：

```
 parsed_response = JSON.parse(response.body)
  parsed_response["results"].each do |tweet|
    t = Tweet.new(:name => tweet["from_user_name"], :text => tweet["text"], :date => tweet["created_at"]) 
    t.save
  end 
```

# eclipse - eclipse自动为python模块生成单元测试

> ID：14430661
> 
> 赞同：2
> 
> 时间：2013-01-20T23:41:37.223
> 
> 标签：eclipse, python-2.7, pydev, netbeans-7

有没有办法让 eclipse 为 python 模块和类自动生成单元测试？基本上 netbeans 为 java 做的方式。我在 Mac OS X 上使用 PyDev

# python - x = None 或 object() 是否等于显式检查？

> ID：14430662
> 
> 赞同：2
> 
> 时间：2013-01-20T23:42:01.900
> 
> 标签：python, python-3.x

我有函数声明，如：

```
def function(list_of_objects = None) 
```

如果 *list_of_objects* 没有通过（没有），我需要将它定义为空列表。明确的方式是：

```
def function(list_of_objects = None):
    if not list_of_objects:
        list_of_objects = list() 
```

或者

```
def function(list_of_objects = None):
    list_of_objects = list() if not list_of_objects else list_of_objects 
```

上面的代码是否等于下一个？

```
def function(list_of_objects = None):
    list_of_objects = list_of_objects or list() 
```

我测试了它，但我仍然不确定

```
>>> def func(my_list = None):
...     my_list = my_list or list()
...     print(type(my_list), my_list)
... 
>>> func()
(<type 'list'>, [])
>>> func(['hello', 'world'])
(<type 'list'>, ['hello', 'world'])
>>> func(None)
(<type 'list'>, [])
>>> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T23:43:57.390

不，因为`None`不是唯一的虚假对象。还包括`[]`, `()`, `0`, 当然还有`False`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T00:05:27.057

惯用的方法是：

```
def function(list_of_objects=None):
    if list_of_objects is None:
        list_of_objects = [] 
```

`None`是一个单例，因此您可以使用`is`运算符进行比较。

您的代码测试真实性`list_of_objects`（在这种情况下，所有`if`和`or`变体都是等效的）。[以下值在 Python 中被认为是错误的](http://docs.python.org/3/library/stdtypes.html#truth)：

*   没有任何

*   错误的

*   任何数字类型的零，例如`0`, `0.0`, `0j`。

*   任何空序列，例如`''`, `()`, `[]`.

*   任何空映射，例如`{}`.

*   用户定义类的实例，如果该类定义了一个`__bool__()`或`__len__()`方法，当该方法返回整数零或布尔值 False。

所有其他值都被认为是真的——所以许多类型的对象总是真的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T00:27:37.527

通常的做法是：

```
def function(list_of_objects=None):
    if list_of_objects is None:
        list_of_objects = []
    ... 
```

使用*None*是因为它很容易与其他错误值（例如空列表或空元组）区分开来。

使用`is None`测试而不是相等测试，因为*None*是单例（根据[PEP 8](http://www.python.org/dev/peps/pep-0008/) ，这是首选做法）。

# objective-c - OS X 应用程序 WebView 未通过代码加载

> ID：14430665
> 
> 赞同：1
> 
> 时间：2013-01-20T23:43:17.680
> 
> 标签：objective-c, macos, webview, browser

我花了大约一整天的悲伤试图解决这个问题，这是我最后的手段。我的 OS X 应用程序中有一个网络视图。我制作了一个网络浏览器，它与导航箭头和所有功能都很好，但是当我尝试制作主页（谷歌）时，它不会加载到 WebView 上（在代码中称为 webber）。我确保所有插座都已连接。这是我的 AppDelegate.h 代码：

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>{
    NSWindow *window;
    NSTextField *urlBox;
    IBOutlet WebView *webber;
    IBOutlet NSTextField *googleSearchField;
}

-(IBAction)search;

@property (assign) IBOutlet NSWindow *window;

@end 
```

这是 AppDelegate.m 的代码：

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)windowControllerDidLoadNib:(NSWindowController *)windowController{
    NSLog(@"Nib loaded");
    NSString *urlText = @"http://www.google.com";
    [[webber mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]];
}

-(IBAction)search
{
    NSString *searchString = [googleSearchField stringValue];
    NSString *searchURL = [NSString stringWithFormat:@"http://www.google.com/search?q=%@", searchString];
[[webber mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString: searchURL]]];
}

@end 
```

我非常感谢***任何***形式的帮助，我非常绝望。请记住，我才 6 年级，我正在寻找分步指南或纯代码。感谢您的时间！在此处下载 Xcode 项目：http: [//www.cadenfarley.com/cobra/Download.html](http://www.cadenfarley.com/cobra/Download.html)向下滚动直到您看到“Xcode project here”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:14:52.743

你的`windowControllerDidLoadNib:`方法永远不会被调用，因为你没有`NSWindowController`任何地方。将该方法重命名为`- (void)awakeFromNib`，它应该可以工作。

# ruby-on-rails - 是否可以在控制器中调用范围？

> ID：14430666
> 
> 赞同：1
> 
> 时间：2013-01-20T23:43:23.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在控制器中使用这个范围。
我怎样才能添加到这一行？我不能只是把`.recent`任何地方放在行中......现在我可以忽略`order: 'updated_at DESC'` 我只是为了以防万一。

**用户控制器**

```
@users = User.find_by_username(params[:id]).all_following(order: 'updated_at DESC') 
```

**用户模型**

```
scope :recent, lambda { |n = 10| order("last_active_at DESC").limit(n) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:56:46.290

写吧

```
@users = User.find_by_username(params[:id]).all_following.recent 
```

在您的控制器中。这应该为您提供最近关注的用户。作用域的美妙之处在于您可以连接它们（在本例中为`all_following`和`recent`）。

顺便说一句，我怀疑找到带有 id 的用户名是否有意义。如果您在 params 哈希中有用户名，您将需要说`User.find(params[:id]).all_following.recent`或。`User.find_by_username(params[:username]).all_following.recent`

# r - 在R中组合列表元素

> ID：14430671
> 
> 赞同：5
> 
> 时间：2013-01-20T23:43:45.987
> 
> 标签：r, list, combinations

我有一份表格清单`list(c(x1,x2),y,c(z1,z2))`。我想组合列表中每个元素的子元素以生成以下形式的矩阵：

```
[1] x1 y z1

[2] x1 y z2

[3] x2 y z1

[4] x2 y z2 
```

举一个具体的例子，给出：

```
A = list(c(1,4),2,3,c(1,4)) 
```

我想要一个函数，它将采用 A 并产生一个看起来与该命令将产生的输出相同的输出：

```
t(matrix(c(c(1,2,3,1),1:4,c(4,2,3,1),c(4,2,3,4)),ncol=4)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T23:47:45.930

使用`expand.grid`：

```
expand.grid(A)
#   Var1 Var2 Var3 Var4
# 1    1    2    3    1
# 2    4    2    3    1
# 3    1    2    3    4
# 4    4    2    3    4 
```

如果订单真的很重要，您可以执行以下操作：

```
rev(expand.grid(rev(A)))
#   Var4 Var3 Var2 Var1
# 1    1    2    3    1
# 2    1    2    3    4
# 3    4    2    3    1
# 4    4    2    3    4 
```

并可能重命名列。

# php - Android InputStream 转换为String，获取变量

> ID：14430675
> 
> 赞同：0
> 
> 时间：2013-01-20T23:44:18.257
> 
> 标签：php, android, sql, inputstream

我已经成功地将Android中的http响应转换为使用Inputstream的String，使用convertStreamToString（instream）。我的问题是如何将转换后的字符串放入本地字符串中。这是转换后的字符串的响应：

```
INSERT INTO androidlogin (user, pass) VALUES ('r','r'){"user":"r","pass":"r"} 
```

我想为用户检索字符串并通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:08:48.777

您正在寻找的是从您拥有的字符串创建一个 JSONObject ，然后执行 obj.optString("user") 所以

JSONObject obj = new JSONObject(string); 字符串用户 = obj.optString("user");

# c++ - c++ custom UI ToolKit -- 跨平台抽象层的选项

> ID：14430676
> 
> 赞同：9
> 
> 时间：2013-01-20T23:44:20.207
> 
> 标签：c++, qt, user-interface, sublimetext2

作为跨平台文本编辑器 Sublime Text 2 的粉丝，我一直在研究它是如何开发的。开发人员注意到它是 99% 的 c++ 和一些用于 Linux 的 GTK，并且它使用了一个他称之为“Sublime GUI”的自定义 UI 工具包。这是来自开发者的引述

> Sublime Text 2 本身使用自定义 UI 工具包。有很多应用程序可能没有意义，但对于 Sublime Text 来说，这并不是一个不合理的选择，我一直知道无论工具包如何，很多 UI 控件都必须是自定义的（例如，文本控件和选项卡控件）。UI 工具包位于跨平台抽象层之上，它更像是平台功能的结合，而不是最低公分母。

我的问题是，跨平台抽象层有哪些选择？我认为这比 GTK、QT、SDL 低。我试图弄清楚如何创建一个跨平台的自定义 UI 工具包，并且只需要编写一次代码。

我很欣赏 UI 工具包的好处，但如果我想亲自动手并在 Windows、Linux、Mac 上支持我的应用程序，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:10:36.533

我想最重要的问题是如何绘制和获取键盘和鼠标事件。

正如我所看到的，有两种绘图方法：

1.  创建 OpenGL 上下文并使用 OpenGL 绘制小部件。像[胶](http://glui.sourceforge.net/)一样。
2.  使用本机绘图基础架构。就像Windows上的[GDI+ ，X11 上的](http://msdn.microsoft.com/en-us/library/ms533797.aspx)[XLib](http://www.x.org/docs/X11/xlib.pdf)。

当然，您需要为每个平台实现某些东西。使用 OpenGL，您需要为每个平台编写上下文（WGL、GLX、..）处理，而使用本机绘图基础架构则需要更多的工作。由于所有绘图基础设施都是独一无二的，您可能希望为绘图编写一个抽象，然后使用绘图抽象层实现您的小部件。

至于事件处理，我认为您还需要编写自己的抽象，因为每个平台的事件处理都是独一无二的。

最后，您还应该有一个抽象层来创建主窗口，您可以在其中绘制小部件并从中获取事件。

使用 OpenGL 时，您可以从[glut](http://www.opengl.org/resources/libraries/glut/)开始，它已经处理了窗口创建和事件处理。

请记住，我从未实施过这样的事情。但是，我可能会尝试使用 OpenGL 方法，因为我认为实现目标的工作量更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:12:01.593

有许多跨平台工作的 GUI 工具包（Tk、QT 和 GTK 仅举几例）

但是，如果您想编写自己的，它不必是比 GTK、QT 或类似工具低级别的工具包。

您可以公开与此类似的接口

```
void draw_window(mywindow *mw, char *name){
    non platform specific code goes here (maybe arg parsing, etc.)

#IFDEF windows
    windows specific code goes here
#ENDIF
#IFDEF macosx
    mac specific code goes here
#ENDIF
#IFDEF linux
    linux specific code goes here
#ENDIF

    non platform specific code goes here (tidying up, recording state, etc.)
} 
```

在每个特定于平台的部分中，您可以分派到该平台的 gui 工具包或使用任何可用的接口（即，用于 Unix 的 X11）。

当您编译代码时，您指定目标平台，这决定了哪些 IFDEF 部分被编译。

当然，这被过度简化了，并且必须非常小心，以便您公开的界面不会太痛苦而无法映射到本机等价物。

# php - preg_match_all() 文本中的多个项目

> ID：14430680
> 
> 赞同：0
> 
> 时间：2013-01-20T23:44:51.547
> 
> 标签：php, regex, html-parsing, preg-match, preg-match-all

我有一系列这样的项目：

```
<tr>
    <td class="vertTh">
        <center>
            <a href="/browse/200" title="More from this category">Video</a>
            <br />
            (
            <a href="/browse/201" title="More from this category">Movies</a>
            )
        </center>
    </td>
    <td>
        <div class="detName">
            <a href="/torrent/8036528/Life.of.Pi.2012.DVDSCR" class="detLink" title="Details for Life.of.Pi.2012.DVDSCR">Life.of.Pi.2012.DVDSCR</a>
        </div>
        <a href="magnet:?xt=urn:btih:b129c8fd1c91b00589ef8fe646f52ce10148a3c9&dn=Life.of.Pi.2012.DVDSCR&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80" title="Download this torrent using magnet">
            <img src="//static.thepiratebay.se/img/icon-magnet.gif" alt="Magnet link" />
        </a>
        <img src="//static.thepiratebay.se/img/icon_comment.gif" alt="This torrent has 68 comments." title="This torrent has 68 comments." />
        <img src="//static.thepiratebay.se/img/icon_image.gif" alt="This torrent has a cover image" title="This torrent has a cover image" />
        <a href="/user/scene4all">
            <img src="//static.thepiratebay.se/img/vip.gif" alt="VIP" title="VIP" style="width:11px;" border='0' />
        </a> <font class="detDesc">Uploaded 01-18&nbsp;17:41, Size 1.25&nbsp;GiB, ULed by
            <a class="detDesc" href="/user/scene4all/" title="Browse scene4all">scene4all</a></font> 
    </td>
    <td align="right">33981</td>
    <td align="right">18487</td>
</tr> 
```

如何 preg_match()/preg_match_all()

我尝试使用这种模式：

```
<tr>
    <td class="vertTh">
        (?P<cat>.*?)
    </td>
    <td>
        <div class="detName">
            (?P<name>.*?)
        </div>
        (?P<link>.*?)
    </td>
    <td align="right">(?P<up>.*?)</td>
    <td align="right">(?P<down>.*?)</td>
</tr> 
```

而这段代码：

```
preg_match_all("#$pattern#s", $item, $v);
var_dump($v); 
```

它返回：

```
array(11) {
  [0]=>
  array(0) {
  }
  ["cat"]=>
  array(0) {
  }
  [1]=>
  array(0) {
  }
  ["name"]=>
  array(0) {
  }
      ...
} 
```

有人可以帮助我，如何修复此代码以返回实际内容？我认为我提供的信息已经足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:55:57.400

我会分四步完成，而不是一步：

```
<?php
    preg_match_all('|category">([^<]*)</a>|isU', $html, $categories);
    preg_match('|<div class="detName">[^<]*<[^>]*>([^<]*)</a>|isU', $html, $name);
    preg_match('|<a href="(magnet:[^"]*)"|isU', $html, $link);
    preg_match_all('|<td align="right">([0-9]+)</td>|isU', $html, $up_down);
?> 
```

# java - 向数据库表中插入错误

> ID：14430682
> 
> 赞同：0
> 
> 时间：2013-01-20T23:45:32.203
> 
> 标签：java, android

我真的很难对一些将时间和日期插入到我的数据库中的表中的问题进行排序，这些问题似乎存在！

我问了一个关于“没有这样的桌子”问题的问题，但没有得到解决这个问题的答案，情况已经改变。

真的希望有人可以帮助我，因为在我解决这个问题之前我无法前进。

编辑：

logcat 是否显示我在创建表之前尝试插入？

这是我的 Logcat 错误：

```
01-20 23:38:24.128: E/Database(287): Error inserting app_time=00114200T000000Europe/Dublin(0,0,0,-1,0) app_alarm=false app_date=2013-01-24 app_name=gggg app_comments=a app_type=Business
01-20 23:38:24.128: E/Database(287): android.database.sqlite.SQLiteException: no such table: appointmentsTable: , while compiling: INSERT INTO appointmentsTable(app_time, app_alarm, app_date, app_name, app_comments, app_type) VALUES(?, ?, ?, ?, ?, ?); 
```

是否因为没有表而无法插入此数据？我不知道为什么我不能创建一个表。我也很困惑为什么传递的值是“？”

这里又是我的 OnCreate 方法：

```
@Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_TEL + " TEXT NOT NULL, " +
                KEY_EMAIL + " TEXT NOT NULL, " +
                KEY_COMMENTS + " TEXT NOT NULL);"

                );

        db.execSQL("CREATE TABLE " + DATABASE_TABLEAPP + " (" +
                KEY_ROWAPPID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAMEAPP + " TEXT NOT NULL, " +
                KEY_TYPEAPP + " TEXT NOT NULL, " +
                KEY_TIMEAPP + " TEXT NOT NULL, " +
                KEY_DATEAPP + " TEXT NOT NULL, " +
                KEY_COMMENTAPP + " TEXT NOT NULL, " +
                KEY_ALARM + " BOOLEAN NOT NULL);"

                );      
    } 
```

我的插入方法：

```
 public void createAppointmentEntry(String nameApp, String typeApp, Time timeApp, Date dateApp ,String commentApp, Boolean onOrOff) {

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAMEAPP, nameApp);
        cv.put(KEY_TYPEAPP, typeApp);
        cv.put(KEY_TIMEAPP, timeApp.toString());
        cv.put(KEY_DATEAPP, dateApp.toString());
        cv.put(KEY_COMMENTAPP, commentApp);
        cv.put(KEY_ALARM, onOrOff);
        ourDatabase.insert(DATABASE_TABLEAPP, null, cv);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:18:51.820

您是否看到您的数据类型为“ TEXT NOT NULL ”？尝试将“app_time”列更改为“TEXT”，并增加数据库版本。此外，尝试下载 SQLite Viewer，以便您可以直观地了解您的数据库的实际外观以及该列是否存在。

# jquery - 如何在上一个动画完成之前停止 jQuery 动画堆叠？

> ID：14430685
> 
> 赞同：0
> 
> 时间：2013-01-20T23:45:44.433
> 
> 标签：jquery, jquery-animate, repeat

我不知道如何最好地解释这一点，而且我确信我的头衔不能胜任。这是问题所在。我需要在页面的一侧建立一个拉出。当您将鼠标悬停在选项卡上时，它会从左侧拉出。悬停时，它会移回原来的位置。除了一个烦恼之外，这一切都很好。如果您快速在 div 上上下滑动鼠标，它会将多个 .animate 函数排入队列，从而使选项卡多次弹出和弹出。以下是截至撰写本文时令人烦恼的网站：http: [//mattandjentry.com/weddings/](http://mattandjentry.com/weddings/)

这是我的jQuery：

```
$(document).ready(function() {
    $("#session_pullout").css("left", "-370px"); 

    $("#session_pullout").hover(function() {
        $("#session_pullout").animate(
                {"left": "-50"},
                "fast");
        }, function(){
            $("#session_pullout").animate(
                {"left": "-370px"},
                "fast");
        });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:47:24.450

还有一个[`.stop()`](http://api.jquery.com/stop/)问题。

用于`.stop()`停止当前运行的动画。或者，您也可以调用`.stop(true)`清除动画队列；或者，`.stop(true, true)`在清除动画队列的基础上跳转到动画的末尾。

```
$(document).ready(function () {
    $("#session_pullout").css("left", "-370px");

    $("#session_pullout").hover(function () {
        $("#session_pullout").stop().animate({
            "left": "-50"
        }, "fast");
    }, function () {
        $("#session_pullout").stop().animate({
            "left": "-370px"
        }, "fast");
    });
}); 
```

看看参数，`.stop()`看看哪个更适合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:49:01.300

使用`.stop()`.

```
$("#session_pullout").hover(function() {
    $("#session_pullout").stop(true, true).animate({
        left: '-50px'
    }, 'fast');
}, function() {
    $("#session_pullout").stop(true, true).animate({
         left: '-370px'
    }, 'fast');
}); 
```

这将清除动画队列并强制运行下一个动画。**[您可以在此处](http://api.jquery.com/stop/)**找到文档。

# java - 有没有办法改变 JComboBox 的项目焦点？

> ID：14430688
> 
> 赞同：0
> 
> 时间：2013-01-20T23:46:07.443
> 
> 标签：java, swing, jcombobox

我可以通过按键盘上的箭头键或将鼠标移到它上面来更改项目的焦点。是否有一种程序化的方式来围绕项目移动焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:56:56.720

您可以简单地设置所选项目。或者，您可以显示下拉列表：

```
comboBox.requestFocus();
comboBox.showPopup();
comboBox.setSelectedIndex(selectedIndex); 
```

# android - Android getAssets() 方法抛出 NullPointerException

> ID：14430692
> 
> 赞同：0
> 
> 时间：2013-01-20T23:46:27.897
> 
> 标签：android, nullpointerexception, android-assets

我正在尝试从服务中获取我的应用程序的资产，但我得到了 nullpointexception。我发现了几篇关于它的文章。但我不明白我的错误在哪里。

代码在哪里：

```
public class OCRService extends IntentService{

private static final String TAG = "OCRService";
public static final String DATA_PATH = Environment.getExternalStorageDirectory().toString() + "/SimpleAndroidOCR/";

public OCRService() {
    super("OCRService");
    String path = new String(DATA_PATH + "tessdata/");
    File dir = new File(path);
    if (!new File(path).exists() && !dir.mkdirs()) {
        Log.e(TAG, "ERROR: Creation of directory " + path + " on sdcard failed");
        return;
    } else {
        Log.v(TAG, "Created directory " + path + " on sdcard");
        if (!(new File(DATA_PATH + "tessdata/" + "eng.traineddata")).exists()) {
            try {

                AssetManager assetManager = getAssets();
                for (String file : assetManager.list("tessdata")) {
                    InputStream in = assetManager.open("tessdata/" + file);
                    OutputStream out = new FileOutputStream(DATA_PATH + "tessdata/" + file);
                    byte[] buf = new byte[1024];
                    int len;
                    while ((len = in.read(buf)) > 0) {
                        out.write(buf, 0, len);
                    }
                    in.close();
                    out.close();
                }
                Log.v(TAG, "Copying ocr traineddata sacceded");
            } catch (IOException e) {
                Log.e(TAG, "Was unable to copy osr traineddata "+ e.toString());
            }
        }
    }
} 
```

例外在哪里：

```
FATAL EXCEPTION: main
 java.lang.RuntimeException: Unable to instantiate service com.pc.droidhelper.services.OCRService: java.lang.NullPointerException
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2241)
    at android.app.ActivityThread.access$1600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4476)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.NullPointerException
    at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
    at com.pc.droidhelper.services.OCRService.<init>(OCRService.java:41)
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1319)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2238)
    ... 10 more 
```

如您所见，getAssets 是从 Service 调用的。我有上下文。我读过我应该使用主要活动中的 getAssets 。请告诉我为什么，有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:15:57.097

> 下次请在此处注明第 41 行。恕我直言，这只是使堆栈跟踪无法使用的部分代码

**我认为的问题在这里：**

```
AssetManager assetManager = getAssets();
            for (String file : assetManager.list("tessdata")) {
                InputStream in = assetManager.open("tessdata/" + file); 
```

如果assetManager.list("tessdata") 返回一个null（没有`tessdata`），该null`String file`作为一个条目进入，那么您正在调用

```
InputStream in = assetManager.open("tessdata/" + file); 
```

`"tessdata/" + file`如果不存在`"tessdata"`就不会存在

因此，解决方案可能是：

# 解决方案

```
for (String file : assetManager.list("tessdata")) {
if(file!=null){
                InputStream in = assetManager.open("tessdata/" + file);
...
    }
} 
```

# regex - 多行 sublime text 语言模块定义

> ID：14430693
> 
> 赞同：3
> 
> 时间：2013-01-20T23:46:28.103
> 
> 标签：regex, sublimetext2

我正在尝试为 Sublime Text 创建一个新的语法定义。我已经制定了正则表达式来突出显示每一行中的匹配项，但我希望匹配项包括新行以及任何字符。这是 tmLanguage 文件中的正则表达式，它在一行中工作：

```
<key>match</key>
<string>\{\+\+(.*?)\+\+[ \t]*(\[(.*?)\])?[ \t]*\}</string> 
```

我试图修改点 (.) 匹配以跨越多行，但它实际上似乎并没有捕获整个块。我的理解是修饰符 ?m: 应该可以工作，但不能。

```
<key>match</key>
<string>(?m:(\{\+\+(.*?)\+\+[ \t]*(\[(.*?)\])?[ \t]*\}))</string> 
```

有没有办法声明将跨多行匹配的语言定义正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T12:32:49.783

改用单行修饰符：

```
<key>match</key>
<string>(?s:(\{\+\+(.*?)\+\+[ \t]*(\[(.*?)\])?[ \t]*\}))</string> 
```

你误解了`(?m)`修饰符。 **您的正则表达式始终应用于单行。**

*   使用多行修饰符意味着您的正则表达式会将您的文本视为多行（这是默认行为），然后它会`^(...)$`在每一行周围添加。

*   使用单行修饰符，`^(...)$`不会添加，然后`.`会匹配`\r\n`

# css - 如何在无法访问 HTML 代码的情况下仅在 CSS 中插入页面标题

> ID：14430694
> 
> 赞同：0
> 
> 时间：2013-01-20T23:46:28.737
> 
> 标签：css

我目前正在编辑 LMS 主题的 css 文件，我需要通过将其插入 css 文件来更改页面标题。我想知道这种情况下应该写的css代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:47:33.060

CSS用于格式化。HTML 用于数据。这是不能也不应该做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:48:53.653

CSS 用于告诉 Web 浏览器如何显示数据，而 HTML 用于告诉 Web 浏览器要显示什么。

因此这不能在 CSS 中完成

# jquery - Adobe Edge - 在 Symbol 中获取 DIV

> ID：14430695
> 
> 赞同：2
> 
> 时间：2013-01-20T23:47:11.570
> 
> 标签：jquery, css, html, symbols, adobe-edge

在 adobe edge 中，如果要更改符号的背景颜色，请使用：

```
sym.$('Blob1').css({"background-color":"#DDD"}); 
```

但是如果我想改变一个 div INSIDE 符号的 CSS，我应该写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:50:55.713

```
sym.$('Blob1').find('div').css(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T11:01:36.340

```
sym.getSymbol('symbolName').$('divName').css(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:34:18.793

如果要更改符号内 div 的 css，则应访问该 div，然后访问其样式属性。

例如，要将颜色属性设置为红色，它可能如下所示：

```
$('#id_of_innerdiv').css('background-color', '#ddd'); 
```

注意：这依赖于 adobe edge 附带的 jquery 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T20:02:50.610

这里不是专家，但我已经能够使用类似的结构来做到这一点 `sym.$('Blob1').$('inner_div').css({"background-color":"#DDD"});`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-10T03:30:41.093

`Blob1`实际上是引用的符号的子节点，而不是符号自己的 div。的结果`sym.$('Blob1')`是一个 jQuery 对象，因此您可以使用`children()`，`find()`或者您喜欢更深入的任何遍历方法。如果孩子实际上是一个嵌套符号，你最好使用`getSymbol()`.

如果您确实想直接获取符号的 jQuery 对象，那就是`sym.element`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-16T13:55:09.380

我建议给你的内部 div 一个类（例如“.inner_div”，用于类设置的 C 图标位于 div 标题字段右侧的“属性”面板中）而不是执行以下操作：

sym.$('Blob1').find('.inner_div').css({"background-color":"#DDD"});

# c++ - 如何在 Cygwin 中将 Speech.h 添加到 g++？

> ID：14430697
> 
> 赞同：1
> 
> 时间：2013-01-20T23:47:16.027
> 
> 标签：c++, compilation, sapi

我只是想在 Windows 7 机器上使用 Cygwin 中的仿真 g++ 编译器编译一个 c++ 程序，其中包括：

```
iostream
string
windows.h
stdio.h
mmsystem.h
initguid.h
objbase.h
objerror.h
ole2ver.h
speech.h 
```

它编译它们都很好，除了 Speech.h，这是我正在研究的面包和黄油，所以..是的。

返回以下内容：

*test.cpp:11:20：致命错误：speech.h：没有此类文件或目录编译终止。*

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:46:12.120

编译的文件位于您的系统路径上，因此编译器可以找到它们。Speech.h 不是，所以你必须告诉它在哪里看：

```
g++ -c test.cpp -I<Path_to_speech.h>/speech.h ... 
```

即如果它在`C:\Users\Kirk\test\include`，那么

```
g++ -c test.cpp -IC:/Users/Kirk/test/include/speech.h ... 
```

# ios - UIButton 仅在被按下时显示 tintColor，在正常状态下不显示

> ID：14430709
> 
> 赞同：3
> 
> 时间：2013-01-20T23:48:29.080
> 
> 标签：ios, objective-c, colors

这是我的代码。它创建一个白色按钮，按下时会变成紫色。我想要的是一个紫色按钮。

```
 if (!backButton) {
    backButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [backButton setTitle:@"Back" forState:UIControlStateNormal];
    backButton.titleLabel.font = [UIFont fontWithName:@"Helvetica Neue" size:17];
    CGSize size = [aboutButton.titleLabel.text sizeWithFont:[UIFont fontWithName:@"Helvetica Neue" size:23]];
    backButton.frame = CGRectMake(screenWidth/2 - size.width/2, screenHeight-size.height*4, size.width, size.height);
    backButton.tintColor = [UIColor colorWithRed:123/255.0 green:47/255.0 blue:85/255.0 alpha:1]; //This is the color I want the button to be in its normal state.
    [backButton addTarget:self action:NSSelectorFromString(@"displaySettingsScreen") forControlEvents:UIControlEventTouchUpInside];
}
[self.view addSubview:backButton]; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:00:37.873

遗憾的是，tintColor 属性不适用于 RoundedRect 按钮类型。

请参阅此处： [为什么我的 UIButton.tintColor 不起作用？](https://stackoverflow.com/questions/11066008/why-is-my-uibutton-tintcolor-not-working)

为了解决这个问题，我使用单段 UISementedControl 代替我想要着色的 UIButton。

这里的答案描述了该技术： [https ://stackoverflow.com/a/4971371/785411](https://stackoverflow.com/a/4971371/785411)

另一种选择是为按钮使用紫色图像——尽管这需要更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:30:50.340

圆角矩形按钮很难更改，因此请改用自定义按钮，并设置背景颜色：

```
if (!backButton) {
        backButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [backButton setTitle:@"Back" forState:UIControlStateNormal];
        backButton.titleLabel.font = [UIFont fontWithName:@"Helvetica Neue" size:17];
        CGSize size = [aboutButton.titleLabel.text sizeWithFont:[UIFont fontWithName:@"Helvetica Neue" size:23]];
        backButton.frame = CGRectMake(screenWidth/2 - size.width/2, screenHeight-size.height*4, size.width, size.height);
        backButton.layer.cornerRadius = 6.0f;
        backButton.backgroundColor = [UIColor colorWithRed:123/255.0 green:47/255.0 blue:85/255.0 alpha:1]; //This is the color I want the button to be in its normal state.
        [backButton addTarget:self action:NSSelectorFromString(@"displaySettingsScreen") forControlEvents:UIControlEventTouchUpInside];
    }
    [self.view addSubview:backButton]; 
```

您需要添加 QuartzCore 框架，并将其导入（以使图层属性起作用）。

# javascript - Firefox 插件 sdk：根据剪贴板内容从不同站点检索值

> ID：14430711
> 
> 赞同：0
> 
> 时间：2013-01-20T23:48:42.227
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我刚开始使用 firefox 插件来帮助我的团队加快我们的工作，我正在尝试创建的内容：当在特定站点上时（我们称之为**mysite.com/input**），我想自动填写一个带有 id 的输入：来自**存储在剪贴板上**的值的“textinput” 。是的，它很简单，但粘贴它就足够了，不是吗？...现在是转折点：

我需要另一种形式的值：在剪贴板上它是 x/y/z。有一个数据库站点（我们称它为 database.com），在该站点上进行类似**database.com?s=x/y/z**的搜索将直接给出可以从中获得正确值的页面，因为它有一个 id：#结果

我迷失了如何在页面和内容脚本之间正确通信，我什至不确定我应该以什么顺序使用 pagemod 和 page-worker

请帮帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:03:06.720

基本流程是这样的：

*   在您的内容脚本中，您以某种方式从表单中获取值。我会把它留给你。

*   仍然在内容脚本中，您使用 self.port.emit 将数据发送到 main.js：

代码：

```
self.port.emit('got-my-value', myValue); 
```

*   在 main.js 中，您将收到“got-my-value”事件并使用请求模块发出跨域请求。

代码：

```
require('page-mod').PageMod({
    include: 'somesite.com',
    contentScriptFile: data.url('somescript.js'),
    onAttach: function(worker) {
        worker.port.on('got-my-value', function(value) {
            require('request').Request({
                url: 'http://someurl.com',
                onComplete: function(response) {
                    console.log(response);
                    // maybe send data back to worker?
                    worker.port.emit('got-other-data', response.json);
                }
            }).post();
        });
    }
}); 
```

*   如果您需要在原始工作人员中接收回数据，则需要另一个侦听器来监听返回的事件。

代码：

```
self.port.on('got-other-data', function(value) {
    // do something
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T00:26:12.613

在过去的两天里，我一直在努力解决同样的问题，直到我发现这个：

[https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Content_Scripts/Cross_Domain_Content_Scripts](https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Content_Scripts/Cross_Domain_Content_Scripts)

它们表明以下内容：

> 但是，您可以通过将它们添加到附加组件的**package.json**中的“cross-domain-content”键下来为特定域启用这些功能，该键本身位于“permissions”键下：

```
 "permissions": {
     "cross-domain-content": ["http://example.org/", "http://example.com/"] } 
```

> 列出的域必须包括方案和完全限定的域名，并且这些域必须与提供内容的域完全匹配 - 因此在上面的示例中，内容脚本将不允许访问从 [https://example.com/](https://example.com/)提供的内容. 不允许使用通配符。此功能目前仅适用于内容脚本，不适用于插件随附的 HTML 文件中包含的页面脚本。

这对我有用。

# asp.net-mvc - asp.net mvc中每个请求的类实例

> ID：14430714
> 
> 赞同：1
> 
> 时间：2013-01-20T23:49:18.027
> 
> 标签：asp.net-mvc

我是 asp.net mvc 的新手。我有一个应用程序类，每个请求只需要一个实例。它有 IDispose，所以我需要正确处理它，我称它为每一页命中。

我发现的问题是我有时需要在我的视图中调用方法。我不知道如何访问控制器中的类，查看并在每个请求结束时正确处理它。我觉得我需要用我自己的控制器类作为基础替换我的所有控制器。但这只有在它首先执行视图并且我可以从视图访问 MyController 中的成员时才有效（实际上我可以将它塞进视图包中，我不能）

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:31:21.420

一种解决方案是连接一个依赖注入框架（例如 Ninject）并让它为您控制对象的生命周期。Ninject 有一个 InRequestScope 生命周期策略，它将为每个请求创建一个对象，因此如果它在同一个请求中，后续获取该对象的调用将返回相同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:52:00.840

实现依赖注入后，您可以在控制器中处理您的依赖项或对象，如下所示。

```
protected override void Dispose(bool disposing)

    {
    _requestRepository.Dispose();
    base.Disposing(disposing);
    } 
```

# branch - 与 div、$HI 和分支语句相关的简单 MIPS 错误

> ID：14430715
> 
> 赞同：0
> 
> 时间：2013-01-20T23:49:30.043
> 
> 标签：branch, mips, division, cpu-registers

我正在尝试在 MIPS 中复制以下 C 代码：

```
//sum, n and added are integers and have already been initialized
if(n%3 == 0){
    sum = sum + n;    
    added = added + 1;
} 
```

这是我*尝试*做的。

```
#Let t0 = n
#Let s0 = sum
#Let a0 = added
#All have been set earlier in the program

addi $t1, $zero, 3    #Let t1 = 3 for division
div $t0, $t1          #Remainder will be stored in $HI
bne $HI, $zero, ENDIF #skip to ENDIF when remainder != 0; same as if(n%3 == 0)
    add $s0, $s0, $t0
    addi $a0, $a0, 1
ENDIF: 
```

当我在我的 MIPS 模拟器中运行它时（我正在使用 QtSpim），我在 if 语句上得到一个编译器错误。上面写着：

```
bne $HI, $zero, ENDIF #skip to ENDIF when remainder != 0; same as if(n%3 == 0)
     ^ 
```

这句话到底有什么问题？我可以看到 ^ 在 $HI 之下。我的 div 语句有问题，导致 $HI 出现错误吗？或者不能在这样的分支中使用 $HI 吗？我需要将 $HI 移至临时寄存器吗？还是分支语句有问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:06:27.527

是的，您需要`$HI`移入一个寄存器（MIPS 分支指令比较寄存器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:09:48.040

您不能直接访问 HI 寄存器，用于`mfhi`获取其中的值。

```
#Let t0 = n
#Let s0 = sum
#Let a0 = added
#All have been set earlier in the program

addi $t1, $zero, 3    #Let t1 = 3 for division
div $t0, $t1          #Remainder will be stored in $HI
mfhi $t2          #Store the value from $HI in $t0
bne $t2, $zero, ENDIF #skip to ENDIF when remainder != 0; same as if(n%3 == 0)
    add $s0, $s0, $t0
    addi $a0, $a0, 1
ENDIF: 
```

# actionbarsherlock - ActionBarSherlock + GoogleMaps v2 地图未显示（没有地图日志错误）

> ID：14430716
> 
> 赞同：0
> 
> 时间：2013-01-20T23:49:30.907
> 
> 标签：actionbarsherlock, android-maps-v2, actionbarsherlock-map

我刚刚解决了支持 Android Maps v2 + ActionBarSherlock 的项目，正如这个答案所说：

[http://facebook.stackoverflow.com/a/13727539/689723](http://facebook.stackoverflow.com/a/13727539/689723)

好的，我一直在为没有得到典型的 XML 错误而奋斗，我终于可以得到没有错误的片段。

我很确定我的 AndroidManifest 没问题。

我的日志是：

```
01-21 00:43:03.455: D/dalvikvm(4990): GC_CONCURRENT freed 311K, 8% free 13870K/14983K, paused 1ms+3ms, total 20ms
01-21 00:43:03.455: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 7ms
01-21 00:43:03.555: D/dalvikvm(4990): GC_CONCURRENT freed 379K, 7% free 14100K/15047K, paused 12ms+2ms, total 32ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 7ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 5ms
01-21 00:43:03.555: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-21 00:43:03.560: E/System(4990): Uncaught exception thrown by finalizer
01-21 00:43:03.560: E/System(4990): java.io.IOException: close failed: EIO (I/O error)
01-21 00:43:03.560: E/System(4990):     at libcore.io.IoUtils.close(IoUtils.java:41)
01-21 00:43:03.560: E/System(4990):     at java.io.RandomAccessFile.close(RandomAccessFile.java:166)
01-21 00:43:03.560: E/System(4990):     at java.io.RandomAccessFile.finalize(RandomAccessFile.java:175)
01-21 00:43:03.560: E/System(4990):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:186)
01-21 00:43:03.560: E/System(4990):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:169)
01-21 00:43:03.560: E/System(4990):     at java.lang.Thread.run(Thread.java:856)
01-21 00:43:03.560: E/System(4990): Caused by: libcore.io.ErrnoException: close failed: EIO (I/O error)
01-21 00:43:03.560: E/System(4990):     at libcore.io.Posix.close(Native Method)
01-21 00:43:03.560: E/System(4990):     at libcore.io.BlockGuardOs.close(BlockGuardOs.java:75)
01-21 00:43:03.560: E/System(4990):     at libcore.io.IoUtils.close(IoUtils.java:38)
01-21 00:43:03.560: E/System(4990):     ... 5 more
01-21 00:43:03.630: D/dalvikvm(4990): GC_CONCURRENT freed 487K, 7% free 14299K/15367K, paused 12ms+3ms, total 29ms
01-21 00:43:03.630: D/dalvikvm(4990): WAIT_FOR_CONCURRENT_GC blocked 9ms
01-21 00:43:03.635: D/AbsListView(4990): Get MotionRecognitionManager
01-21 00:43:03.670: D/SensorManager(4990): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d803c0
01-21 00:43:03.670: D/Sensors(4990): Remain listener = Sending .. normal delay 200ms
01-21 00:43:03.670: I/Sensors(4990): sendDelay --- 200000000
01-21 00:43:03.670: D/SensorManager(4990): JNI - sendDelay
01-21 00:43:03.670: I/SensorManager(4990): Set normal delay = true
01-21 00:43:03.800: D/dalvikvm(4990): GC_CONCURRENT freed 291K, 6% free 14721K/15623K, paused 13ms+15ms, total 54ms
01-21 00:43:03.875: D/dalvikvm(4990): GC_FOR_ALLOC freed 653K, 10% free 14731K/16199K, paused 26ms, total 27ms
01-21 00:43:03.955: D/dalvikvm(4990): GC_FOR_ALLOC freed 642K, 10% free 14730K/16199K, paused 23ms, total 24ms
01-21 00:43:03.965: W/IInputConnectionWrapper(4990): getSelectedText on inactive InputConnection
01-21 00:43:03.970: W/IInputConnectionWrapper(4990): setComposingText on inactive InputConnection 
```

但我认为 I/O 错误与地图无关......

这是截图![在此处输入图像描述](../Images/fb6e843ca6c0062582e5cfd8a80e85e5.png)

有谁知道这里发生了什么？

提前致谢，

塞萨尔。

**状态：已解决**

API关键问题。欲了解更多信息：

[Google Maps Android v2 授权失败](https://stackoverflow.com/questions/13757362/google-maps-android-v2-authorization-failure/14434593#14434593)

# audio - 如何创建 AIFF 文件

> ID：14430718
> 
> 赞同：1
> 
> 时间：2013-01-20T23:49:46.687
> 
> 标签：audio, core-audio, qtkit

我有一些原始声音数据想要制作成 AIFF 文件格式。我知道音频数据的细节。我尝试从音频中创建波形，但没有奏效。OS X 确实具有创建标头的功能，但它直接寻址文件，我可能不想这样做（该功能`SetupAIFFHeader`已弃用且在 64 位代码中不可用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:02:02.210

Apple 的 Core Audio API 将创建数据并将其写入 AIFF 文件和其他格式。它工作得很好，但在我看来，API 很难使用。我将在下面粘贴一些示例代码，但您可能想要更改它。`AudioFileWriteBytes`一次可以写入超过 2 个字节。还有另一个包装器 API，`AudioToolbox/ExtendedAudioFile.h`可让您编写 32 位浮点数之类的格式，并将其转换为基础格式，无论是 AIFF/PCM 还是压缩格式。

```
double sampleRate = 44100;
double duration = ...;
long nSamples = (long)(sampleRate * duration);

// Format struct for 1 channel, 16 bit PCM audio
AudioStreamBasicDescription asbd;
memset(&asbd, 0, sizeof(asbd));
asbd.mSampleRate = sampleRate;
asbd.mFormatID = kAudioFormatLinearPCM;
asbd.mFormatFlags = kAudioFormatFlagIsBigEndian | kAudioFormatFlagIsSignedInteger;
asbd.mBitsPerChannel = 16;
asbd.mChannelsPerFrame = 1;
asbd.mFramesPerPacket = 1;
asbd.mBytesPerFrame = 2;
asbd.mBytesPerPacket = 2;

CFURLRef url = makeUrl("hello.aiff");

AudioFileID audioFile;
OSStatus res;
res = AudioFileCreateWithURL(url, kAudioFileAIFFType, &asbd, 
                             kAudioFileFlags_EraseFile, &audioFile);
checkError(res);

UInt32 numBytes = 2;
for (int i=0; i<nSamples; i++) {
    SInt16 sample = ... // something between SHRT_MIN and SHRT_MAX;
    sample = OSSwapHostToBigInt16(sample);       
    res = AudioFileWriteBytes(audioFile, false, i*2, &numBytes, &sample);
    checkError(res);
}

res = AudioFileClose(audioFile);
checkError(res); 
```

`checkError`断言 res == noErr。`makeUrl`好像：

```
CFURLRef makeUrl(const char *cstr) {
    CFStringRef path = CFStringCreateWithCString(0, cstr, kCFStringEncodingUTF8);
    CFURLRef url = CFURLCreateWithFileSystemPath(NULL, path, 0, false);
    CFRelease(path);
    return url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:11:36.143

尽管我讨厌车轮改造，但我怀疑您最好的选择可能是推出自己的 AIFF 保存程序。

AIFF 是在 Amiga 上使用的旧 Electronic Arts EA-IFF 格式的扩展；它是一系列 4 字节标识符（类似于 FOURCC）、块长度和数据有效负载。Wikipedia 文章内容丰富，并提供了指向其他站点的链接，其中包含有关格式的详细信息。

[http://en.wikipedia.org/wiki/Audio_Interchange_File_Format](http://en.wikipedia.org/wiki/Audio_Interchange_File_Format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T00:54:02.060

我能够编写正确的 AIFF 文件。最后一点是我使用 sizeof() 作为结构的大小，其中大小省略了前八个字节。我确实使用了 Apple 已弃用的 AIFF.h 标头来获取结构，而且似乎 QuickTime X 和 7 都没有读取我在其中设置的元数据。

你可以在[PlayerPRO](http://sourceforge.net/projects/playerpro)的 PlayerPRO 6 分支看到我的工作。它在`PPApp_AppDelegate.m`函数中调用的文件中`-createAIFFDataFromSettings:data:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-25T19:43:24.353

`CoreAudio`下面是一些使用 Apple和`AudioToolbox`macOS 框架创建 AIFF 文件的 C 代码。

```
#include <string.h>
#include <math.h>
#include "CoreAudio/CoreAudio.h"
#include "CoreAudio/CoreAudioTypes.h"
#include "AudioToolbox/AudioToolbox.h"
#include "AudioToolbox/AudioFile.h"

CFURLRef MakeUrl(const char *cstr);
void CheckError(OSStatus res);

AudioStreamBasicDescription asbd;

AudioFileID audioFile;
OSStatus res;

void CheckError(OSStatus result) {
  if (result == noErr) return;
  switch(result) {
    case kAudioFileUnspecifiedError:
      printf("kAudioFileUnspecifiedError");
      break;
    case kAudioFileUnsupportedFileTypeError:
      printf("kAudioFileUnsupportedFileTypeError");
      break;
    case kAudioFileUnsupportedDataFormatError:
      printf("kAudioFileUnsupportedDataFormatError");
      break;
    case kAudioFileUnsupportedPropertyError:
      printf("kAudioFileUnsupportedPropertyError");
      break;
    case kAudioFileBadPropertySizeError:
      printf("kAudioFileBadPropertySizeError");
      break;
    case kAudioFilePermissionsError:
      printf("kAudioFilePermissionsError");
      break;
    case kAudioFileNotOptimizedError:
      printf("kAudioFileNotOptimizedError");
      break;
    case kAudioFileInvalidChunkError:
      printf("kAudioFileInvalidChunkError");
      break;
    case kAudioFileDoesNotAllow64BitDataSizeError:
      printf("kAudioFileDoesNotAllow64BitDataSizeError");
      break;
    case kAudioFileInvalidPacketOffsetError:
      printf("kAudioFileInvalidPacketOffsetError");
      break;
    case kAudioFileInvalidFileError:
      printf("kAudioFileInvalidFileError");
      break;
    case kAudioFileOperationNotSupportedError:
      printf("kAudioFileOperationNotSupportedError");
      break;
    case kAudioFileNotOpenError:
      printf("kAudioFileNotOpenError");
      break;
    case kAudioFileEndOfFileError:
      printf("kAudioFileEndOfFileError");
      break;
    case kAudioFilePositionError:
      printf("kAudioFilePositionError");
      break;
    case kAudioFileFileNotFoundError:
      printf("kAudioFileFileNotFoundError");
      break;
    default:
      printf("unknown error");
      break;
  }
  exit(result);
}

CFURLRef MakeUrl(const char *cstr) {
  CFStringRef path = CFStringCreateWithCString(0, cstr, kCFStringEncodingUTF8);
  CFURLRef url = CFURLCreateWithFileSystemPath(NULL, path, 0, false);
  CFRelease(path);
  return url;
}

int main() {
  double sampleRate = 44100.0;
  double duration = 10.0;
  long nSamples = (long)(sampleRate * duration);

  memset(&asbd, 0, sizeof(asbd));
  // Format struct for 1 channel, 16 bit PCM audio
  asbd.mSampleRate = sampleRate;
  asbd.mFormatID = kAudioFormatLinearPCM;
  asbd.mFormatFlags = kAudioFormatFlagIsBigEndian | kAudioFormatFlagIsSignedInteger;
  asbd.mBitsPerChannel = 16;
  asbd.mChannelsPerFrame = 1;
  asbd.mFramesPerPacket = 1;
  asbd.mBytesPerFrame = 2;
  asbd.mBytesPerPacket = 2;

  CFURLRef url = MakeUrl("sinpos.aiff");
  res = AudioFileCreateWithURL(url, kAudioFileAIFFType, &asbd,
      kAudioFileFlags_EraseFile, &audioFile);

  CheckError(res);

  UInt32 numBytes = 2;
  int freq = 44; // 100 for approx 440Hz, 2940 for 15Hz, 44 for 1000Hz
  for (int i=0; i<nSamples; i++) {
    int x = (i % freq);
    double angle = 2.0*3.1459*x/freq;
    double s = 1.0*32767*sin(angle);
    SInt16 sample = (SInt16) s;
    sample = OSSwapHostToBigInt16(sample);
    res = AudioFileWriteBytes(audioFile, false, i*2, &numBytes, &sample);
    CheckError(res);
  }

  res = AudioFileClose(audioFile);
  CheckError(res);

  exit(0);
} 
```

`Makefile`如下：

```
aiffcreate: aiffcreate.c
    gcc -o $@ $< -framework AudioToolbox -framework CoreFoundation -framework CoreAudio -lm

clean:
    rm *.aiff aiffcreate || true 
```

这可以通过简单地`./aiffcreate`在命令行上发出一个命令来运行，并且将创建一个名为的文件，该文件`sinpos.aiff`是一个持续 10 秒的纯 1000Hz 音调。

# javascript - Facebook 网页错误：应用程序可能无效

> ID：14430720
> 
> 赞同：3
> 
> 时间：2013-01-20T23:50:09.297
> 
> 标签：javascript, facebook

通过控制台，我在 Facebook 网络应用程序中遇到了一个奇怪的错误：

> 为您请求的应用程序获取数据时出现问题。该应用程序可能无效，或者可能存在临时故障。请稍后再试。- oauth:1

切换进入或退出沙盒模式似乎没有帮助。我正在使用 Heroku。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-04T18:58:39.987

当我使用 pageId 而不是 appId 时，这发生在我身上......

```
(function(d, s, id, appId) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=" + appId; //<--passing config value here
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk', config.appId)); //<--I added the extra param here b/c I am loading the config via a xhr. 
```

# .htaccess - Firefox 忽略缓存的 js 和 css

> ID：14430722
> 
> 赞同：1
> 
> 时间：2013-01-20T23:50:28.660
> 
> 标签：.htaccess, firefox, caching

我已将 .htaccess 设置为 7 天后过期的 js 和 css 文件。ETag 关闭，gzip / Deflate 开启。

在我的源 HTML 中有 25 种不同的调用来加载 JS 文件。不是我的设计。这是其中一个调用的示例：

```
<script type="text/javascript" src="content/vendors/jquery/rater/jquery.rater-custom.js"></script> 
```

通过 Firebug 检查的响应标头：

```
HTTP/1.1 200 OK
Date:             Sun, 20 Jan 2013 23:35:42 GMT
Server:           Apache
Last-Modified:    Sun, 20 Jan 2013 22:49:10 GMT
Accept-Ranges:    bytes
Cache-Control:    max-age=604800
Expires:          Sun, 27 Jan 2013 23:35:42 GMT
Vary:             Accept-Encoding
Content-Encoding: gzip
Content-Length:   648
Keep-Alive:       timeout=1, max=95
Connection:       Keep-Alive
Content-Type:     application/x-javascript 
```

还有大量的 CSS 参考。该页面非常慢，我正在尝试使缓存起作用，以加快速度。在第一次加载后，在 IE 9 和 Chrome 上，此页面几乎会立即呈现...我可以看出所有这些文件都从这些浏览器的缓存中拉出。

在 FireFox 上，我无法让浏览器使用缓存的副本。知道我缺少什么或可能发生什么迫使 FireFox 在每次重新加载页面时都请求这些文件的新副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:13:01.630

您检查过您的 Firefox 配置吗？有时人们出于开发原因停用缓存，例如通过开发人员工具栏...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:09:48.867

我不太确定 Firefox 如何处理它所提供的文件的自动缓存，但如果您的目标是通过缓存文件来提高性能，那么实现**ApplicationCache**可能是一个可行的解决方案。

### 应用程序缓存

*   [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)
*   [http://www.sitepoint.com/offline-browsing-in-html5-with-applicationcache/](http://www.sitepoint.com/offline-browsing-in-html5-with-applicationcache/)
*   [http://www.whatwg.org/specs/web-apps/current-work/#applicationcache](http://www.whatwg.org/specs/web-apps/current-work/#applicationcache)

# sql - 将模式修改为第四范式

> ID：14430723
> 
> 赞同：1
> 
> 时间：2013-01-20T23:50:32.100
> 
> 标签：sql, key, database-normalization

我做了下表：

```
 SCHEDULE
  -id_movie
  -id_room
  -date
  -hour 
```

`(Id_room,date,hour)`形成主键。在特定的日期，特定的时间，我在特定的房间里只有一部电影。问题是这个表不是第四范式（4NF）。你能给我一些建议吗？我认为它在 BCNF 中。

该表具有`multivalued`依赖性：`id_room`—>> `hour`。

我需要让这张桌子达到 4NF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:58:28.093

该表在 4NF 中。不存在多值依赖，即元组 (a,b,c) 和 (a,d,e) 的存在不需要 (a,b,e) 和 (a,d,c) 存在。

在具体情况下：

(1, 21/1/13, 5pm) 和 (1, 22/1/13, 7pm) 不需要 (1, 21/1/13, 7pm) 和 (1, 22/1/13, 5pm)；虽然这不是禁止的。

我认为您的困惑源于将日期和时间分成两列；两者都需要识别特定的瞬间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T00:41:31.607

来自维基百科，**[第四范式](http://en.wikipedia.org/wiki/Fourth_normal_form)**

> 一个表在 4NF 中当且仅当，对于它的每一个非平凡的多值依赖项`X->>Y`，`X`是一个超键——也就是说，`X`要么是一个候选键，要么是它的超集。

您说该关系具有`multivalued`依赖关系：`id_room->hour`。

但是`id_room`既不是候选键也不是超集。

因此，在这种情况下，关系不在 4NF 中。

* * *

要使模式 4NF，您可以拆分为两个关系：

```
 SCHEDULE_DATE_MOVIE
  -id_movie  
  -id_room   *
  -date      *

  SCHEDULE_HOUR
  -hour
  -id_room   * 
```

# java - 结果集 Jasper 异常

> ID：14430726
> 
> 赞同：0
> 
> 时间：2013-01-20T23:51:02.037
> 
> 标签：java, jsp, jdbc, resultset

我正在尝试使用以下方法对顶级产品进行投票。

您可以看到，我首先获得了所有产品的列表并将结果存储在结果中，并且对于每个产品，我都获得了投票并将其存储在 results2 中。由于某种原因，尝试`results2.getInt("Id")`. 谢谢

```
public ArrayList<Product> getPollResults() throws ClassNotFoundException, SQLException{
    ArrayList<Product> myProducts = new ArrayList<Product>();
    String query = "SELECT * FROM products";
    connect();        
    PreparedStatement ps = (PreparedStatement) dbConnection.prepareStatement(query);
    ResultSet results = (ResultSet)ps.executeQuery();        
    while(results.next()){
        query= "SELECT COUNT('Votes') AS Votes, pro.Id, pro.ProductDescription, pro.productFileName FROM products pro"
                 +   " JOIN polls poll ON pro.Id = poll.ProductNumber"
                   + " WHERE pro.Id = '"+ results.getInt("Id") +"'";
        ps = (PreparedStatement) dbConnection.prepareStatement(query);
        ResultSet results2 = (ResultSet)ps.executeQuery();   

        myProducts.add(new Product(results2.getInt("Id"), results2.getString("pro.ProductDescription"), results2.getString("pro.productFileName"), results2.getInt("Votes")));
    }        
    disconnect();   
    return myProducts;
} 
```

错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /polls.jsp at line 24

21:             </div>
22:             <div id="main-container">
23:                 <%db.DBConnection db = new  db.DBConnection(); 
24:                 ArrayList<Product> myProducts =db.getPollResults();
25:                 %>  
26:                 <h1>Polls</h1>
27:                   <form id="Gadgets" action="Gadgets.jsp" method="post"> 
```

# javascript - emberjs 数组控制器问题

> ID：14430727
> 
> 赞同：0
> 
> 时间：2013-01-20T23:51:05.123
> 
> 标签：javascript, ember.js

我是 Ember 的新手，遇到了问题。我希望用户能够选择多个工作站，当他们点击下一步按钮时，我希望控制器创建与用户选择的数量相等的对象。一旦他们被带到下一个屏幕，我想查看附加一些 div，其中的问题等于用户选择的数字。

我有这个 app.js：

```
//Initialize the application
App = Ember.Application.create({
    rootElement: '#main'
});
//Initialize the data model

App.CustomerController = Ember.Object.extend({
    first: null,
    last: null,
    email: null,
    phone: null,
    clinic: null,
    number: null
});

App.Workstation = Ember.Object.extend({
    id: null,
    title: null,
    newOrExisting: null,
    cabling: null
});

App.workstationController = Ember.ArrayController.create({
    content: [],
    num: null,
    init: function() {
        this.set('content',[]);
        var num = this.get('num');
        var tempId = Date.now();
        var ws = App.Workstation.create({
            id: tempId
        });
        this.pushObject(ws);
    }

});

App.selectNoComputers = ["1", "2", "3", "4", "5"];
App.workstationSelect = ["Counter 1", "Counter 2", "Counter 3", "Counter 4", "Office 1", "Office 2", "Office 3"];
App.yesNo = ["New", "Existing"];

App.Router.map(function(match) {
  match("/").to("captcha");
  match("/customer").to("customer");
  match("/wsnum").to("computers");
  match("/overview").to("overview");
});

App.CaptchaRoute = Ember.Route.extend({
    renderTemplate: function() {
    this.render('captcha');
  }
});

App.CustomerRoute = Ember.Route.extend();
App.ComputersRoute = Ember.Route.extend();
App.OverviewRoute = Ember.Route.extend({

});

App.initialize(); 
```

这对于我的html：

```
<script type="text/x-handlebars" data-template-name="overview">
<div class="navbar">
    <div class="navbar-inner">
        <div class="progress-bar-label-div">
            Progress: 
        </div>
        <div class="progress-bar-div">
            <div class="progress progress-striped">
                <div class="bar" style="width:60%;"></div>
            </div>
        </div>
        <div class="btn-group pull-right">
            {{#linkTo "computers" class="btn"}}
                Prev
            {{/linkTo}}

        </div>
    </div>
</div>
<div class="row-a top">
    <div class="pull-left" >
        <h3>Workstation Overview</h3>
    </div>
    <div class="pull-right">

    </div>
</div>
{{#each App.workstationController}}
    <div class="workstation-b">
        <div class="row-b">
            <div class="pull-left workstation-title" >
                <h4>{{id}}</h4>
            </div>
            <div class="pull-right form-inputs input-text">
                <a class="btn btn-primary" >
                    Start
                </a>
            </div>
        </div>
        <div class="row-b">
            <div class="pull-left questions">
                What station will this be?
            </div>
            <div class="pull-right form-inputs input-text">
                {{view Ember.Select prompt="Please Select" contentBinding="App.workstationSelect"}}
            </div>
        </div>
        <div class="row-b">    
            <div class="pull-left questions">
                Is this computer a new purchase or replacing and existing workstation?
            </div>
            <div class="pull-right form-inputs input-text">
                {{view Ember.Select prompt="Please Select" contentBinding="App.yesNo"}}
            </div>
        </div>
    </div>
{{/each}}
</script> 
```

我敢肯定我错过了一些非常简单的东西，但感谢您提供任何帮助。

[我整理了一个小提琴来说明我的问题。](http://jsfiddle.net/mysticgohan53/xtNXw/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:05:30.050

工作小提琴：http: [//jsfiddle.net/mgrassotti/xtNXw/3/](http://jsfiddle.net/mgrassotti/xtNXw/3/)

相关更改：添加了一个观察者来监听`num`属性的更改。当它改变时，内容数组被重置，然后创建适当数量的空白工作站对象。

```
App.workstationController = Ember.ArrayController.create({
    content: [],
    num: null,
    init: function() {
        this.set('content',[]);
    },
    addBlankWorkstation: function() {
      var tempId = Date.now();
      var ws = App.Workstation.create({
        id: tempId
      });
      this.pushObject(ws);
    }
});

App.workstationController.addObserver( 'num', function() {
  var num = this.get('num');
  this.set('content',[]);
  for (var i=0;i<num;i++) { 
    this.addBlankWorkstation();
  }
}); 
```

我犹豫在`working fiddle`上面说，因为有很多东西可能值得重构。您会发现遵循 ember 命名约定可以降低大部分复杂性。建议查看最新指南以获取更多详细信息。

# r - 查找具有特定参数的函数

> ID：14430728
> 
> 赞同：16
> 
> 时间：2013-01-20T23:51:11.407
> 
> 标签：r, function, arguments

如何找到所有具有特定参数的函数的名称和位置？有没有办法在全局环境、附加包和已安装包中找到它们的功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T00:18:13.973

我假设你问这个问题只是为了不失去[本很好的答案。](https://stackoverflow.com/questions/14426033/range-on-a-field-containing-nas/14426041#14426041) 在这里，我稍微修改了 Ben 的答案以搜索任何参数：

```
uses_arg <- function(x,arg) 
  is.function(fx <- get(x)) && 
  arg %in% names(formals(fx)) 
```

例如获取带`na.rm`参数的函数：

```
basevals <- ls(pos="package:base")      ## package name : here I use the base package
basevals[sapply(basevals,uses_arg,'na.rm')] 
```

**编辑**

更好地与以下`name`参数`ls`结合使用 `asNamespace`：

```
basevals  <- ls(asNamespace('base'))
basevals[sapply(basevals,uses_arg,'na.rm')] 
```

# android - AchartEngine 注释

> ID：14430730
> 
> 赞同：2
> 
> 时间：2013-01-20T23:51:32.013
> 
> 标签：android, annotations, achartengine

我到处看，我能找到的唯一信息是通过以下代码添加它们

```
series.addAnnotation("Hello!!", 1, 1); 
```

但是，当我在我的代码中尝试它（使用正确的系列名称）时，我收到一条错误消息，指出不支持 addAnnotation。有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:19:26.647

You must download a recent version of the library. For example, get the night build from [here](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/).

In your code, replace the last line (the one where you return the chart view) with:

```
XYMultipleSeriesDataset dataset = buildBarDataset(titles, values);
XYSeries series = dataset.getSeriesAt(0);
series.addAnnotation("Vacation", 6, 30);
return ChartFactory.getBarChartView(context, dataset, renderer, Type.STACKED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:57:26.517

这是代码...

```
public View getView(Context context) {

    String[] titles = new String[] { "2008", "2007" };
    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] { 240, 210, 60, 40 });
    values.add(new double[] { htmlHelper.grec, htmlHelper.gwhite, htmlHelper.gim, htmlHelper.gfit });
    int[] colors = new int[] { Color.rgb(255, 255, 255),
            Color.rgb(25, 25, 112) };
    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);

    switch (context.getResources().getDisplayMetrics().densityDpi) {

    /* Done*/
    case DisplayMetrics.DENSITY_XHIGH:
        renderer.setAxisTitleTextSize(29);
        renderer.setChartTitleTextSize(60);
        renderer.setLabelsTextSize(29);
        renderer.setLegendTextSize(50);
        renderer.setChartValuesTextSize(40);
        break;

    /*done*/
    case DisplayMetrics.DENSITY_HIGH:
        renderer.setAxisTitleTextSize(15);
        renderer.setChartTitleTextSize(47);
        renderer.setLabelsTextSize(19);
        renderer.setLegendTextSize(1);
        renderer.setChartValuesTextSize(40);
        break;

    case DisplayMetrics.DENSITY_LOW:
        renderer.setAxisTitleTextSize(24);
        renderer.setChartTitleTextSize(25);
        renderer.setLabelsTextSize(9);
        renderer.setLegendTextSize(10);
        renderer.setChartValuesTextSize(20);
        break;

    default:
        renderer.setAxisTitleTextSize(39);
        renderer.setChartTitleTextSize(35);
        renderer.setLabelsTextSize(20);
        renderer.setLegendTextSize(2);
        renderer.setChartValuesTextSize(40);
        break;
    }

    setChartSettings(renderer, "Gym Attendance", "", "", 0.5, 12.5, 0,
            24000, Color.BLACK, Color.BLACK);
    renderer.getSeriesRendererAt(0).setDisplayChartValues(false);
    renderer.getSeriesRendererAt(1).setDisplayChartValues(true);
    renderer.setShowLegend(false);
    renderer.setMargins(new int[] { 80, 10, 60, 10 });
    renderer.addXTextLabel(1, "Rec. Hall" + "\n" + ce);
    renderer.addXTextLabel(2, "White" + "\n" + "Building" + "\n"
            + wh);
    renderer.addXTextLabel(3, "IM" + "\n" + "Building" + "\n" + imm);
    renderer.addXTextLabel(4, "Fitness Loft" + "\n" + fi);
    renderer.setXLabelsColor(Color.rgb(0, 0, 0));
    renderer.setYLabelsColor(0, Color.BLACK);
    renderer.setYLabels(10);
    renderer.setXLabels(0);
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(5);
    renderer.setYAxisMin(0);
    renderer.setYAxisMax(250);
    renderer.setAxesColor(Color.BLACK);
    renderer.setXLabelsAlign(Align.CENTER);
    renderer.setYLabelsAlign(Align.LEFT);
    renderer.setPanEnabled(false, false);
    // renderer.setZoomEnabled(false);
    renderer.setZoomRate(1.1f);
    renderer.setBarSpacing(0.5f);
    renderer.setApplyBackgroundColor(true);
    renderer.getSeriesRendererAt(1).setGradientEnabled(true);
    renderer.getSeriesRendererAt(1).setGradientStart(0,
            Color.rgb(192, 192, 192));
    renderer.getSeriesRendererAt(1).setGradientStop(45,
            Color.rgb(25, 25, 112));
    renderer.setBackgroundColor(Color.rgb(220, 220, 220));
    renderer.setMarginsColor(Color.rgb(248, 248, 255));
    renderer.setOrientation(Orientation.HORIZONTAL);
    renderer.setZoomEnabled(false, false);

    return ChartFactory.getBarChartView(context,
            buildBarDataset(titles, values), renderer, Type.STACKED);

} 
```

非常感谢您的关注！起初，我在带有文本视图的框架布局中使用了图形，但是一旦我开始在不同的屏幕尺寸和像素密度上进行测试，它就不起作用了。

# php - php从opendir获取描述

> ID：14430734
> 
> 赞同：0
> 
> 时间：2013-01-20T23:51:56.787
> 
> 标签：php, arrays, opendir

此 php 代码使用 opendir() 显示文件夹中的文件数组。

**问题：** 此代码按原样工作，但我想做的是也显示文件的描述。

我在代码中的 url 中添加了 $description：

```
$result .= '<h6><a href="../folder/'.$file.'">'.$title.'</a></h6><p>$description</p><p><a href="../folder/'.$file.'">'.$file.'</a></p>'; 
```

显示

**文件名**

$描述

**文件名.php**

**问题：**我不知道如何调用函数来获取描述。

```
<?php 

if ($handle = opendir('../folder/')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != ".." && $file != 'index.php') {
            $fileTab[] = $file;
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach($fileTab as $file) {
        $title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));
        $result .= '<h6><a href="../folder/'.$file.'">'.$title.'</a></h6><p>$description</p><p><a href="../folder/'.$file.'">'.$file.'</a></p>';
    }
}
?>
<?=$result?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:33:36.547

好的！

如我所见，您希望循环显示项目并使用标题和描述有序地编写它们。在这一点上，我认为您需要一个集成到数据库中的适当系统。

简单地;

```
// table: items
id | title     | description
-----------------------------------
1  | Headaches | Lorem ipsum dolor... 
```

如果这不适合您，那么您可以这样做（但这并不方便！），您可以将数据保存在文件夹目录中的 .txt 文件中，例如；

```
// folder/headaches.txt
Headaches|||What can you do to stay healthy, your...

// php
$files = glob("folder/*.txt");
foreach ($files as $file) {
    $info = pathinfo($file);
    $filename = $info['filename'];
    $contents = file_get_contents('descriptions/'. $filename .'.txt');
    list($title, $description) = explode('|||', $contents, 2);
    $result .= sprintf('<h6><a href="../folder/%s">%s</a></h6><p>%s</p><p><a href="../folder/%s">%s</a></p>',
                            $filename, $title, $description, $filename, $filename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:59:25.113

正如 qeremy 所说， $description 在哪里定义？即使 $description 在其他地方分配了一个值，它也永远不会显示为变量内容，因为您将字符串包含在单引号`''`中。如果您希望 PHP 将变量解析为变量值（而不是将变量名解析为字符串），您需要使用双引号`""`，或者将字符串打断并包括变量名称，例如：

```
$result .= '<h6><a href="../folder/'.$file.'">'.$title.'</a></h6><p>'.$description.'</p><p><a href="../folder/'.$file.'">'.$file.'</a></p>'; 
```

# android - 铃声反复播放（无限循环）

> ID：14430737
> 
> 赞同：6
> 
> 时间：2013-01-20T23:52:00.377
> 
> 标签：android, android-mediaplayer, ringtone

`RingtoneManager.TYPE_NOTIFICATION`我有一个 Android 应用程序，当某些事件被发送到广播接收器时，它会播放通知铃声 ( )。

播放铃声的代码基本上是这样的：

```
 onReceive(Context context, Intent intent)
    {
        ...
        Uri ringtoneUri = someFunctionToLookupAValidNotificationRingtoneUri();
        ...
        Ringtone tone = RingtoneManager.getRingtone(context, uri);
        Log.v(TAG, "About to play ringtone");
        tone.play();
    } 
```

运行此代码时，每隔一段时间，铃声就会无限地一遍又一遍地播放。有时当大量事件聚集在一起时会发生这种情况，但当只有一个事件进入时也会发生这种情况。日志消息（和调试）验证`tone.play()`每个事件只发生一次调用，并且没有无限的事件流。

停止无限循环的唯一方法是杀死我的应用程序。

几乎每隔一段时间，Android 就会忘记刷新声音输出缓冲区，因此它会不断循环播放里面的任何内容。

任何想法如何调试和/或解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-29T23:42:32.070

我有一个类似的问题。原来，当*铃声*播放时，它会无限重复直到停止，而当播放*通知声音*时，它只会播放一次。所以我的猜测是你的情况的区别在于是否选择了铃声或通知声音`someFunctionToLookupAValidNotificationRingtoneUri()`。由于您没有提供代码`someFunctionToLookupAValidNotificationRingtoneUri()`，我不知道那里发生了什么。

## 选择通知声音

如果您使用铃声选择器让用户选择通知声音，则此代码将启动意图选择*通知声音*而不是铃声：

```
 private void PickANotificationSound() {
        Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);

        // We want a notification sound picked. If we don't add this to the
        // intent, a ringtone is picked; this means that when it is played,  
        // it will keep on playing until it is explicitly stopped. A  
        // notification sound, however, plays only once.
        intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,
            RingtoneManager.TYPE_NOTIFICATION);

        // Start the intent to pick a notification sound. The result will show 
        // up later when onActivityResult() is called.
        startActivityForResult(intent, REQUESTCODE_NOTIFICATION_SOUND);
    } 
```

where`REQUESTCODE_NOTIFICATION_SOUND`只是一个具有任何名称和值的局部常量，用于标识请求：

```
 private static final int REQUESTCODE_NOTIFICATION_SOUND = 1; 
```

像这样的`onActivityResult()`回调函数将获取通知声音 URI 并播放它：

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, 
            Intent data) {

        if (requestCode == REQUESTCODE_NOTIFICATION_SOUND) {
            try {
                if (resultCode == RESULT_OK) {
                    Uri ringtoneUri = data.getParcelableExtra(
                            RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
                    if (ringtoneUri != null) {
                        PlayRingtoneOrNotificationSoundFromUri(ringtoneUri);
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else
            super.onActivityResult(requestCode, resultCode, data);
    }

    private void PlayRingtoneOrNotificationSoundFromUri(Uri ringtoneUri) {

        Ringtone ringtone = RingtoneManager.getRingtone(
            getApplicationContext(), ringtoneUri);

        if (ringtone != null) {
            ringtone.play();
        }
    } 
```

因为我们在意图中说过要选择通知声音，所以生成的声音是通知声音，因此在调用 后只播放一次`ringtone.play()`。

如果我们有意选择一个铃声，像这样：

```
 intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,
        RingtoneManager.TYPE_RINGTONE); 
```

选择器将返回一个铃声，该铃声将在`ringtone.play()`通话后无限期播放——直到被停止`ringtone.stop()`或应用程序被终止。

## “铃声”的两种含义

请注意，Android API 中的术语增加了混淆，因为“铃声”一词有两种不同的含义（[参见 RingtoneManager 的文档](http://developer.android.com/reference/android/media/RingtoneManager.html)）：

1.  任何旨在引起用户注意的声音，例如电话响铃时重复播放的声音、通知声音或类似声音。名称中使用了这个含义`RingtoneManager`。

2.  电话响铃时重复播放的声音，*而不是*通知声音或类似声音。这个意思用在名字`TYPE_RINGTONE`中`RingtoneManager.TYPE_RINGTONE`。

# c++ - 如何知道指定的文件是否被正确读取？

> ID：14430738
> 
> 赞同：0
> 
> 时间：2013-01-20T23:52:22.053
> 
> 标签：c++, fstream, ifstream

为什么在读取指定文件的最后一行后`ifstream`设置为`failbit`？`1`如何知道指定的文件是否被正确读取？

```
bool read_csv_file(const char* filename, vector<string>& lines, bool adding = false)
{
    if( !adding ) lines.clear();

    ifstream csvfile;
    csvfile.open(filename);

    if( csvfile.is_open() )
    {
        string line;
        while( csvfile.good() && getline(csvfile,line) )
        {
            lines.push_back(line);
            cout << "fail: " << csvfile.fail() << endl;
        }
        cout << "fail: " << csvfile.fail() << endl;
        csvfile.close();
        return (!csvfile.fail());
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:54:02.790

运行完文件末尾后会设置失败位。一旦发生这种情况，您就不能尝试解释输入操作的结果。不过，这很好，并且`getline`在仍有*任何*数据要读取时不会设置失败位。因此，以下标准循环[提取*所有*行](http://cdn.memegenerator.net/instances/400x/33695262.jpg)：

```
for (std::string line; std::getline(csvfile, line); )
{
    // process "line"
}

// all done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:20:58.620

阅读最后一行（或任何一行）后可以设置的唯一原因`failbit`是库中是否有错误，我真的不相信。如果`failbit`已设置，则表示您*没有*阅读任何内容。在您的情况下，当您处于循环中时，它永远不会被设置；如果它被设置，`getline`将评估为`false`，并且您不会进入循环。当然，循环正是因为`getline` 失败而终止（或者会失败——通常，在输入之前你*不会*测试 ，如果你这样做了，不管测试是否失败，都`good`认为 已经设置了）。`failbit`

这类事情的通常模式是：

```
while ( someInput ) {
    //  ...
}
if ( csvfile.bad() ) {
    //  Serious error (disk read error, etc.)...
} else if ( ! csvfile.eof() ) {
    //  Formatting error...
} else {
    //  Normal end of file...
} 
```

但是， When `someInput`is`std::getline()`永远不会因为格式错误而失败，因此`else if`上述情况永远不会成立（许多代码将硬盘错误视为文件结尾，因此`if`也忽略了该部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T00:04:23.520

太检查错误读取，您必须`badbit`使用`stream.bad()`.

`Failbit`表示操作逻辑失败，并且显然`getline`在达到 EOF 时设置它（在我的机器上确认）。

# razor - 在 HTTP POST 时无法解析 Razor DropdownListFor(m => ListDictionary[key])

> ID：14430746
> 
> 赞同：0
> 
> 时间：2013-01-20T23:54:12.417
> 
> 标签：razor, http-post, html.dropdownlistfor

我有一个视图模型属性来保存下拉选择值列表，例如：

```
 private ListDictionary _claimDropdownValueCollection = new ListDictionary();
  public ListDictionary ClaimDropdownValueCollection { get { return _claimDropdownValueCollection; } set { _claimDropdownValueCollection = value; } } 
```

在执行 GET 时，我也在我的视图模型中循环另一个 ListDictionary，其中包含“下拉类型”名称：

```
@foreach (System.Collections.DictionaryEntry de in Model.CCSetting_ClaimDropdownTypeCollection) {
                        <div class="formRow">
                            <label>@EverythingToDoWith_CCSetting_ClaimDropdownTypes.getDropdownTypeName(Model.ccClaim.clientID, Convert.ToInt32(de.Key))</label>
                            <div class="formRight searchDrop">
                                @Html.DropDownListFor(m => m.ClaimDropdownValueCollection[@de.Key], (IEnumerable<SelectListItem>) @de.Value, new { @class = "chzn-select", @data_placeholder="Choose an option...", @style="width: 350px;" })
                            </div>
                            <div class="clear"></div>
                        </div>
                    } 
```

所以基本上，这会加载一堆下拉列表，它们的“标签”是根据字典中的键打印的。每个下拉列表的“值”是从每个字典的 VALUE 中获得的，每个字典都包含一个 IENUMERABLE。

到目前为止一切都很好。现在用户在每个下拉列表中进行选择，然后我执行 HTTP POST。在浏览器开发者工具中，我看到以下数据被发回：

```
ClaimDropdownValueCollection[1]:2
ClaimDropdownValueCollection[2]:5
ClaimDropdownValueCollection[3]:
ClaimDropdownValueCollection[4]:11 
```

所以这是 4 个带有键 1、2、3、4 的下拉菜单（为了我的示例，我的键会更复杂，这里是简单的键），四个中有三个有选择，所以我传回所选 ID 的 2、5 和 11。

但问题是，当我在接收发布数据的 [HttpPost] 控制器方法中进行调试时，我无法将此数据视为视图模型 listdictionary 对象的一部分。这表明“ClaimDropdownValueCollection”属性为空。

我希望能够说类似的话：

```
foreach (DictionaryEntry de in vm.ClaimDropdownValueCollection) {
//do something here with de.Key and de.Value                        
                    } 
```

那么我在 RAZOR 代码中做错了什么？...帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:19:57.853

问题在于 HTML 帮助程序以及我如何发回。以下是我解决它的方法（感谢我的 CTO！）：

创建了我的视图模型属性，该属性将作为填充资源：

```
Dictionary<int, List<SelectListItem>> CCSetting_ClaimDropdownTypeCollection 
```

使用相同的键创建另一个字典，其值将是用户选择：

```
Dictionary<int, int> ClaimDropdownValueCollection 
```

现在在 RAZOR 方面，我正在做这样的事情（注意使用 HTML.Hidden 和 HTML.Dropdown 而不是 HTML.DropdownFor）：

```
@foreach (var de in Model.CCSetting_ClaimDropdownTypeCollection) {
                        <div class="formRow">
                                                            <div class="formRight searchDrop">
@Html.Hidden("ClaimDropdownValueCollection[" + @de.Key + "]", @de.Key)
                                @Html.DropDownList("ClaimDropdownValueCollection[" +  @de.Value + "]", @de.Value, new { @class = "chzn-select", @data_placeholder="Choose an option...", @style="width: 350px;" })
                            </div>
                            <div class="clear"></div>
                        </div>
                    } 
```

很抱歉没有以更好的方式表达我的问题，我可能是在几个小时的沮丧之后发布的，最终在措辞方面做得不好。为这个问题获得“风滚草”徽章促使我回来发布解决方案。好的关闭，希望有一天有人遇到这个！

# java - 256 个 java 字节码如何转换为 java 所做的一切（图形、IO 等）

> ID：14430749
> 
> 赞同：4
> 
> 时间：2013-01-20T23:54:46.783
> 
> 标签：java, bytecode

我正在查看 java 字节码列表和 Wikipedia，它们似乎都是基本操作（分支、推送、弹出、强制转换等）。许多文章使用这些基本示例。但是当我从控制台读取一行或创建一个新的 JButton 时会发生什么？打开端口的字节码在哪里？

我相信我看到了一些关于“进行系统调用”的东西（虽然我今天没有找到它，浏览了几次列表）。这些“特殊”调用是否有自己的代码，由虚拟机直接委托（不知道从技术上怎么说）给操作系统？我知道有一些方法可以打开字节码，但我正在寻找一个一般性的解释，而不是数周的学习高级字节码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T00:10:06.387

没有用于打开端口或在屏幕上绘制图形的字节码。有执行这些任务的类。这些类具有本地方法，这些方法是用 C（或任何其他可以编译为本地库的语言）编写的方法，并且由于它们是本地的，它们可以访问操作系统的网络和图形库来执行这些任务。所以你正在实例化这些类并调用它们的一些方法。Java Byte Code 提供用于实例化类和调用对象方法的字节码。如果 JVM 发现这是一个本地方法，它将调用属于该方法的本地代码，并且该本地代码几乎可以做任何 C 或 C++ 程序可以做的事情。

因此，例如，如果您`System.out.println`在 Java 中调用，则*大致*会发生以下情况：

`System`是一个带有静态变量的类`out`。该变量指向一个类型的对象，该对象在您的方法执行`java.io.PrintStream`之前已经由 JVM 创建。变量初始化如下`main`：`out`

```
FileOutputStream fdOut = new FileOutputStream(FileDescriptor.out);
setOut0(new PrintStream(new BufferedOutputStream(fdOut, 128), true)); 
```

方法 setOut0 定义为

```
private static native void setOut0(PrintStream out); 
```

这意味着 setOut0 是一种本地方法，用 C 或其他可以编译并链接到本地​​库的语言编写，尽管至少 Java 和该库之间的接口通常是用 C 编写的。

Java 将在所有加载的库中搜索一个带有 name 的符号（在这种情况下，符号表示函数名）`Java_java_lang_System_setOut0`，这是`Java_ClassName_MethodName`并调用它。我为此方法找到的示例 C 代码如下所示：

```
JNIEXPORT void JNICALL
Java_java_lang_System_setOut0(JNIEnv *env, jclass cla, jobject stream)
{
    jfieldID fid =
        (*env)->GetStaticFieldID(env,cla,"out","Ljava/io/PrintStream;");
    if (fid == 0)
        return;
    (*env)->SetStaticObjectField(env,cla,fid,stream);
} 
```

然而，这并不是真正的魔法，真正的魔法发生在别处。`PrintStream.write()`来电`BufferedWriter.write()`。此方法再次调用`OutputStreamWriter.write()`（不是直接调用，但迟早会在那里结束）并且此方法调用`StreamEncoder.write()`. 哇，追踪那个电话越来越难了。`StreamEncoder`电话`BufferedOutputStream.write()`，这个电话，`FileOutputStream.write()`这个电话`FileOutputStream.writeBytes()`，最后，终于我们到了！`FileOutputStream.writeBytes()`是*本机方法*。它看起来像这样：

```
JNIEXPORT void JNICALL
Java_java_io_FileOutputStream_writeBytes(JNIEnv *env,
    jobject this, jbyteArray bytes, jint off, jint len) {
    writeBytes(env, this, bytes, off, len, fos_fd);
} 
```

所以它调用了一个名为 writeBytes 的函数，这个函数看起来会根据你的操作系统而有所不同，例如这是 Windows、Linux 还是 OS X。在 UNIX/Linux 系统上，这个函数可能会调用另一个函数（等等），但在某个地方是简单的 C 函数调用，用于将内容写入 C`FILE *`流或文件描述符（这只是`int`C 中的一个）。所以它可能是一个`printf()/fprintf()`或一个`puts()/fputs()`写入到的调用`stdout`或一个写入到的`write()`调用`STDOUT_FILENO`。在 Windows 中，它通常是对 的调用`WriteFile()`，尽管它也可能是 a `printf()/fprintf()`（这些是 C 标准函数，所有平台都必须支持它们）。

# html - 在响应式 html/css 网站上左对齐徽标和右对齐导航

> ID：14430754
> 
> 赞同：0
> 
> 时间：2013-01-20T23:56:14.123
> 
> 标签：html, css, navigation, responsive-design, graphical-logo

我正在尝试左对齐我的徽标并右对齐我的导航。我正在为响应式页面使用“[骨架](http://www.getskeleton.com/)”样板。

当我向右浮动导航时，徽标和导航不会保持在同一条“线上”。在将其添加到此示例之前，我从 CSS 中删除了浮动右规则。

这是我正在使用的一些 CSS，我认为问题出在哪里，其余的都在[此处列出](http://jsfiddle.net/xxuhR/1/)

```
.nav {
margin: 0px;
padding: 0px;
white-space: nowrap;
list-style-type: none;

}
.logo {

}
.nav li {
display:inline;
}
.nav li a {
 padding:0.2em 1em;
 background:#;
 color:#000;
text-decoration:none;
border:0px solid #000;
}
.nav li a hover{
background:#08c;
color:#fff;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:17:28.297

您缺少分别从左右元素中删除边距的`alpha`和类。`omega`

HTML 应如下所示：

```
<div class="header">
       <div class="two-thirds column alpha">
         <div class="logo"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQNGEBMvQ55sHEC0xWxvpkyW-H_ZylS9Fk5ktg3OLKLS3w6yCr29w" width="47" height="36"></div>
      </div>
      <div class="one-third column omega">
        <div class="nav">
          <ul><li><a href="hire.html">hire</a></li><li><a href="bio.html">Bio</a></li><li><a href="contact.html">Contact</a></li><li><a href="blog.html">blog</a></li></ul>
        </div>
      </div> 
```

这是带有示例代码的代码笔：http: [//cdpn.io/rHBio](http://cdpn.io/rHBio)

**编辑**

进一步解释（即使在downvote #bitter之后）。

您在两行单独导航的原因是因为在以下媒体查询之后，容器和所有列都设置为 300px。

```
 @media only screen and (max-width: 767px) {
        .container { width: 300px; }} 
```

对于 480 像素到 767 像素之间的任何设备，还有另一个媒体查询会覆盖该媒体查询，并提供 420 像素的宽度。

```
 @media only screen and (min-width: 480px) and (max-width: 767px) {
        .container { width: 420px; } 
```

因为使用的类`two-thirds`和`one-third`，现在设置为 420px 或 300px ，它们占据了整行（它们变成堆叠/线性）。

要覆盖它并将它们放在同一行上，您需要通过额外的 CSS 规则来定位这些元素，以将它们的宽度减小到 100/200px 或 120/300px 以适应媒体查询。

# python - 如何在 Python MMO 游戏中最有效地存储玩家数据？

> ID：14430762
> 
> 赞同：1
> 
> 时间：2013-01-20T23:56:57.643
> 
> 标签：python, storage, game-development, mmo

我正在开发一个 MMO 射击游戏，类似于Python 2.7[中的狂神王国游戏。](http://www.realmofthemadgod.com/)

游戏的玩家数据将包括游戏中每个玩家所穿的装备、玩家的姓名等，这样当他们注销角色时，他们的玩家数据将被永久保存，并在他们登录时再次，他们的玩家数据将被加载到游戏中。为了安全起见，我估计唯一玩家数据条目的数量将是 1,000,000 个条目。

将所有玩家数据存储在一个巨大的 txt 文件、26 个文件或 26*26 个文件中是否更有效？安排这些条目的最佳方式是什么？

示例条目：

```
"player1023"|13|1023|482|9|1|4|5|9|3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:02:11.563

如果你不想使用数据库（这里最自然），我建议在文件中使用固定宽度的记录（假设所有行由 80 个字符组成。这样你可以实现非常快速的二进制搜索来查找行，您可以覆盖单行而无需重写整个文件。

# java - 枚举编译错误中的java匿名类

> ID：14430763
> 
> 赞同：0
> 
> 时间：2013-01-20T23:56:58.693
> 
> 标签：java, generics, enums, anonymous-inner-class

我可以解决这个问题，但我无法理解，所以我要求一些解释（也许还有一个更好的问题标题）。

请考虑这一点：

```
public class TBGService {
    // TBGObject is an abstract base class which is extended by model classes
    public <T> T doGet(TBGObject model) throws TBGServiceException {
        String uri = model.buildUrl(repository) + model.getObjectKey();
        GetMethod method = new GetMethod(uri); 
        T returned = execute(method, credentials, model.getClass());
        return returned;
    }
} 
```

和这个：

```
public enum TBGTaskAttributes {
    private TBGTaskAttributes(String id, String type, String label, Object... flags) {
        builder = new TaskAttributeBuilder();
        builder.withId(id).withLabel(label);
        for (Object flag : flags) {
            processFlag(flag);
        }
    }

    public abstract String getValueFromIssue(TBGIssue issue);

    public abstract void setValueInIssue(TBGIssue issue, String value);

} 
```

当我编写这段代码来定义一个枚举项时：

```
PROJECT(TaskAttribute.PRODUCT, TaskAttribute.TYPE_SINGLE_SELECT, "Project", new OptionProvider() {
    @Override
    public Set<Entry<String, String>> getOptions(TaskRepository repository) {
        try {
            List<TBGProject> list = TBGService.get(repository)
                .doGet(new TBGProjects()).getProjects();
            [...]
            return map.entrySet();
         } catch (TBGServiceException e) { [...] }
         return null;
    }
}) {
    @Override
    public String getValueFromIssue(TBGIssue issue) {
        return issue.getProjectKey();
    }
    @Override
    public void setValueInIssue(TBGIssue issue, String value) {
        issue.setProjectKey(value);
    }
},
[... other items ...] 
```

我得到编译器错误（eclipse自动完成也不起作用）：

```
The method getProjects() is undefined for the type Object 
```

如果我将 doGet 方法悬停，日食将其显示为如下定义：

```
 <Object> Object TBGService.doGet(TBGObject model) 
```

在其他地方，悬停将签名正确显示为：

```
 <TBGProjects> TBGProjects TBGService.doGet(TBGObject model) 
```

使用参数调用时`new TBGProjects()`。

只是改变：

```
List<TBGProject> list = TBGService.get(repository)
    .doGet(new TBGProjects()).getProjects(); 
```

和：

```
TBGProjects projects = TBGService.get(repository).doGet(new TBGProjects());
List<TBGProject> = projects.getProjects(); 
```

让它工作。但是这里发生了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:00:09.240

`T`Java根据您将方法的返回值分配给的内容来 推断类型。

如果您不将返回值分配给任何东西，Java 不知道`T`应该是什么。

要解决此问题，您可以将参数更改为类型，以便 Java 可以从您传递的参数`T`中推断：`T`

```
public <T extends TBGObject> T doGet(T model) throws TBGServiceException { 
```

# java - Eclipse Web 服务客户端项目类型？

> ID：14430764
> 
> 赞同：0
> 
> 时间：2013-01-20T23:57:02.503
> 
> 标签：java, eclipse, web-services, project

我在 Eclipse 中创建了一个基本的 Java 项目，然后使用 File->New "Web Service Client" 向导添加了一个 Web Service Client。

这正确生成了我的存根，并且我能够连接到 Web 服务，但是，我在运行时收到以下错误/警告：

*警告：找不到所需的类（javax.activation.DataHandler 和 javax.mail.internet.MimeMultipart）。附件支持被禁用。*

然后我尝试使用动态 Web 项目（而不是基本的 Java 项目）创建客户端，错误消失了。

这显然是因为动态 Web 项目包含基本 Java 项目中不包含的库。

我的问题是，为什么我需要制作一个动态 Web 项目（看起来有点矫枉过正）只是为了制作一个 Web 服务客户端？您会推荐使用一些*更简单*的项目类型吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:44:12.450

Since it is just a warning, you could leave it as is. To make it go away, you could look up the jars that contain those classes and add them to your project.

I think we normally use a JavaEE project type, and that may bring in some extra library files. I wouldn't normally think you need a dynamic web project to make the error go away.

The only difference in the project type is the Libraries included automatically for you when you start them. You can start any project as a Java project and then in the Project Properties, Build Path, Libraries tab add additional libraries to the project.

Both of the missing classes above are in the j2ee.jar file, so if you can add that jar to your build path of the project it should go away.

# c++ - C++ - 在 FOR 循环中从向量获取大小

> ID：14430773
> 
> 赞同：1
> 
> 时间：2013-01-20T23:58:28.943
> 
> 标签：c++, vector, for-loop

我有一个循环询问用户输入，并将其添加为向量，然后当他们键入“EXIT”时，它将停止并显示列表。我现在要做的是确定元素的数量`size()`

这就是我所拥有的：

```
#include <iostream>
#include <string>
#include <unistd.h>
#include <iterator>
#include <vector>
using namespace std;

int main()
{
    write(1,"\E[H\E[2J",7);                                  
    vector<string> list;
    cout << "Enter UIDs: \n\n"; 
    for(string uid ; cin >> uid && uid != "EXIT"; list.push_back(uid))
        cout << " \n";
    copy(list.begin(), list.end(), ostream_iterator<string>(cout, "\n\n"));
    cout << "Vector size: " << uid.size() << endl;
    return 0;
} 
```

尝试编译时出现错误：

g++ sof.cpp -o sof

> sof.cpp：在函数'int main（）'中：
> sof.cpp：16：32：错误：'uid'的名称查找已更改为ISO'for'范围
> sof.cpp：13:16：错误：不能使用过时的绑定在 'uid' 因为它有一个析构函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T00:00:36.540

您正在查询`uid.size()`而不是`list.size()`

# xcode - Xcode 标签/uiimageview 定位问题？

> ID：14430775
> 
> 赞同：1
> 
> 时间：2013-01-20T23:59:01.610
> 
> 标签：xcode, position, label, uilabel

出于某种原因，当我将标签放置到视图控制器（在控制器的顶部）时，当我在模拟器中运行它时，相同的标签会出现在视图控制器的底部（即使我已经清楚地将它放在视图控制器的顶部）。

每次我将某些东西拖到故事板上的位置时，当我在模拟器中运行它时，它会在我放置它的位置的左/右显示 50 或 60 像素。

这是某种错误吗？它快把我逼疯了。

帮助！

# javascript - 一个一个地执行函数

> ID：14430776
> 
> 赞同：2
> 
> 时间：2013-01-20T23:59:03.197
> 
> 标签：javascript, jquery

我有 3 个不同的 jQuery 函数，例如：

```
function step1() {
  ...
}

function step2() {
  ...
}

function step3() {
  ...
} 
```

如果我这样称呼他们：

```
step1();
step2();
step3(); 
```

它们将同时执行。我怎样才能一一调用它们，所以`step2();`在`step1();`完成后`step3();`调用，在完成后调用`step2();`。

**// 更多信息**

`Step1()`正在执行一个 json 并将详细信息附加到 html，`Step2()`正在执行另一个 json 并将信息附加到由创建的 div 中`Step1()`并`Step3()`简单地隐藏加载动画。

**// 函数**

根据一些用户的要求，以下是功能：

```
jQuery.noConflict();

jQuery(document).ready(function($) {

    var cardType = $.cookie('cardType');
    var categoryID = $.cookie('categoryID');

    function step1() {
        $.getJSON('http://domain.com/benefits/active/all.json', function(data) {
            $.each(data, function(i,item){
                if (item.benefit_type_id == categoryID) {
                    content = '<li><a class="showDetails" data-offer-description="' + item.description + '" data-offer-period="' + item.begin_date + ' - ' + item.end_date + '"><div class="company" title="' + item.business_id + '"></div><div class="shortdescription">' + item.name + '</div></a></li>';
                    $(content).appendTo("#thelist");
                }
            }); 
            step2();
        });
    } // function step1();

    function step2() {  
        $('.company').each(function(i, item) {
            var tempTitle = item.title;
            $.getJSON('http://domain.com/businesses/from_list/' + tempTitle + '.json', function(data2) {
                $.each(data2, function(i,item){
                    content = '<span>' + item.name + '</span>';
                    $(content).appendTo("div[title='" + tempTitle + "']");
                }); 
                step3();
            });
        });
    } // function step2();

    function step3() {
        loaded();
        $('#loading').delay(1000).fadeOut('slow', function() {
            // Animation complete.
        });
    } // function step3();

    step1();

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T00:06:04.867

不知道您在每个函数中执行什么，我假设它们都没有自己执行异步调用，即：ajax 请求等等。

如果您在每个函数中发生额外的异步调用，则以下内容将不适用。

一种选择是使用与此类似的调用之一：

```
function step1() {
    //...
    step2();
}

function step2() {
    //...
    step3();
}

function step3() {
    //...
} 
```

或者您可以在函数签名中使用回调，类似于：

```
//pass step2 function as parameter to step1
//pass step3 function as parameter to step2
step1(step2(step3));

function step1(callback) {
    //...
    callback();
}

function step2(callback) {
    //...
    callback();
}

function step3() {
    //...
} 
```

或者使用 jQuery deferred 可能会起作用，类似于：

```
$.when($.when(step1()).then(step2)).then(step3); 
```

我不是 100% 确定使用`.when()`.

上面的代码似乎可以使用（[**DEMO）**](http://jsfiddle.net/XxFTk/)`when()` ，但如`FelixKing`评论中所述，如果您更新方法以返回[**延迟承诺**](http://api.jquery.com/deferred.promise/)，您可以这样做：

```
step1().then(step2).then(step3); 
```

* * *

[**演示**](http://jsfiddle.net/wGTZn/)- 使用延迟承诺

* * *

> 每个延迟对象都必须通过`resolved()`，才能执行下一个方法。如果您有一个场景，例如，如果
> 您不希望执行某些操作并调用例如，这也将为您提供一些控制。 `step3()``step2()``.reject()`
> 
> 玩弄小提琴中的延迟对象，并查看[**延迟承诺文档**](http://api.jquery.com/deferred.promise/)以获取更多详细信息。

来自 DEMO 的示例代码：

```
step1().then(step2).then(step3);

function step1() {
    var $dfStep1 = new $.Deferred();

    console.log("step1");

    $dfStep1.resolve();
    return $dfStep1.promise();
}

function step2() {
    var $dfStep2 = new $.Deferred();

    console.log("step2");

    $dfStep2.resolve();
    return $dfStep2.promise();
}

function step3() {
    var $dfStep3 = new $.Deferred();

    console.log("step3");

    $dfStep3.resolve();
    return $dfStep3.promise();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:05:28.870

如果函数中没有异步行为，那么它们将被顺序调用。您可能会在与预期不同的时间看到控制台中的输出，我相信 Firefox 等中的控制台缓冲输出，并且在某些情况下（尽管不经常）可能会产生误导。

如果您在这些函数中确实有异步行为，那么您需要使其同步或将对 function2 的调用放在对 function1 的回调中，并将 function3 放在对 function2 的回调中。这将确保仅在 function1 达到适当状态时才调用 function2。

# php - PHPMailer - HTML 格式问题

> ID：14430783
> 
> 赞同：1
> 
> 时间：2013-01-20T23:59:57.867
> 
> 标签：php, forms, email, phpmailer

我创建了一个在线表单，其中输入数据使用 PHPMailer 通过电子邮件发送。然而，我目前收到的电子邮件显示的是变量，而不是用户在表单中实际输入的内容。这是我刚刚收到的一封电子邮件的示例：

```
Account Name: $AccountName
Delivery To: $DeliveryTo
Order No: $OrderNo
Del Date: $DelDate
Builder Name: $BuilderName
Delivery Instructions: $DeliveryInstructions
Contact Phone: $ContactPhone 
```

请注意，即使我输入了帐户名称、电话号码等内容，但变量名称（$AccountName、$ContactPhone）正在显示，而不是实际输入。我已经设置了这些变量，如下所示，所以我不确定为什么会这样。任何帮助将不胜感激。

在我的 mail.php 中：

```
<?php
    require("/home/ange/public_html/angelasmith.com.au/staging/PHPMailer_5.2.2/class.phpmailer.php");

    $AccountName = $_POST['AccountName'];
    $DeliveryTo = $_POST['DeliveryTo'];
    $OrderNo = $_POST['OrderNo'];
    $DelDate = $_POST['DelDate'];
    $BuilderName = $_POST['BuilderName'];
    $DeliveryInstructions = $_POST['DeliveryInstructions'];
    $ContactPhone = $_POST['ContactPhone'];
    $totalsheets = $_POST['totalsheets'];
    $totalsqm = $_POST['totalsqm'];

    $c15 = $_POST['c15'];
    $d15 = $_POST['d15'];
    $e15 = $_POST['e15'];
    $f15 = $_POST['f15'];
    $h15 = $_POST['h15'];
    $i15 = $_POST['i15'];
    $j15 = $_POST['j15'];
    $k15 = $_POST['k15'];
    $l15 = $_POST['l15'];
    $m15 = $_POST['m15'];

    $c16 = $_POST['c16'];
    $d16 = $_POST['d16'];
    $e16 = $_POST['e16'];
    $f16 = $_POST['f16'];
    $h16 = $_POST['h16'];
    $i16 = $_POST['i16'];
    $j16 = $_POST['j16'];
    $k16 = $_POST['k16'];
    $l16 = $_POST['l16'];
    $m16 = $_POST['m16'];

    $mail = new PHPMailer();

    $mail->IsSMTP();                                      // set mailer to use SMTP
    $mail->Host = "mail.mydomain.com.au";  // specify main and backup server
    $mail->Port = 25; 
    $mail->Username = "test@mydomain.com.au";  // SMTP username
    $mail->Password = "********"; // SMTP password

    $mail->From = "hello@mydomain.com.au";
    $mail->FromName = "*********";
    $mail->AddAddress("hello@mydomain.com.au");

                $mail->WordWrap = 50;                                 // set word wrap to 50 characters
                $mail->IsHTML(true);                                  // set email format to HTML

                $mail->Subject = "New Online Form Enquiry";

                $htmlBody = '<html>
                <head><title>Online Order Form</title></head><body>
                <p><b>Account Name:</b> $AccountName<br>
                <b>Delivery To:</b> $DeliveryTo<br>
                <b>Order No:</b> $OrderNo<br>
                <b>Del Date:</b> $DelDate<br>
                <b>Builder Name:</b> $BuilderName<br>
                <b>Delivery Instructions:</b> $DeliveryInstructions<br>
                <b>Contact Phone:</b> $ContactPhone<br>

                <table style="border:1px solid #ccc" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td><strong>1700</strong></td>
                        <td><strong>2100</strong></td>
                        <td><strong>3000</strong></td>
                        <td><strong>3600</strong></td>
                        <td><strong>4200</strong></td>
                        <td><strong>4800</strong></td>
                        <td><strong>5400</strong></td>
                        <td><strong>6000</strong></td>
                        <td>m2</td>
                        <td>Count</td>
                    </tr>

                    <tr>
                        <td><strong>10 RE</strong></td>
                        <td>1200</td>
                        <td>$c15</td>
                        <td>$d15</td>
                        <td>$e15</td>
                        <td>$f15</td>
                        <td>$h15</td>
                        <td>$i15</td>
                        <td>$j15</td>
                        <td>$k15</td>
                        <td>$l15</td>
                        <td>$m15</td>
                    </tr>

                    <tr>
                        <td><strong>10 RE</strong></td>
                        <td>1350</td>
                        <td>$c16</td>
                        <td>$d16</td>
                        <td>$e16</td>
                        <td>$f16</td>
                        <td>$h16</td>
                        <td>$i16</td>
                        <td>$j16</td>
                        <td>$k16</td>
                        <td>$l16</td>
                        <td>$m16</td>
                    </tr>

                    <tr>
                        <td><strong>Span</strong></td>
                        <td>1200</td>
                        <td>$c17</td>
                        <td>$d17</td>
                        <td>$e17</td>
                        <td>$f17</td>
                        <td>$h17</td>
                        <td>$i17</td>
                        <td>$j17</td>
                        <td>$k17</td>
                        <td>$l17</td>
                        <td>$m17</td>
                    </tr>

                    <tr>
                        <td><strong>Span</strong></td>
                        <td>1350</td>
                        <td>$c18</td>
                        <td>$d18</td>
                        <td>$e18</td>
                        <td>$f18</td>
                        <td>$h18</td>
                        <td>$i18</td>
                        <td>$j18</td>
                        <td>$k18</td>
                        <td>$l18</td>
                        <td>$m18</td>
                    </tr>

                    <tr>
                        <td><strong>13 RE</strong></td>
                        <td>1200</td>
                        <td>$c19</td>
                        <td>$d19</td>
                        <td>$e19</td>
                        <td>$f19</td>
                        <td>$h19</td>
                        <td>$i19</td>
                        <td>$j19</td>
                        <td>$k19</td>
                        <td>$l19</td>
                        <td>$m19</td>
                    </tr>

                    <tr>
                        <td><strong>13 RE</strong></td>
                        <td>1350</td>
                        <td>$c20</td>
                        <td>$d20</td>
                        <td>$e20</td>
                        <td>$f20</td>
                        <td>$h20</td>
                        <td>$i20</td>
                        <td>$j20</td>
                        <td>$k20</td>
                        <td>$l20</td>
                        <td>$m20</td>
                    </tr>

                    <tr>
                        <td><strong>10 WR</strong></td>
                        <td>1200</td>
                        <td>$c21</td>
                        <td>$d21</td>
                        <td>$e21</td>
                        <td>$f21</td>
                        <td>$h21</td>
                        <td>$i21</td>
                        <td>$j21</td>
                        <td>$k21</td>
                        <td>$l21</td>
                        <td>$m21</td>
                    </tr>

                    <tr>
                        <td><strong>10 WR</strong></td>
                        <td>1350</td>
                        <td>$c22</td>
                        <td>$d22</td>
                        <td>$e22</td>
                        <td>$f22</td>
                        <td>$h22</td>
                        <td>$i22</td>
                        <td>$j22</td>
                        <td>$k22</td>
                        <td>$l22</td>
                        <td>$m22</td>
                    </tr>

                    <tr>
                        <td><strong>13 WR</strong></td>
                        <td>1200</td>
                        <td>$c23</td>
                        <td>$d23</td>
                        <td>$e23</td>
                        <td>$f23</td>
                        <td>$h23</td>
                        <td>$i23</td>
                        <td>$j23</td>
                        <td>$k23</td>
                        <td>$l23</td>
                        <td>$m23</td>
                    </tr>

                    <tr>
                        <td><strong>Villaboard 6mm</strong></td>
                        <td>1200</td>
                        <td>$c24</td>
                        <td>$d24</td>
                        <td>$e24</td>
                        <td>$f24</td>
                        <td>$h24</td>
                        <td>$i24</td>
                        <td>$j24</td>
                        <td>$k24</td>
                        <td>$l24</td>
                        <td>$m24</td>
                    </tr>

                    <tr>
                        <td><strong>Villaboard 6mm</strong></td>
                        <td>1350</td>
                        <td>$c35</td>
                        <td>$d35</td>
                        <td>$e35</td>
                        <td>$f35</td>
                        <td>$h35</td>
                        <td>$i35</td>
                        <td>$j35</td>
                        <td>$k35</td>
                        <td>$l35</td>
                        <td>$m35</td>
                    </tr>

                </table>

                <p><h3>Total Sheet Count:</h3> $totalsheets<br>
                <h3>Total Square Metres:</h3> $totalsqm</p>

                ';

                $mail->Body = $htmlBody;
                $mail->AltBody = $textBody;

                if(!$mail->Send())
                {
                   echo "Message could not be sent. <p>";
                   echo "Mailer Error: " . $mail->ErrorInfo;
                   exit;
                }

                echo "Message has been sent";
                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:11:02.407

如果你想用单引号声明一个字符串变量，你只需要以这种方式连接变量：

```
$htmlBody = '<html>
    <head><title>Online Order Form</title></head><body>
    <p><b>Account Name:</b> '.$AccountName.'<br>
    <b>Delivery To:</b> '.$DeliveryTo.'<br>
    <b>Order No:</b> '.$OrderNo.'<br>
    <b>Del Date:</b> '.$DelDate.'<br>
    <b>Builder Name:</b> '.$BuilderName.'<br>
    <b>Delivery Instructions:</b> '.$DeliveryInstructions.'<br>
    <b>Contact Phone:</b> '.$ContactPhone.'<br>
    ...
    '; 
```

否则，如果要将变量替换为其值，则必须使用双引号声明字符串变量：

```
$htmlBody = "<html>
    <head><title>Online Order Form</title></head><body>
    <p><b>Account Name:</b> $AccountName<br>
    <b>Delivery To:</b> $DeliveryTo<br>
    <b>Order No:</b> $OrderNo<br>
    <b>Del Date:</b> $DelDate<br>
    <b>Builder Name:</b> $BuilderName<br>
    <b>Delivery Instructions:</b> $DeliveryInstructions<br>
    <b>Contact Phone:</b> $ContactPhone<br>
    ...
    "; 
```

# javascript - 如何在 JavaScript 中记录获取的网络资源？

> ID：14430787
> 
> 赞同：11
> 
> 时间：2013-01-21T00:00:19.673
> 
> 标签：javascript, node.js, networking, google-chrome-extension

有没有办法访问浏览器请求的资源列表（在这个 Chrome 检查器的网络面板中找到的资源）？

![网络资源](../Images/61cb6a75d981a49b66fce17e46c2a97a.png)

我希望能够遍历这些获取的资源以显示已访问的域，例如：

```
for (var i = 0; i < window.navigator.resources.length; i++) {
  var resource = window.navigator.resources[i];
  console.log(resource); //=> e.g. `{domain: "www.google-analytics.com", name: "ga.js"}`
} 
```

或者，也许有一些事件要为其编写处理程序，例如：

```
window.navigator.onrequest = function(resource) {
  console.log(resource); //=> e.g. `{domain: "www.google-analytics.com", name: "ga.js"}`
} 
```

它不需要跨浏览器工作，甚至可以使用客户端 JavaScript。只要能够以*任何方式*访问这些信息就可以了（也许有某种方法可以使用 phantomjs 或从 shell/node 脚本观察网络流量）。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T01:23:28.100

您可以这样做，但您需要使用 Chrome 扩展程序。

Chrome 扩展有很多沙盒式的安全性。Chrome 扩展程序和网页之间的通信是一个多步骤的过程。这是我能提供的最简洁的解释，最后有一个完整的工作示例：

1.  Chrome 扩展程序可以完全访问**chrome.* API**，但 Chrome 扩展程序不能直接与网页 JS 通信，网页 JS 也不能直接与 Chrome 扩展程序通信。

2.  要弥合 Chrome 扩展程序和网页之间的差距，您需要使用**[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)**。内容脚本本质上是在`window`目标网页范围内注入的 JavaScript。内容脚本不能调用函数，也不能访问由网页 JS 创建的变量，**但它们确实共享对同一个 DOM 的访问，**因此也共享对事件的访问。

3.  因为不允许直接访问变量和调用函数，所以网页和内容脚本可以通信的唯一方式是通过触发**自定义事件**。

例如，如果我想将消息从 Chrome 扩展程序传递到页面，我可以这样做：

content_script.js

```
document.getElementById("theButton").addEventListener("click", function() {
    window.postMessage({ type: "TO_PAGE", text: "Hello from the extension!" }, "*");
}, false); 
```

web_page.js

```
window.addEventListener("message", function(event) {
    // We only accept messages from ourselves
    if (event.source != window)
      return;

    if (event.data.type && (event.data.type == "TO_PAGE")) {
      alert("Received from the content script: " + event.data.text);
    }
}, false); 
```

`4。现在您可以从内容脚本向网页发送消息，您现在需要 Chrome 扩展程序收集您想要的所有网络信息。您可以通过几个不同的模块来完成此操作，但最简单的选项是**[webRequest](https://developer.chrome.com/extensions/webRequest.html)**模块（*参见下面的 background.js*）。

`5。使用[消息传递](http://developer.chrome.com/extensions/messaging.html)将 Web 请求上的信息传递到内容脚本，然后传递到网页 JavaScript。

在视觉上，你可以这样想：

![Chrome 扩展程序和内容脚本](../Images/1a3f5c02d0550eb29664ebf4f91cfa53.png)

**完整的工作示例：**

前三个文件包含您的 Google Chrome 扩展程序，最后一个文件是您应该上传到`http://`某处网络空间的 HTML 文件。

**图标.png**

使用任何 16x16 PNG 文件。

**清单.json**

```
{
  "name": "webRequest Logging",
  "description": "Displays the network log on the web page",
  "version": "0.1",
  "permissions": [
    "tabs",
    "debugger",
    "webRequest",
    "http://*/*"
  ],
  "background": {
    "scripts": ["background.js"]
  },
  "browser_action": {
    "default_icon": "icon.png",
    "default_title": "webRequest Logging"
  },
   "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["content_script.js"]
    }
  ],
  "manifest_version": 2
} 
```

**背景.js**

```
var aNetworkLog = [];

chrome.webRequest.onCompleted.addListener(function(oCompleted) {
            var sCompleted = JSON.stringify(oCompleted);
            aNetworkLog.push(sCompleted);
        }
        ,{urls: ["http://*/*"]}
 );

chrome.extension.onConnect.addListener(function (port) {
    port.onMessage.addListener(function (message) {
        if (message.action == "getNetworkLog") {
            port.postMessage(aNetworkLog);
        }
    });
}); 
```

**content_script.js**

```
var port = chrome.extension.connect({name:'test'});

document.getElementById("theButton").addEventListener("click", function() {

    port.postMessage({action:"getNetworkLog"});

}, false);

port.onMessage.addListener(function(msg) {
  document.getElementById('outputDiv').innerHTML = JSON.stringify(msg);
}); 
```

并为网页使用以下内容（命名为您想要的任何名称）：

```
<!doctype html>
<html>
<head>
    <title>webRequest Log</title>
</head>
<body>
    <input type="button" value="Retrieve webRequest Log" id="theButton">
    <div id="outputDiv"></div>
</head>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-24T16:44:54.043

向@Elliot B 大喊大叫。

我基本上使用了他所做的，但我希望在内容脚本中触发事件，而不是在后台触发侦听器。无论出于何种原因，我无法从后台脚本连接到端口，所以这就是我想出的。

PS：您需要扩展文件夹中的 jquery.js 才能使其工作。

清单.json

```
{
  "manifest_version": 2,

  "name": "MNC",
  "version": "0.0.1",
  "description": "Monitor Network Comms",
  "permissions":["webRequest","*://*/"],
  "content_scripts": [{
  "matches": ["<all_urls>"],
  "run_at": "document_start",
  "js": ["content.js",
        "jquery.js"]
  }],
  "background": {
    "scripts": ["background.js"]
  }
} 
```

背景.js

```
var aNetworkLog = [];

chrome.webRequest.onResponseStarted.addListener(
  function(oCompleted) {
    var sCompleted = JSON.stringify(oCompleted);
    aNetworkLog.push(sCompleted);
  },{urls: ["https://*/*"]}
);

chrome.extension.onConnect.addListener(function (port) {
  chrome.webRequest.onResponseStarted.addListener(
    function(){
      port.postMessage({networkLog:JSON.stringify(aNetworkLog)});
    },{urls: ["https://*/*"]}
  );
  port.onMessage.addListener(function (message) {
    if (message.disconnect==true) {
      port.disconnect();
    }
  });
}); 
```

内容.js

```
div = $('<div id="outputDiv" style="float:left;max-width:fit-content;position:fixed;display:none;"></div>').appendTo(document.body);
var port = chrome.extension.connect({name:'networkLogging'});
port.onMessage.addListener(function (message) {
  if (message.networkLog) {
    div[0].innerHTML = message.networkLog;
  }
});
observer = new WebKitMutationObserver(function(mutation,observer){
  JSON.parse(mutation[0]['target'].innerHTML).forEach(function(item){
    JSON.parse(item);
  })
});
observer.observe(div[0],{childList:true}); 
```

这绝对不是最有效的做事方式，但它对我有用。以为我会在这里添加它以防万一有人需要它。

# php - SplFileObject __toString 继承

> ID：14430792
> 
> 赞同：0
> 
> 时间：2013-01-21T00:01:00.680
> 
> 标签：php, inheritance, tostring, splfileobject

我有一个扩展 SplFileObject 并实现`__toString`方法的类，但我似乎得到了不一致的行为，具体取决于方法的调用方式。有时调用父方法，有时调用子方法。谁能解释为什么会这样？

```
class Something extends \SplFileObject {
    public function __toString() {
        return 'calling __toString';
    }
}

$something = new Something('test.php');
echo $something; // 'calling __toString'
echo (string) $something; // 'test.php'
echo $something->__toString(); // 'calling __toString' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:08:51.780

这似乎是旧行为。

在 php 5.4+ 中进行测试会产生预期的行为，而 5.3 会产生您所看到的

[http://codepad.viper-7.com/aZgP1h](http://codepad.viper-7.com/aZgP1h)

看似相关的错误：
[https ://bugs.php.net/bug.php?id=26962](https://bugs.php.net/bug.php?id=26962)
[https://bugs.php.net/bug.php?id=60452](https://bugs.php.net/bug.php?id=60452)

# c# - 读取 quickfix 日志文件

> ID：14430806
> 
> 赞同：0
> 
> 时间：2013-01-21T00:03:58.373
> 
> 标签：c#, quickfix

我想通过在我的应用程序中播放执行报告来测试我的交易系统。然后我可以验证我的订单/仓位状态是否正确。

我发现了这个有点相关的问题：[how to replay a quickfix log](https://stackoverflow.com/questions/13160132/how-to-replay-a-quickfix-log)

不同之处在于，在文章中，该人正在寻找可以回放日志文件的完整测试工具。我想知道是否存在一个实用程序，它将接受一个表示 FIX 消息的字符串，然后生成一个 FIX 对象（例如：）`ExecutionReport`。

外面有这样的东西吗？每个人都在写自己的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:16:34.767

听起来您只是想要一种不同的测试工具。

如果您以单元测试友好的方式编写应用程序，那么您可以简单地编写单元测试来创建 ExecReport 对象并将它们作为参数传递给某些 ExecReport 处理器组件。（我猜你不是为 UT 设计的，否则你可能不需要这个建议。）

如果没有，那么我认为最好的办法是编写另一个应用程序，您的第一个应用程序可以连接到该应用程序。您可以创建一个简单的 Acceptor 应用程序，该应用程序可以使用命令行命令来触发发送 ExecReports。如果您使用的是 QuickFIX/n（C# 端口），您可以从 QuickFIX/n 的示例应用程序“TradeClient”和“Executor”中窃取代码。

# xaml - 我的 GridView 中的 ItemsGroups 不换行并且位于屏幕外

> ID：14430812
> 
> 赞同：1
> 
> 时间：2013-01-21T00:05:15.420
> 
> 标签：xaml, gridview, windows-8, windows-runtime

我刚刚实现了一个带有组功能的 GridView。我有一个按发行日期分组的电视节目剧集列表。当我有超过 3 集的日期时，我想将我的项目打包并放在组标题旁边，此时，下一个项目正在屏幕之外，这不是我想要的。 ![我的应用程序的视图](../Images/347b2106fc5279c44c947019d30f39f6.png)

如您所见，每天在重复的剧集下还有其他剧集，我希望它们与其他剧集相邻，而不是在下。这是我的 XAML 代码，谢谢 :)

```
<GridView Margin="70,0,0,40" ItemsSource="{Binding Source={StaticResource cvsActivities}}">
                <GridView.Template>
                    <ControlTemplate>
                        <ItemsPresenter />
                    </ControlTemplate>
                </GridView.Template>
                <GridView.ItemContainerTransitions>
                    <TransitionCollection>
                        <EntranceThemeTransition IsStaggeringEnabled="True" />
                        <RepositionThemeTransition />
                        <AddDeleteThemeTransition />
                    </TransitionCollection>
                </GridView.ItemContainerTransitions>
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <StackPanel Orientation="Vertical">
                                <Grid Name="grid_image">
                                    <Image Width="280" Height="200" VerticalAlignment="Center" Stretch="UniformToFill" Source="Assets/no_image.png" />
                                    <Image Width="280" Height="200" VerticalAlignment="Center" Stretch="UniformToFill" Source="{Binding saison.serie.poster}" />
                                </Grid>
                                <Image Source="Assets/Ban-1hh.png" Width="280" Height="59" Margin="0,-19,0,0"/>
                                <Grid Margin="0,-40,0,0" Height="40">
                                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical" VerticalAlignment="Center" Margin="0,-7,0,0">
                                        <TextBlock HorizontalAlignment="Left" Margin="5,0,0,0" Width="190" TextTrimming="WordEllipsis" Foreground="White" FontSize="20" Text="{Binding saison.serie.nom}" />
                                        <TextBlock HorizontalAlignment="Left" Margin="5,-5,0,0" Width="190" TextTrimming="WordEllipsis" Foreground="White" FontSize="13" Text="{Binding date}" />
                                    </StackPanel>
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Right" Orientation="Vertical" Margin="0,-5,5,0">
                                        <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft">
                                            <TextBlock Foreground="#f0ec45" FontSize="14" Text="{Binding saison.number}" />
                                            <TextBlock Foreground="#f0ec45" FontSize="14" Margin="5,0,0,0" Text="Saison " />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft" Margin="0,-5,0,0">
                                            <TextBlock Foreground="#f0ec45" FontSize="14" Text="{Binding ep_number}" />
                                            <TextBlock Foreground="#f0ec45" FontSize="14" Margin="5,0,0,0" Text="Episode " />
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Background="LightGray"  >
                                    <TextBlock Text="{Binding Key, Converter={StaticResource StringFormatConverter}, ConverterParameter='{}{0:dddd dd MMM yy}'}"  Foreground="Black" Margin="10"
                       Style="{StaticResource PageSubheaderTextStyle}" />
                                </Grid>

                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                    </GroupStyle>
                </GridView.GroupStyle>
            </GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:28:33.427

添加一个`ItemsPanelTemplate`（如果您查看默认的 GridApp 和 GroupedItemsPage.xaml，您会发现它们是这样做的）。

```
<GroupStyle.Panel>
   <ItemsPanelTemplate>
      <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0" />
   </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

如果您希望列中的第三个元素泄漏到底部，那么您可以在 GridView 本身上设置一个负的底部边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:19:40.780

您实际上删除了 GridView 控件模板，所以难怪它不起作用。删除以下部分，事情可能会恢复正常：

```
<GridView.Template>
    <ControlTemplate>
        <ItemsPresenter />
    </ControlTemplate>
</GridView.Template> 
```

如果您想在默认模板中更改某些内容 - 更改该特定内容。默认模板有一个水平 ScrollViewer，它限制 WrapGrid 用于其 ItemsPanelTemplate 的垂直空间使用，并允许项目换行到下一列，同时还允许水平滚动以查看所有项目。

# javascript - 从表格单元格中获取图像的来源

> ID：14430813
> 
> 赞同：1
> 
> 时间：2013-01-21T00:05:18.040
> 
> 标签：javascript

我正在尝试访问`img.src`这些表格单元格，但在某个地方出错了。

```
var cell = newTable.rows.cells;
var content = newTable.getElementsByTagName('img');
var nodeArray = [];

for(var i = 0; i < content.length; ++i)
{
    nodeArray[i] = content[i];
}

var listThem = $(this).attr('src');
console.log(listThem); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:22:40.320

用这个 ：

```
var content = newTable.getElementsByTagName('img');
for(var i = 0; i < content.length; i += 1) {
    var source = content[i]['src'];
    //do something
} 
```

`getElementsByTagName()`返回一个 dom 元素的数组。要访问 dom 元素的“src”属性，您可以这样做：`element.src`或`element['src']`；

`source`将包含图像源。

# apache - .htaccess 文件找不到 404 ErrorDocument

> ID：14430823
> 
> 赞同：2
> 
> 时间：2013-01-21T00:06:51.400
> 
> 标签：apache, .htaccess, xampp, http-status-code-404

我拥有的 .htaccess 文件无法在名为“error”的子文件夹中找到我的 404.html 文档。该行特别是：

`ErrorDocument 404 /error/404.html`

但是，如果我将 404.html 放在与 .htaccess 相同的目录中并将该行更改为：

`ErrorDocument 404 /404.html`- - 有用！

如果有帮助，我将使用**XAMPP for Windows**，并且在我的 httpd.conf 文件中，相关指令设置如下（我意识到存在一些冗余）：

```
<Directory />
    AllowOverride All
    Order allow,deny
    allow from all
</Directory>

<Directory "C:/xampp/htdocs">
    Options Indexes FollowSymLinks Includes ExecCGI MultiViews
    AllowOverride All
    Require all granted
</Directory> 
```

此外，我的**DocumentRoot**设置为“C:/xampp/htdocs”，并且我尝试了各种路径来访问“错误”目录——没有任何工作：

```
ErrorDocument 404 /error/404.html
ErrorDocument 404 /flchi/error/404.html
ErrorDocument 404 /sites/flchi/error/404.html
ErrorDocument 404 /htdocs/sites/flchi/error/404.html 
```

哦，最后一件事是值得的——我正在使用虚拟主机。以下是相关位：

```
<VirtualHost *>
    DocumentRoot "C:/xampp/htdocs"
    ServerName localhost
    ServerAlias localhost
    <Directory "C:/xampp/htdocs">
        Options Indexes FollowSymLinks Includes ExecCGI
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost flchi.local>
    DocumentRoot "C:/xampp/htdocs/sites/flchi"
    ServerName flchi.local
    ServerAlias flchi.local
    <Directory "C:/xampp/htdocs/sites/flchi">
        Options Indexes FollowSymLinks Includes ExecCGI
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:22:14.807

发生这种情况是因为命名冲突 - 默认 Apache 配置已经定义了虚拟路径`/error`，影响全局所有虚拟主机。它在配置文件中完成`xampp/apache/conf/extra/httpd-multilang-errordoc.conf`。Location `/error`，因此会影响您的`/error`子目录：

```
 Alias /error/ "C:/xampp/apache/error/" 
```

如果您将“错误”子目录重命名为其他名称，它应该可以工作 - 例如，`error2`.

```
 ErrorDocument 404 /error2/404.html 
```

# java - 如何在 Unix 上获取 Java 中所有已安装文件系统的列表？

> ID：14430825
> 
> 赞同：4
> 
> 时间：2013-01-21T00:07:11.037
> 
> 标签：java, unix, filesystems

我在 Unix 平台上运行 Java。如何通过 Java 1.6 API 获取所有已挂载文件系统的列表？

我已经尝试过`File.listRoots()`，但这会返回一个文件系统（即`/`）。如果我使用`df -h`，我会看到更多：

```
Filesystem      Size   Used  Avail Capacity   iused     ifree %iused  Mounted on
/dev/disk0s2   931Gi  843Gi   87Gi    91% 221142498  22838244   91%   /
devfs          187Ki  187Ki    0Bi   100%       646         0  100%   /dev
map -hosts       0Bi    0Bi    0Bi   100%         0         0  100%   /net
map auto_home    0Bi    0Bi    0Bi   100%         0         0  100%   /home
/dev/disk1s2   1.8Ti  926Gi  937Gi    50% 242689949 245596503   50%   /Volumes/MyBook
/dev/disk2     1.0Gi  125Mi  875Mi    13%     32014    223984   13%   /Volumes/Google Earth 
```

我也希望看到`/home`（至少）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-30T10:18:04.110

在 Java7+ 中，您可以使用 nio

```
import java.io.IOException;
import java.nio.file.FileStore;
import java.nio.file.FileSystems;

public class ListMountedVolumesWithNio {
   public static void main(String[] args) throws IOException {
      for (FileStore store : FileSystems.getDefault().getFileStores()) {
         long total = store.getTotalSpace() / 1024;
         long used = (store.getTotalSpace() - store.getUnallocatedSpace()) / 1024;
         long avail = store.getUsableSpace() / 1024;
         System.out.format("%-20s %12d %12d %12d%n", store, total, used, avail);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T00:27:02.820

Java 不提供对挂载点的任何访问。您必须通过运行系统命令`mount`并`Runtime.exec()`解析其输出。要么，要么解析`/etc/mtab`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-20T13:33:43.887

OSHI（Java 的操作系统和硬件信息库）在这里很有用：[https](https://github.com/oshi/oshi) ://github.com/oshi/oshi 。

看看这段代码：

```
@Test
public void test() {

    final SystemInfo systemInfo = new SystemInfo();
    final OSFileStore[] fileStores = systemInfo.getOperatingSystem().getFileSystem().getFileStores();
    Stream.of(fileStores)
    .peek(fs ->{
        System.out.println("name: "+fs.getName());
        System.out.println("type: "+fs.getType() );
        System.out.println("str: "+fs.toString() );
        System.out.println("mount: "+fs.getMount());
        System.out.println("...");
    }).count();

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-13T05:31:32.717

您可以尝试使用以下方法解决问题：

**我的代码**

```
public List<String> getHDDPartitions() {
    try {
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream("/proc/mounts"), "UTF-8"));
        String response;
        StringBuilder stringBuilder = new StringBuilder();
        while ((response = bufferedReader.readLine()) != null) {
            stringBuilder.append(response.replaceAll(" +", "\t") + "\n");
        }
        bufferedReader.close();
        return Lists.newArrayList(Arrays.asList(stringBuilder.toString().split("\n")));
    } catch (IOException e) {
        LOGGER.error("{}", ExceptionWriter.INSTANCE.getStackTrace(e));
    }
    return null;
}

public List<Map<String, String>> getMapMounts() {
    List<Map<String, String>> resultList = Lists.newArrayList();
    for (String mountPoint : getHDDPartitions()) {
        Map<String, String> result = Maps.newHashMap();
        String[] mount = mountPoint.split("\t");
        result.put("FileSystem", mount[2]);
        result.put("MountPoint", mount[1]);
        result.put("Permissions", mount[3]);
        result.put("User", mount[4]);
        result.put("Group", mount[5]);
        result.put("Total", String.valueOf(new File(mount[1]).getTotalSpace()));
        result.put("Free", String.valueOf(new File(mount[1]).getFreeSpace()));
        result.put("Used", String.valueOf(new File(mount[1]).getTotalSpace() - new File(mount[1]).getFreeSpace()));
        result.put("Free Percent", String.valueOf(getFreeSpacePercent(new File(mount[1]).getTotalSpace(), new File(mount[1]).getFreeSpace())));
        resultList.add(result);
    }
    return resultList;
}

private Integer getFreeSpacePercent(long total, long free) {
    Double result = (Double.longBitsToDouble(free) / Double.longBitsToDouble(total)) * 100;
    return result.intValue();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-31T12:18:58.167

您可以使用 JNA 调用 getmntent 函数（使用“man getmntent”获取更多信息）。

以下是一些示例代码，可帮助您入门：

```
import java.util.Arrays;
import java.util.List;

import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;

public class MntPointTest {
    public static class mntent extends Structure {
        public String mnt_fsname; //Device or server for filesystem
        public String mnt_dir; //Directory mounted on
        public String mnt_type; //Type of filesystem: ufs, nfs, etc.
        public String mnt_opts;
        public int mnt_freq;
        public int mnt_passno;

        @Override
        protected List getFieldOrder() {
            return Arrays.asList("mnt_fsname", "mnt_dir", "mnt_type", "mnt_opts", "mnt_freq", "mnt_passno");
        }
    }

    public interface CLib extends Library {
        CLib INSTANCE = (CLib) Native.loadLibrary("c", CLib.class);

        Pointer setmntent(String file, String mode);
        mntent getmntent(Pointer stream);
        int endmntent(Pointer stream);
    }

    public static void main(String[] args) {
        mntent mntEnt;
        Pointer stream = CLib.INSTANCE.setmntent("/etc/mtab", "r");
        while ((mntEnt = CLib.INSTANCE.getmntent(stream)) != null) {
            System.out.println("Mounted from: " + mntEnt.mnt_fsname);
            System.out.println("Mounted on: " + mntEnt.mnt_dir);
            System.out.println("File system type: " + mntEnt.mnt_type);
            System.out.println("-------------------------------");
        }

        CLib.INSTANCE.endmntent(stream);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T00:36:33.567

I was already on the way to using `mount` when @Cozzamara pointed out that's the way to go. What I ended up with is:

```
 // get the list of mounted filesystems
    // Note: this is Unix specific, as it requires the "mount" command
    Process mountProcess = Runtime.getRuntime ().exec ( "mount" );
    BufferedReader mountOutput = new BufferedReader ( new InputStreamReader ( mountProcess.getInputStream () ) );
    List<File> roots = new ArrayList<File> ();
    while ( true ) {

        // fetch the next line of output from the "mount" command
        String line = mountOutput.readLine ();
        if ( line == null )
            break;

        // the line will be formatted as "... on <filesystem> (...)"; get the substring we need
        int indexStart = line.indexOf ( " on /" );
        int indexEnd = line.indexOf ( " ", indexStart );
        roots.add ( new File ( line.substring ( indexStart + 4, indexEnd - 1 ) ) );
    }
    mountOutput.close (); 
```

# php - 是否可以在独立的可执行文件中捆绑/运送 PHP+MySQL？

> ID：14430828
> 
> 赞同：0
> 
> 时间：2013-01-21T00:08:04.863
> 
> 标签：php, mysql, node.js

我正在尝试创建一个具有发送者和接收者的应用程序。整个应用程序只能在 LAN 上使用，也可以几乎完全通过浏览器完成。

“发送者”部分是某种应用程序，需要在个人计算机上运行本地服务器，并允许 php、html、css、js 和 mysql 运行。

在“接收者”端，它只是一个人的浏览器访问从“发送者”应用程序提供的网页。

我一直在研究 nodejs 作为完成服务器部分的一种方式......但我不确定我是否可以将它作为安装了 mysql 和 php 的 exe 发送并允许它从 php 执行。我知道可以使用 npm 安装这些扩展，但我想将整个 exe 发送给最终用户，而不是让他们自己安装节点。

这可能吗？如果是这样，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:11:55.950

您可能想查看[XAMPP](http://www.apachefriends.org/en/xampp.html)。它似乎是 Apache、PHP、MySQL 和其他一些东西（例如 Perl）的可移植（-ish）安装。你想看看你是否可以去掉不相关的部分并以某种方式将你的应用程序代码放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T11:17:56.713

我相信有一个确定的方法。

几个月前我遇到了 server2go，它完美地完成了工作。只需从这里下载 server2go [http://www.server2go-web.de/download/download.html](http://www.server2go-web.de/download/download.html)

运行应用程序，将在指定位置创建一个文件夹，其中包含所有需要的文件。

只需将您的 php、html、css 等文件复制到 www 文件夹即可

如果您使用 mysql，请导入您的 mysql 数据库

设置好后，压缩文件夹，然后使用 zipInstaller，您可以在此处获取它[http://www.nirsoft.net/utils/zipinst.html](http://www.nirsoft.net/utils/zipinst.html)

ZipInstaller 创建一个 exe 应用程序。

谢谢

# security - 使用 pdftk 进行定时文件加密

> ID：14430829
> 
> 赞同：0
> 
> 时间：2013-01-21T00:08:32.317
> 
> 标签：security, unix, encryption, pdftk

我知道我可以使用 pdftk 和以下命令“加密”一个 pdf 文件`pdftk mydoc.pdf output mydoc.128.pdf owner_pw foopass`：我发现这会禁用打印。还有其他选项可用于低质量打印等。

但是，我想以这样一种方式加密 pdf，在 14 天之后，如果没有密码就无法再打开它——如果你愿意的话，可以使用 unix 命令行工具或一些脚本来进行定时加密对我来说的诀窍。

任何意见？建议？

我这样做是因为我教本科班，并且需要上传作业问题和解决方案。我相信学生们会从这些 pdf 文件中创建档案，供未来的学生使用和作弊。不，我无法打印页面然后与他们共享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:32:05.000

PDF 标记（例如“不打印”）由符合标准的查看器“强制执行”，有多种查看器将或可以轻易忽略它们（特别是因为格式已记录）。

PDF 原生功能并不是实现此目的的好方法，尽管您可以通过使用 X.509 加密的 PDF 和较短的证书生命周期来实现这一目标，但该计划中仍然存在明显的漏洞。pdftk 不支持 X.509 签名或加密。

这些涵盖了大多数选项：

*   [https://crypto.stackexchange.com/questions/3064/is-it-possible-to-make-time-locked-encrytion-algorithm](https://crypto.stackexchange.com/questions/3064/is-it-possible-to-make-time-locked-encrytion-algorithm)
*   [有没有办法在 PDF 上设置时间限制？](https://stackoverflow.com/questions/6692676/is-there-a-way-to-set-a-time-limit-on-a-pdf)

后者链接到您的问题的商业解决方案。

# javascript - 创建一个使用 javascript 操作 innerHTML 的简单计算器

> ID：14430830
> 
> 赞同：1
> 
> 时间：2013-01-21T00:08:32.397
> 
> 标签：javascript, this, getelementbyid

我正在尝试为飞机制作一个简单的重量和平衡计算器。要求很简单，我需要输入一个重量并更新一个力矩字段以包含重量乘以已知力矩臂。基本上，我只需要将输入乘以已知值，然后将此产品打印到另一个空间。

以下是我迄今为止尝试过的，它应该可以通过：

1.  `this.value`使用`onchange`事件传递输入对话的值

2.  查找输出元素 uisng`document.getElementById(outID)`

3.  使用设置输出元素文本`outID.innerHTML = weight*arm`

然而，什么都没有发生。

```
<!DOCTYPE html>

<head>
    <script language="javascript" type="text/javascript">
        function GetMoment(outID,weight,arm){
            var outputObj = document.getElementById( outID );
            outputObj.innerHTML = weight*arm;
        }
    </script>

</head>
<html>
<body>
<div id="InputForm" style="width:600;float:left;">
<table name="WeightAndBalance" border=4>
    <tr>
        <th>Front Seats</th>
        <th> <input id="FrontWeight" type="text" name="FrontWeight" onchange="javascript:GetMoment(FrontMoment,this.value,85.5)"> </th>
        <th>85.5 in</th>
        <th> <span id="FrontMoment" type="text" name="FrontMoment" style="width:50px">Front Seat Moment</span></th>
    </tr>
        <tr>
        <th>Rear Seats</th>
        <th> <input id="RearWeight" type="text" name="RearWeight" onchange="javascript:GetMoment(RearMoment,this.value,117)"> </th>
        <th>117 in</th>
        <th> <span id="RearMoment" type="text" name="RearMoment">Rear Seat Moment</span></th>
    </tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:12:27.167

改变：

```
GetMoment(RearMoment,this.value,117) 
```

到这个表格：

```
GetMoment('RearMoment',this.value,117) 
```

它发生的每个地方。id 是一个字符串。

* * *

此外，`javascript:`这是相当古老的学校 - 不需要它。它可以是这样的：

```
<input id="RearWeight" type="text" name="RearWeight" onchange="GetMoment('RearMoment',this.value,117)"> 
```

# java - 如何在 Windows 7 的 netbeans 中运行 RMI

> ID：14430834
> 
> 赞同：0
> 
> 时间：2013-01-21T00:09:16.207
> 
> 标签：java, rmi

您好，我是 Java 中 RMI 的新手。我正在使用 netbeans 6.9 和 windows 7。我有简单的 rmi 服务器和 rmi 客户端，但不知道如何运行它们。我正在使用命令提示符 start rmiregistry 1099 编写，并且该端口也在程序中使用。在我运行服务器之后，错误是

ava.rmi.server.ExportException：端口已在使用：1099；嵌套异常是：java.net.BindException：地址已在使用：JVM_Bind

你能告诉我运行简单 RMI 服务器的操作顺序是什么吗？我查看了许多教程，但无法做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:15:13.407

> 我正在使用命令提示符 start rmiregistry 1099 编写，并且该端口也在程序中使用。

你不能那样做。如果您想为 Registry 和您自己的远程对象使用相同的端口，您必须在同一个 JVM 中启动 Registry，使用`LocateRegistry.createRegistry()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:44:58.457

There is nothing wrong with your steps I think. But maybe in your server code you are trying to start rmiregistry again thus you face with this exception. Try not to start rmiregistry with command and just run server.

Also do you use any plugins from NetBeans?

If you can show us the server code we might be help a little more.

# html - 显示：阻止和直接超链接以更改 div 的可见性

> ID：14430836
> 
> 赞同：0
> 
> 时间：2013-01-21T00:09:26.630
> 
> 标签：html, hide, show

伙计们，我设置了显示：无的 div。有几个。有一个脚本运行，当点击链接时，它会将特定的 div 更改为 display:block。我需要的是一种使用直接超链接自动显示特定 div 的方法。有任何想法吗？

谢谢，等离子网格

```
NORMAL HEADER INFORMATION ---------

    <script type="text/javascript" src="http://domainlocation/Scripts/jquery.min.js"></script>

    <script type="text/javascript">
    function showonlyone(thechosenone) {
    $('div[name|="newboxes"]').each(function(index) {
    if ($(this).attr("id") == thechosenone) {
    $(this).show(300);
    }
    else {
    $(this).hide(300);
    }
    });
    }
     </script>

    <BODY>

    <BASEFONT SIZE="2" FACE="Arial">
    <div ALIGN="center">

   <TABLE CELLPADDING=3 BORDER=0 width="900px" style="font-size:14px;">
   <tr>
   <td>
    <div align="center">
    <a class="trbgshdw1" href="javascript:showonlyone('NucleusLst');" id="Nucleus">Nucleus Utilities</a>
    <span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('DisplayLst');" id="Display">Display (Monitor) Drivers</a></span>
   <span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('BiosLst');" id="Bios">Bios Utilities</a></span>
     <span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('CDImgLst');" id="CDImg">CD Imaging Utilities</a></span>
    <span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('DataCapLst');" id="DataCap">Data Capture Utility</a></span>
    <br><br>
    <a class="trbgshdw1" href="javascript:showonlyone('EdgePortLst');" id="EdgePort">EdgePort Drivers / Utilities</a>
    <span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('FTPLst');" id="FTP">FTP Utility</a></span>
    <span style="margin-left:25px;"><a class="trbgshdw1" href="http://asonet.wayne.com/extranet/dl-Fusion.asp" id="Fusion">Fusion</a>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('HostLdrLst');" id="HostLdr">Host Loader Files</a></span>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('ModemLst');" id="Modem">Modem Drivers</a></span>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('NetworkLst');" id="Network">Network Drivers</a></span>
            <br><br>
            <a class="trbgshdw1" href="javascript:showonlyone('OracleLst');" id="Oracle">Oracle Files / Utilities</a>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('TankMonLst');" id="TankMon">Tank Monitoring Utilities</a></span>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('TelnetLst');" id="Telnet">Telnet Utility For ESR</a></span>
<span style="margin-left:25px;"><a class="trbgshdw1" href="javascript:showonlyone('ZipUtilLst');" id="ZipUtil">Zip / Unzip Utilities</a></span>
            </div>

    <br>    
<!-- ** NUC **-->
    <div align="left" id="NucleusLst" name="newboxes" style="display: none;"><span style="color:#FFFFFF;font-size:22px;font-weight:bold;line-height:15px;">Nucleus</span>
        <table border="0" cellpadding="3" width="100%">

            <TR bgcolor="#ffffff"> 
                <td align="center" WIDTH="340px"><strong>Filename</strong></td>
                <td align="center" width="*"><strong>Filesize</strong></TH>
                <td align="center" WIDTH="400px"><strong>File Description</strong></Td>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">57 MB</TD>
                <TD>Java 1.5.0.05 <br> It is used for  reloading</TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">116 KB</TD>
                <TD>Diagnostic Files</TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">161 KB</TD>
                <TD>
                    For use with sites which may have difficulty with time change<br>
                    occuring on 11/01/2009.<br>
                </TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">3.83 MB</TD>
                <TD> Installation Files and Instructions</TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">700 KB</TD>
                <TD><br>(replacement for ver4.03 CDs)</TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">56 KB</TD>
                <TD>Matrix (as of 12/13/05)</TD>
            </TR>
            <TR bgcolor="#ffffff">
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">3 KB</TD>
                <TD>Memory upgrade </TD>
             </TR>
        </table>
        </div>

<!-- ** DISPLAY **-->
        <div align="left" id="DisplayLst" name="newboxes" style="display: none;"><span style="color:#FFFFFF;font-size:22px;text-align:left;font-weight:bold:">Display (Monitors)</span>
        <table border="0" cellpadding="3" width="100%">
            <TR bgcolor="#ffffff"> 
                <td align="center" WIDTH="340px"><strong>Filename</strong></td>
                <td align="center" width="*"><strong>Filesize</strong></TH>
                <td align="center" WIDTH="400px"><strong>File Description</strong></Td>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">2.7 MB</TD>
                <TD>Drivers </TD>
            </TR>
             <TR bgcolor="#ffffff"> 
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">3.9 MB</TD>
                <TD>Updated drivers.</TD>
            </TR>
            <TR bgcolor="#ffffff">
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">7 MB</TD>
                <TD> Installation Manual<sup>Draft</sup></TD>
            </TR>
        </table>
        </div>

<!-- ** BIOS **-->
        <div align="left" id="BiosLst" name="newboxes" style="display: none;"><span style="color:#FFFFFF;font-size:22px;text-align:left;font-weight:bold:">B I O S</span>
        <table border="0" cellpadding="3" width="100%">
            <TR bgcolor="#ffffff"> 
                <td align="center" WIDTH="340px"><strong>Filename</strong></td>
                <td align="center" width="*"><strong>Filesize</strong></TH>
                <td align="center" WIDTH="400px"><strong>File Description</strong></Td>
            </TR>
            <TR bgcolor="#ffffff">
                <TD><a href="FILEANDLOCATION" class="font12b">FILE</a><BR><br><a href="FILEANDLOCATION" class="font12b">FILE</a></TD>
                <TD align="center">1 MB<br><br>2 MB</TD>
                <TD><br>To install Bios Version 1.80 Using a Diskette<BR><br>To install Bios Version 1.80 Using a<br>Memory Key,Flash Drive, Thumb Drive</TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD align="center"><a href="FILEANDLOCATION">FILE</a></TD>
                <TD align="center">168 KB</TD>
                <TD>Service Memo </TD>
            </TR>
            <TR bgcolor="#ffffff"> 
                <TD align="center">**********</TD>
                <TD align="center">NA</TD>
                <TD>INFORMAITON TO BE ADDED</TD>
            </TR>
        </table>
        </div>

and so on for more DIVS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:30:49.283

用jQuery：

```
$('a').on('click', function(e) {
    var id = $(this).attr('href');
    $(id).show();

    // or from your example:

    showonlyone(id);

}); 
```

如果您不希望所有链接都附有事件，您需要一种方法来识别它们。

```
$('a[data-toggle="target"]').on('click', function(e) {
    var id = $(this).attr('href');
    $(id).show();

    // or from your example:

    showonlyone(id);

}); 
```

在前面的示例中，您将使用属性定位锚点`data-toggle="target"`：`<a href="#someelementid" data-toggle="target"></a>`

或者您可以定位引用 id 的锚点： `$('table a[href6^="#"]').on(...)`

如果锚点被动态添加到文档中： `$('table').delegate('a[href6^="#"]', 'click', function(e) {...});`

# algorithm - 生成快速彩色矩形

> ID：14430837
> 
> 赞同：2
> 
> 时间：2013-01-21T00:09:29.010
> 
> 标签：algorithm, qt, qt4, real-time, color-picker

我正在为 Qt 设计一个更强大的颜色选择器并寻求一些建议。如何生成快速的实时彩色矩形，例如 Photoshop 中的矩形（用于 HSB 和 RGB）。我最初想使用 QImage 和 scanline 来单独计算所有像素，但这可能太慢了。

我在想写一个OpenGL着色器会更好。我记得您可以为顶点分配颜色，它会为您插入更改。我只是不知道这将如何在 Qt 中完成，或者这是否值得付出努力。

我`QGraphicsView`用来显示矩形。任何意见，将不胜感激。

![在此处输入图像描述](../Images/5695b1af3c9c7d937c9b7fb9a91eb837.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:42:53.100

好吧，多研究一下 QGradients，你能不使用多个 QGradient 来创建你需要的效果吗？

对于 3 个示例中的最后一个，您可以为颜色本身创建一个带有多个停止点的单个渐变，然后用黑色（alpha 0）到黑色（alpha 255）的 QGradient 覆盖它，并使用适当的停止点让渐变进入正确的点。

# tomcat - Tomcat 7.0.35 不会在 Server 2008 R2 中启动

> ID：14430838
> 
> 赞同：1
> 
> 时间：2013-01-21T00:09:41.193
> 
> 标签：tomcat

我在安装了 64 位 JRE 的 Server 2008 R2（64 位）上启动/运行 64 位 Tomcat 时遇到问题。

**我安装了什么：（** 在 Server 2008 R2 64 位上）

Tomcat 7.0.35（64 位版本），解压缩到 C:\ 的顶层，因此 C:\tomcat 包含所有 Tomcat 目录，即 bin、conf、lib 等...

通过运行 exe 将 jre-7u11（64 位版本）安装到 C:\Program Files

**我做了什么：**

```
set CATALINA_HOME environment (user) variable to C:\tomcat

set JAVA_HOME system variable to C:\Program Files\Java\jre7 
```

**我尝试过的**（没有用）：将**JRE** _HOME 系统变量设置为`C:\Program Files\Java\jre7`

使用路径的简写，即：

> C:\程序~1\Java\jre7

摆脱空白

**会发生什么：** 双击该`C:\tomcat\bin\startup.bat`文件时，会立即打开一个 cmd 窗口，然后立即关闭。我在startup.bat的底部添加了PAUSE，输出如下：

' JAVA_HOME 和 JRE_HOME 环境变量均未定义。至少需要其中一个环境变量才能运行此程序'

**我的问题：** 我没有正确设置 JAVA_HOME 环境变量吗？（设置 JRE_HOME 环境变量也不起作用）

还有 - tomcat\logs 文件夹中没有任何内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:33:55.970

你在哪里设置这些变量？

如果您在控制台提示符中定义它们，您是否尝试过从设置变量的同一提示符运行 c:\tomcat\bin\startup.bat？我的猜测是双击会启动一个看不到变量集的新环境（在另一个环境中）

您可以右键单击“我的电脑”>“属性”>“高级”>“环境变量”，将 JAVA_HOME 添加到系统变量中，完成此步骤后重试。更改变量不会影响正在运行的进程和传入的子进程。

# vmware - VM 与另一个 VM 通信

> ID：14430847
> 
> 赞同：0
> 
> 时间：2013-01-21T00:10:36.043
> 
> 标签：vmware, virtual-machine, vmware-fusion

我有两个使用 VMWare Fusion 创建的独立虚拟机。一个运行 Windows 7。另一个运行 Centos。我在 Centos VM 上有一个应用程序，需要与 Windows VM 上的资源进行通信。有谁知道我如何设置虚拟机之间的通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:17:07.020

默认情况下，您的 Fusion 虚拟机都[从 DHCP 获取 IP 地址](https://mikewest.org/2009/05/static-ips-in-vmware-fusion-guests)。因此，如果它们是不同的机器，只需使用您想要获取的资源即可。

# ios - 网络连接丢失。- 仅在 iOS 上

> ID：14430853
> 
> 赞同：0
> 
> 时间：2013-01-21T00:12:47.610
> 
> 标签：ios, objective-c, webserver, nsurlconnection

这是我向服务器发送命令的方法：

```
- (void)sendCommand:(NSString *)command
{
    NSURL *phpURL=[NSURL URLWithString:[DTAPI_Host stringByAppendingString:DTAPI_Path]];

    NSMutableURLRequest *phpRequest=[[NSMutableURLRequest alloc] initWithURL:phpURL];
    [phpRequest setHTTPMethod:@"POST"];

    [phpRequest setValue:@"Accept" forHTTPHeaderField:@"application/json"];
    [phpRequest setValue:[NSString stringWithFormat:@"%d", command.length] forHTTPHeaderField:@"Content-length"];
    phpRequest.HTTPBody = [command dataUsingEncoding:NSUTF8StringEncoding];

    [NSURLConnection connectionWithRequest:phpRequest delegate:self];
} 
```

在里面：`- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error`

我得到：`Error Domain=NSURLErrorDomain Code=-1005 "The network connection was lost."`

最令人困惑的部分是当我在我的 Mac 上使用 Safari 发送相同的请求时，它可以正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:29:28.260

请用

```
[phpRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"]; 
```

而不是相反。

# java - 在运行时将属性文件添加到 java 类路径

> ID：14430855
> 
> 赞同：-1
> 
> 时间：2013-01-21T00:13:09.563
> 
> 标签：java

我的代码在运行时生成很少的属性文件，这些将被其他部分代码使用。但是代码的其他部分期望这些属性文件在类路径中。

有没有办法在运行时在类路径中生成文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:59:25.647

您可以简单地创建预先在类路径上设置的空文件，然后应用程序根据需要附加到这些文件中。

不过我想知道，您是否需要触摸硬盘？你不能用缓存来代替吗？

# python - 在关系数据库中存储聊天日志

> ID：14430856
> 
> 赞同：1
> 
> 时间：2013-01-21T00:13:24.587
> 
> 标签：python, sql, database, sqlite, database-design

我正在编写一个聊天机器人，它使用过去的对话来生成它的响应。目前我使用文本文件来存储所有数据，但我想使用数据库，以便机器人的多个实例可以同时使用它。

我应该如何构建这个数据库？

我的第一个想法是保留一个主表，例如`create table Sessions (startTime INT,ip INT, botVersion REAL, length INT, tableName TEXT)`. 然后对于每个对话，我`create table <generated name>(timestamp INT, message TEXT)`都会使用该对话期间发送或接收的所有消息。对话结束后，我将新表的名称插入到`Sessions(tableName)`. 以这种方式以编程方式创建表可以吗？我之所以问，是因为大多数 SQL 教程似乎都建议在程序初始化时创建表。

另一种方法是使用一个巨大的`create table Messages(id INT, message TEXT)`表来存储发送或接收的每条消息。当对话结束时，我可以添加一个新条目，`Sessions`其中包括`id`在该对话期间使用的条目，以便我可以查找在某个对话期间发送的所有消息。我想这样做的一个好处是我不需要数百或数千张桌子。

我计划使用 SQLite，尽管它的并发性很低，因为机器人的每个实例在生成响应之前可能会进行数千次读取（这将导致一次写入）。不过，如果另一个关系数据库更适合此任务，请发表评论。

注意：关于在数据库中存储聊天日志还有其他关于 SO 的问题，但我特别在寻找它应该如何构建以及对上述想法的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:22:24.453

不要为每个对话使用不同的表格。而是将“对话”列添加到您的单个表中。

# system.reactive - 观察者 .OnError 的假设似乎与 Stubs.Throw 不一致

> ID：14430857
> 
> 赞同：1
> 
> 时间：2013-01-21T00:13:32.790
> 
> 标签：system.reactive

IObservable<T>.Subscribe 的重载之一是

```
public static IDisposable Subscribe<T>(this IObservable<T> source, Action<T> onNext) 
```

在内部，这会`AnoymousObserver<T>`在 IObservable 上创建并注册一个。未指定的`onError`参数设置为`Stubs.Throw`which 是一个简单的 lambda，它重新抛出传入的异常。

在内部，IObservable 的观察者都包含在 Observer 类型的单个实例中。这是中的代码`Observer<T>.OnError`

```
public void OnError(Exception error)
{
    foreach (var observer in _observers.Data)
        observer.OnError(error);
} 
```

由于 Stubs.Throw 抛出异常，来自该观察者的 OnError 的异常通过 foreach 循环传递，并且 _observers.Data 中的其他观察者永远不会调用其 OnError。异常本身在 Rx 内部的某个地方被吞没了。

在我看来，要么 Observer<T>.OnError 应该将 observer.OnError 包装在 try-catch 中，要么 Stubs.Throw 应该吞下异常而不是抛出它。通过不传递 onError 参数，IObservable.Subscribe 的用户希望仅对该订阅忽略错误。使用自己的 onError 回调注册的其他订阅者应该不受影响。

（我已经在 Codeplex 上提交了一个[错误](http://rx.codeplex.com/workitem/12)，但跟踪器看起来很冷清，所以我想我也会问一下 SO，看看我是否理解正确。）

* * *

更新：阿斯蒂的回答是正确的。在关于链接的错误报告的讨论中，davedev 与 IEnumerable 进行了类比，并且默认抛出未处理的异常如何等同于在没有 catch 块的情况下迭代 IEnumerable 的默认值。

如果 observable 确定不应将特定异常视为致命异常，则不应使用 OnError 进行通信。OnError 不能保证被执行，因为调用它意味着 observable 一开始就出现了严重错误。相反，observable 可以定义为 IObservable< [Either](http://rxx.codeplex.com/SourceControl/changeset/view/70579#1055656) <T, Exception>> （[Observable2.Retry](http://rxx.codeplex.com/SourceControl/changeset/view/70579#1055697)中的示例用法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:10:47.703

这实际上是预期的行为。

`OnError`不是一个方法被调用来指示异常被抛出到观察者的`OnNext`- 它是表示异常终止可观察序列。默认`OnError`实现将在通知转换出 Observable monad 时抛出异常。

[如果您阅读Rx 设计指南](http://go.microsoft.com/fwlink/?LinkID=205219)，您将对 Rx 合同和异常处理有更清楚的了解。至于管道中的错误处理，以及更多类似`IEnumerable`/`IQueryable`的行为，请查看`SubscribeSafe`.

# r - R中的“重新排序”如何工作？

> ID：14430858
> 
> 赞同：-2
> 
> 时间：2013-01-21T00:13:38.497
> 
> 标签：r

以下代码中boxplot第一个参数中的公式如何在a重新排序后使b和a之间正确对应。

```
a <- as.factor(c("TX", "NY", "WA"))
levels(a)
b <- c(5, 3, 2)
boxplot(b ~ a)
# Order the levels of a according to their value in b
a_reordered <- reorder(a, b)
levels(a_reordered)
boxplot(b ~ a_reordered) 
```

为什么 b 也不需要重新排序？

编辑：我用@Marius的具体例子替换了我的例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T00:24:49.437

在您的`boxplot(quantity ~ bymedian)`通话中，x 轴上的状态顺序由`bymedian`因子的级别顺序决定。比较`levels(x$State)`，`levels(bymedian)`您会明白为什么这两个变量在绘图中使用时表现不同。请注意，数据本身`bymedian`并没有改变顺序。

一个简单的例子：

```
a <- as.factor(c("TX", "NY", "WA"))
levels(a)
b <- c(5, 3, 2)
boxplot(b ~ a)
# Order the levels of a according to their value in b
a_reordered <- reorder(a, b)
levels(a_reordered)
boxplot(b ~ a_reordered) 
```

为了清楚说明实际*数据*没有改变是什么意思：

```
> a
[1] TX NY WA
Levels: NY TX WA
> a_reordered
[1] TX NY WA
# Don't be confused by this extra attr(, "scores") bit: the line
# above is the actual data stored in the vector
#attr(,"scores")
#NY TX WA 
# 3  5  2 
Levels: WA NY TX
> b
[1] 5 3 2 
```

# javascript - Javascript：将关联数组转换为字符串并在以后以另一种方式返回的最佳方法？

> ID：14430859
> 
> 赞同：20
> 
> 时间：2013-01-21T00:13:41.033
> 
> 标签：javascript, arrays, associative-array

我有一个关联数组如下：

```
var AssocArray = { id:0, folder:'Next', text:'Apple' }; 
```

现在我需要将其存储在数据库中，所以我想我只需将其转换为字符串，将其存储在数据库中，然后将其从数据库中拉出，稍后再将其放回 javascript 数组中。

问题是实际的项目数和数组变量每次都会不同（因此我想将它存储为一个长字符串）。

将此关联数组转换为字符串的最佳方法是什么，反之亦然，如何将字符串转换为关联数组？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-21T00:15:39.410

没有什么比[**JSON**](https://developer.mozilla.org/en-US/docs/JSON)更好的了：

```
var str = JSON.stringify(obj);
// >> "{"id":0,"folder":"Next","text":"Apple"}"

var obj = JSON.parse(str);
// >> Object({ id: 0, folder: "Next", text: "Apple" }) 
```

# xaml - WP8 XAML ScrollViewer 停留在所选位置

> ID：14430860
> 
> 赞同：1
> 
> 时间：2013-01-21T00:13:48.400
> 
> 标签：xaml, windows-phone-8, windows-phone, scrollviewer

我在 ScrollViewer 中有一个 TextBox，如下所示

```
<ScrollViewer Name="scrollViewer1" Height="480" HorizontalAlignment="Left" Margin="0,480,8,82" VerticalAlignment="Bottom" Width="480" VerticalScrollBarVisibility="Auto">
        <TextBox Name="box1" TextWrapping="Wrap" FontSize="32" IsReadOnly="True" TextAlignment="Center"/>
    </ScrollViewer> 
```

我不希望 VerticalAlignment="Bottom" 因为我想滚动到 TextBox 中的特定位置并让它保持在那里而不会再次自动滚动到底部。

谢谢

# api - 试图用 Google Maps API 找出街道的 N / S / E / W 侧

> ID：14430861
> 
> 赞同：3
> 
> 时间：2013-01-21T00:14:15.467
> 
> 标签：api, google-maps

正在使用 Google Maps API 来找出一些 GIS 特定信息，但我们正在努力获取地址或地理编码所在的街道一侧。我查看了 stackoverflow 和 google maps api 组，但没有看到太多其他想要/需要它的人。

例如，`40 St Marks Ave, Brooklyn, NY`在街道的 S（南）侧，如果我们使用 Google 地图绘制它，我们可以看到这一点，但是当我们进行 API 调用时，我没有看到此信息返回的位置。

如果 API 真的没有返回某些东西，你们中的任何人都有聪明的方法来解决这个问题吗？一直在挠头，并开始认为我只是没有以正确的方式看待它。

顺便说一句，我们绝对需要以指南针坐标（又名 N/S/W/E）形式返回的街道信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:40:04.717

如果我需要这样做，我会：

1.  查看感兴趣区域中是否有 ROOFTOP 地理编码（它们用于[“40 St Marks Ave, Brooklyn, NY”](http://www.geocodezip.com/v3_example_geo2.asp?addr1=40%20St%20Marks%20Ave,%20Brooklyn,%20NY&geocode=1&type=sat)给出“location_type”：“ROOFTOP”），如果 ROOFTOP 地理编码不可用，这可能不起作用.
2.  获取从该点到自身的路线（应该为您提供道路上最近的位置）： [示例](http://www.geocodezip.com/v3_example_geo2.asp?addr1=40%20St%20Marks%20Ave,%20Brooklyn,%20NY&geocode=1&addr2=40%20St%20Marks%20Ave,%20Brooklyn,%20NY&geocode=2)
3.  计算[方位]（从街道到建筑物，反之亦然，这取决于您需要什么）。
4.  用它来确定指南针方向。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-06-06T15:03:24.100

想到的一个简单解决方案是在沿街移动时在多张图片上使用***时间戳。***从那里我们可以知道运动的方向，并知道建筑物是在街道的左边还是右边。

# django - 包含另一个自然键的自然键的 Django 反序列化

> ID：14430862
> 
> 赞同：0
> 
> 时间：2013-01-21T00:14:19.100
> 
> 标签：django, deserialization, natural-key

我正在创建一个记录玩家统计数据的模型。
通过首先手动输入数据点，我可以让 Django 使用自然键将数据序列化到一个 json 文件中，使用`dumpdata --natural`. 我的计划是复制这种序列化格式以大量插入其他数据点；问题是 Django 不会使用`loaddata`. 抛出的错误是

> DeserializationError: int() 参数必须是字符串或数字，而不是“列表”

我已经稍微简化了抱怨的 json 数据，但它看起来像这样：
`{"pk": 1, "model": "nba.metric", "fields": {"player": ["Kobe Bryant", ["Lakers", 2012]]}}`

我的模型是这样的：

```
class TeamManager(models.Manager):
    def get_by_natural_key(self, name, season):
        return self.get(name=name, season=season)
class Team(models.Model):
    name = models.CharField(max_length=20)
    season = models.IntegerField()
    class Meta:
        unique_together = ('name', 'season')
    objects = TeamManager()
    def natural_key(self):
        return (self.name, self.season)

class PlayerManager(models.Manager):
    def get_by_natural_key(self, name, team):
        return self.get(name=name, team=team)
class Player(models.Model):
    name = models.CharField(max_length=100)
    team = models.ForeignKey(Team)
    class Meta:
        unique_together = ('name', 'team')
    objects = PlayerManager()
    def natural_key(self):
        return (self.name, self.team.natural_key())

class Metric(models.Model):
    player = models.ForeignKey(Player)
    # ... 
```

非常感谢任何输入，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T10:16:24.343

我有完全相同的（棘手的）问题并设法以这种方式解决它。您需要更改`get_by_natural_key`方法，以便它接受`team.natural_key()`您在内部使用的 2 隐含给出的参数`Player.natural_key()`。尝试这个：

```
class PlayerManager(models.Manager):
    def get_by_natural_key(self, name, team_name, team_season):
        return self.get(name=name, team__name=team_name, team__season=team_season) 
```

如果您找到了 Django 自动处理此问题的另一个解决方案，我会很高兴听到它。

# java - 如何在Java中将字符串值从一个类调用到另一个类

> ID：14430864
> 
> 赞同：2
> 
> 时间：2013-01-21T00:14:33.680
> 
> 标签：java, string

所以在一个类中，我有这个字符串：`String LB = lcfield.getText();`存储`JTextField`. 在另一个类中，我有一个 SQL 语句，我需要使用与`LB`字符串中的任何内容相同的值。

如何调用这个字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T00:17:35.760

在拥有的类内部`JTextField`：

```
public String getLcfieldText() {
   return lcfield.getText();
} 
```

在 SQL 语句旁边，您可以简单地执行以下操作：

```
String lcFieldText = fooView.getLcfieldText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:34:20.020

你有几个选择。

一种选择是使 String LB 变量成为您的第一个类的静态公共变量，或者使用 getter 方法来检索它的私有变量。

第二个选项取决于第一个类如何创建第二个类的实例。您可以创建一个接受字符串值的构造函数，在创建对象以调用 sql 时将其传入。

我想这取决于你如何设置程序。我写的一个摇摆程序中有这样的东西。我将 sql 字符串存储在我的 gui java 类的公共静态字符串变量中。然后，当我需要执行 sql 时，我创建第二个类的实例，然后调用它的 sql 方法，该方法将 String 参数作为输入，这是我将 String 值传入执行的地方。

例如。第一类有 public static String mySql；第二类有一个名为 executeSql(String sql); 的方法。

在第一类的字符串中创建一些 sql 后，我创建第二类的一个实例并调用 classTwo.executeSql(mySql);

# c - Glib 信号 - 如何检查实例的处理程序是否已被阻止？

> ID：14430869
> 
> 赞同：6
> 
> 时间：2013-01-21T00:15:46.453
> 
> 标签：c, gtk, glib, gobject

在实例`g_signal_handler_block`的处理程序被 阻塞后，除了将状态存储在布尔变量中之外，是否可以检查处理程序是否仍然被阻塞或同时被 g_signal_handler_unblock 解除阻塞？

我希望这样的事情是可能的

```
g_signal_handler_block (selection, handler_id_row_selected);
if (g_signal_handler_is_blocked (selection, handler_id_row_selected))
  g_print ("is still blocked"); 
```

但是`"g_signal_handler_is_blocked"`函数不存在。`g_signal_handler_is_connected`不是使用正确的函数，因为信号处理程序保持连接，因此该函数返回 TRUE。

我试过了`g_signal_handler_find ()`，因为有`G_SIGNAL_MATCH_UNBLOCKED`一种匹配类型，但它还没有奏效。即使我已经重写了我的代码，我仍然想知道它是否可能，因为我相对经常使用阻塞/解除阻塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:46:06.967

`g_signal_handler_find`这里按预期工作。这是我的测试用例：

```
#include <gtk/gtk.h>

gboolean
g_signal_handlers_is_blocked_by_func(gpointer instance, GFunc func, gpointer data)
{
    return g_signal_handler_find(instance,
                                 G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA | G_SIGNAL_MATCH_UNBLOCKED,
                                 0, 0, NULL, func, data) == 0;
}

static void
handler(void)
{
    g_print("handler called\n");
}

static void
switch_blocking(GtkWidget *button)
{
    GFunc func = (GFunc) handler;

    if (g_signal_handlers_is_blocked_by_func(button, func, NULL)) {
        g_signal_handlers_unblock_by_func(button, func, NULL);
        g_print("handler unblocked\n");
    } else {
        g_signal_handlers_block_by_func(button, func, NULL);
        g_print("handler blocked\n");
    }
}

int
main(int argc, char **argv)
{
    GtkWidget *window;
    GtkWidget *button;

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    button = gtk_button_new_with_label("Click me");

    g_signal_connect_after(button, "clicked", G_CALLBACK(switch_blocking), NULL);
    g_signal_connect(button, "clicked", G_CALLBACK(handler), NULL);

    gtk_container_add(GTK_CONTAINER(window), button);
    gtk_widget_show_all(window);
    gtk_main();

    return 0;
} 
```

# c# - InternalsVisibleTo 除了少数类

> ID：14430877
> 
> 赞同：5
> 
> 时间：2013-01-21T00:17:06.207
> 
> 标签：c#, .net, compiler-construction, internalsvisibleto

我申请`InternalsVisibleTo`了我的一个项目，以使其内部结构对测试项目可见。但是，（我知道这很奇怪）我需要标记一些内部类，以便它们对通过`InternalsVisibleTo`.

编译器知道我可以为此应用任何属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T01:16:15.887

安德森席尔瓦是正确的。没有办法做到这一点。您应该考虑将类型移动到新程序集。或者，您可以考虑应用该`[EditorBrowsable(EditorBrowsableState.Never)]`属性来隐藏 IntelliSense 中的类型，尽管如果用户知道它们，代码将编译。

# php - PHP MySQL 正确使用更新的方法

> ID：14430883
> 
> 赞同：0
> 
> 时间：2013-01-21T00:17:34.480
> 
> 标签：php

问题：我该怎么做才能用值更新第一列结果，而不是最后一个？

```
$row = mysql_fetch_assoc(
mysql_query("SELECT canadd FROM myusers WHERE IP='{$_SERVER['REMOTE_ADDR']'");
$tq=$row['canadd'];
if ($tq==3)
die('you cannot add anymore users!');
++$tq;
mysql_query("UPDATE myusers SET canadd='{$tq}' WHERE IP='{$_SERVER['REMOTE_ADDR']}' "); 
```

像这样更新结果（当我执行两次代码时会发生什么）：

前：

```
canadd | IP   | ETC.
1      | myip | etc. 
```

后：

```
canadd | IP   | ETC.
1      | myip | etc.
2      | myip | etc. 
```

我试过了：

```
UPDATE myusers SET canadd='{$tq}' WHERE IP='{$_SERVER['REMOTE_ADDR']}' limit 1 
```

但这没有用。所以我尝试了一些其他的东西，但也没有奏效。

# asp.net - SelectedIndexChanged 触发不一致

> ID：14430888
> 
> 赞同：0
> 
> 时间：2013-01-21T00:19:03.397
> 
> 标签：asp.net, ascx, selectedindexchanged

我有一个`RadComboBox`ascx ，它既用作内联页面中的控件，也用作弹出窗口中的控件。selectedindexchanged 在内联页面实例中触发，但不在弹出窗口中触发。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:48:58.633

这与 RadComboBox 以及 RadScriptManager 未正确加载有关

# android - 调整图像大小并设置CompoundDrawablesWithIntrinsicBounds

> ID：14430893
> 
> 赞同：4
> 
> 时间：2013-01-21T00:19:44.597
> 
> 标签：android, resize, image-resizing

我的应用程序包含带有图像的按钮，使用*setCompoundDrawablesWithIntrinsicBounds*设置。我使用应用程序的*drawables*文件夹中的图像，但也使用从网络下载并存储在 SD 卡上的图像。我发现我需要放大 SD 卡图像，以便它们渲染为与*drawables*中的图像相同的大小。我这样做是使用：

```
 Options opts = new BitmapFactory.Options();

    opts.inDensity = 160;
    Bitmap bm = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory() +
      context.getResources().getString(R.string.savefolder) + iconfile, opts);

    myIcon = new BitmapDrawable(context.getResources(), bm);
    btn.setCompoundDrawablesWithIntrinsicBounds(myIcon, null, null, null ); 
```

这一直没有问题，直到我将手机更新到 Android 4.1.1 并注意到下载的图像现在显示的尺寸比可绘制文件夹中的图像小得多。

我把*inDensity*值弄乱了，效果不大，但是在基于*btnheight*值（只是图像所在按钮的高度）缩放位图方面取得了更大的成功：

```
 int intoffset=bm.getHeight() - bm.getWidth();                   
    myIcon = new  BitmapDrawable(context.getResources(), 
      Bitmap.createScaledBitmap(bm, btnheight - (((btnheight/100)*10) +
      intoffset) , btnheight - ((btnheight/100)*10), true)); 
```

这类作品，但图像仍然比它所在的按钮大一点（根据上面的情况，这不应该是这种情况，因为它应该将图像高度缩放到按钮高度的 90%。）我这样做是为了测试。我不能在我的应用程序中使用此方法，因为按钮高度会根据按钮上显示的字体大小而变化，用户可以在应用程序首选项中更改此字体大小。

顺便说一句，我发现奇怪的是（？），通过使用将位图缩放到原始高度的两倍

```
 Bitmap.createScaledBitmap(bm, bm.getWidth() * 2
       , bm.getHeight() * 2, true)); 
```

它在 4.0.3 和 4.1.1 中正确渲染（嗯，它以与可绘制图标相同的大小显示），但在 2.1 中表现得如您所愿（渲染得比它所在的按钮大）。

如果有人对为什么会在 4.1.1 中发生这种情况有任何见解，以及我可以做什么，我的 decodeFile 位图呈现与我的可绘制位图相同的大小，而无需单独为 4.1.1 编写代码，我将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:17:20.263

将我的原始代码修改为如下适用于 4.1.1 以及我测试过的以前的版本......

```
 Options opts = new BitmapFactory.Options();

   DisplayMetrics dm = new DisplayMetrics();
   context.getWindowManager().getDefaultDisplay().getMetrics(dm);

    int dpiClassification = dm.densityDpi;

    opts.inDensity = dm.DENSITY_MEDIUM;

    opts.inTargetDensity = dpiClassification;
    opts.inScaled =true;

    Bitmap bm = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory() +
     context.getResources().getString(R.string.savefolder) + iconfile, opts);

    myIcon = new BitmapDrawable(context.getResources(), bm);
    btn.setCompoundDrawablesWithIntrinsicBounds(myIcon, null, null, null ); 
```

# r - R循环在多个文件上进行方差分析

> ID：14430896
> 
> 赞同：3
> 
> 时间：2013-01-21T00:20:17.137
> 
> 标签：r, loops, anova

我想`anova`对存储在我的工作目录中的多个数据集执行。到目前为止，我提出了：

```
files <- list.files(pattern = ".csv")
for (i in seq_along(files)) {
    mydataset.i <- files[i]
    AnovaModel.1 <- aov(DES ~ DOSE, data=mydataset.i)
    summary(AnovaModel.1)
} 
```

如您所见，我对循环非常陌生，无法完成这项工作。我也知道我需要添加一个代码以将所有摘要输出附加到一个文件中。我将不胜感激您可以提供任何帮助来指导工作循环，该循环可以在目录中的多个 .csv 文件（相同的标题）上执行 anovas 并生成记录输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:26:13.750

如果您不在同一条路径上，您可能希望使用`list.files`with 。`full.names = TRUE`

```
files <- list.files("path_to_my_dir", pattern="*.csv", full.names = T)
# use lapply to loop over all files
out <- lapply(1:length(files), function(idx) {
    # read the file
    this.data <- read.csv(files[idx], header = TRUE) # choose TRUE/FALSE accordingly
    aov.mod <- aov(DES ~ DOSE, data = this.data)
    # if you want just the summary as object of summary.aov class
    summary(aov.mod)
    # if you require it as a matrix, comment the previous line and uncomment the one below
    # as.matrix(summary(aov.mod)[[1]])
})
head(out) 
```

这应该为您`list`提供一个列表的每个条目，其顺序与输入文件列表`summary matrix`的*顺序相同。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:57:16.900

您的错误是您的循环没有加载您的数据。您的文件名列表在“文件”中，然后您开始浏览该列表并将 mydataset.i 设置为与您的迭代器 i 匹配的文件的名称...但是您尝试在文件名上运行 aov存储在 mydataset.i 中！

您正在寻找将输出重定向到文件的命令是 sink。考虑以下：

```
sink("FileOfResults.txt") #starting the redirect to the file
files <- list.files("path_to_my_dir", pattern="*.csv", full.names = T) #using the fuller code from Arun
for (i in seq_along(files)){
   mydataset.i <- files[i]
   mydataset.d <- read.csv(mydataset.i) #this line is new
   AnovaModel.1 <- aov(DES ~ DOSE, data=mydataset.d) #this line is modified
   print(summary(AnovaModel.1))
} 
sink() #ending the redirect to the file 
```

我更喜欢 Arun 的这种方法，因为结果直接存储到文件中，无需跳过列表，然后必须弄清楚如何以可读的方式将列表存储到文件中。

# c - 如何在 C（Linux utf8 终端）中打印“盒子抽屉”Unicode 字符？

> ID：14430899
> 
> 赞同：4
> 
> 时间：2013-01-21T00:20:26.677
> 
> 标签：c, linux, unicode

我正在尝试显示（画框范围：2500–257F）中的 Unicode 字符。它应该是标准的 utf8（Unicode 标准，版本 6.2）。我根本做不到。

我首先尝试使用良好的旧 ASCII 字符，但 Linux 终端以 utf8 显示，并且没有显示转换（符号？）。

谁能回答这些问题：

*   如何在 C 变量（`style wchar_t`）中编码 unicode 字符？
*   如何为 Unicode 使用转义序列，例如 0x 或 0o（十六进制，八进制）？

我知道 U+，但它似乎没有用。

```
setlocale(LC_ALL,"");
short a = 0x2500, b = 0x2501;
wchar_t ac = a;
wchar_t bc = b;
wprintf(L"%c%c\n", ac, bc);
exit(0); 
```

我知道结果与使用的字体有关，但我使用 utf8 字体（[http://www.unicode.org/charts/fonts.html](http://www.unicode.org/charts/fonts.html)）并且必须显示从 2500 到 257F 的代码......实际上它们是不。

提前感谢您的帮助...

[最近编辑] 这个问题已经解决了......我发现了如何使用 wprintf() 和 %lc 而不是 %c...... 并且更深入。现在，那些弓形抽屉是我学生“工具”库的一部分，可以让控制台编程学习更加丰富多彩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T00:35:27.100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T19:56:57.457

这取决于你所说的“终端”。

linux 控制台使用各种 hack 来显示 unicode，但实际上它的字体仅限于 512 个符号 IIRC，因此它不能真正显示整个 unicode 范围，它可以显示的内容取决于加载的字体（这可能会在未来发生变化）。

用于访问 Linux 的 Windows 终端通常以一种或另一种 unicode 方式受到脑损伤。

物理终端通常更差，并且只能在 ascii-land 中运行

Linux GUI 终端（例如 gnome-terminal）几乎可以显示所有内容，只要您有相应的字体。

您确定不想使用 ncurses 而不是编写自己的终端小部件吗？

# php - 使用 Zend Translate 和 gettext 文件的默认语言环境

> ID：14430900
> 
> 赞同：0
> 
> 时间：2013-01-21T00:20:28.437
> 
> 标签：php, internationalization, zend-translate

经过数小时的`gettext`功能斗争并承认失败后，我下载了 Zend 框架以在我的项目中使用。它终于与我到目前为止的 gettext 文件一起使用了，但现在我想知道如何在默认语言环境中显示默认文本？

我的 config.php 文件的一部分（它包含在顶部的每个文件中）：

```
<?php
// ...
define('LANGUAGE', (isset($_GET['lang']) && $_GET['lang'] === 'fr') ? 'fr-CA' : 'en-CA');
define('LOCALE', (isset($_GET['lang']) && $_GET['lang'] === 'fr') ? 'fr_CA' : 'en_CA');
// ...

$translator = new \Zend\I18n\Translator\Translator();
$translator->addTranslationFile('gettext', dirname(__FILE__) . '/locale/' . LOCALE . '.mo', 'messages', LOCALE);
$translator->setLocale(LOCALE); 
```

法语翻译工作正常，但对于英语，它正在寻找不存在的`en_CA.mo`文件（我从方法中假设）。`addTranslationFile()`如果正在显示英文版本，如何使键回显？制作一个 en_CA.mo 文件似乎是多余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:39:24.683

如果您允许翻译不同语言的多种翻译，那么您至少需要创建一个空白的 en_CA.mo 文件。否则，您会发现正在显示的错误。由于 en_CA.mo 文件为空白，因此将显示翻译键而不是实际翻译本身。

# android - 短信收件箱上的 ContentObserver 不起作用

> ID：14430903
> 
> 赞同：0
> 
> 时间：2013-01-21T00:20:54.047
> 
> 标签：android, contentobserver

我启动了一个像这样注册`ContentObserver`的服务`SMS inbox`

```
smsObserver = new SmsObserver(new Handler());
getContentResolver().registerContentObserver(Uri.parse("content://sms/inbox"), true, smsObserver); 
```

这是类，我只想知道何时对提供者进行了更改但我没有得到`onChange`方法的回调

```
private class SmsObserver extends ContentObserver{

    public SmsObserver(Handler handler) {
        super(handler);
    }

    @Override
    public void onChange(boolean selfChange){
        super.onChange(selfChange);
        Cursor c = getContentResolver().query(Uri.parse("content://sms/inbox"),
                new String[] {"thread_id"},"address" + "=" + from,null,null);
        if(c != null && c.moveToLast()){
            long id = c.getLong(0);
            Log.d("ID", c.getString(0));
        }
        c.close();
    }
} 
```

我还为 Uri 注册了一个观察者，这个观察者`content://mms-sms/conversations`有效，我只是复制了我从这个到 SmsObserver 类的所有操作，所以我不知道出了什么问题，我可以不设置观察者`content://sms/inbox`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:20:22.987

-首先，像这样注册你的`ContentObserver`：

```
getContentResolver().registerContentObserver(Uri.parse("content://mms-sms/inbox"), true, smsObserver); 
```

- 然后，覆盖您的以下方法`ContentObserver`：

```
@Override    
public void onChange(boolean selfChange, Uri uri){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:57:09.507

尝试使用广播接收器：。是必要的登记广播。请参阅：[SMS 广播接收器问题](https://stackoverflow.com/questions/7018536/problem-with-sms-broadcast-receiver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:35:32.620

如果您使用的是广播接收器，则广播结束时将短信放入数据库。这意味着您需要触发 bg 线程并使其休眠一小段时间，然后 sms 将显示在数据库中

# bonjour - 多线程 avahi 解析导致段错误

> ID：14430906
> 
> 赞同：1
> 
> 时间：2013-01-21T00:21:16.160
> 
> 标签：bonjour, dbus, zeroconf, avahi

我正在尝试将启用 zeronconf 的 C/C++ 应用程序移植到 Linux，但是我得到了与 D-BUS 相关的段错误。我不确定这是 Avahi 中的错误、我对 Avahi 的误用，还是我的代码中的错误。

我正在使用一个封装了 AvahiClient、AvahiSimplePoll 和 AvahiServiceResolver 的 ZeroconfResolver 对象。ZeroconfResolver 有一个 Resolve 函数，它首先实例化 AvahiSimplePoll，然后是 AvahiClient，最后是 AvahiServiceResolver。在每次实例化之前，我都会检查错误，然后再继续下一个。在成功创建 AvahiServiceResolver 后，它会使用 AvahiSimplePoll 调用 avahi_simple_poll_loop。

整个过程在同步完成时效果很好，但在同时异步使用多个 ZeroconfResolver 时会因段错误而失败（即，我有多个线程创建自己的 ZeroconfResolver 对象）。可以在下面的代码中看到重现段错误的对象的简单改编（可能不会立即产生段错误，但在我的用例中它经常发生）。

我了解“开箱即用”Avahi 不是线程安全的，但根据我对 [1] 的解释，只要不从超过一根线。每个 ZeroconfResolver 都有自己的一组 Avahi 对象，它们不会跨线程边界相互交互。

段错误发生在 Avahi 库中看似随机的函数中。通常，它们发生在引用 dbus 的 avahi_client_new 或 avahi_service_resolver_new 函数中。Avahi wiki 是否意味着暗示 AvahiClient/AvahiPoll 对象的“创建”也不是线程安全的？

[1] [http://avahi.org/wiki/RunningAvahiClientAsThread](http://avahi.org/wiki/RunningAvahiClientAsThread)

```
#include <dispatch/dispatch.h>
#include <cstdio>

#include <sys/types.h>
#include <netinet/in.h>

#include <avahi-client/lookup.h>
#include <avahi-client/client.h>
#include <avahi-client/publish.h>
#include <avahi-common/alternative.h>
#include <avahi-common/simple-watch.h>
#include <avahi-common/malloc.h>
#include <avahi-common/error.h>
#include <avahi-common/timeval.h>

void resolve_reply(
  AvahiServiceResolver *r,
  AVAHI_GCC_UNUSED AvahiIfIndex interface,
  AVAHI_GCC_UNUSED AvahiProtocol protocol,
  AvahiResolverEvent event,
  const char *name,
  const char *type,
  const char *domain,
  const char *host_name,
  const AvahiAddress *address,
  uint16_t port,
  AvahiStringList *txt,
  AvahiLookupResultFlags flags,
  void * context) {

    assert(r);

    if (event == AVAHI_RESOLVER_FOUND)
      printf("resolve_reply(%s, %s, %s, %s)[FOUND]\n", name, type, domain, host_name);

    avahi_service_resolver_free(r);
    avahi_simple_poll_quit((AvahiSimplePoll*)context);
}

int main() {
  // Run until segfault
  while (true) {
    // Adding block to conccurent GCD queue (managed thread pool)
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), [=]{
      char name[] = "SomeHTTPServerToResolve";
      char domain[] = "local.";
      char type[] = "_http._tcp.";

      AvahiSimplePoll * simple_poll = NULL;
      if ((simple_poll = avahi_simple_poll_new())) {
        int error;
        AvahiClient * client = NULL;
        if ((client = avahi_client_new(avahi_simple_poll_get(simple_poll),   AVAHI_CLIENT_NO_FAIL, NULL, NULL, &error))) {
          AvahiServiceResolver * resolver = NULL;
             if ((resolver = avahi_service_resolver_new(client, AVAHI_IF_UNSPEC,     AVAHI_PROTO_UNSPEC, name, type, domain, AVAHI_PROTO_UNSPEC, AVAHI_LOOKUP_NO_ADDRESS,     (AvahiServiceResolverCallback)resolve_reply, simple_poll))) {
               avahi_simple_poll_loop(simple_poll);
               printf("Exit Loop(%p)\n", simple_poll);
             } else {
               printf("Resolve(%s, %s, %s)[%s]\n", name, type, domain, avahi_strerror(avahi_client_errno(client)));
             }
             avahi_client_free(client);
        } else {
          printf("avahi_client_new()[%s]\n", avahi_strerror(error));
        }
        avahi_simple_poll_free(simple_poll);
      } else {
        printf("avahi_simple_poll_new()[Failed]\n");
      }
    });
  }

  // Never reached
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:41:22.053

一种似乎工作正常的解决方案是围绕 avahi_client_new、avahi_service_resolver_new 和相应的免费操作添加您自己的同步（一个通用互斥锁）。avahi 似乎没有声称这些操作是内部同步的。

所声称的是独立对象不干涉。

我使用这种方法取得了成功，使用带有静态互斥锁的辅助类。具体来说，像这样的静态成员函数（或自由函数）：

```
std::mutex& avahi_mutex(){
  static std::mutex mtx;
  return mtx;
} 
```

并锁定任何免费或新的代码部分（尽可能小）：

```
{
  std::unique_lock<std::mutex> alock(avahi_mutex());
  simple_poll = avahi_simple_poll_new()
} 
```

# c# - ImageResizer 库：除非重建项目，否则插件无法加载

> ID：14430907
> 
> 赞同：1
> 
> 时间：2013-01-21T00:21:16.273
> 
> 标签：c#, asp.net-mvc-4, imageresizer

我在 ASP.NET MVC 4 项目中使用[ImageResizer 库](http://imageresizing.net "ImageResizer 库")（版本 3.2.4），并带有以下插件：Watermark、MvcRoutingShim、DiskCache 和 SimpleFilters。

当我第一次在 Visual Studio 2012 中启动项目时，一切正常。

但是在停止并重新启动项目 2 或 3 次后，插件无法加载，这在诊断页面中得到了确认：

```
(...)
Plugins(ConfigurationError):    Failed to load plugin by name "Watermark"
 Verify the plugin DLL is located in /bin, and that the name is spelled correctly. 

Plugins(ConfigurationError):    Failed to load plugin by name "MvcRoutingShim"
  Verify the plugin DLL is located in /bin, and that the name is spelled correctly. 
(...) etc. 
```

DLL 文件位于 \bin 文件夹中。

我可以通过在 Visual Studio 中执行项目的“清理”操作，然后“重建”来解决问题。

但是为什么插件在一段时间后无法加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:44:48.223

VS 很可能懒于构建代码中未引用的依赖项。

尝试从代码而不是仅从 Web.config 引用 DLL，它可能会有所帮助。

将以下代码放入 Application_Start：

```
new WatermarkPlugin().Install(Config.Current); 
```

查看水印是否仍然在诊断页面上显示为丢失。

# php - 内容处置：表单数据；姓名

> ID：14430908
> 
> 赞同：2
> 
> 时间：2013-01-21T00:21:22.397
> 
> 标签：php, html, curl

我想知道如何从下面的代码中获取的 html 结果中获取消息值：

```
$rawPostData = file_get_contents('php://input');
var_dump($rawPostData); 
```

HTML 结果

```
string(366) "------------------------------b8059a4b17b3 Content-Disposition: form-data; name="message" title ------------------------------b8059a4b17b3 Content-Disposition: form-data; name="userid" userid ------------------------------b8059a4b17b3 Content-Disposition: form-data; name="date" January 21, 2013, 1:16 am ------------------------------b8059a4b17b3-- " " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:27:05.997

解决方案：

在你的卷曲中：

```
curl_setopt($ch, CURLOPT_POSTFIELDS,http_build_query($postarray)); 
```

在您的 api 脚本中：

```
$rawPostData = file_get_contents('php://input');

parse_str($rawPostData,$rr);
var_dump($rr['message']); 
```

# android - Android - 奇怪的行为 html 样式最大宽度

> ID：14430912
> 
> 赞同：0
> 
> 时间：2013-01-21T00:22:37.407
> 
> 标签：android, html, css, image, android-webview

我想在 WebView 中显示一些 html。在该 html 代码中，有一个图像标签“img src”和一个样式：`style="max-width:300px;max-height:300px;"`。我的智能手机的显示宽度是 480 像素。当我将最大宽度样式设置为 480 像素时，图像不适合显示并且不完全可见。在 WebView 周围，没有 Margin 或 Padding。但是当我将最大宽度设置为 300 像素时，图像非常适合。这是什么原因？我的显示器宽度为 480 像素，而该样式的图像为 300 像素。

```
webView.loadData(newContent, "text/html; charset=UTF-8", null); 
```

Html 代码（新内容）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0">
<img src="http:...jpg" style="max-width:300px;max-height:300px;" />
<p>Text Text Text</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:58:57.183

我已经测试了很多方法并通过使用百分比来解决这个问题。现在，如果图像很大，图像非常适合显示，如果图像小于显示，则保持其宽度。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0">
<img src="http:...jpg" style="max-width:100%;" />
<p>Text Text Text</p>
</body>
</html> 
```

# php - 在运行时检索 PHP 中的局部变量？

> ID：14430914
> 
> 赞同：-1
> 
> 时间：2013-01-21T00:22:50.613
> 
> 标签：php, local-variables

如果我`print_r`在 $GLOBALS 中这样做，我将拥有所有全局变量。

但我需要这样的东西：

```
function foo() {
   $a = 1;
   $b = 2;
   for($i = 0; $i < 10; $i++);
}

print_r(find_variables_in_function('foo')); // results: array(a => 1, b => 2, i => 10); 
```

我正在尝试在[code.google.com/p/webgrind/](http://code.google.com/p/webgrind/)中实现一个新功能- 因为这个工具在运行时为我提供了函数，所以我可以在所有调用的函数结束时按变量大小生成一个图表。

```
$x = 2;
$y = 3;

function foo() {
    $a = 1;
    $b = 2;
    for ($i = 0; $i < 10; $i++)
        ;

    print_r(get_defined_vars()); // has no side effects - print null string
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:52:02.403

get_defined_vars() 返回一个包含在调用它的范围内定义的所有变量的数组。如果您从函数中调用它，您将获得该函数中定义的变量，这是文档：

[http://php.net/manual/en/function.get-defined-vars.php](http://php.net/manual/en/function.get-defined-vars.php)

例如：

```
<?php 
   function foo() {
       $a = 'first';
       $b = 'second';
       $c = get_defined_vars();
       print "vars=";print_r($c);print"\n";        
   }
   foo();
?> 
```

这里打印什么

```
$ php testgdvars.php
vars=Array
(
    [a] => first
    [b] => second
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:27:08.750

在函数之外，未定义变量。除了静态变量，那些是函数私有的。

为什么不直接`var_dump($a,$b,$i);`在函数末尾添加 a 呢？

# wxpython - wxpython动态规划

> ID：14430915
> 
> 赞同：0
> 
> 时间：2013-01-21T00:23:21.757
> 
> 标签：wxpython

我是 Wxpython 编程的新手，我对如何使我的应用程序更程序化有一个大致的了解。

假设，我有一棵树，树中列出了员工列表。当我单击员工时，将在数据库中检索信息，并将信息显示在面板的右侧。

现在，当我编辑其中一名员工的信息并再次保存时，表中的当前行需要结束日期，新行将在数据库中创建并刷新树。

因此，基本上，如果保存了某些内容，则应自动刷新树。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:24:42.147

我不相信默认的 TreeCtrl 内置了数据库交互。您将不得不添加它。如果您希望它定期检查更新，您可以使用 wx.Timer。如果您将使用 wxPython GUI 更新数据库，那么应该没有问题，因为无论如何您都必须更新显示。

您可能还想查看 wxPython 演示中的 DVC_DataViewModel。我认为它可能会使这类事情变得更容易，因为它具有数据对象的概念，我认为这意味着您可以创建一个数据库对象来提供您的 GUI。

# ios - 翻转和旋转

> ID：14430919
> 
> 赞同：3
> 
> 时间：2013-01-21T00:23:52.737
> 
> 标签：ios, objective-c, cocoa-touch, ios4, core-animation

我有 2 个视图。我想要一张卡片翻转并沿其轴旋转以显示另一个视图。

因此，当我单击 view1 时，view1 应该翻转，但在它围绕 y 轴旋转以显示视图 2 的意义上翻转。

我在 IOS 中使用 FLIP 指令，但这并没有执行我正在寻找的“旋转”：

```
[UIView transitionFromView:(self.displayingPrimary ? self.primaryView : self.secondaryView)
                    toView:(self.displayingPrimary ? self.secondaryView : self.primaryView)
                  duration: 2.0
                   options: (self.displayingPrimary ? UIViewAnimationOptionTransitionFlipFromLeft :
                             UIViewAnimationOptionTransitionFlipFromRight) | UIViewAnimationOptionShowHideTransitionViews

                completion:^(BOOL finished) {
                    if (finished) {
                        self.displayingPrimary = !self.displayingPrimary;
                    }
                }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:23:52.640

如果您不喜欢内置的翻转转换，有几种方法可以在 iOS 上使用 Quartz 将一个视图翻转到另一个视图。以下两个代码片段都要求您`#import <QuartzCore/QuartzCore.h>`链接到 QuartzCore 框架。请注意，我编写的两个函数都假定两个视图都作为具有相同框架的子视图添加，其中一个是隐藏的 ( `setHidden:`)。

第一个函数将使用 2D 转换将一个视图翻转到另一个视图。这更有效，它真正做的只是沿 x 轴缩放。在高速下，它看起来相当不错，IMO。

```
+ (void)flipFromView1:(UIView*)v1 toView:(UIView*)v2 duration:(NSTimeInterval)duration completion:(void (^)(BOOL finished))completion
{
    duration = duration/2;

    [v2.layer setAffineTransform:CGAffineTransformMakeScale(0, 1)];
    [UIView animateWithDuration:duration delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        [v1.layer setAffineTransform:CGAffineTransformMakeScale(0, 1)];
    } completion:^(BOOL finished){
        [v1 setHidden:YES];
        [v2 setHidden:NO];
    }];

    [UIView animateWithDuration:duration delay:duration options:UIViewAnimationOptionCurveEaseOut animations:^{
        [v2.layer setAffineTransform:CGAffineTransformMakeScale(1, 1)];
    } completion:completion];
} 
```

第二个函数执行实际的 3D 转换。请注意，如果使用此 3D 变换旋转的视图位于 3D 空间中的其他子视图之上或之下，那么您可能会看到这些其他视图在此动画期间穿过或隐藏。

```
+ (void)flipFromView2:(UIView*)v1 toView:(UIView*)v2 duration:(NSTimeInterval)duration rToL:(BOOL)rToL completion:(void (^)(BOOL finished))completion
{
    duration = duration/2;

    v2.layer.transform = CATransform3DMakeRotation((rToL ? -1.57079633 : 1.57079633), 0, 1, 0);
    [UIView animateWithDuration:duration delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        v1.layer.transform = CATransform3DMakeRotation((rToL ? 1.57079633 : -1.57079633), 0, 1, 0);
    } completion:^(BOOL finished){
        [v1 setHidden:YES];
        [v2 setHidden:NO];
    }];

    [UIView animateWithDuration:duration delay:duration options:UIViewAnimationOptionCurveEaseOut animations:^{
        v2.layer.transform = CATransform3DMakeRotation(0, 0, 1, 0);
    } completion:completion];
} 
```

# jquery - Jquery UI 选项卡哈希替换

> ID：14430922
> 
> 赞同：0
> 
> 时间：2013-01-21T00:24:31.473
> 
> 标签：jquery, hash

我如何替换`[b]#[/b]`为`[b]?[/b]`http://site.com/?first[是否](http://site.com/?first) 有可能？

我有以下脚本：

```
$(function () {
  var tabContainers = $('div.tabs > div');
  tabContainers.hide().filter(':first').show();

  $(window).bind('hashchange', function () {
    var hash = window.location.hash || '[b][b]#[/b][/b]first';

    tabContainers.hide();
    tabContainers.filter(hash).show();
    $('div.tabs ul.tabNavigation a').removeClass('selected');
    $('a[hash=' + hash + ']').addClass('selected');
  });

  $(window).trigger( "hashchange" );
});

    <div class="tabs">
        <ul class="tabNavigation">
            <a href="#first" class="selected">First</a>
            <a href="#second" class="">Second</a>
            <a href="#third" class="">Third</a>
        </ul>
        <div id="first" style="display: block;">
            <h2>First</h2>
        </div>
        <div id="second" style="display: none;">
            <h2>Second</h2>
        </div>
        <div id="third" style="display: none;">
            <h2>Third</h2>
        </div>
    </div> 
```

# php - Laravel 自定义验证问题

> ID：14430923
> 
> 赞同：2
> 
> 时间：2013-01-21T00:24:41.027
> 
> 标签：php, validation, laravel

我正在尝试注册自定义验证规则，但它似乎不起作用。我需要填写 2 个字段中的任何一个。一个是 URL（链接）字段，另一个是文件输入（file_upload）。这是我的自定义验证：

```
Validator::register('file_check', function($attribute, $value, $parameters) {
    if (!trim($value) == "" || array_get(Input::file($parameters[0]), 'tmp_name')) {
        return true;
    }
    return false;
});

$messages = array(
    'file_check' => 'Please upload a file or provide a link to files.',
);

$rules = array(
    'link' => 'url|file_check:file_upload',
    'file_upload' => 'mimes:jpg,jpeg,gif,png,psd,ai,bmp,xls,xlsx,doc,docx,zip,rar,7z,txt,pdf'

);
$validation = Validator::make(Input::all(), $rules, $messages);

if ($validation - > fails()) {
    return Redirect::to('page') - > with_errors($validation - > errors) - > with_input();
} 
```

需要帮忙 ：）

**已编辑**

另外，我刚刚注意到验证规则应该接受“PSD”文件，但是当我尝试上传 PSD 文件时，它会重定向并显示错误“文件类型无效”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-25T19:24:31.823

我可能迟到了，但可能有人会发现它很有用，以防您需要创建即使输入中不存在字段也会调用的隐式规则（如*required,required_if ....*）使用

```
Validator::extendImplicit( 'validator_name', function($attribute, $value, $parameters)
{

}); 
```

[看一下这个](https://github.com/laravel/framework/issues/192)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T19:47:17.350

我自己只是在为此苦苦挣扎！事实证明，[除了对它们应用一些特定规则时，Laravel 根本不会通过 Validator 传递空字段。](http://forums.laravel.io/viewtopic.php?id=4199)因此，自定义的非此即彼规则不起作用，因为这两个字段中的至少一个字段可能对其不可见。

您可以通过从注册新规则方法转移到替代[扩展验证器类](http://laravel.com/docs/validation#custom-validation-rules)方法来解决此问题。您的新类将继承标准 Validator 的所有方法，包括一个名为“implicit”的方法（您可以在标准 Validator 类的第 215 行找到原始方法），它指定了 Laravel 应将字段传递给甚至如果它们是空的。将您的新规则添加到该列表中，您应该一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T00:02:14.390

杰森是对的，但有一件事可能令人困惑。

Laravel 的“注册新规则”方法使用语法 'Validator:: ***extend*** (...'规则，那么你可能想使用扩展验证器类方法。在这种情况下，如果你有一个规则有条件地需要一些东西，你需要用一个新的添加规则来覆盖现有的隐式规则数组。

如果您添加的第一条规则不是有条件地要求，您会认为您已经确定了它，然后您将花费数小时试图找出为什么您的新“RequireWhenBlaBla...”规则是不可见的。

# android - Android：如何与具有相同APP的另一部手机共享SQLite表

> ID：14430926
> 
> 赞同：0
> 
> 时间：2013-01-21T00:25:55.107
> 
> 标签：android, sqlite

我正在考虑我的应用程序的未来选项，我正在考虑备份应用程序数据库中的数据并与另一部手机共享该数据的想法，比如通过电子邮件、消息传递、蓝牙，你可以说，但基本上将其保存为文件并从另一部手机打开它并在两部手机上具有相同的值。

对于这样的 Android 应用程序，最好的方法是什么？

内容提供者会完全做到这一点，还是他们只关心在不同应用程序之间共享数据？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:06:33.720

我相信这是可能的

[如果您在此处](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)阅读有关内部存储的文档，它会提到

> 您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们

所以我相信你可以将整个 sqlite DB 文件复制到某个临时位置，然后通过 BT 或电子邮件或任何其他共享选项共享该文件。

但是请注意，如果您希望另一个应用程序使用数据库，那么同一个应用程序包只能访问该文件，那么您需要设置 SharedUserId ，如此[处所述](http://developer.android.com/reference/android/R.attr.html#sharedUserId)

内容提供者通常仅用于将您的应用程序的数据共享给其他应用程序。

> 内容提供程序是将一个进程中的数据与另一个进程中运行的代码连接起来的标准接口。

# javascript - 具有 0（零）值的 jQuery 变量

> ID：14430927
> 
> 赞同：-6
> 
> 时间：2013-01-21T00:26:04.943
> 
> 标签：javascript, jquery

`comment_test`我有一个变量，我将它传递给有时会调用的函数`0`，但它失败了，因为我猜它读为`false`. 我得到错误`'ReferenceError: Can't find variable: count'`。

但是，我需要知道变量是否确实是`0`（而不是`1`, `2`,`3`等）。该函数适用于任何正数。这是如何实现的或我做错了什么？我似乎找不到任何关于此的信息。

```
var test = comment_test(0, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:31:04.000

您应该使用严格的比较：

```
var myVar = 0;
myVar === 0;//returns true
myVar === false;//returns false 
```

# android - 意图空错误

> ID：14430931
> 
> 赞同：0
> 
> 时间：2013-01-21T00:26:41.730
> 
> 标签：android, android-intent, android-spinner

整理完我的代码后，当我点击提交按钮时，我的第二个屏幕上一直显示为空，无法发现我的错误，任何帮助将不胜感激。

头等舱

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Spinner;

public class IwiSelect extends Activity {

Spinner spinner1, spinner2, spinner3, spinner4, spinner5;
Button btnSubmit; 
String iwi1;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_iwiselect);

    addListenerOnButton();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_iwi_select, menu);
    return true;
}

// get the selected drop down list value
  public void addListenerOnButton() {

    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner2 = (Spinner) findViewById(R.id.spinner2);
    spinner3 = (Spinner) findViewById(R.id.spinner3);
    spinner4 = (Spinner) findViewById(R.id.spinner4);
    spinner5 = (Spinner) findViewById(R.id.spinner5);

    btnSubmit = (Button) findViewById(R.id.btnSubmit);

    btnSubmit.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {

            String text = spinner1.getSelectedItem().toString();
            //Starting a new Intent
            Intent intent = new Intent();
            intent.putExtra("spinnerText", text);
            Intent nextScreen = new Intent(IwiSelect.this, SecondScreenActivity.class);

            //Sending data to another Activity
            nextScreen.putExtra("USERNAME", iwi1);
            //nextScreen.putExtra(spinner2.getContext().toString(), false);

            // starting new activity
            startActivity(nextScreen);

}
    });

  }
  } 
```

用户从微调器中选择的第一类（总共有 5 个微调器）

二等

```
public class SecondScreenActivity extends Activity {

TextView FirstIwi;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.selected_iwi);

    FirstIwi = (TextView) findViewById(R.id.textView1);

     Intent intent = getIntent();

    String text = intent.getStringExtra("spinnerText");
    //Spinner spinnername2 = (Spinner) findViewById(R.id.spinner2);

    FirstIwi.setText("First Iwi  " + text);

} 
```

}

此活动用于从微调器中选择一个选项

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".IwiSelect" >

 <Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/IwiList"
    android:prompt="@string/Iwi_prompt" />

 <Spinner
 android:id="@+id/spinner4"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:layout_alignBottom="@+id/spinner5"
 android:layout_alignParentLeft="true"
 android:layout_marginBottom="70dp"
 android:entries="@array/IwiList"
 android:prompt="@string/Iwi_prompt" />

 <Spinner
 android:id="@+id/spinner3"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:layout_alignParentLeft="true"
 android:layout_below="@+id/spinner5"
 android:layout_marginTop="24dp"
 android:entries="@array/IwiList"
 android:prompt="@string/Iwi_prompt" />

 <Spinner
 android:id="@+id/spinner5"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:layout_alignParentLeft="true"
 android:layout_below="@+id/spinner1"
 android:layout_marginTop="90dp"
 android:entries="@array/IwiList"
 android:prompt="@string/Iwi_prompt" />

 <Spinner
 android:id="@+id/spinner2"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:layout_alignParentLeft="true"
 android:layout_below="@+id/spinner3"
 android:layout_marginTop="14dp"
 android:entries="@array/IwiList"
 android:prompt="@string/Iwi_prompt" />

 <Button
 android:id="@+id/btnSubmit"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentBottom="true"
 android:layout_centerHorizontal="true"
 android:onClick="onClick"
 android:text="Submit" />

</RelativeLayout> 
```

此活动用于显示选定的选项

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".IwiSelect" >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:text="TEXT"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:32:38.983

你来做这件事：

```
nextScreen.putExtra("USERNAME", iwi1); 
```

`nextScreen`然后使用Intent启动第二个 Activity 。您永远不会使用`intent`具有`"spinnerText"`密钥的 Intent。

然后，当你在第二个活动中获得额外的东西时，你正在做

```
String text = intent.getStringExtra("spinnerText"); 
```

其中引用了一个不存在的意图键 ( `nextScreen`)，因此，文本将是`null`。在屏幕上您最有可能看到`First Iwi null`。

考虑将其更改为：

```
String text = intent.getStringExtra("USERNAME"); 
```

反而。

# image-processing - 通过 find_contour 获取每个标志的 1 个轮廓并在 cv2 中检索其 Humoments

> ID：14430932
> 
> 赞同：0
> 
> 时间：2013-01-21T00:26:44.070
> 
> 标签：image-processing, opencv, python-2.7, contour, feature-extraction

通过在此图像中应用 find_contour（opencv 模块）可以获得 5 个对象（每个符号一个）：[https](https://docs.google.com/file/d/0ByS6Z5WRz-h2WHEzNnJucDlRR2s/edit) ://docs.google.com/file/d/0ByS6Z5WRz-h2WHEzNnJucDlRR2s/edit ？现在我获得了 64 个对象

之后，我想检索 Humoments 并与其他图像进行比较。现在我只尝试对相同的图像进行一点翻译，为了测试它返回它们是相同的。

我的问题是我如何才能只获得 5 个对象来应用体量，或者是否有其他解决方案来计算图像的体量？

```
import cv2
im = cv2.imread('Sassatelli 1984 n. 165 mod1.jpg')
imgray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)
blur = cv2.GaussianBlur(imgray, (0,0), 5) 
cv2.imshow('Blur', blur)
cv2.waitKey()
th = 20
edges = cv2.Canny(blur, th, th*3)
cv2.imshow('canny',edges)
cv2.waitKey()
contours, hierarchy = cv2.findContours(edges, cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)
print('objects found')
print(len(contours))
cnt = contours[0]
cv2.drawContours(blur,contours,-1,(0,255,0),3)
cv2.imshow('draw contours',blur)
cv2.waitKey()
moments = cv2.moments(cnt) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:00:21.090

**案例 1：以 jpg 格式保存图像的问题** 当您以 jpg 格式保存仅黑白（即仅像素值 0 和 255）图像时，会出现有损压缩，这会改变像素值。如果你想看，创建这样的图像，将其保存为 jpg，打开保存的图像并缩放到黑白边缘。您可以看到像素值的变化。

所以当你找到轮廓时，你期望只有白色的物体，但实际上，也有一些中间值，这也被认为是轮廓。它增加了轮廓的数量。

所以为了避免这个问题，

*   更好地将图像保存为 png 或任何其他无损格式等。
*   在找到轮廓之前应用一个阈值（值为 127 或您喜欢的值）以使图像成为真正的二进制值。

此处对此进行了更多解释：[“列表（轮廓）”的结果表示什么？](https://stackoverflow.com/questions/9060254/what-does-result-of-listcontour-denote)

**案例 2：白色背景问题**

OpenCV findcontours() 旨在在黑色背景中查找白色对象。因此，如果您的背景是白色的，它也被视为一个对象。所以在找到轮廓之前反转图像。

**案例 3：对象中的孔问题**

如果您的对象中有孔，它也被视为对象。因此，如果您只想要对象的外部边界，请使用`cv2.RETR_EXTERNAL`findcontours() 函数的标志。

**示例代码：**

```
import cv2
import numpy as np
img = cv2.imread('sof.jpg')
gray = cv2.imread('sof.jpg',0)
ret,thresh = cv2.threshold(gray,127,255,cv2.THRESH_BINARY_INV) 
```

**阈值和倒置图像**：

![在此处输入图像描述](../Images/abc36c51c11c5c69f81740d4caa6d3b1.png)

现在找到轮廓，绘制它，检查轮廓的数量：

```
cv2.drawContours(img,contours,-1,(0,255,0),2)
cv2.imshow('img',img),cv2.waitKey(0),cv2.destroyAllWindows() 
```

**结果 ：**

![在此处输入图像描述](../Images/a60e378cb8ce13801a212f22ba497c74.png)

**笔记 ：**

在这里，我只拍摄了外部轮廓。如果要从这些对象中删除内部空洞，则需要使用 cv2.RETR_TREE 或 cv2.RETR_CCOMP 标志，并检查它们的层次结构并删除它们。此链接中对此进行了解释：[Contours 5：Hierarchy](http://opencvpython.blogspot.in/2013/01/contours-5-hierarchy.html)

# iphone - 在 iOS 中存储图像的最佳方式

> ID：14430935
> 
> 赞同：11
> 
> 时间：2013-01-21T00:26:59.063
> 
> 标签：iphone, ios, objective-c, ipad

我想知道是否有人可以建议我为我的应用程序存储图像的最佳方式。

我希望能够提供 XML 更新功能，允许用户使用一组新图像更新他们的应用程序。我想知道最好的方法是什么，因为我需要读写存储位置。将它们存储在 sqlite 数据库中是最好的方式，还是我能够使用文件系统来做到这一点，而 iPhone 不会删除任何下载的图像？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T00:33:43.913

您可以写入文件系统，iOS 中的每个应用程序都经过沙盒处理，并且可以访问他自己的文档文件夹。

我建议在文件系统上写入，并且只将 url 保存在数据库中，因为这比在数据库中保存 blob 更高效。

Apple 有一篇关于[iOS 文件系统的文章。](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T11:46:15.770

或者，您可以使用 SQLite 实现解决方案，Apple 在此处的大数据对象 (BLOB) 部分中提到了它：

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW5](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW5)

# python - 如何在 Backbone.js 视图中调用 Python 函数？

> ID：14430940
> 
> 赞同：0
> 
> 时间：2013-01-21T00:27:22.767
> 
> 标签：python, django, backbone.js, python-imaging-library, django-1.3

我正在从事一个正在从迁移`Django 1.3`到`Node/Backbone.js`

因此，我正在使用两组视图。我有一个用于验证和处理要通过表单上传的图像的功能，该表单使用 PIL 用 Python 编写，最初是为在 Django 视图中使用而设计的；然而，处理表单的视图已经被迁移到 Backbone。

我不认为它是一个最佳解决方案，但为了方便起见，我想知道是否有一种方法可以在 Backbone 表单视图中将其称为独立的 Python 脚本（只是为了进行图像处理）？

问题的症结在于新的 JavaScript 视图通过 PUT 更新数据库，而原始 Django 代码使用 POST。我试图避免在同一个表单上使用两个单独的视图并将这两种方法混合在一起，因为 JavaScript 视图完全能够处理文件上传本身；但是，我想避免使用新库重写成像脚本。

从查看其他一些线程来看，似乎发出 AJAX 请求可能是要走的路，例如沿着[这些](https://stackoverflow.com/q/5690147)路线，但我发现的唯一示例使用 jQuery，而我觉得应该有类似的做法它使用 Backbone 的内置[AJAX](https://backbonejs.org/#Sync-ajax)功能。

# php - 在另一个数组中按键对php中的数组进行排序

> ID：14430941
> 
> 赞同：-1
> 
> 时间：2013-01-21T00:27:30.483
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [按值对多维数组排序 (2)](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2)

```
array(200) {
  [0]=>
  array(5) {
    ["cat"]=>
    string(6) "Movies"
    ["name"]=>
    string(22) "Life.of.Pi.2012.DVDSCR"
    ["url"]=>
    string(62) "https://thepiratebay.se/torrent/8036528/Life.of.Pi.2012.DVDSCR"
    ["seed"]=>
    string(5) "33981"
    ["leech"]=>
    string(5) "18487"
  }
  [1]=>
  array(5) {
    ["cat"]=>
    string(6) "Movies"
    ["name"]=>
    string(41) "Django Unchained 2012 DVDSCR X264 AAC-P2P"
    ["url"]=>
    string(81) "https://thepiratebay.se/torrent/7990804/Django_Unchained_2012_DVDSCR_X264_AAC-P2P"
    ["seed"]=>
    string(5) "34279"
    ["leech"]=>
    string(5) "12256"
  }
...
} 
```

我有一个如上所示的数组，我想按种子指标对这个数组进行排序。如何在php中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:35:01.173

你可以`usort()`这样使用。

```
usort($torrentList, function($a, $b) {
    return $a['seed'] - $b['seed'];
}); 
```

`$torrentList`您在上面向我们展示的数组在哪里。文档可以在**[这里](http://php.net/manual/en/function.usort.php)**找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:35:13.887

```
usort($the_array, function($a, $b) {
    return ($a['seed'] - $b['seed']);
}); 
```

# php - 我应该信任 Imagick::getImageFormat() 吗？

> ID：14430943
> 
> 赞同：1
> 
> 时间：2013-01-21T00:27:42.920
> 
> 标签：php, image, imagemagick, imagick

我需要知道我是否可以信任此代码来获取图像格式：

```
$image = new Imagick($path);
$format = $image->getImageFormat(); 
```

还是我应该像往常一样检查扩展名、mime 类型等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T00:41:53.873

您可以信任它，而不仅仅是`pic.jpg`使用简单的 php 字符串函数检查文件的扩展名（例如）。

你可以做个实验。例如，重命名`.jpg`图像文件，使其变为`.png`。使用 Windows“重命名”的简单工具。所以现在看来​​，图像就是`.png`图像。但是尝试`Imagick`使用命令`cmd`，`-verbose`如下所示：

```
C:\>identify -verbose pic.png
Image: pic.png
  Format: JPEG (Joint Photographic Experts Group JFIF format)
  Class: DirectClass
  Geometry: 482x362+0+0
  Resolution: 72x72
  ... many more here ... 
```

你会看到，在现实中的形象是`.jpg`。您`$image->getImageFormat();`在程序中的某个地方也是如此。

`Imagick`是强大的工具。不幸的是，PHP 中关于其 API 的信息比 GD 少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:41:19.870

如果您对课程不满意`Imagick`，您可以随时尝试 GD 功能。例如

```
list (width, height, $type) = getimagesize($path); 
```

变量将`$type`是`IMAGETYPE_GIF`, `IMAGETYPE_JPEG`,`IMAGETYPE_PNG`等之一

请参阅[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)和[http://php.net/manual/en/image.constants.php](http://php.net/manual/en/image.constants.php)

# shell - 使用 GUI 安装程序安装后我找不到我的 MinGW shell

> ID：14430944
> 
> 赞同：34
> 
> 时间：2013-01-21T00:27:45.770
> 
> 标签：shell, mingw

我使用了 Mingw_get_inst 并按照操作指南页面上的说明安装了 MinGW 编译器套件。我使用了 GUI 安装程序。然后我更改了路径以包含 C:\MingW; . 当我进入开始菜单 -> 所有程序 -> MingW 时，其中存在的唯一文件是卸载程序。howto 页面说应该有一个外壳......有人可以帮我解决这个问题吗？

Mingw.org 上的操作指南页面：http: [//www.mingw.org/wiki/Getting_Started](http://www.mingw.org/wiki/Getting_Started)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-03-08T08:14:52.100

只需您可以从以下批处理文件中运行它：

例如**C:\MinGW\msys\1.0\msys.bat**（如果您将 mingw 安装在 c 驱动器中）

了解更多信息。关于 mysys，检查[一下](http://www.mingw.org/wiki/MSYS)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T04:04:21.930

查看您的 Mingw 的安装日志。

我的（单个）Mingw 安装中有 2 个 bin 目录

```
C:\MinGW\msys\1.0\bin 
```

和

```
C:\MinGW\bin 
```

在过去的 2-3 年里，Mingw 发生了很多变化，我认为您可以通过 google 轻松找到的一些文档已经过时。

尝试[通过 Nabble 在 mingw 邮件组寻求帮助（非常易于使用）](http://mingw.5.n7.nabble.com/)

IHTH

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-07T03:53:22.667

如果您安装了 MSYS，则添加 shell 链接很容易。

*   打开“开始”菜单并右键单击“所有程序”，然后根据您要为其设置快捷方式的方式选择“打开”或“打开所有用户”。如果 MinGW 文件夹已经存在，则打开它，如果不存在，则创建它（或 MSYS 文件夹，如您所愿）。

*   打开另一个资源管理器窗口并导航到您的 MSYS 文件夹，在默认安装中是 C:\MinGW\msys\1.0

*   将 msys.bat 从 MSYS 资源管理器窗口右键拖动到开始菜单资源管理器窗口。当提示您要执行的操作时，选择“创建快捷方式”。或者，您可能希望更改快捷方式以使用 MSYS 文件夹中的 MSYS 图标之一。

*   根据旧的 MSYS 文档，快捷方式应设置为在 MSYS bin 文件夹中启动，默认安装为 C:\MinGW\msys\1.0\bin。如果您不这样做，我不确定会发生什么；外壳以任何一种方式打开。

瞧！现在，您的“开始”菜单中有 MSYS 的 shell 链接。

如果您没有快捷方式，则其他安装后位可能也没有运行。检查这一点的简单方法是查看 C:\MinGW\msys\1.0\etc （或适合您的安装路径）。如果有 fstab 文件，则安装后位运行正常。如果没有，则转到 C:\MinGW\msys\1.0\postinstall 并运行 pi.bat。这将使 mingw 文件夹在 msys shell 中可用。如果不这样做，事情将无法正常进行。

2018 年 3 月更新：MSYS 后安装现在是 Lua 脚本，默认情况下不会创建快捷方式。我能说的最好的，您现在必须在所有情况下手动执行此操作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-29T13:10:36.787

查找 postinstall 目录，在其中运行批处理文件 pi.bat 并以正确的区分大小写回答文件路径问题。然后找到gcc。

CNTRL-SHIFT 单击 msys 快捷方式并将其拖到桌面上。

这解决了它。

可惜安装脚本坏了...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-18T16:05:28.763

转到您的Windows搜索并转到应用程序和功能然后搜索它，您可以找到文件位置，然后您可能会看到文档和其他文件:)

# performance - 应该将 search_data tsvector 存储在同一张表或外部表中吗？

> ID：14430945
> 
> 赞同：9
> 
> 时间：2013-01-21T00:27:53.840
> 
> 标签：performance, postgresql, full-text-search

我正在 postgres 中实现全文搜索。

我想搜索我系统中的所有帖子。帖子全文索引是帖子标题和帖子正文的合并。

我有两种方法可以做到这一点：

1.  在 posts 表中创建一个 tsvector 列，触发对其的更新。
2.  使用包含索引数据的 post_id 和 tsvector 列创建第二个表 (posts_search)。
3.  创建一个简单的杜松子酒索引...（不可能，因为我的现实世界问题需要多个表中的数据作为索引）

考虑到我有时需要按表中的其他属性（如等）过滤搜索，什么会表现得更好`deleted_at is null`。

将 tsvector 列与数据保持在同一个表中（副作用选择 * 现在很糟糕）还是单独的表（副作用，需要连接，索引过滤很复杂）是更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T01:06:49.360

在我的实验中， tsvector 列的典型大小大约`1%`是该 tsvector 使用`to_tsvector()`.

考虑到这一点，将 tsvector 列存储在另一个表中应该会带来性能优势。例如，即使您不使用`SELECT *`（实际上您不应该使用），原始单表中的任何 seqscan 仍然必须加载包含原始文本的页面。如果将 tsvector 字段卸载到单独的表中，页面加载速度将提高 100 倍。

换句话说，我倾向于将 tsvector 字段卸载到单独的表的第二种解决方案。或者，或者，将帖子（原始文本）卸载到您的表格层次结构中（但我想这几乎是同一件事）。

请注意，要使全文搜索起作用，原始文本不是必需的。您甚至不想将它存储在数据库中，或者以高度压缩的格式存储它（并且不一定很容易被 SQL 例程访问）。只要有东西可以基于原始文本创建 tsvector，或者在它更改时更新，它就可以工作。

# javascript - 从单个数字创建范围

> ID：14430953
> 
> 赞同：1
> 
> 时间：2013-01-21T00:28:56.940
> 
> 标签：javascript

**解决** 了@Jeff 和@Eric，非常感谢。最后，我必须对 Eric 的解决方案稍作改动。

```
for(; i+4<=n; i+=4) 
```

这就是我将如何使用它：

```
function findRange(n,div)
{
var odd =1&n;
var i = 0;
var ranges = [];

  for(; i + div<= n; i+=div) 
  {
     ranges.push([i+1, i+div]); // in array 1-4 / 5-8 etc
     // or in side cases the 2nd part of the array contains the remainder
     ranges.push([i+1, n]); // 1-16,5-16,9-16,etc
     ranges.push([i+div, n]); // 4-16,8-16,12-16,etc

     if(odd === 1)
     {
        ranges.push([i+div+1, n]); // in case of input 7 creates array 5-7
     }
  }

return ranges;
}
console.log(findRange(16,4)); 
```

## 该解决方案回答了以下问题

问题 1：
如何从数字 16 创建范围（1-4、5-8、9-12、13-16）

问题 4：
如何找到该范围内的第一个和最后一个数字（1 和 4、5 和 8 等）

问题 2：
如何处理输入数字为例如 17 的情况。这将给出这些范围 1-4、5-8、9-12、13-16 和剩余数字 17。

## 下面的原始问题。

我需要知道如何从单个数字创建一个范围，其中单个数字是可变的。范围始终需要落在 4 个位置内。每个范围我需要知道第一个和最后一个数字。每个范围我需要知道两者之间的数字。

例如：单个（输入）数字是 16，它给出了以下 4 个范围 4（1-4、5-8、9-12、13-16）。

问题 1：
如何从数字 16 创建范围（1-4、5-8、9-12、13-16）

问题 2：
如何处理输入数字为例如 17 的情况。这将给出这些范围 1-4、5-8、9-12、13-16 和剩余数字 17。

问题3：
输入数字为3所以范围为1-3的情况如何处理

* * *

*下面的问题是可选的，因为这些答案可能会在堆栈中找到。*

问题 4：
如何找到该范围内的第一个和最后一个数字（1 和 4、5 和 8 等）

问题 5：
如何在每个范围内查找范围内的数字（范围 1：1、2、3、4 | range2：5、6、7、8 等）。

* * *

我还没有真正尝试过任何事情，因为根本不知道如何迈出第一步。

我尝试过的一件事是使用 % （模数），但这不是答案。我试过这个：

```
var x=16;

for(var i=0; i<=x; i++)
{
  for(i % 4 === 0)
  {
    return i;
  }
} 
```

它给了我 4,8,12,16，这很好，但与我想要的相去甚远。我已经厌倦了为此烦恼。我很好奇这个问题的解决方案是什么。

我不确定是否允许以这种方式提问。但由于它们都与范围有关，我认为最好尽可能具体地说明我正在寻找的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:40:33.940

```
var i = 0;
var ranges = [];
for(; i + 4< n; i+=4) ranges.push([i+1, i+4]);
ranges.push([i+1, n]) 
```

# php - 根据帖子数量动态 add_action()

> ID：14430954
> 
> 赞同：0
> 
> 时间：2013-01-21T00:28:57.840
> 
> 标签：php, wordpress

我有一个每小时运行一次的 wp_cron。

cron 调用一个迭代自定义帖子类型的函数。然后使用标题和一些元数据从远程服务器上抓取结果。

问题是由于帖子的数量，抓取需要很长时间。我想通过一次仅迭代 25 个帖子将抓取分成块。使用 query_posts 中的 offset 参数很容易，但我如何动态地 add_action() 并传递 offset 变量？

在**functions.php中**

```
if ( ! wp_next_scheduled( 'my_task_hook' ) ) {
         wp_schedule_event( time(), 'hourly', 'my_task_hook' );
}

add_action( 'my_task_hook', 'rock_n_roll' ); 
```

我的 scraper.php 看起来像这样

```
function rock_n_roll($offset) {

    query_posts(array(
    'post_type' => 'wine',
    'order' => 'ASC',
    'posts_per_page' => -1,
    'offset' => $offset 
    )); 

    while (have_posts()) : the_post();

    //compare values against scraped results
    //write results to DB with update_post_meta

    endwhile;

} 
```

基本上我需要一种方法来动态地 add_action()，每次将 $offset 的值增加 25。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:13:09.203

您的 $Offset 是从另一个来源传递给函数的。所以我可以想象，类似：

```
$Var = $Pre_definedoffset;
$Var = $Pre_definedoffset + 25; 
rock_n_roll($var); 
```

这只是我从您的代码中看到的假设。

在代码将其推送到函数之前，您需要修改包含传递给函数的整数的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:51:51.563

您可以将变量传递给您的[add_action()](http://codex.wordpress.org/Function_Reference/add_action)：

```
add_action( $tag, $function_to_add, $arg ); 
```

但是您也可以使用[do_action()](http://codex.wordpress.org/Function_Reference/do_action)而不是每次运行 cron 时添加操作：

```
do_action( $tag, $arg ) 
```

无论如何，将您的存储在`$offset`某个地方很好，所以我看到了两个选项：

将您的持久值存储在[WP_Object_Cache](http://codex.wordpress.org/Class_Reference/WP_Object_Cache)中。也许阅读本文档，您可以找到另一个优雅的解决方案来提高大型查询结果的性能。

[使用add_option()](http://codex.wordpress.org/Function_Reference/add_option)和[get_option()](http://codex.wordpress.org/Function_Reference/get_option)在数据库中记录您的实际`$offset`值。

如果您存储`your $offset`变量，您的 rock_and_roll 函数不再需要接收参数，您只需要在函数内部检索它。

```
function rock_n_roll() {

    // Retrieve $offset value from WP_Object_Cache
    // or from database with get_option()

    query_posts(array(
    'post_type' => 'wine',
    'order' => 'ASC',
    'posts_per_page' => -1,
    'offset' => $offset 
    )); 

    while (have_posts()) : the_post();

    //compare values against scraped results
    //write results to DB with update_post_meta

    endwhile;

} 
```

# ruby-on-rails - nil:NilClass 的未定义方法“fql_query”

> ID：14430955
> 
> 赞同：0
> 
> 时间：2013-01-21T00:29:05.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-fql, koala

使用考拉宝石，我正在尝试计算页面的签入次数。我正在使用导轨。

在我的`user.rb`我有一种方法可以与 Facebook 图表建立新连接：

```
class User < ActiveRecord::Base
 def facebook
     @facebook ||= Koala::Facebook::API.new(oauth_token)
 end
end 
```

在我的 school.rb 中，我有一种计算签到的方法：

```
class school < ActiveRecord::Base
 def count_checkins(name)
  checkins = @facebook.fql_query("SELECT checkins FROM page WHERE name = #{name}")
 end
end 
```

我从这样的视图中调用它：

```
<%= @school.count_checkins(@school.name) %> 
```

但我收到以下错误：

```
undefined method `fql_query' for nil:NilClass 
```

真的不明白为什么我会收到这个错误，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:43:56.600

看起来您实际上还没有在`@facebook`School 模型中创建对象。我们需要查看你的 school.rb 文件的其余部分才能确定。我建议您在 School.initialize() 方法中创建对象，如下所示：

```
def initialize(oauth_token)
  unless oauth_token.nil?
    @facebook = Koala::facebook::API.new(oauth_token)
  end
end 
```

为了使其正常工作，您需要将所需的内容传递`oauth_token`给您的`School.new()`呼叫。然后`@facebook`，每个`School`.

## 编辑

看了[要点](http://gist.github.com/4582873)之后，我意识到你实际上已经实例化了一个`User`对象，并在其上调用了 facebook 方法。这实际上是更好的方法。问题是，您使用的是 ，`@current_user`必须将其设置为`school`模型的属性。您可能打算改用辅助函数`current_user`。

```
 def count_checkins(name)
  u = current_user
  u.@facebook.fql_query("SELECT checkins FROM page WHERE name = #{name}")
 end 
```

试试看，看看会发生什么。至少，您应该收到不同的错误消息。

## 编辑 2

所以，现在我认为该`current_user`函数应该在控制器代码中调用，而不是模型代码。这是因为当前用户实际上并不存在，除非作为活动请求的一部分。因此，我们应该像这样`User u`将函数作为参数`count_checkins`：

```
def count_checkins(name, u)
  u.facebook.fql_query("SELECT checkins FROM page WHERE name = #{name}")
end 
```

您还需要更改您调用的代码`count_checkins()`：

```
count_checkins(name, current_user) 
```

那应该这样做。让我们来看看！

# php - 在 SQL 查询中添加变量和常量的简短语法，PHP

> ID：14430960
> 
> 赞同：0
> 
> 时间：2013-01-21T00:30:20.480
> 
> 标签：php, mysql, syntax, add

有没有更优雅的方式来编写这样的条件？

```
WHERE date<'".($date+1)."-07-01' 
```

类似的东西

```
WHERE date<'{($date+1)}-07-01' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:35:17.793

```
$date = 2013;
$truedate = ($date + 1) . "-07-01";

$preparedDb = new DB;
$preparedDb->prepare("SELECT * FROM T1 WHERE date < ?")
   ->execute(array($truedate)); 
```

# smtp - 使用 Office365 发送 javamail

> ID：14430962
> 
> 赞同：16
> 
> 时间：2013-01-21T00:30:37.167
> 
> 标签：smtp, jakarta-mail, office365

我在配置`javax.mail (1.4.4)`通过 Office365 发送邮件的 SMTP 设置时遇到问题，所以我想我会在这里为其他人发布这些属性。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T00:30:37.167

使用 Office365 smtp 详细信息如下：

> ```
> private static Properties props;  
> private static Session session;   
> static {      
>   props = new Properties();
>   props.put("mail.smtp.starttls.enable", "true");
>   props.put("mail.smtp.port", "587");
>   props.put("mail.smtp.host", "m.outlook.com");
>   props.put("mail.smtp.auth", "true");        
>   session = Session.getInstance(props, new Authenticator() {          
>       @Override
>       protected PasswordAuthentication getPasswordAuthentication() {
>           return new PasswordAuthentication("office365 email address",
>                   "office365 password");          
>       }       
>   });
> 
> } 
> ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-29T14:04:17.677

使用 spring-boot，您只需将其添加到您的`application.properties`：

```
spring.mail.host = smtp.office365.com
spring.mail.username = mathieu.pousse@headquarter.com
spring.mail.password = s3cr3t
spring.mail.port = 587
spring.mail.properties.mail.smtp.auth = true
spring.mail.properties.mail.smtp.starttls.enable = true 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-13T20:50:52.853

一个工作代码示例：

```
Email email = new SimpleEmail();

email.setHostName("smtp.office365.com");
email.setSmtpPort(587);
email.setAuthenticator(new DefaultAuthenticator("a@b.com", "****"));
email.setStartTLSEnabled(true);
try {
    email.setFrom("a@b.com");
    email.setSubject("Job Failure");
    email.setDebug(true);
    email.setMsg("This is a test mail ... :-)" );
    email.addTo("a@y.com");
    email.send();
} catch (EmailException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T21:14:01.143

我在您的代码中注意到的唯一错误是不正确的主机

```
javaMailProperties.setProperty("mail.smtp.from", "abc@c.com");
    javaMailProperties.setProperty("mail.smtp.user",  "abc@c.com");
    javaMailProperties.setProperty("mail.smtp.password","Password");
    javaMailProperties.setProperty("mail.smtp.host", "smtp.office365.com");
    javaMailProperties.setProperty("mail.smtp.port", "587");
    javaMailProperties.setProperty("mail.smtp.auth", "true");
    javaMailProperties.setProperty("mail.smtp.starttls.enable", "true"); 
```

换个主机就万事大吉了。

# cassandra - 使用 CQL3 设置/查询列形成辅助复合键

> ID：14430967
> 
> 赞同：0
> 
> 时间：2013-01-21T00:31:18.147
> 
> 标签：cassandra, cql3

假设我有以下带有复合主键的 CF

```
CREATE TABLE dpt (
     empID int,
     deptID int,
     PRIMARY KEY (deptID, empID)); 
```

由于复合 PK，cassandra 将为每个部门创建一行，并且作为部门成员的员工 ID 将作为列存储在该行上，其中 :empID 作为列名。

问题 #1：我可以用 为该列（例如雇员姓名）设置一个值`CQL3`吗？如果是这样，如何？

问题 #2：我可以看到`<individual_employ_ID>:empID`列的值 - 如果存在 -`CQL3`吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:54:39.413

问题 #1：CREATE TABLE dpt (empID int, deptID int, empName text, PRIMARY KEY (deptID, empID));

问题 #2：请查看示例： [http ://www.datastax.com/docs/1.1/references/cql/INSERT](http://www.datastax.com/docs/1.1/references/cql/INSERT) [http://www.datastax.com/docs/1.1/references/cql/UPDATE](http://www.datastax.com/docs/1.1/references/cql/UPDATE)

# c# - 从 C# 代码中使用 SQL Server CE 选择 @@ IDENTITY

> ID：14430974
> 
> 赞同：0
> 
> 时间：2013-01-21T00:33:40.750
> 
> 标签：c#, asp.net, sql, sql-server-ce

我在 SQL CE 中使用数据适配器/集，我确实创建了以下查询以插入到表中，然后选择 @@IDENTITY，我希望这个 SELECT 语句在每次插入表后返回我的学生 ID，这是我的查询：

```
INSERT INTO [Student] ([Name], [Family], [Address], [Phonenumber])
VALUES(@Name,@Family,@Address,@Phonenumber);
SELECT  @@IDENTITY; 
```

这是我如何调用查询：

```
int x = da.Insert("Albert", "Alexandra", "No4.Oxford", Telnum); 
```

Int x 假设返回我的 ID...

这是我得到的错误：

> 解析查询时出错。[令牌行号= 4，令牌行偏移量= 1，错误令牌= SELECT]

插入查询它自己它可以工作，但是一旦`SELECT @@ IDENTITY`在最后添加我得到错误。

我真的不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:10:29.517

*ExecuteNonQuery*的返回值将是这些查询影响的行数。所以你需要使用存储过程而不是单查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:45:03.780

根据[MSDN](http://social.msdn.microsoft.com/forums/en-US/sqlce/thread/5f3eaed0-affb-43c5-894e-74191a9779db/)，CE 不支持每次执行多个命令，您需要将其作为两个命令同步执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T00:45:45.340

如果您想在单个调用中执行此操作，则需要使用存储过程而不是 `Insert`，因为它使用`ExecuteNonQuery`，它不返回任何记录。否则，您需要在另一个调用中执行选择以确定身份。

[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)的返回值是一个整数，表示受您的调用影响的行数。

# c# - 为什么BackgroundWorker总是很忙？

> ID：14430979
> 
> 赞同：12
> 
> 时间：2013-01-21T00:34:20.010
> 
> 标签：c#, wpf, backgroundworker, dispatcher, dispatch

我在我的 WPF 应用程序中的后台工作人员中发现了一些奇怪的东西。

我现在要完成的是等到 BW 完成以启动另一个线程。

检查以下代码：

```
if (bw.IsBusy)
{
    bw.CancelAsync();

    System.Threading.ThreadStart WaitThread = 
        new System.Threading.ThreadStart(delegate() {
            while (bw.IsBusy)
            {
                System.Threading.Thread.Sleep(100);
            }

            bw.RunWorkerAsync();
        });

    System.Windows.Application.Current.Dispatcher.Invoke(
        System.Windows.Threading.DispatcherPriority.Normal,
        WaitThread);  // if I remove this line, bw fires RunWorkerAsyncEvent
}
else
{
    bw.RunWorkerAsync();
} 
```

请注意，我添加了一个 Dispatcher.Invoke 来等到 bw 不忙，但是如果我调用它并且从不触发`RunWorkerAsyncCompleted`事件，那么所有时间都是忙碌的。虽然，如果我删除那条线，会触发事件，这真的很奇怪。

我怎样才能等到 bw 完成？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-21T01:25:08.177

这被称为“死锁”，一个非常常见的线程问题。在 RunWorkerCompleted 事件运行之前，BGW 不能停止忙碌。该事件在您的应用程序的主线程上运行，它只能在您的主线程不忙于做其他事情时运行。它必须是空闲的，在调度程序循环内运行。

但是你的主线程不是空闲的，它卡在 while() 循环中，等待 IsBusy 返回 false。所以事件永远无法运行，因为主线程正忙于等待 BGW 完成，BGW 无法完成，因为主线程永远不会空闲。“致命的拥抱”，又名僵局。

您将不得不以不同的方式执行此操作，您不能等待。通过创建另一个 BGW 实例来说。或者将等待后的代码移动到 RunWorkerCompleted 事件处理程序中。如果它是由按钮的 Click 事件激活的，那么请确保在调用 RunWorkerAsync() 时禁用该按钮，然后在 RunWorkerCompleted 中重新启用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-15T09:29:00.090

死锁是由于应用程序的“主”线程无法运行（和处理事件），因此 Backgroundworker 永远无法触发它的完成功能。您可以做些什么来让应用程序触发它是添加一个 Application.DoEvents();

这是我目前在类似场景中使用的，它看起来就像一个魅力！

```
 while (bw.IsBusy)
    {
        Application.DoEvents();
        System.Threading.Thread.Sleep(100);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T06:58:40.653

我不确定我是否理解正确，但我认为您正在尝试重新启动*BackgroundWorker*（因此，如果它很忙，请先将其停止，然后再重新启动），如果这是您想要的，请尝试以下操作：

在您的班级某处声明此*委托：*

```
 private delegate bool StateChecker(); 
```

并使用此代码重新启动*BackgroundWorker*：

```
 StateChecker stillWorking = () => { return bw.IsBusy; };

    if (bw.IsBusy)
    {
        bw.CancelAsync();
        while ((bool)this.Dispatcher.Invoke(stillWorking, null)) Thread.Sleep(15);
    }
    bw.RunWorkerAsync(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-31T16:29:48.963

这是完整且有效的代码。

**C#（窗口类）**

```
 public partial class ForceSyncWindow : Window
    {
        BackgroundWorker backgroundWorker = new BackgroundWorker();

        public ForceSyncWindow()
        {
            InitializeComponent();

            ProgressBar1.Visibility = System.Windows.Visibility.Hidden;

            backgroundWorker.WorkerSupportsCancellation = true;

            // To report progress from the background worker we need to set this property
            backgroundWorker.WorkerReportsProgress = true;

            // This event will be raised on the worker thread when the worker starts
            backgroundWorker.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);

            // This event will be raised when we call ReportProgress
            backgroundWorker.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker_ProgressChanged);

            backgroundWorker.RunWorkerCompleted += backgroundWorker_RunWorkerCompleted;
        }

        void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            // First, handle the case where an exception was thrown. 
            if (e.Error != null)
            {
                MessageBox.Show(e.Error.Message);
            }
            else if (e.Cancelled)
            {
                // Next, handle the case where the user canceled  
                // the operation. 
                // Note that due to a race condition in  
                // the DoWork event handler, the Cancelled 
                // flag may not have been set, even though 
                // CancelAsync was called.
                ProgressBar1.Value = 0;
                // TODO LOG  = "Canceled";

            }
            else
            {
                // Finally, handle the case where the operation  
                // succeeded.
                // TODO LOG e.Result.ToString();

            }

            ProgressBar1.Value = 0;
            ProgressBar1.Visibility = System.Windows.Visibility.Hidden;

            // Enable the Synchronize button. 
            this.Synchronize.IsEnabled = true;

            // Disable the Cancel button.
            this.Cancel.IsEnabled = false;
        }

        // On worker thread so do our thing!
        void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
              // Your background task goes here
                for (int i = 0; i <= 100; i++)
                {
                    if (backgroundWorker.CancellationPending == true)
                    {
                        e.Cancel = true;
                        break;
                    }
                    else
                    {
                        // Perform a time consuming operation and report progress.
                        // Report progress to 'UI' thread
                        backgroundWorker.ReportProgress(i);
                        // Simulate long task
                        System.Threading.Thread.Sleep(100); ;
                    }                              
                }            
        }

        // Back on the 'UI' thread so we can update the progress bar
        void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            // The progress percentage is a property of e
            ProgressBar1.Value = e.ProgressPercentage;
        }

        private void Synchronize_Click(object sender, RoutedEventArgs e)
        {
            ProgressBar1.Value = 0;
            ProgressBar1.Visibility = System.Windows.Visibility.Visible;

            // Disable the Synchronize button. 
            this.Synchronize.IsEnabled = false;

            // Enable the Cancel button.
            this.Cancel.IsEnabled = true;

            // Start the background worker
            backgroundWorker.RunWorkerAsync();
        }

        private void Cancel_Click(object sender, RoutedEventArgs e)
        {
            if (backgroundWorker.IsBusy)
            {
                // Cancel the background worker
                backgroundWorker.CancelAsync();
            }
        }
    } 
```

**XAML**

```
<Window x:Class="MySyncManager.Views.ForceSyncWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        Title="ForceSyncWindow" Height="300" Width="509" ResizeMode="NoResize" WindowStartupLocation="CenterScreen">
    <Grid>

        <Button Content="Synchronize" Name="Synchronize" HorizontalAlignment="Left" Margin="411,10,0,0" VerticalAlignment="Top" Width="75" Click="Synchronize_Click"/>
        <RichTextBox HorizontalAlignment="Left" Height="132" Margin="10,116,0,0" VerticalAlignment="Top" Width="476">

        </RichTextBox>
        <Button Content="Cancel" x:Name="Cancel" HorizontalAlignment="Left" Margin="411,40,0,0" VerticalAlignment="Top" Width="75" RenderTransformOrigin="0.508,2.154" Click="Cancel_Click"/>
        <ProgressBar Name="ProgressBar1" HorizontalAlignment="Left" Height="10" Margin="10,101,0,0" VerticalAlignment="Top" Width="476"/>

    </Grid>
</Window> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-10-14T03:25:01.557

把它放在另一个线程里面：

```
private void myButton_Click(object sender, RoutedEventArgs e)
{
   BackgroundWorker mainWorker = new BackgroundWorker();
   mainWorker.DoWork += new DoWorkEventHandler(mainWorker_DoWork);
   mainWorker.RunWorkerAsync();
}

void mainWorker_DoWork(object sender, DoWorkEventArgs e)
{
   for(int x = 0; x >= 100; x++)
   {
      BackgroundWorker worker = new BackgroundWorker();
      worker.DoWork += new DoWorkEventHandler(worker_DoWork);
      worker.RunWorkerAsync(argument: x);
      while(worker.IsBusy)
      {
         Thread.Sleep(100);
      }
   }
}

void worker_DoWork(object sender, DoWorkEventArgs e)
{
   string iam = "Hello i'm thread number: " + e.Argument.ToString();
   //do something ...
} 
```

# node.js - 在 Node.JS 中为 GPIO 接口设置 onChange 事件

> ID：14430982
> 
> 赞同：2
> 
> 时间：2013-01-21T00:34:42.287
> 
> 标签：node.js, events, raspberry-pi, gpio

我在 Raspberry Pi 上安装了 Node.JS，并安装了[pi-gpio](https://npmjs.org/package/pi-gpio)，让我可以访问 gpio 端口。我可以读写，但考虑到 node.js 的事件驱动性质，是否可以设置它，以便当 GPIO 输入更改并变为高电平或低电平或两者（取决于设置）时，事件是被解雇？

# plugins - ModX 无法手动添加包

> ID：14430986
> 
> 赞同：0
> 
> 时间：2013-01-21T00:35:26.000
> 
> 标签：plugins, content-management-system, package, modx, modx-revolution

我在我的站点中的目录 core/packages 中添加了一个包 (TinyMCE)。我已确保所有权限都正常。

然后在包管理中单击“添加新包”，然后单击“在本地搜索包”，但什么也没有出现。

有谁知道如何解决这一问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:49:14.630

好的，从头开始 - 我自己的愚蠢：我在我的电脑上解压缩插件文件*然后*上传它。我应该刚刚上传了压缩文件。

# python - 用于 Python 自动完成的 Emacs 扩展

> ID：14430990
> 
> 赞同：1
> 
> 时间：2013-01-21T00:36:17.150
> 
> 标签：python, emacs, rope, pymacs

我正在寻找一个扩展，它有助于 Python 在 Python 中的自动完成功能。

如果我输入以下代码：

```
a = [4,5,6]
a.p 
```

然后我希望它会给我一个建议，`pop`因为它是 Python 列表的方法之一。这件事在 Emacs 中可以实现吗？

我尝试安装 Rope、Rope mode、Ropemacs 和 Pymacs。我从中得到的自动完成建议不是列表的方法。但它暗示了我类似的东西`print`。我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:56:08.273

试试[Jedi.el。](https://github.com/tkf/emacs-jedi) _ AFAIK，它应该支持你的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:19:07.917

因为 Python 变量没有类型，所以很难知道变量在代码中的给定点包含什么类的对象。想象一下，如果您的代码后来这样做了`a = 1`。Emacs 必须知道变量 a 何时引用列表以及何时引用数字才能提供正确的补全。通常，如果不实际运行代码，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T10:33:01.613

`vimrope`从[https://github.com/python-rope/ropevim/](https://github.com/python-rope/ropevim/)为我工作（现在，所有绳索项目的官方主页）

# relational-database - 关系数据库管理系统，不是服务器端而是客户端

> ID：14430991
> 
> 赞同：1
> 
> 时间：2013-01-21T00:36:22.670
> 
> 标签：relational-database

我正在为一个不懂技术的朋友制作一个关系数据库。我正在寻找她可以将格式正确的 excel 文件上传到其中并能够清楚地看到关系的东西。

> （<1>[John Smith]<2>[Sam Jones] 而不是 <1><6><2><244> 等）

我知道我可以制作自己的基于 Web 的系统，但我不确定是否已经有开源（或免费提供）系统可用，无论是基于桌面的还是基于 Web 的。我试着用谷歌搜索它，但我担心我使用了错误的关键字。（我只有服务器端系统）

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:38:42.410

它又丑又贵，但 MS/Access 做得很好。它对初学者有好处，并且 Excel 集成得很好。如果她拥有 Office Professional，则她已经拥有它。它还支持 ODBC，因此可以使用其他数据库引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:27:24.243

就桌面 DBMS 而言，正如 Peter Wooster 所指出的 (+1) MS Access 对习惯于 Office 的人来说是最友好的（例如，尤其是 Excel）。

如果您正在考虑使用 Web GUI（即使用 ASP.NET）构建一些东西，那么您可以免费获得 SQL Server Express，它可以部署在客户端 PC 上。

还有其他典型的基于服务器的 RDBMS 系统具有工作站友好版本，例如 MySQL 甚至 Oracle（尽管 Oracle、工作站或其他方面没有任何友好性）。

# c++ - 表达式在 C++ 中必须有一个常量值

> ID：14430994
> 
> 赞同：2
> 
> 时间：2013-01-21T00:36:43.300
> 
> 标签：c++

所以，我正在创建一个以数组作为实例的对象。这个数组的大小将由客户端程序决定。稍后在我的程序中，我必须创建一个与实例变量具有相同容量的临时数组。所以，我提出：

```
int temp[capacity]; 
```

但是，当我尝试编译它时，它失败了。它说我必须有一个固定值而不是放置容量。知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T00:38:21.083

`capacity`如果在编译时已知，则只能构造这样的数组。对于动态大小的数组，请使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)：

```
#include <vector>

std::vector<int> temp(capacity); // makes a vector with capacity elements 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-22T19:46:35.157

而不是这样写：

```
int temp[capacity] 
```

写吧：

```
int* temp = (int*)malloc(capacity); 
```

# java - is there a way to add characters to a stack?

> ID：14430996
> 
> 赞同：2
> 
> 时间：2013-01-21T00:37:33.120
> 
> 标签：java

Is there a way to add characters from a string to a stack without having to create your own push and pop methods?

Examples would be very appreciated!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T00:40:17.387

```
Stack<Character> myStack = new Stack<Character>();

char letter = 'a';
myStack.push((Character) letter); 
```

创建一个包含`Character`对象的堆栈，并在插入它们之前将您`char`的 s 转换为。`Character`

Java`Character`类：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html)

就像`int`s 和`Integer`s 一样，您需要先包装一个原语，然后才能将其插入数据结构。

编辑：显然`Stack`已弃用，因为它继承自`Vector`. 原因如下：[为什么 Java Vector 类被认为已过时或不推荐使用？](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated)

正如马克彼得斯所说，您应该使用`LinkedList`or `ArrayDeque`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T02:51:47.043

我决定回答这个问题，因为有一些误解......所以，有`String`：

```
String s = "your string"; 
```

创建`Stack`或`List`( `LinkedList`) 查看对 Michael 的回答的评论

```
Stack<Character> d = new Stack<Character>(); 
```

毕竟循环与`char`推送逻辑

```
 for (char c : s.toCharArray()) {
        d.push(c);
    } 
```

仅此而已！

# javascript - 使用 JavaScript 的经典 ASP 给出 500 错误

> ID：14430997
> 
> 赞同：2
> 
> 时间：2013-01-21T00:37:35.840
> 
> 标签：javascript, vbscript, asp-classic, iis-7.5, serverside-javascript

我不知道为什么我一直`HTTP/1.1 500 Server Error`在使用 JavaScript 作为服务器端语言。如果我使用 VBScript，它工作得很好。我有其他网站使用服务器端 JavaScript 在同一台机器上运行，没有问题。我似乎无法通过事件查看器、IIS 日志或搜索 Web 找到更多信息。

下面我有 VBScript 和 JavaScript 中的小代码示例。

## VBScript（作品）：

```
<%@ Language=VBScript %>
<% Response.Write("hello vbscript") %> 
```

## JavaScript（500 错误）：

```
<%@ Language=JavaScript %>
<% Response.Write("hello javascript"); %> 
```

我确定这是一个配置问题，但我似乎找不到任何与此问题相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:48:33.023

经过长时间的老化和拔掉头发后，问题是 javascript 需要 32 位应用程序。如果您右键单击有问题的应用程序池并将“启用 32 位应用程序”设置为 True，一切正常。如图所示，这是一个配置问题，但文档和错误消息，或者说缺少错误消息，还有很多不足之处。

# c# - 允许一次只调用一个实例的异步方法

> ID：14430999
> 
> 赞同：22
> 
> 时间：2013-01-21T00:38:11.617
> 
> 标签：c#, .net, locking, task-parallel-library, async-await

我有一个不能同时在多个线程中执行的方法（它写入文件）。我不能用`lock`，因为方法是`async`。如何避免在另一个线程中调用该方法？而不是第二次调用它，程序应该等待前一次调用完成（也是异步的）。

例如，使用以下代码创建一个新的 C# 控制台应用程序：

```
using System;
using System.IO;
using System.Threading.Tasks;
namespace ConsoleApplication1 {
    internal class Program {

        private static void Main () {
            CallSlowStuff();
            CallSlowStuff();
            Console.ReadKey();
        }

        private static async void CallSlowStuff () {
            try {
                await DoSlowStuff();
                Console.WriteLine("Done!");
            }
            catch (Exception e) {
                Console.WriteLine(e.Message);
            }
        }

        private static async Task DoSlowStuff () {
            using (File.Open("_", FileMode.Create, FileAccess.Write, FileShare.None)) {
                for (int i = 0; i < 10; i++) {
                    await Task.Factory.StartNew(Console.WriteLine, i);
                    await Task.Delay(100);
                }
            }
        }
    }
} 
```

在此示例中，第二次调用`CallSlowStuff`引发异常，因为它无法访问已打开的文件。添加`lock`不是一种选择，因为`lock`不要`async`混合。（`Main`方法应该被认为是不可更改的。在实际应用中，`CallSlowStuff`是一个可以在任何地方调用的接口方法。）

*问题：*如何在`CallSlowStuff`不阻塞主线程的情况下进行后续调用以等待当前正在运行的调用完成？可以只使用 async/await 和任务（也许还有 Rx）来完成吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T01:09:57.233

你需要某种异步锁。Stephen Toub 有[一系列关于构建`async`同步原语](https://devblogs.microsoft.com/pfxteam/tag/coordination-data-structures/)（包括[`AsyncLock`](https://devblogs.microsoft.com/pfxteam/building-async-coordination-primitives-part-6-asynclock/)）的文章。的一个版本`AsyncLock`也包含在 Stephen Cleary 的[AsyncEx 库](https://github.com/StephenCleary/AsyncEx)中。

但可能更简单的解决方案是使用内置的[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/hh462805.aspx)，它支持异步等待：

```
private static SemaphoreSlim SlowStuffSemaphore = new SemaphoreSlim(1, 1);

private static async void CallSlowStuff () {
    await SlowStuffSemaphore.WaitAsync();
    try {
        await DoSlowStuff();
        Console.WriteLine("Done!");
    }
    catch (Exception e) {
        Console.WriteLine(e.Message);
    }
    finally {
        SlowStuffSemaphore.Release();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:44:36.677

我会考虑更改将`CallSlowStuff`消息发布到[TPL DataFlow](http://msdn.microsoft.com/en-us/library/hh228612.aspx) ActionBlock 的方法主体，并将其配置为单一程度的并行性：

所以在某处保留一个 ActionBlock：

```
ActionBlock actionBlock = 
    new ActionBlock<object>(
         (Func<object,Task>)CallActualSlowStuff,
         new ExecutionDataflowBlockOptions(){MaxDegreeOfParallelism=1}); 
```

现在：

```
public void CallSlowStuff()
{
    actionBlock.Post(null);
}

private async Task CallActualSlowStuff(object _)
{
    using (File.Open("_", FileMode.Create, FileAccess.Write, FileShare.None)) {
        for (int i = 0; i < 10; i++) {
            await Task.Factory.StartNew(Console.WriteLine, i);
            await Task.Delay(100);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:01:41.697

您可以在这种情况下使用信号量，请参阅[http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)

就像是：

```
private Semaphore sem = new Semaphore(1, 1);

private static async Task DoSlowStuff () {
  sem.WaitOne();
  // your stuff here
  sem.Release();
} 
```