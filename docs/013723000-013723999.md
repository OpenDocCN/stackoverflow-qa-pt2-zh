# StackOverflow 问答 13723000-13723999

# asp.net-mvc - MVC 4 Post 数据正在重置未更改的属性

> ID：13723001
> 
> 赞同：0
> 
> 时间：2012-12-05T12:12:23.040
> 
> 标签：asp.net-mvc, post, properties, model-binding, reset

我要创建的是一个显示模型属性的视图，以及更改 1 个属性的选项，在这种情况下，我为其创建了一个助手的“状态”。

我已经到了正确修改和更改更改的属性的地步，但是现在正在重置其他属性的值。

我猜这是因为发布数据用于修改模型，并且由于某些属性是不可更改的，所以我猜想使用空值来更新模型？

这是我的控制器 GET：

```
public ActionResult Edit(int id = 0)
    {
        ProductCode productcode = db.ProductCodes.Find(id);
        if (productcode == null)
        {
            return HttpNotFound();
        }
        return View(productcode);
    } 
```

这里是POST：

```
[HttpPost]
    public ActionResult Edit(ProductCode productcode)
    {
        if (ModelState.IsValid)
        {
            db.Entry(productcode).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(productcode);
    } 
```

最后是视图：

```
@model PortalTMC.Models.ProductCode

@{
     ViewBag.Title = "Change status";
}

<h2>Status veranderen</h2>
<br />

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
         <legend>ProductCode</legend>

        @Html.HiddenFor(model => model.Id)

        @Html.LabelFor(model => model.Id, "Id")
        @Html.DisplayFor(m => m.Id)
        @Html.LabelFor(model => model.Code, "Product code")
        @Html.DisplayFor(m => m.Code)
        @Html.LabelFor(model => model.Role, "Rol  (1 = Administrator  |  2 = Trainer  |  3 = User)")
        @Html.DisplayFor(m => m.Role)
        <div class="editor-label">
            @Html.LabelFor(model => model.Status, "Status")
        </div>
        <div class="editor-field">
            @Html.EnumDropDownListFor(model => model.Status)
        </div>
        <p>
        <input type="submit" value="Verander status" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Terug naar lijst", "Index")
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
} 
```

任何帮助将非常感激

**更新：**

不幸的是，在 post 方法中包含或排除属性不起作用：/例如，如果我将 post 方法替换为：

```
[AcceptVerbs(HttpVerbs.Post)]
    [HttpPost]
    public ActionResult Edit([Bind(Exclude = "Role, Code")] ProductCode productcode)
    {
        if (ModelState.IsValid)
        {
            db.Entry(productcode).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(productcode);
    } 
```

我仍然以重置角色和代码结束..

产品代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace PortalTMC.Models
{
    public class ProductCode
    {
        //PK
        [Key]
        public int Id { get; set; }

        public string Code { get; set; }
        public ProductCodeStatus Status { get; set; }
        public int Role { get; set; }
    }

    public enum ProductCodeStatus
    {
        Active,
        Inactive,
        Pending,
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:13:41.097

vtortola 的建议非常有效，您不应该将实体直接暴露在视图中。我只会解释为什么实体的值即使在使用之后也会被重置`ExcludeAttribute`。事实上，它们并没有被重置。模型绑定器创建一个填充有默认值的新对象，然后将请求中的值写入该对象。在这里使用`ExcludeAttribute`不会有任何效果，因为它只是忽略了从请求参数中排除的值。但它仍然是一个新对象（不是来自 db 的对象）。因此，如果您希望模型绑定对象中出现不可编辑的值，则需要在请求对象中提供这些值（隐藏字段是一种选择）。

第二种选择是您从方法中省略绑定对象并通过方法显式调用模型绑定，`UpdateModel`例如

```
[AcceptVerbs(HttpVerbs.Post)]
    [HttpPost]
    public ActionResult Edit()
    {
        var code = db.GetCode();
        if (ModelState.IsValid)
        {

            UpdateModel(code, "Excluded properties as string seperated by comma");//plz check the correct overload of updatemodel
            db.SaveChanges();
            return RedirectToAction("Index");
        }
    return View(code);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:38:56.930

您可以使用[ExcludeAttribute](http://ittecture.wordpress.com/2009/05/01/tip-of-the-day-199-asp-net-mvc-defining-model-binding-explicitly/)从绑定中排除属性。

但绝对不要通过 MVC 公开数据实体。创建表示浏览器和服务器之间的信息交换的输入/输出模型，以便您对该信息进行细粒度控制，如果它有效，则获取数据实体并应用值。

干杯。

# php - ICONV 函数和 Windows-1252

> ID：13723004
> 
> 赞同：0
> 
> 时间：2012-12-05T12:12:30.797
> 
> 标签：php, character-encoding, imap, iconv

我有一个从网络邮件中读取电子邮件并将数据保存在数据库中的应用程序。我正在使用 PHP 的 imap 库来完成大部分工作。

问题是大多数电子邮件都有多个字符集（主要是 ISO-8859-1 和 UTF-8），所以我必须从电子邮件中读取字符集，然后使用 iconv 函数将其解码为 ISO-8859-1。

它适用于大多数字符集，但是当我阅读 Windows-1252 字符集并尝试对其进行解码时，iconv 函数没有返回任何内容。

如果我尝试将 iconv 函数更改为 mb_convert_string，它不会正确转换所有字符。

这是我的代码：

```
if( $part->parameters[$i]->attribute == 'charset' )
    $charset =  $part->parameters[$i]->value;

if (strtolower($charset) != 'iso-8859-1')
    $this->emailMessageTxt = iconv($charset, 'iso-8859-1', $this->emailMessageTxt); 
```

里面有错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:15:39.470

# android - 应用在 Google Play 中不可见

> ID：13723010
> 
> 赞同：0
> 
> 时间：2012-12-05T12:12:54.440
> 
> 标签：android, visibility, google-play

google play 中的许多平板电脑都看不到我的应用程序。包括我的三星 Galaxy Tab 2。这可能会发生吗？我认为问题可能是我与本机代码一起使用的 PDF 阅读器。

```
versionCode: 2
versionName: 1.0.1
Tamaño: 5,5M
Localizada a: predeterminado
Permisos: android.permission.INTERNET
android.permission.READ_EXTERNAL_STORAGE
android.permission.WRITE_EXTERNAL_STORAGE
android.permission.ACCESS_NETWORK_STATE
android.permission.CALL_PHONE
android.permission.ACCESS_WIFI_STATE

Características: 
android.hardware.screen.landscape
android.hardware.screen.portrait
android.hardware.telephony
android.hardware.touchscreen
android.hardware.wifi

No hay archivo de expansión principal.
No hay archivo de parche de expansión.

Nivel del API: 8-17+
Pantallas admitidas: large-xlarge
Texturas OpenGL: todo
Plataformas nativas: armeabi-v7a, armeabi 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:13:57.403

也许问题出在这条线上，因为许多平板电脑没有电话功能：

```
android.permission.CALL_PHONE 
```

# java - 挂毯，区域内循环

> ID：13723014
> 
> 赞同：0
> 
> 时间：2012-12-05T12:13:22.927
> 
> 标签：java, apache, tapestry

我还有一个大问题。我有组件，带区域和刷新区域的表单。当我将组件放入循环时，它只显示最后一个区域。我为每个区域生成了唯一 ID。在页面源代码中，我可以看到每个区域都获得了正确的 ID，但在提交时它没有返回正确的 ID。反正有没有按ID返回区域？

这是我的代码：

```
<details>      
    <summary>Comments</summary><br />        
      <t:zone t:id="commentZone" id="prop:zoneId">                
                <t:commentlist materijalID="materijalID"></t:commentlist><br />  
    </t:zone>                
    <t:form t:id="komentar" t:context="materijalID" t:zone="prop:zoneId">
            <t:textarea t:value="comment" rows="6" cols="40"></t:textarea><br />
             <input type="submit" value="Add comment"/>
    </t:form>
</details> 
```

```
public class Comments 
{   
    @Parameter(required=true) 
    @Property 
    private int materijalID; 

    @SessionState 
    @Property 
    private User user; 

    @Inject 
    private Session session; 

    @Property 
    private String comment; 

    @InjectComponent 
    private Zone commentZone; 

    @CommitAfter 
    public Object onSuccessFromKomentar(int materijalID) 
    {
        Komentar k = new Komentar(); 
        Date d = new Date(); 
        Materijal m = (Materijal)session
                .createCriteria(Materijal.class)
                .add(Restrictions.eq("materijalID", materijalID))
                .list()
                .get(0); 
        k.setMaterijal(m); 
        k.setKorisnikID(this.user.getID()); 
        k.setDatumUnosa(d); 
        k.setDatumModifikacije(d); 
        k.setKomentar(this.comment); 
        session.save(k); 
        this.comment = ""; 
        return this.commentZone.getBody(); 
    }

    public String getZoneId() 
    { 
        return "Zone_" + this.materijalID; 
    } 
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:57:28.253

您是否尝试过`t:defer="false"`在 中设置`Submit`？

[亨宁在这里](https://stackoverflow.com/a/6014623 "here")回答了一个类似的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:42:38.937

问题很可能是您传递给commentList 的材料ID 与作为@Parameter 传递的相同。这意味着您的封装组件将为您设置此值。在你的循环的情况下，这很可能总是在你的渲染阶段之后的最后一个。

解决方案在于解耦这个通道。类似于以下内容：

```
<details>      
    <summary>Comments</summary><br />        
    <t:zone t:id="commentZone" id="prop:zoneId">                
        <t:commentlist materijalID="prop:passThroughMaterijalID"></t:commentlist>
        <br />  
    </t:zone>                
    <t:form t:id="komentar" t:context="materijalID" t:zone="prop:zoneId">
        <t:textarea t:value="comment" rows="6" cols="40"></t:textarea><br />
        <input type="submit" value="Add comment"/>
    </t:form>
</details> 
```

```
public class Comments 
{   
    @Parameter(required=true) 
    @Property 
    private int materijalID; 

    @Property 
    private int passThroughMaterijalID; 

    @SessionState 
    @Property 
    private User user; 

    @Inject 
    private Session session; 

    @Property 
    private String comment; 

    @InjectComponent 
    private Zone commentZone; 

    @SetupRender
    private void setup() {
        this.passThroughMaterijalID = materijalID;
    }

    @CommitAfter 
    public Object onSuccessFromKomentar(int materijalID) 
    {   
        this.passThroughMaterijalID = materijalID;
        Komentar k = new Komentar(); 
        Date d = new Date(); 
        Materijal m = (Materijal)session
                .createCriteria(Materijal.class)
                .add(Restrictions.eq("materijalID", materijalID))
                .list()
                .get(0); 
        k.setMaterijal(m); 
        k.setKorisnikID(this.user.getID()); 
        k.setDatumUnosa(d); 
        k.setDatumModifikacije(d); 
        k.setKomentar(this.comment); 
        session.save(k); 
        this.comment = ""; 
        return this.commentZone.getBody(); 
    } 

    public String getZoneId() 
    { 
            return "Zone_" + this.materijalID; 
    } 
} 
```

# c++ - 如何正确调整向量的大小？

> ID：13723019
> 
> 赞同：4
> 
> 时间：2012-12-05T12:13:43.927
> 
> 标签：c++

从[这个答案](https://stackoverflow.com/a/381756/179015)：

> 您可能会遇到性能问题的一个地方是一开始​​就没有正确调整向量的大小。

那么，当向量是类的属性时，如何正确调整向量的大小？是否有（最佳）方法来设置向量的**容量**（在初始化时）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:15:50.003

就在这里。见[预留](http://www.cplusplus.com/reference/vector/vector/reserve/)方法。它将要求向量的容量至少足以包含作为其参数发送的元素的数量。如果您可以预期要存储在向量中的项目数量的上限，那么您可以在向量中保留该空间量。

来自上述链接的示例 -

```
// vector::reserve
#include <iostream>
#include <vector>

int main ()
{
    std::vector<int>::size_type sz;

    std::vector<int> foo;
    sz = foo.capacity();
    std::cout << "making foo grow:\n";
    for (int i=0; i<100; ++i) {
        foo.push_back(i);
        if (sz!=foo.capacity()) {
            sz = foo.capacity();
            std::cout << "capacity changed: " << sz << '\n';
        }
    }

    std::vector<int> bar;
    sz = bar.capacity();
    bar.reserve(100);   // this is the only difference with foo above
    std::cout << "making bar grow:\n";
    for (int i=0; i<100; ++i) {
        bar.push_back(i);

        // This block will execute only once
        if (sz!=bar.capacity()) {
            sz = bar.capacity();
            std::cout << "capacity changed: " << sz << '\n';
        }
    }

    return 0;
} 
```

你会看到当你向`foo`向量中添加更多元素时，它的容量会不断增加，但在第二种情况下，由于它已经保留了 100 个元素的空间，容量只改变了一次。

[这](http://ideone.com/Tl0rZc)是一个运行示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:21:56.167

考虑到类在构造函数期间被赋予了一个值，聪明的事情就是存储向量的初始大小。当用户不断扩展向量的大小而不是设置向量的基本长度时，效率就会降低。

```
//consider the vector reads in chars from a string
VecClass::VecCalss(char * str)
{
    size_t LEN = strlen(str);
    Vect = std::vector<char>(LEN, '\0'); //start with the initial size of the char
} 
```

设置初始大小可以减少程序中需要扩展向量的次数。

编辑：或者储备方法会做几乎相同的事情，从来不知道储备功能存在（非常方便！）。

# c - Tokyocabinet：循环遍历BTree文件

> ID：13723022
> 
> 赞同：0
> 
> 时间：2012-12-05T12:13:52.367
> 
> 标签：c, loops, tokyo-cabinet

我通过光标遍历 BTree（[来自文档的示例](http://fallabs.com/tokyocabinet/spex-en.html#tcbdbapi)）

见下面的代码：

```
 kkey_t* p2;  // the type kkey_t is some struct
 int counter=0;
 BDBCUR *cur = tcbdbcurnew(bdb);
 tcbdbcurfirst(cur);
 while((p2 = (kkey_t*)tcbdbcurkey(cur, &len )) != NULL){ 
    printf("%u.%u\t%u\n",p2->type, p2->key, counter);
    free(p2);
    res = tcbdbcurnext(cur);
    if (!res) break;

    counter++;    
 } 
```

我得到了 562 418 条记录 `tcbdbrnum()`，但我有循环，其中`counter`超过 150 000 000 甚至更多......我没有循环完成。

可以是什么问题？

我发现循环大小为 150652 cylses，循环偏移量接近 1.3 * 150652 所以，我将文件增加到 1 042 638 个键，并且我有 loopsize = 280299 比率 recsize / loopsize = 3,73 ...

做什么，有unlooping？为什么我有循环？

所有密钥都是随机的，大小为 64 位（8 字节）。可以删除一些键。

# cocoa-touch - 什么是 Cocoa Touch UIKit 布局

> ID：13723025
> 
> 赞同：0
> 
> 时间：2012-12-05T12:14:03.330
> 
> 标签：cocoa-touch, uikit

我找不到适用于 iOS 应用程序的 UIKit 布局的 Cocoa Touch 文档。是否有一个页面可以让我阅读 Apple 为开发人员开发的所有类型的布局？

我喜欢关于 Android 的 Google 文档，因为他们将所有类型的布局（如 RelativeLayout、LinearLayout 等）放置得多么清晰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:54:50.633

查看[Apple 的 UIKit 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/_index.html)——它包含有关 Cocoa Touch 的 UIKit 中可用内容的所有信息。

> UIKit 框架提供了为 iOS 构建和管理应用程序用户界面所需的类。它提供了专门为触摸屏界面设计的应用程序对象、事件处理、绘图模型、窗口、视图和控件。图 I-1 说明了该框架中的类。

还可以查看[CocoaDev 的 UIKit](http://cocoadev.com/wiki/UIKit) - 他们有教程和众包文档。

# javascript - 如何在javascript中创建带有文本和小删除图标的div容器

> ID：13723026
> 
> 赞同：0
> 
> 时间：2012-12-05T12:14:06.350
> 
> 标签：javascript, asp.net, postback

使用动态创建的 TextBox 和 Button 控件（ASP.NET C# 页面），我需要编写 JavaScript 函数，该函数将（通过单击按钮）在该文本旁边添加文本 + 一些小删除图标（使用户能够删除该文本），并且将它放在某个容器（div 或其他东西）中。

不知道我解释得够不够清楚，但我想做一些与这个 stackoverflow TAGS 区域非常相似的东西（在我的例子中，应该通过单击按钮来创建标签）。 ![在此处输入图像描述](../Images/c120cb92d4d2a5f00c1d156431187c9c.png)

此外，我必须在回发后获取这些值（在用户提交该页面后将其写入数据库）。谢谢！

```
<script type="text/javascript"> 
function addTo(val) 
{ 
  document.getElementById('MainContent_txtbox').value = ""; 
  var lblLink = document.createElement("span"); 
  lblLink.appendChild(document.createTextNode(val));     
  document.getElementById('addItHere1').appendChild(lblLink); 
} 
</script> 
```

单击按钮时，它会显示在 div 标签中

```
Label Labe3 = new Label(); 
Labe3.Text = "<div id=\"addItHere" + itemCounter.ToString() + "\" ></div>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:55:05.127

首先：

```
<span class="post-tag">text<span class="delete-tag" onclick="delete(this.parentNode);">x</span></span> 
```

你应该采取的下一步：学习如何为body标签附加onclick，如何确定目标，如何检查它的类属性，将它的值与“delete-tag”进行比较等。

# javascript - javascript/jquery中的超简单动画引擎

> ID：13723027
> 
> 赞同：2
> 
> 时间：2012-12-05T12:14:09.093
> 
> 标签：javascript, jquery, animation, jquery-deferred

我需要一个简单的引擎来告诉我一些动画（但也可以是 ajax 调用或任何具有某种“onComplete”功能的东西）何时完成，我的意思是，当所有注册的动画都完成时。

我写了一个简单的[**jsFiddle**](http://jsfiddle.net/nkint/XXd9u/)。

我有一些疑问：

1.  ~~为什么我不能写`this.i`or`this.finish`但我必须使用`Engine.i`or `Engine.finish`？有没有更好的方法来编写这样一个简单的类？我试图在[这里](http://javascriptweblog.wordpress.com/)记录一下，但仍然不清楚。这个内部引擎是一个 div，因为它在内部被调用，`$("#somediv").bind('click', function() { })`但我不知道在对象引擎上使用静态 (??) 变量是否是处理它的正确方法。~~多亏了[这个](https://stackoverflow.com/a/1394969/433685)答案，我已经解决了“这种自我重复”（我怎么能调用这个方法？）

2.  在这种情况下，jquery[延迟对象可以帮助我吗？](http://api.jquery.com/category/deferred-object/)也许有一种更简单有效的方法来用延迟对象编写它。我需要一些我可以在任何东西上调用的东西（动画，在预加载时完成，ajax）..

希望很清楚..任何处理类似情况的建议或链接表示赞赏！

## 最后的代码

现在是最后一个代码：

```
engine = new Engine(); 

$("#clickme").bind('click', function() {
    $(".bar").each(function() {
        engine.add()
        $(this).animate({width:200}, getRandomInt(500, 3000), 
                        engine.oncomplete);                      
    });
});

// animation engine
function Engine() {   
    var self = this;
    this.i = 0;
    this.add = function() {
        self.i++;
    }
    this.oncomplete = function() {
        self.i--;
        if(self.i<=0){
            self.finish();
        }
    }     
    this.finish = function() {
        alert("done!");           
    }
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:52:39.857

**更新：**
我仔细看了你的小提琴。有几件事需要修复。您在构造函数中定义所有方法。只是不要这样做：每次创建实例时，都会一遍又一遍地创建相同的函数。这*完全*是矫枉过正。这是[一个工作小提琴，其中所有方法都是原型属性](http://jsfiddle.net/HxeBt/1/)。

特别是有一条线导致了一些问题：

```
$(this).animate({width:200}, getRandomInt(500, 3000), engine.oncomplete); 
```

在这里，您将对该方法的引用*作为*`oncomplete`回调传递，但调用函数对象的上下文是*ad-hoc*确定的，因此这不再引用实例`engine`，但这是一个简单的解决方法：只需使用包装函数：

```
$(this).animate({width:200}, getRandomInt(500, 3000), function()
{//this anonymous function will get some context
    engine.oncomplete();//but invokes oncomplete in the context of engine, this references engine here
}); 
```

另一种方法是：一个`var self`覆盖原型方法的闭包（就像你一样，也许是在不知不觉中创建的）：

```
engine.oncomplete = (function(that,prototypeMethod)
{//argument is reference to engine object, and the original method, that we're overriding
{
    return function()
    {//new version of the method, you can do this right after the instance is created
     //or even in the constructor
        return prototypeMethod.apply(that,[]);//call in correct context
    };
}(engine,engine.oncomplete));
$(this).animate({width:200}, getRandomInt(500, 3000),engine.oncomplete);
delete engine.oncomplete;//reset to prototype method, optional 
```

无论哪种方式，这就是它所需要的。[这是有关此事的更多信息-我认为](https://stackoverflow.com/questions/13294350/using-this-when-function-and-selector-are-not-together/13294624#13294624)。
还有一些事情可以稍微调整一下，但总的来说，我认为你进展顺利。请记住：方法最好远离构造函数。如果第二个选项有点模糊（它是，IMO）。
我已经向自己保证这将是我将添加到这个答案的最后一个链接：我已经问过一个关于[JavaScript 内存泄漏的](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)问题，这是我的另一篇庞大的帖子，但看看一些代码片段：看看函数`reusableCallback`是如何被调用的，也看看我发布给我自己的问题的“答案”，有一个例子说明如何原生`prototypes`可以使用。如果您感到无聊，或者如果您有兴趣：尝试阅读代码并找出`this`在任何给定时间将参考的内容。如果你能解决这个问题，我认为你知道 JS 确定范围的基本原则是公平的。

* * *

你不能写`this.finish`，仅仅因为`this`没有一个名为`finish`. 只是改变：

```
Engine.finish = function(){}; 
```

到

```
Engine.prototype.finish = function(){}; 
```

为什么？仅仅因为 JS 函数是一等对象（它们可以分配给变量，无论如何都可以引用函数对象，它们可以作为参数传递给函数，它们可以是函数的返回值，等等......）
只是尝试`console.log(Engine instanceof Object);`，它会记录为真。所以你正在做的是这样的：

```
function Engine(){};
//is hoisted, and interpreted as:
var Engine = function(){};//<-- a function object, that is referenced by a var: Engine
Engine.finish = function(){};
//just like any object, assign a property to the object that Engine is referencing 
```

但是，当您创建一个新的 Engine 对象时：

```
var myEngine = new Engine(); 
```

JS 检查正在引用的任何对象的*原型*`Engine`，在这种情况下：它引用了一个函数。该函数使用`new`关键字调用，因此 JS 将创建一个对象。为此，它需要原型（以及很多原型）。这个特定函数（构造函数）的*原型*没有定义任何属性，所以 JS 会在链中寻找下一个原型，`Object`原型。该原型的所有方法和属性都被传递给新实例（尝试`myEngine.toString();`and `Object.prototype.toString === myEngine.toString`，您会注意到它们共享相同的方法）。
请注意，这并不完全正确/准确，甚至不是您从构造函数创建新对象时发生的所有事情的 10%，但它可能会帮助您了解一些即将发生的事情：

假设您希望每个新实例都有一个`finish`方法，并且 - 如您所知 - 所有新 Engine 实例都继承 中的方法`Object.prototype`，您可能会这样做：

```
Object.prototype.finish = function(){};//!! 
```

它肯定会起作用，但它也会起作用，然后：`someArray.finish`！是的，数组是对象，函数、对 DOM 元素的引用以及你拥有的东西也是如此。所以*不要改变对象原型！*
相反，JS 允许您在该特定构造函数的所有实例共享的原型级别上定义某些方法：

```
function Engine(){};//emtpy
Engine.prototype.i = 0;
var newEngine = new Engine();
console.log(newEngine.i);//0
var anotherEngine = newEngine();
newEngine.i = 1234;
console.log(anotherEngine.i);//0
console.log(newEngine.i);//1234 
```

这将创建一个如下所示的基本原型链：

```
EngineInstance {list of instance properties}
   ||
   ====>Engine.prototype {list of properties that all Engine instances have}
           ||
           ====> Object.prototype {properties for all objects, Engine is an object, so it should have these, too} 
```

因此，每当创建新实例时，都会为该新实例分配原型中定义的任何属性。结果，一个方法可以创建一次（而不是在构造函数中，它为每个实例创建一个新函数），所有实例都将共享该方法。[但请参阅 MDN 了解更多详情](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

就这一点：JS 访问对象属性的方式与创建对象的方式相同，只是顺序相反：
调用时`newEngine.finish`，JS 会*首先*查看该*实例*是否具有自己的`finish`属性，如果没有，则`Engine`检查原型，如果它也没有完成方法，JS 将继续通过原型链，直到找到所需的属性（一直到`Object.prototype`），或者，如果对象原型没有该属性，它只会返回`undefined`，这说明了一切，真的：这个属性是`undefined`.

作为结果，您可以*屏蔽*原型方法/属性，只要您需要它们的行为与其默认行为不同，然后只需`delete`修改方法即可。这是一个真实的例子：

```
function doAjax(data, url, method)
{
    var xhr = makeAjaxInstance();
    data.toString = function()
    {
        return JSON.stringify(this);
    };
    //some more stuff, but then:
    xhr.send(data + '');//<-- add empty string forces implicit call to the toString method
    delete data.toString;
}
doAjax('my/url',{foo:'bar'},'post'); 
```

JS 执行其通常的例程：检查`toString`方法的实例并找到它。调用该函数，并发送一个整洁的 JSON 字符串。之后，该`toString`方法被删除。
JS 在实例本身上搜索该属性。方法被删除了，所以原型的toString方法就不再*被屏蔽*了，下次调用的时候，JS也会做同样的伎俩，但不是在on上查找方法`data`，而是扫描原型，*恢复正常服务*。
我确实希望这个答案不会太混乱，但是我*很累*，所以如果是：对不起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:28:33.200

解决点 1：通过使用 Engine.i 和 Engine.finish，您正在定义[静态](https://stackoverflow.com/questions/1535631/static-variables-in-javascript)字段。您可能想要使用 Engine.prototype.i 和 Engine.prototype.finish。

# bash - 仅用于一种文件类型的递归 ctag

> ID：13723028
> 
> 赞同：13
> 
> 时间：2012-12-05T12:14:17.720
> 
> 标签：bash, recursion, ctags

我想使用 ctags 为项目创建标签，该标签分布在多个子文件夹中。

我知道这可以使用`ctags -R *`.

是否可以限制生成只使用具有相同后缀的文件？例如，它应该为所有`*.c`文件创建标签，但不为`*.h`文件或 Makefiles 创建标签。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T12:19:56.483

我通常使用

```
find -name '*.c' -exec ctags {} + 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-16T19:26:58.943

如果您使用[Universal Ctags](https://ctags.io/ "通用标签")，您可以使用`--languages`选项。仅解析 php 文件的示例是

```
ctags -R --languages=php 
```

您可以使用逗号组合多种语言。要获取支持的语言列表，请使用`--list-languages`选项。

# asp.net - ASP.NET 上传您自己的照片和文字

> ID：13723029
> 
> 赞同：-2
> 
> 时间：2012-12-05T12:14:22.100
> 
> 标签：asp.net

我正在做一个可供客户用来上传自己的新闻文章的网络应用程序，我已经完成了页面，但我不知道如何让用户在那里上传标题、文本和照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:48:56.033

我认为你必须想出一个数据库结构，你可以在其中保存每个客户端的数据。例如。标题、文字、图片等...

您可以将图像保存为二进制文件或将物理位置保存在数据库中。

使用文件[上传](http://msdn.microsoft.com/en-us/library/aa479405.aspx)浏览图像..

看看[这个](http://asp.net-tutorials.com/controls/file-upload-control/)例子，了解如何使用文件上传控件

# arrays - 将模型保存在循环中

> ID：13723030
> 
> 赞同：2
> 
> 时间：2012-12-05T12:14:22.690
> 
> 标签：arrays, yii, models, saving-data

我需要通过逗号分隔字段值多次保存字段值。我正在获取值，但我需要将模型中的每个值存储在一个循环中。

```
$subModel->name = $_POST['Model']['keywords'];
$keyword = explode(",", $subModel->name);    
for ($i=0; $i<=sizeof($keyword)-1; $i++)
{
    //echo $keyword[$i]."<br/>";
    $subModel->name = $keyword[$i];
    $subModel->save();
} 
```

它只存储最后一个值，谁能告诉我如何在循环中的子模型中为每个值多次存储到我的模型中。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T12:19:35.963

您需要`$subModel->isNewRecord = true`在每次迭代中设置并取消设置（或手动设置为您选择的值）模型的 id 字段。它看起来像这样：

```
for ($i=0; $i<=sizeof($keyword)-1; $i++)
{
    // if $subModel->name is not the primary key for that model, unset the PK here:
    // $subModel->id = null
    $subModel->name = $keyword[$i];
    $subModel->isNewRecord = true;
    $subModel->save();
} 
```

# android - 我正在使用共享首选项将任务保存在我的应用程序中。但它只显示最后添加的任务？

> ID：13723033
> 
> 赞同：0
> 
> 时间：2012-12-05T12:14:25.223
> 
> 标签：android, task, sharedpreferences, android-notifications

![显示最后输入的详细信息](../Images/26c6fb56cc8d487a51b6eb1e3c64c2d0.png) 我正在创建一个任务管理器来提醒任务，所以我添加了任务，添加任务后，我有一个名为 view 的按钮来显示创建的任务，但它只显示最后一个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:21:19.657

您看到最后添加的任务的原因是共享首选项根据键值对存储值。因此，当您在共享首选项中使用相同的键添加一些值时，它会覆盖写入。您可以使用不同类型的键将值存储在共享首选项中。但是为了获得更好的性能，您可以使用数据库来执行此操作，这将是您情况下的最佳解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:36:23.450

考虑为此类应用使用 SQLiteDatabase 而不是 SharedPreferences。网上也有很多教程，一步一步地展示如何做到这一点！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:22:32.087

因为您正在覆盖该共享偏好。保存任何具有不同名称的任务不会覆盖以前的首选项。然后通过该名称访问它们。

# c - 使用指针分配结构值是否安全

> ID：13723039
> 
> 赞同：2
> 
> 时间：2012-12-05T12:14:35.807
> 
> 标签：c

我有以下结构：

```
struct foo
{
   int  a;
   char b;
}; 
```

它存储在内存中，指向它的指针可以是未对齐的（奇数地址）。

那么，这安全吗？：

```
const struct foo a = *((struct foo*)char_ptr); 
```

我很担心，因为源结构的整数成员可能位于奇数地址。在某些系统中，从奇数地址读取（多字节）整数会导致问题。

**编辑：** 为了避免关于使用的偏离主题的评论`const`，我确实`const`从代码中删除了 a 。（我从不将 const 指针转换为非 const 指针，即使在这种情况下它不应该引起任何问题）

**更多关于问题的上下文：**这种结构是协议框架的一部分。它可以在框架内的任何偏移处。在实际代码中，结构具有`__attribute__((packed))`属性。但这可能不会改变答案？

无论如何，我可以使用`memcopy`和非常量`a`来解决问题。但我想使用 assingment，因为它似乎是更优雅的方式（如果它是安全的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:22:44.627

请参阅[数据结构填充](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)。在大多数系统上，结构将对齐，内部成员地址将根据它们各自的大小对齐，同时 malloc'ing 本身。

如果您手动创建一个内存池并使用其中的某个部分来存储您的 struct 对象，那么编译器将无法保证您对齐，但是如果您使用 malloc 创建 struct 对象，编译器通常会很头疼，给您对齐的地址，如果需要，在结构元素之间使用填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:35:17.227

如果您从指向数据的指针不一定对齐的源获取数据，那么您可以做的唯一安全的事情是 memcpy 并希望您的编译器不是“智能”并假装未对齐的指针实际上是对齐的并且memcpy 可以优化（有几个旧版本的 gcc 有这个错误，需要你编写一个不称为 memcpy 的自定义 memcpy 函数）。根据您的架构，您可以摆脱不正确对齐的访问，但几乎可以肯定它会更慢，有时甚至会通过内核陷阱进行模拟。

附带轶事：这通常是操作系统中的网络堆栈中的一个问题，其中以太网标头的奇数大小使 IP 标头未对齐，并且如果硬件没有能力错位接收的数据包（某些 DMA 引擎只能写入4 字节边界上的数据），这需要在软件中再次复制整个标头（或整个数据包）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:30:00.980

不，这不安全，除非您知道指针具有结构所需的对齐方式。

以下是了解指针是否具有必要对齐的一些方法：

*   该指针最初是指向此结构类型的指针，然后才转换为指向 char 的指针。
*   指针是内存分配例程（例如`malloc`）的结果，该例程保证返回的地址被适当地分配给任何用途（`malloc`确实保证）。
*   指针是根据上述之一以保持所需对齐的方式计算的。
*   您将指针转换为 a`uintptr_t`并测试其对齐方式，前提是您的 C 实现支持这一点。
*   您的 C 实现（尤其是操作系统和处理器）允许对结构中类型的对象进行非对齐访问。

如果您不知道指针具有必要的对齐方式，则不应通过转换后的指针访问该结构。相反，您可以定义一个新结构并使用`memcpy`它从指向字符的指针复制到新结构中。

# jquery - 按钮未触发第一次单击事件，导致 IE（ASP.NET）中的 FileUpload 控件出现奇怪的结果

> ID：13723041
> 
> 赞同：1
> 
> 时间：2012-12-05T12:14:47.647
> 
> 标签：jquery, asp.net, internet-explorer, file-upload

我遇到了一个奇怪的情况，只有一个按钮和 IE 中的文件上传控件。我确实找到了解决此问题的临时方法，但是我想找出所谓的问题的实际原因以及是否有更好的解决方法然后我做了什么。

关于应用程序有几点需要注意。1\. 我正在使用母版页 2\. 我在母版页上有一个更新面板 3\. 有问题的控件在 clientPage 4\. 我隐藏了 fileupload 控件，而是在 modalpopup 中向用户显示“自定义”文件上传框。Fileupload 控件不在modalpopup 5.以下适用于除IE之外的所有浏览器

请注意，这与文件上传不与更新面板一起使用无关，我已经将用于上传文件的按钮作为触发器添加到更新面板。

**代码是如何工作的：** 用户单击图像会导致隐藏文件上传触发并打开浏览文件对话框。一旦用户选择了文件，就会出现一个带有文本框和两个按钮（浏览和上传）的模式弹出窗口。文本框有文件名，浏览按钮用于再次打开浏览文件对话框，上传按钮用于上传文件。

这一切都可以在除 IE 之外的所有浏览器中完美运行。在 IE 中会发生以下情况：当用户单击上传按钮时，它似乎没有发生任何事情，如果他们再次单击该按钮，则会触发按钮事件，但随后 fileupload 控件表明没有文件。

在我取消隐藏文件上传控件后，我发现发生了以下情况：在第一个按钮单击时，文件上传被清除，而不是回发。第二个按钮单击回发，但文件上传现在为空，导致我的控件没有任何文件。

为了解决这个问题，我做了以下事情。在按钮的第一次单击时，如果浏览器是 IE，我会触发客户端事件并使用 jquery 执行以下操作：从 fileupload 控件获取文件的完整文件名和路径，并将其设置为隐藏字段的值（可能由于 IE不像其他浏览器那样隐藏文件路径）。然后强制它触发另一个按钮的 click 事件，该事件转到不同的 onclick 方法来上传文件。

**代码：**

**图片**

```
<a onclick="uploadKycSubType('Identity','','0')">
<img src="../images/upload.png">
</a> 
```

**模态弹出和文件上传控件：**

```
<cc1:ModalPopupExtender ID="ModalPopupExtender4" runat="server" TargetControlID="hdnTarget4" PopupControlID="pnlUpload" BackgroundCssClass="modalBackground">
</cc1:ModalPopupExtender>

<cc1:AnimationExtender ID="AnimationExtender4" runat="server" TargetControlID="btnUploadClose">
    <Animations>
            <OnClick>
                <Sequence AnimationTarget="pnlUpload">
                    <Parallel AnimationTarget="pnlUpload" Duration=".7" Fps="20">
                        <Move Horizontal="200" Vertical="200"></Move>
                        <Scale ScaleFactor="0.05" FontUnit="px" />
                        <FadeOut />
                    </Parallel>
                    <StyleAction Attribute="display" Value="none"/>
                    <StyleAction Attribute="height" Value=""/>
                    <StyleAction Attribute="width" Value=""/>
                    <StyleAction Attribute="fontSize" Value="14px"/>
                    <EnableAction AnimationTarget="btnUploadClose" Enabled="true" />
                </Sequence>
            </OnClick>
    </Animations>
</cc1:AnimationExtender>

<asp:FileUpload ID="imageUpload" CssClass="fileInput" runat="server" onchange="$('#hiddenText').val($(this).val().split('\\').pop());uploadChange();" />

<asp:Panel ID="pnlUpload" runat="server" CssClass="Modal_Upload" >
    <table width="100%" style="border-collapse:collapse">           
        <tr>
            <td colspan="2">
                <h2><%#bindValue("UploadDocument")%></h2>
            </td>
        </tr>
        <tr >
            <td colspan="2">
               <p><%#bindValue("UploadDocumentInfo")%>.</p> 
            </td>
        </tr>
        <tr>
            <td>
                <div class="hide">
                   <input type="text" class="textbox" id="hiddenText"/>
                </div>
                <input type="text" class="textbox" id="imageText"  style="width:350px"/>    
            </td>
            <td>
                <input type="button" value="<%#bindValue("Browse")%>" onclick="browse()" class="buttonClose" />
            </td>
        </tr>
        <tr>
            <td>
                <div class="AddSpace">
                </div>
                <asp:Button runat="server" ID="btnUploadClose" CssClass="buttonClose" OnClick="btnClose_Click"/>
            </td>
            <td>
                <div class="AddSpace">
                </div>
                <asp:Button runat="server" ID="btnUpload" CssClass="buttonShort" OnClick="btnKycUpload_Click" OnClientClick="uploadIEKyc();"/>
            </td>
            <asp:Button runat="server" ID="Button1" CssClass="fileInput" OnClick="btnKycUploadIE_Click"/>
        </tr>
    </table>
</asp:Panel> 
```

**jQuery 函数**

```
function uploadKycSubType(link,bankAccount,bankNumber) {

        $("#<%= hdnEdit.ClientID %>").val(link);
        $("#<%= hdnBank.ClientID %>").val(bankAccount);
        $("#<%= hdnBankNumber.ClientID %>").val(bankNumber);

        browse();
    }

    function browse(){
        $('#<%= imageUpload.ClientID %>').click();
    }

    function uploadChange() {
        $('#imageText').val($('#hiddenText').val());

        if($("#<%=pnlUpload.ClientID %>").css("display") == "none") 
            $find("MainContent_ModalPopupExtender4").show();
    }

    function uploadIEKyc() {
        var ua = $.browser;

        if (ua.msie) {
            $('#<%= hdnFile.ClientID %>').val($('#<%= imageUpload.ClientID %>').val());
            $('#<%=Button1.ClientID %>').click();
        }
    } 
```

**落后**

添加按钮以触发

```
protected void Page_Init(object sender, EventArgs e)
    {
        PostBackTrigger trigger = new PostBackTrigger();
        trigger.ControlID = btnUpload.UniqueID;
        UpdatePanel up = (UpdatePanel)Page.Master.FindControl("Updatepanel1");
        up.Triggers.Add(trigger);
    } 
```

上传文件点击事件

```
 protected void btnKycUpload_Click(object sender, EventArgs e)
    {

        if (imageUpload.HasFile)
        {
            //do file upload
        }
        else
        {
            this.ShowInstruction(ErrorName.DocumentNotSaved, Session["username"] == null ? string.Empty : Session["username"].ToString());
            ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScrollTo", "topScreen();", true);
        }

    }

      protected void btnKycUploadIE_Click(object sender, EventArgs e)
    {
        string files = hdnFile.Value;

        if (!string.IsNullOrEmpty(files))
        {
            FileInfo fi = new FileInfo(files);

            string fileName = fi.Name;
            string fileExtension = fi.Extension;
            fileExtension = fileExtension.Substring(fileExtension.IndexOf(".") + 1);

            //do file upload

        }
        else
        {
            this.ShowInstruction(ErrorName.DocumentNotSaved, Session["username"] == null ? string.Empty : Session["username"].ToString());
            ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScrollTo", "topScreen();", true);
        }
    } 
```

如果您对此有任何其他要求，请告诉我，否则感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:12:28.900

将您的模态弹出窗口放入表单中并尝试一下。

检查[这个](https://stackoverflow.com/a/5860768/1551730)帖子

它可以帮助你

# xml - 如何存储节点集

> ID：13723048
> 
> 赞同：-1
> 
> 时间：2012-12-05T12:15:02.693
> 
> 标签：xml, xslt, xslt-1.0

我正在调用一个返回节点集的模板，我试图将它存储在一个变量中，但它只返回值而不是节点名称

```
<MaxData>
  <xsl:variable name="maxP">
    <xsl:call-template name="MaxPeaks"/>
      </xsl:variable> 
</MaxData>

  <xsl:template name="MaxPeaks">
        <DailyPeakDmds>
           <xsl:text>Test1</xsl:text>
        </DailyPeakDmds>
        <DailyPeakDmds>
           <xsl:text>Test2</xsl:text>
        </DailyPeakDmds>
 </xsl:template> 
```

**将节点集发送到 c# 代码文件：**

```
<xsl:value-of select="code:GetMax($maxP)"/> 
```

但在 c# 方法中，它给出结果“Test1 Test2”，但我需要：

```
<DailyPeakDmds>
   Test1
</DailyPeakDmds>
<DailyPeakDmds>
   Test2
</DailyPeakDmds> 
```

当我测试变量“maxP”时，它包含“Test1 Test2”值，并且不包含节点名称，任何人都可以帮助我如何获取节点集并存储它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:03:34.263

```
<xsl:value-of select="code:GetMax($maxP)"/> 
```

会将变量中包含的*结果树片段*`maxP`传递给您的扩展函数，然后将该扩展函数的返回值转换为字符串，并将该字符串值包含在输出中。如果函数返回一个节点集或另一个结果树片段，并且您希望将这些节点按原样包含在输出中（而不仅仅是节点集的字符串值），那么您应该使用`copy-of`而不是`value-of`.

```
<xsl:copy-of select="code:GetMax($maxP)"/> 
```

如果函数期望其*参数*是节点集而不是结果树片段，那么您将需要使用扩展函数来转换`$maxP`。由于您提到 C#，我认为您使用的是 .NET XSLT 处理器，在这种情况下，您可能需要[msxsl:node-set 函数](http://msdn.microsoft.com/en-us/library/ms256197.aspx)

```
<xsl:copy-of select="code:GetMax(msxsl:node-set($maxP))" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:01:25.887

通过给出如下节点集的路径找到了我自己的答案

```
<xsl:copy-of select="code:GetMax(msxsl:node-set($maxP)/DailyPeakDmds/*)" /> 
```

# java - 自定义管理器添加到 BlackBerry 中的 VerticalFieldManager 后无法正确呈现

> ID：13723049
> 
> 赞同：1
> 
> 时间：2012-12-05T12:15:04.253
> 
> 标签：java, blackberry

我有一个可以呈现白色圆形矩形的 VerticalFieldManager。

这是代码：

```
 VerticalFieldManager _vfmBackground = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | 
                Manager.NO_VERTICAL_SCROLLBAR | Manager.USE_ALL_WIDTH){
             public void paint(Graphics graphics)
                {
                    graphics.clear();
                    graphics.setColor(Color.WHITE);
                    graphics.fillRoundRect(10, 10,460, 400, 25,25 );
                    super.paint(graphics);
                }

              protected void sublayout(int maxWidth, int maxHeight)
                {
                    int displayWidth = (Display.getWidth());
                    int displayHeight = (Display.getHeight());

                    super.sublayout( displayWidth, displayHeight);
                    setExtent( displayWidth, displayHeight);
                }

        }; 
```

然后我创建了一个名为 BaseHeaderBlueScreen 的自定义 Manager 类，它呈现一个蓝色矩形：

```
public void paint(Graphics graphics)
    {
     graphics.clear();
     graphics.setColor(610212);
     graphics.fillRect(20, 0, Display.getWidth(), Display.getHeight());
     super.paint(graphics);
    }

    protected void sublayout(int maxWidth, int maxHeight)
    {
        int displayWidth = (Display.getWidth()-40);
        int displayHeight = ((Display.getHeight()/2))-90;

        super.setExtent( displayWidth, displayHeight);
    } 
```

最后，我将该自定义管理器添加到带有白色圆角矩形的 VerticalFieldManager：

```
BaseHeaderBlueScreen _vhbs = new BaseHeaderBlueScreen(textTop, textBottom, 0);
        _vhbs.setPadding(20,30,0,0);
        _vfmBackground.add(_vhbs); 
```

这就是蓝色矩形在白色矩形内的显示方式。

![在此处输入图像描述](../Images/ece0df99bc20a4c99313b985c980f42d.png)

但这就是蓝色矩形当前的显示方式（请注意其左侧的灰色空间）：

![在此处输入图像描述](../Images/50fa1795a513b518e5c4ac0b8c42ba93.png)

我应该如何完全按照需要渲染蓝色矩形（没有左灰色边框）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:13:56.080

我认为你只是在不必要地打电话给`Graphics.clear()`. `clear()`旨在用当前设置为背景颜色的任何颜色填充图形区域。通常，您会这样使用`clear()`：

```
public void paint(Graphics g) {
    g.setBackgroundColor(Color.GRAY);
    // calling clear makes the background gray
    g.clear();

    // now draw some text
    g.setColor(Color.WHITE);
    g.drawText("hello", 20, 40);
} 
```

来自[clear() 的 API 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Graphics.html#clear%28%29)：

> 将整个图形区域清除为当前背景颜色。请注意，在这种情况下不应用全局 alpha。

但是，您在拨打`clear()`任何其他电话之前先拨打电话。

因此，只需删除对的两个调用`clear()`（尽管导致此特定问题的是调用 in `BaseHeaderBlueScreen.paint()`）。

# dll - 从两个单独的可执行文件同时使用 dll

> ID：13723050
> 
> 赞同：0
> 
> 时间：2012-12-05T12:15:07.500
> 
> 标签：dll

实际上我的问题与dll有关。

*   我有一个应用程序 GUI（名称 `xxx_app`：）
*   我有第二个应用程序 GUI（名称 `AAA_app`：）

两者都可以直接使用 dll 从 zanthric USB-2-CAN 设备发送/接收数据。

现在**AAA_app**和**xxx_app 是否**可以直接将相同的 dll 用于 zanthric 设备并同时运行？

两个 GUI 是否可以加载相同的 DLL 进行通信？

两个 GUI 中数据的 tx 和 rx 会导致一些问题吗？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:18:11.090

多个进程完全有可能使用单个 DLL - 实际上这通常是事情的工作方式。

但是，无论它是否符合您的预期，在访问硬件资源时，都取决于该特定 DLL 的功能。我希望至少会在 API 级别进行某种级别的访问控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:22:23.340

这是一个重要的问题。我相信这取决于您激活的 DLL 和 USB 驱动程序。我知道我使用的 USB DLL/驱动程序在同时访问时会出现问题，即使是通过 2 个线程从同一个应用程序访问。我必须使用信号量来同步访问。

另一方面，TCP/IP 堆栈旨在与多个进程同时工作。这是硬件和它上面的软件的问题。

与 TCP/IP 不同，没有标准的“USB 堆栈”。因此，这取决于运行您使用的 USB 的驱动程序。

# ssas - 如何从两个多维数据集在 MDX 中创建总行

> ID：13723056
> 
> 赞同：1
> 
> 时间：2012-12-05T12:15:18.357
> 
> 标签：ssas, mdx, cubes

我目前正试图从两个单独的多维数据集（我管理）中获取信息，并添加一个总行（它使用来自两者的数据）。

注释掉的行会产生“不同维度”错误。我有点理解......但不完全是。自从我上次看 MDX 以来已经有几年了。

任何指针？

```
WITH 
  MEMBER [Computer Department].[Parent Department Key].[Total]
    AS ([Computer Department].[Parent Department Key].[All], [Measures].[Fact Computer Specification Count])

  MEMBER [User Department].[Parent Department Key].[Total]
    AS 
      LOOKUPCUBE
        (
          "Directory"
          , "
            (
              [Measures].[Directory Object Count]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
             )"
        )

  MEMBER [Measures].[Department Key]
    AS [Computer Department].[Parent Department Key].CurrentMember.Properties("Key")
  MEMBER [Measures].[Department Name]
    AS [Computer Department].[Parent Department Key].CurrentMember.Properties("Caption")
  MEMBER [Measures].[Red Users]
    AS 
      LOOKUPCUBE
        (
          "Directory"
          , "
            (
              [Measures].[Directory Object Count]
              , [Directory Object].[Object Type].&[User]
              , [Directory Object].[Migration RAG].&[Red]
              , [Department].[Source].&[2]
              , [Directory Object].[Directory Name].[All]
              , [Directory Object].[Parent Object Key].[All]
              , [Location].[Location].[All]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
             )"
        )
   MEMBER [Measures].[Amber Users]
    AS 
      LOOKUPCUBE
        (
          "Directory"
          , "
            (
              [Measures].[Directory Object Count]
              , [Directory Object].[Object Type].&[User]
              , [Directory Object].[Migration RAG].&[Amber]
              , [Department].[Source].&[2]
              , [Directory Object].[Directory Name].[All]
              , [Directory Object].[Parent Object Key].[All]
              , [Location].[Location].[All]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
             )"
        )
  MEMBER [Measures].[Green Users]
    AS 
      LOOKUPCUBE
        (
          "Directory"
          , "
            (
              [Measures].[Directory Object Count]
              , [Directory Object].[Object Type].&[User]
              , [Directory Object].[Migration RAG].&[Green]
              , [Department].[Source].&[2]
              , [Directory Object].[Directory Name].[All]
              , [Directory Object].[Parent Object Key].[All]
              , [Location].[Location].[All]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
             )"
        )
  MEMBER [Measures].[Unknown Users]
    AS 
      LOOKUPCUBE
        (
          "Directory"
          , "
            (
              [Measures].[Directory Object Count]
              , [Directory Object].[Object Type].&[User]
              , [Directory Object].[Migration RAG].&[Unknown]
              , [Department].[Source].&[2]
              , [Directory Object].[Directory Name].[All]
              , [Directory Object].[Parent Object Key].[All]
              , [Location].[Location].[All]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
             )"
        )
   MEMBER [Measures].[Total RAGU Users]
    AS
      LOOKUPCUBE
        (
          "Directory"
          , "
            AGGREGATE
            (
              ([Measures].[Directory Object Count]
              , [Directory Object].[Object Type].&[User]
              , [Department].[Source].&[2]
              , [Directory Object].[Directory Name].[All]
              , [Directory Object].[Parent Object Key].[All]
              , [Location].[Location].[All]
              , [Department].[Parent Department Key].&[" + [Measures].[Department Key] + "]
              , EXCEPT([Directory Object].[Migration RAG].Children, [Directory Object].[Migration RAG].&[Unknown])
             )
           )
             "
        )    

  MEMBER [Measures].[Red Computers]
    AS ([Measures].[Fact Computer Specification Count], [Computer].[Migration RAG].&[Red])
  MEMBER [Measures].[Amber Computers]
    AS ([Measures].[Fact Computer Specification Count], [Computer].[Migration RAG].&[Amber])
  MEMBER [Measures].[Green Computers]
    AS ([Measures].[Fact Computer Specification Count], [Computer].[Migration RAG].&[Green])
  MEMBER [Measures].[Unknown Computers]
    AS ([Measures].[Fact Computer Specification Count], [Computer].[Migration RAG].&[Unknown])
  MEMBER [Measures].[Total RAGU Computers]
    AS 
      AGGREGATE
        (  
          (
            EXCEPT([Computer].[Migration RAG].Children, [Computer].[Migration RAG].&[Unknown])
          )
          , [Measures].[Fact Computer Specification Count]       
        ) 
SELECT
  {
    [Measures].[Department Name]
    , [Measures].[Red Users]
    , [Measures].[Amber Users]
    , [Measures].[Green Users]
    , [Measures].[Unknown Users]
    , [Measures].[Total RAGU Users]
    , [Measures].[Red Computers]
    , [Measures].[Amber Computers]
    , [Measures].[Green Computers]
    , [Measures].[Unknown Computers]
    , [Measures].[Total RAGU Computers]

  } ON COLUMNS,
  {
    {
      ORDER
        (             
          EXCEPT
            (
              DESCENDANTS([Computer Department].[Parent Department Key].[All], 1, SELF)
              , [Computer Department].[Parent Department Key].[All].DataMember
            )
          , [Measures].[Department Name]
          , BASC
        )
        , [Computer Department].[Parent Department Key].[Total]
       -- , [User Department].[Parent Department Key].[Total]    

    }
  } ON ROWS
FROM [Hardware Inventory]
WHERE 
  (
    [Computer Department].[Source].&[2]
    , [Computer Directory Object].[Directory Name].[All]
    , DESCENDANTS([Computer Directory Object].[Parent Object Key].[All], 0, SELF)
    , [Computer Location].[Location].[All]
  ) 
```

# r - 无法在直方图上添加概率曲线

> ID：13723060
> 
> 赞同：3
> 
> 时间：2012-12-05T12:15:32.727
> 
> 标签：r, histogram, lattice, normal-distribution

我正在尝试用一个带有格子包的图显示多个直方图。

到目前为止，这是我的代码：

```
histogram(~ X1 + X2 + X3 + X4 + X5 + X6 + X7 + X8 + X9 + X10, data=mydata, 
      type = "density",layout=c(5,2),
      panel=function(x, ...) {
        panel.histogram(x, ...)
        panel.mathdensity(dmath=dnorm, col="black",
                          args=list(mean=mean(x), sd=sd(x)), ...)
      }) 
```

问题是，它不会绘制概率曲线。它不会给我一个错误，所以我认为代码看起来不错。

我也只用一个变量尝试过，它也不起作用：

```
histogram(~ X1, data=mydata, 
  type = "density",layout=c(5,2),
  panel=function(x, ...) {
    panel.histogram(x, ...)
    panel.mathdensity(dmath=dnorm, col="black",
                      args=list(mean=mean(x), sd=sd(x)), ...)
  }) 
```

有人在我的代码中看到错误吗？或者我的数据可能有问题？

我很高兴有任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:29:48.213

可能是您的数据包含缺失值吗？

```
# Create example data (no missings)
mydata <- data.frame(X1 = rpois(1000, 12), X2 = rnorm(1000, 12, sqrt(12)))

# Create some missing (NA) entries
mydata2 <- mydata
mydata2[sample(seq_len(nrow(mydata2)), 10), 1] <- NA 
```

`mydata2`在 histogram 函数中使用上述对象不会为`X1`、 since`mean`和`sd`return生成密度图`NA`。添加`na.rm = TRUE`到这两个函数将返回`panel.mathdensity`可以使用的值：

```
histogram(~ X1 + X2, data=mydata2, 
      type = "density",layout=c(1,2),
      panel=function(x, ...) {
        panel.histogram(x, ...)
        panel.mathdensity(dmath=dnorm, col="black",
# Add na.rm = TRUE to mean() and sd()
                          args=list(mean=mean(x, na.rm = TRUE),
                                    sd=sd(x, na.rm = TRUE)), ...)
      }) 
```

![带密度的直方图](../Images/bdb544b398682b46d2714b73b15e1b67.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:16:38.133

没有您的数据，很难为您提供帮助。

这是一个简单的例子，也许可以帮助你。我尝试保留您的设置并更正一些设置。

```
library(lattice)

dat <- data.frame(X1 = rnorm(10000),Y1 =rnorm(10000))
histogram(~X1+Y1,
          data = dat,
          main=list(
            label="Main plot title",
            cex=1.5),
          xlab=list(
            label="Custom x-axis label",
            cex=0.75),
          ylab=list(
            label="Your Y label ",
            cex=1.2),
          scales=list(cex=0.5),
          layout = c(1,2),
          par.settings = list(
                              type = "density",
                              panel=function(x, ...) {
                                panel.histogram(x, ...)
                                panel.mathdensity(dmath=dnorm, col="black",
                                                  args=list(mean=mean(x), sd=sd(x)), ...)
                              })
) 
```

![在此处输入图像描述](../Images/8633fd2b28ae17f1d243b8ed791fe55a.png)

# javascript - 标记更新位置

> ID：13723063
> 
> 赞同：1
> 
> 时间：2012-12-05T12:15:58.310
> 
> 标签：javascript, python, google-maps, google-maps-api-3

我在服务器端使用[web2py](http://www.web2py.com/)来获取谷歌地图位置值：

```
 window.setInterval(function() {
                {{dic = get_position(1)}}
                var newPos = new google.maps.LatLng({{=dic['ID1']['lat']}}, {{=dic['ID1']['lon']}});
                markers[0].setPosition(newPos);
                testcounter++;}, 4000); 
```

我想更改标记 ( `markers[0]`) 的位置。收集标记的新位置，但不会更新其在地图上的位置。

数据是从`get_position()`字典的python字典中收集的，数据没问题。参数是用于测试目的的记录ID。

html生成的代码也可以：

```
 window.setInterval(function() {
                var newPos = new google.maps.LatLng(-20.21353, -70.14904);
                markers[0].setPosition(newPos);
                testcounter++;}, 4000); 
```

使用 testcounter 我只检查 4 秒循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:09:13.687

我没有 Python 的经验，所以我无法帮助后端，但看起来你最好的选择是简单地删除并重新实例化标记，而不是尝试改变它的位置。

或者仅删除并替换当前标记？IE：

```
markers[0].setMap(null);
markers[0].setMap(yourmap); 
```

虽然说实话，如果这解决了问题会很奇怪，但也许需要重置它才能获取更改后的值。

很抱歉不能提供更多帮助。

# javascript - 如何使 div 不可见仍然可以点击？

> ID：13723066
> 
> 赞同：2
> 
> 时间：2012-12-05T12:16:07.967
> 
> 标签：javascript, jquery

如何使 div 不可见仍然可以点击？display hidden 或 hide() 将使它消失，但我希望用户仍然能够单击它，因为我将它放在另一个对象的顶部

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T12:17:24.280

您可以将其设置`opacity`为`0`. 不透明度可以使用动画[`animate`](http://api.jquery.com/animate/)：

```
$('#mydiv').animate({opacity: 0}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:41:36.923

如果`<div/>`不包含任何内容，您可以：

```
#mydiv {
  background-color: transparent;
  height: 50px;
  width: 50px;
} 
```

见 CSS2.1 属性[background-color](http://www.w3.org/TR/CSS21/colors.html#propdef-background-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:21:12.813

也许您想使用`opacity:0;`or `visibility:hidden;`：

```
.element {
  opacity:0;
} 
```

或者：

```
.element {
  visibility:hidden;
} 
```

希望它有效！祝你好运！

# ios - 找不到选项“-L/Users/..../TestFlightSDK1.1”的目录

> ID：13723074
> 
> 赞同：3
> 
> 时间：2012-12-05T12:16:35.287
> 
> 标签：ios, xcode, testflight

我正在尝试归档我的 Xcode 项目，但它给出了一些警告，如下所示：

> 找不到选项'-L/Users/..../TestFlightSDK1.1 的目录

它不会在那个路径中，我从我的项目中删除了那个文件夹。我已经尝试了 Stackoverflow 中的所有答案，但它不起作用。

*   我清理了我的项目
*   我删除了我的所有值`Target -> Build Settings -> Library Search Paths and Header SearchPaths`
*   我看着我的`project.pbxproj`

但我没有发现任何迹象`TestFlightSDK1.1`

我该如何解决该警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T22:25:32.100

升级到 Testflight SDK2 后发生在我身上。在构建设置中，我查看了“库搜索路径”，仍然有对 SDK1 的引用。我为每个目标（主要和测试）做了它，并为主要目标构建并运行测试，错误消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:40:35.330

我不知道它是如何解决的。我删除了一些第三方库，并再次添加了它们。我在 中做了同样的事情`Link Binary With Libraries`，`Build Phases`删除了`libraries`第三方库使用的一些内容。它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T07:20:43.047

从**构建设置中的****库搜索路径**中删除目录

 **1.  设置项目
2.  单击构建设置。
3.  搜索库搜索路径。
4.  从列表中删除无效的目录路径。
5.  清洁项目。**

# c++ - memcpy_s C++ 指针

> ID：13723076
> 
> 赞同：1
> 
> 时间：2012-12-05T12:16:36.420
> 
> 标签：c++, vector, memcpy

我有一个问题，使用`memcpy_s`.

```
std::vector<char> MyBuf;   
MyBuf.resize(10);

char* p = &MyBuf[0]; 
```

现在我想将 using 复制到using 指针`memcpy_s`的数据中。`vector``p`

```
memcpy_s(XXXXX, 10, "BOBBO", 5); 
```

我需要输入什么而不是`XXXXX`？

当使用`&p[0]`而不是`XXXXX`我得到一个内存异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:22:32.063

1.  如果使用 C++11，不要使用`&MyBuf[0];`，`MyBuf.data()`而是使用。
2.  要使用的指针是`p`.
3.  如果您希望目的地可用作字符串，请再复制一个字符，您将缺少终止符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:25:52.790

改为使用[`std::copy`](http://msdn.microsoft.com/en-us/library/x9f6s1wf%28v=vs.100%29.aspx)。它更快更安全。

```
const char* str = "BOBBO";
std::copy(str, str + sizeof(str), MyBuf.begin()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:24:31.883

如果`MyBuf.data()`您有 C++11 标准库，则用作目标指针。使用`&MyBuf[0]`应该可以，但不必要地难看。

# ruby - 使用 net/http 和 POST 请求发送图像的 Ruby 脚本

> ID：13723080
> 
> 赞同：0
> 
> 时间：2012-12-05T12:17:02.303
> 
> 标签：ruby, post, net-http

在一个 ruby​​ 项目中，我试图将图像发送到侦听 POSTS 请求的服务器。我想避免使用额外的必要宝石。我正在使用 ruby​​ 1.9.3 并且服务器不支持 net/http Multiport 和以下代码：

```
require 'net/http'  
require "uri"

image = File.open(image.path, 'r')

url = URI("http://someserver/#{image_name}")
req = Net::HTTP.new(url.host, url.port)
Net::HTTP.new(url.host, url.port)
headers = {"X-ClientId" => client_id, "X-ClientSecret" => client_secret, "Content-Type" => "image/jpeg"}
response, body = req.post(url.path, image, headers) 
```

崩溃并显示以下错误消息：

```
http.rb:1932:in `send_request_with_body': undefined method `bytesize' for #<File:0x007ffdcd335270> (NoMethodError) 
```

虽然以下在 bash 中成功：

```
curl -i -X POST --data-binary @./output.jpg -H 'X-ClientId: ##..##' -H 'X-ClientSecret: ##..##' http:/someserver/output.jpg 
```

知道出了什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:38:26.150

浏览这个红宝石脚本 - [http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

**或者**
对于rails，你可以使用'httmultiparty'。
通过这个 - [https://github.com/jwagener/httmultiparty](https://github.com/jwagener/httmultiparty)

这是您可以执行的示例-

在您的控制器方法中，只需添加 -

```
class SomeController <  ApplicationController
   def send_file
       response = Foo.post('/', :query => {
                  :file => File.new('abc.txt') 
       })
       # here Foo is class_name which is present in model/foo.rb
       response.code # it give response code success or failure.
   end
end 
```

在模型中，只需创建任何文件，让 foo.rb 并添加以下代码 -

```
require 'httmultiparty'
class Foo
   include HTTMultiParty
   base_uri 'my/path' #url where to send file 
end 
```

只需执行 params[:file] 即可在路径上获取文件。我认为这对你有帮助。

# php - fgetcsv utf8 和撇号

> ID：13723082
> 
> 赞同：1
> 
> 时间：2012-12-05T12:17:11.320
> 
> 标签：php, utf-8, fgetcsv

我对这段代码有一个奇怪的行为

```
 foreach ($files as $key => $error) {  
            if ($error == UPLOAD_ERR_OK) {  

                $name = $_FILES["excelFiles"]["name"][$key];  

                $handle = fopen($_FILES["excelFiles"]["tmp_name"][$key], "r"); 

                while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                    print_r($data);
                    echo "\r\n";
                }
                fclose($handle);

            }} 
```

问题是带有撇号的希伯来语字符串被剪掉（只是消失在稀薄的空气中）

这是一行结果，例如：

```
Array
(
    [0] => '
    [1] => אני לא רעבה, תודה
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:21:56.550

这是因为[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)期望文件以您当前语言环境使用的任何编码进行编码：

> 笔记：
> 
> 此功能考虑了区域设置。如果 LANG 是例如 en_US.UTF-8，则此函数会错误地读取单字节编码的文件。

这也是您的情况。

要解决此问题，您必须执行以下操作之一：

*   将语言环境设置为与输入文件的编码匹配的语言环境，如果您的平台上有这样的语言环境并且编码是已知的
*   约束输入文件的有效编码，只使与语言环境兼容的编码合法
*   加载文件并通过将其编码转换为与区域设置匹配的编码对其进行预处理，然后使用[`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php)或通过指向带有转换后数据`fgetcsv`的[内存流](http://php.net/manual/en/wrappers.php.php)（请参阅`php://memory`和）读取数据`php://temp`

# android - 创建一个 access_token 以使用图形 API 获取事件列表 - android

> ID：13723083
> 
> 赞同：0
> 
> 时间：2012-12-05T12:17:15.740
> 
> 标签：android, events, facebook-graph-api

使用以下编码，我可以获得 facebook 上所有事件的 JSON 响应：

```
 eventsValue = new URL(
                    "https://graph.facebook.com/me/events?access_token=AAACEdEose0cBAIZBliHWLH30kpzoYtdnOBsvroLhZCrwAFxZBy7fSAnyFNspOU8f5WW9ShVWztHZAcLbsW0tigXpDFJXIR7ZAsfby62zMdqrzgmvfAJUa");

            Log.d("Events Value ", eventsValue.toString()); 
```

此代码工作正常，并在链接过期之前显示所有事件。这里的问题是链接一直过期，我需要硬编码。

我希望我的程序能够正常工作，而不必一直对 URL 进行硬编码。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:21:16.990

很简单：你不应该硬编码`access_token`——不好的做法。你能解释一下你对此的要求吗？

如果您作为 Facebook 应用程序进行身份验证，请在此处阅读应用程序 access_token 文档，它将更适合您的需求。

[https://developers.facebook.com/docs/howtos/login/login-as-app/](https://developers.facebook.com/docs/howtos/login/login-as-app/)

# asp.net-mvc-3 - DHTMLX 调度程序重复事件控制器代码

> ID：13723084
> 
> 赞同：0
> 
> 时间：2012-12-05T12:17:19.437
> 
> 标签：asp.net-mvc-3, dhtmlx

我需要在我的 MVC3 项目中执行 DHTMLX Recurring 事件。对于重复发生的事件，我需要设置我的控制器代码来存储和检索额外的 DB 值，如 rec_type、event_pid。

我已经完成了简单事件的基本编码。但我不知道如何为重复发生的事件写作。在演示站点本身中显示它在 PHP 上。这是教程链接（[这里](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler%3arecurring_events)）。请为我提供 C# 环境的逻辑。

**简单事件创建/更新/删除**

```
 public ActionResult Save(Event changedEvent, FormCollection actionValues)
    {
        var a = "Z";
        String action_type = actionValues["!nativeeditor_status"];
        Int64 source_id = Int64.Parse(actionValues["id"]);
        Int64 target_id = source_id;
        string category = actionValues["category"];
        string title = actionValues["title"];
        string description = actionValues["text"];
        if (actionValues["rec_type"] != "")
        {
            changedEvent.Rec_Type = actionValues["rec_type"];
        }
        else
            changedEvent.Rec_Type = "";
        if (actionValues["event_length"] != "")
        {
            changedEvent.Event_Length = Convert.ToInt32(actionValues["event_length"]);
        }
        else
            changedEvent.Event_Length = 0;
        if (actionValues["event_pid"] != "")
        {
            changedEvent.Event_Pid = Convert.ToInt16(actionValues["event_pid"]);
        }
        else
            changedEvent.Event_Pid = 0;
        String catg = category;
        changedEvent.UserId = 1;
        changedEvent.Category = catg;
        changedEvent.Description = description;
        changedEvent.Title = title;
        try
        {
            switch (action_type)
            {
                case "inserted":
                    changedEvent.UserId = 1;
                    changedEvent.Category = catg;
                    db.Events.AddObject(changedEvent);

                    break;
                case "deleted":
                    changedEvent = db.Events.SingleOrDefault(ev => ev.Id == source_id);
                    db.Events.DeleteObject(changedEvent);
                    break;
                default: // "updated"
                    db.Events.Attach(changedEvent);
                    db.ObjectStateManager.ChangeObjectState(changedEvent, System.Data.EntityState.Modified);
                    db.SaveChanges();
                    break;
            }
            db.SaveChanges();
            target_id = changedEvent.Id;
        }
        catch
        {
            action_type = "error";
        }

        return View(new CalendarActionResponseModel(action_type, source_id, target_id, catg));
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:19:25.293

数据的检索应该与简单事件相同，除了您将呈现 3 个额外字段 - event_length、event_pid、rec_type。rec_type 的默认值（这意味着事件不会重复发生）是 null 的空字符串

至于保存，请查看本文的“控制器更改”段落，它可能会有所帮助 [http://scheduler-net.com/docs/recurring_events.html#controller_changes](http://scheduler-net.com/docs/recurring_events.html#controller_changes)

虽然它针对 .Net 的 dhtmlxScheduler，它是一个单独的组件，但处理逻辑是相同的。

一般来说，重复事件的保存方式与简单事件的保存方式相同（相同的方法可以处理简单和重复事件），但您需要为以下情况添加额外的逻辑：

1.  如果插入了带有 ( **rec_type == "none"** ) 的事件 - 响应必须具有“已删除”状态；
2.  如果带有 ( **!string.IsNullOrEmpty(rec_type) && rec_type != "none"** ) 的事件被更新或删除 - 必须删除具有相关 event_pid 的所有记录；
3.  如果删除了具有非默认**event_pid**值的事件 - 需要使用**rec_type = "none"**进行更新，而不是删除。

**代码**示例

最终代码可能如下所示（我实际上并没有运行它，所以它可能包含一些错误），

与简单版本相比，所有更改都是“deleteRelated”方法（请注意，如果 deleteRelated 返回 true，则应省略 switch-case）以及在“inserted”情况下检查 Rec_Type

```
public ActionResult Save(Event changedEvent, FormCollection actionValues){
    String action_type = actionValues["!nativeeditor_status"];
    Int64 source_id = Int64.Parse(actionValues["id"]);
    Int64 target_id = source_id;
    string category = actionValues["category"];
    string title = actionValues["title"];
    string description = actionValues["text"];

    if (!string.IsNullOrEmpty(actionValues["rec_type"]))
        changedEvent.Rec_Type = actionValues["rec_type"];

    if (!string.IsNullOrEmpty(actionValues["event_length"]))
        changedEvent.Event_Length = Convert.ToInt32(actionValues["event_length"]);

    if (!string.IsNullOrEmpty(actionValues["event_pid"]))
        changedEvent.Event_Pid = Convert.ToInt16(actionValues["event_pid"]);

    String catg = category;
    changedEvent.UserId = 1;
    changedEvent.Category = catg;
    changedEvent.Description = description;
    changedEvent.Title = title;
    try
    {
        if (!deleteRelated(action_type, changedEvent, db))//some logic specific for recurring events
        {
            switch (action_type)
            {
                case "inserted":
                    changedEvent.UserId = 1;
                    changedEvent.Category = catg;
                    db.Events.AddObject(changedEvent);

                    if (changedEvent.Rec_Type == "none")
                        action_type = "deleted";//if an event with (rec_type == "none") was inserted - the response must have "deleted" status

                    break;
                case "deleted":
                    changedEvent = db.Events.SingleOrDefault(ev => ev.Id == source_id);
                    db.Events.DeleteObject(changedEvent);
                    break;
                default: // "updated"
                    db.Events.Attach(changedEvent);
                    db.ObjectStateManager.ChangeObjectState(changedEvent, System.Data.EntityState.Modified);
                    db.SaveChanges();
                    break;
            }
        }
        db.SaveChanges();
        target_id = changedEvent.Id;
    }
    catch
    {
        action_type = "error";
    }

    return View(new CalendarActionResponseModel(action_type, source_id, target_id, catg));
}
protected bool deleteRelated(string action_type, Event changedEvent, RecurringEntities db)//
{
    bool finished = false;
    if ((action_type == "deleted" || action_type == "updated")
        && !string.IsNullOrEmpty(changedEvent.Rec_Type))
    {
        //if an event with (!string.IsNullOrEmpty(rec_type) && rec_type != "none") was updated or deleted - all records with the related event_pid must be deleted;
        db.ExecuteStoreCommand("DELETE FROM Films WHERE Event_Pid = {0}", changedEvent.Id);
    }
    if (action_type == "deleted"
            && (changedEvent.Event_Pid != 0 && changedEvent.Event_Pid != default<Int16>))
    {
        //if an event with non-default event_pid value was deleted - it need to be updated with rec_type = "none" instead of deleting.
        var item = db.Events.SingleOrDefault(ev => ev.Id == changedEvent.Id);
        item.Rec_Type = "none";
        db.SaveChanges();
        finished = true; //in this case no more processing is needed
    }
    return finished;
} 
```

# c# - 具有 Enum .net 类型的 ASMX POST 对象

> ID：13723086
> 
> 赞同：0
> 
> 时间：2012-12-05T12:17:26.477
> 
> 标签：c#, asp.net, .net, enums, asmx

在服务器中，我有以下代码：

```
public enum EnumFilter
 { 
    True = 0,
    False = 1,
    All = 2
 }

public class FiltroSeguroRequest
{        
    public EnumFilter Vigentes { get; set; }     
} 
```

在客户端中，我将对象文字作为参数发送到 ajax 调用中，并带有 POST 到 ASMX Web 服务：

```
this.request = { Vigentes: 2 }; 
```

如您所见，我将整数传递给枚举，因此在服务器上将其转换为枚举...但它不起作用，而是将原因转换为布尔值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:33:37.083

枚举的 WSDL 声明应如下所示：

```
<s:simpleType name="EnumFilter">
<s:restriction base="s:string">
    <s:enumeration value="True"/>
    <s:enumeration value="False"/>
    <s:enumeration value="All"/>
</s:restriction> 
```

所以，如果你想从 javascript 调用它，你的请求应该是：

```
this.request = { Vigentes: 'All' }; 
```

# c# - 从格式化的文本框字段向 SQL 数据库添加日期时间

> ID：13723091
> 
> 赞同：3
> 
> 时间：2012-12-05T12:17:41.863
> 
> 标签：c#, sql, datetime

我正在尝试通过从具有各种掩码等的文本框中获取值来将日期时间添加到数据库表中。我收到以下错误：

```
String was not recognized as a valid DateTime. 
```

文本框代码：

```
<asp:TableRow>
        <asp:TableCell>    
                <asp:ToolkitScriptManager ID="calendarToolkit" runat="server"></asp:ToolkitScriptManager>   
                <asp:TextBox ID="startDateTextbox" runat="server"></asp:TextBox>  
                <asp:CalendarExtender Format="yyyy-dd-MM"  ID="startDateExtender" TargetControlID="startDateTextbox" runat="server" /> 
        </asp:TableCell>
    </asp:TableRow>

    <asp:TableRow>
        <asp:TableCell>    
                <asp:TextBox ID="startTimeTextbox" runat="server"></asp:TextBox>  
                <asp:MaskedEditExtender ID="m1" runat="server" Mask="99:99" MaskType="Time" AcceptAMPM="false" 
                                    MessageValidatorTip="true" TargetControlID="startTimeTextbox"
                                    ClearMaskOnLostFocus="false">
                </asp:MaskedEditExtender>

                <asp:MaskedEditValidator ID="mv1" runat="server" ControlExtender="m1" ControlToValidate="startTimeTextbox"
                                    Display="none" EmptyValueMessage="Time is required" InvalidValueMessage="Valid Start Time"
                                    IsValidEmpty="true" TooltipMessage="Input a time">
                </asp:MaskedEditValidator>
        </asp:TableCell>
    </asp:TableRow> 
```

将值添加到数据库中的 c# 代码：

```
string sqlQuery =
                "insert into dbo.Event_Info(event_name, description, location, date_end,date_start,image_url) values(@name, @desc, @location,@startDate,@endDate,@imageURL)";

SqlConnection dbConnection = new SqlConnection("server=(local)\\SGSQL;database=STEvent;Trusted_Connection=yes");
            dbConnection.Open();
            SqlCommand dbCommand = new SqlCommand(sqlQuery, dbConnection);

SqlParameter startParam = new SqlParameter("@startDate",SqlDbType.DateTime);
            startParam.Value = Convert.ToDateTime(startDateTextbox.Text +" " + startTimeTextbox.Text);

            dbCommand.Parameters.Add(startParam);
            dbCommand.ExecuteNonQuery();

            dbConnection.Close(); 
```

注意：只添加了代码的一个子集，因为显示所有其他参数似乎很长而且多余。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:21:51.230

尝试解析你的`String`to `DateTime`。

```
// String to DateTime
 String MyString;
 MyString = "1999-09-01 21:34 PM";
 //MyString = "1999-09-01 21:34 p.m.";  //Depends on your regional settings

 DateTime MyDateTime;
 MyDateTime = new DateTime();
 MyDateTime = DateTime.ParseExact(MyString, "yyyy-MM-dd HH:mm tt",
                                  null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:21:16.667

日期格式“yyyy-dd-MM”无效。您可以在 SQL Server 文档中查找“转换”函数以获取有效格式。

“yyyy-MM-dd”是一个很好的解决方案

# javascript - 如何连接到现有的 SQLite 数据库 PhoneGap 应用程序

> ID：13723095
> 
> 赞同：1
> 
> 时间：2012-12-05T12:18:05.433
> 
> 标签：javascript, android, eclipse, cordova

我在 Mozilla WebBrowser 中使用 SQLite 管理器设计了自己的 SQLite 数据库，当我将它推送到设备时，我可以在文件资源管理器中看到它。但是，我不知道如何在 javascript 代码中使用这个推送的数据库。每当我使用

```
window.openDatabase("DBName", "1.0", "New DB Demo", 200000); 
```

它创建名为 app_database:DBName 的新数据库

知道为什么会这样吗？

并在 LogCat 中给出错误为

```
sqlite returned error code = 14 msg = cannot open file at source line 25467 
```

请给我正确的解决方案

# c# - 当响应标头具有位置字段时，RestSharp 返回空值

> ID：13723099
> 
> 赞同：3
> 
> 时间：2012-12-05T12:18:18.593
> 
> 标签：c#, windows-phone-7, restsharp

我的休息要求：

```
RestSharp.RestClient uplClient = new RestSharp.RestClient();
RestSharp.RestRequest request = new RestSharp.RestRequest(IMAGE_UPLOAD_URI, Method.POST);
request.AddParameter("user", USER_HASH);
request.AddParameter("apikey", API_KEY);
request.AddFile("Filedata", file, "test.jpg","image/jpeg");

uplClient.ExecuteAsync(request, (response) =>
 {
  callback(response.Content, null);

  if (response.StatusCode == HttpStatusCode.OK)
  {
   MessageBox.Show("Upload completed succesfully...\n" + response.Content);
  }
  else
  {
   MessageBox.Show(response.StatusCode + "\n" + response.StatusDescription);
  }
 }); 
```

通过 Fiddler 检查响应时，原始数据为：

```
 HTTP/1.1 302 Moved Temporarily
    Server: nginx
    Date: Wed, 05 Dec 2012 11:35:57 GMT
    Content-Type: text/javascript;charset=utf-8
    Connection: keep-alive
    Location: file:///Applications/Install/8014A556-A76A-4294-B375-6E3668177CCA/Install/?errorNr=0&picUploadId=1007501
    Content-Length: 423

    {"ok":true,"error":false,"imageIcon":0,"uid":1287837,"tmpId":1007501,"url":"http:\/\/i1.ifrype.com\/tmp\/10\/1007501.jpg","urlIcon":"http:\/\/i1.ifrype.com\/tmp\/10\/i_1007501.jpg","urlSmall":"http:\/\/i1.ifrype.com\/tmp\/10\/sm_1007501.jpg","urlMiddle":"http:\/\/i1.ifrype.com\/tmp\/10\/nm_1007501.jpg","urlLarge":"http:\/\/i1.ifrype.com\/tmp\/10\/l_1007501.jpg","urlGM":"http:\/\/i1.ifrype.com\/tmp\/10\/ngm_1007501.jpg"} 
```

尽管 RestSharp 将所有响应值显示为空。我认为这与无法解析某些数据的默认 JSonDeserializer 有关。以下是成功解析响应的原始数据：

```
 HTTP/1.1 200 OK
    Server: nginx
    Date: Wed, 05 Dec 2012 11:28:13 GMT
    Content-Type: text/javascript;charset=utf-8
    Connection: keep-alive
    Content-Length: 1015

    {"users_login":{"login":{"apikey":"9073902hjkwehfweiufy34","img":"http:\/\/i7.ifrype.com\/profile\/287\/837\/v1341214689\/sm_12858487837.jpg"}}} 
```

这可能是因为 http 状态或位置值或其他原因吗？我对此感到非常沮丧，几乎一天都没有成功:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:15:11.030

我在这篇文章中找到了解决我的问题的方法：[https ://stackoverflow.com/a/1028141/1341545](https://stackoverflow.com/a/1028141/1341545)

最终，您必须将 Restsharp 客户端 FollowRedirects 属性设置为“false”，以便客户端忽略请求标头重定向位置。

```
RestSharp.RestClient uplClient = new RestSharp.RestClient();
uplClient.FollowRedirects = false; 
```

成功了

# php - 如何从mysql向listview jquery mobile显示数据？

> ID：13723101
> 
> 赞同：1
> 
> 时间：2012-12-05T12:18:22.970
> 
> 标签：php, javascript, jquery, mysql, mobile

我是 android 编程的初学者。我有一些让我感到困惑的问题。

我的问题是我想从 mysql 数据库表中显示 listview 上的数据列表。我一直在尝试遵循本教程[http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/)并修改为适合我的程序。但我的代码没有显示我数据库中的数据。

请帮我。谢谢

这是我的一些代码 这是我的 html 代码

```
<ol id="top10list" data-role="listview" data-theme="a"> </ol> 
```

这是我的 php 代码

```
<?php
include 'config.php';

$sql = "select m.namamovie, m.description from top10 t left outer join movie m on t.idmovie = m.idmovie";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->prepare($sql);
    $stmt->bindParam("idtop10", $_GET[idtop10]);
    $stmt->execute();
    $top10 = $stmt->fetchObject();
    $dbh = null;
    echo '{"item":'. json_encode($top10) .'}';
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}';
}
?> 
```

这是我的javascript代码

```
var serviceUrl ="..\MovieManiac1.0\assets\www\";
var top10s;

$('#top10list').bind('pageinit', function(event) {
    getTop10List();
});

function getTop10List() {
    $.getJSON(serviceURL + 'gettop10.php', function(data) {
    $('#top10list li').remove();
    top10s = data.items;
    $.each(top10s, function(index, top10) {
        $('#top10list').append('<li><a href="top10.php?id=' + top10.idmovie + '">' + '<h4>' + movie.moviename + '</h4>' + '<p>' + movie.moviename + '</p>' + '<p>' + movie.description + '</p>'+ '</a></li>'); 
    $('#top10list').listview('refresh');
    });
    }
} 
```

# c++ - 在 OpenCV 中使用掩码和 ROI 计算轮廓内点的图像像素值（例如平均值）

> ID：13723103
> 
> 赞同：2
> 
> 时间：2012-12-05T12:18:27.797
> 
> 标签：c++, image-processing, opencv

**问题**
我想计算属于轮廓的像素值的平均值，该轮廓作为 OpenCV 中的点向量给出。与轮廓相比，图像相当大，所以我想先设置一个与轮廓边界框一样大的 ROI，然后再进行遮罩。但是，这并没有真正起作用，我得到零作为平均值计算的结果。

**带有行号的代码**

```
1)  Mat crop = Mat(*img, bounding_box); //img is the original image (may be 1024*1024)  
2)  Mat mask = Mat::zeros(crop.rows, crop.cols, CV_8UC1); //the mask with the size of cropped image  
3)  vector<vector<Point> > contours;  
4)  contours.push_back(*cv_contour);   
5)  drawContours(mask, contours, -1, Scalar(255), CV_FILLED, CV_AA, noArray(), 1, bounding_box.tl());   
6)  double mean_ = sum(mean(crop, mask))[0]; // returns wrong results (0) 
```

`drawContours`顺便说一句：如果我只想绘制一个轮廓，有没有办法避免创建新数组（第 3 行和第 4 行） ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:27:28.250

我猜你的错误是在drawContours的偏移量中的代数符号。让我告诉你，我对产生以下输出的示例代码的意思是：http: [//daiw.de/share/Forum/stackoverflow_calculating-image-pixel-values-eg-the-mean-of-contour-inliers-使用掩码-r_001.png](http://daiw.de/share/Forum/stackoverflow_calculating-image-pixel-values-e-g-the-mean-of-contour-inliers-using-mask-r_001.png)

```
#include <opencv2/opencv.hpp>
#include <iostream>
#include <algorithm>
#include <iterator>

int main()
{
    // Create a small image with a circle in it.
    cv::Mat image(256, 256, CV_8UC3, cv::Scalar(0, 0, 0));
    cv::circle(image, cv::Point(80, 110), 42, cv::Scalar(255, 127, 63), -1);

    // Create random Contour
    typedef cv::vector<cv::Point> TContour;
    TContour contour;
    contour.push_back(cv::Point(20, 30));
    contour.push_back(cv::Point(40, 110));
    contour.push_back(cv::Point(140, 140));
    contour.push_back(cv::Point(160, 50));

    // The conversion to cv::vector<cv::vector<cv::Point>> is unavoidable,
    // but can easily be achieved with a temporary instance.
    cv::Mat imageWithContour(image.clone());
    typedef cv::vector<TContour> TContours;
    cv::drawContours(imageWithContour, TContours(1, contour), -1, cv::Scalar(255, 255, 255));

    // Show the contour.
    cv::imshow("image with contour", imageWithContour);

    // Get ROI image.
    cv::Rect roi(cv::boundingRect(contour));
    cv::Mat crop(image, roi);

    // Calculate ROI mean.
    cv::Mat mask(cv::Mat::zeros(crop.rows, crop.cols, CV_8UC1)); //the mask with the size of cropped image
    // The offset for drawContours has to be *minus* roi.tl();
    cv::drawContours(mask, TContours(1, contour), -1, cv::Scalar(255), CV_FILLED, CV_AA, cv::noArray(), 1, -roi.tl());
    //auto mean(cv::sum(cv::mean(crop, mask)));
    auto mean(cv::mean(crop, mask));
    auto sum(cv::sum(mean));

    // Show crop and mask.
    cv::imshow("crop", crop);
    cv::imshow("mask", mask);

    // Print mean.
    std::cout << "mean: " << mean[0] << ", " << mean[1] << ", " << mean[2] << std::endl;
    std::cout << "sum: " << sum[0] << std::endl;

    // Wait for user input.
    cv::waitKey();
} 
```

通常，在处理图像时，仅直观地查看中间步骤是一个好主意。

# jquery - 使用 jQuery 的动态搜索框单选按钮过滤值

> ID：13723105
> 
> 赞同：0
> 
> 时间：2012-12-05T12:18:30.683
> 
> 标签：jquery

我有一个带有单选按钮过滤器的搜索框，非常类似于 yahoo 搜索和过滤器元素，用户可以在搜索之前通过选择过滤器来优化搜索。

当用户单击过滤器时，我希望在搜索框中显示一条消息，例如“搜索全部”、“搜索宽带”等。

我大部分时间都在工作。如果您单击每个过滤器，则会正确显示消息。我遇到的问题是（默认）“搜索全部”消息没有出现在页面加载中。

下面是我到目前为止的 jQuery

```
$('.searchFilters label').click(function(){                                      
        var input = $('#searchId');                                      
        input.val('Search '+$(this).text()).addClass('empty');
    }); 
    $('#searchForm').submit(function(){
        var input = $('#searchId');
        if(input.hasClass('empty')){
            $('.searchFilters label').val('Enter search term');
            input.blur();
            $('#autocomplete').css({'display':'none'});         
            return false;
        } else{
            return true;
        }
    });
    $('#searchId').click(function(){
        $(this).val('').removeClass('empty');   
        $('#autocomplete').css({'display':'block'});
    }); 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:44:56.280

您可以使用 jQuery 的`$(document).ready()`函数来处理页面加载。

只需在 ready 函数中设置输入字段的值。

```
$(document).ready(function()
{
    $('.searchFilters label').click(function(){                                      
        var input = $('#searchId');                                      
        input.val('Search '+$(this).text()).addClass('empty');
    }); 
    $('#searchForm').submit(function(){
        var input = $('#searchId');
        if(input.hasClass('empty')){
            $('.searchFilters label').val('Enter search term');
            input.blur();
            $('#autocomplete').css({'display':'none'});         
            return false;
        } else{
            return true;
        }
    });
    $('#searchId').click(function(){
        $(this).val('').removeClass('empty');   
        $('#autocomplete').css({'display':'block'});
    });

    // Get the selected item and execute a fake click on it's label
    $('.searchFilters input[type=radio]:checked').parent().click();
}); 
```

我假设单选按钮位于`label`标签内。

我没有测试过这段代码，但它应该给你一个指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:56:25.913

我设法通过添加以下代码来解决这个问题，现在一切正常。

```
// injects "Search (label)" into search box on page load
// injects "Search (label)" into search box on main nav click
$('.searchFilters label').each(function(index){
    if($(this).attr('class')){                              
        $('#searchId').val('Search '+$(this).text());
    }   
}); 
```

谢谢你的帮助

完整的脚本是：

```
// Sets the text for in the searchbox for the corresponding searchbox filter
;(function(){                                  
    // injects "Search (label)" into search box on page load
    // injects "Search (label)" into search box on main nav click
    $('.searchFilters label').each(function(index){
        if($(this).attr('class')){                              
            $('#searchId').val('Search '+$(this).text());
        }   
    });

    // injects "Search (label)" into search box on filter click
    $('.searchFilters label').click(function(){                                      
        var input = $('#searchId');                                      
        input.val('Search '+$(this).text()).addClass('empty');      
    }); 

    // Stops form submitting if "Search label" is displayed in search box
    $('#searchForm').submit(function(){
        var input = $('#searchId');
        if(input.hasClass('empty')){
            $('.searchFilters label').val('Enter search term');
            input.blur();
            $('#autocomplete').css({'display':'none'});         
            return false;
        } else{
            return true;
        }
    });

    // Clears search box onclick
    $('#searchId').click(function(){
        $(this).val('').removeClass('empty');   
        $('#autocomplete').css({'display':'block'});
        $(this).focus();
    });
})(); 
```

# objective-c - 寻找合适的容器来存储数千个单独的 plist 文件

> ID：13723107
> 
> 赞同：-1
> 
> 时间：2012-12-05T12:18:44.223
> 
> 标签：objective-c, ios, database, plist

我在 iOS 上做一个文字游戏，我已经组装了一个非常大的（数千个）单独的 plist 文件，每个文件都包含一个长单词，以及可以由它的一些字母组​​成的所有较小的单词（所以只是很多很多的字符串）。

如此大量的文件使 Xcode 变得相当慢，而且大概是非常低效的。在游戏中一次只有一个文件实际加载到内存中，但我更喜欢一种更好的方式来存储所有这些单独的文件，某种容器（即使是 26 个，每个用于 AZ 会更好），我可以随意抓取其中一个（这就是我现在所做的）。

最好是转换我拥有的现有文件的东西也不是什么大不了的事情。

我可以考虑实现这一目标的任何技术想法？我还不想进入Core Data，总的来说我对编程还是很陌生，坦率地说，目前它似乎在我之上。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:43:06.347

我认为在您的情况下，JSON 可以成为保存所有数据的首选容器。与 XML 相比，它的开销最小。此外，将 JSON 转换为实体也很容易。

但最好是 SQLite，您可以将该数据存储在 SQLite 中，因为检索（特别是随机检索将只是一个查询）将变得更加容易。

# javascript - 将文本从一个字段附加到另一个字段？

> ID：13723109
> 
> 赞同：1
> 
> 时间：2012-12-05T12:18:46.113
> 
> 标签：javascript, html, jsp

要么我搜索错了，要么我根本找不到答案。

我想使用 JSP 制作一个简单的聊天应用程序。我想从一个字段（输入）中获取文本并将其附加到大文本区域（输出）中，然后清除文本字段（输入）并刷新页面。每个条目都应该在它自己的行上。

来自Java，这似乎很令人困惑，我已经研究了很长时间来尝试弄清楚。请问你能帮帮我吗？

```
<html>
    <head>
        <script>
            function send() {

            }
        </script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Simple Chat</title>
    </head>
    <body>
        <h1>Simple Chat</h1>
        <textarea rows="30" cols="100" name="output">Welcome to the Chat!</textarea>
        <form name="input">
            <input type="text" name="input">
            <input type="button" name="sendBtn" value="Send" onClick="send()">
            <input type="button" name="refreshBtn" value="Refresh" onClick="location.href='chat.jsp'">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:00:16.413

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script>
            function send() 
            {
                $("#txtArea").append("\n" + $("#txt").val());
                $("#txt").val("");
            }
        </script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Simple Chat</title>
    </head>
    <body>
        <h1>Simple Chat</h1>
        <textarea id="txtArea" rows="30" cols="100" name="output">Welcome to the Chat!</textarea>
        <div name="input">
            <input id="txt" type="text" name="input">
            <input type="button" name="sendBtn" value="Send" onClick="send()">
            <input type="button" name="refreshBtn" value="Refresh" onClick="location.href='chat.jsp'">
        </div>
    </body>
</html> 
```

# mysql - 无法连接到本地mysql服务器

> ID：13723110
> 
> 赞同：2
> 
> 时间：2012-12-05T12:18:46.197
> 
> 标签：mysql, sockets, connection, local

我在尝试连接到我的 mysql 数据库时遇到错误，我是一个 PHP/mysql 爱好者，所以我希望你们能帮助我，因为我被卡住了。

```
Warning: mysql_query() [function.mysql-query]: 
Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock'\
(2) in /public/sites/www.kernlab.nl/website/index.php on line 13

Warning: mysql_query() [function.mysql-query]: A link to the server could not be
established in /public/sites/www.kernlab.nl/website/index.php on line 13
Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

以下是我尝试连接到我的数据库的方法：

```
<?php
$db_host = "host";
$db_username = "user";
$db_password = "pass";
$db_database = "db";
$link = mysqli_connect($db_host,$db_username,$db_password) or die("Cannot connect");
  mysqli_select_db($link, $db_database) or die("Cannot select database");
?> 
```

这就是我尝试回显数据的方式：

```
<?php
$query="SELECT * FROM ditdoenweblokken ORDER BY id DESC";
$result = mysql_query($query) or die(mysql_error()) ;
while($rij = mysql_fetch_array($result)){  
?>
<li><a style="height:150px;width:150px;" class="fancybox" href="#inline<?php echo($rij['id']);?>">
    <p style="font-weight:bold;"><?php echo($rij['titel']);?></p>
    <?php echo($rij['quote']);?></a>
</li>
<?php
}
?> 
```

我觉得问题不在于脚本本身，而在于 mysql 服务器的某个地方？希望你们能帮忙，因为我被卡住了。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:24:27.370

我认为您的问题可能是您正在使用 mysqli_connect 连接到服务器，但您正在尝试使用 mysql_query 运行查询。

尝试使用 mysqli 运行查询。

这是mysqli [MYSQLi手册的手册](http://php.net/manual/en/book.mysqli.php)

附带说明一下，这在考虑如何从数据库中获取数据及其安全性时可能会有所帮助：

[Net Tuts - PHP 准备好的语句的问题](http://net.tutsplus.com/tutorials/php/the-problem-with-phps-prepared-statements/)

您可以更改连接到服务器的方式，使用 mysql，如下所示： mysql_connect(servername,username,password);

然而，这并不安全。或者，您可以更改执行查询的方式，如前所述。

首先，您需要获取连接，所以假设您将其存储在 $mysqli 然后我们可以运行查询：

```
$result = $mysqli->query("SELECT * FROM ditdoenweblokken ORDER BY id DESC); 
```

现在您可以检查查询是否返回了任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:21:50.150

您正在连接`mysqli_connect`并运行查询`mysql_query`，这就是它没有建立连接的原因。

假设您也以正确的方式包含文件；）

# javascript - 将两个 json 结果传递给函数

> ID：13723112
> 
> 赞同：3
> 
> 时间：2012-12-05T12:18:57.157
> 
> 标签：javascript, jquery

我需要进行两个不同的 ajax 调用并将两个 json 数据都传递给另一个函数。我如何使用下面的 ajax 调用格式来做到这一点？

```
$.ajax({ 
    url:'',
    type:'GET',
    dataType: 'json',
    success: callme
}); 

$.ajax({ 
    url:'',
    type:'GET',
    dataType: 'json',
    success: callme
});

function callme(JSON1,JSON2){
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:27:19.053

这是[`$.when`](http://api.jquery.com/jQuery.when/)（假设您使用的是 jQuery）的完美用例：

```
var ajax1 = $.ajax({ 
    url:'',
    type:'GET',
    dataType: 'json'
});    

var ajax2 = $.ajax({ 
    url:'',
    type:'GET',
    dataType: 'json'
});

$.when(ajax1, ajax2).done(function(json1, json2) {
    // both requests succeeded    
}).fail(function(){
    // one or both requests failed
}); 
```

只有当*两个*请求都成功完成`done`时才会调用回调；*如果任何*请求失败，将调用回调。*`fail`*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:21:57.327

```
 $.ajax({ 
    url:',
    type:'GET',
    dataType: 'json',
    success: callme1
 });    

  $.ajax({ 
    url:',
    type:'GET',
    dataType: 'json',
    success: callme2
 });

var JSON1;
var JSON2;

function callme1(JSON){
  JSON1 = JSON;
  if (JSON2)
    callme();
}

function callme2(JSON){
  JSON2 = JSON;
  if (JSON1)
    callme();
}

function callme() {
  // Do whatever you need with JSON1 and JSON2.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:22:07.200

嵌套你的 ajax 调用

```
 $.ajax({ 
    url:',
    type:'GET',
    dataType: 'json',
    success: function(JSON1) {

      $.ajax({ 
        url:',
        type:'GET',
        dataType: 'json',
        success: function(JSON2) {
          callme(JSON1,JSON2);
        }
     });

    }
 });    

function callme(JSON1,JSON2){
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:23:49.347

您需要将函数链接在一起，以便第一个 AJAX 结果调用第二个函数，第二个 AJAX 结果调用 callme 函数：

```
$.ajax({ 
    url:',
    type:'GET',
    dataType: 'json',
    success: function(data) {
        $.ajax({ 
            url:',
            type:'GET',
            dataType: 'json',
            success: function(data2) {
                callme(data, data2);
            }
         });
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:26:28.273

我的想法是创建一个 getData 函数，您可以将 url 传递给它并进行回调。在最后一个回调中`callme()`传递两个返回的数据对象。

```
function callme(JSON1, JSON2) {}

function getData(url, fn) {
    $.ajax({
        url: url,
        type: "GET",
        dataType: "json",
        success: fn
    });
}

getData("url", function(JSON1) {
    getData("url", function(JSON2) {
        callme(JSON1, JSON2);
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T12:26:46.817

您不能指望同时处理两个单独的 ajax 调用，因为 JS 是单线程的（并且 AJAX 调用是异步的，以免您指定它们不是 - 但这是要避免的），因此不能期望同时处理两个单独的 ajax 调用。另外：您不能期望 JS 考虑您为任何函数指定的参数数量，并且*知道*在两个参数都有值之前它不应该调用该函数。

最后：您能否具体说明您的问题是什么：您在询问如何调用*另一个*函数，但在这两种情况下，您似乎都在传递相同的成功回调。您能否详细说明两个调用都将返回哪些数据，以及您要发送哪些数据？

如果您希望仅在两次调用都成功后才调用函数，则可以使用闭包：

```
var callme = (function()
{
    var JSON1, JSON2;
    return function(response)//this function will receive each response separately
    {
        JSON1 = JSON1 || response;//if JSON1 isn't set, assign current response
        if (JSON1 !== response)
        {//JSON1 was already set, second response is in
            JSON2 = response;
            //code to process both responses at once goes here
            //but make them undefined before returning, if not, a second call won't work as expected
            JSON1 = undefined;
            JSON2 = undefined;
        }
    };
}();
$.ajax({url: 'some/url',
       data: yourData1,
       type: 'GET',
       success: callme});
$.ajax({url: 'second/url',
        data: yourData2,
        type: 'GET',
        success: callme}); 
```

请记住，闭包（`callme`函数）在 AJAX 调用之前至关重要：由于`callme`分配函数（作为表达式）的方式，函数声明*不会*被提升！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-05T12:23:00.753

您可以通过将 async 属性设置为 false 来将 ajax 设置为*同步*调用。以便在两个请求都成功后调用**callme函数。**

```
var JSON1, JSON2
$.ajax({ 
   url: url,
   type:'GET',
   dataType: 'json',
   async: false,
   success: function(data){JSON1=data}
 });    

$.ajax({ 
   url: url,
   type:'GET',
   dataType: 'json',
   async: false
   success: function(data){JSON2=data}
});

callme(JSON1,JSON2);

function callme(JSON1,JSON2){
} 
```

而已。**

# java - 测试字符串的 hashCode

> ID：13723113
> 
> 赞同：2
> 
> 时间：2012-12-05T12:19:02.333
> 
> 标签：java, string, hashcode

我正在编写如下所示的代码：

```
String s1=new String("hi");
System.out.println(s1.hashCode());
String s2=new String("hi");
System.out.println(s2.hashCode());
String s3=s1.intern();
String s4=s2.intern();
System.out.println(s3.hashCode());
System.out.println(s4.hashCode()); 
```

当我运行代码时，为所有变量打印相同的哈希码：

```
3329
3329
3329
3329 
```

上述代码的输出是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T12:21:26.600

是的，这是正确的输出。[of](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)基于字符串的[内容`hashCode``String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)*（*以非常具体的方式，记录在上面链接的文档中）。

由于`s1`、`s2`和`s3`都`s4`具有相同的内容（“hi”），它们都返回相同的 hashCode。

这实际上是*必需*的，因为返回的对象`a.equals(b)`需要`true`返回*与*`a.hashCode()`和相同的值`b.hashCode()`。

请注意，相反的情况（即“具有相同哈希码的对象必须相等”）是*不正确的*，甚至不能在一般情况下完成（只需考虑可能的`String`值比值多得多`int`，请参阅[鸽笼原理](https://en.wikipedia.org/wiki/Pigeonhole_principle)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:21:52.240

你所有的字符串都是`equal`有意义的，它们具有相同的哈希码。[这是Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)中定义的哈希码合同的一部分：

> 如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:22:00.720

如果我错了，有人纠正我，但我认为是的，这是正确的输出，因为你得到了字符串“hi”而不是字符串对象的 hascode。这正是 hashcode-method 应该做的。

# c# - C# 导出到 Excel 形状的性能问题

> ID：13723115
> 
> 赞同：1
> 
> 时间：2012-12-05T12:19:14.957
> 
> 标签：c#, performance, excel, export, shapes

我在程序中添加和处理形状时遇到了一些性能问题。

我必须添加 1000 多个形状，并且在 excel 中创建大约需要 18 sek - 这是不可接受的。

您将在下面找到代码，为了让生活更轻松，我在 [这里](http://www.hillebo.dk/upload/DummyPreformanceTestProject.zip)放置了一个虚拟控制台应用程序以便于测试。

请帮忙 ：）

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Excel = Microsoft.Office.Interop.Excel;
using System.Diagnostics;
using Microsoft.Office.Core;

namespace DummyPreformanceTestProject
{
class Program
{
    static void Main(string[] args)
    {
        //Create Excel application
        Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
        if (xlApp == null) { return; }

        //Handle Culture
        System.Globalization.CultureInfo CurrentCI = System.Threading.Thread.CurrentThread.CurrentCulture;
        System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-US");

        //Create Wookbook and workSheet
        Microsoft.Office.Interop.Excel.Workbooks workbooks = xlApp.Workbooks;
        Microsoft.Office.Interop.Excel.Workbook workbook = workbooks.Add(Microsoft.Office.Interop.Excel.XlWBATemplate.xlWBATWorksheet);
        Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Worksheets[1];

        //Shapes
        Excel.Shape shp;

        ///// PREFORMANCE TIMER START
        Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();
        ///// PREFORMANCE TIMER START

        //Optimise Excel app preformance by not updating the sheet.
        xlApp.ScreenUpdating = false;

        //Insert shapes in Excel and applie color + text 
        for (int i = 0; i < 1000; i++)
        {
            //Preformance Issue here!
            shp = worksheet.Shapes.AddShape(MsoAutoShapeType.msoShapeRectangle, i, i, 100, 10);
            shp.Fill.ForeColor.RGB = (65536 * i) + (256 * i) + (i);//Must be individually
            shp.Line.ForeColor.RGB = (65536 * i) + (256 * i) + (i);//Must be individually
            shp.TextFrame2.TextRange.Characters.Text = i.ToString();//Must be individually                  
        }

        //Hax to getting the collection of shapes in a ShapeRange
        var drawObjs = (Excel.DrawingObjects)worksheet.DrawingObjects();
        Excel.ShapeRange shapeRng = (Excel.ShapeRange)drawObjs.ShapeRange;

        //Setting common atributes on all shapes in the ShapeRange
        shapeRng.TextEffect.Alignment = MsoTextEffectAlignment.msoTextEffectAlignmentCentered;
        //shapeRng.TextFrame2.TextRange.Font.Bold = MsoTriState.msoTrue;
        //shapeRng.TextFrame2.TextRange.Font.Name = "Arial";
        //shapeRng.TextFrame2.TextRange.Font.Size = 10;
        //shapeRng.TextFrame2.TextRange.Font.Fill.Visible = MsoTriState.msoTrue;
        shapeRng.TextFrame2.TextRange.Font.Fill.ForeColor.RGB = (int)Excel.XlRgbColor.rgbDarkBlue;

        //Vertical allignemnt seems to need individual handeling.
        Excel.Shapes theShapes = worksheet.Shapes;
        foreach (Excel.Shape aShape in theShapes)
        {
            aShape.TextFrame.VerticalAlignment = Microsoft.Office.Interop.Excel.XlVAlign.xlVAlignCenter;
        }

        xlApp.ScreenUpdating = true;
        xlApp.Visible = true;

        ///// PREFORMANCE TIMER STOP
        stopWatch.Stop();
        TimeSpan ts = stopWatch.Elapsed;
        string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds / 10);
        Console.WriteLine("Export RunTime: " + elapsedTime);
        ///// PREFORMANCE TIMER STOP

        Console.WriteLine("The goal is export in under 3 sek");
        Console.WriteLine("Press any key to continue...");
        Console.ReadKey(true);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:23:25.987

Microsoft 不推荐 Interop，因为它会导致各种问题，例如许可、性能等，Go for OpenXML

[http://msdn.microsoft.com/en-us/library/office/bb448854(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/bb448854(v=office.14).aspx)

# mysql - 消息系统的 MySQL 表结构

> ID：13723119
> 
> 赞同：0
> 
> 时间：2012-12-05T12:19:33.263
> 
> 标签：mysql, database

我正在开发一个使用 MySQL 的即时消息系统。当前的表结构如下所示：

```
id
from_user_id (FK)
to_user_id (FK)
text
date
new 
```

不过我有一些问题。

首先，我这样做：

```
SELECT * FROM table WHERE to_user_id = (my_id) ORDER BY date desc GROUP BY from_user_id 
```

这将返回所有向我发送消息的用户。

其次，我将他们的 ID 保存到一个数组中。

第三，我这样做：

```
SELECT * FROM table WHERE from_user_id = (my_id) AND to_user_id NOT IN (array_of_ids) ORDER BY date desc GROUP BY to_user_id 
```

这将返回我已向其发送消息但未向其发送消息的所有用户。

这很好用。

用户发送的每条消息都有一个字段“新”设置为真。这是因为我想通知其他用户（消息的接收者）他收到了一条新消息。

问题是它也显示为发件人的新消息。

关于如何解决这个问题或将这两个 SQL 更改为一个大 SQL 的任何想法？

# junit - 为 junit 的 @FixMethodOrder 创建我自己的 MethodSorter

> ID：13723125
> 
> 赞同：6
> 
> 时间：2012-12-05T12:19:51.047
> 
> 标签：junit, junit4

junit 4.11 带有`@FixMethodOrder`-annotation，它可以选择 MethodSorter 实现来对 junit 测试进行排序。共有三个默认排序器`JVM`，`NAME_ASCENDING`和`DEFAULT`。

现在，我想创建自己的 MethodSorter。任何人都可以帮助我提供有关如何做到这一点的任何指示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T12:51:02.607

## 简答

这并不容易，也不鼓励这样做，因为 JUnit 不鼓励依赖测试。

## 长答案

有关更多信息，请参阅有关 SortMethodsWith 的扩展讨论，[允许用户选择测试类中方法的执行顺序](https://github.com/junit-team/junit/pull/386)。

JUnit 不鼓励人们编写依赖于其他测试的测试。[@FixMethodOrder是在对](https://github.com/junit-team/junit/pull/386)[Sort test methods for predictability](https://github.com/junit-team/junit/pull/293)的讨论之后引入的。

基本问题是 Java 7 在使用反射查找方法时，不会以一致的顺序返回它们。使用 Java 6，几乎可以保证它们会按照它们在源文件中出现的顺序返回。这已不再是这种情况。

一些测试类具有依赖测试（无论是设计还是偶然）。[可预测性的排序测试方法](https://github.com/junit-team/junit/pull/293)至少可以保证这些测试将以一致的顺序执行。但是，这个排序是基于方法的 hashCode 的，所以排序**是**确定性的，但是很难预测。因此，如果您的测试排序确实存在问题，那么如何修复排序并不容易或显而易见。您必须找到具有更高/更低 hashCode 的测试方法名称。

`@FixMethodOrder`引入的目的是让用户只需更改名称即可轻松解决他们的订购问题。但是，至少对我来说，它被视为临时修复，直到可以修复损坏的测试。

另请注意，您通常可以从[surefire](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#runOrder)中指定测试执行顺序，并且在 ant 中也有类似的选项。

欲了解更多信息，我刚刚发表[了一篇关于这个主题的博文](http://randomallsorts.blogspot.ch/2012/12/junit-411-whats-new-test-execution-order.html)。

# jqgrid - JgTreeGrid 将节点扩展到一定级别而不使用加载：true

> ID：13723132
> 
> 赞同：1
> 
> 时间：2012-12-05T12:20:25.573
> 
> 标签：jqgrid

我使用 jqgrid 作为 treegrid 来显示层次结构。
数据是从数据库中提取的，我正在根据在服务器端完成的父子关系构建层次结构数据。
一页加载我将树加载到 x 级别（这是基于 dB 中的一些用户设置/首选项）。
所以用户看到前几个级别，然后他点击一个节点来按需加载更多级别。

问题：我不能使用“loaded:true”来扩展加载树，因为这不能让我按需加载其余的关卡。我尝试使用“expandRow”“expandNode”，这会在页面加载时扩展树，但这在崩溃期间给我带来了问题。我不能折叠树节点。

那么我自动扩展树并在页面加载时显示所有节点然后允许用户按需加载剩余节点的正确方法是什么。代码片段：

```
gridComplete: function () {
            setTimeout(function () {
                debugger;
                var ids = jQuery("#jqgTreeGrid").getDataIDs();
                for (var i = 0; i < ids.length; i++) {
                    rootNode = $("#jqgTreeGrid").jqGrid('getRowData')[i];
                    rootNode._id_ = rootNode.Id;
                    //rootNode.expanded = true;
                    $("#jqgTreeGrid").jqGrid('expandRow', rootNode);
                    $("#jqgTreeGrid").jqGrid('expandNode', rootNode);
                    //$("#" + rootNode._id_ + " div.treeclick")
                   // .removeClass("ui-icon ui-icon-triangle-1-e treeclick tree-plus")
                   // .addClass("ui-icon ui-icon-triangle-1-s treeclick tree-minus");

                }
            }, 10);

        },
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:07:37.483

您可以使用`expanded`jqGrid 在您的数据中查找的字段。假设您使用的是[Adjacency Model （尽管](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadjacency_model)[Nested Set Model](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anested_set_model)的总体思路是相同的）jqGrid 正在扩展其阅读器以查找更多字段：

```
treeReader = {
   level_field: "level",
   parent_id_field: "parent",
   leaf_field: "isLeaf",
   expanded_field: "expanded"
} 
```

您很可能已经在使用`level`,`parent`和`isLeaf`字段。该`expanded`字段是可选的，但如果它存在并且其值为`true`jqGrid 将在加载时自动扩展节点（并在需要时请求数据）。

# php - PHP/file_get_image/finfo：远程检查文件有效性和类型

> ID：13723140
> 
> 赞同：0
> 
> 时间：2012-12-05T12:20:59.937
> 
> 标签：php, upload, file-get-contents

我试图在将文件放在我的服务器上之前检查文件的大小和有效性。理想情况下，我想在上传之前远程执行此操作，但作为后备可能会在上传到我的服务器后执行。

我遇到了以下建议的使用 file_get_info 执行此操作的技术。该参考没有指定它是使用 url 还是仅使用本地文件路径，所以我都尝试了，但都没有。这是代码：

在哪里

```
$file = "/path/to/file";

$file_info = new finfo(FILEINFO_MIME);  
$mime_type = $file_info->buffer(file_get_contents($file));  // e.g. gives "image/jpeg"
echo $mime_type; 
```

我收到的错误是 Class 'finfo' not found

通过阅读 php.net 上的 finfo 文档，听起来可能存在一些复杂的环境设置问题……但这对我来说是陌生的领域。

任何人都可以建议修复吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T05:51:22.140

当扩展名 fileinfo.so 或 php_fileinfo.dll 在您的 php.ini 文件中被注释时，您会收到此错误（取决于您的平台版本）。去掉分号并重新启动 XAMPP 服务器以查看更改

# jquery - jQuery addClass 到每个具有 '.class' 的子元素的元素

> ID：13723143
> 
> 赞同：8
> 
> 时间：2012-12-05T12:21:15.773
> 
> 标签：jquery, each, addclass

`#somecontainer`我正在尝试向其孩子拥有的每个锚点添加一个类`.someclass`

例如。

```
<div id="container">
<a><span class="someclass"></span></a>
<a></a>
<a><span class="someclass">/span></a>
</div> 
```

在上面的代码中，我希望第一个和第三个锚有一个类 '.anotherclass' 我试过这段代码，但它似乎不起作用

```
jQuery('#container a').each(function(){
jQuery(this).has('.someclass').addClass('anotherclass');
}) 
```

> **更新**：`.has()`返回一个`boolean`而不是 jQuery 对象。这就是代码不起作用的原因

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T12:23:09.107

我怀疑您的问题源于您的 HTML 格式错误，即您需要关闭跨度。

```
<div id="container">
<a><span class="someclass"></span></a>
<a></a>
<a><span class="someclass"></span></a>
</div> 
```

此外，您的代码可以通过使用`:has`仅选择包含与所需类名匹配的元素的锚点来简化一点：

```
$('#container a:has(.someclass)').addClass('anotherclass'); 
```

即“选择作为具有ID的元素`container`的后代并且具有类的后代的所有锚点`someclass`”

正如 Jon 所指出的，另一种方法是使用基本选择器，然后使用自定义函数过滤结果集合：

```
$('#container a').filter(function(){
    return $(this).has('.someclass').length > 0
}).each(function(){
    $(this).addClass('anotherclass');
}); 
```

该函数需要为`true`您想要保留的任何元素以及您不想保留的任何元素返回`false`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T12:31:23.263

尝试：

```
$('#container a .someclass').parents('a').addClass('anotherClass'); 
```

基本上，我们一直在寻找具有类 'someclass': 的元素`$('#container a .someclass')`，然后从那里回到封闭的锚点：`.parents('a')`，这是需要添加类 'anotherclass' 的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T12:26:28.103

```
jQuery('#container a .someclass').parent().addClass('anotherclass');​ 
```

# jquery - 使用 jQuery 获取数据绑定 asp.NET 复选框列表的最后一个选定值

> ID：13723148
> 
> 赞同：2
> 
> 时间：2012-12-05T12:21:21.597
> 
> 标签：jquery, asp.net, checkboxlist, selectedvalue

我在 asp.NET 中有一个带有 DataTextField 和 DataValueField 的数据绑定复选框列表。

现在，如果我在该列表中选择一个项目，我只需要该项目的值。

我找到了很多解决方案来查找所有选定项目的值，但这不是我需要的。我需要的唯一值是我刚刚选择或取消选择的值。

有没有办法用 jQuery 代码获取这个值？例如在如下代码中的警报中。

```
$("#checkboxlist").click(function () {
            alert('value of the item that just got (de)selected');
        }); 
```

非常感谢！

更新：这是 html 部分：

```
<span id="checkboxlist">
    <input id="checkboxlist_0" type="checkbox" name="checkboxlist$checkboxlist_0" value="11" />
    <label for="checkboxlist_0">Item 1</label><br />

    <input id="checkboxlist_1" type="checkbox" name="checkboxlist$checkboxlist_1" value="12" />
    <label for="checkboxlist_1">Item 2</label><br />

    <input id="checkboxlist_2" type="checkbox" name="checkboxlist$checkboxlist_2" value="13" />
    <label for="checkboxlist_2">Item 3</label><br />

    <input id="checkboxlist_3" type="checkbox" name="checkboxlist$checkboxlist_3" value="14" />
    <label for="checkboxlist_3">Item 4</label><br />
</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:38:37.833

此代码应该可以工作（[属性以选择器结尾](http://api.jquery.com/attribute-ends-with-selector/)）：

```
$('[id$="checkboxlist"] input').click(function () {
            alert($(this).val());
}); 
```

`asp:CheckBoxList` 将呈现为某个元素（在您的情况下应该是`span`），其中包含类似 ID`ctl00_contenttop_checkboxlist`和输入的元素。上面的代码将在 ID 以 结尾的元素内找到所有输入，`checkboxlist`并在单击其中一个元素时触发。

但是属性结尾可能会很慢，所以最好做这样的事情：

```
$("#<%=checkboxlist.ClientID %> input").click(function () {
                alert($(this).val());
}); 
```

`checkboxlist.ClientID`将在客户端返回包装器元素的 ID。

**升级版：**

根据您的 HTML，看起来不需要 ClientID（因为看起来您正在使用`ClientIDMode`启用的 .net 4）。在这种情况下，您可以简单地使用：

```
$("#checkboxlist input").click(function () {
                alert($(this).val());
}); 
```

[演示](http://jsfiddle.net/eM2BX/)

# javascript - 如何从使用 javascript 的 Flash 图像滑块的 iframe 获取信息？

> ID：13723153
> 
> 赞同：0
> 
> 时间：2012-12-05T12:21:47.290
> 
> 标签：javascript, flash, iframe

我正在开发一个 Wordpress 主题。在一个页面中，我必须使用`iframe`从另一个网站获取内容。该页面是一个图像滑块，它使用闪存。我对闪光灯一无所知。它使用类似`AC_FL_RunContent`.

我需要获取图像信息以显示基于图像的一些文本。我的意思是不同图像的不同文本。有什么办法，我可以从中提取图像名称等信息`iframe`吗？

我也可以完全访问 Flash 文件。但它们在不同的域上。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:34:11.323

您无法访问指向另一个站点的 IFRAME 的内容。[SOP](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)将防止这种情况发生。这将是一个安全威胁。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:34:57.163

如果您有权访问 Flash 的源文件，则可以通过使用 LocalConnection 到模板中运行后续 JS 调用的小型、不可见的代理 Flash 文件来绕过 iFrame 的沙箱。它需要您对原始图像库进行更改并重新编译它。

该模型如下：

1.  图片库 Flash 通过 LocalConnection 将文件名作为消息发送。
2.  Proxy flash 收到消息，使用 ExternalInterface 调用页面上的 JS 函数。
3.  页面上的 JS 函数接收来自代理 flash 的函数调用并执行相关操作。

[Adobe LiveDocs 关于使用 LocalConnection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)

[Adobe LiveDocs 关于使用 ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

我承认这并不漂亮，但如果图片库是闪光灯，这是我能想到的唯一解决方案。

# java - Android：排队发帖直到有连接

> ID：13723157
> 
> 赞同：3
> 
> 时间：2012-12-05T12:21:51.190
> 
> 标签：java, android, sdk, http-post, internet-connection

嗨，这是一个非常简单的问题，但我怀疑这是一个复杂的答案：

这被称为“矿井场景”

让我解释一下：想象一个简单的场景，你必须制作一个可以 httppost 到网页的应用程序，即使在没有信号的矿井下也是如此。

即如果没有连接，我如何尝试/排队提交事件（HTTPPOST），然后定期轮询队列（测试是否存在连接）直到事件可以触发。

**PS：请注意：请这是关于“如何”而不是关于“错误”的对话，回复：同步性或重复记录或覆盖来自 2 个用户的数据等。**

伪代码：

```
try{
   MyHttpFileUploader myupload = new MyHttpFileUploader();
   myupload.Start();
}
catch (InternetDownException ex){ //<-- how do I "throw" this in the start method gracefully?
   GlobalQueue.Add(myupload); //<-- how do i set a timer properly that can action this queue (.Start() method) and post messages "when complete" to toast on the main ui thread but otherwise not block the ui whatsoever
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:27:15.540

这是一个粗略的（因为我现在主要用 c# 编写代码，它与问题无关）半伪代码，主要是 sun 文档片段（线程）

创建一个类，该类可以访问扩展 Thread 的异步 post 方法中所需的任何变量，即

```
 class WorkerThread extends Thread {
     int someDataYouNeed;
     MyHttpFileUploader maybeAClassYouNeedToCommunicateWithAtEnd;
     boolean hasNotFinishedTask = true;
     WorkerThread(int someDataYouNeed, MyHttpFileUploader callBackClass) {
         this.someDataYouNeed = someDataYouNeed;
         this.maybeAClassYouNeedToCommunicateWithAtEnd = callBackClass;
     }

     public void run() {

         while(hasNotFinishedTask){
         //do your work in here 
         //Try contact network endpoint
         try{
             //do a network call and if it doesnt except
             hasNotFinishedWork = false
             //now callback to the class firing a method maybe (I just made one up)
             maybeAClassYouNeedToCommunicateWithAtEnd.Close();
         }catch(TheException ex){ //do nothing or log }
         if(hasNotFinishedTask){
              Thread.Sleep(60000);//retry every minute
            }
         }
     }
 } 
```

//当你的异步任务失败时实例化线程......

```
 WorkerThread worker = new WorkerThread(42, this);
 worker.start(); 
```

现在正如我所说 - 我假设您的应用程序正在智能手机上运行并且可以关闭......如果是这种情况并且只要操作系统允许它，您可以将状态（当您创建 WorkerThread）保存为即xml 在文件系统和 WorkerThread 实例化上检查文件是否存在并从它关闭时离开的位置开始。

关于点 a）即使我的示例是邮件服务器，它们都是可能不可用的网络端点

更新：

现在我认为这将是直接的 java （记住我是 c#，所以不是经常在平台上），但似乎在较新版本的 java 或 android.. .

有关特定于 android 的多线程，请参阅[此博客文章](http://android-developers.blogspot.co.uk/2010/07/multithreading-for-performance.html)或 doa 谷歌搜索 Android 多线程以获取特定于平台的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:10:47.973

一种方法是使用 [IntentService](http://developer.android.com/reference/android/app/IntentService.html)和[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来触发尝试发送数据。

[这里](http://www.vogella.com/articles/AndroidIntent/article.html)有更多关于使用 Intents的信息，并且 Intent 可以由 AlarmManager 触发

这个线程上还有一些代码示例[AlarmManager not working](https://stackoverflow.com/questions/10684077/alarmmanager-not-working)

# asp.net - 将文档上传到 sharepoint 2010 中的文档库时出错

> ID：13723158
> 
> 赞同：1
> 
> 时间：2012-12-05T12:21:51.987
> 
> 标签：asp.net, sharepoint-2010

每当我激活内容管理器时，在将新文档添加到任何文档库时都会出现错误，但如果我停用它，那么我可以上传文档。

即将出现的错误是：

```
Error : Access Denied
  Current User
  You are currently signed in as : HDC-MSODC2\NA249854
  Sign in as a different user
  Go back to site 
```

我已经尝试了一切，但我似乎无法弄清楚。

# c# - 如何提取glGenList的所有vertexList和texelList

> ID：13723164
> 
> 赞同：0
> 
> 时间：2012-12-05T12:22:04.513
> 
> 标签：c#, opengl

我正在尝试 使用 c# 在两个单独的列表中获取**所有纹理坐标**和a的所有**顶点。****`glGenList`**我需要一个可以做到的功能。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:43:16.613

如果您已创建列表，则您已经拥有数据。使用那个。

# php - Magento 无法检测客户是否登录

> ID：13723166
> 
> 赞同：3
> 
> 时间：2012-12-05T12:22:07.660
> 
> 标签：php, magento, session, singleton, magento-1.7

这是我使用 ajax 函数调用调用的 php 文件。出于测试目的，我也尝试直接调用它。

```
include "/srv/www/htdocs/magento/app/Mage.php";

Mage::init();

if(Mage::getSingleton('customer/session')->isLoggedIn())
{
    echo 'Logged In';
}
else
{
    echo 'Not Logged In';
} 
```

该代码没有给出任何错误。我检查了 apache 错误日志。我使用的 magento 1.6.1 版本无法检查用户是否登录。我尝试在用户登录时以及用户未登录时执行此代码。但是此代码仅输出“Nog logged in”的else语句请帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T12:27:53.680

请检查这是否有帮助！

```
require_once 'app/Mage.php';

umask(0);

Mage::app('default');

Mage::getSingleton('core/session', array('name' => 'frontend'));

$sessionCustomer = Mage::getSingleton("customer/session");

if($sessionCustomer->isLoggedIn()) {
  echo "Logged";
} else {
   echo "Not Logged";
} 
```

有关更多详细信息，请在此处查看[Magento 客户登录](http://huztechbuzz.wordpress.com/2014/06/20/magento-detect-if-customer-is-logged-in-or-not/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-01T01:37:55.157

你可以试试这个：

```
<?php if ($this->helper('customer')->isLoggedIn()): ?> 
```

# php - PHP 警告：move_uploaded_file() 无法移动

> ID：13723174
> 
> 赞同：16
> 
> 时间：2012-12-05T12:22:30.817
> 
> 标签：php, file, file-upload, html-post

我一直在慢慢学习 PHP，并找到了其他开发人员发布的有关该主题和解决方案的一系列信息。我正在尝试让一个 android 应用程序通过 HTTP post 将文件上传到 PHP 服务器。但是，在我的服务器端尝试用 PHP 写入文件时，有些东西不起作用。

这是PHP代码：

```
// Where the file is going to be placed
$target_path = "/var/www/media2net/uploads/uploads";

/* Add the original filename to our target path.
Result is "uploads/filename.extension" */
$target_path = $target_path . basename($_FILES['uploadedfile']['name']);

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']) .
        " has been uploaded";
    chmod("uploads/" . basename($_FILES['uploadedfile']['name']), 755);
} else {
    echo "There was an error uploading the file, please try again!";
    echo "filename: " . basename( $_FILES['uploadedfile']['name']);
    echo " target_path: " .$target_path;
} 
```

我已经通过在客户端检查 Wire Shark 知道 http 帖子已正确发送，我还确保我正在写入文件的目录具有正确的权限，并且 php 安全模式设置为关闭。

apache2 error.log 文件的输出读取

```
[Wed Dec 05 09:25:36 2012] [error] [client 74.14.162.250] PHP Warning:  
move_uploaded_file(): Unable to move '/tmp/phpVLOnn3' to  
'/var/www/media2net/uploads/downloaded_file.png' 
in /var/www/media2net/upload.php on line 9 
```

对此问题的任何帮助或解决此问题的进一步方法将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T12:28:54.283

通过使用“chown”或“chmod”更改所有者来更改 /var/www/media2net/uploads/ 的上传权限

例子

```
$ sudo chown apache:apache /var/www/media2net/uploads/
$ sudo chmod 755 /var/www/media2net/uploads/ 
```

此外，如果`downloaded_file.png`该目录中已经存在并且它由另一个用户拥有，那么您还需要更改该文件的所有权。

```
$ sudo chown apache:apache /var/www/media2net/uploads/downloaded_file.png 
```

这样，它就可以被 Apache 成功覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-20T23:25:55.043

这为我解决了这个问题：

```
$ sudo chown -R www-data:www-data /var/www/html/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T12:50:55.933

这个在 Ubuntu 操作系统中运行良好。您只需要更改所有权

`sudo chown -R www-data:www-data (path to the image folder)`

# java - 从 Adob e Flex 传递 HTML5

> ID：13723179
> 
> 赞同：1
> 
> 时间：2012-12-05T12:22:44.557
> 
> 标签：java, html, apache-flex

我想问一个关于网络技术的问题。我们正在开发一个 Web 应用程序并使用 Adob​​e Flex 及其设施。如您所知，通过 Flex 项目，我们能够连接服务器并使用存储在 RAM 中的容器（可能是 Java 容器），而不是通过使用 blazeds 直接从数据库中检索信息。我们现在考虑离开 Flex 并开始 HTML5。但是，我们没有太多关于 HTML5 的信息，我的第一个问题是是否有像 BlazeDs 这样的连接器可以帮助我们在 HTML5 上与服务器上的 Java 对象进行通信，或者是否有其他方法可以做到这一点？这件事是指云计算吗？是否有任何用于 HTML5 的 MVC 框架？对于从 Adob​​e Flex 传递 HTML5，您有什么建议？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:49:47.817

在 HTML / xScript 中，您可以使用 XMLHTTPRequest 从您的服务器获取您需要的内容，或者只需使用您需要的任何参数传递一个 FORM。这里有一些例子：http: [//www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php)

使用 ajax 后端的内容并不重要——java、PHP 等。无论服务器提供什么都可以。

@RIAStar 说得对 - 两种语言都能让你到达那里。只要确定“那里”在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:58:10.077

我也遇到过类似的情况，从 Flex 切换到 HTML5。我强烈建议您将[Sencha](http://sencha.com)用于您的 HTML5 应用程序。他们有许多不同的选项来从服务器获取信息，类似于您使用 BlazeDS 的方式。如果这是您所追求的，他们还拥有出色的 HTML 移动框架。我所做的只是简单地获取我通常通过 flex 发送的 Java 对象并将它们序列化为 JSON，可以使用 Javascript 或使用 Sencha 提供的内置类和方法轻松读取。有许多 Java 库可以为您执行 Java 到 JSON 的转换。我个人使用并喜欢[gson](http://code.google.com/p/google-gson/)。

# php - 脚本循环遍历 html/php/js 文件以构建使用资源列表

> ID：13723182
> 
> 赞同：1
> 
> 时间：2012-12-05T12:22:46.090
> 
> 标签：php, code-cleanup

随着我的一些网站的发展，服务器变得杂乱无章，文件不再使用，因为版本控制、不再使用 jquery 插件等等......

我正在考虑使用带有一些正则表达式的 grep 编写脚本，但如果已经存在某些东西，它会使事情变得更容易。

有人可以指出我可以提供可以循环通过它们的html / php / js文件列表的脚本/程序的正确方向，阅读代码并告诉我什么是.php、.js、.jpg等。 ..文件包括在内？

该脚本可以查看 src=''、include()、require() 等...

我不是在找人为我做这件事；只是一个关于如何进行或是否已经存在的起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:54:07.330

对于图像、脚本等，您可以将 firebug 用于 firefox（只需单击 net 标签）

在 php 中，您可以使用“var_dump(get_included_files())”（在代码末尾）来获取该特定页面的所有包含文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:56:29.347

尽管可能仅适用于 Java，但[该线程可能会给您一些答案。](https://stackoverflow.com/questions/11123408/unix-parse-html-file-and-get-all-his-resources-list)

知道 javascript 代码可能以不那么 grep 友好的方式包含更多的 js/css 文件：

```
var extraScript = document.createElement('script');
extraScript.src = scriptUrl;
document.head.appendChild(extraScript);

//or
document.write('<script src="' + scriptUrl + '"></script>'); 
```

此外，php`include*()`也可能使用变量或表达式，因为它需要执行，所以也无法 grep。

为了解决所有问题，您应该在执行所有其他 js 或使用 firebug（Net 选项卡）或 Chrome 开发工具后使用 javascript 解析呈现的 HTML，并使用 PHP`get_included_files()`获取包含的 php 文件列表，并将查找结果写入文件或db 或其他什么...这样做可能需要一段时间。

我不确定 PHP 是否已经存在这样的解决方案（可能），但如果我找到它，我会告诉你。

# java - 使用java的以下场景的最佳解决方案？

> ID：13723185
> 
> 赞同：1
> 
> 时间：2012-12-05T12:23:00.083
> 
> 标签：java, arrays, algorithm

整数数组已经给出。偶数应该在偶数索引中，奇数应该在奇数索引中。您必须检查给定数组是否满足该条件。

我的实现在这里....

```
public void isSatisfied(int [] arr){

    for(int i=0;i<arr.length;i++){  

        int r_val=arr[i]%2;
        int r_index=i%2;

        if((r_val==1)&&(r_index==1)){

            if(i==arr.length-1){
                System.out.println("yes");
            }
            continue;
        }
        else if((r_val==0)&&(r_index==0)){
            if(i==arr.length-1){
                System.out.println("yes");
            }
            continue;
        }
        else{
            System.out.println("no");
            break;
        }
    }
} 
```

什么是最好的实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:32:02.923

*特定索引和该索引处的值的总和*必须是**even**，否则数组不满足您的条件：

```
public boolean isSatisfied(int[] arr) 
{
    for (int i = 0; i < arr.length; i++) 
    {
        if ((i + arr[i]) % 2 != 0)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:26:11.783

```
public void isSatisfied(int [] arr){

    for(int i=0;i<arr.length;i++){  

        int r_val=arr[i]%2;
        int r_index=i%2;

        if(r_val!=r_index){
            System.out.println("no");
            return;
        }
    }
    System.out.println("yes");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:30:19.997

“最佳”通常是一个意见问题。您的代码足够好，这里有一些提示：

1）不要将逻辑与演示混为一谈。在您的循环中，将状态（数组是否正确）保存到布尔变量。在循环之后，根据变量打印你想要的任何内容（这样你就不会重复几个“是”（并且后面可能会跟着一个“否”），我会觉得这很混乱。

2) 如果您使用该`if-else-if`构造，`continue`则不需要 s。使用另一种形式来提高可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:30:39.210

有一个名为`isX`return的方法更有意义`boolean`。

```
public boolean isSatisfied(int[] arr) {
    for (int i = 0; i < arr.length; i++) {
        if (i % 2 == 0 && arr[i] % 2 != 0)
            return false;
        if (i % 2 == 1 && arr[i] % 2 == 0)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:31:55.333

这只是您的代码的一个小修改版本。包 com.mtk；

公共类 ArrayTest {

```
 public static void main(String[] args) {
        int[] arr = {2,3,4,5,6};        
        isSatisfied(arr);
    }

    private static void isSatisfied(int[] arr) {
        // TODO Auto-generated method stub
        for (int i = 0; i < arr.length; i++) {
            if( i%2 == 0 && arr[i]%2 == 0) ; // do nothing
            else if (i%2 == 1 && arr[i]%2 == 1) ; // do nothing
            else {
                System.out.println("No");
                return;
            }
        }
        System.out.println("Yes");
    }
} 
```

# iphone - iPhone自定义url方案添加快捷方式到主屏幕

> ID：13723188
> 
> 赞同：1
> 
> 时间：2012-12-05T12:23:13.157
> 
> 标签：iphone, url-scheme

我发现这个网站[http://cubiq.org/add-to-home-screen](http://cubiq.org/add-to-home-screen)有 javascript 用于显示气泡以鼓励 Safari 中的用户创建网页的快捷方式，但我想知道是否有人有在创建快捷方式之前将网页 url 与本机应用程序自定义 url 方案交换的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T00:09:37.303

在某些情况下，使用一些快捷方式从具有不同参数的自定义 URL 启动应用程序会很有帮助。例如，如果您有一个应用程序是几个小应用程序的容器。所以，直接启动这样的小应用程序之一。如果没有菜单，您可以使用带有应用名称作为参数的自定义 URL。

我花了一些时间试图找到解决方案。我找到了方法：

1.  [此链接](http://www.ifans.com/forums/threads/custom-icons-on-iphone-5-no-jb.390612/)说明了如何使用准备好的特殊 html 文件制作自定义 url 快捷方式，将其从 Safari 中保存。此方法依赖于将 html 页面刷新到自定义 URL，并且需要 Internet 连接。副作用 - 当您从快捷方式启动应用程序时，您很快就会看到 Safari 在您的应用程序启动之前打开了 html 页面。

2.  [这个链接](http://www.ifans.com/forums/threads/custom-icons-without-jailbreak-or-internet.391089/)解释了如何使用 iPhone 配置实用程序来做到这一点。这种方法需要在您的设备上安装配置文件。我看到的这种方法的副作用是 - 从快捷方式启动应用程序后，您会在后台看到两个应用程序 - 您的应用程序和 Web 剪辑（快捷方式）。

# java - 为什么 Eclipse Export -> Executable Jar 不提供要包含的类的选择？

> ID：13723189
> 
> 赞同：1
> 
> 时间：2012-12-05T12:23:14.490
> 
> 标签：java, eclipse, build, jar, executable-jar

如果您使用 Eclipse，那么您可以通过右键单击 -> 导出将项目导出到 jar，然后您可以选择`Jar/Executable Jar`.

好吧，我需要创建 Executable Jar，但是我没有灵活选择要包含在 JAR 中的文件，就像我只有 Jar 选项一样。这是为什么？

[Java Eclipse：导出为 JAR 和导出为 Runnable JAR 之间的区别](https://stackoverflow.com/questions/4974693/java-eclipse-difference-between-exporting-as-a-jar-and-exporting-as-a-runnable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:09:29.707

Export as 'Executable Jar' 将采用启动配置并将启动所需的所有内容打包到 Jar 中，因此无需在此处选择要包含的文件。这是 Eclipse 的一项便捷功能，只需单击一下即可快速创建准备就绪的可执行 jar。

导出为“Jar”将使您可以选择要在 Jar 中拥有的资源。它还允许您指定一个主类，然后通过创建必要的清单文件来创建一个可执行 Jar。（只需按照'export jar'向导到最后一页，在底部您会找到一个用于选择主类的输入框。选择一个将创建一个可执行的jar）

**请记住：**可执行 Jar 只是一个带有 MANIFEST.MF 文件的普通 Jar，该文件指定执行时要调用的主类。

# iphone - jqMobi：屏幕键盘打开时调整屏幕大小

> ID：13723198
> 
> 赞同：0
> 
> 时间：2012-12-05T12:23:43.203
> 
> 标签：iphone, ios, jqmobi, on-screen-keyboard

尝试在 iPhone 4 (IOS6) 上的 Safari 浏览器中调试 jqMobi 应用程序。

当我触摸文本输入字段时，屏幕键盘会出现，并且它后面的屏幕会放大，因此文本输入字段几乎填满了屏幕。这是正常的 iPhone 行为，不是问题。

但是，当我点击“返回”或“完成”按钮时，屏幕保持放大状态，显然无法恢复正常。

[我从问题jqmobi](https://stackoverflow.com/questions/12250620/jqmobi-on-ios-ipod-when-input-field-focused-content-moves-up)的答案中了解到。[在 ios (ipod) 上，当输入字段聚焦的内容向上移动时](https://stackoverflow.com/questions/12250620/jqmobi-on-ios-ipod-when-input-field-focused-content-moves-up)，我应该能够在键盘关闭时检测到事件，但我不知道该调用什么来告诉 iPhone Safari 返回其正常的缩放到 100 ％ 状态。

更新：我找到了一种解决方法，即在 meta name=viewport 指令中添加“maximum-scale=1”，但这样做的问题是您现在无法手动调整任何通常的屏幕大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:57:52.060

代表 Ian（参见上面的评论）——是的，这在 1.2 分支中已修复——可以将屏幕压缩回其正常比例。

不过，我还有其他由升级到 1.2 引起的问题：绑定点击功能存在问题；该函数以整个窗口作为参数调用，而不是被单击（或触摸）的项目。我只需要弄清楚这个并单独修复它。

# xml - XSLT 找到最低价格

> ID：13723199
> 
> 赞同：2
> 
> 时间：2012-12-05T12:23:45.183
> 
> 标签：xml, xslt, transform, xslt-1.0, xslt-grouping

我是 XSLT 的初学者并使用将 XML 转换为 XML。

我需要得到`Prices`总和最低的标签。

**源 XML：**

```
<Result>
    <Fares>
        <Fare>
            <Prices>
                <Price type="adt" ticket="15"/>
                <Price type="chd" ticket="10"/>
                <Price type="inf" ticket="10"/>
            <Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="10"/>
                <Price type="chd" ticket="10"/>
                <Price type="inf" ticket="10"/>
            <Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="5"/>
                <Price type="chd" ticket="5"/>
                <Price type="inf" ticket="5"/>
            <Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="10"/>
                <Price type="chd" ticket="5"/>
                <Price type="inf" ticket="5"/>
            <Prices>
        </Fare>
    </Fares>
</Result> 
```

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Result">
        <xsl:element name="Lowest">
            <xsl:variable name="lowest" select="Fares/Fare/Prices[not(sum(Price/@ticket) &gt; //Fares/Fare/Prices[sum(Price/@ticket)])]"/>
            <xsl:copy-of select="$lowest"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<Lowest>
    <Prices>
        <Price type="adt" ticket="15"/>
        <Price type="chd" ticket="10"/>
        <Price type="inf" ticket="10"/>
    <Prices/>
    </Prices>
</Lowest> 
```

**预期输出：**

```
<Lowest>
    <Prices Total="15">
        <Price type="adt" ticket="5"/>
        <Price type="chd" ticket="5"/>
        <Price type="inf" ticket="5"/>
    <Prices>
</Lowest> 
```

如上所示，输出也应该具有`Prices`最低值的标签作为属性。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:40:13.237

您可以对排序顺序中的第一个进行排序：

```
<xsl:template match="Result">
  <Lowest>
    <xsl:for-each select="Fares/Fare/Prices">
      <xsl:sort select="sum(Price/@ticket)" data-type="number"/>
      <xsl:if test="position() = 1">
         <Prices Total="{sum(Price/@ticket)}">
           <xsl:copy-of select="node()"/>
         </Prices>
      </xsl:if>
    </xsl:for-each>
  </Lowest>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:49:11.697

你没有关闭你的`<Prices>`标签！

但这应该可以解决问题：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" omit-xml-declaration="yes"/>
  <xsl:template match="/">
    <Lowest>
      <xsl:for-each select="/Result/Fares/Fare/Prices">
        <xsl:sort select="sum(./Price/@ticket)" data-type="number" order="ascending"/>
        <xsl:if test="position() = 1">
          <Prices>
            <xsl:attribute name="Total">
              <xsl:value-of select="sum(./Price/@ticket)"/>
            </xsl:attribute>
            <xsl:copy-of select="./Price"/>
          </Prices>
        </xsl:if>
      </xsl:for-each>
    </Lowest>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:09:37.320

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:for-each select="/*/*/Fare">
       <xsl:sort select="sum(Prices/Price/@ticket)" data-type="number"/>

       <xsl:if test="position()=1">
         <Lowest Total="{sum(Prices/Price/@ticket)}">
           <xsl:copy-of select="Prices"/>
         </Lowest>
       </xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时（纠正了几个畸形！！！）：**

```
<Result>
    <Fares>
        <Fare>
            <Prices>
                <Price type="adt" ticket="15"/>
                <Price type="chd" ticket="10"/>
                <Price type="inf" ticket="10"/>
            </Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="10"/>
                <Price type="chd" ticket="10"/>
                <Price type="inf" ticket="10"/>
            </Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="5"/>
                <Price type="chd" ticket="5"/>
                <Price type="inf" ticket="5"/>
            </Prices>
        </Fare>
        <Fare>
            <Prices>
                <Price type="adt" ticket="10"/>
                <Price type="chd" ticket="5"/>
                <Price type="inf" ticket="5"/>
            </Prices>
        </Fare>
    </Fares>
</Result> 
```

**产生想要的正确结果**：

```
<Lowest Total="15">
   <Prices>
      <Price type="adt" ticket="5"/>
      <Price type="chd" ticket="5"/>
      <Price type="inf" ticket="5"/>
   </Prices>
</Lowest> 
```

# wolfram-mathematica - Mathematica：绘制分段函数的导数

> ID：13723201
> 
> 赞同：2
> 
> 时间：2012-12-05T12:23:53.810
> 
> 标签：wolfram-mathematica, piecewise

我正在尝试在 Mathematica 中绘制缓和函数的导数。它可以区分函数，并且可以使用 绘制函数`%`，但我希望能够通过将导数分配为函数来绘制`f[t_]`，然后`Plot[ f[t] , {t,-1,1} ]`。

我不确定如何解决出现的错误。

Mathematica 代码是：

```
Clear[moll, f]

moll[x_] := 
Piecewise[ {  {E^(-1/(1 - x^2)), -1 < x < 1} , {0,x <= -1 || x >= 1}  } ]; (* Standard     mollifier *)

f[t_] := D[ moll[t] , t]

f[t]

Plot[%, {t, -1, 1}] (* this line works *)

Plot[f[t], {t, -1, 1}] (* this line comes up with an error *) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:27:53.750

尝试使用`Plot[Evaluate[f[t]], {t, -1, 1}]`

当涉及到用户定义的函数时，Plot 有点挑剔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:45:32.210

使用给定的功能，您可以使用：

```
Plot[f[t], {t, -1, 1}, Evaluated -> True] 
```

`Evaluated -> True`是[优先](https://mathematica.stackexchange.com/a/7832/121)于`Evaluate[f[t]]`.

更好的是遵循 nikie 的建议并以`f`不同的方式定义：

```
Block[{t},
  f[t_] = D[moll[t], t]
] 
```

有关解释，请参阅[分配导数](https://mathematica.stackexchange.com/q/6664/121)中的范围界定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:41:32.973

Plot 的“挑剔”来自它的`Atttributes[Plot]`，其中包括`HoldAll`，因此朴素的`f`永远不会被评估。如ratatosk建议的力评估。

# objective-c - 声明 iVar 属性

> ID：13723202
> 
> 赞同：0
> 
> 时间：2012-12-05T12:23:56.620
> 
> 标签：objective-c, ios

我刚刚继承了一个 iOS 项目，只是询问了 ivars 和属性的分配方式。

在这个项目中，ivars 的命名与属性相似，但以下划线开头。然后，当合成属性时，它是这样完成的

```
@synthesize property = _ivar; 
```

我觉得这有点奇怪。我之前刚刚从事过一个 iOS 项目，但是当我做 ivar 和 property 时，它具有相同的名称。然后我会简单地合成属性，一切都是笨拙的。

为什么这个人做事不一样？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:29:41.303

在某个地方，`_var`当开发人员应该引用`self.property`. 现在已经确定，使用最新的工具，您可以`@synthesize`完全删除线条并`@synthesize x = _x;`自动模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:27:00.927

你不会错过任何东西，它是一种风格的选择。使用这种`_ivar`方式时，您不能轻易地与 ivar 或属性发生错误。正如[Mike Weller](https://stackoverflow.com/users/49658/mike-weller)所说，这也是 Apple 所推荐的。

如果您在使用委托时也有帮助，他们通过与您的 ivar 同名的发送。例如：

如果您声明一个属性`tableView`并对 ivar 执行相同操作，那么编译器将抱怨`tableView`在以下方法中重新声明该变量：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   // Dot some thing with the table object
} 
```

因为类作用域和方法作用域都有变量名`tableView`，你无法真正分辨出要使用哪一个。

在最新版本的 Xcode 中，您甚至不必再声明 ivar，如果您的头文件如下所示：

```
@interface MyTableViewController : UIViewController <UITableViewDelegate> 
    @property (nonatomic, weak) IBOutlet UITableView *tableView;
@end 
```

然后，您甚至不再需要该属性，这是自动为您完成的，并且还会创建`@synthesize`一个具有该名称的 ivar 。但是最好使用语法`_tableView`通过属性访问变量。`self.tableView`

对此有一个例外，如果您在哪里重新引入已经存在于超级调用中的属性，则必须调用`@synthesize`. 它将再次为您创建“_ivar”。

~~另一个例外是，如果您使用原始类型，编译器将不会`_ivar`为您创建。你不需要在你可以做的标题中创建它们， `@synthesize myInt = _myInt`并且为你创建了 ivar。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:33:08.043

这种做法迫使您使用属性调用和设置您的 iVar。如果你想使用iVar，你通过_iVar调用它，否则没有机会直接调用iVar而不使用属性错误。它会显示错误，你会被提醒哦，我需要输入自我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:26:49.233

在最新版本的 XCode 中，您不需要合成，它会为您完成。但又是一个下划线。

但是，您可以通过声明它来覆盖它，`@synthesize property=property;`甚至`@synthesize property;`您会意识到您可以提供任何其他名称`@synthesize property=myproperty;`

然而最初它只是一种风格问题，比如使用变量名和动作名称，例如 numberArray、nameTextField、cancelButton，但现在它很少使用，人们被要求分别命名数字、名称、取消。

但我建议遵循苹果指南来使用 _property。

# c# - 单击按钮控件事件中的图像未触发

> ID：13723216
> 
> 赞同：0
> 
> 时间：2012-12-05T12:24:39.200
> 
> 标签：c#, wpf, silverlight, xaml

我有以下代码，单击图像时未触发 Click 事件。当我在图像外部单击时，会触发按钮单击事件。

XAML：

```
<Grid x:Name="LayoutRoot" Background="White">
    <Button x:Name="btnMain" Background="Purple" >             
        <StackPanel x:Name="spButtonPanel" Background="Black">
            <telerik:RadImageEditor x:Name="imgButtonImage" />
            <TextBlock x:Name="tbButtonText" />
        </StackPanel>
    </Button>
</Grid> 
```

CS：

```
this.btnMain.Click += new RoutedEventHandler(btnMain_Click);
this.imgButtonImage.MouseLeftButtonDown += new MouseButtonEventHandler(imgButtonImage_Click);
this.spButtonPanel.MouseLeftButtonDown += new MouseButtonEventHandler(spButtonPanel_Click); 
```

在 x_Click 事件中只是 MessageBox.Show("Button clicked"); 其中 x 是 btn_Main 等...

当我单击图像时，imgButtonImage_Click 不会触发。我也尝试过更改 ZIndex 无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:44:11.917

为什么要`<telerik:RadImageEditor x:Name="imgButtonImage" />`在按钮内的堆栈面板内使用？在按钮中使用图像编辑器对我来说没有意义。如果要在按钮内显示带有文本的图像，可以使用类似于：

```
<Button Style="{StaticResource MyButtonStyle}">  
    <StackPanel>  
        <Image Source="{Binding ...}  Margin="10" />  
        <TextBlock Text="Localizable Text" />  
    </StackPanel>  
</Button> 
```

要使用 base64string 作为图像源，您可以执行以下操作：

```
string bgImage64 = //   image stored in string
byte[] binaryData = Convert.FromBase64String(bgImage64);

BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.StreamSource = new MemoryStream(binaryData);
bi.EndInit();

imgButtonImage.Source = bi; 
```

要封装此代码并直接在 xaml 中使用，您可以创建一个[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)并使用类似`<Image Source="{Binding ...stringDataSource..., Converter={StaticResource MyBase64ImageConverter}}"/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:47:36.973

在 JSimoes 的帮助下想通了。

```
 BitmapImage bi = new BitmapImage();
        bi.SetSource(new MemoryStream(imageBytes));
        imgButtonImage.Source = bi; 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:36:54.560

我不知道 Telerik RadImageEditor 控件，但我猜它处理鼠标冒泡事件。您应该改用隧道事件（事件名称以 开头`Preview`）`PreviewMouseLeftButtonDown`，例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:20:58.913

尝试将事件添加到 xaml

```
<Button x:Name="btnMain" Background="Purple" Click="btnMain_Click" > 
```

# c++ - 为什么我不能访问作为参数传递给函数的基类的受保护成员变量？

> ID：13723217
> 
> 赞同：7
> 
> 时间：2012-12-05T12:24:46.017
> 
> 标签：c++, inheritance

[这个](https://stackoverflow.com/a/967363/15369)答案似乎表明它应该可以工作，所以为什么我的示例会引发编译器错误：

```
class Class1
{
protected:
    long m_memberVar;
};

class SubClass1: public Class1
{
public:
    void PrintMember(Class1 memberToPrintFrom)
    {
        Console::Write("{0}", memberToPrintFrom.m_memberVar); // <-- Compiler error: error C2248: 'BaseClassMemberAccess::Class1::m_memberVar' : cannot access protected member declared in class 'BaseClassMemberAccess::Class1'
    }
}; 
```

*[编辑] - 根据 Need4Sleep 的建议将子类更改为公共继承，但没有区别。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T12:32:14.513

在此答案中，我将假设您`public`在代码中使用了继承（问题中缺少该继承）。

* * *

> `[C++11: 11.2/1]:` **`public`如果使用访问说明符将一个类声明为另一个类的基类（第 10 条）**，`public`则基类的`public`成员可以作为派生类的成员进行访问，而基类的成员可以作为**派生类****`protected`的成员进行访问`protected`**. `protected`如果使用访问说明符将一个类声明为另一个类的基类，则基类的`public`和`protected`成员可以作为`protected`派生类的成员访问。如果使用访问说明符将一个类声明为另一个类的基类，则基类`private`的公共和`protected`成员可以作为`private`派生类的成员进行访问。

这涵盖了您正在访问*同一*对象的成员的情况。

然而，`protected`成员访问有点奇怪，为了访问*另一个*`protected`对象的成员，它必须位于*相同*类型或*更派生*类型的定义中；在您的情况下，它是派生较少的类型（即基础）：

 ***> `[C++11: 11.4/1]:`当非静态数据成员或非静态成员函数是其命名类 (11.2) 的受保护成员时，将应用第 11 节中所述之外的附加访问检查 如前所述，授予对受保护成员的访问权限是因为引用发生在朋友或某个班级的成员中`C`。如果访问要形成指向成员的指针（5.3.1），则*嵌套名称说明符*应表示`C`或派生自 的类`C`。所有其他访问都涉及（可能是隐式的）对象表达式（5.2.5）。**在这种情况下，对象表达式的类应该是`C`或派生自的类`C`。**

也就是说，您必须从`Class1`成员函数中运行此代码。

Bjarne 在他的书*The C++ Programming Language (Sp. Ed.)*第 404 页提到了这一点：

> 派生类只能访问其自身类型的对象的基类的受保护成员 [...] 这可以防止当一个派生类破坏属于其他派生类的数据时可能发生的细微错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:36:37.253

派生类只能通过其自身（this）或同一类的另一个对象访问基类的受保护成员，但一般不能通过基类访问。那就是访问，目的是成员的使用被认为仅限于类的实现细节，并且由于您的类正在处理基类，因此在这种特殊情况下它不会知道成员的含义.

您可以使用一种解决方法来获取访问权限，即在基类中提供受保护的 getter 和 setter，通常是静态的，它将为您获取或设置它。

```
class Class1
{
     protected:
       long m_memberVar; // could even be private

       static long getMemberVar( Class1 const& inst )
       {
          return inst.m_memberVar;
       }

       static long setMemberVar( Class1 & inst, long val )
       {
          inst.m_memberVar = val;
       }

}; 
```

现在派生类（但不是通用类）可以使用 getter 和 setter 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T17:52:59.503

您还可以利用派生对象可以转换为基本对象类型以及对象可以访问其自身类型的任何对象的受保护成员和私有成员这一事实。如果基础对象有一个赋值运算符，可以保证所有需要的成员都被正确复制，你可以这样做：

```
class Class1
{
protected:
    long m_memberVar;
};

class SubClass1 : public Class1
{
public:
    void PrintMember(Class1 memberToPrintFrom)
    {
        SubClass1 tmpSC;
        auto tmpC1 = dynamic_cast<Class1*>(&tmpSC);
        *tmpC1 = memberToPrintFrom;

        cout << tmpSC.m_memberVar << endl;
    }
}; 
```

这效率不高，但可以让您获得基类成员，而无需向基类添加函数。这是使用对象切片将临时派生对象的基础部分替换为传递的基础对象的值。***

# c# - Windows 8 - 导航返回时缓存分页按钮的视觉状态不改变

> ID：13723219
> 
> 赞同：2
> 
> 时间：2012-12-05T12:24:54.433
> 
> 标签：c#, xaml, windows-store

我有一个小（但很烦人）的问题。您可以通过执行以下操作快速复制它：

新建项目 > Windows 应用商店 > 空白应用 (XAML)

在网格中添加一个按钮。这也适用于默认样式。（注意：TextButtonStyle 在 SimpleStyles.xaml 中定义）

```
<Button Click="Click" Style="{StaticResource TextButtonStyle}" Content="Page 2"/> 
```

将函数添加到代码隐藏文件中：

```
private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
  Frame.Navigate(typeof (Page2));            
} 
```

接下来创建另一个页面，添加按钮，然后在 Click 事件中导航回 MainPage。

接下来在两个页面上添加`NavigationCacheMode="Enabled"`. 为方便起见，将其中一个按钮设置为左对齐，另一个设置为右对齐。

运行应用程序。将鼠标移到按钮上。状态发生变化以反映这一点。单击按钮。颜色又变了。在第二页上，做同样的事情。返回第一页时，按钮仍处于“PointerOver”视觉状态，因为没有在按钮上调用 PointerExited 事件。

我怎样才能解决这个问题？VisualStateMananger.GoToState() 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:20:27.150

我们遇到了类似的问题。我们注意到当您隐藏控件时状态会“重置”。我们以肮脏的方式解决了它：

```
void GridView_ItemClick(object sender, ItemClickEventArgs e)
{
    var ctrl = this.ItemContainerGenerator.ContainerFromItem(e.ClickedItem);
    ((Control)ctrl).Visibility = Visibility.Collapsed;
    ((Control)ctrl).Visibility = Visibility.Visible;
} 
```

也许您可以尝试执行以下操作（未对此进行测试）：

```
private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
    ((Control)sender).Visibility = Visibility.Collapsed;
    ((Control)sender).Visibility = Visibility.Visible;
    Frame.Navigate(typeof (Page2));            
} 
```

# excel - VBA停止在excel中打印值

> ID：13723220
> 
> 赞同：0
> 
> 时间：2012-12-05T12:24:54.980
> 
> 标签：excel, vba

我编写了一个宏来从外部模拟工具中获取值并在 excel 中打印结果。模拟工具将每 30 秒提供一次值，并将运行数天。因此，我在 VB 中给出了 30 秒的循环延迟。我让它通宵运行。第二天早上，我可以看到在某些行之后没有更新任何结果。但是 VBA 编辑器标题显示宏正在运行，并且外部模拟工具也在运行。excel中最后更新的行并非每次都保持不变。为什么 VBA 停止在 excel 中打印结果？任何帮助都感激不尽。

示例代码：

```
For l = 3 To lastrow1_mul + 2
Module4.Wait 30
nv = send_data.Call
Sheets(SecondSheetName).Range(SecondSheetCol_9 & l) = Hex(nv)
dv = DT.Call
If dv = 44 Then
Sheets(SecondSheetName).Range(SecondSheetCol_10 & l) = "A"
ElseIf dv = 54 Then
Sheets(SecondSheetName).Range(SecondSheetCol_10 & l) = "B"
Else
Sheets(SecondSheetName).Range(SecondSheetCol_10 & l) = "C"
End If
Next l 
```

模块 4：

```
Function Wait(PauseTime As Single)
Dim StartTime As Single 
StartTime = Timer
While Timer < StartTime + PauseTime
DoEvents
Wend  
End Function 
```

Send_data 和 DT 是外部模拟工具的功能。变量 lastrow1_mul 的值在 7000 左右更新，但 excel 中的行本身停止打印 500 左右（并非始终不变）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:16:16.820

看起来不错，但看看使用如下所示的 Application.OnTime。如果模拟没有返回数据会发生什么，你是否应该以更大的间隔构建，也许是 45 秒？

```
Application.OnTime Now + TimeValue("00:00:30"), "RunProcess" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:32:39.940

我在代码中使用的“计时器”是罪魁祸首。计时器计算自午夜以来经过的秒数（以分数为单位）。所以当时间变成 00.00.00 时它不会更新。所以我写的等待函数会一直等待！这是解决方案

```
Function Wait()
Dim StartSecond As Single
Dim EndSecond
StartSecond = Now

EndSecond = DateAdd("s", 30, Now)

While Now < EndSecond
DoEvents
Wend

End Function 
```

# node.js - 如何创建数据库并通过 http 公开它以便从传感器接收数据

> ID：13723222
> 
> 赞同：0
> 
> 时间：2012-12-05T12:24:56.843
> 
> 标签：node.js, mongodb, express, mongoose, sensors

首先，对于本文中提到的所有技术，我都是新手。

我正在做一些事情，我有传感器，可以通过 HTTP 帖子发送他们的读数。传感器将通过 http 作为 XML 定期发送感测值。

[我在这里](http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/)找到了一个链接，它解释了如何创建 REST API。

现在在上面的链接中很清楚，直到作者安装了 mongoDB。但是在那之后事情变得复杂了，作者没有解释之后代码中发生了什么。

我无法弄清楚的是，

如何使用 mondgoDB 在 node.js 中创建数据库并通过 http 公开该数据库，以便传感器发送读数。

如何在我的 URI 中访问此数据库？

如何访问数据添加到数据库的日期和时间。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:53:42.167

我不是 node.js 专家，但同样的规则适用于这类东西。

您必须了解您的数据库将无法直接访问。相反，它将是来自 node.js 的访问。您可以`--rest`向 MongoDBs 启动添加一个选项，该选项将在程序中启动一个自包含的 RESTlet `mongod`，但这在这里可能不是一个好主意。

据我所见，您的 jkust 对层感到困惑，这在这种情况下很常见，所以解释一下：

*   您的传感器会将数据（我可能会将其更改为 JSON 格式，它比 XML 更具表现力且更小）发送到您运行的 node.js 服务器，即`81.187.205.13`
*   它将发布到您的休息功能正在运行以处理此数据的任何目的地，即`/someawesomecontroller/notsuchagoodfunction`
*   然后该函数（如您链接的教程所述）将获取此 POST，对其进行解析并使用 node.js 中的默认方法（通过驱动程序）插入 MongoDB。您可以在后面的部分中看到编写该教程的人这样做，即：

    ```
    exports.findById = function(req, res) {

    var id = req.params.id;
    console.log('Retrieving wine: ' + id);
    db.collection('wines', function(err, collection) {
        collection.findOne({'_id':new BSON.ObjectID(id)}, function(err, item) {
            res.send(item);
        });
    });
    }; 
    ```

所以现在你需要的只是一些关于 node.js 中的 MongoDB 驱动程序如何工作的教程，这是一个很好的起点：[你知道 nodeJS 中的 mongoDB 教程吗？](https://stackoverflow.com/questions/6166322/do-you-know-any-tutorial-for-mongodb-in-nodejs)

希望能帮助到你，

# websphere - IBM 连接和外部 Java EE 应用程序之间的 SSO

> ID：13723223
> 
> 赞同：0
> 
> 时间：2012-12-05T12:24:58.777
> 
> 标签：websphere, ltpa, ibm-connections, ibm-sbt

我发现的大多数文档（包括 IBM 连接 Wiki 页面）都没有讨论在 Java EE 应用程序和 Connections 之间实现 SSO。

有没有人做到这一点？

过去，我使用 WebSphere 门户确实设法摆脱了它`CredentialVault`，但看起来让 SSO 在标准 Java EE 应用程序上工作是一项任务。如何解决这个问题？

如果您要向连接发出多个请求，基本身份验证速度很慢，并且会使应用程序变得很吵。

任何知道关于此的博客或文档的人请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:08:21.790

从安全角度来看，OAuth 是首选方式，假设您只针对 Connections 4。虽然 OAuth 不是 SSO 解决方案，但为 Connections 返回的令牌可以在很长一段时间内有效，例如 6 个月。当令牌过期时，用户只需再次输入他们的 Connections 凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:18:30.483

是的，您可以在 WebSphere Application Server 之间使用 LTPAToken。你用的是什么应用服务器？

SBTSDK 可帮助您管理访问连接 API 的身份验证机制。

带有 SDK 的 BasicAuth 已缓存，您可能需要考虑一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T18:34:00.333

正如 Paul 已经提到的 IBM Social Business Toolkit SDK - 那里还有一个 SSO 端点连接器。也许这可以解决您的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:42:25.667

如果您可以在连接服务器上部署您的 war 或 ear，请尝试放入此 JSP：

```
<?xml version="1.0" encoding="UTF-8" ?>
<%@ page language="java" contentType="text/xml; charset=UTF-8" pageEncoding="UTF-8"%>
<%
String  userid=request.getRemoteUser();
String widgetBody="Welcome: "+userid;
%>
<iw:iwidget id="KPIWidgets" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:iw="http://www.ibm.com/xmlns/prod/iWidget" 
supportedModes="view" lang="en" iScope="KPIWidgetsScope">
<iw:content mode="view">
<![CDATA[<%=widgetBody%>]]> 
</iw:content>
</iw:iwidget> 
```

确保 JSP 是 web.xml 中的受保护资源（需要安全约束）。在这种格式中，您可以将此 JSP 注册为 widget.xml。

如果 SSO 正常工作，您应该会看到有效的欢迎消息。

# sql - 如何从所有记录中选择特定的记录集

> ID：13723226
> 
> 赞同：1
> 
> 时间：2012-12-05T12:25:05.590
> 
> 标签：sql, oracle11g

我有一个查询，它给了我所有的记录。现在我想检查所有记录中有多少记录位于这三个条件之间

1.  小于等于 250,000
2.  250,000 500,000 之间
3.  50万及以上

我总共有 6 列。通过减去`Credit Dist dt - App Received dt`我得到的列`working days1`，通过减去`LO Issued - appr_dec`我得到的`working days2`。在确定了哪些记录属于哪个条件之后，我必须计算每个条件下的所有应用程序，并将应用程序的计数除以`working day1`和`working day2`。我如何确定哪个应用程序属于哪个条件并继续进行？

查询很长，所以我尝试放置一个虚拟查询来给出一个想法。

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",
       LOSA_EXP_SUMM_Z.group_exp AS "Group Exposure Amount",
       column AS "App Received dt",
       column AS "Credit Dist dt",
       column AS "appr_dec",
       column AS "LO Issued" 
from 
    losa_app LOSA_APP
INNER JOIN
    code_branch CODE_BRANCH
ON
    LOSA_APP.attend_branch = CODE_BRANCH.branch_id
.... -- more joins
where
    LOSA_APP.app_status in ('A','R')
and
    .....  --other conditions 
```

对于条件，我必须检查`LOSA_EXP_SUMM_Z.group_exp`类似`LOSA_EXP_SUMM_Z.group_exp <= 250,000`, `LOSA_EXP_SUMM_Z.group_exp between 250,000 and 500,000`,`LOSA_EXP_SUMM_Z.group_exp >= 500,000`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:27:04.603

You probably need to partition your output by that column/condition, e.g. group 1 - Less than and equal to 250,000, group2..., group 3... Then you may order it within the group. Try using RANK and other analytic functions.

Select * From ( Select empno, deptno, sal , RANK() OVER (PARTITION BY deptno Order by sal) rnk From scott.emp ) /

# javascript - jquery：在div的任何子元素上绘制和擦除焦点和模糊的边框

> ID：13723229
> 
> 赞同：1
> 
> 时间：2012-12-05T12:25:32.347
> 
> 标签：javascript, jquery

我有一个 div，它可以有许多（不少于 5 个）子元素（主要是`div`,`table`和`img`）。`jquery.css`当用户单击该 div 的任何子元素时，我想绘制边框（例如使用方法）。它可以很容易地用类似的东西来完成

```
$div.click(function() {
    //drawing frame here
}); 
```

在外部单击时移除框架要困难得多。当然，我可以处理任何其他 div 或 body 引发的单击事件的取消选择。但是......也许有更优雅的解决方案？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:30:19.970

尝试使用`.on('focusin')`和`.on('focusout')`事件来处理它。

更多信息：[focusin](http://api.jquery.com/focusin/)、[focusout](http://api.jquery.com/focusout/)和[.on()](http://api.jquery.com/on/)；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:30:36.573

尝试[在](http://api.jquery.com/on/)周围的 div上使用函数

示例：HTML：

```
<div id="test">
    <div><p>Hallo</p></<div>
        <img src="not found" alt="not found">
    </div> 
```

JS：

```
$('#test').on('click', '*', function(){

    $(this).css('border', '1px solid red');
return false;
}); 
```

提琴手： http: [//fiddle.jshell.net/](http://fiddle.jshell.net/)

# iphone - 如何将视图添加到页面控件

> ID：13723231
> 
> 赞同：0
> 
> 时间：2012-12-05T12:25:42.380
> 
> 标签：iphone, ios, scroll, uipagecontrol

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
scrollView.backgroundColor = [UIColor redColor];
scrollView.maximumZoomScale = 1.0;
scrollView.minimumZoomScale = 1.0;
scrollView.clipsToBounds = YES;
scrollView.showsHorizontalScrollIndicator = NO;
scrollView.pagingEnabled = YES;
self.view = scrollView;

pageControl = [[UIPageControl alloc] init];
pageControl.frame = CGRectMake(50, 350, 50, 50);
pageControl.numberOfPages = 3;
pageControl.currentPage = 0;
[self.view addSubview:pageControl]; 
```

我是 iPhone 软件开发的新手。请给我一些我可以在这里使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:35:43.527

```
- (void)setupPage
    {   
        UIView *blueView = [[UIView alloc] init];
        blueView.frame = CGRectMake(0, 0, 640, 480);
        blueView.backgroundColor = [UIColor whiteColor];
        [scrollView addSubview:blueView];   
        self.pageControl.numberOfPages = 2;
        [scrollView setContentSize:CGSizeMake(640, 0)];
    }
    - (void)scrollViewDidScroll:(UIScrollView *)_scrollView
    {    
        if(pageControlIsChangingPage){
            return;
        }
        CGFloat pageWidth = _scrollView.frame.size.width;
        int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        pageControl.currentPage = page;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:28:44.823

你可以创建`UIViewControllers`像下面这样的数组....

```
NSMutableArray *viewControllers; 
```

然后只需添加 viewControllers 或带有 for 循环的视图，如下所示......

```
 NSMutableArray *controllers = [[NSMutableArray alloc] init];
    for (unsigned i = 0; i < 5; i++) {
        [controllers addObject:yourViewControlls];// use different viewControls
    }
    self.viewControllers = controllers; 
```

所以这里 5 viewConreoller 被添加到数组中并在 PageViewController 中使用它

有关更多信息，请参阅本教程和示例..

[iphone 中的页面控制示例](http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/)

# android - 如何创建具有居中文本和图像且大小设置为 match_parent 的按钮

> ID：13723236
> 
> 赞同：2
> 
> 时间：2012-12-05T12:26:17.713
> 
> 标签：android, image, button, text, center

我想要一个这样的按钮：

```
+-----------------------+
|                       |
|        +-----+        |
|        |Image|        |
|        +-----+        |
|          Text         |
|                       |
|                       |
+-----------------------+ 
```

编辑：图片说明：我希望图像和文本的组合居中（文本始终位于图像下方）

我希望 Button 拉伸到父对象（使整个区域成为按钮单击区域）并且仍然在中心对齐图像和文本。

我只用以下代码实现了顶部中心对齐，但我没有得到想要的行为......

```
<Button
    android:id="@+id/btInfo"
    android:paddingTop="20dp"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:gravity="top|center_horizontal"                   
    android:layout_weight="1"
    android:background="@drawable/border_button_main_menu"
    android:drawableTop="@drawable/bt_info"
    android:onClick="onClick"
    android:text="@string/info"
    android:textColor="@drawable/bt_white_red_text"
    android:textSize="15dp" /> 
```

更改 `android:gravity="top|center_horizontal"`为`android:gravity="center_vertical|center_horizontal"`仅导致图像居中在顶部和文本居中在底部...

* * *

## ---- EDIT2 -----

想要的行为：

1）外观描述（图像和文本是一个光学组，组在按钮的中心）

2）文本应该是按钮的一部分（我希望 onclick 行为与选择器一起使用）

* * *

## ---- EDIT3 -----

添加了我自己的解决方案......但感谢所有试图提供帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:47:11.313

使用以下代码，您的问题将得到解决。

```
<Button
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignBottom="@+id/foreground"
    android:layout_alignLeft="@+id/foreground"
    android:layout_alignRight="@+id/foreground"
    android:layout_alignTop="@+id/foreground"
    android:background="@android:drawable/dialog_frame"
    android:onClick="clickedMe" />

   <RelativeLayout
       android:id="@+id/foreground"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_alignParentTop="true" >

       <TextView
           android:id="@+id/button_text"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentBottom="true"
           android:layout_centerHorizontal="true"
           android:layout_marginBottom="112dp"
           android:text="@string/hello_world" />

       <ImageView
           android:id="@+id/imageView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_above="@+id/button_text"
           android:layout_centerHorizontal="true"
           android:paddingBottom="10dip"
           android:paddingTop="10dip"
           android:src="@drawable/ic_launcher" />

   </RelativeLayout>

</RelativeLayout> 
```

**- - - - - - - 编辑 - - - - - - - - - -**

oNclick 方法：

```
final TextView text = (TextView) findViewById(R.id.button_text);
    RelativeLayout foreground = (RelativeLayout) findViewById(R.id.foreground);
    foreground.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d(TAG, "clicked");
            Toast.makeText(getApplicationContext(), "Clicked...!!!",
                    Toast.LENGTH_LONG).show();
            text.setTextColor(Color.RED);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:33:53.767

尝试这个：

```
<LinearLayout
android:gravity="center"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<Button
android:id="@+id/btInfo"
android:layout_width="0dp"
android:layout_height="match_parent"
android:layout_weight="1"
android:background="@drawable/border_button_main_menu"
android:drawableTop="@drawable/bt_info"
android:onClick="onClick"
android:text="@string/info"
android:textColor="@drawable/bt_white_red_text"
android:textSize="15dp" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:49:43.023

您尝试实现的输出无法使用`drawableTop`.

原因？- 视图可以设置背景或可绘制，而设置可绘制**Android仅提供4个选项来设置可绘制边界的**顶部、左侧、右侧或[底部](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/graphics/drawable/Drawable.java#Drawable.setBounds%28int%2Cint%2Cint%2Cint%29)，**而中心则没有**。

现在，在您的 XML 中，您拥有视图的高度和宽度，`MATCH_PARENT`因此*每次使用 drawableTOP 或 LEFT 等绘制可绘制集时，它都会到达视图的边缘*。这正在发生在你身上。

来自评论：

1.  Android OS 归根结底是一个软件。软件总是在它的范围内开发。您要问的事情超出了范围，因此使用任何默认表单小部件的 android 直接不支持它..

2.  我演示了 android 是如何编写 Drawable 类以及如何使用它的，所以请尝试理解答案，而不仅仅是解决您的问题。顺便说一下，点击整个区域，您可以点击该 LinearLayout而不是按钮。

解决方案将是：

```
<LinearLayout height = MATCH_PARENT and width = 0dp>

    <Button height and width = WRAP_CONTENT with drawableTop=image and gravity = center>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:40:32.557

我认为实现这种 UI 的最佳方法是使用 ImageButton 而不是 Button。但是你仍然可以通过一些骇人听闻的方式来实现这一点。其中之一在这里：

[如何在按钮内设置图像和文本中心](https://stackoverflow.com/questions/4817449/how-to-have-image-and-text-center-within-a-button)

您只需在上面链接中给出的解决方案中将内部 RelativeLayout 的方向称为“垂直”。我希望它有所帮助。

可能这也可以帮助你：

[如何将宽度设置为“填充父项”的android按钮中的图标和文本居中](https://stackoverflow.com/questions/3634191/how-to-center-icon-and-text-in-a-android-button-with-width-set-to-fill-parent)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T15:45:44.160

我的解决方案现在来自一个按钮......它满足了我的所有要求......我不知道，如果文本的测量真的是那样精确，但它看起来是这样......如果不是，每个人得到背后的想法，可以调整......

谢谢你的帮助，虽然

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.StateListDrawable;
import android.util.AttributeSet;
import android.widget.Button;

public class CenterImageTextButton extends Button {

    private Paint mPaint = new Paint();
    private String mText = null;
    private float mTextSize = 0;

    public CenterImageTextButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public CenterImageTextButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CenterImageTextButton(Context context) {
        super(context); 
    }

    @Override
    public void onDraw(Canvas canvas) {

        mText = getText().toString();
        mTextSize = getTextSize();

        mPaint.setStyle(Style.FILL); 
        mPaint.setColor(getCurrentTextColor());        

        // get image top
        Drawable drawable = getCompoundDrawables()[1];
        Drawable curDrawable = null;
        if (drawable instanceof StateListDrawable)
            curDrawable = ((StateListDrawable)drawable).getCurrent();
        else
            curDrawable = ((BitmapDrawable)drawable).getCurrent();
        Bitmap image = ((BitmapDrawable)curDrawable).getBitmap();

        // call default drawing method without image/text
        setText("");
        setCompoundDrawables(null, null, null, null);
        super.onDraw(canvas);
        setText(mText);
        setCompoundDrawables(null, drawable, null, null);

        // get measurements of button and Image
        int width = getMeasuredWidth();
        int height = getMeasuredHeight();
        int imgWidth = image.getWidth();
        int imgHeight = image.getHeight();

        // get measurements of text
        //float densityMultiplier = getContext().getResources().getDisplayMetrics().density;
        //float scaledPx = textSize * densityMultiplier;
        //paint.setTextSize(scaledPx);
        mPaint.setTextSize(mTextSize);
        float textWidth = mPaint.measureText(mText);

        // draw Image and text
        float groupHeight = imgHeight + mTextSize;
        canvas.drawBitmap(image, (width - imgWidth) / 2, (height - groupHeight) / 2, null);
        canvas.drawText(mText, (width - textWidth) / 2, mTextSize + (height - groupHeight) / 2 + imgHeight, mPaint);    
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T12:32:59.787

调用`setBackgroundDrawable()`您将添加到按钮的文本将出现在可绘制对象下方！

# c# - 如何从另一个项目加载用户控件？

> ID：13723237
> 
> 赞同：1
> 
> 时间：2012-12-05T12:26:18.587
> 
> 标签：c#, asp.net, user-controls

> **可能重复：**
> [在 ASP 中使用来自其他项目的用户控件](https://stackoverflow.com/questions/709617/using-user-controls-from-other-projects-in-asp)

我有以下情况：一个解决方案有两个项目，A 和 B。其中一个，A，有一个`UserControl`.

现在我构建 A 并在 B 中添加对 A 的引用。如何在 B 中加载用户控件并访问该用户控件中的控件？

`B`每次更改用户控件之一时，我都想避免重新构建项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:26:45.953

我曾经像这样继续使用 IIS，ASP.NET 4.0 ：

1.  将我希望 A 共享的控件 myControl.ascx 放在名为*SharedControls的应用程序 A 的子文件夹中*
2.  在 IIS 中，将虚拟目录（没有应用程序，但具有执行脚本权限）添加到 B，“ASharedControls”，指向 A 的*SharedControls*（引用此子目录，您将避免 B 在其层次结构中包含 A 的 web.config，这将使 B碰撞）
3.  在 B 中，添加对 A 的项目引用
4.  在 B 中，您现在可以在标记中声明和使用您的控件 `<%@ Register TagPrefix="uc1" TagName="myControl" Src="~/ASharedControls/myControl.ascx" %>`（VS 将警告为找不到路径，但它应该在 IIS 中工作）
5.  然后 myControl 也应该在 B 的页面和控件的代码隐藏中可用

根据您的页面和控件是代码文件/代码隐藏，您可能必须在 web.config 编译元素中设置 batch="false" 以避免多重编译冲突：

```
<compilation defaultLanguage="c#" debug="true" batch="false" targetFramework="4.0"> 
```

希望这会有所帮助

# windows-phone-7 - WP7.5全景页面中的AppBar

> ID：13723242
> 
> 赞同：4
> 
> 时间：2012-12-05T12:26:46.513
> 
> 标签：windows-phone-7, panorama-control, appbar

我目前正在开发一个带有全景页面的 Windows Phone 7.5 应用程序。
在全景页面，我正在实现一个 appbar 来处理应用程序中的几件事，例如在位于全景页面项目之一的 Bing 地图中显示手机位置。

现在，我相信我有两个选择，但我不知道它们将如何工作（如果他们甚至可以工作......）：

1.  仅显示与当前页面/项目相关的应用栏图标
2.  如果您不在相应的页面/项目上，请在单击应用栏图标时重定向到该页面/项目。

这些真的有用吗？我可以为每个全景项目设置一个 ID，然后让 1 或 2 工作吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:54:49.433

两者都有可能实现。

要仅显示**与页面相关的应用栏图标，**您可以使用 Panorama.SelectionChanged 事件：

```
var currentPanormaItem = ((Panorama)sender).SelectedItem

if(currentPanormaItem.Equals(firstPageItem))
{
    // Set AppBar icons for first page
}
else if(currentPanormaItem.Equals(secondPageItem))
{
    // Set AppBar icons for secondpage
} 
```

如果您知道选择了哪个全景项目，您可以相应地设置应用栏图标。

**更改**全景图的选定项目可以这样完成：

```
panoramaControl.DefaultItem = panoramaControl.Items[indexToSet]; 
```

虽然可以更改全景图的选定索引，但我建议使用 Pivot 控件。使用 Pivot 控件可以更轻松地跟踪所选项目，并且当您以编程方式切换所选页面时可以获得漂亮的动画。

# javascript - 我的发布者不返回订阅的功能 - DIY pub/sub 实现

> ID：13723243
> 
> 赞同：0
> 
> 时间：2012-12-05T12:26:49.070
> 
> 标签：javascript, design-patterns

我正在用 javascript 实现一个简单的 pub/sub，以帮助我完全理解这种模式的工作原理：

```
//obj to hold references to all subscribers
pubSubCache = {};

//subscribe function - push the topic and function in to pubSubCache
subscribe = function (topic, fn) {
    pubSubCache[topic] = fn;
};

//publish function
publish = function (topic, obj) {
    var func;
    console.log(obj);
    console.log(pubSubCache);
    // If topic is found in the cache
    if (pubSubCache.hasOwnProperty(topic)) {
        //Loop over the properties of the pubsub obj - the properties are functions
        //for each of the funcitons subscribed to the topic - call that function and feed it the obj           
        for (func in pubSubCache[topic]) {
            //this console.log returns a long list of functions - overloadsetter,overloadgetter,extend etc
            //I expected to see the 'therapist' function here...
            console.log(func);
            //error occurs here - it should be calling the therapist function
            pubSubCache[topic][func](obj);
        }
    }
}; 

function therapist (data) {
    alert(data.response);
}

subscribe('patient/unhappy', therapist);
publish('patient/unhappy',{response:'Let me prescribe you some pills'}) 
```

​</p>

我快到了，但我的代码似乎有一个奇怪的问题。发布者函数搜索保存所有订阅者引用的对象并成功找到匹配项。然后，当我尝试执行 for in 循环以获取对订阅的函数的引用时，我得到了这个长长的函数列表，而不是我想要的函数：

重载Setter 重载Getter 扩展实现隐藏保护$family $constructor

我最初认为这些函数来自函数的原型，但事实并非如此。

有任何想法吗？希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:20:50.393

在您的订阅中，您肯定希望允许对一个主题进行多次订阅。因此，每个主题的缓存条目应该是一个数组：

```
 //subscribe function - push the topic and function in to pubSubCache
subscribe = function (topic, fn) { // if new topic init to empty array
    if (!pubSubCache.hasOwnProperty (topic)) 
      pubSubCache[topic] = [];   
    pubSubCache[topic].push (fn);
}; 
```

在发布中，您需要调用主题缓存中的每个函数：

```
//publish function
publish = function (topic, obj) {
  if (pubSubCache.hasOwnProperty (topic)) {
    for (var f = pubSubCache[topic].length; f--;) {
      pubSubCache[topic][f](obj);
    }
  }
}; 
```

见小提琴：http: [//jsfiddle.net/cRTRL/1/](http://jsfiddle.net/cRTRL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:59:04.593

啊，这似乎是一个红鲱鱼。我看到返回的函数来自使用 jsfiddle 并选择了 mootools 的测试结果。我看到的功能来自那里。

不幸的是，我的代码并没有修复......现在根本没有进入 for in 循环。

# javascript - 在 Canvas 上使用 javascript 制作 3D 声音

> ID：13723249
> 
> 赞同：2
> 
> 时间：2012-12-05T12:27:23.953
> 
> 标签：javascript, audio, html5-canvas

我想知道是否有可能用JS创建一个3D音效？

这个想法是将声音挂在可以在画布上拖动的对象上。如果您将对象拖到画布的右侧，则来自您的右侧框，反之亦然。

上下同上。当物体向上时，声音必须变得更小，而当物体向下时，声音必须更大。

有没有人知道我可以使用一个库来实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:29:18.403

查看 HTML5 Rocks 上关于位置音频的这篇文章，我相信这正是您所需要的：

[http://www.html5rocks.com/en/tutorials/webaudio/positional_audio/](http://www.html5rocks.com/en/tutorials/webaudio/positional_audio/)

有一些非常好的演示

# gcc - gcc 选项同时使用 i87、AVX 但不使用 SSE

> ID：13723250
> 
> 赞同：3
> 
> 时间：2012-12-05T12:27:24.837
> 
> 标签：gcc, sse, instruction-set, avx, fpu

当为支持`AVX`扩展的处理器编译时（比如说适用），同时使用键`-m64 -march=corei7-avx -mtune=corei7-avx`是否有意义？`-mfpmath=both -mavx`这不是导致编译器同时使用三组指令（`i87`, `SSE`, `AVX`）吗？还是仅`i87`针对标量（在某种意义上）和`AVX`仅针对向量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:37:41.843

AVX 寄存器只是 SSE 寄存器的扩展。您不能混合使用 SSE 和 AVX 指令来增加可用寄存器的数量（您仍然可以混合使用 x87 和 AVX 指令，我认为这就是`-mfpmath=both`这种情况下的作用）。

[例如，参见本页](http://web.archive.org/web/20180424124017/http://chessprogramming.wikispaces.com/AVX)上的“混合 AVX 和 SSE”讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-25T11:13:42.647

你通常不想要这个；我认为 gcc 在注册压力很大时决定使用 x87 时不够聪明以使其值得。

x87 和 SSE/AVX 指令在普通 x86 CPU（Intel 和 AMD）上竞争相同的 FP 执行单元，因此您不会从交错中获得更多吞吐量。

通常你应该只使用`-mfpmath=sse`(这意味着 AVX 与`-mavx`, 或更好一起使用时`-mfpmath=sse -march=native`。x86-64 的默认值是`sse`，所以`-mfpmath=sse`只更改`-m32`AFAIK 的任何内容。

的主要好处`-mfpmath=both`是更多的总寄存器，但管理 x87 寄存器堆栈通常需要额外的指令。在 x87 和 AVX 之间移动数据也需要存储/重新加载（存储转发往返，Haswell 上约 6 个周期延迟，[http://agner.org/optimize/](http://agner.org/optimize/)），所以只有当你有两个独立的集合时它才真正有用编译器交错的计算。否则，它并不比正常的溢出/重新加载好。

[上次我查看时`gcc -O3 -mfpmath=both`](https://stackoverflow.com/questions/41293077/how-to-compile-tensorflow-with-sse4-2-and-avx-instructions#comment78998259_41584791)，结果并不令人印象深刻：[https](https://godbolt.org/g/p2KLEC) : //godbolt.org/g/p2KLEC 显示 gcc5.4 使用一些存储/重新加载在 x87 和 xmm (AVX) 寄存器之间反弹数据。将一些常量保留在内存中会更好。

# embedded - 在嵌入式 c 中启动代码

> ID：13723252
> 
> 赞同：-4
> 
> 时间：2012-12-05T12:27:32.003
> 
> 标签：embedded, startup, clock

如何使用启动代码完成微控制器中的时钟初始化？一个通用的方法就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:40:12.073

阅读设备的数据表，按照它说的去做。

# iphone - 横向模式下只设置一个 ViewController

> ID：13723256
> 
> 赞同：4
> 
> 时间：2012-12-05T12:27:41.177
> 
> 标签：iphone, objective-c, uiviewcontroller, ios6

我是ios新手。

我只想`viewController`在`landscape`模式中显示一个，而其他全部是纵向的。

所以请帮助我并告诉我如何`landscape`在应用程序模式下仅更改一个视图。

我已经搜索过了，但没有找到任何特定的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:11:46.293

如果您使用的是导航控制器，并且推动此“面向横向”视图控制器的控制器仅处于纵向模式，则您必须通过 CGAffineTransformation 手动旋转 uiview。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // If you require full screen then hide the navigation bar with following commented line.
    //[self.navigationController setNavigationBarHidden:YES animated:NO];

    // Rotates the view.

    CGAffineTransform transform = CGAffineTransformMakeRotation(-M_PI/2);
    self.view.transform = transform;

    // Repositions and resizes the view.
    // If you need NavigationBar on top then set height appropriately 
    CGRect contentRect = CGRectMake(0, 0, 480, 320);
    self.view.bounds = contentRect;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:59:33.590

对于 iOS6，将此方法添加到您的`ViewController`

```
-(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:10:43.947

Are you using a UINavigationController?

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

-(BOOL) shouldAutorotate {
    return YES;
} 
```

# linq - 无法将类型 'DateTime' 隐式转换为 'bool' linq 查询

> ID：13723263
> 
> 赞同：0
> 
> 时间：2012-12-05T12:27:55.463
> 
> 标签：linq

我有这个 LINQ 查询：

```
var resourcePlanningInWeek = resourcePlanning.Where(rp => rp.PlanDate >= dateFrom && rp.PlanDate <= dateTo);
var holidays = new HolidayManager().GetByPeriod(dateFrom, dateTo);
var resourcePlanningExcludedHolidays= resourcePlanningInWeek.Where(rpiw => ( holidays.Where(h => h.HolidayDate = rpiw.PlanDate).Count = 0)) 
```

执行时，我收到以下错误：

> 无法将类型“日期时间”隐式转换为“布尔”

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:36:42.733

1.  当你想进行比较时，你需要使用`==`而不是。`=`这与最后一行的两个地方有关。
2.  调用`Count`缺少括号。

```
var resourcePlanningExcludedHolidays = resourcePlanningInWeek
    .Where(rpiw => holidays.Where(h => h.HolidayDate == rpiw.PlanDate)
                           .Count() == 0); 
```

但是，有一种更好的写法：

```
var resourcePlanningExcludedHolidays = resourcePlanningInWeek
    .Where(rpiw => !holidays.Any(h => h.HolidayDate == rpiw.PlanDate)); 
```

这更好，因为：

1.  它更短且更具可读性
2.  `holidays`一旦条件第一次为真，它就会停止枚举。`Count()`总是枚举完整的列表。

更好的方法是使用`HashSet<DateTime>`：

```
var holidays
    = new HashSet<DateTime>(new HolidayManager().GetByPeriod(dateFrom, dateTo)
                                                .Select(x => x.HolidayDate));

var resourcePlanningExcludedHolidays
    = resourcePlanningInWeek.Where(rpiw => !holidays.Contains(rpiw.PlanDate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:30:06.400

您在以下位置缺少等号：

```
h.HolidayDate = rpiw.PlanDate 
```

它应该是：

```
var resourcePlanningExcludedHolidays= 
      resourcePlanningInWeek.Where(rpiw => ( holidays.Where(h => h.HolidayDate == rpiw.PlanDate).Count = 0)) 
```

# command-line - 使用旧版 perforce 创建补丁

> ID：13723265
> 
> 赞同：0
> 
> 时间：2012-12-05T12:28:03.530
> 
> 标签：command-line, perforce

我面临着使用旧版本的 perforce 在开发人员之间共享部分代码更改的问题。

那么，如何使用旧的 perforce 客户端创建补丁（从更改列表或几个更改的文件）？最好从命令行使用一个命令。

谢谢。

*   客户端版本：2011.1
*   服务器版本：2007.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:42:00.333

实际上，在 2009.2 版本中添加了生成统一差异格式输出的“diff -du”命令。（有关Perforce 服务器的历史，请参阅[http://www.perforce.com/perforce/doc.current/user/relnotes.txt ）](http://www.perforce.com/perforce/doc.current/user/relnotes.txt)

2007.3 版现在已经很老了。为什么不升级？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:50:03.313

您至少可以同步源树的干净副本并`diff`手动运行以生成补丁。如果它只涉及“几个更改的文件”，那应该不是很多工作。

# c# - 如何从 Metro 应用程序执行嵌入文件？

> ID：13723266
> 
> 赞同：0
> 
> 时间：2012-12-05T12:28:07.697
> 
> 标签：c#, windows-8, microsoft-metro

如何从 Metro 应用程序执行嵌入文件 (.cmd)？有`Windows.System.Launcher.LaunchUriAsync()`帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:54:34.017

从[这个线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/14e2be68-ef86-4480-a3fd-6ddf7ec7d1f1)我要说这是不可能的。Windows 商店应用程序有一个非常受限的沙箱，调用其他可执行文件将超出允许范围。

# java - Spring JPA 无法通过 EntityDao

> ID：13723270
> 
> 赞同：0
> 
> 时间：2012-12-05T12:28:28.070
> 
> 标签：java, spring, hibernate, jpa

所以我在测试 Spring JPA 时遇到了这个问题，这是我的代码：

`ArticleService`：

```
@Service("articleService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class ArticleServiceImpl implements ArticleService {

private ArticleDao articleDao;

  @Autowired
  public ArticleServiceImpl(ArticleDao articleDao) {
    this.articleDao = articleDao;
  }

  public ArticleServiceImpl() {
  }

  @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
  public void addArticle(Article article) {
    articleDao.saveArticle(article);
  }
} 
```

我的`ArticleDao`：

```
@Repository("articleDao")
public class ArticleDaoImpl implements ArticleDao {

  private EntityManager em;

  @PersistenceContext
  public void setEntityManager(EntityManager em) {
    this.em = em;
  }

  // To Save the article detail
  public void saveArticle(Article article) {
    article.setAddedDate(new Date());
    em.persist(article);
  }
} 
```

问题在于在`InputDatabaseServiceImpl`类中执行这些方法。

```
public class InputDatabaseServiceImpl implements InputDatabaseService {

public ArticleService articleService;

public InputDatabaseServiceImpl(ArticleService articleService){
    this.articleService= articleService;
}

public int inputArticle(Article article) {
    articleService.saveArticle(article);
    return 0;
} 
```

应用`appContext.xml`

```
<context:property-placeholder location="/WEB-INF/database.properties" />

<tx:annotation-driven transaction-manager="transactionManager" /> 

<!-- Declare a datasource that has pooling capabilities--> 
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close"
p:driverClass="${database.driver}"
p:jdbcUrl="${database.url}"
p:user="${database.user}"
p:password="${database.password}"
p:acquireIncrement="5"
p:idleConnectionTestPeriod="60"
p:maxPoolSize="100"
p:maxStatements="50"
p:minPoolSize="10" />

<!-- Declare a JPA entityManagerFactory-->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
<property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"></property>
<property name="persistenceUnitName" value="hibernatePersistenceUnit" />
<property name="dataSource" ref="dataSource"/>
<property name="jpaVendorAdapter">
<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" >
<property name="showSql" value="true"/>
</bean>
</property>
</bean>

<!-- Declare a transaction manager-->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
</beans> 
```

每当我打电话给我的`inputArticle`班级时，我`endpoint`都会`NullPointerExpcetion`排队`articleService.saveArticle(article);`

我知道这是最容易解决的异常，但我一直在为此苦苦挣扎，我需要帮助。任何人都可以给我一个提示，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:33:03.233

发生的情况是 ArticleService 属性未初始化。

这可能是由于 InputDatabaseServiceImpl bean 配置不匹配，或者注入依赖项的注释不匹配（如果您的 bean 是自动装配的）。

试试这个：

```
public class InputDatabaseServiceImpl implements InputDatabaseService {

   @Autowired
   public ArticleService articleService;

   public InputDatabaseServiceImpl(){
      //no need of arguments constructor
   }

   public int inputArticle(Article article) {
      articleService.saveArticle(article);
      return 0;
   }

} 
```

要自动装配 bean，此 bean 必须提供一个公共默认构造函数，而您的 ArticleServiceImpl 类没有该构造函数。一种修复形式是重构 ArticleServiceImpl：

```
@Service("articleService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class ArticleServiceImpl implements ArticleService {

  @Autowired
  private ArticleDao articleDao;

  public ArticleServiceImpl() {
     //default constructor required for @Autowired
  }

  public ArticleServiceImpl() {
  }

  @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
  public void addArticle(Article article) {
    articleDao.saveArticle(article);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:34:26.227

问题是它`articleService`为空且未初始化

如果 spring 正在管理 InputDatabaseServiceImpl 对象，您应该`articleService`使用Auto Wire`@Autowired`

否则，您必须请求 spring 使用 ClassPathXMLApplicationContext.getBean 初始化 articleService

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:07:13.380

正如其他人的回答所说，你`articleService`是空的，因为没有被注入。在您的 appContext.xml 中，您应该包括：

```
<!-- Bean creation -->
<context:component-scan base-package="com.mypackage"/>
<!-- Also, you can create your beans one by one -->
<!-- <bean class="com.mypackage.MyBean" /> -->

<!-- Enables autowired annotations -->
<context:annotation-config/> 
```

# c# - 如何将数据表值绑定到复选框和组合框值？

> ID：13723275
> 
> 赞同：1
> 
> 时间：2012-12-05T12:28:43.840
> 
> 标签：c#, wpf, checkbox, datagrid, combobox

在旧版本中。我正在绑定的代码

```
 dgvShow.Columns["grdTest_Active"].DataPropertyName = oDTList.Columns["STATUS"].ToString();
 dgvShow.Columns["grdTest_LnkOrder"].DataPropertyName = oDTList.Columns["ORDER"].ToString(); 
```

我正在转换 WPF 中的代码，我已经采用了一个网格，并在其中放置了

```
<DataGridTemplateColumn Header="Active" Width="50"  IsReadOnly="True">
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
       <CheckBox x:Name="chkActive" IsChecked="{Binding Path=Active}" HorizontalAlignment="Center" VerticalAlignment="Center" IsEnabled="True"/>
    </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>

<DataGridTemplateColumn Header="Order" Width="60"  IsReadOnly="True">
  <DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
        <ComboBox ItemsSource="{Binding Path=Order}" />
     </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

当我使用

```
DataGridObjectTypeList.DataContext = oDTList.DefaultView; 
```

在 vmUCObjType Cs 文件上它正在绑定网格，但未显示复选框和组合框数据。

我想将 oDTList 数据表值绑定到我的复选框和组合框，该怎么做？

请有人帮助我，我是 WPF 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:35:47.687

在您的 XAML 文件中，写入

```
<ComboBox x:Name="Name_ComboBox" DisplayMemberPath="Name" SelectedValuePath="id"/> 
```

在后面的代码中，输入：

```
Name_ComboBox.ItemSource = Table_name; 
```

（Table_name 是对您提到的表的引用）。

然后您可以使用以下表达式在组合框中获取当前选定人员的 ID：

```
Name_ComboBox.SelectedValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:34:08.157

我已经在前端删除`ComboBoxColumn`并添加了代码，在后面的代码中我做了这样的事情：`DataGridComboBoxColumn`

```
((DataGridComboBoxColumn)dgShowList.Columns[1]).ItemsSource = DTCount.DefaultView;
((DataGridComboBoxColumn)dgShowList.Columns[1]).DisplayMemberPath = DTCount.Columns["Order"].ToString();
((DataGridComboBoxColumn)dgShowList.Columns[1]).SelectedValuePath = DTCount.Columns["Order"].ToString();
((DataGridComboBoxColumn)dgShowList.Columns[1]).SelectedValueBinding = new Binding("Order"); 
```

# c# - 如何获取RadPageView控件的RadTab

> ID：13723284
> 
> 赞同：2
> 
> 时间：2012-12-05T12:29:18.113
> 
> 标签：c#, asp.net, telerik

我有以下 Telerik tabstrip 控件：-

```
<telerik:RadTabStrip ID="rtsMyTabs" runat="server" MultiPageID="rmpMyMultiPage"
    SelectedIndex="0" Align="Justify" Width="970px" CssClass="tab-border-custom"
    Skin="Simple">
    <Tabs>
        <telerik:RadTab Text="Step1" Width="280px" Selected="True">
        </telerik:RadTab>
        <telerik:RadTab Text="Step2" Width="280px">
        </telerik:RadTab>
    </Tabs>
</telerik:RadTabStrip>

<telerik:RadMultiPage ID="rmpProjectStatus" runat="server" SelectedIndex="0" CssClass="pageView"
    Width="100%">
    <telerik:RadPageView ID="RadPageView1" runat="server" Width="100%" Height="100%">
             <asp:TextBox ID="txtMyTextBox1" runat="server" Width="170px" />
    </telerik:RadPageView>
    <telerik:RadPageView ID="RadPageView2" runat="server" Width="100%" Height="100%">
             <asp:TextBox ID="txtMyTextBox2" runat="server" Width="170px" />
    </telerik:RadPageView>
</telerik:RadMultiPage> 
```

我想知道后面代码中“txtMyTextBox2”的标签索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:39:56.693

这个请求很简单：

```
var a = rmpProjectStatus.FindPageViewByID(txtMyTextBox2.Parent.ID).Index ; 
```

它将为您提供包含所需控件的页面的索引。

# c# - WCF 数据服务，不公开所有列

> ID：13723287
> 
> 赞同：3
> 
> 时间：2012-12-05T12:29:29.230
> 
> 标签：c#, entity-framework, wcf-data-services

我的 WCF 数据服务绑定到 EDMX，其中包含我不想通过数据服务公开的某些列。如何隐藏这些列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:44:13.193

[`[IgnoreProperties]`](http://msdn.microsoft.com/en-us/library/system.data.services.ignorepropertiesattribute.aspx)如果您使用的是 Data Services 版本 5 ，则可以使用该属性：

```
[IgnoreProperties("Email", "Password")]
public partial class User 
{

} 
```

# iphone - 在地图中的两点之间旅行所需的时间 - iphone

> ID：13723289
> 
> 赞同：0
> 
> 时间：2012-12-05T12:29:40.407
> 
> 标签：iphone, ios, iphone-sdk-3.0

如何计算地图视图中两点之间的旅行时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:37:06.737

**测量的旅行时间**

如果您将时间戳与点的坐标一起存储，则只能这样做。其他解决方案是不现实的。如果你有两个时间戳，那么计算秒数的差异很简单。

将两个时间都转换为 "timeSinceReferenceDate" 并减去：

像 deltaSeconds = abs(t2 - t1);

**预计旅行时间汽车**

如果您只有坐标，并且想知道使用汽车的**预计**旅行时间，则必须使用路线服务，该服务会为您计算路线和持续时间。

# sql - PostgreSQL：根据哪个为空，选择两个字段之一

> ID：13723301
> 
> 赞同：31
> 
> 时间：2012-12-05T12:30:26.393
> 
> 标签：sql, postgresql, syntax, ternary-operator

您好，我有一个查询，我想根据其中一个字段是否为空来选择两个字段之一的值。

```
field1 and field2 
```

我想选择它们作为`complete_field`

```
IF field1 is empty, then complete_field is field2
ELSE complete_field is field1 
```

在 php 中，它会像这样完成：

```
$complete_field = $field1 == '' ? $field2 : $field1; 
```

我将如何在 PostgreSQL 中执行此操作？

我试过：

```
SELECT
(IF field1 = '' THEN field2 ELSE field1) AS complete_field
FROM
table 
```

但它不起作用。

请帮助我:)谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-05T12:41:06.857

使用`CASE WHEN .. THEN .. ELSE .. END`，例如：

```
SELECT 
(CASE WHEN (field1 IS NULL OR field1 = '') THEN field2 ELSE field1 END)
FROM table; 
```

[在官方文档](http://www.postgresql.org/docs/9.2/static/functions-conditional.html)中查看。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-06T20:13:20.263

尝试：[`COALESCE`](http://www.postgresql.org/docs/9.3/static/functions-conditional.html)_[`NULLIF`](http://www.postgresql.org/docs/9.3/static/functions-conditional.html)

```
SELECT COALESCE(NULLIF(field1, ''), field2) AS the_field FROM my_table; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-05T12:44:17.343

ANSI SQL 函数 Coalesce() 是您想要的。

```
 select Coalesce(field1,field2)
 from   table; 
```

# python - python循环索引

> ID：13723303
> 
> 赞同：1
> 
> 时间：2012-12-05T12:30:28.857
> 
> 标签：python, loops, indexing, music-notation

我正在尝试编写一个程序来获取音阶的音符。这就是我现在所做的，但它看起来非常复杂！我错过了什么？应该是这样吗？

```
notes = [ "c", "c#", "d", "d#", "e", "f", "f#", "g", "g#", "a", "a#", "b" ]
major = [2,2,1,2,2,2] # semitone steps
root  = "f"
root_i= notes.index(root)

index = [root_i+i for i in [sum(major[:y]) for y in range(len(major)+1)]]
scale = [notes[i] if i < len(notes) else notes[i-len(notes)] for i in index] 
```

我只需要增加`root_i`每个“步骤”`major`并在我到达末尾时重新启动`notes`...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:56:51.443

一种方法是使用 a ，但基于方法`deque`并没有什么问题。`list`我只是倾向于通过将它放在自己的功能中来更清楚地了解正在发生的事情......

```
from collections import deque

notes = [ "c", "c#", "d", "d#", "e", "f", "f#", "g", "g#", "a", "a#", "b" ]

def get_scale(seq, start):
    d = deque(seq)
    d.rotate(-seq.index(start)) 
    yield d[0]
    for idx in [2, 2, 1, 2, 2, 2]:
        d.rotate(-idx) # always bring element to index 0
        yield d[0] 

print list(get_scale(notes, 'c')) 
```

然后，您不妨预先计算很多：

```
>>> scales = {k:list(get_scale(notes, k)) for k in notes}
>>> scales
{'a': ['a', 'b', 'c#', 'd', 'e', 'f#', 'g#'], 'c': ['c', 'd', 'e', 'f', 'g', 'a', 'b'], 'b': ['b', 'c#', 'd#', 'e', 'f#', 'g#', 'a#'], 'e': ['e', 'f#', 'g#', 'a', 'b', 'c#', 'd#'], 'd': ['d', 'e', 'f#', 'g', 'a', 'b', 'c#'], 'g': ['g', 'a', 'b', 'c', 'd', 'e', 'f#'], 'f': ['f', 'g', 'a', 'a#', 'c', 'd', 'e'], 'c#': ['c#', 'd#', 'f', 'f#', 'g#', 'a#', 'c'], 'd#': ['d#', 'f', 'g', 'g#', 'a#', 'c', 'd'], 'f#': ['f#', 'g#', 'a#', 'b', 'c#', 'd#', 'f'], 'g#': ['g#', 'a#', 'c', 'c#', 'd#', 'f', 'g'], 'a#': ['a#', 'c', 'd', 'd#', 'f', 'g', 'a']}
>>> scales['d']
['d', 'e', 'f#', 'g', 'a', 'b', 'c#']
>>> scales['c']
['c', 'd', 'e', 'f', 'g', 'a', 'b'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:51:05.233

如果您关心音符的正确拼写，您将需要一种更复杂的方法。例如，您的 F# 大调音阶将变为 [F#, G#, A#, B, C#, D#, F]，而您真正想要的是 E# 作为主音。同样，如果您关心拼写，您也需要实现单位。如果您关心除大调音阶（自然和和声小调、Lydian 等）之外的全音阶音阶，您还需要将音符间距与所需的音阶间距分离。相反，您需要的是更复杂的东西，例如：

```
def getScale(root='C', mode='major')
    noteNames = ['C','D','E','F','G','A','B']
    noteSpacing = [2,2,1,2,2,2,1]
    if mode == 'natural minor':
        scaleSpacing = [2,1,2,2,1,2,2]
    elif mode == 'harmonic minor':
        scaleSpacing = [2,1,2,2,1,3,1]
    else:
        scaleSpacing = [2,2,1,2,2,2,1]

    startingIndex = noteNames.index(root[0])

    baseSemitoneOffset = root.count('#') - root.count('b')
    currentSemitones = 0
    correctSemitones = 0

    scale = [root]
    for noteDegree in range(1, 7):
        currentIndex = (startingIndex + noteDegree) % len(noteNames)
        currentSemitones += scaleSpacing[(noteDegree -1) % len(noteNames)]
        correctSemitones += noteSpacing[(currentIndex - 1) % len(noteNames)]
        currentSemitonesWithOffset = currentSemitones + baseSemitoneOffset
        thisNoteStep = noteNames[currentIndex]
        if currentSemitonesWithOffset < correctSemitones:
            thisNoteName = thisNoteStep + 'b' * (correctSemitones - currentSemitonesWithOffset)
        elif currentSemitonesWithOffset > correctSemitones:
            thisNoteName = thisNoteStep + '#' * (currentSemitonesWithOffset - correctSemitones)
        else:
            thisNoteName = thisNoteStep
        #print thisNoteName, currentSemitonesWithOffset, currentSemitones, correctSemitones
        scale.append(thisNoteName)

    return scale 
```

对于这些值，哪个返回您所期望的

```
print getScale('C')
print getScale('Ab')
print getScale('F#')

['C', 'D', 'E', 'F', 'G', 'A', 'B']
['Ab', 'Bb', 'C', 'Db', 'Eb', 'F', 'G']
['F#', 'G#', 'A#', 'B', 'C#', 'D#', 'E#'] 
```

并且适用于更晦涩的音阶：

```
print getScale('C', mode='harmonic minor')
print getScale('Ab', mode='natural minor')
print getScale('Fb', mode='major')

['C', 'D', 'Eb', 'F', 'G', 'Ab', 'B']
['Ab', 'Bb', 'Cb', 'Db', 'Eb', 'Fb', 'Gb']
['Fb', 'Gb', 'Ab', 'Bbb', 'Cb', 'Db', 'Eb'] 
```

有一个真实的假设，即音乐理论比在计算机中实现的图形或音频要容易得多……确实如此，但并没有那么容易。Python 程序员可能会对Pedro Kroger[的《Geeks and Nerds 音乐](http://pedrokroger.net/2012/07/music-for-geeks-and-nerds/ "极客和书呆子的音乐")》一书感兴趣；或者，如果您想研究更深层次的音乐理论问题（旋律小音阶，升序和降序不同；非八度音阶重复音阶等），您可以（我自己的工作的无耻插件）查看[music21 Python 工具包](http://web.mit.edu/music21/)，尤其是[music21.scale](http://web.mit.edu/music21/doc/html/moduleScale.html)模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:42:38.373

```
scale = [notes[i] if i < len(notes) else notes[i-len(notes)] for i in index] 
```

可以写成

```
scale = [notes[i % len(notes)] for i in index] 
```

整个可以使用重写`itertools`：

```
import itertools as it
notes = [ "c", "c#", "d", "d#", "e", "f", "f#", "g", "g#", "a", "a#", "b" ]
major = [2,2,1,2,2,2] # semitone steps
root  = "f"

note_iter = it.dropwhile(root.__ne__, it.cycle(notes))
scale = [list(it.islice(note_iter, m))[0] for m in major] 
```

或“一个”-衬里：

```
scale = [n for i, n in it.izip(it.chain.from_iterable(xrange(m) for m in major),
                               it.dropwhile(root.__ne__, it.cycle(notes)))
           if i == 0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T13:04:57.443

最简单的？

```
scale = [notes[(y+root_i)%len(notes)] for y in [0,2,4,5,7,9,11]] 
```

甚至

```
scale = [notes[(y+notes.index(root))%len(notes)] for y in [0,2,4,5,7,9,11]] 
```

你不需要 root_i 或 index

# javascript - 需要动态生成列

> ID：13723304
> 
> 赞同：2
> 
> 时间：2012-12-05T12:30:31.237
> 
> 标签：javascript

我需要动态地创建一个并排的表。所以我创建了一个表（外部）并尝试在按钮单击时动态生成列。在每一列中，我将创建我需要的实际表（内部），以便最终它们并排出现。

但我坚持为更大的表格创建列。看一下代码就清楚了。感谢 JS 中的任何解决方案。提前致谢

```
<html>
    <head>
        <script type="text/javascript">    
            function add() {
                var table = document.getElementById('foo');
                var rowCount = table.rows.length;             
                var row =document.getElementById('rowl');         
                var max=table.rows[0].cells.length;
                var cnum;

                if(max==0){
                    cnum=0;
                }else{
                    cnum=max+1;
                }

                var cell1 = row.insertCell(cnum);             

                cell1.innerHTML = "<table id='tabl'"+
                    cnum+
                    "' border=2 bordercolor='RED'><tr><th>Material  "+
                    (cnum+1)+
                    "</th></tr><tr><td>bdfgher</td></tr><tr><td>fdgerh</td></tr></table>"; 
                }
        </script>
    </head>
    <body>
        <button type="button" onclick="add()">Add cell</button>
        <table id="foo" border=1 bordercolor="BLUE">
            <tr id="rowl"></tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:50:56.423

它可能会帮助你一点:)

```
<html>
<head>
<script>
var c=-1;
function displayResult()
{
var firstRow=document.getElementById("tr_1");
//var x=firstRow.insertCell(-1);
//x.innerHTML="New cell"
var cell1 = firstRow.insertCell(c++);             

                cell1.innerHTML = "<table id='tabl'"+
                    cnum+
                    "' border=2 bordercolor='RED'><tr><th>Material  "+
                    (cnum+1)+
                    "</th></tr><tr><td>bdfgher</td></tr><tr><td>fdgerh</td></tr></table>";
}
</script>
</head>
<body>

<table id="myTable" border="1">
  <tr id='tr_1'></tr>
</table>
<br>
<button type="button" onclick="displayResult()">Insert cell</button>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:35:48.237

```
var cell = document.createElement("td");
document.getElementById("rowl").appendChild(cell); 
```

当然，您应该在单元格元素中添加其他元素（内表）。

# html - 带有 rezorder.js 的 HTML5 音频录制 getUserMedia 提供空的 WAV 文件

> ID：13723305
> 
> 赞同：2
> 
> 时间：2012-12-05T12:30:34.883
> 
> 标签：html, wav, html5-audio

我正在使用 HTML5 getUserMedia 函数录制音频。我的代码类似于[https://github.com/rokgregoric/html5record/archive/master.zip](https://github.com/rokgregoric/html5record/archive/master.zip)中的示例，服务器接收到正确的 Wav 数据。然而，所有接收到的数据都是 0。

可能是什么问题？我正在尝试使用 Chrome 23.0.1271.95，我的操作系统是 Win7。

我发现这里描述的类似问题：[http](http://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets#) ://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets#但对我来说没有帮助。

顺便说一下，基于 record.js 的示例也不适合我。记录很好，但在播放过程中只有静音，与我的服务器端记录相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:54:14.507

很确定您需要为 getUserMedia 运行 Chrome Canary。您还需要转到 chrome://flags 并确保启用了 Web 音频输入。

# mysql - MySQL 创建相关课程列表

> ID：13723309
> 
> 赞同：2
> 
> 时间：2012-12-05T12:31:00.547
> 
> 标签：mysql, join, relationships

我正在为我们学校更新一个网站，我们有一个可用的课程列表。

课程列表在 tbl_course_details 中：

```
CREATE TABLE `tbl_course_details` (
    `uid` int(11) NOT NULL auto_increment,
    `course_name` varchar(100) NOT NULL,
    `course_type` varchar(100) NOT NULL,
    `course_details` longtext NOT NULL,
    `course_added_by` int(4) NOT NULL,
    `course_last_updated` int(30) NOT NULL,
    `course_menu_id` int(4) NOT NULL,
    PRIMARY KEY  (`uid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=15; 
```

我还有一个名为 tbl_course_related 的表：

```
CREATE TABLE IF NOT EXISTS `tbl_course_related` (
    `uid` int(11) NOT NULL auto_increment,
    `course_id` int(4) NOT NULL,
    `related_course_id` int(4) NOT NULL,
    PRIMARY KEY  (`uid`),
    KEY `course_id` (`course_id`),
    KEY `related_course_id` (`related_course_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=25; 
```

当工作人员编辑课程时，他们还会获得所有课程的列表（他们当前正在编辑的课程除外）。它旁边还有复选框，因此如果课程与他们正在编辑的课程相关，他们会勾选该框。

我的课程详情表目前有 3 门课程：

```
Unique ID    Course Name
---------------------------
1            Geography
2            History
3            Art 
```

例如，我将地理与历史相关，而历史与艺术相关，所以我的关系表如下所示：

```
Unique ID    Course ID     Related Course Id
--------------------------------------------
1            1             2
2            2             1
3            2             3
4            3             2 
```

我希望到目前为止这是有道理的。现在，如果工作人员去编辑地理课程（课程 ID：1），那么我想要一个包含历史和艺术的课程列表，并且只勾选历史复选框。

我当前的 SQL 查询看起来像这样（尽管我已经对其进行了一些更改并且到目前为止没有任何效果）：

```
SELECT d.uid, 
       d.course_name,
       r.related_course_id
FROM tbl_course_details d
LEFT JOIN tbl_course_related r
    ON r.course_id = d.uid 
AND d.uid!=:courseId 
```

但是，这使列表看起来像这样（如果我编辑地理）

```
Related?   Course Name
No         History
Yes        History
No         Art 
```

显然，我不希望列表中出现两次历史记录，尤其是在信息相互矛盾的情况下。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:32:46.447

试试这个 ：：

```
SELECT d.uid, 
       d.course_name,
       r.related_course_id
FROM tbl_course_details d
LEFT JOIN tbl_course_related r
    ON r.course_id = d.uid 
AND d.uid!=:courseId

GROUP BY r.course_id 
```

或者您可以使用 DISTINCT::

```
SELECT 
       DISTINCT(d.course_name),
d.uid,            
r.related_course_id
    FROM tbl_course_details d
    LEFT JOIN tbl_course_related r
        ON r.course_id = d.uid 
    AND d.uid!=:courseId

GROUP BY r.course_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:44:04.127

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/7ea43/4)。如果结果数据集`r.related_course_id`不为 NULL，则应勾选复选框

```
SELECT d.uid, 
       d.course_name,
       r.related_course_id
FROM tbl_course_details d
LEFT JOIN tbl_course_related r
    ON (r.course_id = d.uid) and (r.Related_Course_Id=:courseId)

where d.uid!=:courseId 
```

# visual-leak-detector - 视觉泄漏检测器：文件和行号不可用

> ID：13723313
> 
> 赞同：2
> 
> 时间：2012-12-05T12:31:27.133
> 
> 标签：visual-leak-detector

```
Visual Leak Detector: WARNING! There are memory leaks!

---------- 1 block (#3791210) consuming 24 bytes ----------

  0x1000234A (File and line number not available): Visualleakdetector
  0x102095D6 (File and line number not available): malloc_dbg
  0x102094B9 (File and line number not available): malloc_dbg
  0x10209409 (File and line number not available): malloc 
```

堆栈继续，但没有显示文件。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:39:07.227

我想您没有正在分析的程序（pdb 文件）的调试符号。这是一个你有源代码的程序吗？如果是这样，我建议您检查您的项目是否已设置为生成调试符号、在本地重建并重新运行程序。

# perl - perl grep 函数

> ID：13723316
> 
> 赞同：1
> 
> 时间：2012-12-05T12:31:36.127
> 
> 标签：perl

我正在使用 perl grep，如下例所示。“bfh”是打开命令创建的用于读取的文件句柄。

```
 @searchResults = grep {/,\s*${searchRecId}\s*,\s*${searchSwId}\s*/} <$bfh>; 
```

代替文件句柄“bfh”，我可以直接给出带有路径的文件名，比如 unix grep 命令吗？如果我想这样做，我需要做出什么改变？下面的代码是否正确？

```
@searchResults = grep {/,\s*${searchRecId}\s*,\s*${searchSwId}\s*/} /tmp/test.out 
```

我不想给文件句柄或数组。我只想像 unix grep 命令那样做。

将跨越 1000 个文件。当我读取 100000 行文件时，每行涉及 grep 时，我都希望直接获得文件名，而不是打开 1000 个文件句柄并在哈希图中维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:42:10.680

你可以通过`map`. `*.dat`例如，这截断了当前目录中的greps ：

```
my @searchResults = grep {
    /,\s*${searchRecId}\s*,\s*${searchSwId}\s*/
} map {
    sub {
        my @ret;
        if (open my $fh, "<", shift) {
            @r = <$fh>;
            close @fh;
        }
        return @ret;
    }->($_);
} glob "*.dat"; 
```

但是，在处理多行文件时，这是一种次优方法！这是做同样事情的一种较少内存贪婪的方式：

```
my @searchResults;
opendir(my $dh, '.') or die "error opening current directory: $!";
while (my $file = readdir $dh) {
    next unless -f $file;
    next if $file !~ /\.dat$/;
    if (open my $fh, '<', $file) {
        while (my $line = <$fh>) {
            if (/,\s*${searchRecId}\s*,\s*${searchSwId}\s*/) {
                push @searchResults, $line;
            }
        }
        close $fh;
    } else {
        die "error processing $file: $!";
    }
}
closedir $dh; 
```

而且，如果您使用 shell，请查看[ack](http://betterthangrep.com/)实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:36:20.210

你可以这样做：

```
use Slurp;
my $filename = 'my/file/name';
@searchResults = grep {/,\s*${searchRecId}\s*,\s*${searchSwId}\s*/}
                   slurp $filename; 
```

不过，这会将文件读入内存。

# google-drive-api - 使用api不同的原始文件名和标题或更改原始文件名

> ID：13723318
> 
> 赞同：0
> 
> 时间：2012-12-05T12:31:37.377
> 
> 标签：google-drive-api

从[API 文档](https://developers.google.com/drive/v2/reference/files#resource)：

> 如果文件是手动上传的，则为原始文件名；如果文件是通过 API 插入的，则为原始标题。请注意，重命名标题不会更改原始文件名。这只会在内容存储在云端硬盘中的文件上填充。

我想插入一个带有标题和不同原始文件名的文件。根据（我的解释）文档，这将是一个两步方法，首先插入标题应该成为原始文件名的文档，然后执行补丁来更改标题。这需要两个步骤来区分标题和原始文件名。这也意味着无法使用 API 更改原始文件名。

我错过了什么吗？有没有更好的方法来设置原始文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-29T12:34:40.027

当 Google 驱动器中的实际文件具有不同的名称时，我们希望将正在上传的修订文件的原始文件名保留在历史列表中。

我们希望使用静态名称命名 Google 驱动器文件，并且历史列表中的所有修订都在其文件名中包含日期。

没有直接的功能可以通过 Google Drive API 做到这一点。

很自然地想到的是通过 API 更新修订版的 originalFilename 字段（我们使用带有模块“googleapis”v3 的 NodeJS）

```
service.revisions.update(
    {
             fileId: <fileId>,
             revisionId: <revisionId>,
             resource: {
                  originalFilename : <revision file name>
             }
    }
) 
```

但回应是：

```
{
      Error: The resource body includes fields which are not directly writable.
      code: 403,  
      errors:
      { 
           domain: 'global',
           reason: 'fieldNotWritable',
           message: 'The resource body includes fields which are not directly writable.'
      } 
} 
```

所以事实证明 originalFilename 字段在 revisions.update 上是可识别的，但不知何故不可更新 - 可能出于某种原因故意这样做。

我们使用的实际上设法实现我们最初目标的解决方法是以编程方式：

1.  在上传修订之前，将 google drive 文件重命名为修订的文件名
2.  将修订上传到谷歌驱动器（现在修订的 originalFilename 被自动设置为我们在上一步中方便地重命名为修订文件名的实际文件名）
3.  将谷歌驱动器文件重命名为其原始文件名

因此，如果我们有名为“GooleDriveFile.dat”的谷歌驱动器文件，并且我们想要上传名为 GooleDriveFile_01012016.dat 的修订版并将原始修订版名称保留在历史列表中，我们可以通过编程方式：

1-> 将 Google 驱动器文件从 GooleDriveFile.dat 重命名为 GooleDriveFile_01012016.dat

```
service.files.update(
      {
          fileId : <fileId>,
          resource: {
               name: "GooleDriveFile_01012016.dat",
          },
          fields :  "id,headRevisionId"
      } 
) 
```

2-> 将修订上传到谷歌驱动器

```
service.files.update(
   {
        fileId : <fileid>,
        newRevision : true,
        keepRevisionForever : true,
        media: {
            body: fs.createReadStream(<local path to the revision file>)  
        },
        fields : "id,headRevisionId"
    }
) 
```

3-> 将谷歌驱动器文件重命名为“GooleDriveFile.dat”

```
service.files.update(
      {
          fileId : <fileId>,
          resource: {
               name: "GooleDriveFile.dat",
          },
          fields :  "id,headRevisionId"
      } 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:50:40.307

实际上，即使在执行 insert() 然后 patch() 时，我也无法让 originalFilename 返回。当文档说“如果文件是手动上传的”时，我相信它指的是用户通过 Drive Web UI 上传它。

您最好将原始文件名记录在 indexableText 或 description 等其他属性中。

# java - 输入流/阅读器是否总是要关闭？

> ID：13723320
> 
> 赞同：0
> 
> 时间：2012-12-05T12:31:42.900
> 
> 标签：java, io, stream, sax

当我们将 an`InputStream`或 a传递`Reader`给`InputSource`谁/何时关闭流/阅读器？
在[saxproject](http://www.saxproject.org/quickstart.html)的示例中，流/读取器未关闭。
为什么？我不应该关闭这些流吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:33:09.980

使用完资源后关闭资源（如果您创建了它们）是一种很好的做法。我会说 saxproject 示例代码是草率的。

至于“谁”——重量级资源通常应该在创建它（并因此拥有它）的范围内关闭/释放，以避免所有权混淆。

# c++ - 为什么会出现分段错误？瓦尔格林？

> ID：13723321
> 
> 赞同：0
> 
> 时间：2012-12-05T12:31:43.733
> 
> 标签：c++, segmentation-fault, valgrind

我编写了一个程序来确定两个字符串之间的最长公共子序列。我`LCSLength()`用一个小的硬编码测试用例测试了我的函数，它返回了正确的值。

现在，我正在从文件中读取字符串进行比较，我的程序给了我一个分段错误。这是代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <fstream>
using namespace std;

int LCSLength(string X,string Y);

int main()
{
    ifstream inData("sequences.dat");
    vector<string> lines(1);
    string line;
    int LCS;

    while (getline(inData,line)) 
    {
        if (line.empty()) 
            lines.push_back("");
        else 
            lines.back() += line;
    }

    LCS = LCSLength(lines[0],lines[1]);
    cout << "The LCS is: " << LCS << endl;
    return 0;
}

int LCSLength(string X,string Y)
{
    int m = X.size();
    int n = Y.size();
    int L[m+1][n+1];
    for(int i=0; i<=m; i++)
    {
        for(int j=0; j<=n; j++)
        {
            if(i==0 || j==0)
                L[i][j] = 0;
            else if(X[i-1]==Y[j-1])
                L[i][j] = L[i-1][j-1]+1;
            else
                L[i][j] = max(L[i-1][j],L[i][j-1]);
        }
    }
    return L[m][n];
} 
```

当我使用 -pedantic -ansi 进行编译时，出现以下错误：在函数 LCSLength(std::string, std::string) 中：ISO C++ 禁止可变大小数组“L”。

我使用 Valgrind 编译，以下是它产生的错误：

```
==15183== LEAK SUMMARY:
==15183==    definitely lost: 8,624 bytes in 14 blocks
==15183==    indirectly lost: 1,168 bytes in 5 blocks
==15183==      possibly lost: 5,518 bytes in 58 blocks
==15183==    still reachable: 44,925 bytes in 278 blocks
==15183==         suppressed: 0 bytes in 0 blocks
==15183== Reachable blocks (those to which a pointer was found) are not shown.
==15183== To see them, rerun with: --leak-check=full --show-reachable=yes
==15183== 
==15183== ERROR SUMMARY: 23 errors from 23 contexts (suppressed: 0 from 0)
==15183== 
==15183== 1 errors in context 1 of 23:
==15183== Invalid read of size 4
==15183==    at 0x38326: std::string::_Rep::_M_grab(std::allocator<char> const&, std::allocator<char> const&) (in /usr/lib/libstdc++.6.0.9.dylib)
==15183==    by 0x388EF: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&) (in /usr/lib/libstdc++.6.0.9.dylib)
==15183==    by 0x100001AAE: main (firstt.cpp:23)
==15183==  Address 0xfffffffffffffff8 is not stack'd, malloc'd or (recently) free'd
==15183== 
==15183== 
==15183== 1 errors in context 2 of 23:
==15183== Invalid read of size 8
==15183==    at 0x388DC: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&) (in /usr/lib/libstdc++.6.0.9.dylib)
==15183==    by 0x100001AAE: main (firstt.cpp:23)
==15183==  Address 0x100023d28 is 0 bytes after a block of size 8 alloc'd
==15183==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==15183==    by 0x4B346: operator new(unsigned long) (in /usr/lib/libstdc++.6.0.9.dylib)
==15183==    by 0x100002DFE: __gnu_cxx::new_allocator<std::string>::allocate(unsigned long, void const*) (new_allocator.h:91)
==15183==    by 0x100002E42: std::_Vector_base<std::string, std::allocator<std::string> >::_M_allocate(unsigned long) (stl_vector.h:131)
==15183==    by 0x100002E9D: std::_Vector_base<std::string, std::allocator<std::string> >::_Vector_base(unsigned long, std::allocator<std::string> const&) (stl_vector.h:116)
==15183==    by 0x1000030E4: std::vector<std::string, std::allocator<std::string> >::vector(unsigned long, std::string const&, std::allocator<std::string> const&) (stl_vector.h:215)
==15183==    by 0x1000017D9: main (firstt.cpp:11)
==15183== 
==15183== ERROR SUMMARY: 23 errors from 23 contexts (suppressed: 0 from 0)
Segmentation fault: 11 
```

我的测试文件有两行序列。我检查`lines.size()`并返回 2。我还`cout << lines[0]`打印`cout << lines[1]`了正确的字符串。

谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:59:49.580

您的`lines`向量始终包含一个元素，因此按索引 1 访问它会导致 UB

```
LCS = LCSLength(lines[0],lines[1]);
                          here ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:02:12.403

您是否确认退出 while 循环后，两者都`lines[0]`存在`lines[1]`？仅当您的输入文件中至少有一个空行（并且被识别为这样）时，才会发生这种情况。

根据 Valgrind （请阅读其输出！） - 您在内部`main`（第 11 或 23 行）而不是从`LCSLength`.

# android - 如何从一开始就避免 ndk-build 编译？

> ID：13723327
> 
> 赞同：2
> 
> 时间：2012-12-05T12:32:16.777
> 
> 标签：android, compilation, android-ndk, java-native-interface

最近，我正在阅读和修改 Linphone-android 的代码，这是一个开源的 sip 应用程序。林电话 [http://www.linphone.org](http://www.linphone.org)

我修改了一些代码并想重新编译它。但是 ndk-build 将始终编译每个子模块，即使它没有任何更改。编译大约需要 10 或 20 分钟。

那么，如何避免这种情况呢？谢谢。

# jquery-selectors - jquery .html() 在 ie7 中返回 null

> ID：13723329
> 
> 赞同：0
> 
> 时间：2012-12-05T12:32:23.460
> 
> 标签：jquery-selectors

在单击 li 元素时，我正在获取当前元素值并将其动态附加到另一个 div 中。它在所有浏览器中都可以正常工作。但是在 IE7 中返回 null。我不知道它发生的原因吗？请任何人都可以给我一个对此的解决方案..部分代码只有我粘贴在这里。

**示例代码：** ///////////.//在 IE7 中此行返回 null。///////////////

```
 $('#pagelink_a #pagelinkli_'+tab_lastid_val).html()

  (tab_lastid_val value can be a 1 or 2 or 3.Clixked li element value comes here)

    <div class="pagelink">
          <div id="pagelink_a">
       <ul>
           /******** all li element are clickable***********/
           <li id="pagelinkli_1"><a>Google</a></li>
           <li id="pagelinkli_2"><a>Chrome</a></li>
           <li id="pagelinkli_3"><a>Firefox</a></li>
       </ul>
    </div>
</div? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:40:59.757

尝试这个：

```
 $('#pagelink_a').find('li[id=pagelinkli_'+tab_lastid_val']').html(); 
```

代码未经测试，但我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:43:23.663

只需使用

```
$('#pagelinkli_'+tab_lastid_val).html() 
```

该`#`标签标识只有单个元素可能具有的 ID。没有必要在它前面有任何东西。您还将以前的课程标记为 id，这是错误的。我不知道您的其他浏览器如何设法获得任何东西。

虽然有点离题，但实际上完全放弃对 IE7 的支持可能会更好。由于用户群小且受欢迎程度下降，支持它可能比不支持它花费更多的钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:38:46.600

鉴于您的 html 布局，您的父 div`.pagelink`不是`#pagelink_a`，因此请替换您的以下行：

```
$('#pagelink_a #pagelinkli_'+tab_lastid_val).html() 
```

对于这个：

```
$('.pagelink #pagelinkli_'+tab_lastid_val).html() 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-05T12:39:39.907

尝试代替 html() ，并尝试 append()。
例如

```
$('#ID').append('Your content'); 
```

# magento - 导入多选属性后，Magento 产品属性索引处理未知错误

> ID：13723331
> 
> 赞同：2
> 
> 时间：2012-12-05T12:32:30.043
> 
> 标签：magento, import, attributes, multi-select, reindex

导入多选产品属性后，当我尝试从 magento admin 重新索引时，索引器显示错误。 **“重新索引过程存在问题。”**

异常日志：

```
2012-12-05T12:21:36+00:00 DEBUG (7): Exception message: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '185-154-1-843' for key 'PRIMARY'
Trace: #0 /opt/lampp/htdocs/mise/lib/Varien/Db/Statement/Pdo/Mysql.php(111): Zend_Db_Statement_Pdo->_execute(Array)
#1 /opt/lampp/htdocs/mise/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /opt/lampp/htdocs/mise/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /opt/lampp/htdocs/mise/lib/Zend/Db/Adapter/Pdo/Abstract.php(239): Zend_Db_Adapter_Abstract->query('INSERT INTO `ca...', Array)
#4 /opt/lampp/htdocs/mise/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `ca...', Array)
#5 /opt/lampp/htdocs/mise/lib/Varien/Db/Adapter/Pdo/Mysql.php(1974): Varien_Db_Adapter_Pdo_Mysql->query('INSERT INTO `ca...', Array)
#6 /opt/lampp/htdocs/mise/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Eav/Source.php(276): Varien_Db_Adapter_Pdo_Mysql->insertArray('catalog_product...', Array, Array)
#7 /opt/lampp/htdocs/mise/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Eav/Source.php(257): Mage_Catalog_Model_Resource_Product_Indexer_Eav_Source->_saveIndexData(Array)
#8 /opt/lampp/htdocs/mise/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Eav/Source.php(84): Mage_Catalog_Model_Resource_Product_Indexer_Eav_Source->_prepareMultiselectIndex(NULL, NULL)
#9 /opt/lampp/htdocs/mise/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Eav/Abstract.php(50): Mage_Catalog_Model_Resource_Product_Indexer_Eav_Source->_prepareIndex()
#10 /opt/lampp/htdocs/mise/app/code/core/Mage/Catalog/Model/Resource/Product/Indexer/Eav.php(185): Mage_Catalog_Model_Resource_Product_Indexer_Eav_Abstract->reindexAll()
#11 /opt/lampp/htdocs/mise/app/code/core/Mage/Index/Model/Indexer/Abstract.php(143): Mage_Catalog_Model_Resource_Product_Indexer_Eav->reindexAll()
#12 /opt/lampp/htdocs/mise/app/code/core/Mage/Index/Model/Process.php(209): Mage_Index_Model_Indexer_Abstract->reindexAll()
#13 /opt/lampp/htdocs/mise/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll()
#14 /opt/lampp/htdocs/mise/app/code/core/Mage/Index/controllers/Adminhtml/ProcessController.php(124): Mage_Index_Model_Process->reindexEverything()
#15 /opt/lampp/htdocs/mise/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Index_Adminhtml_ProcessController->reindexProcessAction()
#16 /opt/lampp/htdocs/mise/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('reindexProcess')
#17 /opt/lampp/htdocs/mise/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#18 /opt/lampp/htdocs/mise/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#19 /opt/lampp/htdocs/mise/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#20 /opt/lampp/htdocs/mise/index.php(87): Mage::run('', 'store')
#21 {main} 
```

产品导入文件仅包含 2 列 sku 和属性值

我也尝试使用自定义 php 代码手动导入。同样的错误……！！！

我认为 '185-154-1-843' 中的 185 是产品 ID。所以我去了管理员，只是保存了产品和解决该产品的错误，但它显示另一个产品的重复条目。:(

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:47:02.220

为我工作：

尝试在管理员中删除产品`id 185`并再次导入，如下所示：

`Exception message: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '185-154-1-843' for key 'PRIMARY'`

这意味着存在重复的产品 ID。

继续删除错误ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-29T11:11:13.447

我有同样的问题。除了删除产品之外，您还可以执行其他操作：

我们通过编辑属性来解决这个问题，该属性是一个多选，在这个值数组中，我们有 2 倍的相同值！

> 如果它发生在其他人身上，只需查看属性的值，通过删除 double 值合并兄弟姐妹，它可能会解决您的问题。

在我的情况下，我们可以通过选择我们的产品 id（错误重复条目中的第一个值）并查看提及的属性（错误的第二个值）来看到这一点

# sugarcrm - 在 Sugarcrm 的电子邮件模板中添加自定义/相关字段

> ID：13723332
> 
> 赞同：1
> 
> 时间：2012-12-05T12:32:30.913
> 
> 标签：sugarcrm

我创建了一个名为调查的自定义模块，它将与目标建立多对多的关系。我需要在向目标发送活动邮件时插入调查名称。

目前，我设法按照在电子邮件模板[中的插入变量下拉列表中添加自定义模块](http://forums.sugarcrm.com/f3/adding-custom-module-insert-variable-dropdownlist-email-template-50158/)的指南，在插入变量中填充调查模块实体，但问题是它永远不会解析调查名称并在发送的电子邮件中显示 $survey_name。

任何帮助/指导来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:37:42.160

我刚刚在那个论坛上添加了答案。SugarCrm EmailTemplate 模块基本上是很多代码来让少数 bean 工作（帐户、联系人、潜在客户、用户、前景），我通过这些步骤得到了一些与其他 bean 一起工作的模板，此代码基于 SugarCrm 6.0.2，论坛上的类模块/Email.php 详细信息：

1）让Email.php创建自己的bean。示例：LOC510

```
if (... $_REQUEST['parent_type'] == 'Prospects' || TRUE) 
```

2) 创建一个替换字段数组。示例：LOC521

```
 foreach($bean->field_defs as $key => $field_def) {
    $replace_fields ['$'.strtolower(get_class($bean).'_'.$field_def['name'])] 
    = $bean->$field_def['name'];
    //example of fieldnames: $bug_name, $bug_type, $case_date_created, $case_name, etc...
  } 
```

3）替换html模板上的字段。示例：LOC545

```
$this->description_html = str_replace(array_keys($replace_fields), $replace_fields, $this->description_html); 
```

3）替换txt模板上的字段。示例：LOC549

```
$this->description = str_replace(array_keys($replace_fields), $replace_fields, $this->description); 
```

# c++ - 基指针 C++ 派生类的类型

> ID：13723340
> 
> 赞同：2
> 
> 时间：2012-12-05T12:32:57.500
> 
> 标签：c++, templates, inheritance, polymorphism, typedef

这是场景：

```
class Base {
public:
  typedef Base type;
};

class Derived: public Base {
public:
  typedef Derived type;
}; 
```

我想要类似的东西：

```
int main() {
  Base * bs = new Derived();

  decltype(*bs)::type newvar;
} 
```

如何在不使用静态/动态转换的情况下执行上述操作来获取 Derived 类的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:23:11.210

在您的代码中，`*bs`实际上有两种类型：静态类型，即声明它的类型，即`Base`. 另一种类型是动态类型，在您的情况下，它是它实际指向的对象的类型`Derived`。静态类型是编译时唯一已知的类型，并且不能更改。TMP、普通函数调用和所有模板内容都发生在编译时，因此也只有静态类型适用于这些。

使用动态类型的*唯一*方法是向编译器明确说明，这意味着调用虚函数或使用`dynamic_cast`.

你说你想要“类似”你展示的代码——你想用它来完成什么？我很确定答案将是“如果您想根据动态类型做事，请使用虚函数”，因为`dynamic_cast`通常不是一个真正的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:41:08.183

不，你不能那样做。

C++ 是静态类型语言，这意味着必须在编译时确定类型。
在示例`bs`中不知道它指向的对象类型。
请参阅下面的场景以使其更清晰：

```
Base * bs = (bool)? new Base() : new Derived(); 
```

你必须依靠`virtual`机制或`dynamic_cast`实现你的最终目的。

# jquery - 需要一个关于 jquery.chosen 中一个奇怪指令的解释

> ID：13723348
> 
> 赞同：3
> 
> 时间：2012-12-05T12:33:09.797
> 
> 标签：jquery, jquery-chosen

我正在尝试通过 Harveshq 调整一点 jquery.chosen （当我遇到这一行时，我正在轻轻地编辑他的插件

```
searchText = this.search_field.val() === this.default_text ? "" : $('<div/>').text($.trim(this.search_field.val())).html(); 
```

我无法弄清楚它的最后一部分在做什么

```
$('<div/>') 
```

对我来说没有意义。

我认为这是一种转换或保护在 search_field 中输入的字符的方法，但之前没有找到类似的东西。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:37:25.683

```
$('<div/>') 
```

创建一个不属于文档的新 div。

```
$('<div/>').text(
  $.trim(this.search_field.val())
).html() 
```

将新 div 的内容作为文本设置为搜索字段值，然后将其作为 HTML 读取。这有效地对值进行 HTML 转义。`$.trim`仅从搜索字符串的末尾删除空格。

继续：

```
this.search_field.val() === this.default_text ? "" : ... 
```

如果搜索字段值是默认文本，则将使用空字符串，否则将使用所述 HTML 转义搜索字符串。

```
searchText = ... 
```

只需将其分配给变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:37:42.293

`$('<div/>')`只需创建一个新`<div></div>`元素，harvestq 然后填充搜索查询，留下：

```
<div>Your search Query</div> 
```

[您可以在文档](http://api.jquery.com/jQuery/#jQuery2)中阅读有关 jQuery 元素创建的信息

# selenium - Selenium 网格：MaxSessions 与 MaxInstances

> ID：13723349
> 
> 赞同：66
> 
> 时间：2012-12-05T12:33:13.300
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我想知道是否有人可以对一个`Selenium`让我们有些头疼的问题有所了解。

我们对Selenium Grid 的含义`MaxSession`感到困惑。`MaxInstances`我们认为`MaxSession`是可以在单个节点上运行的测试会话的总数。我们还认为`MaxInstances`是测试可以打开的浏览器总数。

还是`MaxInstances`节点可用的浏览器总数？

**我们使用的命令是：**

```
java -Xrs -jar selenium-server.jar -role node -port 44506 -hub http://localhost:44500
/grid/register -firefoxProfileTemplate SeleniumProfile -timeout 300000 -browser 
"browserName=firefox,maxInstances=10,platform=ANY,seleniumProtocol=WebDriver" -browser 
"browserName=chrome,maxInstances=10,platform=ANY,seleniumProtocol=WebDriver" 
```

我们认为我们使用节点（上图）的方式是默认 5 个并发测试会话。

**每个测试是否有 20 个可用的浏览器？**

**或者每个测试会话是否与其他测试会话共享池中的 20 个浏览器（10 chrome/10 FF）？**

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-12-05T13:00:14.943

好问题..我会说这有点令人困惑..但会尝试用简单的术语来回答..

***MaxInstances***这表示....有多少相同版本的浏览器实例可以在远程系统上运行。

```
For example, i have a FF12,IE and i declared the command as follows
-browser browserName=firefox,version=12,maxInstances=5,platform=LINUX
-browser browserName=InternetExplorer,version=9.0,maxInstances=5,platform=LINUX 
```

所以我可以在远程机器上同时运行 5 个 Firefox 12 实例和 5 个 IE9 实例。因此，总用户可以并行运行 10 个不同浏览器（FF12 和 IE9）的实例。

***MaxSession***这表示....有多少浏览器（*任何浏览器和任何版本*）可以在远程系统中一次并行运行。因此，这会覆盖 Max Instances 设置，并且可以限制可以并行运行的浏览器实例的数量。

```
For above example, when maxSession=1 forces that you never have more than 1 browser running. 

With maxSession=2 you can have 2 Firefox tests at the same time, or 1 Internet Explorer and 1 Firefox test). 
```

***无论您定义了什么 MaxInstances。***

有关更清晰的信息，请访问 - [https://seleniumhq.github.io/docs/grid.html](https://seleniumhq.github.io/docs/grid.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-18T13:22:06.573

为了扩展[Anuragh27crony 的答案](https://stackoverflow.com/a/13723831/5884126)，我绘制了一个快速图表：

[![在此处输入图像描述](../Images/6e19e8c23c7b84cee4f870c46299ea82.png)](https://i.stack.imgur.com/birv3.png)

如果这是您的节点配置，那么您最多可以并行执行 5 个测试，例如以下组合：

*   3 * 铬，2 * 火狐
*   2 * 铬，2 * 火狐，1 * 边缘
*   5 * 边缘
*   3 * 铬

以下组合是不可能的：

*   4 * chrome（超过 Chrome maxInstances）
*   6 * 边缘（超过 maxSessions）
*   3 * chrome，3 * firefox（超过 maxSessions）

正如 Anuragh 所说，MaxInstances 适用于特定的浏览器，而 MaxSessions 适用于整个节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-14T12:54:19.620

[根据默认情况下配置节点](https://github.com/SeleniumHQ/selenium/wiki/Grid2#configuring-the-nodes)中的文档，启动*Selenium 网格节点*允许同时使用 11 个浏览器：

*   5 火狐
*   5 铬
*   1 互联网浏览器

默认情况下，最大并发测试数设置为 5。要更改此设置和其他浏览器设置，您可以将参数传递给每个`-browser`开关（每个开关代表一个基于您的参数的节点）。如果使用该`-browser`参数，默认浏览器将被忽略，仅使用您指定的命令行。

* * *

## 最大实例数

[maxInstances](https://github.com/SeleniumHQ/selenium/wiki/Grid2#optional-parameters)是一个可选参数，可以通过`-browser`可选参数传递。

## 用例 1

要为**20个***Firefox version=XYZ*实例配置*Selenium Grid 节点*，您可以使用以下解决方案：

 ****   命令：

    ```
    java -Dwebdriver.gecko.driver=geckodriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://192.168.1.125:4444/grid/register -browser browserName=firefox,version=X.Y.Z,maxInstances=20,platform=WINDOWS 
    ```

*   节点控制台日志：

    ```
    C:\Utility\SeleniumGrid>java -Dwebdriver.gecko.driver=geckodriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://192.168.1.125:4444/grid/register -browser browserName=firefox,version=X.Y.Z,maxInstances=20,platform=WINDOWS
    16:54:11.843 INFO [GridLauncherV3.parse] - Selenium server version: 3.141.59, revision: e82be7d358
    16:54:12.003 INFO [GridLauncherV3.lambda$buildLaunchers$7] - Launching a Selenium Grid node on port 6318
    2020-02-14 16:54:12.523:INFO::main: Logging initialized @1022ms to org.seleniumhq.jetty9.util.log.StdErrLog
    16:54:12.860 INFO [WebDriverServlet.<init>] - Initialising WebDriverServlet
    16:54:12.974 INFO [SeleniumServer.boot] - Selenium Server is up and running on port 6318
    16:54:12.974 INFO [GridLauncherV3.lambda$buildLaunchers$7] - Selenium Grid nodeis up and ready to register to the hub
    16:54:13.161 INFO [SelfRegisteringRemote$1.run] - Starting auto registration thread. Will try to register every 5000 ms.
    16:54:13.765 INFO [SelfRegisteringRemote.registerToHub] - Registering the node to the hub: http://192.168.1.125:4444/grid/register
    16:54:13.962 INFO [SelfRegisteringRemote.registerToHub] - The node is registered to the hub and ready to use 
    ```

*   网格控制台快照：

[![GidNodeFirefox20](../Images/e53f46688110f5830c40f1dcd8f3c075.png)](https://i.stack.imgur.com/AIJNU.png)

## 用例 2

*要为Firefox 版本=ABC*的**10**个实例 和*Chrome 版本=XYZ的***20 个**实例配置*Selenium 网格节点*，您可以使用以下解决方案：

 *******   命令：

    ```
    java -Dwebdriver.gecko.driver=geckodriver.exe -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://192.168.1.125:4444/grid/register -browser browserName=firefox,version=X.Y.Z,maxInstances=10,platform=WINDOWS -browser browserName=chrome,version=X.Y.Z,maxInstances=20,platform=WINDOWS 
    ```

*   网格控制台快照：

[![GidNodeFirefox10Chrome20](../Images/8b9531393985832e747005ce51dc1b19.png)](https://i.stack.imgur.com/IU9O8.png)

* * *

## -maxSession

[-maxSession](https://github.com/SeleniumHQ/selenium/wiki/Grid2#optional-parameters)也是一个可选参数，可以作为主要参数传递，以配置可以在特定节点上并行运行的浏览上下文的最大数量。这`maxInstance`与支持的浏览器不同（例如：对于支持 Firefox 版本 ABC、Firefox 版本 PQR 和 Chrome 版本 XYZ 的节点，**maxSession=1**将确保您运行的浏览器永远不会超过 1 个。`maxSession=2`您可以进行 2 个 Firefox 测试同时执行，或 1 个 Firefox 和 1 个 Chrome 测试）。

例子：

```
java -Dwebdriver.gecko.driver=geckodriver.exe -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://192.168.1.125:4444/grid/register -browser "browserName=firefox,version=A.B.C,maxInstances=10,platform=WINDOWS" -browser "browserName=firefox,version=P.Q.R,maxInstances=10,platform=WINDOWS" -browser "browserName=chrome,version=X.Y.Z,maxInstances=20,platform=WINDOWS" -maxSession 2 
```

*   网格控制台快照：

[![最大会话](../Images/0cad1d21d523db7fd4d3c520d743ebf0.png)](https://i.stack.imgur.com/wPmCy.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-09T05:43:19.443

`MaxInstances`：这为每个节点提供更多插槽，例如，`MaxInstances=5`每个节点最多允许 5 个浏览器

`MaxSession`: 设置一个节点可以同时运行的最大测试数量。如果`MaxInstances=5`，则 MaxSession 也应该至少为 5。

[在https://github.com/SeleniumHQ/docker-selenium](https://github.com/SeleniumHQ/docker-selenium)上查看更多信息*********

# c# - 如何在 C# 中实现 IRandomAccessStream？

> ID：13723354
> 
> 赞同：7
> 
> 时间：2012-12-05T12:33:34.877
> 
> 标签：c#, streaming, windows-runtime

我想`IRandomAccessStream`在 C# 中实现一个实例（它将返回实时生成的数据）。流实际上不需要可写或可搜索，但我想在`ReadAsync`方法中返回我自己的数据（实际上是 的一部分`IInputStream`）。

```
public IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
{
    throw new NotImplementedException("To be done");
} 
```

我的两个主要问题是：

1.  我如何返回实现的东西`IAsyncOperationWithProgress`？框架中是否有任何内容可以帮助解决这个问题？
2.  如何将数据写入缓冲区？`IBuffer`只有`Length`和`Capacity`属性（具体的 Buffer 类也不再提供）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:59:24.627

[How to Convert byte Array to IRandomAccessStream](http://canbilgin.wordpress.com/2012/06/06/how-to-convert-byte-array-to-irandomaccessstream/)

I've found this blog article, hopefully this realization of `IRandomAccessStream` can be a starting point for you.

```
class MemoryRandomAccessStream : IRandomAccessStream
{
    private Stream m_InternalStream;

    public MemoryRandomAccessStream(Stream stream)
    {
        this.m_InternalStream = stream;
    }

    public MemoryRandomAccessStream(byte[] bytes)
    {
        this.m_InternalStream = new MemoryStream(bytes);
    }

    public IInputStream GetInputStreamAt(ulong position)
    {
        this.m_InternalStream.Seek((long)position, SeekOrigin.Begin);

        return this.m_InternalStream.AsInputStream();
    }

    public IOutputStream GetOutputStreamAt(ulong position)
    {
        this.m_InternalStream.Seek((long)position, SeekOrigin.Begin);

        return this.m_InternalStream.AsOutputStream();
    }

    public ulong Size
    {
        get { return (ulong)this.m_InternalStream.Length; }
        set { this.m_InternalStream.SetLength((long)value); }
    }

    public bool CanRead
    {
        get { return true; }
    }

    public bool CanWrite
    {
        get { return true; }
    }

    public IRandomAccessStream CloneStream()
    {
        throw new NotSupportedException();
    }

    public ulong Position
    {
        get { return (ulong)this.m_InternalStream.Position; }
    }

    public void Seek(ulong position)
    {
        this.m_InternalStream.Seek((long)position, 0);
    }

    public void Dispose()
    {
        this.m_InternalStream.Dispose();
    }

    public Windows.Foundation.IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
    {
        var inputStream = this.GetInputStreamAt(0);
        return inputStream.ReadAsync(buffer, count, options);
    }

    public Windows.Foundation.IAsyncOperation<bool> FlushAsync()
    {
        var outputStream = this.GetOutputStreamAt(0);
        return outputStream.FlushAsync();
    }

    public Windows.Foundation.IAsyncOperationWithProgress<uint, uint> WriteAsync(IBuffer buffer)
    {
        var outputStream = this.GetOutputStreamAt(0);
        return outputStream.WriteAsync(buffer);
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T20:06:59.390

1.  使用`AsyncInfo.Run(Func<CancellationToken, IProgress<uint>, Task<IBuffer>>)`方法从委托创建 IAsyncOperationWithProgress 实例。

    ```
    public IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
    {    
        if (buffer == null) throw new ArgumentNullException("buffer");

        Func<CancellationToken, IProgress<uint>, Task<IBuffer>> taskProvider =
        (token, progress) => ReadBytesAsync(buffer, count, token, progress, options);

        return AsyncInfo.Run(taskProvider);
    }

    private async Task<IBuffer> ReadBytesAsync(IBuffer buffer, uint count, CancellationToken token, IProgress<uint> progress, InputStreamOptions options)
    {
    ... Fill the buffer here. Report the progress.
        return buffer;
    } 
    ```

2.  通常您不需要直接访问缓冲区数据。但如果您需要在 c# 中执行此操作，您可以使用 System.Runtime.InteropServices.WindowsRuntime.WindowsRuntimeBufferExtensions 类将数据复制到缓冲区/从缓冲区复制数据。

# wcf - 在一个客户端方法中调用两个异步 WCF 服务方法并在该方法中等待直到调用返回？

> ID：13723356
> 
> 赞同：1
> 
> 时间：2012-12-05T12:33:40.440
> 
> 标签：wcf, asynchronous, .net-4.0

我需要从我们从客户端使用的 WCF 服务中调用两个操作。理想情况下，这两个操作将同时调用，因为它们都需要几秒钟才能完成。一旦两个电话都完成了，我想继续我在客户端的工作。我有点坚持实现这一点的最佳模型是什么。任何帮助或代码示例将不胜感激。

另外：我可以在客户端上以相同的方法调用 WCF 服务中的方法，然后在此方法中等待调用完成吗？（在等待这两个操作返回期间，客户端没有其他任何事情发生，因此我可以在启动异步调用的同一方法中等待。）

使用 .NET 4.0 / VS 2010 和 Visual Basic。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:58:09.490

您可能需要考虑您希望“控制”坐在哪里。例如，您可以让客户端进行两次调用，每个调用执行一个功能，或者您可以让客户端进行一次调用并在服务器上进行两次调用。

这方面的指南将是您希望这两个操作的紧密程度。他们会永远一起被处决吗？如果您的客户有时可能只想执行其中一个操作，那么为了灵活性，有两个 wcf 调用是有意义的。因此，客户几乎可以进行“pick'n'mix”。

如果您认为客户端是进行这两个调用的合适位置，Background Workers 可能会为您提供帮助。

无论哪种方式，从事情的声音来看，您将需要编写一些代码，等待两件事完成。我过去使用的一种方法是使用系统事件。查看方法[WaitHandle.WaitAll](http://msdn.microsoft.com/en-us/library/cc190839%28v=vs.95%29.aspx)以了解可供您使用的功能类型。这些是非常防弹的野兽，并且独立于 wcf 之类的东西，然后的缺点是它们确实占用资源，所以如果你最终会得到很多（几十个）你可能需要重新考虑。但是两个不会有问题。

# php - Facebook PHP SDK (v.3.2.1) Line Brake Problems，同时发布事件

> ID：13723364
> 
> 赞同：0
> 
> 时间：2012-12-05T12:34:14.423
> 
> 标签：php, facebook, sdk, line-breaks

我一直在使用 Facebook PHP SDK (v.3.2.1) 在粉丝页面上发布活动。但是我在数组字段中通过线闸时遇到了一些麻烦，尤其是在描述字段中。

由于该事件必须保存在 mysql 上用于网站目的，我正在使用 \n 但它似乎失败了

```
$return = $facebook->api('/PAGE/events', 'POST', array(
            'name' => $_POST['title'],
            'description' => $_POST['description'],
            'location' => $_POST['location'],
            'start_time' =>  $_POST['year'].'-'.$_POST['month'].'-'.$_POST['day'].'T'.$_POST['hour'].':'.$_POST['minute'].':00-0800',
            'privacy_type' => 'SECRET'
         )); 
```

但是`\n`打印在事件上，我尝试了**nl2br**字符串，但再次`<br>`打印在 fb 事件上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:39:39.820

您在第 1 行缺少数组。试试这个

```
$return = $facebook->api('/PAGE/events/', 'POST', array(
            'name' => $_POST['title'],
            'description' => $_POST['description'],
            'location' => $_POST['location'],
            'start_time' =>  $_POST['year'].'-'.$_POST['month'].'-'.$_POST['day'].'T'.$_POST['hour'].':'.$_POST['minute'].':00-0800',
            'privacy_type' => 'SECRET'
         )); 
```

# resharper - ReSharper 帮助：可能的 NullReferenceException

> ID：13723365
> 
> 赞同：1
> 
> 时间：2012-12-05T12:34:15.750
> 
> 标签：resharper, nullreferenceexception

ReSharper 在我访问时说“检查 'UserHostAddress' 是否不为空” `HttpContext.Current.Request.UserHostAddress`（它位于 try/catch 块中）。

在另一个方法中，从请求对象中获取以下属性：

`HttpContext.Current.Request.RawUrl`

ReSharper 如何确定或“知道” Request 不可能`null`？或者`Current`？或者`HttpContext`？

也许这是这个框架对象链的一个坏例子，但我认为你明白了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:58:27.907

R# 使用其包含的[外部注释](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__External_Annotations.html)为 .NET Framework 中的类型（如您提到的 ASP.NET 类）提供这些代码注释。

例如，Jetbrains 注释为`HttpContext.Current`可为空的原因是在控制台应用程序（没有 HTTP 上下文的应用程序）中`HttpContext.Current`返回`null`.

# solr - 如何在 linux 上将 apache nutch 与 apache solr 集成？

> ID：13723368
> 
> 赞同：1
> 
> 时间：2012-12-05T12:34:26.483
> 
> 标签：solr, glassfish, nutch

我正在使用 glassfish 服务器和 eclips IDE。我已经下载了 apache solr 并配置成 glassfish。现在我坚持 nutch 与 solr 的集成。

当我对这些概念不熟悉时，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:02:29.117

[NutchTutorial](http://wiki.apache.org/nutch/NutchTutorial)涵盖了配置 Nutch 和 Solr 集成的分步说明

# java - concurrentHashMap 的片段以检索对象或在不存在时创建它（作为原子操作）

> ID：13723372
> 
> 赞同：2
> 
> 时间：2012-12-05T12:34:51.913
> 
> 标签：java, java.util.concurrent, concurrent-programming

在Java中，我想做这样的事情：

```
 Object r = map.get(t);
   if (r == null) {
      r = create(); // creating r is an expensive operation.
      map.put(t, r);  
   } 
```

现在该代码片段可以在多线程环境中执行。 `map`可以是 ConcurrentHashMap。

但是我如何使这个逻辑原子化呢？

请不要给我像“同步”块这样的琐碎解决方案。我希望这个问题可以一劳永逸地解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:43:18.687

[Guava](https://guava-libraries.googlecode.com/)巧妙地解决了这个问题。

使用[和](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheLoader.html)[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html)调用。[`build`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html#build%28com.google.common.cache.CacheLoader%29)_ 这将返回一个对象。如果你真的需要一个实现，你可以调用.[`CacheLoader`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheLoader.html)[`LoadingCache`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/LoadingCache.html)`Map`[`asMap()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/LoadingCache.html#asMap%28%29)

也有较旧[`MapMaker`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/MapMaker.html)的[`makeComputingMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/MapMaker.html#makeComputingMap%28com.google.common.base.Function%29)，但不推荐使用这种`CacheBuilder`方法。

当然，您也可以手动实现它，但正确地做到这一点并非易事。需要考虑的几个方面是：

*   您想避免`create`使用相同的输入调用两次
*   您想等待当前线程完成创建，但不想使用空闲循环执行此操作
*   你想避免在好的情况下同步（即元素已经在地图中）。
*   如果两个`create`呼叫同时发生，您希望每个呼叫者只等待与他相关的呼叫。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T12:26:10.890

尝试

```
 value = concurentMap.get(key);
    if(value == null) {
        map.putIfAbsent(key, new Value());
        value = map.get(key);
    }
    return value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-03T13:36:23.440

从 Java 8 开始，`ConcurrentMap.computeIfAbsent`您正在寻找方法：相当于此映射的以下步骤，但是是原子的：

```
 V oldValue = map.get(key);
 if (oldValue == null) {
     V newValue = mappingFunction.apply(key);
     if (newValue != null) {
         return map.putIfAbsent(key, newValue);
     } else {
         return null;
     }
 } else {
     return oldValue;
 } 
```

最常见的用法是构造一个新对象作为初始映射值或记忆结果，我认为这就是您要查找的内容，如下所示：

```
 Value v = map.computeIfAbsent(key, k -> new Value(f(k))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:52:07.020

我知道这可能不是你要找的，但为了争论，我会把它包括在内。

```
public Object ensureExistsInMap(Map map, Object t) {

    Object r = map.get(t);
    if (r != null) return r; // we know for sure it exists

    synchronized (creationLock) {
        // multiple threads might have come this far if r was null
        // outside the synchronized block
        r = map.get(t); 
        if (r != null) return r;

        r = create();
        map.put(t, r);

        return r;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:58:05.540

您所描述的基本上是具有延迟初始化的多[音模式](http://en.wikipedia.org/wiki/Multiton_pattern#Java)

这是一个使用现代 Java 锁的双重锁定的示例

```
private static Map<Object, Object> instances = new ConcurrentHashMap<Object, Object>();
private static Lock createLock = new ReentrantLock();

private Multitone() {}

public static Object getInstance(Object key) {
    Object instance = instances.get(key);
    if (instance == null) {
        createLock.lock();
        try {
            if (instance == null) {
                instance = createInstance();
                instances.put(key, instance);
            }
        } finally {
            createLock.unlock();
        }
    }
    return instance;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T13:54:33.417

我认为解决方案在实践中以并发记录。诀窍是使用 Future 而不是 R 作为地图中的对象。

虽然我不喜欢这个答案，因为它看起来太复杂了。

这是代码：

```
public class Memorizer<A, V> implements Computable<A, V> {
    private final ConcurrentMap<A, Future<V>> cache = new ConcurrentHashMap<A, Future<V>>();
    private final Computable<A, V> c;
    public Memorizer(Computable<A, V> c) { this.c = c; }

    public V compute(final A arg) throws InterruptedException {
       while (true) {
          Future<V> f = cache.get(arg);
          if (f == null) {
          Callable<V> eval = new Callable<V>() {
              public V call() throws InterruptedException {
              return c.compute(arg);
          }
       };
       FutureTask<V> ft = new FutureTask<V>(eval);
       f = cache.putIfAbsent(arg, ft);
       if (f == null) { f = ft; ft.run(); }

       try {
          return f.get();
       } catch (CancellationException e) {
          cache.remove(arg, f);
       } catch (ExecutionException e) {
          throw launderThrowable(e.getCause());
       }
    }
} 
```

# ios - AudioConverter 包数错误

> ID：13723384
> 
> 赞同：0
> 
> 时间：2012-12-05T12:35:44.033
> 
> 标签：ios, core-audio, audio-converter

我已经设置了一个类来将音频从一种格式转换为另一种给定的输入和输出`AudioStreamBasicDescription`。`AudioUnitRender`当我将线性 PCM 从麦克风转换为 iLBC 时，当我从该函数中给它 1024 个数据包时，它可以工作并给我 6 个数据包。然后我通过 UDP 将这 226 个字节发送到在不同设备上运行的同一个应用程序。问题是，当我使用相同的类转换回线性 PCM 以提供音频单元输入时，该`AudioConverterFillComplexBuffer`函数不会提供 1024 个数据包，而是提供 960 ... 这意味着音频单元输入需要 4096 个字节（立体声为 2048 x 2）但我只能给它 3190 左右，所以听起来真的很脆而且失真......

如果我给`AudioConverter`1024 个 LinearPCM 数据包，转换为 iLBC，再转换回 LinearPCM，我肯定应该再次获得 1024 个数据包吗？

**音频转换器功能：**

```
-(void) doConvert {

    // Start converting
    if (converting) return;
    converting = YES;

    while (true) {

        // Get next buffer
        id bfr = [buffers getNextBuffer];
        if (!bfr) {
            converting = NO;
            return;
        }

        // Get info
        NSArray* bfrs = ([bfr isKindOfClass:[NSArray class]] ? bfr : @[bfr]);
        int bfrSize = 0;
        for (NSData* dat in bfrs) bfrSize += dat.length;

        int inputPackets = bfrSize / self.inputFormat.mBytesPerPacket;
        int outputPackets = (inputPackets * self.inputFormat.mFramesPerPacket) / self.outputFormat.mFramesPerPacket;

        // Create output buffer
        AudioBufferList* bufferList = (AudioBufferList*) malloc(sizeof(AudioBufferList) * self.outputFormat.mChannelsPerFrame);
        bufferList -> mNumberBuffers = self.outputFormat.mChannelsPerFrame;
        for (int i = 0 ; i < self.outputFormat.mChannelsPerFrame ; i++) {
            bufferList -> mBuffers[i].mNumberChannels = 1;
            bufferList -> mBuffers[i].mDataByteSize = 4*1024;
            bufferList -> mBuffers[i].mData = malloc(bufferList -> mBuffers[i].mDataByteSize);
        }

        // Create input buffer
        AudioBufferList* inputBufferList = (AudioBufferList*) malloc(sizeof(AudioBufferList) * bfrs.count);
        inputBufferList -> mNumberBuffers = bfrs.count;
        for (int i = 0 ; i < bfrs.count ; i++) {
            inputBufferList -> mBuffers[i].mNumberChannels = 1;
            inputBufferList -> mBuffers[i].mDataByteSize = [[bfrs objectAtIndex:i] length];
            inputBufferList -> mBuffers[i].mData = (void*) [[bfrs objectAtIndex:i] bytes];
        }

        // Create sound data payload
        struct SoundDataPayload payload;
        payload.data = inputBufferList;
        payload.numPackets = inputPackets;
        payload.packetDescriptions = NULL;
        payload.used = NO;

        // Convert data
        UInt32 numPackets = outputPackets;
        OSStatus err = AudioConverterFillComplexBuffer(converter, acvConverterComplexInput, &payload, &numPackets, bufferList, NULL);
        if (err)
            continue;

        // Check how to output
        if (bufferList -> mNumberBuffers > 1) {

            // Output as array
            NSMutableArray* array = [NSMutableArray arrayWithCapacity:bufferList -> mNumberBuffers];
            for (int i = 0 ; i < bufferList -> mNumberBuffers ; i++)
                [array addObject:[NSData dataWithBytes:bufferList -> mBuffers[i].mData length:bufferList -> mBuffers[i].mDataByteSize]];

            // Save
            [convertedBuffers addBuffer:array];

        } else {

            // Output as data
            NSData* newData = [NSData dataWithBytes:bufferList -> mBuffers[0].mData length:bufferList -> mBuffers[0].mDataByteSize];

            // Save
            [convertedBuffers addBuffer:newData];

        }

        // Free memory
        for (int i = 0 ; i < bufferList -> mNumberBuffers ; i++)
            free(bufferList -> mBuffers[i].mData);

        free(inputBufferList);
        free(bufferList);

        // Tell delegate
        if (self.convertHandler)
            //dispatch_async(dispatch_get_main_queue(), self.convertHandler);
            self.convertHandler();

    }

} 
```

**转换为 iLBC 时的格式：**

```
// Get input format from mic
UInt32 size = sizeof(AudioStreamBasicDescription);
AudioStreamBasicDescription inputDesc;
AudioUnitGetProperty(self.ioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 1, &inputDesc, &size);

// Set output stream description
size = sizeof(AudioStreamBasicDescription);
AudioStreamBasicDescription outputDescription;
memset(&outputDescription, 0, size);
outputDescription.mFormatID         = kAudioFormatiLBC;
OSStatus err = AudioFormatGetProperty(kAudioFormatProperty_FormatInfo, 0, NULL, &size, &outputDescription); 
```

**从 iLBC 转换时的格式：**

```
// Set input stream description
size = sizeof(AudioStreamBasicDescription);
AudioStreamBasicDescription inputDescription;
memset(&inputDescription, 0, size);
inputDescription.mFormatID        = kAudioFormatiLBC;
AudioFormatGetProperty(kAudioFormatProperty_FormatInfo, 0, NULL, &size, &inputDescription);

// Set output stream description
UInt32 size = sizeof(AudioStreamBasicDescription);
AudioStreamBasicDescription outputDesc;
AudioUnitGetProperty(unit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &outputDesc, &size); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:36:48.633

您必须使用中间缓冲区从足够多的传入数据包中保存足够的字节，以完全匹配音频单元输入请求的数量。依赖于任何一个压缩格式的 UDP 数据包来完全正确的大小是行不通的。

AudioConverter 可以缓冲样本并根据压缩格式更改数据包大小。

# javascript - 如果 ( ..) 不执行 setTimeout() 如何命令

> ID：13723391
> 
> 赞同：0
> 
> 时间：2012-12-05T12:35:52.020
> 
> 标签：javascript, jquery

这个[Demo](http://jsfiddle.net/58PKb/1/)，登陆页面后会显示`btn2`（绿色区域），然后用户有2个选项：

1\. 用户什么都不做 - `setTimeout()`
2\. 用户悬停到`btn2`- 显示`btn3`（蓝色）。
我停留在 2\. 后悬停`btn2`并`btn3`显示。`btn1`（红色）仍然淡入淡出怎么取消呢？

任何建议将不胜感激。

```
<div class="btn btn1"></div>
<div class="btn btn2"></div>
<div class="btn btn3"></div>
.btn{
width: 200px;
position: absolute;
}
.btn1{
background-color: red;
height: 100px;
width: 100px;
}
.btn2{
background-color: green;
height: 200px;
opacity: 0.3;
display: none;
}
.btn3{
background-color: blue;
height: 200px;
opacity: 0.3;
display: none;
} 
```

jQuery

```
$(function(){
function navctr(){
    //landing
    $('.btn1').hide();
    $('.btn2').show();
    setTimeout(function(){
        $('.btn2').fadeOut(50);
        $('.btn1').fadeIn(50);
    }, 2250);
    //after click
    $('.btn1').click(function(){
        $('.btn1').fadeOut(100);
        $('.btn2').delay(100).fadeIn(50);
    });
    //both
    $('.btn2').hover(function(){
        $('.btn2').hide();
        $('.btn3').fadeIn(100);
    });
    $('.btn3').mouseleave(function(){
        $('.btn3').fadeOut(50);
        $('.btn1').fadeIn(100);
    });
};
navctr();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:37:12.700

使用方法`clearTimeout()`：[documentation](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)它将删除先前在您的文档上设置的超时。

使用您的代码，它将是这样的：

```
$(function(){
function navctr(){
    var myTimeout;
    //landing
    $('.btn1').hide();
    $('.btn2').show();
    myTimeout = setTimeout(function(){
        $('.btn2').fadeOut(50);
        $('.btn1').fadeIn(50);
    }, 2250);
    //after click
    $('.btn1').click(function(){
        $('.btn1').fadeOut(100);
        $('.btn2').delay(100).fadeIn(50);
    });
    //both
    $('.btn2').hover(function(){
        $('.btn2').hide();
        $('.btn3').fadeIn(100);
        clearTimeout(myTimeout); // remove the setTimeout
    });
    $('.btn3').mouseleave(function(){
        $('.btn3').fadeOut(50);
        $('.btn1').fadeIn(100);
    });
};
navctr();
}); 
```

# jquery - init 函数在插件中是如何工作的？

> ID：13723395
> 
> 赞同：0
> 
> 时间：2012-12-05T12:36:14.700
> 
> 标签：jquery

抱歉，如果这是一个基本问题，但我似乎对 JQuery 中的插件如何工作存在误解，而 Google 并没有多大帮助。

想象一下我有：

```
methods = {
    init : function(opts){

        options = $.extend(options, opts);

        return this.each(function(){
            data = $(this).data('prodigal');

            if(!data){

                if(options.isActive === false){
                    $(options.tpl.overlay).css({ 'opacity': options.overlay.opacity }).appendTo('body');
                    options.isActive = true;
                }
            }
        });
    }
}; 
```

Now`options.isActive`是一个布尔值`true`or`false`来表示是否`options.tpl.overlay`应该将选项添加到`body`文档中。它确保我`options.tpl.overlay`只向文档附加一次并且它可以工作，但我不确定它是如何工作的。

当我打电话时：

```
$('.view_title_images').prodigal();
$('.glglg').prodigal(); 
```

它仍然只添加一次。我总是被引导相信插件已经形成，并且每次“调用”都会调用 init 函数，即`$('.view_title_images,.glglg').prodigal();`会形成并调用该`init`函数一次。

那么该`init`函数究竟是如何在 JQuery 插件中运行的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:53:41.247

不确定这是这里发生的事情，但请注意，无论`$(this)`是在回调函数内部还是外部，这[都不是同一个对象。](http://remysharp.com/2007/04/12/jquerys-this-demystified/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:19:42.667

我看到这种行为是因为该插件实际上是在第一次作为 jQuery 插件框架中的静态对象运行时实例化的。

所以每次连续调用该`init`函数都会调用这个全局对象。由于`options`对象是静态对象中对该对象的引用，因此每次更改布尔值实际上都会保存以供将来调用插件。

# joomla - 当设置为仅出现在选定的菜单中时，模块内的 joomla 模块不会出现

> ID：13723397
> 
> 赞同：0
> 
> 时间：2012-12-05T12:36:17.957
> 
> 标签：joomla, joomla1.5

我有一个自定义模块，它设置为显示在所有菜单中。在这个模块中，我使用下面的代码加载了一个名为“leftcenter”的新模块位置。

```
<?php 
$ad_module = &JModuleHelper::getModules( 'leftcenter' );
foreach ($ad_module as $ad_loader) {
    $_options = array( 'style' => 'xhtml');
    echo JModuleHelper::renderModule( $ad_loader);
    }
?> 
```

当设置为在所有菜单中查看时，我可以查看分配给此位置的模块，但在设置为仅在选定菜单中显示时根本不出现。有人可以帮助我了解为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:00:08.623

尝试这个

```
 jimport('joomla.application.module.helper');
    $mods = JModuleHelper::getModules('product_page');
    echo JModuleHelper::renderModule($mods[0]); 
```

您还应该从模块管理器中正确分配菜单的模块。这就是为什么你没有得到一些菜单。如果您的第二个模块仅出现在此模块中，那么您将第二个模块启用到所有菜单。我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:41:37.327

您可以通过将这行代码放入您的模块中来简单地做到这一点。

```
<jdoc:include type="modules" name="leftcenter" /> 
```

您将获得该模块内分配给该特定位置的所有模块。

# list - 计算 Scheme 中列表中的数字或字符

> ID：13723402
> 
> 赞同：1
> 
> 时间：2012-12-05T12:36:34.077
> 
> 标签：list, lisp, scheme, counting

有谁知道如何计算列表中的所有数字或字符并以这种格式成对打印：（number.number_of_occurrences）。例如：

> （计数'（3 1 3 2 1 2 3 3 3））
> 
> ((3 . 5) (1 . 2) (2 . 2))
> 
> （计数'（dbacbba））
> 
> ((d . 1) (b . 3) (a . 2) (c . 1))

提前感谢您帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:45:23.990

这是一个想法 - 使用哈希表来跟踪出现次数。这是一个`O(n)`程序：

```
(define (counter lst)
  (let ((counts (make-hash)))
    (let loop ((lst lst))
      (cond ((null? lst)
             (hash->list counts))
            (else
             (hash-update! counts (car lst) add1
                           (lambda () 0))
             (loop (cdr lst))))))) 
```

或者，这是一个更简单的版本（它不使用`filter`）@mobyte 在 Scheme 中的解决方案 - 请注意，这`O(n^2)`比基于哈希表的过程效率低：

```
(define (counter lst)
  (map (lambda (e)
         (cons e (count (curry equal? e) lst)))
       (remove-duplicates lst))) 
```

无论哪种方式，它都按预期工作：

```
(counter '(3 1 3 2 1 2 3 3 3))
=> '((3 . 5) (2 . 2) (1 . 2))

(counter '(d b a c b b a))
=> '((b . 3) (a . 2) (d . 1) (c . 1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:06:09.737

这是clojure中的解决方案。但我希望它会有所帮助：

```
(defn counter [l]
  (map (fn [e]
         [e (count (filter #{e} l))])
       (distinct l)))

(counter [3 1 3 2 1 2 3 3 3])
-> ([3 5] [1 2] [2 2])

(counter '(d b a c b b a))
-> ([d 1] [b 3] [a 2] [c 1]) 
```

# c++ - 关于数组的困惑

> ID：13723403
> 
> 赞同：1
> 
> 时间：2012-12-05T12:36:34.370
> 
> 标签：c++, arrays, multidimensional-array

我有一个这样的数组：

```
int sizes[5] = {1,2,3,4,5}; 
```

我想通过使用上面的数组来拥有 5 个不同的数组。因为我希望我的每个数组的大小为`sizes[i]` **(0 <= i < 5)**。我怎样才能做到这一点？我越想这个，我就越糊涂。我必须使用多维数组还是更简单的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:43:55.193

我在线程中要求 STL！

```
std::vector<int> arrays[5];
for (i = 0; i < 5; ++i)
    arrays[i].resize(sizes[i]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:45:11.867

据我了解您的问题，您需要长度可以在 [0, 5] 范围内的数组数组（长度可变）。

所以有很多选择，我将为您提供其中 2 个：

1.  当您用**C++**标记标记您的问题时，我建议您参考**STL**，它提供了许多方便的容器，其中之一`std::vector`是**动态数组**（它的大小可以变化）。

2.  如果你用**C**填充方便，那么你可以使用一个**指针数组**，每个指针都是数组上的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:41:24.253

很简单，你只需要动态内存分配：

```
int sizes = {1, 2, 3, 4, 5};
int **arrays;
int i;

arrays = new int*[5];
for(i = 0; i < 5; i++)
    arrays[i] = new int[sizes[i]] 
```

这是一个简单的开始，但在现实生活中 STL 库更有用。在这段代码中，内存是动态分配的，但不会被释放。这可能会导致内存泄漏。使用`std::vector`from STL library 将使您免于麻烦，并提供一种更简单的方法。

@Mikhail 在`vector`下面展示了使用 s 的良好演示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T12:41:40.913

要回答这个问题，是的，在最有效的情况下，您确实需要一个多维数组。一个数组数组，而元素是动态分配的（考虑到您指定的数组数量是恒定的）。

```
int *Array[5];
for(int i = 0; i < sizes; i++)
{
    Array[i] = new int[sizes[i]];
} 
```

您现在有 5 个动态分配的数组，大小从 0 到 5。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T12:43:22.100

您必须使用动态分配，如下所示：

```
int *arrays[5];
int i = 0;
int sizes[] = {1,2,3,4,5};
for(i = 0; i < 5; i++)
{
    arrays[i] = (int *)malloc(sizes[i]);
} 
```

# c# - 在检索类的所有属性时跳过 ExtensionData

> ID：13723405
> 
> 赞同：0
> 
> 时间：2012-12-05T12:36:37.650
> 
> 标签：c#, visual-studio-2010, reflection, .net-4.0

我用这样的东西，

```
var propertyinfo = class_simple.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Public)); 
```

我得到了 class_simple 的所有公共属性以及扩展数据。

现在，我如何真正跳过这个扩展数据并通过循环访问 propertyinfo 来使用其他属性？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:43:23.680

假设这`ExtensionData`是您类中的属性名称：

```
var allButExtensionData = propInfos.Where(p => p.Name != "ExtensionData"
          || typeof(DataMemberAttribute).IsAssignableFrom(p.PropertyType));
foreach (var prop in allButExtensionData)
{
   // ...
} 
```

# java - 用命名空间替换 XSLT？

> ID：13723406
> 
> 赞同：1
> 
> 时间：2012-12-05T12:36:41.830
> 
> 标签：java, xml, xslt

如果我有一个带有命名空间的 xml，并且想要应用一些值替换，我需要改变什么？ [http://xslt.online-toolz.com/tools/xslt-transformation.php](http://xslt.online-toolz.com/tools/xslt-transformation.php)

```
<?xml version="1.0"?>
<accounts>
<account>
<name>Alex</name>
</account>
<account>
<name>Fiona</name>
</account>
</accounts> 
```

这会将所有名称值更改为“Johndoe”：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
 </xsl:template>

  <xsl:template match="account/name/text()">
   <xsl:text>JohnDoe</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

但是如果我在非常标签之前有一个命名空间，比如：

```
<?xml version="1.0"?>
<my:accounts>
<my:account>
<my:name>Alex</my:name>
</my:account>
<my:account>
<my:name>Fiona</my:name>
</my:account>
</my:accounts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:52:24.580

有两种方法可以做到这一点。在样式表标签中包含“我的”命名空间，如下所示：

`<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="(insertnamespacehere)">`

做

`<xsl:template match="my:account/my:name/text()"`>

或者更笨拙：

`<xsl:template match="*[local-name()='account']/*[local-name()='name']/text()">`

`employee:name`尽管存在命名空间来区分具有相同本地名称（例如和`company:name`例如）的元素，但我倾向于不鼓励后一种方法，通过使用`local-name()`您忽略该区别。换句话说，如果您的文档恰好包含`foo:account/foo:name`，您也会不小心替换它。

顺便说一句，您的最后一个示例 XML 无效 -`my`未声明命名空间。你的根`my:accounts`需要包括这个`<my:accounts xlmns:my="(insertnamespacehere)">`

# objective-c - UITableView 较低的 alpha 表格，但保持单元格文本不透明

> ID：13723408
> 
> 赞同：2
> 
> 时间：2012-12-05T12:36:53.547
> 
> 标签：objective-c, ios

我希望能够降低 tableview 的背景 alpha，使其稍微透明（所以我可以看到背景），但确保单元格中包含的文本和图像保持不透明。我之前使用的一种解决方法是我将一张桌子放下，将 alpha 降低到 50%，然后在表格顶部而不是表格单元格中添加标签和图像，但这不是一个特别干净的解决方案，特别是如果我需要表格滚动，那么表格将滚动但文本/图像不会。

无论如何我可以在没有便宜的解决方法的情况下实现这一目标吗？还是我提出的唯一可行解决方案是解决方法？

提前致谢！

编辑：附加信息

如果有人遇到同样的问题，请看这里

[低 alpha 视图 - 高 alpha 子视图](https://stackoverflow.com/questions/9592470/view-with-low-alpha-subview-with-high-alpha)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:48:06.880

根据您的表格的复杂性，这可能会有所不同，但在您的 cellForRowAtIndexPath 方法中

您可以设置具有透明度的背景颜色：

```
[cell setBackgroundColor:[UIColor colorWithRed:((float)22 / 255.0f) green:((float)61 / 255.0f) blue:((float)119 / 255.0f) alpha:0.5f]];  //Half transparent 
```

或者您可以将单元格的背景视图设置为图像视图，并将该图像视图的 alpha 值设置为小于 1 的 alpha 值。

# xamarin.ios - CLLocationManager 和 CLGeoCoder

> ID：13723410
> 
> 赞同：0
> 
> 时间：2012-12-05T12:37:02.450
> 
> 标签：xamarin.ios, cllocationmanager, clgeocoder

我想使用实际位置的坐标（CLLocationManager）来反向地理编码（CLGeoCoder）。我有这个代码：

```
 locationMgr = new CLLocationManager();
        locationMgr.DesiredAccuracy = CLLocation.AccuracyNearestTenMeters;
        locationMgr.DistanceFilter = 10;
        locationMgr.UpdatedLocation += (object sender, CLLocationUpdatedEventArgs e) => {
            Task.latitude = e.NewLocation.Coordinate.Latitude;
            Task.longitude = e.NewLocation.Coordinate.Longitude;
            locationMgr.StopUpdatingLocation();
        };

        btnLocation = new UIBarButtonItem(UIImage.FromFile("Icons/no-gps.png"), UIBarButtonItemStyle.Plain, (s,e) => {
            if (CLLocationManager.LocationServicesEnabled) { 
                    locationMgr.StartUpdatingLocation();

                    geoCoder = new CLGeocoder();
                    geoCoder.ReverseGeocodeLocation(new CLLocation(Task.latitude, Task.longitude), (CLPlacemark[] place, NSError error) => {
                        adr = place[0].Name+"\n"+place[0].Locality+"\n"+place[0].Country;
                        Utils.ShowAlert(XmlParse.LocalText("Poloha"), Task.latitude.ToString()+"\n"+Task.longitude.ToString()+"\n\n"+adr);
                    });
            }
            else {
                Utils.ShowAlert(XmlParse.LocalText("PolohVypnut"));
            }
        }); 
```

因为 UpdatedLocation() 需要几秒钟，所以 ReverseGeocodeLocation() 的输入是 Task.latitude=0 和 Task.longitude=0。

如何在 ReverseGoecodeLocation() 之前等待正确的值（Task.latitude、Task.longitude）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:15:54.477

在获取位置之前调用您的地理编码`ReverseGeocodeLocation`器的方法。`CLLocationManager`

调用`StartUpdatingLocation`并不意味着`UpdatedLocation`立即触发事件。此外，如果您在 iOS 6 上，`UpdatedLocation`将永远不会被触发。请改用`LocationsUpdated`事件。

例子：

```
locationManager.LocationsUpdated += (sender, args) => {

    // Last item in the array is the latest location
    CLLocation latestLocation = args.Locations[args.Locations.Length - 1];
    geoCoder = new CLGeocoder();
    geoCoder.ReverseGeocodeLocation(latestLocation, (pl, er) => {

        // Read placemarks here

    });

};
locationManager.StartUpdatingLocation(); 
```

# android - 如何杀死背景音乐。

> ID：13723414
> 
> 赞同：0
> 
> 时间：2012-12-05T12:37:16.200
> 
> 标签：android, android-intent, android-widget

我将创建在后台播放 mp3 文件的音乐播放器。我在我的应用程序中放置了播放暂停停止按钮。一切正常，直到我再次启动我的应用程序。就像我在从我的应用程序播放音乐后再次启动我的应用程序一样。然后这两个文件都将在后台播放。我在用

```
 private MediaPlayer mp = new MediaPlayer(); 
```

因此，每次都会创建一个新对象。如何在开始新文件之前停止我以前播放的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:42:26.813

你可以从[这里](http://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion)做。看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:43:58.453

看一下MediaPlayer的状态图：

[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

当您完成或暂停您的应用程序时，也许您必须 stop() 然后 release() MediaPlayer 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:44:23.400

你有几个选择。

1.  将播放器保存在静态变量中。因此，您仅在第一次启动应用程序时创建播放器播放器。
2.  将播放器作为后台服务运行。这样你就可以通过意图来操纵它。我认为它是首选选项，尽管它更复杂。检查[这个](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)。

# python - Django 说我的语法错误

> ID：13723415
> 
> 赞同：0
> 
> 时间：2012-12-05T12:37:22.540
> 
> 标签：python, django, syntax, module

基本上使用 django 并且它一直告诉我这段代码中存在语法错误：

```
from django.conf.urls import patterns, url

from venues import views

urlpatterns = patterns('',
    url(r'^$', views.index, name = 'index'),

    # ex /venues/3
    url(r'^(?P<venue_id>\d+)/$', views.detail, name='detail'),
    # ex: /venues/3/events
    url(r'^(?P<venue_id>\d+)/events/$', views.events, name='events')
) 
```

具体来说，它似乎告诉我：

```
from venues import views 
```

行不正确。

但是我的场所/views.py 看起来像：

```
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello this is the home page!")

def detail(request, venue_id):
    return HttpResponse("You're looking at Venue %s.", % venue_id)

def events(request, venue_id):
    return HttpResponse("You're looking at events at venue %s.", % venue_id) 
```

所以该文件存在并且似乎运行良好，直到我开始在 urls.py 中使用场地 ID

哦，只是为了衡量我的主要 urls.py 看起来像：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'Comedy.views.home', name='home'),
    # url(r'^Comedy/', include('Comedy.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^venues/', include('venues.urls')),
) 
```

所以我不完全确定问题出在哪里，感谢所有帮助。

非常感谢，我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T12:41:09.963

您的`view.py`文件确实有语法错误：

```
return HttpResponse("You're looking at Venue %s.", % venue_id) 
```

和

```
return HttpResponse("You're looking at events at venue %s.", % venue_id) 
```

在字符串和字符串格式化运算符之间有逗号`%`，这不是合法的 Python 语法。删除运算符前的逗号`%`。

请在将来报告您的 Python 代码问题时始终包含*完整*的Python 回溯，这样我们就不必猜测您的问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:42:32.710

我认为错误在这里：

```
def detail(request, venue_id):
    return HttpResponse("You're looking at Venue %s.", % venue_id)

def events(request, venue_id):
    return HttpResponse("You're looking at events at venue %s.", % venue_id) 
```

您必须删除 %venue_id 之前的逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:59:35.487

代替：

```
def events(request, venue_id):
    return HttpResponse("You're looking at events at venue %s.", % venue_id) 
```

尝试：

```
def events(request, venue_id):
    return HttpResponse("You're looking at events at venue %s.")  % venue_id 
```

# file - java.nio 的 Maven 存储库

> ID：13723421
> 
> 赞同：1
> 
> 时间：2012-12-05T12:37:45.997
> 
> 标签：file, maven, nio, java-7, java-6

我正在用 Java 6 编写一个应用程序（我必须坚持这个）。我需要为文件观察器编写一个模块。

谷歌搜索后，我发现 Java 7 java.nio 包很好。我想单独将此子包导入 maven [我的存储库] 并创建模块。

谁能指导我如何实现这一目标？这些子模块是否有任何maven repo？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:13:20.530

所有的`java.nio`包都是`rt.jar`基本 JRE 的一部分。因此它们不存在于任何其他 Maven 包中，因为它们假定您已经拥有它。

如果您想使用 Java 7 中的 NIO，您可以将全部或部分`rt.jar`作为 Maven 模块打包并部署到您自己的存储库中，但我不推荐这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-29T13:22:40.817

你可以添加这个：

```
compile group: 'com.jtransc', name: 'jtransc-rt', version: '0.3.1' 
```

# c - 为什么这个 0 在 ((type*)0)->C 中的成员？

> ID：13723422
> 
> 赞同：21
> 
> 时间：2012-12-05T12:38:00.563
> 
> 标签：c, kernel

Linux内核中的[`container_of()`](http://lxr.linux.no/#linux+v3.12/include/linux/kernel.h#L792)宏定义为：

```
#define container_of(ptr, type, member) ({ \
        const typeof( ((type*)0)->member) * __mptr =(ptr);\
        (type*)( (char*)__mptr - offsetof(type,member) );}) 
```

为什么这样用`((type*)0)->member`，不行`(type*)->member`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T12:42:39.087

> 为什么这是 ((type*)0)->member，而不是 (type*)->member

仅仅因为`(type*)->member`将是无效的语法，因此`typeof`是不可能的。所以它使用了一个`NULL`指针，它无论如何都不会取消引用——它只是为了`typeof`引用成员而使用。

* * *

这是如何工作的：

*   该`typeof`技巧用于声明成员类型的指针。这个指针被调用者传递的指针初始化

*   从指针的地址中减去该成员在结构中的偏移量：这会产生包含对象的地址

* * *

更微妙的问题：**为什么不摆脱`typeof`**并只做`ptr - offsetof`. 无论如何，我们都在投射它`char *`，对吧？在那种情况下，你可以传递任何东西，`ptr`编译器不会说什么。所以所有`typeof`东西都用于（基本的）类型检查。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T12:43:31.273

因为`type*`是类型而不是结构的有效实例。

指向零的指针用于获取正确的实例，但正如`typeof`在编译时而不是在运行时解析的那样，指针中使用的地址不必是正确或有效的地址。

# sql - SQL 查询按年份加入 2 组结果

> ID：13723423
> 
> 赞同：0
> 
> 时间：2012-12-05T12:38:01.920
> 
> 标签：sql, ssrs-2008

SQL问题：

我有这个查询：

```
SELECT MONTHNAME(date) AS month, Year(getdate()) AS Year, COUNT(*) AS monthly_sales_count
FROM orders
WHERE status = 0
AND YEAR(date) = 2012
GROUP BY month; 
```

这给了我每月 2012 年的结果。

如何在一组数据中添加 2011 年的结果，所以我会得到这样的结果：

```
Month       Year       Monthly_sales_count
december    2012        6576
november    2012        8788
october     2012        7676
september   2012          56
august      2012         345
july        2012        3356
june        2012        6563
may         2012        3245 
april       2012       25234
march       2012         234
february    2012         454
january     2012       24352
december    2011        6576
november    2011        8788
october     2011        7676
september   2011        1313
august      2011        1343
july        2011        2243
june        2011         656
may         2011        3234
april       2011      435345
march       2011       34345
february    2011        2134
january     2011        3412 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:41:51.243

```
SELECT MONTHNAME(date) AS month, Year(date) AS Year, COUNT(*) AS monthly_sales_count
FROM orders
WHERE status = 0
AND YEAR(date) IN (2011, 2012)
GROUP BY month, year
ORDER BY year, month; 
```

虽然我希望让 WHERE 子句成为 sargable （利用索引）

```
SELECT MONTHNAME(date) AS month, Year(date) AS Year, COUNT(*) AS monthly_sales_count
FROM orders
WHERE status = 0
    AND date >= '20110101' AND date < '20130101'
GROUP BY month, year; 
```

**注意：**
您正在做`YEAR(GETDATE())`，而我假设您实际上想要做`YEAR(date)`-如果您是故意的，那么将需要有关确切要求的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:43:01.137

```
SELECT MONTHNAME(date) AS month, Year(getdate()) AS Year, 
                COUNT(*) AS monthly_sales_count
FROM orders
WHERE status = 0
AND YEAR(date) = 2012
GROUP BY month
union
SELECT MONTHNAME(date) AS month, Year(getdate()) AS Year, 
                COUNT(*) AS monthly_sales_count
FROM orders
WHERE status = 0
AND YEAR(date) = 2011
GROUP BY month; 
```

# c# - 是否可以在 C# 的嵌套类中找到（通常）具有 GUID 的对象？

> ID：13723426
> 
> 赞同：0
> 
> 时间：2012-12-05T12:38:18.260
> 
> 标签：c#, asp.net-mvc-3, c#-4.0

我有嵌套类，即

**命令**

```
ID, (GUID = 8e6e48f7-9047-4e2a-95e7-ec4318641fbb)
Date
Orders -> List<OrderItem> 
```

**订单项**

```
ID, (GUID= = 4582234b-d8b5-4665-b00f-e4f09ff3e2c6)
ProductId
Qty
Unit
Price
ID, (GUID= = b0d12322-e92c-42c6-b2b7-520db1d3a818)
ProductId
Qty
Unit
Price 
```

因为我有嵌套并且我使用 GUID 作为我的对象的 ID，所以我想知道是否有通用方法来查找给定 GUID 的对象。一个我有这个对象，然后我可以将它从它的父列表中删除。

顺便说一句，我确实意识到我可以使用特定的 lambda 表达式来获取特定的对象，但这会导致许多不同场景的许多表达式，因此很多人对一种通用方法感兴趣。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:51:59.637

我可能会创建一个接口，我的所有类（或基类）都将实现调用`IGuidSearchable`或类似的东西。它需要设置两个属性，ID`Children`和`List<ISearchable>`. 实现类可以使用它，也可以负责将此属性设置为等于它们使用的属性（如`Orders -> List<OrderItem>`您的示例中所示）。

```
public static IGuidSearchable FindObjectByGuid(this IGuidSearchable source, System.Guid guid) 
{
    if (source.ID.Equals(guid)) 
    {
        return source;
    }
    foreach (ISearchable child in source.Children)
    {
        if (child.FindObjectByGuid(guid) != null)
            return child;            
    }   

    return null; // Fall through    
} 
```

# java - Servicemix - 在 SOAP 1.2 中公开 CXF 端点

> ID：13723430
> 
> 赞同：0
> 
> 时间：2012-12-05T12:38:29.080
> 
> 标签：java, soap, cxf, apache-servicemix, fuseesb

我试图在我的 servicemix（基于 Fuse）的 SOAP 1.2 中公开一个 WS。

我已经在我的蓝图配置文件中声明了 CXF 端点：

```
 <camelcxf:cxfEndpoint id="wsIdentService"
    serviceClass="service.ident.IdentService"
    address="/ws/ident"
    serviceName="ws:IdentService"
    endpointName="ws:IdentEndpoint"
    xmlns:ws="http://company.com/core/ident/0.1/" 
```

我尝试了几种选择：

*   在端点定义中添加 wsdlURL 会导致`org.apache.cxf.service.factory.ServiceConstructionException: Could not find definition for port ...`

*   添加`<camelcxf:binding><soap:soapBinding mtomEnabled="true" version="1.2"/></camelcxf:binding>`导致`NullPointerException at org.apache.aries.blueprint.container.RecipeBuilder.getValue`

有没有人成功地在带有 SOAP 1.2 支持的 servicemix 中公开 CXF 服务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:13:48.190

此功能仅适用于 camel 2.10，因此适用于 servicemix 4.5

# c# - 下拉列表 ASP.NET MVC 不更新模型

> ID：13723431
> 
> 赞同：1
> 
> 时间：2012-12-05T12:38:35.960
> 
> 标签：c#, asp.net-mvc, html-select

我有两个这样的模型类：

程序：

```
public class Program
{
    public int ProgramId { get; set; }

    public string Name { get; set; }

    public virtual Playlist chosenPlaylist { get; set; }

    public virtual IList<Playlist> Playlists { get; set; }
}

public class Playlist
{
    public int PlaylistId { get; set; }

    public string Name { get; set; }

    public int NumberVotes { get; set; }

    public virtual IList<Song> Songs { get; set; }
} 
```

在我的编辑程序视图中，我想更新 s，`chosenPlaylist`以便允许用户选择一个或一个`Program`s `Playlist`。

例如：

方案一：

*   播放列表 1
*   播放列表 2

选择的播放列表：播放列表 1

因此，用户可以编辑并选择无（因此没有播放列表）、1（不会改变任何内容）或 2，然后将其保存到数据库中。

我试图在我的控制器中创建一个下拉列表，但它不会更新。

这是我的 GET 和 POST Edit 中`ActionResult`的内容：

```
ViewBag.chosenId = new SelectList(program.Playlists, "PlaylistId",
"Name", program.chosenPlaylist.PlaylistId); 
```

在我看来：

```
@Html.DropDownList("PlaylistId", (SelectList)ViewBag.chosenId) 
```

这会很好地显示列表并预先选择所选的播放列表，如果有的话（如果没有，我会为它编写代码使其默认为第一个）。如果程序中没有播放列表，那很容易控制。

然而，问题：

*   不更新我的模型。例如，如果选择播放列表 2，而我选择 P1，则在 POST 事件之后继续显示 P2。
*   我想在下拉列表中包含一个选项，以使其不选择任何值（因此，在该字段中放置一个 NULL ）。那可能吗？

没有抛出任何错误，除了最重要的部分——更新数据库之外，一切似乎都正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-27T01:47:44.870

确保没有`@Html.HiddenFor`或类似的渲染相同的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:42:44.033

你可以做两件事：

换成`@Html.DropDownList("PlaylistId", (SelectList)ViewBag.chosenId)`_`@Html.DropDownList("chosenPlaylist.PlaylistId", (SelectList)ViewBag.chosenId)`

或使用`Html.DropDownListFor(m => m.chosenPlaylist.PlaylistId, (SelectList)ViewBag.chosenId))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:02:13.043

使用时：

```
@Html.DropDownList("PlaylistId", (SelectList)ViewBag.chosenId) 
```

您必须将 PlaylistId 选择列表重命名为与存储所选 Id 的属性名称不同的名称，否则它不会被标记为选中。

（现在我输入它是有道理的，你不能将选定的值存储到与选择列表相同的东西中）

基本上说：

```
@Html.DropDownList("MySelectListId", (SelectList)ViewBag.chosenId) 
```

将工作。

您可以在 codeplex 上查看有关此问题的评论以获取更多信息：[http ://aspnet.codeplex.com/workitem/4932](http://aspnet.codeplex.com/workitem/4932)

# android - Mylocation 在 Galaxy tab p1300 中不起作用

> ID：13723435
> 
> 赞同：3
> 
> 时间：2012-12-05T12:38:46.570
> 
> 标签：android, mapactivity, galaxy-tab, mylocationoverlay

这是我的地图活动类。在此应用程序中，mylocation 在 Google Nexus 手机上完美运行，但在 Galaxy Tab P3100 中无法运行。我在运行应用程序之前检查了**wifi 连接**。我启用了 1.**使用 gps 卫星**，2。**位置和谷歌**3.**使用无线网络**

公共类 MyMap 扩展 MapActivity {

```
private MapController mapController;
private MyLocationOverlay myLocation;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.map_view);
    mapController = mapView.getController();

    mapController.setZoom(6);
    mapView.setBuiltInZoomControls(true);

    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);

    myLocation.enableMyLocation();

    myLocation.runOnFirstFix(new Runnable() {
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    myLocation.enableMyLocation();
}

@Override
protected void onPause() {
    super.onPause();
    myLocation.disableMyLocation();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
 } 
```

它返回

```
 Uncaught exception thrown by finalizer
 java.lang.IllegalStateException: Binder has been finalized!
 at android.os.BinderProxy.transact(Native Method)
 at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
 at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
at android.database.CursorWrapper.close(CursorWrapper.java:49)
at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
    at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
at java.lang.Thread.run(Thread.java:856) 
```

请给我一个解决方案..

谢谢。

# c# - 我可以从一个接口转换为具有另一个接口实现的具体类型吗

> ID：13723437
> 
> 赞同：1
> 
> 时间：2012-12-05T12:38:46.653
> 
> 标签：c#, interface

我应该首先说我是一个非常喜欢接口的菜鸟，所以这可能是一个非常愚蠢的问题。如果我的标题不清楚，也很抱歉 - 符合我的心态！

我确实了解接口背后的原理，并且我想在这里使用它们来支持单元测试以及通过 DI 框架在非常混乱且不可测试的遗留代码中解耦。

我有一个名为 IDatHandler 的接口。它有一个名为 Items 的 List<> 属性。具体实现应该返回一个具体类型的 IDatContainer。当然有一些方法，但我把它们排除在外

```
public interface IDatHandler
{
    ....

   List<IDatContainer> Items
    {
        get; set;
    }

} 
```

这是一个具体的实现：

```
public class ADEColorHandler : IDatHandler
    {
      ....

        public List<ADEColor> Items
        {
            get; set;

        }

    }
} 
```

ADEColor 实现 IDatContainer。除非我`ADEColor`用`IDatContainer`.

有没有办法让 Items 作为类型列表返回，`ADEColor`还是我只是违反规则？

我应该说这个应用程序当前使用的是 NET 3.5

**=========>>> 答案 - 谢谢查理！**

IDatHandler 接口

```
public interface IDatHandler<T> where T : IDatContainer
{
    ....

   List<IDatContainer> Items
    {
        get; set;
    }

} 
```

具体类：

```
public class ADEColorHandler : IDatHandler<ADEColor>
        {
          ....

            public List<ADEColor> Items
            {
                get; set;

            }

        }
    } 
```

我针对此列表对 ADEColorHandler Assert 进行单元测试并通过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:41:03.083

你可以走这条路：

```
public interface IDatHandler
{
    // Any common interface stuff
}

public interface IDatHandler<T> : IDatHandler
    where T : IDatContainer
{
    // Any generics
    List<T> Items;
}

public class ADEColorHandler : IDatHandler<ADEColor>
{
  ....

    public List<ADEColor> Items
    {
        get; set;

    }

} 
```

这确实意味着您需要在另一端进行一些转换，因为如果您只是传递`IDatHandler`实例，则需要在查询之前知道泛型类型`Items`

你想达到什么目的？这可能有助于确定您可以使用什么...

或者，您可以在原始接口实现中使用 IEnumerable - 您是否需要在设计时知道集合的具体类型，或者您可以摆脱强制转换吗？

编辑：添加了上面的约束

只是想弄清楚这一点，因为使用上面的界面会在一定程度上起作用，但我的假设是你想循环这些来处理它们等等——我想知道这是否可行（需要检查）

```
List<IDatHandler<IDatContainer>> someList = new List<IDatHandler<IDatContainer>>();
someList.Add((IDatHandler<IDatContainer>)new ADEColorHandler()); 
```

然后你可以枚举列表......只是检查看看这是否有效。

编辑：不，没有工作，因为泛型类型在运行时实际上是不同的。我会弄得一团糟——我喜欢尝试找出泛型可以做什么和不能做什么！

编辑：

好的，所以最好的可能是：

```
 public interface IDatHandler<T> : IDatHandler
        where T : IDatContainer
    {
        List<T> Items { get; set; }
    }

    public class ADEColorHandler : IDatHandler<IDatContainer>
    {
        public List<IDatContainer> Items
        {
            get;
            set;

        }
    } 
```

这意味着您可以执行以下操作：

```
var items = new List<IDatHandler<IDatContainer>>();
items.Add(new ADEColorHandler()); 
```

然后您可以枚举并从中获取并查询`Items`每个。当然，您对具体类型是隐藏的，但我假设您在容器上有一个接口来尝试抽象这些实现细节。这应该没问题`IDatHandler``IDatContainer`

# apache-flex - 自定义flex中的折线图

> ID：13723438
> 
> 赞同：1
> 
> 时间：2012-12-05T12:38:47.417
> 
> 标签：apache-flex, charts

我正在使用 flex 中的折线图。我必须在数据点本身上显示工具提示数据。通常，当我们将鼠标悬停在数据点上时，数据点值会显示在矩形区域上。但我在图表下方有一个复选框。当我检查它时，图表的所有数据点都应该在图表上的数据点上显示值。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:28:06.750

在您的 mx:LineChart 控件中，根据您的复选框将 showAllDataTips 值设置为 true/false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:13:45.367

在做了一些研究后，我找到了答案。我的目标是在数据点本身上绘制一些东西。我发现此链接很有用[~~在图表控件上绘图~~](http://livedocs.adobe.com/flex/3/html/help.html?content=charts_eventsandeffects_13.html#298038)编辑：[新链接](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7c44.html) 浏览此链接对我有很大帮助。

# iphone - 如何使用来自 NSNumberFormatter 的方法“decimalSeparator”

> ID：13723440
> 
> 赞同：2
> 
> 时间：2012-12-05T12:38:50.610
> 
> 标签：iphone, ios

在我的应用程序中，我尝试检查用户是否根据本地设置输入正确的小数点分隔符（如果用户出错，该数据不会进入 CoreData 数据库）：

```
- (void)save {
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSLocale *locale = [NSLocale currentLocale]; 
```

我得到用户输入：

```
NSString *firstForDistance = _forDistanceTextField.text; 
```

尝试从字符串中提取小数点分隔符：

```
NSString *separator = [firstForDistance decimalSeparator]; 
```

而不是检查分隔符是否适合用户本地设置或他输入错误。如果出现拼写错误或错误，我将其替换为本地设置中的小数分隔符：

```
if (separator != [locale objectForKey:NSLocaleDecimalSeparator]) {
    firstForDistance = [firstForDistance stringByReplacingOccurrencesOfString:separator withString:[locale objectForKey: NSLocaleDecimalSeparator]];
} 
```

其余代码：

```
self.user.forDistance = [numberFormatter numberFromString:firstForDistance];

[self.delegate usersMakeViewController:self addUser:self.user];
} 
```

那会很好很容易，但是提取不起作用：

```
NSString *separator = [firstForDistance decimalSeparator]; 
```

方法“decimalSeparator”是 NSNumberFormatter 的实例方法，我从 Xcode 得到错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:55:48.690

**您可以检查下面的字符串是否有小数分隔符**

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numberFormatter setLocale:[NSLocale currentLocale]];
    if ([textField.text rangeOfString:numberFormatter.decimalSeparator].location != NSNotFound) 
        NSLog(@"YES,  Give number has decimalSeparator");
    else
        NSLog(@"NO, dont have decimalSeparator"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T19:31:29.287

像这样修复它：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSLocale *locale = [NSLocale currentLocale];
NSString *firstForDistance = _forDistanceTextField.text;

firstForDistance = [firstForDistance stringByReplacingOccurrencesOfString:@"." withString:[locale objectForKey: NSLocaleDecimalSeparator]];
firstForDistance = [firstForDistance stringByReplacingOccurrencesOfString:@"," withString:[locale objectForKey: NSLocaleDecimalSeparator]];

self.user.forDistance = [numberFormatter numberFromString:firstForDistance];
[self.delegate usersMakeViewController:self addUser:self.user]; 
```

希望这可以帮助某人。

# ruby-on-rails - 使用 geo_polygon 过滤器在轮胎/弹性搜索中获取位于用户定义多边形内的所有属性

> ID：13723444
> 
> 赞同：3
> 
> 时间：2012-12-05T12:39:14.310
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我正在开发一个使用 ElasticSearch 和轮胎的项目。我的网页上有一个谷歌地图。当用户在地图上绘制多边形时，我想获取所有属性，这些属性必须通过轮胎的弹性搜索来获取。我已经获得了多边形坐标现在我想在（tire.serach 块见下文）中编写一个查询，该查询将过滤多边形区域内的所有属性。我的数据库的属性表有经度和纬度列。我可以通过使用 Postgis 适配器来做到这一点，但我需要知道将在轮胎/弹性搜索中执行此操作的查询语法。

```
def self.search(params={}) 

tire.search(load: true, page: params[:page], per_page: 50) do |search|

  syntax of the filter query that will fetch all properties within user defined polygon area..??? 

end 
end 
```

谢谢阿泰克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:49:41.677

就像是：

```
Tire.search 'venues' do
  query do
    filtered do
      query { all }
      filter :geo_polygon, location: { points: [
                                        {lat: 40, lon -70},
                                        {lat: 30, lon -80},
                                        {lat: 20, lon -90}
                                       ]
                                      }
    end
  end
end 
```

示例改编自 Elasticsearch 关于[**Geo Polygon Filter**](http://www.elasticsearch.org/guide/reference/query-dsl/geo-polygon-filter.html)的文档。

# css - 3个跨度到一排，每个在不同宽度的线上购买

> ID：13723445
> 
> 赞同：3
> 
> 时间：2012-12-05T12:39:20.423
> 
> 标签：css, css-float, html

我试图在一行中有 3 个跨度。左侧跨度为固定宽度。右跨度是向右浮动，也是固定宽度。中间跨度是消耗两个跨度之间的空间。这 3 个跨度是从数据库中提取的，因此每个字段中都会有多行不同的值，除了第三个跨度，它将作为删除按钮提供服务。我已经尽了一切努力让它们排成一行，并且到目前为止通过使左侧显示成功：inline-block 和 float:left，右侧：float:right display:inline-block，但中间没有想要扩展以填充两个跨度之间的中间空间，即使在将其更改为 display:block 之后也是如此。

一些帮助将不胜感激！

```
/*Left Span*/
.word_native{
float: left;
clear: left;
margin-top: 7px;
height:22px;
line-height:22px;
margin-left: 10px;
margin-right: 10px;
}

/*Middle Span*/
.word_foreign{
margin-top: 6px;
height:22px;
height:22px;
line-height:22px;
line-height:22px;
display:inline-block;
}
*/

/*Right Span*/

float: right;
clear: right;
margin-top: 6px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:56:18.027

似乎您正在做的事情对于表格来说是完美的，那么为什么不使用 html 表格呢？

```
<table>
    <tr>
        <td class="word_native">native</td>
        <td class="word_foreign">foreign</td>
        <td class="del">del btn</td>
    </tr>
    <tr>
        <td class="word_native">native</td>
        <td class="word_foreign">foreign</td>
        <td class="del">del btn</td>
    </tr>
    ...
</table> 
```

然后可以通过 CSS 将第三列设置为固定宽度。

# javascript - 内联复选框 ajax/jquery 更改弹出窗口中的数字

> ID：13723448
> 
> 赞同：0
> 
> 时间：2012-12-05T12:39:26.870
> 
> 标签：javascript, jquery, ajax, jquery-ui

> **可能重复：**
> [内联复选框ajax修改数字](https://stackoverflow.com/questions/13642810/inline-check-box-ajax-modify-a-number)

例如，我有一个这样的 html：

```
<li>
    <label class="desc">
        <font color="green">
            Want to get email ($<span id="price">50</span>/month)
        </font>
    </label>
    <input type="checkbox" checked="" id="subscribe" name="subscribe"> bla bla bla
</li>

<li>
    <label class="desc">-$30 subscribe</label>
    <input type="checkbox"  id="custom_test" name="custom_test">Please check this to add your own email
</li> 
```

结构：

[复选框] 订阅（50 美元/月）文本 bla bla

[另一个复选框] 提供 -30 美元添加自己的电子邮件）

所以基本上我有一个要订阅的复选框，其中包含该订阅的价格，并且在该复选框下，如果您选中该复选框，它应该在上面的订阅中编辑内联价格 -30$ 如果检查，如果不保持不变。

我如何使用 Ajax 或某种 JQuery/JS 函数来执行此操作，以根据该跨度的 ID 与**POPUP**中的第二个复选框的 ID 进行在线编辑？

[JSfiddle](http://jsfiddle.net/kkfJF/)

另请查看此解决方案无效：

[斯莱文解决方案](http://jsfiddle.net/kkfJF/29/)

[分流器解决方案](http://jsfiddle.net/spliter/kkfJF/32/)

**jQuery版本：1.6.2**

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:50:33.527

我会将价格存储在`data`属性中。这样您就可以计算要在`change`复选框的处理程序中显示的值：

```
$('#custom_test').change(function(){
    if($(this).is(':checked')){
        $('#price').text($('#price').data('price') - 30);
    }else{
        $('#price').text($('#price').data('price'));
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/kkfJF/40/](http://jsfiddle.net/kkfJF/40/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:49:42.913

```
$(function(){
    $('#custom_test').change(function(){
        if($(this).is(':checked')) 
            $('span#price').html('20');
        else
            $('span#price').html('50');
    });
}); 
```

# android - SpeechRecognizer 未检测到果冻豆上的语音结束

> ID：13723453
> 
> 赞同：0
> 
> 时间：2012-12-05T12:39:41.780
> 
> 标签：android, speech-recognition, android-4.2-jelly-bean

我`SpeechRecognizer`直接使用，我已经实现了 custom `RecognitionListener`。语音识别在除**jelly bean**之外的 android 上运行良好。果冻豆识别器无法检测到语音结束。

我的代码如下

```
 speechRecognizer = SpeechRecognizer.createSpeechRecognizer(getApplicationContext());
speechRecognizer.setRecognitionListener(new CustomListener());  
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,
                    "com.somemodule");
intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 5);
speechRecognizer.startListening(intent); 
```

我错过了什么？我发现还有一个人在[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/pD-HTG-VOlM)报告了这个问题，但没有人提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:25:02.860

我注意到，SpeechRecognizer 在某些网络上不起作用。就我而言，当我尝试通过 Intranet 访问互联网但在 3G 网络/公共互联网上工作时，它从未工作过。

内网同样内置语音搜索失败

# android - ICS TimePicker 滑块具有奇怪的透视样式

> ID：13723455
> 
> 赞同：1
> 
> 时间：2012-12-05T12:39:46.653
> 
> 标签：android, timepicker, theming

我在 android 中遇到了一种非常奇怪的行为，`TimePicker`其中滑块看起来是透明的。

下面是两张图片：

1.  当页面上的列表为空时。可以看到，底部 TimePicker 中的滑块是透明的。
2.  填充列表时。这更糟。列表的内容以 180 度的角度反射到滑块的透明部分。

![空列表](../Images/467f8efb778e850b721084acc67cfc5c.png)

![填充列表](../Images/9b744bcde6ac83d630355ef9403b6f27.png)

这非常令人沮丧。到目前为止，我不知道这是怎么回事。我还附上了我的视图的 xml 以供参考。我使用的主题是未修改的`Theme.Sherlock.`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <RelativeLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignLeft="@+id/date_picker"
            >
        <ListView
                android:layout_height="fill_parent"
                android:layout_width="fill_parent"
                android:layout_alignParentTop="true"
                android:id="@+id/availabilityListView"
                android:layout_above="@+id/add_more"/>

        <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/suggest_more_time"
                android:id="@+id/add_more"
                android:layout_gravity="center"
                android:layout_alignParentBottom="true"
                />

    </RelativeLayout>

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/date_picker"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:id="@+id/suggestion_overlay">

        <DatePicker
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@+id/date_picker"
                android:layout_weight="1"/>
        <TimePicker
                android:id="@+id/time_picker"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:longClickable="false"/>

        <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/add_suggestion"
                android:id="@+id/suggest_button"/>

    </LinearLayout>

</RelativeLayout> 
```

# django - django 谷歌地图

> ID：13723456
> 
> 赞同：4
> 
> 时间：2012-12-05T12:40:00.157
> 
> 标签：django, django-models, django-admin

我是 Django 的新手。我的模型中需要谷歌地图。1.我尝试使用 django-google-maps.my models.py 是：

```
from django.db import models
from django_google_maps import fields as map_fields

class Rental(models.Model):
    address = map_fields.AddressField(max_length=200)
    geolocation = map_fields.GeoLocationField(max_length=200) 
```

和我的 admin.py：

```
from django.contrib import admin
from django_google_maps import widgets as map_widgets
from django_google_maps import fields as map_fields
from .models import Rental

class RentalAdmin(admin.ModelAdmin):
    formfield_overrides = {
        map_fields.AddressField: {'widget': map_widgets.GoogleMapsAddressWidget},
    }
admin.site.register(Rental, RentalAdmin) 
```

但是当我在管理界面中单击地图时，该字段仍然是空的。我使用本指南安装它[https://github.com/madisona/django-google-maps](https://github.com/madisona/django-google-maps)

2.我尝试通过本指南[http://pypi.python.org/pypi/django-easy-maps](http://pypi.python.org/pypi/django-easy-maps)使用easy-map，但在管理界面中看不到地址预览。我的 admin.py 是：

```
from django import forms
from django.contrib import admin
from easy_maps.widgets import AddressWithMapWidget
from .models import Address

class AddressAdmin(admin.ModelAdmin):
    class form(forms.ModelForm):
        class Meta:
            widgets = {
                'address': AddressWithMapWidget({'class': 'vTextField'})
            }

admin.site.register(Address, AddressAdmin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-11T21:21:19.650

您可能在 settings.py 中缺少 Google API 密钥

GOOGLE_MAPS_API_KEY = '你的钥匙在这里'

[从https://code.google.com/apis/console](https://code.google.com/apis/console)生成您的 Google Maps Javascript API 。

# android - 使用操作栏夏洛克时如何在底部有标签？

> ID：13723457
> 
> 赞同：2
> 
> 时间：2012-12-05T12:40:00.000
> 
> 标签：android, tabs, actionbarsherlock

我正在开发一个使用[ActionbarSherLock](http://actionbarsherlock.com/)的应用程序。

根据要求，我希望标签位于底部，但默认情况下标签显示在顶部。

如何在底部设置选项卡...

# android - 在列表视图上回收位图会导致问题

> ID：13723458
> 
> 赞同：4
> 
> 时间：2012-12-05T12:40:02.317
> 
> 标签：android, listview, bitmap, row, recycle

我有一个列表视图，我在其中显示图像，这些图像被下载并正确缓存。当我向下滚动列表并加载新项目时，我想回收最近最少使用的项目以节省内存。我已经成功实现了 LRU 映射，并且我在屏幕上不可见的位图上调用了回收。以下是部分代码：

imageView 是一个 ViewGroup

```
public void recycleImage(int res) {
    if (imageView != null) {
        imageView.setBackgroundDrawable(null);
        if (res > 0)
            imageView.setBackgroundResource(res);
    }

    if (bitmap != null && !bitmap.isRecycled()) {
        bitmap.recycle();

        Log.i(TAG, "Bitmap recycled");
    }
} 
```

这些值保存在适配器的 getView 方法中。问题是，当我回收图像时，我可以看到屏幕上可见的图像也丢失了（注意，我只回收我知道不在屏幕上的图像）。

当我在列表视图上回收其他人的位图时，有谁知道为什么我会丢失当前显示的图像？

这是我访问存储的位图或下载它的地方。

```
 if (mImageMap.containsKey(url)) { 
       ImageCacheModel cache = mImageMap.get(url); 
       return cache.getBitmap(); 
   } else if (cacheManager.isUrlCached(url)) { 
       mImageMap.put(url, new ImageCacheModel(imageView, cacheManager.getCachedBitmapOrNull(url, 2)));

        ImageCacheModel cache = mImageMap.get(url);
        return cache.getBitmap();
    } else {
        cacheManager.addUrlToQueue(url, this, true);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:11:31.977

您必须记住，您的（列表元素）`ImageView`内部`convertView`一直在重复使用。简而言之，您不会在`convertView`每次出现新视图时都创建一个新视图`ListView`，实际上您只是重用了最后一个滚动出来的元素。

因此，在您的情况下，假设您有一个列表，其中随时可见 3 个项目。当您清除第 1 项时，您也清除第 4 项和第 7 项等。

我无法指出这个问题对您造成影响的确切点，但根据您的描述，我几乎可以肯定这就是问题所在。

# java - 如何解析这个日期？

> ID：13723459
> 
> 赞同：-5
> 
> 时间：2012-12-05T12:40:01.733
> 
> 标签：java, android, parsing, date

我想用Java解析以下日期，

```
2012-11-29T09:15:00.002-08:00 
```

我必须使用哪种日期格式来解析它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:41:41.833

[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)会解析它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:42:03.800

实际上，这种格式是一种 XSD 日期格式，解析它的最简单方法（不使用任何外部库）是[`DataTypeConverter.parseDateTime(String lexicalXSDDateTime)`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseDateTime%28java.lang.String%29)在`javax.xml.bind package`. 这将返回一个`java.util.Calendar`对象，您可以检索一个`Date`using `Calendar.getTime()`。

或者，在 SO 上有一些解决方案涉及相同的格式，例如：在 Java 中解析 XML dateTime 的最佳方法是什么？ [在此处输入链接描述](https://stackoverflow.com/questions/909022/whats-the-best-way-to-parse-an-xml-datetime-in-java)。

我希望这有帮助。

~~使用日期格式作为`"yyyy-MM-dd'T'HH:mm:ss.SSSz"`~~

例如：

```
String string = "2012-11-29T09:15:00.002-08:00";
Date date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssSSSz", Locale.ENGLISH).parse(string);
System.out.println(date); 
```

# php - 对大型 MySQL 表进行排序和分页

> ID：13723466
> 
> 赞同：1
> 
> 时间：2012-12-05T12:40:30.490
> 
> 标签：php, mysql, database, pagination, sphinx

我有一个非常大的 MySQL 表（3 亿行，12 列）。

我希望我的用户能够在这些列 ASC 和 DESC 之一上对整个表进行排序。然后我的 PHP/HTML 代码应该向用户显示前 10 个结果，然后用户应该能够进一步分页。

如您所知，如果不进行任何优化，这将需要非常非常长的时间。

我目前正在使用 Sphinx，这大大加快了这个过程。但它仍然不够快。

我的数据库数据每月只更改一次。

为了提高性能，您有什么建议？如果您能给我建议如何优化 Sphinx，那就太好了。

但是欢迎任何建议，我不必为此使用 Sphinx。

谢谢！乔尔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T14:37:42.750

只需使用[标准分页](http://www.youtube.com/watch?v=wd4fE5fk-fk)。

# ruby-on-rails - unicorn/rails 零停机重启

> ID：13723469
> 
> 赞同：0
> 
> 时间：2012-12-05T12:40:44.550
> 
> 标签：ruby-on-rails, unicorn

在我们的部署脚本中，我们使用以下代码片段重新启动独角兽：

```
desc "Zero downtime restart of Unicorn"
task :restart do
  run "kill -s USR2 unicorn_pid"
end 
```

主进程分叉，启动新工作人员，然后杀死旧工作人员。但现在似乎新主人杀死了旧主人并在新孩子完全启动*之前接管了任何新连接。*`preload_app false`由于我们使用新工作人员禁用了应用程序的预加载，因此启动大约需要 30 - 60 秒。在此期间，新连接/网站挂起。如何避免这种情况，所以只有在新的子节点完全启动并准备好服务器请求时才让新的主节点接管？:)

更新：

我的 unicorn.rb 看起来像这样：

```
# name of application
application = "myapp"

# environment specific stuff
case ENV["RAILS_ENV"]
when "integration", "staging"
  worker_processes 1
when "production"
  worker_processes 4
else
  raise "Invalid runtime environment '#{ENV["RAILS_ENV"]}'"
end

# set directories
base_dir = "/srv/#{application}/current"
shared_path = "/srv/#{application}/shared"
working_directory base_dir

# maximum runtime of requests
timeout 300

# multiple listen directives are allowed
listen "#{shared_path}/unicorn.sock", :backlog => 64

# location of pid file
pid "#{shared_path}/pids/unicorn.pid"

# location of log files
stdout_path "#{shared_path}/log/unicorn.log"
stderr_path "#{shared_path}/log/unicorn.err"

# combine REE with "preload_app true" for memory savings
# http://rubyenterpriseedition.com/faq.html#adapt_apps_for_cow
preload_app false
if GC.respond_to?(:copy_on_write_friendly=)
  GC.copy_on_write_friendly = true
end

before_exec do |server|
  # see http://unicorn.bogomips.org/Sandbox.html
  ENV["BUNDLE_GEMFILE"] = "#{base_dir}/Gemfile"
end

before_fork do |server, worker|
  # the following is highly recomended for "preload_app true"
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end
  if defined?(Sequel::Model)
    Sequel::DATABASES.each{ |db| db.disconnect }
  end

  # This allows a new master process to incrementally
  # phase out the old master process with SIGTTOU to avoid a
  # thundering herd (especially in the "preload_app false" case)
  # when doing a transparent upgrade. The last worker spawned
  # will then kill off the old master process with a SIGQUIT.
  old_pid = "#{server.config[:pid]}.oldbin"
  if old_pid != server.pid
    begin
      sig = (worker.nr + 1) >= server.worker_processes ? :QUIT : :TTOU
      Process.kill(sig, File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end
end 
```

我认为主要问题是没有`child_ready`钩子。和`before_fork`被`after_hook`称为“为时过早”。我想我可以在钩子中添加一些逻辑`after_fork`来以某种方式检测孩子何时准备好......但我希望有一个更简单的解决方案？:)

# php - 如何在一个表单提交中将多封电子邮件存储到数据库中？

> ID：13723470
> 
> 赞同：0
> 
> 时间：2012-12-05T12:40:48.697
> 
> 标签：php, html, forms

我正在构建一个系统，允许组织成员将他们收到的时事通讯推荐给他们的朋友或家人。我想做的是给这些成员一个页面，让他们可以将那个人的姓名和电子邮件地址添加到表单中。此表单将限制为 5 个电子邮件名称和电子邮件地址，因此您实际上将有五行，每行两个 HTML 表单输入。

我的问题是我不知道如何可靠地将其添加到数据库中？我需要 5 个单独的表单，然后通过一个表单提交按钮提交吗？

**编辑**
我现在有两张桌子。`member`一桌`referral`一桌。当成员开始推荐过程时，他们的数据被添加到`member`表中，然后他们的 ID 被获取。

该`member`表由以下字段组成：

```
ID
Firstname
Surname
Email
Referrer 
```

当会员添加他们自己的详细信息时，我会获取他们的 ID 并将其存储起来以备后用。

然后，我想要一个看起来像这样的表单：

```
Referral 1:  their email address   -  their name
Referral 2:  their email address   -  their name
Referral 3:  their email address   -  their name
Referral 4:  their email address   -  their name
Referral 5:  their email address   -  their name 
```

这样我就可以将他们的信息添加到`referral`表中，看起来像这样将添加所有数据：

```
ID   |   Firstname   |   Surname   |   Email            |   Referrer
==========================================================================
1    |   Joe         |   Bloggs    | joe@bloggs.com     |    1
2    |   John        |   Bloggs    | john@bloggs.com    |    1
3    |   James       |   Bloggs    | james@bloggs.com   |    1
4    |   Jordan      |   Bloggs    | jordan@bloggs.com  |    1
5    |   Jack        |   Bloggs    | jack@bloggs.com    |    1 
```

这才是最终产品应该的样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:57:13.377

you just need one form and then the user id of the person who is logged in.

```
<?php
if (!empty($_POST))
{
    for($i = 1; $i < 6; $i++)
    {
        mysql_query("INSERT INTO tbl (name, email, referrer) VALUES ('" . $_POST[name . $i] . "', '" . $_POST[email . $i] . "', '" . $_SESSION[user_id] . "')");
    }
}
?>
<html>
<head></head>
    <body>
        <form action="<?= $_SERVER['REQUEST_URI'] ?>" method="post">
            <?php
                for($i = 1; $i < 6; $i++)
                {
                    echo '<p>';
                    echo 'Name ' . $i;
                    echo '<input type="text" name="name' . $i . '" id="name' . $i . '">';
                    echo 'Email ' . $i;
                    echo '<input type="text" name="email' . $i . '" id="email' . $i . '">';
                    echo '</p>';
                }
            ?>
            <input type="submit" value="save">
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:46:11.387

您可以在注册时为所有具有不同名称的人提供额外的电子邮件地址，例如 guest_email_1、guest_email_2 等等。

然后在数据库方面，您可以向该用户记录添加一些新字段以添加这些电子邮件地址，或者您可以创建一个用于存储这些访客电子邮件的新表。在此表中，您可以获得注册他们的人的 ID，以便在需要时参考该电子邮件地址的来源。

那是你要找的吗？

**编辑**我认为您可能正在寻找一种方法来获取刚刚添加的用户的 ID。因此，假设用户登顶表单并将他们添加到数据库表中，但现在我们必须将他们的 ID 以及电子邮件地址添加到另一个表中。如果这是正确的并且您使用的是 mysqli 则有一个函数`mysqli_insert_id`这是它的手册：

```
[mysqli_inser_id - manual][1] 
```

此功能将获取添加到数据库的最后一个 ID，然后您可以使用它来存储具有原始用户 ID 的其他电子邮件地址。

那个？

# rest - 在哪里可以找到与每个 vmc 命令对应的 REST url 和 json 结构？

> ID：13723471
> 
> 赞同：0
> 
> 时间：2012-12-05T12:40:49.260
> 
> 标签：rest, cloud-foundry

我正在尝试使用 CloudFOundry REST 调用来创建应用程序、绑定服务等，而不是使用 vmc 或 eclipse 插件。我知道我们可以为此使用 vcap-java-client，但我也想测试直接调用 REST 服务，例如使用 cUrl 实用程序。在哪里可以找到与每个 vmc 命令对应的 REST url 和 json 结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:19:25.163

查看对云控制器的实际 rest 调用的最佳方法是执行 vmc 命令并添加 -t。例如：

```
vmc apps -t 
```

因此，这个 vmc 命令将向您显示您的应用程序列表，因此您从附加的 -t 中得到的是更详细的信息，它显示了您正在调用的云控制器服务。在这种情况下，它将是 /apps

底部的相同命令将为您提供从上述 vmc 命令获得的确切输出：

```
curl -H "Authorization: <Your-Oauth-token>" https://api.cloudfoundry.com/apps 
```

授权令牌也可以在 -t 生成的输出中找到。您需要复制整个授权“承载”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T06:06:33.603

苏迪普塔，

当您登录并运行 vmc apps -t 时，您应该会看到以下输出：

```
Getting applications.  >>>
REQUEST: GET /apps
REQUEST_HEADERS:
  accept : application/json
  user-agent : Ruby
  authorization : bearer <token>
content-length : 0 
```

REQUEST_HEADERS 中的**授权**是您需要使用的。

# python - 为什么我接近“INTEGER”：语法错误？

> ID：13723472
> 
> 赞同：-4
> 
> 时间：2012-12-05T12:40:54.897
> 
> 标签：python, sql, database, syntax-error

在某个函数中，我正在数据库中创建一个表，但是对于这段代码：

```
cur.execute('CREATE TABLE count(value1 TEXT, value2 INTEGER') 
```

我收到“接近“整数”：语法错误”。知道是什么导致了问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:43:14.207

你没有完成你的 SQL 语法，你错过了一个右括号。

```
cur.execute('CREATE TABLE count(value1 TEXT, value2 INTEGER)') 
                                                           ^ 
```

# three.js - 使用变形目标时光线相交不起作用

> ID：13723473
> 
> 赞同：6
> 
> 时间：2012-12-05T12:40:56.217
> 
> 标签：three.js

有点复杂，所以请耐心等待：

*   当对象没有 morphTargets 时，Ray intersect 可以完美地工作。

*   当一个对象有 morphTargets 时，只能与原始位置相交，也就是说，如果我将模型从 变形为`0,0,0`射线`50,50,50`，将不会与对象在 50、50、50 处相交，相反，当我将鼠标悬停时，`0,0,0`我会得到一个相交（即使对象不再存在！？）。

是否需要打开某种标志以使 three.js 知道顶点已移动？

编辑，添加代码。

这使我的网格并将其添加到对象数组（光线相交使用）：

```
function createDeer( deerGeometry, materials ) {
    mesh = new THREE.MorphAnimMesh( deerGeometry, new THREE.MeshLambertMaterial( { color: 0xE8E8E8, ambient: 0xE8E8E8, morphTargets: true, vertexColors: THREE.FaceColors } ) );
    mesh.scale.set( 3, 3, 3 );
    mesh.position.set( 0, -3, 0 );
    mesh.rotation.set( 0, 0, 0 );
    mesh.castShadow = true;
    mesh.receiveShadow  = true;
    mesh.geometry.dynamic = true;
    scene.add( mesh );
    objects.push( mesh );
} 
```

射线相交发生在 mouseDown 上（也有一个 mouseOver，同样的事情），就像我说的，代码工作正常，它只是与原始的未变形网格相交：

```
function onDocumentMouseDown( event ) {

    event.preventDefault();

    var vector = new THREE.Vector3( mouse.x, mouse.y, 0.5 );
    projector.unprojectVector( vector, camera );

    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

    var intersects = ray.intersectObjects( objects );

    if ( intersects.length > 0 ) {

        SELECTED = intersects[ 0 ].object;

        for(var i=0; i<objects.length; i++)
            { 
                if(SELECTED.position.x == objects[0].position.x) {
                    thisObject = i; 
                    }
                }

            }

        var intersects = ray.intersectObject( plane );

        container.style.cursor = 'pointer';
    }

} 
```

我已经确定问题必须与鹿的位置（如在网格变换中）永远不会改变的事实有关，但是顶点确实会移开，并且当射线相交时比较对象位置时，问题可能就在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T23:58:08.493

我提出了一个合并[请求](https://github.com/mrdoob/three.js/pull/4283)并修复了这个问题。

请注意，要使其正常工作，`boundingSphere`对象的 需要包含变形的全部范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:26:42.513

`MorphTarget`动画完全发生在（`GPU`在着色器代码中），而光线交点总是在 上计算`CPU`。所以事实上，没有简单的方法可以实现您在此处描述的内容。

# jquery - 使用jquery弹出消息框

> ID：13723475
> 
> 赞同：1
> 
> 时间：2012-12-05T12:41:00.937
> 
> 标签：jquery, jquery-ui, popup

我是新手`JQuery`。我需要使用弹出消息框`JQuery`。请帮助如何做到这一点，或者请提供我如何获得此链接的链接。

我正在使用 messi，但我无法获得所需的结果。

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
    <title></title>
    <link rel="stylesheet" href="files/messi.min.css" />
  </head>
  <body>
    <script src="files/messi.min.js">    
      new messi('This is a message with Messi.', { title: 'Title' });
    </script>
   <form id="form1" runat="server">
     <div>
       <asp:Button ID="Button1" runat="server" Text="click" />
     </div>
   </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:32:43.617

您可以使用**jQuery Ui****轻松完成。**

 ****HTML**

```
 <a href="#" id="contactUs">Contact Us</a>                   
 <div id="dialog" title="Contact form">
   <p>appear now</p>
 </div> 
```

您需要**初始化对话框**

```
$(function() {
  // this initializes the dialog (and uses some common options that I do)
  $("#dialog").dialog({autoOpen : false, modal : true, show : "blind", hide : "blind"});

  // next add the onclick handler
  $("#contactUs").click(function() {
    $("#dialog").dialog("open");
    return false;
  });
}); 
```

**对话框弹出的大链接** [**链接 1**](http://jqueryui.com/dialog/#modal) 另一个[**链接 2**](http://jqueryui.com/dialog/#default)

我从[**这里得到这个**](https://stackoverflow.com/questions/10867077/jquery-dialog-popup)

希望这会有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:07:16.813

我有同样的问题，并通过使用`Ajax Control Toolkit`弹出消息框解决。

你可以在这里找到一个例子：http `ModelPopupExtender`: [//jamestsai.net/Blog/post/How-to-use-ASPNET-AJAX-UpdatePanel-in-ModalPopup.aspx](http://jamestsai.net/Blog/post/How-to-use-ASPNET-AJAX-UpdatePanel-in-ModalPopup.aspx) 你可以自定义这个。也可以手动通过codebehind弹出消息框。

问候，本吉。**

# sql - 如何根据唯一键增加 SQL 中的值

> ID：13723476
> 
> 赞同：2
> 
> 时间：2012-12-05T12:41:00.040
> 
> 标签：sql, sql-server-2008, tsql

如果某些触发解决方案已经涵盖了这一点，但我无法让它们适用于我的场景，请提前道歉。

我有一个超过 50,000 行的表，所有行都有一个`ID`，大约有 5000 个不同的 ID 值。表中可能有 100 行`instrumentID = 1`和 50行，`instrumentID = 2`但它们的列条目会略有不同。所以我可以写一个

```
SELECT * from tbl WHERE instrumentID = 1 
```

并让它返回 100 行（我知道这很简单，但要清楚）

我需要做的是在每次找到仪器 ID 时形成一个递增值，所以我尝试了这样的东西：

```
 IntIndex INT IDENTITY(1,1), 
    dDateStart DATE,
    IntInstrumentID INT,
    IntIndex1 AS IntInstrumentID + IntIndex, 
```

在表创建步骤。

但是，无论在表中的何处找到记录，我都需要在找到`IntIndex1`an 时递增`instrumentID`，以便仅通过查看最后一个`IntIndex1`值就可以有效地提供记录计数。而不是上面所做的，它会在表的所有行上递增，而不管`instrumentID`你会得到 5001,4002,4003 等。

例如：对于 intInstruments 5000 和 4000

```
intInstrumentID  | IntIndex1
--------- ------------------
    5000         |   5001
    5000         |   5002
    4000         |   4001
    5000         |   5003
    4000         |   4002 
```

我需要这样做的原因是因为我需要根据这些值加入两个表（每个表的开始和结束日期`instrumentID`）。我已经尝试过`GROUP BY`等，但这在两个表中都不起作用，然后 JOIN 不起作用。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:43:50.917

我不完全确定我理解您的问题，但如果您只需要 IntIndex1 加入，您是否可以加入以下查询，而不是尝试将计算值实际保留在数据库中：

```
SELECT  *, 
        intInstrumentID + RANK() OVER(PARTITION BY intInstrumentID ORDER BY dDateStart ASC) AS IntIndex1
FROM    tbl 
```

编辑：如果我正确理解了您的评论（不确定！），那么您大概知道您的结束日期和开始日期表具有完全相同的行数，这会导致它们之间基于 thir 进行一对一的映射仪器 ID 中的相应结束日期？

如果是这种情况，那么这个连接可能就是您正在寻找的：

```
SELECT SD.intInstrumentID, SD.dDateStart, ED.dEndDate
FROM
(
    SELECT  intInstrumentID, 
            dStartDate, 
            RANK() OVER(PARTITION BY intInstrumentID ORDER BY dDateStart ASC) AS IntIndex1
    FROM    tblStartDate
) SD
JOIN
(
    SELECT  intInstrumentID, 
            dEndDate, 
            RANK() OVER(PARTITION BY intInstrumentID ORDER BY dEndDate ASC) AS IntIndex1
    FROM    tblStartDate
) ED
    ON  SD.intInstrumentID = ED.intInstrumentID
    AND SD.IntIndex1 = ED.IntIndex1 
```

如果没有，请您发布一些表格和预期结果的示例数据吗？

# javascript - 需要检查复选框的数量以影响链接中的数字

> ID：13723478
> 
> 赞同：0
> 
> 时间：2012-12-05T12:41:03.703
> 
> 标签：javascript, jquery

我有这三个复选框和一个连接到另一个页面的按钮。单击该按钮时，我希望它转到链接到已选中复选框的页面。

```
 <div data-role="content" data-theme="a">    
        <h2>Checkboxes</h2>
        <div data-role="fieldcontain">

            <input type = "checkbox" name = "nameOne" id = "checkBoxOne" checked = "checked" />
                  <label for = "checkBoxOne">Checkbox One</label>                 
            <input type = "checkbox" name = "nameOne" id = "checkBoxTwo" />
                  <label for = "checkBoxTwo">Checkbox Two</label>    
            <input type = "checkbox" name = "nameOne" id = "checkBoxThree" />
                  <label for = "checkBoxThree">Checkbox Three</label>

            <p><a href="#linkToPage1" data-direction="reverse" data-role="button" data-theme="b" id="checkBoxesSaved">Continue</a></p>  
        </div>
    </div> 
```

现在，当没有选中复选框时，我希望 href 链接到“#linkToPage1”，当第一个复选框被选中时，我希望它链接到“#linkToPage2”，当第二个被选中时，“#linkToPage3”，当第三个选中“#linkToPage4”，当第一个和第二个选中“#linkToPage5”，依此类推。因此，“#linkToPageX”应该根据选中的复选框进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:53:43.260

```
 <input type="checkbox" checked="checked"/>
    <input type="checkbox" checked="checked"/>
    <input type="checkbox" checked="checked"/>
    <input type="checkbox" checked="checked"/>
    <input type="checkbox"/><br/>
    <script>
        document.write("The no of checked checkbox  :"+$("input:checkbox[checked='checked']").length);
    </script> 
```

您可以使用 jquery 选择器来查找选中的复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:01:46.083

最近的浏览器有 querySelectorAll ：

```
 document.write("HTML5 : number of checked checkbox  :" + 
     document.querySelectorAll ("input[type='checkbox'][checked='checked']").length); 
```

在浏览器上尝试[http://jsfiddle.net/LwtvK/](http://jsfiddle.net/LwtvK/)

# ruby-on-rails - Rails 中的对话功能

> ID：13723485
> 
> 赞同：0
> 
> 时间：2012-12-05T12:41:20.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想在我的应用程序中添加对话功能。我怎样才能做到这一点？有什么宝石可以帮助我吗？

看图，我想要这样

![在此处输入图像描述](../Images/d852795c6bd611f46ca5c92ec96353e1.png)

功能看起来像 -> 见[https://www.etsy.com/conversations](https://www.etsy.com/conversations)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:16:04.173

我不确定是否有这方面的宝石，但您可以使用[socket.io存档该行为](http://socket.io/)

将客户端连接到 socket.io 服务器并流式传输聊天（甚至在公共房间创建私人聊天）真的很容易。

对于套接字服务器，您可以将其部署到[heroku](http://www.heroku.com)和[nodejitsu](http://nodejitsu.com/)，昨天我创建了一个自定义聊天系统（这不是真正的聊天，而是一种查看谁在线并在在线用户之间创建通知的方式）然后带我去几个小时。

# ios - 使用 ZipArchive 解压 NSData

> ID：13723494
> 
> 赞同：0
> 
> 时间：2012-12-05T12:41:49.950
> 
> 标签：ios, unzip, ziparchive

我正在使用 ZipArchive 并正在从设备中读取数据。我想要做的是从设备中获取数据并解压缩。我能找到的唯一示例是获取数据，将其写入 iOS 设备上的文件，然后再次读取（解压缩）它......

这是我将其写入磁盘的代码（不起作用）...

```
 // Read the data in...
if ((recvStringLen = recvfrom(connectSock, recvString, 1025, 0, (struct sockaddr *)&broadcastAddr, &recvStringLen)) < 0) {
    NSLog(@"ERROR: Unable to receive user perms message.");
    [self showTimeoutError];
    return -1;
}

// get the file size...
unsigned int fileSize = (( recvString[16] << 24 ) & 0xff000000) |
                        (( recvString[17] << 16 ) & 0xff0000) |
                        (( recvString[18] << 8 ) & 0xff00 ) |
                        ( recvString[19] & 0xff );

NSLog(@"fileSize: %i", fileSize);

recvString[20+fileSize] = '\0'; // terminate the string...

// convert the char data to a string
NSString *stringData = [[[NSString alloc] initWithFormat:@"%s", &recvString[20]] autorelease];
NSData *data = [[[NSData alloc] initWithBytes:stringData length:fileSize] autorelease];

// write the data...
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"userinfo.zip"];
[data writeToFile:appFile atomically:YES];

// exist?
BOOL zipExists = [[NSFileManager defaultManager] fileExistsAtPath:appFile];

NSString *zipFilePath = [documentsDirectory stringByAppendingPathComponent:@"userinfo.zip"];

NSString *output = [documentsDirectory stringByAppendingPathComponent:@"userinfo.dat"];

ZipArchive* za = [[ZipArchive alloc] init];

// unzip it...
BOOL success = [za UnzipOpenFile:zipFilePath];
if( success ) {
    BOOL outSuccess = [za UnzipFileTo:output overWrite:YES];
    if( outSuccess != NO ) {
        NSLog(@"success");
    }

    [za UnzipCloseFile];
}

[za release];

BOOL datExists = [[NSFileManager defaultManager] fileExistsAtPath:output]; 
```

当它“成功”时，它总是“否”……即使“zipExists”是“是”。

我有两个问题： 1\. 我没有成功将数据写入磁盘，读回并解压缩。2.我宁愿只是解压缩数据（NSData）而不是通过将其写入磁盘并再次读取它......

发帖前搜了一下，没找到解决办法。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:04:45.220

跳过创建 NSString - 这是您的问题（或其中之一）。直接从 recvString 创建数据对象。想想如果数据有一个空字节，使用 %s 会发生什么。

# android - 如何在android中的表面视图画布上绘图

> ID：13723497
> 
> 赞同：0
> 
> 时间：2012-12-05T12:41:51.433
> 
> 标签：android

我的表面视图有问题。实际上，当我在表面视图上绘制任何对象时，在绘图（onMoving）期间它不会显示，但是当我从表面视图中松开手指时，就会看到绘图对象。所以任何人都可以解决它。

我的代码是......

```
 public boolean onTouch(View view, MotionEvent motionEvent) {
    if(motionEvent.getAction() == MotionEvent.ACTION_DOWN){

        currentDrawingPath = new DrawingPath();
        currentDrawingPath.paint = currentPaint;
        currentDrawingPath.path = new Path();
        currentBrush.mouseDown(currentDrawingPath.path, motionEvent.getX(), motionEvent.getY());    

    }else if(motionEvent.getAction() == MotionEvent.ACTION_MOVE){

        currentBrush.mouseMove( currentDrawingPath.path, motionEvent.getX(), motionEvent.getY() );      

    }else if(motionEvent.getAction() == MotionEvent.ACTION_UP){
        currentBrush.mouseUp( currentDrawingPath.path, motionEvent.getX(), motionEvent.getY() );            
        drawingSurface.addDrawingPath(currentDrawingPath);

    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T10:36:39.443

试试这个代码

```
Ourview v;
Bitmap ball;
float x,y;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    v = new Ourview(this);
    v.setOnTouchListener(this);
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.circle_green);
    x = y = 0;
    setContentView(v);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    v.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    v.resume();
}

public class Ourview extends SurfaceView implements Runnable{

    Thread t = null;
    SurfaceHolder holder;
    boolean isItOk = false;

    public Ourview(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        holder = getHolder();
    }

    public void run() {
        // TODO Auto-generated method stub
        while (isItOk == true){
            //perfom convas drawing
            if (!holder.getSurface().isValid()){
                continue;
            }
            Canvas c = holder.lockCanvas();
            c.drawARGB(250, 10, 50, 100);
            c.drawBitmap(ball, x - (ball.getWidth()/2), y - (ball.getHeight()/2), null);
            holder.unlockCanvasAndPost(c);
        }

    }

    public void pause(){
        isItOk = false;
        while(true){
            try{
                t.join();
            }catch (InterruptedException e){
                e.printStackTrace();
            }
            break;
        }
        t = null;

    }

    public void resume(){
        isItOk = true;
        t = new Thread(this);
        t.start();

    }

}

public boolean onTouch(View v, MotionEvent me) {
    // TODO Auto-generated method stub

    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    switch(me.getAction()){
    case MotionEvent.ACTION_DOWN:
        x = me.getX();
        y = me.getY();
        break;
    case MotionEvent.ACTION_UP:
        x = me.getX();
        y = me.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        x = me.getX();
        //y = me.getY();
        break;
    }

    return true;
} 
```

}

# php - 为什么 ob_start() 解决了 header() 错误？

> ID：13723498
> 
> 赞同：2
> 
> 时间：2012-12-05T12:41:52.970
> 
> 标签：php

自从我第一次开始运行脚本以来，我有一个可以调用的脚本，并且可以`header();`正常运行几天。

然后几天后，它开始出现错误，说它无法修改标题信息。

然后我在谷歌上搜索错误并且它有效`ob_start();`！`ob_end_flush();`

错误已经消失，但我的问题是为什么它在没有`ob_start();`和`ob_end_flush();`之前几天都可以工作？

我想知道这种行为背后的解释。

顺便说一句，我`header()`这样称呼：

```
if(condition is true){
header('Location: anotherpage.php');
} 
```

我一`session_start();`开始有一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:45:06.817

以前，您在标题行之前没有非标题输出。现在，您在标题行之前有非标题输出。这仅在输出被缓冲时才有效，因此标题可以在它之前实际输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:46:16.097

你有一些代码在`header()`被调用之前输出一些东西。它可以是`print`,`echo`或类似的语句，甚至是 . 之前的空格`<?php`。

导致错误消失的原因`ob_start`是因为它会导致任何输出被缓冲，因此推迟到您调用`ob_flush`.

这样可以保证标题将出现在内容之前，即使您弄乱了代码中命令的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:45:26.767

标题前不能输出任何数据！

ob_start() 是一个输出缓冲区，将缓冲所有回显的数据并在所有标题等之后打印它。

PHP 在脚本自动完成时刷新数据，因此不需要“ob_end_flush()”

# workflow-foundation-4 - 如何更改 InstancesTable 中的数据

> ID：13723499
> 
> 赞同：1
> 
> 时间：2012-12-05T12:41:56.310
> 
> 标签：workflow-foundation-4

我正在使用 WF 4 和 asp.net。我想编辑工作流（返回上一步）并更改 Instancetable 中的数据，但我不知道。我的目的是在不更改工作流设计器和 sql 自动更新表的情况下撤消上一步。我的想法是更改 InstancesTable 中复杂数据属性中的数据，但我不能。我想要一个在不更改工作流设计器的情况下编辑先前活动的解决方案，并希望在返回上一步时更新表。另一方面，例如，我想在活动3未执行时​​无条件地从活动3返回活动1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T22:01:18.930

如果您只想返回上一步，您可以使用书签并返回特定书签

# c# - 使用 EF 更新从 ViewModel 中选择的项目

> ID：13723514
> 
> 赞同：0
> 
> 时间：2012-12-05T12:42:40.217
> 
> 标签：c#, wpf, entity-framework, datagrid

我正在使用 WPF 创建一个应用程序，以使组织能够将不同的数据输入到应用程序中。我有一个选项卡控件来允许他们执行此操作。

然后在一个单独的视图中，我有一系列不同的数据网格，向用户显示他们已将哪些数据插入到数据库中。包含用于添加、更新或删除所需数据的按钮。

这引出了我的问题。目前，我可以轻松、毫无问题地删除和添加数据。但是接下来我的问题是试图让`selected`项目更新，但它没有，导致`null reference exception`.

如果我以编程方式设置我的属性属性，它会很好地更新它。像这样；`public int _OrganisationTypeDetailID = 17;` `public int _OrganisationTypeID = 1;`但我不希望这样，因为我希望用户能够自己选择并更新他们需要的数据。

这是一些可能有助于解决我的问题的代码；

查看模型；

```
 public void UpdateOrganisationTypeDetail(OrganisationTypeDetail orgTypeDetail)
    {
        using (DBEntities context = new DBEntities())
        {
            var orgTD = context.OrganisationTypeDetails.Where(otd => otd.OrganisationTypeDetailID == SelectedType.OrganisationTypeDetailID).FirstOrDefault();

            if (orgTD != null)
            {
                orgTD.Title = Title;
                orgTD.FirstName = FirstName;
                orgTD.Surname = Surname;
                orgTD.Position = Position;
                orgTD.DateOfBirth = DateOfBirth;
                orgTD.Address = Address;
                orgTD.Country = Country;
                orgTD.Postcode = Postcode;
                orgTD.PhoneNumber = PhoneNumber;
                orgTD.MobileNumber = MobileNumber;
                orgTD.FaxNumber = FaxNumber;
                orgTD.Email = Email;
                orgTD.NINumber = NINumber;

                //context.OrganisationTypeDetails.Attach(orgTD);
                context.OrganisationTypeDetails.ApplyCurrentValues(orgTD);
                context.SaveChanges();

                MessageBox.Show("Updated Organisation Type Details");
            }
            else
            {
                MessageBox.Show("Unable to update selected 'Type'.");
            }
        }

    private OrganisationTypeDetail _SelectedType;
    public OrganisationTypeDetail SelectedType
    {
        get
        {
            return _SelectedType;
        }
        set
        {
            if (_SelectedType == value)
                return;

            _SelectedType = value;
            OnPropertyChanged("SelectedType");
        }
    }

    public List<OrganisationTypeDetail> GetOrganisationTypeDetail //Loads data 
    {
        get
        {
            using (DBEntities context = new DBEntities())
            {
                var query = from e in context.OrganisationTypeDetails
                            select e;
                return query.ToList<OrganisationTypeDetail>();
            }
        }
    }

    private ICommand showUpdateCommand;
    public ICommand ShowUpdateCommand //Update command
    {
        get
        {
            if (showUpdateCommand == null)
            {
                showUpdateCommand = new RelayCommand(this.UpdateFormExecute, this.UpdateFormCanExecute); //i => this.UpdateOrganisationTypeDetail()
            }
            return showUpdateCommand;
        }
    } 
```

后面的代码；

```
 private void btnUpdateOrgTypeDetail_Click(object sender, RoutedEventArgs e)
    {
        OrganisationTypeDetail selected = dgOrgTypeDetail.SelectedItem as OrganisationTypeDetail;
        OrganisationTypeDetailViewModel org = new OrganisationTypeDetailViewModel();

        if (selected == null)
            MessageBox.Show("You must select a 'Type' before updating.");
        else
        {
            OrganisationTypeDetailUpdateView update = new OrganisationTypeDetailUpdateView();

            update.ShowDialog();
            org.UpdateOrganisationTypeDetail(selected);
            Page_Loaded(null, null);
        }
    } 
```

xml;

```
 <DataGrid Name="dgOrgTypeDetail" Height="145" Width="555" 
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding GetOrganisationTypeDetail}"
            SelectedItem="{Binding SelectedType, Mode=TwoWay}"> 
```

希望这个问题可以得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:02:46.677

我会说你最好的选择是在 MVVM 模式中使用命令来实现这一点。看起来你正在使用 MVVM 和代码的组合，并在单击事件时实际创建视图模型的新实例火灾。尝试在视图后面的代码中将视图模型绑定到您的视图作为数据上下文，然后尝试更新所选类型。

此外，当您尝试对 SelectedType 进行更新时 - 使用[Snoop](http://snoopwpf.codeplex.com/)查看您的视图 - 查看 SelectedType 属性是否仍绑定到视图。

```
ICommand UpdateOrgTypeDetail { get;} 
```

然后在视图模型构造函数中声明新实例

```
UpdateOrgTypeDetail = new DelegateCommand<object>(ExecuteUpdateOrgTypeDetail,    CanExecuteUpdateOrgTypeDetail); 
```

然后，这两个代表将允许您单击按钮（需要绑定到 UpdateOrgTypeDetail）

```
<Button Command="{Binding UpdateOrgTypeDetail}" /> 
```

您应该会发现该属性的更新已从此处正确完成。

# ruby-on-rails - Rails 视图助手中的干净和惯用的字符串连接

> ID：13723519
> 
> 赞同：1
> 
> 时间：2012-12-05T12:42:46.110
> 
> 标签：ruby-on-rails, actionview

请注意，这不是要求任何有效解决方案的问题，而是*最佳实践是什么的问题？*种类。

在我的观点中，我有很多这样的代码出现（我使用 HAML）：

```
= t("some.key")
%b= t("other.key.#{string}")
%i= string 
```

一旦它在许多不同的地方使用，我决定将它提取给一个助手。但我意识到我不明白什么是最干净的方法。

我可以考虑使用字符串连接`+`（或) 并打扰而不是仅仅声明三个字符串。`"%s %s %s" % [...]``[...].join("\n")``" "``"\n"``html_safe`

我认为这`concat`就是应该以这种方式工作的

```
def long_string(string)
  concat t("some.key")
  concat content_tag(:b, t("other.key.#{string}"))
  concat content_tag(:i, t(string)
end 
```

...并且它有效，但它迫使我*执行*助手而不是*评估*它，这不是惯用的，我的意思是使用

```
%p- long_string(string) 
```

代替

```
%p= long_string(string) 
```

当然，我可以将它提取到部分，但对于三行代码来说似乎太多了。

也就是说，我是否错过了一些简洁优雅的方式来在帮助程序中连接三个丰富的 HTML 行，或者`concat`/partial/dirty 数组连接是我唯一的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:55:49.603

如果是很多 HTML，我肯定会去提取部分内容。在我个人看来，没有什么比 HAML 更干净地编写和读取 HTML 了。

如果它是一堆字符串插值，组成很多值，我有时会使用助手来清理我的视图，但它们总是会返回字符串，我*从不*在我的助手中使用`concat`，这也使我的助手更好地测试（只需检查如果字符串结果是我所期望的）。

因此，对于您的示例，它将是

```
def long_string(str)
  result = []
  result << t("some.key")
  result << content_tag(:b, t("other.key.#{string}"))
  result << content_tag(:i, string)
  result.join(" ").html_safe
end 
```

在你看来你可以写

```
%p= long_string('whatevvva') 
```

希望这可以帮助。

# javascript - div 内容没有获得 cookie 值

> ID：13723520
> 
> 赞同：0
> 
> 时间：2012-12-05T12:42:47.423
> 
> 标签：javascript, html, cookies

我有一个 div 如下：

```
<div class="bubbly">
 </div>
 <script>
 $('.bubbly').innerHTML=getCookie('adjective');
 </script> 
```

但是这个div里面的内容是看不到的。如果我提醒 cookie，我会得到其中的值。但是 div 没有获取 cookie 的值。我想在这个 div 中有 cookie 的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:45:05.453

您正在将看起来像 jQuery 的东西与纯 JavaScript 混合在一起。所以要么你必须使用[`.html()`](http://api.jquery.com/html/)方法来设置元素的内容：

```
$('.bubbly').html(getCookie('adjective')); 
```

或者，如果您想使用本机的 innerHTML 属性，则必须从 jQuery 对象中获取 DOM 元素：

```
$('.bubbly')[0].innerHTML = getCookie('adjective'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:45:24.673

尝试

```
$('.bubbly').html(getCookie('adjective')); 
```

假设您的 getCookie 函数正常工作。`innerHTML`是一个纯 JavaScript 的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:45:27.857

如果您想在 jquery 对象中使用本机 DOM 属性，请执行以下操作：

```
$('.bubbly')[0].innerHTML=getCookie('adjective'); 
```

你可以像这样在 jquery 中做同样的事情：

```
$('.bubbly').html(getCookie('adjective')); 
```

还要确保将您的 DOM 操作代码包含在 DOM 就绪事件的处理程序中，如下所示：

```
<div class="bubbly">
 </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $('.bubbly').html(getCookie('adjective'));
    });
</script> 
```

# android - windows环境下在corona中使用InputTextBox

> ID：13723522
> 
> 赞同：1
> 
> 时间：2012-12-05T12:42:52.197
> 
> 标签：android, iphone, lua, coronasdk

我正在尝试为用户创建一个登录屏幕，但无法在模拟器上看到文本框。我使用 Windows 7 作为开发环境。如何在windows环境下调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:14:45.857

Corona 提供了一个调试器（Corona SDK 文件夹中的 Corona.Debugger.exe），但它需要您从命令行调试脚本（这是调试会话的示例：http: [//developer.coronalabs.com/content /corona-simulator-and-debugger-sample-debugging-session](http://developer.coronalabs.com/content/corona-simulator-and-debugger-sample-debugging-session)）。

我最近向[ZeroBrane Studio Lua IDE](http://studio.zerobrane.com)添加了 Corona 调试支持，它为您提供了一种从 IDE 环境调试 Corona 脚本的方法。在下一个版本发布之前，您需要使用来自 github 的最新代码来访问此功能。

另一种选择是使用 Koneki（Lua 的 Eclipse 集成），如此[处](http://www.eclipse.org/forums/index.php/m/877098/)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:04:11.703

当您在窗口机器上运行 Corona 时，它不支持模拟器上的文本框。所以你需要在设备上检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:27:15.790

您几乎必须执行“为设备构建”，将其安装在设备上并在那里进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T09:48:27.927

我知道这已经很晚了，但也许会有用......

要直接在 Windows 上的电晕模拟器上进行测试，您可以使用这个插件，它模拟文本字段/文本框的行为：

[https://github.com/ProGM/CoronaSDK-win-native](https://github.com/ProGM/CoronaSDK-win-native)

# jquery - 绑定一个函数以获取可排序项的类

> ID：13723526
> 
> 赞同：1
> 
> 时间：2012-12-05T12:43:04.290
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用[Jquery UI Sortable](http://api.jqueryui.com/sortable/)来交换两个列表中的项目。当它从一个列表移动到另一个列表时，我需要从一个项目中获取该类，这很容易做到这一点。

```
$("#sortable").sortable({
    update: function (event, ui) {
            alert($(ui.item).attr('class'));
        }
}); 
```

但我需要对动态内容执行此操作，因此我需要将此函数与 .on 绑定以使其工作。所以我怎么能做这样的事情..

```
$(document).on("sortable","#sortable", function() { 
```

并且仍然访问 api`update`选项来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:23:27.780

我认为你应该检查[http://api.jqueryui.com/sortable/](http://api.jqueryui.com/sortable/)，事件标签。我在那里举了这个例子：

```
$( ".selector" ).sortable({
    sort: function( event, ui ) {
          //do stuff
     }
}); 
```

该事件在排序过程中触发，也可以在停止时绑定事件，在停止和启动之前，检查一下。

# amazon-s3 - AWS S3 IAM 策略多个存储桶

> ID：13723536
> 
> 赞同：1
> 
> 时间：2012-12-05T12:43:23.833
> 
> 标签：amazon-s3, amazon-web-services, bucket, amazon-iam

我们希望在一个存储桶中创建逻辑文件夹，但不超过 100 个存储桶。假设我们只有一个 AWS 账户，我们希望将上传的文档分发到这 100 个存储桶中。对所有存储桶执行 IAM 策略的最佳实践是什么，以便让多个用户（只有文档创建者）可以查看/删除上传的文档？

谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:01:05.023

我不确定我是否完全理解您的用例。为什么要在用户之间分配存储桶？

关于将 IAM 用于用户的“主目录”的最佳实践，您可以在[AWS Docs](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingIAMPolicies.html)中找到：

```
{
   "Statement":[{
      "Effect":"Allow",
      "Action":["s3:PutObject","s3:GetObject","s3:GetObjectVersion",
      "s3:DeleteObject","s3:DeleteObjectVersion"],
      "Resource":"arn:aws:s3:::my_bucket/home/user_name/*"
   }
   ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T15:11:18.713

正如[@Guy 所提到的](https://stackoverflow.com/a/13747567/1037948)，每个用户的文件夹优于每个用户的存储桶，但在任何一种情况下，您都可以将[策略变量](http://docs.aws.amazon.com/IAM/latest/UserGuide/PolicyVariables.html) `${aws:username}`用于一个规则而不是多个规则。请参阅[他们文档中的示例](http://docs.aws.amazon.com/IAM/latest/UserGuide/ExampleIAMPolicies.html#iampolicy-example-allDDBaccess)。

就您而言，我认为您可以将其放入桶中，例如：

```
{
   "Statement":[{
      "Effect":"Allow",
      "Action":["s3:*"],
      "Resource":"arn:aws:s3:::bucket-for-${aws:username}/*"
   }]
} 
```

# c# - 带有传入参数的 C# 线程过程调用

> ID：13723538
> 
> 赞同：0
> 
> 时间：2012-12-05T12:43:28.827
> 
> 标签：c#, multithreading, parameters, procedure

一个菜鸟线程问题...我希望通过一个新线程调用 sendSMS 过程，但面临无法传递参数的问题。没有使用跟踪 user1Mobile 和 messageContents 值的全局变量，基本的解决这个问题时的技术？我读过几篇文章，但我相信它们是矫枉过正的。

通常我会通过以下方式启动：

```
ThreadStart job = new ThreadStart(speakTextNewThread);
            Thread thread = new Thread(sendSMS);
            thread.Start(); 
```

现在从我的应用程序中的任何地方调用以及我希望使其成为线程：

```
sendSMS(Settings1.Default.user1Mobile, messageContents) 
```

发送过程：

```
private string sendSMS(string phoneNumber, string messageToSend)
    {
        try
        {
            API api = new API(Settings1.Default.clockworkAPIKey);

            SMS sms = new SMS
            {
                To = phoneNumber,
                Message = messageToSend
            };

            SMSResult result = api.Send(sms);

            if (result.Success)
                return "Sent\nID: " + result.ID;                
            else
                return "Error: " + result.ErrorMessage;
        }
        catch (APIException ex)
        {
            // You'll get an API exception for errors 
            // such as wrong key
            return "API Exception: " + ex.Message;
        }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:49:54.030

我认为最简单的方法是：

```
new Thread(() => sendSMS(Settings1.Default.user1Mobile, messageContents)).Start(); 
```

或者

```
Task.Factory.StartNew(()=>Settings1.Default.user1Mobile, messageContents)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:48:41.243

使用`BackgroundWorker`. 基本上这意味着你启动另一个线程并用你的代码和参数提供它；后台工作人员将在自己的线程上完成工作，并在完成时通知主线程。

这是一个很好的教程： http: [//www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:50:23.100

请参阅下文以启动您自己的线程：

```
string retMsg
var t = new Thread(() => retMsg = sendSMS(Settings1.Default.user1Mobile, messageContents));
t.Start(); 
```

如果你想对返回值做点什么，我添加了 retMsg

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:57:59.330

你需要这样的东西。当您传递多个参数时，您需要一个委托（）。

```
Thread thread = new Thread(delegate()
{
    sendSMS(phoneNumber,message);
});
thread.Start(); 
```

您还需要将参数作为对象传递，并在您的方法捕获后转换为字符串：-

```
private string sendSMS(object phoneNumber, object messageToSend)
{
  string pnumber = (string)phoneNumber;
  string msg = (string)messageToSend;

   // DO REST OF WORK HERE.
} 
```

# arduino - 带有最小/处理按钮以播放声音

> ID：13723544
> 
> 赞同：1
> 
> 时间：2012-12-05T12:43:38.577
> 
> 标签：arduino

我一直在尝试通过按 Arduino 上的自制按钮在笔记本电脑上播放声音。

现在我找到了这个[示例代码](https://gist.github.com/4215212)来使用 Minim 播放文件。

我想知道在哪里可以触发代码中的按钮来播放声音。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T11:13:44.357

试试看这里[Arduino and Processing](http://playground.arduino.cc//Interfacing/Processing) 这个页面解释了通信示例以及如何在 arduino 和处理之间进行通信

然后，一旦用户按下按钮，您只需要调用“player.play();”（从示例中您需要删除它）

# macos - Mac Terminal 回归基本主题

> ID：13723546
> 
> 赞同：0
> 
> 时间：2012-12-05T12:43:45.973
> 
> 标签：macos, terminal, osx-lion, zsh

我认为弄乱我的终端并安装很多我不知道的东西是个好主意。我已经意识到需要恢复它，所以它就像我得到它的那天一样干净。我环顾四周，在谷歌上找不到任何东西。

我可以运行任何命令来擦除它并重新开始吗？

这是我愚蠢地安装的

[https://github.com/skwp/dotfiles](https://github.com/skwp/dotfiles)

我试过跑步

```
rm -rf ~/.yadr 
```

但什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:09:51.717

在 ~/.profile 中查找任何奇怪的东西。通常它最多包含一个 PATH 定义。或者，查看 ~/.bash_profile。首先复制并删除任何您不喜欢的外观！

# linq - 如何在 LINQ to RavenDB 查询的 WHERE 子句中与谓词

> ID：13723547
> 
> 赞同：1
> 
> 时间：2012-12-05T12:43:46.440
> 
> 标签：linq, ravendb

我有以下模型：

```
public class Clip {
    public Guid ClipId { get; set; }
    public IList<StateChange> StateChanges { get; set; }
}

public class StateChange {
    public string OldState { get; set; }
    public string NewState { get; set; }
    public DateTime ChangedAt { get; set; }
} 
```

这就是查询乌鸦的方式：

```
var now = DateTime.UtcNow;
var since = now.AddSeconds(60);
string state = "some state of interest";
using (var session = docStore.OpenSession()) {
            RavenQueryStatistics stats;
            session.Query<Clip>()
                .Statistics(out stats)
                .Where(
                    p => p.StateChanges.Any(a => (since > a.ChangedAt && a.NewState == state))
                    && !p.StateChanges.Any(a => (a.OldState == state && now > a.ChangedAt)))
                .ToArray();
            return stats.TotalResults;
        } 
```

我想获取所有`Clip`具有（`StateChange.CreatedAt`之前`since`和`NewState`是`"some state of interest"`）且没有（`StateChange.CreatedAt`之前`now`和`OldState`是）的记录的计数`"some state of interest"`。

虽然上面使用的谓词适用于 linq to object，但它似乎不适用于 linq to raven（即不返回预期结果）。我怀疑这是因为`&& !.p.StateChanges.Any....`如果左侧的表达式评估为真，则永远不会评估该表达式。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:45:03.370

它与条件的评估无关。&& 工作得很好。

问题是 RavenDB 不能正确处理使用 .All(...) 或 !.Any(...) 的查询。这是由于 raven 的动态索引引擎评估您的 linq 语句的方式。它希望为您的每个 StateChange 条目构建一个单独的索引条目，这对于需要考虑多个相关项目的操作（例如不同的状态更改）不起作用。

[这里](http://issues.hibernatingrhinos.com/issue/RavenDB-732)已经记录了一个问题。当您尝试以这种方式查询时，它已在构建 2151 中关闭以抛出有意义的异常。也许在将来的某个日期，他们可以重新评估是否有某种方法可以正确地评估这些类型的查询。

**更新**

我一直在考虑你的挑战，以及[另一个相关](https://stackoverflow.com/q/13731255/634824)的挑战，并且能够想出一种新技术来让你做到这一点。它将需要一个静态索引和 lucene 查询：

```
public class Clips_ByStateChange : AbstractIndexCreationTask<Clip>
{
  public Clips_ByStateChange()
  {
    Map = clips =>
          from clip in clips
          select new {
              OldState = clip.StateChanges
                  .Select(x => x.OldState + "|" + x.ChangedAt.ToString("o")),
              NewState = clip.StateChanges
                  .Select(x => x.NewState + "|" + x.ChangedAt.ToString("o"))
          };
  }
}

var results = session.Advanced.LuceneQuery<Clip, Clips_ByStateChange>()
    .Where(string.Format(
        "NewState: {{{0}|* TO {0}|{1}}} AND -OldState: {{{0}|* TO {0}|{2}}}",
        state, since.ToString("o"), now.ToString("o"))); 
```

当然，如果您愿意，您仍然可以对其进行统计。

# c++ - 因空指针取消引用而崩溃，为什么？

> ID：13723548
> 
> 赞同：1
> 
> 时间：2012-12-05T12:43:52.520
> 
> 标签：c++

我正在阅读[Moai](http://en.wikipedia.org/wiki/Moai_%28game_development_platform%29)源代码，我开始好奇为什么这会导致崩溃（或不会……）

我真的不明白那个片段。

在文件 A 中：

```
#define UNUSED(p) (( void )p) 
```

在文件 B 中：

```
//----------------------------------------------------------------//
/** @name   crash
    @text   Crashes Moai with a null pointer dereference.

    @out    nil
*/
int MOAISim::_crash ( lua_State* L ) {
    UNUSED(L);

    int *p = NULL;
    (*p) = 0;

    return 0;
} 
```

编辑：

我认为我不理解的部分内容是“尊重”的含义。所以如果你把它放在你的答案中，那就太棒了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T12:45:46.843

崩溃是由空指针的取消引用引起的：

```
(*p) = 0; // <--- Crash 
```

同样正如评论中所指出的，未使用的宏只是为了抑制大多数编译器会给出的“未使用参数”警告。

通常也可以通过简单地不指定变量名称来防止警告，如下所示：

```
int MOAISim::_crash ( lua_State* ) 
{
    int *p = NULL;
    (*p) = 0;

    return 0;
} 
```

还值得牢记的是，上述并非保证崩溃。在其中一个 32 位控制台上，取消引用空指针实际上会导致数字“3”。这确实使 null 取消引用很难找到，但通常如果您在寄存器中看到一个 3，您可能会很好地猜测刚刚出了什么问题。

取消引用本质上是要求存储在给定指针上的值。如果指针无效（即指向进程不拥有的内存位置），则会导致崩溃。在 Windows 中，这称为访问冲突 (0xC0000005)。在 Linux 下，这是一个分段违规，SIGSEGV。

[也可以看看](http://en.wikipedia.org/wiki/Dereference)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:47:20.107

宏在代码中被替换，因此对于编译器，函数如下所示：

```
int MOAISim::_crash ( lua_State* L ) {
    (( void )L);

    int *p = NULL;
    (*p) = 0;

    return 0;
} 
```

该`(( void )L)`行评估`L`并丢弃结果。但是，崩溃不是来自该行，而是来自分配`NULL`给`(*p) = 0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:11:46.237

```
int *p = NULL;
(*p) = 0; 
```

第二行是未定义的行为（取消引用 nullptr 指针）。使您的平台上的应用程序崩溃的事实只是未定义行为的一种形式（在我看来很好，因为您可以更快地发现错误）。

# php - 使用explode with setcookie来设置一个具有多个名称和值的cookie

> ID：13723549
> 
> 赞同：4
> 
> 时间：2012-12-05T12:43:52.883
> 
> 标签：php, cookies

我真的不知道该怎么做

来自[PHP 手册](http://php.net/manual/en/function.setcookie.php)

> cookie 名称可以设置为数组名称，并且可以作为数组提供给您的 PHP 脚本，但单独的 cookie 存储在用户的系统中。

这对我来说没问题，我得到并且可以像下面这样使用

```
setcookie("cookie[three]", "cookiethree");
setcookie("cookie[two]", "cookietwo"); 
```

但是这种方法会创建多个 cookie，那是我不想要的

PHP手册还说

> 考虑explode() 来设置一个具有多个名称和值的cookie。

但我不知道如何使用explode 设置一个具有多个名称和值的cookie？

请有人解释一下。

但没有得到这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:10:49.657

Cookie 只不过是一个愚蠢的键/值存储系统。就这么简单。

碰巧 PHP 在此之上提供了一个漂亮的功能：名称包含所描述格式的方括号的 cookie 将在从 PHP 读取 cookie 时组合成单个数组变量。但这是唯一的例外，它不会影响 cookie 的工作方式，而且正如您所说，这是您不需要的功能。

也就是说，您只需将 cookie 值视为白板，您可以在其中放置任何您想要的内容，只要是文本即可。并且有许多 PHP 函数可以让您将数组等奇特的东西转换为纯文本：

*   [连载（）](http://php.net/serialize)
*   [json_encode()](http://php.net/json_encode)
*   [内爆（）](http://php.net/implode)
*   ...

发挥你的想象力，你就完成了;-)

**更新：**一点评论——我已经提到`serialize()`了完整性，但这可能不值得付出努力，因为确保你不会打开代码注入的大门会非常复杂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T12:47:50.260

你可以像这样设置一个cookie：

```
setcookie("cookiename", "value1;value2;value3;value4"); 
```

然后像这样使用爆炸：

```
$a = explode(';', $_COOKIE['cookiename']); 
```

然后，您将从单个 cookie 中获取一组值。

它还说你不应该这样做......在文档的以下句子中。

```
setcookie("cookiename", serialize( array("value1", "value2", "value3") );
// next request
$a = unserialize($_COOKIE['cookiename']); 
```

因为这是不安全的，因为用户可以将他们的 cookie 修改为非数组值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T12:51:21.400

使用序列化和反序列化

前任 ：

```
$ckArr= array();
        $ckArr['abc'] = "abc";
        $ckArr['xyz'] = "xyz";
        $ckArr['pqr'] = "pqr";

        $ckStr= serialize($ckArr);
        setcookie("mycookie", $ckStr, $time, $servername); 
```

您可以使用以下命令对其进行反序列化：

```
$cookieContent = unserialize($_COOKIE['mycookie']);

print_r($cookieContent); 
```

# gtk - 在哪里学习 X11 和 XCB？

> ID：13723552
> 
> 赞同：4
> 
> 时间：2012-12-05T12:44:02.583
> 
> 标签：gtk, x11, xcb

我想创建一个需要 X11 渲染窗口的软件，该窗口堆叠在顶部并抓住键盘和鼠标（就像屏幕储物柜一样），但我能找到的只是一个浅薄的文档，示例很少。我该如何进行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T18:11:55.310

研究了一会儿，我决定自己回答这个问题。

[sbin.com](http://www.sbin.org/doc/Xlib)上的 X11 手册非常好，其中包含详细的解释和示例。

我还发现 irc.freenode.com 上 #xcb irc challel 的人们非常合作和知识渊博。他们建议我阅读用 X11 编写的代码，例如 xscreensaver 等。那应该让我开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-23T23:21:20.710

没有这样的东西*X11 或 XCB*。它们是不同的东西。X11 是协议，XCB 是一个 C 库，它实现了对 X 服务器的低级协议调用。也许您指的是**Xlib**或**libX11**而不是单独的 X11。

我建议你阅读[Xlib 文档](http://tronche.com/gui/x/xlib/)，你可以学到很多关于 X11 协议的知识。[然后，您可以通过阅读他们的文档](http://xcb.freedesktop.org/)轻松切换到强烈推荐的 XCB 。检查 xcb/xproto.h 以查找所有 X11 协议调用。

了解[ICCCM](http://tronche.com/gui/x/icccm/)和[EWMH](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html)标准也很有趣。

# scala - play2.0 dist 出现错误

> ID：13723553
> 
> 赞同：0
> 
> 时间：2012-12-05T12:44:02.863
> 
> 标签：scala, playframework

我有一个 scala / play 2.0.4 应用程序正在运行。本地一切都很好，我可以通过“play run”启动服务。现在我想将应用程序导出到产品服务器。我使用播放命令“dist”，并在服务器上解压缩文件。但是，如果我启动服务，我会在几个操作上遇到异常：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[RuntimeException: java.lang.NoSuchMethodError: com..webapp.services.Backend.getCitiesByName(Ljava/lang/String;)Ljava/util/List;]]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play.play_2.9.1-play_2.9.1-2.0.4.jar:2.0.4]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play.play_2.9.1-play_2.9.1-2.0.4.jar:2.0.4]
at akka.actor.Actor$class.apply(Actor.scala:318) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at play.core.ActionInvoker.apply(Invoker.scala:113) [play.play_2.9.1-play_2.9.1-2.0.4.jar:2.0.4]
at akka.actor.ActorCell.invoke(ActorCell.scala:626) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.dispatch.Mailbox.run(Mailbox.scala:179) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:516) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2]
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) [com.typesafe.akka.akka-actor-akka-actor-2.0.2.jar:2.0.2] 
```

未找到的方法实际上在可用代码中，并且适用于我的本地安装（通过播放运行）。它是来自 Scala 项目的依赖项的类和方法（作为 jar 包含在 lib 中）。

在使用“dist”之前，我清理了所有引用并构建了所有依赖项。

谁能给我提示在哪里搜索此错误？真的会有很大的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:05:00.970

发生的事情是依赖的 JAR 文件没有进入您的分发 ZiP 文件

为了将依赖的 JAR 添加到您的分发包中，您需要将其添加到 project/Build.scala 文件中。查看相关依赖项在 Maven 上是否可用，并将其添加到 Build.scala 文件中，如下所示：

```
val appDependencies = Seq(
      // Add your project dependencies here,
      "mysql" % "mysql-connector-java" % "5.1.20",
 ) 
```

# android - 在 Google 地图上添加图钉时出错

> ID：13723563
> 
> 赞同：0
> 
> 时间：2012-12-05T12:44:21.757
> 
> 标签：android, google-maps, itemizedoverlay

最初我可以在地图上添加图钉。我使用删除图钉

```
mapView.getOverlays().clear();
mapView.invalidate(); 
```

现在，当我单击 addPin 按钮时，在地图上添加 pin 的相同代码运行，但它没有被添加到它上面。请帮忙.....

添加引脚的代码是：-

```
addPin.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            ch=1;

        }
    }); 
```

单击添加按钮后，我触摸要添加 PIN 的位置

```
view.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent motionEvent) {

            Toast.makeText(getApplicationContext(), "done", Toast.LENGTH_SHORT).show();

            itemizedoverlay.populateList();
            if(ch==1){
            GeoPoint point = view.getProjection().fromPixels(
                    (int) motionEvent.getX(),
                    (int) motionEvent.getY());

            overlayitem = new OverlayItem(point, "Yeahh", "I've added");

            itemizedoverlay.addOverlay(overlayitem);

            mapOverlays.add(itemizedoverlay);

            Toast.makeText(getApplicationContext(), "Added", Toast.LENGTH_SHORT).show();

            ch=0;
            }
            Toast.makeText(getApplicationContext(), "done", Toast.LENGTH_SHORT).show();
            return false;
        }
    }); 
```

这里 view=mapView 我正在使用计数器 ch，添加时将变为 ch=0，删除时将变为 ch=1

删除代码：-

```
delete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        view.getOverlays().clear();
        view.invalidate();

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:46:10.900

您对`mapView.getOverlays()`返回的调用`List`包含所有覆盖，因此当您调用`clear()`它时，您会删除所有覆盖。

尝试调用`clear()`单个`Overlay`. 如果没有此方法，请添加它。而且，顺便说一句， invalidate() 不应该用于重绘，而是使用`populate()`你的`Overlay`。

# wpf - 提高移动多个 wpf 元素的性能

> ID：13723565
> 
> 赞同：1
> 
> 时间：2012-12-05T12:44:26.100
> 
> 标签：wpf, vb.net, performance

做一些有趣的项目可以帮助我学习。这是我正在做的一个项目，我已经学到了很多东西。我希望看到该程序的 CPU 密集度较低。有人对我如何做到这一点有任何建议吗？

基本上这个程序只是将一些雪花覆盖在电脑屏幕上。

* * *

编辑：

我目前正在研究的是看我是否可以使用 DoubleAnimationUsingPath 并绑定到 PathGeometry。当我试图弄清楚这一点时，我欢迎有关此方法或任何其他方法的任何建议或提示。

* * *

WPF/XAML：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    AllowsTransparency="True"
        WindowStyle="None"
    Title="MainWindow" Height="350" Width="525" Background="Transparent" Topmost="True" WindowState="Maximized" ResizeMode="NoResize">
    <Canvas Name="canvas1">

    </Canvas>
</Window> 
```

VB.NET 主窗口：

```
Imports System.ComponentModel

Class MainWindow

    Dim bw As New BackgroundWorker
    Dim flakes(17) As flake

    Private Sub Window_Loaded(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
        For i = 0 To flakes.Count - 1
            flakes(i) = New flake
            flakes(i).image.DataContext = flakes(i)
            flakes(i).image.SetBinding(Canvas.LeftProperty, "left")
            flakes(i).image.SetBinding(Canvas.TopProperty, "top")
            canvas1.Children.Add(flakes(i).image)
        Next

        AddHandler bw.DoWork, AddressOf backgroundMover
        bw.RunWorkerAsync()
    End Sub

    Private Sub backgroundMover()
        While (True)
            For Each f In flakes
                f.move()
            Next
            System.Threading.Thread.Sleep(50)
        End While
    End Sub
End Class 
```

VB.Net 薄片类：

```
Imports System.ComponentModel

Public Class flake
    Implements INotifyPropertyChanged

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Private Sub NotifyPropertyChanged(ByVal info As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
    End Sub

    Private Property startLeft As Double
    Private Property _left As Double
    Private Property _top As Double
    Private Property speed As Double
    Private Property amplitude As Double
    Private Property period As Double
    Public Property image As New Image
    Private Shared Property r As New Random

    Public Sub New()
        _image.Width = 28
        _image.Height = 26
        _image.Source = New System.Windows.Media.Imaging.BitmapImage(New Uri("/snowTest;component/Images/blue-pin-md.png", UriKind.Relative))
        startFresh()
    End Sub

    Public ReadOnly Property left As Double
        Get
            Return _left
        End Get
    End Property

    Public ReadOnly Property top As Double
        Get
            Return _top
        End Get
    End Property

    Public Sub startFresh()
        _top = -30
        amplitude = r.Next(5, 35)
        period = 1 / r.Next(20, 60)
        speed = r.Next(15, 25) / 10
        startLeft = r.Next(0, System.Windows.SystemParameters.PrimaryScreenWidth)
    End Sub

    Public Sub move()
        If _top > System.Windows.SystemParameters.PrimaryScreenHeight Then
            startFresh()
        Else
            _top += speed
            _left = amplitude * Math.Cos(period * _top) + startLeft
        End If

        NotifyPropertyChanged("top")
        NotifyPropertyChanged("left")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:09:05.223

在画布内更新 UIElement 上的 LeftProperty 和 TopProperty 会强制每次更新都进行新的布局传递。从性能的角度来看，WPF 中的布局非常昂贵。您应该改用[UIElement.RenderTransform](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)属性。

# iis - Web.config machinekey 陷阱 - 使用概念中是否有机器密钥？

> ID：13723566
> 
> 赞同：1
> 
> 时间：2012-12-05T12:44:47.097
> 
> 标签：iis, machinekey

我担心 IIS 管理员用户可能会意外按下生成键，从而导致 web.config 中的机器键被覆盖。人们不那么担心，因为你只是从备份中得到它吗？还是每个人都有可靠的管理流程或优秀的管理员不这样做？

我在 IIS 的开发机器上，只是按下了错误站点上的按钮。测试用户被冲洗，直到从备份中恢复机器密钥..

我现在想知道我是否应该有一个客户 web.config 属性？

这里有什么好的管理实践？还有什么智慧之言？除了我是 IIS 管理员 Donk。是否有一些正常的方式来指示正在使用的密钥，不能/不能再生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:04:15.043

据我所知 - 没有。经过一番研究仍然没有。

在处理多个机器密钥时，一个好的做法是将它们全部手动生成在共享管理资源（电子表格、txt 文档等）中。如果出现问题，请从那里恢复。作为管理员，如果您使用这些应用程序，您有责任按顺序保存某些应用程序的密钥。

不用担心，错误会发生。数据库被锁定，IIS 服务器崩溃等。我们所有的管理员/开发人员仍然能够通过工具和功能自动纠正人为错误。这只是其中之一。

当然，不太简单的方法是构建您自己的工具（控制台/gui）来执行某些验证并仅使用它来操作密钥。

# android - Android：在 ContentProvider 中处理非常大的数据集以避免内存限制

> ID：13723567
> 
> 赞同：2
> 
> 时间：2012-12-05T12:44:47.067
> 
> 标签：android, sqlite, android-contentprovider, android-cursorloader

我正在使用 a`ContentProvider`来查询数据库并返回 a`Cursor`中使用的 a `CursorLoader`：

项目活动：

```
public class ItemsActivity extends SherlockActivity implements LoaderCallbacks<Cursor> {

    @Override
    public void onCreate(Bundle savedInstance) {
        ....
        getSupportLoaderManager().initLoader(LOADER_ID, null, this);
        ...
    }

    @Override
    public Loader<Cursor> onCreateLoader(int loaderId, Bundle bundle) {
        return new CursorLoader(getApplicationContext(), itemsListUri, ...); 
    }

    ...
} 
```

项目内容提供者：

```
public Cursor query(Uri uri, String[] projection, String selection, ...) {
    SqliteQueryBuilder builder = new SqliteQueryBuilder();
    builder.setTables(ItemsTable.NAME);
    return builder.query(db, projection, selection, ...);
} 
```

该活动有一个`ListView`，我正在使用一个`CursorAdapter`（通过更新`LoaderCallbacks`）来表示游标内的数据。

这工作正常，直到我需要在大型数据集中查找项目（例如，超过 30,000 行）。观察日志，我发现查找超出了内存限制，并且从结果游标中删除了一些行。

我的问题：当使用这样的游标时，处理非常大的数据集的最佳方法是什么？

我当前的解决方案是将 SQLite 查询`ContentProvider`分解为具有偏移量和限制的查询序列，然后使用`MergeCursor`类组合这些查询：

```
private static final int LIMIT = 5000;

// Ignoring projection, selection, etc for simplicity here
public Cursor query(Uri uri, String projection, String selection, ...) {
  List<Cursor> cursors = newList();
  int offset = 0;
  Cursor c = db.rawQuery("select * from items limit " + LIMIT + " offset " + offset, null);
  while (c.getCount() > 0) {
    cursors.add(c);
    offset += c.getCount();
    c = db.rawQuery("select * from items limit " + LIMIT + " offset " + offset, null);
  }
  return createMergedCursor(cursors);
}

private Cursor createMergedCursors(List<Cursor> cursors) {
    if (cursors.size() == 1) {
        return cursors.get(0);
    }
    return new MergeCursor(toCursorsArray(cursors));
} 
```

这将加载所有数据，但在第一次进行查找时会有很长的延迟。执行多个查询时，列表视图大约 5 秒为空。

请注意，当我尝试单个查找（而不是批量查找）时，加载几乎是瞬时的，尽管在达到内存限制时滚动列表时会有轻微的暂停。

所以：

使用单个查询：快速列表视图更新，但达到滚动暂停和内存限制。

使用批处理查询：列表视图更新缓慢，但滚动很流畅，没有达到内存限制。

我想知道是否有更好的解决方案可以快速更新列表视图，但在滚动列表时也会根据需要获取更多数据。

安卓 4.2.1，Nexus 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T20:57:02.380

移动设备并非旨在处理这些数据量。

但是，如果您真的想给可怜的用户施加如此大的滚动列表，您可以将其设计为仅按需加载条目的虚拟列表；请参阅[Android 无尽列表](https://stackoverflow.com/questions/1080811/android-endless-list)。

注意：使用`OFFSET`子句是低效的；有关详细信息，请参阅[滚动光标](http://www.sqlite.org/cvstrac/wiki?p=ScrollingCursor)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:54:40.350

I agree with CL that you shouldn't do this. This isn't a good idea on mobile and neither is it on desktops. Who wants to scroll 30000 elements? What for? Most probably the user is looking for one result only, isn't she? So provide an easy way to filter the result set.

Until the result set is small enough to be actually usable (this is not the same as the list scrolling fine - it's probably a much smaller number of results) you simply should display the total number of hits for the current query and maybe some elements as a sample to the user. The user must filter the list to get to actually usable sizes.

# postgresql - 使用 rails 脚本将记录插入 Heroku Postgres 数据库

> ID：13723570
> 
> 赞同：0
> 
> 时间：2012-12-05T12:44:56.787
> 
> 标签：postgresql, heroku

我需要从其他数据库更新数据库...为此我需要在现有数据库中搜索记录是否存在，如果不添加...其中一个数据库本地存储在我的计算机中，另一个在heroku ...但我不知道如何从我的计算机访问heroku数据库以创建插入并查询我是否必须插入...

知道我该怎么做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:01:21.363

您可以通过任何 DB 工具（例如带有 Postgres JDBC 连接器的 Oracle SQL Developer）连接到 Heroku Postgres DB。您的实例的参数列在 postgres.heroku.com 的 GUI 中。

# spring - 瓷砖问题：运行 JUnit 测试时无法加载 ApplicationContext

> ID：13723571
> 
> 赞同：1
> 
> 时间：2012-12-05T12:45:01.617
> 
> 标签：spring, spring-mvc, junit, tiles

我正在尝试使用 JUnit 测试 Spring MVC 控制器。

以下是我在 JUnit 类中配置上下文的方式：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/META-INF/spring/applicationContext*.xml", "file:src/main/webapp/WEB-INF/spring/webmvc-config.xml" }) 
```

然后我像往常一样在测试中自动连接我的控制器：

```
@Autowired
private PliController pliController; 
```

运行测试时出现以下错误：

```
2012-12-05 12:56:02,921 [main] ERROR org.springframework.test.context.TestContextManager.prepareTestInstance - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@3c8db9] to prepare test instance [trc.suivi.core.security.AuthorizationTest@17c804b]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tilesConfigurer' defined in URL [file:src/main/webapp/WEB-INF/spring/webmvc-config.xml]: Invocation of init method failed; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: java.lang.NullPointerException
    at org.springframework.web.servlet.view.tiles2.SpringTilesApplicationContextFactory$SpringWildcardServletTilesApplicationContext.<init>(SpringTilesApplicationContextFactory.java:72)
    at org.springframework.web.servlet.view.tiles2.SpringTilesApplicationContextFactory.createApplicationContext(SpringTilesApplicationContextFactory.java:55)
    at org.springframework.web.servlet.view.tiles2.TilesConfigurer.afterPropertiesSet(TilesConfigurer.java:335)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 38 more 
```

任何人都可以帮忙吗？

**编辑 1**：请注意，此问题不会发生在测试环境之外。

**编辑2**：感谢Biju，我设法让它工作：这是相关配置：

```
private String contextLocWeb = "file:src/main/webapp/WEB-INF/spring/webmvc-config.xml";
private String contextLoc = "classpath:/META-INF/spring/applicationContext*.xml";
private String warDir = "src/main/webapp";

MockMvc mockMvc = MockMvcBuilders.xmlConfigSetup(contextLocWeb, contextLoc).configureWebAppRootDir(warDir, false).build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:21:24.953

原因是 Tiles 配置需要 ServletContext 的可用性，而使用 JUNIT 运行时不存在该 ServletContext。我过去使用的修复方法是使用新的[Spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)（也可在 Spring 3.2RC1 中使用）模块来测试 Spring 控制器，并且对在 web 上下文中加载有很好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-17T16:09:11.193

有同样的问题，用注释测试类修复`@WebAppConfiguration`

并添加以下依赖项`classpath`：

```
 <dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.12</version>
  <scope>test</scope>
 </dependency>
 <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-test</artifactId>
  <version>4.1.4.RELEASE</version>
  <scope>test</scope>
 </dependency>
 <dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>javax.servlet-api</artifactId>
  <version>3.0.1</version>
 </dependency>
 <dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jsp-api</artifactId>
  <version>2.0</version>
 </dependency> 
```

# c# - 是否可以在 powerpoint 插件中跟踪形状变化？

> ID：13723574
> 
> 赞同：4
> 
> 时间：2012-12-05T12:45:11.400
> 
> 标签：c#, powerpoint, office-addins

目前在我的 ppt addin 项目中，我想知道是否可以跟踪用户所做的形状更改：

*   文本框 A 移至 ( 210, 100)
*   文本框 B 将字体更改为 Calibri
*   文本框 B 将样式更改为下划线
*   删除文本框 C
*   添加图像 A
*   将图像 A 的大小调整为 320x240
*   ...

我所知道的 PPT 2013 有一个`AfterShapeSizeChange`事件，所以你可以在重新调整大小后知道，但我需要的不止这些，这是用户所做的所有可能的更改。

尝试通过浏览找出后，这里有一些可能性：

1.  `CTRL`使用 SelectionChanged 事件创建我自己的日志跟踪，但如果用户按下+`Z`或`CTRL`+ ，这会很棘手`Y`
2.  查看撤消/重做堆栈（人们说这是不可能的......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:12:25.553

我有同样的问题。

让我说，我认为最好的解决方案是将形状序列化为 XML（形状状态）并将其保存在形状本身中。这样，下次访问形状时，您可以使用序列化的形状检查当前状态。

可以将 XML 保存在一个形状中，但是您不能在“一个命令”中序列化 COM 形状，您已经实现了自己的序列化来查看所有形状属性（!!!! 我认为很多）。

我所做的解决方法是：每次用户在幻灯片中放置一个形状（比如说 ShapeA）时，在特定母版页（ShapeA_state1）中创建一个形状副本，新形状保持我的 ShapeA 状态。然后我将对该 ShapeA_state1 的引用保存到 ShapeA 中。这样，当应用程序第二次访问 ShapeA 时，应用程序可以检查状态是否已更改并查看引用的 ShapeA_state1。发生这种情况时，ShapeA.1 将更新为 ShapeA_edited

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:40:52.607

您是否需要实际跟踪更改，或者您是否需要能够检测到已进行更改？即，给定的形状与原始形状不完全相同。

如果是后者，这个怎么样：

编写一个例程，“触摸”演示文稿中的每个形状并为其添加标签，每个属性一个标签，您希望能够检测到更改。

然后你需要做的就是查看每个形状的标签，看看存储在那里的属性是否与形状的当前属性相匹配。

例如，要标记形状：

```
For each oSl in ActivePresentation.Slides
  For each oSh in oSl.Shapes
    oSh.Tags.Add "Left", cstr(oSh.Left)
    oSh.Tags.Add "Top", cstr(oSh.Top)
  Next
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T22:24:39.293

解决此问题的另一种方法是在程序中添加一个线程来监视 Application.ActivePresentation.Saved - 如果它设置为 false，您就知道已经进行了更改并且可以查看选定的对象或幻灯片 - 当然您需要添加用于重置 Saved 标志的层 - 并在保存之前将其传回。

我没有成功访问撤消信息。

我在 PPT 之前添加鼠标钩子和拦截按钮按下取得了很好的成功 - 非常适合在 Application_SlideShowBegin 之前拦截 PlaySlideShow 按钮以及在 Application_SlideShowNext* 事件之前播放期间的 Next/Prev 幻灯片等内容。

在确定您希望拦截的按钮位置时，请记住诸如 PresenterMode 和 DPI 比例变化之类的事情。

# sql-server-2008-r2 - 显示来自 SSRS 报告管理器的自定义错误，用于 rsProcessingAborted

> ID：13723577
> 
> 赞同：3
> 
> 时间：2012-12-05T12:45:18.933
> 
> 标签：sql-server-2008-r2, ssrs-2008, reportbuilder3.0

我正在使用 SQL Server 2008 R2 Reporting Services，使用 Report Builder 3.0 设计报表并通过报表管理器（`http://host/Reports/`而不是`http://host/reportserver/`）查看它们。

我以这种方式构建和访问了大量报告，从每小时刷新的数据库中读取数据。刷新过程需要几分钟，是我编写的一个简单的 ETL C# 脚本（针对每个表）删除所有匹配的行并插入新数据（在事务内）。这可能是我需要更改的过程的这一部分，所以我用 SQL Server 2008 R2 标记了这个问题。

我的问题是，**每当导入和 SSRS 报告执行同时运行时，我都会收到 rsProcessingAborted 错误**。如果底层数据在执行时发生变化，它看起来像处理中止。我的一份报告非常复杂，需要几分钟才能运行，所以我经常看到这个错误，而在其他报告中通常根本看不到它。

```
An error has occurred during report processing. (rsProcessingAborted)
Cannot read the next data row for the dataset xxx. (rsErrorReadingNextDataRow) 
```

这些报告需要与不想看到错误的用户共享。有什么办法可以吗

*   使我的导入脚本和 SSRS 执行“原子”，以便报告能够运行
*   自定义报告管理器中显示的 rsProcessingAborted 错误，以便向用户显示一条消息，例如“正在刷新此报告背后的数据。请在 5 分钟后重试。” - 仍然很烦人，但比上面的错误更好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T21:58:27.833

在您的报告中使用“NOLOCK”表格提示。

```
For Example:

SELECT [LastName] FROM [dbo].[AuditLog] WITH (NOLOCK) 
```

# javascript - Javascript/jQuery - 以英尺和英寸显示英寸

> ID：13723585
> 
> 赞同：3
> 
> 时间：2012-12-05T12:45:37.453
> 
> 标签：javascript, jquery, html, math

我正在制作一个 BMI 计算器（请参阅 JSFiddle - [http://jsfiddle.net/b5ww2/](http://jsfiddle.net/b5ww2/)），我希望以英寸为单位的高度以英尺和英寸为单位显示。我还希望以磅为单位的重量以石头和磅为单位显示。

这是我用来将滑块值转换为厘米和英寸的代码：

```
slide: function( event, ui ) {
  $( "#heightslidecm" ).html( ui.value + 'cm' );
  $( "#heightslidein" ).html( (ui.value*0.393700787).toFixed(0) + 'in' );
} 
```

我的 js 知识不是很好——尤其是在数学方面。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T12:54:38.280

您只需要包含转换的逻辑。这是英尺和英寸的示例：

```
slide: function( event, ui ) {
    $( "#heightslidecm" ).html( ui.value + 'cm' );

    var inches = (ui.value*0.393700787).toFixed(0);
    var feet = Math.floor(inches / 12);
    inches %= 12;

    $( "#heightslidein" ).html( feet + "ft " + inches + 'in');
} 
```

您只需要使用适当的转换值对磅/石头重复相同的逻辑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-14T23:26:09.717

好的——在谷歌搜索并登陆这里之后，我尝试了上面的方法。尽管该帖子与将厘米 (CM) 转换为英寸有关，但它会出现在 Google 中以进行任何转换（在我的情况下，将英寸转换为英尺和英寸）。

对于我的项目，我试图将英寸转换为英尺和英寸（但我在这里）。为了节省遇到英寸到英尺和英寸问题的其他人，一个额外的 uGoogle-eh 这里是我将如何在 Javascript 中做到这一点：

```
 let height = 75; // this could be any number of inches
                let feet = Math.floor(height / 12);
                let inches = (height - (feet * 12)); 
```

以上应该可以让你从英寸转换为英尺和英寸（如果谷歌在不知不觉中把你带到了这里，就像它对我所做的那样）。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-16T04:56:48.310

这是我的答案。我将以下 excel 公式转换为 JavaScript。

```
=INT(B5/12)&"ft.  "&ROUND(MOD(B5,12),1)&"in." 
```

```
function toFeetandInch(inches){
    return (parseInt(inches/12) + ' ' + Math.round(inches%12,1)+"'")
}

console.log(toFeetandInch(69))
```

# excel - 合并来自多个单元格的文本时在 Excel 中格式化日期

> ID：13723587
> 
> 赞同：1
> 
> 时间：2012-12-05T12:45:42.070
> 
> 标签：excel, formatting

我有一个 Excel 表，其中包含许多单元格中的一些文本，需要将它们合并到一个单元格中。很简单，除了其中一个单元格是日期，当组合文本时，您会以基数格式而不是日期格式获得日期。

例子：

A1 = `"One"` A2 = `"Two"` A3 = `"05.12.2012"` A4 = `=A1&" "&A2&" "&A3`=`"One Two 41248"`

任何人都知道在 A3 之前我需要做什么才能让公式返回 05.12.2012 而不是 41248。我尝试过“DATE”和“DATEVALUE”等。

如果它是相关的，则日期来自在数组中查找值的公式。为了便于阅读，我省略了这个论坛。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:51:18.050

A4 =`=A1&" "&A2&" "&TEXT(A3,"DD.MM.YYYY")`

# php - Zend 框架和 php 取消链接文件

> ID：13723589
> 
> 赞同：0
> 
> 时间：2012-12-05T12:45:55.737
> 
> 标签：php, html

我正在尝试使用 CHECKBOX 字段从提交的表单中删除一些图像，以及相关的隐藏字段以获取要从文件中取消链接的图像名称。我正在使用 Zend FW，在控制器中我有这个：

```
 if ($input->isValid()) {
            $q = Doctrine_Query::create()
                ->delete('Immobiliare_Model_Images i')
                ->whereIn('i.ImageID', $input->ids);

        $result = $q->execute()

 $image = $this->_getParam('Image');            
        foreach($image as $img) {
             if(isset($input->ids)) {               
             $file = "./uploads/$img";
                    unlink($file);
                 } } 
```

上面代码的问题是它取消了所有文件的链接，即使是那些没有被检查的文件。也试过这个：

```
$image = $this->_getParam('Image');
      if(isset($input->ids)) {  
          foreach($image as $img) {
             $file = "./uploads/$img";
                 unlink($file);
                 } } 
```

同样的问题：数组中的所有文件都被删除（取消链接）。如果我不使用 foreach() 函数，则不会删除任何文件。可以说删除数据库中的文件名一切正常。

所以我的问题是：如何取消选中复选框的图像的链接？谢谢您的帮助。

html是这样的：

```
<?php foreach($this->records as $r):?>
 <input type="checkbox" name="ids[]" value="<?php echo $r['ImageID']; ?>" class="require-one" />
 <input type="hidden" name="Image[]" value="<?php echo $this->escape($r['Image']); ?>" />
 <?php endforeach; ?> 
```

……

# actionscript-3 - 在闪存中保存没有提示窗口的文件？

> ID：13723593
> 
> 赞同：1
> 
> 时间：2012-12-05T12:46:29.620
> 
> 标签：actionscript-3, flash

我正在 Flash 中制作卡拉 OK 应用程序，但我遇到了问题。当客户端停止唱歌时，我希望将此录音保存在服务器上的特定文件夹中，而没有提示消息。到目前为止我使用的所有上传或下载应用程序`FileReference`，但它总是有提示信息。有没有办法直接保存歌曲？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:06:13.257

我假设您打算保存已录制到服务器的 .wav 文件。

```
// AS3 code
var request:URLRequest = new URLRequest ( 'http://pathto/save.php' );
var loader: URLLoader = new URLLoader();
request.contentType = 'application/octet-stream';
request.method = URLRequestMethod.POST;
// bytes is your byteArray containing an encoded .wav file ready to save.
request.data = bytes;
loader.load( request );

//PHP code
$fp = fopen( 'filename.wav', 'wb' );
fwrite($fp, file_get_contents('php://input'));
fclose( $fp ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:12:39.100

[http://www.red5-recorder.com/](http://www.red5-recorder.com/)看起来是一个不错的起点

# c# - 如何将 MetadataTypeAttribute 与扩展类一起使用

> ID：13723596
> 
> 赞同：3
> 
> 时间：2012-12-05T12:46:43.193
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我想向实体添加一个`DisplayAttribute`（`Client`来自另一个项目），但不想用特定于 MVC 或 UI 层的属性污染我的实体。所以我计划通过将元数据类应用于从实体**继承**`DisplayAttribute`的视图模型来添加

 **如果我从`Client`实体继承然后尝试使用`MetadataTypeAttribute`添加显示属性，它不会显示在浏览器中。有谁知道我如何实现分离以及能够将元数据添加到我的实体的功能？

`Client`实体类：

```
public class Client
{
    private string firstName;

    private string lastName;

    private string homeTelephone;

    private string workTelephone;

    private string mobileTelephone;

    private string emailAddress;

    private string notes;

    public Title Title { get; set; }

    public string FirstName
    {
        get { return this.firstName ?? string.Empty; }

        set { this.firstName = value; }
    }

    public string LastName
    {
        get { return this.lastName ?? string.Empty; }

        set { this.lastName = value; }
    }

    public string FullName
    {
        get
        {
            List<string> nameParts = new List<string>();

            if (this.Title != Title.None)
            {
                nameParts.Add(this.Title.ToString());
            }

            if (this.FirstName.Length > 0)
            {
                nameParts.Add(this.FirstName.ToString());
            }

            if (this.LastName.Length > 0)
            {
                nameParts.Add(this.LastName.ToString());
            }

            return string.Join(" ", nameParts);
        }
    }

    public Address Address { get; set; }

    public string HomeTelephone
    {
        get { return this.homeTelephone ?? string.Empty; }

        set { this.homeTelephone = value; }
    }

    public string WorkTelephone
    {
        get { return this.workTelephone ?? string.Empty; }

        set { this.workTelephone = value; }
    }

    public string MobileTelephone
    {
        get { return this.mobileTelephone ?? string.Empty; }

        set { this.mobileTelephone = value; }
    }

    public string EmailAddress
    {
        get { return this.emailAddress ?? string.Empty; }

        set { this.emailAddress = value; }
    }

    public string Notes
    {
        get { return this.notes ?? string.Empty; }

        set { this.notes = value; }
    }

    public Client()
    {
        this.Address = new Address();
    }
} 
```

`ClientViewModel`视图模型类：

```
[MetadataType(typeof(ClientMetaData))]
public class ClientViewModel : Client
{
    internal class ClientMetaData
    {
        [Display(ResourceType = typeof(ResourceStrings), Name = "Client_FirstName_Label")]
        public string FirstName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:07:25.640

我认为您已将 typeof 参数更改为：

```
[MetadataType(typeof(ClientViewModel.ClientMetaData))]
public class ClientViewModel : Client
{
    internal class ClientMetaData
    {
        [Display(ResourceType = typeof(ResourceStrings), Name = "Client_FirstName_Label")]
        public string FirstName { get; set; }
    }
} 
```**

# java - 使用嵌套的 if/else if 时，我怎样才能打破我的行为？

> ID：13723598
> 
> 赞同：-5
> 
> 时间：2012-12-05T12:46:53.333
> 
> 标签：java, if-statement, break, do-while

这是我拥有的代码，但我不得不承认我已经变得有点代码盲，并且似乎看不到问题，尽管我觉得这很容易。任何帮助将非常感激。先感谢您。

```
 do{
        System.out.println("Command:");
        scan = new Scanner (System.in);

        String line;                        

        line = scan.nextLine();

        String[]SplitUpText;

        SplitUpText=line.split(" ");

        Command = SplitUpText[0];

        int param1=-1, param2=-1;

        if (Command.compareTo("move")==0)
        {
            if (SplitUpText.length>1)
            {
                param1=Integer.parseInt(SplitUpText[1]);
                if(SplitUpText.length>2)
                {
                    param2=Integer.parseInt(SplitUpText[2]);
                }
            }g.moveTo (param1, param2);

        }else if(Command.compareTo("circle")==0){

            if (SplitUpText.length>1)
            {
                param1=Integer.parseInt(SplitUpText[1]);
            }g.circle (param1);
        }else if(Command.compareTo("line")==0){
            if (SplitUpText.length>1)
            {
                param1=Integer.parseInt(SplitUpText[1]);
                if(SplitUpText.length>2)
                {
                    param2=Integer.parseInt(SplitUpText[2]);
                }
            }g.lineTo (param1, param2);
        } else {
            System.out.println("Invalid Command");
        }

    } while (Command.compareTo ("end")!=0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:48:35.533

通常最好的做法是避免它（通过向`while`表达式添加条件），但如果你想提前结束循环，你可以使用`break;`

这是一个更简单的例子：

```
int i;

i = 0;
do {
    ++i;
    System.out.println("Before: " + i);
    if (someSpecialCondition) {
        break;
    }
    System.out.println("After: " + i);
}
while (i < 5); 
```

假设特殊情况发生在`i`刚刚成为时`3`，输出将是：

```
之前：1
之后：1
之前：2
之后：2
之前：3
```

请注意如何`break`终止循环。它可以用于所有类型的循环（`do..while`,`while`和两种循环`for`）。

如果您有嵌套循环并且需要从内部循环中中断外部循环，您可能应该将该代码重构为子方法。但是，如果您不想重构，可以使用*定向* `break`：

```
int i, j;

outerLoop: for (i = 0; i < 5; ++i) {
    for (j = 0; j < 5; ++j) {
        if (i == 2 && j == 2) {
            break outerLoop;
        }
    }
} 
```

在那里，`outerLoop`标记外循环，并`break outerLoop`导致内循环和外循环都终止。但是，如果你开始这样做，那么可能是重构的时候了。

更多来自 JLS：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:49:11.600

考虑使用 break 语句。

# iphone - 在 UITableview 中显示 Plist

> ID：13723600
> 
> 赞同：3
> 
> 时间：2012-12-05T12:47:00.697
> 
> 标签：iphone, ios, uitableview, plist

我想显示`Plist`到`UITableView`。通过我下面的代码，我可以显示一个键值，即`list of states`. 但我想显示三个表的所有值。

```
- (id)readPlist:(NSString *)fileName 
{
NSData *plistData;
NSString *error;
NSPropertyListFormat format;
id plist;

NSString *localizedPath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"plist"];
plistData = [NSData dataWithContentsOfFile:localizedPath]; 

plist = [NSPropertyListSerialization propertyListFromData:plistData mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];
if (!plist) {
NSLog(@"Error reading plist from file '%s', error = '%s'", [localizedPath UTF8String],      [error UTF8String]);

}

return plist;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [[[self readPlist:@"sample"] objectForKey:@"ListOfStates"] count];

}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

cell.textLabel.text = [[[self readPlist:@"sample"] objectForKey:@"ListOfStates"] objectAtIndex:indexPath.row];

return cell;} 
```

我的输出只有`listofkeystates`值

![输入图片](../Images/857b43b284100e6d330ce91bc3a03058.png) 是否也可以显示`key`名称`values`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:55:13.740

也许使用表格部分......

```
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView {
    NSDictionary* dict = [self readPlist:@"sample"];
    return dict.allKeys.count;
}

-(NSString*) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSDictionary* dict = [self readPlist:@"sample"];
    return [dict.allKeys objectAtIndex:section];
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSDictionary* dict = [self readPlist:@"sample"];
    NSString* key = [dict.allKeys objectAtIndex:section];
    return [[dict valueForKey:key] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary* dict = [self readPlist:@"sample"];
    NSString* key = [dict.allKeys objectAtIndex:indexPath.section];
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [[dict objectForKey:key] objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:12:45.523

**EDIT** : Corrected some typo mistakes

The idea

1.  Loading plist in a dictonary
2.  optional : sort it (!)
3.  create the array of data for each section
4.  create the array of section

Then implement the following things

1.  viewDid load -> load the plist file in a dictionary, create an array of the sections and a dictionary of the data

2.  numberOfSectionsInTableView -> the number of sections. In your case the number of keys

3.  numberOfRowsInSection -> the number of rows of each section

4.  titleForHeaderInSection -> for each section, the title of the section

5.  cellForRowAtIndexPath -> the data of all row

6.  sectionIndexTitlesForTableView -> the array that holds all you sections names. In your case all the keys

assuming you have a property called mySections and a property called myData also assuming you use storyboard with standard cell with recycle identifier "Cell"

```
 @synthesize mySections
   @synthesize myData        

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        //LOADING THE PLIST FILE

        //Create a string representing the file path
        NSString *plistPath = [bundle pathForResource:@"yourFilename" ofType:@"plist"];

        //Load the file in a dictionnary
        NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistPath];

        self.myData = dict;

       //SORTING THE DICTIONARY    
       NSArray *dicoArray = [[self.myData allKeys] sortedArrayUsingComparator:^(id firstObject, id secondObject) {
          return [((NSString *)firstObject) compare:((NSString *)secondObject) options: NSCaseInsensitiveSearch];
      }];

      self.mySections = dicoArray;
    }

   - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
       //Return the number of sections.
       return [self.mySections count];
   }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {
       // Return the number of rows in the section.
       NSString *key = [self.mySections objectAtIndex:section];
       NSArray *dataInSection = [self.myData objectForKey:key];
       return [dataInSection count];
  }

  -(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
      NSString *key = [self.mySections objectAtIndex:section];
      return [NSString stringWithFormat:@"%@", key];
    }

  -(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
        return self.mySections;
   }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
 {
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    NSString *key = [self.mySections objectAtIndex:section];
    NSArray *dataForSection = [self.myData objectForKey:key];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    cell.textLabel.text = [dataForSection objectAtIndex:row];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T12:53:34.303

只是尝试获取数据`NSDictionary`然后`NSArray`使用它`UITableView`

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"plist"]; 
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:file]; 
```

并使用 tableValue 的名称，如下所示...

```
NSArray *array = [dict objectForKey:@"ListOfStates"]; 
NSLog(@"%@", array); 
```

我希望这对你有帮助..

# svn - 什么是用于监视提交和查看变更集等的好的 SVN 客户端？

> ID：13723603
> 
> 赞同：1
> 
> 时间：2012-12-05T12:47:07.453
> 
> 标签：svn

我正在寻找一个 SVN 客户端的建议，该客户端不像大多数客户端那样面向开发代码和提交变更集的实际行为，而是更倾向于监控团队 SVN 活动、浏览源代码、查看提交差异/变更集等。奖励功能将是提交的实时通知，但只要我可以看到最近提交的列表以及用户名和时间，然后单击它以查看变更集，那就太酷了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:44:20.020

[变更列表](http://svnbook.red-bean.com/en/1.7/svn.advanced.changelists.html)严格来说是一种客户端组织工具，因此您无法在那里进行监控。

如果您使用的是 Windows，则有[CommitMonitor](http://tools.tortoisesvn.net/CommitMonitor.html)

有许多基于 Web 的存储库查看器，例如[ViewVC](http://www.viewvc.org/)和[Trac](http://trac.edgewall.org/)；一些“打包的解决方案”，如[Subversion Edge](http://www.collab.net/products/subversion)和[UberSVN 将](http://www.wandisco.com/ubersvn)存储库查看器和管理工具捆绑在一起。

但是，您可以做的最好的“监控”是与您的团队交谈并讨论他们正在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:03:40.983

*   [Vercue](http://www.vercue.com/)即使在免费版中也是很好的提交监视器（在专业版中也*很出色）*
*   [WebSVN](http://www.websvn.info/)是 SVN-repos（本地和远程）的良好 RO 前端，不会因不相关的功能而过载

# gcc - GCC，-W1 是什么意思

> ID：13723609
> 
> 赞同：4
> 
> 时间：2012-12-05T12:47:23.757
> 
> 标签：gcc, g++, makefile, cc

我有一个使用 -W1 参数的遗留 Makefile，我没有找到任何引用，我认为这可能是一个错字，'1' 应该是 'l'。但是，它有效......那么，任何人都可以解释为什么这条线有效吗？

```
@$(CC) $(CFLAGS) -shared -W1,-soname,$(LIBNAME) -o $(OUTDIR)/$(LIBNAME) $(OBJS) 
```

$(CC) 是 GCC，编译出来的文件是 C 文件。当我尝试使用此命令编译 CPP 文件时，我才得到

```
cc1plus: error: unrecognized command line option "-W1,-soname... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:50:18.173

它看起来像一个错字，应该是这样`-Wl`。

`l`在某些字体中，有时很难区分小写 L ( ) 和数字 1。

# vb.net - 出现错误：“无效的 DateTimeKind-Value。参数名称：种类”

> ID：13723610
> 
> 赞同：0
> 
> 时间：2012-12-05T12:47:29.683
> 
> 标签：vb.net, datetime, time

我有以下代码：

```
Dim TimeVon As Date = Booking.From

Dim DateVon As Date = New Date(TimeVon.Minute, TimeVon.Hour) 
```

在 Booking.From 中 DateTime 保存为：`2/1/2013 12:30:00`

我尝试使用第二行获取时间，但每次都会出现该错误。我在做什么错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:16:37.433

我不认为这`New Date(TimeVon.Minute, TimeVon.Hour)`是一个有效的构造函数，请参阅[DateTime Constructors](http://msdn.microsoft.com/en-us/library/system.datetime.datetime.aspx)。

`Date`本质上总是包含一个日期和时间组件。你想用时间做什么？你总是可以像这样显示时间[`DateVon.ToShortTimeString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshorttimestring.aspx)

# http - 使用 Python 2.7.3 的 HTTP 请求

> ID：13723619
> 
> 赞同：0
> 
> 时间：2012-12-05T12:47:56.580
> 
> 标签：http, python-2.7, httprequest, urllib, urlopen

我有一个字符串 结果这个字符串是**URL www.test.com**

我知道 www.test.com 上有一个编号为**4**的网站。我会将程序中的数字保存为整数。

```
import urllib
giveTheInt = [urllib.urlopen(url)] 
```

但我只收到：

```
IOError: [Errno socket error] [Errno 110] Connection timed out. 
```

无线没问题，我有互联网连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T08:01:54.790

我知道这是`urllib2`，但我看到了你的帖子，这对我有用。

```
#!/usr/bin/env python
import urllib2
response = urllib2.urlopen('http://ron-swanson-quotes.herokuapp.com/v2/quotes')
# print response.info()
data = response.read()
print data
response.close()  # best practice to close the file 
```

取自[这里](http://www.pythonforbeginners.com/python-on-the-web/how-to-use-urllib2-in-python/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:13:47.470

这是你要找的吗？

```
#!/usr/bin/env python
import urllib

url = "http://stackoverflow.com"
fp = urllib.urlopen(url)
data = fp.read()
n = int(data)
giveTheInt = [n]
print(giveTheInt) 
```

你应该测试你可以ping你的whatever.com。如果您无法 ping 它，这可能就是您遇到错误的原因。

# php - PHP eval 的限制

> ID：13723623
> 
> 赞同：1
> 
> 时间：2012-12-05T12:48:10.073
> 
> 标签：php, security, eval

我有需要评估的逻辑表达式。在使用其参数参数化一些表达式模板之后，这些表达式可能如下所示：

```
$expr1 = '1 or 0 and not(0 or 0)';
$expr2 = "'editor' == 'editor' and not(0 = 1) and 10 > 5"; 
```

所以，我需要处理数字、字符串文字，以及逻辑和代数运算符以及它们之间的圆括号。

使用 PHP eval 时，我还会获得不受欢迎的不安全功能，例如系统函数调用等。

那么，有没有办法限制 PHP eval，或者可能有更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:55:52.620

您可以使用标记器来检查表达式是否不包含函数调用。

有关示例，请参见[更安全的 eval() 类](http://evileval.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:49:02.890

好的，我有另一个解决方案。我发现我可以使用 PHP DOMXPath::evaluate 来评估我的逻辑表达式。所以，我得到了一个可行的解决方案，它没有安全问题。我想我的问题已经解决了:)

# javascript - 如何使用javascript获取文本框中的索引位置

> ID：13723624
> 
> 赞同：2
> 
> 时间：2012-12-05T12:48:29.590
> 
> 标签：javascript, textbox, cursor-position

当用户使用 JavaScript 在 textBox 中单击时，如何获取索引位置？例如在我的文本框中有这个字符串：

```
`this is best| of the world`. 
```

它应该是返回 13。

# visual-studio-2010 - 如何允许多个开发人员在 TFS 中编辑相同的代码文件？

> ID：13723630
> 
> 赞同：3
> 
> 时间：2012-12-05T12:48:51.303
> 
> 标签：visual-studio-2010, tfs, tfsbuild

我是**TFS 2010**的新手并配置了源代码控制。我们希望在我们的解决方案（ReportViewer.aspx）中使用*单个代码文件*，但不幸的是，当我们其中一个人检查源代码文件时，其他团队成员的源代码文件无法访问相同的源代码并被锁定。

除此之外，我们报告的所有数据绑定都在 ReportViewer.aspx 处理程序中区分。这个问题可能是由于其他方式，任何团队成员签出**解决方案文件** （例如添加参考），其他团队成员无法访问锁定文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:28:01.930

正如 Edward 所提到的，您将需要[启用多个签出](http://msdn.microsoft.com/en-us/library/ms242869.aspx)，以便多个开发人员可以处理单个文件。然后，他们需要在签入过程中合并他们的更改。

这也应该解决您的问题，即解决方案文件被签出并防止其他用户自己添加到解决方案中。

# ruby-on-rails - 为什么迁移没有时间戳时会创建 created_at/updated_at？

> ID：13723632
> 
> 赞同：0
> 
> 时间：2012-12-05T12:48:57.640
> 
> 标签：ruby-on-rails

我正在使用带有以下迁移的 rails 3.2，并且 created_at/updated_at 都生成了。我的印象是添加 t.timestamps 是导致生成这些列的原因。

```
class CreateContactsCountries < ActiveRecord::Migration
  def change
    create_table :contacts_countries do |t|
      t.string :name, :official_name, :null => false
      t.string :alpha_2_code, :null => false, :limit => 2
      t.string :alpha_3_code, :null => false, :limit => 3
    end

    add_index :contacts_countries, :alpha_2_code
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:56:40.233

请删除表格并再次检查，因为

```
By default, the generated migration will include t.timestamps (which creates 
the updated_at and created_at columns that are automatically populated 
by Active Record). 
```

参考[这个](http://guides.rubyonrails.org/migrations.html#creating-a-model)

# unit-testing - 使用 Doctrine Import 执行 SQL 文件

> ID：13723636
> 
> 赞同：0
> 
> 时间：2012-12-05T12:49:10.317
> 
> 标签：unit-testing, doctrine

我有一个 SQL 脚本，打算在运行单元测试时用作数据夹具。我知道 Doctrine DBAL 有一个用于 CLI 的导入命令，但我只对在我的单元测试脚本中运行它感兴趣。

基于

```
\Doctrine\DBAL\Tools\Console\Command\ImportCommand 
```

我正在努力理解如何完全从 PHP 中实现这一点，如果我能提供帮助，而不使用 exec。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T12:43:40.183

查看 ImportCommand 的代码，您可以提取其基本部分来创建自己的函数：

```
protected function executeSqlFile(Connection $conn, $file)
{
    $sql = file_get_contents($file);
    $lines = 0;

    $stmt = $conn->prepare($sql);
    $stmt->execute();

    do {
        // Required due to "MySQL has gone away!" issue
        $stmt->fetch();
        $stmt->closeCursor();

        $lines++;
    } while ($stmt->nextRowset());

    return $lines;
} 
```

# java - 将 libGdx freetype 库添加到 Android 项目时出错

> ID：13723639
> 
> 赞同：3
> 
> 时间：2012-12-05T12:49:11.380
> 
> 标签：java, libgdx, freetype

我正在尝试使用 LibGDX 附带的 libgdx-freetype 库。对于桌面，我只是将`libgdx-freetype.jar`和添加到主项目`libgdx-natives.jar`的`/libs`文件夹（并添加到构建路径），它就可以工作了。但是，当尝试将相同的库添加到`/libs`文件夹并将`libgdx-freetype.so`文件添加到`/libs/armeabi`和`/libs/armeabi-v7a`文件夹时，我收到构建错误：

```
Description Resource    Path    Location    Type
Native libraries detected in 'gdx-freetype-natives.jar'. See console for more information.  
SlotMachine-android     Unknown Android Packaging Problem 
```

在 Eclipse 控制台中，我有：

```
[2012-12-05 17:38:04 - SlotMachine-android] The library 'gdx-freetype-natives.jar' contains native libraries that will not run on the device.
[2012-12-05 17:38:04 - SlotMachine-android] The following libraries were found:
[2012-12-05 17:38:04 - SlotMachine-android]  - libgdx-freetype.so
[2012-12-05 17:38:04 - SlotMachine-android]  - libgdx-freetype64.so 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T13:48:59.907

对于 Android，您不希望包含 gdx-freetype-natives.jar。这仅适用于您的主要项目。在 Android 上，您只需要 gdx-freetype.jar 和 arm 文件夹中的两个 .so 文件。.so 文件是 Android 的原生文件。

# ibm-sbt - SBTPlayground 数据库不显示片段

> ID：13723644
> 
> 赞同：0
> 
> 时间：2012-12-05T12:49:31.633
> 
> 标签：ibm-sbt

当我在我们的 Domino 8.5.3 服务器上安装 SBTPlayground 数据库并在浏览器中查看它时。左栏中没有显示任何片段。片段存在于数据库中。当我查看 Domino 设计器时，我会看到例如在 snippetTree 自定义控件 snippetDoc.getSnippetsAsJson() 中，snippetDoc 是一个托管 bean。但我找不到使用哪个视图。在服务器的控制台中，没有打印关于此问题的错误。在屏幕截图中，您将看到左列。 ![在此处输入图像描述](../Images/ddddee272665f1c3dfb581e41eaf5069.png)

![在此处输入图像描述](../Images/9177d88305a29074570e446c19de616a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:14:55.187

登录
点击 Manage（右侧）
点击 Import / Export
点击 New Import Source
![导入源对话框](../Images/d377ef5e1851b28b470cc91a520f7cd1.png) 输入名称
输入 {sbtsdk}/source/com.ibm.sbt.sample.web/WebContent/js/ 的目录
点击 Save

回到操场

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:44:41.567

通过安装 XPages Bazaar 项目更新站点已修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:09:30.780

你能在 Javascript 控制台中看到任何错误，例如使用 Firebug 吗？根据您的屏幕截图，Dojo 类未正确加载，因此未呈现树或选项卡。

# database - Couchbase 的查询分析器

> ID：13723645
> 
> 赞同：2
> 
> 时间：2012-12-05T12:49:33.460
> 
> 标签：database, performance, nosql, profiler, couchbase

我最近开始尝试使用 Couchbase 2.0。什么是测量沙发库中插入、聚合等操作所花费时间的好方法？是否有可用的分析器？

一种基本方法是测量执行其余 api 命令所花费的时间，但这将包括网络延迟。我正在寻找的是处理器运行命令所花费的时间。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:46:03.467

在监控数据桶时，可以从 UI 控制台看到高级操作/秒，分解为各种操作（读取、写入等）。'cbstats' 工具有一个 'timings' 直方图选项，它将报告操作的时间，并将其分解为操作的重要部分，例如在必要时从磁盘读取项目需要多长时间，或者完成多长时间删除操作等。此命令的文档可在[此处找到](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-cmdline-cbstats.html)

# c# - 加载 adobe 动态表单文件

> ID：13723646
> 
> 赞同：0
> 
> 时间：2012-12-05T12:49:41.663
> 
> 标签：c#, xml, xmldocument, livecycle-designer

我有一个通过 Adob​​e LiveCycle Designer 创建的 .pdf（它是动态 pdf）我想将此 pdf 添加到我的 Windows 应用程序中

这是我试过的

```
File file1 = new File(fileName);
System.Xml.XmlDocument xfadoc = new System.Xml.XmlDocument();
xfadoc.LoadXml(fileName); 
```

这是我获取文件名的方法

```
OpenFileDialog dialog = new OpenFileDialog();
dialog.InitialDirectory = "c:\\";
dialog.Filter = "pdf files (*.pdf) | *.pdf | All Files (*.*) | *.* | xdp files (*.xdp) | *.xdp ";
dialog.FilterIndex = 2;
dialog.RestoreDirectory = true;
dialog.CheckFileExists = true;
dialog.DefaultExt = "pdf | xdp";
fileName = dialog.FileName.ToString(); 
```

但是当我单击打开文件按钮并浏览到我存储它的位置时；它甚至没有出现

此外，当我尝试在我的 C# windows 应用程序中加载此文件时，它在以下行给了我一个异常

```
 xfadoc.LoadXml(fileName); 
```

例外说

```
'Data at root level is invalid' 
```

如果我说我已经加载了字符串（文件路径名），请告诉我如何仅从这个动态文件中提取 xml 部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:12:24.997

[LoadXml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx) loads the document from the string parameter. You want to use the [Load](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.load.aspx) method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:57:02.020

尝试`Filter`在扩展部分不带空格。

```
dialog.Filter = "pdf files (*.pdf)|*.pdf|All Files (*.*)|*.*|xdp files (*.xdp)|*.xdp"; 
```

# android - 以编程方式添加 EditText 框

> ID：13723655
> 
> 赞同：1
> 
> 时间：2012-12-05T12:50:03.473
> 
> 标签：android, android-edittext

我有以下文字。

“**我喝茶和咖啡**”。现在的要求是将此文本更改为“我喝酒`EditText`并且`EditText`”....这里的**EditText**是一个编辑框，用户可以在单击后输入答案。我需要以编程方式进行此更改。

对此有何建议，如何实现？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:11:01.520

您可以在布局 xml 文件中创建活动结构：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
xmlns:tools="http://schemas.android.com/tools" 
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:orientation="horizontal" > 
```

```
&lt;TextView
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:text="I drink " /> 
```

```
&lt;Button
            android:id="@+id/firstAnswer" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:text="EditText" /> 
```

```
&lt;TextView
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:text=" and " /> 
```

```
&lt;Button
             android:id="@+id/secondAnswer" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:text="EditText" /> 
```

```
&lt;/LinearLayout&gt; 
```

并为您的按钮设置监听器

```
private String[] answers = { "tea", "coffee", "juice", "compote" };
    ...
    Button firstAnswer = (Button) findViewById(R.id.firstAnswer);
    firstAnswer.setOnClickListener(new OnClickListener() {
        private int position = 0;
        @Override
        public void onClick(View view) {
            ((Button) view).setText(answers[position]);
            position++;
            if (position == answers.length)
                position = 0;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:58:53.703

您可以在按钮的单击事件处理程序中使用以下代码：

`String str = "I drink tea and coffee";`
`String editTextString = editText.getText().ToString();`
`str.replace("coffee", editTextString);`
`str.replace("tea", editTextString);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:11:58.270

You can use 4 textboxes with texts "I drink" ,"tea" , " and ", "coffee" respectively. On the ontouch event of the 2nd and 4th textbox, you can display a textbox or edittext and edit the text. On a button click you can get the texts from the textboxes and display it again.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:59:18.257

使用`ViewSwitcher`. 此小部件显示它包含的两个视图之一：

```
 <ViewSwitcher
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </ViewSwitcher> 
```

然后，当按下按钮时，将其切换并从`EditText`to加载文本，`TextView`反之亦然：

```
editText.setText(textView.getText());
viewswitcher.showNext(); 
```

或者

```
textView.setText(editText.getText());
viewswitcher.showPrevious(); 
```

有关详细信息，请参阅[此](http://developer.android.com/reference/android/widget/ViewSwitcher.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:52:42.620

通过使用`getText()`

例子

```
Button   mButton;
EditText mEdit;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mButton = (Button)findViewById(R.id.button);
    mEdit   = (EditText)findViewById(R.id.edittext);

    mButton.setOnClickListener(
        new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Log.v("EditText", mEdit.getText().toString());
            }
        });
} 
```

在那之后

```
 mEdit.setText("Tea"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T12:54:08.613

只需使用这个：`yourTextField.setText("..."+yourEditText.getText().toString());`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T12:58:36.257

```
 EditText et=(EditText)findViewByID(R.id.yourId);
 Button bt=(Button)findViewById(R.id.yourBtId);
 bt.setOnClickListener(
              new View.setOnClickListener()
              {
               public void onClick(View v)
               {
                  et.setText("You Drink EditText");
                }
               }); 
```

将这些代码放在 onCreate() 方法中

# mysql - Wordpress MU+MAMP错误建立数据库连接

> ID：13723657
> 
> 赞同：0
> 
> 时间：2012-12-05T12:50:16.857
> 
> 标签：mysql, apache, mamp, wordpress

我正在尝试为 Wordpress MU 站点设置本地环境。

当我尝试使用默认的 apache/mysql-ports 时。我得到错误

```
Error establishing database connection 
```

当我尝试使用 MAMP 默认端口时，我必须在标头中指定端口： [http ://dev.iris.se:8888/](http://dev.iris.se:8888/)

在这种情况下，我得到了 Wordpress 错误

```
Multisite only works without the port number in the URL. 
```

这仅在 wp-config 中输入正确的数据库设置时显示，表明与数据库的连接已建立。

我已经尝试在端口 80（默认 apache）上运行并在 8889（默认 MAMP）上端口 mySQL。我还尝试在配置文件中指定 mamp-port：

```
localhost:8889
127.0.0.1:8889 
```

有没有人不知道我为什么可以连接到数据库？有没有办法在端口 8888 上运行站点而不在浏览器中指定它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:30:14.507

我的 MAMP 机器上运行了多个网站，并且发现使用默认的 Apache 和 MAMP 设置最容易。

而且您不想通过配置文件以这种方式指定 MAMP 移植，而是在您的主 Macintosh 计算机上修改 /etc/hosts 文件。您不应该修改 . 之外的任何内容`fe80::1%lo0 localhost`，因为它会扰乱在您的计算机上读取主机的方式。您在该行下方键入新的虚拟主机，/etc/hosts 文件类似于以下内容：

```
##
# Host Database 
# 
# localhost is used to configure the loopback interface
# when the system is booting. Do not change this entry. 
## 
127.0.0.1         localhost
255.255.255.255   broadcasthost 
::1               localhost 
fe80::1%lo0       localhost 
127.0.0.1         localhost
127.0.0.1         examplesite.local 
```

您可以随意命名 examplesite.local，这是将在浏览器中显示您的网站的 URL。您将这些更改保存到 /etc/hosts 文件，然后转到 Apache 文件夹中的 httpd.conf（文件的位置在 Applications/MAMP/conf/apache/httpd.conf 中）。然后，您将虚拟主机添加到文件的底部，使用如下代码，再次将名称 examplesite.local 修改为您希望 URL 在浏览器中显示的任何内容：

```
NameVirtualHost *
<VirtualHost *>
DocumentRoot "/Applications/MAMP/htdocs"
ServerName localhost
</VirtualHost>
<VirtualHost *>
DocumentRoot "/Applications/MAMP/htdocs/examplesitename"
ServerName examplesite.local
</VirtualHost> 
```

对 httpd.conf 文件进行这些更改后，请确保重新启动 MAMP，因为 Apache 服务器需要使这些更改生效。

这是我使用的网站，因为我忘记了命令行以编辑 /etc/hosts 文件以及我更详细地向您介绍的步骤：http: [//sawmac.com/mamp/virtual/](http://sawmac.com/mamp/virtual/)

这是 Macintosh 上的原始 /etc/hosts 文件的样子，以防您丢失它：[http ://thecoredump.org/2011/09/editing-the-hosts-file-in-mac-os-x-狮子/](http://thecoredump.org/2011/09/editing-the-hosts-file-in-mac-os-x-lion/)

此外，请确保您在 MAMP 上运行的每个网站都有单独的数据库、数据库用户以及 htdocs 文件夹中的文件夹。

希望这可以帮助您启动和运行！

# entity-framework - EF Fluent - 如何使用愚蠢的外键将必需的一项映射到可选的一项？（无效的外键 Table_TableId）

> ID：13723662
> 
> 赞同：0
> 
> 时间：2012-12-05T12:50:24.710
> 
> 标签：entity-framework, ef-code-first, mapping, fluent-interface

为什么这 #$*% 这么难？不应该。

两个表 Orders & Shippers：Orders.ship_via，一个 int 是 Shippers.ShipperId Shippers 的 FK。ShipperId 是 Shippers 上的 PK

我的实体：

```
public class Order : Entity
{
  public int OrderId { get; set; }
  public int ShipVia { get; set; }
  //More properties
  public virtual Shipper Shipper { get; set; }
}

public class Shipper : Entity
{
  public int ShipperId { get; set; }
  //More properties
} 
```

当我运行它时，EF 尝试使用不存在的 Order.ShipperId 自然填充 Order.Shipper。

我不想使用注释。如何创建流畅的地图？

（注意：如果你想运行测试，我的测试环境使用 Northwind）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:58:48.207

尝试这样的事情：

```
modelBuilder.Entity<Order>()
   .HasRequired(o => o.Shipper) // Or .HasOptional if it's not required
   .WithMany() // No reverse navigation property
   .HasForeignKey(o => o.ShipVia)
   .WillCascadeOnDelete(true); 
```

# spring - jbpm 5.3 - 流程实例 ID 生成器

> ID：13723669
> 
> 赞同：1
> 
> 时间：2012-12-05T12:50:45.847
> 
> 标签：spring, hibernate, jbpm, business-process-management

我从事基于 Spring 3、Hibernate 3.6 和 JBPM 5.3 的项目。bpm 进程不会保持最新，而只是不时保持（即每天一次）。

我创建了一个流程会话

```
KnowledgeBuilder kBuilder ...
KnowledgeBase processBase = kBuilder.newKnowledgeBase();
StatefulKnowledgeSession processSession = processBase.newStatefulKnowledgeSession(); 
```

和一个流程实例

```
ProcessInstance processInstance = processSession.createProcessInstance("sample", null); 
```

问题是当我想手动保留流程实例时

```
Session session = sessionFactory.getCurrentSession();
session.saveOrUpdate(processInfo); // processInfo is a instance of ProcessInstanceInfo 
```

数据库序列生成的 ID 不是进程启动时的 ID。

我的问题：有什么办法可以强制

```
processSession.createProcessInstance("sample", null) 
```

从自定义逻辑（即从数据库序列）中获取新 ID？

谢谢！

# java - 如何为简单的学校应用设计对象

> ID：13723675
> 
> 赞同：2
> 
> 时间：2012-12-05T12:51:03.400
> 
> 标签：java, oop, object

我想创建简单的学校应用程序，提供成绩、笔记、状态等。给学生、老师和家长。我正在尝试为这个问题设计对象，但我有点困惑——因为我在类设计方面不是很有经验。我现在的一些对象是：

```
class PersonalData() {
    private String name;
    private String surename;
    private Calendar dateOfBirth;
    [...]
}

class Person {
    private PersonalData personalData;
}

class User extends Person {
    private String login;
    private char[] password;
}

class Student extends Person {
    private ArrayList<Counselor> counselors = new ArrayList<>();
}

class Counselor extends Person {
    private ArrayList<Student> children = new ArrayList<>();
}

class Teacher extends Person {
    private ArrayList<ChoolClass> schoolClasses = new ArrayList<>();
    private ArrayList<Subject> subjects = new ArrayList<>();
} 
```

这当然是一个普遍的想法。但我确信这不是最好的方法。例如，我希望一个人既可以是老师，也可以是父母（辅导员），而目前的方法使我拥有两个 Person 对象。我希望该用户在成功登录后获得它拥有的所有角色（学生或教师或（教师和家长））。我认为我应该制作和使用一些接口，但我不确定如何正确地做到这一点。也许是这样的：

```
interface Role {
}

interface TeacherRole implements Role {
    void addGrade( Student student, Grade grade, [...] );
}

class Teacher implements TeacherRole {
    private Person person;
    [...]
}

class User extends Person{
    ArrayList<Role> roles = new ArrayList<>();
} 
```

请如果有人可以帮助我做到这一点，或者只是将我指向一些涵盖实用对象设计的文献/文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:28:12.840

在这样的系统中，您似乎可以创建一个包含所有个人属性以及帐户信息的 User 类：

```
public class User
{
   // personal properties
   private String name;
   private String surname;
   private Calendar dateOfBirth;

   // account properties;
   private String login;
   private String password; // note that string may be more convenient than char[]

   // role properties
   public ArrayList<Role> roles;
   ...

   public bool hasRole(Role role) // or isInRole(Role role)
   { // implementation here. }
} 
```

然后你有你的角色对象：

```
public class Role
{
    private String name;
    private String description;
} 
```

请注意，只有一个角色类可以是教师、学生、家长等。由于角色类是通用的，因此我们在其中没有诸如 addGrade() 之类的函数，因为这是特定于教师的。

当用户使用正确的凭据登录时，这样的系统将已经知道与用户关联的角色。通常，特定于角色的选项卡、链接和其他 UI 元素会根据角色显示（或不显示）。您可以在此处检查登录的用户是否具有特定角色（user.hasRole(...)）。对于每个可见性由角色确定的 UI 元素，您必须有一个 if (user.hasRole(...))。

在组合问题上，这个系统是一个严重依赖对象之间关系的系统。让我们考虑一下学生和辅导员之间的关系——辅导员有学生分配给他/她。同样，任何给定的学生都有许多辅导员。你有一个多对多的关系，它需要一个结构来跟踪独特的学生辅导员对的组合：

```
public class StudentCounselor
{
     public User student;
     public User counselor;
} 
```

谁来跟踪这一切？很可能是系统本身，而不是其他用户。

```
public class SystemAdministration
{
     public static ArrayList<StudentCounselor> studentCounselors = new ArrayList<StudentCounselor>();

     public static void addStudentCounselor(User student, User counselor)
     {
         //  Check to see first that the student-counselor combo doesn't exist

         studentCounselors.addItem(student, counselor);
         // addItem may not be the precise name of the function in ArrayList.
     }

     // function to obtain all students of a counselor
     public static ArrayList<User> getStudentsOfCounselor(User counselor)
     {
         // iterate through the studentCounselors ArrayList and pick only
         // the Student-Counselor whose counselor is the same counselor
         // as the one passed into this function.
         // Then extract the student property out of the fitting 
         // Student-Counselor.
         // Return the list of students. 
     }

     public static ArrayList<User> getCounselorsOfStudent(User student)
     {
         // Similar as above, but the other way around.
     }

} 
```

你会为你的其他关系做类似的事情——家长-学生、教师-部分等。 SystemAdministration 类不是一个角色，而是负责为你提供所有数据的实体。

作为建议，请考虑 Section 对象：

```
public class Section
{
    public User teacher; // who teaches it
    public Course course; // what is the subject, because > 1 teacher might teach the same one.
    public TimeBlock timeBlock; // when is this section administered?
    public Venue venue; // what room or what facility
} 
```

您必须创建 TimeBlock 和 Venue 类。这种结构，当放入 ArrayList 时将能够回答以下问题：“作为教师，我将教哪些部分？” 这就回答了“我将教他们什么科目、什么时候、在哪里教他们？”这个问题。

至于学生，你需要 StudentSection “组合”类：

```
public class StudentSection
{
    public Section section;
    public User student;
} 
```

当放入 SystemAdministrator 类的 ArrayList 时，现在您可以遍历列表以提取分配给学生的部分（也就是学生的日程安排），同样，谁是给定部分的学生。

请注意，除了角色之外，我们在 User 类中没有相关项目的列表。要获取任何数据，只要您在全局（在本例中为 SystemAdministration）结构中拥有所有数据和访问功能，有关登录用户及其角色的信息就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:10:22.840

没有“正确”的设计；这一切都取决于您计划如何与这些类/接口进行交互。尝试以最自然的方式勾勒出您打算调用的方法，并从中工作以了解您的类的良好布局可能是什么。如果您觉得勇敢，请尝试学习测试驱动开发方法；在“真实”代码之前编写实际的单元测试可以帮助您了解类结构。

作为一般建议，尽量避免继承，而倾向于组合。拥有一个元素数组`Role`是朝着这个方向迈出的一步。尝试了解您计划与这些角色进行交互，并相应地添加方法。

# hash - 使用参数中的回形针手动保存文件，无需脚手架

> ID：13723683
> 
> 赞同：2
> 
> 时间：2012-12-05T12:51:20.970
> 
> 标签：hash, rubygems, ruby-on-rails-3.2, paperclip, params

我是 Rails 新手，我正在研究回形针 gem，想保存从回形针保存的简单文件。我的模型如下：-

```
 class UserAttachment < ActiveRecord::Base
          attr_accessible :email, :user_id, :attached_file
          has_attached_file :attached_file
          validates_attachment_presence :attached_file   
          validates_attachment_size :attached_file, :less_than => 20.megabytes   
        end 
```

我调用表单的控制器操作：-

```
class HomeController < ApplicationController
  def index
  @uattachment = UserAttachment.new
  end
end 
```

索引视图代码，表单所在的位置

```
<%= form_for @uattachment, :url => attachment_get_link_path, :html => { :method => :post, :id => 'attachment_form', :multipart => true }, :remote => true do |f| %>
    <%= f.email_field :email, :value=>nil, :placeholder => "Enter your email here", :required => true %><br />
    <%= f.file_field :attached_file %>
    <%= f.submit "Submit" %>
<% end %> 
```

我想使用以下某种代码来保存数据：-（下面的代码不是正确的代码，告诉我想在我的应用程序中做什么是一种兴奋。）

```
@uattachment = UserAttachment.new
@uattachment = params[:user_attachment]
@uattachment.save 
```

收到的参数如下：-

```
(rdb:6) pp params
{"utf8"=>"✓",
 "authenticity_token"=>"dfjaskldjadslgjsoidruts48589034lsker=",
 "user_attachment"=>
  {"email"=>"testing@email.com",
   "attached_file"=>
    #<ActionDispatch::Http::UploadedFile:0x007fcb58682ba0
     @content_type="image/jpeg",
     @headers=
      "Content-Disposition: form-data; name=\"user_attachment[attached_file]\"; filename=\"someimage.jpg\"\r\nContent-Type: image/jpeg\r\n",
     @original_filename="800px-Kinnaur_Kailash.jpg",
     @tempfile=#<File:/tmp/RackMultipart20121205-8432-1fc1kpi>>},
 "commit"=>"Submit",
 "controller"=>"attachment",
 "action"=>"get_link"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:07:04.133

明白了，这很简单，我从脚手架作业中检查了它，

```
def index
  @uattachment = UserAttachment.new(params[:user_attachment])
  @uattachment.save
end 
```

你会得到金色的词来回应“真实”。

# java - spring 集成的模式验证器的使用？

> ID：13723687
> 
> 赞同：1
> 
> 时间：2012-12-05T12:51:41.930
> 
> 标签：java, spring, spring-integration

我是春季集成的新手。我有以下要求。

1.  轮询文件夹（文件系统）
2.  获取 XML 文件
3.  针对 XSD 进行验证
4.  如果它无效将其移动到不同的文件夹。
5.  如果它有效，则调用服务激活器，它将 xml 文件作为输入发送到 rest ful web 服务。

我有以下代码：

```
<int-file:inbound-channel-adapter auto-create-directory="true" channel="contentChannel"  id="inBoundChannelAdapter" directory="${someFolder}" prevent-duplicates="true">
            <int:poller max-messages-per-poll="1" fixed-rate="10000"/>

        </int-file:inbound-channel-adapter>

        <int:channel id="contentChannel"/>

        <int-xml:validating-filter id="schemaValidator" output-channel="someOutPutChannel" throw-exception-on-rejection="false" schema-location="${schema.location}" input-channel="contentChannel" discard-channel=""/> 
```

在这里，我坚持以上 4 和 5 点。请帮助我如何实现它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:59:42.067

步骤 4+5 正是验证过滤器的丢弃通道和输出通道的用途。只需将出站通道适配器与丢弃通道连接，即可将无效文档写入文件夹。将您的服务激活器连接到输出通道。

# c# - 空格正则表达式 asp.net

> ID：13723689
> 
> 赞同：0
> 
> 时间：2012-12-05T12:51:48.500
> 
> 标签：c#, asp.net, regex, whitespace, removing-whitespace

我有一个文本框字段，我想规范输入的内容。

我不希望用户输入更多或更少的 6-10 个字符。这是我用于限制字符的正则表达式 ^.{6,10}$ 我让这部分工作，但我也不希望用户输入空格（空格）。现在我能够从输入的开头和输入的结尾检测空格，但如果用户在文本中间输入空格，则不能。见例子。

```
" testing" = regulator detects the space in the beginning. regex i use ^[^\s].+[^\s]$
"testing " = regulator detects the space in the end. regex i use here is same as abow
"test ing" = regulator does not detect the space in the middle. tried different regex with no luck. 
```

我怎样才能创建一个能满足我所有要求的调节器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:54:35.553

是你的问题与`.`一切相匹配

做这个

`^[^\s]{6,10}$`

`[^\s]`匹配任何字符，除了`space`

* * *

**或者**

`^\w{6,10}$`

`\w`类似于`[\da-zA-Z_]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:19:25.983

Some1.Kill.The.DJ 的答案很棒，但根据您的个人知识，您也可以使用以下内容：

```
^\S{6,10}$ 
```

`\S`匹配任何字符，但方式`space`相同`[^\s]`

# python - 为什么没有显示 QListWidget 内容

> ID：13723698
> 
> 赞同：0
> 
> 时间：2012-12-05T12:52:11.187
> 
> 标签：python, pyqt4, qlistwidget

我正在尝试填充一个窗口 QListWidget 但是当我运行代码时，会出现空的 QDialog Window 。

```
 app = QtGui.QApplication(sys.argv)
   app.setStyle("cleanlooks")

   dialogWin=QtGui.QDialog()
   dialogWin.setWindowTitle("QDialog Window")
   dialogWin.setGeometry(100,230,270,210)
   data=QtCore.QStringList()
   data << "one" << "two" << "three" << "four" << "five"
   layout = QtGui.QHBoxLayout()
   layout.setMargin(1)
   listWidget=QtGui.QListWidget()
   layout.addWidget(listWidget)
   layout.addStretch(1)
   dialogWin.show() 
```

窗户显示为空！！！为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:01:11.310

您没有告诉布局它属于哪个小部件。试试这个：

```
layout = QtGui.QHBoxLayout(dialogWin) 
```

# html - Chrome getUserMedia 未在本地请求权限

> ID：13723699
> 
> 赞同：18
> 
> 时间：2012-12-05T12:52:18.013
> 
> 标签：html, google-chrome

我正在尝试在 Chrome 中使用 navigator.getUserMedia；但是，它在本地提供时（文件：///whatever/index.html）并不请求许可，而是在 JSFiddle（[http://jsfiddle.net/EBsvq/](http://jsfiddle.net/EBsvq/)）和其他站点上请求许可。

有谁知道这是什么原因？我需要以某种方式重置我的权限吗？

这是我在本地使用的：

```
<html>
<head></head>
<body>
   <button id="btn">Start</button>

<script type="text/javascript">
   /*! jQuery v1.8.3 jquery.com | jquery.org/license */
   //JQuery goes here
</script>

<script type="text/javascript">
  navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.getUserMedia;

  $(function(){
    $('#btn').click(function(){
      navigator.getUserMedia({audio: true}, 
      function(){
        alert('success');
      },
      function (err) {
        alert('fail: ' + JSON.stringify(err));
      }); }); });
      </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T14:41:57.107

`file:///`Chrome 在不报告安全错误的情况下阻止了 URI上的很多内容（例如[Geolocation](https://stackoverflow.com/q/5423938/8655)）。您最好的选择是从本地网络服务器运行，如果您安装了 Python，请尝试[SimpleHTTPServer](http://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-25T23:16:35.840

您可以`--allow-file-access-from-files`在打开 chrome 时使用命令行中的标志，以便能够`getUserMedia`从本地文件系统中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-13T17:45:29.277

我遇到了类似的问题，但与麦克风访问有关。如果您通过 file:// 提供文件，Chrome 会阻止设备访问（请注意，在 Microsoft Edge 和 Firefox 上，它通过 file::// 工作）。

我为 Chrome 找到的一种解决方案：

1.  在 URL chrome://version/ 中打开 chrome 类型
2.  在命令行中复制“命令行”字段的值并附加 --allow-file-access-from-files 并运行它
3.  Chrome 打开并输入您的 file:// 网址后。

要始终这样启动 Chrome，请右键单击 Chrome 图标，然后单击属性。在快捷方式选项卡中，将 2 中的所有命令行参数附加到目标值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T23:20:18.453

如何在 OS X 中执行命令行 arg 有点不重要。它通常看起来像这样

```
"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --allow-file-access-from-files 
```

如果你像我一样是个怪胎，把你的应用程序放进去`~/Applications`，那么它会是

```
"/Users/yougohere/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --allow-file-access-from-files 
```

如果这些都不起作用，请输入`chrome://version`您的 Chrome 地址栏，它会告诉您应该使用什么“命令行”调用。只需添加`--allow-file-access-from-files`即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T19:20:17.980

尝试安装简单服务器（轻量级），一键安装，可以在[这里下载](https://docs.google.com/file/d/0B9PX6WbpRXHNNjZfWEREV1QtYUE/edit)

安装后，将应用程序指向您要运行的页面。

# vbscript - 为什么这个 VBScript 不将文件添加到 ZIP 文件中？

> ID：13723700
> 
> 赞同：0
> 
> 时间：2012-12-05T12:52:20.763
> 
> 标签：vbscript, zip

我想将文件添加到文件夹并将其保存为 VBScript 中的压缩文件夹。

我编写了以下代码，但它只创建 ZIP 文件而不向其中添加文件。这段代码可能有什么问题？

```
Option Explicit
dim wshShell
Const MoveMode = True
Const BackupDir = "D:\csv\Image\"
Const Outfilename = "MyZip.zip"
Const TimeoutMins = 10 ' Timeout for individual file compression operation
'Set wshShell = CreateObject("WScript.shell")
Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject")
Dim Folder : Set Folder = FSO.GetFolder("D:\csv\Image")
Dim Files : Set Files = Folder.Files

Dim File
Dim Counter : Counter=0
Dim Timeout : Timeout = 0

FSO.CreateTextFile "D:\csv\" & OutFilename,true '.WriteLine "PK" & Chr(5) & Chr(6) &             String(18, 0)

Dim Shell : Set Shell = CreateObject("Shell.Application")
Dim ZipFile: Set ZipFile = Shell.NameSpace("D:\csv\"& OutFilename)

If Not ZipFile Is Nothing Then 
  Shell.NameSpace("D:\csv\"&Outfilename).CopyHere "D:\csv\Image\calender.png"
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:06:42.347

[这](http://www.naterice.com/blog/template_permalink.asp?id=64)显示在创建新的 ZIP 文件后等待 500 毫秒，然后再尝试将数据复制到其中。您是否尝试过使用 WScript.Sleep(500)？

```
Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject")
Dim Shell : Set Shell = CreateObject("Shell.Application")

If Not FSO.FileExists("D:\csv\" & OutFilename) Then
  NewZip("D:\csv\" & OutFilename)
End If

If Not ZipFile Is Nothing Then 
  Shell.NameSpace("D:\csv\" & Outfilename).CopyHere BackupDir & "calender.png"
End If

Sub NewZip(sNewZip)
  'This script is provided under the Creative Commons license located
  'at http://creativecommons.org/licenses/by-nc/2.5/ . It may not
  'be used for commercial purposes with out the expressed written consent
  'of NateRice.com

  Set oNewZipFSO = CreateObject("Scripting.FileSystemObject")
  Set oNewZipFile = oNewZipFSO.CreateTextFile(sNewZip)

  oNewZipFile.Write Chr(80) & Chr(75) & Chr(5) & Chr(6) & String(18, 0)

  oNewZipFile.Close
  Set oNewZipFSO = Nothing

  Wscript.Sleep(500)
End Sub 
```

（未经测试）

# django - 通过 API 上传 Django 文件

> ID：13723704
> 
> 赞同：2
> 
> 时间：2012-12-05T12:52:32.230
> 
> 标签：django, django-models, django-file-upload, django-rest-framework

我是 django 新手，一直在设计一些包含 FileFields 的基本模型。

这是我的模型的示例：

```
class Sample(models.Model):
   pub_date   = models.DateTimeField('Publish Date', default=datetime.now)
   upfile     = models.FileField(upload_to='samples/') 
```

我已经通过管理员测试了文件上传，但现在我正在寻找其他解决方案来通过 REST API 提交文件。我的第一次搜索导致了活塞，但大多数示例似乎不涉及模型，仅将文件上传到网站。

我的目标是解析目录，例如使用 os.walk，提交文件并用文件信息填充模型。

也就是说，我正在寻找建议和线索，以便开始调查。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T13:58:22.817

You probably shouldn't be looking to piston for new builds anymore. It's essentially unmaintained and has been for a while now. django-tastypie and django-rest-framework are your best bets, although there's also a bunch of less fully featured frameworks cropping up.

REST framework supports standard form-encoded file uploads, see [http://django-rest-framework.org/api-guide/fields.html#filefield](http://django-rest-framework.org/api-guide/fields.html#filefield)

I'm not sure about tastypie's support for file uploads.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:42:26.293

我回到了基础并决定尝试创建一个本地脚本来读取调用文件和示例模型。由于我将直接从同一服务器提交文件，因此该解决方案比使用 REST API 简单得多，它提供了比我需要的更多的灵活性。

这是我的解决方案：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'
import sys
sys.path.append('/opt/proj')
sys.path.append('/opt/proj/web')
from django import db
from django.core.files import File
from django.utils import timezone
from web.myapp.models import Sample

filesample = File(open(sys.argv[1],'rb'))
filesample.name = os.path.basename(filesample.name)
Sample(upfile=filesample, pub_date=timezone.now()).save() 
```

回想起来这非常简单，但我希望它可以帮助有同样问题的人。

随意发表评论。谢谢！

# twitter-bootstrap - knockout.js 和引导模式对话框

> ID：13723708
> 
> 赞同：2
> 
> 时间：2012-12-05T12:52:46.047
> 
> 标签：twitter-bootstrap, knockout.js, custom-binding

我正在使用我在 SO 上找到的一些代码（这里的第二个答案：[knockout.js - deferred databinding for modal?](https://stackoverflow.com/questions/10626780/knockout-js-deferred-databinding-for-modal)）。

但是，详细信息并未显示在表单中。

```
 rowClick: function(data){
    console.log("in row click");
    console.log(data); // produces data as per debug below
    // load the transaction when a row is clicked
    self.EditingTransaction(data);
    console.log(self.EditingTransaction()); // produces data as per debug below (not as a observable though)
  }, 
```

这是查看代码：

```
<div data-bind="modal: EditingTransaction" class="fade">
    <form data-bind="submit: $root.SaveTransaction">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>
            Editing transaction</h3>
    </div>
    <div class="modal-body">
        <label>Date</label> <input type="text" data-bind="text: Date"/></br>
        <label>Category</label> <input type="text" data-bind="text: Category"/></br>
        <label>Subcategory</label> <input type="text" data-bind="text: Subcategory"/></br>
        <label>Amount</label> <input type="text" data-bind="text: Amount"/></br>
        <label>Notes</label> <input type="text" data-bind="text: Notes"/></br>
        <pre data-bind="text: ko.toJSON($root.EditingTransaction, null, 2)"></pre>

    </div>
    <div class="modal-footer">
         <a href="#" class="btn btn-primary" data-bind="click: $root.SaveTransaction">Save changes</a>
    </div>
    </form>
</div> 
```

将数据分配给 editTransaction 时显示对话框 - pre ko.toJSON 调试 HTML 显示以下内容：

```
{
  "ID": "1231",
  "TransactionType": "Withdrawal",
  "Date": "2012-11-07",
  "Category": "cat",
  "Subcategory": "sub cat",
  "Amount": "-50.00",
  "currency": "GBP",
  "Notes": "",
  "AccountName": "Account 2",
  "Payee": "Cheque"
} 
```

我已经搜索并看到了有关初始化模式时（加载页面时）数据不可用的评论，但这对我来说没有意义（我相信点绑定是它们在数据视图时更新更改，并且调试语句也可以正常工作）。我已经尝试在绑定代码中不使用 with 并且在数据绑定文本中引用 $root 。

因此，任何为什么它不起作用的想法都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:07:29.533

野餐 ：-）

输入标签上的绑定应该是值而不是文本......我已经断断续续地看了一天 - 在发布答案的 10 分钟内击中了我！

# asp.net - 在gridview分页的查询中设置限制

> ID：13723709
> 
> 赞同：0
> 
> 时间：2012-12-05T12:52:49.810
> 
> 标签：asp.net, sql-server-2008

我正在使用 C# 和 SQL Server 2008，在这里我附上我的查询。我想为动态网格视图设置限制。我需要这个查询来在动态网格视图上分页我怎么能

```
SELECT 
    Item.ItemID,Item.TypeID,Item.StatusID,Item.SeverityID,Item.PriorityID,Item.ProjectID,Item.ReleaseID,
    Item.ClientID,Item.Body,Item.CreatedBy,Item.CreatedDate,Item.ModifiedBy,Item.ModifiedDate,Item.IsActive, 
item.[Subject], Type.Name as Type, status.Name as Status, Project.Name as Project,Release.Name as Release,
Priority.Name as Priority,Severity.Name as Severity,Client.Name as Client,
ROW_NUMBER() OVER (ORDER BY ItemID) AS Rowis

FROM Item (NOLOCK)  
LEFT OUTER JOIN  [Type] (NOLOCK)  ON Item.TypeID = [Type].TypeID
LEFT OUTER JOIN  [Status] (NOLOCK) ON Item.StatusID = [Status].StatusID
LEFT OUTER JOIN [Project] (NOLOCK) ON Item.ProjectID=[Project].ProjectID
LEFT OUTER JOIN [Release] (NOLOCK) ON Item.ReleaseID =[Release].ReleaseID 
LEFT OUTER JOIN [Priority] (NOLOCK) ON Item.PriorityID=[Priority].PriorityID 
LEFT OUTER JOIN [Severity] (NOLOCK) ON Item.SeverityID =[Severity].SeverityID
LEFT OUTER JOIN [Client] (NOLOCK) ON Item.ClientID =[Client].ClientID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:00:56.943

@PageIndex 和@PageSize 是从应用层发送的参数。

```
DECLARE @PageIndex INT = 1
DECLARE @PageSize INT = 10

SELECT * FROM 
(
    SELECT 
        Item.ItemID,Item.TypeID,Item.StatusID,Item.SeverityID,Item.PriorityID,Item.ProjectID,Item.ReleaseID,
        Item.ClientID,Item.Body,Item.CreatedBy,Item.CreatedDate,Item.ModifiedBy,Item.ModifiedDate,Item.IsActive, 
    item.[Subject], Type.Name as Type, status.Name as Status, Project.Name as Project,Release.Name as Release,
    Priority.Name as Priority,Severity.Name as Severity,Client.Name as Client,
    ROW_NUMBER() OVER (ORDER BY ItemID) AS Rowis

    FROM Item (NOLOCK)  
    LEFT OUTER JOIN  [Type] (NOLOCK)  ON Item.TypeID = [Type].TypeID
    LEFT OUTER JOIN  [Status] (NOLOCK) ON Item.StatusID = [Status].StatusID
    LEFT OUTER JOIN [Project] (NOLOCK) ON Item.ProjectID=[Project].ProjectID
    LEFT OUTER JOIN [Release] (NOLOCK) ON Item.ReleaseID =[Release].ReleaseID 
    LEFT OUTER JOIN [Priority] (NOLOCK) ON Item.PriorityID=[Priority].PriorityID 
    LEFT OUTER JOIN [Severity] (NOLOCK) ON Item.SeverityID =[Severity].SeverityID
    LEFT OUTER JOIN [Client] (NOLOCK) ON Item.ClientID =[Client].ClientID 
)
AS Results
WHERE Rowis BETWEEN (@PageIndex - 1) * @PageSize + 1 AND @PageIndex * @PageSize --Paging 
```

# java - PowerShell Json 序列化与 Java 互操作

> ID：13723715
> 
> 赞同：1
> 
> 时间：2012-12-05T12:53:15.210
> 
> 标签：java, json, serialization, powershell

我想将 PowerShell 与 Java 互操作。也就是说，我想从 Java 调用 PowerShell 脚本并接收返回的对象。

我可以在单独的进程中启动 PowerShell 并捕获输出，如[Invoke Powershell scripts from Java](https://stackoverflow.com/questions/8147634/invoke-powershell-scripts-from-java)中所示。

要将对象从一个进程传输到另一个进程，我想以 Json 格式序列化它们。

是否有 PowerShell 命令将对象转换为 JSON 格式的字符串，或者我是否需要使用 .NET 对象来执行此操作，如[PowerShell 中的 JSON 序列化/反序列化中](http://rkeithhill.wordpress.com/2009/12/06/json-serializationdeserialization-in-powershell/)所示？

Microsoft JSON 会与 Java JSON 包互操作吗？

有比 JSON 更好的解决方案吗？例如 XML 序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:55:59.993

PS V3中有convertTo-json cmdlet [http://technet.microsoft.com/en-us/library/hh849922.aspx](http://technet.microsoft.com/en-us/library/hh849922.aspx)

# java - 如何在 Facelets 中使用循环

> ID：13723718
> 
> 赞同：0
> 
> 时间：2012-12-05T12:53:28.987
> 
> 标签：java, jsf-2, primefaces, facelets

我在 Bean 类中有一个返回`ArrayList<String>` ie的方法`PlacesList[Akividu, House, Shopping Store, Sri Malleswara and Venkateswara Temple, Bus Station, Gangaratnam Theatre, Mohan Studio, HP Petrol Bunk, Primary School, Madiwada School, Library, Vegetable Market, Akividu Police Station]`。

我想一一展示所有这些。如果我使用下面的代码行

```
<h:outputText value="#{searchBean.searchResults()[0]}" /> 
```

我只得到单个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:55:26.250

使用[**`<ui:repeat>`**](http://www.jsftoolbox.com/documentation/facelets/10-TagReference/facelets-ui-repeat.html)标签迭代集合。下面是一个示例：

XHTML：

```
<ui:repeat value="#{productController.products}" var="product">
            <li><h:outputText value="#{product.name}" /></li>
        </ui:repeat> 
```

托管豆：

```
private List<Product> products;

public List<Product> getProducts() {
    if (products == null) {
        products = new ArrayList<Product>();
        products.add(new Product("Tennis Racket"));
        products.add(new Product("Baseball Bat"));
        products.add(new Product("Hockey Stick"));
    }
    return products;
} 
```

或者，您也可以使用 JSTL 的[**`<c:forEach>`**](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)标记。

# asp.net-web-api - 将 ViewModel 传递给 Web-Api 操作

> ID：13723722
> 
> 赞同：2
> 
> 时间：2012-12-05T12:53:42.070
> 
> 标签：asp.net-web-api

是否可以将 ViewModel 对象传递给 WebApi 控制器操作而不是单独的参数？

而不是使用：

```
public class ContactsController : ApiController
{
    public IEnumerable<Contact> GetContacts(string p1, string p2)
    {
        // some logic
    }
} 
```

我想使用：

```
public class ContactsController : ApiController
{
    public IEnumerable<Contact> GetContacts(TestVM testVM)
    {
        // some logic
    }
}

public class TestVM
{
    public string P1 { get; set; }
    public string P2 { get; set; }
} 
```

这似乎对我不起作用。当我调用 /api/contacts/?P1=aaa&P2=bbb 时，testVM 对象不会被填充（空）。

此外，我希望 TestVM 定义验证属性并在我的 API 控制器中使用 ModelState.IsValid。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T20:45:22.030

除非另有说明，否则 WebApi 将使用请求的内容/正文反序列化复杂模型。要告诉 WebApi 使用 Url 构建模型，您需要指定 [FromUri] 属性：

```
public IEnumerable<Contact> GetContacts([FromUri]TestVM testVM)
{
    // some logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T17:03:12.293

我知道发布另一个答案有点晚了，但我认为它对使用 .net 核心作为 Web API 服务的任何人都有用

```
public IEnumerable<Contact> GetContacts([FromQuery]TestVM testVM) 
```

# iis - 缺少 inetmgr.exe 文件

> ID：13723726
> 
> 赞同：6
> 
> 时间：2012-12-05T12:53:52.913
> 
> 标签：iis

我是这里的新手，发现一些材料非常有用。但是，我似乎无法解决此问题：我正在运行 Windows 7 Professional，并且在 C:\Windows\System32\inetsrv 中没有 inetmgr.exe 文件。我有许多 iis... 文件，但没有 inetmgr.exe 文件。

更大的图景是，我正试图让 Apache 和 PHP 在我的笔记本电脑上工作，并且正在兜圈子试图让 Localhost 工作。我不断收到“找不到网页”，并且在网上搜索让我相信 inetmgr.exe 文件可能是解决问题的关键。那和端口 80 可能在某处涉及....

如果你还没有了解这个细节，我已经远远超出了我的舒适区，但我真的需要让它为我正在学习的课程工作。

提前感谢您可能会散发的任何光芒。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T13:03:15.807

安装 IIS：

控制面板 -> 程序和功能 -> 打开或关闭 Windows 功能 -> 选中“Internet 信息服务”。选择下一步并按照提示安装 IIS。

有关详细信息，请参阅此问答以检查和安装 IIS，[检查是否安装了 IIS？](https://stackoverflow.com/questions/1165053/check-whether-iis-is-installed-or-not)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-17T18:21:21.680

由于这个问题是 的第一个 Google 搜索结果`inetmgr not found`，而且即使 Web 服务似乎工作正常，也无法找到 inetmgr 可能非常令人费解，所以我想我会用最明显的答案来注释它谁真正需要 IIS 管理器：您必须将管理器与 WWW 服务分开安装（这是安装 IIS WWW 服务本身的单独选项）。

[Windows 8.x]

1.  首先，在“开始”页面中键入 IIS：如果您看到`Internet Information (IIS) Manager`，您就可以开始了。如果不...
2.  转到控制面板，“程序和功能”，然后单击左侧窗格中的“打开或关闭 Windows 功能”。
3.  在弹出的“Windows 功能”对话框中，确保在“Internet 信息服务”下，除了“万维网服务”之外，还选中了“Web 管理功能”。（从技术上讲，您只需要检查“Web 管理功能”下的 “ **IIS 管理控制台”即可）。**
4.  不要忘记单击`OK`“Windows 功能”对话框。:-)
5.  现在转到第 1 步，您应该会看到`Internet Information (IIS) Manager`一个可用的图标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T16:51:36.813

Inetmgr.exe 是 IIS 的可执行文件。如果您只想让 Apache 和 PHP 工作，您可以使用 WAMP 服务器 - 这将为您提供开始使用 PHP 开发所需的一切。该网站是：[http ://www.wampserver.com/en/](http://www.wampserver.com/en/)

IIS 是一个 Web 服务器，而 Apache 也是一个 Web 服务器。如果你想使用 Apache，你不需要安装 IIS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:57:24.110

你需要先安装iis。

> [http://www.iis.net/learn/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7](http://www.iis.net/learn/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-24T22:05:28.683

在 windows server 2008 R2 中，我在 Roles 下找到 IIS Server，而不是 features

# java - 使用 Gson 将对象序列化为任意 JSON 数组而不会收到警告

> ID：13723732
> 
> 赞同：1
> 
> 时间：2012-12-05T12:54:16.800
> 
> 标签：java, gson

我需要像这样序列化一个对象：

```
class A {
    int a = 1;
    String b = "hello";
    boolean isDog = false;
} 
```

像这样进入 JSON 数组：

```
[1,"hello",false] 
```

我知道一种（错误的）方法来做到这一点：从对象的字段中创建一个无类型的集合，然后 Gson 它：

```
class A {
    // ...
    Collection forGson() {
        ArrayList col = new ArrayList();
        col.add(a);
        col.add(b);
        col.add(c);
        return col;
    } 
}
new Gson().toJson(new A().forGson()); 
```

但是由于使用了无类型集合，它会产生很多警告。那么有没有办法将对象序列化为任意类型的数组而不会收到任何警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T00:32:05.957

这实际上是“你做错了”。你没有随机的数组，你有一个 ( `A`) 对象。它与您要生成的 JSON*没有任何*共同之处。

话虽如此，如果您真的想这样做，您可以提供自己的序列化器/反序列化器`Gson`：

```
class ASerializer implements JsonSerializer<A>
{

    public JsonElement serialize(A t, Type type, JsonSerializationContext jsc)
    {
        JsonArray ja = new JsonArray();
        ja.add(new JsonPrimitive(t.a));
        ja.add(new JsonPrimitive(t.b));
        ja.add(new JsonPrimitive(t.isDog));
        return ja;
    }

} 
```

您将创建一个`JsonDeserializer`做相反的事情，`A`从提供的 JSON 数组创建一个对象。

有关更多信息，请参阅：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization。](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)

然后使用`GsonBuilder`你会告诉`Gson`使用它们：

```
GsonBuilder builder = new GsonBuilder(); 
builder.registerTypeAdapter(A.class, new ASerializer());
builder.registerTypeAdapter(A.class, new ADeserializer());
Gson gson = builder.create(); 
... 
```

# git - git log --decorate 颜色都一样

> ID：13723734
> 
> 赞同：1
> 
> 时间：2012-12-05T12:54:27.253
> 
> 标签：git, colors

我已经在我的新 SSD 上全新安装的 Ubuntu 10.04 上安装了 git 版本 1.7.0.4。一切正常，除了所有的日志装饰——标签、本地分支、远程分支、HEAD——在默认的 bash 终端中总是橙色的，周围的括号也是如此，都匹配 SHA-1 哈希值着色。我所做的任何事情都不会改变他们。如果我`ui = auto`从`[color]`~/.gitconfig 中删除，那么一切都会变成单色，但除此之外，我无法获得旧 Ubuntu 10.04 上的默认远程=红色、本地=绿色、HEAD=青色、标记=黄色安装我刚搬来的。

里面没有其他颜色的东西`~/.gitconfig`（它是非常默认的/香草，甚至把它全部去掉也不能解决它），并且没有与`myrepo/.git/config`. 这发生在所有回购中。

我安装不好？是终端问题吗？我在终端配置文件属性中摆弄了与字体、颜色、背景等相关的所有内容，但无济于事。我已经尝试了所有我能在网上和 stackoverflow 上找到的与颜色相关的东西......没有运气。颜色似乎确实在差异中起作用，即这确实改变了差异中每个文件的元信息：

```
[color "diff"]
    meta = magenta 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:01:37.770

刚刚找到[这个答案](https://stackoverflow.com/questions/10998792/how-to-color-the-git-console-in-ubuntu#answer-13075208)，单线为我工作。而且，我在 Ubuntu 12.04 上。

```
git config --global color.ui auto 
```

# java - 命令行 javac 工作，但 Eclipse 报告错误

> ID：13723740
> 
> 赞同：0
> 
> 时间：2012-12-05T12:54:37.567
> 
> 标签：java, eclipse, compilation

我有一个代码可以在我的命令行`java`工具中按预期正常工作。

当我添加到 Eclipse 时，相同的代码确实会引发一些错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    Cannot cast from Object to long 
```

在线上 ：

```
 long statusId = (long)json.get("status_id"); 
```

但是，使用`javac`和`java`命令我运行程序并成功输出。

WTH eclipse 就是这样表现的！这是我的第一个 Eclipse 程序，请帮助我。

### 编辑：

代码 ：

```
public InitOrderResponse connect()
{
    Authentication auth = new Authentication();

    String response = auth.httpBasicAuth(this.constructUrl(),this.key);

    JSONObject json = (JSONObject) JSONValue.parse(response);

    String merchantId = (String)json.get("merchant_id");
    long statusId = (long)json.get("status_id");
    String status = (String)json.get("status");
    String orderId = (String)json.get("order_id");

    initOrderResponse = new InitOrderResponse();
    initOrderResponse.setStatus(status);
    initOrderResponse.setOrderId(orderId);
    initOrderResponse.setStatusId(statusId);
    initOrderResponse.setMerchantId(merchantId);

    return initOrderResponse;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:57:07.807

您的 Eclipse 设置了错误/警告约束以在某些情况下给出错误，默认情况下 Java 编译器不会强加。要更改这些规则，请右键单击项目，单击属性。在“Java 编译器”菜单下，转到“错误/警告”。在那里，您可以为编译器设置约束以给出错误/警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:42:54.273

问题出在 Jdk 版本上。当我将 jdk 更改为指向 Sun 的 JDK 时。一切都按预期工作。

# javascript - 使用嵌套级别在 CSS 中交替行颜色

> ID：13723747
> 
> 赞同：1
> 
> 时间：2012-12-05T12:55:03.557
> 
> 标签：javascript, html, css

我正在寻找为理论上无限数量的嵌套级别实现交替行颜色的最佳方法。下面是我正在测试的标记示例和 jsFiddle [http://jsfiddle.net/DFn82/](http://jsfiddle.net/DFn82/)

使用 nth-child 很难让交替颜色正常工作，您需要有效地对每个级别的组合进行硬编码，并且 css 规则呈指数增长。

我可以使用 javascript 实现我想要的结果，但是列表是完全动态的，并且会不断添加和删除内容。使用 javascript 在性能方面似乎不是一种选择，并且可能会产生一些相当大的影响。

这只需要在IE9+中工作

![在此处输入图像描述](../Images/38a551859e0c84aed5463b77440a293f.png)

```
<ul>
    <li>
        <span>Item</span>
    </li>
    <li>
        <span>Item</span>
    </li>
    <li>
        <span>Item</span>
        <ul>
            <li>
                <span>Item</span>
                <ul>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                </ul>
            </li>
            <li>
                <span>Item</span>
                <ul>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                </ul>
            </li>
            <li>
                <span>Item</span>
                <ul>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                    <li><span>Item</span></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:00:21.813

仅通过 css 无法实现此类实现。您将不得不使用 javascript。此外，JS 的使用不应该导致如此糟糕的性能。每当添加或删除新值时，只需让 JS 检查和更新。然后，我们谈论的是线性依赖于行数的性能。如果可能的话，与试图从 css 规则中找出它的浏览器几乎没有什么不同（也线性依赖于行数或更糟）。

# python - 并行和异步结果

> ID：13723749
> 
> 赞同：0
> 
> 时间：2012-12-05T12:55:18.707
> 
> 标签：python

我想通过 SSH 连接到 N 个主机来检查命令的输出。成功运行将在约 2 秒内返回，而每次超时可能需要 40 秒。正如我们看到的 5 台主机，最好的情况是 10 秒，而最坏的情况是超过 3 分钟。

所以我想**透明地并行执行它们，**当最后一个完成后，我想检查输出（**以及**如果发生错误）。而且我不希望个别结果减慢整个过程。

* * *

这是我需要并行运行的功能：

```
def fetch_results_from_ssh( host):
    try:
        a = login_and_fetch_values()
        return a
    except:
        throw Exception("something") 
```

这是我想要使上述函数异步的包装类型：

```
result_futures = []
for i in ["h1","h2","h3"]
    result_futures.append( async( fetch_results_from_ssh( i))

for i in result_futures:
    if i.worked_fine():
        print "host " + host + "value: " + i.value #yes, i did not define host anywhere
    else:
        print "host " + host + "error: " + i.error 
```

* * *

我如何并行执行它？即使我需要编写更多代码，我也更喜欢**标准库**的一些可行的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:00:27.587

您可以使用线程或多进程 (http://docs.python.org/dev/library/multiprocessing.html) 并行运行操作。同样的目的也可以通过结构[http://docs.fabfile.org/en/1.5/](http://docs.fabfile.org/en/1.5/)实现。

# c# - Web 服务无法启动：无法加载文件或程序集

> ID：13723750
> 
> 赞同：4
> 
> 时间：2012-12-05T12:55:24.510
> 
> 标签：c#

我有一个不再运行的 Web 服务问题。之前安装的是 64 位版本，现在安装的是 32 位版本。但是，它似乎在寻找64位版本的ChilkatDotNet2.dll，这很奇怪。MSI 包安装的版本是 X86。

> C:\Program Files (x86)\Sipp\Market Server\bin>asminfo.exe ChilkatDotNet2.dll ChilkatDotNet2, Version=9.3.0.0, Culture=neutral, PublicKeyToken=eb5fc1fc52ef09b d | X86

我启用了 FusionLog，它给出了以下输出：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.BadImageFormatException：无法加载文件或程序集“ChilkatDotNet2”或其依赖项之一。试图加载格式不正确的程序。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 程序集加载跟踪：以下信息有助于确定无法加载程序集“ChilkatDotNet2”的原因。
> 
> === 预绑定状态信息 === LOG: User = SF\sonsupport LOG: DisplayName = ChilkatDotNet2 (Partial) LOG: Appbase = file:///C:/Program Files (x86)/Sipp/Market Server/ LOG ：初始 PrivatePath = C:\Program Files (x86)\Sipp\Market Server\bin 调用程序集：（未知）。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Program Files (x86)\Sipp\Market Server\web.config LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config LOG : 使用 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config 中的机器配置文件。LOG：此时未将策略应用于引用（私有、自定义、部分或基于位置的程序集绑定）。日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v2。0.50727/临时 ASP.NET 文件/server/b8e4736f/d41d574d/ChilkatDotNet2.DLL。日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/server/b8e4736f/d41d574d/ChilkatDotNet2/ChilkatDotNet2.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Sipp/Market Server/bin/ChilkatDotNet2.DLL。ERR：无法完成程序集的设置（hr = 0x8007000b）。探测终止。未能完成程序集的设置 (hr = 0x8007000b)。探测终止。未能完成程序集的设置 (hr = 0x8007000b)。探测终止。
> 
> 堆栈跟踪：
> 
> [BadImageFormatException：无法加载文件或程序集“ChilkatDotNet2”或其依赖项之一。尝试加载格式不正确的程序。]
> System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
> System.Reflection.Assembly .InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +416
> System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +166 System.Reflection.Assembly.Load(String assemblyString) +35
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper（字符串 assemblyName，布尔型 starDirective）+190
> 
> [ConfigurationErrorsException：无法加载文件或程序集“ChilkatDotNet2”或其依赖项之一。试图加载格式不正确的程序。]
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +11241896
> System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +388 System.Web.Configuration .CompilationSection.LoadAssembly(AssemblyInfo ai) +232
> System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +48
> System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +210
> System.Web.Compilation.WebDirectoryBatchCompiler..ctor(VirtualDirectory虚拟目录）+191
> System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors) +54
> System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +295
> System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile) +476
> System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile) +116
> System.Web.Compilation.BuildManager.GetCompiledCustomString(String virtualPath) +39
> System .ServiceModel.HostingManager.GetCompiledCustomString(String normalizedVirtualPath) +202
> System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +33
> System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +46
> System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +654
> 
> [ServiceActivationException：服务'/server/service.svc'由于编译过程中的异常而无法激活。异常消息是：无法加载文件或程序集“ChilkatDotNet2”或其依赖项之一。试图加载格式不正确的程序..]
> System.ServiceModel.AsyncResult.End(IAsyncResult result) +15778592
> System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +15698937
> System.ServiceModel.Activation.HostedHttpRequestAsyncResult .ExecuteSynchronous(HttpApplication context, Boolean flowContext) +265
> System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +227
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +171

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:00:34.717

IIS > 应用程序池 > 您的应用程序池 > 高级设置 > 设置`Enable 32bit application`为 true。

# objective-c - 如何在 Objective-C 中正确更新 UIProgressView

> ID：13723752
> 
> 赞同：0
> 
> 时间：2012-12-05T12:55:27.377
> 
> 标签：objective-c, multithreading, updates, uiprogressview

我有课`LoadViewController`，一开始我称之为：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

dispatch_async(kBgQueue, ^{

    NSData *dataOfURL = [NSData dataWithContentsOfURL:kRSSURL];

    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:dataOfURL waitUntilDone:YES];
});
} 
```

`kbgQueue`在哪里

```
 #define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) 
```

在主线程上执行`fetchedData:`。

```
- (void)fetchedData:(NSData *)responseData {

XMLParser *parser = [[XMLParser alloc] initWithData:responseData];
parser.delegate = self;

if ([parser parse]) {

    // if parsed.
    if (!data) {

        data = [[NSMutableArray alloc] init];
    }
    else {

        [data removeAllObjects];
    }

    data = [parser getParsedData];

    ViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController"];
    viewController.array = data;

    [self presentViewController:viewController animated:YES completion:^{}];
    //[self reloadData];
}
else {

    NSLog(@"False.");
}

} 
```

如您所见，我使用自己的`XMLParser`帮助程序类，在其中获取所有数据。当下载一条数据时，我`[self.delegate passProgress:fetchedItems/20.0f];`由委托人调用，并且`LoadViewController`是这样的：

```
-(void)passProgress:(float)progress {

dispatch_async(dispatch_get_main_queue(), ^{
    [self.progressView setProgress:progress];
    NSLog(@"Updated!");
});
} 
```

但问题是：下载了 20 个数据项中的一个后，progressView 没有更新。哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:58:25.587

我不知道它是否正确，但我`LoadViewController`从更改`perfromOnMainThread:withObject:waitUntilDone:`为`perfromInBackground:withObject:`，但它有效。

# android - Android - AdMob 占用大量 CPU

> ID：13723753
> 
> 赞同：1
> 
> 时间：2012-12-05T12:55:45.603
> 
> 标签：android, admob, cpu-usage

自从我在我的应用程序中集成了 AdMob 视图后，该应用程序的 CPU 使用率一直上升到 12%，RAM 也上升了 8mb。发生了什么？

# php - onkeyup 函数 javascript

> ID：13723754
> 
> 赞同：2
> 
> 时间：2012-12-05T12:55:46.703
> 
> 标签：php, javascript, javascript-events

> **可能重复：**
> [在 KeyUp 和 Paste 事件上限制 AJAX 请求](https://stackoverflow.com/questions/10457743/throttle-ajax-request-on-keyup-and-paste-events)

假设我有一个`inputbox`在其中调用 ajax 函数的`onkeyup`. 当用户在文本框中输入任何值时，该值将通过 ajax 函数并使用 gd 写入图像。

但是我有一个问题，当用户在文本框中输入 10 个字符值时，ajax 函数调用 10 次，`onkeyup`并且响应在图像上写入需要很长时间。

我怎样才能只调用一次函数？

我们可以通过在`onblur`事件上调用函数来做到这一点，但我需要在不离开文本框的情况下做到这一点。

我将不胜感激任何类型的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:00:37.057

`setTimeout`您可以通过以调用的形式建立一点滞后来做到这一点。这是对可能重复触发的昂贵操作的典型响应。当 a`keyup`发生时，安排（比如说）100 毫秒后的超时。如果`keyup`在这 100 毫秒内发生另一个超时，则取消之前的超时并设置一个新超时。当超时发生时，执行昂贵的操作。

例如，如果您之前的处理程序如下所示：

```
function handleKeyUp() {
    doThisExpensiveThing();
    doThatExpensiveThing();
    doAnotherExpensiveThing();
} 
```

...您的新产品可能如下所示：

```
var keyupTimer = 0; // 0 is a safe "no timer" value, setTimeout never returns 0
function handleKeyUp() {
    // Have an outstanding call?
    if (keyupTimer) {
        // Yes, clear it
        clearTimeout(keyupTimer);
    }

    // Set a new call to occur in 100ms
    keyupTimer = setTimeout(doExpensiveStuff, 100);
}

function doExpensiveStuff() {
    // Clear the timer handle so we know we don't have a call pending
    keyupTimer = 0;

    // Do the expensive stuff
    doThisExpensiveThing();
    doThatExpensiveThing();
    doAnotherExpensiveThing();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:03:25.513

JS：

```
<script>
var timeout;

function keyUp( value ) {
 clearTimeout( timeout );

 timeout = setTimeout( function() {
  // Ajax code here
 }, 500 );
}
</script> 
```

HTML：

```
<input type="text" onkeyup="keyUp(this.value)" /> 
```

# android - 为什么 Android 4 不从 url 下载和显示图像

> ID：13723761
> 
> 赞同：-1
> 
> 时间：2012-12-05T12:55:57.103
> 
> 标签：android, image, url

这是一个用于加载图像的简单功能。它在 android 2.2 上运行良好，但它不会下载和显示任何适用于 android 4 的图像。这是创建的代码：

```
Bitmap bitmap = DownloadImage(weather.icon);
holder.imgIcon.setImageBitmap(bitmap); 
```

持有人工作正常/这是功能：

```
 private InputStream OpenHttpConnection(String urlString) throws IOException {
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if (!(conn instanceof HttpURLConnection))
        throw new IOException("Not an HTTP connection");

    try {
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        }
    } catch (Exception ex) {
        throw new IOException("Error connecting");
    }
    return in;
}

private Bitmap DownloadImage(String URL) {
    Bitmap bitmap = null;
    InputStream in = null;

    try {
        in = OpenHttpConnection(URL);
        BufferedInputStream bis = new BufferedInputStream(in, 8190);

        ByteArrayBuffer baf = new ByteArrayBuffer(50);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }
        byte[] imageData = baf.toByteArray();
        bitmap = BitmapFactory.decodeByteArray(imageData, 0,
                imageData.length);
        in.close();
    } catch (IOException e1) {

        e1.printStackTrace();
    }
    return bitmap;
} 
```

谁能帮帮我，我很累。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:59:46.930

你`Network Rquest`在 main上运行`UI thread`。

android>=3.0 不允许`Network Request`在主 UI 线程上运行。你需要使用

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)做网络操作。（下载图片，你的情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T06:04:19.633

```
private class DownloadFile extends AsyncTask<String, Integer, String> {
ProgressDialog mProgressDialog;

@Override
    protected void onPreExecute() {
        super.onPreExecute();
        // Create progress dialog
        mProgressDialog = new ProgressDialog(Your Activity.this);
        // Set your progress dialog Title
        mProgressDialog.setTitle("title");
        // Set your progress dialog Message
        mProgressDialog.setMessage(" message");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        // Show progress dialog
        mProgressDialog.show();
    }

@Override
protected String doInBackground(String... Url) {
    String filename = "image.jpg";
    try {
        URL url = new URL(mStrings[curruntPosition]);
        URLConnection connection = url.openConnection();
        connection.connect();

        // Detect the file length
        int fileLength = connection.getContentLength();

        // Locate storage location
        String filepath = Environment.getExternalStorageDirectory()
                .getPath();

        // Download the file
        InputStream input = new BufferedInputStream(url.openStream());

        // Save the downloaded file
        OutputStream output = new FileOutputStream(filepath + "/"
                + filename);

        // String fileName = "picss.jpg";

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // Publish the progress
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        // Close connection
        output.flush();
        output.close();
        input.close();

    } catch (Exception e) {
        // Error Log
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    }

    return null;
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    // Update the progress dialog
    mProgressDialog.setProgress(progress[0]);
    // Dismiss the progress dialog
    mProgressDialog.dismiss();

} 
```

}

然后将以下代码放入您活动的下载按钮中。

```
new DownloadFile().execute(your url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:05:52.097

在您的班级中添加：

在 Android Honeycomb`StrictMode`启用时，将其关闭。

用于`Async Task`执行网络操作。

或者

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

阅读：
[https ://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# python - 在循环中使用 time.sleep() 时应用程序挂起

> ID：13723764
> 
> 赞同：0
> 
> 时间：2012-12-05T12:56:02.070
> 
> 标签：python, wxpython, media-player, playlist, mplayer

我正在做一个关于制作**定制媒体播放器**的学校项目。我在网上有一些我一直在使用的源代码。我想**添加另一个新功能**，即制作源代码没有的**播放列表。**

但是，当我尝试拖动窗口时，我遇到了一个错误，即窗口“停止响应”。我无法单击任何内容，因为我的光标显示“加载标志”（圆形光标），似乎有一些背景踏板正在运行。

我试过让它运行而不拖动它，它似乎工作正常。

你们有谁知道为什么当我使用函数“time.sleep(second)”时会出现这个问题？

参考： http: [//www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/](http://www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/)

逻辑（代码）：

```
def load_playlist(self, event):
    playlist = ["D:\Videos\test1.mp4", "D:\Videos\test2.avi"]
    for path in playlist:
        #calculate each media file duration
        ffmpeg_command = ['C:\\MPlayer-rtm-svn-31170\\ffmpeg.exe', '-i' , path]

        pipe = subprocess.Popen(ffmpeg_command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
        results = pipe.communicate()

        #Regular expression to get the duration
        length_regexp = 'Duration: (\d{2}):(\d{2}):(\d{2})\.\d+,'
        re_length = re.compile(length_regexp)

        # find the matches using the regexp that to compare with the buffer/string
        matches = re_length.search(str(results))
        #print matches

        hour = matches.group(1)
        minute = matches.group(2)
        second = matches.group(3)

        #Converting to second
        hour_to_second = int(hour) * 60 * 60
        minute_to_second = int(minute) * 60
        second_to_second = int(second)

        num_second = hour_to_second + minute_to_second + second_to_second
        print num_second

        #Play the media file
        trackPath = '"%s"' % path.replace("\\", "/")
        self.mplayer.Loadfile(trackPath)

        #Sleep for the duration of second(s) for the video before jumping to another video
        time.sleep(num_second) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:26:56.723

The problem is that time.sleep() blocks wxPython's main loop so it cannot update, thus it appears unresponsive. If you need to insert a break between videos, then you should use a wx.Timer instead. Otherwise, you'll need to look into using threads.

Here's a tutorial on wx.Timer: [http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)

You would basically create a timer, turn it on at the end of the end of your method and when it finishes, it will fire an event which you can use to load the next video. Or you can use wx.CallLater(numOfMillSec, self.loadVideo)

# linux - 使用 dlopen 在 armhf 系统上加载 arm 共享对象

> ID：13723766
> 
> 赞同：1
> 
> 时间：2012-12-05T12:56:05.727
> 
> 标签：linux, arm, shared-objects

有没有办法在 armhf 系统（用于 armhf 的 Ubuntu 12.10）上加载为 arm(el) 编译的共享对象？对于可执行文件，我通过创建以下符号链接解决了问题

/lib/ld-linux.so.3 -> /lib/ld-linuxarmhf.so.3

看一下 strace 输出（尝试加载 data_nohf/test.so 的最后几行）似乎甚至没有二进制文件的映射是由 dlopen 完成的。

```
open("data_nohf/test.so", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0(\356\2\0204\0\0\0"..., 512) = 512
lseek(3, 1456412, SEEK_SET)             = 1456412
read(3, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1080) = 1080
lseek(3, 1456140, SEEK_SET)             = 1456140
read(3, "A(\0\0\0aeabi\0\1\36\0\0\0\0056\0\6\6\10\1\t\1\22\4\24\1\25\1\27"..., 41) = 41
exit_group(1)                           = ? 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T13:47:49.467

[在 RPi 的Debian Hard Float (armhf)](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=4256&start=575)中提到了在 armhf 系统上不支持 armel（二进制文件）的 原因

# php - $.ajax 方法提交表单时如何使用 $_POST 方法获取数据

> ID：13723769
> 
> 赞同：1
> 
> 时间：2012-12-05T12:56:23.510
> 
> 标签：php, jquery

**JavaScript**函数

```
function sub()
{
var url = "showpdf.php";
$.ajax({
    type: "post",
    url: url,
    success: function(response)
    {
        document.getElementById("alldata").innerHTML = response;
    }
});
} 
```

我在 html 中调用这个函数，如下所示：

```
<input type = "button" value="Go" onclick="sub()"> 
```

在`showpdf.php`文件中我写了下面的代码来获取表单数据

```
$academic = $_POST['academic'];
$uni = $_POST['University']; 
```

但我收到了这个错误

> 未定义索引：学术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:59:33.967

您需要将数据放入 ajax 调用中，此时您实际上并未向 php 脚本发送任何内容。

您可以按如下方式将数据添加到您的 ajax 调用中

```
function sub()
{
var url = "showpdf.php";
$.ajax({
    type: "post",
    url: url,
    data: {'academic': 'wiiiieee'},
    success: function(response)
    {
        document.getElementById("alldata").innerHTML = response;
    }
});
} 
```

`data`包含键->值对的对象在哪里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:01:24.390

将数据传递给 ajax 调用：

前任：

//将您的帖子数据放入这些变量中

```
var University; 
var academic; 
```

//并像这样传递它

```
var dataString = 'academic='+ academic+ '&University=' + University;

$.ajax({
        type: "post",
        data: dataString,
        url: url,
        success: function(response)
        {
            document.getElementById("alldata").innerHTML = response;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:08:24.140

您应该从输入字段中获取数据并通过 ajax post call 发送

```
function sub()
{
var url = "showpdf.php";
var university  = jQuery("#university").val(); //id of the university input field
var academic  = jQuery("#academic").val(); // id of the academic input field
$.ajax({
    type: "post",
    url: url,
    data: { university: university, location: academic },
    success: function(response)
    {
        document.getElementById("alldata").innerHTML = response;
    }
});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:00:36.727

您没有通过 ajax 调用发送任何数据。

```
function sub(data)
{
    var url = "showpdf.php";

    $.ajax({
        type: "post",
        data: data,
        url: url,
        success: function(response)
        {
            document.getElementById("alldata").innerHTML = response;
        }
    });
}

var data = {"academic": "something", "University": "something else"};
sub(data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:05:48.977

您正在获取或发送数据？我不明白，如果您发送缺少DATA，您可以发送序列化表格如下： $("#form").serialize(); , #form 是 ID

> `函数子（）{`
> 
>  ``var url = "showpdf.php";`
> 
>  ``var dataString= $("#form").serialize();`
> 
>  ``$.ajax({`
> 
>  ``类型：“帖子”，`
> 
>  ``网址：网址，`
> 
>  ``数据：数据字符串，`
> 
>  ``成功：功能（响应）`
> 
>  ``{`
> 
>  ``document.getElementById("alldata").innerHTML = response;`
> 
>  ``}`
> 
>  ``});`
> 
>  ``}`````````````

# networking - ARP REQUEST 数据包中使用的发送方 IP 地址是什么？

> ID：13723771
> 
> 赞同：1
> 
> 时间：2012-12-05T12:56:34.057
> 
> 标签：networking, ip, wireshark, tcp-ip, arp

所以在一个 ARP 请求包中，我们有“谁有 192.168.1.1？告诉 192.168.1.143”。然而，回复不是“发送”到 IP 地址 192.168.1.143，而是发送到与其关联的 MAC 地址。获取发件人 IP 地址的目的是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T18:32:55.770

这样人们就可以回复您，而无需发送 ARP 请求。

一般来说，[ARP rfc](https://www.rfc-editor.org/rfc/rfc826)中有很多多余的东西，但这个特殊的东西对我来说似乎没问题。

> **发送方硬件地址和发送方协议地址是绝对必要的。正是这些字段被放入翻译表中。** 目标协议地址在数据包的请求形式中是必需的，以便机器可以确定是在表中输入发送者信息还是发送回复。如果假设回复仅由请求引起，则回复表单中不一定需要。包含它是为了完整性、网络监控和简化上述建议的处理算法（直到将发送者信息放入表中之后才会查看操作码）。

# ruby-on-rails - Ruby 无法连接到 postgresql

> ID：13723773
> 
> 赞同：0
> 
> 时间：2012-12-05T12:56:41.263
> 
> 标签：ruby-on-rails, postgresql

Frnds 我已经为我的 postgresql db 编辑了 database.yml，如下所示，并下载了 pg gem 和相关库。我在谷歌中搜索并以这种方式进行了编辑。但在运行服务器后，它在终端窗口中显示以下错误。 ......请帮助我......

```
development:
  adapter: postgresql
  encoding: unicode
  database: my db name
  username:  user name
  password: password
  host: host name

test:
  adapter: postgresql
  database: db_pchamara
  database: my db name
  username:  user name
  password: password
  host: host name
  pool: 5

production:
  adapter: postgresql
  database: my db name
  username:  user name
  password: password
  host: host name
  pool: 5 
```

**但是如果我在终端中运行命令'rails server'，它会显示以下错误。**

```
Started GET "/assets/rails.png" for 127.0.0.1 at 2012-12-05 18:10:51 +0530

ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
  activerecord (3.2.9) lib/active_record/query_cache.rb:67:in `rescue in call'
  activerecord (3.2.9) lib/active_record/query_cache.rb:61:in `call'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__189673354__call__558944823__callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (13.3ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:05:13.507

您是否在 Gemfile 中设置了 gem 'pg'？

检查您的 Gemfile，确保您已评论（或删除）gem sqlite，并确保您列出了 gem pg

```
gem 'pg' 
```

之后，运行 bundle 命令（这将设置您的应用程序在启动之前将加载的库）：

```
bundle 
```

检查文件 Gemfile.lock，确保 gem pg 在那里列出。

完成所有这些后，请确保您在 postgresql 服务器中实际创建了数据库：

```
bundle exec rake db:create 
```

以防万一，运行任何挂起的迁移

```
bundle exec rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:10:13.783

If this helps, my `database.yml` is as follows:

```
development:
  adapter: postgresql
  encoding: utf8
  reconnect: false
  database: kenyu_dev
  pool: 5
  username: kenyu
  password: super_secret_pass
  host: localhost 
```

Also, did you create the user and gave him the right privileges? Try logging in as the user with `psql`

# python - SKLearn LinearSVC.Coef_/GridSearchCV._best_estimator_coef_

> ID：13723774
> 
> 赞同：1
> 
> 时间：2012-12-05T12:56:45.170
> 
> 标签：python, svm

我正在使用 coef_ 方法从 LinearSVC 中恢复特征权重，以解决二进制分类问题。看起来恢复的权重是针对负类的。有人可以确认这是否属实吗？

# iphone - 获取 UITableview 中自定义单元格的行索引

> ID：13723785
> 
> 赞同：10
> 
> 时间：2012-12-05T12:57:53.050
> 
> 标签：iphone, objective-c, ipad, uitableview, ios5

我正在开发一个 ipad 应用程序。我在应用程序中有一个 UITableview。UITableview 以编程方式创建，其中一个标签和 textview 作为其子视图。表格视图中最多可以有五行。一次向用户显示 2 行。在运行时，它需要在 textview 中输入一些文本并将其保存在本地 sqlite db 中。我已经在代码中实现了 textViewDidBeginEditing 和 textViewDidEndEditing 委托。在 textViewDidEndEditing 委托中，我试图在 NSMUtable 数组中添加/替换文本（在 textview 中输入）。为此，我输入文本的文本视图的行索引是必需的。这样我就可以添加/替换数组中的相应行索引。

请让我知道如何获取文本视图的行索引。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-05T13:01:59.877

你的`TextView`遗嘱被包含在某种牢房中。找到此单元格后，您可以向表格索取索引。从视图层次结构向上导航`TextView`以查找单元格。例如：

```
TextView* textView = // your textView;
UITableViewCell* cell = (UITableViewCell*)[textView superview];
UITableView* table = (UITableView *)[cell superview];
NSIndexPath* pathOfTheCell = [table indexPathForCell:cell];
NSInteger rowOfTheCell = [pathOfTheCell row];
NSLog(@"rowofthecell %d", rowOfTheCell); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T14:27:13.823

它真的很简单，在`cellForRowAtIndexPath`. 只需标记您的`textView`喜欢

```
cell.txtView.tag = indexPath.row; 
```

`textViewDidBeginEditing`在 textView Delegate 方法中使用以下代码 ( )查找行

```
int row = textView.tag; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-13T17:14:25.723

在**iOS 8.4**上运行的**Swift**中：

 **```
@IBAction func signInUpBigButtonPressed(sender: SignInUpMenuTableViewControllerBigButton) {
    // We set the self.indexCellContainingButtonClicked with the cell number selected.
    var parentCell: UIView! = sender
    do {
        parentCell = parentCell.superview!
    } while !(parentCell is UITableViewCell)
    let cell = parentCell as! UITableViewCell
    self.indexCellContainingButtonClicked = self.tableView.indexPathForCell(cell)!.row
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-21T14:06:18.803

这是完成您所要求的更优雅的方式

```
CGPoint senderPosition = [sender convertPoint:CGPointZero toView:self.tableView];

NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:senderPosition]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-22T19:52:01.203

运行 IOS 8.3 发现并在 textViewDidEndEditing
方法中实现了这一点；效果很好！

```
UIView *parentCell = sender
while (![parentCell isKindOfClass:[UITableViewCell class]]) {   // iOS 7 onwards the table cell hierachy has changed.
    parentCell = parentCell.superview;
}

UIView *parentView = parentCell.superview;

while (![parentView isKindOfClass:[UITableView class]]) {   // iOS 7 onwards the table cell hierachy has changed.
    parentView = parentView.superview;
}

UITableView *tableView = (UITableView *)parentView;
NSIndexPath *indexPath = [tableView indexPathForCell:(UITableViewCell *)parentCell];

NSLog(@"indexPath = %@", indexPath); 
```**

# asp.net - IISExpress 没有启动

> ID：13723786
> 
> 赞同：0
> 
> 时间：2012-12-05T12:57:54.530
> 
> 标签：asp.net, iis, iis-express, episerver

我有一个 EPIserver 站点，当我在 IISExpress 中运行它时它不会启动，但是当我在 VS 开发服务器中运行它时它可以工作。

尝试使用 IIS Express 时，我没有收到任何错误消息，它只是启动并且从不显示任何错误消息或网站。我什至没有超时，只是等待一个空白页....

当我调试并点击 Break All 时，我得到以下代码：

```
private void LoadPressItems()
        {
            var startPage = GetPage(PageReference.StartPage);
            if (startPage[Globals.PressItemRootPropertyString] != null)
            {
                var pressItemRoot = startPage[Globals.PressItemRootPropertyString] as PageReference;
                if (!PageReference.IsNullOrEmpty(pressItemRoot))
                {
                    if (MaxItems <= 0) MaxItems = 5;
                    var pages = (from page in GetChildren(pressItemRoot)
                                 where page.IsPublished() &&
                                 page.StopPublish > DateTime.Now
                                 select page).Take(MaxItems).ToList();
                    pageList.DataSource = pages;
                    pageList.DataBind();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:23:03.207

我很少使用 IIS Express，但我的建议是确保 EPiServerFramework.config 是可写的。

如果这不能解决问题，请配置 log4net (EPiServerLog.config) 并将其置于调试或信息模式，如果站点出现故障，您可能会更清楚地了解情况。

我还可以推荐使用[http://world.episerver.com](http://world.episerver.com)来解决与 EPiServer 相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:42:50.570

*   IIS Express = IIS7
*   VS 开发服务器 = IIS6

您需要两个不同的 Web.config 文件，除非您真的想弄明白并制作一个适用于两个 IIS 版本的文件...

我建议您选择与实时环境 IIS 版本匹配的本地服务器，然后从那里开始。

# sql - 提取日期等于今天减去一个或多个季度的数据行

> ID：13723787
> 
> 赞同：0
> 
> 时间：2012-12-05T12:57:54.470
> 
> 标签：sql, sql-server

我有一个日期范围（SQL 服务器），如下所示：

```
UserID, Date
4582, 2012-09-04
4665, 2012-09-05
1251, 2012-06-05
6538, 2011-08-04
7485, 2011-09-05 
```

我需要提取日期等于今天减去一个或多个季度的数据（例如今天减去 1 个季度，今天减去 2 个季度等）

在这种情况下，应该返回的数据是：

```
UserID, Date
4665, 2012-09-05
1251, 2012-06-05
7485, 2011-09-05 
```

我可以使用创建此查询`datediff(quarter,date,getdate())`还是需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:32:10.817

`datediff(quarter,date,getdate())`返回日期是否在不同的季度，而不是它们是否正好相隔四分之一，我认为这是您正在寻找的。

因此，我希望找到 3 个月前的倍数的日期，并且该日期也位于该月的同一天。

[SQL小提琴](http://sqlfiddle.com/#!3/cbaf3/3)

**MS SQL Server 2008 架构设置**：

```
CREATE TABLE tableA
    ([UserID] int, [Date] date);

INSERT INTO tablea
    ([UserID], [Date])
VALUES
    (4582, '2012-09-04'),
    (4665, '2012-09-05'),
    (1251, '2012-06-05'),
    (6538, '2011-08-04'),
    (7485, '2011-09-05'); 
```

**查询 1**：

```
SELECT *
FROM TableA
WHERE
    -- Only get dates which are a multiple of 3 months previosuly
    DATEDIFF(mm, [DATE], GETDATE()) % 3 = 0
    -- only get dates that fall on the same day of the month
    AND DAY(GETDATE()) = DAY([Date]) 
```

**[结果](http://sqlfiddle.com/#!3/cbaf3/3/0)**：

```
| USERID |       DATE |
-----------------------
|   4665 | 2012-09-05 |
|   1251 | 2012-06-05 |
|   7485 | 2011-09-05 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:15:51.257

由于您使用的是 SQL Server，因此您可以使用与今天减去四分之一等的值匹配的递归查询创建日期列表，然后获取最终列表：

```
;with dates (value) as
(
  select cast(getdate() as date)
  union all
  select dateadd(quarter, -1, value)
  from dates
  where dateadd(quarter, -1, value) >= '2010-01-01'
)
select userid, date
from yourtable t
inner join dates d
  on t.date = d.value 
```

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!3/957f0/6)

结果：

```
| USERID |       DATE |
-----------------------
|   4665 | 2012-09-05 |
|   1251 | 2012-06-05 |
|   7485 | 2011-09-05 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:01:20.130

尝试这个 ：：

```
Select 
userID, 
`date_column`

from 
table
where `date_column`> DATE_SUB(CURDATE, INTERVAL 3 MONTH) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:10:47.630

```
Select 
userID, 
`date_column`

from 
table
where DATEDIFF(CURDATE(),date('date_col')) >= 90 
```

# c# - 如何检查 .NET 中存在的文化

> ID：13723790
> 
> 赞同：23
> 
> 时间：2012-12-05T12:58:00.290
> 
> 标签：c#, .net, globalization

我有这段代码，当我尝试获取不存在的文化时，我会遇到异常。
是否存在类似`TryGetCultureInfo`返回`bool`值的方法？我不想使用`try-catch`声明

```
CultureInfo culture = CultureInfo.GetCultureInfo(cultureCode);
if (culture == null)
{
    culture = CultureInfo.GetCultureInfo(DefaultCultureCode);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-10T07:05:22.060

您可以编写一个返回布尔值的 DoesCultureExist 方法，如下所示：

```
private static bool DoesCultureExist(string cultureName)
{
    return CultureInfo.GetCultures(CultureTypes.AllCultures).Any(culture => string.Equals(culture.Name, cultureName, StringComparison.CurrentCultureIgnoreCase));
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-05T13:08:55.440

我认为没有这样的方法。因此，您可以只`try-catch`检查或检查所有已安装的文化：

```
string cultureCode = "de-DE";
CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures);
var culture = cultures.FirstOrDefault(c => c.Name.Equals(cultureCode, StringComparison.OrdinalIgnoreCase));
if (culture == null)
{
    culture = cultures.FirstOrDefault(c => c.Name.Equals(DefaultCultureCode, StringComparison.OrdinalIgnoreCase));
    if (culture == null)
        culture = CultureInfo.CurrentCulture;
} 
```

但我更喜欢`try-catch`，我相信它更有效。

```
public bool TryGetCultureInfo(string cultureCode, string DefaultCultureCode, out CultureInfo culture)
{
    try
    {
        culture = CultureInfo.GetCultureInfo(cultureCode);
        return true;
    } catch(CultureNotFoundException)
    {
        if (DefaultCultureCode == null)
            culture = CultureInfo.CurrentCulture;
        else
        {
            try
            {
                culture = CultureInfo.GetCultureInfo(DefaultCultureCode);
            } catch (CultureNotFoundException)
            {
                culture = CultureInfo.CurrentCulture;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-11T22:00:56.347

如果您希望它更快，您可以使用：

```
internal static class Culture
{
    private static readonly HashSet<string> CultureNames = CreateCultureNames();

    internal static bool Exists(string name)
    {
        return CultureNames.Contains(name);
    }

    private static HashSet<string> CreateCultureNames()
    {
        var cultureInfos = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                      .Where(x => !string.IsNullOrEmpty(x.Name))
                                      .ToArray();
        var allNames = new HashSet<string>(StringComparer.OrdinalIgnoreCase);
        allNames.UnionWith(cultureInfos.Select(x => x.TwoLetterISOLanguageName));
        allNames.UnionWith(cultureInfos.Select(x => x.Name));
        return allNames;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T13:06:09.480

不，AFAIK 是不可能的。您可以先检查文化是否存在，在这种情况下获取它。

以下代码显示了如何执行此操作：

```
 private static CultureInfo GetCulture(string name)
    {
        if (!CultureExists(name)) return null;

        return CultureInfo.GetCultureInfo(name);
    }

    private static bool CultureExists(string name)
    {
        CultureInfo[] availableCultures =
            CultureInfo.GetCultures(CultureTypes.AllCultures);

        foreach (CultureInfo culture in availableCultures)
        {
            if (culture.Name.Equals(name))
                return true;
        }

        return false;
    } 
```

希望能帮助到你

# sql - 按列排序，然后按第一个结果

> ID：13723794
> 
> 赞同：3
> 
> 时间：2012-12-05T12:58:16.897
> 
> 标签：sql, oracle, plsql, sql-order-by

我正在尝试在 pl/sql 中创建一个查询以获得以下结果：

数据：

```
Id     |     Date       |  Request
1      |     10/09/10   |  111
2      |     09/09/10   |  100
3      |     13/09/10   |  111
4      |     01/08/10   |  222
5      |     08/07/10   |  100
6      |     06/07/10   |  111
7      |     04/07/10   |  100
8      |     01/06/10   |  222 
```

要获得以下结果：

```
Id     |     Date       |  Request
8      |     01/06/10   |  222
4      |     01/08/10   |  222
7      |     04/07/10   |  100
2      |     09/09/10   |  100
5      |     08/07/10   |  100
6      |     06/07/10   |  111
1      |     10/09/10   |  111
3      |     13/09/10   |  111 
```

Ps：在这个例子中，格式日期是（dd/mm/yy）

正如您在示例中看到的，首先按日期排序，但是当捕获第一行时，列出具有相同请求的所有行，当完成具有相同请求的行时，继续按日期排序...

谁能帮我解决这个问题？我尝试了几种方法，但没有预期的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T13:05:54.207

您可以使用[分析](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#i81407)：

```
SQL> WITH data AS (
  2     SELECT 8 id, to_date('01/06/10') dat, 222 req FROM DUAL
  3     UNION ALL SELECT 4, to_date('01/08/10'), 222  FROM DUAL
  4     UNION ALL SELECT 7, to_date('04/07/10'), 100  FROM DUAL
  5     UNION ALL SELECT 2, to_date('09/09/10'), 100  FROM DUAL
  6     UNION ALL SELECT 5, to_date('08/07/10'), 100  FROM DUAL
  7     UNION ALL SELECT 6, to_date('06/07/10'), 111  FROM DUAL
  8     UNION ALL SELECT 1, to_date('10/09/10'), 111  FROM DUAL
  9     UNION ALL SELECT 3, to_date('13/09/10'), 111  FROM DUAL
 10  )
 11  SELECT ID, dat, req
 12    FROM DATA
 13   ORDER BY MIN(dat) over (PARTITION BY req), req, dat;

        ID DAT                REQ
---------- ----------- ----------
         8 01/06/2010         222
         4 01/08/2010         222
         7 04/07/2010         100
         5 08/07/2010         100
         2 09/09/2010         100
         6 06/07/2010         111
         1 10/09/2010         111
         3 13/09/2010         111 
```

# ios - iOS：这些地址在 iOS 崩溃日志的堆栈跟踪中意味着什么？

> ID：13723795
> 
> 赞同：2
> 
> 时间：2012-12-05T12:58:23.643
> 
> 标签：ios, debugging, stack-trace, crash-log

这是我的 iOS 应用程序崩溃日志中的一行堆栈跟踪：

> 我的应用程序名称 0x001f642e 0xd2000 + 1197102

我知道如何表示崩溃日志，但是 0x001f642e 0xd2000 + 1197102 在堆栈跟踪的每一行中意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:07:25.707

编写这些值的另一种形式是：`0x001f642e = 0xd2000 + 1197102`.

`0x001f642e`正在执行的代码的实际地址也是如此，而正在执行`0xd2000`代码的二进制文件的起始地址也是如此，并且`1197102`是二进制文件中的偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:07:38.387

它指的是位于位置 0xd2000 的 1197102 字节处的指令。

这里有人问：[如何阅读objective-c堆栈跟踪](https://stackoverflow.com/questions/6462214/how-to-read-objective-c-stack-traces)

# python - 什么是保证出现在 unicode 字符串列表末尾的排序键？

> ID：13723796
> 
> 赞同：0
> 
> 时间：2012-12-05T12:58:24.183
> 
> 标签：python, sorting, python-2.7

我需要对一些字典键进行排序，以便 u"/" 字符位于末尾。当使用非 unicode 字符串时，我使用了一个函数：

```
>>> L = ["/", "C", "b", "A"]
>>> sorted(L, key=lambda item: item.lower() if item != "/" else tuple())
['A', 'b', 'C', '/'] 
```

这使用（滥用？）元组在 python 中的字符串之后排序的事实。但是 unicode 字符串在元组之后排序，所以如果键是 unicode，这将不起作用。所以，例如，

```
>>> L = [u"/", u"C", u"b", u"A"]
>>> sorted(L, key=lambda item: item.lower() if item != u"/" else tuple())
[u'/', u'A', u'b', u'C'] 
```

*   unicode 类型后排序了哪些对象？
*   有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:00:13.687

返回一个保证最后排序的 unicode 字符[`sys.maxunicode`](http://docs.python.org/2/library/sys.html#sys.maxunicode)：：

```
sorted(L, key=lambda item: item.lower() if item != u"/" else sys.maxunicode) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T13:05:43.423

您不必混合类型或使用特殊的排序键：在所有情况下只需使用元组作为键：

```
sorted(L, key=lambda item: (item == "/", item.lower())) 
```

这意味着“/”是键控的，`(True, "/")`而所有其他字符串都是`(False, "...whatever...")`

# jquery - 如何将行添加到具有动态单元格数的 DataTable

> ID：13723798
> 
> 赞同：0
> 
> 时间：2012-12-05T12:58:32.170
> 
> 标签：jquery, asp.net-mvc, dynamic, datatables, row

我有这段代码，用于在 DataTable 中创建一个新行，用于在 MVC 内部网中进行内联编辑。

每行有 4 个单元格，两个用于编辑数据，两个用于编辑和删除链接。

该表用于编辑 TestFields 的值、我们数据库中的表、创建新表等。

我们有两个标题，名称和描述，因此有两个单元格。

现在我正在使用相同的代码来做一些完全不同的事情。

标头现在是现有的 TestFields 名称，因此我可以有一个标头或 100 个。

所以我需要能够根据我从模型中获得的 TestFields 对象的数量添加一个包含 x 个单元格的新行。

所以这就是我所拥有的

```
 Name   Description
  --------------------------------
  Name1  Description1    Edit or Save Delete
  Name2  Description3    Edit or Save Delete
  Name1  Description1    Edit or Save Delete 
```

在这里我知道我只需要两个单元格 + 编辑/保存/删除链接，所以没问题

我现在需要的新表看起来像

```
 Name1   Name2   Name3   Name4   Name4 ...   
  --------------------------------
  Value1  Value2  Value3  Value4  Value5   Edit or Save Delete
  Value1  Value2  Value3  Value4  Value5   Edit or Save Delete
  Value1  Value2  Value3  Value4  Value5   Edit or Save Delete 
```

所以这意味着这段代码

```
var aiNew = oTable.fnAddData(['', '',
                '<a class="edit" href="">Edit</a>', '<a class="delete" 
```

可

```
var aiNew = oTable.fnAddData(['',
                '<a class="edit" href="">Edit</a>', '<a class="delete" 
```

或者

```
var aiNew = oTable.fnAddData(['', '', '', '' ,'' ,'','','','',
                '<a class="edit" href="">Edit</a>', '<a class="delete" 
```

这取决于我拥有的 TestFields 的数量。

这是创建新行的全部代码。有任何想法吗？

```
 $('#new').click(function (e) 
                e.preventDefault();

                **var aiNew = oTable.fnAddData(['', '',
            '<a class="edit" href="">Edit</a>', '<a class="delete" href="">Delete</a>']);**
                var nRow = oTable.fnGetNodes(aiNew[0]);
                editRow(oTable, nRow, false);
                nEditing = nRow;
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:03:48.593

我设法解决了它。这是解决方案

```
$('#new').click(function (e) {
            e.preventDefault();

            var fieldsCount = $("#FieldsCount").val();
            var row         = {};

            for (var i = 0; i < fieldsCount; i++) {
                row[i] = '';
            }

            row[fieldsCount]                = '<a class="edit" href="">Edit</a>';
            row[parseInt(fieldsCount) + 1]  = '<a class="delete" href="">Delete</a>';

            var aiNew   = oTable.fnAddData(row);
            var nRow    = oTable.fnGetNodes(aiNew[0]);

            editRow(oTable, nRow, false);
            nEditing = nRow;
        }); 
```

# vb6 - 显示 DTPicker 日历年份下拉 Visual Basic

> ID：13723803
> 
> 赞同：2
> 
> 时间：2012-12-05T12:58:47.863
> 
> 标签：vb6

我使用 DTPicker 控件在我的应用程序中选择日期。当我单击选择器控件时，它会下拉日历，如果我单击顶部附近的年份，它会显示用于选择年份的向上向下按钮。

我的问题是，我们有没有机会在不点击年份的情况下默认显示向上向下年份选择按钮。检查所附图片并给我一些想法。谢谢 ![在此处输入图像描述](../Images/23af7d6a24d317c307cb4e37a32aa30a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:15:08.917

在没有看到您的图像的情况下，我只能说要在 VB6 中获得不同的用户控件功能，您要么必须购买自己喜欢的，要么创建自己的。标准 MS 控件通常提供所需的所有功能，并且还具有用户熟悉和符合 MS 指南的优点。

# javascript - IE 问题 - 不支持 Object.keys(value).length

> ID：13723805
> 
> 赞同：12
> 
> 时间：2012-12-05T12:58:51.860
> 
> 标签：javascript, jquery, internet-explorer

我一直在尝试在 Internet Explorer 中调试一些 js，但我无法弄清楚这一点。这是导致错误的行：

```
var numberOfColumns = Object.keys(value).length; 
```

错误是...

```
Message: Object doesn't support this property or method
Line: 640
Char: 5
Code: 0
URI: xxx 
```

起初我以为它与`Object.keys(value).length;`属性有关，但奇怪的是（无论如何对我来说），错误出现在 char 5 处，它是变量名的开头。

无论如何，我不知道发生了什么或如何解决它。另外，如果我更换：

```
var numberOfColumns = Object.keys(value).length; 
```

和 ...

```
var numberOfColumns = 9; // troubleshooting 
```

错误仍然存​​在。请帮忙。

**更新**

添加了 jsFiddle

[http://jsfiddle.net/4Rab7/](http://jsfiddle.net/4Rab7/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T13:47:28.467

IE >= 9 支持该`keys`属性。您可能正在早期版本中对其进行测试。一个简单的解决方法是：

```
var length = 0;
for(var prop in data){
    if(data.hasOwnProperty(prop))
        length++;
} 
```

这是一个演示：http: [//jsfiddle.net/vKr8a/](http://jsfiddle.net/vKr8a/)

有关详细信息，请参阅此兼容性表：

[http://kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-29T07:06:43.283

或者，您可以为本身不支持的浏览器使用推荐的 polyfill`Object.keys`

```
Object.keys=Object.keys||function(o,k,r){r=[];for(k in o)r.hasOwnProperty.call(o,k)&&r.push(k);return r} 
```

分解此脚本的作用：

```
Object.keys = Object.keys || function(o,k,r) { 
// If the script doesn't detect native Object.keys 
// support, it will put a function in its place (polyfill)

    r=[];
    // Initiate the return value, empty array

    for(k in o) r.hasOwnProperty.call(o,k) 
    // loop through all items in the object and verify each
    // key is a property of the object (`for in` will return non 
    // properties)

    && r.push(k);
    // if it is a property, save to return array

    return r
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T13:46:07.097

`Object.keys`已在 ECMAScript 第 5 版中引入。因此，如果您的 IE 版本低于 9，它将不受支持。

# android - 如何在没有互联网的情况下在 Android 应用中显示 ppt、pdf 等文档

> ID：13723807
> 
> 赞同：3
> 
> 时间：2012-12-05T12:58:58.497
> 
> 标签：android, excel, pdf, ms-word, powerpoint

我想在我的应用程序中显示 PDF、PPT、EXCEL、WORD 文档。这些文件已经存储在 sdcard 中，即使没有互联网连接，我也想打开这些文档。

我发现很多帖子说要使用 Google 文档或任何预安装的应用程序。我不想要这些解决方案，因为它不符合我的要求。因为我的文档应该在我的应用程序中以自定义布局打开。

我尝试使用 APV (AndroidPdfViewer) 来显示 pdf。但它的缩放功能无法正常工作。我使用了 OlivePhone 的 OfficeDemo 来制作 ppt 和所有内容。但它的 JAR 文件很大，我收到错误“转换为 Dalvik 格式失败，错误 1 ​​解决方案？”。

这些有什么可行的解决方案吗？请帮助我..提前谢谢你....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:02:16.493

不，没有android提供的原生API，你可以使用一些第三方API来阅读ppt，pdf等。

一些第三方 API 是：

[谷歌文档查看器](https://docs.google.com/viewer)

[officeSuite Professional 6](http://www.mobisystems.com/android_office/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:06:46.830

您必须安装任何第三方应用程序。否则没办法。示例[QuickOffice](https://play.google.com/store/apps/details?id=com.qo.android.am3&feature=search_result)、[OfficeSuite](https://play.google.com/store/apps/details?id=com.mobisystems.editor.office_with_reg&feature=search_result)和[Document to Go](https://play.google.com/store/apps/details?id=com.dataviz.docstogo&feature=search_result)

# android - Android PreferenceScreen 布局

> ID：13723809
> 
> 赞同：0
> 
> 时间：2012-12-05T12:59:08.710
> 
> 标签：android, android-layout

嗨，我正在使用`Preferencescreen`xml 来设计我的首选项屏幕，我在首选项屏幕底部添加了两个按钮，首选项屏幕滚动但底部按钮不滚动，因为它们不是首选项屏幕的一部分，我正在使用此代码添加两个视图一个作为首选项屏幕，另一个作为添加按钮

`addPreferencesFromResource(R.xml.userpreferences);
setContentView(R.layout.preferencessetting);`

![过滤器和音频源是首选项的一部分，而 DropBox 同步是另一个布局](../Images/1bfc6c9b31908a75decd1ffff13562ab.png)

我想做的按钮应该与存在屏幕组件一起滚动。任何人都可以指导我如何处理这种情况？

# java - 与静态达成协议

> ID：13723810
> 
> 赞同：0
> 
> 时间：2012-12-05T12:59:10.087
> 
> 标签：java, static

在我的程序中，我使用了一个 ArrayList of ArrayList of booleans。我需要将这些价值观从一个班级带到另一个班级，而我一直在通过简单地制作它来做到这一点`static`。

但我听说这可能味道不好。我在想，最好的办法是制作一个以该集合为中心的对象（顶级对象），可能还有一些方法来配合这个。

所以我的问题：

1.  这是否更好？
2.  如何在整个应用程序中保留一个顶级对象的实例，以便我的值可以传输？我在想一个私有构造函数和静态方法。还是我应该只去公共领域？批准的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:06:15.947

**-**如果您不想使用`static` **ArrayList**，那么您可以创建一个类`Singleton`并将该**ArrayList**放入该类中。

**例如：**

```
public class Test{

  private ArrayList<String> arr = new ArrayList<String>();

  private static Test uniqueInstance = new Test();

  private Test{}      // Make constructor Private

  public static Test getInstance(){

    return uniqueInstance;

   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:11:11.937

> 我需要将这些价值观从一个班级带到另一个班级

一些构造函数注入怎么样？

```
public class A (ArrayList<ArrayList<Boolean>> list) 
```

接线可以委托给[IOC](https://stackoverflow.com/q/3058/628943)（控制反转）框架，例如 Spring，或者您可以使用[DIY-DI手动完成](http://misko.hevery.com/2010/05/26/do-it-yourself-dependency-injection/)

我会远离，`Singletons`因为

*   这是一个[反模式](https://stackoverflow.com/q/11292109/628943)
*   [单元测试单例](https://stackoverflow.com/q/3876951/628943)是困难的

# xml - OpenERP中xml中one2many字段上的域

> ID：13723811
> 
> 赞同：1
> 
> 时间：2012-12-05T12:59:10.493
> 
> 标签：xml, openerp

我想在 xml 中的 one2many 字段上给出域，在域中我想使用 one2many 对象的字段。

例如：在采购订单表单视图的采购订单行中，我想显示那些 product_qty 为 2 的记录。“product_qty”是 purchase.order.line 的一个字段
这是我的采购订单行

```
<field name='order_line' domain="[('product_qty', '=', 2)]" 
```

但它不起作用。定义字段时，我不想在 py 文件中提供域。

谁能知道如何实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:40:25.823

您可以尝试使用动态函数字段。请参阅@AnomA在[此答案中的代码。](https://stackoverflow.com/a/13699397/959570)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:14:21.297

product_qty 是不可搜索的函数字段。因此，您的域无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:30:22.807

如果你真的需要实现这一点，你需要创建一个布尔类型的函数字段，如果 product_qty 为 2.0，函数将返回 true，否则返回 false。然后在域条件中使用这个新字段。`<field name='order_line' domain="[('is_qty_2', '=', True)]" >`

# excel - Excel 通过用户输入显示另一个工作表中的数据

> ID：13723812
> 
> 赞同：0
> 
> 时间：2012-12-05T12:59:11.610
> 
> 标签：excel, worksheet-function

我需要找到某些数字（由用户给出）之间的行以在屏幕上显示它们以便可以打印。

例如：用户输入 104822000011 和 104822000020 作为`from`和`to`值。然后我需要在另一个工作表中搜索这些之间的任何数字。工作表中的数据来自数据库。我需要返回给定数字之间的行中的所有数据。

我对VBA知之甚少，所以如果这可以用工作表函数来完成，那将是可取的。我用谷歌搜索并尝试了一些东西，但它们似乎都不容易做到或不起作用。有人可以在这里帮我一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:02:41.693

Let's assume you have your data on the worksheet `dataWS`, with row numbers in column A and data in column B

On another worksheet, you input your values `from` in `A1` and `to` in `B1`

Then in `A2` `=IF($A1<$B$1,$A1+1,"")`, which will display the row number you want to display on this row.

Next, in `B2` retrieve the data with `=IF($A2="","",VLOOKUP($A2,dataWS!A:B,2,FALSE))`. Copy the formulas in `A2:B2` to the rows below, and you should be set.

Should you want to do it with VBA, you could use the following bit of code (that assumes the Ids in your data are ordered properly). Be also aware that it does not empty the target area before writing the new data.

```
Public Sub getData()

Dim currentId As Long
Dim toId As Long

Dim wsTarget As Worksheet
Dim targetIdCol As Integer
Dim targetDataCol As Integer

Dim wsSource As Worksheet
Dim sourceIdCol As Integer
Dim sourceDataCol As Integer

Dim readRow As Long
Dim writeRow As Long

Set wsTarget = ThisWorkbook.Worksheets("Sheet2") ' name of the target worksheet
targetIdCol = 1    'number of the column where the ids are to be written (a=1)
targetDataCol = 2   'number of the column where the data is to be written

Set wsSource = ThisWorkbook.Worksheets("Sheet1") ' name of the source data worksheet
sourceIdCol = 1    'number of the column where the ids are to be read(a=1)
sourceDataCol = 2   'number of the column where the data is to be read

currentId = wsTarget.Range("A1").Value  'cell in which the from is specified (here "A1" of target worksheet)
toId = wsTarget.Range("B1").Value 'cell in which the to is specified (here "B1" of target worksheet)

readRow = 1   'row at which the data should start to be read
writeRow = 2   'row at which the data should start to be written

While (wsSource.Cells(readRow, sourceIdCol) <> "") And (currentId <= toId)

    If currentId = wsSource.Cells(readRow, sourceIdCol).Value Then
        wsTarget.Cells(readRow, targetIdCol) = wsSource.Cells(readRow, sourceIdCol).Value
        wsTarget.Cells(readRow, targetDataCol) = wsSource.Cells(readRow, sourceDataCol).Value
        readRow = readRow + 1
    Else

        If currentId > wsSource.Cells(readRow, sourceIdCol).Value Then
             readRow = readRow + 1
      Else
          currentId = currentId + 1
      End If
    End If

Wend

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:28:13.203

是的，您可以通过复制行（您不想要的）或 VBA 来做到这一点。而且我相信 VBA 是一个不错的选择。

但是如果记录号是严格的数字并且没有太多数据要显示，我有一个使用数据透视表的愚蠢方法。

您可以添加一个引用数据表的数据透视表。然后将所有字段拖到行标签上。然后对于每个字段设置，在布局中选择“以表格形式显示项目标签”并删除所有小计。它现在应该看起来与原始数据相似。

然后您可以选择记录编号上的任何位置，然后在行标签上选择“标签过滤器 ==> 之间”。然后输入你的 from 和 to 值。

# iphone - Facebook 发布过程失败并出现错误“设备上的访问令牌已失效”

> ID：13723813
> 
> 赞同：2
> 
> 时间：2012-12-05T12:59:15.610
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

尝试发布到 FB 墙时出现错误：

```
{
    code = 190;
    message = "The access token was invalidated on the device.";
    type = OAuthException;
} 
```

我使用社交框架，并且通过帐户商店访问帐户，请求适当的权限。所有权限都被授予，所以我什至不知道是什么导致了这个错误。如果你需要一个代码，就问我到底是哪个，因为它有很多。Ps 似乎我还没有被授权，但是我被授予了所有需要的权限，这怎么可能呢？

# ffmpeg - FFMPEG 和 H264 编码 mp4

> ID：13723814
> 
> 赞同：0
> 
> 时间：2012-12-05T12:59:17.303
> 
> 标签：ffmpeg, debian, h.264, mp4

我尝试将视频编码`mov`为`mp4`宽度`h264`编解码器，但出现此错误：

```
Unknown encoder 'libx264' 
```

但是当我检查`h264`我的配置是否支持时，我看到了：

```
DVD h264 H.264 / AVC / MPG-4 AVC/ MPEG-4 part 10 
```

和我的代码：

```
FFMPEG -y -i video.mov -vcodec h264 video.mp4 ; 
```

有人可以帮我弄这个吗 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:28:17.810

运行`ffmpeg -codecs`；它将列出所有支持的编解码器，并确保您拥有`libx264`H.264 编码器的名称。ffmpeg 中的解码器名为`h264`.

如果您正在编译 ffmpeg，您需要编译并安装 x264，然后使用编译选项编译 ffmpeg `--enable-gpl --enable-libx264`。请参阅[在 Ubuntu Hardy Heron 上编译 FFmpeg](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuideHardy)或[如何快速编译 libx264](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20quickly%20compile%20libx264)。或者，您可以使用已编译的[静态构建](https://ffmpeg.org/download.html#LinuxBuilds)。

# yii-extensions - 如何将隐藏数据发送到 Yii 上的另一个控制器操作

> ID：13723816
> 
> 赞同：0
> 
> 时间：2012-12-05T12:59:30.427
> 
> 标签：yii-extensions, yii, yii-components, yii-events

我不知道如何将隐藏数据从控制器 1 的函数（动作）发送到 yii 中的控制器 2 的函数（动作）。

我认为通过 POST 将数据发送到第二个函数，我不打算在不使用表单的情况下发送 POST 数据知识。

你能帮助我吗？

对不起我的英语不好

控制器1：

> 类 DeviceController 扩展控制器 {
> 
> ```
>  public function actionDeviceTurnOn(){
> 
>      if(isset($_GET['id_device'])){
> 
>          $id_device = $_GET['id_device'];
> 
>          $model = $this->loadModel($id_device);
>          $model->status = 1;
> 
>          $title = "Message of admin";
> 
>          $message = "Good morning" . "\r\n" .
>                      "\r\n" . 
>                      "The device is On";
> 
>          MessagesController::messageAutoComplete(Yii::app()->user->id, 
>            $_GET['id_user'], $title, $message);                                  
> 
>      } 
>   }  } ?> 
> ```

控制器 2：

> 类 MessagesController 扩展控制器 {
> 
> ```
>  public function messageAutoComplete($from_user_id=null, $to_user_id=null,
>   $title=null, $message=null){
> 
>         $data['from_user_id'] = $from_user_id;
>         $data['to_user_id'] = $to_user_id;
>         $data['title'] = $title;
>         $data['message'] = $message;
> 
>         MessagesController::actionCompose($data);        
>   }
> 
>   public function actionCompose ($data=null)
>   {
>         $model=new Messages;
> 
>         $this->performAjaxValidation($model);
> 
>         if(isset($_POST['Messages']))
>         {
>           foreach($_POST['Messages']['to_user_id'] as $user_id) {
>               $model = new Messages;
>               $model->attributes=$_POST['Messages'];
>               $model->to_user_id = $user_id;
>               $model->save();
>           }
>               $this->redirect(array('success'));
>         }
> 
>         $model->to_user_id = "";
> 
>         if($data != null){
> 
>              $model->from_user_id = $data['from_user_id'];
>              $model->to_user_id = $data['to_user_id'];
>              $model->title = $data['title'];
>              $model->message = $data['message'];
>         }
> 
>         $this->render('compose',array(
>            'model'=>$model,
>         ));
>    }  } 
> ```

这是我会做的，但它不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:40:22.310

最后，我找到了解决问题的方法。

为了将数据隐藏函数（动作）控制器 1 发送到函数（动作）控制器 2，我在控制器 1 的函数中创建了一个包含隐藏数据的会话，并在控制器 2 的函数中获取了这个会话。

我按照以下教程创建会话： [http ://www.larryullman.com/2011/05/03/using-sessions-with-the-yii-framework/](http://www.larryullman.com/2011/05/03/using-sessions-with-the-yii-framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:47:12.660

我马上看到的一件事是您正在静态调用您的方法，但该方法是一个成员函数。应该是公共静态函数 messageAutoComplete 才合适。另外我注意到从控制器调用控制器在 Yii 中不起作用。你真的应该在你的组件目录中添加一个帮助类。如果您不想使其成为静态方法，您甚至可以从您的组件扩展您的控制器，因此它会被称为 $this->messageAutoComplete(params)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T08:10:46.680

您还可以通过在控制器上调用 renderpartial 将所有数据发送到两个视图文件，并在同一控制器中获取支持的数据并在相关操作中处理它们。

# apache - Mod_jk 将所有请求挂载到 tomcat，除了两个站点

> ID：13723823
> 
> 赞同：3
> 
> 时间：2012-12-05T12:59:52.663
> 
> 标签：apache, tomcat, mod-jk

我正在使用 mod_jk 使 java web 应用程序可以通过 apache 网络服务器访问。我的 vhost.conf 看起来像这样：

```
JkMount /web/* worker1
JkMount /group/* worker1
JkMount /home/* worker1
JkMount /contact/* worker1
JkMount /customers/* worker1
JkMount /downloads/* worker1
JkMount /theme/* worker1
JkMount /language/* worker1
JkMount /image/* worker1
JkMount /layouttpl/* worker1 
```

如您所见，我必须额外安装 java web 应用程序的每个站点。我不能只使用 JkMount /* worker1，因为有一些 PHP 应用程序（mydomain.com/forum 和 mydomain.com/wiki）在同一个 apache 服务器上运行。我的问题是，来自 tomcat 服务器的不同站点的名称经常更改。所以每次站点名称发生变化时，我都必须调整 vhost.conf 文件。是否有可能像 JkMount /* worker1 一样将所有请求发送到 tomcat 服务器，但 /wiki 和 /forum 除外？

我正在寻找这样的东西：

```
JkMount /* worker1
JkUnmount /forum
JkUnmount /wiki 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T10:38:48.757

试试这个：

```
JkMount /* worker1
JkUnMount /forum/*  worker1
JkUnMount /wiki/*   worker1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T06:15:05.943

这种方式应该适用于那些仍在寻找的人：

```
JkMount /* ajp13_worker

SetEnvIf Request_URI "/forum/*" no-jk 
```

# iphone - iphone:- MKReverseGeocoder 获取邮政编码、subAdministrativeArea、locality 和 subThoroughfare 的 Null 值

> ID：13723825
> 
> 赞同：1
> 
> 时间：2012-12-05T12:59:56.867
> 
> 标签：iphone, objective-c, ios

我正在`MKReverseGeocoder`与`locationManager's` `didUpdateToLocation`委托一起使用但我想知道当我在`Device`.

我的代码是波纹管： -

```
- (void)viewDidLoad 
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
    [locationManager startUpdatingLocation];

     [super viewDidLoad];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    // this creates a MKReverseGeocoder to find a placemark using the found coordinates
    reverseGeocoder = [[MKReverseGeocoder alloc] initWithCoordinate:newLocation.coordinate];
    reverseGeocoder.delegate = self;
    [reverseGeocoder start];
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error
{
    NSLog(@"MKReverseGeocoder has failed.");
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{
    MKPlacemark * myPlacemark = placemark;
    NSString *city = myPlacemark.thoroughfare;
    NSString *subThrough=myPlacemark.subThoroughfare;
    NSString *locality=myPlacemark.locality;
    NSString *subLocality=myPlacemark.subLocality;
    NSString *adminisArea=myPlacemark.administrativeArea;
    NSString *subAdminArea=myPlacemark.subAdministrativeArea;
    NSString *postalCode=myPlacemark.postalCode;
    NSString *country=myPlacemark.country;
    NSString *countryCode=myPlacemark.countryCode;

    NSLog(@"city%@",city);
    NSLog(@"subThrough%@",subThrough);
    NSLog(@"locality%@",locality);
    NSLog(@"subLocality%@",subLocality);
    NSLog(@"adminisArea%@",adminisArea);
    NSLog(@"subAdminArea%@",subAdminArea);
    NSLog(@"postalCode%@",postalCode);
    NSLog(@"country%@",country);
    NSLog(@"countryCode%@",countryCode);

} 
```

**输出**

`cityDrive-in Road`

`subThrough(null)`

`locality(null)`

`subLocality(null)`

`adminisAreaGujarat`

`subAdminArea(null)`

`postalCode(null)`

`countryIndia`

`countryCodeIN`

**使用 CLGeocoder**

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    // this creates a MKReverseGeocoder to find a placemark using the found coordinates
//    reverseGeocoder = [[MKReverseGeocoder alloc] initWithCoordinate:newLocation.coordinate];
//    reverseGeocoder.delegate = self;
//    [reverseGeocoder start];

    CLGeocoder *reverseGeo = [[CLGeocoder alloc] init];

    [reverseGeo reverseGeocodeLocation: newLocation completionHandler:
     ^(NSArray *placemarks, NSError *error) {

         NSLog(@"%@",[placemarks objectAtIndex:0]);
         for (CLPlacemark *placemark in placemarks) {

             NSLog(@"~~~~~~~~%@",placemark.locality);

         }

     }];
} 
```

`OUTPUT IS:- ~~~~~~~~(null)`

我上面的代码在模拟器中正常工作，但在设备中不能正常工作.. :(请帮助并指导我正确获取城市名称的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:05:52.693

您不应该真正使用 MKReverseGeocoder，因为它在 iOS5 中已被苹果贬值，您应该真正使用 CLGeocoder。CLGeocode 将返回基于 NSArray *placemarks 的信息，然后您可以遍历它们并调用 assoc 数组中的键。请通过链接。

[CLGeoCode 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)

[相关示例代码](http://developer.apple.com/library/ios/#samplecode/GeocoderDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011097)

# google-maps-markers - 如何在从另一个 javascript 函数调用的 javascript 函数中传递多个参数？

> ID：13723828
> 
> 赞同：0
> 
> 时间：2012-12-05T13:00:10.080
> 
> 标签：google-maps-markers, javascript

我正在使用谷歌地图，点击标记打开的信息窗口调用 JavaScript 函数。
必须从此函数调用另一个具有多个参数的函数。

以下是我的代码：

```
function createMarker(point,custid,streetadd,city,state,zip,address,phone,website,co) {         
    var infowindowHover,infowindowClick;

    var hoverText = "<CENTER><B>" + co + "</B></CENTER>";
    var markerMarkup = "<TABLE><TR><TD colspan='2'><B>";
    markerMarkup = markerMarkup + co + "</B></TD></TR><TR><TD colspan='2'>";
    markerMarkup = markerMarkup + streetadd + "</TD></TR><TR><TD colspan='2'>";
    markerMarkup = markerMarkup + city + "," + state + " " + zip + "</TD></TR><TR><TD colspan='2'>";
    markerMarkup = markerMarkup + phone + "</TD></TR><TR><TD colspan='2'>";
    if(website.indexOf("http://")>0) {
        markerMarkup = markerMarkup +"<a href=";
    } else {
        markerMarkup = markerMarkup +"<a href=http://";
    }
    markerMarkup = markerMarkup + website + " target=_blank>" + website + "</a></TD></TR><TR><TD>";                                
    var funCall = custid + "," + streetadd + "," + city + "," + state + "," + zip + "," + address + "," + phone + "," + website + "," + co;
    markerMarkup = markerMarkup + "<input type='button' class='button' value='see available styles' id='styles' onclick='setstyles("+ funCall +");'></input>";
    //markerMarkup = markerMarkup + "<input type='button' class='button' value='see available styles' id='styles' onclick='setstyles("+ custid +");'></input>"; 

    markerMarkup = markerMarkup + "</TD></TR></TABLE>";

    var marker = new google.maps.Marker({
        position: point,
        map: map,
        icon: image             
    });

    google.maps.event.addListener(marker, "mouseover", function () {
        if (infowindowHover) infowindowHover.close();
        infowindowHover = new google.maps.InfoWindow({content: hoverText});
        infowindowHover.open(map, marker);
    });

    google.maps.event.addListener(marker, "mouseout", function () {
        if (infowindowHover) infowindowHover.close();                
    });  

    google.maps.event.addListener(marker, "click", function () {
        if (infowindowClick) infowindowClick.close();
        infowindowClick = new google.maps.InfoWindow({ content: markerMarkup });
        infowindowClick.open(map, marker);
    });

    //google.maps.event.addListener(marker, "mouseout", function () {
    //    if (infowindowClick) infowindowClick.close();                
    //});
    return marker;
} 
```

我想从此函数调用的第二个函数是：

```
function setstyles(idcust,streetadd,city,state,zip,address,phone,website,co){
    var msg= "This feature is  available only to logged-in ";    
    alert(idcust);                     
    <%if Session("ctype")="1" then %>
        alert(msg + " non wholesalers.");
    <%else %>           
        <%if Session("ctype")="0" then %>
            var storestyles = 'storestyles.asp?id=' + idcust;         
            document.getElementById('storeaddresses').style.display = 'block';             
        <%else %>
             alert(msg + "users."); 
        <% end if %>
    <%end if %>
} 
```

我想将参数从 传递`createMarker()`给`setstyles()`目前我无法做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:41:21.960

在这一行

```
var funCall = custid + "," + streetadd + "," + city + "," + state + "," + zip + "," + address + "," + phone + "," + website + "," + co; 
```

如果任何参数是字符串，则应该将它们包装成引号。

例如，如果 city 应该是一个字符串：

```
var funCall = custid + "," + streetadd + ",\"" + city + "\"," + state + "," + zip + "," + address + "," + phone + "," + website + "," + co; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:23:21.290

在这一行：

```
 var funCall = custid + "," + streetadd + "," + city + "," + state + "," + zip + "," + address + "," + phone + "," + website + "," + co; 
```

您只需构建一个`string`包含以逗号分隔的变量的巨大变量。因此，在这种情况下，您也只提交了一个参数（the `string`）。尝试将所有参数包装成一个参数对象，如下所示：

```
 var params = {
        custID: custid,
        streetAdd: streetadd,
        [...]
     } 
```

并将其提交给`onClick="setStyles(params)"`...的功能

的签名`setStyles`应如下所示： function setStyles(params){...}

在`setStyles`您可以使用 sth 访问每个参数。喜欢`params.custID`或任何你称之为`members`参数对象的东西......

还要考虑下面评论中给出的提示，例如使用`+=`被认为是良好的编码风格的问题......

# xamarin.ios - 从其他 ViewController 更改标签栏项目徽章

> ID：13723835
> 
> 赞同：1
> 
> 时间：2012-12-05T13:00:28.477
> 
> 标签：xamarin.ios, uitabbarcontroller, uitabbar, uitabbaritem

我的应用程序底部有两个标签栏项目。（我们将标签栏项目称为产品和购物车）在购物车上，它们是一个徽章项目。如何在产品的 ViewController 上执行操作时更改购物车上的徽章项目。

步骤：开始 -> 购物车标志 = 0 -> 转到产品选项卡 -> 将产品添加到购物车 -> 在将产品添加到购物车时将购物车标志更改为 1 -> 仍在产品选项卡上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:44:19.623

假设两个选项卡和购物车是第二个购物车视图控制器的索引是 1。在您的 productsview 控制器中，您应该能够：

```
tabBarController.viewControllers[1].tabBarItem.badgeValue = "1"; 
```

我不在工作，现在不能测试。希望明天测试一下。

# c - 分配对象的严格别名规则

> ID：13723839
> 
> 赞同：3
> 
> 时间：2012-12-05T13:00:38.257
> 
> 标签：c, types, c99

> C99 6.5/6 访问其存储值的对象的有效类型是对象的声明类型（如果有）。75)
> 
> 如果通过具有非字符类型类型的左值将值存储到没有声明类型的对象中，则左值的类型将成为该访问的对象的有效类型以及不修改该类型的后续访问储值。
> 
> 如果使用 memcpy 或 memmove 将值复制到没有声明类型的对象中，或者复制为字符类型的数组，则对于该访问和不修改该值的后续访问，修改对象的有效类型是从中复制值的对象的有效类型（如果有的话）。对于没有声明类型的对象的所有其他访问，对象的有效类型只是用于访问的左值的类型。
> 
> 75) 分配的对象没有声明的类型。

正如 C99 中所述，静态对象的有效类型是它们声明的类型。

分配的对象如何获得它们的有效类型？

例如：

```
int *p = malloc(100 * sizeof(int)); 
```

为什么他们一开始就没有声明的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:23:55.180

An allocated object hasn't got any declared type, so its effective type is the type of the lvalue used for the access. With this single statement, `p` hasn't effective type:

```
#include <stdlib.h>
int *p = malloc(100 * sizeof(int)); 
```

Otherwise, it will have one with the next access:

```
/* Effective type of p: unsigned int */
*(unsigned int *)p = 20U; 
```

# active-directory - LDAP 查询以获取给定用户授权的所有 OU

> ID：13723845
> 
> 赞同：0
> 
> 时间：2012-12-05T13:01:10.857
> 
> 标签：active-directory, ldap-query

我不确定这是否可行，但我想通过 LDAP 从 AD 中的给定 OU 获取以下子 OU：

> 获取给定用户 X 可以管理的所有 OU（设置密码、编辑用户或组等的权限）。

要获得OU，我可以过滤`(objectClass=organizationalUnit)`，但我如何过滤管理权限，有没有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:50:46.277

我不认为这是可能的。管理权限存储在 DACL 的[`nTSecurityDescriptor`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679006%28v=vs.85%29.aspx)属性中。为了执行访问检查，您必须评估 DACL 中的每个 ACE，因为拒绝胜过允许。您还必须知道用户所属的每个组，这需要对[`tokenGroups`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680275%28v=vs.85%29.aspx)属性（或登录令牌）进行自己的查询。我看不出如何使用[有限的可用运算符](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475%28v=vs.85%29.aspx)构建 LDAP 查询，从而将 ACL 的所有复杂性都考虑在内。

# caldav - 使用贝加尔湖的 CalDav 实施

> ID：13723846
> 
> 赞同：2
> 
> 时间：2012-12-05T13:01:18.960
> 
> 标签：caldav

我已经在我的本地服务器上安装了 Baïkal ( [http://baikal.codr.fr/](http://baikal.codr.fr/) ) 并在其中添加了用户。

当我试图访问 calDav 的 url

BASE_URL/sabre/cal.php/

然后在输入正确的用户名和密码后要求用户身份验证。

它给了我以下错误：

```
<d:error xmlns:d="DAV:" xmlns:s="http://sabredav.org/ns">
<s:exception>Sabre\DAV\Exception\NotImplemented</s:exception>
<s:message>GET is only implemented on File objects</s:message>
<s:sabredav-version>1.8.0</s:sabredav-version>
</d:error> 
```

我已经搜索了这个错误解决方案和 Baïkal 文档，但没有成功。

有人可以指导我如何从 android 手机和 iphone 访问 CalDav url 以获取他们的日历事件。

多谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:39:23.157

这是应该发生的。CALDAV 不使用 GET，它使用 PROPFIND、OPTIONS 和 REPORT。获取 iOS (iPhone) 的 CALDAV URL 的说明位于此处的 INSTALL.md 文件中：[https ://github.com/jeromeschneider/Baikal/blob/master/INSTALL.md](https://github.com/jeromeschneider/Baikal/blob/master/INSTALL.md)

该文件中适用于 iOS 的说明：

*   在“设置”>“邮件、通讯录、日历”>“添加帐户”>“其他”中
*   选择“CalDAV”
*   服务器：[http ://dav.mydomain.com/cal.php/principals/jerome](http://dav.mydomain.com/cal.php/principals/jerome)
*   用户名：您刚刚创建的用户名（在我们的示例中，杰罗姆）
*   密码：你刚刚定义的密码

# php - 使用 PHP+HTML 计算复选框

> ID：13723849
> 
> 赞同：0
> 
> 时间：2012-12-05T13:01:23.000
> 
> 标签：php, html

我正在为医院做一个系统，我目前正在处理的模块是病人账单的交易/计算。我在一个带有复选框的页面中列出了所有费用。提交时如何计算这些？

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "";
$mysql_database = "hmis";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Could not connect database");
mysql_select_db($mysql_database, $bd) or die("Could not select database");

        $query = "SELECT * FROM charges";

    $result = mysql_query($query);

    echo "<font face=verdana><br><center><h2>ER CHARGES</h2></center>";

    if(mysql_num_rows($result) > 0){
        echo '<br><br><center><table border="1" cellspacing="3">
        <tr>
            <th>Pro.#</th>
            <th>Procedure</th>
            <th>Price</th>
            <th></th>
        </tr>
        ';

        while($row = mysql_fetch_array($result)){
            echo '
            <tr>
                <td>'.$row[0].'</td>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>
                <td><input type="checkbox"></td>
            </tr>
            ';
        }
        echo '</table>';
    }else{
        echo '<p style="color: red">Not found!</p>';
    }

    // ULTRASOUND

        $query2 = "SELECT * FROM ultrasound";

    $result2 = mysql_query($query2);

    echo "<br><center><h2>ULTRASOUND CHARGES</h2></center>";

        if(mysql_num_rows($result2) > 0){
        echo '<br><br><center><font face=verdana><table border="1" cellspacing="3">
        <tr>
            <th>Pro.#</th>
            <th>Procedure</th>
            <th>Price</th>
            <th></th>
        </tr>
        ';

        while($row = mysql_fetch_array($result2)){
            echo '
            <tr>
                <td>'.$row[0].'</td>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>
                <td><input type="checkbox"></td>
            </tr>
            ';
        }
        echo '</table>';
    }else{
        echo '<p style="color: red">Not found!</p>';
    }

    // confinement

        $query3 = "SELECT * FROM confinement";

    $result3 = mysql_query($query3);

    echo "<br><center><h2>CONFINEMENT CHARGES</h2></center>";

        if(mysql_num_rows($result3) > 0){
        echo '<br><br><center><font face=verdana><table border="1" cellspacing="3">
        <tr>
            <th>Pro.#</th>
            <th>Procedure</th>
            <th>Price</th>
            <th></th>
        </tr>
        ';

        while($row = mysql_fetch_array($result3)){
            echo '
            <tr>
                <td>'.$row[0].'</td>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>
                <td><input type="checkbox"></td>
            </tr>
            ';
        }
        echo '</table>';
    }else{
        echo '<p style="color: red">Not found!</p>';

    }
    echo '<br><input type="submit" name="submit">';

?> 
```

我正在考虑让每个复选框都有值，但我觉得它行不通。

# plone - Plone，如何从 Z SQL 方法结果生成 json 并将其放入页面模板 javascript？

> ID：13723854
> 
> 赞同：0
> 
> 时间：2012-12-05T13:02:01.113
> 
> 标签：plone, zope

我想从 Z SQL 方法结果生成一个 json 并将其放入页面模板 javascript 部分中的 json 中。这是我需要的格式。

```
[
{
    name: 'New',
    data: [
      {y: 0, user_id: 0, issue_status_id: 1},{y: 0, user_id: 5, issue_status_id: 1},{y: 0, user_id: 11, issue_status_id: 1},{y: 0, user_id: 4, issue_status_id: 1},{y: 0, user_id: 6, issue_status_id: 1},{y: 1, user_id: 14, issue_status_id: 1},{y: 0, user_id: 17, issue_status_id: 1},
    ]
}, 
{
    name: 'In Progress',
    data: [
      {y: 0, user_id: 0, issue_status_id: 2},{y: 0, user_id: 5, issue_status_id: 2},{y: 0, user_id: 11, issue_status_id: 2},{y: 0, user_id: 4, issue_status_id: 2},{y: 0, user_id: 6, issue_status_id: 2},{y: 0, user_id: 14, issue_status_id: 2},{y: 1, user_id: 17, issue_status_id: 2},
    ]
}, 

] 
```

我按“名称”分组。示例数据

```
assigned_to_id  assigned_name id name totalssignedbystatus
4   K   1   New 0
11  G   1   New 0
18  V   1   New 0 
```

我找不到任何正常的例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:48:08.257

我猜这似乎是一个难题，因为您正试图通过 ZMI 使用 Python 脚本来完成它。这些对简单的事情很有用，但是一旦你开始尝试做更复杂的事情，你就会碰壁。

相反，学习如何创建 Python 附加组件并通过构建将其集成。使用 ZopeSkel 代码生成器，这真的非常简单。您会发现一个可用于浏览器视图的骨架，它是此类项目的基线。

一旦你在这个级别上工作，你将可以直接访问 MySQL-python（如果你想做一些更有趣的事情，你可以直接访问 SQL Alchemy）。而且，Python 标准的 json 模块将使 Python 数据结构的 json 化变得微不足道。最后，您将能够使用浏览器视图使其在页面模板中可用。

# java - android sax解析器不完整的char数组

> ID：13723855
> 
> 赞同：0
> 
> 时间：2012-12-05T13:02:06.480
> 
> 标签：java, android, saxparser

我发现了一些与此问题相关的帖子，但无法找到解决方案。问题是在 character() 函数上，ch[] 数组包含上次调用的不完整或最后一个元素，这种情况有时会发生，但 98% 的时间可以正常工作。文件名没有特殊字符，也没有奇怪的名称。

如果我们有，

```
<tag>image1test.jpg<tag> 
<tag>image2bla.jpg<tag> 
```

工作时，char 数组包含正确的值，但当不包含正确的值时，当从示例中为第二个标签调用字符函数时，我们得到，

`[i,m,a,g,e,2,b,e,s,t]`（上次通话的剩余字符）

如何解决？谢谢。

```
@Override
public void characters(char ch[], int start, int length) {
if(this.v_new){
myNewsXMLDataSet.setNews(new String(ch, start, length));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:41:06.620

解析器不需要只调用`characters(char[],int,int)`一次您的处理程序。您必须期待多次调用，并且仅在`endElement()`调用该方法后才处理该值。

```
public class Handler extends DefaultHandler {

    private StringBuilder sb = new StringBuilder();
    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        sb.append(ch, start, length);

    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        doStuffWith(sb.toString());
        sb = new StringBuilder();
    }
} 
```

# mysql - MySQL 查询 - 为什么在这种情况下不使用索引？

> ID：13723861
> 
> 赞同：0
> 
> 时间：2012-12-05T13:02:20.160
> 
> 标签：mysql, performance, indexing

MySQL 查询（版本 5.1.61）

```
SELECT alerts.*,
       devices.user_id
  FROM alerts
       left JOIN devices
          ON alerts.device_id = devices.id
 WHERE    devices.name = 'myval' 
```

“alerts.device_id”上有一个索引，解释中的 MySQL 不使用该索引，它显示类型“ALL”并且行是表中行的完整计数。

我不明白为什么它不使用这个索引。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:06:32.420

索引没有被选中，因为您没有在 select 和 where 子句中使用它。

您需要添加一个索引`device.name`

您可以做一件事来强制引擎在它是主键时考虑索引，如果它的值大于 0，则它的值，例如：

```
SELECT alerts.*,
       devices.user_id
  FROM alerts
       left JOIN devices
          ON alerts.device_id = devices.id
 WHERE    devices.name = 'myval' and alerts.deviceid>0 
```

# perl - 设置 MooseX::Method::Signatures 默认为实例变量

> ID：13723865
> 
> 赞同：1
> 
> 时间：2012-12-05T13:02:54.623
> 
> 标签：perl, moose

我有一组方法，我希望调用者能够覆盖一个值，或者它默认为实例变量。

所以我一直在努力做的是：

```
method foo( Str :$blah = $self->blah ) {
    #doStuff
} 
```

这会引发解析错误，所以我最终到处都这样做

```
method foo( Str :$blah? ) {
    $blah = $self->blah unless defined $blah;
    #doStuff
} 
```

不可怕，但当 MooseX::Method::Signatures 支持默认概念并修复了我所有其他标准的“方法开始”行时，这似乎很愚蠢。

当我尝试做这样的事情并且我在网络上找不到遇到同样问题的其他人时，我总是以错误的方式解决问题。似乎我可能试图将功能程序塞入 oo 布局，而不是实际的 oo，因为这些方法是用于外部调用的更多辅助函数，而不是在对象上操作的方法。因此，只需检查我是否只是错误地定义它，或者我正在做的事情是否“愚蠢”或 Parse::Method::Signatures 不支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:19:11.410

AFAIK Signatures 模块将自身连接到 Perl 解析器并注入一些代码来处理原型。值得注意的是，这很有效。

也就是说，使用非常量值作为默认值可能会出现问题。在某些情况下，调用一些代码来预填充一个值可能会造成严重破坏。具体来说，应该只在没有给定参数值的情况下调用预填充值的代码，还是应该始终调用它？我们应该如何处理副作用？应该`caller`是什么？如果我有一个全局`$self`对象，那不应该接收方法调用，因为范围规则明确规定了这一点吗？（因为`our $x=5; my $x=$x;`是有效的，但`my $x=$x`不是）。更好的是，如果默认值填充方法调用调用相同的方法，但又没有可选参数的值，会发生什么情况？

您总是可以回退到老式的可选参数：

```
sub foo {
  my ($self, $blah) = @_;
  # something like my ($self, $blah) = (@_, $self->blah); wouldn't work, of course.
  $blah //= $self->blah; # nicer than old `unless defined`
  ...;
} 
```

或者，在这种情况下：

```
method foo (:$blah?) {
   $blah //= $self->blah
} 
```

我发现定义或运算符的这种使用非常有趣。

# c++ - SendInput 使系统进入睡眠状态

> ID：13723868
> 
> 赞同：11
> 
> 时间：2012-12-05T13:03:22.863
> 
> 标签：c++

我试图弄清楚 SendInput 函数的正确使用，以便我可以直接操纵屏幕上的光标，所以为了进行基本测试以了解事情是如何工作的，我制作了这个简短的片段，应该将光标移动 10 像素到对。理论上。

```
#include <windows.h>
#include <winable.h>

int main()
{
    INPUT joyInput;
    joyInput.type = INPUT_MOUSE;
    joyInput.mi.dx = 10;
    joyInput.mi.dwFlags = MOUSEEVENTF_MOVE;
    SendInput(1, &joyInput, sizeof(INPUT));
    return 0;
} 
```

然而，在实践中，SendInput 函数要么让我的计算机进入睡眠状态，要么至少关闭我的显示器，这肯定是一种不良影响！注释掉该行可以防止问题发生，但显然我需要它来执行任务。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T13:19:14.313

[MOUSEINPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646273%28v=vs.85%29.aspx)结构具有三个您未初始化的成员- `dy`、`mouseData`和`time`. 由于文档没有提到默认值，我假设该程序可以自由地最初用它想要的任何垃圾填充这些成员。您应该明确设置值以避免这种情况。

```
#include <windows.h>
#include <winable.h>

int main()
{
    INPUT joyInput;
    joyInput.type = INPUT_MOUSE;
    joyInput.mi.dx = 10;
    joyInput.mi.dwFlags = MOUSEEVENTF_MOVE;

    joyInput.mi.dy = 0;
    joyInput.mi.mouseData = 0;
    joyInput.mi.time = 0;

    SendInput(1, &joyInput, sizeof(INPUT));
    return 0;
} 
```

# java - 如何在使用 postDelayed() 循环的 Android 中停止 Runnable？

> ID：13723874
> 
> 赞同：3
> 
> 时间：2012-12-05T13:03:44.963
> 
> 标签：java, android, multithreading, postdelayed

`Runnable`在我的 Android 应用程序中单击图像时，我需要停止运行。我正在`Runnable`重复使用`ImageView.postDelayed()`：

```
r = new Runnable() {
    public void run() {
        imgview.setImageResource(imageArray[i]);
        i++;
        if (i >= imageArray.length) {
            i = 0;
        }
        imgview.postDelayed(r, 20); // set to go off again in 3 seconds.
        // imgview.setOnClickListener(this);
    }

};
imgview.postDelayed(r, 20); // set first time for 3 seconds 
```

但在某些情况下，我想在它已经启动后停止它的运行。这是我的活动的完整代码：

```
 public class MainActivity extends Activity  {

        int i = 0;

        ImageView imgview, imgview2;
        Handler handler = new Handler();
        Runnable r;
        MediaPlayer mMediaPlayer;
        int[] imageArray = { R.drawable.f1, R.drawable.f2, R.drawable.f3,
                R.drawable.f4, R.drawable.f5, R.drawable.f6, R.drawable.f7,
                R.drawable.f8, R.drawable.f9, R.drawable.f10, R.drawable.f11,
                R.drawable.f12, R.drawable.f13, R.drawable.f14, R.drawable.f15,
                R.drawable.f16, R.drawable.f17, R.drawable.f18, R.drawable.f19,
                R.drawable.f20, R.drawable.f21, R.drawable.f22, R.drawable.f23,
                R.drawable.f24, R.drawable.f25, R.drawable.f26, R.drawable.f27,
                R.drawable.f28 };

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.tapp_activity);

            imgview = (ImageView) findViewById(R.id.imageView1);

            mMediaPlayer = new MediaPlayer();
            mMediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.water);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

            imgview2 = (ImageView) findViewById(R.id.imageView2);

            imgview2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    if(i==0)
                    {
                    mMediaPlayer.setLooping(true);
                    mMediaPlayer.start();
                    i=1;
                    r = new Runnable() {
                        public void run() {
                            imgview.setImageResource(imageArray[i]);
                            i++;
                            if (i >= imageArray.length) {
                                i = 0;
                            }
                            imgview.postDelayed(r, 20); // set to go off again in 3 seconds.
                            // imgview.setOnClickListener(this);
                        }

                    };
                    imgview.postDelayed(r, 20); // set first time for 3 seconds
                    }
                    else
                    {
                    i=0;

                    mMediaPlayer.stop();
                    imgview.setBackgroundResource(R.drawable.tapstill);
                    }

                }
            });

        }

        @Override
        protected void onDestroy() {
            // TODO Auto-generated method stub
            super.onDestroy();
            mMediaPlayer.stop();

        }

    } 
```

我可以在我的代码中进行哪些更改，以便在我的方法条件下`Runnable`停止运行？`else``onClick()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:42:23.273

您可以尝试删除回调。

```
imgview.removeCallbacks(r); 
```

不过，为了让它工作。您必须确保与您发布`r`的内容相同。`Runnable`您可以通过创建一次来做到这一点，可能在`onCreate`. 由于无论如何`Runnable`都没有任何依赖关系`ClickListener`，因此这应该不是问题。

您可能还需要进行一些同步，以防止您删除当前正在运行的回调的情况，不过，现在我考虑了一下。这个`volatile boolean running`想法总体上可能不那么复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:09:11.690

您可以`run()`使用布尔标志控制您的方法：

```
boolean running = true;
 ...

r = new Runnable()
{
         public void run() 
         {
             if(running)
             {
                 imgview.setImageResource(imageArray[i]);
                 i++;
                 if (i >= imageArray.length) {
                     i = 0;
                 }
                 imgview.postDelayed(r, 20); 
             }
         };
} 
```

如果您`running = false`稍后设置，您的线程将处于空闲状态，这就是您想要的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-05T13:05:36.547

你可以这样做

```
 Thread.stop(); 
```

# c# - 连接的 TCP 套接字如何同时发送/接收多个文件？

> ID：13723875
> 
> 赞同：1
> 
> 时间：2012-12-05T13:03:50.020
> 
> 标签：c#, vb.net, visual-studio-2010, sockets, network-programming

基本上我有一个监听器（当它接收到新连接时）创建一个新的 socketWorker 并将连接分配给客户端。现在，如果客户端发送一个大文件（例如，需要 30 秒才能完全接收）然后发送一个几个字节的小文件，则在完全接收到大文件之前不会收到小文件。这显然是一种不好的方法，我想知道我该怎么做才能同时发送文件？

截至目前，我正在使用异步方法，每次完全接收到文件时，都会再次调用 BeginReceive() 以接收下一个文件（不好的方式）。

有任何解决这个问题的方法吗？我会很感激的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:08:01.147

您必须实现多路复用，例如[SPDY](http://en.wikipedia.org/wiki/SPDY)所做的那样。这（基本上）是通过构建消息部分并在每个帧上提供流 ID 来完成的。这样，可以通过单个连接交换多个流。

或者，您可以为每个文件打开一个连接。

# .htaccess - 将 .htaccess 中出现的所有单词替换为另一个单词

> ID：13723883
> 
> 赞同：0
> 
> 时间：2012-12-05T13:04:28.740
> 
> 标签：.htaccess, mod-rewrite, apache

我需要更改链接到我网站的所有 URL 中的一个词。我尝试了以下规则，但只有当单词是 URL 中的第一个单词时它才能正常工作

```
RewriteCond %{HTTP_HOST} ^www.example.com$
RewriteCond %{REQUEST_URI} ^/foo(?:/)?(.*)$
RewriteRule ^[/]?foo[/]?(.*) /bar/$1 [R=permanent,L,NE] 
```

当我向 REQ_URI 添加通配符条目时，输出不正确，我不确定如何处理替换。www.example.com/abc/def/foo/ghi 被重写为 www.example.com/bar/abc/def

```
RewriteCond %{HTTP_HOST} ^www.example.com$
RewriteCond %{REQUEST_URI} ^(.*)/foo(?:/)?(.*)$
RewriteRule ^(.*)[/]?foo[/]?(.*) /bar/$1 [R=permanent,L,NE] 
```

如何更正重写规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:11:54.820

```
RewriteRule ^(.*)/foo/(.*)$ $1/bar/$2 [R=301,L]
RewriteRule ^foo/(.*)$ bar/$1 [R=301,L] 
```

This assumes foo is a folder name. Generally when setting something like this up you want to have some sort of delimiter (in this case the slashes) so that, for example, "food" doesn't become "bard".

# java - Javaobject“连接”不适用于禁用的 Cookie

> ID：13723884
> 
> 赞同：0
> 
> 时间：2012-12-05T13:04:29.817
> 
> 标签：java, javascript, servlets, cookies

我遇到了禁用 Cookie 的问题。我有一个用户使用他的用户帐户登录的页面。如果登录成功，连接本身会保存在会话中。

```
request.getSession().setAttribute("connection"  , connection); 
```

Object DBConnection，在Session中命名为connection，是一个Object，里面有一个静态的Connection con Object

```
protected static Connection con = null; 
```

当用户登录时，建立连接

```
con = DriverManager.getConnection(url, this.user, this.password); 
```

这也适用于去中心化的 cookie。如果正在检查我要保存的连接和 con 对象`System.out.println.`

```
System.out.println(("DBConnection == null: " + connection == null));
System.out.println("Connection" connection.getCon());
//result ->
//DBConnection == null: false
//oracle.jdbc.driver.T4CConnection@15d51e5 
```

所以登录成功。现在用户离开这一侧并由于一个按钮而转到其他一些信息页面。在这里，我再次需要这个连接，我在一个 Servlet 中得到它。

```
DBConnection connection = (DBConnection)request.getSession().getAttribute("connection"); 
```

使用与以前相同的 System.out.println，当启用 cookie 时，它​​会给出与以前相同的结果。当 cookie 被禁用时，它会抛出一个带有以下结果的异常：

```
DBConnection == null: false
java.lang.NullPointerException 
```

所以现在我的问题。当我禁用 cookie 时，为什么我的连接会中断？在我看来，cookie 没有任何东西可以处理连接对象，或者保存在 JSP 中的任何其他对象？抛出 Nullpointer 的连接 Object 是 Package 中的 Object`java.sql.Connection;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:09:38.893

这个问题与应用程序或 Web 服务器如何在客户端存储会话 ID 有关：他们为此使用 cookie。

关于如何为禁用的 cookie 客户端启用会话绑定，您可以在同一个站点上查看这个相关问题：[如果有人在我的浏览器中禁用 cookie，我如何在 java 中进行会话？](https://stackoverflow.com/q/2065735/212952)

# visual-studio-2012 - 如果在 VS 2012 中评论，一个键盘快捷键 ( Ctrl + / ) 用于评论或取消评论

> ID：13723887
> 
> 赞同：3
> 
> 时间：2012-12-05T13:04:41.470
> 
> 标签：visual-studio-2012

如果在 Visual Studio 2012 中进行了评论，有没有办法使用一个键盘快捷键（例如 Ctrl + /）来评论或取消评论，就像在 SublimeText 或 PhpStorm 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T13:00:28.233

您可以使用`Ctrl`+ `K`, `Ctrl`+`C`来*评论*选定的代码行，使用`Ctrl`+ `K`, `Ctrl`+`U`来*取消注释*代码行。但请记住，这会将注释符号 ( `//`) 添加到所有代码行。`/* .. */`据我所知， VS 2012中没有针对块注释 ( ) 的特定快捷方式。

# java - JPA 冗余数据库

> ID：13723888
> 
> 赞同：0
> 
> 时间：2012-12-05T13:04:44.190
> 
> 标签：java, database, jpa, backup

我正在使用 Java 开发一个网上商店。我正在使用 JPA 处理我的数据并将其存储在数据库中。现在我担心丢失任何数据的情况。防止这种情况的最佳做法是什么？

我应该使用 EntityManagers 将更改写入本地和远程数据库吗？我正在使用 VPS，这是否会导致安全漏洞，因为我需要通过 Internet 传输数据？

我不认为备份到 SQL 文件或一些类似的选项就足够了，因为我可能会以这种方式丢失最近下的订单。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:13:20.327

如果要防止由于硬件或数据库故障导致数据丢失，最明显的解决方案是使用内置复制或热备能力的数据库产品。

已传输到您无法控制的远程位置的数据将是一个安全问题，但传输本身不应该是一个问题。保护用于传输数据的网络连接很简单。任何体面的数据库系统都将支持 SSL / TLS 连接。

简单备份系统的问题在于，自上次完成备份以来所做的任何更新都可能丢失。

# c# - 仅在特定 html 文件上从 uiwebview 删除表单助手（Phonegap）

> ID：13723890
> 
> 赞同：3
> 
> 时间：2012-12-05T13:04:48.513
> 
> 标签：c#, iphone, xcode, cordova, uiwebview

正如我们大多数phonegap 用户现在已经知道的那样，有一种方法可以从uiwebview**中删除表单助手（上一个、下一个、完成）栏。**在stackoverflow上已经被问过好几次了，这里有一些例子：

[如何将此脚本安装到 iOS 的 PhoneGap 中](https://stackoverflow.com/questions/8718411/how-do-i-install-this-script-into-phonegap-for-ios)

[Phonegap：完全去除 iPhone 键盘上的黑条](https://stackoverflow.com/questions/10746998/phonegap-completely-removing-the-black-bar-from-the-iphone-keyboard/10796550#10796550)

[从 iPhone 独立 Web 应用程序的键盘中删除表单助手](https://stackoverflow.com/questions/7904892/remove-form-assistant-from-keyboard-in-iphone-standalone-web-app)

这适用于一个人的 phonegap 应用程序的所有文件中的所有文本字段。然而，尚未讨论的是，**这种有点hacky 的解决方案是否只能应用于一个或多个文本字段，或者应用于**一个phonegap 应用程序内的特定html 页面。

由于**phonegap 用户无法使用“本机”C 代码来定位 html 文本字段**，我假设第一个根本无法完成（不过我很想在这里被证明是错误的。）但也许可以**删除表单助手**通过使用上述解决方案并针对特定的 html 文件来**阻止特定的 html 文档。**如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:02:10.983

我终于找到了一个完美的解决方案。唯一的问题是，当键盘展开时，画布会因为条被移除而稍微跳动。这是如何完成的：

## 从 GitHub下载[这个插件](https://github.com/don/KeyboardToolbarRemover)

## HTML

在 cordova.js 之后和应用程序的 javascript 文件之前包含 Javascript

```
<script type="text/javascript" src="keyboard_toolbar_remover.js"></script> 
```

在您的 Javascript 中，包含模块

```
var toolbar = cordova.require('cordova/plugin/keyboard_toolbar_remover'); 
```

禁用工具栏

```
toolbar.hide() 
```

重新启用工具栏

```
toolbar.show() 
```

## 安装

复制`KeyboardToolbarRemover.h`到`KeyboardToolbarRemover.m`你的 iOS 项目的 Plugins 目录。

复制`keyboard_toolbar_remover.js`到`www`你的项目目录。

编辑`Cordova.plist`. **在将KeyboardToolbarRemover**映射到**KeyboardToolbarRemover**的插件部分下添加一个条目，如下所示：

![添加插件入口](../Images/28aa643c8e56aa0230d36a2a0e453e2d.png)

# lucene - Lucene 4.0 空间计算最大值。动态距离（使用索引文档的字段）

> ID：13723891
> 
> 赞同：0
> 
> 时间：2012-12-05T13:04:51.283
> 
> 标签：lucene, geospatial

可以在动态计算最大距离的地方进行查询`dist`，具体取决于与正在搜索的文档相关的字段是什么。

我的意思是：

```
ctx.makeCircle(la, lo, DistanceUtils.dist2Degrees(Min(100km, currentDocumnet.getField("max_distance")),DistanceUtils.EARTH_MEAN_RADIUS_KM)) 
```

代替：

```
 new SpatialArgs(SpatialOperation.Intersects,ctx.makeCircle(la, lo,   DistanceUtils.dist2Degrees(dist,DistanceUtils.EARTH_MEAN_RADIUS_KM))); 
```

为了得到我想要的结果，我正在对我的 ScoreDoc 进行一些手动过滤：

```
 String maxDistance = d.get(Offer.MAX_DISTANCE);
                if (maxDistance != null && maxDistance.length() > 0) {
                    logger.info("Contractor max. distance =" + maxDistance);
                    int maxContractorDistance = Integer
                            .parseInt(maxDistance);

                    if (distKM > maxContractorDistance
                            && maxContractorDistance > 0) {
                        logger.info("Contractor is too far"
                                + maxContractorDistance);
                        continue;
                    }

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:13:40.390

啊；有趣的。您应该同时使用两个空间过滤器来实现这一点。其中一个是基于索引距离要求的过滤器，另一个是基于查询索引要求的过滤器。

第一个空间字段应该是 RecursivePrefixTreeStrategy ，您应该在其中索引圆形。对此字段进行查询/过滤时，您的查询形状是一个点。第二个空间字段也应该使用 RecursivePrefixTreeStrategy 但是这个你应该单独索引这些圆圈的中心点。您的查询形状是第二个字段的圆形。两个查询/过滤器单独匹配的次数比您想要的要多，但是如果您将它们组合在一起以使匹配的文档必须同时满足两者，您将获得正确的文档集。

# c - MISRA 等同于医疗行业？

> ID：13723892
> 
> 赞同：6
> 
> 时间：2012-12-05T13:04:56.430
> 
> 标签：c, medical, misra

就像标题一样，是否有与汽车行业的 MISRA 相同的医疗行业文件、标准或任何一套？

我在 C 领域工作，但任何与语言无关的东西也会很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:06:39.293

除了较早的答案，我很想知道您为什么认为 MISRA 不适合？

是的，我完全接受 MISRA-C:1998 的标题和目标是基于车辆的软件，但 2004 年的第二版已经更改为在**关键系统***中使用 C 语言的指南，* 因此 MISRA 适用于所有行业- 并且（例如）是联合攻击战斗机编码标准的参考文件。

 **MISRA-C 已被核工业和医疗工业肯定采用。

并且（暂时戴上我的 MISRA 工作组成员的帽子，虽然我只是以个人身份发帖）如果有任何与 MISRA-C 应用于医疗设备相关的具体问题，那么我很乐意在这里讨论和/ 或与团队一起加注。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:23:47.120

您应该使用“MISRA-C:2004 在关键系统中使用 C 语言的指南”。MISRA-C 中没有任何内容不适用于医疗技术项目。

它*不是*专门针对汽车行业的，它只是由他们发明的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T13:53:25.573

不是我知道的。医疗器械行业围绕编码标准的组织要少得多，每家公司都有自己的流程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T13:55:13.660

为什么不直接采用 MISRA 的一个子集？**

# ruby-on-rails - # 未定义的方法“页面”

> ID：13723897
> 
> 赞同：3
> 
> 时间：2012-12-05T13:05:09.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari, pagination

我尝试使用管理面板 RailsAdmin 在 Rails 3 上安装 Kaminari 分页，但出现此错误：

```
NoMethodError in ShowsController#
undefined method `page' for # < ActiveRecord::Relation:0xaadc8d4> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:10:50.470

您是否还使用了宝石“will_paginate”？

检查文件 Gemfile.lock 以查看您是否也在使用此 gem：

```
grep will_paginate Gemfile.lock 
```

如果是这种情况，您所要做的就是创建文件“config/initializers/kaminari.rb”并将以下内容写入文件：

```
Kaminari.configure do |config|
  config.page_method_name = :per_page_kaminari
end 
```

那应该可以解决问题

# ios - 用 UITextView 替换 UITableViewCell 文本

> ID：13723900
> 
> 赞同：1
> 
> 时间：2012-12-05T13:05:16.290
> 
> 标签：ios, ipad, uitableview, uitextview

在我的应用程序中，我将 UITextView 设置为 UITableViewCell 的 contentView，以便您可以写入其中。我是这样设置的：

```
 UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(cell.bounds.origin.x, cell.bounds.origin.y, cell.contentView.frame.size.width, cell.contentView.frame.size.height)];
        [textView setFont:[UIFont fontWithName:@"Arial" size:18.0f]];
        [textView setBackgroundColor:[UIColor blueColor]];
        [textView setAutocorrectionType:UITextAutocorrectionTypeNo];

        textView.text = cell.textLabel.text;
        textView.delegate = self;
        cell.textLabel.text = @"";
        self.textView = textView;
        [cell.contentView addSubview:textView];
        [textView becomeFirstResponder]; 
```

我想将`textView.text`右边设置在`cell.textlabel.text`原来的位置，但它比以前的单元格文本更靠左和靠上一点。如何将单元格的文本对齐和/或文本偏移设置为 UITextView，以便文本位于同一位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:26:14.330

```
yourUITextView.contentInset = UIEdgeInsetsMake(-4,-8,0,0); // Mess around with these values 
```

或者...

设置 textView 的框架

```
 UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(5, 0, cell.contentView.frame.size.width - 10, cell.contentView.frame.size.height)]; 
```

# c# - 如何为在父页面上调用 AJAX 脚本的事件验证注册用户控件？

> ID：13723901
> 
> 赞同：1
> 
> 时间：2012-12-05T13:05:18.693
> 
> 标签：c#, asp.net

我有一个具有 JavaScript 函数的 aspx 页面，该函数由页面内用户控件中的自定义验证器调用。该页面可以包含此控件的多个实例，这些实例在中继器中生成。只有一个控件包含自定义验证器。

JavaScript 函数通过 jQuery.ajax 调用 HTTP 处理程序，然后相应地更新 args.IsValid。

当自定义验证器触发处理程序并返回相关响应时，页面会因以下错误而爆炸：

无效的回发或回调参数。使用配置或页面启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

我在用户控件中尝试了以下操作

```
protected override void Render( HtmlTextWriter writer )
    {
        if (!this.IsLocked)
        {
            Page.ClientScript.RegisterForEventValidation( this.UniqueID );
        }

        base.Render( writer );
    } 
```

但这没有什么区别。我知道我可以在页面中禁用事件验证（这解决了问题），但我真的不想这样做。谁能解释这里的问题是什么以及我该如何解决？

干杯斯图尔特

# jquery - 带有颜色框的 MVC DotNetOpenAuth

> ID：13723904
> 
> 赞同：1
> 
> 时间：2012-12-05T13:05:39.253
> 
> 标签：jquery, asp.net-mvc, colorbox, dotnetopenauth

当用户使用 DotNetOpenAuth 使用 facebook 或 twitter 登录时，我正在尝试打开一个模式窗口（jQuery colorbox）。我用 jQuery 写了一篇文章，但我不知道为什么我没有回复。

这是 HTML

```
<form returnurl="" action="/account/externalLogin" id="ExternalLogin" method="post" novalidate="novalidate">
     <fieldset id="socialLoginList">
          <legend>Log in using another service</legend>
               <p>
                    <button type="submit" name="provider" class="lightbox" value="twitter" title="Log in using your Twitter account">Twitter</button>
                    <button type="submit" name="provider" class="lightbox" value="facebook" title="Log in using your Facebook account">Facebook</button>
               </p>
     </fieldset>
</form> 
```

这是我的javascript

```
$("#ExternalLogin").submit(function () {
     $.post($(this).attr("action"), $(this).serialize(), function (data) {
          alert(data);
     }, 'html');

     return false;
}); 
```

我从来没有收到来自 $.post 的回复。我在做什么坏事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:17:30.023

请参阅[使用 $.ajax 发布 JSON 数据时如何提供 AntiForgeryToken？](https://stackoverflow.com/questions/2906754/how-can-i-supply-an-antiforgerytoken-when-posting-json-data-using-ajax?rq=1)

如果您使用的是 MVC 4 项目中的标准帐户控制器，您将点击具有属性 [ValidateAntiForgeryToken] 的 ExternalLogin - 您可以通过阅读错误消息来确认这一点。

您需要发回此令牌，否则服务器会给您一个 500 内部错误。

# android - 在我的应用程序中获取图库

> ID：13723907
> 
> 赞同：-3
> 
> 时间：2012-12-05T13:05:48.443
> 
> 标签：android, android-layout, android-gallery

我想通过在缩略图模式下显示所有照片来将 android 图库视图放入我的应用程序中。我怎样才能做到这一点？

例子：

![在此处输入图像描述](../Images/5cbe02a02e809095d6289b098faa307e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:19:50.427

检查类似的问题。

[链接 1](https://stackoverflow.com/questions/9616419/how-can-i-get-android-inbuilt-image-gallery-in-to-my-application)

[链接 2](https://stackoverflow.com/questions/10876996/showing-images-of-gallery-in-my-application)

还有这个

```
public class BrowsePicture extends Activity {

private static final int SELECT_PICTURE = 1;

private String selectedImagePath;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button) findViewById(R.id.Button01))
            .setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {

                    // in onCreate or any event where your want the user to
                    // select a file
                    Intent intent = new Intent();
                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);
                    startActivityForResult(Intent.createChooser(intent,
                            "Select Picture"), SELECT_PICTURE);
                }
            });
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
        }
    }
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}
} 
```

从[源头](https://stackoverflow.com/a/2636538/1412308)

希望这可能会有所帮助

# c# - 数据库中的持久性

> ID：13723910
> 
> 赞同：0
> 
> 时间：2012-12-05T13:05:53.450
> 
> 标签：c#, persistence

我有两个列表和一个列表框，这些列表都是它们自己的类，列表框位于 Form1 上。每个列表都由一个 GUI 添加到各自的名称中，FrmPickups 用于拾取列表，FrmVisits 用于列表。

我的问题是，当我将数据添加到列表时，如何将其存储到数据库中以便在项目启动时重新加载，以及如何在启动时将其加载到列表框中。

部分代码如下：

数据添加到列表中，如下所示：

```
 theVisit.name = txtName.Text;
        theVisit.address = txtAddress.Text;
        theVisit.arrival = DateTime.Parse(txtArrival.Text);
        theVisit.Lat = Double.Parse(txtLat.Text);
        theVisit.Lon1 = Double.Parse(txtLong.Text);
        theVisit.type = "Visit"; 
```

ListBox 内容添加在下面

```
 /*
         * Update the list on this form the reflect the visits in the list
         */
        lstVisits.Items.Clear();
        //Clear all the existing visits from the list

        List<String> listOfVis = theList.listVisits();
        //Get a list of strings to display in the list box

        List<String> listOfpic = thePickup.listPickups();
        //Get a list of strings to display in the list box

        lstVisits.Items.AddRange(listOfVis.ToArray());
        //Add the strings to the listBox. Note to add a list of strings in one go we have to 
        //use AddRange and we have to use the ToArray() method of the list that we are adding

        lstVisits.Items.AddRange(listOfpic.ToArray());
        //Add the strings to the listBox. Note to add a list of strings in one go we have to 
        //use AddRange and we have to use the ToArray() method of the list that we are adding 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:11:40.300

As with most programming problems, there are a million ways to do this. If you have control over the database design, you might consider having a blob or image column in which to store your list. You can take advantage of serialization in C# and stuff the raw bytes into that column. This would make querying for details of the list impossible from a sql query point of view. In regards to loading at startup, you'd grab the raw bytes from the column, deserialize them and attache them to the control of your form.

# java - Hibernate：@Embedded 注解技术和@OneToOne 注解技术的区别

> ID：13723914
> 
> 赞同：17
> 
> 时间：2012-12-05T13:05:55.510
> 
> 标签：java, hibernate, jpa, annotations

@Embedded 注释技术和@OneToOne 注释技术有什么区别，因为在 Embedded 中，java 类在类中包含“具有”关系，并且借助 @Embedded 注释，我们将对象保存在数据库中。在 OneToOne 关系中，我们还坚持在数据库中有一个对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T13:11:18.470

@OneToOne 用于映射两个与一对一关系相关的数据库表。例如，客户可能总是在名称表中有一条记录。

或者，如果这些名称字段在 Customer 表中（而不是在单独的表中），那么您可能需要一个 @embedded。从表面上看，您可以将名称字段作为标准属性添加到 Customer 实体，但如果这些相同的列出现在多个表上（例如，您可能在供应商表上有名称列），它会很有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T13:10:47.357

它是组合和聚合之间的区别。@Embedded 对象始终在其父对象的生命周期内进行管理。如果父对象被更新或删除，它们也会被更新或删除。@OneToOne 对象*可以*通过 @Join 注释的 cascadeType 选项模拟组合，但默认情况下它们是聚合的，也就是它们的生命周期与其父对象的生命周期是分开的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-12T12:33:08.607

@Embedded 与值对象（仅在附加到对象时才有意义的对象）一起使用，而一对一映射是在两个具有自己存在和含义的对象之间。

例如

值对象和@Embedded：如果我们有一个用户类并且这个类中有一个地址对象，它可以被认为是一个值对象，因为除非与用户相关联，否则地址本身没有任何意义。这里的地址对象可以用@Embedded注解。

一对一映射和@OneToOne：如果我们有一个用户类并且这个类有一个“父亲”对象或一个“母亲”对象，我们希望将“父亲”或“母亲”实例注释为@OneToOne 为“父亲” ' 或 'Mother' 有自己的意义和存在，并且不是 User 类的 Value 对象。

@OneToMany 和@ElementCollection 之间有一个密切相关的区别。两者都用于在 Java 类中保存 Collection 类型的实例变量。不同之处在于，@ElementCollection 用于保存 Collection 的元素是值对象时，而@OneToMany 用于当元素和对象具有明确定义的含义和存在时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-29T05:18:28.137

仅当可以重用字段时才使用@OneToOne。否则，请使用@Embeddable。

引自《Beginning Hibernte》，第 3 版：

> 在两个实体之间映射一对一关联并没有本质上的错误，其中一个实体不是另一个实体的组成部分（即嵌入到另一个实体中）。然而，这种关系通常有些可疑。在使用 @OneToOne 注释之前，您应该考虑使用前面描述的嵌入式技术。

**@Embeddable：** 如果实体 (X) 中的字段与另一个实体 (Y) 包含在同一个表中，则实体 X 在休眠术语中称为“组件”或在 JPA 术语中称为“嵌入”。在任何情况下，JPA 或休眠都不允许使用第二张表来存储此类嵌入式实体。

通常，当数据被多个表重用时，我们会考虑对表进行规范化。示例：客户（id, name, street, city, pin, landmark）可以归一化为 Customer(id, name) 和 CustomerAddress(cust_id, street, city, pin, landmark)。在这种情况下，我们可以通过使用 cust_id 将相同的 CustomerAddress 链接到其他表来重用 CustomerAddress。但是，如果**您的应用程序不需要这种重用，那么我们可以将所有列保留在一个表中**。

所以，一个拇指规则是，

*   如果重用 -> @OneToOne，
*   如果没有重用 -> @Embeddable

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-06T10:42:21.417

@Embedded 通常将复合主键表示为可嵌入类：

```
@Entity
public class Project {
    @EmbeddedId ProjectId id;
     :
}

@Embeddable
Class ProjectId {
    int departmentId;
    long projectId;
} 
```

主键字段在可嵌入类中定义。该实体包含一个使用 @EmbeddedId 注释的主键字段，并包含该可嵌入类的实例。使用此表单时，未定义单独的 ID 类，因为可嵌入类本身可以表示完整的主键值。

@OneToOne 用于映射两个与一对一关系相关的数据库表。@Id 将是主键。

# mysql - MySQL - 如何检查要插入到表中的一对值是否已存在于另一行中？

> ID：13723916
> 
> 赞同：1
> 
> 时间：2012-12-05T13:05:56.027
> 
> 标签：mysql, database, constraints, unique, unique-constraint

我正在尝试使用 MySQL 在将记录插入表时执行检查，以查看一对值是否已在另一条记录中使用。

场景是这样的：

我有一个名为 WORKLOG 的表，其中包含以下列：

```
LOGNO                   INTEGER UNSIGNED NOT NULL PRIMARY KEY,
HOURNO                  MEDIUMINT UNSIGNED NOT NULL,
EMPID                   INTEGER UNSIGNED NOT NULL,
JOBID                   INTEGER UNSIGNED NOT NULL,
DESCRIPTION             TEXT, 
```

问题是多条记录不能有相同的 HOURNO 和 JOBID 对，因为这意味着同一时间的工作在同一工作上完成了两次。每项工作都有自己的小时数，因此小时数不可能是唯一的。我基本上是在尝试实现一个唯一的对，有点像复合主键。

所以如果我在表中有以下行

```
(0001,1,0034,2938,"some text")
(0002,2,0034,2938,"some text")
(0003,1,0045,2939,"some text")
(0004,3,0034,2938,"some text")
(0005,2,0056,2939,"some text")
(0006,4,0034,2938,"some text")
(0007,3,0083,2939,"some text")
(0008,4,0083,2939,"some text") 
```

我不应该添加以下内容，因为 HOURNO 和 JOBID 对已经存在于另一行（即行 0006）中：

```
(0009,4,0056,2938,"some text") 
```

有没有我可以做的检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:08:03.193

我建议在这两列上添加一个 UNIQUE 约束。它们听起来像一个复合候选键。这样，数据库将为您强制执行参照完整性。确保您的表是 InnoDB。

# android - 在android中解码shift-jis

> ID：13723917
> 
> 赞同：5
> 
> 时间：2012-12-05T13:05:58.480
> 
> 标签：android, shift-jis

我如何在 android 中解码 shift-JIS（**将其转换为字符串）？**
我试过这样的东西，但它不起作用

编码：

```
String test = "some text";
byte[] bytes = test.getBytes("Shift_JIS"); 
```

解码：

```
String decoded = new String(bytes, "Shift_JIS"); 
```

**我的设备中保存了一个日语联系人，当我恢复联系人时，我正在处理备份/恢复应用程序，它显示未定义的字符。
所以我认为它作为 Shift-JIS 保存在数据库中，我想对其进行解码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:23:27.890

据我在我的 Android 设备（运行 4.1.1 的摩托罗拉 Razr）上看到的，它可以正确编码/解码 Shift-JIS。以下测试代码

```
 try {
        String test = "インターネットをもっと快適に";
        byte[] bytes = test.getBytes("Shift_JIS");
        byte[] inShiftJis = {
                -125, 67, -125, -109, -125, 94, -127, 91, -125, 108, -125, 98, -125, 103, -126,
                -16, -126, -32, -126, -63, -126, -58, -119, -11, -109, 75, -126, -55
        };

        String decoded = new String(bytes, "Shift_JIS");
        String fromShiftJis = new String(inShiftJis, "Shift_JIS");
        Log.d(LOG_TAG, decoded);
        Log.d(LOG_TAG, fromShiftJis);
    } catch (UnsupportedEncodingException e) {

    } 
```

输出

```
03-06 10:09:25.733: D/MainActivity(3490): インターネットをもっと快適に
03-06 10:09:25.733: D/MainActivity(3490): インターネットをもっと快適に 
```

所以我们可以看到编码和解码是有效的。如果您创建一个包含相同字节集的纯文本文件，您可以通过例如在浏览器中查看它来确认这是 Shift-JIS 编码，这将让您选择字符编码。

因此，如果您看到未定义的字符，则表明它不是 Shift-JIS 编码（可能是压缩数据？），或者您错误地提取了数据。如果您可以将数据保存为文本文件，最快的方法可能是尝试在浏览器中打开它，然后检查各种字符编码，直到找到正确的编码。

# php - 选择所有选项值 php mysql

> ID：13723922
> 
> 赞同：1
> 
> 时间：2012-12-05T13:06:19.787
> 
> 标签：php, mysql, drop-down-menu

我正在尝试从我的 MySQL 数据库中选择所有值。选项 a、b 和 c 工作正常，但我不确定选择所有三个的语法。

```
<option value="1">a</option>
<option value="2">b</option>
<option value="3">c</option>
<option value="1,2,3">All</option> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:16:29.870

如果我正确理解您的问题并通过查看您的“全部”选项的值，我认为您想使用选择来获取一个项目或所有项目。

如果是这样，请将您的选择选项的值全部更改为`<option value="all">all items</option>`.

然后将您的 PHP 文件（您使用表单发布到的位置）更改为：

```
// is the all option send?
if($_POST['your_select'] === 'all') {
    //query to get all the items (SELECT * FROM table)
} else {
    // query with the post value as the id (SELECT * FROM table WHERE id = $_POST['your_select'])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:56:40.133

尝试这个

```
<form action="my_page.php" method="post">
    <select name="my_select">
        <option value="1">a</option>
        <option value="2">b</option>
        <option value="3">c</option>
        <option value="1,2,3">All</option>
    </select>
    <input type="submit" name="submit" value="Submit" />
</form>

<?php
# in my_page.php page

# put submitted value of the select tag in an array 
# (submitted value in this case equals "1", "2", "3" or "1,2,3")
$values = explode(",", $_POST["my_select"]);

# get number of values in the array
$num_of_values = count($values);

# escape all values before using them in your sql statement
foreach ($values as $key => $val) {
    $values["$key"] = mysql_real_escape_string($val);
}

# if we have more than 1 value in the array 
if (count($values) > 1) {
    $sql = "SELECT * FROM table_name WHERE "; # note the space after "WHERE" keyword

    for ($i = 0; $i < $num_of_values; $i++) {
        # this "if" statement is for removing the "OR" keyword from the sql statement 
        # when we reach the last value of the array
        if ($i != $num_of_values - 1) {
            $sql .= "column_name = '{$values[$i]}' OR "; # note the space after "OR"
        } else { #if we reached the last value of the array then remove the "OR" keyword
            $sql .= "column_name = '{$values[$i]}'";
        }
    }

    # execute your query
    $result = mysql_query($sql);
} else { # if we have only one value in the array
    $result = mysql_query("SELECT * FROM table_name WHERE column_name = '{$values[0]}'");
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:09:36.247

我想你想要`multiple="multiple"`它允许你选择多个

```
<select name="modules[]"  multiple="multiple">
   <option value="1">a</option>
   <option value="2">b</option>
   <option value="3">c</option>
   <option value="1,2,3">All</option>
</select> 
```

现在您将获得所选选项的数组，您可以通过`GET`或`POST`

要选择最后选择的所有内容，您可以使用 jquery 之类的

```
$('option').click(function(){
   if($(this).val() =='1,2,3'){
    $("option").attr("selected", "selected");
   }

}) 
```

# php - 检查用户输入错误的方法。jQuery 还是 PHP？

> ID：13723923
> 
> 赞同：1
> 
> 时间：2012-12-05T13:06:21.693
> 
> 标签：php, jquery, forms, validation

我正在使用 jquery ajax 脚本提交将创建用户配置文件的 html 表单。我们需要检查输入错误，例如用户名、密码或电子邮件中的空格。应该使用 jQuery 在客户端检查此类错误，还是使用 PHP 在服务器端检查此类错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:08:33.730

签入 jQuery 可以让您更快地响应用户告诉他们出了什么问题，因为您不需要往返于服务器进行验证；但是您应该始终验证服务器端以防止绕过 jQuery 验证（例如，使用 curl 而不是 Web 浏览器的调用等），或者如果客户端 js 被禁用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:08:30.300

两个都。

客户端对于快速错误检查很有用。但是，它可以很容易地绕过（例如关闭 Javascript），因此您也**必须**进行服务器端检查。

如果你必须选择一个，实际上没有选择，使用服务器端检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:08:45.597

您应该始终在服务器端检查这些错误，因为如果用户禁用了 javascript 怎么办？Javascript 错误检查应仅作为改善用户体验的附加组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T13:09:05.130

应在两侧进行检查。

您使用 jQuery/JavaScript 来获得良好而快速的用户体验。用户无需等待服务器调用即可立即获得反馈。

但是 JavaScript 可以很容易地被禁用或攻击（例如，Fiddler 可以轻松地编写 Http 调用）。这就是为什么您还想在服务器上检查您的请求的原因。

JavaScript 是为了用户体验，服务器端是为了安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T13:10:44.727

It should be checked on both(client side and server side) It should be checked on client side to reduce server process and server side if user input the value by firebug, etc.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T13:18:20.117

**始终**进行服务器端检查。

此外，在有意义的地方进行客户端检查。

# hadoop - Hive 返回一个非特定错误：FAILED: SemanticException java.lang.reflect.UndeclaredThrowableException

> ID：13723925
> 
> 赞同：2
> 
> 时间：2012-12-05T13:06:32.203
> 
> 标签：hadoop, hive

我在 HIVE 中有以下查询，但它不起作用

```
SELECT
newcust.dt , aspen.Probe , newcust.direction , aspen.VLan , sum(newcust.npacket), sum(newcust.nbyte), sum(newcust.nbytetcp), sum(newcust.nbyteudp), sum(newcust.byte_unknown), sum(newcust.pack_unknown), sum(newcust.byte_web), sum(newcust.pack_web), sum(newcust.byte_webapp), sum(newcust.pack_webapp), sum(newcust.byte_residential), sum(newcust.pack_residential), sum(newcust.byte_download), sum(newcust.pack_download), sum(newcust.byte_news), sum(newcust.pack_news), sum(newcust.byte_mail), sum(newcust.pack_mail), sum(newcust.byte_db), sum(newcust.pack_db), sum(newcust.byte_routing), sum(newcust.pack_routing), sum(newcust.byte_encrypted), sum(newcust.pack_encrypted), sum(newcust.byte_office), sum(newcust.pack_office), sum(newcust.byte_vpn), sum(newcust.pack_vpn), sum(newcust.byte_tunneling), sum(newcust.pack_tunneling), sum(newcust.byte_others), sum(newcust.pack_others), sum(newcust.byte_remoteaccess), sum(newcust.pack_remoteaccess), sum(newcust.byte_streaming), sum(newcust.pack_streaming) , sum(newcust.byte_chat), sum(newcust.pack_chat), sum(newcust.byte_voip), sum(newcust.pack_voip), aspen.CustomerName, aspen.General_NetworkPriority, aspen.SLA_CIR, aspen.SLA_EIR
FROM
 newcust INNER JOIN  aspen ON(  aspen.Probe = newcust.numsonde AND  aspen.VLan = substring(newcust.name1,1,instr(newcust.name1, '_')-1) )
WHERE
  newcust.numsonde = '1'
  AND  newcust.direction = '0'
  AND  newcust.dt LIKE '2012-01-20-%%%%'
  AND  COALESCE(UNIX_TIMESTAMP(aspen.scd_end,'dd-MM-yyyy'),CAST(9999999999 AS BIGINT)) >= UNIX_TIMESTAMP(newcust.dt,'yyyy-MM-dd-HHmm')+cast((newcust.period * 360) as BIGINT)
  AND  UNIX_TIMESTAMP(aspen.scd_start,'dd-MM-yyyy') < UNIX_TIMESTAMP(newcust.dt,'yyyy-MM-dd-HHmm')+cast((newcust.period * 360) as BIGINT)
GROUP BY newcust.dt, aspen.Probe, newcust.direction, aspen.VLan, aspen.CustomerName, aspen.General_NetworkPriority, aspen.SLA_CIR, aspen.SLA_EIR, from_unixtime(UNIX_TIMESTAMP(newcust.dt,'yyyy-MM-dd-HHmm')+cast((newcust.period * 360) as BIGINT)) 
```

Hive 返回以下错误：

```
FAILED: SemanticException java.lang.reflect.UndeclaredThrowableException. But there is no other explaination about the root of the problem. 
```

您认为查询无效还是另一个“更深层次”的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T07:12:02.483

确保将**select 子句**中的所有字段都包含在**group by 子句**中。

# android - 如果按下主页按钮时调用surfaceDestroyed()，则线程将运行

> ID：13723926
> 
> 赞同：1
> 
> 时间：2012-12-05T13:06:38.353
> 
> 标签：android, multithreading, surfaceview, rdp, surfaceholder

我是 android Surfaceview 实现的新手。我正在android3.0 中开发RDP 客户端应用程序。我从套接字获取图像流，使用 Surfaceview 和 Thread 将此图像绘制到表面。

表面视图示例代码：

```
class mySurfaceView extends SurfaceView implements SurfaceHolder.Callback 
{
      private TutorialThread _thread;
      Canvas c=null;

      public mySurfaceView(Context context) 
        {
            super(context);

            getHolder().addCallback(this);
            _thread = new TutorialThread(getHolder(), this);            

            matrix= new Matrix();
                    m = new float[9];
                        paint = new Paint();
        }

               public void surfaceCreated(SurfaceHolder arg0) {
            //setWillNotDraw(false) ;
            Log.e("surfaceCreated","surfaceCreated");
              if(_thread==null  ){
                  Log.e("_thread.created","thread created");
                  _thread = new TutorialThread(getHolder(),this); 
                  _thread.setRunning(true);
                        _thread.start();
             // <-- added fix
                 }else {
                     Log.e("_thread.getState()",_thread.getState()+"");
             _thread.setRunning(true);  //original code
             _thread.start();           //original code
                 }

        }

        public void surfaceDestroyed(SurfaceHolder arg0) {
            Log.e("surfaceDestroyed","surfaceDestroyed");

            boolean retry = true;
            _thread.setRunning(false);
            while (retry) {
                try {
                    _thread.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        } 
               public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2,
                int arg3) {

        }

       class TutorialThread extends Thread 
    {
        private SurfaceHolder _surfaceHolder;
        private mySurfaceView _panel;
        private boolean _run = false;
        private InputStream is;
        private Socket socket;
        Bitmap resizeBmp;

        public TutorialThread(SurfaceHolder surfaceHolder,mySurfaceView panel) 
        {
            Log.e("TutorialThread","TutorialThread-->Constructor");
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        @Override
        public void run() 
        {
            Log.e("TutorialThread","TutorialThread-->run()");

                try 
                {

                    socket = new Socket("172.19.1.144", 4444);
                    is = socket.getInputStream();
                    DataInputStream inputputStream = new DataInputStream(is);

                    //long time = System.currentTimeMillis();                   

                    int i=0;

                    while (socket.isConnected() ) 
                    {

                        Log.e("tutorial thread","While running");
                        c = null;                   

                        i++;
                        if(i==10){
                            System.gc();
                            i=0;
                        }
                        Log.e("BEFORE","BEFORE");
                        synchronized (_surfaceHolder) 
                        {
                            Log.e("AFTER","AFTER");
                            ByteBuffer inputHeaderBuffer = ByteBuffer.allocate(20);
                            inputHeaderBuffer.order(ByteOrder.LITTLE_ENDIAN);
                            inputputStream.readFully(inputHeaderBuffer.array());
                            SurfaceViewPinchZoom.serverWidth=inputHeaderBuffer.getInt();
                            SurfaceViewPinchZoom.serverHeight=inputHeaderBuffer.getInt();
                            //Log.e("serverWidth","serverWidth   "+ SurfaceViewPinchZoom.serverWidth+"serverHeight===="+SurfaceViewPinchZoom.serverHeight);
                            SurfaceViewPinchZoom.left=inputHeaderBuffer.getInt();
                            SurfaceViewPinchZoom.top=inputHeaderBuffer.getInt();

                            int dataLength = inputHeaderBuffer.getInt();
                            ByteBuffer imageDataCompress = ByteBuffer.allocate(dataLength);
                            imageDataCompress.order(ByteOrder.LITTLE_ENDIAN);
                            inputputStream.readFully(imageDataCompress.array());
                            byte[] imagedata = new byte[imageDataCompress.remaining()];
                            imageDataCompress.get(imagedata);

                            //Decompress the image
                            //Log.e("imagedata.length::::::::::",imagedata.length+"");

                                // Create the decompressor and give it the data to compress
                                Inflater decompressor = new Inflater();
                                decompressor.setInput(imagedata);

                                // Create an expandable byte array to hold the decompressed data
                                ByteArrayOutputStream bos = new ByteArrayOutputStream(imagedata.length);

                                // Decompress the data
                                byte[] buf = new byte[1024];
                                while (!decompressor.finished()) {
                                    try {
                                        int count = decompressor.inflate(buf);
                                        bos.write(buf, 0, count);
                                    } catch (DataFormatException e) {
                                    }
                                }
                                try {
                                    bos.close();
                                } catch (IOException e) {
                                }

                                // Get the decompressed data
                                byte[] decompressedData = bos.toByteArray();

                            /
                            BitmapFactory.Options options=new BitmapFactory.Options();
                            options.inJustDecodeBounds=true;

                        //  Log.e("decompressedData.length::::::::::",decompressedData.length+"");
                            /*SurfaceViewPinchZoom.*/bmp = BitmapFactory.decodeByteArray(decompressedData, 0,decompressedData.length,options);
                            options.inDither=true;
                            /*scaleX=(float)screen_width/bmp.getWidth();
                            scaleY=(float)screen_height/bmp.getHeight();
                            matrix.setScale(scaleX, scaleY);*/
                             // Calculate inSampleSize
                            options.inSampleSize = calculateInSampleSize(options, screen_width, screen_height);

                            // Decode bitmap with inSampleSize set
                            options.inJustDecodeBounds = false;

                            /*SurfaceViewPinchZoom.*/bmp= BitmapFactory.decodeByteArray(decompressedData, 0,decompressedData.length,options);

                            bmp=BitmapFactory.decodeByteArray(decompressedData, 0,decompressedData.length,options);

                                c  = _surfaceHolder.lockCanvas();
                                c.drawBitmap(bmp, matrix, paint);

                                //draw(c);
                                //postInvalidate();
                                onDraw(c);

                            inputHeaderBuffer.clear();
                            imageDataCompress.clear();
                            inputHeaderBuffer = null;
                            imageDataCompress = null;
                            imagedata = null;

                        }
                        if (c != null)
                        {
                            _surfaceHolder.unlockCanvasAndPost(c);
                        }

                    }

                } 

                catch (ArrayIndexOutOfBoundsException ae) 
                {

                    ae.printStackTrace();

                } 
                catch (Exception e) 
                {

                    e.printStackTrace();

                }
                finally {
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }

        private int calculateInSampleSize(Options options, int screen_width,
                int screen_height) {
             // Raw height and width of image
            final int height = options.outHeight;
            final int width = options.outWidth;
            int inSampleSize = 1;

            if (height > screen_height || width > screen_width) {
                if (width > height) {
                    inSampleSize = Math.round((float)height / (float)screen_height);
                } else {
                    inSampleSize = Math.round((float)width / (float)screen_width);
                }
            }
            return inSampleSize;

        }
}
} 
```

问题是

1）如果我按下主页按钮然后`surfaceDestroyed()`被调用`thread`并被**终止**。

但是在按下从主页按钮打开应用程序后，我需要继续线程并更新图像（来自套接字的输入流）。

2）如果我将事件上的`doubletap`活动称为子活动，`surfaceDestroyed()`则调用`Thread`并**终止**。

从子活动返回后，我需要在哪里继续显示图像。

**在这两种情况下，由于线程已经启动**，我都遇到了异常。`java.lang.IllegalThreadStateException:`

 **请帮助如何在不按下主页按钮或调用另一个子活动的情况下运行相同的线程？

感谢和问候亚米尼**

# mysql - 通过在 MYSQL 中重用派生字段列名来简化查询字符串

> ID：13723927
> 
> 赞同：0
> 
> 时间：2012-12-05T13:06:42.157
> 
> 标签：mysql, select, simplify

我们还能通过使用派生列作为另一个过程的输入来简化这个查询吗

```
$query = "SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot,
(COUNT(DISTINCT arr1.element)/(COUNT(DISTINCT arr1.element)+COUNT(DISTINCT arr2.element)))*col3 AS c31,
(COUNT(DISTINCT arr2.element)/(COUNT(DISTINCT arr1.element)+COUNT(DISTINCT arr2.element)))*col3 AS c32
FROM table1 
WHERE col2 = 'x'" 
```

像这样的东西

```
$query = "SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot,
        (Arr1/tot)*col3 AS c31,
        (Arr2/tot)*col3 AS c32
FROM  table1 
WHERE col2 = 'x'" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:13:51.297

You can try this:

```
$query = "
SELECT tab.id, tab.Arr1, tab.Arr2, tab.tot, (tab.Arr1/tab.tot) as c31, (tab.Arr2/tab.tot) as c32
from (
SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot
FROM table1 
WHERE col2 = 'x'
) as 'tab' " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:11:12.927

Try this:

```
SELECT id, Arr1, Arr2, (Arr1 + Arr2) tot, ((Arr1 / (Arr1 + Arr2)) * col3) c31, ((Arr2 / (Arr1 + Arr2)) * col3) c32
FROM (SELECT table1.id, COUNT(DISTINCT arr1.element) AS Arr1, COUNT(DISTINCT arr2.element) AS Arr2, col3
FROM table1 WHERE col2 = 'x') AS A 
```

# java - Struts将参数从jsp传递给action

> ID：13723931
> 
> 赞同：0
> 
> 时间：2012-12-05T13:06:54.797
> 
> 标签：java, struts

我使用 Struts 2.2。

我已经迭代了一个`ArrayList`用户。我有每个用户的编辑链接。

单击编辑链接时，我想在数据库中找到用户并显示其属性。

不幸的是，该链接没有将我带到所需的页面，而是将我重定向到同一页面。有任何想法吗？

显示.jsp：

```
<logic:iterate id="customerElement" name="ACTIVE_PROFILES_LIST" property="list">
  <tr>
    <td>
      <bean:write name="customerElement" property="lastName"/>
    </td>

    <td>
      <bean:write name="customerElement" property="firstName"/>
    </td>

    <td>
      <pdk-html:link action="/beforeEditProfile.do?toEdit=${customerElement.login}">Edit</pdk-html:link>
    </td>
  </tr>
</logic:iterate> 
```

动作类：

```
public class BeforeBeforeEditProfileAction(){

  public ActionForward execute(ActionMapping mapping, ActionForm form,
                               HttpServletRequest request,
                               HttpServletResponse response) throws IOException,
                                                                    ServletException {

 // retrieve the parameter

    String toModify= request.getParameter("toEdit");  
    SearchBean search = new SearchBean();
    Cetatean cet = search.getSingleCitizen(toModify);
    LogManager.info("BeforeEditProfileAction: ENTER");
    if(cet!=null){
        request.setAttribute("cetatean", cet);
        LogManager.info("BeforeEditProfileAction: cetatean not null");
        return mapping.findForward("succes");
    }
    else {  
        LogManager.info("BeforeEditProfileAction: cetatean null");
        return  mapping.findForward("failure");
    }

  }
 } 
```

struts-config.xml

```
<action path="/beforeEditProfile" type="pm.action.BeforeEditProfileAction" name="user" validate="true" scope="request" input="/htdocs/pages/display.jsp">
  <forward name="success" path="/htdocs/pages/editProfile.jsp"/>
  <forward name="failure" path="/htdocs/pages/profileEditedFailed.jsp"/> 
```

# javascript - 淘汰赛验证和命名空间

> ID：13723933
> 
> 赞同：0
> 
> 时间：2012-12-05T13:07:05.270
> 
> 标签：javascript, validation, binding, knockout.js, javascript-namespaces

我无法将命名空间与淘汰赛验证结合起来。这打破了验证：

```
myNameSpace = {
    viewModel: {
        name: ko.observable().extend({ digit: { digit: true, message: "digits only"} })
    }
};
ko.validation.init({});
ko.applyBindings(myNameSpace); 
```

​相对于：

```
myNameSpace = {
    viewModel: {
        name: ko.observable().extend({ digit: { digit: true, message: "digits only"} })
    }
};
ko.validation.init({});
ko.applyBindings(myNameSpace.viewModel); 
```

哪个工作正常。

谁能向我解释其中的区别？​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:10:14.200

This is about the existence of objects and properties. You might have had your bindings to the "name" property. If you do ko.applyBindings(myNameSpace);, ko looks for a property "name" within myNameSpace object. This does not exist.

When you bind it with ko.applyBindings(myNameSpace.viewModel);, it looks for name within the view model object. It does find it and there fore is able to bind to the property or observable.

In the first case however, if you were to use the data-bind with "value : viewModel.name" it would work, because it would be looking for the name property of the viewModel property of the myNameSpace object.

# entity-framework - 将存储过程结果映射到实体框架中的自定义复杂类型

> ID：13723934
> 
> 赞同：0
> 
> 时间：2012-12-05T13:07:05.000
> 
> 标签：entity-framework

考虑一个存储过程`GetEmployees`，它有`SELECT`如下语句

```
SELECT EMP_ID, EMP_NAME, EMP_EMAIL 
FROM EMPLOYEE 
```

此存储过程将其结果映射到复杂类型`GetEmployees_Result`

```
class GetEmployees_Result {
   public int EMP_ID;
   public string EMP_NAME;
   public string EMP_EMAIL;
} 
```

是否可以将函数导入的结果映射到不同的复杂类型，如下所示：

```
class GetEmployeesResult {
  public int Id;
  public string Name;
  public string Email;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:04:21.157

这是一个标准功能。您已转到函数导入的映射并将结果类型更改为自定义类型。

# java - 菜单结构设计

> ID：13723935
> 
> 赞同：1
> 
> 时间：2012-12-05T13:07:13.410
> 
> 标签：java, mysql, menu, javafx-2

我正在使用 java + javafx + mysql，我需要为我的应用程序开发一个菜单栏。当应用程序启动时，我必须根据用户角色构建菜单。

我正在使用一张表来存储菜单层次结构。

```
| MENU_TABLE |
| ---------- |
| ID_MENU    |
| PARENT_ID  |
| TITLE      | 
```

还有另一个表来存储对 de fxml 文件的引用，当用户选择关联的菜单项时我需要加载该文件。

```
| MENU_FORM_TABLE |
| --------------- |
| ID_MENU         |
| FXML PATH       | 
```

我不太喜欢这种方法，很难维护，当我需要添加新菜单来修改现有菜单时，我必须非常小心。

还有其他想法吗？建议？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:13:20.007

如果没有更多关于难以维护的意思的信息，这看起来像一个简单的设计，维护起来并不难。

当您在“MENU_TABLE”上插入/更新/删除时，您应该在“MENU_FORM_TABLE”上执行相同的操作。（在删除时，您可以在“ID_MENU”字段上使用级联选项在表“MENU_FORM_TABLE”中定义一个外键，这样当“MENU_TABLE”中的一行被删除时，“MENU_FORM_TABLE”中的相应行也会自动删除由分贝）。

尽管如此，看起来，这里的关系是一对一的。因此，您可以将字段“FXML PATH”移动到第一个表并完全删除第二个表。这将允许您只在一张桌子上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:13:43.820

我认为您需要一些可以让您更轻松地“可视化”菜单层次结构的东西。一种方法是在 JSON 中定义层次结构/嵌套结构。然后，您可以编写一个生成器程序（可能在 JavaScript 中）来生成 SQL 语句来填充您的表。

# php - 使用下划线 (_) 作为 PHP 函数名

> ID：13723936
> 
> 赞同：7
> 
> 时间：2012-12-05T13:07:16.143
> 
> 标签：php

根据[http://php.net/manual/en/functions.user-defined.php](http://php.net/manual/en/functions.user-defined.php)，我应该可以使用下划线 (_) 作为函数名：

> 函数名称遵循与 PHP 中其他标签相同的规则。有效的函数名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为一个正则表达式，它可以这样表达：[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*。

但是，以下内容会杀死我的程序而不会导致任何错误：

```
error_reporting(E_ALL);
echo('start');
function _($x){return ($x)?htmlspecialchars($x):'nbsp;';}
echo('end'); 
```

我正在使用 PHP 版本 5.3.18。我不明白什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T13:08:54.053

`_`已经有一个名为;的内置函数。它是[`gettext`](http://uk.php.net/manual/en/function.gettext.php#refsect1-function.gettext-notes).

您可能会得到一个`Fatal error: Cannot redeclare _()`，但根据您的设置，错误可能不会输出到您的屏幕上`display_errors`。您还可以查看`log_errors`指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T13:10:00.733

正如 cbuckley 所说，已经有一个`gettext`用 name 定义的别名`_`。如果您启用了 gettext，则使用`_`名称。

最好使用双下划线 ( `__`)。我经常使用它。或者你禁用 gettext。

# c# - 使用 javascript 保存包含 <> 字符的字符串

> ID：13723939
> 
> 赞同：0
> 
> 时间：2012-12-05T13:07:31.827
> 
> 标签：c#, jquery, html, asp.net-mvc

我正在构建一个 C# MVC 站点，我可以在其中保存代码片段。我使用 textarea 粘贴我的代码。当我尝试保存某些字符时它失败了。我正在使用 jqueryUI。

这是将我的 textarea 保存到数据库的函数，其中 snippetAdd 是我的 textarea 的 ID：

```
function addSnippet() {

    $("#newSnippet").show();
    var myStuff = { snippetCode: $('#snippetAdd').val(), lexiconId: $('#lexiconId').val(), snippetDesc: $('#snippetDescAdd').val() };
    var aURL = "/Lexicon/addSnippet";
    $.post(aURL, myStuff, function(data) { parseMessage(data); }, 'json');
} 
```

例如，如果我过去并尝试保存以下内容，但没有单引号，它会失败：

'<'一些代码'>'

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:32:35.990

@LeviBotelho 有正确的方法。但是，您还可以选择通过注释控制器来告诉 MVC 不要验证传入数据：

```
[HttpPost, ValidateInput(false)]
public ActionResult Index(MyModel model)
{...} 
```

注意：这不是最安全的方法，因为它会使您的服务器容易受到潜在的脚本注入攻击。如果您信任您的用户并立即在服务器端执行编码，则应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:22:02.423

我认为问题出在您没有对输入进行编码这一事实。（您没有详细说明错误，所以这是一个最好的猜测。）无论如何，尝试使用您的所有输入执行此操作：

```
encodeURI($('#snippetAdd').val()) 
```

这个 HTML 编码你的字符串，用它们的编码等价物替换特殊字符。您当然必须在服务器端解码您的字符串，以重构在该字段中输入的原始代码。

# java - 代码仅将文本文件的一行保存到数组中

> ID：13723940
> 
> 赞同：1
> 
> 时间：2012-12-05T13:07:33.693
> 
> 标签：java, arraylist, save

我生成的代码旨在提供逐行读取文本文件的功能，将每一行保存到一个数组中。它似乎正确地读取了每一行但是当我使用 printProps() 方法时它只显示一个......

代码只是将文本文件的一行保存到数组中，我的代码有什么问题？

```
/*reading in each line of text from text file and passing it to the processProperty() method.*/
Public void readProperties(String filename) {
    try {
        BufferedReader reader = new BufferedReader(new FileReader(filename));
        int i = 0;
        String line;
        line = reader.readLine();
        while (line != null && !line.equals("")) {
            i++;
            processProperty(line);
            line = reader.readLine();
        }
        System.out.println("" + i + " properties read");
    } catch (Exception e) {
        System.err.println(e.getMessage());
        e.printStackTrace();

    }
}

/*Breaks up the line of text in order to save the value to an array (at this point it only saves one line to the array). org.newProp(newProp) passes the new property to the Organize class where it saves it to an array.

public void processProperty(String line) {
         org = new Organize();
        int id = nextPropertyID;
        nextPropertyID++;

        String[] parts = line.split(":");
        int propNo = Integer.parseInt(parts[0]);            
        String postcode = parts[1];
        String type = parts[2];
        int bedrooms = Integer.parseInt(parts[3]);
        int year = Integer.parseInt(parts[4]);
        int rental = Integer.parseInt(parts[5]);
        Landlord landlord = theLandlord;
        Tenant tenant = null;
        org.propUniqueCheck(id);
        propNoCheck(propNo, postcode);
        postcodeCheck(postcode,propNo);
        typeCheck(postcode, propNo, type);
        bedroomsCheck(bedrooms, postcode, propNo);
        yearCheck(propNo, postcode, year);
        System.out.println("Creating property " + id);

        Property newProp = new Property(id, propNo, postcode, type, bedrooms, year,
                rental, landlord, tenant);
        org.newProp(newProp);
        org.printProps();
    }

/*From here down it is the code to save the value to the array*/

public Organize() {
        props = new ArrayList<Property>();
        PTs = new ArrayList<PotentialTenant>(); 
        waitingList = new LinkedList<String>();
        //myList.add(new prop(Property.toString()));

    }
    public void newProp(Property p)
    {
        props.add(p);
    } 
```

我一直在我的研讨会上积极寻求解决这个问题的帮助，但我似乎找不到解决方案，任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:15:01.923

在 processProperty 中，您正在实例化一个新`Organize`对象。因此，每个属性（您为每一行创建的）都以不同的 ArrayList 结束（作为第一个元素）。

一种解决方案是在开始循环之前实例化一个`Organize`对象，然后将其作为参数传递给您的 processProperty 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:15:03.597

当文本文件中的一行是空字符串时，您的 while 循环将中断。

这是实现循环的正确方法：

```
String line = "";
while ((line = reader.readLine()) != null) {
    // your code here
} 
```

# mysql - WordPress Paradox - 普通帖子未被查询

> ID：13723945
> 
> 赞同：1
> 
> 时间：2012-12-05T13:07:46.030
> 
> 标签：mysql, wordpress

我处于我无法弄清楚的情况。我在具有多种自定义帖子类型的网站上运行 WP 3.4.2。普通帖子显示在博客部分，属于一个名为博客的类别，具有不同的子类别。

博客文章和另一种称为“事件”的文章类型在单个视图中显示标签。标签显示正常，但是当您单击博客文章标签时，找不到任何文章。与事件相关的标签按预期工作。

真正奇怪的事情是在管理员中。当我搜索与普通帖子相关的标签时，它会找到它并计算它有多少帖子，但是当点击帖子数量时会显示“未找到帖子。”。使用与事件相关的标签，这永远不会发生。

此外，类别也有同样的问题.. 只显示来自事件的帖子..

此外，我尝试制作另一种名为“blogposts”的帖子类型，以显示在博客页面上，而不是普通帖子，但同样悲伤的故事。

据我在代码中看到的，在`archive.php`and中`tag.php`，普通帖子不会从查询中返回，只是事件通过。

我有这个`functions.php`

```
function namespace_add_custom_types( $query ) {
    if( is_category() || is_tag() && empty( $query->query_vars['suppress_filters'] ) ) {
        $query->set( 'post_type', array('post', 'events', 'blogposts' ));
        return $query;
    }
}
add_filter( 'pre_get_posts', 'namespace_add_custom_types' ); 
```

任何想法都会受到欢迎。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:34:12.767

这是一个奇怪的问题。很可能是由插件和/或主题的组合引起的。所以首先我们需要弄清楚问题出在哪里。所以：

*   关闭所有插件，看看它是否改变。
    *   或者一件一件地做
*   关闭`functions.php`主题中的部分。
    *   尽可能多地关闭，看看情况是否改变

要找到这个问题，我们需要更具体的信息。
是你赢得的主题还是别人的？
哪些插件处于活动状态？这个问题是新问题，还是只是“弹出”？

祝你好运，让我知道你发现了什么；）

# javascript - 有没有一种简洁的方法可以在 JavaScript 中创建“内部”属性？

> ID：13723950
> 
> 赞同：1
> 
> 时间：2012-12-05T13:08:04.453
> 
> 标签：javascript, structure

在 JavaScript 中，我可能会开始使用这样的顶级对象编写“库”或功能集合：

```
window.Lib = (function()
{
    return {

        // Define Lib here.
        //

    };

})(); 
```

我还可以添加一些`Lib`用于创建与其相关的对象的函数：

```
window.Lib = (function()
{
    return {

        ObjectA: function()
        {
            var _a = 5;

            return {

                getA: function(){ return _a; }

            };

        },

        ObjectB: function()
        {
            var _b = 2;
            var _c = 1;

            return {

                getB: function(){ return _b; }

            };

        }

    };

})(); 
```

这将像这样使用：

```
var thing = Lib.ObjectA();
var thing2 = Lib.ObjectA();
var thing3 = Lib.ObjectB(); 
```

我可以使用上面创建的每个方法中的方法来获取`_a`定义范围内`ObjectA()`或`_b`定义范围内的值`ObjectB()`：

```
alert(thing.getA()); // 5
alert(thing3.getB()); // 2 
```

我想要实现的是：

假设我想访问该属性`_c`（在 内定义`ObjectB()`），但**只能在`Lib`**. 我该怎么办？我的意思是，我想让属性在我在返回的对象中定义的任何函数中都可读`Lib()`，但我不想在此之外公开这些值。

代码示例：

```
window.Lib = (function()
{
    return {

        ObjectA: function(){ ... },
        ObjectB: function(){ ... },

        assess: function(obj)
        {
            // Somehow get _c here.
            alert( obj.getInternalC() );
        }

    };

})(); 
```

这会像这样工作：

```
var thing = Lib.ObjectB();
alert( thing.getInternalC() ) // error | null | no method named .getInternalC()

Lib.assess(thing); // 1 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:12:39.937

所以你想要每个实例受保护的属性？也就是说，由`ObjectA`,`ObjectB`等创建的实例的属性，但**只能**由库内的代码访问，而不能由库外的代码访问？

您目前无法在 JavaScript 中*正确*执行此操作，但您将能够在下一个版本中使用[私有名称对象](http://wiki.ecmascript.org/doku.php?id=harmony%3aprivate_name_objects)。（尽管你现在可以在 ES5 中做类似的事情，但请参阅下面的“几乎做到了”。）

创建由 中的所有代码共享的数据很容易`Lib`，但不是*每个实例的*属性，如下所示：

```
window.Lib = (function()
{
    var sharedData;

    // ...
})(); 
```

在那里定义的所有函数（你的`ObjectA`等）都可以访问那个`sharedData`变量，这是从外部完全无法访问的。但这不是每个实例，由`ObjectA`,`ObjectB`等创建的每个对象都没有自己的副本。

### 几乎做到了

如果您的代码将在 ES5 环境中运行（因此，任何现代浏览器，其中“现代”不*包括**IE8*或更早版本），您可以通过`Object.defineProperty`. 这类似于私有名称对象在 ES.next 中的工作方式，但不是*真正*私有的：

[实例](http://jsbin.com/idapak/1)| [来源](http://jsbin.com/idapak/1/edit)

```
window.Lib = (function() {
    // Get a random name for our "c" property
    var c = "__c" + Math.round(Math.random() * 1000000);

    // Return our library functions
    return {

        ObjectA: function() {
            // Create an object with a couple of public proprties:
            var obj = {
                pub1: "I'm a public property",
                pub2: "So am I"
            };

            // Add our obscured "c" property to it, make sure it's
            // non-enumerable (doesn't show up in for-in loops)
            Object.defineProperty(obj, c, {
                enumerable: false,  // false is actually the default value, just emphasizing
                writable:   true,
                value:      "I'm an obscured property"
            });

            // Return it
            return obj;
        },

        ObjectB: function(){ /* ... */ },

        assess: function(obj) {
            // Here, we access the property using the `c` variable, which
            // contains the property name. In JavaScript, you can access
            // properties either using dotted notation and a literal
            // (`foo.propName`), or using bracketed notation and a string
            // (`foo["propName"]`). Here we're using bracketed notation,
            // and our `c` string, which has the actual property name.
            display( obj[c] );
        },

        alter: function(obj, value) {
            // Similarly, we can change the value with code that has
            // access to the `c` variable
            obj[c] = value;
        }
    };
})(); 
```

并像这样使用它：

```
// Create our object
var o = Lib.ObjectA();

// Play with it
display("pub1: " + o.pub1); // displays "pub1: I'm a public property"
display("c: " + o.c);       // displays "c: undefined" since `o` has no property called `c`
Lib.assess(o);              // displays "I'm an obscured property"

// Note that our obscured property doesn't show up in for-in loops or Object.keys:
var propName, propNames = [];
for (propName in o) {
    propNames.push(propName);
}
display("propNames: " + propNames.join(","));
display("Object.keys: " + Object.keys(o).join(","));

// Our Lib code can modify the property
Lib.alter(o, "Updated obscured property");
Lib.assess(o); 
```

返回的对象`Lib.ObjectA`有一个属性，每次`Lib`加载时其名称都会改变，并且不可枚举（不会出现在`for-in`循环中）。获得它的唯一方法是知道它的名称（同样，每次`Lib`创建时都会更改 - 例如，每次页面加载）。其中的代码`Lib`知道属性名称是什么，因为它位于所有代码`c`共享的变量中。`Lib`由于您可以使用括号表示法和字符串访问属性，因此我们可以使用`instance[c]`来访问该属性。

你会看到这些是如何被很好地掩盖的。外部代码`Lib`在枚举对象中的属性时看不到被遮挡的属性，而且他们不知道我们为其分配的半随机名称，因此找不到该属性。当然，您可以使用调试器通过检查找到它，但调试器可以做很多事情。

事实上，这就是私有属性在 ES.next 中的工作方式，只不过它`c`不是字符串，而是私有名称对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:11:37.253

好吧，您将“只”需要在*Context*中*声明*这些变量*`Lib`*

 *```
window.Lib = (function()
{
    var _c = 42;   

    return {
    };
}); 
```

请注意，我删除了该*伪构造函数的**自动调用*。这意味着，您需要为多个实例创建多个调用，每个实例都有自己*独特*的一组值。*`Lib()`*

 **```
var inst1 = Lib(),
    inst2 = Lib(); 
```

如果您只想从所有子上下文（函数）*共享访问*，您可以使用您已经使用的相同模式（仅将*var*声明移动到父上下文，如上所示）。***

# svn - 我需要将 SVN 日志历史记录导出到 windows 中的 xml 文件中

> ID：13723952
> 
> 赞同：4
> 
> 时间：2012-12-05T13:08:12.663
> 
> 标签：svn

我尝试使用以下命令在 Ubuntu 机器中导出 SVN 历史日志，它运行良好。我使用了兔子 SVN。

```
svn log -v --xml SVNPATH > /home/admin/Desktop/XXX.xml 
```

我也需要在 Windows 机器上做同样的事情，并且正在使用乌龟 SVN。谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:50:46.720

你不能用 TortoiseSVN 做到这一点。

您可以自动化 Tortoise 来获取日志对话框或其他内容（[详情请看这里](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-automation.html)），但您不能将日志导出为 XML。

您需要命令行来执行此操作（您不需要安装，可以使用便携式）。

# python - 按顺序堆叠数组

> ID：13723953
> 
> 赞同：0
> 
> 时间：2012-12-05T13:08:17.563
> 
> 标签：python, numpy

我从文件中逐行读取`data`，我想将它们存储在`array`.

编辑：数据不能用`loadtxt()`.

所以我这样做：

```
data = array([])
for frame in frames:
    # ....
    # get some lines and make some calculations e.g. final result is
    # line = array([1, 2, 3, 4])
    # ....
    if data.size == 0:
        data = line
    else:
        data = vstack( (data, line) ) 
```

这很好用，但是`if`-clausel 使解决方案看起来很难看。我想知道是否有可能搭上它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:38:04.157

如果元素的数量`line`是固定的，并且您只想避免“丑陋”的解决方案，您可以这样做：

```
data = []
for f in frames:
    # do your calculation
    # line = [1, 2, 3, 4]
    data += line
data = np.array(data).reshape((-1,4)) 
```

# iphone - 如何在 ios 5 中显示嵌入 url 的字符串

> ID：13723954
> 
> 赞同：2
> 
> 时间：2012-12-05T13:08:17.340
> 
> 标签：iphone, objective-c, ios5

我将我的 APP 名称发布给我的追随者说EXAMPLEAPP 我不想粘贴网址。我想以 html 方式实现它说***一个 href:" [http://www.EXAMPLEAPP.com](http://www.EXAMPLEAPP.com) ">EXAMPLEAPP /a>"***这个 html 代码给我EXAMPLEAPP 蓝色，点击它会重定向到它指向后端。看图片：

![在此处输入图像描述](../Images/2a3c29ba25afea32281e3e17c4fc7e37.png)

在图像中，蓝色文字说“希腊字母”、“库马字母”、“早期统治罗马”等..有网络链接。正是我正在寻找的那种解决方案可能吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:22:30.850

您可以显示嵌入的字符串，但只能使用 UIWebView。

```
outputHTML=[[NSString alloc] initWithFormat:@"<body> %@ </body>", stringData];

[webView loadHTMLString:string baseURL:nil]; 
```

# ios - 如何通过手势使路径中的特定点可拖动。苹果手机

> ID：13723955
> 
> 赞同：0
> 
> 时间：2012-12-05T13:08:19.897
> 
> 标签：ios, uigesturerecognizer, cgpoint

我可以通过手势识别器绘制路径并使视图可拖动。我如何在可拖动的路径上指出一点。我想我需要确定该点以检查它在视图中的位置并将其位置重置为它被拖动到的点，但这就是我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:37:41.767

兄弟有检测命中的功能`CGPath`or `UIBezierPath`。ON `touchesBegan`：方法您可以使用以下方法之一来检测命中点是否在路径上。

**对于`UIBezierPath`**：`- (BOOL)containsPoint:(CGPoint)point`

**对于`GGPath`**：

```
 bool CGContextPathContainsPoint (
   CGContextRef context,
   CGPoint point,
   CGPathDrawingMode mode
); 
```

然后，如果这一点在您的路径上，那么您可以设置一个标志。而在`touchesEnd`方法中，您可以获得翻译点。但是需要重新绘制路径。路径不会是弹性的。

**编辑：**我为您的案例所做的一件事是`CAShapeLayer.`CAShapeLayer 可以绘制一个`UIBazierPath`or `CGPathRef`。而且它还通过它的 strokeend 和 strokestart 属性进行动画处理。请参阅以下代码以了解绘制路径的想法`CAShapeLayer`

```
 UIBezierPath *path = [UIBezierPath bezierPath];
    // Draw your path acording to your requirements
    // Remember that you don't need to stroke path in this implementation
    CAShapeLayer *shapeLayer = [CAShapeLayer layer];
    shapeLayer.path = path.CGPath; // path is a UIBezierPath object
    shapeLayer.strokeColor = [UIColor redColor].CGColor;
    shapeLayer.fillColor = [UIColor clearColor].CGColor;
    shapeLayer.lineWidth = 1.5;
    shapeLayer.strokeStart = 0.0;
    shapeLayer.strokeEnd = 1.0;
    [shapeLayer renderInContext:ctx]; // you can also use addSubLayer: and drawInContext 
```

# iphone - 在ios6的PDF中绘制粗体字体

> ID：13723957
> 
> 赞同：1
> 
> 时间：2012-12-05T13:08:23.980
> 
> 标签：iphone, objective-c, ipad, ios6

我的代码如下所示，但我想使用 BOLD 类型“A/V Calculator”的字体，该字符串以 PDF 格式以普通字体打印，因此任何人都可以提供解决方案，以 BOLD 样式打印该文本。

我的代码如下。

```
- (void) drawHeader
{
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

    NSString *textToDraw = @"A/V  Calculator";

    UIFont *font = [UIFont systemFontOfSize:24.0];

    CGSize stringSize = [textToDraw sizeWithFont:font          constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) lineBreakMode:UILineBreakModeWordWrap];

    CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

    [textToDraw drawInRect:renderingRect withFont:font  lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:27:01.880

您可以将字体设置为特定的粗体字体或`boldSystemFontOfSize。将 boldFont 传递给将是粗体的文本，并使用其他字体来绘制您的其他字符串。参考：[https ://discussions.apple.com/thread/1533499?start=0&tstart=0](https://discussions.apple.com/thread/1533499?start=0&tstart=0)

```
UIFont *boldFont = [UIFont boldSystemFontOfSize:24.0];
UIFont *normalFont = [UIFont systemFontOfSize:24.0]; 
```

# c# - 从用户控件访问 gridview 作为属性

> ID：13723960
> 
> 赞同：0
> 
> 时间：2012-12-05T13:08:29.870
> 
> 标签：c#, asp.net

我在用户控件中有gridview 绑定，并希望从页面中的用户控件访问该gridview 并使用导出到excel。

我在用户控件中创建了要访问的属性，但我无法访问它。

如何从我的页面中的用户控件访问 gridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:12:42.560

为什么不将 ExportToExcel 方法写入用户控件，或者只是创建一个公共属性并将引用返回到网格：

```
public GridView MyGrid
{
    get{ return this.GridView1;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:28:29.570

我喜欢使用`interface`.

您可以创建一个接口并在网页上实现它。而在用户控件中使用一个接口对象，就可以调用接口方法。

例如，接口

```
public interface IExport
{
    void Export();
} 
```

您的网页

```
public partial class _Default : System.Web.UI.Page, IExport
{
    protected void Page_Load(object sender, EventArgs e)
    {
        UC11.MyExport = this;
        //UC11 will be whatever name of your usercontrol
    }

    public void Export()
    {
        //your export code
    }
} 
```

还有你的用户控制

```
public partial class UC1 : System.Web.UI.UserControl
{
    public IExport MyExport { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        MyExport.Export();
    }
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:30:04.543

如果您为您的 aspx 页面使用**母版页**，您可以通过这种方式在您的用户控件中访问您的页面 GridView

```
 Page mypage= this.Page;
  GridView mypageGridview = (GridView)mypage.Master.FindControl("ContentPlaceHolder1").FindControl("YourGridView"); 
```

如果您没有母版页

```
 Page mypage= this.Page;
    GridView mypageGridview = (GridView)mypage.FindControl("YourGridView"); 
```

# ember.js - Ember 1.0.pre 和 1.0.RC 的区别

> ID：13723967
> 
> 赞同：0
> 
> 时间：2012-12-05T13:08:58.610
> 
> 标签：ember.js, handlebars.js

我正在尝试让自己熟悉 Emberjs，并且正在阅读[这个优秀的教程](http://trek.github.com/)。页面上有一个[指向小提琴的链接](http://jsfiddle.net/Sly7/ZKXyg/)，其中包含教程的工作示例，这很棒。

我遇到的问题是，当我将托管资源更改为最新版本的 Emberjs 和 Handlebarsjs 时，[小提琴不再起作用](http://jsfiddle.net/mysticgohan53/E9tt2/)。

当我将代码放入我机器上的本地版本时，浏览器给我以下警告：未捕获的错误：-无法找到模板“应用程序”。

我认为问题在于如何调用模板：

```
//In app.js
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

//In index.html
<script type="text/x-handlebars" data-template-name="application">
  <h1>Ember Committers</h1>
  {{outlet}}
</script> 
```

我知道 Emberjs 代码在不断变化，但是当我试图找到一个答案时，为什么该代码确实可以与以前的版本一起使用，以及要进行哪些更改才能使其正常工作，但我却一无所获。

帮助！

# c - C中的结构类型转换

> ID：13723971
> 
> 赞同：3
> 
> 时间：2012-12-05T13:09:06.667
> 
> 标签：c, sockets, struct, network-programming, type-conversion

在下面的代码片段中，我发现 sockaddr_in 类型转换为 sockaddr as '(struct sockaddr *) &sin' 。我只想知道 sockaddr_in 中的哪些变量将相应地映射到 sockaddr 。下面是片段。

```
struct sockaddr {
unsigned short    sa_family;    // address family, AF_xxx
char              sa_data[14];  // 14 bytes of protocol address
}; 
```

// IPv4 AF_INET 套接字：

```
struct sockaddr_in {
short            sin_family;   // e.g. AF_INET, AF_INET6
unsigned short   sin_port;     // e.g. htons(3490)
struct in_addr   sin_addr;     // see struct in_addr, below
char             sin_zero[8];  // zero this if you want to
};

struct sockaddr_in sin;

sin.sin_family = AF_INET;
sin.sin_port = htons(floodport);
sin.sin_addr.s_addr = inet_addr(argv[1]); 
```

//类型转换

```
(struct sockaddr *) &sin  // what values of sockaddr_in would be mapped to sockaddr ? 
```

这种转换在 socket 编程中的 sendto() 中使用，如下所示。

```
sendto(s, datagram, iph->tot_len,0, (struct sockaddr *) &sin,sizeof(sin)) 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:16:36.717

for 的唯一目的`struct sockaddr`是让一种类型传递给诸如`sendto()`etc之类的函数。

实际上，您不会将其用于其他目的，您还有[其他结构](http://www.beej.us/guide/bgnet/output/html/multipage/sockaddr_inman.html)，例如

*   `struct sockaddr_in`对于旧版 IPv4
*   `struct sockaddr_in6`对于 IPv6
*   `struct sockaddr_un`用于 Unix 套接字
*   `struct sockaddr_bth`用于蓝牙
*   `struct sockaddr_storage`它与您的体系结构中最大的一样大。可以巧妙地用于存储您不知道其类型的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:17:12.760

使用 struct sockaddr 的函数只会读取 sa_family 并在内部执行相反的转换（如果他们了解 sa_family 内部的内容）。

# php - 花费更多时间使用 DataTables 获取记录

> ID：13723976
> 
> 赞同：2
> 
> 时间：2012-12-05T13:09:21.223
> 
> 标签：php, jquery, mysql, codeigniter, datatables

我正在使用[DataTables](http://datatables.net)对结果进行分页。这是我正在使用的代码

```
$('#datatable_paging').dataTable(
                {
                    "sPaginationType": "full_numbers",
                    "bLengthChange": false,
                    "iDisplayLength":15,
                    "bFilter": true,
                    "bSort": false,
                    "bInfo": true,
                    "bAutoWidth": false
                    }
                ); 
```

现在，它工作正常，但问题是加载结果需要时间，因为我正在获取所有记录而没有`LIMIT`（例如：2000）。我确实在互联网上搜索过，我找到了这个链接。

1.  [PHP 的 DataTables 服务器端处理示例](http://datatables.net/examples/data_sources/server_side.html)
2.  [Code-Igniter 的 DataTables 服务器端处理示例](https://github.com/blake-nouribekian/codeigniter-datatables)

在处理服务器端编码之前，我想确保`LIMIT`使用上面发布的代码对我的查询进行任何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:19:34.530

您需要查看服务器端处理以加载记录。
[http://datatables.net/examples/data_sources/server_side.html](http://datatables.net/examples/data_sources/server_side.html)

这样你只需要返回足够的记录来显示一个页面，每次点击下一步它都会做一个快速的 ajax 请求来获取下一批记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:14:25.270

您可以在服务器端数据库查询中设置一个 LIMIT，这将减少将数据从数据库传输到 PHP，然后将 php 转换为 js 所需的时间。请让我知道是否有任何限制可能阻碍使用 LIMIT 子句。

# php - 找出给定点是否在“多边形区域”内 - GoogleMaps API

> ID：13723979
> 
> 赞同：3
> 
> 时间：2012-12-05T13:09:29.707
> 
> 标签：php, javascript, jquery, google-maps, google-maps-api-3

我正在开发一个网络项目，其想法是：用户（A）可以在 GoogleMaps API 的帮助下定义一个地址，并且我可以获取坐标并将它们存储在数据库中。然后其他用户 (B) 可以在地图上设计一个多边形区域，再次使用 GoogleMaps API，他们将提交该区域，并且使用该值，页面将能够找到该区域中是否有任何用户 (A)。

我该怎么做或在哪里可以找到有关此特定事项的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:21:30.707

Google Maps API v3 几何库现在包含[poly 命名空间](https://developers.google.com/maps/documentation/javascript/reference#poly)，它有一个 containsLocation 方法：

containsLocation(point:LatLng, polygon:Polygon)
boolean
计算给定点是否位于指定多边形内。

将点和多边形的引用传递给它，它会告诉您多边形是否包含该点。

要计算多边形的边界，请遍历其所有路径中的点（如果您知道它只有一个路径，可以简化），使用 google.maps.LatLngBounds.extend() 将它们添加到边界对象

# java - 调用 Hashmap.remove() 后是否立即进行垃圾收集？

> ID：13723983
> 
> 赞同：6
> 
> 时间：2012-12-05T13:09:36.257
> 
> 标签：java, garbage-collection, out-of-memory

Java代码如下：

```
Random r = new Random(1234697890);
HashMap<Integer, List<Integer>> map = new HashMap<Integer, List<Integer>>();
List<Integer> list = new ArrayList<Integer>();

for(int i=0;i<100000;i++){
    for(int j=0;j<1000;j++){
        list.add(r.nextInt(100000));
    }
    map.put(i, list);
    map.remove(i);
} 
```

当`i`达到 37553 时，`java.lang.OutOfMemoryError: Java heap space`会发生。
似乎垃圾收集不会在循环中发生。
现在我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:11:31.997

您一直使用相同的 List，当循环退出时，它包含 100000 * 1000 个项目。要使 GC 摆脱您的列表，您需要将其范围缩小到`for(i)`循环内。

换句话说，在这段代码中，map 和 list 在任何时候都可以访问，因此不符合收集条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T13:19:44.560

尝试如下重写代码，你不应该得到 OOME 的...

```
Random r = new Random(1234697890);
HashMap<Integer, List<Integer>> map = new HashMap<Integer, List<Integer>>();

for(int i=0;i<100000;i++){
    List<Integer> list = new ArrayList<Integer>();
    for(int j=0;j<1000;j++){
        list.add(r.nextInt(100000));
    }
    map.put(i, list);
    map.remove(i);
} 
```

您的原始代码的问题是：

*   你只创建一个列表，
*   你不断地向它添加越来越多的元素，并且
*   该列表仅在代码完成时才变成垃圾……因为它一直在“范围内”。

在循环内移动`list`声明意味着`ArrayList`在每次循环迭代中创建并填充一个新声明，并在您开始下一次迭代时变成垃圾。

* * *

有人建议打电话`System.gc()`。对于您的情况，这根本无济于事，因为要收集的垃圾最少^(1 个。)总的来说，这是一个坏主意，因为：

*   GC 保证在抛出 OOME 之前立即运行，
*   JVM 可以比你更好地计算出运行 GC 的最佳（即最有效）时间是什么时候，
*   无论如何，您的电话`System.gc()`可能会被完全忽略。可以配置 JVM，以便`System.gc()`忽略对的调用。

[1 - 我的书呆子想指出`map.put(i, list); map.remove(i);`最有可能生成一个`Integer`最有可能成为垃圾的对象。`ArrayList`但是，与您无限增长的对象相比，这是“鸡饲料” 。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:13:33.767

在您的情况下，您继续填充相同的`list`内容（即使您从该 HashMap 中删除它，它仍然作为局部变量存在）。

JVM 承诺在抛出`OutOfMemoryError`. 因此，您可以确定没有任何东西需要清理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:30:39.903

你的代码

```
List<Integer> list = new ArrayList<Integer>();

for(int i=0;i<100000;i++){
    for(int j=0;j<1000;j++){
        list.add(r.nextInt(100000));
    }
    map.put(i, list);
    map.remove(i);
} 
```

是相同的

```
List<Integer> list = new ArrayList<Integer>();

for(int i=0;i<100000 * 1000; i++) {
    list.add(r.nextInt(100000));
} 
```

如您所见，它是列表，而不是保留所有整数的地图。顺便说一句，试试这个，看看会发生什么；）

```
list.add(r.nextInt(128)); 
```

# php - 如何以“可重用”的方式将参数传递给数组中的 PDO SELECT 语句？

> ID：13723988
> 
> 赞同：0
> 
> 时间：2012-12-05T13:09:51.253
> 
> 标签：php, mysql, arrays, pdo, prepared-statement

我是 PDO 的新手，并且已经成功地将我网站的大部分插入和更新转换为 PDO 事务，每个事务都在一个可集中访问的函数中，以实现最大程度的重用。我真的很想对`SELECT`语句做同样的事情，但这似乎更难！

我期望做的是：

```
function getProdDetails2SaveInInvoice($data) {

    global $dbh;

    try {
        $sth=$dbh->prepare("
        SELECT
            AES_DECRYPT(?, '".DBKEY,"'),
            AES_DECRYPT(?, '".DBKEY,"'),
            AES_DECRYPT(?, '".DBKEY,"')
         FROM
            products
        WHERE
            ? ? ?
    ");

        $sth->execute($data);
        $sth->fetch(PDO::FETCH_OBJ);

        return $sth;
    }

    catch(PDOException $e) {
        echo  "Something went wrong. Please report this error.\n";
        file_put_contents(
            $_SERVER['DOCUMENT_ROOT']."/PDOErrors.txt",
            "\n\nScript name : ".SCRIPT."\nFunction name : ".__FUNCTION__."\n".
            $e->getMessage(), FILE_APPEND);

        throw new failedTransaction();
    }
}

// Fetch additional info from invoice_products.
        $data = array(
            'alt_id',           /* field 1                  */
            'prod_name',        /* field 2                  */
            'prod_desc',        /* field 3                  */
            'prod_id',          /* where                    */
            '=',                /* operator                 */
            $prodid         /* comparison               */
        );
        $rs = getProdDetails2SaveInInvoice($data); 
```

不幸的是，这不起作用并返回错误，

> 错误：“在非对象上调用成员函数 execute()”。

我可以确认`$dbh`数据库连接正在工作，因为它与用于插入和更新的连接相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:23:18.290

您不能绑定字段名称。假设 DBKEY 是一个常量，您的查询应该如下所示：

```
$sth=$dbh->prepare("
        SELECT
            AES_DECRYPT(alt_id, ?),
            AES_DECRYPT(prod_name, ?),
            AES_DECRYPT(prod_desc, ?)
         FROM
            products
        WHERE
            prod_id = ?
    "); 
```

和 $data 像这样：

```
$data = array(
            DBKEY, 
            DBKEY, 
            DBKEY,
            $prodid
        ); 
```

# c# - 使用字节数组而不是文件目录的 Ghostscript 包装器

> ID：13723991
> 
> 赞同：1
> 
> 时间：2012-12-05T13:09:59.610
> 
> 标签：c#, ghostscript

在用户上传文件后，我正在使用[通用 C# 包装器](http://www.mattephraim.com/blog/2009/01/06/a-simple-c-wrapper-for-ghostscript/)从 PDF 中渲染图像，我想知道是否可以将包装器配置为使用字节数组而不是磁盘上的实际文件，因为这将为我节省额外的旅行并提高我的应用程序的性能。理想情况下，我想传递 PDF 的字节数组并让它返回一个字节数组。我查看了包装器代码，但我无法弄清楚我将如何做到这一点（如果可能的话）。那么有可能吗？如果有任何关于我应该从哪里开始的指导？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:59:41.227

您不能将字节序列提供给 Ghostscript PDF 解释器，也不能将 PDF 文件作为 pdfwrite 设备生成的字节序列读回。

原因很简单，PDF 解释器和 PDF 编写器都需要随机访问文件才能解释/创建文件。如果整个文件都保存在内存中，则可以这样做，但这将严重限制文件的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:39:45.623

您使用的包装器是纯包装器，不能为您提供所需的东西。看看[**Ghostscript.NET**](https://ghostscriptnet.codeplex.com/)托管的 Ghostscript 包装器（完整实现），如果您需要同时处理多个 pdf，它允许您同时运行解释 prolog / postscript 和 Ghostscript 库的多个实例。有一个类[GhostscriptViewerPdfFileHandler](https://ghostscriptnet.codeplex.com/SourceControl/latest#Ghostscript.NET/Ghostscript.NET/Viewer/FileHandlers/GhostscriptViewerPdfFileHandler.cs)向您展示如何通过解释器操作 pdf。您需要的一切都可以完成。

# javascript - 如何居中 jqPagination 小部件？

> ID：13723999
> 
> 赞同：0
> 
> 时间：2012-12-05T13:10:11.030
> 
> 标签：javascript, jquery, html, css

我正在使用一个名为[jqPagination](http://beneverard.github.com/jqPagination/)的分页插件。问题是我想把它放在父容器的中心，但是小部件在 css 中使用了“float:left”，这使得这很难。

如果我删除浮动：左，小部件会有些破坏，因为它不使用明确的宽度，旧的“margin-left：auto;margin-right：auto;” 技巧不起作用:(

如何将此小部件居中在父容器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:15:41.447

将`.clearfix`类 ( [clearfix](http://www.webtoolkit.info/css-clearfix.html) ) 添加到 jqPagination 容器和样式

```
display: inline-block;
float: none; 
```

之后用另一个 div 包装 jqPagination 容器并`text-align: center;`为其设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T13:14:41.703

您的问题缺乏研究和信息。我建议也添加它。

尝试：

```
margin-left: 50%; 
```