# StackOverflow 问答 13755000-13755999

# javascript - JQUERY .each 如何到达对象内的数组？

> ID：13755003
> 
> 赞同：0
> 
> 时间：2012-12-07T00:18:15.600
> 
> 标签：javascript, json, object, jquery

我有使用 ajax 函数获得的 JSON 数据，我使用每个函数循环这些数据，如下所示：

```
 $.each(data, function (index, trip) {
                    // trip contains data
                    console.log(trip);

                    content += '<article class="tripPreview">';
                    content += '<span class="tripTitle">'+trip.title+ '</span>';
                    content += '<div class="tripOverlay">'+trip.description+ '</div>';
                    content += '<img src="public/uploads/tripphoto/'+ trip.id +'/'+trip.tripphotos.filename+'">';   
                    content += '</article>';        

                }); 
```

我如何到达`tripphotos > filename > thumb > url`？

### JSON：

> `{"created_at":"2012-12-06T13:02:03Z","description":"test","id":11,"province":"Friesland","range_high":null,"range_low":null,"start_city":"Leeuwarden","title":"test","updated_at":"2012-12-06T13:02:06Z","user_id":1,"views":1,"categories":[{"ar_association_key_name":"4","created_at":"2012-12-04T13:12:43Z","id":2,"name":"Urban","updated_at":"2012-12-04T13:12:43Z"}],"tripphotos":[{"created_at":"2012-12-06T13:02:05Z","filename":{"url":"/uploads/tripphoto/filename/2/1280x1024-colour-wood-flip.jpg","thumb":{"url":"/uploads/tripphoto/filename/2/thumb_1280x1024-colour-wood-flip.jpg"}},"id":2,"trip_id":11,"updated_at":"2012-12-06T13:02:05Z"}]}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:36:40.590

从您的 JSON 来看，它看起来像是`tripphotos`一个数组，因此您需要另一个`each`：

```
$.each(data, function (index, trip) {
   ...
   $.each(trip.tripphotos,function(index2,tripphoto){
      console.log(tripphoto.filename.thumb.url);
   });
}); 
```

除非您知道永远只有一个（或者，您只追求第一个）：

```
$.each(data, function (index, trip) {
    ...
    console.log(trip.tripphotos[0].filename.thumb.url);

}); 
```

# jquery - jQuery 不能在头部工作，但在体内可以

> ID：13755005
> 
> 赞同：0
> 
> 时间：2012-12-07T00:18:27.863
> 
> 标签：jquery

如果我在没有 $(document).ready(function() 的情况下将 jQuery 放在正文的末尾，它工作正常。如果我使用 $(document).ready(function() 将它放在头部，它不再工作.我意识到从这里将jQuery放在头部时我需要function（），但是当我尝试自己实现它时，没有骰子。我盯着它太久了，我没有看到问题。

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
        $("#testTable tr").hover(
            function(){$(this).addClass("highlighted");},
            function(){$(this).removeClass("highlighted");} 
        );
});
</script>

<style type='text/css'>
.tablerow {background-color:yellow;}
.tableheader {background-color:Pink;}
.highlighted {background-color:Green;}
</style>    
</head>

<body>
<table id="testTable">
    <thead class="tableheader">
        <tr><th>No</th><th>Name</th><th>Age</th><th>Salary</th></tr>
    </thead>
    <tbody id="testBody">
        <tr class="tablerow"><td>1</td><td>Yong Mook Kim</td><td>28</td><td>$100,000</td></tr>
        <tr class="tablerow"><td>2</td><td>Low Yin Fong</td><td>29</td><td>$90,000</td></tr>
    </tbody>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T00:25:07.963

尝试在脚本之前引用 css 文档，这里是文档[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# c# - C#查找最高数组值和索引

> ID：13755007
> 
> 赞同：115
> 
> 时间：2012-12-07T00:18:41.387
> 
> 标签：c#, arrays, indexing

所以我有一个未排序的数字数组`int[] anArray = { 1, 5, 2, 7 };`，我需要获取数组中最大值的值和索引，即 7 和 3，我该怎么做？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-12-07T00:23:39.810

这不是最迷人的方式，但很有效。

（必须有`using System.Linq;`）

```
 int maxValue = anArray.Max();
 int maxIndex = anArray.ToList().IndexOf(maxValue); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-12-07T00:27:58.083

```
int[] anArray = { 1, 5, 2, 7 };
// Finding max
int m = anArray.Max();

// Positioning max
int p = Array.IndexOf(anArray, m); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-12-07T00:23:47.377

如果索引未排序，则必须至少遍历数组一次才能找到最大值。我会使用一个简单的`for`循环：

```
int? maxVal = null; //nullable so this works even if you have all super-low negatives
int index = -1;
for (int i = 0; i < anArray.Length; i++)
{
  int thisNum = anArray[i];
  if (!maxVal.HasValue || thisNum > maxVal.Value)
  {
    maxVal = thisNum;
    index = i;
  }
} 
```

这比使用 LINQ 或其他单行解决方案更冗长，但它可能会快一点。真的没有办法比 O(N) 更快。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2018-05-08T18:17:30.397

简洁的单行：

```
var (number, index) = anArray.Select((n, i) => (n, i)).Max(); 
```

测试用例：

```
var anArray = new int[] { 1, 5, 7, 4, 2 };
var (number, index) = anArray.Select((n, i) => (n, i)).Max();
Console.WriteLine($"Maximum number = {number}, on index {index}.");
// Maximum number = 7, on index 2. 
```

特征：

*   使用 Linq（不如 vanilla 优化，但代价是代码更少）。
*   不需要排序。
*   计算复杂度：O(n)。
*   空间复杂度：O(n)。

评论：

*   确保数字（而不是索引）是元组中的第一个元素，因为元组排序是通过从左到右比较元组项来完成的。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-12-07T00:27:03.843

强制性 LINQ one ^([1]) -liner：

```
var max = anArray.Select((value, index) => new {value, index})
                 .OrderByDescending(vi => vi.value)
                 .First(); 
```

（排序可能是对其他解决方案的性能打击。）

**[1]：**对于给定的“一”值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-02T14:15:11.560

这里有两种方法。当数组为空时，您可能需要添加处理。

```
public static void FindMax()
{
    // Advantages: 
    // * Functional approach
    // * Compact code
    // Cons: 
    // * We are indexing into the array twice at each step
    // * The Range and IEnumerable add a bit of overhead
    // * Many people will find this code harder to understand

    int[] array = { 1, 5, 2, 7 };

    int maxIndex = Enumerable.Range(0, array.Length).Aggregate((max, i) => array[max] > array[i] ? max : i);
    int maxInt = array[maxIndex];

    Console.WriteLine($"Maximum int {maxInt} is found at index {maxIndex}");
}

public static void FindMax2()
{
    // Advantages: 
    // * Near-optimal performance

    int[] array = { 1, 5, 2, 7 };
    int maxIndex = -1;
    int maxInt = Int32.MinValue;

    // Modern C# compilers optimize the case where we put array.Length in the condition
    for (int i = 0; i < array.Length; i++)
    {
        int value = array[i];
        if (value > maxInt)
        {
            maxInt = value;
            maxIndex = i;
        }
    }

    Console.WriteLine($"Maximum int {maxInt} is found at index {maxIndex}");
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-09T12:22:25.573

```
int[] numbers = new int[7]{45,67,23,45,19,85,64}; 
int smallest = numbers[0]; 
for (int index = 0; index < numbers.Length; index++) 
{ 
 if (numbers[index] < smallest) smallest = numbers[index]; 
} 
Console.WriteLine(smallest); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-02T15:27:01.723

```
 public static class ArrayExtensions
{
    public static int MaxIndexOf<T>(this T[] input)
    {
        var max = input.Max();
        int index = Array.IndexOf(input, max);
        return index;
    }
} 
```

这适用于所有变量类型...

```
var array = new int[]{1, 2, 4, 10, 0, 2};
var index = array.MaxIndexOf();

var array = new double[]{1.0, 2.0, 4.0, 10.0, 0.0, 2.0};
var index = array.MaxIndexOf(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-07T00:28:12.190

```
anArray.Select((n, i) => new { Value = n, Index = i })
    .Where(s => s.Value == anArray.Max()); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-12-04T04:10:14.883

波纹管代码的输出：

00:00:00.3279270 - max1 00:00:00.2615935 - max2 00:00:00.6010360 - max3 (arr.Max())

数组中有 100000000 个整数，差异不是很大，但仍然......

```
class Program
    {
        static void Main(string[] args)
        {
            int[] arr = new int[100000000];

            Random randNum = new Random();
            for (int i = 0; i < arr.Length; i++)
            {
                arr[i] = randNum.Next(-100000000, 100000000);
            }
            Stopwatch stopwatch1 = new Stopwatch();
            Stopwatch stopwatch2 = new Stopwatch();
            Stopwatch stopwatch3 = new Stopwatch();
            stopwatch1.Start();

            var max = GetMaxFullIterate(arr);

            Debug.WriteLine( stopwatch1.Elapsed.ToString());

            stopwatch2.Start();
            var max2 = GetMaxPartialIterate(arr);

            Debug.WriteLine( stopwatch2.Elapsed.ToString());

            stopwatch3.Start();
            var max3 = arr.Max();
            Debug.WriteLine(stopwatch3.Elapsed.ToString());

        }

 private static int GetMaxPartialIterate(int[] arr)
        {
            var max = arr[0];
            var idx = 0;
            for (int i = arr.Length / 2; i < arr.Length; i++)
            {
                if (arr[i] > max)
                {
                    max = arr[i];
                }

                if (arr[idx] > max)
                {
                    max = arr[idx];
                }
                idx++;
            }
            return max;
        }

        private static int GetMaxFullIterate(int[] arr)
        {
            var max = arr[0];
            for (int i = 0; i < arr.Length; i++)
            {
                if (arr[i] > max)
                {
                    max = arr[i];
                }
            }
            return max;
        } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-12T10:59:24.340

```
public static void Main()
{
    int a,b=0;
    int []arr={1, 2, 2, 3, 3, 4, 5, 6, 5, 7, 7, 7, 100, 8, 1};

    for(int i=arr.Length-1 ; i>-1 ; i--)
        {
            a = arr[i];

            if(a > b)
            {
                b=a;    
            }
        }
    Console.WriteLine(b);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-04T17:19:47.143

```
int[] Data= { 1, 212, 333,2,12,3311,122,23 };
int large = Data.Max();
Console.WriteLine(large); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-12T01:06:42.423

考虑以下：

```
 /// <summary>
    /// Returns max value
    /// </summary>
    /// <param name="arr">array to search in</param>
    /// <param name="index">index of the max value</param>
    /// <returns>max value</returns>
    public static int MaxAt(int[] arr, out int index)
    {
        index = -1;
        int max = Int32.MinValue;

        for (int i = 0; i < arr.Length; i++)
        {
            if (arr[i] > max)
            { 
                max = arr[i];
                index = i;
            }
        }

        return max;
    } 
```

用法：

```
int m, at;
m = MaxAt(new int[]{1,2,7,3,4,5,6}, out at);
Console.WriteLine("Max: {0}, found at: {1}", m, at); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-04T14:39:25.223

这是一个 O(n) 的 LINQ 解决方案，具有不错的常数因子：

```
int[] anArray = { 1, 5, 2, 7, 1 };

int index = 0;
int maxIndex = 0;

var max = anArray.Aggregate(
    (oldMax, element) => {
        ++index;
        if (element <= oldMax)
            return oldMax;
        maxIndex = index;
        return element;
    }
);

Console.WriteLine("max = {0}, maxIndex = {1}", max, maxIndex); 
```

`for`但是如果你关心性能，你真的应该写一个明确的lop。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-13T06:35:57.310

只是另一个使用`DataTable`. `DataTable`用 2 列声明 a`index`和`val`。在列中添加一个`AutoIncrement`选项以及两者`AutoIncrementSeed`和`AutoIncrementStep`值。然后使用循环并将每个数组项作为一行插入。然后通过使用方法，选择具有最大值的行。`1``index``foreach``datatable``Select`

**代码**

```
int[] anArray = { 1, 5, 2, 7 };
DataTable dt = new DataTable();
dt.Columns.AddRange(new DataColumn[2] { new DataColumn("index"), new DataColumn("val")});
dt.Columns["index"].AutoIncrement = true;
dt.Columns["index"].AutoIncrementSeed = 1;
dt.Columns["index"].AutoIncrementStep = 1;
foreach(int i in anArray)
    dt.Rows.Add(null, i);

DataRow[] dr = dt.Select("[val] = MAX([val])");
Console.WriteLine("Max Value = {0}, Index = {1}", dr[0][1], dr[0][0]); 
```

**输出**

```
Max Value = 7, Index = 4 
```

**[在此处查找演示](http://rextester.com/CXEB55832)**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-30T13:00:20.760

如果您知道访问最大值的最大索引是立即的。所以你只需要最大索引。

```
int max=0;

for(int i = 1; i < arr.Length; i++)
    if (arr[i] > arr[max]) max = i; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-03T10:58:45.253

这是一个 C# 版本。它基于对数组进行排序的思想。

```
public int solution(int[] A)
 {
    // write your code in C# 6.0 with .NET 4.5 (Mono)
    Array.Sort(A);
    var max = A.Max();
    if(max < 0)
        return 1;
    else
        for (int i = 1; i < max; i++)
        {
            if(!A.Contains(i)) {
                return i;
            }
        }
    return max + 1;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-26T20:59:40.663

`for`如果我们要打高尔夫球，这可以通过无身体循环来完成；）

```
//a is the array

int mi = a.Length - 1;
for (int i=-1; ++i<a.Length-1; mi=a[mi]<a[i]?i:mi) ; 
```

`++i<a.Length-1`省略检查最后一个索引的检查。如果我们将其设置为好像最大索引是开始的最后一个索引，我们不介意这一点。当循环针对其他元素运行时，它将完成并且其中一件事或另一件事是正确的：

*   我们找到了一个新的最大值，因此找到了一个新的最大值索引`mi`
*   最后一个索引一直是最大值，所以我们没有找到新`mi`的，我们坚持最初的`mi`

真正的工作是由后循环修饰符完成的：

*   到目前为止我们找到的最大值（`a[mi]`即由 索引的数组`mi`）是否小于当前项？
    *   `mi`是的，然后通过记住存储一个新的`i`，
    *   否 然后存储现有的`mi`（无操作）

在操作结束时，您将获得要找到最大值的索引。从逻辑上讲，最大值是`a[mi]`

如果你有一个数组，并且你知道最大值的索引，最大值的实际值，我也不太明白“查找最大值和最大值的索引”是如何真正需要跟踪最大值的是使用索引来索引数组的一个小例子。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-19T20:25:58.367

这个长长的列表中的另一个答案，但我认为这是值得的，因为它提供了大多数（或全部？）其他答案没有的一些好处：

1.  下面的方法仅在集合中循环一次，因此顺序为**O(N)**。
2.  该方法查找最大值的**所有索引。**
3.  该方法可用于查找**任何比较的索引**：`min`、`max`、`equals`、`not equals`等。
4.  该方法可以通过 LINQ 选择器**查看对象。**

## 方法：

```
///-------------------------------------------------------------------
/// <summary>
/// Get the indices of all values that meet the condition that is defined by the comparer.
/// </summary>
/// <typeparam name="TSource">The type of the values in the source collection.</typeparam>
/// <typeparam name="TCompare">The type of the values that are compared.</typeparam>
/// <param name="i_collection">The collection of values that is analysed.</param>
/// <param name="i_selector">The selector to retrieve the compare-values from the source-values.</param>
/// <param name="i_comparer">The comparer that is used to compare the values of the collection.</param>
/// <returns>The indices of all values that meet the condition that is defined by the comparer.</returns>
/// Create <see cref="IComparer{T}"/> from comparison function:
///   Comparer{T}.Create ( comparison )
/// Comparison examples:
/// - max:      (a, b) => a.CompareTo (b)
/// - min:      (a, b) => -(a.CompareTo (b))
/// - == x:     (a, b) => a == 4 ? 0 : -1
/// - != x:     (a, b) => a != 4 ? 0 : -1
///-------------------------------------------------------------------
public static IEnumerable<int> GetIndices<TSource, TCompare> (this IEnumerable<TSource> i_collection,
                                                                   Func<TSource, TCompare> i_selector,
                                                                   IComparer<TCompare> i_comparer)
{
  if (i_collection == null)
    throw new ArgumentNullException (nameof (i_collection));
  if (!i_collection.Any ())
    return new int[0];

  int index = 0;
  var indices = new List<int> ();
  TCompare reference = i_selector (i_collection.First ());

  foreach (var value in i_collection)
  {
    var compare = i_selector (value);
    int result = i_comparer.Compare (compare, reference);
    if (result > 0)
    {
      reference = compare;
      indices.Clear ();
      indices.Add (index);
    }
    else if (result == 0)
      indices.Add (index);

    index++;
  }

  return indices;
} 
```

如果您不需要选择器，则将方法更改为

```
public static IEnumerable<int> GetIndices<TCompare> (this IEnumerable<TCompare> i_collection,
                                                          IComparer<TCompare> i_comparer) 
```

并删除所有出现的`i_selector`.

## 概念证明：

```
//########## test #1: int array ##########
int[] test = { 1, 5, 4, 9, 2, 7, 4, 6, 5, 9, 4 };

// get indices of maximum:
var indices = test.GetIndices (t => t, Comparer<int>.Create ((a, b) => a.CompareTo (b)));
// indices: { 3, 9 }

// get indices of all '4':
indices = test.GetIndices (t => t, Comparer<int>.Create ((a, b) => a == 4 ? 0 : -1));
// indices: { 2, 6, 10 }

// get indices of all except '4':
indices = test.GetIndices (t => t, Comparer<int>.Create ((a, b) => a != 4 ? 0 : -1));
// indices: { 0, 1, 3, 4, 5, 7, 8, 9 }

// get indices of all '15':
indices = test.GetIndices (t => t, Comparer<int>.Create ((a, b) => a == 15 ? 0 : -1));
// indices: { }

//########## test #2: named tuple array ##########
var datas = new (object anything, double score)[]
{
  (999,               0.1),
  (new object (),     0.42),
  ("hello",           0.3),
  (new Exception (),  0.16),
  ("abcde",           0.42)
};
// get indices of highest score:
indices = datas.GetIndices (data => data.score, Comparer<double>.Create ((a, b) => a.CompareTo (b)));
// indices: { 1, 4 } 
```

享受！:-)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-06-03T21:55:58.717

找出数组中最大和最小的数：

```
int[] arr = new int[] {35,28,20,89,63,45,12};
int big = 0;
int little = 0;

for (int i = 0; i < arr.Length; i++)
{
    Console.WriteLine(arr[i]);

    if (arr[i] > arr[0])
    {
        big = arr[i];
    }
    else
    {
        little = arr[i];

    }
}

Console.WriteLine("most big number inside of array is " + big);
Console.WriteLine("most little number inside of array is " + little); 
```

# c# - 获取 Twitterizer C# 中的趋势

> ID：13755010
> 
> 赞同：1
> 
> 时间：2012-12-07T00:19:03.870
> 
> 标签：c#, wpf, twitter, twitterizer

我希望使用 Twitterizer 显示当前的 Twitter 趋势。我正在使用以下代码来尝试生成 10 个当前趋势，但是在运行代码时，它会按原样显示所有 10 个 MessageBox，但值是“Twitterizer.TwitterTrend”而不是实际趋势。

```
TwitterResponse<TwitterTrendCollection> tr;
        tr = TwitterTrend.Trends(1);
        foreach (var tnds in tr.ResponseObject)
        {
            MessageBox.Show(tnds.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:26:08.633

您尝试将对象转换为字符串，请尝试使用您要使用的属性。 `TwitterTrend`有财产`Name`。
这有效：

```
 TwitterResponse<TwitterTrendCollection> tr = TwitterTrend.Trends(1);

            foreach (TwitterTrend tnds in tr.ResponseObject)
            {
                Console.WriteLine(tnds.Name);
            } 
```

# javascript - 如何使用变量值作为对象的属性？

> ID：13755011
> 
> 赞同：3
> 
> 时间：2012-12-07T00:19:10.087
> 
> 标签：javascript

> **可能重复：**
> [如何从 JavaScript 中的变量值创建对象属性？](https://stackoverflow.com/questions/2241875)

我想使用变量中的值作为属性名称来创建一个对象。

我有一个名为 propertyName 的变量：

```
propertyName = "first"; 
```

如何使用存储在此变量中的值作为对象属性，如下所示？

```
obj.first = something; // 'first' should be extracted from propertyName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:20:18.207

使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html#vId)：

```
obj[propertyName] = something; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T00:20:34.240

这应该有效：

```
object[ propertyName ]; 
```

它是点符号的另一种形式。它与它的不同之处在于它允许您使用字符串动态生成属性名称。

# c# - MonoTouch 从 CIImage 创建 UIImage 会导致参数无效/选择器错误

> ID：13755014
> 
> 赞同：1
> 
> 时间：2012-12-07T00:19:32.790
> 
> 标签：c#, objective-c, xamarin.ios, core-graphics, ciimage

当我显示一个弹出窗口时，我试图创建一个模糊的背景，我几乎让它工作了。

我找到了一些我翻译成 C# 的 Objective C。

问题出在这一行

```
UIImage finalImage = new UIImage(resultImage); 
```

希望这只是我做错了什么

```
 private UIView CreateBlurView(UIView view)
    {
        UIGraphics.BeginImageContext(view.Bounds.Size);
        view.Layer.RenderInContext(UIGraphics.GetCurrentContext());
        UIImage viewImage = UIGraphics.GetImageFromCurrentImageContext();

        // Blur Image
        CIImage imageToBlur = CIImage.FromCGImage(viewImage.CGImage);
        CIFilter gaussianBlurFilter = CIFilter.FromName("CIGaussianBlur");
        gaussianBlurFilter.SetValueForKey(imageToBlur,new NSString("inputImage"));
        gaussianBlurFilter.SetValueForKey(new NSNumber(10.0f),new NSString("inputRadius"));
        CIImage resultImage = (CIImage) gaussianBlurFilter.ValueForKey(new NSString("outputImage"));

        UIImage finalImage = new UIImage(resultImage);
        UIImageView  imageView = new UIImageView(view.Bounds);
        imageView.Image = finalImage;
        return imageView;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:59:21.557

首先确保您使用的是 iOS 6（或更高版本），因为`CIGaussianBlur`在该版本之前的 iOS 中不可用。

接下来，您缺少（从原始代码中）该行：

```
UIGraphicsEndImageContext(); 
```

在 C# / MonoTouch 中应该是：

```
MonoTouch.UIKit.UIGraphics.EndImageContext (); 
```

最后你遇到了一个错误:(

```
-[UIImage initWithCIImage]: unrecognized selector sent to instance 0x168f2280 
```

`:`选择器末尾缺少a 。现在有另一个 .ctor 接受 a`CIImage`以及`float`(scale) 和 a `UIImageOrientation`。这个应该可以正常工作。

完整的来源是：

```
private UIView CreateBlurView(UIView view)
{
    UIGraphics.BeginImageContext(view.Bounds.Size);
    view.Layer.RenderInContext(UIGraphics.GetCurrentContext());
    UIImage viewImage = UIGraphics.GetImageFromCurrentImageContext();
    UIGraphics.EndImageContext ();

    // Blur Image
    CIImage imageToBlur = CIImage.FromCGImage(viewImage.CGImage);
    CIFilter gaussianBlurFilter = CIFilter.FromName("CIGaussianBlur");
    gaussianBlurFilter.SetValueForKey(imageToBlur,new NSString("inputImage"));
    gaussianBlurFilter.SetValueForKey(new NSNumber(10.0f),new NSString("inputRadius"));
    CIImage resultImage = (CIImage) gaussianBlurFilter.ValueForKey(new NSString("outputImage"));

    UIImage finalImage = new UIImage(resultImage, 1.0f, UIImageOrientation.Up);
    UIImageView  imageView = new UIImageView(view.Bounds);
    imageView.Image = finalImage;
} 
```

注意：错字已在 MonoTouch 中修复，构造函数将在未来版本（6.0.9+）中可用

# android - Android如何在listview上设置longtimeclick

> ID：13755016
> 
> 赞同：-5
> 
> 时间：2012-12-07T00:19:37.660
> 
> 标签：android, listview

请告知如何在列表视图上设置带有上下文菜单的 onLongtimeclicklistner？

以及如何将项目添加到上下文菜单？

有人可以告诉我有关如何有效执行此操作的步骤或任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:28:49.590

```
listView.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        // TODO Auto-generated method stub
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:32:50.977

就那么简单：

```
myListView.setOnItemLongClickListener(new OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
                Log.e("Log", "Item clicked " + position);
                return false;
            }
        }); 
```

# sql - 如何在 SQL PIVOT 中排序

> ID：13755017
> 
> 赞同：5
> 
> 时间：2012-12-07T00:19:38.487
> 
> 标签：sql, sql-server, tsql, pivot

我目前使用 PIVOT 进行此查询，生成如下表：

```
 USER  |  DEC  |  NOV  |  OCT
---------------------------------
  bob   |   3   |   5   |   2
  jon   |   7   |   0   |   1 
  tim   |   4   |   2   |   6 
```

我想要做的，但它看起来像一个延伸是值下降`ORDER BY`的结果。`DEC`

这是查询：

```
with Mth (st, nd) as ( 
  select DATEADD (M, datediff (m, 0,'2012-09-01'), 0), 
         DATEADD (M, DATEDIFF (m, 0, '2012-09-01') + 1, 0)   
  union all 
  select DATEADD (m, 1, st), 
         DATEADD (m, 1, nd) 
  from Mth 
  where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
) 
select * 
from 
( 
  select MONTH(Mth.st) Month, 
      U.USER, 
      COUNT(S.QRY_ID) Searches 
  FROM Mth 
  LEFT JOIN SEARCHES S 
    on Mth.st <= S.CREATED 
    and Mth.nd > S.CREATED 
  LEFT JOIN MEMBERS U 
    on U.AID = S.AID 
  GROUP BY YEAR(Mth.st), MONTH(Mth.st), U.HOLDER_LOGIN
) src 
pivot 
( 
  sum(searches) 
  for month in ([12],[11],[10]) 
) piv 
```

这样做`piv ORDER BY piv.Searches`会出错，所以可以指定列吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T00:39:58.160

试试这个：

```
with Mth (st, nd) as ( 
  select DATEADD (M, datediff (m, 0,'2012-09-01'), 0), 
         DATEADD (M, DATEDIFF (m, 0, '2012-09-01') + 1, 0)   
  union all 
  select DATEADD (m, 1, st), 
         DATEADD (m, 1, nd) 
  from Mth 
  where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
), Pivoted
AS
(     
    select * 
    from 
    ( 
      select MONTH(Mth.st) Month, 
          U.USER, 
          COUNT(S.QRY_ID) Searches 
      FROM Mth 
      LEFT JOIN SEARCHES S 
        on Mth.st <= S.CREATED 
        and Mth.nd > S.CREATED 
      LEFT JOIN MEMBERS U 
        on U.AID = S.AID 
      GROUP BY YEAR(Mth.st), MONTH(Mth.st), U.HOLDER_LOGIN
    ) src 
    pivot 
    ( 
      sum(searches) 
      for month in ([12],[11],[10]) 
    ) piv
)
SELECT * 
FROM Pivoted
ORDER BY Dec 
```

# javascript - 如何将另一个变量的值设置为数组的值？

> ID：13755027
> 
> 赞同：0
> 
> 时间：2012-12-07T00:20:47.423
> 
> 标签：javascript

我不确定问题出在哪里，但这是我的代码

```
var btotal = [];
var songarray = [];
function whileplaying() {
    var playingSound = soundManager.getSoundById('aSound');
    for (var i=0;i<8;i++) {
        var ttotal = 0;
        for (var n=0;n<32;n++) {
            var eblock = (i*32)+n;
            ttotal = ttotal+(playingSound.eqData.left[eblock]*100);
        }
        ttotal = ttotal/32;
        btotal[i] = ttotal;
    }
    console.log(btotal);
    songarray.push(btotal);
} 
```

解释一下，在播放声音时，我得到一个长度为 8 的数组，将那个频率块的 EQ 值相加。最后，我将此数组附加到 songarray，因此理论上是 songarray 是一个数组，其中包含数组中的声音 EQ 数据。

问题是，当我获得 songarray 的值时，其中有许多我期望的数组，但它们都是相同的，并且都是最后一个数据点的值，即 btotal 的最新值。

所以这段代码会运行，控制台会显示（例如）：

```
[42.743750000000006, 2.98125, 0.10625000000000001, 0, 0, 0, 0, 0]
[38.859374999999986, 2.8, 0.09375, 0, 0, 0, 0, 0]
[56.26874999999998, 21.831250000000004, 3.853125, 0.340625, 0, 0, 0, 0]
[46.459374999999994, 19.584374999999998, 1.4, 0, 0, 0, 0, 0]
[38.08125, 11.8, 1.0750000000000002, 0, 0, 0, 0, 0] 
```

然而歌曲数组的内容是这样的：

```
0: Array[8]
0: 38.08125
1: 11.8
2: 1.0750000000000002
3: 0
4: 0
5: 0
6: 0
7: 0
length: 8
__proto__: Array[0]
1: Array[8]
0: 38.08125
1: 11.8
2: 1.0750000000000002
3: 0
4: 0
5: 0
6: 0
7: 0
length: 8
__proto__: Array[0] 
```

其中是最新的 btotal 数组的所有内容。这使我相信 songarray 中的每个条目仅指向 btotal。那么我如何才能使 songarray 中的每个数组在我附加它时都是 btotal 的值，而不仅仅是一个指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:30:32.230

您可能想要复制数组。

代替

```
songarray.push(btotal); 
```

利用

```
songarray.push(btotal.slice(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:30:48.060

`btotal`在函数范围内定义：

```
var songarray = [];
function whileplaying() {
    var btotal = [];
    var playingSound = soundManager.getSoundById('aSound');
    for (var i=0;i<8;i++) {
        var ttotal = 0;
        for (var n=0;n<32;n++) {
            var eblock = (i*32)+n;
            ttotal = ttotal+(playingSound.eqData.left[eblock]*100);
        }
        ttotal = ttotal/32;
        btotal[i] = ttotal;
    }
    console.log(btotal);
    songarray.push(btotal);
} 
```

# amazon-web-services - Mechanical Turk 中的多个 HIT 或 ExternalQuestion？

> ID：13755030
> 
> 赞同：2
> 
> 时间：2012-12-07T00:21:12.433
> 
> 标签：amazon-web-services, mechanicalturk

首先我必须说我对 MT 完全陌生，如果我的想法完全错误，请原谅我。

我必须为工作人员创建一个任务，他们必须对一个句子进行分类，如果它是垃圾邮件或者它属于某个类别。我每天要分类大约 2500 个句子。

使用 API 执行此操作的最佳方法是什么。我了解如何使用 API 创建 HIT，但我的理解是，我无法创建一个重复的 HIT，一旦对每个句子进行分类，它就会自行改变。我需要创建 2500 个 HIT 吗？

我研究并发现了可以在我的服务器中设置的外部问题，并在每次提交表单时对其进行更改。

在那种情况下，它只会是 1 HIT 吗？这是正确的方法吗？

我对 MT 的动态部分感到困惑。

任何提示、文档（更新）或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:35:46.933

您可能希望创建单独的 HIT。

如果您创建单个外部 HIT（托管在您的服务器上），接受您的 HIT 的 MTurk Worker 将没有资格接受另一个任务（例如分类任务），因为不允许工人多次接受单个 HIT。但是，如果您创建单独的 HIT，则 Worker 可以根据需要获取任意数量的 HIT，这可能是您想要的。

您是正确的，除非它在您自己的服务器上运行，否则您不能动态地自动更改 HIT。

# jquery - 如何使用 twitter-bootstrap 和 popover 修复滚动？

> ID：13755033
> 
> 赞同：22
> 
> 时间：2012-12-07T00:21:40.667
> 
> 标签：jquery, css, twitter-bootstrap, popover

我正在使用 twitter-bootstrap 和弹出框。

我面临以下问题：当用户单击在页面底部打开弹出窗口的链接时，它首先滚动到页面顶部。这需要用户向下滚动才能看到弹出框打开。在 twitter-bootstrap 站点上的演示中，我没有看到这一点，我想知道是否可以就这个问题获得帮助。

```
<div class="span1" style=" width: 60px; ">
    <a href="#" class="example2" rel="popover" data-html="true" data-placement="left" data-content="&lt;a href = '/social/2lPdXV1KO4s/Bhangra indian Jingle Bells balle balle Merry Christmas'&gt;&lt;img src='http://i4.ytimg.com/vi/2lPdXV1KO4s/hqdefault.jpg'&gt;&lt;/a&gt;" data-original-title="Bhangra indian Jingle Bells balle balle Merry Christmas">
        <img src="http://graph.facebook.com/1236870349/picture">
    </a>

    <div class="popover fade left in" style="top: 831px; left: 805.61669921875px; display: block;">
    <div class="arrow"></div>
    <div class="popover-inner">
        <h3 class="popover-title">Bhangra indian Jingle Bells balle balle Merry Christmas</h3>
        <div class="popover-content">
            <p><a href="/social/2lPdXV1KO4s/Bhangra indian Jingle Bells balle balle Merry Christmas"><img src="http://i4.ytimg.com/vi/2lPdXV1KO4s/hqdefault.jpg"></a></p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-07T08:54:24.813

看起来您现在必须阻止链接的默认行为，因为他们添加了在悬停/聚焦时弹出弹出框的选项。现在链接将激活，因为 href 指向“#”，它会将您带到页面顶部。以前在旧版本中，它用于自动阻止此默认设置。

您的 javascript 代码应如下所示：

```
<script>
$("a[rel=popover]")
    .popover()
    .click(function(e) {
        e.preventDefault();
     });
 </script> 
```

像这样的html

```
<a href="#" 
   class="btn btn-large btn-danger" 
   rel="popover" 
   data-content="And here's some amazing content. It's very engaging. right?" 
   data-original-title="A Title">
     Click to toggle popover
 </a> 
```

这是一个有效的 JSfiddle。[http://jsfiddle.net/hajpoj/KPU47/7/](http://jsfiddle.net/hajpoj/KPU47/7/)

**编辑：**或者，您可以使用 div 而不是锚标记，而不必执行整个阻止默认操作。

```
<div 
   class="btn btn-large btn-danger popover-link"
   data-content="And here's some amazing content. It's very engaging. right?"
   data-original-title="A Title">Click to toggle popover
</div>​

<script>
    $(".popover-link").popover();
</script> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-16T18:08:06.450

I have encountered exactly the same issue with the popover and it was enough to replace href="#" with href="javascript://".

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-02T16:30:09.857

只需使用此代码。没有额外的`div`，`class`或任何其他需要。

```
$("a[data-toggle=popover]").popover().click(function(e) {
        e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-06T14:29:20.310

添加 onclick="return false;" 到您的链接；它会阻止浏览器跟随“#”链接：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-01T21:45:39.297

与@hajpoj 所说的非常相似，只是顺序很重要。同样，这是一种更好的方法，因为您可以动态地将`.popover`元素添加到页面，并且它将继续工作。

```
$('body').on('click', 'a[rel=popover]', function(e) {
  e.preventDefault();
  return;
}).popover({
  selector: 'a[rel=popover]'
});
```

```
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac metus nisi. Nulla facilisi. In bibendum ultricies ultrices. Pellentesque sagittis, purus non venenatis mollis, nulla risus fermentum nisi, eget vulputate nulla felis nec mi. Donec rutrum
  nisi sed turpis pulvinar non fermentum risus fringilla. Ut sapien tellus, venenatis sit amet venenatis quis, rhoncus et nulla. Nam augue nisl, consequat vitae convallis sit amet, egestas at ante. Aliquam fringilla viverra porttitor.
</p>
<p>
  Aliquam ornare suscipit posuere. Phasellus ac turpis vitae elit sollicitudin condimentum. Duis massa purus, porttitor sed cursus eu, lacinia at velit. Nam ullamcorper mi ac sapien pretium mollis. Curabitur ante elit, euismod eget elementum condimentum,
  semper a dui. Pellentesque luctus orci elit, ut mattis dolor. Quisque semper nisl eu enim cursus consectetur a in elit. Phasellus faucibus gravida elit vel lobortis. Donec vitae nisi ut libero sollicitudin sodales pretium at purus. Praesent vulputate
  dignissim pulvinar. Nunc sit amet mauris a arcu pulvinar aliquam. Vivamus varius nisl elementum dolor posuere volutpat. Maecenas sed lectus tortor. Aenean sit amet dapibus arcu.
</p>
<p>
  Aliquam posuere sagittis viverra. Aenean velit lorem, vehicula quis viverra vel, porttitor at est. Curabitur at molestie tortor. Quisque at justo eu lacus accumsan aliquam. Ut auctor dui et augue posuere eleifend. Aliquam erat volutpat. Nunc enim enim,
  ullamcorper at scelerisque eu, cursus sit amet lectus. Quisque ac augue erat, vitae tempus diam. Nunc at erat pulvinar lectus vestibulum congue. Vivamus lorem leo, tristique non tempus a, laoreet sit amet ligula. Maecenas tristique vulputate ante, nec
  aliquet enim lobortis vel. Morbi convallis quam sed tellus consectetur hendrerit. Vestibulum vel elit at risus tempor posuere. Vivamus ultricies molestie feugiat. Sed iaculis eros massa. Mauris ac nunc orci.
</p>
<p>
  Aliquam erat volutpat. Pellentesque volutpat iaculis tortor vel hendrerit. Cras sapien orci, fermentum id molestie vel, feugiat in tortor. Quisque vitae felis non tellus volutpat aliquet luctus sit amet felis. Pellentesque gravida tempus turpis, eu lobortis
  eros rutrum eu. In malesuada ultrices leo, eu pretium quam molestie quis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras ac risus eros. Ut posuere lobortis magna, at blandit mauris tristique ut. Suspendisse
  volutpat mollis elit non sagittis. Nam in dictum felis. Maecenas dolor turpis, aliquet vel vestibulum vel, hendrerit non tortor. In pharetra nulla nec arcu rutrum ut commodo tortor facilisis. Curabitur congue feugiat felis vel sollicitudin. Proin in
  mollis dolor. Nulla mattis, turpis vestibulum vehicula blandit, tortor neque posuere diam, sed tempus neque odio id diam.
</p>
<p>
  Vestibulum non quam et elit consequat pellentesque sed at leo. Pellentesque iaculis, purus sit amet cursus imperdiet, orci mi consectetur sapien, sed sodales dui lectus vel enim. Curabitur ac arcu at lectus dictum luctus. Duis et aliquet eros. Suspendisse
  mi mi, porta at elementum pulvinar, pulvinar eu elit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce molestie mollis neque, et elementum odio dapibus sed. Nulla blandit sollicitudin quam semper dictum.
  Pellentesque rutrum rhoncus lacus et facilisis. Sed mattis felis sit amet neque viverra ullamcorper. Fusce volutpat quam scelerisque nisi dignissim vel congue nulla sodales.
</p>

<a href="#" class="btn btn-large btn-danger" rel="popover" data-content="And here's some amazing content. It's very engaging. right?" data-original-title="A Title">
    Click to toggle popover
</a>
```

# c - 如何让输入在某个点被切断或环绕？

> ID：13755035
> 
> 赞同：0
> 
> 时间：2012-12-07T00:21:42.167
> 
> 标签：c, text, console, cmd

好的，所以在使用 stackoverflow 一天之后，我了解到在这个站点上是很有用的 :) 我最终让我的程序正常工作。我可以在命令行中获取无限数量的文本文件并显示它们！所以它看起来像这样：

* * *

CMD 控制台

c:\Users\Username\Desktop> wrapfile.exe hello.txt how.txt。are.txt you.txt random.txt

你好，你今天好吗？我希望你做得很好。这只是一个测试，看看我能在屏幕上放多少。

* * *

现在，我想建立在这个程序上。我将如何让这个新发现的文本环绕？就像，如果你想做到这一点，每 40 个字符左右，文本就会跳到下一行……我们怎么能做这样的事情？

再次感谢！

这是我正在使用的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{

    int l = 1;
        while(l != argc)
{
        FILE *fp; // declaring variable

        fp = fopen(argv[l], "rb");
        l++;

    if (fp != NULL) // checks the return value from fopen
    {
        int i = 1;
        do
        {
            i = fgetc(fp);     // scans the file 
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
    }
    else
    {
        printf("Error.\n");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:35:10.240

好的，我们开始...这看起来与您的有点不同，但这是 ISO/ANSI C 1989 标准。

```
int main(int argc, char **argv)
{
     FILE *fd = NULL;
     char linebuf[40];
     int arg = 1;

     while (arg < argc) {
         fd = fopen(argv[arg], "r");
         if (NULL != fd) {
              /* fgets(char *buf, size_t buflen, FILE *fd): returns NULL on error. */
              while (NULL != fgets(linebuf, sizeof(linebuf), fd)) {
                  printf("%s\n", linebuf);
              }
              fclose(fd);
         } else {
              fprintf(stderr, "Cannot open \"%s\"\n", argv[arg]);
         }
         ++arg;
     }
 } 
```

# javascript - 跨域获取 CSV 文件

> ID：13755038
> 
> 赞同：2
> 
> 时间：2012-12-07T00:22:04.607
> 
> 标签：javascript, ajax, json, jsonp

我似乎无法从 yahoo Finance 获得 CSV 股票文件以“成功”加载 - 完全加载。我已经测试了其他问题的不同回调和建议，但它们似乎都没有工作——它们中的大多数都没有输出任何东西。

```
$(document).ready(function(){
    $.ajax({
        url:"http://finance.yahoo.com/d/quotes.csv?s=XOM&f=sn",
        dataType: 'jsonp',
        success: function(data) {
            alert('good');
        },
        error: function(data) {
            alert(data);
        }
    });
}); 
```

​此代码会发出警报`[object Object]`（“错误”回调），但是可以在网络面板中成功看到 CSV 文件。网络面板中的数据按预期显示为“XOM, Exxon Mobile Corpo”（因此确实加载了）。

我想真正的问题是如何获取我知道已加载的数据。我`alert`现在只想...只是想在页面上看到它。我已经花了无数个小时来摆弄这个，但它不起作用。

这是一个jsfiddle：http: [//jsfiddle.net/V94sQ/3/](http://jsfiddle.net/V94sQ/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:37:38.010

除非它们支持 CORS，否则您不能[从其他域请求 CSV 文件。](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)由于您无法控制雅虎，因此您在那儿很不走运。您将需要使用代理 [从您自己的服务器请求它，后端发出 get 请求] 或可以将其转换为 jsonp 请求的[服务。](http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/)

# python - SSL 证书无效和/或丢失

> ID：13755041
> 
> 赞同：10
> 
> 时间：2012-12-07T00:22:20.207
> 
> 标签：python, google-app-engine, google-cloud-datastore, stocktwits

我正在尝试在 Google App Engine 上构建一个数据存储，以从 StockTwits 为一堆公司收集一些流数据。我基本上是在复制我用 Twitter 做的一个，但它给了我一个 HTTPException: Invalid and/or missing SSL certificate error for a URLs。我更改了 URL 以查看另一家公司，但得到了相同的结果。

这是提取数据的代码：

```
class StreamHandler(webapp2.RequestHandler):

def get(self):

    tickers = ['AAPL','GOOG', 'IBM', 'BAC', 'INTC',
               'DELL', 'C', 'JPM', 'WFM', 'WMT', 
               'AMZN', 'HOT', 'SPG', 'SWY', 'HTSI', 
               'DUK', 'CEG', 'XOM', 'F', 'WFC', 
               'CSCO', 'UAL', 'LUV', 'DAL', 'COST', 'YUM',
               'TLT', 'HYG', 'JNK', 'LQD', 'MSFT',
               'GE', 'LVS', 'MGM', 'TWX', 'DIS', 'CMCSA',
               'TWC', 'ORCL', 'WPO', 'NYT', 'GM', 'JCP', 
               'LNKD', 'OPEN', 'NFLX', 'SBUX', 'GMCR', 
               'SPLS', 'BBY', 'BBBY', 'YHOO', 'MAR', 
               'L', 'LOW', 'HD', 'HOV', 'TOL', 'NVR', 'RYL', 
               'GIS', 'K', 'POST', 'KRFT', 'CHK', 'GGP', 
               'RSE', 'RWT', 'AIG', 'CB', 'BRK.A', 'CAT']

    for i in set(tickers):

        urlst = 'https://api.stocktwits.com/api/2/streams/symbol/'
        tickerstringst = urlst + i + '.json'
        tickurlst = urllib2.Request(tickerstringst)
        sttweets = urllib2.urlopen(tickurlst)
        stcode = sttweets.getcode()

        if stcode == 200:
            stresults = json.load(sttweets, 'utf-8')
            if "messages" in stresults:
                stentries = stresults["messages"]
                for stentry in stentries:
                    sttweet = streamdata()
                    stcreated = stentry['created_at']
                    sttweetid = str(stentry['id'])
                    sttweettxt = stentry['body']
                    sttweet.ticker = i
                    sttweet.created_at = stcreated
                    sttweet.tweet_id = sttweetid
                    sttweet.text = sttweettxt
                    sttweet.source = "StockTwits"
                    sttweet.put() 
```

这是显示错误的日志文件。我在本地 Python 开发服务器上运行它，顺便说一句：

```
WARNING  2012-12-06 23:20:12,993 dev_appserver.py:3655] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-12-06 23:20:13,017 dev_appserver_multiprocess.py:655] Running application dev~jibdantestv2 on port 8088: http://localhost:8088
INFO     2012-12-06 23:20:13,017 dev_appserver_multiprocess.py:657] Admin console is available at: http://localhost:8088/_ah/admin   
INFO     2012-12-06 23:20:54,776 dev_appserver.py:3092] "GET /_ah/admin HTTP/1.1" 302 -
INFO     2012-12-06 23:20:54,953 dev_appserver.py:3092] "GET /_ah/admin/datastore HTTP/1.1" 200 -
INFO     2012-12-06 23:20:55,280 dev_appserver.py:3092] "GET /_ah/admin/images/google.gif HTTP/1.1" 200 -
INFO     2012-12-06 23:21:04,617 dev_appserver.py:3092] "GET /_ah/admin/cron HTTP/1.1" 200 -
INFO     2012-12-06 23:21:04,815 dev_appserver.py:3092] "GET /_ah/admin/images/google.gif HTTP/1.1" 200 -
WARNING  2012-12-06 23:21:07,392 urlfetch_stub.py:448] Stripped prohibited headers from URLFetch request: ['Host']
ERROR    2012-12-06 23:21:09,921 webapp2.py:1553] Invalid and/or missing SSL certificate for URL: https://api.stocktwits.com/api/2/streams/symbol/GIS.json
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
return method(*args, **kwargs)
  File "C:\Users\Tank\Documents\Aptana Studio 3 Workspace\jibdantestv2\main.py", line 38, in get
sttweets = urllib2.urlopen(tickurlst)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
'_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1180, in do_open
r = h.getresponse(buffering=True)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\dist27\httplib.py", line 502, in getresponse
raise HTTPException(str(e))
HTTPException: Invalid and/or missing SSL certificate for URL: https://api.stocktwits.com/api/2/streams/symbol/GIS.json
INFO     2012-12-06 23:21:09,937 dev_appserver.py:3092] "GET /add_data HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T21:26:06.700

我不知道 GAE 为什么会出现问题，但我注意到 api.stocktwits.com 返回的证书与其主题的通用名称（即 ssl2361.cloudflare.com）上的服务器名称不匹配，但仅在其主题备用名称之一（“DNS 名称=*.stocktwits.com”）。可能不支持主题替代名称，或者不适用于此处使用的通配符名称。（这将是一个谷歌错误/缺失的功能。）

我能够通过调用 GAE urlfetch.fetch API 来重现您的问题并找到解决方法。（您可能知道，在 GAE 上，urllib2 被实现为 urlfetch 的包装器。）

从你`urllib2.Request`到你的行开始`jason.load`，替换为：

```
sttweets = urlfetch.fetch(tickerstringst, validate_certificate=False)
stcode = sttweets.status_code

if stcode == 200:
    stresults = json.loads(sttweets.content, 'utf-8') 
```

并且您的错误以及您对真实站点实际采取的任何保证都消失了（尽管流量仍应加密）。

目前`urlfetch.fetch`GAE API 文档说：

> `validate_certificate` 底层实现当前默认为 False，但在不久的将来会默认为 True。

好吧，欢迎来到未来，因为 validate_certificate 现在似乎默认为`True`.

这可能是 GAE urlfetch.fetch 中的一个错误（或缺少的功能，如果您愿意的话），我鼓励您将其报告给 Google。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T18:57:30.433

我对 GAE 不太熟悉，所以这可能是访问 API 端点的问题。此外，可能是您没有使用正确的 Python 库来执行 SSL 请求，但既然您说您对 Twitter 请求使用相同的代码，也许情况并非如此。

您可以尝试在本地或其他服务器上使用相同的代码，而不是 GAE 吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-05T03:21:48.303

我有同样的问题，我已经在函数中设置了`validate_certificate`参数。`False``urlfetch.fetch()`

```
 urlfetch.fetch(url, validate_certificate=false) #validates certificate 
```

这并没有解决问题，我发现它处理`validate_certificate`参数的方式是一个内部错误。如果设置为 ，它会验证它，如果它是`False`，它不会验证证书`True`，或者至少这是它似乎正在做的事情。

```
 urlfetch.fetch(url, validate_certificate=true) #does not validate certificate 
```

# c# - 如何在gridview的编辑模板中绑定下拉列表

> ID：13755045
> 
> 赞同：0
> 
> 时间：2012-12-07T00:22:40.417
> 
> 标签：c#, asp.net, sql

我有一个`gridview`连接到一个`sqldatasource`，我的`select`语句连接两个表，调查和类别。调查中的一列是`Cateogry_ID`指类别表“ID”的主键。我创建的联接是显示类别名称而不是 ID。

```
SELECT 
S.[ID], 
S.[Survey_Name], 
S.[Start_Date], 
S.[End_Date], 
C.[Category_Name], 
S.[Username], 
S.[Picture],
S.[Audience] 
FROM [Survey] S
Inner Join
Category C On S.Category_ID = C.ID 
```

当管理员想要更新调查表并想要更新类别时，我只希望他`category_name`从`category`表中的列中选择名称。我如何在该列的编辑模板中绑定下拉列表并在设计中实现这一点时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:50:41.773

这里有一个将 sql 中的表列绑定到 gridview 的工作示例。[how-to-bind-a-dropdownlist-with-a-edititemtemplate-in-the-gridview](http://chalaki.com/how-to-bind-a-dropdownlist-with-a-edititemtemplate-in-the-gridview/652/)使用您的列名来实现相同的目的。

有个

```
<EditItemTemplate>
<asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDistinctDS"
 DataTextField="state" DataValueField="state" SelectedValue='<%# Bind("your column name") %>' >
 </asp:DropDownList>
</EditItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T09:52:44.250

检查此站点以通过您可以使用所需控件的方式使用编辑模板。[http://msdn.microsoft.com/en-us/library/ms178294.ASPX](http://msdn.microsoft.com/en-us/library/ms178294.ASPX)

# matlab - Matlab .txt 文件分析

> ID：13755048
> 
> 赞同：2
> 
> 时间：2012-12-07T00:23:13.820
> 
> 标签：matlab, text-files, analysis

我正在分析 .txt 文件中的一组文本。该文件有 30 行，每行包含不同的短语，包括文本、数字和符号。

1.  将此文件导入Matlab进行分析的最佳方法是什么（即：文本文件中有多少大写字母或文件中有多少#text短语（分析每行的推文）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:34:27.957

我认为您最好逐行阅读文件[并将](http://www.mathworks.nl/help/matlab/import_export/import-text-data-files-with-low-level-io.html#f5-6402)每一行保存在单元格数组的一个单元格中：

```
fid = fopen(filename);
txtlines = cell(0);
tline = fgetl(fid);
while ischar(tline)
    txtlines{numel(txtlines)+1}=tline;
    tline = fgetl(fid);
end
fclose(fid); 
```

这样您就可以轻松地使用`txtlines{ii}`.

如果您总是需要对整个文本执行操作（即整个文本文件中有多少个 a，而不是每行），您当然可以将这些行放在一个变量中。

在每一行上执行一个操作，可以简单地用[cellfun](http://www.mathworks.nl/help/matlab/ref/cellfun.html)来完成，例如计算大写字母“I”的数量：

```
capI_per_line = cellfun(@(str) numel(strfind(str,'I')),txtlines); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:54:45.033

如果文件大小合理（大多数是 30 行文件），我会立即将其全部读入内存。

```
fid = fopen('saturate.m');
str = fread(fid,inf,'*char')';
fclose(fid); 
```

然后，根据您的需要，您可以对`str`变量使用基本的矩阵运算、字符串运算或正则表达式样式分析。

例如，“我有多少个大写字母？” 是：

```
numIs = sum(str=='I'); 
```

或者，“'someString' 有多少个实例？” 是：

```
numSomeString = length(strfind(str, 'someString')); 
```

# java - Java的内存管理（如何使用数据段？）

> ID：13755049
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:23:16.590
> 
> 标签：java

我有非常大的数据结构，我将其定义为类中的静态字段。我认为它们被推入堆是因为我的代码因该错误消息而失败（超出堆内存）。现在，我想我记得除了堆和堆栈之外还有一个更大的内存段，称为数据。我可以推送该段中的变量吗？如果是这样，这是如何实现的？我不能增加堆大小，因为我的程序将被其他人使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:28:01.127

您真正可能的唯一意思是*磁盘*-实际上是将内容写入文件。

# sql - 将具有空字段的行添加到另一行

> ID：13755055
> 
> 赞同：5
> 
> 时间：2012-12-07T00:23:51.207
> 
> 标签：sql, sql-server-2008

我的 SQL Server 数据库中有一个表，如下所示：

日期 小时 名称
11-01 3 a
11-01 4 b
11-01 6 null
12-01 2 a
12-01 3 c
12-01 1 null

我想将每个月的“null”列中的小时数添加到“a”列中。所以它看起来像： Date Hours Name
11-01 9 a
11-01 4 b
12-01 3 a
12-01 3 c

我能够让它工作的唯一方法是在选择之前修改表以防止出现空值。但我希望能够在不修改数据库的情况下做到这一点。

解决此问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:25:47.183

这将为您完成 - 有条件地按名称或“a”（当名称为空时）分组，并从那里获取小时总和。

```
SELECT Date, SUM(Hours) AS Hours, MAX(Name) AS Name
FROM TableName
GROUP BY (CASE WHEN Name IS NULL THEN 'a' ELSE Name END) 
```

# c# - 设置调度程序以优先队列工作

> ID：13755056
> 
> 赞同：3
> 
> 时间：2012-12-07T00:24:07.027
> 
> 标签：c#, .net-4.0, dispatcher

我想使用 Dispatcher 创建一个线程，然后从另一个线程使用该调度程序对具有不同优先级的工作进行排队。IE

```
var dispatcher = GetNewThreadDispatcher();
dispatcher.BeginInvoke(longRunningTask1, DispatcherPriority.Normal);
dispatcher.BeginInvoke(longRunningTask2, DispatcherPriority.Background);
dispatcher.BeginInvoke(longRunningTask3, DispatcherPriority.Normal); 
```

在这种情况下，后台线程将执行`longRunningTask1`, 然后`longRunningTask2`, `longRunningTask3`。我很难创建一个 clean `GetNewThreadDispatcher()`，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:01:33.743

您可以尝试创建新的后台线程（[http://msdn.microsoft.com/en-us/library/7a2f3ay4(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/7a2f3ay4(v=vs.90).aspx)）并获得`Dispatcher`它：

```
Dispatcher dispatcher = Dispatcher.FromThread(workerThread); 
```

一些编辑：您需要执行
`Dispatcher dispatcher=Dispatcher.CurrentDispatcher`or `Dispatcher.Run`inside `OnThreadStart`。但有趣的是：执行后

```
workerThread.Start();
Dispatcher dispatcher = Dispatcher.FromThread(workerThread); 
```

`dispatcher`是`null`但在执行之后

```
workerThread.Start();
Console.WriteLine("main thread: Starting worker thread...");
Dispatcher dispatcher = Dispatcher.FromThread(workerThread); 
```

`dispatcher`正在填充

添加：

```
 static void OnThreadStart()
    {
       Dispatcher.Run();
    }

    private Dispatcher GetNewThreadDispatcher()
    {
        Thread workerThread=null;
        try
        {
           workerThread = new Thread(OnThreadStart);
           workerThread.IsBackground = true;
           workerThread.Start();
           int waitingCiclesCount = 100;
           int cicleIndex = 0;
           int sleepTimeInMiliseconds = 100;
           Dispatcher dispatcher = null;
           while (cicleIndex < waitingCiclesCount)
           {
               dispatcher = Dispatcher.FromThread(workerThread);
               if (dispatcher!=null)
                   break;
               Thread.Sleep(sleepTimeInMiliseconds);
               cicleIndex = cicleIndex + 1;

           }
           if (dispatcher==null)
           {
               workerThread.Abort();
               return null;
           }
           Console.WriteLine(String.Format("thread with id={0} started", workerThread.ManagedThreadId));
           return dispatcher;
        }
        catch (Exception)
        {
            if (workerThread!=null)
                workerThread.Abort();
            return null;
        }
    }

    public MainWindow()
    {
        InitializeComponent();

        TestWorker worker=new TestWorker();
        Dispatcher dispatcher1 = GetNewThreadDispatcher();
        if(dispatcher1!=null)
            dispatcher1.BeginInvoke(new TestDelegate(worker.DoWork1), DispatcherPriority.Normal);
        else
        {
            MessageBox.Show("Cant create dispatcher1");
        }
        Dispatcher dispatcher2 = GetNewThreadDispatcher();
        if (dispatcher2!=null)
            dispatcher2.BeginInvoke(new TestDelegate(worker.DoWork2), DispatcherPriority.Normal);
        else
        {
            MessageBox.Show("Cant create dispatcher2");
        }
    } 
```

此代码在我的测试 wpf 应用程序中工作，但我不是多线程专家。可能有人会纠正我或在此回复中添加一些信息。

# facebook - Facebook 登录：Javascript 和 PHP 示例

> ID：13755057
> 
> 赞同：0
> 
> 时间：2012-12-07T00:24:06.737
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

我希望有人有一个使用 Facebook Javascript SDK 登录的当前示例，然后在其余时间使用 te PHP SDK 处理会话。

我一直在谷歌搜索并在网上搜索一个准确、有效的示例，但它们似乎都有一些限制或错误。

我发现使用 JS 登录后，PHP 似乎经常找不到会话。我可以看到 FBRS cookie 已设置并且始终处于活动状态，但这似乎无济于事。

真的用这个把我的头发扯掉了......

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:40:29.943

似乎我所有的会话问题都是因为这个错误：developers.facebook.com/bugs/404450666302585

我已经更新到最新的 PHP-SDK 版本，一切似乎都很好。

# search - 如何使用 ElasticSearch 设计搜索用户和好友？

> ID：13755063
> 
> 赞同：2
> 
> 时间：2012-12-07T00:24:56.373
> 
> 标签：search, solr, lucene, elasticsearch

在我们的应用程序中，我们有用户，用户可以有朋友（想想 Facebook，关系是双向的）。我们希望能够：

1.  按名称或用户名在站点范围内搜索用户

2.  允许每个用户按姓名或用户名搜索她的朋友

设计这个的最佳方法是什么，请记住：

1.  一个用户最多可以有 50,000 个朋友。

2.  用户可以随时更改他们的姓名和用户名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:56:49.827

我将建议另一种我认为可以帮助您解决此问题的技术。您可以查看[Neo4j](http://www.neo4j.org/)（图形数据库），它将帮助您轻松建立关系（用户朋友）和遍历图形。

您还可以将 Lucene 作为单独的索引引擎与 Neo4j 一起使用并进行全文搜索。[在这里检查。](http://docs.neo4j.org/chunked/snapshot/indexing.html)

此外，您可以在下面找到一个可能会有所帮助的示例。

*   [Lucene 与 Neo4j 的集成](http://sujitpal.blogspot.com/2011/07/homegrown-lucene-integration-with-neo4j.html)
*   [Neo4j 的 Lucene 全文索引](http://romikoderbynew.com/2011/08/28/lucene-full-text-indexing-with-neo4j/)

PS：我与 Neo4j 没有任何关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:08:21.367

有如下文件：

```
type:friendship
parties_name:[mark zuckerburg, bill gates]
parties_id:[1, 753634] (what if many people are named bill gates) 
```

因此，您的网络中的每个友谊都会有一个这样的行，并且当我们的特定`mark zuckerburg`更新他的友谊（和姓名）时，`parties_id:1`必须重新索引所有行。

# jsp - 如何在 JSF 中使用请求属性

> ID：13755069
> 
> 赞同：1
> 
> 时间：2012-12-07T00:25:58.880
> 
> 标签：jsp, jsf, jsf-2

我在过滤器中为请求添加了一个属性。我们在 jsp 页面中使用 JSF 标签。

我想在 jsp 中获取请求属性，因为我使用的 JSF 标签脚本不起作用。

任何人都可以帮助在带有 JSF 标签的 JSP 页面中直接使用什么标签来获取请求属性。 **我不想在托管 bean 中设置它。**

过滤代码：httpReq.setAttribute("xyz", "name");

我想在 JSF 页面中检索这个值。请帮助分享您的想法。

-基兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:20:01.053

它只是在 EL 范围内通过属性名称以通常的方式可用，如`#{xyz}`.

请注意，JSF 将请求范围内的托管 bean 也存储为请求属性！

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# c# - Application.Run 无法使用变量运行？

> ID：13755070
> 
> 赞同：0
> 
> 时间：2012-12-07T00:26:00.943
> 
> 标签：c#, .net, winforms, user-interface

我构建了一个 C# Windows 窗体应用程序。我的主模块有问题。（默认命名为“Program.cs”）

当我尝试编译并运行时：

```
MessageForm f = new MessageForm("Main");
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(f); 
```

它失败了，（Windows 应用程序崩溃消息），但是当：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new MessageForm("Main")); 
```

它运行良好。

*   注意最后一条命令（Application.run(..)）；它导致了这个问题。

为什么它在“无变量”运行时不使用变量运行？（对不起，我不太知道怎么称呼它）。

为什么会这样？问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:32:17.077

在创建任何窗口之前，您必须调用[Application.SetCompatibleTextRenderingDefault 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.setcompatibletextrenderingdefault.aspx)`InvalidOperationException`如果在创建窗口后调用它将抛出。这就是您的应用程序崩溃的原因。

如果您想以这种方式编写代码，只需在调用后移动您的表单变量。

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
MessageForm f = new MessageForm("Main");
Application.Run(f); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T00:32:42.693

You're enabling visual styles and compatible text rendering after the first form is created. Try to change the order of the calls like this:

```
 Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    MessageForm f = new MessageForm("Main");
    Application.Run(f); 
```

In other words: create the form after calling methods that affect the global behavior of the application...

# c++ - Win32 窗口中的控件（通过 C++ 的 WinAPI）？

> ID：13755075
> 
> 赞同：0
> 
> 时间：2012-12-07T00:26:42.010
> 
> 标签：c++, winapi, mingw

好的，我有一个创建复选框的代码，但是每当我点击它时：它不会检查。我确定我需要在 中添加一些`case WM_COMMAND:`内容，但我不知道如何在单击复选框时选中它。对于三态复选框，我也需要这个。以及如何使单选按钮相互兼容？（我的意思是当您单击一个时，它会被选中，然后您之前单击的单选按钮未被选中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:18:11.347

您可以使用以下代码片段创建 3 个状态复选框。

```
#define BTN_3STATECHECKBOX           5
#define BTN_AUTO3STATECHECKBOX       6
CreateButton(BS_3STATE, _T("3 State CheckBox"), hWnd, 50, 180, 200, 24, BTN_3STATECHECKBOX);

or 
CreateButton(BS_AUTO3STATE, _T("Auto 3 State CheckBox"), hWnd, 50, 210, 200, 24, ... 
```

# javascript - Slickgrid 自定义 MultiSelectEditor 仅适用于 FireFox 17.0.1

> ID：13755077
> 
> 赞同：1
> 
> 时间：2012-12-07T00:26:52.157
> 
> 标签：javascript, slickgrid

我扩展了 SlickGrid 的编辑器，你支持 html Select 和 MultiSelect。这是 MultiSelectEditor 源代码：

```
function PickListEditor(args) {

      var $select;
      var defaultValue ;
      var scope = this;

      this.init = function() {
          console.log("PickListEditor...  SelectValues");
          console.log(args.column.columnSelectItems);
          option_str = ""
          var length =  args.column.columnSelectItems.length;
          for(var i = 0; i< length ; i++){
              var selectOption = args.column.columnSelectItems[i];
              if(selectOption["disable"]==true) disable = "disable";
              option_str += "<OPTION value='"+selectOption["stringValue"]+"'>"+selectOption["label"]+"</OPTION>";
          }
          $select = $("<select tabIndex='0' multiple='multiple'>"+ option_str +"</select>");
          console.log(args.container);
          $select.appendTo(args.container);
          $(args.container).append($select[0]); 
          console.log($select);
          console.log($select[0]);
          $select.focus();
      };

      this.destroy = function() {
          $select.remove();
      };

      this.focus = function() {
          $select.focus();
      };

      this.loadValue = function(item) {
          console.log("loaded Item  : ");
          console.log(item);
          defaultValue = item[args.column.field];
          $select.val(defaultValue);
      };

      this.serializeValue = function() {
          if(args.column.columnSelectItems){
            return $select.val();
          }else{
            return "";
          }
      };

      this.applyValue = function(item,state) {
          item[args.column.field] = state;
      };

      this.isValueChanged = function() {
          return ($select.val() != defaultValue);
      };

      this.validate = function() {
          return {
              valid: true,
              msg: null
          };
      };

      this.init();
} 
```

多选在 Firefox 17.0 上工作正常。但是在 chrome 23.0.1271.95 或 safari 6.0.2 上，我显示了多选，但我无法选择项目。

有人有什么想法吗？

干杯，鲍里斯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-10-10T12:59:57.907

试试这个： [![示例图片](../Images/1a5f62c014b6cbb094485e4f94dcf2d6.png)](https://i.stack.imgur.com/VUiZD.png)

```
function SelectsEditor(args) {
    var $select;
    var defaultValue;
    var scope = this;

    this.init = function () {
        var option_str = "";
        for (key in args.column.options) {
            option_str += "<OPTION value='" + key + "'>" + args.column.options[key] + "</OPTION>";
        }
        $select = $("<SELECT tabIndex='0' class='editor-select' multiple='multiple'>" + option_str + "</SELECT>");
        $select.appendTo(args.container);
        $select.focus();
    };

    this.destroy = function () {
        $select.remove();
    };

    this.focus = function () {
        $select.focus();
    };

    this.loadValue = function (item) {
        defaultValue = item[args.column.field];
        $select.val(defaultValue);
    };

    this.serializeValue = function () {
        return $select.val();
    };

    this.applyValue = function (item, state) {
        item[args.column.field] = state;
    };

    this.isValueChanged = function () {
        return ($select.val() != defaultValue);
    };

    this.validate = function () {
        return {
            valid: true,
            msg: null
        };
    };

    this.init();
} 
```

# php - UPDATE sql 表问题

> ID：13755078
> 
> 赞同：0
> 
> 时间：2012-12-07T00:27:01.633
> 
> 标签：php, mysql, sql

我对这个 sql 有一些问题

```
UPDATE `rate` FROM `dv_post` SET `rate`=1 WHERE `id` = 9 
```

响应 ：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的
> “FROM `dv_post`SET `rate`=1 WHERE `id`= 9”附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:28:59.807

更新语句没有`FROM`子句

```
UPDATE `dv_post` SET `rate`=1 WHERE `id` = 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:29:13.260

您的更新查询的语法不正确，不应包含`FROM`.

试试这个：

```
UPDATE `dv_post` SET `rate`=1 WHERE `id` = 9 
```

# node.js - 无架构驱动程序选项？

> ID：13755081
> 
> 赞同：2
> 
> 时间：2012-12-07T00:27:35.643
> 
> 标签：node.js, mongodb

所以我有点矛盾。我想要一个高质量的驱动程序/库来访问它也是无模式的，但似乎 Nodejs 唯一活跃的 MongoDB 库是 Mongoose。

现在，Mongoose 很棒，但又一次......它是一个基于模式的库，我不想在这个项目中使用 Mongo 的库。

所以，我发现符合我的标准（不是猫鼬）的选项如下..

*   MongoDB 原生
    *   可能是使用最广泛的选项，也是其他库的基础，但不是最友好的。我认为，深度嵌套的回调很快就会变得丑陋。
*   蒙哥皮肤
    *   这是一个不错的选择，它似乎允许大量访问普通的 Mongo 构造，但同时它的文档记录很差，而且不是很活跃。
*   蒙
    *   我个人的偏好..但它无法访问 Mongo 的大部分构造，并且该项目似乎几乎死了..它基本上一年内没有任何活动。
*   蒙古人
    *   可能是三个包装器之间最近活跃的一个，但它缺乏 GridFS 支持*（我看到了）*。

我还有其他选择吗？

**编辑**：将其他库添加到列表中..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T01:15:14.140

我建议你看看：

1.  直接使用本机 node.js 库[mongodb-native](http://mongodb.github.com/node-mongodb-native/index.html)（所有这些都基于此）。
2.  [mongojs](https://github.com/gett/mongojs)，它对原生库进行了最低限度的封装，以尽可能地模拟官方的 mongodb API。

# powershell - 如何安装 PSCX Powershell 模块？

> ID：13755082
> 
> 赞同：15
> 
> 时间：2012-12-07T00:27:38.600
> 
> 标签：powershell, powershell-2.0

我正在运行安装了 PowerShell 2 的 Windows 7。

我已经从这里下载了 2.1 版 - [http://pscx.codeplex.com/releases](http://pscx.codeplex.com/releases)

发行说明说

*   解封 zip 文件 - {我做了}
*   将 ZIP 文件的内容提取到 $env:Home\Documents\WindowsPowerShell\Modules 文件夹

我不确定 $env:Home 是什么，经过一番搜索确定发行说明需要一个名为 Home 的环境变量，该变量在我的机器上不存在。

`~`多一点搜索说使用我机器上定义的内容。所以在 PS 提示符下我运行`cd ~`

我机器上的哪个导致了网络驱动器`U:`

我创建了以下目录`U:\Documents\WindowsPowerShell\Modules`并将提取的 Pscx-2.1.0 复制到 Modules 文件夹中。打开 PowerShell 提示符并键入`Get-Module -ListAvailable`. 这并没有在结果中给我 Pscx。

上面的步骤实际上给了我这个文件夹树`U:\Documents\WindowsPowerShell\Modules\Pscx-2.1.0\Pscx-2.1.0`

所以我将文件复制了一个级别并再次`U:\Documents\WindowsPowerShell\Modules\Pscx-2.1.0\`尝试并尝试了`U:\Documents\WindowsPowerShell\Modules\Pscx\`

我也用这条路径尝试了上述所有方法`U:\WindowsPowerShell\Modules\Pscx-2.1.0\`

我猜模块实际上不应该在这个目录中，所以更多的搜索会导致这个命令。`(Get-ChildItem Env:\PSModulePath).Value`

这给出了以下结果

`C:\Users\my.name\Documents\WindowsPowerShell\Modules;C:\Windows\system32\WindowsPowerShell\v1.0\Modules\`

所以我把 Pscx-2.1.0 文件夹复制到这里`C:\Users\my.name\Documents\WindowsPowerShell\Modules\Pscx-2.1.0`

仍然没有运气。

我错过了什么步骤？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T00:42:32.243

我实际上并没有完全完成上述问题的最后一步，结果证明是答案。

这是完整性的答案

*   取消阻止您下载的 zip 文件
*   提取 zip 文件 - 这可能会给出一个文件夹结构`Pscx-2.1.0/Pscx-2.1.0/{lots of files}`
*   将子文件夹重命名为 Pscx - 即 -`Pscx-2.1.0/Pscx/{lots of files}`
*   在 Powershell 提示符下运行`(Get-ChildItem Env:\PSModulePath).Value`并记下模块文件夹位置。
*   将**子** `Pscx folder`项复制到上面给出的 Modules 文件夹位置。
*   在 Powershell 提示符下运行 Get-Module -ListAvailable 以查看可用的 Pscx 模块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-06T01:43:43.687

在**PowerShell 5.0**中，您可以执行以下操作：

```
Find-Package pscx | ? ProviderName -eq PSModule | Install-Package -Force 
```

如果已经安装了旧版本，该`-Force`参数将导致它升级。

在**PowerShell 5.1**中，您需要：

```
Find-Package pscx | ? ProviderName -eq PowerShellGet | Install-Package -Force 
```

或者

```
Find-Package pscx -ProviderName PowerShellGet | Install-Package -Force 
```

要不就

```
Install-Package pscx -Force 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T23:21:22.340

赶紧跑

```
choco install pscx 
```

请参阅[chocolatey.org](http://chocolatey.org)以获取获取`choco`命令的单线。

请记住，在运行它们的命令之前，您可能仍然需要在脚本中调用它：

```
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser #allows scripts to run from the interwebs, such as pcsx 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-21T21:06:06.910

> **更新**：看起来 PsGet 不再维护，但源代码仍然在 github 上可用。

您还可以使用[**PsGet**](https://github.com/psget/psget)轻松搜索和安装 PowerShell 模块。

您可以通过浏览所有模块来检查哪些模块已添加到 PsGet：

```
> Get-PsGetModuleInfo * 
```

或者专门找到这个：

```
> Get-PsGetModuleInfo pscx 
```

然后您可以根据该信息进行安装：

```
> Install-Module pscx 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T11:00:44.240

在花了很多时间在这里和那里搜索之后，我发现这个博客有非常明确的步骤来解决。试试看可能对你有帮助..

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/07/18/install-the-pscx-and-80-new-cmdlets-to-ease-powershell-use.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/07/18/install-the-pscx-and-80-new-cmdlets-to-ease-powershell-use.aspx)

# c - 调用 opendir 和 readdir 正在改变我的 char 数组

> ID：13755085
> 
> 赞同：0
> 
> 时间：2012-12-07T00:27:55.083
> 
> 标签：c, readdir

这是我到目前为止的代码，它找到了根的位置，但是当我添加该行时：

```
printf("        name: %s\n", readdir(opendir(cur_spot))->d_name); 
```

它改变了 cur_spot 并向其添加了奇怪的字符（文件名：.~？）是它打印的内容。知道为什么会这样吗？

```
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
    struct stat file_stats;
    struct stat parent_stats;
    struct dirent temp_dir;

    char cwd_name[256]; //directory name
    char cur_spot[256]; //current directory spot

    cur_spot[0] = '.';
    stat(cur_spot, &file_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", file_stats.st_ino);

    strcat(cur_spot, ".");
    stat(cur_spot, &parent_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", parent_stats.st_ino);

    while(file_stats.st_ino != parent_stats.st_ino) {
        printf("not at root yet\n\n");

        stat(cur_spot, &file_stats);
        printf("    current child\n");
        printf("        inode: %ld\n", file_stats.st_ino);
        printf("        name: %s\n", readdir(opendir(cur_spot))->d_name);
        strcat(cur_spot, "/..");
        stat(cur_spot, &parent_stats);
        printf("    current parent\n");
        printf("        inode: %ld\n", parent_stats.st_ino);
    }
        printf("at root\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:05:47.670

这在 GCC 上对我来说很好：

```
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
    struct stat file_stats;
    struct stat parent_stats;
    struct dirent temp_dir;
    DIR *dirp;

    char cwd_name[256]; //directory name
    char cur_spot[256]; //current directory spot

    strcpy(cur_spot,".");  // <------------ changed
    stat(cur_spot, &file_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", file_stats.st_ino);

    strcat(cur_spot, ".");
    stat(cur_spot, &parent_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", parent_stats.st_ino);

    while(file_stats.st_ino != parent_stats.st_ino) {
        printf("not at root yet\n\n");

        stat(cur_spot, &file_stats);
        printf("    current child\n");
        printf("        inode: %ld\n", file_stats.st_ino);
        dirp=opendir(cur_spot); // <----------------added
        printf("        name: %s\n", readdir(dirp)->d_name);  // <----changed
        closedir(dirp); // <------------------------added
        strcat(cur_spot, "/..");
        stat(cur_spot, &parent_stats);
        printf("    current parent\n");
        printf("        inode: %ld\n", parent_stats.st_ino);
    }
        printf("at root\n");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:09:50.867

您应该在字符数组的末尾添加一个 NULL 字符。

错误的：

```
cur_spot[0] = '.'; 
```

对：

```
cur_spot[0] = '.';
cur_spot[1] = '\0'; 
```

NULL 字符终止一个字符串。默认情况下，字符串可能会或可能不会初始化为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:09:51.163

你在一个循环中做了一堆“opendir”，但我没有看到“closedir”的痕迹。你应该受到惩罚...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:46:52.367

这超出了您最初问题的范围，因此我将其作为第一个问题的单独答案添加。正如我在我的第一个答案下的评论中所说，如果您要打印目录中所有文件的文件名，您只需继续调用 readdir() 直到某个终止条件，从阅读手册页来看，这只是一个 NULL 返回价值。顺便说一句，如果您的手册页显示`READDIR(2)`or `This is not the function you are interested in`，您真正想要做的是查看 readdir 上的第 3 节手册页，您可以使用`man -s 3 readdir`.

无论如何，我修改了我的第一个答案中的代码来做我认为你想要的：

```
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
    struct stat file_stats;
    struct stat parent_stats;
    struct dirent temp_dir;
    DIR *dirp;
    struct dirent* dent;

    char cwd_name[256]; //directory name
    char cur_spot[256]; //current directory spot

    strcpy(cur_spot,".");          // <------------- changed
    stat(cur_spot, &file_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", file_stats.st_ino);

    strcat(cur_spot, ".");
    stat(cur_spot, &parent_stats);
    printf("filename: %s\n", cur_spot);
    printf(" inode: %ld\n", parent_stats.st_ino);

    while(file_stats.st_ino != parent_stats.st_ino) {
        printf("not at root yet\n\n");

        stat(cur_spot, &file_stats);
        printf("    current child\n");
        printf("        inode: %ld\n", file_stats.st_ino);
        dirp=opendir(cur_spot);    // <------------- added
        do {                       // <------------- NEW
            dent = readdir(dirp);  // <------------- NEW
            if (dent)              // <------------- NEW
                printf("        name: %s\n", dent->d_name);
        } while (dent);            // <------------- NEW
        closedir(dirp);            // <------------- added
        strcat(cur_spot, "/..");
        stat(cur_spot, &parent_stats);
        printf("    current parent\n");
        printf("        inode: %ld\n", parent_stats.st_ino);
    }
        printf("at root\n");

    return 0;
} 
```

# php - 如何使用自动登录使 foreach 回显 ftp？

> ID：13755092
> 
> 赞同：1
> 
> 时间：2012-12-07T00:28:23.273
> 
> 标签：php, ftp, foreach

我有一个脚本，允许我使用我的游戏服务器上的实时 php 脚本将我的游戏内聊天从使命召唤 4 移植到一个小窗口，这样我的会员和访问者就可以从我的网站实时看到游戏内聊天。

唯一的问题是我的服务器被 ftp 锁定（tcadmin 所以无法直接获取文件的 url）所以我想要一种方法来读取目录中的 mp_games.log 文件

我认为唯一的方法是通过 ftp 连接我猜，但它需要自动登录

脚本是：（这只是我遇到问题的脚本的一部分）

```
 <?php
  $maxMessages = 40;
  $messageArr  = array();

  foreach(file('file:///home/serverexample/main/games_mp.log') AS $value) {
    if(strstr($value,'say;')) {
      $messageArr[]=$value;
    }
  } 
```

我需要帮助的是让 foreach 转到我网站中的 ftp 到可以读取 game_mp.log 的特定路径。

我在想类似于： [ftp://user:pass@ftp.domain.com/serverexample/main/games_mp.log](ftp://user:pass@ftp.domain.com/serverexample/main/games_mp.log)

你能告诉我如何修改脚本以便可能将其下载到本地地址的目录中，但它需要不断下载，我担心这可能会导致延迟。

如果可能的话，我想的另一种方法是直接读取 game_mp.log 文件

games_mp.log 可读为 txt .. 并且总是由服务器更新 .. 有什么方法可以使 foreach（文件被 ftp 替换，所以它直接从 ftp 服务器获取信息？

最好能够让脚本读取文件而无需下载它..

如果没有其他方法，只能下载它，你能指导我完成吗？

非常感谢希望我清楚自己需要什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:38:26.647

你可以`login`和`download`文件一起用PHP的FTP功能，看看手册列表 [http://www.php.net/ftp](http://www.php.net/ftp)

另一种（不推荐）是 WGET：[http ://www.cyberciti.biz/faq/wget-command-with-username-password/](http://www.cyberciti.biz/faq/wget-command-with-username-password/)

# java - 为什么在 Collections 中使用比较器而不是 equals()？

> ID：13755094
> 
> 赞同：2
> 
> 时间：2012-12-07T00:28:26.953
> 
> 标签：java, sorting, comparator

有一个 Java bean Car 可能包含两个值：型号和价格。

现在假设我以这种方式覆盖 equals() 和 hashcode() 仅检查模型：

```
public boolean equals(Object o) {            
    return this.model.equals(o.model);
}

public int hashCode() {
    return model.hashCode();
} 
```

这允许我以这种方式检查数组列表是否已经包含相同型号的 Car 项目（并且与价格无关）：

```
List<Car> car = new ArrayList<Car>();

car.add(new Car("carA",100f));
car.add(new Car("carB",101f));
car.add(new Car("carC",110f));

System.out.println(a.contains(new Car("carB",111f))); 
```

它返回 TRUE。没关系，因为汽车已经存在！

但是现在我决定 ArrayList 不好，因为我想维护有序的项目，所以我用 TreeSet 替换它是这样的：

```
Set<Car> car = new TreeSet<Car>(new Comparator<Car>() {
@Override 
public int compare(Car car1, Car car2) {

    int compPrice = - Float.compare(car1.getPrice(), car2.getPrice());

    if (compPrice > 0 || compPrice < 0)
        return compPrice;
    else
        return car1.getModel().compareTo(car2.getModel()); 
```

}});

```
car.add(new Car("carA",100f));
car.add(new Car("carB",101f));
car.add(new Car("carC",110f));

System.out.println(a.contains(new Car("carB",111f))); 
```

但是现在有一个问题，它返回 FALSE ......为什么？

似乎当我使用 arrayList 调用 contains() 时，调用了方法 equals()。但是，当我使用带有比较器的 TreeSet 调用 contains() 时，似乎使用了比较器。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:09:45.100

`TreeSet`形成一棵根据自然（或非）顺序保存元素的二叉树，因此为了快速搜索一个特定元素是集合，`TreeSet`使用`Comparable`or`Comparator`代替`equals()`.

正如[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html) JavaDoc 所说：

> 请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以了解与 equals 一致的精确定义。）这是因为 Set 接口是根据 equals 操作定义的，但 TreeSet 实例使用其 compareTo（或 compare）方法执行所有元素比较，所以两个从集合的角度来看，这种方法认为相等的元素是相等的。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。

我们可以找到与 HashCode/Equals 合约的相似之处：

*如果`equals()`返回`true`，`hashcode()` **也必须**返回 true 才能在搜索期间找到。*

同样与`TreeSet`：

*如果`contains()`（使用`Comparator`or `Comparable`）返回`true`，为了与**一致**，`equals()` **也必须**返回。`true`**`equals()`***

 ****因此：**方法中使用的字段`TreeSet.equals()`必须与您的实现中使用的字段完全相同（不多也不少）`Comparator`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T00:38:42.093

A`TreeSet`是隐式排序的，它使用 a`Comparator`进行排序。该`equals()`方法只能告诉您两个对象是否相同或不同，而不能告诉您它们应该如何排序以进行排序。只有一个`Comparator`可以做到。

更重要的是， a`TreeSet`还使用比较进行**搜索**。这是基于树的地图/集的全部要点。调用该`contains()`方法时，将执行二进制搜索，并根据比较器的定义方式找到或未找到目标。比较器不仅定义了逻辑顺序，还定义了逻辑标识。如果您依赖于由不一致的`equals()`实现定义的逻辑标识，那么可能会出现混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:54:32.847

不同行为的原因是，您在 compare 方法中考虑了 price 成员，但在 equals 中忽略了它。

```
new Car("carB",101f)     // what you add to the list   
new Car("carB",111f)     // what you are looking for 
```

两个实例都是“相等的”（对不起......），因为它们的模型成员是相等的（并且在该测试之后实现停止）。但是，它们“比较”是不同的，因为*该*实现还检查了价格成员。**

# objective-c - UITableview 部分（Xcode 4.5 和 iOS6）

> ID：13755095
> 
> 赞同：0
> 
> 时间：2012-12-07T00:28:31.447
> 
> 标签：objective-c, ios, uitableview

我正在尝试创建一个包含 2 个部分的 UITableview。第一部分应仅包含一行，第二部分应包含 6 行。如何定义部分的数量？从情节提要中，我可以定义我的表格视图样式是分组的。

任何帮助将不胜感激。

非常感谢，马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:33:04.570

您在运行时提供所有这些信息，通常来自视图控制器。您需要将视图控制器设置为表视图的“数据源”，然后实现此处记录的 UITableViewDataSource 协议：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

确定呈现多少个部分的具体方法是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:35:25.693

您需要实现`UITableViewDataSource`协议以使用部分和行填充表。[在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)查看 Apple 文档

[检查我为这篇文章](https://stackoverflow.com/a/10156094/1064869)提交的解决方案；它应该为您指明正确的方向。

# c++ - C++ 如何找到数组的模式？

> ID：13755097
> 
> 赞同：1
> 
> 时间：2012-12-07T00:28:37.937
> 
> 标签：c++, arrays, mode

我必须编写一个函数来查找类值数组的模式。它有两个参数：值数组和一个等于数组中有效值数量的变量。这听起来很容易，但经过一周的尝试后，我的代码似乎无法正常工作。

这个想法是获取一维数组并将其存储在二维数组中，其中第一个值是值数组中的一个值，第二个是该值出现的次数。到目前为止，它的工作并不完全正确，或者根本没有。这个问题感觉应该很明显，但我已经被难住了一个星期。

我正在使用包含以下内容的数组对其进行测试：9.0、4.0、4.0、4.0、5.0、5.0、6.0、6.0、6.0、7.0、1.0、9.0、10.0

代码：

```
void mode(double x[], const int n)
{
    int j, k, m=1, p, numofmodes=0;
    bool match=false, breaker;
    double y[100][2]={0}, max=0;

    y[0][0] = x[0];
    y[0][1] = 1;

    for(j=1; j<=(n-1); j++)  //
    {
        for (k=0; k<=(m-1); k++)
            if (x[j] == y[k][0])
            {
                y[k][1]++;
                match = true;
            }

        if (match == false)
        {
            y[m][0] = x[j];
            y[m][1] = 1;
            m++;
        }
        match = false;
    }

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] > max)
            max = y[j][1];
    }

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] = max)
            numofmodes++;
    }

    for(j=0; j<=(n-1); j++)
    {
        cout<<y[j][0]<<"    "<<y[j][1]<<endl;
    }

    cout<<"There are "<<numofmodes<< " modes in the data set."<<endl;

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] = max)
        {
            cout<<y[j][0]<<" appears "<<max<<" times."<<endl;
        }
    }

} 
```

输出：9 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 0 2 数据集中有 13 种模式。9 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。0 出现 2 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:23:07.723

解决它。我在这里包含了它编写的主要功能。

Input1.txt: 9.0, 4.0, 4.0, 4.0, 4.0, 4.0, 5.0, 5.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 7.0, 1.0, 9.0, 10.0, 4.0, -9999

`=`我在其中一个 for 循环中更改了一些`==`并修复了一个数学错误，现在我看起来确实是……黄金。Aurum est potestas。:D

```
#include <iostream>
#include <cstdlib>
#include <fstream>
void mode(double x[], const int n);
using namespace std;

int main()
{
        const int N = 100;
        double x[N];
        void mode (double x[],int n);
        int n;
        ifstream inFile;

        inFile.open("input1.txt");
        n=0;
        inFile>>x[n];
        while (x[n]!=-9999)
        {
            n++;
            inFile >>x[n];
        }
        inFile.close( );
        mode(x,n);

        inFile.open("input2.txt");
        n=0;
        inFile >>x[n];
        while (x[n]!=-9999)
        {
            n++;
            inFile >>x[n];
        }
        inFile.close( );
        mode(x,n);

        inFile.open("input3.txt");
        n=0;
        inFile >>x[n];
        while (x[n]!=-9999)
        {
            n++;
            inFile >>x[n];
        }
        inFile.close( );
        mode(x,n);

        system ("PAUSE");
        return 0;
}

void mode(double x[], const int n)
{
    int j, k, m=1, p, numofmodes=0;
    bool match=false, breaker;
    double y[100][2]={0}, max=0;

    for(p=0;p<=n-1;p++)
    {
        y[p][0] = x[p];
        y[p][1]++;
    }

    for(j=1; j<=(n-1); j++)
    {
        for (k=0; k<=m; k++)
            if (x[j] == y[k][0])
            {
                y[k][1]++;
                match = true;
                cout<<y[k][0]<<"   "<<y[k][1]<<endl;
            }

        if (match == true)
        {
            y[m][0] = x[j];
            y[m][1] = 1;
            m++;
        }
        match = false;
    }

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] > max)
            max = y[j][1];
    }

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] == max)
            numofmodes++;
    }

    cout<<"There are "<<numofmodes<< " modes in the data set."<<endl;

    for(j=0; j<=(n-1); j++)
    {
        if (y[j][1] == max)
        {
            cout<<"The number "<<y[j][0]<<" appears "<<max<<" times."<<endl;
        }
    }
    cout<<endl;
} 
```

输出：数据集中有 2 种模式。数字 4 出现 6 次。数字 6 出现 6 次。

数据集中有 2 种模式。数字 2 出现 3 次。数字 5 出现 3 次。

数据集中有 4 种模式。数字 1 出现 2 次。数字 7 出现 2 次。数字 19 出现了 2 次。数字 30 出现 2 次。

按任意键继续 。. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:30:26.643

2 x `if (y[j][1] = max)`- 类似于 (match = false) 问题 - 此时`max`为 2，因此任何值都被 2 覆盖。

第一列的问题听起来像是由于`match = false`问题造成的。修复并重新编译后是否仍然出现？

# c# - @Html.DropDownListFor 未设置默认选定值

> ID：13755098
> 
> 赞同：2
> 
> 时间：2012-12-07T00:28:44.347
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, html-helper

无法弄清楚为什么不能在此处设置要显示的默认值：

```
@Html.DropDownListFor(m => m.storeLocations, new SelectList(Model.storeLocations, "id",
"caminhoRepositorio", Model.idArmazenamento), new { @class = "largeField" }) 
```

下拉列表具有以下配置：

```
 <select class="largeField" id="storeLocations" name="storeLocations">
      <option value="2">c:/item1</option>
      <option value="3">d:/item2</option>
</select> 
```

作为对象“Model.idArmazenamento”，我已经尝试过使用 int 和字符串（“2”ou 2）。无法选择默认值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:57:54.377

为什么要使用同一个对象来存储选定的值并显示选项？尝试使用不同的模型字段：

```
@Html.DropDownListFor(m => m.SelectedStoreLocations, new SelectList(Model.storeLocations, "id",
"caminhoRepositorio", Model.idArmazenamento), new { @class = "largeField" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:58:07.927

设法以一种非常古老的方式工作：

```
<td>
    <select class="largeField" id="storeLocations" name="storeLocations">                         
        @foreach (var location in Model.storeLocations)
        {
            if (location.id == Model.idArmazenamento) { 
                <option value="@location.id" selected="@location.id">@location.caminhoRepositorio</option>
            } else {
                <option value="@location.id">@location.caminhoRepositorio</option>
            }
        }
    </select>
</td> 
```

# asp.net - jquery mobile/facebook/paypal/asp.net app的安全架构指南

> ID：13755099
> 
> 赞同：0
> 
> 时间：2012-12-07T00:28:47.903
> 
> 标签：asp.net, facebook, security, jquery-mobile, paypal

我有一个 jquery 移动应用程序，它使用 ajax 来调用我用 C# 编写的 asp.net web 方法。这些方法查询 SQL Server 数据库并返回数据。此时无需用户注册。在喜欢、评论和发布到用户的墙/时间线方面，我还使用 javascript sdk 进行了一些 Facebook 集成。

我开发的下一步是用户将能够支付费用以将数据输入到我的数据库中。我想避免进入用户/密码管理，而是依靠 facebook 登录（以后可能还有其他社交网络，现在让我们坚持使用 facebook）。

所以我看到的工作流程是：

1.  如果尚未登录，我会提示用户登录 Facebook
2.  用户在我的网站上点击“购买”，这是一个贝宝按钮
3.  用户被发送到安全的贝宝页面，付款，然后返回我的网站
4.  付款成功后，我调用了一个 Web 方法来插入新数据，该数据被标记为由该 facebook 用户输入。Web 方法将连接到执行所有获取的同一个 sql server 帐户，不会有单个访问者的 sql server 用户帐户。

我在这里看到了一些有趣的安全漏洞。就像有人编写代码直接调用我的插入 Web 方法一样，无需支付任何费用。我正在寻找有关如何以安全的方式将所有这些步骤联系在一起的指导，以便最后，我保证输入的任何数据都是 a) 付费的，并且 b) 由当前登录的 facebook 用户输入

我已阅读 facebook login developer docs、paypal developer docs 和 microsoft asp.net application services docs。我基本上可以理解每一个，但我迷失了将它们全部捆绑在一个单一的、安全的交易中。任何提示将不胜感激！

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:48:59.607

您需要做的是 - 在您的插入网络方法中，验证用户是否已付款。你可以通过几种方式做到这一点。使用 PayPal IPN（即时付款通知）确认付款或切换到 PayPal Express Checkout API，以便在用户被重定向回您的站点后以编程方式验证付款。这是一个快速的操作指南，可以帮助您实现这一点：[https ://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-singleItemPayment-curl-etc](https://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-singleItemPayment-curl-etc)

# vb.net - 创建对象或属性的多个实例以存储属性值

> ID：13755102
> 
> 赞同：0
> 
> 时间：2012-12-07T00:28:54.643
> 
> 标签：vb.net

我不知道我正在尝试做的事情的确切名称……基本上我正在尝试创建一个包含多个属性的对象。每个对象都是独一无二的。以下是我到目前为止所拥有的..

```
Public Class TestingProperties

    Private m_TestId As Integer
    Public Property TestId() As Integer
        Get
            Return m_TestId
        End Get
        Set(ByVal value As Integer)
            m_TestId = value
        End Set
    End Property

    Private m_TestName As String
    Public Property TestName() As String
        Get
            Return m_TestName
        End Get
        Set(ByVal value As String)
            m_TestName = value
        End Set
    End Property

End Class 
```

那么我下面的内容基本上就是上面的每个对象中包含的属性...

```
 Dim x As TestingProperties
    x = New TestingProperties
    x.TestName = "N/A"
    x.TestName = "Name1"
    x.TestName = "Name2"
    x.TestId = "0"
    x.TestId = "1"
    x.TestId = "2" 
```

显然这不起作用，因为最后一个 testId 和最后一个 TestName 会覆盖对象属性中包含的所有内容。一旦我弄清楚了，数据将通过 SQL 存储过程提供，但格式应该仍然相似......这个壮举中的任何想法我应该很久以前就学会了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:39:00.767

```
 Dim x As New List(Of TestingProperties)

    For i = 0 To 9
        Dim newx As New TestingProperties
        newx.TestId = i
        newx.TestName = "Name " & i
        x.add(newx)
    Next 
```

现在你有 10 个独特的属性。您可以像这样访问它们：

```
Console.WriteLine(x(0).TestId) 
```

# ios - 嵌套 GetContext() 调用 - 这个自定义 UILabel 是否重用了 CoreGraphics 上下文？

> ID：13755104
> 
> 赞同：0
> 
> 时间：2012-12-07T00:29:01.180
> 
> 标签：ios, core-graphics, custom-controls, uilabel

我的问题如下 - 我可以使用以下功能：当任何 UIView 中仅存在图像时，takeSnapshotOfScreen 可以对屏幕进行适当缩放的快照。但是，当我添加标签时，如下所示，最终的快照图像会保存为较大图像的较小、压扁的版本，叠加在 CustomLabelClass 应该位于的中心，而不是包含实际文本的标签。

我的猜测是，从函数中获取 CG 上下文的调用：drawTextInRect（在 CustomLabelClass 中），似乎正在重用调用函数 takeSnapshotOfScreen 检索到的上下文，因为我猜它从未弹出。

如果我的猜测是正确的，如何正确处理这种情况？

我真诚地感谢任何帮助。对此，我真的非常感激！

*   代码和详细信息-

下面是一个示例图像，演示了这个叠加/上下文问题。

![在此处输入图像描述](../Images/0872ef4a8f80616d0b37e9e1072bce8e.png)

我有一个自定义 UILabel 类，我在其中覆盖 drawTextInRect 以在文本周围绘制边框：

```
@interface CustomLabelClass : UILabel {
    @property (nonatomic, strong) UIColor *innerColor;
    @property (nonatomic, strong) UIColor *borderColor;
}

@implementation CustomLabelClass
@synthesize innerColor, borderColor;
...
- (void)drawTextInRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextSetTextDrawingMode(context, kCGTextFill);    

    if(innerColor)
        [self setTextColor:innerColor];

    // Draw the text without an outline
    [super drawTextInRect:rect];

    CGImageRef alphaMask = NULL;

    // Create a mask from the text
    alphaMask = CGBitmapContextCreateImage(context);

    // Outline width
    CGContextSetLineWidth(context, 4);
    CGContextSetLineJoin(context, kCGLineJoinRound);

    // Set the drawing method to stroke
    CGContextSetTextDrawingMode(context, kCGTextStroke);

    // Outline color
    if(borderColor)
        self.textColor = borderColor;

    // notice the +1 for the y-coordinate. this is to account for the face that the outline appears to be thicker on top
    [super drawTextInRect:CGRectMake(rect.origin.x, rect.origin.y+1, rect.size.width, rect.size.height)];

    // Draw the saved image over the outline. Invert because CoreGraphics works with an inverted coordinate system
    CGContextTranslateCTM(context, 0, rect.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextDrawImage(context, rect, alphaMask);

    // Clean up because ARC doesnt handle CoreGraphics
    CGImageRelease(alphaMask);

    UIGraphicsEndImageContext();
} 
```

我有另一个使用 CustomLabelClass 的类，如下所示：

```
#import "CustomLabelClass.h"

@implementation CustomViewController

-(void)createCustomLabel{

//...create a CustomLabelClass *newLabel object...etc.
    ...

// add it to the view
    [[[self view] viewWithTag:ViewContainingImageAndCustomLabels] addSubview:newLabel];
}

-(void)updateCurrentImage{

    // Assume that the object: mainImage, is a global UIImage, for purposes of these code snippets.

    UIImageView *mainImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, mainImage.size.width, mainImage.size.height)];        
    mainImageView.image = mainImage;
    [mainImageView setTag:ViewTypeMainPhoto];

    // we always want the image to be the underlying view, so insert it at Index:0
    [[[self view] viewWithTag:ViewContainingImageAndCustomLabels] insertSubview:mainImageView atIndex:0];
}

-(UIImage *)takeSnapshotOfScreen{

    // Mostly taken from: http://developer.apple.com/library/ios/#qa/qa1703/_index.html
    //
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext

    CGSize imageSize = [[UIScreen mainScreen] bounds].size;

    if (NULL != UIGraphicsBeginImageContextWithOptions){
        UIGraphicsBeginImageContextWithOptions(imageSize, YES, 0.0f); // 0.0f scale is for retina bc *WithOptions captures native resolution
    }else{
        UIGraphicsBeginImageContext(imageSize);
    }

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIView *tempView in [[[self view] viewWithTag:ViewContainingImageAndCustomLabels] subviews])
    {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);

            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [tempView center].x, [tempView center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [tempView transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
            -[tempView bounds].size.width * [[tempView layer] anchorPoint].x,
            -[tempView bounds].size.height * [[tempView layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[tempView layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); // remove context from stack

    return image;
} 
```

最后是一个只调用上述函数的函数（简化如下）：

```
-(void)doEverything{
    [self createCustomLabel];
    [self updateCurrentImage];
    [self takeSnapshotOfScreen];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:22:07.730

解决方案是`setNeedsDisplay`在包含手动呈现文本的子视图上设置，因为我正在覆盖`drawTextInRect`.

# c++ - 当使用多个文件在 C++ 中编写程序时，每个类都需要自己的吗？

> ID：13755108
> 
> 赞同：0
> 
> 时间：2012-12-07T00:29:19.500
> 
> 标签：c++, file

在一个程序中使用多个文件，尤其是较大的程序为用户节省了很多麻烦，甚至更多的滚动，但是是否有必要为我希望在我的应用程序中表示的每个类或对象分别提供 .cpp 和 .h 文件？将类分组到几个逻辑相关类的模块中它们共享 .cpp 和 .h 文件是否更好？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:03:55.387

不，没有必要为每个类都拥有单独的 .cpp 和 .h 文件，尽管这是一种组织技术的常见做法。如果您（或尝试使用您的代码的人）没有使用功能丰富的 IDE，例如文本编辑器，这将特别有用。如果您无法从文件名中识别文件的内容，那么您将很难在大型项目中定位类。即使使用 Visual Studio 之类的 IDE，我也喜欢每个文件拥有一个类的便利，因为这样我就可以浏览我的类，而无需使用类资源管理器或其他工具。

您给出了将多个类混合到一个源文件和一个头文件中的示例，但是您没有提到的另一种选择是您可以将所有内容放在头文件中，这可能很有用，例如创建仅头文件的库（这意味着用户只需要担心包含您的标题）或模板。

# r - 预测预测的标准误

> ID：13755110
> 
> 赞同：3
> 
> 时间：2012-12-07T00:29:22.410
> 
> 标签：r, stata, linear-regression, forecasting, standard-error

我是 R 的新手，来自 Stata 世界。我刚刚运行了一个线性模型（大约有 100 个变量，每个变量有 500 个左右的数据点），如下所示：

```
RegModel.3 <- lm(ordercount~timecount2+timecount4 .... expeditedrop, data=Dataset) 
```

现在我想`stdf`为每个拟合值找到预测的标准误差，就像 stata 中的函数一样。

我试过以下代码：

```
predict(RegModel.3$fitted.values, new, se.fit=TRUE) 
```

但我收到以下错误：

```
Error in UseMethod("predict") : no applicable method for 'predict' applied to an object of class "c('double', 'numeric')" 
```

我究竟做错了什么？此外，我如何以类似于我编写系数的方式使用 write.csv 命令导出输出：

```
write.csv(RegModel.3$coefficients, file='results.csv') 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:36:25.170

一个可重复的例子取自`?lm`：

```
ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2,10,20, labels=c("Ctl","Trt"))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group)

pp <- predict(lm.D9, interval="prediction",se.fit=TRUE) 
```

（参见`?predict.lm`参考）和

```
write.csv(cbind(pp$fit,stderr=pp$se.fit),file="predintervals.csv") 
```

应该这样做。（在这种情况下，标准误差都是相同的，因为只有一个分类预测变量而没有连续预测变量......）

PS：只要有可能，最好使用标准访问器，例如`coef()`提取系数或`fitted()`提取拟合值，而不是使用`$`. 尝试`methods(class="lm")`查看可用的访问器。

**编辑**：一般方法仍然适用于一个大问题的说明：

```
set.seed(101)
X <- matrix(runif(101*500),nrow=500)
prednames <- paste0("predictor",1:100)
X2 <- setNames(as.data.frame(X),
               c("response",prednames))
form <- reformulate(paste(prednames,collapse="+"),response="response")
fit1 <- lm(form,data=X2)
pp <- predict(fit1,interval="predict",se.fit=TRUE) 
```

# android - Amazon IAP 测试未显示我的图标

> ID：13755111
> 
> 赞同：0
> 
> 时间：2012-12-07T00:29:25.897
> 
> 标签：android, in-app-purchase, amazon

我正在使用 SDK tester.json 方法来测试我的 IAP 内容。我在 JSON 中输入了我的图标的 url，但 IAP 确认对话框只显示一个默认图标，上面写着“测试项目”。这只是测试环境的工作方式（即在我对其进行实时测试之前它从不显示我的图标），还是我设置不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:14:34.840

亚马逊的技术支持人员验证了这是应该在测试仪中发生的方式。

# .net - MSTest 的 XML 单元测试框架

> ID：13755113
> 
> 赞同：3
> 
> 时间：2012-12-07T00:30:09.263
> 
> 标签：.net, xml, mstest

我们需要验证我们生成的 xml 文档的内容。是否有任何框架可以帮助轻松提取和验证文档的内容？

我们需要知道的事情

*   包含元素 x
*   元素 x 的值
*   元素 x 包含具有值 z 的属性 y
*   意想不到的元素

如果没有断言也没关系，这可以通过 MSTest 完成

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:49:05.367

在此处查看 Fluent Assertions 库文档：[https ://fluentassertions.com/introduction](https://fluentassertions.com/introduction)

标题为“XML 类”的部分听起来像是您所追求的。该代码在下面使用 LINQ-to-XML。

```
xDocument.Should().HaveRoot("configuration");
xDocument.Should().HaveElement("settings");

xElement.Should().HaveAttribute("age", "36");
xElement.Should().HaveElement("address");

xAttribute.Should().HaveValue("Amsterdam"); 
```

您可以在此处从 nuget 安装 FluentAssertions：http: [//nuget.org/packages/FluentAssertions](http://nuget.org/packages/FluentAssertions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:52:31.730

您还可以使用 xsd.exe（包含在 VS 中）之类的工具从您为 XML 拥有的 XSD 文件生成 C# 实体。

生成对象后，您可以使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)的实例来反序列化您的 XML。如果您不能反序列化您的 XML，那么您很快就会知道您有无效的 XML。

之后，您应该能够通过使用反序列化实体的各种属性来相当轻松地验证 XML 的内容。

[这是一篇](http://blogs.msdn.com/b/yojoshi/archive/2011/05/14/xml-serialization-and-deserialization-entity-classes-with-xsd-exe.aspx)关于从 XSD 生成实体对象的不错的入门博客文章，它展示了一些使用 XmlSerializer 的简单反序列化代码。

# java - SQlite 列不存在

> ID：13755114
> 
> 赞同：0
> 
> 时间：2012-12-07T00:30:10.513
> 
> 标签：java, android, sqlite

已解决，Ahmad 帖子中的解决方案，更改错误语法并增加数据库版本/或重新安装

我看到了很多关于这个问题的话题，但我无法修复我的代码。有两个类：Main 和 DatabaseHandler。创建数据酶表的目的（姓名、办公室、照片、承诺、声明、活动） 但是，最后一个列“活动”无法识别并抛出错误：“SQLite 返回：错误代码 = 1，msg =表候选人未命名列积极的”

```
public class DatabaseHandler extends SQLiteOpenHelper {
    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "ElectionCandidates";

    // Candidates table name
    private static final String TABLE_CANDIDATES = "candidates";

    // Candidates Table Columns names
    private static final String KEY_NAME = "name";
    private static final String KEY_OFFICE = "office";
    private static final String KEY_PHOTO = "photograph";
    private static final String KEY_PROMISSES = "promisses";
    private static final String KEY_STATMENT = "statment";
    private static final String KEY_ACTIVE = "active";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CANDIDATES_TABLE = "CREATE TABLE " + TABLE_CANDIDATES
                + "(" + KEY_NAME + " TEXT," + KEY_OFFICE + " TEXT," + KEY_PHOTO
                + " TEXT" + KEY_PROMISSES + " TEXT" + KEY_STATMENT + " TEXT"
                + KEY_ACTIVE + " TEXT" + ")";
        db.execSQL(CREATE_CANDIDATES_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CANDIDATES);

        // Create tables again
        onCreate(db);
    }

    void addCandidate(Candidate candidate) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, candidate.get_name()); // Candidate Name
        values.put(KEY_OFFICE, candidate.get_office()); // Candidate Phone
        values.put(KEY_PHOTO, candidate.get_photograph());
        values.put(KEY_PROMISSES, candidate.get_promisses());
        values.put(KEY_STATMENT, candidate.get_statment());
        values.put(KEY_ACTIVE, 1);

        // Inserting Row
        db.insert(TABLE_CANDIDATES, null, values);
        db.close(); // Closing database connection
    }

    Candidate getCandidate(String name) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CANDIDATES,
                new String[] { KEY_NAME, KEY_OFFICE, KEY_PHOTO, KEY_PROMISSES,
                        KEY_STATMENT, KEY_ACTIVE }, KEY_NAME + "=?",
                new String[] { String.valueOf(name) }, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Candidate candidate = new Candidate(cursor.getString(0),
                cursor.getString(1), cursor.getString(2), cursor.getString(3),
                cursor.getString(4), Integer.parseInt(cursor.getString(5)));
        // return candidate
        return candidate;
    }

    public List<Candidate> getAllCandidates() {
        List<Candidate> candidateList = new ArrayList<Candidate>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CANDIDATES;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Candidate candidate = new Candidate();
                candidate.set_name(cursor.getString(0));
                candidate.set_office(cursor.getString(1));
                candidate.set_photograph(cursor.getString(2));
                candidate.set_promisses(cursor.getString(3));
                candidate.set_statment(cursor.getString(4));
                candidate.set_active(Integer.parseInt(cursor.getString(5)));

                // Adding candidate to list
                candidateList.add(candidate);
            } while (cursor.moveToNext());
        }

        // return candidate list
        return candidateList;
    }

    public int updateCandidate(Candidate candidate) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, candidate.get_name()); // Candidate Name
        values.put(KEY_OFFICE, candidate.get_office()); // Candidate Phone
        values.put(KEY_PHOTO, candidate.get_photograph());
        values.put(KEY_PROMISSES, candidate.get_promisses());
        values.put(KEY_STATMENT, candidate.get_statment());
        values.put(KEY_ACTIVE, candidate.get_active());

        // updating row
        return db.update(TABLE_CANDIDATES, values, KEY_NAME + " = ?",
                new String[] { String.valueOf(candidate.get_name()) });
    }

    // Deleting single candidate
    public void deleteCandidate(Candidate candidate) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_CANDIDATES, KEY_NAME + " = ?",
                new String[] { String.valueOf(candidate.get_name()) });
        db.close();
    }

    // Getting candidates Count
    public int getCandidatesCount() {
        String countQuery = "SELECT  * FROM " + TABLE_CANDIDATES;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }
}

package com.s1042512.electionvoter;

import java.util.List;

import com.s1042512.electionvoter.Candidate;
import com.s1042512.electionvoter.DatabaseHandler;
import com.s1042512.electionvoter.R;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting Candidates
        Log.d("Insert: ", "Inserting ..");
        db.addCandidate(new Candidate("Scott Web", "Vice President", "Uglyface", "Promice To suck", "I am noob",0));
        db.addCandidate(new Candidate("Nyash Rush", "President", "Kavaiiii", "Promice To kill", "I am pro",1));

        // Reading all candidates
        Log.d("Reading: ", "Reading all candidates..");
        List<Candidate> candidates = db.getAllCandidates();       

        for (Candidate cn : candidates) {
            String log = "Name: "+cn.get_name()+" ,Office: " + cn.get_office() + " , Photo: " + cn.get_photograph()
                    + " , Promisses: " + cn.get_promisses()+ " , Statment: " + cn.get_statment();
                // Writing Candidates to log
        Log.d("Name: ", log);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:37:33.577

您的 SQL 语法错误。改成`CREATE_CANDIDATES_TABLE`这样：

```
String CREATE_CANDIDATES_TABLE = "CREATE TABLE " + TABLE_CANDIDATES
                + "(" + KEY_NAME + " TEXT, " + KEY_OFFICE + " TEXT, " + KEY_PHOTO
                + " TEXT, " + KEY_PROMISSES + " TEXT, " + KEY_STATMENT + " TEXT, "
                + KEY_ACTIVE + " TEXT" + ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:04:30.250

我认为您缺少主键标识：

试试下面的代码：

```
db.execSQL("CREATE TABLE " + TABLE_CANDIDATES + " (id INTEGER PRIMARY KEY, name TEXT, office TEXT, photograph TEXT, promisses TEXT, statment TEXT, active TEXT)"); 
```

如果它适用于您，则根据您的要求对其进行自定义。

注意：您还将**活动**定义为文本并将其值输入为整数，您可以在数据库的 onCreat 方法中将其定义为 INTEGER，或者将其作为文本插入。

# python - Python Csv Parser 仅对文件的一部分进行排序

> ID：13755115
> 
> 赞同：0
> 
> 时间：2012-12-07T00:30:11.570
> 
> 标签：python, parsing, csv

> **可能重复：**
> [在 python 中过滤 CSV 文件](https://stackoverflow.com/questions/13713752/filtering-a-csv-file-in-python)

我有一个用 python 编写的 CSV 解析器，它在第 500 行左右开始失败。它开始无法解析`^(\w+)\*(\d\d):(\d\d):(\d\d)$`正则表达式

```
import csv
import re
import sys

csvdictreader = csv.DictReader(open('mhc.csv','r+b'), delimiter=',')
csvdictwriter = csv.DictWriter(file('mhc_fixed.csv','w+b'), fieldnames=csvdictreader.fieldnames, delimiter=',')
csvdictwriter.writeheader()

targets = [name for name in csvdictreader.fieldnames if name.startswith('HLA-D')]

for rowfields in csvdictreader:
    keep = True

for field in targets:
    value = rowfields[field]

if re.match(r'^\w+\*\d\d$', value): # gene resolution too low?
  keep = False
  break # quit processing target fields

else: # reduce gene resolution if too high
    # by only keeping first two alles if three are present
    if (re.match(r'^(\w+)\*(\d\d):(\d\d):(\d\d)$')): rowfields[field] = re.sub(r'^(\w+)\*(\d\d):(\d\d):(\d\d)$',r'\1*\2:\3', value)

    if (re.match(r'^(\w+)\*(\d+):(\d+):(\d+):(\d+):(\d+)$')): rowfields[field] = re.sub(r'^(\w+)\*(\d+):(\d+):(\d+):(\d+)$',r'\1*\2:\3', value)

if keep:
    csvdictwriter.writerow(rowfields)

if rowfields > 1400:
    print >>sys.stderr 
```

# android - Android使用Java反射更改私有静态最终字段？

> ID：13755117
> 
> 赞同：9
> 
> 时间：2012-12-07T00:30:24.223
> 
> 标签：android

我想将“NO_CACHE”设置为 newValue。这是我的代码：

```
static void setFinalStatic(Object newValue) throws Exception
{
    Field field = CacheManager.class.getDeclaredField("NO_CACHE");
    field.setAccessible(true);
    Field modifiersField=Field.class.getDeclaredField("modifiers");
    modifiersField.setAccessible(true);
    modifiersField.setInt(field,field.getModifiers() & ~Modifier.FINAL);
    field.set(null, newValue);
} 
```

但在 Android 上运行此代码会产生以下错误：

```
java.lang.NoSuchFieldException: modifiers 
```

我发现`modifiers`是`Field`Java 类中的一个字段，但它不是`Field`Android 类中的一个字段。

这是Java`Field`类代码：

[http://www.docjar.com/html/api/java/lang/reflect/Field.java.html](http://www.docjar.com/html/api/java/lang/reflect/Field.java.html)

这是Android`Field`类代码：

[http://www.oschina.net/code/explore/android-2.2-froyo/java/lang/reflect/Field.java](http://www.oschina.net/code/explore/android-2.2-froyo/java/lang/reflect/Field.java)

上面Java中的代码可以工作，但是在Android平台上不行。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-14T09:17:16.117

我已经尝试了上面的解决方案，并获得了在 Android 中修改静态和最终字段的正确方法，这是在 Android 7.0 中工作的代码

```
Field booleanField = Boolean.class.getField("FALSE");
booleanField.setAccessible(true);
Field modifiersField = Field.class.getDeclaredField("accessFlags");
modifiersField.setAccessible(true);
modifiersField.setInt(field,field.getModifiers() & ~Modifier.FINAL);
booleanField.set(null, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T18:31:28.123

Android 实际上不使用 JDK 源代码。这是非常相似但又不一样的东西。

在 Java 中，修饰符是 type `java.lang.reflection.Field`，但在 Android 中没有这种类型。Android 实现了一个系统，该系统使用整数和字段名称来验证其修饰符，方法是调用本机方法。

我认为一个`private static final`字段`slot`的值为 -1，而私有字段的值为 3。如果您想更改一个`private static final`字段，只需`slot`在设置值之前将其更改为 3。

```
Field booleanField = Boolean.class.getField("FALSE");
booleanField.setAccessible(true);

Field slotField = Field.class.getDeclaredField("slot");
slotField.setAccessible(true);
slotField.set(booleanField, 3);

booleanField.set(Boolean.FALSE, true); 
```

# django - 南迁和多至五月的变化

> ID：13755119
> 
> 赞同：1
> 
> 时间：2012-12-07T00:30:32.587
> 
> 标签：django, many-to-many, django-south

我正在开发一个应该向客户发送新闻通讯的应用程序。我有一个这样定义的模型

```
from django.auth.models import User

class Newsletter(models.Model):                                                                  
    owner = models.ForeignKey(User, related_name='+', blank=False)                                                                                                                                                  
    sent = models.BooleanField(default=False)                                                                                                                                                                       
    date_created = models.DateTimeField(auto_now_add=True)                                                                                                                                                          
    date_sent = models.DateTimeField(null=True)                                                                                                                                                                     
    subject = models.CharField(max_length=255)                                                                                                                                                                      
    content = HTMLField()                                                                                                                                                                                           
    recipients = models.ManyToManyField(User, related_name='+') 
```

后来，我发现我可能需要将这些发送给没有用户帐户的人，所以我定义了一个电子邮件模型

```
class Email(models.Model):                                                                                                                                                                                          
    email = models.CharField(max_length=255) 
```

并将收件人字段更改为阅读

```
recipients = models.ManyToManyField(Email, related_name='+') 
```

在此之后，我运行了 schemamigration 命令，但 South 声称没有任何变化。我曾多次尝试手动操作表和索引，但在某些时候发现，由于它是一个新应用程序，我可以删除所有现有表，删除所有 igrations 并从头开始重新创建初始迁移。不过，这提出了一个问题，如果我真的需要保留数据，我该如何进行这样的迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T09:37:58.290

如果您需要保留数据，则需要将其拆分为 3 个迁移（模式、数据、模式），如下所示：

```
class Migration(SchemaMigration):

    def forwards(self, orm):
        db.add_column(
            u'yourapp_newsletter_recipients',
            'email_id',
            self.gf(
                'django.db.models.fields.related.ForeignKey'
            )(to=orm.Email)
        ) 
```

请注意，您应该在迁移的模型属性中拥有旧架构。

然后是填充电子邮件字段的数据迁移。然后再次进行架构迁移：

```
class Migration(SchemaMigration):

    def forwards(self, orm):
        db.delete_column(u'yourapp_newsletter_recipients', 'user_id') 
```

在这一个中，您应该已经在迁移模型中为收件人字段提供了正确的 m2m 字段['newslatter']

# angularjs - 在AngularJS中从顶部（反向）无限滚动

> ID：13755120
> 
> 赞同：14
> 
> 时间：2012-12-07T00:30:39.093
> 
> 标签：angularjs

我正在尝试反向无限滚动。我有一个评论列表，我在其中收到最后 10 条最新评论，并希望用户能够向上滚动*以*检索下 10 条 - 类似于 FB，它通过“获取上一个”链接显示最新评论，但通过滚动事件而不是链接。

我从[http://jsfiddle.net/vojtajina/U7Bz9/](http://jsfiddle.net/vojtajina/U7Bz9/)开始，并尝试将其修改为反向无限滚动，很快就得到了这样的结果：

```
 function Main($scope, $timeout) {
    $scope.items = [];

    var counter = 0;
    $scope.loadMore = function() {
      // simulate an ajax request
      $timeout( function() {
        for (var i = 0; i < 5; i++) {
          $scope.items.unshift({id: counter});
          counter += 10;
        }}, 1000);
    };

    $scope.loadMore();
  }

  angular.module('scroll', []).directive('whenScrolled', ['$timeout', function($timeout) {
    return function(scope, elm, attr) {
      var raw = elm[0];

      $timeout(function() {
        raw.scrollTop = raw.scrollHeight;
      }, 1100);

      elm.bind('scroll', function() {
        // note: if test for < 100 get into infinite loop due to 
        // the delayed render
        if (raw.scrollTop === 0) {
          var sh = raw.scrollHeight
          scope.$apply(attr.whenScrolled);
          // the items are not loaded and rendered yet, so
          // this math doesn't work
          raw.scrollTop = raw.scrollHeight - sh;
        }
      });
    };
  }]);
  ​ 
```

[http://jsfiddle.net/digger69/FwWqb/2/](http://jsfiddle.net/digger69/FwWqb/2/)

问题是当接下来的 10 个项目被检索时，它们被添加到列表的顶部并且整个列表重新呈现，并且列表中的项目被完全滚动到视图之外。在小提琴中，项目“40”位于顶部，当您滚动（略微向下）然后向上触发滚动时，项目“90”位于顶部。我正在寻找一个很好的策略，在渲染后将“40”保持在滚动区域的顶部。

注意：在小提琴中，我可以通过在滚动事件中保存顶部 li 并调用 scrollIntoView() 来使其工作，*直到*我添加超时来模拟 ajax 调用。随着超时，顶部 li 在请求返回并呈现新元素之前滚动到视图中：/

```
var top = elm.find("li")[0];
scope.$apply(attr.whenScrolled);
top.scrollIntoView(); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-07T11:36:00.143

你可以尝试这样的事情：http: [//jsfiddle.net/mNFmf/4/](http://jsfiddle.net/mNFmf/4/)

这将滚动到 div 的底部：

```
$timeout(function() {
    raw.scrollTop = raw.scrollHeight;          
}); 
```

这将阻止 div 向上滚动到列表中的第一项：

```
var sh = raw.scrollHeight
scope.$apply(attr.whenScrolled);
raw.scrollTop = raw.scrollHeight - sh; 
```

* * *

**更新**

要克服 ajax 请求问题，请尝试使用[promises](http://docs.angularjs.org/api/ng.$q)。

[http://jsfiddle.net/mNFmf/8/](http://jsfiddle.net/mNFmf/8/)

加载程序看起来像这样：

```
$scope.loadMore = function() {
  var deferred = $q.defer();

  // do ajax request here and after getting the result call:   
  deferred.resolve();

  return deferred.promise;
}; 
```

另一方面：

```
loadMore.then(function() { 
  /* do whatever you want after the ajax request has been fulfilled */ 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:20:11.340

你有没有解决过这个问题？我们在阅读和设置方面做了一些魔术`scrollTop`，但发现 Safari 在设置和阅读 scrollTop 时存在一些奇怪的时间问题，因为我们滚动到一个位置，然后查询新位置，而 Safari 仍然有旧位置。

# jquery - XML 和 jQuery 解析的问题

> ID：13755124
> 
> 赞同：0
> 
> 时间：2012-12-07T00:31:36.550
> 
> 标签：jquery, xml, xml-parsing

我正在提交一个表单并获取通过 jQuery ajax 在表中返回的数据。表中的一个 td 中有 xml，我需要对其进行格式化。我可以让它显示在我的页面上，但它似乎只是文本，没有 xml 标签。我正在处理一些遗留代码，没有太多的回旋余地。

返回的 HTML

```
<table border=1>
<tr>
    <td>Field Name</td>
    <td>Field Value</td>
</tr>
<tr>
    <td>SuccessFlag</td>
    <td>True</td>
</tr>
<tr>
    <td>ResponseMessage</td>
    **<td><?xml version="1.0" encoding="utf-16"?>**
        <License>
            <CustomerID>Bob</CustomerID>
            <License>XXXX-XXXX-XXXX-XXXX-XXXX-XXXX-XXXX-XXXX</License>
            <Log>Created by lt@email.com on December 6, 2012, 1:09 pm Cancelled by b@email.com on December 6, 2012, 1:09 pm</Log>
            <ExpirationDate>2012-12-06</ExpirationDate>
        </License>
    </td>
</tr> 
```

粗体线是表中的第 5 个 td 将始终具有我需要的 xml。使用下面的代码，它只是将文本转储到 div 中，我需要根据它的 xml 标记对其进行格式化，并且我不确定我的解析是否有效。

```
$("#ButtonID").live('click',function(){
$("#FormID").validate({
            //are the errorContainer's helping here?
    errorContainer: "#responseDiv",
    errorLabelContainer: "#responseDiv tr",
    wrapper: "td",
            //are the errorContainer's helping here?
    submitHandler: function(form) {
        var dataString = $(form).serialize();
        $.ajax({
            type: $(form).attr('method'),
            url: form.action,
            data: dataString,
            clearForm: true,
            success: function(data) {
                var answer = $(data).find("td:eq(3)").text();
                var message = $(data).find("td:eq(5)").html();
                var xmlDoc = $.parseXML( message );
                var $xml = $( xmlDoc );

                if (answer==="True") {
                    $xml.each(function(){
                           $('#resultGenerate').show().html($(this).text());
                    });
                } else {
                    $('.processing').hide();
                    $('input[type="text"], input[type="password"]').val("");
                    $('#resultGenerate').show().html('<ul><li>' + answer + '</li><li>' + message + '</ul>');
                }
            }
        });
        return false;
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:09:13.140

终于让它工作了，用 GET 请求很容易做到，但是当从 POST 返回数据时，它有点棘手。我是这样做的

```
$.ajax({
    type: $(form).attr('method'),
    url: form.action,
    data: dataString,
    clearForm: true,
    success: function(data) {
        var answer = $(data).find("td:eq(3)").text();
        var message = $(data).find("td:eq(5)").html();
        var $xml = $( message );

        if (answer==="True") {
            $xml.find('license').each(function(){
        var XXXCustomerID = $(this).find(XXXCustomerID').text();
                var XXLicense  = $(this).find('XXLicense').text();
                var Log  = $(this).find('Log').text();
                var ExpirationDate  = $(this).find('ExpirationDate').text();
        $("#resultGenerate").show().append($('<li><span class="ID">' + XXXCustomerID + '</span><span class="NTL">' + XXLicense + '</span><span class="Log">' + Log + '</span><span class="Exp">' + ExpirationDate + '</span></li>'));
                });
        } else {
                $('.processing').hide();
                $('input[type="text"], input[type="password"]').val("");
                }
            }
        }); 
```

# c# - C#，来自字符串的日期，时区，夏令时

> ID：13755125
> 
> 赞同：0
> 
> 时间：2012-12-07T00:31:37.437
> 
> 标签：c#, datetime, timezone

说我有字符串`"1 December 2012, 8:00:00"`

我知道它是 AEST 时间（无论服务器在哪里），当时（12 月 1 日）处于任何夏令时状态，但我想将它作为 UTC 存储在数据库中。

如何将其转换为 UTC，无论服务器在哪里，都将字符串视为 AEST？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:40:29.640

假设您可以解析日期`DateTime.TryParse`并将其转换为`DateTime`结构，然后您可以调用`ToUniversalTime`以转换为 UTC。

例如：

```
DateTime dt;
DateTime utcDate;
if (DateTime.TryParse(dateTimeString, out dt))
{
    utcDate = dt.ToUniversalTime();
    // store utcDate in database
}
else
{
    // error, unable to parse the date
} 
```

当然，假设您的本地时间是 AEST，或者您正在解析的日期/时间字符串具有时区说明符。

如果您的本地时间是其他时间并且没有时区说明符，那么您需要解析日期，添加或减去您的时区的偏移量以匹配 AEST，然后调用`ToUniversalTime`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:39:46.077

您可以首先初始化从您上面指定的字符串`System.DateTime`中获取的a 。`DateTime`然后，您可以使用`System.DateTime.ToUniversalTime()`which 将当前`System.DateTime`对象的值转换为协调世界时并将其存储在数据库中。

**例子**

```
DateTime AEST = DateTime.Parse("1 December 2012, 8:00:00"); //Initialize a new DateTime of name AEST which gets a System.DateTime from 1 December 2012, 8:00:00
DateTime UTC = AEST.ToUniversalTime(); //Initialize a new DateTime of name UTC which converts the value from AEST to Coordinated Universal Time
System.Diagnostics.Debug.WriteLine(UTC.ToString()); //Writes 12/1/2012 6:00:00 AM 
```

**注意**：如果您愿意将时间从一个时区转换到另一个时区，您可以使用您要转换的`TimeZoneInfo.ConvertTime(DateTime dateTime, TimeZoneInfo sourceTimeZone, TimeZoneInfo, destinationTimeZone)`地方`dateTime`、您要转换的时区以及您要从中获取的时区`DateTime``sourceTimeZone``DateTime``destinationTimeZone``dateTime`

**例子**

```
string _date = "1 December 2012, 8:00:00"; //Initializes a new string of name _date as "1 December 2012, 8:00:00"
string targetTimeZone = "W. Australia Standard Time"; //Initializes a new string of name targetTimeZone as "W. Australia Standard Time"
DateTime sourceDateTime = DateTime.Parse(_date); //Initializes a new DateTime of name sourceDateTime which gets a valid DateTIme object from 1 December 2012, 8:00:00
DateTime AEST = TimeZoneInfo.ConvertTime(sourceDateTime, TimeZoneInfo.Local, TimeZoneInfo.FindSystemTimeZoneById(targetTimeZone)); //Initializes a new DateTime which converts the time zone from sourceDateTime assuming that sourceDateTime's TimeZone is the local time zone of the machine to an W. Australia Standard Time time zone of name AEST 
```

`1 December 2012, 8:00:00`假设它的时区是机器的本地时区（例如`Egypt Standard Time: (GMT+02:00) Cairo`），`W. Australia Standard Time: (GMT+08:00) Perth`这将转换`12/1/2012 2:00:00 PM`。

有关时区列表，请参阅[Microsoft 时区索引值](http://msdn.microsoft.com/en-us/library/ms912391%28v=winembedded.11%29.aspx)

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T01:20:46.177

感谢 Picrofo EGY、esr 和 White Dragon，我创建了这个函数来解决它

```
public static DateTimeOffset CreateDateWithTimezone(string dateStr, TimeZoneInfo tzi)
{
  DateTimeOffset dtoTzi = TimeZoneInfo.ConvertTime(DateTimeOffset.UtcNow, tzi);

  DateTimeOffset dto;
  if (!DateTimeOffset.TryParse(dateStr + " " + dtoTzi.ToString("zzz"), out dto))
    throw new Exception("Failed to parse date: " + dateStr + " " + dtoTzi.ToString("zzz"));

  if (tzi.SupportsDaylightSavingTime)
  {
    TimeSpan offset = tzi.GetUtcOffset(dto);
    string offsetStr = (offset.TotalHours < 0 ? "" : "+") + offset.Hours.ToString("00") + ":" + offset.Minutes.ToString("00");

    if (!DateTimeOffset.TryParse(dateStr + " " + offsetStr, out dto))
      throw new Exception("Failed to parse date: " + dateStr + " " + dtoTzi.ToString("zzz"));
  }

  return dto;
} 
```

用法：

```
string dateStr = "1 December 2012, 08:00:00";
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById("AUS Eastern Standard Time");
DateTimeOffset dtoUtc = CreateDateWithTimezone(dateStr, tzi).ToUniversalTime();

Response.Write("dtoUtc is " + dtoUtc); 
```

它会打印出来

> dtoUtc 是 2012 年 11 月 30 日晚上 9:00:00 +00:00

完美的！

# javascript - 为什么 JS 在除 IE 之外的所有浏览器中都能正常刷新？

> ID：13755126
> 
> 赞同：2
> 
> 时间：2012-12-07T00:31:49.510
> 
> 标签：javascript, internet-explorer, refresh

我需要每 8 秒重新加载一次页面。它在 Chrome、Firefox 和 Safari 中运行良好，但在 IE 中，它在 1 到 12 次刷新后停止刷新。这是有问题的。

以下部分包含在文档的开头。getScrollXY 获取页面坐标，以便 iframe 可以在确切的某个位置重新加载。三个 d 变量分别是 X 值、Y 值和形式。这里的 PHP 变量是页面的 URL，显然，可以根据需要进行修改。

```
function unloadP(dung,dong,dang)
{
    s=getScrollXY();
    document.getElementById(dong).value = s[0];
    document.getElementById(dang).value = s[1];
    document.getElementById(dung).submit(); 
    return false;
    window.location = \"$here\";
    window.location.reload(true);
}

function unloadPnow(dug,dog,dag,deg)
{
    s=getScrollXY();
    document.getElementById(dog).value = s[0];
    document.getElementById(dag).value = s[1];
    document.getElementById(dug).submit(); 
    return false;
    window.location = deg;
    window.location.reload(true);
} 
```

这就是行动实际发生的地方。

```
if(isset($newscroll))
{
    if(count($printlast)!=0)    $_SESSION['printlast']=$printlast;
    $_SESSION['newscroll']="isset";
    if($newscroll!="set")   $here='http://127.0.0.1/dummyname.php?ord=1&mode='.$newscroll;//#duh';
    if(strpos($_SERVER['HTTP_USER_AGENT'],"Safari")!==FALSE)
        {
            print("<body onLoad=\"setTimeout('unloadP(\'thisf\',\'scrollx\',\'scrolly\')', 100);\">
                <form id=\"thisf\" method=\"post\" action=\"$here\">
                <input type=\"hidden\" name=\"scrollx\" id=\"scrollx\" value=\"3\">
                <input type=\"hidden\" id=\"scrolly\" name=\"scrolly\" value=\"4\"></form>");
        }
    else
        {
            print("<body onLoad=\"setTimeout('unloadP(\'thisf\',\'scrollx\',\'scrolly\')', 0);\">
                <form id=\"thisf\" method=\"post\" action=\"$here\">
                <input type=\"hidden\" name=\"scrollx\" id=\"scrollx\" value=\"3\">
                <input type=\"hidden\" id=\"scrolly\" name=\"scrolly\" value=\"4\"></form>");
        }
}
else
{
    if(isset($_SESSION['printlast']))   unset($_SESSION['printlast']);
    if(!isset($dontload))
        {
            if(isset($_POST['scrollx']))
                {
                    print("<body onLoad=\"loadP(); setTimeout('unloadP(\'thisf\',\'scrollx\',\'scrolly\')', 8000);\">
                        <form id=\"thisf\" method=\"post\" action=\"$here\">
                        <input type=\"hidden\" name=\"scrollx\" id=\"scrollx\" value=\"3\">
                        <input type=\"hidden\" id=\"scrolly\" name=\"scrolly\" value=\"4\"></form>");
                }
            else
                {
                    print("<body onLoad=\"window.scrollTo(0, document.body.scrollHeight); window.top.scrollTo(0,0); setTimeout('unloadP(\'thisf\',\'scrollx\',\'scrolly\')', 8000);\">
                    <form id=\"thisf\" method=\"post\" action=\"$here\">
                    <input type=\"hidden\" name=\"scrollx\" id=\"scrollx\" value=\"3\">
                    <input type=\"hidden\" id=\"scrolly\" name=\"scrolly\" value=\"4\"></form>");
                }
        }
    else
        {
            print("<body onLoad=\"window.scrollTo(0, document.body.scrollHeight); window.top.scrollTo(0,0); setTimeout('unloadP(\'thisf\',\'scrollx\',\'scrolly\')', 8000);\">
                    <form id=\"thisf\" method=\"post\" action=\"$here\">
                    <input type=\"hidden\" name=\"scrollx\" id=\"scrollx\" value=\"3\">
                    <input type=\"hidden\" id=\"scrolly\" name=\"scrolly\" value=\"4\"></form>");
        }
} 
```

感谢您的时间。

编辑：正如第一条评论所建议的，我尝试设置缓存控制标头，但没有帮助。标题是：

```
header('Cache-Control: no-cache, no-store, max-age=0, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Pragma: no-cache'); 
```

另外，为了记录，我尝试在每次刷新时更改 GET 变量的值，以诱使 IE 认为它是另一个页面，但无济于事。我什至复制了代码并将其放在另一个页面中，每次刷新时从一个页面切换到另一个页面，但这也没有让 IE 保持刷新。我的猜测是所有其他浏览器都可以容忍的语法中的一个小错误，或者 IE 正在积极阻止刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:57:38.800

除了已经建议的内容之外，另一个选项是在您的 url 中添加一个随机变量属性，以便将链接与 IE 浏览器可能缓存的任何值区分开来。

# jquery - 使用 Worklight 和 HTTP 适配器的多页表单

> ID：13755127
> 
> 赞同：0
> 
> 时间：2012-12-07T00:31:58.640
> 
> 标签：jquery, jquery-plugins, ibm-mobilefirst

尝试在 worklight 中创建一个多页表单，该表单在第 1 页上提交数据并使用 jquery.validate 插件。该插件按预期工作，但是当我尝试使用 worklight 中的 Pages and Fragments 演示加载新页面时，它会失败并仅加载新页面。

这是我使用的按钮：

```
<input type="button" value="Go to Page2" id="LoadPage2Button" onclick="PAGE.loadPage();" /> 
```

当我使用 JQuery.Validate 插件并将其绑定到表单 ID 时：

```
<form id="myform" autocomplete="off" autocorrect="off" method="get"> 
```

它只加载下一页，不使用验证。但是，如果我删除了 onclick，它会验证表单，但不会切换页面。<--显然因为它没有被任何处理，但即使我只是将 action="Page2.html" 放在表单标记中，它也不会在工作灯中加载新页面。或者，如果它确实加载了一个新页面，那么它会从 worklight 容器中取出并仅加载一个新网页。

然后我尝试使用新页面加载新页面：

```
PAGE.loadPage = function(pageIndex){
WL.Logger.debug("PAGE::loadPage::pageIndex: "+pageIndex);
        WL.Page.load("www/register.html", {

            onComplete: function(){ PAGE.init(); },
            onUnload: function() { PAGE.unload(); } 
        });

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:45:11.603

不要使用`WL.Fragment`and `WL.Page`，它们已被弃用。
请参阅[模块 7.5 - 构建多页应用程序练习](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_07_5_-_Building_a_Multi_Page_Application.pdf)和[代码示例](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/module_07_5_MultiPageApplication.zip)。
它给出了一个使用 jQuery $().load() API 创建多页面体验的示例。

# python - Python 3.3，寻找字谜？

> ID：13755131
> 
> 赞同：0
> 
> 时间：2012-12-07T00:32:17.203
> 
> 标签：python

我正在尝试用 Python 编写一个查找字谜的程序。这是我当前的代码：

```
def anagram(word,checkword):
    for letter in word:  
        if letter in checkword:  
            checkword = checkword.replace(letter, '') 
        else:  
            return False  
    return True  

while True:
    f = open('listofwords.txt', 'r')
    try:
        inputted_word = input('Word? ')
        for word in f:
            word = word.strip()
            if len(word)==len(inputted_word):
                if word == inputted_word:
                    continue
                elif anagram(word, inputted_word):
                    print(word)
                        #try:
                            #if word == 1:
                            #print ('The only anagram for', user_input, 'is', word)
                        #elif word > 1:
                            #print ('The anagrams for', user_input, 'are', word)
                        #except TypeError:
                            #pass
    except:
        break 
```

我无法*输出*字谜。字谜应该在一行中，并且措辞应该反映找到的字谜的数量。如...

> “（输入的插入单词）只有一个（插入字谜）”
> 
> “有（插入字谜）用于（插入输入的单词）”
> 
> “没有（输入的插入单词）的字谜”
> 
> “（输入的插入词）不在字典中”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:39:45.977

这里有一些提示：

首先，如果您必须在打印任何字谜之前打印它们的计数，则需要在循环时保留它们的列表。像这样的东西：

```
anagrams = []
for word in f:
    word = word.strip()
    if len(word)==len(inputted_word):
        if word == inputted_word:
            continue
        elif anagram(word, inputted_word):
            anagrams.append(word) 
```

现在您只需要根据列表中的内容弄清楚如何在最后打印正确的文本`anagrams`。

至于你尝试了什么：

```
#try:
    #if word == 1:
    #print ('The only anagram for', user_input, 'is', word)
#elif word > 1:
    #print ('The anagrams for', user_input, 'are', word)
#except TypeError:
    #pass 
```

这不可能奏效。首先，`word`是一个词，所以它不可能等于`1`或大于`1`。另外，如果你只浏览了字典中的前 20 个单词，并找到了第一个字谜，你怎么知道这是唯一的字谜？字典的其余部分可能有 1000 个。在读完整本词典之前，您无法决定要打印哪个句子。

同时，请注意，“只有一个”与“不在字典中”有不同的情况。`if`因此，您需要在该语句中设置的“在字典中找到 inputted_word”的某种标志。或者，您可以忽略特殊情况——例如，最后，如果您有 0 个结果，您就知道它不在字典中。这取决于您是在最后还是在循环内部需要更多逻辑。

# php - PHP 的类似 Servlet 的行为？

> ID：13755132
> 
> 赞同：0
> 
> 时间：2012-12-07T00:32:22.447
> 
> 标签：php, servlets

我有一个由 Java servlet S 和另一个程序 P 组成的系统，在 Windows 下运行。servlet 相当简单。它使用 Runtime.getRuntime().exec() 启动多个 P 实例，并使用 Process.getInputStream() 和 Process.getOutputStream() 附加到这些进程的标准输入和输出。P 的每个实例都必须做大量工作来初始化，但这没关系，因为 servlet 是持久的，因此不必经常启动 P 的新实例。每次 servlet 收到请求时，它都会向 P 的一个实例发送一些文本，该实例完成大部分实际工作；然后它从 P 的标准输出中接收一些文本，并使用它来生成对请求的响应。

我想用 PHP 而不是 Java 编写的包装器来重做这个。如果我愿意为每个请求启动一个新的 P 实例，那将很容易，但考虑到启动成本，这将是低效的。有没有办法在 PHP 中模拟 servlet 行为，并维护一个不必每次都重新启动的 P 实例池？

# weka - WEKA SMOreg 分类器显着性检验

> ID：13755134
> 
> 赞同：1
> 
> 时间：2012-12-07T00:32:37.693
> 
> 标签：weka, svm, confidence-interval, cross-validation, significance

我在 WEKA 中使用 SMOreg 分类器来确定一个变量和其他几个变量之间是否存在预测关系。我正在使用 10 倍交叉验证来获得我的结果。我的老师希望我找到自己发现的信心，但这让我感到困惑，因为我认为这是不可能的。如何使用 WEKA 中的 SMOreg 分类器测试显着性？

# math - 反转 sin 和 cos 变换

> ID：13755136
> 
> 赞同：1
> 
> 时间：2012-12-07T00:32:44.080
> 
> 标签：math, trigonometry

我正在非常成功地操作具有基本 sin 和 cos 的 2D 地图以提供 3d 透视图。

我遇到的问题是我一直试图找到视口中可见的内容。有效地进行反向转换，输出为 [0,0] 和 [width,height]，我想知道这些点在我的地图上的位置。

我已经到了试图扭转的地步：

```
display_x = (source_x * cos(z)) + (source_y * sin(z))
display_y = (source_y * cos(z)) - (source_x * sin(z)) 
```

如果我知道`display_x`and`display_y`和`source_x`and`source_y`是未知数，我如何解决未知数是什么？我的联立方程知识有点生疏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T00:43:47.103

您正在有效地使用 2d 旋转矩阵（我很确定您在 display_y 的定义中将 source_x 替换为 source_y 的错字）

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

```
[ cos(z), sin(z) ] [ source_x ] = [ display_x ]
[-sin(z), cos(z) ] [ source_y ]   [ display_y ] 
```

反转这个矩阵所需要做的就是找到它的转置（翻转对角线），因为它保证是正交的。

所以应该是：

```
display_x = (source_x * cos(z)) - (source_y * sin(z)) 
display_y = (source_x * sin(z)) + (source_y * cos(z)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:42:22.310

你的变换是旋转角度z，所以你需要旋转角度-z来反转。这产生：

```
source_x = (display_x * cos(z)) - (display_y * sin(z))
source_y = (display_x * cos(z)) + (display_y * sin(z)) 
```

这使用：

```
cos(z) == cos(-z)
sin(-z) == -sin(z) 
```

# ruby-on-rails - 将主应用程序中的类委托给 Rails 引擎中的类

> ID：13755139
> 
> 赞同：0
> 
> 时间：2012-12-07T00:33:02.537
> 
> 标签：ruby-on-rails, rails-engines, loose-coupling

我有一个独立的 Rails 引擎：`Admin`.

在那个引擎中，我`Sites`通过 GUI 创建。

在引擎中：

```
module Admin
  class Site < ActiveRecord::Base
  end
end 
```

在主应用程序中，我从引擎继承`Site`，以便在根级别将其用作常量：

```
class Site < Admin::Site
end 
```

`Admin::Site`我这样做是因为将主应用程序的模型、控制器和测试耦合起来感觉不对。但我猜这种方法有一些缺点，我也猜想有人可能会争辩说耦合是相同的。

我怎样才能以比继承更好的方式委派这个？

或者

我是否应该重组我的代码并将`Site`类放在主应用程序和引擎都可以使用的 gem 中？我真正想要的是引擎类的接口，以减少入口点，从而减少耦合。

旁注，我总共有 3-4 个这些类驻留在引擎中，但在主应用程序中使用。

编辑：

也许我应该像这样包装它：

```
class Site 
  def initialize(args = {})
    @klass = Admin::Site.new(args)    
  end

  def method_missing(method_name, *args, &block)
    @klass.send(method_name, *args, &block)
  end
end 
```

当然，我也可以将界面缩小`Site`到只包含我需要`Admin::Site`的主应用程序中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:56:02.910

我想到了两种可能的解决方案，
1) ActiveSupport::Conern
2) 开放 分类

鉴于您已将这 3-4 个模型/控制器隔离在一个引擎中，一种方法是利用**ActiveSupport::Concern**将引擎的功能明确包含在 MainApp 中。

更多信息，[ActiveSupport::Concern 上的 Rails 文档](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

ActiveSupport::关注示例：

```
# Rails Engine
module SomeEngine
  module SomeController

    extend ActiveSupprt::Concern

    included do
      before_filter :some_before_filter
    end

    # regular instance methods
    def index 
      ...
    end

    protected
    def some_before_filter
      ....
    end

  end
end    

# MainApp
class SomeController < BaseController
  include SomeEngine::SomeController

  # rest of MainApp logic
end 
```

另一种常见的方法是**在运行时重写一个 Ruby 类方法（“开放类”）**。[Spree](https://github.com/spree/spree)通过在 MainApp 中为 Engine 模型/控制器类实现“装饰器”模式来做到这一点。

更多信息在这里，[Spree 对装饰器的实现](http://guides.spreecommerce.com/logic_customization.html)

“#class_eval 做”示例，

```
# in MainApp
SomeEngine::SomeController.class_eval do
  # logic added in the MainApp
end 
```

我还会查看 RailsConf 的 RailsEngnes 演讲，
[http: //confreaks.com/videos/863-railsconf2012-rails-engines-patterns](http://confreaks.com/videos/863-railsconf2012-rails-engines-patterns)

# objective-c - 保存到 NSUserDefaults 的字典中的 NSDecimalNumbers 列表

> ID：13755145
> 
> 赞同：2
> 
> 时间：2012-12-07T00:33:34.647
> 
> 标签：objective-c, cocoa

我正在尝试将货币汇率列表保存在 NSMutableDictionary 中。字典的键是货币代码（例如：@“AUD”、@“CAD”等）值是 NSDecimalNumbers 与美元的转换率。当我第一次创建字典时，这一切都很好（加载货币数据后来自网络服务）。但是，当我尝试保存字典并从 NSUserDefaults 重新加载它时，值会正确返回（由字典的 NSLog 验证）但它们是 __NSCFNumber 而不是 NSDecimalNumber。

这就是我保存字典的方式：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:self.exchangeRatesDict forKey:kExchangeRateDictDefaultsKey];
[userDefaults synchronize]; 
```

这就是我加载它的方式：

```
self.exchangeRatesDict = [[userDefaults objectForKey:kExchangeRateDictDefaultsKey] mutableCopy]; 
```

有没有办法用 NSUserDefaults 中的 NSDecimalNumbers 列表保存字典，还是我需要以不同的方式保存它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:38:44.463

`NSDecimalNumber`继承自`NSNumber`，这意味着它可以保存到 plist。这一切都很好。当然，在 plist 中，它几乎肯定会被表示为浮点数。并且当重新读入 plist 时，这些值将被反序列化为`NSNumber`s 而不是`NSDecimalNumber`. 这是因为 plist 格式没有明确支持`NSDecimalNumber`，所以它像对待任何其他`NSNumber`.

您可能想要做的是，而不是直接保存字典，而是创建字典的副本，将每个字典替换`NSDecimalNumber`为其字符串表示形式。然后，当您从那里读回它时，`NSUserDefaults`您可以进行反向翻译，将每个字符串转换回`NSDecimalNumber`.

# oracle - 您可以打开一个游标并从声明块中定义的游标中返回它吗？

> ID：13755152
> 
> 赞同：0
> 
> 时间：2012-12-07T00:34:44.063
> 
> 标签：oracle, cursor

我想做这样的事情

```
CREATE OR REPLACE FUNCTION return_cursor RETURN SYS_REFCURSOR IS
        CURSOR theCursor IS
            SELECT 1
            FROM dual;
        myCursor SYS_REFCURSOR;

    BEGIN
        OPEN myCursor for theCursor;
        RETURN myCursor;
END return_cursor; 
```

有没有办法做到这一点？，我想要这样做的原因是因为我在包的全局范围内定义了一些游标，并且不想重新编写它们以调用函数。

我知道，我可以删除全局光标并始终使用该功能，但我仍然想知道这是否可能。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:01:13.477

pl/sql 游标和 refcursor 是不可互换的，所以不，你不能像那样直接做你想做的事。

一种选择是改用视图，即

```
create view theCursor as select 1 from dual; 
```

然后在您的包中，只需从使用光标的视图中选择。即代替

```
for r_row in theCursor 
```

写

```
for r_row in (select * from theCursor) 
```

并且对于 refcursor

```
open myCursor for select * from refCursor; 
```

这样您就不必为这种情况重写视图 SQL。

# search - sed - 如何使用子字符串作为将由子字符串的一部分找到的变量？

> ID：13755154
> 
> 赞同：2
> 
> 时间：2012-12-07T00:35:18.860
> 
> 标签：search, insert, replace, sed, substring

我需要插入/替换子字符串，它将按子字符串的一部分找到。有人知道怎么做吗？

输入：

```
#include  "PARTblabla.h" 
```

输出：

```
#include  "src/PARTblabla/PARTblabla.h" 
```

抽象的：

```
echo '#include  "PARTblabla.h"' | sed "s/\#include.*\"PART/\#include \"src\/PARTblalbal<!.h>/" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:47:36.433

我不清楚您修复了字符串的哪一部分。假设 PART 是固定的并且 blabla 部分可以变化：

```
sed 's!^\(#include *\)"PART\([^"]*\).h"!\1"src/PART\2/PART\2.h"!' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:59:23.390

这可能对您有用（GNU sed）：

```
sed -r 's|(#include.*")(PART)|\1src/\2|' file 
```

或者

```
sed -e 's|\(#include.*"\)\(PART\)|\1src/\2|' file 
```

# asp.net-mvc - 全局 mvc 过滤器或 httpmodule

> ID：13755156
> 
> 赞同：1
> 
> 时间：2012-12-07T00:35:25.420
> 
> 标签：asp.net-mvc, asp.net-mvc-4, httpmodule

我目前正在开发一个 MVC4 应用程序。我有一个网络表单背景，这是我的第一个 MVC4 应用程序。

在每个页面的请求上，我需要触发一个操作，将一些项目放在 httpcontext 中，以便在进一步处理中重用。通常对于 web 表单，我会为此使用 http 模块，并在模块请求的开头执行任务。或者有时，我会有需要在 PostAcquireRequestState 等处触发的操作。

但是现在我正在使用 MVC，创建一个在每个控制器操作期间触发的全局过滤器是更好的做法吗？在过滤器中，我将放置与 httpmodule 中相同的逻辑。这种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:27:51.943

过滤器稍后在 MVC 请求处理管道中执行。对于诸如设置文化之类的事情，我建议尽可能早地这样做，就像在`Application_AcquireRequestState`活动中一样。

我猜模型绑定比过滤器更早发生，因此您将面临一些与文化相关的问题[http://gedgei.wordpress.com/2011/09/17/asp-net-mvc-localization-using-actionfilter/](http://gedgei.wordpress.com/2011/09/17/asp-net-mvc-localization-using-actionfilter/)。在这种情况下，我会投票支持自定义`HttpModule`过滤器。

[http://weblogs.manas.com.ar/smedina/2008/12/17/internationalization-in-aspnet-mvc/](http://weblogs.manas.com.ar/smedina/2008/12/17/internationalization-in-aspnet-mvc/)

# symfony - Symfony2在实体存储库中获取用户ID

> ID：13755159
> 
> 赞同：6
> 
> 时间：2012-12-07T00:36:02.737
> 
> 标签：symfony, entity, acl

我编写了一个显示系统所有管理员的页面。我想要做的是自定义我的查询，以便它将当前经过身份验证的用户从列表中排除。
现在我知道我可以`user_id`从控制器获取并将其传递给实体存储库，但我想知道是否有办法直接通过实体存储库访问它？

例如：

```
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;

class AdminUserRepository extends EntityRepository implements UserProviderInterface
{
   public function getAdmins($int = 10, $offset = 0, array $orderBy = array('admin_id', 'asc')){
        $admin_id = fetch the admin id ?;
        $query = $this->createQueryBuilder('admins')
            ->where("admins.admin_id != '".$admin_id."'")
            ->orderBy('admins.'.$orderBy[0], $orderBy[1])
            ->setFirstResult($offset)
            ->setMaxResults($int)
            ->getQuery()
            ->getResult();
        return $query;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:47:05.683

因此，您有一个当前的用户 ID（比方说， ），并且您想为 ID*不*等于`$currentUserId`的所有用户编写查询？*`$currentUserId`*

 *试试这个：

```
class SomeController
{
    public function someAction()
    {
        ...

        $qb = $userRepository->createQueryBuilder("user")
            ->where("user.id != ?1")
            ->setParameter(1, $currentUserId);

        $usersExcludingCurrent = $qb->getQuery()->getResult();

    ...
    }
} 
```

***编辑***

啊，我明白你在说什么...

好吧，存储库确实应该对自身之外的任何事物视而不见。也就是说，它不是容器感知的，因此不应该知道当前用户是谁。

我的建议是为您的存储库提供一个函数，该函数可以获取除特定用户或用户 ID 之外的所有内容。就像是：

```
class AdminUserRepository extends EntityRepository implements UserProviderInterface
{
    public function getAllAdminsExcept($userId, $int = 10, $offset = 0, array $orderBy = array('admin_id', 'asc'))
        {
            ...
        }
} 
```

然后将“当前用户”逻辑放入您的控制器中。您甚至可以定义一个可以同时访问`@security`和的服务，并在其中包含`@doctrine`所有逻辑。您的电话，但我想说您绝对应该让您的存储库不知道安全服务中发生的任何事情。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-07T00:40:42.783

您可以通过以下方式检索用户对象

```
public function indexAction()
{
    $user = $this->getUser();
} 
```

槽控制器或通过 Twig 模板查看：

```
<p>Username: {{ app.user.username }}</p> 
```

此示例来自[symfony 2 doc](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)。*

# c# - 我需要在 OnModelCreating(DbModelBuilder modelBuilder) 函数中添加什么来定义 Person 和 Role 之间的关系？

> ID：13755163
> 
> 赞同：20
> 
> 时间：2012-12-07T00:36:33.157
> 
> 标签：c#, entity-framework, entity-framework-5, dbcontext

我在 WinForms 项目 .net 4.5 中使用 EntityFramework 5.0 版。

我为我创建了 2 个重要实体

```
 public class Role
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }
        public string Name { get; set; }
        public bool StockPermission { get; set; }
        public bool ItemPermission { get; set; }
        public bool OrderPermission { get; set; }
        public bool PersonPermission { get; set; }
        public bool StatisticPermission { get; set; }
    }

    public class Person
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }
        public String Name { get; set; }
        public String Nickname { get; set; }
        public String Contact { get; set; }
        public System.DateTime Created { get; set; }
        public String Pincode { get; set; }

        public virtual ICollection<Role> Role { get; set; }
        public virtual Person Creator { get; set; }
    } 
```

和 dbContext 类：

```
 public class SusibarDbContext : DbContext
    {
        public DbSet<Entity.Role> Roles { get; set; }
        public DbSet<Entity.Person> Persons { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            //base.OnModelCreating(modelBuilder);
        }
    } 
```

拜托，你能帮我在`OnModelCreating(DbModelBuilder modelBuilder)`函数中添加什么来定义Person和Role之间的关系吗？

Person 可以有多个 Role(s)（但不能为 null），不同的 Person 可以有相同的 Role(s)。

Person 可以有一个“创建者”Person（可以为 null），不同的 Person 可以有相同的“创建者”

如果你能这么好，请告诉我解决方案:-(

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T08:59:57.003

如果您想为此使用 Fluent API，请查看 MSDN 中的[此主题](http://msdn.microsoft.com/en-US/data/jj591620)。您应该使用多对多关系，并且 EF 将创建一个表，以应对 Person 可以拥有多个角色且角色拥有多个 Person 的情况。像这样的东西：

```
modelBuilder.Entity<Person>().HasMany(x => x.Roles).WithMany(); 
```

您也可以在不使用 Fluent API 的情况下创建这种关系。您应该在 Role 类中创建导航属性`ICollection<Person> Persons`，EF 也会创建适当的表和关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:16:45.960

像这样的东西应该可以完成这项工作：

创建一个名为`PersonRole`. 这是为了模拟 a`Person`和 a之间的关系`Role`。

```
public class PersonRole
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public Person Person { get; set; }
    public Role Role { get; set; }
} 
```

在`Person`类中，替换：

```
public virtual ICollection<Role> Role { get; set; } 
```

和：

```
public virtual ICollection<PersonRole> PersonRoles { get; set; } 
```

如果你愿意，你可以在`Role`类中添加以下内容：

```
public virtual ICollection<PersonRole> PersonRoles { get; set; } 
```

这样做是可选的，但如果您希望`People`使用部分`Role`.

在`OnModelCreating`方法中，使用此代码确保 a`PersonRole`将强制执行不可为空`Person`的`Role`属性。

```
modelBuilder.Entity<PersonRole>().HasRequired(p => p.Person);
modelBuilder.Entity<PersonRole>().HasRequired(p => p.Role); 
```

**编辑：**

创建 POCO 的原因`PersonRole`是为了确保 a`Role`可以在不同用户之间重复使用。使用现有的`public virtual ICollection<Role> Role { get; set; }`将起作用，但它可能不会按预期工作。

有了关系`public virtual ICollection<Role> Role { get; set; }`，EF 要做的是`Role`用一个额外的字段来扩充表，例如，`PersonId`，它将用于将 a`Person`与它们的相关联`Roles`。这样做的问题很明显：没有链接`PersonRole`表，您将无法为两个人提供相同的`Role`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:56:31.857

尽管不能直接回答您的问题，但请使用 EF 命名约定来避免注释并保持实体类的清洁。我将演示两种情况：

**一 - 许多使用 EF 命名约定**

角色有很多人，人只有一个角色

**一 - 许多不存在命名约定的地方（相同类型的父子）**

人有很多创造者，人有一个创造者）

```
public class Role
{
    public int RoleId { get; set; }
    public string Name { get; set; }
    ...

    public virtual ICollection<Person> Persons { get; set; }
}

public class Person
{
    public int PersonId { get; set; }
    public int CreatorId { get; set; } 
    public int RoleId { get; set; } 
    ...

    public virtual Role Role { get; set; }
    public virtual Person Creator { get; set; }
    public virtual ICollection<Person> Created { get; set; }
} 
```

对于 OnModelCreating 中的 Creator-Created 关系：

```
modelBuilder.Entity<Person>()
    .HasOptional(p => p.Creator)
    .WithMany(p => p.Created)
    .HasForeignKey(p => p.CreatorId); 
```

使用“ClassName”+“Id”（区分大小写），EF 将自动假定它是主键/标识符。由于虚拟映射与 PrimaryKey "RoleId" 结合，将自动创建 Role-Person 关系

# django - 在 django 表单中显示预填充的字段

> ID：13755164
> 
> 赞同：0
> 
> 时间：2012-12-07T00:36:35.787
> 
> 标签：django, django-forms, django-admin

我正在开发一个需要向多个用户发送电子邮件的应用程序。从单独的管理页面中挑选用户，然后在“发送时事通讯”操作中创建时事通讯对象，并将 HttpResponseRedirect 返回到时事通讯的管理编辑页面。我想要做的不是为收件人提供多个选择列表（列表中的地址太多，无法使用）我只想有一个 div 列出所选的电子邮件地址以供参考，没有任何编辑能力。我怎么做？

不知道为什么这是相关的，但时事通讯模型看起来像这样

```
class Newsletter(models.Model):                                                                                                                                                                                     
    owner = models.ForeignKey(User, related_name='+', blank=False)                                                                                                                                                  
    sent = models.BooleanField(default=False)                                                                                                                                                                       
    date_created = models.DateTimeField(auto_now_add=True)                                                                                                                                                          
    date_sent = models.DateTimeField(null=True)                                                                                                                                                                     
    subject = models.CharField(max_length=255)                                                                                                                                                                      
    content = HTMLField()                                                                                                                                                                                           
    recipients = models.ManyToManyField(Email, related_name='+')                                                                                                                                                    

class Meta:                                                                                                                                                                                                     
    ordering = ['date_sent', 'date_created'] 
```

没有视图，我想要的是在 django admin 中将收件人显示为不可编辑的电子邮件地址列表。我不想只禁用小部件，因为电子邮件模型中有太多电子邮件，我只想在管理员编辑页面的某处列出为此特定时事通讯选择的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:13:07.040

最简单的方法：只读字段。

```
class MyAdmin(admin.ModelAdmin):
   readonly_fields = ('_recipients', )
   fields = ('_recipients',)

   def _recipients(self, obj):
     return u', '.join([x.email for x in obj.recipients.all()])
   _recipient 
```

# javascript - Javascript没有在jade中呈现

> ID：13755170
> 
> 赞同：4
> 
> 时间：2012-12-07T00:37:31.860
> 
> 标签：javascript, node.js, pug

我无法从玉内部调用我的 script.js 文件，尽管如果插入内联，javascript 渲染得非常好。这是我的第一次尝试，所以 js 文件只是一个警报：

```
alert("javascript works"); 
```

我倾向于相信我不正确地调用脚本。目前 layout.jade 看起来像：

```
doctype 5
html
  head
    title= "LeafPress - Hot off the Presses"
    link(rel='stylesheet', href='/stylesheets/style.css')
  block scripts
    script(type='text/javascript', src='/javascripts/script.js')
  body
    block content 
```

我尝试了脚本路径的多种排列（../public/javascripts/script.js；/public/javascripts/script.js；public/javascripts/script.js；javascripts/script.js；script.js )，以及尝试将脚本直接放在根目录和“视图”目录中。

应用程序.js：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes/index')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/permalink', routes.permalink);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

index.js：

```
/*
 * GET home page.
 */

exports.index = function(req, res){
  res.render('index', { title: 'Express' });
};

exports.permalink = function(req, res) {
  res.render('permalink', { title: 'Comments page' });
}; 
```

我的相关文件层次结构如下所示：

```
- public
  - javascripts
    - script.js
- views
  - index.jade
  - layout.jade
- routes
  - index.js

app.js 
```

这似乎是相关的，但没有解决问题：[静态 javascript not rendering in jam (with express/node.js)](https://stackoverflow.com/questions/9524151/static-javascript-not-rendering-in-jade-with-express-node-js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:33:37.443

尝试完全删除此行`app.use(app.router);`。手动更改快速中间件堆栈中路由器的位置通常会产生不良行为。除非你真的确定你确切地知道你为什么这样做以及你期望发生什么，否则不要这样做。臭名昭著的快速记录器的输出是什么`cannot GET /javascripts/script.js`，它将直接指向中间件/路由错误配置。

我猜你的降价语法是你的问题刚刚被解决，但要确保`script.js`文件在`javascripts`目录中，而不是它的兄弟。

# php - 如何使用 codeigniter 和 mysql 将自动完成添加到多个输入

> ID：13755173
> 
> 赞同：0
> 
> 时间：2012-12-07T00:37:37.663
> 
> 标签：php, jquery, mysql, autocomplete, codeigniter-2

我有一个包含 3 个字段的表单，每个字段我都想使用 jquery 自动完成功能为我自动完成所有这些字段。所以我写了这段代码

html

```
<input type='text' class='completeme' name='name'/>
<input type='text' class='completeme' name='job'/>
<input type='text' class='completeme' name='lasname'/> 
```

js

```
$('input.completeme').each(function() {
    $(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>patients/autocomplete',
                data: { 'term': this.value},
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
});
}); 
```

并将两者都添加到视图中，并创建了一个名为 patients.php 的控制器，控制器自动完成

代码

```
function Autocomplete(){
$this->load->model('Autocomplete');
    $term=$this->input->post('term');
    if(sizeof($term) > 2){      
        $options=array('table'=>'patients','field'=>'patient_name','term'=>$term);
        $q=$this->Autocomplete->GetAutocomplete($options);
        foreach($q as $q)$json[]=$q->patient_name;
        echo json_encode($json);
} 
```

现在我的问题是

1.  它不起作用：D ..当我检查萤火虫发布请求时，它没有发布任何值。
2.  我如何在自动完成请求中传递字段名称以及其搜索的术语？
3.  是否有任何已经存在的 codeigniter 助手/自定义库可以以更清洁的方式做到这一点？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:40:22.043

我假设您有正确的网址发布到。这是我在您的代码中看到的问题：

```
$('input.completeme').each(function() {
    $(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>patients/autocomplete',
                data: { 'term': this.value}, <--you should not get the value here
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
});
}); 
```

它应该是这样的：

```
$('input.completeme').each(function() {
  var term = this.value; //get the value here
    $(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>patients/autocomplete',
                data: { 'term': term}, 
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
});
}); 
```

还要确保返回的 json 格式正确，以便 jquery ui 可以读取它。

# drupal - Feed 导入不会导入所有 CSV 项目

> ID：13755174
> 
> 赞同：1
> 
> 时间：2012-12-07T00:37:49.537
> 
> 标签：drupal, csv, drupal-nodes

我在我的网站上设置了一个提要导入器。它读取 csv 文件并将项目导入站点。然后，它为每一行创建一个节点。它工作得很好，除了它从不从文件中导入所有项目。如果文件中有 10、50 或 300 个项目，就是这种情况。

我在下面附上了一个截图。箭头显示创建了 35 个节点的通知，然后在下方的状态下显示创建了 28 个节点。通常未创建的项目是批次中成功导入的项目的副本。但是，一些未导入的节点不是重复的。

有人对此有任何意见吗？我似乎找不到任何引用此类问题/错误的地方。

谢谢你。

![在此处输入图像描述](../Images/90543db75405c8a97e4b690b297eaa67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:44:17.847

您使用什么来生成 CSV 文件？如果它是从 Excel 或 Calc 等通用应用程序导出的数据，那可能没问题，但如果您使用的是从自定义应用程序导出的 CSV，那么它可能会有奇怪的行尾（windows、unix 和 mac all有不同的方式来表示文本文件中的行尾）或不一致的字段分隔符，或没有被双引号括起来的字符串（因此字段中的数据被误解为行尾或字段分隔符），或或或....任何东西. CSV 没有标准。

尝试将 CSV 文件导入 Excel 或 Calc。你能把它正确地放入电子表格吗？如果是这样，将该电子表格导出为新的 CSV，并查看是否可以使用 Feeds 模块导入。

# c# - 工厂模式使对象使用不同的数据源

> ID：13755177
> 
> 赞同：0
> 
> 时间：2012-12-07T00:38:06.493
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, datasource, factory-pattern

我想要一个在 HTTPSession 中存储一些数据的类“DataSaver”。但我也希望能够改变主意，让工厂类创建一个对象，然后将其保存到文件或数据库中。

我希望能够像这样创建 DataSaver 对象：

IDataSaver obj = DataSaverFact.Create();

但显然，数据源将需要不同的资源，具体取决于实例化的对象（即保存在会话中的类将需要当前的 HTTPSession，数据库版本将需要连接字符串等...）

但我不想将任何东西传递给创建方法。

这甚至可能吗？

我正在考虑在我的工厂类中使用依赖注入，如下所示：

```
public interface IDataSaverFact
{
    IDataSaver Create();
}

public interface IDataSaver
{
    public void Save(Object data);
}

public SessionSaver : IDataSaver
{
    //PARAMETER REQUIRED SINCE SESSION ONLY AVAILABLE FROM CALLER DURING WEB REQUEST
    public SessionSaver(HTTPSession session)
    {
    }

    public void Save(Object data) {....}
}

public FileSaver : IDataSaver
{
    //NO PARAMETER HERE. THIS WILL JUST SAVE TO A FILE FROM CONFIG
    public FileSaver ()
    {
    }

    public void Save(Object data) {....}
}

public DataSaverFact : IDataSaverFact
{
    public IDataSaver Create()
    {
        * IS IT POSSIBLE/APPROPRIATE TO HOOK THIS UP VIA A DI FRAMEWORK? *
        return new SessionSaver(session);
    }
} 
```

我已经看过几个例子，比如这里[Is there a pattern for initializing objects created via a DI container](https://stackoverflow.com/questions/1943576/is-there-a-pattern-for-initializing-objects-created-via-a-di-container/1945023#1945023)，这似乎与我上面的内容很接近，除了链接的示例在创建时传递参数。

我不希望创建根据对工厂的调用而有所不同，但如果出于技术原因决定更改数据源，我希望能够在编译时更改 DataSaver。

然后我会把我的工厂类改成

```
public DataSaverFact : IDataSaverFact
{
    public IDataSaver Create()
    {
        return new FileSaver();
    }
} 
```

*编辑，这将在 MVC3 项目中使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:52:44.327

如果你已经定义了一个接口，并且具体对象的类型是在编译时定义的，那么我根本不明白你为什么需要 DI。您可以只拥有一个配置文件，其中包含工厂用来决定创建哪个对象的值。

例如

```
public DataSaverFact : IDataSaverFact
{
    public IDataSaver Create()
    {
      if config setting = "FileSaver" then
        return new FileSaver();
      else
        return new SessionSaver();
    }
} 
```

如果您想避免硬编码的 IF 语句，那么您可以将类型定义存储在配置文件中，然后使用 Activator.CreateInstance 实例化返回对象

# php - 显示随机 mysql 记录 - PHP

> ID：13755182
> 
> 赞同：1
> 
> 时间：2012-12-07T00:38:33.963
> 
> 标签：php, html, mysql

我试图从我的桌子上显示一条随机记录，但没有运气，这就是我所要做的。这是用 PHP 编码的

```
$range_result = mysql_query("SELECT MAX() AS max_id , MIN() AS min_id FROM pages");
$range_row = mysql_fetch_object( $range_result ); 
$random = mt_rand($range_row->min_id , $range_row->max_id);
$result_random = mysql_query( "SELECT * FROM pages WHERE id >= $random LIMIT 0,1");
echo $result_random; 
```

想知道这是否是一个明显的错误？我已经很好地连接到数据库。

JB

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T00:40:15.070

您应该使用具有`mysqli_multi_query`性能的直接 SQL 来执行此操作：

```
// First query gets the random ID, second gets the associated row
$sql = "SELECT @id:=FLOOR(RAND()*(MAX(id) - MIN(id))) + MIN(id) FROM pages; 
        SELECT * FROM pages WHERE id = @id;"

// Create a mysqli object and execute the multi-query
$mysqli = new mysqli($host, $user, $pass, $db_name);
$mysqli->multi_query($sql);
$result = $mysqli->store_result();

// Grab the first row from the first resultset
if ($row = $result->fetch_assoc()) {
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:39:48.417

为什么不直接使用 rand()：

```
"SELECT * FROM pages ORDER BY RAND() Limit 1" 
```

但要回答，如果未定义，MIN 和 MAX 选择什么？您是否应该尝试：

```
"SELECT MAX(`id`) AS max_id , MIN(`id`) AS min_id FROM pages" 
```

而且我认为您不需要限制中的偏移量。所以只有 LIMIT 1 可能就可以了。

正如评论所述，对于较大的数据集，RAND() 可能会很慢，但在许多情况下，这不是问题，并且延迟很小，除非您拥有大量数据。阅读 frank 的链接以查看详细信息。不过，就我个人而言，我从来没有真正遇到过 RAND() 速度的问题。

正如迈克尔所说，您可能应该在回应您认为的结果集之前尝试获取结果。

此外，不推荐使用 mysql_ 函数。您应该切换到[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/class.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:44:29.697

虽然通过 RAND() 订购会更好，但您的方法会起作用。你的问题是你试图回显一个 mysql 结果集。你需要在你的代码之后做这样的事情：

```
$row = mysql_fetch_assoc($result_random);
echo $row['field1'] . " " . $row['field2']; 
```

其中 field1 和 field2 是表中列的名称。

# javascript - 从字符串中删除文本

> ID：13755187
> 
> 赞同：0
> 
> 时间：2012-12-07T00:38:49.737
> 
> 标签：javascript, jquery

我想`<img>`从数据库返回的字符串中去除标签及其内容。

**示例字符串**

```
//I want to retrive dummy texts from my string.
var string = "<img src='test.jpg'/>dummy texts <img src='text.jpg'/> dummby text dummy texts"; 
```

我试过了

```
if (string.indexOf('<img') != -1) {
    var newString = $(string).filter(function() {
        return this.tagName != 'img';
    }).text();
} 
```

但是，我的数据库有糟糕的数据，有时会返回

```
//There is no closure for image tag. 
var string = "<img src='test.jpg'/>dummy texts <img src='text.jpg'/> dummby text dummy texts"; 
```

我的代码会剥离整个字符串。

图像标签位置不同。

如何`<img>`有效地剥离标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:49:46.427

```
var str  = "<img src='test.jpg'>dummy texts <img src='text.jpg'>",
    text = ​$('<div />').append(str).remove('img').text(); 
```

[**小提琴**](http://jsfiddle.net/sL6sV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:44:03.660

好吧，正确的答案是您[不使用 regex 解析 HTML](https://stackoverflow.com/a/1732454/271475)。您需要使用适当的 XML 解析器。幸运的是，您的浏览器就是其中之一！您可以尝试使用 jQuery 的文档片段：

```
function stripImages(markup) {
  var fragment = $("<body></body>").html(markup);
  fragment.find("img").remove();
  return fragment.html();
}

var s = "<img src='test.jpg'/>dummy texts <img src='text.jpg'/> dummby text dummy texts"
stripImages(s); 
```

这将创建一个文档片段，让您剥离图像标签，然后取回经过净化的 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:52:43.307

对我有用的是将字符串包装在一个 DOM 元素中，您可以像这样动态创建它：

```
var el = $('<div>');
el.html("<img src='test.jpg'>dummy texts <img src='text.jpg'> dummby text dummy texts");
el.find('img').remove();
console.log(el.html()); 
```

然后只需搜索并删除特定元素（图像或其他）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T01:16:17.313

也可以在不先附加的情况下做到这一点。

```
var str = "<img src='test.jpg'/>dummy texts <img src='text.jpg'/> dummby text dummy texts";
str = str.replace(/<img[^>]+>/g, ''); 
```

# java - YUV TO RGB 结果为负值

> ID：13755189
> 
> 赞同：3
> 
> 时间：2012-12-07T00:39:11.780
> 
> 标签：java, android, image, rgb, yuv

我正在使用 java 开发一个应用程序，它将 YUV 像素（x，y）转换为 RGB 像素，这就是我所做的：（数据是 YUV 字节数组）

```
int Y = data[ y * width + x];
            int U = data[ (int) (width * height + Math.floor(y/2) * Math.floor(width/2) + Math.floor(x/2) + 1)];
            int V = data[ (int) (width * height + Math.floor(y/2) * (width/2) + Math.floor(x/2) + 0)];

            int B = (int) (1.164*(Y - 16)+ 2.018*(U - 128));

            int G = (int) (1.164*(Y - 16) - 0.813*(V - 128) - 0.391*(U - 128));

            int R = (int) (1.164*(Y - 16) + 1.596*(V - 128)); 
```

但是最后我发现我得到的RGB值是负数。有人可以帮我弄这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:03:17.717

YUV 有很多“味道”，有时会与 YCbCr 混淆。您的公式似乎适用于 Y 在 [16,235] 中的格式，但是，我可以告诉您，这对于 Android 中返回的 NV21 图像格式（一种标准 YUV 平面）不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T17:25:46.270

[这个 YUV Wikipedia 页面](https://en.wikipedia.org/wiki/YUV#Mathematical_derivations_and_formulas)上有一个类似的 C++ 转换。

在公式转换代码之后，R、G、B 值被限制在 0-255 之间。

你在Java中尝试过类似的东西吗？

@MelindaGreen[对另一个问题的回答](https://stackoverflow.com/a/30881059/249623)包括一种进行 yuv->rgb 转换的方法，该方法也会产生负 RGB 值。

将负值设置为 0 会产生对我来说看起来正确的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T06:19:02.657

```
//
// C++ code to convert between RGB and YUV where values are 0..255.
//

typedef struct XYZ {
    double x,y,z;
};

XYZ rgb2yuv(double r, double g, double b)
{
    XYZ xyz;

    double R = r/255.0;
    double G = g/255.0;
    double B = b/255.0;

    double Y =  0.299*R + 0.587*G + 0.114*B;
    double U = -0.147*R - 0.289*G + 0.436*B;
    double V =  0.615*R - 0.515*G - 0.100*B;

    xyz.x = Y*255.0;
    xyz.y = (U+0.5)*255.0;
    xyz.z = (V+0.5)*255.0;

    return xyz;
}

XYZ yuv2rgb(double y, double u, double v)
{
    XYZ xyz;

    double Y = y/255.0;
    double U = u/255.0-0.5;
    double V = v/255.0-0.5;

    double R = Y + 1.140*V;
    double G = Y - 0.395*U - 0.581*V;
    double B = Y + 2.032*U;

    xyz.x = R*255.0;
    xyz.y = G*255.0;
    xyz.z = B*255.0;

    return xyz;
} 
```

# android - setOnItemClickListener 事件监听器的问题

> ID：13755190
> 
> 赞同：0
> 
> 时间：2012-12-07T00:39:17.730
> 
> 标签：android

当用户单击文本视图中的值时，我试图打开一个新活动。这里的 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Get change in selected projects group & show group accordingly
    RadioGroup rgProjectGroupsToLoad = (RadioGroup) findViewById(R.id.rgProjectGroupsToLoad);
    rgProjectGroupsToLoad.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener()
    {
        public void onCheckedChanged(RadioGroup rGroup, int checkedId)
        {
            // Get the vocab needed to provide options
            Resources res = getResources();
            String[] region_values = res.getStringArray(R.array.regions);
            String[] priority_values = res.getStringArray(R.array.priorities);
            String[] curr_values = region_values;

            TextView tvGroupingHeader = (TextView) findViewById(R.id.listRegionsPrioritiesHeader);

            RadioButton checkedRadioButton = (RadioButton)rGroup.findViewById(checkedId);
            boolean isChecked = checkedRadioButton.isChecked();
            if (isChecked)
            {
                String selected_group = (String) checkedRadioButton.getText();
                Log.w("myApp", "Project Group selected: " + selected_group);
                tvGroupingHeader.setText(selected_group);
                if (selected_group.equals("Geographic Regions"))
                {
                    curr_values = region_values;
                }
                else
                {
                    curr_values = priority_values;
                }
                // Project Group Adapter for ListView
                ArrayAdapter<String> proj_group_adapter = new ArrayAdapter<String>(
                        getBaseContext(),
                        android.R.layout.simple_list_item_1, 
                        android.R.id.text1, 
                        curr_values
                );
                ListView lvRegionsPriorities = (ListView) findViewById(R.id.listRegionsPriorities);
                lvRegionsPriorities.setAdapter(proj_group_adapter); 

                // Show hidden elements
                TextView tv = (TextView) findViewById(R.id.listRegionsPrioritiesHeader);
                tv.setVisibility(View.VISIBLE);
                ListView lv = (ListView) findViewById(R.id.listRegionsPriorities);
                lv.setVisibility(View.VISIBLE);
            }
        }
    });
} 
```

我试过设置`lvRegionsPriorities.setOnItemClickListener`，但这只会产生很多错误，我在谷歌搜索时找不到任何结果。

那么，有人可以在这里帮忙吗？如何正确设置事件监听器？

谢谢埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:13:26.030

如果`TextView`在您的活动中：

```
TextView tv = (TextView) findViewById(...);
tv.setOnClickListener(new OnClickListener{
    public void onClick(View v){
    Intent i = new Intent(CurrentActivity.this, NextActivity.class);
    startActivity(i);
    }
}) 
```

如果您想在点击给定项目时打开活动`ListView`

让您的活动实施`OnItemClickListener()` In `OnCreate()`: lvRegionsPriorities.setOnItemClickListener(this);

在其他地方覆盖：

```
public void onItemClick(View v, int position, long id){
     if (position == xx){ // check your condition here
         Intent i = new Intent(CurrentActivity.this, NextActivity.class);
         startActivity(i);         
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:54:13.693

我没有看到您尝试开始新活动的任何内容。我确实看到您试图在同一活动中显示隐藏的视图。您使用 Intents 开始一项新活动。如果问题是当您单击它时您的视图没有出现，则可以尝试将它们启动为可见并查看它们是否显示。它可能与单选按钮无关。

# asp.net - ASP.NET [Web-Forms]：选中嵌套在另一个 Listview 中的 Listview 中的所有复选框

> ID：13755192
> 
> 赞同：0
> 
> 时间：2012-12-07T00:39:26.053
> 
> 标签：asp.net, listview, checkbox, nested

我有以下情况：

```
[ ] Supervisor 1
    [ ] Employee 1
    [ ] Employee 2
    [ ] Employee 3

[ ] Supervisor 2
    [ ] Employee 7
    [ ] Employee 8 
```

假设 [ ] 代表一个复选框，我想要做的是如果我选中（主管 1）旁边的复选框，我只想选中（员工 1、2、3）旁边的复选框，如果我选中旁边的复选框（主管 2）我只想选中复选框（员工 7 和 8）

```
<asp:ListView ID="SupervisorsListView" runat="server" />
    <ItemTemplate>
        <asp:CheckBox ID="chkSupervisor" runat="server" />

        <asp:ListView ID="EmployeesListViews" runat="server" >
            <ItemTemplate>
                <asp:CheckBox ID="chkEmployee" runat="server" />
            </ItemTemplate>
        </asp:ListView>

    </ItemTemplate>
 </asp:ListView> 
```

我需要在客户端最好使用 jQuery 来实现这一点，任何人都可以给我一个关于如何实现这一点的提示吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:54:21.097

当然，您可以使用树视图来使用它

试试这个 [http://docs.jquery.com/Plugins/Treeview/treeview](http://docs.jquery.com/Plugins/Treeview/treeview)

此外，您还需要进行一些编码以符合您的确切要求。

# basic-authentication - Weblogic服务器基本身份验证不提示输入用户名

> ID：13755195
> 
> 赞同：2
> 
> 时间：2012-12-07T00:39:46.393
> 
> 标签：basic-authentication, weblogic-10.x

我使用基本身份验证创建了一个非常简单的 Weblogic 10.3.5 Web 应用程序，由于某种原因它不会提示输入用户名和密码。我相信 web.xml 和 weblogic.xml 是正确创建的。整个*应用*程序如下。

它由两个文件组成：

1.  index.html - 任何人都应该能够加载
2.  remoteuser.jsp——只有“组”中的人才能加载

我`<auth-constraint>`为所有 JSP (*.jsp) 添加了一个，这样只有“组”中的用户才能加载它们。但是，当我加载 url“/remoteuser.jsp”时，它会显示“ `The remote user is null`”，并且不会提示输入用户名和密码。这会导致 JSP 也打印出来`null`而不是远程用户的名称。

`<auth-method>`当然，设置为 BASIC 。

我目前什至没有在 Weblogic 的安全领域中定义任何组，因为我想先看到它失败。

根据这个 Weblogic 文档（[http://docs.oracle.com/cd/E15051_01/wls/docs103/security/thin_client.html#wp1037337](http://docs.oracle.com/cd/E15051_01/wls/docs103/security/thin_client.html#wp1037337)），我相信我做的一切都是正确的。

我是否必须修改 Weblogic 安全领域的身份验证提供程序？还是其他设置？

我*知道*我在做一些愚蠢的事情，但看不到它。请帮忙！

* * *

**源文件**

**web.xml**

```
<web-app>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>JSPs</web-resource-name>
            <url-pattern>*.jsp</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>group</role-name>
        </auth-constraint>
    </security-constraint>

    <login-config>
        <auth-method>BASIC</auth-method>
    </login-config>

    <security-role>
        <role-name>group</role-name>
    </security-role>
</web-app> 
```

**weblogic.xml**

```
<weblogic-web-app>

     <security-role-assignment>
         <role-name>group</role-name>
         <principal-name>group</principal-name>
     </security-role-assignment>

</weblogic-web-app> 
```

**远程用户.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Remote User</title>
</head>
<body>
    <p>
        Only users in "group" should be able to load this page.
    </p>
    <p>
        The remote user is <%= request.getRemoteUser() %>
    </p>
</body>
</html> 
```

**索引.html**

```
<html>
<head><title>WebLogic Test</title></head>

<body>
    <h1>Everyone should be able to see this.<br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:12:16.963

嗯......它现在正在工作，但我不完全确定我究竟做了什么导致这种情况。

我知道它在使用“仅限 DD”或“自定义角色”的安全模型部署应用程序时有效。

但是，当使用“自定义角色和策略”部署时它会失败，这对我来说似乎非常混乱，因为对此的描述是这`Use only roles and policies that are defined in the Administration Console.` 正是我定义角色和策略的地方！叹。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-07T17:02:32.723

您正在 web.xml / weblogic.xml 上定义角色和策略。

如果您想使用自定义角色和策略，您可以从控制台中的应用程序角色 n 策略中进行配置。

# java - 如何创建秒计时器？

> ID：13755196
> 
> 赞同：0
> 
> 时间：2012-12-07T00:39:46.077
> 
> 标签：java, timer

我希望`int time = 0`每秒增加 1 次，并能够暂停和恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:23:10.173

对于计时器从这里开始[java timers tutorial](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)给它一个破解并在你卡住时问另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:23:52.447

```
final AtomicLong i = new AtomicLong(0);
Thread th = new Thread() {
    @Override
    public void run() {
        try {
            while (true) {
                long lastSeconds = System.currentTimeMillis() / 1000;
                sleep(100);
                long delta = System.currentTimeMillis() / 1000 - lastSeconds;
                i.getAndAdd(delta);
                if (delta > 0)
                    System.out.println(i.get());
            }
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
};

th.start(); 
```

# javascript - Jquery：用数组中的值替换字符串

> ID：13755199
> 
> 赞同：8
> 
> 时间：2012-12-07T00:39:58.303
> 
> 标签：javascript, jquery, arrays, replace

说我有这样的事情：

```
var array = [cat,dog,fish];
var string = 'The cat and dog ate the fish.'; 
```

我想从字符串中清除所有这些值

```
var result = string.replace(array,""); 
```

结果最终会是：`The and ate the .`

现在，`replace()`似乎只替换了数组中的一个值。我怎样才能使它在字符串中替换数组中的所有/多个值？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T00:42:30.253

您可以*创建*自定义正则*表达式*，也可以遍历字符串并手动替换。

```
array.forEach(function( word ) {
    string = string.replace( new RegExp( word, 'g' ), '' );
}); 
```

或者

```
var regexp = new RegExp( array.join( '|' ), 'g' );

string = string.replace( regexp, '' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:42:55.463

```
string.replace(new RegExp(array.join("|"), "g"), ""); 
```

# php - 处理 php 中已弃用的错误

> ID：13755208
> 
> 赞同：0
> 
> 时间：2012-12-07T00:41:01.313
> 
> 标签：php

我遇到`errors`的这些问题如何解决`php`

```
Deprecated: Function session_register() is deprecated in C:\xampp\htdocs\mysite\forum part two\login.php on line 62

Deprecated: Function session_register() is deprecated in C:\xampp\htdocs\mysite\forum part two\login.php on line 63 
```

我在第 62 行和第 63 行的代码分别如下

```
session_register("username", $username);
session_register("password", $password); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:42:47.597

来自[文档](http://php.net/manual/en/function.session-register.php)：

```
<?php
// Use of session_register() is deprecated
$barney = "A big purple dinosaur.";
session_register("barney");

// Use of $_SESSION is preferred, as of PHP 4.1.0
$_SESSION["zim"] = "An invader from another planet."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:41:53.183

改用超全局`$_SESSION`。

```
$_SESSION['username'] = $username; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:42:57.740

在向浏览器输出任何内容之前，将其放在`session_start();`脚本/页面的最顶部，并将这些行替换为：

```
$_SESSION['username'] = $username;
$_SESSION['password'] = $password; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T00:43:18.543

`$_SESSION['username'] = &$username;`

为了复制功能，您需要存储对变量的引用。

# mysql - 获取另一个表中的 COUNT() 和 ID 不存在的行

> ID：13755209
> 
> 赞同：1
> 
> 时间：2012-12-07T00:41:01.433
> 
> 标签：mysql, left-join

我有 2 张桌子：

```
current_challenges (challenge_id, award_type, award_at_count, expires_in_hours) 
```

和

```
user_challenges (user_challenge_id, user_id, challenge_id, awarded) 
```

`current_challenges`表格是挑战的类型，表格`user_challenges`当前是“活动的”并且已经“完成”了不同用户的挑战。这些表通过`challenge_id`. 一个已完成的挑战是一个带有`awarded`!= '0000-00-00 00:00:00' 的挑战，而 'active'`awarded`是一个设置的日期时间。

我想做的是获取一个`challenge_id`尚未由该特定用户完成的随机单曲，但如果该用户已经有 2 个`award_type`该用户处于活动状态，则不应选择它。

因此，对于每个用户，最多只能有 2 个挑战“活动”且具有相同的奖励类型。

例子：

当前挑战表：

```
challenge_id    award_type  award_at_count  expires_in_hours
49  1   1   24
50  1   2   24
51  1   3   24
52  2   4   24
53  2   5   24
54  2   6   24 
```

用户挑战表：

```
user_challenge_id   user_id     challenge_id    awarded
1   8   49  0000-00-00 00:00:00
2   8   50  0000-00-00 00:00:00
3   8   52  2012-12-06 13:58:27
4   11  53  0000-00-00 00:00:00
5   11  54  0000-00-00 00:00:00 
```

对于用户 8，`challenge_id`不会选择 49,50，因为它们已经处于活动状态。51 不会，因为已经有 2 个活动的`award_type`= '1'。52 不会，因为它已经完成，留下 53 或 54 作为返回`challenge_id`。

很抱歉，这篇文章很长，但希望尽可能清楚。过去一天我有一场戏，但无处可去……我猜在某个地方`LEFT JOIN`，`HAVING COUNT()`但我无法弄清楚……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:01:45.950

我认为这就是你想要的：

```
SELECT c.challenge_id
FROM current_challenges AS c
  LEFT JOIN
      ( SELECT cc.award_type                       --- find award types
        FROM current_challenges AS cc              --- with
          JOIN user_challenges AS ac            
            ON ac.challenge_id = cc.challenge_id   --- challenges
        WHERE ac.user_id = 8                       --- for this user
          AND ac.awarded = '0000-00-00'            --- that are active
        GROUP BY cc.award_type
        HAVING COUNT(*) >= 2                       --- and 2 or more
      ) AS ac
      ON ac.award_type = c.award_type
WHERE ac.award_type IS NULL                        --- and exclude them

  AND c.challenge_id NOT IN                        --- then exclude
      ( SELECT challenge_id                        --- any other challenges
        FROM user_challenges AS uc
        WHERE uc.user_id = 8                       --- for this user
      )
ORDER BY RAND()                                    --- order the result randomly
    LIMIT 1 ;                                      --- and choose one 
```

# linux - Mercurial Web 推送权限被拒绝

> ID：13755210
> 
> 赞同：0
> 
> 时间：2012-12-07T00:41:03.887
> 
> 标签：linux, mercurial, permissions, uwsgi

我有一个通过 uwsgi+nginx 服务的 mercurial 存储库。uwsgi 和 nginx 都属于 www-data 组。

该 repo 属于用户 uwsgi 和组 www-data

当我更改存储库的权限以使该组具有 rwx 权限时，我无法推送到存储库。如果我给所有者（uwsgi）rwx 权限，我可以推送到 repo。我不明白为什么组权限不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:52:11.527

为此使用组权限是一种正常的方法，所以我们绝对可以让它工作。

当您更改权限时，您确定您包含`.hg`目录及其子目录（`.hg/store`等）。您是否肯定 uwsgi 工作进程确实将 www-data 作为他们的组？可能是他们正在切换到其他用户/组。

也许从获取 hgweb.wsgi 文件并在其中抛出一些输出用户、组和环境的调试消息开始。

底线：您正在做的事情完全有可能而且是个好主意，但是您缺少一些东西，我无法在您的问题中找到它。要么对你正在做的事情不是不可能的想法感到安慰，要么继续寻找，要么继续用额外的细节更新这个问题，直到它突然出现在我面前。

# javascript - 将 Flexslider 与 Angular.JS 一起使用

> ID：13755214
> 
> 赞同：0
> 
> 时间：2012-12-07T00:41:53.560
> 
> 标签：javascript, angularjs, flexslider, imagesource

我尝试在网站的前端使用 Flexslider 管理响应式滑块，但是当我使用 Angular.js 时，我的图像没有直接指定“src”属性，Angular 使用“ng- src”属性。所以我的滑块可以工作（我可以看到导航控件），但是是空白的......

有什么办法解决吗？或者另一个响应式滑块库的想法，应该与 Angular.js 一起使用？

```
#templates/detail.html
<div class='flexslider'>
    <ul class='slides'>
        <li ng-repeat='slide in project.slides'><img ng-src='{{slide}}' alt='{{project.name}}' /></li>
    </ul>
</div>

#js/app.js
'use strict';

angular.module('test', []).config([
    '$routeProvider',
    function ($routeProvider) {
        $routeProvider
            .when('/', { templateUrl: 'detail.html', controller: ProjectCtrl })
    }
]);

#js/controllers.js
'use strict';

function ProjectCtrl($scope) {
    $scope.project = {
        id: 1,
        name: 'Test',
        slides: [
            'test.png',
            'test2.png'
        ]
    };
$('.flexslider').flexslider();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T21:05:58.320

事实上，它是由 Twig 渲染引擎引起的，用户也使用了双括号：{{ }}

我通过使用 twig 的原始过滤器渲染一些原始 HTML 来修复它：http: [//twig.sensiolabs.org/doc/filters/raw.html](http://twig.sensiolabs.org/doc/filters/raw.html)

# php - 如何使用 [DATE] 函数根据当前月份从 mySQL 数据库中检索数据？

> ID：13755219
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:42:32.127
> 
> 标签：php, html, mysql, database

好的，我在我的 SQL 数据库中使用这个结构：

```
id  |  title  |   date_start   |   date_end|  time_start   |   time_end   |   location   | 
```

我想对该表中的数据进行排序，但只对即将到来的日期或当前发生的日期进行排序。

我在 php 中使用了以下查询：

```
$query = mysql_query("SELECT * FROM events3 ORDER BY date_start DESC LIMIT 5"); 
```

然后在查询之后我获取了结果，然后像这样回应它们：

[http://pastebin.com/5wS7npsr](http://pastebin.com/5wS7npsr)

这会将数据库中仅有的两个日期显示为：

```
ID:   2
Title:   New Years Eve
Date Start:   2012-12-31 - 2012-12-31
Time Frame:   12:00:00 - 12:00:00
Location:   Earth
Description:   The last day of 2012.

ID:   1
Title:   Christmas Day
Date Start:   2012-12-25 - 2012-12-25
Time Frame:   12:00:00 - 12:00:00
Location:   Earth
Description:   Merry Christmas!! 
```

但我希望它在日期发生后过期，只显示下一个即将到来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:05:15.727

正如评论中提到的，这里有一个类似的帖子：[Datetime equal or greater than today in MySQL](https://stackoverflow.com/questions/5182275/datetime-equal-or-greater-than-today-in-mysql)

最终，经过一番来回，针对您的具体实现的查询结果：

```
SELECT * FROM events3 WHERE date_start >= CURDATE() ORDER BY date_start LIMIT 5; 
```

# javascript - Knockout.js – 获取对象数据

> ID：13755220
> 
> 赞同：1
> 
> 时间：2012-12-07T00:42:34.277
> 
> 标签：javascript, arrays, knockout.js, javascript-objects

我刚开始玩淘汰赛，我有一个问题。以下是部分代码：

```
function Task(data) {
    var self = this;
    self.name = ko.observable(data.name);
}

function ViewModel() {
    self.taskArr = ko.observableArray([
    // some default data
    new Task({ name: "to-do 1"}),
    new Task({ name: "to-do 2"}),
    new Task({ name: "to-do 3"})
]); 
```

基本上，我试图通过`console.log()`. 但是当我使用时，`console.log(self.taskArr());`我得到`[Task, Task, Task]`了结果。

使用`self.taskArr()[0].name`只会得到第一个结果，而不是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:02:59.677

为了显示可观察数组的数据，您必须使用 ko.toJSON 函数，如下所示：

```
console.log(ko.toJSON(self.taskArr())); 
```

这将输出：

```
[{"name":"to-do 1"},{"name":"to-do 2"},{"name":"to-do 3"}] 
```

更多信息在这里： http: [//knockoutjs.com/documentation/json-data.html](http://knockoutjs.com/documentation/json-data.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:39:50.083

尝试将 Task 对象转换为 JSON 字符串：

```
 console.log(JSON.stringify(self.taskArr())); 
```

# google-drive-api - 谷歌驱动器共享文件对话框的要求

> ID：13755222
> 
> 赞同：1
> 
> 时间：2012-12-07T00:42:44.293
> 
> 标签：google-drive-api

有人可以在这里解释这部分[文档](https://developers.google.com/drive/manage-sharing)吗？

> 要使对话框按预期工作，必须满足以下所有条件：
> 
> 1.  用户已登录 Google
> 2.  用户已安装您的应用程序
> 3.  启动对话框的页面的 URL 必须与为应用程序注册的打开 URL 具有相同的来源。

特别是2和3 ..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:53:59.643

您的第 2 项在此处进行了说明[https://developers.google.com/drive/install](https://developers.google.com/drive/install)

[第 3 项是您在 api 控制台https://code.google.com/apis/console](https://code.google.com/apis/console)的 Drive SDK 选项卡下指定的“打开 URL”

# c++ - 特殊模板方法调用语法

> ID：13755228
> 
> 赞同：3
> 
> 时间：2012-12-07T00:43:09.973
> 
> 标签：c++, templates, syntax

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我最近遇到了以下 C++ 语法：

```
int a = MyObj.template MyMethod<MyType>(); 
```

这种语法有名称吗？我可以在哪里阅读更多关于何时需要它的信息？

这与通常的语法相反

```
int a = MyObj.MyMethod<MyType>(); 
```

在被调用的方法同时具有模板和非模板重载的某些情况下，似乎需要第一种语法形式；仅调用该函数的常规形式在我用 clang 编译的代码中产生了错误。

# java - 如何在Java中生成以字母开头的随机字符串

> ID：13755229
> 
> 赞同：1
> 
> 时间：2012-12-07T00:43:16.033
> 
> 标签：java, string, random, character

好久没发问题了！基本上我正在大学里用 Java 开始一个新项目！基本上我需要的是生成一个对象来存储其中的项目。这包括产品代码、项目名称、价格等。基本上对于产品代码，我负责决定它的长度，但它必须以字母而不是数字开头。我在想6个字符。但是我如何告诉 Java 将第一个字符保留为字母而不是数字？

非常感谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:57:30.980

```
public String getProductCode(){
    Random random = new Random();
    int first = random.nextInt(26) + 65;  //Get random ASCII code in letter range
    char firstChar = new Character((char) first);  //Convert to char
    int suffix = 10000 + random.nextInt(89999);  //Get 5 digit suffix
    return Character.toString(firstChar) + String.valueOf(suffix);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:48:35.047

将它们单独存储在一个对象中，并在不同的 getter 中返回组合

```
public class Product {

    protected char id;
    protected int code;

    public String getFullcode() {
        return id + code.toString();
    }

    //regular getters and setters
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:55:51.870

尝试这样的事情，它很hacky，但你明白了：

```
import java.util.Random;

public class foo {

  public static void main(String args[]) {
    String chars = "abcdefghijklmnopqrstuvwxyz0123456789";
    Random r = new Random();
    int limit = 5;
    StringBuffer buf = new StringBuffer();

    buf.append(chars.charAt(r.nextInt(26)));
    for (int i = 0; i < limit ; i++) {
      buf.append(chars.charAt(r.nextInt(chars.length())));
    }
    System.out.println(buf);

  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T00:45:30.800

只需制作两个不同的随机变量，一个选择随机字母，另一个选择任意随机字符。然后以明显的方式添加它们。希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T01:07:36.217

```
public static void main(String[] args) {
    //random arrays
    String[] randomLetters = {"a", "b", "c", "d", "e", "f", "g", "h", etc...}
    String[] randomNumbers = {"08724 ","13876 ","29238 ","37534 ","40182 ","57532 ","69273 ", etc...};

    //chooses random element from the letters
    Random r = new Random();
    int randl = r.nextInt(8);
    String randomLetter = randomLetters[randl];

    //chooses random element from the numbers
    Random a = new Random();
    int randn = a.nextInt(7);
    String randomNumber = randomNumbers[randn];

    //turns into one string and presents it
    String str1 = randomLetter + randomNumber;
            System.out.print(str1);
    }
    } 
```

我不知道这是否正是你想要的——它是一次性的。我只是想以简单的形式做到这一点。

# hadoop - Hadoop - 文件到块的映射

> ID：13755232
> 
> 赞同：1
> 
> 时间：2012-12-07T00:43:26.087
> 
> 标签：hadoop

当 JobTracker 将 map 任务分配给 TaskTracker 时，它是否需要与 NameNode 对话？或者它可以从 InputSplit 本身获取信息？当我查看代码时，我看到 InputSplits 包含有 BlockLocations。JobTracker 会使用这些信息还是需要与 Namenode 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:02:06.380

JobTracker 确实联系 NameNode 以获取块位置。如果作业正在处理的块数非常大，则此过程可能特别需要一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:28:51.400

客户端计算拆分信息并将其与拆分信息一起写入 HDFS。

您可以查看 Hadoop 1.x`JobSplit.SplitMetaInfo`实现的序列化，该序列化也对位置进行序列化。

jobtracker 只是拾取这些序列化并安排它们，其中位置只是一个提示，如果插槽可用，则可以更快地执行。

# c# - 如何启动将在任何编辑器中打开文本文件并自动将光标移动到某个行号的进程？

> ID：13755233
> 
> 赞同：8
> 
> 时间：2012-12-07T00:43:44.217
> 
> 标签：c#

从 c# 中，我想启动一个进程，它将在任何编辑器中打开一个文本文件并自动将光标移动到某个行号。

我可以使用打开文件

```
Process.Start(@"c:\myfile.txt"); 
```

但我不知道如何将光标移动到该文件中的特定位置。

* * *

用源代码回答：

是的，我用记事本++

```
private void openLog() {
            try {
                // see if notepad++ is installed on user's machine
                var nppDir = (string)Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\Notepad++", null, null);
                if (nppDir != null) {
                    var nppExePath = Path.Combine(nppDir, "Notepad++.exe");
                    var nppReadmePath = Path.Combine(yourDirectory,fileName );
                    var line = 20;
                    var sb = new StringBuilder();
                    sb.AppendFormat("\"{0}\" -n{1}", nppReadmePath, lineNo);
                    Process.Start(nppExePath, sb.ToString());
                } else {
                    string newPath = @"\\mySharedDrive\notpad++\bin\notepad++.exe";
                    Process.Start(newPath, @"\\" + filePath + " -n" + lineNo); // take exe from my shared drive
                }
            } catch (Exception e) {
                Process.Start(@"\\" + FilePath); // open using notepad
            }
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T00:59:50.107

获取 Notepad++，然后你可以这样做：

```
 var nppDir = (string)Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\Notepad++", null, null);
    var nppExePath = Path.Combine(nppDir, "Notepad++.exe");
    var nppReadmePath = Path.Combine(nppDir, "readme.txt");
    var line = 20;
    var sb = new StringBuilder();
    sb.AppendFormat("\"{0}\" -n{1}", nppReadmePath, line);
    Process.Start(nppExePath, sb.ToString()); 
```

在此示例中，我们从注册表中获取 n++ 的安装路径，构建 exe 和 readme.txt 文件的路径，打开其自己的 readme.txt 文件，光标位于第 20 行。使用 StringBuilder 比使用多个附加更有效（在某处解释 SO ）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:51:02.463

解决方案在很大程度上取决于您的系统上打开了哪个进程/编辑器。该编辑器必须有一个开发人员 API，您可以使用它来访问设置范围和更改光标位置等功能。例如，如果打开的编辑器是 Microsoft Word，您将使用[Word Interop API](https://stackoverflow.com/questions/6186873/how-to-move-the-cursor-to-the-particullar-paragraph-using-microsoft-office-inter)在特定位置设置选择。在“任何编辑器”中没有通用的方法可以做到这一点，因为每个编辑器都有自己的 API（或根本没有面向外部的 API）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:54:09.143

也许你走错了路。我不确定您要完成什么，但我认为在*属于*您的应用程序的编辑器中打开文本文件会容易*得多。*也许是另一种带有所见即所得编辑器控件的表单。这样您就可以完全控制光标在该编辑器中的位置。否则，对于任何可行的事情，都有太多的未知数。

# playframework - 我不能在类之间创建 JPA 关系

> ID：13755238
> 
> 赞同：0
> 
> 时间：2012-12-07T00:44:20.393
> 
> 标签：playframework, playframework-2.0

嗨，我对播放框架和 JPA 很陌生。我正在创建 Web 应用程序，我需要在应用程序的模型端有 2 个类。当我运行应用程序时出现此错误：非法尝试将非集合映射为 @OneToMany、@ManyToMany 或 @CollectionOfElements：

```
package models;
import java.util.ArrayList;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.ManyToOne;
import play.db.jpa.Model;

   @Entity

public class SubCategory extends Model{
@Column(unique = true)
public String subCatName;

@ManyToOne
public Category category;

public SubCategory(String subCatName,Category category){
    this.subCatName=subCatName;
    this.category=category;
}
}

   package models;

 import java.util.ArrayList;

 import javax.persistence.CascadeType;
 import javax.persistence.Column;
 import javax.persistence.Entity;
 import javax.persistence.OneToMany;
 import org.hibernate.engine.Cascade;
 import play.db.jpa.Model;

 @Entity

  public class Category extends Model{

@Column(unique = true)
public String catName;

@OneToMany(mappedBy="category", cascade=CascadeType.ALL)
public ArrayList<SubCategory> allSubCat;

public Category(String catName){
    this.catName=catName;
    allSubCat=new ArrayList<SubCategory>();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:56:11.347

ArrayList 是接口 List 的一个实现。

您必须将您的字段定义为 List 类型，因为在引擎盖下休眠（这是 play 用于连接到数据库的 orm）不使用 ArrayList 实现，而是使用它自己的自定义实现

# python - 提高 Python 嵌套 for 循环的性能

> ID：13755239
> 
> 赞同：2
> 
> 时间：2012-12-07T00:44:21.570
> 
> 标签：python, performance, loops

我有两组数字，每组都在我的 Python 脚本的列表中。对于第一个列表中的每个数字，我需要查看第二个列表中的任何数字是否大于它。我只需要 n2 大于 n1 的次数。（例如，如果`numset1`is`[7,2]`和`numset2`is `[6,9]`，我只需要 3）现在我正在这样做 - 遍历每个 n1 并检查每个 n2 是否大于它：

```
possibilities = [(n1<n2) for n1 in numset1 for n2 in numset2]
numPossibilities = sum(possibilities) 
```

目前这是我脚本中最慢的部分，尤其是在处理较大的数据集（包含数千个数字的 numset1 和 numset2 ）时。我确信有一些方法可以提高效率，我只是不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:51:02.510

排序`numset2`然后迭代，`numset1`但使用二进制搜索`numset2`，例如使用 bisect 模块：[http ://docs.python.org/2/library/bisect.html](http://docs.python.org/2/library/bisect.html)

```
import bisect
# your code here
numset2.sort()
L = len(numset2)
numPossibilities = sum([bisect.bisect_right(numset2,n1) < L for n1 in numset1]) 
```

另请注意，您的原始代码不会计算您在第二句中要求的内容 - 对于 中的每个元素`numset1`，它总结了中有*多少元素*`numset2`大于该元素，而不是*是否*存在与标准匹配的元素。

要匹配您的原始代码，请执行以下操作：

```
numPossibilities = sum([L - bisect.bisect_right(numset2,n1) for n1 in numset1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:03:26.477

您的问题是您必须遍历 的每个组合`(n1, n2)`，并且存在组合，当并且仅相当大`len(numset1) * len(numset2)`时，它们变得非常大。`numset1``numset2`

换句话说，你的算法的运行时间是 O(n^2) （如果`len(numset1)`大约等于`len(numset2)`。让我们让运行时间更快。:-)

如果我们对列表进行排序，这将变得容易得多。所以让我们排序`numset1`和`numset2`。

```
>>> numset1.sort()
>>> numset2.sort() 
```

现在，比较`numset1`(call it) 的最小元素和 (call it )`n1`的最小元素。如果较小，那么我们知道有比它大的元素。如果更小，我们知道其中没有任何元素比它小。`numset2``n2``n1``len(numset2)``numset2``n2``numset1`

现在，我们不想实际删除列表开头的元素，因为这是对 Python 列表的 O(n) 操作。因此，让我们跟踪我们在每个列表中的位置并迭代。

```
>>> n1_idx, n2_idx, accumulator = 0, 0, 0
>>> while n1_idx < len(numset1) and n2_idx < len(numset2):
        if numset1[n1_idx] < numset2[n2_idx]:
            accumulator += len(numset2) - n2_idx
            n1_idx += 1
        else:
            n2_idx += 1 
```

在此操作结束时，我们花费了 O(nlog(n)) 时间对列表进行排序，并花费了 O(n) 时间进行迭代，因此我们的整体运行时复杂度为 O(nlog(n))。

那，并且`accumulator`有对的数量`(n1, n2)`where `n1 < n2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:17:17.607

这应该是一个非常有效的实现：

```
def get_possibilities(numset1, numset2):
    sortset1 = sorted(numset1)
    sortset2 = sorted(numset2)
    total = 0
    i2 = 0
    for i1, n1 in enumerate(sortset1, 1):
        while sortset2[i2] <= n1:
            i2 += 1
            if i2 >= len(sortset2):
                # reached end of i2, so just return total now
                return total
            # current from sortset2 is greater than from sortset1 so far
            total += i1
    # all remaining elements of sortset2 greater than all elements of sortset1
    total += (len(sortset2) - i2 - 1) * len(sortset1)
    return total 
```

这仅对每个集合进行一次迭代，它通过在运行之前对集合进行排序来完成。这允许一些改进的逻辑，因为如果`sortset2`at index`i2`中的元素大于`sortset1`at index 的元素`i1`，那么它也大于`sortset1`at 早期索引中的所有元素。

# java - java删除包含两个孩子的二叉树节点

> ID：13755245
> 
> 赞同：1
> 
> 时间：2012-12-07T00:45:22.237
> 
> 标签：java

这是要删除的节点有两个孩子的最后一种情况。我无法弄清楚我做错了什么。请帮忙。

```
 //BTNode has two children
    else if (u.getLeft() != null && u.getRight() != null){
        //if node to delete is root
        BTNode<MyEntry<K,V>> pred = u.getRight();

        while (pred.getLeft().element() != null){
            pred = pred.getLeft();
        }

        BTNode<MyEntry<K,V>> predParent = pred.getParent();
        if (!hasRightChild(pred)){
            predParent.setLeft(new BTNode<MyEntry<K,V>>(null,predParent,null,null));}
        if (hasRightChild(pred)){
            BTNode<MyEntry<K,V>> predChild = pred.getRight();
            predParent.setLeft(predChild);
            predChild.setParent(predParent);
        }

        return returnValue; 
```

好的，像这样修改它？？

```
 u.setElement(succ.element());

        BTNode<MyEntry<K,V>> succParent = succ.getParent();
        if (!hasLeftChild(succ)){
            succParent.setRight(new BTNode<MyEntry<K,V>>(null,succParent,null,null));}
        if (hasLeftChild(succ)){
            BTNode<MyEntry<K,V>> predChild = succ.getLeft();
            succParent.setRight(predChild);
            predChild.setParent(succParent);
        }

        return returnValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:58:21.387

来自维基百科：

> 删除有两个子节点的节点：将要删除的节点称为 N。不要删除 N。而是选择它的有序后继节点或它的有序前驱节点 R。将 N 的值替换为 R 的值，然后删除 R。

因此，以左孩子为例，然后在该子树中找到最右边的叶子，然后将要删除的节点的信息替换为叶子的信息，然后轻松删除该叶子。

您可能想要创建一个从子树返回最右边叶子的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T06:22:18.920

我已经给出了删除 BST 中节点的代码，该代码适用于任何条件，也可以使用 for 循环。

```
public void delete(int key) {

    Node<E> temp = find(key);
    System.out.println(temp.key);

    for (;;) {
        // case 1 : external node
        if (temp.isExternal()) {
            if (temp.getParent().getrChild() == temp) {
                temp.parent.rightchild = null;
                temp = null;
            } else {

                temp = null;
            }
            break;

        }

        // case2 : one child is null
        else if ((temp.getlChild() == null) || (temp.getrChild() == null)) {
            if ((temp.parent.leftchild != null) && temp.getParent().getlChild().key == temp.key) {
                if (temp.getlChild() == null) {
                    temp.getParent().setLeft(temp.getrChild());
                    temp.getrChild().setParent(temp.getParent());
                    break;

                }

                else
                    temp.getParent().setLeft(temp.getlChild());
                temp.getlChild().setParent(temp.getParent());
            }

            else {
                if (temp.rightchild != null) {
                    System.out.println("in");
                    temp.getParent().setRight(temp.getrChild());

                    temp.getrChild().setParent(temp.getParent());
                    break;

                }

                else
                    temp.getParent().setRight(temp.getlChild());
                temp.getlChild().setParent(temp.getParent());
            }

            break;
        }
        // case 3 : has both the children
        else {
            int t = temp.key;
            temp.key = temp.getlChild().key;
            temp.getlChild().key = t;
            temp = temp.getlChild();

            continue;
        }
    }

} 
```

# ruby-on-rails - 创建帖子后使用 Action Mailer 发送用户电子邮件

> ID：13755249
> 
> 赞同：3
> 
> 时间：2012-12-07T00:45:39.847
> 
> 标签：ruby-on-rails, actionmailer

我有一个用户模型（带有设计）和一个属于用户的帖子模型。创建帐户后，我使用[此 railscast (pro)](http://railscasts.com/episodes/61-sending-email-revised)向用户发送电子邮件

我创建了一个“NewPostMailer”

这是我的邮件：

```
class NewPostMailer < ActionMailer::Base
  default :from => "email@gmail.com"

  def new_post_email(user)
    @user = user
    @url = "http://localhost.com:3000/users/login"
    mail(:to => user.email, :subject => "New Post")
   end
end 
```

我的posts_controller：

```
 def create
    @post= Post.new(params[:post])

    respond_to do |format|
      if @deal.save
        NewPostMailer.new_post_confirmation(@user).deliver
        format.html { redirect_to @post, notice: 'Post was successfully created.' } 
```

post.rb

```
 after_create :send_new_post_email

  private
  def send_new_post_email
    NewPostMailer.new_post_email(self).deliver
  end 
```

在用户创建帖子后，我必须更改哪些内容才能向用户发送电子邮件。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T00:59:39.780

创建另一个邮件程序（[http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)）

```
 class YourMailerName < ActionMailer::Base
     default :from => "you@example.com"

   def post_email(user)
    mail(:to => "#{user.name} <#{user.email}>", :subject => "Registered")
   end
 end 
```

在您的 Post 模型中

```
 after_create :send_email

 def send_email
   YourMailerName.post_email(self.user).deliver
 end 
```

发送电子邮件非常慢，因此请考虑将其置于后台作业中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T00:58:31.227

您应该能够使用非常相似的方法来执行此操作。首先，在你的模型中创建一个`after_create` [回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)`Post`，类似于：

```
after_create :send_user_notification

def send_user_notification
  UserMailer.post_creation_notification(user).deliver
end 
```

您需要确保用户和帖子之间存在关系，并`post_creation_notification`在您的 中创建方法，`UserMailer`就像您创建旧方法一样。可能还值得指出的是，像这样盲目地发送电子邮件不一定是最好的方法。它不仅为请求增加了额外的不必要的时间，而且它也不会以优雅的可恢复方式失败。您可能希望探索将要发送到队列（[例如，像这样](https://code.google.com/p/mail-queue/)）的电子邮件添加到要处理的队列中，使用 cron 作业或其他东西，如果您正在创建的站点将看到除非常少量使用之外的任何内容。

# codeigniter - 如何使用 facebook api 验证已经登录的 facebook 用户

> ID：13755253
> 
> 赞同：0
> 
> 时间：2012-12-07T00:46:41.033
> 
> 标签：codeigniter, facebook-graph-api, oauth

我在我的 codeigniter 应用程序中使用 facebook 登录。我已经设置了控制器来处理登录，它似乎适用于所有用户状态情况，除非用户登录到 facebook 并尝试登录到我的应用程序但从未对其进行身份验证。

这是我的 facebook 控制器索引函数：

```
$data=array(
            'redirect_uri' => site_url('facebookcontroller/handle_facebook_login'),
            'scope' => 'publish_stream,email'
        );
        redirect($this->fbconnect->getLoginUrl($data)); 
```

->getLoginUrl() 是否仅指向 facebook 登录页面而不是身份验证页面？

我很感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:14:24.990

看来您使用的是旧版本的 facebook sdk。我建议看看[这里](https://github.com/facebook/facebook-php-sdk/tree/master/src)，因为其中一些功能不再起作用。然后考虑到，当有人登录 facebook 并且您要求提供这样的个人资料信息时：

```
$data['user_profile'] = $profile = $this->facebook->api('/me'); 
```

它可能使用了过期的访问令牌，因此您必须将该调用包含在 try-catch 块中，如下所示：

```
try {
        $data['user_profile'] = $profile = $this->facebook->api('/me');
    }catch (Exception $e){
    $this->facebook->setAccessToken($this->facebook->getAccessToken());
    try {

       if($this->facebook->getUser()) {
        $this->facebook->api(array('method' =>'auth.revokeAuthorization' ));
       }

    }catch(Exception $e) {

        redirect('<login controller>');
    }
    redirect('<login controller>');
    } 
```

# version - 我应该安装 pygame-1.9.2a0.win32-py2.7.msi 还是 pygame-1.9.1.win32-py2.7.msi

> ID：13755254
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:46:41.893
> 
> 标签：version, pygame

我认为 pygame-1.9.2a0.win32-py2.7.msi 是一个 alpha 版本，我不知道像我这样的新手应该搞砸它。是比pygame-1.9.1.win32-py2.7.msi更稳定，还是更低？

为什么一个是另一个的两倍？

谢谢！PG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T01:54:08.527

下载pygame-1.9.2a0.win32-py2.7.msi。这是最新版本，所以会更好。

# javascript - 在函数内部获取函数名称的函数？

> ID：13755257
> 
> 赞同：1
> 
> 时间：2012-12-07T00:47:25.123
> 
> 标签：javascript

要在函数中获取函数的名称，我可以使用以下代码：

```
function getmyname() {
    var myName = arguments.callee.toString();
    myName = myName.substr('function '.length);
    myName = myName.substr(0, myName.indexOf('('));
    alert(myName); // getmyname
} 
```

但是我需要运行很多次，所以我宁愿使用一个函数来完成它，所以它看起来像：

```
function getmyname() {
    alert(getfname()); // getmyname
} 
```

所以`getfname()`会得到这个名字。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:51:41.537

您可以将本地参数传递给`getmyname`函数并使用`callee.name`而不是解析：

```
function getmyname(args) {
    return args.callee.name;
}

function getname() {
    alert(getmyname(arguments));
}

getname();  // "getname" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:50:55.280

`.name`是*函数对象*拥有的属性。

```
function getmyname() {
    return arguments.callee.name;
}

function getname() {
    alert(getmyname());
}

getname(); // alerts "getmyname" 
```

* * *

提醒一句：

> arguments.callee 与其他属性一起，在 ECMAscript5 严格模式下已过时，并且在访问时会抛出错误。所以我们需要返回getmyname.name，这显然不是很优雅，因为我们可以直接返回那个字符串

# haskell - (<-) 结果的类型提示

> ID：13755258
> 
> 赞同：1
> 
> 时间：2012-12-07T00:47:28.023
> 
> 标签：haskell, io

我发现添加类型提示对调试很有用，但我不知道如何使用`<-`on 和 IO 操作的结果来做到这一点

```
action :: IO ()
    foo :: String --doesnt't compile
    foo <- getLine 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T00:53:40.370

您不能这样做，因为 <- 不是声明。您可以：

```
action :: IO ()
action = do
    foo <- getLine :: IO String
    ... 
```

或者，使用`{-# LANGUAGE ScopedTypeVariables #-}`：

```
action :: IO ()
action = do
    foo :: String <- getLine
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T00:55:05.973

有了`-XScopedTypeVariables`，你就可以拥有`(foo :: String) <- getLine`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T01:02:26.757

为了完整起见，我想添加

```
action :: IO ()
action = do
  foo <- getLine
  let bar :: String 
      bar = foo
  print bar 
```

这很笨重，但如果您发现自己被困在 IO monad 中，这可能[会很有用](https://github.com/HeinrichApfelmus/reactive-banana/blob/master/reactive-banana/doc/examples/SlotMachine.hs)，如果您正在编写 GUI，就会发生这种情况。

# c++ - 运算符 == 或 != 在这种情况下应该抛出吗？

> ID：13755261
> 
> 赞同：2
> 
> 时间：2012-12-07T00:47:41.880
> 
> 标签：c++, exception, operator-overloading

我正在编写一个程序，在其中创建了一个 std::vector 的 POD 结构。结构的成员之一是唯一标识符。

为了能够使用 std::binary_search 我必须为结构实现 operator<。按照[这里](https://stackoverflow.com/questions/4421706/operator-overloading)的指导方针，我正在为 ==、!=、<、>、>= 和 <= 编写完整的重载集。

这提出了一个我不知道如何处理的问题。向量将按我分配给每个结构的唯一 ID 排序。如果两个结构具有相同的标识符，则它们是相同的。但是，在我看来，如果两个结构具有相同的标识符但其他成员中的数据不同，则可能会出现这种情况。

这不应该发生。然后让比较运算符检查其余字段并在它们不同但 ID 相同时抛出异常是否合适？什么样的例外最合适？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T01:01:53.633

这只是[SCombinator 答案的扩展。](https://stackoverflow.com/a/13755289/673730)

你说“这不应该发生”的事实。意味着您要使用断言，而不是异常（或两者的组合）。异常会隐藏错误 - 好吧，不是隐藏，但您将能够捕获它并继续。它更适合您没有真正计划的特殊情况 - 例如，您正试图打开一个不存在的文件。文件丢失并不是*逻辑*的一部分，而是您的小兄弟不小心删除了您的文件，或者认为它是病毒的侵略性防病毒软件，或者其他什么 - 这只是一种特殊情况。

如果成员具有相同 ID 但其他方面不同是不应该发生的事情，这基本上是一个断言。这是逻辑的一部分——如果你愿意的话，它是要求的一部分。抛出异常只是指出了这一点，但实际上并没有一种方法可以从中恢复。当你意识到有些不对劲时，已经晚了 2 点。您有两个具有相同 id 但不同的对象，您不知道哪个是正确的，您不知道为什么存在不正确的对象，等等。你可能甚至不想从中恢复过来。应用程序已经处于错误状态 - 两个相互矛盾的对象已经存在。您的应用程序处于不可恢复状态 - 如果您继续使用它，您可能会得到错误的结果或更糟。

如果不是关键断言，也可以事后抛出异常，提供干净的方式来关闭应用程序，但这只是美化。

一般来说，我遵循一个简单的规则——如果这是在特殊情况下可能发生的事情，我会使用例外。如果这是不应该发生的事情，并且如果确实发生了，则意味着代码中的逻辑存在严重错误，我会使用断言（并且可能会强制崩溃）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:58:39.543

好吧，你必须问自己几个问题：

1）这是否可能在测试期间发生（即发出错误信号）但在正常执行期间永远不会发生？如果答案是肯定的，请使用`assert`.

2）这是否会在正常运行时发生，如果是，程序能否恢复并继续执行？如果答案是肯定的，则抛出一个错误，捕获并处理它。

3）这是否会在正常运行时发生并且不可恢复？如果是，请调用`abort`或类似 ( `exit, terminate`) 或抛出您不会处理的异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T00:51:29.137

如果这样的事情是一个逻辑错误，您可能应该使用`assert`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T14:07:32.907

创建数据时应拒绝不良数据。排除错误不是比较运算符的工作。这应该在程序进行任何严重的数据操作**之前完成。**所以这个问题的答案是否定的，`operator==`不`operator!=`应该对坏数据抛出异常；编写它们时应该假设传递给它们的数据是有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T00:58:14.260

您可以只使用`map`用二叉搜索树实现的 a，尽管您会复制`id`. 再说一次，您甚至不需要将 存储`id`在结构中，因为它们应该是唯一的。

```
// Example POD struct.
struct MyStruct
{
  int id; // Redundant.
  char a;     
}

std::map<int, MyStruct> myMap;
MyStruct m; m.id = 1;
myMap[m.id] = m;
// Or simply..
myMap[1] = m; 
```

# ios - 为什么 NSURLConnection 会重定向到自己？

> ID：13755262
> 
> 赞同：0
> 
> 时间：2012-12-07T00:47:42.877
> 
> 标签：ios, nsurlconnection

我正在尝试处理 NSURLConnection 中的重定向。出于我的目的，我想记录重定向以供以后使用并继续下载页面的其余部分。为了测试，我尝试阅读[http://www.google.com](http://www.google.com)。这是处理重定向的代码：

```
- (NSURLRequest *) connection: (NSURLConnection *) connection
              willSendRequest: (NSURLRequest *) request
             redirectResponse: (NSURLResponse *) redirectResponse
{
    NSURL *url1 = [request URL];
    NSURL *url2 = [redirectResponse URL];
    if ([request URL] != nil)
        self.redirect = [request URL];
    return request;
}

- (void) connection: (NSURLConnection *) theConnection didReceiveResponse: (NSURLResponse *) response {
    NSURL *url1 = [response URL];
    int foo = 0;
} 
```

在这些方法中设置断点，我发现重定向被定向到

[http://www.google.com/](http://www.google.com/)

具体来说， in`connection:willSendRequest:redirectResponse:`设置`url1`为[http://www.google.com/](http://www.google.com/)，并且`url2`为 nil。在`connection:didReceiveResponse:`,`url1`也是[http://www.google.com/](http://www.google.com/)。

好的。添加斜线。但是，如果我随后使用带有斜杠的 URL 打开一个新的 NSURLConnection，我会得到同样的结果。

为什么重定向的 URL 与传递给 NSURLConnection 的原始 URL 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:50:14.463

我相信您第一次看到该功能被击中并且还没有重定向。因此，如果您确实有重定向，您会在原始 url 上看到此命中，然后在重定向上再次命中。出于您的目的，您可能希望在请求开始时存储 URL，以便在尚未重定向时不执行任何操作。

# nuget - An item with the same key has already been added nuget error

> ID：13755263
> 
> 赞同：7
> 
> 时间：2012-12-07T00:47:55.247
> 
> 标签：nuget, nuget-package

I am currently creating a nuget package with a nuspec file but getting the following error:

> ```
> An item with the same key has already been added. 
> ```

My command I am using is:

> nuget pack "MyProject.csproj" -o "..\Packages"

This is my nuspec file:

```
 <?xml version="1.0"?>
<package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd">
    <metadata>
        <id>$id$</id>
        <version>$version$</version>
        <title>$title$</title>
        <authors>$author$</authors>
        <owners>$author$</owners>
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>$description$</description>
        <language>$language$</language>
    </metadata>
    <files>
        <file src="bin\MyLibrary*.dll" target="lib\net45" />
    </files>
</package> 
```

The nuspec file I am using is also used when packaging other packages withing the same library. Could this be the reason why the above error is occurring? Any ideas?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T07:44:40.483

It might be that you are adding files in nuspec that are also getting added when you call pack on the .csproj (files/dlls referenced by the csproj). If so you can remove the file references from the nuspec file and give it a try. how does your nuspec file look like?

I created it with the following steps
1\. create the Mylibrary project
2\. let me add a dependency, I installed ninject package to the project
3\. build
4\. nuget spec mylibrary.csproj
5\. nuspec file generated, I didn't add any file or dependency manually to the file
6\. nuget pack mylibrary.csproj
7\. nuget pack would automatically add ninject as a dependency and also add mylibrary.dll into the correct folder
8\. [http://npe.codeplex.com/](http://npe.codeplex.com/) is a nice tool to open the nupkg file and see what got generated inside the package.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-03T14:16:38.617

I had this error trying to use the package visualizer and it ended up that my packages.config had the same package name in it more than once with different versions.

# python - 用于确定我的字典中出现次数最多的值的 Python 程序？

> ID：13755264
> 
> 赞同：-2
> 
> 时间：2012-12-07T00:47:57.727
> 
> 标签：python, python-3.x

我想出了这个程序，但它不起作用。我需要确定列表中出现最多的值。例如，捕食者吃掉的猎物最多。任何帮助都会很棒。谢谢！

```
max_value=0
for pred in dictionary:
     for prey in dictionary[pred]:
         if len(dictionary[pred]) >= max_value:
       max_value= len(dictionary[pred])
       p=prey
       print(p) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:29:37.003

您可以使用[`collections.Counter`](http://docs.python.org/2/library/collections.html?highlight=counter#collections.Counter)：

```
dictionary = {'a':1, 'b':42, 'c':3, 'd':42}

from collections import Counter

cntr = Counter(value for value in dictionary.values())
print cntr.most_common(1) 
```

输出：

```
[(42, 2)] 
```

其中显示了最常见的值以及它出现的次数。请注意，可能存在联系，您可能需要对返回的结果进行进一步处理`most_common()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:55:27.403

你可以看看`heapq`得到最长的n：

```
>>> d = {1: [1, 2], 2:[2,3,4])
>>> heapq.nlargest(1, d.iteritems(), key=lambda (k,v): len(v))
(2, [2, 3, 4]) 
```

或使用`max`：

```
>>> max(d.iteritems(), key=lambda (k,v): len(v))
(2, [2, 3, 4]) 
```

但是，将为您提供长度相等的值的任意结果。

# php - $_POST 数组空 php 更新失败

> ID：13755266
> 
> 赞同：0
> 
> 时间：2012-12-07T00:48:14.763
> 
> 标签：php

我正在尝试构建由 2 个页面组成的小型网站的管理端：index.php 和更新 php。在 index.php 上，我运行查询，用数据库中的数据填充 html 表单，效果很好。然后我通过 $_POST 将数据发送到 update.php 页面，在那里我尝试将这些值放入变量中，然后进行更新查询。哪个失败了。我怀疑 $_POST 数组有问题 - 一些值被弄乱或为空，但我不明白为什么。下面是 index.php 的代码：

```
<?php
if (!isset($page_id)) {

echo " <p>Please select page to be edited:</p>";

$query = mysql_query("SELECT page_id, title FROM pages");

$res = mysql_fetch_array($query);

do {

printf("<p><a href='index.php?page_id=%s'>%s</a></p>", $res['page_id'], $res['title']);
} while ($res = mysql_fetch_array($query));
} else { $query = mysql_query("SELECT *  FROM pages WHERE page_id = '$page_id'");
$res = mysql_fetch_array($query);

require_once 'parts/form.php';}
?> 
```

这是 update.php 的代码：

```
<?php
//Here I try to get POST values and assign them to variables for update
//Ths is validation that those values are not empty, 
require_once 'parts/guard.php';

if (isset($_POST['page_id'])) {
$page_id = $_POST['page_id'];
}

if (isset($_POST['title'])) {
$title = $_POST['title'];
}

if ($title == '') {
unset($title);
}

if (isset($_POST['description'])) {
$description = $_POST['description'];
}

if ($description == '') {
unset($description);
}

if (isset($_POST['keywords'])) {
$keywords = $_POST['keywords'];
}

if ($keywords == '') {
unset($keywords);
}

if (isset($_POST['text'])) {
$text = $_POST['text'];
}

if ($text == '') {
unset($text);
}

//variables are set 

require_once 'parts/meta.php';
?>
<?php
//Here is all the values exist, the query is executed. 
//Obviousely this query works in phpmyadmin, but not here - some fields come empty or          messed        up????
if (isset($title) && isset($keywords) && isset($description) && isset($text) && isset($page_id)) {

                            $query = mysql_query("UPDATE pages SET title = '$title', description = '$description', keywords = '$keywords', text = '$text'  WHERE page_id = '$page_id' ");

                            if ($query == TRUE) {

                                echo "<p>Page Updated</p>";
                                echo "<p><a href = 'http://localhost:8888/travel.ru/admin/index.php'>
        Edit Another Page</a></p>";
                            } else {
                                echo "<p>Page Is Not Updataed</p>";
                            }
                        } else {

                            echo "<p>You Left Some Fields Empty. Page Will Not Be Updated.</p>";
                        }
                        ?> 
```

这是我使用的形式：

```
<form name="update" action = "update.php" method= "post">

<p> Page Name<br>
    <input value = "<?php echo $res['title']; ?>" type = "text" name = "title"></p>

<p> Page Description<br>
    <input value = "<?php echo $res['description']; ?>" type = "text" name = "title"></p>

<p> Page Keywords<br>
    <input value = "<?php echo $res['keywords']; ?>" type = "text" name = "title"></p>

<p> Page Content<br>
    <textarea type = "text" name ="text" cols = "68" rows = "15"><?php echo $res['text']; ?>
    </textarea></p>

<input type = "hidden" name="page_id" value =$res[page_id]>

<p><input type = "submit" name ="submit" value ="Save Changes" id="submit"</p>

</form> 
```

任何帮助将不胜感激，因为我不知道为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T00:49:43.847

您的大多数表单域都命名为`title`. 因此，您实际上没有一个名为`description`or `page_id`or的字段`keywords`。

Mate 也提出了一个有效的观点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T00:50:36.193

尝试将 php 标签添加到您的输入值

```
 <input type = "hidden" name="page_id" value ="<?php echo $res['page_id']; ?>"  /> 
```

如前所述 Amadan ，还要检查表单中所有控件的名称。

# arrays - 如何在matlab中绘制特定点？

> ID：13755267
> 
> 赞同：2
> 
> 时间：2012-12-07T00:48:21.733
> 
> 标签：arrays, matlab, plot

我有 X 轴的值 [2,6,10] 和 Y 轴 [0.5,0.4,0.2,0.2,....0.5]，所有值都在 0 和 1 之间。

有一些点对应于 2，比如 1/3 和剩余的 1/3 对应 6，剩余的 1/3 对应 10。对应于 2 的点可以具有 0 和 1 之间的任何值，同样适用于点 6 和第 10 点。我怎样才能绘制这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:04:39.557

我猜你有办法将每个 Y 值与其对应的 X 值匹配。通过使用这些 X 值生成与 Y 长度相同的向量，然后可以将它们相互绘制。

这两个向量将具有以下形式：

```
X = [2,6,2,10,6,6,10,2,....6]
Y = [0.5,0.4,0.2,0.2,0.9,0.3....0.5] 
```

这是一个示例代码

```
% X-data
X = [2,6,10];

% Generate random Y-data
n1 = 10;
n2 = 20;
n3 = 30;
n = n1 + n2 + n3;
Y = rand(1,n);

% Match X indices corresponding to Y
% Xall = [2,2,2,...,2,6,6,6,...,6,10,10,10,...,10]
X1 = zeros(1,n1);
X1(:) = X(1);
X2 = zeros(1,n2);
X2(:) = X(2);
X3 = zeros(1,n3);
X3(:) = X(3);
Xall = [X1 X2 X3];

plot(Xall,Y,'o')
xlim([min(X)-2,max(X)+2]) 
```

这将生成以下形式的图形

![针对三个不同的 X 值绘制的随机 Y 数据。](../Images/d79dea5c6afd1357246f50d087194ad7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:55:14.703

```
plot(a(1:3:end)) 
```

这将绘制每三个点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:52:40.137

```
a=[0.5,0.4,0.2,0.2,....0.5]
b=[1:3:length(a)]

plot(a(b)) 
```

# r - R中的gbm包是否会从训练集中产生预测值？

> ID：13755271
> 
> 赞同：0
> 
> 时间：2012-12-07T00:49:02.733
> 
> 标签：r

我正在使用 gbm 包创建一个简单的梯度提升机模型。我想计算一些预测与实际的统计数据（例如 GINI 比率，SSE）。我阅读了小插图和手册，但找不到从该程序的输出中获取预测值的位置。（当然我可以使用 gbm 在 train set 上进行预测，但是运行 .predict 需要很长时间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:51:16.617

也许这可以帮助你：

```
 pretty.gbm.tree(gbm1, i.tree=1) ## object gbm1 hast a list trees

 SplitVar SplitCodePred LeftNode RightNode MissingNode ErrorReduction Weight    Prediction
0        2  0.000000e+00        1         5           9      217.27619    250  2.074694e-04
1        1  1.232392e+00        2         3           4       30.95838     83 -5.554687e-03
2       -1 -7.445325e-03       -1        -1          -1        0.00000     60 -7.445325e-03
3       -1 -6.225881e-04       -1        -1          -1        0.00000     23 -6.225881e-04
4       -1 -5.554687e-03       -1        -1          -1        0.00000     83 -5.554687e-03
5        1  8.915513e-01        6         7           8       25.62508     89  5.689724e-03
6       -1  2.914792e-03       -1        -1          -1        0.00000     43  2.914792e-03
7       -1  8.283682e-03       -1        -1          -1        0.00000     46  8.283682e-03
8       -1  5.689724e-03       -1        -1          -1        0.00000     89  5.689724e-03
9       -1  8.360223e-05       -1        -1          -1        0.00000     78  8.360223e-05 
```

# python - 将 RTSP 流转发到远程套接字（RTSP 代理？）

> ID：13755281
> 
> 赞同：5
> 
> 时间：2012-12-07T00:50:34.650
> 
> 标签：python, proxy, webserver, webcam

我为这个问题的一般性道歉。我尝试了很多东西，但似乎没有任何效果。我有服务器？（我们称它为*Server A*），它驻留在局域网中，其中还有一个 IP 网络摄像头。该网络摄像头不断在地址上提供 RTSP 提要……比方说…… `rtsp://192.168.1.50:554/cam.sdp`。摄像机无法访问外部世界（它必须留在局域网中，因此只能访问*服务器 A*，不能访问*服务器 B*），但*服务器 A*可以。遗憾的是，*服务器 A*没有公共 IP，因此我无法从世界任何地方访问*服务器 A。**服务器 A*可以出去，但没有人可以进入*服务器 A*……（真是个被宠坏的小子……小时候玩具太多了）

现在，在前面提到的外部世界中还有另一台服务器（*服务器 B*是原始服务器），它是一个普通的 Web 服务器，它的公共 IP 等等。该服务器允许人们进入它（没有被宠坏，非常好......摆桌子，洗碗......那种东西）。*服务器 A*和*服务器 B*都是我的计算机，运行 Ubuntu 12.04 和我设计的一些 Python 应用程序（*服务器 B*实际上运行 Django，但我认为这不太相关）。我的意思是我可以控制两台服务器中发生的事情。我可以安装/卸载软件包，我可以打开端口，关闭端口......任何需要的东西（如果我愿意，我什至可以格式化它们，尽管我认为这不会有太大帮助......或者是......谁知道?)

```
 _____________                                    _____________
    -----------                |           |                                    |           |   
 __ |         |                |           |                                    |           |     
|  \| WebCam  |================| Server A  |===========|  INTERNET  |===========| Server B  |
|__/|         | ->/cam.sdp  <--|           |----------------- > --------------> *           | 
    |         |                |___________|                                    |___________|
    ----------- 
```

问题是：如何使用*服务器 A*抓取 RTSP 流，将其转储到*服务器 B*的指定套接字并打开它（使用能够理解 RTSP 提要的程序，例如 VLC）？

我猜我需要像 RTSP 代理这样的东西，也许吧？但我真的不知道从哪里开始。

任何提示，链接......将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-22T00:52:39.190

我不知道 RTSP，但它似乎是一个标准的 TCP-only 协议。尝试在服务器 A 上运行：

```
ssh -g -R 554:192.168.1.50:554 server_B_hostname 
```

这将打开服务器 B 上的公共端口 554，并从 A 的角度将其转发到 192.168.1.50:554。

某些服务器已将 sshd 配置为拒绝 ssh -g -R 转发（没有充分理由）。如果可以，您应该检查服务器 B 上的 /etc/ssh/sshd_config 并添加`AllowTcpForwarding yes`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-16T05:49:13.557

RTSP 是一种控制协议，通常在端口 554 上运行，但视频流是使用 SDP 协商的端口，这意味着在握手时将决定用于 RTP 传输 (UDP) 的端口，并且对于每个传输，端口号会有所不同。因此，您可能需要转发一系列端口或将传输端口固定为固定值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-01-12T01:04:51.093

查看

[https://github.com/aler9/rtsp-simple-server](https://github.com/aler9/rtsp-simple-server)

这将使您能够设置被宠坏的小子服务器以获取 ipcam rtsp 流并将其推送到服务器 B。

您将需要能够在服务器 A 上运行这个东西，最好在服务器 B 上也能从服务器 A 接收发布的流。您可以使用加密、tls 等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-13T05:15:33.070

RTSP 是面向流服务器的 TCP 控制协议。该协议使用 OPTION 命令来获取有关流的信息。当客户端有足够的关于服务器的信息并且它的功能可以发送一个带有“传输字符串”的 PLAY 命令来告诉它。如何流式传输，通常在 UDP 端口 554 上。客户端在发送 PLAY 之前，应准备好进行 recfrom(SRV UDP, PORT)。有一些传输命令也可以使服务器在 TCP 上进行流式传输。这么说我猜你可以在本地 NET 上编写自己的 RTSP+DATA 代理。请记住，您还必须在各方之间传递所有 TCP 标头，告诉客户端当前帧等。在“云”服务器上，您需要另一个自定义软件才能获取您发送的内容并将其自身公开为 rtsp 源。

# wordpress - 如果 $_Session 处于活动状态，Wordpress 隐藏小部件？

> ID：13755287
> 
> 赞同：0
> 
> 时间：2012-12-07T00:51:09.360
> 
> 标签：wordpress

我想知道当我的网站尝试显示小部件时是否有一个简单的解决方案来添加一些 php“if”代码，如果它有 $_SESSION 我在主页上设置（基于它们来的源）不显示其中之一他们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:34:48.553

我想也许[这](http://blog.rutwick.com/show-or-hide-a-wp-widget-only-on-specific-pages)会回答你的问题。

你终于可以有这样的东西：

```
add_filter( 'sidebars_widgets', 'hidemywidget' );

function hidemywidget($all_widgets) {
    if( $_SESSION['%your key%'] == '%your value%' ) {
        foreach ( $all_widgets['primary-widget-area'] as $i => $inst ) {
            $pos = strpos( $inst, '%the widget you want to hide%');

            if( $pos !== false ) {
                unset( $all_widgets['primary-widget-area'][$i] );
            }
        }
    }

    return $all_widgets;
} 
```

# html - CSS Responsive Grid - 项目卡在高度较长的项目上

> ID：13755288
> 
> 赞同：3
> 
> 时间：2012-12-07T00:51:10.053
> 
> 标签：html, css, responsive-design

我正在构建一个投资组合网站的一部分，该网站使用相对测量单位显示带有图像及其标题的 4 列网格，以便它随浏览器窗口的大小缩放。现在它可以正常工作，每个 .item 都分配了一个 float:left 和 max-widths 属性，定义为整个#container 宽度的百分比（在本例中为 1100px 或 68.75em）。除了标题之外，它工作正常，标题位于跨度中的每个图像下方。当其中一个标题长于 220 像素（或容器的 20%）时，高度会增加，并且下一行中的项目将“卡住”。

我可以使用 PHP 轻松解决此问题，在每 4 个 div 之后插入一个 clear:both div（以有效地在 html 中创建一个新的“行”），但我计划使用媒体查询或其他一些设备将列数减少到 3 , 2 和 1 随着浏览器窗口的缩小。如果我可以简单地通过浮动项目定义行会更容易。可能的解决方案？

款式：

```
body {
font-size: 100%;
line-height: 100%;  /* Neat */
font-family: Helvetica, Arial, sans-serif;
}

#container {
max-width: 68.75em;     /* 1100px */
margin: 40px auto;
border: 1px solid #000;
}

.item {
float: left;
    width: 20%;
max-width: 20%;
height: auto;
padding: 2.5%;
background-color: #eee;
}

.item img {
display: block;
    width: 100%;
max-width: 100%;
height: auto;
}

.item span {
    width: 100%;
max-width: 100%;
margin-top: 1em;
display: block;
text-transform: uppercase;
line-height: 1.5em;
} 
```

HTML：

```
<div id="container" class="cf"> <!-- "cf" comes from my reset, it's a clear-fix --> 
  <div class="item">
    <img src="images/placeholder.png" height="220" width="220" alt="" title="" />
    <span>A Title that is Slightly Longer than the Others</span>
  </div>
  <div class="item">
    <img src="images/placeholder.png" height="220" width="220" alt="" title="" />
    <span>A Title</span>
  </div> 
```

...（重复那些 div）

```
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:58:20.977

可能的选项：

1.  设置`height`足以覆盖两行案例
2.  `.grid-item { display: inline-block; vertical-align: top; }`
3.  将标题更改`span`为 a `div`，设置`height`和`overflow: hidden`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:45:37.713

I would suggest giving it a short title. If that's not possible, you could try

```
.item > span{
    height: 0;
    position: relative;
} 
```

The images will display appropriately, but the too-long titles will display over the image beneath said title. I don't know if this is acceptable for your needs or not, but you may find it useful.

# prestashop - Prestashop：如何在保存后阻止 CMS 编辑器重定向

> ID：13755291
> 
> 赞同：0
> 
> 时间：2012-12-07T00:51:39.700
> 
> 标签：prestashop

在 Prestashop 中，在编辑和保存 CMS 页面（在 BO 中）后，我会自动重定向到 CMS 主页，这非常烦人。如果我想再次编辑，我必须再次单击“编辑”，它会变得非常重复。

有什么方法可以更改**admin/tabs/adminCMS.php**以便保存编辑不会将我重定向到 CMS 主列表页面？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:16:19.207

感谢您的答复。我正在使用**Prestashop 1.4.9**，所以我没有那个功能。Prestashop 论坛上有人告诉我解决方案：

转到管理目录/选项卡并打开 AdminCms.php。关于第295行查找并删除或注释掉

```
Tools::redirectAdmin($currentIndex.'&id_cms_category='.(int)$cms->id_cms_category.'&conf='.(int)($cms->id ? 3 : 4).'&token='.Tools::getAdminTokenLite('AdminCMSContent')); 
```

并添加

```
Tools::redirectAdmin($currentIndex.'&id_cms='.(int)$cms->id.'&updatecms&token='.Tools::getAdminTokenLite('AdminCMSContent')); 
```

完美运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:39:40.003

你好杰娜？您使用的是哪个版本的 PrestaShop？在 1.5 中有一个名为“保存并停留”的功能，您不会被重定向到主页。

# php - 将原始数据类型传递给函数参数

> ID：13755297
> 
> 赞同：2
> 
> 时间：2012-12-07T00:52:27.233
> 
> 标签：php, types, parameters

有什么方法可以**将原始数据类型传递给 PHP 中的函数参数**（或等效地，将其存储到变量中）？我所说的原始类型是指`int`, `bool`, `double`,`string`等。

更具体地说，我想做这样的事情：

```
function SomeFunc($DataType, $SomeOtherPara)
{
}

SomeFunc(int, "test1");
SomeFunc(bool, "test2"); 
```

一个*可能的*用法可能是：

```
//! Cast the input parameter into a data type, recursively.
/*!
    \param[in]  $DataType            Data type, e.g. int, double, bool, string.
    \param[in]  $InputPara           Any input parameter.
*/
function TypeJuggleRecursive($DataType, $InputPara)
{
    if(is_array($InputPara))
    {
        // Work on each array element recursively.
        $ReturnPara = array();
        foreach($InputPara as $Key => $Value)
        {
            $ReturnPara[$Key] = TypeJuggleRecursive($DataType, $Value);
        }
        return $ReturnPara;
    }
    else
    {
        // Cast to data type.
        return ($DataType)$InputPara;
    }
}

TypeJuggleRecursive(bool, $_GET);
TypeJuggleRecursive(int, $_POST); 
```

一个明显的解决方法是改用字符串，即`"string"`for `string`、`"int"`for`int`等，但这似乎很愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:02:48.627

如果这是一种愚蠢的做法，我认为 settype() 不会使用字符串:)

[http://php.net/manual/en/function.settype.php](http://php.net/manual/en/function.settype.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:05:48.603

只有 9 种原始数据类型。您可以使用`gettype`：

```
function my_cast($value, $new_type) {
    switch(gettype($value)) {
        case 'boolean':
        case 'integer':
        case 'double':
        case 'string':
            // do something
            break;
        case 'array':
        case 'object':
        case 'resource':
            // do something else
            break;
        case 'NULL':
        default:
            // 'unknown type'
    }
} 
```

您将无法在 PHP 中实际传递类型。

# php - 为什么这个 jquery ajax 调用没有从我的 php 脚本返回数据？

> ID：13755304
> 
> 赞同：0
> 
> 时间：2012-12-07T00:52:46.963
> 
> 标签：php, jquery

我是 jQuery 新手，无法在 Firebug 中调试这个 ajax 调用：

这是我的ajax调用：

```
var styndx = $('#studylist option:selected').val();
var studyname = $('#edit_field').val();

$.post("saveStudyName.php", {'type': 'update', 'studyname':studyname, 'styndx':styndx},
    function(resultmsg) {
    $('#edit_field').val('');
    $('#savebtn').attr('disabled',true);
    refresh_studynames();
}); 
```

这是函数 refresh_studynames：

```
function refresh_studynames()
{
  $.ajax({                                      
     url: 'getStudyNames.php',                  
     data: "",                                                             
     dataType: 'json',               
          error: function() {
            alert('Refresh of study names failed.');
          },
     success: function(data)
     {
        $data.each(data, function(val, sname) {
        $('#studylist').append( $('<option></option>').val(val).html(sname) )
      });
     } 
  });
} 
```

最后，这是 php 脚本 getStudyNames.php（$dbname、$dbconnect、$hostname 都已填充，并且 $dbconnect 有效；后端数据库是 Postgres，而[pg_fetch_all](http://us3.php.net/manual/en/function.pg-fetch-all.php)是 PHP 中的 Postgres 函数，它以数组形式返回结果）：

```
$dbconnect = pg_pconnect("host=".$hostname." user=".$dbuser." dbname=".$dbname);    
    if (!$dbconnect)    {
        showerror(0,"Failed to connect to database",'saveStudyName',30,"username=".$dbuser.", dbname=".$dbname);
        exit;
    }

    $sql = "SELECT ST.studyindex,ST.studyabrv AS studyname
            FROM ibg_studies ST
            ORDER BY studyname";

    $fetchresult = pg_exec($dbconnect, $sql);
    if ($fetchresult) {
        $array = pg_fetch_all($fetchresult);
        echo json_encode($array);
    } else {
        $msg = "Failure! SQL="+$sql;
        echo $msg;
    } 
```

非常感谢任何帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:09:47.990

线

```
$('#studylist').append( $('<option></option>').val(val).html(sname) ); 
```

看起来不对。

我不太确定，但您可以尝试：

```
var $studylist = $('#studylist').empty();
$data.each(data, function(i, record) {
    $studylist.append( $('<option/>').html(record.sname) );
}); 
```

# c - 如何在 C 中使用 sscanf 扫描多个单词？

> ID：13755307
> 
> 赞同：0
> 
> 时间：2012-12-07T00:53:02.840
> 
> 标签：c

我正在尝试扫描包含 C 中多个单词的行。有没有办法逐字扫描它并将每个单词存储为不同的变量？

例如，我有以下类型的行：

```
A is the 1 letter;
B is the 2 letter;
C is the 3 letter; 
```

如果我正在解析第一行：“A 是 1 个字母”并且我有以下代码，我在每种情况下都放什么，以便我可以获取各个标记并将它们存储为变量。为了澄清，在这段代码的末尾，我想要不同变量中的“is”、“the”、“1”、“letter”。

我有以下代码：

```
while (feof(theFile) != 1) {
    string = "A is the 1 letter"
    first_word = sscanf(string);
    switch(first_word):
      case "A":
        what to put here?
      case "B":
        what to put here?
      ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:10:00.937

你不应该那样使用`feof()`。您应该使用`fgets()`或等效。您可能需要使用鲜为人知（但存在于标准 C89 中）的转换说明符`%n`。

```
#include <stdio.h>

int main(void)
{
    char buffer[1024];

    while (fgets(buffer, sizeof(buffer), stdin) != 0)
    {
        char *str = buffer;
        char word[256];
        int  posn;
        while (sscanf(str, "%255s%n", word, &posn) == 1)
        {
            printf("Word: <<%s>>\n", word);
            str += posn;
        }
    }
    return(0);
} 
```

这会读取一行，然后`sscanf()`迭代地使用从该行中获取单词。`%n`格式说明符不计入成功的转换，因此与 1 进行比较。注意使用以`%255s`防止`word`. 还要注意，在转换规范中指定的 255 计数之后可能会写入 null，因此声明 of和转换说明符`sscanf()`之间的差异为 1 。`char word[256];``%255s`

显然，您可以决定如何处理提取的每个单词。这里的代码只是打印它。

与基于任何解决方案的任何解决方案相比，此技术的一个优点`strtok()`是`sscanf()`不会修改输入字符串，因此如果您需要报告错误，您可以在错误报告中使用原始输入行。

* * *

编辑问题后，似乎一个单词中都不需要分号之类的标点符号；上面的代码将包含标点符号作为单词的一部分。在这种情况下，您必须更加努力地考虑要做什么。起点很可能是使用字母数字扫描集作为转换规范来代替`%255s`：

```
"%255[a-zA-Z_0-9]%n" 
```

然后，您可能必须查看下一个组件开头的字符中的内容，如果它不是字母数字则跳过它：

```
if (!isalnum((unsigned char)*str))
{
    if (sscanf(str, "%*[^a-zA-Z_0-9]%n", &posn) == 0)
        str += posn;
} 
```

导致：

```
#include <stdio.h>
#include <ctype.h>

int main(void)
{
    char buffer[1024];

    while (fgets(buffer, sizeof(buffer), stdin) != 0)
    {
        char *str = buffer;
        char word[256];
        int  posn;
        while (sscanf(str, "%255[a-zA-Z_0-9]%n", word, &posn) == 1)
        {
            printf("Word: <<%s>>\n", word);
            str += posn;
            if (!isalnum((unsigned char)*str))
            {
                if (sscanf(str, "%*[^a-zA-Z_0-9]%n", &posn) == 0)
                    str += posn;
            }
        }
    }
    return(0);
} 
```

您需要考虑所选字母数字范围的 I18N 和 L10N 方面；可用的内容可能取决于您的实现（不幸的是，POSIX 没有在[`scanf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fscanf.html)扫描集中指定对符号的支持，例如`[[:alnum:]]`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:02:39.620

您可以`strtok()`用来标记或拆分字符串。示例请参考以下链接：[http ://www.cplusplus.com/reference/cstring/strtok/](http://www.cplusplus.com/reference/cstring/strtok/)

您可以获取字符指针数组并将标记分配给它们。

例子：

```
char *tokens[100];
int i = 0;
char *token = strtok(string, " ");
while (token != NULL) {
    tokens[i] = token;
    token = strtok(NULL, " ");
    i++;
}

printf("Total Tokens: %d", i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:04:36.887

请注意说明`%s`符去除空格。所以你可以写：

```
 std::string s = "A is the 1 letter";
    typedef char Word[128];
    Word words[6];
    int wordsRead = sscanf(s.c_str(), "%128s%128s%128s%128s%128s%128s", words[0], words[1], words[2], words[3], words[4], words[5] );
    std::cout << wordsRead << " words read" << std::endl;
    for(int i = 0;
        i != wordsRead;
        ++i)
        std::cout << "'" << words[i] << "'" << std::endl; 
```

请注意这种方法（与 不同`strtok`）如何有效地要求关于要阅读的最大单词数及其长度的假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T01:07:06.157

我建议使用`strtok()`. 这是来自[http://www.cplusplus.com/reference/cstring/strtok/的示例](http://www.cplusplus.com/reference/cstring/strtok/)

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ,.-");
  }
  return 0;
} 
```

输出将是：

`Splitting string "- This, a sample string." into tokens:`

`This`

`a`

`sample`

`string`

# ruby-on-rails - 阻止资产在本地预编译以对 heroku rails asset_sync s3 应用程序进行本地生产测试

> ID：13755311
> 
> 赞同：1
> 
> 时间：2012-12-07T00:53:45.950
> 
> 标签：ruby-on-rails, heroku, amazon-s3, assets, production-environment

此应用程序部署在 heroku 上，并使用带有 s3 的asset_sync gem 来服务资产。我想在本地生产中运行我的 rails 服务器，以便在部署到 heroku 之前测试一下。当我运行`rake assets:precompile`我的本地机器将文件上传到我的 s3 存储桶时（一切正常），但我也注意到资产已预编译在我的本地公用文件夹中。

在 S3 和本地预编译似乎是多余的，有时我希望将资产预编译为 S3，有时我可能希望使用我的公共目录中的资产运行本地生产服务器，而不是上传/引用 S3。

那么如何配置我的机器以阻止资产在本地进行预编译呢？

我愿意以任何方式配置我的系统。马上

我在 .bash_profile 中添加了几个变量来存储我的 AWS 凭证。

```
export AWS_ACCESS_KEY_ID=xxx
export AWS_SECRET_ACCESS_KEY=yyy
export S3_BUCKET_NAME=my_bucket_name
export FOG_PROVIDER=AWS
export FOG_DIRECTORY=my_bucket_name 
```

我试过一个 rails environment/production.rb 条目：

```
config.serve_static_assets = false 
```

谢谢

# javascript - jQuery中的事件绑定

> ID：13755319
> 
> 赞同：1
> 
> 时间：2012-12-07T00:54:24.117
> 
> 标签：javascript, javascript-events, jquery

以下之间有什么区别：（有什么理由避免使用示例一吗？）

一：

```
$("#stuff").on("resize", function() { doThis(); });
$("#stuff").on("resize", function() { doThat(); }); 
```

二：

```
$("#stuff").on("resize", function() { 
  doThis(); 
  doThat();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:24:57.990

说白了，其实没什么区别。

在现实世界的代码中，

*   您可能需要在代码中的不同位置附加两个处理程序，在这种情况下，您必须使用版本一（或类似版本）。
*   您可能希望能够选择性地分离处理程序，在这种情况下，事件可以按如下方式命名：

附加处理程序：

```
$("#stuff").on("resize.A", function() { doThis(); });
...
$("#stuff").on("resize.B", function() { doThat(); }); 
```

分离一个处理程序：

```
$("#stuff").off("resize.A"); 
```

保持连接的处理程序`resize.B`（即`doThis()`不会被调用但`doThat()`会被调用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:28:14.460

在您的第二个示例中，如果`doThis()`引发异常则`doThat()`不会运行。第一个例子不是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:55:46.943

唯一的区别是存储和执行两个不同的*事件处理函数*，其中第二个片段满足一个。

算一下，第二个片段更优雅。我不会开始谈论性能，但是如果我们以这种方式绑定“数百个”方法，那么显然您不想绑定多个处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T00:56:33.813

第二个会更好一点。

在第一个示例中，当 resize 事件触发时，您有两个函数调用的开销（除了对 doThis 和 doThat 的调用）。在第二个示例中，您只调用了一个事件处理程序。

# android - 使用支持库

> ID：13755320
> 
> 赞同：0
> 
> 时间：2012-12-07T00:54:29.467
> 
> 标签：android, android-support-library

网上有没有关于使用支持库的教程？我有点困惑，因为在我的活动中，我从支持库中导入了所有小部件，但我仍然得到说我需要 api 11 的标记。我是否必须扩展 FragmentActivity 而不是 Activity 才能使用它？

编辑：

我的问题是我扩展了 Activity 而不是 FragmentActivity。这里提到了这个问题：[getLoaderManager().initLoader() doesn't accept 'this' as argument but the class (ListFragment) implements LoaderManager.LoaderCallbacks<Cursor>](https://stackoverflow.com/questions/11155753/getloadermanager-initloader-doesnt-accept-this-as-argument-though-the-cla)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:13:01.097

[这](http://developer.android.com/training/basics/fragments/support-lib.html)是关于如何使用支持库的一个很好的解释。

关于`FragmentActivity`，如果您尝试在 中使用 a `Fragment`，则必须使用它`Activity`。

还要小心导入正确的类。片段的示例：

```
import android.support.v4.app.Fragment; 
```

代替

```
import android.app.Fragment; 
```

# svn - 做一个 svn up 以获得最新的差异

> ID：13755322
> 
> 赞同：0
> 
> 时间：2012-12-07T00:54:48.297
> 
> 标签：svn

如果我检查一个 SVN 修订版 R，将树中的一些`.cpp`和`.h`文件（不是`.svn`文件）替换为已修补的文件（例如，替换`a.cpp`为已`a.cpp`修补的文件），然后执行`svn up`，我会从 HEAD 获得精确的差异吗？.. 假设冲突解析度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:25:20.767

不，你不会的。来自HEAD`svn up`修订版的文件（来自 R:HEAD 范围的更改）**将**与您的 WC 中的本地更改合并

如果你想在 repo 中获取本地更改文件和 HEAD 修订的差异，你必须

`svn diff FILENAME REPO/FILENAME`

# python - 从 Python 中的列表打印？

> ID：13755323
> 
> 赞同：2
> 
> 时间：2012-12-07T00:54:58.397
> 
> 标签：python

我正在使用 Python 3.2，并且我有一个列表，其中元素的数量可能会根据原始输入而有所不同。当我不知道列表中元素的确切数量时，如何打印列表中的元素，但在最后一个元素之前添加“和”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:57:13.947

对于一个名为`floep`

```
print('%s and %s' % (', '.join(floep[:-1]), floep[-1])) 
```

正如评论的那样，非字符串可能需要映射

```
print('%s and %s' % (', '.join(str(x) for x in floep[:-1]), floep[-1])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:00:00.997

对于列表，`a`

```
a = map(str, a)
print(', '.join(a[:-1]) + ', and ' + a[-1]) 
```

编辑：我相信 IamAlexAlright 关于需要`map`第一个是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:59:52.757

尝试这个：

```
for i in range(len(list)):
    if i=len(list)-2:
        print('and')
    print(len[i]) 
```

# python - 如何使用 module = __import__(filename) 并调用 main 函数

> ID：13755333
> 
> 赞同：0
> 
> 时间：2012-12-07T00:56:23.103
> 
> 标签：python, python-2.7

我正在尝试开发这个程序，它调用另一个程序的 main 函数并将该程序的名称作为用户输入，让我们将此程序称为 1：

Program 1 # 将程序 2 的名称作为用户输入

```
try:

    print "Please input the file you want to test"
    filename = raw_input().split(".")[0]
    module = __import__(filename)

except: 
```

程序2就像

```
def main():
    first()

def first():
    5/0

if __name__ == "__main__":
    main() 
```

所以基本上我想知道如何从程序 1 调用程序 2 的 main 函数。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:11:55.663

只是做`module.main()`- 一个名为的函数没有什么特别之处`main`

# android - 从包中更深的 xml 文件中访问字符串？安卓

> ID：13755336
> 
> 赞同：0
> 
> 时间：2012-12-07T00:56:51.620
> 
> 标签：android

我在 string.xml 中有一些我想从同一个包中访问的字符串。我能够从 com.package.activity 中获取它们，但我无法从 com.package.domain.modern 中获取它们。

我从 com.package.domain.modern 尝试过这样的事情：

```
String temp = "" + (com.package.activity.R.string.string); 
```

这一个 int 返回“2131361874”。

但是当我尝试`(R.string.name_of_string)`在 com.package 中使用时。活动，它工作正常。 `getResources().getString(R.string.name_of_string)`也可以从那里工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:55:07.620

在您访问的类中`string`，传递 的引用，`context`然后尝试

```
mContext.getResources().getString(R.string.name_of_string); 
```

它将返回实际的字符串。

# javascript - Ember Data 未与 Padrino API 映射关系

> ID：13755340
> 
> 赞同：0
> 
> 时间：2012-12-07T00:57:18.183
> 
> 标签：javascript, ruby, sinatra, ember.js, ember-data

这让我发疯了。我设置了一个简单的数据模型（使用 Padrino）；我已经过了实际收到任何错误消息的阶段，但是将“App.Repo”模型添加到“App.Stack”模型只是......不起作用。

```
App.Store = DS.Store.extend({
  revision: 10
  adapter: DS.RESTAdapter.create({
    bulkCommits: false,
    mappings: {
      stars: App.Stars,
      stacks: App.Stacks
    }
  })
});

App.Stack = DS.Model.extend({
  url: DS.attr('string'),
  repos: DS.hasMany('App.Repo')
});

App.Repo = DS.Model.extend({
  name: DS.attr('string'),
  url: DS.attr('string'),
  description: DS.attr('string'),
  language: DS.attr('string'),
  watchers: DS.attr('number'),
  stack: DS.belongsTo('App.Stack'),
  stackId: DS.attr('number')
}); 
```

* * *

```
var store = App.get('router.store');
newStack = store.createRecord(App.Stack);
console.log(newStack.serialize())
-> Object {url: null}    // no mention of a repos array like I was expecting?
newStack.set('url', 'http://google.com');
console.log(newStack.serialize());
-> Object {url: "http://google.com"}    // this works though

var repo = App.Repo.find().objectAt(0);
console.log(repo.serialize());
-> Object {name: "floere/james", url: "https://github.com/floere/james", description: "Voice commanded servant for OSX", language: "Ruby", watchers: 97…}
// so this exists too…

repos = newStack.get('repos');
repos.pushObject(repo);
newStack.get('repos.length'); // 1 (repos.toArray() etc etc all work too)

// but then…
console.log(newStack.serialize())
-> Object {url: null}

// and so then I try to save the relationship on the server anyway…
store.commit()
=> {"stack"=>{"url"=>nil}} // in my Ruby server logos 
```

与我的后端对话的商店都设置得很好（例如向 /repo.json 提交 POST 发送正确的请求）；它只是不承认 App.Stack 有任何关系。

不知道出了什么问题或寻求帮助:(

## 还

我尝试在我的 Ruby 控制台中建立关系，然后在视图中访问它们。这就是发生的事情

```
// in the router
router.get('applicationController').connectOutlet('body', 'stacks', router.get('store').findAll(App.Stack));
// in the view
<script type="text/x-handlebars" data-template-name="stacks">
{{#each stack in controller }}
  {{stack.id}} // this works
  {{stack.url}} // this works
  {{stack.repos.length}} // this returns the correct count
  {{#each repo in stack.repos}}
    // this loops the right number of times. so there *is* something there. somehow.
    {{repo}} // prints out <App.Repo:ember490>
    {{repo.id}} // prints out [object Object]
  {{/each}}
{{/each}} 
```

最后一点 - 也许是 [object Object] 中的线索？

我迷路了:(

## 更多信息：

我在 Mongoid 中使用 Padrino，使用 RABL 给我 JSON。正如我所说，我可以查询和模板出我的 Stack & Repo 记录。这是 /stacks.json 端点的 JSON 示例

```
{
"stacks": [
    {
        "account_id": null, 
        "id": "50c127ff6f094144ed000001", 
        "stars": [
            {
                "description": "Voice commanded servant for OSX", 
                "id": "50c128996f0941cfe8000001", 
                "name": "floere/james"
            }
        ]
    }
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:37:43.220

我认为您必须通过遍历`repos`数组手动将 hasMany 关系添加到您的 json 对象。我在我的适配器的`createRecord`方法中这样做。

```
createRecord: (store, type, record) ->
  data = {}
  data[root] = @toData(record, { includeId: true })

  repos = []
  stack.get("repos").forEach (repo) ->
    repos.pushObject repo.serialize()

  data[root]["repos"] = repos

  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:42:45.340

我找到了一种让 JSON 中嵌入的相关对象正确加载的方法。基本上，您必须对序列化程序进行子类化，然后在其初始化程序中告诉它为关系注册一个映射。这是一个名为 Category 的模型类的示例，它具有一对多关系“resourceTypes”：

```
App.WOSerializer = DS.Serializer.extend({
   init: function(){
     this._super();
     this.map(App.Category, {
       resourceTypes: { embedded: 'load' }
     });
   }
}); 
```

[我的解决方案在这里](https://stackoverflow.com/questions/13526470/how-do-i-load-two-models-in-one-json-request-in-ember-data/13551856#13551856)进一步解释。

# javascript - 隐藏一个 没有指定字符串

> ID：13755342
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:57:34.437
> 
> 标签：javascript, css, search, html

因此，尽可能简单地说。我有多个 div，其中包含文本，如下所示：

```
<div id=1 style="position:relative"><font color=color>Hello Hello</font></div>
<div id=2 style="position:relative"><font color=color>Hello Goodbye</font></div>
<div id=3 style="position:relative"><font color=color>Goodbye Goodbye</font></div> 
```

我想在我的页面上的某个地方有一个搜索框，我可以在其中输入字符串，例如：“Hello”隐藏最后一个 div，“Hello Hello”隐藏最后两个 div，“Hello Goodbye”隐藏第一个和最后一个，而“Goodbye Goodbye”隐藏了前两个 div。输入不必区分大小写，但我更喜欢输入字符串的顺序。

提前致谢！-小星星

PS：如果可能的话，我宁愿远离 JQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:01:37.090

在纯*W3C 规范*中：

```
var forEach = Array.prototype.forEach;    

document.getElementById('inputID').addEventListener('keyup', function( event ) {
    forEach.call(document.querySelectorAll('div'), function( div ) {
        if( div.textContent.split(/\s+/).indexOf( event.target.value ) > -1 ) {
            div.style.display = 'none';
        } else {
            div.style.display = 'block';
        }
    });
}, false); 
```

演示：http: [//jsfiddle.net/FA2nj/](http://jsfiddle.net/FA2nj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:02:03.450

HTML：

```
<input type="text" id="my_input"> 
```

Javascript：

```
document.getElementById('my_input').addEventListener('keyup', function () {
    var search_for = this.value;
    var divs = document.getElementsByTagName('div');
    Array.prototype.forEach.call(divs, function (div) {
       if (search_for && div.textContent.toLowerCase().indexOf(search_for.toLowerCase()) > -1) {
           div.style.display = 'none'; // to hide
       }
       else {
           div.style.display = 'block';
       }
    });
});​ 
```

# ajax - Dojo .ajax 可以加载图像吗？

> ID：13755343
> 
> 赞同：1
> 
> 时间：2012-12-07T00:57:52.067
> 
> 标签：ajax, image, dojo

Jquery 这里有一个类似的问题： [Asynchronously load images with jQuery](https://stackoverflow.com/questions/4285042/can-jquery-ajax-load-image)

接受的[答案](https://stackoverflow.com/a/4285068/150050)非常聪明并且效果很好（对于Jquery）：

```
var img = $("<img />").attr('src', 'http://somedomain.com/image.jpg')
  .load(function() {
      if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
          alert('broken image!');
      } else {
          $("#something").append(img);
      }
  }); 
```

我的问题是，在 Dojo 中与此等效的规范是什么（包括错误处理）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:41:01.117

您可以使用“dojox.form.Uploader”来 ajax 上传图片。

道场代码：-

```
require(['dojox/form/Uploader'],function(Uploader)
{
    var uploader = new Uploader(
    {
       uploadOnSelect:true,   //Upload file on file select
       url:'UploadFile.php',  //Path of your server file
       label:'',              //Label of uploader
       multiple:true          //Select multiple file to upload
    },'uploader');
    uploader.startup();
}); 
```

HTML 代码：-

```
<div id="uploader"></div> 
```

“dojox.form.Uploader”提供了各种有助于上传文件的属性、方法和事件。我希望这能帮到您。

# actionscript-3 - 从类中触发主时间轴上的函数？

> ID：13755345
> 
> 赞同：0
> 
> 时间：2012-12-07T00:57:53.063
> 
> 标签：actionscript-3

我正在尝试从类文件中触发我的 FLA 中主时间轴上的一个函数。我通常可以通过论坛帖子找到解决方案，但我看到的所有帖子都没有帮助。

这是我现在拥有的代码，但它似乎不起作用。

```
//this is the code in my as3 class file
var e:Event = new Event("runFunc",true)                  dispatchEvent(e)

//here is the code in my .fla       
addEventListener("runFunc", initialization); 
```

我知道在 FLA 中使用代码是一种肮脏的编码方法，但我正在尝试添加到我之前构建的预先存在的游戏中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:43:56.050

一个简单的解决方案是使用此方法将您的代码迁移出时间线。

```
// class file
public function Main() {
    //constructor
    this.addFrameScript(1, frameOneFunc);
    initialization();
}
private function frameOneFunc(){
    This is essentially code in timeline for frame one.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:29:26.250

我不太高兴你，你是说把我的代码从 fla 中删掉，然后粘贴到类文件的 frameOneFunc 中吗？

这里还有一些代码可以关闭。

.fla 代码（我试图运行的函数）

```
function initialization();
{
    //random code...
} 
```

我的类文件中的代码

```
public function frame1()
{
    this.savedstuff = SharedObject.getLocal("myStuff");
    this.btnSave.addEventListener(MouseEvent.CLICK, this.SaveData);
    this.btnLoad.addEventListener(MouseEvent.CLICK, this.LoadData);
    if (this.savedstuff.size > 0)
    {
//trying to trigger function here...this is my failed code below
            //MovieClip(parent).initialization();
            //var e:Event = new Event("runFunc",true)
             //dispatchEvent(e)
            //dispatchEvent(new Event("initialization"));
            this.nameField.y = 800

            this.note.y = 800

            this.btnSave.y = 800

            this.btnLoad.y = 800
            this.tigger.y = 0;

            trace(this.savedstuff.data.username);
        this.nameField.text = this.savedstuff.data.username;
        this.note.gotoAndStop(4);
    }
    return;
} 
```

# matlab - MATLAB：使用 ode45 时是否可以有两个事件值？

> ID：13755352
> 
> 赞同：2
> 
> 时间：2012-12-07T00:58:27.787
> 
> 标签：matlab, ode, numerical-integration

我想对我的 ode45 运动方程计算有两个限制：位置和时间。我已经让时间事件开始工作，但我不确定是否以及如何添加另一个事件来限制位置。编辑：我在一个 ODE 方程中也有许多不同的粒子耦合在一起，并且一旦它们到达“屋顶”就需要它们单独停止，因为它们都以不同的速度行进......我能通过事件来实现这一点吗？我有一个想法，我将如何做到这一点，但它非常复杂，可能会很慢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T00:47:00.307

我不确定你是否可以做你想做的事，但可以用事件做很多事情。首先，这听起来像是某种[首次通过时间](http://en.wikipedia.org/wiki/First-hitting-time_model)（又名首次击球时间）的数值计算。如果这些“粒子”是随机的，请停止并且不要使用`ode45`适合 SDE 的方法。

据我所知，您可以拥有多少个事件函数 - 或者更确切地说是事件函数的维度（类似于您的 ODE 函数的维度） - 并且它们的数量与您拥有多少个 ODE 方程无关. events 函数接收当前时间和当前状态向量。您可以使用其中的任何或所有元素来创建每个事件。您是正确的，更多的事件函数和更复杂的事件会减慢集成速度。性能还取决于检测事件的频率。如果您的每个粒子都到达您所说的“屋顶”，并且只触发一个事件，那么这不会太糟糕。

在实现方面，这里有一个基于 Matlab 示例的简单示例`ballode`，仅在垂直方向上模拟 N 个弹道粒子。有 N 个非终止事件来捕捉每个粒子通过 y = 0 时的时间和速度。添加一个额外的终止事件来检查是否所有粒子都通过了 y = 0（如果我们知道这是哪个粒子就像我们在这里所做的那样，我们可以使该事件成为终止事件）。

```
function eventsdemo

% Initial conditions for n balls
n = 10;
y0(2*n,1) = 0;
y0(n+1:end) = linspace(20,40,n);

% Specify events function
options = odeset('Events',@(t,y)efun(t,y,n));

% Integrate
[t,y,te,ye,ie] = ode45(@(t,y)f(t,y,n),[0 10],y0,options);

figure;
plot(t,y(:,1:n),'b',te(1:n),ye(sub2ind(size(ye),ie(1:n),(1:n).')),'r.');

function dydt = f(t,y,n)
% Differential equations for ballistic motion
dydt = [y(n+1:end);zeros(n,1)-9.8];

function [value,isterminal,direction] = efun(t,y,n)
% Last event checks that all balls have hit ground and terminates integration
yn = y(1:n);
value = [yn;all(yn < 0)];
zn = zeros(n,1);
isterminal = [zn;1];
direction = [zn-1;1]; 
```

在某些方面，这有点低效，因为我们继续模拟所有 N 个系统，即使它们中的一些已经通过 y = 0。但是，它很简单，并且输出数组是矩形的而不是参差不齐的。

我不清楚您所说的“耦合在一起”并需要粒子“停止”是什么意思。如果您需要做的不仅仅是记录事件数据，例如更改系统参数或以其他方式更改微分方程，那么您需要在每个事件后终止并重新开始积分。查看`ballode`示例（`edit ballode`在 Matlab 命令窗口中键入）以查看一些建议以使其更有效。

# android - android NDK互斥锁

> ID：13755355
> 
> 赞同：5
> 
> 时间：2012-12-07T00:58:47.937
> 
> 标签：android, android-ndk, pthreads, mutex

我一直在将跨平台 C++ 引擎移植到 Android，并注意到它在调用**pthread_mutex_lock**时会莫名其妙地（并且不一致地）阻塞。这个引擎已经在多个平台上工作了很多年，而且有问题的代码多年来都没有改变，所以我怀疑这是一个死锁或其他错误代码。它一定是我的 Android 端口..

到目前为止，代码中有几个地方阻塞了 pthread_mutex_lock。它也不是完全可重现的。当它挂起时，LogCat 中没有可疑的输出。

我修改了这样的互斥代码（为简洁起见编辑......真实代码检查所有返回值）：

```
void MutexCreate( Mutex* m )
{
#ifdef WINDOWS
    InitializeCriticalSection( m );
#else ANDROID
    pthread_mutex_init( m, NULL );
#endif
}

void MutexDestroy( Mutex* m )
{
#ifdef WINDOWS
    DeleteCriticalSection( m );
#else ANDROID
    pthread_mutex_destroy( m, NULL );
#endif
}

void MutexLock( Mutex* m )
{
#ifdef WINDOWS
    EnterCriticalSection( m );
#else ANDROID
    pthread_mutex_lock( m );
#endif
}

void MutexUnlock( Mutex* m )
{
#ifdef WINDOWS
    LeaveCriticalSection( m );
#else ANDROID
    pthread_mutex_unlock( m );
#endif
} 
```

我尝试修改 MutexCreate 以进行错误检查和递归互斥锁，但这没关系。我什至没有收到错误或日志输出，所以这意味着我的互斥代码很好，或者没有显示错误/日志。操作系统究竟如何通知您错误的互斥锁使用情况？

该引擎大量使用静态变量，包括互斥锁。我看不到怎么做，但这是个问题吗？我对此表示怀疑，因为我修改了许多互斥体以在堆上分配，并且发生了相同的行为。但这可能是因为我错过了一些静态互斥锁。我可能在这里抓住了稻草。

我阅读了几篇参考文献，包括：

[http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html)

[http://www.embedded-linux.co.uk/tutorial/mutex_mutandis](http://www.embedded-linux.co.uk/tutorial/mutex_mutandis)

[http://linux.die.net/man/3/pthread_mutex_init](http://linux.die.net/man/3/pthread_mutex_init)

[Android NDK 互斥锁](https://stackoverflow.com/questions/6144496/android-ndk-mutex)

[Android NDK 问题 pthread_mutex_unlock 问题](https://stackoverflow.com/questions/7507462/android-ndk-problem-pthread-mutex-unlock-issue)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:46:51.473

“错误检查”互斥锁将检查几件事（例如尝试递归地使用非递归互斥锁），但没有什么特别的。

您说“真实代码检查所有返回值”，因此如果任何 pthread 调用返回非零值，您的代码可能会爆炸。（不知道为什么你的 pthread_mutex_destroy 需要两个参数；假设复制和粘贴错误。）

pthread 代码在 Android 中被广泛使用，并且没有已知的挂起，因此 pthread 实现本身不太可能出现问题。

互斥体的当前实现适合 32 位，所以如果您打印`*(pthread_mutex_t* mut)`为整数，您应该能够弄清楚它处于什么状态（从技术上讲，它*在*过去某个时间点处于什么状态）。bionic/libc/bionic/pthread.c 中的定义是：

```
/* a mutex is implemented as a 32-bit integer holding the following fields
 *
 * bits:     name     description
 * 31-16     tid      owner thread's kernel id (recursive and errorcheck only)
 * 15-14     type     mutex type
 * 13        shared   process-shared flag
 * 12-2      counter  counter of recursive mutexes
 * 1-0       state    lock state (0, 1 or 2)
 */ 
```

“快速”互斥体的类型为 0，并且不设置该`tid`字段。事实上，通用互斥锁的值是 0（未持有）、1（持有）或 2（持有，有争用）。如果您曾经看到一个快速互斥体，其值*不是*其中之一，那么很可能有什么东西出现并踩到了它。

这也意味着，如果您将程序配置为使用递归互斥锁，您可以通过拉出位来查看哪个线程持有互斥锁（通过在 trylock 指示您即将停止时打印互斥锁值，或使用 gdb 转储状态在挂起的进程上）。加上 的输出`ps -t`，您将知道锁定互斥锁的线程是否仍然存在。

# mysql - 从服务中移动图像并在论坛中更新路径

> ID：13755358
> 
> 赞同：0
> 
> 时间：2012-12-07T00:59:24.963
> 
> 标签：mysql, regex, shell

我经营一个受欢迎的论坛，其中一位做出了很多令人敬畏的贡献的成员最近联系了我们。他已经从他的 webshots 库中发布了数百张图片，但服务正在发生变化，所有图片也在发生变化。我需要在我们的 mysql 数据库中更改他所有帖子中的所有图像 src 路径。

他有机会下载他给我的所有图像。因为我将不得不在生产中做很多这样的改变，所以我需要确保我不会把这件事搞砸。

他帖子中的图像 src 看起来与此类似，我认为 0103935217 是他的用户 ID。

```
http://inlinethumb25.webshots.com/47576/2156388770103935217S500x500Q85.jpg 
```

从服务下载的图像如下所示。请注意，S500x500Q85 已被替换为随机字符串。

```
2156388770103935217Reacil_fs.jpg 
```

所以我有两个任务：

1.  我需要重命名我放在服务器上的所有文件，删除随机字符和 _fs 名称。
2.  我需要更改他所有帖子中的文件路径，删除域和容器并将其替换为我的。此外，我需要删除 S500x500Q85 名称。

1.我有一个正则表达式，但我不确定如何替换 0103935217\w+?_fs

对于 2\. 我知道我的查询需要类似于以下内容。我有点不确定如何做到这一点，是用正则表达式吗？

```
UPDATE posts SET post_body = replace(post_body, '','') WHERE user_id = 1234 
```

# python - XIO: fatal IO error 11 (Resource temporarily unavailable) on X server ":0" after 235 requests (235 known processed) with 0 events remaining

> ID：13755366
> 
> 赞同：7
> 
> 时间：2012-12-07T01:00:03.507
> 
> 标签：python, multiprocessing, pygame

Yes other people have asked this question before, but not in the same context or to my satisfaction. So, here goes::

I am writing an application using python, the program using pygame (ergo opengl) to display the graphics. The graphics are generated in the program itself (so no directory issues whatsoever).

The application also needs to access the input parallely from a user. To achieve this I use a multiprocessing block with a pipe and read the input key using pygame event loop. The below code runs in a loop. The first loop iteration works fine, but on the 2nd iteration I am thrown that XIO error.

```
 parent, child = Pipe(duplex=True)
   # this function draws the canvas
   switches, retOrient = self.drawCanvas(cond, count, dispSize, moves)
   # this function gets the user input in another thread - stage 1
   p = Process(target=userInput, args=(self.button, child) )
   p.start()
   b_press = parent.recv()
   parent.close()

def userInput(button, child):
    button_pressed = button.blockAndWait()
    child.send( "%s"%(button_pressed.keyname) )
    child.close() 
```

I am a little perplexed at how this error occurs, what are the internals in XIO that cause it. None of the other answers actually explain the root cause of this error. Considering it works fine as a single process application, the multiprocessing module is closing some IO channel (the input registered object, the display object or the event loop) or opening some unnecessary channels. How can I decipher what exactly is causing this XIO error?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T01:09:00.857

Not necessarily a real answer, but I would not use `multiprocessing` to parallelize access to sockets like the connection to the X server. That looks like a bad idea. Use regular threads instead.

Be aware that `multiprocessing` is a hack based (sometimes) on forking, so what exactly occurs with a forked socket when both the parent and the child try to access it... is random mixed garbage.

EDIT: the reason is that both forked sockets are still the "same end" of the socket, with the X server holding on the "other end". When the X server wants to send a message, it writes, say, 100 bytes on the socket. But if you're unlucky, the forked process 1 reads the first 50 bytes and the forked process 2 reads the remaining 50 bytes. Each process is unexpectedly getting only a random part of the message. They will each complain that the X server is sending nonsense.

# ms-access - 如何在按下按钮时运行查询并将结果导出到 Excel 文件

> ID：13755368
> 
> 赞同：0
> 
> 时间：2012-12-07T01:00:45.020
> 
> 标签：ms-access

我有一个包含组合框和按钮的表单。当在其中选择一个值时，我必须检索在组合框中选择的值并基于该值运行查询。该查询生成一个包含 5 列的表。我希望将此表导出到 Excel 工作表。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:38:38.023

正如汤姆所说，您可以使用 Docmd.TransferSpreadsheet 命令。首先，您需要将查询设置为引用组合框的参数化查询。我假设它是您的 WHERE 子句的一部分。因此，您的查询可能如下所示：

```
 SELECT * FROM yourTable WHERE values = [Forms]![yourForm]![yourComboBox]; 
```

假设您刚刚编写的查询名为“qryExport”，您将在点击事件时将此代码放入表单上的按钮中：

```
 DoCmd.TransferSpreadsheet acExport, , "qryExport", "C:\yourPath\exportedReport.xlsm", True 
```

然后，您应该能够进入您指定的路径并打开该 excel 文件并确保一切正常。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:56:33.443

好的，够简单的。您必须使用 VBA。

在按钮的单击事件中，您只需执行 DoCmd.TransferSpreadsheet 命令。[有几个选项，所以你可以在这里](http://msdn.microsoft.com/en-us/library/office/ff844793%28v=office.14%29.aspx)查找。

对于*table name*，请使用包含对 ComboBox 的引用的查询。IE`=[Forms]![FormName]![ControlName]`

# python - 如何让 pycassaShell 在 Windows 中工作？

> ID：13755371
> 
> 赞同：1
> 
> 时间：2012-12-07T01:01:11.770
> 
> 标签：python, cassandra, pycassa

编辑：我开始工作了，我进入 pycassa 目录并输入`python pycassaShell`，但我的问题的第二部分（在底部）仍然有效：如何在 pycassaShell 中运行脚本？

我最近安装了 Cassandra 和 pycassa 并按照[此处](http://pycassa.github.com/pycassa/tutorial.html#using-pycassashell)的说明进行操作。

它们工作正常，除了我无法加载 pycassaShell。当我`pycassaShell`在命令提示符下键入时，我得到

```
'pycassaShell' is not recognized as an internal or external command, 
operable program or batch file. 
```

我需要为它设置路径吗？

另外，有谁知道您是否可以使用 pycassaShell 运行 ddl 脚本？正是出于这个原因，我想尝试一下。目前，我正在 cassandra CLI 中执行所有 ddl，我希望能够将其放入脚本中以使其自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:36:53.097

您可能不想使用 pycassaShell 运行脚本。它的设计更像是一个交互式环境，可以快速尝试。对于严肃的脚本，我建议只编写一个普通的 python 脚本，导入 pycassa 并自行设置连接池和列族；它应该只是额外的 5 行左右。

但是，您可以使用一个（未记录的，我刚刚注意到）可选`-f`或标志。`--file`启动完成后，它将基本上`execfile()`在该脚本上运行，因此您可以使用脚本中已经设置的`SYSTEM_MANAGER`和变量。`CF`这主要用作您的环境的准备脚本，类似于您可能如何使用 .bashrc 文件（我不知道 Windows 等效文件）。

关于 DDL 语句，我建议你看一下[SystemManager](http://pycassa.github.com/pycassa/api/pycassa/system_manager.html)类。

# youtube-api - 如何通过 API 判断 Youtube 频道是否自动生成

> ID：13755372
> 
> 赞同：1
> 
> 时间：2012-12-07T01:01:12.563
> 
> 标签：youtube-api

我正在通过 Gnip 获取 youtube XML 数据的提要。这是他们的 v2.0 API。我需要弄清楚消息的来源是来自具有真实用户 ID 的真实用户，还是来自具有自动生成 ID 的自动生成用户。肉眼观察，很明显哪个是真实 ID，哪个是自动生成的，但我在 XML 中看不到指示用户是真实的还是自动生成的字段。

示例：自动生成：[http](http://www.youtube.com/channel/5l8cCviw5TIKtWo9VKhfZQ) ://www.youtube.com/channel/5l8cCviw5TIKtWo9VKhfZQ 真实：[http](http://www.youtube.com/) ://www.youtube.com/ {真实用户名}

通过链接，差异也很明显，因为一个包含“频道”一词，而另一个则没有。但是，我没有从 XML 提要中获得此信息。我只能获取他们的用户名，该用户名可以是真实姓名，也可以是自动生成的。我如何区分这2个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:54:49.063

我认为您认为一个是“真实的”而另一个是自动生成的假设是不正确的。据我所知，[http://www.youtube.com/channel/5l8cCviw5TIKtWo9VKhfZQ](http://www.youtube.com/channel/5l8cCviw5TIKtWo9VKhfZQ)是一个真正的用户频道。只是用户拥有 Google+ 身份，而不是 YouTube 用户名。此博客文章对此进行了更多解释：http: [//apiblog.youtube.com/2012/03/youtube-google-api-and-you.html](http://apiblog.youtube.com/2012/03/youtube-google-api-and-you.html)

我的主要问题是为什么需要区分？如果您只使用用户 ID，您应该能够以相同的方式对待任何一种类型的频道——即使与 YouTube 用户名相关联的频道也有用户 ID。

# php - CakePHP 验证用户信息

> ID：13755373
> 
> 赞同：0
> 
> 时间：2012-12-07T01:01:17.880
> 
> 标签：php, session, cakephp, variables, authentication

在我看来，我正在尝试显示当前登录的用户信息，并认为我可以通过使用

```
echo "Welcome back " .$this->Session->read('Auth.User.username'). " 
```

这将显示用户名，我可以使用相同的方法显示该数据库行中的其他字段，但是其他一些字段可以随时更新，但在用户注销并再次登录之前不会在用户页面上更新。

这是正确的方法吗？或者这可以做得更好，并以某种方式将一些代码放在 AppController 的 beforeFilter() 中，以继续更新每个页面加载时的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:29:22.830

如果从 CakePHP 外部更新数据库并且没有调用任何控制器操作，似乎唯一的解决方案是在每个加载的页面上进行查询以获取当前值。

为此，您应该使用`beforeFilter`AppController 上的方法：

```
function beforeFilter(){
     $user = $this->User->field('name', array('User.id' => $this->Session->read('Auth.User.id')));
     $this->Session->write('Auth.User', $user);
} 
```

否则，您可以使用 JavaScript 和 AJAX 不时获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:34:40.077

如果您只是`afterSave()`在 User 模型上创建了一个，并在其中设置`$this->Session->write('Auth.User') = $user;`

这是未经测试的，但似乎应该可以工作 - 那么您的会话将始终是最新的任何更改。

**编辑：**

根据您的评论，如果数据是从您无权访问的第三方来源提取的，并且您需要确保在每次页面加载时都对其进行更新，那么是的，AppController 的 beforeFilter() 就可以了。

但是，如果您只在某些页面或某些元素上需要它，您可以调用更新，然后或通过元素的 requestAction。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:06:25.050

我更喜欢获取实时数据而不是会话数据

```
var $uses = array('User');

function beforeFilter(){
    $id = $this->Auth->user('id'); //Using the session's user id is fine because it doesn't change/update
    $user_data = $this->User->findById($id);
    $user_fname = $user_data['User']['fname'];
    $this->set('fname', $user_fname);
}

//In your view
echo 'Welcome Back '. $fname . '!'; 
```

# python - 使用 Mechanize 接受和发送 Cookie

> ID：13755374
> 
> 赞同：5
> 
> 时间：2012-12-07T01:01:19.040
> 
> 标签：python, cookies, mechanize, shibboleth

我需要在需要 cookie 的网页上填写登录表单并获取有关结果页面的一些信息。由于这需要在晚上非常奇怪的时间完成，我想自动化这个过程，因此我使用机械化（欢迎任何其他建议 - 请注意，我必须在学校服务器上运行我的脚本，我不能安装新软件。Mechanize 是纯 python，所以我能够解决这个问题）。

问题是托管登录表单的页面要求我能够接受和发送 cookie。理想情况下，我希望能够接受和发送服务器发送给我的所有 cookie，而不是硬编码我自己的 cookie。

因此，我开始使用 mechanize 编写脚本，但我似乎处理 cookie 错误。由于我在任何地方都找不到有用的文档（如果我是盲人请指出），我在这里问。

这是我的机械化脚本：

```
import mechanize as mech

br = mech.Browser()
br.set_handle_robots(False)
print "No Robots"
br.set_handle_redirect(True)
br.open("some internal uOttawa website")
br.select_form(nr=0)
br.form['j_username'] = 'my username'
print "Login: ************"
br.form['j_password'] = 'my password'
print "Password: ************"
response = br.submit()
print response.read() 
```

这将打印以下内容

```
No Robots
Login: ************
Password: ************

<html>
<body>
    <img src="/idp/images/uottawa-logo-dark.png" />
    <h3>ERROR</h3>
    <p>
        An error occurred while processing your request.  Please contact your helpdesk or
        user ID office for assistance.
    </p>
    <p>
       This service requires cookies.  Please ensure that they are enabled and try your 
       going back to your desired resource and trying to login again.
    </p>
    <p>
       Use of your browser's back button may cause specific errors that can be resolved by
       going back to your desired resource and trying to login again.
    </p>
        <p>
           If you think you were sent here in error,
           please contact technical support
        </p>       
</body>
</html> 
```

如果我在 Chrome 浏览器上禁用 cookie 并尝试相同的操作，这确实是我会得到的页面。

我尝试如下添加一个cookie jar，但没有运气。

```
br = mech.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj) 
```

我查看了多个机械化文档来源。[其中一位](http://wwwsearch.sourceforge.net/mechanize/hints.html#cookies)提到

```
A common mistake is to use mechanize.urlopen(), and the .extract_cookies() and 
.add_cookie_header() methods on a cookie object themselves. 
If you use mechanize.urlopen() (or OpenerDirector.open()), 
the module handles extraction and adding of cookies by itself,
so you should not call .extract_cookies() or .add_cookie_header(). 
```

这似乎是说我的第一种方法应该有效，但事实并非如此。

我将不胜感激 - 它令人困惑，而且似乎严重缺乏文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T16:20:40.783

我在使用 Mechanize 对 Shibboleth 网站进行身份验证时遇到了完全相同的消息，只是因为我犯了和你一样的错误。看起来我想通了。

## 简短的回答

您需要打开的链接是：

```
br.open("https://web30.uottawa.ca/Shibboleth.sso/Login?target=https://web30.uottawa.ca/hr/web/post-register") 
```

代替：

```
br.open("https://idp.uottawa.ca/idp/login.jsp?actionUrl=%2Fidp%2FAuthn%2FUserPassword") 
```

## 为什么？

> Shibboleth：只需一次简单的登录即可轻松安全地连接到各种服务。

如果你不告诉他你想登录哪个服务，Shibboleth 登录本身是没有用的。让我们分析 HTTP 标头并比较您为这两个查询获得的 cookie。

**1.打开** [https://idp.uottawa.ca/idp/login.jsp?actionUrl=%2Fidp%2FAuthn%2FUserPassword](https://idp.uottawa.ca/idp/login.jsp?actionUrl=%2Fidp%2FAuthn%2FUserPassword)

```
Cookie: JSESSIONID=C2D4A19B2994BFA287A328F71A281C49; _ga=GA1.2.1233451770.1401374115; arp_scroll_position=-1; tools-resize=tools-resize-small; lang-prev-page=en; __utma=251309913.1233451770.1401374115.1401375882.1401375882.1; __utmb=251309913.14.9.1401376471057; __utmz=251309913.1401375882.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); lang=en 
```

**2\. 打开** [https://web30.uottawa.ca/Shibboleth.sso/Login?target=https://web30.uottawa.ca/hr/web/post-register](https://web30.uottawa.ca/Shibboleth.sso/Login?target=https://web30.uottawa.ca/hr/web/post-register)

```
Cookie: JSESSIONID=8D6BEA53823CC1C3045B2CE3B1D61DB0; _idp_authn_lc_key=fc18251e-e5aa-4f77-bb17-5e893d8d3a43; _ga=GA1.2.1233451770.1401374115; arp_scroll_position=-1; tools-resize=tools-resize-small; lang-prev-page=en; __utma=251309913.1233451770.1401374115.1401375882.1401375882.1; __utmb=251309913.16.9.1401378064938; __utmz=251309913.1401375882.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); lang=en 
```

**有什么不同？**你又多了一个饼干：`_idp_authn_lc_key=1c21128c-2fd7-45d2-adac-df9db4d0a9ad;`. 我想这是说“我想在[那里](https://web30.uottawa.ca/hr/web/post-register)登录”的cookie。

> 在身份验证过程中，IdP 将设置一个名为 _idp_authn_lc_key 的 cookie。此 cookie 仅包含识别当前身份验证过程（通常跨越多个请求/响应）所需的信息，并在身份验证过程完成后被删除。
> 
> *来源：[https ://wiki.shibboleth.net/confluence/display/SHIB2/IdPCookieUsage](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPCookieUsage)*

* * *

**我是怎么找到** [那个链接的](https://web30.uottawa.ca/Shibboleth.sso/Login?target=https://web30.uottawa.ca/hr/web/post-register)？我确实挖掘了网络，发现[https://web30.uottawa.ca/hr/web/en/user/registration](https://web30.uottawa.ca/hr/web/en/user/registration)使用以下链接重定向到登录表单：

```
<a href="https://web30.uottawa.ca/Shibboleth.sso/Login?target=https://web30.uottawa.ca/hr/web/post-register" 
   class="button standard"><span>Create your account using infoweb</span></a> 
```

所以这不是机械化的问题，但更多的是 Shibboleth 乍一看有点难以理解。[您将在此处](https://www.switch.ch/aai/demo/2/expert.html)找到有关 Shibboleth 身份验证流程的更多信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-07T01:11:35.920

您提交表单数据的网站可能需要 CSRF 令牌（您跳过下载的表单中提供的 cookie。）

尝试使用请求：

[http://docs.python-requests.org/en/latest/user/quickstart/#cookies](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)

寻找 cookie 和/或隐藏的表单字段，然后开火。

# sql - SELECT 语句 - 将附加列添加到结果集中

> ID：13755377
> 
> 赞同：2
> 
> 时间：2012-12-07T01:01:41.900
> 
> 标签：sql, oracle

如何更改此代码以查看结果中的 A 列和 D 列？

```
SQL> SELECT A FROM R WHERE EXISTS
     (SELECT D FROM S WHERE S.D=R.A AND S.C=R.B); 
```

结果：

```
A
----------
1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:03:57.423

```
Select 
  A, D
From
  R
    Inner Join
  S
    On S.D = R.A And S.C = R.B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:05:01.790

```
SELECT R.A, S.D
FROM R
INNER JOIN S ON S.D = R.A AND S.C = R.B 
```

# c# - 如何为按值比较的类编写一个好的 GetHashCode() 实现？

> ID：13755380
> 
> 赞同：2
> 
> 时间：2012-12-07T01:01:58.887
> 
> 标签：c#, hash, gethashcode, consistent-hashing

假设我们有这样一个类：

```
class MyClass
{
    public string SomeValue { get; set; }

    // ...
} 
```

现在，假设两个`MyClass`实例在它们的`SomeValue`属性相等时是相等的。因此，我覆盖了`Object.Equals()`和`Object.GetHashCode()`表示它的方法。`Object.GetHashCode()`返回`SomeValue.GetHashCode()`但同时我需要遵循以下规则：

1.  如果一个对象的两个实例相等，它们应该返回相同的哈希码。
2.  哈希码不应在整个运行时更改。

但显然，`SomeValue`可以改变，我们之前得到的哈希码可能会失效。

我只能考虑使该类不可变，但我想知道其他人在这种情况下会做什么。

在这种情况下你会怎么做？拥有这样一个类是否代表了设计决策中的一个*更微妙的问题？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:10:27.107

通用合约规定，如果 A.equals(B) 为真，那么它们的哈希码必须相同。如果 A 中的 SomeValue 以 A.equals(B) 不再为真的方式发生变化，则 A.GetHashCode() 可以返回与以前不同的值。可变对象不能缓存GetHashCode()，每次调用方法都必须计算。

这篇文章有关于 GetHashCode 和可变性的详细指南：

[http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:04:16.017

如果您`GetHashCode()`依赖于某个可变值，则必须在值更改时更改哈希值。否则你违反平等法则。

`HashSet`如果您将对象放入 a或作为 a 中的键，则需要一旦有人要求散列就永远不应该更改的部分`Dictionary`。在这些情况下，您必须确保哈希码不会被更改，只要它存储在这样的容器中。这可以通过在编程时简单地处理这个问题来手动确保，或者您可以为`Freeze()`您的对象提供一些方法。如果这被调用，任何后续尝试设置属性都会导致某种异常（你也应该提供一些`Defrost()`方法）。此外，您将`Freeze()`方法的调用放入您的`GetHashCode()`实现中，因此您可以非常确定没有人会错误地更改冻结的对象。

最后一个提示：如果您需要更改此类容器中的对象，只需将其移除、更改（不要忘记解冻）并重新添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T01:33:03.687

您需要在可变性和 GetHashCode 之间进行选择，它们为“相等”对象返回相同的值。通常，当您认为要为可变对象实现“相等”时，您最终会决定您具有“相等的阴影”并且实际上并不意味着 Object.Equals 相等。

在任何类型的数据结构中拥有一个可变对象作为“键”对我来说都是一个很大的危险信号。例如：

```
MyObj a = new MyObj("alpha");
MyObj b = new MyObj("beta");
HashSet<MyObj> objs = new HashSet<MyObj>();
objs.Add(a);
objs.Add(b);
// objs.Count == 2
b.SomeValue = "alpha";
// objs.Distinct().Count() == 1, objs.Count == 2 
```

我们严重违反了 的合同`HashSet<T>`。这是一个明显的例子，也有微妙的例子。

# ios - 如果从 connection:willSendRequest:redirectResponse 返回 nil，为什么 NSURLConnection 会停止发送数据：

> ID：13755386
> 
> 赞同：1
> 
> 时间：2012-12-07T01:02:40.267
> 
> 标签：ios, nsurlconnection

我正在为 NSURLConnection 实现一个重定向处理程序。出于我的目的，我实际上并不想进行重定向，我想加载整个页面并记住重定向以供以后使用。在 NSURLConnectionDataDelegate 的 connection:willSendRequest:redirectResponse: 方法的文档中，我发现：

> 根据重定向响应使用的实际 URL 请求。代理可以返回未修改的请求以允许重定向、返回新请求或返回 nil 以拒绝重定向并继续处理连接。

我试过这段代码：

```
- (NSURLRequest *) connection: (NSURLConnection *) connection
              willSendRequest: (NSURLRequest *) request
             redirectResponse: (NSURLResponse *) redirectResponse
{
    NSURL *url1 = [request URL];
    NSURL *url2 = [redirectResponse URL];
    if ([request URL] != nil)
        self.redirect = [request URL];
    return nil;
}

- (void) connection: (NSURLConnection *) theConnection didReceiveResponse: (NSURLResponse *) response {
    NSURL *url1 = [response URL];
    int foo = 0;
} 
```

该程序从未调用过`connection:didReceiveData:`,`connection:didFailWithError:`或`connectionDidFinishLoading:`. 返回`request`而不是`nil`，程序正常加载页面。（重定向的 URL 是原始 URL，但这是[另一个问题](https://stackoverflow.com/questions/13755262/why-does-nsurlconnection-redirect-to-itself)。如果它们相关，请杀死两只鸟并回答那一只。）

是否需要其他东西才能正确允许 NSURLConnection 在重定向尝试后继续处理文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T04:45:12.587

大多数情况下，HTTP 重定向响应是当前连接的结束。如果您的第一个连接以重定向结束并且您拒绝处理重定向，则无需再做任何事情。

# java - java - （slick2D）在按键上以设定速度移动精灵设定距离

> ID：13755391
> 
> 赞同：1
> 
> 时间：2012-12-07T01:03:09.090
> 
> 标签：java, distance

所以我一直在尝试编写一个简单的游戏，其中一个角色正在使用语句移动

```
character1.x+=0.1f*delta 
```

其中 delta 是帧之间的时间（以毫秒为单位）。当我想每帧移动它时，这很有效，但我希望能够以这种速度将它移动一段设定的距离（50 像素，或我的游戏中的单个图块）。使用 for() 循环使它以最大速度移动精灵，所以我不能这样做。它必须在单个按键上工作，因此他们不必按住键。

当然，我几乎没有在 Java 中做过任何事情，所以我可能缺少一个非常愚蠢的简单解决方案。现在，我可以将其更改为瞬时运动，但它看起来非常生涩。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:48:20.393

在这种情况下，您可能希望为您的组件添加一个 keyListener。

 ````
 yourComponent.addKeyListener(new KeyAdapter () { // Possibly your Frame
             @Override // Overrides the keyPressed event
             public void keyPressed(KeyEvent e) {

                  if ( e == YOUR_KEY_CODE ) { 
                       for( int var = 0; var < yourDistance; var ++ ){
                          yourSpriteComponent.x += 1;
                          try{
                             Thread.sleep(yourTimeInMilliSec);
                          } catch( Exception e ){
                             // Your catch block here
                          }
                       }
                  }

            }
    }); 
```

其中 YOUR_KEY_CODE 是用户需要按下才能执行 for() 循环的键。可以在[javadoc中找到关键代码](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)`

# android - 带有 ActionBar 的 Android 4.0 MapView

> ID：13755398
> 
> 赞同：0
> 
> 时间：2012-12-07T01:04:04.263
> 
> 标签：android, google-maps, android-fragments, android-actionbar

有人可以给我一个关于如何在 Android 4.0 ICS 中使用 MapView 和 ActionBar 的好例子吗？没有像 MapFragment 这样的东西吗？我希望我的应用在操作栏中具有视图控制（导航下拉列表），并且其中一个片段必须是地图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:38:41.427

适用于 Android v2 的 Google Maps API 具有 MapFragment。它记录在 developers.google.com 中。

# c# - 代码隐藏中当前目录的相对路径不一致

> ID：13755399
> 
> 赞同：2
> 
> 时间：2012-12-07T01:04:10.707
> 
> 标签：c#, asp.net, visual-studio-2010, httpresponse, relative-path

我有一个 asp.net 网站，它使用相对路径将一些数据写入 TXT 文件。它使用以下命令执行此操作：

```
string currentDirectory = "./";
string individualDeviceTxt = "myfile.txt";    

System.IO.StreamWriter fileW3 = new System.IO.StreamWriter(currentDirectory + individualDeviceTxt); 
```

该文件成功写入以下路径：

C:\Program Files (x86)\Common Files\microsoft shared\DevServer\10.0

但是，稍后，当我尝试将此文件传输给用户时，相对目录 ./ 指向不同的路径。这是代码：

```
System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
response.Clear();
response.AddHeader("Content-Disposition", "attachment; filename=" + currentDirectory + individualDeviceTxt + ";");
response.TransmitFile(currentDirectory + individualDeviceTxt);
response.End(); 
```

它正在尝试从 'C:\Users\user\documents\visual studio 2010\Projects\myproject\myfile.txt 发送文件，这是不正确的（那里不存在。）

所以很明显，“./”指向我的第二个代码片段的不同文件夹，但我想指向第一个片段中使用的相同“./”。我需要做什么才能做到这一点？我想在这两个地方继续使用 ./ 作为 myfile.txt 的目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:17:34.670

在 asp.net 中获取路径可能很棘手。

以下是获取当前路径的四种不同方法，大多数只有两种提供相同的结果。把它放在下面的服务器端代码中。我喜欢使用 AppDomain，它似乎是查找 .aspx 页面所在位置最可靠的方法。

```
string paths = " Runtime Path "  + System.Reflection.Assembly.GetExecutingAssembly().Location + "<br>" +
            " Using Root " + new DirectoryInfo("./").FullName + "<br>" +
            " Appdomain " + Path.GetDirectoryName(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile) + "<br>" +
            " Environment " + System.Environment.CurrentDirectory; 
```

我得到的结果是。希望这可以帮助。

运行时路径 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\e333f875\41caca57\assembly\dl3\9d915b4e\ee11a5b0_20d4cd01\MvcTutorial.DLL

使用根目录 C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\

Appdomain C:\Users\Robert\documents\visual studio 2010\Projects\MvcTutorial\MvcTutorial

环境 C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:10:52.387

您应该考虑使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)创建在所有上下文中都应该正确的绝对系统路径（假设相同的应用程序）。

# html - 无法对齐联系表格

> ID：13755400
> 
> 赞同：0
> 
> 时间：2012-12-07T01:04:14.610
> 
> 标签：html, css, forms, alignment

我一直在尝试编辑这个简单的表格，让它看起来很好看 3 个小时，但我仍然不在那里。我希望输入字段自然与标签位于同一行，但不知何故，输入比标签低一点，我似乎无法用边距编辑它们。我究竟做错了什么？

这是表格的样子：

![http://snag.gy/oPRNy.jpg](../Images/516fe6d328a5fc29f9300dfdc4269378.png)

// 联系表

```
<label for="name"><p>Name:</p></label>
<input type="text" name="name" id="name" tabindex="1" />
<br/>
<label for="email"><p>Email:</p></label>
<input type="text" name="email" id="email" tabindex="2" />
<br/>
<label for="subject"><p>Subject:</p></label>
<input type="text" name="subject" id="subject" tabindex="3" />
<br/>
<label for="comments"><p>Comments:</p></label>
<textarea name="comments" id="comments" cols="45" rows="5" tabindex="4"></textarea>
<br/>
<label for="submit"></label>
<input type="submit" name="submit" id="submit" value="Submit" tabindex="5" />
<label for="reset"></label>
<input type="reset" name="reset" id="reset" value="Clear" tabindex="6" /> 
```

// CSS

```
 label {
    float: none;
    font-size: 100%;
    width: 250px; /* just this width evens out input box placement */
    font-weight: bold;
}
input { /*I think these just fall in because they are naturally following the labels!*/
    width: 250px;
    padding:5px;
    margin-top: -10px;
}
textarea {
    width: 250px;
    height: 150px;
    resize:none;
}
guestbook {
    margin-top:50px;
    text-align:center;
    font-size:26px;
    color:#05924b;
    font-family:Gisha;

}
gb p {
    color:#05924b;
    font-family:Gisha;
    text-align:left;
    margin-left:85px;
    margin-top:0px;
    margin-bottom:0px;
} 
```

// 解决方案：从表单中删除“p”段落并从 CSS 调整其余部分，将 float:left 添加到不同的输入字段和行，降低标签宽度以使输入更接近，然后计算并放置正确的边距- 对 input{} 和 textarea{} 都有权利，最后是 #submit 以使所有内容井井有条。下面是新代码的截图： http: [//snag.gy/PwpbQ.jpg](http://snag.gy/PwpbQ.jpg)

// CSS

```
 /* Input */
label {
    float: left;
    font-size: 100%;
    width: 50px; /* just this width evens out input box placement */
    font-weight: bold;
    margin: 2px 0;
    padding:5px;
    font-family: Gisha;
    font-style: normal;
    font-variant: normal;
    text-decoration: none;
    text-align: left;
}
input { /*I think these just fall in because they are naturally following the labels!*/
    width: 300px;
    padding:5px;
    margin: 5px 0;
    font-size:24px;
    margin-right:192px;
}
textarea {
    width: 300px;
    height: 150px;
    resize:none;
    margin:5px 0;
    padding:5px;
    margin-right:192px;
}
#submit {
    margin-right:225px; 
}
/* End of input */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:09:41.287

从标签中删除所有`<p>`标签。`<p>`标记是块级元素，因此不应嵌套在内联元素中`<label>`。块级元素也清晰，这意味着它们不允许任何一侧的内容（除非浮动）。我相信这会导致您的问题。

```
<label for="name">Name:</label>
<input type="text" name="name" id="name" tabindex="1" />
<br/>
<label for="email">Email:</label>
<input type="text" name="email" id="email" tabindex="2" />
<br/>
<label for="subject">Subject:</label>
<input type="text" name="subject" id="subject" tabindex="3" />
<br/>
<label for="comments">Comments:</label>
<textarea name="comments" id="comments" cols="45" rows="5" tabindex="4"></textarea>
<br/>
<label for="submit"></label>
<input type="submit" name="submit" id="submit" value="Submit" tabindex="5" />
<label for="reset"></label>
<input type="reset" name="reset" id="reset" value="Clear" tabindex="6" /> 
```

调整标记后，`label`and`input`标签没有垂直间距。要添加垂直间距，您可以为两个元素添加边距。

```
label {
    font-size: 100%;
    width: 250px;
    font-weight: bold;
    margin: 2px 0;
}

input {
    width: 250px;
    padding:5px;
    margin: 2px 0;
} 
```

示例：http: [//jsfiddle.net/KZrXD/](http://jsfiddle.net/KZrXD/)

# jquery - UniformJS 导致字段消失

> ID：13755402
> 
> 赞同：0
> 
> 时间：2012-12-07T01:04:50.417
> 
> 标签：jquery, forms, wordpress

我最近在网页上放置了 UniformJS (http://uniformjs.com/) 脚本，以设置 SELECT 和 UPLOAD 字段的样式。我将脚本设置为影响这些字段，但是，现在这些字段已经完全消失了。这是我设置脚本的方式：

```
<script type="text/javascript" charset="utf-8">
  $(function(){
    $("input, select").uniform();
  });
</script> 
```

这是网页（请注意缺少 Resume 和 Country 字段，以及一些单选框）：http: [//goo.gl/aJKv1](http://goo.gl/aJKv1)

我进入 UniformJS 样式表并将所有文件路径更改为绝对文件，以确保这不是链接错误 - 但仍然没有运气。

我对 Javascript/jQuery 仍然非常陌生，但我已经尝试了我能想到的一切。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:09:20.567

缺少 css。

这是控制台输出： `Failed to load resource: the server responded with a status of 404 (Not Found) http://www.mcfaddengavender.net/newmg/contact/careers/www.mcfaddengavender.net/newmg/wp-content/themes/custom/js/css/uniform.default.css`

你忘了`http://`.

将您的链接更改为：
`<link rel="stylesheet" href="http://www.mcfaddengavender.net/newmg/wp-content/themes/custom/js/css/uniform.default.css" type="text/css" media="screen" charset="utf-8">`

# dns - SDL Tridion 2011 SP1 配置允许从多个域/林添加用户

> ID：13755404
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:05:00.493
> 
> 标签：dns, ldap, tridion

我们在 Domain1 中使用 Windows 身份验证进行默认安装，我们通过在同一 Domain1 中搜索用户从 Content Manager 页面手动添加用户。最近添加了新的 Domain2 作为双向森林传递。需要做什么才能从 Domain2 搜索用户并将其添加到 Content Manager？当我尝试在 CM 中搜索指定 Domain2 的用户时 - 新用户页面出现错误：无法找到名称为“Domain2”的域。这可以通过使用默认设置来完成，还是我们需要将其配置为使用 LDAP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:57:44.010

对于初学者来说，这两个域需要彼此具有完全的信任关系（我无法与森林相提并论，但在这里您可以找到有关[Active Directory 域和信任](http://technet.microsoft.com/en-us/library/cc770299.aspx)的更多详细信息）。这应该允许 IIS 能够针对两个域进行身份验证。

下一步是确保您的 MTSUser 帐户（或运行 SDL Tridion Content Manager COM+ 应用程序的身份）是域帐户并且在两个域上都具有读取权限，因此它可以列出用户。这将使您能够搜索用户并将其添加到 CMS。

# java - 设置和获取方法未按计划工作

> ID：13755406
> 
> 赞同：0
> 
> 时间：2012-12-07T01:05:34.767
> 
> 标签：java, multithreading, get, set

我只是想向另一个对象发送消息，但除非我错过了一个重要因素，否则它不会完全改变。我有一个类来设置数字和另一个获取的类，获取的类取决于设置的正确数字，但是尽管 set 方法在命令行返回 0 一个，但另一个对象在使用 get 方法时返回 1。这是包含这两种方法的关闭类，每个方法都从 A 类和 B 类调用

```
public class Close {
    static int close =1;

    public synchronized void setClose(int x, Client)
    {
        /*
        while(turn !=0){
            try{
                wait();

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }*/
        close = x;
        System.out.println("set "+close);
    }

    public synchronized int getClose(ClientHandeler)
    {
        int x;
        /*
        while(turn==0){
            try{
                wait();
            }catch(Exception e)
            }
        }*/
        System.out.println("get "+close);
        x = close;
        return x;
    }

} 
```

这是我希望从中获取关闭整数的处理程序类

```
import java.io.*;
import java.net.*;
import java.util.*;

public class ClientHandler implements Runnable {

private BufferedReader reader;
private Socket sock;//refering to socket class
//listens for the socket
private Server server; // call-back reference to transmit message to all clients
Client c = new Client();

public ClientHandler(Socket clientSocket, Server serv) {

    try {
            sock = clientSocket;
            server = serv;

            InputStreamReader isReader = new InputStreamReader(sock.getInputStream());
            reader = new BufferedReader(isReader);

     } catch (Exception ex) {
         ex.printStackTrace();
     }
}

public void run() {

    String message;

    try {

         int x = c.c.getClose(this);
         while(x!=0){
         x = c.c.getClose(this);//calls client and within client there is the close 
            System.out.println(x);

            Thread ct= Thread.currentThread();
            ct.sleep(3000);
            while ((message = reader.readLine()) != null) {

                System.out.println("read " + message);

                server.tellEveryone(message);
            }
        }       
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:12:26.720

可能他们都没有使用相同的 Close 对象。

```
Close close = new Close(); 
```

然后确保两者都使用相同的关闭对象！

如果这是不可能的，可以将字段关闭设为静态：

```
 public class Close {
static int close; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:09:07.093

您可以只使用 AtomicInteger。

```
public class Close {
AtomicInteger close = new AtomicInteger(1);

public void setClose(int x)
{
    /*
    while(turn !=0){
    try{
        wait();

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }*/

    close.set(x);
    System.out.println("set "+close.get());   
}
public int getClose()
{
    int x;
    /*
    while(turn==0){
        try{
            wait();
        }catch(Exception e)
    }*/
    System.out.println("get "+close.get());
    x = close.get();
    return x;

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:10:45.277

尝试...

```
static int close = 1; 
```

这样，对于 Close 类的所有实例，只有一个 int close 副本。在您使用此类的地方添加代码会有所帮助，我猜您正在为每个操作实例化新副本，这会导致您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T01:15:53.000

我真的不明白你的问题。您能否简要介绍一下您是如何使用这个类的？

但是，您很可能没有从所谓的 A 类和 B 类访问同一个实例。

这就像 A 在一张纸上写东西，而 B 正在阅读另一张纸。当然，A写的东西B不可读。

# java - 使用 scribe 进行 twitter 身份验证时出现异常

> ID：13755410
> 
> 赞同：1
> 
> 时间：2012-12-07T01:06:35.093
> 
> 标签：java, scribe

我在尝试使用 service.getAccessToken 调用检索访问令牌时收到以下异常（它将请求令牌和验证器作为参数）。

```
accessToken = service.getAccessToken(requestToken, verifier); 
```

**例外：响应正文不正确。无法从空字符串** 中提取标记 异常来自 scribe 中的标记提取器。请求令牌似乎是有效的，并且验证者也不为空。欢迎任何有关进一步解决/解决问题的建议。我正在使用 JDK 1.6。谢谢

# asp.net - ASP.Net 将规则从一个域重写到相似域

> ID：13755414
> 
> 赞同：0
> 
> 时间：2012-12-07T01:07:01.443
> 
> 标签：asp.net

我正在尝试编写一个重写规则，它将采用 www.mydomain1.co.uk/* 并重写为 www.mydomain2.co.uk/*

我有以下规则不起作用，因为我怀疑它进入了无限循环。

任何人都可以帮忙吗

```
 <rule name="Canonical Host Name" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" negate="true" pattern="^mydomain1\.co\.uk/$" />
      </conditions>
      <action type="Redirect" url="http://www.mydomain10.co.uk/{R:1}" redirectType="Permanent" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:17:49.223

尝试一次以下代码

```
 <rule name="Canonical Host Name">
            <match url="(.*)" ignoreCase="true" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^mydomain1\.co\.uk" />
            </conditions>
            <action type="Redirect" url="http://www.mydomain10.co.uk/{R:1}" redirectType="Permanent" />
        </rule> 
```

# payment-gateway - Mijireh / Klarna Checkout - 他们安全吗？

> ID：13755416
> 
> 赞同：0
> 
> 时间：2012-12-07T01:07:13.380
> 
> 标签：payment-gateway

一位朋友让我看一下[Mijireh](http://mijireh.com)和[Klarna](http://klarna.com)两个结账点，看看它们是否**安全**。

首先，有人对这些结帐有任何经验吗？你能提供一些关于它们是否**安全**的信息吗？

第二，什么是**安全**结账系统？我的意思是，显然这些网站将存储有价值的信息，例如信用卡和银行信息，并将负责价值 $$$ 的交易......那么，我如何判断这些结帐是否安全？

**另外，使用Paypal 以外**的支付网关有什么好处吗？ 我猜他们对交易收取的费用可能比 Paypal 少...

我尝试在谷歌上搜索有关 Mijireh 的信息，但找不到太多，只有一页又一页的废话。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:54:34.357

关于 Mijireh 的一些说明。

1.  Mijireh 本身并不是支付网关。他们仍然要求您使用现有的支付网关，例如 Stripe、PayPal Pro 等来处理信用卡。Mijireh 提供了一个安全的、符合 PCI 标准的环境来收集信用卡并将其发送到您的支付网关。

2.  Mijireh 实际上从来没有在他们的服务器上存储信用卡信息。它只会将信用卡信息安全地传输到您配置的支付网关（例如 Stripe、PayPal Pro、Authorize.net 等）

希望这有助于澄清一些事情。

乔伊，Mijireh 团队

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:03:38.670

Klarna Checkout 旨在向消费者提供信用，以便他们可以在交货后付款。Klarna 在交易中承担欺诈和信用风险。

如果客户愿意，他可以预付订单，这将通过连接到 Klarna 的 PSP 进行。Klarna Checkout 不会在其自己的系统中存储任何信用卡信息。

Klarna 收集并存储交易详情（购物车内容）和客户详情。所有详细信息都与商家共享。

Klarna Checkout 目前仅在瑞典提供，但其他国家/地区将陆续推出。[https://klarna.com/sv/salj-med-klarna/vara-tjanster/klarna-checkout](https://klarna.com/sv/salj-med-klarna/vara-tjanster/klarna-checkout)包含瑞典语信息。

# php - 在 PHP 中获取 HTML ID

> ID：13755423
> 
> 赞同：2
> 
> 时间：2012-12-07T01:08:56.543
> 
> 标签：php, html

我是 PHP 新手，我想知道是否可以访问 HTML 中的 ID 并进行一些编辑？

在我的 html 文件中，我有这个：

`<div id="Msg" class="message"></div>`

通常我会使用以下内容在javascript中编辑客户端的文本：

```
document.getElementById('Msg').innerHTML = '<font color="red">Some text...</font>'; 
```

可以在服务器端使用 PHP 完成类似的操作吗？我想在渲染页面之前更改元素。如果是这样，我应该使用什么来访问 ID 和编辑元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:11:17.817

您可以使用 PHP DOM 扩展。

请参阅[有关扩展](http://php.net/manual/ru/class.domdocument.php)或直接链接[getElementById的文档](http://php.net/manual/ru/domdocument.getelementbyid.php)

但是，它是后端处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:10:42.763

如果您的意思是在用户浏览器中呈现 HTML 后通过 PHP 更改 HTML，则无法完成。

1.  PHP 是服务器端的，这意味着它运行在不同于用户的机器上。

2.  Javascript 和 HTML 是客户端的，这意味着它们在用户的机器上运行。

3.  服务器不应该控制用户机器上的任何东西。

因此，无法从 PHP 访问 ID。:)

您必须坚持使用仅在客户端运行的 Javascript。

如果您想在发送给客户端*之前*更改 HTML 结构，可以使用 DOM，正如@DmitryBergstein 在他的回答中指出的那样。

如果您需要在页面呈现后访问服务器上的某些内容，则需要发出[ajax 请求](http://www.openjs.com/ajax/tutorial/)，然后在请求返回一些数据后使用 Javascript 更改 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T01:16:51.603

PHP 在将其发送到客户端*之前*生成 HTML 。

您需要找出在 PHP 中生成此 HTML 的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T01:19:34.050

如果您真的想在页面完全加载后使用 PHP 更新 innerHTML 内容，您应该有一个返回更新值的 php 脚本。然后，您调用此脚本并根据响应更新您的页面。它可以通过 ajax 调用很好地完成。

# xsd-validation - 具有 If Else 可能性的 XSD 验证

> ID：13755427
> 
> 赞同：4
> 
> 时间：2012-12-07T01:09:09.310
> 
> 标签：xsd-validation

只是想弄清楚是否可以通过 XSD 模式级别验证来实现以下场景。

* * *

例如-

```
<PreferredPlan>
This tag can have Values - Family or Single 
```

如果我得到“家庭”的值，我应该有以下 xml 元素。

```
<Family>
<tag1></tag1>
<tag2></tag2> 
```

如果捕获了“单一”值，我应该有以下标签。

```
<Single>
<tag3></tag3>
<tag4></tag4>
</Single> 
```

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:28:52.670

定义它的一种简单方法如下所示：

```
<xs:element name="PreferredPlan">
  <xs:complexType>
    <xs:choice>
      <xs:element ref="Family"/>
      <xs:element ref="Single"/>
    </xs:choice>
  </xs:complexType>
</xs:element>

<xs:element name="Family">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="tag1"/>
      <xs:element ref="tag2"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="Single">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="tag3"/>
      <xs:element ref="tag4"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="tag1" type="xs:string"/>  
<xs:element name="tag2" type="xs:string"/>  
<xs:element name="tag3" type="xs:string"/>  
<xs:element name="tag4" type="xs:string"/> 
```

这允许

```
<PreferredPlan>
  <Family>
    <tag1/>
    <tag2/>
  </Family>
</PreferredPlan> 
```

和

```
<PreferredPlan>
  <Single>
    <tag3/>
    <tag4/>
  </Single>
</PreferredPlan> 
```

并禁止

```
<PreferredPlan>
  <Family>
    <tag3/>
    <tag4/>
  </Family>
</PreferredPlan> 
```

# php - PHP - 本地与 UTC 时间与时区偏移的比较

> ID：13755429
> 
> 赞同：0
> 
> 时间：2012-12-07T01:09:34.860
> 
> 标签：php, date, utc

给定一个可变的 unix 时间戳和以秒为单位的固定时区偏移量，您如何判断当地时间是否超过上午 8 点。

例如，采用以下变量：

```
$timestamp = time();
$timezone_offset = -21600;  //i think that's -8hrs for pacific time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:15:54.067

```
if(date("H", $timestamp + $timezone_offset) >= 8){
    // do something
} 
```

假设您认为甚至超过 8:00:00 的一毫秒是“早上 8 点”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:11:34.823

您使用[date_default_timezone_set()](http://php.net/date-default-timezone-set)在 PHP 中设置您的时区，然后使用 PHP 的 datetime 函数（如 date 或[DateTime](http://php.net/datetime)对象）根据设置的时区检查时间。PHP 会为您做正确的事情，并将时间调整到指定的时区。

```
$timestamp = 1354794201;
date_default_timezone_set("UTC"); // set time zone to UTC
if (date("H", $timestamp) >= 8) { // check to see if it's past 8am in UTC
    echo "This time stamp is past 8 AM in " . date_default_timezone_get() . "\n";
}

date_default_timezone_set("America/New_York"); // change time zone
if (date("H", $timestamp) >= 8) { // Check to see if it's past 8am in EST
    echo "This time stamp is past 8 AM in " . date_default_timezone_get() . "\n";
} 
```

此代码的输出

```
/* This time stamp is past 8 AM in UTC */ 
```

你也可以用 DateTime 做同样的事情......

```
$timestamp = 1354794201;
$date = new DateTime("@{$timestamp}"); // create the DateTime object using a Unix timestamp
$date->setTimeZone(new DateTimeZone("UTC")); // set time zone to UTC
if ($date->format("H") >= 8) { // check to see if it's past 8am in UTC
    echo "This time stamp is past 8 AM in {$date->getTimezone()->getName()}\n";
}

$date->setTimeZone(new DateTimeZone("America/New_York")); // change time zone
if ($date->format("H") >= 8) { // Check to see if it's past 8am in EST
    echo "This time stamp is past 8 AM in {$date->getTimezone()->getName()}\n";
} 
```

上述代码的输出也是......

```
/* This time stamp is past 8 AM in UTC */ 
```

Unix 时间与时区无关。这就是使用 Unix 时间作为传输层的意义所在。在将时间戳从 Unix 时间转换为格式化日期之前，您永远不必担心时区。

# objective-c - 当 NSDictionary 包含列表时获取值

> ID：13755430
> 
> 赞同：0
> 
> 时间：2012-12-07T01:09:40.343
> 
> 标签：objective-c, ios, nsdictionary, enumerate, unrecognized-selector

我正在传递一本字典：

```
aDictionary 
```

当我将其注销时，字典具有以下格式：

```
{
 value1 = "subValue1 {label=value1, info1=, info2=}";
 value2 = "subValue2 {label=value2, info1=, info2=}";
 value3 = "subValue3 {label=value2, info1=, info2=}";
 } 
```

我需要遍历字典，然后确定 value3 -> subValue3 -> info2 是否有值。

我可以进行初始迭代，并且可以制作该行的子字典：

```
"subValue3 {label=value2, info1=, info2=}" 
```

但是当我尝试使用它时，比如获取键的计数，我得到 -[subValue3 allKeys]: unrecognized selector sent to instance。

```
NSArray *keys;
int i, count;
id key, value;

keys = [aDictionary allKeys];
count = [keys count];
for (i = 0; i < count; i++)
{
    key = [keys objectAtIndex:i];
    value = [aDictionary objectForKey:key];
    NSLog (@"Key: %@ for value: %@", key, value);

    NSDictionary *subDictionary = [aDictionary objectForKey:key];
    if ([key isEqualToString:@"info2"]) {
        DLog(@"subDictioanry = %@", subDictionary);
        // Everything is fine up to here
        NSArray *keys2;
        int i2, count2;
        id key2, value2;

        keys2 = [subDictionary allKeys];
        count = [keys2 count];
        //
        // Right here I get "-[subValue3 allKeys]: unrecognized selector sent to instance"
        //
        for (i2 = 0; i2 < count2; i2++) {
            key2 = [keys2 objectAtIndex:i2];
            value = [subDictionary objectForKey:key];
            DLog (@"Key: %@ for value: %@", key2, value2);

            NSDictionary *subDictionary2 = [subDictionary objectForKey:key2];
            DLog(@"subDictionary2 = %@", subDictionary2);
        }
    } 
```

问题：我不确定第二组值的格式是什么（“subValue3 {label=value2, info1=, info2=}”）。它是集合、数组还是字典？如何将该组放入字典中（不会在键（？）“subValue3”上失败），以便我可以检查键 info2 是否有任何值？

免责声明：我知道有更有效的方法来遍历字典，我只是想尽可能清楚。我确定我缺少一些基本的东西，但我没有在 Apple 文档中看到关于迭代或 NSDictionary 的答案，也没有找到关于第二组格式的任何信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:07:40.777

现在`"subValue1 {label=value1, info1=, info2=}";`是一个`NSString`。所以`allKeys`会`NSString`崩溃。

事实上，这`"subValue1 {label=value1, info1=, info2=}";`看起来像一个有效的 json。我不认为这是一个有效的 JSON。甚至[jsonlint.com](http://jsonlint.com)也这么认为。

这是一个有效的 json

```
{
    "subValue1": {
        "label": "value1",
        "info1": "",
        "info2": ""
    }
} 
```

像这样构造json之后，然后使用`NSJSONSerialization`转换-

```
NSError *e = nil;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: &e];

if (!jsonDict) 
{
  NSLog(@"Error parsing JSON: %@", e);
} else 
{
   for(NSDictionary *item in jsonDict) 
      NSLog(@"Item: %@", item);
} 
```

# .htaccess - 如何仅使用 .htaccess 将所有 url 重定向到 1 个 url

> ID：13755433
> 
> 赞同：0
> 
> 时间：2012-12-07T01:09:46.473
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, url-routing

任何人都可以帮助我仅使用 .htaccess 将所有 url 重定向到 1 个 url

例如，以下所有 URL...

```
"http//josephm.webatu.com/index.php"
"http//josephm.webatu.com/login.php"
"http//josephm.webatu.com/games.php" 
```

应该只显示网址`http://josephm.webatu.com`

为了清楚起见，以下所有网址...

```
"http//josephm.webatu.com/index.php"
"http//josephm.webatu.com/login.php"
"http//josephm.webatu.com/games.php" 
```

只会隐藏

```
"index.php"
"login.php"
"games.php" 
```

从浏览器 url 地址栏没有转到[http://josephm.webatu.com](http://josephm.webatu.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:23:34.833

使用 mod_alias：

```
RedirectMatch ^/(index|login|games)\.php$ / 
```

如果您想要永久重定向，请添加`301`, 。`RedirectMatch 301`

使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?(index|login|games)\.php$ / [L,R] 
```

添加一个`=301`标志`R`：`R=301`如果你想要一个永久重定向。

# actionscript-3 - 什么时候是使用循环的好时机？

> ID：13755440
> 
> 赞同：0
> 
> 时间：2012-12-07T01:10:09.673
> 
> 标签：actionscript-3, loops

我已经尝试学习 actionscript 3 一段时间了，有些东西让我很受用。比如***我什么时候应该使用循环（for、while 等）？***我观看视频并阅读有关该主题的文章，我总是遇到这个例子，女巫真的对我没有太大帮助：

```
for(var i:Number = 0; i < 10; i++)
{
 trace(i);
} 
```

如果有人可以在这个问题上帮助我，也许让我稍微挑选一下大脑，我将非常感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:13:22.267

每当您需要执行重复性任务时，您都可以使用循环。

因此，如果您需要对 1000 个对象执行相同的操作，那么使用循环而不是编写相同代码的 1000 次变体会更实用。

一个 Flash 示例：假设您有 10 个电影剪辑，您希望在给定动作上全部播放。

你可以这样做：

```
mc1.play();
mc2.play();
mc3.play();
mc4.play();
mc5.play();
mc6.play();
mc7.play();
mc8.play();
mc9.play();
mc10.play(); 
```

对于 10 人来说，这只是烦人，但不是什么大不了的事。如果你有 100 个、1000 个或 10000 个，那将是疯狂的。另外，如果您以后需要更改代码怎么办？

更好的方法是使用循环。假设这 10 个剪辑（或任意数量的剪辑）都是名为`clips`.

```
for(var i:int=0; i<clips.numChildren;i++){
    var mc:MovieClip = clips.getChildAt(i);
    mc.play();
} 
```

该代码将执行完全相同的操作。您正在遍历剪辑父级的所有子级，并告诉每个人都玩。需要将其更改为 gotoAndPlay(3)？那么你只需要更新一行。

这是一个非常简单的示例（并且只是您使用循环的众多原因之一），当您开始处理更复杂的数据和对象时，您可能会猜到循环如何帮助您编写重复性任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:16:24.910

通常，当我需要索引时，我会使用 for 循环。

例如，我可能想要一个索引数组来表示给定数组中的哪些 MovieClip 是可见的：

```
var visibleClips:Array = new Array;
for (var index:int = 0;index < arrayOfClips.length;index++)
{
    var clip:MovieClip = arrayOfClips[index];
    if (clip.visible)
    {
        visibleClips.push(index);
    }
} 
```

我通常使用一个 while 循环来从 DisplayObject 中删除所有子项，如下所示：

```
while (container.numChildren > 0)
{
    container.removeChildAt(0);
} 
```

如您所见，在那种情况下我真的不需要索引，所以使用 while 循环更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:04:49.370

正如我的老编程老师所说：

“当你知道你想要/需要做多少次迭代时使用 for 循环”

即循环遍历列表、数组、向量等。

“当你不确定时使用 while 循环。”

即遍历整个文件（用于读取二进制数据）或执行在特定条件下停止的连续事件。

话虽如此，在大多数情况下，您可能可以同时应用 for 和 while 循环。我个人主要使用 for 循环。

就像原型所说的那样，当删除容器的所有子级时，while 循环很棒，但这也可以使用 for 循环来实现，例如：

```
for(var i:int = 0; i < numChildren; i++)
{
     removeChildAt(i); i--;
} 
```

# .net - 从列表中删除日文字符的变体

> ID：13755445
> 
> 赞同：1
> 
> 时间：2012-12-07T01:10:46.497
> 
> 标签：.net, sorting, unicode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:38:29.000

To do it without a lookup table, you could take advantage of Unicode normalisation.

If you normalise a letter that has a diacritical mark (including Japanese voiced marks) to Normal Form D, you'll get a decomposed base letter and combining diacritical. Just take the first of those characters and you've got what you want.

```
name.Normalize(NormalizationForm.FormD).Substring(0, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:19:05.830

```
Dim x As New List(Of Char) ''containing the chars to be removed
For Each y In x
    queryresult.Replace(y, "")
Next 
```

If you know which is which:

```
Dim phonetics As New List(Of Char)
Dim actuals As New List(Of Char)
For i = 0 To phonetics.Count - 1
     queryresult.Replace(phonetics(i), actuals(i))
Next 
```

Another way is:

```
Dim actual As String = queryresult.Split(" ")(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:09:02.773

OK, I figured out a way. Katakanas can be converted to single byte charatacters, which results in a single byte kana and optionally a second single byte for the modifier ("dakuten" in Japanese).

So, modified kanas can be elimited from the list by doing a check like this (in `VB`)

```
if StrConv(StrConv(kana, VbStrConv.Katakana), VbStrConv.Narrow).Length > 1 then
    ...
end if 
```

Any string that has a length greater than one is a modifed sound.

It gets trickier in `C#` for the conversion, but the principle would be the same. This does not work with hiraganas, because they cannot be half-width, so t is important to first do the katakana conversion.

# ruby - 如何模拟 Net::HTTP::Post？

> ID：13755452
> 
> 赞同：7
> 
> 时间：2012-12-07T01:11:40.330
> 
> 标签：ruby, http, rspec, tdd, bdd

是的，我知道最好使用 webmock，但我想知道如何在 RSpec 中模拟此方法：

```
def method_to_test
  url = URI.parse uri
  req = Net::HTTP::Post.new url.path
  res = Net::HTTP.start(url.host, url.port) do |http|
    http.request req, foo: 1
  end
  res
end 
```

这是RSpec：

```
let( :uri ) { 'http://example.com' }

specify 'HTTP call' do
  http = mock :http
  Net::HTTP.stub!(:start).and_yield http
  http.should_receive(:request).with(Net::HTTP::Post.new(uri), foo: 1)
    .and_return 202
  method_to_test.should == 202
end 
```

测试失败，因为`with`似乎试图匹配 NET::HTTP::Post 对象：

```
RSpec::Mocks::MockExpectationError: (Mock :http).request(#<Net::HTTP::Post POST>, {:foo=>"1"})
expected: 1 time
received: 0 times

Mock :http received :request with unexpected arguments
     expected: (#<Net::HTTP::Post POST>, {:foo=>"1"})
          got: (#<Net::HTTP::Post POST>, {:foo=>"1"}) 
```

如何正确搭配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T01:18:55.447

如果您不关心确切的实例，则可以使用以下`an_instance_of`方法：

```
http.should_receive(:request).with(an_instance_of(Net::HTTP::Post), foo: 1)
.and_return 202 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-24T07:19:08.327

这是新语法：

```
before do
  http = double
  allow(Net::HTTP).to receive(:start).and_yield http
  allow(http).to \
    receive(:request).with(an_instance_of(Net::HTTP::Get))
      .and_return(Net::HTTPResponse)
end 
```

然后在示例中：

```
it "http" do
  allow(Net::HTTPResponse).to receive(:body)
    .and_return('the actual body of response')
  # here execute request
end 
```

如果您需要测试外部 api 库，这非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-12T08:43:55.650

以下片段对我来说很好。它模拟 DELETE 请求。

```
mock_net_http = double("Net:HTTP")
mock_net_http_delete = double("Net::HTTP::Delete")
allow(Net::HTTP).to receive(:new).and_return(mock_net_http)
allow(Net::HTTP::Delete).to receive(:new).and_return(mock_net_http_delete)

expect(mock_net_http_delete).to receive(:set_form_data).with(hash_including(some_param: "some-value"))
expect(mock_net_http).to receive(:request).with(mock_net_http_delete) 
```

# ajax - f:ajax 不能在 tomcat7/eclipse 上工作

> ID：13755454
> 
> 赞同：1
> 
> 时间：2012-12-07T01:11:51.653
> 
> 标签：ajax, jsf, tomcat, jsf-2, mojarra

我有这个非常简单的代码，在我添加`f:ajax`标签之前它可以正常工作。

有效的代码：

```
<h:commandButton disabled="#{!feature.available}" class="featureButton"
        value="#{feature.selected ? 'selected': feature.available? 'available':'unavailable'} "
        style="vertical-align: top;" action="#{Bean.toggleFeature(feature)}">
    </h:commandButton> 
```

不起作用的代码：

```
<h:commandButton disabled="#{!feature.available}" class="featureButton"
        value="#{feature.selected ? 'selected': feature.available? 'available':'unavailable'} "
        style="vertical-align: top;" action="#{Bean.toggleFeature(feature)}">
        <f:ajax event="click"  />
</h:commandButton> 
```

据我所知，jsf.js 文件加载正常，这是由 facelet servlet 自动添加到我渲染文档的头部的，我 `<script type="text/javascript" src="/www/javax.faces.resource/jsf.js.xhtml?ln=javax.faces"></script>`什至可以`jsf.ajax.request`直接从 javascript 执行并让页面重新渲染某些内容。

我正在使用 mojarra 2.1.13、tomcat 7、eclipse juno、java 7。

关于我可能做错了什么或如何解决此问题的任何想法？在javascript中调试它根本没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:00:44.640

我没有在上面提到我嵌套了 ui:repeats ，结果发现 mojarra 存在一个错误。据我所知，修复程序刚刚提交，但它还没有作为一个罐子出来，但是我尝试了 myfaces，它运行良好，所以我现在就这样做。以下是错误详细信息：

[http://java.net/jira/browse/JAVASERVERFACES-1817](http://java.net/jira/browse/JAVASERVERFACES-1817)

# prolog - Prolog 使用静态还是动态范围？

> ID：13755456
> 
> 赞同：4
> 
> 时间：2012-12-07T01:12:22.250
> 
> 标签：prolog

当我在创建我的 Prolog 列表后运行查询时，Prolog 如何使用范围来解决它？我知道 cut 运算符`!`会影响结果。它是通过影响范围来做到这一点的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:42:29.540

首先要做的事情：prolog 是否使用动态范围？不，它没有，它没有的原因是因为 prolog 需要跟踪定义的变量，以便任何新的分配都将引用初始变量——而不是分配给该变量名的最后一个值。

另一方面，Bash 使用动态范围，因此，`i`在`for`循环中使用变量，并`i`在另一个函数中使用变量，这恰好在循环执行期间被调用 - 或不 - 将影响彼此的`i`值.

这可能不是很简单，所以举个例子：

```
#!/bin/bash
function my_first_I() {
    I=10;
}
function my_second_I() {
    I=100;
}

I=1; echo $I;
my_first_I; echo $I;
my_second_I; echo $I; 
```

输出：

```
$ ./script.sh
1
10
100 
```

这里的诀窍是一个变量与一个被认为不同的变量搞砸了。

现在，您可能知道，您无法在 prolog 中执行此操作：

```
#!/usr/bin/swipl
my_first_I(I) :- I is 10.
my_second_I(I) :- I is 100.

test(I) :-
    I is 1,
    write(I), nl,
    my_first_I(_),
    write(I), nl,
    my_second_I(_),
    write(I), nl. 
```

输出：

```
?- test(I).
1
1
1
I = 1. 
```

这个例子只是简单地指出，在 prolog 中，变量是在自己的本地范围内定义的，不会*泄漏*到另一个函数的定义中。

现在，第二部分：如何`!`工作？Prolog生成的逻辑编程解是在应用[统一算法](http://en.wikipedia.org/wiki/Unification_%28computer_science%29)后得出的。在此过程中，以 DFS 方式构建树状结构，根据变量可能假设的值对语句进行评估。在每个叶级扩展之后，Prolog 会回溯到下一个可用扩展。

如果`!`找到 an ，则停止广度扩展，*切断*局部解的其他可能值，并仅在树中执行更深的扩展。[这](http://en.wikibooks.org/wiki/Prolog/Cuts_and_Negation)是`!`运算符的一个非常简单的用法。

# php - 查询多个表 MySQL

> ID：13755458
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:12:26.317
> 
> 标签：php, mysql, sql, join

我使用 MySQL 并尝试为我的学校项目编写 PHP 脚本。

有一个名为课程的表包含以下列：

```
-id
-lessonid.
-studentid 
```

我还有两个不同的表用于注释和公告公告和注释表包含这些列：

```
-id
-lessonid
-content
-createdtime 
```

我需要按创建时间从最新到最旧订购公告和笔记，但还需要显示学生上的所有课程。

例如：一个学生上数学和物理课。我需要向他/她展示物理和数学的笔记和公告，所有项目都应按日期排序。（就像一个时间线。）当然我不会给他/她看化学课的笔记和公告。如果我可以说它是清单上的注释或公告，那将是很好的。

您能帮我为此编写 SQL 和 PHP 代码吗？谢谢。

编辑：这是我坚持的地方：我合并了两张表并按日期排序。但不能将它们与学生所学的课程结合起来。

```
SELECT title, created, lessonid FROM (SELECT title, created, lessonid FROM notes UNION SELECT title, created, lessonid FROM announcements) as a ORDER BY created DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:32:57.353

首先，感谢您让我们知道这是一个学校项目 - 因此我不会给您答案。如果它在项目中，那么你的老师应该已经给了你提出解决方案的概念。

您的问题很好地组合在一起，我可以看到如何解决它，但是……这是您的项目，因此您需要对其进行破解并发布您的想法。

我会给你一些提示，让你开始。

您需要一个查询来组合公告和注释表。然后，您需要按课程对数据进行分组并将其加入学生。这都是基本的 SQL。

祝你好运。发表你的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:57:36.363

我也会听从其他海报的建议，而不是为你做跑腿工作。但不会让你空手而归，所以会给你概念。有一个东西叫第三范式，我们根据这个概念决定有多少表，所以如果它是一个大数据库，那么名字分开表，姓分开表，因为很多人之间共享这些，所以节省空间和冗余等等，所以一个人的表以personid为主，并有lastname外键来引用姓氏表，我们通常将其命名为lastNameRef，类似于firstNameRef。所以现在，每个人都有很多班级，每个班级都有很多人（学生）。所以这是一个多对多关系 - 我们创建一个 allreference 表来解决这个多对多问题。所以有一个类的表，其中类 id 作为主键，

# ruby-on-rails-3.2 - 在 Rails 中，form_for 指向什么？

> ID：13755466
> 
> 赞同：0
> 
> 时间：2012-12-07T01:13:55.513
> 
> 标签：ruby-on-rails-3.2

所以我有这段代码：

```
<%= form_for(:player, :url => {:action => 'pedal_to_player', :id => @pedal.id}) do |x| %> 
```

所以我的问题是：我是怎么得到的`:player`？什么是链接？控制器？一个模型？

PS在我的控制器中我有：

```
def add_player
  @pedal = Pedal.find(params[:id])
  @player = BassGuy.new  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T13:54:40.453

此表单会将其数据发送至：

```
params[:player] 
```

它是一个嵌套散列，将包含用户在表单中键入的所有数据

# android - 如何在我的应用程序中显示来自 UrbanDictionary 的 JSON 结果？

> ID：13755467
> 
> 赞同：1
> 
> 时间：2012-12-07T01:13:54.227
> 
> 标签：android, json, api, jsonexception

我正在开发一个应用程序，该应用程序只需访问 UrbanDictionary 并以 JSON 格式返回单词搜索的结果……然后将其显示在 Android 项目中。

这是我的全部代码：

```
package org.twodee.mitchemc.webapi;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends ListActivity {
    private ArrayList<String> definitionsList;
    private ArrayAdapter<String> adapter;
    private EditText wordText;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        wordText = (EditText) findViewById(R.id.wordText);
        Button defineButton = (Button) findViewById(R.id.defineButton);

        definitionsList = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, definitionsList);
        setListAdapter(adapter);

        defineButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                String word = wordText.getText().toString();
                new DownloadTask().execute(word);
            }
        });
    }

    private ArrayList<String> getDefs(String word) {
        ArrayList<String> definitions = new ArrayList<String>();
        try {
            URL url = new URL("http://api.urbandictionary.com/v0/define?term="
                    + word);

            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            InputStream in = connection.getInputStream();

            String json = Utilities.slurp(in);
            Log.d("FOO", json);

            JSONArray array = new JSONArray(json);

            for (int i = 0; i < array.length(); ++i) {
                JSONObject object = array.getJSONObject(i);
                definitions.add(object.getString("definition"));
            }

            in.close();
        } catch (MalformedURLException e) {
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return definitions;
    }

    class DownloadTask extends AsyncTask<String, Void, ArrayList<String>> {

        @Override
        protected ArrayList<String> doInBackground(String... params) {
            String word = params[0];
            return getDefs(word);
        }

        @Override
        protected void onPostExecute(ArrayList<String> defs) {
            super.onPostExecute(defs);

            definitionsList.clear();
            definitionsList.addAll(defs);
            adapter.notifyDataSetChanged();
        }

    }

} 
```

不要注意幕后的 Utilities.slurp。

所以，如果我运行它，它不会崩溃，它确实会给我结果，但它会将它们扔到 LogCat 中......而不是我的应用程序。我之前发现了以下异常：

```
of type org.json.jsonarray cannot be converted to jsonobject 
```

我查看了这个论坛，发现我在一个数组（或类似的东西）中有对象，但我不知道如何在代码中反映这一点。

我希望你在应用程序中输入，比如说，“嘿”，点击“定义”，然后在它下面有一个定义列表。只有定义......所以它的JSON部分应该是“定义”

这是我在 LogCat 中得到的一些 JSON 输出。我希望这是可读的：

```
12-06 19:00:57.647: W/System.err(1400): org.json.JSONException: Value {"total":32,"result_type":"exact","list":[{"thumbs_down":428,"author":"D.B. Echo","definition":"A contraction for \"Hello, I find you attractive and would like to dance with you, share some drinks with you, and then perhaps have sex with you.  Nothing serious, of course, and I doubt that this will result in a long term relationship, but I would appeciate you considering my proposal.\"","permalink":"http:\/\/hey.urbanup.com\/1099714","thumbs_up":1530,"word":"hey","current_vote":"","example":"Guy at bar to attractive girl: \"Hey.\"\r\n\r\nAttractive girl to guy: \"Go to hell, creep.\" (Moves to other side of bar.)","defid":1099714},{"thumbs_down":250,"author":"Erica","definition":"hey is a way to say \"hi\" or \"what's up\"\r\nthe type of 'hey' horses eat is hAy you morons!!!","permalink":"http:\/\/hey.urbanup.com\/574637","thumbs_up":541,"word":"Hey","current_vote":"","example":"hey what's up!?!\r\nhorses eat hay!","defid":574637},{"thumbs_down":144,"author":"SoMe RaNdOm PeRsOn","definition":"I word to use to get someone's attention. Even if you don't know the persons name by simply saying \"hey\" you can easily get their attention","permalink":"http:\/\/hey.urbanup.com\/1106278","thumbs_up":294,"word":"hey","current_vote":"","example":"guy 1:Hey Alex what's that guys name over there?\r\nAlex: How the hell should I know?\r\nGuy 1: Hey!!\r\nMystery guy: ::looks around confused::\r\nGuy 1: O hi.","defid":1106278},{"thumbs_down":120,"author":"Jamesrob92","definition":"1\. The most informal form of greeting. Usually used in a friendly manner or to sound cool and relaxed.\r\n2\. An exclamation used to get someone's attention","permalink":"http:\/\/hey.urbanup.com\/2153666","thumbs_up":249,"word":"hey","current_vote":"","example":"1\. Hey, what's up?\r\n2\. HEY! Wait for me!\r\n3\. HEY YOU! Get away from my wife!","defid":2153666},{"thumbs_down":133,"author":"marshmallow","definition":"a slang term used by many people in place of hello","permalink":"http:\/\/hey.urbanup.com\/1129122","thumbs_up":219,"word":"hey","current_vote":"","example":"Hey Ma...whats crackin?","defid":1129122},{"thumbs_down":79,"author":"hey malasadas","definition":"an expression used to get someone's attention","permalink":"http:\/\/hey.urbanup.com\/198491","thumbs_up":128,"word":"hey","current_vote":"","example":"hey man, what the hell are you doing?!","defid":198491},{"thumbs_down":54,"author":"HappyGirl1993","definition":"Considered to be a lot more flirtatious than 'hello' or 'hi.'","permalink":"http:\/\/hey.urbanup.com\/5302185","thumbs_up":68,"word":"Hey","current_vote":"","example":"Example...\n\nGuy: Hey.\r\nGirl: Hi.\r\nGuy: *Whoa, total FAIL!*","defid":5302185},{"thumbs_down":37,"author":"Eric Klein...","definition":"1\. Interjection, an informal greeting. \r\n\r\n2\. Verb, to 'hey' someone.  The act of driving down public roads in a lane near a sidewalk, coming upon an unsuspecting pedestrian, and hollering \"HEY!\" as loudly as possible in their general direction.  Most effective if done with all windows rolled down, and all members of the vehicle participating. (Originating in Sioux Falls, SD)","permalink":"http:\/\/hey.urbanup.com\/2705914","thumbs_up":42,"word":"Hey","current_vote":"","example":"1\. \"Hey buddy, how's the syphilis?\"\r\n\r\n2\. \"Jimmy and I heyed a kid so bad the other day, he fell off his bike!\"","defid":2705914},{"thumbs_down":80,"author":"J-Lib","definition":"a slang interjection or prompt often used in place of \"eh\" or \"right\" in order to make a sentence into a question; used in parts of Canada","permalink":"http:\/\/hey.urbanup.com\/1262450","thumbs_up":67,"word":"hey","current_vote":"","example":"It's supposed to snow tomorrow, hey?\r\nThat guy was pretty attractive, hey?","defid":1262450},{"thumbs_down":7,"author":"Bam Bam Branson","definition":"Why would you even search this?","permalink":"http:\/\/hey.urbanup.com\/5850424","thumbs_up":8,"word":"Hey","current_vote":"","example":"Hey is Idk","defid":5850424}],"pages":4,"sounds":["http:\/\/media.urbandictiona 
```

任何帮助将不胜感激！提前致谢！

更新：这是有效的代码：

```
 String json = Utilities.slurp(in);
            JSONObject jsonObject = new JSONObject(json);
            JSONArray array = jsonObject.getJSONArray("list");

            for (int i = 0; i < array.length(); ++i) {
                JSONObject object = array.getJSONObject(i);
                definitions.add(object.getString("definition"));
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:18:21.177

根据您从该请求返回的 json，您的 JSONObject 设置错误。以下是返回的 json 示例：

```
{
    "has_related_words": true,
    "result_type": "exact",
    "list": [
        {
            "defid": 2957653,
            "word": "test",
            "author": "sm1g",
            "permalink": "http://test.urbanup.com/2957653",
            "definition": "To check if something coresponds the promised result or what effect does it have at all.",
            "example": "By typing in the word \"test\" you prolly tried to search if there was a definition for this word.",
            "thumbs_up": 123,
            "thumbs_down": 46,
            "current_vote": ""
        }
],
    "sounds": [
        "http://media.urbandictionary.com/sound/test-8076.mp3"
    ],
    "total": 20,
    "pages": 2
} 
```

在您的代码中，要获取类似 的数组`list`，您需要执行以下操作：

```
String json = Utilities.slurp(in);
JSONObject jsonObject = new JSONObject(json);

//now get the list array
JSONArray list = new JSONArray(jsonObject.getArray("list")); 
```

方法名称可能不准确。

# iphone - 两个 UIWebViews，如何设置第二个 webview，以便在单击链接时将它们发送到第一个 webview 加载？

> ID：13755470
> 
> 赞同：0
> 
> 时间：2012-12-07T01:14:06.630
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

这个问题可能看起来有点奇怪/奇怪，但我有两个 UIWebView，其中一个设置为隐藏在 .xib 文件中，它的委托设置为我的视图控制器。第二个 UIWebView 用于从隐藏的 UIWebView 中解析和“清理”html，并将其作为“移动”页面显示给用户。我的 .xib 文件中的非隐藏 UIWebView 没有委托。

我遇到的问题是，当第二个 UIWebView 完成加载时，用户点击第二个 UIWebView 中的链接，并完成加载未解析的网页，因为它没有将此链接单击返回到隐藏的 UIWebView加载，以便第二个 UIWebView 在完成加载时可以解析它。我的两个 UIWebView 是我的 .m 文件中的属性。

有什么办法可以解决这个问题吗？我很感激提供的任何回复！如果我没有清楚地表达我的问题，请告诉我！

一些代码：

。H：

```
#import <UIKit/UIKit.h>

@interface Web : UIViewController <UIWebViewDelegate>

@property (nonatomic, strong) NSURL *url;

@end 
```

米：

```
#import "Web.h"

@interface  Web()

@property (nonatomic, strong) IBOutlet UIWebView *webView2;
@property (nonatomic, strong) IBOutlet UIWebView *webView;
@property (nonatomic, strong) NSMutableString *output;
@property (nonatomic, strong) NSString *wrapper;

@end

@implementation Web

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{   
    if(webView == self.webView2)
    {
        [self.webView loadRequest:(NSURLRequest*)request];
    }
    else
    {
        [self.webView loadRequest:(NSURLRequest*)request];
    }
    return NO;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.webView loadRequest:[NSURLRequest requestWithURL:self.url]];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{   
    [self cleanUp];

    [self.webView2 loadHTMLString:self.output baseURL:nil];
}

- (void)cleanUp
{
    NSString *input = [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"ctl_ctl_cphBody_cphCenter_divHtml\").innerHTML;"];

    NSString *breadcrumbString = [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByClassName('breadcrumb')[0].outerHTML;"];

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        self.wrapper = @"<html><meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\"/><meta name=\"viewport\" content=\"initial-scale = 1.37,maximum-scale = 2.0\"/></html>";
    }
    else
    {
       self.wrapper = @"<html><meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\"/><meta name=\"viewport\" content=\"initial-scale = 0.57,maximum-scale = 2.0\"/></html>";
    }

    self.output = [NSMutableString stringWithString:self.wrapper];
    [self.output insertString:input atIndex:147];

    [self.output replaceOccurrencesOfString:breadcrumbString withString:@"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [self.output length])];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:22:20.717

您可以实现委托方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

这使您可以拦截加载请求并取消它们。然后，您可以从请求中获取 URL 并将其交给隐藏的 webview。唯一需要注意的是，IIRC，即使对于您自己加载的请求，也会调用此方法`-loadRequest:`，因此您需要检查`navigationType`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:23:49.780

您应该可以使用`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`. 将请求转发到第一个 webView 并返回`NO`以防止第二个 webView 加载页面。

# random - 从大小为 n 的数组中随机生成一组 m 个整数

> ID：13755472
> 
> 赞同：5
> 
> 时间：2012-12-07T01:14:45.017
> 
> 标签：random, probability

完整的问题是：

> 编写一个方法，从一个大小为 的数组中随机生成一组 m 个整数`n`。每个元素必须具有相同的被选中概率`

这个问题是从“Crack the coding interview”中挑选出来的，解决方案是这样的：

> 我们可以将元素与数组开头的元素交换，然后“记住”数组现在只包含元素`j`和更大的元素。也就是说，当我们选择`subset[0]`be时`array[k]`，我们用`array[k]`数组中的第一个元素替换。当我们选择 时`subset[1]`，我们认为是“死的”，我们选择1 和 array 之间`array[0]`的随机元素。然后我们设置子集[1] 等于，并设置等于数组[1]。元素 0 和 1 现在“已死”。现在从 中选择，依此类推。`y``size()``array[y]``array[y]``Subset[2]``array[2]``array[array size()]`

我的问题是，如果我们缩小从中选择随机数的数组，那么每个数字被选择的概率`1/remaining_num_elements`。它如何对所有元素保持相等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:20:42.823

想象一下，就像您`m`从一袋数字中挑选随机数一样`n`，第一个`j`元素表示`the numbers in your hand`，其余元素表示`the numbers still in the bag`. （正如你的书所建议的那样，你`j`从 0迭代到提取数字。然后，代表你已经从袋子中取出的整数的数量。）`m - 1``j`

如果您`m`在现实生活中从一个袋子中挑选整数，那么每次您选择一个新数字时，您只会从袋子中而不是从您的手中取。因此，`remaining_num_elements`每一步收缩。

当你这样想的时候，应该很容易看出这种方法保证了每个元素都有相同的被选中的概率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:19:11.550

> > > 如果我们缩小从中选择随机数的数组，那么每个数字被选择的概率为 1/remaining_num_elements。

是的，你是对的，但是一个元素**在特定回合中被拾取**`1/remaining_num_elements`的概率。**在这里，我们对元素最终被轮流****拾取**的概率感兴趣。对于所有元素，它保持不变。****`m`**`n`**

 **你需要问的问题是：每个`n`元素是否都有*公平和平等*`m`的机会被轮流捡起？答案是肯定的，因为，

P（最终在一组元素中拾取`m`元素）= P（在第一轮中拾取元素）+
P（在第一轮中未拾取元素）* P（在第二轮中拾取元素）+
P(元素在第 2 回合没有被拾取) * P(元素在第 3 回合被拾取) + ... 等等

`n`如果您计算，它对于最初存在的所有元素保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T04:47:04.867

您在概率中看到的差异是由于它是条件属性的事实（事实上已经选择了某些东西并且在最后一次提取中这个元素没有被选择或提取）。但是，选择任何给定球的概率或公平性总体上不会改变。**

# mercurial - 为什么 Mercurial 的 strip 命令不重写历史？

> ID：13755473
> 
> 赞同：7
> 
> 时间：2012-12-07T01:15:00.867
> 
> 标签：mercurial

Mercurial 帮助文本说，“strip 命令删除指定的变更集及其所有后代”。对我来说，这听起来很像改写历史，如果有人将他的工作基于突然被删除的变更集之一，它一定会引起问题。但帮助文本还说该命令“不是历史重写操作，可用于公共阶段的变更集。” 我确信编写帮助文本的人非常清楚他在做什么，那么我缺少什么来理解这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T08:44:55.007

关键是，如果你剥离一个公共变更集，然后从某个地方再次拉取它，你并没有引起任何问题。您只需取回原始变更集。

如果您（例如）将两个公共变更集折叠在一起，然后从某个地方拉出原始变更集，那么您现在有两个分支。一个包含原始的两个变更集，一个包含折叠的变更集，但两者都具有相同的更改。在那一点上，地狱爆发了，吃孩子的怪物在地球上漫游。

因此，“历史重写”与“历史剥离”不同。

* * *

[davidmc24](https://stackoverflow.com/users/1021250/davidmc24)指出了Matt Mackall（Mercurial 的父亲）的[这篇文章](http://markmail.org/message/ca7gwolevyjeau74)，他在其中说的基本相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:18:32.793

我不能肯定地说，但我猜它是“祖父”。`hg strip`开始作为`mq`其中的一部分，比增加*阶段*至少早三年。

可能更好的措辞是：

> 不是*考虑*历史重写操作，可用于公共阶段的变更集

在添加阶段时，我们会非常小心地破坏任何人的现有工作流程。提交从*草稿*阶段开始，一旦推送就会*公开。*任何阶段感知命令都知道，在推送提交的阶段之后是*公开*的，并且如果它不允许修改（除非推送到非发布存储库......）。

但是，有些人已经在使用`strip`手动和脚本来删除已推送的变更集，如果`strip`在升级后突然说“嘿，你不能剥夺它是公开的！” 那么这些人的向后兼容性承诺就会被打破。

Phases 正在慢慢成长为一个相当惊人的[进化](http://mercurial.selenic.com/wiki/ChangesetEvolution)系统，在几乎所有情况下，这将是比 mq 更好的选择，但我仍然怀疑我们是否会让 Matt 删除 mq 并剥离——他仍然坚持保持与 Python 2.4 兼容代码库，那是 9 岁！

Tl;Dr：尽管`strip`它一直是一个禁用的扩展程序，但有太多人使用它来改变它的行为，随着阶段的到来。

# c# - GUID 的唯一性在哪里

> ID：13755476
> 
> 赞同：0
> 
> 时间：2012-12-07T01:15:17.153
> 
> 标签：c#, guid

很简单的问题。

生成 Microsoft GUID 时，GUID 的哪一部分被认为是唯一的？以这个指南为例：

```
19C73070-400A-11E2-B017-3D05D2B0F3CE 
```

我知道在 GUID 中，它有 60 位指定用于时间戳，48 位用于计算机标识符，14 位唯一性，6 位是固定的。我只是不知道这些是什么顺序。

我可以使用上述 GUID 的哪一部分来获得唯一性？不必是不可复制的，但足以识别它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:28:14.553

唯一性需要所有 128 位，可能除了 6 个固定位。可以为不同的时间戳生成相同的随机部分，并且生成 V1 GUID 的任何人都可能得到与 V4 GUID 相同的版本，除了版本。

使用整个 GUID 或不使用任何东西，如果您需要更短的内容，那么可能还有其他选项带有随机数生成器 + 应用程序标识符。

推荐阅读：[GUID 是全局唯一的，但 GUID 的子字符串不是](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:21:37.627

您不应该依赖 GUID 生成器的实现，因为它可能会改变。正确的做法是使用散列算法生成 GUID 的 8 字节散列并改用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:44:43.340

独特性来自您或任何人使用公平的 guid 生成算法再次获得相同 guid 的机会。guid 算法基本上是一个随机数生成器，选择的数量非常多，任何两个公平生成的 guid 生成都不太可能产生相同的数字。

有 2^128 个唯一的 guid，因为 guid 是 128 位。如果您只有 64 位（8 字节），那么您只有 2^64 个选择。那是一个小得多的数字，如果您随机选择 64 位数字，那么您与另一个随机选择“碰撞”的机会就会大得多。

如果你给出了一些结构，比如 4 字节的日期和时间到分钟（smalldatetime），那么你将有 60 位的随机数来唯一标识那一分钟的任何记录。如果您对每分钟为第 n 个新记录重复 ID 的 (n-1)/2^60 次可能性感到满意，那么您可以使用它。（您仍然会使用所有 64 个位作为您的 ID）否则，请增加您的位！

此外，请注意，GUID 不必*是*真正的**全局**唯一才能有用 - 它的隐含信息也是其唯一性的一部分！如果您的数据库中有用于管理文件上传的记录，并且布拉格的程序员使用相同的 guid 来定义一些 ActiveX 插件 - 绝对没有问题，因为某些代码没有时间使用您的记录 id 来加载 activex ，浏览器也不会在打算加载插件时意外加载您的记录！数字的上下文是数字本身的重要组成部分。

但是，除非您必须在不总是连接的 2 个或更多系统（离线或对等客户端或多个服务器）之间生成新 ID，否则请改用由中央机构管理的串行递增 long。

# php - 如何将 FOSUserBundle 配置为启用 FOSOAuthServerBundle 的服务器的身份验证提供程序

> ID：13755481
> 
> 赞同：14
> 
> 时间：2012-12-07T01:16:08.327
> 
> 标签：php, symfony, oauth-2.0, fosuserbundle

我正在尝试设置`FOSUserBundle`为`FOSOAuthServerBundle`启用的服务器的身份验证提供程序。在`FOSOAuthServerBundle`我尝试实施之前，它一直在正常工作，而且我`FOSUserBundle`也曾`FOSUserBundle`在没有 的情况下工作过`FOSOAuthServerBundle`，但我就是无法让它们一起工作。

我的问题是应该为下面的`oauth_authorize`防火墙中的身份验证提供程序指定什么`security.yml`？

```
# app/config/security.yml
security:
    providers:
    fos_userbundle:
        id: fos_user.user_provider.username

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    firewalls:
        oauth_token:
            pattern:    ^/oauth/v2/token
            security:   false

        oauth_authorize:
            pattern:    ^/oauth/v2/auth

            # WHAT GOES HERE?

        api:
            pattern:    ^/api
            fos_oauth:  true
            stateless:  true

    access_control:
        - { path: ^/api, roles: [ IS_AUTHENTICATED_FULLY ] } 
```

我正在尝试验证用户而不是客户端。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-20T07:50:21.390

您的 config.yml 中应该有以下内容

```
fos_user:
   db_driver: orm
   firewall_name: main
   user_class: Zoef\UserBundle\Entity\Userere 
```

像这样的 oauth 服务器

```
fos_oauth_server:
    db_driver: orm
    client_class:        {PATH TO ENTITY}\Client
    access_token_class:  {PATH TO ENTITY}\AccessToken
    refresh_token_class: {PATH TO ENTITY}\RefreshToken
    auth_code_class:     {PATH TO ENTITY}\AuthCode
        service:
            user_provider: fos_user.user_provider.username 
```

security.yml 应该是这样的：

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512
    providers:
        fos_userbundle:
            id: fos_user.user_provider.username
    firewalls:
        oauth_token:
            pattern:    ^/oauth/v2/token
            security:   false

    access_control:
    - { path: ^/, roles: ROLE_ADMIN } 
```

您可以测试它是否有效，因为当您访问任何 url 时，您应该得到如下响应：

{"error":"access_denied","error_description":"需要 OAuth2 身份验证"}

# computer-vision - Viola Jones AdaBoost 在开始之前就内存不足

> ID：13755484
> 
> 赞同：2
> 
> 时间：2012-12-07T01:16:18.917
> 
> 标签：computer-vision, face-detection, adaboost, viola-jones

我正在实施 Viola Jones 人脸检测算法。我对算法的 AdaBoost 学习部分的第一部分有疑问。

原始论文指出

> 弱分类器选择算法如下进行。对于每个特征，示例根据特征值进行排序。

我目前正在使用相对较小的 2000 个正图像和 1000 个负图像的训练集。该论文描述了拥有多达 10,000 个的数据集。

AdaBoost 的主要目的是减少 24x24 窗口中的特征数量，总计 160,000+。该算法适用于这些特征并选择最好的特征。

该论文描述了对于每个特征，它在每个图像上计算其值，然后根据值对它们进行排序。这意味着我需要为每个特征创建一个容器并存储所有样本的值。

我的问题是我的程序在只评估了 10,000 个功能（其中只有 6%）后内存不足。所有容器的总大小最终将达到 160,000*3000，即数十亿。我应该如何在不耗尽内存的情况下实现这个算法？我增加了堆大小，它让我从 3% 到 6%，我认为增加它不会起作用。

该论文暗示在整个算法中都需要这些排序值，因此我不能在每个特征之后丢弃它们。

到目前为止，这是我的代码

```
public static List<WeakClassifier> train(List<Image> positiveSamples, List<Image> negativeSamples, List<Feature> allFeatures, int T) {
    List<WeakClassifier> solution = new LinkedList<WeakClassifier>();

    // Initialize Weights for each sample, whether positive or negative
    float[] positiveWeights = new float[positiveSamples.size()];
    float[] negativeWeights = new float[negativeSamples.size()];

    float initialPositiveWeight = 0.5f / positiveWeights.length;
    float initialNegativeWeight = 0.5f / negativeWeights.length;

    for (int i = 0; i < positiveWeights.length; ++i) {
        positiveWeights[i] = initialPositiveWeight;
    }
    for (int i = 0; i < negativeWeights.length; ++i) {
        negativeWeights[i] = initialNegativeWeight;
    }

    // Each feature's value for each image
    List<List<FeatureValue>> featureValues = new LinkedList<List<FeatureValue>>();

    // For each feature get the values for each image, and sort them based off the value
    for (Feature feature : allFeatures) {
        List<FeatureValue> thisFeaturesValues = new LinkedList<FeatureValue>();

        int index = 0;
        for (Image positive : positiveSamples) {
            int value = positive.applyFeature(feature);
            thisFeaturesValues.add(new FeatureValue(index, value, true));
            ++index;
        }
        index = 0;
        for (Image negative : negativeSamples) {
            int value = negative.applyFeature(feature);
            thisFeaturesValues.add(new FeatureValue(index, value, false));
            ++index;
        }

        Collections.sort(thisFeaturesValues);

        // Add this feature to the list
        featureValues.add(thisFeaturesValues);
        ++currentFeature;
    }

    ... rest of code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:19:50.557

这应该是选择弱分类器之一的伪代码：

```
normalize the per-example weights  // one float per example

for feature j from 1 to 45,396:
  // Training a weak classifier based on feature j.
  - Extract the feature's response from each training image (1 float per example)
  // This threshold selection and error computation is where sorting the examples
  // by feature response comes in.
  - Choose a threshold to best separate the positive from negative examples
  - Record the threshold and weighted error for this weak classifier

choose the best feature j and threshold (lowest error)

update the per-example weights 
```

您无需在任何地方存储数十亿个特征。只需在每次迭代中即时提取特征响应。您正在使用积分图像，因此提取速度很快。那是主要的内存瓶颈，它并不多，每个图像中的每个像素只有一个整数......基本上与图像所需的存储量相同。

即使您只是计算了所有图像的所有特征响应并将它们全部保存，因此您不必每次迭代都这样做，但仍然只有：

*   45396 * 3000 * 4 bytes =~ 520 MB，或者如果您确信有 160000 个可能的功能，
*   160000 * 3000 * 4 字节 =~ 1.78 GB，或者如果您使用 10000 个训练图像，
*   160000 * 10000 * 4 字节 =~ 5.96 GB

基本上，即使您*确实*存储了所有特征值，也不应该耗尽内存。

# php - 数组中某些元素的频率

> ID：13755489
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:17:25.523
> 
> 标签：php, arrays

如何检查数组中某些元素的出现次数例如我有这样的数组：

```
Array (
    [0] => esco
    [1] => angebot
    [2] => ihren
    [3] => parkett
    [4] => maivholzdielen
    [5] => auswahl 
    [6] => ihnen
        ... etc...); 
```

现在我想知道数组元素的出现次数是多少，即“parkett”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:19:04.360

[array_count_values()](http://php.net/array-count-values)涵盖了您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:25:29.613

以下将为 $Count 分配一个值，该值将是数组中与单词“parkett”匹配的对象数。

```
$Count = array_count_values($YourArray, "parkett"); 
```

# joomla - 多个网络服务器上的 Joomla 部署

> ID：13755493
> 
> 赞同：3
> 
> 时间：2012-12-07T01:17:43.437
> 
> 标签：joomla, amazon-web-services, webserver

您好，我们有一个在 AWS 中运行的 Joomla 应用程序。一个带有多个网络服务器的数据库。我们如何推出通过 CMS 完成的更新？当我们进行自动缩放时，我们如何保证获得最新的代码？

我们有其他站点的 SVN，但 CMS 的更改是在 SVN 之外进行的。我们正在尝试使用 NFS，但这只是增加了另一个不需要的层。

# c# - 在客户端服务器 wcf 应用程序中使用会话

> ID：13755494
> 
> 赞同：0
> 
> 时间：2012-12-07T01:17:43.403
> 
> 标签：c#, wcf, session, client

我有一个带有 wcf 服务的 wpf 应用程序。所有服务调用都是通过代理进行的。这是一个服务器客户端应用程序，这意味着您通常会有一个服务器和多个客户端。我的问题是我需要能够跟踪在应用程序服务器端登录的每个用户。我考虑过使用静态类并用 [ThreadStatic] 装饰所需的属性。静态类的这个属性是在登录认证服务时设置的。问题是，当其他客户端登录时，该属性的值一直设置为 null。我找不到适合我一生的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:11:14.957

您可以将 ServiceBehaviour InstanceContextMode 设置为 Single，但是所有客户端都将在同一个实例上工作......我面临同样的问题，......

# java - 存储目录结构的数据结构？

> ID：13755495
> 
> 赞同：5
> 
> 时间：2012-12-07T01:18:23.193
> 
> 标签：java, web-applications, data-structures, directory

我正在使用 struts 2 框架开发一个简单的 java web 应用程序。该应用程序的目的是使用 JSP 页面在我的计算机下显示特定的目录结构。

我的问题是**使用哪种数据结构来**存储目录结构，以便 JSP 页面可以从操作类访问该目录结构对象。

ps：我想用下面的java代码来遍历目录。

请帮忙

```
import java.io.File;

public class DisplayDirectoryAndFile{

    public static void main (String args[]) {

        displayIt(new File("C:\\Downloads"));
    }

    public static void displayIt(File node){

        System.out.println(node.getAbsoluteFile());

        if(node.isDirectory()){
            String[] subNote = node.list();
            for(String filename : subNote){
                displayIt(new File(node, filename));
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:20:37.397

目录结构很容易用树建模。您可以认为每个节点代表一个目录或文件，边缘从目录延伸到该目录的内容。

您可以通过具有存储实体名称（目录或文件）的节点类来表示树本身，无论它是否是目录，以及从其子目录/文件的名称到这些子目录的节点的映射或文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:13:16.497

如前所述，您可以（并且应该）使用树。

这个 SO 答案为您提供了一个很好的 Tree Java 结构：[https ://stackoverflow.com/a/3522481/1654265](https://stackoverflow.com/a/3522481/1654265)

也阅读评论。

# c - 当我在 RL_ARM 中使用 TCP 的函数时未定义的符号

> ID：13755496
> 
> 赞同：0
> 
> 时间：2012-12-07T01:18:26.713
> 
> 标签：c, embedded, arm

就像标题一样，我的 IDE 是 keil。在我的程序中，我在 lt 中添加了一些函数，如下所示：

```
tcp_get_socket(Type,0,120,func);
tcp_connect(socket, remip, remport, locport);
tcp_close(socket);
tcp_send(sock, buf, len); 
```

编译它们后，链接器告诉我一些错误：

```
Error: L6218E: Undefined symbol tcp_socket (referred from at_tcp.o).
Error: L6218E: Undefined symbol tcp_NumSocks (referred from at_tcp.o).
Error: L6218E: Undefined symbol tcp_InitRetryTout (referred from at_tcp.o).
Error: L6218E: Undefined symbol tcp_2MSSTout (referred from at_tcp.o).
.
.
. 
```

我想知道这里发生了什么。任何人都可以告诉我吗？如果你想要细节，我会告诉你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:44:58.547

原因是我没有在 Net_Config.c 中启用 TCP 功能。所以只需启用它。

# php - Kohana - AJAX - 对没有数据库的模型进行身份验证

> ID：13755497
> 
> 赞同：1
> 
> 时间：2012-12-07T01:18:26.313
> 
> 标签：php, ajax, forms, authentication, kohana

好吧，我在这里疯了。这似乎应该如此简单，也许它只是盯着我的脸而我没有看到它。我有在 Kohana 3.2 中创建登录页面的具体说明，该页面使用 AJAX 处理表单并使用纯文本用户名和密码对模型进行身份验证。这只是一个明显设计为让我难堪的练习，嘿嘿。所以不，安全在这里不是问题。没有数据库，也没有可利用的内容。

我目前的登录表单仅使用身份验证配置文件中的默认“文件”驱动程序使用身份验证。

**应用程序/配置/auth.php**

```
 return array(

    'driver'       => 'file',
    'hash_method'  => 'sha256',
    'hash_key'     => 'testkey',
    'lifetime'     => 30000,
    'session_type' => Session::$default,
    'session_key'  => 'auth_user',

    // Username/password combinations for the Auth File driver
    'users' => array(
                    'admin' => 'be4039381cf04bb778de68e6520a77c7d8b5e6d146f932f0759e681a46bfc120',
                    ),

); 
```

但是，我一直在搜索和搜索如何将其更改为使用 AJAX 提交和授权的示例。我在 is_ajax 和 Controller_Templates 等的海洋中游泳。我已经使用 Kohana 大约 28 小时了。有人会帮我解决这个问题吗？

**应用程序/视图/用户/login.php**

```
<?= Form::open('user/login',array('class'=>'form-signin')); ?>
<h2 class="form-signin-heading">Sign in</h2>
<?php if (isset($message)) : ?>
    <h3 class="message">
        <?= $message; ?>
    </h3>
<?php endif; ?>

<!-- Username Field -->
<?php $uArray = array('type'=>'text','class'=>'input-block-level','placeholder'=>'Username = admin'); ?>
<?= Form::input('username',NULL,$uArray); ?>

<!-- Password Field -->
<?php $pwArray = array('class'=>'input-block-level', 'placeholder'=>'Password = password'); ?>
<?= Form::password('password',NULL,$pwArray); ?>

<!-- Checkbox -->
<?= Form::checkbox('remember','remember'); ?>
<?= Form::label('remember', 'Remember Me',array('class'=>'checkbox','label'=>'Remember')); ?>
<br />

<!-- Submit Buton -->
<?= Form::submit('login', 'Login',array('class'=>'btn btn-large btn-primary')); ?>

<?= Form::close(); ?> 
```

**应用程序/类/控制器/user.php**

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_User extends Controller_Template {

    public function action_index()
    {
        $this->template->content = View::factory('user/index');
        // Load the user information
        $user = Auth::instance()->get_user();
        // if a user is not logged in, redirect to login page
        if ($user)
        {
            $this->template->content = View::factory('user/welcome')
            ->bind('user', $user);
        }
    }

    public function action_login()
    {
        // if a user is already logged in then redirect them to the index.
        if (Auth::instance()->logged_in())
            {
                // User is logged in, continue on
                Request::current()->redirect('user/index');
            }

        $this->template->content = View::factory('user/login')
            ->bind('message', $message);

        if (HTTP_Request::POST == $this->request->method())
        {
            // Attempt to login user
            $remember = array_key_exists('remember', $this->request->post()) ? (bool) $this->request->post('remember') : FALSE;
            $user = Auth::instance()->login($this->request->post('username'), $this->request->post('password'), $remember);

            // If successful, redirect user
            if ($user)
            {
                $this->template->content = View::factory('user/welcome')
                ->bind('user', $user);
            }
            else
            {
                $message = 'Login failed';
            }
        }
    }

    public function action_logout()
    {
        // Log user out
        Auth::instance()->logout();

        // Redirect to login page
        Request::current()->redirect('user/login');
    }

} 
```

**应用程序/类/模型/user.php**

```
<?php defined('SYSPATH') OR die('No Direct Script Access'); 
```

我对 Kohana 不够熟悉，甚至不知道该在模型中添加什么。现在 Auth 正在使用它自己的文件来存储用户数组。但我的指示是让模型存储用户名和密码。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:47:24.763

我正在使用这个答案来尝试用代码作为评论进行交流，而不一定要作为答案。那说：

这对你有用吗？

```
public function action_index()
    {
        $this->template->content = View::factory('user/index')
            ->bind('user', $user); 
```

$user 没有在那里定义，所以我认为这会导致错误。另外，我不确定您的用户模型在哪里发挥作用。如果没有与用户绑定的数据库，那么 kohana 不会像使用 ORM 时那样依赖用户模型。那么，如果模型实例只会在页面更改时被丢弃，为什么还需要在模型实例中存储任何东西呢？假设这意味着在登录时您会说类似`$user = new User_Model();`然后分配私有变量或其他内容。

而这个“但我的指示是让模型存储用户名和密码。” 此人请求的目标是什么？教你？或者如果登录后可以使用用户信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:57:29.627

好吧，我昨晚想通了。我将回答我自己的问题以供将来参考。虽然我仍在使用 Auth 来处理用户会话，但我没有对其进行身份验证。我正在使用

```
Auth::instance()->force_login($username) 
```

按照要求对模型进行身份验证后强制登录。

首先，我更改了登录页面以简化并添加一些 AJAX。

**/application/views/user/login.php**

```
<form id="loginForm" class="form-signin">

<h2 class="form-signin-heading">Sign in</h2>

<div class="message" id="message"></div>

<!-- Username Field -->
<input type="text" id="username" class="input-block-level" placeholder="Username = admin" />

<!-- Password Field -->
<input type="password" id="password" class="input-block-level" placeholder="Password = password" />

<!-- Submit Buton -->
<input type="submit" id="login" value="Sign In" class="btn btn-large btn-primary" />

</form>

<script type="text/javascript">
$(document).ready(function() {

    $("#login").click(function() {
        var action = $("#loginForm").attr('action');
        var form_data = {
            username: $("#username").val(),
            password: $("#password").val(),
            is_ajax: 1
        };

        $.ajax({
            type: "POST",
            url: '/user/checkLogin',
            data: form_data,
            success: function(response)
            {
                if(response == 'success')
                    window.location.replace('/user');
                else
                    $("#message").html("<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>×</button>Invalid username and/or password.</div>");    
            }
        });
        return false;
    });

});
</script> 
```

然后我添加了一个带有明文用户名和密码的简单模型。（同样，这是概念的证明，绝不意味着是一种安全的身份验证方式）。

**/application/classes/model/user.php**

```
<?php defined('SYSPATH') OR die('No Direct Script Access');

Class Model_User extends Model
{
    public function checkLogin($username, $password)
    {
        // These are the username and password to verify against
        $user = "admin";
        $pass = "password";

        // Compare and return boolean
        if ($username === $user && $password === $pass){
            return TRUE;
        } else {
            return FALSE;
        }
    }
} 
```

然后我将 checkLogin 操作添加到用户控制器（因为这是我在登录页面上从我的 AJAX 调用的）来处理登录。

**/application/classes/controller/user.php**

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_User extends Controller_Template {

    public function action_index()
    {
        // Load the user information
        $user = Auth::instance()->get_user();

        // if a user is logged in, redirect to welcome page
        if ($user){
            $this->template->content = View::factory('user/welcome')
            ->bind('user', $user);
        } else {
            $this->template->content = View::factory('user/index');
        }
    }

    public function action_checkLogin()
    {
        //disable auto rendering if requested using ajax
        if($this->request->is_ajax()){
            $this->auto_render = FALSE;
        }

        // Check for post
        if($this->request->post()){
            // Instantiate the Model Object
            $user = new Model_User();

            // Get post variables
            $username = $this->request->post('username');
            $password = $this->request->post('password');

            // Check the login
            if($check = $user->checkLogin($username,$password)){
                // Login the user using auth
                $user = Auth::instance()->force_login($username);
                // Respond with a success
                echo 'success';
            } else {
                // Respond with a fail
                return "fail";
            }
        }
    }

    public function action_login()
    {
        // Load the user information
        $user = Auth::instance()->get_user();

        // if a user is logged in, redirect to welcome page
        if ($user){
            $this->template->content = View::factory('user/welcome')
            ->bind('user', $user);
        } else {
            $this->template->content = View::factory('user/login')
            ->bind('message', $message);
        }
    }

    public function action_logout()
    {
        // Log user out
        Auth::instance()->logout();

        // Redirect to login page
        Request::current()->redirect('user/login');
    }

} 
```

现在我有一个漂亮的简单登录页面，它使用 Kohana 框架中的 AJAX 对模型进行身份验证。这不是火箭手术，但有趣的是弄清楚这些不同的框架是如何运作的。希望它对将来的人有所帮助。干杯!

# text - Paperjs 写文字

> ID：13755500
> 
> 赞同：0
> 
> 时间：2012-12-07T01:18:56.297
> 
> 标签：text, vector, paperjs

我试图了解 Paperjs 是如何工作的，我想知道是否可以编写文本向量，如果可以，如何？

在此之前我尝试过 Raphael.js，我几乎对它感到满意，但由于某些原因，Paperjs 似乎更符合（跨）浏览器，对吧？

一些例子会很好！

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:35:32.783

是的，绝对可以在 paper.js 中创建文本。

```
var awesometext = new paper.PointText();
awesometext.content='awesome'; 
```

纸比拉斐尔好，因为它是基于画布的。Canvas 在手机/标签上得到更好的支持，因此具有 paperjs 的优势。但是，由于画布只是位图实现，因此与 raphael 中的 svg 渲染相比，缩放会使画布渲染效果不佳。

因此，这取决于您的应用程序的优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T13:30:57.057

Paperjs 可以很好地处理文本缩放，但它使用 canvas 的本机方法来呈现字符，因此一旦绘制了矢量数据，您就无法访问它们。但我想你只希望矢量字符来操纵它们的形状，例如，将一个字母变形为另一个，或者创建一个字体编辑器。

如果您只想要高分辨率文本，那么 paperjs 可以做到这一点没问题......或者您可以设置更大的字体大小。

如果您想在 paperjs 中将文本呈现为矢量，请查看[https://nodebox.github.io/opentype.js/](https://nodebox.github.io/opentype.js/)

# c# - WPF在DataGrid中绑定SelectedItem

> ID：13755507
> 
> 赞同：6
> 
> 时间：2012-12-07T01:19:33.247
> 
> 标签：c#, wpf, xaml, binding, selecteditem

所以，我有一个 TabControl 绑定到一个项目列表（每个选项卡都是一个项目） - 工作正常。每个选项卡的内容是一个带有项目员工列表的 DataGrid - 也可以正常工作。现在，我想显示一些有关当前在 DataGrid 上选择的员工的信息。这是一些代码： MainWindow.xaml 文件：

```
<Window.Resources>
    <DataTemplate x:Key="ItemTemplate">
        <TextBlock Text="{Binding Name}" />
    </DataTemplate>

    <DataTemplate x:Key="ContentTemplate">
        <DataGrid ItemsSource="{Binding Employees}" SelectedItem="{Binding SelectedEmployee,  Mode=TwoWay}"  SelectionMode="Extended" SelectionUnit="FullRow" Name="employeesList">

        </DataGrid>

    </DataTemplate>
</Window.Resources> 
```

后来，我想通过简单地在标签中写入来测试这个绑定：

```
<Label Name="emp" Content="{Binding SelectedEmployee}"></Label> 
```

和 MainWindowViewModel：

```
 public Employee SelectedEmployee { get { return selectedEmployee; }
        set
        {
            if (selectedEmployee != value)
            {
                selectedEmployee = value;
                NotifyPropertyChanged("SelectedEmployee");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    } 
```

我是 WPF 的新手，我已经阅读了一些提示，但它们没有帮助。标签“emp”不显示任何内容。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T01:30:38.423

您没有通知您的属性已更改，试试这个

```
public Employee SelectedEmployee
{ 
     get { return selectedEmployee; }
     set
     {
         if (selectedEmployee != value)
         {
             selectedEmployee = value;
             LastName = value;
             NotifyPropertyChanged("SelectedEmployee"); //NotifyPropertyChanged("SelectedItem");
         }
      }
} 
```

测试：

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication6"
        Title="MainWindow" Height="350" Width="763" Name="UI" >
    <Window.Resources>
        <DataTemplate x:Key="ItemTemplate">
            <TextBlock Text="{Binding Name}" />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <DataGrid ItemsSource="{Binding ElementName=UI,Path=Employees}" SelectedItem="{Binding ElementName=UI,Path=SelectedEmployee}"  SelectionMode="Extended" SelectionUnit="FullRow" Name="employeesList" Margin="0,41,0,0" />
        <Label Content="{Binding ElementName=UI,Path=SelectedEmployee.Name}" Height="28" HorizontalAlignment="Left" Name="label1" VerticalAlignment="Top" Width="288" />
        <Label Content="{Binding ElementName=employeesList,Path=SelectedItem.Name}" Height="28" HorizontalAlignment="Left" Name="label2" VerticalAlignment="Top" Width="288" Margin="294,0,0,0" />
    </Grid>
</Window> 
```

代码：

```
 public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private ObservableCollection<Employee> _employees = new ObservableCollection<Employee>();
        private Employee _selectedEmployee;

        public MainWindow()
        {
            InitializeComponent();
            Employees.Add(new Employee { Name = "sa_ddam213" });
        }

        public ObservableCollection<Employee> Employees
        { 
            get { return _employees; }
            set { _employees = value; }
        }

        public Employee SelectedEmployee
        {
            get { return _selectedEmployee; }
            set { _selectedEmployee = value; NotifyPropertyChanged("SelectedEmployee"); }
        }

        /// <summary>
        /// Notifies the property changed.
        /// </summary>
        /// <param name="info">The info.</param>
        public void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    }

    public class Employee
    {
        public string Name { get; set; }
    } 
```

这似乎按预期工作，还是我错过了什么？

# python - 如何检查加载了什么网址？

> ID：13755514
> 
> 赞同：1
> 
> 时间：2012-12-07T01:21:23.737
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我有一个类似于此的代码：

```
class A(QWebView):
    def __init__(self):
        # some code here
        # in here I want to check what url is loaded and based on that assign appropriate SLOT
        # I was wondering how to do something like that:
        # if 'examle.html' in self.url():
        #     self.loadFinished.connect(self.example)
        # else:
        #     self.loadFinished.connect(self.anotherSLOT)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    br = A()
    br.load(QUrl('http://example')
    br.show()
    app.exec_() 
```

我有一种感觉，我做的完全错了。理想情况下，我想加载两个 url 并将其连接到适当的插槽，但现在我只想出了这种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:26:51.283

你得到当前的网址：

```
self.url().toString() 
```

然后你可以检查：

```
 if 'example' in self.url().toString() \
    or self.url().toString().endswith('example') \ 
    or 'example' in self.url().toString().split("/"):
        pass 
```

# java - 可填写表单中的 itext 图像字段

> ID：13755515
> 
> 赞同：2
> 
> 时间：2012-12-07T01:21:32.697
> 
> 标签：java, pdf, itext

在 itext 2 中，下面的代码运行良好，在 itext 5 中它失败了。有没有人有如何将图像添加到 PDF 上的图像字段的示例？

这是我的代码...

```
public static void atsSetFieldImage(AcroFields form, PdfStamper stamper, String fieldName, Image img) 
{
    try 
    {
        float[] photograph = form.getFieldPositions(fieldName);
        Rectangle rect = new Rectangle(photograph[1]
                           , photograph[2]
                           , photograph[3]
                           , photograph[4]);

        //Image img = Image.getInstance(imageName);
              image1.scaleToFit(rect.getWidth(), rect.getHeight());
              image1.setAbsolutePosition(
                                    photograph[1] + (rect.getWidth() - image1.getScaledWidth()) / 2
                                  , photograph[2] + (rect.getHeight() - image1.getScaledHeight()) / 2);

        PdfContentByte cb = stamper.getOverContent((int)photograph[0]);
                       cb.addImage(image1);

    }
    catch(Exception e) 
    {
        //e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:46:07.813

如何将图像添加到 acroForm 字段：

```
Rectangle rect = form.getFieldPositions(fieldName)[0].position;
int page = form.getFieldPositions(fieldName)[0].page;
//Scale it
image1.scaleAbsolute(rect.getWidth(), rect.getHeight());
//Position it
img.setAbsolutePosition(rect.getLeft(), rect.getBottom());
//Add it to the correct page
stamper.getOverContent(page).addImage(img); 
```

# c - 是否有一种有保证且安全的方法可以从 ANSI C FILE 指针中截断文件？

> ID：13755516
> 
> 赞同：12
> 
> 时间：2012-12-07T01:21:34.400
> 
> 标签：c, file-io

我知道 ANSI C 定义了 fopen、fwrite、fread、fclose 来修改文件的内容。然而，当涉及到截断文件时，我们必须求助于操作系统特定的功能，例如，`truncate()`在 Linux 上，`_chsize_s_()`在 Windows 上。但在我们可以调用那些特定于操作系统的函数之前，我们必须通过调用 FILE 指针来获取文件句柄`fileno`，这也是一个非 ANSI-C 的。

**我的问题是：**`FILE*`截断文件后继续使用可靠吗？我的意思是，ANSI C`FILE`层有自己的缓冲区，并且不知道文件是从下面截断的。如果缓冲的字节超出截断点，缓冲的内容是否会在执行时刷新到文件中`fclose()`？

如果不能保证，在编写 Windows-Linux 可移植程序时，使用伴随截断操作的文件 I/O 函数的最佳实践是什么？

类似的问题：当从返回的文件句柄中查询文件大小`fileno`时，我稍后调用时它是否是准确的大小`fclose()`- 没有进一步的`fwrite()`？

[编辑 2012-12-11]

按照约书亚的建议。我得出的结论是，当前可能的最佳实践是：通过调用将流设置为无缓冲模式`setbuf(stream, NULL);`，然后`truncate()`或`_chsize_s()`可以与流和平相处。

无论如何，似乎没有官方文档明确确认这种行为，无论是 Microsoft CRT 还是 GNU glibc。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:06:07.020

## POSIX 方式....

`ftruncate()`是您正在寻找的东西，它自 2001 年以来一直在 POSIX 基本规范中，所以它现在应该在每个现代 POSIX 兼容系统中。

请注意，`ftruncate()`它对 POSIX 文件描述符进行操作（尽管其名称可能具有误导性），而不是 STDIO 流`FILE`句柄。另请注意，对 STDIO 流和对打开流的文件描述符进行操作的底层操作系统调用的混合操作可能会混淆 STDIO 库的内部运行时状态。

因此，为了`ftruncate()`安全地使用 STDIO，如果您的程序可能已经写入有问题的流，则*可能*需要首先刷新任何 STDIO 缓冲区（使用）。`fflush()`这将避免 STDIO 在截断完成后尝试将其他未写入的缓冲区刷新到文件中。

然后，您可以使用`fileno()`STDIO 流的`FILE`句柄来查找打开的 STDIO 流的底层文件描述符，然后将该文件描述符与`ftruncate()`. 您可能会考虑将调用放在调用`fileno()`的参数列表中，`ftruncate()`这样您就不会保留文件描述符并意外使用它，而其他方式可能会进一步混淆 STDIO 的内部状态。也许像这样（比如将文件截断到当前的 STDIO 流偏移量）：

```
/*
 * NOTE: fflush() is not needed here if there have been no calls to fseek() since
 * the last fwrite(), assuming it extended the length of the stream --
 * ftello() will account for any unwritten buffers
 */
if (ftruncate(fileno(stdout), ftello(stdout)) == -1) {
        fprintf(stderr, "%s: ftruncate(stdout) failed: %s\n", argv[0], strerror(errno));
        exit(1);
}
/* fseek() is not necessary here since we truncated at the current offset */ 
```

另请注意，POSIX 定义`ftruncate()`说“*不应通过调用 ftruncate() 来修改查找指针的值*”，因此这意味着您*可能*还需要使用 use`fseek()`来设置 STDIO 层（因此间接设置文件描述符) 到文件的新结尾，或者回到文件的开头，或者仍然在文件边界内的某个地方，根据需要。（请注意，`fseek()`如果使用 找到截断点，则不需要`ftello()`。）

如果您遵循上述过程，则不必使 STDIO 流无缓冲，尽管这样做当然可以替代使用`fflush()`（但不是`fseek()`）。

## 没有 POSIX....

如果您需要遵守严格的 ISO 标准 C，例如 C99，那么您没有可移植的方法将文件截断为除零 (0) 长度之外的给定长度。我在第 7.21.3 节（第 2 段）中提到的 C11 的最新草案：

> 二进制文件不会被截断，除非在 7.21.5.3 中定义。对文本流的写入是否会导致相关文件在该点之后被截断是实现定义的。

（并且 7.21.5.3 描述了`fopen()`允许文件被截断为零长度的标志）

关于文本文件的警告就在那里，因为在同时具有文本和二进制文件的愚蠢系统上（而不仅仅是普通的 POSIX 样式的内容不可知文件），那么通常可以将一个值写入将存储在文件中的文件在写入的位置，`EOF`下次读取文件时将被视为指示符。

其他类型的系统可能具有不同的底层文件 I/O 接口，这些接口与 POSIX 不兼容，但仍提供兼容的 ISO C STDIO 库。理论上，如果这样的系统提供了类似的东西`fileno()`，`ftrunctate()`那么类似的过程也可以与它们一起使用，前提是要注意避免混淆 STDIO 库的内部运行时状态。

## 关于查询文件大小......

您还询问了通过查询 fileno() 返回的文件描述符找到的文件大小是否会在成功调用 后准确表示文件大小`fclose()`，即使没有进一步调用`fwrite()`.

答案是：**不要那样做！**

如上所述，如果您不想混淆 STDIO 库的内部运行时状态，则必须非常小心地使用作为 STDIO 流打开的文件的 POSIX 文件描述符。我们可以在这里补充一点，重要的是不要将自己与它混淆。

查找作为 STDIO 流打开的文件的当前大小的最正确方法是查找文件的末尾，然后仅使用 STDIO 函数询问流指针在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:41:13.850

零字节的无缓冲写入不是应该在那时截断文件吗？

请参阅此问题以了解如何设置无缓冲：[ANSI C 中的无缓冲 I/O](https://stackoverflow.com/questions/1647927/unbuffered-i-o-in-ansi-c)

# html - JavaScript - 在使用数组和 For 循环输出的 Div 上打印事件处理程序

> ID：13755522
> 
> 赞同：1
> 
> 时间：2012-12-07T01:22:44.493
> 
> 标签：html, arrays, dynamic, for-loop, event-handling

在过去的几天里，我一直在试图解决这个问题，但我似乎无法做到这一点。这个想法是，当有人填写表单时单击名为 calc 的按钮，它将收集用户输入，将其存储在变量中，然后将其输出到数组中。然后，使用 for 循环，存储在数组中的消息将填充到表单下方。但是，我希望消息的每个实例都有一个与之关联的事件句柄。让事件处理程序为所有输出的消息工作是行不通的。谢谢您的帮助！:)

[http://jsbin.com/azozad/13/edit](http://jsbin.com/azozad/13/edit)

# javascript - 如何提取两个不同的唯一模式之间的大 html 字符串的一部分？

> ID：13755523
> 
> 赞同：1
> 
> 时间：2012-12-07T01:22:45.210
> 
> 标签：javascript, jquery

我得到的只是一个 HTML 字符串，`XMLHttpRequest`然后我将它发布到一个文本框。

```
document.myform.outputtext.value = xhr.responseText; 
```

`</fb:send>`但我只想要介于和之间的那个大 HTML 字符串的一部分`<div class="styles">`。我在 PHP 中做过类似的事情，但不知道如何在 JavaScript 中做到这一点？我想要的`xhr.responseText`只是介于`</fb:send>`和之间的部分`<div class="styles">`。如果有人帮我解决这个问题，我会很高兴。谢谢。

PHP 示例：

```
$start = strpos($file_contents, '</fb:send>');
$end = strpos($file_contents, '<div class="styles">', $start);
$code = substr($file_contents, $start, $end); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:30:16.400

```
var start = xhr.responseText.indexOf('</fb:send>');
var end = xhr.responseText.indexOf('<div class="styles">', start);
var code = xhr.responseText.substring(start, end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:31:11.303

正则表达式很酷。

```
var html = "foo</fb:send>bar<div class=\"styles\">baz";
var code = html.match(/<\/fb\:send>(.*?)<div class="styles">/)[1];
console.log(code); // 'bar' 
```

只是不要指望他们完成[HTML 解析器的工作](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:30:27.023

你试过`indexOf`吗`substring`？这是一个例子：

```
<script>
var stringTxt = "123abcxyz890";
var start = stringTxt.indexOf("a");
var end = stringTxt.indexOf("z", start);
var newStringTxt = stringTxt.substring(start, end);
</script> 
```

# google-maps-api-3 - 谷歌地图标记显示在错误的位置

> ID：13755524
> 
> 赞同：2
> 
> 时间：2012-12-07T01:22:51.233
> 
> 标签：google-maps-api-3

我有一些代码可以在该位置显示`(36.7771592941268,3.0516744005553846)`带有标记的位置的 Google 地图。我用这个位置创建标记，问题是标记出现在错误的位置。

```
var latlng = new google.maps.LatLng(36.7771592941268,3.0516744005553846);

var marker= new google.maps.Marker({
    position: latlng,
    clickable: true,
    draggable: true,
    map: map
}); 
```

为了演示，当我将坐标`(36.7771592941268, 3.0516744005553846)`直接放入谷歌地图时，我看到了同样的问题。绿色箭头（在下面的链接中）是我希望我的标记出现在我的代码中的位置，但标记总是以红色气球所在的位置结束（[见这里](https://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&authuser=0&q=36.800866193412595,2.9163337101562092&aq=&vps=1&sll=36.26577,-92.54324&sspn=0.698678,1.41861&vpsrc=0&t=h&g=36.26577%20-92.54324&ie=UTF8)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:27:44.467

您的坐标显然是错误的，谷歌显示给定坐标的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T10:52:54.047

您需要设置标记图标的锚属性（[示例](https://developers.google.com/maps/documentation/javascript/examples/icon-complex)）：

```
var marker = new google.maps.Marker({
    position: latlng,
    icon: {
        path: 'M0-48c-9.8 0-17.7 7.8-17.7 17.4 0 15.5 17.7 30.6 17.7 30.6s17.7-15.4 17.7-30.6c0-9.6-7.9-17.4-17.7-17.4z',
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(0, 32),
        fillColor: 'red',
        fillOpacity: 1,
        strokeColor: '#000',
        strokeWeight: 0,
        scale: 1
    },
    clickable: true,
    draggable: true,
    map: map
}); 
```

# button - 当人们点击paypal购买按钮时，如果用户没有登录网站，它会重定向login.php

> ID：13755525
> 
> 赞同：0
> 
> 时间：2012-12-07T01:23:02.680
> 
> 标签：button, paypal, click

我有一个贝宝购买按钮。但是当每个人都点击按钮时，他们可以购买产品。但我希望用户登录网站。我没有成功。我该怎么办？我的意思是如果用户没有登录网站并点击购买按钮，它会重定向 login.php

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:39:05.237

除非他们已登录，否则不要显示购买按钮，或者修改您的结帐系统以便能够在没有帐户的情况下处理订单。

# ruby - 树顶语法无法识别“/”

> ID：13755526
> 
> 赞同：1
> 
> 时间：2012-12-07T01:23:05.317
> 
> 标签：ruby, grammar, treetop

我是 Treetop 的新手，并且有一个非常简单的语法，我无法正常工作。我有一些测试：

```
it "parses a open tag as some text surrouded by brackets" do
  document = "[b]"
  Parser.parse(document).should_not be_nil
end
it "parses a close tag as a tag with a / preceeding the tag name" do
  document = '[/b]'
  Parser.parse(document).should_not be_nil
end 
```

这是我的语法：

```
grammar BBCode
  rule open_tag
    "[" tag_name "]"
  end

  rule tag_name
    [a-zA-Z\*]+
  end

  rule close_tag
    "[/" tag_name "]"
  end
end 
```

第一次测试通过，第二次测试失败。我还尝试了这些替代规则：

```
"[" [\/] tag_name "]"
"[" "/" tag_name  "]"
"[\/" tag_name "]" 
```

所有这些都失败了。

无论我尝试什么，我似乎都无法让它识别结束标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:51:08.227

我发现了这个问题：[https](https://github.com/nathansobo/treetop/issues/25) ://github.com/nathansobo/treetop/issues/25 ，它似乎已经回答了我的问题。

我的语法不包含允许打开或关闭标签的顶级规则，因此甚至没有考虑第二种可能性：

```
grammar BBCode
  rule document
    (open_tag / close_tag)
  end

  rule open_tag
    ("[" tag_name "]")
  end

  rule tag_name
    [a-zA-Z\*]+
  end

  rule close_tag
    ("[/" tag_name "]")
  end
end 
```

# python-3.x - 定义一个以数字开头的函数名（在 Python 3 中）？

> ID：13755532
> 
> 赞同：4
> 
> 时间：2012-12-07T01:23:57.397
> 
> 标签：python-3.x, syntax-error

我尝试创建以下功能： `def 3utr(): do_something()`. 但是，我得到一个 SyntaxError。用“三”代替“3”可以解决问题。

我的问题是：

*   为什么是语法错误？
*   有没有办法让函数名在 Python 3 中以数字开头？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T01:42:33.397

这是一个语法错误，因为语言规范不允许标识符以数字开头。因此，Python 中不可能有以数字开头的函数名（即标识符）。

> `identifier ::= (letter|"_") (letter | digit | "_")*`

[Python 2 语言参考](http://docs.python.org/2/reference/lexical_analysis.html#identifiers)

> 在 ASCII 范围 (U+0001..U+007F) 内，标识符的有效字符与 Python 2.x 中的相同：大写和小写字母 A 到 Z、下划线 _ 以及**除第一个字符外，数字 0 到 9**。

[Python 3 语言参考](http://docs.python.org/3/reference/lexical_analysis.html#identifiers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-30T23:28:11.590

一种解决方法是使用罗马数字：

```
>>> def xxiv():
...     print("ok\n")
... 
>>> xxiv()
ok 
```

# c - 如何让文本跳转到命令窗口中的下一行？C编程？

> ID：13755534
> 
> 赞同：0
> 
> 时间：2012-12-07T01:24:29.737
> 
> 标签：c, string, text, cmd, argv

> **可能重复：**
> [如何让输入在某个点被切断或环绕？](https://stackoverflow.com/questions/13755035/how-do-i-get-the-input-to-cut-off-or-wrap-around-at-a-certain-point)

好的，所以在使用了一天的 stackoverflow 之后，我了解到在这个站点上是很有用的 :) 我最终让我的程序运行起来。我可以在命令行中获取无限数量的文本文件并显示它们！所以看起来像这样

* * *

我有：

CMD 控制台

c:\Users\Username\Desktop> wrapfile.exe hello.txt how.txt。are.txt you.txt random.txt

你好，你今天好吗？我希望你做得很好。这只是一个测试，看看我能在屏幕上放多少。

* * *

我需要：

CMD 控制台

c:\Users\Username\Desktop> wrapfile.exe hello.txt how.txt。are.txt you.txt random.txt

你好，你今天好吗？
我希望你做得很好。
这只是一个测试，看看
我能在屏幕上放多少。

* * *

现在，我想建立在这个程序上。我将如何让这个新发现的文本环绕？就像，如果你想做到这一点，每 40 个字符左右，文本就会跳到下一行……我们怎么能做这样的事情？

再次感谢！

这是我正在使用的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{

    int l = 1;
        while(l != argc)
{
        FILE *fp; // declaring variable

        fp = fopen(argv[l], "rb");
        l++;

    if (fp != NULL) // checks the return value from fopen
    {
        int i = 1;
        do
        {
            i = fgetc(fp);     // scans the file 
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
    }
    else
    {
        printf("Error.\n");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:31:04.517

你想自动换行你的文件吗？

如果是这种情况，这是我要做的高级步骤序列

*   首先，我将文件加载到字符数组中

*   其次，我会生成一个新文件。我会在新文件中打印 40 个字符，然后是`\n`char。

*   根据您的要求，您可能想也可能不想用新文件替换旧文件。

如果您只需要将自动换行的文本打印到控制台，而不是第 2 步，您可以将 40 个字符打印到命令行，然后打印 a `\n`，然后重复接下来的 40 个

# python - PyDev/Eclipse/Python 未显示类的所有方法

> ID：13755535
> 
> 赞同：2
> 
> 时间：2012-12-07T01:24:38.893
> 
> 标签：python, eclipse, ide, pydev

使用 PyDev 运行 Eclipse (Galileo)。我正在尝试使用模块 urllib2 并且我*刚刚*开始尝试使用它。我正在阅读的教程之一说在我的 urllib2.urlopen() 类上调用 geturl() 。所以我做到了，它按预期工作。

但是，当我尝试使用 Eclipse 方便的“ctrl+space”快捷方式浏览类方法时，我感到很惊讶，它只为我提供了我认为是基类的私有方法：

![在此处输入图像描述](../Images/8cf92fec408816e06166f12fc0af5e65.png)

当我这样做时`dir(page)`，我会得到各种可以玩的巧妙方法！

```
['__doc__', '__init__', '__iter__', '__module__', '__repr__', 'close', 'code', 'fileno', 'fp', 'getcode', 'geturl', 'headers', 'info', 'msg', 'next', 'read', 'readline', 'readlines', 'url'] 
```

这是一个 Eclipse 问题吗？还是用户错误？如果我把它放在 IDLE 中，我可以使用 IDLE 的自动完成功能来查看可用的方法，但是我无法获得与 PyDev 相同的功能；我相信它可以在我的工作电脑上运行，但我的家用电脑（我现在的电脑）似乎“不正常”。

我在 Google/Stackoverflow 上尽了最大努力，但我不确定哪些关键字会返回可能帮助我理解这里出了什么问题的结果。您可以提供的任何见解都会很棒！

（Python 2.6，在 Debian (#!) 虚拟环境中运行，windows7 主机 - 如果有任何问题）

注意：我只在 Debian 方面进行开发，所以我在 Win7 上没有 Eclipse。

**更新1：**

回答：“如果我向下滚动，浏览器会以什么结尾？” 它以**subclasshook**结束。请参阅下面的照片以了解列表底部的外观（这都是私人的**，没有方法）。**

 **![在此处输入图像描述](../Images/b2a2cb7671babeaf808eddc4bda2b42c.png)

**更新2：**

正如上一篇文章所建议的那样，我进入首选项菜单并检查了自动完成选项卡和解释器首选项选项卡，似乎没有什么不合适的（但是，在阅读了 pydev 自动完成文档之后，我没有看到任何关于 '防火墙'或任何表明存在防火墙的迹象。

但是，我做了另一个测试，见下图：

![在此处输入图像描述](../Images/0d77cfa53237eaa71207cc5f3fb82d4a.png)

自动完成功能`wx`工作得很好。也许我误解了在以前的帖子中告诉我的内容，但是，我理解我为我的`page`班级看到魔术方法的原因是因为 PyDev 不知道还有什么可以填充它 - 所以它显然很困惑。我只是不确定从这里去哪里。我会继续阅读 PyDev 文档，看看我是否能在此期间弄清楚。

而且，我几乎忘记了——当我将鼠标“悬停”在代码中的 urllib2.urlopen() 上时，它**确实**显示了文档字符串。不确定这是否提供了有关此假定损坏功能的任何见解。

**更新3：**

根据某人关于“强制内置”仅在 PyDev 中自动完成的评论，我去并将“urllib2”添加到首选项下的强制内置。下面是我得到的图像......

![在此处输入图像描述](../Images/5d7cd4020ca88bf203d4cb0467a892e8.png)

我有一些新方法……但不是我预期的方法（即我没有看到`__dict__`我调用时得到的方法`dir(page)`，特别是 geturl()）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:55:41.150

如果您阅读[文档](http://pydev.org/manual_adv_complctx.html)：

> 重要的是要注意，您的解释器必须正确配置才能使代码完成工作，并且为了获得内置程序，PyDev 会产生一个 shell，因此，如果防火墙阻止了来自 eclipse 的通信，则可以防止代码完成工作到那个壳。

换句话说，您必须进入首选项并设置“代码完成”设置和“解释器 - Python”设置，并确保 Eclipse 可以启动子外壳并通过套接字与它进行通信，而无需防火墙或其他任何东西碍事。

我的猜测是，在这些事情中，您的解释器设置很可能是错误的。即使您的 Python 位于通常的`/usr/bin/python`位置，您也可能已将 PyDev 设置为查找，例如`/usr/bin/python3`，或`python26`，或“不要猜测，始终使用 #! 行或项目特定设置”，或者您已经将 Python 安装在每个用户的位置而不是系统范围内，或者谁知道。

查看“Interpreter - Python”首选项页面中的内容，并查看是否可以按照 Eclipse 期望的方式运行 Python。如果不是，它将无法执行任何命令行完成，除了内置的基本内容。（正如我在其他地方所说，我相信这意味着它可以猜测它`page`是某种类类型，但它无法判断是什么类型，所以它会猜测几乎任何类对象都具有的所有标准魔术方法，仅此而已。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:32:04.767

其中大部分是 Python 的“魔术方法”：

[http://www.rafekettler.com/magicmethods.html](http://www.rafekettler.com/magicmethods.html)

它们是您可以在任何对象上定义以赋予其自定义行为的特殊方法。大多数 Python IDE 都知道不显示它们，但 Eclipse 尤其有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:49:13.550

您遇到的问题是像 Python 这样的动态语言的基本问题：您的 IDE 无法知道您的`page`变量所指的对象类型。为此，它必须知道`urlopen()`返回什么类型。如果不调用它，就无法知道这一点！每次调用它时它甚至可能不会返回相同的类型，在这种情况下，它应该向您显示什么类的方法？

IDE 可以进行一些猜测，但是当这些猜测失败时，您会得到与您所看到的一样的结果。它知道你有一个对象，因为一切都是一个对象，所以它向你展示了`object`.**

# c#-4.0 - c# 列表框我有问题

> ID：13755536
> 
> 赞同：0
> 
> 时间：2012-12-07T01:24:50.487
> 
> 标签：c#-4.0

我在按钮 ADD 中创建了一个列表：

```
{
List <string> Names = new List<string>();

Names.Add(textBox1.Text);
textBox1.Text = " ";
} 
```

我创建了另一个按钮 SHOW NAMES 并且我希望我在列表中输入的这些名称在列表框中列出？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:12:28.900

首先，您需要将第一行移到按钮单击方法之外，因为如果您在方法内声明列表，一旦该方法返回，它就会消失。

对于您的 SHOW NAMES 方法，如果您只想*显示*列表，您可以使用 TextBlock 而不是列表框，这样会更容易一些：

```
 TextBlock tb = new TextBlock();
    tb.text = string.Concat(Names); 
```

# c# - 为什么我不能反序列化 KnownType'd anyType？

> ID：13755541
> 
> 赞同：2
> 
> 时间：2012-12-07T01:25:24.613
> 
> 标签：c#, .net, arraylist, datacontractserializer

我正在尝试在 WCF 之外使用 DataContractSerializer 来序列化对象。本例中的对象继承自 CollectionBase 周围的旧通用包装器，例如

```
[KnownType(typeof(Foo)]
[CollectionDataContract]
class FooCollection : MyCollectionBase<Foo>

[KnownType(typeof(FooCollection)]
[KnownType(typeof(Foo)]
[CollectionDataContract]
class MyCollectionBase<T> : CollectionBase

[DataContract]
class Foo
{
    [DataMember]
    string Name;
    [DataMember]
    string Value;
} 
```

当它被序列化时，我得到以下结构：

```
<FooCollection xmlns="http://schemas.datacontract.org/ ...>
  <anyType>
    <Name>...</Name>
    <Value>...</Value>
  </anyType>
</ArrayOfAnyType> 
```

在反序列化我得到错误：

> [System.Runtime.Serialization.SerializationException：来自命名空间http://schemas.datacontract.org/2004/07/MyAssembly](http://schemas.datacontract.org/2004/07/MyAssembly)的元素 anyType不能将子内容反序列化为对象。请使用 XmlNode[] 反序列化这种 XML 模式。
> 
> ----> System.Xml.XmlException：预期来自命名空间“http://schemas.datacontract.org/2004/07/MyAssembly”的结束元素“anyType”。从命名空间“http://schemas.datacontract.org/2004/07/MyAssembly”中找到元素“名称”。第 1 行，位置 xxx。

谷歌搜索此错误显示许多人更改了他们的继承层次结构以使序列化工作，或者只是列出该方法的问题。我找不到任何*使用 XmlNode[] 反序列化这种 XML 模式的示例。*

所以我的问题是：

1.  有没有办法让 DataContractSerializer 相信存储在底层 ArrayList 中的类型是 Foo 类型？
2.  如何实现 XmlNode[] 解决方法？
3.  是使用不受非泛型集合支持的泛型集合的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:08:42.687

鉴于您上面的代码，我使用以下代码进行序列化和反序列化：

```
 var serializer = new DataContractSerializer(typeof(FooCollection));
        IList collection = new FooCollection();
        var foo = new Foo();
        foo.Name = "TestName";
        foo.Value = "Test value";
        collection.Add(foo);
        StringBuilder sb = new StringBuilder();
        StringWriter writer = new StringWriter(sb);
        XmlTextWriter xmlWriter = new XmlTextWriter(writer);

        serializer.WriteObject(xmlWriter, collection);
        Console.WriteLine(sb.ToString());
        var serialized = sb.ToString();

        var reader = new StringReader(serialized);
        var xmlReader = new XmlTextReader(reader);
        var deserialized = serializer.ReadObject(xmlReader);

        return; 
```

使用 .Net 4.0 和 Visual Studio 2010 没有任何问题。如果要更改元素的名称，使其不是“anyType”，可以将 FooCollection 类的 CollectionDataContract 属性更改为：

```
 [CollectionDataContract(ItemName="Foo")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:18:26.830

我找到了问题的原因，在我原来的问题中没有显示：MyCollectionBase 实现了 ISerializable。

DataContractSerializer 将在使用任何属性之前使用 ISerializable 实现。它也无法从 ISerializable 推断出合同，因此没有解决`anyType`反序列化的方法。

这就是 KnownTypeAttribute 不起作用的原因。

# c++ - 打印出列表 C++ 的所有元素

> ID：13755545
> 
> 赞同：-6
> 
> 时间：2012-12-07T01:25:49.923
> 
> 标签：c++, list

以下代码块对我不起作用。编译器说 for 需要一个参数。

确切的错误消息是预期的表达式

```
alfa_it = alfa_list.begin();
cout << "the parties that are flying on Alfa are";
cout << for (alfa_it = alfa_list.begin(); alfa_it != alfa_list.end(); alfa_it++)
cout << " " << *alfa_it;
cout << endl; 
```

ps alfa 是故意拼错的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:26:54.453

你不能`for`给`cout::operator<<`. 您可能正在寻找：

```
cout << "the parties that are flying on Alfa are";
for (alfa_it = alfa_list.begin(); alfa_it != alfa_list.end(); alfa_it++)
    cout << " " << *alfa_it;
cout << endl; 
```

# r - 删除缺少值的行的最快方法？

> ID：13755547
> 
> 赞同：6
> 
> 时间：2012-12-07T01:26:01.717
> 
> 标签：r, data.table

我正在处理一个大型数据集`x`。我想删除`x`一组列中的一个或多个列中缺少的行`x`，该组由字符向量指定`varcols`。

到目前为止，我已经尝试了以下方法：

```
require(data.table)
x <- CJ(var1=c(1,0,NA),var2=c(1,0,NA))
x[, textcol := letters[1:nrow(x)]]
varcols <- c("var1","var2")

x[, missing := apply(sapply(.SD,is.na),1,any),.SDcols=varcols]
x <- x[!missing] 
```

有没有更快的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T01:54:22.030

这应该比使用更快`apply`：

```
x[rowSums(is.na(x[, ..varcols])) == 0, ]
#    var1 var2 textcol
# 1:    0    0       e
# 2:    0    1       f
# 3:    1    0       h
# 4:    1    1       i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T02:39:10.417

这是一个 c++ 解决方案的修订版本，基于与 Matthew 的长时间讨论进行了许多修改（请参阅下面的评论）。我是 c 的新手，所以我相信有人仍然可以改进这一点。

在`library("RcppArmadillo")`您应该能够运行整个文件之后，包括使用`sourceCpp('cleanmat.cpp')`. c++ 文件包含两个函数。`cleanmat`接受两个参数（`X`和列的索引）并返回没有缺失值的列的矩阵。`keep`只接受一个参数`X`并返回一个逻辑向量。

关于传递`data.table`对象的注意事项：这些函数不接受 a`data.table`作为参数。必须修改函数以`DataFrame`作为参数（请参见[此处](https://stackoverflow.com/questions/13773529/passing-a-data-table-to-c-functions-using-rcpp-and-or-rcpparmadillo/13778302#13778302).

**清洁垫.cpp**

```
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

using namespace Rcpp;
using namespace arma;

// [[Rcpp::export]]
mat cleanmat(mat X, uvec idx) {
    // remove colums
    X = X.cols(idx - 1);
    // get dimensions
    int n = X.n_rows,k = X.n_cols;
    // create keep vector
    vec keep = ones<vec>(n);
    for (int j = 0; j < k; j++) 
        for (int i = 0; i < n; i++) 
            if (keep[i] && !is_finite(X(i,j))) keep[i] = 0;
    // alternative with view for each row (slightly slower)
    /*vec keep = zeros<vec>(n);
    for (int i = 0; i < n; i++) {
         keep(i) = is_finite(X.row(i));
    }*/  
    return (X.rows(find(keep==1)));
}

// [[Rcpp::export]]
LogicalVector keep(NumericMatrix X) {
    int n = X.nrow(), k = X.ncol();
    // create keep vector
    LogicalVector keep(n, true);
    for (int j = 0; j < k; j++) 
        for (int i = 0; i < n; i++) 
            if (keep[i] && NumericVector::is_na(X(i,j))) keep[i] = false;

    return (keep);
}

/*** R
require("Rcpp")
require("RcppArmadillo")
require("data.table")
require("microbenchmark")

# create matrix
X = matrix(rnorm(1e+07),ncol=100)
X[sample(nrow(X),1000,replace = TRUE),sample(ncol(X),1000,replace = TRUE)]=NA
colnames(X)=paste("c",1:ncol(X),sep="")

idx=sample(ncol(X),90)
microbenchmark(
  X[!apply(X[,idx],1,function(X) any(is.na(X))),idx],
  X[rowSums(is.na(X[,idx])) == 0, idx],
  cleanmat(X,idx),
  X[keep(X[,idx]),idx],
times=3)

# output
# Unit: milliseconds
#                                                     expr       min        lq    median        uq       max
# 1                                       cleanmat(X, idx)  253.2596  259.7738  266.2880  272.0900  277.8921
# 2 X[!apply(X[, idx], 1, function(X) any(is.na(X))), idx] 1729.5200 1805.3255 1881.1309 1913.7580 1946.3851
# 3                                 X[keep(X[, idx]), idx]  360.8254  361.5165  362.2077  371.2061  380.2045
# 4                  X[rowSums(is.na(X[, idx])) == 0, idx]  358.4772  367.5698  376.6625  379.6093  382.5561

*/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T09:56:43.077

为了速度，有大量的`varcols`，也许看按列迭代。像这样的东西（未经测试）：

```
keep = rep(TRUE,nrow(x))
for (j in varcols) keep[is.na(x[[j]])] = FALSE
x[keep] 
```

问题`is.na`在于它创建了一个新的逻辑向量来保存其结果，然后必须由 R 循环以找到 TRUE，以便它知道要设置 FALSE 的哪个保持。但是，在上面的 for 循环中，R 可以为 的结果重用（大小相同的）先前的临时内存`is.na`，因为它被标记为未使用并且在每次迭代完成后可供重用。国际大学联合会。

`1\. is.na(x[, ..varcols]`)
这没关系，但会创建一个大副本来保存与 一样大的逻辑矩阵`length(varcols)`。并且`==0`on 结果`rowSums`也需要一个新的向量。

`2\. !is.na(var1) & !is.na(var2)`
也可以，但是`!`会再次创建一个新向量，`&`. 的每个结果`is.na`都必须由 R 单独保存，直到表达式完成。`length(varcols)`直到增加很多，或者很大，可能没有什么区别`ncol(x)`。

`3\. CJ(c(0,1),c(0,1))`
迄今为止最好的，但不确定这将如何随着`length(varcols)`增加而扩展。`CJ`需要分配新内存，并且在连接开始之前，它会循环使用所有组合填充该内存。

因此，*最快*的（我猜）将是这样的 C 版本（伪代码）：

```
keep = rep(TRUE,nrow(x))
for (j=0; j<varcols; j++)
   for (i=0; i<nrow(x); i++)
       if (keep[i] && ISNA(x[i,j])) keep[i] = FALSE;
x[keep] 
```

这将需要一个单一的分配`keep`（在 C 或 R 中），然后 C 循环将`keep`在看到 NA 时循环更新列。C 可以在 Rcpp、RStudio、内联包或老派中完成。重要的是这两个循环是这样循环的，以提高缓存效率。想法是，`keep[i] &&`当某些行中有很多 NA 时，该部分有助于加快速度，甚至可以在每行中的第一个 NA 之后完全保存后面的列值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T04:09:19.250

还有两种方法

## 两个矢量扫描

```
x[!is.na(var1) & !is.na(var2)] 
```

## 加入非 NA 值的唯一组合

如果您提前知道可能的唯一值，这将是最快的

```
system.time(x[CJ(c(0,1),c(0,1)), nomatch=0]) 
```

一些时间

```
x <-data.table(var1 = sample(c(1,0,NA), 1e6, T, prob = c(0.45,0.45,0.1)),
                var2= sample(c(1,0,NA), 1e6, T, prob = c(0.45,0.45,0.1)),
                key = c('var1','var2'))

system.time(x[rowSums(is.na(x[, ..varcols])) == 0, ])
   user  system elapsed 
   0.09    0.02    0.11 

 system.time(x[!is.na(var1) & !is.na(var2)])
   user  system elapsed 
   0.06    0.02    0.07 

 system.time(x[CJ(c(0,1),c(0,1)), nomatch=0])
   user  system elapsed 
   0.03    0.00    0.04 
```

# python - python中的命运之轮游戏

> ID：13755550
> 
> 赞同：1
> 
> 时间：2012-12-07T01:26:24.067
> 
> 标签：python, string, python-3.x, slice

在我的游戏中，单词最初显示为下划线，因此对于单词 house，输出将是：_ _ _ _
我不知道如何用用户猜测的正确字母替换这些下划线单词中的字母。例如，如果用户猜出字母 'o'，那么程序将打印“正确！这是迄今为止的单词：_ o _ _” 这是生成屏幕上打印出的下划线数量的代码片段：

```
random_value = random.randrange(len(WORDS))
chosen_word = WORDS[random_value]
blanks = (len(chosen_word) * "_ ") 
```

现在我需要做的就是弄清楚如何用用户输入替换这些下划线，一次一个字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:34:29.583

```
In [93]: chosen_word = 'house'

In [94]: state = "_"*len(chosen_word)

In [95]: guess = 'o'

In [96]: new_state = [(chosen if chosen == guess else blank) 
                      for chosen, blank in zip(chosen_word, state)]

In [97]: ' '.join(new_state)
Out[97]: '_ o _ _ _' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:32:28.417

我建议做更多类似的事情：

```
In [126]: blank = ['_'] * len(chosen_word)

In [127]: blank
Out[127]: ['_', '_', '_', '_', '_']

In [128]: ' '.join(blank)
Out[128]: '_ _ _ _ _' 
```

所以`blank`现在是一个空白字母数组。那么当用户猜对了，就可以把对应的索引替换成正确的字母，用上面的方法`blank`打印出来`.join()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:32:47.820

```
guessed_letters = 'qxz'
for letter in chosen_word:
    if letter in guessed_letters:
        print letter
    else:
        print '_' 
```

翻阅秘密单词的字母。对于每个字母，如果已经猜到，则打印出来。如果没有，请打印 a `_`。

您可以将其缩短为

```
guessed_letters = 'qxz'
for letter in chosen_word:
    print letter if letter in guessed_letters else '_' 
```

甚至

```
print ' '.join(letter if letter in guessed_letters else '_' for letter in chosen_word) 
```

# javascript - 在turn.js中设置第一页是双页而不是单页？

> ID：13755556
> 
> 赞同：2
> 
> 时间：2012-12-07T01:27:03.027
> 
> 标签：javascript, jquery, css

```
 Views
A view is a set of pages that are visible on the screen; in general 
that moment depends on the current page.  For example, when the 
display of a flipbook of 10 pages is set to double, the pages would 
be grouped like this:
1
2-3
4-5
6-7
8-9
10 
```

从官方文档看，第一页是单页，右侧显示。可以改成双页吗？像：

1-2

2-3

4-5

5-6

6-7

……

turn.js 的任何开发人员经验可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:46:43.827

从他们提供的关于[Turn.js 工作原理](http://www.turnjs.com/docs/How_Turn.js_Works)的示例小提琴中，我删除了第二个`div class="hard"`，这导致标题页后跟第 1 页和第 2 页可见。这是那个[小提琴](http://jsfiddle.net/ryan_nauman/EBUZ2/)。

如果您甚至不需要标题页，您可以直接将书打开到第 1 页和第 2 页，如this [fiddle](http://jsfiddle.net/ryan_nauman/c8nNh/)所示。

查看问题[138](https://github.com/blasten/turn.js/issues/138)、[195](https://github.com/blasten/turn.js/issues/195)和[45](https://github.com/blasten/turn.js/issues/45)了解更多信息。

# asp.net-mvc - 即使密码已更改，ASP.NET MVC ActiveDirectoryMembershipProvider 用户仍保持登录状态

> ID：13755561
> 
> 赞同：1
> 
> 时间：2012-12-07T01:28:02.733
> 
> 标签：asp.net-mvc, active-directory, membership-provider

我在我的网络应用程序中使用 ActiveDirectoryMembershipProvider。我像这样使用域凭据对用户进行身份验证

```
if (Membership.ValidateUser(m.Username, m.Password))
    FormsAuthentication.SetAuthCookie(m.Username, true); 
```

这很好用。

但是即使在活动目录中更改了用户的密码，用户仍然保持登录到网络应用程序？

如果他们的域密码更改或他们的帐户被禁用等，我如何确保用户不会保持登录到 Web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:00:51.050

答案是定期（每 30 分钟左右）检查 User.IsApproved 和 User.LastPasswordChangedDate 以确保用户凭据仍然有效。

为此，您需要手动创建 FormsAuthenticationTicket 和 cookie，而不是使用 FormsAuthentication.SetAuthCookie。

将验证用户的日期放在 UserData 中，并将其与 LastPasswordChangedDate 进行比较。

我已经实现了这一点，并且效果很好。

更多信息在这里

[检查 Active Directory 密码是否与 cookie 不同](https://stackoverflow.com/questions/12804625/check-if-active-directory-password-is-different-from-cookie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:34:22.873

我不是 100% 确定，但听起来你不高兴用户的身份验证票继续工作，即使他们的密码更改/帐户过期。

用户登录并拥有身份验证票 (cookie) 后，直到票证过期（在 web.config 文件中设置），用户才会再次接受身份验证。以下是处理此问题的 2 条建议：

1.  等待身份验证票 (cookie) 过期。下次登录时，用户将被要求使用他们的新密码。此解决方案的变体包括使用仅会话 cookie，以便用户必须在浏览器关闭时始终登录（推荐用于 AD 身份验证）。
2.  编写一个 Http 模块，用于查找最近更新的用户列表并在 HTTP 管道的早期检查身份验证票。如果身份验证票通过并匹配更新的用户列表，您将过期用户的 cookie 并将他们重定向到登录页面。这是一个类似的问题，可以帮助您入门：

    [如何强制注销网站上的所有用户](https://stackoverflow.com/a/5492396/188474)

# jquery - 如何添加覆盖 DIV 以覆盖现有 DIV（使用 JQuery）？

> ID：13755563
> 
> 赞同：25
> 
> 时间：2012-12-07T01:28:08.183
> 
> 标签：jquery, overlay

我有一个“容器”DIV，它可能具有所有可能的 CSS 样式，例如：边距、填充、边框和不同的位置（固定、相对、绝对）。

我想在“容器”DIV 上方显示一个加载图标，并禁止用户操作“容器”DIV 中的任何控件。

```
<div class="container">
 A lot of content here ...
</div> 
```

如何添加覆盖整个“容器”DIV 可见区域（不应覆盖边距区域）的覆盖 DIV（使用 JQuery）？

最好的问候，扎克

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-07T01:31:23.250

如果 CSS 没有任何改变，那么：

```
$("<div />").css({
    position: "absolute",
    width: "100%",
    height: "100%",
    left: 0,
    top: 0,
    zIndex: 1000000,  // to be on the safe side
    background: "url(/img/loading.gif) no-repeat 50% 50%"
}).appendTo($(".container").css("position", "relative")); 
```

```
$("<div>Loading...</div>").css({
  position: "absolute",
  width: "100%",
  height: "100%",
  top: 0,
  left: 0,
  background: "#ccc"
}).appendTo($(".container").css("position", "relative"));
```

```
.container {
  border: 1px solid;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div class="container">
  A lot of content here ...
</div>
```

**演示：http:** [//jsfiddle.net/jKfTC/](http://jsfiddle.net/jKfTC/)

# c# - 为什么 CLR 不编译溢出 const 而为变量编译呢？

> ID：13755566
> 
> 赞同：5
> 
> 时间：2012-12-07T01:28:20.753
> 
> 标签：c#, .net, clr

看下面的代码，我只是想了解一下背后的原因......

```
const int a = 2147483647;
const int b = 2147483647;

int c = a + b; // it doesn't allow to compile!!! 

int a = 2147483647;
int b = 2147483647;

int c = a + b; // it allows to compile!!! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:49:08.183

`const`表达式在编译时解析，非`const`表达式在运行时解析。默认情况下，每个都有不同类型的溢出检查上下文。根据 C# 规范：

> 对于未被任何已检查或未检查的运算符或语句包围的非常量表达式（在运行时计算的表达式），**默认溢出检查上下文是未检查的** ，除非外部因素（例如编译器切换和执行环境配置）需要检查评估。

这就是为什么在使用局部变量进行算术运算时没有看到运行时错误的原因。至于`const`计算：

> 对于常量表达式（可以在编译时完全求值的表达式），**默认的溢出检查上下文总是被检查**。除非将常量表达式显式放置在未经检查的上下文中，否则在表达式的编译时求值期间发生的溢出总是会导致编译时错误。

这就是您在`const`计算中看到编译时错误的原因。

[有关 MSDN 上选中和未选中的更多信息](http://msdn.microsoft.com/en-us/library/khy08726%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:37:26.843

对于常量值，编译器本质上是在编译时用常量值替换变量。因此，在编译时计算加法语句时，它能够知道值并查看溢出情况。

对于整数类型变量，我认为编译器实际上并没有在编译时考虑分配的值，而是在运行时评估表达式。

但是 C# 证明默认情况下检查是禁用的。您可以在选项中打开它。请参阅 Justin Etheredge 关于原因和方法的优秀博客文章：

[http://www.codethinked.com/c-trivia-what-no-overflow](http://www.codethinked.com/c-trivia-what-no-overflow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:35:09.107

我假设它是因为编译器知道`const`无法修改，所以`a+b`会失败。但是对于其他变量，它们可以在运行时更改，因此编译器不会假设设置的值不会更改为有效值。

# objective-c - 在 Objective-C 中检索 word 文档

> ID：13755567
> 
> 赞同：1
> 
> 时间：2012-12-07T01:28:50.517
> 
> 标签：objective-c, web-services, ipad

我想通过 Objective-C 中的 Web 服务调用来检索 Word 文档。

我对这个任务有三个问题：

1.  如何从 Objective-C 中的 web 服务调用中检索 word 文档。（在 web 服务中，我通过数据库调用检索文档，因为 word 文档存储在数据库中）。
2.  检索后如何将其存放在沙箱中？
3.  如何在 Objective-C 中打开 word 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:40:55.650

1.  为了检索文档，我将使用网络库，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)
2.  然后你可以将它存储在你的应用程序文档文件夹中（检查[一下](https://stackoverflow.com/questions/5619719/write-a-file-on-ios)）
3.  您可以使用 iOS 的 Quicklook 功能显示您的文档。您可能需要查看[文档交互编程指南](http://developer.apple.com/library/IOs/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010409-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:33:38.133

1.  像任何其他二进制文件一样：例如 pdf
2.  保存它...[一个例子](https://stackoverflow.com/questions/2206013/save-and-load-data-iphone-sdk)
3.  您可以以二进制形式打开，但很难正确显示，但我相信有文字查看器应用程序，您可以使用它们打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T12:31:10.160

看看 QuickLook.framework。可以读取所有 MS Office 格式。也可以从支持的 AirPrint 打印机进行打印。 [https://developer.apple.com/library/ios/documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/](https://developer.apple.com/library/ios/documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/)

示例：- [http://kratinmobile.com/blog/index.php/document-preview-in-ios-with-quick-look-framework/](http://kratinmobile.com/blog/index.php/document-preview-in-ios-with-quick-look-framework/)

# php - PHP：如何强制方法的属性为整数？

> ID：13755569
> 
> 赞同：1
> 
> 时间：2012-12-07T01:29:28.553
> 
> 标签：php, type-hinting, isnumeric

我目前的方式：

```
class A {
    public function function_b($myint) {
        if (!is_numeric($myint)) return false;

        // code ...
    }
} 
```

我想像这样放弃函数 is_numeric() ：

```
public function function_b(Integer $myint) {
    // code ...
} 
```

它适用于这样的数组：

```
public function function_c(Array $arr) {
    // only executes following code if $arr is an array / instance of Array!
} 
```

**注意**：如果值不是数字（int），函数必须返回 false！我不想投它。

您将如何缩短我当前的代码？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:44:25.953

您不能在 PHP 中固有地强制函数原型中的严格类型，因为它不是严格类型的语言。PHP 是一种弱类型语言，在许多情况下试图违背常规只会伤害你。此外， is_numeric 不**保证**您的值是 int 类型（*对于它的价值*）。

你可以做的是首先分析你为什么认为这种方法是必要的，并决定如何在不产生潜在错误的情况下最好地实现它。

例如，在以下场景中，您的方法需要的是数据库查询的 ID。

```
class MyClass {
    public function getUser($id) {
        if (!is_int($id)) {
            throw new Exception("Invalid argument supplied. Expecting (int), but argument is of type (" . gettype($id) . ").");
        }
        // Otherwise continue
        $db = new PDO($dsn);
        $stmt = $db->prepare("SELECT username FROM users WHERE user_id = ?");
        $stmt->execute(array($id));
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $result;
    }
}

$MyObject = new MyClass;
$result = $MyObject->getUser($_POST['id']);
/* The problem here is $_POST will always be of type string. */ 
```

这应该告诉你的是，在这里强制进行类型检查是没有意义的，因为如果你不管它，PHP 会为你做正确的事情。

您需要问自己的问题不是“*我如何强制严格输入？* ”，而是“*我为什么需要强制严格输入？* ”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:32:03.320

您应该研究类型转换：

*   [http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting](http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)

只需在访问值时使用 (int) 将其类型转换为整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T01:33:12.983

你可以只对它进行类型转换：

```
public function function_b($myint) {
    $myint = (int) $myint;
} 
```

或者更好的是添加一个公共设置器，`class A`每次设置值时都会为您执行此操作：

```
class A
{
    public function setMyInt($myInt)
    {
        $this->myInt = (int) $myInt;
    }
} 
```

-- 更新（基于评论） --

```
class A
{
    public function doSomethingWithAnArray(array $array)
    {
        ....
    }
} 
```

注意方法签名中的关键字数组`doSomethingWithAnArray`，现在如果你不将数组传递给这个函数，PHP 将抛出一个致命错误并停止代码执行。这称为**类型提示**，也可以应用于对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T02:12:16.513

```
function needsInteger($int) {
    if (((int) $int) != $int) return false;
    // ...
} 
```

这里的优点是您仍然可以接受松散类型的参数，但是针对强制转换值的非严格相等性检查将产生可接受的结果。

# c - 在 C 中扩展 int 的符号

> ID：13755571
> 
> 赞同：1
> 
> 时间：2012-12-07T01:29:46.230
> 
> 标签：c

所以我在获取一个 int 字段然后签署扩展它时遇到了一些麻烦。我有一个获取 int 字段的方法。

```
getField(int value, int hi, int lo); 
```

值是我从中获取字段的 int，hi 和 lo 是字段的大小。

所以我可以在 getFieldSignExtended(int value, int hi, int lo) 中调用这个 getField 方法，但是如何进行符号扩展呢？

例如`value = 7, hi = 1, lo = 0`

`getField(7, 1, 0);`返回 3，因为二进制中的 7 是 111，hi 和 lo 取 0 到 1 的字段。

从 getField 返回 3，我得到该值等于 0x0003。

到目前为止，我所拥有的东西在积极方面有效，但在消极方面却大打折扣。当我说“搞砸”时，我的意思是它根本不起作用。因此，如果我尝试在 -1 上使用它，它会显示为大整数而不是负数。

谢谢你的帮助！:]

编辑：对不起，我把自己和你们中的一些人用一个矛盾的陈述混淆了：P。固定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:49:55.200

这里的字里行间有很多阅读。但是，如果`getField(7, 1, 0)`返回 3 并且您需要`getFieldSignExtended(15, 2, 0)`return`-3`和`getFieldSignExtended(3, 2, 0)`to return `+3`，那么这可能就是您所追求的。

这个概念是您将来自原始值的位 hi:lo 的 n 位字段视为 2 的补码。如果 n 位的第一位是 1，则您希望将 n 位字段视为负数。如果 3 位字段的第一位是 0，那么您希望将其视为正数。

```
#include <assert.h>
#include <limits.h>
#include <stdio.h>

extern int getFieldSignExtended(int value, int hi, int lo);

enum { INT_BITS = CHAR_BIT * sizeof(int) };

int getFieldSignExtended(int value, int hi, int lo)
{
    assert(lo >= 0);
    assert(hi > lo);
    assert(hi < INT_BITS - 1);
    int bits = (value >> lo) & ((1 << (hi - lo + 1)) - 1);
    if (bits & (1 << (hi - lo)))
        return(bits | (~0U << (hi - lo)));
    else
        return(bits);
} 
```

这 3 个断言是直截了当的；唯一有争议的是代码拒绝处理第 31 位。如果您使用 hi = 31 和 lo = 0 调用它，则移位 (hi - lo + 1) 太大并且行为未定义。您还会遇到实现定义的右移负数的行为。可以通过采用无符号整数参数而不执行`&`if 操作来解决这些问题`hi - lo + 1 == INT_BITS`。解决问题留给读者作为练习。

赋值`bits`将值右移，并用正确的位数屏蔽它。将`(1 << (hi - lo + 1)) - 1`1 左移比字段中的位数多 1，然后减去 1 以针对字段中的每个位位置生成二进制 1 的字符串。例如，对于 hi = 2，lo = 0，这会将 1 向左移动 3 位，产生二进制 1000；减去 1 得到 0111，因此选择了正确的 3 位。因此，`bits`包含 n 位整数的适当位集。

该`if`测试检查是否设置了 n 位整数的最高有效位。如果未设置符号位，我们只需返回 value `bits`。如果设置了符号位，那么我们需要执行一个棘手的计算——在这个答案的第一稿中是（非常）错误的。假设我们有一个 3 位 = 101 的字段。作为 3 位 2 的补码，表示 -3。我们需要用全 1 将其向左扩展以生成全尺寸`-1`. 的值`~0`全为 1；当它左移一位时`hi - lo`，它会为值的非符号位留下一系列零。如果您向左移动它也可以工作`hi - lo + 1`，但是不需要额外的计算`+ 1`。

我使用这个测试工具来让自己确信代码工作正常。系统的测试输出是严格的（在小数字上）。它确保计算的值与预期值匹配。“详尽的”测试并不是真正详尽的。它只测试一个值，更多地用于观察问题（例如使用 hi = 31 和 lo = 0 在我的机器上给出错误答案 0）和模式。

```
static const struct
{
    int  value;
    int  hi;
    int  lo;
    int  wanted;
} tests[] =
{
    {   0x0F,  1,  0,   -1 },
    {   0x0F,  2,  0,   -1 },
    {   0x0F,  2,  1,   -1 },
    {   0x0F,  3,  1,   -1 },
    {   0x0F,  4,  2,   +3 },
    {   0x0F,  5,  0,  +15 },
    {   0x0F,  5,  1,   +7 },
    {   0x0F,  5,  2,   +3 },
    {   0x0F,  5,  3,   +1 },
    {   0x0F,  5,  4,    0 },
    {   0x03,  2,  0,   +3 },
    {   0xF3,  2,  0,   +3 },
    {   0xF3,  3,  0,   +3 },
    {   0xF3,  4,  0,  -13 },
    {   0xF3,  5,  0,  -13 },
    {   0xF3,  6,  0,  -13 },
    {   0xF3,  7,  0,  -13 },
    {   0xF3,  7,  1,   -7 },
    {   0xF3,  7,  2,   -4 },
    {   0xF3,  7,  3,   -2 },
    {   0xF3,  7,  4,   -1 },
    {   0xF3,  8,  0, 0xF3 },
};
enum { NUM_TESTS = sizeof(tests) / sizeof(tests[0]) };
static const char s_pass[] = "== PASS ==";
static const char s_fail[] = "!! FAIL !!";

static void systematic_test(void)
{
    int fail = 0;
    for (int i = 0; i < NUM_TESTS; i++)
    {
        char const *pf = s_fail;
        int actual = getFieldSignExtended(tests[i].value, tests[i].hi, tests[i].lo);
        if (actual == tests[i].wanted)
            pf = s_pass;
        else
            fail++;
        printf("%s GFSX(%+4d = 0x%.4X, %d, %d) = %+4d = 0x%.8X (wanted %+4d = 0x%.8X)\n",
               pf, tests[i].value, tests[i].value, tests[i].hi, tests[i].lo, actual, actual,
               tests[i].wanted, tests[i].wanted);
    }
    printf("%s\n", (fail == 0) ? s_pass : s_fail);
}

static void exhaustive_test(void)
{
    int value = 0x5FA03CE7;
    for (int i = 1; i < INT_BITS - 1; i++)
    {
        for (int j = 0; j < i; j++)
        {
            int actual = getFieldSignExtended(value, i, j);
            printf("%11sGFSX(%d = 0x%X, %2d, %2d) = %+10d = 0x%.8X\n", "",
                    value, value, i, j, actual, actual);
        }
    }
}

int main(void)
{
    int result1 = getFieldSignExtended(15, 2, 0);
    int result2 = getFieldSignExtended( 3, 2, 0);
    printf("GFSX(15, 2, 0) = %+d = 0x%.8X\n", result1, result1);
    printf("GFSX( 3, 2, 0) = %+d = 0x%.8X\n", result2, result2);

    printf("\nSystematic test\n");
    systematic_test();

    printf("\nExhaustive test\n");
    exhaustive_test();

    return(0);
} 
```

这是穷举测试之前的测试代码的输出，加上穷举测试的一小部分输出：

```
GFSX(15, 2, 0) = -1 = 0xFFFFFFFF
GFSX( 3, 2, 0) = +3 = 0x00000003

Systematic test
== PASS == GFSX( +15 = 0x000F, 1, 0) =   -1 = 0xFFFFFFFF (wanted   -1 = 0xFFFFFFFF)
== PASS == GFSX( +15 = 0x000F, 2, 0) =   -1 = 0xFFFFFFFF (wanted   -1 = 0xFFFFFFFF)
== PASS == GFSX( +15 = 0x000F, 2, 1) =   -1 = 0xFFFFFFFF (wanted   -1 = 0xFFFFFFFF)
== PASS == GFSX( +15 = 0x000F, 3, 1) =   -1 = 0xFFFFFFFF (wanted   -1 = 0xFFFFFFFF)
== PASS == GFSX( +15 = 0x000F, 4, 2) =   +3 = 0x00000003 (wanted   +3 = 0x00000003)
== PASS == GFSX( +15 = 0x000F, 5, 0) =  +15 = 0x0000000F (wanted  +15 = 0x0000000F)
== PASS == GFSX( +15 = 0x000F, 5, 1) =   +7 = 0x00000007 (wanted   +7 = 0x00000007)
== PASS == GFSX( +15 = 0x000F, 5, 2) =   +3 = 0x00000003 (wanted   +3 = 0x00000003)
== PASS == GFSX( +15 = 0x000F, 5, 3) =   +1 = 0x00000001 (wanted   +1 = 0x00000001)
== PASS == GFSX( +15 = 0x000F, 5, 4) =   +0 = 0x00000000 (wanted   +0 = 0x00000000)
== PASS == GFSX(  +3 = 0x0003, 2, 0) =   +3 = 0x00000003 (wanted   +3 = 0x00000003)
== PASS == GFSX(+243 = 0x00F3, 2, 0) =   +3 = 0x00000003 (wanted   +3 = 0x00000003)
== PASS == GFSX(+243 = 0x00F3, 3, 0) =   +3 = 0x00000003 (wanted   +3 = 0x00000003)
== PASS == GFSX(+243 = 0x00F3, 4, 0) =  -13 = 0xFFFFFFF3 (wanted  -13 = 0xFFFFFFF3)
== PASS == GFSX(+243 = 0x00F3, 5, 0) =  -13 = 0xFFFFFFF3 (wanted  -13 = 0xFFFFFFF3)
== PASS == GFSX(+243 = 0x00F3, 6, 0) =  -13 = 0xFFFFFFF3 (wanted  -13 = 0xFFFFFFF3)
== PASS == GFSX(+243 = 0x00F3, 7, 0) =  -13 = 0xFFFFFFF3 (wanted  -13 = 0xFFFFFFF3)
== PASS == GFSX(+243 = 0x00F3, 7, 1) =   -7 = 0xFFFFFFF9 (wanted   -7 = 0xFFFFFFF9)
== PASS == GFSX(+243 = 0x00F3, 7, 2) =   -4 = 0xFFFFFFFC (wanted   -4 = 0xFFFFFFFC)
== PASS == GFSX(+243 = 0x00F3, 7, 3) =   -2 = 0xFFFFFFFE (wanted   -2 = 0xFFFFFFFE)
== PASS == GFSX(+243 = 0x00F3, 7, 4) =   -1 = 0xFFFFFFFF (wanted   -1 = 0xFFFFFFFF)
== PASS == GFSX(+243 = 0x00F3, 8, 0) = +243 = 0x000000F3 (wanted +243 = 0x000000F3)
== PASS ==

Exhaustive test
       GFSX(1604336871 = 0x5FA03CE7,  1,  0) =         -1 = 0xFFFFFFFF
       GFSX(1604336871 = 0x5FA03CE7,  2,  0) =         -1 = 0xFFFFFFFF
       GFSX(1604336871 = 0x5FA03CE7,  2,  1) =         -1 = 0xFFFFFFFF
       GFSX(1604336871 = 0x5FA03CE7,  3,  0) =         +7 = 0x00000007
       GFSX(1604336871 = 0x5FA03CE7,  3,  1) =         +3 = 0x00000003
       GFSX(1604336871 = 0x5FA03CE7,  3,  2) =         +1 = 0x00000001
       GFSX(1604336871 = 0x5FA03CE7,  4,  0) =         +7 = 0x00000007
       GFSX(1604336871 = 0x5FA03CE7,  4,  1) =         +3 = 0x00000003
       GFSX(1604336871 = 0x5FA03CE7,  4,  2) =         +1 = 0x00000001
       GFSX(1604336871 = 0x5FA03CE7,  4,  3) =         +0 = 0x00000000
       GFSX(1604336871 = 0x5FA03CE7,  5,  0) =        -25 = 0xFFFFFFE7
       GFSX(1604336871 = 0x5FA03CE7,  5,  1) =        -13 = 0xFFFFFFF3
       GFSX(1604336871 = 0x5FA03CE7,  5,  2) =         -7 = 0xFFFFFFF9
       GFSX(1604336871 = 0x5FA03CE7,  5,  3) =         -4 = 0xFFFFFFFC
       GFSX(1604336871 = 0x5FA03CE7,  5,  4) =         -2 = 0xFFFFFFFE
       GFSX(1604336871 = 0x5FA03CE7,  6,  0) =        -25 = 0xFFFFFFE7
       GFSX(1604336871 = 0x5FA03CE7,  6,  1) =        -13 = 0xFFFFFFF3
       GFSX(1604336871 = 0x5FA03CE7,  6,  2) =         -7 = 0xFFFFFFF9
       GFSX(1604336871 = 0x5FA03CE7,  6,  3) =         -4 = 0xFFFFFFFC
       GFSX(1604336871 = 0x5FA03CE7,  6,  4) =         -2 = 0xFFFFFFFE
       GFSX(1604336871 = 0x5FA03CE7,  6,  5) =         -1 = 0xFFFFFFFF
...
       GFSX(1604336871 = 0x5FA03CE7, 29, 28) =         +1 = 0x00000001
       GFSX(1604336871 = 0x5FA03CE7, 30,  0) = -543146777 = 0xDFA03CE7
       GFSX(1604336871 = 0x5FA03CE7, 30,  1) = -271573389 = 0xEFD01E73
       GFSX(1604336871 = 0x5FA03CE7, 30,  2) = -135786695 = 0xF7E80F39
       GFSX(1604336871 = 0x5FA03CE7, 30,  3) =  -67893348 = 0xFBF4079C
       GFSX(1604336871 = 0x5FA03CE7, 30,  4) =  -33946674 = 0xFDFA03CE
       GFSX(1604336871 = 0x5FA03CE7, 30,  5) =  -16973337 = 0xFEFD01E7
       GFSX(1604336871 = 0x5FA03CE7, 30,  6) =   -8486669 = 0xFF7E80F3
       GFSX(1604336871 = 0x5FA03CE7, 30,  7) =   -4243335 = 0xFFBF4079
       GFSX(1604336871 = 0x5FA03CE7, 30,  8) =   -2121668 = 0xFFDFA03C
       GFSX(1604336871 = 0x5FA03CE7, 30,  9) =   -1060834 = 0xFFEFD01E
       GFSX(1604336871 = 0x5FA03CE7, 30, 10) =    -530417 = 0xFFF7E80F
       GFSX(1604336871 = 0x5FA03CE7, 30, 11) =    -265209 = 0xFFFBF407
       GFSX(1604336871 = 0x5FA03CE7, 30, 12) =    -132605 = 0xFFFDFA03
       GFSX(1604336871 = 0x5FA03CE7, 30, 13) =     -66303 = 0xFFFEFD01
       GFSX(1604336871 = 0x5FA03CE7, 30, 14) =     -33152 = 0xFFFF7E80
       GFSX(1604336871 = 0x5FA03CE7, 30, 15) =     -16576 = 0xFFFFBF40
       GFSX(1604336871 = 0x5FA03CE7, 30, 16) =      -8288 = 0xFFFFDFA0
       GFSX(1604336871 = 0x5FA03CE7, 30, 17) =      -4144 = 0xFFFFEFD0
       GFSX(1604336871 = 0x5FA03CE7, 30, 18) =      -2072 = 0xFFFFF7E8
       GFSX(1604336871 = 0x5FA03CE7, 30, 19) =      -1036 = 0xFFFFFBF4
       GFSX(1604336871 = 0x5FA03CE7, 30, 20) =       -518 = 0xFFFFFDFA
       GFSX(1604336871 = 0x5FA03CE7, 30, 21) =       -259 = 0xFFFFFEFD
       GFSX(1604336871 = 0x5FA03CE7, 30, 22) =       -130 = 0xFFFFFF7E
       GFSX(1604336871 = 0x5FA03CE7, 30, 23) =        -65 = 0xFFFFFFBF
       GFSX(1604336871 = 0x5FA03CE7, 30, 24) =        -33 = 0xFFFFFFDF
       GFSX(1604336871 = 0x5FA03CE7, 30, 25) =        -17 = 0xFFFFFFEF
       GFSX(1604336871 = 0x5FA03CE7, 30, 26) =         -9 = 0xFFFFFFF7
       GFSX(1604336871 = 0x5FA03CE7, 30, 27) =         -5 = 0xFFFFFFFB
       GFSX(1604336871 = 0x5FA03CE7, 30, 28) =         -3 = 0xFFFFFFFD
       GFSX(1604336871 = 0x5FA03CE7, 30, 29) =         -2 = 0xFFFFFFFE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:40:20.540

您可以采取多种方法。如果您刚刚开始，您可以通过算术计算字段中的位数。因此，例如：

```
if (value %2 >= 1)
{
    // you know that the value has a `1` as the lest significant digit. 
    // if that's one of the digits you're looking for, you can do something like count++ here
}
else
{
    // least significant digit is a '0'
} 
```

接着

```
if (value % 4 >=2)
{
    // you know that the second least significant digit is `1`
    // etc.
} 
```

如果您这样做，您可能希望将它们放入某种循环中。

现在，更好的方法是使用**按位 anding**，如下所示：

```
if (value & 8 != 0)
    // here you know that the fourth least significant digit (the one representing 8) is 1.
    // do a Google search on bitwise anding to get more information. 
```

# crystal-reports - 我的报告是空的

> ID：13755572
> 
> 赞同：0
> 
> 时间：2012-12-07T01:30:05.323
> 
> 标签：crystal-reports, dataset, report, datasource, is-empty

我正在使用 vb net 2005。我创建了一个带有一个表和一个 rpt 报告的 .xsd 数据集。数据集是带有表格 DatosPedido 的 PedidosDataImpresion.xsd。rpt 形式为 pedidoimpreso.rpt

这是我的代码：

```
Dim DatosImpresion As New PedidosDataImpresion
Dim TablaPrincipal As DataTable = DatosImpresion.DatosPedido

I = 0
TablaPrincipal.Rows.Add(1)
TablaPrincipal.Rows(I).Item("razonsocial") = Me.lblfacturacion.Text
TablaPrincipal.Rows(I).Item("calle") = Me.LblDireccion.Text
TablaPrincipal.Rows(I).Item("colonia") = Me.LblColonia.Text
TablaPrincipal.Rows(I).Item("ciudad") = Me.LblCiudad.Text
TablaPrincipal.Rows(I).Item("estado") = Me.LblEdo.Text
TablaPrincipal.Rows(I).Item("cp") = Me.LblEdo.Text
TablaPrincipal.Rows(I).Item("rfc") = Me.LblRfc.Text

PedidoImpreso.SetDataSource(DatosImpresion)
PedidoImpreso.PrintOptions.PrinterName = Impresora
PedidoImpreso.PrintToPrinter(Copias, True, 1, 1) 
```

我想直接打印到打印机，没有reportviewer

报告没有数据。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:51:17.957

你必须使用一些第三方工具来做到这一点。

您可以做的是：在页面加载时制作 HTML 表格填充数据打印表格（使用 jQuery）

如果您想要报告格式，那么您将需要报告查看器来呈现自己。

# php - PHP 重定向慢；花费很长时间

> ID：13755573
> 
> 赞同：2
> 
> 时间：2012-12-07T01:30:08.850
> 
> 标签：php, performance, redirect

在我们的网站上，我们有一些项目编辑页面。当用户单击保存时，表单将发布到同一页面，然后重定向到下一页。出于某种原因，重定向需要很长时间（例如 60 秒）。

我已经在代码中放置了计时措施，我可以告诉你，代码本身的执行时间不会超过 1 秒。

这是我用来重定向的内容：

```
 header("Location: " . $url, true, 307 ); // 307 is temporary redirect 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T01:30:08.850

这是解决问题的方法：

```
 header( 'Content-type: text/html; charset=utf-8' ); // make sure this is set

  header("Location: " . $url, true, 307 ); // 307 is temporary redirect

  echo "<html></html>";  // - Tell the browser there the page is done
  flush();               // - Make sure all buffers are flushed
  ob_flush();            // - Make sure all buffers are flushed
  exit;                  // - Prevent any more output from messing up the redirect 
```

# c - Win 8 上的结构 addrinfoex 中未记录的 ai_flags 值（0x80000000）？

> ID：13755575
> 
> 赞同：1
> 
> 时间：2012-12-07T01:30:15.433
> 
> 标签：c, dns, windows-8, winsock2

有人知道 addrinfoex 结构中的 ai_flags 值吗？MSDN 中没有为 ai_flags 记录值 0x80000000。我在 Windows 8 上得到了这个。我有以下代码：

====================================

```
ADDRINFOEX  hints; 
ADDRINFOEX  *result = NULL; 
ZeroMemory(&hints, sizeof(hints)); 
hints.ai_flags = AI_FQDN | AI_CANONNAME; 
hints.ai_family = AF_UNSPEC; 
hints.ai_socktype = SOCK_STREAM; 
hints.ai_protocol = IPPROTO_TCP; 
GetAddrInfoExW(L"www.google.com", 
                        0, 
                        NS_DNS, 
                        0, 
                        &hints, 
                        &pResult, 
                        0, 0, 0, 0); 
```

====================================

GetAddrInfoExW() 成功但在返回的 pResult 数据结构中，ai_flags 等于 0x80000000。有谁知道0x80000000的含义？为什么它返回 0x80000000？

非常感谢。

# magento - 循环中使用的 Magento 收集过滤器中的意外行为

> ID：13755583
> 
> 赞同：0
> 
> 时间：2012-12-07T01:30:41.583
> 
> 标签：magento

我在集合中看到了一个意想不到的行为，也许有人可以启发我（或者可能是我不了解的一点 PHP）（抱歉这篇文章的长度，但我必须包含示例代码和结果）。

我的目标是编写一份报告，在其中获得订单及其订单商品，然后转到订单的发票和发货数据，并从他们的商品中获取匹配的订单商品数据。我知道所有订单只有一张发票和发货，所以即使 Magento 在订单和发票/发货之间使用 1-M 关系，我也可以像 1-1 一样利用它

我知道这些项目都是使用 order_item_id 字段相关的，所以我尝试编写一个使用以下调用的函数 -

```
$invoiceItem = $order
  ->getInvoiceCollection()
  ->getFirstItem()
  ->getItemsCollection()
  ->addFieldToFilter('order_item_id', $orderItem->getItemId())
  ->getFirstItem(); 
```

但这不是我预期的结果，我看到的是无论过滤器中使用的订单项目 ID 是什么，都返回了相同的发票项目。

因此，为了尝试理解问题，我编写了以下小程序来查看查询是如何创建的。

```
<?php

require dirname(__FILE__).'/../app/Mage.php';    
umask(0);
Mage::app('default');

$orders = Mage::getResourceModel('sales/order_collection')
       ->addAttributeToSelect('*')
       ->addAttributeToFilter('state', 'processing') 
       ->addAttributeToSort('created_at', 'desc')
       ->addAttributeToSort('status', 'asc')
       ->load();

foreach ($orders as $order) {

    echo "\ngetting data for order id ". $order->getId();

    $items = $order->getAllItems();
    $invoice = $order->getInvoiceCollection()->getFirstItem();

    foreach ($items as $orderItem) {

        echo "\n\ngetting data for order item id ". $orderItem->getItemId();    
        $invoiceItems = $order
                   ->getInvoiceCollection()
                   ->getFirstItem()
                   ->getItemsCollection()
                   ->addFieldToFilter('order_item_id', $orderItem->getItemId());    
        echo "\n".$invoiceItems->getSelect();    
    }
    die;  //just quit after one iteration
} 
```

该程序的输出如下 -

```
getting data for order id 7692

getting data for order item id 20870
SELECT `main_table`.* FROM `sales_flat_invoice_item` AS `main_table` WHERE (parent_id = '7623') AND (order_item_id = '20870')

getting data for order item id 20871
SELECT `main_table`.* FROM `sales_flat_invoice_item` AS `main_table` WHERE (parent_id = '7623') AND (order_item_id = '20870') AND (order_item_id = '20871')

getting data for order item id 20872
SELECT `main_table`.* FROM `sales_flat_invoice_item` AS `main_table` WHERE (parent_id = '7623') AND (order_item_id = '20870') AND (order_item_id = '20871') AND (order_item_id = '20872') 
```

如您所见，每次通过循环时，都会为我过滤的每个项目 ID 添加另一个“AND（order_item_id =”。我认为每次通过循环，我都会从使用 $order->getInvoiceCollection()。

那么，谁能告诉我我的示例代码出了什么问题，并教育我正确的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:51:08.647

*关于您的业务问题：需要更多信息。目标是生成一个包含每个都知道发票和发货详细信息的订单项目对象的集合吗？似乎有渲染问题被推入建模问题。*

关于 select 语句问题：[Varien 集合](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Data/Collection.php)有一个优化，可以防止它们多次访问存储后端。通过将属性设置为 ，可以在[DB 集合](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Data/Collection/Db.php)实例中实现此标准行为。`_isCollectionLoaded``true`

在您的情况下，发票收集实例是通过[*存储在受保护属性中*](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Order.php#L1869)的订单实例创建的，并[立即`load()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Order.php#L1874)通过`IteratorAggregate`（通过调用）进行[编辑](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Order.php#L1874)`foreach`。因为您在每次迭代中使用相同的订单对象实例，所以您正在处理这个加载的发票集合实例，并且在`addFieldToFilter(/* next order id */)`每次迭代中有效地调用，从而导致不断扩展的`WHERE`子句。这个特定的优化可以很容易地通过调用来解决`$order->reset()`。不过，这让我们回到了突出的问题，即需要更好地理解目标并（可能）使用自定义集合或操作集合以加入您需要的特定数据。

# c# - XNA 中的输入/输出控制台窗口

> ID：13755585
> 
> 赞同：1
> 
> 时间：2012-12-07T01:30:44.233
> 
> 标签：c#, reflection, io, xna

我目前正在 XNA 中制作一个简单的游戏，但是在测试各个方面变得有点棘手的时候，特别是当你必须等到你有 1000 分才能看到你的动画是否正确播放等时。当然我可以编辑在我启动之前代码中的起始变量，但我最近对尝试实现一个控制台样式窗口感兴趣，该窗口可以打印出值并在运行时接受输入以更改公共变量。

我知道 VS 具有实现类似功能的即时窗口，但我更希望我的是游戏的实际部分，目的是用户将来可能无法访问它。

在环顾一段时间后，我还没有找到答案的一些关键问题是：

*   我将如何支持自由文本输入
*   我将如何在运行时访问变量
*   我将如何编辑这些变量

我还阅读了有关使用 Windows 窗体 aps（和部分反射）中的属性网格的信息，这看起来可以简化很多事情，但我不确定如何在我的 XNA 游戏窗口中运行它或者我将如何得到它不要显得格格不入（因为 is 的视觉方面似乎仅针对开发时间查看）。

总而言之，我对如何处理这项任务的任何建议都持开放态度，因为目前我不确定从哪里开始。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:43:57.777

我以前用过这个，效果很好。

[http://xnacc.codeplex.com/](http://xnacc.codeplex.com/)

它需要一些编程才能将其设置为与您的游戏一起使用，但如果这是您感兴趣的事情，可能值得付出努力。

# java - 使用 JSP 时“无法解析导入”

> ID：13755588
> 
> 赞同：9
> 
> 时间：2012-12-07T01:31:11.360
> 
> 标签：java, class, jsp, import, jdeveloper

我正在尝试从 JSP 页面调用 Java 类。我已经使用 JDeveloper 创建了该项目。

我收到一条错误消息，提示“无法解决导入”。我已经在WEB-INF，根文件夹中添加了Class文件，并尝试编译，但它仍然显示相同的错误。

下面是代码：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
    </head>
    <body>
        <p>  
            <%@ page import="java.util.*"%>
            <%@ page import="Class1"%>
            <% 
                Class1 tc=new Class1("test");
                out.print(tc.str);
            %>
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T01:36:30.460

您应该为您的班级提供完全限定的名称。(packagename.classname) 像：

```
 <%@ page import="pkgname.Class1"%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:34:23.537

页面指​​令通常放置在 JSP 的顶部。我还假设`Class1`它在默认包中，因为它没有完全限定的名称。如果`Class1`在包中，则需要在导入中的名称前加上包名称。

```
<%@ page import="java.util.*" %>
<%@ page import="Class1" %>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
</head>
<body>
    <p>
<%
Class1 tc=new Class1("test");
out.print(tc.str);
  %>
    </p>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T15:27:40.997

首先，`/WEB-INF/src`保存您的 java 源代码的位置是否错误（因为`WEB-INF`文件夹内容已部署到您的服务器）；您应该将它们移出`/WEB-INF`（例如，移到项目根目录中的 /src 中）

无论哪种方式，您都需要告诉 Eclipse 您的源代码在哪里以及您希望在哪里构建类。它在项目属性对话框中完成：

1.  在 Eclipse 中右键单击您的项目，选择 Properties

2.  点击左侧的Java Build path

3.  单击右侧的源选项卡

4.  单击添加文件夹按钮并添加您的源文件夹（/WEB-INF/src 或您将其移动到的任何位置）

5.  确保在下面选中允许源文件夹的输出文件夹

6.  在新添加的源路径下选择输出文件夹并将其指向 /WEB-INF/classes 或您选择的其他位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-08T10:28:07.910

您不应该重复指令标签，如`<%@ page import ......%>`. 但是您可以重复导入属性值本身中的值， `<%@ page import="java.util.*, java.io.*"%>` 并确保将完全限定名称导入

# php - PHP：正则表达式替换奇怪的结果

> ID：13755590
> 
> 赞同：1
> 
> 时间：2012-12-07T01:31:27.383
> 
> 标签：php, regex

我有一个坏词列表，其中一个是“SA”我所有的词都保存在一个数组中，我循环遍历数组并进行替换。SA 这个词替换了我不想替换的东西，我只需要它来替换 SA 作为一个词本身。例如“这个 SA 很糟糕”。应该变成“这很糟糕”。但是现在当我在其中包含（例如）SEAS 的字符串上运行它时，它将替换它......不知道为什么......

ps: if then 检查是因为如果字符串 $v 正好是 badword，它不应该被删除。正则表达式中的 \b 单词指示符不应该使单词完全匹配吗？

ps：我只想删除完整的单词，而不是单词的一部分。如果我在坏名单中有苹果，但有人写了苹果，它不应该被替换。

```
foreach ($this->badwordArr as $badword) {
    if (strtoupper($v) == strtoupper($badword)) {

        // no replace because its the only word
        $data[$key] = $v;

    } else {

        $pattern = "/\b$badword\b/i";
        $v = preg_replace($pattern, " ", $v);
    }       
} 
```

我的正则表达式模式有什么问题？！？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T01:33:17.467

点是表示任何字符的正则表达式中的元字符。你需要逃避它：

```
S\.A\. 
```

为避免修改整个列表，您可以使用：

```
$badword_escaped = preg_quote($badword);
$pattern = "/\b$badword_escaped\b/i"; 
```

# java - 遍历 ArrayList 时并发修改异常

> ID：13755592
> 
> 赞同：0
> 
> 时间：2012-12-07T01:31:52.970
> 
> 标签：java, arraylist, concurrentmodification

当我使用 temp = iterator.next() 时，排序方法会导致并发修改错误。你能帮我解决并发修改错误吗？我为整个班级提供了代码，但我只是在尝试完成排序方法。在此先感谢您的帮助。

我必须对arraylist 中的所有数组进行排序。

```
 package HashSet;

            import java.io.InputStream;
            import java.util.ArrayList;
            import java.util.Collections;
            import java.util.ListIterator;
        import java.util.Scanner;

        public class PhoneBook {
            int capacity = 10;
            private ArrayList<PhoneBookEntry>[] buckets;

            public PhoneBook() {
                this(10);
                load();
            }

            public PhoneBook(int size) {
                capacity = size;
                buckets = new ArrayList[size];
                for (int i = 0; i < buckets.length; i++)
                    buckets[i] = new ArrayList<PhoneBookEntry>();
            }

            public int getSize() {
                int tot = 0;
                for (ArrayList<PhoneBookEntry> x : buckets)
                    tot += x.size();
                return tot;
            }

            public boolean add(PhoneBookEntry entry) {
                if (contains(entry))
                    return false;
                int x = Math.abs(entry.hashCode());
                buckets[x % buckets.length].add(entry);
                return true;
            }

            public void load() {
                InputStream is = getClass().getClassLoader().getResourceAsStream(
                        "phone.txt");
                Scanner scan = new Scanner(is);
                while (scan.hasNext())
                    add(new PhoneBookEntry(scan.next(), scan.nextInt()));
                scan.close();
            }

            public void bucketSize() {
                for (int i = 0; i < buckets.length; i++)
                    System.out.println(i + "    " + buckets[i].size());
            }

            public boolean contains(PhoneBookEntry word) {
                int x = Math.abs(word.hashCode());
                return buckets[x % buckets.length].contains(word);
            }

            public int getCapacity() {
                return capacity;
            }

            public int getLongestList() {
                int numb = 0;
                for (ArrayList<PhoneBookEntry> x : buckets)
                    if (x.size() > numb)
                        numb = x.size();
                return numb;
            }

            public void display() {
                for (ArrayList<PhoneBookEntry> x : buckets)
                    System.out.println(x);
            }

            public int getNumberOfNulls() {
                int numb = 0;
                for (ArrayList<PhoneBookEntry> x : buckets)
                    if (x.size() == 0)
                        numb++;
                return numb;
            }

            public String lookup(String name) {
                String numb = name + "'s number not found";
                for (ArrayList<PhoneBookEntry> x : buckets)
                    for (int i = 0; i < x.size(); i++)
                        if (x.get(i).getN().equals(name))
                            numb = name + "'s" + " number is " + x.get(i).getNr();
                return numb;
            }

            public int internalLookUp(String name) {
                int numb = 0;
                for (ArrayList<PhoneBookEntry> x : buckets)
                    for (int i = 0; i < x.size(); i++)
                        if (x.get(i).getN().equals(name))
                            numb = x.get(i).getNr();
                return numb;
            }

            public void sort() {
                String temp = "";
                ArrayList<String> list = new ArrayList<String>();
                ListIterator<String> iterator = list.listIterator();
                final ArrayList<PhoneBookEntry>[] data = buckets.clone();
                for (ArrayList<PhoneBookEntry> x : buckets) {
                    for (int i = 0; i < x.size(); i++) {
                        list.add(x.get(i).getN());
                    }
                    Collections.sort(list);
                    for (int b = 0; b < x.size(); b++) {
                        temp = iterator.next(); //error line
                        x.get(b).setN(temp);
                        x.get(b).setNr(internalLookUp(temp));
                    }
                }
            }

            public static void main(String[] args) {
                PhoneBook phone = new PhoneBook();
                phone.display();
                System.out.println();
                System.out.println("Capacity is " + phone.getCapacity());
                System.out.println();
                System.out.println("Size is " + phone.getSize());
                System.out.println();
                System.out.println("Get longest list " + phone.getLongestList());
                System.out.println();
                System.out.println("Number of Nulls " + phone.getNumberOfNulls());
                System.out.println();
                System.out.println(phone.lookup("Fish"));
                phone.sort();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:37:23.240

看起来您的问题是您正在为列表创建迭代器，然后修改列表（添加 + 排序），然后尝试使用迭代器。

如果您在此之后创建了迭代器，它应该可以工作。

例如。

```
 for (ArrayList<PhoneBookEntry> x : buckets) {
                for (int i = 0; i < x.size(); i++) {
                    list.add(x.get(i).getN());
                }
                Collections.sort(list);
                ListIterator<String> iterator = list.listIterator(); // Iterator created here
                for (int b = 0; b < x.size(); b++) {
                    temp = iterator.next(); //error line
                    x.get(b).setN(temp);
                    x.get(b).setNr(internalLookUp(temp));
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:37:24.563

错误是您在添加列表时迭代*列表。*你不应该那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:53:12.823

这是`ConcurrentModificationException`.

[http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)

> if a thread modifies a collection directly while it is iterating over the collection with a fail-fast iterator, the iterator will throw this exception.

As other posters have said, you should do all sorting and adding before or after using your iterator. You **can** remove an element during iteration, but you must use `Iterator.remove()` to prevent getting the same exception again.

# c++ - 将文件读入结构（C++）

> ID：13755598
> 
> 赞同：3
> 
> 时间：2012-12-07T01:32:40.500
> 
> 标签：c++, data-structures, vector

我对 C++ 非常陌生，我想将文本文件读入结构。文本文件的第一行有一个 double，之后的行作为礼物名称（愿望）存在。我创建了一个结构体 Wishlist，它以双精度和愿望向量的形式存在。所以我做了以下事情：

```
#include <iostream>
#include <fstream>
#include <vector>
#include <string>

using namespace std;

struct Gift
{
    double price;
    string name;
};

typedef vector<Gift> Giftstore;
typedef vector<string> Wishes;

int size(Giftstore& g) {return static_cast<int>(g.size());}

int size(Wishes& w) {return static_cast<int>(w.size());}

struct Wishlist
{
    double budget;
    Wishes wishes;
};

void reading_wishlist(ifstream& file, Wishlist& wish_list)
{
    if (file)
    {
        double money;

        file>>money;
        wish_list.budget<<money;
    }

    while(file)
    {
        string name;
        getline(file, name)
        wish_list.wishes.push_back(name);
    }

    file.close();
};

void print(Wishlist wish_list)
{
    cout<<"Budget: "<<wish_list.budget<<endl;
    cout<<"Wishes: "<<endl;

    for(int i=0; i<size(wish_list.wishes()); i++)
    {
        cout<<wish_list.wishes[i]<<endl;
    }
};

int main () {

  ifstream file;
  string filename;
  cout<<"Give a wishlist file: ";
  cin>>filename;

  file.open(filename)
  reading_wishlist(filename, wish_list);
  print(wish_list)

  return 0;
} 
```

当然，在尝试构建和运行它时，我再次赢得了一些错误奖励！第一个是说：（参考：wish_list.budget<

'double' 和 'double' 类型的无效操作数对二元运算符<<

这是什么意思？我是否必须重新定义运算符 << ？或者我可以将双精度读为 Cstring，然后将其更改为双精度吗？

处理这个问题的最佳方法是什么？更好：如何从文件中读取不同的类型？由于我还必须将文件读入结构，Giftstore，其中文本文件将由每行的双精度名称和礼物名称组成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T01:34:34.847

错误来自`reading_wishlist`函数中的这一行

`wish_list.budget<<money;`

您不能使用`<<`带双精度的运算符作为左侧（此处为 WishList::budget）。
你的意思是

`wish_list.budget = money;`

# c# - 如何使用 C# 从我的邮件服务器上的特定电子邮件地址获取电子邮件

> ID：13755601
> 
> 赞同：0
> 
> 时间：2012-12-07T01:32:51.363
> 
> 标签：c#, .net, email, fetch, mail-server

我使用 hmail + roundcube + windows server 2008 - r2 为自己创建了一个邮件服务器，安装在 vps 上！
他们的一切都很好，现在我想从 hmail 中创建的特定电子邮件地址获取电子邮件！
我怎样才能阅读所有这些收件箱电子邮件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:42:11.667

我建议使用与本文中介绍的类似的 IMAP 库：http: [//www.codeproject.com/Articles/8008/IMAP-Client-library-using-C](http://www.codeproject.com/Articles/8008/IMAP-Client-library-using-C)。使用 IMAP，您的代码将简单地登录到您的服务器，以类似于邮件客户端的方式并能够访问邮箱和邮件。这个特定的库将允许您将邮件消息作为 XML 有效负载返回以供您处理。

# javascript - 在网站上加载外部页面的最佳实践

> ID：13755602
> 
> 赞同：3
> 
> 时间：2012-12-07T01:32:52.983
> 
> 标签：javascript, jquery, html, iframe

我正在尝试在我的网站上加载外部页面，以在它们上方显示一个浮动 div，其中包含有关页面的一些信息，基本上就像您单击图像结果时的 Google 图片一样。

我试图通过在 iframe 中加载外部页面来实现这一点，但是许多网站似乎并不喜欢这样。

在我的网页上加载外部页面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:53:47.397

你可以看看这个问题：[加载外部网站的内容](https://stackoverflow.com/questions/6326297/load-external-sites-content)
无论如何，iframe 是这项工作的标准，所以我建议你这样做，但你也可以尝试：

## PHP

```
$site = "http://stackoverflow.com";
echo $file_get_contents($site); 
```

## 阿贾克斯

您可以按照此问题中的建议使用[跨域 Ajax 请求：](http://www.peachpit.com/blogs/blog.aspx?uk=Performing-Cross-Domain-Ajax-Requests) [Load external website into my own website through ajax](https://stackoverflow.com/questions/4719866/load-external-website-into-my-own-website-through-ajax)另请参阅：[AJAX cross domain call](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)

## JavaScript 插件

[ColorBox](http://www.jacklmoore.com/colorbox)（如前所述）
[GreyBox](http://orangoo.com/labs/GreyBox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:36:10.547

我相信我的框架是标准，你能给我们一些不喜欢被加载到 iframe 中的网站的例子吗？据我所知，网站甚至不应该知道这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:37:44.230

使用 iframe查看[颜色框！](http://www.jacklmoore.com/colorbox)您可能希望在“弹出窗口”中显示页面，例如 google 的图像结果。

-祝您愉快！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T01:48:17.400

我认为框架是要走的路（在谷歌图片中，页面偶尔也会跳出框架）。如其他答案中所述，有一些插件可以帮助您。

在大多数浏览器中，您无法使用 javascript 读取外部页面，因此我认为您的替代方案仅限于涉及从服务器加载页面的方法，这似乎很麻烦。如果你坚持，我想你可以从技术上从你的服务器请求页面并将屏幕截图的页面发送给你的客户......

# .net - 为客户端和服务器共享 WCF 合同

> ID：13755604
> 
> 赞同：3
> 
> 时间：2012-12-07T01:32:58.810
> 
> 标签：.net, wcf, version-control, datacontract

有 2 个团队在开发一个产品。一个团队正在开发作为 WCF 服务公开的服务器端逻辑，另一个团队正在实现前端（ASP.NET MVC 网站）。在这两个团队之间共享服务 API 的正确解决方案是什么？通过 API，我的意思是一个 Web 服务接口 + 一堆 DTO 类。我们使用 git 和 TeamCity 进行持续集成。服务和前端是独立开发和部署的。

基于此，我看到的选项是：

1.  将所有“接口”的东西放到一个单独的项目中，并通过 git 模块共享它。客户端和服务器都将共享代码。
2.  将所有“接口”内容放入一个单独的项目中，并将其发布到私有 NuGet 存储库。客户端和服务器都将引用唯一的公共程序集。
3.  将客户端和服务器都放在单个 VS 解决方案中，并从字面上共享程序集。

选项 3 感觉是最简单的方法，易于实施和理解，但我对获得更大解决方案的整个想法并不感到兴奋。选项 1 和 2 感觉差不多，但我更喜欢选项 2。

您认为这里有什么更好的方法？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:25:38.790

我们使用选项 4 - 客户端和服务器位于不同的解决方案中，但两个解决方案都包含相同的 WCF 合同项目（仅包含`[DataContract]`和`[ServiceContract]`定义）并使用项目引用而不是程序集引用来引用它。听起来可能很有趣，但效果很好。

两种解决方案都可以单独构建，并且它们都获得相同的 DLL，因为无论它们构建的顺序如何，第二个构建都不会重新编译 DLL，因为它已经是最新的。

在我看来，这样做的主要优点是，当有人对合同项目进行源代码更改时，客户端和服务器代码都可以立即使用更改，而无需“刷新”任何内容。*这消除了诸如“我确实*做了那个改变”、“不，你没有”、“是的，我做了”、“*我*看不到”等论点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:01:39.213

We do store our common code in a separate solution. It produces .dll's which are added as a simple assembly references to multiple other projects which depend on them.

All builds are defined in nant files, and we do got some .bat files which run the builds in appropriate order.

When You just want to build the project from VS, the dependent .dll most probably is already built. If You want to be 100% You got everything is built with latest changes, You run those bat scripts which will trigger nant builds and rebuild everything.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:14:42.023

在我的项目中，我们使用了与您在选项 1 共享代码中描述的类似方式

# java - 使用android API的线程中的onDraw（Canvas canvas）

> ID：13755609
> 
> 赞同：0
> 
> 时间：2012-12-07T01:34:02.790
> 
> 标签：java, android

为什么这不起作用？它按应有的方式打印位置，但不会在屏幕上移动图像？我正在使用模拟器。

我认为图像应该四处移动，但即使 x 和 y 值发生变化，它也会保持在同一个地方。我认为问题可能是我调用 onDraw(canvas) 时使用的画布。我可以对这个画布做些什么来使它工作（如果画布是问题）？

如果这还不够详细，请告诉我。下面的代码；

```
 GameView.java

  package com.example.game;

  import android.content.Context;
  import android.graphics.Bitmap;
  import android.graphics.BitmapFactory;
  import android.graphics.Canvas;
  import android.graphics.Color;
  import android.view.View;

  public class GameView extends View implements Runnable{
Thread gameLoop = new Thread(this);
boolean running = false;
int x = 10;
int y = 10;
Canvas canvas = new Canvas();

private Bitmap bmp;
public GameView(Context context) {
    super(context);
    bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
}

  @Override
public void onDraw(Canvas canvas) { 
    canvas.drawColor(Color.BLACK);  
    canvas.drawBitmap(bmp, x, y, null);
    System.out.println(x);
    if(x < 100) {
        x+=10;
    }

    if(x >= 99 && y < 400) {
        y+=10;
    }

    if(y > 350 && x >= 99) {
        x = 10;
        y = 10;
    }
  }

public void start() {
    if(!running) {
        running = true;
        gameLoop.start();
    }
}

public void stop() {
    if(running) {
        running = false;
    }
}

  @Override
public void run() {
while(running) {
    try{
    onDraw(canvas);
    Thread.sleep(1000);
    }catch(Exception exc) {System.err.println("error sleep interup");}
}

}

  }

  Main.java

     package com.example.game;

  import android.app.Activity;
  import android.os.Bundle;

  public class Main extends Activity {

GameView gv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    gv = new GameView(this);
    setContentView(gv);

    gv.start();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:49:34.190

计算完 x 和 y 坐标后，应将对象放回画布上。

```
public void onDraw(Canvas canvas) { 
    canvas.drawColor(Color.BLACK);  
    System.out.println(x);
    if(x < 100) {
        x+=10;
    }

    if(x >= 99 && y < 400) {
        y+=10;
    }

    if(y > 350 && x >= 99) {
        x = 10;
        y = 10;
    }
    canvas.drawBitmap(bmp, x, y, null);
  } 
```

# android - 在 Android 中使用 Rest Template 调用 API（BEGIN_ARRAY 但为 BEGIN_OBJECT）

> ID：13755610
> 
> 赞同：0
> 
> 时间：2012-12-07T01:34:04.613
> 
> 标签：android, json, spring, parsing

**例外：**

```
**org.springframework.http.converter.HttpMessageNotReadableExeption:
Could not read JSON:java.lang.IllegalStateExeption:
Exepted BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2;
nested exception in com.google.gson.JsonSyntaxException:java** 
```

**JSON：**

```
{
    "objects": [
        {
            "id": "1",
            "category": "category1"
        },
        {
            "id": "2",
            "category": "category2"
        }
    ]
} 
```

**API调用：**

```
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAccept(Collections.singletonList(new MediaType("application", "json")));

HttpEntity << ? > requestEntity = new HttpEntity < Object > (requestHeaders);
GsonHttpMessageConverter messageConverter = new GsonHttpMessageConverter();
List < HttpMessageConverter << ? >> messageConverters = new ArrayList < HttpMessageConverter << ? >> ();

messageConverters.add(messageConverter);
RestTemplate restTemplate = new RestTemplate();

restTemplate.getMessageConverters().add(messageConverter);
restTemplate.getMessageConverters().add(new org.springframework.http.converter.json.GsonHttpMessageConverter());

ResponseEntity < Category[] > responseEntity = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Category[].class);
Category[] response = responseEntity.getBody(); 
```

**型号类：**

```
public class Category {

     private Integer id;
     private String category;

     public Category() {}

     public Integer getId() {
         return id;
     }
     public void setId(Integer newId) {
         this.id = newId;
     }

     public String getCategory() {
         return category;
     }

     public void setCategory(String category) {
         this.category = category;
     }
 } 
```

**日志猫：**

```
12-07 02:55:21.123: E/Trace(1043): error opening trace file: No such file or directory (2)
12-07 02:55:22.693: D/libEGL(1043): loaded /system/lib/egl/libEGL_emulation.so
12-07 02:55:22.702: D/(1043): HostConnection::get() New Host Connection established 0x2a0d9c80, tid 1043
12-07 02:55:22.723: D/libEGL(1043): loaded /system/lib/egl/libGLESv1_CM_emulation.so
12-07 02:55:22.754: D/libEGL(1043): loaded /system/lib/egl/libGLESv2_emulation.so
12-07 02:55:22.903: W/EGL_emulation(1043): eglSurfaceAttrib not implemented
12-07 02:55:22.963: D/OpenGLRenderer(1043): Enabling debug mode 0
12-07 02:55:23.363: D/dalvikvm(1043): GC_CONCURRENT freed 231K, 6% free 6196K/6535K, paused 76ms+41ms, total 284ms
12-07 02:57:16.873: W/EGL_emulation(1043): eglSurfaceAttrib not implemented 12-07 02:57:20.872: D/dalvikvm(1043): null clazz in OP_INSTANCE_OF, single-stepping 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:21:00.437

试试这个，所以你的结果是一个数组，而不是一个 json 对象。

```
[
    {
        "id": "1",
        "kategorija": "kategorija1"
    },
    {
        "id": "2",
        "kategorija": "kategorija2"
    }
] 
```

这样，您将收到一个 json 对象数组，而不是带有数组的 json 对象。

# git - 文件未添加到 git

> ID：13755613
> 
> 赞同：1
> 
> 时间：2012-12-07T01:34:25.763
> 
> 标签：git

所以我的 git 文件夹中有一个文件不会进入 git，它不在忽略列表或任何东西中，我已经提交和推送了很多次，现在才注意到它没有被添加。有没有办法手动添加这个文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T01:42:10.273

`git add .`将添加当前目录和任何子目录中的所有文件。我想你也可以这样做`git add .\relative\path\to\file`。如果文件仍然拒绝，请强制更改（在文件中的某处添加新行，它不会伤害任何东西）并重试。有时 git 运行的 diff 不会检测到文件已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:32:53.283

你有机会在 Windows 上工作。前几天我有个案子有档案

存根.c

在同一目录中所以在 Windows 中，文件 stub.c 始终处于修改状态，无论我做什么，我都无法提交我的更改。

所以去了Unix，完全没有问题（文件系统区分大小写）删除了Stub.c，一切都像以前一样工作。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:00:25.177

正如[Op De Cirkel](https://stackoverflow.com/users/742469/op-de-cirkel) [所说](https://stackoverflow.com/questions/13755613/file-not-being-added-to-git/13761755#comment18908862_13755613)：您不能将空文件夹添加到 Git 存储库，因为 Git 只能跟踪文件。

如果您出于某些原因需要此文件夹，请继续并在那里创建一个空文件：

```
touch ./myemptyfolder/empty.txt 
```

完成此操作后，您将能够

```
git add ./myemptyfolder 
```

到你的回购。

# tortoisesvn - SVN - 在提交主干时提交外部

> ID：13755618
> 
> 赞同：3
> 
> 时间：2012-12-07T01:34:52.197
> 
> 标签：tortoisesvn, svn-externals

简短而甜蜜：

我有一个带有外部的项目，它允许我在一个操作中提交对该外部文件的更改以及对主干线的更改：

![在此处输入图像描述](../Images/74b78f4064b4b29449eac1babe67a008.png)

我有另一个外部项目，它*不允许*我在主干旁边提交更改：

![在此处输入图像描述](../Images/9c6ab11816226e3434b917accfcd5e23.png)

最明显的区别是第二个外部被检出到一个复合目录，但除此之外，在我看来，我找不到阻止 SVN 将所有内容提交在一起的区别。

这里发生了什么？显然，我希望能够在一次操作中提交对外部的更改以及对主干的更改。在第二种情况下，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:03:45.337

答案原来是复合目录。出于某种原因，签出到根项目下的子文件夹的外部文件，例如“SharedLib”，可以提交更改，无论更改实际上有多深。不能签出到“Externals/SharedLib”之类的文件夹结构的外部文件。这也意味着从各种来源签出到单个子目录的外部文件（以避免在只需要一个库时必须获取整个外部文件）将不允许提交。

我会凑合的。现在我知道这是一个问题，当我想实际使用它们时，我将调整外部设置的方式，而不仅仅是让它们在身边。

# c# - WebClient 不支持并发 I/O 操作。

> ID：13755623
> 
> 赞同：3
> 
> 时间：2012-12-07T01:35:44.407
> 
> 标签：c#, windows-phone-7

如果用户单击某个按钮，我正在使用 WebClient 的 DownloadStringAsync 方法下载 html 页面。如果他们想在当前操作完成之前停止当前操作并开始新的操作，我调用 CancelAsync 方法并将 WebClient 对象设置为 null。在第二个按钮的事件处理程序中，我还重新初始化了 WebClient 对象并最终尝试下载新内容。WebClient 对象是一个全局变量。我得到的错误是：

```
WebClient does not support concurrent I/O operations. 
```

有没有办法强制 WebClient 取消其当前操作并开始新的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:04:57.987

这似乎是您尝试在第一次下载完成之前下载第二个文件 - 使用相同的 WebClient 实例。创建 WebClient 的新实例肯定可以解决该问题。CancelAsync() 尝试取消正在进行的下载，但它可能仍在运行一小段时间。下载完成/取消后，将引发 DownloadStringCompleted 事件处理程序，允许您使用相同的 WebClient 实例开始新的下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:58:29.353

您看到的错误听起来更像是在尝试跨线程使用 WebClient ，这是不允许的。换句话说，WebClient 必须在最终调用 DownloadStringAsync 的同一线程上创建。说得通？你需要重新考虑你的设计。如果您真的想保持 WebClient 的实例可全局访问，您可能会考虑使用 ThreadLocalAttribute。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T07:46:08.260

您可以编写一个 WebClient 类，并且可以使用不同的异步请求在循环中调用它。作为，

```
 WebClient client = new WebClient();
    try
    {
        client.DownloadStringCompleted += (object newSender, DownloadStringCompletedEventArgs e) =>
            {
                Dispatcher.BeginInvoke(() =>
                {
                    try
                    {
                        var response = e.Result;
                        // your response logic.
                    }
                    catch (Exception)
                    {
                        MessageBox.Show("Problem occured");
                    }
                });
            };
    }
    catch
    {
        MessageBox.Show("Problem occured");
    }
    finally
    {
        if (userHasCanceled)
            client.DownloadStringAsync(new Uri("xyz"));
    }

    client.DownloadStringAsync(new Uri("abc")); 
```

所以当你调用`client.CancelAsyn()`它时可能会抛出一个`exception`，它在**try-catch块中处理，最后你可以在****finally**块中调用一个新的异步请求。你也可以把 c​​heck in **finally**块来确认用户是否有`canceled`操作，如果`yes`然后调用新的异步请求`else`什么也不做。

我希望这就是你要找的。

# html - umbraco 富文本编辑器跳过 UI css

> ID：13755625
> 
> 赞同：1
> 
> 时间：2012-12-07T01:35:57.703
> 
> 标签：html, css, umbraco, rich-text-editor

我正在尝试使用 umbraco 的富文本编辑器......在 html 区域我放了类似的东西

```
<ui id="col">
  <li>mycontent</li>
</ui> 
```

现在，当我尝试保存它时......它会跳过我的 CSS 并将我的代码转换为

```
<ui>
  <li>mycontent</li>
</ui> 
```

为什么 umbraco 不保存我的 CSS id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:42:02.830

我相信罪魁祸首是 tinymce 编辑器。查看此链接以了解可能有帮助的解决方法：http: [//our.umbraco.org/wiki/how-tos/customizing-the-wysiwyg-rich-text-editor- (tinymce)/allow-any-markup-in- the-tinymce-editor](http://our.umbraco.org/wiki/how-tos/customizing-the-wysiwyg-rich-text-editor-(tinymce)/allow-any-markup-in-the-tinymce-editor)

# c - 未定义的行为：尝试访问函数调用的结果时

> ID：13755628
> 
> 赞同：8
> 
> 时间：2012-12-07T01:36:22.080
> 
> 标签：c, c99, undefined-behavior, function-calls

以下编译并打印“字符串”作为输出。

```
#include <stdio.h>

struct S { int x; char c[7]; };

struct S bar() {
    struct S s = {42, "string"};
    return s;
}

int main()
{
    printf("%s", bar().c);
} 
```

显然，这似乎调用了一个未定义的行为，根据

> C99 6.5.2.2/5 如果尝试修改函数调用的结果或在下一个序列点之后访问它，则行为未定义。

我不明白它在哪里说“下一个序列点”。这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T02:03:22.187

你遇到了语言的一个微妙角落。

在大多数情况下，数组类型的表达式会隐式转换为指向数组对象第一个元素的指针。例外情况（此处均不适用）是：

*   当数组表达式是一元运算符的操作数时`&`（产生整个数组的地址）；
*   当它是一元`sizeof` ~~或（从 C11 开始）`_Alignof`~~运算符的操作数时（`sizeof arr`产生数组的大小，而不是指针的大小）；和
*   当它是用于初始化数组对象的初始化程序中的字符串文字时（`char str[6] = "hello";`不转换`"hello"`为`char*`.）

（[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)草案错误地添加`_Alignof`到例外列表中。事实上，由于不清楚的原因，`_Alignof`只能应用于类型名称，而不是表达式。）

请注意，有一个隐含的假设：数组表达式首先引用了一个数组对象。在大多数情况下，它确实如此（最简单的情况是数组表达式是声明的数组对象的名称）——但在这种情况下， *没有数组对象*。

如果函数返回结构，则结构结果*由 value*返回。在这种情况下，结构包含一个数组，至少在逻辑上给我们一个没有对应数组*对象的数组**值。*所以数组表达式衰减为指向...的第一个元素的指针，呃，嗯，...一个不存在的数组对象。*`bar().c`*

 *2011 ISO C 标准通过引入“*临时生命周期*”解决了这个问题，它仅适用于“具有结构或联合类型的非左值表达式，其中结构或联合包含具有数组类型的成员”（[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf) 6.2.4p8）。这样的对象不能被修改，并且它的生命周期在包含完整表达式或完整声明符的末尾结束。

因此，从 C2011 开始，您的程序的行为已明确定义。该`printf`调用获取指向数组的第一个元素的指针，该数组是具有临时生命周期的结构对象的一部分；该对象将继续存在，直到`printf`调用完成。

但是从 C99 开始，行为是未定义的——不一定是因为您引用的子句（据我所知，没有中间序列点），而是因为 C99 没有定义数组对象对于工作`printf`。

如果您的目标是让该程序运行，而不是了解它可能失败的原因，您可以将函数调用的结果存储在显式对象中：

```
const struct s result = bar();
printf("%s", result.c); 
```

现在您有了一个具有*自动*而非*临时*`printf`存储持续时间的 struct 对象，因此它存在于调用执行期间和之后。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T02:32:38.517

在 C99 中，在对参数进行评估后，调用函数有一个序列点 (C99 6.5.2.2/10)。

因此，当`bar().c`被评估时，它会产生一个指针，指向由 .`char c[7]`返回的结构中的数组中的第一个元素`bar()`。但是，该指针被复制到一个参数（碰巧是一个无名参数）中`printf()`，并且在实际对`printf()`函数进行调用时，上面提到的序列点已经发生，因此指针指向的成员可能没有不再活着。

[正如 Keith Thomson 提到](https://stackoverflow.com/a/13755846/12711)的，C11（和 C++）对临时对象的生命周期做出了更强有力的保证，因此这些标准下的行为不会是不确定的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T01:50:23.503

序列点出现在完整表达式的末尾，即`printf`本例中的返回时。还有其他出现序列点的情况

实际上，这条规则规定函数临时函数不会超过下一个序列点——在这种情况下，它会在使用后很好地发生，因此您的程序具有非常明确的行为。

这是一个没有明确定义的行为的简单示例：

```
char* c = bar().c; *c = 5; // UB 
```

这里，序列点是在`c`创建之后遇到的，它指向的内存被破坏了，但是我们随后尝试访问`c`，导致了UB。*

# trigger.io - getCurrentPosition 不刷新

> ID：13755629
> 
> 赞同：2
> 
> 时间：2012-12-07T01:36:25.087
> 
> 标签：trigger.io

我有一个使用`forge.geolocation.getCurrentPosition`. 有时，该位置似乎不会刷新。我可以在一个位置打开 iOS 应用程序，然后在 5 英里外的一个小时后，再次打开应用程序（恢复，或者从托盘完全关闭应用程序，然后重新打开），仍然返回旧位置。

我正在使用这个表格

```
forge.geolocation.getCurrentPosition({enableHighAccuracy: true}, function (location) {}) 
```

请注意，当打开/恢复应用程序时，顶部的 GPS 图标会显示，但返回到 javascript 代码的位置不正确。

上述错误在 iOS 6 上重现

打开地图应用程序并返回我的应用程序后，最终返回了正确的位置。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:04:30.193

`getCurrentPosition`返回它在特定时间拥有的最佳数据 - 我建议多次调用该方法，直到指示`accuracy`降低到可接受的水平。

我们将来可能做的是支持 watchPosition 以便通过API可以实现类似[https://stackoverflow.com/a/8554835的内容](https://stackoverflow.com/a/8554835)`forge`

# arrays - Matlab中数组的最大大小

> ID：13755632
> 
> 赞同：1
> 
> 时间：2012-12-07T01:36:41.613
> 
> 标签：arrays, matlab

我尝试了 zeros(1500*64)，但它显​​示“超出了程序允许的最大变量大小”。
但是 [C,MAXSIZE] = COMPUTER 返回 MAXSIZE = 2.1475e+009
那么为什么它不起作用呢？此外，在尝试在 Matlab 命令行上多次发出此命令后，我尝试了从零（500*64）到零（1500*64）的所有方法来找到允许的最大值，有时它返回“允许的最大变量大小程序已超出。” 对于 500*64，有时会返回“内存不足”。错误。这可能是什么原因？这是内存命令返回的内容：

> 最大可能数组：486 MB（5.094e+008 字节）* 可用于所有数组的内存：1436 MB（1.506e+009 字节）** MATLAB 使用的内存：353 MB（3.697e+008 字节）物理内存 (RAM) : 3070 MB (3.219e+009 字节)
> 
> *   受限于可用的连续虚拟地址空间。** 受限于可用的虚拟地址空间。

[u,s] 的输出 = 内存

[u, s] = 内存

你=

> ```
> MaxPossibleArrayBytes: 509411328
> MemAvailableAllArrays: 1.5057e+009
>         MemUsedMATLAB: 369819648 
> ```
> 
> 小号 =
> 
> ```
> VirtualAddressSpace: [1x1 struct]
>        SystemMemory: [1x1 struct]
>      PhysicalMemory: [1x1 struct] 
> ```

如何根据这些信息计算允许的最大大小，包括元素数量和占用的总字节数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:47:25.637

命令

```
 x = zeros(1500*64); 
```

尝试创建一个双精度零的方阵，每边 96000 个元素，需要 73 GB。

我怀疑你想使用

```
x = zeros(1500,64); 
```

它创建了一个 1500×64 的双精度零数组，需要 0.8 兆字节的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:40:30.523

当我在谷歌上搜索该错误消息时，首先点击的是来自 MatLab 开发者 MathWorks 的描述性帮助页面：

*   [为什么我会收到错误“超出程序允许的最大变量大小。” ?](http://www.mathworks.com/support/solutions/en/data/1-FA99T5/index.html)

据此，您应该使用`computer`命令而不是`memory`来了解您的 MatLab 版本支持的最大矩阵大小。

对于“Out of Memory”错误，取“Maximum possible array: 486 MB (5.094e+008 bytes)” `memory`，除以数组元素的大小（双精度实数值为 8 字节，即MatLab 默认使用什么）。它如此低的原因是由于地址空间碎片，这是`memory`命令在谈论“受连续地址空间限制”时告诉您的内容。

# arrays - 德尔福：BlockWrite I/O 错误 1784

> ID：13755633
> 
> 赞同：0
> 
> 时间：2012-12-07T01:36:51.733
> 
> 标签：arrays, delphi, file

用下面的代码我写了一个

```
 dest : array of Bytes; 
```

到一个文件。

```
 c: integer;
  size: integer; 
```

如果我逐字节做：

```
 filename := ExePath + 'test.txt';
  AssignFile(myfile, filename);
  ReWrite(myfile, 1);
  Write the data array to the file
  for c := 0 to length(dest) - 1 do
     BlockWrite(myfile, dest[c], 1);
  CloseFile(myfile); 
```

一切正常，但在大型阵列（最大 20MB）上需要很长时间。

如果我尝试写它@一旦我得到 I/O 错误 1784：

```
 filename := ExePath + 'test.txt';
  AssignFile(myfile, filename);
  size := length(dest);
  ReWrite(myfile, size);
  BlockWrite(myfile, dest[0], size);
  CloseFile(myfile); 
```

可能错在哪里？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:43:44.227

知道了...

@我自己：RTFM

```
BlockWrite(myfile, dest[0], size); 
```

一定是

```
BlockWrite(myfile, dest[0], 1); 
```

因为 size 已经被定义为数组的大小，并带有 rewrite....

```
filename := ExePath + 'test.txt';
AssignFile(myfile, filename);
size := length(dest);
ReWrite(myfile, size);
BlockWrite(myfile, dest[0], 1);   <-- 1 "dataset" of length (size) as defined before
CloseFile(myfile); 
```

# c# - 基于数据表的高效批量 SQL 数据库表更新

> ID：13755635
> 
> 赞同：0
> 
> 时间：2012-12-07T01:37:06.903
> 
> 标签：c#, sql-server, performance, datatable, sql-server-2012

我有超过 100 万行要检查更改然后更新。我完成了遍历每条记录然后更新数据库的程序。但是这个操作需要几个小时才能完成多线程。我优化了查询、插入和检查以最小化数据库负载。我取得了更好的结果，但速度很慢。

有没有办法在内存中维护一个具有正确记录的 DataTable，然后一次更新将整个数据结构作为“虚拟表”上传到 SQL Server 并让 SQL Server 处理更新？

我过去见过类似的情况，它是通过 Posrgre 服务器上的函数完成的（不涉及 C#）。我需要在几分钟内完成我的程序，而不是几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:45:10.483

你看过 SqlBulkCopy 类吗？

```
System.Data.SqlClient.SqlBulkCopy 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:25:36.190

使用 Bulk Copy 将新数据插入临时表或使用表值参数 (TVP)，然后使用 SQL[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)命令更新现有表中的行。

# java - 具有相同 FQN 的多个类 (ServiceLoader)

> ID：13755636
> 
> 赞同：0
> 
> 时间：2012-12-07T01:37:08.947
> 
> 标签：java, java-6, serviceloader

我正在使用[java.util.ServiceLoader](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)创建一个轻量级插件框架。

我目前正在努力解决如何让多个实现类具有相同的 FQN。我想在类路径上有两个相同插件的副本，并且可以访问 META-INF/services 目录中给出的两个实现类。

这里有一些简单的 Eclipse 项目来说明我的意思： [https ://docs.google.com/open?id=0B4MxFm-ACB3IUmswN0dpMExTVms](https://docs.google.com/open?id=0B4MxFm-ACB3IUmswN0dpMExTVms)

ServiceLoaderIntf 具有由插件实现的简单接口。ProjectOne 和 ProjectTwo 代表插件。ServiceLoader 有 Tester 类，它遍历实现者并调用它们的 init() 方法。

即使实现类具有相同的 FQN，我如何才能让它识别所有实现者？现在它只识别 ProjectOne 中的插件类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:05:51.490

由于服务类是由同一个共享类加载器加载的，因此您可能不会对实现类使用相同的 FQN。

此外，在各种实现之间共享相同的 FQN 是没有意义的，因为类名至少应该暗示其用途。

# ruby - Ruby：使用正则表达式和布尔运算符的 if 语句

> ID：13755637
> 
> 赞同：1
> 
> 时间：2012-12-07T00:01:52.880
> 
> 标签：ruby

我正在学习 Ruby，但未能使复合“if”语句起作用。这是我的代码（希望不言自明）

```
commentline = Regexp.new('^;;') 
blankline = Regexp.new('^(\s*)$')

if (line !~ commentline || line !~ blankline)
  puts line
end 
```

变量“line”是通过读取以下文件获得的：

```
;; alias filename backupDir

Prog_i  Prog_i.rb ./store
Prog_ii Prog_ii.rb ./store 
```

这失败了，我不确定为什么。基本上我希望在处理文件中的行期间忽略注释行和空白行。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T00:08:57.020

你需要使用 AND

基本上你想要在应用[DeMorgan](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)`not (blank or comment)`之后变成`not blank and not comment`

```
if (line !~ commentline && line !~ blankline)
  puts line
end 
```

或者

```
unless(line ~= commentline || line ~= blankline)
  puts line
end 
```

取决于你觉得哪个更具可读性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:15:15.943

你可以写得更简洁，因为

```
puts DATA.readlines.reject{|each|each =~ /^;;|^\s*$/}

__END__
;; alias filename backupDir

Prog_i  Prog_i.rb ./store
Prog_ii Prog_ii.rb ./store 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:08:38.247

这是你的代码：

```
commentline = Regexp.new('^;;') 
blankline = Regexp.new('^(\s*)$')

if (line !~ commentline || line !~ blankline)
  puts line
end 
```

以及我如何写同样的东西：

```
[
  ';; alias filename backupDir',
  '',
  'Prog_i  Prog_i.rb ./store',
  'Prog_ii Prog_ii.rb ./store'
].each do |line|

  puts line if (!line[/^(?:;;)?$/])

end 
```

哪个输出：

```
;; alias filename backupDir
Prog_i  Prog_i.rb ./store
Prog_ii Prog_ii.rb ./store 
```

# php - 检查浏览器 cookie

> ID：13755645
> 
> 赞同：0
> 
> 时间：2012-12-07T01:37:31.647
> 
> 标签：php, cookies

> **可能重复：**
> [PHP cookie 有一个刷新延迟](https://stackoverflow.com/questions/11471674/php-cookie-has-a-one-refresh-delay)

我有一个登录页面，我想检查访问者的浏览器 cookie 是否启用。如果我使用此代码-

```
<?php
setcookie('user','value',time()+60);
if(!isset($_COOKIE['user'])){echo"<center><font-family='Arial' style='color:#ff0000;font-size:14px;'><b>Browser Cookie is required to be enabled</b></font></center><br />";}
?>
<form action="checklogin.php" method="post">
Username :<input name="username" id="username" type="text" /><br />
Password :<input name="password" id="password" type="password" /><br />
<input name="submit" id="submit" type="submit" value="Log in" />
</form> 
```

然后它在第一次访问时总是显示“需要启用浏览器cookie”（直到它在浏览器的cookie列表中找到'localhost'），然后刷新页面或'localhost'在浏览器cookie列表中就可以了。我希望它在第一次访问该页面时不会显示该消息（为此，它需要主机位于浏览器 cookie 列表中，这在第一次访问该网站时是不可能的。）

请告诉我如何解决它。

-谢谢。

*已解决（Frank Farmer 的评论***）****

# batch-file - 变量循环和批处理文件中的参数之间的不同行为，参数不能在循环中传递

> ID：13755646
> 
> 赞同：1
> 
> 时间：2012-12-07T01:37:33.487
> 
> 标签：batch-file, arguments

我正在尝试将批处理文件参数提取为 3 个字符串。我首先尝试使用一个变量，然后将其拆分为 3（分隔符是一个空格）：

代码：

```
@echo off
set var=\s v4.12 1,2,3,4
for /f "tokens=1,2,3 delims= " %%a in ("%var%") do (
echo a is %%a, b is %%b, c is %%c
) 
```

结果：

```
a is \s, b is v4.12, c is 1,2,3,4 
```

但是当我尝试将 var 实现为参数时：

新代码：

```
@echo off
for /f "tokens=1,2,3 delims= " %%a in ("%1") do (
echo a is %%a, b is %%b, c is %%c
) 
```

执行：

```
test.bat \s v4.12 1,2,3,4 
```

结果：

```
a is /s, b is , c is 
```

我尝试打开回声，发现参数没有在循环中传递，我该如何解决？

========== 编辑（这是对 Aacini 的回答）：

我当前的代码：

```
for /f "tokens=1-3" %%a in ("%*") do (
echo First is %%a, Second is %%b, Third is %%c
:loopers
for /f "tokens=* delims=," %%d in ("%%c") do (
echo %%d
shift
if not  "%%d"=="" (
goto :loopers else exit >nul
)
)
) 
```

获得第三个标记（%%c 等于 1,2,3,4）后，我必须再次创建一个循环以使用逗号作为分隔符来获取每个数字，但是当我尝试时，它会无限显示 %c（不是值但实际的 %c 文本）

这是结果：

```
First is /s, Second is v1.4, Third is 1,2,3,4
1
%c
..infinite loop of %c.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:31:52.303

对不起，我想我不明白你的问题。

你想执行这一行：

```
test.bat /s v1.1 1,3,4,5 
```

和 3 个标记中的单独参数：“/s”、“v1.1”、“1,3,4,5” **或** 6 个标记中的单独参数：“/s”、“v1.1”、“1”、“3 ", "4", "5" **?**

如果你想要第一种情况，那么这段代码会这样做：

```
@echo off
for /f "tokens=1-3" %%a in ("%*") do (
echo First is %%a, Second is %%b, Third is %%c
) 
```

如果你想要第二种情况，那么每个参数已经在 %1 到 %6 可替换参数中可用：

```
echo First is %1, Second is %2, Third is %3, Fourth is %4, Fifth is %5, Sixth is %6 
```

如果这些解决方案都不适合您，请以*非常*简洁的方式解释您想要什么！（请勿混淆或举其他案例为例，只需输入“我想要这个......”）

**编辑：** *作为对新信息的回复的新答案*

拜托，您必须意识到我*无法*理解您想要查看示例的内容。因为你没有说你想要什么我只能猜测，所以我们又来了......

1- 如果您想将参数分隔为 3 个标记：“/s”、“v1.1”和“1,3,4,5”，我已经通过 %%a、%%b 和 % 展示了如何做到这一点%c 可替换参数。

*2- 如果您想将参数分隔为 6 个标记：“/s”、“v1.1”、“1”、“3”、“4”和“5”，并且可以同时*访问所有这些标记，您可以使用 %1..%6 批处理参数。

3-如果您想分隔*任意数量的标记*（在本例中为 6 个）中的参数并*一一*处理，请使用以下代码：

```
:nextParam
   if "%1" equ "" goto endParams
   echo %1
   shift
   goto nextParam
:endParams 
```

4- 如果*要先*将参数分隔为 3 个标记：“/s”、“v1.1”和“1,3,4,5”，*然后*进一步将第三个标记（%%c）分为四个部分，那么我无法理解这样做的目的是什么。但是，仅出于说明目的，这是执行此操作的方法：

```
for /f "tokens=1-3" %%a in ("%*") do (
   echo First is %%a, Second is %%b, Third is %%c
   for %%d in (%%c) do echo %%d
) 
```

5-如果要将3 个参数*存储*在 3 个变量中，并在第三个变量中消除逗号，请使用：

```
for /f "tokens=1-3" %%a in ("%*") do (
   set First=%%a
   set Second=%%b
   set Third=%%c
)
set Third=%Third:,= % 
```

我强烈建议您阅读您使用的批处理命令的说明（通过`HELP command`），不要*使用*任何您不理解的内容。注意复制一个你不理解的代码，修改它然后问“为什么我的代码不起作用？” 是胡说八道。最好就您可能有的具体疑问提出具体问题。

如果以上 5 点都不是您想要的，那么如果您不向我们解释您想要什么（用文字，而不是通过代码示例），我们将无法进一步帮助您...

安东尼奥

# php - 从 Web 应用控制器内部调用 .phar 可执行文件

> ID：13755647
> 
> 赞同：3
> 
> 时间：2012-12-07T01:37:38.323
> 
> 标签：php, composer-php, webhooks

我需要`composer.phar update`从 Web 控制器运行。

我可以以这种方式运行各种常规命令（`ls`,`cp`等），但是当我调用 phar 文件时，我得到空输出。

我的代码如下所示：

```
class Maintenance_Controller
{
    public function do_maintenance()
    {
        echo exec("/usr/bin/env php composer.phar", $out, $ret);
        var_dump($out); // outputs -> array()
        var_dump($ret); // outputs -> int(127)
    }
} 
```

`127`表示路径不好，但我确定我在正确的目录中。

此外，这在使用 php_cli 包装器时有效，所以可能与`www-data`用户有关？`chmod 777`没有帮助，无论如何我都讨厌这样做。

我也使用了`passthru()`,`system()`和 backtic 语法。我无法理解这不起作用的原因。我似乎无法从代码`exec()`之外的调用中询问 stderr 或 stdout。`127`

### 明显的问题：

我究竟做错了什么？

### 更好的问题：

有没有更好的方法来`.phar`从脚本中查询和执行文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:48:35.560

**更新：**

从[这个问题](https://stackoverflow.com/q/1763156/215966)：

> 当在您的 PATH 系统变量中找不到给定命令并且它不是内置的 shell 命令时，/bin/sh 返回值 127。

尝试使用`exec('php composer.phar', $out, $ret);`，看看是否有效。您可能还需要使用完整路径，`php`如果它位于您可能从中获取的非标准位置`which php`。

* * *

我不确定你为什么在`passthru`这里使用。我会使用`exec`更好的处理。id`exec`在这里使用而不是`passthru`

```
class Maintenance_Controller
{

    public function do_maintenance()
    {
        exec("composer.phar update", $out, $ret);
        if(!$ret) {
            // handle success
        } else {
           // handle error
        }

    }
} 
```

这样，您就可以按行输入所有输出`$out`以及shell return val（如果可以，则为0，如果不是，则> 0）。如果您想真正花哨，可以循环`$out`并扫描错误，然后构建并抛出异常。

# iphone - UIScrollView touch down 由 subview 处理

> ID：13755651
> 
> 赞同：0
> 
> 时间：2012-12-07T01:37:45.017
> 
> 标签：iphone, ios, ipad, uigesturerecognizer, uiresponder

我有`UIScrollView`一个带孩子的`UIView`。我已经继续`UITapGestureRecognizer`向子视图添加了一个，如下所示：

```
// in child
- (void)setup
{
    [self addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)]];
} 
```

// 和处理程序

```
- (void)handleSingleTap:(UITapGestureRecognizer*)sender
{
     if (sender.state == UIGestureRecognizerStateEnded)
         NSLog(@"tap ended");    // this gets called
     else if (sender.state == UIGestureRecognizerStateBegan)
         NSLog(@"tap began"); // never get's called
} 
```

这段代码可能在视图控制器中，但我有理由在视图本身中处理触摸。

如您所见，我正在测试水龙头的状态。然而，唯一被调用的状态是用户从屏幕上移开手指，完成点击。即 UIGestureRecognizerStateEnded。

当用户点击子视图（在滚动视图中）时，我知道父滚动视图“拦截”所有触摸并决定它们是否相关（用于平移、缩放等......），如果不通过触摸（ es) 到它的子视图。因此`touchesBegan:withEvent:`永远不会在滚动视图的子视图上被调用。

我想要的是在子视图中检测触摸事件（即用户将手指放在屏幕上的那一刻），无论用户随后是平移、滚动还是点击，并在其中处理该点击孩子。滚动视图的行为应该保持不变。

也许有更好的方法没有手势识别器，例如覆盖`hitTest:withEvent`，但我那微不足道的人脑似乎无法弄清楚！

更新/示例：如果您查看一个`UITableView`包含单元格的滚动视图。您会注意到将手指放在单元格上会立即突出显示它。然后滚动“取消”点击的行为。大体上是这样的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:48:55.277

将手势识别器添加到子视图会使您受制于滚动视图，以及它在确定用户不打算滚动后决定传递的事件。如果它符合您的需要，一个简单的解决方法可能是设置：

```
tableView.delaysContentTouches = NO; 
```

这将导致立即调用触摸方法。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

您的另一个选择是监听滚动视图本身的手势，并使用命中测试来确定用户如何与子视图交互。

# php - PHP，更简单的方法来获取没有警告的数组值

> ID：13755652
> 
> 赞同：4
> 
> 时间：2012-12-07T01:37:47.760
> 
> 标签：php

伙计们，

有没有更简洁的方法来写下面的语句？如果我不检查数组键是否存在，我会收到 PHP 警告。不过，下面的也有点过头了，嗯，罗嗦。

谢谢！

```
$display_flag = false;
if (array_key_exists('display_flag',$pref_array) { 
    $display_flag = $pref_array['display_flag']; 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T01:40:35.750

如果`$display_flag`是布尔值：

```
$display_flag = isset($pref_array['display_flag']) && $pref_array['display_flag']; 
```

如果是字符串：

```
$display_flag = isset($pref_array['display_flag']) ? $pref_array['display_flag'] : false; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-28T07:06:58.513

从 PHP 7 开始，您可以使用新的[null 合并运算符](http://php.net/manual/en/migration70.new-features.php)。

```
$display_flag = $pref_array['display_flag'] ?? false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T01:40:42.640

```
// Get the $pref_array from wherever

$default_prefs = array(
  "display_flag" => false,
);

$pref_array = array_merge($default_prefs, $pref_array);

// Now you know it's always defined with default values 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T01:42:12.583

您拥有它的方式很好，因为您应该验证该值是否确实存在，但您也可以执行三元操作：

```
$display_flag = (isset($pref_array['display_flag'])) ? (bool) $pref_array['display_flag'] : false; 
```

如果设置了 display_flag 的内容，我会将其类型转换为 bool，因此在任何一种情况下都可以确保您是布尔值。

你也可以（但我不推荐），用@压制警告：

```
$display_flag = @$pref_array['display_flag']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T17:16:36.500

另一个更简单的选择是：

```
array_get($variable, 'keyName', null) 
```

第三个参数是默认值。

# jquery - RoR中的JQuery隐藏和显示功能

> ID：13755655
> 
> 赞同：1
> 
> 时间：2012-12-07T01:38:54.860
> 
> 标签：jquery, ruby-on-rails-3

我正在做一个需要 JQuery 的表单，当组合框选择 1 个值时，标签和文本框将根据情况显示或隐藏。当我在 googlechrome 中尝试调试时，它运行正常。但是当我在我的 localhost 中尝试时，它不起作用。

**这是我的 jQuery**

```
<script type="text/javascript">
   $(document).ready(function(){
        $("#combine_category_id").change(function(){
        if ($(this).val() == 1){
        $("#type").hide();
        $("#block").show();
        $("#road").show();
        $("#level").show();
        $("#facing").show();
        $("#size").show();
        $("#value").hide();
        $("#asking").show();
        $("#project").show();
        $("#unit").hide();
        $("#match").show();
    }
        else if ($(this).val() == 2){
        $("#type").hide();
        $("#block").hide();
        $("#road").show();
        $("#level").hide();
        $("#facing").show();
        $("#size").show();
        $("#value").hide();
        $("#asking").show();
        $("#project").hide();
        $("#unit").show();
        $("#match").show();
    }
        else if ($(this).val() == 3){
        $("#type").show();
        $("#block").show();
        $("#road").show();
        $("#level").show();
        $("#facing").show();
        $("#size").show();
        $("#value").show();
        $("#asking").show();
        $("#project").hide();
        $("#unit").hide();
        $("#match").hide();
    }
   });
    });
  </script> 
```

**这是 Ruby on Rails 中的 _form.html.rb**

```
<div class="field" id="combine_category_id">
    <%= f.label :category_id %><br />
   <%= f.collection_select(:category_id ,  @get_master, :id , :category) %>
   </div>

   <div class="field" id="type">
    <%= f.label :type %><br />
    <%= f.number_field :type %>
    </div>

   <div class="field" id="project">
    <%= f.label :project_name %><br />
    <%= f.text_field :project_name %>
    </div>

    <div class="field" id="no">
    <%= f.label :unit_no %><br />
    <%= f.number_field :unit_no %>
    </div>

   <div class="field" id="block">
    <%= f.label :block_no %><br />
    <%= f.text_field :block_no %>
    </div>

   <div class="field" id="road">
    <%= f.label :road_name %><br />
    <%= f.text_field :road_name %>
    </div>

   <div class="field" id="level">
    <%= f.label :level %><br />
    <%= f.number_field :level %>
    </div>

   <div class="field" id="facing">
    <%= f.label :facing %><br />
    <%= f.text_field :facing %>
    </div>

   <div class="field" id="size">
    <%= f.label :size %><br />
    <%= f.number_field :size %>
    </div>

   <div class="field" id="value">
    <%= f.label :value %><br />
    <%= f.number_field :value %>
    </div>

   <div class="field" id="match">
    <%= f.label :match_bank %><br />
    <%= f.number_field :match_bank %>
    </div>

   <div class="field" id="asking">
    <%= f.label :asking %><br />
    <%= f.number_field :asking %>
    </div>

  <div class="actions">
    <%= f.submit %>
  </div> 
```

有什么解决方案可以解决这个问题吗？
非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:46:27.883

您正在选择 div，而不是输入。

`$("#combine_category_id select").change(...`

# java - 在哪里可以找到有关 Java SimpleFormatter 格式字符串的文档？

> ID：13755658
> 
> 赞同：7
> 
> 时间：2012-12-07T01:39:22.413
> 
> 标签：java, logging, string-formatting

我正在尝试修改使用 java SimpleFormatter 的 logging.properties 文件。我可以设置
java.util.logging.SimpleFormatter.format = "" 属性，但我找不到有关可以放入其中的内容的文档。我找到了几个例子，但没有一个能告诉我可能性是什么。他们只是说 "%4$s: %5$s [%1$tc]%n" 做某事。我希望某些文档存在于某处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:49:54.530

从 API 文档开始。[java.util.logging.SimpleFormatter#format()](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html#format%28java.util.logging.LogRecord%29)的文档提供了指向[java.util.Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)的链接，其中包含有关 Java 中格式化语法的详细信息。（换句话说，我在重复@HovercraftFullOfEels 的评论。）

# php - PHP下拉框无法发布

> ID：13755659
> 
> 赞同：0
> 
> 时间：2012-12-07T01:39:25.967
> 
> 标签：php, mysql

这可能只是一个深夜的愚蠢问题，下拉框填充得很好，但是当按下提交按钮时，什么也没有发布。

```
<?php
include("configlocal.php");

$selectedMake = $_REQUEST['select_make'];

mysql_connect ($host,$user,$pass);
@mysql_select_db($database) or die( "Unable to select database");

// Formulate Query
$select="SELECT Distinct make FROM vehicles order by make";

// Perform Query
$selection=mysql_query($select);
$num=mysql_numrows($selection);

echo '<form action="test1.php" method="post">';
echo '<select name"="select_make">';
for($i = 0; $i < $num ; $i++)
    {
    echo '<option value="' . $i . '">';
    echo mysql_result ($selection,$i,"make");
    echo '</option>';
    }

echo '</select>';
echo '<input type="submit" value="Search"/>';
echo '</form>';

if ($selectedMake != "")
{
echo $selectedMake;
}

?> 
```

我放弃了晚上，我早上有工作，但任何指出明显的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:42:27.107

附近有一个不需要的双引号 ( `"`)`name`

```
echo '<select name"="select_make">'; 
```

至

```
echo '<select name="select_make">'; 
```

更新：不要使用`$_REQUEST`它不是很安全。出于安全原因，请使用 $_POST 或 $_GET。

不要使用`mysql_*`函数，它们很快就会被弃用。使用 PDO 或 MySqli 函数连接数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:43:05.467

```
echo '<select name"="select_make">'; 
```

该行带有额外引号的错误。

# postgresql - 从第一个表中加入两个表

> ID：13755674
> 
> 赞同：2
> 
> 时间：2012-12-07T01:41:07.123
> 
> 标签：postgresql, postgresql-9.1

我知道这个问题有一个明显的答案，但我就像一个试图记住如何编写查询的菜鸟。我在 Postgresql 中有以下表结构：

```
CREATE TABLE public.table1 (
  accountid BIGINT NOT NULL, 
  rpt_start DATE NOT NULL, 
  rpt_end DATE NOT NULL, 
  CONSTRAINT table1_pkey PRIMARY KEY(accountid, rpt_start, rpt_end)
) 
WITH (oids = false);

CREATE TABLE public.table2 (
  customer_id BIGINT NOT NULL, 
  read VARCHAR(255), 
  CONSTRAINT table2 PRIMARY KEY(customer_id)
) 
WITH (oids = false); 
```

查询的目的是显示 accountid 的结果集、table1 中 accountid 的计数并从 table2 读取。联接在 table1.accountid = table2.customer_id 上。

结果集应如下所示：

```
accountid     count     read
1234          2         100
1235          9         110
1236          1         91 
```

count 列反映了 table1 中每个 accountid 的行数。读取列是 table2 中与同一 accountid 关联的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:31:14.177

```
SELECT t2.customer_id, t2.read, COUNT(*) AS the_count
FROM table2 t2
JOIN table1 t1 ON t1.accountid = t2.customer_id
GROUP BY t2.customer_id, t2.read
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:26:03.687

```
select accountid, "count", read
from
    (
        select accountid, count(*) "count"
        from table1
        group by accountid
    ) t1
    inner join
    table2 t2 on t1.accountid = t2.customer_id
order by accountid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:45:46.167

```
SELECT table2.customer_id, COUNT(*), table2.read
FROM table2
    LEFT JOIN table1 ON (table2.customer_id = table1.accountid)
GROUP BY table2.customer_id, table2.read 
```

# sql - 基于函数依赖的方案

> ID：13755677
> 
> 赞同：1
> 
> 时间：2012-12-07T01:41:35.280
> 
> 标签：sql, dependencies, functional-dependencies, transitive-dependency

我一直试图在脑海中解决这个问题，但我真的被困住了，希望能得到一些帮助。鉴于方案

```
R(a,b,c,d)
fd1: a->c
fd2: b->d 
```

说这里的关键是 {a,b} 是否准确？如果这是真的，那么说属性 c,d 由于它们对 a 或 b 的部分依赖而需要在它们自己的表中是否也准确？导致以下方式的方案？

```
R(a,b)
r1(a,c)
r2(b,d) 
```

还是仅仅拥有

```
R(a,c)
r1(b,d) 
```

当然 a,b 必须以某种形式存在，因为它们是关键，对吧？我不是百分百确定。帮助理解这一点会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:56:39.453

{a,b} 是 R 的唯一键。R 在 1NF 中。

为了达到至少 2NF，通过投影去除部分关键依赖。

*   r [1] {**一个**c}
*   r [2] { **b** d}

这是最低限度的覆盖。r [1]和r [2]都属于6NF。R 的密钥不需要存在，因为 R 不存在。但是 R 可以从 r [1]和 r [2]的笛卡尔积中恢复。

使用 SQL 。. .

```
create table t1 (
  a integer not null,
  b integer not null,
  c integer not null,
  d integer not null,
  primary key (a, b)
);

insert into t1 values
(1, 1, 10, 100),
(1, 2, 10, 200),
(2, 1, 20, 100),
(2, 2, 20, 200); 
```

请注意，这会保留 FD a->c 和 b->d。

```
create table t2 (
  a integer primary key,
  c integer not null
);

insert into t2
select distinct a, c from t1;

create table t3 (
  b integer primary key,
  d integer not null
);

insert into t3 
select distinct b, d from t1;

drop table t1; 
```

现在我们可以查看表 t2 和 t3 中的数据。

```
select * from t2;
a   c
--
1   10
2   20

select * from t3;
b   d
--
1   100
2   200 
```

我们可以通过 t2 和 t3 的笛卡尔积来恢复 t1。

```
select t2.a, t3.b, t2.c, t3.d
from t2, t3;
a  b   c  d
--
1  1  10  100
1  2  10  200
2  1  20  100
2  2  20  200 
```

# android - android模拟器如何联系eclipse中的主机开发机器？

> ID：13755679
> 
> 赞同：13
> 
> 时间：2012-12-07T01:42:02.727
> 
> 标签：android, eclipse, networking, tcp, virtualbox

我有一个普通的简单 java 程序作为服务器运行，等待客户端与 TCP 连接。

在另一个 Eclipse 项目中，我正在构建一个 android 应用程序。该应用程序必须联系在主机上运行的 java 程序以接收消息。

我不能简单地使用“localhost”来联系服务器，因为据说模拟器在虚拟路由器后面运行，我将访问“电话”的网络而不是主机的网络。

那么，我应该使用什么 ip 来联系主机开发机器呢？

这台机器是一个在 Ip 为 10.0.0.5 的 VirtualBox 上运行的 linux。我尝试在模拟器上使用该 ip，但即便如此，我也无法建立连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T02:12:07.307

我想你想要 10.0.2.2。查看 Android 模拟器网络文档： [https ://developer.android.com/studio/run/emulator-networking.html](https://developer.android.com/studio/run/emulator-networking.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:45:35.023

我相信您需要启用端口转发才能在模拟器中使用任何类型的网络连接。您可以使用该`adb`工具执行此操作。详情请查看 Android 开发者指南。

# ext4 - 如何使ext4文件系统块组具有块组描述符和超级块

> ID：13755680
> 
> 赞同：1
> 
> 时间：2012-12-07T01:42:04.237
> 
> 标签：ext4

我发现在ext4文件系统块组的android、数据分区和系统分区中，只有0、1、3、5、7等有块组描述符和超级块。但是在Linux中都是一些，你能告诉我如何使ext4文件系统块组有块组描述符和超级块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:08:23.177

这是由于在您的 android 设备上的 ext4 文件系统中设置了“ **sparse_super 功能标志”。**sparse_super 特性意味着超级块和组描述符表不会是每个块组的一部分。相反，它将被复制到块组 0 和 1 以及编号为 3、5、7 的幂的所有块组

-> 所以这意味着它将显示在：0,1,3,5,7,9,25,27,49...

您可以通过以下方式在文件系统上禁用此功能：

```
 tune2fs -s 0 /dev/... 
```

或者在制作新的 ext4 文件系统时：

```
 mke2fs -T ext4 -O ^sparse_super /dev/... 
```

# python - 尝试在 Mac OS X 上使用 f2py 时出错？

> ID：13755690
> 
> 赞同：2
> 
> 时间：2012-12-07T01:43:44.703
> 
> 标签：python, fortran, f2py

我正在尝试在我的 Mac 上使用[f2py 。](http://www.scipy.org/F2py)当我输入`f2py`终端时，返回：

```
zacks-macbook-pro-2:~ zack$ f2py
Traceback (most recent call last):
  File "/usr/local/bin/f2py", line 5, in <module>
    pkg_resources.run_script('F2PY==2.45.241-1926', 'f2py')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 489, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 1207, in run_script
    execfile(script_filename, namespace, namespace)
  File "/Library/Python/2.7/site-packages/F2PY-2.45.241_1926-py2.7.egg/EGG-INFO/scripts/f2py", line 3, in <module>
    import f2py2e
  File "/Library/Python/2.7/site-packages/F2PY-2.45.241_1926-py2.7.egg/f2py2e/__init__.py", line 10, in <module>
    import f2py2e
  File "/Library/Python/2.7/site-packages/F2PY-2.45.241_1926-py2.7.egg/f2py2e/f2py2e.py", line 26, in <module>
    import crackfortran
  File "/Library/Python/2.7/site-packages/F2PY-2.45.241_1926-py2.7.egg/f2py2e/crackfortran.py", line 1586
    as=b['args']
     ^
SyntaxError: invalid syntax 
```

知道如何解决这个问题吗？我安装了 numpy 和 scipy。

# jquery - 带有 JSON 和 jQuery 的可编辑数据表？

> ID：13755694
> 
> 赞同：0
> 
> 时间：2012-12-07T01:44:03.557
> 
> 标签：jquery, mysql, json, twitter-bootstrap

对于体育比赛结果，我正在考虑将结果数据以 JSON 格式存储在 MySQL 中，并希望提供一个简单的编辑界面。

有什么东西可以让 JSON 生成表格，允许编辑和更新 JSON 对象..？然后可以将其传递回 PHP/MySQL。

结果数据如下所示：

```
Race    Grade     First     Second      Third       Time
350M    ‘A’       S. Samy   T. Harris   F. Cullin   31:72
450M    ‘B’       S. Bucket R. Jones    M. Jones    33:21
550M    'C'       R. Oly    S. Woods    P. Kircher 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:40:55.853

您应该将数据存储在关系数据库中。使用函数或框架实用程序将其转换为 JSON 格式，然后将其传递到网页以供 javascript 使用并呈现给用户。

如果 NoSQL 数据库适合您的需求，它们可以存储 JSON 文档，因此这些文档将作为 JSON 发出。[CouchDB](http://couchdb.apache.org)就是这些非关系型数据库的一个例子。

# html - css文本对齐文本之间的间隙

> ID：13755701
> 
> 赞同：0
> 
> 时间：2012-12-07T01:45:21.203
> 
> 标签：html, css

我有一列文本，我想在其中最小化单词之间的差距。我找到`text-justify`了，但它仅受 IE 支持。

是否有其他一些 css 属性可以使它看起来更好？

![](../Images/af8cca2e3d4d75f89971765a97aab259.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:15:07.893

您可以选择, `left`, `center`, `right`, 或`justify`文本。目前，您的文字是合理的。您可以设置文本对齐方式，例如：

```
text-align: left; 
```

这将使文本左对齐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:39:20.907

在屏幕截图中的窄列中，`text-justify: newspaper`会在字母之间产生总间距。即使在 IE 上，没有连字符也无法使这样的文本合理化。

[通过使用基于 avaScript 的连](http://code.google.com/p/hyphenator/)`hyphens`字符（例如 Hyphenators.js ）并使用 CSS 中的属性（也带有前缀版本）备份（用于非 JS 浏览），几乎可以在所有浏览情况下实现连字符。您可以另外使用`text-justify: newspaper`IE，但请考虑它是否真的是一种改进。

见[演示](http://www.cs.tut.fi/~jkorpela/test/just.html)。

如果使用，请在前面`text-justify`添加，因为前者包含在[CSS Text Module Level 3](http://www.w3.org/TR/css3-text/)工作草案中。`text-justify: distribute``text-justify: newspaper`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:15:00.100

您可以尝试使用负值的[word-spacing属性，但正如指定的那样，它取决于浏览器。](http://www.w3.org/TR/CSS21/text.html#propdef-word-spacing)也就是说，如果您想保留合理的文本，但根据定义，这会导致更大且不均匀的间隙。你为什么不使用`text-align: left`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:24:59.940

`text-align: justify`将通过增加单词之间的空间来对齐文本。

如果您将`hyphens: auto;`（需要每个浏览器的前缀）添加到您的 CSS。它将在某些行的最后一个单词处添加连字符，同时保留对齐对齐。

但它只适用于 IE 10+、Firefox 6+ 和 Safari 5.1+，不适用于 Chrome 和 Opera。因此，解决问题的更好方法是增加列宽并减小字体大小。

阅读此内容以获取更多信息：[http ://skinnywhitegirl.com/blog/web-typography-hyphenation-justification/475/](http://skinnywhitegirl.com/blog/web-typography-hyphenation-justification/475/)

# maven - 让 exec-maven-plugin 执行依赖项中的类

> ID：13755702
> 
> 赞同：4
> 
> 时间：2012-12-07T01:45:26.897
> 
> 标签：maven

我有两个名为 Utilities 和 Campaigns 的独立 maven 项目。我的实用程序项目中有依赖项。Campaigns 项目需要在 Utilities 中的一个类中执行 main 方法。为此，我一直在使用 exec-maven-plugin。使用这个插件，我可以从我的 Campaigns pom 文件中执行依赖项（实用程序）的主要方法。但是，当我执行该方法时，来自实用程序的传递依赖项似乎没有解决。我可以通过向两个 pom 文件添加相同的依赖项来解决这个问题，但如果可能的话，我想避免这种冗余并只从 Utilities 继承。我在下面包含了我的 Campaign pom 文件的插件部分。这有点令人困惑，但是有没有一种方法可以解决这个问题而不必定义相同的依赖项？无需在插件部分列出依赖项？

主要方法位于 com.sample.generics.Login.java 中。

竞选活动.pom

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <phase>test</phase>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <mainClass>com.sample.generics.Login</mainClass>
                <classpathScope>test</classpathScope>
                <arguments>
                    <argument>${resourcesDir}</argument>
                    <argument>${settingsFile}</argument>
                </arguments>
                <includeProjectDependencies>true</includeProjectDependencies>
            </configuration>
        </plugin> 
```

# sql - 触发问题 - Oracle SQL plus

> ID：13755704
> 
> 赞同：0
> 
> 时间：2012-12-07T01:45:31.807
> 
> 标签：sql, oracle-sqldeveloper

我创建了一个触发器，以便在输入员工后将值插入工资单。但是，当我将值插入到Employees 时，触发器中没有任何值输入到Payroll 中。当我将值插入员工时，工资单仍然为空。有任何想法吗？

```
CREATE TABLE Employees(
empid FLOAT,
dept FLOAT,
empname varchar2(25),
salary FLOAT
);

CREATE TABLE Payroll(
empid FLOAT,
salary FLOAT
);

CREATE OR REPLACE TRIGGER NewEmployee
AFTER INSERT 
ON Employees
FOR EACH ROW
BEGIN
INSERT INTO Payroll 
VALUES(:Old.empid,:Old.salary);
END;
/

INSERT INTO Employees values (1,1,‘supply’,50000);
INSERT INTO Employees values (2,2,‘hard’,80000);

Select * from Employees;
Select * from payroll; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:58:37.873

你的`:Old.empid`and`:Old.salary`应该是`:new.empid`and `:new.salary`。

此外，在可能的情况下使用[触发器](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#sthref1169)[会更有效`BEFORE INSERT`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#sthref1169)。

# php - 如何使用 Magento 布局 xml 文件中的操作方法

> ID：13755707
> 
> 赞同：7
> 
> 时间：2012-12-07T01:45:36.640
> 
> 标签：php, xml, magento, block

**例子**

我的布局文件.xml

```
 <layout>
        <default>
            <reference name="header">
                <block type="mynamespace_mymodule/view" name="mynamespace_mymodule" output="toHtml" template="mymodule/html/view.phtml">
                    <action method="setTest"><param1>myparam1</param1><param2>myparam2</param2></action>
                </block>
            </reference>
        </default>
    </layout> 
```

app/code/local/Mynamespace/Mymodule/Block/View.php

```
 class Mynamespace_Mymodule_Block_View extends Mage_Core_Block_Template{
        public $test = "before any params";
            public function setTest($passedparam1,$passedparam2){
             $this->test = $passedparam1 ." ". $passedparam2;
            }

} 
```

应用程序/设计/.../.../mymodule/html/view.phtml

```
<?php
echo "<pre>";
print_r($this->test);  //myparam1 myparam2
echo"</pre>";
die(); 
```

**解释**

mylayoutfile 通过您的模块 config.xml 在更新中编译

mynamespace_module 的块类前缀也在您的模块 config.xml 中定义

mynamespace_module/view 设置为块类型并实例化，并设置 view.phtml 的输出文件

发生一个调用父节点块的方法 setTest 的操作，传递两个参数，其值为 myparam1 和 myparam2。

在 setTest 函数内部，类参数“test”设置为等于“myparam1 myparam2”

模板文件 app/design/.../.../mymodule/html/view.phtml 被加载，我们回显 $this->test 的值（$this 指的是之前实例化的块类 Mynamespace_mymodule_Block_View）

## 问题

1.  有哪些可以使用它的用例示例？
2.  你能传递除字符串以外的任何东西吗？（对象，数组）？
3.  自动设置器和获取器方法是否在布局文件中工作？
4.  可以使用逻辑（if、then、foreach、else 等）吗？
5.  有没有不应该使用这种方法的场景？
6.  在布局文件中，我可能还缺少与块实例化相关的任何其他内容吗？
7.  与布局文件中的操作有关的其他任何我可能会丢失的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T02:15:08.360

1.  可用于多用途模板。看看*catalog.xml*`setTitle`中的使用。
**   什么都可以通过。数组可以在布局 XML 中定义：

    ```
    <action method="setFoo">
        <arbitrary>
            <key1>val1</key1>
            <key2>val1</key2>
        </arbitrary>
    </action> 
    ```

    此外，参数节点可以执行辅助方法，其返回值将作为值传入：

    ```
    <action method="setFoo">
        <arbitrary helper="foo/bar" />
    </action> 
    ```

    这将实例化一个助手并运行一个方法：`Mage::helper('foo')->bar()`. 因此，返回值可以是您想要的任何值。此外，可以将 args 传递给子节点中的助手！

    *   块 extend `Varien_Object`，所以是的，尽管 setter 是唯一合理的使用方法。*   这没有直接的逻辑。最接近的是动作的属性，如果配置值为真`ifconfig`，它将使用提供的参数调用并处理动作。`Mage::getStoreConfigFlag()`*   “[c] 不能使用” - 不。“没关系”——是的。*   有很多细微差别（这里太多了），但你已经有了很多。Alan Storm 在他的书[*No Frills Magento Layout*](http://store.pulsestorm.net/products/no-frills-magento-layout)中获得了所有细微差别；不过，没有什么比自己探索极限更好的了。*

# ruby-on-rails - Rails activerecord-reputation-system 范围/查询问题

> ID：13755708
> 
> 赞同：0
> 
> 时间：2012-12-07T01:45:52.113
> 
> 标签：ruby-on-rails, ruby, activerecord, scope

我正在实施[activerecord-reputation-system gem](https://github.com/twitter/activerecord-reputation-system)，并且在界定最“喜爱”的文章时遇到了问题。

```
/articles_controller
def index
  ....
  @loved_articles = Article.page(params[:page]).find_with_reputation(:votes, :all, {:order => 'votes DESC, created_at DESC'})
  ....
end 
```

我尝试在 [:page]).per(5).... 之后调用 .per(5).... 但是 rails 给了我一个“未定义的方法 `per'”错误

```
/article model

def self.loved
  find_with_reputation(:votes, :all, {:order => 'votes DESC'}).first(5)
end 
```

-

我会想象调用 .first(5) 会限定它，但什么都没有发生——在我看来，循环只是在浏览我所有的文章。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:54:19.580

怎么写成这样

`Article.find_with_reputation(:votes, :all, {:order => 'votes DESC, created_at DESC'}).per(5)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:51:35.753

没关系 - 我没有使用分页......

`@loved_articles = Article.loved`在我的控制器中添加

# iphone - iOS：通过电子邮件、短信或 Facebook 邀请朋友

> ID：13755709
> 
> 赞同：2
> 
> 时间：2012-12-07T01:46:11.227
> 
> 标签：iphone, ios, facebook, ipad

我希望在我的应用程序中添加邀请朋友屏幕。理想情况下，我想支持通过电子邮件、短信或 Facebook 的邀请（类似于路径）。

邀请只会是一条消息，通知用户该应用程序存在，以及一个指向 App Store 以下载它的链接。

有没有做这种事情的开源库？或者，任何人都可以推荐任何可以提供帮助的教程吗？

![小路](../Images/58818d55bc4132ce6384450b6d74bb05.png)

磷

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T02:41:05.893

我在这本书中找到了一些信息。“iPhone 和 iPad 应用程序开发业务：制作和营销应用程序”。第 5 章，社交起步：通过应用推广您的应用。在本章中，它提到了电子邮件和 Facebook。

至于短信，它很容易实现，这里有一些示例代码。

```
 MFMessageComposeViewController *smsController = [[MFMessageComposeViewController alloc] init];
    smsController.messageComposeDelegate = self;
    smsController.body = @"check out apps, link";
    [self presentModalViewController:smsController animated:YES];
    [smsController release]; 
```

电子邮件的示例代码：

```
MFMailComposeViewController *mcvc = [[MFMailComposeViewController alloc] init];
mcvc.mailComposeDelegate = self;
[mcvc setSubject:@"Check out this app"];
UIImage *image = [UIImage imageNamed:@"Icon"]; 
//include your app icon here
[mcvc addAttachmentData:UIImageJPEGRepresentation(image, 1) mimeType:@"image/jpg" fileName:@"icon.jpg"]; 
// your message and link
NSString *defaultBody =@"check out this cool apps, link...."
[mcvc setMessageBody:defaultBody isHTML:YES];
[self presentViewController:mcvc animated:YES completion:nil]; 
```

对于 facebook，它有点复杂。您必须使用 facebook SDK 并参考他们的文档。[http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setObject:@"This is a great apps, link..." forKey:@"message"];
[facebook requestWithGraphPath:@"me" andParams:dict andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-04T20:43:36.153

有点晚了，但这可能会有所帮助...... [https://libraries.io/cocoapods/AppSociallySDK](https://libraries.io/cocoapods/AppSociallySDK)

# c# - 嵌套在类中的扩展方法

> ID：13755712
> 
> 赞同：2
> 
> 时间：2012-12-07T01:47:05.153
> 
> 标签：c#, .net, namespaces, .net-4.0, extension-methods

我想知道，当我开始做出一些戏剧性的转变时，从使用常规助手到越来越多，`extension methods`所以他们开始堆积起来，

说我的顶级主命名空间如下：

主命名空间名称是 myname + 年份和当前月份的最后一位

这就是我如何将它组织为一个帮助命名空间

```
namespace "myname212" 
{
    namespace DbRelated
    {
        some clasess & methods 
    }

    namespace styling
    {
        same as usual ..
    }

    // .... some more categories and...then

    //the extentions namespace

    namespace CustomExtentions
    {
        // simplest ext class and its first method 
        public static class ToNumber
        {
            public static int Toint(this Textbox TbxToConvrt)
            {
                return Convert.ToInt32(TbxToConvrt.Text);
            }
            //some more of same subject 
        }
    }
} 
```

但是，如果我有一个更通用的类别，它在逻辑上拥有自己的子类别怎么办

```
namespace Extentions
{
    public static class MainCategory
    {
         public static class SubCat1 
         {
             public static some_method();
         }
         public static class SubCat2 
         {
             public static some_method();
         }
    }  
} 
```

上面的层次结构不起作用。

如果我想建立更多类别，我只能通过

`nested namespaces`而不是`nested classes`？

**这是你做的吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:51:34.200

您可以嵌套命名*空间*：

```
namespace My.Nested.Namespace.So.Far
{
    public static class BlaExtensions
    {
    }
} 
```

甚至：

```
namespace My.Nested.Namespace
{
    public static class FooExtensions
    {
    }

    namespace So.Far
    {
        public static class BlaExtensions
        {
        }
    }
} 
```

[也应该工作](http://ideone.com/o4O1D8)。

# java - appengine 今天版本 7.12.12 -java

> ID：13755716
> 
> 赞同：0
> 
> 时间：2012-12-07T01:47:32.320
> 
> 标签：java, google-app-engine

我有一个使用 javafx 的 google-app-engine 项目。我已经为 Eclipse 安装了谷歌插件并使用了这个版本的库：appengine library -1.7.3 java jdk-1.7.0_01

当我在本地运行时，一切都运行良好，但是当我部署时，我从应用引擎日志中收到此错误：`java.lang.UnsupportedClassVersionError: com/myproj/MyServlet : Unsupported major.minor version 51.0`

我知道这意味着什么，我的本地编译是在最新版本上，然后是为什么应用引擎 jre 崩溃的应用引擎。

我无法得到的是为什么上帝是谷歌 jdk 的当前版本？您使用哪个版本，因为我的项目中的其他库必须使用 1.7

谷歌应用引擎文档网站真的没有更新:(

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:52:05.947

App Engine 从 1.7.3 开始在生产中使用 JDK 6。[虽然已宣布](http://googleappengine.blogspot.com/2012/10/app-engine-173-released.html)未来对 JDK 7的支持，但目前仅在本地支持。

# javascript - 将值传递给javascript数组过滤器？

> ID：13755718
> 
> 赞同：6
> 
> 时间：2012-12-07T01:48:10.147
> 
> 标签：javascript

如何将变量传递给 javascript 中的过滤器函数？

在这种情况下，我试图将一个值传递给变量“maxage”：

```
var dateFilter = function(value,maxage) { // Age in miliseconds
    if(Date.now() - value < maxage) {
        return value;
        } else {
        return false;
        }
    }

    dates.filter(dateFilter,500); 
```

如何将值传递`500`给过滤器`maxage`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T01:51:04.390

您需要调用`Function.prototype.bind`来创建类似于*默认参数*的内容。

```
dates.filter(dateFilter.bind( null, 500 )); 
```

`dateFilter`然后回调将调用加`500`号“*自动传入值*” `value, index, array`。

```
function dateFilter( customArgument, value, index, array ) {
    // customArgument === 500
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-07T01:51:26.887

`maxage`已被束缚`this`。考虑以下：

```
var dateFilter = function(value) {
  if(value < this) return value;
}
var dates = [1,2,3];
console.log(dates.filter(dateFilter,2));
> [1] // Output. 
```

[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)显示`filter`签名为`array.filter(callback[, thisObject])`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T01:51:18.743

也许没有必要把事情复杂化，尝试简单的方法：

```
var maxage = 500,
    newDates = dates.filter(function(value) {
        return Date.now() - value < maxage;
    }); 
```

# ruby - 在 Ramaze 的父目录中渲染部分

> ID：13755719
> 
> 赞同：3
> 
> 时间：2012-12-07T01:48:15.573
> 
> 标签：ruby, ramaze

如何渲染与当前视图不同的目录（在我的情况下是父目录）中的部分？

```
<%=render_partial :sidebar%> #looks in the current dir and works as expected
<%=render_partial "/view/sidebar"%> #doesn't work! 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:24:10.373

您必须指定负责正确视图的正确控制器：

**TheRightController.render_partial :侧边栏**

如果您不指定控制器类，render_* 仅适用于当前操作（控制器），除了执行真正内部 HTTP 请求的 render_full。

所以，答案是：如果你需要共享模板，只需创建一个特殊的控制器，即Shared，里面没有任何动作方法，只是在适当的视图文件夹中有很多模板并调用Shared.render_partial。

Shared.render_partial 像内部请求一样工作。它呈现控制器动作的内容，甚至执行动作的方法。如果您只想渲染视图（不执行 Shared 的操作方法），请改用 Shared.render_view。

**此外**，您可以使用内部请求在共享控制器的方法中准备一些数据。例如，如果您的侧边栏由@articles 组成，让我们在Shared 的sidebar() 方法中加载它们。您不需要在显示侧边栏的任何其他控制器中加载@articles！您只在其中调用“Shared.render_partial :sidebar”。这是如何使用 Ramaze 构建类似小部件的 Web :-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-30T01:27:00.437

@rebnoob 可以使用（没有`view`目录名，因为 Rails 搜索 app/view 目录）

`<%= render "/sidebar" %>`

代替

> `<%=render_partial "/view/sidebar"%> #doesn't work!`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T02:03:41.450

我在 apidock.com 中找到了以下 api，可能对你有用

```
 # Renders a collection of partials located in a view subfolder
 # outside of our current controller.  In this example we will be
 # rendering app/views/shared/_note.r(html|xml)  Inside the partial
 # each element of @new_notes is available as the local var "note".
 render :partial => "shared/note", :collection => @new_notes 
```

# php - 使用缓冲来规避“标头已发送”错误有什么问题吗？

> ID：13755734
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:49:36.437
> 
> 标签：php

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我收到一个错误：

```
 Warning: Cannot modify header information - headers already sent by (output started at /home/content/52/5148252/html/ruhuna/common/header.php:8) in /home/content/52/5148252/html/ruhuna/login.php on line 115 
```

我知道错误是由空格引起的，但我在文件中找不到任何空格。因此我添加`ob_start()`到我的 header.php 中，问题就消失了。

由于添加，我可能会遇到任何问题`ob_start`吗？

我没用过`ob_flush()`，会不会有问题？

如果是这样，我需要在哪里添加`ob_flush()`“

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:53:09.270

刚刚看了你的代码。当您更改标题信息时，在尝试更改标题信息之前，您无法将任何内容输出到站点。这包括任何 HTML 等。在尝试更改标题之前您有 HTML，这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:39:15.583

ob_start() 是安全的。有时，如果您有一个运行时间很长的脚本，最好让用户在脚本执行过程中看到一些输出，而 ob_start() 将不会发生这种情况。但这通常不是问题。

# python - 从 Python 到 C

> ID：13755735
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:49:48.570
> 
> 标签：python, c

我正在尝试在 C 中执行此操作，我在 Python 中有一些代码，但我不知道如何使它在 C 中工作，我已经习惯了高级语言，而 C 对我来说真的很新，也许你可以帮我翻译一下，我什么都没有，因为我不知道从哪里开始......

Python代码：

```
archivo = open('passwd.txt')
for linea in archivo:
        campos = linea.strip().split(':')
        print 'User',campos[0],'has shell',campos[6]
archivo.close() 
```

passwd.txt 如下：

```
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh 
```

输出应该是：

```
User root has shell /bin/bash
User daemon has shell /bin/sh
User bin has shell /bin/sh 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:57:10.820

它有点复杂，但基本上你需要知道两个关键的事情。我不会告诉你如何使用它们来做你想做的事，而只是展示如何使用它们。

第一个是逐行读取文件。这可以按如下方式完成：（[来源](http://www.daniweb.com/software-development/c/code/216411/reading-a-file-line-by-line)）

```
FILE *file = fopen ( filename, "r" );
char line [ 128 ]; /* or other suitable maximum line size */
while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
{
  fputs ( line, stdout ); /* write the line */
}
fclose ( file ); 
```

第二个是解析行。这里最好的工具是`strtok`. （[示例来源](http://www.gnu.org/software/libc/manual/html_node/Finding-Tokens-in-a-String.html)）

```
 const char string[] = "words separated by spaces -- and, punctuation!";
 const char delimiters[] = " .,;:!-";
 char *token, *cp;

 ...

 cp = strdupa (string);                /* Make writable copy.  */
 token = strtok (cp, delimiters);      /* token => "words" */
 token = strtok (NULL, delimiters);    /* token => "separated" */
 token = strtok (NULL, delimiters);    /* token => "by" */
 token = strtok (NULL, delimiters);    /* token => "spaces" */
 token = strtok (NULL, delimiters);    /* token => "and" */
 token = strtok (NULL, delimiters);    /* token => "punctuation" */
 token = strtok (NULL, delimiters);    /* token => NULL */ 
```

将两者放在一起，并弄清楚如何获得正确的节点，然后就可以了。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:38:18.960

@MatteoItalia 在评论中提出了一个很好的观点（关于以这种方式将 C 拼凑在一起）。这个问题最初是发布的，说明它是任务的一部分——正如 Matteo 所指出的，我不会**对**任何类型的“真实”代码建议这个过程。

* * *

当人们不展示他们所做的事情时，您会看到人们感到沮丧的原因是因为这里的大多数人都喜欢学习和解决问题。我和这个网站上的大多数人不属于同一个房间，但我认为我们都分享这一点:)

我对 C 完全一无所知，但这是我要解决的问题。正如其他人所提到的，互联网和一些点连接基本上可以帮助您解决任何问题，所以一定要使用它:)

首先要做的事情 - 如何在 C 中打开文件？[让我们谷歌一下](http://www.cprogramming.com/tutorial/cfileio.html)。跳到它谈论打开的部分，看看代码是这样的：

```
FILE *fp;
fp=fopen("test.txt", "r"); 
```

我知道我需要将它放入将使用 C 编译器编译的文件中，但我不知道如何运行它（使用 Linux）。[再次谷歌](http://www.cyberciti.biz/faq/run-a-c-program-in-linux/)。看起来你使用`gcc`，`-o`看起来它意味着`output`并将返回一个名为我键入的任何文件的文件，最后一个参数是 C 文件本身。

```
gcc -o learning learning.c 
```

现在我在编译/运行时遇到错误，我将假设它是因为我需要做的不仅仅是键入上面的代码。[谷歌多一点](http://roseindia.net/c-tutorials/c-file-open.shtml)。看起来我需要添加一些名为“标题”的东西。这些看起来像 Python 库，也许它们提供了额外的功能（根据我有限的 Python 经验，我知道 C 似乎被认为是非常优化的，所以也许优化的一部分来自不包括某些功能作为“内置”。同样，不确定，只是猜测）。

```
#include <stdio.h>
#include <conio.h>
void main() {
  FILE *fp;
  fp = fopen("passwrd.txt", "a");
  fprintf(fp, "%s\n ", "Hello World, Where there is will, there is a way.");
  fclose(fp) ;
} 
```

对我来说，这会导致`conio.h`. 我稍后会调查它，但现在删除并重试。现在它可以工作了，将该行添加到文件中。但是我不想要这个 - 我想读取文件。我会尝试更改`a`为`r`（因为它看起来像 Python `a`，我假设它的意思是`append`;`r`会读）。我还将删除其他参数`fprint`，看看会发生什么。没有骰子，显然我需要学习如何读取文件。[谷歌](http://www.programmingsimplified.com/c-program-read-file)和我看到了这个：

```
while( ( ch = fgetc(fp) ) != EOF )
   printf("%c",ch); 
```

我将它放在我的代码中代替`fprintf(fp);`，得到另一个关于未声明的变量和库的错误，将它们添加进去并获得以下内容，这很有效：

```
#include <stdio.h>
#include <stdlib.h>

void main() {
  char ch, file_name[25];
  FILE *fp;
  fp = fopen("passwd.txt", "r");

  while( ( ch = fgetc(fp) ) != EOF )
        printf("%c",ch);

  fclose(fp);
} 
```

现在我需要在拆分字符串时打印第一个和最后一个值。不知道该怎么做，让我们检查一下互联网（和[SO](https://stackoverflow.com/questions/2523467/how-to-split-a-string-to-2-strings-in-c)）。好吧，让我们进入一个新库，看看我们是否可以拆分内容。我将保存复制/粘贴，但我遇到越来越多的错误。我对编程知之甚少，但我遇到的一切似乎都表明分配、变量声明等方面的错误。我终于得到了一些工作（在找到一种[从文件中读取行的新方法](http://www.daniweb.com/software-development/c/code/216411/reading-a-file-line-by-line)之后——另一种方式看起来像是字符）。结合我之前所学的`fprint`（看起来它的行为类似于 Python 中的字符串格式），我得到了这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main ( void )
{
  char *token;
  char *search = ":";
  char line[256];
   static const char filename[] = "passwd.txt";
   FILE *file = fopen ( filename, "r" );
   if ( file != NULL )
   {
      char line [ 128 ];
      while ( fgets ( line, sizeof line, file ) != NULL )
      {
         token = strtok(line, search);
         printf("First: %s\n", token);
      }
      fclose ( file );
   }
   else
   {
      perror ( filename );
   }
   return 0;
} 
```

现在我需要结尾——我找到[了这个](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok_r.html)，并看到我可以`strtok`对字符串进行大量调用并将其分块。做一些关于如何循环和得到这个的更多研究：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main ( void )
{
  char *token;
  char *search = ":";
  char line[256];
   static const char filename[] = "passwd.txt";
   FILE *file = fopen ( filename, "r" );
   if ( file != NULL )
   {
      char line [ 128 ]; /* or other suitable maximum line size */
      while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
      {
         token = strtok(line, search);
         int counter;
         for (counter = 0; counter < 5; counter ++)
             strtok(0, search);
         char *last = strtok(0, search);
         printf("User %s has shell %s", token, last);
      }
      fclose ( file );
   }
   else
   {
      perror ( filename ); /* why didn't the file open? */
   }
   return 0;
} 
```

完美吗？没门。我知道它是做什么的吗？有点，但我需要进行更多研究以更好地理解它。总而言之，找到一种方法把它分成小块——答案可能在不同的地方，但它们几乎总是在那里:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:58:44.710

据我所知，如果您需要在 C 中操作文件。您可以使用 fopen() 打开文本。 [http://msdn.microsoft.com/en-us/library/yeby3zcb%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/yeby3zcb%28v=VS.71%29.aspx) 而且，您可以使用“EOF”来获取每个令牌。像这样：

```
while(gets() != EOF) 
```

所以，你可以得到每一行int text，只要把它保存在一个字符串中，printf就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:05:02.867

```
#include <stdio.h>
#include <string.h>

int main(void) {
   FILE *fp = fopen("/etc/passwd", "r");
   char line[999];
   while (fgets(line, sizeof line, fp)) {
      char *user = strtok(line, ":");
      char *shell;
      int i;
      for (i = 0; i < 4; i++)
         strtok(0, ":");
      shell = strtok(0, ":");
      printf("User %s has shell %s\n", user, shell);
   }
   fclose(fp);
   return 0;
} 
```

但是，如果 /etc/passwd 有空字段，由 表示`::`，`strtok`则将不起作用。您可以`strsep`改为使用，或仅使用`strchr`，如：

```
#include <stdio.h>
#include <string.h>

int main(void) {
   FILE *fp = fopen("/etc/passwd", "r");
   char line[999];
   while (fgets(line, sizeof line, fp)) {
      char *user = line;
      char *p = line;
      char *shell;
      int i;
      for (i = 0; i < 6; i++)
         p = strchr(p + 1, ':');
      shell = p + 1;
      strchr(user, ':')[0] = 0;
      printf("User %s has shell %s", user, shell);
   }
   fclose(fp);
   return 0;
} 
```

在我的机器上，一些所谓的 GECOS 字段是空的，并且用户`news`没有 shell。

# java - 查找二叉搜索树的最小元素

> ID：13755739
> 
> 赞同：0
> 
> 时间：2012-12-07T01:50:06.650
> 
> 标签：java, binary-search-tree

我无法找到二叉搜索树的最小元素。我已经完成了一些代码，但它不起作用。

```
public T getMinElement(TreeNode<T> node) {
    //TODO: implement this
    if (node == null){
        return null;
    }
     if (node.getLeftChild() == null){
        return (T) node;
     }
     else{
        return getMinElement(node);
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T01:52:23.403

你快到了！你只需要在你的二叉搜索树的左子节点上递归（总是保证更小）。你也有一些语法错误，我修复了。

```
public <T> T getMinElement(TreeNode<T> node) {
  if (node == null){
    return null;
  }
  if (node.getLeftChild() == null){
    return node.getData(); // or whatever your method is
  } else{
    return getMinElement(node.getLeftChild());
  }
} 
```

# apache - 1and1 共 享主机上的 mod_rewrite

> ID：13755743
> 
> 赞同：1
> 
> 时间：2012-12-07T01:50:54.283
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在尝试进行一些 URL 重写，但我的主机 (1and1) 和我对 .htaccess 文件的一点经验给我带来了麻烦。

具体来说，我正在尝试`/news`在我有一个文件的目录上设置 .htaccess`show.php`文件。我的目的是转换`www.example.com/news/blahblah`为`www.example.com/news/show.php?article=blahblah`.

到目前为止，我的 .htaccess 文件是（编辑：更新了我的 .htaccess，仍然没有解决方案）：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^/news/([a-z0-9_-]+)$ /news/show.php?article=$1 [L,NC]
</IfModule> 
```

我已经向我的主机发送了有关如何启用该模块的详细信息，他们回复说我应该输入这些行来启用该模块。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
</IfModule> 
```

我尝试使用 RewriteBase，并将其余行添加到文件中，但到目前为止我没有得到任何结果。我是 .htaccess 编码的新手，所以我对这些命令知之甚少，而且教程似乎没有回答我的问题，因此非常感谢任何帮助理解我做错了什么。

编辑：我更新了文件夹中的 .htaccess。我还在根文件夹上上传了支持文件，但没有结果。我仍然收到 404 Not Found 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:03:44.590

您添加的行不是必需的。似乎有几件事可能是问题所在。mod_rewrite 没有加载，因此该`<IfModule>`块永远不会执行。或者 htaccess 文件被忽略。

您应该能够判断是否删除了`<IfModule mod_rewrite.c>`and`</IfModule>`行，然后尝试转到某个页面。如果您收到 500 服务器错误，这意味着 mod_rewrite 未加载并且服务器正在呕吐，因为无法识别重写语句。否则，您可以尝试在 htaccess 文件中添加一些乱码，如果完全没有错误，则似乎 htaccess 文件被忽略了。

看到您在共享主机上，您需要联系 1and1 支持。我不知道他们如何运行他们的共享主机，但如果模块没有加载，那么他们需要加载重写模块，比如：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

否则他们需要使您的文档根目录可覆盖：

```
AllowOverride All 
```

以便 htaccess 文件可以重写 URI。

* * *

编辑：

> 不得不提一下，我在根文件夹上没有 .htaccess，只有 /news 文件夹。

这就是问题所在。您的规则需要更改为：

```
RewriteBase /news/
RewriteRule ^([a-z0-9_-]+)$ show.php?article=$1 [L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:35:14.847

找到了解决方案。我在根文件夹中上传了一个 .htaccess 文件，其中仅包含支持给我的内容，并且还在 news 文件夹中上传了我自己的 .htaccess 文件，并且它有效。新闻文件夹的正确 .htaccess 是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /news/

RewriteRule ^([a-z0-9_-]+)$ show.php?article=$1 [L,NC]
</IfModule> 
```

# iphone - phonegap ios）是否可以区分用户点击的推送通知？

> ID：13755746
> 
> 赞同：0
> 
> 时间：2012-12-07T01:51:07.883
> 
> 标签：iphone, ios, cordova

我正在使用 phonegap 推送通知插件，一切似乎都很好。push 没有任何问题。

但问题是当应用程序后台运行时我无能为力。

当应用程序后台运行时，可以到达多个推送通知。我不能指望哪个推

通知用户要点击。无论用户点击什么通知，应用程序都将在没有

用户选择信息。我必须根据什么通知触发不同的事件

用户选择。我需要知道应用程序恢复时用户选择了什么通知但不知道

知道如何...似乎很棘手的问题。有没有人有同样的问题？

你们是如何处理这个问题的？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:18:06.320

没关系...

我以为 window.plugins.pushNotifiction.getPendingNotification 会返回所有待处理

在应用程序处于后台时到达的通知。

但是 getPendingNotification 函数只返回用户选择的通知

通知中心或手机屏幕。

嗯。。看起来不错。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:11:27.063

您无法获取`all notification`应用程序关闭或应用程序期间触发的信息。在后台，但您可以在本机 iOS 应用程序中获取用户信息很快收到通知。

请关注此[**应用程序：didFinishLaunchingWithOptions。**](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW18) 在第一次启动调用时，您可以检查`options`并检索用户信息。有关更多信息，请参阅上面的链接。

# php - 如何根据数据库信息制作样式列表

> ID：13755747
> 
> 赞同：-3
> 
> 时间：2012-12-07T01:51:12.250
> 
> 标签：php, html, mysql, css, primary-key

我意识到这不是典型的问题，今晚我将删除它，以免占用空间与非代码错误问题，但我真的需要一些帮助。我正在尝试从问题数据库中提取信息并创建一个按问题标题组织的问题列表。当用户点击问题标题时，它会根据 question_id 将他们带到下一页。

我发布了当前如何显示问题列表的代码，但我不知道如何设置它们的样式以使其看起来真正吸引人。我会使用带有 10 个不同 id 的 10 个 div 标签，它们都指定了背景以及与顶部的距离吗？还是我会用一张桌子？或者还有什么我可以使用的吗？

我是 php 和 html 的新手，我真的不知道有很多方法可以显示从数据库中提取的信息....

Current_questions.php

```
<?php
        $i = 0;
        $str = "";
        $sql = "SELECT * FROM questions";
        $result = mysql_query ($sql, $conn) or die(mysql_error());
        if (mysql_num_rows($result) >= 0)
            {
                while ($row = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) 
                    {
                        $i++;
                        $str .= $i . ". ";
                        $str .= "<a href='show_question2.php?question_id=" . $row["question_id"] . "'>"
                                . $row["title"] . "</a> <br> ";
                    }
                print $str;

            } 
```

?>

此代码当前仅打印标题列表，这并不理想。谢谢！

我不是在寻找如何编码，只是建议最好的方法。几句话的简单答案就是我要寻找的全部 -</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:08:50.707

从最能描述您正在做什么的 HTML 实体开始。对我来说，这听起来像是一个[清单](http://reference.sitepoint.com/html/elements-list)。现在决定它是有序列表还是无序列表。如果不确定，请使用 u-ordered

您可能希望您的 html 以如下方式结束：

```
<ul>
   <li><a href='show_question2.php?question_id=1'>Question 1 Title</a></li>
   <li><a href='show_question2.php?question_id=2'>Question 2 Title</a></li>
   <li><a href='show_question2.php?question_id=3'>Question 3 Title</a></li>
 </ul> 
```

现在在互联网上查找有关样式列表的众多文章之一。

这里有3个让你开始：

1.  [http://www.alistapart.com/articles/taminglists/——](http://www.alistapart.com/articles/taminglists/)我是这些家伙的忠实粉丝
2.  [http://www.webreference.com/programming/css_style2/index.html](http://www.webreference.com/programming/css_style2/index.html)
3.  [http://www.marcofolio.net/css/8_different_ways_to_beautifully_style_your_lists.html](http://www.marcofolio.net/css/8_different_ways_to_beautifully_style_your_lists.html)

[一个真正快速而肮脏的列表示例](http://jsfiddle.net/9Eb7b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:22:54.977

学习一些 CSS 真的很有帮助

```
$toggle = false;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) 
                    {
                        $i++;
                        $str .= $i . ". ";
                        $toggle = !$toggle;
                        if($toggle)
                            $style = "background: Grey;";
                        else
                            $style = "background: White;";

                        $str .= "<a style='padding: 10px;$style' href='show_question2.php?question_id=" . $row["question_id"] . "'>"
                                . $row["title"] . "</a> <br> ";
                    } 
```

# php - .ajax 暂时停止从 PHP 脚本返回 .ajax

> ID：13755751
> 
> 赞同：0
> 
> 时间：2012-12-07T01:51:26.730
> 
> 标签：php, jquery, ajax, json

```
 $.ajax({ url: 'buildquery.php',
            data: {action: 'test'},
            type: 'post',
            success: function(output) {
                alert(output);
            }
        });

<?php
echo "Hello World!";
die();
?> 
```

在这种特殊情况下，我希望 PHP 脚本停止，以便我可以在浏览器窗口中看到输出，而不是返回到 .ajax 函数。这将用于调试目的，因此我可以输出一些数据，以便我的用户可以在应用程序正在构建时看到输出。这可以做到吗？备择方案？我虽然关于使用表单的提交功能，但这将导致调试和发布版本之间的一些代码更改。感谢您的任何评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:57:35.723

我建议将其写入 php 脚本中的文件。或者使用萤火虫。或者 chrome 开发者工具。（点击网络并选择XHR）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:13:57.187

我不确定我是否理解您的问题，停止 php 脚本是什么意思？你想看到什么输出？如果你想调试你的应用程序，你可以只使用 chrome 开发工具或 firebug。在 chrome 开发工具中，您可以在网络选项卡上看到网络请求（ajax 请求）。在 firebug 上，您可以在控制台上看到它。只需使用 console.log() 在控制台上记录一些东西。

# javascript - 在 JavaScript 中使用普通函数创建继承结构

> ID：13755752
> 
> 赞同：0
> 
> 时间：2012-12-07T01:51:27.610
> 
> 标签：javascript, oop, inheritance

因此，我正在阅读 John Resig 的 JavaScript Ninja 的秘密，并观看 Doug Crockford 关于 ECMAScript 5 的演讲，查看浏览器对 Object.create() 的支持，以及如何最好地使用 JavaScript 中的对象和继承。

我想出了一种我认为创建对象和继承的简单方法，我只是想问一下我是否完全忽略了一些陷阱等。好的，这里有一些代码：

```
// OOP - game enemy example

// Let's create a base enemy type, and two enemies that inherit from it.
// Enemies must be kept track of (how many have been "instantiated").
// Enemies will need to have HP, speed and names.
// Enemies will need to be able to take damage independent of other enemies.
// It must be possible to cause all enemies to double HP and speed or halve them.

// Enemy
function Enemy (name) {
  var enemy = {};
  enemy.name = name;
  enemy.currentHp = Enemy.baseHp * 100; // basic enemies have 100 hit points
  enemy.currentSpeed = Enemy.baseSpeed * 5; // basic enemies have 5 speed
  enemy.hp = Enemy.hp;
  enemy.speed = Enemy.speed;
  Enemy.count += 1; // Count each instantiated bad guy
  return enemy;
}
// Enemy properties (these are the same for all enemies)
Enemy.count = 0;
Enemy.baseHp = 1; // if we change this to 1.3 or .5 all the enemies in the game will be boosted or deminished...
Enemy.baseSpeed = 1; // ...same here.
// getter and setter for hp
Enemy.hp = function (value) {
  if (!!value) {
    return this.currentHp = ((this.currentHp * Enemy.baseHp) + value);
  }
  return this.currentHp * Enemy.baseHp;
};
// getter and setter for speed
Enemy.speed = function (value) {
  if (!!value) {
    return this.currentSpeed = ((this.currentSpeed * Enemy.baseSpeed) + value);
  }
  return this.currentSpeed * Enemy.baseSpeed;
};

// Trio enemy
function Trio (name1, name2, name3) {
  var trio = Enemy();
  trio.name = [name1, name2, name3];
  trio.currentHp = Enemy.baseHp * 30; // trios have less hp...
  trio.currentSpeed = Enemy.baseSpeed * 10; // ...but more speed
  Enemy.count += 3; // they raise the enemy count by three
  return trio;
}

// Boss enemy
function Boss (name) {
  var boss = Enemy(null);
  boss.name = name;
  boss.currentHp = Enemy.baseHp * 300; // Bosses have lots of hp...
  boss.currentSpeed = Enemy.baseSpeed * 1; // ...but they're super slow
  Enemy.count += 1;
  return boss;
} 
```

那么，我是否遗漏了什么，或者我是否符合我的标准？使用普通函数而不是构造函数和“new”是否会对性能产生巨大影响？还是 Object.create ？我以某种方式使内存过载？我很确定对于我只使用 Enemy.someMethod 在内存中创建一次的每个敌人的任何功能都是相同的。希望得到一些反馈。如果我需要调整诸如 enumerable 或 writable 之类的属性，我可以在我的“假”构造函数中使用 Object.defineProperties （或 Object.create 带有两个参数），对吗？像这样...

```
// Flyer
function Flyer (name) {
  var flyer = Enemy();
  // Using Object.defineProperties to assign attributes to properties.
  Object.defineProperties(flyer, {
    name: {value: name, enumerable: true},
    currentHp: {value: Enemy.baseHp * 50, writable: true, enumerable: true},
    currentSpeed: {value: Enemy.baseSpeed * 3, writable: true, enumerable: true},
  });
  Enemy.count += 1;
  return flyer;
} 
```

很想听听你的想法。

# ajax - 在 Rails 中如何使用 ajax？我在哪里放我的 Ajax 代码？

> ID：13755758
> 
> 赞同：0
> 
> 时间：2012-12-07T01:52:08.787
> 
> 标签：ajax, ruby-on-rails-3.2

如何在不刷新页面的情况下从数据库中获取数据？

*   我什至不知道从哪里开始...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:55:49.207

您需要从 onload.js 或页面特定的 js 文件 (example.js) 进行 AJAX 调用。然后，您需要运行`$.get`或`$.post`调用数据的 URL。

这是一个非常详细的教程：[http ://www.tutorialspoint.com/ruby-on-rails/rails-and-ajax.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-and-ajax.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T01:57:40.523

在 Rails 中，您需要实现一个页面，该页面从数据库中提取数据并以您喜欢的任何格式（纯文本/json/xml）显示数据。这部分没有异步的东西。

Ajax 将发生在前端，即 javascript 部分，异步连接到您在上面创建的网页。jQuery`$.ajax`将为您节省大量时间。

# c++ - 使用向量的“字符串下标超出范围”错误

> ID：13755759
> 
> 赞同：0
> 
> 时间：2012-12-07T01:52:13.463
> 
> 标签：c++, string, vector

我正在尝试从文本文件的特定列（在本例中为 0）中提取字符，并将它们加载到向量中。代码似乎可以正常工作，直到它到达最后，当我收到“字符串下标超出范围”错误时，我不知道如何解决这个问题。有谁知道我能做什么？这是相关的代码。

```
class DTree
{
private:

    fstream newList;
    vector<string> classes;
public:
     DTree();
    ~DTree();

void loadAttributes();
};

void DTree::loadAttributes()
{ 

string line = "";
newList.open("newList.txt");
string attribute = "";
while(newList.good())
{
    getline(newList, line);

    attribute = line[0];
    classes.push_back(attribute);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:09:26.457

请试试`'while(getline(newList, line)'`

参考[这里](https://stackoverflow.com/questions/4324441/testing-stream-good-or-stream-eof-reads-last-line-twice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:29:56.543

您也可以尝试类似

```
ifstream ifs("filename",ios::in);

string temp;
getline(ifs,temp)// Called as prime read

while(ifs)
{
    //Do the operations
    // ....

    temp.clear();
    getline(ifs,temp);
}
ifs.clear();
ifs.close(); 
```

这适用于几乎所有类型的文件。您可以根据您的要求`getline(ifs,temp)`按`get()`功能或运算符替换。`>>`

# arrays - 访问 Fortran 字符串中特定索引处的字符

> ID：13755762
> 
> 赞同：6
> 
> 时间：2012-12-07T01:53:03.743
> 
> 标签：arrays, string, fortran, character

有没有办法在fortran中访问字符串中的字符？如果我想将字符串“taco”的第一个字母存储在字符变量中，我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T02:20:06.243

可以使用类似于数组部分的语法对字符变量和常量进行“子字符串化”。

```
a_character_variable = "taco"(1:1) 
```

字符变量的子串也是一个变量——它可能出现在赋值语句的左侧。

# r - 如何在 R 包的数据文件中指定 R 代码

> ID：13755766
> 
> 赞同：0
> 
> 时间：2012-12-07T01:53:26.880
> 
> 标签：r, package

在我的 R 包中，我希望 R 将一些数据从外部服务器加载到主存储器。环顾四周，我在包的数据文件部分找到了纯 R 文件的选项 - [http://cran.r-project.org/doc/manuals/R-exts.html#Data-in-packages](http://cran.r-project.org/doc/manuals/R-exts.html#Data-in-packages)。

但是后来我找不到关于 R 代码如何在包的数据文件部分中工作以及如何调用它的文献。

如果有人也可以将我指向一个示例包，那将很有用。

# c++ - Visual Studio 2012 可以将 C++ 代码逆向工程为 UML 图表吗？

> ID：13755767
> 
> 赞同：2
> 
> 时间：2012-12-07T01:53:45.400
> 
> 标签：c++, visual-studio-2012, uml, reverse-engineering

当我最近升级到 Visual Studio 2010 Ultimate 时，我很高兴地发现了 Architecture 菜单。我立即得出了一个错误的结论，即我可以放弃我不太满意的手动创建 UML 软件，因此不必浪费时间让我的代码和 UML 保持同步。我很高兴地离开了，开始了一个新项目，我知道我可以把 UML 推迟到以后。因此，我很失望（根据[这个答案](https://stackoverflow.com/a/9665524/1227469)）发现虽然您可以在 VS2010 中将代码逆向工程到 UML，但您不能使用 C++ 来完成。

因此，我想知道是否有人可以告诉我 Visual Studio 2012 是否添加了此功能，因为我找不到有关此主题的任何信息 - 尽管我已阅读 VS2012 改进了 UML 的代码生成（即反过来）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:38:51.137

我已经安装了带有 Update 1 的 Visual Studio 2012 Ultimate，并且可以确认它不为 UML 逆向工程提供 C++ 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:35:25.960

[该](https://stackoverflow.com/questions/405953/generating-uml-from-c-code)线程虽然没有严格回答您的问题，但可能会对您有所帮助。

# jquery-plugins - 如何重置 jquery 插件数据表中的列顺序？

> ID：13755777
> 
> 赞同：0
> 
> 时间：2012-12-07T01:54:35.443
> 
> 标签：jquery-plugins, datatables

比如我有一些这样的数组数据：

```
{"aaData": [
[
  "Trident",
  "Internet Explorer 4.0",
  "Win 95+",
  "4",
  "X"
] 
```

]}

但我不希望它显示为以下顺序：“Trident”、“Internet Explorer 4.0”、“Win 95+”、“4”、“X”。如果我在第一列想要“Win 95+”并且我不想更改源数据顺序。我可以在 aoColumns 选项中进行配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:45:40.397

您可以像这样使用“mData”属性：

```
"aoColumns": [
              {"mData": 2 },
              {"mData": 0 },
              {"mData": 1 },
              {"mData": 3 },
              {"mData": 4 },
            ] 
```

“mData”的整数被视为数据源的数组索引。

在这里[http://www.datatables.net/usage/columns](http://www.datatables.net/usage/columns)你可以阅读更多关于它的信息。

# php - PHP：名称空间环境中的接口和继承

> ID：13755780
> 
> 赞同：0
> 
> 时间：2012-12-07T01:54:51.763
> 
> 标签：php, inheritance, zend-framework2

我正在尝试使用接口或子类在我对方法参数使用类提示并不断收到以下警告的情况下工作：

```
$print_r(class_parents($listing));
$propertyTable -> getPhotos($listing);

Array ( [Tools\Object\Property] => Tools\Object\Property ) 

Catchable fatal error: Argument 1 passed to Tools\Db\PhotoTable::getPhotos() must be an
instance of Tools\Db\Property, instance of Tools\Object\Listing given, called in ... 
and defined in ... 
```

这很奇怪，正如您在测试列表扩展属性时看到的那样（见下文）。为什么我会收到此错误？

我已经建立了一个非常基本的测试用例，并发现类型提示应该接受一个子类或一个实现所需类的类，其中该类是一个接口。但是，在名称空间 Zend Framework 2 环境中，我无法让它工作。

我的各种类的代码如下所示：

```
namespace Tools\Db;

class PhotoTable
{  
   public function getPhotos(Property $propertyObject )
   {  
    //code goes here    
   }
}

 namespace Tools\Object;
 use Tools\Object\PhotoInterface as PhotoInterface;

 class property //implements photoInterface
 {
    public function getUrl(){ code goes here}
    public function getPhotos(){ code goes here}
  }//end class

 use Tools\Object\PhotoInterface as PhotoInterface;

class Listing extends Property implements PhotoInterface
{
//code goes here
}

namespace Tools\Object;

interface PhotoInterface 
{
   public function getUrl();
   public function getPhotos();
} 
```

如果我将所有这些复制到一个文件中并消除命名空间，我可以让上面的代码工作。基本上：

*   如果我需要 PhotoTable 中的属性，我可以传递列表，因为它扩展了属性。
*   如果我需要 PhotoInterface，我可以传递列表，因为它实现了这个接口。

但是当我在名称空间 Zend Framework 2 环境中的不同文件中具有基本相同的类时，我得到了这个奇怪的错误。

在我需要考虑的名称空间环境中是否有额外的复杂性，或者我错过了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:29:20.477

该问题似乎涉及脚本头部中包含的名称空间文件。具体来说，您似乎不仅需要包含被传递的类，还需要包含指定的父类或任何接口类（如果它们在类型提示中指定）。

举个例子，如果我的类类型提示表明我需要“属性”类，那么如果我向它发送“列表”对象，我似乎需要在标题中包含这样的属性：

```
namespace Tools\Object;

use Tools\Object\Property;  //the parent class
use Tools\Object\Listing;  //the child class 
```

这样就消除了致命错误，但是 PHP 不能自动确定类似乎很奇怪。我认为这与名称空间环境的复杂性有关。

# google-apps-script - 即使通过 WebViewLink，Google 驱动器上公共文件夹中的文件也不可见

> ID：13755785
> 
> 赞同：1
> 
> 时间：2012-12-07T01:55:45.737
> 
> 标签：google-apps-script, google-drive-api

所以我使用了一个小的 Google Apps 脚本来创建一个公共文件夹（类型：任何人，角色：读者），然后我请求并收到了 WebViewLink。但是当我转到那个链接时，它说没有文件。我已经在该文件夹中放置了（通过 Google Drive 网络界面，而不是通过应用程序脚本）一个 index.html 文件（文档）。

我是否必须通过应用脚本制作文件夹中的所有文件？

我似乎在其中一个公告中听说过，一旦创建了文件夹，您就可以将文件放入其中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T07:07:57.567

自己找到了答案。文件夹中的文档必须是正确的类型，否则它们就不会显示。例如，名为 index.html 的 google docs 文档不是 html 文档。您必须在本地创建一个标准的 html 页面，然后上传它，但永远不要使用 google 文档（驱动器等）打开或编辑它才能看到它。我在 Google Drive 托管的网页上放了详细说明： [https ://googledrive.com/host/0B0ap0WDOII5mbjdwajNBMlRoZUU/](https://googledrive.com/host/0B0ap0WDOII5mbjdwajNBMlRoZUU/)

# javascript - 如何只选择一个单选按钮？

> ID：13755787
> 
> 赞同：1
> 
> 时间：2012-12-07T01:55:49.713
> 
> 标签：javascript, jquery, css, radio-button

我正在创建一个审查控制并使用单选按钮进行等级选择。我写了一些简单的 js 来在选中单选按钮时添加一个不同的类。

问题是您可以检查每个单选按钮，我希望用户只检查一个值。我用 javascript 编写这个，但欢迎使用 jQuery 或 smartare 解决方案。

**演示**：http: [//jsfiddle.net/cbqt8/5/](http://jsfiddle.net/cbqt8/5/)

**HTML：**

```
<div class="reviews">
<label class="input-check">
  <input onchange="change_state(this)" type="radio" value="1"   name="review[rating]" /> Bad
</label>
<label class="input-check">
  <input onchange="change_state(this)" type="radio" value="2"   name="review[rating]" /> Its okey
</label>
<label class="input-check">
  <input onchange="change_state(this)" type="radio" value="3"   name="review[rating]" /> Great
</label>
<label class="input-check">
  <input onchange="change_state(this)" type="radio" value="4"   name="review[rating]" /> Awesome
</label>
<label class="input-check">
  <input onchange="change_state(this)" type="radio" value="5"   name="review[rating]" />Super
</label>
</div> 
```

**JavaScript：**

```
function change_state(obj) {
    if (obj.checked) {
        //if radiobutton is being checked, add a "checked" class
        obj.parentNode.classList.add("checked");
    }
    else {
        //else remove it
        obj.parentNode.classList.remove("checked");
    }
} 
```

**CSS：**

```
/*reviews box*/
.reviews{
    padding: 25px;
    margin:0;
}
/*this is the style of an radio "button"*/
.input-check {
    display: inline-block;
    height:20px;
    padding:5px 8px;
    background:green;
    width:90px;
    color:white;
    text-align: center;
}
/* This is the style for a radio "button" */
.input-check.checked{
    background:red;
    color:black;
    font-weight:bold;
}
/*Hide the radiobutton*/
.input-check input {
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:06:26.953

您必须删除`checked`先前检查项目的类。

jsFiddle：http: [//jsfiddle.net/P8jB8/](http://jsfiddle.net/P8jB8/)

```
function change_state(obj) {

    if (obj.checked) {
        var checkedNodes = getElementsByClassName(document, "checked");
        for (var i=0;i<checkedNodes.length;i++) {
            checkedNodes[i].classList.remove("checked");
        }

        //if radiobutton is being checked, add a "checked" class
        obj.parentNode.classList.add("checked");
    }
    else {
        //else remove it
        obj.parentNode.classList.remove("checked");
    }
}

function getElementsByClassName(node,classname) {
  if (node.getElementsByClassName) { // use native implementation if available
    return node.getElementsByClassName(classname);
  } else {
    return (function getElementsByClass(searchClass,node) {
        if ( node == null )
          node = document;
        var classElements = [],
            els = node.getElementsByTagName("*"),
            elsLen = els.length,
            pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)"), i, j;

        for (i = 0, j = 0; i < elsLen; i++) {
          if ( pattern.test(els[i].className) ) {
              classElements[j] = els[i];
              j++;
          }
        }
        return classElements;
    })(classname, node);
  }
} 
```

​</p>

# javascript - 如何阻止 javascript 函数 (poll) 多次执行？

> ID：13755788
> 
> 赞同：0
> 
> 时间：2012-12-07T01:56:02.933
> 
> 标签：javascript, jquery, ajax

我有一个`poll()`功能：

```
$("document").ready(function(){
   poll(10);
   $("#refresh").click(function(){ poll(10); });
});

function poll(timeout){
   return setTimeout(function(){
      if (timeout == 10){
         timeout = 10000;
      }
      $.ajax({ url: "/ajax/livedata.php", success: function(data){
         $("#result").html(data);
         poll(timeout);
      }, dataType: "json"});
   }, timeout);
} 
```

那么，那里会发生什么：

1) 在页面加载时，`poll()`调用并开始执行循环。

2）在`#refresh`点击`poll()`时，立即调用以立即请求新数据。

**问题：**每当我点击`#refresh`请求新数据时，`poll()`都会再次调用，但多次触发（第一次初始+每次新点击）。因此，它不是按预期每 10 秒触发一次，而是每 10 秒触发多次（取决于我点击了多少次`#refresh`）。

我该如何解决这个问题，以便每当我单击时`#refresh`，只有 1 个实例会循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:00:00.560

首先将您的`setTimeout`对象存储到一个有点像这样的变量

```
var a = poll(10); 
```

然后使用此代码在单击刷新时停止它

```
clearTimeout(a); 
```

所以会是这样

```
$("document").ready(function(){
   var a = null;   
   $("#refresh").click(function(){ 
      if(a != null){
           clearTimeout(a);
           a = null;
      }
      a = poll(10); 
   });
}); 
```

参考：

[http://www.w3schools.com/jsref/met_win_cleartimeout.asp](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)

[http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_stop](http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_stop)

# physics - 在不同点施加力无法在 pymunk 中产生扭矩

> ID：13755789
> 
> 赞同：2
> 
> 时间：2012-12-07T01:56:09.943
> 
> 标签：physics, chipmunk, pymunk

我正在使用 pymunk 在其直径末端向圆形物体施加力。这些力的大小不同，并且都没有 x 分量（相对于身体，也就是说，它们垂直于直径）。我希望这些力一起在一定程度上旋转身体，但它们只是加在一起以创建一个没有 x 分量和 y 分量（因此，再次垂直于直径）的力矢量，这只是一个组合两种力量的大小。

pymunk 是否无法计算施加在身体不同点上的多个力的合成旋转？因为这是我什至使用物理引擎的唯一原因，如果是这样的话，我会非常失望。我将不胜感激有关此问题的任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:50:46.263

pymunk 应该能够计算轮换，除非我误解了这个问题。检查这个例子：

```
>>> b = Body(1,100)
>>> c = Circle(b,10)
>>> s.add(b,c)
>>> b.apply_impulse((100,0), (0,10))
>>> b.apply_impulse((-50,0), (0,-10))
>>> s.step(.1)
>>> b.angle
-1.5
>>> b.position
Vec2d(5.0, 0.0)
>>> s.step(.1)
>>> b.angle
-3.0
>>> b.position
Vec2d(10.0, 0.0) 
```

# c# - 如何在运行时动态更改批块的批大小？

> ID：13755790
> 
> 赞同：2
> 
> 时间：2012-12-07T01:56:23.833
> 
> 标签：c#, concurrency, task-parallel-library, tpl-dataflow, batching

我在 tpl 数据流中有一个批处理块，并且有几个目标块链接到批处理块。但是，目标块的数量会动态变化，因此批次的大小也会随之变化。问题是必须在初始化批处理块时提供批处理大小，我看不到稍后调整它的方法。任何想法如何解决这个问题？是取消链接的唯一方法（处理所有到批处理块和批处理块的链接），用新的批处理大小重新初始化批处理块，然后再次链接？我可以这样做，但是如何确保旧批次和新批次不会混在一起呢？

例如，如果我有 2 个转换块流式传输到批处理块，现在有一个额外的转换块并且想要将批处理大小增加到 3，我如何确保在增加之前处理所有先前的批处理以确保同步行为？关键是所有变换块都获得完全相同的项目，并且这些变换块的输出应该以只有那些匹配相同输入的输出被批处理的方式进行批处理。

这是我想要的示例：

用于转换块的恒定整数流：1,2,3，[批量大小增加的点]，4,5，...

让变换块输出他们得到的东西，比如 1 => 1

所以 batchblock 应该像这样输出：[1,1], [2,2], [3,3], [change of batch size], [4,4,4], [5,5,5],.. .

这是我当前的代码：

```
public class Test
{
    private Stopwatch watch;

    private BroadcastBlock<List<InputObject>> tempBCB;
    private BatchBlock<Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>> batchBlock;
    private TransformBlock<Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>[], List<FinalObject>> transformBlock;
    private ActionBlock<List<FinalObject>> justToFlushTransformBlock;

    private CoreLogic core1;
    private CoreLogic core2;

    public Test()
    {
        tempBCB = new BroadcastBlock<List<InputObject>>(input => input);

        //here batch size = 2
        batchBlock = new BatchBlock<Tuple<List<InputObject>,Dictionary<int,IntermediateObject>>>(2, new GroupingDataflowBlockOptions { Greedy = false });

        transformBlock = new TransformBlock<Tuple<List<InputObject>,Dictionary<int,IntermediateObject>>[],List<FinalObject>>(array =>
        {
            List<InputObject> inputObjects = array[0].Item1;
            List<FinalObject> ret = inputObjects.ConvertAll(x => new FinalObject(x));

            foreach (var tuple in array)
            {
                //iterate over each individual object
                foreach (var dictionary in tuple.Item2)
                {
                    ret[dictionary.Key].outputList.Add(dictionary.Value);
                }
            }

            return ret;
        }, new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded });

        justToFlushTransformBlock = new ActionBlock<List<FinalObject>>(list =>
            {
                //just in order to accept items from the transformBlock output queue
            });

        //Generate 2 CoreLogic objects
        core1 = new CoreLogic();
        core2 = new CoreLogic();

        //linking
        tempBCB.LinkTo(core1.transformBlock, new DataflowLinkOptions { PropagateCompletion = true });
        tempBCB.LinkTo(core2.transformBlock, new DataflowLinkOptions { PropagateCompletion = true });

        core1.transformBlock.LinkTo(batchBlock);
        core2.transformBlock.LinkTo(batchBlock);

        batchBlock.LinkTo(transformBlock, new DataflowLinkOptions { PropagateCompletion = true });

        transformBlock.LinkTo(justToFlushTransformBlock, new DataflowLinkOptions { PropagateCompletion = true });
    }

    public void Start()
    {
        const int numberChunks = 30;

        watch = new Stopwatch();
        watch.Start();

        for (int j = 1; j <= numberChunks; j++)
        {
            int collectionSize = 10000 * j;

            List<InputObject> collection = new List<InputObject>(collectionSize);
            for (int i = 0; i < collectionSize; i++)
            {
                collection.Add(new InputObject(i));
            }

            tempBCB.Post(collection);
        }

        tempBCB.Complete();

        Task.WhenAll(core1.transformBlock.Completion, core2.transformBlock.Completion).ContinueWith(_ =>
            {
                batchBlock.Complete();
            });

        transformBlock.Completion.Wait();

        watch.Stop();

        Console.WriteLine("Elapsed time (in milliseconds): " + watch.ElapsedMilliseconds);
        Console.ReadLine();
    }
}

public class CoreLogic
{
    private Random rand;
    public TransformBlock<List<InputObject>, Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>> transformBlock;

    public CoreLogic()
    {
        const int numberIntermediateObjects = 10000;

        transformBlock = new TransformBlock<List<InputObject>, Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>>(input =>
        {
            //please ignore the fact that `input` is not utilized here, the point is to generate a collection of IntermediateObject and return

            Dictionary<int, IntermediateObject> ret = new Dictionary<int, IntermediateObject>();
            for (int i = 0; i < numberIntermediateObjects; i++)
            {
                IntermediateObject value = new IntermediateObject(i);

                ret.Add(i, value);
            }

            var tuple = new Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>(input, ret);

            return tuple;
        });
    }
}

public class InputObject : ICloneable
{
    public int value1 { get; private set; }

    public InputObject(int value)
    {
        this.value1 = value;
    }

    object ICloneable.Clone()
    {
        return Clone();
    }

    public InputObject Clone()
    {
        return (InputObject)this.MemberwiseClone();
    }
}

public class IntermediateObject
{
    public int value1 { get; private set; }

    public IntermediateObject(int value)
    {
        this.value1 = value;
    }
}

public class FinalObject
{
    public InputObject input { get; private set; }
    public List<IntermediateObject> outputList;

    public FinalObject(InputObject input)
    {
        this.input = input;

        this.outputList = new List<IntermediateObject>();
    }
}

public static class Cloning
{
    public static List<TValue> CloneListCloneValues<TValue>(List<TValue> original) where TValue : ICloneable
    {
        List<TValue> ret = new List<TValue>(original.Count);

        foreach (TValue entry in original)
        {
            ret.Add((TValue)entry.Clone());
        }

        return ret;
    }
} 
```

# javascript - jQuery在appendTo之前查找和替换标签

> ID：13755797
> 
> 赞同：1
> 
> 时间：2012-12-07T01:57:14.987
> 
> 标签：javascript, jquery, html, replace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:00:06.630

应该是简单的 jQuery 魔术。

```
var $append = $( this );
    $append.find( 'div.left' ).remove();
    $append.find( 'strong' ).contents().unwrap();

$append.appendTo(".creating-wrapper .recipients"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:00:41.730

这个怎么样？

```
$("body").on("click", ".search-results li", function(){
    $(this).find('div.left').remove();
    $(this).find('strong').each(function() {
        $(this).after($(this).text()).remove();
    });
    $(this).appendTo(".creating-wrapper .recipients");
}); 
```

# seo - CANONICAL - 重复页面问题

> ID：13755803
> 
> 赞同：-1
> 
> 时间：2012-12-07T01:58:04.253
> 
> 标签：seo, canonical-link

有人可以帮我解决这个问题。

目前谷歌报告这两个链接是重复的。

[http://www.ozkidsactivities.com/n/jules-pony-rides-&-mobile-animal-farm/ozkids-36?activityId=1218](http://www.ozkidsactivities.com/n/jules-pony-rides-&-mobile-animal-farm/ozkids-36?activityId=1218)

[http://www.ozkidsactivities.com/n/jules-pony-rides-and-mobile-animal-farm/ozkids-36?activityId=1218](http://www.ozkidsactivities.com/n/jules-pony-rides-and-mobile-animal-farm/ozkids-36?activityId=1218)

但我们已经包含了规范标签：

```
<link rel="canonical" href="/n/jules-pony-rides-and-mobile-animal-farm/ozkids-36?activityId=1218" /> 
```

相对路径有问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:04:51.230

红色的，

规范 URL 标签可以引用相对路径（请参阅此处的 Google 指南 - [http://googlewebmastercentral.blogspot.co.uk/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.co.uk/2009/02/specify-your-canonical.html)），但是，我建议它更好更安全使用绝对 URL（即，包括协议和完整的主机名） - 鉴于许多网站往往可以被众多主机名访问（替代域、具有暴露 URL 的测试/开发环境等），最好引用正确的绝对 URL，以避免在搜索引擎发现这些 URL 时出现任何不利的不正确规范化。

不过，看起来您已经修复了您的解决方案，并通过将与号重定向到“和”以另一种方式解决了问题。干得好！

# python - 我尝试运行我的 python 程序但是当我运行它时没有任何反应

> ID：13755804
> 
> 赞同：0
> 
> 时间：2012-12-07T01:58:11.040
> 
> 标签：python

我在运行我用 python 编写的小互动故事时遇到问题。我不断遇到某种非 ASCII 错误或某种不允许我运行程序的错误。

如果您想尝试，这是程序：[程序] [1]这是我的代码：

```
#Programmer: 11/8/12
# Story of Doors
# Interactive story where the user can choose between options in between the - - marks.

def main():

    print "I welcome you to the mind of the chosen. A place only understood by those who never forfeit. The chance to walk through the halls is given only but once the time has come for you to decide, will you stand aside, or never regret to have tried?"

#Quest is the word used to decide whether the player wants to play or quit.
    Quest = raw_input("  I welcome you to the mind of the chosen. A place only understood by those who never forfeit. The chance to walk through the halls is given only but once the time has come for you to decide, will you stand aside, or never regret to have tried?")

    if(Quest == "stand aside"):
        print "Have fun asleep, for those who will awake are the ones who take the leap." 
    if (Quest == "never regret to have tried"):
        print "I see you think yourself as worthy, I hope you know, this quest is full of low beings"
    print "Down the hall you walked with a line of doors not covered or locked. The choices are at hand with many experiences to be had."
    print "Step into a door and never look back, for your decisions will open a crack. Your choices are at hand, choose from the list written in sand."

#here the reader\player decides what quest he wants to go on, or what door they want to open. 
    Opendoor = raw_input("Door 1: The door of no troubles where you see everything in doubles ") + ("Door 2: ")  
    if(Opendoor == "Door 1"):

        print "The incense infilled maple shaped door was entered to the begin the scene." 
    print "Going straight through to a land engulfed by the waves controlled, where the shore is seen when the machines flee."
    print "Out through a mix of purple and green lies The Beheaded Dragon who whispers and schemes. 'Come to my lab, and enjoy the lick of a colorful tab.'"
    print "After a flash of happy and sad, you see through perspectives and forget the word 'bad'."
    print "With witches and crafts, comes the great Sage whose be riddled with mad."
    print " I know of a place where the sky is purple and nobodies hurtful heaven at night is spoken of. The minds are torn up with a thought of what’s next."

    ComeAlong = raw_input(" Will you -join the quest- or -eschew the test-? ")
    if(ComeAlong == "eschew test"):
       print "'I accept your decline and reply with a good-bye.'"
    if(ComeAlong == "join quest"):
        print "'I'm glad you see yourself as worthy, just remember kid, in here. No mind is sturdy.'"
        print " Here begins a trip to the land of nomads where you witness a dance and give it a try, for you have no doubts as you see with one eye. Forgotten stories of the times of war, for the children are busy learning to soar."
        print "you join this man with not but one rule 'never turn back, for there are consequences for trying to hack.'"
        print "'This is a place of glitches and traps, but the end lies open with stitches to map'"
    Woman = raw_input(" You journey onward through the forest and trees but come across some women on their knees their eyes are locked and only you hold the keys. You're given the choice to open the lock and -allow them to see- or leave them locked and -mimick the birds and the bees-.")   
    if(Woman == "mimick the birds and the bees"):
        print "You approach the women and accept their tease. They looks up at you with a smile, and simultaneously screech 'We see your story has ended and can now be marked as 'deceased' and within a blink of an eye you are paralyzed with nothing to drink."
        wait(2)
    print "Nice try, but this saddly proves, you're not ready to fly. and with that I wave to you a sincere and heart felt good-bye!"
    if(Woman == "allow them to see"):
            print " You approach the women and give them the keys, they grabs them and begin to flee but while the flock reaches there caves one of the women stands beside you and opens the lock."
            print " 'I know where your headed and can lend you my boat, it's right around the corner sitting by the dock.'"
            print " As you follow the woman you look up onto the sky and read aloud 'Take a deep breath and watch your step' confused by the words you ask the woman 'Hey, whats that mean?' with no response you look down to her but see nothing but a stream"
            print " 'Hello!?' you scream, but no one is to be seen. All alone you begin to gleam followed by your lungs releasing the steam"
            print " With that the scene darkens and you rise from your sleep, just to realize life, is but a dream."

# Second Door of choices.

    if(Opendoor == "Door 2"):
        print "This is a story of a young wounded boy, who was lost in his mind with one little toy. He sat on the floor waiting for more, but after an hour his feelings went sour."
        print "He rose up on his feet and started to wonder. Through the bright door there were tons of new people to meet."
        print " He made it his duty to connect with these people, even if they were him in a past life or sequel."
        print " After some time came a decision. To speak with -the man in the white-, or -the woman with no sight-"
        if(Decision == "the man in the white"):
            print " 'Hello mister. May i ask you some questions?'"
            print " 'Why yes you may, but i dont have time to give you a lesson.'"
            print " 'They will be quick i promise, What brings you here to the land of nostradamus?'"
            print " ' Well isnt it obvious? Nothing more than the thirst for knowledge!'"
            print " 'Ahh I see, but what do you do if you cant find the answer to the riddle you speak?'"
            print " 'Then I learn a new language and ask it to Nietzsche' "
            print " 'What if its a question with no answer?'"
            print "' Then I forget about philosophy and become a great dancer! But in all seriousness, you musn't forget for every box of questions there is box of answers'"
        if(Decision == "the woman with no sight"):
            print " 'Hello miss, do you have some free time?'"
            print " ' Ofcourse I do, and i'll give you it for a dime' "
            print " 'If I pay it is not free ' "
            print " 'it's a reward, not a fee.'"
            print " ' okay but if i dont enjoy what you have to say will I still have to pay?'"
            print " ' I'm sorry but you pay for the herbs, not the tea.'"
            print " 'I understand the concept, but i'll have to disagree.'"

            main() 
```

这是我第一次使用 StackOverflow，所以如果还有什么我可以做的来帮助你们帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T02:04:26.897

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:02:30.840

你没有提到这是什么版本的 Python，但我猜是 2.7（绝对不是 3.x）。

当我将其保存为文件并在 2.7 中运行时，我得到：

> SyntaxError：第 30 行的文件 ./if.py 中的非 ASCII 字符“\xe2”，但未声明编码；有关详细信息，请参见[http://www.python.org/peps/pep-0263.html](http://www.python.org/peps/pep-0263.html)

这正是它所说的。在 Python 2.7 中，如果您想在字符串文字中键入任何非 ASCII 字符——即使只是类似的东西`é`——您必须提供编码声明。阅读错误消息中的 URL 以了解如何执行此操作。

另一种方法是转义字符。而不是打字`"Abré"`，你打字`"Abr\xe9"`——或者，更好，`u"Abr\u00e9"`——它会起作用的

同时，无论哪种方式，您几乎肯定希望字符串是 Unicode 字符串，而不是 8 位字符串。这意味着`"Foo"`您想要`u"Foo"`无处不在，而不是 ,。

# asp.net - 使用 ASP.NET 检索 Active Directory 列表的最佳方法

> ID：13755811
> 
> 赞同：0
> 
> 时间：2012-12-07T01:58:41.057
> 
> 标签：asp.net, active-directory

我对 ASP.NET 编程相当陌生。我正在设计一个 Web 项目，它将维护员工信息，例如审批模式、员工库存、索赔等。数据库将记录员工 ID 作为密钥。目前没有本地表存储员工ID和员工姓名的映射关系。这些信息将从 Active Directory 中检索。

新系统将允许用户进行员工查找，例如基于姓名或 ID，并生成报告，例如当月员工索赔列表。可以通过直接访问 AD 来实现查找，但我认为这不是生成员工/报告列表的好方法。因此，我打算将 AD 列表下载到本地数据库。

我的问题是：
1\. 将广告列表下载到本地数据库是否适合这种情况？有没有其他选择可以实现这一目标？

2.我要下载AD列表，如何定期更新？我只能想到清空表格并重新导入整个列表。

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:17:23.600

看看[http://linqtoad.codeplex.com/](http://linqtoad.codeplex.com/)我以前用过，非常成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:21:46.340

> “新系统将允许用户进行员工查找，例如基于姓名或 ID，并生成报告，例如当月员工索赔清单。”

听起来您不需要同时使用 AD 的所有员工。在那种情况下，我根本不会下载 AD 列表，因为这会使您处于必须处理数据库已过时的情况。只需从根据请求从 AD 检索数据开始，仅在遇到性能问题时才考虑优化。

# ios - 即使被告知不要，iOS6 方向仍在旋转

> ID：13755816
> 
> 赞同：2
> 
> 时间：2012-12-07T01:59:19.060
> 
> 标签：ios, ios6, screen-orientation

我的 iOS 应用程序似乎遇到了困难。

它的部署目标是 iOS5.0，但是我使用的是 iOS 6.0 SDK。

在我的视图控制器中，我有：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

这在 iOS5 模拟器中运行时效果很好。视图不会旋转到 LandScape 或倒置。

但是，在 IOS6 模拟器中（以及在设备上），它将继续旋转。

我曾经`NSLog`检查过`-supportedInterfaceOrientations`确实被调用了，并且确实调用了两次，但是它仍然旋转到 LandScape （右或左）

我究竟做错了什么？

我还扩展了`UINavigationController`（我的根视图控制器）以包含以下内容：

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{    
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

但仍然没有成功。

## 编辑

根据马特的回答。我还需要使用与我的 UINavigationController 类似的实现来扩展 UITabBarController 并且这很有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:12:38.650

问题可能是您有一个导航界面。你？如果是这样，您需要继承 UINavigationController 并使用该子类的实例作为导航控制器。在那个子类中，*这*就是你实现`supportedInterfaceOrientations`. 对于任何父视图控制器（例如 UITabBarController）也是如此。

原因是 iOS 6 对旋转的思考方式与 iOS 5*完全*不同。你认为你从 iOS 5 知道的任何东西都不再适用。在 iOS 6 中，我们从应用程序本身的级别开始，然后通过应用程序委托到根视图控制器或其他全屏视图控制器（例如呈现的视图控制器）并*停止*。父母不再咨询其子女。

此外，应用程序本身（通过 info.plist 或应用程序委托）必须列出应用程序*任何*部分可以采用*的**每个*方向；视图控制器只能请求其中的一个*子集*。

 ***请参阅发行说明：

[http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

但是，请注意，这句话是谎言：

> 为了兼容性，仍然实现 shouldAutorotateToInterfaceOrientation: 方法的视图控制器不会获得新的自动旋转行为

相反，在 iOS 6 中，旧的自动旋转方法被完全忽略了；每个人都会得到新的自转行为。它不是“选择加入”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:03:01.330

如果您不希望应用程序旋转，您可以从 info.plist 中支持的界面方向中删除横向，并且应该这样做。

否则你需要告诉你的根视图控制器去寻找它的孩子的方向信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:07:24.993

检查您的项目设置和 info.plist，它们的优先级高于应用委托。确保只选择了您想要的方向***

# c# - 对重新排列的问题进行排序的算法，知道新位置和旧位置

> ID：13755818
> 
> 赞同：0
> 
> 时间：2012-12-07T01:59:27.463
> 
> 标签：c#, algorithm, sorting

假设我有一堆问题字段，用户可以重新排列它们并将已更改位置的问题的新位置和旧位置发送到服务器，然后服务器将使用此数据更新所有受影响的问题数据库中的位置/数字值。如前所述，我只发回已移动问题的新位置和旧位置，而不是在它之前或之后影响的问题等。因此必须在服务器上进行计算。

所以可以说我有问题编号。

1 2 3 4 5 6 7 8

如果我重新排列它们

8 1 2 3 4 5 6 7

然后（问题 8）的新位置（现在是 1）和旧位置 (8) 之间的所有值都需要更新，1 - 7 得到 +1，8 被更改为 1。这当然是一个简化的在这种情况下，可以将问题重新排列为更大的复杂性，其中受影响的范围将重叠，而其他范围在其他范围内终止等。因此，所需的增量和减量将结合起来。听起来像是一个相当普遍的场景，所以如果有人可以举一个例子，最好在 c# 中会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:42:14.647

类似于上述答案的内容：您可以向问题对象添加一个“位置”属性（与其在列表中的位置无关）吗？用户在重新排列时会更改此属性。然后你可以做一个 ListOfQuestions.OrderBy(q => q.Position)？

这只是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:06:26.703

在我看来，这就像您试图简单地对集合进行随机插入和删除。

如果是这种情况，a`Linked List`是一个不错的选择。链表本质上有一个头节点（第一个节点），每个节点都有一个`next`属性，该属性引用另一个列表。

这样，如果你想删除一个节点，你可以让那个节点的父节点指向那个节点的子节点，如果你想插入一个节点，你可以做相反的事情。

[c# 有一个内置的链表类，您可能想签出](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:15:27.400

另一种方法是： 1\. 创建固定大小的列表/集合（集合 A） 2\. 将位置修改后的问题放在新位置/索引上 3\. 遍历原始问题集合并将未移动的问题放在空位置新集合（集合 A）。根据问题索引在新集合中的位置更新问题索引。

粗我知道。

# iphone - iPhone 按钮选定状态

> ID：13755821
> 
> 赞同：0
> 
> 时间：2012-12-07T02:00:05.550
> 
> 标签：iphone, objective-c, ios

我创建了两个紧挨着的按钮来模拟分段控件。我这样做是为了自定义 UIKit 允许的外观。我决定使用 selected 属性来保持按下按钮。我有两个图像，每个状态正常并选择一个。

问题是当我选择一个按钮时，由于高亮状态，按钮会高亮并变暗。我决定也将所选图像用于突出显示状态，但它会闪烁，任何想法或建议。

```
- (void)leftSegmentPressed:(id)sender
{
    if ([sender isSelected]) {
        [sender setSelected:NO];
    }
    else {
        [sender setSelected:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:09:34.690

对于“选中”按钮，禁用它并手动切换状态的图像。

```
- (void) viewDidLoad
{
    [rightSegmentButton setImage:[UIImage imageNamed:@"unselected.png"] forState:UIControlStateNormal];
    [rightSegmentButton setImage:[UIImage imageNamed:@"selected.png"] forState:UIControlStateDisabled];
    [leftSegmentButton setImage:[UIImage imageNamed:@"unselected.png"] forState:UIControlStateNormal];
    [leftSegmentButton setImage:[UIImage imageNamed:@"selected.png"] forState:UIControlStateDisabled];
}

- (void)leftSegmentPressed:(id)sender
{
    sender.enabled = NO;
    rightSegmentButton.enabled = YES;
}

- (void)rightSegmentPressed:(id)sender
{
    sender.enabled = NO;
    leftSegmentButton.enabled = YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:11:46.807

检查您提供的图像是否在您的`Bundle`或检查您提供的图像名称是否在`lower case`。然后像这样写

```
[button1 setImage:[UIImage imageNamed:@"normal1.png"] forState:UIControlStateNormal];
[button1 setImage:[UIImage imageNamed:@"selected1.png"] forState:UIControlStateSelected];
[button2 setImage:[UIImage imageNamed:@"normal2.png"] forState:UIControlStateNormal];
[button2 setImage:[UIImage imageNamed:@"selected2.png"] forState:UIControlStateSelected];

button1.tag = 1;
button2.tag = 2;

[button1 addTarget:self action:@selector(buttonSelected:) forControlEvents:UIControlEventTouchUpInside]
[button2 addTarget:self action:@selector(buttonSelected:) forControlEvents:UIControlEventTouchUpInside] 
```

在您的按钮事件方法中

```
-(void)buttonSelected:(id)sender {
    if([sender tag] == 1) {
        button1.selected = YES;
        button2.selected = NO;
    } else {
         button1.selected = NO;
         button2.selected = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:14:18.737

[按钮 setAdjustsImageWhenHighlighted:NO];

这将防止闪烁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:06:45.690

```
UIButton *yourButton1 = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
yourButton1.frame = CGRectMake(110.0, 360.0, 100.0, 30.0);
[yourButton1 setTitle:@"Left" forState:UIControlStateNormal];
yourButton.backgroundColor = [UIColor clearColor];
yourButton1.tag = 1;
[yourButton1 setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];    

UIImage *buttonImageNormal = [UIImage imageNamed:@"yourNormalImage.png"];// set normal image 
UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[yourButton1 setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];

UIImage *buttonImagePressed = [UIImage imageNamed:@"yourSelectedImage.png"];// set selected image
UIImage *strechableButtonImagePressed = [buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[yourButton1 setBackgroundImage:strechableButtonImagePressed forState:UIControlStateHighlighted];

[yourButton1 addTarget:self action:@selector(leftSegmentPressed:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:yourButton1]; 
```

对另一个第二个按钮执行相同操作。

并在操作方法中设置以下代码..

```
- (void)leftSegmentPressed:(id)sender
{
    UIButton *btnTemp = (UIBUtton *)sender;
    if (btnTemp.tag == 1) {
        [yourButton1 setSelected:YES];
        [yourButton2 setSelected:NO];
    }
    else {
        [yourButton1 setSelected:NO];
        [yourButton2 setSelected:YES];
    }
} 
```

# jquery - jQuery Sortable — 项目选择器的问题

> ID：13755823
> 
> 赞同：0
> 
> 时间：2012-12-07T02:00:14.367
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用 jQuery UI 中的 Sortable 插件。让它完美运行，但我不想排序，也不能将其他项目拖到第一个项目之上。我将此项目用作组的标题/标题，并且始终希望将其固定在第一个位置。

查看 jQuery 文档，看起来我应该使用项目选择器，但这会破坏整个脚本。

有任何想法吗？请参阅下面的代码和指向 JSFiddle 的链接。

HTML：

```
<div class="cart-group">
    <div class="cart-item no-drag">
        Title Div               
    </div>
</div>

<div class="cart-group"> 
    <div class='cart-item'>
        Cart Item
    </div>
    <div class='cart-item'>
        Cart Item
    </div>
    <div class='cart-item'>
        Cart Item
    </div>
</div>
            ​ 
```

JS：

```
$(".cart-group").sortable({
    connectWith: '.cart-group',
    opacity: 0.4,
    tolerance: 'pointer',
    cancel: '.no-drag',
    items:  'div:not(.no-drag),
}).disableSelection();​ 
```

链接到 JSFiddle：http: [//jsfiddle.net/fZCfh/](http://jsfiddle.net/fZCfh/)

使用 jQuery 1.7.2 和 jQuery UI 1.8.18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:38:52.550

您为什么将购物车组用作标题和项目的同一类？为标题创建一个新类。那么它将不受与物品相同的规则的约束。

```
<div class="cart-group-title">
    Title Div               
</div>
<div class="cart-group"> 
   <div class='cart-item'>
     Cart Item
  </div>
  <div class='cart-item'>
     Cart Item
  </div>
  <div class='cart-item'>
     Cart Item
  </div> 
```

# mediaelement.js - mediaelement.js 对 HLS 的支持

> ID：13755824
> 
> 赞同：9
> 
> 时间：2012-12-07T02:00:21.900
> 
> 标签：mediaelement.js, http-live-streaming

mediaelement.js 是否支持 HLS？我遵循[了这个](https://stackoverflow.com/questions/8002344/playback-of-segmented-hls-stream-with-m3u8-playlist)非常简单的示例，它声称支持 HLS。我还发现[这个](http://www.projekktor.com/board/index.php?mode=thread&id=1840)线程还声称 HLS 支持说明 mime 的重要性。但是，我无法播放我的任何流或我在网上找到的任何样本。是否有任何浏览器、操作系统或 mime 要求才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:40:42.063

您需要在库中进行一些更改。您可以查看我的更改。只需以支持的格式添加 m3u8，它似乎就可以完美地工作。[https://github.com/sourcebits-harshitakasera/mediaelement-and-player-v2](https://github.com/sourcebits-harshitakasera/mediaelement-and-player-v2)这似乎对我有用。

# maven - 为什么maven要先下载description jar的pom？

> ID：13755826
> 
> 赞同：0
> 
> 时间：2012-12-07T02:00:32.743
> 
> 标签：maven, jar, pom.xml

当我下载一个jar（通过maven的pom.xml）时，看起来maven会先下载jar的pom（***.pom）。为什么？如果没有jar的pom，我可以下载jar吗？jar的pom功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:49:08.797

您下载的 jar 可能依赖于其他 jar。此信息存在于 jar 的 pom 文件中。因此maven首先下载pom。

即使 pom 不存在，maven 也会下载 jar，但会发出警告。

# javascript - 添加/显示其他表单字段的最佳方式

> ID：13755832
> 
> 赞同：1
> 
> 时间：2012-12-07T02:01:09.857
> 
> 标签：javascript, html, css

我希望对完成以下任务的最佳方法有所了解。我想创建一个表单，允许在单击`+`或`add`按钮时添加更多字段。因此，例如，用户将填写一个文本字段，将其称为“描述”，然后在其旁边填写另一个字段，称为“单元号”。我想允许多个“描述”和“单元号”字段，而不在每次输入后提交表单，但为了保持网站看起来“干净”，我不希望有多个重复字段，如果用户只有需要将信息输入其中之一。我正在考虑使用 JavaScript 通过设置来隐藏其他字段`display:none`. 这是一个好的/有效的解决方案吗？有更好的解决方案吗？我是编程新手，所以如果您觉得这是一个愚蠢的问题，请放轻松。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:06:23.087

最好的方法是制作你的字段并将它们放入 a`div`然后隐藏它。对第一行使用 jQuery `.clone`，然后在用户单击`add`链接时更新字段名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:12:06.853

您可以使用像 mustache 或 handlebars 这样的模板库。您也可以使用 jQuery 来执行此操作。我的方法是动态生成新元素。我不会隐藏它，以便用户可以查看他是否已经在输入重复项。但是如果你想让你的标记更清晰，你也可以在用户已经输入了一些内容后隐藏该字段。所以当用户点击添加按钮时，你需要检查用户是否真的输入了一些东西，如果有输入，则隐藏它，然后再次生成一个新的输入。

如果您需要代码示例，请随时询问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:15:07.700

这是我不久前在自己的网站上写的一些 javascript：

```
 var SITE = SITE || {};

SITE.fileInputs = function() {
  var $this = $(this),
      $val = $this.val(),
      valArray = $val.split('\\'),
      newVal = valArray[valArray.length-1],
      $button = $this.siblings('.button'),
      $fakeFile = $this.siblings('.file-holder');
  if(newVal !== '') {
    $button.text('File Chosen');
    if($fakeFile.length === 0) {
      $button.after('<span class="file-holder">' + newVal + '</span>');
    } else {
      $fakeFile.text(newVal);
    }
  }
};
var counter = 1;
var limit = 5;
function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "<span class=\"file-wrapper\"><input type=\"file\" name=\"screenshot[]\" id=\"screenshot\" /><span class=\"button\">Choose a screenshot</span></span>";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
          $('.file-wrapper input[type=file]').bind('change focus click', SITE.fileInputs);
     }
}
$(document).ready(function(){
    $("#addss").click(function(){
        addInput("screenshots");
    });
}); 
```

然后，您可以将数组用作 php 中的名称或您用来处理数据的任何其他名称。

HTML：

```
<div id="screenshots">
     <span class="file-wrapper">
           <input type="file" name="screenshot[]" class="screenshot" />
           <span class="button">Choose a screenshot</span>
     </span>
</div>
<input type="button" id="addss" value="+Screenshot" class="btn" /> 
```

# ios - NSAttributedString typingAttributes 导致崩溃

> ID：13755836
> 
> 赞同：1
> 
> 时间：2012-12-07T02:01:48.973
> 
> 标签：ios, ipad, attributes, uitextview, nsattributedstring

我正在尝试检测哪些格式将应用于用户输入的新文本。这意味着光标有一个位置，但没有文本选择（即长度 = 0）。每次我尝试查询 typingAttributes 时，即使只是记录，应用程序也会崩溃。

```
Thread 1:EXC_BAD_ACCESS (code=2, address=0x4) 
```

在 Debug Navigator 中发生的最后一件事是：

```
WebCore::Frame::styleAtSelectionStart() const 
```

就在那之前，我看到

```
-[UITextView typingAttributes] 
```

如果我使用大于 0 的 selectedRange.length 进行登录，那似乎没问题。我试过在启用 Zombies 和 Guard Malloc 的情况下运行，但什么也没看到。

在我的测试项目中，一旦 UITextView 成为 firstResponder 就会发生崩溃：

```
- (void)textViewDidChangeSelection:(UITextView *)textView
{
    [self updateFormatButtons];
} 
```

检查属性的调用：

```
- (void)updateFormatButtons
{    
    UITextView *problemTextView = [self synopsisTextView];
    NSRange selectedRange = [self getSelectedTextRange];
    if (selectedRange.length == 0) // No text selected
    {
     // HELP - Why does the following line cause a crash?
     // NSLog(@"textViewFormatting options: %@", [problemTextView typingAttributes]);
    }
    else
    {
       NSLog(@"Some text selected"); // Fine here
       NSLog(@"textViewFormatting options: %@", [problemTextView typingAttributes]);
    }
} 
```

基于所选范围：

```
- (NSRange)getSelectedTextRange
{ 
    NSRange rangeToReturn = NSMakeRange(NSNotFound, 0);
    UITextView *textView = [self synopsisTextView];
    if ([textView isFirstResponder])
    {
        rangeToReturn = [textView selectedRange];
    }
    return rangeToReturn;
} 
```

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:03:33.210

问题似乎是当文本视图的选择发生变化时，typingAttributes 字典的内容会自动清除。因此，立即查询字典会引起某种冲突。在打电话之前延迟似乎已经解决了这个问题：

```
[self performSelector:@selector(updateFormatButtons) withObject:nil afterDelay:0.15]; 
```

# grails - 在 Grails 中，如何在单元测试中模拟 GrailsDomainBinder？

> ID：13755837
> 
> 赞同：2
> 
> 时间：2012-12-07T02:02:03.087
> 
> 标签：grails, discriminator, grails-2.0.4

我有一堆像这样的子类：

```
abstract class Fruit {
    ...

    String getType() {
        // get the discriminator value for this type
        GrailsDomainBinder.getMapping(this.class).discriminator
    }
}

class Apple extends Fruit {
    static mapping = {
        discriminator 'Apple'
    }
}

class Pear extends Fruit {
    static mapping = {
        discriminator 'Pear'
    }
} 
```

换句话说，`Fruit`是一个带有`Apple`和`Pear`作为子类型的基本类型。我公开了一个`type`获取子类中设置的鉴别器值的属性。

现在我有一个`JsonExportService`将实例导出为 JSON 数据的方法。当我运行应用程序时，该服务正确导出了`type`用鉴别器值填充的属性。

我现在需要为`JsonExportService`. 问题是，`GrailsDomainBinder`在单元测试中似乎没有被嘲笑，而且我得到 NPE: cannot access `discriminator`property on a null object。

我可以通过两种方式解决它：

1.  在每个子类中创建一个与鉴别器具有相同值的静态属性：

    ```
    class Pear extends Fruit {
        static String type = 'Pear'
        ...
    } 
    ```

    不过，这似乎真的很老套，我在两个地方声明了相同的值。

2.  `getType()`将代码更改为：

    ```
    GrailsDomainBinder.getMapping(this.class)?.discriminator 
    ```

    这可行，但现在我基本上完全忽略了鉴别器，并且单元测试并不“完整”，因为它需要后续集成测试以确保该`getType()`方法返回正确的值。

有谁知道从域映射中获取鉴别器值的更好的、单元测试友好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:19:37.200

似乎这`DefaultGrailsDomainConfiguration`是初始化映射的责任，因此您可以尝试：

```
def domainClass = grailsApplication.getDomainClass(Pear.class.name)
DefaultGrailsDomainConfiguration.configureDomainBinder(grailsApplication, [domainClass] as Set)
println GrailsDomainBinder.getMapping(Pear) 
```

# data-structures - Redis (no-sql) 应用程序的数据结构

> ID：13755838
> 
> 赞同：1
> 
> 时间：2012-12-07T02:02:28.130
> 
> 标签：data-structures, nosql, redis

我是 No-SQL 的新手，正在尝试找出一种构建投票应用程序的好方法。基本上，会有一个投票问题、大约 5 个可能的选择和用户 ID。

为此制作数据结构的最佳方法是什么？

# image-processing - OpenCV 摆脱孤立的像素

> ID：13755840
> 
> 赞同：2
> 
> 时间：2012-12-07T02:03:00.013
> 
> 标签：image-processing, opencv

我正在尝试从图像中删除孤立的像素。

我想过使用：

```
cvErode(img, img, 0, 1); 
```

问题是我想要一个内核：

```
0 0 0
0 1 0
0 0 0 
```

我不确定该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:52:54.247

重新阅读问题的标题后，现在我明白了你想要什么。您在[命中或未命中形态运算符](http://en.wikipedia.org/wiki/Hit-or-miss_transform)之后，您描述的内核实际上是一个 3x3 正方形，对于执行命中或未命中的函数来说非常好。OpenCV 似乎不支持它，但您可以通过对每个点邻域进行简单分析来执行您想要的等效操作：如果一个点未连接到任何其他点，则将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:19:41.510

这是我的 5 美分活动，虽然我根本不知道 openCV。

但是您应该考虑寻找一个名为“Opening”的功能。这是先腐蚀后膨胀。这将删除小的孤立像素。删除元素的大小当然取决于您使用的内核。

另一种选择是找到一个对图像进行低通滤波的函数。

不管你做什么，它归结为两个步骤。调用一个函数来创建一个内核。使用另一个函数将内核应用于图像。

不管你做什么！不要只使用“侵蚀”功能。它还将更改剩余图像上的元素。在这种情况下，您绝对应该使用“打开”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:12:00.817

您可以使用 filter2D 函数在 opencv 中使用自定义内核过滤图像。

看[文档](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#filter2d)

文档总是一个很好的起点:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:55:40.543

如果您使用的是新的 OpenCV 2.x API，您可以这样做：

```
cv::Mat kernel = (cv::Mat_<uchar>(3,3) << 0, 0, 0, 
                                          0, 1, 0, 
                                          0, 0, 0);
cv::erode(img, img, kernel); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T07:10:39.410

现在您通过将 NULL 作为第三个参数传递来设置默认内核。

您应该使用[http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#getstructuringelement](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#getstructuringelement)并将输出作为 erode 函数的参数传递。

如果你不能用这个函数生成你的内核。只需手动创建 IplConvKernel 元素。

# makefile - Makefile string substitution in dependency not working

> ID：13755842
> 
> 赞同：1
> 
> 时间：2012-12-07T02:03:04.607
> 
> 标签：makefile

I have a folder structure where all my source files are in ./src/, and all my object files are in ./obj/ (with the same internal directory structure, mirrored using path substitutions). I've created the following makefile:

```
$(EXECUTABLE): $(OBJECTS)
    @echo Linking $(EXECUTABLE)...
    $(CXX) $(LDLIBS) $(OBJECTS) -o $(EXECUTABLE)

%.o: $(subst o,cpp,$(subst obj/,src/,$@))
    @echo Building $@...
    $(CXX) $(CPPFLAGS) -c $(subst o,cpp,$(subst obj/,src/,$@)) -o $@ 
```

Which doesn't work! Make keeps claiming that the object files are up to date, even when the source file is actually older than the object file. On the other hand, if I do this:

```
obj/main.o: src/main.cpp
    @echo Building $@...
    $(CXX) $(CPPFLAGS) -c src/main.cpp -o $@ 
```

For every source file, it works perfectly. I checked, and the two `subst` give the same result (obj/main.o becomes src/main.cpp as expected). Yet Make doesn't accept the dependency for some reason.

This is giving me a lot of grief, can somebody explain where I am going wrong? I don't understand what is going on, I thought my substitution would work the same since it gives the same output. Am I not allowed to use `subst`, or `$@` in the dependencies or something?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T03:30:33.673

You can't use `$@` in the prerequisites, only in the commands.

But you can do this:

```
$(OBJECTS): obj/%.o : src/%.cpp
    @echo Building $@ from $<...
    $(CXX) $(CPPFLAGS) -c $< -o $@ 
```

# .net - .NET 是否有用于创建带有图标的 ControlPanel 样式布局的组件？

> ID：13755844
> 
> 赞同：0
> 
> 时间：2012-12-07T02:03:11.610
> 
> 标签：.net, wpf, winforms

是否有用于 .NET WinForms 或 WPF 的组件来创建带有图标的 ControlPanel 样式布局？
我想要一个看起来像控制面板的窗口，里面有可变数量的图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:14:20.880

例如：

```
<UniformGrid>
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top">
        <Image Width="48" 
                Height="48" 
                Source="appbar.forklift.load.png" />
        <TextBlock VerticalAlignment="Center">
            <Hyperlink>Action Center</Hyperlink>
        </TextBlock>
    </StackPanel>
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top">
        <Image Width="48" 
                Height="48" 
                Source="appbar.forrst.png" />
        <TextBlock VerticalAlignment="Center">
            <Hyperlink>Keyboard</Hyperlink>
        </TextBlock>
    </StackPanel>
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top">
        <Image Width="48" 
                Height="48" 
                Source="appbar.forklift.png" />
        <TextBlock VerticalAlignment="Center">
            <Hyperlink>Notification</Hyperlink>
        </TextBlock>
    </StackPanel>
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top">
        <Image Width="48" 
                Height="48" 
                Source="appbar.forklift.load.png" />
        <TextBlock VerticalAlignment="Center">
            <Hyperlink>Region</Hyperlink>
        </TextBlock>
    </StackPanel>
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top">
        <Image Width="48" 
                Height="48" 
                Source="appbar.forklift.load.png" />
        <TextBlock VerticalAlignment="Center">
            <Hyperlink>Speech</Hyperlink>
        </TextBlock>
    </StackPanel>       
</UniformGrid> 
```

您可以根据需要添加任意数量，它们将为您布置。（取决于您真正想要的东西，包装板可能会更好）。

然后，如果您使用 MVVM，则可以将每个链接的“命令”属性绑定到 ViewModel 上的命令。

```
<HyperLink Command="{Binding OpenActionLinkCenterCommand}">Action Center</HyperLink> 
```

如果您希望项目来自集合，您可以使用 ItemsContainer 或 ListBox 并更改 ItemsPanel 模板

```
<ListBox ItemsSource="{Binding YourControlPanelItems}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
</ListBox> 
```

当然还有很多方法，这只是一个小例子。

# r - 使用“by”创建多个图形标题

> ID：13755845
> 
> 赞同：5
> 
> 时间：2012-12-07T02:03:16.147
> 
> 标签：r, traminer

我正在尝试使用“for”的“by”来使用一个或两个组变量创建许多子图。两个组变量都是因子变量（性别是一个虚拟变量，父亲的社会地位有多个层次）。如何在图例或图表标题中添加组的级别（也称为名称）？

这是我正在使用的代码。

```
library(TraMineR)  
library(Hmisc)
data(biofam)
biofam.lab <- c("Parent", "Left", "Married", "Left+Marr",
            "Child", "Left+Child", "Left+Marr+Child", "Divorced")
biofam.seq <- seqdef(biofam, 10:25, labels=biofam.lab)

class(biofam$sex)
levels(biofam$sex)
describe(biofam$sex)

class(biofam$cspfaj)
levels(biofam$cspfaj)
describe(biofam$cspfaj)

### Simple plots
seqdplot(biofam.seq)
seqdplot(biofam.seq, group=biofam$sex, title="Marital status by gender")

### Plot with automatic title using "by"
by(biofam.seq, biofam$sex, function(X) seqdplot(X, title="X$sex[1]"))
by(biofam.seq, biofam$sex, function(X) seqdplot(X, title=X$sex[1]))

### Plot with automatic title and multiple-grouping using "for"
for(n in c(1, 2, 3)) {
  seqdplot(subset(biofam.seq, subset=biofam$cspfaj==(n)), title="(n)")
}
for(n in c(1, 2, 3)) {
  seqdplot(subset(biofam.seq, subset=biofam$cspfaj==(n)), group=biofam$sex, title="(n)")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:14:37.373

您可以通过将 data.frame 子集传递为`function(X)`：

```
by(data.frame, data.frame$group, function(X) seqdplot(X, title=X$group[1])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:30:56.843

seqdplot 函数可以使用 group 参数自动为您完成：

```
seqdplot(seqobject, group=data.frame$group) 
```

其中 seqobject 是使用 seqdef 函数创建的对象。

# actionscript-3 - FLASH AS3 外部类

> ID：13755849
> 
> 赞同：2
> 
> 时间：2012-12-07T02:03:40.793
> 
> 标签：actionscript-3, flash, class, external

我对 as3 有疑问。

我已经完成了一个 Flash 应用程序，该应用程序在与 swf 相同的文件夹中包含一个外部类。现在的问题是，当我编辑外部类的信息（使用记事本++）时，swf 没有改变。就像外部类已被硬编码到应用程序本身一样。

我必须对发布设置进行一些更改吗？

谢谢你们的时间。真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:09:39.437

是的，您必须将您的项目重新编译到 swf 中。（至少我在写 AS3 程序的时候是这样的）

您不能只期望 swf 看到您的更改并重新编译自己（尽管如果这样做会很棒）。

只需像第一次构建它一样重新构建您的 Flash 应用程序。

# c++ - 使用构造函数推断类模板参数

> ID：13755854
> 
> 赞同：0
> 
> 时间：2012-12-07T02:04:00.780
> 
> 标签：c++, templates

我有以下模板类：

```
template <typename T>
struct timer
{
    T period;

    timer(T p) :
        period(p)
    {}
}; 
```

要实例化它，我需要做：

```
timer<double> t(double(0.0)); 
```

是否可以改进`timer`类定义以允许这种语法：

```
timer t(double(0.0)); 
```

并让编译器`double`从构造函数的参数中推断出类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:09:04.167

不，这是不可能的，扣除只适用于函数。通常的解决方案是编写一个`make_`返回新实例的函数。这是 C++11：

```
template <typename T>
timer<T> make_timer(T&& p) {
  return timer<T>(std::forward<T>(p));
}

auto t = make_timer(0.0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:09:24.807

不，你不能那样做。在这些情况下不会发生类型推断。您可以使用`auto`关键字和函数模板来使事情变得更容易：

```
template<typename T>
timer<T> make_timer(T value) {
    return value;
}

// let the compiler deduce double
auto t = make_timer(0.0); 
```

请注意，此`auto`关键字的使用仅在 C++11 标准中有效。

此外，对于这种特定情况，您可以`typedef`使用`double`计时器：

```
typedef timer<double> timer_d;

timer_d t(0.0); 
```

虽然我仍然会使用第一个解决方案，但如果您能够使用 C++11。

# mysql - Mysql的查询缓存和内存存储

> ID：13755858
> 
> 赞同：0
> 
> 时间：2012-12-07T02:04:31.420
> 
> 标签：mysql

我的静态表很少，我想使用缓存系统，Mysql 的查询缓存或将数据库存储更改为内存（堆）。我需要专家的建议，哪一个会更好？或者我可以同时使用吗？
DB MySql，键入 MyISAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:17:54.163

查询缓存是自动使用的，尽管它可能不是很大——默认值很小。阅读[https://blogs.oracle.com/dlutz/entry/mysql_query_cache_sizing](https://blogs.oracle.com/dlutz/entry/mysql_query_cache_sizing)以获取有关将其设置为合理值的一些建议。我将其设置为 64 MB。

内存表不保存它们的数据——它们的内容在服务器重新启动时丢失。因此，如果您想使用它们，您将需要与“真实”表进行大量手动同步 - 可能不可靠且容易出错。在 12 年的编程生涯中，我从未使用过它们。

# google-apps-script - UrlFetch 的参数无效

> ID：13755863
> 
> 赞同：8
> 
> 时间：2012-12-07T02:05:24.947
> 
> 标签：google-apps-script, urlfetch

我正在尝试通过 Google Apps 脚本运行 MongoLab（基于 REST 的 MongoDB 访问）查询。从记录器生成的 URL 如下所示
[https://api.mongolab.com/api/1/databases/abcd/collections/efgh?apiKey=XXXXXXXXXXXXXXXX&q=](https://api.mongolab.com/api/1/databases/abcd/collections/efgh?apiKey=XXXXXXXXXXXXXXXX&q=) {"created_on":{"$gte":"Thu Dec 06 00:00:00 PST 2012","$lt":"Thu Dec 06 23:59:59 PST 2012"}}
当我在浏览器中键入此内容时，它会工作并得到我正在寻找的响应。但是通过 UrlFetchApp 运行它会出现“无效参数”错误。我看到有几篇相同的帖子，但没有找到适合我的答案。Javascript代码如下

```
//start and end are JS date objects  
var query = { created_on : {'$gte': start, '$lt' : end} };
var url = MONGO_LAB_URLS.MAIN + "&q=" + Utilities.jsonStringify(query);  
Logger.log("Query URL : " + url);  
var response = UrlFetchApp.fetch(url); 
```

我尝试了 encodeURIComponent，但它不起作用 - 可能是我做错了。关于如何克服这个问题的任何建议？
谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T03:18:32.163

出现无效参数，因为您在 URL 参数中发送了无效字符。您应该首先对参数进行编码。

我修改了您的代码并尝试运行。但它仍然失败，因为无效的 API 密钥很明显。您可以使用有效的 API 密钥尝试此代码。

```
//start and end are JS date objects
  MONGO_LAB_URLS = 'https://api.mongolab.com/api/1/databases/abcd/collections/efgh?apiKey=XXXXXXXXXXXXXXXX&q=';
  var start = 'Thu Dec 06 00:00:00 PST 2012';
  var end = 'Thu Dec 06 23:59:59 PST 2012';

  var query = { created_on : {'$gte': start, '$lt' : end} };
  var url = MONGO_LAB_URLS + encodeURIComponent(Utilities.jsonStringify(query));  
  Logger.log("Query URL : " + url);  
  var response = UrlFetchApp.fetch(url);
  Logger.log(response); 
```

我得到的回应是

```
Request failed for https://api.mongolab.com/api/1/databases/abcd/collections/efgh?apiKey=XXXXXXXXXXXXXXXX&q=%7B%22created_on%22%3A%7B%22%24gte%22%3A%22Thu%20Dec%2006%2000%3A00%3A00%20PST%202012%22%2C%22%24lt%22%3A%22Thu%20Dec%2006%2023%3A59%3A59%20PST%202012%22%7D%7D returned code 400\. Server response: { "message" : "Please provide a valid API key."} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-05T11:23:16.757

[这](https://groups.google.com/forum/#!topic/adwords-scripts/pIzEDFGBW7I)对我有用，基本上只需添加这一行：

`var urlEncoded = encodeURI(url);`

然后打电话

`UrlFetchApp.fetch(urlEncoded);`

# html - 为什么这个内部div的内容在firefox中会意外地向左折叠？

> ID：13755871
> 
> 赞同：2
> 
> 时间：2012-12-07T02:06:38.733
> 
> 标签：html, css, firefox, cross-browser

我试图弄清楚为什么[这个网站](http://colinbarclay.com)中的内部 div会在 Safari 和 Chrome 中正确显示，但在 Firefox 中会出错。我在这里的[jsfiddle](http://jsfiddle.net/squigworm/Xfcdu/1/)上有代码。我对网页设计相当陌生，所以我可能遗漏了一些非常明显的东西，但我似乎无法弄清楚，也无法在网上的任何地方找到解决方案。非常感谢任何和所有帮助。

科林

```
 <!doctype html>
 <html>
 <head>
 <meta charset="UTF-8">

 <title>Code Example</title>

     <link href="_css/main_full.css" rel="stylesheet" type="text/css">
     <script src="_js/jquery-1.8.2.min.js"></script>
     <script src="_js/gallery.js"></script> 

 </head>

 <body>

 <div class="page_container">          

        <div class="gallery_container">

<a href="sunlight.html" title="© C.M.B 2012"><img id="pos1" src="_images/galleryimages_full/sunlight_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>

<a href="clownflat.html" title="© C.M.B 2012"><img id="pos2" src="_images/galleryimages_full/clownflat_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>  

<a href="goldensun.html" title="© C.M.B 2012"><img id="pos3" src="_images/galleryimages_full/goldensun_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>               

<a href="monstertheatre.html" title="© C.M.B 2012"><img id="pos4" src="_images/galleryimages_full/monstertheatre_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>          

<a href="home.html" title="© C.M.B 2012"><img id="pos5" src="_images/galleryimages_full/home_smallvector.jpg" width="250" height="194" alt="© C.M.B"></a>                 

<a href="wishingstar.html" title="© C.M.B 2012"><img id="pos6" src="_images/galleryimages_full/wishingstargallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="cozycave.html" title="© C.M.B 2012"><img id="pos7" src="_images/galleryimages_full/cozycave_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="coffeetable.html" title="© C.M.B 2012"><img id="pos8" src="_images/galleryimages_full/coffeetable_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>               

<a href="breakaway.html" title="© C.M.B 2012"><img id="pos9" src="_images/galleryimages_full/breakaway_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="happynappy.html" title="© C.M.B 2012"><img id="pos10" src="_images/galleryimages_full/happyns_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="boymeetsgirl.html" title="© C.M.B 2012"><img id="pos11" src="_images/galleryimages_full/boymeetsgirl_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="sadbaby.html" title="© C.M.B 2012"><img id="pos12" src="_images/galleryimages_full/sadbabygallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="salvation.html" title="© C.M.B 2012"><img id="pos13" src="_images/galleryimages_full/salvation_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="orangestart.html" title="© C.M.B 2012"><img id="pos14" src="_images/galleryimages_full/orangestart_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="spaceobjects.html" title="© C.M.B 2012"><img id="pos15" src="_images/galleryimages_full/spaceobjectsgallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="clown.html" title="© C.M.B 2012"><img id="pos16" src="_images/galleryimages_full/clown_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="ponycave.html" title="© C.M.B 2012"><img id="pos17" src="_images/galleryimages_full/ponycave_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="pacha.html" title="© C.M.B 2012"><img id="pos18" src="_images/galleryimages_full/pacha_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="goldstorm.html" title="© C.M.B 2012"><img id="pos19" src="_images/galleryimages_full/goldstorm_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="qero.html" title="© C.M.B 2012"><img id="pos20" src="_images/galleryimages_full/qerogallery_full.jpg" width="250" height="194" alt="© C.M.B 2012"></a>                 

<a href="bluesinmyheart.html" title="© C.M.B 2012"><img id="pos21" src="_images/galleryimages_full/theblues_smallvector.jpg" width="250" height="194" alt="© C.M.B 2012"></a>   

        </div>  

</div>   
</body>
</html> 
```

**CSS**

```
@charset "UTF-8";
/* CSS Document */

/* Layout (global rules for fullsize) */

.page_container {
width: 1280px;
height: 3000px;
background-image: url(../_page_components/gallery/gallery_full.jpg);
margin: 0 auto 0 auto;
/*position: relative;*/
/* padding-top: 19.541%; 248 pixels*/
}

.gallery_container 
{
width: 66.7%;  /* 853 pixels */
height: 55.3%; /* 1659 pixels */
/*margin: 19.541% auto 0% auto; - equal to 248px*/
padding: 19.5% 0 0 0;
margin: 0% auto 0% auto;
}

#pos1 {  /* Top Left Corner*/
padding-left: 0.3%;
padding-right: 4.91%;   
padding-bottom: 5.3%;
}

#pos2 {  /* Middle top row */
padding-left: 0.42%;    
padding-bottom: 5.3%;
}

#pos3 {  /* Topr Right Corner */
padding-left: 5.35%;
padding-bottom: 5.3%;
}

#pos4 {  /* The rest of the images/rows follow the same positioning pattern */
padding-left: 0.4%;
padding-right: 4.75%;   
padding-bottom: 5.3%;
}

#pos5 {
padding-left: 0.5%;
padding-bottom: 5.3%;
}

#pos6 {
padding-left: 5.15%;
padding-bottom: 5.3%;
padding-right: 0.2%;
}

#pos7 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.3%;
}

#pos8 {
padding-left: 0.5%;
padding-bottom: 5.3%;
}

#pos9 {
padding-left: 5.25%;
padding-bottom: 5.3%;
 }

#pos10 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.3%;
}

#pos11 {
padding-left: 0.5%;
padding-bottom: 5.3%;
}

#pos12 {
padding-left: 5.25%;
padding-bottom: 5.3%;
}

#pos13 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.4%;
}

#pos14 {
padding-left: 0.5%;
padding-bottom: 5.4%;
}

#pos15 {
padding-left: 5.25%;
padding-bottom: 5.4%;
}

#pos16 {
padding-left: 0.5%;
padding-right: 4.55%;   
padding-bottom: 5.6%;
}

#pos17 {
padding-left: 0.5%;
padding-bottom: 5.6%;
}

#pos18 {
padding-left: 5.25%;
padding-bottom: 5.6%;
}

#pos19 {
padding-left: 0.5%;
padding-right: 4.55%;   

}

#pos20 {
padding-left: 0.5%;

}

#pos21 {
padding-left: 5.25%;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:22:50.957

## 使固定

设置`.gallery_container img { display: inline-block;}`修复它。[见小提琴](http://jsfiddle.net/Xfcdu/4/)。

## 为什么

显然 Firefox 并不一定将其`img`视为`display`一开始的设置，而其他浏览器显然是。请注意，我实际上并没有在您的网站上看到 Firefox 17 中的问题，只是在小提琴中，这让我认为这与未加载图像有关。

# d - 有人能解释一下D语言模板速记形式吗？

> ID：13755873
> 
> 赞同：14
> 
> 时间：2012-12-07T02:06:54.207
> 
> 标签：d

我有一位教授用速记写了他所有的 D 模板示例：

```
T exec(alias f,T)(T t) {
    return f(t);
} 
```

我找不到任何解释这意味着什么的例子。这里有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T02:20:37.860

在函数模板中，第一组括号保存模板参数，第二组保存函数参数。

[http://dlang.org/template.html#function-templates](http://dlang.org/template.html#function-templates)

您可以将其重写为：

```
template exec(alias f, T) {
    T exec(T t) {
         return f(t);
    }
} 
```

在使用点，如果模板成员与模板本身同名，则不必写两次。这被称为同名技巧。[http://www.bing.com/search?q=eponymous+trick+d+programming+language&qs=n&form=QBRE&pq=eponymous+trick+d+programming+languag&sc=0-0&sp=-1&sk=](http://www.bing.com/search?q=eponymous+trick+d+programming+language&qs=n&form=QBRE&pq=eponymous+trick+d+programming+languag&sc=0-0&sp=-1&sk=)

尽管我见过的大多数 D 代码都使用较短的格式——对于函数、类或结构来说，长模板语法非常少见，它们也可以这样做：struct Foo(T) { } 是一个带有参数 T 的结构模板。

这个 exec 模板中的参数本身是“alias f”，它是您决定传递给它的任何符号，例如，函数或变量名，以及“T”，只是任何泛型类型。重复的 T 是对该类型的引用。

在使用点，您很可能会看到这样的情况：

```
int foo(int a) { return a; } // just a regular function
exec!(foo)(10); // instantiates the template with arguments (foo, int), and then calls the function. 
```

这里的第二个模板参数由函数参数隐式计算出来。这在函数模板中很常见：很多模板参数都是隐式的，所以你很少看到它们被写出来。您可能会在 D 讨论中将其称为“IFTI”，意思是“隐式函数模板实例化”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T09:31:15.863

```
T exec(alias f,T)(T t) {
    return f(t);
} 
```

这是一个速记模板函数。写它的“正常方式”是：

```
template exec(alias f, T) {
    T exec(T t) {
        return f(t);
    }
} 
```

在`D`中，如果模板范围内的符号与模板本身具有相同的名称，则可以将其用作模板（它是一个别名）。

然后，`alias`模板参数意味着它可以是任何东西——任何**符号**。在这里，它可以是一个委托、一个函数、一个函数，任何东西。如果您的老师使用`std.functional.unaryFun`.

参数，就像在 C++中`T`一样，只是一个类型符号。

该函数只应用一个函子。这是一个最强的版本：

[https://github.com/D-Programming-Language/phobos/blob/master/std/functional.d#L39](https://github.com/D-Programming-Language/phobos/blob/master/std/functional.d#L39)

# css - 为什么这个 div 在另外两个嵌套的 div 之间？z-index 相关

> ID：13755874
> 
> 赞同：1
> 
> 时间：2012-12-07T02:06:54.150
> 
> 标签：css, position, positioning, z-index

解释这一点的最好方法是通过示例：http: [//jsfiddle.net/e7JjU/](http://jsfiddle.net/e7JjU/)

我对 z 索引和堆叠上下文有很好的理解，但我无法弄清楚 div1（蓝色）能够出现在红色和绿色的堆栈之间的逻辑原因。有人可以解释一下吗？

```
#div1{ 
    width: 200px;
    height: 50px;
    background-color: blue;
    position: relative;
    top: 20px;
    left: 15px;
    z-index: 1;
}
#div2 {
    width: 200px;
    height: 50px;
    position: relative;
    top: -50px;
    background-color: red;
}
#inner{
    width: 200px;
    height: 50px;
    position: relative;
    top: 40px;
    left: 30px;
    background-color: green;
    z-index: 2;
} 
```

和HTML...

```
<div id="div1"></div>

<div id="div2">
    <div id="inner"></div>
</div>​
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:31:12.427

您的红色 div`#div2`没有 z-index。但是`#div1`，`#inner`做。如果您要设置 z-index，`#div2`则蓝色 div 不会出现在绿色 div 和红色 div 之间。

z-index 适用于父 div 和子 div。

```
<div id="div1" style="z-index:1"></div>

<div id="div2" style="z-index:2">
   <div id="div4" style="z-index:4;"><!--Higher than any of the other divs--></div>
</div>

<div id="div3 style="z-index:3">
    <div><!-- any div inside div3 are higher than div1 and div2 but not div4</div>
</div> 
```

# php - 从 php/myswl 动态创建的选择框更新文本框

> ID：13755878
> 
> 赞同：0
> 
> 时间：2012-12-07T02:07:35.177
> 
> 标签：php, mysql, ajax, textbox, drop-down-menu

所以我试图让一组文本框显示当前选择框的信息，该选择框是从 PHP MySQL 请求动态创建的。选择生成正常，但仅填充表格的最后一行。我想让它在您更改选择框时更新文本框以反映新信息。

从 MySQL 获取信息的当前代码：

```
 <div id="edithidden" style="display:none;">
        <div id="prompt"><strong>Section to Edit:</strong></div>
        <div id="answer">
        <form id="editorginfo" action="" method="post">
            <select id="edit">
                <option>Section to Edit</option>
                <?php
$query = $db->query("SELECT ID, OrgName, Phone, Location FROM emergencyorg");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
$pid=$row['ID'];
$name=$row['OrgName'];
$phone=$row['Phone'];
$loc=$row['Location'];

        echo "<option value='" . $pid . "' ";
        if($row['OrgName']==$pid){
        echo ' selected';
        }
        echo">" . $name . "</option>";
}
?>
</select>
        </div>          
        <div id="prompt">Organization Name:</div>
    <div id="answer">
        <input type="text" name="editorgname" id="editorgname" value="<?=$name?>"/>
    </div>
    <div id="prompt">Organization Phone Number:</div>
    <div id="answer">
        <input type="text" name="editorgphone" id="editorgphone" value="<?=$phone?>"/>
    </div>
    <div id="prompt">Orginization Location:</div>
    <div id="answer">
        <input type="text" name="editorglocation" id="editorglocation" value="<?=$loc?>"/>
    </div>
    <div id="prompt">
        <input type="submit" id="editorg" name="editorg" value="Update Information" />
    </div>
    </form>
    </div> 
```

这是否必须使用 AJAX 来完成？

再次提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:15:32.710

您将不得不使用 javascript 来执行此操作。有2种方式：

1) 将您的 PHP 数据保存到一个 javascript 对象，并在 select 上添加一个更改事件，这取决于所选的选项，进入 javascript 对象以查找新输入的值

或者

2）在选择上添加一个更改事件以执行 AJAX 请求并刷新输入的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:20:38.937

如果你想避免页面重新加载，那么 ajax 是要走的路。您可以使用 jQuery`$.post`方法来执行此操作。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

这是一个示例代码：

```
$('#select').change(function(){
  var val = $(this).val();
  $.post('data_source.php', {'select_value' : val}, 
    function(response){
       $('#table').html(response);
    }
  );
}); 
```

但是如果您的输入已经在数据库中，也许您可​​以立即加载它们并在选择框的值更改时隐藏和显示内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:12:58.210

是的，ajax 可能是你最好的选择。

但是，如果您不想这样做（也许将服务器上的命中率保持在最低限度很重要），那么您可以将每个组织的所有数据加载到隐藏字段中（使用组织的 ID 作为前缀来区分不同的组织）然后使用javascript将数据加载到onchange事件中的字段中`<select>`

也许是这样的（使用 jQuery 的未经测试的半伪代码）

```
<select onchange="changeOrg(this);">
<option value='1'>My org</option>
.
.
.
</select>
<input type="hidden" name="1_org_address" id="1_org_address" value="12 Nowhere St" />
.
.
.

<label>Address</label><br />
<input type="text" name="org_address" id="org_address" />

<script>
function changeOrg(org){
var chosen_org_id = $(org).val()
 $("#org_address").val($("#" + chosen_org_id + "_org_address").val());
//etc
}
</script> 
```

# xcode - Xcode 中的 Xml Rss 提要解析器问题？

> ID：13755879
> 
> 赞同：0
> 
> 时间：2012-12-07T02:07:39.560
> 
> 标签：xcode, xml-parsing, rss

我对 Xcode 真的很陌生，但是在这里我遵循了本教程[，](http://www.codeliscious.com/?p=784)甚至下载了该项目并尝试将其实现到我的中，但由于某种原因，我无法让它工作。我没有错误或任何东西。另外，我的表已经连接，所以我不知道问题是什么。这是我的一些代码：

视图控制器.h

```
 @interface ThirdViewController : UIViewController <NSXMLParserDelegate>
{
    IBOutlet UITableView * newsTable;
    UIActivityIndicatorView * activityIndicator;
    CGSize cellSize;
    NSXMLParser * rssParser;
    NSMutableArray * stories;

    // a temporary item; added to the "stories" array one at a time, and cleared for the next one
    NSMutableDictionary * item;

    // it parses through the document, from top to bottom...
    // we collect and cache each sub-element value, and then save each item to our array.
    // we use these to track each current item, until it's ready to be added to the "stories" array
    NSString * currentElement;
    NSMutableString * currentTitle, * currentDate, * currentSummary, * currentLink;
}
- (void)parseXMLFileAtURL:(NSString *)URL;

@end 
```

视图控制器.m

```
 @implementation ThirdViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [stories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];

    }

    // Set up the cell
    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    cell.textLabel.text=[[stories objectAtIndex: storyIndex] objectForKey: @"title"];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic

    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

    NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];
    NSLog(@"%@",stories );
    // clean up the link - get rid of spaces, returns, and tabs...
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@" " withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"    " withString:@""];

    // open in Safari
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:storyLink]];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    if ([stories count] == 0) {
        NSString * path = @"http://feeds.feedburner.com/TheAppleBlog";
        [self parseXMLFileAtURL:path];
    }
    cellSize = CGSizeMake([newsTable bounds].size.width, 60);
}

- (void)parserDidStartDocument:(NSXMLParser *)parser{
    NSLog(@"found file and started parsing");
}

- (void)parseXMLFileAtURL:(NSString *)URL
{
    stories = [[NSMutableArray alloc] init];

    //you must then convert the path to a proper NSURL or it won't work
    NSURL *xmlURL = [NSURL URLWithString:URL];

    // here, for some reason you have to use NSClassFromString when trying to alloc NSXMLParser, otherwise you will get an object not found error
    // this may be necessary only for the toolchain
    rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    // Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
    [rssParser setDelegate: self];

    // Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
    [rssParser setShouldProcessNamespaces:NO];
    [rssParser setShouldReportNamespacePrefixes:NO];
    [rssParser setShouldResolveExternalEntities:NO];
    [rssParser parse];
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSString * errorString = [NSString stringWithFormat:@"Unable to download story feed from web site (Error code %i )", [parseError code]];
    NSLog(@"error parsing XML: %@", errorString);
    UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Error loading content" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    //NSLog(@"found this element: %@", elementName);
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"item"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentDate = [[NSMutableString alloc] init];
        currentSummary = [[NSMutableString alloc] init];
        currentLink = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    //NSLog(@"ended element: %@", elementName);
    if ([elementName isEqualToString:@"item"]) {
        // save values to an item, then store that item into the array...
        [item setObject:currentTitle forKey:@"title"];
        [item setObject:currentLink forKey:@"link"];
        [item setObject:currentSummary forKey:@"summary"];
        [item setObject:currentDate forKey:@"date"];
        [stories addObject:[item copy]];
        NSLog(@"adding story: %@", currentTitle);
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"link"]) {
        [currentLink appendString:string];
    } else if ([currentElement isEqualToString:@"description"]) {
        [currentSummary appendString:string];
    } else if ([currentElement isEqualToString:@"pubDate"]) {
        [currentDate appendString:string];
    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {
    [activityIndicator stopAnimating];
    [activityIndicator removeFromSuperview];
    NSLog(@"all done!");
    NSLog(@"stories array has %d items", [stories count]);
    [newsTable reloadData];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:03:42.383

我们通过聊天和垃圾邮件解决了这个问题。:-)

原来委托和数据源没有设置，所以表格视图没有填充。

# vb6 - 在没有Winsock控件的VB6中获取本地IP地址

> ID：13755880
> 
> 赞同：3
> 
> 时间：2012-12-07T02:07:49.807
> 
> 标签：vb6, ip, localhost

VB6如何在不使用Winsock控件的情况下获取本地IP地址

我不想使用或不需要 Winsock 的原因是因为我的应用程序应该离线工作。

我对 VB6 有点陌生，我对这个主题的搜索失败了。我想我需要一些 WinAPI，任何指针或代码示例都会很明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:13:22.980

这是我喜欢使用的功能，不需要 API：

```
Public Function getIP()

Dim WMI     As Object
Dim qryWMI  As Object
Dim Item    As Variant

    Set WMI = GetObject("winmgmts:\\.\root\cimv2")

    Set qryWMI = WMI.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration " & _
                               "WHERE IPEnabled = True")

    For Each Item In qryWMI
      getIP = Item.IPAddress(0)
    Next

    Set WMI = Nothing
    Set qryWMI = Nothing

End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T02:24:28.607

这是从这里获取的：[VB Function to Find the IP Address](http://www.source-code.biz/snippets/vbasic/8.htm)

```
Private Declare Function GetIpAddrTable_API Lib "IpHlpApi" Alias "GetIpAddrTable" (pIPAddrTable As Any, pdwSize As Long, ByVal bOrder As Long) As Long

' Returns an array with the local IP addresses (as strings).
' Author: Christian d'Heureuse, www.source-code.biz
Public Function GetIpAddrTable()
   Dim Buf(0 To 511) As Byte
   Dim BufSize As Long: BufSize = UBound(Buf) + 1
   Dim rc As Long
   rc = GetIpAddrTable_API(Buf(0), BufSize, 1)
   If rc <> 0 Then Err.Raise vbObjectError, , "GetIpAddrTable failed with return value " & rc
   Dim NrOfEntries As Integer: NrOfEntries = Buf(1) * 256 + Buf(0)
   If NrOfEntries = 0 Then GetIpAddrTable = Array(): Exit Function
   ReDim IpAddrs(0 To NrOfEntries - 1) As String
   Dim i As Integer
   For i = 0 To NrOfEntries - 1
      Dim j As Integer, s As String: s = ""
      For j = 0 To 3: s = s & IIf(j > 0, ".", "") & Buf(4 + i * 24 + j): Next
      IpAddrs(i) = s
      Next
   GetIpAddrTable = IpAddrs
   End Function

' Test program for GetIpAddrTable.
Public Sub Test()
   Dim IpAddrs
   IpAddrs = GetIpAddrTable
   Debug.Print "Nr of IP addresses: " & UBound(IpAddrs) - LBound(IpAddrs) + 1
   Dim i As Integer
   For i = LBound(IpAddrs) To UBound(IpAddrs)
      Debug.Print IpAddrs(i)
      Next
   End Sub 
```

我在我的机器上对其进行了测试，它产生了 2 个 IpAddr。我通常会认为第二个是我实际的。

# web - lmhost 和本地测试网站

> ID：13755881
> 
> 赞同：1
> 
> 时间：2012-12-07T02:07:56.970
> 
> 标签：web, pyrocms

我必须管理一些网站。为了测试，我有一个本地 ( `localhost`) 副本和一个在线副本。

cms 引擎[http://Pyrocms.com](http://Pyrocms.net)有一个多站点管理器，您输入一个域。在浏览器中输入域名，它会为存储在中央数据库中的请求站点提供网站服务。

在线这工作正常，但在本地却不行，我最终不得不输入

```
localhost/silo1/myclient1/ 
```

我希望能够打字

```
myclient1.test 
```

我首先想到的是**lmhost**文件，但我释放我无法映射到子目录，只能映射到 IP 地址。

以下是我在 Windows7 的主机文件中尝试做的事情，它没有用，它只是引导我`127.0.0.1` 进入`mywebsite2.test`.

**主机文件**-**又名 LMHOST**

```
File stored @ #C:\Windows\System32\drivers\etc
lmhost/host file
127.0.0.1                   mywebsite1.test
127.0.0.1/mywebsite2/       mywebsite2.test  **#I want to do something like this** 
```

**技术：**

*   操作系统：Windows7 服务器：WAMP 2

*   （启用了 Mod Rewrite 的 Apache）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:23:46.713

如果我对您的理解正确，那么您实现这一目标的唯一方法是...

编辑 HOSTS 文件（不是 LMHOSTS）以将您的假域名解析为环回地址 (127.0.0.1)。

```
127.0.0.1 myclient1.test
127.0.0.1 myclient2.test 
```

然后使用带有 mod_rewrite 条件和规则的 .htaccess 文件来匹配主机标头（针对每个不同的网站），并在内部将请求重写到正确的子文件夹/子 URL。

```
RewriteCond %{HTTP_HOST} ^myclient1\.test$ [NC]
RewriteRule ^/*(.*)$ http://localhost/silo1/myclient1/$1 [NC]

RewriteCond %{HTTP_HOST} ^myclient2\.test$ [NC]
RewriteRule ^/*(.*)$ http://localhost/silo2/myclient2/$1 [NC] 
```

或者，如果您想进行完全重定向（而不是内部重定向）......

```
RewriteRule ^/*(.*)$ http://localhost/silo1/myclient1/$1 [R=301,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:33:18.433

编辑 HOST 文件。

```
127.0.0.1 myclient1.test
127.0.0.1 myclient2.test 
```

在我添加的 httpd.conf 文件中

```
NameVirtualHost *:80

<VirtualHost *:80>
   ServerName myclient1.test
   DocumentRoot C:\wamp\www\silo1\myclient1\
</VirtualHost>

<VirtualHost *:80>
   ServerName myclient2.test
   DocumentRoot C:\wamp\www\silo1\myclient2\
</VirtualHost> 
```

# excel - Excel VBA：从共享列值创建新工作表

> ID：13755884
> 
> 赞同：2
> 
> 时间：2012-12-07T02:08:09.220
> 
> 标签：excel, spreadsheet, vba

作为工作职责，我被告知要在 Excel 2003 中打开一个电子表格（很快就会得到一台更新的计算机......），然后将一张工作表拆分为一个文档，其中包含多个基于一个 ID 的工作表：供应商 ID #。

工作表有一个单行高的标题。第一个 Header 列是“VendorID”。现在，这里的每一列都有数十个其他标题，它们包含**方程式**。我希望工作表是供应商 ID 的名称。

我想要的是得到很多这样的床单：

一张名为“00708”的工作表，“vendorId”的A列标题，其中包含：

```
vendid |  B   |  C   |  D   |
00708  | true | 1.07 | 4.52 | 
```

只是一个例子。有许多不同信息的列。许多。

我的问题是，在工作中，我尝试了以下代码：

```
Option Explicit
Sub DistributeRows()
Dim wsAll As Worksheet
Dim wsCrit As Worksheet
Dim wsNew As Worksheet
Dim LastRow As Long
Dim LastRowCrit As Long
Dim I As Long

Set wsAll = Worksheets("Sheet1") ' change All to the name of the worksheet the existing data is on

LastRow = wsAll.Range("A" & Rows.Count).End(xlUp).Row

Set wsCrit = Worksheets.Add

' column A has the criteria eg project ref
wsAll.Range("A1:A" & LastRow).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=wsCrit.Range("A1"), Unique:=True

LastRowCrit = wsCrit.Range("A" & Rows.Count).End(xlUp).Row
For I = 2 To LastRowCrit

    Set wsNew = Worksheets.Add
    wsNew.Name = wsCrit.Range("A2")
    wsAll.Rows("1:" & LastRow).AdvancedFilter Action:=xlFilterCopy, CriteriaRange:=wsCrit.Range("A1:A2"), _
     CopyToRange:=wsNew.Range("A1"), Unique:=False
    wsCrit.Rows(2).Delete

Next I

Application.DisplayAlerts = False
wsCrit.Delete
Application.DisplayAlerts = True

End Sub 
```

问题是这段代码运行得很好......直到我向右滚动更多并意识到许多列虽然仍然适当移动，但包含空格，其中不仅是数字，还有被分解的数字虽然 Excel 方程（从它们旁边的单元格中添加值，诸如此类）

所以基本上....没有明确的代码吗？我在网上搜索了几个小时，但我尝试过的任何代码都会给我错误，很抱歉没有记住，所以我可以告诉你。我很确定上面的代码是有效的，但它发出了**重要**的信息和方程式，并使它们变为空白。

我有大约 8000 行，并且知道 excel 可以执行 65,000 行之类的操作。我见过一些试图抓取角落到角落区域的代码，但我不需要。我需要一个抓取每一列和每一行的代码......查看第一个“类型”信息的第一个值（在本例中为供应商 ID），然后创建尽可能多的新工作表（在同一个文档中）它需要为每个不同的供应商 ID 创建一个。

任何帮助将非常感激。我试图尽可能地不必手动执行此操作。

# arduino - 在arduino中使用中断处理布尔值

> ID：13755885
> 
> 赞同：0
> 
> 时间：2012-12-07T02:08:19.830
> 
> 标签：arduino, interrupt, interrupt-handling

我进行了一些研究，并且遇到了几个按钮如何用作中断的示例。但是，我尝试实现的设计使用模拟传感器。现在，我想做的是让我的模拟传感器标记一个布尔值来告诉中断执行，而不是一个按钮。我该怎么做？

这是我根据我的研究得出的结论：

```
 boolean isWall;

    attachInterrupt(isWall, interruptFunction, RISING);

    void loop() {
        if(analogSensor.response > 450) {
                isWall = true;
        }
        normalExecution();  // what it normally does if isWall is false 
    }

    void interruptFunction() {
          // code implementation
          isWall = false;  // set isWall back to false after executing interruptFunction
    }

    void normalExecution() {
          // foo
    } 
```

有人可以验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:09:26.027

也许我完全错了，但我一直认为 Arduino 中的中断是基于引脚看到的*电压*- 即它们是*硬件*中断。因此，虽然您的代码对于硬件中断是正确的，但它不适用于变量的更改。

也就是说，这个[链接](http://arduino.cc/forum/index.php/topic,17450.0.html)和这个[链接](http://www.digikey.com/us/en/techzone/microcontroller/resources/articles/arduinos-analog-functions-how-to-use-them.html)讨论了**模拟比较**器方法来完成你想要做的事情。

# windows-8 - Windows 8 HTML5/CSS3/JavaScript 应用程序：使用 CSS 将图像设置为背景

> ID：13755887
> 
> 赞同：1
> 
> 时间：2012-12-07T02:08:26.210
> 
> 标签：windows-8

我正在尝试设置我的 Windows 8 应用程序的背景图像。在我所做的页面的 CSS 中：

```
body {
    background-image: url("images/logo.png"); 
    background-color: #00522c;
} 
```

背景颜色有效，但图像无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:57:29.473

假设您使用的是默认模板生成的内容，则存在路径问题（图像目录在文件夹层次结构中与 css 文件不在同一级别）

尝试

```
background-image: url("/images/logo.png"); 
```

或者，如果您想非常明确：

```
background-image: url("ms-appx:///images/logo.png"); 
```

# c# - 我可以连接到 C# 应用程序中的 Win32 事件吗？

> ID：13755889
> 
> 赞同：0
> 
> 时间：2012-12-07T02:08:46.437
> 
> 标签：c#, wpf, winforms, winapi, win32gui

> **可能重复：**
> [如何在 WPF 中处理 WndProc 消息？](https://stackoverflow.com/questions/624367/how-to-handle-wndproc-messages-in-wpf)
> [P/Invoke 教程？](https://stackoverflow.com/questions/736227/p-invoke-tutorials)

我编写了一个需要使用非常自定义的 Win32 API 的窗口应用程序。有没有办法我可以：

*   调用Win32函数？
*   像我对 Win32 的 WinProc() 函数那样处理自定义事件？

# android - 从 DialogFragment 到 ActivityFragment 的结果

> ID：13755892
> 
> 赞同：0
> 
> 时间：2012-12-07T02:09:21.063
> 
> 标签：android, android-dialog, android-fragmentactivity

我有一个`DialogFragment`，取决于它的调用方式，它会弹出一个对话框，或者根据`dialogFragment`. 本质上，my`DialogFragment`是一个活动列表，根据我的调用方式，我将需要有关该活动的更多信息，或者开始该活动。`onActivityResult`理想情况下，我希望在我的基类中有类似的东西来处理这些结果。做一些研究表明，如果我使用的是 Fragment 而不是 a `FragmentActivity`，我可以使用该`DialogFragment.setTargetFragment()`方法，但这不适用于`FragmentActivity`. 关于我能做什么的任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:27:58.807

我的解决方案：创建一个接口来接收来自Dialog的数据。将适当的类传递给对话框，让每个函数决定它要做什么。

```
public interface ListViewDialogReceiver {
    abstract void OnListViewDialogReceived(FragmentActivity activity,AbstractItemType itemSelected);

} 
```

除此之外，它只是创建一个适当的 ListViewDialogReceiver 实例来调用该类。

稍微考虑了一下，我还可以简化接口，假设类是从主函数创建的。尽管如此，这个界面仍然为我提供了将来处理任何事情可能需要的所有灵活性。

# maven - Maven项目结构

> ID：13755901
> 
> 赞同：0
> 
> 时间：2012-12-07T02:10:01.877
> 
> 标签：maven, tycho

在 svn 存储库中，我有一个文件夹“产品”，其中包含我所有的 Eclipse 插件和功能，与这些平行的是父 POM。当我在 Jenkins 中构建时，此设置运行良好，我只需检查“产品”并安装 pom.xml。但是，我无法弄清楚这个设置在 Eclipse 工作区中是如何工作的？我无法将 pom.xml 本身检出到工作区中，如果需要，我需要将其作为单个文件检出到项目下，该项目会阻止父 POM 的路径。我应该如何检查和构建这样的设置？

另外，我需要在我的插件中定义父 POM 的 relativePath 吗？我发现如果我省略它，那么我会收到关于路径丢失的错误。

总结一下，我的 svn 存储库结构是这样的：

*   回购/
    *   树干/
        *   产品 <- maven 项目（将 .project 设置为 maven 性质的文件夹）
            *   插件A
            *   插件B
            *   特征A
            *   pom.xml
            *   。项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:56:35.830

如果您使用 m2eclipse（例如，可从 Juno 站点获得），您可以将任何 Maven 项目结构导入 Eclipse。在您的情况下，产品文件夹将作为 Eclipse 项目以及各个功能和捆绑包导入。

`<relativePath>`默认为`..`，因此如果父 POM 不在父文件夹中，则需要指定它。`<relativePath/>`如果父 POM 在本地不可用，您可以将其设置为未定义（例如通过空标记）。在这种情况下，Maven 将始终从本地 Maven 存储库或配置的远程 (Maven) 存储库中解析父 POM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:18:32.573

我认为你有两个选择：

1.  将您的父 POM 部署到本地可用的存储库，例如您的公司 Nexus 服务器？这将适用于所有产品和您的所有同事。

2.  重组您的项目，使其看起来更像 Maven，例如

    ```
    |-- plugin1
       |-- pom.xml
       |-- ....
    |-- plugin2...
    |-- feature1...
    |-- ...
    pom.xml  <-- parent POM 
    ```

    从长远来看，第二个选项可能会更好，否则您的 Jenkins 服务器依赖于您记住在本地安装更新的父 POM，而不是仅仅从 svn 中提取它。

# php - php/MYSQL 的问题。mysql_num_rows() 返回 0

> ID：13755903
> 
> 赞同：1
> 
> 时间：2012-12-07T02:10:30.130
> 
> 标签：php, mysql, phpmyadmin

我正在尝试为我的网站创建一个登录系统。这就是我所拥有的。

```
 include('MYSQL_connect_userdata.php');
    $query = "SELECT * FROM userinfo WHERE username = '$username' AND password = '$password' ";
    $result = mysql_query($query) or die("cant find table");
    $count2 = mysql_num_rows($result);
    $resultarray = mysql_fetch_array($result);
    echo "SELECT * FROM userinfo WHERE username = '$username' AND password = '$password' "; 
```

MYSQL_connect_userdata.php 连接到 mysql 服务器并选择数据库。

当我粘贴 echo "SELECT * FROM userinfo WHERE username = '$username' AND password = '$password' "的输出时；

phpmyadmin 返回我正在寻找的行。（包含用户名和密码”）

由于某种原因，即使输入是正确的值，mysql_num_rows($result) 也会返回 0。输入是在 php 文件的顶部使用 $_POST 这样的

```
$username = $_POST['username'];
$password = $_POST['password']; 
```

如果我更改查询以排除“AND password = '$password'”; 部分然后页面按预期工作并且 mysql_num_rows 返回 1。

有什么想法吗？我对 php 很陌生，因此将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:26:51.303

```
$con = mysql_connect("localhost", "peter", "abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$db_selected = mysql_select_db("test_db",$con);

$sql = "SELECT * FROM person";

//Your missing the connection , store in a variable
$result = mysql_query($sql,$con);

echo mysql_num_rows($result);

mysql_close($con); 
```

# php - 存储会话和并发

> ID：13755904
> 
> 赞同：0
> 
> 时间：2012-12-07T02:10:53.403
> 
> 标签：php, multithreading, concurrency

关于让多个用户同时登录的存储会话，我有点困惑......会话密钥必须是唯一的还是只是值？如果所有的 $userIds 都是唯一的，这样可以吗？

```
//if the user logs in:
$_SESSION['loggedIn'] = $userId; 
```

在测试这一点时，如果您同时有两个使用单独的 $userIds 登录并尝试将数据输入到数据库中，则会导致错误。密钥应该是随机的#吗？暂时不用担心安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:28:09.133

$_SESSION 向量是 PHP 的 [Session management] 的一部分：

> PHP 中的会话支持包括一种在后续访问中保留某些数据的方法

它基本上让您以*每个会话*的方式存储信息，并在同一会话的后续调用中检索相同的信息。

每个会话都有自己的数据集。

PHP 使用 cookie 或 POST/GET 参数来识别每个会话，从而确定当前调用是否是现有会话的一部分，并为您提供您在先前调用中存储的数据。

> session_start() 根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。

有关更多信息，请查看手册中的这些主题：

*   [session_start()](http://php.net/manual/en/function.session-start.php)
*   [会话名称（）](http://php.net/manual/en/function.session-name.php)
*   [会话运行时配置](http://php.net/manual/en/session.configuration.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:15:53.610

`$_SESSION`存储在服务器端，不是跟踪用户的好方法，因为会话可以在短时间不活动后终止。如果可能的话，你最好使用 cookie。

但是为了解决您的具体问题，您的代码应该可以正常工作，因为会话几乎总是唯一的。

# ruby - 如何在 nokogiri 中获取节点的值

> ID：13755909
> 
> 赞同：0
> 
> 时间：2012-12-07T02:11:48.663
> 
> 标签：ruby, nokogiri

我有这个

```
1.9.3-p286 :073 > doc.css("tr[class~=strong]").children[3].children
 => [#<Nokogiri::XML::Element:0x3fee5e077e98 name="a" attributes=[#
      <Nokogiri::XML::Attr:0x3fee5e077dd0 name="href" 
      value="http://somelink">]>] 
```

示例 html：

```
<tr class='strong bf highbeam'>
  <td>December 6th</td>
  <td>Foo</td>
  <td><a href='http://somelink' title='bar'>December 6th 2012 Episode</a></td>
  <td><a href='http://somelink/#disqus_thread'></a></td>
</tr> 
```

此时我如何获取价值`http://somelink`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:18:36.283

不要使用`children`，优化你的 CSS 选择器，直到你得到你想要的元素：

```
doc.at('tr.strong a')[:href] 
```

# javascript - 编写“e && e.preventDefault()”以通过 JsLint 的最佳做法是什么？

> ID：13755910
> 
> 赞同：1
> 
> 时间：2012-12-07T02:11:52.983
> 
> 标签：javascript, jslint

使用时`e && e.preventDefault()`，JsLint 会抛出如下错误。

> 期望一个赋值或函数调用，而是看到一个表达式。

如何更改代码以通过 JsLint，但仍保持代码简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:25:59.287

好吧，这通过了 jslint。

```
function handler(e) {
    "use strict";
    if (e) {
        e.preventDefault();
    }
} 
```

不确定整个社区是否同意这个特定的 jslint 规则，但要直接回答您的问题，请使用上面的语法。这是我可以设计出的最简单的版本，jslint 会祝福它至高无上的神圣和洁净。

# vb.net - VB Winforms中的Windows 7安装进度条

> ID：13755915
> 
> 赞同：1
> 
> 时间：2012-12-07T02:12:02.920
> 
> 标签：vb.net, winforms

![在此处输入图像描述](../Images/832672d13deb584bfa00d29fa19ae9fa.png)

正如您在那里看到的进度条，我正在尝试在 VB WinForms 中创建相同的进度条。我能够找到蓝色条线的图像并将其放入表单上的图片框中，但我无法将闪亮的东西拿出来。你可以在这里看到确切的动画：[http ://www.youtube.com/watch?v=00nbQEvA1yg#t=10s](http://www.youtube.com/watch?v=00nbQEvA1yg#t=10s)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:19:46.673

如果你没有像 gif 这样的动态图像类型，或者你没有加载动画的视频版本，你根本无法让它正确移动。唯一的方法是使用 DirectX 或 OpenGL 从头开始​​创建一个类似的动画，或者渲染一个视频并将其嵌入到您的表单中，这一点都不简单。

你也不应该忘记版权！

# javascript - Javascript 日期对象

> ID：13755916
> 
> 赞同：0
> 
> 时间：2012-12-07T02:12:02.967
> 
> 标签：javascript, date, object

我正在使用 Date 对象中的 setFullYear、setMonth、....方法在我的脚本中实例化一个 Javascript Date 对象。但生成的 Date 对象将年份和月份显示为 1+。例如，如果我将年份设置为 2012，月份设置为 12。Date 对象将显示为 2013, January...。

我怎样才能避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:13:14.407

月份是从零开始的。您应该将 11 设置为 12 月。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth)

# json - Dojo 的 OnDemandGrid 和 JsonRest 产生不稳定的顺序

> ID：13755924
> 
> 赞同：0
> 
> 时间：2012-12-07T02:12:44.683
> 
> 标签：json, caching, dojo, dgrid

在颠簸的开始之后，我一直在使用 dgrid 的 OnDemandGrid 和 dojo.store.JsonRest 相当成功，但是在实现缓存时注意到一个小故障：如果我长时间滑动触控板（即，我不科学地滚动了“很长的路”）和然后向后滚动，dgrid 似乎对我所在的位置感到困惑。例如，假设我在第 1609 行附近，然后向下滑动并发现自己正在查看第 500 行。如果我随后向上滚动到顶部，我会发现行的 ID 可能类似于 1609、1608、1607 , 503, 502, 501, 500... 如果我向下滚动父亲，它会拾起缺少的行 499、498、497、1606、1605 等。

```
var store = Observable(Cache(JsonRest({
    target: "/cgi-bin/safari/safari_retrv.pl?action=front&format=json",
    sortParam: "sort",
    idProperty: "queryId"
}),Memory()));

var grid = new declare([OnDemandGrid, Keyboard, Selection, DijitRegistry])({
    store: store,
    query: {aid: "1604" },
    bufferRows: 40,
    loadingMessage: "Loading...",
    columns: {
        aid: "AID",
        title: "Title",
        poster: "Poster",
        postTime: "Posting Date",
        commentCount: "Comments"
    },
}, "grid"); 
```

即使存储只是没有缓存存储的 JsonRest，也会出现问题。

# javascript - jQuery，函数编排

> ID：13755925
> 
> 赞同：1
> 
> 时间：2012-12-07T02:12:47.807
> 
> 标签：javascript, jquery, architecture, orchestration

我在当前项目中被困在 jQuery 1.4.3 上，需要一些关于如何最好地编排以下内容的建议..

假设我有两个函数都执行 ajax 调用，如果第一个函数成功，我只想调用第二个函数。话虽如此，在我的应用程序中，有时我会调用*函数 a*而无需调用*函数 b*。因此，将第二个函数的调用放在第一个函数成功方法中是没有意义的。

我想做类似的事情，

```
function doStuff(){
    functionA().success( functionb() ).failure();
} 
```

我通常使用 .done(); 进行编排。但这是在 jQuery 1.5 中引入的，我现在再次停留在 1.4.3 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:19:06.377

`functionA()`当然在成功处理程序中调用它是有意义的。只是有条件地调用它。

```
// Set a variable to determine if you will need to call functionB()
var youNeedToCallFunctionB = true;
// And call functionA()
functionA();

// Function definition:
function functionA() {
  $.ajax({
    url: ...,
    success: function() {
      if (youNeedToCallFunctionB) {
        // Call functionB() in the success handler when needed...
        functionB();
      }
    }
  });
}

functionB() {
  // Some other AJAX call...
} 
```

更好的是，传递一个参数来`functionA()`决定是否调用`functionB()`

```
functionA(youNeedToCallFunctionB) {
  // same thing as above, but pass the parameter
}

// Called as
functionA(true); 
```

# javascript - Chrome 在某些情况下不会更新元素的宽度，这是一个错误吗？

> ID：13755929
> 
> 赞同：0
> 
> 时间：2012-12-07T02:13:06.730
> 
> 标签：javascript, html, google-chrome

Chrome 版本：23.0.1271.95 m 操作系统：Windows 7 64 位

[请查看http://jsfiddle.net/CTdQd/2/](http://jsfiddle.net/CTdQd/2/)中的测试页面或源代码。

在页面中有一个父 div 样式为“display: inline-block; position: relative;” 其中有 3 个不同宽度和高度的孩子。只有一个孩子有“相对”的位置，另外两个有“绝对”的位置。在 3 个孩子之间切换“相对”位置时，父 div 的高度正确更新但宽度不正确，其宽度不会改变。在 Firefox 和 IE 中都可以。这是铬错误吗？

```
<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <title>test</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <style>
    #wrap {
      border: 1px solid #F00;
      display:inline-block;
      position:relative;
    }
    .out {
      position:absolute;
      left: 0;
      top: 600px;
    }
    .out.in {
      position:relative;
      left: 0;
      top: 0;
    }
  </style>
</head>
<body>
  <div style="width:600px;height:400px;border:1px solid #DFDFDF;text-align:center;overflow:hidden;">
    <div id="wrap">
      <div id="item1" class="out in" style="width:200px;height:200px;background-color:#0F0;">200*200</div>
      <div id="item2" class="out" style="width:300px;height:100px;background-color:#00F;color:#FFF;">300*100</div>
      <div id="item3" class="out" style="width:400px;height:300px;background-color:#DDD;">400*300</div>
    </div>
  </div>
  <p id="log"></p>
  <div style="margin-top:10px;">
    <input type="submit" id="test1" value="show1">
    <input type="submit" id="test2" value="show2">
    <input type="submit" id="test3" value="show3">
  </div>
  <script>
    $(function() {
        $('input').click(function() {
            var parent = $('#wrap');
            $('.in').removeClass('in');
            $('.out').eq($(this).index()).addClass('in');
            $('#log').text('the parent div\'s width: ' + parent.width() + 'px, height: ' + parent.height() + 'px');
        });
    });
  </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:45:01.887

我相信这是 WebKit 中的一个错误。我为此提交了[WebKit 错误 104872](https://bugs.webkit.org/show_bug.cgi?id=104872)。

# python - Python 中的 Microsoft Visual C++ 运行时错误

> ID：13755931
> 
> 赞同：8
> 
> 时间：2012-12-07T02:13:11.740
> 
> 标签：python, python-2.7, runtime-error, pythonw

我有一个在服务器中连续运行的 python 程序，它将一些数据放入 MYSQL 数据库并加载一些。它也使用 TCP/IP 连接。问题是大约 24 小时后它会出现运行时错误：

```
Microsoft Visual C++ Runtime Library!

Runtime Error!

Program: C:\python27\pythonw.exe

This application has requested the Runtime to terminate it in an unusual way. 
```

我点击 OK python shell 关闭。当我关闭所有 python 文件并检查 Windows 任务管理器时，我看到仍然有一个 pythonw.exe 文件在那里打开！！！

我正在使用 IDLE 来运行我的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-02T05:58:29.357

**问题**

> 此应用程序已请求运行时以不寻常的方式终止它。

如果您在运行 Windows 应用程序时收到此错误，很可能是因为在您的 python 库中的某个地方，甚至可能从您的 python 运行时`abort()`调用了例程。有关更多信息和调用行为，`abort`请参阅[MSDN 文档中止](http://msdn.microsoft.com/en-us/library/vstudio/k089yyh0%28v=vs.90%29.aspx)

**演示**

你需要

1.  [Visual Studio 2008（快捷版）](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCkQFjAA&url=http://go.microsoft.com/?linkid=7729279&ei=47BLUoeQC5DI0AWrrICwBQ&usg=AFQjCNEulTGchEeozkLGRH8LZELiTKlC5A&sig2=LBlIqU9gAqMrNvV8XX5zPQ&bvm=bv.53371865,d.d2k)
2.  在 _SYM_PATH 中正确设置[Microsoft 符号服务器](http://support.microsoft.com/kb/311503)
3.  蟒蛇 2.7
4.  安装[WinDBG](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)，并将其设置为[JIT](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542967%28v=vs.85%29.aspx)

创建一个调用 C DLL，`abort()`然后使用 ctypes 调用此 DLL

头文件`abort_dll.h`

```
#include<cstdlib>
#include <windows.h>

extern "C"  __declspec(dllexport) void call_abort(void); 
```

资源`abort_dll.cpp`

```
#include "abort_dll.h"

__declspec(dllexport) void call_abort(void)
{
    abort();
} 
```

资源`dllmain.cpp`

```
#include "abort_dll.h"
BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
} 
```

现在编译并构建您的 DLL（在调试和发布版本中）。

假设我的 DLL 存在于以下位置

调试版本：C:\TEMP\Debug\abort_dll.dll 发布版本：C:\TEMP\Release\abort_dll.dll

在你的 IDLE 中执行以下代码

```
from ctypes import *
hDLL = WinDLL(r"C:\TEMP\Debug\abort_dll.dll")
hDLL.call_abort() 
```

你一定会看到下面的Popup

![在此处输入图像描述](../Images/7fa775bc0c137d147d09c07fac2d8040.png)

与您的案例的唯一区别是，它为您提供了臭名昭著的选项 [Abort|Retry\Ignore]。这只是因为我使用了我的 DLL 的调试版本。相反，如果我使用的是发布版本，我通常会看到

![在此处输入图像描述](../Images/246dfb75aea27fe7593d28ececdd1b46.png)

**解决方案**

在 Windows 中，AFAIK 无法`SIGABRT`使用信号处理程序处理。所以，唯一的选择是使用 JIT，我想你已经安装了。然后你会看到以下弹出。

![在此处输入图像描述](../Images/9d352286c6b6ff60ee3a73298f6b6939.png)

如果您选择调试，这将打开您安装的 JIT 调试器。之后，您可以转储失败的堆栈，并确定失败的模块。完成后，您可以关联可能调用该模块的 python 模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-02T06:27:29.140

在我之前的回答中，我试图介绍报告行为的原因以及如何调试和确定根本原因。不幸的是，这需要广泛的调试知识和时间来隔离问题。

或者，[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)可以方便地对问题进行高级理解，作为用户可能需要发布。

**所需工具**

1.  [进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

**调试步骤**

1.  运行进程监视器
2.  添加以下过滤器（Cntrl + F）

    1.  进程名称 - 以 - python 开头
    2.  操作 - 以 - CreateFile 开头

    ![在此处输入图像描述](../Images/ef4084deb244ad2f2b278a72f52ea416.png)

3.  现在继续运行 procmon，直到您的应用程序崩溃
4.  停止捕捉 (Cntrl + E)
5.  在日志中搜索对 WerFault.exe 的调用

    ![在此处输入图像描述](../Images/ca045384949b55494b9fda39529a9eba.png)

6.  逐渐向上滚动以查看可能与 Python 相关的最后一个称为非 Windows DLL。在上述情况下，它的 abort_dll.dll。

7.  现在使用您的 Python 库知识，或询问（包括 SO），以确定可能是什么失败。甚至，从日志中，您可以通过进一步向上滚动来识别哪个 Python 模块调用了这个 DLL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T04:03:51.403

通过消除已启动但未显示的图，我能够解决相同的问题。它是：

```
plt.plot(dI_new[ref:idx_stop], w_new[ref:idx_stop], 'ro') #x,y
plt.xlabel('Strain')
plt.ylabel('Stress, kPa')
##plt.axis([0, 6, 0, 20])
##plt.show() 
```

我修复它：

```
##plt.plot(dI_new[ref:idx_stop], w_new[ref:idx_stop], 'ro') #x,y
##plt.xlabel('Strain')
##plt.ylabel('Stress, kPa')
##plt.axis([0, 6, 0, 20])
##plt.show() 
```

该错误不再出现。

# asp.net - 带有谷歌帐户的 Asp.net openid 示例

> ID：13755934
> 
> 赞同：3
> 
> 时间：2012-12-07T02:13:17.290
> 
> 标签：asp.net, openid

我正在寻找特定的 asp.net 示例，以允许使用 google 帐户登录网站，但实际上没有看到任何内容。我看到了很多关于 openid 的规范，虽然我得到了大致的想法并喜欢它，但我只想要一些代码来允许 .net 中的 google 发生这种情况，但看不到任何内容。周围的任何例子，也许我还没有找到？

我对学习细节不是很感兴趣。我明白了，相信我正在阅读的关于它的内容，并同意这是一件好事。我只想要一些 .net 代码来实现这一点。

# arrays - 如何比较2个数组？

> ID：13755936
> 
> 赞同：1
> 
> 时间：2012-12-07T02:13:25.173
> 
> 标签：arrays, actionscript-3, compare

我有两个数组，即combo 和truecombo。用户通过单击舞台上的各种按钮来使用 MovieClips 填充组合，truecombo 是正确的组合。

在任何给定点（enterFrame），Flash 都会检查两者是否相同，如果是，则执行一些操作。暂时这是我的代码（更改了几次，例如对索引进行类型转换，在 combo[o] 末尾添加 .parent 等。两件事会发生，其中之一。

要么不满足该语句，此时组合数组的添加和斩波将继续，要么当 combo.length = 6 时立即满足条件。检查我的代码。

**更新：我有一个包含当前代码的保管箱文件。单击此获取 FLA[链接](https://www.dropbox.com/s/17d9rgclz29ft1u/Untitled-1.fla)，为了方便和安全，这里是剥离的 SWF[链接。](https://www.dropbox.com/s/eb5j7rm7ozh73dx/Untitled-1.swf)**

```
/*stage.*/addEventListener(Event.ENTER_FRAME, checkthis);
function checkthis(e:Event)
{
    for(var o:int=0;o<= combo.length; o++) 
    {
        if((combo[o] == truecombo[o]) && (combo.length==truecombo.length))
        {
            equal=true;
        }
    }
    if (equal==true)
    {

        stage.removeEventListener(Event.ENTER_FRAME, checkthis);
        endSeq();
    }
}
function endSeq():void
{
    bravo.play();
    for (var i:int = 0; i < combo.length; i++)
    {
        var element:DisplayObject = combo[i];
        element.parent.removeChild(element);
    }
    firebb.gotoAndPlay(2);
    windbb.gotoAndPlay(2);
    spiritbb.gotoAndPlay(2);
    earthbb.gotoAndPlay(2);
} 
```

这就是我将新元素推送到组合数组的方式。

```
function add(element:DisplayObject)
{
    twist.gotoAndPlay(2);

    element.width = WIDTH;
    element.height = HEIGHT;

    if (this.combo.length >= MAX_ELEMENTS)
    {
        removeChild(this.combo.shift());
    }

    this.combo.push(element as DisplayObject);
    this.addChild(element);
    this.reorder();
}

function reorder()
{
    for (var i:int = 0; i < combo.length; i++)
    {
        var element:DisplayObject = combo[i];
        element.x = OFFSET_X + (i * SEP_X);
        element.y = OFFSET_Y;
    }
} 
```

这就是我创建 truecombo 及其内容的方式。

```
var fireb:firebtn = new firebtn();
var spiritb:spiritbtn = new spiritbtn();
var earthb:earthbtn = new earthbtn();
var windb:windbtn = new windbtn();
var combo:Array=new Array();

const truecombo:Array = [fireb,windb,spiritb,windb,earthb,fireb]; 
```

很抱歉没有评论，我想这是不言自明的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:49:27.440

这是一个非常简单的循环：

```
var equal:Boolean=true
if(combo.length == truecombo.length) {
    for(var i:int=0; i<combo.length; i++) {
        if(combo[i] != truecombo[i]) {
            equal=false;
            break;
        }
    }
} else {
    equal=false;
}

if(equal) {
    //do whatever
} 
```

这假设两者是相等的，直到我们发现其他情况。因此，如果长度不同，它们就不相等。如果第 i^个元素不同，则它们不相等。

最后，你检查你的标志`equal`是否为真，然后做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:54:31.313

我相信`combo[o]`&`truecombo[o]`是同一类的两个实例 & 你希望它们匹配。如果是这种情况，您可以考虑：

```
getQualifiedClassName(combo[o]) == getQualifiedClassName(truecombo[o]) 
```

为了匹配您所做的方式，您必须确保 truecombo 中的对象引用舞台上的相同对象而不是新实例。

* * *

**编辑：**

当匹配成功时，您似乎没有中断循环。改用这个：

```
function checkthis(e:Event)
{
    for(var o:int=0;o<= combo.length; o++) 

      if((combo[o] == truecombo[o]) && (combo.length==truecombo.length)) {

        equal=true;

        break;
      }     

      if (equal) {

        stage.removeEventListener(Event.ENTER_FRAME, checkthis);

        endSeq();
      }
} 
```

# c++ - 删除自动 int 变量

> ID：13755937
> 
> 赞同：2
> 
> 时间：2012-12-07T02:13:38.273
> 
> 标签：c++, memory-management

我正在尝试学习 C++ 中的最佳习惯和实践，尤其是围绕内存管理。在我的 iOS 应用程序中使用 ARC、Java 中的内置 GC 以及其他一些启用了 GC 的语言，我在这方面被宠坏了。

我了解您使用`delete`或`delete[]`解构指针。我的问题是，您如何`delete`处理整数或基本数据类型的其他变量？

我的第一个想法是，既然`delete`似乎只适用于指针，我可以这样做：

```
int intToDelete = 6;
delete &intToDelete; 
```

所以基本上，你可以在内存中创建一个指向整数的指针，并使用该指针删除整数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T02:17:35.780

`delete`并且`delete[]`只能与分别用`new`or显式分配的指针一起使用。`new[]`特别是，每次使用时`new`，都应该有对应的`delete`. 同样，每个都`new[]`需要一个对应的`delete[]`. 您永远不应该将其中任何一个与您没有明确分配内存的变量一起使用。编译器负责所有非指针变量的内存分配（和释放）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:24:31.990

`delete`用于释放`new`操作员分配的堆中的内存，`delete[]`与`new[]`. 您不能使用`delete`释放未分配的`new`指针，甚至是来自 的指针`malloc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:20:11.550

本地对象会自动清理自己。这是该语言最有用的特性之一，因为它也可以通过 RAII 扩展以覆盖非本地对象。具体来说，使用`delete`是一个*巨大*的危险信号，表明您没有使用正确的自动清理工具，`delete[]`甚至更糟。

正确使用构造和销毁语义对于编写良好的 C++ 代码至关重要。如果您手动管理内存，那么您做错了，除非您有一个摇摇欲坠的旧编译器*或*一些非常独特的情况（我从未见过任何实际证明这一点的例子）。

# html - 为什么div和ul的宽高和正常的不一样

> ID：13755938
> 
> 赞同：2
> 
> 时间：2012-12-07T02:13:47.277
> 
> 标签：html, css, xhtml

这是我的代码：

**CSS**

```
div {
    height: 200px;
    width: 600px;
    border: 1px solid black;
}
ul {
    height: 200px;
    width: 600px;
    border: 1px solid black;
}
p {
    height: 200px;
    width: 600px;
    border: 1px solid black;
} 
```

**HTML**

```
<div></div>
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul>
<p></p> 
```

我想问即使我设置的宽度和高度相同，为什么宽度和高度与正常（段落和分区）不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:22:19.800

`ul`许多浏览器默认在标签上放置内部填充。

您需要覆盖它：

**CSS**

```
div {
    height: 200px;
    width: 600px;
    border: 1px solid black;
}
ul {
    height: 200px;
    width: 600px;
    border: 1px solid black;
    padding: 0px;
    margin: 0px;
}
p {
    height: 200px;
    width: 600px;
    border: 1px solid black;
    margin: 0px;
}​ 
```

**[演示](http://jsfiddle.net/xDmQH/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:18:52.787

您可能只需要进行 CSS 重置：

```
/**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

或者现在你可以添加到你所有的 css 中：

`html, body, div, ul, li, p { margin:0; padding:0;}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:18:54.040

浏览器具有默认样式。在有序/无序列表的情况下，一些浏览器添加左边距，而一些浏览器添加左边距

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:27:58.460

请试试

```
ul {
-webkit-padding-start: 0px;
padding-left: 0px;
} 
```

您可以打开开发人员工具并查看浏览器定义的用户代理样式表并覆盖您想要的任何内容。

# c++ - 动态加载共享可选对象

> ID：13755952
> 
> 赞同：0
> 
> 时间：2012-12-07T02:15:15.467
> 
> 标签：c++, c, linux

我知道我可以使用 dlopen 可以在 C/C++ 中打开共享库。
我可以使用 dlopen 调用的结果来确定功能是否存在。

但是，我需要加载具有许多功能的现有库。

除了为所有这些函数重新定义一长串函数指针版本并为每个函数分配 dlsym 之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:41:08.063

一种可能的解决方案是重新考虑一些事情。

共享的可选库可能非常大，但如果它是可选的，那么您编写的与它交互的代码肯定也是可选的吗？

要减少 dlsym() 分配的数量，您可以编写自己的动态库，该动态库与仅实现可选组件的可选库链接。

然后，您只从应用程序的非可选部分动态加载和分配应用程序的可选组件。

如果您的可选库是 C 库并且您的可选组件是 C++ 对象，这可能会使事情变得过于复杂，但是您拥有它......

# android - 较小的评分栏

> ID：13755954
> 
> 赞同：0
> 
> 时间：2012-12-07T02:15:21.940
> 
> 标签：android

我已经浏览了所有这些论坛，寻找有关如何更改评分栏大小（使星星变小）的答案，但我不确定是否可以做到？我看到了带有“自定义漂亮评级栏”的教程，但我并没有真正尝试创建任何新内容。我想使用包装随附的星星。我想要一个 10 星评级，所有星都适合屏幕，现在只有大约 7 星适合屏幕。基本上我希望它看起来像 IMDB 应用程序。评级系统，如果有人看过吗？谢谢您的帮助。我会粘贴一些代码，但不是很多。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RatingBar
    android:id="@+id/ratingBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:numStars="10" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:20:13.733

我认为唯一的方法是制作自己的自定义星形可绘制对象。即使它们只是缩小的系统星形可绘制对象的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:21:31.567

您只需为评分栏创建自定义样式。

这里解释得很好：

[https://stackoverflow.com/a/5800686/435855](https://stackoverflow.com/a/5800686/435855)

# c - Gettext 克隆或许可许可下的替代方案（非 copyleft）？

> ID：13755956
> 
> 赞同：4
> 
> 时间：2012-12-07T02:15:28.463
> 
> 标签：c, gettext

目前，我正在尝试找到具有类似工具支持的 gettext 替代方案。但是，库本身需要获得许可许可，以便可以静态链接二进制文件，并且我不需要按照 LGPL 的规定将目标文件与二进制文件一起发布。

简而言之：所谓的许可许可证之一（BSD、MIT、zlib/libpng、X11 等）很适合我，但我无法在许可许可下找到替代方案。

任何指针？

是的，我已经看到并阅读了对[https://stackoverflow.com/questions/943058](https://stackoverflow.com/questions/943058)的一个答案并对其投了反对票。这个问题显然也适用于非 copyleft。[LGPL](http://en.wikipedia.org/wiki/LGPL)*是[copyleft 许可证](http://en.wikipedia.org/wiki/LGPL)，即使它比 GPL 更宽松[*。*](http://en.wikipedia.org/wiki/LGPL)*

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T03:24:33.337

NetBSD 在 BSD 许可下维护了一个与 gettext 兼容的库。

请参阅[http://wiki.netbsd.org/projects/project/libintl/](http://wiki.netbsd.org/projects/project/libintl/) 它需要开发，因此您可以开发和贡献任何缺少的东西 :)

这也应该与第 3 方 gettext 工具和实用程序大部分兼容，如果您可以让它们从源代码针对 libintl 进行编译。*

# java - 在 Eclipse 中禁止 API

> ID：13755959
> 
> 赞同：0
> 
> 时间：2012-12-07T02:15:50.490
> 
> 标签：java, eclipse, matlab, log4j

我在 MATLAB 中运行两个 Java 程序，这意味着它们都与 MATLAB 共享同一个 JVM 实例。这是尝试使用 Log4J 时的问题，因为它是静态配置的。如果我运行 PROG1（并且它配置 Log4J），然后运行 ​​PROG2（它也尝试配置 Log4J），那么 PROG2 随后无法将其输出记录到某些版本的 MATLAB 中的正确位置。

我想以某种方式在 Eclipse 中配置 PROG1 的项目以永远禁止使用 Log4J，但在 PROG2 中仍然应该允许它。仅仅从 PROG1 项目的类路径中删除 log4j.jar 并不能解决问题，因为没有办法阻止它作为直接或间接依赖项重新添加。

理想情况下，如果我可以配置项目会很好，这样 Eclipse 将始终在编译时检查并添加标记（如其现有的编译警告和错误），并标记任何 Log4J 访问（包括我们自己的用于配置 Log4J 的实用程序类) 在该项目中带有解释此问题的简短消息。

我能想到的下一个最好的事情是使 Ant 脚本进一步复杂化，但这仍然存在我或其他人将来可能会将 Log4J 日志记录添加到 PROG1 项目并且直到花费大量资金之后才意识到后果的可能性时间和后来运行构建。

有什么想法可以让我永远禁止在特定项目中使用 Log4J，这样它也能在未来得到充分的保护，避免出现同样的问题？

# ruby-on-rails - Sass::SyntaxError in Static_pages#contact

> ID：13755961
> 
> 赞同：0
> 
> 时间：2012-12-07T02:15:58.277
> 
> 标签：ruby-on-rails, sass, bootstrap-sass

我正在关注 Hartl 的教程（此时到第 5 章 - [http://ruby.railstutorial.org/chapters/filling-in-the-layout#code-signup_button](http://ruby.railstutorial.org/chapters/filling-in-the-layout#code-signup_button)），我觉得好像我已经按照他的指示进行了操作，但是当我尝试在线查看我的 sample_app 主页时，我不断收到此错误消息：`Sass::SyntaxError in Static_pages#contact`然后`File to import not found or unreadable: bootstrap.`我刚刚将 bootstrap-sass gem 添加到我的 Gemfile，创建了文件 app/assets/stylesheets/custom.css.scss 并添加了 Bootstrap CSS到该文件 ( `@import "bootstrap";`)。我查看了一些类似的线程来寻找解决方案，并尝试了一些选项，但没有任何效果。有什么想法吗？帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:27:02.310

Pjumble，重点是您不必完全复制清单 5.6 和 5.7 中显示的内容。

开头的三个点意味着您必须保留文件的先前内容，同时添加后面的行。

所以你从清单 5.5 开始，然后从清单 5.6 中添加一些行，然后从 5.7 中添加其余的行。

# facebook - IE 中的 Facebook api 授权

> ID：13755962
> 
> 赞同：1
> 
> 时间：2012-12-07T02:16:02.040
> 
> 标签：facebook, api, facebook-login, facebook-access-token

我在 Internet Explorer 中遇到了 Facebook 授权问题。此代码适用于 Firefox、chrome 和 safari，但不适用于 IE。

单击带有 loginUrl 的 href 后，会出现此消息（仅在 IE 中，否则一切正常）。

> 致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1238 行的 /data/web/virtuals/30096/virtual/www/qcomp/libs/base_facebook.php 中抛出

这是我的代码：

```
 session_start();

    define('APP_ID', 'SOMETHING');
    define('APP_SECRET', 'SOMETHING');
    define('CANVAS_PAGE', 'SOMETHING');
    define('CANVAS_URL', 'SOMETHING');

    require_once './libs/facebook.php';

    $facebook = new Facebook( array('appId' => APP_ID, 'secret' => APP_SECRET, ));

   $user = $facebook->getUser();
    $redirecturl = 'BACK_TO_TAB';

    if(isset($user)) {
        try {
            $user_profile = $facebook->api('/me');
            $user_friends = $facebook->api('/me/friends');
            $_SESSION['user'] = $user_profile;
            $_SESSION['friends'] = $user_friends;
        } catch (FacebookApiException $e) {

        $user = NULL;
      }
}

if($user == NULL)
{ 
        $loginUrl = $facebook->getLoginUrl(
        array(
            'scope' => 'publish_stream',
            'redirect_uri' => 'URL',
        )
    );
}
else
{   
    header("Location: ./step2.php");
    $_SESSION['user'] = $user_profile;
    $_SESSION['friends'] = $user_friends;
}
?>

<!doctype html>
<html>
    <head>
    </head>
    <body>
        <div id="layout">
            <a href="<?php echo $loginUrl ?>" target="_blank">
                <div class="enter"></div>
            </a>
        </div>
    </body>
</html> 
```

谢谢你的建议。

# ruby-on-rails - OSX 10.8升级后postgres无法连接服务器

> ID：13755965
> 
> 赞同：3
> 
> 时间：2012-12-07T02:16:20.823
> 
> 标签：ruby-on-rails, postgresql, osx-mountain-lion, homebrew

在最近升级到 Mountain Lion 之后，我的 brewed postgres 安装遇到了问题。

```
$ rake db:create
>rake db:migratecould not connect to server: Connection refused
>   Is the server running on host "localhost" (::1) and accepting
>   TCP/IP connections on port 5432?
>could not connect to server: Connection refused
>   Is the server running on host "localhost" (fe80::1) and accepting
>   TCP/IP connections on port 5432?
>could not connect to server: Connection refused
>   Is the server running on host "localhost" (127.0.0.1) and accepting
>   TCP/IP connections on port 5432? 
```

在网上搜索后，我还没有找到解决这个问题的方法。

我找到了一个建议的步骤来帮助识别问题，但是在遵循这些之后，我不确定如何理解结果或下一步该做什么。任何人都可以帮忙吗？

```
$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start
>pg_ctl: another server might be running; trying to start server anyway
>server starting

$ pg_ctl -D /usr/local/var/postgres stop -s -m fast
>pg_ctl: could not send stop signal (PID: 865): No such process

$ pg_ctl status                                                                
>pg_ctl: no server running

$ ps auxw | grep post 
>myuser   19037   2.6  7.7  4388248 324520   ??  S     7:30AM  19:06.02 /Applications/Postbox.app/Contents/MacOS/postbox-bin -psn_0_917728
>myuser   54897   0.1  0.0  2432768    464 s000  R+    1:47PM   0:00.01 grep post

$ cat /usr/local/var/postgres/server.log
>FATAL:  lock file "postmaster.pid" already exists
>HINT:  Is another postmaster (PID 821) running in data directory "/usr/local/var/postgres"? 
```

很高兴提供任何可能有用的附加信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:21:39.333

尝试删除：

```
/usr/local/var/postgres/postmaster.pid 
```

这曾经对我有用。

# mysql - 为什么在 Microsoft SQL Server Management Studio 上找不到我使用 MySQL Workbench 创建的服务器？

> ID：13755970
> 
> 赞同：-2
> 
> 时间：2012-12-07T02:17:02.800
> 
> 标签：mysql, sql, sql-server-2005, c#-4.0

我在 MySQL Workbench 上创建了两台服务器，希望能够使用 Microsoft SQL Server Management Studio 连接到所述服务器并创建一个 SQL Server 数据库 (.mdf)，然后我将使用它来使用 C# 创建桌面应用程序。

我尝试在网上搜索，但没有任何帮助。另外，我认为我的 Visual C# Express 2010 不支持连接 MySQL 数据库实例，以免将其导入应用程序，以便稍后发布应用程序。

我试图找到一个替代数据库，我可以使用它来代替 Access 数据库，因为我听说随着更多数据输入它会积累更多空间。所以，我尝试了 SQL Server 数据库，但仅仅创建一个数据库就会导致我遇到这些问题

有什么建议该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:31:14.970

如果要使用 SQL Server 数据库（.mdf，可使用 SQL Server Management Studio 管理），则必须在将运行数据库的计算机上安装 Microsoft SQL Server。

SQL Server 不仅包含管理工作室。您必须安装服务器组件来托管数据库 - 如果您只有管理工作室，则只能连接到托管在其他计算机上的数据库。

安装 SQL Server 后，您可以使用 Management Studio 连接到它，并在连接后创建数据库。

如果您担心成本，Microsoft 提供 SQL Server Express 作为 SQL Server 的免费版本，但有一些限制。

# g1gc - 使用 G1GC 的次要 GC 会导致全局暂停吗？

> ID：13755975
> 
> 赞同：3
> 
> 时间：2012-12-07T02:17:52.877
> 
> 标签：g1gc

我们目前已经安装并配置了 JDK1.7 以使用 G1GC。我想知道的是这个。

停止世界暂停只是Major GC的一个特点吗？还是 Minor GC 也有这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:53:53.037

为了回答我自己的问题，

是的，次要 GC 活动会导致全局暂停。

[http://blog.griddynamics.com/2011/06/understanding-gc-pauses-in-jvm-hotspots.html](http://blog.griddynamics.com/2011/06/understanding-gc-pauses-in-jvm-hotspots.html)

# java - 像这样的数学方程的Java数学函数？

> ID：13755976
> 
> 赞同：0
> 
> 时间：2012-12-07T02:18:08.557
> 
> 标签：java, math, equation

有没有像这个数学方程一样的Java数学函数？

```
A_value = A_min + (B_value-B_min)/B_max*A_max 
```

所以它会是这样的：

```
0 + (5-0)/10*5 
```

那将等于2.5。有没有这样的数学函数？当 B 将其值增加一个设定的最小值和最大值时，A 的值将增加一个设定的最小值和最大值。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:24:29.660

我认为有一个！

```
public static double aValue(double aMin, double aMax, double bValue, double bMin, double bMax) {
  return aMin + (bValue - bMin)/(aMax * bMax);
} 
```

实际上，我不确定您在说什么，但我很确定 Java 没有它。这是[Java数学函数类](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)

# javascript - JS MVC 游戏动态对象？

> ID：13755977
> 
> 赞同：1
> 
> 时间：2012-12-07T02:18:10.090
> 
> 标签：javascript, jquery, oop, model-view-controller

我无法解决如何在浏览器屏幕上将类/对象表示为图像或 div 的问题。div 将具有属性和方法。假设我正在制作一个敌方飞船随机出现并四处移动的游戏。

那么我是否在每次创建实例时都为 JQuery.append 一个 div 标签？如何将 div 连接/绑定到类？还是有更高效的 MVC 框架？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:10:22.520

首先，MVC 不一定非常适合游戏，但理解它可以帮助您更好地处理 OOP，类似的东西也很有意义。

假设 CSS 适当设置背景图像，使 .spaceObject 元素成为绝对元素并默认为 0,0 并使 body 成为实际设置的宽度/高度框等...

JS 没有类。它改为使用函数构造函数。我不建议尝试模拟类。构造函数没有任何问题，当您深入了解原型等时，它们实际上具有一些不错的优势。

```
function BuildSpaceDiv(divID){
    var $_spaceDiv = $('<div id="'+divID+'" class="spaceObject" />').appendTo('body');

    this.move = function(x,y){
        $_spaceDiv.animate({ top:x, left:y });
    }
} 
```

如果不使用 new 关键字，它就像一个函数一样工作。您使用 new 关键字来创建对象/实例（不是类/对象，即图表和构建的东西，对象和实例是可互换的术语）。

var deathSun = new BuildSpaceDiv('death_sun');

您可以根据需要制作任意数量或添加新参数来设置起始坐标等...我喜欢将选项对象与我的 JS 构造函数一起使用。请注意，它仍然像函数一样触发，因此如果您愿意，构建实例可能会产生副作用，并且 $_spaceDiv 变量对于每个实例都是唯一的并且是持久的。

# java - 如何增量更新 Java EE Web 应用程序？

> ID：13755979
> 
> 赞同：1
> 
> 时间：2012-12-07T02:18:10.833
> 
> 标签：java, jakarta-ee, web-applications, deployment

我在 Tomcat 中部署了一个典型的 Web 应用程序。要求是在更新应用程序时提供**增量更新**方式而不是**全包**交付（war 文件）。

例如，一旦我完成了更改 jar 文件、XML 文件和 jpg 文件的错误修复。我将这 3 个文件称为补丁。我应该提供补丁文件。即使客户想要回滚到原始版本，我也必须提供一种回滚补丁的方法。所有的过程都应该是自动的。

从我的角度来看，这个要求没有意义。全包交付是更新 Web 应用程序的简单可靠的方式，我不想介绍复杂且容易出错的更新方式。

你有想法实现增量更新要求吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:49:54.183

当您部署 .war 或 .ear 时，应用程序服务器通常会将其解压缩到内部目录中。您可以直接更改此目录中的文件，粒度更细。但是，要使更改始终生效，您需要重新启动服务器。

你的观点确实是完全正确的。如今，文件的大小并没有发挥重要作用，我不认为整个更新有问题。为什么客户对整个更新不满意？

注意：如果他想要的是*动态*更新，即不重新启动服务器，那么这无论如何都是一个完全不同的问题，而且对于 java 中的生产系统来说几乎是不可能的（但在开发过程中是可行的，使用 JRebel 之类的解决方案）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T06:09:01.457

您可以创建使用 Delta-Sync 协议的 Java 程序，即只需要上传更新的文件。如果您使用过 Dropbox，那么您将非常了解。Dropbox 使用 Delta-Sync 协议来更新文件和同步数据。

无论哪种方式，您都可以通过在客户端（映射到服务器的 WAR 文件夹）和本地计算机上安装并共享该文件夹来使用 Dropbox。然后，每当您更改本地计算机中的文件时，它会自动将这些 CHANGED (PATCH) 文件上传并同步到您的客户端计算机。

# php - 当我的用户进入 login.php 时，用户无法继续最后一页

> ID：13755980
> 
> 赞同：1
> 
> 时间：2012-12-07T02:18:15.207
> 
> 标签：php, login

当我的用户进入 login.php 时，用户无法继续最后一页。用户重定向 index.php。但我希望用户在登录时可以转到最后一页。我该怎么办？真挚地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:20:57.457

使用 http_referer 作为您的重定向。

```
$_SERVER['HTTP_REFERER']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:27:33.730

您可以通过查询参数将当前/最后一页传递给登录页面，获取查询字符串并重定向到该参数。

例如

在您的非登录页面上，您将链接到您的登录页面：

`http://mysite.com/login.php?lastPage=/lastpage`

不要忘记对 lastPage 进行 urlencode - [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

并从 REQUEST 全局加载“lastPage”参数

`$strLastPage = $_REQUEST['lastPage'];`

然后重定向到那个页面`$strLastPage`

您可以在此处了解如何重定向：http: [//php.net/manual/en/function.http-redirect.php](http://php.net/manual/en/function.http-redirect.php)

# highcharts - 如何使我的 highstock 图形 y 轴只是绝对值？

> ID：13755981
> 
> 赞同：0
> 
> 时间：2012-12-07T02:18:15.873
> 
> 标签：highcharts, highstock

您好，我最初使用 highcharts，因为我的客户需要根据时间查看不同的视图，例如 1 天、2 天、3 天、7 天、1 个月，所以我发现 highstock 更类似于这个，但是使用 highstock 缺少一些功能。当我成功弄清楚如何添加图例（图例），更改点显示（工具提示：格式化程序），更改 xaxis 显示和导航器显示（dateTimeLabelFormats）时，我看到线条的显示就像股票一样，这意味着：它不考虑其绝对值太多，比如我连接的终端从 8-10 不等，注册终端从 2-3 不等，不幸的是它会在连接的终端上方绘制注册终端，这不太有意义，（除了 yAxis 显示不正确，当它绘制 5 时，上面的点实际上是 4 ..），我也试过了

```
plotOptions: {series: {compare: 'percent'}}, 
```

和

```
plotOptions: {series: {compare: 'percent'}}, 
```

但不起作用，y轴仍然很混乱，

有人有好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:56:02.620

最近有同样的问题。它基本上来自于在 :D 中留下示例代码的无用部分

取出

```
plotOptions: {series: {compare: 'percent'}}, 
```

部分应使其使用绝对值。

我认为单独取出比较参数也应该足够了，但由于它是您从 plotOptions 设置的唯一东西，因此无需保留其余参数。

# javascript - 具有数千个数据点的 D3 散点图

> ID：13755983
> 
> 赞同：11
> 
> 时间：2012-12-07T02:18:40.797
> 
> 标签：javascript, d3.js

我想使用 D3 制作散点图，并且能够使用 x 轴上的某种滑块一次只查看一小部分。javascript中是否有一种方法可以有效地缓冲数据并在用户向左或向右滚动时快速访问元素？

我的目标类似于这里的 protovis 示例[，](http://mbostock.github.com/protovis/ex/zoom.html)但数据量是 10 倍。当我制作这么多数据点时，这个例子令人窒息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T16:16:32.260

我已经做了一个大约 10k 点的散点图，我需要在其中以交互方式过滤绘图的各个部分。我分享了一系列对我有用的技巧，我希望有些技巧也能帮助你：

*   为您的操作员使用一个键功能，`.data()`就像在本[教程](http://mbostock.github.com/d3/tutorial/bar-2.html)结束时所做的那样。使用键的好处是您不需要更新不改变的元素。
*   与 d3 无关，但我将我的数据空间划分为一个网格，以便每个数据点与单个单元格相关联（换句话说，每个单元格都是一组点的索引）。这样，当我需要从 x_0 到 x_1 进行访问时，我知道我需要哪些单元格，因此我可以访问一组更精细的可能数据点（避免沿所有点进行迭代）。
*   避免过渡：根据我的个人经验，`.transition()`选择数千个 SVG 元素时不是很流畅（现在在新版本或更快的处理器中可能会更好）
*   在我的情况下，使点不可见（`.attr("display","none")`）或可见比删除和创建 SVG 元素更方便（我想知道这是否也更省时）

# post - nginx proxy_pass POST 404 错误

> ID：13755987
> 
> 赞同：0
> 
> 时间：2012-12-07T02:19:12.360
> 
> 标签：post, nginx, proxypass

我有 nginx 代理到应用服务器，配置如下：

```
location /app/ {
        # send to app server without the /app qualifier
        rewrite /app/(.*)$ /$1 break;
        proxy_set_header Host $http_host;
        proxy_pass http://localhost:9001;
        proxy_redirect http://localhost:9001 http://localhost:9000;
    } 
```

对 /app 的任何请求都会转到：9001，而默认站点托管在：9000。

GET 请求工作正常。但是，每当我向 /app/any/post/url 提交 POST 请求时，都会导致 404 错误。通过 GET /app/any/post/url 直接在浏览器中点击 url 会按预期点击应用服务器。

我在网上找到了其他有类似问题的人并添加了

proxy_set_header 主机 $http_host; 但这并没有解决我的问题。

任何见解都值得赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:14:57.187

我的错，问题不是 nginx，而是我的应用服务器。我正在使用一个路由模块，如果不是获取，则需要我明确指定请求方法，这就是为什么它在发布时抛出 404 错误，但在直接点击浏览器 url 时却没有。

# html - 我们如何控制特殊字符的大小？

> ID：13755988
> 
> 赞同：3
> 
> 时间：2012-12-07T02:19:17.520
> 
> 标签：html, css

我想在页面中使用以下字符：

```
<div>&#9660;</div> 
```

（这是一个向下箭头字符）。有没有办法改变它的大小？我什至不确定它的初始大小是如何确定的——我们可以对其应用字体大小吗？或者是否有一些我们可以应用到它的 css scale 属性？

或者我可以指定它的确切宽度/高度（以像素为单位）吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T02:20:51.283

您可以使用 CSS 来控制它，就像任何其他文本一样。

[https://developer.mozilla.org/en-US/docs/CSS/font-size](https://developer.mozilla.org/en-US/docs/CSS/font-size)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:12:30.110

字符的大小由字体系列和字体大小决定。它们都可以像往常一样在 CSS 中设置，使用`font-family`and`font-size`属性（甚至使用老式的 HTML`font`标签）。与同一行上的其他文本设置`font-size`不同往往会导致行间距不均匀，但如果您在自己的块中使用字符，这并不重要，正如`div`标记所暗示的那样。

所表示的字符`&#9660;`不是箭头而是U+25BC BLACK DOWN-POINTING TRIANGLE“▼”。它的相对大小（相对于字体大小）[因](http://www.fileformat.info/info/unicode/char/25bc/fontsupport.htm)字体系列而有很大差异，因此您应该主要考虑字体系列的选择，使用合理的字体系列列表（该字符具有可比较的大小），并且仅在需要时考虑字体大小.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:22:38.680

就像控制任何其他字体一样

```
<div style="font-size:x-large">&#9660;</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:21:05.080

与控制任何其他字符大小的方式相同。只需设置字体大小。

# c# - Windows 服务和主线程

> ID：13755989
> 
> 赞同：1
> 
> 时间：2012-12-07T02:19:39.367
> 
> 标签：c#, .net, multithreading, .net-3.5, windows-services

我正在.NET 3.5 中编写 Windows 服务。Windows 服务的典型编程模型是`OnStart`在另一个线程上启动任何长时间运行的进程之前覆盖组装类的方法。

这是因为`OnStart`事件必须在超时前的默认值 30 秒后返回。

在我的场景中，这个线程非常重要，所以我想创建某种形式的心跳系统来监控它的状态并在必要时回收/重新创建它。

理想情况下，我会从主应用程序线程执行此心跳检查（因为心跳必须永远不会消失），但我不知道如何将任何新调用编组到该线程。

你将如何解决这个问题？也许我的预期方法是错误的？如果是这样，您还会如何处理它？

# c# - 创建要映射为网络驱动器的 WebService

> ID：13755992
> 
> 赞同：0
> 
> 时间：2012-12-07T02:19:53.660
> 
> 标签：c#, filesystems, nfs, smb, cifs

编辑：如何创建可以映射为网络驱动器的 Web 服务？Flickr、Google Drive 和 Skydrive 都支持这一点，我也想做一个 web 服务。

# mongodb - mongoengine 中的 find() 和 findOne()

> ID：13755999
> 
> 赞同：27
> 
> 时间：2012-12-07T02:20:21.283
> 
> 标签：mongodb, mongoengine

如何使用 mongoengine 快速查找（）或 findOne（），我已经有了这个，但它似乎不是正确的方法：

```
Cars.objects()._collection.find_one({'model':2013}) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-07T03:35:36.493

对于 find() 你可以这样做：

```
Cars.objects(model=2013) 
```

对于 find_one() 你可以这样做：

```
Cars.objects.get(model=2013) 
```

要检索在集合中应该是唯一的结果，请使用 get()。如果没有文档与查询匹配，这将引发 DoesNotExist，如果有多个文档与查询匹配，则会引发 MultipleObjectsReturned。

否则，如果存在多条记录，只需限制，例如：

```
Cars.objects(model=2013)[0] 
```