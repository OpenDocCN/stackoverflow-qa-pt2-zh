# StackOverflow 问答 14159000-14159999

# css - CSS 文本对齐

> ID：14159006
> 
> 赞同：0
> 
> 时间：2013-01-04T14:28:55.243
> 
> 标签：css, text, alignment, block

我正在聊天，但我遇到了 CSS 问题。我宁愿在图片上展示它。

这是它的样子：http: [//i.stack.imgur.com/7v7vV.png](http://i.stack.imgur.com/LT56d.png)

这就是我希望它的样子：http: [//i.stack.imgur.com/7v7vV.png](http://i.stack.imgur.com/7v7vV.png)

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:32:04.880

使用例如这个CSS：

```
p {
    text-indent: -50px; //put your first line 50px to the left
    margin-left: 50px; //put the rest 50px to the right
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:45:28.550

我猜到了标记，但是像这样的东西呢 - [http://jsfiddle.net/YnPU2/](http://jsfiddle.net/YnPU2/)？

html:

```
<p>
    <span class="time">20:20:20</span>
    <span class="author">quwquu</span>
    <span class="text">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</span>
</p>
<p>
    <span class="time">20:20:22</span>
    <span class="author">dfghdg</span>
    <span class="text">when an unknown printer took a galley of type and scrambled it to make a type specimen book.</span>
</p>​ 
```

CSS：

```
p { overflow: hidden; vertical-align: top; }
p span { display: table-cell; }
p .time { width: 62px; }
p .author { width: auto; padding-right: 9px; }
p .text { width: auto; }​ 
```

# magento - 为什么我在 Magento 中得到重复的子目录存储 url？

> ID：14159018
> 
> 赞同：1
> 
> 时间：2013-01-04T14:29:34.013
> 
> 标签：magento, duplicates, subdirectory

我已经有一家工作商店，想使用相同的后端数据库和主题创建一个新商店。所以我创建了一个新网站、商店和商店视图。该网站工作正常。但是如果新的网站网址应该是例如：

[http://www.domain.com/store/department/product](http://www.domain.com/store/department/product)

它出现：

[http://www.domain.com/store/department/departament/product](http://www.domain.com/store/department/departament/product)。

可能会发生什么？这真让我抓狂。

谢谢你的帮助。

# jquery - 正确清除 jQuery 动画

> ID：14159019
> 
> 赞同：0
> 
> 时间：2013-01-04T14:29:37.840
> 
> 标签：jquery, css, jquery-animate

在我的代码中，我正在为每个轮播项目上的对象设置动画，如下所示：

```
first_text1.fadeTo(textDuration, 1, function(){
    second_text1.fadeTo(textDuration, 1);
}); 
```

当幻灯片更改时，我调用以下内容，其中`$animations`包含添加了任何动画的所有对象：

```
$animations.stop(true, true); 
```

然后我打电话：

```
$animations.each(function() {
    $(this).removeAttr('style');
}); 
```

删除动画留下的任何内联 CSS，以便我可以在返回该幻灯片时重复动画。

我的问题是样式永远不会从`second_text1`上面代码中的第二个回调动画中删除。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:22:34.137

没有看到`$animations`，很难说为什么`second_text1`'s 的样式没有被删除。但是，通过个人经验，我注意到问题`jQuery(':animated')`在于它只能找到正在制作动画的对象。动画完成的那一刻，对象不再考虑`:animated`。

话虽如此，我建议为您想要动画的每个对象添加一个类，并将其用作选择器而不是`$animations`.

因此，我将进行以下更改：

1.  在动画之前添加类，在这种情况下`.fadeTo()`

    ```
    first_text1.addClass('animatedClass').fadeTo(textDuration, 1, function(){
        second_text1.addClass('animatedClass').fadeTo(textDuration, 1);
    }); 
    ```

2.  换班`$animations`_

    ```
    $('.animatedClass').stop(true, true);

    $('.animatedClass').each(function() {
        $(this).removeAttr('style');
    }); 
    ```

演示：http: [//jsfiddle.net/GVjBn/19/](http://jsfiddle.net/GVjBn/19/)

希望这是您正在寻找的。如果您还有其他问题，请告诉我！

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:20:39.530

这里的问题原来是变量中的选择器，其中一些有多个变量。

例如

```
var first_text2 = $('li#region-2 .text-elements h2, li#region-2 .text-elements h3');
var second_text2 = $('li#region-2 .text-elements p'); 
```

您的 removeAttr 函数无法在变量中的所有元素上正常工作。为了解决这个问题，我不得不打电话

```
first_text2.each( function() {
    $(this).removeAttr('style');
}); 
```

很抱歉最初没有在我的问题中显示更多代码！

# windows - 无法使用 WMI 在 Windows 2012 Server 上读取 BCDStore 信息

> ID：14159020
> 
> 赞同：15
> 
> 时间：2013-01-04T14:29:39.620
> 
> 标签：windows, delphi, wmi, windows-server-2012, bcdstore

我们正在使用以下函数来获取当前引导配置指定的处理器数量。这个数字纯粹用于记录。

下面的函数在 XP、Vista、7、2003 和 2008 上运行良好。但是，它在 Windows 2012 Server 上失败。

```
// -1 = not implemented or not allowed
//  0 = not limited
// >0 = number of processors in the {current} boot entry
function Internal_GetBCDNumberOfProcessors: integer;
var
  objBcdStore  : OleVariant;
  objElement   : OleVariant;
  objWBL       : OleVariant;
  objWMIService: OleVariant;
begin
  // for more info, see: http://stackoverflow.com/questions/7517965/accessing-bcdstore-from-delphi/7527164#7527164
  Result := -1;
  try
    objWMIService := GetObject('winmgmts:{(Backup,Restore)}\\.\root\wmi:BcdStore');
    if (not VarIsNull(objWMIService)) and
       boolean(objWMIService.OpenStore('', objBcdStore)) and
       (not VarIsNull(objBcdStore)) and
       boolean(objBcdStore.OpenObject('{fa926493-6f1c-4193-a414-58f0b2456d1e}', objWBL)) and
       (not VarIsNull(objWBL))
    then
      if objWBL.GetElement($25000061, objElement) and //<-- fails here on Server 2012
         (not VarIsNull(objElement))
      then
        Result := StrToIntDef(objElement.Integer, 0)
      else
        Result := 0;
  except
    on E: EOleSysError do
      Result := -1;
  end;
end; 
```

如果我尝试在 Win2012 上运行它，则会`objWBL.GetElement`引发`EOleSysError`带有 text 的异常`OLE error D0000225`。Google 没有找到与此错误代码相关的任何有意义的内容：(

堆栈跟踪表明异常是在 System.Win.ComObj.DispatchInvokeError 中触发的，后者由 VarDispInvoke 调用的 DispatchInvoke 调用。

所有这些都是使用 XE2 复制的。我可以尝试用 XE3 重复这个问题，但我不相信 Delphi RTL 与它有任何关系。

有人知道这种行为的可能原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-04T12:11:31.953

`GetElement`部分：

```
if objWBL.GetElement($25000061, objElement) and //<-- fails here on Server 2012
   (not VarIsNull(objElement))
then
  Result := StrToIntDef(objElement.Integer, 0)
else
  Result := 0; 
```

可以替换为`EnumerateElements`：

```
if objWBL.EnumerateElements(objArray) then try
  for i := VarArrayLowBound(objArray, 1) to VarArrayHighBound(objArray, 1) do begin
    objElement := objArray[i];
    if objElement.Type = $25000061 then
      Exit(objElement.Integer);
  end;
finally VarClear(objArray); end; 
```

这不会提高`EOleException`，但遗憾的是也没有找到`NumberOfProcessors`元素。

# c# - 在响应式扩展中包装文件观察器

> ID：14159021
> 
> 赞同：8
> 
> 时间：2013-01-04T14:29:42.063
> 
> 标签：c#, system.reactive

我一直在考虑将文件观察程序包装在可观察对象中以帮助处理事件，但我在弄清楚如何从中获得我想要的行为时遇到了一些麻烦。文件监视器监视放置文件的目录。当第一次将文件放入该目录时，文件观察程序会触发 Created 事件。但是，如果文件很大或网络连接缓慢，则在文件更新时会触发一系列 Changed 事件。我不想在文件完成写入之前处理文件，所以我真正需要的是这个时间线

```
|Created    |Changed   |Changed   |Changed                      
________________________________________________ 
^Write starts       ^Write finishes       ^Processing Starts 
```

我查看了许多在 Rx 中过滤事件的方法，但我无法得到我需要的“一旦文件文件在 X 秒内没有更改就触发函数”。油门不好，因为它会在中间丢失事件。缓冲区不好，因为事件可能发生在缓冲区边界上。

我曾考虑过使用超时，但我并不疯狂，他们抛出了异常，我希望处理在文件被写入时开始，而不是在没有更多事件时开始。

[Reactive Extensions vs FileSystemWatcher](https://stackoverflow.com/questions/2677976/reactive-extensions-vs-filesystemwatcher)有一个类似的问题，但从未真正解决。

有没有一种方法可以让我轻松做到这一点？我确信这不是一个不常见的用例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-17T15:09:12.597

`ObservableFileSystemWatcher`- 围绕[`FileSystemWatcher`类型](https://github.com/g0t4/Rx-FileSystemWatcher)的可观察包装器- 完美运行。添加一个命名为 NuGet 的包`ReactiveFileSystemWatcher`并创建一个控制台应用程序进行测试，如下所示

```
class Program
{
  static void Main(string[] args)
  {
    using (var watcher = new ObservableFileSystemWatcher(c => { c.Path = @"C:\FolderToWatch\"; c.IncludeSubdirectories = true; }))
    {
      watcher.Created.Select(x => $"{x.Name} was {x.ChangeType}").Subscribe(Console.WriteLine);
      watcher.Changed.Select(x => $"{x.Name} was {x.ChangeType}").Subscribe(Console.WriteLine);
      watcher.Renamed.Select(x => $"{x.OldName} was {x.ChangeType} to {x.Name}").Subscribe(Console.WriteLine);
      watcher.Deleted.Select(x => $"{x.Name} was {x.ChangeType}").Subscribe(Console.WriteLine);
      watcher.Errors.Subscribe(Console.WriteLine);
      watcher.Start();
      Console.ReadLine();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:41:53.807

编辑：审查后，不认为你想要这个......

~~也许我有点过于简单化了，但在这里不是`Throttle`很理想吗？~~

这绝不是“简单”，但我认为它比我以前的想法更接近你想要的：

（奖励：有一个测试用例！;)）

```
void Main()
{
    var pathToWatch = @"c:\temp\";
    var fsw = new FileSystemWatcher(pathToWatch);

    // set up observables for create and changed
    var changedObs = 
       Observable.FromEventPattern<FileSystemEventHandler, FileSystemEventArgs>(
          dlgt => fsw.Changed += dlgt, 
          dlgt => fsw.Changed -= dlgt);
    var createdObs = 
       Observable.FromEventPattern<FileSystemEventHandler, FileSystemEventArgs>( 
          dlgt => fsw.Created += dlgt, 
          dlgt => fsw.Created -= dlgt);

    // the longest we'll wait between last file write and calling it "changed"
    var maximumTimeBetweenWrites = TimeSpan.FromSeconds(1);

    // A "pulse" ticking off every 10ms (adjust this as desired)
    var timer = Observable
        .Timer(TimeSpan.Zero, TimeSpan.FromMilliseconds(10))
        .Select(i => DateTime.Now);

    var watcher = 
        from creation in createdObs
        from change in changedObs
            // we only care about changes matching a create
            .Where(changeEvt => changeEvt.EventArgs.Name == creation.EventArgs.Name)
            // take latest of (pulse, changes) and select (event, time since last file write)
            .CombineLatest(timer, (evt, now) => new {
                    Change = evt, 
                    DeltaFromLast = now.Subtract(new FileInfo(evt.EventArgs.FullPath).LastWriteTime)})
            // skip all until we trigger than "time before considered changed" threshold
            .SkipWhile(evt => evt.DeltaFromLast < maximumTimeBetweenWrites)
            // Then lock on that until we change a diff file
            .Distinct(evt => evt.Change.EventArgs.FullPath)
        select change.Change;

    var disp = new CompositeDisposable();

    // to show creates
    disp.Add(
        createdObs.Subscribe(
           evt => Console.WriteLine("New file:{0}", 
                evt.EventArgs.FullPath)));

    // to show "final changes"
    disp.Add(
        watcher.Subscribe(
           evt => Console.WriteLine("{0}:{1}:{2}", 
                 evt.EventArgs.Name, 
                 evt.EventArgs.ChangeType, 
                 evt.EventArgs.FullPath)));

    fsw.EnableRaisingEvents = true;

    var rnd = new Random();
    Enumerable.Range(0,10)
        .AsParallel()
        .ForAll(i => 
            {
                var filename = Path.Combine(pathToWatch, "foo" + i + ".txt");
                if(File.Exists(filename))
                    File.Delete(filename);

                foreach(var j in Enumerable.Range(0, 20))
                {
                    var writer = File.AppendText(filename);
                    writer.WriteLine(j);
                    writer.Close();
                    Thread.Sleep(rnd.Next(500));
                }
            });

    Console.WriteLine("Press enter to quit...");
    Console.ReadLine();
    disp.Dispose();        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:25:50.343

看看我在[这个答案](https://stackoverflow.com/questions/7597773/does-reactive-extensions-support-rolling-buffers/7604825#7604825)`BufferWithInactivity`中的扩展方法。

我认为您可以使用它来查找已更改事件中的不活动状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T22:33:35.980

查看 NuGet 包[Reactive FileSystemWatcher](https://www.nuget.org/packages/ReactiveFileSystemWatcher/0.1.2)。

源代码在[GitHub 页面上](https://github.com/g0t4/Rx-FileSystemWatcher)。

# javascript - 如何在 Windows8 商店应用程序的 Javascript/HTML5 中设置全局变量

> ID：14159022
> 
> 赞同：1
> 
> 时间：2013-01-04T14:29:47.520
> 
> 标签：javascript, windows-8

我想在 .js 文件中使用全局变量。例如，

当我在“a.js + a.html”中读取文件内容并保存到某个变量“fileContent”中时

那么我也想在“b.js + b.html”中使用那个'fileContent'。

（另外，当我更改“b.js + b.html”中的“fileContent”时，应该会影响“a.js + a.html”中的“fileContent”）

我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:08:49.303

鉴于 Windows 8 应用程序的体系结构是单页模型，您无需在其中导航浏览器，而只需加载 HTML 片段并将其插入*当前*文档，这非常容易。但是，我建议使用一些类型，而不仅仅是“裸”全局变量。

文件 A（globals.js）：

```
WinJS.Namespace.define("MyGlobals",  {
    variableA: null,
}); 
```

在 WinJS 包含之后，将其包含在 default.html 的顶部。

文件 B (b.js)：

```
// your other code
...
MyGlobals.variableA = getValueFromSomewhere(); 
```

文件 C（b.html 或 c.js）：

```
// your other code
...
printSomethingAwesomeFromData(MyGlobals.variableA); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:49:57.893

您还可以使用应用设置：

```
var applicationData = Windows.Storage.ApplicationData.current;
var localSettings = applicationData.localSettings;
var composite = new Windows.Storage.ApplicationDataCompositeValue();
composite["intVal"] = 1;
composite["strVal"] = "string";

localSettings.values["exampleCompositeSetting"] = composite; 
```

在这里您可以找到更多信息：[链接](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465118%28v=win.10%29.aspx?ppud=4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:16:04.910

您可以轻松定义变量并将其用作全局变量，例如

```
WinJS.Namespace.define("MyGlobals", {i: 0,k:5    }) 
```

为了检查，您可以添加一个事件侦听器，例如

```
div1.addEventListener('click', divClickEvent);

function divClickEvent() {
        MyGlobals.i++;
        MyGlobals.k++;
        console.log("ValueOf_i____" + MyGlobals.i);
        console.log("ValueOf_k____" + MyGlobals.k);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:40:57.117

使用本地存储。
在一个：

```
localStorage.setItem('fileContent', 'value;'); 
```

在 B 中：

```
var fileContent = localStorage.getItem('fileContent'); 
```

或者只是访问`localStorage`任何其他对象：

```
localStorage.fileContent = "value"; 
```

但是，请记住，`localStorage`将所有值转换为字符串，这包括对象和数组。要设置/获取这些，您需要`JSON.stringify`分别使用和 JSON.parse：

```
localStorage.setItem('fileContent', JSON.stringify([1,2,3,4,5,6,7]));
var fileContent = JSON.parse(localStorage.getItem('fileContent')); 
```

# nsight - Nsight 远程调试器设置

> ID：14159025
> 
> 赞同：2
> 
> 时间：2013-01-04T14:30:12.000
> 
> 标签：nsight

我正在尝试设置一个远程 Nsight v2.2 调试器，仅用于 GPU 调试（无 CUDA）。我已经按照这个[Nvidia pdf](http://www.nvidia.com/content/siggraph/Kiel_Parallel_Nsight.pdf)来设置远程目标机器和开发机器。一切都已启动并运行，但两者之间的通信不正常。我收到诸如 MSVSMON.exe 未在远程计算机上运行等错误。我不确定所需的确切设置。应该是什么，

*   VS2010项目设置
*   Nsight Monitor（远程机器）设置
*   VS2010和开发机中的Nsight设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:25:12.040

您要进行什么样的活动（CUDA、API 或着色器 DX 调试）？如果有上述任何一种情况，则无需运行 MSVSMON。只要确保你：

1.  运行 Nsight Monitor（在远程系统上）
    *   [在设置远程调试文档](http://http.developer.nvidia.com/NsightVisualStudio/2.2/Documentation/UserGuide/HTML/Content/Setup_Remote_Debugging.htm)中了解其他监视器选项
2.  （在主机端）右键单击VS 2010项目并选择“Nsight用户属性”并在“连接名称”设置下输入远程机器名称
    *   如果您不想同步（这意味着它将文件复制到目标机器），请转到“同步”节点并在那里进行更改。请参阅[有关同步的文档](http://http.developer.nvidia.com/NsightVisualStudio/2.2/Documentation/UserGuide/HTML/Content/Synchronization.htm) （单击确定以接受所有监视器更改）
3.  现在您应该能够选择是否要从 Nsight 菜单中调试 CUDA 或图形，这将在远程计算机上启动您需要的内容。
    *   注意：不要执行“F5”，因为它会启动 Microsoft (CPU) 调试器

希望对您有所帮助。如果您有新的/其他问题，请查看 NVIDIA 论坛

# jquery - 如何将复选框添加到 jquery 数据表标题？

> ID：14159027
> 
> 赞同：5
> 
> 时间：2013-01-04T14:30:16.843
> 
> 标签：jquery, datatables

我想在数据表的表头中添加一个复选框或跨度。我不想在 Html 中添加它，我希望在初始化时从 javascript 中做到这一点。请给我建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T18:02:33.343

好吧，我不想更改 html，这并不是我必须做的大更改，只需在初始化时添加一些 html。

```
 nTable = $('#tblExample').dataTable({
        "bJqueryUI": true,
        "bDestroy":true,
        "bPaginate": false,
        "bSortable": false,
        "aaData":testData,
        "aoColumns": [

                    {   "sTitle": "<input type='checkbox'></input>","mDataProp": null, "sWidth": "20px", "sDefaultContent": "<input type='checkbox' ></input>", "bSortable": false},
                    {   "mDataProp": "Year"},
                    {   "mDataProp": "Month"},
                    {   "mDataProp": "Savings"}

        ]
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:41:16.700

尝试这个：

```
<table id="myTable">
<thead>
  <tr>
    <th>
      <div>
        <input id="checkbox1" type="checkbox"/>
      </div>
    </th>
  </tr>
</thead>
</table> 
```

我现在才知道你的问题。我认为这篇[文章](http://datatables.net/forums/discussion/4840/how-to-add-a-checkbox-to-the-table-header/p1)解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T19:30:13.110

这是旧的，但我将在此处添加此声明以供那些展望未来的人使用。{"mData":"LineItem_nbr",
"mRender": function (data,type,full) { data 包含 mData 的值 return ''; }, }

将 LineItem_nbr 更改为 autoID 或您用来识别记录的任何内容。

这将在您添加此行的行中放置一个复选框，并且可以通过 id 进行查找，或者您可以使用其中的类来对多个项目进行 jQuery 抓取。

# security - Transfer Comodo Security Certificate from PC to Android

> ID：14159031
> 
> 赞同：1
> 
> 时间：2013-01-04T14:30:40.020
> 
> 标签：security, ca

Over the last couple of days, I have been trying to update the keystore on my Samsung Galaxy Tab running Android 2.2\. My company recently updated their Citrix server apps (XenApp to be more specific) and also changed their security certificate from CA to Comodo.

I've tried everything from manually loading the certificate to using Java and BouncyCastle to put the certificate into the cacerts.bks file from my tablet to using Portecle to try and create a new bks file. None of those options have worked so far.

The one thing I have not tried and am willing to try if necessary is pulling the cacerts.bks file from my phone which is running Android 4.1.1 but didn't want to run the risk of it not working. (Not sure if it is still cacerts.bks on 4.1.1)

Any help would be greatly appreciated. If all I've needed to do is move the cacerts.bks file from my phone to my tablet I'm probably just going to bash my head against the desk for the next couple of days.

Thank you all!

Joe

# jquery - 使用 jQuery 为多选的某些选项着色的错误

> ID：14159035
> 
> 赞同：1
> 
> 时间：2013-01-04T14:30:55.130
> 
> 标签：jquery, css, colors, multi-select

我正在尝试使用 jQuery 在填充多选列表的某些选项时将它们涂成红色。这是我的代码：

```
$.each(subjects, function(key, subject) 
{
    if (select.find('option[value=\"' + encodeURIComponent(subject) + '\"]').length === 0 && subject!="") 
    {
        //Ajouter la nouvelle catégorie dans la liste
        $('<option>', {
            value: subject,
            text: subject
        }).appendTo(select);

        if (colored==true)
        {
            //Change color of options' text

            //$("option[value='"+subject+"']").css('color', 'red');
            $("#" + selectList + " option[value='"+ encodeURIComponent(subject) +"']").css('color', 'red');
        }
    }
}); 
```

我目前对这段代码有两个问题：

1- 第二个 encodeURIComponent 不能处理包含简单引号的选项。这是控制台中的错误示例：

> 未捕获的错误：语法错误，无法识别的表达式：
> 
> value='est%20le%20type%20d'action%20de']

我尝试修改发生这种情况的行，使其类似于第一个 if 子句中的行，但它没有改变任何东西。

2- 我的 jQuery 代码没有为包含空格的选项着色。

我怎样才能解决这两个问题？先感谢您。

编辑：变量 selectList 包含我的多选的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:47:59.587

**不要在选项中使用空格或引号。**（AKA - “不要那样做”）相反，请考虑使用键（数字或简单文本）作为选项的值。当您处理输入时，您可以将这些值映射到您真正需要的值。这样做还可以在某些时候保存您的 HTML，防止您意外输入关闭属性甚至整个标签的字符。

**颠倒你的报价。**JavaScript 可以将`''`or`""`用于字符串。如果您无法避免使用单引号，并且知道您不会在选项值中使用双引号，则将其替换为：

```
" option[value='"+ encodeURIComponent(subject) +"']" 
```

有了这个：

```
' option[value="'+ encodeURIComponent(subject) +'"]' 
```

**不要在将值放入 HTML 时对值进行 URI 编码**而是将值保留为纯文本，或者如果需要，尝试对它们进行 HTML 编码。如果您需要对它们进行 URI 编码（例如 GET 参数），则在表单提交时对它们进行 URI 编码，就像您准备将数据发送到其他地方一样。

# javascript - jQuery preventdefault 表单提交第二次出错

> ID：14159048
> 
> 赞同：1
> 
> 时间：2013-01-04T14:32:05.847
> 
> 标签：javascript, jquery, validation, preventdefault

我正在使用对 jqtransformed 项目进行验证的表单提交。奇怪的是提交控制只能工作一次。如果我在第一次尝试中提交正确的表单，它会发送值。但如果我不这样做，它会提醒我并且永远不会再次提交。

这是我的样本工作。

```
function jqkontrol(){
    var alis = jQuery("#alis_yeri div.jqTransformSelectWrapper span").text();
    var donus = jQuery("#donus_yeri div.jqTransformSelectWrapper span").text();
    if(alis!='Alış Yeri Seçiniz' && donus!='Dönüş Yeri Seçiniz'){
        jQuery("form#rezervasyon").submit();
        return true;
    }else{
        alert('Alış noktası seçiniz.');
        jQuery("form#rezervasyon").submit(function (e) {
            e.preventDefault();
        });
        return false;
    };
}

<form>
<input type="image" src="http://www.guiderentacar.com/yeni/tema/bg_devamet.png" onclick="jqkontrol();" />
</form> 
```

这是现场版本：[源的现场演示。](http://www.mustafabugra.com/test/webhox/jqtransform2/jqtransform.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:36:29.893

这段代码在这里：

```
 jQuery("form#rezervasyon").submit(function (e) {
        e.preventDefault();
    }); 
```

为表单上的“提交”事件建立一个事件处理程序。处理程序是永久的；好吧，它是永久性的，直到你明确地把它拿走，你没有。因此，如果您有错误，则设置该处理程序，然后从那时起您将永远无法提交表单；该处理程序将始终阻止默认操作。

不要这样做，而是执行以下操作（我认为）：

1.  更改提交图像的“onclick”处理程序：

    ```
    <input type="image" src="http://www.guiderentacar.com/yeni/tema/bg_devamet.png" onclick="jqkontrol(event);" /> 
    ```

2.  更改验证码：

    ```
    function jqkontrol(ev){
       ev = ev || window.event; // for IE
       var alis = jQuery("#alis_yeri div.jqTransformSelectWrapper span").text();
       var donus = jQuery("#donus_yeri div.jqTransformSelectWrapper span").text();
       if(alis!='Alış Yeri Seçiniz' && donus!='Dönüş Yeri Seçiniz'){
          return true;
       }else{
          alert('Alış noktası seçiniz.');
          if (ev.preventDefault) ev.preventDefault();
          ev.returnValue = false; // for old IE
       };
    } 
    ```

# google-apps-script - 是否可以共享对作为 Web 应用程序部署的脚本的开发版本的访问权限？

> ID：14159050
> 
> 赞同：0
> 
> 时间：2013-01-04T14:32:14.637
> 
> 标签：google-apps-script

我正在开发部署为 Web 应用程序的 GAS。我可以共享脚本并让其他人编辑它，但我找不到让他们测试网络应用程序的方法。

来自“为您的最新代码测试 Web 应用程序”的链接。仅对脚本的所有者可用。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:08:28.310

更新：看起来现在可以使用 - 通过[发行说明](https://developers.google.com/apps-script/release_notes)“如果脚本与其所有者以外的编辑共享并作为 Web 应用程序发布，那么其他编辑者现在可以更新应用程序的版本并访问其开发 URL（以 / 结尾）开发）。”

... 旧的解决方法：您可以将另一个脚本文件连接到您的主文件作为解决方法。在第二个脚本中，将主脚本作为开发模式的[库](https://developers.google.com/apps-script/guide_libraries)导入。当您保存、发布和共享第二个 exec 链接时，它就像共享 dev 链接一样。

主脚本

```
function doGet() {
  var app = UiApp.createApplication();
  var btn = app.createButton('Click').setId('btn');
  var box = app.createTextBox().setId('box').setName('box').setText('hello');

  var handler1 = app.createClientHandler().forEventSource().setEnabled(false);
  var handler2 = app.createServerHandler('change').addCallbackElement(box);
  btn.addClickHandler(handler1).addClickHandler(handler2);

  app.add(btn).add(box);
  return app;
}

function change(e) {
  var app = UiApp.getActiveApplication();
  var box = e.parameter.box;
  app.getElementById('btn').setText(box).setEnabled(true);
  return app;
} 
```

第二个脚本（在将主脚本作为库导入并将标识符命名为“主”之后）

```
function doGet() {
  var app = master.doGet();
  return app;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:42:07.700

您可以使用支持的方式将 Google 应用脚本部署为网络服务：创建新版本并发布它们，然后所有编辑者都可以通过其部署 URL 访问该应用。这允许所有编辑器测试最新*发布*的版本，但不能测试最新*编辑*的版本。

这种方法的缺点：

*   每次重新发布都需要两个步骤。( `Manage Versions / Create`, 然后`Deploy`.)
*   Your app must be publicly accessible.

The pros:

*   Once published as a web app, the URL does not change, so everyone sees the latest copy by simply reloading.
*   You can easily republish previous versions for side-by-side comparison testing.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T17:16:43.547

目前无法分享。

# php - 只要浏览器打开就保持会话

> ID：14159051
> 
> 赞同：0
> 
> 时间：2013-01-04T14:32:15.150
> 
> 标签：php, session

我有一个保持会话跟踪的 PHP 应用程序。我希望应用程序保持用户会话，直到他关闭浏览器。在浏览器关闭之前，会话不应过期。我是一名 Java 开发人员，我是 PHP 新手。

在浏览器关闭之前会话不应超时。无论如何，一旦浏览器关闭，会话将在一段时间后超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:52:19.117

可以使用 Javascript 来检测页面或浏览器窗口何时关闭。然而，这不应该被依赖，因为有很多方法可以让用户停止浏览网站而不会发出通知（浏览器崩溃、网络或断电等）。

标准的答案是不要打扰这种事情——无论如何，PHP 会话都有超时机制。如果用户在给定时间段内没有加载任何页面，则会话将被删除。这是标准的，您不必担心。您可能想做的唯一一件事就是根据您希望用户使用网站的方式调整超时持续时间。

如果您*真的*想关注用户并确保他们仍然活跃在网站上，并在他们停止时立即终止会话，我猜您会做一些类似编写简单的 Ajax ping 的操作，以便页面发送每隔几分钟（或您想要的任何时间间隔）向服务器发送一次请求。

这将使会话保持活动状态，即使会话超时相当短，直到浏览器停止发送 ping（这可能是因为浏览器窗口已关闭，但也可能是浏览器崩溃、网络连接中断或用户拉电源插头等）。

不利的一面是，它会给您的服务器带来大量额外的流量（并为您带来大量额外的工作），与简单地让会话自行超时相比没有真正的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T00:41:19.657

我知道这个问题有点老了，但因为它仍然相关，所以我是这样做的：

```
function keepMeAlive() {
    var img = new Image();
    img.src = YOUR_URL + 'images/empty.gif?' + new Date().getTime();
}
window.setInterval(keepMeAlive, 600000); 
```

现在创建一个 1x1 像素的 gif 图像并将其上传到指定的 URL。上面的代码将每 10 分钟加载一次，从而使您的会话保持活动状态。

# visual-studio-2012 - 如何卸载 Visual Studio 2012 以便我可以安装预加密版本？注册表项？？

> ID：14159052
> 
> 赞同：4
> 
> 时间：2013-01-04T14:32:17.193
> 
> 标签：visual-studio-2012, installation, key

我从网上安装了 VS2012，然后加入了一家拥有 VS2012 副本并内置密钥的公司。所以我从网上卸载了该版本并安装了公司版本，但我仍然得到“还剩 3 天......”

那么我必须以某种方式进行更多的卸载吗？也许一些注册表项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:38:47.310

资料来源：[http ://social.msdn.microsoft.com/Forums/vstudio/en-US/6fadba03-5b07-47b1-9f5e-ed207462d411/how-to-completely-uninstall-vs-2012-rc?forum=vssetup](http://social.msdn.microsoft.com/Forums/vstudio/en-US/6fadba03-5b07-47b1-9f5e-ed207462d411/how-to-completely-uninstall-vs-2012-rc?forum=vssetup)

> 如果您的操作系统是 Win 7：
> 
> *   清除您的**%temp%**文件夹，它们都是临时文件。忽略那些您无法删除的文件。
> *   我们可能需要重置模板。打开 Windows 资源管理器，然后导航到 \Common7\IDE （默认情况下 x86 OS C:\Program Files \Microsoft Visual Studio 11.0\Common7\IDE
>     x64 OS C:\Program Files(x86) \Microsoft Visual Studio 11.0\Common7\IDE ） ;
> *   删除**ItemTemplatesCache、ProjectTemplatesCache**文件夹；
> *   在开始菜单 -> 所有程序 -> Microsoft Visual Studio 2012 -> Visual Studio 工具下打开 Visual Studio 命令提示符（2012）（以管理员权限运行：右键单击程序 -> 以管理员身份运行）；
> *   运行**devenv /InstallVSTemplates**开关
> *   运行**devenv /Setup**开关
> 
> 如果重置模板没有帮助，请尝试重置 Visual Studio
> 
> *   在开始菜单 -> 所有程序 -> Microsoft Visual Studio 2012 -> Visual Studio 工具下打开 Visual Studio 命令提示符（2012）（以管理员权限运行：右键单击程序 -> 以管理员身份运行）；
> *   在命令提示符下尝试一些 devenv 开关：
>     1.  运行**devenv /Resetsettings**以消除设置损坏的原因。
>     2.  在命令提示符中运行**devenv /ResetSkipPkgs 。**
>     3.  运行**devenv /Safemode**以查看是否可以正确应用它。这可以消除第三方加载项或程序包导致问题的可能性。
> *   切换并尝试新的用户帐户。这可以排除损坏的用户配置文件的可能性。
> 
> 如果您的操作系统是Win 8，请尝试使用所有应用程序页面并打开提示。
> 
> 此外，您可以尝试运行安装程序来修复 Visual Studio。

如果这不起作用，我建议卸载并重新安装。

# c# - Linq to Sql：仅选择 DB1-table1 中 DB2-table2 上不存在的项目

> ID：14159055
> 
> 赞同：1
> 
> 时间：2013-01-04T14:32:21.423
> 
> 标签：c#, linq-to-sql, multi-database

我一直在研究如何在 ac# 项目中正确实施波纹管任务。

是假装...

获取特定数据库表（db1）中存在但在另一个特定数据库表（db2）上不存在的所有数据

两个表都有共同的 id

我遇到过很多关于这个的帖子，但似乎没有一个能解决我的问题。有什么帮助吗？

**编辑：**

```
Select all data 
on table_x from database_x 
Where item_id from table_x are not found inside table_y from database_y 
```

=> 以列表格式返回数据

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:24:52.667

这是我正在寻找的解决方案。根据@user1949706 的回答，我使用 LINQ 从两个表中选择了所有数据（也来自不同的数据库），并将其放在内存中。

要完全回答我关于如何使用 LINQ 执行此操作的问题，请参阅：

```
//DB1
db1DataContext db1 = new db1DataContext();
//DB2
db2DataContext db2 = new db2DataContext();

//SELECT ALL DATA FROM DB1
var result1 = (from e in db1.Items
               select e
              ).ToList();

//SELECT ALL DATA FROM DB2
var result2 = (from e in db2.Item2s
               select e
              ).ToList();

//SELECT ALL ELEMENTS FROM DB2.TABLE THAT DO NOT EXISTS ON DB1.TABLE BASED ON EXISTING ID's            
var resultFinal = ( from e in result1
                    where !(from m in result2
                            select m.Id).Contains(e.Id)
                    select e
                  ).ToList(); 
```

我还要感谢 Robert Rouse 对[这个问题](https://stackoverflow.com/questions/183791/how-would-you-do-a-not-in-query-with-linq)的回答以及其他所有试图提供帮助的人。

希望它可以帮助别人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:28:26.277

According to [this](https://stackoverflow.com/questions/352949/linq-across-multiple-databases) answer you can join tables over different databases with LINQ. Even join accross servers.

Another option is to read all the data you need in memory and join both tables in memory (you can still use LINQ for that).

# asp.net-mvc - 如何创建自己的 webapi 操作并使用 jquery 调用它？

> ID：14159056
> 
> 赞同：2
> 
> 时间：2013-01-04T14:32:25.833
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在学习 ASP.NET MVC4 Web API。我想创建一个接收两个参数的新方法

```
[HttpPost] 
public string MarkAsSeen(int objectID, long userID) 
```

我想使用 jquery 来使用它：

```
$.ajax({
        type: "POST",
        url: "/api/tutorial/MarkAsSeen",
        data: JSON.stringify({ objectID: _obj, profileID: _pid }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result) {
            alert(_tutorial + ' seen');
        },async: true
}); 
```

我的路线是这样配置的

```
config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{action}"
            ); 
```

但它只是不起作用：

> 未找到与请求 URI 'http://local.dev.unation.com/api/tutorial/MarkAsSeen' 匹配的 HTTP 资源。","MessageDetail":"在控制器 'Tutorial' 上找不到与要求。

如果我将路由的模板更改为 api/{controller}/{action}/{objectID}/{profileID} 和 jquery 方法以在 url 上添加此信息：/api/tutorial/MarkAsSeen/ + _obj + / + _pid 它作品。

我不想执行这些更改，因为：

*   我想为所有操作提供一条通用路线（因此它们的参数名称/数量无关紧要）
*   这个 url 附加很丑，我想使用 data 属性

你能告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:38:40.253

Web.Api 真的不喜欢多个参数。最简单的解决方案是创建一个保存数据的新类型：

```
public class MarkAsSeenRequest
{
    public int objectID { get; set; }

    public int profileID { get; set; }
} 
```

并在您的控制器操作中使用它：

```
[HttpPost] 
public string MarkAsSeen(MarkAsSeenRequest request)
{
    //...
} 
```

它应该适用于您的原始路线：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}"
        ); 
```

进一步阅读：

*   [WebAPI如何做参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)
*   [引擎盖下的 WebAPI 参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)
*   [发送 HTML 表单数据](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

# javascript - 使用钛的应用

> ID：14159057
> 
> 赞同：0
> 
> 时间：2013-01-04T14:32:30.870
> 
> 标签：javascript, titanium, titanium-mobile, tidesdk

我正在学习在 Titanium 工作室进行开发，并认为如果我将应用程序作为示例并且我在 (https://github.com/6wunderkinder/wunderlist) 上发现了一个可用的应用程序我按照指示做了导入到资源文件夹，当我运行应用程序（在移动网络预览上）时，index.html 页面是空的，带有侧边栏等。但没有任何效果。

它是一个旧代码库，但只是学习运行并查看它是如何编写的。我什至在 TideSDK 中尝试过，因为它是一个桌面应用程序。但无法运行，这意味着当我尝试在潮汐dk 中导入时，它说这不是钛工作室应用程序。我滚动浏览代码，这就是我的想法 1\. tiapp.xml 不可用，所以我猜它无法导入。2\. index.html 不完整我猜是因为没有提到在应用程序的打开页面中列出任务的代码..

我的假设是否正确？如果有人可以帮助我运行这个项目，那将是一个很好的开始。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:32:24.573

尝试供应商的实际文档，可能是一个更好的起点。

有一个 wiki、培训视频和大量最近的代码示例。

[http://www.appcelerator.com/developers](http://www.appcelerator.com/developers)

# java - 捕获异常只是懒惰的错误检查吗？

> ID：14159060
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:32:37.103
> 
> 标签：java, exception-handling, try-catch

我确定我会为此感到震惊......但我来自一个没有`try`/`catch`块的语言，我正在学习 Java 异常捕获，我很难看到它不是只是一个惰性版本的验证。我看过一些例子，例如：

```
String Box [] = {"Book", "Pen", "Pencil"};
while(i<4)
{
    try
    {
        System.out.println(Box[i]);     
    }
    catch(ArrayIndexOutOfBoundsException e)
    {
        System.out.println("Subscript Problem " + e);
        i++;
    } 
```

和：

```
int y = 0;
int x = 1;
// try block to "SEE" if an exception occurs
try
{
    int z = x/y;
    System.out.println("after division");
} 
catch (ArithmeticException ae) 
{
    System.out.println(" attempt to divide by 0");
} 
```

这些显然是非常基本的例子......但IMO要么这些是捕捉错误的*可怕*例子，要么没有充分的理由这样做。在示例一中，如果我们循环查找元素的数量，`Box`我们不需要检查越界索引。在示例二中，如果我们检查除数 0，我们不需要检查 0 `ArithmeticException`。

有没有一个***很好***的例子或理由说明使用`try`/`catch`块比老式的变量验证更好？还是只是“Java”方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:49:45.223

这将是一个没有例外的语言示例：

```
if (!rename(file1, tmpName))
  if (!rename(file2, file1))
     if (!rename(tmpName, file2))
        return 0;
return -1; 
```

另请注意，将不会详细说明究竟出了什么问题。

与 Java 比较：

```
try {
   rename(file1, tmpName);
   rename(file2, file1);
   rename(tmpFile, file2);
   return true;
}
catch (IOException e) {
   e.printStackTrace();
   return false;
} 
```

如果`rename`将源名称和目标名称正确存储在异常消息中，我们将确切知道它哪里出错了。

综上所述，异常机制的优势包括以下几点：

*   允许您声明一个必须作为一个整体成功的代码块，并且任何错误都得到同等对待；
*   允许您将所有错误处理委托给应用程序中的一个点，即所谓的*异常屏障*；
*   异常对象存储重要的调试信息。

例外是一个*巨大的胜利*，所有现代语言都有例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:39:10.103

您选择了最糟糕的示例，因为它们是未经检查的异常。如果你看到很多这样的 try/catch 块，我倾向于同意你关于懒惰/不适当因素的观点。但是，对于 CHECKED 异常，try/catch 非常有用。你是不是对 C 的工作感到厌烦

```
int status = thisStatementMayFail();
if (status > 0) {
    // do_stuff
}
else {
    // handleException();
} 
```

我更喜欢Java的

```
try {
    thisStatementMayFail();
    // do stuff
} catch (Exception e) {
    // handleException
} 
```

可能是懒惰，但绝对是更好的 IMO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:39:28.493

我认为异常是一种错误检查，但绝不是懒惰的。

您那里的示例可能是**惰性**的，但是如果您将其更改为进行远程调用的东西并且远程调用可能由于多种原因（网络故障、远程服务故障等）而失败，然后检查`return code`以查看是否存在是一个错误（就像在 C 中所做的那样，带有整数返回码）引入了额外的复杂性。

异常背后的想法是，它们代表在引发它们时无法恢复的错误。

关于 catch `ArithmeticException`，我认为在大多数情况下这将是糟糕的编程而不是懒惰的错误检测（但不是全部......虽然我想不出一个）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T14:39:45.977

异常的主要论据之一是它们在正常流程之外传播。

使用您的示例：

```
public String getMyData(int index) {
  String box [] = {"Book", "Pen", "Pencil"};
  return box[index];
} 
```

`index`如果是4 ，你会怎么做？调用该方法的代码如何知道 this 没有有效值（并且不要说“使用 null”，因为许多方法可能会`null`作为合法值返回）。

这是异常的主要用途。此外，异常的层次结构有助于通过知道如何处理它的方法来简化对情况的处理（在这个例子中，调用方法可能很乐意`null`在抛出异常的情况下使用该值，或者可能觉得它必须停止程序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T14:41:27.990

Java 中的 Try/catch 更像是一种**处理不可预见的（即不太常见的）错误和异常**并将编程上下文传播到能够捕获和处理该条件的编码逻辑的机制。

您提供的示例确实是 try/catch 的不良示例，并且基本上是惰性验证。糟糕的编码实践通常使用 try/catch 而不是 if 测试来捕获异常。

try/catch 有开销，并且比 if-test 更昂贵的操作，例如您在第二个示例中使用的：

```
if (y != 0) {
  int z = x/y
  // use z value
} else {
  System.out.println(" attempt to divide by 0");
} 
```

I/O 为异常处理提供了一个更好的例子。在大多数情况下，您可以打开文件、读取其内容并关闭文件，但偶尔文件会被锁定、不存在、无法关闭等。您可以使用 I/O 可能出错的情况，而不是测试任何可能的情况try-catch干净地处理*IOException*或*FileNotFoundException 。*

```
BufferedReader br = null;
try {
    File file = new File("target.dat");
    br = new BufferedReader(new FileReader(file));  
    String s;
    while ((s = br.readLine()) != null) {
          System.out.println(s);
    }
} catch (IOException ioe) {
    System.err.println("Error: " + ioe);     
} finally {
 if (br != null)
  try {
    br.close();
  } catch(IOException ioe) {
    System.err.println("Error: " + ioe);     
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T14:39:26.797

异常应该只用于特殊情况——在正常执行期间根本*不应该发生的事情。*他们应该只被抓住，你实际上可以对他们做点什么。

在非异常情况下，例如验证外部输入，`if`应该首选 an。这是因为异常比抛出异常要慢得多`if`，但如果不抛出异常实际上会更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T14:43:08.277

在尝试工作之前，并非所有错误都可以得到验证。例如，您能否检测到一个网站会在您实际尝试之前返回一个页面？

没有例外，你必须有复杂的返回类型来向调用者报告错误。如果你想纠正错误，这些返回类型会变得更加复杂和复杂。

异常是纠正错误和展开堆栈的好方法。但这必须在某个地方停下来，而某个地方就是您需要`catch`.

# ruby-on-rails - 模块不允许创建类的实例

> ID：14159067
> 
> 赞同：0
> 
> 时间：2013-01-04T14:33:06.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, class, module

我需要阅读我被告知的更多 Ruby 理论，这很好，但是我阅读的大多数文献都是在非常高的水平上解释的，我不明白。所以这让我想到了这个问题和我的代码

我有一个处理我的 api 调用的模块

```
module Book::BookFinder

BOOK_URL = 'https://itunes.apple.com/lookup?isbn='

def book_search(search)
response = HTTParty.get(BOOK_URL + "#{search}", :headers => { 'Content-Type' => 'application/json', 'Accept' => 'application/json' })
results = JSON.parse(response.body)["results"]
end
end 
```

然后是我的控制器

```
class BookController < ApplicationController
before_filter :authenticate_admin_user!
include Book::BookFinder

def results
results = book_search(params[:search])
@results = results
@book = Book.new
@book.author = results[0]["artistName"]

end

def create
@book = Book.new(params[:book])
 if @book.save
redirect_to @book, notice: 'Book was successfully saved'
 else
render action:new
end
end
end 
```

我想要做的是将作者值保存到我的 Book 模型中。我收到错误消息

```
undefined method `new' for Book:Module 
```

在进行之前的帖子中已向我解释过的搜索时。无法实例化模块。解决方案是上课？但也许我没有正确理解，因为我不知道该把这门课放在哪里。给我的解决方案是

```
 class Book
  def initialize
   # put constructor logic here
  end

 def some_method
 # methods that can be called on the instance
 # eg:
 # @book = Book.new
 # @book.some_method
 end

# defines a get/set property
  attr_accessor :author
# allows assignment of the author property
end 
```

现在我确信这是一个有效的答案，但谁能解释发生了什么？看到一个有解释的例子对我来说比阅读书中的一行又一行的文字更有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:50:36.930

```
module Finders

  ## Wrap BookFinder inside another module, Finders, to better organise related
  ## code and to help avoid name collisions
  ## lib/finders/book_finder.rb
  module BookFinder
    def bar
      puts "foo"
    end
  end  
end

## Another BookFinder module, but this one is not wrapped.
## lib/book_finder.rb
module BookFinder
  def foo
    puts 'bar'
  end
end

## Book is a standard Rails model inheriting from ActiveRecord
## app/models/book.rb
class Book < ActiveRecord::Base
  ## Mixin methods from both modules
  include BookFinder
  include HelperLibs::BookFinder
end

## app/controllers/books_controller.rb
class BookController
  def create
    book = Book.new
    book.foo
    book.bar

  end
end

BookController.new.create
 - bar
 - foo 
```

在您的代码中，您正在创建一个具有相同名称的模块和一个类 - 这是不允许的。该模块将覆盖该类，因为它是第二个加载的。

# python - 何时调用 __lldb_init_module？

> ID：14159070
> 
> 赞同：4
> 
> 时间：2013-01-04T14:33:23.107
> 
> 标签：python, objective-c, ios, llvm, lldb

我正在关注 WWDC session 412 - Debugging in Xcode。那里有一个关于为您自己的类创建自定义 LLDB 摘要的演示。

我根本无法显示摘要。

通过在 Python 脚本中插入打印调用，我能够确定：

1.  脚本文件正在被导入
2.  __lldb_init_module 永远不会被调用

关于什么可以阻止 __lldb_init_module 被调用的任何想法？是否有特定时间需要导入脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:31:16.323

对我来说，这通过添加

```
command script import /path/to/CustomSummaries.py 
```

到`~/.lldbinit`文件并重新启动 Xcode，或者通过在“main”中设置断点并在调试器控制台中执行导入命令。

我使用最小的自定义描述脚本对其进行了测试：

```
import lldb

def myobject_summary(valueObject, dictionary):

    return 'MyCustomDescription'

def __lldb_init_module(debugger, dict):

    debugger.HandleCommand('type summary add MyObject -F CustomSummaries.myobject_summary') 
```

这是 Xcode 调试器窗口中的视图：

![在此处输入图像描述](../Images/27fb0a5a66ca817493500abeed34bf43.png)

请注意，您必须在更改脚本后重新启动 Xcode。如果在 Xcode 调试器控制台中导入脚本，似乎也不会显示 init 方法中“打印”语句的输出。

# c# - 如果控制器操作不存在 mvc4，则自定义路由

> ID：14159076
> 
> 赞同：4
> 
> 时间：2013-01-04T14:33:55.550
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我想要发生的是，如果用户导航到类似`Controller Action`页面`Home/Index`并且操作存在，然后继续正常进行。但是，如果用户导航到`Controller Action`不存在的，`Home/NotExist`那么我想将其默认为名为`MyController`.

我试图在接受的标准默认路由之前添加一个路由`*url*`

```
routes.MapRoute(
                    "CustomRoute",
                    "{*url}",
                    new { controller = "MyController", action = "MySingleAction" }
     );
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

但是`Home/Index`要去 CustomRoute 而不是 Default

**注意**我试过把路线放在后面，但它会抛出一个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:38:03.890

您应该让您的自定义路由成为最后定义的路由。在这种情况下：

```
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

routes.MapRoute(
                    "CustomRoute",
                    "{*url}",
                    new { controller = "MyController", action = "MySingleAction" }
     ); 
```

# ios - 苹果证书已过期且正在使用

> ID：14159080
> 
> 赞同：3
> 
> 时间：2013-01-04T14:34:18.437
> 
> 标签：ios, ipad, provisioning-profile

我有一个使用 Apple Enterprise 帐户分发的 iPad 应用程序。证书已过期，但应用程序仍可在 iPad 上运行。我认为一旦证书过期，用户将无法打开应用程序。有谁知道应用程序何时无法使用？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:44:21.850

听起来像“3 到 7 天”，缓存必须过期并且设备需要重新启动。

来自苹果：

> 证书验证
> 
> 首次在设备上打开应用程序时，分发证书会通过联系 Apple 的 OCSP 服务器进行验证。除非证书已被吊销，否则应用程序可以运行。无法联系者从 OCSP 服务器获得响应不会被解释为撤销。要验证状态，设备必须能够访问 ocsp.apple.com。请参阅“网络配置要求”（第 9 页）。
> 
> OCSP 响应在 OCSP 服务器指定的时间段内缓存在设备上，目前为 3 到 7 天。在设备重新启动并且缓存的响应过期之前，不会再次检查证书的有效性。如果当时收到撤销，应用程序将被阻止运行。撤销分发证书将使您分发的所有应用程序无效。
> 
> 如果分发证书已过期，应用程序将无法运行。目前，分销证书有效期为一年。在您的证书到期前几周，从 iOS DevCenter 请求一个新的分发证书，使用它来创建新的分发配置文件，然后重新编译并将更新的应用程序分发给您的用户。请参阅“提供更新的应用程序”（第 10 页）

# opengl-es - 将 UIView 映射到 iPhone 5 的视网膜显示屏上

> ID：14159085
> 
> 赞同：2
> 
> 时间：2013-01-04T14:34:51.587
> 
> 标签：opengl-es, retina-display, iphone-5

我有一个 UIView，我想将它映射到我的形状的脸上。所有这些都行得通，但我希望它可以在 iPhone 5 上使用视网膜图形。我将我的 openGL 层的 contentScale 属性设置为 2.0，但结果还是有点模糊。所以尺寸是正确的，就好像我在视网膜显示器上使用非视网膜图形来制作图像一样。所以我要做的“唯一”事情就是告诉 iPhone 这必须是像素的两倍。我尝试了 DarthMike 建议的解决方案，不幸的是无济于事。

**在这里我初始化并将其添加到我的视图中：**

```
 MyOpenGLView *view = [[MyOpenGLView alloc] initWithFrame:CGRectMake(0, dY, 230,230) context:context];
    view.contentScaleFactor = 2.0;
    view.layer.contentsScale = 2.0;
    view.delegate = view;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat16;
    [view setupGL];
    [self.view addSubview:view]; 
```

**在这里，我将视图渲染到上下文中并将其添加为纹理**

```
 MyViewToBeTheTexture *textureView = [[MyViewToBeTheTexture alloc]initWithFrame:CGRectMake(0, 0, 230, 230)];

    self.effect.texture2d0.enabled = true;

    // make space for an RGBA image of the view
    GLubyte *pixelBuffer = (GLubyte *)malloc(
                                             4 *
                                             textureView.bounds.size.width *
                                             textureView.bounds.size.height);

    // create a suitable CoreGraphics context
    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context =
    CGBitmapContextCreate(pixelBuffer,
                          textureView.bounds.size.width, textureView.bounds.size.height,
                          8, 4*textureView.bounds.size.width,
                          colourSpace,
                          kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colourSpace);

    // draw the view to the buffer
    [textureView.layer renderInContext:context];

    // upload to OpenGL
    glTexImage2D(GL_TEXTURE_2D, 0,
                 GL_RGBA,
                 textureView.bounds.size.width, textureView.bounds.size.height, 0,
                 GL_RGBA, GL_UNSIGNED_BYTE, pixelBuffer);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glGenBuffers(1, &texArray);
    glBindBuffer(GL_ARRAY_BUFFER, texArray);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0,0);
    glBufferData(GL_ARRAY_BUFFER, sizeof(TexCoords), TexCoords, GL_STATIC_DRAW); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:28:06.583

我的猜测是你需要更新你的纹理以获得双倍分辨率。

在使用视网膜分辨率时，您应该完全加载不同的纹理，因为屏幕对于相同的坐标具有双倍分辨率。这就是为什么您会看到模糊的纹理（缩放 2 倍）。您必须通过阅读 [UIScreen mainScreen].scale 为视网膜创建具有两倍 x 和 y 大小的缓冲区。我给你一个暂定代码，可能因为我无法测试而无法工作：

```
MyView *view = [[MyView alloc]initWithFrame:CGRectMake(0, 0, 320, 80)];

self.effect.texture2d0.enabled = true;

//Pixel to coord scale
GLFloat coordToPixScale = [UIScreen mainScreen].scale;

// make space for an RGBA image of the view
GLubyte *pixelBuffer = (GLubyte *)malloc(
                                         4 *
                                         view.bounds.size.width * coordToPixScale *
                                         view.bounds.size.height * coordToPixScale);

// create a suitable CoreGraphics context
CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context =
CGBitmapContextCreate(pixelBuffer,
                      view.bounds.size.width*coordToPixScale, view.bounds.size.height*coordToPixScale,
                      8, 4*view.bounds.size.width *coordToPixScale,
                      colourSpace,
                      kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colourSpace);

// draw the view to the buffer
[view.layer renderInContext:context];

// upload to OpenGL
glTexImage2D(GL_TEXTURE_2D, 0,
             GL_RGBA,
             view.bounds.size.width * coordToPixScale, view.bounds.size.height * coordToPixScale, 0,
             GL_RGBA, GL_UNSIGNED_BYTE, pixelBuffer);

BOOL repeatX = NO;
BOOL repeatY = NO;

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, repeatX ? GL_REPEAT
                       : GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, repeatY ? GL_REPEAT
                       : GL_CLAMP_TO_EDGE);

glGenBuffers(1, &texArray);
glBindBuffer(GL_ARRAY_BUFFER, texArray);
glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0,0);
glBufferData(GL_ARRAY_BUFFER, sizeof(TexCoords), TexCoords, GL_STATIC_DRAW); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:50:40.583

找到解决方案！

> 请看一下这个问题：
> 
> [用于视网膜显示的 OpenGL ES 2.0 纹理？](https://stackoverflow.com/questions/17383521/opengl-es-2-0-textures-for-retina-display/17390595#17390595)

# java - 如何从 Java 中的 XML 字符串中获取所有元素的值？

> ID：14159086
> 
> 赞同：15
> 
> 时间：2013-01-04T14:35:07.300
> 
> 标签：java, xml, xml-parsing

我有一个 XML 格式的字符串。我想阅读它并获取元素的值。

我已经尝试过 Java [JAXBContext unmarshell](http://rocksolutions.wordpress.com/2010/08/10/jaxb-unmarshalling-strings-xmls/)，但这需要创建我不需要的类。

细绳：

```
<customer>
    <age>35</age>
    <name>aaa</name>
</customer> 
```

我想获取**age**和**name**的值。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-04T14:43:08.670

这是你的xml：

```
String xml = "<customer><age>35</age><name>aaa</name></customer>"; 
```

这是解析器：

```
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
InputSource src = new InputSource();
src.setCharacterStream(new StringReader(xml));

Document doc = builder.parse(src);
String age = doc.getElementsByTagName("age").item(0).getTextContent();
String name = doc.getElementsByTagName("name").item(0).getTextContent(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-04T14:43:01.557

[JSoup](http://www.jsoup.org)对 XML 有很好的支持

```
import org.jsoup.*     
import org.jsoup.nodes.*   
import  org.jsoup.parser.*

//str is the xml string 
String str = "<customer><age>35</age><name>aaa</name></customer>"
Document doc = Jsoup.parse(str, "", Parser.xmlParser());
System.out.println(doc.select("age").text()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-04T14:47:33.957

在标准 API 中使用[XPath ：](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)

```
String xml = "<customer>" + "<age>35</age>" + "<name>aaa</name>"
    + "</customer>";
InputSource source = new InputSource(new StringReader(xml));
XPath xpath = XPathFactory.newInstance()
                          .newXPath();
Object customer = xpath.evaluate("/customer", source, XPathConstants.NODE);
String age = xpath.evaluate("age", customer);
String name = xpath.evaluate("name", customer);
System.out.println(age + " " + name); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T14:40:06.210

[JDOM](http://www.jdom.org/)非常容易使用：

```
SAXBuilder builder = new SAXBuilder();
File xmlFile = new File("c:\\file.xml");
Document document = (Document) builder.build(xmlFile);
Element rootNode = document.getRootElement();
List list = rootNode.getChildren("customer");

for (int i = 0; i < list.size(); i++) {

    Element node = (Element) list.get(i);

    System.out.println("Age : " + node.getChildText("age"));
    System.out.println("Name : " + node.getChildText("name"));         
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-20T17:49:32.537

就像我一样，对于拥有更多复杂 XML 的用户来说，这是一个花絮。如果您有同名但属性不同的元素，例如：

```
<field tag="8"> Country </field>
<field tag="12"> State </field> 
```

提取它们的方法是遵循@vault 的[答案](https://stackoverflow.com/a/14159232/1292323)，但请确保更改`.item(int)`函数中的值。

如果你想要你使用的第一个字段`.item(0)`。如果你想要第二个你使用`.item(1)`

希望这对未来的用户有所帮助，就像对我一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-21T12:40:16.963

我用这个通用方法遍历所有元素：

```
public static void getElementValues(Node node) {
    NodeList nodeList = node.getChildNodes();
    for (int i = 0, len = nodeList.getLength(); i < len; i++) {
        Node currentNode = nodeList.item(i);
        if (len == 1 && currentNode.getNodeType() == Node.TEXT_NODE) {
            System.out.println(node.getLocalName() + "=" + currentNode.getTextContent());
        }
        else if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
            getElementValues(currentNode);
        }
    }
} 
```

结果：

```
age = 35
name = aaa 
```

# java - Java 应用程序集群中的文件系统同步/复制

> ID：14159087
> 
> 赞同：4
> 
> 时间：2013-01-04T14:35:11.650
> 
> 标签：java, filesystems, cluster-computing

我有以下设置：

*   1+ 个客户端服务（自定义 Web）应用程序的集群实例
*   1 个服务于 Web 应用程序的系统实例，它部署了上述应用程序使用的大型 (100 MB) 文件，但并不经常发生（每周几次）。它对文件系统中应该包含哪些文件拥有最终决定权。

客户端实例只需要共享（具有最新的）其他应用程序部署的文件。他们没有会话管理或其他共享资源。什么是最好的，即。可管理且故障安全的部署文件的方式，以便每个实例都可以访问它们。

我目前的建议是让系统应用程序将文件部署到每个集群实例（尚未决定 ftp、nfs、http 或其他协议）。集群实例还可以定期与部署应用程序同步以检查修改的资源。这个配置有所有类型的耦合，我想至少以一种方式解耦，所以集群实例可能不知道它的文件系统每隔一段时间就会被覆盖。

如果您有图书馆解决方案，我会听您的，但我更愿意寻找配置解决方案，服务器如何交互。

# sql-server - AWS 上单个 m1.large 实例的 Sql Server 企业版许可费用是多少？

> ID：14159088
> 
> 赞同：12
> 
> 时间：2013-01-04T14:35:12.213
> 
> 标签：sql-server, amazon-web-services, sql-server-2012

Sql Server 定价和 Amazon Web Services 核心规范的结合让我很困惑。Sql Server 目前按内核授权，我发现 2 个内核包的价格约为 13,000 美元。AWS 上的单个大型实例提供 4 个弹性计算单元，这取决于您阅读的文档，相当于 2 个虚拟核心（2x ECU = 1x 核心）、4 个虚拟核心（1x ECU = 1x 核心）或 8 个虚拟核心（1x ECU = 2x 核心）。通过在我现有的 Sql Server 框上打开性能监视器，第一个选项（2 个虚拟核心）似乎是正确的，但是，我已经阅读了文档，让我相信最后一个选项（8 个虚拟核心）也是可能的并且可能是Microsoft 计算其许可政策的方式。

微软的 Stack Overflow 上有没有人可以回答这个问题？或者，是否有人已经拥有此设置，可以披露企业版许可如何应用于他们的 AWS 服务器，并且不披露他们实际支付的费用，帮助我计算以我报价的价格购买单个服务器的费用以上？上面列出的三个选项让我相信我们将支付 13,000 美元到 60,000 美元之间的费用，两者之间的差异对决定我们是否应该切换到 MySQL 产生了巨大的影响。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T23:54:29.387

**与Amazon** BYOL RDS的交叉引用**[http://aws.amazon.com/rds/sqlserver/#pricing](http://aws.amazon.com/rds/sqlserver/#pricing)**

[**SQL Server 2017** **Enterprise 每核心（2 核心捆绑）14,256 美元**----- **标准每核心（2 核心捆绑）3,717 美元**](https://www.microsoft.com/en-us/sql-server/sql-server-2017-pricing)

**SQL Server 2016 和 2017 Standard 具有 90% 的[企业功能](https://www.microsoft.com/en-us/sql-server/sql-server-editions)** 价格没有上涨，它们以两个核心包出售，价格没有上涨。

**下面的进一步辅助阅读**

[AWS 简单定价计算器](https://calculator.s3.amazonaws.com/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T17:32:20.570

CAL = 客户端访问许可证。他们支付较低的固定成本，但您为访问 SQL 服务器的每个用户付费（如果您使用服务帐户进行访问，您仍然需要为使用服务帐户或消费数据的每个用户付费）。

替代且更常见的是，您按处理器付费。对于您的服务器，如果它是 1 个 16 核的处理器，您需要支付大约 6k 的标准费用。如果是2个处理器，每个8核，12k。

但是，“16 核”可能更可能是 4 x 四核……也就是 4 个处理器 => 24k

# scala - 将路径 -> 值的映射转换为树状映射

> ID：14159093
> 
> 赞同：0
> 
> 时间：2013-01-04T14:35:43.597
> 
> 标签：scala, functional-programming

有一行嵌套路径作为键，例如：

```
Map(
  "manufacturer" -> "Magnavox",
  "processor.address-space" -> 8,
  "gpu.processor.address-space" -> 8,
  "processor.speed" -> 150
) 
```

如何成为一个惯用的 Scala，用于根据路径对值进行分组，将其变成：

```
Map(
  "gpu" -> Map(
             "processor" -> Map("address-space" -> 8)
           ),
  "processor" -> Map(
                   "speed" -> 150,
                   "address-space" -> 8
                 ),
  "manufacturer" -> "Magnavox"
) 
```

注意：所有键都是*叶子*路径，因此`gpu -> "something"`在这种情况下不允许输入 no。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:52:02.517

```
def group( m: Map[String, Any] ): Map[String, Any] = {
  def groupImpl( dic: Map[Array[String], Any] ): Map[String, Any] = {
    dic.groupBy(_._1.head).mapValues{ dic: Map[Array[String], Any] =>
      require( !dic.isEmpty)
      if ( dic.size == 1 && dic.head._1.size == 1) {
        dic.head._2
      }
      else {
        groupImpl(
          dic.map{ case (k,v) => 
            require(!k.tail.isEmpty)
            k.tail -> v
          }
        )
      }
    }
  }
  groupImpl( m.map{ case (k,v) => k.split("\\.") -> v} )
} 
```

一些测试：

```
scala>
group(
  Map(
    "manufacturer" -> "Magnavox",
    "processor.address-space" -> 8,
    "gpu.processor.address-space" -> 8,
    "processor.speed" -> 150,
    "gpu.processor.foo" -> "bar"
  )
)

res2: Map[String,Any] = Map(manufacturer -> Magnavox, processor -> Map(speed -> 150, address-space -> 8), gpu -> Map(processor -> Map(foo -> bar, address-space -> 8))) 
```

# json - WCF 客户端如何从 JSON 响应中反序列化不兼容的日期格式？

> ID：14159097
> 
> 赞同：7
> 
> 时间：2013-01-04T14:35:49.123
> 
> 标签：json, datetime, deserialization, wcf-client, datacontract

我已经在网上搜索了这方面的信息，但大多数结果都是关于创建 WCF 服务或服务在你控制之下的情况。

我正在为我无法控制的 RESTful JSON 服务构建 WCF 客户端代理。我正在使用基本的 ServiceContract/DataContract 模式，并试图让框架完成尽可能多的工作。

大多数情况下，这工作正常，但来自此外部服务的所有日期时间字段都采用特定格式，例如

```
{"SomeObject": 
    {"details":"blue and round", "lastmodified":"2013/01/02 23:14:55 +0000"}
} 
```

所以我得到一个错误：

> 反序列化 MyNamespace.SomeObject 类型的对象时出错。DateTime 内容 '2013/01/02 23:14:55 +0000' 不以 JSON 所需的 '/Date(' 开头并以 ')/' 结尾。'。

我的数据合同是：

```
namespace Marshmallow.WebServices.ServiceModels
{
    [DataContract]
    public class SomeObject
    {
        [DataMember(Name = "details")]
        public string Details { get; set; }

        [DataMember(Name = "lastmodified")]
        public DateTime LastModified { get; set; }
    }
} 
```

我的服务合同是：

```
[ServiceContract]
public interface ICoolExternalApi
{
    [OperationContract]
    [WebGet(UriTemplate = "/something.json",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped)]
    [return: MessageParameter(Name = "SomeObject")]
    SomeObject GetAccount();
} 
```

*我想知道的是，我在哪里可以粘贴一些代码来定义 WCF 应该如何反序列化 lastmodified 字段（从字符串中创建一个 DateTime 对象）？*

或者更好的是，定义如何为我的所有 DataContracts 反序列化所有 DateTime DataMembers。我不想要很多重复的代码。

如果可以避免的话，我也不想求助于某些第三方反序列化器，也不想开始通过自定义反序列化方法来放置其他所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T02:34:04.753

我能想到两件事：

1.  将 LastModified 更改为字符串，然后自己将其转换为 Datetime 对象。不过，这意味着为您的对象上的相同数据公开两个属性。
2.  编写 IDispatchMessageInspector 以在反序列化发生之前拦截消息并使用正则表达式处理原始消息。它将为您服务中的所有日期提供一站式解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T09:37:23.533

到目前为止，这是我想出的最好的：

我有一个内部字符串扩展方法：

```
internal static class DeserializationHelper
{
    internal static DateTime GetDeserializedDateTime(this string @string)
    {
        if (string.IsNullOrEmpty(@string)) return default(DateTime);
        //insert complex custom deserialization logic here
        return DateTime.Parse(@string);
    }

} 
```

这是 DataMember 设置：

```
[DataMember(Name = "lastmodified")]
internal string _LastModified 
{
    set { LastModified = value.GetDeserializedDateTime(); }
    //getter is not needed for receiving data but WCF requires one
    get { return default(string); }
}

public DateTime LastModified { get; private set; } 
```

如果您想使用此 DataContract 发送数据（使其成为可写属性），则必须编写 DateTime 扩展方法（GetSerializedDateString），扩展 setter/getter 并引入私有成员作为中间人。

它闻起来像剪切和粘贴，并且没有利用任何 WCF 框架功能。比尔盖茨会怎么做？

# mysql - 给定包括假期在内的天数（Excel的WORKDAY）计算下一个工作日的MySQL函数

> ID：14159098
> 
> 赞同：1
> 
> 时间：2013-01-04T14:35:54.380
> 
> 标签：mysql, excel

Excel 具有 WORKDAY() 函数，可以计算给定天数（包括假期）的下一个工作日。

我一直在尝试在 MySQL 中做一个等效的高效函数，但处理异常太多了，我一直坚持这一点。有没有人为此找到有效的解决方案？

## Excel WORKDAY 函数

```
WORKDAY(start_date, day_count [,holiday_list]) 
```

`start_date + INTERVAL day_count DAY`除了它只包括工作日之外，它的工作原理是一样的。工作日定义为非周末非节假日。这里的周末是萨和苏。

```
WORKDAY.INTL(start_date,  day_count [,weekend [,holiday_list]]) 
```

`weekend`除了识别一周中的哪几天构成周末的代码外，其他都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:24:23.503

做一个包含年份的假期表，并用特定的日期/日期标记该年最有可能的假期，然后在您的 MySQL 函数中引用该年度假期表。

由于日历最终会重复，因此您应该能够根据每年的重复编写一些内容来填充假期表。

# php - 外部类未在 Laravel 中加载

> ID：14159103
> 
> 赞同：0
> 
> 时间：2013-01-04T14:36:04.177
> 
> 标签：php, laravel, autoloader

刚开始使用 Laravel，在学习曲线和缺乏详细文档方面有些挣扎。我正在尝试`class.upload.php`通过 verot.net 使用，但似乎无法加载该类。

我将类目录上传到`application/libraries/class.upload_0.31`实际类的文件名是`class.upload.php`. 然后我更新了`Autoloader::map`这样的 -

```
Autoloader::map(array(
    'Base_Controller' => path('app').'controllers/base.php',
    'Upload' => path('app').'libraries/class.upload_0.31/class.upload.php',
)); 
```

然后，我尝试`$handle = new upload(..);`按照 Class Upload 的文档调用该类。

我相信我正确地按照文档将一个类映射到它的位置，但我一直遇到错误`Class 'upload' not found`。class.upload.php 中的类名是`upload`.

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:49:22.593

类名是`upload`，小写`u`。数组键必须与类名完全匹配：

```
Autoloader::map(array(
    'Base_Controller' => path('app').'controllers/base.php',
    'upload' => path('app').'libraries/class.upload_0.31/class.upload.php'
  // ^ this should be lowercase
)); 
```

# java - 使用 OpenCSV 将 SQL 表转储到 CSV

> ID：14159107
> 
> 赞同：-2
> 
> 时间：2013-01-04T14:36:17.267
> 
> 标签：java, mysql, opencsv

我正在尝试使用 Netbeans 和 OpenCSV 将 ResultSet 中的数据写入 csv 文件。我添加了 OpenCSV 库：

```
import au.com.bytecode.opencsv.*;

...

 try {   CSVWriter writer = new CSVWriter(new FileWriter("C:\\test2.csv"), ',');
                        writer.writeAll(rs,includeHeaders);

                     }

                     catch (Exception e){}
                } 
```

但是我得到了错误：

```
cannot find symbol
  symbol:   variable includeHeaders
  location: class DBConnect 
```

我错过了其他一些进口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:42:31.057

[`CSVWriter.writeAll(rs,includeHeaders)`](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVWriter.html#writeAll%28java.sql.ResultSet,%20boolean%29)需要一个**ResultSet**和一个**布尔值**作为参数。你需要声明includeHeaders。

或简单地传递布尔值，如

```
 writer.writeAll(rs,true);
     writer.writeAll(rs,false); 
```

# properties - WSO2 CONTENT_TYPE="text/plain" 没用？

> ID：14159108
> 
> 赞同：1
> 
> 时间：2013-01-04T14:36:18.717
> 
> 标签：properties, wso2, esb

在文档中，属性 CONTENT_TYPE 是：

```
In situations where the ESB is receiving HTTP response messages without the Content-type header, this property can be used to specify a default content type to be used. If no such content type is specified for responses the ESB will default to 'application/octet-stream'. 
```

我有一个没有 Content-type 的 HTTP 测试服务响应消息，所以我在 ESB 配置中设置了属性 CONTENT_TYPE="text/plain"。回应是：

```
<axis2ns3:binary xmlns:axis2ns3="http://ws.apache.org/commons/ns/payload">UmV0dXJuQ29kZT0wMDAwMDANCg==</axis2ns3:binary> 
```

如果我添加`resp.setContentType("text/plain")`我的 HTTP 测试服务，响应是：

```
<text xmlns="http://ws.apache.org/commons/ns/payload">ReturnCode=000000</text> 
```

似乎上面的属性 CONTENT_TYPE 设置没有用，仍然默认为 'application/octet-stream'。

我有一个没有 Content-type 标头的 HTTP 服务，然后响应消息是二进制的。如何设置响应 CONTENT_TYPE="text/plain"？任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T09:23:39.453

将以下行添加到axis2.xml ($ESB_HOME/repository/conf/axis2/axis2.xml) 中的messageFormatters

```
<messageFormatter contentType="text/plain" class="org.apache.axis2.format.PlainTextFormatter"/> 
```

然后您可以使用属性调解器更改内容类型，如下所示：

```
<property name="messageType" value="text/plain" scope="axis2"/> 
```

# codeigniter-2 - 单击按钮提交时表单不运行

> ID：14159114
> 
> 赞同：0
> 
> 时间：2013-01-04T14:36:37.787
> 
> 标签：codeigniter-2, codeigniter-form-helper

我正在尝试在 CodeIgniter 2.1 中创建一个表单，但是在创建它之后我按下提交按钮并且我没有获得任何类型的数据。

这是代码：

**看法：**

```
<div id="logform"
    <?php 

        echo validation_errors();
        echo form_open('blog/validacion_registro');
        ?>     
    Direcci&oacute;n de correo <input type="text" id="ecorreo" name="correo" maxlength="30" /><br /><br />
            Usuario <input type="text" id="nusuario" name="usuario" maxlength="20" /><br /><br />
            Contrase&ntilde;a <input type="password" id="contrasena" name="contrasenya" maxlength="50" /><br /><br />
            Repetir contrase&ntilde;a <input type="password" id="rcontrasena" name="repcontrasenya" maxlength="50" /><br /><br />
            <input type="submit" id="entra" name="entrar" value="Entrar" />
</div> 
```

**控制器：**

```
class Blog extends CI_Controller 
{
public function index()
{
    $this->load->view('anuncios/test');

}

    public function validacion_registro() //para validar los datos de registro de usuario
{
    //$this->load->library('form_validation');
    echo "Dentro de validacion_registro";
    $this->input->post('correo');
    $this->input->post('usuario');
    $this->input->post('contrasenya');

    $this->form_validation->set_rules('correo','Direcci&oacute;n de correo','required');
    $this->form_validation->set_rules('usuario','Nombre de usuario','required');
    $this->form_validation->set_rules('contrasenya','Contrase&ntilde;a','required|md5');
    $this->form_validation->set_rules('repcontrasenya','Confirmaci&oacute;n de contrase&ntilde;a','required|md5');

    if ($this->form_validation->run()===true)
     {
        redirect('anuncios/test');
        echo ("validaci&oacute;n v&aacute;lida");
     }
    else {
            $this->load->view('anuncios/test');
            echo ("validaci&oacute;n no v&aacute;lida");
         }  
}
?> 
```

视图位于应用程序/视图文件夹中，控制器位于应用程序/控制器中。为什么我不能显示任何数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:07:49.630

也许您需要在提交按钮后关闭表单：

```
<input type="submit" id="entra" name="entrar" value="Entrar" />
echo form_close(); 
```

# jquery - 使用 jquery 将 CSV 文件读入字符串

> ID：14159116
> 
> 赞同：1
> 
> 时间：2013-01-04T14:36:48.160
> 
> 标签：jquery, csv

我需要从本地文件系统中选择一个 csv 文件，并使用 jquery 将该文件的内容显示为文本。

我正在使用它进行文件上传

```
<input id = "uploadCSV" type = "file" /> 
```

在其变更事件中，

```
 $('#uploadCSV').change(function(e) {
 if(e.target.files != undefined) {
           var reader = new FileReader(); 
           reader.onload = function(e) {
           var lineSplit = e.target.result.split("\n");
           var commaSplit = lineSplit[0].split(",");
           var content = "";
           for(var i = 0; i < commaSplit.length; i++) {
                 var temp = commaSplit[i];
                 content = content + " " + temp;
           }
         };
         reader.readAsText(e.target.files.item(0));
         var fileContent = reader.result;
         alert(fileContent);
      }
 }); 
```

不知何故，这不起作用，当我使用 Firefox 时，我会收到 null 警报。如果我使用 IE8，它会因为找不到 e.target.result 而崩溃。请指教

我正在寻找将本地文件系统中的 csv 文件转换为纯文本的最简单方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:09:07.573

您正在使用 onload 事件处理程序向 reader.result 发出警报，您需要将警报移动到事件处理程序中才能使其正常工作。

您刚才所做的将在文件加载之前提醒 reader.result，此时结果将为空。

为避免不支持 FileReader 出现任何错误，请`if (window.FileReader)` 在使用前进行检查。

将其更改为：

```
if ((window.FileReader) && (e.target.files != undefined)) {
  var reader = new FileReader(); 
  reader.onload = function(e) {
    var lineSplit = e.target.result.split("\n");
    var commaSplit = lineSplit[0].split(",");
    var content = "";
    for(var i = 0; i < commaSplit.length; i++) {
      var temp = commaSplit[i];
      content = content + " " + temp;
    }
    var fileContent = reader.result;
    alert(fileContent);
  };

  reader.readAsText(e.target.files.item(0));    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:04:59.553

IE<10 不支持 FileReader（https://developer.mozilla.org/en-US/docs/DOM/FileReader - 请参阅底部的“浏览器支持”）。如果您的解决方案以 IE8 为目标，则无法在 Javascript 中执行您尝试执行的操作。您要么必须使用 Flash 等嵌入式应用程序，要么将文件发布到服务器并返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:42:57.810

我可以通过使用 asp.net mvc 来解决这个问题。详情见下文

```
@using(Html.BeginForm("ProcessCsv","<YourControllerName>",FormMethod.Post, new {enctype = multipart/form-data" }))
{
     <input id = "myUpload" type = "file" name = "fileBaseParam"/>
     <input id = "btnSubmit" type = "submit" name = "ProcessCsv" value = "Submit" />
} 
```

在您的控制器中，定义一个动作结果，

```
[HttpPost]
public ActionResult ProcessCsv(HttpPostedFileBase fileBaseParam)
{
       var csvReader = new StreamReader(fileBaseParam.InputStream);
       string fileContent = csvReader.ReadToEnd();
} 
```

HttpPostedFileBase 是这里的关键概念。您可以从 [http://www.codeproject.com/Articles/442515/Uploading-and-returning-files-in-ASP-NET-MVC](http://www.codeproject.com/Articles/442515/Uploading-and-returning-files-in-ASP-NET-MVC)找到更多信息。

希望这些信息将来对某人有所帮助。

谢谢

# iphone - UIActivityViewController 共享 UIActivity 未显示

> ID：14159119
> 
> 赞同：0
> 
> 时间：2013-01-04T14:37:02.187
> 
> 标签：iphone, uiactivityviewcontroller, uiactivity

我`UIActivityViewController`用于相机胶卷图像共享：

```
UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityController animated:YES completion:nil]; 
```

如果我不设置 Facebook 和 Twitter 设置，我无法从`UIActivityViewController`.

有人说用户应该先配置 Facebook 和 Twitter 设置，但我可以`UIActivityViewController`在配置 FB、Twitter 设置之前从苹果相机应用程序图像共享中找到这些活动。而且我无论如何都看不到消息活动。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:43:22.230

试试`UIActionSheet`吧。

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Share your photo" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Email",@"Facebook",@"Twitter",@"Instagram",@"Save to Photo Library",nil];
 [actionSheet showInView:self.view];

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex == 0){
      //for Email in code above
    }
} 
```

# xml - 使用 nodejs async 处理大型 xml 文件（有关系）

> ID：14159123
> 
> 赞同：0
> 
> 时间：2013-01-04T14:37:09.460
> 
> 标签：xml, node.js, node-async

我必须处理一个大型 XML 文件（大小约为 25 mb），并将数据组织成文档以导入 MongoDB。

问题是，xml 文档中大约有 5-6 种类型的元素，每一种都有大约 10k 行。

在获取了一个 a 类型的 xml 节点之后，我必须获取它对应的 b、c、d 等类型的元素。

我在节点中尝试做的事情：

1.  获取类型 a 的所有行。
2.  对于每一行，使用 xpath，找到其对应的相关行，并创建文档。
3.  在 mongodb 中插入文档

如果有 10k 行类型 a，则第 2 步运行 10k 次。我试图让它并行运行，这样事情就不会永远持续下去。因此， async.forEach 似乎是完美的解决方案。

`async.forEach(rowsA,fetchA);`

我的 fetchrelations 函数有点像这样

```
var fetchA = function(rowA) {
//covert the xml row into an object 
    var obj = {};
    for(i in rowA.attributes) {
    attribute = rowA.attributes[i];
    if(attribute.value === undefined) 
        continue;
    obj[attribute.name] = attribute.value;
    }
    console.log(obj.someattribute);
    //first other related rows, 
    //callback inserts the modified object with the subdocuments
    findRelations(obj,function(obj){
        insertA(obj,postInsert);
    });
}; 
```

在我尝试运行它之后，代码中的 console.log 大约每 1.5 秒运行一次，而不是像我预期的那样对每一行并行运行。在过去的两个小时里，我一直在挠头并试图弄清楚这一点，但我不确定我做错了什么。

我不是很擅长node，所以请耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:13:42.850

在我看来，您没有声明和调用异步将传递给您的迭代器函数 ( `fetchA`) 的回调函数。有关示例，请参阅[forEach 文档。](https://github.com/caolan/async#forEach)

您的代码可能需要看起来更像...

```
var fetchA = function(rowA, cb) {
//covert the xml row into an object 
    var obj = {};
    for(i in rowA.attributes) {
    attribute = rowA.attributes[i];
    if(attribute.value === undefined) 
        cb();
    obj[attribute.name] = attribute.value;
    }
    console.log(obj.someattribute);
    //first other related rows, 
    //callback inserts the modified object with the subdocuments
    findRelations(obj,function(obj){
        insertA(obj,postInsert);
        cb();  // You may even need to call this within insertA or portInsert if those are asynchronous functions.
    });
}; 
```

# visual-studio-2010 - 是否有一个 Visual Studio 插件可以跨多台机器同步打开的选项卡？

> ID：14159124
> 
> 赞同：3
> 
> 时间：2013-01-04T14:37:11.817
> 
> 标签：visual-studio-2010, ide, tabs, sync

我经常在工作中使用 Visual Studio 开发解决方案，将我的更改提交到版本控制，然后在家中提取更改以使用我的家用计算机和 Visual Studio。如果有一种方法可以恢复我签入的会话（可能是一些可以受版本控制的会话文件）以自动打开我在我签入时打开的家用计算机上的所有相同选项卡，那就太好了工作（反之亦然）。我认为当前会话存储在 .suo 文件中，我读过该文件对版本控制是不好的做法，因为它特定于单个机器环境，所以我不确定这是要走的路，或者它是否会好好工作。

当我打开一个解决方案时，我发现自己不得不关闭很多选项卡，然后不得不在脑海中回忆我上次工作的内容并重新打开这些选项卡，所以这样的事情可以让我避免这种情况并且开始工作。

最好，这适用于任何选项卡，而不仅仅是项目文件。例如，ReSharper 测试运行器选项卡、NCrunch 选项卡、对象浏览器选项卡等。

任何人都知道这样的事情或有一个简单的解决方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:14:40.467

您应该将源代码放在基于云的同步工具下。

例如，我将我的项目放在我的 skydrive 文件夹中（通过官方 skydrive 工具同步）。这将自动同步所有文件，包括 .suo 文件和临时文件。

这与源代码控制并不相互排斥。存储库（在我的例子中是 git）也将在计算机之间同步。然后，只有合法文件会受到源代码控制（.suo 仅在*您的*计算机之间同步，但不会进入*共享*源存储库）

# html - 复选框在 Firefox 中呈现正常，但在 Chrome 中不呈现

> ID：14159128
> 
> 赞同：1
> 
> 时间：2013-01-04T14:37:22.300
> 
> 标签：html, google-chrome, firefox, checkbox, chromium

谁能告诉我为什么在[这个例子](http://jsbin.com/urodit/73/edit)中，复选框和旁边的文本在 Chrome 中的呈现方式与在 Firefox 中的呈现方式不同（期望的结果）？

```
Firefox 16.0.2
Chromium 18.0.1025.168 (Developer Build 134367) (WebKit 535.19) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:16:41.173

1.  放在`<br>`与第一个复选框输入元素相同的行的末尾，而不是下一行。这将水平对齐复选框。另请参阅：[文本对齐：Chrome 中的右有边距或缓冲区](https://stackoverflow.com/questions/11570447/text-align-right-has-margin-or-buffer-in-chrome)
2.  将该表单中两个输入元素的宽度调整为`1em`. Chrome 似乎会自动将这些宽度扩展到容器中的可用空间，而 Firefox 则不会。

虽然这还不是一个完整的修复，但垂直定位仍然存在差异。

[演示](http://jsbin.com/urodit/83/edit)。

# database - Codeigniter 多数据库连接

> ID：14159130
> 
> 赞同：0
> 
> 时间：2013-01-04T14:37:22.830
> 
> 标签：database, codeigniter, join

我正在使用 codeigniter 框架。我对这个框架没有太多经验。我需要你们的帮助。我想加入两个不同数据库中的两个表。在这两个表中，我都有一个共同的列。我了解，首先我必须在文件 database.php 中创建一个单独的数据库组。我已经创建了该组，并且能够在我的模型中单独使用该组。我还在我的模型“默认组”中加载了另一个组。每当我尝试单独使用每个组时，它都可以正常工作。但我正在努力如何使用这两个数据库组加入两个数据库。

现在我想使用这两个单独的组连接两个不同数据库的表。但我不确定我到底在哪里犯了错误。

这是我的模型文件。

```
class Bar_graph extends CI_Model {

                public function __construct () {
                     parent::__construct();
                     $this->db=   $this->load->database('default', TRUE);//This is the default group
                     $this->db2 = $this->load->database('db2', TRUE); //This is the new group I have created
                 }
 //kalix2 and Asterik are my two different database               
               public function join_two_database ()
                {    
                      $cust_id=2;
                      $this->db->select('Kalix2.ph_Companies.CompanyName');
                      $this->db2->select_sum('Asterik.cdr.call_length_billable');
                      $this->db2->select('Asterik.cdr.calldate');
                      $this->db->where('Kalix2.ph_Companies.Cust_ID',$cust_id);
                      $this->db->from('Kalix2.ph_Companies');
                      $this->db2->group_by('Asterik.cdr.CompanyName');
                      $this->db->limit(5);
                      $this->db->join('Asterik.cdr','Kalix2.ph_Companies.CompanyName = Asterik.cdr.CompanyName','inner');
                      $query = $this->db->get();
                     if ($query->num_rows > 0) {
                     return $query-> result(); 
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:54:09.710

AFAIK，你不能在一个声明中加入这些。您一次只有一个与数据库的连接。您必须在一个数据库上运行查询，在第二个数据库上运行查询，然后在 PHP 中操作两者的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T09:59:55.433

函数 join_two_table() {

```
 $this->db->select("database1.tablename.first_name,database1.tablename.last_name,tablename.*");

    $this->db->from('database2.tablename');

    $this->db->join('database1.tablename', 'database2.tablename.user_id = database1.tablename.user_id');

    $this->db->where('database2.tablename.status', 'open');

    $this->db->order_by('database2.tablename.id', 'DESC');

    $query = $this->db->get();
    return $query->result();
} 
```

# node.js - node-mongodb-native MongoClient 意外关闭连接

> ID：14159134
> 
> 赞同：7
> 
> 时间：2013-01-04T14:37:27.820
> 
> 标签：node.js, mongodb, node-mongodb-native

我一直在寻找 mongodb 中意外关闭的连接，但只能从希望关闭连接的人那里找到问题。

我正在使用 node-mongodb-native 连接到数据库，但我不断收到看似随机的“错误：连接关闭”消息。如果我手动重试请求（浏览器刷新），则请求有效。

知道是什么原因造成的吗？是否有一些简单的选项会有所帮助？

我正在使用以下方法获取我的数据库句柄：

```
 MongoClient.connect(connection_string, { auto_reconnect: true }, function (err, db) {
     //server code/routes in here
     } 
```

我正在浏览[https://github.com/mongodb/node-mongodb-native/blob/master/lib/mongodb/connection/server.js](https://github.com/mongodb/node-mongodb-native/blob/master/lib/mongodb/connection/server.js)但我意识到我对连接池的一般管理方式的有限理解让我感到困惑向上。我的印象是他们会在我的服务器的整个生命周期内保持打开状态。有人可以帮忙吗？

编辑：阅读 mjhm 的评论后，我开始更深入地研究 TCP keep alive。偶然发现一些网站暗示这可能是 Azure 所做的（这个问题现在被错误分类了！）。显然，Azure 负载均衡器会在活动 1 分钟后终止连接。我正在使用 Azure 网站，因此它可能适用也可能不适用，但我认为这种洞察力足以开始新的调查。更多细节在这里[http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T02:06:56.133

来自：[http ://christiankvalheim.com/post/32209721702/tcp-keepalive](http://christiankvalheim.com/post/32209721702/tcp-keepalive)

> TCP keepalive 在使用 mongodb node.js 驱动程序时经常出现的一个问题是套接字停止响应。这通常有两个来源。
> 
> 应用程序和 mongodb 实例之间有一个防火墙，它不遵守 keepAlive。
> 
> 系统上的套接字超时时间太高，使套接字挂起并且永远不会关闭。第一种情况可以通过设置套接字连接选项并启用 keepAlive 并在套接字上设置硬超时值来解决。这将确保正确配置的防火墙将保持连接活动，如果没有，它将超时。另一件需要调整的是 os tcp_keepalive_time。基本上它对于像 MongoDB 这样的东西来说太高了（在 Linux 上默认为 2 小时）。将此值设置得较低将正确超时死套接字并让驱动程序恢复。
> 
> 一个很好的链接来阅读更多关于它的信息。 [http://www.mongodb.org/display/DOCS/Troubleshooting#Troubleshooting-Socketerrorsinshardedclustersandreplicasets](http://www.mongodb.org/display/DOCS/Troubleshooting#Troubleshooting-Socketerrorsinshardedclustersandreplicasets)

# extjs - 将 Flow 播放器与 EXTJS4 集成

> ID：14159139
> 
> 赞同：-3
> 
> 时间：2013-01-04T14:37:58.390
> 
> 标签：extjs, flowplayer

如何将 flowplayer 与 EXTJS4 集成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:25:22.020

你可以试试这个方法

```
 <a href="http://path to video/flowplayer-960.mp4"  style="display:block;width:425px;height:300px;" id="player"/>                
        <script>
            flowplayer("player", "path to the swf location/flowplayer-3.2.5.swf",{clip:{autoPlay: false,autoBuffering: true}});         
        </script>

        <div id="player" style="display:block;width:425px;height:300px;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:39:33.173

您可以在面板上嵌入所需的每个[html代码。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-html)

```
Ext.create('Ext.panel.Panel', {
    title: 'Hello World Flowplayer',
    width: 200,
    html: '<script src="http://embed.flowplayer.org/5.2.1/embed.min.js"><div class="flowplayer" style="width: 624px; height: 260px;" data-origin="http://flowplayer.org/" data-analytics="UA-27182341-1" data-key="$437712314481272" data-rtmp="rtmp://s3b78u0kbtx79q.cloudfront.net/cfx/st"><video><source type="video/webm" src="http://stream.flowplayer.org/bauhaus/624x260.webm"><source type="video/mp4" src="http://stream.flowplayer.org/bauhaus/624x260.mp4"><source type="video/ogg" src="http://stream.flowplayer.org/bauhaus/624x260.ogv"><source type="video/flash" src="mp4:bauhaus/624x260.mp4"></video></div></script>',
    renderTo: Ext.getBody()
}); 
```

# amazon-s3 - 如何在没有（或有）AWS S3 的情况下实现亚马逊 EC2 共享卷？

> ID：14159140
> 
> 赞同：1
> 
> 时间：2013-01-04T14:37:59.257
> 
> 标签：amazon-s3, amazon-ec2, shared

我目前在 AWS 上的 3 个 EC2 Windows 实例上启动并运行了一个 CMS（EpiServer）系统，位于负载均衡器后面。

它们都连接到数据库，因此写入的数据正确同步。

**问题**

问题是，如果有人上传任何图像，这些图像只会上传到 EC2 实例之一。

所以我需要一种在我设置的实例之间获取共享 EBS 卷的方法。

**试过了**

我尝试使用 AWS SDK 和 Geta.AmazonS3 库，但遇到了一些关于页面文件虚拟路径提供程序的问题（请参阅未回答：[StackOverflow 问题](https://stackoverflow.com/questions/14147288/how-to-add-a-working-aws-s3-virtualpath-provider-for-episerver-pagefiles)）。

**一个解决方案** 所以我试图找到另一种方法来做到这一点，并认为我可以看看是否有安装 AWS S3 的可能性。我找到[了 TNTdrive](http://tntdrive.com/)，它完成了这项工作，它将我的 S3 存储桶安装为 Windows 卷，并且 CMS 系统接受了它。

我只是担心它会提出不必要的请求和它的成本（价格）（我更喜欢开源:)）。

**问题：**

所以我的问题是：有没有人知道一个开源程序可以做同样的事情，或者其他可能性？我没有阅读太多关于[AWS Storage Gateway](http://aws.amazon.com/storagegateway/)的内容，但这能满足我的需要吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T04:08:54.047

您可以将 S3 存储桶挂载到所有 3 个 EC2 实例上。这是一个 2 路挂载，因此您的所有文件都将同步。您可以使用[s3f3](https://code.google.com/p/s3fs/wiki/FuseOverAmazon)进行安装。

我使用了本指南并很快设置了我的：[将 S3 安装到 EC2 上](http://sharadchhetri.com/2013/03/08/how-to-mount-s3-bucket-in-linux-ec2-instance/)

# visual-studio-2010 - 旧 dll 的 Windows 服务启动问题

> ID：14159146
> 
> 赞同：1
> 
> 时间：2013-01-04T14:38:21.847
> 
> 标签：visual-studio-2010, visual-c++, installshield

**背景：**
如果我安装旧的安装包（1998 年创建），服务启动没有任何问题。这个包是使用 InstallShield 创建的，项目代码不可用。它使用本地部署，所有依赖的 DLL 都在 bin 目录中。它使用自定义*installservice.exe*（此代码也不可用）将*lp30.exe*安装为 Windows 服务。

**我在做什么：**
我需要使用 VS 2010 在 win2k8 上创建一个可工作的可安装包。在 VC++ 上，我可以使用文件和文件夹结构创建 .msi 和安装文件，并从旧安装中识别出注册表项。

**问题：**
在安装项目中，自定义调用*installservice.exe*将*lp30.exe*安装为服务。但服务启动以以下错误结束：

```
 "Error: 1053 The service did not respond to the start or control request in a timely fashion" 
```

**分析：**
*installservice.exe*无法启动*lp30.exe*作为服务。在库调用 PS2FaxW.dll 函数时失败。这是一个可追溯到 1998 年的第三方 DLL，其源代码不可用。

DLL 在应用程序路径中可用，不需要注册表。我发现它们已加载。但是在使用 dependencywalker 进行分析时，我看到以下错误：

```
GetProcAddress(0x75790000 [KERNEL32.DLL], "IsTNT") called from "PS2FAXW.DLL" at address 0x10003F81 and returned NULL. Error: The specified procedure could not be found (127).

LoadLibraryA("\LincPag2.dll") returned NULL. Error: The specified module could not be found (126). 
```

最后退出

```
Exited "LP30.EXE" (process 0x1DE8) with code 126 (0x7E). 
```

**问：**
我使用相同的“installservice.exe”和相同的应用程序 ( *lp30.exe* ) 来启动服务。但行为与旧包不同。在这种情况下，我可能会缺少哪些其他配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:20:24.490

默认情况下，服务的当前目录是 Windows 服务的当前目录`system32`中所写的文件夹[不是您所期望](http://haacked.com/archive/2004/06/28/current-directory-for-windows-service-is-not-what-you-expect.aspx)的。另请参阅此 StackOverflow 问题[Windows 服务在哪个目录中运行？](https://stackoverflow.com/questions/884963/what-directory-does-a-windows-service-run-in).

本质上，您的服务正在尝试从 system32 加载 DLL，而不是应用程序目录。您可以尝试将其`LincPag2.dll`放入 system32 中，看看是否能暂时解决问题。我不认为将 DLL 放入`system32`是最好的长期解决方案，但它可能是一个有用的调试步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:34:22.520

尝试使用如下命令行开关调用服务：

> LP30.EXE /安装

LP30.EXE 是否对控制台产生任何输出？

尝试使用“sc”命令：

> sc 创建 LP30 binPath= "\"C:\Program Files\Foo\LP30.exe""

如果一切都失败了，请在[Process Monitor](http://technet.microsoft.com/en-ca/sysinternals/bb896645.aspx)下运行原始 (1998) 程序，以查看它在做什么。

# c# - Stringbuilder 文本未显示在新行上

> ID：14159147
> 
> 赞同：2
> 
> 时间：2013-01-04T14:38:26.107
> 
> 标签：c#, asp.net, stringbuilder

我有一个通用的 html 控件 - 一个“P”标签，我已经添加了一个`runat="server"`。

我使用方法构造了一个字符串`Stringbuilder`，并将其应用于标签的 InnerHtml 属性。

包含许多`sb.Appendline()`' 的文本仍显示为段落，会换行但不创建任何新行。但是，当我查看创建的标记时，新行就在那里，显示为间距。

这也是DIV的情况

有人对我如何解决这个问题有任何想法吗？

下面的代码：

```
 var sb = new StringBuilder();
        sb.Append("Congratulations!");
        sb.AppendLine();
        sb.AppendLine();
        sb.AppendFormat("Your application was accepted by <b>{0}</b>.", response.AcceptedLender);
        sb.AppendLine();
        sb.AppendFormat("Your reference number is <b>{0}</b>.", response.PPDReference);
        sb.AppendLine();
        sb.AppendLine();
        sb.Append("Click the button below to sign your loan agreement electronically and collect your cash.");

        AcceptedMessage.InnerHtml = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T14:39:43.237

而不是使用`AppendLine`应该使用`AppendFormat`：

```
myStringBuilder.AppendFormat("{0}<br />", strToAppend); 
```

如果您需要这些换行符保持“原样”，因为您将其显示在文本文件或类似性质的文件中，则在调用该`.ToString()`方法时需要用 html 换行符替换新行文本。

```
myStringBuilder.Replace(Environment.NewLine, "<br />").ToString(); 
```

在这里使用`Environment.NewLine`可能不起作用，您实际上可能需要更换`\r\n`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:41:12.837

您必须将 stringlbuilder 换行符 (\n) 转换为 BR 标签

以便它们可以在 HTML 换行符中呈现。

更好的 IMO 是将整行包含在 P 标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:43:06.063

StringBuilder 附加的行不会显示在浏览器中。浏览器只识别
和换行。所以你必须包含在浏览器中显示的标签

```
 sb.AppendLine("some text here <br />"); 
```

新行将显示在控制台应用程序而不是浏览器中

您也可以替换新行

```
AcceptedMessage.InnerHtml = sb.ToString().Replace("\n", "<br />"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:16:49.837

```
string messagePattern = @"
<p>Congratulations!</p>
<p>Your application was accepted by <b>{0}</b>.<br />
   Your reference number is <b>{1}</b>.</p>
<p>Click the button below to sign your loan agreement 
   electronically and collect your cash.</p>";

AcceptedMessage.InnerHtml = string.Format(
    messagePattern, 
    response.AcceptedLender, 
    response.PPDReference); 
```

# c# - 从 System.Drawing.Imaging.ImageFormat (C#) 获取扩展

> ID：14159148
> 
> 赞同：17
> 
> 时间：2013-01-04T14:38:30.300
> 
> 标签：c#, .net, system.drawing.imaging

对于任何给定的，是否有可能获得扩展名`System.Drawing.Imaging.ImageFormat`？（C＃）

例子：

```
System.Drawing.Imaging.ImageFormat.Tiff -> .tif
System.Drawing.Imaging.ImageFormat.Jpeg -> .jpg
... 
```

这可以作为查找表轻松完成，但想知道 .Net 中是否有任何本机内容。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-31T19:30:42.683

我现在找到了 3 种方法来做到这一点，其中最后 2 种是等效的。所有都是扩展方法，并打算以“.foo”的形式产生扩展

```
static class ImageFormatUtils
{
    //Attempt 1: Use ImageCodecInfo.GetImageEncoders
    public static string FileExtensionFromEncoder(this ImageFormat format)
    {
        try
        {
            return ImageCodecInfo.GetImageEncoders()
                    .First(x => x.FormatID == format.Guid)
                    .FilenameExtension
                    .Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
                    .First()
                    .Trim('*')
                    .ToLower();
        }
        catch (Exception)
        {
            return ".IDFK";
        }
    }

    //Attempt 2: Using ImageFormatConverter().ConvertToString()
    public static string FileExtensionFromConverter(this ImageFormat format)
    {
        return "." + new ImageFormatConverter().ConvertToString(format).ToLower();
    }

    //Attempt 3: Using ImageFormat.ToString()
    public static string FileExtensionFromToString(this ImageFormat format)
    {
        return "." + format.ToString().ToLower();
    }
} 
```

作为扩展方法，它们可以被称为：

```
ImageFormat format = ImageFormat.Jpeg;
var filePath = "image" + format.FileExtensionFromEncoder(); 
```

结果字符串将是：

```
"image.jpg" 
```

为了比较这些新方法，我制作了一个简短的控制台应用程序：

```
class Program
{
    static void Main()
    {
        var formats = new[]
        {
            ImageFormat.Bmp, ImageFormat.Emf, ImageFormat.Exif, ImageFormat.Gif,
            ImageFormat.Icon, ImageFormat.Jpeg, ImageFormat.MemoryBmp, ImageFormat.Png,
            ImageFormat.Tiff, ImageFormat.Wmf
        };

        foreach (var format in formats)
        {
            Console.WriteLine("FromEncoder: '{0}', FromConverter: '{1}', FromToString: '{2}'", format.FileExtensionFromEncoder(), format.FileExtensionFromConverter(), format.FileExtensionFromToString());
        }
        Console.Read();
    }
} 
```

运行它会产生以下输出：

```
FromEncoder: '.bmp', FromConverter: '.bmp', FromToString: '.bmp'
FromEncoder: '.IDFK', FromConverter: '.emf', FromToString: '.emf'
FromEncoder: '.IDFK', FromConverter: '.exif', FromToString: '.exif'
FromEncoder: '.gif', FromConverter: '.gif', FromToString: '.gif'
FromEncoder: '.IDFK', FromConverter: '.icon', FromToString: '.icon'
FromEncoder: '.jpg', FromConverter: '.jpeg', FromToString: '.jpeg'
FromEncoder: '.IDFK', FromConverter: '.memorybmp', FromToString: '.memorybmp'
FromEncoder: '.png', FromConverter: '.png', FromToString: '.png'
FromEncoder: '.tif', FromConverter: '.tiff', FromToString: '.tiff'
FromEncoder: '.IDFK', FromConverter: '.wmf', FromToString: '.wmf' 
```

您可以看到原始方法失败并在更晦涩的格式上生成“.IDFK”，而其他方法实际上只是使用格式的名称；ImageFormat.Jpeg, '.jpeg'; ImageFormat.MemoryBmp, '.memorybmp'; ETC..

因此，由于最初的问题需要“.tif”而不是“.tiff”，因此第一种方法似乎适合您。或者也许两者的某种组合是理想的：

```
 public static string FileExtensionFromEncoder(this ImageFormat format)
    {
        try
        {
            return ImageCodecInfo.GetImageEncoders()
                    .First(x => x.FormatID == format.Guid)
                    .FilenameExtension
                    .Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
                    .First()
                    .Trim('*')
                    .ToLower();
        }
        catch (Exception)
        {
            return "." + format.ToString().ToLower();
        }
    } 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-04T14:51:39.287

也许这就是你要找的东西？

```
 public static string GetFilenameExtension(ImageFormat format)
    {
        return ImageCodecInfo.GetImageEncoders().FirstOrDefault(x => x.FormatID == format.Guid).FilenameExtension;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-13T09:38:47.057

**凯文布雷**的回答很棒。不过，我并不是 100% 满意以这种方式捕获异常，所以我稍微调整了他的解决方案......

```
public static string GetFileExtension(this ImageFormat imageFormat)
{
    var extension = ImageCodecInfo.GetImageEncoders()
        .Where(ie => ie.FormatID == imageFormat.Guid)
        .Select(ie => ie.FilenameExtension
            .Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
            .First()
            .Trim('*')
            .ToLower())
        .FirstOrDefault();

    return extension ?? string.Format(".{0}", imageFormat.ToString().ToLower());
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-03T02:00:57.043

我对**Niklas**的回答做了一些改进，因为我正在寻找一种方法来获取适合附加到文件名的文件扩展名。我在这里发布我的解决方案，以防其他谷歌用户正在寻找同样的东西：

```
public string GetFilenameExtension(ImageFormat format)
{
    return ImageCodecInfo.GetImageEncoders()
                         .First(x => x.FormatID == format.Guid)
                         .FilenameExtension
                         .Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
                         .First()
                         .Trim('*');
} 
```

所以如果你这样称呼它：

```
var filePath = "image" + GetFilenameExtension(ImageFormat.Jpeg); 
```

结果字符串将是：

```
"image.JPG" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-31T13:05:47.897

在我的生产代码中，我使用这个：

```
 public static string GetExtensionFromImageFormat(ImageFormat img)
    {
        if (img.Equals(ImageFormat.Jpeg)) return ".jpg";
        else if (img.Equals(ImageFormat.Png)) return ".png";
        else if (img.Equals(ImageFormat.Gif)) return ".gif";
        else if (img.Equals(ImageFormat.Bmp)) return ".bmp";
        else if (img.Equals(ImageFormat.Tiff)) return ".tif";
        else if (img.Equals(ImageFormat.Icon)) return ".ico";
        else if (img.Equals(ImageFormat.Emf)) return ".emf";
        else if (img.Equals(ImageFormat.Wmf)) return ".wmf";
        else if (img.Equals(ImageFormat.Exif)) return ".exif";
        else if (img.Equals(ImageFormat.MemoryBmp)) return ".bmp";
        return ".unknown";
    } 
```

# c - 断开客户端与服务器 TCP 的连接

> ID：14159150
> 
> 赞同：1
> 
> 时间：2013-01-04T14:38:32.817
> 
> 标签：c

我用 C 编写了一个服务器/客户端 TCP 应用程序。许多客户端可以同时连接到服务器。客户端如何在调用 close() 10 秒后断开连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:39:20.533

10 秒后调用`close`套接字`accept`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:41:00.500

只需在接受的套接字文件描述符上调用[shutdown](http://linux.die.net/man/2/shutdown)和[close](http://linux.die.net/man/2/close)，前提是您正在谈论某种 UNIX 中的 vanilla Berkely 套接字。

您必须以适合应用程序体系结构的任何方式管理超时。您必须在*某处*运行计时器，无法自动让 O/S 使活动连接超时。

# api - 当浏览器存在同源策略时，REST API 如何与 JavaScript 一起使用？

> ID：14159154
> 
> 赞同：11
> 
> 时间：2013-01-04T14:38:45.003
> 
> 标签：api, cross-domain, flickr, same-origin-policy

我正在使用 Flickr 的 REST API，它运行良好。我的意思是，我正在对 Flickr API 进行 AJAX 调用并获取 JSON 对象，解析对象等。

但这在我心中提出了一个问题。如果浏览器遵循[同源策略](https://en.wikipedia.org/wiki/Same-origin_policy)，那么它们如何发出这些类型的 API 请求？

**[这个 DEMO fiddle](http://jsfiddle.net/C7guQ/)**正在工作，但它向Flickr 域**发送了一个跨域请求。**

**这个跨域请求是如何工作的？**

跨域请求：

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?id=" +
          id + "&lang=en-us&format=json&jsoncallback=1"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T17:41:59.060

您需要了解的是，虽然浏览器确实执行了同源策略 (SOP)，但不执行 SOP 时也有例外。例如，如果您有一个 HTML 页面 - 您可以插入`<img>`指向任何域上的图像的标签。因此，SOP 不适用于此处，您正在为图像发出跨域 HTTP GET 请求。

您链接到的演示有效，因为它使用了一种以类似方式工作的机制。该机制称为 JSONP - [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)，我建议您阅读 wiki 条目和其他一些博客文章。本质上，JSONP 动态注入`<script>`标签以向任何域发送请求（请求的参数作为 URL 查询参数添加），因为同源策略不适用于`<script>`标签（因为它不适用于`<img>`标签）。

在其他域上调用 REST API 的另一种方法是使用跨域资源共享机制 (CORS) - [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。本质上，这种机制使得浏览器不会拒绝跨域请求，而是询问目标服务是否允许特定的跨域请求。目标服务通过在响应中插入特殊的 HTTP 标头来告诉浏览器它希望允许跨域请求：

```
Access-Control-Allow-Origin: http://www.example.com 
```

# linux - 自定义 ALSA 驱动程序不执行来自 struct snd_pcm_ops 的打开函数

> ID：14159161
> 
> 赞同：1
> 
> 时间：2013-01-04T14:39:18.867
> 
> 标签：linux, driver, alsa

我正在尝试使用 ALSA 创建自己的自定义声音驱动程序。到目前为止，我已经成功加载了模块，我的意思是：

*   我的探测功能被执行
*   构造函数被执行
*   我看到正在执行中断

我通过我在这些函数中放置的转储发现了这一点。

但是当我尝试在我的应用程序中使用 snd_pcm_open() 函数来连接到我的驱动程序时，我没有看到我在存储在 struct snd_pcm_ops 中的 .open() 函数中添加的转储。因此，由于某种原因，我的应用程序中没有看到我的驱动程序。

我加载了原始驱动程序并执行了相同的应用程序，它运行良好。

您知道为什么我的驱动程序无法从用户空间访问吗？

谢谢你。

这是代码：

```
#include <linux/fs.h>
#include <linux/module.h>                         // MOD_DEVICE_TABLE,
#include <linux/init.h>
#include <linux/pci.h>                            // pci_device_id,
#include <linux/interrupt.h>
#include <linux/version.h>                        // KERNEL_VERSION,
#include <iso646.h>
#include <linux/kobject.h>
#include <linux/slab.h>
#include <linux/delay.h>

#include <asm/io.h> 
#include <asm/uaccess.h>                          // copy_to_user,

#include <sound/core.h>
#include <sound/initval.h>
#include <sound/pcm.h>
#include <sound/pcm_params.h>

#include <linux/time.h>

MODULE_LICENSE("GPL");
// vendor and device id of the PCI device
#define VENDOR_ID 0x8086
#define DEVICE_ID 0x2415

/*************** DATA **********************/
/* module parameters (see "Module Parameters") */
/* SNDRV_CARDS: maximum number of cards supported by this module */
static int index[SNDRV_CARDS] = SNDRV_DEFAULT_IDX;
static char *id[SNDRV_CARDS] = SNDRV_DEFAULT_STR;
static int enable[SNDRV_CARDS] = SNDRV_DEFAULT_ENABLE_PNP;

#define BARS 6
enum bars{bar0=0, bar1=1, bar2=2, bar3=3, bar4=4, bar5=5};

#define IOREG_0 0
#define IOREG_1 1

/*OFFSETS TO REGISTER*/
#define GLOBAL_STATUS_REGISTER_OFFSET 0x30

struct mem_regions
{
    unsigned int start_addr;
    unsigned int end_addr;
    unsigned int mem_len;
    unsigned int bar;
    unsigned int flag;

    void __iomem *mem_mapped_addr;
};

struct mychip {
    struct snd_card *card;
    struct pci_dev *pci;

    unsigned long port;
    int irq;

    struct mem_regions memregs[6];

    struct snd_pcm *pcm;
    struct snd_pcm_substream *substream;
};
/*******************************************/

/******************** FUNCTION PROTOTYPES *********************************/
static int __devinit snd_mychip_create(struct snd_card *card,
                       struct pci_dev *pci,
                       struct mychip **rchip);

static int snd_mychip_free(struct mychip *chip);                       

static irqreturn_t snd_mychip_interrupt(int irq, void *dev_id);

static int __devinit snd_mychip_probe(struct pci_dev *pci,
                      const struct pci_device_id *pci_id);

static void snd_mychip_remove(struct pci_dev *pci);

static int snd_mychip_dev_free(struct snd_device *device);

static int reserve_mem_regions(struct mychip *chip);
static void clear_mem_regions(struct mychip *chip);

static void memdump(struct mychip *chip);

/* ------------ PCM functions ------------- */

/* ---- constructor ---- */
static int __devinit snd_pcm_constructor(struct mychip *chip);

/* ---- destructor ---- */
static void snd_pcm_destructor(struct snd_pcm *pcm);

/* ----  file operations fcns ---- */
static int snd_pcm_playback_open(struct snd_pcm_substream *substream);
static int snd_pcm_playback_close(struct snd_pcm_substream *substream);
static int snd_pcm_capture_open(struct snd_pcm_substream *substream);
static int snd_pcm_capture_close(struct snd_pcm_substream *substream);
/*snd_pcm_lib_ioctl();*/
static int snd_pcm_hw_params(struct snd_pcm_substream *substream,
             struct snd_pcm_hw_params *hw_params);
static int snd_pcm_hw_free(struct snd_pcm_substream *substream);
static int snd_pcm_prepare(struct snd_pcm_substream *substream);
static int snd_pcm_trigger(struct snd_pcm_substream *substream, int cmd);
static snd_pcm_uframes_t snd_pcm_pointer(struct snd_pcm_substream *substream);

/* ---------------------------------------- */

/**************************************************************************/

/************************* IMPLEMENTATION *******************************/
/*prototyped*/
static int snd_mychip_free(struct mychip *chip)
{
    /* disable hardware here if any */
    //.... /* (not implemented in this document) */

    /* release the irq */
    if (chip->irq >= 0)
        free_irq(chip->irq, chip);

    /* release the I/O ports & memory */
    /*pci_release_regions(chip->pci);*/
    clear_mem_regions(chip);

    /* disable the PCI entry */
    pci_disable_device(chip->pci);

    /* release the data */
    kfree(chip);
    return 0;
}

/*prototyped*/
static int snd_mychip_dev_free(struct snd_device *device)
{
    return snd_mychip_free(device->device_data);
}

/*prototyped*/
static void snd_mychip_remove(struct pci_dev *pci)
{
  /*Clear the card data and PCI data*/
  snd_card_free(pci_get_drvdata(pci));
  pci_set_drvdata(pci, NULL);
}

/* constructor -- see "Constructor" sub-section *//*prototyped*/
static int __devinit snd_mychip_probe(struct pci_dev *pci,
                  const struct pci_device_id *pci_id)
{
    static int dev;
    struct snd_card *card;
    struct mychip *chip;
    int err;

    printk(KERN_ERR "Probing ...\n");

    /* (1) Check and increment the device index */
    if (dev >= SNDRV_CARDS)
        return -ENODEV;
    if (!enable[dev]) {
        dev++;
        return -ENOENT;
    }

    /* (2) Create a card instance */
    err = snd_card_create(index[dev], id[dev], THIS_MODULE, 0, &card);
    if (err < 0)
        return err;

    /* (3) Create a main component */
    /* chip-specific constructor: allocate PCI resources */
    err = snd_mychip_create(card, pci, &chip);
    if (err < 0) {
        snd_card_free(card);
        return err;
    }

    /* (4) Set driver ID and name strings */
    strcpy(card->driver, "My Chip");
    strcpy(card->shortname, "My Own Chip 123");
    sprintf(card->longname, "%s at 0x%lx irq %i",
        card->shortname, chip->port, chip->irq);

    /* (5) Create other components PCM, mixers, MIDI etc */
    /* implemented later */

    /* (6) Register card instance */
    err = snd_card_register(card);
    if (err < 0) {
        snd_card_free(card);
        return err;
    }

    /* (7) Set the PCI driver data */
    pci_set_drvdata(pci, card);
    dev++;

    /*Call PCM constructor*/
    err = snd_pcm_constructor(chip);
    if(err < 0)
        printk(KERN_ERR "Failed to execute PCM constructor!\n");

    printk(KERN_ERR "Probing done!\n");

    return 0;
}

/*prototyped*/
static irqreturn_t snd_mychip_interrupt(int irq, void *dev_id)
{
    struct mychip *chip = dev_id;
    struct timeval timeval;
    unsigned int status = 0;

    static int executed = 0;

    do_gettimeofday(&timeval);

    if(executed < 10)
    {

    /*get the global status register*/
    status = ioread32((void*)chip->memregs[IOREG_0].mem_mapped_addr + GLOBAL_STATUS_REGISTER_OFFSET);

    status = ioread32((void*)chip->memregs[IOREG_1].mem_mapped_addr + GLOBAL_STATUS_REGISTER_OFFSET);

    printk(KERN_ERR "\n---------- ISR -----------\n");

    executed ++;
    }

    return IRQ_HANDLED;
}

/* chip-specific constructor *//*prototyped*/
static int __devinit snd_mychip_create(struct snd_card *card,
                   struct pci_dev *pci,
                   struct mychip **rchip)
{
    struct mychip *chip;
    int err;
    static struct snd_device_ops ops = {
           .dev_free = snd_mychip_dev_free,
    };

    printk(KERN_ERR "Enabling PCI device ...");

    *rchip = NULL;

    /* initialize the PCI entry */
    err = pci_enable_device(pci);
    if (err < 0)
        return err;
    /* check PCI availability (28bit DMA) */
    if (pci_set_dma_mask(pci, DMA_BIT_MASK(28)) < 0 ||
        pci_set_consistent_dma_mask(pci, DMA_BIT_MASK(28)) < 0) {
        printk(KERN_ERR "error to set 28bit mask DMA\n");
        pci_disable_device(pci);
        return -ENXIO;
    }

    chip = kzalloc(sizeof(*chip), GFP_KERNEL);
    if (chip == NULL) {
        pci_disable_device(pci);
        return -ENOMEM;
    }

    /* initialize the stuff */
    chip->card = card;
    chip->pci = pci;
    chip->irq = -1;

    err = reserve_mem_regions(chip);
    if (err < 0) {
        kfree(chip);
        pci_disable_device(pci);
        return err;
    }

    /* (1) PCI resource allocation */
    if (request_irq(pci->irq, snd_mychip_interrupt,
            IRQF_SHARED, "My Chip", chip)) {
        printk(KERN_ERR "cannot grab irq %d\n", pci->irq);
        snd_mychip_free(chip);
        return -EBUSY;
    }
    chip->irq = pci->irq;

    printk(KERN_ERR "Gain access to PCI IRQ line ... line %d\n", pci->irq);
    printk(KERN_ERR "Gain access to PCI IO ports ... ports 0x%x\n", (unsigned int)chip->port);

    /* (2) initialization of the chip hardware */
    /*   (not implemented in this document) */

    err = snd_device_new(card, SNDRV_DEV_LOWLEVEL, chip, &ops);
    if (err < 0) {
        snd_mychip_free(chip);
        return err;
    }

    snd_card_set_dev(card, &pci->dev);

    *rchip = chip;
    return 0;
}    

static void memdump(struct mychip *chip)
{
    int i;

    for(i=0; i<BARS; i++)
    {
        printk(KERN_ERR "\n-----------------------------------\n");
        printk(KERN_ERR "chip->memregs[i].bar = %d\n", chip->memregs[i].bar);
        printk(KERN_ERR "chip->memregs[i].start_addr = 0x%x\n", chip->memregs[i].start_addr);
        printk(KERN_ERR "chip->memregs[i].end_addr = 0x%x\n", chip->memregs[i].end_addr);
        printk(KERN_ERR "chip->memregs[i].mem_len = %d\n", chip->memregs[i].mem_len);
        printk(KERN_ERR "chip->memregs[i].flag = 0x%x\n", chip->memregs[i].flag);
        printk(KERN_ERR "chip->memregs[i].mem_mapped_addr = 0x%p\n", chip->memregs[i].mem_mapped_addr);
}
}

static int reserve_mem_regions(struct mychip *chip)
{
    int res = 0;
    int i=0;

    res = pci_request_regions(chip->pci, "My Chip");
    if (res < 0) {
        return res;
    }

    for(i=0; i<BARS; i++)
    {
        chip->memregs[i].bar = i;
        chip->memregs[i].start_addr = pci_resource_start( chip->pci, i );
        chip->memregs[i].end_addr = pci_resource_end( chip->pci, i );
        chip->memregs[i].mem_len = pci_resource_len( chip->pci, i );
        chip->memregs[i].flag = pci_resource_flags( chip->pci, i );
        chip->memregs[i].mem_mapped_addr = pci_iomap(chip->pci, i, 0);
    }

    memdump(chip);

    return res;
}

static void clear_mem_regions(struct mychip *chip)
{
    int i = 0;
    for(i=0; i<BARS; i++)
    {
        chip->memregs[i].bar = 0xFFFF;
        chip->memregs[i].start_addr = 0;
        chip->memregs[i].end_addr = 0;
        chip->memregs[i].mem_len = 0;
        chip->memregs[i].flag = 0xFFFF;

        pci_iounmap(chip->pci, chip->memregs[i].mem_mapped_addr);
        chip->memregs[i].mem_mapped_addr = NULL;
    }
    pci_release_regions(chip->pci);
}

/* ------------ PCM functions ------------- */    
static struct snd_pcm_hardware snd_hardware_setup =
{
    .info =         (SNDRV_PCM_INFO_MMAP | SNDRV_PCM_INFO_INTERLEAVED |
                 SNDRV_PCM_INFO_BLOCK_TRANSFER |
                 SNDRV_PCM_INFO_MMAP_VALID |
                 SNDRV_PCM_INFO_PAUSE |
                 SNDRV_PCM_INFO_RESUME),
    .formats =      SNDRV_PCM_FMTBIT_S16_LE,
    .rates =        SNDRV_PCM_RATE_8000_48000,
    .rate_min =     8000,
    .rate_max =     48000,
    .channels_min =     2,
    .channels_max =     2,
    .buffer_bytes_max = 128 * 1024,
    .period_bytes_min = 32,
    .period_bytes_max = 128 * 1024,
    .periods_min =      1,
    .periods_max =      1024,
    .fifo_size =        0,
};

/* ---- operator structs ---- */
static struct snd_pcm_ops snd_pcm_playback_ops = {
    .open =     snd_pcm_playback_open,
    .close =    snd_pcm_playback_close,
    .ioctl =    snd_pcm_lib_ioctl,
    .hw_params =    snd_pcm_hw_params,
    .hw_free =  snd_pcm_hw_free,
    .prepare =  snd_pcm_prepare,
    .trigger =  snd_pcm_trigger,
    .pointer =  snd_pcm_pointer,
};

static struct snd_pcm_ops snd_pcm_capture_ops = {
    .open =     snd_pcm_capture_open,
    .close =    snd_pcm_capture_close,
    .ioctl =    snd_pcm_lib_ioctl,
    .hw_params =    snd_pcm_hw_params,
    .hw_free =  snd_pcm_hw_free,
    .prepare =  snd_pcm_prepare,
    .trigger =  snd_pcm_trigger,
    .pointer =  snd_pcm_pointer,
};

/* ----  file operations fcns ---- */
static int snd_pcm_capture_open(struct snd_pcm_substream *substream)
{
    struct mychip *chip = snd_pcm_substream_chip(substream);
    struct snd_pcm_runtime *runtime = substream->runtime;
    int err = -10;

    printk(KERN_ERR ">>> snd_pcm_capture_open()\n");

    runtime->hw = snd_hardware_setup;
    chip->substream = substream;

    return err;
};

static int snd_pcm_capture_close(struct snd_pcm_substream *substream)
{
    int err = -10;

    printk(KERN_ERR ">>> snd_pcm_capture_close()\n");

    return err;
};

static int snd_pcm_playback_open(struct snd_pcm_substream *substream)
{
    struct mychip *chip = snd_pcm_substream_chip(substream);
    struct snd_pcm_runtime *runtime = substream->runtime;
    int err = -10;

    printk(KERN_ERR ">>> snd_pcm_playback_open()\n");

    runtime->hw = snd_hardware_setup;
    chip->substream = substream;

    return err;
};

static int snd_pcm_playback_close(struct snd_pcm_substream *substream)
{
    int err = -10;

    printk(KERN_ERR ">>> snd_pcm_playback_close()\n");

    return err;
};

/*snd_pcm_lib_ioctl();*/
static int snd_pcm_hw_params(struct snd_pcm_substream *substream,
             struct snd_pcm_hw_params *hw_params)
{
    int err = 0;
    return err;
};

static int snd_pcm_hw_free(struct snd_pcm_substream *substream)
{
    int err = 0;
    return err;
};

static int snd_pcm_prepare(struct snd_pcm_substream *substream)
{
    int err = 0;
    return err;
};

static int snd_pcm_trigger(struct snd_pcm_substream *substream, int cmd)
{
    int err = 0;
    return err;
};

static snd_pcm_uframes_t snd_pcm_pointer(struct snd_pcm_substream *substream)
{
    int err = 0;
    return err;
};

/* ---- constructor ---- */
static int __devinit snd_pcm_constructor(struct mychip *chip)
{
    struct snd_pcm *pcm = NULL;
    int err = 0;

    printk(KERN_ERR ">>> PCM CONSTRUCTOR: running...\n");

    err = snd_pcm_new(chip->card, "My Own Chip", 0, 1, 1, &pcm);
    if(err < 0)
    {
        printk(KERN_ERR ">>> PCM CONSTRUCTOR: Failed to execute snd_pcm_new()!\n");
        return err;
    }
    pcm->private_data = chip;
    pcm->private_free = snd_pcm_destructor;

    strcpy(pcm->name, "My Own Chip");
    chip->pcm = pcm;

    /*set operators*/
    snd_pcm_set_ops(pcm, SNDRV_PCM_STREAM_PLAYBACK, &snd_pcm_playback_ops);
    snd_pcm_set_ops(pcm, SNDRV_PCM_STREAM_CAPTURE, &snd_pcm_capture_ops);

    /*stream preallocation of buffers*/
    err = snd_pcm_lib_preallocate_pages_for_all(pcm, SNDRV_DMA_TYPE_DEV, snd_dma_pci_data(chip->pci), 64*1024, 64*1024);
    if(err < 0)
    {
        printk(KERN_ERR ">>> PCM CONSTRUCTOR: Failed to execute snd_pcm_lib_preallocate_pages_for_all()!\n");
    return err;
    }

    printk(KERN_ERR ">>> PCM CONSTRUCTOR: ... exiting.\n");

    return 0;   
}

/* ---- destructor ---- */
static void snd_pcm_destructor(struct snd_pcm *pcm)
{
    /*
    struct mychip *chip = snd_pcm_chip(pcm);
    */
}

/* ---------------------------------------- */
/* PCI IDs */
static struct pci_device_id snd_mychip_ids[] = {
    { VENDOR_ID, DEVICE_ID, PCI_ANY_ID, PCI_ANY_ID, 0, 0, 0, },
    { 0, }
};
MODULE_DEVICE_TABLE(pci, snd_mychip_ids);

/* pci_driver definition */
static struct pci_driver driver = {
    .name = "My Own Chip",
    .id_table = snd_mychip_ids,
    .probe = snd_mychip_probe,
    .remove = __devexit_p(snd_mychip_remove),
};

/**************** MODULE EXCUTED FUNCTIONS ****************************/
/* module initialization */
static int __init alsa_card_mychip_init(void)
{
    printk(KERN_ERR "\n\n\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
    printk(KERN_ERR "-->>> Module init: !!!");
    return pci_register_driver(&driver);
}

/* module clean up */
static void __exit alsa_card_mychip_exit(void)
{
    pci_unregister_driver(&driver);
    printk(KERN_ERR "-->>> Module exit: ");
}
module_init(alsa_card_mychip_init)
module_exit(alsa_card_mychip_exit) 
```

我从 dmesg 得到的输出：

```
[  227.202006] @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[  227.202430] -->>> Module init: !!!
[  227.202507] Probing ...
[  227.203959] Enabling PCI device ...
[  227.207882] 
[  227.207882] -----------------------------------
[  227.208097] chip->memregs[i].bar = 0
[  227.208124] chip->memregs[i].start_addr = 0xd100
[  227.208148] chip->memregs[i].end_addr = 0xd1ff
[  227.208174] chip->memregs[i].mem_len = 256
[  227.208198] chip->memregs[i].flag = 0x40101
[  227.208223] chip->memregs[i].mem_mapped_addr = 0x0001d100
[  227.208246] 
[  227.208246] -----------------------------------
[  227.208271] chip->memregs[i].bar = 1
[  227.208294] chip->memregs[i].start_addr = 0xd200
[  227.208318] chip->memregs[i].end_addr = 0xd23f
[  227.208341] chip->memregs[i].mem_len = 64
[  227.208364] chip->memregs[i].flag = 0x40101
[  227.208388] chip->memregs[i].mem_mapped_addr = 0x0001d200
[  227.208410] 
[  227.208410] -----------------------------------
[  227.208435] chip->memregs[i].bar = 2
.....
[  227.209080] Gain access to PCI IRQ line ... line 5
[  227.209104] Gain access to PCI IO ports ... ports 0x0
[  227.224202] >>> PCM CONSTRUCTOR: running...
[  227.225378] >>> PCM CONSTRUCTOR: ... exiting.
[  227.225403] Probing done!
[  227.295404] 
[  227.295404] ---------- ISR -----------
[  227.313297] 
[  227.313297] ---------- ISR -----------
[  227.327248] 
[  227.327248] ---------- ISR -----------
[  227.344968] 
[  227.344968] ---------- ISR -----------
[  227.351703] 
[  227.351703] ---------- ISR -----------
[  227.360189] 
[  227.360189] ---------- ISR -----------
[  227.371751] 
[  227.371751] ---------- ISR -----------
[  227.387809] 
[  227.387809] ---------- ISR -----------
[  227.396767] 
[  227.396767] ---------- ISR -----------
[  227.413297] 
[  227.413297] ---------- ISR ----------- 
```

你在这里看到

*   正在调用的探测函数（探测 ...）
*   启用 PCI 设备（启用 PCI 设备 ...）
*   正在分配的内存区域
*   中断线（第 5 行）
*   PCM 构造函数（>>> PCM 构造函数：正在运行...）
*   来自中断处理程序的一些转储。

我的应用程序中的一些行：

```
/* Open PCM device for playback. */
rc = snd_pcm_open(&handle, "default", SND_PCM_STREAM_PLAYBACK, 0);
if (rc < 0) {
 printf(
         "unable to open pcm device: %s\n",
         snd_strerror(rc));
  exit(1);
}
printf("Device opened ... rc = %d \n", rc); 
```

在这里，我尝试打开我的设备。如果您注意上面的驱动程序代码，playback_open() 函数应该 printk() 一些消息并且应该返回 -10。我是故意这样做的。但是我的应用程序显示 snd_pcm_open() 的结果是好的（我的意思是零）。所以看起来我的应用程序没有看到我的驱动程序，但尝试使用其他东西。

我还将放置当前正在加载的模块的所有声音：

```
Module                  Size  Used by
...
alsa                   13273  0 //this is my driver
snd_ac97_codec        105592  0 
snd_pcm                80357  2 alsa,snd_ac97_codec
snd_page_alloc         14036  1 snd_pcm
ac97_bus               12670  1 snd_ac97_codec
snd_seq_midi           13132  0 
snd_rawmidi            25382  1 snd_seq_midi
snd_seq_midi_event     14475  1 snd_seq_midi
snd_seq                51256  2 snd_seq_midi,snd_seq_midi_event
snd_timer              24503  2 snd_pcm,snd_seq
snd_seq_device         14137  3 snd_seq_midi,snd_rawmidi,snd_seq
snd                    62027  7 alsa,snd_ac97_codec,snd_pcm,snd_rawmidi,
snd_seq,snd_timer,snd_seq_device
soundcore              14599  1 snd 
```

这是 lspci -v 的输出，它将显示音频设备的信息：

```
00:05.0 Multimedia audio controller: Intel Corporation 82801AA AC'97 Audio Controller (rev 01)
Subsystem: Intel Corporation Device 0000
Flags: bus master, medium devsel, latency 0, IRQ 5
I/O ports at d100 [size=256]
I/O ports at d200 [size=64]
Kernel driver in use: My Own Chip
Kernel modules: snd-nedelinxalsaxpci, snd-intel8x0 
```

我用我的驱动程序构建我的内核，因为我认为这可能会有所帮助，但它没有（snd-nedelinxalsaxpci 是我的驱动程序，而 snd-intel8x0 是原始模块）。“我自己的芯片”来自我的驱动程序。

我不知道我还能给你什么其他信息。非常感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:42:07.420

您的问题是您*在*调用`snd_card_register`. 声卡设备只有在创建后注册后才能被用户空间访问。

您的代码中甚至还有一条注释告诉您执行此操作的正确位置：

```
/* (5) Create other components PCM, mixers, MIDI etc */ 
```

# backbone.js - 主干.js 将数据输入集合和模板

> ID：14159165
> 
> 赞同：2
> 
> 时间：2013-01-04T14:39:30.757
> 
> 标签：backbone.js

我是backbone.js 的新手，需要一些帮助将数据发送到模板。我使用带有 fetch 的模型和一个集合。这是代码：

```
(function($) {

var UserModel = Backbone.Model.extend({
    urlRoot : '/users',
    defaults : {
        name : '',
        email : ''
    },

    initialize : function() {
        _.bindAll(this);
        this.fetch();
    },
    parse : function(res) {
        return JSON.stringify(res);
    },

});

var users_coll = Backbone.Collection.extend({
    //model: UserModel
    initialize : function() {
        var u = new UserModel();
        this.model = u;
    }
});

var displayView = Backbone.View.extend({

    initialize : function() {

        this.collection = new users_coll();
        //_.each(this.collection.models, alert);
        //console.log(this.collection);
        //alert(JSON.stringify(this.collection.models));

        this.render();
    },
    render : function() {
        var tmpl = _.template($("#data-display-tpl").html());
        this.$el.html(tmpl);

    }
});

var view = new displayView({
    el : $("#data-display")
});

     })(jQuery); 
```

它在模型部分工作得很好。在模型的解析函数中，我使用了 console.log() ，一切看起来都很好。我得到了一个格式正确的 json，并且 fetch 也可以正常工作。

但是在我的收藏中，当我尝试 console.log(user_coll.models) 时，我什么也没得到。我想我可能错过了一些非常小的东西。不知道是什么，也许事情的流程都是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:57:14.943

我试图稍微修改你的代码以获得点槽......希望它有助于澄清一些基础知识。

我也没有尝试提供的示例，但理论上它应该可以工作；）

以下是他的示例应该如何完成...让我们以 Twitter 应用程序为例。Twitter 应用程序只有一个模型代表系统中的一个用户。那是用户模型

```
var UserModel = Backbone.Model.extend({
    urlRoot : '/user',   // this is just for modifying one specific user
    defaults : {
        name : '',
        email : ''
    },
    initialize : function() {
        _.bindAll(this);
        //this.fetch();    // WRONG: This call was "wrong" here
                           //        fetch() should be done on Collection not model 
    },
    parse : function(res) {
        return JSON.stringify(res);
    },
}); 
```

现在，您可以在 Twitter 上拥有许多用户列表。所以你有两个列表。在一个列表中，您有 Friends*用户*，而在其他 Family*用户中*

```
var UsersFriendsCollection = Backbone.Collection.extend({
    model: UserModel              // you tell Collection what type ob models it contains
    url: '/users/friends',
    initialize : function() {
        // jabadaba whatever you need here
    }
});

var UsersFamilyCollection = Backbone.Collection.extend({
    model: UserModel              // you tell Collection what type ob models it contains
    url: '/users/family',
    initialize : function() {
        // jabadaba whatever you need here
    }
}); 
```

...

```
var displayView = Backbone.View.extend({
    initialize : function() {
        this.collection = new UsersFriendsCollection();
        this.collection.fetch();       // so you call fetch() on Collection, not Model

        console.log(this.collection);  // this should be populated now

        //_.each(this.collection.models, alert);
        //alert(JSON.stringify(this.collection.models));

        this.render();
    },
    render : function() {
        // collection data is avail. in templating engine for iteration now
        var tmpl = _.template($( "#data-display-tpl" ).html(), this.collection);
        this.$el.html(tmpl);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:09:06.473

集合的模型属性用于指定集合将包含什么*类型*的模型，如果指定，您可以向集合传递一个原始对象数组，它将添加和创建它们。从[文档](http://documentcloud.github.com/backbone/#Collection-model)

> 覆盖此属性以指定集合包含的模型类。如果已定义，您可以传递原始属性对象（和数组）来添加、创建和重置，属性将被转换为适当类型的模型

所以当你的代码中有

```
 var u = new UserModel();
  this.model = u; 
```

您实际上并没有将模型添加到集合中。相反，您可以使用集合[add](http://documentcloud.github.com/backbone/#Collection-add)或[fetch](http://documentcloud.github.com/backbone/#Collection-fetch)方法。

# c++ - 如何在 MSVC++2012 中从 Metro 切换到桌面

> ID：14159187
> 
> 赞同：0
> 
> 时间：2013-01-04T14:40:27.863
> 
> 标签：c++, visual-studio-2012, microsoft-metro, winsock2

我一直在使用 msvc++2010 中的 boost。最近，我尝试了新版本的 msvc++（2012 终极版），从那以后我无法构建我的应用程序，因为它不包含一些像 winsock2 这样的头文件。一些网站说新窗口的应用模式，metro风格，不能使用这些libs和headers，然后我尝试从这种metro风格切换到旧桌面。有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:49:59.920

我安装的 Visual Studio 2012 Express 确实有这个标头，所以这似乎与 Visual Studio 版本无关。路径是：

```
C:\Program Files\Windows Kits\8.0\Include\um\WinSock2.h 
```

确保您在包含搜索目录中指定了有效路径。您还可以安装完整的[Windows 8 平台 SDK](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)。

最后，确保您在项目向导中选择了**Win32应用程序。**最新版本的 Visual Studio 与任何其他版本一样能够构建本机 Win32 代码。

# java - Java Rest 发送双精度值

> ID：14159188
> 
> 赞同：1
> 
> 时间：2013-01-04T14:40:27.863
> 
> 标签：java, rest, jersey

在我的 Java Jersey Rest 服务中，对于更新方法，值“money”在 server.xml 中表示为 long。有效值介于 30.00 和 500.00 之间

哪种方法更标准？我是否应该强制客户端将货币值发送为 30.00 并在服务器中手动解析，而不是使其加倍/长。或以 3000 发送并以这种方式解析。或者在 java/jerseylibrary 中已经有办法做到这一点。

```
@PUT
@Path("/money")
@Consumes("text/plain)
public void updateThreshold(String threshold) {

*//check value and update in server*
} 
```

注意：我不想使用参数化请求将参数类型设置为双精度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:59:11.270

以美分为单位保存所有数据会容易得多。它避免了一些可能的四舍五入问题和不同的数据格式（在这些国家使用“，”作为分隔符，在其他“。”中），也更好地在数据库中存储和排序 int 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:21:37.180

如果您不能选择使用美分，那么让用户传递一个字符串然后使用 Float.parseFloat(floatval) 怎么样？

适用于字符串输入，例如：30.98、30 和 30.00 示例：

```
 String amount1 = "30.98";
    String amount2 = "30";
    String amount3 = "30.00";
    System.out.println("Amount :: " + Float.parseFloat(amount1));
    System.out.println("Amount :: " + Float.parseFloat(amount2));
    System.out.println("Amount :: " + Float.parseFloat(amount3)); 
```

输出：

```
Amount :: 30.98
Amount :: 30.0
Amount :: 30.0 
```

# c++ - 作为 char* 传递后获取数组的长度

> ID：14159189
> 
> 赞同：4
> 
> 时间：2013-01-04T14:40:30.820
> 
> 标签：c++, arrays, pointers, char

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

我有以下形式的代码：

```
void arrLen(char* array){
    // print length
}

int main(){
    char bytes[16];
    arrLen(bytes);
} 
```

我需要做的是获取底层数组的长度并将其打印出来。问题是数组可能包含空字符，因此`strlen`无法工作。有什么办法可以做到这一点，还是我必须将它作为 a`char[]`而不是 a传递`char*`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:47:05.783

C 风格的数组不携带长度信息。

您有几种可用的解决方案：

将数组的大小传递给您的函数：

```
void arrLen(char* array, std::size_t size) 
```

如果您有权访问 C++ 11（或评论中提到的 TR1），请使用[std::array](http://en.cppreference.com/w/cpp/container/array)

```
 std::array<char, 16> bytes; 
```

如果您无权访问 std::array，则可以使用[boost::array](http://www.boost.org/doc/libs/1_52_0/doc/html/array.html)。它们大致相当于标准的。

关于你的评论

> 我是否必须将其作为 char[] 而不是 char* 传递？

数组总是作为指针传递给函数，所以`void arrLen(char* array)`和`void arrLen(char[] array)`是等价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T14:46:36.040

> 还是我必须将其作为 char[] 而不是 char* 传递？

将声明更改为`arrLen()`采用类型参数`char[]`而不是`char*`不会有任何效果，因为在这种情况下它们是等效的。

一个可能的解决方案是使用一个`template`函数：

```
#include <iostream>

template <typename T, int N>
void array_size(T (&a)[N])
{
    std::cout << N << "\n";
}
int main()
{
    array_size("hello");
    char bytes[16];
    array_size(bytes);
    return 0;
} 
```

有关演示，请参见[http://ideone.com/l7GxDp](http://ideone.com/l7GxDp)。

使用数组的替代方法：

*   `std::string`; 这些可以包含 NULL 字符：

    ```
     std::string s("hello\0world", 11); 
    ```

*   [`std::vector<char>`](http://en.cppreference.com/w/cpp/container/vector)

*   [`boost::array<char, 16>`](http://www.boost.org/doc/libs/1_52_0/doc/html/array.html)（[`std::array<char,16>`](http://en.cppreference.com/w/cpp/container/array)在 C++11 中可用，或[`std::tr1::array`](http://msdn.microsoft.com/en-us/library/bb983093.aspx)在市场上的大多数 C++ 编译器中可用）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T14:44:34.097

在传统方式 (C) 中，必须将大小作为函数的属性传递

```
void arrLen(char* array, int maxSize){
    // print length
}

int main(){
    char bytes[16];
    arrLen(bytes, 16);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T14:45:51.550

C/C++ 中的数组不是这样处理的，你必须自己手动跟踪长度。将函数更改为类似的东西，`void arrLen(char * array, int size)`并在调用函数时指定大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T14:47:53.783

如果您有 C++11，我建议您使用[std::array](http://en.cppreference.com/w/cpp/container/array)，它会跟踪它的大小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T14:48:15.957

不幸的是，`char[]`参数`char*`类型是等价的。

你有两个选择：

将长度与指针一起传递，就像在 C 中一样：

```
void arrLen(char* array, size_t length) 
```

或使用模板：

```
template<size_t sz>
void arrLen(char (&array)[sz]) 
```

# c# - 不使用 InitializeComponent() 控制 Dock.Top 顺序

> ID：14159191
> 
> 赞同：1
> 
> 时间：2013-01-04T14:40:34.387
> 
> 标签：c#, winforms

我们不应该修改`InitializeComponent()`. 然而，设计者添加我们控件的顺序决定了 Docking 的堆栈顺序。例如，设计者可能会生成：

```
private void InitializeComponent()
{
            //...
            this.Controls.Add(this.dockTop); 
            this.Controls.Add(this.dockTop2); 
```

其中 dockTop 和 dockTop2 的类型`Panel`为`Dock = DockStyle.Top`. 这导致 dockTop2 位于`Form`. 如果我想`dockTop2`在表单的顶部，那么我必须修改设计器文件（我们不应该这样做，因为更改可能会被覆盖）。

那么，如何设置对接的顺序呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:52:04.863

顺序不是设计师定的，是你定的。最初按您添加控件的顺序。您可以通过右键单击控件并选择置于前面或置于底层来更改顺序。使用 View + Other Windows + Document Outline 对订单进行细粒度控制。您可以在列表中拖放一个控件来移动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:44:02.627

据我了解，操作包含多个停靠控件的表单的标准方法是**剪切**面板、组框等，然后按优先顺序将它们**粘贴**回去。

# image - 如何从图像文件中选择图标

> ID：14159193
> 
> 赞同：1
> 
> 时间：2013-01-04T14:40:43.637
> 
> 标签：image, file, icons, extract

基本上，在许多 Web 框架和模板（例如 jquery UI）中，它们提供了一个图像文件，其中包含框架中使用的所有图标。我需要的是从这个图像文件中选择特定的图标（框架将它用于自己的小部件），怎么做？我知道将图标放在单个图像文件中的好处，但不知道检索它们的技术。

![在此处输入图像描述](../Images/ce8c36d0e2113cf510bcf658b9eece0e.png)

# python - python google api获取具体信息

> ID：14159195
> 
> 赞同：0
> 
> 时间：2013-01-04T14:40:49.597
> 
> 标签：python, api, search, unicode

```
#! /usr/bin/python
import pprint

from apiclient.discovery import build

def main():
  service = build("customsearch", "v1",                          
  developerKey="<mykey>")

  res = service.cse().list(
  q='the.hobbit.2012', 
  cx='<the other key>',
 ).execute()
 pprint.pprint(res)
if __name__ == '__main__':
main() 
```

是我运行的代码吗，这是我得到的结果：

```
{u'context': {u'title': u'IMDB Search Engine'},
 u'items': [{u'cacheId': u'kzgitw0HPeAJ',
             u'displayLink': u'www.imdb.com',
             u'formattedUrl': u'www.imdb.com/title/tt0903624/',
             u'htmlFormattedUrl': u'www.imdb.com/title/tt0903624/',
             u'htmlSnippet': u'Directed by Peter Jackson. With Martin Freeman, Ian     McKellen, Richard Armitage<br>  , Andy Serkis. A younger and more reluctant <b>Hobbit</b>,     Bilbo Baggins, sets out on <b>...</b>',
             u'htmlTitle': u'<b>The Hobbit</b>: An Unexpected Journey (<b>2012</b>) -     IMDb',    
             u'kind': u'customsearch#result',
             u'link': u'http://www.imdb.com/title/tt0903624/',
             u'pagemap': {u'aggregaterating': [{u'bestrating': u'10',
                                                u'ratingcount': u'157,307',
                                                u'ratingvalue': u'8.4',
                                                u'reviewcount': u'855'}], 
```

现在我的问题是，如果我想从 u'formattedUrl' 获取信息，我想我可以做到

```
urlinfo = res['item']['url']['formattedUrl'] 
```

就像我会用例如 Objconfig 来完成它。但这行不通。那么如何获取特定信息呢？有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:32:18.713

[来自 Google API Client 文档](https://developers.google.com/api-client-library/python/start/get_started?hl=en)：“响应是从 JSON 响应构建的 Python 对象......”

的值`items`是一个数组，因此您需要指定要检索的元素的 id：

```
urlinfo = res['items'][0]['formattedUrl'] 
```

# string - 如何在 MVC3 中获取模型属性名称的字符串表示形式？

> ID：14159200
> 
> 赞同：0
> 
> 时间：2013-01-04T14:40:59.623
> 
> 标签：string, asp.net-mvc-3, class, variables, model

我有以下模型：

```
Public Class MyModel

    Public Property MyModelId As Integer
    Public Property Description As String
    Public Property AnotherProperty As String

End Class 
```

有没有一种方法可以将模型的属性名称作为字符串表示形式获取，如下面的代码？

```
Dim propertyName as String = GetPropertyNameAsStringMethod(MyModel.Description) 
```

所以 propertyName 变量的值是“描述”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:52:19.793

检查此 SO 线程上的 Darin Dimitrov 的[答案-](https://stackoverflow.com/a/4657360/770710) [Reflection - get property name](https://stackoverflow.com/questions/4657311/reflection-get-property-name)。

```
class Foo
{
    public string Bar { get; set; }
}

class Program
{
    static void Main()
    {
        var result = Get<Foo, string>(x => x.Bar);
        Console.WriteLine(result);
    }

    static string Get<T, TResult>(Expression<Func<T, TResult>> expression)
    {
        var me = expression.Body as MemberExpression;
        if (me != null)
        {
            return me.Member.Name;
        }
        return null;
    }
} 
```

希望这有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:51:25.667

这是一个可用于任何属性的辅助扩展方法：

```
public static class ReflectionExtensions
{
    public static string PropertyName<T>(this T owner, 
        Expression<Func<T, object>> expression) where T : class
    {
        if (owner == null) throw new ArgumentNullException("owner");
        var memberExpression = (MemberExpression)expression.Body;
        return memberExpression.Member.Name;
    }

} 
```

但是，这仅适用于类的实例。您可以编写一个类似的扩展方法，直接对类型进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:53:00.340

你需要使用反射来做到这一点。

已经有很多关于堆栈溢出的帖子，如下所示：

[如何通过反射获取当前属性名称？](https://stackoverflow.com/questions/1206023/how-to-get-current-property-name-via-reflection)

[反射 - 获取属性名称](https://stackoverflow.com/questions/4657311/reflection-get-property-name)

[使用反射获取属性的字符串名称](https://stackoverflow.com/questions/3661824/get-string-name-of-property-using-reflection)

[反射 - 获取属性名称](https://stackoverflow.com/questions/4657311/reflection-get-property-name)

我相信答案会是这样的：

```
 string prop = "name"; 
 PropertyInfo pi = myObject.GetType().GetProperty(prop); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:54:42.977

创建一个扩展方法，然后在需要的地方使用它。

```
Private Shared Function GetPropertyName(Of T)(exp As Expression(Of Func(Of T))) As String
    Return (DirectCast(exp.Body, MemberExpression).Member).Name
End Function 
```

看看[这篇](https://stackoverflow.com/questions/4657311/reflection-get-property-name)文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:15:46.637

我已经解决了这个问题，编辑了一点@NiranjanKala 的源示例，

像这样转换vb.Net中的代码

```
<System.Runtime.CompilerServices.Extension()> _
Public Function GetPropertyName(Of T, TResult)(expression As Expression(Of Func(Of T, TResult))) As String
    Dim [me] = TryCast(expression.Body, MemberExpression)
    If [me] IsNot Nothing Then
        Return [me].Member.Name
    End If
    Return Nothing
End Function 
```

然后我可以像这样调用分机

```
Dim propertyName as String = GetPropertyName(Of MyModel, String)(Function(x) x.Description) 
```

然后 propertyName 变量将“描述”作为字符串值。

# javascript - 返回 false 后确认对话框不起作用

> ID：14159209
> 
> 赞同：1
> 
> 时间：2013-01-04T14:41:43.557
> 
> 标签：javascript, preventdefault

我有一个基本的 javascript 确认对话框来确认用户是否要继续执行操作。如果用户只需单击“确定”或“取消”，对话框就会正常工作。但是，如果用户单击取消，然后重新触发对话框，然后单击确定，则不会提交表单。

我在下面包含了我的代码，当我在这里做什么时，有没有更好的方法来处理这个问题？

```
$("#myButton").click(function (event) {
    var result = confirm("Are you sure?");
    if (result) {
        return true;
    } else {
        return false;
    }
}); 
```

请注意，我也尝试`event.preventDefault`过代替`return false`并且看到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:45:55.650

如果您尝试确认表单提交，请尝试此操作

```
$("form").submit(function () {
    return confirm("Are you sure?");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:49:22.227

现在我可能会得到你想要实现的目标。只需将事件绑定到您的表单提交处理程序，而不是单击按钮。如果用户使用他的键盘等发送表单，这也会触发。

```
<form id="wohoo" action="/somewhere">
    <input />
    <input type="submit" value="send me"/>
</form>​

$("#wohoo").submit(function () {
    var result = confirm("Are you sure?");

    return result;
});​ 
```

[http://jsfiddle.net/2tSbJ/](http://jsfiddle.net/2tSbJ/)

# .net - ServiceController.ExecuteCommand：如何取回数据

> ID：14159211
> 
> 赞同：2
> 
> 时间：2013-01-04T14:41:50.980
> 
> 标签：.net, windows-services, servicecontroller

在 .NET 中，该类允许您使用该方法`ServiceController`向服务发送自定义命令。`ExecuteCommand`

我希望能够查询服务的状态（状态的自定义概念，而不是“开始/停止”种类）。我希望使用类似的方法调用服务`ExecuteCommand`并获得指示状态的返回值会很简单。有什么东西`ServiceController`可以让我做到这一点吗？

假设不是，我想我必须使用某种外部进程间通信技术（例如，服务将其状态写入数据库或消息队列）。为了简单起见，您会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:52:54.670

肯定是没有办法进去的`ServiceController`。离开 WCF 大概是最好的选择。教程在这里：[http ://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T23:04:36.073

Windows 提供了许多进程间通信 (IPC) 方法。@David 是对的，ServiceControllers 无法执行此操作，他很高兴将您指向 WCF，它是带有 IPC 功能的现成基础。使用 IPC，您可以在 ExecuteCommand 调用之后协调您的服务和应用程序。

如果您不希望像 WCF 那样走得那么远，您可以实现一个管道（匿名管道似乎适合这种情况）或使用 Windows 套接字。

在 IPC 上查看来自 MSDN 的[此链接](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx#base.using_the_clipboard_for_ipc)，它是您可以采取的多种途径的绝佳起点。

# java - Android 搜索属性中的 SAX 解析

> ID：14159217
> 
> 赞同：0
> 
> 时间：2013-01-04T14:42:14.393
> 
> 标签：java, android, xml-parsing, sax, android-xml

我正在尝试使用 SAX 识别属性。我的XML如下

```
<DAY VALUE="1">
    <BREAKFAST>0700</BREAKFAST>
    <LUNCH>1200</LUNCH>
    <DINNER>1900</DINNER>
</DAY> 
<DAY VALUE="2">
    <BREAKFAST>0730</BREAKFAST>
    <LUNCH>1230</LUNCH>
    <DINNER>1930</DINNER>
</DAY> 
```

我的 startElement 代码如下：

```
@Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        elementOn = true;
        if (localName.equals("DAY"))
        {
            data = new XMLGettersSetters();
        } 
    } 
```

上面的代码将找到第一个元素`"DAY"`并给我内容，但不给我剩余的 DAY 元素。

有没有办法可以搜索属性？我的目标是获取当月的当天，然后在 xml 中搜索这一天。例如，如果今天是第二天，那么我想在 XML 文件中搜索`DAY VALUE="2"`并获取子元素

==编辑

如果我将我的 XML 修改为

```
<DAY_1>
        <BREAKFAST>0700</BREAKFAST>
        <LUNCH>1200</LUNCH>
        <DINNER>1900</DINNER>
    </DAY_1> 
    <DAY_2>
        <BREAKFAST>0730</BREAKFAST>
        <LUNCH>1230</LUNCH>
        <DINNER>1930</DINNER>
    </DAY_2> 
```

和代码：

```
 if (localName.equals("DAY_2"))
        {
            data = new XMLGettersSetters();
        } 
```

`NullPointerException`但是，如果类未在 logcat 中突出显示，我会得到一个名称。它指的是另一个类，但我注释掉了那些行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:46:04.113

你可以得到这样的属性值：

```
 if (localName.equals("DAY")){
    String day = "";
    if (attributes.getValue("VALUE") != null) {
        day = attributes.getValue("VALUE");
    }
                //data = new XMLGettersSetters();
    } 
```

# c# - 通过单击按钮切换网格

> ID：14159219
> 
> 赞同：1
> 
> 时间：2013-01-04T14:42:26.390
> 
> 标签：c#, wpf, button, grid, click

我试图`Grid`通过单击 a 来折叠 a `Button`。这就是我`Button`在 xaml 中的表示方式：

```
 <Button Grid.Column="1" Grid.RowSpan="3" Width="25" Content="&lt;&lt;" Click="OnClicked" x:Name="btnCollapse"></Button> 
```

我想`Grid`在单击此时折叠 a `Button`（类似于停靠窗口）并`Grid`在单击时`Button`再次返回。这就是我在后面的代码中这样做的方式：

```
private bool clicked;
private void OnClicked(object sender, RoutedEventArgs e)
{
    clicked             = !clicked;
    //leftPane is my grid
    leftPane.Visibility = clicked ? Visibility.Collapsed:Visibility.Visible;
    btnCollapse.Content = clicked ? ">>" : "<<";
} 
```

这很好用，我的问题是我如何才能纯粹在 xaml 中而不是在后面的代码中表示这个逻辑？

我的布局：

```
<Grid>
<Grid/>
<GridSplitter/>
</Grid>
<Button/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:54:19.130

您应该将您的`Visibility`依赖属性绑定到（应该实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)`Grid` ）中的布尔属性并使用[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)：`DataContext`

```
private bool _isGridVisible;
public bool IsGridVisible
{
    get { return _isGridVisible; }
    set
    {
        if (_isGridVisible != value)
            return;
        _isGridVisible = value;
        OnPropertyChanged("IsGridVisible"); // This can sometimes be named RaisePropertyChanged
    }
}

private void OnClick(object sender, RoutedEventArgs e)
{
    IsGridVisible = !IsGridVisible;
} 
```

在 XAML 中：

```
<Grid Visibility="{Binding IsGridVisible, Converter={StaticResource BooleanToVisibilityConverter}">
    <!-- stuff -->
</Grid> 
```

***如何设置按钮内容：***

*值转换器：*

```
public class MyBooleanToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return (bool)value ? ">>" : "<<";
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

<Button Click="OnClick" Content="{Binding IsGridVisible, Converter={StaticResource MyBooleanToStringConverter}}"/> 
```

*风格：*

```
<Button Click="OnClick">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Content" Value="<<"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsGridVisible}" Value="False">
            <Setter Property="Content" Value=">>"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

# asp.net - 进入添加模式时使用默认值填充 ASP.Net DetailsView 文本框

> ID：14159223
> 
> 赞同：0
> 
> 时间：2013-01-04T14:42:39.090
> 
> 标签：asp.net, vb.net, code-behind, default-value, populate

当用户从 VB.Net 代码隐藏文件进入 ASP.Net DetailsView 上的“添加”模式时，我们希望使用今天的日期作为默认值填充文本框。你能告诉我如何让它填充吗？

这是我们希望填充的文本框的标记：

```
<asp:TemplateField HeaderText="Late Time Arrived At School:" SortExpression="LateTimeArrivedAtSchool">

    <EditItemTemplate>
        <asp:TextBox ID="TextBoxLateTimeArrivedAtSchool" runat="server" 
            Text='<%# Bind("LateTimeArrivedAtSchool", "{0:hh:mm}") %>'></asp:TextBox>
    </EditItemTemplate>

    <InsertItemTemplate>
        <asp:TextBox ID="TextBoxLateTimeArrivedAtSchool" runat="server" 
            Text='<%# Bind("LateTimeArrivedAtSchool", "{0:hh:mm}") %>'></asp:TextBox>
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:Label ID="LabelLateTimeArrivedAtSchool" runat="server" 
            Text='<%# Bind("LateTimeArrivedAtSchool", "{0:hh:mm}") %>'></asp:Label>
    </ItemTemplate>

    <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

我们还设置了 OnItemCommand ，如下标记所示：

```
<asp:DetailsView 
    ID="DetailsView" 
    runat="server" 
    AutoGenerateRows="False" 
    Height="50px" 
    Width="207px" 
    DataSourceID="SqlDataSourceDetails"
    DataKeyNames="ID"
    OnItemCommand="DetailsViewDetails_ItemCommand">

    <Fields> 
```

代码隐藏文件具有以下编码：

```
Protected Sub DetailsViewDetails_ItemCommand(sender As Object, e As System.Web.UI.WebControls.DetailsViewCommandEventArgs)

    Select Case e.CommandName

        Case "Add"

        Case "Edit"
            ButtonAddNewAttendance.Enabled = False

        Case "Delete"

        Case "Update"
            ButtonAddNewAttendance.Enabled = True

        Case "Insert"

    End Select
End Sub 
```

我尝试在 Case -> "Add" 中键入 TextBoxLateTimeArrivedAtSchool.Text，但收到一条消息，指出未定义 TextBoxLateTimeArrivedAtSchool。我不确定为什么智能没有从标记中找到它。

我在想 Case -> "Add" 是填充文本框的正确位置，但看起来不是这样做的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:30:07.143

I think you have to find the control first. The code should be something like this:

```
Select Case e.CommandName

    Case "Add"
        Dim txtBox As TextBox
        textBox = DetailsViewDetails.FindControl("TextBoxLateTimeArrivedAtSchool")
        textBox.Text = DateTime.Now 
```

# polymorphism - 同一个具体类的多个接口

> ID：14159224
> 
> 赞同：1
> 
> 时间：2013-01-04T14:42:39.847
> 
> 标签：polymorphism, ninject

这不应该工作吗？

界面

```
public interface IConfig : ISmtpConfig, IEventConfig 
```

捆绑

```
kernel.Bind<IConfig>().To<Config>(); 
```

用法

```
public SmtpClient(ISmtpConfig config) 
```

它抱怨它找不到任何 ISmtpConfig 绑定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:52:14.080

我会把这个问题留在这里，因为如果你用谷歌搜索“混凝土”，谷歌就不会链接到 SO。你需要做

```
kernel.Bind<IConfig, IEventConfig, ISmtpConfig>() 
```

对我来说，这是多余的信息，但可能很难动态地做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:12:19.397

安德斯的答案是正确的。这里的答案是对 steven 和 anders 的评论。如果您使用约定扩展名，则有一个`BindAllInterfaces()`. 这会自动绑定类的所有接口。这是一个例子：

```
kernel.Bind( x => x
    .FromThisAssembly() // 1
    .SelectAllClasses().InNamespaceOf<IConfig>() // 2
    .BindAllInterfaces() // 3
    .Configure(b => b.InSingletonScope())); // 4 
```

# ajax - 页面刷新时html5 pushstate内部服务报错，或者查看源码

> ID：14159225
> 
> 赞同：0
> 
> 时间：2013-01-04T14:42:43.630
> 
> 标签：ajax, html, pushstate, internal-server-error

我正在尝试复制此处找到的教程示例[http://html5.gingerhost.com/](http://html5.gingerhost.com/)但每当我尝试刷新页面时，它都会将我带到“500 内部服务器错误”。同样，当我单击链接并且页面加载其他内容时，当我查看源代码时，它只显示我的另一个“500 内部服务器错误”

请帮忙！

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:47:12.670

这是因为服务器也需要能够理解 URL。例如，您的页面位于`http://example.com`. 您使用链接的点击事件来制作它`http://example.com/more-info`。但是如果`http://example.com/more-info`服务器上不存在，刷新页面将无法正常工作，因为浏览器不会知道它`/more-info`实际上是索引页面的一部分。因此 pushstate 仅在客户端和服务器都识别新 URL 时才有效。

# php - 在浏览器中工作，但不能通过 CRON。为什么？

> ID：14159233
> 
> 赞同：0
> 
> 时间：2013-01-04T14:43:09.917
> 
> 标签：php, jquery, cron

我有这个 jquery 代码：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
setInterval(
function (){
$.get('update.php',function (){
});
},1000
);
</script> 
```

它每秒调用我的 update.php 文件来更新数据库。当我在浏览器上手动运行它时，这没有任何问题，但它不能通过 CRON 运行。我能做些什么来让它通过 CRON 工作工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:56:40.530

在您的 CRONTAB 中，您需要运行 update.php。Javascript/jQuery 在客户端运行。设置 CRON 作业时，您正在服务器上运行命令，在本例中为 PHP 脚本。因此，只有 PHP 会运行。

CRONTAB 中的示例条目：

```
*/1 * * * * php /path/to/update.php 
```

这将每**分钟**运行一次命令*php*，并将*update.php*作为参数传递。

 ***有关 CRON 格式的更多信息：[http ://www.nncron.ru/help/EN/working/cron-format.htm](http://www.nncron.ru/help/EN/working/cron-format.htm)***

# asp.net - 从 asp.net 调用存储过程不起作用

> ID：14159236
> 
> 赞同：0
> 
> 时间：2013-01-04T14:43:12.450
> 
> 标签：asp.net, sql-server-2008, stored-procedures, ado.net, sql-update

我写了一个存储过程来更新`PAID`列`tblUser`，并且该存储过程完美地工作，

代码：

```
 @buyer_email varchar(50),
    @payment bit
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
       SET NOCOUNT ON;

    update tblUser set paid=@payment where email = @buyer_email
END 
```

但是当我从我的 asp.net 应用程序调用它时，它不会更新`Paid`列，即使我在我的 asp.net 代码中尝试简单的更新语句，但这也不会更新列。

```
String userEmail_send = (Convert.ToString(Request.QueryString["emailAdmin"]));
String conString = "Data Source=COSANOSTRA; MultipleActiveResultSets=true; Initial   Catalog=Waleed_orsfinal;Integrated Security=True";

try
{
         con.Open();

        if (userEmail_get.Replace("'", string.Empty) == userEmail_send.Replace("''", string.Empty))
        {
            //String query1 = "update tblUser Set paid=1 where email='" + userEmail_send + "' ";
            SqlCommand sqlcom1 = new SqlCommand("submitPaypalPayment", con);
            sqlcom1.CommandType = CommandType.StoredProcedure;
            sqlcom1.Parameters.Add("@buyer_email", SqlDbType.VarChar).Value = userEmail_send;
            sqlcom1.Parameters.Add("@payment", SqlDbType.Bit).Value= 1 ;
            sqlcom1.ExecuteScalar();

            hdr_msg_success.InnerText = "Congrats, You have paid successfully. Wait for an approval by an admin ";
            Response.Write("<br/>"+" "+ "Matched=" +userEmail_send.Replace("''","'"));
   }
   else
   {
            hdr_msg_success.InnerText = "Something went wrong in matching Emails , Please confirm your Email";               
   }
}
catch (Exception exc)
{
        Response.Write(exc.Message);
}
finally
{
        con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:00:10.847

失败可能是由于您的连接字符串安全上下文。假设您在 IIS 模拟下运行当前 Web 用户不是默认行为。

通过在您的连接字符串中指定`Integrated Security=True`，您是在告诉 SQL Server 在用户尝试访问数据库时接受当前的 Windows 上下文。在 IIS 下运行时，这将是 IIS 应用程序池帐户，而不是您自己的帐户。

尝试创建 SQL Server 用户名和密码并在连接字符串中指定它们，而不是使用 Web 应用程序的集成安全性。您也可以设置应用程序池 Windows 标识，但维护和迁移通常更麻烦……还有允许模拟网络用户的选项，但这更加笨拙。

顺便说一句，这里还有一些需要考虑的事情......

1.  将您的连接字符串存储在配置文件中，而不是硬编码（我知道这可能只是测试代码，但如果不是......）
2.  考虑在您的用例中与您的 ADO.net 中的存储过程进行交互，并使用更多类似的东西。

    ```
    using (SqlCommand sqlcom1 = new SqlCommand("dbo.submitPaypalPayment", con)) 
    {
       sqlcom1.CommandType = CommandType.StoredProcedure;

       sqlcom1.Parameters.Add("@buyer_email", SqlDbType.VarChar) { Value = userEmail_send };
       sqlcom1.Parameters.Add("@payment", SqlDbType.Bit) { Value= 1 };

       sqlcom1.ExecuteNonQuery();

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:22:18.587

根据我在此处阅读的内容，我似乎未将值正确设置为 Request 对象中的变量。

您是否尝试过设置断点并检查从该语句 [ `String userEmail_send = (Convert.ToString(Request.QueryString["emailAdmin"]));`] 中为 userEmail_send 变量设置了什么值？

可能是它没有为该变量设置正确的值。

在此行设置断点`sqlcom1.ExecuteScalar();`并检查参数值。

您可以按序号位置或参数名称执行此操作，如下所示：按序号位置`sqlcom1.Parameters[0].Value`或按名称`sqlcom1.Parameters["@buyer_email"].Value`

对你的@payment 参数也做同样的事情。记住它的序数位置是 1。

希望，这会有所帮助......祝你好运......

# css - CSS 样式未应用于动态 HTML (ASP.NET MVC3)

> ID：14159239
> 
> 赞同：0
> 
> 时间：2013-01-04T14:43:23.007
> 
> 标签：css, asp.net-mvc-3, slickgrid

我在控制器中生成了一些 HTML，并将其传递给要添加到“SlickGrid”的视图。我遇到的问题是，应该应用的 CSS 样式未应用于该 HTML。它发生在几个例子中，都有相同的症状。

显示的 HTML 如下（取自 Chrome 的检查器工具）：

```
 <div id="pba-progress-688-5" class="checkpointLegend clickable A tipper" title="Approved&lt;br&gt;&lt;i&gt;Composition Table&lt;/i&gt;&lt;br&gt;Click to go to this checkpoint.">✓&lt;/div> 
```

可点击的类、A、Tipper 没有被应用，还有一些 checkpointLegend 的东西也没有被应用。

checkPointLegend 看起来像这样：

```
.checkpointLegend {
    text-align: center;
    vertical-align: middle;
    font-weight: bold;
    cursor: pointer;
}
.checkpointLegend div {
    border: 1px solid #CCC;
    border-radius: 4px 4px 4px 4px;
    float: left;
    height: 14px;
    margin: 2px;
    width: 12px;
    font-size: 10px;
    text-align: center;
    line-height: 14px;
    cursor: pointer;
} 
```

正在应用.checkpointLegend 部分，*但未应用 DIV 部分。*

关于为什么这些类在呈现时没有应用于 HTML 的任何想法？

以供参考：

*   我正在使用 SlickGrid 的一个分支（[https://github.com/andrewchilds/SlickGrid](https://github.com/andrewchilds/SlickGrid)）
*   CSS 在 WEBGRID 中工作正常（所以我知道它可以工作），但是 webgrid 太慢了，无法处理我扔给它的数据量。
*   控制器生成 HTML 并通过 ajax 调用将其传递给视图。html 直接转储到 slickgrid 中的单元格中。

我很乐意澄清任何需要澄清的内容，或者在需要时发布更多代码。

任何想法/指针/建议/解决方案都将不胜感激（我已经把我的头从办公桌上敲了 2 天......）

# kdb - 表中的项目是否有可能成为 Q 中的列表

> ID：14159246
> 
> 赞同：3
> 
> 时间：2013-01-04T14:44:00.027
> 
> 标签：kdb

我想知道是否可以将表格中的项目设为列表？我试图做类似的事情

```
table:([] name:`a`b`c; food:`apple`peach;`meat`vegg;`cat`dog) 
```

但它没有用。反正我能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:03:44.120

您绝对可以将列表作为表格中的项目。事实上，您甚至可以拥有嵌套表，因为表的行为类似于字典列表。

```
q)table:([] name:`a`b`c; food:(`apple`peach;`meat`vegg;`cat`dog))
q)table
name food
----------------
a    apple peach
b    meat  vegg
c    cat   dog
q)nested:([] t:(table;table))
q)nested
t
-------------------------------------------------------
+`name`food!(`a`b`c;(`apple`peach;`meat`vegg;`cat`dog))
+`name`food!(`a`b`c;(`apple`peach;`meat`vegg;`cat`dog)) 
```

如果您习惯于 Java 或 Python 之类的东西，q 和 KDB 的公共学习资源可能有点弱，但[KX wiki](http://code.kx.com)是一个很好的起点。

# scala - scala中的LinkedList vs MutableList

> ID：14159247
> 
> 赞同：0
> 
> 时间：2013-01-04T14:44:01.243
> 
> 标签：scala, pointers, data-structures, scala-collections

下面，对这些数据结构的两种描述：（来自*Programming in scala* book）

> **链表**
> 
> 链表是由与下一个指针链接的节点组成的可变序列。在大多数语言中，null 将被选为空链表。这不适用于 Scala 集合，因为即使是空序列也必须支持所有序列方法。特别是 LinkedList.empty.isEmpty 应该返回 true，而不是抛出 NullPointerException。空链表以特殊方式编码：它们的下一个字段指向节点本身。像它们的不可变表亲一样，链表最好按顺序操作。此外，链表可以很容易地将一个元素或链表插入另一个链表。
> 
> **可变列表**
> 
> MutableList 由**一个链表**和一个指向该链表终端空节点的指针组成。这使得 list append 成为一个恒定时间的操作，因为它避免了遍历列表来寻找它的终端节点。MutableList 目前是 Scala 中 mutable.LinearSeq 的标准实现。

主要区别是在`MutableList`类型中添加了最后一个元素的指针。

问题是：什么可能是使用更喜欢`LinkedList`而不是`MutableList`？严格来说（尽管有新的指针）不是`MutableList`等效的，甚至更实用的是只增加了一点使用的内存（最后一个元素的指针）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:54:17.383

由于`MutableList`包装了 a `LinkedList`，大多数操作都涉及一个额外的间接步骤。请注意，包装意味着，它包含 a 的内部变量`LinkedList`（[实际上是两个，因为高效的最后一个元素查找](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/mutable/MutableList.scala#L42)）。所以链表是实现可变链表的必要组成部分。

如果您不需要预先添加或查找最后一个元素，那么您可以只使用`LinkedList`. Scala 为您提供了大量的数据结构选择，因此最好首先列出您需要的所有操作（以及它们的首选效率），然后选择最合适的。

通常，我建议您使用[不可变结构](http://docs.scala-lang.org/overviews/collections/concrete-immutable-collection-classes.html)，它们通常与可变结构一样高效，并且不会产生并发问题。

# java - 使用 Java Scanner 读取长类型 - 字符限制？

> ID：14159249
> 
> 赞同：0
> 
> 时间：2013-01-04T14:44:06.593
> 
> 标签：java, java.util.scanner, long-integer

我正在尝试使用 Java Scanner 从文本文件 (File.txt) 中读取 20 位长。

```
java.util.Scanner filereader = new java.util.Scanner(new File("File.txt"));
longNumber = (long) filereader.nextLong(); 
```

这将返回以下错误：

```
Exception in thread "main" java.util.InputMismatchException: For input string: "37107287533902102798"
at java.util.Scanner.nextLong(Scanner.java:2271)
at java.util.Scanner.nextLong(Scanner.java:2225)
at scanner.Scanner.main(Scanner.java:14) 
```

当我将数字的长度减少到 19 位或更少时，它运行得很好。有人可以解释我如何将其用于 20 位以上的数字吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:45:38.280

`long`不能存储无限长的数字。它只上升到`(2^63)-1`。见这里：（[链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)）。

> long 数据类型是一个 64 位有符号二进制补码整数。它的最小值为-9,223,372,036,854,775,808，最大值为9,223,372,036,854,775,807（含）。当您需要比 int 提供的值范围更广的值时，请使用此数据类型。

要将其用于更多数字，您必须使用`BigInteger`（[文档链接](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)）。

```
java.util.Scanner filereader = new java.util.Scanner(new File("File.txt"));
bigInt = new BigInteger(filereader.nextLine()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:45:40.747

37107287533902102798 显然超出了远程范围，因此您会遇到异常。

您应该使用 BigInteger 来读取这些值。

```
BigInteger in = new BigInteger("37107287533902102798"); 
```

# ldap - LDAP 错误搜索过滤器

> ID：14159250
> 
> 赞同：2
> 
> 时间：2013-01-04T14:44:07.157
> 
> 标签：ldap

我正在使用一个名为 LDAP Account Manager 的开源软件来管理我公司的 ldap 用户、组和主机。不过，我遇到了一个奇怪的问题，我希望有人能给我一个想法，与实际软件相比，LDAP 方面发生了什么。

简而言之，这就是问题所在。

1.  该软件可以找到以下后缀的所有用户：

    ou=用户,ou=帐户,dc=xxxx,dc=com

2.  当我尝试查看其中一位用户的详细信息时，我收到一条错误消息：

    错误的搜索过滤器

3.  这是奇怪的部分。当我添加一个新用户时，该条目会与其他用户一起以相同的后缀出现。

    ou=用户,ou=帐户,dc=xxxx,dc=com

换句话说，所有用户（LDAP 树中已经存在的旧用户和我添加的新用户都存在于同一个位置）。

1.  我可以在以下位置导航到新用户：

    CN=用户，测试，ou=用户，ou=账户，dc=xxxxx，dc=com

但我无法导航到此位置的任何现有用户（我收到错误搜索过滤器错误）：

```
CN=Fakename, John,ou=Users,ou=Accounts,dc=xxxxx,dc=com 
```

这似乎不一致，我正在尝试集思广益可能发生的事情。用户存在于同一位置，但在访问某些用户时出现错误，但在访问其他用户时却没有。这可能是权限问题，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:46:33.327

听起来很像您的软件`,`在创建命令或搜索过滤器中编码（逗号）分隔名称和姓氏的问题。

# asp.net - ASP.net 实体框架行返回重复

> ID：14159252
> 
> 赞同：1
> 
> 时间：2013-01-04T14:44:12.210
> 
> 标签：asp.net, entity-framework, sql-server-2008-r2, duplicate-data

我正在使用 linq 到实体从这两个表中获取数据，表之间存在基于主外键的关系，结果集即将到来，但每一行都重复多次，但是在 Db 中没有重复的行。不明白如何解决这个问题。

这是一段代码：

```
StringBuilder sb = new StringBuilder();
        string text = txtBoxSearch.Text;
        OLSContainer ols = new OLSContainer();
        var result = from tex in ols.COURSEs
                     from another in ols.UNITs
                     where tex.courseName.Contains(text) || tex.description.Contains(text) || another.unitName.Contains(text)
                     select new { tex,another };

        foreach (var cours in result)
        {
            sb.AppendLine("<h2 id='" + cours.tex.courseID + "'><a href='admin.aspx?id='" + cours.tex.courseID + "''>" + cours.tex.courseName + "</a></h2>");
        }

        foreach (var cours in result)
        {
            sb.AppendLine("<h2 id='" + cours.another.unitID + "'><a href='admin.aspx?id='" + cours.another.unitID + "''>" + cours.another.unitName + "</a></h2>");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:24:54.873

问题是这样的：

```
var result = from tex in ols.COURSEs
             from another in ols.UNITs 
```

这是一个交叉连接。它使每门课程与每个单元相匹配。它不使用任何 FK/PK，因为此查询中未使用任何关系（导航属性）。要使用关系，您必须将其修改为：

```
var result = from tex in ols.COURSEs
             from another in tex.SomeNavigationProperty  // tex 
```

# visual-studio-2010 - 为什么一半的分析样本是“未知帧”

> ID：14159256
> 
> 赞同：4
> 
> 时间：2013-01-04T14:44:41.590
> 
> 标签：visual-studio-2010, profiling

我正在尝试通过以下方式分析我们的应用程序：

*   无优化编译
*   将 c++ 代码与 /profile 和调试信息链接。
*   做命令行分析舞蹈：

    ```
    vsperfcmd /start:sample /output:profile
    vsperfcmd /globalon
    vsperfcmd /launch:application.exe /timer:50000 
    ```

分析工作，但由于某种原因，大约 50% 的样本没有被识别：

```
Function Name        Inclusive Samples    Exclusive Samples
Unknown Frame(s)     55.01%               47.51%  <-- WHAT IS THIS?
_wWinMainCRTStartup  54.79%               0.00%
[mfc100u.dll]        47.95%               1.56%
__tmainCRTStartup    42.75%               0.00% 
```

我猜这不是**一个**无法识别的功能，而是它将所有未识别的功能组合成一个“功能”。这使得它很难推理，因为它将被许多函数调用，并且类似地调用许多函数。他们中的大多数是无关的。

On 会认为它至少应该能够弄清楚样本来自哪个模块？

# perl - 为什么在释放大数组时 Perl 不会垃圾收集内存？

> ID：14159258
> 
> 赞同：15
> 
> 时间：2013-01-04T14:44:44.737
> 
> 标签：perl, memory-management

我知道 Perl 使用基于引用计数的垃圾收集。当变量超出范围时，引用计数减少，如果 REFcount 变为 0，则内存被释放。但是当我跟踪一个如下所示的小示例时，我无法找到正在发生的取消分配。

```
print "start.."; 
```

![启动状态下的内存使用情况](../Images/42456b32a28b9abfbeb6668bea233ea0.png)

```
sub func
{
    my $length = 8*1024*1024;
    my $array = [1..$length]; 
```

![分配后的内存使用](../Images/f06337c73c8534813fdaf6812d9652c6.png)

```
}

func();

print "done.."; 
```

![垃圾收集阶段的内存使用情况](../Images/ef014b576a9dabbb0d2625ecdd5f02f0.png)

在这个例子中，当程序启动时，Perl.exe 占用了大约 3 MB 的物理内存。在 func() 调用期间分配后，Perl.exe 占用约 370 MB 内存。但是在 func() 调用之后，分配的内存应该被垃圾回收。为什么没有完成？

期待您的回复。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-04T14:54:30.097

根据[perlfaq3中的问题“](http://learn.perl.org/faq/perlfaq3.html)[如何释放数组或哈希以使我的程序缩小？](http://learn.perl.org/faq/perlfaq3.html#How-can-I-free-an-array-or-hash-so-my-program-shrinks-) ” ：

> 你通常不能。分配给词法（即 my() 变量）的内存即使超出范围也无法回收或重用。它被保留以防变量返回范围。分配给全局变量的内存可以通过使用 undef() 和/或 delete() 重用（在您的程序中）。
> 
> 在大多数操作系统上，分配给程序的内存永远不会归还给系统。这就是为什么长时间运行的程序有时会重新执行自己的原因。一些操作系统（特别是使用 mmap(2) 分配大块内存的系统）可以回收不再使用的内存，但在此类系统上，必须配置和编译 perl 以使用操作系统的 malloc，而不是 perl。
> 
> 一般来说，内存分配和解除分配在 Perl 中不是您可以或不应该过多担心的事情。
> 
> 另请参阅[如何使我的 Perl 程序占用更少的内存？](http://learn.perl.org/faq/perlfaq3.html#How-can-I-make-my-Perl-program-take-less-memory)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-04T15:02:44.187

Perl 可能已将内存标记为已释放，但这并不一定意味着它已被[释放回操作系统](http://www.perlmonks.org/?node_id=333464)。您的 Perl 程序可能会重用该内存。再次尝试运行`func`。您不应该看到使用的内存量增加。

您可能想设置环境变量[`PERL_DESTRUCT_LEVEL`](http://perldoc.perl.org/perlhacktips.html#PERL_DESTRUCT_LEVEL)，看看是否有什么不同，但我对此表示怀疑。

[垃圾收集](http://www.jwz.org/doc/gc.html)不是 Perl 的最大优势之一。

# jquery - 如何查找文本是否在单行文本框中突出显示（使用鼠标或键盘）

> ID：14159259
> 
> 赞同：1
> 
> 时间：2013-01-04T14:44:44.813
> 
> 标签：jquery, jquery-ui

如果文本在单行文本框中突出显示（使用鼠标或键盘），我们如何使用 jquery 找到？

假设文本框是：

```
<input id="input1" type="text"/> 
```

我正在尝试使用 id-attribute 来做到这一点。请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:48:24.683

这是与您想要的类似但需要一些更改的内容：

[http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)

**演示：**

[http://mark.koli.ch/2009/09/05/get-selected-text-javascript.html](http://mark.koli.ch/2009/09/05/get-selected-text-javascript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:34:12.287

Stackoverflow 已经有一个帖子可以回答您的问题。

请参阅帖子[jQuery：获取突出显示的文本](https://stackoverflow.com/q/5379120/1853864)

# svg - 如何在 SVG 中使用我自己的混合公式？

> ID：14159266
> 
> 赞同：2
> 
> 时间：2013-01-04T14:44:59.670
> 
> 标签：svg, alphablending, blending, svg-filters

我正在使用 SVG。

标准混合模式：屏幕、变亮、叠加、差异。等等……不是我需要的。

我已经为我需要使用的另一种混合模式设计了一个公式，它不是任何标准模式，但不知道如何将它实现到我的 SVG 文件中以使其工作。

例如，我是否只是在过滤器中执行 feBlend mode="Cm = B(Cb, Cs)" ？

具体来说，我想将上面图层的亮度应用到下面图层的 alpha 通道。

一定有办法的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:36:38.573

您无法在 SVG 1.1 中提供自定义混合公式 - 您被内置插件卡住了。但是，您可以使用具有多个 feBlends 和 feComposite 算术模式并结合 feColorMatrix 的复合过滤器来创建其他类型的混合。

更新：

你想做的事情不可能按照你想做的方式去做。其中一个输入完全不透明的 feBlend 操作的结果是完全不透明的结果。feBlend 使用预乘值进行颜色计算。所以，不能直接把一张图片的alpha通道，转移到另一张图片的alpha通道。但是，如果您尝试将图像与其背景混合，这就是您尝试调整 Alpha 通道的原因，您可以通过使用背景图像作为混合过滤器的一部分来实现您正在寻找的效果（但这仅在今天的 IE10 和 Opera 中才有可能）。

在 CSS/SVG 混合规范“mode=Luminosity”中提出了一种[新的混合模式，](https://dvcs.w3.org/hg/FXTF/rawfile/tip/compositing/index.html#blendingluminosity)它可以满足您的需求——但这暂时不会出现在浏览器中。

# javascript - Android：从 WebView 调用 javascript

> ID：14159280
> 
> 赞同：2
> 
> 时间：2013-01-04T14:45:41.973
> 
> 标签：javascript, android, android-webview

我们正在编写适用于 Android 的应用程序。它`WebView`包含 Html5 页面。我们正在使用`loadUrl()`webview 的方法，以便将一些本机操作系统变量推送到 html，例如：

```
webview.loadUrl("javascript:myJavascriptFunc('" + myAndroidOSVar + "');"); 
```

它工作得很好。但是，如果我们在被调用时从页面输入输入`loadUrl()`，我们就会失去输入字段的焦点，即使调用的 javascript 函数只是更改了缓存上的标志。

你知道用其他方式调用 Javascript 函数`WebView`而不是`loadUrl()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:30:20.633

这是您可以避免该问题的最接近的方法：[WebView 在 loadUrl() 期间隐藏软键盘，这意味着在调用 javascript 时键盘无法保持打开状态](https://stackoverflow.com/questions/9303836/webview-hides-soft-keyboard-during-loadurl-which-means-a-keyboard-cannot-stay)

基本上，您`loadUrl`通过在本机端排队命令并每隔一段时间让 JS 桥获取命令并使用 JS`eval()`或其他东西执行来避免调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T02:53:25.137

如果您在 web 视图中有多个字段，我不确定它会如何响应，但我想出了一个解决方法来保持键盘显示：[https](https://stackoverflow.com/a/18776064/513038) ://stackoverflow.com/a/18776064/513038 。这可能值得一试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T15:03:29.683

是的，有一种方法可以将 a 添加`JavaScriptInterface`到您的 WebView 中，请参阅[本教程](http://android-er.blogspot.com/2011/10/call-javascript-inside-webview-from.html)以获取更多说明和详细信息

# .net - 有没有办法忽略可能挂起的函数调用？

> ID：14159281
> 
> 赞同：1
> 
> 时间：2013-01-04T14:45:45.153
> 
> 标签：.net, freeze

我有一个使用自动化并从运行对象表中获取对象的程序。我注意到，我很少会陷入所有自动化都停止工作的状态（我自动化 Excel、word、Visual Studio）。我正在用龙自然说话做语音命令。

有时，我最终会处于 EXCEL 挂起的状态。（在任务管理器中没有响应）。

Dragon早些时候坠毁，这可能与它有关。

对 runningObjectTable.GetObject(monikers(0), runningObjectVal) 的调用似乎挂起。

现在我不太关心 EXCEL 挂起，但我的循环遍历正在运行的对象表中所有对象的代码挂起，这会阻止我的任何语音命令在 Visual Studio 中工作。

**你有什么方法可以推荐在超时的情况下调用这个函数（可能在一个单独的线程上）？**

烦人的部分是这种情况很少发生，我没有收到崩溃或错误消息（我的所有命令都在单独的线程中运行，因此其他类型的命令继续工作）。我开始关闭 Visual Studio 窗口，有时会重新启动计算机。

只需杀死 excel 即可解决问题（如果我记得这样做的话）。

# javascript - 有什么方法可以获取警报框的来源吗？

> ID：14159283
> 
> 赞同：26
> 
> 时间：2013-01-04T14:45:52.683
> 
> 标签：javascript, webkit

我使用一些不是我编写的非常大且令人困惑的 JavaScript 文件。有时会出现警报，但我不知道它来自哪里。

您可以在所有文件中搜索警报中包含的文本，但如果该文本是动态的，它将不起作用。

有没有办法设置断点以拦截警报？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-04T14:51:42.497

在 HTML 的最顶部：

```
window.alert = function() {
    debugger;
} 
```

[`debugger`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)是调用任何可用调试功能的语句。`alert`打开开发人员工具后，无论何时调用，您都会自动命中断点。然后，您可以检查调用堆栈以准确查看调用自定义`alert`函数的内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T14:49:35.287

它可能对您有帮助，也可能没有帮助，但是您可以覆盖该`alert`函数来做任何您想做的事情。例如，您可以让它将消息记录到控制台，而不是警告框。

```
window.alert = function(msg) {
    console.log(msg);
}
alert('test'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-04T14:53:56.533

我同意 Brian Glaz 的观点，但为了获得更多详细信息（行号），您可能会尝试在发出警告并在控制台上输出错误时抛出错误。这样，控制台会将您指向调用警报函数的正确行号。

将此代码段放在文档顶部并试一试：

```
var originalAlert = window.alert;
window.alert = function(){
    try{
        throw new Error('alert was called');
    } catch(e){
      console.warn(e);
    }
    return originalAlert.apply(window, arguments);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T14:51:55.217

打开 Chrome`F12`按键并转到`Sources`。然后选择一个脚本文件`Ctrl+F`并搜索警报。您可以在任何您希望的行上放置断点

# ado.net - ADO.NET SqlCommand 和事务不更新实际的数据库表

> ID：14159284
> 
> 赞同：0
> 
> 时间：2013-01-04T14:45:52.497
> 
> 标签：ado.net

我一直在尝试将数据更新并插入到现有的数据库表中。我没有收到任何错误，但实际的表数据没有被更新。

这是我用于更新其中一行的代码：

```
 using (SqlConnection con = new SqlConnection(connection))
 {
            con.Open();

            SqlTransaction t = con.BeginTransaction(); 
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = con;
            cmd.Transaction = t;
            cmd.CommandText = "Update tblName set PersonName = 'Wes' where PersonID = 2";
            int i = cmd.ExecuteNonQuery();

            t.Commit();

            Console.WriteLine("change: "+i);
         } 
```

输出是

```
change: 1\. 
```

运行时发生更改，但实际表数据仍然相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:05:54.110

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将围绕`.mdf`文件进行复制（从输出目录复制`App_Data`到输出目录中`.\bin\debug`），并且**很可能**，您的工作与in相比`INSERT`很好- 但您最终只是查看了**错误的 .mdf 文件**（in ）！`.mdf``.\bin\debug`**`App_Data`**

 **如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`Testing`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=Testing;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......**

# forms - 使用 Adob e LiveCycle 表单在大型 PDF 中填写数据

> ID：14159291
> 
> 赞同：0
> 
> 时间：2013-01-04T14:46:03.280
> 
> 标签：forms, pdf, adobe, livecycle

是否可以使用 LiveCycle 表单来收集数据并将数据导出到 PDF 中的各个位置？如果是这样，我该怎么做？如果还有其他方法可以做到这一点，我也愿意。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:24:49.590

这个问题我不清楚。您是在谈论一种在 LiveCycle 表单中存储各种数据元素并在下拉列表等中填充存储数据的机制吗？如果您能解释您试图满足的用例，这将有所帮助。

# php - JSON html 字符串没有被 innerhtml 转换为 html

> ID：14159294
> 
> 赞同：0
> 
> 时间：2013-01-04T14:46:29.390
> 
> 标签：php, javascript, html, json

我正在使用 javascript 和 php，需要在 JSON 变量 (PHP->JS) 中传递一些 HTML。

不幸的是，由于一些环境限制，我只能使用 jQuery。使用诸如抛出意外令牌错误`jQuery.parseJSON(str)`之类的东西。`$.parseJSON(str)`

因此，我需要一种纯 JavaScript 方法来处理 JSON 变量中的 html。目前，HTML 字符串只是作为字符串打印在页面上，但我需要它作为 HTML 生效。

我的JS代码如下：

```
document.getElementById("activeDescription").innerHTML = response['description']; 
```

结果最终只是 HTML 页面上的文本，如下所示：

```
<p>helloworld</p> 
```

而我希望只是

```
helloword 
```

显示在 HTML 页面上。在 alert(response['description']) 我收到

```
&lt;p&gt;&lt;span class=&quot; 
```

**编辑**

当我使用

```
jQuery.parseJSON('{"name":"John"}'); 
```

一切都很美好，但这段代码

```
jQuery.parseJSON(response['description']); 
```

给了我一个“Uncaught SyntaxError: Unexpected token &”错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:38:52.033

很可能是编码问题。您可以通过解码字符来修复。

在 JavaScript 中：

```
var div = document.createElement('div');
div.innerHTML = encoded;
var decoded = div.firstChild.nodeValue; 
```

在 PHP 中，请查看此链接：[http ://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

# c#-4.0 - C#<-->JScript：不可见的数组？

> ID：14159301
> 
> 赞同：0
> 
> 时间：2013-01-04T14:47:02.300
> 
> 标签：c#-4.0, .net-4.5, indexoutofboundsexception, managed-jscript

我有一个复杂的程序，它给了我这个明显的幻觉错误......
我将在我操纵的这个小示例程序的帮助下开始解释，它可以为运行它的任何人抛出我美丽的异常。

```
<!-- language: c# -->
using System;
using System.Collections.Generic;
using System.Threading.Tasks;

namespace so_redux {
    static class Program {
        [STAThread]
        static void Main(){
            CS2JS _class=new CS2JS();
        }
    }//class Program

    class CS2JS{
        public CS2JS(){
            Func<String,Object> js_eval=initJS();
            Object cs_ic=initCS();

            string xc;
            object res;

            cs_ic.GetType().GetMethod("init").Invoke(cs_ic,null);
            AppDomain.CurrentDomain.SetData("trespasser",cs_ic);

            xc=@"function edata(fieldname:String,ival:String):Object{
                    var sob=System.AppDomain.CurrentDomain.GetData('trespasser');
                    var v1=sob.GetType().GetField(fieldname).GetValue(sob);

                    function HASH(s1:String,s2:String):Object{
                        var q1=sob.GetType().GetField(s1).GetValue(sob);
                        return q1.ITEM(s2);
                    }

                    var v2=v1.ITEM(ival);
                    return eval(v2);
                }
                edata('HT','foo');";
            res=js_eval(xc);
            // var xx;xx=new Hashtable();xx['sda']='1';eval(xx['sda']); OK            
        }

        Func<String,Object> initJS(){
            System.CodeDom.Compiler.CodeDomProvider jcc;
            System.CodeDom.Compiler.CompilerParameters jcp;
            System.CodeDom.Compiler.CompilerResults jcr;
            System.Reflection.Assembly jas;
            object jis;
            string code;
            Type t_ii;

            code=@"@set @debug(off)
                import System;
                import System.Collections;
                import System.Collections.Generic;
                package internal_namespace{class internal_class{
                    public function internal_method(_code:String):Object{
                        return eval(_code);
                    }
                }
            }";

            jcc=Microsoft.JScript.JScriptCodeProvider.CreateProvider("JScript");
            jcp=new System.CodeDom.Compiler.CompilerParameters();
            jcp.CompilerOptions="/fast-";
            jcp.GenerateExecutable=false;
            jcp.GenerateInMemory=true;
            jcp.IncludeDebugInformation=false;
            jcp.ReferencedAssemblies.Add("System.dll");
            jcp.ReferencedAssemblies.Add("System.Core.dll");
            jcp.WarningLevel=4;
            jcr=jcc.CompileAssemblyFromSource(jcp,code);
            jas=jcr.CompiledAssembly;
            jis=jas.CreateInstance("internal_namespace.internal_class");

            t_ii=jas.GetType("internal_namespace.internal_class");
            return (s1)=>t_ii.InvokeMember("internal_method",System.Reflection.BindingFlags.InvokeMethod,null,jis,new object[]{s1});
        }//initJS

        Object initCS(){
            var v1= Microsoft.CSharp.CSharpCodeProvider.CreateProvider("CSharp");
            System.CodeDom.Compiler.CompilerParameters v2=new System.CodeDom.Compiler.CompilerParameters();
            v2.GenerateExecutable=false;
            v2.GenerateInMemory=true;
            v2.IncludeDebugInformation=false;
            v2.WarningLevel=4;
            v2.ReferencedAssemblies.Add("System.dll");
            v2.ReferencedAssemblies.Add("System.Core.dll");

            string _code="public Hashtable2 HT;"+
                "public void init(){"+
                    "HT=new Hashtable2();"+
                    "HT[\"foo\"]=\"1\";"+
                    "HT[\"bar\"]=\"HASH('HT','foo')\";"+
                "}";

            var v3="using System;using System.Collections;using System.Collections.Generic;"+
                    "namespace internal_namespace{public class Hashtable2:Hashtable{"+
                        "public Hashtable2():base(){} public Hashtable2(int N):base(N){}"+
                        "public Object ITEM(Object K){return this[K];} }"+
                    "[Serializable]public class internal_class{"+
                        "public internal_class(){}"+
                        _code+
                        "\n}}";

            var v4=v1.CompileAssemblyFromSource(v2,v3);
            var v5=v4.CompiledAssembly;
            var v6=v5.GetType("internal_namespace.internal_class");
            var v7=v5.CreateInstance("internal_namespace.internal_class");

            return v7;
        }//initCS
    }//class CS2JS
}//namespace so_redux 
```

抛出的异常是“索引越界”，它是从 JScript 中抛出的。问题？就是没有数组！

这段代码在做什么：首先，通过在运行时编译一个“导出”一个 eval 的类来初始化一个 JScript 解释器（可以做一个 dll，但在这种情况下我没有）。
然后编译一个 C# 程序集，一个“导出”一些用户代码的程序集（initCS 中的变量 _code 最初是通过读取文本文件加载的）。
新编译的类初始化后（调用init()），需要两个程序集（JScript和C#）交互，所以需要在它们之间传递数据，想到了使用AppDomain。
注意：在 C# 程序集中定义了一个 Hashtable2，因为我在其中放入了一个 ITEM 方法，可以用来替代公共属性 this[]: 以这种方式调试更容易（例如，在访问值时显示一个神圣的 MessageBox ）。
因此，我将 initCS 中实例化的类传递给 JScript，而 JScript 读取内部 Hashtable (HT)。我需要做的是评估 Hashtable 中的数据，因为它应该能够动态地改变自己。
如果我 eval 不是从 Hashtable 中获取的字符串，一切正常——在我获取 Hashtable 中的任何内容并将其传递给 eval 的那一刻，就会发生异常。注意：字符串是完全相同的（即使将它们与 Equals 进行比较）并且它们有效，不同之处仅在于它们来自哪里。
当 JScript 函数 edata 对取自 Hashtable 的字符串进行求值时，JScript 会说“索引超出范围”，但正如我所说：我在那里看不到任何数组......（也许问题正是如此，不知道） .
我承认我在 JScript 方面有自己的局限性，所以如果有人能帮助理解 WTF 正在发生的事情，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:02:44.523

拆分 JScript 函数的临时解决方案/解决方法：

```
 xc=@"function odata(fieldname:String,ival:String):Object{
            var sob=System.AppDomain.CurrentDomain.GetData('trespasser');
            var v1=sob.GetType().GetField(fieldname).GetValue(sob);

            return v1.ITEM(ival);
        }
        odata('HT','bar');";
    res=js_eval(xc);

    xc=@"function HASH(s1:String,s2:String):Object{
            var sob=System.AppDomain.CurrentDomain.GetData('trespasser');
            var q1=sob.GetType().GetField(s1).GetValue(sob);
            return q1.ITEM(s2);
        }
        eval("+res.ToString()+");";
    res=js_eval(xc); 
```

但是，如果有人真的知道第一个示例中的错误原因，请解释一下！

# jquery - jQuery 工具提示格式

> ID：14159306
> 
> 赞同：0
> 
> 时间：2013-01-04T14:47:23.390
> 
> 标签：jquery, html

您好，这是一个简单的...。我只想对我得到的这些列标题使用 jQuery 工具提示。我使用了一些自定义标签，但我可能将其格式设置错误....它不起作用...仍在执行默认的 html 鼠标悬停

jQuery：

```
<script type="text/javascript">

$(document).ready(function()
{
      $("#mgmtViewHeaders ctl[title]").tooltip();
}); 
```

```
 <table class="data_table" id="mgmtViewHeaders">
    <tr>
        <ctl:sortableTblHdr title="Source of Repair" property="sorCode" type="top" defaultSort="true" defaultOrder="asc">SOR</ctl:sortableTblHdr>
       </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:56:55.273

使用以下

$("#mgmtViewHeaders [标题]").tooltip();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:54:38.827

您问题中的选择器匹配`<ctl>`具有`title`属性的元素。`<ctl>`HTML中没有元素，`ctl:`只有服务器端`sortableTblHdr`组件的标签前缀。

这些组件可能会`<th>`在 HTML 标记中呈现为元素，请尝试匹配它们：

```
$("#mgmtViewHeaders th[title]").tooltip(); 
```

# database - 在 Symfony2 中保存与数据库的多对多关系

> ID：14159307
> 
> 赞同：20
> 
> 时间：2013-01-04T14:47:23.687
> 
> 标签：database, symfony, many-to-many, save

在我的 Symfony2 项目中，我有两个相关的实体：用户和收藏夹。他们有一个多对多的关系。

我的应用程序的工作方式如下：在我的 Twig 页面中，我有一些带有“添加到收藏夹”按钮的项目。当您单击按钮时，我的控制器将 item_id 保存在收藏夹列中。但是后来我想保存将该项目添加到他的收藏夹的用户，而我的应用程序在这里失败了。

用户和收藏夹存在，但用户和收藏夹之间的连接列保持为空。我也没有收到任何错误。

这是我的代码：

实体用户

```
class Users implements AdvancedUserInterface
{
    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\ManyToMany(targetEntity="Favorites", inversedBy="user", cascade={"persist"})
     * @ORM\JoinTable(name="user_has_favorite",
     *   joinColumns={
     *     @ORM\JoinColumn(name="user_id", referencedColumnName="user_id")
     *   },
     *   inverseJoinColumns={
     *     @ORM\JoinColumn(name="favorite_id", referencedColumnName="favorite_id")
     *   }
     * )
     */
    private $favorite;

    public function __construct()
    {
        $this->favorite = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function addFavorite(\Geo\CityTroopersBundle\Entity\Favorites $favorite)
    {
        $this->favorite[] = $favorite;

        return $this;
    }
... 
```

实体收藏夹

```
class Favorites
{

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\ManyToMany(targetEntity="Users", mappedBy="favorite", cascade={"persist"})
     */
    private $user;

    public function __construct()
    {
        $this->user = new \Doctrine\Common\Collections\ArrayCollection();
    }
    public function addUser(\Geo\CityTroopersBundle\Entity\Users $user)
    {
        $this->user[] = $user;    
        return $this;
    } 
```

我的控制器

```
public function showNewsAction()
    {
        $request = $this->get('request');    
        $itemId=$request->request->get('itemId');
        if($itemId != NULL)
        {
        //MAKE NEW FAVORITE AND ADD TO DATABASE LINKED WITH ITEM
        $favorite = new Favorites();
        $favorite->setItemId($itemId);

         //LINK FAVORITE ID WITH USER ID IN JOINCOLUMN
        $userId = 6;
        $em = $this->getDoctrine()->getEntityManager();

        $user = $em->getRepository('GeoCityTroopersBundle:Users')->find($userId);

        $favorite->addUser($user);
        $em->persist($favorite); 

        //I TRIED THIS TOO, BUT IT FAILED
        /*$user->addFavorite($favorite);
        $em->persist($user);*/

        $em->flush(); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-04T15:12:37.360

你离那里很近。对于教义多对多关系，您需要同时调用两个 add 方法

```
$favorite->addUser($user);
$user->addFavorite($favorite);

$em->persist($favorite); 
$em->persist($user);
$em->flush(); 
```

这应该可以解决问题。在[文档](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/unitofwork-associations.html)中他们这样做了，但不要太明确地提及它。不知道为什么，因为很多人都遇到了这个问题（包括我自己）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-23T09:40:54.207

正如这里所解释的，只有拥有方负责连接管理： [http ://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#owning-and-inverse-side-on-a -多对多关联](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#owning-and-inverse-side-on-a-manytomany-association)

所以只有

```
$user->addFavorite($favorite); 
```

应该坚持，而不是

```
$favorite->addUser($user); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T13:07:19.733

正如 Cedric 所指出的，为多对多关系添加记录仅在一个方向上完成，这取决于您如何定义关系：添加只能由关系的父实体完成，因此在您的情况下，您必须使用：

```
$user->addFavorite($favorite); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T13:28:34.410

在您的行中：

```
@ORM\JoinColumn(name="favorite_id", referencedColumnName="favorite_id") 
```

这

```
name="favorite_id" 
```

part 指的是连接表中的列，而

```
referencedColumnName="favorite_id" 
```

指最喜欢的表中的 id，通常只是“id”。你应该试试 ：

```
 /**
 * @var \Doctrine\Common\Collections\ArrayCollection
 *
 * @ORM\ManyToMany(targetEntity="Favorites", inversedBy="user", cascade={"persist"})
 * @ORM\JoinTable(name="user_has_favorite",
 *   joinColumns={
 *     @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 *   },
 *   inverseJoinColumns={
 *     @ORM\JoinColumn(name="favorite_id", referencedColumnName="id")
 *   }
 * )
 */
private $favorite; 
```

# php - Zend 框架 SpeckCart 无法正常工作

> ID：14159311
> 
> 赞同：0
> 
> 时间：2013-01-04T14:47:43.993
> 
> 标签：php, zend-framework2, shopping-cart, zend-session

我在我的 ZF2 项目中使用 SpeckCart 购物车模块。我已经设置了模块，它成功地将商品添加到购物车，但它在每次调用时都会覆盖相同的商品，而不是添加新商品。请指导我哪里做错了，这里是代码：

```
 public function addAction(){
    $prod_id = $this->params()->fromPost('prod_id');
    $product = $this->getProductTable()->getProduct($prod_id);

    $item = new CartItem();
    $item->setDescription($product->name);
    $item->setCartItemId($prod_id);
    $item->setPrice($product->price);

    $cs = $this->getServiceLocator()->get('SpeckCart\Service\CartService');

    $cart = $cs->getSessionCart(true); 
```

// 我认为上面的行每次都在创建一个新的购物车，这就是问题所在。我不知道如何使它使用在之前调用中创建的现有购物车。

```
 $cs->addItemToCart($item, $cart); 
```

我是 ZF 的新手，请告诉我应该如何正确使用这个购物车模块。上面的代码来自我的应用程序的一个操作，每次按下“添加到购物车”按钮时都会调用该操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:54:11.387

在第一次尝试 speckcart 模块后遇到了这个问题。我认为您的问题是您正在尝试设置 CartItemId。数据库代码（在模块中提供）使购物车项目 Id 成为自动递增的主键字段，因此不应设置它，因为数据库应自动创建它。

此外，您必须提供数量，因为数量的数据库字段设置为不接受空值。

除此之外，一切都应该工作。

希望这可以帮助。

# android - 想知道是否有任何提供商（即网络或 WiFi）正在使用中

> ID：14159312
> 
> 赞同：1
> 
> 时间：2013-01-04T14:47:48.107
> 
> 标签：android, location, shared-libraries

目前我正在使用小蓬松的库。

作为这个库。使用 Passive Provider 如果没有其他使用网络/GPS 的应用程序正在运行，它不会发送任何更新。更新位置的频率也会在几次更新后发生变化。

我正在使用 android 2.2.1 在三星 POP 上进行测试

所以，我想知道在我的设备中使用网络或 GPS 的任何其他应用程序。所以，我可以将提供者从被动更改为活动（目前由小蓬松的库使用。）。我可以通过 android SDK 中的任何 API 或类获取使用 GPS 或网络的应用程序列表吗？

提前致谢...

# ios - 如何在 Cocos2d 中移除图层？

> ID：14159316
> 
> 赞同：0
> 
> 时间：2013-01-04T14:47:56.393
> 
> 标签：ios, xcode, release, removechild

我的代码有什么问题？

```
if(menu){
    [menu removeAllChildrenWithCleanup:YES]; // 1 line
    [menu removeFromParentAndCleanup:YES];   // 2 line
    menu = nil;
} 
```

它失败了，但是如果我评论第一行或第二行，一切都很好。但是如果我不清理childrenNodes，它们就不会被清理，如果我不清理父级的菜单，它就不会自行释放。

我应该怎么办？

# python - PyQt4 - 按住一个被检测为频繁按下和释放的键？

> ID：14159318
> 
> 赞同：4
> 
> 时间：2013-01-04T14:48:14.217
> 
> 标签：python, pyqt4, keypress, eventqueue, keyrelease

当 QApplication 处理关键事件时，我注意到一些不寻常的行为，这危及了我希望制作的小游戏。

按住一个键会导致`keyPressEvent`then`keyReleaseEvent`方法被重复（并且非常频繁地）调用，而不是触发`keyPressEvent`一次并等待键被释放以触发另一个键（这是期望的和公认的预期行为）。

这会导致巨大的性能问题，以至于按住多个键会导致程序完全忽略某些键，这可能是因为事件队列正在遭受损失。

该程序演示了重复调用：

```
from PyQt4 import QtGui
import sys

class Window(QtGui.QWidget):

    def __init__(self):
        super(Window, self).__init__()

    def keyPressEvent(self, event):
        print 'PRESSED'
        event.accept()

    def keyReleaseEvent(self, event):
        print 'RELEASED'
        event.accept()

app = QtGui.QApplication(sys.argv)
Window().show()
sys.exit(app.exec_()) 
```

这个程序（我用来测试 Qt 游戏潜力的一个愚蠢的图形工具）演示了在按住现有键时忽略新按下的键。

```
from PyQt4 import QtGui
import sys

class Window(QtGui.QWidget):

    def __init__(self):
        super(Window, self).__init__()
        self.resize(100,300)
        self.lower, self.upper = 10, -10
        self.keys = [81, 65, 90, 87, 83, 88, 69, 68, 67, 82, 70, 86, 84, 71,
        66, 89, 72, 78, 85, 74, 77, 73, 75, 44, 79, 76, 46, 80, 59, 47]
        self.dots = [self.lower] * len(self.keys)

    def keyPressEvent(self, event):
        pressed = event.key()
        if (pressed in self.keys):
            index = self.keys.index(pressed)
            self.dots[index] = self.height()+self.upper
            self.repaint()
        event.accept()

    def keyReleaseEvent(self, event):
        pressed = event.key()
        if (pressed in self.keys):
            index = self.keys.index(pressed)
            self.dots[index] = self.lower
            self.repaint()
        event.accept()

    def paintEvent(self, event):
        step = self.width() / (len(self.dots) + 1)
        painter = QtGui.QPainter()
        painter.begin(self)
        x, y = 0, 0
        for w in self.dots:
            i, j = x + step, w
            painter.drawLine(x, self.height() - y, i, self.height() - j)
            x, y = i, j
        painter.end()

app = QtGui.QApplication(sys.argv)
Window().show()
sys.exit(app.exec_()) 
```

通过运行上述程序可以观察到，按住超过 3 或 4 个键将导致不会建立新的尖峰，直到释放当前持有的键。

我怎样才能防止这种行为，例如`keyPressEvent`只为尚未物理释放的密钥触发一次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T06:06:58.570

使用[event.isAutoRepeat()](http://srinikom.github.com/pyside-docs/PySide/QtGui/QKeyEvent.html?highlight=isautorepeat#PySide.QtGui.PySide.QtGui.QKeyEvent.isAutoRepeat)可能会有所帮助

例如

```
def keyPressEvent(self, event):
    if event.isAutoRepeat():
        return
    pressed = event.key()
    if (pressed in self.keys):
        index = self.keys.index(pressed)
        self.dots[index] = self.height()+self.upper
        self.repaint()
    event.accept() 
```

# c# - XSLT 的输出参数

> ID：14159319
> 
> 赞同：2
> 
> 时间：2013-01-04T14:48:13.477
> 
> 标签：c#, .net, xslt, xslt-1.0

我熟悉将 Input Param 传递给 XSLT CompiledTransformation 类，以便解析器在 XSL 文件中提供的处理指令中使用 Param 来处理 XSL 文件。

有没有一种方法可以让我们`get output param`（比如节点的值或其他东西）从 XSLT 到像 C# 这样的宿主语言？

```
XslCompiledTransform xslTransform = new XslCompiledTransform();

string strXmlOutput = string.Empty;
StringWriter swXmlOutput = null;
MemoryStream objMemoryStream = null;
XPathDocument xpathXmlOrig = new XPathDocument(string_xmlInput);
swXmlOutput = new StringWriter();
objMemoryStream = new MemoryStream();

xslArg.AddParam("TESTING", "", SomeVar);
XsltSettings xslsettings = new XsltSettings(false, true);

xslTransform.Load(string_xslInput, xslsettings, new XmlUrlResolver());
xslTransform.Transform(xpathXmlOrig, xslArg, objMemoryStream); 
```

这段代码确实输出了转换后的 XML，但我的问题是我们可以只取一个值作为 XSL 转换（XSLT 文件）的输出参数吗？

像这样的东西：

```
xslArg.OutputParam("testing"); //Something like this?
........
........
xslTransform.Transform(xpathXmlOrig, xslArg, objMemoryStream);
string outputparam = xslArg.GetParam("testing"); //ideal way of getting param after traformation! 
```

XSLT 是否为这样的事情提供了范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:08:56.373

在 C# 中，最好的办法是将`<xsl:message>`指令放入 XSLT 代码中，并挂接到[XsltArgumentList类上的](http://msdn.microsoft.com/en-gb/library/system.xml.xsl.xsltargumentlist.aspx)[XsltMessageEncountered](http://msdn.microsoft.com/en-gb/library/system.xml.xsl.xsltargumentlist.xsltmessageencountered.aspx)事件。

您可以通过观察应用程序的输出来测试它是否为您提供正确的输出，而无需挂钩事件，在没有事件处理程序的情况下，消息通过管道传输到标准输出。

# android - 您如何检测您的活动是否因为您创建的 PendingIntent 而被暂停？

> ID：14159321
> 
> 赞同：4
> 
> 时间：2013-01-04T14:48:17.693
> 
> 标签：android, android-pendingintent, activity-lifecycle

如果我有一个位于前台的 Activity 并且我导航到我的应用程序中的另一个 Activity，我可以通过在您开始传输时设置一个标志并在您传输到新 Activity 时擦除它来检测到这一点。这使我能够区分由于内部（标志设置）或外部（标志未设置）事件而导致的活动 onPause。

但是，我在为通知中嵌入的 PendingIntents 执行此操作时遇到了麻烦。是否可以检测到我的 Activity 正在 onPaused 因为他们选择了我在通知栏上创建的通知？是否有某种通知侦听器我可以使用，它会在通知触发**之前**触发并且执行挂起的意图，它会暂停我的活动？

我很欣赏这有点令人困惑，所以我做了一个骨架项目来演示这个问题：

```
package com.example.notificationtest;

import android.os.Bundle;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.View;

public class MainActivity extends Activity {

private static final int INCOMING_NOTIFICATION_ID = 1;
private static final String TAG = "NotificationTest";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public void onPause() {
    super.onPause();
    Log.e(TAG,"onPause");
}

@Override
public void onResume() {
    super.onResume();
    Log.e(TAG,"onResume");
}

public void onTransitionButtonClick(View view) {
    Intent intent = new Intent(this, MainActivity.class);
    Log.e(TAG,"About to start activity: onPause will be invoked.");
    startActivity(intent);
}

public void onNotificationButtonClick(View view) {
    Intent intent = new Intent(this, MainActivity.class); 
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
    Notification notification = new Notification(android.R.drawable.alert_dark_frame, "Alert!", System.currentTimeMillis());
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notification.defaults |= Notification.DEFAULT_LIGHTS;
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.flags |= Notification.FLAG_INSISTENT;
    notification.setLatestEventInfo(this, "Click to open", "Click to open", pendingIntent);

    // Show the alert.
    final NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(INCOMING_NOTIFICATION_ID, notification);
}

} 
```

使用 activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/notify_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="@dimen/padding_medium"
    android:text="Make a notification"
    android:onClick="onNotificationButtonClick"
    tools:context=".MainActivity" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/notify_button"
    android:padding="@dimen/padding_medium"
    android:text="Normal transition"
    android:onClick="onTransitionButtonClick"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

如果您选择“正常转换”按钮，日志将打印“即将开始活动：将调用 onPause”。在 onPause 之前。

如果您选择“发出通知”按钮，然后向下拖动通知栏并点击通知，我希望在 onPause 之前收到该点击的通知，以便我可以插入同一行“关于开始活动：onPause 将被调用。”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:17:29.680

除了持有启动活动的意图外，**`PendingIntent`还可以持有“发射”广播的意图**。

您可以使用此类自定义广播作为通知的触发器，然后`BroadcastReceiver`将其注册到该广播，并显示您想要的任何内容，然后才会开始所需的活动。

```
Intent intent = new Intent("my.custom.broadcast.action");
pendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0); 
```

接收器看起来像这样：

```
private BroadcastReceiver mReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        //do whatever you want
        // if this code is being executed - it's a sign that the user clicked on the notification...

        Intent intent = new Intent(this, MainActivity.class);
        Log.e(TAG,"About to start activity: onPause will be invoked.");
        startActivity(intent);

    }
}; 
```

不要忘记注册`mReceiver` when`onCreate()`调用，然后取消注册`onDestroy()`

```
registerReceiver(mReceiver , new IntentFilter("my.custom.broadcast.action"));
unregisterReceiver(mReceiver); 
```

在这种方法中，您可以准确控制用户单击通知时会发生什么。如您所见 - 只有在单击通知时才能发送广播。没有人说你必须开始活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:43:28.683

让我首先尝试将您的问题转换为另一个问题（只是为了清楚起见）：*如何让我的 Activity 在暂停之前执行代码，因为将显示与我的通知（我可以控制）关联的 Activity？*

前提是翻译足够好，可以回答：

你确定这种方法会是一个解决方案吗？因为在很多情况下，您的 Activity 会暂停，并且用户“几乎立即”显示您的 Notification 的 Activity，而中间仍然会有步骤（例如首先查看其他通知时）。我认为从技术上讲，这意味着您仍然必须在那里执行相同的代码，同时您不能有任何迹象表明您的通知将在“不久的将来”被查看。

因此，对于一个合适的答案，我相信人们必须跳出框框思考一下，这取决于您打算执行的代码的性质和执行它的动机。

因此，如果您在这方面更新您的问题并通知我，我会很高兴再看看。

**问题更新后更新：**

您可以避免在用户按下通知时触发下一个 Activity，而只需触发一个事件。如果你的activity以编程方式注册了一个BroadcastReceiver，它应该能够接收到这个事件，然后按照你的意愿更新自己并启动下一个Activity。

# php - mysql_num_rows() 错误

> ID：14159325
> 
> 赞同：0
> 
> 时间：2013-01-04T14:48:29.007
> 
> 标签：php, html, sql

我似乎在这段代码上遇到了困难，我不明白，因为在我的家庭服务器上，它 100% 完美。基本上，这个脚本获取用户 ip 并将其存储到 mysql 表中。每次用户发布时，它都会检查表格以查看 IP 是否已经发布。当我在出现问题的 num_rows 上运行 mysql_error() 时，我得到：

```
Parse error: syntax error, unexpected T_LOGICAL_OR on line 119 
```

有任何想法吗？

php:

```
$poster_ip=$_SERVER['REMOTE_ADDR'];//Posters ip
//check for ip double posting
//selecet ip from table
$sql="SELECT * FROM $tbl_name WHERE ip='$poster_ip'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
or die mysql_error();//line 119
//if result matche posterip, table row must be 1
if($count==1){
//ip taken
echo "This IP has already submited a post. You may not submit another.";
exit();
//else script continues
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T14:49:35.813

删除分号，因为它会终止语句并将`or die`视为新语句，从而导致错误：

```
$count=mysql_num_rows($result) or die(mysql_error());
                         //   ^ no semicolon 
```

`die()`您还需要在呼叫周围加上括号。

旁注：`or die(mysql_error())`不被认为是好的做法，因为在开发和生产环境之间很难维护。`or trigger_error(mysql_error())`会更好 - 这会写入您的错误日志。还可以考虑升级到[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)或[MySQLi](http://php.net/manual/en/book.mysqli.php)，因为这个 MySQL 库已被弃用和劝阻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:50:58.400

### 去掉分号！

```
$count=mysql_num_rows($result);
------------------------------^
or die mysql_error();//line 119 
```

### 将其更改为：

```
$count=mysql_num_rows($result) or die mysql_error(); 
```

它终止了！！！

### 建议：

不要使用`mysql_*`已弃用的函数。请改用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:50:22.880

```
$count=mysql_num_rows($result);
or die mysql_error(); 
```

应该

```
$count=mysql_num_rows($result) or die mysql_error(); 
```

任何，我建议您避免使用它们，`mysql_*`因为它们已被弃用。请改用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:50:51.823

尝试改变这个：

```
$count=mysql_num_rows($result);
or die mysql_error();//line 119 
```

对此：

```
$count=mysql_num_rows($result) or die mysql_error();//line 119 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:54:58.367

请删除**分号**并**添加（）**来死以表明它是错误的然后死

```
$count=mysql_num_rows($result) or die(mysql_error()); //line 119 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T14:55:57.733

您不能以“或”开头的行在第 118 行中，您以“;”结尾

```
$count = mysql_num_rows($result) or die mysql_error(); 
```

但是最好在结果后进行错误检查：

```
if(!$result) {
    die mysql_error();        
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T15:02:45.347

此代码将起作用。我在导致错误的“或死”之前删除了分号（;）。

```
$poster_ip=$_SERVER['REMOTE_ADDR'];//Posters ip
//check for ip double posting
//selecet ip from table
$sql="SELECT * FROM $tbl_name WHERE ip='$poster_ip'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result) or die mysql_error();//line 119
//if result matche posterip, table row must be 1
if($count==1){
//ip taken
echo "This IP has already submited a post. You may not submit another.";
exit();
//else script continues
} 
```

# python - .next_element 和 .previous_element BeautifulSoup4 的概念冲突

> ID：14159328
> 
> 赞同：0
> 
> 时间：2013-01-04T14:49:06.980
> 
> 标签：python, python-2.7, beautifulsoup

我刚刚浏览了 B4 文档并获得了一些`Going back and forth`关于`html family tree`.

```
last_a_tag = soup.find("a", id="link3")
last_a_tag
# <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a>
last_a_tag.next_element
# u'Tillie'  
last_a_tag.previous_element
# u' and\n' ## upto this is Good to understand!
last_a_tag.previous_element.next_element
# <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a> 
```

冲突在这里浮现在我的脑海中。根据`.Previous_element`概念`last_a_tag.previous_element.next_elementt`应该给出`<a class="sister" href="http://example.com/tillie" id="link3">`但为什么如上所示的完整？

**编辑**

```
last_a_tag.previous_element
# u' and\n'  <~~Perfect
last_a_tag.previous_element.next_element
# <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a> 
```

为什么不到下面呢？

```
#<a class="sister" href="http://example.com/tillie" id="link3"> 
```

怎么到下面的部分？ `Tillie</a>` <~~这里是混乱

帮助我理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:09:47.263

您仍在查看对标签的引用，当它被打印时，它所包含的所有子项也会被打印。

标签不仅仅是开始`<a ...>`元素，它还包括任何子元素和结束元素。例如，您仍然需要通过`.next_element`（这将是`u'Tillie'`）来接触树中的那些孩子。

在树中导航不会在打开和关闭文本片段之间移动，而是在树中的元素之间移动。原始 XML/HTML 文档以特定顺序定义了这些元素，但这不是您在此处查看的内容。您正在查看标签的嵌套结构和适合其他标签的文本，一直到根。

所以下面的 HTML 结构：

```
<p class="story">Once upon a time there were three little sisters; and their names were
<a href="http://example.com/elsie" class="sister" id="link1">Elsie</a>,
<a href="http://example.com/lacie" class="sister" id="link2">Lacie</a> and
<a href="http://example.com/tillie" class="sister" id="link3">Tillie</a>;
and they lived at the bottom of a well.</p> 
```

变成一个结构如下：

```
p
\
  a
  \
    "Elsie"
  ", "
  a
  \
    "Lacie"
  " and "
  a
  \
    "Tillie"
  "; and they lived at the bottom of a well." 
```

（简化以删除大量空格）。

如果您有对最后一个`a`元素的引用，则该集合中的前一个元素是 text `" and "`，下一个是`"Tillie"`. 之后`"Tillie"`是正文`"; and they lived at the bottom of a well."`。在文本`" and "`出现之前，文本`"Lacie"`等。

# c# - 使用 genericArguments 调用 MethodInfo.Invoke

> ID：14159329
> 
> 赞同：0
> 
> 时间：2013-01-04T14:49:10.840
> 
> 标签：c#, reflection

调用我的方法时出现`InvalidOperation`异常`MethodInfo.Invoke`，因为它具有通用参数。在互联网上搜索了几个小时后，我不知道如何解决这个问题。这是`MethodInfo`：

```
object value = null;
if (propertyType.IsClass)
{
    Type primaryKeyType = propertyType.GetPrimaryKeyType();
    object primaryKeyValue = property.Value.ToValue(primaryKeyType);
    MethodInfo GetEntityMethodInfo = typeof(ReportSettingsExtensions)
        .GetMethod("GetEntity", BindingFlags.Static | BindingFlags.InvokeMethod | BindingFlags.NonPublic);
    object entity = propertyType;
    GetEntityMethodInfo.Invoke(entity, new object[] { primaryKeyValue });
    value = entity.GetPrimaryKey();
} 
```

这是方法：

```
private static T GetEntity<T>(object primaryKeyValue)
{
    T entity = default(T);
    new Storage(storage =>
    {
        entity = storage.Create<T>();
        entity.SetPrimaryKey(primaryKeyValue);
        storage.Load(entity);
    });

    return entity;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:36:37.343

您需要`T`使用`MethodInfo.MakeGenericMethod`（[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)）提供或“关闭”通用方法参数

像这样的东西：

```
MethodInfo getEntity =
  GetEntityMethodInfo.MakeGenericMethod( ... whatever T should be ... );

var entity = getEntity.Invoke( null, new object[] { primaryKeyValue } ); 
```

您应该`null`作为第一个参数传递给，`Invoke`因为该方法是`static`，因此没有对象引用。

# c++ - C++ 抓取网页

> ID：14159331
> 
> 赞同：0
> 
> 时间：2013-01-04T14:49:16.793
> 
> 标签：c++, web-scraping

一段时间以来，我一直试图想办法用 C++ 对网站进行一些简单的抓取。我偶然发现了 cURL 库，但我无法正确安装它，所以我会尝试另一种方法。

你们中有人知道任何方法吗？如果随后详细说明如何使用 C++ 在 Win32 上安装它，则使用 cURL 是一个可以接受的答案。

我可以以某种方式更容易地做到这一点，还是在 C++ 中这是一项不可能完成的任务？如果是这样，冒险使用 C# 会更容易吗，尽管我以前也从未使用过它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:01:15.417

正如 Vlad Lazarenko 作为评论发布的那样，[cURL 的官方安装指南](http://curl.haxx.se/docs/install.html)可以帮助您安装它。

当你仍然不能让它工作时，你总是可以自己实现 HTTP。这不是一个非常复杂的协议。您只需使用 Winsock 创建一个套接字，连接到端口 80 上的网络服务器，然后发送这些字符串：

```
"GET /example.html HTTP/1.1\r\n"
"Host: www.example.com\r\n"
"\r\n" 
```

并且网络服务器将使用自己的 HTTP 标头进行响应，然后是 example.html 的内容（或错误消息）。

关于您关于 C# 的问题：当我不得不在 C++ 或 C# 中实现网络抓取工具之间做出选择时，我会选择后者，因为它提供了 HTTP 支持和开箱即用的更优越的字符串处理功能，不需要任何图书馆。但这是假设 1\. 我和我的团队对这两种语言都同样了解，并且 2\. 没有我不知道的要求，哪个更愿意指向 C++。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:58:23.410

如果你在做网页抓取，C++ 可能不是最好的语言。C++ 是一种低级语言，它在性能方面非常出色，但对于这样的任务，最终得到解决方案只会花费不必要的时间。看看 Python 和`urllib2`库，或其他脚本语言，如 Perl 或 Ruby。

# python - PyQt：在此放置滚动条

> ID：14159337
> 
> 赞同：4
> 
> 时间：2013-01-04T14:49:35.197
> 
> 标签：python, layout, dialog, pyqt, scrollbar

这是我的课：

```
class ChildFoundDlg(QDialog):

    #__init__ function:
    def __init__(self, parent=None):
       QtGui.QDialog.__init__(self, parent)
       self.resize(500, 270)
       self.setMaximumSize(500, 540)
       self.GridLayout = QtGui.QGridLayout(self)        

    def buttons(self, a, b, c):    #a = 0, b = 5 c = 7 
       self.font = QtGui.QFont("Sans Serif", 10, QFont.Normal)

       self.label = QtGui.QLabel(self)
       self.label.setText(QtGui.QApplication.translate("Form", "Μήπως εννοείτε την/τον:", None, QtGui.QApplication.UnicodeUTF8))
       self.label.setFont(self.font)
       self.GridLayout.addWidget(self.label, a, 0, 1, 1) 

       self.label2 = QtGui.QLabel(self)
       self.GridLayout.addWidget(self.label2, a, 1, 1, 1) 
       self.label2.setFont(self.font)

       self.pushButton = QtGui.QPushButton(self)
       self.GridLayout.addWidget(self.pushButton, b, 0, 2, 1) 
       self.pushButton.setText(QtGui.QApplication.translate("Form", "Υπότροπος", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton.setSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Expanding) 

       self.pushButton2 = QtGui.QPushButton(self)
       self.GridLayout.addWidget(self.pushButton2, b, 1, 2, 1) 
       self.pushButton2.setText(QtGui.QApplication.translate("Form", "Αναβολή", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton2.setSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Expanding) 

       self.pushButton3 = QtGui.QPushButton(self)
       self.GridLayout.addWidget(self.pushButton3, c, 1, 2, 1) 
       self.pushButton3.setText(QtGui.QApplication.translate("Form", "Ακύρωση", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton3.setSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Expanding) 
       self.pushButton3.clicked.connect(self.reject) 
```

我想要实现的是，当我用不同的值多次调用 self.buttons 时，当达到对话框的最大大小时，停止放大而是放置滚动条，如果你明白我在说什么......怎么能我这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T16:20:47.273

这是一个使用 a 的示例`QScrollArea`：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myDialog(QtGui.QDialog):
    _buttons = 0

    def __init__(self, parent=None):
        super(myDialog, self).__init__(parent)

        self.pushButton = QtGui.QPushButton(self)
        self.pushButton.setText(QtGui.QApplication.translate("self", "Add Button!", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.clicked.connect(self.on_pushButton_clicked)

        self.scrollArea = QtGui.QScrollArea(self)
        self.scrollArea.setWidgetResizable(True)
        self.scrollAreaWidgetContents = QtGui.QWidget(self.scrollArea)
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, 380, 247))
        self.scrollArea.setWidget(self.scrollAreaWidgetContents)

        self.verticalLayout = QtGui.QVBoxLayout(self)
        self.verticalLayout.addWidget(self.pushButton)
        self.verticalLayout.addWidget(self.scrollArea)

        self.verticalLayoutScroll = QtGui.QVBoxLayout(self.scrollAreaWidgetContents)

    @QtCore.pyqtSlot()
    def on_pushButton_clicked(self):
        self._buttons  += 1
        pustButtonName = u"Button {0}".format(self._buttons)

        pushButton = QtGui.QPushButton(self.scrollAreaWidgetContents)
        pushButton.setText(pustButtonName)

        self.verticalLayoutScroll.addWidget(pushButton)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myDialog')

    main = myDialog()
    main.show()

    sys.exit(app.exec_()) 
```

# symfony - Symfony 2 ScannerException @(64)

> ID：14159339
> 
> 赞同：3
> 
> 时间：2013-01-04T14:49:39.967
> 
> 标签：symfony, yaml

我的 app/config/config.yml 文件中出现以下异常：

> ScannerException 在扫描下一个令牌时，我们发现了无法启动任何令牌的字符 @(64)

导致异常的行：`- { resource: @BazaBlogBundle/Resources/config/config.yml }`

我认为是兼容性问题。我正在关注 Symfony 2.0 版的教程，我正在使用 2.16。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T12:56:53.567

我认为您缺少双引号：

```
- { resource: "@BazaBlogBundle/Resources/config/config.yml" } 
```

# java - 连接到 URL 失败，但是当我直接在浏览器中尝试时，它会成功

> ID：14159341
> 
> 赞同：1
> 
> 时间：2013-01-04T14:49:42.650
> 
> 标签：java, servlets, httpconnection

下面的代码片段尝试将 2 个参数连同一个 URL 发送到一个 servlet。但是当我尝试这个片段时，我收到一条消息：

```
Connection to file server failed 
```

但是，如果我直接尝试 URL：

```
http://localhost:8084/nappster/ReceiveFileName?fileName=" + fileName + "&ip=" + IP 
```

有了数据，没有问题。Servlet 接收文件名并按预期处理它。当我尝试通过代码连接到 URL 时，它在浏览器中尝试时失败并成功，这可能是什么原因。

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String fileName = request.getParameter("FileTag");
    String IP = new ClientAddress().getNetworkIP();                
    // Send the file name to the nappster server 
    URL url = new URL("http://localhost:8084/nappster/ReceiveFileName?fileName=" + fileName + "&ip=" + IP);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    if(connection.getResponseCode() == 200) {
        // File name sent successfully to the server
        System.out.println("Connection to file server successful");
        System.out.println("--------");
    } else {
        // Unable to send file name to the server
        System.out.println("Connection to file server failed");

     }
} 
```

***笔记 ：***

当我尝试上面的代码片段时返回的响应代码是**505**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:01:36.057

尝试使用`url.encode()`方法。

# .net - 异常：事务范围嵌套不正确

> ID：14159343
> 
> 赞同：0
> 
> 时间：2013-01-04T14:49:46.710
> 
> 标签：.net, exception

我已经从 Outlook 创建了一个控制台电子邮件应用程序阅读应用程序。每当有新消息到达收件箱时，就会调用一个异步方法。此异步方法通过发送 Web 请求调用 Web 服务并执行服务内部的功能。这些应用程序像调度程序作业一样运行。当第一封电子邮件到达收件箱时，这些过程正在工作。第二次出现异常**异常：事务范围嵌套错误**。当我尝试关闭电子邮件应用程序然后启动时，当时它工作正常。我该如何解决这个异常？ **以下是来自电子邮件应用程序的呼叫服务代码**

```
static void Save(string userAlias, string engagementName, string documentTranferId, string fileName, string fileSize,string activityName)
        {
            try
            {
                userAlias = userAlias.ToLower();
                var url = new StringBuilder();
                url.Append(
               string.Format("https://myapp.com:8443/Services/MyService/Test.svc/Save?User={0}&Engagement={1}&FileName={2}&DocumentTrasferID={3}&fileSize={4}&ActivityName={5}",userAlias, engagementName, fileName, documentTranferId, fileSize, activityName));
                Console.WriteLine(url);
                WebRequest request = WebRequest.Create(url.ToString());
                CurrentUrl = url.ToString();
                var networkCredential = new NetworkCredential("testr", "123Test", "jemi");
                request.Credentials = networkCredential;
                WebResponse response = request.GetResponse();
                Encoding encoding = Encoding.GetEncoding(1252);
                var responseStream = new StreamReader(response.GetResponseStream());
                string responseResult = responseStream.ReadToEnd();
                responseStream.Close();
                Console.WriteLine(responseResult);
            }
            catch(Exception ee)
            {
                Console.WriteLine(ee.Message);
            }

        } 
```

**服务详情-端点**

```
 <OperationContract()> _
  <WebGet(UriTemplate:="/Save?User={User}&Engagement={Engagement}&FileName={FileName}&DocumentTrasferID={documentTrasferID}&fileSize={fileSize}&ActivityName={ActivityName}", RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json)> _
    Function Save(ByVal User As String, ByVal Engagement As String, ByVal FileName As String, ByVal DocumentTrasferID As String, ByVal fileSize As String, ByVal ActivityName As String) As String 
```

**执行**

```
Public Function Save(ByVal User As String, ByVal Engagement As String, ByVal FileName As String, ByVal DocumentTrasferID As String, ByVal fileSize As String, ByVal ActivityName As String) As String Implements IMyInterface.Save
        Dim facade= New MyFacade
        Dim Result As String = facade.Save(User, Engagement, FileName, DocumentTrasferID, fileSize, ActivityName)
        Return Result
    End Function 
```

**门面类。这是我有异常**

```
Public Function Save(Doc doc,string id,string param) As String
Dim facade= New MyFacade
facade.Save(doc, id, param)
End Function 
```

# jquery - jQuery DataTables ajax 格式数据

> ID：14159344
> 
> 赞同：1
> 
> 时间：2013-01-04T14:49:54.000
> 
> 标签：jquery, ajax, datatable

是否可以在将 Ajax 数据插入页面之前使用`DataTables sAjaxSource": "URL"?`

我目前正在获取以下 JSON 数组：

```
{
    "aaData": [
        {
            "Name": "Trident",
            "Link": "http://google.com"
        }
    ]
} 
```

我可以使用以下方法将其插入名称并链接到数据表中：

```
var oTable = $('#example').dataTable({
    "bProcessing": true,
    "sAjaxSource": "sources/myData.json",
    "sAjaxDataProp": "items",
    "aoColumns": [
        { "mData": "Name" },
        {"mData": "$Link" }
    ]
}); 
```

但是，我想将其作为单个 Anchor 元素插入，Text= Name 和 href = Link。这可能吗？

PS：我尝试了什么：我查看了示例并用谷歌搜索但一无所获。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:04:20.277

我是旧 fnRender 方法的老手，但我相信现在使用[mRender](http://datatables.net/ref#mRender)可以做到这一点：

```
var oTable = $('#example').dataTable({
    "bProcessing": true,
    "sAjaxSource": "sources/myData.json",
    "sAjaxDataProp": "items",
    "aoColumns": [
        //{ "mData": "Name" },
        { "mData": "Link",
          "mRender": function (data, type, full) {
              return '<a href="' + full[1] + '">' + full[0] + '</a>';
          } }
    ]
}); 
```

PS：我对此进行了编辑以反映您的评论，以澄清您希望将其放在一个列中。取消注释以`{ "mData": "Name" },`重新添加名称列。还请记住，您的表定义也应更改为一或两列。

# ajax - Symfony2：我可以为一个防火墙使用 2 机制身份验证吗？

> ID：14159351
> 
> 赞同：0
> 
> 时间：2013-01-04T14:50:13.757
> 
> 标签：ajax, security, api, symfony

我解释。我有 2 个内核：`AdminKernel`和`ApiKernel`.

api 的会话使用 admin 的会话（in `api/config/config.yml`）：

```
framework:
    session:
        save_path: %kernel.root_dir%/../admin/cache/%kernel.environment%/sessions 
```

`security.yml`常见的是：

```
security:

    ...    
    firewalls:
        ...
        admin_login:
            pattern:  ^/admin/user/login$
            security: false

        api:
            pattern: ^/api
            http_basic: ~

        admin:
            pattern:    ^/admin
            form_login:
                check_path: /admin/user/login_check
                login_path: /admin/user/login
                default_target_path: /admin
            logout:
                path:   /admin/user/logout
                target: /admin
            remember_me:
                key:      G>n[,O+^@F)j2_0^yFR_(|q<X~YtGD2:PV3zuktP0+/u*We]Ix$An X:m!#eeYEx
                lifetime: 3600
                path:     /
                domain:   ~ # Defaults to the current domain from $_SERVER
        ... 
```

当我在时`http://localhost/admin/list`，会创建一个会话。我想使用 ajax 调用对 URL 执行一些操作`https://localhost/api/update/page`。浏览器显示身份验证框 (http_basic)，它不使用管理会话。

我的问题是：如果管理员会话存在，如何告诉 API，否则使用它来显示身份验证框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T22:39:38.113

来自 Symfony2 文档：

[http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

> 1.  多个防火墙不共享安全上下文 如果您使用多个防火墙并且您针对一个防火墙进行身份验证，您将不会自动针对任何其他防火墙进行身份验证。不同的防火墙就像不同的安全系统。为此，您必须为不同的防火墙明确指定相同的防火墙上下文。但通常对于大多数应用程序来说，拥有一个主防火墙就足够了。

# ruby - 在 Rack 应用程序中使用 RbConfig 而不是 Config

> ID：14159363
> 
> 赞同：1
> 
> 时间：2013-01-04T14:50:50.570
> 
> 标签：ruby, sinatra, rack

虽然，这似乎是一个流行的问题，但我没有找到任何相关的东西。问题是我在使用 Sinatra 应用程序时在控制台中不断出现这种错误

```
/home/alan/.rvm/gems/ruby-1.9.3-p327/gems/rake-0.8.7/lib/rake/alt_system.rb:32: Use RbConfig instead of obsolete and deprecated Config. 
```

我将应用程序运行为

```
bundle exec shotgun 
```

我应该怎么做才能摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:06:38.460

实际上没有什么是错的。它只是警告已重命名的模块。如果您仍然想摆脱它，我建议您升级 rake。

```
gem update rake 
```

# string - 通过删除连续重复来减少字符串长度

> ID：14159364
> 
> 赞同：4
> 
> 时间：2013-01-04T14:50:50.573
> 
> 标签：string, r, dataframe, dimensionality-reduction

我有一个包含 2 个字段的 R 数据框：

```
ID             WORD
1           AAAAABBBBB
2           ABCAAABBBDDD
3           ... 
```

我想通过只保留字母而不是重复的重复字母来简化带有重复字母的单词：

例如：`AAAAABBBBB`应该给我`AB` ， `ABCAAABBBDDD`应该给我`ABCABD`

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T14:55:34.850

这是正则表达式的解决方案：

```
x <- c('AAAAABBBBB', 'ABCAAABBBDDD')
gsub("([A-Za-z])\\1+","\\1",x) 
```

编辑：根据要求，一些基准测试。我在评论中添加了 Matthew Lundberg 的模式，匹配任何字符。看起来这`gsub`要快一个数量级，并且匹配任何字符都比匹配字母要快。

```
library(microbenchmark)
set.seed(1)
##create sample dataset
x <- apply(
  replicate(100,sample(c(LETTERS[1:3],""),10,replace=TRUE))
,2,paste0,collapse="")
##benchmark
xm <- microbenchmark(
    SAPPLY = sapply(strsplit(x, ''), function(x) paste0(rle(x)$values, collapse=''))
    ,GSUB.LETTER = gsub("([A-Za-z])\\1+","\\1",x)
    ,GSUB.ANY = gsub("(.)\\1+","\\1",x)
)
##print results
print(xm)
# Unit: milliseconds
         # expr       min        lq    median        uq       max
# 1    GSUB.ANY  1.433873  1.509215  1.562193  1.664664  3.324195
# 2 GSUB.LETTER  1.940916  2.059521  2.108831  2.227435  3.118152
# 3      SAPPLY 64.786782 67.519976 68.929285 71.164052 77.261952

##boxplot of times
boxplot(xm)
##plot with ggplot2
library(ggplot2)
qplot(y=time, data=xm, colour=expr) + scale_y_log10() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T14:53:50.970

```
x <- c('AAAAABBBBB', 'ABCAAABBBDDD')
sapply(strsplit(x, ''), function(x) paste0(rle(x)$values, collapse=''))
## [1] "AB"     "ABCABD" 
```

# php - 在设定范围内递增整数

> ID：14159367
> 
> 赞同：2
> 
> 时间：2013-01-04T14:50:54.497
> 
> 标签：php, arrays

如果我想遍历一个数组，然后将它们用作循环增量计数器，我该怎么做？

例如，我有多达 5 个值存储在一个数组中。我想遍历它们，在 forst 循环中我想使用一个特定的值，然后再使用另一个特定的值。

下面是伪代码，但是如何将第二个数组带入图片中？第一个范围是动态的和空的，或者最多有 5 个值。第二个将被修复。

```
$array = array(2,6,8); // Dynamic

$array2 = array(11,45,67,83,99); Fixed 5 values

foreach ($array as $value) {
    // First loop, insert or use both 2 and 11 together
    // Second loop, insert or use both 6 and 45
    // Third loop, insert or use both 8 and 67
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:54:41.113

使用`$index => $val`：

```
foreach ($array2 as $index => $value) {
    if ( isset($array[ $index ]) ) {
          echo $array[ $index ]; // 2, then 6, then 8
    }
    echo $value; // 11, then 45, then 67, then 83, then 99 
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/gpPmUG](http://codepad.viper-7.com/gpPmUG)

* * *

如果您希望它在第一个数组的末尾停止，然后遍历第一个数组：

```
foreach ($array as $index => $value) {
    echo $value; // 2, then 6, then 8
    echo $array2[ $index ]; // 11, then 45, then 67
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/578zfQ](http://codepad.viper-7.com/578zfQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:57:15.057

这是一个干净简单的解决方案，它不使用无用且繁重的非标准库：

```
$a = count($array);
$b = count($array2);
$x = ($a > $b) ? $b : $a;
for ($i = 0; $i < $x; $i++) {
    $array[$i]; // this will be 2 the first iteration, then 6, then 8.
    $array2[$i]; // this will be 11 the first iteration, then 45, then 67.
} 
```

我们只是`$i`用来标识两个数组在主`for`循环内的相同位置，以便一起使用它们。主`for`循环将迭代正确的次数，以便两个数组都不会使用未定义的索引（导致通知错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:58:39.787

你可以试试这个-

```
foreach ($array as $index => $value) {
      echo $array[ $index ]; // 2, then 6, then 8
      echo $array2[ $index ]; // 11, then 45, then 67

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:55:03.103

确定两个数组的最小长度。

然后将索引从 1 循环`i`到最小长度。

现在您可以使用`i`两个数组的 -th 元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:55:53.547

这是我认为你想要的：

```
foreach($array as $value){
     for($x = $value; $array[$value]; $x++){
       //Do something here...
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T15:00:43.577

您可以使用[MultipleIterator](http://docs.php.net/manual/en/multipleiterator.construct.php)：

```
$arrays = new MultipleIterator(
    MultipleIterator::MIT_NEED_ANY|MultipleIterator::MIT_KEYS_NUMERIC
);
$arrays->attachIterator(new ArrayIterator([2,6,8]));
$arrays->attachIterator(new ArrayIterator([11,45,67,83,99]));

foreach ($arrays as $value) {
    print_r($value);
} 
```

将打印：

```
Array ( [0] => 2 [1] => 11 ) 
Array ( [0] => 6 [1] => 45 ) 
Array ( [0] => 8 [1] => 67 ) 
Array ( [0] => [1] => 83 ) 
Array ( [0] => [1] => 99 ) 
```

如果您希望它要求两个数组都有一个值，请将标志更改为

```
MultipleIterator::MIT_NEED_ALL|MultipleIterator::MIT_KEYS_NUMERIC 
```

然后会给

```
Array ( [0] => 2 [1] => 11 ) 
Array ( [0] => 6 [1] => 45 ) 
Array ( [0] => 8 [1] => 67 ) 
```

# asp.net - 我猜Linq查询中的Web服务内部错误

> ID：14159368
> 
> 赞同：0
> 
> 时间：2013-01-04T14:50:53.710
> 
> 标签：asp.net, linq, web-services

在调用 Web 服务方法时，我收到如下错误：

> *GenericException
> 发生意外错误。值不能为空。
> 参数名称：source at System.Linq.Enumerable.Where[TSource](IEnumerable `1 source, Func`2 predicate)
> at QuotingGate.CalcsLV.Casco.Standard.Ergo.Calculate(VehicleQuotingParameters parameters, CascoQuote& quote) in c:\Projects\xxx\WebServices\QuotingGate \CalcsLV\Casco\Standard\Ergo.cs：第 152 行
> ，位于 QuotingGate.CalcsBase.CalculatorBase`4.Quote(In parameters) in c:\Projects\xxx\WebServices\QuotingGate\CalcsBase\Base.cs:第 138 行*

上面`Ergo.cs line 152`有这样的 linq 查询：

```
var territory = from c in prices.premiums where c.tariffParam3 == "LV" select c; 
```

谷歌搜索并找到很多情况，`Single`而不是`SingleOrDefault`.. 但在我的情况下，它的 linq 和中继无关紧要，是否有任何结果，对吧？

* * *

价格在这里设置：

```
 ...
      policyDataKASKORetParam1 prices = null;
     prices = ws.GetCascoQuotesUnregistered(quote,
                            parameters.Vehicle.VIN,
                            parameters.Vehicle.Make,
                            parameters.Vehicle.Model,
                            parameters.Vehicle.ManufactureDate.Value.Year,
                            parameters.Vehicle.Value.Value,
                            parameters.Vehicle.EngineCapacity ?? 0,
                            parameters.Insurance.StartDate.Value,
                            parameters.Insurance.Currency.ToString(), irJaunakLiet, parameters.Client.Code, parameters.Vehicle.OwnerCode, irDefinetieServisi);
        enter code here
    ... 
```

及其调用的方法：

```
public policyDataKASKORetParam1 GetCascoQuotesUnregistered(CascoQuote quote, string vin, string make, string model, int year, int vehicleValue, int engine, DateTime policyStartDate, string currency, bool irJaunakLiet, string clientCode, string ownerCode, bool irDefinetieServisi)
        {
            policyDataKASKORetParam1 prices;
            string personCode = string.IsNullOrWhiteSpace(Config.FixedOwnerCode) ? clientCode : Config.FixedOwnerCode;

            DateTime start = policyStartDate;
            DateTime issue = DateTime.Today;
            prices = WS.getOfferDataKASKO(SessionKey,
               personCode, // Holder Code
               null,
               null,
               vin,
               make,
               model, // Model
               year, // Year 
               engine, // Engine
               string.Empty, // Usage
               ownerCode, // Person Code
               true,
               false,
               false,
               false,
               false,
               false,
               true,
               false,
               irJaunakLiet,
               false,
               irDefinetieServisi,
               false, // TODO: All risks
               (double)vehicleValue,
               currency,
               issue,
               start,
               null,
               0d,
           null,
               null);
            if (prices.status != 0)
                quote.ErrorList.Add(new QuoteBase.Error(Errors.InsurerError, string.Format("Error message: {0}", prices.statusText)));
            return prices;
        } 
```

基本上最后一个方法调用了 Web 服务方法。所以我可以假设 Web 服务没有返回任何东西，或者是否有其他可能性是它最终为空的原因。（不知道如何调试它，它在远程服务器上运行..尝试了 WCF 跟踪但没有任何结果..）

问题出在另一个国家，商界人士告诉我所有的 Web 服务都应该工作，所以他们说我的价格。溢价不是空的.. 但是没有调试，不能真正与他们争论。我应该做一个客户端来运行 Web 服务并在我的本地机器上运行它吗？或者是否有另一种可能性来查看运行实例的值？

他们还说 Web 服务没有改变——我也知道 100% 我的代码没有改变，一切都像 10 天前一样工作正常。

（PS我是Junior，导师已经离开了..~4个月的经验而已）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:10:15.013

来自 MSDN，这里是[Where 扩展方法](http://msdn.microsoft.com/en-us/library/bb534803.aspx)的签名：

```
public static IEnumerable<TSource> Where<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate
) 
```

如您所见，`source`是与集合对应的参数，您的错误消息指示“参数名称：源”，所以我的猜测`prices.premiums`是 null。

# android - 使用蓝牙查找其他设备的日期和时间

> ID：14159373
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:08.360
> 
> 标签：android, datetime, bluetooth

是否可以使用蓝牙从我的安卓设备中查找/读取其他蓝牙设备的日期和时间？

注意：其他设备未与我的 android 设备配对。

做了足够的谷歌搜索，但无法得到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:14:51.073

这不在蓝牙规范中：蓝牙本身不提供任何发布日期和/或时间的方式——既不通过蓝牙配置文件，也不通过低级功能。

您必须实现自己的代码，该代码必须在连接的两端运行（即您需要构建一个提供时间的应用程序和一个耗时的应用程序）。

# sharepoint-2010 - 以编程方式将控件添加到 SharePoint VS 代码工作流的自定义信息路径任务表单

> ID：14159374
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:08.410
> 
> 标签：sharepoint-2010, workflow, infopath

我为分配给用户的每个角色创建任务。每个角色都有多种资源。我需要为每个资源添加动态组合框到工作流自定义任务表单。组合框将包含所有帐户。这可以通过自定义信息路径任务表单实现吗？

甚至可以在 infopath 任务表单中添加代码（是否需要管理员批准）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:53:12.210

可以将代码添加到自定义 InfoPath 任务表单。应该只确保 dll 与表单一起部署。

也可以在重复表中添加组合框（所有组合框具有相同的数据源）。重复表的行是在 PageLoad 上创建的，并且它的数据是通过将其作为 XML 嵌入到 Form 字段中从 Workflow 提供的。

```
 public void InternalStartup()
    {
        EventManager.FormEvents.Loading += new LoadingEventHandler(FormEvents_Loading);
    }

    public void FormEvents_Loading(object sender, LoadingEventArgs e)
    {
        string myNamespace = NamespaceManager.LookupNamespace("my");

        XPathNavigator repTable = MainDataSource.CreateNavigator().SelectSingleNode("/my:RoleAssigmentExecution/my:Resources", NamespaceManager);
        if (repTable == null)
        {
            XPathNavigator node = MainDataSource.CreateNavigator().SelectSingleNode("/my:RoleAssigmentExecution", NamespaceManager);
            using (XmlWriter writer = node.AppendChild())
            {
                writer.WriteStartElement("Resources", myNamespace);
                writer.WriteEndElement();
                writer.Close();
            }

        }
        repTable = MainDataSource.CreateNavigator().SelectSingleNode("/my:RoleAssigmentExecution/my:Resources", NamespaceManager);
        if (repTable != null)
        {
            using (XmlWriter writer = repTable.AppendChild())
            {

                XPathNavigator inst = MainDataSource.CreateNavigator().SelectSingleNode("/my:RoleAssigmentExecution/my:Instructions", NamespaceManager);
                writer.WriteStartElement("ResorceAccounts", myNamespace);
                writer.WriteElementString("resource", myNamespace, inst.Value);
                writer.WriteElementString("accountCombo", myNamespace, "");
                writer.WriteEndElement();

                writer.Close();
            }
        }
        else 
        {
            string path = "/my:RoleAssigmentExecution/my:Remarks";
            XPathNavigator node = MainDataSource.CreateNavigator().SelectSingleNode(path, NamespaceManager);
            node.SetValue("can not access Repeating Table");
        }
    } 
```

# css - CSS 无法识别悬停状态

> ID：14159375
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:12.257
> 
> 标签：css, image, button, hover, submit

我的css中有以下内容：

```
.myclasss:hover {
background: url("images/arw_flogin2.png")  no-repeat; border: none;
display: block;
width: 90px;
height: 50px;

} 
```

以及我的 HTML 中的以下内容：

```
<input type="image" title="" class="myclasss" src="images/arw_flogin1.jpg" /> 
```

如果我更改输入类型以提交它可以工作，但不能作为图像提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:54:46.707

您需要在非悬停状态下使用背景图像。使用以下 css 以及输入`type="submit"`

**CSS**

```
.myclasss {
    background: url("images/arw_flogin1.png")  no-repeat; border: none;
    display: block;
    width: 90px;
    height: 50px;

}

.myclasss:hover {
    background: url("images/arw_flogin2.png")  no-repeat; border: none;
} 
```

**HTML**

```
<input type="submit" class="myclasss" value="" /> 
```

当您使用图像类型的输入时，您在`src`属性中设置的图像将应用于前景。因此，当您更改悬停时的背景时，您将看不到它，因为`src`图像仍然存在于前景中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:58:48.227

问题是**输入**标签的 SRC 位于背景**之上**。

Jrod 的方法会起作用，或者您可以结合 flogin1/2 图像并使用**background-position: 0 90px**来改善加载时间。

# internet-explorer-8 - flash 播放器在 explorer 8 中不起作用

> ID：14159377
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:13.023
> 
> 标签：internet-explorer-8, flash

Flash 播放器在 explorer 8（Windows 7 64 位）中不起作用，我无法加载使用 adobe flash 的页面。如果我禁用 flash 插件，页面可以加载但自然没有 flash 动画。它不会进行自动更新。Chrome 可以正常工作。我能做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:54:51.650

您可以尝试升级到更新版本的 Internet Explorer。IE8 已经六岁多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T15:36:43.840

更新到 IE9 没有用，但我后来更新了 Flash。版本 11.1.102 在 IE9 上正常工作

# asp.net - 作为 SVN 工作副本的 ASP.NET 生产网站

> ID：14159382
> 
> 赞同：1
> 
> 时间：2013-01-04T14:51:28.613
> 
> 标签：asp.net, svn

拥有一个生产（实时）asp.net 网站，它也是一个推送更新的工作副本，这是一种好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:13:10.623

一般来说，这被认为是不好的做法，主要是因为源代码控制存储库包含*源代码*，而生产应用程序包含*结果*。两者分开的原因有很多：

*   安全。如果您的源在您的生产服务器上，它就有被查看的风险。也许这是一个问题，也许不是。安全的方法是在生产服务器上没有源。
*   表现。构建源的结果可以以源本身通常不具备的方式优化性能。例如，在 .NET 应用程序中，生产部署不包含调试符号。这在您的特定应用程序中可能不是问题，但需要考虑。
*   多个结果。您的源是实际应用程序，还是用于构建应用程序的信息？可以构建多个版本吗？例如，在 .NET Web 应用程序中，您可能有 Web.config 转换。这些在部署时用于调整构建源的结果。如果源本身被用作实时应用程序，则这些部署时修改不可用。

其他人可能比我能更好地表达这一点，但总的来说，这被认为是不好的做法，是的。您的特定应用程序可能是任何特定原因的例外，或者可能不会受到任何特定原因的有意义的影响，因此我强调“一般”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:13:02.823

根据项目的布局，可能存在一些安全问题。例如，如果您有一个包含一些敏感信息的 .txt 文件，请记住它可以在您的站点中访问。

ASP.NET 不会提供 App_Code 或任何 .cs、.vb、.config 等文件中的任何内容，因此您可以将不希望人们看到的内容放在那里。

此外，对于初始加载性能，您应该通过 VS Publish 命令或 Web 部署项目插件预编译您的网站（假设您正在使用网站项目）。您可以为预编译、可部署的代码创建一个 svn 分支，并在您的服务器上使用该分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T16:14:00.400

您可以使用[http://springloops.io](http://springloops.io)或[http://deployhq.com](http://deployhq.com)等服务仅将某些文件夹推送到服务器。这为您将代码推送到部署提供了很大的灵活性。

# php - 如何使用 Yii 框架记录所有对站点的 HTTP 请求？

> ID：14159383
> 
> 赞同：3
> 
> 时间：2013-01-04T14:51:33.863
> 
> 标签：php, logging, yii, httprequest

我想记录所有对站点、框架 Yii 的 HTTP 请求。

我可以使用框架的标准功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:57:37.580

我们已经使用`onBeginRequest`or完成了它`onEndRequest`。在此处查看更多信息：[如何在 Yii 中使用事件](https://stackoverflow.com/questions/7410045/how-to-use-events-in-yii)

本质上，您将全局请求事件与您自己的类挂钩，然后做任何您想做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-04T09:50:38.170

在[Yii2](http://www.yiiframework.com/)中，事件被调用`beforeRequest`并且`afterRequest`( [http://www.yiiframework.com/doc-2.0/guide-structure-applications.html](http://www.yiiframework.com/doc-2.0/guide-structure-applications.html) )

例如：

```
Yii::$app->on('afterRequest', function($event) {
    //do something...
    //response object is in $event->sender->response
    //response data is in $event->sender->response->data
    //request object is in $event->sender->request
}); 
```

但这是在*响应数据*准备好*响应内容*之前（根据*响应格式*，例如`Response::FORMAT_JSON`），所以如果你想要真正的最终响应正文，你需要这样做（[http://www.yiiframework.com/doc-2.0/指南运行时响应.html#sending-response](http://www.yiiframework.com/doc-2.0/guide-runtime-responses.html#sending-response)）：

```
Yii::$app->response->on(\yii\web\Response::EVENT_AFTER_SEND, function($event) {  //alternatively use EVENT_AFTER_PREPARE
    //now you can access $event->sender->content and eg. $event->sender->getHeaders()
    //Also, you have access to the request through Yii::$app->request
}); 
```

# objective-c - 我们如何实现 selectionRectsForRange: 从 UITextInput 协议？

> ID：14159384
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:36.180
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting, uitextinput

我们如何实现 selectionRectsForRange: from UITextInput Protocol ？有人想出这个吗？它只是非常依赖于特定的用例需求吗？或者框架中有什么东西会调用这个方法？

为了使编译器静音，当然可以删除该方法，但是返回 nil 或空 NSArray 会造成任何伤害吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:50:55.110

根据 WWDC12 的 session 220，这个方法被添加来支持 UITextView 的子类化，实现呈现它自己的文本。遗憾的是，他们在该会话中的示例代码不可用，很想看看它，看看我是否在我的实现中遗漏了任何东西。

它与您的实现方式非常相似，`-firstRectForRange:`只是您将返回涵盖当前选择的所有矩形。

此外，您必须子类`UITextSelectionRect`化（它是一个抽象类，如 UITextPosition/UITextRange），您将从该方法返回一个数组。确保正确计算`containsStart`and`containsEnd`属性，并且在您返回的所有选择矩形中只为每个返回 YES 一次。UITextView 使用这些属性来决定放置选择调整大小“桨”的位置。

返回一个空数组（或者我想是 nil ）将表明 UITextView 不应该为当前选择绘制任何选择矩形。

# jsf - 无法实例化 ManagedBean

> ID：14159386
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:51:41.973
> 
> 标签：jsf, jsf-2

当我的 Web 应用程序从我的`ProductsBean`.

我收到此错误：`Can't instantiate class: beans.ProductsBean`

这是我的`ProductsBean`：

```
@ManagedBean
@ViewScoped
public class ProductsBean implements Serializable {

    private List<ProductBean> products;

    @ManagedProperty(value = "#{applicationBean}")
    private ApplicationBean applicationBean;

    private ProductBean selectedProduct;

    public ProductsBean() {
        Store store = applicationBean.getStore();

        for (String c : store.getCategories()) {
            for (Product p : store.getProductsOfCategory(c)) {
                products.add(new ProductBean(p.getProduct_id(), p.getDescription(), p.getPrice(), p.getCategoryName()));
            }
        } 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:54:51.827

`applicationBean`在构造函数中为 null。

在处理托管 bean 时，尽可能让构造函数保持愚蠢（并且不要在那里使用托管属性）。涉及那些应该在`@PostConstruct`方法中的逻辑，框架将在托管属性更新后执行它。

```
@PostConstruct
private void init(){
  Store store = applicationBean.getStore();

  for (String c : store.getCategories()) {
    for (Product p : store.getProductsOfCategory(c)) {
      products.add(new ProductBean(p.getProduct_id(), p.getDescription(), p.getPrice(), p.getCategoryName()));
    }
  }
} 
```

此外，您需要托管属性的设置器

```
public void setApplicationBean(ApplicationBean applicationBean) {
  this.applicationBean = applicationBean;
} 
```

# grails - Grails params.max 返回一个地图

> ID：14159391
> 
> 赞同：0
> 
> 时间：2013-01-04T14:51:56.710
> 
> 标签：grails, pagination

我是 grails 新手，刚刚开始在工作中开发应用程序。我想做的第一件事是创建一个带有两个表的 gsp，每个表都具有分页功能。通过研究，我发现有一个名为 remotePagination 的插件，它使用 ajax 来更新表格分页。我遇到的问题是“params.max”和“params.offset”值是两个字符串的映射，而不仅仅是一个字符串值。在打开页面时，会调用“列表”闭包，并为最大值和偏移量设置正确的值，比如 10。在第二次调用时，当调用 ajax 闭包时，最大值和偏移量值分别保存在地图中如下：

```
params.max = [10,10]
params.offset = [10,10] 
```

我正在使用的代码如下：

控制器：

```
def list = {
    params.max = Math.min(params.int('max') ?: 10, 100)
    [bookInstanceList: Book.list(params), bookInstanceTotal: Book.count()]
}

def ajaxListBooks = {
    params.max = Math.min(params.int('max') ?: 10, 100)
    render(template: "bookList", model:[bookInstanceList: Book.list(params), bookInstanceTotal: Book.count()])
} 
```

列表.gsp

```
<%@ page import="com.intelligrape.Book" %>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="layout" content="main"/>
  <g:set var="entityName" value="${message(code: 'book.label', default: 'Book')}"/>
  <title><g:message code="default.list.label" args="[entityName]"/></title>
  <g:javascript library="prototype"/>
 </head>

 <body>
   <div class="nav">
     <span class="menuButton"><a class="home" href="${createLink(uri: '/')}"><g:message code="default.home.label"/></a>
    </span>
    <span class="menuButton"><g:link class="create" action="create"><g:message code="default.new.label" args="[entityName]"/></g:link></span>
   </div>

   <div class="body">
     <h1><g:message code="default.list.label" args="[entityName]"/></h1>
     <g:if test="${flash.message}">
       <div class="message">${flash.message}</div>
     </g:if>
   <div id="repoList">
            <g:render template="bookList"/>
   </div>
   </div>
 </body>
</html> 
```

_listBooks.gsp

```
<%@ page import="com.nmi.uk.sw.subzero.Book" %>

<div>
  <table>
    <thead>
    <tr>

        <util:remoteSortableColumn property="author" title="${message(code: 'book.author.label', default: 'Author')}" update="repoList" action="ajaxListBooks"/>
        <util:remoteSortableColumn property="name" title="${message(code: 'book.name.label', default: 'Name')}" update="repoList" action="ajaxListBooks"/>
        <util:remoteSortableColumn property="price" title="${message(code: 'book.price.label', default: 'Price')}" update="repoList" action="ajaxListBooks"/>

    </tr>
    </thead>
    <tbody>
    <g:each in="${bookInstanceList}" status="i" var="bookInstance">
        <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">

            <td><g:link action="show" id="${bookInstance.id}">${fieldValue(bean: bookInstance, field: "author")}</g:link></td>

            <td>${fieldValue(bean: bookInstance, field: "name")}</td>

            <td>${fieldValue(bean: bookInstance, field: "price")}</td>

        </tr>
    </g:each>
    </tbody>
</table>
<div class="paginateButtons">
    <util:remotePaginate total="${bookInstanceTotal}" update="repoList"
                                      action="ajaxListBooks"
                                      pageSizes="[10,20,30,40,50,60,70,80,90,100]" />
</div>
</div> 
```

上面的代码基于 remotePagination 教程的示例应用程序。它没有那么不同。我创建它只是为了在将插件集成到我的应用程序之前查看插件是否可以工作。

我想知道是否有其他人遇到过这个问题以及是否有解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:42:52.237

在您的 中，标签`_bookList.gsp`中有错误：`<util:remotePaginate`

```
pageSizes="[10,20,30,40,50,60,70,80,90,100]" 
```

`pageSizes`应该是地图，而不是列表，例如：

```
pageSizes="[10:'10 Per Page', 20: '20 Per Page', 50:'50 Per Page',100:'100 Per Page']" 
```

# android - SlidingMenu 示例：导入到 Eclipse 中的问题

> ID：14159402
> 
> 赞同：5
> 
> 时间：2013-01-04T14:52:32.530
> 
> 标签：android

我发现了这个 SlidingMenu 库，它允许开发人员创建带有滑动菜单的应用程序（如 Google+、Facebook 应用程序等）。它与一个名为 example 的文件夹一起提供，该文件夹包含一个文件`manifest`和`src`目录，所以我认为这是一个可以看到它的示例......当我尝试将此示例导入​​我的 eclipse 时，我得到了这个：

```
Error: No resource found that matches the given name: attr 'homeAsUpIndicator' 
```

有什么建议可以解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:00:47.140

我也有同样的问题。

1) 您应该下载 SherlockActionBar 并将其导入 Eclipse。从这里获取它[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)

2）然后您必须将 SherlockActionBar 安装为库。操作方法如下： [如何“安装”Action Bar Sherlock？](https://stackoverflow.com/questions/8991113/how-to-install-action-bar-sherlock)

3）你会有几个错误。只需按照本教程解决所有错误： [http ://boroniatechnologies.com/installing-slidingmenu-android-library-and-example/](http://boroniatechnologies.com/installing-slidingmenu-android-library-and-example/)

而已。享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:11:39.487

我有同样的问题，所以我删除了这个

```
<style name="CustomUp">
    <item name="android:homeAsUpIndicator">@drawable/custom_up</item>
</style> 
```

然后清理项目 - >没有错误然后将其放回并重新清理，错误消失了。我不知道这有什么帮助，但确实如此

# javascript - 在 Chrome 开发工具中停用和禁用断点有什么区别

> ID：14159403
> 
> 赞同：16
> 
> 时间：2013-01-04T14:52:39.700
> 
> 标签：javascript, google-chrome, google-chrome-devtools

铬（版本 23.0.1271.101）。我在 OS X 上，如果这很重要的话。

为什么 Chrome 能够禁用和/或停用断点？是否有一些我不知道的电源使用情况？

我*注意到*我可以禁用一些断点，然后全部停用。重新激活它们后，相同的禁用对象将被禁用。除此之外，拥有这两种选择的目的是什么？

![在此处输入图像描述](../Images/9a93c701b176ee24446b206e1436cf9d.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-30T18:36:55.527

Deactivate Breakpoints 关闭断点功能。禁用所有断点是将每个断点标记为禁用的快捷方式。

当您比较 Enable All Breakpoints 和 Activate Breakpoints 时，差异变得更加明显。

可以通过每个断点旁边的复选框启用或禁用单个断点。

![在此处输入图像描述](../Images/34d926ea2c93458d3200fdf855b073f5.png)

禁用所有断点取消选中所有断点，实际上关闭断点功能。Deactivate Breakpoints 显式关闭断点功能。所以这两个选项具有相同的效果。

激活断点启用断点功能，保留各个断点的启用/禁用状态。Enable All Breakpoints 启用每个断点，但如果断点功能已被停用，则不会打开它本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:34:25.580

这是最近铬源的断点原型。如您所见，断点已启用或禁用。我没有看到任何可以反映断点被“禁用”或“停用”的属性。可能跟条件有关。否则我会说这是前端不一致。

```
WebInspector.BreakpointManager.Breakpoint.prototype = {
/**
 * @return {WebInspector.UILocation}
 */
primaryUILocation: function()
{
    return this._primaryUILocation;
},

/**
 * @param {WebInspector.DebuggerModel.Location} location
 */
_addResolvedLocation: function(location)
{
    this._liveLocations.push(this._breakpointManager._debuggerModel.createLiveLocation(location, this._locationUpdated.bind(this, location)));
},

/**
 * @param {WebInspector.DebuggerModel.Location} location
 * @param {WebInspector.UILocation} uiLocation
 */
_locationUpdated: function(location, uiLocation)
{
    var stringifiedLocation = location.scriptId + ":" + location.lineNumber + ":" + location.columnNumber;
    var oldUILocation = /** @type {WebInspector.UILocation} */ (this._uiLocations[stringifiedLocation]);
    if (oldUILocation)
        this._breakpointManager._uiLocationRemoved(this, oldUILocation);
    if (this._uiLocations[""]) {
        delete this._uiLocations[""];
        this._breakpointManager._uiLocationRemoved(this, this._primaryUILocation);
    }
    this._uiLocations[stringifiedLocation] = uiLocation;
    this._breakpointManager._uiLocationAdded(this, uiLocation);
},

/**
 * @return {boolean}
 */
enabled: function()
{
    return this._enabled;
},

/**
 * @param {boolean} enabled
 */
setEnabled: function(enabled)
{
    this._updateBreakpoint(this._condition, enabled);
},

/**
 * @return {string}
 */
condition: function()
{
    return this._condition;
},

/**
 * @param {string} condition
 */
setCondition: function(condition)
{
    this._updateBreakpoint(condition, this._enabled);
},

/**
 * @param {string} condition
 * @param {boolean} enabled
 */
_updateBreakpoint: function(condition, enabled)
{
    if (this._enabled === enabled && this._condition === condition)
        return;

    if (this._enabled)
        this._removeFromDebugger();

    this._enabled = enabled;
    this._condition = condition;
    this._breakpointManager._storage._updateBreakpoint(this);

    var scriptFile = this._primaryUILocation.uiSourceCode.scriptFile();
    if (this._enabled && !(scriptFile && scriptFile.hasDivergedFromVM())) {
        this._setInDebugger();
        return;
    }

    this._fakeBreakpointAtPrimaryLocation();
},

/**
 * @param {boolean=} keepInStorage
 */
remove: function(keepInStorage)
{
    var removeFromStorage = !keepInStorage;
    this._resetLocations();
    this._removeFromDebugger();
    this._breakpointManager._removeBreakpoint(this, removeFromStorage);
},

_setInDebugger: function()
{
    var rawLocation = this._primaryUILocation.uiLocationToRawLocation();
    var debuggerModelLocation = /** @type {WebInspector.DebuggerModel.Location} */ (rawLocation);
    if (debuggerModelLocation)
        this._breakpointManager._debuggerModel.setBreakpointByScriptLocation(debuggerModelLocation, this._condition, didSetBreakpoint.bind(this));
    else
        this._breakpointManager._debuggerModel.setBreakpointByURL(this._primaryUILocation.uiSourceCode.url, this._primaryUILocation.lineNumber, 0, this._condition, didSetBreakpoint.bind(this));

    /**
     * @this {WebInspector.BreakpointManager.Breakpoint}
     * @param {?DebuggerAgent.BreakpointId} breakpointId
     * @param {Array.<WebInspector.DebuggerModel.Location>} locations
     */
    function didSetBreakpoint(breakpointId, locations)
    {
        if (!breakpointId) {
            this._resetLocations();
            this._breakpointManager._removeBreakpoint(this, false);
            return;
        }

        this._debuggerId = breakpointId;
        this._breakpointManager._breakpointForDebuggerId[breakpointId] = this;

        if (!locations.length) {
            this._fakeBreakpointAtPrimaryLocation();
            return;
        }

        this._resetLocations();
        for (var i = 0; i < locations.length; ++i) {
            var script = this._breakpointManager._debuggerModel.scriptForId(locations[i].scriptId);
            var uiLocation = script.rawLocationToUILocation(locations[i].lineNumber, locations[i].columnNumber);
            if (this._breakpointManager.findBreakpoint(uiLocation.uiSourceCode, uiLocation.lineNumber)) {
                // location clash
                this.remove();
                return;
            }
        }

        for (var i = 0; i < locations.length; ++i)
            this._addResolvedLocation(locations[i]);
    }
},

_removeFromDebugger: function()
{
    if (this._debuggerId) {
        this._breakpointManager._debuggerModel.removeBreakpoint(this._debuggerId);
        delete this._breakpointManager._breakpointForDebuggerId[this._debuggerId];
        delete this._debuggerId;
    }
},

_resetLocations: function()
{
    for (var stringifiedLocation in this._uiLocations)
        this._breakpointManager._uiLocationRemoved(this, this._uiLocations[stringifiedLocation]);

    for (var i = 0; i < this._liveLocations.length; ++i)
        this._liveLocations[i].dispose();
    this._liveLocations = [];

    this._uiLocations = {};
},

/**
 * @return {string}
 */
_breakpointStorageId: function()
{
    return this._sourceFileId + ":" + this._primaryUILocation.lineNumber;
},

_fakeBreakpointAtPrimaryLocation: function()
{
    this._resetLocations();
    this._uiLocations[""] = this._primaryUILocation;
    this._breakpointManager._uiLocationAdded(this, this._primaryUILocation);
}
} 
```

# node.js - MongooseJs：如何为所需的唯一索引和枚举失败设置自定义错误消息

> ID：14159410
> 
> 赞同：0
> 
> 时间：2013-01-04T14:52:52.253
> 
> 标签：node.js

```
var userSchema = Schema({
  email: {
    type: String,
    unique: true,
    match: /^[a-z0-9._-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,
    lowercase: true,
    trim: true
  },
  nickname: {
    type: String,
    trim: true,
    required: true
  },
  password: { type: String, required: true },
  url: { type: String, trim: true, default: '' },
  role: {
    type: String,
    enum: [ 'admin', 'reader' ],
    default: 'reader'
  },
  about: { type: String, trim: true },
  created: { type: Date, default: Date.now, required: true }
}); 
```

我想用更用户友好的东西来定制它，但我不知道如何为所需的唯一索引和枚举失败设置自定义错误消息。我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:23:53.117

我认为您不能使用所需选项覆盖错误消息。如果您需要在模式中自定义消息，而不是在保存时，我认为您最好的选择是编写自定义验证器，如下所示：

```
function createdValidator(created) {
  return (created !== undefined && created !== null);
}

....

new Schema({created: { type: Date, default: Date.now, validate: [createdValidator, "custom error message"] } }); 
```

**更新：**

根据[此处](http://mongoosejs.com/docs/api.html#schematype_SchemaType-validate)的文档，您可以进行多个验证，如下所示：

```
var multiple = [
  { validator: createdValidator, msg: "custom error message" },
  { validator: function(created){ return true;}, msg: "You'll never see me" }
];

new Schema({created: { type: Date, validate: multiple }}); 
```

# java - JSP：将文件保存在客户端而不将其存储在服务器上

> ID：14159414
> 
> 赞同：1
> 
> 时间：2013-01-04T14:53:01.983
> 
> 标签：java, html, jsp, download

在我的 jsp 中，有人想将查询结果导出到 csv。不能使用框架。目前，流程如下：

1.  按下按钮，转到servlet
2.  为 csv 准备数据
3.  制作csv并保存到服务器
4.  回到jsp，让他们从锚标签下载新制作的文件。

问题是，我不想在服务器上创建这个文件，因为我必须在之后处理它，但我仍然想给用户“另存为”窗口。那么，有没有办法，例如在会话中放置一个 OutputStream 对象来实现这个结果？谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:06:30.057

servlet 可以生成任何类型的内容。因此，当您单击按钮运行 servlet 时，只需让 servlet 将文件写回客户端即可。您需要将`Content-type`标题设置为“ [text/csv](http://www.rfc-editor.org/rfc/rfc4180.txt) ”（并确保正确设置编码）。您不需要设置`Content-Length`标题；浏览器可以处理。

当 servlet 向浏览器返回数据时，将提示用户保存文件或使用应用程序打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:54:43.383

是的。您无需保存文件。只需将其保存在会话中并将其在内存中发送到`OutputStream`. 我会在给定时间或交付后将其丢弃以节省内存。

适当地设置内容类型和内容配置。这将意味着浏览器正确解释输出并提示您的用户保存它或启动适当的应用程序。

有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/1382612/12960)。

# java - Tomcat下如何配置GWT stacktrace反混淆器？

> ID：14159416
> 
> 赞同：4
> 
> 时间：2013-01-04T14:53:09.340
> 
> 标签：java, gwt, tomcat

我想使用 deobfuscate 选项配置远程日志记录服务。我知道默认情况下符号映射是在 /WEB-INF/deploy/MODULNAME/symbolMaps 文件夹中生成的，并且 GWT 远程记录器实现 (RemoteLoggingServiceImpl) 使用 StackTraceDeobfuscator，它需要 symbolMaps 目录才能工作。我认为 RemoteLoggingServiceImpl 应该自动设置符号映射目录的正确路径，但是在调试模式下我发现 setSymbolMapsDirectory 方法没有在 RemoteLoggingServiceImpl 上调用。为了解决这个问题，我使用“代理”手动调用该方法：

```
public class ConfigurableRemoteLoggingServiceImpl extends RemoteLoggingServiceImpl {

@Override
public void init(final ServletConfig config) throws ServletException {
    super.init(config);

    final String symbolMapsDirectory = config.getInitParameter("symbolMapsDirectory");
    setSymbolMapsDirectory(symbolMapsDirectory);
}
} 
```

并在 web.xml

```
<servlet>
        <servlet-name>remoteLogging</servlet-name>
        <servlet-class>pl.dandelite.empik.sdl.manager.server.service.ConfigurableRemoteLoggingServiceImpl</servlet-class>

        <init-param>
          <param-name>symbolMapsDirectory</param-name>
          <param-value>C:/symbolMaps</param-value>
      </init-param>
</servlet>
<servlet-mapping>
        <servlet-name>remoteLogging</servlet-name>
        <url-pattern>/sdlconsole/remote_logging</url-pattern>
</servlet-mapping> 
```

并在编译期间使用 -extra 参数定义目录

该解决方案有效，但仅当我将绝对路径设置为 symbolMaps 目录时，这有点不切实际；）

现在我的问题是：在 Tomcat 上使用 StackTraceDeobfuscator 配置 RemoteLoggingServiceImpl 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:35:28.627

这是我设置符号目录的方法：

```
@Override
public void init(ServletConfig config) throws ServletException {
    super.init(config);

    // Synchronized so that in a multi-module deployment, there are no conflicts.
    synchronized (RemoteLoggingServiceImpl.class) {
        // Initialize SLF$j bridge logging to redirect jul logs to slf4j. We remove any
        // default loggers to ensure logging doesn't happen to stdout or stderr.
        java.util.logging.Logger rootLogger = LogManager.getLogManager().getLogger("");
        Handler[] handlers = rootLogger.getHandlers();
        for (Handler handler : handlers) {
            rootLogger.removeHandler(handler);
        }
        SLF4JBridgeHandler.install();
    }

    String moduleName = config.getInitParameter("module.name");
    if (StringUtils.isBlank(moduleName)) {
        _logger.error("No module name defined. Please set the module.name servlet init "
                + "parameter to point to the GWT module and enable extra symbolMaps at "
                + "/extra/<module name>/symbolMaps in the servlet context to facilitate "
                + "deobfuscation of stack traces.");
    } else {
        String path = config.getServletContext().getRealPath(
                "/WEB-INF/deploy/" + moduleName + "/symbolMaps/");

        if (path != null) {
            setSymbolMapsDirectory(path);
        }
    } // end else.
} 
```

# javascript - 复制和粘贴不带任何 HTML 格式

> ID：14159417
> 
> 赞同：3
> 
> 时间：2013-01-04T14:53:13.170
> 
> 标签：javascript, html, formatting

我有一个网页，在表格显示中包含所有常用格式的大小颜色等文本。我试图让我的用户更方便地将粘贴复制到电子邮件/Word Doc 或其他内容中。我正在尝试使它成为一个简单的复制/粘贴执行右键单击并选择“粘贴特殊”然后选择“纯文本”的操作，因此它会丢失表格/文本格式。

到目前为止，我已经通过以下方式设法做到了这一点：

```
<script type="text/javascript">
    function Format() {
        var body_element = document.getElementsByTagName('body')[0];
        var selection;
        selection = window.getSelection();
        var quotefrom = "<?php echo $book_text . ' ' . $chapter . ": < br > "; ?>";
        causevar copytext = quotefrom + selection;
        var newdiv = document.createElement('div');
        newdiv.style.background = "white";
        body_element.appendChild(newdiv);
        newdiv.innerHTML = copytext;
        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {
            body_element.removeChild(newdiv);
        }, 0);
    }
    document.oncopy = Format;
</script> 
```

这实际上掩盖而不是删除某些格式。例如这一行： newdiv.style.background = "white"; 只需将任何颜色突出显示并将其更改为白色，只要用户粘贴到具有白色背景的电子邮件中，它似乎就没有该格式。然而，这确实会导致表格格式被删除，这是一件好事。

我真正想要的是能够在此处执行复制/粘贴到此文本区域的操作...完全删除所有格式。我知道它甚至不接近在此处粘贴和粘贴到允许格式化的文档中，但这并不能阻止我尝试解决这个问题:) 感谢您提出的任何建议。

# javascript - 如何从数组javascript中的数组中获取数据

> ID：14159418
> 
> 赞同：0
> 
> 时间：2013-01-04T14:53:13.260
> 
> 标签：javascript, arrays

假设我有一个名为*derps*的数组，然后在其中创建一个数组：

```
derps[0]=new Array(); 
```

**如何**在新创建的数组中获取/设置数据`derps[0]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:55:01.527

只需这样做：

```
derps[0][0] = 'foo';
derps[0][1] = 'bar';
derps[0].push('foobar');
derps[0] = derps[0].concat([5,6,7]);
// Etc, etc.

console.log(derps[0][1]); // 'bar'
console.log(derps[0][2]); // 'foobar'
console.log(derps[0]);    // ["foo", "bar", "foobar", "foobar", 5, 6, 7] 
```

基本上，访问`derps[0]`就像访问任何其他数组一样，因为它*是*一个数组。
我不会列出**[您可以使用的所有方法`derps[0]`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Methods_of_Array_instances)**；-)

此外，而不是：

```
derps[0] = new Array(); 
```

您可以使用“数组文字”表示法：

```
derps[0] = []; // Empty array, or:
derps[0] = ['foo', 'bar', 'foobar']; // <-- With data. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:58:19.050

您可以创建包含数据的数组：

```
derps[0] = [1, 2, 3]; 
```

您可以为数组赋值：

```
derps[0] = new Array();
derps[0][0] = 1;
derps[0][1] = 2;
derps[0][2] = 3; 
```

您可以将值推送到数组：

```
derps[0] = new Array();
derps[0].push(1);
derps[0].push(2);
derps[0].push(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:55:17.923

您可以将`push`数据放入新数组：

```
derps[0].push("some data"); 
```

顺便说一句：您还可以使用数组文字来创建`derps[0]`：

```
derps[0] = []; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:59:53.577

如果你真的希望之前实例化变量的类型，你可以[这样](http://jsfiddle.net/2n68e/3/)进行（JSFiddle）。

```
var derps = [];
derps[0] = [];

derps[0][0] = "test";
derps[0][1] = "test2";

document.write(derps[0][1]);​ 
```

`var`如果您不希望变量是全局的，请不要忘记编写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:59:55.013

简单的：

```
var derps = [];
derps.push([]);
derps[0].push('foo');
derps[0].push('bar'); 
```

# php - 有 26 个外键的 MySQL 表的替代品吗

> ID：14159419
> 
> 赞同：4
> 
> 时间：2013-01-04T14:53:16.987
> 
> 标签：php, mysql

我有一个 InnoDB MySQL 数据库，其中一个表需要能够通过外键连接到其他 26 个表之一。每条记录一次只能连接到这 26 条记录中的一条。该表可能包含不超过 10,000 条记录。有没有其他方法可以做到这一点？

```
-- -----------------------------------------------------
-- Table `db_mydb`.`tb_job`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `db_mydb`.`tb_job` (
  `job_id` INT(11) NOT NULL AUTO_INCREMENT ,
  // Removed 26 other fields that the table requires

  `job_foreignkey_a_id` INT(11) NULL DEFAULT NULL ,
  `job_foreignkey_b_id` INT(11) NULL DEFAULT NULL ,
  `job_foreignkey_c_id` INT(11) NULL DEFAULT NULL ,
  // Removed the other 23 foreign keys fields that are the same

  PRIMARY KEY (`job_id`) ,

  CONSTRAINT `fka_tb_job_tb`
    FOREIGN KEY (`job_foreignkey_a_id` )
    REFERENCES `db_mydb`.`tb_foreignkey_a` (`foreignkey_a_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fkb_tb_job_tb`
    FOREIGN KEY (`job_foreignkey_b_id` )
    REFERENCES `db_mydb`.`tb_foreignkey_b` (`foreignkey_b_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fkc_tb_job_tb`
    FOREIGN KEY (`job_foreignkey_c_id` )
    REFERENCES `db_mydb`.`tb_foreignkey_c` (`foreignkey_c_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
  // Removed the other 23 foreign keys constraints that are the same

ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fka_tb_job_tb` ON `db_mydb`.`tb_job` (`job_foreignkey_a_id` ASC) ;
CREATE INDEX `fkb_tb_job_tb` ON `db_mydb`.`tb_job` (`job_foreignkey_b_id` ASC) ;
CREATE INDEX `fkc_tb_job_tb` ON `db_mydb`.`tb_job` (`job_foreignkey_c_id` ASC) ;
// Removed the other 23 foreign keys indexes that are the same 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:57:25.597

这就是泛型外键的问题，MySQL和朋友们往往不支持。有两种方法可以做到这一点。

正如您所做的那样，第一个是可为空的外键，每种类型都有一个。

另一个，如在 Django 中`Content Types`，是有一个连接表，每一行都有一个行 id 和一个指定要查找的表的字段。然后，您的代码必须根据字段的内容制定 SQL 查询。它运行良好，但有局限性：

第一个的缺点是臃肿，但它为您带来了普通 FK 的优点，即引用完整性和 SQL 连接等，这两者都非常有价值。你不能用第二种方法得到那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:03:49.670

取决于您是否要维护外键约束，您可以拥有一张通过键或表类型引用其中一张表的表。问题是您将失去外键约束。当然，如果您可以创建基于函数的约束，那么它可以为您工作。或者，您可以使用触发器强制执行关系。基于函数的约束在 mysql 中不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:35:15.197

是的，你可以这么做。这两个 StackOverflow 答案在稍微不同的上下文中说明了基本原理。

*   [来自数据库中不同实体的相同数据 - 最佳实践 - 电话号码示例](https://stackoverflow.com/a/5471265/562459)
*   [不同的用户类型/对象在同一个表中拥有内容 - 如何？](https://stackoverflow.com/a/4690648/562459)

使用 MySQL，您需要用外键引用替换关键的 CHECK() 约束。这不适用于 MySQL 的最一般情况，但它*确实*适用于这个特定的应用程序。

如果这些信息不足以让您继续前进，请给我留言，我将尝试进一步扩展此答案。

# c# - 提醒时间和日期匹配

> ID：14159420
> 
> 赞同：0
> 
> 时间：2013-01-04T14:53:18.697
> 
> 标签：c#, asp.net, sql

我正在创建一个提醒以匹配用户输入的日期和时间。我可以使用 a`Timer`和获取当前日期和时间`ScriptManager`。但我不知道如何将日期和时间与用户输入进行比较，并在匹配后使下面的标签可见。有任何想法吗？

这是我的代码：

```
public partial class Reminder : System.Web.UI.Page
{

private void UpdateTimer()
{
    LabelCurrentTime.Text = System.DateTime.Now.ToLongTimeString();
}

protected void Timer1_Tick(object sender, EventArgs e)
{
    UpdateTimer();
}
protected void Button1_Click(object sender, EventArgs e)
{
    string currentdate = LabelCurrentDate.Text;
    string currenttime = LabelCurrentTime.Text;

    string reminderdate = TextBoxReminderDate.Text;
    string remindertime = TextBoxReminderTime.Text;

    Timer1.Enabled = true;

    LabelCurrentTime.Text = System.DateTime.Now.ToLongTimeString();
    LabelCurrentDate.Text = System.DateTime.Now.Date.ToShortDateString();

    if (currentdate == reminderdate)
    {
        if (currenttime == remindertime)
        {
            Label1.Visible = true;
        }
    }
}
protected void Button2_Click(object sender, EventArgs e)
{
    Timer1.Enabled = false;
}
} 
```

这是屏幕截图： [screenshot](http://s14.postimage.org/ixaiyk4rl/Capture.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:04:07.377

您正在尝试将日期处理为字符串。你不应该那样做。

首先，您不应该接受日期作为来自`Textbox`. 有一个`DateTimePicker`专门用于让用户选择日期的特定控件。你应该使用它。

如果您使用日期选择器为用户提供日期，那么您可以使用`DateTime.Now`. 现在您有两个真实日期，您可以使用`>`运算符比较它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:00:19.367

像这样解析您的日期和时间：

```
var dt = DateTime.Parse(currentDate+" "+currentTime);
var dt2 = DateTime.Parse(reminderDate+" "+reminderTime); 
```

然后您使用[DateTime.Compare](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)方法来比较您的 DateTime 对象。

考虑以下：

```
var val = DateTime.Compare(dt,dt2); 
```

如果 val 为 0，则日期和时间相同。如果 val 大于 0，则 currentDate 已超过提醒日期，如果 val 小于零，则 currentDate 在提醒日期之前。

# ruby-on-rails - 如何更改 Rails 应用程序中每个新创建的表？

> ID：14159423
> 
> 赞同：0
> 
> 时间：2013-01-04T14:53:23.880
> 
> 标签：ruby-on-rails

我们需要为数据库中的每个表添加一个特定于表的 Postgres 函数和序列。我想知道是否有一种最佳/简单的方法来确保将来每次创建表时都创建必要的函数和序列。我们使用的是 PostgreSQL 9.2 和 Rails 3.2。

# c - Dijkstra 算法：为什么需要在队列中找到最小距离元素

> ID：14159424
> 
> 赞同：12
> 
> 时间：2013-01-04T14:53:24.583
> 
> 标签：c, algorithm, graph, shortest-path, dijkstra

我编写了这个 Dijksta 算法的实现，它在循环的每次迭代中都`while Q is not empty`没有找到队列的最小元素，而是占据了队列的头部。

这是我写的代码

```
#include <stdio.h>
#include <limits.h>

#define INF INT_MAX
int N;
int Dist[500];
int Q[500];
int Visited[500];
int Graph[500][500];

void Dijkstra(int b){
     int H = 0;
     int T = -1;
     int j,k;

Dist[b] = 0;

Q[T+1] = b;
T = T+1;

while(T>=H){
    j = Q[H];
    Visited[j] = 1;
    for (k = 0;k < N; k++){
        if(!Visited[k] && Dist[k] > Graph[j][k] + Dist[j] && Graph[j][k] != -1){
            Dist[k] = Dist[j]+Graph[j][k];
            Q[T+1] = k;
            T = T+1;
        }
    }

    H = H+1;
}
}  

int main(){

int src,target,m;
int a,w,b,i,j;

scanf("%d%d%d%d",&N,&m,&src,&target);

for(i = 0;i < N;i ++){
    for(j = 0;j < N;j++){
        Graph[i][j] = -1;
    }
}

for(i = 0; i< N; i++){
    Dist[i] = INF;
    Visited[i] = 0;
}

for(i = 0;i < m; i++){
    scanf("%d%d%d",&a,&b,&w);
    a--;
    b--;
    Graph[a][b] = w;
    Graph[b][a] = w;
}

Dijkstra(src-1);

if(Dist[target-1] == INF){
    printf("NO");
}else {
    printf("YES\n%d",Dist[target-1]);
}

return 0;
} 
```

我为我找到的所有测试用例运行了这个，它给出了正确的答案。
我的问题是为什么我们需要找到最小值？谁能**用简单的英语**向我解释一下？我还需要一个测试用例来证明我的代码是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:01:46.963

看看这个样本：

```
1-(6)-> 2 -(7)->3
  \          /
   (7)     (2)
     \    /
       4 
```

即你有长度为6的边从1到2，长度为7的边从2到3，长度为7的边从1到4，边从4到3。我相信你的算法会认为从1到3的最短路径有长度13 到 2，而实际上最好的解决方案是长度 9 到 4。

希望这能说清楚。

编辑：对不起这个例子没有刹车代码。看看这个：

```
8 9 1 3
1 5 6
5 3 2
1 2 7
2 3 2
1 4 7
4 3 1
1 7 3
7 8 2
8 3 2 
```

你的输出是`Yes 8`. 虽然路径`1->7->8->3`只需要 7\. 这是[ideone上的链接](http://ideone.com/ZFvmpS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:06:18.900

我认为您的代码具有错误的时间复杂度。您的代码比较（几乎）所有节点对，这是二次时间复杂度。

尝试添加 10000 个节点和 10000 条边，看看代码是否可以在 1 秒内执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-13T17:06:23.367

> 始终必须以最小距离找出未访问的顶点，否则您将至少有一个边缘错误。例如，考虑以下情况

4 4
1 2 8
2 4 5
1 3 2
3 2 1

```
 (8)   (5)
           1-----2----4
            \   /  
          (2)\ / (1) 
              3 
```

我们从`vertex 1`

```
distance[1]=0 
```

当您访问时，`vertex 1`您已经放松了`vertex 2`，`vertex 3` 所以现在

`distance[2]=8`和`distance[3]=2`

在此之后，如果我们不选择最小值`vertex 2`而是选择，我们得到

`distance[4]=13`

然后选择`vertex 3`哪个会给

```
distance[2]=3 
```

因此我们最终`distance[4]=13`应该是

`distance[4]=8`

因此，我们应该在 Dijkstra 的每个阶段从 unvisited 中选择最小值，这可以使用`priority_queue`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-10T22:26:02.983

如果您为下图运行算法，则取决于子项的顺序。假设我们正在寻找从 1 到 4 的最短路径。

[![反例](../Images/a0e8994bdc2644dc64277a6900846f6c.png)](https://i.stack.imgur.com/0Rq18.png)

如果你从 1 开始的队列，

```
dist[1] = 0
dist[2] = 21
dist[3] = 0 
```

并且`seen = {1}`当队列被推送时`2`，`3`现在如果我们从队列中消耗 2，它将生成`dist[4] = 51`, `seen={1,2}`, `q = [`~~1~~ `,`~~2~~`,3,4]`并且下次`3`从队列中消耗的时间`2`不会再次添加到队列中，因为它已经在`seen`. 因此，该算法稍后会将距离更新为 12+31=43 ，`1->3-5->4`但最短路径是 32 并且它是 on `1->3->2->4`。

让我用代码示例讨论一些其他方面。假设我们有一个连接列表，`(u,v,w)`其中 node`u`有一个加权和有向边到`v`weight `w`。让我们准备如下图和边：

```
graph, edges = {i: set() for i in range(1, N+1)}, dict()
for u,v,w in connection_list:
    graph[u].add(v)
    edges[(u,v)] = w 
```

## ALGORITHM1 - 如果未访问，则选择要添加的任何孩子

```
q = deque([start])
seen = set()
dist = {i:float('inf') for i in range(1, N+1)}
dist[start] = 0

while q:
    top = q.pop()
    seen.add(top)
    for v in graph[top]:
        dist[v] = min(dist[v], dist[top] + edges[(top, v)])
        if v not in seen:
            q.appendleft(v) 
```

这个已经在上面讨论过了，它会给我们错误的结果 43 而不是 32 用于 1 和 4 之间的最短路径。

问题不在于将 2 重新添加到队列中，然后让我们`seen`再次摆脱和孩子。

## ALGORITHM2 - 再次将所有孩子添加到队列中

```
while q:
    top = q.pop()
    seen.add(top)
    for v in graph[top]:
        dist[v] = min(dist[v], dist[top] + edges[(top, v)])
        q.appendleft(v) 
```

这在这种情况下会起作用，但它只适用于这个例子。这个算法有两个问题，

1.  我们再次添加相同的节点，因此对于更大的示例，复杂性将取决于边数`E`而不是节点数`V`，对于密集图，我们可以假设`O(E) = O(N^2)`。
2.  如果我们在图中添加循环，它将永远运行，因为没有停止检查。所以这个算法不适合循环图。

所以这就是为什么我们必须花费额外的时间来选择最小的孩子，如果我们用线性搜索来做，我们最终会得到与上面相同的复杂性。但是如果我们使用优先级队列，我们​​可以将最小搜索减少到`O(lgN)`而不是`O(N)`. 这是代码的线性搜索更新。

## ALGORITHM3 - 具有线性最小搜索的 Dijkstra 算法

```
q = [K]
seen = set()
dist = {i:float('inf') for i in range(1, N+1)}
dist[start] = 0

while q:
    min_dist, top = min((dist[i], i) for i in q)
    q.remove(top)
    seen.add(top)
    for v in graph[top]:
        dist[v] = min(dist[v], dist[top] + edges[(top, v)])
        if v not in seen:
            q.append(v) 
```

现在我们知道了下一次可以记住使用堆来获得最优 Dijkstra 算法的思考过程。

# arrays - 在matlab中比较和删除数组

> ID：14159425
> 
> 赞同：0
> 
> 时间：2013-01-04T14:53:26.707
> 
> 标签：arrays, matlab

我正在尝试编写一个短代码来将 .m 文件（testin1.m）读入一个数组，并搜索一个特定的单词（'auto'）。如果找到匹配，删除它。我有以下代码，请帮我找出我的错误。

```
fid = fopen('testin1.m');
 txt = textscan(fid,'%s');
fclose(fid);
m_file_idx = 1;
data=['auto'];
B=cellstr(data);
 for idx = i : length(txt)
 A=txt{i};
 is_auto=isequal(A, B);
 if is_auto==0
 txt{i}=[];
 end
end 
```

如果 txt{i}=auto 那么它应该删除该行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:21:17.850

AK4749 的答案在显示你出错的地方是绝对正确的。我将为您的解决方案添加一个更短的替代解决方案：

```
C = textread('testin1.m', '%s', 'delimiter', '\n');
C = C(cellfun(@isempty, regexp(C, 'auto'))); 
```

而已！

*编辑＃1：修改答案以删除包含单词“auto”的行，而不仅仅是单词本身。
*编辑＃2：修改答案以接受正则表达式。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:55:15.550

这是我遇到过很多很多次的错误：

当你设置时`txt(i) = []`，你改变了数组的长度。您的 for 循环条件不再有效。

更好的选择是使用强大的索引功能：

`A(find(condition)) = [];`

或考虑长度的变化：

```
A(i) = [];
i--; % <-- or i++, it is too early to think, but you get the idea 
```

编辑：我刚刚注意到你也在`A`你的程序中使用。我的只是一些随机变量名称，与您可能使用的 A 不同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:21:26.633

设置时`txt(i) = []`，您更改了数组的长度，但循环索引不考虑更改。您可以使用[逻辑索引](http://www.mathworks.com/help/matlab/math/matrix-indexing.html?s_tid=doc_12b#bq7egb6-1)来避免循环和问题。

例子：

```
wordToDelete = 'auto';
txt = {'foo', 'bar', 'auto', 'auto', 'baz', 'auto'}
match = strcmp(wordToDelete, txt)
txt = txt(~match) 
```

输出：

```
txt = 
    'foo'    'bar'    'auto'    'auto'    'baz'    'auto'
match =
     0     0     1     1     0     1
txt = 
    'foo'    'bar'    'baz' 
```

# c# - 工厂应该设置模型属性吗？

> ID：14159426
> 
> 赞同：16
> 
> 时间：2013-01-04T14:53:28.963
> 
> 标签：c#, asp.net, solid-principles

作为整体[SOLID](http://www.codeproject.com/Articles/60845/The-S-O-L-I-D-Object-Oriented-Programming-OOP-Prin)编程工作的一部分，我在基础框架 API 中创建了一个工厂接口和一个抽象工厂。

人们已经开始重载工厂的 Create 方法。问题是人们用模型属性重载了 Create 方法（因此期望工厂填充它们）。

**在我看来，属性设置不应该由工厂来完成。我错了吗？**

```
public interface IFactory
{
    I Create<C, I>();
    I Create<C, I>(long id); //<--- I feel doing this is incorrect

    IFactoryTransformer Transformer { get; }
    IFactoryDataAccessor DataAccessor { get; }
    IFactoryValidator Validator { get; }
} 
```

**更新 - 对于那些不熟悉 SOLID 原则的人，这里有一些：**

**单一职责原则**
它指出每个对象都应该有单一职责，并且职责应该完全由类封装

**Open/Closed 原则**
这个原则的意思是当一个请求需要添加到你的应用程序中时，你应该能够在不修改旧类的情况下处理它，只需要添加子类和新的实现。

**依赖倒置原则**
它说你应该解耦你的软件模块。为此，您需要隔离依赖项。

**总体而言：**
我 90% 确定我知道答案。但是，我希望已经在使用 SOLID 的人进行一些很好的讨论。感谢您提出宝贵意见。

**更新 - 那么我认为 SOLID 工厂应该做什么？**

恕我直言，一个 SOLID 工厂提供适当的对象实例......但这样做的方式隐藏了对象实例化的复杂性。例如，如果您有一个 Employee 模型……您会要求工厂为您提供合适的模型。DataAccessorFactory 会给你正确的数据访问对象，ValidatorFactory 会给你正确的验证对象等等。

例如：

```
var employee = Factory.Create<ExxonMobilEmployee, IEmployee>();
var dataAccessorLdap = Factory.DataAccessor.Create<LDAP, IEmployee>();
var dataAccessorSqlServer = Factory.DataAccessor.Create<SqlServer, IEmployee>();
var validator = Factory.Validator.Create<ExxonMobilEmployee, IEmployee>(); 
```

进一步举个例子，我们会......

```
var audit = new Framework.Audit(); // Or have the factory hand it to you
var result = new Framework.Result(); // Or have the factory hand it to you

// Save your AuditInfo
audit.username = 'prisonerzero';

// Get from LDAP (example only)
employee.Id = 10;
result = dataAccessorLdap.Get(employee, audit);
employee = result.Instance; // All operations use the same Result object

// Update model    
employee.FirstName = 'Scooby'
employee.LastName = 'Doo'

// Validate
result = validator.Validate(employee);

// Save to SQL
if(result.HasErrors)
     dataAccessorSqlServer.Add(employee, audit); 
```

**更新 - 那么我为什么要坚持这种分离呢？**

我觉得职责分离会产生更小的对象、更小的单元测试，并且它增强了可靠性和维护性。我认识到这样做是以创建更多对象为代价的……但这正是 SOLID 工厂保护我的原因……它隐藏了收集和实例化所述对象的复杂性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T16:08:09.343

我会说它坚持[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，只要它是简单的*值接线*，我不认为它是问题/违规。而不是拥有

```
var model = this.factory.Create();
model.Id = 10;
model.Name = "X20"; 
```

分散在您的代码库中，将它放在一个地方几乎总是更好。未来的合同变更、重构或新要求将更容易处理。

值得注意的是，如果这样的对象创建然后立即属性设置是*常见*的，那么这是**您的团队已经发展的一种模式**，并且开发人员添加重载只是**对这一事实的回应**（特别是，一个好的）。引入 API 来简化这个过程是应该做的。

再说一次，如果它缩小到简单的分配（就像在你的例子中），我会毫不犹豫地保持重载，特别是如果它是你经常注意到的东西。当事情变得更复杂时，这将是发现新模式的标志，也许你应该求助于其他标准解决方案（例如[**构建器模式**](http://en.wikipedia.org/wiki/Builder_pattern)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T23:04:38.180

假设您的工厂接口是从应用程序代码中使用的（而不是基础设施组合根），它实际上代表了一个服务定位器，可以将其视为依赖注入的反模式。另请参阅[服务定位器：角色与机制](http://blog.ploeh.dk/2011/08/25/ServiceLocatorRolesVsMechanics.aspx)。

请注意，代码如下：

```
var employee = Factory.Create<ExxonMobilEmployee, IEmployee>(); 
```

只是语法糖。它不会消除对具体`ExxonMobilEmployee`实现的依赖。

您可能还对[弱类型与强类型消息通道](http://blog.ploeh.dk/2011/09/23/WeaklytypedVersusStronglytypedMessageChannels.aspx)和[无服务位置的消息调度](http://blog.ploeh.dk/2011/09/19/MessageDispatchingWithoutServiceLocation.aspx)（这些说明此类接口如何违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）以及 Mark Seemann 的其他出版物感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T17:48:28.810

经过大约 6 个月的依赖注入经验，我只发现了少数几个工厂应该设置属性的情况：

1.  如果 setter 标记为`internal`，并且属性预计仅由工厂设置一次。这通常发生在仅具有`get`ter 属性的接口上，其实现预计将通过工厂创建。

2.  当模型使用属性注入时。我很少看到使用属性注入的类（我也尽量避免构建这些），但是当我看到一个并且所需的服务仅在其他地方可用时，这是你别无选择的情况。

最重要的是，将`public set`ters 排除在工厂之外。仅设置标记为“`internal`让客户端决定需要设置哪些属性（如果允许）”的属性。这将使您的工厂清除不需要的功能。

# ruby - 错误数量的参数（0 代表 1）使用除非

> ID：14159432
> 
> 赞同：0
> 
> 时间：2013-01-04T14:53:57.500
> 
> 标签：ruby, arguments

如果您在某个页面（主页）上，我正在使用除非停止执行一行

我当前的代码如下所示：

```
on_page(CleanHomePage).products unless on_page.url.include?('home') 
```

其中 CleanHomePage 是一个 PageObject，它有一个我称之为产品的链接。如果您在主页上，则不必执行此步骤，因此我想检查“主页”的 url。

我尝试了上面的代码，但尽我所能，我仍然得到`ArgumentError`：错误数量的参数（0 代表 1），我不明白，因为 ('home') 是要包含的参数？和 on_page.url.include？是除非的论据。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:58:44.013

看起来该`on_page`方法需要 1 个参数，但是当您在“除非”条件下调用它时，您并没有给它任何参数。

```
on_page(CleanHomePage).products unless on_page(put_something_here).url.include?('home') 
```

我对 on_page 方法一无所知，但是您正在做的事情似乎很奇怪。`request.path`您可以在 Rails 中使用类似或的内容获取当前请求的 URL `request.url`。

# java - ServiceMix 4.4.2 通过 Rest 代理 FTP，无法从 ftp 读取文件

> ID：14159433
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:54:05.903
> 
> 标签：java, apache-camel, esb, apache-servicemix

我正在处理如何在 SMX 4.4.2 中使用 Camel 读取文件的问题，但仅限于无法在 Camel 路由中执行读取操作的情况下。我需要从文件中读取数据并将其转换为 XML，然后将其返回给请求者（请求者通过 REST 服务访问 SMX）。在 REST 调用之后，我在读取文件时遇到了严重问题。

路线是这样的：

```
<jaxrs:server id="restService" address="http://localhost:9000/REST/"
                    staticSubresourceResolution="true">
                    <jaxrs:serviceBeans>
                            <ref bean="restFtpBean" />
                    </jaxrs:serviceBeans>
</jaxrs:server>

<bean id="restFtpBean" class="poc.rest.RESTFtpProxyService" />

<cxf:rsServer id="rsServer" address="http://localhost:9000/REST/"
        serviceClass="poc.rest.RESTFtpProxyService" />

<camel:camelContext xmlns="http://camel.apache.org/schema/spring">
<endpoint id="ftpProvider" uri="ftp://localhost:21/?fileName=test.xml" />
        <route>
                <from uri="cxfrs://bean://rsServer" />               
                <to ref="ftpProvider" />
        </route>
</camel:camelContext> 
```

在这种情况下，骆驼尝试写入文件！我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:32:23.610

总是建议学习和熟悉 EIP [http://camel.apache.org/content-enricher.html](http://camel.apache.org/content-enricher.html)

您的用例需要从路由中使用文件，并且有一个 EIP 模式：[http](http://camel.apache.org/content-enricher.html) ://camel.apache.org/content-enricher.html 。请参阅有关使用 pollEnrich 使用/轮询文件的部分。

# symfony - 如何从 symfony2 服务写入 flash 消息？

> ID：14159434
> 
> 赞同：0
> 
> 时间：2013-01-04T14:54:10.767
> 
> 标签：symfony

你们中的任何一个 symfony2 大师都可以告诉我如何从 symfony2 服务中写一个 flash 消息吗？

当我如下注入容器时，我以为我有我需要的东西，但显然没有，我收到错误

```
Fatal error: Call to undefined method appDevDebugProjectContainer::getRequest() in /var/www/cloudsign_beta/src/BizTV/CommonBundle/Helper/globalHelper.php on line 135 
```

所以显然我无法访问请求......如果我也必须从控制器传递它，我很快就会失去服务的意义，它本身无法做任何事情=）

```
<?php
namespace BizTV\CommonBundle\Helper;

use Symfony\Component\DependencyInjection\ContainerInterface as Container;
use Doctrine\ORM\EntityManager as EntityManager;

use BizTV\CommonBundle\Entity\Log;

class globalHelper {    

    private $container;
    private $em;

    public function __construct(Container $container, EntityManager $em) {
        $this->container = $container;
        $this->em = $em;
    }

    public function log($type,$message) {

        // currently $type can be 'success', 'fail' or 'error'.

        $currentUser = $this->container->get('security.context')->getToken()->getUser();
        $currentCompany = $this->container->get('security.context')->getToken()->getUser()->getCompany();

        //if the $type is one that we want to write to the log then create log entity (we don't log failed attempts at operations, but we do log errors.
        if ($type == 'success') {
            $em = $this->em;
            $now = new \DateTime("now");

            $entity  = new Log();
            $entity->setCompany($currentCompany);
            $entity->setExecutor($currentUser);
            $entity->setTime($now);
            $entity->setEventType($type);
            $entity->setEventMessage($message);

            $em->persist($entity);
            $em->flush();
        }

        //flash out the $message message text
        $container = $this->container;
        $session = $container->getRequest()->getSession()->setFlash($type, $message);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:58:34.410

```
$session = $container->get('request')->getSession()->setFlash($type, $message); 
```

但要小心，因为您可能不知道是否`request`存在。管理此问题的正确方法是将[您的服务限制在`request`范围内](http://symfony.com/doc/current/cookbook/service_container/scopes.html#setting-the-scope-in-the-definition)。

# android - FIPS 合规性和 BouncyCastle

> ID：14159435
> 
> 赞同：4
> 
> 时间：2013-01-04T14:54:16.540
> 
> 标签：android, cryptography, bouncycastle, fips

[如果我的 Android 应用仅使用此处](http://csrc.nist.gov/publications/fips/fips140-2/fips1402annexa.pdf)提供的加密算法，我想知道它是否符合 FIPS 140-2 ？我使用 SpongyCastle 来实现这些算法。

编辑：一个普遍的问题：可以在可以通过 FIPS 认证的模块中使用像 BouncyCastle/SpongyCastle 这样的开源库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:11:31.553

Bouncy Castle 未通过 FIPS 140-2 认证，因此 SpongyCastle 未通过认证。Mocana 的[NanoCrypto](https://mocana.com/nanocrypto.html)已通过 FIPS 140-2 认证，适用于一些特定的 android 操作系统/硬件组合。

一般来说，FIPS 140-2 认证需要相当多的资金，所以不要指望开源库（OpenSSL 除外）获得 FIPS 认证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T08:33:53.867

认证的成本不可忽略，尤其是对于开源项目，但 BouncyCastle 现在有 FIPS 140-2 认证版本。

可以在 csrc.nist.gov 上搜索认证
[https://csrc.nist.gov/projects/cryptographic-module-validation-program/validated-modules/search?SearchMode=Basic&ModuleName=Bouncy+Castle&CertificateStatus=Active&ValidationYear=0](https://csrc.nist.gov/projects/cryptographic-module-validation-program/validated-modules/search?SearchMode=Basic&ModuleName=Bouncy+Castle&CertificateStatus=Active&ValidationYear=0)

例如
[https://csrc.nist.gov/projects/cryptographic-module-validation-program/Certificate/3514](https://csrc.nist.gov/projects/cryptographic-module-validation-program/Certificate/3514)

其他资源
[https://www.bouncycastle.org/fips_faq.html](https://www.bouncycastle.org/fips_faq.html)
[https://www.bouncycastle.org/fips-java/BCFipsIn100.pdf](https://www.bouncycastle.org/fips-java/BCFipsIn100.pdf)

# c# - SendMessage 和 WM_CLOSE

> ID：14159459
> 
> 赞同：3
> 
> 时间：2013-01-04T14:55:17.800
> 
> 标签：c#

我正在创建一个简单的 C# 应用程序来监视服务器上的销售应用程序，如果任何消息框出现特定的窗口名称以关闭窗口并继续该过程。供应商有随机出现的信息消息框，它会挂起应用程序，直到单击 X 或 OK 按钮。出现了两种类型的消息框，一种在使用我的应用程序时可以正常关闭，而另一种则没有。它们看起来都非常相似，只是其中一个嵌入了 sql 文本作为消息的一部分。FindWindow 找到了这两个消息框，它只是在 SendMessage 运行时它不会关闭第二种类型的消息框，即使它看到它也是如此。我也尝试过 PostMessage 并且遇到了同样的问题。

这就是我所拥有的：

```
 private const int WM_CLOSE = 0x10;

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

    IntPtr ErrorPopUp = FindWindow(null, WindowToClose.Trim());
                        if (ErrorPopUp != IntPtr.Zero) {
                            try {
                                Thread.Sleep(200);
                                SendMessage(ErrorPopUp, WM_CLOSE, IntPtr.Zero, IntPtr.Zero);
                                _WMExceptionDal.LogErrorMsg(_WMException);

                            } catch (Exception ex) {
                                _WMException.txt_iferror = "Unable to close the popup window";
                                _WMException.txt_sqlerrtext = ex.ToString();
                                _WMExceptionDal.LogErrorMsg(_WMException);
                            }
                        } 
```

其他方法的任何建议，或者如果我做错了什么，为什么某些消息框会被 WM_CLOSE 关闭，为什么有些不会我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-01T21:59:17.477

答案比您想象的要简单：您收到的错误弹出窗口有一个“确定”按钮，而窗口标题栏区域没有“关闭”按钮。

它们非常非常原始：window proc 的消息处理仅限于对话框按钮后面的功能：

`SendMessage(ErrorPopUp, WM_COMMAND, IDOK, IntPtr.Zero);`

如果您发送它`WM_CLOSE`，则没有人在家：该窗口的消息处理程序中没有任何内容可以响应该消息。是的，曾经有一段时间我认为**所有**的窗口也会响应`WM_CLOSE`消息。

对响应来自其他线程的“关闭”消息的对话框窗口也有限制，但我认为这不是这里发生的情况。（但是，如果对话框在标题栏中**确实**有一个“x”按钮来关闭它，并且它没有响应您的`WM_CLOSE`消息，这是最可能的解释）。

无论哪种方式，您都在向它发送错误消息：创建对话框是为了响应按钮上列出的用户输入，这些是您发送的消息 -`WM_COMMAND`带有消息标识符：

```
private const int WM_COMMAND = 0x111;

private const int dlgOK = 0x1;
private const int dlgCANCEL = 0x2;
private const int dlgABORT = 0x3;
private const int dlgRETRY = 0x4;
private const int dlgIGNORE = 0x5;
private const int dlgYES = 0x6;
private const int dlgNO = 0x7; 
```

问题*“哪个标识符？”* 通常是无关紧要的——你知道这里是“好的”——但是`GetDlgItem()`如果你需要询问，User32 函数会检查存在哪些对话框函数。

另外：注意带有“取消”按钮的对话框 - 对话框中有取消功能的实现，可以启用窗口菜单并在标题栏中为您提供关闭“x”按钮，*其中一些*实现响应`WM_CLOSE`消息（他们也应该回复 `WM_SYSCOMMAND, SC_CLOSE`）；但是您不明智地依赖`WM_COMMAND, dlgCANCEL`.

# .htaccess - _get 变量的简单 .htaccess 重写

> ID：14159461
> 
> 赞同：0
> 
> 时间：2013-01-04T14:55:17.727
> 
> 标签：.htaccess, rewrite

我正在使用带有 _get 变量的页面的网站上工作，例如，您可以通过使用 www.thewebsite.com/users/username 访问 www.thewebsite.com/users.php?uservar=username。

我遇到的问题是，当我还尝试添加 url 重写时，它也会切断文件扩展，因此 aboutus.php 变成关于我们的。

我可以在一个 .htaccess 文件中拥有这两个功能吗？

我试过了，但似乎效果不佳

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ /user.php?page=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:25:29.387

您可以同时拥有两者，但您需要将路由规则（以 user.php 为目标的规则）*低于*尝试重新附加扩展的规则。所以是这样的：

```
# whatever rule you have to re-attach the extension:
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ /$1.php [L]

# now your user routing rule, make sure you add the condition:
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ /user.php?page=$1 [L] 
```

# iphone - didSelectRowAtIndexPath：嵌套推送动画

> ID：14159462
> 
> 赞同：1
> 
> 时间：2013-01-04T14:55:24.913
> 
> 标签：iphone, objective-c, ios, uitableview, uinavigationcontroller

我正在尝试在 didSelectRowAtIndexPath: UITableView 的委托方法中从 NEOfficesRootViewController 推送 NEOfficesDetailViewController。这个 UITableView 附加了 NSFetherResultsController 。

在常见情况下一切正常， **但是**如果我在 NSFetcherResultsController 的上下文发生变化（单个上下文，主线程上的所有更改）时多次点击表格的行，则 didSelectRowAtIndexPath: 方法将被多次调用，这将导致嵌套推送动画。

我还提到了一件奇怪的事情：didSelectRowAtIndexPath: 在所有上下文计算完成后被多次调用，似乎 UITableView 将我的点击保存在队列中，然后（当主线程空闲时）释放它们。因此，如果我在计算期间在表格视图的行上点击 4 次，didSelectRowAtIndexPath: 方法将在所有计算后调用 4 次。这是我的调试清单：

```
2013-01-04 16:41:14.038 nightexpress[858:707] connection created: YES
2013-01-04 16:41:14.414 nightexpress[858:707] NEOfficesRootViewController: viewDidAppear: called
2013-01-04 16:41:16.625 nightexpress[858:707] connection received response: 200 no error
2013-01-04 16:41:16.632 nightexpress[858:707] connection finish loading. data
2013-01-04 16:41:17.445 nightexpress[858:707] started deleting sequence
2013-01-04 16:41:17.460 nightexpress[858:707] finished deleting sequence
2013-01-04 16:41:17.463 nightexpress[858:707] starting saving sequence
2013-01-04 16:41:17.585 nightexpress[858:707] contextWillSave: called
2013-01-04 16:41:18.763 nightexpress[858:707] contextDidSave: called
2013-01-04 16:41:18.782 nightexpress[858:707] finished saving sequence
2013-01-04 16:41:18.784 nightexpress[858:707] officesUpdateSentAndReceivedResponse: called
2013-01-04 16:41:18.796 nightexpress[858:707] updateFetchingLocationUI called
2013-01-04 16:41:19.220 nightexpress[858:707] NEOfficesRootViewController: tableView:    didSelectRowAtIndexPath: 0 0
2013-01-04 16:41:19.261 nightexpress[858:707] NEOfficesDetailViewController: viewDidLoad: called
2013-01-04 16:41:19.266 nightexpress[858:707] NEOfficesDetailViewController: initializing scrollView content
2013-01-04 16:41:19.276 nightexpress[858:707] NEOfficesDetailViewController: updateFetchingLocationUI called
2013-01-04 16:41:19.279 nightexpress[858:707] NEOfficesDetailViewController: configureAndInstallAnotations called. initial annotation count: 0
2013-01-04 16:41:19.288 nightexpress[858:707] NEOfficesRootViewController: viewWillDisappear: called
2013-01-04 16:41:19.290 nightexpress[858:707] NEOfficesDetailViewController: viewWillAppear: called
2013-01-04 16:41:19.301 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 1
2013-01-04 16:41:19.303 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.310 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 3
2013-01-04 16:41:19.313 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.319 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 6
2013-01-04 16:41:19.321 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.328 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 4
2013-01-04 16:41:19.330 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.335 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 3
2013-01-04 16:41:19.458 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.469 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 1
2013-01-04 16:41:19.470 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.478 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 3
2013-01-04 16:41:19.479 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.486 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 6
2013-01-04 16:41:19.488 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.499 nightexpress[858:707] NEOfficesRootViewController: tableView: didSelectRowAtIndexPath: 0 7
2013-01-04 16:41:19.501 nightexpress[858:707] nested push animation can result in corrupted navigation bar
2013-01-04 16:41:19.978 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.982 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.984 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.985 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.993 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.995 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:19.997 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:20.000 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:20.002 nightexpress[858:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-04 16:41:20.012 nightexpress[858:707] Unbalanced calls to begin/end appearance transitions for <NEOfficesDetailViewController: 0x100fba70>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:10:47.467

在获取数据时阻止用户交互。

在你开始获取之前放置一个阻止交互的视图，当获取完成时移除阻塞视图。

[MBProgressHUD](https://github.com/matej/MBProgressHUD)对此有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:07:04.947

通过用子视图覆盖 UI 或直接更改 userInteraction 来阻止 UI 将不会导致任何结果。使用 setDelaysContentTouches:NO UITableView 的方法为我解决了这个问题。

@Jeffery，感谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:52:23.780

[tableView setDelaysContentTouches:NO]; 是正确的答案...

# google-chrome - 打字稿源图未在 chrome 中加载

> ID：14159469
> 
> 赞同：2
> 
> 时间：2013-01-04T14:55:49.797
> 
> 标签：google-chrome, visual-studio-2012, typescript

我试过在 chrome 中调试 typescript 代码，它在 chrome 中启用了源映射。但是在网络选项卡中可以看到没有加载源映射文件。

我正在使用 VS2012 和最新的 Web Essentials 包。

任何想法下一步该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T08:54:31.477

如果要在 VS 2012 内部调试，只需在 VS 内部设置断点，并在调试时使用 Internet Explorer。

[![](../Images/727c1f6823bba2f6ea1689685c12053c.png)](https://i.stack.imgur.com/xxCbA.png)

从[打个招呼到 TypeScript](https://www.devbridge.com/articles/say-hello-to-typescript/)

如果您想在 Chrome 中使用 sourcemap 进行调试，请确保：

1.）它们在 Chrome 中启用（你说你做到了）

[![](../Images/83e595aee5b7f525f1d6378938e80af4.png)](https://i.stack.imgur.com/xB0c8.png)

2.) 它们由 IDE 生成

您可以使用`Web Essentials`插件启用它们的生成（查看上面的文章了解详细信息）

或者

手动编辑项目文件的构建步骤：[https ://stackoverflow.com/a/12730715/750216](https://stackoverflow.com/a/12730715/750216)

**更新：**

似乎至少在 VS Express 2012 for Web 中，默认情况下会自动生成源地图 - 无需设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:40:34.637

您不会在网络选项卡中看到源映射文件。如果您转到 Sources 选项卡，您将在左侧的 Sources 列表中看到您的打字稿文件。从那里你可以设置你的断点。

![在此处输入图像描述](../Images/36d6c543e29e55074a197c499286034f.png)

# android - 如何开始构建定位系统应用程序

> ID：14159473
> 
> 赞同：-3
> 
> 时间：2013-01-04T14:56:00.477
> 
> 标签：android, android-intent

我想在 android API 中构建一个小型应用程序，它无法使用 GPS 技术跟踪我朋友的位置。我想使用 OpenStreetMaps，但不知道我可以从哪里开始这个项目。请指导我走向正确的道路..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:22:31.680

[在http://wiki.openstreetmap.org/wiki/API_v0.6](http://wiki.openstreetmap.org/wiki/API_v0.6)找到 OS Maps 的 Api

此外，[http://code.google.com/hosting/search?q=label%3aopenstreetmap+label%3aandroid&projectsearch=Search+projects](http://code.google.com/hosting/search?q=label%3aopenstreetmap+label%3aandroid&projectsearch=Search+projects)

为您提供一些实现开放街道地图的 Android 应用程序的代码。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:26:44.110

Android Cookbook ( [https://androidcookbook.com/](https://androidcookbook.com/) ) 有一个关于映射的部分，包括一些 OpenStreetMap 示例 ( [https://androidcookbook.com/ChapterView.seam?chapterId=1000](https://androidcookbook.com/ChapterView.seam?chapterId=1000) )。

# text - UTF-8 字符串是否总是比 UTF-16 短？

> ID：14159476
> 
> 赞同：5
> 
> 时间：2013-01-04T14:56:16.490
> 
> 标签：text, unicode, encoding, utf-8, utf-16

如果我有 2 个相同文本的字符串，一个是 UTF-8，另一个是 UTF-16。
假设 UTF-8 字符串*总是*比 UTF-16 更小或大小相同，是否安全？（按字节）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T15:04:10.760

不，虽然 UTF-8 文本*通常*会更短，但*并非总是*如此。

U+0000 和 U+FFFF 之间的任何内容都将[在 UTF-16 中用 2 个字节（一个 UTF-16 代码点）](https://en.wikipedia.org/wiki/UTF-16#Description)表示。

U+0800 和 U+FFFF 之间的字符将[在 UTF-8 中用 3 个字节](https://en.wikipedia.org/wiki/UTF-8#Description)表示。

因此，仅包含（或大部分）该范围内字符的文本在以 UTF-8 表示时很容易比以 UTF-16 表示时更长。

换一种说法：

*   U+0000 - U+007F：UTF-8 更短（1 < 2）
*   U+0080 - U+07FF：两者大小相同（2 = 2）
*   U+0800 - U+FFFF：UTF-8 更长（3 > 2）
*   U+10000 - U+10FFFF：两者大小相同（4 = 4）

请注意，*以前*在 UTF-8 中定义了 5 和 6 字节序列，但根据最新标准不再有效，并且永远不需要表示 Unicode 代码点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:06:57.660

不。UTF-8 有时会为单个字符使用 3 个或更多字节，具体取决于表示字符的代码点（数字）需要多少位。

# python - pip 安装本地 git 存储库

> ID：14159482
> 
> 赞同：74
> 
> 时间：2013-01-04T14:56:42.440
> 
> 标签：python, git, pip

我找不到使用 pip 将本地目录安装为 python 包的正确方法。

```
(venv) C:\(...)>pip install . --no-index
Ignoring indexes: http://pypi.python.org/simple/
Unpacking c:\users\fsantos\desktop\biskates.com\biskates\forks\django-pipeline
  Running setup.py egg_info for package from file:///(...)%5Cforks%5Cdjango-pipeline

Installing collected packages: django-pipeline
  Running setup.py install for django-pipeline

Successfully installed django-pipeline
Cleaning up...

(venv) C:\(...)>cd ..
(venv) C:\(...)>python
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import pipeline
>>> pipeline.__file__
'C:\\(...)site-packages\\pipeline\\__init__.py'
>>> 
```

如您所见， pip 刚刚将包复制到站点包。我怎样才能避免这种情况，并直接从其源文件夹中使用该包？

我正在尝试将 django-pipeline 集成到我的 Django 项目中，但我想首先添加对 Django 1.4 的支持，所以我分叉并克隆了我的 fork。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-07-10T18:11:37.037

我也可以只使用：

```
cd your-local-repo
pip install -e . 
```

或者

```
python setup.py install develop 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2014-11-25T18:47:10.887

如果你在 a 工作`venv`，你可以这样做：

```
env/bin/pip install git+file:///path/to/your/git/repo 
```

或者有一个分支：

```
env/bin/pip install git+file:///path/to/your/git/repo@mybranch 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-01-17T09:58:56.027

您可以使用**pip**或**pipenv**和以下命令从本地 git repo 安装：

```
pip install git+file:///path/to/your/package#egg=package-name 
```

*请注意，文件后面有 3 个斜杠：此处。*

要从远程仓库安装，请使用：

```
pip install git+ssh://git@github.com:Username/Project.git 
```

您还可以像这样指定所需的分支：

```
pip install git+ssh://git@github.com:Username/Project.git@master 
```

[我刚刚汇总了Quilt](https://stackoverflow.com/users/4285617/quilt)和[nanounanue](https://stackoverflow.com/users/754176/nanounanue)以及[这个问题](https://stackoverflow.com/questions/18883430/trouble-installing-private-github-repository-using-pip)的先前答案和评论。也张贴在[这里](https://kozyatnikov.com/how-to-pip-install-local-package)。

# android - 使用 python 和 SL4A 初始化 android 网络摄像头时 setParameters 失败

> ID：14159483
> 
> 赞同：5
> 
> 时间：2013-01-04T14:56:49.687
> 
> 标签：android, python, webcam, sl4a

我在 android 4.0 平板电脑上使用 SL4A 平台并尝试使用`droid.webcamStart()`此处找到的方法初始化网络摄像头流：[http](http://code.google.com/p/android-scripting/wiki/ApiReference#webcamStart) ://code.google.com/p/android-scripting/wiki/ApiReference#webcamStart我的问题是什么时候我执行以下代码我得到一个 setParameters failed 错误。

python代码很简单：

```
 import android
 droid = android.Android()
 address = droid.webcamStart(100,80,0).result 
```

如果一切按计划进行，这应该初始化一个网络摄像头预览流，但我收到一条错误消息：

```
 java.lang.RuntimeException: setParameters failed 
```

我已经看到其他一些与同一问题相关的帖子，但是开发人员使用 java 进行开发，而不是 python。我该怎么做才能在 python 中解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T20:10:38.507

这可能是因为您的设备不支持在 SL4A 的 WebcamFacade.java 的 openCamera 方法中设置的预览格式。

我已经通过 ImageFormat.NV21 对其进行了更改，始终支持根据 Android 文档，它对我有用！

您可以从此处下载此更改：

[https://code.google.com/r/olapaola-android-scripting/](https://code.google.com/r/olapaola-android-scripting/)

# razor - 可以在 url 映射中使用的参数的最大数量是多少？

> ID：14159484
> 
> 赞同：0
> 
> 时间：2013-01-04T14:56:51.927
> 
> 标签：razor, asp.net-mvc-4, url-routing

我正在开发一个目录类型程序，需要在浏览和搜索期间跟踪面包屑，同时创建 SEO 友好的 URL。我有可以深入 5 个级别的类别，它很少见，但可能会发生。我想我遇到了一个限制，找不到任何可以解决有多少参数可用于映射的问题。

我的地图如下所示：

```
routes.MapRout(
     "CategoryPath",
     "products/{cat1}/{cat2}/{cat3}/{cat4}/{cat5}",
     new { controller = "CategoryPath",
          action = "Index", 
          cat1 = UrlParameter.Optional,
          cat2 = UrlParameter.Optional,
          cat3 = UrlParameter.Optional,
          cat4 = UrlParameter.Optional,
          cat5 = UrlParameter.Optional
     }); 
```

我的链接是这样创建的：

```
@Url.Action("Index", "CategoryPath", new { cat1 = row.Title, })
@Url.Action("Index", "CategoryPath", new { cat1 = row.Title, cat2 = subrow.Title }) 
```

因此，当链接被渲染（仅使用最多 cat4）时，它会正确渲染为

```
 ~/products/pruductCategory1 
```

和 `~/products/productCategory1/productCategory2`分别。

但是，一旦我添加 cat5，它们就会以这种方式呈现

```
~/CategoryPath?cat1=productCategory1 
```

和

```
~/products/productCategory1/productCategory2 
```

如果有人知道此限制或可能的解决方法，我将不胜感激。

# xml - XSLT：如何传播先前的值直到找到新的值

> ID：14159488
> 
> 赞同：1
> 
> 时间：2013-01-04T14:56:56.980
> 
> 标签：xml, xslt-1.0

我正在寻找 1.0 XSLT 转换，它会传播非空单元格，直到找到一个新单元格。我的输入：

```
<table>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
</table> 
```

预期输出：

```
<table>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
</table> 
```

我曾尝试使用previous::row[1]/column_1，但最终只有一个副本。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output indent="yes"/>
<xsl:template match="node() | @*">
    <xsl:copy>
        <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
</xsl:template>
<xsl:template name="replace-value">
    <xsl:param name="value"/>
    <xsl:copy>
        <xsl:value-of select="$value"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="//column_1">
    <xsl:choose>
        <xsl:when test=".=''">
            <xsl:call-template name="replace-value">
                <xsl:with-param name="value" select="preceding::row[1]/column_1/text()"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy>
                <xsl:apply-templates select="node() | @*"/>
            </xsl:copy>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

像：

```
<table>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value1</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1>Value2</column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row>
<row>
    <column_1></column_1>
    <column_2></column_2>
</row> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:33:48.963

y您可以尝试在 else 子句中将要向下传播的值保存在 <xsl:variable name="saved" select="."> 中，然后在该行中：

<xsl:with-param name="value" select="preceding::row[1]/column_1/text()"/>

改为

<xsl:with-param name="value" select="$saved"/>

根据您可能想要使用唯一变量名称的不同列的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:08:49.233

你几乎拥有它，但不是这个：

```
preceding::row[1]/column_1/text() 
```

你需要这个：

```
preceding::row[column_1 != ''][1]/column_1/text() 
```

这可以进一步简化为：

```
preceding::column_1[. != ''][1] 
```

因为您需要找到包含非空白列的最后一行。

另一方面，我看不出有任何理由使用那个替换值模板。您的 XSLT 可以简化为：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes"/>
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="column_1">
    <xsl:copy>
      <xsl:choose>
        <xsl:when test=".=''">
          <xsl:value-of select="preceding::column_1[. != ''][1]"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:apply-templates select="node() | @*"/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# c - 'stray \223 and \224 error' 和 C 中的其他错误

> ID：14159491
> 
> 赞同：4
> 
> 时间：2013-01-04T14:57:12.540
> 
> 标签：c

我遇到了一些杂散错误和其他一些错误，我不知道为什么：

> [错误] 程序中出现杂散“\223”
> 
> [错误] 程序中的杂散 '\224' 在函数 'int readData(GymRecord**)' 中：
> 
> [错误] 'q2' 未在此范围内声明
> 
> [错误] '(dir + ((long long unsigned int)(((long long unsigned int)k) * 8ull)))'中的成员'name'请求*，它是非类类型'GymRecord* '
> 
> [错误] '(dir + ((long long unsigned int)(((long long unsigned int)k) * 8ull)))'中的成员'age'请求*，它是非类类型'GymRecord* '

```
int readData(struct GymRecord *dir[]){

    FILE *fdir = fopen(“q2.txt”, "r");
    char buff[MBUFF];
    int k = 0;

    while(k<MDIR && fgets(buff, MBUFF-1, fdir)){
        strcpy(dir[k].name,strtok(buff, ","));
        dir[k].age = atol(strtok(NULL, "\n"));
        k++;
    }

    return(k);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-04T14:58:55.700

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T14:59:01.927

Your quotes for the filename are the wrong ones. This line

```
FILE *fdir=fopen(“q2.txt”,"r"); 
```

Needs to be

```
FILE *fdir=fopen("q2.txt","r"); 
```

# java - 套接字因意外关闭而关闭

> ID：14159496
> 
> 赞同：1
> 
> 时间：2013-01-04T14:57:45.087
> 
> 标签：java, sockets

我目前正在使用 Java 中的套接字。我创建了一个监听器，它将连接到`ServerSocket`. 这工作得很好。但是，如果我的应用程序可能遇到意外关闭，则套接字将无法正确关闭。`SocketException: socket closed`在下一次运行时，这将引发`socket = serversocket.accept();`

但是，通过测试，`serversocket.isBound()`我发现它`serversocket`实际上是绑定的，因此没有关闭。我有什么办法可以确定我是否可以接受连接，如果不能，清除套接字并在此之后接受？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:16:29.680

> 但是，如果我的应用程序可能遇到意外关闭，则套接字将无法正确关闭。在下一次运行时，这将抛出一个 SocketException: socket closed on socket = serversocket.accept();

你有那个从前到后。“套接字关闭”表示套接字*已*关闭，而不是没有。

> 但是，通过使用 serversocket.isBound() 进行测试，我发现 serversocket 实际上是绑定的，因此没有关闭。

错误的。isBound() 告诉您是否曾经显式或隐式调用过 bind()。关闭套接字后，它不会更改返回的内容。如果您想知道套接字是否仍然打开，请尝试使用 isOpen() 或 isClosed()，无论是哪个。

你需要相信异常告诉你什么。您关闭了服务器套接字，所以现在您无法接受它。

> 我有什么办法可以确定我是否可以接受连接，如果不能，清除套接字并在此之后接受？

更重要的是修复套接字曾经关闭的错误。

# wordpress - 如何在wordpress的短代码中附加php代码

> ID：14159503
> 
> 赞同：0
> 
> 时间：2013-01-04T14:58:01.353
> 
> 标签：wordpress

我在模板文件内的循环中使用简码，还使用灯箱表单插件。

```
<?php query_posts('showposts=9&post_type=packages') ?>
<?php while (have_posts()) :the_post(); ?>
  <?php echo the_post_thumbnail(); ?>          
   ...
    ...
    <?php echo do_shortcode("[formlightbox text='Book Now' title=the_title][contact-form-7      id='383' title='Booking Form'][/formlightbox]"); ?>

 <?php endwhile; ?> 
```

请注意，在 shorcode 中有 title=the_title 并且它没有附加到锚标记。但是当我使用 title='hello' 或其他东西时，它会附加到锚标记。我希望当前帖子的标题应通过短代码附加到呈现的锚标记。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:10:06.217

断开字符串并使用字符串连接运算符将该函数组合到您的字符串中。

```
 <?php echo do_shortcode("[formlightbox text='Book Now' title='" . get_the_title() . "'][contact-form-7      id='383' title='Booking Form'][/formlightbox]"); ?> 
```

**更新** 这应该使用而`get_the_title()`不是`the_title()`与标题相呼应。

# asp.net-mvc - ASP.NET MVC - 重定向（）；没有正确重定向

> ID：14159504
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:58:07.703
> 
> 标签：asp.net-mvc

我有这样的事情：

```
public class AccountController : Controller
{
   public ActionResult Login()
   {
      return Redirect("http://localhost/");
   }
} 
```

我希望它将用户重定向到该页面，但它不断将其重定向到

```
http://localhost/Account/http://localhost/ 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:16:41.320

好的，我解决了我的问题。实际上，我正在将编码的 url 传递到我的 Redirect(); 方法。似乎这种方法只能用于未编码的链接版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:01:06.403

重定向到应用程序根目录：

```
Redirect("~/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:01:23.333

我假设您正在尝试根据该代码将其重定向到主页。在这种情况下，您可能应该只使用 RedirectToAction，如下所示：

```
return RedirectToAction("Index", "Home"); 
```

# wcf - 配置文件如何查看多个端点的服务端

> ID：14159508
> 
> 赞同：1
> 
> 时间：2013-01-04T14:58:17.857
> 
> 标签：wcf

我正在使用创建 svc 文件的 wcf 服务应用程序。现在我想设计我的服务，使人们可以通过 http url 和 tcp url 连接到我的服务

所以我想在我的配置中添加三个端点，一个用于 wshttp，一个用于 wsDualhttp，另一个用于 tcp。所以请有人给我示例配置条目，其中包含 wshttp、wsDualhttp 和 tcp 的 3 个端点。

在这种情况下，我是否需要为 wshttp、wsDualhttp 和 tcp 设置三个不同的 mex 端点。

还告诉我 3 个 url，我可以通过它在客户端创建代理类。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:17:09.980

你可以有这样的东西（假设自托管，因为只有这样你才能真正确定自己的完整服务地址 - 在 IIS 中托管，服务地址主要取决于你的`.svc`文件所在的位置）：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="YourNamespace.YourService" behaviorConfiguration="Default">
        <endpoint name="Default" 
            address="http://YourServer/Services/MyService" 
            binding="basicHttpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="TCP" 
            address="net.tcp://YourServer/ServicesTCP/MyService" 
            binding="netTcpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="mex" 
            address="http://YourServer/Services/MyService/mex" 
            binding="mexHttpBinding" 
            contract="IMetadataExchange"/>
        <endpoint name="Dual" 
            address="http://YourServer/Services/MyService/Dual" 
            binding="wsDualHttpBinding" 
            clientBaseAddress="http://localhost:8001/client/"
            contract="YourNamespace.IYourDualService"/>
      </service>
    </services>
  </system.serviceModel> 
```

这将定义**三个端点**：

*   `http://YourServer/Services/MyService`用于您的服务的 HTTP 端点
*   `http://YourServer/Services/MyService/mex`用于元数据交换（服务可发现性）的 HTTP MEX 端点
*   `net.tcp://YourServer/ServicesTCP/MyService`用于您的服务的 Net.TCP 端点

当然，您也可以使用两个**基地址**来使配置更容易一些：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="YourNamespace.YourService" behaviorConfiguration="Default">
        <host>
          <baseAddresses>
            <add baseAddress="http://YourServer/Services"/>
            <add baseAddress="net.tcp://YourServer/ServicesTCP"/>
          </baseAddresses>
        </host>
        <endpoint name="Default" 
            address="MyService" 
            binding="basicHttpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="TCP" 
            address="MyService" 
            binding="netTcpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="mex" 
            address="MyService/mex" 
            binding="mexHttpBinding" 
            contract="IMetadataExchange"/>
      </service>
    </services>
  </system.serviceModel> 
```

这将配置等效的服务端点。

不同之`wsDualHttpBinding`处在于它至少需要一个`clientBaseAddress`回调机制（WCF 服务将回调您的客户端以发送回状态消息） - 因此它需要一些额外的调整，并且它不能真正固定到可以工作的现有服务上`wsHttpBinding`- 它需要单独完成。但*基本上*- 它仍然几乎都是一样的......

**更新：**在阅读了该主题之后（这不是我经常使用的东西），看起来确实可以使用双工通信`netTcpBinding`，但前提是您自托管您的服务 - IIS 不支持双工通信`netTcpBinding`.

创建双工服务仍然需要额外的步骤和额外的代码 - 所以你不能真正拥有一个同时使用`basicHttpBinding`or`wsHttpBinding`和双工的非双工服务。因此，在此示例中使用另一个端点确实没有意义，`wsDualHttpBinding`因为该服务要么需要是真正的双工（然后您可以使用`wsDualHttpBinding`and `netTcpBinding`） - 或者它不是双工的 - 然后您可以使用`basicHttpBinding`,`wsHttpBinding`和`netTcpBinding`更多“异国情调的”绑定（如 MSMQ、命名管道等）

# android - Android中的Jquery Mobile / Phonegap Swipe Gesture问题

> ID：14159519
> 
> 赞同：0
> 
> 时间：2013-01-04T14:58:49.457
> 
> 标签：android, cordova, jquery-mobile

我在 jquery mobile/phonegap 应用程序中有以下向右滑动事件的代码。代码工作正常，但问题是我必须滑动 3-4 次才能在 android 设备上获得响应。

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Slider Stop</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            $(document).on("swiperight", "#listitem", function() {
                $.mobile.changePage("#page1");
            });
        </script>
    </head> 
    <body>
        <div data-role="page" id="home">
            <div data-role="content">
                <p>
                    <ul data-role="listview" data-inset="true" data-theme="c">
                        <li id="listitem">Swipe Right to view Page 1</li>
                    </ul>
                </p>
            </div>
        </div>
        <div data-role="page" id="page1">
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li data-role="list-divider">Navigation</li>
                    <li><a href="#home">Back to the Home Page</a></li>
                </ul>
                <p>
                    Yeah!<br />You Swiped Right to view Page 1
                </p>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:51:54.263

您需要确保您的文档和设备都准备就绪。我建议这样做：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Slider Stop</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <script>
        function onBodyLoad() {
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        function onDeviceReady() {
            // set your swipe threshold explicitly
            $.event.special.swipe.horizontalDistanceThreshold = 120;
            $(document).on("swiperight", "#listitem", function() {
                $.mobile.changePage("#page1");
            });
        }

    </script>
</head> 
<body onload="onBodyLoad()">
    <div data-role="page" id="home">
      ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T09:27:29.000

这是由 JQM 中的一个错误引起的，该错误已解决但尚未实现[https://github.com/jquery/jquery-mobile/issues/5534](https://github.com/jquery/jquery-mobile/issues/5534)

基本上，滑动事件测量的最小距离必须考虑设备的像素密度。因此，在 JQM 的情况下，对 touch.js 的以下更改将解决该问题：

```
horizontalDistanceThreshold = window.devicePixelRatio >= 2 ? 15 : 30;
verticalDistanceThreshold = window.devicePixelRatio >= 2 ? 15 : 30; 
```

# asp.net - 将记录从 GridView 插入到另一个 GridView 页面

> ID：14159520
> 
> 赞同：0
> 
> 时间：2013-01-04T14:58:50.200
> 
> 标签：asp.net, gridview, records, microsoft-expression-web

有人可以帮助我吗？我正在使用 Microsoft Expression Web 开发一个网站。我的数据库是 MS Access。我的页面扩展名是 .aspx (ASP.NET)

我有两个网格视图：

1.  `Pending Records GridView`应该在一个`PendingRecords.aspx`页面下。我希望这个网格视图允许我在它们直接进入主网格视图之前首先接受所有请求的记录。当然，gridview 有“添加”按钮。当我单击该按钮时，我希望在主记录 GridView 中传输记录。

2.  `Main GridView`应该在一个`Records.aspx`页面下。我希望这个 gridview 显示我在 Pending Records Gridview 中已经接受的所有记录。

就那么简单！

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T15:13:49.653

一个按钮单击事件将数据从第一个 gridview 保存到会话中，并在页面加载或重新加载时在第二个 gridview 中再次加载它。如果您没有太多数据要移动，它将起作用.....希望能给您一些想法.... :)

# twitter-bootstrap - Twitter Bootstrap：词缀部分无法滚动

> ID：14159523
> 
> 赞同：0
> 
> 时间：2013-01-04T14:58:57.540
> 
> 标签：twitter-bootstrap, scroll

我在页面上有一个词缀部分，它与窗口顶部保持一定距离，

我想要的是，当页面滚动时，它也会滚动，但是当它触摸窗口的顶部时，它会固定在那个位置

我有使用`data-spy="affix"`，但它没有成功，这是[演示](http://jsfiddle.net/hh54188/v9xqw/3/)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:29:46.030

看看这个：http: [//jsfiddle.net/panchroma/v9xqw/4/](http://jsfiddle.net/panchroma/v9xqw/4/)

我编辑了这一行

```
<div class="demo" data-spy="affix" data-offset-top="260"></div> <!-- data-offset-top is the distance you need to scroll before the demo div is affixed --> 
```

并将其添加到您的 CSS

```
.demo.affix  
{           /* specify what you want to happen when the demo div is affixed */
top:0;
} 
```

希望这对你有用！

# java - 如何在水平滚动视图中滚动

> ID：14159524
> 
> 赞同：0
> 
> 时间：2013-01-04T14:58:59.817
> 
> 标签：java, android, oracle

我在我的应用程序中制作了一个滚动视图，它工作正常。我有一些按钮单击我想滚动到所需位置的按钮。我怎么能做到这一点最后一件事我怎么能在网格视图中结束我的图像之间的空间所以所有的照片都在一起生病了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:01:00.717

试试这个：

```
yourScrollView.post(
    new Runnable() {
        @Override
        public void run() {
            yourScrollView.scrollTo(desiredPositionX, desiredPositionY);
        } 
    }
); 
```

# domain-driven-design - 领域驱动设计中的复杂发现

> ID：14159526
> 
> 赞同：2
> 
> 时间：2013-01-04T14:59:03.577
> 
> 标签：domain-driven-design

我正在考虑将现有的大型 VB6 系统的一部分转换为 .net。我正在尝试使用领域驱动设计，但我很难理解某些事情。

我完全难过的一件事是我应该如何处理复杂的 find 语句。例如，我们目前有一个屏幕显示已保存文档的列表，用户可以选择和打印、发送电子邮件、编辑或删除。我有一个 SavedDocument 对象，它可以完成所有操作，但它只有与它相关的属性，我需要显示文档所针对的客户名称和他们的电子邮件地址（如果有的话）。我还需要显示此文档可能来自的政策参考。Client 和 Policy 链接到 SavedDocument，但它们是它们自己的聚合根，因此不会同时加载 SavedDocument。

用户还可以指定几个过滤器来减少列表。这些可以来自存储在 SavedDocument 或 Client 和 Policy 上的属性。

我不确定如何从领域驱动设计的角度来处理这个问题。

1.  我是否在存储库上有一个函数，它接受过滤器并向我返回一个 SavedDocuments 列表，然后我必须将其转换为不同的对象或 DTO，并填写额外的客户端和策略信息？这似乎有点慢，因为我必须使用多个调用加载所有细节。
2.  我是否在存储库上有一个函数，它接受过滤器并返回一个 SavedDocumentsForList 对象列表，其中只包含我想要的信息？这似乎是最快的，但感觉不像我在使用 DDD。
3.  我是否从他们的对象中加载所有内容并在服务中进行所有过滤和列选择？这似乎是最慢的，但也似乎非常面向领域。

我真的很困惑如何处理这些情况，而且我没有真正看到任何其他人对此提出问题，这掩盖了我觉得我错过了什么的感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:57:39.470

在 DDD 中可以通过几种方式处理查询。有时您可以使用域实体本身来提供查询。当查询需要多个聚合的投影时，这种方法在您的场景中可能会变得很麻烦。在这种情况下，更容易使用为相应查询明确设计的对象 - 有效的 DTO。这些 DTO 将是只读的，不会有任何行为。这可以称为[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)。

# objective-c - 防止在表视图中删除第一行

> ID：14159527
> 
> 赞同：1
> 
> 时间：2013-01-04T14:59:09.520
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我想阻止用户从我的表视图中删除所有行，以便始终存在至少一行。

我仍然在掌握编程和目标 c。

这是我尝试过的：

```
 if (indexPath.section != 0 | editingStyle == UITableViewCellEditingStyleDelete) {
  [self.managedObjectContext deleteObject:[self.circuits objectAtIndex:indexPath.row]];
  [self.appDelegate saveContext];
  [self.circuits removeObjectAtIndex:indexPath.row];
  [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]             withRowAnimation:UITableViewRowAnimationFade]; 
```

然后

```
if (indexPath.section > 1 | editingStyle == UITableViewCellEditingStyleDelete) {
    [self.managedObjectContext deleteObject:[self.circuits objectAtIndex:indexPath.row]];
    [self.appDelegate saveContext];
    [self.circuits removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]             withRowAnimation:UITableViewRowAnimationFade]; 
```

这没有任何影响，因为我仍然可以删除第一行。所以我尝试了

```
- (BOOL)tableView:(UITableView *)commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.row == 0) 
    return NO;

return YES;
} 
```

还是不能防止第一行被删除

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:04:45.860

您需要实现该方法[`UITableViewDataSource`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)并`tableView:canEditRowAtIndexPath:`返回`NO`.`indexPath.row` `0`

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return indexPath.row > 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:04:38.420

尝试将您的代码移动到 `- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T11:44:04.997

试试这个代码： -

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
    {
    if(indexPath.row==0)
    return NO;
    else
    return YES;

    } 
```

它一定会帮助你

# python - Python：在一个for循环中将列表项与字典键进行两次比较？

> ID：14159530
> 
> 赞同：0
> 
> 时间：2013-01-04T14:59:14.560
> 
> 标签：python, list, dictionary, for-loop

## 我被困在必须编写的脚本中，找不到出路...

我有两个信息部分重叠的文件。根据一个文件中的信息，我必须从另一个文件中提取信息并将其保存到多个新文件中。第一个只是一个带有 ID 和组信息的表（用于拆分）。另一个包含相同的 ID，但每个 ID 有两次略有不同的信息。

**我在做什么：** 我创建了一个带有 ID 和组信息的列表列表，如下所示：

```
table = [[ID, group], [ID, group], [ID, group], ...] 
```

然后，因为第二个文件很大并且排序方式与第一个不同，我想创建一个字典作为索引。在这个索引中，我想保存 ID 以及可以在文件中找到的位置，以便以后可以快速跳转到那里。当然，那里的问题是每个 ID 出现两次。我的简单解决方案（但我对此表示怀疑）是在 ID 中添加 -a 或 -b ：

```
index = {"ID-a": [FPos, length], "ID-b": [FPOS, length], "ID-a": [FPos, length], ...} 
```

代码：

```
for line in file:
    read = (line.split("\t"))[0]
    if not (read+"-a") in indices:
        index = read + "-a"
        length = len(line)
        indices[index] = [FPos, length]
    else:
        index = read + "-b"
        length = len(line)
        indices[index] =  [FPos, length]
    FPos += length 
```

我现在想知道的是下一步是否真的有效（我没有收到错误，但我对输出文件有一些疑问）。

```
for name in table:
    head = name[0]
    ## first round
    (FPos,length) = indices[head+"-a"]
    file.seek(FPos)
    line = file.read(length)
    line = line.rstrip()
    items = line.split("\t")
    output = ["@" + head +" "+ "1:N:0:" +"\n"+ items[9] +"\n"+ "+" +"\n"+ items[10] +"\n"]
    name.append(output)
    ##second round
    (FPos,length) = indices[head+"-b"]
    file.seek(FPos)
    line = file.read(length)
    line = line.rstrip()
    items = line.split("\t")
    output = ["@" + head +" "+ "2:N:0:" +"\n"+ items[9] +"\n"+ "+" +"\n"+ items[10] +"\n"]
    name.append(output) 
```

可以使用这样的 for 循环吗？

有没有更好、更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:06:49.390

使用 a`defaultdict(list)`按 ID 保存所有文件偏移量：

```
from collections import defaultdict

index = defaultdict(list)

for line in file:
    # ...code that loops through file finding ID lines...
    index[id_value].append((fileposn,length)) 
```

[defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)将在给定 id_value 的第一次出现时初始化为一个空列表，然后将 (fileposn,length) 元组附加到它上面。

这会将每个 id 的所有引用累积到索引中，无论是 1、2 还是 20 个引用。然后你可以通过给定的文件位置搜索相关数据。

# java - 创建具有自定义外观的 JButton

> ID：14159536
> 
> 赞同：8
> 
> 时间：2013-01-04T14:59:39.913
> 
> 标签：java, swing, jbutton

![在此处输入图像描述](../Images/56e008708c63e1ccc2e9dd34d129ca63.png)

我对 java swing 很陌生，不熟悉paint()。我想用上面的样子在 java swing 中创建一个按钮。谁能帮我做到这一点。任何指导将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T16:36:23.590

我用谷歌搜索了 Facebook blue RGB: *59, 89, 182/Hex Code is #3B5998*和 Font family: *Tahoma*。

在这里使用它是我通过几个电话得到的，`setFocusPainted(false)`例如：`setBackground(new Color(59, 89, 182))``setFont(new Font("Tahoma", Font.BOLD, 12))`

![在此处输入图像描述](../Images/dca41815af93bf515d6d2de310d98b43.png)

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Font;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());
        JButton b = new JButton("Log In");//http://www.chacha.com/question/what-are-the-rgb-values-for-the-background-color-of-comments-on-facebook
        b.setBackground(new Color(59, 89, 182));
        b.setForeground(Color.WHITE);
        b.setFocusPainted(false);
        b.setFont(new Font("Tahoma", Font.BOLD, 12));//http://answers.yahoo.com/question/index?qid=20070906133202AAOvnIP
        frame.add(b);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

除非您正在寻找相同的东西（在不使用实际图像的情况下，这在 IMO 中是最好的）......而不是设置按钮的图像将是最好的方法

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T16:10:39.583

如果您想完全覆盖按钮的外观，最通用的解决方案是创建自己的`ButtonUI`：

```
class MyButton extends BasicButtonUI {
    @Override
    public void paint(Graphics g, JComponent c) {
        AbstractButton b = (AbstractButton) c;
        ButtonModel model = b.getModel();
        ...
    }
} 
```

然后，您可以根据按钮的状态（翻转、聚焦、武装、按下等）绘制任何您想要的内容。查看超类实现，了解如何执行此操作的基本想法。

然后只需设置要更改的按钮的 UI：

```
button.setUI(new MyButton()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T15:03:53.537

要像您的示例一样创建自定义按钮，我认为最好的方法是准备图形文档（图像等），然后将其设置为按钮的属性：

```
JButton button = new JButton();
button.setIcon(new ImageIcon("yourButtonImage.jpg")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T15:10:18.843

在 Oracle javadoc 上，您可以看到 jbutton [javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JButton.html)。

`setIcon(Icon)`带有`ImageIcon`实现的Jbutton java 方法可以解决问题！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T14:36:37.250

要创建示例中显示的自定义按钮，我认为使用以下代码：-

```
JButton button = new JButton("Log In");
button.setFont(new Font("Serif",Font.BOLD,20));
button.setBackground(new Color(0,51,204));//import java.awt.Color;
button.setForeground(Color.WHITE);
button.setFocusPainted(false);
button.setBorderPainted(false); 
```

# outlook-addin - 展望 2007 中的后台视图

> ID：14159537
> 
> 赞同：0
> 
> 时间：2013-01-04T14:59:41.847
> 
> 标签：outlook-addin, outlook-2007, outlook-2010, outlook-2007-addin

我正在开发一个基于现有 Outlook 2010 插件的 Outlook 2007 插件。我设法让大部分功能正常工作，因为它们中的大多数都是向后兼容的。但是有一些我不能，因为2007根本没有某些功能。\

1.  后台视图
2.  主色带

我的问题是——你对等效接口有什么建议？您会将 2010 年后台视图中的内容放在 Outlook 2007 中的什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:41:55.917

经过深思熟虑，我决定使用自定义菜单。2010 年通过后台视图提供的所有功能都将转换为 Outlook 2007 中自定义菜单中的菜单项。

主功能区中的按钮也将成为同一自定义菜单中的项目。

这个解决方案虽然不像 Fluent UI 那样优雅，但我认为，因为我的插件的所有功能都可以从一个地方获得。

# html - 关于字段集和表单标签叠置的一点帮助

> ID：14159540
> 
> 赞同：2
> 
> 时间：2013-01-04T14:59:48.867
> 
> 标签：html, forms

我目前正在使用 JSP 编写 Java EE Web 应用程序，并且我对 HTML 标记有疑问。

我使用字段集在主页上正确构建表单，发现自己很困惑，想知道以下内容是否合法：

```
<fieldset id="FieldMain">
    <form method="post" action="servletA">
        <input name="a" type="text" />
        <fieldset id="FieldA">
            <input name="b" type="text" />
            <input name="c" type="text" />
            <input name="d" type="submit" value="Go for A" />
        </fieldset>
    </form>
    <form method="post" action="servletB">
        <fieldset id="FieldB">
            <input name="e" type="text" />
            <input name="f" type="text" />
            <input name="g" type="submit" value="Go for B" />
        </fieldset
    </form>
</fieldset> 
```

期望的结果是，当单击“Go for A”按钮时，它会考虑字段 a、b 和 c（a 在 fieldset fieldA 之外但在表单 A 标记内），而单击 go for B 只需要字段 e和 f。

换句话说，如果我使用字段集，我可以在一个字段集标签中有多个表单吗？只要它在表单标签中，我可以在任何字段集标签之外有一些字段吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:08:33.817

这是合法的，但不打算这样做

> FIELDSET 元素允许作者对主题相关的控件和标签进行分组。分组控件使用户更容易理解他们的目的，同时促进视觉用户代理的选项卡导航和面向语音的用户代理的语音导航。正确使用此元素使文档更易于访问。

来源：[http ://www.w3.org/TR/html4/interact/forms.html#h-17.10](http://www.w3.org/TR/html4/interact/forms.html#h-17.10)

> 据我记得过去的讨论：根据标准的字母它是合法的，DTD 也使它在块元素有效的地方有效。现在至于打算，这更难确定，我觉得打算只用于形式。我不知道为什么它的范围更广。
> 
> 还要注意 - 尽管 CSS 标准没有说明它应该 - 一个字段集创建一个新的堆叠上下文（如果你考虑它和它的默认呈现方式是合乎逻辑的，但在标准 AFAIK 中没有提到）。
> 
> 恕我直言，如果您想要未来的证明代码，那么在表单之外广泛使用它和/或依赖新的堆叠上下文是危险的。

来源：[http ://www.webmasterworld.com/html/3915579.htm](http://www.webmasterworld.com/html/3915579.htm)

# node.js - 如何使用两个LocalStrategy？

> ID：14159544
> 
> 赞同：1
> 
> 时间：2013-01-04T14:59:58.320
> 
> 标签：node.js, passport.js

如何使用两个LocalStrategy，一个用于前端验证，另一个用于后端验证？

```
// font end
passport.use(new LocalStrategy({
    usernameField: 'email',
    passwordField: 'password'
}), function (email, password, done) {
    User.findOne({email: email}, function(err, user) {
        // ...
        done(null, user);
    });
});

// back end
passport.use(new LocalStrategy({
    usernameField: 'username',
    passwordField: 'password'
}, function (username, password, done) {
    SysUser.findOne({username: username}, function(err, user) {
        // ...
        done(null, user);
    });        
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:11:31.123

我认为你可以这样做：

```
// frontend
passport.use('frontend-local', new LocalStrategy({
  ....
});

//backend
passport.use('backend-local', new LocalStrategy({
  ....
}); 
```

然后，无论您想在哪里使用一种策略，在一条路线中，都可以这样称呼它：

```
app.post('/frontend/login',
  passport.authenticate('frontend-local'),
  ... 
```

后端也是如此。

# php - Having trouble installing XDebug in PHP

> ID：14159563
> 
> 赞同：0
> 
> 时间：2013-01-04T15:01:08.687
> 
> 标签：php, xdebug

I try to config XDebug on PHP. I download the XDebug DLL from [http://xdebug.org/](http://xdebug.org/). I tried every possible version, and edit the php.ini as it suggested, but when I use `phpinfo()` to see the xdebug info I get nothing at all. Any ideas?

My environment is PHP 5.4 + Apache2.2 + Windows 7.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:20:16.387

First, follow these instructions on the [xDebug site](http://xdebug.org/wizard.php) to install the module correctly (Which I think you've done!.. *Use the wizard!!* ). ([http://xdebug.org/wizard.php](http://xdebug.org/wizard.php))

When you run `phpinfo()`, you should see the following (If installed correctly):

```
This program makes use of the Zend Scripting Language Engine: 
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies
with Xdebug v2.2.0, Copyright (c) 2002-2012, by Derick Rethans <-- !! :D !! 
```

Then, you will need to add the following to your `php.ini`.

```
[xdebug]
# Make sure the below path is correct and points to your 'xdebug.so'
zend_extension="/Applications/MAMP/bin/php/php5.2.17/lib/php/extensions/no-debug-non-zts-20060613/xdebug.so"
xdebug.default_enable=1
xdebug.max_nesting_level=100
xdebug.remote_autostart=on 
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_mode=req
xdebug.idekey="netbeans-xdebug" # I use netbeans IDE, so I configure this 
```

**Remember:** After making any changes to `php.ini` you must restart your apache server.

# java - Java 弃用注解

> ID：14159566
> 
> 赞同：1
> 
> 时间：2013-01-04T15:01:20.147
> 
> 标签：java, eclipse

我按照这里的人对我的指示做了两个类，现在将不推荐使用的函数从一个类调用到另一个类（参见我以前的[问题](https://stackoverflow.com/questions/14157628/java-standard-annotations)）。

我什至在函数调用上加上了@SuppressWarnings 行，但它仍然不起作用。我不明白为什么。我需要使用 @SuppressWarnings 注释来停止显示弃用警告。谁能告诉我把它放在哪里？

已弃用的类

```
import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)

@interface number {
    String arm();
}

public class armstrong {
    @Deprecated
    @number(arm = "Armstrong number")
    public static void armStrong(int n) {
        int temp, x, sum = 0;
        temp = n;
        while(temp!=0) {
            x = temp % 10;
            sum = sum + x * x * x;
            temp = temp / 10;
        }
        if(sum == n) {
            System.out.println("It is an armstrong number");
        }
        else {
            System.out.println("It is not an armstrong number");
        }
    }
} 
```

使用已弃用的类

```
import java.util.Scanner;
import java.lang.annotation.*;
import java.lang.reflect.Method;

public class Ch10LU2Ex4 {  
    public static void main(String[] args) {
        try {
            System.out.println("Enter a number between 100 and 999:");
            Scanner sc = new Scanner(System.in);
            int x = sc.nextInt();
            @SuppressWarnings("deprecation")
            armstrong obj = new armstrong();
            obj.armStrong(x);
            Method method = obj.getClass().getMethod("armStrong", Integer.TYPE);
            Annotation[] annos = method.getAnnotations();
            for(int i = 0; i<annos.length; i++) {
                System.out.println(annos[i]);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:09:50.720

注释`@SuppressWarnings("deprecation")`附加到默认构造函数。

## 警告不会改变执行

警告仅适用于编译时

您必须将 指向Class`@SuppressWarnings("deprecation")`的方法`main`本身`Ch10LU2Ex4`！

```
import java.util.Scanner;
import java.lang.annotation.*;
import java.lang.reflect.Method;

public class Ch10LU2Ex4 {  
    @SuppressWarnings("deprecation")    
    public static void main(String[] args) {
        try {
            System.out.println("Enter a number between 100 and 999:");
            Scanner sc = new Scanner(System.in);
            int x = sc.nextInt();
            armstrong obj = new armstrong();
            obj.armStrong(x);
            Method method = obj.getClass().getMethod("armStrong", Integer.TYPE);
            Annotation[] annos = method.getAnnotations();
            for(int i = 0; i<annos.length; i++) {
                System.out.println(annos[i]);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:09:40.473

如果你把它移到`main`方法前面怎么办？

```
@SuppressWarnings("deprecation")
public static void main(String[] args) 
```

# mysql - MySQL 中的 <> 和 != 运算符有什么区别？

> ID：14159569
> 
> 赞同：32
> 
> 时间：2013-01-04T15:01:23.517
> 
> 标签：mysql, operators

如果我使用一个简单的表格，例如：

```
create table test ( a int );
insert into test values ( 1 ) , ( 2 ) , ( 2 ) , ( 3 );
select * from test where a <> 2;
select * from test where a != 2; 
```

两者都给我：

```
+------+
| a    |
+------+
|    1 |
|    3 |
+------+
2 rows in set (0.00 sec) 
```

`<>`那么和`!=`mysql 操作符有什么区别呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T15:10:58.967

`<>`应该是首选，所有事情都是平等的，因为它符合 sql 标准并且在技术上更便携......

`!=`是非标准的，但大多数数据库都实现了它。

sql:2008 语法：

```
<not equals operator> ::=
  <> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-04T15:03:21.650

它们完全相同。请参阅文档。

[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_not-equal](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_not-equal)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-04T15:04:04.633

没有不同。`<>`是sql标准，`!=`非标准。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T15:03:54.280

没有。只是写同一件事的两种不同方式

# c - 使用终端的 FTP 传输（在 C 中）

> ID：14159571
> 
> 赞同：0
> 
> 时间：2013-01-04T15:01:45.067
> 
> 标签：c, bash, ftp, zip, corrupt-data

我正在开发一个简单的应用程序，它可以压缩文件夹并将其上传到我的网站。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Global variables

//Zips the sample_folder and saves the zip file in Library.    
char zip[60] = "cd ~/Library/\nzip -r STORAGE_DATA.zip ~/Desktop/sample_folder/";

//FTPs the file STORAGE_DATA.zip in myhost.com (using myusername and mypassword)
char ftp_transf[150] = "ftp -n myhost.com <<END_SCRIPT\nquote binary\n"
                       "quote USER myusername\nquote PASS mypassword\n"
                       "put ~/Library/STORAGE_DATA.zip STORAGE_DATA.zip";

int main(int argc, const char * argv[])
{
    system(zip); //Executes first shell script
    system(ftp_transf); //Executes second shell script

    return 0;
} 
```

希望代码是可读的并且你已经理解了。基本上我使用终端命令来压缩文件夹并将其上传到网络中。（请不要告诉我如何使用 C/C++ 库进行 FTP，因为我不需要外部库）

好的，代码工作正常，文件已上传。问题是...

> 当我从站点下载文件并尝试打开它时，文件已损坏。

是的，这就是问题所在……我真的不明白为什么！我使用二进制模式（在 FTP 中也默认使用），所以请......我需要一些帮助！提前致谢！

# jquery - 具有透明背景的 jqDock 和 PNG 图像

> ID：14159573
> 
> 赞同：0
> 
> 时间：2013-01-04T15:02:05.403
> 
> 标签：jquery, jquery-plugins, png

我正在尝试使用 jqDock 库，但它拒绝使用透明的 png 图像。是否有任何 tweek 可以使其正常工作。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:52:15.823

jqDock 不会“拒绝”使用透明图像：它不知道“透明”是什么意思。所以答案是否定的，没有任何“调整”会有所帮助。如果 jqDock 插件不起作用，则很可能是缺少图像、格式错误或不适当的 HTML 或脚本错误……所有这些都可以使用所有现代浏览器中可用的或适用于所有现代浏览器的适当开发人员工具进行检查。

# javascript - 改变 ko.observable 的值

> ID：14159574
> 
> 赞同：26
> 
> 时间：2013-01-04T15:02:07.247
> 
> 标签：javascript, knockout.js

我有一个名为“totalLength”的对象的 ko.observable 属性。在使用应用程序时，我想物理地修改这个属性的新值。我怎样才能做到这一点？

我可以通过显示预览所需属性的值：

```
alert(feature.totalLength()); 
```

所以我知道它就是那个。但是当我为它分配一个新值时：

```
feature.totalLength() = 10; 
```

我收到一个错误：

ReferenceError：左侧分配无效

为什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-04T15:03:37.547

`ko.observable`是一个函数，所以你需要像这样设置值`feature.totalLength(10)`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-04T15:03:36.333

您可以像这样更改 observable 的值：

```
feature.totalLength(10) 
```

# django - 将 css 类应用于 forms.RadioSelect 小部件

> ID：14159577
> 
> 赞同：4
> 
> 时间：2013-01-04T15:02:25.113
> 
> 标签：django, django-forms, django-widget

我正在使用 ModelForm 并尝试在 Django forms.RadioSelect 小部件上设置一个 css 类，例如

```
class Meta:
    model = models.MyModel
    fields = ('rating',)
    widgets = {
      'rating': forms.RadioSelect(attrs={'class':'star'}),
    } 
```

但 class='star' 不会在 html 中呈现。

我也尝试过使用：

```
def __init__(self, *args, **kwargs):
    super(MyModelForm, self).__init__(*args, **kwargs)
    self.fields['rating'].widget.attrs['class'] = 'star' 
```

这也不起作用。我用 forms.Textarea 小部件尝试了同样的事情，在那里我能够渲染 css 类。

我在这里做错了什么还是 RadioSelect 只是不支持类属性（我希望将类名应用于所有无线电输入）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T16:42:13.463

`Input`复选框和单选小部件不像其他小部件那样继承自。

class 属性确实适用于`RadioSelect`，但它单独应用于每个无线电输入。

例如考虑以下形式：

```
from django import forms
class MyForm(forms.Form):
    my_field = forms.ChoiceField(widget=forms.RadioSelect(attrs={'class': 'star'}), choices=(('x', 'x'), ('y', 'y'),)) 
```

它将在模板中输出以下html：

```
<tr><th><label for="id_my_field_0">My field:</label></th>
  <td>
    <ul>
      <li><label for="id_my_field_0"><input value="x" type="radio" class="star" name="my_field" id="id_my_field_0" /> x</label></li>
      <li><label for="id_my_field_1"><input value="y" type="radio" class="star" name="my_field" id="id_my_field_1" /> y</label></li>
    </ul>
  </td>
</tr> 
```

请注意，该类应用于每个`input`元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T13:08:32.853

你可以使用这个库：[https ://pypi.python.org/pypi/django-widget-tweaks](https://pypi.python.org/pypi/django-widget-tweaks)

它允许您执行以下操作：

```
{% load widget_tweaks %}
<!-- add 2 extra css classes to field element -->
{{ form.title|add_class:"css_class_1 css_class_2" }} 
```

# javascript - 将脚本从 3rd-pty 动态插入 HTML

> ID：14159582
> 
> 赞同：1
> 
> 时间：2013-01-04T15:02:40.277
> 
> 标签：javascript, jquery, ajax

我在一个客户的汽车销售网站上工作，他们与第三个 Pty 供应商签订了合同，该供应商提供了一个脚本，可以在他们的库存结果和详细信息页面上运行。

库存清单结果和详细信息页面是数据驱动的，从数据库源动态提取车辆数据。

我想要做什么：

1.  页面加载后，将此第 3 方代码动态插入到每个库存清单的 DIV 容器中，随后为每个详细信息页面插入。

这是我试图动态插入每个车辆列表的第三个 PTY 代码块：

```
<div class="lowPrice">
<a href="javascript:displayLoanInfo(vehicleVIN, SourceID);" id="lbl'+vehicleVIN+'"></a>
<script type="text/javascript">
    GetLowestPayment('vehicleVIN', 'SourceID', "lbl'+vehicleVIN+'");

    function AssignLowestPayment(LowestPaymentValue, ClientLabelID) {
        if (LowestPaymentValue !== '') {
            document.getElementById(ClientLabelID).innerHTML = LowestPaymentValue;
        };
    };
</script> 
```

我已经设置了一个 .JS 文件以通过 $(getScript) 函数加载到客户端脚本中，并且我知道足够的 JQuery 能够从页面中获取每辆车的数据元素并传递给函数（我相信我已经正确地做到了）。但是，我被困在需要插入上述代码并让那些包含必要数据元素的变量正确传递给它的地方。

这是我迄今为止编写的 .JS 文件中的代码：

```
var loc = document.location;
var endrive = /inventory-results|inventory-details/.test(loc.pathname);
var SourceID = '10057', ChromeStyleID = '', vehicleZipCode='06473', mode = 'text',vehicleCondition = "",lresult,dresult;
if(/selectedcat\/new/.test(loc.pathname)){ vehicleCondition = "New";}
if(/selectedcat\/preowned/.test(loc.pathname)){ vehicleCondition = "Preowned";}
if(/inventory-results/.test(loc.pathname)){ divblock = '.piiResultsContainer'; lresult = true;cnt=-1}
if(/inventory-details/.test(loc.pathname)){ divblock = '#dt_vehicle_tbl';dresult= true;cnt=-1}

var vdata = [], vattr,vehicleVIN,vehicleStockNum,vehicleTransmission,vehicleOdometer,vehicleExtColor,vehiclePrice,vehicleStyle,vehiclePhoto,vehicleYear,vehicleMake,vehicleModel,vehicle;

if(endrive){
    $.getScript("http://www.velocitylogix.com/OfferLogix.js?width=960px&height=700&pack=false",function(){

    $(divblock).each(function(){

        if(lresult){
            vdata['vehiclePrice'] = $(this).find('#ulPricing li:first-child').text().trim();
            attrsearch = 'ul#att_listL li';
            SourceID = '10057';
        }
        if(dresult){
            vdata['vehiclePrice'] = $(this).find('#dt_vehicle_listing').find('ul#ulPricing li:first-child').text().trim();
            attrsearch = '#dt_vehicle_attribute ul#att_listL li';
            SourceID = '10057';
        }

        if(/MSRP/.test(vdata['vehiclePrice'])){ vdata['vehiclePrice'] = vdata['vehiclePrice'].replace("MSRP: ","");}
        if(/Selling Price/.test(vdata['vehiclePrice'])){ vdata['vehiclePrice'] = vdata['vehiclePrice'].replace("Selling Price: ","");}
        var tlist = $(this).find(attrsearch).each(function(){
            vattr =$(this).find('span').text();
            switch(vattr){
                case "VIN:":vdata['vehicleVin']=$(this).text().replace("VIN: ","");
                    break;
                case "Stock #:":vdata['vehicleStockNum']=$(this).text().replace("Stock #: ","");
                    break;

                case "Miles:":vdata['vehicleOdometer']=$(this).text().replace("Miles: ","");
                    break;
                default :
                    vdata['vehicleOdometer']= 0;
                    break;

            }
            vehiclePrice = vdata['vehiclePrice'];
            vehicleVIN = vdata['vehicleVin'];

        });
        cnt++;

        GetLowestPayment(vehicleVIN, SourceID, 'lbl' + vehicleVIN);

        function AssignLowestPayment(LowestPaymentValue, ClientLabelID) {
            if(LowestPaymentValue !== '') {
                document.getElementById(ClientLabelID).innerHTML = LowestPaymentValue;
            };
        };

        $(this).find('#ulPricing').append('<div style="max-width:260px; position:relative;z-index: auto;"><div id="din_'+cnt+'" style="white-space: nowrap;"></div><div class="lowPrice"><a href="javascript:displayLoanInfo(vehicleVIN, SourceID);" id="lbl'+vehicleVIN+'"></a></div></div>');
    });
});

} 
```

任何帮助将不胜感激。

# php - 在非对象上调用成员函数 storeUploadedImage()

> ID：14159586
> 
> 赞同：2
> 
> 时间：2013-01-04T15:03:01.567
> 
> 标签：php

正如标题所暗示的那样，出现致命的 php 错误。完整的错误是

> 注意：未定义变量：第 95 行“位置”中的文章
> 
> 致命错误：在第 95 行的“位置”中的非对象上调用成员函数 storeUploadedImage()

抛出错误的函数如下

```
public function storeUploadedImage( $image ) {

  if ( $image['error'] == UPLOAD_ERR_OK )
  {
    // Does the Article object have an ID?
    // Line 95 -----v
    if ( is_null( $this->id ) ) trigger_error( "Article::storeUploadedImage(): Attempt to upload an image for an Article object that does not have its ID property set.", E_USER_ERROR );

    // Delete any previous image(s) for this article
    $this->deleteImages();

    // Get and store the image filename extension
    $this->imageExtension = strtolower( strrchr( $image['name'], '.' ) );

    // Store the image

    $tempFilename = trim( $image['tmp_name'] ); 

    if ( is_uploaded_file ( $tempFilename ) ) {
      if ( !( move_uploaded_file( $tempFilename, $this->getImagePath() ) ) ) trigger_error( "Article::storeUploadedImage(): Couldn't move uploaded file.", E_USER_ERROR );
      if ( !( chmod( $this->getImagePath(), 0666 ) ) ) trigger_error( "Article::storeUploadedImage(): Couldn't set permissions on uploaded file.", E_USER_ERROR );
    } 
```

尽管似乎与我的问题没有任何关系，但我已经通过 Google 寻找解决我的错误的方法。

帖子的其余部分是创建的，而不是图像。当我回来更新图像时，上传没有问题，没有错误，这令人费解。

id 的类构造部分是

```
public function __construct( $data=array() ) {
  if ( isset( $data['id'] ) ) $this->id = (int) $data['id']; 
```

我也用它在类的开头定义 id

```
public $id = null; 
```

我只能假设 Id 没有被正确传递`$this->id`并保持为空，但我不知道如何解决这个问题。尽管我对此也可能错了。

方法在这里被调用

```
if ( isset( $_POST['saveChanges'] ) ) {

// User has posted the articles edit form: save the new articles
$articles = new Article;
$articles->storeFormValues( $_POST );
$articles->insert();
if ( isset( $_FILES['image'] ) ) $article->storeUploadedImage( $_FILES['image'] );
header( "Location: admin.php?status=changesSaved" );

} elseif ( isset( $_POST['cancel'] ) ) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:11:49.437

您的对象称为`$articles`not `$article`，更改为：

```
if ( isset( $_FILES['image'] ) ) $articles->storeUploadedImage( $_FILES['image'] );
                                     //  ^ note: s 
```

# javascript - 将多个参数传递给单个参数

> ID：14159589
> 
> 赞同：1
> 
> 时间：2013-01-04T15:03:21.433
> 
> 标签：javascript, html

我在互联网上找到了一个显示和隐藏代码片段的脚本：

```
 function show(shown, hidden,) {
    document.getElementById(shown).style.display='block';
    document.getElementById(hidden).style.display='none';
    return false;
 }

<a href="#" onclick="return show('Page1','Page2');">Page 1</a>
<a href="#" onclick="return show('Page2','Page1');">Page 2</a> 
```

我的问题是，我将如何更改它以包含更多页面？

我能找到的唯一方法是：

```
 function show(shown, hidden1, hidden2, hidden3) {
      document.getElementById(shown).style.display='block';
      document.getElementById(hidden1).style.display='none';
      document.getElementById(hidden2).style.display='none';
      document.getElementById(hidden3).style.display='none';
      return false;
    }

<a href="" onclick="return show('Page1','Page2','Page3','Page4' );">Page 1</a>
<a href="" onclick="return show('Page2','Page1','Page3','Page4' );">Page 2</a>
<a href="" onclick="return show('Page3','Page1','Page2','Page4' );">Page 3</a>
<a href="" onclick="return show('Page4','Page1','Page2','Page3' );">Page 4</a> 
```

……不过好像有点乱。那么有没有办法一次将 3 页传递到脚本中的“隐藏”参数中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:06:03.943

您可以将数组作为`hidden`参数传递。然后你必须像这样修改你的JS：

```
function show(shown, hidden ) {
    document.getElementById(shown).style.display='block';
    for( var i=hidden.length; i--; ) {
      document.getElementById(hidden[i]).style.display='none';
    }
    return false;
 } 
```

HTML 看起来像这样：

```
<a href="" onclick="return show('Page1', ['Page2','Page3','Page4'] );">Page 1</a> 
```

作为替代方案，您可以使用类而不是设置样式。然后您可以将`hidden`参数全部删除：

```
function show( shown ) {

    // remove class 'shownPage' everywhere
    var els = document.querySelectorAll( '.shownPage' );
    for( var i=els.length; i--; ) {
      els.classList.remove( 'shownPage' );
    }

    // and just add it to the page to show
    document.getElementById(shown).classList.add( 'shownPage' );

    return false;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:07:21.600

您可以将数组作为第二个参数传递，甚至可以使用已经存在的`arguments`数组，例如 object ：

```
function show() {
    document.getElementById(arguments[0]).style.display='block';
    for(var i=1; i<arguments.length; i++){
        document.getElementById(arguments[i]).style.display='none';
    }
} 
```

使用此代码，第一个参数是要显示的 id，所有其他参数都是要隐藏的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:14:57.420

您可以使用[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)、传递[Sirko](https://stackoverflow.com/users/1169798/sirko)建议的数组、对象或使用选择您选择的所有节点（例如类）的方法，然后仅显示您想要的节点

```
// arguments
function show() {
    var i = arguments.length;
    if (i > 0) {
        while (--i) document.getElementById(arguments[i]).style.display = 'none';
        document.getElementById(arguments[0]).style.display = 'block';
    }
}
// show('vis_id_1', 'hid_id_1', 'hid_id_2',...)

// object
function show(obj) {
    var id;
    for (id in obj) {
        if (obj.hasOwnProperty(id)) { // safety filter
            document.getElementById(id).style.display = obj[id];
        }
    }
}
// show({'vis_id_1':'block', 'hid_id_1':'none'}); 
```

# java - 获取我刚刚单击以使用 java 应用程序（jar 可执行文件）打开的文件的路径

> ID：14159593
> 
> 赞同：0
> 
> 时间：2013-01-04T15:03:33.380
> 
> 标签：java, windows

我有一个什么都不做的简单程序：

```
class ShowTheNameOfTheFile{
  static public void main(String[] argv){

  }
} 
```

我将它编译为 ShowTheNameOfTheFile.jar 并配置我的 Windows 机器以使用它打开所有 txt 文件。

现在，当我单击一个 txt 文件时，它将打开我的 ShowTheNameOfTheFile.jar 程序。

在java中，我怎么知道用txt文件打开了ShowTheNameOfTheFile应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:43:22.110

您可以参考 Joop Eggen 的代码。

问题是，如果它是唯一的代码并且你将这个 jar 分配给 Windows Open，它可能会默默地死掉，而不会将任何输出打印到任何控制台，因为它不是从控制台启动的。

首先，从控制台尝试

```
java -jar ShowTheNameOfTheFile.jar 1 2 3 
```

如果数字被打印，那么它工作正常。

然后添加这样的东西

```
Process Builder pb = new ProcessBuilder("cmd", "/c", "start", "echo", args[0]);
pb.start(); 
```

到您的代码，然后双击一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:30:51.133

命令行参数应该给出文件路径。

```
class ShowTheNameOfTheFile{
    static public void main(String[] argv) {
        System.out.println(Arrays.toString(argv));
    }
} 
```

# .net - 获取当前登录的 Windows 用户？

> ID：14159594
> 
> 赞同：4
> 
> 时间：2013-01-04T15:03:34.313
> 
> 标签：.net, windows, winforms

> **可能重复：**
> [如何在 Active Directory 中获取用户的组？(c#, asp.net)](https://stackoverflow.com/questions/5309988/how-to-get-the-groups-of-a-user-in-active-directory-c-asp-net)

有没有办法使用命名空间获取当前登录的用户`System.DirectoryServices.AccountManagement`？我一直在使用以下内容：

```
 Dim wi As System.Security.Principal.WindowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent()

    Dim fullName As String = wi.Name.ToString

    Dim loggedOnUser = fullName.Substring(fullName.IndexOf("\") + 1)

    Console.WriteLine("The currently logged on user is {0}", loggedOnUser) 
```

但是我想要更多关于当前用户的信息，比如他们所属的纯文本组名，并且想知道`AccountManagement`命名空间是否提供了这个。

使用它只会返回我无法理解的数字字符串：

```
For Each item As IdentityReference In wi.Groups
    Console.WriteLine(item.ToString())
Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:16:49.957

你在寻找类似的东西吗？

```
using (PrincipalContext context = new PrincipalContext(ContextType.Domain))
{
    UserPrincipal user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, "login");
    foreach (var group in user.GetGroups())
    {
        Console.WriteLine(group.Name);
    }
} 
```

编辑：在stackoverflow的谷歌帮助下找到它;-) [活动目录：获取用户所在的组](https://stackoverflow.com/questions/7305279/active-directory-get-groups-where-a-user-is-member)

# python - 使用python从sqlite数据库填充关键字下拉菜单

> ID：14159604
> 
> 赞同：0
> 
> 时间：2013-01-04T15:04:00.917
> 
> 标签：python, database, sqlite, drop-down-menu

我对 python 比较陌生，我的标题几乎说明了一切。我看了看这里，我能找到的最接近的是用 PHP 而不是 python 完成的。

我编写的代码是执行搜索，单击搜索按钮，在我的数据库中搜索在提供的空间中键入的关键字，并在我的网页上的行中显示所有与该关键字对应的 URL。

现在，我需要在加载页面时使用下拉菜单填充所有关键字，并且能够单击关键字将执行搜索，就像输入关键字一样。我的下拉菜单将拉出可能包含或不包含文本的列 k1-k13。我计划使用 distinct 来删除任何重复的单词和空白字段，但至少希望让它首先工作。我确实有用 XML 编写的下拉菜单。

这是我得到的：

```
#!/usr/bin/env python2.7

import sys
import sqlite3
from string import Template
from cgi import FieldStorage
from dateutil import parser
from textwrap import dedent
from eicpy.www import CGIHandler
from eicpy.sql import ezsql

from eicpy import www
from eicpy import cgierror
cgierror.enable(display=True)

DB = ezsql().connect("/usr/HTTPServer/dev7/data/asq1.db")

class Page(CGIHandler):

def handle1(self):
   search_terms = self.fs.getfirst("searchinp", None)
   if search_terms:
      fields = search_terms.split(" ")
      steps = []
      apps = []

      for field in fields:
        recs = DB.execute("select issue, url, steps from help where k1='%s' or
        k2='%s' or k3='%s' or k4='%s' or k5='%s' or k6='%s' or k7='%s' or
        k8='%s' or k9='%s' or k10='%s' or k11='%s' or k12='%s' or k13='%s'" %
        (field, field, field, field, field, field, field, field, field, field,
         field, field, field)).fetchall()

#self.debug(recs)

for r in recs:
  if r.steps == "S":
    steps.append({
    "issue" : r.issue,
    "size" : "600x460",
    "location" : "/" + r.url
    })

if r.steps =="A":
    apps.append({
    "issue" : r.issue,
    "size" : "600x460",
    "location" : "/" + r.url
    })

#self.debug(steps)
#self.debug(apps)

self.show({"steps": steps, "apps": apps})

else :
   self.show({})

if __name__ == '__main__':
    p = Page('Agent Support Query'
        ,'pt/asq.xml'
        , ['/styles/asq.css'])
    p.handle1() 
```

# java - 当 Hibernate 保存它时，我如何让我的对象执行内部代码？

> ID：14159609
> 
> 赞同：3
> 
> 时间：2013-01-04T15:04:17.033
> 
> 标签：java, hibernate

以下代码保存`objA`.

```
A objA = new A();
session.save(objA); 
```

当`session.save(A)`被调用时，我希望我的`A`对象执行一个内部方法/函数：

```
onSave() {
  this.b = some code;
} 
```

我可以把代码放在哪里？是否有一个实际的`onSave()`方法，或者一个接口来实现或抽象类来扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:12:06.483

您可以使用 Hibernate 拦截器`org.hibernate.Interceptor`及其`onSave` [方法](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Interceptor.html)

```
boolean onSave(
    Object entity, 
    Serializable id, 
    Object[] state, 
    String[] propertyNames, 
    Type[] types) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:12:20.200

您可以使用[`Interceptor`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Interceptor.html).

# powershell - 检测是否有任何东西写入输出，即。标准输出

> ID：14159613
> 
> 赞同：0
> 
> 时间：2013-01-04T15:04:26.280
> 
> 标签：powershell, stdout

如何检测是否有任何内容写入输出流，即。脚本生命周期中的 StdOut。

1.  这必须在*退出*脚本之前检查，以便只有这样 - 屏幕才能停止。
2.  输出可能来自任何来源，包括外部命令，例如`java.exe`

优选地，没有文件的开销，输出可以被重定向到该文件并检查其大小。

更新：像 java.exe 这样的本机应用程序可能不使用标准流进行输出。`Output-Default`Cmdlet 即使在`Start-Transcribe`.

我目前依靠错误代码`$?`来检测失败，`java.exe`但当然这是*有限*的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:22:24.120

如果脚本作为后台作业运行，这似乎会容易得多。然后所有输出将被缓冲并使用接收作业读取。

# performance - 数学算法

> ID：14159615
> 
> 赞同：2
> 
> 时间：2013-01-04T15:04:41.213
> 
> 标签：performance, algorithm, math, optimization, mathematical-optimization

我试图理解算法的概念以及它们如何提高计算机程序的性能。

所以假设，我必须编写一个程序来生成一个数字列表，

1.  从数字 1 开始。

2.  加3。

3.  将结果 (1+3=4) 存储在列表中。

4.  将 5 添加到新数字。

5.  将结果 (4+5=9) 存储在列表中。

6.  保持交替将 3 和 5 添加到列表中的最新数字。

现在这是一个非常简单的程序，假设当数字大于 10,00,000 时程序必须停止，假设一个简单的程序执行此操作需要 10 秒来生成列表。

如何为这个问题设计一种算法，以使程序花费更少的时间来生成列表。

**注意**- 我试图通过一个例子来理解这里的概念，上面提到的时间是随机的，不是事实。如果有人不想使用上面的示例，如果有人可以通过“简单”示例帮助我理解这个概念，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T15:15:53.587

您在上面给出的（生成列表的步骤列表）*是*一种算法。

效率的显着提高通常意味着从一种算法更改为另一种以更少的工作完成相同目的的算法。例如，对于上面的算法，您可能会尝试完全避免创建列表（这样），而是替换一个可以快速生成列表中任何特定位置结果的算法——给定 N 作为输入，它会做类似的事情

```
int n = N/2; 
int m = N-n; 
return 1 + n * 3 + m * 5; 
```

请注意，这段代码可能并不完全正确（我认为它不能完全正确地处理奇数和偶数输入数字），但您明白了——而不是执行一系列操作来获得一个结果，它执行数量少得多的操作来产生相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:15:02.027

那么在你给你的例子中，你不能快得多。您必须输出整个列表，并且您描述的算法可以有效地完成它。

让我们稍微修改一下问题：您只需输出第一个大于 1000000 的数字。这可以比生成整个列表更智能地解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:09:10.083

当人们着眼于改进程序或代码片段的性能时（即使用更好的算法来计算相同的结果），重要的是要考虑算法的可见输出。也就是说，算法的（输出）是如何被使用或消耗的？换句话说，算法返回什么，该返回是如何消耗的？

您问题中的上述步骤表明应该建立一个列表，但是然后呢？如果仅仅丢弃结果（您可以轻松编写这样的程序或函数），一个好的优化器（人或机器）可以根据结果从未使用过的事实替换空程序或空程序或函数。（说真的：这是基准测试中的一个常见问题，一种算法计算一些结果来衡量生成代码的性能，但没有使用该结果，因此编译器可能会删除整个循环、内存分配，甚至可能是整个函数！）

因此，关于如何分析如何更改算法以获得更好性能的问题的设置，真正重要的是：识别或指定输出的一部分（由程序的其他部分使用）。

给定一个规范（关于如何使用算法的结果），我们可以向后工作以找到能够以更少的工作产生相同结果的算法改进。

当我们编写算法时，我们可以通过这些组合来确定改进的机会。换句话说，您上面描述的算法可能会被其他算法用来一次只找到一个值，这意味着 Jeffry 的解决方案是性能更好的替换算法。

但是，列表算法的不同使用者可能会要求其可​​见效果的不同部分，因此不同的优化或算法替换可能是合适的。这就是我上面描述的情况，如果根本不使用结果，但另一个消费者可能只想计算列表中的节点数，在这种情况下，完全不同的优化更合适。

在某些情况下，我们可以指定算法返回一些东西，并且我们被迫出于某种原因生成代码，而不知道谁在使用结果。在这些情况下，优化器（人或机器）将被迫做出悲观的假设，即返回的每个可见效果都可能被消耗。例如，假设列表是返回的内容（作为您问题中的附加说明），并且我们阻止任何优化器进一步查看消耗，我们很可能必须实际构建列表（因此杰弗里的回答不起作用）。

简而言之，如果没有额外的上下文，我们就无法完全分析问题及其解决方案空间。

在某种程度上，附加上下文采用显式返回语句的形式（或其他一些外部可见的副作用，例如修改全局变量）。

此外，一些额外的上下文可能采用另一种算法的形式，即封闭、调用或组合（使用感兴趣的原始算法）；因此，优化过程是递归的，并且（人或机器）可以“看到”的越多，产生的结果就越好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:20:36.020

让我们首先说您不*使用*算法来提高计算机程序的性能。算法**就是**程序（根据定义，算法是解决问题的有限操作序列）。

当然有一些著名的算法，已经由智者发明，可以完美地应用于一个问题（你的问题是关于图的？Dijkstra 的最短路径算法，Ford-Fulkerson 的最大流量，Prim 和 Kruskal 的最小生成树， 等等）。您通常希望在您的程序中重新使用这些性能良好的算法，而不是从头开始重新编写它们。

你会想要使用它们，因为

1.  重写它可能会让你的表现更差
2.  重写它肯定会消耗你的时间，你可以花时间解决问题（假设算法的使用是你问题的一个子集，即“为了解决我的问题，我需要先重新排序一个数组” - 重新排序的数组是解决方案的必要步骤，但不是你的问题）

至于数字 1，还涉及到一些数学计算，因为要衡量算法的性能，您必须做一些[在此处更好解释的事情](http://en.wikipedia.org/wiki/Big_O_notation)

希望我清楚地解决了您的疑问，不幸的是我不喜欢大符号和这样的性能计算，所以我只能指向维基百科链接

# php - 在codeigniter中加入两个数据库的查询

> ID：14159618
> 
> 赞同：7
> 
> 时间：2013-01-04T15:04:45.670
> 
> 标签：php, mysql, join, codeigniter-2, multiple-databases

我需要编写来自两个数据库的两个表的连接查询并获取连接的数据。例如，考虑我有一个数据库 db1，其中有一些名为公司、计划、客户的表。假设我需要通过使用类似列对它们进行分组来将两个表 company 和 plan 与另一个数据库 db2 上的另一个表“cdr”连接起来。

我现在正在运行的查询如下：

```
function get_per_company_total_use ($custid)
        {         
                 $this->DB1->select('ph_Companies.CompanyName');
                 $this->DB1->where('ph_Companies.Cust_ID', $custid);
                 $this->DB2->select_sum('cdr.call_length_billable')->from('cdr');
                 $this->DB2->group_by('cdr.CompanyName');
                 $this->db->join('Kalix2.ph_Companies', 'Kalix2.ph_Companies.CompanyName = Asterisk.cdr.CompanyName');
                 $query = $this->db->get();
                 if($query->result()){
                     foreach ($query->result() as $value) {
                         $companies[]= array($value->CompanyName,$value->call_length_billable);
                          }
                     return $companies;
                 }
                 else 
                     return FALSE;
        } 
```

但是我的查询没有获取数据并引发错误。同样的查询，我在单个数据库上运行并且正在工作。但我需要帮助才能找到如何使用两个数据库来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:45:19.313

如果您需要连接两个数据库表，您可以只提供以下内容：

```
function get_per_company_total_use ($custid)
        {         
                 $this->db->select('Kalix2.ph_Companies.CompanyName');
                 $this->db->where('Kalix2.ph_Companies.Cust_ID', $custid);
                 $this->db->select_sum('Asterisk.cdr.call_length_billable')->from('Asterisk.cdr');
                 $this->db->group_by('Asterisk.cdr.CompanyName');
                 $this->db->join('Kalix2.ph_Companies', 'Kalix2.ph_Companies.CompanyName = Asterisk.cdr.CompanyName');
                 $query = $this->db->get();
                 if($query->result()){
                     foreach ($query->result() as $value) {
                         $companies[]= array($value->CompanyName,$value->call_length_billable);
                          }
                     return $companies;
                 }
                 else 
                     return FALSE;
        } 
```

这里实际上不需要给出连接变量 DB1 或 DB2，只需给出 $this->db。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-05T11:02:04.237

我在 DB1 中有表 x，其中包含 id、name 和 y_id。在 DB2 中有一个带有 id 和 name 的表

因此，如果您需要在同一个查询中获取 x 和 y 的名称，这就是您的答案：

```
 $db = $this->load->database("DB2", TRUE);
    $DB = $this->load->database("DB1", TRUE);
    $DB->select('x.name as name1, y.name as name2');
    $DB->from('x');
    $DB->join($db->database.'.y','x.y_id = y.id');
    $res = $DB->get(); 
```

# javascript - jquery样式div并根据div标签添加标题

> ID：14159619
> 
> 赞同：0
> 
> 时间：2013-01-04T15:04:46.470
> 
> 标签：javascript, jquery

大家好，我有一个非常标准的带有 css 的 div，我想附加到给定类已经存在的 div。这是我的标记

```
<div id ="one" class="PortalBox">

     </div>

   <div class="ab_Box1d">
                <div style="width:600px;">
                    <%@ include file="./concur-reports/index.html"%> 
                </div>
    </div> <!--finish ab_box1d-->  

</div> 
```

这是我的jQuery。

```
 $(document).ready(function() {
$(".PortalBox").each(function(){
    var ThisCss = $('<div class="ab_Box1a" id="report1" style="width:640px; padding-top:6px;">'+   
            '<div class="ab_Box1b" id="reportchild1"> </div>' +
                '<table class="ab_Box1c" width="100%" border="0"'+
                  'cellspacing="0" cellpadding="0">'+
              '<tr>'+
                  '<td style="text-align:left">Concur Reports</td>'+
              '</tr>'+
          '</table>'
   +
     '</div>' )
     ThisCss.insertAfter('.PortalBox');
   });
}); 
```

所以基本上我试图在 jquery 中添加标记，当我偶然发现任何带有“PortalBox”类的 div 但是我需要使一个部分动态化，这基本上是这部分的标题

```
 '<td style="text-align:left">my channel</td>'+ 
```

需要动态地从另一个带有 div 的 HTML 属性中获取标题。我可以将“title”属性添加到具有值的 div 标签中吗？如何使用 jquery 实现这一点？或 java-script 我对任何想法都持开放态度，因此可以替代解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:08:57.687

将标题放在`data-*`属性中：

```
<div data-title="my channel" class="PortalBox"></div> 
```

然后，您可以使用 jQuery 检索它：

```
$('.PortalBox').data('title'); 
```

* * *

这是完整的代码：

```
$(document).ready(function() {
    var report = $('<div class="ab_Box1a" style="width:640px; padding-top:6px;">'+   
        '<div class="ab_Box1b" ></div>' +
        '<table class="ab_Box1c" width="100%" border="0"'+
        'cellspacing="0" cellpadding="0">'+
        '<tr>'+
        '<td style="text-align:left">Concur Reports</td>'+
        '</tr>'+
        '</table>'+
        '</div>');

    $(".PortalBox").each(function() {
        report.clone()
            .find('td').text( $(this).data('title') )
            .appendTo(this);
    });
}); 
```

请注意，像这样构建 HTML 片段非常容易出错。如果您发现自己经常这样做，您应该考虑使用模板系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:09:41.520

```
$('div selector').attr('title', enterDesiredvalue); 
```

# c - strncpy的实现

> ID：14159625
> 
> 赞同：1
> 
> 时间：2013-01-04T15:05:18.593
> 
> 标签：c, linux, string, gcc

我已经尝试实现**字符串 n 复制**功能。我已经成功了，但我试图优化我的代码，但它不起作用。

```
char *mystrncpy(char *dst, const char *src, size_t n)
{
   int i;
   char *temp;
   temp = dst;  
   for (i = 0; i < n; i++)
      *dst++ = *src++;
   return temp;
} 
```

上面的代码工作正常。

但是下面这个有一些问题。它只是为我传递`src`的任何值返回字符串。`n`

```
char *my_strncpy(char *dst, const char*src, size_t n)
{
   char *temp = dst;
   while ((*dst++ = *src++) && (--n));
   return temp;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:09:08.523

这两个代码片段是不等价的：

*   第一个遍历并复制所有`n`字符，而不管字符串的内容如何；
*   第二个在复制空终止符或复制`n`字符后立即停止，以先到者为准。

第一个和第二个实现都不等同于`strncpy`标准库，它复制到终止符，然后继续用零填充剩余空间。要使您的函数符合标准，请在`return`语句之前添加以下行：

```
for (; n-- ; *dst++ = '\0'); 
```

另一件需要注意的是，背后的意图`strncpy`经常被误解：它是用来处理固定长度的字符串，而不是具有固定限制的可变长度字符串。这就是为什么您需要对从中获得的结果进行空终止`strncpy`：如果`src`字符串长于`n`字符，则生成的字符串不会以空终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:09:57.710

第二个版本不起作用，因为它可能会超出`n`. 将测试拉到`n == 0`前面

```
while (n-- && (*dst++ = *src++))
    ; 
```

并且不要将 the`;`放在行尾。那里很容易错过。

您可以在以下位置查看示例实现[`man strncpy`](http://linux.die.net/man/3/strncpy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-24T20:42:57.943

您可以使用此代码，越简单越好！

```
void Strncpy( char* _dst, const char* _src, size_t _n )
{
   size_t i = 0;
   while(i++ != _n && (*_dst++ = *_src++));
} 
```

# sql - sql表数据透视

> ID：14159629
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:05:50.963
> 
> 标签：sql, pivot

我的表目前包含：

```
blog | id | attribute | value
p    | 1  |  pid      | abc1
p    | 1  |  date     | abc2
p    | 1  |  title    | abc3
p    | 2  |  id       | abc1
p    | 2  |  date     | abc2
p    | 2  |  title    | abc3
p    | 3  |  id       | abc1
p    | 3  |  date     | abc2
p    | 3  |  title    | abc3 
```

我需要将其更改为：

```
blog | id | postid | date | title
p    | 1  | abc1   | abc2 | abc3
p    | 2  | abc1   | abc2 | abc3
p    | 3  | abc1   | abc2 | abc3 
```

在 sql 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:08:49.473

您没有指定您使用的是什么 RDBMS，但这适用于所有版本：

```
select blog,
  id,
  max(case when attribute = 'pid' then value end) postid,
  max(case when attribute = 'date' then value end) date,
  max(case when attribute = 'title' then value end) title
from yourtable
group by blog, id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/58bb6/1)

如果您正在使用具有该`PIVOT`功能的数据库，那么您的查询将如下所示：

```
select blog, id, pid as postid, date, title
from 
(
  select blog, id, attribute, value
  from yourtable
) src
pivot
(
  max(value)
  for attribute in (pid, date, title)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/58bb6/3)

两者的结果将是：

```
| BLOG | ID | POSTID | DATE | TITLE |
-------------------------------------
|    p |  1 |   abc1 | abc2 |  abc3 |
|    p |  2 |   abc1 | abc2 |  abc3 |
|    p |  3 |   abc1 | abc2 |  abc3 | 
```

# c++ - 如何在 QNX 上强制执行特定的线程序列？

> ID：14159630
> 
> 赞同：1
> 
> 时间：2013-01-04T15:05:51.017
> 
> 标签：c++, multithreading, semaphore, qnx

我有 3 个线程：A、B 和 C，并且想在 QNX 实时操作系统上用 C++ 调度序列 A、B、B、C、C、C、B、B、A。我的方法是使用信号量并保存最后执行的线程（因为 B->C 和 B->A）：

```
#include <stdio.h>
#include <pthread.h>
#include <semaphore.h>
/*semaphores*/
sem_t sa = 1;
sem_t sb = 0;
sem_t sc = 0;

char last;         //remember the last processed thread

void* threadA (void* a) 
{
    while(1) 
    {
        sem_wait(&sa);          //p(sa)
        printf("threadA \n");   //threads function
        last = 'A';             //mark A as last processed
        sem_post(&sb);          //v(sb)
    }
}

void* threadB (void* a) 
{
    int c = 1;
    while(1) 
    {
        printf("threadB\n");
        if (c == 2)
        {
            sem_wait(&sb);
            c = 1;
            if (last == 'A')
            {
                last = 'B';
                sem_post(&sc);    
            }
            if (last == 'C')
            {
                last = 'B';
                sem_post(&sb)   
            }
        }
        c++;
    }
}

void* threadC (void* a) 
{
    int c = 1;
    while(1) 
    {
        printf("threadC \n");
        if (c == 3)
        {
            sem_wait(&sc);
            c = 1;
            last = 'C';
            sem_post(&sb);
        }
        c++;
    }
}

int main() 
{
    pthread_create (&threadA, NULL, threadA, NULL);
    pthread_create (&threadB, NULL, threadB, NULL);
    pthread_create (&threadC, NULL, threadC, NULL);
} 
```

不幸的是，我无法测试我的代码，因为我没有安装 QNX。所以我的问题是：这会起作用吗？是否有更好的或内置的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:44:58.753

您依赖于立即开始运行的线程或类似的东西吗？肯定有更好的方法来做到这一点。

您的线程应该在执行其他任何操作之前等待它们的信号量。

我会将调度逻辑移到一个公共位置（可能传入线程类型和迭代次数，然后发出信号）。

我会让每个`sem_post`信号都有一个循环迭代请求。所以如果你想`C`运行 3 次，调用`sem_post`3 次。

我不知道你在用第一个参数做什么`pthread_create`。用线程数据覆盖函数？馊主意。

由于这是 C++，我会将线程的创建封装到一个对象中。我会传递信号量之类的东西以在`void*`arg 中等待。

我怀疑您要么需要更多编写多线程代码的经验，要么需要在实时平台上进行调试，才能成功完成任务。

# php - 使用 mPDF 从数据库调用行

> ID：14159633
> 
> 赞同：2
> 
> 时间：2013-01-04T15:06:05.870
> 
> 标签：php, html, mysql, row, mpdf

我只是尝试使用 mPDF 按数据库制作输出表 pdf，但仍然很难做到这一点。

```
<?php
$html = '

<center><h3>TITLE</h3></center>
<center>
<table border="1">
<tr>
    <th>COLUMN 1</th><th>COLUMN 2</th>
</tr>
<tr>
        <!--how to fetch this row from DB? -->
    <td>.$row[no1].</td><td>.$row[no2].</td>
</tr>
</table></center>

';
//==============================================================
//==============================================================
//==============================================================
include("../mpdf.php");
    include "conn.php";

    $res = mysql_query("select * from list");
    if (!$res)
        die("query error : ".mysql_error());
$mpdf=new mPDF('c','A4','','',32,25,27,25,16,13);
$mpdf->SetDisplayMode('fullpage');
$mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list
// LOAD a stylesheet
$stylesheet = file_get_contents('mpdfstyletables.css');
$mpdf->WriteHTML($stylesheet,1); // The parameter 1 tells that this is css/style only and no body/html/text
while($row = mysql_fetch_array($res))
    if (!$res)
        die("error fetch array : ".mysql_error());
$mpdf->WriteHTML($html,2);
$mpdf->Output('mpdf.pdf','I');
exit;
//==============================================================
//==============================================================
//==============================================================
?> 
```

当我运行此脚本时，它可以生成 PDF，但行与数据库不匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:41:59.100

像这样的东西：

```
<?php

//==============================================================
//==============================================================
//==============================================================
include("../mpdf.php");
include "conn.php";

$res = mysql_query("select * from list");
if (!$res)
    die("query error : ".mysql_error());
$mpdf=new mPDF('c','A4','','',32,25,27,25,16,13);
$mpdf->SetDisplayMode('fullpage');
$mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list
// LOAD a stylesheet
$stylesheet = file_get_contents('mpdfstyletables.css');
$mpdf->WriteHTML($stylesheet,1); // The parameter 1 tells that this is css/style only and no body/html/text
$html = '

<center><h3>TITLE</h3></center>
<center>
<table border="1">
<tr>
<th>COLUMN 1</th><th>COLUMN 2</th>
</tr>
<tr>';

while($row = mysql_fetch_array($res)){
$html .= '<td>'.$row['no1'].'</td><td>' . $row['no2']. '</td>';
}
$html .= '</tr>
</table></center>
';
$mpdf->WriteHTML($html,2); 
$mpdf->Output('mpdf.pdf','I');
exit;
//==============================================================
//==============================================================
//==============================================================
?> 
```

# java - BouncyCastle 和 RSA - 非法密钥大小

> ID：14159635
> 
> 赞同：2
> 
> 时间：2013-01-04T15:06:15.893
> 
> 标签：java, rsa, bouncycastle

我正在使用以下代码：

```
@Test
public void simpleEncryptDecryptTest_shouldSucceed() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    String text = "ASDF-asdföjk_\n394ysf";
    String encryptedText = null;

    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

    PEMReader in = new PEMReader(new FileReader("C:/Users/User/tu/vs_exc3/keys/auction-server.pem"), new PasswordFinder() {
        @Override
        public char[] getPassword() {
            return new char[] {'2', '3', '4', '5', '6'};
        }
    });

    PrivateKey privateKey = (PrivateKey)in.readObject();

    in = new PEMReader(new FileReader("C:/Users/User/tu/vs_exc3/keys/auction-server.pub.pem"));

    PublicKey publicKey = (PublicKey)in.readObject();

    Cipher decodeCipher = Cipher.getInstance("RSA/NONE/OAEPWithSHA256AndMGF1Padding");
    Cipher encodeCipher = Cipher.getInstance("RSA/NONE/OAEPWithSHA256AndMGF1Padding");
    decodeCipher.init(Cipher.DECRYPT_MODE, privateKey);
    encodeCipher.init(Cipher.ENCRYPT_MODE, publicKey);

    byte[] encrypted = encodeCipher.doFinal(text.getBytes());
    encryptedText = new String(encrypted);
    byte[] decrypted = decodeCipher.doFinal(encryptedText.getBytes());

    Assert.assertTrue(text.equals(new String(decrypted)));
} 
```

我得到以下异常：

```
 org.bouncycastle.openssl.EncryptionException: exception using cipher - please check password and data.
        at org.bouncycastle.openssl.PEMUtilities.crypt(Unknown Source)
            at org.bouncycastle.openssl.PEMReader.readKeyPair(Unknown Source)
            at org.bouncycastle.openssl.PEMReader.readObject(Unknown Source)
            at      utils.Testibert.simpleEncryptDecryptTest_shouldSucceed(Testibert.java:57)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
            at java.lang.reflect.Method.invoke(Unknown Source)
            at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
            at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
            at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
            at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
            at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
            at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
            at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
            at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
            at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
            at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
            at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
            at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
            at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
            at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
            at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:      
    Caused by: java.security.InvalidKeyException: Illegal key size
            at javax.crypto.Cipher.a(DashoA13*..)
            at javax.crypto.Cipher.init(DashoA13*..)
            at javax.crypto.Cipher.init(DashoA13*..)
            ... 27 more 
```

我已经在 J​​RE 和我的 JDK 目录中安装了 JCE 无限强度文件。什么可能导致异常？

**编辑 1：** 私钥文件如下所示：

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: AES-256-CBC,8429830AD224E4D56A21C3C680D6EA57

key...
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-13T16:36:23.927

这是一个迟到的答案，但我遇到了同样的问题。我在 Tomcat 上部署了一个 Web 应用程序，并在解密密钥时遇到了同样的错误。文件已`Unlimited Strength Jurisdiction Policy`正确安装。这是有效的，然后我们在服务器上更新了 Tomcat，我们开始出现`Caused by: java.security.InvalidKeyException: Illegal key size`异常。

事实证明，问题出在 Tomcat 服务上。它在 jdk 中调用 Java jre 与 Java jre，而 jre 没有增强的 jar 文件。

此堆栈答案可能有助于更改正在使用的 Java Tomcat 的版本： [如何更改 TOMCAT 使用的 Java 版本？](https://stackoverflow.com/questions/4072260/how-to-change-java-version-used-by-tomcat)

尽管我的问题与 Tomcat 有关，但我相信这也可能是在任何环境中运行 Java 的问题。

# c# - 将完整的子表单传递给另一个子表单

> ID：14159637
> 
> 赞同：2
> 
> 时间：2013-01-04T15:06:17.490
> 
> 标签：c#, winforms, visual-studio-2010, .net-2.0

我看到很多页面和问题涉及将值从一种形式传递到另一种形式。我想做一些不同的事情。不是值，而是整个表单，作为参数传递。请注意，这不是 MDI 表格。

我有一个带有 2 个按钮的父表单。一个按钮可创建 Child1 表单等。另一个（可选）按钮调用不同的子表单编辑器。

第一个按钮是一个验证按钮，如果有效，会弹出 Child1 表单，其中包含一个填充了键/值对的列表视图框。第二个是带有自己按钮的编辑器。如果按下其中一个（提交）按钮，则应使用新的键值对更新第一个 Child1 表单。

我一直遇到的问题是我似乎无法让 Child1 表单来反映更改。我不知道更新此 Child1 表单的最佳方法是什么。我已经用 EndUpdate 尝试了 BeginUpdate，并刷新了它，现在经过所有尝试，我有点迷失了。我希望有一个人可以帮助我。

我实际上想要做的是刷新 ChildForm1，说它是一个收件箱，当某些东西被“保存”或从第二个子窗体编辑器添加时。在第二个子窗体编辑器中单击按钮，第一个子窗体应该刷新。

父窗体：

```
 public ChildForm1 MyboxofValues; 

    private void btn1_Click(object sender, EventArgs e)
    {
            MyboxofValues = new ChildForm1();
            MyboxofValues.Show();
    }

    private void btn2_Click(object sender, EventArgs e)
    {
        Editor myEditor = new Editor();
        myEditor.Show(); 
    } 
```

ChildForm1：

```
 public ChildForm1()
    {
        InitializeComponent();
        updateMe();

    }
    public void updateMe()
    {
        listView1.Items.Clear();
        if (MainCode.subRows.Count > 0)
        {
            foreach (KeyValuePair<string, string> element in MainCode.subRows)
            {
                ListViewItem lvi = new ListViewItem(element.Value);
                lvi.SubItems.Add(element.Key);
                listView1.Items.Add(lvi);
            }
        }
    } 
```

编辑器形式：

```
 private ChildForm1 originalForm = new ChildForm1();

    private void btnSubmit_Click(object sender, EventArgs e)
    {
            originalForm.updateMe();
    } 
```

我敢肯定这很容易，但我做不到。如果有人可以提供帮助，我们将不胜感激，为我节省几个小时！如果有更好的方法来更新提交结果也可以，请举个例子？

出于测试目的，我为 ChildForm1 创建了一个“刷新”按钮，它可以工作！（它实际上只是调用了updateMe（）。所以我认为这很奇怪，我正在创建表单的一个新实例并试图更改这个不存在的（null）表单而不是实际的ChildForm1。但我想刷新listviewBox从编辑器表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:15:53.653

`Editor`与其成为父表单的“子”表单，不如将其设为`ChildForm`（也就是父表单的孙子）的子表单。当然，由于您没有使用 MDI，这只是解决问题的一种合乎逻辑的方式，仅此而已。

`Editor`与其让父级来自创建，不如`ChildForm`让其创建。当父窗体的第二个按钮被点击时，它会调用类似`CreateEditor`of的方法`ChildForm`。当它创建编辑器时，它显然可以存储它以供以后交互。

如果父表单需要对它做任何其他事情，`Editor`它可以通过`ChildForm`来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:14:43.037

我建议不要从另一个表单更新一个表单，而是将工作数据存储在视图模型之类的对象中，并始终从中刷新表单。

查看对 WinForms 应用程序有用的 MVP 模式。

[http://martinfowler.com/eaaDev/ModelViewPresenter.html](http://martinfowler.com/eaaDev/ModelViewPresenter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:41:45.370

很大程度上是通过 Servy 的敏锐帮助。我不知道这是否对其他人有帮助，所以这对我有用。：

父窗体，MyBox，根据我最初的想法，它是以前的 ChildForm1：

```
 public MyBox()
    {
        InitializeComponent();
        updateMe();
    }
    public void updateMe()
    {
        listView1.Items.Clear();
        if (MainCode.subRows.Count > 0)
        {
            foreach (KeyValuePair<string, string> element in MainCode.subRows)
            {
                ListViewItem lvi= new ListViewItem(element.Value);
                lvi.SubItems.Add(element.Key);
                listView1.Items.Add(lvi);
            }
        }
    }
    private void btnCreateEditor_Click(object sender, EventArgs e)
    { 
        plainTextEditor editor = new plainTextEditor(this);
        Form1.editorOpen = true;
        editor.Show(this);
    } 
```

这个表单有一个按钮，它调用编辑器表单，现在看起来像这样：

```
public partial class Editor : Form
{
    private MyBox listviewBoxForm;

    public Editor(listviewBoxForm _form1)
    {
        InitializeComponent();
        inboxForm = _form1;
    }
 } 
```

其实很简单，但没有立即看到。我让它变得比代表等更复杂。这很简单，它似乎对我有用。

# c++ - 尝试从深度图像中提取手部轮廓时出现无效的矩阵错误

> ID：14159646
> 
> 赞同：0
> 
> 时间：2013-01-04T15:06:50.853
> 
> 标签：c++, opencv, openni

我使用 OpenCV 和 OpenNI 从 Xtion 传感器生成的深度图像中提取手，然后提取单个手指。当手生成器的焦点手势已经执行时，hasHand bool 设置为 true 并运行下面的代码。hand[] 是一个浮点数组，其中包含被跟踪手的 x、y 和 z 坐标。

```
if(hasHand)
    {
        unsigned char shade = 255 - (unsigned char)(hand[2] *  128.0f);
        Scalar color(0, shade, 0);

        vector<Point> handContour;
        getHandContour(depthMat, hand, handContour);
        bool grasp = convexity(handContour) > grabConvexity; //PROBLEM
        int thickness = grasp ? CV_FILLED : 3;
        circle(depthMatBgr, Point(hand[0], hand[1]), 10, color, thickness);

        vector<Point> fingerTips;
        detectFingerTips(handContour, fingerTips, &depthMatBgr);
    } 
```

一切都运行良好，直到我评论的那一行，此时我收到：

```
OpenCV Error: Bad argument (input array is not a valid matrix) in unknown function, ... 
```

我已经被这个问题困扰了一段时间，我不知道为什么我会得到这个。getHandContour 的代码是：

```
bool getHandContour(const Mat &depthMat, const float *v, vector<Point> &handContour) 
{
const int maxHandRadius = 128; // in px
const short handDepthRange = 200; // in mm
const double epsilon = 17.5; // approximation accuracy (maximum distance between    the original hand contour and its approximation)

depth = v[2] * 1000.0f; // hand depth
nearClip = depth - 100; // near clipping plane
farClip = depth + 100; // far clipping plane

static Mat mask(frameSize, CV_8UC1);
mask.setTo(0);

// extract hand region  
circle(mask, Point(v[0], v[1]), maxHandRadius, 255, CV_FILLED);
mask = mask & depthMat > nearClip & depthMat < farClip;

// DEBUG(show mask)
imshow("mask1", mask);

// assume largest contour in hand region to be the hand contour
vector<vector<Point> > contours;
findContours(mask, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);
int n = contours.size();
int maxI = -1;
int maxSize = -1;
for (int i=0; i<n; i++) {
    int size  = contours[i].size();
    if (size > maxSize) {
        maxSize = size;
        maxI = i;
    }
}

bool handContourFound = (maxI >= 0);

if (handContourFound) {
    approxPolyDP( Mat(contours[maxI]), handContour, epsilon, true );
}

return maxI >= 0;
} 
```

我不确定这是否足以让人们帮助我（这对很多人来说都是新的），但任何朝着正确方向的轻推将不胜感激。

编辑：对不起，我忘了在这个问题中包含凸性（）代码：

```
double convexity(const vector<Point> &contour) {
Mat contourMat(contour);

vector<int> hull;
convexHull(contourMat, hull);

int n = hull.size();
vector<Point> hullContour;

for (int i=0; i<n; i++) {
    hullContour.push_back(contour[hull[i]]);
}

Mat hullContourMat(hullContour);

return (contourArea(contourMat) / contourArea(hullContourMat));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:30:30.077

我相信 approxPolyDP 只需要一个计数，而您正试图将它传递给整个列表

# iphone - 欧洲的 UTC 时区给出 2014 年而不是 2013 年

> ID：14159652
> 
> 赞同：2
> 
> 时间：2013-01-04T15:07:17.243
> 
> 标签：iphone, ios, timezone, utc

我正在使用“UTC”来设置时区。

如果“系统设置->常规->区域格式”在美国，则日期为 2013 年。如果在欧洲，则日期为 2014 年。我正在使用下面的代码

```
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];

[formatter setDateFormat:@"YYYY-MM-dd HH:mm:ss"];
[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
NSDate *dataTmp = [formatter dateFromString:[[[self.commManager.bolsaDic objectForKey:@"data"] objectAtIndex:0] objectForKey:@"TradeTimeUtc"]];

[formatter setDateFormat:@"dd-MM-YY HH:mm"];       
[formatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:24:06.620

永远不要在日期格式或解析中使用 YYYY。这是一个 ISO 年，它会搞砸它所涉及的任何事情。询问 Apple - 这就是 1 月 1 日 iOS 出现 DND 错误的原因。

始终使用 yyyy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:10:35.330

我相信这与您的日期格式中的“YY”有关。尝试将其更改为小写“yy”。（不要问我为什么！）

编辑：啊，显然大写 Y 返回当前一周开始的年份，所以如果它是 2014 年 1 月 1 日但星期三，则该周开始于 2013 年。

# c++ - 传递没有所有权的简单指针来提升 python

> ID：14159654
> 
> 赞同：1
> 
> 时间：2013-01-04T15:07:20.703
> 
> 标签：c++, boost-python, word-wrap

我正在迈出第一步`boost python`来测试我的课程，但我在为我的课程声明 python 模块时遇到了困难。

我的班级接受指向另一个班级的指针，但我不知道如何声明

```
class A{ };

class B
{
    B( std::string& name, A* ptr ){ 
        std::cot << ptr->data << std::endl; // no ownership
    }
    void my_foo(){
        // do something!
    }
}; 
```

我将 A 类导出到 python，但我遇到了 B 类的问题

```
class_< B >("B", init< std::string, A >() )
{
    .def("my_foo", &B::my_foo);   
} 
```

我有很多错误。我做错了什么？我正在阅读有关政策的信息，但在这里我认为我不必应用其中的一些，对吗？

亲切的问候

AFG

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:44:52.963

您的示例的第一个问题是`boost::python::class_`主体不应该放在花括号内 - 它们不是宏或新类型的函数，它们只是具有很多花哨的运算符重载的模板类，所以你真正想要的是像这样：

```
class_<B>("B", init<std::string,A*>())
    .def("my_foo", &B::my_foo)
    ; 
```

在该片段中，您可以看到 init 编译所需的修复 - 只需`A*`作为模板参数而不是“A”传递。这应该足以让它编译。

这是否足以让它做你想做的事情取决于构造函数`B`对它传递的指针的作用。如果它只是在构造函数的范围内使用它，或者它深度复制它，你就可以了。但是如果它持有该指针（例如作为数据成员），那么如果`A`对象在对象之前超出范围，您可能会遇到麻烦`B`。如果是这种情况，您会想要使用该`with_custodian_and_ward`策略，我认为它看起来像这样：

```
init<std::string,A*>()[with_custodian_and_ward<1,3>()] 
```

整数模板参数`with_custodian_and_ward`引用`__init__`方法的位置参数；`1`指`self`和`3`指`A*`参数，所以这意味着“让`A`传递给构造函数的对象保持活动状态，直到构造的`B`对象被销毁。”

您可以在这里找到更多信息：

[http://www.boost.org/doc/libs/1_52_0/libs/python/doc/v2/with_custodian_and_ward.html](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/v2/with_custodian_and_ward.html)

# file - Perforce 中流之间的差异

> ID：14159656
> 
> 赞同：4
> 
> 时间：2013-01-04T15:07:21.940
> 
> 标签：file, version-control, perforce

我希望能够在两个不同的 perforce 流之间区分相同的文件或目录。我知道如何对两个文件运行一个简单的 diff 命令，但我试图找到一种方法来通过脚本说我想将文件 X 与这些流进行比较（可能在脚本中硬编码流名称）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:19:18.470

编辑：以下适用于命令行，但如果您有 P4V，您只需右键单击流并在 Streams 视图中说“Diff against parent”。惊人的！

* * *

看起来 p4 diff2 支持它，它似乎在我的环境中不起作用。具体来说，您似乎需要像这样表示仓库名称：

```
p4 diff2 -S //depot/streamname 
```

-S 流 [-P 父级] 将流与其父级进行区分。要将流与配置的父流以外的流进行区分，请指定 -P。

[http://www.perforce.com/perforce/r12.2/manuals/cmdref/diff2.html](http://www.perforce.com/perforce/r12.2/manuals/cmdref/diff2.html)

# database - 在子查询中获取 ID

> ID：14159663
> 
> 赞同：1
> 
> 时间：2013-01-04T15:07:44.173
> 
> 标签：database, oracle, subquery, oracle-apex

我一直在 APEX 的一个拍卖网站上工作。对于拍卖网站，我需要做一个概述，显示某人购买了哪些产品。很确定这只是我忘记的东西，但是在以下情况下如何获得结果：

**3 表**

```
Table User
USER_ID
EMAIL

Table Product
PRODUCT_ID
USER_ID

Table Bid
BID_ID
PRODUCT_ID
USER_ID
CREDITS 
```

当然还有更多的列，但我认为将它们排除在外会使解释稍微容易一些。

**需要的结果**

显示产品表中的产品。但前提是当前用户的出价最高（积分）。

**至今**

我一直在思考/尝试很多，但在子查询结束时一直被杀死。

```
SELECT *
FROM "PRODUCT"
WHERE "PRODUCT_ID" IN (SELECT "PRODUCT_ID" FROM "BID"
                      WHERE "USER_ID" = 
                      (SELECT "USER_ID" FROM "USER"
                      WHERE lower("EMAIL") = lower(:APP_USER)))
  and "PRODUCT_ID" = (SELECT "PRODUCT_ID" FROM "BID"
                      WHERE "CREDITS" =
                     (SELECT MAX("CREDITS") FROM "BID"
                      WHERE "PRODUCT_ID" = ? 
```

*Apex 返回当前用户的邮箱地址 (:APP_USER)

真正的问题始于“和”，因为用户过滤工作正常。我不知道如何在子查询中获取比较的（当前）PRODUCT_ID。我很确定如果我在子查询结束时获得该值，它将起作用。

使用 Oracle 数据库。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:16:58.440

试试这个..

```
SELECT *
FROM PRODUCT p
WHERE p.PRODUCT_ID IN (SELECT PRODUCT_ID FROM BID"
                      WHERE "USER_ID" = 
                      (SELECT "USER_ID" FROM "USER"
                      WHERE lower("EMAIL") = lower(:APP_USER)))
  and "PRODUCT_ID" =  (SELECT "PRODUCT_ID" FROM "BID" b
                      WHERE "CREDITS" =
                     (SELECT MAX("CREDITS") FROM "BID"
                      WHERE b.PRODUCT_ID" = p.product_id)); 
```

或者

```
and "PRODUCT_ID" in (SELECT "PRODUCT_ID" FROM "BID" b
                      WHERE "CREDITS" =
                     (SELECT MAX("CREDITS") FROM "BID"
                      WHERE b.PRODUCT_ID" = p.product_id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:24:53.950

像这样的东西？

```
SELECT
    p.*
FROM
    Bid b
    JOIN
    -- get the max bid per product
    (SELECT
        PRODUCT_ID, MAX(CREDITS) AS MAX_C
    FROM
        Bid
    GROUP BY
        PRODUCT_ID) m ON b.PRODUCT_ID = m.PRODUCT_ID AND b.CREDITS = m.CREDITS
    JOIN USER u ON b.USER_ID = u.USER_ID
    JOIN Product p ON b.PRODUCT_ID = p.PRODUCT_ID
WHERE
    lower(u.EMAIL) = lower(:APP_USER))); 
```

请注意，如果投标中的积分不是每个产品唯一的，您可能会遇到问题（但这应该是您拍卖中的业务规则）。

**编辑**

从查询长度的角度来看，以下内容可能更好，因为它确保您只检查用户实际出价的产品的胜出情况，而不是上面检查所有产品的情况。

```
SELECT
    p.*
FROM
    Bid b
    JOIN
    -- get the max bid per product that the user bid on
    (SELECT
        PRODUCT_ID, MAX(CREDITS) AS MAX_C
    FROM
        Bid b2
        JOIN (
            -- get only the products that the user has bid on
            SELECT
                DISTINCT b1.PRODUCT_ID
            FROM
                Bid b1
                JOIN User u1 ON b1.USER_ID = u1.USER_ID
            WHERE
                lower(u1.EMAIL) = lower(:APP_USER))) dp
        ON b2.PRODUCT_ID = dp.PRODUCT_ID
    GROUP BY
        PRODUCT_ID) m ON b.PRODUCT_ID = m.PRODUCT_ID AND b.CREDITS = m.CREDITS
    JOIN USER u ON b.USER_ID = u.USER_ID
    JOIN Product p ON b.PRODUCT_ID = p.PRODUCT_ID
WHERE
    lower(u.EMAIL) = lower(:APP_USER))); 
```

# linux - cd 在这条路径上不起作用。有任何想法吗？

> ID：14159664
> 
> 赞同：0
> 
> 时间：2013-01-04T15:07:50.620
> 
> 标签：linux, bash, shell, sed, cd

在我正在编写的一段脚本中，我将路径列表输出到一个临时文本文件中，以便稍后与 cd 一起使用。我正在使用 sed 将目录名称中的空格替换为 '\ '，这样我还可以使脚本使用目录名称中的空格。我的命令如下： `cat temp.txt | sed 's/ /\\ /g'` 这具有用 '\ ' 替换空格的所需输出，但是当我稍后尝试 cd 时，它会忽略第二个单词并说 example\ 不存在。任何想法如何解决这一问题？

如果你想看的话，我的整个脚本都在 pastebin 上：http: [//pastebin.com/6jmnKDAd](http://pastebin.com/6jmnKDAd)

这是我添加 sed 之前的备份

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:14:22.477

尝试将您的变量包含在“”中而不转义空格。

```
cd "$mydir" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:27:32.353

为了补充 Lorenzo 的回答，如果文件中有一堆换行符分隔的路径名：

```
while IFS= read -r path; do
    cd "$path"
    do stuff
done < temp.txt 
```

引用`"$path"`是防止shell[分词的关键](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:38:58.477

是否需要使用临时文件，或者您可以将目录存储在数组中：

```
dirs=()
dirs+=("/tmp/file A.txt")
dirs+=("/tmp/file B.txt")

for d in "${dirs[@]}"; do
  cd "$d"
done 
```

**资源**

*   man bash # type '/^ *Arrays' 搜索数组部分
*   [http://tldp.org/LDP/abs/html/arrays.html](http://tldp.org/LDP/abs/html/arrays.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:36:05.847

你需要这样做而不是`cat temp.txt | sed 's/ /\\ /g'`

```
perl -F"/" -ane 'foreach (@F){if(/ /){$_="\"".$_."\"";}}print join "/",@F;' temp.txt 
```

也检查[这里](http://theunixshell.blogspot.in/2013/01/handling-directory-names-containing.html)

# javascript - 如何以 unicode 编码保存 cookie 值

> ID：14159665
> 
> 赞同：1
> 
> 时间：2013-01-04T15:07:51.673
> 
> 标签：javascript, cookies, unicode

我来自越南（我们使用特殊字符）。我想以 unicode 编码保存一个cookie**值****以**保留这些特殊字符，但我不知道如何继续。

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:19:01.763**

# objective-c - 使用一段代码修复了 iphone 4 和 5 页脚上的 UIButton

> ID：14159667
> 
> 赞同：0
> 
> 时间：2013-01-04T15:08:05.533
> 
> 标签：objective-c, ios, xcode

当我将模拟器更改为 4 英寸时，屏幕左下角有一个按钮会跳起来。不管iphone分辨率如何，有没有办法让它固定在底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:02:00.933

如果您使用的是界面生成器，只需选择控件并执行以下操作：

![在此处输入图像描述](../Images/555fc58ff118d22ee3fdbb0ec42076e9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:25:52.710

您可以设置有关屏幕尺寸的框架，例如：

```
MyButton.frame = CGRectMake(10, self.view.frame.size.height -60,100,50); 
```

# asp.net - 进入添加模式时使用默认值填充 ASP.Net DetailsView DropDownList

> ID：14159669
> 
> 赞同：0
> 
> 时间：2013-01-04T15:08:15.237
> 
> 标签：asp.net, vb.net, default-value, populate, code-behind

当用户从 VB.Net 代码隐藏文件进入 ASP.Net DetailsView 上的“添加”模式时，我们希望使用从变量获得的默认值填充 DropDownList。你能告诉我如何让它填充吗？

这是我们希望填充的 DropDownList 的标记：

```
<asp:TemplateField HeaderText="Class:" SortExpression="ClassID">
    <EditItemTemplate>
        <asp:DropDownList 
            ID="DropDownListClass" 
            Runat="server"
            DataSourceID="SqlDataSourceClasses"
            DataTextField = "ClassName"
            DataValueField="ID"
            SelectedValue='<%# Bind("ClassID") %>'
            ForeColor="Blue">
        </asp:DropDownList>

        <asp:RequiredFieldValidator ID="RequiredFieldValidatorEditClass" runat="server" ControlToValidate="DropDownListClass" 
            ErrorMessage="Please select a Class here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
            SetFocusOnError="True" Display="Dynamic">

        </asp:RequiredFieldValidator>

    </EditItemTemplate>

    <InsertItemTemplate>

        <asp:DropDownList 
            ID="DropDownListClass" 
            Runat="server"
            DataSourceID="SqlDataSourceClasses"
            DataTextField = "ClassName"
            DataValueField="ID"
            SelectedValue='<%# Bind("ClassID") %>'
            ForeColor="Blue">
        </asp:DropDownList>

        <asp:RequiredFieldValidator ID="RequiredFieldValidatorInsertClass" runat="server" ControlToValidate="DropDownListClass" 
            ErrorMessage="Please select a Class here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
            SetFocusOnError="True" Display="Dynamic">

        </asp:RequiredFieldValidator>
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:DropDownList 
            ID="DropDownListClass" 
            Runat="server"
            DataSourceID="SqlDataSourceClasses"
            DataTextField = "ClassName"
            DataValueField="ID"
            SelectedValue='<%# Bind("ClassID") %>'
            Enabled="false"
            ForeColor="Blue"
            Font-Bold="true"> 
        </asp:DropDownList>
    </ItemTemplate>
</asp:TemplateField> 
```

我们在代码隐藏文件中使用它来填充将包含默认值的变量：

```
Function GetValueFromDropDownListClassItem() As String

    Dim strValueToReturn As String
    Dim drpValue As DropDownList

    drpValue = DetailsView.FindControl("DropDownListClass")

    If String.IsNullOrEmpty(drpValue.Text) Then
        strValueToReturn = ""
    Else
        strValueToReturn = drpValue.SelectedItem.Text
    End If

    Return strValueToReturn
End Function 
```

我们只想使用该值，并使用该变量中的值预先选择 DropDownList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:14:01.773

编辑：

你的意思是这样吗？

```
Protected Sub dropdown_DataBound(sender As Object, e As EventArgs)
    Dim list As DropDownList = TryCast(sender, DropDownList)
    Dim value as String = GetValueFromDropDownListClassItem()
    If list IsNot Nothing And value IsNot "" Then
        list.SelectedValue = value
    End If
End Sub 
```

旧消息：请尝试以下操作：

```
<asp:DropDownList 
    ID="DropDownListClass" 
    Runat="server"
    DataSourceID="SqlDataSourceClasses"
    DataTextField = "ClassName"
    DataValueField="ID"
    SelectedValue='<%# Bind("ClassID") %>'
    AppendDataBoundItems="True"
    ForeColor="Blue">
        <asp:ListItem Selected="True" Value="0">Please select</asp:ListItem>
</asp:DropDownList> 
```

请注意 AppendDataBoundItems true 和 listItem

# c - 具有最小参数的可变参数函数

> ID：14159671
> 
> 赞同：2
> 
> 时间：2013-01-04T15:08:22.347
> 
> 标签：c, parameters

> **可能的重复：**
> [C++ 预处理器 __VA_ARGS__ 参数数量](https://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments)
> [如何计算传递给接受可变数量参数的函数的参数数量？](https://stackoverflow.com/questions/4421681/how-to-count-the-number-of-arguments-passed-to-a-function-that-accepts-a-variabl)

为了学习变参函数，我写了一个demo：

```
#include <stdlib.h>
#include <stdarg.h>
#include <stdio.h>

int foo(int n, int m, ...);

int
main (int argc, char *argv[])
{
    int n = 10;
    int m = 15;
    int p = 20;
    //foo (n, m);
    foo(n, m, 20);

    return EXIT_SUCCESS;
}

int foo (int n, int m, ...)
{
    va_list ap;
    int p;
    char *str;

    va_start (ap, m);
    p = va_arg (ap, int);
    n = m + p;
    printf ("%d.\n", n);
    va_end (ap);
    return 0;
} 
```

如果它只有两个参数，我想知道如何处理该函数。（对于这个演示，如果只有`n`and `m`，运行后`foo`，我想得到结果：`n = n+m`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:55:10.350

对于每个变量参数（'variadic'）函数，必须有一种方法让函数知道它必须处理多少个参数。有多种处理方法。

*   和系列函数使用格式字符串`printf()`来`scanf()`确定传递给函数的参数数量。
*   POSIX`open()`函数查看第二个参数中的选项以了解是否有第三个参数。
*   POSIX`execl()`函数扫描直到遇到空指针参数。
*   您可以将参数数量的显式计数传递给处理（参见[Fei Jiang](https://stackoverflow.com/users/1488666/fei-jiang)的[示例](https://stackoverflow.com/a/14160477/15168)）。

所有这些方法都有效。该`open()`机制是最不普遍和最奇特的（主要源于历史怪癖）。

但是必须使用一种这样的机制。被调用的函数必须能够（以某种方式）告诉它何时完成处理其参数列表的变量部分。

除非您将可变长度参数列表传递给其他函数（例如，您使用`vsnprintf()`传递给函数的可变参数来格式化字符串），否则您的可变参数函数体将需要一个循环来处理可变数量的参数。您的函数缺少该循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:58:04.187

在运行时，无法从 va_list 中知道附加参数的实际数量。因此应该有另一种方法来推断这个数字，例如从以前的参数或从一些列表末尾约定（如，给出任意数量的指针，后跟 NULL）。考虑`printf`，其中格式字符串确定 va_list 部分中期望的参数数量（什么类型）。

只要考虑到这一点，最小参数数量（即空 va_list）就没有什么特别之处。当你知道没有什么可期待的时候，不要从 va_list 中弹出任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:00:27.323

我不明白你想让 'foo' 做什么，但通常 foo 应该**有一个循环**，并且应该告诉 foo在调用时给出**了多少参数**，或者更确切地说，当循环结束时。printf 在第一个 char* 模式参数中通过 %d %s %f ... 知道这一点

例如，如果我们要编写一个返回几个整数之和的函数，我们可以这样实现

```
#include <stdio.h>
#include <stdarg.h>

int int_sum(int count, ...) {
    int sum = 0, i;
    va_list ap;
    va_start(ap, count);
    for (i = 0; i < count; ++i) {
        sum += va_arg(ap, int);
    }
    va_end(ap);
    return sum;
}

int main() {
    printf("%d\n", int_sum(5, 1, 2, 3, 4, 5));
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:32:28.307

我不确定我是否理解了这个问题，但是如果您在 varlist 函数中只有一个参数，例如 foo (int n,...)，后跟`...`，那么您可以传递 foo (n 在我们的case) 中`va_start()`，它将始终有效。

```
int foo (int n,  ...);
int
main (int argc, char *argv[])
{
    int n = 10;
    int m = 15;
    int p = 20;

    foo (n, m);
    //foo (n, m, 20);

    return EXIT_SUCCESS;
}

int foo (int n,  ...)
{
    va_list ap;
    int p;
    char *str;

    va_start (ap, n);
    p = va_arg (ap, int);
    n = n + p;
    printf ("%d.\n", n);
    va_end (ap);
    return 0;
} 
```

# javascript - jQuery/javascript 添加类在 IE 8,9 上不起作用

> ID：14159672
> 
> 赞同：0
> 
> 时间：2013-01-04T15:08:27.847
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-9, addclass

我有一个这样的div：

```
<div onclick="highlightFunction(<?php echo $id?>);"> 
```

我有以下js代码：

```
 function highlightFunction(id) {   
    var id = "stuff" + stuff_id;
    $('#boss-stuff').find('div').removeClass('highlight-stuff');
    var stuff = $('#' + id).find('div')[0];
    var jStuff = $(stuff);
    jStuff.addClass("highlight-stuff");
 } 
```

这段代码被放置在一个 onlick 句柄函数中。

“highlight-stuff”类只是添加背景颜色。

我尝试了各种方法，从带有 document.getElementById().className 的 javascript 到 jQuery element.attr("class","stuff") 等。所有这些都适用于各种浏览器，但是 IE 8 和 9 不起作用。背景没有改变。

请帮助和感谢，我真的很感激。如果您需要代码中的更多内容，请告诉我。

有人解释说：id 是唯一的，因此不会有超过一个具有相同 id 的元素。$('#boss-stuff') 有一个 $('#id') 列表。$('#id') 是一个 li 元素，有 div child(ren)。我想为 div 类添加背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:15:09.230

尝试这个

```
var jStuff = $('#' + id).find('div')[0];
jStuff.addClass("highlight-stuff"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:26:44.633

它在其他浏览器中工作的事实`IE`听起来不像是在`DOM Ready`事件中不包含您的代码那样愚蠢。我记得前段时间遇到过类似的问题。

您可以尝试*（如果您的代码不在 DOM 就绪事件中）*：

**HTML**

```
<div onclick="highlightFunction(<?php echo $id?>);"> 
```

**Javascript**

```
<script type="text/javascript">
// This is really important.. make sure all jQuery is inside the DOM ready event
$(function(){ 
    function highlightFunction(id) {   
        var id = "stuff" + stuff_id;
        $('#boss-stuff').find('div').removeClass('highlight-stuff');
        var stuff = $('#' + id).find('div')[0];
        var jStuff = $(stuff);
        jStuff.addClass("highlight-stuff");
    }
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:33:51.933

也许您的 HTML 层次结构太复杂了？我试过这个并且 addClass 适用于所有浏览器。

HTML

```
<div id="boss-stuff">
    <div id="stuffst123456">
        <div id=""class="">Div without class</div>
        <div id="" class="highlight-stuff">Div With Class</div>
        </div>
    <div id="st123457">Other Div</div>  
</div>
<input id="testBtn" type="button" value="Click Me" /> 
```

JavaScript

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#testBtn").click(function () {
            var id = "stuff" + "st123456";
            $('#boss-stuff').find('div').removeClass('highlight-stuff');
            var stuff = $('#' + id).find('div')[0];
            var jStuff = $(stuff);
            jStuff.addClass("highlight-stuff");
        });
    });
</script> 
```

CSS

```
.highlight-stuff {
color: #ff0000; 
```

}

# c++ - unordered_map：find() 或 count() 哪个更快？

> ID：14159682
> 
> 赞同：36
> 
> 时间：2013-01-04T15:09:04.547
> 
> 标签：c++, performance, c++11, unordered-map

`unordered_map`确定容器是否具有具有指定键的项目的最快方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-04T15:15:59.657

它们将具有大致相同的性能。您应该使用最能表达您正在尝试做的事情的算法。

为了详细说明，通常`count()`会使用`find()`. 例如，在[libcxx](http://libcxx.llvm.org)中，`count()`实现为`return (find(__k) != end());`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-14T06:56:28.590

`find()`并且`count()`适用于 C++ 中的许多容器。

对于地图，集合等`find()`将始终具有恒定的执行时间，因为它只是计算散列，并将迭代器返回到找到的第一个元素（`end()`如果未找到）。

`count()`另一方面，具有恒定的执行时间 O(e)，其中 e 是找到提供的密钥的次数。最坏的情况是所有成员都相同的集合，因此`count()`复杂度可能为 O(n)

`map`或`unordered_map`不允许重复，因此它们的渐近运行时间将相同。

选择取决于代码中的语义。如果您只想检查密钥是否存在，您可以使用`count`. 如果您想检查一个键是否存在并使用它的值，那么就去吧，`find`因为您已经有一个指向该元素的迭代器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-12-05T17:22:36.277

C++20 通过提供`contains`方法结束了这种困境，它仍然具有相同的性能，但直接说出了你的意思。

# list - 没有跨步功能

> ID：14159688
> 
> 赞同：1
> 
> 时间：2013-01-04T15:09:16.497
> 
> 标签：list, haskell

我最近需要*跨越*一个列表，以便只看到一些元素。这是一个*过滤*功能，但它不是那么简单。但首先，这是一个跨步。

*跨越*一个列表——或任何可遍历的类型——与折叠它是一样的，但会丢弃一些经常遇到的元素（关于步幅值）。我们挑选一个元素，然后挑选的下一个值将是下一个*步幅*。例如，如果我们将一个跨步值设置为 0 的列表进行跨步，我们实际上得到的列表是不变的。如果我们在列表中跨步 1，我们会在两个元素上得到一个元素：

```
stride 0 [1..10] == [1..10]
stride 1 [1..10] == [1,3,5,7,9]
stride 2 [1..10] == [1,4,7,10] 
```

我看了看`Data.List`，我没有找到`stride`一个列表。这就是为什么我编写了一个函数来跨越我的 - 和你的！- 东西：

```
import Data.DList

-- for Data.List
stride :: (Num a, Eq a) => a -> [b] -> [b]
stride s = toList . snd . foldl (\(sa,xa) x -> if sa == s then (0,xa `snoc` x) else (sa+1,xa)) (s,fromList []) 
```

你可以像上面一样使用它。是否可以提议将其作为`Data.List`模块的一部分？我认为它可以帮助很大。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T15:30:43.207

一个更简单的实现也适用于无限列表并且更有效将是

```
stride :: Int -> [a] -> [a]
stride s = go
  where
    go (x:xs) = x : go (drop s xs)
    go _      = [] 
```

如果您想要它用于其他类型而不是just `Int`，请制作它

```
import Data.List

stride :: Integral i => i -> [a] -> [a]
stride s = go
  where
    go (x:xs) = x : go (genericDrop s xs)
    go _      = [] 
```

对非整数类型执行此操作毫无意义 IMO。

> 是否可以提议将其作为`Data.List`模块的一部分？

是的，这是可能的，请在 library@haskell.org 邮件列表上提出建议。

然而，我认为它不会被接受。用处太小，无法添加到`base`包中。它会更好地添加到另一个包中。也许包括它[`split`](http://hackage.haskell.org/package/split)是最好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:29:33.597

这个函数并不完全符合你的要求，但你可以`stride`在它的基础上创建你的函数：

```
chunksOf :: Int -> [a] -> [[a]]
chunksOf n = takeWhile (not . null) . map (take n) . iterate (drop n) 
```

现在你的 stride 函数可能看起来像这样：

```
stride :: Int -> [a] -> [a]
stride n = map head . chunksOf (n + 1) 
```

在这里使用`head`很好，因为`takeWhile (not . null)`确保子列表永远不会为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:24:18.313

或者使用[镜头](http://hackage.haskell.org/package/lens)包，您可以：

```
>stridingOf l n = (elementsOf l ((==0) . (flip mod (n + 1))))
>striding = stridingOf traverse
>stride n = toListOf striding

>stride 1 [1..10]
[1,3,5,7,9] 
```

[编写 stridingOf 而不是仅仅 striding 的一些额外工作允许在 text 和 byteStrings 上轻松使用，在没有lens](http://hackage.haskell.org/package/lens)包的情况下进行更困难的重写。

```
>import Data.Text
>import Data.Text.Lens

>testText = pack "This is a test"
>toListOf (stridingOf text 1) testText
"Ti sats" 
```

＃镜片

# ruby-on-rails - nginx 和 unicorn 上的多个 Rails 应用程序

> ID：14159689
> 
> 赞同：10
> 
> 时间：2013-01-04T15:09:19.527
> 
> 标签：ruby-on-rails, ubuntu, nginx, unicorn

我使用 Screencast 335 部署到 VPS 教程成功地设置了一个 rails 站点。现在我想在新域上添加另一个 Rails 应用程序，但我对所需的步骤感到困惑。

在上述设置中，sites-available 或 /etc/nginx/nginx.conf 没有任何更改。唯一的配置在我的应用程序配置目录中的 unicorn.rb、unicorn_init.sh 和 nginx.conf 中。nginx.conf 文件如下所示：-

```
upstream unicorn {
  server unix:/tmp/unicorn.my_app.sock fail_timeout=0;
}
server {
  listen 80 default deferred;
  # server_name my_app.com.au www.my_app.com.au;
  root /var/www/my_app/current/public;
  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }
  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }
  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

在我的 Capistrano 食谱中，我有这条线

```
sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}" 
```

添加第二个域仅仅是在侦听和取消注释 server_name 部分后删除默认延迟，然后为第二个应用程序使用不同的上游套接字名称和服务器名称重复此配置文件？这会起作用还是我需要将此文件传输到可用站点并创建指向已启用站点的符号链接？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-06T02:04:26.007

在 unicorn.rb 中：

应用1：

```
root = "/var/www/application_1/current"
working_directory root
pid "#{root}/tmp/pids/unicorn-app1.pid"
listen "/tmp/unicorn.app1.sock" 
```

应用 2：

```
root = "/var/www/application_2/current"
working_directory root
pid "#{root}/tmp/pids/unicorn-app2.pid"
listen "/tmp/unicorn.app2.sock" 
```

在 nginx.conf 中：

应用1：

```
upstream app1_server {
  server unix:/tmp/unicorn.app1.sock fail_timeout=0;
}

server {
  listen 80;
  server_name my_app_1.com www.my_app_1.com;
  root /var/www/app1/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @app1_server;
  location @app1_server {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  proxy_pass http://app1_server;
 }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

应用 2：

```
upstream app2_server {
  # point to app2 sock
  server unix:/tmp/unicorn.app2.sock fail_timeout=0;
}

server {
  listen 80;
  server_name my_app_2.com www.my_app_2.com;
  root /var/www/app2/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @app2_server;
  location @app2_server {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  proxy_pass http://app2_server;
 }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T15:45:01.143

使用 Nginx 和 Unicorn 在一台主机上托管不同的应用程序真的很容易。

您可以通过定义`socket`每个应用程序的文件的不同名称来获得分离。当然，您应该`current/public`在`server`.`nginx.conf`

最后一点是在`unicorn_init.sh`文件中：在它的顶部，您应该更改应用程序目录`APP_ROOT`的完整路径。`current/public`

如果您的设置类似于 RailsCast 的设置，则所有其他事情都由 capistrano 完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-10T16:57:59.740

我在这里提出的一个问题上回答了这个问题：

[使用 nginx + unicorn 的多个 Rails 4 应用程序](https://stackoverflow.com/questions/18134046/multiple-rails-4-app-using-nginx-unicorn/18161635#18161635)

但这里有一个答案：

我正在使用**Ruby 2.0**和**Rails 4.0**。我想你已经安装了 nginx 和 unicorn。那么，让我们开始吧！

在你*的 nginx.conf*文件中，我们将让 nginx 指向一个独角兽套接字：

```
upstream unicorn_socket_for_myapp {
  server unix:/home/coffeencoke/apps/myapp/current/tmp/sockets/unicorn.sock fail_timeout=0;
} 
```

然后，在您的服务器侦听端口 80 的情况下，添加一个 location 块，指向您的 rails 应用程序所在的子目录（此代码必须在服务器块内）：

```
location /myapp/ {
    try_files $uri @unicorn_proxy;
  }

  location @unicorn_proxy {
    proxy_pass http://unix:/home/coffeencoke/apps/myapp/current/tmp/sockets/unicorn.sock;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Forwarded-Proto $scheme;
  } 
```

现在您可以将 Unicorn 用作 Deamon：

```
sudo unicorn_rails -c config/unicorn.rb -D 
```

最后要做的事情，也是我挖掘最多的事情是为您的 rails 路线文件添加一个范围，如下所示：

```
MyApp::Application.routes.draw do
  scope '/myapp' do
    root :to => 'welcome#home'

    # other routes are always inside this block
    # ...
  end
end 
```

这样，您的应用程序将映射一个链接*/myapp/welcome*，而不仅仅是*/welcome*

## 但还有更好的方法

好吧，以上将在生产服务器上工作，但开发呢？您是否要正常开发，然后在部署时更改您的 rails 配置？对于每个应用程序？那是不需要的。

因此，您需要创建一个新模块，我们将把它放在`lib/route_scoper.rb`：

```
require 'rails/application'

module RouteScoper
  def self.root
    Rails.application.config.root_directory
  rescue NameError
    '/'
  end
end 
```

之后，在你`routes.rb`这样做：

```
require_relative '../lib/route_scoper'

MyApp::Application.routes.draw do
  scope RouteScoper.root do
    root :to => 'welcome#home'

    # other routes are always inside this block
    # ...
  end
end 
```

我们要做的就是看是否指定了根目录，如果是就使用它，否则就到“/”。现在我们只需要指向 config/enviroments/production.rb 上的根目录：

```
MyApp::Application.configure do
  # Contains configurations for the production environment
  # ...

  # Serve the application at /myapp
  config.root_directory = '/myapp'
end 
```

在 config/enviroments/development.rb 我没有指定 config.root_directory。这样它使用普通的 url 根。

# regex - 包含我们货币的正则表达式/grep 字符串

> ID：14159690
> 
> 赞同：3
> 
> 时间：2013-01-04T15:09:25.953
> 
> 标签：regex, r

我有一个字符串列表，其中一些包含美元数字。例如：

```
'$34232 foo    \n  bar' 
```

有没有一个`[r]`命令可以只返回包含美元金额的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:12:57.260

用于`\\$`保护`$`否则意味着“字符串结尾”：

```
 grep("\\$[0-9]+",c("123","$567","abc $57","$abc"),value=TRUE) 
```

这将选择包含一个美元符号后跟一个或多个数字（但不是 eg `$abc`）的字符串。 `grep`with`value=FALSE`返回索引。`grepl`返回一个逻辑向量。R 特有的一点是，您需要指定`\\$`，而不仅仅是`\$`（即需要额外的反斜杠来保护）：`\$`会给您一个“无法识别的转义”错误。

@Cerbrus 的答案 ,`'\\$[0-9,.]+'`将匹配得更广泛（例如，它将匹配`$456.89`or `$367,245,100`）。它还将匹配一些不可信的货币字符串，例如`$45.13.89`或`$467.43,2,1`（即，逗号应该只允许用于美元段中的 3 位数分组；应该只有一个小数点分隔美元和美分）。我们的两个答案都会（不正确？）匹配`$45abc`。如果幸运的话，您的数据不会包含任何这些棘手的可能性。*一般来说*，要做到这一点很难。评论中提到的答案（[什么是“最好的”美国货币正则表达式？](https://stackoverflow.com/questions/354044/what-is-the-best-u-s-currency-regex)）试图做到这一点，因此有更复杂的答案，但如果你通过保护来调整答案到 R 可能会很有用`$`适当地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:15:34.177

当然有：

```
'\\$[0-9,.]+'

\\$ //Dollar sign
[0-9,.]+ // One or more numbers, dots, or comma's. 
```

# java - 在 LMS 中集成 SCORM

> ID：14159693
> 
> 赞同：3
> 
> 时间：2013-01-04T15:09:40.303
> 
> 标签：java, scorm

我已经使用 Java 开发了一个学习管理系统。我必须在我的 LMS 中导入和访问 SCORM 课程。我在 scorm.com 中研究了 SCORM，但我不清楚将它集成到我的 LMS 中。所以任何人都可以给我将其集成到我的 LMS 或具有良好解释的链接的步骤。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T11:49:28.130

我的名字是 Brian Caudill，我是 JCA Solutions “The SCORM Authority”的创始人

SCORM 有 2 个版本，SCORM 1.2 和 SCORM 2004。有一些开源项目可以帮助集成 SCORM 1.2，还有一些付费应用程序。

基本上，您正在寻找的东西称为“SCORM 适配器”。

我整理了以下 8 个产品的列表，希望对您有所帮助。

## 付费申请

名称：Simple SCORM LMS 适配器
公司：JCA Solutions（我们销售此产品）
实施：SCORM 1.2 / SCORM 2004
应用程序堆栈：JavaScript
URL：jcasolutions.com/simple-scorm-lms-adapter

名称：SCORM 引擎
公司：Rusici Software
App Stack : .Net, JavaScript, web service
实现：SCORM 1.2 / 2004
URL：scorm.com/scorm-solved/scorm-engine/

名称：Icodeon SCORM Player
公司：Icodeon Software
App Stack：.Net 或 Java
实现：SCORM 1.2 / 2004
URL：icodeon.com/product.html

名称：Xyleme SCORM Player
公司：Xyleme
应用程序堆栈：未知
实施：将 SCORM 1.2 升级到 SCORM 2004
网址：xyleme.com/product/scorm-player

## 开源

名称：VSSCORM
实施：SCORM 1.2
应用堆栈：PHP / MYSQL
URL：vsscorm.net/run-time-environment-rte/run-time-environment-downloads/

名称：SCORMPool
实施：SCORM 2004 第 4 版
应用堆栈：JavaScript
URL： scormpool.com/search/download.aspx

名称：ADL SCORM Resource Libraries by jjmarks
实施：SCORM 1.2 和可能的 2004
应用程序堆栈：C#.NET
URL：sourceforge.net/projects/adllib

名称：Dotnetscorm
实施：SCORM 1.2
应用程序堆栈：. NET
URL：dotnetscorm.codeplex.com

# javascript - Javascript函数作为类参数？

> ID：14159705
> 
> 赞同：1
> 
> 时间：2013-01-04T15:10:14.353
> 
> 标签：javascript, class

我希望我的一个类的参数是一个特定于该类实例的函数。在这种情况下，我有一个精灵类，我希望为此类的不同实例调用不同的“onCollide”函数。这是我编码的内容。

```
function StaticSprite(tileset, x, y, onCollide) {
    this.tileset = tileset;
    this.x = x;
    this.y = y;
    this.onCollide = onCollide;
}

var introSign = new StaticSprite(mainTiles, 800, 600, showMessage('Hi.'));

if (isColliding(player, introSign)) {
    introSign.onCollide();
} 
```

这段代码显然不起作用，但至少应该显示我想要实现的目标。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:12:12.840

您只需要*传递*一个函数，而不是*执行*函数并传递结果：

```
new StaticSprite(..., function () { showMessage('Hi.'); }) 
```

# javascript - 没有json-data的ajax跨域请求

> ID：14159706
> 
> 赞同：0
> 
> 时间：2013-01-04T15:10:16.993
> 
> 标签：javascript, jquery, ajax, browser, jsonp

我想使用 ajax 进行跨域请求以获取非 JSON（！）数据（CSV 文件）。我正在使用以下代码：

```
$.ajax({
      “url”：数据集.url，
      “数据类型”：“文本”，
      “跨域”：真
    }).done(函数(数据){

      });

```

但由于跨域限制，它不起作用。当我将数据类型设置为“jsonp”时，它也不起作用，因为数据将被解释并且我得到语法错误。

有什么解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:20:50.237

您有以下选择：

1.  使用**服务器端代理**
2.  **JSONP**，将 csv 包装成 jsonp 响应
3.  使用**CORS**（检查跨浏览器支持）

# javascript - 为什么我的 Google 折线图不显示线条？

> ID：14159711
> 
> 赞同：1
> 
> 时间：2013-01-04T15:10:29.587
> 
> 标签：javascript, html, coldfusion, google-visualization, coldfusion-8

我正在循环通过数据源来获取数据。图表显示我想要的图例和正确的 x 和 y 轴，但线条不显示。关于为什么会这样的任何想法？源代码如下：

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <cfoutput>
            <script type="text/javascript">
                google.load("visualization", "1", {packages:["corechart"]});
                google.setOnLoadCallback(drawChart);
                function drawChart() {
                    var data = google.visualization.arrayToDataTable ([
                        ['Date Worked',<cfloop query="name"> '#name#',</cfloop>],
                        <cfloop from="2012-12-18" to="2012-12-18" index="i">
                            <cfquery name="test" datasource="TrackPorter">
                                select  name, COALESCE(date_worked,'2012-12-18')date_worked, COALESCE(hours_worked,0)hours_worked 
                                from users 
                                left join records on  users.id = records.users_id and date_worked = '2012-12-18'
                                where active_pilot = 1 
                                order by date_worked asc 
                            </cfquery>
                            ['#test.date_worked#', #Valuelist(test.hours_worked)#]
                        </cfloop>
                    ]);

                    var options = {
                        title: 'Test'
                    };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                chart.draw(data, options);
                }
            </script>
        </cfoutput>
    <div id="chart_div" style="width: 900px; height: 500px;"></div 
```

这是视图源：

```
Here is the view source:

<html>
    <div class="container" align="center">
        <h1>Pilot Timesheet</h1>
            <a href="excel_sheet_downloader.cfm"><button class="btn"       type="button" name="download_pilot_report">Download</button></a>
      <br />
      <br />
    <h1>Grapher</h1>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>

        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = google.visualization.arrayToDataTable ([
                    ['Date Worked', 'Keegan', 'Brady', 'Isaac', 'Christoph', 'Tyler',],

                        ['2012-12-18', 0.0,0.0,0.0,5.5,0.0]

                ]);

                var options = {
                    title: 'Test'
                };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
            }
        </script>

    <div id="chart_div" style="width: 900px; height: 500px;"></div>
</div> <!-- /container --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:00:11.337

您的输出需要采用以下格式

```
var data = google.visualization.arrayToDataTable ([
 ['Date Worked','2012-12-18'],
 ['Keegan',0],
 ['Brady',0],
 ['Isaac',0],
 ['Christoph',5.5],
 ['Tyler',0]
]); 
```

您必须重新处理输出以正确格式化 JavaScript

这没有经过测试或完成，但这应该可以帮助您走上正确的输出轨道

```
var data = google.visualization.arrayToDataTable ([
 ['Date Worked',
 <cfset count = 0>
 <cfloop from="2012-12-18" to="2012-12-18" index="i">'#i#'<cfif count NEQ numberofloopsneeded (you need to calculate this)>,</cfif><cfset count++></cfloop>],
 <cfloop from="2012-12-18" to="2012-12-18" index="i">
   <cfquery name="test" datasource="TrackPorter">
   select  name, COALESCE(date_worked,'2012-12-18')date_worked, COALESCE(hours_worked,0)hours_worked 
   from users 
   left join records on  users.id = records.users_id and date_worked = '2012-12-18'
   where active_pilot = 1 
   order by date_worked asc 
   </cfquery>
   <cfloop query="test">
    ['#test.name[test.currentrow]#', #test.hours_works[test.currentrow]#]<cfif not thefinaloutput>,</cfif>
   </cfloop>        
 </cfloop>
]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:07:45.610

问题是，在您的示例中，您只为每个人绘制一个数据点，因此看不到线。我获取了您的源输出并对其进行了修改以显示一行。你只需要让你的输出来模仿这个。

```
<html>
<head>
    <title>Test</title>
</head>
<body>
    <div class="container" align="center">
        <h1>Pilot Timesheet</h1>
            <a href="excel_sheet_downloader.cfm"><button class="btn"       type="button" name="download_pilot_report">Download</button></a>
      <br />
      <br />
    <h1>Grapher</h1>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>

        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = google.visualization.arrayToDataTable ([
                    ['Date Worked', 'Keegan', 'Brady', 'Isaac', 'Christoph', 'Tyler'],

                        ['2012-12-18', 0.0,0.0,0.0,5.5,0.0],
                        ['2012-12-18', 0.0,0.0,0.0,4.5,0.0],
                        ['2012-12-18', 0.0,0.0,0.0,3.5,0.0],
                        ['2012-12-18', 0.0,0.0,0.0,2.5,0.0]

                ]);

                var options = {
                    title: 'Test'
                };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
            }
        </script>

    <div id="chart_div" style="width: 900px; height: 500px;"></div>
</div> <!-- /container -->
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:36:05.020

看起来逗号放置可能存在问题 - 你会得到`['Date Worked','a','b',],[...][...][...]`而不是想要的`['Date Worked','a','b'],[...],[...],[...]`

要解决此问题，请尝试将您的`var data`部分更改为：

```
var data = google.visualization.arrayToDataTable ([
    ['Date Worked' <cfloop query="name">, '#name#'</cfloop>]
    <cfloop from="2012-12-18" to="2012-12-18" index="i">
        <!--- query removed for readability --->
        , ['#test.date_worked#', #Valuelist(test.hours_worked)#]
    </cfloop>
]); 
```

即将逗号作为两个循环的第一个输出，放在第一个元素之后。

您可能还需要查看使用 JsStringFormat 函数以确保正确编码数据库输出（特别是对于`name`变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:27:09.450

您在 javascript 中有 ColdFusion 标签。由于 ColdFusion 在服务器上运行而 javascript 在客户端上运行，这几乎总是一个糟糕的计划。

# vba - 如何将整行复制到另一个工作表

> ID：14159718
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:10:47.437
> 
> 标签：vba, excel

伙计们，我正在寻找一个简单的 Excel 宏，当列不同时，它可以将一行从一个工作表复制到另一个工作表，但是在新工作表中没有放置在它们所在的同一行中，否则它将被连续添加。 ..

表 1：

ABC
一西班牙 1000
二 日本 2000
三 EEUU 3000

表2：

ABC
一意大利 1000
二 日本 2000
三 EEUU 4000

表 3（最终）：

ABC
一意大利 1000
三 EEUU 4000

我会将工作表“Sheet1”与工作表“Sheet2”进行比较，如果您在任何列中发现任何差异，请将工作表“Sheet2”的整行复制到工作表“Sheet3”。

任何提示将非常有义务。对不起我的英语，但我来自阿根廷。

谢谢， 伊格纳西奥 G

编辑：实际上，我正在使用此代码：

```
Public Sub ReconReport()
Dim rngCell As Range

For Each rngCell In Worksheets("Sheet1").UsedRange
    If Not rngCell = Worksheets("Sheet2").Cells(rngCell.Row, rngCell.Column) Then _
        Let Worksheets("Sheet3").Cells(rngCell.Row, rngCell.Column) = rngCell
    Next
End Sub 
```

但它只是复制不同的单元格，而我需要的是复制整行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:13:55.120

慢回复：

```
Sub ReconReport()
    'Set Worksheets to Variables
    Dim sheetOne, sheetTwo, sheetThree As Worksheet
    Set sheetOne = Worksheets("Sheet1")
    Set sheetTwo = Worksheets("Sheet2")
    Set sheetThree = Worksheets("Sheet3")

    'Find Used Rows and Columns
    Dim usedRows, usedCols As Integer
    usedRows = sheetOne.UsedRange.Rows.Count
    usedCols = sheetOne.UsedRange.Columns.Count

    Dim row, col, copyRow, copyCol As Integer
    copyRow = 1 'Row on sheet three
    For row = 1 To usedRows
        For col = 1 To usedCols
            If Trim(sheetOne.Cells(row, col).Value) <> Trim(sheetTwo.Cells(row, col).Value) Then

                'Copy All Columns from that row (on Sheet2) to Sheet3
                For copyCol = 1 To usedCols
                    sheetThree.Cells(copyRow, copyCol).Value = sheetTwo.Cells(row, copyCol).Value
                Next copyCol

                'Increment the sheet3 row so next info starts on new line
                copyRow = copyRow + 1 

                'Exit column search loop so only one row added if two columns have differences in the same row 
                Exit For

            End If
        Next col
    Next row
End Sub 
```

# java - 在java中模拟慢速/有损通信

> ID：14159720
> 
> 赞同：1
> 
> 时间：2013-01-04T15:10:58.483
> 
> 标签：java, performance, communication, simulation, tcpmon

我需要测试我公司服务器内部的一个功能，它的好处只有在客户端运行缓慢（如延迟和数据包丢失）时才会显现出来。在这种情况下，我需要在慢速和/或有损连接 (TCP/HTTP) 上模拟客户端。我使用的是 Mac、Mountain Lion，理想情况下我需要在本地运行服务器和客户端。

我尝试采用的一种方法（未成功）是获取一些 Java API，这些 API 允许我构建连接速度较慢的客户端。我知道 JMeter 有一个叫做 SlowSockets（或类似的东西）的东西，但我一直在寻找更专注于性能缓慢的客户端的 API。任何有用的 API 的想法？

我尝试的另一种方法是使用代理作为客户端和服务器之间的中间人。在这种情况下，代理应该提供模拟慢速链接的功能。我已经尝试过 Charles 代理 (Mac) 和 Apache TCPMon，但是当我尝试让它们工作时，我似乎错过了一些东西。例如，使用 TCPMon，当我以“代理”模式（提供“模拟慢速链接”功能的模式）启动它时，我为本地代理定义端口，但看不到如何定义远程主机和港口。Charles Proxy 也发生了类似的事情。我可以在代理设置中设置本地端口，但我不明白如何定义代理的远程端（实际上连接失败，说远程服务器没有响应）。有人知道我做错了什么吗？

我尝试采用的另一种方法是使用较低级别（例如基于操作系统）的方法。在这种情况下，我尝试了 Apple 的 Network Link Conditioner。我打开它并定义了我的慢速参数，但是当我 ping 时，我似乎没有看到预期的 RTT 等。我感觉 NLC 与 XCode 和 iOS 测试有着密切的关系，任何有能力将它投入工作的人用于测试其他（例如Java）应用程序？我也在 Mac 上尝试过 ipfw，但是手册上说 ipfw 现在已弃用，我不想花时间去了解一个很快不会可用的工具。

任何想法/帮助将不胜感激。

提前致谢。

# ruby - 遍历数组并有条件地删除元素

> ID：14159725
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:11:13.270
> 
> 标签：ruby, exception-handling

我想遍历一个 URL 数组，如果给定 URL 的 HTTP 请求超时，则从中删除元素。它已通过以下方式实施：

```
@urls.delete_if do |url|
  begin
    doc = perform_request(some_params)
    break
  rescue TimeoutError
    Rails.logger.warn("URL #{url} times out, will be removed from list")
    true
  end
end 
```

有人想要更清洁的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:38:09.460

可能出错的事情比超时要多得多，问肯定比问否定要好。也就是说，网站是否以我想要的方式响应，而不是网站没有以我想要的方式响应。

此外，我会鼓励练习不变性，也就是说，不要更改您的数据，而是从旧版本创建新版本。我的版本看起来像：

```
@urls = %w[www.google.com www.example.com]
valid_urls = @urls.select{ |url| up?(url)} #=> [www.google.com]

def up?(url)
  Net::HTTP.new(url).head('/').kind_of? Net::HTTPOK
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:18:03.923

一切似乎都是合理的，除了`break`在循环中。我也喜欢溶液的清洁度。

# solr - Solr 用于多种文档类型的多个核心并加入它们。表现？

> ID：14159729
> 
> 赞同：1
> 
> 时间：2013-01-04T15:11:40.780
> 
> 标签：solr, solrj

我打算将 1 个模式拆分为多个模式。这将允许我运行具有不同文档类型的多个核心。然后，如果需要，我将使用 join 来获取相关文件。

目前，我使用类型字段有多种文档类型。

**这种变化将如何影响性能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:37:24.197

据我所知，当您在核心之间加入时，您将只能从一个核心（而不是另一个）获取信息。

在我看来，当 Solr 只能从一个位置提取数据时，它的效果最好。加入可能会产生开销，从而从本质上减慢整个操作。

但是，请考虑以下情况：- 用户在一个核心中有 2000 万条记录，Solr 必须搜索其中的每条记录。如果用户能够将它们分成两个核心，一个有 100 万条记录，另一个核心有 20 条记录，那么在这种情况下加入可能是有效的。

摘要：- 这取决于您现在拥有多少数据，当您拥有多个核心时您将拥有多少数据。如果您的情况与上述不同，那么我建议您寻找其他替代方案。

# vb.net - 什么是更快的性能明智：使用 + 运算符、& 运算符或通过 string.format 构建字符串？

> ID：14159730
> 
> 赞同：0
> 
> 时间：2013-01-04T15:11:42.513
> 
> 标签：vb.net, string, performance

什么是更快的性能明智：使用 + 运算符、& 运算符或通过 string.format 构建字符串？

varname、title、city、state、orgtype 是我声明的变量。

例如：

1.

```
varname = title + " in " + city + ", " + state + ". Contact " + title + ". " + orgtype + " " + city + "." 
```

2.

```
varname = title & " in " & city & ", " & state & ". Contact " & title & ". " & orgtype & " " & city & "." 
```

3.

```
varname = string.format("{0} in {1}, {2}. Contact {0}. {3} {1}.", title, city, state, orgtype) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:13:21.957

前两个选项编译为相同的 IL，是最快的方法。

第三个选项将需要在运行时解析字符串以找到`{}`对，使其变慢。

* * *

像这样的表达式`a + b + c`将编译为单个`String.Concat(...)`调用，而不会浪费任何字符串文字。

您应该避免普通字符串连接的唯一一次是在循环中，编译器无法将其展平为单个调用。相反，您应该使用 LINQ and或 usea
替换循环。`String.Join``StringBuilder`

# jsf - @ViewScope 不适用于primefaces

> ID：14159739
> 
> 赞同：1
> 
> 时间：2013-01-04T15:12:08.687
> 
> 标签：jsf, primefaces

我无法从 View 范围内的 bean 表中获取所选值。以下代码不起作用，但当我使用 Session 或 Request 范围时它起作用。

这是我的 JSF 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">
<f:view>
    <h:head>
        <title>Sample JSF/Prime Page</title>
    </h:head>
    <h:body>
        <h:form id="primeForm">
            <p:panel  id="toggle1"  header="Panel 1" collapsed="#{prime.toggle1}" footer=" footer Info if required " toggleable="true" closable="true"  >  
                <p:dataTable id="cars"  value="#{prime.listModel}" var="data" paginator="true"  style="width:500px"  
                             selection="#{prime.selected}" selectionMode="single">  
                     <p:ajax event="rowSelect" listener="#{prime.onRowSelect}" />

                    <f:facet name="header">  
                        Select a row to display a message   
                    </f:facet>  
                    <p:column headerText="Model">  
                        #{data.number}  
                    </p:column>  
                    <p:column headerText="Model">  
                        #{data.number}  
                    </p:column>  
                </p:dataTable>  
            </p:panel>
        </h:form>        
    </h:body>
</f:view>
</html> 
```

这是我的豆子：

```
@ManagedBean
@ViewScoped
public class Prime implements Serializable {

    ArrayList<UIData> list = new ArrayList<UIData>();
    private UIData selected;
    private UIDataModel listModel;
    private String testVaue;
    private ArrayList<String> tmp = new ArrayList<String>();
    private HashMap<String, List<String>> pagesMap = new HashMap<String, List<String>>();
    private boolean toggle1 = true;

    public Prime() {
        for (int k = 1; k < 3; k++) {
            UIData model =new UIData(""+k, ""+k);
            list.add(model);
        }

        listModel = new UIDataModel(list);
    }

    public void onRowSelect(SelectEvent event) { 
        try{
            System.out.println("Sellected Value :  "+((UIData)event.getObject()).getNumber());
        }catch (Exception e) {
            e.printStackTrace();
        }
    }

    // Getters and setters.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:14:56.703

为数据表添加适当的`rowKey`属性。Primefaces 必须有一种方法来唯一标识您的行。这就是为什么您应该设置一个对您的数据集唯一的属性。通常这是数据库主键。例如，在您的情况下，它可能是`rowKey=#{data.number}`.

# java - How to test if a Java iterator always uses the same order (reproducible ordering)?

> ID：14159740
> 
> 赞同：3
> 
> 时间：2013-01-04T15:12:10.633
> 
> 标签：java, collections, iterator, set

I have a code in which for-each-loops on a Set need to rely on the fact that the iterator returns the elements always in the same order, e.g.

`for(ParameterObject parameter : parameters) { /* ... */ }`

The iterators returned by `HashSet` are not guaranteed to have this property, however it is documented that the iterators of `LinkedHashSet` do have this property. So my code uses a `LinkedHashSet` and everything works fine.

However, I am wondering if I could endow the my code with a check that the set passed to it conforms to the requirement. It appears as if this is not possible (except of a direct test on `LinkedHashSet`). There is no interface implemented by `LinkedHashSet` which I could test on and there is no interface implemented by `LinkedHashSet.iterator()` which I could test on. It would be nice if there is an interface like `OrderConsistentCollection` or `OrderConsistentIterator`.

(I need this property [here](http://svn.finmath.net/finmath%20lib/trunk/src/main/java/net/finmath/marketdata/calibration/ParameterAggregation.java)).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:33:46.303

There isn't a way you can check for it -- but you can ensure it anyway, by simply copying the set into a collection that does have that property. A `LinkedHashSet` would do the trick, but if all you need is the iteration, an `ArrayList` would probably serve you better.

```
List<Foo> parameters = new ArrayList<>(parametersSet); 
```

Now `parameters` will always return an iterator with the same ordering.

That said, you'd probably be fine with Evgeniy Dorofeev's suggestion, which points out that even the sets that don't guarantee a particular ordering usually *do* have a stable ordering (even if they don't guarantee it). `HashSet` acts that way, for instance. You'd actually have to have a pretty funky set, or take active randomization measures, to not have a stable ordering.

`HashSet`'s ordering is not guaranteed, but it depends on the hash codes of its elements as well as the order in which they were inserted; they don't want to guarantee anything because they don't want to lock themselves into any one strategy, and even this loose of a contract would make for essentially random order if the objects' hash codes came from `Object.hashCode()`. Rather than specifying an ordering with complex implications, and then saying it's subject to change, they just said there's no guarantees. But those are the two factors for ordering, and if the set isn't being modified, then those two factors are going to be stable from one iteration to the next.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:22:26.220

'HashSet.iterator does not return in any particular order' means that the elements returned by iterator are not sorted or ordered like in List or LinkedHashSet. But the HashSet.iterator will always return the elements in one and the same order while the HashSet is the same.

HashSet iterator is actually predictable, see this

```
 HashSet set = new HashSet();
    set.add(9);
    set.add(2);
    set.add(5);
    set.add(1);
    System.out.println(set); 
```

I can foretell the output, it will be 1, 2, 5, 9\. Because the elements kind of sorted by hashCode.

# php - 使用php将值从一个页面传递到另一个页面

> ID：14159751
> 
> 赞同：1
> 
> 时间：2013-01-04T15:12:30.900
> 
> 标签：php, javascript, html, webpage

我有一个简单的网页，用户在其中写下他的姓名和年龄，就像这样

```
<script type="text/javascript">
function SaveData()
{
// I'm missing this part xD
}
</script>

<input type="text" id="name" value="Enter your name" />
<input type="text" id="age" value="Enter your age" />
<button type="submit" id="btn" onclick="SaveData();
parent.location='http://google.com'">
Click to open Google </button> 
```

我想将该数据写在另一个页面上，从 javascript 函数调用 php 脚本`SaveData()`。那么我应该在这里改变什么，php脚本应该是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:20:16.097

与其使用 javascript 来重定向用户，不如将姓名和年龄作为表单的一部分提交到另一个 PHP 页面，如下所示：

```
<form action="anotherPage.php">
    <input type="text" name="name" value="Enter your name" />
    <input type="text" name="age" value="Enter your age" />
    <button type="submit" id="btn">Click to open Google </button>
</form> 
```

然后在 anotherPage.php 中，您可以执行以下操作：

```
<?php
    $name = $_GET['name'];
    $age = $_GET['age'];

    //save name/age to a database or something

    // redirect user to google
    header('Location: www.google.com');   
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:22:07.060

您应该使用`$_SESSION`将数据从一页传递到另一页。或者你可以使用cookies。

在你的代码中

```
 session_start();

if(isset($_POST['your_input'])){
   $_POST['your_input'] = $_SESSION['your_input'] ;
    } 
```

然后`SESSION`在代码中使用该变量。先自己试试。

# python - 如何更改 matplotlib 中 y 轴上方的 sci 符号的大小？

> ID：14159753
> 
> 赞同：4
> 
> 时间：2013-01-04T15:12:35.867
> 
> 标签：python, matplotlib, font-size

如何更改 matplotlib 中 y 轴上方的 sci 符号的大小？

下面是四个子图的基本代码和图像，我不知道如何减小 y 轴上方的 sci 幂符号的大小。

我们欢迎所有的建议

![在此处输入图像描述](../Images/c040d54b5affb029f142d1e15d6686f5.png)

```
import matplotlib.pyplot as plt
import numpy as np

def plot():
    #plot data
    ax.plot(np.arange(0,10000,100),np.arange(0,10000,100))

    #set label style        
    ax.ticklabel_format(style='sci',axis='y')
    ax.yaxis.major.formatter.set_powerlimits((0,0))

    #format labels/ticks
    ax.tick_params(axis='x',tick1On=True, tick2On=False, label1On=True,
        label2On=False, labelsize=7,color='black')
    ax.tick_params(axis='y', tick1On=True,tick2On=False, label1On=True,
        label2On=False, labelsize=7,color='black')

fig = plt.figure()
ax = fig.add_subplot(2,2,1)
plot()

ax = fig.add_subplot(2,2,2)
plot()

ax = fig.add_subplot(2,2,3)
plot()

ax = fig.add_subplot(2,2,4)
plot()

plt.tight_layout()
fig.subplots_adjust(left=None, bottom=None, right=None, wspace=0.15, hspace=0.22)

plt.show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:45:56.303

添加这一行：

```
plt.rc('font', **{'size':'30'}) 
```

更改 y 轴上方的字体大小。30 使文本明显更大，但我假设您想与轴标签等匹配，因此您需要大约 6-8 的内容。这实际上会改变其他文本字体大小（虽然不是轴标签或刻度标签）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-03T21:05:31.090

使用`offsetText`Matplotlib`AxisArtist`容器的属性表示功率。要将字体大小更改为`power_fontsize`，您可以执行

```
ax.yaxis.get_offset_text().set_fontsize(power_fontsize) 
```

对于`ax`代码中的每个实例。

# c++ - 从 for 循环块 UI 启动线程

> ID：14159755
> 
> 赞同：0
> 
> 时间：2013-01-04T15:12:40.807
> 
> 标签：c++, multithreading, qt, user-interface, block

我正在压缩视频，将来我想一次压缩多个帧。我有一个线程，我调用它来处理每个帧 - 这就是为什么我的 UI 类中有 for 循环。问题是 UI 被阻止了。为什么？这是因为我从 for 循环中调用线程吗？

导致 UI 阻塞的代码 (Dialog.cpp)：

```
for(int i=0; i<nFrames; i++)
{
    //grab next frame from video source

    myThread.setFrame(newFrame);
    myThread.start();
    myThread.wait();
    result.append(myThread.GetResult());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T15:19:29.650

你在打电话`wait`，为什么你会期望它`wait`不会阻止 ui？

来自 Qt 文档：

> 阻塞线程，直到满足以下任一条件：
> 
> 与此 QThread 对象关联的线程已完成执行（即，当它从 run() 返回时）。如果线程已完成，此函数将返回 true。如果线程尚未启动，它也会返回 true。time 毫秒已经过去。如果时间为 ULONG_MAX（默认值），则等待永远不会超时（线程必须从 run() 返回）。如果等待超时，此函数将返回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:20:23.247

[来自文档：](http://doc.qt.digia.com/qt/qthread.html#wait)

> bool QThread::wait ( 无符号长时间 = ULONG_MAX )
> 
> 阻塞线程，直到满足以下任一条件：
> 
> **与此 QThread 对象**关联的线程已完成执行（即，当它从 run() 返回时）。
> 
> ...
> 
> **这提供了与 POSIX pthread_join** () 函数类似的功能。

你不应该`wait`在这里使用。

# php - PHP websockets - 地址已在使用中

> ID：14159756
> 
> 赞同：1
> 
> 时间：2013-01-04T15:12:41.117
> 
> 标签：php, websocket, phpwebsocket

我正在尝试在我的网站上设置 PHP websockets。这在我的本地 WAMP 服务器上效果很好，但在我的网站上我不断收到警告：

> 无法绑定地址 [98]：地址已在使用中”

我尝试了各种库，但它们都返回此错误。

我的猜测是我使用的端口不是免费的。问题是，我无法访问终端，因为这是一个共享服务器（根据 phpinfo()，websockets 已启用，顺便说一句），所以我无法寻找空闲端口。还尝试使用端口 0 - 但没有运气。

提前致谢！

编辑：例如，这是一些使用[https://github.com/Flynsarmy/PHPWebSocket-Chat的代码](https://github.com/Flynsarmy/PHPWebSocket-Chat)

```
// start the server
$Server = new PHPWebSocket();
$Server->bind('message', 'wsOnMessage');
$Server->bind('open', 'wsOnOpen');
$Server->bind('close', 'wsOnClose');
// for other computers to connect, you will probably need to change this to your LAN IP or external IP,
// alternatively use: gethostbyaddr(gethostbyname($_SERVER['SERVER_NAME']))
$Server->wsStartServer($_SERVER['SERVER_ADDR'], 9300); 
```

好吧，Bluehost 网站写道：“我们阻止对某些端口的访问，以帮助避免防火墙中存在安全漏洞……购买专用 IP 将使我们能够授予您访问运行特定服务所需的端口的权限。” . 技术支持人员告诉我不然。我猜案子已经结案了。谢谢大家的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:18:26.470

talhof9 我在尝试配置我的共享托管服务时遇到了类似的痛苦，我没有找到一个直接的解决方案来获得一个共享的 *AMP 服务器来支持 WebSockets，但我找到了一个至少可以让你测试商业可行性的解决方法您正在整合的解决方案（如果这确实是您正在寻找的），而无需支付设置、配置和管理您自己的 VPS 的所有麻烦。

查看[http://www.pusher.com](http://www.pusher.com)以获取使用其 Node 服务器的简单 websocket 部署库。免费的沙盒版本让您可以尝试让它工作，一旦您想测试商业可行性，您可以升级到付费计划。

希望这可以帮助！

（注意我**不**为 Pusher 工作）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T15:44:07.303

很可能您的托管服务提供商以某种方式禁用了 PHP 套接字。这是有道理的，因为 PHP 用于处理网页而不是创建守护进程，并且您可能正在使用常规的网络托管计划（而不是专用服务器）。

我会与您的托管服务提供商联系 - 支持论坛或打电话给他们。

# python - 如何包含在运行时生成并存储在变量中的模板？

> ID：14159757
> 
> 赞同：1
> 
> 时间：2013-01-04T15:12:43.147
> 
> 标签：python, django, django-templates, django-views

## 商业：

网页应用程序设计的实用背景，其中网页由原型对象、小工具构建，它们在自己的`view`函数中单独定义每个对象（它自己的代码，不一定是 django-view 函数）。并且为了构建一个“生产”网页，它们可以放置在与该页面相关的常规视图中，并根据给定的源数据和其他参数生成网页元素。例如，我有一个图表小工具，它接收源数据、参数、关于图表类型、美/颜色等，并绘制图表。如何将它与特定的应用程序分开存储，松散耦合的代码？哪种设计方法更好？

## 我试过的：

我试过“愚蠢”的方式：

例如我有一个简单的观点：

```
from django.shortcuts import render_to_response
from django.template import Template, Context
from string import letters
def home(request):
    t = Template("""<ul>
                        {% for key, value in d.items %}
                            <li>{{ key }}: {{ value }}</li>
                        {% endfor %}
                    </ul>""")
    d = {k: v for v, k in enumerate(letters)}
    return render_to_response('home.html', {'t': t, 'd':d}) 
```

和模板：

```
<html>
<head>
    <title>Django tests</title>

</head>
<body>
{% include t with d=d %}
</body>
</html> 
```

通过这样的设置，我得到：`TemplateDoesNotExist`

## 对答案的期望：

我正在寻找任何合理的方案来存储网页块，该方案旨在以自己的方式生活，与网页的其他元素或多或少地分开，在网络应用程序后端的类似单独的代码块中. 例如，我可以提供以下项目：

*   [谷歌](http://www.google.com/ig)
*   [网传](http://www.netvibes.com/en)

## 谢谢！

*ps*

**来自 django-docs 的摘录：**

*   [扩展](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#extends)：

> {% extends variable %} 使用变量的值。如果变量的计算结果为字符串，Django 将使用该字符串作为父模板的名称。*如果变量的计算结果为 Template 对象，Django 将使用该对象作为父模板。*

所以这意味着，使用 {% extends %} 标签，我所说的操作绝对是可能的。

*   [包括](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)：

> 此示例包括名称包含在变量 template_name 中的模板的内容：
> 
> `{% include template_name %}`

所以这可能意味着，传递给的变量`{% include %}`可以只是一个带有文件名的字符串。如果它是真的，那么我的问题的答案就很明确了——**在变量中定义的模板不能包含在常规模板中。**
它对我来说仍然有点模棱两可，因为在 Python 中这个词`name`可能被用作`variable`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:37:56.463

正如评论中已经提到的那样，您只需将模板呈现为字符串并将其传递给第二个模板，将其标记为安全字符串，因此不会自动转义。所以，你的例子是：

```
from django.shortcuts import render_to_response
from django.template import Template, Context
from django.utils.safestring import mark_safe
from string import letters
def home(request):
    t = Template("""<ul>
                        {% for key, value in d.items %}
                            <li>{{ key }}: {{ value }}</li>
                        {% endfor %}
                    </ul>""")
    c = Context({'d': {k: v for v, k in enumerate(letters)}})
    return render_to_response('home.html', {'t': mark_safe(t.render(c))}) 
```

然后，在 home.html 中，使用`{{ t }}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:44:08.047

您应该渲染您的子模板，然后将其放在`home.html`模板的上下文中（如`t`本例所示）。这是我以前用于递归模板的方法。

**主页.html**

```
<html>
<head>
    <title>Django tests</title>
</head>
<body>
    {{ t }}
</body>
</html> 
```

**视图.py**

```
from django.shortcuts import render_to_response
from django.template import Template, Context
from string import letters

def home(request):
    t = Template("""<ul>
                        {% for key, value in d.items %}
                            <li>{{ key }}: {{ value }}</li>
                        {% endfor %}
                    </ul>""")
    d = {k: v for v, k in enumerate(letters)}
    t_rendered = t.render(Context({'d': d}))
    return render_to_response('home.html',
                              {'t': t_rendered}) 
```

请注意，您可以通过在视图之外创建子模板来缓存子模板，这样就不会在每次请求时都创建它。您可以使用`loader`将子模板保存在模板文件中。但是，在您重新启动服务器之前，更改不会反映出来。

```
from django.shortcuts import render_to_response
from django.template import Template, Context, loader
from string import letters

t = loader.get_template('subtemplate.html')

def home(request):
    d = {k: v for v, k in enumerate(letters)}
    t_rendered = t.render(Context({'d': d}))
    return render_to_response('home.html',
                              {'t': t_rendered}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:18:40.327

你应该把你的包含模板放在它自己的文件中

包括.html：

```
<ul>
    {% for key, value in d.items %}
        <li>{{ key }}: {{ value }}</li>
    {% endfor %}
</ul> 
```

主页.html：

```
<html>
    <head>
        <title>Django tests</title>
    </head>
    <body>
        {% include 'include.html' with d=d %}
    </body>
</html> 
```

然后你的观点变成：

```
def home(request):
    d = {k: v for v, k in enumerate(letters)}
    return render_to_response('home.html', {'d':d}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:16:27.587

我相信[`render_to_response`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response)是一种快捷操作。我不认为它需要一个模板作为第二个参数，而是一个上下文

```
return render_to_response('home.html', {'d': d,})

<html>
<head>
    <title>Django tests</title>

</head>
<body>

<ul>
   {% for key, value in d.items %}
     <li>{{ key }}: {{ value }}
   {% endfor %}
</ul>

</body>
</html> 
```

您可以在模板目录中创建一个列表模板并将其包含在您的模板中 [https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include) 看起来包含只需要一个模板名称而不是动态模板

# java - 允许图像双线性变换的 Java 库

> ID：14159760
> 
> 赞同：2
> 
> 时间：2013-01-04T15:13:02.527
> 
> 标签：java, image, jai

情况是我有一个图像，我需要用双线性函数对其进行转换：

```
x' = a10 + a11 * x + a12 * y + a13 * x * y
y' = a20 + a21 * x + a22 * y + a23 * x * y 
```

作为“转换”，我理解获取新图像，每个 sourcePixel(x,y) 将是 targetImg 上的 targetPixel(x',y')。更重要的是，我计算了所有参数（a10、a11、a12、a13、a20、a21、a22 和 a23）。现在我需要一些 Java 语言的库来执行这种转换。转换示例如下图所示。

![在此处输入图像描述](../Images/70f89b70852766e2626aa9946a53ed57.png)

我做了一些研究，发现 JAI 提供了一些工具，但我发现的所有示例都表明双线性插值用于抗锯齿旋转图像。

问题是，JAI 是否允许这种转换，如果不允许，您知道其他可以提供帮助的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:26:22.473

您可以使用 java.awt.image.AffineTransformOp 或知道双线性变换是线性变换的扩展，请参阅 multigraph[项目](http://multigraph.sourceforge.net)中的 multigraph.LinearInterpolator 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:25:18.317

使用 Opencv 库非常简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:44:32.810

JavaCV 看起来像我正在寻找的东西，但文档非常缺乏。我写了这样的东西，但效果不佳（我得到全黑的targetImage）。

```
static float[] confX = new float[] { a10, a11, a12, a13 };
static float[] confY = new float[] { a20, a21, a22, a23 };

public static void main(String[] args) throws IOException {
  BufferedImage sourceImage = ImageIO.read(new File("C:/in.tif"));
  IplImage in = IplImage.createFrom(sourceImage);
  CvMat m = CvMat.create(3, 3);

  cvGetPerspectiveTransform(confX, confY, m);
  cvWarpPerspective(in, in, m);
  cvSaveImage("C:/out.tif", in);
} 
```

有人知道它有什么问题吗？

# php - 在 PHP 中解析 Facebook JSON 时遇到问题

> ID：14159762
> 
> 赞同：0
> 
> 时间：2013-01-04T15:13:09.577
> 
> 标签：php, json

我正在尝试从 Facebook 页面中提取墙上的帖子，但我遇到了问题。我在解析 Twitter 提要的 JSON 时没有问题，所以我看不出我遇到了什么问题。

这是我的代码，**[这是我用于帮助的教程](http://liljosh.com/facebook-page-json-rss-feed/)**：

```
<?php
    $url = "http://www.facebook.com/feeds/page.php?format=json&id=96551536516";             

    function disguise_curl($url) { 
        $curl = curl_init(); 
        $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,"; 
        $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; 
        $header[] = "Cache-Control: max-age=0"; 
        $header[] = "Connection: keep-alive"; 
        $header[] = "Keep-Alive: 300"; 
        $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
        $header[] = "Accept-Language: en-us,en;q=0.5"; 
        $header[] = "Pragma: ";

        curl_setopt($curl, CURLOPT_URL, $url); 
        curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla'); 
        curl_setopt($curl, CURLOPT_HTTPHEADER, $header); 
        curl_setopt($curl, CURLOPT_REFERER, ''); 
        curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate'); 
        curl_setopt($curl, CURLOPT_AUTOREFERER, true); 
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt($curl, CURLOPT_TIMEOUT, 10); 

        $html = curl_exec($curl); 
        curl_close($curl);

        return $html;
    }

    $response = json_decode(disguise_curl($url));

    foreach($response->entries as $block){
        echo
            "<li class='clearfix'>
                <div class='streamPosterName'>{$block->author}</div>
                <div class='postContent'>{$block->title}</div>
            </li>";
    }
?> 
```

在我的页面的其他部分解析 JSON 时，我使用以下方法来引用 JSON 对象：

```
<?php
    $url = "http://search.twitter.com/search.json?q=Apple&rpp=50";             
    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $curlout = curl_exec($ch);
    curl_close($ch);
    $response = json_decode($curlout, true);

    foreach($response["results"] as $block){
        echo
            "<li class='clearfix'>
                <img src='".$block["profile_image_url"]."' />
                <div class='streamPosterName'>".$block["from_user_name"]."</div>
                <div class='streamPosterUsername'>@".$block["from_user"]."</div>
                <div class='postContent'>".$block["text"]."</div>
            </li>";
    }
?> 
```

前面的代码正确地提取了推文。Facebook 解析提供以下错误：

> **可捕获的致命错误：第 260 行的 /home/public_html/mkt/index.php 中的类 stdClass 的对象无法转换为字符串**

第 260 行如上图所示：

```
<div class='streamPosterName'>{$block->author}</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:21:12.640

```
<div class='streamPosterName'>{$block->author}</div> 
```

默认情况下， json_decode() 将 JSON 对象表示为 PHP stdClass 对象。错误表示`$block->author`是一个对象，但您正在使用它，就好像它是一个字符串一样。

也许试试`$block->author->name`？

# wpf - 在 WPF 应用程序中使用 unity 应用 DI

> ID：14159766
> 
> 赞同：1
> 
> 时间：2013-01-04T15:13:28.347
> 
> 标签：wpf, unity-container

在阅读了 Unity 框架的文档后，我感到很困惑。 [关联](http://msdn.microsoft.com/en-us/library/ff648512.aspx)

我正在编写一个将搜索某些设备的 WPF 应用程序。
在我的主窗口中的代码下方。如您所见，现在我仍在我的主窗口中声明 UnitOfWork 和 DeviceService。我想通过应用依赖注入来替换这段代码。同时我也会在我的主窗口中注入我的视图模型。

```
 public Window1()
    {
        InitializeComponent();

        UnitOfWork myUnitOfWork = new UnitOfWork();
        DeviceService dService = new DeviceService(myUnitOfWork);

        _vm = new DeviceViewModel(dService);
        this.DataContext = _vm;

        _vm.SearchAll();            
    } 
```

我在下面的代码中进行了尝试，但我未能设置容器。真正的问题是我应该如何开始？我需要完全改变我的程序的结构吗？

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        IUnityContainer container = new UnityContainer();

        UnitOfWork myUnitOfWork = new UnitOfWork();
        container.RegisterInstance<UnitOfWork>(myUnitOfWork);

        Window1 w1 = new Window1();
        w1.Show();
    }
} 
```

* * *

我通过了建议的教程。我仍然不清楚我应该如何配置属性注入。

我的视图模型应该注入到 Window 1 类中，所以我假设我必须创建一个依赖属性。

```
 private DeviceViewModel viewModel;

    [Dependency]
    public DeviceViewModel ViewModel
    {
        get { return viewModel; }
        set { this.DataContext = value; }
    } 
```

我如何将我的视图模型注入窗口 1，知道 DeviceViewModel 依赖于 DeviceService 并再次依赖于 UnitOfWork ？

```
//CONSTRUCTOR
    public DeviceViewModel(DeviceService service)
    {  
        Service = service;
        SearchCommand = new SearchCommand(this);
    }

private UnitOfWork myUnit;

    public DeviceService(UnitOfWork unit)
    {
        myUnit = unit;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:19:27.593

您需要告诉容器如何构建其他对象所需的所有对象，然后容器将在需要时实例化所需的任何内容。

您的属性注入仅缺少一行：

```
private DeviceViewModel viewModel;

[Dependency]
public DeviceViewModel ViewModel
{
    get { return viewModel; }
    set { viewModel = value; this.DataContext = viewModel; }
} 
```

然后在你 OnStartup()

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    IUnityContainer container = new UnityContainer();

    container.RegisterType<UnitOfWork>();
    container.RegisterType<DeviceService>();
    container.RegisterType<DeviceViewModel>();

    Window1 w1 = container.Resolve<Window1>();
    w1.Show();       
} 
```

您可以在 RegisterType() 中使用不同的参数，因此您可以控制对象的生命周期和创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:58:57.623

你需要通过这个例子：http: [//visualstudiogallery.msdn.microsoft.com/3ab5f02f-0c54-453c-b437-8e8d57eb9942](http://visualstudiogallery.msdn.microsoft.com/3ab5f02f-0c54-453c-b437-8e8d57eb9942)

你在正确的轨道上，只是你应该解决窗口，而不是新窗口。

```
//instead of Window1 w1 = new Window1();
Window1 w1 = container.Resolve<Window1>();
w1.DataContext = container.Resolve<DeviceViewModel>(); 
```

`Window1`将不再需要自己设置`DataContext`

# javascript - 在焦点上增加 primefaces inputTextArea 行

> ID：14159768
> 
> 赞同：0
> 
> 时间：2013-01-04T15:13:36.407
> 
> 标签：javascript, jquery, primefaces

我想要一个 primefaces inputTextarea，当聚焦时会将其 rows="1" 属性更改为 rows="10"。

我试试这个，但它不起作用：

```
 <p:inputTextarea rows="1" onblur="if(this.value == '') this.rows =
 '1';" onfocus="this.rows ='50'"/> 
```

使用 ah:inputTextArea 可以，但由于自动调整大小，我更喜欢 primefaces inputTextArea。

我可以错过什么吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:24:37.387

如果我们假设您的属性和逻辑适用于框架，那么您确定这`this.value`是空字符串吗？`if(!this.value)`如果没有成功，请尝试继续搜索。如果成功，您将不得不做出更准确的布尔语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T18:32:29.383

对我来说，以下工作 - 此解决方案不是基于行，而是基于更改高度，也适用于 ajax 更新（当 html 内容在页面中更新或延迟加载时）

```
$(document).on("focus", "textarea.expand", function() {
     $(this).animate({ height: "12em" }, 500); 
});

$(document).on("blur", "textarea.expand", function() {
     $(this).animate({ height: "4em" }, 500); 
}); 
```

JSF 部分：

`<h:inputTextarea id="testDescriptionTextBox" styleClass="expand" value="#{tributeToBlagusC.testDescription}" rows="4" cols="120" autoResize="false"/>`

# c# - 如何从浏览器调用 WCF 服务 OperationContract？

> ID：14159771
> 
> 赞同：5
> 
> 时间：2013-01-04T15:13:43.973
> 
> 标签：c#, visual-studio-2010, wcf, dll, iis-7

我创建了一个`WCF 4`Web 服务并将其托管在我的 上，我在项目的发布 Web 部分`IIS 7`给出了以下内容：`Service URL:``WCF`

`http://localhost:8084/service1.svc`.

然后我绑定我发布`web site`的端口：`4567`和类型：`http`在`IIS`。

```
To checked it i clicked on `web site` at `IIS` and click on the browse. 
It open a following page at my browser: 
```

![在此处输入图像描述](../Images/d71519ca908ae2fa7ba921b160cb311c.png)

这意味着 Web 服务已成功托管在`IIS`. 现在我想调用我的实例方法并在浏览器中返回输出。让我粘贴你的示例代码`Iservice.cs`和`service.svc.cs`

```
#Iservice.cs:
namespace some.decryption
{
[ServiceContract]
public interface Iservice
{
  [OperationContract, WebInvoke(Method = "GET", UriTemplate = "/getdata", ResponseFormat = WebMessageFormat.Json)]
    string getdata();
}} 
```

而我的`service.svc.cs`：

```
public bool getdata()
    {
        return somenamespace.getfetcheddll();
    } 
```

和`serviceDll.cs`：

```
 namespace somenamespace{
  internal static class UnsafeNativeMethods
   {
   _dllLocation = "some.dll";
   [DllImport(_dllLocation, CallingConvention = CallingConvention.Cdecl)]
   public static extern bool OnDecryption();
   }

  public static string getfetcheddll()
   {
       return UnsafeNativeMethods.OnDecryption();
   }} 
```

我应该如何`getdata()`从浏览器调用方法？

我已经把它`some.dll`放在同一个项目文件夹中。我应该在哪里做？

## 编辑：

我忘了粘贴我的`web.config`：

```
<?xml version="1.0"?>
<configuration>
<system.web>
 <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
  <behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

为此，我关注了这个博客：[创建演练](http://debugmode.net/2010/09/07/walkthrough-on-creating-wcf-4-0-service-and-hosting-in-iis-7-5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:21:31.437

默认情况下 -`HTTP`被转换为`wsHttpBinding`SOAP**服务**，因此您**不能**只从浏览器中调用它。帮助页面上的`?wsdl`后缀似乎也指向了这个方向。

要测试 SOAP 服务，您需要一个支持 SOAP 的工具，例如 Microsoft [WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)或[SoapUI](http://www.soapui.org)。

尝试使用 WCF 测试客户端 - 您可以使用该工具通过帮助页面上显示的 URL 连接到您的服务吗？你看到你的服务了吗？

# javascript - jquery数据表中的日期选择器不起作用

> ID：14159774
> 
> 赞同：2
> 
> 时间：2013-01-04T15:14:00.010
> 
> 标签：javascript, jquery, datatable, datepicker

数据表上的日期选择器遇到一些问题。我在页面顶部设置了两个测试日期选择器，它们工作正常。

然而，我的问题是当我`'{type:"date-range"}`在我的 aoColumns 中选择时，我收到一个错误，告诉我这`from.datepicker()`不是一个函数。

我已经尝试了所有其他类型的过滤器（选择、数字范围等），并且除日期范围外，所有过滤器都正常工作。

谁能帮我解释为什么我的 JavaScript 似乎使用 type:"date-range" 崩溃了。我似乎无法弄清楚为什么它不会像这里显示的示例那样工作[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/dateRange.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/dateRange.html)

下面是代码

```
<body>
    <div id="content">
        </div><div id='assignments_view'>
        <h1>Assignments</h1><br/>
From:<input type="text" name="start_date" value="" id="dateStart" placeholder="start Date"  /><br/>
To:<input type="text" name="end_date" value="" id="dateEnd" placeholder="End Date"  /><br/>

<button id = "addNewAssignmentButton">Add New Assignment</button>
    <div id="assignmentTableDiv">

    <table id="assignmentTable" class="fht-table" >
        <thead>
            <tr>
                <th>Name</th>                   
                <th>Basic Information</th>
                <th>Submitter</th>
                <th>Status</th>
                <th>Area</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Shopping Cart</th>
                <th>Purchase Order</th>
            </tr>
        </thead>
        <tbody>
<tr class = "assignmentRow" ondblclick="document.location = 'assignments/load_individual_assignment_view/21 '">
        <td>Test assignment</td>
        <td>basic Info for test assignment</td>
<td class = 'status'>review</td> 
        <td>2013-01-08</td>
        <td>2013-01-01</td>
                    </tr>

        </tbody>
        <tfoot><tr class = "footer">
            </tr></tfoot>
    </table>
</div>
</div>

<script
src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost/ahb/js/libs/jquery-1.7.1.min.js"><\/script>')</script>

<script src="http://localhost/ahb/js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script>
$(document).ready( function () {

var oTable = $('#assignmentTable')
            .dataTable( 
            {
                "bJQueryUI": true,

                }
            )
            .columnFilter({ sPlaceHolder: "head:before",
                            aoColumns: [    null,null,{type:"select"},null,null,
                            null,
                            {type:"date-range"},
                            null,
                               null,                                                
                                        ]}
            );
});

</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script>window.jQuery || document.write('<script src="http://localhost/ahb/js/libs/jquery-1.7.1.min.js"><\/script>')</script>

<script src="http://localhost/ahb/js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script>
$('#dateStart').datepicker({ dateFormat: "yy-mm-dd" });
$('#dateEnd').datepicker({ dateFormat: "yy-mm-dd" });
</script>

<div id="footer">
<footer>
    Page rendered in <strong>0.0951</strong> seconds
</footer>
</div>
<!-- JavaScript at the bottom for fast page loading -->
<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if     offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost/ahb/js/libs/jquery-1.7.1.min.js"><\/script>')</script>
<!-- scripts concatenated and minified via build script -->
<script src="http://localhost/ahb/js/plugins.js"></script>
<script src="http://localhost/ahb/js/script.js"></script>
<script src="http://localhost/ahb/js/jquery-placeholder.js"></script>
<script src="http://localhost/ahb/js/libs/jquery.dataTables.min.js"></script>
<script src="http://localhost/ahb/js/libs/jquery.dataTables.columnFilter.js">      </script>
<script src="http://localhost/ahb/js/libs/tabletools.js"></script>

<!-- end scripts -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:55:32.660

解决了。1.8.2 的两个脚本发生冲突，导致 jQuery datepicker 无法工作。我只需要删除一个脚本，只在页面底部留下一个 1.8.2.min 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-10T15:57:17.927

我发现 input.datepicker 是一个 jQueryUI 的东西。解决方案是在页面中包含 jQueryUI，它神奇地起作用了。

顺便说一句，在没有 jQueryUI 的情况下，其他类型的列过滤器也可以正常工作，只有当我尝试使用日期范围过滤器时，我才注意到任何错误。相当微妙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T15:25:16.683

对我来说，问题是： [https](https://github.com/vitalets/bootstrap-datepicker) ://github.com/vitalets/bootstrap-datepicker 正在将事件正确地触发到数据表，调用了 ajax 更新表，但 [https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker) 不是

# android - 是否可以将平台签名的应用程序安装到用户空间？

> ID：14159776
> 
> 赞同：5
> 
> 时间：2013-01-04T15:14:05.550
> 
> 标签：android, apk, android-build

我最近在自定义 Android 版本中遇到了一个奇怪的问题？我已经有几个月的工作 ROM，并且使用这个 ROM 我已经能够将平台签名的 apk 安装到用户空间（/data/app）。最近，在重建 ROM 后，我一直无法安装相同的 apk。任何安装平台签名应用程序的尝试（无论是通过 adb install 还是 pm install）都会产生以下消息：

```
Failure [INSTALL_FAILED_INVALID_INSTALL_LOCATION] 
```

翻遍Android源码后，发现如下相关代码块：

```
if ((compareSignatures(pkg.mSignatures, s1) == PackageManager.SIGNATURE_MATCH)) {
   Slog.w(TAG, "Cannot install platform packages to user storage");
   mLastScanError = PackageManager.INSTALL_FAILED_INVALID_INSTALL_LOCATION;
   return null;
} 
```

根据我的阅读，似乎绝不应该允许在用户空间中安装系统应用程序。在用户空间中安装系统应用程序的最初情况是否异常？是否可以在用户空间中安装平台签名的应用程序，如果可以，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:04:52.480

出现上述情况是因为我们有一台共享的 Android 构建机（公司内部共享）。一位同事在没有通知我的情况下切换了 Git 分支，因此我们在构建空间中留下了旧代码。将其切换回正确的分支解决了这个问题。为了更明确地回答上述问题，似乎除非您注释掉以下代码块，否则不可能在用户空间中安装平台签名的应用程序。

（类文件为*/frameworks/base/services/src/com/android/server/pm/PackageManagerService.java*）；

```
 if (!pkg.applicationInfo.sourceDir.startsWith(Environment.getRootDirectory().getPath()) &&
            !pkg.applicationInfo.sourceDir.startsWith("/vendor")) {
        Object obj = mSettings.getUserIdLPr(1000);
        Signature[] s1 = null;
        if (obj instanceof SharedUserSetting) {
            s1 = ((SharedUserSetting)obj).signatures.mSignatures;
        }
        if ((compareSignatures(pkg.mSignatures, s1) == PackageManager.SIGNATURE_MATCH)) {
            Slog.w(TAG, "Cannot install platform packages to user storage");
            mLastScanError = PackageManager.INSTALL_FAILED_INVALID_INSTALL_LOCATION;
            return null;
        }
    } 
```

# jquery-selectbox - 单击其他内容时关闭下拉菜单

> ID：14159777
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:14:18.120
> 
> 标签：jquery-selectbox

如何关闭“selectOptions”？现在我只能在单击“span.selected”或“span.selectArrow”时关闭它。单击另一个列表或仅在列表之外时，我也想将其关闭。

```
function enableSelectBoxes(){
$('div.selectBox').each(function(){
    $(this).children('span.selected').html($(this).children('div.selectOptions').children('span.selectOption:first').html());
    $(this).attr('value',$(this).children('div.selectOptions').children('span.selectOption:first').attr('value'));

    $(this).children('span.selected,span.selectArrow').click(function(){
        if($(this).parent().children('div.selectOptions').css('display') == 'none'){
            $(this).parent().children('div.selectOptions').css('display','block');
        }
        else
        {
            $(this).parent().children('div.selectOptions').css('display','none');
        }
    });
    $(this).find('span.selectOption').click(function(){
        $(this).parent().css('display','none');
        $(this).closest('div.selectBox').attr('value',$(this).attr('value'));
        $(this).parent().siblings('span.selected').html($(this).html());
    });
}); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:33:43.533

你可以这样做：

```
$(document).click(function(event) {
    //If the user clicks somewhere on the page, but not on the autocomplete.
    if(event.target != $("#autocomplete")[0]) {
        $("#autocomplete").hide();
    }
}); 
```

# graph - 找到可能忽略 1（最长）边的最短路径

> ID：14159787
> 
> 赞同：1
> 
> 时间：2013-01-04T15:15:02.640
> 
> 标签：graph, path, dijkstra

我想知道是否可以通过这种方式修改 Dijkstra'a 算法：假设两个顶点之间有 2 条路径，长度如下：

```
5, 8, 6, 9  // sum=28
2, 4, 8, 25 //sum=39 
```

第一条路径较短，但在忽略两者中最长的边之后，我得到以下总和：19 和 14，所以我选择了第二条路径。

也许有不同的方法来解决它，而不使用 Dijkstra？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:58:47.953

我不确定这个想法是否有效，但首先在我看来它可以。

对于每个访问过的节点，除了距离之外`D(n)`，存储路径上最长边的长度，例如`L(v)`。`min D(n) + L(n) - max(L(n), weight(v,n))`对于所有已访问的邻居，未访问的相邻节点的距离为`n`。`L(v)`的下一个访问节点是`max(L(n), weight(v,n))`，如果`n`是到 的路径上的最后一个节点`v`。如果有更多相同长度的`v`（更多`n's`）路径，则选择最大的路径`L(v)`。

# css - 如何使 JQuery UI 对话框“关闭”按钮看起来像一个“X”图标？

> ID：14159790
> 
> 赞同：2
> 
> 时间：2013-01-04T15:15:28.780
> 
> 标签：css, jquery-ui, jquery-ui-dialog

“关闭”按钮显示为文本“关闭”，没有任何样式使其看起来像用户希望在关闭对话框时看到的那样。

图形“X”图标不是默认关闭按钮吗？

我如何设计它看起来正确？

这是我的对话框初始化（如果我省略了“closeText”选项，那么它默认为对话框左上角的“关闭”）：

```
$("#signInDialog").dialog({ dialogClass: "login",
                            zIndex: 20,
                            modal: true,
                            closeText: 'X'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:18:56.833

jQuery UI 框架中有一个默认的关闭图标：

```
.ui-icon-close{background-position:-80px -128px} 
```

或者

```
.ui-icon-circle-close{background-position:-32px -192px} 
```

只需查看生成的 CSS 并确保您正确下载了框架（包含所有图像）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:25:31.000

尝试使用这个值而不是 'X'.... 值是`&#215;`

像这样使用它......无论你需要什么......

```
<a id="some_id">&#215;</a> 
```

可能工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T09:05:20.533

HTML 提供了一个关闭图标，关闭的 Unicode 字符是`&times;`. 你可以像这样使用它......

```
<a href='javascript:void(0)'>&times;</a> 
```

# mysql - MySQL SELECT 唯一列，其中其他列最大

> ID：14159792
> 
> 赞同：3
> 
> 时间：2013-01-04T15:15:44.537
> 
> 标签：mysql, select, unique, max

我有这样的桌子

```
 id     |     serial_num     |      version     | .....
  1      |         1          |          1       | .....
  2      |         2          |          1       | .....
  3      |         2          |          2       | .....
  4      |         3          |          1       | .....
  5      |         4          |          1       | .....
  6      |         5          |          1       | .....
  7      |         5          |          2       | .....
  8      |         5          |          3       | ..... 
```

现在我要选择的是获取具有最大版本和唯一 serialn_num 的行...

结果将是：

```
 id     |     serial_num     |      version     | .....
  1      |         1          |          1       | .....
  3      |         2          |          2       | .....
  4      |         3          |          1       | .....
  5      |         4          |          1       | .....
  8      |         5          |          3       | ..... 
```

我的 SQL 有点复杂，这就是为什么我不使用 MAX() 解决问题的原因......我几乎没有左连接等......

有任何想法吗？

最好的问候，并感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T15:18:18.353

尝试这个：

```
SELECT yourtable.*
FROM yourtable
WHERE (serial_num, version) in (select serial_num, max(version)
                                from yourtable
                                group by serial_num) 
```

子查询将返回 serial_num 的最大版本，因此这将返回 serial_num 具有最大值的所有行。看到[这个小提琴](http://sqlfiddle.com/#!2/26943/1/0)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:19:40.587

您可以使用子查询来查找最大值，然后加入您的表：

```
select t1.id,
  t1.serial_num,
  t1.version
from yourtable t1
inner join
(
  select serial_num, 
    max(version) version
  from yourtable
  group by serial_num
) t2
  on t1.serial_num = t2.serial_num
  and t1.version = t2.version 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/df214/7)

结果：

```
| ID | SERIAL_NUM | VERSION |
-----------------------------
|  1 |          1 |       1 |
|  3 |          2 |       2 |
|  4 |          3 |       1 |
|  5 |          4 |       1 |
|  8 |          5 |       3 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:23:33.183

`id`通过查询选择组是没有用的。您应该只选择您在 group by 中使用的列以及正在应用聚合函数的其他列。

希望[这](https://stackoverflow.com/questions/14159792/mysql-select-unique-column-where-other-column-is-max/14159914#comment19615098_14159834)对你有用。

```
SELECT id, 
       serial_num, 
       Max(`version`) `version`
FROM   tbl1 
GROUP  BY serial_num 
```

# ios - 在 iOS 上绘制没有条带（抖动）的渐变

> ID：14159794
> 
> 赞同：6
> 
> 时间：2013-01-04T15:15:48.453
> 
> 标签：ios, core-graphics, gradient

有没有办法在 iOS 上动态绘制抖动渐变？我目前正在使用`CGContextDrawLinearGradient`，但它会产生明显的条带效果。

# python - 以 pdf 格式保存图形时 draw_networkx() 的问题

> ID：14159795
> 
> 赞同：3
> 
> 时间：2013-01-04T15:15:47.600
> 
> 标签：python, pdf, matplotlib, plot, networkx

当我通过在网络 draw_networkx() 函数中指定宽度参数来更改用于边缘的线宽时，例如：

```
nx.draw_networkx(G, width = 0.03) 
```

使用产生的图像

```
plt.show() 
```

正如预期的那样（因为我可以控制边缘宽度）。但是，当我使用：

```
plt.savefig('foo.pdf') 
```

生成的 pdf 似乎具有不受影响的边缘宽度。保存为 png 似乎工作正常，但我真的需要一个 pdf 输出。我稍微修改了 networkx 网站上的示例代码作为示例：

```
import networkx as nx
import matplotlib.pyplot as plt

G=nx.random_geometric_graph(200,0.125)

pos=nx.get_node_attributes(G,'pos')

dmin=1
ncenter=0
for n in pos:
    x,y=pos[n]
    d=(x-0.5)**2+(y-0.5)**2
    if d<dmin:
        ncenter=n
        dmin=d

p=nx.single_source_shortest_path_length(G,ncenter)

plt.figure(figsize=(8,8))
nx.draw_networkx_edges(G,pos,nodelist=[ncenter],alpha=1, width = 0.03)
nx.draw_networkx_nodes(G,pos,nodelist=p.keys(),
                   node_size=80,
                   node_color=p.values(),
                   cmap=plt.cm.Reds_r)

plt.xlim(-0.05,1.05)
plt.ylim(-0.05,1.05)

plt.savefig('random_geometric_graph.pdf')
plt.show() 
```

这导致图像位于（右侧的pdf）[http://i49.tinypic.com/2501h6c.jpg](http://i49.tinypic.com/2501h6c.jpg)

我已经尝试在 Mac 的预览版和 adobe 中打开 pdf，但问题仍然存在。

非常感谢任何帮助/建议！

# c# - 使用一个或多个标准 FIFO 队列实现延迟队列

> ID：14159803
> 
> 赞同：2
> 
> 时间：2013-01-04T15:16:17.523
> 
> 标签：c#, algorithm, azure, queue, azure-storage-queues

延迟队列是一个队列，其中每条消息都有与其相关联的延迟时间，并且只有在延迟到期时才能获取消息。队列的头部是过去延迟过期最远的消息。如果没有延迟过期，则没有头，出队将返回 null。

实际上，我正在使用 Azure 编写一个云应用程序，在 Azure 中只有 FIFO 队列可用，而不是优先级/延迟队列。所以我来到这里寻找是否有人可以给我一些指示，从那里我可以朝着正确的方向开始。我用谷歌搜索了很多，但只发现了 Java 中的延迟队列实现，没有标准的教程/研究论文讨论一般的延迟队列。

**编辑：**

**我有什么代码？**
实际上，我必须首先设计这些东西并将其提交给我的经理，一旦我们完成设计，然后只有我可以开始编码。

**有关该场景的更多详细信息**
它是一个基于主/从模型的分布式应用程序。主服务器产生消息并将它们放入 Azure 服务总线队列，并且有多个从服务器（在多台机器上运行）从队列中读取并处理它们。如果万一主站宕机，则其中一个从站充当主站并开始生成消息。我不想在主服务器中存储任何状态信息，因为万一主服务器出现故障，所有状态信息也会随之而来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T15:29:55.920

Windows Azure 队列消息具有延迟（以秒为单位），您可以在将消息插入队列时指定该延迟。在达到超时延迟之前，一条消息将不可见。请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/dd179346.aspx)以查看 API 详细信息。

隐形超时也在各种语言 SDK 实现中实现。由于您使用的是 C#，因此`AddMessage()`调用如下所示。`AddMessage()`注意指定隐身超时的第三个参数：

```
 var acct = CloudStorageAccount.DevelopmentStorageAccount;
        var queueClient = acct.CreateCloudQueueClient();
        var queue = queueClient.GetQueueReference("myqueue");
        queue.CreateIfNotExist();

        var msg = new CloudQueueMessage("test message");
        queue.AddMessage(msg, TimeSpan.FromHours(2), TimeSpan.FromMinutes(30)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:30:49.197

所以首先我们需要一个优先队列的实现。这是我不久前写的一篇。这可能并不理想；它有一个很小的 ​​API，它可能性能更好，但它是一个足够的起点：

```
public class PriorityQueue<TPriority, TElement>
{
    SortedDictionary<TPriority, Queue<TElement>> dictionary = new SortedDictionary<TPriority, Queue<TElement>>();
    public PriorityQueue()
    {
    }

    public Tuple<TPriority, TElement> Peek()
    {
        var firstPair = dictionary.First();
        return Tuple.Create(firstPair.Key, firstPair.Value.First());
    }

    public TElement Pop()
    {
        var firstPair = dictionary.First();
        TElement output = firstPair.Value.Dequeue();

        if (!firstPair.Value.Any())
            dictionary.Remove(firstPair.Key);

        return output;
    }

    public void Push(TPriority priority, TElement element)
    {
        Queue<TElement> queue;
        if (dictionary.TryGetValue(priority, out queue))
        {
            queue.Enqueue(element);
        }
        else
        {
            var newQueue = new Queue<TElement>();
            newQueue.Enqueue(element);
            dictionary.Add(priority, newQueue);
        }
    }
} 
```

包装时延迟队列很简单：

```
public class DelayQueue<T>
{
    private PriorityQueue<DateTime, T> queue = new PriorityQueue<DateTime, T>();
    public void Enqueue(T item, int delay)
    {
        queue.Push(DateTime.Now.AddMilliseconds(delay), item);
    }

    public T Dequeue()
    {
        if (queue.Peek().Item1 > DateTime.Now)
            return queue.Pop();
        else
            return default(T);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:30:23.923

您如何构建一个包含两步过程的队列以使项目出队。这是高级流程：

*   出列FIFO队列中的第一项；将其不可见性设置为 N 分钟（无论您决定不可见性应该是什么） - 这允许您使该项目在一段时间内不可见，就好像它不存在于队列中一样。这是我指的[NextVisibleTime属性。](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueuemessage.nextvisibletime.aspx)

*   检查[DequeueCount](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueuemessage.dequeuecount.aspx)属性 - 如果出队计数为 0，则这是该项目第一次出队。忽略该项目并继续前进。由于设置了它的隐身性，它不会被再次获取，直到它的时间。如果出队计数为 1 或更大，则它已出队一次，并且必须在所需的时间内设置为不可见。

这应该允许您实现延迟队列。我也可以想到其他方法。例如队列中的每个项目作为一个创建时间；这可用于动态计算项目需要保持不可见的时间。要更改属性的不可见性，请检查此方法：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueue.updatemessage.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueue.updatemessage.aspx)

# drop-down-menu - 如何在 Yii 中自定义 CMenu 小部件

> ID：14159805
> 
> 赞同：0
> 
> 时间：2013-01-04T15:16:28.070
> 
> 标签：drop-down-menu, yii, cmenu

如何在 Yii 框架项目中将 CMenu 设置为下拉菜单，以便像[http://www.yiiframework.com/](http://www.yiiframework.com/)网站中的内容一样显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:54:12.323

这里有一个很好的演示：[Creating a CSS Driven Drop Down Menu using CMenu](http://www.yiiframework.com/wiki/211/creating-a-css3-drop-down-menu-using-cmenu/)关于使用 CMenu 创建一个不错的下拉菜单。

# java - C/C++ 以外的语言的反向调试

> ID：14159806
> 
> 赞同：4
> 
> 时间：2013-01-04T15:16:29.793
> 
> 标签：java, ruby, debugging

最近，我开始在 C++ 中[使用 gdb 进行反向调试，](http://sourceware.org/gdb/wiki/ReverseDebug)它对于某些类型的问题（例如，循环和递归算法）非常有效。除了 gdb，还有其他用于 C/C++ 的商业调试器（例如[UndoDB](http://undo-software.com/product/undodb-overview)）。

我想知道其他语言是否有好的可逆调试器？我对 Java 和 Ruby 特别感兴趣，但这个问题对任何语言都是开放的。

我发现的另一种方法是在虚拟机上运行您的应用程序并连接到它。我知道（但从未测试过）的唯一实现是[VMware 的 Replay Debugging](http://www.replaydebugging.com/2008/08/vmware-workstation-65-reverse-and.)。我想知道它适合哪些类型的调试任务。对于最常见的问题似乎有点过头了，但它可能对调试通信或同步问题很有用，这些问题通常很难重现。

背景资料：

*   gdb 使用术语“反向调试”。但是，有很多同义词：
    *   “可逆调试”
    *   微软称其为 IntelliTrace 或“历史调试”
    *   在 Java 中，此类调试器有时被称为“Ominiscient Debugger”
*   （关于programmers.stackexchange）[为什么很少使用反向调试？](https://softwareengineering.stackexchange.com/questions/181527/why-is-reverse-debugging-rarely-used)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:42:56.800

在[为什么很少使用反向调试？](https://softwareengineering.stackexchange.com/questions/181527/why-is-reverse-debugging-rarely-used)（在programmers.stackexchange 上），Jakob Engblom 就逆向调试的当前状态发表了一篇精彩的总结：

*   [http://jakob.engbloms.se/archives/1547](http://jakob.engbloms.se/archives/1547) - 技术
*   [http://jakob.engbloms.se/archives/1554](http://jakob.engbloms.se/archives/1554) - 研究
*   [http://jakob.engbloms.se/archives/1564](http://jakob.engbloms.se/archives/1564) - 产品
*   [http://jakob.engbloms.se/archives/1768](http://jakob.engbloms.se/archives/1768) - 对上一篇文章的更新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:55:16.180

[Jiva](http://www.cse.buffalo.edu/jive/)声称它可以：

> JIVE 支持 Java 程序的正向和反向步进。...提供后退的能力可以节省程序员重新执行程序直到出错点的时间和精力。JIVE 还提供了直接跳回执行历史中任何先前点的能力，以便观察该点的对象图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T04:46:36.730

很抱歉这个相当迟的回复。是的，JIVE 的反向步进对于调试非常有效。您可以单步执行或跳回执行历史记录中的任何点。

您还可以对执行历史提出查询，例如，“显示对 x 的所有更改”、“x 什么时候第一次变为负数”、“这行代码是否曾经执行过；如果有，在哪里执行？”等等。所有这些都可以通过一个简单的基于表单的查询来完成。

[http://www.cse.buffalo.edu/jive](http://www.cse.buffalo.edu/jive)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-11T06:47:25.443

您可以查看`Omniscient Debugging`作者 Bil​​ Lewis[论文](http://arxiv.org/abs/cs/0310016)将其称为 ODB 的内容。ODB 是一种**离线日志**和**回放**方式的实现，使**Java**中的逆向调试成为现实。

# jsp - 将 Jersey 2.0 与 JSP 一起使用

> ID：14159809
> 
> 赞同：1
> 
> 时间：2013-01-04T15:16:34.093
> 
> 标签：jsp, rest, jersey, jax-rs

我们在 Jersey 1.x 中使用 加载 JSP 页面`com.sun.jersey.api.view.Viewable`，例如：

```
@GET
public Viewable get() {
return new Viewable("/myPage.jsp", "");
} 
```

Jersey 2.0 中上述的等效代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-15T20:15:44.207

@Ankur 谢谢

```
import org.glassfish.jersey.server.mvc.Viewable;

@Path("/")
public class MyController {

    @GET
    @Produces("text/html")
    public Response index() {
        return Response.ok(new Viewable("/index.jsp")).build();
    }

} 
```

pom.xml

```
<dependency>
  <groupId>org.glassfish.jersey.ext</groupId>
   <artifactId>jersey-mvc-jsp</artifactId>
   <version>2.21</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:40:19.227

正如@Werner Vesterås 所提到的，这在 Jersey 2.0 中尚不可用。

[`MessageBodyWriter`](http://jersey.java.net/nonav/apidocs/snapshot/jersey/javax/ws/rs/ext/MessageBodyWriter.html)但是，如果您绝对需要这个，那么如果您编写一个转发到 JSP的方法，则可能会得到解决方法。我认为这`Viewable`就是 Jersey 1.x 中的处理方式（使用 a[`ViewableMessageBodyWriter`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-server/1.14/com/sun/jersey/server/impl/template/ViewableMessageBodyWriter.java?av=f)解析 a [`JSPTemplateProcessor`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-bundle/1.14/com/sun/jersey/server/impl/container/servlet/JSPTemplateProcessor.java#JSPTemplateProcessor)）或类似于 CXF[`RequestDispatcherProvider`](http://cxf.apache.org/docs/jax-rs-redirection.html)对 JSP 重定向所做的处理。

请注意，尽管[JAX-RS 2.0 规范仍然是一个草案](http://jcp.org/en/jsr/detail?id=339)，而[Jersey 2.0 仍然是一个里程碑](http://jersey.java.net/jersey20.html)，因此可能会发生实施变化。如果您打算在生产环境中使用它，您可能应该重新考虑并坚持使用 Jersey 1.x。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-27T15:15:01.013

在 Jersey 2.0 中，使用下面来加载 jsp 页面。
**<dependency>
          <groupId>org.glassfish.jersey.ext</groupId>
           <artifactId>jersey-mvc-jsp</artifactId>
           <version>${jersey2.version}</version>
</dependency>**

在您的代码中，如果将模型发送到 jsp，请像这样使用：
**return new Viewable("/index.jsp", model);**

如果没有模型被发送到jsp，像这样使用：
**return new Viewable("/index.jsp", null);**
                    或
**return new Viewable("/index.jsp");**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:00:49.773

根据[http://java.net/projects/jersey/lists/dev/archive/2012-12/message/2](http://java.net/projects/jersey/lists/dev/archive/2012-12/message/2)，该功能尚未移植到 Jersey 2.0。

# c# - 在进程之间发送消息

> ID：14159816
> 
> 赞同：0
> 
> 时间：2013-01-04T15:16:53.530
> 
> 标签：c#, windows-phone-7, ipc, mediastreamsource, background-audio

我正在创建一个带有背景音频播放器的应用程序。根据 MS 的要求，播放器被实现为一个单独的 DLL，并存在于另一个进程中。

我可以通过更新`BackgroundAudioPlayer.Instance.Track`对象将曲目名称传回我的 UI 进程。

但是，我希望我的 UI 也报告我的下载缓冲区的状态。

我可以在 WP7 上使用什么 IPC 方法来通知我的 GUI 进程？

**更新：**我考虑使用 4 个命名手动重置事件来传递 4 位数据 - 失败，WP7 仅支持仅适用于同一进程内的线程同步的未命名事件。

我考虑过 System.Windows.Messaging - 失败，SendCompletedCallback 引发“LocalMessage_CouldNotDeliverMessage”，并且文档说 WP7 不支持本地消息传递。

到目前为止，我只知道一种方法 - 将文件写入隔离存储，并使用命名互斥锁保护它们。我真的不想因为这样做而耗尽 NAND 闪存。有没有更好的方法？WP7 下面有 WinCE 内核，它有很多可用的方法——邮槽、LPC、RPC、COM、管道、共享内存等等——我不敢相信它们都没有暴露给 Silverlight……

# php - PHP：如何将字符串格式的日期+时间转换为适合数据排序的格式？

> ID：14159817
> 
> 赞同：1
> 
> 时间：2013-01-04T15:16:56.193
> 
> 标签：php, string, date, time

我正在从 RSS 加载文章，日期值的格式如下：

```
January 4, 2013
Fri, 04 Jan 2013 13:18:05 +0000
Fri, 04 Jan 2013 07:33:51 EST
Jan 4, 2013
Fri, 04 Jan 2013 02:27:46 GMT 
```

有没有统一的方法，如何将这些值保存到 datatype或的数据库列中`DATETIME`，最适合对这些文章进行排序？`TIMESTAMP``TIME`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:24:12.467

使用`strtotime`功能。 [http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

```
date("Y-m-d H:i:s", strtotime($dateString)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:36:44.130

你可以这样试试——

```
echo date("Y-m-d H:i:s",strtotime("January 4, 2013"));  //  2013-01-04 00:00:00
echo date("Y-m-d H:i:s",strtotime("Fri, 04 Jan 2013 13:18:05 +0000"));  //2013-01-04 13:18:05
echo date("Y-m-d H:i:s",strtotime("Fri, 04 Jan 2013 07:33:51 EST"));    //2013-01-04 12:33:51
echo date("Y-m-d H:i:s",strtotime("Jan 4, 2013"));  //2013-01-04 00:00:00
echo date("Y-m-d H:i:s",strtotime("Fri, 04 Jan 2013 02:27:46 GMT"));    //2013-01-04 02:27:46 
```

更新的日期时间格式。

# .htaccess - Apache mod_rewrite 不工作

> ID：14159821
> 
> 赞同：0
> 
> 时间：2013-01-04T15:17:21.127
> 
> 标签：.htaccess, mod-rewrite, seo, apache2, url-encoding

我的 Apache 2.2 的 mod_rewrite 模块有问题 我的代码既不能在 localhost（Win8 Pro 上的 Wamp，IPv6）上也不能在 webhotel（site5.com）上工作。我的目标是生成对 SEO 友好的 URL：

> www.xy.com/featured-artists.html

代替：

> www.xy.com/index.php?pageID=艺术家

PHP 变量 $pageID 在我的 index.php 的第 1 行定义：

```
<?php isset($_GET['pageID']) ? $pageID = $_GET['pageID'] : $pageID = 'Forside';?> 
```

我的 .htaccess 文件中的重写代码如下所示：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteRule ^([^/.]+)/?$ /index.php?page=$1
</IfModule> 
```

不幸的是，这对网站没有任何影响。.htaccess 文件虽然工作正常，因为其他部分如

```
ErrorDocument 404 /index.php?pageID=404 
```

按预期工作。不管我做什么——它都行不通。所以我真的希望你们中的一些人能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:30:57.773

Mod_rewrite 似乎没有打开。您的规则包含在一个`IfModule`容器中：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteRule ^([^/.]+)/?$ /index.php?page=$1
</IfModule> 
```

所以规则不会被执行。如果您希望您的任何规则起作用，您需要在服务器配置（或您的网络主机）中打开 mod rewrite。否则，你尝试什么都没关系。

一旦你加载了 mod_rewrite，你的规则应该接近你想要的。它将在`/something`内部将其重写为`/index.php?page=somethin`.

# java - 使用 Spring Security 处理静态资源

> ID：14159824
> 
> 赞同：2
> 
> 时间：2013-01-04T15:17:44.743
> 
> 标签：java, spring, spring-security, static-resource

您好，我需要使用 Spring Security 处理的静态资源，并且我希望仍然保持静态，这意味着它没有使用`DispatcherServlet`. 我为非安全资源保留了一个文件夹，为安全资源保留了一个文件夹。`/res/secured`在我从资源处理程序中排除之前，我无法完成这项工作。但是，如果我这样做了，则处理了`DispatcherServlet`我认为不正确的安全资源（也许我错了？-> 发布解释或链接）。

我的配置：

```
/*--- Directories structure ---*/
res
|-- nonsecured
|-- secured
/*--- /Directories structure ---*/

/*--- WebApplicationInitializer ---*/
Dynamic portalSecurityFilter = servletContext.addFilter("portalSecurityFilter", new PortalSecurityFilter());
portalSecurityFilter.addMappingForUrlPatterns(EnumSet.allOf(DispatcherType.class), false, "/*");

// Spring Security filtr
Dynamic securityFilter = servletContext.addFilter("springSecurityFilterChain", DelegatingFilterProxy.class);
securityFilter.addMappingForUrlPatterns(EnumSet.allOf(DispatcherType.class), false, "/*");

CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();
characterEncodingFilter.setEncoding("UTF-8");

Dynamic dynamicCharacterEncodingFilter = servletContext.addFilter("characterEncodingFilter", characterEncodingFilter);
dynamicCharacterEncodingFilter.addMappingForUrlPatterns(EnumSet.allOf(DispatcherType.class), false, "/*");

Dynamic ajaxFilter = servletContext.addFilter("ajaxFilter", new AjaxFilter());
ajaxFilter.addMappingForUrlPatterns(EnumSet.allOf(DispatcherType.class), false, "/*");

// Root context
AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
rootContext.register(WebConfig.class);

// Dispatcher servlet
ServletRegistration.Dynamic dispatcherServlet = servletContext.addServlet("dispatcherServlet", new DispatcherServlet(rootContext));
dispatcherServlet.setLoadOnStartup(1);
dispatcherServlet.addMapping("/");

servletContext.addListener(new ContextLoaderListener(rootContext));
/*--- /WebApplicationInitializer ---*/

/*--- Web configuration part ---*/
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    super.addResourceHandlers(registry);
    registry.addResourceHandler("/res/**").addResourceLocations("/WEB-INF/res/");
}
/*--- /Web configuration part ---*/

/*--- Spring Security confogiration part ---*/
<http pattern="/res/unsecured/**" security="none" />

<http pattern="/**" use-expressions="true" authentication-manager-ref="myAuthenticationManager">

    <intercept-url pattern="/res/secured/**" access="hasRole('ROLE_USER_AUTHENTICATED')" />
    <intercept-url pattern="/**" access="permitAll" />
</http>
/*--- /Spring Security confogiration part ---*/ 
```

感谢您的回答。

**编辑**

> 在我玩耍时，在我看来，`<http pattern="/res/unsecured/**" security="none" />`安全配置中的部分毫无意义，因为资源处理程序提供的资源不会通过 Spring Security 过滤器链。我错过了什么还是我的配置错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:26:02.487

我必须管理这是我的耻辱。Spring Security 按预期工作，以上配置运行良好。我的问题是浏览器缓存了静态资源（即 PDF 文件），我只是没有注意到。如果您遇到同样的问题，请尝试进行硬刷新，然后再花时间搜索问题 :)

# c# - C# 检查标签是否完全可见

> ID：14159825
> 
> 赞同：0
> 
> 时间：2013-01-04T15:17:44.753
> 
> 标签：c#, winforms, label

有没有办法检查与多行标签关联的文本是否完全可见？在案例标签太小而无法让所有文本可见的情况下，我有必要更改字体大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:47:51.243

搞砸这个：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
  label1.Text = textBox1.Text;
  label1.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
  //First make the font big enough
  double fontSize = label1.Width / label1.Text.Count();
  int height = label1.Height;
  fontSize = fontSize > 0 ? (double)fontSize : 1;
  if (fontSize < (height / 2))
  {
    fontSize = (height / 2);
  }
  label1.Font = new System.Drawing.Font(label1.Font.FontFamily, (float)fontSize, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));

  //then adjust the text to the label size
  while (label1.Width < System.Windows.Forms.TextRenderer.MeasureText(label1.Text,
      new Font(label1.Font.FontFamily, label1.Font.Size, label1.Font.Style)).Width ||
      label1.Height < System.Windows.Forms.TextRenderer.MeasureText(label1.Text,
      new Font(label1.Font.FontFamily, label1.Font.Size, label1.Font.Style)).Height)
  {
    label1.Font = new Font(label1.Font.FontFamily, label1.Font.Size > 1 ? label1.Font.Size - 0.5f : label1.Font.Size, label1.Font.Style);
    if (label1.ClientRectangle.Width < 3 || label1.ClientRectangle.Height < 3)
      break;
  }
} 
```

它将使用 textBox1 的文本填充标签，并根据内容调整标签的字体大小。

# jquery - 如何禁用/冻结jqgrid？

> ID：14159826
> 
> 赞同：0
> 
> 时间：2013-01-04T15:17:48.987
> 
> 标签：jquery, jqgrid

我正在研究 jqgrid。

我有一个要求，在 jqgrid 的其中一列中有一个按钮，单击该按钮会进行一些更新。

现在我想要的是，当单击该按钮并且直到更新操作（ajax 调用）正在进行时，我想禁用/冻结整个 jqgrid。

我想禁用 jqgrid，即用户不应该能够选择 jqgrid 上的任何内容，包括其他按钮、寻呼框、寻呼按钮、排序按钮等...

我在这里准备了一个[jsfiddle](http://jsfiddle.net/yrshaikh/9WhdS/) ：http : [//jsfiddle.net/yrshaikh/9WhdS/](http://jsfiddle.net/yrshaikh/9WhdS/)如果您在回答这个问题时发现它有用，请使用它。

```
jQuery("#list47").jqGrid({
    data: mydata,
    datatype: "local",
    height: 150,
    rowNum: 999999,
    scroll: true,
    colNames: ['Inv No','Notes'],
    colModel: [
        {
        name: 'id',
        index: 'id',
        width: 60,
        sorttype: "int"},
    {
        name: 'note',
        formatter: function(){
            return "<input type='button' value='update something' class='btn'/>";
        }}
    ],
    pager: "#plist47",
    viewrecords: true,
    multiselect: true,
    caption: "how to freeze out jqgrid ?",
    beforeSelectRow: function(rowid, e)
    {
        jQuery("#list47").jqGrid('resetSelection');
        return(true);
    }

}); 
```

是否有任何内置功能可以这样做？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:28:05.830

我不认为 jqGrid 中有本机功能来做你想要实现的。我会去使用 BlockUi 插件：http: [//jquery.malsup.com/block](http://jquery.malsup.com/block)

[在这里演示](http://jsfiddle.net/L3DUC/)

```
$(".btn").click(function(){
    $("#list47").closest('.ui-jqgrid').block({ 
                message: '<h1>Processing</h1>', 
                css: { border: '3px solid #a00' } 
            });
}); 
```

然后在您的 ajax 请求完成后调用这段代码：

```
 $("#list47").closest('.ui-jqgrid').unblock(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T11:08:37.697

尝试使用`$("#lui_" + myGridId).show()`.

网格在内部创建了这个覆盖层，并将其用作加载器消息的一部分。您可以只显示或隐藏它，它将为您禁用/启用网格。

它看起来不太好，但可以定制。

# android - API < 15 的 setOnUtteranceProgressListener

> ID：14159828
> 
> 赞同：0
> 
> 时间：2013-01-04T15:18:00.417
> 
> 标签：android, callback, listener, text-to-speech

我正在为 Android API 11（或更高版本）制作应用程序。我正在尝试从 TTS 引擎获取回调，但出现了问题。我尝试使用`setOnUtteranceProgressListener()`方法设置侦听器，但 Eclipse 说这需要 API 15 或更高版本（并引发编译错误），所以接下来我尝试使用`setOnUtteranceCompletedListener()`但它说“此方法在 API 级别 15 中已弃用”。我应该使用什么使其与 API 11 及更高版本兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:40:00.707

您可以使用已弃用的方法，也可以根据设备运行的 Android 版本执行其中一种方法。您可以查看 Build.VERSION.SDK_INT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T17:32:25.110

您可以使用以下代码：

```
TextToSpeech tts = new TextToSpeech(this, this);

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
        // API > 15
        tts.setOnUtteranceProgressListener(new UtteranceProgressListener() {
            @Override
            public void onStart(String utteranceId) {
                // do something
            }

            @Override
            public void onDone(String utteranceId) {
                 // do something
            }

            @Override
            public void onError(String utteranceId) {
                 // do something
            }
        });
    } else {
        // API < 15
        tts.setOnUtteranceCompletedListener(new TextToSpeech.OnUtteranceCompletedListener() {
            @Override
            public void onUtteranceCompleted(String utteranceId) {
                  // do something
            }
        });
    } 
```

# html - GWT Chrome 问题与 HTML 小部件内的锚点有关

> ID：14159831
> 
> 赞同：0
> 
> 时间：2013-01-04T15:18:07.870
> 
> 标签：html, google-chrome, gwt

在为 HTML 小部件中的内部链接添加锚标记时，我只遇到了 Chrome 问题。这听起来可能并不重要，但对我自己和许多用户来说却很烦人。

加载页面时，如果第一次单击中键或按住 Ctrl 键单击链接，它们只会像应有的那样在新选项卡/窗口中打开，但第二次它们的行为就像左键单击并使用相同选项卡/窗口。由于某种原因，当我使用 Hyperlink 或 Anchor 小部件时，不会发生此问题。这在 Firefox 或 IE8 中也不是问题。

我已经验证了超链接的最终 HTML 和我的手动脚本标记完全相同。为此，我将相同的样式应用于 HTML 小部件。我什至尝试创建一个超链接并调用 toString() 来生成 HTML，但错误仍然存​​在。

有谁知道为什么会发生这种情况或对如何补救有任何想法？这是我无法使用小部件的情况，因此我需要手动创建标签 HTML。我不是 GWT 专家，但我不明白编译后的代码如何处理超链接和锚点小部件，而不是 HTML 小部件中的小部件。对此的任何煽动都可能会有所帮助。

我很想知道其他人是否也可以复制这个。我正在运行 Chrome 23.0.1271.97 和 GWT-2.5.0。我知道这发生在旧版本的 Chrome 和 GWT 中，因为它一直是一个问题，至少从 GWT-2.4 开始。

无趣的细微差别：如果同一个 HTML 中有两个不同的链接，它们的 bug 将独立发生。这意味着您可以中键单击每一个，它们都将正常工作，而不是第二次。刷新页面也会重置它们，因此下次中键单击时不会发生错误。我还发现，如果 HTML 小部件中包含两次相同的链接，它们实际上不会独立工作。意思是中键单击一个会导致另一个错误地处理它的第一次中键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:12:02.793

刚刚调试完这个。这不是 GWT 问题，而是 Chrome 问题。

我创建了一个错误报告：[http ://code.google.com/p/chromium/issues/detail?id=177502](http://code.google.com/p/chromium/issues/detail?id=177502)

您可以使用这个简单的 HTML 页面进行重现：`<!DOCTYPE html> <a href="#local">LOCAL</a>`

# css - HTML5 WebPage - 图标定位类似于 Windows 8 开始屏幕

> ID：14159833
> 
> 赞同：-3
> 
> 时间：2013-01-04T15:18:13.950
> 
> 标签：css, html, positioning

这就是我想做的：http: [//www.prikachi.com/images/743/5697743V.png](http://www.prikachi.com/images/743/5697743V.png)
但是当我尝试制作它时，我得到了这个： http: [//www.prikachi.com/images/742/ 5697742I.png](http://www.prikachi.com/images/742/5697742I.png)

我怎样才能使它成为可能？我不使用桌子。

有很好的例子如何制作带有地铁主题的网页，但我不想使用 jQuery 或 JavaScript。抱歉，如果有类似的问题，但我找不到。谢谢 ：）

**样式.css**

```
@font-face{
    font-family: OpenSans;
    src: url("opensans-light.ttf");
}
body{
    background-color: #260930;
    font-family: OpenSans;
}
header{
    color: white;
    font-size: 48px;
}
footer{
    text-align: center;
    color: white;
    font-size: 12px;
}
.content{
    height: 80%;
    overflow: hidden;
}
.content .items{
    padding: 0 20px;
    position: relative;
    overflow: hidden;
}
.icons{
    position: relative;
    top: 50%;
    left: 50%;
}
.box{
    float: left;
    position: relative;
    margin: 8px;
    padding: 8px;
    background: #555;
    text-decoration: none;
    cursor: pointer;
    overflow: hidden;
    color: #fff;
    background: #00a8ec;
    z-index: 9;
    width: 240px;
    height: 128px;
}
.box:hover{
    opacity: 0.85;
}
.box span{
    color: white;
    position: absolute;
    left: 5px;
    bottom: 5px;
    font-size: 15px;
    font-weight: normal;
    z-index: 8;
}
.box img{
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -32px;
    margin-top: -32px;
    z-index: 7;
}
.box img.cover{
    position: absolute;
    margin: 0 auto;
    top: 0px;
    left: 0px;
    width: 100%;
    z-index: 6;
}
.photos{
    width: 512px;
    height: 288px;
}
.width1{width: 120px;}
.height1{height: 120px;} 
```

**索引.html：**

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Metro theme site</title>
        <link rel="stylesheet" href="style.css"/>
        <meta charset="windows-1251"/>
    </head>
    <body>
        <div class="content">
        <div class="items">
            <a href="#" class="box" style="background: #f58d00;">
                <span>Firefox</span>
                <img src="images/firefox.png" alt="" />
            </a>
            <a href="#" class="box" style="background: #d68a3a; top: auto;">
                <span>About me</span>
                <img src="images/aboutme.png" alt="" />
            </a>
            <a class="box photos" style="box-align: start;" href="#">
                <span>Photos</span>
                <img class="cover" src="http://www.hdwallpapersarena.com/wp-content/uploads/2012/04/HD-wallpaper-2.jpeg" alt="" />
            </a>
            <a href="http://www.facebook.com/megapro189" target="_blank" class="box width1 height1" style="background: #3b5a9b;">
                <span>Facebook</span>
                <img src="images/facebook.png" alt="" />
            </a>
            <a href="#" class="box width1 height1" style="background: #f21d1d;">
                <span>Projects</span>
                <img src="images/projects.png" alt="" />
            </a>
            <a href="#" class="box width1 height1" style="background: #00aaf1;">
                <span>Skype</span>
                <img src="images/skype.png" alt="" />
            </a>
            <a href="#" class="box width1 height1" style="background: #00aaf1;">
                <span>Skype</span>
                <img src="images/skype.png" alt="" />
            </a>
            <a href="#" class="box width1 height1" style="background: #00aaf1;">
                <span>Skype</span>
                <img src="images/skype.png" alt="" />
            </a>
        </div>
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:23:31.333

您还应该告诉我们使用的浏览器...如果您使用 chrome 或 firefox 和 firebug，请打开调试器（使用 chrome 的 ctrl+shift+j）并尝试实时编辑样式，以本地化您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:35:50.263

[***演示***](http://jsfiddle.net/UU5Cc/)

**HTML**

```
<div id="top-left">
    <div id="ff">Firefox</div>
    <div id="am">About me</div>
</div>
<div id="top-right">
    <div id="bp">Box Photos</div>
</div>
<div id="bottom">
    <div id="fb">Facebook</div>
    <div id="pj">Projects</div>
    <div class="sk">Skype</div>
    <div class="sk">Skype</div>
    <div class="sk">Skype</div>
</div> 
```

**CSS**

```
#top-left, #top-right {
float:left;
}
#bottom {
clear:both;   
}
#ff, #am, #bp {
margin:16px 8px;
padding:8px;
height:128px;
width:240px;  
}
#ff {
background-color:orange;    
}
#am {
background-color:tan;    
}
#bp {
height:288px;
width:512px;
background-color:blue;    
}
#fb, #pj, .sk {
margin:0px 8px;
padding:8px;
height:120px;
width:120px;
float:left;
}
#fb {
background-color:navy;   
}
#pj {
background-color:maroon;
}
.sk {
background-color:lightblue;
}​ 
```

# apache - Apache RewriteRule 修改 request_uri

> ID：14159841
> 
> 赞同：1
> 
> 时间：2013-01-04T15:18:59.070
> 
> 标签：apache, mod-rewrite

根据一个条件，我希望 Apache 更改 REQUEST_URI，然后将新的 REQUEST_URI 代理到不同的网络服务器

这应该是相当浪费的，但是，互联网上的所有例子都没有给我任何结果。

因此，例如我的 URL：[http](http://my.domain.com/otherserver/dir2/page1.html?param1=true%param2=10) : //my.domain.com/otherserver/dir2/page1.html?param1=true%param2=10 基于 REQUEST_URI 的开头我想将 REQUEST_URI 修改为 /dir2/page1.html ?param1=true%param2=10 并将其传递给另一个网络服务器

例如

```
RewriteCond %{REQUEST_URI} ^/otherserver
RewriteRule ^(.*) ^/otherserver / [N]
RewriteRule ^(.*)$ http://localhost:8080%{REQUEST_URI} [P] 
```

然而，这并没有给出预期的结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:28:23.413

我建议您尝试以不同的方式执行此操作，例如使用`mod_proxy`而不是`P`标志来`mod_rewrite`（请参阅[标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)[的`mod_rewrite`文档，`P`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)`mod_proxy`其中显示“尽可能避免使用此标志并更喜欢 [指令]”，以及[何时不使用重写](http://wiki.apache.org/httpd/WhenNotToUseRewrite)）。

如果我理解正确，您想要的行为是“对于表单的所有请求，`^/otherserver(.*)`将请求代理到`http://localhost:8080$1`。” 何时不使用[重写页面](http://wiki.apache.org/httpd/WhenNotToUseRewrite)建议可以这样做

```
ProxyPass /otherserver http://localhost:8080/ 
```

...但在接受我的话之前，[请在`mod_proxy`文档](http://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass)中确认这一点。

# visual-studio - Visual Studio RC 过期后会发生什么？

> ID：14159846
> 
> 赞同：4
> 
> 时间：2013-01-04T09:15:08.240
> 
> 标签：visual-studio

我现在使用的是 VS 2012 Ultimate RC，它会在 10 天后到期。

我以前从未使用过 RC，所以我不知道它们过期后会发生什么。可能IDE将被禁用？或者命令行工具将无法访问？

也许有人知道解释这些的官方常见问题解答？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:02:59.103

Jeff Beehler (MSFT)的[评论](http://blogs.msdn.com/b/jasonz/archive/2012/05/31/announcing-the-release-candidate-rc-of-visual-studio-2012-and-net-framework-4-5.aspx?PageIndex=4)表明 RC 将停止工作。

> 在 VS2012 Release Candidate 许可条款中，您会发现该软件将在 2013 年 1 月 15 日停止运行。

Raymond Chen 讲述了一个关于以前 RC 版本的 Windows在过期后[停止工作的故事。](http://blogs.msdn.com/b/oldnewthing/archive/2009/05/21/9633075.aspx)

> 此 Windows 安装的评估期已过期。该系统将在 1 小时后关闭。

# mercurial - 将一些提交移至 Hg 中的新分支

> ID：14159849
> 
> 赞同：0
> 
> 时间：2013-01-04T15:19:23.043
> 
> 标签：mercurial, branch

我的回购目前如下：

```
O 7: default
|
O 6: default
|
|  O 5: default
|  |
|  O 4: default
|  |
|  O 3: default
| /
O 2: default
|
O 1: default 
```

我想将 6 和 7 移动到一个新的分支，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:49:20.303

您可以为此使用[rebase 扩展](http://mercurial.selenic.com/wiki/RebaseExtension)。它需要启用，但该链接包含有关如何执行此操作的信息。

命令将是：

```
hg update 2
hg branch newbranch
hg commit -m "Creating new branch"
hg rebase -s 6 -d 8 
```

这将创建新分支，提交它（这将在您的示例中创建修订版 8），然后将修订版 6 及其后代移动到新分支上。显然，您需要查找存储库的实际修订号。

您也可以使用[mq 扩展](http://mercurial.selenic.com/wiki/MqExtension)来做到这一点，但我认为 rebase 在这种情况下更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:42:13.480

取决于您如何定义术语“分支”。如果您在谈论[命名分支](http://mercurial.selenic.com/wiki/NamedBranches)，那么史蒂夫凯伊的回答很好。

如果您正在谈论像 5 和 6 这样的分支位于图表中的一个分支上，那么您无需执行任何操作。6 & 7 已经在他们自己的分支上。您可以不理会它们，然后返回修订版 2 继续在那里工作。

```
hg update 2
<continue work>
hg commit -m "New Stuff" 
```

这会给你留下这样的图表：

```
o 8: default
|  
|  O 7: default
|  |
|  O 6: default
|  |
|  |  O 5: default
|  |  |
|  |  O 4: default
|  |  |
|  |  O 3: default
 \ | /
   O 2: default
   |
   O 1: default 
```

如果您想为这些提示中的每一个指定名称，请查看[书签](http://mercurial.selenic.com/wiki/Bookmarks)。

```
hg bookmark -r 8 stable
hg bookmark -r 7 experimental-stuff
hg bookmark -r 5 some-feature 
```

...然后您可以按名称在它们之间进行更改。

# ios - RestKit - RKRequestDelegate 不存在

> ID：14159851
> 
> 赞同：2
> 
> 时间：2013-01-04T15:19:37.010
> 
> 标签：ios, restkit

我已经将 RestKit 安装到 Xcode 中并且构建良好。但是，我似乎在很多课程中都失踪了。我正在尝试将 RKRequestDelegate 类作为委托添加到我的一个视图控制器中，但该委托不存在。我也缺少 RKRequest 类。我查看了硬盘驱动器上的 RestKit 文件夹，但在那里看不到它们。也许我在路上错过了一步。如果其他人遇到过这种情况，很高兴听到解决方案。

谢谢布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T03:12:00.227

这是一个关于从 0.10.x 升级到 0.20.0 的 wiki：

> [https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

如您所见，确实是一个很大的变化.. 而对于`RKRequestDelegate`，正如它所说：

> 委托协议 RKRequestDelegate 和 RKObjectLoaderDelegate 已从项目中删除，以支持基于块的方法。这些协议中最常见的必需方法，例如 request:didLoadResponse:、request:didLoadError:、objectLoader:didLoadObjects: 和 objectLoader:didLoadError: 已被 AFHTTPRequestOperation 和 RKObjectRequestOperation 类上的完成块替换。通常，这些完成块被指定为一对成功和失败块

似乎很棘手。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T04:54:29.713

您可能没有做错任何事——从 0.20.0 开始，RestKit 似乎不再包含 RKRequestDelegate

您可以比较[0.10.3](http://restkit.org/api/0.10.3/)和[0.20.0-pre6](http://restkit.org/api/0.20.0-pre6/)的 API 文档来验证这一点。

根据您想要使用 RKRequestDelegate 的目的，您可以使用新的委托之一，或者您也可以将 RKObjectManager 子类化（在[RKObjectManager 文档](http://restkit.org/api/0.20.0/Classes/RKObjectManager.html)中搜索“Customization & Subclassing Notes”以获取何时可能合适的示例）。

也就是说，我必须警告，我也不确定对于我面临的问题（[如何在重新验证后重试请求](https://stackoverflow.com/questions/14154755/restkit-how-to-resubmit-failed-request-after-re-authenticating)）的“正确”方法是什么，并且无法找到任何确定的方法文档。希望您的用例更加明确。

# java - 带有 Java 1.5 的 Red Hat Linux 上的 PrintServiceLookup.lookupPrintServices 有时会返回包含 NULL 的数组

> ID：14159853
> 
> 赞同：0
> 
> 时间：2013-01-04T15:19:39.730
> 
> 标签：java, linux, printing, cups

我们在获取 RHL 上的打印机列表时遇到了这个奇怪的问题。我写了一小段代码来演示发生了什么：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.PrintStream;
import javax.print.Doc;
import javax.print.DocFlavor;
import javax.print.DocFlavor.INPUT_STREAM;
import javax.print.DocPrintJob;
import javax.print.PrintService;
import javax.print.PrintServiceLookup;
import javax.print.SimpleDoc;

public class PrintTest
{
  public static void main(String[] args)
  {
      PrintService[] pservices = PrintServiceLookup.lookupPrintServices(null, null);
      System.out.println(pservices.length);

      for( int y = 0; y < pservices.length; y++ ){
        System.out.print(y + " - " );
        System.out.println(pservices[y]);
      }
  }
} 
```

这是结果：

```
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - null
1 - null
2 - null
3 - null
4 - null
5 - null
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - IPP Printer : PPR403_2
1 - IPP Printer : PPR413_2
2 - IPP Printer : PPR506_7
3 - IPP Printer : PPR509_7
4 - IPP Printer : PPR510_2
5 - IPP Printer : PPR516_1
6
0 - null
1 - null
2 - null
3 - null
4 - null
5 - null 
```

（我连续多次运行代码）。

如您所见，有时我们可以得到一个打印机列表（系统上配置了 6 个），有时我们得到一个长度为 6 的数组，但没有对象，只有空值：/。

请帮我诊断一下我在谷歌上快速搜索过的问题，但似乎没有什么适合这个。

这是服务器上的 java 版本： java 版本 "1.5.0_30" Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_30-b03) Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_30-b03) ， 混合模式）

不幸的是，我无法改变这一点。

编辑：这是来自 CUPS 的日志（不知道是否重要）：

```
D [04/Jan/2013:16:31:25 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:25 +0100] cupsdAcceptClient: 8 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:25 +0100] cupsdCloseClient: 8
D [04/Jan/2013:16:31:25 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:25 +0100] cupsdAcceptClient: 8 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:25 +0100] cupsdCloseClient: 8
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 8 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdReadClient: 8 POST / HTTP/1.1
D [04/Jan/2013:16:31:26 +0100] cupsdAuthorize: No authentication data provided.
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Default
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Default client-error-not-found: No default printer
D [04/Jan/2013:16:31:26 +0100] cupsdProcessIPPRequest: 8 status_code=406 (client-error-not-found)
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdReadClient: 8 POST / HTTP/1.1
D [04/Jan/2013:16:31:26 +0100] cupsdAuthorize: No authentication data provided.
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Printers
D [04/Jan/2013:16:31:26 +0100] cupsdProcessIPPRequest: 8 status_code=0 (successful-ok)
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdReadClient: 8 POST / HTTP/1.1
D [04/Jan/2013:16:31:26 +0100] cupsdAuthorize: No authentication data provided.
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Default
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Default client-error-not-found: No default printer
D [04/Jan/2013:16:31:26 +0100] cupsdProcessIPPRequest: 8 status_code=406 (client-error-not-found)
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: skipping getpeercon()
D [04/Jan/2013:16:31:26 +0100] cupsdAcceptClient: 10 from localhost:631 (IPv4)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 10
D [04/Jan/2013:16:31:26 +0100] cupsdReadClient: 8 POST / HTTP/1.1
D [04/Jan/2013:16:31:26 +0100] cupsdAuthorize: No authentication data provided.
D [04/Jan/2013:16:31:26 +0100] CUPS-Get-Printers
D [04/Jan/2013:16:31:26 +0100] cupsdProcessIPPRequest: 8 status_code=0 (successful-ok)
D [04/Jan/2013:16:31:26 +0100] cupsdCloseClient: 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:56:23.300

unix/linux 平台上的 CUPS 和 java jre 存在问题，要查看更多信息，您可以设置`sun.print.ippdebug`为`true`. 在您的情况下，它看起来像jre 中的[这个错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6604109)，因此设置`sun.java2d.print.polling`为`true`应该会有所帮助。

# java - 如何在 Haskell 中实现提前退出/返回？

> ID：14159855
> 
> 赞同：10
> 
> 时间：2012-12-20T10:55:59.170
> 
> 标签：java, haskell, control-structure

我正在将 Java 应用程序移植到 Haskell。Java 应用程序的 main 方法遵循以下模式：

```
public static void main(String [] args)
{
  if (args.length == 0)
  {
    System.out.println("Invalid number of arguments.");

    System.exit(1);
  }

  SomeDataType d = getData(arg[0]);
  if (!dataOk(d))
  {
    System.out.println("Could not read input data.");

    System.exit(1);
  }

  SomeDataType r = processData(d);
  if (!resultOk(r))
  {
    System.out.println("Processing failed.");

    System.exit(1);
  }

  ...
} 
```

所以我有不同的步骤，在每一步之后我可以退出并显示错误代码，或者继续执行下一步。

我将其移植到 Haskell 的尝试如下：

```
main :: IO ()
main = do
         a <- getArgs
         if (null args)
           then do
                   putStrLn "Invalid number of arguments."
                   exitWith (ExitFailure 1)
           else do
                   -- The rest of the main function goes here. 
```

使用这个解决方案，我将有很多嵌套`if-then-else`（一个用于原始 Java 代码的每个退出点）。

有没有更优雅/惯用的方式在 Haskell 中实现这种模式？一般来说，什么是 Haskell 惯用的方式来实现像 Java 这样的命令式语言中使用的提前退出/返回？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:58:07.890

Haskell 中使用与您尝试过的相同类型的条件逻辑的稍微更明智的方法可能如下所示：

```
fallOverAndDie :: String -> IO a
fallOverAndDie err = do putStrLn err
                        exitWith (ExitFailure 1)

main :: IO ()
main = do a <- getArgs
          case a of
              [d] | dataOk d  -> doStuff $ processData d
                  | otherwise -> fallOverAndDie "Could not read input data."
              _ -> fallOverAndDie "Invalid number of arguments."

processData r 
    | not (resultOk r) = fallOverAndDie "Processing failed."
    | otherwise        = do -- and so on... 
```

在这种特殊情况下，鉴于*无论如何*`exitWith`都会终止程序，我们也可以完全省去嵌套条件：

 *```
main :: IO ()
main = do a <- getArgs
          d <- case a of
                   [x] -> return x
                   _   -> fallOverAndDie "Invalid number of arguments."
          when (not $ dataOk d) $ fallOverAndDie "Could not read input data."
          let r = processData d
          when (not $ resultOk r) $ fallOverAndDie "Processing failed." 
```

使用`fallOverAndDie`和以前一样。这是对原始 Java 的更直接的翻译。

在一般情况下，for 的`Monad`实例`Either`让您可以用纯代码编写与上面后一个示例非常相似的内容。而是从这里开始：

```
fallOverAndDie :: String -> Either String a
fallOverAndDie = Left

notMain x = do a <- getArgsSomehow x
               d <- case a of
                        -- etc. etc. 
```

...其余代码与我的第二个示例相同。当然，您也可以使用其他东西`String`；为了更忠实地重新创建`IO`版本，您可以`Either (String, ExitCode)`改用。

此外，这种使用`Either`不限于错误处理——如果你有一些复杂的计算返回 a `Double`， using`Either Double Double`和与上面相同的单子样式，你可以使用`Left`返回值提前退出，然后使用类似的东西包装函数`either id id`折叠两个结果并得到一个`Double`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T11:23:10.723

一种方法是使用`ErrorT`monad 转换器。有了它，你可以把它当作一个普通的 monad，return，bind，所有这些好东西，但你也可以得到这个函数，`throwError`. 这会导致您跳过以下计算，直到您到达 monadic 计算的末尾，或者当您调用 catchError。这是用于错误处理的，而不是用于任意退出 Haskell 中的函数。我建议它，因为看起来这就是你正在做的事情。

一个简单的例子：

```
import Control.Monad.Error
import System.Environment

data IOErr = InvalidArgs String | GenErr String deriving (Show)
instance Error IOErr where
  strMsg = GenErr --Called when fail is called
  noMsg  = GenErr "Error!"
type IOThrowsError = ErrorT IOErr IO

process :: IOThrowsError [String]
process = do
  a <- liftIO getArgs
  if length a == 0
  then throwError $ InvalidArgs "Expected Arguments, received none"
  else return a

main = do 
  result <- runErrorT errableCode
  case result of
     Right a -> putStrLn $ show a
     Left  e -> putStrLn $ show e
  where errableCode = do
    a <- process
    useArgs a 
```

现在如果进程抛出错误， useArgs 将不会被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:04:42.787

这就是我想出的

```
data ExtendedMaybe a = Just a | GenErr String 

isWrongArgs :: [string] -> ExtendedMaybe [string]
isWrongArgs p = if (length p == 0)
then GenErr "Invalid number of arguments"
else p

getData :: ExtendedMaybe [string] -> ExtendedMaybe sometype 
getData GenErr = GenErr
getData [string] = if anything wrong return GenErr "could not read input data"

processdata :: ExtendedMaybe sometype -> ExtendedMaybe sometype
processdata GenErr = GenErr 

main = do 
    a <- getArgs
    d <- isWrongArgs a
    r <- getData d
    f <- processdata r 
```

大致的想法是你有一个像 Maybe a 这样的数据类型，只是你有 GenErr 字符串而不是 Nothing，你在每个处理数据的函数中定义它。如果输入数据类型是 GenErr，只需返回它。否则检查数据中的错误并返回带有适当字符串的 GenErr。这可能不是完美的方式，但仍然是一种方式。这不会在确切的错误点退出，但保证在发生错误后不会发生太多事情。*

# windows-server-2008-r2 - Windows Server 2008 R2 上的 PlatformService

> ID：14159860
> 
> 赞同：0
> 
> 时间：2013-01-04T15:19:47.263
> 
> 标签：windows-server-2008-r2, endeca

我已经安装了 MDEX 6.2.1 版和 PlatformServices 6.1.1 版。重新启动机器后，我有 2 个服务：Endeca JCD 和 EndecaHTTPservice。问题在于第二个，因为每次我重新启动机器或手动启动服务时它都会失败。Windows 日志系统显示下一条消息：“Endeca HTTP 服务服务意外终止。它已经完成了 3 次。” 如果有人有这方面的经验，请帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:28:15.673

Endeca http 服务是建立在 Apache Tomcat 之上的，如果 Tomcat 因任何原因无法启动，您应该能够在 endeca 的 %ENDECA_ROOT%\workspace\logs 文件夹下看到相应的日志文件。

在 tomcat 甚至可以开始记录任何事情之前服务启动器可能会失败，在这种情况下，Windows 事件查看器可能会有一些信息。

保留版本 6 中的 JCD 只是为了向后兼容 v5 安装，不应在全新的 v6 及更高版本安装中使用。

# objective-c - UIPickerView prepareForSegue

> ID：14159861
> 
> 赞同：0
> 
> 时间：2013-01-04T15:19:48.997
> 
> 标签：objective-c, xcode, twitter, ios6, accounts

我正在创建一个客户。选择一个帐户并且该帐户通过（通过segue）。想知道它是如何做到的。obs ** 数据传递是用户选择的选择器的数组（帐户）。

这将返回选择器视图：

```
-(NSString*)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component { 
  ACAccount *acct = [arrayOfAccounts objectAtIndex:row]; 
  return [acct username];
} 
```

必须将用户选择的选项（数组）传递给另一个视图以用作帐户（Twitter）

我设法用 TableView 做了一次（但我认为界面很糟糕）并决定制作pickerview。问题仅在于传递此数据（如下），不等于 tableview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T19:50:02.347

Are you using a Segue to pass the data to the next view? i think that would be the best way to do that. When passing the data from the pickerview, in your segue you can do this

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"moreinfosegue"])
    {
        // Get reference to the destination view controller
        NextViewController *nextViewC = [segue destinationViewController];
        // Pass any objects to the view controller here, like...
        ACAccount *acct = [self.arrayOfAccounts objectAtIndex:[_yourPickerView selectedRowInComponent:0]];

        [nextViewC  setACAccountValueInOtherView:acct];

    }
} 
```

Just remember that the selectedRowInComponent is set to whatever component you are taking it from the UIPickerView.

I hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:28:54.207

我希望我能理解你，你的描述/拼写有点模糊。

您需要实现此委托方法：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

我不建议在选择器视图上选择时切换视图，如果您使用按钮执行 segue 会更好。您可以将选择保存在私有属性中，并使用它`prepareForSegue:`来将其传递给另一个视图控制器。

# javascript - 如何让这个 jQuery 脚本在多个元素上单独运行

> ID：14159867
> 
> 赞同：3
> 
> 时间：2013-01-04T15:20:07.260
> 
> 标签：javascript, jquery

我不确定标题是否正确。我似乎无法用语言正确表达这个问题！

我的 HTML 中有以下文本字段，我试图限制可以输入的字符数：

```
<div class="limited limit-200">
    <div class="label">
        <label for="_je_industries_desc">Industry Description</label>
    </div>
    <div class="input">
        <textarea class="large-text" name="industries_desc" id="industries_desc" cols="60" rows="3"></textarea>
        <p id="industries_desc_description" class="description">Put a short description of this industry.</p>
    </div>
</div>
<div class="limited limit-100">
    <div class="label">
        <label for="_je_seo_description">Meta Description</label>
    </div>
    <div class="input">
        <textarea class="large-text" name="seo_description" id="seo_description" cols="60" rows="3"></textarea>
        <p id="seo_description_description" class="description">Put a short description of the content of this page.</p>
    </div>
</div> 
```

到目前为止，这是我的 jQuery。例如，它从 HTML 中的类名中获取字符限制`limit-200`。然后计算您键入时剩余的字符数，并在 textarea 下输出剩余的字符。

```
jQuery(document).ready(function(){
    jQuery('.limited').each(function() {
        // Get the class names of any element that has the class .limited
        var className = jQuery(this).attr('class');

        // Use regex to capture the character limit class (limit-#)
        var limit = className.match(/[?:limit-](\d+)/);

        // Set the limit var to the match from the regex
        var limit = limit[1];

        // Calculate the number of characters that are still available (limit - characters in field)
        var chars_left = limit - jQuery('textarea', this).val().length;

        //alert(chars_left);

        // Attach an event handler to each textarea with the class .limited
        jQuery('textarea', this).on('keyup', function() {
            var maxchar = limit;
            var cnt = jQuery(this).val().length;
            var remainingchar = maxchar - cnt;
            if(remainingchar < 0){
                jQuery('#limit-counter span').html('<strong>0</strong>');
                jQuery(this).val(jQuery(this).val().slice(0, limit));
            } else {
                jQuery('#limit-counter span').html('<strong>' + remainingchar + '</strong>');
            }
        });

        // Display number of characters left
        jQuery('textarea', this).after('<span id="limit-counter">Remaining characters: <span><strong>' + chars_left + '</strong></span></span>');
    });
}); 
```

这对于单个 textarea 非常有用，但是如果我有多个文本并输入其中一个 textarea，则另一个 textarea 会使用与我输入的相同的值更新其计数器。

有人可以帮我找出我做错了什么吗？希望我只是在某个地方遗漏了一些简单的东西！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:31:04.180

你可以简化*很多*。首先将最大限制放在`maxlength`属性中：

```
<textarea name="seo_description" maxlength="100"></textarea> 
```

然后，选择所有`textarea`具有`maxlength`属性的 s，并遍历它们：

```
$('textarea[maxlength]').each(function() {
    var $this = $(this),
        limit = $this.attr('maxlength'),
        $counter = $('<span class="limit-counter">Remaining characters: <strong></strong></span>')
                    .insertAfter(this).find('strong');

    $this.on('keyup', function() {
        $counter.text( limit - $this.val().length );
    })
    .trigger('keyup');
}); 
```

在这里看到它的实际效果：http: [//jsfiddle.net/U4Mk6/](http://jsfiddle.net/U4Mk6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:30:46.010

我已将此添加到小提琴并进行了修改：

[http://jsfiddle.net/KQKnN/](http://jsfiddle.net/KQKnN/)

```
 var $textarea=jQuery(this).find('textarea');
    var uniqueId= $textarea.attr('id'); 
```

这里的麻烦是你的限制计数器必须是唯一的，你不能在一个页面上有两个具有相同 id 的元素。

```
 if(remainingchar < 0){
            jQuery('#limit-counter-'+uniqueId+' span').html('<strong>0</strong>');
            jQuery(this).val(jQuery(this).val().slice(0, limit));
        } else {
            jQuery('#limit-counter-'+uniqueId+' span').html('<strong>' + remainingchar + '</strong>');
    // .....

    $textarea.after('<span id="limit-counter-'+uniqueId+'">Remaining characters: <span><strong>' + chars_left + '</strong></span></span>'); 
```

我还将 textarea 添加到缓存选择器中——因此您将获得更好的性能，但它完全是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:34:06.510

就您的具体问题而言，我认为这条线和其中的一条`else`是罪魁祸首：

```
jQuery('#limit-counter span').html('<strong>0</strong>'); 
```

应该是：

```
jQuery('#limit-counter span', this).html('<strong>0</strong>'); 
```

这有帮助吗？

# javascript - 当没有输入任何内容时，为什么会说“C 是最伟大的”？

> ID：14159875
> 
> 赞同：-2
> 
> 时间：2013-01-04T15:20:50.327
> 
> 标签：javascript, html

```
<html>
    <head>
        <title>Greatest of three</title>
    </head>

    <body>
        <script type="text/javascript">
            var a = parseInt(prompt("Enter A"));
            var b = parseInt(prompt("Enter B"));
            var c = parseInt(prompt("Enter C"));

            if(a == b && b == c)
                document.write("A , B and C are equal! Give distinct numbers.")
            else if(a == b)
                document.write("A and B are equal! Give distinct numbers.");
            else if(b == c)
                document.write("B and C are equal! Give distinct numbers.");
            else if(c == a)
                document.write("A and C are equal! Give distinct numbers.");
            else if(a > b) {
                if(a > c)
                    document.write("A is the greatest");
                else
                    document.write("B is the greatest");
            }
            else {
                if(b > c)
                    document.write("B is the greatest");
                else
                    document.write("C is the greatest");
            }
        </script>
    </body>
</html> 
```

当没有输入任何内容时，为什么会说“C 是最伟大的”？如果在给出 NULL 时我必须打破它，我会怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T15:24:21.990

如果什么都不输入，这行代码

```
var a = parseInt(prompt("Enter A")); 
```

将返回 for 的值`NaN`（`a`和其他变量）。

由于既不是`NaN == NaN`也不是`NaN < NaN`结果`true`，您的所有`if`- 语句都将解析为 else 块，最终产生`document.write("C is the greatest");`。

要像这样检查这种用途[`isNaN()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)：

```
if ( isNaN( a ) ) {
  // some code to handle this
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:24:09.413

如果您没有提供任何提示；然后`a = parseInt(prompt("Enter A"))`使`a = NaN`（NaN 表示不是数字）。然后条件失败；`NaN < NaN`是假的`NaN == NaN`。基本上任何一侧为 NaN 的比较总是错误的。通过您的逻辑，这将打印“C 是最伟大的”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:24:56.910

```
 if(b>c)
        document.write("B is the greatest");
    else 
        document.write("C is the greatest"); 
```

这里在整个逻辑中，您只是在检查`a>b`, `a>c`... 但您没有检查`NaN`，要检查值是`NaN`，请使用`isNaN()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:24:33.420

在三元逻辑中，涉及 Null 的关系总是返回 false。甚至两个 Null 值之间的比较。Javascript 中的 NaN 值遵循这些规则。

因此，`else`总是选择路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:24:53.790

因为这会被触发。

```
else
{
    if(b>c)
        document.write("B is the greatest");
    else 
        document.write("C is the greatest");
} 
```

如果没有输入`b`将 ==`c`所以最终`else`（C 是最大的）被触发。

您需要检查您是否有输入。你可以通过在整个东西周围包裹一个额外的块来做到这一点：

```
if( a && b && c ) {
   // your if statements
}
else {
   alert("No input!")
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T15:26:47.037

因为 a = NaN

比较 NaN == NaN 是假的！

```
<body>
    <script type="text/javascript">
        var a = parseInt(prompt("Enter A"));
        var b = parseInt(prompt("Enter B"));
        var c = parseInt(prompt("Enter C"));
        document.write(a);// << os NaN
        document.write(a == b); //<< Is False!!
    if(a==b && b==c)
        document.write("A , B and C are equal! Give distinct numbers.") 
    else if(a==b)
        document.write("A and B are equal! Give distinct numbers.");
    else if(b==c)
        document.write("B and C are equal! Give distinct numbers.");
    else if(c==a)
        document.write("A and C are equal! Give distinct numbers.");

    else if(a>b)
    {
        if(a>c)
            document.write("A is the greatest");
        else
            document.write("B is the greatest");
    }
    else
    {
        if(b>c)
            document.write("B is the greatest");
        else 
            document.write("C is the greatest");
    }   
    </script>
</body> 
```

# ruby-on-rails - Rails 3 Routes：默认格式和有限格式

> ID：14159876
> 
> 赞同：2
> 
> 时间：2013-01-04T15:20:54.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, format

我在组合 2 个导轨路由功能（默认参数和参数匹配）时遇到问题。每一个都很容易独立解决，但是当结合起来时，结果并不完全是我所追求的。

**规则：**

```
get "/foobars(.:format)" => "foobars#index", :defaults => {:format => :json}, :format => /(xml|json)/ 
```

**我想要的是：**

1.  `format`参数是可选的
2.  如果没有`format`，则默认格式为`json`
3.  如果`format`包含，请确保它只是`xml`或`json`
4.  如果`format`通过了不支持的，例如`html`，则此路由规则不应匹配。

**我得到了什么：**

1.  `format`参数是可选的
2.  如果没有`format`，则默认格式为`json`
3.  如果`format`包含，请确保它只是`xml`或`json`
4.  如果`format`传递了不支持的值，例如`baz`，则此路由规则匹配并将格式设置为`JSON`。

不同点`#4`是我要解决的问题。换句话说，我在这之后：

```
GET /foobars      => "foobars#index"  with format `json`
GET /foobars.json => "foobars#index"  with format `json`
GET /foobars.xml  => "foobars#index"  with format `xml`
GET /foobars.baz  => "something#else" handled by another route rule lower down 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:53:52.367

您是否尝试过使最后一部分成为约束？

```
get "/foobars(.:format)" => "foobars#index", :defaults => {:format => :json}, :constraints => {:format => /(xml|json)/} 
```

# vba - VBA 删除正文中的图像而不是 MS-Word 中的标题

> ID：14159877
> 
> 赞同：2
> 
> 时间：2013-01-04T15:21:00.577
> 
> 标签：vba, ms-word

我有 MS Word 文件，其标题带有 2 个文本框和一个图像（作为徽标）以及正文中的一些表格、文本和图像。
我正在尝试使用此 VBA 代码删除标题（徽标）中的图像：

```
Dim tmp As Shape
Dim dShape As Shape

For Each tmp In ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Shapes
    If tmp.Type = msoPicture Then
        Set dShape = tmp
    End If
Next
dShape.Delete 
```

在第一次测试中它工作正常！之后它会删除正文图像而不是标题图像！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:34:53.963

看来我们应该先选择`Shape`我们要删除的！！
我不知道为什么当我说它`shape1.Delete`认为：让我看看，嗯......我认为我最好这样做`shape2.Delete`，所以我会这样做。
任何方式都有效：

```
dShape.Select
dShape.Delete 
```

VBA 是个傻瓜（就像它的平台一样）！

# sas - 未分配架构？

> ID：14159882
> 
> 赞同：1
> 
> 时间：2013-01-04T15:21:14.603
> 
> 标签：sas

以下代码有一条错误消息，我正在努力解决这个问题。错误消息是：“未分配 Libname HDMAPP”。

提前感谢您的帮助！

```
%let tmpschema = HDMAPP;      *schema for transient tables, test-HDMAPP, prod-HDMAPP;  
%let userid    = &uid;           *data mart user;
%let password  = &pw;            *data mart password;
%let memschema = HDMTST;         *schema for member tables;
%let datasrc   = PHEDISRP;       *odbc data source to connect to db2;

proc sql;
 connect to odbc as HDMconnect (datasrc=&datasrc user=&userid password=&password);
    create table &tmpschema..testmp as
    select * from connection to HDMconnect
     (select * from HDMPRD.MEMBER_CMPL);
disconnect from HDMconnect;
quit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:31:27.917

错误消息表示您没有使用名称定义的 SAS 逻辑库引用（“libref”）`HDMAPP`。因为那是你的宏变量的值`tmpschema`，它是由你程序中的这一行引起的：

```
create table &tmpschema..testmp as 
```

如果您尝试创建 SAS 数据集，则在该`proc sql`步骤之前应该有这样的语句：

```
libname HDMAPP 'path-to-local-file-system'; 
```

# php - 优化 ajax view-count sql 命令以提高速度

> ID：14159890
> 
> 赞同：1
> 
> 时间：2013-01-04T15:21:31.227
> 
> 标签：php, sql, ajax, performance, mysqli

我有一个 Wordpress 驱动的站点，在该站点上使用 wp-super-cache，因此我被迫通过 ajax 而不是内联 PHP 跟踪视图。以下是通过 ajax 调用的我的 PHP 文件的内容。顺便说一句，代码并不是真正的 Wordpress 特定的，但为了稍微解释一下，它会像更新`wp_postmeta`表格一样更新表格`update_post_meta()`。它使用 mysqli，并进行**2 个**sql 查询

1.  确保要更新的 postid 有效。
2.  增加观看次数。

我的问题是，这段代码是否存在一些*性能问题，它会以某种方式更好吗？*

*代码摘录：*

```
 #...ajax stuff

  $json_array = array();
  $json_array["category_id"] = (int)$cat_id;
  $json_array["post_id"] = (int)$post_id;

  // get secure database credentials
  require("/server/abspath/dbinfo.inc");

  $db_details = new dbCreds;
  $mysqli = new mysqli(
    $db_details->get("dbhost"),
    $db_details->get("dbuser"),
    $db_details->get("dbpw"),
    $db_details->get("db")
  );

  # test if valid post
  # sql call no1
  $valid_post_sql = "SELECT ABS(meta_value) FROM wp_postmeta "
    . "WHERE (post_id = '" . $post_id . "' AND meta_key = 'views')";
  $current_view_count = @$mysqli->query($valid_post_sql)->fetch_array();
  $valid_post_sql_result = $current_view_count ? true : false;

  if ( $valid_post_sql_result == false ) {
    die("4");
  }

  # set new view-count
  $views = isset($current_view_count[0]) && (int)$current_view_count[0] >= 0
    ? ((int)$current_view_count[0]+1) : 0;

  # if not an admin or no views recorded yet
  if ( !$is_admin || $views == 0 ) {
    # sql call no2
    $increment_imgviews_sql = "UPDATE wp_postmeta SET meta_value = "
      . "meta_value + 1 WHERE (post_id = '" . $post_id
      . "' AND meta_key = 'views')";
    $mysqli->query($increment_imgviews_sql);
  }
  $json_array["views"] = $views;
  return $json_array; 
```

**新代码：**

这就是我最终使用的，只用一个替换了两个调用：

`UPDATE wp_postmeta SET meta_value = meta_value + 1 WHERE post_id = '" . $post_id . "' AND meta_key = 'views';`

*笔记！这使得返回响应过时了，因为我没有返回当前的视图计数。但另一方面，我保存了一个查询。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:31:44.310

对我来说看起来很好。我唯一想说的是，如果这是一个后台任务，那么在生产环境中获取视图计数响应是没有用的（除非发生了一些我不知道的事情）。

因此，鉴于这些信息，没有理由事先验证 postid。您可以将第一个 sql 语句与 $views 计算一起删除，然后只使用更新语句（如果它不是有效的 id，那么它根本不会更新任何东西）。如果您在创建帖子时未设置此“视图”元键，则查看`INSERT... ON DUPLICATE KEY`而不是更新

如果您真的想保留您的 json 响应，那么我看不到任何真正可以做出的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:29:56.967

您不能使用`INSERT ... ON DUPLICATE KEY`结构而不是检索/更新/存储吗？现在你的代码相当活泼，可能会丢失命中。就像是

```
INSERT INTO wp_postmeta (meta_value, meta_key, post_id) VALUES (...)
ON DUPLICATE KEY UPDATE meta_value=meta_value+1 
```

将消除活泼。

# sql-server - 将特定时间点的数据库状态复制到远程服务器（SQL Server）

> ID：14159892
> 
> 赞同：1
> 
> 时间：2013-01-04T15:21:47.287
> 
> 标签：sql-server, sql-server-2008

我正在使用 SQL Server 2008 R2，例如我需要每小时复制一次数据库的内容。我可以触发此复制并且仅复制触发复制时数据库中的数据，这一点非常重要。

假设我有以下两台服务器：

*   服务器 A（生产服务器）
*   服务器 B（故障转移服务器）

是否可以在服务器 A 上创建快照，然后将此快照复制到远程服务器 B？创建快照后发生的所有更改都不应该复制到服务器 B！

谢谢你的帮助！

问候， 阿兰

# asp.net - ASP.NET：防止用户控件消失

> ID：14159897
> 
> 赞同：1
> 
> 时间：2013-01-04T15:22:13.160
> 
> 标签：asp.net, user-controls, treeview

在我的网页上，我尝试添加依赖于树视图中复选框的用户控制元素。因此，我创建了一个包含树视图的表和一个应该加载这些元素的面板。结构是这样的：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent"> 
    <script language="javascript" type="text/javascript">
        function doCheckBoxPostBack(e) {
            var event = window.event ? window.event.srcElement : e.target;

            if (event.tagName == "INPUT" && event.type == "checkbox")
                __doPostBack("", "");
        }
    </script>
    <form id="form1" runat="server">
        <h1>Status</h1>    
        <div>     
            <asp:ScriptManager ID="ScriptManager1" runat="server">
            </asp:ScriptManager> 
            <table>
                <tr>
                    <td colspan="2" align="left" style="font-size:large">
                    Auswahl der anzuzeigenden Areas
                    </td>
                </tr>
                <tr>                
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">                
                        <ContentTemplate>                        
                            <td valign="top">
                                <asp:TreeView ID="tvAreaSelect" runat="server" 
                                    onclick="doCheckBoxPostBack(event)" ShowCheckBoxes="All" 
                                    ontreenodecheckchanged="tvAreaSelect_TreeNodeCheckChanged"> 
                                    <DataBindings>
                                        <asp:TreeNodeBinding DataMember="System.Data.DataRowView" TextField="Text" ValueField="ID" />
                                    </DataBindings>       
                                </asp:TreeView>
                            </td> 
                            <td>                                 
                                <div style="overflow:auto; height:740px;">
                                    <asp:Panel ID="panelContent" runat="server">                  
                                    </asp:Panel> 
                                </div>
                            </td>                       
                        </ContentTemplate>            
                    </asp:UpdatePanel>
                </tr>
            </table>                       
        </div>           
    </form>
</asp:Content> 
```

在后面的代码中，每当其中一个复选框更改其 Checked 值时，我都会加载或卸载我的用户控件。这就像它应该的那样工作，但是当我按下其中一个控件中的任何按钮时，它们都会消失。我必须将它们保存在缓存中还是有其他事情要处理？

这是我的代码的一部分。我希望它清楚我在做什么。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (AreaIds.currList == null)            
            AreaIds.currList = new List<int>();

        if (!this.Page.IsPostBack)
        {  
            DataSet dsAreaGroups = dbStat.getDataSetAreaGroups();
            DataSet dsAreasNotInAreaGroups = dbStat.getDataSetAreasNotInAreaGroups();
            DataSet dsAreasInGroups = dbStat.getDataSetAreaGroupsWithAreas();

            DataSet dsTree = new DataSet();
            dsTree.Tables.Add("Table");
            dsTree.Tables[0].Columns.Add("ID", typeof(string));
            dsTree.Tables[0].Columns.Add("ParentID", typeof(string));
            dsTree.Tables[0].Columns.Add("Text", typeof(string));

            DataTableReader dtr = dsAreaGroups.CreateDataReader();

            while (dtr.Read())
            {
                DataRow row = dsTree.Tables[0].NewRow();
                object[] vals = new object[dtr.FieldCount];
                dtr.GetValues(vals);

                int inAreaGroupID = (int)vals.ElementAt(0);
                string stName = (string)vals.ElementAt(1);

                row["ID"] = inAreaGroupID;
                row["Text"] = stName;

                dsTree.Tables[0].Rows.Add(row);
            }

            dtr = dsAreasInGroups.CreateDataReader();

            while (dtr.Read())
            {
                DataRow row = dsTree.Tables[0].NewRow();
                object[] vals = new object[dtr.FieldCount];
                dtr.GetValues(vals);

                int inAreaID = (int)vals.ElementAt(0);
                int inAreaGroupID = (int)vals.ElementAt(1);
                string stName = (string)vals.ElementAt(2);

                string stCombo = inAreaGroupID + "-" + inAreaID;
                row["ID"] = stCombo;
                row["ParentID"] = inAreaGroupID;
                row["Text"] = stName;

                dsTree.Tables[0].Rows.Add(row);
            }

            dtr = dsAreasNotInAreaGroups.CreateDataReader();

            while (dtr.Read())
            {
                DataRow row = dsTree.Tables[0].NewRow();
                object[] vals = new object[dtr.FieldCount];
                dtr.GetValues(vals);

                int inAreaID = (int)vals.ElementAt(0);
                string stName = (string)vals.ElementAt(1);

                row["ID"] = "0-" + inAreaID;
                row["Text"] = stName;

                dsTree.Tables[0].Rows.Add(row);
            }

            tvAreaSelect.SetDataSourceFromDataSet(dsTree, "ID", "ParentID");
            tvAreaSelect.DataBind();
        }            
        }        

    public void includeAreas(List<int> areaId)
    {
        int[] array = areaId.ToArray();

        for (int i = 0; i < array.Length; i++)            
        {
            Control ctrl = LoadControl("StatusArea.ascx", areaId[i]);                
            this.panelContent.Controls.Add(ctrl);
        }
    }

    /// <summary>
    /// Bereitstellung eines UserControl aus einer ascx-Datei
    /// </summary>
    /// <param name="UserControlPath">Das UserControl ascx-Datei</param>
    /// <param name="constructorParameters">Parameter im Konstruktor der ascx.cs-Datei</param>
    /// <returns>UserControl mit den entsprechenden Parametern</returns>   
    private UserControl LoadControl(string UserControlPath, params object[] constructorParameters)
    {
        List<Type> constParamTypes = new List<Type>();
        foreach (object constParam in constructorParameters)
        {
            constParamTypes.Add(constParam.GetType());
        }

        UserControl ctl = Page.LoadControl(UserControlPath) as UserControl;

        // Find the relevant constructor
        System.Reflection.ConstructorInfo constructor = ctl.GetType().BaseType.GetConstructor(constParamTypes.ToArray());

        //And then call the relevant constructor
        if (constructor == null)
        {
            throw new MemberAccessException("The requested constructor was not found on : " + ctl.GetType().BaseType.ToString());
        }
        else
        {
            constructor.Invoke(ctl, constructorParameters);
        }

        // Finally return the fully initialized UC
        return ctl;
    }

    protected void tvAreaSelect_TreeNodeCheckChanged(object sender, TreeNodeEventArgs e)
    {
        TreeNode selNode = (TreeNode)e.Node;
        TreeNode parentNode = selNode.Parent;

        if (selNode.Checked && selNode.ChildNodes.Count == 0)
        {
            string stTest = selNode.Value.Substring(selNode.Value.IndexOf("-") + 1);
            int inAreaID = Convert.ToInt32(stTest);

            if (!AreaIds.currList.Contains(inAreaID))
                AreaIds.currList.Add(inAreaID);                
        }

        if (!selNode.Checked && selNode.ChildNodes.Count == 0)
        {
            string stTest = selNode.Value.Substring(selNode.Value.IndexOf("-") + 1);
            int inAreaID = Convert.ToInt32(stTest);

            if (AreaIds.currList.Contains(inAreaID))
                AreaIds.currList.Remove(inAreaID);                
        }

        foreach (TreeNode childNode in selNode.ChildNodes)
        {
            if (selNode.Checked)
            {
                string stTest = childNode.Value.Substring(childNode.Value.IndexOf("-") + 1);
                int inAreaID = Convert.ToInt32(stTest);

                childNode.Checked = true;

                if (!AreaIds.currList.Contains(inAreaID))
                    AreaIds.currList.Add(inAreaID);
            }
            else
            {
                string stTest = childNode.Value.Substring(childNode.Value.IndexOf("-") + 1);
                int inAreaID = Convert.ToInt32(stTest);

                childNode.Checked = false;

                if (AreaIds.currList.Contains(inAreaID))
                    AreaIds.currList.Remove(inAreaID);
            }
        }

        includeAreas(AreaIds.currList);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:28:11.277

我确实相信您的问题在于不幸的是您需要在每次回发时重新加载动态控件。

一种解决方案是保留“已加载”控件的会话中列表，并在 Page_Init 重新创建它们。

# clearcase - 将 ClearQuest DWO 附加到 Jira 故事

> ID：14159898
> 
> 赞同：1
> 
> 时间：2013-01-04T15:22:17.333
> 
> 标签：clearcase, jira, jira-plugin, clearquest, code-collaborator

我们公司在其工作流程中使用工具：

*   IBM Rational ClearQuest（用于错误和功能更改跟踪）
*   IBM Rational Clearcase (Subversion)
*   Code-Collaborator（代码审查软件）
*   Atlassian JIRA（故事管理）

现在我们当前的工作流程如下：

1.  创建视图和活动以更改现有代码。创建活动时，内部工具会创建一个新的 DWO 来跟踪正在执行的工作的状态（工作、检查中、准备提交）。
2.  为了将代码提交回主流，使用 Code-Collaborator 启动代码检查，并在 DWO 中附加了代码审查的链接。
3.  审核完成，代码提交到流中，DWO 关闭。

我们目前缺少 DWO 和 Jira 故事之间的关键关系。仅将 Code-Collab 审查链接到 Jira 故事被认为不如将 DWO 链接到 Jira 故事强（建议 code-collaborator 的“缺陷跟踪和 ALM 工具”不是一个有吸引力的选择。它还可能引入给我们公司带来更高的许可成本）。

例如，当我查看来自 Jira 的一组故事时，我有 DWO 编号，以便我可以收集代码审查以总结文档中的代码更改。

**我的问题**：

是否可以将 DWO 编号推送到 Jira 故事中，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:53:45.003

这将是一个自定义集成：

*   使用 ClearQuest API（如在[此线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=260680)中）附加 Jira 信息
*   使用 Jira CLI（如[本文](https://bobswift.atlassian.net/wiki/display/JCLI/JIRA+Command+Line+Interface)中的 JCLI）将信息（如 ClearQuest DWork Order uid）推送到 Jira 项目（在您的情况下为故事）。

我从未见过这种集成实现，但使用那些 CLI，我想这是可能的。

# python - 最后阻止龙卷风发电机引擎不起作用

> ID：14159903
> 
> 赞同：2
> 
> 时间：2013-01-04T15:22:35.483
> 
> 标签：python, asynchronous, generator, tornado, finally

假设，（使用龙卷风）有人想将大数据传输到慢速客户端，并打印传输的数据量。为此，我编写了这个简单的代码：

```
from tornado import web, ioloop, gen

class MainHandler(web.RequestHandler):
    @web.asynchronous
    @gen.engine
    def get(self):
        print '( start'
        try:
            for i in xrange(100):
                self.write('*' * 100000)  # write ~100KB of data
                yield gen.Task(self.flush)  # wait for reciever to recieve
                print '- wrote', i
        finally:
            print '| finally'
            self.finish()
        print ') finish'

application = web.Application([
    (r"/", MainHandler),
    ])

application.listen(8888)
ioloop.IOLoop.instance().start() 
```

但是这段代码没有按预期工作，例如使用这个简单的客户端：

```
req = urlopen('http://127.0.0.1:8888/')
sys.exit()  # exit without reading response 
```

服务器输出：

```
( start
- wrote 0
- wrote 1
- wrote 2
WARNING:root:Read error on 7: [Errno 104] Connection reset by peer
WARNING:root:error on read
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/iostream.py", line 361, in _handle_read
    if self._read_to_buffer() == 0:
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/iostream.py", line 428, in _read_to_buffer
    chunk = self._read_from_socket()
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/iostream.py", line 409, in _read_from_socket
    chunk = self.socket.recv(self.read_chunk_size)
error: [Errno 104] Connection reset by peer 
```

但既不`finally`也不`finish`打印。

有什么问题？！

**更新：**

我注意到如果我实现`on_connection_close`处理程序，`on_connection_close`回调将被调用，并且控制台中不会打印任何错误。但是这个功能有什么魔力呢？（我已经`RequestHandler`用空体定义了）。

更大的答案：为什么我的发电机不是`close`d？是垃圾收集还是不收集？PEP-342 说 finally 块应该在任何情况下执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T04:34:32.503

带有`finally`子句的生成器是`__del__`在 Python 版本 <= 3.3 中实现的，并且具有其他析构函数的所有限制 - 如果存在引用循环，它们不能保证立即执行。在 Python 3.4 中，这一点得到了改进（[http://www.python.org/dev/peps/pep-0442/](http://www.python.org/dev/peps/pep-0442/)），并且生成器的 finally 子句运行得更加可靠。

# sharepoint - 指定的参数超出有效值的范围。参数名称：服务器相对 URL

> ID：14159904
> 
> 赞同：2
> 
> 时间：2013-01-04T15:22:36.980
> 
> 标签：sharepoint, sharepoint-2010, sharepointdocumentlibrary

我正在尝试使用 MVC 从 SharePoint 文档库下载文档，但是每当我尝试运行我的代码时，都会出现上述错误。我是 SharePoint 的新手，所以请善待。这是我的代码：

网络助手：

```
public Stream DownloadDocument(string SiteURL, string documentName)
{
  ListItem item = GetDocumentFromSP(documentName);

  if (item != null) {
    using (ClientContext clientContext = new ClientContext(SiteUrl)) {
      FileInformation fileInformation = 
        Microsoft.SharePoint.Client.File.OpenBinaryDirect(
          clientContext, 
          item["My Document.docx"].ToString()
        );

      return fileInformation.Stream;
    }
  }

  return null;
} 
```

控制器：

```
public ActionResult Index() 
{
  Stream documentDownload = 
    WebHelper.DownloadDocument(
      "http://MySharePointServer/Docs/Forms/AllItems.aspx", 
      "My Document"
  );

  model.downloadedDoc = documentDownload;

  return view(model)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T20:43:25.990

这一行：

```
Microsoft.SharePoint.Client.File.OpenBinaryDirect(
          clientContext, 
          item["My Document.docx"].ToString() 
```

错了，正确的语法是指定文件的服务器相对 URL：

```
public static FileInformation OpenBinaryDirect(
    ClientContext context,
    string serverRelativeUrl
) 
```

您的行应如下所示：

```
Microsoft.SharePoint.Client.File.OpenBinaryDirect(
      clientContext, 
      "/My Document.docx" 
```

大卫斯特林 - [http://davidmsterling.blogspot.com](http://davidmsterling.blogspot.com) - [http://www.sterling-consulting.com](http://www.sterling-consulting.com) - [http://www.sharepoint-blog.com](http://www.sharepoint-blog.com)

# java - 使用多个线程保存多个 gzip 文件

> ID：14159909
> 
> 赞同：0
> 
> 时间：2013-01-04T15:23:06.437
> 
> 标签：java, multithreading, gzip

我正在尝试提高应用程序中 I/O 的速度，因此我决定使用多个线程来存储它。文件在层次结构 book/symbol/file 中结构化，多个线程可能同时将多个文件保存在同一目录中。当我按顺序保存所有文件时，没有问题。但是，当多线程启动时，有时文件格式错误并且加载它会引发“IOException：无效块”。任何想法为什么在这种情况下并发可能会搞砸？

下面的代码：

```
 private void storeAppendingTimestamps(Series timeSeries) throws MetricPersistException {
        Metric metric = timeSeries.getMetric();
        Path outPutFile;
        try {
            outPutFile = generateOutputFilePath(metric);
            if (!Files.exists(outPutFile)) {
                createNewFile(outPutFile);
            }
        } catch (IOException e) {
            throw new PersistException("Cannot create output file for metric " + metric);
        }
        try (PrintWriter writer = new PrintWriter(new GZIPOutputStream(new FileOutputStream(outPutFile.toFile(), true)), true)) {
            for (SeriesDataPoint dataPoint : timeSeries.getTimeSeriesPoints()) {
                writer.println(String.format("%d %s", dataPoint.getTimestamp().getMillis(), formatPlain(dataPoint.getValue())));
            }
            writer.close();
        } catch (IOException e) {
            throw new MetricPersistException(String.format("IO Exception has occured while persisting metric %s: %s", metric, e.getMessage()));
        }
    } 
```

以及拆分工作的代码：

```
private void persistTimeSeries(Collection<Series> allSeries, CompletionService<Void> executorService) throws MetricPersistException {
        final LoggingCounter counter = new LoggingCounter(logger, "metric series file", 10000);
        for (final MetricTimeSeries series : allSeries) {
            executorService.submit(new Callable<Void>() {
                @Override
                public Void call() throws Exception {
                    persister.persistTimeSeries(series);
                    counter.increment();
                    return null;
                }
            });
        }
            for (int i = 0; i < allSeries.size(); i++) {
                Future<Void> future = executorService.take();
                future.get();
            }
            counter.finish();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:48:44.753

如果您正在寻找性能，那么您几乎肯定会通过在和`BufferedOutputStream`之间引入一个更大的性能提升。`GZIPOutputStram``FileOutputStream`

当您使用它时，添加`OutputStreamWriter`一个正确的编码规范，以便不在您的特定机器上运行的人能够正确解释该文件。

* * *

我看到的一段明显线程不安全的代码是`storeAppendingTimestamps()`：如果你有几个系列会映射到同一个输出文件，那么你就有竞争条件，它们都打开并写入同一个文件（还有一个竞争条件在创建文件时，但我假设这是一个幂等操作）。

如果您可能有多个映射到相同文件名的系列，那么您需要有一个线程安全/种族安全防护。类似于 a`ConcurrentHashMap`的东西，用于存储您正在处理的文件的名称。如果发生碰撞，则退出任务（带有警告）。

# ios - SBJSON ios 5 或原生苹果 JSON

> ID：14159917
> 
> 赞同：1
> 
> 时间：2013-01-04T15:23:57.650
> 
> 标签：ios, json, nsjsonserialization

刚开始在 iOS 中使用 JSON。我有一个使用 SBJSON 的应用程序的早期版本。我正在从头开始重建它，并且想知道是否应该继续使用 SBJSON 或苹果的原生 JSON 支持？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:31:06.083

有些人对此做了一些研究，似乎 NSJSONSerialization 比 SBJSON 性能更高

[http://blog.skulptstudio.com/nsjsonserialization-vs-sbjson-performance](http://blog.skulptstudio.com/nsjsonserialization-vs-sbjson-performance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:31:49.120

我认为使用 SBJSON 类的唯一原因是 iOS < 5.0 兼容性。如果您计划以 iOS 5.0 及更高版本为目标，我会选择原生`NSJSONSerialization`. 在我看来，为 iOS 开发时，Native 几乎总是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T16:04:01.133

请注意，SBJSON（和我修改后的 KSJSON 版本）支持自定义对象序列化，这不仅使它——当然——比 NSJSONSerialization 慢，而且可能正是你所需要的。

NSJSONSerialization 不支持带有自定义类的对象图。

# android - 如何确保在 android 的可扩展列表视图的子视图中只选择单个单选按钮？

> ID：14159918
> 
> 赞同：0
> 
> 时间：2013-01-04T15:24:02.990
> 
> 标签：android, radio-button, selection

我在我的应用程序及其子视图中使用可扩展列表视图，我正在使用单选按钮的自定义列表。这里的问题是我想确保一次只能选择一个单选按钮。如果一个单选按钮已选中，其他应取消选中。这是我正在使用的代码：

```
@Override
    public View getChildView(int groupPosition,int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent)
    {
        m_position = childPosition;

        View l_view = convertView;
        if (l_view == null) 
        {
            LayoutInflater l_vi = (LayoutInflater)m_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            l_view = l_vi.inflate(R.layout.singleradiobutton, null);

            ViewHolder viewHolder = new ViewHolder();
            viewHolder.l_nameRadioButton = (RadioButton) l_view.findViewById(R.id.radioButton);

            l_view.setTag(viewHolder);
        }

        EnteringValuesToArrayList l_enteringValuesInstance = m_itemsOfAdapterArrayList.get(childPosition);
        String l_nameOfContact = l_enteringValuesInstance.GetNameOfEntry();

        if (l_nameOfContact != null)
        {
            ViewHolder holder = (ViewHolder) l_view.getTag();

            if (holder.l_nameRadioButton != null) 
            {
                holder.l_nameRadioButton.setText(l_nameOfContact);
            }

            if(m_timerValue != 0 && l_enteringValuesInstance.GetTimerValueOfEntry() == m_timerValue)
                holder.l_nameRadioButton.setChecked(true);
            else
                holder.l_nameRadioButton.setChecked(false); 

            holder.l_nameRadioButton.setOnClickListener(new OnItemClickListener(childPosition,holder.l_nameRadioButton.getText(),holder.l_nameRadioButton));          
        }
        return l_view;
    }

    private class OnItemClickListener implements OnClickListener
    {           
        private int l_positionOfItemClicked;
        private CharSequence l_text;
        private RadioButton l_radioButton;
        OnItemClickListener(int position, CharSequence text,RadioButton l_nameRadioButton)
        {
            this.l_positionOfItemClicked = position;
            this.l_text = text;
            this.l_radioButton = l_nameRadioButton;
        }
        @Override
        public void onClick(View arg0) 
        {
            l_radioButton.setChecked(true); 
        }
    } 
```

我搜索了很多，但没有得到问题的解决方案。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:26:43.930

你需要`radioButtons`在一个`RadioGroup`. 当组合在一起时，每个`RadioGroup`人一次只能选择一个按钮。否则，它们都可以被选中或不选中。[在此处](http://developer.android.com/reference/android/widget/RadioGroup.html)查看有关它的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:33:08.167

改用 RadioGroup，因为 RadioGroup “用于将一个或多个 RadioButton 视图组合在一起，从而只允许在 RadioGroup 中检查一个 RadioButton”

```
 RadioGroup radioGroup = (RadioGroup) findViewById(R.id.rbtGp1);
    radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            RadioButton rb1 = (RadioButton) findViewById(R.id.rbt1);
            if (rb1.isChecked()) {
                // Do something
            else {
                // Do something else
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:34:19.243

[在这个如何在 ListView 自定义适配器中使用 RadioGroup 中](https://stackoverflow.com/questions/7329856/how-to-use-radiogroup-in-listview-custom-adapter)提出了类似的问题？

您可以根据自己的情况创建自定义视图。

希望这可以帮助。

# iis - 一个ssl证书用于多个站点？

> ID：14159926
> 
> 赞同：2
> 
> 时间：2013-01-04T15:24:31.943
> 
> 标签：iis, ssl, security

我们正在构建一个需要 SSL 的 Web 应用程序，以确保移动的数据是安全的。应用程序的结构是：

> Web 应用程序 - WCF 服务 - 数据库

所以所有与数据库的通信都必须通过 WCF 服务，Web 应用程序不能直接与数据库通信。为确保这是安全的，我们需要在 Web 应用程序和 WCF 服务上设置 SSL。

只有我的本地机器，出于测试目的，我在 IIS 7 中创建了一个自签名证书，使用端口 443 和 IP 地址 *，所以如果配置为需要 SSL，所有站点都应该使用该 1 个证书。

一旦我们投入生产，Web 应用程序和 WCF 服务很可能会在同一台服务器上，1 个 SSL 证书可以以相同的方式配置吗？或者我们是否需要为 Web 应用程序和 WCF 服务分别创建 2 个证书并配置端口和 IP 地址？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:38:28.960

查找 SAN 证书。例如[这个](http://www.digicert.com/subject-alternative-name.htm)。本质上，SAN 证书允许您在一个证书本身中提及多个主机名。请注意，并非所有客户端都支持使用这些证书。我认为大多数（如果不是所有）浏览器都运行良好，Java 原生 HTTP 客户端运行良好（但不是 Java 服务器）

# html - 哪些 HTML 元素即使使用 tabindex 也不能 tabbable？

> ID：14159928
> 
> 赞同：6
> 
> 时间：2013-01-04T15:24:32.740
> 
> 标签：html, focus, keyboard-navigation

即使指定了 tabindex，是否有人拥有**不可选项卡的 HTML (HTML5) 元素列表？**（通过tabbable，我的意思是他们可以通过反复按“tab”键来获得焦点。）

我们知道有些元素默认是可选项卡的，例如`input`或`textarea`。我们还知道，有些元素只有在明确指定 tabindex 时才可以 tabbable，例如`div`和`span`元素。

根据 W3Schools 的说法，“在 HTML5 中，tabindex 属性可以用于任何 HTML 元素”。但是，肯定有一些元素是不可标签的，即使它们有标签索引。例如，`param`元素可选项卡或`head`元素是没有意义的。我也不认为该`option`元素可能是可标签的，但我不确定。而且我更不确定诸如`map`which 可以包含可选项卡元素但通常本身不能选项卡之类的东西。

有人可以给我一个列表，列出所有即使有 tabindex 也永远无法获得焦点的元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T18:44:55.910

由于还没有人提出任何明确的列表，我在一个相当新的 Chrome 版本上进行了一些测试，并提出了以下根本不可选项卡的元素列表：

*   `<base>`
*   `<basefont>`
*   `<embed>`
*   `<head>`
*   `<link>`
*   `<meta>`
*   `<object>`
*   `<param>`
*   `<source>`
*   `<style>`
*   `<title>`
*   `<track>`

不幸的是，由于我只花了几个小时来编写这个列表，它有一些警告：

1.  未在 Chrome 以外的任何浏览器上测试
2.  我跳过了大部分我认为可能是可选项卡的元素（因为它们会有正常显示的内容）
3.  我没有尝试设置任何要显示的内容（除了`<title>`我的评论）

我最惊讶的是以下元素**是可**选项卡的：

*   `<audio>`和`<video>`（惊讶，因为`<embed>`和`<object>`不是）
*   `<br>`和`<wbr>`
*   `<col>`和`<colgroup>`
*   `<frame>`和`<frameset>`（尽管它们更像是一种特殊情况，因为它们在 HTML 中不是技术上有效的元素）
*   `<html>``<body>`（这和从标签的角度来看几乎没有区别）
*   `<optgroup>`并且`<option>`（尽管对它们进行制表符并没有给出任何视觉指示 - 即选择框没有打开）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T18:41:12.243

[HTML 规范列出了元素可聚焦的条件](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#focusable)以及[tabindex 的解释方式](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#sequential-focus-navigation-and-the-tabindex-attribute)。

*   设置了元素的 tabindex 焦点标志。
*   该元素要么正在呈现，要么是表示嵌入内容的画布元素的后代。
*   该元素及其任何祖先都不是惰性的。
*   该元素未被禁用。

定义依赖于被渲染的元素，使用 CSS 你可以渲染*任何*元素。例如，可聚焦`<param>`且均匀的`<title>`and `<basefont>`：

```
<!DOCTYPE>
<title tabindex=0>Test</title>
<basefont tabindex=0>
<style>
head, title {display:block}
basefont, param {content: url(image.png);}
</style>
<object><param tabindex=0></object> 
```

顺便说一句：忽略 W3Schools——通常这不是一个可靠/权威的来源。

# c# - 多列列表框 xaml windows 应用程序项目

> ID：14159931
> 
> 赞同：1
> 
> 时间：2013-01-04T15:24:45.843
> 
> 标签：c#, xaml, listview, listbox, windows-store-apps

我想要一个包含多列和多行的列表框。正是[这里](http://kristofmattei.be/2010/03/16/multi-column-listview/)所描述的。

此解决方案的问题是 Windows 8 应用程序项目不支持“UniformGrid”。那么，如何在 Windows 8 应用程序项目中实现相同的功能？

# html - IE 跳过一个

> ID：14159933
> 
> 赞同：1
> 
> 时间：2013-01-04T15:24:52.670
> 
> 标签：html, css, internet-explorer, coldfusion, coldfusion-10

我有一个查询循环并在表中显示数据。但是我注意到 IE 中有一个奇怪的行为。由于某种原因，它跳过了 a`<td>`并使整个表结构看起来很奇怪。这只发生在 IE 中。

在 IE 中， ![在此处输入图像 sdgdsgd](../Images/c8eb01481887639695fd09f98f83ec0b.png)

在 Chrome 中， ![在此处输入图像描述](../Images/6eec0e78292edaabc639aea2741e86be.png)

~~这是我的 html，~~我的意思是说，*这是我的 cfm*

```
<TABLE id="WorkOrderList">
  <TBODY>
    <cfloop query="qGetClosed">
    <TR class="spacer"><td>&nbsp;</td></TR>
    <TR>
      <TH id="woNum" class="woNum_cls" rowspan="2"> 
        <a href="WorkOrderAssign.cfm?WONUM=#URLEncodedFormat(trim(qGetClosed.WONUM))#&CanAssign=No">#trim(qGetClosed.WONUM)#</a>
      </TH>
      <TH class="woPriority_cls #pClr#">#trim(qGetClosed.PRIORITY)#</TH> 
      <TH class="woLocation_cls">#trim(qGetReqInfo_MyTables.woLocation)#</TH>
      <TH class="woStatus_cls">#trim(qGetClosed.DELAYDESC)#</TH>    
      <TH class="woRequester_cls">#trim(qGetClosed.UD1)#</TH>
      <TH class="woDate_cls">#DATEFORMAT(qGetClosed.REQUESTDATE,"mm/dd/yyyy")#</TH>
      <TH class="woAssigned_cls">
        <DIV class="woAssigned_Bottom">
          <div class="woAssigned_By">
            <cfif #trim(qGetClosed.ASSIGNEDBY)# NEQ ''>
              #trim(qGetClosed.ASSIGNEDBY)#
            <cfelse>
              <i>n/a</i>
            </cfif>
          </div>
          <div class="woAssigned_Date">
            <cfif IsDefined('qGetClosed.SCHEDSTARTDATE') AND #qGetClosed.SCHEDSTARTDATE# NEQ ''>
              #DateFormat(qGetClosed.SCHEDSTARTDATE, "mm/dd/yyyy")#
            <cfelse>
              n/a
            </cfif>
          </div>
          <div class="woAssigned_To">
            <cfif #trim(qGetClosed.ASSIGNEDTO)# IS ''>
              <i>n/a</i>
            <cfelseif #trim(qGetClosed.ASSIGNEDTO)# IS 'n/a'>
              <i>n/a</i>
            <cfelse>
              #trim(qGetClosed.ASSIGNEDTO)#
            </cfif>
          </div>
        </DIV>
      </TH>
      <TH class="woDate_cls">#DATEFORMAT(qGetClosed.COMPLETIONDATE,"mm/dd/yyyy")#</TH>
      <TH class="woDuration_cls" rowspan="2">#trim(qGetClosed.DURATION)# day(s)</TH>
    </TR>
    <TR>
      <TH class="woDescription" colspan="7">&nbsp;#trim(qGetClosed.DESCRIPTION)#</TH>   
    </TR>
    </cfloop>
  </TBODY>
</TABLE> 
```

这是我的CSS，

```
/*---------Entire List Work Order------*/
.woNum_cls{width:65px; text-transform:uppercase;}
.woReminder_cls{width:80px; text-align:center;}
.woPriority_cls{width:15px;}
.woLocation_cls{width:125px;}
.woStatus_cls{width:125px; left:500em;}
.woRequester_cls{width:100px;}
.woDate_cls{width:100px;}
.woAssigned_cls{width:160px;}
.woDuration_cls{width:78px;}

TABLE#WorkOrderList{
  border-collapse:collapse; border-spacing:0px; border:0px;
  width:975px;
  display:table;
}
TABLE#WorkOrderList THEAD TH{
  color: #000; background-color:#9999FF;
  border: 1px solid black; border-spacing:0px;
  text-transform:uppercase; text-align:left;
  font-weight:bold;
  padding:0px 2px 0px 3px;
}
TABLE#WorkOrderList TBODY TH{padding:0px 2px 0px 3px; line-height:none; display:table-cell;}
TABLE#WorkOrderList TBODY TH:not(.woDescription){font-weight:bold;}
TABLE#WorkOrderList TBODY TH:not(.woPriority_cls){background-color:#E6F2F2;}

.woAssigned .woAssigned_Top{text-align:center;}
.woAssigned .woAssigned_Bottom{text-align:left;}

.woAssigned_Bottom .woAssigned_By{width:25px; float:left;}
.woAssigned_Bottom .woAssigned_Date{width:90px; float:left; text-align:center;}
.woAssigned_Bottom .woAssigned_To{width:30px; float:right;}    

TABLE#WorkOrderList TBODY TH{border:1px dotted #006A35;} 
TABLE#WorkOrderList #woNum{border:1px solid blue;}
TABLE#WorkOrderList #woReminder{border:1px solid blue;} 
```

这让我发疯，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:06:54.553

IE9 中有一个错误，它很难处理巨大的表格，并在 td 标记之间的空白处创建“幽灵单元”。（去图吧？）

修复的最佳方法是尝试删除标签之间的所有空白。可能会使标记看起来很时髦，但你可以通过这样做来作弊：

```
 ...</td><!---//using a CF comment in the white space hides it from the browser, and helps poor IE..
  ---><td>... 
```

# linux - 为什么在发送密码后使用 Expect 自动化 SFTP 会挂起？

> ID：14159935
> 
> 赞同：1
> 
> 时间：2013-01-04T15:24:53.310
> 
> 标签：linux, automation, passwords, sftp, expect

我正在尝试自动将一些文件从我的 Linux 服务器上传到支持 FTP 的 Windows 服务器。我成功地使用 SFTP 手动执行此操作，然后发出*put*命令。但是，当从 cron 调用时，我的脚本会一直停止输入密码。

以下是我尝试使用的代码：

```
#!/usr/bin/expect
#!/bin/sh
clear
spawn sftp remoteuser@43.123.0.10
expect "password"
send "world"
expect eof 
```

就目前而言，它每次都停止请求密码。为什么没有`send "world"`完成密码对话框？

**更新：**

```
#!/usr/bin/expect
#!/bin/sh
clear
spawn sftp remoteuser@43.123.0.10
expect "remoteuser@43.123.0.10's password:"
send "world"
expect eof 
```

现在我收到以下错误：

```
xml_reports.sh: line 5: spawn: command not found
couldn't read file "remoteuser@43.123.0.10's password:": no such file or directory
xml_reports.sh: line 7: send: command not found
couldn't read file "eof": no such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:44:52.193

试试这样：

```
#!/bin/bash
expect -c "
spawn sftp remoteuser@XX.XX.XX.XX
expect \"password\"
send \"PASSWORD\r\"
interact " 
```

示例：[http ://www.techtrunch.com/scripting/lazy-admins-part-2](http://www.techtrunch.com/scripting/lazy-admins-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:32:49.093

运行时需要使用参数。阅读[这篇](http://code.seanodonnell.com/?id=21)文章。它解释了如何正确地做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:33:23.177

发生的事情是 Expect 仍在等待模式到达（直到超时），可能是“密码”不在 sftp 的提示中，它可能是“密码”或其他东西。

# linux - Linux 权限

> ID：14159938
> 
> 赞同：1
> 
> 时间：2013-01-04T15:24:56.073
> 
> 标签：linux, permissions

*我知道已经有很多这样的问题，但我仍然找不到以下问题的答案。*

* * *

## 资源

*   我有两个用户
    *   `erik`
    *   `www-data`
*   我有一个文件
    *   `/home/erik/foo.yaml`

* * *

## 列出组

```
erik@erik:~$ groups erik
erik : erik www-data # ... and other irrelevant groups
erik@erik:~$ groups www-data
www-data : www-data erik 
```

* * *

## 列出权限

```
erik@erik:~$ ls -lhd foo.yaml
-rwxrwx--- 1 www-data www-data 216 jan  4 15:43 foo.yaml 
```

* * *

## 没有权限

```
erik@erik:~$ echo "foo" > foo.yaml 
bash: foo.yaml: Permission denied
erik@erik:~$ cat foo.yaml 
cat: foo.yaml: Permission denied 
```

* * *

## 身份证输出

```
erik@erik:~$ id
uid=1000(erik) gid=1000(erik) grupper=1000(erik) # ... other irrelevant groups 
```

* * *

## 问题

为什么我在这里获得许可被拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:04:58.757

将新用户添加到组时，您需要注销并重新登录才能访问组权限。或者[newgrp](http://linux.die.net/man/1/newgrp)可以在本地环境中做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:37:00.837

```
erik@ubuntu-vm:~$ groups erik
erik : erik www-data
erik@ubuntu-vm:~$ groups www-data
www-data : www-data erik
erik@ubuntu-vm:~$ ls -l /tmp/foo.yaml 
-rwxrwx--- 1 www-data www-data 3 Jan  4 18:49 /tmp/foo.yaml
erik@ubuntu-vm:~$ echo "Hi" > /tmp/foo.yaml 
erik@ubuntu-vm:~$ cat /tmp/foo.yaml 
Hi 
```

我认为您在文件中有一些属性。您可以粘贴以下命令的输出吗：

```
lsattr /path/to/file 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T15:51:16.940

-rwxrwx--- 1 www-data www-data 216 jan 4 15:43 foo.yaml

这里文件的所有者是“www-data”，您的记录为“erik”，由于这个被拒绝的权限问题即将到来。尝试使用命令“chown username somefile”更改文件所有权。或者您可以使用 sudo 命令，例如 'sudo echo "foo" > foo.yaml'

# php - php 去除标签，除了 '<>' （书名）

> ID：14159940
> 
> 赞同：3
> 
> 时间：2013-01-04T15:25:00.240
> 
> 标签：php, strip-tags

如何删除 PHP 中的所有 HTML 标签，除了`<>`字符？

```
//There's other HTML tags, like h1, div, etc.
echo strip_tags('<gone with the wind> <p>a hotest book</p>'); 
```

这将返回`a hotest book`，但我需要保留书名。我需要函数返回`<gone with the wind> a hotest book`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:28:03.790

您应该考虑使用`&lt;`(<) 和`&rt;`(>)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:44:16.320

下面将利用 DOM 查找任何不是有效 HTML4 元素的元素，并将其视为书名。然后这些将被列入白名单`strip_tags`。

```
libxml_use_internal_errors(true);
$dom = new DOMDocument;
$dom->loadHTML($html);

echo strip_tags($html, implode(',', 
    array_map(
        function($error) {
            return '<' . sscanf($error->message, 'Tag %s invalid')[0] . '>';
        },
        libxml_get_errors()
    )
)); 
```

[在线演示](http://codepad.viper-7.com/00I3iL)

请注意，任何以有效 HTML 标签开头的书名都将被视为有效 HTML，因此会被删除（例如“证据主体”或“Head First PHP”）。另请注意，它`<gone with the wind>`被认为是具有“with”、“the”和“wind”属性的元素“gone”。对于有效元素，您可以检查它们是否只有空属性，如果没有，则删除它们，但是当标题仅包含有效元素名称时，这仍然不是 100% 准确。此外，您可以检查结束标记，但我不知道如何使用 DOM 执行此操作（但 XMLParser 可以检测到它们）。

无论如何，为这些书名找出更好的格式，例如使用名称空间或使用与尖括号不同的分隔符，将大大提高您正确执行此操作的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:49:08.217

你也可以更容易地做到这一点。

```
 <?php
   $string = htmlspecialchars("<gone with the wind>");
   echo strip_tags( "$string <p>a hotest book</p>");
   ?> 
```

这将输出：

```
 <gone with the wind> a hotest book 
```

[**在这里演示**](http://codepad.viper-7.com/hEBlUK)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T15:40:07.303

这是一个简单但对您来说并非万无一失的解决方案。

**PHP**

```
$data = "<gone with the wind> <p>a hotest book</p>";
$out = preg_replace("/\<\w+\>|\<\/\w+\>/im", "", $data);

var_dump($out); 
```

**输出**

```
string '<gone with the wind> a hotest book' (length=34) 
```

**会匹配**

```
<p>text</p>
<anything>text</anything> 
```

**不匹配**

就像之前所说的那样，代码无法知道书名是什么样的。

```
<img src="url"> 
```

虽然，如果您希望您的数据是简单的`<p>`标签，那么这将起作用。

疯狂的解决方案，我想我会把它扔在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:37:44.173

```
$string = '<gone with the wind> <p>a hotest book</p>';
$string = strip_tags(preg_replace("/<([\w\s\d]{6,})>/", "&lt;$1&gt;", $string));
$string = html_entity_decode($string); 
```

以上将转换任何超过六个字母的“标签”`<>`以`&lt;&gt;`允许您使用strip_tags。

您可能需要根据传入的数据对这六个值进行试验。如果你得到一个标签，`<article>`你可能需要把它推得更高。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T15:57:59.777

我能想到的最好的事情就是做这样的事情，因为我不知道会使用什么类型的标签，我只是假设所有这些，这应该删除任何有效的 html 标签，而不仅仅是那些看起来可以的标签成为标签。

```
<?php
$tags = array("!DOCTYPE","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr");

$string = "<gone with the wind> <p>a hotest book</p>";

echo preg_replace("/<(\/|)(".implode("|", $tags).").*>/iU", "", $string); 
```

最终输出如下所示：

```
<gone with the wind> a hotest book 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T16:22:54.677

您将在这方面不走运，因为您无法知道其中的哪些内容`<>`是 HTML 标记，哪些是书名。你甚至不能写一些东西来寻找看起来像标签但实际上不是有效的 HTML 标签的东西，因为你可能会得到 Monkees 1968 年电影“Head”的记录，`<Head>`这肯定是一个有效的HTML 标记。

您需要与数据的供应商一起解决这个问题，然后才能使用 PHP`strip_tags`函数。

# java - 使用 webapp (sencha, ajax) 设置铃声

> ID：14159943
> 
> 赞同：-3
> 
> 时间：2013-01-04T15:25:18.037
> 
> 标签：java, android, iphone, ajax, extjs

是否可以使用 web 应用程序（例如使用 sencha）而不是本机应用程序设置铃声？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:37:11.273

您已经在自己提出建议（尽管这取决于您认为 Web 应用程序是什么）。有许多框架可让您使用 javascript（例如，尝试 appcelerator Titan）或 html 创建应用程序。然后，您可以使用 javascript 访问手机的本机功能。

我不确定 appcelerator 钛是否可以让您更改铃声或让电话响起......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:31:38.447

简短的回答：不，这是不可能的。

# zend-framework - 站点地图 url 编码

> ID：14159944
> 
> 赞同：0
> 
> 时间：2013-01-04T15:25:20.313
> 
> 标签：zend-framework, url-rewriting, sitemap, urlencode

为谷歌生成站点地图时我应该使用什么编码？我想要这样的网址：

```
example.com/supplì-rome 
```

而不是：

```
example.com/suppl%C3%AC-rome 
```

不确定[谷歌](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35653)是否需要第二种形式。我希望用户像第一种情况一样分享漂亮的链接。我正在使用 Zend Framework 路由器来处理好的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:36:18.373

Google 要求您的站点地图文件采用**UTF-8**编码且[**RFC-3986**](http://asg.web.cmu.edu/rfc/rfc3986.html)有效。

以下是使用非 ASCII 字符 (ü) 以及需要实体转义 (&) 的字符的 URL 示例：

```
 http://www.example.com/ümlat.html&q=name 
```

下面是相同的 URL，实体已转义：

```
 http://www.example.com/%C3%BCmlat.html&amp;q=name 
```

不用担心。Google 会将您的 URL 翻译回搜索结果中的人类可读格式。您可以[在此处](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35653)找到更多信息。

# r - 是否可以在没有 pandoc 的情况下使用 Rstudio 直接从 .Rmd 转换为 LaTeX？

> ID：14159948
> 
> 赞同：6
> 
> 时间：2013-01-04T15:25:31.683
> 
> 标签：r, latex, knitr, rstudio, pandoc

可重现的示例（如果您有 rstudio）：

*   文件 | 新 | R 降价
*   编织成html，另存为`test`：

![针织者](../Images/ff2a0e9fa4627c7478a5a913a74b1770.png)

导航到工作目录

*   在终端（安装 pandoc）中输入

    pandoc -s test.md -t 乳胶 -o test.tex

（结果粘贴[在这里](http://pastebin.com/Qz5jhAxH)）

*   使用 pdflatex 转换为 pdf（请参见[此处](https://dl.dropbox.com/u/15008199/egs2stay/test.pdf)的结果）

或者直接转到 .pdf 跳过 tex 阶段：

```
pandoc -s test.md -t latex -o test2.pdf 
```

结果很好，但考虑到 knitr 合并了 sweave，这似乎需要很多步骤。它应该能够直接从 .Rmd 转换为 .tex 或 .pdf 。对？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T16:14:24.200

这记录在[http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering](http://www.rstudio.com/ide/docs/authoring/markdown_custom_rendering)中；您应该将 .Rprofile 添加到您的目录，例如：

```
options(rstudio.markdownToHTML = 
  function(inputFile, outputFile) {      
    system(paste("pandoc", shQuote(inputFile), "-o", shQuote(outputFile)))
  }
) 
```

可能需要进行一些修改。太糟糕了，由于 RStudio 中的错误，同样的方法不适用于旋转。

[http://support.rstudio.org/help/discussions/problems/4128-spin-and-rprofile](http://support.rstudio.org/help/discussions/problems/4128-spin-and-rprofile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-21T02:04:27.090

对于偶然发现这个老问题的任何人，现在（已经有一段时间了）一个`keep_tex: true`参数可以保留由 Pandoc 创建的中间 .tex 文件。在 YAML 标头中这样调用它：

```
---
output:
  pdf_document:
    keep_tex: true
--- 
```

# .net - 从列表（列表（对象））中选择然后拆分

> ID：14159954
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:25:55.217
> 
> 标签：.net, vb.net, algorithm, linq

我在 VB.NET 中对字符集合进行了分组

就像是

```
HashTable( 
          "A", List(OF Char) [ A,A,A,A,A,A,A,A],
          "B", List(OF Char) [ B,B,B,B,B],
          "C", List(OF Char) [ C,C,C]
         ) 
```

**我想用Linq**将该集合拆分为**2+1** “页面”（具有 3 个嵌套集合的新集合），每个包含相同数量的每个字符

例如，从上面的哈希表结果应该是

```
List( 
     list(of char) [ A,A,A,A,B,B,C ]
     list(of char) [ A,A,A,A,B,B,C ]
     list(of char) [ B,C ]  // LAST PAGE CONTAINS 
    ) 
```

对不起我的英语...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:09:54.940

```
Dim input As New Dictionary(of Char, Char())
input.Add("A"c, {"A"c, "A"c, "A"c, "A"c, "A"c, "A"c, "A"c, "A"c})
input.Add("B"c, {"B"c, "B"c, "B"c, "B"c, "B"c})
input.Add("C"c, {"C"c, "C"c, "C"c})

Dim output As New List(of List(Of Char))
output.Add(input.SelectMany(Function(c) Enumerable.Repeat(c.Key, c.Value.Count \ 2)).ToList())
output.Add(output(0).ToList())
output.Add(input.SelectMany(Function(c) Enumerable.Repeat(c.Key, c.Value.Count Mod 2)).ToList()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:51:17.393

这至少接近您想要的结果（结果列表包含 3 个带有 (6/5/5) 个字符的列表）：

```
Dim dict = New Dictionary(Of String, List(Of Char)) From {
   {"A", New List(Of Char) From {"A"c, "A"c, "A"c, "A"c, "A"c, "A"c, "A"c, "A"c}},
   {"B", New List(Of Char) From {"B"c, "B"c, "B"c, "B"c, "B"c}},
   {"C", New List(Of Char) From {"C"c, "C"c, "C"c}} 
```

}

```
Dim pageCount = 3
Dim allChars = dict.Values.SelectMany(Function(chr) chr)
Dim result As List(Of List(Of Char)) = allChars.
    Select(Function(chr, i) New With {.Char = chr, .Index = i}).
    GroupBy(Function(x) x.Index Mod pageCount).
    Select(Function(g) g.Select(Function(x) x.Char).ToList()).
    ToList() 
```

这通过使用[operator](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.71%29.aspx)将字典属性中的所有字符拆分`Values`为所需的页数（在您的示例中为 3）。`Enumerable.GroupBy`[`Mod`](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:49:50.643

嘿 - 令人惊讶的是你可以用 LINQ 做些什么……这与蒂姆的略有不同

（对不起，我的VB真的很生疏，不过这个应该或多或少可以翻译）

```
var table = new Dictionary<char,List<char>>()
{
    {'A', new List<char>() {'A','A','A','A','A','A','A','A'}},
    {'B', new List<char>() {'B','B','B','B','B'}},
    {'C', new List<char>() {'C','C','C'}},      
};

var result = table
    .Select(kvp => new [] {
            new string(kvp.Key, kvp.Value.Count / 2), 
            new string(kvp.Key, kvp.Value.Count / 2), 
            new string(kvp.Key, kvp.Value.Count % 2 == 0 ? 0 : 1) })
    .Aggregate((acc, entry) => new [] {
            acc[0] + entry[0], 
            acc[1] + entry[1], 
            acc[2] + entry[2]})
    .Select(s => s.ToCharArray().ToList())
    .ToList(); 
```

# ruby-on-rails - 单击列上的排序表

> ID：14159960
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:26:35.393
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我在对列进行排序时遇到问题。我有一个用数据填充的表，它是用`DESC`. `ASC`我想这样做，当单击其中一列时，它将在和之间来回变化`DESC`。

当我单击特定列时，正在发送这些参数：

```
Parameters: {"search"=>{"meta_sort"=>"date.asc"}} 
```

以及只是进行与最初访问时相同的查询。

这是我的控制器代码：

```
def dashboard
  @search = Quality.search(params[:search])
  @qualities = @search.page params[:page]

  @qualities_failed = Quality.where('last_disposition_state = ?','fail').order("strftime('%Y',date) DESC, julian_date DESC, lot DESC, time DESC").limit(10).search(params[:search])
  @qualities_passed = Quality.where('last_disposition_state = ?','pass').order("strftime('%Y',date) DESC, julian_date DESC, lot DESC, time DESC").limit(10).search(params[:search])

  respond_to do |format|
    format.html
    format.js
    format.xlsx {
      send_data Quality.order("strftime('%Y',date) DESC, julian_date DESC, lot DESC, time DESC").limit(10).to_xlsx.to_stream.read, :filename => 'passed.xlsx', :type => "application/vnd.openxmlformates-officedocument.spreadsheetml.sheet"
    }
  end
end 
```

我想知道如何获取这些参数，并据我所知，做出一个`if`声明来评估参数并根据它对表格进行排序。

```
if -> == ASC then (query with ASC instead of DESC) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:29:36.630

您希望在 Rails 中还是在浏览器中进行排序？

由于浏览器已经拥有数据，因此有充分的理由认为排序应该在页面内的 JavaScript 中进行。用户的体验会更好/更快，并且您不会因为另一个请求而加重 Rails 和托管硬件和数据库的负担。

有许多用于 jQuery 和其他 JavaScript 库的 JavaScript 插件可以很容易地做到这一点。

# ios - iOS 上的 com.facebook.sdk 错误 2

> ID：14159965
> 
> 赞同：32
> 
> 时间：2013-01-04T15:26:53.740
> 
> 标签：ios, facebook, cordova, phonegap-plugins, facebook-ios-sdk

我有一个可以在 iOS 和 Android 上运行的 Phonegap 应用程序。该应用程序具有 Facebook 登录功能，该功能直到几天前才有效。我们的一些 beta 测试人员报告了“无法完成 com.facebook.sdk 错误 2 的操作”错误。这些测试人员的设备各不相同：iPhone 5、iPhone 4s、iPod Touch、iOS 5.1.1 和 iOS 6.0。

我们使用最新的 Facebook SDK 和 Phonegap Facebook 登录插件 ( [https://github.com/davejohnson/phonegap-plugin-facebook-connect/](https://github.com/davejohnson/phonegap-plugin-facebook-connect/) )。

我做了一些研究，发现可能发生此错误的原因如下：

*   我的 info.plist 文件中的 BundleIdentifier 和 BundleURLName 与我的 Facebook 应用程序设置中 Native iOS 应用程序下的 Bundle ID 不匹配。
*   该应用程序仍处于沙盒模式
*   该应用在 Facebook 设置中被禁用（设备设置 -> Facebook -> 允许这些应用使用您的帐户）。
*   iOS 6.0 不允许同时请求读写权限（不确定我是否有这个权限）。

情况如下：

*   BundleIdentifier 和 BundleURLName 匹配。
*   该应用程序未处于沙盒模式。
*   **该应用未出现在每个用户的“允许这些应用使用您的帐户”中**
*   据说 Phonegap 插件的构建者已经修复了 iOS 6.0 权限错误（[https://github.com/davejohnson/phonegap-plugin-facebook-connect/pull/216](https://github.com/davejohnson/phonegap-plugin-facebook-connect/pull/216)）

这是一个非常不一致的错误（在我的情况下）。如果我在“允许这些应用程序使用您的帐户”中关闭应用程序（在我的情况下，应用程序在此处列出），我只能自己重现错误，但我可以通过再次允许应用程序轻松修复错误。目前大多数测试人员（不再）没有这个错误，但错误仍然存​​在于 iPod 上（该应用程序也未在“允许这些应用程序使用您的帐户”中列出）。

有谁知道为什么我有这个错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T11:15:03.483

事实证明：com.facebook.sdk 错误 2 可以转化为许多事情。我正在寻找某种 Facebook SDK 错误翻译表，但我找不到。就我而言： **com.facebook.sdk 错误 2 发生是因为连接超时。收到此错误的用户网络/WiFi 连接不良**。

我们实施了一个错误记录系统，每次登录 Facebook 时发生错误时都会记录错误详细信息。在这些日志中，我们可以看到经常发生 com.facebook.sdk 错误 2，但每次用户在几秒钟后尝试再次登录时，它都会得到解决。

这可能是由于我无法找到正确的文档，但我对这些 SDK 错误的模糊性感到非常沮丧。有很多关于权限询问的文档（这可能导致 com.facebook.sdk 错误 2），但显然这个错误可能是由更多的事情引起的。很高兴看到这也记录在某个地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-15T19:21:20.513

这发生在我正在使用的应用程序中。我可以通过转到我的 iPhone 设置，选择 Facebook，点击我的名字，然后单击“删除帐户”来绕过它。

之后，我可以毫无问题地使用该应用程序登录。

我回到设置 | facebook 并重新提交了我的凭据。

该应用程序仍然可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-12T06:09:23.480

当我忘记检查 Native iOS App（在 Facebook 开发者页面中）并输入我的 Bundle ID 时，我遇到了这个错误，这与 Xcode 项目中的 Bundle 标识符相同。（最后包括你的项目名称。）我还在 Facebook 开发者页面中设置了启用沙盒模式的设置。我也禁用了沙盒模式来完成这项工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-23T16:13:32.673

就我使用旧的 iOS 5.0 以获得更大的设备覆盖率而言，我一直在弄清楚这个错误的原因。我刚刚通过 facebook 请求调试收到错误 400。所以最后，我发现原因是 FBSession 的未知**FBSessionDefaultAudience**（**在**6.0+ 进行测试，原生 facebook api 给了我一个错误原因）。当我使用

 **```
+ (BOOL)openActiveSessionWithPublishPermissions:(NSArray*)publishPermissions
                                defaultAudience:(FBSessionDefaultAudience)defaultAudience
                                   allowLoginUI:(BOOL)allowLoginUI
                              completionHandler:(FBSessionStateHandler)handler; 
```

这个错误终于消失了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-10T07:14:18.280

首先尝试：

```
Go to Settings app -> Facebook -> Your App -> Switch it off and back on again. 
```

这对我有用，并且不需要我实际删除 fb 帐户并按照@seans23 的建议重新登录。如果它不起作用，我会尝试下一次，但这显然在重置状态方面确实有技巧。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-11T15:28:34.150

这种方法对我有用。(iOS 8)

上下文：

*   FB“登录”按钮未在 Safari 中打开 FB 应用或 FB
*   弹出 FB SDK 错误。2.
*   “我的应用程序”未显示在 FB 设置中以便启用使用。

解决方案：

*   清除 Safari Web 缓存（可能是可选的）
*   删除 Facebook 应用
*   删除 Facebook 信使
*   安装您的应用程序并登录

这个想法是删除Facebook 应用程序**和**Messenger。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-21T13:53:52.287

对我来说，原因是我在模拟器上测试我的应用程序。我想分享一张照片，但没有出现对话框，所以我插入了我的 iPhone，之后一切都很顺利！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-16T09:27:28.463

我们有同样的问题。事实证明，原因实际上是在 FB 端超时，特别是如果在“FB 登录”页面仍然打开并且用户单击“取消”时发生此超时。在这种情况下，总是会重新调整错误 2。因此，如果您想重复并测试这种情况，只需在连接 FB 时单击“取消”按钮。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-14T21:32:40.887

在我的情况下，我使用我的公司帐户创建了该应用程序，但忘记添加我的个人资料和开发人员角色。在我想通之后，一切都很顺利。

干杯。**

# jsf - 是否可以在 actionListener 之前调用 setPropertyActionListener

> ID：14159967
> 
> 赞同：17
> 
> 时间：2013-01-04T15:26:57.660
> 
> 标签：jsf, jsf-2

我目前遇到 JSF 执行顺序的问题。

查看我的示例代码：

```
<p:commandButton action="update.xhtml" ajax="false"
                        icon="ui-icon-pencil"
                        actionListener="#{marketingCodeBean.initForUpdate}">
    <f:setPropertyActionListener
        target="#{marketingCodeBean.marketingCode}" value="#{code}"></f:setPropertyActionListener>
</p:commandButton> 
```

我想使用 setPropertyActionListener 设置一个 bean 属性，并对 actionListener=initForUpdate 做一些处理。但是JSF默认的执行顺序是相反的，actionListener在setPropertyActionListener之前。这个问题有干净的解决方法吗？

我正在考虑拥有一个 actionListener 并将 bean 参数传递给它，但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-04T15:30:14.943

这确实是预期的行为。动作监听器（`actionListener`和`<f:actionListener>`）`<f:setPropertyActionListener>`都按照它们在组件上注册的顺序被调用，`actionListener`属性在前。`actionListener`除了将后面的方法添加为a `<f:actionListener>`（应该引用接口的具体实现类）之外，不可能以这种方式更改顺序[`ActionListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ActionListener.html)。

```
<p:commandButton ...>
    <f:setPropertyActionListener target="#{marketingCodeBean.marketingCode}" value="#{code}" />
    <f:actionListener type="com.example.InitForUpdate" />
</p:commandButton> 
```

更好的是只使用`action`而不是`actionListener`. 它在所有动作监听器*之后*被调用。动作侦听器旨在“准备”一个动作，并将它们用于业务动作实际上是不好的做法。

```
<p:commandButton ... action="#{marketingCodeBean.initForUpdate}">
    <f:setPropertyActionListener target="#{marketingCodeBean.marketingCode}" value="#{code}" />
</p:commandButton> 
```

和

```
public String initForUpdate() {
    // ...

    return "update.xhtml";
} 
```

### 也可以看看：

*   [action 和 actionListener 之间的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)- 说明何时使用其中一个。

# c - Turbo C 中的 int 指针不应该是 4 字节吗？

> ID：14159971
> 
> 赞同：1
> 
> 时间：2013-01-04T15:27:54.580
> 
> 标签：c, pointers, turbo-c

在 Turbo C 编译器中，使用 sizeof() 运算符时，int 指针的大小显示为 2 个字节。现在，如果我打印一个 int 变量的地址，它会是一个 8 位的十六进制数，这使得地址的大小为 32 位（或 4 个字节）。

那么，为什么 Turbo 编译器会显示 2 字节大小的指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:34:05.250

您的程序是在小内存模型下编译的，这意味着您的整个数据空间占用的空间不超过 64K。当程序启动时，DS 寄存器指向该数据空间，因此指针只需为 16 位即可引用数据空间中的任何位置。

在中型和大型内存模型中，数据空间可能大于 64K，并且您会发现指针是 32 位的。

请参阅 Alok 的评论。请参阅[gcc](http://gcc.gnu.org)进行替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:35:49.103

我没有使用过 Turbo C，但我相信它是一个旧的 16 位 DOS/Windows 编译器。16 位程序有近和远指针。Near 指针为 2 个字节，只能指向当前段。远指针是一个 2 字节段和一个 2 字节偏移量，它们被移位并相加以提供 20 位寻址。

您看到的 8 位数字是添加到当前段的移位值的 2 字节指针。请参阅 x86 内存分段：[http ://en.wikipedia.org/wiki/X86_memory_segmentation](http://en.wikipedia.org/wiki/X86_memory_segmentation)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T00:30:23.497

真正的答案取决于您使用的是 Turbo C 中的哪个设置。指针可以是 16 位或 32 位，具体取决于它们是“近”还是“远”指针。远指针可以通过具有 16 位的段部分和 16 位的偏移部分来寻址那个时代（大约 20 多年前）的 PC 将拥有的 1MB 内存范围的“全部”。这些值组合为`(segment << 4) + offset`。

有代码和数据空间的“模型”确定您是否获得数据和/或代码的近或远指针。

该页面描述了不同的模型： [http](http://www.tti.unipa.it/~ricrizzo/KS/Data/PBurden/chap6.msdos.memory.html) : //www.tti.unipa.it/~ricrizzo/KS/Data/PBurden/chap6.msdos.memory.html（虽然它错误地指出地址可以达到256MB - 它应该是1MB ，当然，由于最后 64KB 是“BIOS”，而 A0000-EFFFF 之间的内存是“内存映射硬件”，实际上您最多只能使用 64KB [如果您“翻转”A20-gate，您可以使用1MB 以上的 64KB-16 字节作为 RAM，假设有 1MB 以上的 RAM])

当然，就像其他人所说的那样，停止使用在世界上大多数国家/地区获得驾驶执照的足够老的编译器。现在还有其他更好的产品（无论您对“更好”的定义是什么——除非“来自软盘”被定义为更好）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T15:34:47.607

您可能有一个 16 位版本的 Turbo C，这就是`int`该编译器的大小：[http ://www.cs.technion.ac.il/~nikol/material/types_sizes.pdf](http://www.cs.technion.ac.il/~nikol/material/types_sizes.pdf)

事实上，Turbo C 的所有版本显然都是 16 位的。

正如其他人已经建议的那样，为自己准备一个现代 C 编译器，例如`gcc`or `clang`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T12:23:29.297

曾经有一个计算机只在 DOS 上运行的时代。当时操作系统的启动是实模式启动。所以在实模式操作系统中，操作系统只能使用 1MB 的地址空间。turboc 实际上是为实模式制作的，所以它被称为 16 位。turboc 不知道您计算机的 RAM 是什么，或者处理器是 16 位、32 位还是 64 位。所以在 turboc 中，指针总是 2 bytes 。.但是如果您更改选项>>编译器>>模型下的设置并将其设置为巨大。然后它使用两个寄存器完全达到 1 MB 地址空间。2个字节，在这种情况下，指针可能是或将是4个字节

# scala - fold 产生一个元组（避免多次遍历输入）

> ID：14159978
> 
> 赞同：1
> 
> 时间：2013-01-04T15:28:08.963
> 
> 标签：scala, fold

我有一个列表，想用它来生成三个列表。我可以通过两种过滤器应用来做到这一点：

```
val z_out = zs.filter(p1)
val z_in = zs.filter(p2)
val z_split = zs.diff(z_out union z_in) 
```

我可以通过一次遍历列表来做到这一点吗？如：

```
val (z_out, z_in, z_split) = zs.foldLeft(...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:41:56.130

你可以，只要 fold 的结果是一个元组：

```
scala> val (a,b,c) = Nil.foldLeft((1,2,3))((x,y) => x)
a: Int = 1
b: Int = 2
c: Int = 3 
```

# javascript - 如何在 javascript 闭包中测试函数

> ID：14159980
> 
> 赞同：2
> 
> 时间：2013-01-04T15:28:18.670
> 
> 标签：javascript, tdd, closures

这似乎是不可能的（而且可能是），但我正在尝试更多的 TDD，而且我一直在用闭包碰壁。说我有以下内容：

```
function createSomething(init) {
    function privateMethod(param) {
        return init[param];  //assuming this is more complicated, how can you test it?
    }

    function getData() {
        return init.data;
    }

    function getValue(name) {
        if (name === "privateNode" || typeof name !== "string") {
            return "permissionDenied";
        }
        return privateMethod(name);
    }

    return {
        getData : getData,
        getValue: getValue
    };
} 
```

抛开这段代码可能不是我观点的最佳说明，并假设“privateMethod”比上面的要复杂得多，有没有办法对“privateMethod”之类的方法运行单元测试或者是你能做的最好的是测试createSomething创建的对象吗？我问是因为我的应用程序的大部分都隐藏在闭包中。我在这方面非常不了解，但在我看来，这是 javascript 和 tdd 的弱点。上面没有 tdd 的代码的小提琴在这里：http: [//jsfiddle.net/QXEKd/](http://jsfiddle.net/QXEKd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:47:56.607

[您可以通过向构造函数添加额外的参数](https://stackoverflow.com/a/6626263/1615483)或硬编码提前返回，很容易地将函数（或函数、变量等的*对象*）从闭包中“走私”出来。smuggled 函数应该仍然有从它被偷运的地方的闭包，除非你正在做类似 evil 的事情。`eval`

值得注意的是，如果您仅出于测试目的而将此类功能取出，则最好在将其发布到您的网站之前注释掉或以其他方式删除代码以访问这些代码，这样就不会被滥用。另外，请注意`this`，如果您正在使用它，它将根据调用函数的方式而改变。

例如[_](http://jsfiddle.net/rEDMh/)

```
function createSomething(init, aaa) {
    function privateMethod(param) {
        return init[param];  //assuming this is more complicated, how can you test it?
    }

    function getData() {
        return init.data;
    }

    function getValue(name) {
        if (name === "privateNode" || typeof name !== "string") {
            return "permissionDenied";
        }
        return privateMethod(name);
    }
    // ----------------------------------
    if(aaa) return privateMethod;
    // ----------------------------------
    return {
        getData : getData,
        getValue: getValue
    };
}

var something = createSomething({
    privateNode : "allmysecrets",
    id : "1234",
    data : {
        stuff : "32t97gfhw3hg4"
    }
}, 1); // passing extra arg to get method

console.log(
    something('id'),
    something('privateNode')
) // 1234 allmysecrets 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T03:53:04.747

另一种可能性是导出一个添加测试用例的函数。它不会导出任何超出范围（私人）的东西。

我主要使用 Mocha 进行测试，所以我从添加测试的那个函数中调用“describe()”和“it()”。例如，假设我创建了一个名为“whatever”的库。我可以创建一个函数“test”（或 _test、_addTests、...）：

```
var whatever = (function() {
  var insideClosure = "Ha ha!";
  return {

    // obviously you would have other functions too
    test: function() {
      describe('something', function() {
        it('should work', function() {
          assert.equal(insideClosure, "Ha ha!");
        });
      });
    }
  };
})(); 
```

然后我的 ./test/tests.js 会有：

```
whatever.test(); 
```

一个明显的坏点是您无法分离纯代码和测试（除非可能使用某种部署工作流程）。

# git - 您可以在 git diff 期间暂存文件（或至少是文件的一部分）吗？

> ID：14159985
> 
> 赞同：1
> 
> 时间：2013-01-04T15:28:28.250
> 
> 标签：git, diff, git-diff, git-index, git-stage

在暂存文件之前，我喜欢执行 a`git diff`以检查一切是否正常。当我垂直遍历一个差异时，我会记下每个“可以”用于暂存的文件。如果它是一个特别长的差异，我发现很难跟踪哪些是好的，所以我倾向于每隔一段时间退出差异并尽我所能。这有点乏味。

有没有办法改进这个工作流程？显然，一开始就不应该让他们的差异变得很大，但有时事情不会像那样进行（例如，更改跨多个文件调用的方法的方法签名）。

例如，是否可以将所有内容从当前活动的`git diff`“会话”的“顶部”到您所在的差异中的当前点？这样我就可以在不退出差异和失去思路的情况下继续进行演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:30:15.037

您可以通过部分添加来做到这一点：

```
git add -p 
```

它将带您浏览文件的不同部分，让您按您认为适合的方式暂存或忽略每个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:29:59.370

尝试`git add -p`改用。它将向您显示每个差异大块并询问您是否要添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T09:02:40.573

利用：

```
git add --interactive 
```

我在 ~/.bashrc 中为它创建了一个别名：

```
alias gi='git add --interactive' 
```

了解如何让我们充分发挥 git add -i 的潜力。它现在是我日常工作流程的一部分，也是我最喜欢 git 的地方之一！:)

其他答案隐藏了 git add -i 的其他不错的功能：

> ```
>  -p, --patch
>        Interactively choose hunks of patch between the index and the work tree
>        and add them to the index. This gives the user a chance to review the
>        difference before adding modified contents to the index.
> 
>        This effectively runs add --interactive,
>        but bypasses the initial command menu
>        and directly jumps to the patch subcommand.
>        See “Interactive mode” for details. 
> ```

# git - 如何增加 git reflog 输出的条目数？

> ID：14159987
> 
> 赞同：2
> 
> 时间：2013-01-04T15:28:52.850
> 
> 标签：git, git-reflog

我有一个我删除的分支（使用-D），但我需要它回来。我认为 git reflog 命令将是一个很好的查看位置。当我运行它时，我只看到显示了 50 个操作，并且我找不到该分支的任何提交。分支在一天前被删除，我的印象是它不会从 reflog 中删除 30 天。

有没有办法在 reflog 中查看更多条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:47:38.973

我无法回答指定的问题。据我所知`git reflog`输出所有条目。无论如何，我知道您想要的只是恢复已删除的分支。

我建议你使用`git fsck --unreachable`. 此命令输出所有无法访问的对象：blob、树、提交。然后你可以用它`git show`来查找丢失的提交。

如果您无法找到丢失的提交，那么我有一个坏消息。它不见了。

# ruby-on-rails - 运行规范抛出“Mysql2::Error: Table 'test_db.xxx' doesn't exist: TRUNCATE TABLE xxx

> ID：14159989
> 
> 赞同：9
> 
> 时间：2013-01-04T15:28:53.917
> 
> 标签：ruby-on-rails, rspec, capybara

使用 Rails 3.1.x、DatabaseCleaner gem 和 capybara 2，我在尝试运行测试时得到以下信息：

```
 Failure/Error: Unable to find matching line from backtrace
 ActiveRecord::StatementInvalid:
   Mysql2::Error: Table 'teambox_test_default.incoming_emails' doesn't exist: TRUNCATE TABLE incoming_emails
 # ./config/initializers/connection_fix.rb:24:in `execute'
 # -e:1:in `<main>' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T15:28:53.917

这可以通过运行解决：

```
bundle exec rake db:test:prepare 
```

# indexing - 我在 Cypher 中的 neo4j 索引查询有什么问题？

> ID：14159991
> 
> 赞同：3
> 
> 时间：2013-01-04T15:28:54.160
> 
> 标签：indexing, neo4j, cypher

使用 neo4j 社区的 1.9 版，我尝试使用小型“Cineast”数据集和“Matrix”数据集进行索引查询。在 webadmin 界面中，Cineasts 集有一个名为 Actor 的索引。

```
START n=node:Actor("name:*") RETURN n; 
```

这应该返回所有演员的名字，对吧？我没有收到错误消息，但有零行。

我知道那里有一个名叫 Paul Norell 的演员，所以我尝试了这个，但仍然得到相同的结果。

```
START n=node:Actor(name="Paul Norell") RETURN n; 
```

关于我做错了什么的任何想法？如何检查名称键/值对是否已编入索引，甚至哪些在索引中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:55:45.253

正如谷歌组中回答的那样：

`Actor.name`未在该数据集中编制索引。

只是`Actor.id`并且`Movie.id`有一个电影标题的“搜索”索引。

```
START n=node:Actor('id:*') RETURN count(*);

START n=node:Movie('id:*') RETURN count(*);
START n=node:Movie(id="601") RETURN n;

START n=node:search('title:*') RETURN count(*); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T17:27:10.013

```
START n=node:Actor(name="Paul Norell") RETURN n; 
```

`name="Paul Norell"`是您在 Actor 中索引的节点的属性。但是当您找到索引索引节点的键和值时，查询会正确。

例如：当您在 Actor 中使用键和值索引节点 x 时：name="Paul Norell"，您的查询是正确的！**注意：索引时的键和值**

# javascript - 检查 JS 值是否存在的最短方法是什么？

> ID：14159993
> 
> 赞同：2
> 
> 时间：2013-01-04T15:29:01.493
> 
> 标签：javascript

假设我有这个：

```
var a = parseInt(prompt("Enter A"));
var b = parseInt(prompt("Enter B"));
var c = parseInt(prompt("Enter C")); 
```

检查所有3个变量中是否存在值的*最短方法是什么？*

做 `if(a && b && c)` 是*不*准确的原因`0`是虚假的。

*ps **a,b,c 可以是整数或字符串**...另外，这里一定有技巧...*

对于字符串示例：

```
var a = (prompt("Enter A"));
var b = (prompt("Enter B"));
var c = (prompt("Enter C")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:32:50.643

无论类型如何，明确确认是否定义了所有这些值的唯一方法是：

```
if( (typeof a !== 'undefined') || 
    (typeof b !== 'undefined') || 
    (typeof c !== 'undefined')) { /* ... */ } 
```

不幸的是，依赖于价值观真实性的捷径，正如您所指出的，这并不总是一种可以接受的方法。

正如 Alex K 所示，如果您事先知道变量的类型，您可以做一些棘手的事情，但事先知道类型可能需要尽可能多的代码，就像您在比较中避免的那样。

**编辑 1**

Dave Newton 指出`prompt`总是返回一个定义的值；`null`如果用户按下取消，它会返回。

因此，更好的方法是：

```
function isValid(value) {
    return typeof value !== 'undefined' && value !== null);
}

if( isValid(a) && isValid(b) && isValid(c) ){ /* ... */ } 
```

**编辑 2**

当然，最简单的做法是在解析整数之前检查有效性。自从

```
!!""  === false
!!"0" === true
!!0   === false 
```

您可以`(a && b & c)`在提示返回的字符串/null 上使用，并且只有当它们有效时，才进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:33:01.670

这个怎么样：

```
ok = !isNaN(a+b+c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:55:55.167

始终使用：

```
if (typeof( variableName ) != "undefined") {
    //Do something
} 
```

由于 Javascript 使用 Json 对象表示法，以下代码完全有效：

```
var x = {};

if (x.test == undefined) {
    //Do something
} 
```

但如果“x”不存在，则会产生错误。在 Javascript 中无法做到这一点更安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:16:44.177

如果值只能是字符串或数字，则可以使用：

```
var valid = ('' + a) && ('' + b) && ('' + c); //always convert into string 
```

这里还有一个花哨但相对较短的，它处理`undefined`,`null`和空字符串：

```
var valid = [a].join() && [b].join() && [c].join(); 
```

在`Array.prototype.join()`中，当一个元素是`undefined`or`null`时，它将被转换为一个空字符串。

但它既不优雅也不高效。:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:53:00.697

你试过了`(!!a && !!b && !!c)`吗？

AFAIK，除非**字符串**变量的值为空，`null`否则`undefined`它应该评估为`true`. 0 也会返回`false`，但我代表您的`prompt()`来电写信，因为它的值不会是 Number 类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T16:10:45.480

检查一组变量是否具有有效、可接受的值的最短方法是根据您的规范创建一个辅助函数，该函数接受可变数量的参数。在此示例中，如果参数未定义、null 或 NaN 数字，此函数将返回 false。字符串将返回 true `isNaN`，因此我们在检查参数的类型是否为数字之前检查它是否为 NaN。

```
function isValid() {
    var i, args = Array.prototype.slice.call(arguments, 0);
    for(i = 0; i < args.length; i += 1) {
        if( typeof args[i] === 'undefined' || args[i] === null
        || (typeof args[i] === 'number' && isNaN(args[i]))
        ) {
            return false;
        }
    }
    return true;
} 
```

像这样使用它：

```
if( isValid(a, b, c) ) {
    ...
} 
```